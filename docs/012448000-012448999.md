# StackOverflow 问答 12448000-12448999

# .net - 如何为我的 WCF 服务启用 Azure 访问控制

> ID：12448003
> 
> 赞同：-1
> 
> 时间：2012-09-16T15:06:34.497
> 
> 标签：.net, authentication, azure, cloud

这篇[文章](https://azure.microsoft.com/en-us/documentation/articles/active-directory-dotnet-how-to-use-access-control/)

我按照上面的指南。自编写以来，管理似乎发生了变化，因为我找不到“单击服务总线、访问控制和缓存选项卡”。

我一直在阅读并得出结论，我应该在 Azure 上创建一个 Active Directory 以在我的 RESTful Servicve 中添加一些访问控制。现在我不知道如何启用/使用它。

关于如何继续的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T17:42:05.100

看起来您正在使用尚不支持管理 ACS 的新（预览版）门户。通过将鼠标悬停在页面顶部的绿色预览按钮，您可以选择切换回可以管理 ACS 的旧门户：

![在此处输入图像描述](../Images/b7803f7e18b51c44ee9bdb85b332245b.png)

或者，使用门户的直接 URL：http: [//windows.azure.com](http://windows.azure.com)

# android - 如何在android上的andengine中实现“慢动作”效果

> ID：12448004
> 
> 赞同：2
> 
> 时间：2012-09-16T15:07:06.743
> 
> 标签：android, andengine

我想放一个慢动作效果。我怎样才能做到这一点？我找到了这个[http://www.andengine.org/forums/post22443.html#p22443](http://www.andengine.org/forums/post22443.html#p22443)代码，但这是错误的方式。编辑。我不使用物理，只使用实体修饰符

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:07:22.013

我通过修改 MaxStepPhysicsEngine 来做到这一点，在 AndEngine 论坛上寻找它。我所做的是减少步长并相应地增加位置和速度计算的数量。

我看不出您找到的代码有什么问题，它似乎是比我的更优雅的解决方案。

# c# - 在单独的线程中定期更新数据（实际上是任务）

> ID：12448005
> 
> 赞同：0
> 
> 时间：2012-09-16T15:07:07.193
> 
> 标签：c#, wpf, performance, .net-4.0, task

我一直在考虑什么是在**C#**（.NET 4）中每`x`毫秒实现定期（相对长时间运行）计算的最佳解决方案。

 **1.  假设`x`是 10000（10 秒）。

    在这种情况下，最好的解决方案可能是`DispatcherTimer`每 10 秒滴答一次。
    函数中`void timer_Tick(object sender, EventArgs e)`只有启动的代码`Task`（假设完成长时间运行的任务需要大约 5 秒）。
    `timer_Tick`将立即退出，任务将忙于计算某些东西。

2.  `x`<1000（1 秒）呢？

    `Task`每 1 秒创建和启动一次会不会有很大的性能开销？
    如果不是，时间限制是`x`多少？我的意思是：对于一些小的`x`值，最好一直启动一个`Task`运行，直到程序不退出。在创建的任务内部，`DispatcherTimer`每秒都会`x`调用相对较长的运行函数（可能不是 5 秒，但现在 <1 秒；但仍然相对较长）。

    技术问题来了：如何启动`Task`将永远运行的程序（直到程序运行）？我只需要`Dispatcher Timer`在 内部`Task`，定期滴答`x`（`x`足够小）。
    我试过这样：

```
CancellationTokenSource CancelTokSrc = new CancellationTokenSource(); 
CancellationToken tok = CancelTokSrc.Token;
ConnCheckTask = new Task(() => { MyTaskMethod(tok); }, tok, TaskCreationOptions.LongRunning); 
```

```
void MyTaskMethod(CancellationToken CancToken)
{
    MyTimer = new DispatcherTimer(); // MyTimer is declared outside this method
    MyTimer.Interval = x;
    MyTimer.Tick += new EventHandler(timer_Tick);
    MyTimer.IsEnabled = true;

    while (true) ; // otherwise task exits and `timer_Tick` will be executed in UI thread
} 
```

* * *

## - 编辑： -

通过密集计算，我的意思是检查与指定服务器的连接是打开还是关闭。我想监控连接，以便在连接断开时提醒用户。

检查连接以这种方式实现（感谢**[Ragnar](https://stackoverflow.com/questions/5405895/how-to-check-internet-connection-with-net-c-wpf)**）：

```
private bool CheckConnection(String URL)
{
    try
    {
        HttpWebRequest request = WebRequest.Create(URL) as HttpWebRequest;
        request.Timeout = 15000;
        request.Credentials = CredentialCache.DefaultNetworkCredentials;
        HttpWebResponse response = request.GetResponse() as HttpWebResponse;

        return response.StatusCode == HttpStatusCode.OK ? true : false;
    }
    catch (Exception e)
    {
        Debug.WriteLine(e.ToString());
        return false;
    }
} 
```**

# lua - 在脚本中获取 Lua 运行时错误

> ID：12448012
> 
> 赞同：4
> 
> 时间：2012-09-16T15:07:33.173
> 
> 标签：lua

我不知道如何有效地调试脚本。我需要像 Python 这样的堆栈输出，但默认情况下 Lua/C 没有这个。我不知道如何启用它。或者简单地说，如何从脚本中获取错误输出？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T20:44:43.790

您可能正在寻找 xpcall 和 debug.traceback 的组合。您可以使用 xpcall 向其传递错误处理程序并使用 debug.traceback 获取堆栈跟踪：

```
function functionThatMayFail()
  error('Failed')
end
local success, result = xpcall(functionThatMayFail,
  function(err) return debug.traceback(err) end)
print(success, result) 
```

此代码将打印：

```
false   xpcall.lua:2: Failed
stack traceback:
    xpcall.lua:6: in function <xpcall.lua:6>
    [C]: in function 'error'
    xpcall.lua:2: in function <xpcall.lua:1>
    [C]: in function 'xpcall'
    xpcall.lua:5: in main chunk
    [C]: ? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T15:13:19.017

Lua 解释器默认会产生错误输出。例如（我在这个脚本中引入了一个错字）：

```
$ lua random.lua 
lua: random.lua:6: attempt to call global 'xists' (a nil value)
stack traceback:
    random.lua:6: in main chunk
    [C]: ? 
```

就错误输出而言，您能否澄清您正在尝试做的事情，或者更好的是您期望发生的事情没有发生？

# javascript - 防止正则表达式吃掉字符串的一部分

> ID：12448014
> 
> 赞同：-1
> 
> 时间：2012-09-16T15:07:44.073
> 
> 标签：javascript, regex

一些背景信息： 我正在编写一个程序，它允许使用 CSS 选择器分析文档的 DOM 树。我不能使用 querySelectorAll，因为我需要支持较旧的浏览器，即使在最新的浏览器中它也往往有问题，而且它还不够强大。这意味着我必须编写自己的 CSS 选择器引擎/解析器。

我有以下正则表达式。

```
var expression = /([^(>\+~)\\\(\)|^(>\+~)\\\[\]]+|\([^\)]+\)|\[[^\]]+\]|\\\.)+/g; 
```

它用于将选择器划分为以下格式的部分：[祖先，组合器，后代]。示例用法：

```
var selector = 'div[class]>a~p';
var parts = selector.match(expression); 
```

不幸的是，我得到的输出是这样的：

```
// parts: ['div[class]', 'a', 'p']; 
```

我希望输出是这样的：

```
// parts: ['div[class]', '>', 'a', '~', 'p']; 
```

所以问题是我不知道如何防止表达式吃掉组合子。有什么建议吗？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T15:12:19.893

不要尝试用正则表达式解析 CSS，它不是正则语言。有这方面的工具，而正则表达式不是一个。[这是我通过快速搜索找到的](http://www.glazman.org/JSCSSP/)

# configuration - 管理开源项目的配置

> ID：12448016
> 
> 赞同：1
> 
> 时间：2012-09-16T15:07:48.667
> 
> 标签：configuration, open-source, configuration-management

对于过去的几个项目，我使用 BitBucket 私有存储库来为不同项目保持生产就绪配置。该存储库中的每个项目都有自己的分支，以使敏感和私人信息远离公众视线。

有些项目是开源的，同时存在于真实的生产环境中；当需要使用诸如等工具进行部署时`chef`。`fabric`我只是检查有关项目的必要分支并将配置上传到生产服务器。

当您必须管理生产配置并同时保持项目开源时，我很好奇您如何管理开源项目的配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T21:14:57.560

简短的回答：应用程序存储库不应包含任何特定于部署的配置。

虽然不是应用程序代码的配置文件确实经常进入项目存储库以方便使用，但这通常是 a) 糟糕的安全实践（因此您不愿意开源它）和 b) 违反关注点分离。

相反，您应该为所有应用程序部署和脚本创建一个单独的存储库。部署存储库中的文件将引用您的应用程序存储库。按照这种模式，应用程序存储库包含“什么”，部署存储库包含“如何”——这通常会因部署而异。

此规则的例外情况包括在您的所有部署中永远不会更改的脚本或配置（例如，一个`Procfile`或一个守护程序脚本），因此应该保留在您的应用程序存储库中。

# android - 将 imageButtons 定位在某个图像附近

> ID：12448018
> 
> 赞同：0
> 
> 时间：2012-09-16T15:07:57.590
> 
> 标签：android, position, imagebutton

由于相当多的设备屏幕尺寸，我在某个图像附近的 ImageButtons 定位存在问题。可以将所有内容定位为 1 或 2 个屏幕尺寸，但不能再定位，因为它会定位在错误的位置。我已经为这个问题寻找了任何解决方案，并发现优化所有图像可能会`distances programmatically but a lot of programmmatical properties require 11 API for it. My app should work with 2.2, 2.3 versions too. Another solution is the creating of layout qualifiers but there is some screen sizes where my imageButtons position a bit wrongly and this way demand to create a lot of files, folders. Could you recommend me something interesting in this issue? Something what is more optimal and doesn`过多地消耗设备性能。我尝试实现这张图片[http://s018.radikal.ru/i507/1209/07/e3f1024a5780.jpg](http://s018.radikal.ru/i507/1209/07/e3f1024a5780.jpg)

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/rlInjury"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/background"
android:padding="10dp" >

<ImageView
    android:id="@+id/imMonkey"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:scaleType="fitCenter"
    android:scaleX="0.8"
    android:scaleY="0.8"
    android:src="@drawable/monkey" />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:orientation="vertical" >

        <ImageButton
            android:id="@+id/ib1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@android:color/transparent"
            android:scaleType="fitCenter"
            android:src="@drawable/pointer1" />

        <ImageButton
            android:id="@+id/ib2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@android:color/transparent"
            android:scaleType="fitCenter"
            android:src="@drawable/pointer3" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:orientation="vertical" >

        <ImageButton
            android:id="@+id/ib4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@android:color/transparent"
            android:scaleType="fitCenter"
            android:src="@drawable/pointer2" />

        <ImageButton
            android:id="@+id/ib5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@android:color/transparent"
            android:scaleType="fitCenter"
            android:src="@drawable/pointer2" />
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T15:17:33.653

在我看来，您应该为每个屏幕尺寸的设备创建布局 (xml) 文件，例如 layout-small、layout-large、layout-medium。我认为没有这样的方法。

# objective-c - 带框架的UILabel

> ID：12448019
> 
> 赞同：1
> 
> 时间：2012-09-16T15:07:58.287
> 
> 标签：objective-c, xcode

我正在`UILabel`动态添加一个，但我不知道如何选择框架，以便该框架完全适合文本和字体大小。

```
UILabel *myLabel = [[UILabel alloc] initWithFrame:myView.frame]; 
```

上面的`initWithFrame`标签显然太大了。有没有办法使框架与标签的宽度和高度完全吻合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T15:23:35.197

只需使用`-sizeToFit`适合字体大小的方法：

```
[myLabel sizeToFit]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T15:17:55.330

您可以使用[`sizeWithFont:`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/NSString_UIKit_Additions/Reference/Reference.html#//apple_ref/occ/instm/NSString/sizeWithFont%3a)或[`sizeWithFont:forWidth:lineBreakMode:`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/NSString_UIKit_Additions/Reference/Reference.html#//apple_ref/occ/instm/NSString/sizeWithFont%3aforWidth%3alineBreakMode%3a)确定具有特定字体的字符串的大小。然后您可以将 UILabels 框架设置为具有该大小。

# scheme - 定义一个三元素间隔列表？

> ID：12448023
> 
> 赞同：-2
> 
> 时间：2012-09-16T15:08:44.873
> 
> 标签：scheme

定义一个过程 triscet，它采用一个二元素数字列表，表示数字轴上的 [a, b] 区间，其中 a < b。返回一个由三个元素组成的区间列表，它是将给定区间分成三个相等长度的结果。IE

```
(trisect '(-4 8))
((-4 0) (0 4) (4 8)) 
```

帮助编写程序？

```
(define triscet
  (lambda '(a b)
   (if < a b)
    (cons (quotient a 3(cons (quotient b 3 ls)))))) 
```

我朝着正确的方向前进吗？还是我的逻辑完全错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T16:09:10.417

到目前为止，您的解决方案并未走上正轨。首先，从提供的输入中，您应该收到一个包含两个元素*列表*的参数，而不是两个参数。而且您不需要检查一个是否小于另一个（除非您希望收到不正确的输入，并且仅作为错误检查）。

让我们考虑一下需要做什么才能将区间分成三个部分。这是帮助您入门的解决方案的一般结构（假设输入正确），您自己填写空白：

```
(define (trisect interval)
  (let* ((start  <???>)  ; start of interval
         (end    <???>)  ; end of interval
         (offset <???>)) ; size of each chunk if we divide the interval in 3
    (list (list start <???>)  ; 1st subinterval: [start, start+offset]
          (list <???> <???>)  ; 2nd subinterval: [start+offset, start+2*offset]
          (list <???> end)))) ; 3rd subinterval: [start+2*offset, end] 
```

# spring - @Transational 在春季不会保留数据

> ID：12448027
> 
> 赞同：1
> 
> 时间：2012-09-16T15:08:48.850
> 
> 标签：spring, jpa-2.0, glassfish-3, jta

我使用 Spring 3.0.6、GlassFish 3.1、EJB 3、JPA 2，我的提供者是 EclipseLink (JPA 2.0)

我的 webApplication 有这些配置文件：

持久性.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="ejb_transportPU" transaction-type="JTA">
<provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
<jta-data-source>tranEnterprise</jta-data-source>    
  <properties>
  <property name="eclipselink.target-server" value="SunAS9"/>
  <property name="eclipselink.logging.level" value="FINEST"/>
  <property name="eclipselink.target-database" value="org.eclipse.persistence.platform.database.MySQLPlatform"/>
</properties>
<exclude-unlisted-classes>false</exclude-unlisted-classes>
</persistence-unit>
</persistence> 
```

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:p="http://www.springframework.org/schema/p"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:aop="http://www.springframework.org/schema/aop"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xsi:schemaLocation="
   http://www.springframework.org/schema/beans
   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://www.springframework.org/schema/aop
   http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
   http://www.springframework.org/schema/tx 
   http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
   http://www.springframework.org/schema/context 
   http://www.springframework.org/schema/context/spring-context-3.0.xsd 
   ">

<bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
<property name="jndiName" value="tranEnterprise"/>
</bean>
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="persistenceUnitName" value="ejb_transportPU"/>
    <property name="loadTimeWeaver">
        <bean class="org.springframework.instrument.classloading.glassfish.GlassFishLoadTimeWeaver"/>
    </property>
    <property name="jpaVendorAdapter">
        <bean
        class="org.springframework.orm.jpa.vendor.EclipseLinkJpaVendorAdapter">
        <property name="showSql" value="true" />
    </bean>
</property>
<property name="jpaDialect">
    <bean
        class="org.springframework.orm.jpa.vendor.EclipseLinkJpaDialect" />
</property>
</bean>
<tx:jta-transaction-manager />
<bean id="persistenceAnnotation" class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />
</beans> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

<context-param>
<param-name>contextConfigLocation</param-name>
<param-value>/WEB-INF/applicationContext.xml</param-value>
</context-param>

<listener>
<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
<servlet-name>dispatcher</servlet-name>
<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
<load-on-startup>2</load-on-startup>
</servlet>
<servlet-mapping>
<servlet-name>dispatcher</servlet-name>
<url-pattern>*.htm</url-pattern>
</servlet-mapping>
<session-config>
<session-timeout>
    30
</session-timeout>
</session-config>
<welcome-file-list>
<welcome-file>redirect.jsp</welcome-file>
</welcome-file-list>
</web-app> 
```

我的控制器方法：

```
 @Transactional
    @RequestMapping(method = RequestMethod.POST)
    public String onSubmit(@ModelAttribute("contract") Contract contract)
    {
        try
        {
            contractBean.creatCotract(contract);                
        } catch (Exception e)
        {
            e.printStackTrace();
        }
        return "someThing";
    } 
```

该项目显示数据，但不将数据保存在数据库中。我搜索了一周，但找不到任何答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T16:19:28.517

你不见了`<tx:annotation-driven />`

# linux - 从 ubuntu 服务器获取文件

> ID：12448028
> 
> 赞同：1
> 
> 时间：2012-09-16T15:09:05.103
> 
> 标签：linux, ubuntu, wget, mailx

我有一个运行数据库备份的 Ubuntu 服务器。如何获得备份？我正在使用 *.pem 文件登录。我一直在尝试使用mailx 发送邮件。我执行命令但没有成功。我没有收到错误消息

```
echo "something" | mailx -s "subject" mymail@gmail.com 
```

我知道这是没有附件的。如何让这个工作？使用 wget 我需要一个网址吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T15:18:35.167

我建议使用`scp`which 通过 SSH 运行，因此比`wget`. 您需要运行 SSH 服务器来执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T16:05:08.247

将文件放入工作目录的正确用法是

```
$ scp -i myPem.pem  ubuntu@ec2-77-237-115-112.eu-west-1.compute.amazonaws.com:/home/ubuntu/logo.png . 
```

# angularjs - 带有 Bootstrap 可见电话的 AngularJS ng-show

> ID：12448029
> 
> 赞同：0
> 
> 时间：2012-09-16T15:09:09.673
> 
> 标签：angularjs

我有以下 HTML 片段：

```
<div ng-show="loggedIn()" class="visible-phone">Show only on phone and if logged in.</div> 
```

在 JS 中：

```
$rootScope.loggedIn = function () {
    return window.usr ? true : false;
}; 
```

但是无论值如何，始终显示该元素`loggedIn()`。有什么解决办法吗？（或至少解决方法）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T23:55:15.257

如果在调用 $rootScope.loggedIn 函数之前将 window.usr 设置为“true”，那么这将起作用。我怀疑情况不会如此。我建议您重新考虑直接使用 window 对象。如果您要将身份验证逻辑封装在 Angular 服务中，您会得到更好的服务。

我强烈建议您查看[Witold Szczerba 的 http auth implementation](https://github.com/witoldsz/angular-http-auth)

# lisp - 在 Windows 下运行在 emacs 上的方案实现，用于通过 SICP 工作

> ID：12448031
> 
> 赞同：4
> 
> 时间：2012-09-16T15:09:28.397
> 
> 标签：lisp, scheme, mit-scheme

我想找到在 Windows 下的 emacs 上运行的方案实现，以便通过 SICP 工作。我想到了 MIT 方案，但它的官方网站说[在 GNU Emacs 下运行 MIT/GNU 方案的代码在 Windows 上不起作用](http://www.gnu.org/software/mit-scheme/)，我不想在 Windows 上使用它的默认编辑器。我如何在 Windows 下解决这个问题？是否有任何方案实施可以做到这一点？我试过[Petite Chez Scheme](http://www.scheme.com/petitechezscheme.html)。但是通过 SCIP 工作存在一些问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T16:53:09.027

目前最友好的 Scheme 环境是 Dr Racket，您可以从[http://racket-lang.org/](http://racket-lang.org/)获得。它在 Racket 之上提供了一个图形 IDE，支持多种 Scheme 变体。

要将 Dr Racket 与 SICP 一起使用，首先打开 Dr Racket，然后替换第一行，上面写着类似

```
#lang scheme 
```

和

```
#lang planet neil/sicp 
```

然后点击右上角的绿色运行按钮。这将开始从 Racket 的存储库下载一个 SICP 包并安装它（您可以显示日志以查看发生了什么）。

完成后，您应该能够运行`(dec 5)`并获取`4`，并`(inc 3)`获取`4`。

**编辑：**如果您想查看它的文档，请`neil/sicp`访问[http://www.neilvandyke.org/racket-sicp/](http://www.neilvandyke.org/racket-sicp/)，但是关于该软件包的了解并不多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-25T15:37:45.547

正如[另一个答案](https://stackoverflow.com/a/12481548/3324095)所提到的，Racket 可能是 Windows 最好/最广泛使用的方案实现。通过 SICP 工作时，您可以使用`#lang sicp`.rkt 文件顶部的指令。

要获得不错的功能（REPL、语法高亮等），您可以安装 emacs [racket-mode](https://github.com/greghendershott/racket-mode)。此后，您应该能够在 emacs 中打开您的 .rkt 文件并使用`C-c C-c`* 运行它。

*请注意，我需要将*球拍程序*变量显式设置为“C:\\Program Files\\Racket\\Racket.exe”。

# android - android，谷歌地图错误：BaseTileRequest，服务器返回：3

> ID：12448034
> 
> 赞同：0
> 
> 时间：2012-09-16T15:09:38.100
> 
> 标签：android, google-maps-api-3, itemizedoverlay

我在开发一些自定义地图叠加层时遇到了一些奇怪的错误，有人遇到过这些吗？请帮助，提前tks。

```
BaseTileRequest.readResponseData(BaseTileRequest.java:115)
MapService$MapTileRequest.readResponseData(MapService.java:1473)
MapService$MapTileRequest.readResponseData(MapService.java:1473)

09-17 00:53:25.933: WARN/System.err(32480): java.io.IOException: Server returned: 3
09-17 00:53:25.933: WARN/System.err(32480): at android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData(BaseTileRequest.java:115)
09-17 00:53:25.938: WARN/System.err(32480): at android_maps_conflict_avoidance.com.google.googlenav.map.MapService$MapTileRequest.readResponseData(MapService.java:1473)
09-17 00:53:25.938: WARN/System.err(32480): at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.processDataRequest(DataRequestDispatcher.java:1117)
09-17 00:53:25.943: WARN/System.err(32480): at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.serviceRequests(DataRequestDispatcher.java:994)
09-17 00:53:25.943: WARN/System.err(32480): at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher$DispatcherServer.run(DataRequestDispatcher.java:1702)
09-17 00:53:25.948: WARN/System.err(32480): at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T15:36:34.747

尽管我遵循[了这里](https://developers.google.com/maps/documentation/android/mapkey)所说的一切，但我确实遇到了这个问题。

假设您确实遵循了此链接，这就是我解决问题的方法：

**很长的故事 ：**

一切正常，直到我将整个项目复制到另一台 PC 上并将其导入 Eclipse。这会改变一切，因为您获得的 API 密钥与您用于生成 API 密钥的机器上的调试密钥库相关联。由于我在另一台机器上运行/调试 android 应用程序（因此另一个调试密钥库），API 密钥无效。所以我必须生成一个新的 API 密钥，如下所述。

**短篇故事 ：**

如果您正在使用另一台机器，请通过计算[此处](https://developers.google.com/maps/documentation/android/mapkey#getdebugfingerprint)描述的 MD5 指纹**生成新**的 API 密钥，然后使用此 MD5 指纹[在此处生成 API 密钥。](https://developers.google.com/android/maps-api-signup)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T15:37:57.853

我以前也遇到过这个问题，可能是几个原因造成的，检查这些东西通常可以解决。

1.  您使用的地图 api 密钥是错误的。请记住，此密钥适用于每次安装的 Android，因此如果您更换了计算机，则需要重新生成一个新密钥。这是最有可能的问题。

2.  如果您使用的是 eclipse，则 java 构建路径可能存在错误/设置错误。我发现 google-maps 导入可能需要在 Eclipse 的构建路径声明中位于顶部或靠近它的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T17:00:19.000

当您尝试获取 MD5 指纹时，keytool 命令可能会返回 SH1。在这种情况下，在“keytool”命令之后使用“-v”来获得 MD5 指纹

# mysql - 按 MySQL 中的最新发布日期排序

> ID：12448036
> 
> 赞同：0
> 
> 时间：2012-09-16T15:09:43.950
> 
> 标签：mysql, sql-order-by

我有这个代码：

```
$result = mysql_query("SELECT 
f_type.`id` AS type_id,
f_type.`name` AS type_name,
f_thread.`id` AS thread_id,
f_thread.`uid`,
f_thread.`title` AS thread_title,
f_thread.`hits`,
u.`username`

FROM `forum_type` AS f_type
LEFT JOIN `forum_thread` AS f_thread
ON f_type.`id` = f_thread.`type_id` 
LEFT JOIN `users` AS u
ON u.`id` = f_thread.`uid` 
LEFT JOIN `forum_posts` AS f_posts
ON f_posts.`type_id` = f_thread.`id`    

WHERE f_type.`id` = '".$_GET['type_id']."'
ORDER BY f_posts.`date` DESC
") or die (mysql_error()); 
```

这是关于一个论坛的，我希望对主题进行排序，就像检查该论坛中的最新帖子一样。

我使用 forum_type (f_type) 作为论坛的子类别，它是顶级类别。所以它的层次结构就像这个列表：

1.  论坛
2.  论坛类型
3.  论坛线程
4.  论坛帖子

就像我在代码中编写的查询一样，我想按最新的发布日期排序......但它没有按那个排序。我实际上不知道它是由什么订购的……看不到计划。我猜这个问题是由这些多重连接引起的，但我不确定。

我将不胜感激任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T15:20:51.083

好吧，如果要列出线程，您可能希望按线程分组并选择每个线程的最大发布日期。

```
SELECT 
f_thread.`id` AS thread_id,
f_thread.`uid`,
f_thread.`title` AS thread_title,
f_thread.`hits`,
u.`username`,
max(f_posts.date) as last_post_date

FROM `forum_thread` AS f_thread
LEFT JOIN `users` AS u
ON u.`id` = f_thread.`uid` 
LEFT JOIN `forum_posts` AS f_posts
ON f_posts.`type_id` = f_thread.`id`    

WHERE f_thread.type_id = ".$_GET['type_id']."

GROUP BY thread_id
ORDER BY last_post_date DESC 
```

希望有帮助。f_posts.type_id 有点可疑，也许表中有一个 thread_id 代替？

# command-line - 如何在 XP 中从命令行或系统调用打开“性能选项”对话框

> ID：12448042
> 
> 赞同：2
> 
> 时间：2012-09-16T15:10:15.770
> 
> 标签：command-line, windows-xp

有没有办法在 Windows XP 中使用命令行或系统调用自动打开 Windows“高级性能选项”对话框？

要到达那里很长的路要走开始，右键单击“计算机”，然后选择“高级系统设置”->“设置”->“高级选项卡”。

在 Windows 7 中，我可以使用命令：SystemPropertiesPerformance /pagefile

但在 Windows XP 中：我只能使用以下命令访问高级选项卡：control Sysdm.cpl,,3

我需要从 Windows XP 的命令行打开虚拟内存设置页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T02:52:36.360

我花了 5 个小时寻找你，我发现是这样的：搜索引擎询问、雅虎、谷歌、dogpile 等什么都没有。我阅读了大量关于 2000 和 xp 的 technet 库，但一无所获。我还尝试 explore /n::{clsid} 尝试各种配置无济于事。我还尝试了 shell:command 的各种语法，但没有任何好处。我确实找到了一个命令行工具，可以显示内存并对其进行编辑。

wmic memphysical 列表已满，然后在 microsoft.com 上有 pagefileconfig.vbs

# javascript - 本地 JavaScript 混淆器

> ID：12448044
> 
> 赞同：0
> 
> 时间：2012-09-16T15:10:23.660
> 
> 标签：javascript, obfuscation

我整天都在寻找一个不错的 JavaScript 混淆器。我发现的大多数工具都很古怪，如果有用的话。

我不关心逆向工程。我需要混淆来尽可能多地向用户隐藏特定于域的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T15:13:37.710

你试过[免费的 JavaScript 混淆器](http://javascriptobfuscator.com/default.aspx)吗？它的工作是让你的代码尽可能地不可靠。

如果您愿意，还有[Google Closure Compiler](http://closure-compiler.appspot.com/home)，但它不像前者那样容易混淆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T15:14:24.520

我*总是*使用[闭包编译器](http://closure-compiler.appspot.com/home)，它有一个 api 和一个 gui。gui 有点困难，但是一旦你设置好它，它就会将你的代码编译成更好的代码并同时进行混淆！

# php - 将裁剪添加到 PHP 图像调整大小脚本

> ID：12448047
> 
> 赞同：0
> 
> 时间：2012-09-16T15:10:49.357
> 
> 标签：php, crop, image-uploading

我有一个现有的图像上传脚本（如下），它工作正常，但我想为其添加一个裁剪功能，因此每张上传的照片都保持正确的纵横比，但被裁剪为 200 x 200 像素。

我已经查看了与此相关的其他关于 SO 的问题，但理想情况下，我想在我的脚本中添加裁剪，而不是实现一个全新的，如果这有意义的话。

有人可以帮忙吗？

一如既往地感谢。

```
mkdir("images/$user_id");
$saveto = "images/$user_id/$user_id.jpg";
move_uploaded_file($_FILES['image']['tmp_name'], $saveto);
$typeok = TRUE;

switch($_FILES['image']['type'])
{
    case "image/gif":   $src = imagecreatefromgif($saveto); break;

    case "image/jpeg":  // Both regular and progressive jpegs
    case "image/pjpeg": $src = imagecreatefromjpeg($saveto); break;

    case "image/png":   $src = imagecreatefrompng($saveto); break;

    default:            $typeok = FALSE; break;
}

if ($typeok)
{

    list($w, $h) = getimagesize($saveto);
    $max = 200;
    $tw  = $w;
    $th  = $h;

    if ($w > $h && $max < $w)
    {
        $th = $max / $w * $h;
        $tw = $max;
    }
    elseif ($h > $w && $max < $h)
    {
        $tw = $max / $h * $w;
        $th = $max;
    }
    elseif ($max < $w)
    {
        $tw = $th = $max;
    }

    $tmp = imagecreatetruecolor($tw, $th);
    imagecopyresampled($tmp, $src, 0, 0, 0, 0, $tw, $th, $w, $h);
    imageconvolution($tmp, array( // Sharpen image
                            array(-1, -1, -1),
                            array(-1, 16, -1),
                            array(-1, -1, -1)
                           ), 8, 0);
    imagejpeg($tmp, $saveto);
    imagedestroy($tmp);
    imagedestroy($src);

} 
```

编辑：我发现以下脚本在其自己的页面上运行良好，但是我无法在现有的上传脚本中或之后实现它 - 我得到一些“无法打开流：没有这样的文件或目录' 错误 - 但是图像的路径是正确的（我已经确认它是正确的）：

```
$filename = 'images/$user_id/$user_id.jpg';

// Get dimensions of the original image
list($current_width, $current_height) = getimagesize($filename);

// The x and y coordinates on the original image where we
// will begin cropping the image
$left = 25;
$top = 25;

// This will be the final size of the image (e.g. how many pixels
// left and down we will be going)
$crop_width = 200;
$crop_height = 200;

// Resample the image
$canvas = imagecreatetruecolor($crop_width, $crop_height);
$current_image = imagecreatefromjpeg($filename);
imagecopy($canvas, $current_image, 0, 0, $left, $top, $current_width, $current_height);
imagejpeg($canvas, $filename, 100); 
```

有人可以帮我把这两个放在一起吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T16:27:42.210

看看：[Gregwar/Image](https://github.com/Gregwar/Image)

它非常易于使用，而且非常高效。

*   resize($width, $height, $background): 调整图像大小，将保持比例并且从不放大

*   scaleResize($width, $height, $background)：调整图像大小，将保留比例

*   forceResize($width, $height, $background): 调整图片大小，将图片强制调整为 $width by $height

*   cropResize($width, $height, $background): 调整图像大小并保留比例并裁剪空白

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T17:04:17.767

感谢大家的回复-我通过更改使我的脚本正常工作

```
$filename = 'images/$user_id/$user_id.jpg'; 
```

至

```
$filename = "images/$user_id/$user_id.jpg"; 
```

# c# - 绑定到模型并避免代理属性

> ID：12448054
> 
> 赞同：-1
> 
> 时间：2012-09-16T15:11:24.963
> 
> 标签：c#, wpf, design-patterns, user-interface, mvvm

以下代码说明了我的问题：

```
public class Person : (INotifyPropertyChanged) // INPC only for PersonViewModelB
{
    public string Name {get; set;}
}

public class PersonViewModelA : INotifyPropertyChanged
{
    private Person _person {get; set;}

    public string Name 
    {
        get { return _person.Name; }
        set { _person.Name = value; }
    }

    //XAML: {Binding Name}
}

public class PersonViewModelB : INotifyPropertyChanged
{
    private Person Person {get; set;}

    //XAML: {Binding Person.Name}
} 
```

在许多示例中，我看到了像 PersonViewModelA 这样的东西。我不明白它的好处。对我来说，PersonViewModelB 更干净，更干燥。

在这两种情况下，我都可以向 ViewModel（例如 IsSelected）或计算字段（例如 Name = FirstName + " " + LastName）添加额外的视图特定字段。如果我有一个丰富的域模型，为什么我不能将它暴露给视图？

在 Asp.net MVC 中，我们学会了直接绑定到模型，这很好，但在 WPF 中不是吗？为什么？

什么证明额外的开销是合理的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T15:21:27.213

当你看到像 A 这样的方法时，要么是底层对象不支持，要么是因为`INotifyPropertyChanged`实际实现需要灵活性。

看到它`Person`可以改变，然后你需要重建你的 UI。但是考虑一下您的逻辑驻留在另一个 DLL 上并将您的 ViewModel 绑定到代理的场景。那么你的模型是否改变也没关系，你不需要再次重新编译你的UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T15:25:50.543

MVVM 与没有 View-Model 的 MVC 不同（更像是一个三角形而不是一条线）。不直接绑定到模型的一个原因是保持依赖最小化，因此如果模型发生变化，您可能只需要调整 VM 而不是 VM*和*视图。

# java - 如何使用 MULE ESB pop3 入站端点来监听未读消息

> ID：12448059
> 
> 赞同：0
> 
> 时间：2012-09-16T15:12:00.417
> 
> 标签：java, esb, mule

如何使用 MULE ESB pop3 入站端点来监听未读消息？我正在使用 MULE 3.3 版本

配置：

我的 POP 连接器：

```
<pop3s:connector name="pop3Connector"
                 defaultProcessMessageAction="RECENT"
                 checkFrequency="1000"
                 deleteReadMessages="false"/> 
```

我的入站端点：

```
<pop3s:inbound-endpoint connector-ref="pop3Connector" host="pop.gmail.com"
                responseTimeout="10000" doc:name="POP3"
                 password="mypassword" port="995"
                 user="myemailid" /> 
```

当我运行应用程序时，入站会从我的收件箱中获取所有可用的邮件。但我只需要最近的未读邮件

# c# - ISO-8859-6 到 UTF-8

> ID：12448060
> 
> 赞同：1
> 
> 时间：2012-09-16T15:12:08.177
> 
> 标签：c#, encoding, arabic

如何将 ISO-8859-6 转换为阿拉伯语？

我有一些编码字符，例如`ÇÎÊÈÇÑ`. 这只不过是英语和`اختبار`阿拉伯语的“测试”。

我希望这些字符作为输入，阿拉伯语作为输出。要在 Notepad++ 中进一步测试，请尝试以下步骤以获得更好的想法。

1.  创建新文件并粘贴`ÇÎÊÈÇÑ`进去。
2.  转到编码菜单导航 -> 字符集 -> 阿拉伯语 -> ISO-8859-6/Windows-1256

它显示阿拉伯字符，不过是“测试”（`Google Translator`）。实际上，我想复制相反的过程，但是我无法执行相同的过程 L。这是我正在尝试的代码：

```
byte[] utf8Bytes = Encoding.UTF8.GetBytes("ÇÎÊÈÇÑ");
System.Text.Encoding iso_8859_6 = System.Text.Encoding.GetEncoding("ISO-8859-6");
byte[] isoBytes = Encoding.Convert(Encoding.Unicode, iso_8859_6, utf8Bytes);
string unicodeconverted = Encoding.Unicode.GetString(isoBytes);
//string uf8converted = Encoding.UTF8.GetString(isoBytes); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T20:08:03.907

windows-1256 文件到 utf8 的快速转换：

```
string data = File.ReadAllText(path, Encoding.GetEncoding("windows-1256"));  
File.WriteAllText(path, data, Encoding.UTF8); 
```

# java - 为什么 GWT 不序列化异常的原因链？

> ID：12448061
> 
> 赞同：2
> 
> 时间：2012-09-16T15:12:18.587
> 
> 标签：java, gwt, exception, serialization

在我的 GWT 项目中，我为要在服务调用中抛出的异常链创建了一个精心设计，结果发现`getCause()`总是`null`在客户端的`onFailure()`方法中返回。

通过GWT序列化代码调试后，发现这段代码在`SerializabilityUtil`：

```
private static boolean fieldQualifiesForSerialization(Field field) {
    if (Throwable.class == field.getDeclaringClass()) {
        /**
         * Only serialize Throwable's detailMessage field; all others are ignored.
         *
         * NOTE: Changing the set of fields that we serialize for Throwable will
         * necessitate a change to our JRE emulation's version of Throwable.
         */
        if ("detailMessage".equals(field.getName())) {
            assert (isNotStaticTransientOrFinal(field));
            return true;
        } else {
            return false;
        }
    } else {
        return isNotStaticTransientOrFinal(field);
    }
} 
```

任何人都可以在这里帮助我，为什么 GWT 设计人员会将其放入他们的代码中？真的有什么问题（或安全敏感）`Throwable.cause`吗？

这被认为是理所当然的，我如何告诉 GWT 序列化为我的异常类创建一个异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T15:28:39.453

请注意代码中的注释，`Changing the set of fields that we serialize for Throwable will necessitate a change to our JRE emulation's version of Throwable.`这就是代码存在的原因，因为 Throwable 是 Java，而不是 Javascript，因此，任何被序列化以在客户端捕获的内容都必须与 GWT 的 JRE 类的 Javascript 实现兼容。查找[GWT JRE 仿真参考](https://developers.google.com/web-toolkit/doc/1.6/RefJreEmulation)以获取更多信息。

（请注意，他们可能试图更积极地在客户端实现 Throwable 子类，但即使他们这样做了，他们仍然无法确保出现某些第三方库的异常，并且这会破坏客户端反序列化。）

在我的项目中，我也有一个相当复杂的异常链。我所做的是确保在所有异常对象构造函数中保留消息，而不是原因。不幸的是，一些 Java 异常，容我们说，就它们的消息而言并不那么冗长，例如，与 C# 相反。例如，NullPointerException 有一个完全空的消息，而 ArrayIndexOutOfBoundsException 只是有一个数字。因此，我小心地将原因异常的名称嵌入到消息中的构造函数中。

它并不完美，但它有效。

# ios - iOS：阻止编程疑虑

> ID：12448063
> 
> 赞同：1
> 
> 时间：2012-09-16T15:12:26.133
> 
> 标签：ios, objective-c-blocks

我知道有关 Obj C 块编程的高级概念。但是，我对 Obj C 代码中的块编程几乎没有疑问。块编程的几个概念如下所述，所以我对每个概念的问题也如下：

1.  它支持异步操作： 问：请问，这是什么意思？块代码支持什么样的异步操作？

2.  块代码独立于其他代码工作（执行）： 问：这是否意味着它在不同的线程中运行？无论其他代码同时执行，此代码是否都会执行？

3.  Q：块枚举是什么意思？

有人请教我这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T15:44:04.200

块用于各种事情。您使用它们的方式可以使它们非常强大。

例如，块通常被用作执行委托方法通常所做的事情的一种方式，即它们作为参数传递并存储在一边，然后在某些操作完成后调用。这样，它们可以用作“异步操作”，因为它们可以在以后调用。

可以将块视为异步的用法示例是在委托方法中调用它们以使其比委托更易于使用：

```
typedef void (^BlockAlertViewCompletion)(UIAlertView* alert, NSInteger clickedButton);

@interface BlockAlertView : UIAlertView <UIAlertViewDelegate>
-(void)showWithCompletion:(BlockAlertViewCompletion)completion;
@property(nonatomic, copy) BlockAlertViewCompletion completionBlock;
@end

@implementation BlockAlertView
@synthesize completionBlock = _completionBlock;
-(void)showWithCompletion:(BlockAlertViewCompletion)completion;
{
  // Store the block for latter use
  self.completionBlock = completion;
  self.delegate = self; // Make ourselves as the delegate of UIAlertView
  [self show];
}

// Then much later, the delegate method will be called ASYNCHRONOUSLY
-(void)alertView:(UIAlertView*)alert clickedButtonAtIndex:(NSInteger)buttonIndex
{
  // Then call the block here to signal the called a button has been clicked
  self.completionBlock(alert, buttonIndex);
}

-(void)dealloc { [_completionBlock release]; [super dealloc]; }
@end

// Usage:
BlockAlertView* alert = [[[BlockAlertView alloc] initWithTitle:@"Hello" message:@"Hello World!" delegate:nil cancelButtonTitle:@"Hi yourself" otherButtonTitles:@"I'm not very polite",nil];
// This will show the alert immediately (will call [alert show] eventually)
[alert showWithCompletion:^(UIAlertView* alert, NSInteger btnIndex)
 {
     // But this code in the block will only be called when the delegate method
     // of UIAlertView will be triggered, so this code will be executed asynchronously / later, and not right away
     NSLog(@"Button %d clicked", btnIndex);
 }];
// So after the alert view has been shown on screen, the rest of the code below will continue executing
NSLog(@"The alert view has been shown on the screen, but the completionBlock passed a the parameter to showWithCompletion: has not been executed yet and will only execute when the delegate method is called");
[alert release]; 
```

* * *

严格来说，块并不真正独立于其他代码执行。它们基本上是添加了上下文以捕获周围变量的函数指针。它们可以在您想要的任何线程中执行。如果您直接在当前线程中执行它们，如下例所示，它们不会与其他代码并发：

```
// Declare some block
dispatch_block_t block = ^{ NSLog(@"Hello world"); };
// Execute it right away
block(); // this executes the same way that is you have wrote the NSLog here, so this is not concurrent with the rest of the code. 
```

但是使用 GCD，您可以在独立线程上将块添加到 GCD 队列并要求该线程执行该块。从这个意义上说，块中声明的代码独立于应用程序的其余部分执行

```
dispatch_block_t block = ^{  NSLog(@"Hello world"); };
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
// Execute the block on a secondary queue, in parallel with the current code. This is concurrent execution, the block will execute independently to the rest of the code.
dispatch_async(queue, block); 
```

您还可以解释“块独立于其他代码执行”的想法，因为它们捕获了它们的上下文和它们需要的变量，并且可以稍后使用这些变量的值在创建块时捕获......即使变量已更改和/或超出范围：

```
-(void)createBlockAndCaptureVariables
{
  int a = 5;
  int b = 12;
  // Create a block. It will capture the values of a and b at that time
  dispatch_block_t block = ^{ NSLog(@"a*b = %d", a*b); };
  // Even if you change the values of a and b later…
  a = 7;
  b = 25;
  // when you execute the block here, it won't be affected by the fact that a and b have changed
  [self testBlock:block]; // Will log a*b = 60
}
-(void)testBlock:(dispatch_block_t)aBlock
{
  // And the block can be executed here and print the value of a*b, even if a and b
  // Are out of scope and not accessible in this testBlock method.
  aBlock();
} 
```

希望这些小例子有所帮助。

# javascript - 用 javascript / jquery 替换变量

> ID：12448069
> 
> 赞同：-1
> 
> 时间：2012-09-16T15:13:20.513
> 
> 标签：javascript, jquery

我希望能够使用 onclick jquery 函数向我的 html 添加一些变量值：

例如：

```
<script>
$("#myid").click(function() {
    variable myTitleVar = 'MyTitle';

    //replace code here ... like appendto?

</script>

<div id="myid">Click here</div> 
```

需要更换的东西：

```
<div id="title-container">{Value of myTitleVar Here}</div> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T15:17:31.443

如果我对您的理解正确，您应该可以这样做：

```
$('#myid').click(function(){
    var title = 'MyTitle';
    $('#title-container').text(title);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T15:16:15.593

```
$("#myid").click(function() {
    var myTitleVar = 'MyTitle';
    $('#title-container').text(myTitleVar);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T15:16:42.017

[要设置 div 的内容，请使用此处](http://api.jquery.com/html/)记录的 jQuery html() 方法。

```
$("#myid").click(function() {
    var myTitleVar = 'MyTitle';
    $('#title-container').html(myTitleVar);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T15:16:57.713

你应该使用关键字， JavaScript`var`中没有关键字，试试这个：`variable`

```
$(document).ready(function(){
   $("#myid").click(function() {
      var myTitleVar = 'MyTitle';
      $('#title-container').text(myTitleVar);
   })
}) 
```

*   [变量](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var)
*   [文本（）](http://api.jquery.com/text/)
*   [准备好（）](http://api.jquery.com/ready/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-16T15:17:19.150

我认为您不需要声明变量。

如果你先声明：

```
var $title = $("#title-container") 
```

然后，您总是可以在任何脚本中设置值

```
$title.text("I have changed title"); 
```

# java - 无法从具有多个外部存储区的设备加载文件

> ID：12448070
> 
> 赞同：0
> 
> 时间：2012-09-16T15:13:27.960
> 
> 标签：java, android, file, loading, device

出于兼容性原因，我有一个针对 SDK 1.5 编译的应用程序，我想尝试保持这种方式。我允许用户将图像保存到外部存储器，当时我确信它始终是 SD 卡。即使用户卸载应用程序，我也希望图像（文件）保留，否则我可以保存到内部存储器并且应用程序会在卸载时删除。

到目前为止，我从我的测试设备加载图像都没有问题，但现在我得到了一个东芝 Thrive 平板电脑，除了内部 DDR 内存，还有 8GB 内部闪存和一个 SD 卡插槽。我的应用程序将图像很好地保存在东芝声明的存储位置，如下所示：

```
// Note: First I create a folder for my App - Not shown here, but it works fine

file = new File(Environment.getExternalStorageDirectory()+ File.separator + "MyApp" + File.separator + "test.png); 
```

在东芝平板电脑上，它总是在内部闪存设备上使用上述方法保存，这很好，但是使用相同的声明不会加载相同的文件，我觉得这很奇怪。

我使用这种非常简单的方法加载；

```
file = new File(Environment.getExternalStorageDirectory()
                + File.separator + "MyApp" + File.separator + "test.png);

bitmap = BitmapFactory.decodeFile(file); 
```

然后显示位图

我以前不需要设置任何文件权限，除此之外，如果我针对 SDK 1.6 或更高版本进行编译，我需要在清单中

```
uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" 
```

即便如此，我认为那只是为了允许写作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:16:19.223

对不起的人，我不得不改变我的代码处理旋转，因为方向值不同，我以前做的方式，从我的其他设备，加上平板电脑通过 USB 连接到已锁定对文件夹的访问的 PC - duh :(

# arduino - 对动画序列的编程结构和存储的建议

> ID：12448075
> 
> 赞同：5
> 
> 时间：2012-09-16T15:14:04.070
> 
> 标签：arduino

我正在为一个艺术装置制作一些[电子动画](http://en.wikipedia.org/wiki/Animatronics)，它将使用几个步进电机和一些大功率 LED。过去，当我做这类事情时，我会使用系留计算机来处理逻辑和时序。对于这个项目，我想尝试使其独立（例如，只是 Arduino 板）。对于 Arduino 硬件，我有一个[Arduino Mega](http://arduino.cc/en/Main/ArduinoBoardMega)，如果需要，可以使用[SD 卡扩展](http://en.wikipedia.org/wiki/Secure_Digital) [板](http://www.arduino.cc/en/Main/ArduinoShields)扩展它以获得更多存储空间。

我真的很欢迎任何关于如何解决这个问题的想法或建议（而不是要求代码）。

对于数据，基本上我会为每个步进器和每个 LED 存储提示。当然，我需要某种时钟或时间戳来跟踪事物。

步进提示将类似于：

*   提示开始时间
*   步进器 ID
*   步进方向
*   步进速度
*   步数

LED 提示将类似于：

*   提示开始时间
*   LED 标识
*   启动亮度
*   结束亮度
*   期间

所以我想知道的是：

*   关于足够紧凑以存储大量线索的数据格式的想法
*   有关时钟或时间戳的任何建议。（一个简单的计数器是显而易见的选择。）

至于有多少线索/多少数据，因为我才刚刚开始，我会在遇到的任何限制范围内工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:44:51.383

所以现在我决定推出我自己的简单数据格式，以保持项目的进展。我还担心以不占用 RAM 的方式存储提示数据。

由于我使用的是带有 128 KB 闪存的 Ardunio Mega，因此我想在使用 SD 卡之前先使用它。借助出色的[Flash 库](http://arduiniana.org/libraries/flash/)，访问 PROGMEM 非常容易，我能够在几分钟内粗略地绘制出测试草图。

对于电机控制，我使用的是使用串行通信的专用电机控制器板。每个板控制两个电机。为了测试我需要发送的最大数据大小是四个值：*速率、斜率、x 目标、y 目标*，以便进行移动，从而确定我的电机数据格式。当我添加时间戳和板 ID 值时，这将改变。

使用 Flash 库，您可以定义一个 FLASH_TABLE，将其存储在 PROGMEM 中，然后使用简单的数组括号访问来访问它。使用数千个条目进行测试显示没有问题。

因此，提取数据并将其发送到独立板或在内部使用它成为一项简单的任务。

// 简单示例：

```
#include <Flash.h>

FLASH_TABLE(int, command_table, 4 /* width of table */, 
    {111, 222, 333, 444},
    {1001, 900, 3210, -4567},
    {1002, 1000, 3210, -4567},
    {1003, 1100, 3210, -4567},
    {666, 777, 888, 999}
    );

void setup() {
    Serial.begin(9600);
    Serial.print("Mem: "); Serial.println(availableMemory());

    // Determine the size of the array
    Serial.print("Rows: "); Serial.println(command_table.rows());
    Serial.print("Cols: "); Serial.println(command_table.cols());
    Serial.print("RAM: "); Serial.println(sizeof(command_table));

     Serial.print(command_table[8][0]);
     Serial.print("s");
     Serial.print(command_table[8][1]);
     Serial.print("r");
     Serial.print(command_table[8][2]);
     Serial.print("x");
     Serial.print(command_table[8][3]);
     Serial.print("y");
     Serial.println("gi");  
}

void loop() {

}

int availableMemory() 
{
  int size = 1024;
  byte *buf;
  while ((buf = (byte *) malloc(--size)) == NULL);
  free(buf);
  return size;
} 
```

# php - 无法从 PDF 调用 php 脚本

> ID：12448077
> 
> 赞同：2
> 
> 时间：2012-09-16T15:14:07.967
> 
> 标签：php, forms, pdf, submit

我已经设置了我的 php 脚本并将其发布在我网站的根目录中。我可以从一个 html 表单中调用它，它将我的表单数据发送给它以提交给 SalesForce。这很有效 - 它创建了一个新的潜在客户。

问题是，我需要从 PDF 文件发送此表单数据，当我尝试从 Acrobat（HTML 格式）提交数据时，我收到“无法连接到服务器”错误。从 Acrobat Reader 提交，我得到`An error occurred during the submit process. Cannot process content of type text/html; charset=UTF-8.`

使用 mailto: 从 PDF 中，我可以看到我只是发送一个纯 html 字符串：

```
city=Aspen&company=CORE&email=marty%40aspencore.org&first_name=Trina&last_name=Ortega&oid=00DA0000000XXXX&retURL=www.energysmartcolorado.com&state=CO&Submit= 
```

我不是程序员，所以请对我进行任何回复。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-22T13:33:52.943

我们卸载了 adobe reader 并重新安装了最新版本的 Adob​​e reader。

当我们点击打印选项后安装新版本时，我们会弹出以允许访问在 C:\ 中创建临时文件

通过单击允许按钮将允许。

# ruby-on-rails - assert_select 测试原始或 html_safe 非转义内容

> ID：12448083
> 
> 赞同：3
> 
> 时间：2012-09-16T15:14:34.980
> 
> 标签：ruby-on-rails, ruby-on-rails-3, escaping, functional-testing, actioncontroller

在 Rails 3.2.8 控制器测试中，我想使用或方法`assert_select`来控制在我的视图中呈现的未转义字段的内容：`raw``#html_safe`

```
<div id="summary">
    <%= raw @doc.summary %>
</div> 
```

但在我的测试中，这两个断言都失败了：

```
# Fixture loading in doc variable, get :show, assert_response ...
assert_select('#summary', doc.summary)
assert_select('#summary', doc.summary.html_safe) 
```

如果我的摘要类似于`<p>Stuff:</p><ul><li>Stuff1</li><li>Stuff1</li></ul>`，那么测试告诉我，对于这两行，：

```
<"<p>Stuff:</p><ul><li>Stuff1</li><li>Stuff2</li></ul>">
expected but was
<"Stuff:\n  \n    Stuff1\n    Stuff2"> 
```

在测试模式下，它似乎使用`\n`而不是 HTML 标记呈现视图，就好像为 CLI 显示转义一样。

但是当我启动服务器并在浏览器中显示我的页面时，这部分是用 HTML 标记呈现的，并且没有`\n`.

它是控制器测试渲染引擎中的错误吗？你知道如何避免吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:20:05.377

找到解决方案：

```
assert_select('#summary', :html => doc.summary) 
```

这样，应用于 DOM 选择的内容的任何转换也会在比较之前应用于第二个 arg。

* * *

***注意：请注意您编写固定装置的方式。***

以下语法：

```
doc:
  summary: |
    <p>Stuff:</p><ul><li>Stuff1</li><li>Stuff2</li></ul> 
```

从 assert_select获得最终的额外内容`\n`，与：

```
doc:
  summary: <p>Stuff:</p><ul><li>Stuff1</li><li>Stuff2</li></ul> 
```

我不知道为什么会发生这种情况，但这会使断言失败。

# visual-studio-2010 - 无法在 Windows 7 中运行 cocos2dx win32 示例应用程序

> ID：12448088
> 
> 赞同：1
> 
> 时间：2012-09-16T15:15:26.947
> 
> 标签：visual-studio-2010, visual-c++, cocos2d-iphone, cocos2d-x

按照本[教程](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Cocos2d-x_Application_Wizard_for_Visual_Studio_User_Guide)，我成功运行 build-win32.bat 并为 cocos2dx 构建了 Visual Studio 2010 解决方案。但是我无法运行 HelloCPP.exe、HelloLua.exe、testcpp.exe 等。

我正在使用最新的 cocos2dx (cocos2d-2.0-x-2.0.2)，运行 windows 7 64bit 并且一直在安装 PowerVR Insider SDK。

当我尝试从 Visual Studio 2010（终极版）运行 HelloCpp 和 HelloLua 时，调试器在 CCGLProgram.cpp 处中断：

```
bool CCGLProgram::initWithVertexShaderByteArray(const GLchar* vShaderByteArray, const GLchar* fShaderByteArray)
{
    m_uProgram = glCreateProgram(); 
```

错误消息是：（显示在 VS 2010 的调试控制台中）

```
'HelloCpp.exe': Loaded 'D:\cocos2d-2.0-x-2.0.2\Release.win32\HelloCpp.exe', Symbols loaded.
'HelloCpp.exe': Loaded 'C:\Windows\SysWOW64\ntdll.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'C:\Windows\SysWOW64\kernel32.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'C:\Windows\SysWOW64\KernelBase.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'D:\cocos2d-2.0-x-2.0.2\Release.win32\libcocos2d.dll', Symbols loaded.
'HelloCpp.exe': Loaded 'C:\Windows\SysWOW64\msvcr100.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'C:\Windows\SysWOW64\opengl32.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'D:\cocos2d-2.0-x-2.0.2\Release.win32\glew32.dll', Binary was not built with debug information.
'HelloCpp.exe': Loaded 'D:\cocos2d-2.0-x-2.0.2\Release.win32\libxml2.dll', Binary was not built with debug information.
'HelloCpp.exe': Loaded 'D:\cocos2d-2.0-x-2.0.2\Release.win32\zlib1.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'D:\cocos2d-2.0-x-2.0.2\Release.win32\libtiff.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'D:\cocos2d-2.0-x-2.0.2\Release.win32\pthreadVCE2.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'C:\Windows\SysWOW64\user32.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'C:\Windows\SysWOW64\gdi32.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'C:\Windows\SysWOW64\advapi32.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'C:\Windows\SysWOW64\shell32.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'C:\Windows\SysWOW64\msvcp100.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'C:\Windows\SysWOW64\msvcrt.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'C:\Windows\SysWOW64\glu32.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'C:\Windows\SysWOW64\ddraw.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'C:\Windows\SysWOW64\wsock32.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'D:\cocos2d-2.0-x-2.0.2\Release.win32\iconv.dll', Binary was not built with debug information.
'HelloCpp.exe': Loaded 'C:\Windows\WinSxS\x86_microsoft.vc90.crt_1fc8b3b9a1e18e3b_9.0.30729.6871_none_50944e7cbcb706e5\msvcr90.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'C:\Windows\SysWOW64\sechost.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'C:\Windows\SysWOW64\rpcrt4.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'C:\Windows\SysWOW64\combase.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'C:\Windows\SysWOW64\shlwapi.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'C:\Windows\SysWOW64\dciman32.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'C:\Windows\SysWOW64\ws2_32.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'C:\Windows\SysWOW64\sspicli.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'C:\Windows\SysWOW64\nsi.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'C:\Windows\SysWOW64\cryptbase.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'C:\Windows\SysWOW64\bcryptprimitives.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'C:\Windows\SysWOW64\imm32.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'C:\Windows\SysWOW64\msctf.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'C:\Windows\SysWOW64\uxtheme.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'C:\Windows\SysWOW64\dwmapi.dll', Cannot find or open the PDB file
'HelloCpp.exe': Loaded 'C:\Windows\SysWOW64\ole32.dll', Cannot find or open the PDB file
Not totally ready :( 

OpenGL 2.0 not supported

First-chance exception at 0x00000000 in HelloCpp.exe: 0xC0000005: Access violation.
Unhandled exception at 0x00000000 in HelloCpp.exe: 0xC0000005: Access violation. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:37:43.853

我不知道什么是 PowerVR Insider SDK。如果你已经在 msvc 中加载了整个 cocos2d 解决方案，你将无法运行它，而是右键单击一个项目并 debug->startnewinstance ，项目运行。如果您想单独打开，exe 位于 Release.win32 或 debug.win32。

# sql - RODBC 将数据框连接到 sqlQuery 中的表

> ID：12448095
> 
> 赞同：3
> 
> 时间：2012-09-16T15:16:43.220
> 
> 标签：sql, rodbc

我一直在使用 RODBC 连接到工作中的 DB2 数据库，到目前为止一切正常。我可以通过 sqlQuery 提取表，并在将它们作为数据框返回之前连接数据库中的表。但是，我经常通过抓取和操作表，然后将它们连接回数据库来加快 SAS 中的过程。当我尝试在 R 中执行此操作时，我遇到了问题。我希望它变成这样。

```
library(RODBC)
channel <- odbcConnect(database stuff)
dataframe <- sqlQuery(channel, query)
.
.
manipulate data frame
. 
.
dataframe <- sqlQuery(channel, 
  "select * from dataframe as a INNER JOIN schema.table1 as b ON a.id=b.id") 
```

问题是 R 无法识别“数据框”。我认为它与“schema.dataframe”部分有关，因为我不确定工作区会有什么样的“模式”。有没有办法在 sqlQuery 中将数据框连接到数据库中的表？或者我可以以某种方式将数据框设为临时表并从那里加入吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-30T15:44:59.237

您可以将数据框作为表格保存到数据库中

```
sqlSave(channel, dataframe) 
```

（有关选项，请参阅 ?sqlSave），然后进行查询。假设通道指向“模式”：

```
dataframe <- sqlQuery(channel, 
  "select * from schema.dataframe as a INNER JOIN schema.table1 as b ON a.id=b.id") 
```

或者您可以使用 data.table() 并在 R 中进行连接：

```
library(data.table)
dataframe <- data.table(dataframe)
setkey(dataframe, id)
table1 <- data.table(sqlQuery(channel, 
  "select * from schema.table1")
setkey(table1, id)
dataframe <- dataframe[table1, nomatch=0] 
```

在这两种情况下，您最终都会得到一个“辅助”对象：数据库中的第一种情况是 schema.dataframe，第二种情况是 R 中的 table1。

# jaxb - XPDL - 生成 JAXB 类时出错

> ID：12448104
> 
> 赞同：1
> 
> 时间：2012-09-16T15:18:07.993
> 
> 标签：jaxb, marshalling, bpmn, unmarshalling

在我公司的一个项目中，我正在构建一个非常简单的业务流程引擎。为此，我从 BPMN 开始，现在我正在深入研究 XPDL。[我从http://www.xpdl.org/](http://www.xpdl.org/)下载了 XPDL xsd，并尝试使用 xjc 及其包装 eclipse 插件从这个 xsd 生成类。它失败，因为如下所示的冲突错误

```
parsing a schema...
[ERROR] Property "TimeDate" is already defined. Use &lt;jaxb:property> to resolve this conflict.
  line 3558 of file:/home/alberto/Job/WSP/orch/orch.model/src/main/resources/bpmnxpdl_40a.xsd 
```

老实说我不知道​​1）为什么像这样的官方和标准xsd会出现这种问题2）如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:03:27.410

**问题**

如果您检查`TriggerTime`元素，您会看到有一个元素和属性称为`TimeDate`. 这在 XML 中不是问题，但默认情况下，JAXB 实现会尝试将这两个项目映射到导致冲突的同一个 Java 属性。

```
<xsd:element name="TriggerTimer">
    <xsd:annotation>
        <xsd:documentation>BPMN: If the Trigger Type is Timer then this must be present</xsd:documentation>
    </xsd:annotation>
    <xsd:complexType>
        <xsd:sequence>
            <xsd:choice>
                <xsd:element name="TimeDate" type="xpdl:ExpressionType"/>
                <xsd:element name="TimeCycle" type="xpdl:ExpressionType"/>
            </xsd:choice>
            <xsd:any namespace="##other" processContents="lax" minOccurs="0" maxOccurs="unbounded"/>
        </xsd:sequence>
        <xsd:attribute name="TimeDate" type="xsd:string" use="optional">
            <xsd:annotation>
                <xsd:documentation>Deprecated</xsd:documentation>
            </xsd:annotation>
        </xsd:attribute>
        <xsd:attribute name="TimeCycle" type="xsd:string" use="optional">
            <xsd:annotation>
                <xsd:documentation>Deprecated</xsd:documentation>
            </xsd:annotation>
        </xsd:attribute>
        <xsd:anyAttribute namespace="##other" processContents="lax"/>
    </xsd:complexType>
</xsd:element> 
```

**解决方案 (binding.xml)**

外部绑定文件可用于自定义 JAXB 实现如何生成从 XML 模式建模的 Java。下面是一个重命名生成的属性之一的示例：

```
<jxb:bindings
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:jxb="http://java.sun.com/xml/ns/jaxb"
    version="2.1">

    <jxb:bindings schemaLocation="bpmnxpdl_40a.xsd">
        <jxb:bindings node="//xsd:element[@name='TriggerTimer']/xsd:complexType/xsd:attribute[@name='TimeDate']">
            <jxb:property name="timeDateAttr"/>
        </jxb:bindings>
    </jxb:bindings>

</jxb:bindings> 
```

**XJC 呼叫**

该`-b`选项用于在使用 XJC 实用程序时指定绑定文件。

```
xjc -b binding.xml bpmnxpdl_40a.xsd 
```

# php - 如果文本不包含某个子字符串，则匹配文本

> ID：12448105
> 
> 赞同：0
> 
> 时间：2012-09-16T15:18:13.730
> 
> 标签：php, regex, preg-replace

> **可能重复：**
> [Regex / Preg：不匹配，如果找到](https://stackoverflow.com/questions/12447818/regex-preg-no-match-if-found)

如果字符串中的某些内容不存在，我想用它`preg_replace`来替换某些字符串。也就是说，如果子字符串存在，则不会匹配该字符串。

例如，如果字符串包含`.png`，它将找不到/匹配它。

```
example.com/image.png 
```

在这里，它不会找到它，因为字符串包含 line/substring `.png`。

```
example.com/image 
```

在这里，它会找到它，因为字符串在任何地方**都不**包含行/子字符串`.png`。

* * *

对于那些仍然没有得到我的人。

```
$result = preg_replace("#http://(.*\S)[Something here that will not match the link if it finds the .png at last]#","<a href='\\1'>\\1</a>","Here is a link that should work http://example.com/; Here is a link that should NOT work http://example.com/image.png") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T15:49:18.833

好的，我要在这里冒险了。

首先，您需要一个能够为您找到 URL 的正则表达式。由于您显然也想找到很多无效的 URL，我们将采用一个正则表达式，它只考虑包含序列的任何连续非空格字符的字符串`<letter>.<letter>`：

```
\b(?=\S*[a-z]\.[a-z])\S+(?=\s|$) 
```

然后我们可以检查这个序列是否以 结尾`.png`：

```
\b(?=\S*[a-z]\.[a-z])\S+(?=\s|$)(?<!\.png) 
```

现在您可以将其用于替换操作，例如

```
$result = preg_replace(
    '/\b           # Start at a word boundary
    (?=            # Assert that it\'s possible to match...
     \S*           # any number of non-whitespace characters
     [a-z]\.[a-z]  # followed by an ASCII letter, a dot, a letter
    )              # End of lookahead assertion
    \S+            # Match one or more non-whitespace characters
    (?=\s|$)       # until the next whitespace or end of string
    (?<!\.png)     # unless that match ends in .png/ix', 
    '<a href="\0">\0</a>', $subject); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T15:45:27.127

这将是我解决问题的方式，让“非”RegExp 正常工作是相当棘手的——因为它并不是系统的真正设计目的。因此，改为将逻辑分开，以便您有两个 RegExp... 一个搜索类似链接的结构，然后一个检查您想要避免的情况：

```
function replaceWithLink ( $find ) {
  list($link) = $find;
  if ( preg_match('/\.(png|gif|image)$/', $link) ) {
    return $link;
  }
  else {
    return '<a href="'.$link.'">'.$link.'</a>';
  }
}

$text = 'This is my test string that contains a url.like/thing but '.
        'it also contains another url.like/thing/that-has-an.image '.
        'should they all be highlighted?';

$expr = '#[a-z0-9:_\-\.]+/[a-z0-9_\-\./]+#i';
$func = 'replaceWithLink';

$text = preg_replace_callback($expr, $func, $text); 
```

上面的内容比使用一个过于复杂的 RegExp 更具可读性，并且易于扩展以处理更多扩展。显然，为了让它与 URL 一起正常工作，您可能需要调整正在搜索它们的 RegExp - 我只是很快地将一个组合在一起。在我的版本中，URL 必须包含`URL-like text`, 后跟`/`, 后跟`URL-like text possibly with slash`才能符合条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T15:55:28.743

这个怎么样：

```
$yourInputString = 'whatever';
$matchPattern = '/^.*?(?<!\.png)$/i';
$replacePattern = '$0.png';
$result = preg_replace($matchPattern, $replacePattern, $yourInputString); 
```

请注意，您的输入字符串将只需要包含您正在处理的链接，例如：

```
example.com/image.png 
```

或者

```
example.com/image 
```

以下是模式的解释：

```
# ^.*?(?<!\.png)$
# 
# Options: case insensitive
# 
# Assert position at the beginning of a line (at beginning of the string or after a line break character) «^»
# Match any single character that is not a line break character «.*?»
#    Between zero and unlimited times, as few times as possible, expanding as needed (lazy) «*?»
# Assert that it is impossible to match the regex below with the match ending at this position (negative lookbehind) «(?<!\.png)»
#    Match the character “.” literally «\.»
#    Match the characters “png” literally «png»
# Assert position at the end of a line (at the end of the string or before a line break character) «$» 
```

# ruby - Ruby、数组、对象 - 选择对象

> ID：12448110
> 
> 赞同：4
> 
> 时间：2012-09-16T15:19:10.857
> 
> 标签：ruby, arrays, search, object

```
#!/usr/local/bin/ruby
class OReport
   attr_accessor :id, :name
   def initialize(id, name, desc)
      @id       = id
      @name     = name
      @desc     = desc
   end
end

reports = Array.new
reports << OReport.new(1, 'One', 'One Desc')
reports << OReport.new(2, 'Two', 'Two Desc')
reports << OReport.new(3, 'Three', 'Three Desc') 
```

我现在如何在“报告”中搜索 2，以便从中提取名称和描述？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-16T15:22:11.100

用于[`find`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-find)从给定条件的集合中获取对象：

```
reports.find { |report| report.id == 2 }
#=> => #<OReport:0x007fa32c9e85c8 @desc="Two Desc", @id=2, @name="Two"> 
```

如果您希望多个对象满足条件，并且想要所有对象而不是第一个匹配的对象，请使用[`select`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-select).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-16T15:43:37.903

如果 for 的主要用途`reports`是通过 id 检索，则考虑使用散列代替：

```
reports = {}
reports[1] = OReport.new(1, 'One', 'One Desc')
reports[2] = OReport.new(2, 'Two', 'Two Desc')
reports[3] = OReport.new(3, 'Three', 'Three Desc')

p reports[2].name    # => "Two" 
```

哈希查找通常比数组查找更快，但更重要的是，它更简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T15:30:49.213

您可以通过以下语法获取 2 的报告。

```
reports[1].name
reports[1].id 
```

它肯定会为你工作。

# aptana - Aptana：如何从开始标签跳转到相应的结束标签？

> ID：12448111
> 
> 赞同：1
> 
> 时间：2012-09-16T15:19:25.983
> 
> 标签：aptana, aptana3

如何从打开的 HTML 标记跳转到相应的结束标记？Ctrl-Shift-P 适用于一个标签上的括号，它不是解决方案。

# php - 在没有表名的情况下在匹配的 mysql-table 中加载数据

> ID：12448112
> 
> 赞同：0
> 
> 时间：2012-09-16T15:19:29.563
> 
> 标签：php, mysql

我有一个 csv 文件，它通过“LOAD DATA INFILE”函数（php/mysql）加载到数据库中。事实上，我有很多 csv 文件。对于每个文件，数据库中都有一个表（尽管有时两个文件进入一个表）。问题是：文件名与表名不匹配。应用程序不知道哪个文件进入哪个表。

但我有每个文件的 sql 语句（LOAD DATA INFILE）。有没有办法告诉mysql“我这里有这个文件，把它放在语句结构与表结构匹配的地方。”？

# django - django 1.4 和 mongodb

> ID：12448114
> 
> 赞同：0
> 
> 时间：2012-09-16T15:20:08.770
> 
> 标签：django, mongodb

我看到很多用于 django 的 mongodb adapetrs，但其中大多数不支持 django 1.4 或与 django orm 的语法不同。那么，对于 1.4，最好的 django 映射器是什么，希望与 django orm 的语法相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T03:10:25.863

[http://mongoengine.org/](http://mongoengine.org/)看起来不错

语法如下所示：

```
from mongoengine import *                           # To define a schema for a
                                                    # document, we create a
class Metadata(EmbeddedDocument):                   # class that inherits from
    tags = ListField(StringField())                 # Document.
    revisions = ListField(IntField())               #
                                                    # Fields are specified by
class WikiPage(Document):                           # adding field objects as
    title = StringField(required=True)              # class attributes to the
    text = StringField()                            # document class.
    metadata = EmbeddedDocumentField(Metadata)      #
                                                    # Querying is achieved by
>>> page.title = "Hello, World!"                    # calling the objects
>>> for page in WikiPage.objects:                   # attribute on a document
>>>     print page.title                            # class. 
```

# objective-c - Objective C @autoreleasepool 指令

> ID：12448131
> 
> 赞同：3
> 
> 时间：2012-09-16T15:22:58.710
> 
> 标签：objective-c, automatic-ref-counting

我正在读一本书，上面写着（如果我没有弄错的话）用`@autoreleasepool`语句包装一些代码可以启用 ARC。首先是这样吗？

我的第二个问题是，当我在做一些 iOS 示例程序时，虽然我在创建新项目时启用了 ARC，但我从来没有看到在任何地方使用过这个指令（在自动生成的代码中）。这是否意味着没有使用ARC？任何想法/指针表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T15:30:31.570

`@autoreleasepool`不“启用”ARC。这只是使用自动释放池的 ARC 方式。

在 ARC 之前，您使用[`NSAutoreleasePool`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSAutoreleasePool_Class/Reference/Reference.html)该类来设置一个自动释放池，如下所示：

```
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
// Code benefitting from a local autorelease pool.
[pool release]; 
```

但是在使用 ARC 时不允许调用`release`，因此引入了一种使用自动释放池的新方法：

```
@autoreleasepool {
    // Code benefitting from a local autorelease pool.
} 
```

`@autoreleasepool`块比直接使用实例更有效`NSAutoreleasePool`；即使您不使用 ARC，也可以使用它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-16T15:40:19.717

首先，这本书是错误的。@autoreleasepool 与 ARC 正交。你可以使用没有 ARC 的自动释放池，也可以使用没有自动释放池的 ARC（但你不应该这样做）。

其次，使用任何 Xcode 的默认项目创建的项目的主线程将为您创建自动释放池池。您创建的任何线程都需要创建自己的自动释放池。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T15:27:53.697

> 使用 @autoreleasepool 语句包装一些代码启用 ARC

否。ARC 由编译器标志启用。`@autoreleasepool`只是一个用于创建自动释放池的关键字，即使您使用的是 ARC（因为通常您会分别使用 alloc-init 和 release 创建和销毁它们，但是您不能`release`在 ARC 下发送显式消息 - 这就是为什么这个关键字有已介绍。）

如果你在 Xcode/使用编译器/等启用 ARC，它就会被启用。当然，有比“自动释放一切”原则更好的解决方案，这可能是您在示例代码中没有遇到这个关键字的原因。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-16T15:45:12.480

> 我的第二个问题是，当我在做一些 iOS 示例程序时，虽然我在创建新项目时启用了 ARC，但我从来没有看到在任何地方使用过这个指令（在自动生成的代码中）。这是否意味着没有使用ARC？任何想法/指针表示赞赏。

您的应用程序确实使用了它。查看项目中的**main.m**文件。你会在那里找到它。

# facebook - 带有自定义图标的社交分享链接

> ID：12448134
> 
> 赞同：74
> 
> 时间：2012-09-16T15:23:33.550
> 
> 标签：facebook, twitter, linkedin, google-plus, pinterest

我正在寻找有关为以下内容创建自定义共享图标的任何可靠的当前信息。

*   Facebook
*   推特
*   谷歌+
*   领英
*   Pinterest

我不断获得的所有文档似乎都是关于使用他们的社交喜欢/分享按钮——我认为大多数时候这不是很吸引人。诸如 socialite.js 之类的东西有助于处理在使用“本机”喜欢/分享按钮时出现的其他一些问题（抱歉，不知道该怎么称呼它们），但老实说它们并不是很漂亮。

任何参考资料/教程或指导都会很棒。

干杯。

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2012-10-31T17:41:49.630

**下面，我将为您提供各种服务 URL**

推特

```
http://twitter.com/home?status=[TITLE]+[URL] 
```

掘客

```
http://www.digg.com/submit?phase=2&url=[URL]&title=[TITLE] 
```

Facebook

```
http://www.facebook.com/share.php?u=[URL]&title=[TITLE] 
```

偶然发现

```
http://www.stumbleupon.com/submit?url=[URL]&title=[TITLE] 
```

美味的

```
http://del.icio.us/post?url=[URL]&title=[TITLE]]&notes=[DESCRIPTION] 
```

领英

```
http://www.linkedin.com/shareArticle?mini=true&url=[URL]&title=[TITLE]&source=[SOURCE/DOMAIN] 
```

斜线点

```
http://slashdot.org/bookmark.pl?url=[URL]&title=[TITLE] 
```

技术

```
http://technorati.com/faves?add=[URL]&title=[TITLE] 
```

棒棒哒

```
http://www.tumblr.com/share?v=3&u=[URL]&t=[TITLE] 
```

红迪网

```
http://www.reddit.com/submit?url=[URL]&title=[TITLE] 
```

谷歌书签

```
http://www.google.com/bookmarks/mark?op=edit&bkmk=[URL]&title=[title]&annotation=[DESCRIPTION] 
```

新闻藤

```
http://www.newsvine.com/_tools/seed&save?u=[URL]&h=[TITLE] 
```

ping.fm

```
http://ping.fm/ref/?link=[URL]&title=[TITLE]&body=[DESCRIPTION] 
```

印象笔记

```
http://www.evernote.com/clip.action?url=[URL]&title=[TITLE] 
```

谷歌+

```
https://plus.google.com/share?url=[URL] 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-06-10T14:17:55.083

只是对这些链接的快速更新，这里是 Google+ 的链接

```
https://plus.google.com/share?url=[URL] 
```

现在，如果您希望这些链接在新窗口中打开，只需在 href 之后添加以下 javascript 代码：

```
onclick="javascript:window.open(this.href,'', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;" 
```

此 javascript 代码适用于 Twitter、Google+ 和 Facebook（可能还有其他一些，但我没有测试任何其他社交网络）。

WordPress 示例：

```
<a href="https://plus.google.com/share?url=<?php the_permalink(); ?>" onclick="javascript:window.open(this.href,'', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;">Here you can add text, image, whatever.</a> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-19T14:29:15.757

Grzegorz 建议的解决方案已被弃用，这并不是最好的方法。对于 Facebook，您只需要加载 JS SDK ( [https://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/) ) 并在单击自定义按钮时调用 UI 提要方法。UI方法的更多细节：[https ://developers.facebook.com/docs/reference/javascript/FB.ui/](https://developers.facebook.com/docs/reference/javascript/FB.ui/)

对于 Twitter：[https ://dev.twitter.com/docs/tweet-button#build-your-own](https://dev.twitter.com/docs/tweet-button#build-your-own)

对于 LinkedIn、Google+ 等，您将有其他选择，但我不知道它们是否从我的头顶上知道，并且不确定它们是否提供替代方案。

继续搜索，你可能只是挖得不够深，我花了 2 分钟才找到 Twitter 的链接 :)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-03-03T14:18:18.557

下面提供了您所需的社交媒体自定义共享链接。

**Facebook**

```
http://www.facebook.com/sharer.php?u=[EncodedURL] 
```

**推特**

```
http://twitter.com/share?text=[TITLE]&url=[URL] 
```

**谷歌+**

```
https://plus.google.com/share?url=[EncodedURL] 
```

**领英**

```
http://www.linkedin.com/shareArticle?mini=true&url=[EncodedURL] 
```

**Pinterest**

```
http://pinterest.com/pin/create/button/?url=[EncodedURL]&media={[MEDIA]}&description=[TITLE] 
```

您可以从此处找到一些其他社交媒体自定义 URL 链接和实施指南 -[如何创建自定义社交分享链接](http://www.codexworld.com/create-custom-social-share-links/)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-16T18:43:59.430

对于 Facebook 共享，您只需将此链接添加到任何对象：

```
<a href="http://www.facebook.com/sharer.php?u=<url to share>
&t=<title of content>">link or image</a> 
```

其余的：对不起，我帮不了你。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-07-08T13:55:33.520

为了**自定义按钮**以及来自不同社交网络和 url 共享服务的**共享计数**，您可以使用代理服务器。社交按钮服务器[Meddelare](https://meddelare.com/)正是这样做的（仅供参考，我是 Meddelare 背后的开发人员）。

> [Meddelare](https://meddelare.com/)：这是一个开源和自托管的替代共享服务，如 AddThis 和 ShareThis。因为您自己运行代理服务器，所以您也在保护您的用户的隐私免受社交网络的跟踪。用户只有在决定点击分享按钮后才会选择加入他们的跟踪 - 绝不会因为他们访问了您的页面而隐含。

有几个版本：[独立服务器](https://github.com/meddelare/meddelare-node-server)、[Express.js 服务器中间件](https://github.com/meddelare/meddelare-node-express)和完全自定义解决方案的单独[后端](https://github.com/meddelare/meddelare-node-counters)。

![Meddelare 示例的屏幕截图](../Images/e9755a407883b8edc858df2fcbe16569.png)

请参阅[Meddelare 的示例](https://meddelare.com/meddelare-examples)，了解您从服务器获取的 JSON/JSONP 以及脚本使用情况。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-03-28T18:56:09.583

**社交分享网址 ~ 在 Github 上！**

[![在此处输入图像描述](../Images/63fb906d4d11cef9a94439165072171b.png)](https://i.stack.imgur.com/Vh7oU.jpg)

一个定期更新和重新测试的 github 存储库，其中列出了大约 50 或 60 个服务。

[https://github.com/bradvin/social-share-urls](https://github.com/bradvin/social-share-urls)

这比公认的答案要好得多。NewsVine、Delicious、Slashdot、Ping.fm 等，在今天都是不存在的服务。另外，缺少一些重要的，Skype等。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-02-11T06:32:26.673

Twitter 链接格式[http://twitter.com/home?status=[TITLE]+[URL]](http://twitter.com/home?status=[TITLE]+[URL])已弃用，将不再适用于 Twitter iOS 应用程序。

请改用以下格式

```
https://twitter.com/intent/tweet?text=[TITLE]+[URL] 
```

来源： [https ://dev.twitter.com/web/tweet-button](https://dev.twitter.com/web/tweet-button)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-04-13T07:39:50.420

这是我在 php 中的 facebook 解决方案。猜猜你可以为其他社交网络做类似的事情。

```
function customFShare() {
    $like_results = @file_get_contents('http://graph.facebook.com/'. get_permalink());
    $like_array = json_decode($like_results, true);
    return (isset($like_array['shares']) ) ? $like_array['shares'] : "0";
}
function fShareButton() {
    return "<a data-share='http://www.facebook.com/sharer/sharer.php?u=". $your_url_here ."' href='#' rel='nofollow'><i>Icon</i> <span>". customFShare() ."</span></a>";
} 
```

HTML

```
<div class="facebook-share">
    <?php echo fShareButton(); ?>
</div> 
```

jQuery

```
jQuery(document).on("click",".facebook-share > a", function (e) {
        e.preventDefault();
        var winHeight = 350,
            winWidth = 520,
            winTop = (screen.height / 2) - (winHeight / 2),
            winLeft = (screen.width / 2) - (winWidth / 2),
            link = $(this).data('share');
        window.open(link, 'sharer', 'top=' + winTop + ',left=' + winLeft + ',toolbar=0,status=0,width=' + winWidth + ',height=' + winHeight);
    }); 
```

您将获得带有图标和计数器的漂亮 facebook 按钮。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-04-04T14:13:50.597

这里的答案似乎都没有真正回答 OP 问题。所以这是我的尝试：

许多社交网络实际上提供了**有关**如何使用其徽标、共享图标和其他链接的指南。在该主题上，有些人比其他人更灵活。

当然，在大多数情况下，它们不太适合您的设计，您可能希望使用自己的主题/网站颜色自定义它们。

**“这样做需要您自担风险”**可能是您得到的最佳答案。

我不是律师（所以这不是法律建议！）但从我在不同文章中看到的内容来看，一些**销售**带有定制社交网络徽标的图标集的网站被要求将其从产品列表中删除。

Facebook、Twitter 或任何其他社交网络公司几乎不可能起诉您（尽管他们可能会）为您的个人博客或网站定制图标/徽标，但如果您想保护自己，您可能需要考虑遵循他们的指导方针......

以下是社交网络品牌指南的一些链接：

*   脸书：[https ://www.facebookbrand.com/](https://www.facebookbrand.com/)
*   推特：[https ://about.twitter.com/company/brand-assets](https://about.twitter.com/company/brand-assets)
*   Google+：[https ://developers.google.com/+/branding-guidelines](https://developers.google.com/+/branding-guidelines)
*   StumbleUpon： http: [//www.stumbleupon.com/press/stumbleupon-image-use-guidelines](http://www.stumbleupon.com/press/stumbleupon-image-use-guidelines)
*   美味：[http ://delicious.com/branding](http://delicious.com/branding)
*   领英：[https ://brand.linkedin.com/](https://brand.linkedin.com/)
*   豆瓣：[https ://www.tumblr.com/logo](https://www.tumblr.com/logo)
*   Reddit：[https ://www.reddit.com/about/alien/](https://www.reddit.com/about/alien/)
*   等等

您可以在网络上搜索*“[brandname] 品牌指南”*，以找到适用于几乎所有社交网络的这些指南。

如果您想阅读更多信息，可以获取上述信息的一些来源：

*   [http://www.evolvecreativegroup.com/the-secretly-strict-brand-guidelines-of-social-media/](http://www.evolvecreativegroup.com/the-secretly-strict-brand-guidelines-of-social-media/)
*   [https://www.quora.com/Internet-Law-Is-it-legal-to-alter-Facebook-and-Tw​​itter-icons-to-match-the-rest-of-your-website](https://www.quora.com/Internet-Law-Is-it-legal-to-alter-Facebook-and-Twitter-icons-to-match-the-rest-of-your-website)
*   [https://webmasters.stackexchange.com/questions/54499/putting-altered-social-media-logo-icons-on-my-website-can-i-get-sued](https://webmasters.stackexchange.com/questions/54499/putting-altered-social-media-logo-icons-on-my-website-can-i-get-sued)
*   [http://www.kgshultz.com/using-modified-social-media-icons/](http://www.kgshultz.com/using-modified-social-media-icons/)
*   [https://www.nosegraze.com/allowed-use-modified-social-media-icons/](https://www.nosegraze.com/allowed-use-modified-social-media-icons/)

希望这可以帮助。

# ruby-on-rails - 在我看来，获取“nil:NilClass 的未定义方法 `current_weight'”

> ID：12448136
> 
> 赞同：0
> 
> 时间：2012-09-16T15:23:37.460
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的应用程序应该允许用户创建一个 status_update，它通过一个名为“previous_status_update”的方法从以前的 status_update 中提取信息。

在我看来，我有这个代码：

```
<span> <%= status_update.current_weight - status_update.previous_status_update.current_weight %></span> 
```

在我的模型中，我有相应的代码：

```
after_find :previous_status_update  

 def previous_status_update
 current_id = self.id
 previous_status_update = user.status_update.where( "created_at < ? ", self.created_at ).first
end 
```

在控制台中，以下命令按顺序完美运行：

```
user = User.find_by_id(3)
#<User id: 3, email: "example-3@r

status = user.status_update.first
#<StatusUpdate id: 73, created_at: "2012-09-13 23:08:35",......

status.previous_status_update
#<StatusUpdate id: 68, created_at: "2012-09-13 23:08:35".....

prev_stat = status.previous_status_update
prev_stat.current_weight 
=> 168 
```

我猜问题是模型没有将活动记录对象放入可以像对象一样调用的实例变量中。相反，我只是有一个方法调用，它返回活动记录对象，但不是可以为属性调用的形式。

我认为我不能将整个对象存储在名为“previous_status_update”的数据库列中......

* * *

我认为此错误的另一种可能性是它指向示例数据中没有先前状态更新的第一个条目。因此，当程序试图得出一个值时，它只会返回 nil。我认为这就是错误所指的。

所以真的，我需要的是让rails在那个例外情况下冷静下来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T22:13:25.177

您是否尝试过将控制器的状态更新作为符号：@status_update 移交？

我认为您会收到错误消息，因为视图无法对 status_update 执行某些操作，因为它的 nil 然后第一次访问

```
<span> <%= status_update.current_weight - ... 
```

尝试在控制器中设置@status_update 并像这样修改您的视图

```
<span> <%= @status_update.current_weight - @status_update.previous_status_update.current_weight %></span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T03:25:00.823

我解决这个问题的方法是返回第一个状态更新，它是不存在的“先前”状态更新的自身。

这解决了这个问题。

该方法如下所示：

```
 def previous_status_update
 previous_status_update = user.status_update.where( "created_at < ? ", self.created_at ).first   
 if previous_status_update == nil
   return self
 else
   previous_status_update
 end
end 
```

# android - 如何让 IntentService 等到 BroadcastReceiver 完成执行？

> ID：12448137
> 
> 赞同：3
> 
> 时间：2012-09-16T15:23:42.940
> 
> 标签：android, broadcastreceiver, android-wifi, intentservice

我有一个*IntentService* ，它应该在打开 WiFi**后**执行一些任务。

我正在使用*BroadcastReceiver*来`WifiManager.WIFI_STATE_CHANGED_ACTION`监听 WiFi 的变化。

**问题：**

*当我通过BroadcastReceiver*打开 WiFi 时`wifiManager.setWifiEnabled(true)`，只接收状态和. 然后在接收到实际状态之前销毁*IntentService 。**`WifiManager.WIFI_STATE_DISABLED``WifiManager.WIFI_STATE_ENABLING`*`WifiManager.WIFI_STATE_ENABLED`**

 **如果我把它放在`Thread.sleep(2000)`最后`onHandleIntent()`它有效，但必须有更好的解决方案？

**问题：**

1.  为什么`WifiManager.WIFI_STATE_DISABLED`我打电话时会广播状态`wifiManager.setWifiEnabled(true)`？
2.  我怎样才能让`onHandleIntent()`方法等到状态`WifiManager.WIFI_STATE_ENABLED`被检索到？

代码：

```
public class BackupService extends IntentService {

    private BroadcastReceiver mWifiStateChangedReceiver;

    public BackupService() {
        super("BackupService");
    }

    @Override
    protected void onHandleIntent(Intent intent) {
        final WifiManager wifiManager = (WifiManager) getSystemService(WIFI_SERVICE);
        mWifiStateChangedReceiver = new BroadcastReceiver() {

            @Override
            public void onReceive(Context context, Intent intent) {
                int wifiState = intent.getIntExtra(
                        WifiManager.EXTRA_WIFI_STATE,
                        WifiManager.WIFI_STATE_UNKNOWN);
                if (wifiState == WifiManager.WIFI_STATE_ENABLED) {
                    // PERFORM TASK...
                }
            }
        };
        registerReceiver(mWifiStateChangedReceiver, new IntentFilter(
                WifiManager.WIFI_STATE_CHANGED_ACTION));
        wifiManager.setWifiEnabled(true);
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        if (mWifiStateChangedReceiver != null) {
            unregisterReceiver(mWifiStateChangedReceiver);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:02:44.527

> 如何让 onHandleIntent() 方法等到状态 WifiManager.WIFI_STATE_ENABLED 被检索到？

理想情况下，您不会，因为 WiFi 可能不可用，因此您可能永远不会收到这样的广播。

反而：

*   将您移动`BroadcastReceiver`到清单中注册的人，最初是禁用的
*   如果`IntentService`确定它需要等待 WiFi，让它启用现有的`BroadcastReceiver`via `PackageManager`and `setComponentEnabledSetting()`，然后返回 out of`onHandleIntent()`
*   一旦 WiFi 准备就绪，`BroadcastReceiver`它将`startService()`用于发送要由您处理的命令`IntentService`，此时它可以通过`PackageManager`和禁用自身`setComponentEnabledSetting()`**

# c# - C# 和 LINQ 中 N'something in Persian' 的等价物是什么？

> ID：12448148
> 
> 赞同：0
> 
> 时间：2012-09-16T15:26:49.017
> 
> 标签：c#, sql-server, linq, persian

我试图从 C# 代码将波斯语的东西插入我的数据库（SQL server 2008）。问题是，当你在 sql server 中插入时，你只需将 N'چیزی' 用于 utf-8。但是你如何在 LINQ 中做到这一点？（我不想使用存储过程）。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T15:29:37.890

只需使用该字符串`"چیزی"`并确保您的`.cs`文件也是`UTF-8`如此。

将此用作参数化查询或您正在使用的任何 ORM 中的参数。数据访问层将负责编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T05:04:53.423

*   LINQ to EF 或 LINQ to SQL 将在任何地方自动生成/使用该 N''：

    exec sp_executesql N'update [dbo].[Users] set [Name] = @0 where (([Id] = @1) and ([Name] = @2)) ',N'@0 nvarchar(max) , @1 int,@2 nvarchar(max) ',@0=N'用户名 1',@1=1,@2=N'Vahid'

*   那些 N'ي' （阿拉伯语 Ye）或 N'ى' （波斯语 Ye）都是有效的 UTF-8 字符。因此，您需要自己在它们之间进行转换（在插入数据之前），这不是 EF 或 SQL Server 的职责。 [关于它的一些例子](http://www.dotnettips.info/Search?term=%D9%8A%20%D9%88%20%D9%83)（波斯语）。

# shell - 通过运行命令在 shell 脚本中设置变量

> ID：12448149
> 
> 赞同：0
> 
> 时间：2012-09-16T15:26:49.347
> 
> 标签：shell, unix

```
>cat /tmp/list1
john
jack

>cat /tmp/list2
smith
taylor 
```

保证 list1 和 list2 的行数相等。

```
 f(){
        i=1
        while read line
          do
        var1 = `sed -n '$ip' /tmp/list1`
        var2 = `sed -n '$ip' /tmp/list2`
        echo $i,$var1,$var2
        i=`expr $i+1`
            echo $i,$var1,$var2
          done < $INFILE
    } 
```

所以 f() 的输出应该是：

```
1,john,smith
2,jack,taylor 
```

但是得到

```
1,p,p
1+1,p,p 
```

如果我替换以下内容：

```
var1 = `sed -n '$ip' /tmp/list1`
var2 = `sed -n '$ip' /tmp/list2` 
```

有了这个：

```
var1=`head -$i /tmp/vip_list|tail -1`
var2=`head -$i /tmp/lb_list|tail -1` 
```

然后输出：

```
1,john,smith
1,john,smith 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T15:36:34.247

$ip 是使 ip 成为变量名称的问题，您应该使用 ${i}p 而不是让 shell 知道该变量不是 ip，您的代码应该看起来像

var1=`sed -n "${i}p" /tmp/list1`

var2=`sed -n "${i}p" /tmp/list2`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T15:37:34.233

如果您可以使用 paste 和 awk 命令，则可以使用单线实现相同的目的：

```
paste -d, /tmp/list1 /tmp/list2 | awk '{print NR "," $0}' 
```

用这一行替换 while 脚本:)

# jquery - jQuery fancybox 在较少的 HTML 页面中加载 iframe，但不在 Wordpress 上

> ID：12448151
> 
> 赞同：0
> 
> 时间：2012-09-16T15:26:55.113
> 
> 标签：jquery, wordpress, fancybox

我很难在 Wordpress 中找到不允许使用 fancybox 加载 iframe 的 jQuery 插件或其他内容。

带有剥离 html 的 Easy Fancybox 可以工作，下面是工作版本

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head>

<!-- Add jQuery library -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>

<link rel='stylesheet' id='easy-fancybox.css-css'  href='http://www.wp-responsive-themes.com/wp-content/plugins/easy-fancybox/easy-fancybox.css.php?ver=1.3.4' type='text/css' media='screen' />

<script type='text/javascript' src='http://www.wp-responsive-themes.com/wp-content/plugins/easy-fancybox/fancybox/jquery.fancybox-1.3.4.pack.js?ver=1.3.4'></script>
</head>
<body>
<a href="http://wp-responsive-themes.com/"  data-fancybox-type="iframe"  title="preview" class="preview fancybox-iframe">Preview</a>
<script type="text/javascript">
jQuery(document).ready(function() {
      $("a.preview").fancybox({
           'Width'    :       960 ,
           'Height'   :       640,
           'hideOnContentClick': false, 
           'type':'iframe'
      }); 
});

</script>
</body>
</html> 
```

但fancybox 无法在页面上加载 iframe（Wordpress）。

在以下页面单击“iPhone 5 Vertical Orientation Preview”时应该打开 iframe

[http://www.wp-responsive-themes.com/2012/myapp-adaptive-wp-theme-for-app-developers-429/](http://www.wp-responsive-themes.com/2012/myapp-adaptive-wp-theme-for-app-developers-429/)

需要帮忙

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T16:38:51.023

Wordpress 的设置方式使得 jQuery 可以在没有冲突的情况下使用。这意味着 $ 不容易获得。

[http://codex.wordpress.org/Function_Reference/wp_enqueue_script#jQuery_noConflict_wrappers](http://codex.wordpress.org/Function_Reference/wp_enqueue_script#jQuery_noConflict_wrappers)

```
jQuery(document).ready(function($) {
      $("a.iphone4_vertical").fancybox({
           'Width'    :       960 ,
           'Height'   :       640,
           'hideOnContentClick': false, 
           'type':'iframe'
      }); 
}); 
```

添加`$`as 函数参数应该可以解决您的问题。

# css - 当 colspan 设置在下面的 td 行时，单个 th 的边界扩展到相邻的 th

> ID：12448155
> 
> 赞同：2
> 
> 时间：2012-09-16T15:27:35.337
> 
> 标签：css, google-chrome, html-table

具有以下html代码：

```
<table>
<tr><th>First</th><th class='second'>Second</th><th class='third'>Third</th><th>Fourth</th></tr>
<tr><td>Mike</td><td colspan=2 >John</td><td>Paul</td></tr>
</table>​ 
```

并遵循css：

```
table {
    border-collapse: collapse;
}

td, th {
border: 1px black solid;
}

td {
    border-top: none;
}
th {
    border-bottom: none;
}
th.second {
    border-bottom: 3px green solid;
}
th.third {
} 
```

我希望结果是一张表格，在第二个单元格下方有 3px 实线绿线。而不是在 Chrome 中，我在第二个和第三个单元格下方都有纯绿色边框。

在firefox中，结果和预期的一样。这是浏览器错误，还是我的代码非法？

[您可以在http://jsfiddle.net/tt6aP/3/](http://jsfiddle.net/tt6aP/3/)看到示例

PS：尝试设置

```
th.third {
    border-bottom: 2px solid red;
} 
```

然后尝试将其提高到 3px。这更奇怪了。

**截图**

预期的： ![在 Firefox 中看到的表格](../Images/200cd9c936d645405d97c042c2afe7c0.png)

铬合金： ![在 chrome 中看到的表](../Images/d62928d0bc9ecd0606aafaaab2cc5a76.png)

火狐： ![在 Firefox 中看到的表格](../Images/200cd9c936d645405d97c042c2afe7c0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T20:36:27.993

好吧，我不知道这是否是一个错误，但是当我遇到这个问题时，我想出了一个简单的解决方法：在要应用边框样式的地方插入一个额外的行/列。

```
<table>
    <tr>
        <th>Ano</th>
        <th class='first'>First</th>
        <th class='second'>Second</th>
        <th class='third'>Third</th>
    </tr>
    <tr class='hack'>
        <td></td>
        <td></td>
        <td></td>
        <td></td>        
    </tr>
    <tr>
        <td>Mike</td>
        <td colspan=2 >John</td>
        <td>Paul</td>
    </tr>
</table> 
```

这是CSS：

```
table {
    border-collapse: collapse;
}
tr.hack > td {
    height:0px;
}
td, th {
    border: 1px black solid;
}
tr.hack > td, td {
    border-top: none;
}
tr.hack > td, th {
    border-bottom: none;
}
th.first {
    border-bottom: 3px green solid;
}
th.second {
}
th.third {
} 
```

[我在这里](http://jsfiddle.net/DHr98/6/)在 chrome 上测试了这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T13:48:35.177

另一个例子：http: [//jsfiddle.net/huggz/LVjja/3/](http://jsfiddle.net/huggz/LVjja/3/)

我认为更容易理解。我的解决方案很简单。我不需要`border-collapse: collapse`设置。将我的表更改为：

```
table {
    border-collapse: separate;
} 
```

一切正常。我不得不认为这是一个错误。当 Chrome 折叠边框时，感觉就像 Chrome 只是选择了错误的边框长度来显示。它显示的是上面行的长度，而不是当前单元格的长度。

另一种解决方案是在有边框的单元格之前添加一个 0 宽度的列，例如[http://jsfiddle.net/huggz/LVjja/6/](http://jsfiddle.net/huggz/LVjja/6/)

CSS：

```
.hack {
    width: 0;
} 
```

html:

```
<tr>
    <td colspan="4">3 Cols</td>
</tr>
<tr>
    <td class="hack"></td>
    <td class="top_border">1 details</td>
    <td>2 normal</td>
    <td>3 normal</td>
</tr> 
```

# android - 如何设置文本的颜色和大小？（我使用选择器）

> ID：12448160
> 
> 赞同：2
> 
> 时间：2012-09-16T15:27:57.247
> 
> 标签：android, android-selector

我的源选择器

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/button_pressed"  android:state_focused="true" android:state_pressed="true"></item>
    <item android:drawable="@drawable/button_selected" android:state_activated="true"></item>
    <item android:drawable="@drawable/button_normal"></item>

</selector> 
```

我如何设置样式的示例 - button_normal.xml

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" >

    <solid android:color="#F1F4F2" />

    <corners
        android:bottomLeftRadius="7dip"
        android:topLeftRadius="7dip" />

</shape> 
```

**如何在“形状”中设置文字的大小和颜色？也许还有另一种方法来设置选择器的大小和颜色？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T15:43:52.997

这种方式仅适用于按钮的背景。

您应该在 上使用另一个选择器 `android:textColor="@color/your_color_selector"`并将此文件放在`res/color folder`

这是一个例子：

your_color_selector.xml

```
<item android:state_pressed="true" android:color="@android:color/blue"/>
<item android:state_enabled="true" android:state_selected="true" android:color="@android:color/white"/>
<item android:color="@android:color/black"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T15:57:10.417

您可以创建一个样式，并定义文本大小、颜色和可绘制（还有更多）。

你可以这样做：

在 values 文件夹中创建一个名为 style.xml 的文件：

```
<style name="button_style">
    <item name="android:textColor">#ffffff</item>
    <item name="android:textSize">18dp</item>
    <item name="android:background">@drawable/your_selector</item>
</style> 
```

然后转到您的 Button 声明并定义按钮的样式，例如：

```
<Button
  style="@style/button_style"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:text="Button"/> 
```

# c++ - 在 VS 中移动 [eax+4]

> ID：12448161
> 
> 赞同：0
> 
> 时间：2012-09-16T15:28:16.627
> 
> 标签：c++, assembly, x86, inline-assembly

我无法编译这个，我应该如何在 Visual Studio 中将 [eax+4] 移动到 y ？

```
float x, y, z;

__asm
{
    mov x,      eax
    mov y,      [eax+4]
    mov z,      [eax+8]
} 
```

**编辑：**

> 错误 1 ​​错误 C2424：“+”：“第二个操作数”中的表达式不正确

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-16T15:36:20.340

MOV 指令不能将内存移动到内存。查看您最喜欢的汇编语言参考，了解有关每条指令规则的更多详细信息。如果某事未明确列为允许，则不允许。你不能只是编造一些东西。处理器非常挑剔。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-16T15:57:39.173

您将`eax`其用作指针，因此将该位模式存储到其中`float x`似乎不太可能。也许您打算在`[eax+0]`、+4 和 +8 时从内存中复制 3 个浮点数？

@RaymondChen 是对的，您可以使用临时寄存器来转移它。显而易见的选择是临时选择 ECX 或 EDX；那些与 EAX 一起被调用破坏，因此使用它们不会强制编译器在包含 asm 块的函数中保存/恢复它们。

即使值是`float`，您也可以使用 32 位整数寄存器而不是通过 XMM0 或 x87 寄存器来复制它们；您没有对它们进行 FP 数学运算。

```
mov   ecx, [eax]
mov   x, ecx            // you probably want this, not  mov x, eax
mov   ecx, [eax+4]
mov   y, ecx
mov   ecx, [eax+8]
mov   z, ecx 
```

如果您知道`x`并且`y`是连续的，您可以使用 XMM 寄存器一次复制 8 个字节。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2019-11-26T09:43:48.973

```
float x, y, z;

__asm
{
    mov x,      eax
    push        eax
    mov eax,    [eax+4]
    mov y,      eax
    pop         eax
    mov eax,    [eax+8]
    mov z,      eax
} 
```

# java - joda time plusDays forPattern("dd/mm/yyyy") 不切换到下个月

> ID：12448164
> 
> 赞同：1
> 
> 时间：2012-09-16T15:28:29.283
> 
> 标签：java, time, jodatime, days

```
DateTime start = DateTimeFormat.forPattern("dd/mm/yyyy").parseDateTime("30/08/2012"); 
```

我在上面的开始日期中添加了 10 天，但它不会切换到下个月。但是，下面的代码会。

```
DateTime start = DateTimeFormat.forPattern("dd/MM/yyyy").parseDateTime("30/08/2012"); 
```

为什么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T15:31:46.367

您正在混合分钟 ( `mm`) 和月份 ( `MM`)。从[javadoc](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html)：[_`DateTimeFormat`](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html)

```
 Symbol  Meaning                      Presentation  Examples
 ------  -------                      ------------  -------
 M       month of year                month         July; Jul; 07
 m       minute of hour               number        30 
```

[`SimpleDateFormat`顺便说一下，Java SE 自己的class](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)也使用了相同的模式符号。

# certificate - 如何更改钥匙串中自行创建的证书颁发机构的到期日期

> ID：12448167
> 
> 赞同：1
> 
> 时间：2012-09-16T15:28:52.280
> 
> 标签：certificate, keychain

我正在尝试使用存储的公钥和私钥在 Mac 上的钥匙串中创建证书颁发机构。输出 CA 的有效期为自创建日期起一年。

我想增加证书有效期。

我可以通过以下命令在 linux 上使用本[教程进行操作：](https://help.ubuntu.com/community/OpenSSL)

```
openssl req -x509 -newkey rsa:2048 -out cacert.pem -outform PEM -days 1825 
```

该命令将创建一个有效期为 5 年的证书颁发机构。

***是否可以使用钥匙串或其他方法（更改一些配置文件）来做到这一点？如何？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T15:45:44.837

我在证书助手“创建您的证书颁发机构”的第一个屏幕上找到了它。只需单击“让我覆盖默认值”。单击“继续”，下一个屏幕有一个框来填写有效期。

你去吧。

# c# - WPF WebView 控件（Metro）中的 Web 字体和 HTML5 应用程序缓存功能

> ID：12448169
> 
> 赞同：0
> 
> 时间：2012-09-16T15:29:14.707
> 
> 标签：c#, wpf, webview, windows-8, windows-runtime

我正在使用 C# 和 WPF 创建 Metro 应用程序。

我想包含一个 WebView 来显示一些 Web 内容。但问题是，一些 HTML5/CSS3 功能在 WebView 中不可用，而在 IE10 中可用。

例如，WebView 不显示 Web 字体，但 IE10 显示。

此外，[html5test](http://html5test.com)表示 WebView 不支持应用程序缓存（以及其他一些功能），而 IE10 也支持应用程序缓存。

如何在 WPF WebView 控件中实现 Web 字体和 HTML5 应用程序缓存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T04:40:07.103

在 WebView 中将其视为查看 Web 内容的简单方法。遗憾的是，WebView 控件不是一个功能齐全的 IE10，因此它缺少一些功能。如果您控制网页，我建议您简化输入，或重新考虑应用程序功能:(

# javascript - jQuery：deferred.always() 和 deferred.then() 有什么区别？

> ID：12448171
> 
> 赞同：29
> 
> 时间：2012-09-16T15:29:49.643
> 
> 标签：javascript, jquery, jquery-deferred

在我看来，两者都做同样的事情。

文件：

*   [deferred.always()](http://api.jquery.com/deferred.always/)

*   [deferred.then()](http://api.jquery.com/deferred.then/)

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-16T15:33:13.377

似乎`deferred.then()`允许您为成功和失败传递两个单独的回调，而`deferred.always()`需要`n`多个回调，无论初始事件的结果如何，它们都将被调用。

我会说`deferred.always()`在初始事件的成功/失败并不重要的情况下使用

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-16T15:34:37.467

您可以为解决 ( )`.then()`提供单独的回调，并为拒绝 ( ) 提供*另一个*回调。`$.Deferred``done`*`$.Deferred``fail`*

 *`.always()`，另一方面，允许您提供始终执行的回调，无论是否`$.Deferred`已解决或拒绝。换句话说，在这个回调中，AJAX 调用是失败还是成功执行都没有关系。

`.always()`当我希望代码每次都运行时，我倾向于放入代码，并且与是否`$.Deferred`成功解决无关。例如，清除 AJAX 加载指示器或隐藏进度条。使用`.then()`你会有这样的东西：

```
$.get("/some/url").then(function () { // done callback
  $(".progress-bar").hide();
}, function () { // fail callback
  $(".progress-bar").hide();
}); 
```

如果你使用`.always()`，你只需要一个回调，因为你*总是*想隐藏进度条，无论`$.Deferred`是解决还是拒绝：

```
$.get("/some/url").always(function () {
  $(".progress-bar").hide();
}); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-24T15:15:29.400

在 jQuery 1.8 之前：`.always(fn)`相当于`.then(fn, fn)`

从 jQuery 1.8 开始：`.always(fn)`类似于`.then(fn, fn)`但返回的内容不同（有关详细信息，请参阅[http://api.jquery.com/deferred.then/](http://api.jquery.com/deferred.then/)）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-02T14:19:13.623

（从 1.8 开始）的最大好处`then`是能够显式链接任务，因为它返回一个承诺，该承诺将通过回调的结果来解决

文档中的示例：

```
var request = $.ajax( url, { dataType: "json" } ),
    chained = request.then(function( data ) {
      return $.ajax( url2, { data: { user: data.userId } } );
    });

chained.done(function( data ) {
  // data retrieved from url2 as provided by the first request
}); 
```*

# webserver - 如何在 Mac OSX 上安装 YAWS

> ID：12448173
> 
> 赞同：4
> 
> 时间：2012-09-16T15:30:11.237
> 
> 标签：webserver, installation, yaws

以下是在 Mac OSX 机器上安装 YAWS（Yet Another Web Server）的分步指南。它已在 10.6.8 SL 上进行了测试，并且运行良好，但如果您开始发送垃圾邮件 F5，则需要重新启动服务器。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-16T15:30:11.237

以下是在 Mac OSX 机器上正确安装和测试 YAWS（Yet Another Web Server）的步骤：

安装：

1.  访问[http://yaws.hyber.org/download/](http://yaws.hyber.org/download/)
2.  获取最新源 - 例如'yaws-X.XX.tar.gz'。
3.  解压它（对于本教程，我们假设 /Users/Name/Desktop/yaws/ ）。
4.  打开终端（可以在应用程序/实用程序中找到）。
5.  类型：'cd /Users/Name/Desktop/yaws/yaws-X.XX/'（不带引号）。
6.  键入：'./configure'（不带引号）并等待。
7.  键入：'make'（不带引号）并等待。
8.  类型：'sudo make install'（不带引号）。
9.  现在您需要输入您的管理员密码，终端不会显示您正在输入的任何内容，所以不要担心它似乎无法正常工作，然后按 Enter。
10.  现在 YAWS 正在安装，在它完成后输入“sudo yaws”（不带引号）来运行网络服务器（它可能会再次要求输入密码）。

测试：

1.  打开浏览器。
2.  转到 0.0.0.0。
3.  您应该会看到 yaws 主页：恭喜！你已经安装了 YAWS。

要开始测试您的页面，只需将它们放入“/tmp”，然后在浏览器中输入“localhost/pagename.yaws”。

查看更多信息和教程：http: [//yaws.hyber.org/](http://yaws.hyber.org/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-12T08:16:02.373

您可以使用 brew：[http ://brew.sh/](http://brew.sh/)

```
brew install yaws 
```

# python - 对 Python 列表中的 __str__ 感到困惑

> ID：12448175
> 
> 赞同：124
> 
> 时间：2012-09-16T15:30:27.530
> 
> 标签：python, string, list, printing, tostring

来自 Java 背景，我理解这`__str__`类似于 Python 版本的 toString（虽然我确实意识到 Python 是较旧的语言）。

所以，我定义了一个小类和一个`__str__`方法，如下所示：

```
class Node:

    def __init__(self, id):
        self.id = id
        self.neighbours = []
        self.distance = 0

    def __str__(self):
        return str(self.id) 
```

然后我创建了它的一些实例：

```
uno = Node(1)    
due = Node(2)    
tri = Node(3)    
qua = Node(4) 
```

现在，尝试打印这些对象之一时的预期行为是打印它的关联值。这也会发生。

```
print uno 
```

产量

```
1 
```

但是当我执行以下操作时：

```
uno.neighbours.append([[due, 4], [tri, 5]]) 
```

接着

```
print uno.neighbours 
```

我明白了

```
[[[<__main__.Node instance at 0x00000000023A6C48>, 4], [<__main__.Node instance at 0x00000000023A6D08>, 5]]] 
```

我期望的地方

```
[[2, 4], [3, 5]] 
```

我错过了什么？我在做什么其他令人畏惧的事情？:)

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-09-16T15:33:30.720

Python 有两种不同的方式将对象转换为字符串：`str()`和`repr()`. 打印对象使用`str()`; 打印包含对象`str()`的列表用于列表本身，但`list.__str__()`调用`repr()`单个项目的实现。

所以你也应该覆盖`__repr__()`. 一个简单的

```
__repr__ = __str__ 
```

在类主体的最后会做的伎俩。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-09-16T15:37:38.473

由于 Python 相对于 Java 的无限优势，Python 的toString 操作不是*一个*，而是*两个。*

一个是`__str__`,另一个是`__repr__`

`__str__`将返回一个人类可读的字符串。 `__repr__`将返回一个内部表示。

`__repr__`可以通过调用`repr(obj)`或使用反引号在对象上调用``obj``。

当打印列表以及其他容器类时，包含的元素将使用`__repr__`.

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2016-01-12T12:04:58.460

它提供人类可读版本的输出而不是“对象”：示例：

```
class Pet(object):

    def __init__(self, name, species):
        self.name = name
        self.species = species

    def getName(self):
        return self.name

    def getSpecies(self):
        return self.species

    def Norm(self):
        return "%s is a %s" % (self.name, self.species)

if __name__=='__main__':
    a = Pet("jax", "human")
    print a 
```

返回

```
<__main__.Pet object at 0x029E2F90> 
```

而带有“ **str** ”的代码返回不同的东西

```
class Pet(object):

    def __init__(self, name, species):
        self.name = name
        self.species = species

    def getName(self):
        return self.name

    def getSpecies(self):
        return self.species

    def __str__(self):
        return "%s is a %s" % (self.name, self.species)

if __name__=='__main__':
    a = Pet("jax", "human")
    print a 
```

返回：

```
jax is a human 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-02-11T14:24:08.280

## 回答问题

[正如在另一个答案](https://stackoverflow.com/a/12448200/2613492)中指出的那样，并且您可以在[PEP 3140](https://www.python.org/dev/peps/pep-3140/)中阅读，`str`关于`list`每个项目的调用`__repr__`。对于这部分，您无能为力。

如果您实施`__repr__`，您将获得更具描述性的内容，但如果实施正确，则不会完全符合您的预期。

## 正确实施

**快速但错误**的解决方案是别名`__repr__`为`__str__`.

`__repr__`不应设置为`__str__` *无条件*。`__repr__`应该创建一个[表示，它应该看起来像一个有效的 Python 表达式，可用于重新创建具有相同值的对象](http://something.com)。在这种情况下，这宁可`Node(2)`比`2`.

的正确实现`__repr__`使得重新创建对象成为可能。在此示例中，它还应包含其他重要成员，例如`neighours`和`distance`。

一个*不完整*的例子：

```
class Node:

    def __init__(self, id, neighbours=[], distance=0):
        self.id = id
        self.neighbours = neighbours
        self.distance = distance

    def __str__(self):
        return str(self.id)

    def __repr__(self):
        return "Node(id={0.id}, neighbours={0.neighbours!r}, distance={0.distance})".format(self)
        # in an elaborate implementation, members that have the default
        # value could be left out, but this would hide some information

uno = Node(1)    
due = Node(2)    
tri = Node(3)    
qua = Node(4)

print uno
print str(uno)
print repr(uno)

uno.neighbours.append([[due, 4], [tri, 5]])

print uno
print uno.neighbours
print repr(uno) 
```

*注意*：与和或`print repr(uno)`的正确实现一起允许重新创建对象并检查是否相等。`__eq__``__ne__``__cmp__`

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-09-16T15:33:16.810

好吧，容器对象的`__str__`方法将用于`repr`它们的内容，而不是`str`. 因此，您可以使用`__repr__`而不是`__str__`，因为您使用的是 ID 作为结果。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-09-16T15:34:51.413

`__str__`*仅当对象需要字符串表示*时才调用。

例如`str(uno)`，`print "%s" % uno`或`print uno`

但是，还有另一种称为`__repr__`this 的魔术方法是对象的*表示*。当您没有将对象显式转换为字符串时，将使用*表示*。

如果你这样做，`uno.neighbors.append([[str(due),4],[str(tri),5]])`它会做你所期望的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-02-16T13:13:00.470

关于类的事情，以及设置未占用的全局变量等于类中的某个值，是你的全局变量存储的实际上是对实际存储值的内存位置的引用。

您在输出中看到的内容表明了这一点。

**由于str**方法以及 print 的工作原理，您可能可以在使用初始全局变量时看到值并使用 print 而不会出现问题，但您将无法使用列表执行此操作，因为存储在元素中的内容在该列表中只是对值的内存位置的引用——如果您想了解更多信息，请阅读别名。

此外，当使用列表并忘记什么是别名和什么不是别名时，如果您在别名列表中更改它，您可能会发现您正在更改原始列表元素的值 - 因为同样，当您设置列表元素等于列表或列表中的元素，新列表仅存储对内存位置的引用（它实际上并不创建特定于该新变量的新内存空间）。这就是 deepcopy 派上用场的地方！

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-09-12T02:46:05.523

print`self.id.__str__()`会为你工作，虽然对你没那么有用。

当您说要在程序开发时打印出网格或结构表示时，您的`__str__`方法将更加有用。

```
print self._grid.__str__()

def __str__(self):
    """
    Return a string representation of the grid for debugging.
    """
    grid_str = ""
    for row in range(self._rows):
        grid_str += str( self._grid[row] )
        grid_str += '\n'
    return grid_str 
```

# vim - 如何使用 .vimrc 在启动时最大化 vim 的窗口？

> ID：12448179
> 
> 赞同：13
> 
> 时间：2012-09-16T15:31:02.863
> 
> 标签：vim

我可以向我的 .vimrc 或 .gvimrc 添加一些东西以使 gvim 始终在最大化的 GUI 窗口中启动吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-16T15:51:12.543

看起来如果您使用的是 Windows，就像将这一行添加到您的 .vimrc 中一样简单：

```
au GUIEnter * simalt ~x 
```

（输入`:help maximize`或`:help win16-maximized`了解详情）

显然，在您的 vimrc 的其他平台上没有标准的方法可以做到这一点。不知道要添加哪个平台的最简单的技巧

```
set lines=999 columns=999 
```

到你的 .gvimrc。[Vim Wiki 的最大化或设置初始窗口大小](http://vim.wikia.com/wiki/Maximize_or_set_initial_window_size)页面上还有一些其他技巧可以提供帮助。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-16T19:58:48.220

在安装了大多数窗口管理器的 Linux 上，`wmctrl`您可以使用以下命令最大化 Gvim：

```
call system('wmctrl -i -b add,maximized_vert,maximized_horz -r '.v:windowid) 
```

. 注意：我故意避免`-b add,fullscreen`提及，`man wmctrl`因为它意味着不同的东西：至少在fluxbox中，这意味着从现在开始在这个桌面上你一次只能看到gvim或其他东西，而不是两者，并且gvim没有窗口装饰（并不是说我真的很关心他们）。例如，如果你弹出 yakuake* gvim 会消失，直到 yakuake 隐藏。

* 终端模拟器，在某些 FPS 游戏中像控制台一样弹出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-06T18:40:41.240

您可以通过添加以下行来设置 Vim 窗口的初始大小`~/.vimrc`：

`set lines=50 columns=100`（只是一个例子）

我将我的 vim 设置为我的屏幕分辨率，即`set lines=768 columns=1366`. 现在我的 Vim 编辑器会自动全屏启动。

# c# - 从 C# 静默执行 MSI 包

> ID：12448180
> 
> 赞同：2
> 
> 时间：2012-09-16T15:31:07.640
> 
> 标签：c#, windows-installer

新手问题，让我尝试尽可能清楚地说明这一点。我有一个需要静默执行 msi 包的程序（多个，但这不是问题）

MSI 包包含在与我的程序位于同一目录的文件夹中。我暂时给它起了一个简单的名称“InstallFiles”。

我不热衷于使用完整的路径名，例如。C:\my program\another directory\another directory 等，因为它将被放在多台新旧 PC 上，在这种情况下驱动器号可能会更改。到目前为止，我有：

```
install.StartInfo.FileName = "msiexec";
install.StartInfo.Arguments = "/i F:\\InstallFiles\\JRE.msi";
install.Start();
install.WaitForExit(); 
```

但是，当它启动时，它只给我 Windows Installer 开关信息然后终止，我如何让它运行以及如何更改文件路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T15:37:43.827

与以下开关一起使用：

/q[n|b|r|f]

```
 Sets user interface level
    n - No UI
    b - Basic UI
    r - Reduced UI 
```

检查[http://msdn.microsoft.com/en-us/library/windows/desktop/aa367988%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367988%28v=vs.85%29.aspx)了解详细的命令行选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T15:36:22.980

.msi 文件的执行应该像 .exe 文件，这是你的答案：[https ://stackoverflow.com/a/12436300/359170](https://stackoverflow.com/a/12436300/359170)

使用以下代码启动应用程序：

```
Process.Start("yourfile.msi"); 
```

它不需要完整路径，它会将当前目录添加到您在那里编写的文件名中。

但

```
System.IO.Directory.GetCurrentDirectory(); 
```

获取当前执行的文件目录。你可以通过像这样只添加文件名来获取文件路径：

```
 string path = System.IO.Directory.GetCurrentDirectory() + "\\yourfile.msi"; 
```

# vba - Excel VBA编程

> ID：12448181
> 
> 赞同：0
> 
> 时间：2012-09-16T15:31:18.077
> 
> 标签：vba, excel

我是一个完整的 excel 初学者，今天有一个作业要在明天完成。如果有人能在这方面帮助我，我将不胜感激。我有一张包含下表的表格：

![在此处输入图像描述](../Images/e6c6a9604f2192d3fb3d16e02d22dd5f.png)

第一个表是主表，我需要从中获取数据并使用 marco-VBA 以单独表的形式表示它。使用宏来实现这一点将不胜感激。谢谢。

假设主表有 n 列，所以我需要形成 n-1 个单独的表，其中每个表将有 2 列，第一列将始终是主表的第一列，第二列将是 (n+1)th第 n 个表的主表中的列。示例 - 第一个表将有 2 列（主表的第 1 列和主表的第 2 列），同样，第 2 表将有 2 列（主表的第 1 列和主表的第 3 列），依此类推.. ..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T21:07:42.593

我将在接下来的一个小时左右添加到这个答案。这个想法是让您从早期的代码块开始，而我开发后面的代码块。 **编辑**我现在已经完成了答案，除了您可能寻求的任何额外解释。

我同意 RBarryYoung 的观点：您没有提供足够的信息，无法让任何人为您提供完整的解决方案。此外，如果您正在尝试学习 VBA，从长远来看，为您提供解决方案将无济于事。

我通常会同意 djphatic：宏记录器对于学习匹配用户操作的 VBA 非常有用，但宏记录器不会为您提供此任务所需的大量 VBA。

我很好奇，当你显然还没有准备好这个任务时，是谁给了你这个任务。

我无法读取您的图像，因此我创建了一个名为“MasterTable”的工作表并在其中加载了数据，因此它看起来像：

![样本数据](../Images/1b008f7fbc2589558e6e4d11d83540e8.png)

您的评论暗示此表的大小可能会发生变化，因此首要任务是确定其尺寸。有许多不同的方法来识别表格的尺寸；没有一个在任何情况下都有效。我将使用 UsedRange。

将以下内容复制到模块中：

```
Option Explicit
Sub SplitTable1()

  Dim UsedRng As Range

  With Worksheets("MasterTable")

   Set UsedRng = .UsedRange
   Debug.Print UsedRng.Address
   Debug.Print UsedRng.Columns.Count
   Debug.Print UsedRng.Rows.Count

  End With

End Sub 
```

没有时间对我将向您展示的所有内容进行完整的解释，但我将尝试解释最重要的几点。

`Option Explicit`意味着必须声明每个变量。如果没有此语句，拼写错误的名称将自动声明一个新变量。

`Debug.Print`将值输出到立即窗口，该窗口应位于 VBA 编辑器屏幕的底部。如果不存在，请单击`Ctrl`+ `G`。

`Dim UsedRng As Range`声明一个`UsedRng`类型的变量`Range`。范围是一种对象。当你给一个对象赋值时，你必须以`Set`.

运行此宏将向立即窗口输出以下内容：

```
$A$1:$H$6
 8 
 6 
```

我不会使用`UsedRng.Address`，或者`UsedRng.Columns.Count`但我希望您了解 UsedRange 是什么以及如何使用它。

将此宏添加到模块中：

```
Sub SplitTable2()

  Dim CellValue() As Variant
  Dim ColCrnt As Long
  Dim RowCrnt As Long

  With Worksheets("MasterTable")

   CellValue = .UsedRange.Value

   For RowCrnt = LBound(CellValue, 1) To UBound(CellValue, 1)
     Debug.Print "Row " & RowCrnt & ":";
     For ColCrnt = LBound(CellValue, 2) To UBound(CellValue, 2)
       Debug.Print " " & CellValue(RowCrnt, ColCrnt);
     Next
     Debug.Print
   Next

  End With

End Sub 
```

`Dim CellValue() As Variant`声明一个 Variant 类型的动态数组 CellValue。 `()`意味着我将在运行时声明数组的大小。

`CellValue = .UsedRange.Value`将数组 CellValue 设置为 UserRange 中的值。该语句根据需要设置 CellValue 的维度。

`CellValue`变成一个二维数组。通常，数组的第一个维度是列，第二个维度是行，但当数组从某个范围加载或加载到某个范围时，这不是 TRUE。

对于一维数组，`LBound(MyArray)`返回数组的下界并`UBound(MyArray)`返回上界。

对于二维数组，`LBound(MyArray, 1)`返回数组第一个维度的`LBound(MyArray, 2)`下界并返回第二个维度的下界。

此宏将以下内容输出到立即窗口。

```
Row 1: Column 1 Column 2 Column 3 Column 4 Column 5 Column 6 Column 7 Column 8
Row 2: R1C1 R1C2 R1C3 R1C4 R1C5 R1C6 R1C7 R1C8
Row 3: R2C1 R2C2 R2C3 R2C4 R2C5 R2C6 R2C7 R2C8
Row 4: R3C1 R3C2 R3C3 R3C4 R3C5 R3C6 R3C7 R3C8
Row 5: R4C1 R4C2 R4C3 R4C4 R4C5 R4C6 R4C7 R4C8
Row 6: R5C1 R5C2 R5C3 R5C4 R5C5 R5C6 R5C7 R5C8 
```

第二个宏演示了我可以将工作表中的所有值加载到一个数组中，然后输出它们。

将此宏添加到模块中：

```
Sub SplitTable3()

  Dim ColourBack As Long
  Dim ColourFont As Long

  With Worksheets("MasterTable")
    ColourBack = .Range("A1").Interior.Color
    ColourFont = .Range("A1").Font.Color
    Debug.Print ColourBack
    Debug.Print ColourFont
  End With

End Sub 
```

运行这个宏，它会输出：

```
 16711680 
 16777215 
```

对于这个答案，这些只是神奇的数字。 `16777215`将字体颜色设置为白色，`16711680`并将背景或内部颜色设置为蓝色。

对于最后一个宏，我创建了另一个工作表“SplitTables”。

将此宏添加到模块中：

```
Sub SplitTable4()

  Dim CellValue() As Variant
  Dim ColDestCrnt As Long
  Dim ColourBack As Long
  Dim ColourFont As Long
  Dim ColSrcCrnt As Long
  Dim RowDestCrnt As Long
  Dim RowDestStart As Long
  Dim RowSrcCrnt As Long

  With Worksheets("MasterTable")
    ' Load required values from worksheet MasterTable
    CellValue = .UsedRange.Value
    With .Cells(.UsedRange.Row, .UsedRange.Column)
      ' Save the values from the top left cell of the used range.
      ' This allows for the used range being in the middle of the worksheet.
      ColourBack = .Interior.Color
      ColourFont = .Font.Color
    End With
  End With

  With Worksheets("SplitTables")

    ' Delete any existing contents of the worksheet
    .Cells.EntireRow.Delete

    ' For this macro I need different variables for the source and destination
    ' columns. I do not need different variables for the source and destination
    ' rows but I have coded the macro as though I did.  This would allow the
    ' UsedRange in worksheet "MasterTable" to be in the middle of the worksheet
    ' and would allow the destination range to be anywhere within worksheet
    ' "SpltTables".

    ' Specify the first row and column of the first sub table.  You will
    ' probably want these both to be 1 for cell A1 but I want to show that my
    ' code will work if you want to start in the middle of the worksheet.
    ColDestCrnt = 2
    RowDestStart = 3

    ' I use LBound when I do not need to because I like to be absolutely
    ' explicit about what I am doing.  An array loaded from a range will
    ' always have lower bounds of one.

    For ColSrcCrnt = LBound(CellValue, 2) + 1 To UBound(CellValue, 2)
      ' Create one sub table from every column after the first.

      'Duplicate the colours of the header row in worksheet "MasterTable"
      With .Cells(RowDestStart, ColDestCrnt)
        .Interior.Color = ColourBack
        .Font.Color = ColourFont
      End With
      With .Cells(RowDestStart, ColDestCrnt + 1)
        .Interior.Color = ColourBack
        .Font.Color = ColourFont
      End With

      RowDestCrnt = RowDestStart

      For RowSrcCrnt = LBound(CellValue, 1) To UBound(CellValue, 1)
        ' For each row in CellValue, copy the values from the first and current
        ' columns to the sub table within worksheet "SplitTables"
        .Cells(RowDestCrnt, ColDestCrnt).Value = _
                                    CellValue(RowSrcCrnt, LBound(CellValue, 2))
        .Cells(RowDestCrnt, ColDestCrnt + 1).Value = _
                                              CellValue(RowSrcCrnt, ColSrcCrnt)
        RowDestCrnt = RowDestCrnt + 1
      Next RowSrcCrnt
      ColDestCrnt = ColDestCrnt + 3     ' Advance to position of next sub table
    Next ColSrcCrnt

  End With

End Sub 
```

这才是真正的宏。以前的所有宏都用于演示某些内容。这个宏做我认为你想要的。

带着问题回来。但是，我不知道您在哪个时区。这里是 23:00。大约一个小时后我要睡觉了。之后，明天将回答问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T15:41:50.253

看看 Excel 中的宏记录器。您要实现的目标类似于使用 VBA 对表中的特定列执行简单的复制和粘贴。如果您打开宏记录器并通过复制和粘贴变量和估计列来生成第一个表，然后单击停止，您可以通过查看 Visual Basic 编辑器 (Ctrl+F11) 来查看生成的代码。

您可能会发现这些链接有些用处： [http](http://www.automateexcel.com/2004/08/18/excel_cut_copy_paste_from_a_macro/) ://www.automateexcel.com/2004/08/18/excel_cut_copy_paste_from_a_macro/ http://www.techrepublic.com/blog/10things/10-ways-to-reference-excel -workbooks-and-sheets-using-vba/967

# matlab - matlab确定曲线

> ID：12448182
> 
> 赞同：1
> 
> 时间：2012-09-16T15:31:29.277
> 
> 标签：matlab

有谁知道如何从原始图中获得具有对应 x,y 点的矩阵的平均曲线？我的意思是，我假装中等单曲线。

由于我是 matlab 新手，因此任何代码或只是想法都会对我非常有帮助。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:10:54.993

好吧，您可以做的一件事是拟合参数曲线。这是一个关于如何对带有噪声的 8 字形执行此操作的示例：

```
function findParamFit
    clc, clf, hold on

    %# some sample data
    noise = @(t) 0.25*rand(size(t))-0.125;
    x     = @(t) cos(t)    + noise(t);
    y     = @(t) sin(2*t)  + noise(t);

    t = linspace(-100*rand, +100*rand, 1e4);

    %# initial data
    plot(x(t), y(t), 'b.')        

    %# find fits 
    options = optimset(...
        'tolfun', 1e-12,...
        'tolx', 1e-12);

    a = lsqcurvefit(@myFun_x, [1 1], t, x(t), -10,10, options);     
    b = lsqcurvefit(@myFun_y, [1 2], t, y(t), -10,10, options);

    %# fitted curve
    xx = myFun_x(a,t);
    yy = myFun_y(b,t);   
    plot(xx, yy, 'r.') 

end

function F = myFun_x(a, tt)
    F  = a(1)*cos(a(2)*tt);
end

function F = myFun_y(b, tt)
    F  = b(1)*sin(b(2)*tt);
end 
```

请注意，这是拟合参数曲线的一种特别糟糕的方法，这从解决方案对初始值质量的极端敏感性可以看出`lsqcurvefit`。然而，拟合参数曲线将是可行的方法。

有你的谷歌查询:)

# c - 在单个 printf 调用中从 argv 字符串打印 ascii 值

> ID：12448188
> 
> 赞同：0
> 
> 时间：2012-09-16T15:32:05.133
> 
> 标签：c, argv

我想打印从 argv 接收到的字符串中所有字符的 ascii 值，只使用一个 printf 调用。

像这样，但只打印有效字符（ != 0 ）：

```
printf (" string is %s , in ascii = 0x%X %X %X %X", argv[1], 
          argv[1][0], argv[1][1], argv[1][2], argv[1][3]); 
```

我不想使用从 0 到 strlen(argv[1]) 的 for 循环。我只需要使用一个打印调用。

如果 argv[1] = "a"，那么我只想打印：string is a , in ascii = 0x61

如果 argv[1] = "ab"，那么我只想打印：string is ab, in ascii = 0x61 62

问题是我不想打印垃圾数据

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T15:40:33.807

没有循环就无法做到这一点。`printf`只会在堆栈中寻找一定的深度，并且总是会打印一定数量的值。您不能让它查找可变数量的值，因此循环是您的最佳选择：

```
char *ptr = argv[1];
while (ptr) printf("%X ", *ptr++); 
```

（从技术上讲，这是一个`while`循环，而不是一个`for`循环）。

# javascript - Modernizr + Yepnope + FitText（不同的字体大小/不同视口的缩放）

> ID：12448189
> 
> 赞同：3
> 
> 时间：2012-09-16T15:32:13.373
> 
> 标签：javascript, jquery, media-queries, modernizr, yepnope

首先，我对 JS 很垃圾——一个新手。

我想要做的是针对不同的设备宽度有不同的 FitText (jquery.fittext.js) 缩放。例如：

```
$("#hometitle").fitText(1.1); // for mobile

$("#hometitle").fitText(1.2); // for medium screen

$("#hometitle").fitText(1.2); // for large screen 
```

我知道我可以像这样使用 YepNope（在我的 HTML 文档的底部）：

```
<script type="text/javascript">
Modernizr.load([
    {
        test: Modernizr.mq('(max-width:600px)'),
        yep: '{js_path}mobile.js'
    }
]);
</script> 
```

然后在mobile.js里面我有这个：

```
$(document).ready(function() { 
    { 
        $("#hometitle").fitText(1.2);
    }
}); 
```

我想（绝望地！）知道 [a] 我得到上面的代码了吗？和 [b] 我如何为 YepNope 代码（上图）添加三个宽度的额外测试。

再次抱歉，我对 JS 没用！并且有一个项目需要尽快利用这个。

（旁注：Modernizr 正在加载，在我的 YepNope 代码 jQuery 和 fittext 加载之前的页面底部）

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:39:03.270

对我来说，你似乎是在正确的轨道上。使用 yepnope.js 和 modernizr 来制作 polyfill。

尽管您缺少一些东西，例如首先检查浏览器是否支持媒体查询，以及在查询中使用设备类型。通过最小宽度和最大宽度指定范围也是一个好主意，因为如果不这样做，测试条件可能会加载多个 javascript 文件。

至于多个条件，你可以这样做，

```
Modernizr.load([

    {
        test: Modernizr.mq("only all"),
        nope: 'testnope.js'// this is to check if media queries are supported at all
    },

    {
        test: Modernizr.mq("only screen and (min-width: 960px) and (max-width:1440px)"),
        yep: 'test3.js'
    },

    {
        test: Modernizr.mq("only screen and (min-width: 768px) and (max-width: 959px)"),
        yep: 'test2.js'
    },

    {
        test: Modernizr.mq("only screen and (min-width:480px) and (max-width:767px)"),
        yep: 'test1.js'
    },

    {
        test: Modernizr.mq("only screen and (max-width:479px)"),//smallest screen
        yep: 'test0.js'
    }
]); 
```

希望这可以帮助。

# c - 编译器错误：浪费空间

> ID：12448192
> 
> 赞同：0
> 
> 时间：2012-09-16T15:32:23.980
> 
> 标签：c, compiler-construction, compiler-errors

在编译项目结束时，我得到了这个奇怪的编译器错误：

```
"llvm_transformed_context_ini.c", line 3198: warning: loop not entered at top
"llvm_transformed_context_ini.c", line 3218: warning: loop not entered at top
"llvm_transformed_context_ini.c", line 3237: warning: statement not reached
"llvm_transformed_context_ini.c", line 3248: warning: loop not entered at top
"llvm_transformed_context_ini.c", line 3268: warning: loop not entered at top
"llvm_transformed_context_ini.c", line 3287: warning: statement not reached
op: 2, val: 0
"llvm_transformed_context_ini.c", line 3291: compiler error: wasted space: 1047036660 
```

该行是位于 .c 文件中的最后一行，上面没有任何内容。我试图删除该行，但这并没有解决问题。

* *** _17th_september_EDITED 文本：

你可以从[这里下载](https://www.asuswebstorage.com/navigate/s?u=GY4IFVNJAL)

谁能给我解释一下？？

谢谢，

阿米尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:03:25.753

不确定它是否有帮助，但您可以尝试删除所有虚拟的“do..while”循环。为此，您应该删除评论中包含短语“.. syntactic loop ..”的所有行。

例如：

```
 do {     /* Syntactic loop 'bb172' to make GCC happy */ <<-- remove this line
llvm_cbe_bb172:
  llvm_cbe_tmp__425 = *(&llvm_cbe_model_number);
  llvm_cbe_tmp__426 = *(&llvm_cbe_i);
  llvm_cbe_tmp__427 = *(&llvm_cbe_j);
  llvm_cbe_tmp__428 = *(&llvm_cbe_i);
  llvm_cbe_tmp__429 = *(&llvm_cbe_j);
  llvm_cbe_tmp__430 = *(&llvm_cbe_tc);
  llvm_cbe_tmp__431 = *(&llvm_cbe_qp);
  biari_init_context(llvm_cbe_tmp__431, ((&(*((&(*((&llvm_cbe_tmp__430->field7))).array[((signed int )llvm_cbe_tmp__428)]))).array[((signed int )llvm_cbe_tmp__429)])), ((&(*((&(*((&(*((&INIT_ABS_P.array[((signed int )llvm_cbe_tmp__425)]))).array[((signed int )llvm_cbe_tmp__426)]))).array[((signed int )llvm_cbe_tmp__427)]))).array[((signed int )0u)])));
  llvm_cbe_tmp__432 = *(&llvm_cbe_j);
  *(&llvm_cbe_j) = (((unsigned int )(((unsigned int )llvm_cbe_tmp__432) + ((unsigned int )1u))));
  llvm_cbe_tmp__433 = *(&llvm_cbe_j);
  if ((((signed int )llvm_cbe_tmp__433) <= ((signed int )4u))) {
    goto llvm_cbe_bb172;
  } else {
    goto llvm_cbe_bb174;
  }

  } while (1); /* end of syntactic loop 'bb172' */ <<-- remove this line 
```

这段代码中有很多“goto”标签。可能您当前的编译器无法解析 goto 循环。

# php - 面向对象编程 -> 运算符

> ID：12448195
> 
> 赞同：-6
> 
> 时间：2012-09-16T15:32:32.630
> 
> 标签：php, oop

> **可能重复：**
> [参考 - 这个符号在 PHP 中是什么意思？](https://stackoverflow.com/questions/3737139/reference-what-does-this-symbol-mean-in-php)

因此，我一直在阅读David Powers所著的*PHP Solutions, Dynamic Web Design Made Easy一书。*我通读了关于面向对象的 PHP 的简短部分，我很难理解 -> 运算符的概念。任何人都可以尝试给我一个关于 OOP PHP 中的 -> 运算符的可靠解释吗？

例子：

```
$westcost = new DateTimeZone('America/Los_Angeles');
$now->setTimezone($westcoast); 
```

另外，一个更一般的例子：

```
$someObject->propertyName 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T15:36:24.387

PHP 中的`->`运算符指的是类中的函数或变量。

```
<?php
    class Example {
        public $variableInClass = "stringContent";
        public function functionInClass() {
            return "functionReturn";
        }
    }

    $example = new Example();
    var_dump($example->variableInClass); //stringContent
    var_dump($example->functionInClass()); //functionReturn
?> 
```

请注意，如果我们谈论的是静态类（不同的目的），请`::`改用：

```
<?php
    class Example {
        public static $variableInClass = "stringContent";
        public static function functionInClass() {
            return "functionReturn";
        }
    }

    var_dump($example::$variableInClass); //stringContent
    var_dump($example::functionInClass()); //functionReturn
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T15:40:57.220

`$someObject->propertyName`可以读作：

****从**对象 $someObject**返回**存储在 propertyName 中的值**

 **`$someObject->methodName()`可以读作：

****从**对象 $someObject**执行** methodName**

 *** * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-16T15:36:16.807

类和对象 101：

一个类是这样定义的：

```
class MyClass {

   public $value1;

   public function getValue() {

       return $this->value;

   }

} 
```

我们现在定义了一个具有单个属性和单个函数的类。要使用这些，我们需要创建此对象的“实例”：

```
$myObject = new MyClass(); 
```

要使用属性或函数，我们使用`->`运算符：

```
echo $myObject->value1;
echo $myObject->getValue(); 
```

稍微抽象一点..函数`getValue`在这个对象中定义。通过`->`在我们的类的实例上使用运算符，PHP 所做的实际上只是调用该函数，就像任何其他函数一样......但在它被调用之前`$this`被分配给当前对象。

如果没有，希望这会有所帮助。我只是推荐阅读有关 OOP 基础知识的内容。****

# wolfram-mathematica - 如何从 2D Mathematica 插值函数中获取离散数据？

> ID：12448196
> 
> 赞同：2
> 
> 时间：2012-09-16T15:32:59.450
> 
> 标签：wolfram-mathematica

我正在使用 NDSolve[] 来整合轨道轨迹（使用 ExplicitRungeKutta）。数学给我

```
{{x[t]->InterpolatingFunction[{{0.,2000.}},<>][t],
y[t]->InterpolatingFunction[{{0.,2000.}},<>][t]}} 
```

我的问题是如何将其放入 t=0,1,2...2000 的原始数据表中？我试过了：

```
path = Table[Solved, {t, 0, tmax}]; 
```

但我得到了一大堆这样的东西：

```
{{{x[0] -> -0.523998, y[0] -> 0.866025}}, {{x[1] -> -0.522714, 
y[1] -> 0.886848}}, {{x[2] -> -0.480023, 
y[2] -> 0.951249}}, {{x[3] -> -0.369611, y[3] -> 1.02642}} 
```

我想要类似的东西：

```
{{{-0.523998, 0.866025}}, {{-0.522714, 0.886848}}, etc 
```

我没有很多使用这些插值函数的经验，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T17:54:29.760

您正在返回**规则**，而不是直接运行。为了访问插值函数本身，您需要进行规则替换。

代替

```
Table[Solved, {t, 0, tmax}] 
```

你需要

```
Table[Evaluate[{x[t], y[t]} /. Solved], {t, 0, tmax}]; 
```

`Solved`（我假设是 的输出`NDSolve`）只是一个规则列表，这些规则将允许表达式`x[t]`并被`y[t]`相应的插值函数替换，然后您对其进行评估。

查看 F1 帮助以`NDSolve`获取更多示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-26T08:46:14.780

如果您对用于插值的点感兴趣，可以尝试使用[PropertyValue[]](http://reference.wolfram.com/language/ref/PropertyValue.html)函数——这在使用 NDSolve[] 时有时很有趣。请参见下面的示例：

```
x = Range[1, 10];
y = x^2;
pts = Transpose[{x, y}];
f = Interpolation[pts];
Plot[f[t], {t, 1, 10}]
(*getting the coordinates*)
X = PropertyValue[f, "Coordinates"][[1]]
Y = PropertyValue[f, "ValuesOnGrid"]
ListPlot[Transpose[{X, Y}]] 
```

通过这种方式，您可以提取几乎任何对象的任何属性。要获取属性列表，请使用[PropertyList[]](http://reference.wolfram.com/language/ref/PropertyList.html)函数。在上面的示例中，它返回：

```
PropertyList[f]
{"Coordinates", "DerivativeOrder", "Domain", "ElementMesh", 
"Evaluate", "GetPolynomial", "Grid", "InterpolationMethod", 
"InterpolationOrder", "MethodInformation", "Methods", 
"OutputDimensions", "Periodicity", "PlottableQ", "Properties", 
"QuantityUnits", "Unpack", "ValuesOnGrid"} 
```

# php - foreach 在 php 中使用 array_chunk 并使用多个数组

> ID：12448199
> 
> 赞同：9
> 
> 时间：2012-09-16T15:33:21.180
> 
> 标签：php, arrays, foreach, implode

我对 php 比较陌生，我整天都在努力让它工作。我有一个多个数组，并希望以特定格式和分组回显每个数组。所以我浏览了stackoverflow并找到了这个帮助：

```
<? foreach(array_chunk($projetos, 6) as $curta ) { ?>

        <li style='display:block'>

                     <div class="film"> <?php echo $curta[0]['titulo']; ?></div>
                     <div class="film"> <?php echo $curta[1]['titulo']; ?></div>
                     <div class="film"> <?php echo $curta[2]['titulo']; ?></div>
                     <div class="film"> <?php echo $curta[3]['titulo']; ?></div>
                     <div class="film"> <?php echo $curta[4]['titulo']; ?></div>
                     <div class="film"> <?php echo $curta[5]['titulo']; ?></div>

             </li> 

      <? }; ?> 
```

这会返回我想要的，但数组的最后一项不会填充到 6 并创建 2 个额外的空 div 并弄乱设计。

这是我拥有的数组的一个示例：

```
<?php
 $projetos = array ( 

            "ugm" => array (
                    "id" => "ugm",
                    "titulo" => "Una Guerra Más",
                    "video" => "imagem",
                    "videoid" => "",
                    "height" => "$video_height_wide",
                    "sinopse" => "Um soldado moribundo deseja enviar sua última carta. Curta indisponível por exibição em festivais. Feito em parceria com a Universidad del Cine e LightBox Studios.",
                    "elenco" => "Ignacio J. Durruty - Rodrigo Soler - Ulisses Levanavicius - Aron Matschulat Aguiar",
                    "idioma" => "Inglês - Português",
                    "camera" => "Sony EX1",
                    "formato" => "HD",
                    "duracao" => "9'55''",
                    "ano" => "2012",
                    "tipo" => "Curta",
                    "credito" => "Direção - Edição - Produção - Roteiro",
                                 ), (...) 
```

我希望能够只编辑一个 div 将成为其他人的主人......并使用我在另一个问题上读过的内爆，但没有工作来回显我想要的字符串......

请有人帮忙吗？提前致谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-16T15:39:05.450

```
<?php foreach(array_chunk($projetos, 6) as $curta ) { ?>
    <li style='display:block'>
       <?php foreach($curta as $detail) { ?>
                 <div class="film"> <?php echo $detail['titulo']; ?></div>
       <?php } ?>
    </li> 
<? }; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T15:41:29.747

为什么不使用循环来迭代`$curta`呢？

```
<? foreach(array_chunk($projetos, 6) as $curta ) { ?>
  <li style='display:block'>
    <? foreach($curta as $c) { ?>
      <div class="film"><? echo $c['titulo']; ?></div>
    <? } ?>
  </li> 
<? }; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T15:42:32.757

> 但数组的最后一项最多不能填满 6

由于大多数情况下都会发生这种情况，因此您不能假设每个块都有 6 个元素，因此您必须遍历该块：

```
<? foreach(array_chunk($projetos, 6) as $curta ) { ?>

<li style='display:block'>

<? foreach($curta as $c) { ?>       
    <div class="film"> <?php echo $c['ugm']['titulo']; ?></div>
<? }; ?>

</li> 

<? }; ?> 
```

这样你肯定不会显示空的 div。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-16T15:38:18.330

这行：

```
<div class="film"> <?php echo $curta[0]['titulo']; ?></div> 
```

应该是这样的：

```
<div class="film"> <?php echo $curta[0]['ugm']['titulo']; ?></div> 
```

那应该做你想做的事。

# javascript - 如何在jsp中添加javascript验证

> ID：12448201
> 
> 赞同：0
> 
> 时间：2012-09-16T15:33:57.090
> 
> 标签：javascript, jsp

我在 web/js/Validation.js 目录中有一个 javascript 文件。在我的 Login.jsp 中，我调用这个 .js 文件来验证用户名。这似乎不起作用，请您帮忙。

我尝试过使用 src="/js/Validation.js" 甚至更改脚本标签位置（即在 html 和 head 标签之间），但没有任何运气。

谢谢。

验证.js

```
 function simple_Validation()
    {

    var valid = true;

    if (document.login_form.user.value.lenght == 0)
    {
     alert ("Pleaes type username"); 

      valid = false;
    }

    return valid;
    } 
```

登录.jsp

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
        pageEncoding="ISO-8859-1"%>
    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
    <%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <script type="text/javascript" src="js/Validation.js">

    </script>

    <title>Login</title>

    </head>
    <body>

        <form name="login_form" action="LoginServlet" method="post"
            onSubmit="return simple_Validation();">
            <table border="0">
                <tr align="left" valign="top">
                    <td>User Name:</td>
                    <td><input type="text" name="user" class="inputbox" /></td>
                </tr>
                <tr align="left" valign="top">
                    <td>Password:</td>
                    <td><input type="password" name="pass" class="inputbox" /></td>
                </tr>
                <tr align="left" valign="top">
                    <td></td>
                    <td><input type="submit" name="submit" value="Login" /></td>
                </tr>
            </table>
            <c:out value="${loginresult}">
            </c:out>

        </form>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:17:46.673

我们在 javascript 技术方面取得了长足的进步，我们有很多工具可以调试 javascript *（不像放很多[alert](/questions/tagged/alert "显示标记为“警报”的问题")，尽管我认为这是迄今为止最简单和最好的 ;-)）*，易于使用和猜测什么？有些是免费的！

所以一个这样的工具（可能是最好的工具之一）是[firebug ，它是](/questions/tagged/firebug "显示标记为“萤火虫”的问题")[firefox](/questions/tagged/firefox "显示标记为“firefox”的问题")的一个附加组件的附加组件。

[chrome](/questions/tagged/chrome "显示标记为“chrome”的问题") , [ie9](/questions/tagged/ie9 "显示标记为“ie9”的问题") & [safari](/questions/tagged/safari "显示标记为“野生动物园”的问题")有一些内置的开发者工具，当你按下它们就会出现`F12`你的 PC 时它们会出现（在 Mac 上我不确定 :-)）

所以这里有一些步骤：

1.  安装火狐
2.  安装萤火虫
3.  加载您的页面
4.  为您的页面启用萤火虫。启用脚本面板
5.  重新加载您的页面
6.  检查文件是否正确加载（取自[nickdos 的评论](https://stackoverflow.com/questions/12448201/how-to-add-javascript-validation-in-jsp#comment16745378_12448201)）
7.  检查是否有一些 javascript 错误（可能是`length`从[marteljn 的评论](https://stackoverflow.com/questions/12448201/how-to-add-javascript-validation-in-jsp#comment16739198_12448201)中获取的拼写）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T09:20:16.000

在您的 javascript 中，您将长度拼写为长度。

# c# - 在 wpf 中创建 3d 应用程序菜单

> ID：12448203
> 
> 赞同：1
> 
> 时间：2012-09-16T15:34:11.817
> 
> 标签：c#, wpf

我想创建一个带有 3d 菜单和 3d 动画的应用程序，就像你们在苹果手机或 mac os 等中看到的那样。

例如我想创建一个像这个站点演示[样本这样的菜单](http://www.telegraph.co.uk/technology/technology-video/9118028/Soluto-Metro-Style-app-demo.html)

当我看到站点演示时，我决定创建一个带有按钮的菜单（如 Metro 风格按钮），当单击按钮时，按钮旋转（我的意思是围绕 y 轴进行 3d 旋转）并且它长大（缩放动画）然后在那个按钮的后面用户看到他想要的页面。（就像现场演示一样）

对于这个问题，我搜索了很多并找到了像这个[主题](https://stackoverflow.com/questions/7168420/wpf-rotating-button)这样有用的网站，我可以为一个按钮创建一些我想要的东西。（但不完全是我想要的）

现在我想在视口 3d 中添加 3 或 4 个 Viewport2DVisual3D（我自己的按钮），然后将它们定位在我想要的位置，然后为它们制作动画。

1.如果可能的话，我该怎么做？

2.如果我选择了错误的方式，请有人为这个问题展示真实的方式。

3.如果有人知道更完美的菜单请给我看

看到我在这里创建[MyCode](http://mamadreflex.persiangig.com/Project/Debug.rar)

“我在 VS2010 中使用 wpf 应用程序”

# android - sensorPortrait：如何捕捉方向变化？

> ID：12448205
> 
> 赞同：3
> 
> 时间：2012-09-16T15:34:15.320
> 
> 标签：android, android-layout, android-orientation

我正在开发一个只支持两个方向的应用程序，纵向和反向纵向，所以我`sensorPortrait`在清单中写了“”，它运行良好。

问题是，我想为这两个方向使用不同的布局。

启用`sensorPortrait`会禁用 " `onConfigurationChange`" 调用。

我用：

```
orientationEventListener = new OrientationEventListener(this) {
        @Override
        public void onOrientationChanged(int i) {
            int newOrientation = getScreenOrientation();
            if (newOrientation != orientation) {
                orientation = newOrientation;
                if (newOrientation == ActivityInfo.SCREEN_ORIENTATION_PORTRAIT) {
                    ...
                    setContentView(R.layout.main);

                } else if (newOrientation == ActivityInfo.SCREEN_ORIENTATION_REVERSE_PORTRAIT) {
                    ...
                    setContentView(R.layout.main_reverse_portrait);
                }
            }
        }
    };
    orientationEventListener.enable(); 
```

问题是这个代码是在改变方向之后被调用的，所以当用户首先旋转手机时，他们会看到之前的布局，由 Android 自动旋转，然后是正确的布局。它看起来无法接受，你知道如何解决它吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T11:03:26.563

我建议您使用`configChanges`and 覆盖该`onConfigurationChanged(Configuration newConfig)`方法。如果不是您支持的方向，请忽略方向。

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    if (newOrientation == ActivityInfo.SCREEN_ORIENTATION_PORTRAIT) {
         ...
         setContentView(R.layout.main);
    } else if (newOrientation == ActivityInfo.SCREEN_ORIENTATION_REVERSE_PORTRAIT) {
         ...
         setContentView(R.layout.main_reverse_portrait);
    }
} 
```

这个答案可能会进一步帮助你。

[Android：检测方向已更改](https://stackoverflow.com/questions/8248274/android-detect-orientation-changed)

## 更新：

[`getChangingConfigurations()`](http://developer.android.com/reference/android/app/Activity.html#getChangingConfigurations%28%29)您可以使用一种方法`onStop()`来确定导致活动被破坏的配置更改。在这种情况下，您不需要使用`onConfigurationChanged()`回调。

## 更新 2：

在 中手动使用`sensorPortrait`和检查旋转角度`onCreate`。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ...
    Display display = ((WindowManager)  
          context.getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
    int rotation = display.getRotation();
    if (rotation == Surface.ROTATION_180) { // reverse portrait
       setContentView(R.layout.main_reverse_portrait);
    } else {  // for all other orientations
       setContentView(R.layout.main);
    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T06:24:27.027

您可以尝试编写代码以使布局对应用程序的 onPause 中的用户通知不可见。

这可能有助于让事情变得更好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T06:36:25.037

如果你调试你会注意到 onConfigurationChanged 被调用两次（我认为它曾经在进入横向模式时调用两次）。所以你的问题就在那里。因为 onConfigurationChanged 将调用 setContent 两次。U 应该通过比较当前显示宽度与旧宽度或类似的东西来避免这种情况。如果这不起作用，请告诉我，然后我自己尝试:) gl！

# php - 如何在 behat 中激活 mink

> ID：12448209
> 
> 赞同：11
> 
> 时间：2012-09-16T15:34:59.993
> 
> 标签：php, bdd, behat, mink

我正在尝试一起使用 behat 和 mink，阅读该链接：

[http://docs.behat.org/cookbook/behat_and_mink.html#method-1-composer](http://docs.behat.org/cookbook/behat_and_mink.html#method-1-composer)

并尝试在 Behat 框架中激活 Mink，但它对我不起作用:(

这是文本表格手册

```
 And this executable will already autoload all the needed classes in order to activate MinkExtension through behat.yml.

Now lets activate it: 
```

我在想他在说什么 `/vendor/behat/mink-extension/behat.yml`？

我已将这些行添加到该文件中

```
# behat.yml
default:
    extensions:
        Behat\MinkExtension\Extension:
            goutte: ~
            selenium2: ~ 
```

但是当我在做的时候，`$bin/behat -dl`我只能看到

```
Given /^I am in a directory "([^"]*)"$/
Given /^I have a file named "([^"]*)"$/
 When /^I run "([^"]*)"$/
 Then /^I should get:$/ 
```

似乎 mink-extension 没有激活......但是我如何激活它，如果我做了手册中写的一切:(

PS我只是试图在全​​新的干净地方（新文件夹）中按照说明（从这里[http://docs.behat.org/cookbook/behat_and_mink.html](http://docs.behat.org/cookbook/behat_and_mink.html)），但它不起作用它向我显示下一个错误

```
bin/behat -dl

  [RuntimeException]                                                       
  Context class not found.                                                 
  Maybe you have provided wrong or no `bootstrap` path in your behat.yml:  
  http://docs.behat.org/guides/7.config.html#paths 
```

但是在教程中没有提到路径和 yml 修改 :( 也许是否存在任何更新的教程版本？

根据错误消息，我必须在 bootstrap 文件夹中创建一些 php 文件，但教程中没有描述 :( 奇怪

**解决了：**

```
$ mkdir behat_mink_test && cd behat_mink_test
$ touch composer.json
$ echo '{
>     "require": {
>         "behat/behat": "2.4.*@stable",
>         "behat/mink": "1.4.*@stable",
>         "behat/mink-extension": "*",
>         "behat/mink-goutte-driver": "*",
>         "behat/mink-selenium2-driver": "*"
>     },
>     "minimum-stability": "dev",
>     "config": {
>         "bin-dir": "bin/"
>     }
> }' > composer.json
$ curl http://getcomposer.org/installer | php
$ php composer.phar install
$ bin/behat -h
$ touch behat.yml
$ echo 'default:
>     extensions:
>         Behat\MinkExtension\Extension:
>             goutte: ~
>             selenium2: ~' > behat.yml
$ bin/behat -dl 
```

最后它现在可以工作了:)谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-16T15:54:56.830

您不应编辑位于 /vendor/behat/mink-extension/behat.yml 中的 behat.yml 文件。您应该将这些行添加到项目根目录（bin 子目录所在的目录）的 behat.yml 文件中。如果那里没有 behat.yml 文件，只需创建它 -

# iphone - MFMessageComposeViewControllerDelegate 错误 - 黑屏

> ID：12448212
> 
> 赞同：2
> 
> 时间：2012-09-16T15:35:30.173
> 
> 标签：iphone, objective-c, xcode, presentmodalviewcontroller, mfmessagecomposeview

我正在使用以下代码显示应用内短信。我的应用没有状态栏。（我在纵向视图中使用 320x480 像素的屏幕）。

问题是当我加载控制器时，屏幕变黑，如您从图像中看到的那样......

[http://desmond.imageshack.us/Himg211/scaled.php?server=211&filename=schermata092456187alle1.png&res=landing](http://desmond.imageshack.us/Himg211/scaled.php?server=211&filename=schermata092456187alle1.png&res=landing)

这是代码：

```
 MFMessageComposeViewController *picker = [[MFMessageComposeViewController alloc] init];
            picker.messageComposeDelegate = self;

            picker.recipients = [NSArray arrayWithObject:@"123456789"];   // your recipient number or self for testing
            picker.body = @"test";

            [self presentModalViewController:picker animated:YES]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T15:54:20.217

模拟器当前不支持测试 MFMessageComposeViewController。MFMailComposeViewController 是。

在实际设备上试用您的代码，它会起作用。

# java - 使用 MVC 时如何仅更新列表中的某些项目？

> ID：12448213
> 
> 赞同：1
> 
> 时间：2012-09-16T15:36:01.023
> 
> 标签：java, model-view-controller, jlist, updatemodel

我正在构建一个 GUI，其中包含一个包含很多项目的列表。我允许用户添加/删除/编辑这些项目。

到目前为止，我在控制器中调用的更新方法暗示了整个 JList 重置（具有明显的性能问题）。现在有数百个可用项目，更新整个列表不再是不可能的。

有谁知道教程或可以分享一个示例（到目前为止我还没有找到适合我需要的示例），其中 JList 被更新为 JList.update(startIndex, endIndex); 之类的东西？

感谢您花时间回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T15:58:31.777

List 从其[ListModel](http://docs.oracle.com/javase/6/docs/api/javax/swing/ListModel.html)监听更改事件。您是否尝试过更新模型而不在每次更改时设置新模型？

查看[DefaultListModel](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/DefaultListModel.html)接口应该是可能的，有修改它的方法，例如`addElement`,`removeElement`等。

# lua - 如何在 Lua 脚本中为 C 创建用户数据

> ID：12448220
> 
> 赞同：0
> 
> 时间：2012-09-16T15:36:33.013
> 
> 标签：lua, swig

SWIG 将 C 的枚举视为用户数据。（我检查了它生成的源代码。也许是一个错误？）。然后，我需要在 Lua 脚本本身中创建用户数据......有什么好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T16:50:25.393

> 然后，我需要在 Lua 脚本本身中创建用户数据。

不。您想在 Lua 中创建枚举器值之一。您可以像在 C 中那样做：使用枚举器的名称。这是一个具有枚举器值的对象。然而 SWIG 的 Lua 组件决定编组这无关紧要；只需在您的 Lua 代码中使用该名称即可。

# javascript - 开发版本和发布版本之间的 URL 路径更改

> ID：12448223
> 
> 赞同：0
> 
> 时间：2012-09-16T15:36:37.317
> 
> 标签：javascript, jquery, asp.net, iis

我刚刚得到了 Scott Hanselman 的带有 SignalR 的[聊天应用程序](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)与 ASP.NET MVC 4 一起工作。经过数小时的配置、反复试验，并让不同版本的 Windows 在我的家庭网络上相互通信，除了我在留下一个我不知道如何处理的问题。

这行 javascript 必须更改，具体取决于我是通过 Visual Studio 还是已发布 (IIS) 版本运行应用程序：

**在 VS 中运行时工作：**

```
var connection = $.connection('echo'); 
```

**适用于已发布版本：**

```
var connection = $.connection('ChatWithSignalR/echo'); 
```

**当我在 VS 中运行时，URL 是：**

```
http://localhost:9145/ 
```

**发布的版本是：**

```
http://localhost/ChatWithSignalR 
```

如果我不更改那行代码，并尝试在 VS 中运行应用程序，使用其中包含 ChatWithSignalR 的 javascript，我会收到如下错误：

```
Failed to load resource: the server responded with a status of 404 (Not Found)

http://localhost:9145/ChatWithSignalR/echo/negotiate?_=1347809290826 
```

**我该怎么做才能使用相同的 javascript 代码并让它在两种情况下都能正常工作？**

```
var connection = $.connection('??????'); 
```

**请注意，这是在我的 Global.asax.cs 中：**

```
RouteTable.Routes.MapConnection<MyConnection>("echo", "echo/{*operation}"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:48:01.970

这是您需要注意的事情，因为 SignalR 库不知道应用程序部署到哪里以及它的根地址是什么。我在 Web 应用程序中经常做的事情是调用一个全局 Javascript 变量`site_root`，并将其设置为站点根目录的绝对 URL。现在，要做到这一点，您需要服务器标签来评估和打印它，就像`"<%= RootUrl %>"`您的服务器语言的语法一样。然后，在 Javascript 中引用 URL 时，您应该始终使用 site_root + "/echo"（有或没有开头的“/”，具体取决于服务器变量/方法打印的内容）。所以你会有类似的东西：

```
<script type="text/javascript">
    var site_root = "<%= RootUrl %>";

    // Later, wherever in your code:
    function doSomething() {
        var echo_url = site_root + "/echo";
        // Now you have an absolute URL for the echo page
    }
</script> 
```

现在，我将它放在始终包含的母版布局页面中 - 就像母版页一样，或者取决于您使用的服务器语言。此外，您可以使用某种方法来解析 URL，而不是像 之类的变量`RootUrl`，然后将其传递给空字符串或“/”以获取应用程序的根 URL。

# facebook - Facebook：在新闻提要中聚合动作，显示描述而不是标题

> ID：12448226
> 
> 赞同：1
> 
> 时间：2012-09-16T15:37:06.580
> 
> 标签：facebook, object, action, facebook-opengraph

嗨，我有一个自定义动作，附件中定义了标题。如果我一次触发该动作，新闻提要上的帖子将显示我定义的标题。但是，如果我多次触发该操作，则新闻提要上的帖子将在元标记而不是标题行上显示 og:description。由于描述是针对每个公共页面的，并且我的标题与操作相关（例如，运行 XX 英里），我希望帖子始终显示标题。有没有办法解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:55:57.920

您可以指定聚合应显示为标题的数据类型 - 并在该标题中使用从您的操作/对象中提取的数据，请参阅[https://developers.facebook.com/docs/opengraph/define-units/#captions](https://developers.facebook.com/docs/opengraph/define-units/#captions)：

> **字幕行**
> 
> 聚合支持简单的文本模板语法，用于将 Open Graph 操作/对象属性格式化为用户看到的字符串。

[也可以点击那里给出的使用文本模板](https://developers.facebook.com/docs/opengraph/template)的链接——它更详细地解释了它。

# javascript - jQuery 漂亮的选择元素 - dropkick js 和 iOs

> ID：12448227
> 
> 赞同：1
> 
> 时间：2012-09-16T15:37:16.833
> 
> 标签：javascript, jquery, html, ios, jquery-dropkick

您好，我已经在我的网站上实现了 Dropkick.js，现在有一些非常好看的选择元素。但是，当我在 iOS 系统上查看它时，我无法向下滚动我的选项。

我已经阅读了 Dropkick.js 的文档，它建议我尝试使用[scrollability.js](https://github.com/joehewitt/scrollability) ，但是我不能在工作期间完成这项工作。

有没有人有使用这个和 dropkick.js 的经验 - 或者有没有人对替代品有任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:21:35.447

我从来没有同时使用过 DropKick.js 和 scrollability.js，但我可以根据经验告诉你，DropKick 没有原生移动支持，因为它是为桌面浏览器而不是手机构建的。

由于手机浏览器通常有自己的标签处理程序，许多 JavaScript 插件对手机没有适当的支持，因为它们的代码会主动删除并用他们自己设计的替换它，或者甚至一开始就没有使用标签地方。

如果您希望让您的网站同时在 iOS/移动浏览器和桌面上运行，我建议使用来自[A Beautiful Site.net](http://www.abeautifulsite.net/blog/2011/01/jquery-selectbox-plugin/)的 SelectBox.js ，尽管它的样式比 DropKick.js 更难一些。

如果您正在寻找纯粹的移动解决方案，我建议您只使用纯 CSS 来设置您在[此处](http://bavotasan.com/2011/style-select-box-using-only-css/)看到的样式，因为它更简单、更快，并且可以保留标签。

希望这可以帮助！

# ruby-on-rails - Rake db:create 错误 - 无法加载此类文件 -- resque/tasks

> ID：12448232
> 
> 赞同：1
> 
> 时间：2012-09-16T15:37:48.503
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rake, resque

在我的新机器上设置现有应用程序。

第一个应用程序（一个简单的）运行良好。

对于第二个应用程序，大多数情况都很好，但现在得到了

```
Rake aborted!
cannot load such file -- resque/tasks 
```

尝试跑步时`rake db:create`

我已经安装了 redis，我相信它正在运行。

如何解决此错误？

```
Ruby 1.9.3 Rails 3.2.8 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T03:50:51.333

安装了 resque gem 来解决这个问题。

# ruby-on-rails - 在自定义验证期间突出显示其他字段

> ID：12448239
> 
> 赞同：0
> 
> 时间：2012-09-16T15:38:49.887
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我的模型中有自定义验证，与这个非常相似：

[多字段/范围验证](https://stackoverflow.com/questions/6239895/multifield-range-validation)

并且提供的解决方案有效：

```
errors.add(:base, 'Start date must be before stop date') if self.start > self.stop 
```

使用`:base`只会导致 1 个错误，这很好，因为我不希望两个单独的错误在这里显示相同。但是，没有突出显示任何字段，我也需要突出显示`:start`and`:stop`字段，就好像我在使用`:start`or `:stop`in一样`errors.add`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T16:42:39.683

您应该利用 Rails 的内置机制：它们包括使用`div`with`field_with_error`类包装包含错误的表单字段。

如果这不适合您：

*   自定义它，[请参阅 Railscast](http://railscasts.com/episodes/39-customize-field-error)

*   更多手动解决方案，检查您的实例承担哪些错误并采取相应措施，即`@instance.errors.include? :filed_name`. 在此范围内，不要将所有错误添加到`base`

# android - MySQL 是网络数据库吗？

> ID：12448242
> 
> 赞同：0
> 
> 时间：2012-09-16T15:39:33.213
> 
> 标签：android, database

我想将 Android 应用程序中的记录插入、更新、显示到数据库（在线），该数据库将安装在 Android 手机上。
所以，我的问题是；哪个数据库是完美的？

1.  MySQL
2.  SQLite3
3.  任何其他

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T16:19:55.040

> mysql db是网络数据库吗

MySQL（与包括 Postgres 和 Oracle 在内的许多其他数据库服务器一样）可以通过本地套接字或 TCP/IP 访问。（您还提到了 SQLite，这是一个基于文件的数据库，没有网络服务器 AFAIK）。

可能有适用于 Android 的库实现了 MySQL 客户端，但在谷歌上的几分钟对我来说并没有任何帮助。

一般来说，对 MySQL 的网络访问应该仅限于专用网络，而不是终端客户端。

如果您想通过网络从客户端应用程序访问数据库，通常最好构建一个基于 HTTP 的 API（最好是 RESTful）并让客户端软件连接到该 API。这使您可以更好地控制允许客户端对数据库执行的操作。

您几乎可以用任何您喜欢的语言构建这样的 API。如果您使用 Android，您可能更喜欢 Java。我的首选是 Perl。Python 是一个不错的选择，等等等等。

> 哪个数据库是完美的？

没有什么是完美的。即使您对自己的要求更具体，为特定数据库提供建议也会陷入“非建设性”领域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T16:05:38.860

在 Android 中使用 MySQL 是不可能的。其他 SQL 类型也没有。最好的方法是使用 MySQL 数据库并通过 PHP 获取信息。在 PHP 中将其编码为 JSON。您可以在 Android 中获取网页并在 Android 中对其进行解码。

# tsql - T-SQL MDF 文件是否有可能检查其数据完整性？

> ID：12448243
> 
> 赞同：0
> 
> 时间：2012-09-16T15:39:34.303
> 
> 标签：tsql, ntfs

我的 SQL Server 上有一个巨大的 mdf 文件，我怀疑它的数据完整性。我正在对该数据库中的表执行操作，并注意到我的 Windows 系统事件日志（文件系统是 NTFS）中有许多磁盘坏块报告。我怀疑这个错误可能与我对这个数据库的操作有关。我的问题是如果 mdf 文件中的某些数据已损坏，SQL Server 是否有可能检测到此数据完整性问题？mdf 中是否有一些错误检查机制：per-record 或 per-table crc 等？如果它不是自动执行的，我该如何手动测试它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T15:59:30.633

这不是编程问题，而是。

[DBCC CHECKDB (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms176064.aspx)

[DBCC 检查表 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms174338.aspx)

如果您抛出坏块错误，那么很可能您的磁盘坏了。您需要解决硬件问题。

# ajax - 使用 joomla 方法会阻止文件在插件中工作

> ID：12448245
> 
> 赞同：0
> 
> 时间：2012-09-16T15:39:56.650
> 
> 标签：ajax, plugins, joomla

我创建了简单的 ajax 投票插件，它工作正常.. 直到我开始在 conf.php 文件中使用 joomla 方法。下面的文件是带有简单 php db 查询的 conf.php，如果我放在这里例如 $dbb = JRequest::getDbo(); 它停止工作..或任何其他 joomla 方法。我无法理解这里有什么问题？

```
$.ajax
({
type: "POST",
url: "plugins/system/ratingx/conf.php",
data: dataString,
cache: false,
success: function(html)
{ 
```

conf.php：

```
<?php
define( '_JEXEC', 1) or die;
defined( '_JEXEC' ) or die;

$mysql_hostname = "localhost";
$mysql_user = "px";
$mysql_password = "px";
$mysql_database = "jum";
$bd = mysql_connect($mysql_hostname, $mysql_user, $mysql_password) 
or die("Opps some thing went wrong");
mysql_select_db($mysql_database, $bd) or die("Opps some thing went wrong");

if($_POST['id'])
{
$id=mysql_real_escape_string($_POST['id']);
$name=mysql_real_escape_string($_POST['name']);

mysql_query("update messages set $name=$name+1 where id='$id'");

$result=mysql_query("select up,down from messages where id='$id'");
$row=mysql_fetch_array($result);
$up_value=$row['up'];
$down_value=$row['down'];
$total=$up_value+$down_value;

$up_per=($up_value*100)/$total;
$down_per=($down_value*100)/$total;
?>
<div style="margin-bottom:10px">
<b>Ratings for this blog</b> ( <?php echo $total; ?> total)
</div>
<table width="700px">

<tr>
<td width="30px"></td>
<td width="60px"><?php echo $up_value; ?></td>
<td width="600px"><div id="greebar" style="width:<?php echo $up_per; ?>%"></div></td>
</tr>

<tr>
<td width="30px"></td>
<td width="60px"><?php echo $down_value; ?></td>
<td width="600px"><div id="redbar" style="width:<?php echo $down_per; ?>%"></div></td>
</tr>

</table>

<?php

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T21:49:46.153

不确定 Joomla 的版本！你正在使用但是...

问题是您正在调用存在于 Joomla 之外的文件！框架，仅仅因为您已经定义`_JEXEC`并不意味着框架已加载。

为了能够使用`JRequest`甚至`JFactory::getDBO()`您还需要初始化 Joomla! 的前端应用程序并加载所需的框架/类。这样做可能会使您的网站出现安全问题。

我建议您使用适当的 AJAX/RAW 控制器[创建一个基本组件，您的插件可以通过默认的 Joomla!](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Introduction) 路径（即`index.php`）。

如果您确实想绕过 Joomla！应用程序然后查看`index.php`您的 Joomla 版本的主要内容，以指导您如何加载应用程序框架。

*ps`JRequest::getDBO()`无效，`getDBO()`不是`JRequest`（任何版本）的方法*

# maven - 本地主机的 Tomcat 领域安全约束禁用

> ID：12448246
> 
> 赞同：2
> 
> 时间：2012-09-16T15:40:01.437
> 
> 标签：maven, tomcat, plugins, realm, security-constraint

我添加了安全约束来保护应用程序的某些文件夹。

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>panel</web-resource-name>
        <url-pattern>/secured/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>super</role-name>
    </auth-constraint>
</security-constraint>
<login-config>
    <auth-method>BASIC</auth-method>
    <realm-name>Panel</realm-name>
</login-config> 
```

我向 tomcat-users 添加了适当的用户 SUPER，当我部署应用程序时，这一切似乎都运行良好。但是，当我通过 maven 从 exclipse 本地运行它时，使用 tomcat7:run，我的本地设置没有 tomcat-users.xml 文件，所以基本上我不确定如何在本地配置用户。安全有效，但未定义用户。

你能告诉我如何为 mavens tomcat 插件传递或指定自定义 tomcat-sers.xml 文件吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T20:28:24.813

我知道了，如果有人需要的话。

在 pom.xml 中找到 tomcat7-maven-plugin 的插件块，并在配置中指定自定义 tomcat-users.xml 路径。

```
<configuration>
    <tomcatUsers>path/tomcat-users.xml</tomcatUsers>
</configuration> 
```

# sql - 使用 MySQL SQL 将 MD5 转换为 JAVA MD5

> ID：12448257
> 
> 赞同：0
> 
> 时间：2012-09-16T15:41:13.100
> 
> 标签：sql

有很多关于如何使用 JAVA 创建 MYSQL MD5 哈希的好帖子，但是是否有可能采用另一种方式 - 使用 SQL 来生成 java 所做的事情？

在 SQL 中：

```
Select MD5('secret') = 5ebe2294ecd0e0f08eab7690d2a6ee69 
```

在 Java 中，MD5 算法产生： `94-6634-108-20-48-32-16-114-85118-112-46-90-18105`

首先，我可以看到 Java 是十进制表示，因此将 SQL 输出配对并转换为 DECIMAL 给出： `9419034148236208224240142171118144210166238105`

唯一相同的部分是前 2 和后 4。

任何人都对如何使用 SQL 生成 Java 生成的内容有想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T18:08:26.467

我没有完全解决这个问题，但希望这些提示会有所帮助：

在 Java 中，如果您获取 md.digest() 调用的直接结果，则您有一个字节数组。无需将其转换为字符串表示形式，只需将字节输出为整数。你会看到它们是：

94 -66 34 -108 -20 -48 -32 -16 -114 -85 118 -112 -46 -90 -18 105

因此，生成的字符串转换中的破折号不是分隔符，它们是算术符号。java 哈希是字节值的简单串联，作为（有符号的）整数。

当您选择 MD5('secret') 时，您会得到一串 32 个十六进制数字。我验证了如果在 Java 中，你将每个字节转换为它的十六进制表示，然后将它们连接起来，你会得到与 MySQL 返回相同的字符串。

因此，在我看来，您在 MySQL 中需要做的是迭代 Hex() 的结果，一次一个十六进制字符（可能使用 SUBSTRING()），将每个字符转换为十进制，然后将它们连接起来。

编辑 - 看起来你几乎做对了，但你需要将每对十六进制数字转换为字节而不是 int，例如，'0xbe' 是 -66，而不是 190

编辑 #2 - 我对在 MySQL 中执行此操作的相对困难程度很感兴趣，所以我坚持（开玩笑）。以下存储的函数似乎可以完成这项工作：

```
drop function if exists java_md5;
delimiter |
create function java_md5(secret VARCHAR(255)) 
  RETURNS VARCHAR(255) 
  DETERMINISTIC 
  BEGIN
    DECLARE result varchar(255);
    DECLARE md5String char(255);
    DECLARE pair char(2);
    DECLARE pairInt int;
    DECLARE idx int;
    set md5String = MD5(secret);

    set result = '';
    set idx = 1;
    WHILE(idx < 32) DO
      set pair = substring(md5String, idx, 2);
      set pairInt = ascii(unhex(pair));
      set pairInt = if(pairInt > 127, pairInt - 256, pairInt);
      set result = concat(result, pairInt);
      set idx = idx + 2;
    END WHILE;
    RETURN result; 
  END|
delimiter ;

select java_md5('secret'); 
```

# facebook - Facebook POST 回调

> ID：12448260
> 
> 赞同：2
> 
> 时间：2012-09-16T15:41:32.297
> 
> 标签：facebook, sdk

我有一个 Facebook 的“Like”按钮，我把它放在我的网站上，我可以很容易地检测到是否有人点击了“Like”：

```
// DETECT LIKE
FB.Event.subscribe('edge.create',
    function(response) {
        alert('You LIKED My Page');
    }
); 
```

在他“点赞”我的页面之后，按钮会打开一个小的飞行窗口，这样用户也可以在他的墙上“发布”关于我的页面的一些内容。

我环顾四周，无论如何我都无法检测到用户通过我的“喜欢”按钮在他的墙上“发布”东西时，是否有这样做的？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T18:16:53.480

AFAIK有一种方法。如果你保存了用户的 ID 和对象 ID（这种“Like”是由 OG 完成的）你可以从这个用户那里获取所有 og.likes`FB.api('/USER_ID/og.likes', function(response) { <iterate through response to find specified object ID and user's post message will be under "message" field> });`

在这里试试：[Facebook OG explorer og.likes](https://developers.facebook.com/tools/explorer/?method=GET&path=me%2Fog.likes)

GL！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-16T18:29:51.653

为什么不分析发布操作的响应？

```
FB.ui('/me/feed', {method: 'feed'}, function (response){
    if (response.post_id){
        // Something was posted by the user
    } else {
        // Nothing was posted
    }
}); 
```

# java - Java - 向游戏添加控件的最佳方式

> ID：12448267
> 
> 赞同：0
> 
> 时间：2012-09-16T15:42:58.200
> 
> 标签：java, 2d, keylistener

我正在用 Java 制作 2D 游戏，我使用 KeyListener 和一些布尔值来检测按键。但问题是，当我按住一个键时，玩家半秒钟不会移动，然后开始移动。有谁知道如何解决这一问题？

public void keyPressed(...) { PlayerX += 3; 任何答案将不胜感激谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T16:09:16.000

有多种方法可以处理 Java 中的游戏控件，但我更喜欢的方法包括一个名为.. 的类。让我们说“Key.class”

在 Key.class 中，我们可以拥有：

```
public class Key{
   // Creating the keys as simply variables
   public static Key up = new Key();
   public static Key down = new Key();
   public static Key left = new Key();
   public static Key special = new Key();

   /* toggles the keys current state*/
   public void toggle(){
       isDown =  !isDown;
   }

   public boolean isDown;
} 
```

现在我们有一个类，如果按下某些键，我们可以访问它，但首先我们需要确保键 .isDown 功能将正确切换。我们在实现 KeyListener 的类中执行此操作。

假设我们有“Controller.class”

```
package game;
// Importing the needed packages
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import java.util.HashMap;

public class Controller implements KeyListener{
//Assigning the variable keys to actual letters
public Controller(Main main){
    bind(KeyEvent.VK_W, Key.up);
    bind(KeyEvent.VK_A, Key.left);
    bind(KeyEvent.VK_S, Key.down);
    bind(KeyEvent.VK_D, Key.right);
    bind(KeyEvent.VK_SPACE, Key.special);
    mainClass = main;
}

@Override
public void keyPressed(KeyEvent e) {
    other[e.getExtendedKeyCode()] = true;
    keyBindings.get(e.getKeyCode()).isDown = true;
}

@Override
public void keyReleased(KeyEvent e) {
    other[e.getExtendedKeyCode()] = false;
    keyBindings.get(e.getKeyCode()).isDown = false;
}

public boolean isKeyBinded(int extendedKey){
    return keyBindings.containsKey(extendedKey);
}

@Override
public void keyTyped(KeyEvent e) {
}

public void bind(Integer keyCode, Key key){
    keyBindings.put(keyCode, key);
}

public void releaseAll(){
    for(Key key : keyBindings.values()){
        key.isDown = false;
    }
}

public HashMap<Integer, Key> keyBindings = new HashMap<Integer, Key>();
public static boolean other[] = new boolean[256]; 
```

}

现在这个类将为我们处理所有的 keyBindings，并且假设您为 Canvas 添加KeyListener 或您的游戏在其上运行的任何东西都将起作用并相应地更改 Key.up/down/left/right/special。

现在最后一步是实现所有这些以有效且轻松地移动我们的角色。

假设您在游戏中的实体具有 update() 方法，这些方法运行每个刻度或类似的东西.. 我们现在可以简单地添加到它

```
if(Key.up.isDown) y+=3; 
```

或者在您的情况下，我们可以将其放入主类并以与游戏滴答循环中相同的方式进行操作。

```
if(Key.right.isDown) PlayerX += 3; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T16:09:30.287

这听起来像是操作系统中按键的重复（自动重复）的正常行为。只需尝试在任何文本编辑器中按住一个键，您就会注意到在显示的第一个字符和下一个字符之间有很短的时间。在 Windows 上这是 500 毫秒，在其他平台上不确定。

# mysql - 在存储过程中遇到 concat 问题

> ID：12448268
> 
> 赞同：1
> 
> 时间：2012-09-16T15:43:01.430
> 
> 标签：mysql, concat

谁能告诉我为什么我在 MySql 中收到此错误：错误代码：1064。您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“NULL”附近使用正确的语法

这是我的代码：

```
CREATE PROCEDURE `msgBoardGetComments2`(

IN _StoryID INT,
IN _RowNum INT

)
BEGIN

DECLARE _sql VARCHAR(1000);

   SET _sql := CONCAT('SELECT c.CommentText, c.CommentDate, a.UserName
      FROM comments c
      LEFT JOIN accounts a
             ON c.UserID = a.UserID
             LEFT JOIN stories s
                    ON c.StoryID = s.StoryID
      WHERE c.StoryID = ',_StoryID, '
      ORDER BY c.CommentDate DESC
      LIMIT 10
      OFFSET ', _RowNum);

PREPARE stmt1 FROM @_sql;
EXECUTE stmt1; 
```

结尾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T15:53:58.863

`_RowNum`我相信您在is时可能会收到该错误`NULL`。如果是这种情况，您可以尝试添加一个`IF`条件以选择性地包含`OFFSET _RowNum`if the `_RowNum`is `NULL`。您可以通过在执行前打印查询来测试这一点：

```
SELECT _sql;
--PREPARE stmt1 FROM @_sql;
--EXECUTE stmt1; 
```

另外，我还没有看到使用下划线 ( `_`) 进行变量赋值，也许这也可能在其中发挥作用？

# scala - 打开包含 0 或 1 个选项的列表的最佳方法是什么？

> ID：12448269
> 
> 赞同：3
> 
> 时间：2012-09-16T15:43:19.200
> 
> 标签：scala

在 Scala 中，我有`List`一个可选的`Option`. 例如，当您`for`对 a 使用理解`List`并且您的 yield 返回a 时，就会出现这种情况`Option`。在我的例子中，我正在处理一个 JSON 对象并`for`在字段列表 ( `List[JField]`) 上使用理解。

打开列表并映射`List()`到`None`和`List(Some(a))`到的最佳方式是`Some(a)`什么？

第一种方法是

```
def headOrNone[A](list:List[Option[A]]) = 
    list match {
        case Nil => None
        case a::Nil => a
    } 
```

另一种方法

```
def headOrNone[A](list:List[Option[A]]) = list.headOption.getOrElse(None) 
```

第三种方法（headOption 实现的变体）

```
def headOrNone[A](list:List[Option[A]]) = if (list.isEmpty) None else list.head 
```

我个人更喜欢第三种方法。这个函数有比它更好的名字`headOrNone`吗？ Scala 的惯用方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T18:28:44.043

您正在解决一个可能不应该被创建的问题。相反，您可能想要

```
for (x <- list) yield f(x)  // Yields Option 
```

成为

```
list.flatMap(f) 
```

然后您的列表中将有零或一件事开始（您可以使用 提取`headOption`）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-16T15:45:37.067

这个怎么样：

```
def headOrNone[A](list: List[Option[A]]) = list.flatten.headOption

headOrNone(List(Some(4)))   // Some(4)
headOrNone(List())          // None 
```

尽管如果您碰巧有一个包含多个项目的列表，则第一个选择的优点是会给您一个错误，根据您的描述，这似乎是一个错误条件。

但就个人而言，我会重新评估产生的代码，`List[Option[A]]`看看是否有办法让它首先返回正确的东西！

# android - 当从另一个类调用它作为主要活动时，Android Alertdialog 崩溃并出现“无法添加窗口”异常

> ID：12448271
> 
> 赞同：2
> 
> 时间：2012-09-16T15:43:38.283
> 
> 标签：android, exception, scope, android-alertdialog, android-context

我对 Android 中的 AlertDialog 有疑问。在“杂项”类中，有一种方法可以创建警报对话框。

```
public static void getAlert (Context context)
{
Builder builder = new AlertDialog.Builder(context);
builder.setTitle("Notruf absenden?");
builder.setMessage("automatischer Notruf in 60 sec.");
builder.setCancelable(true);
builder.setPositiveButton("Ja", new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog, int id) {
               callEmergency(context);
           }
       });
builder.setNegativeButton("Abbrechen", new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog, int id) {
              countdown.cancel();
           }
       });

 final AlertDialog alertBox = builder.create();
 alertBox.show();

 countdown = new CountDownTimer(60000, 1000) 
 {
   public void onTick(long millisUntilFinished) 
   {
     alertBox.setMessage("automatischer Notruf in "+ (millisUntilFinished/1000) + " sec.");
   }
   public void onFinish()
   {
   alertBox.cancel();
   callEmergency(context);
   }
}.start(); 
```

当我通过键入以下内容调用主要活动中的方法时：

```
Misc.getAlert(this) 
```

它可以工作，但是在另一个名为 Algorithm 的类中，我以相同的方式调用它：

```
Misc.getAlert(context) 
```

但是有一个例外：

```
09-16 17:15:32.304: E/AndroidRuntime(19797): FATAL EXCEPTION: main
09-16 17:15:32.304: E/AndroidRuntime(19797): android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
09-16 17:15:32.304: E/AndroidRuntime(19797):    at android.view.ViewRoot.setView(ViewRoot.java:536)
09-16 17:15:32.304: E/AndroidRuntime(19797):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
09-16 17:15:32.304: E/AndroidRuntime(19797):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
09-16 17:15:32.304: E/AndroidRuntime(19797):    at android.app.Dialog.show(Dialog.java:241)
09-16 17:15:32.304: E/AndroidRuntime(19797):    at de.smehner.Sturzerkennung.Misc.getAlert(Misc.java:220)
09-16 17:15:32.304: E/AndroidRuntime(19797):    at de.smehner.Sturzerkennung.Algorithm.fall(Algorithm.java:203)
09-16 17:15:32.304: E/AndroidRuntime(19797):    at de.smehner.Sturzerkennung.Algorithm.performNonGraphical(Algorithm.java:68)
09-16 17:15:32.304: E/AndroidRuntime(19797):    at de.smehner.Sturzerkennung.SensorValueReceiver.onSensorChanged(SensorValueReceiver.java:66)
09-16 17:15:32.304: E/AndroidRuntime(19797):    at android.hardware.SensorManager$ListenerDelegate$1.handleMessage(SensorManager.java:538) 
```

我试图在 getAlert 中设置

```
Builder builder = new AlertDialog.Builder(Sturzerkennung.this); // Sturzerkenung is the main activity 
```

但随后出现错误：“在范围内无法访问 Sturzerkennung 类型的封闭实例”

`context.getApplicationContext`而不是`Sturzerkennung.this`也没有解决问题。有人对这个问题有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:52:39.610

问题已解决.. 算法类中的上下文不是来自 Activity Sturzerkennung ......

在 Sturzerkennung 我把

```
public static Context context;
...
context = this; 
```

然后在算法中 getAlert 的参数是

```
Misc.getAlert(Sturzerkennung.context) 
```

现在它起作用了..

# jquery - 在先前加载的内容上方显示内容

> ID：12448279
> 
> 赞同：0
> 
> 时间：2012-09-16T15:44:44.220
> 
> 标签：jquery, ajax

我有一个用ajax制作的反应系统。因此，当用户发布反应时，它由 ajax 请求处理并立即显示反应。现在，他将新反应（由 ajax 请求添加）放在初始加载的反应下。但是初始加载的反应是按 DESC 顺序从数据库中查询的，因此新反应必须放在初始加载的反应之上。我的代码：

**HTML：**

```
 <div id="messages">

            <?

            $sql = "SELECT *
                    FROM items_comments, users
                    WHERE items_comments.item_id = '".$id."'
                    AND items_comments.user_id = users.user_id
                    ORDER BY comment_id DESC";
            $result = $Db->sQuery($sql);
            while($row = mysql_fetch_array($result)){

            ?>

            <div id="com_loaded">
                <div id="com_loaded_height"></div>
                <div id="com_loaded_userpic"><a href="#" class="tooltip"><img src="<?=$row['user_pic']?>" class="img_poster" /><span><?=$row['user_name']?></span></a></div>
                <div id="com_loaded_content">
                    <div id="com_loaded_poster"><a href="#"><?=$row['user_name']?></a></div>
                    <div id="com_loaded_text"><?=$row['comment_text']?></div>
                </div>
                <div id="com_loaded_divide"></div> 
            </div>
            <?

            }

            ?>

            </div> 
```

**JS：**

```
 $(function() {
        $(".submit-comment").click(function() {

            var text = $(".txtinput").val();
            var itemid = "<?=$id?>";
            var userid = "<?=$_SESSION['user_id']?>";
            var dataString = 'text=' + text + '&userid=' + userid + '&itemid=' + itemid;

            if(text == '') {
                $('#content_error1').fadeIn(250);
                $('#content_error1').delay(1500).fadeOut(500);
            } else {

            $.ajax({
                type: "POST",
                url: "/ajax/comments.php",
                data: dataString,
                success: function(html){
                    $("#messages").append(html);

                }
            }); 
            }
            return false; 
        });
    }); 
```

**PHP 脚本 Ajax 调用**

```
 <? session_start();

 require_once("../include/database.php");
 $Db = new Database();

        $text = $Db->escape($_POST['text']);
        $itemid = $_POST['itemid'];
        $userid = $_POST['userid'];
        $date = date('Y-m-d');

        $sql = "SELECT comment_id
                FROM items_comments
                ORDER BY comment_id DESC LIMIT 1";
        $result = $Db->sQuery($sql);
        $row = mysql_fetch_array($result);

        $comment_id = ($row['comment_id'])+1;

        $sql = "INSERT INTO items_comments (comment_id, item_id, user_id, comment_date, comment_text) 
            VALUES('$comment_id', '$itemid', '$userid', '$date', '$text')";
        $Db->uidQuery($sql);

        $sql = "SELECT *
                FROM items_comments, users
                WHERE items_comments.comment_id = '".$comment_id."'
                AND items_comments.user_id = users.user_id
                ORDER BY comment_date DESC";
        $result = $Db->sQuery($sql);
        $row = mysql_fetch_array($result);
        $Db->closeConnection();

 ?>

            <div id="com_loaded">
                <div id="com_loaded_height"></div>
                <div id="com_loaded_userpic"><a href="#" class="tooltip"><img src="<?=$row['user_pic']?>" class="img_poster" /><span><?=$row['user_name']?></span></a></div>
                <div id="com_loaded_content">
                    <div id="com_loaded_poster"><a href="#"><?=$row['user_name']?></a></div>
                    <div id="com_loaded_text"><?=$row['comment_text']?></div>
                </div>
                <div id="com_loaded_divide"></div> 
            </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T15:49:08.363

使用[`prepend()`](http://api.jquery.com/prepend/)：

```
success: function(html){
    $("#messages").prepend(html);
} 
```

# ios - CCSprite 上的黑色背景

> ID：12448280
> 
> 赞同：0
> 
> 时间：2012-09-16T15:44:49.157
> 
> 标签：ios, cocos2d-iphone, ccsprite

我正在尝试从透明的 PNG 创建一个精灵。如果我将图像用于 UIImageView，它会将背景显示为透明 - 应该是这样。但是，如果我使用 CCSprite，我会得到黑色背景。这是我正在创建精灵的硬件：

```
UIImage *fullsizeImg = [UIImage imageWithContentsOfFile:[ele imagePath]];
CCSprite *sprite = [CCSprite spriteWithCGImage:fullsizeImg.CGImage key:@"blah"]; 
```

我正在将精灵添加到 CCLayerColor。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T15:57:36.810

你的精灵的混合可能是错误的。尝试这个：

```
sprite.blendFunc = (ccBlendFunc){GL_ONE, GL_ONE_MINUS_SRC_ALPHA}; 
```

另外，为什么不像这样加载图像：

```
CCSprite *sprite = [CCSprite spriteWithFile:@"ImageName"]; 
```

# css - 如何使用 css last-child？

> ID：12448281
> 
> 赞同：4
> 
> 时间：2012-09-16T15:44:50.200
> 
> 标签：css, css-selectors

我有一个评论列表，我想`border-radius`使用一些 css 代码评论 div 设置最后一个孩子 的评论，![意见表](../Images/179eb1f484c9758e9b21dba0f3d455d9.png)
我正在使用这个代码，但它不起作用。

```
 #comments>.comment:last-child, .indented>.comment:last-child{border-bottom-right-radius: 5px;} 
```

它在像这样与 jquery 一起使用时有效

```
 $('#comments>.comment:last, .indented>.comment:last').css('border-bottom-right-radius', '10px'); 
```

但我想用css代码解决它。有什么建议吗？

小提琴的简单代码[小提琴](http://jsfiddle.net/farnabaz/93tZV/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T16:50:46.183

我已经能够使用以下 CSS 代码使其工作（对于提供的 HTML 结构）：

```
#comments > .comment:nth-last-child(-n+2),
.indented > .comment:nth-last-child(-n+2) {
    border-bottom-right-radius: 15px;
} 
```

**现场演示：http:** [//jsfiddle.net/93tZV/3/](http://jsfiddle.net/93tZV/3/)

因此，`:last-child`我们不使用选择最后一个孩子，而是`:nth-last-child(-n+2)`选择最后两个孩子。如果最后一个孩子是`.indented`DIV，则此方法有效，因为我们的`.comment`选择器会将其过滤掉。但是，如果最后两个孩子都是`.comment`DIV，则 CSS 样式将适用于它们，这导致[http://jsfiddle.net/93tZV/4/](http://jsfiddle.net/93tZV/4/)我不知道如何解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T15:47:44.820

您的 HTML 结构存在缺陷，因此替代解决方案是`right_bottom_round`在您希望右下角圆角的位置添加类。

```
.right_bottom_round {
  border-bottom-right-radius: 5px !important;
} 
```

并在此处检查[浏览器兼容性](http://caniuse.com/css-sel3)

# java - 覆盖抽象方法时的通用代码 - 设计问题

> ID：12448287
> 
> 赞同：3
> 
> 时间：2012-09-16T15:45:40.257
> 
> 标签：java, design-patterns, abstract

我有一个像这样的抽象类

```
public abstract Stuff
{
    public abstract void doStuff();
} 
```

几个类正在扩展 Stuff，覆盖 doStuff()。doStuff() 通常为每个实现执行完全不同的任务，但共享一个共同的部分。

实现这一点的最佳方法是什么？

我不想写这样的东西：

```
public void doStuff()
{
    doTheCommonPart();
    ...
} 
```

在每个扩展类中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T15:50:56.910

您可以使用[模板方法模式](http://en.wikipedia.org/wiki/Template_method_pattern)：

```
public abstract Stuff
{
    public abstract void doStuff();

    public void doTheCommonPart() {
      // ...
    }

    // Template method
    public final void doIt() {
      doTheCommonPart();
      doStuff();
    }
} 
```

然后，您的客户端类只需调用模板方法`doIt()`。它将执行公共代码部分，以及抽象方法的具体实现`doStuff()`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-16T15:54:09.010

任何一个：

1.  将公共代码放在类中的`protected`方法中，`Stuff`并从 ; 的每个实现中调用它`doStuff`。或者

2.  将通用代码添加到您的抽象`Stuff`类并调用另一个抽象方法。

例如（1）

```
public abstract Stuff  
{
    public abstract void doStuff();

    protected void commonCode() 
    {
      //...
    }
} 
```

或 (2)

```
public abstract Stuff
{
    public void doStuff() 
    {
      // Do the common stuff initially...
      // ...

      // Then call the subclass implementation
      doRealStuff();
    }

    public abstract void doRealStuff();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T15:51:37.860

你可以这样定义，类似于[模板方法设计模式](http://en.wikipedia.org/wiki/Template_method_pattern)：

```
public abstract Stuff
{
    public abstract void doSpecificStuff();

    public void doStuff()
    {
        doCommonStuff();
        doSpecificStuff();
    }
} 
```

# jquery - 特定页面的 Jquery 移动事件

> ID：12448291
> 
> 赞同：0
> 
> 时间：2012-09-16T15:46:15.007
> 
> 标签：jquery, jquery-mobile

我的应用程序中有多个不同页面触发的事件。我想将所有脚本添加到我的主页。如何将以下事件更改为仅在具有特定 ID 的页面上触发？因此，我可以将所有页面的所有页面事件放在一个脚本中，并且只有在正确的页面位于 DOM 中时才会触发这些事件。

示例页面事件.. $(document).bind('pageinit')

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T00:26:14.153

我不确定这是否是您真正要寻找的……但是，您可以通过引用其 ID 将特定事件应用于给定页面。

例如：

```
$( '#your_id_page' ).live( 'pagebeforecreate',function(event){
    alert( 'This page was just inserted into the dom!' );
}); 
```

您可以查看在线文档的事件部分以获取更多信息：http: [//jquerymobile.com/demos/1.1.1/docs/api/events.html](http://jquerymobile.com/demos/1.1.1/docs/api/events.html)

# ios - 多个 iOS 动画仅适用于第一个视图

> ID：12448293
> 
> 赞同：1
> 
> 时间：2012-09-16T15:46:34.983
> 
> 标签：ios, uiviewanimation

我对 iOS 动画有一个奇怪的动画问题。我正在尝试动画从底部到顶部 UITableView 单元格。但动画仅适用于第一个单元格。所有其他单元格保持在其位置（在表格底部）（但报告的帧已更改）。

有任何想法吗？这是我的一段代码：

```
- (float)runCellAnimations {
    NSTimeInterval animationDelay = 0.0;
    NSArray *cells = [tableView visibleCells];

    for (GTMapLocationCell *cell in cells) {

        CGPoint origin = cell.origin;
        cell.origin = CGPointMake(cell.origin.x, CGRectGetHeight(tableView.bounds));

        [UIView beginAnimations:@"Cell Location" context:NULL];
        [UIView setAnimationDuration:GT_CELL_ANIMATION_DURATION];
        [UIView setAnimationDelay:animationDelay];
        cell.origin = origin;
        [UIView commitAnimations];
        animationDelay += GT_CELL_ANIMATION_INTERVAL;

    }

    return (animationDelay-GT_CELL_ANIMATION_INTERVAL)+GT_CELL_ANIMATION_DURATION;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T16:02:30.577

尝试在 for 循环之前调用 [UIView beginAnimations:] 和动画设置方法，在 for 循环范围之后调用 [UIView commitAnimations] 方法。

我们的建议只是对每个单元格进行更改，但只执行一个动画。

# jquery - 上传时Jquery脚本不起作用

> ID：12448298
> 
> 赞同：0
> 
> 时间：2012-09-16T15:47:05.793
> 
> 标签：jquery, html

这可能是一个菜鸟问题，但是当谈到 JQuery 时，我是菜鸟，我需要一些帮助。基本上，当我在本地测试时，我自制的图片库脚本运行良好，但是上传的脚本 jsut 不起作用。我不知道为什么？

你可以在[这里查看网站](http://designbykai.com/test/index.html)

这是[JQuery](http://designbykai.com/test/imagegallery.js)

基本的 HTML：

```
<div id="imagenav">
    <ul>
        <li>
            <a href="">
                <img src="images/thumbs/1.jpg"/>
            </a>
        </li>
        <li>
            <a href="">
                <img src="images/thumbs/2.jpg"/>
            </a>
        </li>
        <li>
            <a href="">
                <img src="images/thumbs/3.jpg"/>
            </a>
        </li>
    </ul>  
</div>

<div id="imagecontainer">
    <div>
        <a class="prev" href="">prev</a>
        <a class="next" href="">next</a>
        <a class="index" href="">X</a><br>
        <img src="images/1.jpg"><br>
        <p>Description: Vestibulum id ligula porta felis euismod semper.</p>
    </div>
    <div>
        <a class="prev" href="">prev</a>
        <a class="next" href="">next</a>
        <a class="index" href="">X</a><br>
        <img src="images/2.jpg"><br>
        <p>Description: Vestibulum id ligula porta felis euismod semper.</p>
    </div>
    <div>
        <a class="prev" href="">prev</a>
        <a class="next" href="">next</a>
        <a class="index" href="">X</a><br>
        <img src="images/3.jpg"><br>
        <p>Description: Vestibulum id ligula porta felis euismod semper.</p>
    </div>
</div> 
```

基本的 JQUERY 脚本：

```
 var imagenav= $('#imagenav li a');
 var imagecontainer= $('#imagecontainer');
 var images= $('#imagecontainer div');
 var shader= $('#shader');

 imagenav.click(function (event) {
    event.preventDefault();
    var imageno = imagenav.index(this);
    imagecontainer.fadeIn(300, function(){
            shader.fadeIn(300);
            images.hide(0);
            images.eq(imageno).fadeIn(300);
    });
    return false;
}); 
```

任何帮助将不胜感激！

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T15:53:30.310

jQuery 没有加载到您的页面上：

> 未捕获的 ReferenceError：$ 未定义

由于：

> 加载资源失败：服务器响应状态为 403（禁止）

上档`http://designbykai.com/test/jquery.js`。只需[通过 SSH 或 FTP] 为此类文件授予 755 权限，或者通过 CDN 更好地链接到 jQuery：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js" type="text/javascript"></script> 
```

顺便说一句，您的页面将加载得更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T15:53:35.327

您包含的 jQuery 脚本会引发错误：

```
<script src="jquery.js">
    <!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
    <html><head>
    <title>403 Forbidden</title>
    </head><body>
    <h1>Forbidden</h1>
    <p>You don't have permission to access /test/jquery.js
    on this server.</p>
    <p>Additionally, a 404 Not Found
    error was encountered while trying to use an ErrorDocument to handle the request.</p>
    <hr>
    <address>Apache/2.2.22 (Unix) mod_ssl/2.2.22 OpenSSL/0.9.8e-fips-rhel5 DAV/2 mod_auth_passthrough/2.1 mod_bwlimited/1.4 FrontPage/5.0.2.2635 mod_fcgid/2.3.6 Server at designbykai.com Port 80</address>
    </body></html> 
</script> 
```

**试试这个：**

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script> 
```

在您的代码（imagegallery.js）中，您可以保留对 jQuery 的*美元*引用：

```
(function($){

   //code here  

})(jQuery); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T15:54:07.293

如果你使用firefox的[firebug](http://getfirebug.com/)插件，你可以马上知道你的js没有被下载。
它返回“NetworkError：403 Forbidden - [http://designbykai.com/test/jquery.js](http://designbykai.com/test/jquery.js) ”

您可能需要检查您的文件是否存在及其权限

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T15:55:27.220

在脚本的底部，您有以下两行：

```
<script src="jquery.js"></script>
<script src="imagegallery.js"></script> 
```

1.  尝试将它们放在脚本的顶部
2.  确保 js 文件确实在[http://designbykai.com/test/](http://designbykai.com/test/)文件夹中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-28T09:22:00.293

右键单击 jquery.js 文件 > 属性 > 确保其他获得此文件的“只读”权限。我正在使用 linux，但我认为 Windows 也一样。对不起我的英语不好。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-16T15:53:19.093

140号线...

```
 <script src="jquery.js"></script> 
```

是错的。

```
 <script type="text/javascript" src="jquery.js"></script> 
```

并确保该文件存在并且可以在您引用的路径中访问。

# android - 如何对特定日期/时间进行提醒（警报））

> ID：12448300
> 
> 赞同：0
> 
> 时间：2012-09-16T15:47:12.247
> 
> 标签：android

我正在制作一个您创建事件和提醒的应用程序，其中包含其中的一部分。我对事件创建没问题，但我不确定是否要进行提醒。你用它做什么？如果应用程序已关闭，我还能让它在后台运行吗（有点像 android 日历）

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T15:50:21.483

您可以使用 AlarmManager 来安排事件。但是当设备关闭时，所有警报都会被取消，所以你应该有一个 BroadcastReceiver 来监听 BOOT_COMPLETED 意图并重新安排事件（应该存储在某个地方：共享首选项或 sqlite）。

# c# - 当我使用 Process.Start() 打开链接时控制浏览器窗口的大小？

> ID：12448301
> 
> 赞同：1
> 
> 时间：2012-09-16T15:47:28.880
> 
> 标签：c#, .net, winforms, process.start

我无法使用 Web 浏览器控件来显示 html 内容，因为我正在使用后台工作人员打开表单。

因此，我正在使用 Process.Start() 打开一个仅包含类似 facebook 按钮的链接

```
Process.Start("http://www.example.com"); 
```

是否有可能控制打开窗口的大小（高度、宽度）和起始位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T15:52:43.573

> 我无法使用 Web 浏览器控件来显示 html 内容，因为我正在使用后台工作人员打开表单。

[在这种情况下，您可以在Invoke](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)委托中执行此操作。或者，由于您使用的`BackgroundWorker`是[RunWorkerCompleted](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.runworkercompleted.aspx)事件，该事件在后台任务完成后执行。

# mysql - qooxdoo 远程请求未完成

> ID：12448302
> 
> 赞同：0
> 
> 时间：2012-09-16T15:47:30.920
> 
> 标签：mysql, json, qooxdoo

我有简单的应用程序，我需要从 MySQL 获取数据。我读到我可以在 *.php 文件中使用服务器上的脚本来做到这一点，我需要做的就是从我的 qooxdoo 应用程序运行这个文件并获取打印数据。这是一段代码：

```
doWysyl.addListener("execute", function(e)      //doWysyl is button
{
    var req = new qx.io.remote.Request("http://localhost/db_connector.php", "GET", "application/json");
    req.addListener("completed", function(e) 
    {
        alert("Something");

    });
    req.send();

}, this); 
```

db_connector.php 文件：

```
<?php
    $db = mysql_connect('localhost', 'root', '');
    if (!$link) {
        die('Can't connect: ' . mysql_error());
    }
    $result = mysql_query("SELECT Id FROM gitterbox WHERE Ukryj=0")
    $dane = array();
    while ($row = mysql_fetch_assoc($result)) {
        $dane [] = $row["Id"];
    }
    mysql_close($link);
    echo json_encode($dane);
?> 
```

我的问题是 alert("Something"); 永远不会显示，就像完成的事件永远不会被触发一样。我也尝试过不同的事件，但没有任何帮助。我确定 db_connect.php 已打开，因为我已经检查过了。

* * *

好的，我编辑了我的代码以使用 Xhr 请求，现在它看起来像：

```
doWysyl.addListener("execute", function(e) {
    var req = new qx.io.request.Xhr("http://localhost/db_connector.php", "GET");
    req.addListener("success", function(e) {
        alert("success");
    }, this);
    req.addListener("fail", function(e) {
        var reqa = e.getTarget() 
        var response = req.getResponse() 
        alert("fail "+response+". Code: "+reqa.getStatus()) 
    }, this);
    req.send();
}, this); 
```

但问题是我总是会触发失败事件，并且在警报中我有消息：

```
fail null. Code 0 
```

* * *

我在警报之前添加了断点，这就是堆栈跟踪（使用 Chrome 和 Windows 7 x64）：

```
(anonymous function) (class/custom/MainWindow.js:27)
qx.Class.define.members.dispatchEvent (/D:/qooxdoo-2.0.2-sdk/framework/source/class/qx/event/dispatch/Direct.js:134)
wrappedFunction (/D:/qooxdoo-2.0.2-sdk/framework/source/class/qx/Interface.js:451)
qx.Class.define.members.dispatchEvent (/D:/qooxdoo-2.0.2-sdk/framework/source/class/qx/event/Manager.js:873)
qx.Class.define.statics.fireEvent (/D:/qooxdoo-2.0.2-sdk/framework/source/class/qx/event/Registration.js:310)
qx.Mixin.define.members.fireEvent (/D:/qooxdoo-2.0.2-sdk/framework/source/class/qx/core/MEvents.js:169)
qx.Class.define.members._onError (/D:/qooxdoo-2.0.2-sdk/framework/source/class/qx/io/request/AbstractRequest.js:773)
(anonymous function) (/D:/qooxdoo-2.0.2-sdk/framework/source/class/qx/lang/Function.js:293)
qx.Bootstrap.define.members._emit (/D:/qooxdoo-2.0.2-sdk/framework/source/class/qx/bom/request/Xhr.js:440)
qx.Bootstrap.define.members.__readyStateChangeDone (/D:/qooxdoo-2.0.2-sdk/framework/source/class/qx/bom/request/Xhr.js:897)
qx.Bootstrap.define.members.__readyStateChange (/D:/qooxdoo-2.0.2-sdk/framework/source/class/qx/bom/request/Xhr.js:869)
qx.Bootstrap.define.members.__onNativeReadyStateChange (/D:/qooxdoo-2.0.2-sdk/framework/source/class/qx/bom/request/Xhr.js:808)
(anonymous function) (/D:/qooxdoo-2.0.2-sdk/framework/source/class/qx/Bootstrap.js:551) 
```

我发现有趣的是[这个](http://scr.hu/0qwb/eyhde)，在网络选项卡中。我希望这有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:30:44.653

首先，我建议使用 qx.io.request.Xhr ：

您可以在此页面上获得有关使用它的详细介绍：

[http://manual.qooxdoo.org/1.5/pages/communication/request_io.html](http://manual.qooxdoo.org/1.5/pages/communication/request_io.html)

如果你使用 Xhr，我建议听“success”和“fail”或“statusError”。这会提示您的请求有什么问题。

# windows - 记录和捕获 NTFS 活动

> ID：12448303
> 
> 赞同：1
> 
> 时间：2012-09-16T15:47:35.303
> 
> 标签：windows, profiling, ntfs

再会。请问，有没有机会拦截和记录 NTFS 活动？Procmon 记录 NTFS 上的系统操作（创建、打开、删除等），但在保存文件时不显示放置在文件上的块的主体。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T15:51:57.067

您将需要编写一个文件系统过滤器驱动程序。这是一个非常好的教程：

[文件系统过滤器驱动教程](http://www.codeproject.com/Articles/43586/File-System-Filter-Driver-Tutorial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:03:19.327

编写内核模式代码不是一件容易的事！

在您开始这次冒险之前，您可以仔细查看由 Mark Russinovich 编写的[Sysinternal Suite 。](http://technet.microsoft.com/de-de/sysinternals/bb842062)也许你在那里找到有用的东西，如果没有，那么这些工具可能会帮助你编写微过滤器！

# google-apps-script - 多渠道漏斗 API Apps 脚本 Google 电子表格

> ID：12448305
> 
> 赞同：0
> 
> 时间：2012-09-16T15:47:43.047
> 
> 标签：google-apps-script

我正在通过 Google 电子表格中的 Google 应用脚本功能使用新的 Multi Channel Funnels API。我能够提取数据集合，但无法正确解析它。它看起来像某种 json 对象，但我无法将值正确输出到电子表格的单元格。它目前看起来像这样：

```
 mcf:source 
{"primitiveValue":"(direct)"}   
{"primitiveValue":"Aug2012_enews_adoption"} 
{"primitiveValue":"Aug2012_enews_donation"} 
```

我无法摆脱单元格中的原始值键并仅提取值。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T23:11:41.587

您可以使用解析这些 JSON 值`JSON.parse()`，然后从解析的对象中提取值。

# .net - 尝试使用按钮更改文本的对齐方式时，表达式不是方法错误

> ID：12448310
> 
> 赞同：0
> 
> 时间：2012-09-16T15:48:03.403
> 
> 标签：.net, vb.net

我有一个项目让学校`TextBox`从左到右更改文本的对齐方式。

我的代码：

```
Public Class Form1
   Private Sub cmdChangeAllignment_Click(sender As Object, e As EventArgs) Handles cmdChangeAllignment.Click
        txtChangeAllignment.TextAlign.Right()
   End Sub
End Class 
```

结果异常`Expression is not a method`。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T15:50:44.743

`TextAlign`是您设置以更改对齐方式的属性，因此您应该分配`HorizontalAlignment.Right`给它。`HorizontalAlignment.Right`只是枚举中的一个值，而不是一个方法；您的代码*看起来*应该可以工作的原因是静态成员仍然可以通过实例访问（我认为这是一个非常愚蠢的想法）。

```
txtChangeAllignment.TextAlign = HorizontalAlignment.Right 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T16:27:42.210

对OP的一点澄清......

.NET API 包含大量属性，这些属性指示文本对齐、控件对齐、颜色等内容，通常这些类型的有效值太复杂而无法用文本或字符串指定，最终只能被表示有一堆神奇的数字。与其期望开发人员记住这些数字，不如将它们汇总并组织成一系列命名的、定义的值，称为*枚举*，这些值本身*看起来*和操作有点像属性。" `HorizontalAlignment`" 是其中之一，带有`Left`, `Right`, 和`Center`有效值。

抱歉，鉴于 qwzjk 的回答，这有点过头了，但我们中的一些人习惯于枚举的概念，但新手可能不会，所以希望它为您提供一些额外的说明。

# ios - iPad - UINavigationBar 超出宽度，ViewController 作为半屏子视图

> ID：12448314
> 
> 赞同：0
> 
> 时间：2012-09-16T15:48:32.933
> 
> 标签：ios, ipad, ios5

我将 ViewController 作为子视图添加到我的主视图中，如下所示：

```
 UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Backstage" bundle:nil];
    UIViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"BackstageHomeViewController"];
    vc.view.frame = CGRectMake(0, 0, 480, self.view.frame.size.height);

    [self.view addSubview:vc.view]; 
```

问题是，UINavigationBar 仍然具有原始的全屏宽度，并且在边缘看起来被切断了。

![在此处输入图像描述](../Images/69658a3728054af2465d467e6cf68f77.png)

如何更改宽度以匹配它包含的视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T17:42:33.033

`vc.view.frame = CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T21:07:23.807

是的——iOS 6 刚刚使用新的 Container View 解决了这个问题，它允许您`UIViewController`在`UIView`. 自动调整大小。

# hadoop - 与 FS 的不良连接

> ID：12448315
> 
> 赞同：3
> 
> 时间：2012-09-16T15:48:33.230
> 
> 标签：hadoop

我正在使用 Cloudera Hadoop (cdh3u1)，但遇到以下错误消息：

```
[root@paul conf.class]# sudo -u hdfs hadoop fs -mkdir /user/training 
12/09/16 07:40:26 INFO ipc.Client: Retrying connect to server: peter/192.168.1.100:8020\. Already tried 0 time(s).
12/09/16 07:40:27 INFO ipc.Client: Retrying connect to server: peter/192.168.1.100:8020\. Already tried 1 time(s).
12/09/16 07:40:28 INFO ipc.Client: Retrying connect to server: peter/192.168.1.100:8020\. Already tried 2 time(s).
12/09/16 07:40:29 INFO ipc.Client: Retrying connect to server: peter/192.168.1.100:8020\. Already tried 3 time(s).
12/09/16 07:40:30 INFO ipc.Client: Retrying connect to server: peter/192.168.1.100:8020\. Already tried 4 time(s).
12/09/16 07:40:31 INFO ipc.Client: Retrying connect to server: peter/192.168.1.100:8020\. Already tried 5 time(s).
12/09/16 07:40:32 INFO ipc.Client: Retrying connect to server: peter/192.168.1.100:8020\. Already tried 6 time(s).
12/09/16 07:40:33 INFO ipc.Client: Retrying connect to server: peter/192.168.1.100:8020\. Already tried 7 time(s).
12/09/16 07:40:34 INFO ipc.Client: Retrying connect to server: peter/192.168.1.100:8020\. Already tried 8 time(s).
12/09/16 07:40:35 INFO ipc.Client: Retrying connect to server: peter/192.168.1.100:8020\. Already tried 9 time(s).
Bad connection to FS. command aborted. exception: Call to peter/192.168.1.100:8020 failed on local exception: java.net.NoRouteToHostException: No route to host 
```

我在名为 Paul 的从节点上运行此程序，并尝试连接到名为 Peter 的主节点。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:46:10.127

堆栈跟踪只是说运行在 paul 上的客户端无法连接到运行在 192.168.1.100 端口 8020 上的 Namenode。

查看 ：

1) 名称节点在 peter/192.168.1.100:8020 上运行。您可以在 peter 中执行 jps 以检查 Namenode 进程是否正在运行，或者尝试在浏览器中从 paul 浏览 192.168.1.100:50070 或从 peter 浏览 localhost:50070 以检查 namenode 的 web ui 是否出现。

2) core-site.xml 中的“fs.default.name”，即“192.168.1.100:8020”，是运行namenode的服务器的正确地址和端口。

# java - 未找到文档

> ID：12448323
> 
> 赞同：0
> 
> 时间：2012-09-16T15:49:56.350
> 
> 标签：java, google-docs, google-docs-api

我正在尝试下载文档并为此使用文档列表 api。从[https://docs.google.com/feeds/default/private/full](https://docs.google.com/feeds/default/private/full)获取文件并对其进行迭代，获取下载文件的入口。大部分文档都可以正常下载，但其中一部分会引发 ResourceNotFoundException，这里是跟踪：

```
at
 com.google.gdata.client.http.HttpGDataRequest.handleErrorResponse(HttpGDataRequest.java:591)
 at
 com.google.gdata.client.http.GoogleGDataRequest.handleErrorResponse(GoogleGDataRequest.java:563)
  at
 com.google.gdata.client.http.HttpGDataRequest.checkResponse(HttpGDataRequest.java:552)
  at
 com.google.gdata.client.http.HttpGDataRequest.execute(HttpGDataRequest.java:530)
  at
 com.google.gdata.client.http.GoogleGDataRequest.execute(GoogleGDataRequest.java:535)
  at
 com.google.gdata.client.media.MediaService.getMediaResource(MediaService.java:234)
  at
 com.google.gdata.client.media.MediaService.getMedia(MediaService.java:276)
  at
 com.google.gdata.client.media.MediaService.getMedia(MediaService.java:302) 
```

异常文本是：

```
 com.google.gdata.util.ResourceNotFoundException: Not Found 
```

然后是 Google html 页面。

有没有想过如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T15:57:01.183

不确定每行末尾的这些数字是做什么的，但如果它们是文档的某种 ID，则可能是您的问题所在。因为根据您的错误消息，我认为您尝试访问的文档不存在。

# php - PHP动态引用对象

> ID：12448324
> 
> 赞同：0
> 
> 时间：2012-09-16T15:50:16.957
> 
> 标签：php, oop, dynamic, reference

我正在尝试找到一种方法来在所有现有对象上使用 print_r() 而不必手动将它们作为函数中的参数传递。目前使用它进行调试并这样做：

```
function($obj1 as null){

// insert styling here

    print_r(get_object_vars($obj1));

// insert more styling

} 
```

现在，我必须为每个页面上的每个对象使用这个函数。管理起来变得很多。最好只有一个函数使用某种集合来使用 get_object_vars 输出对象变量。

在写这篇文章时，我想为每个对象创建一个带有变量的类。然后在我的每个类的 __construct 中，使用该对象将自己分配给新类。但是，这将是很多工作，而且似乎效率低下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T16:06:32.697

这可能是你要找的吗？

[http://php.net/manual/en/function.get-defined-vars.php](http://php.net/manual/en/function.get-defined-vars.php)

该页面上有许多评论解释了如何将函数用于各种目的（一个可能相关的一个可能只返回您的变量）。

即便如此，它仍然只处理当前范围内的变量以及在调用 get_defined_vars 之前已声明的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T16:03:56.980

看起来你真的想要一个调试器！但是如果我认为你是对的，那么动态地（在任何时候存在的所有对象上）唯一真正的方法是让它们向调试类注册。您可以编写一个执行此操作的类，并让所有其他类扩展该类（尽管它宁愿踩到您拥有的任何现有类层次结构，并且可能也会破坏垃圾收集器！

保存一些代码的另一个部分解决方案是在每次调试调用时列出要在数组中输出的对象，然后循环它们。

```
foreach(array('var1', 'var2', 'var3') as $name) {
    debug($$name);
} 
```

[变量变量](http://php.net/manual/en/language.variables.variable.php)

# javascript - js文件中的树枝代码

> ID：12448337
> 
> 赞同：3
> 
> 时间：2012-09-16T15:52:25.647
> 
> 标签：javascript, symfony, twig

将 symfony2 与 twig 模板一起使用，我通常使用嵌入在`*html.twig`文件中的 js 来对页面进行更多的动态化。

如果我的页面附加了外部 JS 文件怎么办？我怎么能在里面引入树枝代码？

我知道这听起来有点过时，但是当尝试从 javascript 重定向到已知的 symfony 路径时，它并没有那么多。像这样：

```
$.post("{{ path('_check_coupon') }}",{code: coupon_code}, function(json) {
    // do whatever...
}); 
```

如您所见，我在一个完全分离的 js 文件中有一个对已知路径的 ajax 调用`"_check_coupon"`。

有什么想法可以解决这个问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T16:08:13.427

您可以将此类路径嵌入`data-path`到 DOM 元素的属性中，例如：

```
<div id="widget" data-path="{{ path('_check_coupon') }}"> ... </div> 
```

然后只需获取它：

```
$.post( $('#widget').data('path') ,{code: coupon_code}, function(json) {
    // do whatever...
}); 
```

这是一种普通的方法，但比将 js 和 twig 混合在一个文件中更易于维护——至少你不会得到语法高亮。

当然，如果您正在处理表单，只需获取表单的`action`属性。

* * *

无论如何，我建议您不要在同一页面上同时使用 JS 和标记：您将无法缓存脚本，也无法缩小它们，因此请考虑将它们解耦，除非它只涉及很少的行。随意查看[我的小图书馆](http://moonwave99.github.com/simple.js/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-28T00:05:22.267

我知道答案很旧，但我遇到了同样的问题，并通过使用[`verbatim`](https://twig.sensiolabs.org/doc/2.x/tags/verbatim.html)标签找到了以下解决方案。

```
// {% verbatim %}
(function() {
// {% endverbatim %}
    var val = "{{ myImportVar|raw }}";
// {% verbatim %}

    /**
     * JS Code
     */
     console.log(val);
}());
// {% endverbatim %} 
```

我已经将它们包装在 JS 注释中，以使我的编辑器提示等工作。

# c++ - 程序在 Visual Studio 中运行，但释放可执行文件崩溃

> ID：12448339
> 
> 赞同：2
> 
> 时间：2012-09-16T15:52:42.730
> 
> 标签：c++, visual-studio, file, exe, file-handling

我已经追踪到当我写入 txt 文件时。我已经检查过它是否已打开，并且它会在崩溃之前向文件写入一行。

VS2012 外部调试器向我抛出这个`Unhandled exception at 0x77112D24 (ntdll.dll) in DTC.exe: 0xC0000005: Access violation writing location 0x10000000`并将我指向`virtual __CLR_OR_THIS_CALL ~basic_filebuf()`fstream 标头内的这个函数。

```
void main()
{
    vector<string> fileNames;
    vector<time_t> fileTimes;

    CImg<unsigned char> image("Image.bmp");

    ofstream out("Result_Data.txt",ios::out|ios::app);
    if(!out.is_open())
    {
        cout<<"File Not Opened!\n";
    }
    unsigned long originalSize = my_image_functions::getFileSize("Image.bmp");
    time_t before = 0, after = 0;

    before=clock();
    my_image_functions::compressDualLevelBTC(image,"dualBTC_2_8.dtc",2,8);
    after = clock();

    fileTimes.push_back(after-before);
    fileNames.push_back("dualBTC_2_8.dtc");

    //...
    /* Several of these segments*/
    //...

    before=clock();
    my_image_functions::compressDualLevelBTC(image,"dualBTC_32_64.dtc",32,64);
    after = clock();

    fileTimes.push_back(after-before);
    fileNames.push_back("dualBTC_32_64.dtc");

    while(!fileNames.empty() && !fileTimes.empty())
    {
        out<< fileNames.back() <<";"<< fileTimes.back() <<";"<< my_image_functions::getFileSize(fileNames.back()) << ";" << ((float) originalSize)/my_image_functions::getFileSize(fileNames.back()) << endl;
        fileNames.pop_back();
        fileTimes.pop_back();
        if(!out.is_open())
        {
            cout<<"File Not Opened!\n";
        }
    }
    out.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T16:03:45.537

最可能的原因是您在运行发行版时缺少所需的 dll。

在可执行文件上运行 Dependency Walker：http: [//dependencywalker.com/](http://dependencywalker.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T16:24:03.117

您似乎在检查文件是否打开。如果不是，您打印消息“未打开”但仍然继续？

```
ofstream out("Result_Data.txt",ios::out|ios::app);
if(!out.is_open())
{
    cout<<"File Not Opened!\n";
} 
```

# php - Yii 查询复合唯一键错误

> ID：12448347
> 
> 赞同：1
> 
> 时间：2012-09-16T15:53:04.227
> 
> 标签：php, sql, yii

Yii CMS

我在'category'表中有一个唯一的复合键，website_id + link，Yii不支持这个键，所以我自己写了方法

一个网站有很多链接，每个链接都是独一无二的；2个或多个网站可能有相同的链接；因为链接可能不是绝对的；

从一组链接中，我一次提取一个链接，如果类别模式适合，我想存储 url；

```
preg_match('/\/popular\/(.*?)\/1\.html/ims', $matches_website_url[1], $matches_url);

if(count($matches_url) > 0 &&
    $this->avoid_duplicate_category($website['id'], $matches_url[1]) )
{
    $category = new Category();
    $category->website_id = $website['id'];
    $category->link = $matches_url[0];
    $category->name = $matches_url[1];
    $category->urls = 0;
    $category->update = time();
    $category->save();
} 
```

和方法

```
private function avoid_duplicate_category($website_id,$link)
{
    $query_category = Yii::app()->db->createCommand("select * from `category` where `website_id`='.$website_id.' and `link`='.$link.';");

    $results = $query_category->queryAll();

    if(count($results)>0)return false;
    else return true;

} 
```

并返回错误：

```
CDbException

CDbCommand failed to execute the SQL statement: SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry 'Cute' for key 'name'. The SQL statement executed was: INSERT INTO `category` (`website_id`, `link`, `name`, `urls`, `update`) VALUES (:yp0, :yp1, :yp2, :yp3, :yp4) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T16:07:37.947

我相信您应该能够通过将以下内容添加到模型中来允许 Yii 处理复合键：

```
public function primaryKey()
{
    return array('website_id','link');
} 
```

编辑，

对不起，看错了你的问题！对于唯一键（非主键），您可以尝试以下扩展：

[http://www.yiiframework.com/extension/composite-unique-key-validatable/](http://www.yiiframework.com/extension/composite-unique-key-validatable/)

[http://www.yiiframework.com/extension/unique-index-validator](http://www.yiiframework.com/extension/unique-index-validator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T16:43:07.780

这是答案：

```
private function avoid_duplicate_category($website_id,$link)
{
    $query = "select * from `category` where `website_id`=:website_id and `link`=:link;";

    $query_category = Yii::app()->db->createCommand($query);

    $query_category->bindParam( ':website_id', $website_id);

    $query_category->bindParam( ':link', $link);

    $results = $query_category->queryAll();

    if(count($results)>0)return false;
    else return true;

} 
```

# xcode - 尝试修改项目模板，但文件夹似乎缺少文件

> ID：12448361
> 
> 赞同：2
> 
> 时间：2012-09-16T15:54:48.323
> 
> 标签：xcode, templates

我正在尝试将自定义代码模板添加到 Xcode 中。根据我的阅读，这是我想出的程序。

一、访问文件夹路径

> 应用程序/Xcode45-DP3.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/Xcode/Templates/Project Templates/Application

其次，制作一个现有文件夹的副本以用作起点。

第三，将该文件夹名称更改为我想要的名称。

我遇到问题的部分是没有包含我要修改的代码的文件，例如**PROJECTNAME** .xcodeproj、anyfilename.h、anyfilename.h 等，只有 MainStoryBoard_iPad（和 iPhone）。故事板、ViewcontrolleriPad（和 iPhone）.Xib、TemplateIcon.tiff 和 TemplateInfo.plist。

这样做的正确方法是什么？我错过了什么？

![在此处输入图像描述](../Images/861cca7f9ebeab628878db848f71899b.png)

![在此处输入图像描述](../Images/edc532f956e8f75e951dde83bc3aa2e9.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T16:07:36.920

你想创造什么？项目模板还是文件模板？

*   如果要创建新的文件模板，则需要将整个`"*.xctemplate"`文件夹从`"/Xcode/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/Xcode/Templates/File Templates"`（您将用作示例/起点）复制到`"~/Library/Application Support/Developer/Shared/Xcode/File Templates"`.
*   如果你想创建一个新的项目模板，对一个`"*.xctemplate"`文件夹执行相同的`"/Xcode/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/Xcode/Templates/Project Templates"`操作`"~/Library/Application Support/Developer/Shared/Xcode/Project Templates"`
*   如果应用支持中不存在`"File Templates"`/文件夹，请创建它们。`"Project Templates"`

**不要将模板复制到 Xcode 包本身**，因为它不打算这样做（并且违反了沙盒概念，并且会在您下次升级 Xcode 版本时被覆盖），而是**使用该`Application Support`文件夹，**因为它是它的目的。

将 Xcode 包中的一个`.xctemplate`文件夹复制到相应的 App Support 文件夹后，您可以修改其中的内容`.xctemplate`以满足您的需要。

* * *

现在**，您在 xctemplate 文件夹中没有任何 xcodeproj**，这是因为由项目模板创建的项目**不是使用 xcodeproj 文件定义的**，而是使用**TemplateInfo.plist 文件中的键**定义的。

例如，`"Project Templates/Mac/Mac Base.xctemplate/TemplateInfo.plist"`您可以看到一个名为`"Project"`subkeys `"Configurations"`、的键`"SDK"`，`"SharedSettings"`它为要由模板创建的 xcodeproj 定义了一些构建设置。

此外，请注意**模板具有某种“继承”概念**，每个模板都能够具有定义公共键的“祖先”：

*   打开`"TemplateInfo.plist"`文件并查看`"ancestors"`密钥
*   您将在此处找到所选模板的祖先的标识符数组。例如，`"Cocoa Application.xctemplate"`模板`"com.apple.dt.unit.cocoaApplicationBase"`作为其祖先之一。
*   然后去找到模板，其标识符是在祖先键中找到的那个（在我的例子中，它就是`"Cocoa Application Base.xctemplate"`模板，在它的中`TemplateInfo.plist`你可以看到它的`"Identifier"`键是`"com.apple.dt.unit.cocoaApplicationBase"`我们上面看到的）。

而且您可以像这样向上直到基本模板，对模板定义具有某种“继承”。

# php - 谷歌日历自动时区

> ID：12448364
> 
> 赞同：0
> 
> 时间：2012-09-16T15:55:18.847
> 
> 标签：php, javascript, timezone, google-calendar-api, gmt

我正在为一个客户做一个简单的网站，其中包括一个用于显示即将发生的事件的谷歌日历。这里的问题是我无法弄清楚如何让日历的时区在每个用户的基础上自动更新，因为它不会让某人来查看日历并查看他们的本地事件从 4:00（芝加哥时间）开始，而实际上它从 2:00（西雅图时间）开始。

我能想到的最接近的，我需要获取 GMT 时区并将其转换为城市/州字符串，然后可以将其拼接到 gCal 具有 ctz 变量的 iframe src 中。

我正在使用 PHP 和重型 JavaScript+jQuery。如果您对更快的替代方案有任何建议，我将不胜感激，因为将 GMT 转换为城市/州的代码可能很长......而且这不是一个付费项目。xD

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T17:00:40.247

我认为您可以将日历设置为“日历区”，然后它将适当更新。您还可以显示 2 个时区。有关详细信息，请参阅此链接：http: [//support.google.com/calendar/bin/answer.py ?hl=en&answer=83117](http://support.google.com/calendar/bin/answer.py?hl=en&answer=83117)

# android - 将多个日历事件（非重复）添加到 Android

> ID：12448374
> 
> 赞同：1
> 
> 时间：2012-09-16T15:56:58.160
> 
> 标签：android, calendar, android-contentprovider

我想以编程方式将多个 canlendar 事件添加到日历（内容提供者）。可以说有一些与作品相关的事件。这些事件可以是单个或多个。并且多个可以是重复的（一个月一次）或非重复的（随机日期）。基本上我有一个日期列表，我需要将其添加到日历中，以便它们与他们的工作相关联。

示例：工作 1：股东大会。Dates1: 12.01.2011, 06.02.2012, 17.03.2012 ...（随机多个日期）

工作 2：月度报告。Dates2: 25.01.2011, 26.02.2012, 21.03.2012 ...（随机多个日期）

所以所有的 dates1 都应该关联在一起，因为它们都属于 work1。因为如果用户想要编辑位置、警报或描述，那么他/她应该能够通过单个操作（例如在重复事件中）为所有日期执行此操作。

我正在考虑添加第一个事件并获取返回的事件 ID 并添加具有相同事件 ID 的下一个日期。但我不确定这是否是正确的方法。

我怎样才能正确地做到这一点？我在任何地方都找不到有关此问题的任何信息。

（使用 event_id 会出现此错误：E/AndroidRuntime(3649): Caused by: java.lang.IllegalArgumentException: column 'event_id' is invalid）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:28:47.583

我没有找到任何解决方案。我所做的是，保留同一工作的每个事件的 ID，并让用户有机会通过我的应用程序删除同一工作的事件。

# php - 表示文件路径的 PHP 多维数组

> ID：12448380
> 
> 赞同：4
> 
> 时间：2012-09-16T15:57:32.507
> 
> 标签：php, arrays, multidimensional-array

我有一个包含文件完整路径的数组。像这样：

```
[0] => "dir1/dir2/dir3/file.ext"
[1] => "dir1/dir2/dir3/file2.ext"
[2] => "dir1/dir2/dir3/file3.ext"
[3] => "dir2/dir4/dir5/file.ext" 
```

我需要解析它并获得一个多维数组，如下所示：

```
[dir1] => [dir2] => [dir3] => file.ext
                           => file2.ext
                           => file3.ext
[dir2] => [dir4] => [dir5] => file.ext 
```

有任何想法吗？必须与各种深度的结构一起工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-09-20T09:44:16.857

以@J 为基础。布鲁尼的回答，你需要的代码如下：

```
function parse_paths_of_files($array)
{
    rsort($array);

    $result = array();

    foreach ($array as $item) {
        $parts = explode('/', $item);
        $current = &$result;

        for ($i = 1, $max = count($parts); $i < $max; $i++) {

            if (!isset($current[$parts[$i - 1]])) {
                $current[$parts[$i - 1]] = array();
            }

            $current = &$current[$parts[$i - 1]];
        }

        $last = end($parts);

        if (!isset($current[$last]) && $last) {
            // Don't add a folder name as an element if that folder has items
            $current[] = end($parts);
        }
    }

    return $result;
} 
```

J Bruni 的回答是狡猾的，因为它假定存在不存在的值，从而导致大量 PHP 未定义索引错误。

如果文件夹已经有要阻止的条目，则此版本还阻止将文件夹名称添加到列表中：

```
$result = [
    0 => folder_name
    folder_name => [
        ...
    ]
] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T17:02:26.920

我已经完成了你的功课！:-)

[http://ideone.com/UhEwd](http://ideone.com/UhEwd)

代码：

```
<?php

function parse_paths_of_files($array)
{
    $result = array();

    foreach ($array as $item)
    {
        $parts = explode('/', $item);
        $current = &$result;
        for ($i = 1, $max = count($parts); $i < $max; $i++)
        {
            if (!isset($current[$parts[$i-1]]))
            {
                 $current[$parts[$i-1]] = array();
            }
            $current = &$current[$parts[$i-1]];
        }
        $current[] = $parts[$i];
    }

    return $result;
}

$test = array(
    "dir1/dir2/dir3/file.ext",
    "dir1/dir2/dir3/file2.ext",
    "dir1/dir2/dir3/file3.ext",
    "dir2/dir4/dir5/file.ext"
);

print_r(parse_paths_of_files($test));

?> 
```

# php - php 脚本不会通过电子邮件向我发送表单内容

> ID：12448383
> 
> 赞同：1
> 
> 时间：2012-09-16T15:57:44.530
> 
> 标签：php, html, forms

我有以下 php 脚本，它应该在有人提交时将内容作为电子邮件发送给我。它非常适合验证，如果没有错误，也可以成功提交，但我从未收到电子邮件，这有什么问题。任何帮助表示赞赏。我正在本地主机上测试这个页面：

```
 <?php
if(isset($_POST['email'])) {

    // EDIT THE 2 LINES BELOW AS REQUIRED
    $email_to = "mike8978wade@gmail.com";
    $email_subject = "Enquiry Form";

    function died($error) {
        // your error code can go here
        echo "We are very sorry, but there were error(s) found with the form you submitted. ";
        echo "These errors appear below.<br /><br />";
        echo $error."<br /><br />";
        echo "Please go back and fix these errors.<br /><br />";
        die();
    }

    // validation expected data exists
    if(!isset($_POST['first_name']) ||
        !isset($_POST['last_name']) ||
        !isset($_POST['email']) ||
        !isset($_POST['telephone']) ||
        !isset($_POST['comments'])) {
        died('We are sorry, but there appears to be a problem with the form you submitted.');       
    }

    $first_name = $_POST['first_name']; // required
    $last_name = $_POST['last_name']; // required
    $email_from = $_POST['email']; // required
    $telephone = $_POST['telephone']; // not required
    $comments = $_POST['comments']; // required

    $error_message = "";
    $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
  if(!preg_match($email_exp,$email_from)) {
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }
    $string_exp = "/^[A-Za-z .'-]+$/";
  if(!preg_match($string_exp,$first_name)) {
    $error_message .= 'The First Name you entered does not appear to be valid.<br />';
  }
  if(!preg_match($string_exp,$last_name)) {
    $error_message .= 'The Last Name you entered does not appear to be valid.<br />';
  }
  if(strlen($comments) < 2) {
    $error_message .= 'The Comments you entered do not appear to be valid.<br />';
  }
  if(strlen($error_message) > 0) {
    died($error_message);
  }
    $email_message = "Form details below.\n\n";

    function clean_string($string) {
      $bad = array("content-type","bcc:","to:","cc:","href");
      return str_replace($bad,"",$string);
    }

    $email_message .= "First Name: ".clean_string($first_name)."\n";
    $email_message .= "Last Name: ".clean_string($last_name)."\n";
    $email_message .= "Email: ".clean_string($email_from)."\n";
    $email_message .= "Telephone: ".clean_string($telephone)."\n";
    $email_message .= "Comments: ".clean_string($comments)."\n";

// create email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers);  
?>

<!-- include your own success html here -->

Thank you for contacting us. We will be in touch with you very soon.

<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T16:04:02.573

您可能需要检查 php.ini 文件中的 smtp 设置。

此外，一些邮件服务可能会在一段时间内拒绝接受电子邮件，因为它们会“检查”发件人地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T16:04:52.457

您的 PHP 很可能很好。

您`localhost`的开发机器可能没有配置自己的邮件服务器。

要进行此设置：

Mac -[在 Mac OS X 上使用 PHP 设置测试邮件服务器](http://blogs.bigfish.tv/adam/2009/12/03/setup-a-testing-mail-server-using-php-on-mac-os-x/)

PC -[带有 SMTP IIS 和 Windows 服务器的 PHP Sendmail 设置](http://www.ruhanirabin.com/php-sendmail-setup-with-smtp-iis-and-windows-servers/)

**最简单**的做法是将此脚本推送到已配置邮件服务器的测试站点。

# php - 验证表单 php 时出错

> ID：12448385
> 
> 赞同：0
> 
> 时间：2012-09-16T15:58:15.100
> 
> 标签：php, javascript, forms, validation

我是 php 新手，并尝试使用 javascript 验证用户表单中的某些字段。问题是有时有效，有时无效，当警报消失时，用户已经填写的所有字段再次变为空白。

这是我的php代码：

```
<script>
            function validar(formulario){
                if(formulario.nome.value == ''){
                    alert("O campo NOME é obrigatório.");
                    return false;
                }
                if(formulario.Email.value == ''){
                    alert("O campo EMAIL é obrigatório.");
                    return false;
                }
                if(formulario.Email.value.indexOf(('@' && '.'),0)== -1){
                    alert("EMAIL invalido.");
                    return false;
                }
                if(formulario.usuario.value == ''){
                    alert("O campo USUÁRIO é obrigatório.");
                    return false;
                }
                if(formulario.senha.value == ''){
                    alert("O campo SENHA é obrigatório.");
                    return false;
                }
                if(formulario.uf.value.length > 3 || formulario.uf.length <=1){
                    alert("O campo UF é inválido.");
                    return false;
                }
                if(formulario.crm.value.length < 4){
                    alert("O número do CRM é inválido.");
                    return false;
                }
                if(formulario.cidade.value.value == ''){
                    alert("O número do CRM é inválido.");
                    return false;
                }
                return true;
            }
        </script>
</head>
<body>

<form id="formulario" method="post" onsubmit="return validar(this);" action="cadastrar.php">
 <B>Nome: </B><input type=text name=nome size="50"> <br>
<BR>
<B>E-mail: </B><input type=text name=Email size="50"><br>
<BR>
<B>Nome de Usuário: </B><input type=text name=usuario size="50"><br>
<BR>
<B>Senha: </B><input type=text name=senha size="10"><br>
<BR>
<B>CRM: </B><input type=text name=crm size="5"><br>
<BR>
<B>UF: </B><input type=text name=uf size="2"><br>
<BR>
<B>Cidade: </B><input type=text name=cidade size="20"><br>
<BR>
<B>Especialidade Médica: </B><input type=text name=esp size="30"><br>
<BR>

<input type="submit" name="Submit" value="Enviar" /> <br />

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T16:15:11.863

尝试清理您的代码：

```
<script type="text/javascript">
    function validar(formulario) {
        var nome = formulario.nome.value;
        if (nome == '') {
            alert("O campo NOME é obrigatório.");
            return false;
        }
        var email = formulario.Email.value;
        if (email == '') {
            alert("O campo EMAIL é obrigatório.");
            return false;
        }
        if (email.indexOf('@') < 0 || email.indexOf('.') < 0) {
            alert("EMAIL invalido.");
            return false;
        }
        var usuario = formulario.usuario.value;
        if (usuario == '') {
            alert("O campo USUÁRIO é obrigatório.");
            return false;
        }
        var senha = formulario.senha.value;
        if(senha == '') {
            alert("O campo SENHA é obrigatório.");
            return false;
        }
        var uf = formulario.uf.value;
        if (uf.length > 3 || uf.length <= 1) {
            alert("O campo UF é inválido.");
            return false;
        }
        var crm = formulario.crm.value;
        if (crm.length < 4) {
            alert("O número do CRM é inválido.");
            return false;
        }
        var cidade = formulario.cidade.value;
        if (cidade == '') {
            alert("O número do CRM é inválido.");
            return false;
        }
        return true;
    }
</script>
</head>
<body>

<form id="formulario" method="post" onsubmit="return validar(this);" action="cadastrar.php">
    <b>Nome: </b><input type="text" name="nome" size="50" /><br/><br/>
    <b>E-mail: </b><input type="text" name="Email" size="50" /><br/><br/>
    <b>Nome de Usuário: </b><input type="text" name="usuario" size="50" /><br/><br/>
    <b>Senha: </b><input type="text" name="senha" size="10"><br/><br/>
    <b>CRM: </b><input type="text" name="crm" size="5"><br/><br/>
    <b>UF: </b><input type="text" name="uf" size="2"><br/><br/>
    <b>Cidade: </b><input type="text" name="cidade" size="20"/><br/><br/>
    <b>Especialidade Médica: </b><input type="text" name="esp" size="30"/><br/><br/>
    <input type="submit" name="Submit" value="Enviar" /><br />
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T16:15:17.723

马虎的编码

这将更好地工作[演示](http://jsfiddle.net/mplungjan/C5SbT/)

```
function validar(formulario){
  if(formulario.nome.value == ''){
    alert("O campo NOME é obrigatório.");
    return false;
  }
  if(formulario.Email.value == ''){
    alert("O campo EMAIL é obrigatório.");
    return false;
  }
  if(formulario.Email.value.indexOf(('@' && '.'),0)== -1){
    alert("EMAIL invalido.");
    return false;
  }
  if(formulario.usuario.value == ''){
    alert("O campo USUÁRIO é obrigatório.");
    return false;
  }
  if(formulario.senha.value == ''){
    alert("O campo SENHA é obrigatório.");
    return false;
  }
  if(formulario.crm.value.length < 4){
    alert("O número do CRM é inválido.");
    return false;
  }
  if(formulario.uf.value.length > 3 || formulario.uf.length <=1){
    alert("O campo UF é inválido.");
    return false;
  }
  if(formulario.cidade.value == ''){
    alert("O número do cidade é inválido.");
    return false;
  }
  return true;
}​ 
```

我还建议添加

```
function isEmail(str) { // http://stackoverflow.com/a/4964763/295783
  return /(.+)@(.+){2,}\.(.+){2,}/.test(str);
} 
```

并且有

```
if(!isEmail(formulario.Email.value)){
  alert("EMAIL invalido.");
  return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T16:30:52.770

重写脚本以使其易于扩展

```
function validar(formulario){
    var checkEmptyString = function(x){
            return x === undefined || x === null || x === '';
        },
        minLen = function(s, i){
            return s.length >= i;
        },
        maxLen = function(s, i){
            return s.length <= i;
        },
        betweenLen = function(s, min, max){
            return s.length >= min && s.length <= max;
        },
        containsChars = function(s, chars){
            var i = 0;
            for( i=0; i<chars.length; i++ ) if(s.indexOf(chars[i]) === -1) return false;
            return true;
        },
        testEmpty = ['nome', 'Email', 'usuario', 'senha', 'cidade'],
        testContain = {'Email': '@.'},
        testMin = {},
        testMax = {'crm':4},
        testBetween = {'uf':[2, 3]},
        i = 0;
    for( i=0; i<testEmpty.length; i++){
        if( checkEmptyString( formulario[ testEmpty[i] ].value ) )
            return alert('O campo '+testEmpty[i].toUpperCase()+' é obrigatório.'),
                   false;
    }
    for( i in testContain ){
        if( false === containsChars( formulario[ i ].value, testContain[i] ) )
            return alert(i.toUpperCase()+' invalido.'),
                   false;
    }
    for( i in testMin ){
        if( false === minLen( formulario[ i ].value, testMin[i] ) )
            return alert('O número do '+i.toUpperCase()+' é invalido.'),
                   false;
    }
    for( i in testMax ){
        if( false === maxLen( formulario[ i ].value, testMax[i] ) )
            return alert('O número do '+i.toUpperCase()+' é invalido.'),
                   false;
    }
    for( i in testBetween ){
        if( false === betweenLen( formulario[ i ].value, testBetween[i][0], testBetween[i][1] ) )
            return alert('O campo '+i.toUpperCase()+' é invalido.'),
                   false;
    }
    return true;
} 
```

我知道这个回复有点晚了

# c# - 如何返回 System.Collections 程序集中的命名空间列表？

> ID：12448390
> 
> 赞同：3
> 
> 时间：2012-09-16T15:59:01.943
> 
> 标签：c#, .net-assembly

此代码在为 System.Collections 调用时不返回任何命名空间。

```
public static List<string> GetAssemblyNamespaces(AssemblyName asmName)
{
  List<string> namespaces = new List<string>();
  Assembly asm = Assembly.Load(asmName);

  foreach (Type typ in asm.GetTypes())
    if (typ.Namespace != null) 
      if (!namespaces.Contains(typ.Namespace))
        namespaces.Add(typ.Namespace);

  return namespaces;
} 
```

这是为什么？System.Collections 中有类型。我能做些什么来获取命名空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:06:47.623

不同的程序集可能包含相同（或子）的命名空间。对于 ex`A.dll`可能包含命名空间`A`并且`B.dll`可能包含`A.B`. 因此，您必须加载*所有*程序集才能找到命名空间。

这可能会奏效，但它仍然存在命名空间可能位于未引用、未使用的程序集中的问题。

```
var assemblies = new List<AssemblyName>(Assembly.GetEntryAssembly().GetReferencedAssemblies());
assemblies.Add(Assembly.GetEntryAssembly().GetName());

var nss = assemblies.Select(name => Assembly.Load(name))
            .SelectMany(asm => asm.GetTypes())
            .Where(type=>type.Namespace!=null)
            .Where(type=>type.Namespace.StartsWith("System.Collections"))
            .Select(type=>type.Namespace)
            .Distinct()
            .ToList(); 
```

例如，如果你运行上面的代码，你不会得到，`System.Collections.MyCollections`因为它是在我的测试代码中定义的`SO.exe`:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T16:15:11.067

```
var namespaces = assembly.GetTypes()
                         .Select(t => t.Namespace)
                         .Distinct(); 
```

通过使用`LINQ`，您可以获得程序集的名称空间。

# iphone - 为什么我的 YouTube 播放列表（显示信息缩略图）在 Iphone 上不可见？

> ID：12448391
> 
> 赞同：1
> 
> 时间：2012-09-16T15:59:02.917
> 
> 标签：iphone, youtube-api

这是网页上嵌入的播放列表：http: [//www.grabtownlife.com/videos.html](http://www.grabtownlife.com/videos.html)。它在桌面浏览器上运行良好，您可以在视频底部看到播放列表缩略图。当您尝试在 Iphone 上查看此页面时，您看不到缩略图。有没有办法让缩略图显示在 Iphone 上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T04:22:26.127

目前没有。一旦/如果对这种东西的支持被添加到 HTML5 <video> 播放器中，它就会自动出现，而无需您做任何不同的事情。但是桌面 Flash 播放器和移动 HTML5 <video> 播放器之间的播放列表功能和 UI 完全对等还很遥远。

# iphone - 故事板和代表

> ID：12448392
> 
> 赞同：1
> 
> 时间：2012-09-16T15:59:09.947
> 
> 标签：iphone, objective-c, uistoryboard

在我的应用程序中，我使用的是故事板，它是这样设置的：

UIViewController -> 推送到 -> UIViewController -> 推送到 -> UIViewController

我已经完成了所有工作，但我不知道如何在 firstViewController 和 thirdViewController 之间进行委托。我已经研究了通常如何使用情节提要（设置destinationView 委托）来完成它，但我不知何故需要设置第三个ViewControllers 委托而不是第二个。因为中间有 ViewController，我不知道这是怎么做到的。任何回应表示赞赏。在此先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T16:11:59.210

您的意思是您希望 VC1 成为 VC2 和 VC3 的代表？

在 VC1 prepareForSegue 中，您可以按照您的建议进行操作：

```
VC2 *myVC2 = segue.destinationViewController;
myVC2.delegate = self; 
```

在 VC2 prepareForSegue 中，你也可以按照你的建议做，只是间接的：

```
VC3 *myVC3 = segue.destinationViewController;
myV3.delegate = self.delegate; 
```

标题将如下所示：

VC1.h

```
@protocol VC23Delegate <NSObject>
- (void)doSomethingForVC2;
- (void)doSomethingForVC3;
@end 
```

VC2.h

```
@protocol VC23Delegate;
@property(weak,nonatomic) id<VC23Delegate> delegate; 
```

VC3.h

```
@property(weak,nonatomic) id<VC23Delegate> delegate; 
```

# ios - 只推送 UITableView

> ID：12448393
> 
> 赞同：0
> 
> 时间：2012-09-16T15:59:11.623
> 
> 标签：ios, uitableview, custom-cell

有没有办法将右侧的 UITableView 推到左侧而不推送整个视图？

![UITableViews](../Images/9d35889ada01a73a9aa3b89ef11350f2.png)
我有一个想法，只是用新数据和另一个数据重新加载表，`CustomCellIdentifier`但我确信有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:39:36.307

您可以用一个框架实例化第二个表格，将其置于屏幕右侧（即轴坐标大于屏幕宽度），然后通过在动画块内将 x 位置设置为 0 将其“滑动”到屏幕上。这似乎会滑入第一个表格的顶部。

如果您希望第一个表格向左滑动，则需要在同一动画块中将其 x 位置设置为负值。

（这假设您是手动创建表，而不是使用`UITableViewControllers`，但是。）

# python - 检索 Python 集中的下一个最小元素

> ID：12448398
> 
> 赞同：5
> 
> 时间：2012-09-16T15:59:56.103
> 
> 标签：python, algorithm, data-structures

[Eratosthenes 筛法](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)是一种相当快的生成素数的方法，其限制`k`如下：

1.  从集合`p = (2, 3, 4, ..., k)`和开始`i = 2`。
2.  从 开始，删除from`i^2`的所有倍数。`i``p`
3.  重复下一个最小`i`的`p`，直到`i >= sqrt(k)`。

我当前的实现看起来像这样（对预过滤所有偶数进行了明显的优化）：

```
# Compute all prime numbers less than k using the Sieve of Eratosthenes
def sieve(k):
    s = set(range(3, k, 2))
    s.add(2)

    for i in range(3, int(sqrt(k)), 2):
        if i in s:
            for j in range(i ** 2, k, i * 2):
                s.discard(j)

    return sorted(s) 
```

**编辑：**这是基于等效`list`的代码：

```
def sieve_list(k):
    s = [True] * k
    s[0] = s[1] = False
    for i in range(4, k, 2):
        s[i] = False

    for i in range(3, int(sqrt(k)) + 2, 2):
        if s[i]:            
            for j in range(i ** 2, k, i * 2):
                s[j] = False

    return [2] + [ i for i in range(3, k, 2) if s[i] ] 
```

这有效，但并不完全正确。这些行：

```
for i in range(3, int(sqrt(k)), 2):
    if i in s:
        [...] 
```

`s`通过测试每个奇数的集合成员关系找到下一个最小元素。理想情况下，实现实际上应该是：

```
while i < sqrt(k):
    [...]
    i = next smallest element in s 
```

但是，由于`set`是无序的，我不知道如何（或者即使可能）以更有效的方式获得下一个最小元素。我考虑过使用`list`带有`True`/`False`标志的素数，但您仍然必须步行`list`寻找下一个`True`元素。您不能只从其中`list`任何一个中实际删除元素，因为这使得在步骤 2 中有效地删除复合数字成为不可能。

有没有办法更有效地找到下一个最小的元素？如果没有，是否有其他数据结构允许`O(1)`按值删除以及找到下一个最小元素的有效方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T16:19:21.420

集合是无序的，因为它们在内部实现为哈希集。在这样的数据结构中没有找到最小元素的有效方法；`min(s)`将是最 Pythonic 的方式（但它是 O(n)）。

您可以将 a`collections.deque` *与*您的套装一起使用。使用`deque`来按排序顺序存储元素列表。每次你需要得到最小值时，弹出元素，`deque`直到你找到你的集合中的一个。这已经在整个输入数组中摊销了 O(1) 成本（因为您只需弹出 n 次）。

我还应该指出，不可能*有*从列表（或 O(1) 插入）创建 O(n)、按值删除 O(1) 和 O(1) 最小查找的数据结构；这样的数据结构可以用来简单地实现 O(n) 的一般排序，这是（信息论的）不可能的。哈希集非常接近，但必须牺牲有效的最小查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T16:01:49.213

您可以使用列表代替集合。使用 None 初始化列表以表示未标记。您可以使用元素索引作为数字。

1.  初始化列表
2.  从 p = 2 开始
3.  `p`用'M'标记列表中的所有倍数以表示标记
4.  在列表中找到下一个未标记的元素并将其设为新的`p`. 如果没有，你就完成了。

如果您需要找到下一个未标记的索引，您可以简单地查看索引之后的元素`p`并且等于无。

# python - 在python中删除句子末尾的句点

> ID：12448401
> 
> 赞同：4
> 
> 时间：2012-09-16T16:00:34.480
> 
> 标签：python, regex, sentence

我有这样的句子——“这是一个测试。4.55 和 5,000。” 我想删除句子末尾的句点，而不是数字之间的句点。我的输出必须是 - “这是一个测试 4.55 和 5,000” 我尝试了以下选项，但没有得到所需的输出：

```
wordList = "this is a test. 4.55 and 5,000."
pattern3 = re.compile("[^\w\d]+")
wordList = pattern3.sub(' ',wordList) 
```

还尝试了以下2：

```
pattern3 = re.compile("[^\w]|^[0-9]\.[0-9]")
pattern3 = re.compile("[^\w]|^([0-9]/.[0-9]+)") 
```

我不知道我哪里错了。有人可以给我一些指示吗？我搜索了早期的帖子并尝试了它们，但它们不适用于我的情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T16:02:18.730

尝试否定前瞻：

```
\.(?!\d) 
```

这匹配的是任何不带数字的句点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-16T16:10:26.797

在正则表达式中，`$`特殊字符[“[匹配]字符串的结尾或字符串结尾的换行符之前”](http://docs.python.org/library/re.html)

在这种情况下，假设每行只有一个句子，我建议如下：

```
\.$ 
```

这将仅匹配出现在字符串末尾（或多行字符串的行尾）的句点。当然，如果您不能保证每行一个句子，那么它们不是您的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T16:02:38.393

怎么样

```
pattern = re.compile(r'\.(\s)')
wordList = pattern.sub(r'\1', wordList) 
```

这会用空格替换句点后跟空格。

# r - R中非标准分布曲线下的阴影

> ID：12448404
> 
> 赞同：2
> 
> 时间：2012-09-16T16:01:14.113
> 
> 标签：r, distribution

X ~ N(mu, 3*sigma^2)

Y ~ N(mu,sigma^2)

我试图以图形方式证明 P[ |X-mu| < sigma ] < P[ |Y-mu| < sigma ]（即蓝色曲线下面积小于红色曲线下面积0到sigma之间）

我创建了 |X-mu| 的 pdf 和 |Y-mu| 使用以下代码，我让 mu=0 和 sigma=1：

```
x<-seq(-10,10,length=10000000)

y1<-rnorm(x,mean=0,sd=sqrt(3))
y2<-rnorm(x,mean=0,sd=1)

absy1<-abs(y1-mean(y1))
absy2<-abs(y2-mean(y2))

plot(density(absy2), type="l", axes=FALSE, xlab = "", ylab = "", main="", col="red")
lines(density(absy1), col="blue")

abline(v=1,lty=2,col="black")

text(3.5,0.18,expression(abs(N(mu,3 * sigma^2)-mu)), col="blue")
text(1.5,0.48,expression(abs(N(mu,sigma^2)-mu)), col="red")
axis(1,at=0,labels=0, line=-1)
axis(1,at=1,labels=expression(sigma), line=-1) 
```

这是我尝试使用的上述代码生成的图像的链接：

![https://lh3.googleusercontent.com/-wYtqZpKfkQs/UFXzvAdB1WI/AAAAAAAAACU/W9bXfk-ghew/s371-pk/HW2problem2graph-iv.jpg](../Images/7ab4ab6f0f5e0bdcc335ad41fa5d7852.png)

**我想在 0 和 sigma 之间对每条曲线下的区域进行着色。**

为了遮蔽其他正态分布曲线，我一直在使用类似下面的线，但我不能用它来解决这个问题（或者我不知道如何）。

```
polygon(c(0,xred,10),c(0,yred,0),col="mistyrose", border=NA) 
```

非常感谢您的帮助！另外，如果有更好的绘制曲线的方法，请指教！（这是我学习 R 的第二天，所以请尽量说清楚！）谢谢。

**解决方案 - 感谢@DWin**

```
x<-seq(-10,10,length=10000000)

y1<-rnorm(x,mean=0,sd=sqrt(3))
y2<-rnorm(x,mean=0,sd=1)

absy1<-abs(y1-mean(y1))
absy2<-abs(y2-mean(y2))

plot(den2 <-density(absy2), type="l", axes=FALSE, xlab = "", ylab = "", main="", col="red")
with(den2, polygon(x=c(0, x[x < 1], rev(x[x<1]), 0), y=c(0, 0*x[x < 1], rev(y[x<1]), 0), col="mistyrose", border=NA))

lines(den1 <-density(absy1), col="blue")
with(den1, polygon(x=c(0, x[x < 1], rev(x[x<1]), 0), y=c(0, 0*x[x < 1], rev(y[x<1]), 0), col="aliceblue", border=NA))

abline(v=1,lty=2,col="black")

text(3.5,0.18,expression(abs(N(mu,3 * sigma^2)-mu)), col="blue")
text(1.75,0.48,expression(abs(N(mu,sigma^2)-mu)), col="red")
axis(1,at=0,labels=0, line=-1)
axis(1,at=1,labels=expression(sigma), line=-1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T16:37:20.170

密度函数会产生绘制图形的副作用，但它也会返回一个包含命名为“x”和“y”组件的列表，因此您需要将其保存为命名对象（我将其命名为“den1”）并工作与那些组件。由于您的密度图中有一些“斜率”，您可能想查看 ISTR 具有接受约束的密度函数的“logspline”包。

因此，请将此作为您的初始绘图策略::

```
plot(den2 <-density(absy2), type="l", axes=FALSE, xlab = "", ylab = "", main="", col="red")
lines(den1 <-density(absy1), col="blue") 
```

然后添加彩色多边形（在这种情况下，'sigma' 为 1）：

```
with( den1, polygon(x=c(0, x[x < 1],   rev(x[x<1]), 0), 
                    y=c(0, 0*x[x < 1], rev(y[x<1]), 0), col="red") ) 
```

分解为 4 个组件，您以 [0,0] 为起点勾勒该区域，然后沿 x 轴绘制到 [sigma,0]，然后将垂直线绘制到 [sigma, density(sigma)]，然后沿着密度曲线并在 [0,0] 处关闭。

![在此处输入图像描述](../Images/110d6437fc48b0f1e75a00673584592a.png)

# freebase - 使用 MQL 在 Freebase 中查找属性描述

> ID：12448410
> 
> 赞同：1
> 
> 时间：2012-09-16T16:02:30.713
> 
> 标签：freebase, mql

我越来越疯狂地试图获取属性描述，我的意思是出现在模式中的那些......

1）文本服务没有找到属性描述： [https ://www.googleapis.com/freebase/v1/text/people/person/profession](https://www.googleapis.com/freebase/v1/text/people/person/profession)

2) 属性不包括 /common/topic 所以他们没有 /common/topic/description？！我对吗？

3） /freebase/property_hint （或其他东西......）不适用于描述......

谢谢卢卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T15:44:24.757

属性描述的文本存储在 /freebase/documented_object/tip 中。您可以[像这样](http://www.freebase.com/queryeditor?q=%7B%22id%22%3a%22/people/person/profession%22,%22/freebase/documented_object/tip%22%3anull%7D)查询它：

```
{
  "id": "/people/person/profession",
  "/freebase/documented_object/tip": null
}​ 
```

为了解决这些问题，我经常发现滚动浏览原始 Freebase 三元组对于这样的主题很有用：

[http://dev.freebase.com/people/person/profession?links](http://dev.freebase.com/people/person/profession?links)

在那里您可以看到架构和数据之间的直接关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T21:55:35.450

只需使用带有属性 ID 的文本 API，例如[https://www.googleapis.com/freebase/v1/text/type/property](https://www.googleapis.com/freebase/v1/text/type/property)

顺便说一句，对象不需要具有特定类型具有该类型的属性，例如，如果您要查看 /type/property 对象，您会发现它确实具有您可以遵循 /common/topic/article 属性最终引导至文本 blob，但使用文本 API 更容易。

# c# - 从 C# 连接到 SQL Server 的异常

> ID：12448413
> 
> 赞同：0
> 
> 时间：2012-09-16T16:02:59.387
> 
> 标签：c#, sql-server, exception-handling, ado.net

我正在使用 c sharp 和 ms sql sever 2008 开发一个简单的数据库项目，但在编译程序时出现错误，它弹出此消息：

> “StudentsInformationSystem.DB_conection”的类型初始化程序引发异常

我的代码：

```
namespace StudentsInformationSystem
{
    class DB_Access
    {
        private SqlConnection conn;

        public DB_Access()
        {
            conn = DB_conection.GetConnection(); //this is where i am getting the error on this line of code

        }

       public void add_student(string regNo,string fname, string lname, string phoneNo)
       {
            if (conn.State.ToString() == "closed")
            {
                conn.Open();
            }

            SqlCommand newCmd = conn.CreateCommand();
            newCmd.Connection = conn;
            newCmd.CommandType = CommandType.Text;
            newCmd.CommandText = "insert into student values('" + regNo + "','" + fname + "','" + lname + "','" + phoneNo + "')";
            newCmd.ExecuteNonQuery();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T16:09:35.517

除了 SQL 注入问题，您的问题可能来自将 ConnectionState 与字符串进行比较。

```
/* this will never be true because "closed" is not equal to "Closed" */
if (conn.State.ToString() == "closed")
{
   conn.Open();
} 
```

... 应该：

```
if (conn.State == ConnectionState.Closed)
{
    conn.Open();
} 
```

您还应该使连接尽可能接近其使用情况，并且*永远不要*将其存储为类级变量。

```
using (var conn = DB_conection.GetConnection())
using (var cmd = conn.CreateCommand())
{
    // use conn & cmd

    // they will be closed & disposed of when they leave this block
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T19:56:27.733

我不知道你现在是否已经解决了这个问题，但如果你写的应用程序来自 youtube 用户教程，

问题出在您最初编写的 app.confing xml [http://www.youtube.com/watch?list=UL53a-mKN01jQ&v=53a-mKN01jQ&feature=player_detailpage#t=479s](http://www.youtube.com/watch?list=UL53a-mKN01jQ&v=53a-mKN01jQ&feature=player_detailpage#t=479s)

删除`<configSections></configSections>and leave <connectionStrings><add ..</connection Strings>`它应该可以工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T16:28:47.407

假设你的没有问题`DB_conection`（你没有分享它的细节）

代码中的一些改进

```
public void add_student(string regNo,string fname, string lname, string phoneNo)
{
     if (conn.State == ConnectionSate.Closed)          
            conn.Open();         
     SqlCommand newCmd = conn.CreateCommand();
     newCmd.CommandText = "insert into student values('" + regNo + "','" + fname + "','" + lname + "','" + phoneNo + "')";
     newCmd.ExecuteNonQuery();
} 
```

为了快速访问数据库，我建议不要在每次查询后关闭连接，您已经在这样做了。但是，在使用数据阅读器后，您应该关闭数据阅读器，否则可能会导致一些错误

//newCmd.Connection = conn; 无需您在上述声明中执行此操作

//newCmd.CommandType = CommandType.Text; 不需要，默认

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T16:34:51.913

`Type initializer for [class name] threw an exception.`

这表明在类的静态构造函数中引发了异常。您需要检查 class 的静态构造函数`DB_conection`。它的代码将在`GetConnection`您显示的代码中的静态方法调用之前执行。

如果您在调试器中运行代码，我确信异常的来源将是显而易见的。

# python - __init__ 中的“此构造函数不接受任何参数”错误

> ID：12448414
> 
> 赞同：35
> 
> 时间：2012-09-16T16:03:13.243
> 
> 标签：python, python-3.x

运行以下代码时出现错误：

```
class Person:
  def _init_(self, name):
    self.name = name

  def hello(self):
    print 'Initialising the object with its name ', self.name

p = Person('Constructor')
p.hello() 
```

输出是：

```
Traceback (most recent call last):  
  File "./class_init.py", line 11, in <module>  
    p = Person('Harry')  
TypeError: this constructor takes no arguments 
```

有什么问题？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-09-16T16:05:12.757

该方法应命名`__init__`为构造函数，而不是`_init_`. （注意双下划线。）

如果您使用单下划线，您只需创建一个名为 的方法`_init_`，并获得一个不带参数的默认构造函数。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-16T16:05:07.237

对 .使用双下划线`__init__`。

```
class Person:
  def __init__(self, name): 
```

（Python 中的所有[特殊方法](http://docs.python.org/reference/datamodel.html#object.__init__)都以双下划线而不是单下划线开头和结尾。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-08-18T14:46:35.733

您应该使用双下划线 ( `__init__`)（**Dunder 或 python 中的魔术方法**）来声明 python 构造函数。

**[基本定制：](https://docs.python.org/3/reference/datamodel.html#object.__init__)**

`__init__`在实例创建后调用`__new__`并用于自定义创建的对象。

> 在创建实例之后（通过**new** ()）调用，但在它返回给调用者之前。参数是传递给类构造函数表达式的参数。如果基类有**init** () 方法，则派生类的**init** () 方法（如果有）必须显式调用它以确保正确初始化实例的基类部分；例如：超级（）。**初始化**（[参数...]）。

> 因为**new** () 和**init** () 在构造对象时协同工作（**new** () 创建它，**init () 自定义它），所以****init** ()不能返回非 None 值；这样做会导致在运行时引发 TypeError。

我们在 python 中有两种类型的**构造函数：**

*   **默认构造函数：**不声明参数化构造函数时使用。它的定义只有一个参数，它是对正在构造的实例的引用（又名`self`）。

```
def __init__(self):
    # default constructor 
```

*   **参数化构造函数：**除了参数之外，它还接受其他`self`参数。

```
def __init__(self, parameters):
    # parameterized constructor 
```

如果您不声明参数化构造函数，python 将使用不带任何参数的默认构造函数。因此，您将参数传递给默认构造函数并且已引发异常。

**如何解决？**

只需声明一个参数化构造函数，您可以通过它实例化您的实例。

**Python3：**

```
class Person:
    def __init__(self, name):
        self.name = name 
```

# java - 具有多种操作的 Java 计算器

> ID：12448417
> 
> 赞同：4
> 
> 时间：2012-09-16T16:03:38.800
> 
> 标签：java, math, calculator, equation-solving

到目前为止，我有以下工作正常。我确信可能有一种更简单的方法可以做到这一点，但我需要改变/改变的是 Matheq 的顶级方法。Math 方法执行单个数学运算。

它适用于 +、-、* 和 / 的任何单个操作。

我的问题是求解一个更大的方程，例如 10 - 10 / 5 + 3。但是它确实可以正确求解 10 / 5 + 65 * 2。原因是每个部分，数字和操作，都被拆分为一个字符串数组。每次操作完成后，数字和操作将替换为该等式的结果。可能看起来更混乱，但我想不出更好的方法。它无法解决其他方程的原因是因为我如何将字符串映射回字符串数组。

字符串数组示例 Ex. 与 10 - 10 / 5 + 3 String = { 10, -, 10, /, 5, +, 3 } 运算后先除法然后从左到右减法然后加法 String = { 8, 8, 2, 2, 2, 5, 5 }

这是我的代码，请有人帮助我：

***REVISED*** 已修改，现在它可以与上面一起使用，但对于 LONG 方程仍然存在一些问题。一个简短的例子是它可以很好地解决 2 * 2 * 2 * 2 除以 5 但如果将其更改为 10 - 2 * 2 * 2 * 2 除以 5 我会得到错误的答案。

```
 public class Matheq {

String fnum = null;
String lnum = null;
String total = null;

public String Matheq(String mathoperation) {

    String mathoperation= "6 * 3 - 4 * 2";

    mathoperation = mathoperation.replaceAll(",", "");
    mathoperation = mathoperation.replaceAll("plus", "+");
    mathoperation = mathoperation.replaceAll("minus", "-");
    mathoperation = mathoperation.replaceAll("times", "*");
    mathoperation = mathoperation.replaceAll("divided by", "dividedby");
    mathoperation = mathoperation.replaceAll("percent of", "percentof");
    String[] splitstr = mathoperation.split(" ");
    while(splitstr.length>1){
    for(int i=0; i<splitstr.length; i++) {
        System.out.println("Get value: " + splitstr[i]);
        if(splitstr[i].indexOf("percentof") >= 0) {
        String buildit = splitstr[i-1] + " percent of " + splitstr[i+1];
        String done = math(buildit);
        System.out.println("Percentage operation: " + splitstr[i-1] + " percent of " + splitstr[i+1] + "=" + done);
        splitstr[i] = done;
        splitstr[i-1] = "";
        splitstr[i+1] = "";
        ArrayList<String> list = new ArrayList<String>();
        for(String s : splitstr){
            if(!s.equals("")){
                list.add(s);
            }
        }
        splitstr = list.toArray(new String[list.size()]);
        }
    }
    for(int i=0; i<splitstr.length; i++) {
        System.out.println("Get value: " + splitstr[i]);
        if(splitstr[i].indexOf("dividedby") >= 0) {
            String buildit = splitstr[i-1] + " divided by " + splitstr[i+1];
            String done = math(buildit);
            System.out.println("Division operation: " + splitstr[i-1] + " divided by " + splitstr[i+1] + "=" + done);
            splitstr[i] = done;
            splitstr[i-1] = "";
            splitstr[i+1] = "";
            ArrayList<String> list = new ArrayList<String>();
            for(String s : splitstr){
                if(!s.equals("")){
                    list.add(s);
                }
            }
            splitstr = list.toArray(new String[list.size()]);
        }
    }
    for(int i=0; i<splitstr.length; i++) {
        System.out.println("Get value: " + splitstr[i]);
        if(splitstr[i].indexOf("*") >= 0) {
            String buildit = splitstr[i-1] + " * " + splitstr[i+1];
            String done = math(buildit);
            System.out.println("Multiplication operation: "+ splitstr[i-1] + " * " + splitstr[i+1] + "=" + done);
            splitstr[i] = done;
            splitstr[i-1] = "";
            splitstr[i+1] = "";
            ArrayList<String> list = new ArrayList<String>();
            for(String s : splitstr){
                if(!s.equals("")){
                    list.add(s);
                }
            }
            splitstr = list.toArray(new String[list.size()]);
        }
    }
    for(int i=0; i<splitstr.length; i++) {
            System.out.println("Get value: " + splitstr[i]);
        if(splitstr[i].indexOf("+") >= 0) {
            String buildit = splitstr[i-1] + " + " + splitstr[i+1];
            String done = math(buildit);
            System.out.println("Addition operation: " + splitstr[i-1] + " + " + splitstr[i+1] + "=" + done);
            splitstr[i] = done;
            splitstr[i-1] = "";
            splitstr[i+1] = "";
            ArrayList<String> list = new ArrayList<String>();
            for(String s : splitstr){
                if(!s.equals("")){
                    list.add(s);
                }
            }
            splitstr = list.toArray(new String[list.size()]);
        }
    }
        for(int i=0; i<splitstr.length; i++) {
            System.out.println("Get value: " + splitstr[i]);
            if(splitstr[i].indexOf("-") >= 0) {
            String buildit = splitstr[i-1] + " - " + splitstr[i+1];
            String done = math(buildit);
            System.out.println("Subtraction operation: " + splitstr[i-1] + " - " + splitstr[i+1] + "=" + done);
            splitstr[i] = done;
            splitstr[i-1] = "";
            splitstr[i+1] = "";
            ArrayList<String> list = new ArrayList<String>();
            for(String s : splitstr){
                if(!s.equals("")){
                    list.add(s);
                }
            }
            splitstr = list.toArray(new String[list.size()]);
        }   
    }
    for(int i=0; i<splitstr.length; i++) {  
        System.out.println("Final operation: " + total + " " + splitstr[i]);
    }
    }
    return total;

}

private String math(String mathoperation) {
    // TODO Auto-generated method stub
    if(mathoperation.contains("percent of")){
        mathoperation = mathoperation.replaceAll("percent of", "%");
        int str = mathoperation.indexOf("%");
        System.out.println(str);
        fnum = mathoperation.substring(0, str-1);
        fnum = fnum.replaceAll(" ", "");
        fnum = "." + fnum;
        System.out.println(fnum);
        double intfnum = Double.parseDouble(fnum);
        System.out.println(intfnum);
        int lastind = mathoperation.length();
        System.out.println(lastind);
        lnum = mathoperation.substring(str+1, lastind);
        lnum = lnum.replaceAll(" ", "");
        System.out.println(lnum);
        double intlnum = Double.parseDouble(lnum);
        System.out.println(intlnum);
        double tot = intlnum * intfnum;
        System.out.println(tot);
        total = Double.toString(tot);
        if(total.length() == 3){
            total = total + "0";
        }
        if(total.length() > 5){
            total = total.substring(0, 4);
        }
        total = total.replace("0.", "");
        System.out.println("Total:" + total);
        } else 
    if(mathoperation.contains("-")){
        int str = mathoperation.indexOf("-");
        System.out.println(str);
        fnum = mathoperation.substring(0, str-1);
        fnum = fnum.replaceAll(" ", "");
        System.out.println(fnum);
        double intfnum = Double.parseDouble(fnum);
        System.out.println(intfnum);
        int lastind = mathoperation.length();
        System.out.println(lastind);
        lnum = mathoperation.substring(str+1, lastind);
        lnum = lnum.replaceAll(" ", "");
        System.out.println(lnum);
        double intlnum = Double.parseDouble(lnum);
        System.out.println(intlnum);
        double tot = intfnum - intlnum; 
        System.out.println(tot);
        total = Double.toString(tot);
        System.out.println(total);
        } else 
    if(mathoperation.contains("+")){
        int str = mathoperation.indexOf("+");
        System.out.println(str);
        fnum = mathoperation.substring(0, str-1);
        fnum = fnum.replaceAll(" ", "");
        System.out.println(fnum);
        double intfnum = Double.parseDouble(fnum);
        System.out.println(intfnum);
        int lastind = mathoperation.length();
        System.out.println(lastind);
        lnum = mathoperation.substring(str+1, lastind);
        lnum = lnum.replaceAll(" ", "");
        System.out.println(lnum);
        double intlnum = Double.parseDouble(lnum);
        System.out.println(intlnum);
        double tot = intfnum + intlnum; 
        System.out.println(tot);
        total = Double.toString(tot);
        System.out.println(total);
        } else 
    if(mathoperation.contains("*")){
    int str = mathoperation.indexOf("*");
    System.out.println(str);
    fnum = mathoperation.substring(0, str-1);
    fnum = fnum.replaceAll(" ", "");
    System.out.println(fnum);
    double intfnum = Double.parseDouble(fnum);
    System.out.println(intfnum);
    int lastind = mathoperation.length();
    System.out.println(lastind);
    lnum = mathoperation.substring(str+1, lastind);
    lnum = lnum.replaceAll(" ", "");
    System.out.println(lnum);
    double intlnum = Double.parseDouble(lnum);
    System.out.println(intlnum);
    double tot = intfnum * intlnum; 
    System.out.println(tot);
    total = Double.toString(tot);
    System.out.println(total);
    } else
    if(mathoperation.contains("divided by")){
    mathoperation = mathoperation.replaceAll("divided by", "/");
    int str = mathoperation.indexOf("/");
    System.out.println(str);
    fnum = mathoperation.substring(0, str-1);
    fnum = fnum.replaceAll(" ", "");
    System.out.println(fnum);
    double intfnum = Double.parseDouble(fnum);
    System.out.println(intfnum);
    int lastind = mathoperation.length();
    System.out.println(lastind);
    lnum = mathoperation.substring(str+1, lastind);
    lnum = lnum.replaceAll(" ", "");
    System.out.println(lnum);
    double intlnum = Double.parseDouble(lnum);
    System.out.println(intlnum);
    double tot = intfnum / intlnum; 
    System.out.println(tot);
    total = Double.toString(tot);
    System.out.println(total);
    } else {
        total = null;
    }
    return total;
}

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-16T16:19:45.297

数组是表示解析方程的错误结构。您需要有一个可以表示运算符优先级的结构。处理这类问题的典型机制是[抽象语法树](http://en.wikipedia.org/wiki/Abstract_syntax_tree)。对于您的 10 - 10 / 5 + 3 示例，您可能希望构建一个如下所示的树：

```
 <result>
  /   \
 '-' '+'
 / \ / \
10 '/'  3
   / \
  10  5 
```

使用这种具有高优先级运算符的结构在树的下方，您可以执行自下而上的评估以获得正确的结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-10T11:29:12.177

您所要做的就是将前缀输入转换为后缀格式。然后，您可以使用堆栈轻松完成魔术。我已经使用命令模式编写了一个完整的解决方案。

将中缀转换为后缀的方法

```
 public static List<String> infixToPostfixConvert(String input) {

    int priority = 0;
    String postfixBuffer = "";
    Stack<Character> stack = new Stack<Character>();
    List<String> postfixArray = new ArrayList<String>();

    for (int i = 0; i < input.length(); i++) {
        char ch = input.charAt(i);
        if (ch == '+' || ch == '-' || ch == '*' || ch == '/') {

            if (postfixBuffer.length() > 0) {
                postfixArray.add(postfixBuffer);
            }
            postfixBuffer = "";
            // check the precedence
            if (stack.size() <= 0)
                stack.push(ch);
            else {
                Character chTop = (Character) stack.peek();
                if (chTop == '*' || chTop == '/')
                    priority = 1;
                else
                    priority = 0;
                if (priority == 1) {
                    if (ch == '+' || ch == '-') {
                        postfixArray.add(String.valueOf(stack.pop()));
                        i--;
                    } else { // Same
                        postfixArray.add(String.valueOf(stack.pop()));
                        i--;
                    }
                } else {
                    if (ch == '+' || ch == '-') {
                        postfixArray.add(String.valueOf(stack.pop()));
                        stack.push(ch);
                    } else
                        stack.push(ch);
                }
            }
        } else {
            postfixBuffer += ch;
        }
    }
    postfixArray.add(postfixBuffer);
    int len = stack.size();
    for (int j = 0; j < len; j++)
        postfixArray.add(stack.pop().toString());

    return postfixArray;
} 
```

然后我有另一种使用计算器实例并传递后缀字符串的方法。

```
 public void calculate(Calculator cal, List<String> postFix) {

    Stack<BigDecimal> stack = new Stack<BigDecimal>();

    for ( int i = 0; i < postFix.size(); i++ ) {

        String next = postFix.get(i);

        if (next.equals("+") || next.equals("-") || next.equals("*")
                || next.equals("/")) {
            ArithmaticCalculatorCommand cmd = new ArithmaticCalculatorCommand(
                    next.charAt(0), stack.pop(), stack.pop(), cal);
            Invoker invoker = new Invoker();
            invoker.compute(cmd);
            stack.push(cal.getCurrent());
        } else if ( false ){

        }
        else
        {
            stack.push(new BigDecimal(next.trim()));
        }
    }
} 
```

# 完成实施

命令接口

```
package org.sanjaya;
public interface Command {

    public void calculate();
} 
```

命令实现

```
package org.sanjaya.impl;

import java.math.BigDecimal;

import org.sanjaya.Command;

public class ArithmaticCalculatorCommand implements Command {

    private char operator;
    private BigDecimal leftOperand;
    private BigDecimal rightOperand;
    private Calculator calculator;

    public ArithmaticCalculatorCommand( char operator, BigDecimal leftOperand, BigDecimal rightOperand, Calculator calculator ) {
        this.leftOperand = leftOperand;
        this.rightOperand = rightOperand;
        this.operator = operator;
        this.calculator = calculator;
    }

    /*
     * This method invoke the three argument operation method that is only used for arithmetic calculations.
     * @param operator
     * @param leftOperand
     * @param rightOperand   * 
     * @see org.sanjaya.Command#calculate()
     */
    public void calculate() {
        calculator.operation( operator, leftOperand, rightOperand );        
    }   
} 
```

计算器类（接收者）

```
package org.sanjaya.impl;

import java.math.BigDecimal;

public class Calculator {

    private static Calculator calculator;   
    private BigDecimal current = new BigDecimal( 0 );

    private Calculator()
    {

    }

    public static Calculator getInstance()
    {
        if ( calculator == null )
        {
            calculator = new Calculator();
        }
        return calculator;
    }

    /*
     * This method calculate current value for any number of calculation operations.
     * Currently following operations are supported
     * +,-,*,/
     * 
     * @param operator
     * @param leftOperand
     * @param rightOperand
     *  
     */
    public void operation( char operator, BigDecimal leftOperand, BigDecimal rightOperand )
    {       
        switch ( operator )
        {
        case '+':
            current = leftOperand.add( rightOperand );
            break;
        case '-':
            current = rightOperand.subtract( leftOperand );
            break;
        case '/':
            current = rightOperand.divide(leftOperand);
            break;
        case '*':
            current = leftOperand.multiply( rightOperand );
            break;
        default:
            break;
        }       
    }

    public BigDecimal getCurrent() {
        return current;
    }

    public void setCurrent(BigDecimal current) {
        this.current = current;
    }

} 
```

调用者类

```
package org.sanjaya.impl;

import java.math.BigDecimal;

import org.sanjaya.Command;
public class Invoker {

    public void compute( Command command )
    {
        command.calculate();
    }   
} 
```

客户端类

```
package org.sanjaya.impl;

import java.math.BigDecimal;
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;
import java.util.Stack;
import java.util.logging.Logger;
public class CalculatorParser {

    public static Logger logger = Logger.getLogger( "Calculator_Logger" );

    public static void main( String a [] )
    {
        new CalculatorParser().start();
    }

    /*
     * This is the starting point of the program. It receives input from the command line 
     * and process them further and sends to calculate function. At the end this method 
     * displays the calculated result.
     */
    public void start()
    {
        Scanner scanner = new Scanner( System.in );
        logger.info("\n\t Please input expression to calculate::");

        String line = scanner.nextLine();
        List<String> postfixString = CalculatorParser.infixToPostfixConvert( line );
        Calculator calculator = Calculator.getInstance();
        calculator.setCurrent( new BigDecimal( 0 ) );

        calculate( calculator, postfixString );

        logger.info("Result is " + calculator.getCurrent() );
    }

    /*
     * This method keeps a stack to process postfix version of the input and execute the right command implementation.
     * Currently this method supports for arithmetic command calculations only.
     * @param Cal
     * @param postFix
     */
    public void calculate(Calculator cal, List<String> postFix) {

        Stack<BigDecimal> stack = new Stack<BigDecimal>();

        for ( int i = 0; i < postFix.size(); i++ ) {

            String next = postFix.get(i);

            if (next.equals("+") || next.equals("-") || next.equals("*")
                    || next.equals("/")) {
                ArithmaticCalculatorCommand cmd = new ArithmaticCalculatorCommand(
                        next.charAt(0), stack.pop(), stack.pop(), cal);
                Invoker invoker = new Invoker();
                invoker.compute(cmd);
                stack.push(cal.getCurrent());
            } else if ( false ){

            }
            else
            {
                stack.push(new BigDecimal(next.trim()));
            }
        }
    }

    /*
     * This method convert the infix into postfix in order to proceed in the calculation.
     * @param input 
     */
    public static List<String> infixToPostfixConvert(String input) {

        int priority = 0;
        String postfixBuffer = "";
        Stack<Character> stack = new Stack<Character>();
        List<String> postfixArray = new ArrayList<String>();

        for (int i = 0; i < input.length(); i++) {
            char ch = input.charAt(i);
            if (ch == '+' || ch == '-' || ch == '*' || ch == '/') {

                if (postfixBuffer.length() > 0) {
                    postfixArray.add(postfixBuffer);
                }
                postfixBuffer = "";
                // check the precedence
                if (stack.size() <= 0)
                    stack.push(ch);
                else {
                    Character chTop = (Character) stack.peek();
                    if (chTop == '*' || chTop == '/')
                        priority = 1;
                    else
                        priority = 0;
                    if (priority == 1) {
                        if (ch == '+' || ch == '-') {
                            postfixArray.add(String.valueOf(stack.pop()));
                            i--;
                        } else { // Same
                            postfixArray.add(String.valueOf(stack.pop()));
                            i--;
                        }
                    } else {
                        if (ch == '+' || ch == '-') {
                            postfixArray.add(String.valueOf(stack.pop()));
                            stack.push(ch);
                        } else
                            stack.push(ch);
                    }
                }
            } else {
                postfixBuffer += ch;
            }
        }
        postfixArray.add(postfixBuffer);
        int len = stack.size();
        for (int j = 0; j < len; j++)
            postfixArray.add(stack.pop().toString());

        return postfixArray;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-27T22:40:25.747

```
// this calculator class can calculate numbers with multiple operators

package com.jhunrel25.calculator;

import java.math.*;
import java.util.*;

class Calculator {
    private static String stringParameter;

    Calculator(String calculateStringParameter) {
    stringParameter =
        calculateStringParameter.
        replaceAll("(?<=[\\d])(?=[*/+-])", " ").
        replaceAll("(?<=[*/+-])(?=[\\d])", " ");
}
public static String results() {

    Scanner scanner = new Scanner(stringParameter);

    LinkedList<String> data = new LinkedList<String>();
    while (scanner.hasNext()) {
        data.add(scanner.next());
    }
    do {

        // multiplication
        if (data.get(1).equals("*")) {

            BigDecimal x = new BigDecimal(data.get(0));
            BigDecimal y = new BigDecimal(data.get(2));

            data.set(0, (x.multiply(y).toString()));
            data.remove(1);
            data.remove(1);

            // division
        } else if (data.get(1).equals("/")) {

            BigDecimal x = new BigDecimal(data.get(0));
            BigDecimal y = new BigDecimal(data.get(2));

            if (Double.parseDouble(data.get(0)) < 1 || Double.parseDouble(data.get(2)) < 1) {
                return "Divided by 0 Situation.";

            } else if (Double.parseDouble(data.get(0)) < Double.parseDouble(data.get(2))) {
                return "Dividend must be larger than Divisor.";

            } else {

                data.set(0, (x.divide(y).toString()));
                data.remove(1);
                data.remove(1);
            }

            // addition
        } else if (data.get(1).equals("+")) {

            BigDecimal x = new BigDecimal(data.get(0));
            BigDecimal y = new BigDecimal(data.get(2));

            data.set(0, (x.add(y).toString()));
            data.remove(1);
            data.remove(1);

            // subtraction
        } else if (data.get(1).equals("-")) {

            BigDecimal x = new BigDecimal(data.get(0));
            BigDecimal y = new BigDecimal(data.get(2));

            data.set(0, (x.subtract(y).toString()));
            data.remove(1);
            data.remove(1);
        }

    } while (data.size() != 1);
    return data.get(0);
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-22T22:29:28.370

我没有让点工作，那是另一天。

在`main`或`launch`让按钮将它们的文本发送到我们的buttonHandler。

```
buttons.get(i).setOnAction(ev -> buttonHandler(text)) 
```

在方法中：

*   如果该文本是一个数字，只需附加它。
*   如果它是运算符，则将其添加到堆栈中。
*   如果堆栈上有 * 或 / 则执行计算并将新数字添加到堆栈中。
*   最后只有 + 和 - 在堆栈上
*   计算结果。

编码：

```
private void buttonHandler(String buttonValue) {
    String newInput = tfInput.getText();

    switch (buttonValue) {
        default:
            // If a previous calculation was made, reset input.
            if (lastOperator.equals("=")) {
                lInput.setText("");
                tfInput.setText(buttonValue);

            // else append the new input.
            } else {
                tfInput.appendText(buttonValue);
            }
            break;
        case " ":
            break;
        case ".":
            if(!input.contains(".")) {
                tfInput.appendText(buttonValue);
            }
            break;
        case "DEL":
            try {
                tfInput.setText("" + newInput.substring(0, tfInput.getText().length() - 1));
            } catch (Exception ex) { }
            break;

        // Operators
        case "x":
        case "/":
        case "+":
        case "-":
        case "=":

            if (newInput.length() > 0) {
                lInput.setText(lInput.getText() + newInput + " " + buttonValue + " ");

                try {
                    // If the previous operator has priority, make a calculation and push to stack
                    if (!input.empty()) {
                        if (input.peek().equals("x")) {
                            input.pop();
                            newInput = new BigDecimal(input.pop()).multiply(new BigDecimal(newInput)).toString();
                        } else if (input.peek().equals("/")) {
                            input.pop();
                            newInput = new BigDecimal(input.pop()).divide(new BigDecimal(newInput), 3, RoundingMode.HALF_UP).stripTrailingZeros().toString();
                            System.out.println(newInput);
                        }
                    }
                } catch (Exception ex) {
                    System.out.println("something is this part went wrong");
                }

                // If the "=" wasn't pressed, add input to the stack and set the textfield empty.
                if (!buttonValue.equals("=")) {
                    // Push to stack and empty input.
                    input.push(newInput);
                    input.push(buttonValue);
                    tfInput.setText("");

                // The button is "=". Prepare for final calculation
                } else {
                    if(!input.empty()) {
                        try {
                            // Reverse items.
                            Stack<String> stack = new Stack<>();
                            stack.push(newInput);
                            while (!input.empty()) {
                                stack.push(input.pop());
                            }

                            // Perform final calculation.
                            while (!stack.empty()) {
                                String firstNumber = stack.pop();
                                if (stack.peek().equals("+")) {
                                    stack.pop();
                                    newInput = new BigDecimal(firstNumber).add(new BigDecimal(stack.pop())).toString();
                                } else if (stack.peek().equals("-")) {
                                    stack.pop();
                                    newInput = new BigDecimal(firstNumber).subtract(new BigDecimal(stack.pop())).toString();
                                }
                                if (!stack.empty()) {
                                    stack.push(newInput);
                                } else {
                                    tfInput.setText(newInput);
                                }
                            }

                        } catch (Exception ex) {
                            System.out.println("something in the second part went wrong");
                        }
                    } else {
                        tfInput.setText(newInput);
                    }
                }
            }
    }
    lastOperator = buttonValue;
} 
```

如果您想计算一个字符串，请在“启动”方法中添加如下内容：

```
 String test = "10-10/5+3=";
    for (int i = 0; i < test.length(); i++) {
        buttonHandler(test.charAt(i) + "");
    } 
```

# android - 收到两次广播

> ID：12448423
> 
> 赞同：16
> 
> 时间：2012-09-16T16:03:58.513
> 
> 标签：android, service, broadcastreceiver

我正在使用本地广播让我的服务知道 AsyncTask 已完成其工作，但我有一个小问题：广播仅发送一次（它由仅在应用程序启动时调用的函数创建）但我收到两次。

简化代码：

```
@Override
protected void onPostExecute(HttpResponse result) {
    LocalBroadcastManager localBroadcastManager = LocalBroadcastManager.getInstance(getBaseContext());
    localBroadcastManager.sendBroadcast(new Intent(getString(R.string.bc_CONNECTED)));
} 
```

在服务中：

```
private BroadcastReceiver connectedBroadcastReceiver = new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {
        Log.d(getString(R.string.app_tag), "broadcast received !!");
    }
};

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    LocalBroadcastManager.getInstance(this).registerReceiver(connectedBroadcastReceiver, new IntentFilter(getString(R.string.bc_CONNECTED)));
    return START_STICKY;
} 
```

有没有人遇到过这种奇怪的行为？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-01T18:54:02.913

我有同样的问题，问题是我在 onCreate 方法和 onResume 方法中注册了接收器。从 onCreate 中删除问题已解决。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-16T18:42:17.420

在响应广播之前，您应该始终检查意图操作。

```
public void onReceive(Context context, Intent intent){
      if(intent.getAction() != null && intent.getAction().equals(getString(R.string.bc_CONNECTED))){
      Log.d(getString(R.string.app_tag), "broadcast received !!");
 }
} 
```

检查[文档](http://developer.android.com/reference/android/content/BroadcastReceiver.html#onReceive%28android.content.Context,%20android.content.Intent%29)。它说您可能会收到虚假电话。所以总是检查行动

> registerReceiver(BroadcastReceiver, IntentFilter) 和应用程序清单中使用的 Intent 过滤器不保证是独占的。它们是操作系统有关如何找到合适收件人的提示。发件人可以绕过过滤器解析，强制发送给特定收件人。因此，onReceive() 实现应该只响应已知操作，忽略它们可能收到的任何意外 Intent。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-08T06:57:01.600

我遇到了这个问题，因为我注册了两次，因为我有两个意图过滤器。所以系统两次传递了相同的意图。

```
 LocalBroadcastManager.getInstance(this).registerReceiver(mLocalReceiver,intentFilterNews);
  LocalBroadcastManager.getInstance(this).registerReceiver(mLocalReceiver,intentFilterWeather); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-11T13:41:26.637

退出应用程序时是否取消注册接收器？否则，您会在每个应用程序中启动另一个注册的接收器。或者，您必须在注册之前检查接收方是否已经在之前的应用调用中注册过。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-06T06:42:14.820

确保在任何组件（等...）`BroadcastReceiver`的方法中注册，而不是或（在 Fragmnet 的情况下）`onCreate``Activity, Fragment, Service``onResume``onViewCreated`

**例如**

```
val receiver = object : BroadcastReceiver() {
    override fun onReceive(context: Context?, intent: Intent?) {
        Log.d("TAGGg",intent?.getBooleanExtra("ext", false).toString())
    }
}

// On Create method of component
override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    LocalBroadcastManager.getInstance(requireActivity()).registerReceiver(receiver, IntentFilter("test-event"))
} 
```

还要确保取消注册接收器`onStop()`或`onDestroy()`

```
LocalBroadcastManager.getInstance(requireActivity()).unregisterReceiver(receiver) 
```

# javascript - 如何检测禁用复选框上的 .click()

> ID：12448425
> 
> 赞同：10
> 
> 时间：2012-09-16T16:04:03.103
> 
> 标签：javascript, jquery

js/jQuery:

```
$('input[type=checkbox]').click(function(){
  // Does not fire if I click a <input type="checkbox" disabled="disabled" />
}); 
```

当有人单击禁用的复选框时，如何在 jQuery 中发生某些事情？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-16T16:18:15.007

再次阅读有关使用`readonly`from的评论`JoãoSilva`。您可以使用它并将其与点击事件中的一些逻辑联系起来。

Using`readonly`给你一个禁用的外观，就像它一样`disabled`，但它仍然让你点击它。

像这样使用只读：

```
<input type="checkbox" readonly="readonly">​ 
```

如果设置了只读，则在您的脚本中取消该事件。

```
$('input[type=checkbox]').click(function() {
    var isReadOnly = $(this).attr("readonly") === undefined ? false : true;

    if (isReadOnly) {
        return false;
    }

    // other code never executed if readonly is true.
});
​ 
```

### [演示](http://jsfiddle.net/FranWahl/ZqvmM/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-16T16:11:51.313

您将无法在所有浏览器中可靠地捕获点击事件。最好的办法是在上方放置一个透明元素来捕捉点击。

HTML

```
<div style="display:inline-block; position:relative;">
  <input type="checkbox" disabled="disabled" />
  <div style="position:absolute; left:0; right:0; top:0; bottom:0;"></div>
</div>​ 
```

JavaScript

```
$(':checkbox:disabled').next().click(function(){
    var checkbox = $(this.prevNode);
    // Does fire now :)
}); 
```

注意：这是我改进的[这个问题的一个想法。](https://stackoverflow.com/questions/3100319/event-on-a-disabled-input)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T16:15:11.033

你不能......但你可以通过在输入上放置一个具有透明背景的 div 来伪造它，并在该 div 上定义 click 函数。

```
$('input').each(function(){
    if(true == ($(this).prop('disabled'))){
        var iTop = $(this).position().top;
        var iLeft = $(this).position().left;
        var iWidth = $(this).width();
        var iHeight = $(this).height();
    $('body').append('<div class="disabledClick" style="position:absolute;top:'+iTop+'px;left:'+iLeft+'px;width:'+iWidth+'px;height:'+iHeight+'px;background:transparent;"></div>');    
    }       
});

//delegate a click function for the 'disabledClick'.

$('body').on('click', '.disabledClick', function(){
   console.log('This is the click event for the disabled checkbox.');
}); 
```

[这是工作的jsFiddle](http://jsfiddle.net/nCfet/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T16:06:49.140

我看不到在复选框上添加`<div>`块层的其他选项。所以解决方案应该如下：

```
function addDisabledClickHandler(el, handler) {
    $("<div />").css({
        position: "absolute",
        top: el.position().top,
        left: el.position().left,
        width: el.width(),
        height: el.height()
    }).click(handler).appendTo("body");
}

var el = $("input[type='checkbox']");
addDisabledClickHandler(el, function() {
    alert("Clicked");
});​ 
```

**演示：http:** [//jsfiddle.net/q6u64/](http://jsfiddle.net/q6u64/)

# android - 如何使用 SL4A 从图库中挑选照片？

> ID：12448426
> 
> 赞同：1
> 
> 时间：2012-09-16T16:04:10.373
> 
> 标签：android, python, sl4a

我正在使用 SL4A 编写一个工具，以将图像从画廊上传到我自己的图像服务。但我不知道如何从图库中获取图像。我想我需要这方面的意图，但我在互联网上找不到与此相关的任何内容。（哦，是的，我正在使用 Python。）

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:10:46.190

你是对的；`makeIntent()`SL4A API ，例如`startActivityForResult()`和`startActivityForResultIntent()`您会感兴趣。只需一两个快速的 Google 即可找到用于获取图像的 Intent 详细信息，例如，[android 从图库中选择图像](https://stackoverflow.com/questions/5309190/android-pick-images-from-gallery)

我个人尝试了各种替代方案：

```
intent = droid.makeIntent('ACTION_GET_CONTENT',"",'image/*')
result = droid.startActivityForResultIntent(intent) 
```

但它不喜欢我......我得到了一些类似的东西`No activity found ...`，这表明需要创建一个意图选择器，这[显然是不可能的](http://code.google.com/p/android-scripting/issues/detail?id=588) **：/**

对不起，我不能有更多的用处。

祝你好运！

# javascript - google.maps.event.addListener(map, 'bounds_changed', alert("sth")) 仅适用于第一次

> ID：12448427
> 
> 赞同：0
> 
> 时间：2012-09-16T16:04:28.220
> 
> 标签：javascript, google-maps-api-3

`google.maps.event.addListener(map, 'bounds_changed', alert("say sth"))`仅适用于第一次加载地图。之后，无论我如何拖动地图或缩放地图，都没有弹出警报。

也一样`google.maps.event.addListener(map, 'idle', alert("just pop twice!"))`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:44:41.460

将警报包装到一个函数中：

```
google.maps.event.addListener(map, 'idle', function(){alert("just pop twice!")}) 
```

# r - 将多个 ggplot2 图与网格对齐

> ID：12448428
> 
> 赞同：14
> 
> 时间：2011-08-19T14:47:31.900
> 
> 标签：r, data-visualization, ggplot2

# 语境

我想在具有相同图例的同一页面上绘制两个 ggplot2。[http://code.google.com/p/gridextra/wiki/arrangeGrob](http://code.google.com/p/gridextra/wiki/arrangeGrob)描述了如何做到这一点。这已经看起来不错了。但是...在我的示例中，我有两个具有相同 x 轴和不同 y 轴的图。当 y 轴的范围至少是其他图的 10 倍（例如 10000 而不是 1000）时，ggplot2（或网格？）不会正确对齐图（请参阅下面的输出）。

# 问题

如何使用两个不同的 y 轴对齐绘图的左侧？

# 示例代码

```
x = c(1, 2)
y = c(10, 1000)
data1 = data.frame(x,y)
p1 <- ggplot(data1) + aes(x=x, y=y, colour=x) + geom_line()

y = c(10, 10000)
data2 = data.frame(x,y)
p2 <- ggplot(data2) + aes(x=x, y=y, colour=x) + geom_line()

# Source: http://code.google.com/p/gridextra/wiki/arrangeGrob
leg <- ggplotGrob(p1 + opts(keep="legend_box"))
legend=gTree(children=gList(leg), cl="legendGrob")
widthDetails.legendGrob <- function(x) unit(3, "cm")
grid.arrange(
  p1 + opts(legend.position="none"),
  p2 + opts(legend.position="none"),
  legend=legend, main ="", left = "") 
```

# 输出

![示例图片](../Images/296d7e887f995aafc22e8617b768545d.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-15T11:30:10.253

一种更简洁但更通用的方法是使用格式化程序 arg：

```
p1 <- ggplot(data1) +
    aes(x=x, y=y, colour=x) +
    geom_line() + 
    scale_y_continuous(formatter = function(x) format(x, width = 5)) 
```

对第二个绘图执行相同操作，并确保将宽度设置为 >= 您期望在两个绘图中的最宽数字。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-08-22T15:57:19.297

**1.**使用[cowplot](https://cran.r-project.org/web/packages/cowplot/vignettes/introduction.html)包：

```
library(cowplot)
plot_grid(p1, p2, ncol=1, align="v") 
```

[![在此处输入图像描述](../Images/a871c2077e2f7cd615520e0d2dbec244.png)](https://i.stack.imgur.com/MT6Eh.jpg)

* * *

**2.**使用`tracks`ggbio[包](http://www.tengfei.name/ggbio/docs/man/tracks.html)：

**注意：**似乎有一个错误，x 刻度不对齐。（测试于 2016 年 3 月 17 日，ggbio_1.18.5）

```
library(ggbio)
tracks(data1=p1,data2=p2) 
```

![在此处输入图像描述](../Images/4b559838b6ad8989ba7bac041d14a76e.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2011-08-19T18:22:45.577

如果您不介意无耻的拼凑，只需在 中最长的标签上添加一个额外的字符`p1`，如下所示：

```
p1 <- ggplot(data1) +
    aes(x=x, y=y, colour=x) +
    geom_line() + 
    scale_y_continuous(breaks = seq(200, 1000, 200),
                       labels = c(seq(200, 800, 200), " 1000")) 
```

我有两个潜在的问题，如果你有你的理由，我希望你能原谅：

1) 为什么不在两者上使用相同的 y 轴？我觉得这是一种更直接的方法，并且在您上面的示例中通过添加`scale_y_continuous(limits = c(0, 10000))`到`p1`.

2）这里提供的功能`facet_wrap`不够吗？很难知道你的数据结构实际上是什么样的，但这里有一个我如何做到这一点的玩具示例：

```
library(ggplot2)

# Maybe your dataset is like this
x <- data.frame(x = c(1, 2),
                y1 = c(0, 1000),
                y2 = c(0, 10000))

# Molten data makes a lot of things easier in ggplot
x.melt <- melt(x, id.var = "x", measure.var = c("y1", "y2"))

# Plot it - one page, two facets, identical axes (though you could change them),
# one legend
ggplot(x.melt, aes(x = x, y = value, color = x)) +
    geom_line() +
    facet_wrap( ~ variable, nrow = 2) 
```

# ruby-on-rails - rails bundle 错误 - capybara-webkit - 无法构建原生扩展

> ID：12448432
> 
> 赞同：4
> 
> 时间：2012-09-16T16:04:33.947
> 
> 标签：ruby-on-rails, ubuntu, capybara, bundler, capybara-webkit

尝试运行捆绑软件（现有应用程序，运行 Ubuntu 12.04 的新机器）。

```
Installing capybara-webkit (0.12.1) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /home/durrantm/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb 

Gem files will remain installed in /home/durrantm/.rvm/gems/ruby-1.9.3-p194@dmstaffing/gems/capybara-webkit-0.12.1 for inspection.
Results logged to /home/durrantm/.rvm/gems/ruby-1.9.3-p194@dmstaffing/gems/capybara-webkit-0.12.1/./gem_make.out
An error occurred while installing capybara-webkit (0.12.1), and Bundler cannot continue.
Make sure that `gem install capybara-webkit -v '0.12.1'` succeeds before bundling. 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-16T16:18:41.217

答案是“qt”-：

```
sudo apt-get install libqt4-dev libqtwebkit-dev 
```

# ios - ios - gpx 文件中的地理位置和跟踪

> ID：12448433
> 
> 赞同：0
> 
> 时间：2012-09-16T16:04:35.897
> 
> 标签：ios, map, gps, tracking, gpx

我想为IOS实现一个应用程序。此应用程序应跟踪 gpx 文件中的路线。你能告诉我一些链接或开源项目吗？非常感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T22:35:19.707

所以我猜这是一个老问题，但我在最近搜索 GPX 时发现了这个问题，而且效果很好。创建者在 Git 上也有一个惊人的例子，可以看到它的实际效果： http: [//gpxframework.com/](http://gpxframework.com/)

对于 GPX 文件，也可以查看 OSRM：[http ://project-osrm.org/](http://project-osrm.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:29:56.940

检查这个简单的应用程序以在 iTunes 商店中轻松免费地创建 GPX 文件，您可以将此应用程序中的 gpx 共享到电子邮件、保管箱或 iTunes 共享文档...

[在itunes.apple.com/us/app/gpx-creator/id535468654?mt=8&uo=4](http://itunes.apple.com/us/app/gpx-creator/id535468654?mt=8&uo=4)检查这个

# python - 如何排序并保持列表的完整性？

> ID：12448440
> 
> 赞同：0
> 
> 时间：2012-09-16T16:05:10.280
> 
> 标签：python, sorting

所以我对我正在编写的脚本有一个小问题。我有一个看起来像这样的文本文件：

```
'20 zebra 12 bear' 
```

这只是一个例子，格式是 1 行所有项目用空格分隔。该脚本可以对它们进行排序并对字符串执行其他一些操作，但我不知道如何保持它的设置方式。例如，上面的行应该像这样排序：

```
12
bear
20
zebra 
```

我需要在数字位置保留一个数字，在字符串位置保留一个字符串，但它们应该按字母数字排序。到目前为止，这是我的脚本：

```
#!/usr/bin/python

# Make sure you use the proper modules.
import sys, string

# This area defines the arguments and returns a usage message should it be used incorrectly.
try:
  infilename = sys.argv[1]; outfilename = sys.argv[2]
except:
  print "Usage:",sys.argv[0], "infile outfile"; sys.exit(1)

ifile = open(infilename, 'r') # Opens the input file for reading
ofile = open(outfilename, 'w') # Opens the output file for writing
data = ifile.readlines()[0].split() # Reads the lines on the input file

# The items in the list are sorted here and defined by a space.
sort = sorted(data, key=lambda item: (int(item.partition(' ')[0])
                                   if item[0].isdigit() else float('inf'), item))

# Use this to remove any special characters in the list
filtered = [s.translate(None, string.punctuation) for s in sort]

ofile.write('\n'.join(filtered)) # Writes the final output to file (one on each line)

ifile.close() # Closes the input file
ofile.close() # Closes the output file 
```

我知道它不是最漂亮的，但我使用 Python 的时间不长，所以如果你有关于如何让它更漂亮的建议，我会全力以赴。我真正需要的只是将数字保留为数字，将字符串保留为字符串，但要交换它们以进行排序。感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T16:39:26.880

这是一个非常奇怪的问题。

```
def strange_sort(seq):
    """
    Sorts digitstrings (by integer value) and non-digitstrings in a
    sequence among themselves, preserving the original ds/non-ds
    signature.
    """
    numbers = iter(sorted((elem for elem in seq if elem.isdigit()), key=int))
    words = iter(sorted(elem for elem in seq if not elem.isdigit()))
    final = [next(numbers if elem.isdigit() else words) for elem in seq]
    return final 
```

这使

```
>>> strange_sort("1 2 3".split())
['1', '2', '3']
>>> strange_sort("1 2 10 3".split())
['1', '2', '3', '10']
>>> strange_sort("1 2 10 3 bear".split())
['1', '2', '3', '10', 'bear']
>>> strange_sort("2 1 bear 10 3".split())
['1', '2', 'bear', '3', '10']
>>> strange_sort("2 1 zebra 10 3 bear".split())
['1', '2', 'bear', '3', '10', 'zebra']
>>> strange_sort("20 zebra 12 bear".split())
['12', 'bear', '20', 'zebra']
>>> strange_sort("20 zebra 12 bear 3".split())
['3', 'bear', '12', 'zebra', '20'] 
```

实际上，这基本上是@przemo_li 的建议。

[编辑以保持所有内容为字符串]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T16:24:01.210

您需要做的是创建第三个列表。数字为 1，字符串为 2。

所以你的例子是

1、2、1、2。

比您将所有数字放在一个列表中，将字符串放在第二个列表中。对它们进行排序。

然后将第三个字符串中的每个 1 替换为下一个数字，并将每个 2 替换为下一个字符串。

它应该可以完美运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T16:35:44.403

对于交错数字和字符串的特定情况，请使用列表切片：

```
text = '20 zebra 12 bear 5 moose'
arr = text.split()
arr[::2] = sorted(arr[::2], key=int)
arr[1::2] = sorted(arr[1::2])

print ' '.join(arr) 
```

输出：

```
5 bear 12 moose 20 zebra 
```

* * *

对于一般情况下，内容可能无法完美交错（例如'20 15 zebra 12 17 cow Bear'），您可以使用 Numpy：

```
import numpy as np

text = '20 15 zebra 12 17 cow bear 5 2 1'
arr = np.char.array(text.split())
nums = arr.isdigit()
strs = ~nums
arr[nums] = sorted(arr[nums], key=int)
arr[strs] = np.sort(arr[strs])

print ' '.join(arr) 
```

输出：

```
1 2 bear 5 12 cow zebra 15 17 20 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T16:23:54.253

我会这样做：

*   将列表拆分为标记，例如使用`re.split`.
*   使用列表切片来创建键列表（数字）和值列表（单词）。
*   对这个元组列表进行排序。（这将正确排序它们）

如果您随后需要将其返回到字符串：

*   用空格连接元组的元素。
*   用空格加入结果列表。

这是执行此操作的代码：

```
#!/usr/bin/python
import re

data = "12 foo 35 bar 10 baz 23 foobar"

d = re.split("\s+", data)
tuples = zip(d[0::2], d[1::2])
tuples.sort()

# If you need it back to a string
dsorted = [x + " " + y for (x, y) in tuples]
datasorted = " ".join(dsorted)

print data
print datasorted 
```

这将输出以下内容：

```
12 foo 35 bar 10 baz 23 foobar
10 baz 12 foo 23 foobar 35 bar 
```

# google-chrome - 在 ftp 上上传的 mp3 文件在 Chrome 中加载两次

> ID：12448447
> 
> 赞同：1
> 
> 时间：2012-09-16T16:05:40.617
> 
> 标签：google-chrome

我在我的服务器上上传了一个 mp3 文件，当我使用 Chrome 链接到它时，我在开发人员工具的“网络”选项卡中得到这些结果：

![在此处输入图像描述](../Images/eeaae02f7ad593d1e69ecc26fda2a874.png)

似乎它被加载了两次。

此外，在**控制台选项卡**中，我得到以下信息：

> 资源解释为“其他”，但以未定义的 MIME 类型传输。

有人可以向我解释吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-21T00:13:30.083

如果 chrome 加载 smth 两次，通常会在您的 favicon.ico 未找到时发生。Chrome 寻找 /favicon.ico 并且可以加载页面两次，如果您的 404 页面与您加载的页面相同。检查图标是否以 chrome 显示。

```
<link rel="icon" href="/favicon.ico" sizes="32x32" type="image/png" /> 
```

# php - 了解 PHP 短标签

> ID：12448448
> 
> 赞同：0
> 
> 时间：2012-09-16T16:05:40.887
> 
> 标签：php, zend-framework

[我在这个视频](http://www.zendcasts.com/using-blueprint-css-with-zend-2/2009/01/comment-page-1/#comment-55472)中看到了这个，但我不明白它是如何`<?=`工作的。
有人能帮我吗？

![](../Images/80a86abbe22ca8a8d317d6023dfc88e1.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T16:07:19.727

这就是`<?php echo`. 它始终在 PHP 5.4 及更高版本中[启用](http://www.php.net/manual/en/ini.core.php#ini.short-open-tag)，但否则您需要[在`short_open_tag`](http://www.php.net/manual/en/ini.core.php#ini.short-open-tag)`php.ini`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T15:48:25.160

通常 php 标签是`<?php ?>`或`<? ?>`. 这个标签`<?= ?>`是一个较短的版本`<?php echo [some_var]; ?>`

# php - Php 和 Mysql - 检测重复条目

> ID：12448453
> 
> 赞同：3
> 
> 时间：2012-09-16T16:06:24.757
> 
> 标签：php, mysql

我有一个 MySql 查询，我正在尝试检查我的 PHP 代码中是否有重复的条目，并且我正在尝试执行以下操作：

```
if(!$result)
{
    $error_message = mysql_error();

        $pos = strpos ( $error_message ,  'Duplicate entry' );

        if($pos === false)
        {
           ... Do some error reporting... 
```

但是 $error_message = mysql_error(); 似乎正在打破它。有人会知道为什么会发生这种情况以及如何正确检测重复的错误消息，因为这对我来说有点小题大做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T16:34:36.530

您可以使用 mysql_errno 或 mysqli_errno，并查找错误号 1062，这是重复条目的错误号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T21:39:43.670

你应该看一下 MySQL 的行为，[`INSERT IGNORE`](http://dev.mysql.com/doc/refman/5.5/en/insert.html)它将允许你告诉 MySQL 你正在插入可能有重复的地方，如果是这样，不要做任何事情。

# google-maps-api-3 - 如何使用 Google map API v3 向标记添加文本标签？

> ID：12448455
> 
> 赞同：-1
> 
> 时间：2012-09-16T16:06:34.740
> 
> 标签：google-maps-api-3

可以向使用 Google Map API v3 创建的地图添加“标记”。但是这样的标记显示了一个红色的磁盘，没有立即可见的任何文本标签。有没有办法立即显示文本标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T03:34:23.927

您可以使用的一个选项是[信息框](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox//docs/examples.html)

[例子](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_zipcode_map.html)

# python - 如果无法确定类型的符号

> ID：12448456
> 
> 赞同：0
> 
> 时间：2012-09-16T16:06:40.497
> 
> 标签：python, types, if-statement

**实验说明**：创建一个循环，该循环将使用每次循环完成时递增 1 的变量的值迭代总共 10 次。在循环的每次迭代中打印一条消息，指示循环运行了多少次。例如，消息可以读取：“循环已运行'x' 次”'x' 将被循环控制变量的值替换。当循环完成 10 次迭代时，打印一条循环结束的消息。

我使用 Raptor 创建了一个成功执行的流程图。它在这里： http: [//fs1.hidemyass.com/img/RpAbF.jpg](http://fs1.hidemyass.com/img/RpAbF.jpg)

我必须用 Python 编写一个与流程图做同样事情的程序。当我尝试运行 prog 时出现错误。

```
num=raw_input ("Please enter a number.")
counter = 1

if counter = 11:
    print ("The loop is now complete!")
else:
    print ("The loop has run " + counter + " time(s)")
    counter = counter + 1 
```

它说“符号：如果无法确定类型”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T16:08:05.673

`==`比较值时需要使用：

```
if counter == 11: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T16:10:34.450

`=`用于给变量赋值。`==`用于测试两个表达式是否相等。

旁注：代码中的循环在哪里？考虑使用`for`循环：[文档](http://docs.python.org/tutorial/controlflow.html)

```
for i in range(1,11):
    #do stuff 
```

# java - 类中的静态块和静态变量按什么顺序执行？

> ID：12448465
> 
> 赞同：16
> 
> 时间：2012-09-16T16:07:48.353
> 
> 标签：java, static, final

> **可能重复：**
> [Java 静态类初始化](https://stackoverflow.com/questions/3499214/java-static-class-initialization)

为什么在初始化块中更新字符串变量而不是整数（即使先写入块）

```
class NewClass
{
    static 
    {
       System.out.println(NewClass.string+" "+NewClass.integer);
    }

    final static String string="static";
    final static Integer integer=1;

    public static void main(String [] args)//throws Exception
    {
    }
} 
```

我的输出是

```
static null 
```

PS：还注意到只有当我插入 final 修饰符时，字符串变量初始化才会发生在块之前。为什么会这样？为什么不使用整数？我也将其声明为最终静态

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-16T16:11:34.767

从JLS 的[第 12.4.2 节，适当地剪断：](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.2)

> 初始化 C 的过程如下：
> 
> *   然后，初始化最终类变量和接口字段，其值为编译时常量表达式（§8.3.2.1、§9.3.1、§13.4.9、§15.28）。
>     
>     
> *   接下来，按照文本顺序执行类的类变量初始化程序和静态初始化程序，或者接口的字段初始化程序，就好像它们是一个单独的块一样。

因此，对于非编译时常量，这不是“所有变量”然后是“所有静态初始化程序”的情况，反之亦然——它们都是按文本顺序排列在一起的。所以如果你有：

```
static int x = method("x");

static {
    System.out.println("init 1");
}

static int y = method("y");

static {
    System.out.println("init 2");
}

static int method(String name) {
    System.out.println(name);
    return 0;
} 
```

那么输出将是：

```
x
init 1
y
init 2 
```

即使 make`x`或`y`final 在这里也不会影响这一点，因为它们仍然不是编译时常量。

> PS：还注意到只有当我插入 final 修饰符时，字符串变量初始化才会发生在块之前。

那时，它是一个编译时常量，它的任何使用基本上都是内联的。此外，变量值在其余初始化程序之前分配，如上所述。

[JLS 的第 15.28 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28)定义了编译时常量——它包括所有原始值和`String`，但*不*包括包装类型，例如`Integer`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-16T16:24:34.350

这是对您问题的简短直接回答....

`static Variable`：

静态变量在`JVM` **加载**时执行`Class`，而在实例**化**或调用`Class` **时加载。****`static method`**

 **`static Block or static Initializer Block`：

static static Initializer Block**在**`Class`被**实例化**之前或**在**其`static method`被调用之前被初始化，甚至**在**它`static variable`被使用之前。

**//////// 编辑部分 /////////**

```
class NewClass {

    final static String string = "static";
    final static Integer integer = 1;

    static {
        System.out.println(NewClas.string + " " + NewClas.integer);
    }

    public static void main(String [] args) { // throws Exception
        new NewClas();
    }

} 
```

**以上将打印** `static 1`。

原因是`JVM`它将执行称为的**优化过程**`Constant folding`，对常量变量进行预计算。

此外，在**您的情况下，结果**是`static null`原因`Constant folding`应用于 Primitive 类型而不是 Wrapper Object，在您的情况下，它的 Integer ...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T16:09:51.067

它们按给定的顺序（字段和静态块）初始化，这就是为什么打印值为`null`，没有分配给在静态块之后定义的静态字段。**

# actionscript-3 - FlashDevelop中是否需要boildercode？

> ID：12448473
> 
> 赞同：1
> 
> 时间：2012-09-16T16:09:22.503
> 
> 标签：actionscript-3

我的意思是在主类文件上：

```
public function Main():void 
{
    if (stage) init();
    else addEventListener(Event.ADDED_TO_STAGE, init);
}

private function init(e:Event = null):void 
{
    removeEventListener(Event.ADDED_TO_STAGE, init);
    // entry point
} 
```

您不能直接了解 SWF 完全加载后将运行的内容吗？或者您是否需要这一点代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T17:27:07.657

关键是您不确定该阶段是否存在，因此您不能安全地`this.stage`进入构造函数。等到添加到阶段更安全，特别是当从另一个 swf 加载该 swf 时。您可以删除监听器，但它的开销并不大，因为它在添加时被删除，所以它是一招小马。

# c# - 上下文不拉入对象

> ID：12448475
> 
> 赞同：1
> 
> 时间：2012-09-16T16:09:31.067
> 
> 标签：c#, .net, entity-framework, ef-code-first

好的，所以我有两个模型教师和帐户：

```
public class Teacher : Person
{
    [Key]
    public Guid TeacherID { get; set; }

    public Guid? AccountID { get; set; }

    [Display(Name = "Hire Date")]
    [DataType(DataType.Date)]
    public DateTime? HireDate { get; set; }

    public virtual ICollection<Classroom> Classrooms { get; set; }

    public virtual Office Office { get; set; }

    public virtual Account Account { get; set; }
}

public class Account
{
    [Key]
    public Guid AccountID { get; set; }

    public Guid? TeacherID { get; set; }

    public String Username { get; set; }

    public String Salt { get; set; }

    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public String SaltedPassword { get; set; }

    [Display(Name = "Secert Question")]
    public Guid SecertQuestionID { get; set; }

    [Display(Name = "Answer")]
    public String SecertAnswer { get; set; }

    public Guid RoleID { get; set; }

    public virtual SecertQuestion Question { get; set; }

    public virtual Role Role { get; set; }

    public virtual Teacher Teacher { get; set; }
} 
```

当我运行 GetAll 查询时：

```
public IEnumerable<Account> GetAll()
{
    return context.Accounts;
} 
```

我的教师对象返回 null 而不是像我的 Role 和 SecertQuestion 对象那样填充。

我有假数据，可确保两个表中的 TeacherID 和 AccountID 具有相同的 GUID。此外，在我的上下文创建中，我正在使用此代码创建一个可选关系：

```
modelBuilder.Entity<Account>()
    .HasOptional(a => a.Teacher)
    .WithOptionalDependent(a => a.Account); 
```

它是否正确？

所以我的问题是，当我为我的对象 Account 执行 GetAll() 时，为什么我的 Teacher 对象返回 null？是因为我的帐户对象有一个可以为空的教师对象与之关联吗？

**更新：**

所以在分析了我的数据库之后，我注意到在我当前的映射中，我的 Account 表正在创建一个名为 Teacher_TeacherID 的新外键。我该如何解决这个问题，同时在教师和帐户中保留我的导航映射（虚拟对象）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:11:26.097

映射一对一关系的正确方法是：

*   从. `AccountID`_ 是您关系中的主体，因此它不能具有依赖于的外键。`Teacher``Teacher``Account`

*   从类中删除`TeacherID`属性`Account`。您不能在模型类中公开此外键。（我不知道为什么，tbh，但是 EF 按照惯例不将此属性识别为外键，并且一对一映射没有`HasForeignKey`可用的方法。）

所以，你会：

```
public class Teacher : Person
{
    [Key]
    public Guid TeacherID { get; set; }
    //...
    public string Name { get; set; }  // only for the test example below
    //...
    public virtual Account Account { get; set; }
}

public class Account
{
    [Key]
    public Guid AccountID { get; set; }
    //...
    public string Name { get; set; }  // only for the test example below
    //...
    public virtual Teacher Teacher { get; set; }
} 
```

使用 Fluent API 映射外键：

```
modelBuilder.Entity<Account>()
    .HasOptional(a => a.Teacher)
    .WithOptionalDependent(a => a.Account)
    .Map(m => m.MapKey("TeacherID")); 
```

`TeacherID`这将在表中创建一个可为空的外键列`Account`。

`Teacher`如果您现在在and`Account`表中有以下行...

![一对一数据](../Images/13cc08acafc8a70df4413be8b240646f.png)

...您可以运行此查询...

```
var teacher = context.Teachers.First(t => t.Name == "Teacher 1");
var accountName = teacher.Account.Name; 
```

...并且由于导航属性的成功延迟加载而`accountName`具有该值。`"Account 1"``teacher.Account`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T16:19:07.440

默认情况下不填充导航属性。这是一件好事，因为它可以防止无意中加载大量数据。

通常延迟加载会在您第一次访问它时启动并加载教师。但是通过使用存储库模式，您将失去此功能。

剩下的就是使用 Eager 加载：

```
public IEnumerable<Account> GetAll() 
    { 
        return context.Accounts.Include(account=>account.Teacher); 
    } 
```

看[这里](http://msdn.microsoft.com/en-us/data/jj574232.aspx)以获得更详尽的解释

# php - 我的 CodeIgniter 管理控制器中的这种管理区域保护技术是否仅适用于一个 IP 地址？

> ID：12448479
> 
> 赞同：1
> 
> 时间：2012-09-16T16:09:44.420
> 
> 标签：php, codeigniter

我想保护我的管理部分，但我不确定如果我的管理控制器构造中的 ip 条件是否足够。

我的所有文件都来自根目录，因此如果 ddos​​ 成功，则只有图像、css、js 和索引等资产可用。没关系。

但是，这样的条件是否足以保护我的管理区域？

我的 Admin 类控制器的开始：

```
class Admin extends CI_Controller {

    function __construct()
    {

        parent::__construct();

            if ($this->input->ip_address() != '127.0.0.1')
        {
            redirect('/');
        }

        if (!$this->session->userdata('logged_in_admin') )
        {
            redirect('admin/login');
        }

    }

... 
```

我自己的 IP 地址 127.0.0.1 的安全检查是否足够？

这能破吗？如果是怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T16:25:50.090

我不会推荐它。IP 地址可以共享、重新分配并可能被欺骗。

这也是一个缺乏灵活性的系统。您的 Internet 连接中断，您需要通过移动连接访问管理区域？需要向其他用户授予权限？您必须访问源代码并重写权限系统。

# sql - to_char 在 where 子句 SQL / Postgresql

> ID：12448484
> 
> 赞同：0
> 
> 时间：2012-09-16T16:10:08.710
> 
> 标签：sql, postgresql, to-char

我正在使用 Postgresql 数据库。

我想对表中的数字列执行查询，以查找该值是否以特定数字开头。

我目前有：

```
SELECT * FROM myTable WHERE to_char(ID, '12345678') LIKE '2%' 
```

但是，这会返回一个空数据集（但 ID 列中有以 2 开头的值。

非常感谢

史蒂夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T16:19:36.000

那是因为数字的模式[`TO_CHAR`](http://www.postgresql.org/docs/8.1/static/functions-formatting.html)是`9`（具有指定位数的`0`值）或（具有前导零的值）。使用以下内容：

```
SELECT * FROM myTable WHERE TRIM(to_char(ID, '99999999')) LIKE '2%' 
```

或将数字转换为字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T16:50:53.667

不要笑。作为强制转换的替代方法，您可以使用范围查询，例如：

```
SELECT * FROM mytable
WHERE id = 2
OR (id >=20 AND id < 30)
OR (id >=200 AND id < 300)
OR (id >=2000 AND id < 3000)
OR (id >=20000 AND id < 30000)
OR (id >=200000 AND id < 300000)
OR (id >=2000000 AND id < 3000000)
OR (id >=20000000 AND id < 30000000)
OR (id >=200000000 AND id < 300000000)
OR (id >=2000000000 AND id < 3000000000)
OR (id >=20000000000 AND id < 30000000000)
OR (id >=200000000000 AND id < 300000000000)
        -- ...
        ; 
```

这可能会导致 postgres 生成更好的查询计划，因为可以使用索引（如果存在，可以预期 id 字段）

更新：查询计划：

```
Bitmap Heap Scan on reservations  (cost=1838.15..13290.11 rows=110809 width=4012) (actual time=11.310..24.379 rows=111111 loops=1)
   Recheck Cond: ((id = 2) OR ((id >= 20) AND (id < 30)) OR ((id >= 200) AND (id < 300)) OR ((id >= 2000) AND (id < 3000)) OR ((id >= 20000) AND (id < 30000)) OR ((id >= 200000) AND (id < 300000)) OR ((id >= 2000000) AND (id < 3000000)) OR ((id >= 20000000) AND (id < 30000000)) OR ((id >= 200000000) AND (id < 300000000)) OR ((id >= 2000000000) AND (id < 3000000000::bigint)) OR ((id >= 20000000000::bigint) AND (id < 30000000000::bigint)) OR ((id >= 200000000000::bigint) AND (id < 300000000000::bigint)))
   ->  BitmapOr  (cost=1838.15..1838.15 rows=112192 width=0) (actual time=11.242..11.242 rows=0 loops=1)
         ->  Bitmap Index Scan on reservations_pkey  (cost=0.00..1.49 rows=1 width=0) (actual time=0.005..0.005 rows=1 loops=1)
               Index Cond: (id = 2)
         ->  Bitmap Index Scan on reservations_pkey  (cost=0.00..1.58 rows=10 width=0) (actual time=0.003..0.003 rows=10 loops=1)
               Index Cond: ((id >= 20) AND (id < 30))
         ->  Bitmap Index Scan on reservations_pkey  (cost=0.00..2.52 rows=104 width=0) (actual time=0.013..0.013 rows=100 loops=1)
               Index Cond: ((id >= 200) AND (id < 300))
         ->  Bitmap Index Scan on reservations_pkey  (cost=0.00..14.24 rows=1036 width=0) (actual time=0.110..0.110 rows=1000 loops=1)
               Index Cond: ((id >= 2000) AND (id < 3000))
         ->  Bitmap Index Scan on reservations_pkey  (cost=0.00..144.73 rows=10845 width=0) (actual time=1.050..1.050 rows=10000 loops=1)
               Index Cond: ((id >= 20000) AND (id < 30000))
         ->  Bitmap Index Scan on reservations_pkey  (cost=0.00..1332.24 rows=100196 width=0) (actual time=10.013..10.013 rows=100000 loops=1)
               Index Cond: ((id >= 200000) AND (id < 300000))
         ->  Bitmap Index Scan on reservations_pkey  (cost=0.00..1.49 rows=1 width=0) (actual time=0.010..0.010 rows=0 loops=1)
               Index Cond: ((id >= 2000000) AND (id < 3000000))
         ->  Bitmap Index Scan on reservations_pkey  (cost=0.00..1.49 rows=1 width=0) (actual time=0.001..0.001 rows=0 loops=1)
               Index Cond: ((id >= 20000000) AND (id < 30000000))
         ->  Bitmap Index Scan on reservations_pkey  (cost=0.00..1.49 rows=1 width=0) (actual time=0.001..0.001 rows=0 loops=1)
               Index Cond: ((id >= 200000000) AND (id < 300000000))
         ->  Bitmap Index Scan on reservations_pkey  (cost=0.00..1.49 rows=1 width=0) (actual time=0.002..0.002 rows=0 loops=1)
               Index Cond: ((id >= 2000000000) AND (id < 3000000000::bigint))
         ->  Bitmap Index Scan on reservations_pkey  (cost=0.00..1.49 rows=1 width=0) (actual time=0.026..0.026 rows=0 loops=1)
               Index Cond: ((id >= 20000000000::bigint) AND (id < 30000000000::bigint))
         ->  Bitmap Index Scan on reservations_pkey  (cost=0.00..1.49 rows=1 width=0) (actual time=0.002..0.002 rows=0 loops=1)
               Index Cond: ((id >= 200000000000::bigint) AND (id < 300000000000::bigint))
 Total runtime: 28.720 ms
(28 rows)

 Seq Scan on reservations  (cost=0.00..19219.52 rows=4383 width=4012) (actual time=0.025..184.532 rows=111111 loops=1)
   Filter: ((id)::text ~~ '2%'::text)
 Total runtime: 189.100 ms
(3 rows) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T16:52:34.347

这将返回前导数字：

```
floor(a/10.^(floor(log(a)))) 
```

例子：

```
select a from generate_series(1,1000) as a where 
    floor(a/10.^(floor(log(a)))) = 2; 
```

如果您有小于一或小于零的数字，您应该将它们过滤掉（取决于您到底想要什么）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T16:19:29.320

我找到了答案：

```
SELECT * FROM myTable WHERE CAST (ID AS CHAR) LIKE '2%' 
```

史蒂夫

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-16T16:15:51.097

你不需要`to_char`，只是`id like '2%'`。

# python - Python - PyDev 和 Eclipse Juno - 控制台不工作

> ID：12448485
> 
> 赞同：0
> 
> 时间：2012-09-16T16:10:18.027
> 
> 标签：python, eclipse, pydev

我刚刚在 Eclipse Juno 中安装了 PyDev 插件，但在启动脚本后真的不知道如何获得输出。有一个标准的 Eclipse 控制台，但它不显示脚本输出，每次启动后都只有这个剧本。

```
Finding files... done.
Importing test modules ... done.

----------------------------------------------------------------------
Ran 0 tests in 0.000s

OK 
```

我没有看到任何其他可以添加的控制台...建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T16:56:57.880

好像您正在将脚本作为“Python 单元测试”运行，并且没有测试。也许您需要使用“Python 运行”。

# android - 如何读取应用程序之间更新的共享首选项？

> ID：12448488
> 
> 赞同：1
> 
> 时间：2012-09-16T16:10:33.267
> 
> 标签：android

我遇到了一个与以下内容非常相似的问题，但它有所不同。

[如何阅读更新的共享偏好？](https://stackoverflow.com/questions/11378975/howto-read-updated-shared-preferences)

我有两个应用程序，A.apk 有很多 sharedPreferences 需要从 B.apk 中获取。我完全可以毫无问题地从 B 中读取它。但是，当A的偏好发生变化时，再返回B.apk(onResume)。现在从 A 获取的首选项没有更新。我必须强制关闭 B.apk 并重新启动它以读取更新的首选项。

我也尝试在离开 A 时使用 finish()，但是，它不起作用。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:13:19.790

您可以在 B.apk 中有一个 ContentProvider，并在 A.apk 中读取/更新首选项。

# android - 如何部署 Android 共享库

> ID：12448493
> 
> 赞同：0
> 
> 时间：2012-09-16T16:11:28.213
> 
> 标签：android, android-library

我已经建立了一个名为`com.example.multiplecontacts`. 该库包含一个名为`MultipleContacts`. 我想在另一个名为的应用程序中使用它`com.example.test`

我在测试清单中添加了以下行

```
<uses-library android:name="com.example.multiplecontacts" android:required="true"/> 
```

但是出现以下错误

```
Package com.example.test requires unavailable shared library com.example.multiplecontacts; failing! 
```

我在我的库中选中了 Is Library 复选框，并通过 Properties->Android->Add 将其添加为对我的应用程序的引用

我还应该做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T16:19:51.373

创建一个 libs 文件夹并将您的库放在那里，然后将该文件夹添加到库路径中。

看到[这个](https://stackoverflow.com/questions/3642928/adding-a-library-jar-to-an-eclipse-android-project)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-04T19:01:08.413

将此作为单独的答案，以免在评论中丢失。但这里有一个更官方的关于如何在 Android 中创建共享库的描述： [https](https://source.android.com/devices/architecture/java-library) ://source.android.com/devices/architecture/java-library 。

# symfony - symfony2 自定义错误页面

> ID：12448497
> 
> 赞同：0
> 
> 时间：2012-09-16T16:11:52.873
> 
> 标签：symfony

为了自定义错误页面，我创建了一个 error404.html.twig 页面来处理页面未找到异常，例如当用户输入无效 url 时。它工作正常，但我还需要根据我的应用程序中的错误显示不同的消息。

为此，我使用带有消息作为参数的 createNotFoundException() 方法，但是在引发异常时消息不会出现，我总是在 error404.html.twig 模板中有消息。那么如何在我的错误页面模板中显示来自 createNotFoundException() 的消息参数？谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T16:17:32.183

该`error404.html.twig`页面是一个通用的`NotFoundException`：实际上您确实在开发模式下看到了调试跟踪，但您在 prod 中看到了花哨的自定义 HTML。

如果您需要自定义 404 行为，则必须`Response`手动构建，注入适当的`404 Not Found`状态，然后注入适当的主体。

```
$product = $em -> getRepository("Acme:Product") -> findOneById( $id );

if($product === NULL)
{

    $response = $this -> render('YourBundle::Errors/404.html.twig', array(
        'message'   => 'blah blah'
    ));

    $response -> setStatus(404);    

    return $response;

} 
```

或者您可以编写一个等待此类事件的侦听器，这取决于您。

# python - 打印输出python子进程

> ID：12448498
> 
> 赞同：1
> 
> 时间：2012-09-16T16:11:55.030
> 
> 标签：python, printing, subprocess

两天进入python，我正在尝试做一些简单的事情，但很挣扎。

当我使用 ls 作为示例命令输入运行下面的脚本时，ssh 提示我输入密码，然后它会吐出：

```
<__main__.sshcommand object at 0x7fd0d1136b50> 
```

如果我在 sshcommand 类中硬设置命令（例如用 'ls' 替换命令）并打印它，它会很好用。

感谢您提前提供的所有建议。

```
import subprocess

class sshcommand(object):
    def __init__(self, command):
        subprocess.check_output(['ssh', 'localhost', command]).splitlines()

command = raw_input("command> ")

print sshcommand(command) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T18:42:43.760

问题是您的代码不会以任何方式存储或返回结果。

这真的需要上课吗？如果没有，它作为一个函数要简单得多：

```
import subprocess

def sshcommand(command):
    return subprocess.check_output(['ssh', 'localhost', command]).splitlines()

command = raw_input("command> ")
print sshcommand(command) 
```

如果它绝对必须是一个类：

```
import subprocess

class sshcommand(object):
    def __init__(self, command):
        self.result = subprocess.check_output(['ssh', 'localhost', command]).splitlines()

    def __str__(self):
        return self.result

command = raw_input("command> ")
print sshcommand(command) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T16:53:15.493

在你的类上定义一个[`__str__`](http://docs.python.org/reference/datamodel.html#object.__str__)方法。例如，你可以写

```
import subprocess

class sshcommand(object)
    def __init__(self, command):
        self.command = command
        subprocess.check_output(['ssh', 'localhost', command]).splitlines()

    def __str__(self):
        return 'ssh localhost "%s"' % command

command = raw_input("command> ")

print '%s' % sshcommand('foo bar') 
```

哪个打印

> > ssh localhost“富吧”

# sass - 使用SASS for循环动态生成变量

> ID：12448500
> 
> 赞同：1
> 
> 时间：2012-09-16T16:11:59.687
> 
> 标签：sass

我希望从 SASS 中的 for 循环中创建一系列变量，而不是创建选择器、属性或值。

我所追求的一个例子

```
$px1:    (1 / 16) + 0em;
$px2:    (2 / 16) + 0em;
$px3:    (3 / 16) + 0em;
$px4:    (4 / 16) + 0em; 
```

这将为我提供等效字体大小的 em 值。我是 SASS 的新手，但来自 LESS，我不得不手动列出所有这些变量，这很麻烦。在我再次这样做之前，有没有更快的方法来动态生成这些？

# java - 我的资源文件夹应该在哪里有一个可运行的 jar？

> ID：12448501
> 
> 赞同：3
> 
> 时间：2012-09-16T16:12:00.897
> 
> 标签：java, resources

在 Eclipse 中，我有一个项目，我正在使用我调用的资源，例如

```
URL url = FighterComponent.class.getResource("/gfx/characters/");
File file = new File(url.getPath() + info.name + "/" + frame.path); 
```

/gfx/ 是 res 中的一个文件夹。res 是我通过这样做链接的资源文件夹：

运行 > 运行配置... > 类路径 > 选择用户条目 > 高级 > 添加文件夹

我现在的问题是，在我将项目导出到可运行的 jar 以便我的朋友能够测试它之后，res 文件夹应该在哪里？我尝试将它放在与我的 jar 和我的 jar 相同的文件夹中，并且 URL 都是空的。

任何的想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T16:19:57.910

如果名称以 . 开头`'/'` `('\u002f')`，则资源的绝对名称是 . 之后的名称部分`'/'`。

所以，你应该在 jar 文件中有一个 gfx/characters 目录。在此目录下，如果您有 image.jpg 资源，则必须使用以下方法检索它：

```
URL url = TheClass.class.getResource("/gfx/characters/image.jpg"); 
```

您还可以使用`getResourceAsStream()`来获取`InputStream`可以读取的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T16:16:50.220

您可以将它放在 jar 的根目录下。然后人们将能够通过以下方式访问资源`/res/gfx/..`

# bash - 使 linux 树 bash 脚本显示文件

> ID：12448504
> 
> 赞同：2
> 
> 时间：2012-09-16T16:12:44.357
> 
> 标签：bash, shell, tree

我创建了一个基于[树脚本](http://www.centerkey.com/tree/)的 shell 脚本，但是，我需要一种方法来使所述脚本显示文件和目录（顺便说一下：我需要脚本在 Mac OS X 上运行。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T17:24:20.013

替换`ls -R | grep ':$'`为`find . -print`，然后调整`sed`命令以反映名称不会添加“：”，并且 find 将显示当前目录：

```
find . -print | sed -e '/^\.$/d' -e 's/[^-][^\/]*\//--/g' -e 's/^/   /' -e 's/-/|/' 
```

# android - TouchEvent 不再起作用

> ID：12448505
> 
> 赞同：0
> 
> 时间：2012-09-16T16:13:04.433
> 
> 标签：android, touch-event, ontouchlistener

我拼命想解决这个问题：只有 ACTION_DOWN 事件触发我的方法。一整天，它工作得很好，但现在它不再工作了，但我没有改变任何东西。

```
 public boolean onTouch(View v, MotionEvent event) {

    boolean isReleased = event.getAction() == MotionEvent.ACTION_UP || event.getAction() == MotionEvent.ACTION_CANCEL;
    boolean isPressed = event.getAction() == MotionEvent.ACTION_DOWN;
    boolean isMoved = event.getAction() == MotionEvent.ACTION_MOVE;

        if(isPressed){
            if(Gesture_Done){
                reset_It();         
            }
            xPressed = event.getX();
            yPressed = event.getY();
            action_timelist.add(System.currentTimeMillis());
            if(action_timelist.size()>1){
                evaluate_actionlist(true);
            }
        } 

        else if(isReleased){        
            if(!Gesture_Done){
            action_timelist.add(System.currentTimeMillis());
            evaluate_actionlist(false);
            }
            Gesture_Done=false;
        }

        else if(isMoved){
            xMoved = xPressed - event.getX();
            yMoved = yPressed - event.getY();
            checkGesture();
        }
            return false;
    } 
```

因为没有显示错误，我不知道如何修复它..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T16:30:38.140

尝试使用下面的编辑代码。几个小时前我遇到了完全相同的问题，这是因为即使我正在消费触摸事件，我也返回了 false。如果您对事件采取行动，则下面的代码返回 true，否则返回 false。

```
public boolean onTouch(View v, MotionEvent event) {

    boolean isReleased = event.getAction() == MotionEvent.ACTION_UP || event.getAction() == MotionEvent.ACTION_CANCEL;
    boolean isPressed = event.getAction() == MotionEvent.ACTION_DOWN;
    boolean isMoved = event.getAction() == MotionEvent.ACTION_MOVE;

        if(isPressed){
            if(Gesture_Done){
                reset_It();         
            }
            xPressed = event.getX();
            yPressed = event.getY();
            action_timelist.add(System.currentTimeMillis());
            if(action_timelist.size()>1){
                evaluate_actionlist(true);
            }
            return true;
        } 

        else if(isReleased){        
            if(!Gesture_Done){
            action_timelist.add(System.currentTimeMillis());
            evaluate_actionlist(false);
            }
            Gesture_Done=false;
            return true;
        }

        else if(isMoved){
            xMoved = xPressed - event.getX();
            yMoved = yPressed - event.getY();
            checkGesture();
            return true;
        }
            return false;
    } 
```

# r - 在 Lyx 中使用 Knitr 的 R 函数出错

> ID：12448507
> 
> 赞同：5
> 
> 时间：2012-09-16T16:13:38.260
> 
> 标签：r, latex, knitr, lyx

在 Lyx 中使用 Knitr 使用 summary() 函数时出现错误。它前面的功能有效。

```
<<>>=
library(faraway)
head(teengamb)
mdl <- lm(gamble ~ sex + status, data=teengamb) 
summary(mdl)
@ 
```

我通过在 Lyx 中插入 Tex 代码输入此代码。我刚刚测试我可以运行摘要（teengamb）但不能运行摘要（mdl）。两种代码都可以在 RStudio 中使用。

错误是“未定义的控制序列”，描述为“\end{verbatim} ...”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T05:28:37.990

[`knitr`](https://github.com/yihui/knitr)这个问题在1.1 之后已经解决了。您不需要更改 LyX 或 R 中的任何内容。从 CRAN安装**knitr ：**

```
install.packages('knitr') 
```

**请忽略以下两个答案：**

* * *

我终于找到了这个错误的原因（这是我见过的最深的错误）。这是因为如果在加载后声明编码，则该`upquote`包不起作用，例如`T1`

```
\documentclass{article}
\usepackage{upquote}
\usepackage[T1]{fontenc}
\usepackage[latin9]{inputenc}
\begin{document}
\begin{verbatim}
'
\end{verbatim}
\end{document} 
```

但是如果我们`upquote`在 之后移动`fontenc`，它会起作用：

```
\documentclass{article}
\usepackage[T1]{fontenc}
\usepackage[latin9]{inputenc}
\usepackage{upquote}
\begin{document}
\begin{verbatim}
'
\end{verbatim}
\end{document} 
```

或者只是不使用 T1 编码 - 在首选项中取消选中字体编码之前的复选框：

![](../Images/2de4899cb453f79b2fb8247bed5d1099.png)

Ubuntu 用户无法重现该问题的原因`upquote.sty`是来自 R 的 texmf 树，而不是 TeXLive 中的树，以及 R 的版本`upquote`。

解决问题的另一种方法是在 Windows 下将 R 的 texmf 树添加到 MikTeX。

**请忽略下面的答案：**

* * *

自从`options(show.signif.stars = FALSE)`工作以来，我将它作为一个可能的答案发布，但这对我来说仍然是一个非常奇怪的问题。设置`show.signif.stars = FALSE`会从以下结果中删除显着性代码（来自`summary(mdl)`）：

```
Call:
lm(formula = gamble ~ sex + status, data = teengamb)

Residuals:
    Min      1Q  Median      3Q     Max 
-35.873 -15.755  -3.007  10.924 111.586 

Coefficients:
            Estimate Std. Error t value Pr(>|t|)    
(Intercept)  60.2233    15.1347   3.979 0.000255 ***
sex         -35.7094     9.4899  -3.763 0.000493 ***
status       -0.5855     0.2727  -2.147 0.037321 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1 

Residual standard error: 27.99 on 44 degrees of freedom
Multiple R-squared: 0.2454, Adjusted R-squared: 0.2111 
F-statistic: 7.154 on 2 and 44 DF,  p-value: 0.002042 
```

错误来自 line `Signif. codes`，我不明白为什么这些字符中的任何一个都可能导致 LaTeX 错误：它们都是 ASCII 并且应该在`verbatim`环境中工作。

从上面的评论来看，@mrdwab 和我都无法重现该问题。我想 OP 的 LaTeX 安装一定有一些奇怪的地方。

# autoit - 获取网页源，包括javascript

> ID：12448508
> 
> 赞同：0
> 
> 时间：2012-09-16T16:13:43.470
> 
> 标签：autoit

我正在尝试使用 AutoIt 创建一个 Google 关键字工具刮板。我正在使用以下代码：

```
#include <IE.au3> 
$oIE = _IECreate ("https://adwords.google.com/o/KeywordTool")
sleep(20000)
$source = _IEDocReadHTML  ($oIE)

MsgBox(0,'',$source) 
```

（睡眠是为了让我有时间输入查询并在 IE 窗口中单击搜索 - 将来我会自动执行此操作）

它输出的 HTML 源代码不包含带有结果的表格，尽管我可以在 Firebug 中看到它。下面是我用 Firebug 提取的一行。

```
<tr __gwt_row="19" __gwt_subrow="0" class="sCT"><td class="sBS sDT sES" align="left"><div style="outline-style:none;" __gwt_cell="cell-gwt-uid-1059"><div id="gwt-debug-column-SELECTION-row-19-0"><input type="checkbox" class="sML"></div></div></td><td class="sBS sDT" align="left"><div style="outline-style:none;" __gwt_cell="cell-gwt-uid-1060"><div id="gwt-debug-column-KEYWORD-row-19-1"><span style="white-space:nowrap"><span></span><span><a class="sOL" gwtuirendered="gwt-uid-1089"><b>windows</b> live</a></span><span></span></span></div></div></td><td class="sBS sDT" align="left"><div style="outline-style:none;" __gwt_cell="cell-gwt-uid-1062"><div id="gwt-debug-column-COMPETITION-row-19-2"><div title="0,04">Bassa</div></div></div></td><td class="sBS sDT" align="right"><div style="outline-style:none;" __gwt_cell="cell-gwt-uid-1063"><div id="gwt-debug-column-GLOBAL_MONTHLY_SEARCHES-row-19-3">20.400.000</div></div></td><td class="sBS sDT" align="right"><div style="outline-style:none;" __gwt_cell="cell-gwt-uid-1064"><div id="gwt-debug-column-AVERAGE_TARGETED_MONTHLY_SEARCHES-row-19-4">20.400.000</div></div></td><td class="sBS sDT" align="right"><div style="outline-style:none;" __gwt_cell="cell-gwt-uid-1065"><div id="gwt-debug-column-SUGGESTED_BID-row-19-5">€&amp;nbsp;0,40</div></div></td><td class="sBS sDT aw-ti-advertiser-specific-cell" align="right"><div style="outline-style:none;" __gwt_cell="cell-gwt-uid-1066"><div id="gwt-debug-column-AD_SHARE-row-19-6">-</div></div></td><td class="sBS sDT" align="right"><div style="outline-style:none;" __gwt_cell="cell-gwt-uid-1067"><div id="gwt-debug-column-AVERAGE_MONTHLY_SEARCHES_WITH_AFS-row-19-7">-</div></div></td><td class="sBS sDT aw-ti-advertiser-specific-cell" align="right"><div style="outline-style:none;" __gwt_cell="cell-gwt-uid-1068"><div id="gwt-debug-column-SEARCH_SHARE-row-19-8">-</div></div></td><td class="sBS sDT" align="right"><div style="outline-style:none;" __gwt_cell="cell-gwt-uid-1069"><div id="gwt-debug-column-TARGETED_MONTHLY_SEARCHES-row-19-9"><div style="width: 108px; white-space: nowrap" dir="ltr"><div style="width: 8px;height: 16px; background-color: #A4D0BB; vertical-align:bottom;" class="goog-inline-block" title=""></div><div style="width: 1px;" class="goog-inline-block"></div><div style="width: 8px;height: 16px; background-color: #A4D0BB; vertical-align:bottom;" class="goog-inline-block" title=""></div><div style="width: 1px;" class="goog-inline-block"></div><div style="width: 8px;height: 13px; background-color: #A4D0BB; vertical-align:bottom;" class="goog-inline-block" title=""></div><div style="width: 1px;" class="goog-inline-block"></div><div style="width: 8px;height: 13px; background-color: #A4D0BB; vertical-align:bottom;" class="goog-inline-block" title=""></div><div style="width: 1px;" class="goog-inline-block"></div><div style="width: 8px;height: 16px; background-color: #A4D0BB; vertical-align:bottom;" class="goog-inline-block" title=""></div><div style="width: 1px;" class="goog-inline-block"></div><div style="width: 8px;height: 13px; background-color: #A4D0BB; vertical-align:bottom;" class="goog-inline-block" title=""></div><div style="width: 1px;" class="goog-inline-block"></div><div style="width: 8px;height: 13px; background-color: #A4D0BB; vertical-align:bottom;" class="goog-inline-block" title=""></div><div style="width: 1px;" class="goog-inline-block"></div><div style="width: 8px;height: 10px; background-color: #A4D0BB; vertical-align:bottom;" class="goog-inline-block" title=""></div><div style="width: 1px;" class="goog-inline-block"></div><div style="width: 8px;height: 10px; background-color: #A4D0BB; vertical-align:bottom;" class="goog-inline-block" title=""></div><div style="width: 1px;" class="goog-inline-block"></div><div style="width: 8px;height: 10px; background-color: #A4D0BB; vertical-align:bottom;" class="goog-inline-block" title=""></div><div style="width: 1px;" class="goog-inline-block"></div><div style="width: 8px;height: 10px; background-color: #A4D0BB; vertical-align:bottom;" class="goog-inline-block" title=""></div><div style="width: 1px;" class="goog-inline-block"></div><div style="width: 8px;height: 10px; background-color: #A4D0BB; vertical-align:bottom;" class="goog-inline-block" title=""></div></div></div></div></td><td class="sBS sDT sOS" align="left"><div style="outline-style:none;" __gwt_cell="cell-gwt-uid-1070"><div id="gwt-debug-column-EXTRACTED_FROM_WEBPAGE-row-19-10">-</div></div></td></tr> 
```

有没有办法用 Autoit 获得完整的源代码，包括用 javascript 生成的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T15:43:51.327

我会使用 http 请求，因为它是最直接的方法。顺便说一句，它似乎给出了状态 404 编辑： url 缺少最后一个字母，导致 404 状态。

```
#include <GUIConstantsEx.au3>
#include <winapi.au3>

MsgBox(0,default,get_url("https://adwords.google.com/o/KeywordTool"))
  Func get_url($url)

    $RequestURL = $url;
    Global $oHTTP = ObjCreate("winhttp.winhttprequest.5.1") ;
    $oHTTP.Open("GET", $RequestURL, False)
    $oHTTP.Send()
    if  $oHTTP.status == 200 Then
        Return $oHTTP.ResponseText
    Else
         Return  "ooops... status: " & $oHTTP.status  
    EndIf

EndFunc 
```

# java - 如何编辑现有的 eclipse 插件？

> ID：12448509
> 
> 赞同：6
> 
> 时间：2012-09-16T16:13:49.263
> 
> 标签：java, eclipse, eclipse-plugin

我有一个开源插件，带有允许我修改它的许可证，来自这里：[http](http://www.jcraft.com/eclipse-jcterm/) ://www.jcraft.com/eclipse-jcterm/ （在源代码部分下）。我想修改这个插件并在我的本地 Eclipse 上使用它。

1.  考虑到我拥有的 jar 文件，这甚至可能吗？还是我需要更多？
2.  我必须做什么才能在 Eclipse 中提出这个问题（显然是通过 Eclipse 插件开发视图）？
3.  如何安装此插件以验证它是否按我的意愿工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T21:39:08.770

1.  将插件 JAR 下载到某个地方。
2.  在 Eclipse 中，文件->导入->插件和片段
3.  选择你保存它的目录，选择“带有源文件夹的项目”，下一步
4.  添加插件，完成

您现在有一个代表插件的 Eclipse 项目。进行更改，然后：

1.  文件->导出->可部署插件和片段
2.  选择插件，选择一个地方保存

我不知道在你的 IDE 实例中“实时”的插件上进行开发的方法，所以我认为你必须通过将它放在插件目录中来将它安装到你的 Eclipse 副本，然后重新启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T16:19:18.050

Eclipse 有专门的插件开发环境：[PDE](http://www.eclipse.org/pde/)。这是一个关于如何开发一个简单插件的[教程。](http://www.vogella.com/articles/EclipsePlugIn/article.html)

我认为[这个指令](http://pydev.org/developers.html)非常相关，它解释了如何开始为 PyDev 做出贡献，并从解释如何设置环境开始。

# .net - 泛型类型和覆盖

> ID：12448510
> 
> 赞同：0
> 
> 时间：2012-09-16T16:14:10.270
> 
> 标签：.net, arrays, list, generics

我有一个类，我想用这些定义实现一个函数 Import ：

```
1\. Public Sub Import(of T)(ByRef Data() as T)

2\. Public Sub Import(of T)(ByRef Data(,) as T)

3\. Public Sub Import(of T)(ByRef Data()() as T)

4\. Public Sub Import(of T)(ByRef Data as List(Of T))

5\. Public Sub Import(of T)(ByRef Data as List(Of T()))

6\. Public Sub Import(of T)(ByRef Data as List(Of List(Of T)))

7\. Public Sub Import(of T)(ByRef Data() as List(Of T)) 
```

我的问题是编译器在我编写时无法确定正确的 Import 函数：

```
Dim ArrayList as List(of String)() = something
MyClass.Import(ArrayList) 
```

我明白为什么，因为 1 和 7 可以代表同一个东西。

所以我试着在我的课上写：

```
Public Sub Import(Of T)(ByRef Data() As T)
    Try
        Select Case True
            Case Data(0).GetType().IsArray
                ImportArrayArrayT(Data)
            Case Data(0).GetType.IsGenericType
                ImportArrayListT(Data)
            Case Else
                ImportArrayT(Data)
        End Select
    Catch ex As Exception

    End Try
End Sub

Protected Sub ImportArrayT(Of T)(ByRef Data() As T)
End Sub

Protected Sub ImportArrayArrayT(Of T)(ByRef Data As T()())
End Sub

Protected Sub ImportArrayListT(Of T)(ByRef Data() As List(Of T))
End Sub 
```

`ImportArrayArrayT(Data)`但我在、`ImportArrayListT(Data)`和上遇到另一个错误`ImportArrayT(Data)`。消息错误表示无法从方法的参数中推断出数据的类型。

我需要使用泛型类型，因为我不在乎类型是 String、Integer、Double...但如果它是 Array、List 或它们的组合（最大二维），我需要不同的代码。

那么你有什么想法来解决我的问题吗？我不会为每种类型（字符串、整数、...）以及列表和数组的组合编写导入函数。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T18:53:41.377

当编译器无法推断出参数的类型时，你必须给它一点提示。尝试这个：

```
将 ArrayList 调暗为列表（字符串）（）
Module1.Import（列表（字符串））（ArrayList）

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T06:26:23.383

感谢您的回答，但我想我已经找到了使用 ParamArray 的解决方案（晚上是一个很好的帮助！）。如果我使用这段代码，它看起来不错：

```
Public Sub Import(Of T)(ByVal ParamArray Data As List(Of T)())
End Sub

Public Sub Import(Of T)(ByVal ParamArray Data()() As T)
End Sub

Public Sub Import(Of T)(ByRef Data(,) As T)
End Sub

Public Sub Import(Of T)(ByRef Data As List(Of List(Of T)))
End Sub

Public Sub Import(Of T)(ByRef Data As List(Of T()))
End Sub 
```

如果我不想区分一维和二维数组（或列表），编译器会在所有情况下找到正确的函数。如果它是 2D 或 1D 数据，我想我可以管理它。

在结束这个话题之前我会测试更多的东西，但目前还可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T16:35:19.043

我要提出的一个警告是不要过度考虑管道。

如果您知道如何为您可以支持的特定类型执行导入，请考虑为您的导入声明一个接口，然后让具体类实现可以处理您的转换的类型，然后只需将接口类型作为函数的参数，例如IImportable（例如）。

**编辑：更多澄清**

使用 IImportable 之类的接口，您可以将这些 Import def 减少到：

```
Protected Sub Import(of T)(ByRef IImportable(Of T)) 
```

您甚至可以编写一个抽象基类来实现接口，然后为您希望能够从中导入的每种类型编写具体实现。

只是一个想法......希望它有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T17:38:03.820

您可以更改（至少）其中一个重载的名称，以类似于 IList 接口上的 Add 和 AddRange 的方式命名它们。除非您使用反射或动态语言功能，否则选择调用哪个方法将是编译时决定。您的方法调用代码每次都将始终引用一个特定的重载，而不仅仅是`Import`，即使在您编写该代码时它可能会感觉这是一个动态选择，因为您只需要编写`Import`而不考虑要使用哪个重载。它不像类继承，在编译后可以根据每个实例的类型继承基类型的方式来更改方法的最终选择。因此，您也可以更改导致冲突的方法的名称。

If you are aiming for dynamic usage, you may be best having an `Import` method that accepts an object parameter, and then implementing your own type checking of that object to decide which of the existing methods to use for the import, thus allowing you to decide your own order of preference when the interpretation of the input instance is otherwise ambiguous. You would then be able to just call your method with any input (even at runtime) and have it choose your preferred import method. I seem to remember that the `typeof` keyword was made a lot more efficient back when generics were introduced in .NET2 so it might not be as bad a solution as you might initially assume would be the case by avoiding at least some of the generics.

有关 typeof 的用法，请参阅[http://msdn.microsoft.com/en-us/library/0ec5kw18(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/0ec5kw18(v=vs.80).aspx)。代码看起来像：

```
If (input Is TypeOf(List(Of T)))
    ' Import somehow'

Else If (input Is TypeOf(ArrayList(Of T)))
    ' Import some other way'

' etc.'
End If 
```

# powershell - 如果 Powershell 中不存在，则创建目录结构

> ID：12448513
> 
> 赞同：1
> 
> 时间：2012-09-16T16:14:24.073
> 
> 标签：powershell

如果目录结构在其他位置不存在，我正在尝试创建它。它可以工作，但是在名称中带有括号的任何目录上都会出现错误。我想我必须以某种方式逃避它，但不知道如何。

脚本代码：

```
$source = "c:\data"
$destination = "c:\scrap\data"

Get-ChildItem -Path $source -Recurse -Force |
  Where-Object { $_.psIsContainer } |
  ForEach-Object { $_.FullName -replace [regex]::Escape($source), $destination } |
  ForEach-Object {
    if (!(Test-Path -path $_ )) { $null = New-Item -ItemType Container -Path $_ }
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T08:09:26.473

这是一个较短的解决方案：

```
Copy-Item -Path $source -Destination $destination -Filter {$_.PSIsContainer} -Recurse -Force 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T21:21:55.170

知道了。错误是由于方括号造成的。它们用于模式匹配（请参阅[此处](http://technet.microsoft.com/en-us/library/ff730956.aspx)），因此`Test-Path`实际上会检查

> C:\scrap\data\Evernote\backup\Untitled note 2_files

这不存在。你必须使用`-LiteralPath`来避免这种情况。

# javascript - JavaScript OR 运算符之谜

> ID：12448519
> 
> 赞同：-1
> 
> 时间：2012-09-16T16:15:12.343
> 
> 标签：javascript, jquery

我的朋友发布了一个关于 Javascript OR 运算符问题的问题。

我发现值得分享。

```
undefined || null || "" || NaN || "0" || 0 || Infinity || [] 
```

这个表达式的结果应该是什么，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T16:19:33.390

> 这个表达式的结果应该是什么，为什么？

您可以轻松地尝试一下（JS 控制台等），它是`"0"`字符串 - 表达式评估中的第一个非假值。您可以查看[此参考以了解逻辑运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T16:20:12.750

表达式的结果是“0”，可以使用这样的 Javascript 控制台确定：

```
var result = undefined || null || "" || NaN || "0" || 0 || Infinity || [];
console.log(result); 
```

这是因为“0”是第一个真值。

# c# - 如何创建一个像 Windows Calc 输入框一样输入数字的框？

> ID：12448522
> 
> 赞同：0
> 
> 时间：2012-09-16T16:15:32.030
> 
> 标签：c#, windows, winforms, label, numeric

[我在这个答案](https://stackoverflow.com/a/508616/1324082)中读到Windows Calc 不使用标签而不是文本框来显示输入的数字。由于我是编程新手，我想知道如何在我正在开发的 calc 上使用标签来像 Windows Calc 的标签一样工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T16:21:28.690

将`Label`控件放在表单上，​​然后为数字和运算符放置按钮。按下数字时，只需在末尾附加数字即可更新`Label`'属性。`Text`（标签的初始值应该是`0`。）当按下操作符时，对值执行操作（获取标签的`Text`属性并使用`Convert`类将其转换为数字）。如果操作需要两个号码，您可能必须存储第一个号码并清除标签以输入新号码。一旦你有两个输入数字，只需对它们执行操作并显示结果。

如果您还想**显示操作**（类似于计算器的操作方式），请在第一个标签上放置另一个标签，然后`Text`根据需要使用其属性来显示/清除操作。

如果您希望能够**按键盘上的数字键**，请将键盘事件处理程序 ( [`KeyPress`event](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keypress.aspx) ) 添加到承载标签的表单，然后在按下数字键或操作键时根据需要更新标签。确保将[`KeyPreview`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.keypreview%28v=vs.100%29.aspx)属性设置为，`true`以便您的表单首先接收所有键盘输入 - 这样您就可以将数字键定向到您的标签。

# youtube-api - 通过 API 从 Youtube 视频中获取艺术家和歌曲名称

> ID：12448523
> 
> 赞同：12
> 
> 时间：2012-09-16T16:15:38.807
> 
> 标签：youtube-api

我想知道是否可以使用 YouToube API 从 YouTube 视频中检索艺术家和歌曲标题。我想我可以只解析标题，然后按艺术家从 API 搜索（例如：）`http://www.youtube.com/artist?a=cJmvMpoqHdQ`，但这不是最佳解决方案。有没有更有效/更合适的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-16T16:33:20.883

您应该能够通过传递 youtube url 中提供的视频 ID 来获取大部分详细信息。在向以下 url 发出请求时，您可以获得标题、艺术家等等。只需在下面的 url 中输入视频 ID，您将获得包含所有详细信息的 JSON 响应。

（http://gdata.youtube.com/feeds/api/videos/Db9FBvpx49M ?v=2&alt=json-in-script&callback=youtubeFeedCallback **）**

# mysql - mysql rand() 替代方案[必须满足某些条件]

> ID：12448524
> 
> 赞同：3
> 
> 时间：2012-09-16T16:15:44.293
> 
> 标签：mysql, random

我当前的查询看起来像这样

```
SELECT *
FROM uploads
WHERE approved = 1
    AND (up-down) >= 3
ORDER BY RAND()
LIMIT 10 
```

这是从 DB 中随机选择 10 个条目，其中至少 3 个喜欢多于不喜欢。

问题是因为我在 DB 中有超过 40k 条目，而这个查询需要 1 秒。

我在谷歌上读了很多，但到目前为止没有找到任何东西。

在我的情况下，您有什么替代方案可以推荐吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:02:27.687

如果您将所有匹配的记录加载到内存中，并且它们的数量不多，那么最简单的答案就是将其`order by`放入您的 SQL 中，并在您的应用程序软件中对它们进行随机排序。例如，如果您使用的是 PHP，您可以简单地将它们全部加载到一个数组中，然后调用`array_rand()`.

如果这不是一个合适的答案，那么您仍然需要在数据库中对它们进行排序，那么在`order by rand()`太慢的情况下（即大多数情况下您有大量数据），我所知道的最佳解决方案是如下：

向您的表中添加一个新列，并使用每条记录的主键的 MD5 哈希预填充它。并添加一个索引以按新字段排序。

这将为您提供表的均匀分布的随机排序顺序。只需`order by`此字段而不是`rand()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T16:58:32.807

最佳方法取决于许多因素。这里有一些想法。

假设没有索引，当前版本的查询正在执行全表扫描、提取行、分配随机数、对行进行排序，然后选择其中的前 10 个。

全表扫描第一次可能很慢，但之后应该会很快，假设表适合内存。让我假设您的性能问题不是指查询的第一个实例，而是指表已经在页面缓存中的一个实例。

如果“已批准”具有高度选择性——例如，1% 的行被批准——那么您可以通过在已批准上建立索引来加快查询速度。

下一个替代方法是为“up-down”添加一列，并在两个键上建立索引，approved 和 UpMinusDown。假设这是选择性的，它可以降低速度。

下一个问题是您是否可以用`rand()`其他一些标准替换 —— 例如，最近的 10 个。如果是这样，您可以包含一个主键，例如 UploadID 并将其用于排序。它会走得更快。

最后，如果您的记录非常广泛，那么它可能会占用时间。在这种情况下，我想知道以下版本的查询是否会执行得更好：

```
SELECT *
FROM uploads u left outer join
     (select UploadID
      from uploads
      WHERE approved = 1
            AND (up-down) >= 3
     ORDER BY RAND()
     LIMIT 10
    ) random
    on u.UploadID = random.UploadID 
```

（这假设您在表中有一个名为 UploadID 的主键。）

此版本应仅对 UpLoadID 进行排序，然后使用索引将其连接回原始数据。

# java - Spring MVC 3表单验证注释被忽略了吗？

> ID：12448526
> 
> 赞同：0
> 
> 时间：2012-09-16T16:15:48.837
> 
> 标签：java, validation, spring-mvc, annotations

我正在学习如何使用本教程进行简单的表单验证： [http ://www.raistudies.com/spring/spring-mvc/form-validation-spring-mvc-3-hibernate-validator-jsr-303/](http://www.raistudies.com/spring/spring-mvc/form-validation-spring-mvc-3-hibernate-validator-jsr-303/)

问题是，当我输入无效数据（空白字段）时，任何地方的用户都没有错误。result.hasErrors() 总是产生错误。

我已经生成了以下代码：

索引控制器.java：

```
package pl.aadamczyk.springtest.controllers;

import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import pl.aadamczyk.springtest.beans.LoginBean;

@Controller
@RequestMapping("/index")
public class IndexController
{   
    @RequestMapping(method = RequestMethod.GET)
    public String getIndex(ModelMap model)
    {
        LoginBean loginBean = new LoginBean();
        model.addAttribute("loginBean", loginBean);

        return "index";
    }
} 
```

+ 登录控制器.java：

```
package pl.aadamczyk.springtest.controllers;

import javax.validation.Valid;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import pl.aadamczyk.springtest.beans.LoginBean;
import pl.aadamczyk.springtest.validators.LoginValidator;

@Controller
@RequestMapping("/login")
public class LoginController
{
    private LoginValidator loginValidator;

    private LoginValidator getValidator()
    {
        return loginValidator;
    }

    @Autowired
    public void setValidator(LoginValidator loginValidator)
    {
        this.loginValidator = loginValidator;
    }

    @RequestMapping(method= RequestMethod.POST)
    public String login(@Valid @ModelAttribute(value="loginBean") LoginBean loginBean,
                        ModelMap model,
                        BindingResult result)
    {
        System.out.println(result.hasErrors()); // always false

        loginValidator.validate(loginBean, result);

        return "redirect:index.html";

    }
} 
```

+ 登录验证器.java

```
package pl.aadamczyk.springtest.validators;

import org.springframework.stereotype.Component;
import org.springframework.validation.Errors;
import org.springframework.validation.Validator;
import pl.aadamczyk.springtest.beans.LoginBean;

@Component
public class LoginValidator implements Validator
{
    @Override
    public boolean supports(Class<?> type)
    {
        return LoginBean.class.isAssignableFrom(type);
    }

    @Override
    public void validate(Object o, Errors errors)
    {

    }
} 
```

登录Bean.java：

```
package pl.aadamczyk.springtest.beans;

import org.hibernate.validator.Length;
import org.hibernate.validator.NotEmpty;

public class LoginBean
{
    @NotEmpty(message="Username is mandatory.")
    @Length(min=3,max=25,message="Username must be between 3 and 25 characters length")
    private String username;

    @NotEmpty(message="Password field is mandatory.")
    @Length(min=3,max=25,message="Password must be between 5 and 25 characters length")
    private String password;

    // getters+setters skipped
} 
```

index.jsp 的一部分：

```
<form:form method="post" action="login.html" modelAttribute="loginBean">
    <table>
        <tr>
            <td>Login:</td>
            <td><form:input path="username"/></td>
            <td><form:errors path="username"/></td>
        </tr>
        <tr>
            <td>Password</td>
            <td><form:input path="password"/></td>
            <td><form:errors path="password"/></td>
        </tr>
        <tr>
            <td colspan="3"><button type="submit">Login</button></td>
        </tr>
    </table>
</form:form> 
```

dispatcher-servlet的重要内容：

```
<context:annotation-config /> 
<context:component-scan base-package="pl.aadamczyk.springtest"/>
<mvc:annotation-driven/>

<bean id="viewResolver"
      class="org.springframework.web.servlet.view.InternalResourceViewResolver"
      p:prefix="/WEB-INF/jsp/"
      p:suffix=".jsp" /> 
```

pom.xml 依赖项：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-aop</artifactId>
    <version>3.1.1.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-asm</artifactId>
    <version>3.1.1.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-aspects</artifactId>
    <version>3.1.1.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-beans</artifactId>
    <version>3.1.1.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-context</artifactId>
    <version>3.1.1.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-context-support</artifactId>
    <version>3.1.1.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-core</artifactId>
    <version>3.1.1.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-expression</artifactId>
    <version>3.1.1.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-instrument</artifactId>
    <version>3.1.1.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-instrument-tomcat</artifactId>
    <version>3.1.1.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-jdbc</artifactId>
    <version>3.1.1.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-jms</artifactId>
    <version>3.1.1.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-orm</artifactId>
    <version>3.1.1.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-oxm</artifactId>
    <version>3.1.1.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-test</artifactId>
    <version>3.1.1.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-tx</artifactId>
    <version>3.1.1.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-web</artifactId>
    <version>3.1.1.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-webmvc-portlet</artifactId>
    <version>3.1.1.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-webmvc</artifactId>
    <version>3.1.1.RELEASE</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-struts</artifactId>
    <version>3.1.1.RELEASE</version>
</dependency>
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>jstl</artifactId>
    <version>1.1.2</version>
</dependency>
<dependency>
    <groupId>taglibs</groupId>
    <artifactId>standard</artifactId>
    <version>1.1.2</version>
</dependency>
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-validator</artifactId>
    <version>3.0.0.ga</version>
    <type>jar</type>
</dependency>
<dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-web-api</artifactId>
    <version>6.0</version>
    <scope>provided</scope>
</dependency> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:09:10.317

要使验证正常工作，请确保您的类路径中有**最新**版本的[`hibernate-validator`](http://www.hibernate.org/subprojects/validator.html)。

要打印 A`JSP`页中的错误，请使用以下内容

```
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags" %>
...

 <spring:hasBindErrors name="person">
    <div class="error">
        <c:forEach var="error" items="${errors.allErrors}">
            <p>Errors ${error.defaultMessage}</p>
        </c:forEach>
    </div>
</spring:hasBindErrors> 
```

您还需要类路径中的`jstl`和`spring-webmvc`库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-03T15:08:58.523

BindingResult必须**紧跟**在经过验证的模型对象之后，否则**Spring**将无法验证该对象并引发异常。

当**Spring**看到**@Valid**时，它会尝试为正在验证的对象查找**验证器。**如果您启用了**注释驱动，Spring 会自动获取验证注释。**然后 Spring 调用验证器并将任何错误放入**BindingResult**并将**BindingResult**添加到视图模型中。

# matlab - 在 Matlab 中绘图时将 datenum 转换回日期

> ID：12448527
> 
> 赞同：4
> 
> 时间：2012-09-16T16:15:50.550
> 
> 标签：matlab, matlab-figure

我正在 Matlab 中绘制风速与时间的简单图。我使用 datenum 函数转换了时间，并且能够绘制这个图。但是，有没有办法在绘图时将 datenum 输出转换回日期格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T08:20:49.050

您可以使用[datetick](http://www.mathworks.com/help/matlab/ref/datetick.html)功能。它将序列日期编号转换为人类可读的日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-01T22:14:38.130

我不确定它是何时添加的，但现在您可以在命令中使用`datetime`格式：`plot`

取自[MATLAB 文档](http://www.mathworks.com/help/matlab/ref/plot.html#bugxq9j-9)（也可以[在这里查看](https://stackoverflow.com/questions/41322696/plotting-data-with-time-series-in-matlab)）：

```
t = 0:seconds(30):minutes(3);
y = rand(1,7);
plot(t,y,'DurationTickFormat','mm:ss') 
```

将生成（类似）这样的：

[![日期时间图](../Images/64055b4c70e54d457f931cec6c6ba875.png)](https://i.stack.imgur.com/TAE7E.png)

# python - 从具有特定修改日期python的列表中查找文件

> ID：12448533
> 
> 赞同：0
> 
> 时间：2012-09-16T16:16:56.193
> 
> 标签：python

我有一个日期和时间列表（在这种情况下来自 sar）和一个目录中的文件列表。我想浏览列表 A 中的日期/时间列表，对于列出的每个日期/时间，列出当时修改的文件。我目前的想法是实现两个 for 循环，因此对于列表 A 中的每个项目执行另一个 for 循环以查看目录并测试 A 中的项目是否与文件修改日期匹配。

不幸的是，这将非常低效，我不确定它是否会起作用。列表`datetime.datetime()` 格式为

列表 A 只是日期列表 B 是从目录中的文件中提取的修改日期（使用 glob）

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T16:51:53.993

与其将 B 设为列表，不如将其设为字典。

```
B = {}
import os
import datetime
def modification_date_time(file_name):
    time = os.path.getmtime(file_name)
    return datetime.datetime.fromtimestamp(time)

for file in file_list:
    B[modification_date_time(file_name)] = file_name 
```

您可以从中直接获取修改后的文件，无需任何搜索。
PS 正如您所说的“文件”而不是“文件”，每个修改的日期时间都只有一个文件。

# c++ - 如何在 Windows 上的 CodeBlocks 中构建和配置 boost.thread

> ID：12448536
> 
> 赞同：1
> 
> 时间：2012-09-16T16:17:12.917
> 
> 标签：c++, boost, mingw, codeblocks, boost-thread

我只是想问这个非常琐碎的问题，我不知道这是否是正确的问题，或者以前是否有人问过这个问题，我知道这可以通过访问关于 boost 的文档来解决。但我真的迷路了，被困`boost.thread`在`C::B`.

我只是一个初学者，目前正在学习如何制作 Windows 应用程序，并不认真，只是为了学习目的。我只是注意到我真的需要多线程的概念才能让它工作。所以我决定使用 Boost 库，我完全按照 boost wiki 在构建库时所说的那样做，我认为我没有做错什么。

我从文档中运行了一些代码，这些代码仅是标题，并且可以完美运行，但是 boosts 中包含的库需要某种特殊处理，包括`boost.thread`我遇到的困难。我知道#includ-ing 在我的文件中不会`Boost.thread`起作用。我从[在线教程](http://en.highscore.de/cpp/boost/)中找到的这个基本代码（我在那里找到的多线程页面上的第一个代码）中得到了错误，产生了一个错误，表明没有这样的文件目录。

```
||=== Multithreading_sample, Debug ===|
C:\Documents and Settings\Owner\Desktop\Programming\C++\Dev          
C++\App\Multithreading_sample\Multithreading_sample\main.cpp|1|boost/thread.hpp: No such 
file or directory|
C:\Documents and Settings\Owner\Desktop\Programming\C++\Dev    
C++\App\Multithreading_sample\Multithreading_sample\main.cpp||In function `void   
wait(int)':|
C:\Documents and Settings\Owner\Desktop\Programming\C++\Dev  
C++\App\Multithreading_sample\Multithreading_sample\main.cpp|6|error: `boost' has not   
been declared|
C:\Documents and Settings\Owner\Desktop\Programming\C++\Dev 
C++\App\Multithreading_sample\Multithreading_sample\main.cpp|6|error: `boost' has not 
been declared|
C:\Documents and Settings\Owner\Desktop\Programming\C++\Dev    
C++\App\Multithreading_sample\Multithreading_sample\main.cpp|6|error: `seconds' cannot 
be used as a function|
C:\Documents and Settings\Owner\Desktop\Programming\C++\Dev   
C++\App\Multithreading_sample\Multithreading_sample\main.cpp|6|error: `sleep' undeclared 
(first use this function)|
C:\Documents and Settings\Owner\Desktop\Programming\C++\Dev 
C++\App\Multithreading_sample\Multithreading_sample\main.cpp|6|error: (Each undeclared 
identifier is reported only once for each function it appears in.)|
C:\Documents and Settings\Owner\Desktop\Programming\C++\Dev   
C++\App\Multithreading_sample\Multithreading_sample\main.cpp||In function `int main()':|
C:\Documents and Settings\Owner\Desktop\Programming\C++\Dev  
C++\App\Multithreading_sample\Multithreading_sample\main.cpp|20|error: `boost' has not 
been declared|
C:\Documents and Settings\Owner\Desktop\Programming\C++\Dev   
C++\App\Multithreading_sample\Multithreading_sample\main.cpp|20|error: expected `;' 
before "t"|
C:\Documents and Settings\Owner\Desktop\Programming\C++\Dev   
C++\App\Multithreading_sample\Multithreading_sample\main.cpp|20|warning: statement is a   
reference, not call, to function `thread'|
C:\Documents and Settings\Owner\Desktop\Programming\C++\Dev   
C++\App\Multithreading_sample\Multithreading_sample\main.cpp|20|warning: statement has 
no effect|
C:\Documents and Settings\Owner\Desktop\Programming\C++\Dev   
C++\App\Multithreading_sample\Multithreading_sample\main.cpp|21|error: `t' undeclared 
(first use this function)|
||=== Build finished: 9 errors, 2 warnings ===| 
```

并且我知道它没有检测到我的`boost.thread`图书馆，我不知道在这部分去哪里。我已经搜索了谷歌，但我认为我最好的选择是单独构建 1boost.thread1，如下所示[，](https://stackoverflow.com/questions/2509863/how-to-compile-boost-thread-library)我不知道下一步该做什么。

*   我的 boost 库版本是 1.51.0 我的 C::B 是在 windows XP 上运行的 10.05，我想`boost.thread`在我的 CodeBlocks 中使用。我想做的只是粘贴代码并运行它，看看它是如何工作的。
*   我的 MinGW 版本是 3.4.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T06:13:14.990

最后，经过几天的研究、谷歌搜索和网络上的大量解决方案的交叉引用，我终于在我提供的网站上编写了第一个代码。

首先，我将 extract_directory 作为基础包含在全局变量的内置字段中。然后我转到项目选项，单击层次结构和搜索目录中的项目名称，在编译器选项卡上添加了 $(#boost.include)，在链接器选项卡上添加了 $(boost)\stage\lib。

我重新从头开始重建 boost（尤其是构建 boost.thread 库），然后我再次按照文档上的确切内容进行操作，然后我终于得到了一些错误，说 Boost::system 上的未定义引用错误。我为解决这个问题所做的就是将我的项目与那个 boost.system 链接起来（在我的例子中是我的 stage\lib 文件夹中的文件）。

我将这个库链接到我的项目 libboost_system-mgw34-mt-1_51.a

当我编译我的程序时，出现一个错误，提示未定义对 boost::chrono 的引用，库名称是：

libboost_chrono-mgw34-mt-1_51.a

我还将我的项目与它链接起来，就像我为 boost::system 所做的那样。

它编译！没有任何警告，我从这次经历中学到的是我必须寻找所需的库，到目前为止我所做的只是链接 boost.thread 库和错误只是继续说未定义的引用错误到 boost.system我不知道这与 boost 线程或其他库有关（这是我在搞砸之前遇到的第一个错误）。我认为每个 boost 库中有多个函数调用位于另一个库中，所以我必须与它们链接，这也需要这样的调用。

谢谢你们的友好回应。

# java - 以编程方式创建电子邮件帐户

> ID：12448539
> 
> 赞同：1
> 
> 时间：2012-09-16T16:17:49.680
> 
> 标签：java, android, smtp, gmail, spam

我有一个项目需要发送无声电子邮件。问题是我不想提示用户输入他的用户名和密码，因为我知道他们中的大多数不会（而且他们不应该:) 我的主要问题是找到一种方法来拥有一个有效的发件人。于是我想到了几种方法：

1.  提示用户输入他的用户名和密码，并在将这些凭据存储在客户端时对其进行加密。
2.  通过虚假帐户发送电子邮件（不知道任何 SMTP 服务器允许无需身份验证）
3.  提示用户创建一个帐户，并以某种方式获取用户名和密码（不知道任何允许这样做的 API，因为它是特定于提供商的......也许使用网络视图？）

我没有任何意图，例如向用户发送垃圾邮件。他将完全控制需要发送的内容。拥有有效发件人以便静默发送电子邮件的最佳方式是什么？但是，我研究了 ACTION.SEND_TO，因为它需要直接的用户交互，所以它不起作用。

有任何想法吗？或者我可以通过任何其他方式获得有效的发件人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:33:16.917

最简单的方法是，创建一个 gmail 帐户并将其用作 smtp 客户端代码中的帐户。在这种情况下，如果您需要用户的身份，您可以通过 android api 获取用户的主要 gmail 帐户并将其附加到您的电子邮件主题行中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:06:41.963

您可以尝试向匿名 SMTP 服务器（又名[Open mail relay](http://en.wikipedia.org/wiki/Open_mail_relay)）发送 SMTP 请求，但问题是找到了一个，它们仍然存在。

不能给你一个列表，但这里有一个在线工具来测试 SMTP 服务器是否是开放中继。快乐狩猎

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T16:30:35.003

您可以使用 google apppot，然后使用 android 获取身份验证，然后通过 Google 帐户以编程方式发布。从未使用过，但应该可以。检查此[我的 appengine 应用程序如何使用安装该应用程序的域的发件人 ID 发送邮件](https://stackoverflow.com/questions/4066542/how-can-my-appengine-app-send-mail-using-the-senderid-of-domain-that-installed-t)

编辑：检查此链接。 [https://developers.google.com/appengine/docs/python/mail/sendingmail](https://developers.google.com/appengine/docs/python/mail/sendingmail)

您将不得不使用它在服务器端发送电子邮件，并且您可以从设备传递一个命令发送什么

# c# - XNA 动画精灵从透明到不透明

> ID：12448540
> 
> 赞同：2
> 
> 时间：2012-09-16T16:18:14.583
> 
> 标签：c#, animation, xna, opacity

从透明图像转换为不透明图像时，动画图像出现问题。

如果我将图像从不透明图像设置为透明图像，则效果很好。但是，如果我将图像从透明图像动画到不透明图像，它就不起作用了。（这是问题）

示例代码：

**从不透明到透明的动画：（一切正常，它的功能）**

```
//Define variables (in construct):

float AlphaTime = 3500f; // total animate time (at milliseconds)
float AlphaTimeSubtract = 3500f; // at milliseconds
Color color = Color.White;

//Update method:

AlphaTimeSubtract -= (float)(gameTime.ElapsedGameTime.TotalMilliseconds); // abate number of elapsed time (for milliseconds) 
color *= MathHelper.Clamp(AlphaTimeSubtract / AlphaTime, 0, 1);

//Draw merhod:
spriteBatch.Draw(texture, position, color); 
```

**从透明到不透明的动画：（这是问题，它是非功能性的）！！！**

结果是看不见的精灵！（这是错误的）

正确的结果应该是：动画精灵从透明到不透明。

```
//Define variables (in construct):

float AlphaTime = 3500f; // total animate time (at milliseconds)
float AlphaTimeSubtract = 3500f; // at milliseconds
Color color = Color.White;

//Update method:

AlphaTimeSubtract -= (float)(gameTime.ElapsedGameTime.TotalMilliseconds); // abate number of elapsed time (for milliseconds) 
color *= MathHelper.Clamp(Math.Abs(AlphaTimeSubtract - AlphaTime ) / AlphaTime , 0, 1);

//Draw merhod:
spriteBatch.Draw(texture, position, color); 
```

[MathHelper.Clamp()](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.mathhelper.clamp.aspx)

`Math.Abs()`: 返回绝对值

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T18:17:31.923

**编辑：** *对不起，我的灵感来晚了:)*

您的代码不起作用，因为当`Update()`第一次调用该方法时，您的颜色的*Alpha*`0`变为 Alpha ，因为`Math.Abs(AlphaTimeSubtract - AlphaTime ) / AlphaTime`返回的值非常接近，`0.0f`因此对于您将乘以*颜色*的任何数字，它仍然存在`0`。事实上这个问题在第一种情况下没有发生，因为逻辑说从`1.0f`. 因此，在这种情况下，您必须每次从 255 开始减少 alpha。所以这应该有效：

```
//Initialize it to 0
float AlphaTimeSubtract = 0.0f;

//Then in the update method increase it (The inverse logic you used in the opaque --> transparent effect)
AlphaTimeSubtract += (float)(gameTime.ElapsedGameTime.TotalMilliseconds);
color = Color.White * MathHelper.Clamp(AlphaTimeSubtract / AlphaTime , 0, 1); 
```

与第一个效果（不透明 -> 透明）相比，我修改了代码以使其更容易。

# iphone - iOS TableViews - 移动单元格

> ID：12448542
> 
> 赞同：0
> 
> 时间：2012-09-16T16:18:35.147
> 
> 标签：iphone, ios, uitableview

我是 xCode 的初学者，我正在尝试制作一个简单的应用程序。

我正在使用 xCode 4.4.1 并想`TableView`用许多单元格制作一个。
当我单击一个单元格时，它应该`ViewController`在顶部显示一个带有收藏按钮的按钮。

当这个按钮被按下时，它会将单元格移动到另一个`TableView`，用于收藏。

我试过寻找答案但没有找到任何东西，所以我正在寻找一个完整的教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T17:23:38.940

不要从“移动单元格”的角度来考虑它 - 从移动或标记表格的源数据的角度来考虑它。

您的第一个表将需要一个从中获取数据的模型 - 假设这是一个`NSArray`包含将显示在表中的对象。

如果您想要一个收藏夹列表，您需要一种方法来跟踪为您的表格提供数据的数组中的哪些元素已被标记为收藏夹。您可以通过将元素复制到另一个收藏夹数组中来做到这一点，或者通过在数据对象上设置一个标志来响应按钮按下。

然后您的收藏夹表将从收藏夹数组中加载；或者可以过滤主数组以仅检索那些已标记的元素。

# iphone - 在对每一项核心数据执行任务时，如何避免内存不足？

> ID：12448545
> 
> 赞同：0
> 
> 时间：2012-09-16T16:19:03.600
> 
> 标签：iphone, objective-c, ios, core-data, memory

我正在尝试执行与此类似的任务：

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Entry"];

        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(version == %@)", @"1.0"];

        [request setPredicate:predicate];

        NSArray *results = [[AppDelegate applicationDelegate].managedObjectContext executeFetchRequest:request error:nil];

int i = 0;

        while (i < results.count) {

            Entry *entry = [results objectAtIndex:i];

            entry.version = @"1.1";

            i++;
        } 
```

但是它在完成每个结果之前就耗尽了内存。

我知道这一点：

```
[request setFetchBatchSize:20]; 
```

但我想知道这将如何与我所拥有的一起工作？它会在 20 个结果后停止处理，还是只抓取前 20 个结果然后以某种方式抓取下一个 20 并继续？

我基本上要问的是我如何只抓取一定数量的数据，以阻止它耗尽内存，然后再抓取另一批？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T16:21:39.617

你猜对了。你必须使用`setFetchBatchSize:`. 这只会返回前 20 个对象。如果要获取接下来的 20 个对象，则必须使用[`setFetchOffset:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/CoreDataFramework/Classes/NSFetchRequest_Class/NSFetchRequest.html#//apple_ref/occ/instm/NSFetchRequest/setFetchOffset%3a).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T16:31:55.453

这是使用`@autoreleasepool`

在循环中执行的所有代码周围放置一个@autoreleasepool。这将在对象被处理后自动释放它们，因此您的内存占用保持在较低水平。如果使用这种技术，您不必指定批量大小。

有关更多信息，请参阅此处的苹果文档；

[https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html)

# ruby - Sublime Text 2 不保存构建的 SASS 文件

> ID：12448546
> 
> 赞同：2
> 
> 时间：2012-09-16T16:19:05.523
> 
> 标签：ruby, sass, sublimetext2, sublimetext

正如自述文件中所述，我为 Sublime Text 2 安装了[SASS 构建系统，一切都成功了（也安装了 SASS）。](https://github.com/jaumefontal/SASS-Build-SublimeText2)现在，如果我尝试构建我的 .scss 文件，ST2 会打印出类似“[Finished in 0.2s]”的内容，但不会显示任何结果或保存 .css 文件。我也可以写一些错误的代码，它不会抱怨它，只是再次给我一个“完成”的消息。知道是什么导致了这种行为吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T20:44:14.763

我的山狮也有同样的问题。
我通过更改 SASS.sublime-build （以及我为 SASS 拥有的所有其他构建文件）中的“cmd”行来修复它

```
["sass", "--update", "$file:${file_path}/${file_base_name}.css"] 
```

到

```
["sass --update $file:${file_path}/${file_base_name}.css"] 
```

不知道为什么，但实际上，如果您将命令写在一个包含多个项目的数组中，它将不起作用，而一个字符串中的命令却可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-06T05:49:07.930

宝石安装 sass

在 ST2 /tools/build system/new build system...

```
{
  "cmd": ["cmd", "/c", "sass --style compressed", "$file", "$file_base_name.css.min"]
} 
```

或者

```
{
  "cmd": ["cmd", "/c", "sass", "$file", "$file_base_name.css"]
} 
```

另存为“sass.sublime-build”

# php - Search Helper 应该是函数还是类

> ID：12448548
> 
> 赞同：1
> 
> 时间：2012-09-16T16:19:07.737
> 
> 标签：php, oop, design-patterns

在我的搜索页面要求中，我需要执行以下操作。

1.  用户执行搜索的文本
    （例如 20k+ 手机 + 三星）

2.  搜索细化
    的顺序（对于特定用户：细化按“价格、公司、交货”的顺序排列，对于其他用户，它可以是“交货、价格、公司”。此类将处理此问题）

3.  当结果较少时放宽一些参数。
    （如果结果因某种逻辑而减少（比如价格范围略有变化）将被应用。增加结果数）

4.  搜索结果缓存
    （缓存搜索结果）

对于这些操作，我创建了一个单独的类。我想知道为此创建类或在一些常见的搜索函数类中创建一个函数是否正确，说“seacrhUtility”应该足够了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T18:35:58.393

由于您问题的标签之一是 OOP，而 OOP 的[SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)原则之一是[单一职责原则](http://www.objectmentor.com/resources/articles/srp.pdf)，因此尝试遵循 SRP 可能是一个好主意。

SRP 的关键点是将“责任”定义为“改变的理由”。

根据您的描述，这四点听起来像是它们都可以独立更改，因此您可以有一个类来实现每一点。

根据确切的细节，您可能希望只在一类中进行实际搜索和排序，因为这两者可能只是一种“责任”。

参数的放松听起来像是与搜索操作没有直接关系的东西，它可能会改变并演变成相当复杂的东西。这可能应该被设计为一个单独的类，甚至可能是一个[Strategy](http://en.wikipedia.org/wiki/Strategy_pattern)类。

现在缓存绝对应该作为一个单独的类来实现，因为它是一个完全不同的职责。考虑到您可能必须更改缓存方式或缓存结果的位置，并且您不想为此触及搜索算法。

另一方面，如果您的应用程序相对简单，并且不需要更改，并且您可以在四个少于 4-5 行代码的函数中实现所有四个点 - 您可能应该这样做。此外，如果您的项目的其余部分是仅使用函数或使用单体对象构建的，那么坚持这种方法可能会更好。使用常识。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T17:03:30.837

为此使用一个类也很酷，但我个人只会使用一个函数，您可以将所有需要作为几个函数参数传递，并且该函数将在几个静态操作后返回您最终选择的记录，仅此而已。

当我需要在不同时间（我的代码的不同部分）对我的输入执行多个操作或者当有很多代码或函数要使用时，我会使用类......

# cuda - 内联 PTX 汇编代码功能强大吗？

> ID：12448549
> 
> 赞同：4
> 
> 时间：2012-09-16T16:19:10.013
> 
> 标签：cuda

我看到一些代码示例，人们在 C 代码中使用内联 PTX 汇编代码。CUDA toolkit中的文档提到PTX很强大，为什么会这样呢？如果我们在 C 代码中使用这样的代码，我们会得到什么好处？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-17T05:26:15.357

内联 PTX 使您可以访问未通过 CUDA intrinsincs 公开的指令，并允许您应用编译器中缺少的或语言规范禁止的优化。有关使用内联 PTX 有利的工作示例，请参阅： [cuda 上的 128 位整数？](https://stackoverflow.com/questions/6162140/128-bit-integer-on-cuda/6220499#6220499)

使用内联 PTX 的 128 位加法只需要 4 条指令，因为它可以直接访问进位标志。作为 HLL，C/C++ 没有进位标志的表示，因为给定的硬件平台可能没有进位标志（例如 MIPS）、单个进位标志（例如 x86、sm_2x），甚至多个进位标志。与 128 位加减法的 4 指令 PTX 版本相比，这些操作可能在 C 中编码如下：

```
#define SUBCcc(a,b,cy,t0,t1,t2) \
  (t0=(b)+cy, t1=(a), cy=t0<cy, t2=t1<t0, cy=cy+t2, t1-t0)
#define SUBcc(a,b,cy,t0,t1) \
  (t0=(b), t1=(a), cy=t1<t0, t1-t0)
#define SUBC(a,b,cy,t0,t1) \
  (t0=(b)+cy, t1=(a), t1-t0)
#define ADDCcc(a,b,cy,t0,t1) \
  (t0=(b)+cy, t1=(a), cy=t0<cy, t0=t0+t1, t1=t0<t1, cy=cy+t1, t0=t0)
#define ADDcc(a,b,cy,t0,t1) \
  (t0=(b), t1=(a), t0=t0+t1, cy=t0<t1, t0=t0)
#define ADDC(a,b,cy,t0,t1) \
  (t0=(b)+cy, t1=(a), t0+t1)

unsigned int cy, t0, t1, t2;

res.x = ADDcc  (augend.x, addend.x, cy, t0, t1);
res.y = ADDCcc (augend.y, addend.y, cy, t0, t1);
res.z = ADDCcc (augend.z, addend.z, cy, t0, t1);
res.w = ADDC   (augend.w, addend.w, cy, t0, t1);

res.x = SUBcc  (minuend.x, subtrahend.x, cy, t0, t1);
res.y = SUBCcc (minuend.y, subtrahend.y, cy, t0, t1, t2);
res.z = SUBCcc (minuend.z, subtrahend.z, cy, t0, t1, t2);
res.w = SUBC   (minuend.w, subtrahend.w, cy, t0, t1); 
```

上面的加法和减法可能会编译到大约是相应内联 PTX 版本使用的指令数量的三到四倍。

# javascript - 使用 margin-left（在 100% 宽度的元素上）显示固定菜单时避免使用水平滚动条

> ID：12448551
> 
> 赞同：0
> 
> 时间：2012-09-16T16:19:18.527
> 
> 标签：javascript, jquery, html, css, css-position

在我的页面中，左侧有一个固定菜单`td`（不随页面滚动），宽度为 150 像素。页面容器为 100% 宽度。当您`position:fixed`在元素上使用时，它会将元素从布局中移除，因此您必须围绕它进行工作以确保可以看到所有内容。正因为如此，我`margin-left:150px`在页面容器上进行了设置。这导致它从屏幕右侧溢出 150 像素，从而显示水平滚动条。

我不能只隐藏溢出，因为元素需要水平居中，而且它们会显得太靠右了。我不能用 JavaScript 计算它，因为菜单是可折叠的，所以每次折叠菜单时都需要重新计算宽度。我也无法编辑 HTML；我正在用 CSS 和 JavaScript/jQuery 重新设计一个网站。

这是一个可以更好地解释我的问题的演示：http: [//jsfiddle.net/3yBRV/4/embedded/result/](http://jsfiddle.net/3yBRV/4/embedded/result/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T16:24:17.087

从您的单元格中删除`width: 100% !important;`以摆脱水平滚动。您的 td 元素将自行完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T20:01:56.723

好的，我想通了。因为在属性`td`中设置了宽度，所以使用覆盖了该设置。`600``width: auto !important`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T17:34:41.700

你想通过改变盒子模型`box-sizing: border-box`。

[http://css-tricks.com/box-sizing/](http://css-tricks.com/box-sizing/)

# ios - UIWebView 刺激器/应用程序？

> ID：12448563
> 
> 赞同：0
> 
> 时间：2012-09-16T16:20:59.260
> 
> 标签：ios, xcode, uiview, webui

目前正在制作通过使用 UIWebView 的各种平台运行的应用程序 [html5/js]，我通常在 Safari 中测试它们，将 webagent 更改为 iPad，但总是存在一些不一致之处。反正有没有在 OSX 上运行刺激器？[也许像这样，[http://www.edumobile.org/iphone/ipad-development/webview-application-in-ipad/](http://www.edumobile.org/iphone/ipad-development/webview-application-in-ipad/) ]

是否可以编译一个应用程序，即我可以测试我的“应用程序”的小型浏览器或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T16:31:31.640

1.  从[App Store](http://itunes.apple.com/app/xcode/id497799835?mt=12)下载并安装 Xcode 。
2.  启动 Xcode。
3.  打开 iOS 模拟器： ![在此处输入图像描述](../Images/470234e2a577edd8c7b170ceb5cfdb1c.png)
4.  选择您选择的设备： ![在此处输入图像描述](../Images/7ea9a90110f893427da3202ac2186a79.png)
5.  启动 Safari 并测试您的网站。

# css - 图像下方的空白 - 显示：块不起作用

> ID：12448564
> 
> 赞同：2
> 
> 时间：2012-09-16T16:21:02.007
> 
> 标签：css, css-float

我的标题有一个图像，我试图在图像上放置一个文本块，以使图像的一部分“可点击”。但是，当我这样做时，会出现标题下方和正文上方的空白。

有谁知道我该如何纠正这个？图片：http : [//imgur.com/sE7iP](http://imgur.com/sE7iP)

CSS

```
 .meio {
        background: url("http://www.oneideaperday.com/meio5.png");
        background-repeat: repeat-y;
        background-position:50% 0%;
        text-indent: 250px;
           }

    .img {
      margin: 0;
      padding: 0;
      display: block;
      vertical-align:bottom;
      position:relative; top:5px;
      text-align: center;
          }

     .image {
             position:relative;
             float:center;
         text-align: center
             }

     .image .text {
               opacity: 0;
                   position:absolute;
                   top:55px; 
                   left:505px;
                   width:300px; 
                   }

     .img .termos {
                   position:absolute;
                   top:55px; 
                   left:835px;
                   width:300px;
               -webkit-transform: rotate(45deg); 
               -moz-transform: rotate(45deg);
               font-size: 10px;
               opacity: 0;
                   } 
```

HTML

```
 <!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="style.css" />
<body>
    <div class="img">
    <img src="http://www.oneideaperday.com/header1.png" alt=""/>
        <div class ="termos">
            <p>Termos de Uso</p>
    </div>  

    <div class="meio">
        a</br>
        a</br>
        a</br>
        a</br>
        a</br>
        a</br>
        a</br>
        a</br>
        a</br>
        a</br>
        a</br>
        a</br>
    </div>

    <div class="image">
      <img alt="" src="http://www.oneideaperday.com/footer.png" />
      <div class="text">
        <p><a href="http://www.acumula.com.br">Acumula.com.br</a></p>
      </div>
    </div>

</body>
</head>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T16:27:04.847

您的标记中似乎有很多错误......在尝试解决问题之前我会先修复这些错误 - 因为它可能会自动消失：

首先，确保所有打开和关闭元素相互关联*（如下图所示，您没有足够的`</div>`工作量......主体、头部和 html 都在抱怨标签不匹配）* . 您需要添加 a`</head>`并整理您的缩进将帮助您追踪未闭合的标签。

其次`</br>`不是标签，你应该使用`<br />`

![显示错误标记的屏幕截图](../Images/8f6be1bc634c1d6db27bca887be13e2b.png)

如果您尝试下面的标记会发生什么？

```
<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="img">
      <img src="http://www.oneideaperday.com/header1.png" alt="" />
      <div class="termos">
        <p>Termos de Uso</p>
      </div>  
      <div class="meio">
        a<br />
        a<br />
        a<br />
        a<br />
        a<br />
        a<br />
        a<br />
        a<br />
        a<br />
        a<br />
        a<br />
        a<br />
      </div>
      <div class="image">
        <img alt="" src="http://www.oneideaperday.com/footer.png" />
        <div class="text">
          <p><a href="http://www.acumula.com.br">Acumula.com.br</a></p>
        </div>
      </div>
    </div>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T16:44:44.113

关闭`.termos` `div`并将图像用作`background-image`for `img`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T16:35:55.100

我`</div>`之前在您的标记中添加了一个结束`<div class="meio">`符，空白间隙对我来说消失了。正如@pebbl 所说，您有很多标记错误，纠正错误似乎已经解决了您的直接问题。

```
<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="style.css" />
<body>
    <div class="img">
      <img src="http://www.oneideaperday.com/header1.png" alt=""/>
      <div class ="termos">
          <p>Termos de Uso</p>
      </div>  
    </div>
    <div class="meio">
        a</br>
        a</br>
        a</br>
        a</br>
        a</br>
        a</br>
        a</br>
        a</br>
        a</br>
        a</br>
        a</br>
        a</br>
    </div>

    <div class="image">
      <img alt="" src="http://www.oneideaperday.com/footer.png" />
      <div class="text">
        <p><a href="http://www.acumula.com.br">Acumula.com.br</a></p>
      </div>
    </div>

</body>
</head>
</html>​ 
```

# codeigniter - 使用 CodeIgniter 的模板解析器类时，我可以删除/隐藏未使用的伪变量吗？

> ID：12448565
> 
> 赞同：0
> 
> 时间：2012-09-16T16:21:02.527
> 
> 标签：codeigniter, template-engine

所以我使用 Codeigniter 的[模板解析器类](http://codeigniter.com/user_guide/libraries/parser.html)作为我的模板引擎。这是非常基本的，但它应该做我需要的。我唯一不满意的是它显示了未使用的伪变量。这对我来说是一个交易破坏者！

***控制器***

```
public function index()
{
   $this->parser->parse('templates/home', array('foo'=>'bar'));
} 
```

***看法***

```
{foo}
{hello} 
```

***输出***

> 酒吧{你好}

有人知道我如何防止显示未使用的伪变量吗？

* * *

代码点火器 2.1.2

* * *

在旁注中，我对替代方案持开放态度。我一直无法为 CodeIgniter 2 找到一个健壮的模板引擎，它没有过时或没有像样的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:49:06.820

事实上，在我自己的研究中，我也无法为 CodeIgniter 找到任何*强大*的模板引擎。在使用时，它们扮演着极其重要的角色，因此当它们失败时，它们会严重失败。第三方解决方案容易受到错误的影响，并且始终面临被开发人员放弃的风险。本机实现没有我需要的必要功能。这些风险+缺乏功能对于我的要求是不可接受的。也许你的也是。

我给你这个建议：

## **只需使用 PHP。**

实际上，它本身就是一个模板引擎。打开`short_open_tags`并`php.ini`使用 PHP 的[简短回显语法](http://php.net/manual/en/function.echo.php)。在编写视图时，您将携带几个额外的字符，但如果您需要，可以将实际的 PHP 变量/数组放在您的指尖，这将带来巨大的好处。

模板代码：

```
{blog_entries}
<h5>{title}</h5>
<p>{body}</p>
{/blog_entries} 
```

PHP 等价物：

```
<? foreach($blog_entries as $b):?>
<h5><?= $b['title'];?></h5>
<p><?= $b['body']?></p>
<? endforeach; ?> 
```

关于这个问题一直存在争议，但在我看来，模板引擎只会使设置复杂化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T16:49:48.357

我不知道模板解析器类，但作为替代你可以说

```
<?php echo (isset($foo)) ? $foo : '' ; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T04:31:05.137

我最终使用了 Phil Sturgeon 的 CodeIgniter-Template 模板库，具有讽刺意味的是，它并没有比 CodeIgniter 中内置的模板库好得多。然而，它确实解决了我眼前的问题。

[http://getsparks.org/packages/template/show](http://getsparks.org/packages/template/show)

# wso2 - WSO2 ESB 4.5.0：无法将服务器添加到开发人员工作室 2.0.1

> ID：12448566
> 
> 赞同：0
> 
> 时间：2012-09-16T16:21:28.060
> 
> 标签：wso2, wso2esb

当我尝试将 WSO2 ESB 4.5.0 服务器添加到开发人员工作室时，我观察到以下错误并且不让我添加服务器。

有什么线索吗？

![在此处输入图像描述](../Images/acb1c92f4baecfda31e2d175d8e6c8ab.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T18:28:44.460

Developer Studio 2.0.1 在基于 WSO2 Carbon 4.0.0 的产品发布前几个月发布。

因此，Developer Studio 2.0.1 在 Developer Studio 2.0.1 发布时包含对 Carbon Server 结构的支持。

但是在 Dev Studio 2.0.1 和基于 Carbon 4.0 的产品发布之间的时间段内，Carbon 服务器的结构发生了一些变化。

由于这些更改，您将无法在 Dev Studio 2.0.1 中使用最新系列的 Carbon 服务器 (4.0)。

我们将在即将发布的 Dev Studio 2.1.0 Milestone 8 中解决此问题。

因此，您将能够在该版本中使用最新的 Carbon 服务器，而不会出现任何问题。

笔记：

您似乎正在尝试使用 WSO2 ESB 4.5.0，它是基于 Carbon 4.0.1 的产品，具有 Carbon 3.2.0 服务器类别。

但是您需要使用 Carbon 4.0.0 类别。

当您尝试它时，您将在 Developer Studio 2.0.1 中遇到一个稍微不同的问题，即关于缺少 lib/patches 文件夹的投诉。

但是我们已经为 Developer Studio 2.1.0 Milestone 8 修复了这个问题。

谢谢并恭祝安康，

哈沙娜

# asp.net-mvc - 如何在 AttributeRouting 中捕获所有以 /X 开头的请求

> ID：12448568
> 
> 赞同：0
> 
> 时间：2012-09-16T16:21:34.383
> 
> 标签：asp.net-mvc, attributerouting

网址：/X?take=1&skip=4

[GET("X/{request:alpha?}", IsAbsoluteUrl = true)]

[GET("X{request:alpha?}", IsAbsoluteUrl = true)]

[GET("X{request:alpha*}", IsAbsoluteUrl = true)]

不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T17:25:25.437

因为使用 POST 属性会阻止 GET 请求处理。

我同时使用 POST 和 GET。我已将它们更改为 ROUTE。

# java - 如何解析这样的文档？

> ID：12448570
> 
> 赞同：0
> 
> 时间：2012-09-16T16:21:58.697
> 
> 标签：java, android, xml, parsing, saxparser

我有一个问题，如果有人可以帮助我，那就太好了:) 我正在尝试解析这个 XML 文件：

```
 <data>
    <day>
        <match>

            <team1>foo</team1>
            <team2>foo</team2>

            <resultfinal></resultfinal>
            <result1></result1>
            <result2></result2>

            <venue>1</venue>
            <gmt>10:00</gmt>
            <groupe>B</groupe>

        </match>

        <match>

            <team1>foo</team1>
            <team2>foo</team2>

            <resultfinal></resultfinal>
            <result1></result1>
            <result2></result2>

            <venue>1</venue>
            <gmt>14:00</gmt>
            <groupe>A</groupe>

        </match>
    </day>

    <day>
        <match>

            <team1>foo</team1>
            <team2>foo</team2>

            <resultfinal></resultfinal>
            <result1></result1>
            <result2></result2>

            <venue>1</venue>
            <gmt>10:00</gmt>
            <groupe>B</groupe>

        </match>

        <match>

            <team1>foo</team1>
            <team2>foo</team2>

            <resultfinal></resultfinal>
            <result1></result1>
            <result2></result2>

            <venue>1</venue>
            <gmt>14:00</gmt>
            <groupe>A</groupe>

        </match>
    </day>

</data> 
```

但我不知道如何做到这一点。使用我的解析器，我可以解析这样的文件：

```
<data>
    <match>

        <team1>aust</team1>
        <team2>irl</team2>

        <resultfinal></resultfinal>
        <result1></result1>
        <result2></result2>

        <venue>1</venue>
        <gmt>10:00</gmt>
        <groupe>B</groupe>

    </match>

    <match>

        <team1>ind</team1>
        <team2>afg</team2>

        <resultfinal></resultfinal>
        <result1></result1>
        <result2></result2>

        <venue>1</venue>
        <gmt>14:00</gmt>
        <groupe>A</groupe>

    </match>
</data> 
```

但我不知道如何存储每个`<day>`标签的数据。

我的 XML 处理程序如下所示：

```
@Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {

        if (localName.equalsIgnoreCase("team1"))
            data.setTeam1(elementValue);
        else if (localName.equalsIgnoreCase("team2"))
            data.setTeam2(elementValue);
        else if (localName.equalsIgnoreCase("resultfinal"))
            data.setResultfinal(elementValue);
        else if (localName.equalsIgnoreCase("result1"))
            data.setResult1(elementValue);
        else if (localName.equalsIgnoreCase("result2"))
            data.setResult2(elementValue);
        else if (localName.equalsIgnoreCase("date"))
            data.setDate(elementValue);
        else if (localName.equalsIgnoreCase("venue"))
            data.setVenue(elementValue);
        else if (localName.equalsIgnoreCase("gmt"))
            data.setGmt(elementValue);

    }

    @Override
    public void startElement(String uri, String localName, String qName,
            org.xml.sax.Attributes attributes) throws SAXException {
        // TODO Auto-generated method stub
        super.startElement(uri, localName, qName, attributes);
        elementOn = true;

        if (localName.equals("data")) {
            data = new XMLGettersSetters();
        } else if (localName.equals("match")) {

        }
    } 
```

但是这样我只能解析像第二个这样的文件。如何解析第一个文件以及如何存储数据？我无法将其存储在 Arraylist 中。

## 编辑：

我尝试按照 Don Roby 的建议构建它，但我的应用程序总是崩溃。这是我到目前为止所做的：

**主要活动：**

```
public class MainActivity extends Activity {
    XMLHandler data;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

try {
             Log.i("PARSER", "versuch!");

                /**
                 * Create a new instance of the SAX parser
                 **/

                SAXParserFactory saxPF = SAXParserFactory.newInstance();
                SAXParser saxP = saxPF.newSAXParser();
                XMLReader xmlR = saxP.getXMLReader();

                URL url = new URL("my xml file"); // URL of the XML

                /** 
                 * Create the Handler to handle each of the XML tags. 
                 **/
                 data = new XMLHandler();
                xmlR.setContentHandler(data);
                xmlR.parse(new InputSource(url.openStream()));

            } catch (Exception e) {
                System.out.println(e);
                Log.i("PARSER", "ES KLAPPT NICHT!");
            }

        TextView txt1 = (TextView) findViewById(R.id.txtview1);
        txt1.setText(data.getTournament().get(0).get(0).getTeam1().toString());

    } 
```

**XML处理程序：**

```
public class XMLHandler extends DefaultHandler {

    private Tournament tournament;
    private TournamentDay currentDay;
    private Match currentMatch;
    private StringBuilder builder;

    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {

        if (qName.equalsIgnoreCase("team1"))
            currentMatch.setTeam1(builder.toString());
        else if (qName.equalsIgnoreCase("team2"))
            currentMatch.setTeam2(builder.toString());
        else if (qName.equalsIgnoreCase("resultfinal"))
            currentMatch.setResultfinal(builder.toString());
        else if (qName.equalsIgnoreCase("result1"))
            currentMatch.setResult1(builder.toString());
        else if (qName.equalsIgnoreCase("result2"))
            currentMatch.setResult2(builder.toString());
        else if (qName.equalsIgnoreCase("venue"))
            currentMatch.setVenue(builder.toString());
        else if (qName.equalsIgnoreCase("gmt"))
            currentMatch.setGmt(builder.toString());
        else if (qName.equals("match"))
            currentDay.add(currentMatch);
        else if (qName.equals("day"))
            tournament.add(currentDay);
    }

    @Override
    public void startElement(String uri, String localName, String qName,
                             org.xml.sax.Attributes attributes) throws SAXException {
        if (qName.equals("data")) {
            tournament = new Tournament();
        }
        if (qName.equals("day")) {
            currentDay = new TournamentDay();
        }
        else if (qName.equals("match")) {
            currentMatch = new Match();
        }
        else {
            builder = new StringBuilder();
        }
    }

    @Override
    public void characters(char[] chars, int start, int length) throws SAXException {
        builder.append(chars, start, length);
    }

    public Tournament getTournament() {
        return tournament;
    }
} 
```

**比赛：**

```
public class Tournament {

    private List<TournamentDay> days;

    public Tournament() {
        this.days = new ArrayList<TournamentDay>();
    }

    public void add(TournamentDay day) {
        days.add(day);
    }
    public TournamentDay get(int i) {
       return days.get(i); 
    }
} 
```

**匹配：**

```
public class Match {
    private String team1;
    private String team2;
    private String resultfinal;
    private String result1;
    private String result2;
    private String date;
    private String venue;
    private String gmt;

    public String getTeam1() {
        return team1;
    }

    public void setTeam1(String team1) {
        this.team1 = team1;
    }

    public String getTeam2() {
        return team2;
    }

    public void setTeam2(String team2) {
        this.team2 = team2;
    }

    public String getResultfinal() {
        return resultfinal;
    }

    public void setResultfinal(String resultfinal) {
        this.resultfinal = resultfinal;
    }

    public String getResult1() {
        return result1;
    }

    public void setResult1(String result1) {
        this.result1 = result1;
    }

    public String getResult2() {
        return result2;
    }

    public void setResult2(String result2) {
        this.result2 = result2;
    }

    public String getDate() {
        return date;
    }

    public void setDate(String date) {
        this.date = date;
    }

    public String getVenue() {
        return venue;
    }

    public void setVenue(String venue) {
        this.venue = venue;
    }

    public String getGmt() {
        return gmt;
    }

    public void setGmt(String gmt) {
        this.gmt = gmt;
    }

} 
```

最后是我的 XML 文件：

```
<data>
    <day>

        <match>

            <team1>ind</team1>
            <team2>afg</team2>

            <resultfinal></resultfinal>
            <result1></result1>
            <result2></result2>
            <date>19.09</date>
            <venue>1</venue>
            <gmt>14:00</gmt>

        </match>

        <match>

            <team1>eng</team1>
            <team2>afg</team2>

            <resultfinal></resultfinal>
            <result1></result1>
            <result2></result2>

            <date>21.09</date>
            <venue>1</venue>
            <gmt>14:00</gmt>

        </match>
        <match>

            <team1>ind</team1>
            <team2>eng</team2>

            <resultfinal></resultfinal>
            <result1></result1>
            <result2></result2>
            <date>23.09</date>
            <venue>2</venue>
            <gmt>10:00</gmt>

        </match>
    </day>
    <day>
        <match>

            <team1>aust</team1>
            <team2>irl</team2>

            <resultfinal></resultfinal>
            <result1></result1>
            <result2></result2>
            <date>19.08</date>
            <venue>1</venue>
            <gmt>10:00</gmt>

        </match>
        <match>

            <team1>aust</team1>
            <team2>west</team2>

            <resultfinal></resultfinal>
            <result1></result1>
            <result2></result2>
            <date>22.09</date>
            <venue>1</venue>
            <gmt>14:00</gmt>

        </match>
        <match>

            <team1>west</team1>
            <team2>irl</team2>

            <resultfinal></resultfinal>
            <result1></result1>
            <result2></result2>

            <date>24.09</date>
            <venue>1</venue>
            <gmt>14:00</gmt>

        </match>

    </day>

</data> 
```

Edit2：这是日志：

```
09-17 15:26:49.299: I/System.out(3392): java.lang.NullPointerException
09-17 15:26:49.299: I/PARSER(3392): ES KLAPPT NICHT!
09-17 15:26:49.299: D/AndroidRuntime(3392): Shutting down VM
09-17 15:26:49.299: W/dalvikvm(3392): threadid=1: thread exiting with uncaught exception (group=0xb40a64f0)
09-17 15:26:49.299: I/Process(3392): Sending signal. PID: 3392 SIG: 9
09-17 15:26:49.299: D/AndroidRuntime(3392): procName from cmdline: com.example.xmldownloader
09-17 15:26:49.299: E/AndroidRuntime(3392): in writeCrashedAppName, pkgName :com.example.xmldownloader
09-17 15:26:49.299: D/AndroidRuntime(3392): file written successfully with content: com.example.xmldownloader StringBuffer : ;com.example.xmldownloader
09-17 15:26:49.299: E/AndroidRuntime(3392): FATAL EXCEPTION: main
09-17 15:26:49.299: E/AndroidRuntime(3392): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.xmldownloader/com.example.xmldownloader.MainActivity}: java.lang.NullPointerException
09-17 15:26:49.299: E/AndroidRuntime(3392):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1698)
09-17 15:26:49.299: E/AndroidRuntime(3392):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1726)
09-17 15:26:49.299: E/AndroidRuntime(3392):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
09-17 15:26:49.299: E/AndroidRuntime(3392):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:949)
09-17 15:26:49.299: E/AndroidRuntime(3392):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-17 15:26:49.299: E/AndroidRuntime(3392):     at android.os.Looper.loop(Looper.java:130)
09-17 15:26:49.299: E/AndroidRuntime(3392):     at android.app.ActivityThread.main(ActivityThread.java:3770)
09-17 15:26:49.299: E/AndroidRuntime(3392):     at java.lang.reflect.Method.invokeNative(Native Method)
09-17 15:26:49.299: E/AndroidRuntime(3392):     at java.lang.reflect.Method.invoke(Method.java:507)
09-17 15:26:49.299: E/AndroidRuntime(3392):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:880)
09-17 15:26:49.299: E/AndroidRuntime(3392):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:638)
09-17 15:26:49.299: E/AndroidRuntime(3392):     at dalvik.system.NativeStart.main(Native Method)
09-17 15:26:49.299: E/AndroidRuntime(3392): Caused by: java.lang.NullPointerException
09-17 15:26:49.299: E/AndroidRuntime(3392):     at com.example.xmldownloader.MainActivity.onCreate(MainActivity.java:58)
09-17 15:26:49.299: E/AndroidRuntime(3392):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
09-17 15:26:49.299: E/AndroidRuntime(3392):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1662)
09-17 15:26:49.299: E/AndroidRuntime(3392):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T16:32:06.640

一个好的做法是使用反映您的 XML 模式的对象模型。像这样：一个名为的对象`Day`，其中包含 a `Collection`of `Matches`，其中包含 8 个字段（team1、team2、result1 等）。

使用该模型，您的解析器所要做的就是在解析过程中构建对象。

有了它，您还可以使用一些很棒的框架来将 XML 文件转换为 java 对象，例如[XStream](http://xstream.codehaus.org/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T18:09:40.827

Gilberto 关于使对象模型反映 XML 模式的建议很好。

在我对您的域的解释中，我创建了一个`Match`或多或少是 your`XMLGettersSetters`的类，一个`Day`只包含 a`List<Match>`的类，以及一个`Tournament`包含 a的类`List<Day>`。

您当然可以将整个混乱表示为`List<List<Match>>`，但是将它们封装在您自己的类中会更好一些。

我不得不将你所有的引用改为`localName`使用`qName`，这可能只是反映了我的测试中的一个错误，但这大致有效，应该让你知道如何处理这种结构。

上面列出的类非常简单，但在这里。

`Tournament`并且`TournamentDay`只是列表的包装器：

```
public class Tournament {

    private List<TournamentDay> days;

    public Tournament() {
        this.days = new ArrayList<TournamentDay>();
    }

    public void add(TournamentDay day) {
        days.add(day);
    }
}

public class TournamentDay {

    private List<Match> matches;

    public TournamentDay() {
        this.matches = new ArrayList<Match>();
    }

    public void add(Match match) {
        matches.add(match);
    }
} 
```

`Matcher`只是一个包含一堆字符串字段和设置器的类。在实际使用中，您可能还需要 getter，并且可能不希望所有字段都是字符串。

```
public class Match {
    private String gmt;
    private String team1;
    private String team2;
    private String venue;
    private String result1;
    private String result2;
    private String resultfinal;

    public void setGmt(String s) {
        gmt = s;
    }

    public void setVenue(String s) {
        venue = s;
    }

    public void setResult2(String s) {
        result2 = s;
    }

    public void setResult1(String s) {
        result1 = s;
    }

    public void setResultfinal(String s) {
        resultfinal = s;
    }

    public void setTeam2(String s) {
        team2 = s;
    }

    public void setTeam1(String s) {
        team1 = s;
    }
} 
```

构建此结构的处理程序类应如下所示，并带有一个`getTournament()`在解析后检索结果的方法。

```
public class TournamentHandler extends DefaultHandler {

    private Tournament tournament;
    private TournamentDay currentDay;
    private Match currentMatch;
    private StringBuilder builder;

    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {

        if (qName.equalsIgnoreCase("team1"))
            currentMatch.setTeam1(builder.toString());
        else if (qName.equalsIgnoreCase("team2"))
            currentMatch.setTeam2(builder.toString());
        else if (qName.equalsIgnoreCase("resultfinal"))
            currentMatch.setResultfinal(builder.toString());
        else if (qName.equalsIgnoreCase("result1"))
            currentMatch.setResult1(builder.toString());
        else if (qName.equalsIgnoreCase("result2"))
            currentMatch.setResult2(builder.toString());
        else if (qName.equalsIgnoreCase("venue"))
            currentMatch.setVenue(builder.toString());
        else if (qName.equalsIgnoreCase("gmt"))
            currentMatch.setGmt(builder.toString());
        else if (qName.equals("match"))
            currentDay.add(currentMatch);
        else if (qName.equals("day"))
            tournament.add(currentDay);
    }

    @Override
    public void startElement(String uri, String localName, String qName,
                             org.xml.sax.Attributes attributes) throws SAXException {
        if (qName.equals("data")) {
            tournament = new Tournament();
        }
        if (qName.equals("day")) {
            currentDay = new TournamentDay();
        }
        else if (qName.equals("match")) {
            currentMatch = new Match();
        }
        else {
            builder = new StringBuilder();
        }
    }

    @Override
    public void characters(char[] chars, int start, int length) throws SAXException {
        builder.append(chars, start, length);
    }

    public Tournament getTournament() {
        return tournament;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T16:31:56.043

尝试使用`DOM parser`，您将可以完美访问任何部分`Object Model tree`......

如果您想对其进行更多控制，请尝试下面提到的 XML 解析器....

**-** `JAXP AND JAXB`

**-** `Castor`

# exception - Symfony2.1 和 AdvancedUserInterface：自定义来自 UserChecker 的登录错误消息

> ID：12448571
> 
> 赞同：1
> 
> 时间：2012-09-16T16:22:11.347
> 
> 标签：exception, authentication, symfony, login, symfony-2.1

使用实现*[AdvancedUserInterface](http://api.symfony.com/2.1/Symfony/Component/Security/Core/User/AdvancedUserInterface.html)**的User*类时，如何在**Symfony2.1应用程序中自定义***[UserChecker](http://api.symfony.com/2.1/Symfony/Component/Security/Core/User/UserChecker.html)*类提供的错误消息？

 *例如，当用户未启用或其帐户已被锁定时，会提供这些消息！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T20:07:55.360

你甚至可以在 Symfony 2.0 中轻松地做到这一点。

无需重新实现`UserCheckerInterface`.

按照此处所述实现登录表单：[使用传统登录表单](http://symfony.com/doc/2.0/book/security.html#using-a-traditional-login-form)。

`$error`实际上是[AuthenticationException](http://api.symfony.com/2.0/Symfony/Component/Security/Core/Exception/AuthenticationException.html)的一个实例。

如果像这样在模板中显示它：

```
{% if error %}{{ error.message|trans }}{% endif %} 
```

...然后您可以使用翻译组件自定义消息，例如。在你的**messages.en.yml**中：

```
'User account is locked.': 'Your account has been locked by administrator.'
'The presented password is invalid.': 'Invalid password.'
'Bad credentials': 'Invalid username.' 
```

如果您这样做，您将免费获得翻译:)

顺便说一句，我读过一个案例研究，该案例研究建议向用户说明登录到底出了什么问题（通过？用户名？）超过了安全问题（就用户体验而言）并大大提高了转换（返回用户）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:39:28.873

Symfony 2.1 中没有此功能。它计划作为 Symfony 2.2 的一部分发布

有关更多信息，请参阅此[讨论](https://github.com/symfony/symfony/pull/4935)。

* * *

更新以响应@JeanValjean

您可以实现[Symfony\Component\Security\Core\User\UserCheckerInterface](http://api.symfony.com/2.1/Symfony/Component/Security/Core/User/UserCheckerInterface.html)

然后使用以下配置键将用户检查器设置为您的类。

```
security.user_checker.class = My\User\Checker\Class. 
```*

# ios - 使用两种 iPhone 屏幕尺寸（ iPhone4)

> ID：12448576
> 
> 赞同：1
> 
> 时间：2012-09-16T16:22:41.123
> 
> 标签：ios, user-interface, iphone-5

> **可能重复：**
> [如何处理 iPhone 5 的屏幕尺寸？](https://stackoverflow.com/questions/12396545/how-to-deal-with-iphone-5-screen-size)

对于我们应该如何对 iPhone 5 和之前的 iPhone 的屏幕尺寸展示我们的观点，普遍的共识是什么？

如果我想使用 IB 中布置的两种不同视图（一个用于 4 英寸，一个用于 3.5 英寸），我将如何动态选择初始视图？

我将如何与两个视图共享相同的视图控制器。这些视图可以共享相同的控制器代码，因为尽管它们会略有不同，但包含相同控件/按钮/元素等的副本，只是布局不同。

想法？

# jquery - jVectorMap 改变颜色

> ID：12448577
> 
> 赞同：5
> 
> 时间：2012-09-16T16:22:42.400
> 
> 标签：jquery, svg, jvectormap

我正在尝试设置美国各州的地图，我已放入 jVectorMap 但无论我做什么都无法改变颜色。

我试图在 jsfiddle 中实现我的问题，但它不想在那里做任何事情。在我的电脑上生成了一张地图，但颜色不会改变。

[http://jsfiddle.net/rsRnj/](http://jsfiddle.net/rsRnj/)

我正在使用的插件：http: [//jvectormap.com/](http://jvectormap.com/)

任何人都知道为什么我不能改变状态颜色？

或者，如果有更易于使用的地图，我也会接受该建议。我基本上只想在我的页面上有一个可点击的地图，带有颜色和悬停效果。

编辑现在尝试不同的地图库，完成后将发布结果

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-26T22:47:16.603

也许重新考虑使用 jvectormap 回去？如果我正确理解您的目标，jvectormap 应该可以正常工作。

1.  在 jvectormap 站点上，正在使用 1.0 版本。
    [http://jvectormap.com/examples/world-gdp/](http://jvectormap.com/examples/world-gdp/)
    ~~[http://jvectormap.com/js/jquery-jvectormap-1.0.min.js](http://jvectormap.com/js/jquery-jvectormap-1.0.min.js)~~ [https://raw.github.com/bjornd/jvectormap/master/jquery -jvectormap.js](https://raw.github.com/bjornd/jvectormap/master/jquery-jvectormap.js)（最新版本） [http://jvectormap.com/js/jquery-jvectormap-us-aea-en.js](http://jvectormap.com/js/jquery-jvectormap-us-aea-en.js)

2.  看来您的小提琴链接到 github 网页而不是真正的 js 文件。此外，无需在小提琴的 javascript 部分添加标签。[http://doc.jsfiddle.net/basic/introduction.html#javascript](http://doc.jsfiddle.net/basic/introduction.html#javascript)

3.  尝试查看一些站点示例的源代码，并检查 1.0 api 的 WorldMap 部分：http: [//jvectormap.com/documentation/javascript-api-v1/jvm-worldmap/](http://jvectormap.com/documentation/javascript-api-v1/jvm-worldmap/)

* * *

**工作示例**
这是您的小提琴的一个分支，它似乎满足您对颜色和点击事件的要求：http:
[//jsfiddle.net/bQ78b/1/](http://jsfiddle.net/bQ78b/1/)

```
$(function() {
    $('#usMap').vectorMap({
        map: 'us_aea_en',
        hoverColor: false,
        hoverOpacity: 0.5, 
        onRegionClick: function(e, code){
            alert( code.replace("US-", "") );
        }, 
        regionStyle: {
        initial: {
          fill: '#128da7'
        },
        hover: {
            fill: "#A0D1DC"
          }
      }
    });
}); 
```

希望这可以帮助...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-16T17:09:12.427

最终选择了这个选项：http: [//newsignature.github.com/us-map/](http://newsignature.github.com/us-map/)

如果您有要覆盖的数据，jVector 地图看起来不错，但我只是希望每个州都链接到网站上的其他地方。

# php - 以随机顺序显示记录

> ID：12448578
> 
> 赞同：1
> 
> 时间：2012-09-16T16:22:55.157
> 
> 标签：php, html, sql

我试图找出一种方法来选择表中的所有记录并以随机顺序显示它们。

我`RAND()`在这个查询中听到了很多类似的信息

```
$sql = mysql_query("SELECT * FROM table ORDER BY RAND()"); 
```

但据我所知，这只是选择随机数量的记录，如 20 条。

如何选择所有记录但只是以随机顺序显示它们？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T16:32:34.520

您最好选择所有条目并将随机显示留给 php.ini。整体`ORDER BY RAND()`需要*大量*的资源。该`ORDER BY RAND()`操作实际上重新查询表的每一行，分配一个随机数 ID，然后传递结果。

```
$sql = mysql_query("SELECT * FROM table ORDER BY RAND() LIMIT 1"); 
```

> 但据我所知，这只是选择随机数量的记录，如 20 条。

*错误*：这将选择所有记录，然后“随机”重新排列它们并为您提供第一行：`LIMIT 1`，只需将其省略即可。

```
$sql = mysql_query("SELECT * FROM table ORDER BY RAND()"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T16:32:38.943

不过，我对您的问题不太清楚，您可以通过简单地进行以下查询以随机顺序获取所有记录：

```
SELECT * FROM table ORDER BY RAND() 
```

上面的查询为表的每一行生成一个随机值，根据这些随机值对该表进行排序，并根据排序后的行返回。因此，您将拥有随机顺序的所有记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T16:24:34.627

就是这样：

```
SELECT * FROM table ORDER BY RAND() 
```

通过删除`LIMIT 1`您可以获得随机排序的所有记录...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T16:25:02.810

把你的结果放在一个数组中，然后就是[`shuffle()`](http://php.net/manual/en/function.shuffle.php)它。

并且摆脱`mysql_*`功能，女孩不再喜欢它们了。

# c# - 在 C# 中更改可视键盘的颜色

> ID：12448579
> 
> 赞同：0
> 
> 时间：2012-09-16T16:22:59.933
> 
> 标签：c#, windows-phone-7, keyboard

有没有办法通过 C# 更改可视键盘主题？或者至少，以某种方式编辑其属性，如背景颜色等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T16:31:49.740

除了`InputScope`（打开仅数字键盘等）和压倒一切的按键之外，目前无法更改可视 Windows Phone 键盘的任何部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T16:27:33.987

不，这是第三方应用程序无法更改的事情之一，除非有各种黑客攻击（市场上不允许这样做）。通常，如果某些内容由用户设置控制，那么应用程序将无法更改它。您可以检测用户是否选择了浅色或深色主题并相应地更改应用程序中的颜色，但您的应用程序无法更改系统设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T17:44:39.430

尝试更改 ApplicationBar 或 Systray 背景和前景色。我看到一个应用程序将 ApplicationBar 和 Systray 设置为白色背景和后前景，即使使用深色主题，键盘也是白底黑字。我认为可能存在相关性。

# jquery - 使用 jquery 处理表格单元格图像

> ID：12448580
> 
> 赞同：0
> 
> 时间：2012-09-16T16:23:03.023
> 
> 标签：jquery

这是我试图弄清楚的一个有趣而有趣的问题：

我有一个表，包含 3 列和 8 行。表是通过 PHP 动态生成的。每个 td 都有一个按钮，id 为 1,2 或 3，标记列。每个按钮都有 3 种状态/样式 - 正常、单击和悬停（所有不同的样式，总共 9 种样式）。

到目前为止，我已经设法通过 css 为每个分离的单元格提供正常和悬停样式，并且我创建了一个 jquery 脚本来将单击单元格的类更改为其单击样式。问题是，当我在一行中设置单元格样式时，我希望该行中剩余的两个单元格恢复正常样式：

left-normal**中键单击**right-normal
**左键单击**middle-normal 右键单击
​​ left-normal 中**键单击**
...

但仅限于那一行。

到目前为止，这是我的代码：

```
function chooseItem(){

var left = $('#table td button#1');
    var middle = $('#table td button#2');
var right = $('#table td button#3');

        left.click(function () {
            $(this).removeClass('LeftNormal');
            $(this).addClass('LeftClicked');        
        })  

        right.click(function () {
            $(this).removeClass('RightNormal');
            $(this).addClass('RightClicked');         
        })  

         midle.click(function () {
            $(this).removeClass('MidleNormal');
            $(this).addClass('MidleClicked');           
        })
}; 
```

我这里有很多相关的问题，但没有人遇到类似的问题。先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T16:34:46.677

你想要这样的东西吗？

```
 var $table = $('table');
   $table.find('button').click(function() {
     $(this).addClass('selected').parent().siblings().find('button').removeClass('selected');
   });​ 
```

**点击查看实际操作**：http : **[//jsfiddle.net/8qLpm/](http://jsfiddle.net/8qLpm/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T16:38:43.953

尝试：

```
function chooseItem(){

var left = $('#table td button1.left');
    var middle = $('#table td button2.middle');
var right = $('#table td button3.right');

        left.click(function () {
            $(this).closest('tr').find('button').removeClass('LeftNormal');
            $(this).addClass('LeftClicked');        
        })  

        right.click(function () {
            $(this).closest('tr').find('button').removeClass('RightNormal');
            $(this).addClass('RightClicked');         
        })  

         midle.click(function () {
            $(this).closest('tr').find('button').removeClass('MidleNormal');
            $(this).addClass('MidleClicked');           
        })
}; 
```

# ascii - 为什么 ASCII 只有 1/4、1/2 和 3/4？

> ID：12448581
> 
> 赞同：0
> 
> 时间：2012-09-16T16:23:04.537
> 
> 标签：ascii

1/3 或 1/5 或其他怎么样？

1/4、1/2 和 3/4 够吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T16:24:53.010

[ASCII](http://en.wikipedia.org/wiki/ASCII)是 7 位。那是 128 个字符，包括不可打印的字符。

考虑 10 代表数字，52 代表大小写，一些标点符号和大约 30 个控制字符，你不会留下太多。

这么少的字符，他们需要将它们保留给更多使用的字符。

# python - z3 常量声明

> ID：12448583
> 
> 赞同：5
> 
> 时间：2012-09-16T16:23:38.837
> 
> 标签：python, z3

在 Z3 Python 中，1) `x = Const("x",IntSort())` 与 2)之间的区别是什么`x = Int("x")` ？is_const 对两者都返回 true，并且它们都是 ArithRef。我认为 1) 适合定义一个 const，例如，x 是 3.14，2) 是创建一个变量。

是否有正确的方法来创建像 x = 3.14 这样的 const 变量（除了生成公式 x == 3.14）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T17:29:07.980

`Const("x", IntSort())`和之间没有区别`Int("x")`。我们应该将`Int("x")`其视为前者的语法糖。该函数`Const`通常用于定义用户定义排序的常量。例子：

```
S, (a, b, c) = EnumSort('S', ('a', 'b', 'c'))
x = Const("x", S) 
```

在 Z3 中，我们使用术语“变量”来表示通用变量和存在变量。无量词公式不包含变量，仅包含常量。在公式中`x + 1 > 0`，我们说`x`和`1`是常数。我们说`x`是一个未解释的常数，并且`1`是一个解释的常数。也就是说， 的含义`1`是固定的，但 Z3 可以自由地为其分配解释，`x`以使公式可满足。如果您只想创建解释常量`3.14`，您可以使用`RealVal('3.14')`. 在下面的示例中，`x`不是 Z3 表达式，而是指向 Z3 表达式的 Python 变量`3.14`。我们可以在构建 Z3 表达式/公式时`x`用作简写。`3.14`Python 变量`z`是指向 Z3 表达式`y`。最后，`z > x`返回 Z3 表达式`y > 3.14`。Z3Py 初学者通常会将 Python 变量与 Z3 表达式混淆。区别清楚后，一切都开始变得有意义。

```
x = RealVal('3.14')
z = Real('y')
print z > x 
```

# php - PHP - 如何在另一个页面中回显错误

> ID：12448588
> 
> 赞同：1
> 
> 时间：2012-09-16T16:24:10.593
> 
> 标签：php, session, echo

我如何将 IF 语句中的错误回显到另一个页面，

例如，我有一个登录表单和登录处理 php，IF 语句在我的处理文件中，我想要它，这样如果登录失败，就会在登录表单页面上回显错误。

最好以我可以格式化文本的方式！感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T16:27:57.900

当你重定向到错误页面时，传递一个错误参数：

```
if( problems ){

    header("Location: error.php?errorCode=wrongUsername");
    exit;

} 
```

在您的`error.php`文件中，编写您自己的逻辑：

```
$errorCode = $_GET['errorCode']; 
```

虽然这当然是一种整体的香草方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T18:11:49.003

那么你可以做这样的事情：

```
<?php
if (error) {
    $_SESSION['message'] = "There was an error";
}
?> 
```

然后，您将重定向回您希望显示错误的页面。

```
<?php
if (error) {
    $_SESSION['message'] = "There was an error.";
    header("Location: page.php");
}
?> 
```

然后在出现错误的页面上，您会看到类似这样的内容：

```
<?php echo $_SESSION['message']; unset($_SESSION['message']); ?> 
```

Remember that you would have to unset the session so that when the user refreshes the error will not be there. I hope this is what you were aiming for.

# python - 如何将增量添加到 python datetime.time？

> ID：12448592
> 
> 赞同：54
> 
> 时间：2012-09-16T16:24:21.497
> 
> 标签：python, datetime, time, timedelta

从：

[http://docs.python.org/py3k/library/datetime.html#timedelta-objects](http://docs.python.org/py3k/library/datetime.html#timedelta-objects)

> timedelta 对象表示持续时间，即两个日期或时间之间的差异。

那么为什么我会出错：

```
>>> from datetime import datetime, timedelta, time
>>> datetime.now() + timedelta(hours=12)
datetime.datetime(2012, 9, 17, 6, 24, 9, 635862)
>>> datetime.now().date() + timedelta(hours=12)
datetime.date(2012, 9, 16)

>>> datetime.now().time() + timedelta(hours=12)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unsupported operand type(s) for +: 'datetime.time' and 'datetime.timedelta' 
```

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-09-16T16:42:57.890

`datetime.time`对象[不支持](https://bugs.python.org/issue1487389#msg54803)与`datetime.timedelta`s 的加法。

不过，有一个自然定义，时钟算术。你可以这样计算：

```
import datetime as dt
now = dt.datetime.now()
delta = dt.timedelta(hours = 12)
t = now.time()
print(t)
# 12:39:11.039864

print((dt.datetime.combine(dt.date(1,1,1),t) + delta).time())
# 00:39:11.039864 
```

`dt.datetime.combine(...)`将 datetime.time`t`提升到一个`datetime.datetime`对象，然后添加增量，并将结果放回一个`datetime.time`对象。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2019-02-23T00:06:21.827

上面所有的解决方案都太复杂了，OP已经表明我们可以在 和 之间进行计算`datetime.datetime`，`datetime.timedelta`所以为什么不这样做：

`(datetime.now() + timedelta(hours=12)).time()`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-04T19:33:17.353

这是一个将 a 添加`time`到 a的函数`timedelta`：

```
def time_plus(time, timedelta):
    start = datetime.datetime(
        2000, 1, 1,
        hour=time.hour, minute=time.minute, second=time.second)
    end = start + timedelta
    return end.time() 
```

只要您不以跨越午夜边界的方式添加时间，这将提供预期的结果。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-16T16:28:13.630

这将如何工作？`datetime.datetime.now().time()`只返回小时、分钟、秒等，没有返回什么日期信息`.time()`，只有时间。

那么，应该`18:00:00 + 8 hours`返回什么？
这个问题没有答案，这就是为什么你不能添加时间和时间增量。

换句话说：

```
18:28:44, Sep. 16, 2012 + 8 hours #makes sense: it's 2:28:44, Sep. 17, 2012
18:28:44 + 8 hours # Doesn't make sense. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-20T11:24:54.697

可以将 datetime.time 对象拆分为可以添加的单独整数组件。不需要 timedelta 例如：

```
from datetime import datetime, time
    time_now = datetime.now().time()
    twelve_hours_time =  time(time_now.hour + 12, time_now.minute) 
```

# javascript - 使用 javascript 的 FileReader 获取/设置文件编码

> ID：12448595
> 
> 赞同：36
> 
> 时间：2012-09-16T16:24:34.300
> 
> 标签：javascript, encoding, character-encoding, filereader

我正在努力解决以下问题。使用 javascript 我想更改文件内容的字符集并将此内容显示给用户。

我有一个输入：文件表单。更改时我正在阅读内容

```
$('#form input:file').change(function(event){                   
   file = this.files[0];
   reader = new FileReader();
   reader.onload = function(event) {
      result = event.target.result.replace(/\n/g,'<br />');
      $('#filecontents').html(result);
   });
   reader.readAsText(file);
}) 
```

该文件位于 Windows-1251 中。我想将文件的内容转换为另一种编码，然后将其呈现给用户。

这可以用javascript实现吗？

问候

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-09-17T16:50:42.853

如果您的 HTML 页面是 UTF-8 并且您的文件是 ISO-8859-1。

这是有效的：

```
 reader.readAsText(file, 'ISO-8859-1'); 
```

我没有任何 Windows-1251 文件，因此无法对其进行测试，但看起来“CP1251”受支持（至少 Google Chrome 支持），所以：

```
 reader.readAsText(file, 'CP1251'); 
```

* * *

如果这些都不起作用。然后您应该手动更改格式。不幸的是，我不知道有任何 JavaScript 库可以做到这一点。

[从这里](http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/CP1251.TXT)的 unicode 映射和[Delan Azabani 的](https://stackoverflow.com/users/330644/delan-azabani) [答案](https://stackoverflow.com/a/5786516/1654918)，您应该设法构建一个函数，将 CP1251 中的字符串逐字符转换为 UTF-8。

# java - 如何在不使用任何预定义类或库的情况下在 java 中获取系统的当前日期和时间？

> ID：12448596
> 
> 赞同：2
> 
> 时间：2012-09-16T16:24:33.503
> 
> 标签：java, date, java.util.date

如何在不使用任何预定义类或库的情况下在 java 中获取系统的当前日期和时间？我实际上正在从头开始制作我自己的日期 ADT，如 java.util.Date 或 Java.util.Calendar。但我无法找到获取系统日期和时间的方法，比如如果他输入当前年龄来计算某人的年龄。在某种程度上，我想了解 Date 或 Calendar 类的开发人员如何实际实现它。有没有办法让我看到 java.util 包中定义的 Date 和 Calendar 类的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T16:28:28.887

嗯[`System.currentTimeMillis()`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#currentTimeMillis%28%29)，不在`java.util`——那是你要找的吗？然后，您必须编写代码来计算出该值（自 unix 纪元以来的毫秒数）在年等方面的含义 - 您应该考虑时区和日历系统。

我个人会避免尝试编写自己的日期/时间包，除非它只是为了好玩。`java.util.Date`/`Calendar`很糟糕，但[Joda Time](http://joda-time.sf.net)要好得多，还有即将推出的[JSR 310](http://threeten.sourceforge.net/)。

> 有没有办法让我看到 java.util 包中定义的 Date 和 Calendar 类的代码。

当然 - 当您安装 JDK 时，您应该可以选择安装标准库的源代码副本，通常在`src.zip`. 或者，您可以访问[openjdk.java.net](http://openjdk.java.net/)并查看那里。

> 实际上我根本不想使用任何预定义的功能。

然后你必须使用[JNI](http://docs.oracle.com/javase/7/docs/technotes/guides/jni/index.html)来进行底层系统调用，这对我来说似乎毫无意义——因为它基本上就是`System.currentTimeMillis`这样做的。如果您正在尝试学习 JNI，那很好，但它与日期/时间并没有太大关系。

当然，如果您对*准确*的时间而不是*系统时间感兴趣，您可以实现一个[NTP](http://ntp.org/)客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T16:27:57.983

使用**[System.currentTimeMillis()](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#currentTimeMillis%28%29)**：

> 返回当前时间与 UTC 时间 1970 年 1 月 1 日午夜之间的差异，以毫秒为单位。

至于and的源代码[`java.util.Date`](http://www.docjar.com/html/api/java/util/Date.java.html)，[`java.util.Calendar`](http://www.docjar.com/html/api/java/util/Calendar.java.html)你可以直接从[http://jdk7.java.net/source.html](http://jdk7.java.net/source.html)`docjar.com`下载源代码，也可以在或[这里](http://hg.openjdk.java.net/jdk7u/jdk7u6)在线查看。

# ruby-on-rails-3 - RSpec，Capybara 正确格式

> ID：12448599
> 
> 赞同：1
> 
> 时间：2012-09-16T16:24:55.970
> 
> 标签：ruby-on-rails-3, rspec, capybara

有人可以告诉我以下 _spec 测试文件的格式是否正确？我正在阅读 Rails 3 In Action 教程，书中提供了以下 _spec 测试文件，但是当我运行测试时，它告诉我方法`sign_in_as!`未定义。我不确定问题是什么，因为该方法在所有以前的测试文件中都有效。

```
require 'spec_helper'

describe Admin::UsersController do
  let(:user) { Factory(:confirmed_user) }

  context "standard users" do
    before { sign_in_as!(user) }

    it "are not able to access the index action" do
      get 'index'
      response.should redirect_to('/')
      flash[:alert].should eql("You must be an admin to do that.")
    end
  end
end 
```

我得到的错误是这样的：

```
Failure/Error: before { sign_in_as!(user) }
 NoMethodError:
   undefined method `sign_in_as!' 
```

# javascript - 清除本地存储？

> ID：12448600
> 
> 赞同：6
> 
> 时间：2012-09-16T16:25:00.400
> 
> 标签：javascript, jquery, local-storage

我的在线商店使用本地存储来存储购物车。用户签出后，我想清除它。但是，`localstorage.clear();`对我不起作用。

```
 $(document).ready(function(){
    $("#matkahuolto").live('click', function() {
        $(".maksu").slideDown(600);
        $("#matkahuolto").attr("disabled" , "disabled");
        $("#posti").removeAttr("disabled");
        $("#matkahuolto").addClass( "selectedtoimitus" );
        $("#posti").removeClass( "selectedtoimitus" );
        $(".simpleCart_shipping").html("15.00€");   
        localstorage.clear()

    });
 }); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-16T16:28:28.643

正确的拼写是[`localStorage`](http://www.w3.org/TR/webstorage/#the-localstorage-attribute)- Javascript 区分大小写：

```
localStorage.clear(); 
```

如果由于局部变量而这不起作用，则需要使用`window.localStorage`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-16T16:28:21.943

```
 localstorage.clear()
       ^
      here is the problem it must be in uppercase use below 

localStorage.clear(); 
```

或者

```
window.localStorage.clear() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T07:37:36.753

使用 .one 可确保仅执行一次而不是重复执行此操作。

```
 $(window).one("focus", function() {
        localStorage.clear();
    }); 
```

为了可读性，放几个 document.ready 事件监听器（如果你需要其他事件多次执行）是可以的，只要不过度。

当您希望仅在第一次打开网页或第一次安装移动应用程序时清除本地存储时，.one 特别有用。

```
// Fired once when document is ready
 $(document).one('ready', function () {
   localStorage.clear();
 }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T16:28:43.583

它是`localStorage`- 确保您将 S 大写，否则它不会指代同一事物。JavaScript 区分大小写。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-16T16:30:49.213

尝试：

```
window.localStorage.clear() 
```

您的处理程序的上下文可能会影响它。

# apache - 如何将主机名重定向到适当的语言版本

> ID：12448602
> 
> 赞同：1
> 
> 时间：2012-09-16T16:25:20.590
> 
> 标签：apache, zend-framework, dns, virtualhost

我想重定向

```
http://en.example.org
http://de.example.org 
```

至

```
http://example.org/en
http://example.org/de 
```

但不喜欢：

```
<VirtualHost *:80>
 DocumentRoot "C:/Apache2.2/htdocs/example/public"
 ServerName example.org
</VirtualHost>

<VirtualHost *:80>
 DocumentRoot "C:/Apache2.2/htdocs/example/public/en"
 ServerName en.example.org
</VirtualHost>

<VirtualHost *:80>
 DocumentRoot "C:/Apache2.2/htdocs/example/public/de"
 ServerName de.example.org
</VirtualHost> 
```

因为没有这样的文件夹“C:/Apache2.2/htdocs/example/public/en”或“C:/Apache2.2/htdocs/example/public/de”

我也不能使用：

```
<VirtualHost *:80>
 DocumentRoot "C:/Apache2.2/htdocs/example/public"
 ServerName example.org
 ServerAlias en.example.org de.example.org
</VirtualHost> 
```

因为我需要在 zend 框架中重用 'en'、'de'。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:12:56.653

我不确定 zend 对请求做了什么。我假设您的文档根目录中有一个 htaccess 文件，其中包含一些 zend 内容，如果是这样，您需要在它们之前添加它。

重定向浏览器，使其 URL 地址栏显示`http://example.org/en`

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^en\.example\.org$ [NC]
RewriteRule ^/?(.*)$ http://example.org/en/$1 [L,R=301]
RewriteCond %{HTTP_HOST} ^de\.example\.org$ [NC]
RewriteRule ^/?(.*)$ http://example.org/de/$1 [L,R=301] 
```

如果您只想在内部重写 URI，请尝试：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^en\.example\.org$ [NC]
RewriteCond %{REQUEST_URI} !^/en/ 
RewriteRule ^/?(.*)$ /en/$1 [L]
RewriteCond %{HTTP_HOST} ^de\.example\.org$ [NC]
RewriteCond %{REQUEST_URI} !^/de/
RewriteRule ^/?(.*)$ /de/$1 [L] 
```

# symfony - LiipImageBundle 大小和比例按比例增加

> ID：12448606
> 
> 赞同：3
> 
> 时间：2012-09-16T16:26:39.530
> 
> 标签：symfony, liipimaginebundle

我已经在 Symfony 2.1 中安装了 LiipImagineBundle，我正在尝试将它用于用户配置文件的头像。Liip 有一些不允许你调整宽度和高度的设置。

```
 my_heighten:
            filters:
                relative_resize: { heighten: 60 } # Transforms 50x40 to 75x60
        my_widen:
            filters:
                relative_resize: { widen: 32 }    # Transforms 50x40 to 32x26 
```

这意味着如果您有一个 100px*2000px 的图像，将高度调整为 120px 将具有超过 2000px 的宽度。我想调整纵向和横向图像的大小，以包括所有可能的用户与图像上传元素的交互。我试过用

```
filters:
       relative_resize: { heighten: 60, widen: 60 } 
```

和

```
 filters:
           relative_resize: { heighten: 60 }
           relative_resize: { widen: 60 } 
```

但它们都不起作用。

有没有人尝试过类似的东西？

编辑：我忘了说我需要一个 60*60 的方形图像，而不是被裁剪。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T17:19:49.067

使用以下模式尝试`thumbnail`过滤器`inset`：

```
liip_imagine:
    filter_sets:
        filter_name:
            filters:
                thumbnail:
                    size: [60, 60]
                    mode: inset 
```

但是您应该明白，如果原件本身不是方形的，您将不会得到方形图像。相反，它将受到`60`宽度像素或`60`高度像素的限制。

如果你想得到一个正方形的图像，你需要裁剪，你可以通过使用`outbound`模式来获得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T13:14:02.057

```
liip_imagine:
    filter_sets:
        filter_name:
            filters:
                resize:
                    size: [60, 60] 
```

只有这个不会作物。

# winforms - 将不同的文件类型合二为一

> ID：12448622
> 
> 赞同：0
> 
> 时间：2012-09-16T16:28:46.430
> 
> 标签：winforms, c#-4.0

我的 DVD 中有一个包含大约 70000 个文件（css 文件、mp3 文件、图片...）的程序。

我想把它们放到一个文件中（比如 dll）。

有没有办法做到这一点？

我的申请中还需要他们的地址；这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T16:30:50.857

将您的文件放入压缩存档（如 Zip 或 7z）中。

您可以使用压缩库来访问存档中的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T16:56:29.473

您可能想要创建一个 .iso 文件并使用 C# 库读取它。我找到了一些商业的。而且也应该有一些具有成本效益的选择。

# jquery - 如何将变量从 ajax 函数传递给另一个 ajax 函数？

> ID：12448627
> 
> 赞同：0
> 
> 时间：2012-09-16T16:29:00.267
> 
> 标签：jquery

我想知道如何将值从 ajax 函数传递到另一个 ajax 我已经尝试过这段代码，但它不起作用。任何人都知道如何以正确的方式做到这一点？谢谢！

```
 $("#button").click(function(){
    var passedValue = '';
    $.ajax({
        url://
        type://
        success:function(data){
            if(typeof==="object"){
            for(var i=0;i<data.length;i++){
                passedValue = data[i]["passedThis"];
            }
        }
    }
    });
    $.ajax({
        data: { receivedPassed: passedValue;}
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T16:31:56.453

这些请求是异步的，因此`passedValue`在发送第二个请求时还没有准备好。您可能希望按顺序发送它们：

```
$("#button").click(function() {
    $.ajax({
        url: //
        type: //
        success: function(data) {
            var passedValue;

            if(typeof (?) === "object") {
                for(var i = 0; i < data.length; i++) {
                    passedValue = data[i]["passedThis"];
                }

                $.ajax({
                    data: { receivedPassed: passedValue }
                });
            }
        }
    });
}); 
```

此外，您`passedValue`每次都在通过该循环进行覆盖。您的意思是`+=`代替`=`, 还是使用数组或其他什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T16:48:28.737

使用 链接 AJAX 调用[`.then()`](http://api.jquery.com/deferred.then/)，并使用 过滤从第一个调用到第二个调用的数据[`.pipe()`](http://api.jquery.com/deferred.pipe/)：

```
$("#button").click(function() {
    $.ajax({
      url: //
      type: //
    }).pipe(function (data) {
      var passedValue = [];
      for (var i = 0; i < data.length; i++) {
        passedValue[i] = data[i]["passedThis"];
      }
      return passedValue;
    }).then(function (receivedPassed) {
      $.ajax({
        data: { receivedPassed: passedValue }
      }
    }
}); 
```

另请注意，`.success()`回调将在 jQuery 1.8 中弃用：

> 弃用通知：`jqXHR.success()`、`jqXHR.error()`和 `jqXHR.complete()`回调将在 jQuery 1.8 中弃用。

# android - 在地理点周围创建一个边界框

> ID：12448629
> 
> 赞同：4
> 
> 时间：2012-09-16T16:30:09.820
> 
> 标签：android, gps

我有地理纬度和经度（例如：39.6199，-79.9535）。如何在半径为 1 公里的点周围用 Java 构建一个边界框？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T22:05:44.410

1.  两条经线之间的距离会根据您所在的纬线而变化。它可以计算为：

    `3960 * 2 * pi /360 * cosine(latitude)`以英里为单位

2.  两条纬线之间的距离在任何地方都是恒定的：`69`英里。

因此，为了在地理位置周围绘制一个 1x1 英里的正方形，您应该找到两条平行于该点纬度的纬线，沿南北距离为 0.5 英里。然后找到两条平行的经线，沿东西方向相距 0.5 英里。

例如，0.5 英里表示 0.5/69 纬度差。如果给定点的纬度是 39.6199，则正方形上下两侧的纬度分别具有纬度值：`36.6199+(0.5/69)`和`36.6199-(0.5/69)`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-16T20:41:55.180

```
double latitude = location.getLatitude();
double longitude = location.getLongitude();

// 6378000 Size of the Earth (in meters)
double longitudeD = (Math.asin(1000 / (6378000 * Math.cos(Math.PI*latitude/180))))*180/Math.PI;
double latitudeD = (Math.asin((double)1000 / (double)6378000))*180/Math.PI;

double latitudeMax = latitude+(latitudeD);
double latitudeMin = latitude-(latitudeD);
double longitudeMax = longitude+(longitudeD);
double longitudeMin = longitude-(longitudeD); 
```

# gradle - 如何从 gradle 中的另一个子项目配置中引用文件集

> ID：12448631
> 
> 赞同：2
> 
> 时间：2012-09-16T16:30:24.677
> 
> 标签：gradle

我想要这样的东西（注意 :sub 是对子项目的引用）

```
task deleteJars(type: Delete) {
    ext.collection = files { genLibDir.listFiles() }
    delete ext.collection
}
task copyJars(type: Copy) { 
    from(:sub.configurations.compile) {}
    from(fixedLibDir) {}
    into genLibDir
}
copyJars.dependsOn('deleteJars')
classes.dependsOn('copyJars') 
```

但是，这不会编译。对于 playframework，我需要将其他项目配置中的 jar 放入我的 lib 目录中，以便 playframework 启动。如何修复上述代码？

谢谢，院长

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T02:19:04.723

它应该是这样的：

```
project(":sub").configurations.compile 
```

?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-25T21:39:31.730

别忘了放

```
evaluationDependsOn('sub') 
```

在主脚本的开头。否则，您将收到错误消息，例如

```
 Configuration with name 'compile' not found 
```

原因是一般主项目在子项目之前编译，编译器很难找到子项目的配置'compile'。

# python - 如何在绕过身份验证时实现 Django 的密码散列？

> ID：12448638
> 
> 赞同：1
> 
> 时间：2012-09-16T16:31:09.060
> 
> 标签：python, django

我们正在创建一个用户登录和注册系统，并决定绕过 Django 的身份验证（出于一些原因，这超出了这个问题的范围）。

我们仍然需要对密码进行加密，并且仍然希望使用 auth 实现的加密（我相信 pbkdf2_sha256）。我们可以自己推出，但如果可以的话，我们宁愿使用 Django（同样，不使用 auth 包）。

查看我们的 Django 安装（我们有 1.4.1，最新版本），我们找到了 auth 文件夹（和一个名为 hashers.py 的文件），但是，对于 python 来说，不太确定从这里去哪里加密我们的密码。

谢谢！

编辑：

根据收到的评论和回答，我决定使用内置的方法和表格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T16:38:27.757

如果您查看[django's 的源代码`set_password`](https://github.com/django/django/blob/master/django/contrib/auth/models.py#L296)，您会发现它调用了该[`make_password`](https://github.com/django/django/blob/master/django/contrib/auth/hashers.py#L61)函数，这可能就是您要查找的内容。

然后您可以使用[django`check_password`](https://github.com/django/django/blob/master/django/contrib/auth/hashers.py#L40)来验证密码。

这确实增加了对 的依赖`django.contrib.auth`，因为这些函数是在 中定义的`django.contrib.auth.hashers`，但这是 Django 中的标准，所以我认为这不是问题。此外，`django.contrib.auth.hashers`不依赖于任何来自`django.contrib.auth`.

**然而，我只能支持在评论中给你的建议，你可能应该使用默认的 django auth 包**- 特别是考虑到我们在这里谈论安全关键部分。

顺便说一句，用于散列密码的算法实际上是由设置控制[的`PASSWORD_HASHERS`](https://docs.djangoproject.com/en/dev/topics/auth/#how-django-stores-passwords)。

# javascript - 分页：使用带有 getJSON 的“获取更多”按钮

> ID：12448640
> 
> 赞同：2
> 
> 时间：2012-09-16T16:31:26.370
> 
> 标签：javascript, jquery, html, json, pagination

我对此完全陌生，所以如果我没有得到足够的信息，请原谅我。我使用 JSON 和列表视图显示可能有数千条记录，但是我一次只需要显示 20 条，底部有一个“显示更多”按钮。我不明白我将如何更改我当前的 javascript 以实现这一点，希望有人能指出我正确的方向。我一直在尝试应用此代码以使其正常工作，但未成功：

[http://jsfiddle.net/knuTW/2/](http://jsfiddle.net/knuTW/2/)

我当前用于显示 JSON 数据的 javascript：

```
function getEmployeeList() {
$.getJSON(serviceURL + 'getmeals.php?calfrom='+ var1 + '&calto=' + var2, function(data) {
    $('#employeeList li').remove();
    employees = data.items;
    $.each(employees, function(index, employee) {
        $('#employeeList').append('<li><a href="employeedetails.html?id=' + employee.id + '">' +
            '<img src="http://www.restaurants.com/assets/img/logos/' + employee.restaurant + '.jpg"/>' +    
                '<h4>' + employee.meal_item + '</h4>' +
                '<p>Calories: ' + employee.calories + '</p>' +
                '<span class="ui-li-count">' + employee.protein + '</span></a></li>');

    });
    $('#employeeList').listview('refresh');
});
} 
```

HTML：

```
<div id="employeeListPage" data-role="page" >

<div data-role="header" data-position="fixed">
    <h1>Restaurant Meals</h1>
</div>

<div data-role="content">
     <ul id="employeeList" data-role="listview" data-filter="true"></ul>
     <ul class="load-more"><a href="#">Load More</a></ul>
</div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T17:12:48.650

这个想法是向您的`$.getJSON`:`limit`和. 添加两个参数`offset`。

`Limit`是你想要的行数。所以让我们说20行。

`Offset`是您要开始搜索的行号。所以 0 然后 20 然后 40 等等。

通过单击“获取更多”，您`$.getJSON`以 +20 的偏移量重复您的操作。

在后端，您的 SQL 查询应如下所示：

```
$query = "SELECT * FROM table LIMIT $offset, $limit"; 
```

当查询没有返回任何内容时，这意味着用户到达了终点。

然后您可以隐藏“获取更多”按钮。

* * *

另一种解决方案是让所有员工都使用一个，`$.GetJSON`然后将结果存储在一个变量中。首先显示前 20 名员工。如果用户点击“获得更多”，则显示接下来的 20 名员工。当您的数组中没有更多员工时，您隐藏“获取更多”按钮。

使用此解决方案，您将避免向服务器发出多个请求。

* * *

您还可以寻找一个插件来进行分页。

一些例子：

*   [https://github.com/beneverard/jqPagination](https://github.com/beneverard/jqPagination)
*   [https://github.com/luis-almeida/jPages](https://github.com/luis-almeida/jPages)
*   [https://github.com/gbirke/jquery_pagination](https://github.com/gbirke/jquery_pagination)
*   [https://github.com/fedecarg/jquery-paginate](https://github.com/fedecarg/jquery-paginate)
*   [https://github.com/wesnolte/Pajinate](https://github.com/wesnolte/Pajinate)

# grails - Grails Atmosphere Broadcaster 不工作

> ID：12448644
> 
> 赞同：2
> 
> 时间：2012-09-16T16:31:51.057
> 
> 标签：grails, atmosphere

我正在尝试在我的 grails 应用程序中实现气氛插件。我有以下代码

```
class AtmosphereService {

static transactional = true

static atmosphere = [mapping: '/atmosphere/status']

static exposes = ['jms']

@Subscriber(topic='msgevent')
def onEvent(msg) {

    def payload = msg
    if(msg instanceof Map) {
        // convert map messages to JSON
        payload = msg.encodeAsJSON()
    }

    // broadcast to the atmosphere
    broadcaster['/atmosphere/status'].broadcast(payload)
    println("jms service->  "+payload)
    /*Broadcaster brod = lookupBroadcaster(msg["id"], false)
    brod.broadcast(payload)*/

    return null
} 
```

我还添加了 onRequest 和 onStateChange 闭包。但我得到一个“嵌套异常是 groovy.lang.MissingPropertyException：没有这样的属性：类的广播器：com.AtmosphereService”异常。我无法理解我做错了什么。有人可以帮我解决这个问题吗？谢谢

# android - 在 Android 中注销 Facebook

> ID：12448649
> 
> 赞同：0
> 
> 时间：2012-09-16T16:31:56.577
> 
> 标签：android, logout, facebook-android-sdk

我需要在我的 Android 应用程序中创建注销方法。我怎样才能做到这一点 ？我需要删除首选项以注销？我试着做：

```
mFacebook.logout(getContext()) 
```

但它不起作用。

**更新**

我试过这段代码：

```
mAsyncRunner.logout(this, new RequestListener() {
            @Override
            public void onComplete(String response, Object state) {
                Log.d("Logout from Facebook", response);
                if (Boolean.parseBoolean(response) == true) {
                    // User successfully Logged out
                }
                else{

                }
            }

            @Override
            public void onIOException(IOException e, Object state) {
            }

            @Override
            public void onFileNotFoundException(FileNotFoundException e,
                    Object state) {
            }

            @Override
            public void onMalformedURLException(MalformedURLException e,
                    Object state) {
            }

            @Override
            public void onFacebookError(FacebookError e, Object state) {
            }
        }); 
```

同样的问题。在 LogCat 中，我看到“从 Facebook 注销 | true”，但如果我再次打开我的应用程序（完成后），我已登录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T10:18:25.417

您不需要 AsyncRunner 来注销，注销是一行代码

```
mFB.logout(MainActivity.this); 
```

其中 mFB 是 Facebook 类型。（您用于登录的那个）

确保你清除了访问令牌（如果你已经保存了）......

希望解释是有用的......

# c# - 如何显示插件的视图，通过 Autofac 动态加载？

> ID：12448650
> 
> 赞同：0
> 
> 时间：2012-09-16T16:32:01.003
> 
> 标签：c#, autofac

我有几个独立的库，其中有一些导出主视图。有一个带有 TabControl 的 Shell，希望将所有视图加载到单独的选项卡中。我可以从这个插件注册所有类型，但不知道如何显示所有这些主要视图。比如我注册了5个插件的5个View，但是如何传递给ShellView呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T19:56:52.483

如果你有接口

```
public interface ITabView {
} 
```

所有视图都实现

```
public class MyFirstView : UserControl, ITabView
{
  ....
} 
```

然后你通过类似的方式注册它们

```
builder.RegisterType<MyFirstView>().As<ITabView>();
builder.RegisterType<MySecondView>().As<ITabView>(); 
```

然后您可以通过将通用 IEnumerable 注入到 ShellView 的构造函数中来访问它们（即使它们在不同的程序集中注册），例如

```
public ShellView(IEnumerable<ITabView> tabViews)
{
  foreach (var view in tabViews)
  {
    ... Create a tab for each view, make the tab the parent of the view
    ... and add the tab to the TabControl
  }
} 
```

# ios - iOS 中的永久图像缓存

> ID：12448655
> 
> 赞同：5
> 
> 时间：2012-09-16T16:32:24.030
> 
> 标签：ios, asynchronous, image-caching

我正在开发一个应用程序，我需要永久下载和存储图像，直到我手动删除它们（内存+磁盘）。这是必需的，因为应用程序需要能够离线工作。我知道有 AFNetworking 和 SDWebImage 用于缓存图像，但我认为它们不允许永久缓存和手动删除。Afaik，当缓存过期时，它们会自动删除图像。

有没有其他图书馆可以做这种事情？我试图为此编写一个类，但它工作得不是很稳定。我想最好不要重新发明轮子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T17:42:13.410

将文件保存在 Application Support 内的文件夹中。这些将持续存在，iOS 不会删除它们。我说以后使用文件夹，如果你想删除它们，你可以删除文件夹。

[这篇文章](https://stackoverflow.com/q/12371321/1633251)详细介绍了如何访问和配置应用程序支持目录

如果需要，您可以将这些图像的 URL 或路径保存在 Core Data 存储库中。

编辑：我有一个管理我的核心数据图像存储库的单例类。具有与其关联的图像的对象具有数据属性、URL 属性、文件路径属性和表示是否存在未完成提取的布尔标志。当某物需要图像时，它会请求图像（由数据构建），如果没有数据，则单例会为其发出网络获取。当它到达时，它被存储在文件系统中，并且实体获得该图像集的文件路径。然后它会发出通知，告知某某图像已到达。[为了调试，我也在不同的点上进行了测试，以确保我可以从数据中创建图像。]

当 viewController 收到通知时，它们会查看可见单元格列表，如果其中任何一个与新到达的图像相关联，则该类会从单例中请求图像，然后将其设置在单元格上。这对我来说效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-31T13:55:55.087

不幸的是，SDWebImage 没有提供这样的功能，因此为了利用 SDWebImage 提供的高级缓存功能，我围绕 SDWebImage 编写了一个包装器

基本上这个类管理一个备用永久缓存，所以如果在 SDWeb 图像缓存“磁盘和内存”中找不到请求的图像，它将在永久缓存中查找它

使用这种方法，我设法使用 SDWebImage 像往常一样将图像设置为表格单元格

**.h 文件**

```
@interface CacheManager : NSObject
+ (CacheManager*)sharedManager;

// Images
- (BOOL) diskImageExistsForURL:(NSURL*) url;
- (void) downloadImage:(NSURL*) url completed:(void(^)(UIImage*))onComplete;
- (void) setImage:(NSURL*)url toImageView:(UIImageView*)iv completed:(void(^)(UIImage*))onComplete;
- (void) clearImageCache;

@end 
```

**.m 文件**

```
#import "CacheManager.h"
#import <SDWebImage/UIImageView+WebCache.h>

#define CACH_IMAGES_FOLDER      @"ImagesData"

@implementation CacheManager

static CacheManager *sharedManager = nil;

#pragma mark -
#pragma mark Singilton Init Methods
// init shared Cache singleton.
+ (CacheManager*)sharedManager{
    @synchronized(self){
        if ( !sharedManager ){
            sharedManager = [[CacheManager alloc] init];
        }
    }
    return sharedManager;
}

// Dealloc shared API singleton.
+ (id)alloc{
    @synchronized( self ){
        NSAssert(sharedManager == nil, @"Attempted to allocate a second instance of a singleton.");
        return [super alloc];
    }
    return nil;
}

// Init the manager
- (id)init{
    if ( self = [super init] ){}
    return self;
}

/**
  @returns YES if image found in the permanent cache or the cache managed by SDWebImage lib
 */
- (BOOL) diskImageExistsForURL:(NSURL*) url{

    // look for image in the SDWebImage cache
    SDWebImageManager *manager = [SDWebImageManager sharedManager];
    if([manager diskImageExistsForURL:url])
        return YES;

    // look for image in the permanent cache
    NSString *stringPath = url.path;
    NSFileManager *fileManager = [NSFileManager defaultManager];
    return [fileManager fileExistsAtPath:stringPath];
}

/**
 get the image with specified remote url asynchronosly 
 first looks for the image in SDWeb cache to make use of the disk and memory cache provided by SDWebImage
 if not found, looks for it in the permanent cache we are managing, finally if not found in either places
 it will download it using SDWebImage and cache it.
 */
- (void) downloadImage:(NSURL*) url completed:(void(^)(UIImage*))onComplete{

    NSString *localPath = [[self getLocalUrlForImageUrl:url] path];
    NSFileManager *fileManager = [NSFileManager defaultManager];

    // -1 look for image in SDWeb cache
    SDWebImageManager *manager = [SDWebImageManager sharedManager];
    if([manager diskImageExistsForURL:url]){
        [manager downloadImageWithURL:url options:SDWebImageRetryFailed
                             progress:^(NSInteger receivedSize, NSInteger expectedSize) {}
                            completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, BOOL finished, NSURL *imageURL) {
                                onComplete(image);

                                // save the image to the perminant cache for later
                                // if not saved before
                                if(image){
                                    if ([fileManager fileExistsAtPath:localPath]){
                                        NSURL* localeUrl = [self getLocalUrlForImageUrl:url];
                                        [self saveImage:image toCacheWithLocalPath:localeUrl];
                                    }
                                }
                            }];
        return;
    }

    // -2 look for the image in the permanent cache
    if ([fileManager fileExistsAtPath:localPath]){
        UIImage *img = [self getImageFromCache:url];
        onComplete(img);
        // save image back to the SDWeb image cache to make use of the memory cache
        // provided by SDWebImage in later requests
        [manager saveImageToCache:img forURL:url];
        return;
    }

    // -3 download the image using SDWebImage lib
    [manager downloadImageWithURL:url options:SDWebImageRetryFailed
                         progress:^(NSInteger receivedSize, NSInteger expectedSize) {}
                        completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType, BOOL finished, NSURL *imageURL) {
                            onComplete(image);
                            // save the image to the permanent cache for later
                            if(image){
                                NSURL* localeUrl = [self getLocalUrlForImageUrl:url];
                                [self saveImage:image toCacheWithLocalPath:localeUrl];
                            }
                        }];

}

- (void) setImage:(NSURL*)url toImageView:(UIImageView*)iv completed:(void(^)(UIImage*))onComplete{
    [self downloadImage:url completed:^(UIImage * downloadedImage) {
        iv.image = downloadedImage;
        onComplete(downloadedImage);
    }];
}

/**
 @param:imgUrl : local url of image to read
 */
- (UIImage*) getImageFromCache:(NSURL*)imgUrl{
    return [UIImage imageWithData: [NSData dataWithContentsOfURL:imgUrl]];
}

/**
 writes the suplied image to the local path provided
 */
-(void) saveImage:(UIImage*)img toCacheWithLocalPath:(NSURL*)localPath{
    NSData * binaryImageData = UIImagePNGRepresentation(img);
    [binaryImageData writeToFile:[localPath path] atomically:YES];
}

// Generate local image URL baesd on the name of the remote image
// this assumes the remote images already has unique names
- (NSURL*)getLocalUrlForImageUrl:(NSURL*)imgUrl{
    // Saving an offline copy of the data.
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    NSString *cachesDirectory = [paths objectAtIndex:0];
    NSString *folderPath = [cachesDirectory stringByAppendingPathComponent:CACH_IMAGES_FOLDER];
    BOOL isDir;
    // create folder not exist
    if (![fileManager fileExistsAtPath:folderPath isDirectory:&isDir]){
        NSError *dirWriteError = nil;
        if (![fileManager createDirectoryAtPath:folderPath withIntermediateDirectories:YES attributes:nil error:&dirWriteError]){
            NSLog(@"Error: failed to create folder!");
        }
    }

    NSString *imgName = [[[imgUrl path] lastPathComponent] stringByDeletingPathExtension];

    NSURL *cachesDirectoryURL = [[NSFileManager defaultManager] URLForDirectory:NSCachesDirectory inDomain:NSUserDomainMask appropriateForURL:nil create:NO error:nil];
    NSString *pathString = [NSString stringWithFormat:@"%@/%@", CACH_IMAGES_FOLDER, imgName];
    return [cachesDirectoryURL URLByAppendingPathComponent:pathString];
}

/**
 removes the folder contating the cahced images,
 the folder will be reacreated whenever a new image is being saved to the permanent cache
 */
-(void)clearImageCache{
    // set the directory path
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    NSString *cachesDirectory = [paths objectAtIndex:0];
    NSString *folderPath =  [cachesDirectory stringByAppendingPathComponent:CACH_IMAGES_FOLDER];
    BOOL isDir;
    NSError *dirError = nil;
    // folder exist
    if ([fileManager fileExistsAtPath:folderPath isDirectory:&isDir]){
        if (![fileManager removeItemAtPath:folderPath error:&dirError])
        NSLog(@"Failed to remove folder");
    }
}

@end 
```

# ruby-on-rails - 更改新的和编辑的路由

> ID：12448661
> 
> 赞同：0
> 
> 时间：2012-09-16T16:33:45.720
> 
> 标签：ruby-on-rails, ruby, routes

我为“帖子”设置了脚手架，并想使用 ActiveAdmin 来编辑和创建新的。

在我的 routes.rb 文件中，我有这样的帖子设置：

```
resources :posts 
```

我希望当有人去 '/posts/new' 时被重定向到 '/admin/posts/new' 与编辑相同的事情。从“/posts/:id/edit”到“/admin/posts/:id/edit”

如何在更改新路线和编辑路线时保持其他路线不变？

**编辑**

这是我的“耙子路线”

```
 tags GET        /tags(.:format)                           tags#index
                           POST       /tags(.:format)                           tags#create
                   new_tag GET        /tags/new(.:format)                       tags#new
                  edit_tag GET        /tags/:id/edit(.:format)                  tags#edit
                       tag GET        /tags/:id(.:format)                       tags#show
                           PUT        /tags/:id(.:format)                       tags#update
                           DELETE     /tags/:id(.:format)                       tags#destroy
                admin_root            /admin(.:format)                          admin/dashboard#index
batch_action_admin_admin_users POST       /admin/admin_users/batch_action(.:format) admin/admin_users#batch_action
         admin_admin_users GET        /admin/admin_users(.:format)              admin/admin_users#index
                           POST       /admin/admin_users(.:format)              admin/admin_users#create
      new_admin_admin_user GET        /admin/admin_users/new(.:format)          admin/admin_users#new
     edit_admin_admin_user GET        /admin/admin_users/:id/edit(.:format)     admin/admin_users#edit
          admin_admin_user GET        /admin/admin_users/:id(.:format)          admin/admin_users#show
                           PUT        /admin/admin_users/:id(.:format)          admin/admin_users#update
                           DELETE     /admin/admin_users/:id(.:format)          admin/admin_users#destroy
           admin_dashboard            /admin/dashboard(.:format)                admin/dashboard#index
  batch_action_admin_posts POST       /admin/posts/batch_action(.:format)       admin/posts#batch_action
               admin_posts GET        /admin/posts(.:format)                    admin/posts#index
                           POST       /admin/posts(.:format)                    admin/posts#create
            new_admin_post GET        /admin/posts/new(.:format)                admin/posts#new
           edit_admin_post GET        /admin/posts/:id/edit(.:format)           admin/posts#edit
                admin_post GET        /admin/posts/:id(.:format)                admin/posts#show
                           PUT        /admin/posts/:id(.:format)                admin/posts#update
                           DELETE     /admin/posts/:id(.:format)                admin/posts#destroy
   batch_action_admin_tags POST       /admin/tags/batch_action(.:format)        admin/tags#batch_action
                admin_tags GET        /admin/tags(.:format)                     admin/tags#index
                           POST       /admin/tags(.:format)                     admin/tags#create
             new_admin_tag GET        /admin/tags/new(.:format)                 admin/tags#new
            edit_admin_tag GET        /admin/tags/:id/edit(.:format)            admin/tags#edit
                 admin_tag GET        /admin/tags/:id(.:format)                 admin/tags#show
                           PUT        /admin/tags/:id(.:format)                 admin/tags#update
                           DELETE     /admin/tags/:id(.:format)                 admin/tags#destroy
batch_action_admin_comments POST       /admin/comments/batch_action(.:format)    admin/comments#batch_action
            admin_comments GET        /admin/comments(.:format)                 admin/comments#index
                           POST       /admin/comments(.:format)                 admin/comments#create
             admin_comment GET        /admin/comments/:id(.:format)             admin/comments#show
    new_admin_user_session GET        /admin/login(.:format)                    active_admin/devise/sessions#new
        admin_user_session POST       /admin/login(.:format)                    active_admin/devise/sessions#create
destroy_admin_user_session DELETE|GET /admin/logout(.:format)                   active_admin/devise/sessions#destroy
       admin_user_password POST       /admin/password(.:format)                 active_admin/devise/passwords#create
   new_admin_user_password GET        /admin/password/new(.:format)             active_admin/devise/passwords#new
  edit_admin_user_password GET        /admin/password/edit(.:format)            active_admin/devise/passwords#edit
                           PUT        /admin/password(.:format)                 active_admin/devise/passwords#update
                     posts GET        /posts(.:format)                          posts#index
                           POST       /posts(.:format)                          posts#create
                  new_post GET        /posts/new(.:format)                      posts#new
                 edit_post GET        /posts/:id/edit(.:format)                 posts#edit
                      post GET        /posts/:id(.:format)                      posts#show
                           PUT        /posts/:id(.:format)                      posts#update
                           DELETE     /posts/:id(.:format)                      posts#destroy
                      root            /                                         posts#index 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:48:13.097

尝试这样的事情

```
# config/routes.rb
resources :posts, except: [:new, edit] do
  get 'new' => redirect("/admin/posts/new"), :on => :collection
  get 'edit' => redirect("/admin/posts/:id/edit"), :on => :member
end 
```

PS请将您的问题添加`$ rake routes`到您的问题中，以使我的代码示例更清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T17:40:46.173

```
get "/posts/new" => redirect("/admin/posts/new")
get "/posts/:id/edit" => redirect("/admin/posts/:id/edit")
resources :posts 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T17:44:00.410

也许你可以`redirect_to`在里面编辑和新方法。

# android - 如何使用选择器设置文本大小？

> ID：12448663
> 
> 赞同：8
> 
> 时间：2012-09-16T16:33:50.120
> 
> 标签：android

我使用选择器，但我不知道如何设置文本大小。也许我做错了什么 - 帮助

箭头.xml

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/button_pressed" android:state_pressed="true" android:color="@color/green"></item>

</selector> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-06-23T18:30:01.707

您可以在动画资源下使用选择器：

```
<!-- res/animator/text_size.xml -->
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true">
        <set>
            <objectAnimator
                android:duration="0"
                android:propertyName="textSize"
                android:valueTo="18sp"
                android:valueType="floatType"/>
        </set>
    </item>
    <item android:state_focused="false">
        <set>
            <objectAnimator
                android:duration="0"
                android:propertyName="textSize"
                android:valueTo="10sp"
                android:valueType="floatType"/>
        </set>
    </item>
</selector> 
```

您可以将持续时间设为 0 以直接跳转到该值，也可以在其中设置持续时间。

`android:stateListAnimator`然后在您的视图上使用它：

```
<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button 3"
    android:stateListAnimator="@animator/text_size"/> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-03-18T07:31:56.663

创建您自己的`style.xml`并定义文本样式。然后在选择器中设置样式。

`style.xml`

```
<style name="myStyle">  
    <item name="android:textSize">9px</item>
    <item name="android:textColor">#fff</item>
    <item name="android:textStyle">bold</item>
</style> 
```

在你的选择器中

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
          style="@style/myStyle" /> 
</selector> 
```

# .htaccess - Yii 设置自定义 URL 格式

> ID：12448664
> 
> 赞同：0
> 
> 时间：2012-09-16T16:33:56.733
> 
> 标签：.htaccess, url-rewriting, yii, url-routing

我想做的是在 Yii 中为 URL 管理创建一个自定义规则。

通用 URL 规则在 main.php 中设置

```
 'urlManager'=>array(
        'urlFormat'=>'path',
                    'showScriptName'=>false,
        'rules'=>array(
            '<controller:\w+>'=>'<controller>/index',
                            '<controller:\w+>/<id:\d+>'=>'<controller>/view',
            '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
            '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
        ), 
```

.htaccess 文件也设置为

```
RewriteEngine on
# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# otherwise forward it to index.php
RewriteRule . index.php 
```

所以我有表单中的 URL

> 本地/cp/xyz/创建

现在我有一个自定义控制器，其当前 URL 就像

> 本地/cp/xyz/创建/abc

我想要的是

> 本地/cp/abc/创建

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:56:32.587

假设 'local/cp' 是你的应用程序 url，'xyz' 是控制器，'abc' 是某种变量（我称之为`myVar`），你需要这样的规则：

```
'<myVar:\w+>/<action:\w+>'=>'xyz/<action>', 
```

或者

```
'<myVar:\w+>/create'=>'xyz/create', 
```

# java - 从java调用matlab的函数

> ID：12448665
> 
> 赞同：1
> 
> 时间：2012-09-16T16:34:01.637
> 
> 标签：java, matlab

我想从我的 java 文件中调用 eig() 并且我希望在我的文件中返回该结果，但我找不到任何示例。我在该链接中找到了一个示例：

[http://www.devsrealm.com/java/calling-matlab-from-java/#comment-335](http://www.devsrealm.com/java/calling-matlab-from-java/#comment-335)

但是 sqrt 的示例显示了 matlab 中的错误：

使用 sqrt 时出错 输出参数过多。

我如何从 java 中调用 eig() 并获取 bag V、D 矩阵？任何帮助都会非常有用。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T19:36:06.420

[matlabcontrol](http://matlabcontrol.googlecode.com)是一个 Java API，它允许您从 Java 调用 MATLAB。您可以从 MATLAB 内部或从 MATLAB 外部调用 MATLAB，在这种情况下，将启动并连接一个 MATLAB 实例。它允许在 MATLAB 中调用 eval 和 feval 并将结果返回给 MATLAB。该[演练](http://code.google.com/p/matlabcontrol/wiki/Walkthrough)通过示例解释了如何执行此操作。该演练详细说明了如何指定正确数量的返回参数以获得所需的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T18:33:59.710

查看[Java Builder](http://www.mathworks.com/products/javabuilder/)，它允许您从 matlab 代码创建 Java 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T03:53:03.353

如果您阅读粘贴的链接中的注释部分，您会看到代码示例中存在错误。输出参数的数量设置为 5 而不是 1。MATLAB 抱怨，因为 MATLAB sqrt 函数返回 1 个参数（因此输出参数过多错误）。

由于 MATLAB 函数可以返回多个参数，因此调用约定要求您指定返回给调用代码的数字，并且要正确执行。

# java - 连接到 Microsoft SQL Server 2005 中的数据库引擎

> ID：12448668
> 
> 赞同：1
> 
> 时间：2012-09-16T16:34:19.387
> 
> 标签：java, sql-server, sql-server-2005

我必须将我的 netbeans 应用程序连接到 Microsoft SQL Server 2005，以便能够将数据读回应用程序（在我存储之后！）。但是我还没有能够创建一个表，因为我能够按照它说的那样连接到数据库引擎。

如何连接到 Microsoft SQL Server 2005 中的数据库引擎？这是我打开*Microsoft Server SQL Management Studio*时当前显示的内容：

![在此处输入图像描述](../Images/c688a3b0bbcf98bdffa4a6e699736d93.png)

这是 SQL Server 配置管理器：

![在此处输入图像描述](../Images/9b031e9583d6f8ff527d0e8d22384423.png)

现在我该怎么做才能连接到数据库引擎？

*注意：如果我需要添加更多信息，请告诉我*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T16:44:42.340

您通过管理工作室创建表`File -> New -> Database Engine Query`并提供服务器名称、用户名和密码。这将打开一个 SQL 编辑器，您可以在其中`USE <your DB>`开始创建表。

您还可以在管理工作室中注册您的数据库服务器以避免每次都输入身份验证详细信息。注册服务器后，测试连接，您可以在对象资源管理器中打开它或直接打开查询窗口等，

要从 Java 程序连接到这个数据库，您需要 Microsoft SQL JDBC 驱动程序（jTDS 也是 SQL server 的一个很好的 JDBC 驱动程序）和一个关于如何使用 Java JDBC API 从 Java 程序连接到 SQL server 的教程。

希望这是有用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T16:46:52.847

右键单击数据库引擎，然后单击“连接”。您需要提供要连接的 SQL Server 的 IP 地址（或服务器名称）。选择 SQL Server 身份验证（除非您的环境支持 Windows 身份验证）并输入您的密码。如果使用 Windows 身份验证，则不需要密码。

高温高压

# java - Apache Ivy 设置任务和 ivysettings.xml 文件

> ID：12448673
> 
> 赞同：3
> 
> 时间：2012-09-16T16:34:45.020
> 
> 标签：java, ant, build, ivy

根据[这个](http://ant.apache.org/ivy/history/2.1.0/use/settings.html)页面，我需要`<ivy:settings>`在我的 Ant 构建中声明一个任务，以帮助 Ant 定位`ivysettings.xml`文件所在的位置。此设置文件是可以找到我所有存储库的定义以及其他信息的位置。

令我困惑的是：根据该页面（上面提供的链接），该`<ivy:settings>`任务可能具有以下属性：

*   `id`
*   `file`
*   `url`
*   `host`
*   `realm`
*   `username`
*   `passwd`

的描述`url`是：

> 要使用的设置文件的 url

暗示该`ivysettings.xml`文件实际上可以存储在不同的机器上，甚至可能存储在*存储库本身内？！？*.

但是最后一个属性（`host`, `realm`, `username`, `passwd`）的描述是多种多样的：

> http 身份验证（主机|领域|用户名|密码）

**对我来说，这些描述与 for 的描述相结合，`url`表明`host`、和属性是用于定位和检索文件的连接凭据；并且它们*不是*用于连接到远程存储库的连接凭据。`realm``username``passwd``ivysettings.xml`**

 *`ivysettings.xml`Ivy 允许您在内部定义多个存储库（包括多个），这进一步证明了这一点，这些存储库`url-resolvers`可能是位于具有不同访问凭据的不同服务器上的不同存储库。看到该`<ivy:settings>`任务只允许您使用这些属性指定一组凭据，这似乎再次暗示这些属性仅用于查找和拉下`ivysettings.xml`文件，而不是用于与 1+ 存储库进行通信。

所以，我问：

*   这 4 个属性是用于连接到`url`where`ivysettings.xml`居住地，还是用于连接到内部定义的远程存储库`ivysettings.xml`？
*   如果上述问题的答案是它们是用于`ivysettings.xml`远程定位的凭据`url`，那么我在哪里放置用于与我的实际存储库所在的 Web 服务器通信的凭据（作为所在`ivysettings.xml`的服务器和我的存储库所在的服务器可能是两台不同的机器）？
*   我怀疑您可以存储`ivysettings.xml`在远程`url`（远程服务器）上是否正确？如果是这样，我如何告诉 Ivy`Server A`用 with`Loging Credentials A`查找我的`ivysettings.xml`文件，但在`Server B`with找到我的存储库`Login Credentials B`？

**请注意**，你们中的一些人也可能会发现[这个](https://stackoverflow.com/questions/1195393/where-do-you-put-ivysettings-xml)问题，并认为我的问题是重复的。我认为上面提到的问题只是“我将`ivysettings.xml`文件放在哪里？”的问题。我的问题*有点*相似，但是，从本质上讲，它实际上是关于理解`<ivy:settings>`属性的意图以及它们试图找到的内容：设置文件或在设置文件中定义的存储库。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T20:54:30.770

[ivy 设置任务](http://ant.apache.org/ivy/history/latest-milestone/use/settings.html)的可选属性在从远程服务器检索设置文件时使用。在该[设置文件](http://ant.apache.org/ivy/history/latest-milestone/settings.html)中，您可以使用[凭据](http://ant.apache.org/ivy/history/latest-milestone/settings/credentials.html)标记来指定远程存储库的身份验证凭据。

例子：

*   [使用ant/ivy从nexus检索依赖项之间的http身份验证？](https://stackoverflow.com/questions/3001535/http-authentication-between-using-ant-ivy-retrieving-dependency-from-nexus/7490766#7490766)
*   [使用 Ivy 和私人公司存储库时，我在哪里放置我的凭据？](https://stackoverflow.com/questions/7503630/where-do-i-put-my-credentials-when-using-ivy-and-a-private-company-repository/7505364#7505364)
*   [使用 IVY 将 SNAPSHOT 工件发布到 Maven - 有什么魔力？](https://stackoverflow.com/questions/8505062/publish-snapshot-artifacts-to-maven-using-ivy-whats-the-magic/8527089#8527089)*

# security - 在tomcat 7中强制使用ssl

> ID：12448677
> 
> 赞同：1
> 
> 时间：2012-09-16T16:35:09.530
> 
> 标签：security, maven, ssl, tomcat7

我想强制所有用户对我的应用程序中的所有页面使用 SSL。我正在使用 mavan 3 并在 maven 中使用了这个插件：

```
 <plugin>
            <groupId>org.apache.tomcat.maven</groupId>
            <artifactId>tomcat7-maven-plugin</artifactId>
            <version>2.0-SNAPSHOT</version>
            <configuration>
                <server>TomcatServer</server>
                <httpsPort>8443</httpsPort>
                <keystoreFile>-- My keystore path --</keystoreFile>
                <keystorePass>-- My keystore pass --</keystorePass>
                <path>/</path>
            </configuration>
        </plugin> 
```

通过 maven (mvn tomcat7:run) 运行服务器时，我的服务器日志如下所示：

```
...
INFO: Initializing Spring root WebApplicationContext
Sep 16, 2012 9:55:17 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
Sep 16, 2012 9:55:17 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8443"] 
```

但是，当我使用 https 访问该页面时，我在 chrome 中收到 SSL 连接错误，并且“SSL 收到了超出最大允许长度的记录”。在火狐中。

1）我相信maven在战争中嵌入了Tomcat 7。因此，没有可以手动配置 SSL 的 server.xml 文件。如何在我的 pom.xml 中配置 SSL？

2) 如何确保所有请求都转发到 8443？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T19:43:24.073

I have a feeling that the "server" attribute may be causing your problem. According to the Tomcat plug-in documentation that is not an option. Here is a (very hard-to-find) list of the plug-in options for the Tomcat 'run' command. [http://mojo.codehaus.org/tomcat-maven-plugin/run-mojo.html](http://mojo.codehaus.org/tomcat-maven-plugin/run-mojo.html) Good luck. I had a similar problem, although not the same. I hope this works for you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T17:45:20.393

这是您应该为 Tomcat 7 配置 SSL 的方式：http: [//tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html)

然后，您需要将 server.xml 添加到这个嵌入式 Tomcat，由插件启动：http: [//tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/tomcat7-maven-plugin/run-mojo.html#serverXml](http://tomcat.apache.org/maven-plugin-2.0-SNAPSHOT/tomcat7-maven-plugin/run-mojo.html#serverXml)

然后，从 8080 到 8443 的转发应该由您的应用程序在内部完成，可能在 servlet 侦听器中]。另请参阅：[如何在 Web 应用程序中实现 HTTPS 登录页面？](https://stackoverflow.com/questions/1454021/how-to-implement-a-https-login-page-in-a-web-application)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-12T14:08:37.543

我遇到了同样的问题，所以我单独托管了 Tomcat，然后`server.xml`通过使用 JDK keytool 生成 jks 文件来配置 ssl 证书。因此，所有应用程序都可以通过安全的 https 链接托管在同一个 tomcat 中。

```
<Connector port="8443" protocol="org.apache.coyote.http11.Http11NioProtocol"
               maxThreads="1500" SSLEnabled="true" scheme="https" secure="true" keystoreFile="C:\apache-tomcat-8\conf\filename.jks" keystorePass="password"
clientAuth="false" sslProtocol="TLS" > 
</Connector> 
```

将上述代码添加到`server.xml`文件中，并将端口从 8443 转发到 443。

# java - Android ICS 4.1 中未找到 NETWORK_PROVIDER

> ID：12448680
> 
> 赞同：1
> 
> 时间：2012-09-16T16:35:23.243
> 
> 标签：java, android, gps, location

标题全部说出来，我正在使用这个：

```
 public int onStartCommand(Intent get,int num1,int num2){

 if (lm != null){

      lm.removeUpdates(this);

  }

 prefs = getSharedPreferences("Prefs", 
         Context.MODE_PRIVATE);

lm = (LocationManager) this.getSystemService(LOCATION_SERVICE);

Criteria criteria = new Criteria();
criteria.setAccuracy( Criteria.ACCURACY_COARSE );
String provider = lm.getBestProvider( criteria, false );
////* Just GPS is Listed in this List , Google Location is Enabled but Not Detected       
/*and Note the Parameter 'false' to get the list of all avaible provider,enable or not 
Toast.makeText(this, provider, Toast.LENGTH_LONG).show(); */
lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 10000, 0, this);

 if(IsFromWidget != true){
str2 = get.getStringExtra("num");   
 }
CheckNetworkState();
return 0;

}

  public void onDestroy() 
 {
 super.onDestroy();
 if (lm != null){

      lm.removeUpdates(this);

  }
 }
private void CheckNetworkState() {

                 if (lm != null){

                      lm.removeUpdates(this);

                  }
                 stopSelf();
                 }

    }

public void onLocationChanged(Location arg0) {
    // TODO Auto-generated method stub

lat = arg0.getLatitude();
lon = arg0.getLongitude();

if (lat == 0 && lon == 0){

}

}

}

if(IsFromWidget = true){

if (lat == 0 && lon == 0){

}
}

stopSelf();
}

public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub

      } 

public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

}

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

 } 
```

但它只返回 GPS 和我的谷歌位置设置已启用，并且我连接了 3G 或 Wifi，当我使用 Android 2.3.x 时它工作正常，请不要注意代码错误，我在发布之前编辑了代码在这里。

谢谢 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T16:44:51.737

记得在 AndroidManifest.xml 中设置你的权限

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T16:40:11.510

如果您想获取您的位置，您可以这样做：

```
LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

Criteria crit = new Criteria();
provider = lm.getBestProvider(crit, false);
Location location = lm.getLastKnownLocation(provider); 
```

并设置一个 LocationListener 类

```
public class MyLocationListener implements LocationListener {

    public void onLocationChanged(Location loc){

    }

    public void onProviderDisabled(String provider) {

    }

    public void onProviderEnabled(String provider) {

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {

    }
} 
```

至少对你来说这是一个好的开始。祝你好运！

# r - 从 Fortran 调用 R 脚本

> ID：12448685
> 
> 赞同：-1
> 
> 时间：2012-09-16T16:36:01.087
> 
> 标签：r, fortran90

我正在 Fortran 90 中进行恶劣天气模拟。我想在 R 中调用一个脚本来执行一些复杂的数据分析。我发现的唯一方法是在文件中写入数据，然后从 Fortan 调用系统函数

```
 call system('R CMD BATCH script.r outcome.out') 
```

并在 output.out 中读取 Fortran 的分析结果。当模拟给出虚假数字时，这会出现一些问题，以便管理文件 output.out。是否存在从 Fortran 调用 R 的更优雅的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T18:02:18.737

我建议不要从 Fortran 调用 R，而是将其转过来。我经常从 R 中调用 Fortran 模型（可执行文件），然后在 R 中获取结果。使用 R 作为控制模型的一种手段可以让人们例如并行运行它们。

大多数情况下，我实际上使用的是在 Fortran 中运行模型的系统，模型使用 Python 运行，而我使用 R 进行后处理。

# java - 阅读具有混合子深度的 XML？

> ID：12448687
> 
> 赞同：-1
> 
> 时间：2012-09-16T16:36:30.500
> 
> 标签：java, xml, nested

我找不到谷歌的好例子，所以也许你知道我的教程：

我想将一个xml读入java，它将像这样嵌套

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
  <art>
    <name>x</name>
    <first>y</first>
    <alist>
        <set>1</set>
        <set>2</set>
        <set>3</set>
    </alist>
  </art>
  <art>
    <name>z</name>
    <first>a</first>
    <alist>
        <set>1</set>
        <set>2</set>
        <set>3</set>
    </alist>
  </art>
...
</config> 
```

我可以像[http://www.developerfusion.com/code/2064/a-simple-way-to-read-an-xml-file-in-java/](http://www.developerfusion.com/code/2064/a-simple-way-to-read-an-xml-file-in-java/)那样做，但没有像“设置”这样的附加标签那些。我是这方面的新手，我通过例子学习。

此致，

阿德里亚斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T16:39:26.190

我将使用这篇文章中的相同答案：[如何解析这样的文档？](https://stackoverflow.com/questions/12448570/parsing-xml-in-java-with-sax-parser)

一个好的做法是使用反映您的 XML 模式的对象模型。

使用该模型，您的解析器所要做的就是在解析过程中构建对象。

有了它，您还可以使用一些很棒的框架来将 XML 文件转换为 java 对象，例如[XStream](http://xstream.codehaus.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T17:44:41.677

您可以使用[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)将 XML 读入 Java 对象，您可以随意处理这些对象。JAXB 的实现包含在从 Java SE 6 开始的 JDK/JRE 中。下面是一个示例：

**配置**

JAXB 是异常配置。这意味着您只需要在希望 XML 表示不同于默认值的地方添加注释（请参阅： [http](http://blog.bdoughan.com/2012/07/jaxb-no-annotations-required.html) ://blog.bdoughan.com/2012/07/jaxb-no-annotations-required.html ）。

```
package forum12448687;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Config {

    private List<Art> art;

} 
```

**艺术**

```
package forum12448687;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class Art {

    private String name;

    private String first;

    @XmlElementWrapper
    @XmlElement(name="set")
    private List<String> alist;

} 
```

**演示**

下面的代码演示了如何将 XML 读入对象，然后将其写回 XML。

```
package forum12448687;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Config.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum12448687/input.xml");
        Config config = (Config) unmarshaller.unmarshal(xml);

        Marshaller marshaller= jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(config, System.out);
    }

} 
```

**输入.xml/输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<config>
    <art>
        <name>x</name>
        <first>y</first>
        <alist>
            <set>1</set>
            <set>2</set>
            <set>3</set>
        </alist>
    </art>
    <art>
        <name>z</name>
        <first>a</first>
        <alist>
            <set>1</set>
            <set>2</set>
            <set>3</set>
        </alist>
    </art>
</config> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T16:43:28.857

`DOM`解析器，`SAX`解析器或`Pull`解析器在较小的层次上解析很好，它越大越难管理......

**尝试使用以下内容：**

**-** `JAXP and JAXB`

**-** `Castor`

# spring-mvc - 带有 JSON 的 Twitter Bootstrap 自动完成器

> ID：12448689
> 
> 赞同：1
> 
> 时间：2012-09-16T16:36:41.460
> 
> 标签：spring-mvc, twitter-bootstrap

我一直在尝试让 Twitter Bootstrap 自动完成器与 Spring MVC 带注释的控制器一起工作。

我有以下 HTML：

```
<div class="control-group">
            <label class="control-label" for="name">Supplier</label>
            <div class="controls">
                <input id="supplier" name="supplier" class="input-xlarge" data-provide="typeahead" type="text"/>    
            </div>
        </div> 
```

和以下javascript：

```
<script src="/resources/js/jquery.js"></script>
    <script src="/resources/js/bootstrap.js"></script>
    <script type="text/javascript">

    $('#supplier').typeahead({
        source: function (query, process) {
            return $.get('http://localhost:8080/supplier/search', { query: query }, function (data) {
                return process(data);
            });
        },

        minLength : 3,
        items : 4,
        property: 'name'
    });
    </script> 
```

当输入三个字母时，我看到了对控制器的正确请求，该请求将单个供应商对象作为 JSON 返回：

```
{"supplier":{"name":"test","id":0,"version":0,"url":null}} 
```

但是，文本字段未显示返回的供应商。任何人都可以就为什么这不起作用提供任何帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T16:58:08.817

[`process()`](https://github.com/twitter/bootstrap/blob/master/js/bootstrap-typeahead.js#L93)需要一个*字符串*数组而不是一个*对象*数组。因此，与其传递一个对象，不如传递一个数组，其中包含您希望在文本字段上显示的内容，即`[ "test" ]`.

另外，作为建议，要`typeahead`与远程源一起使用，我建议改用这个[插件](https://github.com/tcrosen/twitter-bootstrap-typeahead)。除其他外，它允许您使用对象数组而不是字符串数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T17:00:40.123

```
$('#supplier').typeahead({
        source: function (query, process) {
            return $.get('http://localhost:8080/supplier/search', { query: query }, function (data) {
                return process(data);
            });
        },
Replace the above code to the below one

$('#supplier').typeahead({
    source: function(typeahead, query) {
        $.ajax({
            url: "http://localhost:8080/supplier/search')?>",
            dataType: "json",
            type: "POST",
            data: {
                max_rows: 15,
                search_key: query,
                ajax: 1
            },
            success: function(data) {
                var return_list = [], i = data.length;
                while (i--) {
                    return_list[i] = {Name: data[i].Name, value: data[i].Name'};
                }
                typeahead.process(return_list);
            }
        });
    },
    onselect: function(obj) {
        $('[name="name"]').val(obj.id);
    }
}); 
```

# iphone - UIView 的奇怪和虚拟问题

> ID：12448691
> 
> 赞同：1
> 
> 时间：2012-09-16T16:36:50.740
> 
> 标签：iphone, ios, xcode, uiview

我正在开发一个 iOS 应用程序，我可能会遇到这样的混乱。
在 Xcode 中更改了一些参数后，比如“清除图形上下文”，现在我的所有视图都像另一个视图覆盖它们时那样：

![全部](../Images/eb976fe0d79698662f300fade3a0a3c4.png)

这发生在键盘、所有 UIView、TWTweetComposeViewController 和覆盖视图的任何其他对象上。

会是什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T16:49:40.493

这是来自 Apple 文档

> 设置为 YES 时，在调用 drawRect: 方法之前，绘图缓冲区会自动清除为透明黑色。此行为确保在重绘视图内容时不会留下任何视觉伪影。如果视图的 opaque 属性也设置为 YES，则视图的 backgroundColor 属性不能为 nil，否则可能会出现绘图错误。此属性的默认值为 YES。
> 
> 如果您将此属性的值设置为 NO，您有责任确保在您的 drawRect: 方法中正确绘制视图的内容。如果您的绘图代码已经进行了高度优化，则将此属性设置为 NO 可以提高性能，尤其是在滚动期间可能只需要重绘视图的一部分时。

我认为你应该调用 self.view。clearsContextBeforeDrawing = YES 从您的 viewDidLoad 方法。您还可以从 Interface builder 中将其关闭/打开（下面的屏幕截图）

![在此处输入图像描述](../Images/eb47e3ca56fdf4b8a1a1d4c7af7b163d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T19:42:07.027

我解决了更改框架以管理我的视图控制器的问题。

问题是由于[ECSlidingViewController 造成](https://github.com/edgecase/ECSlidingViewController)的：在删除它并用[ViewDeck](https://github.com/Inferis/ViewDeck)替换它之后，一切都像魅力一样工作，应用程序更加流畅。

# xml - R编程XML：访问重复节点

> ID：12448694
> 
> 赞同：1
> 
> 时间：2012-09-16T16:37:43.837
> 
> 标签：xml, r, nodes

我想访问一个在 xml 文件中重复的节点这是我正在使用的文件的一部分

```
</tig>
<aug>
 <au>Lee, Kuei-Chiu</au>
 <au>Chang, Yu-Hui</au>
</aug> 
```

当我使用以下代码时，我只能访问名字

```
 authors=xmlSApply(r,function(x)
  xmlValue(x[['header']][['controlInfo']][['artinfo']][['aug']][['au']])) 
```

有没有办法索引这个节点的第二个'au'部分（即Chang，Yu-Hui）？

非常感谢

巴里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:20:36.687

使用[xpath](http://www.w3.org/TR/xpath/)（尤其是第 2.5 节的初学者）是一种非常灵活的方式来索引 xml 文档，例如

```
r[["//au[2]"]] 
```

# html - 嵌入 iframe 的 Youtube 视频不播放高清

> ID：12448695
> 
> 赞同：2
> 
> 时间：2012-09-16T16:37:54.900
> 
> 标签：html, ipad, iframe, youtube

我正在制作一个网页，并在我的 html 文档中嵌入了带有 iframe 的高清 Youtube 视频。它适用于我的 MAC 上的 Chrome 和 Safari，但在 Firefox 和 Ipad 上（在 Safari 和 Chrome 中）**它只播放标准视频（不是高清版本！）**。

注意：既没有`hd=1`或`fmt=22`也没有`vq=hd720`解决这个问题。而且我没有使用任何javascript。

有人可以帮帮我吗？

谢谢。佛罗伦萨。

**编辑——来自 OP 评论的代码：**

```
 <iframe class="fullscreen" id="propiedades" 
   src="youtube.com/embed/nkHGbUyeo2o?feature=player_detailpage&‌modestbranding=1&title=&showinfo=0&hd=1&rel=0&autoplay=1&autohide=1&controls=0&ve‌​rsion=3&wmode=transparent"
   frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen 
   seamless="seamless"> 
 </iframe> 
```

# c# - 一切都是对象

> ID：12448700
> 
> 赞同：0
> 
> 时间：2012-09-16T16:38:51.727
> 
> 标签：c#

在 .Net 中，所有事物都是对象，但我有疑问。我写了一个方法

```
public static MvcHtmlString ObjectTable(this HtmlHelper helper, 
                              ICollection<Object> objects, ICollection<string> header) 
```

但我没有添加 system.object 并且添加命名空间时出错。我的问题是：如果所有东西都在 .NET 驱动的表单对象中，但为什么我应该添加命名空间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T16:40:22.037

仅仅因为一切都是一个`Object`并不意味着`Object`不能在`System`命名空间中。确实如此，而且它遵循通常的命名空间规则。

（不过，您也可以使用`object`不带 的小写别名`using System`。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T16:48:07.777

添加`using`指令的目的只是为了允许您在该命名空间中使用名称，而无需完全限定它们。

*所以你*不必添加`using`指令。你可以写：

```
public static MvcHtmlString ObjectTable(this HtmlHelper helper, 
    ICollection<System.Object> objects, ICollection<string> header) 
```

或者，就像`object`的别名*一样*`System.Object`，您可以编写：

```
public static MvcHtmlString ObjectTable(this HtmlHelper helper, 
    ICollection<object> objects, ICollection<string> header) 
```

顺便说一句，[并非一切都来自对象](http://blogs.msdn.com/b/ericlippert/archive/2009/08/06/not-everything-derives-from-object.aspx)...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T16:45:17.647

正如您所说，一切都从 Object 派生，但是 System.Object 就像您要引用的所有其他类型一样，您要么必须显式引用它（即 System.Object），要么为命名空间添加 using。

让它以其他方式表现将与 .Net 的其余部分不一致，并且可能会导致更多混乱。

# php - 在php中获取Apk内容

> ID：12448701
> 
> 赞同：1
> 
> 时间：2012-09-16T16:39:02.677
> 
> 标签：php, android

我想知道，有什么方法可以获取 Apk 文件的内容，例如权限、min-sdk 版本和 PHP 中的当前版本？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T16:41:22.340

APK 只是 ZIP 文件。如果你解压它们并阅读 AndroidManifest.xml，你应该能够得到你需要知道的一切。

另请参阅： [如何解析 .apk 包中的 AndroidManifest.xml 文件](https://stackoverflow.com/q/2097813/362536)

# git - 使用带有多个提交者的 Git 部署网站

> ID：12448709
> 
> 赞同：3
> 
> 时间：2012-09-16T16:39:53.033
> 
> 标签：git, web-deployment, dokuwiki

我想在我的服务器上运行一个[dokuwiki.org 。](https://www.dokuwiki.org/dokuwiki)我正在使用基于文件的设置，因此不涉及外部数据库。

我想设置一个包含 dokuwiki`data`目录的 git 存储库，以便多个提交者能够脱机工作并在完成后将更改推回。git仓库中的`data`目录没什么大不了的，你可以`data`使用dokuwiki的config-files设置目录的位置。

我使用[本](http://toroid.org/ams/git-website-howto)指南进行了所有设置，并且按预期工作。

tl；指南博士：

*   设置`bare`回购
*   `post-receive`挂钩裸仓库以导航到`htdocs`目录并从仓库签出更改`bare`。
*   您将某些内容推送到存储库，`htdocs`目录会自动签出存储库中的更改。

因此，该指南仅在您将其用于静态站点或基于数据库的内容时才有用。

我的问题是，`www`每次有人通过基于 Web 的 wiki 而不是他们本地存储库中的文件编辑某些内容时，目录都会更改 -> 更改不会被推送回`bare`存储库，因为没有钩子/方式/...到去做。

我在这里有什么遗漏或更好的方法来处理这个用例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T16:57:44.053

我唯一想到的就是让网站本身成为一个存储库（称之为`www`repo），并且人们在开发人员推送之前从中提取。您可以使用[git 插件](https://www.dokuwiki.org/plugin%3agit)提交网站上发生的更改。

这有缺点，因为您必须更改设置挂钩的方式。基本上，当有人推送到裸存储库时，您必须检查您的钩子，通过 Web 界面进行的最后修改已提交到`www`repo（这意味着它的工作树是干净的），并且被推送的提交包含它们（即他们已从网站回购中撤出）。如果是，那么裸存储库的钩子会将新提交推送到存储库`www`。

但是我不知道这是否可行，以及 git 插件的质量如何。但我没有看到任何其他东西可以让 Git 处理非提交的外部修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T12:54:29.570

有一个相当新的插件可以满足您的需求：[gitbackend](https://www.dokuwiki.org/plugin%3agitbacked)。它还支持拉入实时回购。

从您的描述中看不出来，但如果您打算“仅”更改`data/pages`and中的内容`data/media`，您将错过对元数据的更改。这意味着多个提交只会在页面的旧修订版上显示为单个修订版，并且会丢失提交消息/更改摘要等其他数据。

上述插件也没有实现元数据更改，但可以在内部实现。如果您想编写一个在外部执行某些操作的脚本，您可能想挂接到[XML-RPC API](https://www.dokuwiki.org/devel%3axmlrpc)中。

# jquery - 如何从simplemodal（Jquery）刷新和关闭父窗口

> ID：12448712
> 
> 赞同：1
> 
> 时间：2012-09-16T16:40:35.490
> 
> 标签：jquery, simplemodal

我正在使用 simplemodal 通过 iframe 打开另一个页面。页面提交成功后，如何关闭模态窗口并刷新父页面？如果后端验证未通过，我不想关闭它。

*   我提交模态窗口
*   验证后端验证是否成功
*   如果是，关闭模态窗口并重新加载父页面
*   如果不是，则显示验证消息

提前致谢

# c++ - 在 C++ 中实现哈希表（插入和延迟删除）

> ID：12448713
> 
> 赞同：5
> 
> 时间：2012-09-16T16:40:45.727
> 
> 标签：c++, insert, hashtable, hash-collision

我正在用 C++ 实现一个 Hashtable 类。我使用的冲突解决方法是带有延迟删除的线性探测。我已经看到了这个的实现，但对插入方法有疑问。哈希表的每个单元格都有一个状态（活动、已删除、空）。由于某些原因，我在插入新元素时看到了实现中的某些原因，它们对键进行哈希处理，然后探测表，直到找到 EMPTY 单元格（或直到找到已经包含相同键的单元格）。

示例代码：

```
int findPos(const string &key){
     int currentPos=hash(key);
     while(data[currentPos].state!=EMPTY && data[currentPos].key!=key){
         currentPos++;
         if (currentPos>=data.size())
            currentPos-=data.size()
         }
      return currentPos;
}

bool insert(const string &key){
     int currentPos=findPos(key);
     if (isActive(currentPos))
          return false; //already exists
     data[currentPos]=hashEntry(key,ACTIVE);
     if (++currentSize>data.size()/2)
          rehash();
     return true;   //element inserted
} 
```

我的问题是：是否有理由不停止并插入已标记为已删除的单元格？换句话说，在`findPos`方法中，为什么不将 while 语句更改为，`while(data[currentPos].state==ACTIVE && data[currentPos].key!=key)`以便当我们找到带有键的单元格或第一个删除/空单元格时循环结束。然后在插入中，测试单元格的状态。如果 active 条目已经存在，则返回 false；否则插入元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T16:47:38.093

密钥可能已被进一步插入，稍后其中一个中间单元可能已被标记为已删除。然后，您将插入相同键的重复实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T18:04:59.787

Probably your reference code did not have lazy delete, or the DELETED state was added to an existing implementation. Yes you can safely "undelete" an entry for your key. But make sure this algorithm is used consistently, to avoid the situation described in @Thomas' answer.

# ruby-on-rails - Rails 属性未显示/另存为空白

> ID：12448715
> 
> 赞同：0
> 
> 时间：2012-09-16T16:41:25.077
> 
> 标签：ruby-on-rails, attributes, attr-accessible, attr-accessor

属性 balance_card_uri 保存为空白，并且在此加注中不显示：

[https://img.skitch.com/20120916-fpmxabwg6m4ys3y84rkti615iq.jpg](https://img.skitch.com/20120916-fpmxabwg6m4ys3y84rkti615iq.jpg)

这是来自 customer.rb 的代码：[https ://gist.github.com/ee0b27bebe14d88417d9](https://gist.github.com/ee0b27bebe14d88417d9)

在第一次遇到问题后，我意识到我将 attr_accessble 和 attr_accessor 中的属性命名错误。我正确地重命名了它们，并且 balance_card_uri 仍然显示空白......

帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T16:45:41.400

你总是在`balanced_customer`. 为什么不添加一些条件语句？

例子：

```
raise "Balanced Card: #{balanced_card_uri} Email: #{email}" if balanced_card_uri.blank? && email.blank? 
```

无论如何，这不是继续的方式，您应该使用验证。例子：

```
validates :balanced_card_uri, presence: true 
```

检查[此页面](http://guides.rubyonrails.org/active_record_validations_callbacks.html#validation-helpers)以获取更多信息。

* * *

旁注：您为什么不添加`recurring_amount`and`recurring`到您的`attr_accessible`?

* * *

旁注：

代替：

```
before_save :handle_recurring_donations, :if => :recurring 
```

和：

```
before_save :handle_recurring_donations, :if => :recurring? 
```

* * *

问题似乎源于您的`find_or_initialize_by_repeat_donator`: 您在那里没有考虑任何参数。

你应该有这样的一行：

```
 customer.load(attrs) 
```

使用您想要保留的所有参数。

# android - OnLongClickListener 导致运行时错误

> ID：12448716
> 
> 赞同：1
> 
> 时间：2012-09-16T16:41:38.290
> 
> 标签：android

我一直在尝试`OnLongClickListener`在我的 Android 应用程序中使用 a 。我正在尝试`OnLongClickListener`在用户按下按钮时使用 来增加一个数字。我采用了`OnClickListener`在我的应用程序其他地方工作的代码，只是更新了它，`OnLongClickListener`但是当我尝试运行我的应用程序运行时错误时发生。这是我的代码：

```
public void onCreate(Bundle savedInstanceState)                                     //performed when application is first run        
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);                                             //link to activity_main.xml
    calculateElapsedTime();     
    Button myButton = (Button)findViewById(R.id.delayUp);                   
    myButton.setOnLongClickListener(new View.OnLongClickListener() {                    
        public boolean onLongClick(View v){                                             
            System.out.println("Hello World");
            return true;
        }
    });
} 
```

谁能提供一些有关此代码为何不起作用的见解。请注意，我在代码中有“Hello World”，这完全是为了测试目的，但是因为当应用程序加载时我得到运行时错误，显然这行代码永远不会被处理。

这是来自 LogCat 的错误：

```
09-16 17:22:34.982: D/dalvikvm(275): GC_EXTERNAL_ALLOC freed 750 objects / 55632 bytes in 179ms
09-16 17:22:35.113: D/AndroidRuntime(275): Shutting down VM
09-16 17:22:35.124: W/dalvikvm(275): threadid=1: thread exiting with uncaught exception  (group=0x4001d800)
09-16 17:22:35.203: E/AndroidRuntime(275): FATAL EXCEPTION: main
09-16 17:22:35.203: E/AndroidRuntime(275): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.morinnic.intervaltimer/com.morinnic.intervaltimer.MainActivity}: java.lang.ClassCastException: android.widget.ImageButton
09-16 17:22:35.203: E/AndroidRuntime(275):  at   android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
09-16 17:22:35.203: E/AndroidRuntime(275):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
09-16 17:22:35.203: E/AndroidRuntime(275):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
09-16 17:22:35.203: E/AndroidRuntime(275):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
09-16 17:22:35.203: E/AndroidRuntime(275):  at  android.os.Handler.dispatchMessage(Handler.java:99)
09-16 17:22:35.203: E/AndroidRuntime(275):  at android.os.Looper.loop(Looper.java:123)
09-16 17:22:35.203: E/AndroidRuntime(275):  at android.app.ActivityThread.main(ActivityThread.java:4627)
09-16 17:22:35.203: E/AndroidRuntime(275):  at java.lang.reflect.Method.invokeNative(Native Method)
09-16 17:22:35.203: E/AndroidRuntime(275):  at java.lang.reflect.Method.invoke(Method.java:521)
09-16 17:22:35.203: E/AndroidRuntime(275):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-16 17:22:35.203: E/AndroidRuntime(275):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-16 17:22:35.203: E/AndroidRuntime(275):  at dalvik.system.NativeStart.main(Native Method)
09-16 17:22:35.203: E/AndroidRuntime(275): Caused by: java.lang.ClassCastException: android.widget.ImageButton
09-16 17:22:35.203: E/AndroidRuntime(275):  at com.morinnic.intervaltimer.MainActivity.onCreate(MainActivity.java:32)
09-16 17:22:35.203: E/AndroidRuntime(275):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-16 17:22:35.203: E/AndroidRuntime(275):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
09-16 17:22:35.203: E/AndroidRuntime(275):  ... 11 more 
```

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T16:46:02.437

鉴于您提供的信息，明显的可能性是：myButton 可能为 null（这将引发 NullPointerException），即视图上不存在与 id 对应的元素（尚），或者它不是 Button 类型（这将引发 ClassCastException）。

确保在上面的代码**之前**`setContentView`调用活动，并确保它确实是一个按钮。

 **手机输出的样本会有所帮助。了解如何使用该`adb logcat`命令，它将显示您得到的确切异常。**

# iis-7 - 在命令行上运行asp脚本

> ID：12448717
> 
> 赞同：2
> 
> 时间：2012-09-16T16:41:52.220
> 
> 标签：iis-7, asp-classic

是否可以在命令行上运行 asp 脚本？命令是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T08:12:46.850

如果 Classic ASP 文件已经在某处的网络服务器上运行，而您只是想调用它来执行它，那么您可以使用以下代码创建一个 .VBS 文件：

```
url="http://foo.com/bar"
Set WshShell = WScript.CreateObject("WScript.Shell")
Set http = CreateObject("Microsoft.XmlHttp")
http.open "GET", URL, FALSE
http.send "" 
```

如果要使用 Windows 任务调度程序执行它，请创建一个调用 .VBS 文件的单行 .CMD 文件，例如：

```
cd \directory-containing-foobar-script
cscript foobar.vbs 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T17:06:52.703

通常 .asp 文件不能像在 PHP 中那样从命令行运行，`php -r <php code>`但您可以做的是从带有参数的命令行启动 IIS 服务器，然后执行如下代码：

```
start /B "C:\Program Files\Common Files\Microsoft Shared\DevServer\9.0\WebDev.WebServer.EXE" /port:9090 /path:"D:\project\MYPROJECT" /vpath:"/MYPROJECT"

// and then start the url
start "http://localhost:9090/MYPROJECT/" 
```

# c# - 实现 IE9 的 JavaScript 引擎（“Chakra”）的 IActiveScript 实例，在 Quirks 模式下工作

> ID：12448718
> 
> 赞同：6
> 
> 时间：2012-09-16T16:42:00.877
> 
> 标签：c#, .net, internet-explorer-9, chakra, iactivescript

通过基于 CLSID“{16d51579-a30b-4c8b-a276-0ff4dc41e755}”（如此处所述[）](https://stackoverflow.com/questions/7167690/what-is-the-progid-or-clsid-for-ie9s-javascript-engine-code-named-chakra)创建 IActiveScript 实例，我们得到了 IE9 的 JavaScript 引擎，该引擎在 Quirks 模式下工作。不幸的是，在 Quirks 模式下，ECMAScript 5 不支持。

有谁知道如何为“Chakra”创建一个在 IE9 标准模式下工作的 IActiveScript 实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-25T19:12:33.617

投射你`IActiveScript`的`IActiveScriptProperty`然后像这样调用`SetProperty`它`SCRIPTPROP_INVOKEVERSIONING`：

```
CComQIPtr<IActiveScriptProperty> property = jscript;
CComVariant version(SCRIPTLANGUAGEVERSION_5_8 + 1); // = 3
hr = property->SetProperty(SCRIPTPROP_INVOKEVERSIONING, nullptr, &version); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T18:08:59.190

我相信 CLSID 是 16d51579-a30b-4c8b-a276-0ff4dc41e755。[这里](https://github.com/xpaulbettsx/SassAndCoffee/tree/master/SassAndCoffee.JavaScript)有关于 Active Script 和 JScript 接口的各种重要信息，尤其是对于那些使用 C# 的人。

# c++ - 子弹物理刚体从表面反弹

> ID：12448722
> 
> 赞同：3
> 
> 时间：2012-09-16T16:43:01.587
> 
> 标签：c++, game-physics, physics-engine, bulletphysics

我为我的游戏编写了一个玩家控制器，它使用刚体为玩家提供物理效果。我将恢复力和摩擦力都设置为 0，质量设置为 80。我的地形具有完全相同的属性，只是质量也是 0。每当玩家从高处坠落时，它会在地形表面反弹几次。这真的不是我希望我的玩家做出反应的方式。有没有办法防止这种行为？

这是一个说明我的问题的视频。它有点滞后，因为我使用 QuickTime 录制了它，但它应该明白这一点。

[http://www.youtube.com/watch?v=2eQ1cj7hpWw](http://www.youtube.com/watch?v=2eQ1cj7hpWw)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T18:20:24.123

您设置恢复 0 并期望它不会反弹。但是当你的身体与地球碰撞时，那个小跳跃（与你感觉到的高度相比）是由求解器处理的。Solver 应用一定的冲力来解决碰撞并停止你的运动。当碰撞未解决时，冲动稍大一些，以避免出现这种情况。

当您的身体是运动的而不是动态的时，您可以考虑实施不同的模拟。

您将不得不手动处理碰撞和运动，但您可以完全控制您希望身体如何运动。

# c++ - C++ 模板机制只是一个类型构建器函数吗？

> ID：12448723
> 
> 赞同：1
> 
> 时间：2012-09-16T16:43:03.920
> 
> 标签：c++, templates, programming-languages, language-theory

我刚刚开始思考这个问题。每个 C++ 模板都可以替换为返回类（或函数）对象的“普通”函数吗？正常意味着编译时程序。

所以我想用“普通函数（意味着在编译器解析树或类似的东西上工作的编译时程序）”替换 C++ 编译中的模板实例化，我不想使用 declerative 语法。

你认为通过下面的思路我们可以替换C++中的整个模板机制吗？你认为这种方式更容易理解模板吗？我知道这个问题有点理论，但我不知道在哪里讨论这个问题的最佳地点。

```
template<typename T>
struct A
{
  int foo();
  bool bar;
  T data;
};

#if 0
class A(typename T) // class bulder after "("
{
  class ret;          // class object can only declared in class builder
  ret.name = "whatever_compile_time_string";
  ret += body         // body is a class builder member with class declaration syntax
         {
           body();    // constructor
           ~body();   // destructor
           int foo(); // method
           bool bar;  // member
         };
  ret += member(T, "data"); // "inject" a templated member

  return ret;
}
#endif

int main()
{
  A<int> a;
#if 0
  // create a new class
  typedef new class A(int) AInt;
  // or
  typedef new class A(int); // in this case class.name must be an initialized thing
#endif
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T00:13:14.863

是的。您所描述的是一个宏观系统。C 预处理器提供了一种弱形式的宏，但在一般情况下，宏只不过是编写源代码（以源代码作为输入）的程序，在编译时执行。

现在，宏观理论变得有些复杂。显然，您可以使用任何可以让您在编译时执行代码的宏系统做任何您想做的事情，但是为了让做正确的事情变得容易，需要做很多工作。（特别是，拥有可以插入的语法引用结构确实很有帮助。）

借助强大的宏系统，许多以前内置于语言中的语句可以改为用户定义或包含在标准库中。

如果您对该主题感兴趣，请查看 Scheme，尤其是 Racket 编程语言。Racket 的核心非常小，用户体验的几乎所有语言都是由宏构建的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T16:45:39.193

不。关于模板的主要事情之一是它们提供静态推断的类型安全多态性。

根据定义，您不能在运行时这样做。如果您想将所有内容移至运行时，请不要使用 C++，使用针对后期绑定优化的东西。

更新：如果您说的是在编译时运行的函数，那么（a）您将需要编译器来解释 C++（如果您想用 C++ 编写它），那么您将失去声明性、功能性的好处语言即模板。我没有看到好处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T18:27:06.943

C 程序员使用两种方法来实现类似 C++ 中的模板的效果。但是，我认为在 C++ 中使用这些方法而不是模板没有任何好处。但是，如果您认为模板难以理解，请查看以下内容：

## 通过使用宏：

```
// N: typename, T: used type
#define MAKE_A(N, T)  class N { \
public: N(){} ~N(){}  bool flag; T data; }

MAKE_A(AInt, int);
MAKE_A(AFloat, float); 
```

## 通过使用额外的实现头文件：

文件：啊（不要放置包含防护）：

```
// A_NAME: typename, A_TYPE: used type
class A_NAME { 
public: 
    A_NAME(){} 
    ~A_NAME(){}  
    bool flag; 
    A_TYPE data; 
}; 
```

用法：

```
#define A_NAME AInt
#define A_TYPE int
#include "A.h"
#undef A_NAME
#undef A_TYPE 

#define A_NAME AFloat
#define A_TYPE float
#include "A.h"
#undef A_NAME
#undef A_TYPE 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T20:23:04.190

与模板相比，BOOST.PP 的一个优势是，使用 BOOST.PP 生成的程序比使用模板的等效程序编译得更快，至少根据[boost devel list](http://article.gmane.org/gmane.comp.lib.boost.devel/189925)的这篇文章是这样。

即使使用散列而不是线性查找来提高 gcc 的速度，我相信使用 BOOST.PP 仍然更快，我猜是因为 Walter Bright 在引用的帖子中提到的限制。

# android - 开关内的按钮错误 + if

> ID：12448727
> 
> 赞同：1
> 
> 时间：2012-09-16T16:43:19.890
> 
> 标签：android

我遇到了一个按钮问题：我创建了一个开关，里面有一个 onClickListener 和 onClick 监听器里面的 if/else。问题是，如果我尝试在 if 语句中修改按钮状态（我想更改背景颜色），我会收到错误消息。如果我在 if/else 括号外写下同一行，它确实有效。我错过了什么？

编辑：资源没问题，它确实在其他活动中工作。问题是，如果我输入 risp1。Eclipse 没有像往常一样给我提示框，而是向我显示错误“risp1 无法解析为类型”。该应用程序不会崩溃，它可以工作，但它不会像我想要的那样改变底部的背景颜色（我得到透明的黑色）。

```
import java.util.Random;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class QScalata extends Activity{

SharedPreferences SPavanzamento;
int ndomanda=0,caso;
TextView domanda;
public Button risp1,risp2,risp3,risp4;
int intdomanda,scelta;
String Domanda1[],Domanda2[],Domanda3[];
String RispQ1[] = null;
String RispQ2[]= null;
String RispQ3[]= null;
String RispQ4[]= null;

int esatto1[]={1,1,1};
int esatto2[]={1,1,1};

@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.qscalata);

    domanda = (TextView) findViewById(R.id.tvDomandaS);
    risp1 = (Button) findViewById(R.id.b1S);
    risp2 = (Button) findViewById(R.id.b2S);
    risp3 = (Button) findViewById(R.id.b3S);
    risp4 = (Button) findViewById(R.id.b4S);

    Domanda1 = getResources().getStringArray(R.array.QScalata);
    RispQ1 = getResources().getStringArray(R.array.RispQ1);
    RispQ2 = getResources().getStringArray(R.array.RispQ2);
    RispQ3 = getResources().getStringArray(R.array.RispQ3);
    RispQ4 = getResources().getStringArray(R.array.RispQ4);

    SPavanzamento = getSharedPreferences("avanzamento", 0);

    Bundle extras = getIntent().getExtras();
    ndomanda = extras.getInt("extra");

    switch(ndomanda){
    case 1:
        Random random= new Random();
        caso=random.nextInt(3);
        domanda.setText(Domanda1[caso]);
        risp1.setText(RispQ1[caso]);
        risp2.setText(RispQ2[caso]);
        risp3.setText(RispQ3[caso]);
        risp4.setText(RispQ4[caso]);

        risp1.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                scelta=1;
                if(scelta==esatto1[caso]){
                    risp1.setBackgroundColor(65280);
                    Handler handler = new Handler();
                    handler.postDelayed(new Runnable() { 
                         public void run() { 
                             risp1.setBackgroundColor(R.color.transparent_bg);
                             SharedPreferences.Editor editor = SPavanzamento.edit();
                             editor.putInt("avanzamento", 1);
                             editor.commit();
                             Intent returnMenu = new Intent("metal.quiz.SCALATA");
                             startActivity(returnMenu);
                         } 
                    }, 1000);

                }else{
                    risp1.setBackgroundResource(R.drawable.red);    
                }
                Handler handler = new Handler();
                handler.postDelayed(new Runnable() { 
                     public void run() { 
                         finish();
                     } 
                }, 1000);
            }
        });
        break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T17:00:06.533

> “risp1 无法解析为类型”

这仅仅意味着您没有`risp1`正确声明。我假设它`risp1`是一个按钮，所以你想像这样创建一个类变量：

```
public class MyActivity extends Activity {
    // You forgot "Button" or whatever type risp1 should be
    public Button risp1; 
    ...

    public void onCreate(...) { 
```

* * *

**另外** 我看到，你*已经*给出`risp1`了一个类型，但你没有导入它：

```
import android.widget.Button; 
```

（您可以按`Ctrl`++自动导入您的依赖项。`Shift`）`O`

# jquery - 在 wordpress 中使用 fancybox 加载内联内容

> ID：12448728
> 
> 赞同：4
> 
> 时间：2012-09-16T16:43:24.843
> 
> 标签：jquery, wordpress, fancybox

我正在尝试在自定义 wordpress 页面模板中使用 Fancybox 加载内联内容。灯箱显示但显示以下错误而不是内联内容。

错误：“无法加载请求的内容。请稍后再试。”

这是我正在使用的 javascript：

```
$(document).ready(function($) {
    $('a[href="#contact"]').fancybox({
        helpers: {
            overlay: {
                opacity: 0.98,
                css: { 'background-color': '#fff' }
            }
        }
    });
}); 
```

这是我想使用 Fancybox 显示的 HTML。

```
<a href="#contact">Inline content over here.</a> 
```

请注意，我正在尝试在自定义 wordpress 页面模板中完成此操作。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T16:58:02.013

你必须改变你的 HTML ：

HTML：

```
 <a href="#contact">Inline content over here.</a>
 <div id="contact" style="display:none">Inline content over here</div>
    ​ 
```

示例：http: [//jsfiddle.net/fU54x/839/](http://jsfiddle.net/fU54x/839/)

如果您想保持相同的 html，并且只显示`<a>`标签中的内容，则必须在此模式下更改 Lightbox 脚本：

相同的 HTML：

```
<a href="#contact">Inline content over here.</a> 
```

JS：

```
$('a[href="#contact"]').click(function(){
    var $this = $(this);
  $.fancybox({
        helpers: {
            overlay: {
                opacity: 0.98,
                css: { 'background-color': '#fff' }
            }
        },
      content: $this.html()
    });
}); 
```

我也更新了示例：

**点击这里：http: [//jsfiddle.net/fU54x/840/](http://jsfiddle.net/fU54x/840/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T17:00:03.000

尝试使用Fancybox的[content 参数。](http://fancybox.net/api)

```
$(document).ready(function($) {
    var inlineContent = $('#inlineContent').html();
    $('a[href="#contact"]').fancybox({
        content: inlineContent,
        helpers: {
            overlay: {
                opacity: 0.98,
                css: { 'background-color': '#fff' }
            }
        }
    });
}); 
```

标记：

```
<a href="#contact">Link</a>
<div id="inlineContent" style="display:none;">Inline content over here.</div> 
```

# ruby-on-rails - 使用 activeadmin 路由“member_action”

> ID：12448729
> 
> 赞同：1
> 
> 时间：2012-09-16T16:43:25.100
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing, activeadmin

我做了这样的会员操作：

```
member_action :send_by_email, :method => :get 
```

它应该执行 Admin::CardsController/send_by_email 但它不是，我不启动控制器操作。

我的文件是 app/controllers/admin 中的 cards_controller.rb

```
class Admin::CardsController < ApplicationController
    def send_by_email
       raise "ok"
    end
end 
```

当我做 rake 路线时，我得到了：

```
 send_by_email_admin_card GET        /admin/cards/:id/send_by_email(.:format) admin/cards#send_by_email 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-24T08:55:15.183

你凌驾于你的工作之上。

如果你在 Admin::CardsController 中定义一个动作，你所做的与使用 member_action 定义它是一样的。

推荐的方法是使用 member_action 定义管理资源控制器操作，而不是在其控制器中挖掘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T17:17:20.287

要进一步调试，请尝试以下操作：

```
member_action :send_by_email do
  raise "ok" #assuming that works, I use puts statements but whatev.
end 
```

我发现我必须把我所有的“东西”都放在`app/admin/cards.rb`

# python - Python，正则表达式帮助。重新插入

> ID：12448732
> 
> 赞同：0
> 
> 时间：2012-09-16T16:43:43.000
> 
> 标签：python, regex, string

我想知道如何转换这个字符串：

> v10:2:34:5h101111gV5H2p1

对此：

> ;v10:2:34:5;h101111;gV5H2;p1;

所以用文字来说，我想知道如何插入';' 在所有小写字母之前。我可以添加';' 最后是：

```
str = str + ';' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T16:47:02.423

如果您的字符串在变量中`x`：

```
import re
re.sub('([a-z]|$)', r';\1', x) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T16:52:41.547

```
>>> s
'v10:2:34:5h101111gV5H2p1'
>>> ''.join(';'+x if x.islower() else x for x in s)+';'
';v10:2:34:5;h101111;gV5H2;p1;' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T16:46:38.120

非`regex`方法：

```
In [11]: from string import ascii_lowercase

In [12]: strs="v10:2:34:5h101111gV5H2p1"

In [13]: ''.join(';'+x if x in ascii_lowercase else x for x in strs)+';'
Out[13]: ';v10:2:34:5;h101111;gV5H2;p1;' 
```

或者：

```
In [16]: ''.join(';'+x if x.lower()==x and x.isalpha() else x for x in strs)+';'

out[16]: ';v10:2:34:5;h101111;gV5H2;p1;' 
```

# azure - Windows azure url 转发

> ID：12448734
> 
> 赞同：0
> 
> 时间：2012-09-16T16:44:03.010
> 
> 标签：azure

我有一个 Windows Azure VM，我在上面部署了我的网站。[我可以使用 dns 名称http://mysite.cloudapp.net](http://mysite.cloudapp.net)访问我的网站，但无法通过 IP 地址 XXX.XX.XX.XXX 访问它。我在这个 IP 地址上做了一个 CNAME，并且无法使用我从 ISP www.MySite.com 购买的域名访问它。如果我不能只在 url 中添加 IP 地址并访问该站点，则转发将不起作用。怎么了。我使用公共虚拟 IP 地址 (VIP) 并且端点 80 已打开

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:35:57.293

就像 Drew 指出的那样，您可以使用 CNAME 并让它指向您的 *.cloudapp.net 地址（而不是 IP 地址）。如果要指向 IP 地址，则必须使用 A 记录。这也是受支持的方案，因为 IP 地址是在每次部署时分配给您的：

> 使用 A 记录，您可以将域（例如 contoso.com 或 www.contoso.com）或通配符域（例如 *.contoso.com）映射到 Windows Azure 托管服务中部署的单个公共 IP 地址. 因此，此 IP 地址的生命周期就是在您的托管服务中部署的生命周期。IP 地址在您首次部署到托管服务中的空槽（生产或暂存）时创建，并由槽保留，直到您从该槽中删除部署。您可以从 Windows Azure 管理门户中发现此 IP 地址。

本文将帮助您解决所有自定义 DNS 问题：[为 Windows Azure 云服务或存储帐户配置自定义域名](http://www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T16:59:04.307

[CNAME](http://en.wikipedia.org/wiki/CNAME_record)不指向 IP 地址，它指向另一个 DNS 名称。因此，您应该将 www.mysite.com 指向 mysite.cloudapp.net。Azure 中的 IP 地址不是静态的（今天），这就是您需要使用 CNAME 的原因。

# c++ - QT DBUS挂载文件系统

> ID：12448736
> 
> 赞同：3
> 
> 时间：2012-09-16T16:44:20.713
> 
> 标签：c++, qt, filesystems, mount, dbus

我想使用 QT 和 DBUS 挂载文件系统。我使用这个小片段订阅了“DeviceAdded”信号：

```
 void DBusWatcher::deviceAdded(const QDBusObjectPath &o) {
    QDBusMessage call = QDBusMessage::createMethodCall("org.freedesktop.UDisks", o.path(), "org.freedesktop.DBus.Properties", "GetAll");

    QList<QVariant> args;
    args.append("org.freedesktop.UDisks.Device");
    call.setArguments(args);

    QDBusPendingReply<QVariantMap> reply = DBusConnection::systemBus().asyncCall(call);
    reply.waitForFinished();

    QVariantMap map = reply.value();

    // ...
} 
```

这很好用。我的问题是，我如何安装这个东西？我所拥有的就是这样的——它根本不起作用——而且没有错误。

```
QDBusMessage call = QDBusMessage::createMethodCall("org.freedesktop.UDisks", "dont know what to put here!", "org.freedesktop.UDisks.Device", "FilesystemMount"); 
```

现在，我应该在 QDBusConnection::systemBus() 上使用什么操作：call、asyncCall、callWithCallback？必须将什么作为第二个参数放入 createMethodCall 中？没有任何作用！真是令人沮丧！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T18:45:56.493

好的，经过至少2天的努力，我终于得到了它！我查看了`razer-qt`资源，我查看了`kdelibs`资源，但不知何故，他们所有的`dbus`东西都不起作用。所以这是我很满意的片段：

```
void DBusWatcher::deviceAdded(const QDBusObjectPath &o) {
    QDBusMessage call = QDBusMessage::createMethodCall("org.freedesktop.UDisks", o.path(), "org.freedesktop.DBus.Properties", "GetAll");

    QList<QVariant> args;
    args.append("org.freedesktop.UDisks.Device");
    call.setArguments(args);

    QDBusPendingReply<QVariantMap> reply = QDBusConnection::systemBus().asyncCall(call);
    reply.waitForFinished();

    QVariantMap map = reply.value();
    // now do what you want with the map ;)
    // You will find all available information to the device attached
}

// a class wide pointer to the systembus
// initialized within the constructor of the class
// and deleted in the destructor
dbus = new QDBusInterface(
    "org.freedesktop.UDisks",
    "here comes the path from the QDBusObjectPath.path() object",
    "org.freedesktop.UDisks.Device",
    QDBusConnection::systemBus(),
    this
);

void DbusAction::mountFilesystem() {
    if(dbus->isValid()) {

        QList<QVariant> args;
        args << QVariant(QString()) << QVariant(QStringList());

        QDBusMessage msg = dbus->callWithArgumentList(QDBus::AutoDetect, "FilesystemMount", args);
        if(msg.type() == QDBusMessage::ReplyMessage) {
            QString path = msg.arguments().at(0).toString();
            if(!path.isEmpty()) {
                emit deviceMounted(path);
            } else {
                qDebug() << "sorry, but the path returned is empty";
            }
        } else {
            qDebug() << msg.errorMessage();
        }
    }
} 
```

我正在使用`Openbox`并在 x64-ArchLinux 上运行最新的`Udisk(2)`东西。也许有人也可以使用它。

# python - 如何使用 Py_AddPendingCall

> ID：12448737
> 
> 赞同：5
> 
> 时间：2012-09-16T16:44:39.610
> 
> 标签：python, c, python-3.x, python-c-api, cpython

我有一个嵌入式 Python 程序，它在 C 中的一个线程中运行。

当 Python 解释器切换线程上下文（将控制权交给另一个线程）时，我希望收到通知，以便我可以执行某些必要的操作。

看来这[`Py_AddPendingCall`](http://docs.python.org/c-api/init.html#asynchronous-notifications)正是我正在寻找的。但是，API 文档对此功能非常简短，我对应该如何`Py_AddPendingCall`使用感到困惑。通过阅读文档，我的理解是：

*   工作线程调用`Py_AddPendingCall`并分配处理函数。
*   当 Python 解释器运行时，只要将控制权交给另一个线程，它就会调用处理函数
*   处理程序本身在*主*解释器线程中执行，并获得 GIL

我已经用谷歌搜索了显示如何使用的示例代码`Py_AddPendingCall`，但我找不到任何东西。我自己尝试使用它根本行不通。处理程序永远不会被调用。

我的工作线程代码：

```
#include <pthread.h>
#include <stdlib.h>
#include <stdio.h>

const char* PYTHON_CODE = 
"while True:\n"
"   for i in range(0,10): print(i)\n"
"\n";

int handler(void* arg)
{
    printf("Pending Call invoked!\n");
    abort();
}

void* worker_thread(void*)
{
    PyGILState_STATE state = PyGILState_Ensure();
    int res = Py_AddPendingCall(&func, nullptr);
    cout << "Result: " << res << endl;
    PyRun_SimpleString(CODE);
    PyGILState_Release(state);

    return 0;
}

int main()
{
    Py_Initialize();
    PyEval_InitThreads();
    PyEval_ReleaseLock();

    pthread_t threads[4];
    for (int i = 0; i < 4; ++i)
        pthread_create(&threads[i], 0, worker_thread, 0);

    for (int i = 0; i < 4; ++i) pthread_join(threads[i], 0);

    Py_Finalize();
} 
```

在此示例中，`worker_thread`在 C 中作为 pthread 工作线程调用。在这个测试中，我运行了 4 个工作线程，所以应该会发生一些上下文切换。这会无限循环，但永远不会调用挂起的调用处理程序。

那么，有人可以提供一个最小的工作示例来说明`Py_AddPendingCall`应该如何使用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T16:51:42.190

挂起的调用只在主线程上执行，主线程在执行 Python 代码时只能服务挂起的调用。因此，主线程必须运行解释器循环才能为任何挂起的调用提供服务。来自`Python/ceval.c`：

```
Py_MakePendingCalls(void)
{
    ...

    /* only service pending calls on main thread */
    if (main_thread && PyThread_get_thread_ident() != main_thread)
        return 0;

    ...
} 
```

在嵌入场景中，“主线程”是调用的线程`PyEval_InitThreads`（请注意，第一次从 Python 代码启动线程时也会自动调用它）。由于您的主线程位于 中`pthread_join`，因此它不执行 Python 代码，因此不调度挂起的调用。

还要注意，处理程序仅在控制权交给主线程时执行——如果控制权从一个工作人员转移到另一个工作人员，则处理程序不会运行。因此，`Py_MakePendingCalls`可能不是用于此任务的合适接口。

# playframework - 管理在 Play 框架中开发的多个应用程序

> ID：12448741
> 
> 赞同：3
> 
> 时间：2012-09-16T16:44:47.177
> 
> 标签：playframework

我们有各种使用 PHP 和 Java 开发的应用程序。我们正在使用 apache 和 tomcat。因此，当我们重新启动系统时，一旦 apache 启动，PHP 应用程序就会启动，而一旦 tomcat 启动，Java 应用程序就会启动。我不确定在 Play 框架中处理这个问题的最佳方法是什么（假设我们有 10 多个 Play 应用程序）。当然，单独启动每个应用程序并不是正确的解决方案。我们可以编写一些启动脚本，在重启后启动每个应用程序。但我很想知道使用 ROR 和 Django 等其他类似框架的开发人员如何处理这种情况。有什么工具可以做到这一点吗？任何可用于 Play 应用程序的工具？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T18:14:34.680

部署 WAR 包有一些缺点，我无法讨论性能，但正如您在[WAR 插件](https://github.com/dlecan/play2-war-plugin)的兼容性矩阵中看到的那样，仍然有一些不受支持的功能。所以 WAR 应该被认为是最后的选择（如果没有其他可用的）

目前我有相同的设置，通过 Apache + 独立播放应用程序工作的 PHP 站点。当然，所有这些都需要在默认 Web 端口 (80) 上的自定义域/子域上可用。

一般来说：我们在专用 IP 上部署应用程序，该 IP 在前端由`nginx`服务器控制，用于代理目的和负载平衡。多亏了这一点，我们甚至可以在服务器上的开发模式下启动应用程序，并且它将在其域中可用。当然，如果你没有额外的 IP，你也可以使用 Apache 作为代理，但据我所知`nginx`，或者`lighthttpd`只是更快地完成这项任务。

[您可以在设置前端服务器](http://www.playframework.org/documentation/2.0.3/HTTPServer)文档中找到更多详细信息。

现在，使用一些简单的 bash 脚本和 git 钩子，您可以在远程机器上准备和部署您的应用程序，而无需重新发送整个包（对于小型应用程序，其大小约为 50mb）。就像 Heroku 部署一样，您应该只将应用程序的代码推送到您的服务器，然后使用钩子和脚本应该准备`dist`包（[更多关于 dist](http://www.playframework.org/documentation/2.0.3/ProductionDist)）并在某个定义的端口上运行它，这将通过前面提到的代理可用。

当然，通过 Play 的控制台启动应用程序是在生产环境中不必要的内存浪费。

有关于如何在服务器启动时启动 Play 应用程序的示例，因此您可能会根据您的机器找到一些提示。

据我所知，这是目前最理想的情况

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T17:16:33.223

如果您在 Ubuntu 上托管，则最好为每个应用程序插入一个 init 脚本（[这是一个不错的开始](https://gist.github.com/1240920)），这样他们就可以启动机器。

或者[https://github.com/dlecan/play2-war-plugin](https://github.com/dlecan/play2-war-plugin)看起来它可以让您将 Play 2 应用程序发送到您可以在 Tomcat 中部署的 WAR 文件：未计划在 Play 2 系列中对 WAR 部署的核心支持显示到 2.1，所以你可能无法让它工作。Play 1 原生支持它：去吧

```
play war myapp -o myapp.war 
```

# java - 在 Geany 中导入外部 jar

> ID：12448752
> 
> 赞同：2
> 
> 时间：2012-09-16T16:46:31.230
> 
> 标签：java, jsoup

我在导入 jar 文件并在[Geany IDE](http://www.geany.org/)中运行时遇到问题。这就是我所做的：我已经下载[了 Jsoup](http://jsoup.org)。提取它并将 org 文件放在我的项目目录中。然后将其导入到我的源代码中：

```
 import org.jsoup.*;// why this does not import all
/*
instead I need to import everything manually
import org.jsoup.Jsoup;
import org.jsoup.helper.Validate;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;
*/

        public class Crawler {

            public static void main (String args[]) {
                String html = "<html><head><title>First parse</title></head>"
          + "<body><p>Parsed HTML into a doc.</p></body></html>";
                Document doc = Jsoup.parse(html);
            }
        } 
```

当我尝试在 Geany 中编译它时，它给了我错误：

```
Crawler.java:7: cannot find symbol
symbol  : class Document
symbol  : class Document
symbol  : class Document 
```

我做错了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-16T17:00:45.027

下载`jar`文件并将其`external jar`放在某个`\lib`目录中并将其添加到项目的类路径中。作为一个好的做法，而不是通配符导入`org.jsoup.*`使用`org.jsoup.Document`

# android - 在Android中的fingertouch上绘制editview / textview

> ID：12448759
> 
> 赞同：0
> 
> 时间：2012-09-16T16:47:39.980
> 
> 标签：android

我是 Android 的新手，在我的应用程序中，我需要在手指触摸时绘制 textview/editview，用户可以在其中输入。我搜索了很多，但没有发现任何相关内容。

我找到了绘制编辑视图/文本的链接，但不是在手指触摸上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:02:00.167

您可以通过在视图上注册触摸事件来完成此操作。当触摸事件触发时，您可以根据触摸事件坐标创建一个 EditText/TextView。

```
class YourMainClass extends Activity{

  public void onCreate(Bundle bundle)
  {
     //Do your normal UI initialization here
     your_layout.setOnTouchListener(new TouchListener()); //where your_layout is the layout/view of your Activity that should register the touch events.
  }

  class TouchListener implements OnTouchListener
  {
     @Override
     public boolean onTouch(View v, MotionEvent event) {
         if(event.getAction() == MotionEvent.ACTION_UP) {
           RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,RelativeLayout.LayoutParams.WRAP_CONTENT); //See note below
           params.leftMargin = (int)event.getX() - v.getLeft();
           params.topMargin = (int)event.getY() - v.getTop();
           EditText edit = new EditText(this);
           edit.setLayoutParams(params);
           your_layout.addView(edit);
           return true;
         }
     }
  }
} 
```

注意：确保将 LayoutParams 类型更改为您使用的布局类型（例如：LinearLayout.LayoutParams，如果您使用 LinearLayout 来放置 EditText）。

`v.getLeft()`此外，如果您使用填充，实际 EditText 的坐标可能会关闭（因为使用and时填充区域仍被计为视图`v.getTop()`，但在将 EditText 添加到布局时不计为视图）。

# binding - 列表框中标签出价的参数异常

> ID：12448761
> 
> 赞同：1
> 
> 时间：2012-09-16T16:47:53.170
> 
> 标签：binding, combobox, listbox, label, argumentexception

我有以下问题。我创建了一个对话框，您应该在其中将条目添加到`ListBox`. 每个都`ListBoxItem`包含一个`TextBox`产品名称和产品价格（这些是产品类的属性）。每个`ListBoxItem`人还`ComboBox`可以选择产品的单位（例如公斤、升或件）。我希望 的`SelectedItem`绑定`ComboBox`到`Content`与`Label`价格相邻的 ，`TextBox`以便`Label`读取“€/SelectedItem”（例如“€/kg”）。但是当我运行以下代码时，我得到一个`ArgumentException`. 希望有人能帮助我。

```
<ListBox Name="lbProducts" SelectionMode="Single">
    <ListBox.ItemTemplate>
        <DataTemplate>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="75" />
                <ColumnDefinition Width="50" />
                <ColumnDefinition Width="75" />
                <ColumnDefinition Width="50" />
            </Grid.ColumnDefinitions>
            <TextBox Name="tbDProductName" Grid.Row="0" Grid.ColumnSpan="4" Text="{Binding Name}" FontSize="16" AcceptsReturn="False" AcceptsTab="False" Background="White" BorderBrush="Black" />
            <TextBox Name="tbDPrice" Grid.Row="1" Grid.Column="0"  Text="{Binding Price}" FontSize="16" AcceptsReturn="False" AcceptsTab="False" FontWeight="Bold" />
            <Label Name="lbDPriceSign" Content="{Binding ElementName=cbDAmount, Path=SelectedItem}"  FontSize="16" Grid.Row="1" Grid.Column="1"/>
            <ComboBox Name="cbDAmount" FontSize="16" Grid.Row="1" Grid.Column="3">
                <ComboBoxItem Content="kg" IsSelected="True"/>
                <ComboBoxItem Content="l"/>
                <ComboBoxItem Content="Stk"/>
            </ComboBox>
            <TextBox Name="tbDAmount" Grid.Row="1" Grid.Column="2" Text="{Binding Amount}" FontSize="16" AcceptsReturn="False" AcceptsTab="False" FontWeight="Bold" />
            </Grid>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

# xmpp - 从源代码安装plone插件，完整新手的说明？

> ID：12448768
> 
> 赞同：1
> 
> 时间：2012-09-16T16:48:31.323
> 
> 标签：xmpp, plone, zope, add-on

谁能解释如何在克隆安装中安装下面的模块？我试了2小时无济于事。

[https://github.com/collective/collective.xmpp.chat](https://github.com/collective/collective.xmpp.chat)

说明对于新手来说太模糊了。我已经在这个 repo 中设置了文档似乎不完整，我完全不知道如何继续。任何 plone、zope 和/或 python 大师都可以分享一些关于这一点的信息吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T19:05:00.187

安装附加组件的一般说明位于：[https](https://plone.org/documentation/kb/installing-add-ons-quick-how-to) ://plone.org/documentation/kb/installing-add-ons-quick-how-to 。要从源代码安装，最简单的方法是使用“mr.developer”，该文件位于：[http](http://pypi.python.org/pypi/mr.developer) ://pypi.python.org/pypi/mr.developer 。

正如您将通过阅读第二个文档了解到的那样，您首先需要将 mr.developer 添加到您的构建中：

```
[buildout]
extensions = mr.developer
auto-checkout = name.of.your.product 
```

然后在 [来源] 部分，你告诉先生。开发人员从哪里检查您的产品。

```
[sources]
name.of.your.proudct = git git://github.com/url/of/name.of.your.product.git 
```

最后，在构建的 [eggs] 部分，您告诉 plone 实际安装产品。

```
[eggs]
name.of.your.product 
```

# visual-studio-2012 - 如何在 Blend 5 中创建运动路径？

> ID：12448770
> 
> 赞同：1
> 
> 时间：2012-09-16T16:48:42.683
> 
> 标签：visual-studio-2012, blend-2012

如何在 Blend 5 Visual Studio 2012 中创建运动路径

没有像 Blend 4 中那样转换为运动路径 ![在此处输入图像描述](../Images/269384f88851fc7700523a5f169d09ab.png)？

# database - 如何访问 opensearchserver 中的原始数据？

> ID：12448771
> 
> 赞同：0
> 
> 时间：2012-09-16T16:48:56.127
> 
> 标签：database, search-engine

我搜索了文档，但找不到存储所有数据的位置。我想访问所有抓取的数据以进行自己的处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T17:30:01.073

在文件[StartStopListener 中](http://sourceforge.net/p/opensearchserve/code/1805/tree/trunk/src/java/com/jaeksoft/searchlib/web/StartStopListener.java)，它设置索引目录：查找环境值**OPENSEARCHSERVER_DATA**、**OPENSEARCHSERVER_MULTIDATA**或**OPENSHIFT_DATA_DIR**的值。

现在，您是否能够轻松/正确地解析文件是另一个争论：我从未尝试过手动直接打开搜索服务器的索引，而且我不知道索引格式是否有据可查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T18:17:52.467

默认不存储爬取的数据。仅存储提取的文本。可以存储爬取的数据，流程如下：

1.  创建一个新字段：将“stored”参数设置为yes 或compressed。
2.  转到架构/解析器列表
3.  编辑 HTML 解析器
4.  在“字段映射”选项卡中，将解析器字段“htmlSource”链接到新字段。

重新启动索引过程。现在，所有爬取的数据都将复制到该字段。不要忘记将其添加为查询中的返回字段。

# ruby-on-rails - link_to 与 has_and_belongs_to_many 关联

> ID：12448773
> 
> 赞同：1
> 
> 时间：2012-09-16T16:49:26.430
> 
> 标签：ruby-on-rails, link-to

我有一个问题中的标签列表..现在我想给每个标签一个链接，每个标签中都有相应的问题标签：

```
<%= link_to question.tags.map { |t| t.name  }.join("  "), @tag %> </td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T16:58:11.497

试试这个代码

```
<% question.tags.each do |t| %>
  <%= link_to(t.name, t) + " " %>
<% end %> 
```

# php - 使用 highchart 从 ms sql 显示图表

> ID：12448774
> 
> 赞同：0
> 
> 时间：2012-09-16T16:49:27.017
> 
> 标签：php, highcharts

我正在尝试显示来自 MSSQL 的数据。[我在http://www.blueflame-software.com/blog/using-highcharts-with-php-and-mysql](http://www.blueflame-software.com/blog/using-highcharts-with-php-and-mysql)看到了一个例子。Y Axis 的值已经很好了，但是 X 轴不能显示在我的图表上，所以图表的值只有在 0 Xaxis，

### 数据.php

```
mssql_select_db("CU-CAB01", $con);

$result = mssql_query("select count(nba) sumnba, datein from tbl_anggota where tgl_masuk > '2012-06-01'group by tgl_masuk");

while($row = mssql_fetch_array($result)) {
  echo $row['tgl_masuk'] . "\t" . $row['jumlah']. "\n"; 
```

### 索引.php

```
<script type="text/javascript" src="js/jquery-1.7.1.min.js" ></script>
<script type="text/javascript" src="js/highcharts.js" ></script>
<script type="text/javascript" src="js/themes/dark-blue.js"></script>

<script type="text/javascript">
    var chart;
            $(document).ready(function() {
                var options = {
                    chart: {
                        renderTo: 'container',
                        defaultSeriesType: 'line',
                        marginRight: 130,
                        marginBottom: 25
                    },
                    title: {
                        text: 'Hourly Visits',
                        x: -20 //center
                    },
                    subtitle: {
                        text: '',
                        x: -20
                    },
                    xAxis: {
                    type: 'datetime',
                        tickInterval: 10000 * 1000, // one hour
                        tickWidth: 0,
                        gridLineWidth: 1,
                        labels: {
                            align: 'center',
                            x: -3,
                            y: 20,
                            formatter: function() {
                                return Highcharts.dateFormat('%e', this.value);
                            }
                        }
                    },
                    yAxis: {
                    tickInterval: 2,
                        title: {
                            text: 'Anggota'
                        },
                        plotLines: [{
                            value: 0,
                            width: 1,
                            color: '#808080'
                        }]
                    },
                    tooltip: {
                        formatter: function() {
                                return Highcharts.dateFormat('%l%p', this.x-(1000*3600)) +'-'+ Highcharts.dateFormat('%l%p', this.x) +': <b>'+ this.y + '</b>';
                        }
                    },
                    legend: {
                        layout: 'vertical',
                        align: 'right',
                        verticalAlign: 'top',
                        x: -10,
                        y: 100,
                        borderWidth: 0
                    },
                    series: [{
                        name: 'Count'
                    }]
                }

                jQuery.get('data.php', null, function(tsv) {
                    var lines = [];
                    traffic = [];
                    try {
                        // split the data return into lines and parse them
                        tsv = tsv.split(/\n/g);
                        jQuery.each(tsv, function(i, line) {
                            line = line.split(/\t/);
                            date = Date.parse(line[0] +' UTC');
                            traffic.push([
                                date,
                                parseInt(line[1].replace(',', ''),10)
                            ]);
                        });
                    } catch (e) {  }
                    options.series[0].data = traffic;
                    chart = new Highcharts.Chart(options);
                });
            });
</script> 
```

和我在 tbl_anggota 查询结果中的数据是这样的

```
sumnba  datein
1       2012-07-03 00:00:00.000
4       2012-07-04 00:00:00.000
5       2012-07-05 00:00:00.000
5       2012-07-06 00:00:00.000
2       2012-07-16 00:00:00.000
5       2012-07-17 00:00:00.000
1       2012-07-18 00:00:00.000
2       2012-07-19 00:00:00.000 
```

我认为我在 datein 字段上使用 jquery 解析数据时犯了错误，所以我的 Xaxis 仅在空值中..

有人可以让我的图表显示 Xaxis 值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:36:00.563

如果您输出查询如上所示，则您的 X 和 Y 在解析中颠倒了。日期字段在计数字段之后：

```
 // split the data return into lines and parse them
   tsv = tsv.split(/\n/g);
   jQuery.each(tsv, function(i, line) {
       line = line.split(/\t/);
        date = Date.parse(line[1] +' UTC'); //your datin is after the '\t'
        traffic.push([
            date,
            parseInt(line[0].replace(',', ''),10) //your count is before the '\t'
        ]);
    }); 
```

请修复空的 catch 块。忽略代码关键部分中的错误绝不是一个好主意。

# facebook - FQL - 在流中搜索评论数组

> ID：12448776
> 
> 赞同：0
> 
> 时间：2012-09-16T16:49:33.310
> 
> 标签：facebook, facebook-graph-api, facebook-fql

当我从流表中提取搜索结果时，返回的组件之一是一组注释。我想知道是否有任何基于评论数组中评论文本的搜索方式？

这是我的查询。它以目前的形式运行良好：

```
    选择 post_id、属性、消息、描述、comments.comment_list.text、喜欢、
     地点、固定链接、message_tags、message、description_tags、类型
    FROM stream WHERE filter_key in
    (SELECT filter_key FROM stream_filter WHERE uid=me())
    和
    (
    (strpos(lower(message), '大学橄榄球') >= 0) 或
    (strpos(lower(description), '大学橄榄球') >= 0) 或
    (strpos(lower(attribution), '大学橄榄球') >= 0)
    )
    按 created_time 顺序排序

```

返回的行之一的**comments.comment_list.text**结果如下所示：

```
    “注释”： {
            “评论列表”：[
             {
                “文本”：“我喜欢大学橄榄球”
             },
             {
                "text": "阿拉巴马州和路易斯安那州立大学统治大学橄榄球"
             }
             ]
    }

```

我的问题是：我有什么方法可以像上面搜索**message**、**description**和**attribution**一样在**comments.comment_list.text**中搜索？当我尝试添加以下内容时：

 ******```
    (strpos(lower(comments.comment_list.text), '大学橄榄球') >= 0)

```

我得到了一个空数据集（有趣的是，我没有得到任何错误，只是空结果）。我明白为什么，因为我需要以某种方式遍历评论数组，然后检索他们的文本并对评论的文本进行比较。我想在 Facebook 端使用 FQL 执行此操作，并希望避免检索所有结果然后在我端迭代它们。关于我如何能够做到这一点的任何想法或建议？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:53:52.510

表中的`comments`字段`stream`仅检索评论的子集。我认为限制是 5。那，通过 FQL 返回的数组进行搜索似乎应该很容易。它不是。

最好的办法是将其转换为多查询。对于您的结果，您只想查看`#combined`数据。

```
{'all_posts':
   'SELECT post_id FROM stream WHERE filter_key in 
    (SELECT filter_key FROM stream_filter WHERE uid=me())',
 'commented':
    'SELECT post_id FROM comment WHERE post_id IN (SELECT post_id FROM #all_posts)
      AND (strpos(lower(text), 'college football') >= 0',
 'combined':
    'SELECT post_id, attribution, message, description, comments.comment_list.text, likes,
      place, permalink, message_tags, message,  description_tags, type
      FROM stream WHERE post_id IN (SELECT post_id FROM #all_posts) AND 
       (
        (strpos(lower(message), 'college football') >= 0) OR 
        (strpos(lower(description), 'college football') >= 0) OR 
        (strpos(lower(attribution), 'college football') >= 0)
       )
     OR post_id IN (SELECT post_id FROM #commented)
    order by created_time desc'
} 
```******

# css - 如何在 wordpress 中更改值 stylesheet_url？

> ID：12448779
> 
> 赞同：1
> 
> 时间：2012-09-16T16:49:56.570
> 
> 标签：css, wordpress, url, stylesheet

我正在尝试修改 wordpress 中的主题，而我偶然发现的一件事是该主题包含样式表文件的方式。

```
<link rel="stylesheet" type="text/css" media="all" href="<?php bloginfo( 'stylesheet_url' ); ?>" /> 
```

我发现 stylesheet_url 指的是根文件夹中名为 style.css 的文件。如何更改 stylesheet_url 的值，以便加载我在 css/ 目录中的样式表文件而不是默认的？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-16T19:05:17.517

你可以像这样放置新的css文件路径：

```
<link rel="stylesheet" type="text/css" media="all" href="<?php bloginfo('template_directory'); ?>/css/newstyle.css" /> 
```

如果不需要，您可以删除默认的 css 路径。希望这可以帮助你。祝一切顺利 ;）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T16:54:19.527

在函数`blog_info()`中。

这是[执行此操作的链接](http://codex.wordpress.org/Function_Reference/bloginfo)，还请检查[此链接](http://codex.wordpress.org/Function_Reference/get_bloginfo)和[此](http://codex.wordpress.org/Function_Reference/get_stylesheet_uri)。

您还可以在此处查看示例：[Wordpress bloginfo('stylesheet_url') saved 的值在哪里](https://stackoverflow.com/questions/7190623/where-is-the-value-for-wordpress-bloginfostylesheet-url-saved)。

# android - SherlockListFrgament 与 CommonsWare Loaderex，无法更新数据

> ID：12448780
> 
> 赞同：0
> 
> 时间：2012-09-16T16:50:16.477
> 
> 标签：android, sqlite, actionbarsherlock, android-cursorloader, commonsware-cwac

```
public class NewFriendsListFragment extends SherlockListFragment implements 
 LoaderManager.LoaderCallbacks<Cursor> {

int monthchange, daychange;

Dialog dialog;

int pos;

CheckedTextView ctv_name;

private SimpleCursorAdapter mAdapter=null;

private SQLiteCursorLoader loader=null;

String mCurFilter;

private static Handler responseHandler;

boolean loaded=false;

@Override 
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    //some more stuff...

    setHasOptionsMenu(true);

    mAdapter = new FriendListSCA(getSherlockActivity().getApplicationContext(), 
            R.layout.friend_item, null,null, null, null, null, NAME),
            new String[]{NAME,MONTH,UID}, new int[]{R.id.name,R.id.info,R.id.profile_pic});
    setListAdapter(mAdapter);

    setListShown(false);

    registerForContextMenu(getListView());

    getLoaderManager().initLoader(0, null, this);

    responseHandler = new Handler() 
    {                               
      //handler code
    };     
}

public Loader<Cursor> onCreateLoader(int loaderId, Bundle args) {
    //loader code
    return(loader);
  }

  public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
          mAdapter.changeCursor(cursor);

          // Showin List
          if (isResumed()) {
              setListShown(true);
          } else {
              setListShownNoAnimation(true);
          }
  }

  public void onLoaderReset(Loader<Cursor> loader) {
    mAdapter.changeCursor(null);
  }

@Override
public boolean onContextItemSelected(android.view.MenuItem item) {
    AdapterContextMenuInfo info;
    try {
        info = (AdapterView.AdapterContextMenuInfo) item.getMenuInfo();
    } catch (ClassCastException e) {
        return false;
    }
    pos=info.position;

    switch (item.getItemId()) {

    case R.id.edit_item:

            show_dialog();

        return true;
    }
    return(super.onOptionsItemSelected(item));

}

@Override 
public void onListItemClick(ListView l, View v, final int position, long id) {      

            Log.e("onListItemClick","Inside onListItemClick");  
            ContentValues cv= new ContentValues();
//MORE CODE

            loader.update(TABLE_NAME_INCLUDE, cv, _ID+" = ?", new String[]{Integer.toString(position)});                

}

private class FriendListSCA extends SimpleCursorAdapter
{

public FriendListSCA(Context context, int layout, Cursor c,
        String[] from, int[] to) {
    super(context, layout, c, from, to,0); 
    setViewBinder(new FriendsListDataViewBinder()); 
}

}

public class FriendsListDataViewBinder implements SimpleCursorAdapter.ViewBinder 
{ 
//_ID + "," + UID+","+NAME+","+MONTH+","+DAY+","+WISH
@Override 
public boolean setViewValue(View view, Cursor c, int columnIndex) 
{ 

    switch (view.getId())
    {
    case R.id.name:
        CheckedTextView ctv= (CheckedTextView)view;
        ctv.setText(c.getString(2));
        if(c.getInt(5)==0 || c.getInt(4)==-1)
        {
            ctv.setPaintFlags(ctv.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG);
            ctv.setChecked(false);
        }
        else
        {
            ctv.setPaintFlags(ctv.getPaintFlags() & (~ Paint.STRIKE_THRU_TEXT_FLAG));
            ctv.setChecked(true);
        }

        return true; 

    case R.id.info:

        if(c.getInt(4)!=-1)
        {
            ((TextView)view).setText(Utility.MONTH_NAME[c.getInt(3)-1] + " " + Integer.toString(c.getInt(4)));
        }
        else
        {
            ((TextView)view).setText("Tap and hold to manually enter");
        }
        return true;
    case R.id.profile_pic:

        if(!loaded)
            return true;

        ((ImageView)view).setImageBitmap(Utility.model.getImage(
                Long.toString( c.getLong(1) ), getURL(c.getLong(1)) ));

        return true;
    }

  return false; 
}
}

private void show_dialog()
{
//DATE PICKER CODE

 okay.setOnClickListener(new Button.OnClickListener() {  
     @Override
     public void onClick(View v)
         {
            ContentValues cv=new ContentValues();
            cv.put(MONTH, monthchange);
            cv.put(DAY, daychange);
            loader.update(TABLE_NAME_INCLUDE, cv, _ID+" = ?" , new String[]{Integer.toString(pos)});
            //getLoaderManager().restartLoader(0, null, NewFriendsListFragment.this);
//I tried calling restart loader, but nothing, when I checked
//it turned out the sqlite database wasn't being updated

            responseHandler.sendEmptyMessage(1); //just dismisses dialog
         }
      });     
 dialog.show();
}

@Override 
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    // Place an action bar item for searching.
    MenuItem item = menu.add("Search");
    item.setIcon(android.R.drawable.ic_menu_search);
    item.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
    View searchView = SearchViewCompat.newSearchView(getActivity());
    if (searchView != null) {
        SearchViewCompat.setOnQueryTextListener(searchView,
                new OnQueryTextListenerCompat() {
            @Override
            public boolean onQueryTextChange(String filtext) {
                mCurFilter = !TextUtils.isEmpty(filtext) ? filtext : null;
                getLoaderManager().restartLoader(0, null, NewFriendsListFragment.this);
                return true;
            }
        });
        item.setActionView(searchView);
    }
}

@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    // TODO Auto-generated method stub
}

} 
```

我正在使用 ActionBarSherlock 库中的 SherlockListFragment 来显示使用 CommonsWare Loaderex sqlite 光标加载程序的列表，并且一切似乎工作正常，姓名、生日和个人资料图片都显示得很好，但我似乎无法使用 loader.update(...) 更新表中的任何数据，当我调用它时没有任何反应。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T17:10:47.743

你有：

```
loader.update(TABLE_NAME_INCLUDE, cv, _ID+" = ?", new String[]{Integer.toString(position)}); 
```

很可能，这应该是：

```
loader.update(TABLE_NAME_INCLUDE, cv, _ID+" = ?", new String[]{Integer.toString(id)}); 
```

（替换`position`为`id`）

# ios - IOS stringByReplacingOccurrencesOfString 返回 null

> ID：12448785
> 
> 赞同：0
> 
> 时间：2012-09-16T16:50:54.713
> 
> 标签：ios, string, exception

我一直在用头撞墙，我一定错过了什么。在我对一些加密文本进行 base64 编码之后，就会调用此代码。在我调用 NSLog 签名的地方总是有效的。然而，有时其余的效果很好，而其他时候 removePlus 或 finalSig 则返回 null。此外，我使用的是 Xcode 4.5、ios6，并且我为该项目启用了 ARC。我觉得可能有些东西在我想要之前就自动发布了，或者类似的东西。如果有人有任何想法，我们将不胜感激。

```
// Get the data out of the context
char *outputBuffer;
long outputLength = BIO_get_mem_data(context, &outputBuffer);

NSMutableString *signature = [[NSMutableString alloc] init];
[signature appendString:[NSMutableString stringWithCString:outputBuffer encoding:NSASCIIStringEncoding]];

NSLog(@"Base64 Pre Encoded: %@", signature);

signature = [[signature stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding] mutableCopy];
NSMutableString *removePlus = [[signature stringByReplacingOccurrencesOfString:@"+" withString:@"%2B"] mutableCopy];
NSString *finalSig = [removePlus stringByReplacingOccurrencesOfString:@"=" withString:@"%3D"];

//now we create the url request portion
NSMutableString *variables = [[NSMutableString alloc] init];

//set the variables we're going
[variables appendString:finalSig]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T18:06:50.360

尝试将您的代码换成以下代码，因为我想它会准确地告诉您问题出在哪里：

```
// Get the data out of the context
char *outputBuffer;
long outputLength = BIO_get_mem_data(context, &outputBuffer);

outputBuffer[outputLength] = '\0';
if(outputLength != strlen(outputBuffer)) NSLog(@"SOMETHING VERY WRONG");

NSString * signature = [NSString stringWithCString:outputBuffer encoding:NSASCIIStringEncoding]];
NSLog(@"Base64 Pre Encoded: %@", signature);

signature = [[signature stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding];
NSLog(@"Base64 Post Encoded: %@", signature);

signature = [signature stringByReplacingOccurrencesOfString:@"+" withString:@"%2B"];
NSLog(@"Base64 Remove '+': %@", signature);

signature = [removePlus stringByReplacingOccurrencesOfString:@"=" withString:@"%3D"];
NSLog(@"Base64 Remove '=': %@", signature);

//now we create the url request portion
NSMutableString *variables = [NSMutableString alloc] initWithString:signature];

…

//set the variables we're going
[variables appendString:finalSig]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T02:57:40.227

原来 NSString * signature = [NSString stringWithCString:outputBuffer encoding:NSASCIIStringEncoding]]; 需要一个以空字符结尾的字符串，而我的字符串不是。无论如何，这是创建字符串的更有效方法：

```
NSData *myRequestData = [ NSData dataWithBytes: [ variables UTF8String ] length: [ variables length ] ]; 
```

# python - QPainterPath - 移动/删除元素

> ID：12448788
> 
> 赞同：3
> 
> 时间：2012-09-16T16:51:23.550
> 
> 标签：python, qt, graphics, pyside

有没有办法编辑 QPainterPath 中单个“lineTo”元素的位置（或删除特定元素并用修改后的版本替换它们？）。我尝试使用 *.setElementPositionAt(i,x,y) 无济于事（路径未重绘）。

我基本上希望所有用户用鼠标动态编辑折线的顶点（通过 qpainterpath 和 lineTo 方法创建）。

显然，如果有更好的方法在 QGraphicscene 中创建折线，那么也欢迎一些建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T07:12:15.570

我不确定你是如何使用的，`setElementPositionAt`但它可以工作。诀窍`QGraphicsScene`是[`addPath`](http://doc.qt.nokia.com/4.7-snapshot/qgraphicsscene.html#addPath)返回 a `QGraphicsPathItem`，您需要`QPainterPath`使用其[`setPath`](http://doc.qt.nokia.com/4.7-snapshot/qgraphicspathitem.html#setPath)方法使用修改后的项目更新该项目。

一个简单的例子：

```
import sys
from PySide import QtGui

class Widget(QtGui.QWidget):
    def __init__(self, parent=None):
        super(Widget, self).__init__(parent)

        self.view = QtGui.QGraphicsView()
        self.scene = QtGui.QGraphicsScene()
        self.scene.setSceneRect(0,0,100,100)
        self.view.setScene(self.scene)

        self.button = QtGui.QPushButton('Move path')
        self.button.clicked.connect(self.movePath)

        layout = QtGui.QHBoxLayout()
        layout.addWidget(self.view)
        layout.addWidget(self.button)

        self.setLayout(layout)

        self.createPath()

    def createPath(self):
        path = QtGui.QPainterPath()

        path.moveTo(25, 25)
        path.lineTo(25, 75)
        path.lineTo(75, 75)
        path.lineTo(75, 25)
        path.lineTo(25, 25)

        self.pathItem = self.scene.addPath(path)

    def movePath(self):
        # get the path
        path = self.pathItem.path()

        # change some elements
        # element 0: moveTo(25, 25)
        # element 1: lineTo(25, 75)
        # element 2: lineTo(75, 75)
        # ...
        path.setElementPositionAt(2, 90, 85)
        path.setElementPositionAt(3, 90, 15)

        # set the new path
        self.pathItem.setPath(path)

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)

    main = Widget()
    main.show()

    sys.exit(app.exec_()) 
```

# zend-framework - 是否可以在 zend 框架的 if 条件块内声明表单对象？

> ID：12448793
> 
> 赞同：0
> 
> 时间：2012-09-16T16:52:11.063
> 
> 标签：zend-framework, zend-form

我对 zend 框架很陌生。我想在 if 条件中声明一个表单对象。但我不知道这是否可能？我写了下面的代码：

```
public function editAction()
    {
        $modelUsers = new Model_Users();
        $userId = $this->_getParam('userId');

        if ($userId) {

            $populateData = array();

            $user = $modelUsers->fetch($userId);
        //  print_r($user); exit();

                if ($user instanceof Model_User) {
                    $populateData = $user->toArray();
                                    $form = $this->_geteditForm($user->email);
                }

                $form->populate($populateData);
            }

            $request = $this->getRequest();

            if ($request->isPost()) { 
```

请让我知道我是否要去写路径。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:19:38.520

没关系，但是（假设它是某种杂物）如果 ID 丢失，最好重定向回列表或抛出异常。比你不需要关闭整个表格的条件。IE：

```
if (!$userId = $this->_getParam('userId')) {
    throw new Exception('Missing userId');
    //or
    $this->_helper->redirector('index');
} 
```

# objective-c - 使用 NSManagedObjectContextObjectsDidChangeNotification

> ID：12448800
> 
> 赞同：3
> 
> 时间：2012-09-16T16:53:16.457
> 
> 标签：objective-c, ios, cocoa-touch, nsmanagedobject, nsmanagedobjectcontext

在我的许多 中`UIViewControllers`，我会根据我的数据状态更新某些控件。例如，我可能有一个编辑按钮`UITableViewController`，只有在有一个或多个项目时才应该启用。或者也许我想限制可以添加的项目数量，否则禁用“添加”按钮。

每次我添加或删除一个项目（或采取任何其他可以添加/删除项目的操作）时，我都必须记住更新任何可能需要启用/禁用的控件。这在大多数情况下是微不足道的，但感觉不舒服 - 有很多重复，我必须记住在添加`updateControlEnabled`可能影响数据的新功能时添加调用（或其他）。

然后我注意到 NSManagedObjectContextObjectsDidChangeNotification。阅读文档，我似乎可以在托管对象上下文发生变化时收到通知。这似乎很理想，但我有几个问题：

1.  这是对 NSManagedObjectContextObjectsDidChangeNotification 的适当使用吗？

2.  如果控制器订阅这些并解析每一个以查看它是否需要更新 UI，我是否应该预期任何性能影响？我将检查 userInfo 的每一项更改，而不是只检查那些我知道我会关心的更改。

3.  我应该在哪里订阅通知？我`UIViewController`有一个对上下文的引用，这有帮助，但我不知道在哪里订阅（loadView？viewDidLoad？init？），这样视图控制器将始终只有一个订阅。
4.  视图控制器在屏幕外时将继续接收和处理通知 - 当数据模型受到其他地方的影响时启用和禁用控件。这个可以吗？

我想我主要是想知道是否还有其他人使用这种方法，如果是，他们的经验是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T17:36:59.763

问）这是对 NSManagedObjectContextObjectsDidChangeNotification 的适当使用吗？

A) 是的 - 我在 OSX 上使用它用于类似的目的。

问）如果控制器订阅这些并解析每一个以查看是否需要更新 UI，我是否应该预期任何性能影响？我将检查 userInfo 的每一项更改，而不是只检查那些我知道我会关心的更改。

A) 否 - 它通常是一组非常小的对象 - 直接更改的对象。

Q) 我应该在哪里订阅通知？我的 UIViewController 有对上下文的引用，这有帮助，但我不知道在哪里订阅（loadView？viewDidLoad？init？），这样视图控制器将始终只有一个订阅。

A) 好吧，在视图显示之前你不能影响 UI - 所以可能是 viewDidLoad 或 viewWillAppear。后者的问题是您可能会根据推送/弹出次数获得几次，所以也许我会在 viewDidLoad 中进行。

Q) 视图控制器在屏幕外时将继续接收和处理通知 - 当数据模型受到其他地方的影响时，启用和禁用控件。这个可以吗？

A）当然 - 当视图重新出现时，所有元素都将正确设置。

您要做的是对该通知的经典用法。只需检查它所在的线程 - 如果它不是 mainThread，那么您想在发布到 mainThread 的块中进行所有更改。

# asp.net - ASP.NET 会员登录：登录后重定向用户

> ID：12448801
> 
> 赞同：2
> 
> 时间：2012-09-16T16:53:19.973
> 
> 标签：asp.net, asp.net-membership

我有一个使用会员资格和表单身份验证的网站：

ASP.NET 页面：

```
<asp:LoginView 
    ID="HeadLoginView" ...
    <AnonymousTemplate>
        <asp:Login ID="LoginUser" OnLoggedIn="LoginUser_LoggedIn" ... >
            <LayoutTemplate>
                <asp:Label ID="UserNameLabel" runat="server" AssociatedControlID="UserName">Username:</asp:Label>
                <asp:TextBox ID="UserName" runat="server" CssClass="textEntry"></asp:TextBox>
                <asp:Label ID="PasswordLabel" runat="server" AssociatedControlID="Password">Password:</asp:Label>
                <asp:TextBox ID="Password" runat="server" CssClass="passwordEntry" TextMode="Password"></asp:TextBox>
                <asp:CheckBox ID="RememberMe" runat="server"/>
                <asp:Label ID="RememberMeLabel" runat="server" AssociatedControlID="RememberMe" CssClass="inline">Remember me.</asp:Label>
                <asp:Button ID="LoginButton" runat="server" CommandName="Login" Text="Login" style="width:100%; height:35px"/>
            </LayoutTemplate>
        </asp:Login>            
    </AnonymousTemplate>
    ...
</asp:LoginView> 
```

后面的代码：

```
protected void LoginUser_LoggedIn(object sender, EventArgs e)
{
    MembershipUser user = Membership.GetUser();
    if (Roles.IsUserInRole(user.UserName, "User"))
    {
        // Do something and redirect to user page...
    }

    if (Roles.IsUserInRole(user.UserName, "Admin"))
    {
        // Do something and redirect to admin page...
    }
} 
```

问题是`Membership.GetUser()`总是返回null。我试图获取用户名，`Page.User.Identity.Name`但它始终是空字符串。有没有办法找到当前登录用户的用户名，甚至更好：定义`<asp:LoginView>`or的登录后行为`<asp:Login>`？

**编辑：**

MSDN：（`Login.LoggedIn Event Occurs when the user logs in to the Web site and has been authenticated.`链接[）](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.login.loggedin.aspx)所以问题是为什么在验证用户 Membership.GetUser() 后返回 null？

我的一位同事说，不要使用`Membership.GetUser()`use `Membership.GetUser(UserNameTextBox.Text)`，这没关系，因为用户已使用此用户名进行身份验证，但问题是我找不到获取方法`Username.Text`。我使用`findControl()`并得到错误。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T17:06:08.730

试试这个：

```
protected void LoginUser_LoggedIn(object sender, EventArgs e)
{
    string userName = (LoginUser.FindControl(“UserName”) as TextBox).Text;
    //// or use 
    ////  string userName = (e.Item.FindControl("UserName") as TextBox).Text;
    MembershipUser user = Membership.GetUser(userName);

    if (Roles.IsUserInRole(user.UserName, "User"))
    {
        // Do something and redirect to user page...
    }

    if (Roles.IsUserInRole(user.UserName, "Admin"))
    {
        // Do something and redirect to admin page...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T17:09:31.117

我一直使用表单身份验证来使用自己的身份验证。

我附上了我编写的处理用户登录系统的代码

```
 string role = system.CheckAdminLogin(txtUserName.Text, txtPassword.Text);
    if (role == Role.admin.ToString() || role == Role.manager.ToString())
    {
        Users _user = _users.GetUserByUserName(txtUserName.Text);
        if (_user.Mode)
        {
            FormsAuthentication.SetAuthCookie(role, false);
            Session.Add("UserName", txtUserName.Text);
            Session.Add("UserID", _user.ID);
            Response.Redirect("System/ShowActivities.aspx");
        }
        else
        {
            lblLoginFail.Text = "your account is not authorized!";
            lblLoginFail.Visible = true;
        }
    }
    else
    {
        if (txtPassword.Text != "" && txtUserName.Text != "")
        {
            lblLoginFail.Text = Application["Wrong_login_data"].ToString();
            lblLoginFail.Visible = true;
        }
    } 
```

正如您所看到的第一行，我从数据库中获取用户角色，如果用户不存在，则函数返回 null。

接下来，如果用户的帐户被授权，那么我正在使用 FormsAuthentication 类注册他，我正在传递用户的角色。

接下来我设置一个会话并将用户重定向到另一个页面。

我希望它有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T08:13:43.053

最后我根据@LolCoder的想法找到了解决方案：

```
protected void LoginUser_LoggedIn(object sender, EventArgs e)
{
    String username = (HeadLoginView.FindControl("LoginUser") as Login).UserName;

    if (Roles.IsUserInRole(username, "User"))
    {
        //...
    }
    // ...
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-31T00:25:07.650

我的回答有效！

```
protected void LoginUser_LoggedIn(object sender, EventArgs e)
{

      System.Web.UI.WebControls.Login controlLogin = (Login)sender;
      MembershipUser user = (MembershipUser)Membership.GetUser(controlLogin.UserName);
      ........
 } 
```

# epson - 使用 CUPS 和热敏打印机打印 postscript 文档

> ID：12448803
> 
> 赞同：3
> 
> 时间：2012-09-16T16:54:19.190
> 
> 标签：epson, thermal-printer, cups

我在 Ubuntu 12.04 中安装了一个 epson TM-T20，使用官方[驱动](https://download.epson-biz.com/modules/pos/index.php?page=prod&pcat=3&pid=37&scat=32)。这是一台热敏打印机，我使用的是 80 毫米纸。

我的问题：当我打印图像（使用附言文档）时，会浪费大量纸张，因为图像使用了大约 5 厘米，而打印机在图像发出 25 厘米的白纸之前。

我使用以下命令将文档发送到打印机：

```
lpr -P tm-t20 -o document.ps 
```

打印机打印图像（200x200 图像），但首先会发出大量未打印的纸张。

CUPS 无法识别打印机（使用 localhost:631 的 Web 界面）。然后我使用以下过程安装它：

```
sudo lpadmin -p tm-t20 -E -v serial:/dev/ttyUSB0 -P /usr/share/ppd/epson-tm-t20-rastertotmt.ppd 
```

然后打印机出现在 CUPS Web 界面中，我对其进行了配置（波特率、位奇偶校验等）。

当我发送一些文本时，打印机工作正常。

这是打印机 ppd 的一部分：

```
*DefaultPageRegion:RP80x297
*PageRegion RP80x297/Roll Paper 80 x 297 mm: "<</PageSize[204 841.8]/           ImagingBBox null>>setpagedevice"
*PageRegion RP58x297/Roll Paper 58 x 297 mm: "<</PageSize[141.7 841.8]/         ImagingBBox null>>setpagedevice"
*CloseUI: *PageRegion

*DefaultImageableArea: RP80x297
*ImageableArea RP80x297/Roll Paper 80 x 297 mm: "0 0 204 841.8"
*ImageableArea RP58x297/Roll Paper 58 x 297 mm: "0 0 141.7 841.8"

*DefaultPaperDimension: RP80x297
*PaperDimension RP80x297/Roll Paper 80 x 297 mm: "204 841.8"
*PaperDimension RP58x297/Roll Paper 58 x 297 mm: "141.7 841.8" 
```

我想这种浪费纸张是因为 ppd 文件中出现的 297mm 长。然后我尝试添加另一个100mm而不是297mm的配置，但问题仍然存在。

我也尝试将标签 %%DocumentMedia 添加到 ps 文件，但同样的问题：

```
%!PS-Adobe-3.0
%%Creator: GIMP PostScript file plugin V 1.17 by Peter Kirchgessner
%%Title: yay.ps
%%CreationDate: Thu Sep 13 13:44:26 2012
%%DocumentData: Clean7Bit
%%LanguageLevel: 2
%%Pages: 1
%%BoundingBox: 14 14 215 215
%%
%%EndComments
%%DocumentMedia: Plain 72 72 0 white Plain 
%%BeginProlog
% Use own dictionary to avoid conflicts
10 dict begin
%%EndProlog
%%Page: 1 1
% Translate for offset
14.173228346456694 14.173228346456694 translate
% Translate to begin of first scanline
0 199.99999999999997 translate
199.99999999999997 -199.99999999999997 scale
% Image geometry
200 200 8
% Transformation matrix
[ 200 0 0 200 0 0 ]
% Strings to hold RGB-samples per scanline
/rstr 200 string def
/gstr 200 string def
/bstr 200 string def
{currentfile /ASCII85Decode filter /RunLengthDecode filter rstr readstring pop}
{currentfile /ASCII85Decode filter /RunLengthDecode filter gstr readstring pop}
{currentfile /ASCII85Decode filter /RunLengthDecode filter bstr readstring pop}
true 3
%%BeginData:        14759 ASCII Bytes 
```

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T16:06:50.020

终于在痛苦万分之后。我发现问题出在串行 USB 电缆上（为了将串行打印机连接到 USB 端口）。我尝试使用两种不同的串行到 USB 电缆，但问题仍然存在，最后我得出结论，如果未连接到“真实”串行端口，打印机工作不正常。我在一台带串口的 PC 上在相同条件下测试了打印机，它运行良好，只需安装 epson 提供的驱动程序并将 chmod 777 设置为 /dev/ttyS0。在作业列表中，有时我会看到错误：“/usr/lib/cups/filter/pstopdf failed”。但是打印机打印正常，就像没有发生错误一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T21:47:40.817

我必须 chmod 777 /dev/ttyUSB0 才能使打印机正常工作（即使使用 sudo 运行命令）。

使用 media=B8 选项，我得到了可接受的结果（文本不在中心）

```
lp -d tm-t20 -o media=B8 document.ps 
```

我也试过

```
 lp -d tm-t20 -o media=Custom.80x90mm document.ps 
```

但打印机不打印，并且作业在 cups Web 界面上显示为已完成。

如果我尝试

```
lp -d tm-t20 -o media=Custom.200x190 document.ps 
```

打印机打印（未正确居中，我想我需要尝试使用不同的值，直到获得所需的结果）。点中的纸张尺寸在这个网站上：http: [//paulbourke.net/dataformats/postscript/](http://paulbourke.net/dataformats/postscript/)

打印机没有剪纸，我不知道如何提供该选项（打印和剪纸）。

打印机接受的选项有：

```
lpoptions -p tm-t20 -l

PageSize/Media Size: *RP80x297 RP58x297 Custom.WIDTHxHEIGHT
Resolution/Resolution: *203x203dpi
TmtSpeed/Printing Speed: *Auto 1 2 3 4
TmtPaperReduction/Paper Reduction: Off Top *Bottom Both
TmtPaperSource/Paper Source: *DocFeedCut DocFeedNoCut DocNoFeedCut DocNoFeedNoCut PageFeedCut PageFeedNoCut PageNoFeedCut
TmtBuzzerControl/Buzzer: *Off Before After
TmtSoundPattern/Sound Pattern: *A B C D E
TmtBuzzerRepeat/Buzzer Repeat: *1 2 3 5
TmtDrawer1/Cash Drawer #1: *Off Before After 
```

如何让打印机打印和裁切纸张？我需要从控制台执行此操作，才能从自定义 C++ 程序中使用它。如果您对 Linux 下的此类打印机有任何其他经验，请给我一些建议。我的目标是使用 C++ 程序中的打印机，我没有找到快速的方法（直接向打印机发送 ESC/POS 命令，在 Linux 下没有官方文档可以做到），所以我m 从控制台使用 CUPS。

剪纸解决：

```
lp -d tm-t20 -o media=Custom.200x258 -o source=DocFeedCut document.ps 
```

我不知道它为什么起作用，因为如选项中所示 DocFeedCut 是默认选项。

现在我将尝试将文本正确居中。

# windows-8 - 在 Windows 8 Metro 应用程序中免费拖放？

> ID：12448805
> 
> 赞同：2
> 
> 时间：2012-09-16T16:54:31.827
> 
> 标签：windows-8, microsoft-metro

我可以拖动一个项目（图像、矩形或其他形状......）并将其自由放置在屏幕上的某个位置吗？我知道有一种方法可以将项目从 GridView 拖放到另一个，但我想不受限制（并且没有 Directx）。而且我还发现只有拖放的快速指南，没有有用的示例，这就是我好奇的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:45:13.150

我有同样的问题。在尝试使用 Manipulation 等之后，我放弃了并实施了快速解决方法。

我刚刚将我的项目（在我的情况下为 Circle）放入 ListView 并允许拖动 ListViewItems。（CanDragItems）。我还删除了所有样式，因此它看起来不像 ListView。

这样我就可以拖动我的 ListViewItem（它只是一个圆圈）并将它放到某个地方。您不必将其放入另一个 ListView。

如果你把这些属性

> Drop="imgCart_Drop_1" AllowDrop="True"

例如，在图像上，您可以捕获放置事件。

我希望这有帮助

# symfony - 无法使用 symfony 2 运行控制器

> ID：12448806
> 
> 赞同：0
> 
> 时间：2012-09-16T16:55:00.110
> 
> 标签：symfony

我用 netbeans 生成了我的包，没有错误，然后转到我的 app 目录中的主配置文件并设置：

```
first_app:
resource: "@FirstAppBundle/Resources/config/routing.yml"
prefix:   / 
```

然后在我的 bundle routing.yml 文件中设置它：

```
first_app_homepage:
pattern:  /hello/{name}
defaults: { _controller: FirstAppBundle:Hello:index } 
```

我有这个控制器：

```
namespace DimaVendor\MytestsBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Response;

class HelloController extends Controller {

    public function indexAction($name) {
        return new Response('<html><body>' . $name . '</body></html>');
    }

} 
```

我去那里时得到404：

```
http://localhost/app.php/hello/Ryan 
```

为什么？

我还清理了缓存，没有发现错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T17:25:49.840

`app.php`和`app_dev.php`脚本是 Symfony 应用程序的入口点，它们位于`web/`项目的子文件夹中 - 在这种情况下，将您的浏览器指向：

`http://localhost/PhpProject1/web/app_dev.php/hello/Ryan`

`.htaccess`进入`web/`文件夹，并将任何请求重定向到：

```
http://localhost/PhpProject1/web/some/path 
```

至：

```
http://localhost/PhpProject1/web/app.php/some/path 
```

在你的情况下。看一看！

# facebook - 是否可以在 Google Plus 上开发应用程序？

> ID：12448807
> 
> 赞同：0
> 
> 时间：2012-09-16T16:56:00.547
> 
> 标签：facebook, api, google-plus, facebook-canvas

是否可以像 Facebook 一样在 Google Plus 上创建应用程序？

换句话说，“Facebook 上的应用程序是在 Facebook 上下文中加载的网络应用程序，我们称之为画布页面”。google plus 是否存在类似的 API？ [https://developers.facebook.com/docs/guides/canvas/](https://developers.facebook.com/docs/guides/canvas/)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T17:46:37.023

简短的回答：没有

稍微长一点的回答：有一些供应商可以访问游戏 API，它的工作方式似乎与 Facebook 的 API 非常相似，但这个 API 尚未公开，也没有明确的指示如何获得访问权限。还有 Google+ Hangout API，它是公开的，可让您编写在环聊中运行的应用程序。这与 Facebook 应用程序的工作方式类似，但仅限于在环聊中工作。

确定答案：[https](https://developers.google.com/+/) ://developers.google.com/+/包含对所有与 Google+ 一起使用的公共 API 的引用，包括环聊 API。

# javascript - html 重建/保存网页的用户状态

> ID：12448808
> 
> 赞同：0
> 
> 时间：2012-09-16T16:56:05.740
> 
> 标签：javascript, html

我正在建立一个网站，我想就我遇到的情况咨询你，

该网站有点“高级”，动态构建（python / javascipt / jQ），多种形式，其中一些我在客户端检查，一些我不能，所以只在服务器端，

问题是我想保存用户的一些状态，所以当从服务器返回响应时，例如在其中一个表单失败的情况下，填充的字段仍将被填充，或者滚动条（例如在一张大桌子内）将与用户放入的偏移量相同。

最好的方法是什么？当然，我不想在提交之前阅读所有这些内容并将它们放回返回页面

感谢杰克的帮助

# matlab - 在 MATLAB 中从（重复的）索引的两个向量创建矩阵

> ID：12448809
> 
> 赞同：1
> 
> 时间：2012-09-16T16:56:13.700
> 
> 标签：matlab, vector, matrix

假设现在我有两个相同长度的向量：

```
A = [1 2 2 1];
B = [2 1 2 2]; 
```

我想创建一个矩阵 C，其 dim=m*n，m=max(A)，n=max(B)。

```
C = zeros(m,n);
for i = 1:length(A)
   u = A(i);
   v = B(i);
   C(u,v)=C(u,v)+1;
end 
```

并得到

```
C =[0 2;
    1 1] 
```

更准确地说，我们将 A 和 B 中的相应索引视为 C 中的行和列，而 C(u,v) 是 {k | A(i)=u 和 B(i)=v, i = 1,2,...,length(A)}

有没有更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T18:08:59.600

是的。使用稀疏。它为您组装（即总结）重复行列对的矩阵值。您需要一个额外的向量，其中包含将组装到矩阵条目中的值。如果你使用ones(size(A))，你将得到你所需要的——重复行列对的计数

```
spA=sparse(A, B, ones(size(A)));
full(spA)

ans =

 0     2
 1     1 
```

同样可以通过简单地将标量 1 传递给稀疏函数而不是值向量来获得。

对于具有大量零条目的矩阵，使用稀疏存储绝对至关重要。您可以使用的另一个函数是 accumarray。它基本上可以做同样的事情，但也适用于密集矩阵结构：

```
AA=accumarray([A;B]', 1);

AA =

 0     2
 1     1 
```

如果要创建特定大小的矩阵，可以将 size 参数传递给 accumarray

```
AA=accumarray([A;B]', 1, [2 3]);
AA =

 0     2     0
 1     1     0 
```

请注意，您实际上也可以使其生成稀疏矩阵，并在汇编中使用不同的运算符（即，不一定是总和）

```
AA=accumarray([A;B]', 1, [2 3], @sum, 0, true) 
```

将生成一个稀疏矩阵（最后一个参数设置为 true），使用 sum 进行组装，并将 0 作为填充值，即在 A/B 中不存在给定行列对的情况下使用的值。

# scala - scala：在条件中指定不同替代方案的快捷方式（运算符 isOneOf）

> ID：12448811
> 
> 赞同：2
> 
> 时间：2012-09-16T16:56:25.163
> 
> 标签：scala, conditional-statements

我经常有如下代码

```
if (operator == Equal || operator == Missing || operator == Unknown) { 
```

为了使它不那么冗长并且更具可读性，有时我会发出：

if (List(Equal, Missing, Unknown).contains(operator)) {

我知道我也可以像这样发出模式匹配

```
operator match {
  case Equal | Missing | Unknown => { 
```

这带来了另一个层次的嵌套括号

我想知道是否有某种方法

```
if (operator.isOneOf(List(Equal, Missing, Unknown))) { 
```

--

编辑：

展示如何使用此处出现的不同选项：

**使用 Set 作为函数**

```
if (Set(1, 2, 3)(3)) {
  "Gotcha"
} else {
  "no luck..."
} 
```

**使用 PartialFunction.cond**

```
import PartialFunction.cond

if (cond(3) { case 1 | 2 | 3 => true }) {
  "Gotcha"
} else {
  "no luck..."
} 
```

**实现 isOneOf**

```
class ComparableWithIsOneOf[T](val value: T) {
  def isOneOf(values: T*): Boolean = {
    values.contains(value)
  }
}
object Comparison {
  object implicits {
    implicit def AnyToComparableWithIsOneOf[T](value: T): ComparableWithIsOneOf[T] = {
      return new ComparableWithIsOneOf(value)
    }
  }
}

import Comparison.implicits._

if (3.isOneOf(1, 2, 3)) {
  "Gotcha"
} else {
  "no luck..."
} 
```

最后我更喜欢 Set() 版本，但我认为最好是坚持模式匹配，更标准和惯用......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T17:01:11.680

你可以写

```
if (Set(Equal, Missing, Unknown)(operator)) { ... 
```

`Set`作为一个函数等...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T17:04:48.887

我们还可以使用 PartialFunction中定义的[cond 或 condOpt](https://stackoverflow.com/a/4442273/298389)[对](http://www.scala-lang.org/api/current/scala/PartialFunction$.html)您的模式匹配解决方案进行拉皮条：

```
condOpt(operator) { case Equal | Missing | Unknown =>  ... } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T17:08:42.147

自己写吧：

```
scala> implicit class IsOneOf[A](a: A) { def isOneOf(as: A*) = as contains a }
defined class IsOneOf

scala> trait Trait
defined trait Trait

scala> case object Equal extends Trait
defined module Equal

scala> case object Missing extends Trait
defined module Missing

scala> case object Unknown extends Trait
defined module Unknown

scala> case object Else extends Trait
defined module Else

scala> def test(t: Trait) = t.isOneOf(Equal, Missing, Unknown)
test: (t: Trait)Boolean

scala> test(Missing)
res25: Boolean = true

scala> test(Else)
res26: Boolean = false 
```

这也是类型安全的：

```
scala> 1.isOneOf("")
<console>:12: error: type mismatch;
 found   : String("")
 required: Int
              1.isOneOf("")
                        ^ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T17:28:49.140

我试图实现它，这就是我得到的

首先我用 isOneOf 方法定义一个泛型类，像这样

```
class ComparableWithIsOneOf[T](val value: T) {
  def isOneOf(values: T*): Boolean = {
    values.contains(value)
  }
} 
```

然后我定义了一个隐式转换器（双重嵌套比较.implicits 只是为了使导入更容易......）

```
object Comparison {
  object implicits {
    implicit def AnyToComparableWithIsOneOf[T](value: T): ComparableWithIsOneOf[T] = {
      return new ComparableWithIsOneOf(value)
    }
  }
} 
```

要使用它，我只需发出：

```
import Comparison.implicits._

if (3.isOneOf(1, 2, 3)) {
  "Gotcha"
} else {
  "no luck..."
} 
```

代码不多，结果是类型安全的

反正我觉得还是用模式匹配比较好，感觉比较地道……

# gradle - gradle 中的版本号

> ID：12448813
> 
> 赞同：0
> 
> 时间：2012-09-16T16:56:54.803
> 
> 标签：gradle

任何人都知道如何在 SUBPROJECT 的 gradle 中使用它，以便运行左手大小会导致右手存档名称......

```
gradle assemble -> databus-Developer-Build.zip
gradle -DmyVersion=1.0.2 assemble -> databus-1.0.2.zip
OR
gradle -PmyVersion=1.0.2 assemble -> databas-1.0.2.zip 
```

我已经尝试过使用变量 myVersion 但它总是说它不存在....在一半的情况下，它不应该存在，因为我没有提供它！！！！！！

如何让它在子项目中工作？

谢谢，院长

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T09:25:51.760

将以下代码段添加到`allprojects`root build.gradle 的配置部分：

```
allprojects {

   if (project.hasProperty('myVersion')) {
     project.version = project.myVersion
   } else {
     project.version = 'Developer-Build'
   }

} 
```

而不是在命令行中将您的版本作为`-PmyVersion=1.0.2`. 用相当老的 Gradle 1.0-milestone-3 测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T12:33:57.233

在较新版本中执行此操作的正确方法有效……（注意添加的内容）。

```
 if (project.hasProperty('myVersion')) {
     project.ext.xVersion = project.myVersion
   } else {
     project.ext.xVersion = 'Developer-Build'
   } 
```

有趣的是，这个不起作用，因为“版本”似乎是某种保留属性，并且在启动时设置为未指定......

```
 if (project.hasProperty('version')) {
     project.ext.xVersion = project.version
   } else {
     project.ext.xVersion = 'Developer-Build'
   } 
```

看到版本似乎是一个保留属性，它最有可能用于发布工件，所以最好的解决方案可能是以下

```
 if (project.hasProperty('myVersion')) {
     project.version = project.myVersion
   } else {
     project.version = 'Developer-Build'
   } 
```

并且 myVersion 中的自动构建传递和开发人员当然不会。

# jquery - 在 jquery ajax 中显示总计而不点击文本字段

> ID：12448818
> 
> 赞同：0
> 
> 时间：2012-09-16T16:57:44.810
> 
> 标签：jquery, jquery-calculation

我用这个来`calculate total`。这是总脚本

```
<!DOCTYPE HTML>
<html lang="en-IN">
<head>
  <meta charset="UTF-8">
  <title></title>
  <script type="text/javascript" src="js/jquery1.7.2.js"></script>
</head>
<body>
  <script type="text/javascript">
    jQuery(document).ready(function(){
      jQuery("#quantity, #unit_price, #tax").on('change',function(event){
        var subtotal = jQuery("#quantity").val() * jQuery("#unit_price").val();
        var total = subtotal + (subtotal  * jQuery("#tax").val() / 100);
        jQuery("#total").val(total);
      });
    });
  </script>
  <table>
    <tr>
      <td>
        <label for="unitcost">Unitcost</label>
        <input type="text" id="unit_price" />
      </td>
     </tr>
     <tr>
      <td>
        <label for="quantity">Quantity</label>
        <input type="text" id="quantity" />
      </td>
    </tr>
    <tr>
      <td>
        <label for="tax">Tax</label>
        <input type="text" id="tax" />
      </td>
    </tr>
    <tr>
      <td>
        <label for="total">Total</label>
        <input type="text" id="total" />
      </td>
    </tr>
  </table>
</body>
</html> 
```

但是有一个问题。`Every time`我必须`click the text field`得到`result`. 我希望当用户愿意时`enter the values in their fields it should show the total without click on input fields`。我认为`jquery ajax`会在这里工作，但不知道如何在此实现。任何帮助和建议都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:03:47.653

您可以尝试使用与单击不同的事件，例如 keyup

试试[这个小提琴](http://jsfiddle.net/Lma7F/)

所以而不是`jQuery("#quantity, #unit_price, #tax").on('click',function(event){`

利用`jQuery("#quantity, #unit_price, #tax").on('keyup',function(event){`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T16:59:57.560

使用 [`.keyup()`](http://api.jquery.com/keyup/) 它将显示总数而无需单击输入字段

```
jQuery("#quantity, #unit_price, #tax").keyup(function(event){ 
```

或者

```
jQuery("#quantity, #unit_price, #tax").on('keyup',function(event){ 
```

# java - req.getsession().getservletcontext() 和 getservletcontext() 之间的区别

> ID：12448826
> 
> 赞同：6
> 
> 时间：2012-09-16T16:58:40.340
> 
> 标签：java, servlets

我已经看到您也可以直接调用 getservletcontext() ，也可以像这样 req.getsession().getservletcontext() 。

两者有什么区别，我应该使用哪一个？有没有我应该使用一种而不是另一种的情况？

顺便说一句，我正在使用 web 模块 2.5

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-16T17:04:11.237

> 两者有什么区别

两者没有区别，它们是一回事。

`getServletContext()`只有当您的代码在扩展类中时，您才能直接调用的方法`HttpServlet`。那是因为`HttpServlet`基类定义了这个方法（实际上是在扩展的`GenericServlet`类中）。`HttpServlet`

此会话所属的`ServletContext`req.getSession().getServletContext() `is same as the one returned above.`HttpSession ServletContext`返回。`contains a reference to the`

> 我应该使用哪一个？有没有我应该使用一种而不是另一种的情况？

只要您的代码在 servlet 类中，您就可以使用任何东西，因为两者都可以调用。

假设（假设）您从 servlet 调用自定义类中的方法，并将会话对象传递给它以处理会话中的某些数据。这个自定义类不扩展 servlet。您需要`ServletContext`在这个自定义类中引用。由于您有对会话的引用，因此您可以使用方法访问 ServletContext `session.getServletContext()`。

希望这很清楚。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-13T00:16:37.137

**Session**变量只为一个浏览器保存，而Context**变量**可以在一个会话中被所有浏览器使用。

因此，如果用户只使用一种浏览器（在大多数情况下），它们之间没有区别，但如果您喜欢在一个会话中使用不同的浏览器，最好使用**Context**。

# javascript - jQuery 动态元素 - 如何删除元素并保存事件数据？

> ID：12448833
> 
> 赞同：1
> 
> 时间：2012-09-16T16:59:52.527
> 
> 标签：javascript, jquery

因为一段代码胜过千字

```
// this is our dynamic created element.,
var $test = $('<button>If you add this event is working, if you remove this, and add again, event is not working...</button>');

// this is our event
$test.click(function(){
    alert('Fooobar'); // fires only first time
});
// $test.on('click',function(){ <-- same behaviour

$('#add').click(function(){
    $('#container').append( $test );
});
$('#remove').click(function(){
    $('#container').html(''); // This is destroying all $test events!!!
}); 
```

如何删除元素，再次附加并保存事件？

**JS小提琴：**

*   [http://jsfiddle.net/gPWxd/4/](http://jsfiddle.net/gPWxd/4/)

我想删除元素而不破坏事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T17:11:59.213

我认为您正在寻找[jQuery 的分离方法](http://api.jquery.com/detach/)。

> .detach() 方法与 .remove() 方法相同，不同之处在于 .detach() 保留与已删除元素关联的所有 jQuery 数据。当移除的元素稍后要重新插入到 DOM 中时，此方法很有用。

您可以在代码`$test`之前分离，因此可以重新插入仍然附加的所有事件。`$('#container').html('');``$test`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T17:04:13.470

```
var $test = $('<button>If you add this event is working, if you remove this, and add again, event is not working...</button>');

// here you've to use delegate event
// using jQuery on() method

$('#container').on('click', $test, function(){
    alert('Fooobar');
});

$('#add').click(function(){
    $('#container').append( $test );
});
$('#remove').click(function(){
    $('#container').html('');
}); 
```

***[演示](http://jsfiddle.net/gPWxd/5/)***

对于委托事件*（又名实时事件）*处理，您需要使用`on()`如下：

```
$(Parent).on(eventName, target, handler); 
```

这`Parent`是一个静态元素，它是一个容器，`target`也是将要绑定`target`的元素。`event`

阅读更多关于 jQuery ***[on()](http://api.jquery.com/on)***方法的信息。

* * *

## 您还可以执行以下操作

```
var $test = $('<button>If you add this event is working, if you remove this, and add again, event is not working...</button>');

$('#add').click(function() {
    $('#container').append($test.on('click', function() {
        alert('Fooobar');
    }));
});
$('#remove').click(function() {
    $('#container').html('');
}); 
```

***[演示](http://jsfiddle.net/gPWxd/10/)***

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-16T17:02:12.227

将事件的函数绑定到父元素。

```
$('body').on('click', 'button', function(){
    alert('Delegated Click function');
}); 
```

替换`button`为您的选择器。

# windows-8 - “Windows.UI.Xaml.Data.INotifyPropertyChanged”因其保护级别而无法访问

> ID：12448835
> 
> 赞同：0
> 
> 时间：2012-09-16T16:59:59.170
> 
> 标签：windows-8, microsoft-metro, windows-runtime, winrt-xaml

我在装有 VS 2012 的 Windows 8 Pro RTM 64 位机器上。我正在构建一个简单的 Metro 应用程序。我有一个没有代码的类，并试图实现 INotifyPropertyChanged 接口。但是，我得到了错误

> “Windows.UI.Xaml.Data.INotifyPropertyChanged”因其保护级别而无法访问。

我知道这是一个已知的错误并已修复。但是，在我的机器上我仍然得到它。我需要安装任何更新吗？

PS：System.ComponentModel 中有一个 INotifyPropertyChanged 但在这里没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T23:33:14.180

这令人困惑，因为各种博客、论坛等上的信息老化。

确实有问题；但是，API 投影已经解决，并且该解决方案是`System.ComponentModel.INotifyPropertyChanged` *要*使用的正确接口。

此处的[文档](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh758320.aspx)也反映了这一点（向下滚动大约三分之一到显示数据绑定方案的表格。

# permissions - 权限被拒绝（公钥、gssapi-keyex、gssapi-with-mic、密码）

> ID：12448839
> 
> 赞同：3
> 
> 时间：2012-09-16T17:00:11.107
> 
> 标签：permissions, ssh

我在公司网络上。基本上，具有完整域名的主机`hello.company.com`有一个别名`hello`：

```
$ host hello
hello.company.com 
```

`$ ssh hello.company.com`效果很好。

但如果我尝试`$ ssh hello`我得到

```
Permission denied (publickey,gssapi-keyex,gssapi-with-mic,password). 
```

这个问题的原因可能是什么？

# xml - 使用 JSTL 解析 XML

> ID：12448840
> 
> 赞同：0
> 
> 时间：2012-09-16T17:00:25.113
> 
> 标签：xml, parsing, xml-parsing, jstl

我试图从循环中仅获取第一条记录，或者如何在第一条记录后停止此循环？

```
<x:parse var="taggedData" xml="${taggedLoad}"/>
<x:forEach var="item" select="$taggedData//item" varStatus="status">
    <h4>
        <a href="/go/video/index.jsp?videoId=<str:substring start="5"><x:out select="$item/guid"/></str:substring>" onclick="javascript:loadBCvideo(<str:substring start="5"><x:out select="$item/guid"/></str:substring>); return false;"><x:out select="$item/title" /></a>
    </h4>
    <p>
         <x:out select="$item/description" escapeXml="false" />
    </p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T17:24:40.117

你可以使用：

```
<xsl:for-each select="(//*[local-name()='item'])[position() &lt;= 1]"> 
```

或者：

```
def result = records.children().find {
    domain -> domain.@domain_name == targetDomain
}

result.children().each {
    // do stuff
} 
```

# android - Android OpenCV 2.4.2 教程 Eclipse - 无法 dlopen 相机包装库

> ID：12448844
> 
> 赞同：0
> 
> 时间：2012-09-16T17:00:39.443
> 
> 标签：android, opencv

我正在尝试运行所有 OpenCV 教程，但到目前为止，还无法运行教程 2、人脸检测、颜色斑点检测；但是，我可以运行教程 0、1、3 和 4。我已更正了许多错误，包括必须添加所有包含路径：

```
<includepath>${NDKROOT}/platforms/android-9/arch-arm/usr/include</includepath>
<includepath>C:\android-ndk-r8b\sources\cxx-stl\gnu-libstdc++\4.6\libs\armeabi\include</includepath>
<includepath>${NDKROOT}/sources/cxx-stl/gnu-libstdc++/4.6/include</includepath>
<includepath>C:\android-opencv\sdk\native\jni\include</includepath>
<includepath>C:\android-ndk-r8b\toolchains\arm-linux-androideabi-4.6\prebuilt\windows\lib\gcc\arm-linux-androideabi\4.6.x-google\include</includepath> 
```

我还更新了 Application.mk 文件以使用 APP_ABI := armeabi，这允许 Tuts 3 和 4 工作。Android版本都是正确的。

一些示例根本不使用 C++ 代码，但它们仍然因无法打开相机包装库而失败。这是在它似乎经历了一系列尝试链接库的每个版本之后，例如 libnative_camera_r2.3.3、r2.2.0 等。在我更新 APP_ABI 之前，Tuts 3 和 4 也这样做了：= armeabi -v7 to APP_ABI := armeabi，但这并不能解决其他 Tuts 的问题。

请帮忙。我是 Android NDK 的新手，只有在 Windows 中使用 Open CV 的经验。提前致谢。

我确实注意到，在我可以运行的教程中，手机摄像头是 Camera 类型，并且是使用 .open() 命令打开的；不会运行的摄像头，手机摄像头被声明为 VideoCapture 类型，这显然需要包装库。只是不知道如何把它放到手机上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:59:58.703

显然，这与我正在测试的手机有关：Samsung Galaxy S。我发现其他人也有类似的问题：[Camera not working](http://answers.opencv.org/question/1574/camera-not-working/)

与其经历皮特为解决这个问题所经历的超人编程飞跃，我决定在另一部手机上尝试一下，HTC 幻灯片。瞧，所有的教程都运行良好，没有问题，没有重新编码。

为了完成任务，我将为我的项目使用 HTC 幻灯片。如果有人遇到更好的解决方案，请告诉我！

更新：我做了一些更多的研究：[http](http://answers.opencv.org/question/1223/android-opencv-support/) : //answers.opencv.org/question/1223/android-opencv-support/ 由于硬件平台供应商对其进行了修改，所有设备似乎都不支持 OpenCV Android Native Camera .

最后更新：我对教程做了更多的实验，并有一个重要的 DUH 时刻。您实际上可以在不使用 OpenCV Native Camera 的情况下使用 OpenCV。我通过转换教程 3 中的 SampleViewBase 类来替换人脸检测示例中的 SampleCvViewBase 类对此进行了测试，效果很好！主要技巧是在 processImage 调用期间转换数据，因此：

```
capture.retrieve(mRgba, Highgui.CV_CAP_ANDROID_COLOR_FRAME_RGBA);
capture.retrieve(mGray, Highgui.CV_CAP_ANDROID_GREY_FRAME); 
```

变成了

```
Mat mYuv = new Mat(getFrameHeight()+getFrameHeight()/2, getFrameWidth(), CvType.CV_8UC1);
mYuv.put(0, 0, data);
Imgproc.cvtColor(mYuv, mRgba, Imgproc.COLOR_YUV420sp2RGB, 4);
Imgproc.cvtColor(mRgba, mGray, Imgproc.COLOR_RGB2GRAY, 0); 
```

主要帮助来自另一篇 stackoverflow 文章：[Capture camera preview for using in OpenCV。转换为 RGB 和灰色垫。爪哇。安卓](https://stackoverflow.com/questions/9741825/capture-camera-preview-for-using-in-opencv-converting-to-rgb-and-gray-mats-ja)

如果我没有看到你，下午好，晚上好，晚安！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T09:08:09.137

我认为这是因为你的手机，因为我可以在我的三星 Galaxy Note 手机中完美地运行所有样本。尝试更换手机，然后运行示例。

# objective-c - CALayer 不透明度动画

> ID：12448847
> 
> 赞同：20
> 
> 时间：2012-09-16T17:00:48.607
> 
> 标签：objective-c, core-animation, calayer, opacity

我想创建一个 CALayer 动画，它会产生一种“华丽”的效果。为此，我正在尝试为“不透明度”属性设置动画，但我的问题是我不知道从哪里开始以及如何做。

这是动画的图形解释：

```
opacity
   |    ___
1  |   |   |
   |   |   |    * repeatCount
0  |___|   |_ . . .
   -------------------------> time
    |______|
    duration 
```

不透明度从 0 开始，然后动画到 1，然后再到 0（这个 0 到 1 到 0 的动画需要的秒数等于持续时间）。然后这个过程重复“repeatCount”次。

以下是代码的一些背景：

```
float duration = ...; // 0.2 secs, 1 sec, 3 secs, etc
int repeactCount = ...; // 1, 2, 5, 6, ect

CALayer* layer = ...; // I have a CALayer from another part of the code
layer.opacity = 0;

// Animation here

done = YES; // IN THE END of the animation set this ivar to yes 
```

实现这一目标的最佳方法是什么？我以前从未使用过 CALayers，所以这也是了解他们的动画系统如何工作的好机会。顺便说一句，我搜索了文档，我了解您如何添加一两个简单的动画，但我不知道如何做这个特定的动画。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-16T17:10:11.523

实现这一点的最佳方法是通过创建一个实例并将其添加到图层来使用显式动画（请参阅[指南）。](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/CoreAnimation_guide/CreatingBasicAnimations/CreatingBasicAnimations.html#//apple_ref/doc/uid/TP40004514-CH3-SW1)`CABasicAnimation`

代码看起来像这样：

```
CABasicAnimation *flash = [CABasicAnimation animationWithKeyPath:@"opacity"];
flash.fromValue = [NSNumber numberWithFloat:0.0];
flash.toValue = [NSNumber numberWithFloat:1.0];
flash.duration = 1.0;        // 1 second
flash.autoreverses = YES;    // Back
flash.repeatCount = 3;       // Or whatever

[layer addAnimation:flash forKey:@"flashAnimation"]; 
```

如果您想知道动画何时完成，您可以设置一个委托并实现该`animationDidStop:finished:`方法，但是最好使用完成块，因为它允许所有代码在同一个位置。如果您正在为 iOS 4 或 OS X 编写代码，那么您可以使用出色的[CAAnimationBlocks](https://github.com/xissburg/CAAnimationBlocks)类别来完成此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T17:20:50.110

Trojanfoe 的回答非常好。我只想补充一点，如果您想更好地控制“时间线”（淡出需要多长时间？然后我们应该等待多长时间？那么淡入需要多长时间？等等）你是想要将多个`CABasicAnimation`s 组合成一个 CAAnimationGroup。

你可能想阅读我关于这个主题的书章节，最后一部分是关于 CAAnimation 及其后代的教程：

[http://www.aeth.com/iOSBook/ch17.html#_core_animation](http://www.apeth.com/iOSBook/ch17.html#_core_animation)

请注意，我的讨论是针对 iOS 的；在 Mac OS X 上，如果你在那儿，视图/层架构会有些不同，但它所说的关于 CAAnimation 的内容仍然是正确的。

# debugging - 如何在 Meteor 的服务器端调试和记录自己的代码？

> ID：12448848
> 
> 赞同：9
> 
> 时间：2012-09-16T17:00:52.197
> 
> 标签：debugging, node.js, meteor, serverside-javascript, node-inspector

没关系。这不起作用的原因：我忘记了`meteor reset`所以`debugger`没有机会停下来。呸！

更多信息：我正在使用 Mason Chang 对相关问题的回答中的方法，而不是`kill -s USR1 [proc_id]`（我可以在其中看到脚本，但无法在 startup() 函数中停止。）。另外，我正在使用陨石。

我正在尝试使用节点检查器在 Meteor 服务器端（即，在）上调试[Meteor.startup(function ())](http://docs.meteor.com/#meteor_startup)`/server`代码，我已经阅读了这个[问题](https://stackoverflow.com/questions/11034941/meteor-debug-on-server-side)，并按照答案进行了更改`run.js`，但不知何故，我自己的脚本启动功能不会出现在 Chrome 的脚本部分。

如何在此处查看我的代码并设置断点并在这些点处停止？顺便说一句，Meteor_debug() 不会向标准输出、标准错误或节点检查器浏览器控制台输出任何内容。我也试过 console.log() 无济于事。如何在 Meteor 服务器端启用日志记录？

如果这很重要，我在`auth`分支上。

这里的代码很简单（/server/bootstrap.js）：

```
Meteor.startup(function () {
 if (Logs.find().count() === 0) {
  var data = [/*...some data...*/];
  var timestamp = (new Date()).getTime();
  Meteor._debug("timestamp: "+timestamp+", data.len: " + data.length);
  debugger;
  for (var i = 0; i < data.length; i++) {
    data[i].timestamp = timestamp++;
    var entry_id = Logs.insert(data[i]);
    Meteor._debug("entry_id: "+ entry_id);
  }
 }
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T07:22:01.407

既然我知道如何做到这一点，我将回答我自己的问题，以便我们可以在此处保留此信息（详细信息）：（这是基于 Mason Chang 对这个[问题](https://stackoverflow.com/questions/11034941/meteor-debug-on-server-side)的回答。）

1.  停止流星执行。
2.  编辑`/usr/lib/meteor/app/meteor/run.js`（或相应`run.js`的陨石安装`HOME//.meteorite/meteors/meteor/meteor/[LONG_HEX_CODE]/app/meteor`）：
    将行
    `[path.join(bundle_path, 'main.js'), '--keepalive']`
    改为
    `['--debug-brk', path.join(bundle_path, 'main.js'), '--keepalive']`
    //--debug-brk 使新线程在第一行中断；
3.  在服务器代码中添加`debugger`语句作为断点；
4.  `node-inspector &`在服务器终端中运行。（谷歌“节点检查器”来安装它。）
5.  跑流星；（这不会附加调试器，因为还没有服务器线程，如果您没有打开客户端窗口。）
6.  刷新客户端浏览器窗口；（启动将在第一行中断并附加到的服务器线程`node-inspector`。）
7.  在 [SERVER:8080] 打开浏览器窗口，您的服务器代码停在第一行（`main.js`在您的`[PROJECT_DIR]/.meteor/local/build`）；
8.  点击调试器浏览器窗口上的 RUN 按钮；根据您的`debugger`语句所在的位置，您可能必须在客户端浏览器窗口中执行一些触发操作才能运行到`debugger`断点。（请注意，如果您等待太久才按下 RUN 按钮，您的客户端窗口可能会超时，您必须再次刷新。）
9.  现在您可以在服务器调试器窗口中进行通常的调试工作：单步调试、观察变量、在控制台中执行、查看堆栈等。

**编辑**：对于服务器端的日志记录，您可以使用 Meteor._debug() 和 console.log()，它们将显示在您运行的终端中`meteor`。在客户端，这些日志记录语句将输出到浏览器开发人员的控制台。工具。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-17T23:01:51.963

On MacOSX, you can use with Chrome :

```
NODE_OPTIONS="--debug-brk" meteor 
```

and in another terminal

```
node-inspector --debug-port=5858 --web-port=12345 
```

Then connect Chrome to 127.0.0.1:12345/debug?port=5858

Otherwise with Webstorm, just create a Node.js Remote Debug configuration and run it :

```
Name : Meteor
Host : 127.0.0.1
Port 5858

```

Note that once the server has started, you need to press run in order for Meteor to load, and then pause in order to debug from the server console.

# javascript - 在不同页面上使用相同的 id 导致图片元素不呈现？

> ID：12448849
> 
> 赞同：0
> 
> 时间：2012-09-16T17:00:54.317
> 
> 标签：javascript, html, css

我目前正在构建一个 6 页的网站并完成了导航元素的模板，问题是，我只是将 css 和 js 放入外部文件中，以获取每个页面上相同的元素，但现在它们不是在原始页面或新页面上渲染，只在应该有图像的地方显示白色。

这是因为我在元素上使用了 id 而不是类？我认为如果 id 在单独的页面上并不重要，这就是我在这里问的原因，因为它可能是别的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T17:13:53.063

将 CSS 和 JS 放入外部文件后，Dreamweaver 询问我是否要更新链接，我回答是，它将外部 css 文件中的所有背景图像从 (images/image.jpg) 更改为 (file:///images /image.jpg），我不得不将它们全部改回原始路径。问题解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T17:03:18.963

id 是否在单独的页面上并不重要。您可能在迁移的某个地方遇到了 JS 错误。您是否在打开 firebug/chromedevelopertools/iedevelopertools 的情况下加载页面并查看是否有 JS 错误？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T17:09:05.237

`ID`不是问题。根据css文件检查相对路径是否仍然正确。对我来说，这似乎是最可能的错误。

# mysql - (html) phpmyadmin 中 TEXT 字段的所见即所得编辑器

> ID：12448851
> 
> 赞同：0
> 
> 时间：2012-09-16T17:01:05.303
> 
> 标签：mysql, phpmyadmin, wysiwyg

我正在制作一个小型网站，我需要任何人来添加一些内容，这些内容存储在三个表中，到 13 年 9 月将最多有 500 条记录（小东西）。现在我正在使用 phpmyadmin，但添加文本（其中一个表是迷你博客）需要基本的 html 技能，我敢肯定“谁接管”没有。你知道吗，或者：

a）一种将所见即所得编辑器与 phpmyadmin 集成的方法（至少对于 TEXT 字段）

b) mysql 的一个基本前端，它支持编辑表（只是内容，而不是结构）——我可以自己在其中嵌入一个编辑器？

**编辑**：感谢编辑器的建议，但这是次要问题：目前我需要一种将任何此类编辑器嵌入到 phpmyadmin 的方法（否则我必须自己编写前端）...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:10:00.120

我认为 CK 编辑器是您正在寻找的，您可以在这里查看：[http ://ckeditor.com/](http://ckeditor.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T17:21:27.570

这是给你的解决方案，我不得不说这样做是完全错误的，但如果你真的需要它，那么这里是方法：

从这里获取 TinyMCE：

[http://www.tinymce.com/](http://www.tinymce.com/)

在你的 phpmyadmin 文件夹中提取包，例如在我的例子中，我把主要内容放在这里：`D:\Program Files\Wamp\apps\phpmyadmin\tiny_mce`所以`tiny_mce.js`文件位于这个补丁`D:\Program Files\Wamp\apps\phpmyadmin\tiny_mce\tiny_mce.js`

然后`tbl_change.php`在您的 phpmyadmin 文件夹中打开该文件，并在之后添加流动代码`<?php`：

```
echo '<script type="text/javascript" language="javascript" src="tiny_mce/tiny_mce.js"></script>'
.'<script language="javascript" type="text/javascript">'
.'tinyMCE.init({'
.'theme : "advanced",'
.'mode : "textareas",'
.'language : "en"'
.'});'
.'</script>'; 
```

这将在 phpmyadmin 中编辑记录的所有文本区域中添加 TinyMCE，如果您在其他地方需要它，只需查看 phpmyadmin 右 iframe 中正在加载的文件，并将该代码也添加到该文件中。

我再说一遍，这样做是完全错误的，如果你真的需要就去做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T17:12:43.097

我正在使用 jHtmlArea，一个 jQuery 插件，作为一种非常简单快捷的方法来为像你这样的案例实施解决方案：http: [//jhtmlarea.codeplex.com/](http://jhtmlarea.codeplex.com/)

在前端使用它真的很简单。但我没有使用 phpMyAdmin 也没有使用任何其他“基本前端”。我编写了一个简单的后端 PHP 脚本来将内容保存到数据库中。

在后端，我也使用[HTML Purifier](http://htmlpurifier.org/)来清理 HTML，并使用[HTML Tidy](http://php.net/manual/en/book.tidy.php)来美化它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T17:17:03.423

这也很有用 TinyMCE "www.tinymce.com" ，这个 WYSIWYG 可以在 wordpress 中看到

# node.js - 图片下载后的回调函数

> ID：12448853
> 
> 赞同：18
> 
> 时间：2012-09-16T17:01:17.313
> 
> 标签：node.js, request, fs

我正在尝试使用[请求](https://github.com/mikeal/request)模块保存图像下载。有了这个

```
request('http://google.com/images/logos/ps_logo2.png').pipe(fs.createWriteStream('doodle.png')); 
```

它工作正常。但是我希望在图像完全下载后能够做其他事情。如何为 fs.createWriteStream 提供回调函数？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-09-16T17:08:49.433

您想提前创建流，然后在关闭事件上做一些事情。

```
var picStream = fs.createWriteStream('doodle.png');
picStream.on('close', function() {
  console.log('file done');
});
request('http://google.com/images/logos/ps_logo2.png').pipe(picStream); 
```

这应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-24T01:25:54.543

出现此错误的人必须尝试在 fs.createWriteStream(1,2) 方法的第二个输入参数处添加一个函数，如下例所示，这也适用于 fs.unlink 方法。请注意，添加的这个新函数什么都不返回，但它是必需的，如果需要，你也可以添加一些东西来返回，而不是在我的情况下。

```
request('http://google.com/images/logos/ps_logo2.png').pipe(fs.createWriteStream('doodle.png'), function(err){}); 
```

# regex - 有时存在的正则表达式捕获组

> ID：12448858
> 
> 赞同：2
> 
> 时间：2012-09-16T17:02:28.623
> 
> 标签：regex, grouping

几个小时以来，我一直把头撞在墙上，试图弄清楚这一点。*如果*他们在那里，我正在尝试捕获三个组，如果没有，则捕获第一组中的所有内容。我可以将其分解为单独的正则表达式语句，但保留一个会很棒。

4 个不同的字符串如下所示：

```
Be somewhere now & be there later (Store) @1300
Be at work! @1430
Go home whenever (Home)
Don't ever go to the donut shop. 
```

我正在寻找的最终结果如下：

```
(Group 1) Be somewhere now & be there later (Group 2) Store (Group 3) @1300
(Group 1) Be at work! (Group 2) (Group 3) @1430
(Group 1) Go home whenever (Group 2) Home (Group 3)
(Group 1) Don't ever go to the donut shop. (Group 2) (Group 3) 
```

到目前为止，我能做的最好的事情是处理第一个和第二个选项，并且只抓住第 3 组。我已经这样做了：

```
.*(?:\(.*\))?\s(\@\d+)$ 
```

我很确定`.*`必须删除它，因为如果我把它变成`(.*)`它总是匹配所有东西。

我已经尝试了所有我知道的方法，但无法让它发挥作用，所以现在我联系你。:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:07:38.917

尝试这个：

```
^(.*?)(?:\(([^)]+)\))?(?:\s+@(\d+))?$ 
```

关键是这`.*?`是一个非贪婪的匹配。它将尽可能少地匹配，因此它不会匹配整个字符串，除非其他组无法匹配。

在线查看它：[rubular](http://rubular.com/r/9hALv1Vk4V)

# xcode - 在 Mac OS X Cocoa 应用程序中添加 ViewController 的标准方法是什么？（或者是否需要？）

> ID：12448859
> 
> 赞同：9
> 
> 时间：2012-09-16T17:02:35.940
> 
> 标签：xcode, macos, cocoa

我想用一个`ViewController`类似于 iOS“单一视图应用程序”模板的 Cocoa 应用程序，但是没有这样的模板（有没有可以使用的公共/开源的？）

对于 Cocoa 应用程序，我们真的不需要一个，因为它`NSView`已经可以做任何事情，是真的吗？我们可以将所有事件处理放在我们自定义的 NSView 类中。是不是 iOS 需要它更多，因为旋转是由 ViewController 处理的，并且通常需要旋转？但是如果我们使用 MVC，那么总是使用 ViewController 可能会更好，如果是这样，有没有标准的方法，一个模板，可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T18:42:59.240

OS X 中关于管理 NSViews 的“控制器”是`NSWindowController`. 尽管 Drummer 说这`NSViewController`不是很有用，但我必须不同意 -`NSWindowController`一旦它变得太大，它对于拆分你的东西很有用，并且在观点方面有明确的逻辑划分。

你可以有一个`NSWindowController`，一旦它变得足够复杂，就`NSWindowController`可以将与特定视图对应的任务委托给 的子类`NSViewController`，在这方面它非常有用。

在默认模板（如果我没记错的话）中，`AppDelegate`它扮演窗口控制器的角色，尽管它在技术上不是一个。在更复杂的应用程序中，最好实例化一个窗口控制器。

只要你不混淆控制器和查看任何东西都可以使用。视图应该降级为仅显示和基本输入处理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T17:07:03.530

在 OS X`NSViewController`上不像`UIViewController`在 iOS 上那样经常使用。原因之一是它并不是真正有用，并且缺少`UIViewController`. 只有在少数情况下您必须真正使用它们，例如使用[`NSPopover`](http://developer.apple.com/library/mac/documentation/AppKit/Reference/NSPopover_Class/Reference/Reference.html).

有几种方法可以构建您的 OS X 代码。其中之一是使用[`NSWindowController`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindowController_Class/Reference/Reference.html). 您可以将其视为iOS 上`NSWindowController`的等价物。`UIViewController`

# php - PHP 错误：警告：无法修改标头信息 - 标头已由

> ID：12448860
> 
> 赞同：1
> 
> 时间：2012-09-14T06:51:55.853
> 
> 标签：php

请帮助我：当我锁定登录按钮时，显示错误，我无法解决这个问题。我是 php 新手。

警告：无法修改标头信息 - 标头已由第 56 行 /home/kanak/public_html/celltopc/login.php 中的（输出开始于 /home/kanak/public_html/celltopc/login.php:33）发送

我的代码是：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Login</title>
<link href="css/usercss.css" rel="stylesheet" type="text/css" />
<style type="text/css">
<!--
body {
    background-image: url(images/LoginForm_bg.jpg);
    background-repeat: repeat;
}
-->
</style></head>

<body>
<div class="shadow" id="login">
  <div id="login-body">
  <form action="login.php" method="post" name="loginform">
    <strong>Username:</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <input name="username" type="text" class="input" value="username" maxlength="10" />

    <p><br />
  <strong>Password:</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <input name="password" type="password" class="input" value="password" />

  <p><br />
   <input type="submit" name="submit" value="Login" width="30" class="myButton">

  </form>

   <p> <br />
<?php
ob_start();
@session_start();
include'include/config.php';
include'include/opendb.php';
@$username=$_POST['username'];
@$password=$_POST['password'];

    if($username&&$password)
    {
    $connect=mysql_connect("$dbhost","$dbuser","$dbpass")or die("Couldnt connect to Database");
    mysql_select_db("$dbname") or die ("Could not find to Database");
    $query = mysql_query ("SELECT * FROM user WHERE username='$username'");
    $numrows = mysql_num_rows($query); 
    if ($numrows != 0)
        {
        while ($rows = mysql_fetch_assoc($query))
            {
            $dbusername = $rows['username'];
            $dbpassword = $rows['password'];
            }
                if($username==$dbusername&&$password==$dbpassword)
                {
header("location:main.php");

$_SESSION['username']=$dbusername;
                }
                else        
                die("<p class=error>*&nbsp;Increate Password</p>");     

        }
        else die("<p class=error>*&nbsp;The username doesnot exist</p>");
    }
    else die ("<p class=text>*&nbsp;Please entre a username and password</p>");
?>
</div>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-14T07:03:07.193

您在调用之前发送了 HTML `ob_start()`。因此，当 PHP 尝试设置会话 cookie 时，它​​不能，并且您会收到警告。

要修复它，请将 PHP 代码移动`ob_start()`到文件的最顶部：

```
<?php
ob_start();
session_start();
?>
<!DOCTYPE.... 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-14T07:03:18.180

您需要在任何输出之前使用 session_start() 启动会话。

**会话开始**

```
<?php
    session_start();
?>
<html>
   <!-- Output -->
</html> 
```

或者，您可以使用输出缓冲区，就像您已经尝试过的那样。这将缓冲 ob_start() 和 ob_flush() 之间的任何内容

**输出缓冲器**

```
<?php
    ob_start();
?>
<html>
    <!-- Output -->
</html>
<?php
    session_start();
    ob_flush();
?> 
```

# java - Java Double Locking - 有人能更简单地解释一下为什么直觉不起作用吗？

> ID：12448864
> 
> 赞同：-1
> 
> 时间：2012-09-16T17:03:07.810
> 
> 标签：java, multithreading, concurrency, volatile

我在这里找到了以下代码：[http ://en.wikipedia.org/wiki/Double-checked_locking#Usage_in_Java](http://en.wikipedia.org/wiki/Double-checked_locking#Usage_in_Java)

我试图理解为什么在某些情况下这不起作用。我阅读了“微妙”问题的解释，使用`volatile`将解决问题，但我有点困惑。

```
// Broken multithreaded version
// "Double-Checked Locking" idiom
class Foo {
    private Helper helper = null;
    public Helper getHelper() {
        if (helper == null) {
            synchronized(this) {
                if (helper == null) {
                    helper = new Helper();
                }
            }
        }
        return helper;
    }

    // other functions and members...
} 
```

基本上，我是否正确地假设这会失败，因为块中的`helper == null`检查`synchronized`有可能失败，因为它可能是“部分”构建的？如果对象是部分构造的，java*不会返回null吗？*是这个问题吗？

无论如何，我知道进行双重检查锁定并不是一个很好的做法，但我只是在理论上很好奇为什么上面的代码会失败，为什么 volatile （加上分配局部变量）可以解决这个问题？这是我从某个地方得到的一些代码。

```
// Double-check idiom for lazy initialization of instance fields
private volatile FieldType field;
FieldType getField() {
    FieldType result = field;
    if (result == null) { // First check (no locking)
        synchronized(this) {
            result = field;
            if (result == null) // Second check (with locking)
                field = result = computeFieldValue();
        }
    }
    return result;
} 
```

我知道已经有一千篇关于这个的帖子，但是解释似乎提到了 1.5 之后内存模型的变化，我也不太明白这与它有什么关系:-(。

先谢谢了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T17:34:57.993

> 我是否正确地假设这会失败，因为同步块中的 helper == null 检查有可能失败，因为它可能在那时“部分”构建？

是的你是对的。这在[乱序写入](http://www.ibm.com/developerworks/java/library/j-dcl/index.html)中进行了解释。`helper = new Helper()`由 3 个步骤组成：内存分配、调用构造函数和赋值。JIT 编译器可以在内存分配之后（返回对新对象的引用）但在构造函数调用之前自由地对指令进行重新排序和赋值。使用 volatile 可以防止重新排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T17:27:28.950

您需要声明该字段`volatile`，因为这将强制对该字段的写入“刷新”到*主内存*。否则，JVM 规范允许每个线程保留其本地版本的字段，并且**永远不会**将其写入传递给其他线程。这通常很好，因为它允许在 JVM 中进行积极的优化。

希望有帮助！否则，我可以推荐一杯*非常*浓的咖啡，一个非常安静的房间，然后阅读[Java 内存模型](http://docs.oracle.com/javase/specs/jls/se5.0/html/memory.html)，它解释了它是如何工作的以及线程之间的交互。我想你会惊讶于一个线程需要将它的写入（共享）内存传递给其他线程以及 JVM 可以执行的读取和写入重新排序的情况如此之少！

令人兴奋的阅读！

# c++ - 了解 C++ 中的动态对象（“新”）

> ID：12448873
> 
> 赞同：2
> 
> 时间：2012-09-16T17:04:31.273
> 
> 标签：c++, memory

我正在尝试更深入地了解新运营商。我确实理解它从堆中分配内存并返回指向内存的指针这一事实。我的问题是，一旦我得到指针并使用它来存储另一个指向另一个声明变量的指针，值复制或指向的值是如何发生的？所以例如

我声明一个变量

```
int x = 4; 
```

说

```
int* ptr = new int;
ptr = &x; 
```

ptr 从堆中指向一块内存。x 定义在拥有单独内存块的堆栈中。ptr 和 x 的地址相同。如果我删除 ptr，x 仍然有效，因为它仍然存在于内存中。当我说 *ptr 时，我正在寻找 ptr 指向的值，在这种情况下是 4。我的问题是 4，它在哪里。它是否存在于两个单独的内存块中。一个由 x 表示，另一个是我刚从 new 得到的。这个过程是如何发生的？4 如何在两个块之间传输，或者我错过了什么？请帮忙。

另外，当我说 ptr = &x 时，是按位复制。换句话说，我是否永远失去了刚刚通过堆访问的内存？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T17:09:29.057

```
int* ptr = new int;
ptr = &x; 
```

> ptr 从堆中指向一块内存

不，它没有。赋值后指向变量的地址，变量`x`自动[存储](http://en.wikipedia.org/wiki/Automatic_variable)。`int`您已经丢失了最初指向的动态分配的句柄`ptr`，因此您不能再删除它。`4`不会通过任何内存“块”传输。当您取消引用时`ptr`，您将获得由 x 引用的变量，其中包含值`4`。

试试这个例子：

```
#include <iostream>

int main()
{

  int x = 4;
  int* ptr = new int;
  ptr = &x;  // lose handle on dynamically allocated int: MEMORY LEAK
  std::cout << (*ptr) << "\n";
  x += 1;
  std::cout << (*ptr) << "\n";
  (*ptr) += 1;
  std::cout << x << "\n";

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T17:14:07.463

如您所见，您可以指向`ptr`任何您想要的地址，但这并不意味着它是安全的。在这里，您正在执行错误的内存操作，因为分配的内存`new`是孤立的，而不是由`ptr`. 这是语言允许的，但不安全。

所以`4`仍然在他们相同的地址，在堆栈上，只是它也被 a `ptr`after you did引用`ptr=&x;`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T17:15:11.560

忘记“堆栈”和“堆”。这对于您需要了解的内容并不重要。

C++ 中的对象具有三种不同的存储类之一：静态、动态和自动。

自动和静态对象是非引用变量的值。更准确地说，命名空间范围内的变量和块范围内的静态变量保存静态对象，而块范围内的非静态变量保存自动对象。这些对象的生命周期取决于它们在源代码中的位置：

```
// file.cpp

int a;             // static, global (= "namespace scope")

void foo()
{
    static int b;  // static, block scope

    int c;         // automatic (always block scope)
} 
```

相比之下，*动态*对象正是那些作为`new`表达式的结果而创建的对象。动态对象本身永远不是变量。您只能通过指针（它本身是一个对象）或通过引用变量（并且引用永远不是对象）来获取它们：

```
Foo * p = new Foo;
Foo & q = *new Foo;  // NEVER do this! 
```

动态对象一直存在，直到您通过指向它们的指针明确删除它们：

```
delete p;    // normal
delete &q;   // works, but insane 
```

在您的情况下，`new int`创建一个新的动态对象类型`int`，并将指向该对象的指针存储在变量中`ptr`。但是，在下一行中，您将覆盖变量并丢失指向动态整数的指针。您已经*泄漏*了对象，并且无法再恢复它。

# java - 使 Spring Tool Suite 生成的 Web 应用程序在独立的 Tomcat 服务器上工作

> ID：12448874
> 
> 赞同：4
> 
> 时间：2012-09-16T17:04:35.593
> 
> 标签：java, spring, tomcat, web-config

从[使用 Spring Tool Suite 部署 Spring Web 应用程序](https://stackoverflow.com/questions/12444096/deploying-spring-web-apps-using-spring-tool-suite/12448586#12448586)问题，我可以使用 Spring Tool Suite 构建和部署 Spring Web 应用程序。我可以访问该应用程序`localhost:8080/manolitomvc`。

![在此处输入图像描述](../Images/a08457192cf869ad2af96300131e81fc.png)

关闭 Spring Tool Suite Tomcat 服务器，我使用 重新启动 Tomcat `sudo startup.sh`，但收到此错误消息。

![在此处输入图像描述](../Images/08080cdd8afad5b81745c3125211b4e7.png)

怎么了？使应用程序正常工作需要什么服务器设置`manolitomvc` ？

## 添加/解决

根据拉尔夫的回答，我可以让它工作。

在 STS 工作区目录中，我可以在 Tomcat 目录中生成 war 文件。

![在此处输入图像描述](../Images/b9e8b0cb9dae5e99b06469352a26ae4d.png)

在 Web 应用程序中复制 war 文件使部署工作。有趣的是，`manolitomvc`目录是通过复制操作自动生成的。

![在此处输入图像描述](../Images/803c741f2bb62c193120e4d44b3a1c7c.png)

或者，您可以将目标设置为 webapp 目录。

![在此处输入图像描述](../Images/996e6fbad16db5c3b71c77697677e22a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T17:27:06.287

STS/Eclipse 为 tomcat 使用完全不同的（让我们称之为）“工作目录”。

如果您想在没有 STS/Eclipse 的情况下运行您的应用程序，那么让 STS/Eclipse 或 Mave 为您的项目创建一个 war 文件。

*   对于 Maven，它是：`mvn package`- 它在目标文件夹中创建一个战争文件
*   对于 STS+Maven，它是：Project/Run as.../Maven Package
*   对于没有 Maven 的 Eclipse：项目/导出/Web/WAR 文件

然后你需要把这个war文件复制到`webapps`你的原始tomcat安装文件夹中（不是`.metadata/plugins/org.eclipse.wst.server.core...`你的eclipse工作区目录中的文件夹）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-23T09:00:28.167

为了让应用程序在 STS 之外运行或生成可部署`.war`文件，请在您的计算机上安装 maven，并将以下内容添加到您的 pom.xml

pom.xml：

`<packaging>war</packaging>`最好在开头`<version>0.0.1-SNAPSHOT</version>`参考下。

```
<build>
        <plugins>
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
            </plugin>
        </plugins>
</build> 
```

在文件的最后，这会将 maven 插件添加到您的项目中。

安装 Maven 后，您可以在终端中导航到您的项目`cd /path/to/project`并运行`mvn install`这将生成一个`.war`文件，并`0.0.1-SNAPSHOT`在您的应用程序名称中添加一个文件，您可以在运行服务器的任何位置重命名和删除 war 文件。

# autohotkey - 这个 AHK 脚本是如何工作的？

> ID：12448877
> 
> 赞同：2
> 
> 时间：2012-09-16T17:05:25.433
> 
> 标签：autohotkey, windows-messages

以下 AHK 脚本会自动显示您在系统任务栏托盘中右键单击 uTorrent 图标时通常会得到的菜单：

```
DetectHiddenWindows, On
Process, Exist, utorrent.exe
WinGet, W, List, ahk_pid %ErrorLevel%
Loop %W%
 {
 WinGetClass, Class, % "ahk_id" W%A_Index%
 If InStr( Class, "µTorrent" ) {
   hWnd := W%A_Index%
   Break
 }}
PostMessage, 0x8001, 0,0x204,, ahk_id %hWnd% ; Right Click down
PostMessage, 0x8001, 0,0x205,, ahk_id %hWnd% ; Right Click Up 
```

除了最后两行外，我理解了大部分内容。0x8001 是 WM_APP+1。为什么使用 WM_APP 范围内的消息，发出这两个消息时究竟发生了什么？非常感谢您的解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T03:48:48.350

当您右键单击某些内容时，将显示上下文菜单。上下文菜单也可以通过按下键盘上的appskey 按钮来显示。当您按下它时，Windows 会向应用程序发送一条消息，即 WM_APP 消息。大多数应用程序通过显示上下文菜单来响应。在托盘图标的情况下，响应与右键单击的响应相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T15:15:17.510

根据 MSDN（[http://msdn.microsoft.com/en-us/library/windows/desktop/ms644927](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644927(v=vs.85).aspx#system_defined) (v=vs.85).aspx#system_defined ）

> 如果您的应用程序被标记为 4.0 版，您可以将 0x8000 (WM_APP) 到 0xBFFF 范围内的消息标识符值用于私人消息。

所以这表明 0x8001 是 utorrent 为消息选择的标识符。0x204 和 0x205 值分别用于 Right-Click Down 和 Up 事件。我的猜测是，此代码旨在模拟 Windows 托盘中 utorrent 图标的右键单击。

此外，如果您使用 Autohotkey_L 代码可能可以简化为三行并执行相同的操作：

```
DetectHiddenWindows, On
PostMessage, 0x8001, 0,0x204,, ahk_exe utorrent.exe ahk_class µTorrent ; Right Click down
PostMessage, 0x8001, 0,0x205,, ahk_exe utorrent.exe ahk_class µTorrent ; Right Click Up 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T19:40:43.350

似乎 WM_APP+1 消息号是在应用程序开发中做出的选择，在本例中为 utorrent。可能是另一条消息#，没什么神奇的。我相信我提供的代码（来自 AHK 论坛）找出了通过逆向工程发送的信息。

# python - django-webtest 和 selenium 的区别

> ID：12448878
> 
> 赞同：12
> 
> 时间：2012-09-16T17:05:49.663
> 
> 标签：python, django, selenium, django-forms, django-testing

我一直在阅读有关在 django 中进行测试的信息。推荐的一件事是使用 django-webtest 进行功能测试。[我在这里](http://blog.fruiapps.com/2012/08/Functional-Testing-with-Selenium-WebDriver-and-Selector-in-Python)找到了一篇不错的文章，讲授如何使用 python 在 selenium 中进行功能测试。但人们也推荐了 Ian Bicking 的 WebTest 扩展[djagno-webtest](http://pypi.python.org/pypi/django-webtest)用于在 django 中测试表单。在 django 表单的上下文中，使用 webtest 进行测试和使用 selenium 进行测试有何不同？

所以从功能测试的角度来看：

**django-webtest 和 selenium 如何并存？**

**我们需要同时拥有它们还是任何一个都可以？**

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-23T12:18:18.833

主要区别在于 selenium 运行一个实际的浏览器，而 WebTest 挂钩到 WSGI。这导致以下差异：

*   你不能用 WebTest 测试 JS 代码，因为没有东西可以运行它。
*   WebTest 更快，因为它与 WSGI 挂钩，这也意味着更小的内存占用
*   WebTest 不需要在端口上实际运行服务器，因此并行化更容易一些
*   WebTest 不会检查实际浏览器出现的不同问题，例如特定浏览器版本错误（咳嗽.. Internet Explorer.. 咳嗽..）

**底线：** 首选使用 WebTest，除非您必须将 Selenium 用于无法使用 WebTest 进行测试的事物。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-17T14:48:38.967

关于 Selenium 要了解的重要一点是，它主要构建为与服务器无关的测试框架。使用什么框架或服务器端实现来创建前端并不重要，只要它的行为符合预期即可。此外，虽然您*可以*（并且在可能的情况下*应该*）在 Selenium 中手动编写测试，但许多测试都是记录某人经历动作的宏，然后自动转换为代码。

另一方面，django-webtest 专门用于 Django 网站。它实际上是 Django 特定的 WebTest 扩展，它不是仅 Django，而是仅 WSGI（因此仅适用于 Python）。正因为如此，它可以与应用程序交互，对服务器上的事情如何工作有更高的认识。这可以使运行测试更快，还可以轻松编写更精细、更详细的测试。此外，与 Selenium 不同，您的测试不能自动编写为录制的宏。

否则，这两个工具通常具有相同的目的，并且旨在测试相同种类的事物。也就是说，我建议选择一个而不是同时使用两者。

# java - Java：等待exec进程直到它退出

> ID：12448882
> 
> 赞同：10
> 
> 时间：2012-09-16T17:06:14.627
> 
> 标签：java, process, exec

我在 Windows 中运行一个从 Windows 事件收集日志的 java 程序。将创建一个 .csv 文件，在该文件上执行某些操作。

命令被执行和管道化。如何让我的 Java 程序等到进程完成？

这是我正在使用的代码片段：

```
Runtime commandPrompt = Runtime.getRuntime();
try {           
    Process powershell = commandPrompt.exec("powershell -Command \"get-winevent -FilterHashTable @{ logname = 'Microsoft-Windows-PrintService/Operational';StartTime = '"+givenDate+" 12:00:01 AM'; EndTime = '"+beforeDay+" 23:59:59 ';  ID = 307 ;} | ConvertTo-csv| Out-file "+ file +"\"");
//I have tried waitFor() here but that does not seem to work, required command is executed but is still blocked
} catch (IOException e) { }
// Remaining code should get executed only after above is completed. 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-16T17:07:57.653

您需要使用`waitFor()`而不是`wait()`. 这样，您的线程将阻塞，直到执行的命令完成。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-07-18T18:18:00.093

我在这里找到了答案[Run shell script from Java Synchronously](https://stackoverflow.com/questions/20592397/run-shell-script-from-java-synchronously)

```
public static void executeScript(String script) {
    try {
        ProcessBuilder pb = new ProcessBuilder(script);
        Process p = pb.start(); // Start the process.
        p.waitFor(); // Wait for the process to finish.
        System.out.println("Script executed successfully");
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-16T17:18:27.243

这将起作用。如果没有，请指定 WHAT 到底是什么不起作用

```
Runtime commandPrompt = Runtime.getRuntime();
try {           
    Process powershell = commandPrompt.exec("powershell -Command \"get-winevent -FilterHashTable @{ logname = 'Microsoft-Windows-PrintService/Operational';StartTime = '"+givenDate+" 12:00:01 AM'; EndTime = '"+beforeDay+" 23:59:59 ';  ID = 307 ;} | ConvertTo-csv| Out-file "+ file +"\"");
    powershell.waitFor();
} catch (IOException e) { }
// remaining code 
```

# gwt - GWT 创建 JAVAscriptObject 表单字符串

> ID：12448884
> 
> 赞同：1
> 
> 时间：2012-09-16T17:06:41.163
> 
> 标签：gwt, httpresponse

我有一个模型，例如波纹管。

```
public class ColumnDtoWrapper extends JavaScriptObject{

protected ColumnDtoWrapper() {}

public final native JsArray<ColumnDto> getfields() /*-{
    return this.fields;
}-*/;

public final native void gettable() /*-{
return this.table;
}-*/;

public final native JavaScriptObject getHasMany() /*-{
    return this.hasmany;
}-*/;
} 
```

我像这样进行服务器调用

```
RequestBuilder build = new RequestBuilder(RequestBuilder.POST, URL);
    try {
        Request request = build.sendRequest(null, new RequestCallback(){
            @Override
            public void onResponseReceived(Request request, Response response) {
                if(200== response.getStatusCode()){

                    }
                }

            @Override
            public void onError(Request request, Throwable exception) {
                Window.alert("error : " + exception.getLocalizedMessage());
            }

        });
    } catch (Exception e) {
        Window.alert("try err");
    } 
```

当我在 JSON 字符串中获得成功响应时。我想将该字符串转换为 ColumnsDtoWrapper。

类似 ColumnDtoWrapper col = new ColumnDtoWrapper(responce.getText());

但它不起作用有什么好方法可以将字符串转换为 JavaScriptObject 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T17:22:11.607

使用[`JsonUtils.safeEval`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/core/client/JsonUtils.html#safeEval%28java.lang.String%29)：

```
ColumnDtoWrapper col = JsonUtils.safeEval(response.getText()); 
```

# java - 在休眠中获取 ClassCastException

> ID：12448889
> 
> 赞同：0
> 
> 时间：2012-09-16T17:07:12.643
> 
> 标签：java, hibernate

我正在休眠中编写一些代码，在将行插入我的表（hall_block_calendar）之前，我需要更新一些其他表（hall_calendar）。我的状态为 F、E、M，从该状态开始，只有那些由带有“F”的表单提交的日期才会被标记为“N”。我的 pojo 类 Hall_calendar.java 映射文件包含 pojo 类中 hall_code 和 calendar_date 和 hallbookingcompid 的复合键。

我的查询工作正常。但是，for 循环会引发异常。我将不胜感激对此的任何投入。

```
 public boolean addHallCalendarBlock(Hall_block_calendar hbc, Hall_calendar hc)
{
   //boolean result;
   Session session=HibernateUtil.getSessionFactory().openSession();   
   Transaction tx=null;
   try
    {
       tx=session.beginTransaction();

       Query q=session.createQuery("from Hall_calendar h where h.hallbookingcompid.calendar_date between'"+hbc.getHall_block_from_date()+"' and '"+hbc.getHall_block_to_date()+"' and hall_availability='F'");

       System.out.println("query working: "+q.list());

       if(!q.list().isEmpty())
       {   
           Hall_calendar upd_obj = new Hall_calendar();
           for(Iterator it=q.iterate();it.hasNext();)
           {   

             Object[] row = (Object[]) it.next();
             System.out.println("row[0]: "+(String)row[0]);
             upd_obj= (Hall_calendar) session.load(Hall_calendar.class, (String)row[0]);

             upd_obj.setHall_availability("N"); 
             session.save(upd_obj); 
           }

           session.save(hbc);
           tx.commit();  
       }   
    }
   catch(Exception e)
   {
       tx.rollback();
       e.printStackTrace();
       return false;
   }
   finally
   {
       session.close();
   }
   return true;
}

query working: [com.cmc.sibs.vo.Hall_calendar@7e9bed, com.cmc.sibs.vo.Hall_calendar@4d2125, com.cmc.sibs.vo.Hall_calendar@1bb41d7, com.cmc.sibs.vo.Hall_calendar@df9252]
java.lang.ClassCastException: com.cmc.sibs.vo.Hall_calendar
    at com.cmc.sibs.dao.SibsDao.addHallCalendarBlock(SibsDao.java:21861)
    at com.cmc.sibs.delegates.SibsDelegate.addHallCalendarBlock(SibsDelegate.java:2982)
    at com.cmc.sibs.servlets.AddHallBlocking.doPost(AddHallBlocking.java:86)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source)
boolean in servlet: false 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T17:27:33.683

首先，您违反了所有 Java 代码标准。您基本上是在用 Java 编写 c++ 代码。其次，我不明白您为什么要以这种方式进行迭代。当您在没有选择子句的查询上执行 query.list() 时，您将获得完整的对象。为什么不这样做：

```
final List<Hall_calendar> res = (List<Hall_calendar>) q.list();
for (final Hall_calendar hall_calendar : res) {
    hall_calendar.setHall_availability("N");
    //no need to explicitly save these..
}
session.save(hbc); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T18:41:37.350

您使用“查询”接口，它没有 iterator() 方法。使用 list() 方法将一个列表存储查询结果带到该列表，您可以按以下方式创建一个 for 循环。

```
for(class_name object : list_name)
{
//Performed action using object
} 
```

# php - jquery函数停止在php中添加数字

> ID：12448895
> 
> 赞同：0
> 
> 时间：2012-09-16T17:08:03.360
> 
> 标签：php, jquery

我在下面有一段代码，它确定用户正在进行的评估以及用户当前正在进行的评估编号：

```
 <?php echo $sessionMinus ?> OF <?php echo $_SESSION['initial_count'] ?> 
```

因此，在浏览器上，这可以读取例如：

```
1 OF 4 
```

现在下面我有一个提交按钮：

```
<input id="addQuestionBtn" name="addQuestion" type="button" value="Add Question" onClick="insertQuestion(this.form)" /> 
```

现在，如果用户单击该按钮，它将显示一个确认框，如果用户单击“确定”进行确认，那么它将提交页面，假设发生的情况是它会在评估中添加一个数字以表明用户正在进行下一次评估。

例如：

如果页面上这样说：

```
1 OF 4 
```

如果用户提交页面并确认，那么它现在应该这样说：

```
2 OF 4 
```

这是因为用户现在正在进行下一次评估。

但问题是当用户提交页面时它根本没有添加数字。它只是停留在'1'并且不加起来。因此，不是执行上述操作，而是执行以下操作：

如果页面上这样说：

```
1 OF 4 
```

如果用户提交页面并确认，那么它仍然会说：

```
1 OF 4 
```

这显然是不正确的。

我已经测试了我的代码，我发现如果有 jquery`validation()`导致数字不加起来并保持在“1”。但我的问题是，这个 jquery 函数怎么会导致这种情况发生？

下面是jquery`validation()`函数：

```
function validation() {

    var _qid = "";
    var _msg = "";

    var alertValidation = "";
    // Note, this is just so it's declared...
    $("tr.optionAndAnswer").each(function() {

        });

    if (alertValidation != "") {
        alert(_msg + alertValidation);
        return false;
    }

    return true;

} 
```

以下是相关代码，因此您知道代码是什么：

```
 <?php

    session_start();

    if(isset($_POST['sessionNum'])){
                //Declare my counter for the first time

                $_SESSION['initial_count'] = $_POST['sessionNum'];
                $_SESSION['sessionNum'] = intval($_POST['sessionNum']);
                $_SESSION['sessionCount'] = 1;

        }

    elseif (isset($_POST['submitDetails']) && $_SESSION['sessionCount'] < $_SESSION['sessionNum']) {
        $_SESSION['sessionCount']++;
    }

    $sessionMinus =  $_SESSION['sessionCount'];

    if ($sessionMinus == $_SESSION['initial_count']){ 

        $action = 'create_session2.php'; 

    }elseif($sessionMinus != $_SESSION['initial_count']){ 

        $action = $_SERVER['PHP_SELF']; 

    }

    ?>

    <script type="text/javascript">

    function validation() {

        var _qid = "";
        var _msg = "";

        var alertValidation = "";
        // Note, this is just so it's declared...
        $("tr.optionAndAnswer").each(function() {

            });

        if (alertValidation != "") {
            alert(_msg + alertValidation);
            return false;
        }

        return true;

    }

                 function showConfirm(){

             var confirmMsg=confirm("Make sure that your details are correct, once you proceed after this stage you would not be able to go back and change any details towards Questions, Options and Answers for your Session." + "\n" + "\n" + "Are you sure you want to Proceed?" + "\n" );

             if (confirmMsg==true)
             {
             submitform();   
         }
    }

             function submitform()
    {
        var fieldvalue = $("#QandA").val();
        $.post("insertQuestion.php", $("#QandA").serialize() ,function(data){
            var QandAO = document.getElementById("QandA");
            QandAO.submit();
        });  
        alert("Your Details for this Session has been submitted"); 
    }

    </script>

    </head>

    <body>

    <form id="QandA" action="<?php echo htmlentities($action); ?>" method="post">

    <h1><?php echo $sessionMinus ?> OF <?php echo $_SESSION['initial_count'] ?></h1>

    <div id="detailsBlock">

<table id="questionBtn" align="center">
<tr>
<th>
<input id="addQuestionBtn" name="addQuestion" type="button" value="Add Question" onClick="insertQuestion(this.form)" />
</th>
</tr>
</table>

</div>
<hr/>

<div id="details">
<table id="qandatbl" align="center">
<thead>
<tr>
    <th class="question">Question</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
</div>

    <p><input id="submitBtn" name="submitDetails" type="submit" value="Submit Details" onClick="myClickHandler(); return false;" /></p>

    </form>

             <script type="text/javascript">

    function myClickHandler(){
         if(validation()){
                    showConfirm();
         }
    }

    </script> 
```

更新：

下面是 insertQuestion() 函数中的代码：

```
function insertQuestion(form) {   

    var $tbody = $('#qandatbl > tbody'); 
    var $tr = $("<tr class='optionAndAnswer' align='center'>");
    var $image = $("<td class='image'></td>"); 

var $fileImage = $("<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='return imageClickHandler(this);' class='imageuploadform' >" + 
    "<p class='imagef1_upload_process' align='center'>Loading...<br/><img src='Images/loader.gif' /><br/></p><p class='imagef1_upload_form' align='center'><br/><label>" + 
    "Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/><br/><label class='imagelbl'>" + 
    "<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>" + 
    "<iframe class='upload_target' name='upload_target' src='#' style='width:0;height:0;border:0px;solid;#fff;'></iframe></form>");     

    $image.append($fileImage);

    $tr.append($image);  
    $tbody.append($tr); 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-23T03:53:22.340

我想你想检查 sessionCount 是否未设置（！isset）。尝试像这样调整您的代码：

```
if(!isset($_POST['sessionCount'])){
            //Declare my counter for the first time

            $_SESSION['initial_count'] = $_POST['sessionNum'];
            $_SESSION['sessionNum'] = intval($_POST['sessionNum']);
            $_SESSION['sessionCount'] = 1;

    }

elseif (isset($_POST['submitDetails']) && $_SESSION['sessionCount'] < $_SESSION['sessionNum']) {
    $_SESSION['sessionCount']++;
} 
```

# c# - 设备上的双值不正确

> ID：12448900
> 
> 赞同：0
> 
> 时间：2012-09-16T17:08:25.120
> 
> 标签：c#, string, windows-phone-7, double

```
int min = Int32.Parse(minutebox.Text);
double kj = Convert.ToDouble(a.kj);
double res = ((kj * op.koerpergewicht) * min);
textbox.Text = res.ToString(); 
```

在我的英语 WP7-Emulator 上显示正确的数字（标点符号 -> 即 2.33）。但是它不适用于我设置为德语的设备。

该值是正确的，但该双精度值中的点、逗号或其他内容未显示正确。

模拟器上的 43.22 -> 设备上的 4322

这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T17:13:11.110

> 但是它不适用于我设置为德语的设备。

默认情况下它将使用德语符号。如果您想始终使用“。” 作为小数点，您应该考虑指定用于解析和潜在格式化的不变文化。

在不知道是什么的情况下很难更正您的代码`kj`，但我建议使用

```
double value = double.Parse(text, CultureInfo.InvariantCulture);
// Do calculation...
textBox.Text = result.ToString(CultureInfo.InvariantCulture); 
```

你真的*确定*要覆盖设备的文化吗？对我来说，这听起来不是一个好主意。当然，如果您从其他地方获取文本，您可能希望使用不变的文化对其进行*解析*，但仍将其格式化为设备默认文化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T21:34:44.803

好吧，我更进一步：

首先，我解析了我所有的字符串都像这样加倍

```
op.mydouble = Double.Parse(rawkg,CultureInfo.InvariantCulture); 
```

InvariantCulture 部分非常重要。

我剩下的计算是这样的：

```
 double res = 0; double reskcal = 0;
                double reskj;

                    res = ((kj * op.koerpergewicht) * min);
                    reskj = Convert.ToDouble(res, CultureInfo.InvariantCulture);
                    reskcal = Convert.ToDouble((res * 0.239), CultureInfo.InvariantCulture); 
```

现在的问题是，reskcal 正在返回我：

```
11,317845 
```

Math.Round(11,317845,2) 没有帮助。

# perl - 如何为 Zend 启用 cgi-bin 目录

> ID：12448910
> 
> 赞同：1
> 
> 时间：2012-09-16T17:09:18.213
> 
> 标签：perl, zend-framework

我有一些遗留的 perl 脚本（是的，它们是用 perl 完成的 HTML），我想 iframe 到我的 Zend 应用程序中。我的偏好是在 /application 下有一个 /cgi-bin 目录来保存 perl 脚本。如何配置 Zend 以允许访问该目录？为了安全起见，它需要关闭 doc-root，但我想从 javascript 访问它。如果 javascript 是错误的方式，我如何使用 .pl 文件（如 php 模块）将其加载到 iframe 或 div 中？

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:51:56.547

不可能使用 Zend 框架来服务 perl 脚本，脚本将使用 PHP 引擎而不是 Perl 引擎执行。

您需要设置 Http Server 以专门为该脚本提供服务。

在 Apache 中，您可以使用[`ScriptAlias`](http://httpd.apache.org/docs/2.2/mod/mod_alias.html#scriptalias)

# php - Laravel 的 Apache Mod 重写

> ID：12448912
> 
> 赞同：13
> 
> 时间：2012-09-16T17:09:24.140
> 
> 标签：php, apache, laravel

我在 Wampserver 上安装了 Laravel。目录如下：

C:\wamp\www\laravel

现在 URL 是这样的：

`http://localhost/laravel/public/index.php/home/index`

所以我使用了以下htaccess代码

```
Options +FollowSymLinks
Options -indexes
DirectoryIndex index.PHP
RewriteEngine on
RewriteCond $1 !^(index\.PHP|images|robots.txt)
RewriteCond %{REQUEST_ FILENAME} !-f
RewriteCond %{REQUEST_ FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L, QSA] 
```

将 URL 缩减为

`http://localhost/laravel/public/home/index`

但是 laravel 框架坚持所有应用程序文件都驻留在 public 文件夹中。

所以我想知道我需要在 htaccess 文件中添加（或减去）什么，以便 URL 看起来像

`http://localhost/laravel/home/index`

谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-19T00:50:33.807

在本地测试时，我会做两件事之一。

1.  使用以下内容在公共目录下创建一个新的 .htaccess。

    ```
    <IfModule mod_rewrite.c>
        RewriteEngine on

        RewriteRule ^(.*)$ public/$1 [L]
    </IfModule> 
    ```

2.  创建一个新的虚拟主机。使用 WAMP，您可以导航`C:\wamp\bin\apache\YOUR APACHE VERSION\conf\extra`并找到您的`httpd-vhosts.conf`文件，在那里您可以看到示例虚拟主机。这是我的一个：

    ```
    <VirtualHost *:80>
        DocumentRoot "c:/wamp/www/laravel/public"
        ServerName laravel.dev
        ServerAlias www.laravel.dev
    </VirtualHost> 
    ```

    确保包含您的 vhosts 配置文件。打开您的`httpd.conf`文件并搜索该`vhosts`文件，如果它被注释掉，请取消注释包含行。然后我打开 CLI 并输入`notepad "C:\windows\system32\drivers\etc\hosts"`打开你的主机文件。在提到`localhost`您的新主机的项目下方。这是一个例子。

    ```
    127.0.0.1  laravel.dev 
    ```

    确保您重新启动 Apache 和宾果游戏，您应该能够导航到`http://laravel.dev`并且您不会有任何烦人的公共目录。这就是我实现它的方式，因为我更喜欢看起来更好看的虚拟主机，而不是冗长的`localhost`URL。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T18:03:33.087

我终于想出了一个办法。首先，我必须通过从 Wamp Aestran 托盘菜单中选择它来打开和编辑我的 Apache httpd.conf。我不得不取消注释该行

`#Include conf/extra/httpd-vhosts.conf`

之后，我打开了位于

`<wampdirectory>/bin/apache/apache.x.y.z/conf/extra/httpd-vhosts.conf`

然后我添加了以下几行。

```
#
# Use name-based virtual hosting.
#
NameVirtualHost *:80

<VirtualHost *:80>
    DocumentRoot "C:/wamp/www"
    ServerName localhost
    Options Indexes FollowSymLinks
    <Directory "C:/wamp/www">
        AllowOverride All
        Order Deny,Allow
        Deny from all
        Allow from 127.0.0.1
        #If you want to allow access from your internal network
        # For specific ip addresses add one line per ip address
        #Allow from 192.168.0.100
        # For every ip in the subnet, just use the first 3 numbers of the subnet
        #Allow from 192.168.0
    </Directory>
</VirtualHost>

## must be first so the the wamp menu page loads when you use just localhost as the domain name

<VirtualHost *:80>
    DocumentRoot "C:/wamp/sites/laravel/public"
    ServerName laravel.dev
    Options Indexes FollowSymLinks
    <Directory "C:/wamp/sites/laravel/public">
        AllowOverride All
        Order Deny,Allow
        Deny from all
        Allow from 127.0.0.1
        #If you want to allow access from your internal network
        # For specific ip addresses add one line per ip address
        #Allow from 192.168.0.100
        # For every ip in the subnet, just use the first 3 numbers of the subnet
        #Allow from 192.168.0
    </Directory>
</VirtualHost> 
```

下一步是在 C:\windows\system32\drivers\etc 编辑我的主机文件

并添加

`127.0.0.1 laravel.dev`

然后重新启动 Wamp，它工作。感谢你们为我指明正确的方向。真的很欣赏

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T23:42:04.743

我在本地开发环境中进行这项工作的最简单方法是执行以下操作：

（假设您在 C:\WAMP 中安装了 WAMP）

创建以下文件夹：

```
c:\wamp\www\laravel 
```

下载 laravel 并将内容放在上面的目录中。如果您可以浏览到 hxxp://localhost/laravel/public 并获得打开屏幕，您将知道您做对了。然而，这还不够好。我们想通过去获得那个屏幕`http://localhost/laravel`

那么我们执行以下操作：

创建一个包含以下内容的文本文件：

```
Alias /laravel "c:/wamp/www/laravel/public" 

<Directory "c:/wamp/www/laravel/public">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride all
    Allow from all
</Directory> 
```

将此文件另存为`laravel.conf`c:\wamp\alias 目录。

最后，重新启动您的 wampserver。

您现在应该可以上网了`http://localhost/laravel`

请注意，以上内容仅适用于本地开发环境。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T17:20:03.920

你最终会得到你的代码和你的公用文件夹驻留在同一个地方，这是大多数人不推荐的。我建议您利用本地网络服务器。

为什么不`mysite.dev`指向`laravel/public`目录，这样你就可以`http://mysite.dev`每次都使用，你也有更干净和更短的 URL？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T14:52:10.053

作为 WAMP 和 Laravel 的新手，我有点挣扎，但确实让虚拟主机在我的 WIN7PRO 64 位机器上工作。在文件末尾的 WAMPSERVER/Apache/hppd.conf 中，我添加了：

```
NameVirtualHost *:80

<VirtualHost *:80>
 DocumentRoot C:/webapp/public
 ServerName webapp
 <Directory C:/webapp/public >
   Options Indexes FollowSymLinks MultiViews
   AllowOverride all
   Order Deny,Allow
   Allow from All
 </Directory> 
</VirtualHost> 

<VirtualHost *:80>
 DocumentRoot C:/wamp/www
 ServerName localhost
</VirtualHost> 
```

我补充说：

127.0.0.1 网络应用

到主机文件。（正如网上许多帖子所暗示的那样，我从未成功编辑过 vhosts 文件。）

这些更改允许我通过浏览器访问我的 Laravel 测试应用程序

```
http://webapp
(and also, via just http://127.0.0.1) 
```

并且，通过以下方式访问我的所有其他网站：

```
http://localhost/devsite/whatever.. 
```

# php - php exec tesseract 输出空数组

> ID：12448915
> 
> 赞同：2
> 
> 时间：2012-09-16T17:09:31.787
> 
> 标签：php, exec, tesseract

我在 Windows 7 上安装了 tesseract v3.01。我将 tesseract 路径添加到环境变量中。在 cmd 窗口中键入此命令后，我获得了正确的输出：“tesseract test.tif test”。

当我尝试使用以下脚本在 php 中获得相同的结果时，我得到一个空数组并且没有生成文件：

```
<?php

try {
    exec("tesseract.exe test.tif test", $msg);
    var_export($msg);
} catch (Exception $e) {
    echo $e;
}

?> 
```

有什么线索吗？

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T05:27:05.933

```
<?php

try {
    $msg = array(); // TRY THIS 
    exec("tesseract.exe test.tif test", $msg);
    var_export($msg);
} catch (Exception $e) {
    echo $e;
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T15:22:22.070

为什么不尝试指定 tesseract 的完整路径？

不知道如何在 Windows 上执行此操作，但在 mac 终端上，我输入`which tesseract`它会找到 tesseract 的完整路径。然后，您可以输入该完整路径，在我的例子中`/usr/local/bin/tesseract`输入 exec 命令。

```
try {
    $msg = array();
    exec("/usr/local/bin/tesseract test.tif test", $msg);
    var_export($msg);
} catch (Exception $e) {
    echo $e;
} 
```

# java - 正则表达式电子邮件地址验证

> ID：12448918
> 
> 赞同：0
> 
> 时间：2012-09-16T17:10:06.013
> 
> 标签：java, regex, email

**有人可以向我解释这个 java Regex 吗？**

```
^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+(?:[A-Z]{2}|com|org|net|gov|mil|biz|info|mobi|name|in|aero|jobs|museum)$ 
```

此正则表达式用于验证**电子邮件地址**。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-16T17:25:39.727

验证电子邮件地址现在被认为是不好的做法（[停止使用 regex 验证电子邮件地址](http://davidcelis.com/blog/2012/09/06/stop-validating-email-addresses-with-regex/)），尤其是在您的问题中使用这样的表达式。例如这里有一个[更完整的表达式](http://www.ex-parrot.com/pdw/Mail-RFC822-Address.html)。

至于这个表达式，让我们把它分成几部分：

匹配字符串的开头

```
^ 
```

匹配列表中的至少一个字符

```
[a-z0-9!#$%&'*+/=?^_`{|}~-]+ 
```

可以重复 0..n 次的非捕获（[参见反向引用](http://www.regular-expressions.info/brackets.html)`.`）组，匹配 a和列表中的至少一个字符。

```
(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)* 
```

就这个角色

```
@ 
```

非捕获组匹配此列表中的一个字符`[a-z0-9]`，然后可能匹配以下列表中的更多字符。匹配的字符串必须以 [a-z0-9] 开头和结尾，并且其中可以有 [a-z0-9-]。

```
(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+ 
```

匹配 2 个大写字母或其中一个单词的非捕获组。

```
(?:[A-Z]{2}|com|org|net|gov|mil|biz|info|mobi|name|in|aero|jobs|museum) 
```

字符串的结尾。

```
$ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T17:25:09.527

```
^                                       # Beginning of the line
[a-z0-9!#$%&'*+/=?^_`{|}~-]+            # One or more (+) characters from the 
                                        bracket expression, i.e., letters [a-z],
                                        numbers [0-9], !, $, %, et cetera
(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*    # Zero or more (*) of the above
                                        expression, preceded by a dot \\.
@                                       # Literal @
(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+ # A digit or a letter, followed by 
                                        optional digits, letters, or dashes, 
                                        followed by a a dot
(?:[A-Z]{2}|com|org|net...)             # Country code ([A-Z]{2}), or a top level
                                        domain, such as com, org, net.
$                                       # End of the line 
```

用一个具体的例子，`john@foo.com`。电子邮件的第一部分`john`, 将由 匹配`^[a-z0-9!#$%&'*+/=?^_{|}~-]+`。将`@`匹配，嗯，`@`。域`foo`以及点由 匹配`(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+`。最后，TLD`com`通过alternation 匹配`(?:[A-Z]{2}|com|org|net|gov|mil|biz|info|mobi|name|in|aero|jobs|museum)`。

# python - 生成所需长度的所有字符串

> ID：12448920
> 
> 赞同：2
> 
> 时间：2012-09-16T17:10:21.173
> 
> 标签：python, python-3.x, python-2.7

我想生成长度从 1 到 max_length 的所有随机字符串。python中是否有内置函数可以做到这一点？如果没有，请告诉我如何执行此操作或将我引导至涵盖此类问题的帖子。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T17:15:48.767

随机字符串：

```
import random
def get_random_string(alphabet, slen):
    return ''.join(random.choice(alphabet) for _ in xrange(slen))

print get_random_string('0123456789', 5) # prints e.g. 62247 
```

所有字符串按字典顺序排列（感谢@DSM 提醒我`itertools`）：

```
import itertools
def gen_all_strings(alphabet, slen):
    it = itertools.product(alphabet, repeat=slen)
    return (''.join(s) for s in it)

print list(gen_all_strings('abc', 2)) # prints ['aa', 'ab', 'ac', 'ba', 'bb', 'bc', 'ca', 'cb', 'cc'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T17:18:03.663

你可以使用`random.sample()`：

```
In [28]: from string import ascii_lowercase as asl

In [29]: import random

In [30]: max_length=10

In [31]: for x in xrange(1,max_length+1):
   ....:     ''.join(random.sample(asl,x))
   ....:     
   ....:     
Out[31]: 'k'
Out[31]: 'jy'
Out[31]: 'ldo'
Out[31]: 'ivlr'
Out[31]: 'gqelt'
Out[31]: 'gbvnqw'
Out[31]: 'baestog'
Out[31]: 'kyijhmvn'
Out[31]: 'toshxklwb'
Out[31]: 'wihtmouexg' 
```

# iphone - 在创建/删除大量新的核心数据项时如何避免内存不足？

> ID：12448921
> 
> 赞同：-1
> 
> 时间：2012-09-16T17:10:39.983
> 
> 标签：iphone, objective-c, ios, core-data, memory-management

> **可能重复：**
> [在对每个核心数据项执行任务时，如何避免内存不足？](https://stackoverflow.com/questions/12448545/how-do-i-avoid-running-out-of-memory-when-performing-a-task-on-every-item-of-cor)

我发布了[这个](https://stackoverflow.com/questions/12448545/how-do-i-avoid-running-out-of-memory-when-performing-a-task-on-every-item-of-cor)，它有一个类似的标题，但是是另一回事。我单独发布了这个，以避免在同一个问题中提出 2 个问题时造成混淆。

我想做的是将大量数据添加到核心数据存储中而不会耗尽内存。这是我目前拥有的代码：

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Entry"];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(version == %@)", @"1.0"];

[request setPredicate:predicate];

NSArray *results = [[AppDelegate applicationDelegate].managedObjectContext executeFetchRequest:request error:nil];

int i = 0;

while (i < results.count) {

    Entry *entry = [results objectAtIndex:i];

    entry.version = @"1.1";

    Entry *entry = [NSEntityDescription insertNewObjectForEntityForName:@"Entry"
                                             inManagedObjectContext:[AppDelegate applicationDelegate].managedObjectContext];

    entry.version = existingEntry.version;

    [[AppDelegate applicationDelegate].managedObjectContext deleteObject:entry];

    i++;
} 
```

但这在经过一定数量的数据后会耗尽内存。如果我只取第一个“结果”并且不遍历整个数组，也会发生这种情况，因此内存不足似乎不是遍历结果的结果。

我怎样才能做到这一点而不会耗尽内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T17:26:58.367

假设您的计数是 1000 - 一个很大的数字。把它分成一个更小的——比如 100。然后在大循环中，设置另一个计数器，并在较小的循环周围使用一个自动释放池，所以当你离开那个内部循环时会耗尽池。假设您没有对内部循环中的对象的强引用（但即使在这种情况下也可能有所帮助），这是可行的。

编辑：代码（未经测试或编译）

```
int total = results.count;
while (total) {
    int count = total < 100 ? total : 100;
    total -= count;

    @autoreleasepool {
        while(count--) {
                Entry *entry = [results objectAtIndex:i];

                entry.version = @"1.1";

                Entry *entry = [NSEntityDescription insertNewObjectForEntityForName:@"Entry"
                                                         inManagedObjectContext:[AppDelegate applicationDelegate].managedObjectContext];

                entry.version = existingEntry.version;

                [[AppDelegate applicationDelegate].managedObjectContext deleteObject:entry];

            }
        }
} 
```

# php - 为什么我在使用简单的数组函数时得到未定义的索引

> ID：12448929
> 
> 赞同：-1
> 
> 时间：2012-09-16T17:12:00.663
> 
> 标签：php, arrays, function, for-loop, cycle

这是我的示例数组：

```
$arrayy[0]=48.72;
$arrayy[1]=21.32;
$arrayy[2]=48.62;
$arrayy[3]=21.31;
$arrayy[4]=48.62;
$arrayy[5]=21.31; 
```

这个功能

```
function writeDouble($array){
        for($curr = 0; $curr<count($array)-1; $curr++){
            echo $array[$curr]." - ";
            echo $array[$curr+1]."<br>";
            $curr++;
    }
} 
```

应该写一对 (0-1 , 2-3 , 4-5) - 输出如下：

```
48.72 - 21.32
48.62 - 21.31
48.62 - 21.31 
```

我做错了什么，为什么会出现错误？

```
Notice: Undefined offset: 6 in C:\xampp\htdocs\xampp\lg\functions.php on line 466 
```

或者你能定义一个更好的函数来结对吗？想不出来了。。。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T17:15:38.243

因为在最后一次迭代中，`echo $array[$curr+1]."<br>";`您将寻找`$array[count($array)]`未定义的程序！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T17:24:06.873

1.  您正在使用`$array[$curr + 1]`，但您正在从`0`to迭代`$curr - 1`。如果`isset`数组中有奇数个值，则需要一个。

2.  您增加了 2 次（一次在您的范围内，一次在您`for`的范围内`for`）。

代码解决方案：

```
$arrayy[0]=48.72;
$arrayy[1]=21.32;
$arrayy[2]=48.62;
$arrayy[3]=21.31;
$arrayy[4]=48.62;
$arrayy[5]=21.31;    

function writeDouble($array) {
        for ($curr = 0; $curr < (count($array) - 1); $curr += 2) {
            echo $array[$curr] . " - ";
            if (isset($array[$curr + 1])) {
              echo $array[$curr + 1];
            }
            echo "<br>";
    }
}

writeDouble($arrayy); 
```

输出：

```
48.72 - 21.32
48.62 - 21.31
48.62 - 21.31 
```

没有更多的警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T17:24:44.257

请注意，您将 $curr 增加两次：

```
for($curr = 0; $curr<count($array)-1; $curr++){ 
```

和

```
$curr++ 
```

This is the reason for going out of range in your loop

# html - 内容不拉伸

> ID：12448932
> 
> 赞同：0
> 
> 时间：2012-09-16T17:12:33.643
> 
> 标签：html, css, footer, stretch

我最近一直在尝试让我的页脚附加到页面底部并让我的中间内容伸展，这样无论以何种分辨率查看网站，页脚都会正确放置。

自从我上次在这个网站上编辑以来已经有一段时间了，我已经忘记了我为保持布局最大化所做的大部分事情，现在我注意到另一个错误:(

我的内容现在不会拉伸，所以如果我在我的内容区域中放置一些文本，它将在页脚后面并拉伸到底部，没有 bg 图像..

你们中的一些人能告诉我是什么导致了这个问题吗？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:19:31.393

您可以做一些事情来改善这一点。我看到你的页脚是 position: relative; 不太明白为什么......我认为应该是 position: absolute; 和底部：0px；所以它应该固定在底部。让你的页脚位置：固定；这不是一个好主意。

您网站的内容应该有一个与页脚高度相等的底部填充，这将为您提供足够的页脚空间，并且不会让任何内容低于页脚。

如果您理解我试图解释的内容，请告诉我，祝您的项目好运！

# ruby-on-rails - Rails如何选择属性

> ID：12448935
> 
> 赞同：0
> 
> 时间：2012-09-16T17:12:43.563
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

在我的控制器中，我有：

```
def search
  @kategoris = Kampagner.where("titel like ?", "%#{params[:q]}%")
  @kate = []
  @kategoris.each do |kat|
    h = {}
    kat.attributes.each{|k,v| h[k] = v.respond_to?(:force_encoding) ? v.dup.force_encoding("UTF-8") : v }
    @kate << h
  end
  respond_to do |format|
  format.html
  format.json { render :json => @kate }
  end
end 
```

但问题在于模型的所有属性都在 JSON 数据中。我只有 JSON 数据中的属性 ID 和标题。我该如何选择这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T17:15:25.563

我会做：

```
@kategoris.each do |kat|
  @kate << kat.sanitized_whitelist
end 
```

在模型中：

```
WHITE_LIST_ATTRS = [:id, :title]

def whitelist
  WHITE_LIST_ATTRS.each_with_object({}) {|attr, hash| hash[attr] = send(attr) }
end 
```

或考虑一些专用方法：

```
def sanitized_whitelist 
  WHITE_LIST_ATTRS.each_with_object({}) {|attr,hash| hash[attr] = send(attr).respond_to?(:force_encoding) ? send(attr).dup.force_encoding("UTF-8") : send(attr) }
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T17:24:44.407

我不太清楚你为什么要使用 force_encoding。但是您可以简单地调用：

```
format.json { render :json => @kategoris } 
```

Rails 会在后台调用 as_json 方法。然后在 Kampagner 类中，您可以自定义 as_json 类来控制将记录导出为 JSON 时将公开的内容：

```
class Kampagner
  def as_json(options={})
    super(options.merge({ :only => [:id, :title]})
  end
end 
```

查看更多：[http ://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html](http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html)

# java - Scala 2.9.2 无法处理 String 类的重载格式方法 - 为什么？

> ID：12448937
> 
> 赞同：1
> 
> 时间：2012-09-16T17:12:51.207
> 
> 标签：java, scala, overloading

例子：

```
scala> String.format("%d", 2)
<console>:8: error: overloaded method value format with alternatives:
  (java.util.Locale,java.lang.String,<repeated...>[java.lang.Object])java.lang.String <and>
  (java.lang.String,<repeated...>[java.lang.Object])java.lang.String
 cannot be applied to (java.lang.String, Int)
              String.format("%d", 2)
                     ^ 
```

为什么Scala不能处理类的重载`format`方法`String`？

使用：Windows 7 64 位上的 Scala 2.9.2。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-16T17:15:52.287

改用这个：

```
"%d".format(2) 
```

该`String.format`方法是 Java 的东西，所以它期望输入参数是`java.lang.Object`. 斯卡拉`Int`不是`java.lang.Object`：

```
scala> val i: java.lang.Object = 2
<console>:7: error: type mismatch;
 found   : Int(2)
 required: java.lang.Object
Note: an implicit exists from scala.Int => java.lang.Integer, but
methods inherited from Object are rendered ambiguous.  This is to avoid
a blanket implicit which would convert any scala.Int to any AnyRef.
You may wish to use a type ascription: `x: java.lang.Integer`.
       val i: java.lang.Object = 2
                                 ^ 
```

要了解有关此的更多信息，您应该阅读 Scala 在`AnyVal`和`AnyRef`类型之间的区别。为了提高效率， Java 区分了对象（like `Integer`）和基元（like `int`）。Scala 也有类似的区别。所有类型都扩展自`Any`，但“值类型”（基本上对应于原语）扩展自`AnyVal`，其他一切都扩展自`AnyRef`（基本上`java.lang.Object`）。[在这里](http://www.scala-lang.org/node/128)阅读更多。

所以，要使用`String.format`你必须用 Java 替换它`Integer`，这是一个`Object`：

```
String.format("%d", new java.lang.Integer(2)) 
```

但不要这样做；如上所述，只需以 Scala 方式使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T18:33:04.910

第一个重载定义无法匹配，因为第一个参数是`Locale`，而您提供了一个字符串。

第二种选择无法匹配，因为第二个参数是 的 vararg 参数`Object`，但您提供了`Int`. `Int`不是（在 Scala中`Object`调用）的子类型。`AnyRef`Java 通过自动装箱“修复”它，但在 Scala 类型系统中没有从原始类型自动转换`Int`为`java.lang.Integer`.

如果 Java 定义是通用的，比如`format[T](f: String, args: T*)`，Scala 将允许您调用，因为 Scala 中的无界类型参数也涵盖原始类型。

# c - C中的象限查询给出分段错误

> ID：12448942
> 
> 赞同：0
> 
> 时间：2012-09-16T17:13:12.080
> 
> 标签：c, segmentation-fault

对于这个问题，请访问[问题](https://www.interviewstreet.com/challenges/dashboard/#problem/4e48b9cb8917f) 我已经使用延迟传播的分段树几乎解决了 Interviewstreet 的这个象限查询问题，但是我遇到了分段错误。所以我需要有人来审查我的代码并帮助我。

这是我的代码

```
#include<stdio.h>

struct node {
int count[4],min,max,quadrant;
};

int count[4]={0};

void set_maxmin(struct node nodes[],int n,int index,int min,int max){
int mid=(min+max)/2;
nodes[index].min=min;
nodes[index].max=max;
nodes[index].count[0]=0;
nodes[index].count[1]=0;
nodes[index].count[2]=0;
nodes[index].count[3]=0;
if(max==min+1){
    set_maxmin(nodes,n,2*index+1,min,min);
    set_maxmin(nodes,n,2*index+2,max,max);
} else if(max>min+1){
    set_maxmin(nodes,n,2*index+1,min,mid);
    set_maxmin(nodes,n,2*index+2,mid+1,max);
}
}

void tree_insert(struct node nodes[],int n,int index,int quad){
int i=0;
while(1){
    if(index<(nodes[i].max+nodes[i].min)/2){
        if(2*i+1<n) i=2*i+1;
        else break;
    } else if(index>(nodes[i].max+nodes[i].min)/2){
        if(2*i+2<n) i=2*i+2;
        else break;
    } else if(index==nodes[i].max && index!=nodes[i].min)
        i=2*i+2;
    else if(index!=nodes[i].max && index==nodes[i].min)
        i=2*i+1;
    else if(index!=nodes[i].max && index!=nodes[i].min)
        i=2*i+1;
    else
        break;
}
nodes[i].quadrant=quad;

nodes[i].count[0]=0;
nodes[i].count[1]=0;
nodes[i].count[2]=0;
nodes[i].count[3]=0;
nodes[i].count[quad-1]++;
while(i!=0){
    i=(i-1)/2;
    nodes[i].count[quad-1]++;
}
}

void change_x(struct node nodes[],int n,int index){
int i=0,quad;
while(1){
    if(index<(nodes[i].max+nodes[i].min)/2){
        if(2*i+1<n) i=2*i+1;
        else break;
    } else if(index>(nodes[i].max+nodes[i].min)/2){
        if(2*i+2<n) i=2*i+2;
        else break;
    } else if(index==nodes[i].max && index!=nodes[i].min)
        i=2*i+2;
    else if(index!=nodes[i].max && index==nodes[i].min)
        i=2*i+1;
    else if(index!=nodes[i].max && index!=nodes[i].min)
        i=2*i+1;
    else
        break;
}
quad=nodes[i].quadrant;
nodes[i].count[quad-1]--;
nodes[i].count[5-quad-1]++;
nodes[i].quadrant=5-nodes[i].quadrant;
while(i!=0){
    i=(i-1)/2;
    nodes[i].count[quad-1]--;
    nodes[i].count[5-quad-1]++;
}
}

void change_x_range(struct node nodes[],int n,int i,int j){
int k;
for(k=i;k<=j;k++)
    change_x(nodes,2*n-1,k);
}

void change_y(struct node nodes[],int n,int index){
int i=0,quad,quad2;
while(1){
    if(index<(nodes[i].max+nodes[i].min)/2){
        if(2*i+1<n) i=2*i+1;
        else break;
    } else if(index>(nodes[i].max+nodes[i].min)/2){
        if(2*i+2<n) i=2*i+2;
        else break;
    } else if(index==nodes[i].max && index!=nodes[i].min)
        i=2*i+2;
    else if(index!=nodes[i].max && index==nodes[i].min)
        i=2*i+1;
    else if(index!=nodes[i].max && index!=nodes[i].min)
        i=2*i+1;
    else
        break;
}
quad=nodes[i].quadrant;
nodes[i].count[quad-1]--;
if(quad==1 || quad==3)
    nodes[i].quadrant++;
else
    nodes[i].quadrant--;
quad2=nodes[i].quadrant;
nodes[i].count[quad2-1]++;
while(i!=0){
    i=(i-1)/2;
    nodes[i].count[quad-1]--;
    nodes[i].count[quad2-1]++;
}
}

void change_y_range(struct node nodes[],int n,int i,int j){
int k;
for(k=i;k<=j;k++)
    change_y(nodes,2*n-1,k);
}

int * count_nums(struct node nodes[],int n,int min,int max){
int i=0,*count1,*count2,*count3,k,mid;
while(1){
    mid=(nodes[i].min+nodes[i].max)/2;
    if(min==nodes[i].min && max==nodes[i].max){
        return nodes[i].count;
    } else if(min==nodes[i].min && max!=nodes[i].max){
        if(max>nodes[i].max){
            count1=nodes[i].count;
            count2=count_nums(nodes,n,nodes[i].max+1,max);
            for(k=0;k<4;k++)
                count[k]=count1[k]+count2[k];
            return count;
        } else if(2*i+1<n) i=2*i+1;
        else break;
    } else if(min!=nodes[i].min && max==nodes[i].max){
        if(min<nodes[i].min){
            count1=count_nums(nodes,n,min,nodes[i].min-1);
            count2=nodes[i].count;
            for(k=0;k<4;k++)
                count[k]=count1[k]+count2[k];
            return count;
        } else if(2*i+2<n) i=2*i+2;
        else break;
    } else if(min<=mid && max<=mid){
        if(2*i+1<n) i=2*i+1;
        else break;
    } else if(min>=mid && max>=mid){
        if(2*i+2<n) i=2*i+2;
        else break;
    } else {
        count1=count_nums(nodes,n,min,mid);
        count2=count_nums(nodes,n,mid+1,max);
        for(k=0;k<4;k++)
            count[k]=count1[k]+count2[k];
        return count;
    }
}
return count;
}

int main(){
int n,quadrant,x,y,i,q;
char k;
scanf("%d",&n);
struct node nodes[2*n-1];
set_maxmin(nodes,2*n+1,0,0,n-1);
for(i=0;i<n;i++){
    scanf("%d %d",&x,&y);
    if(x>0 && y>0)
        tree_insert(nodes,2*n+1,i,1);
    else if(x<0 && y>0)
        tree_insert(nodes,2*n+1,i,2);
    else if(x<0 && y<0)
        tree_insert(nodes,2*n+1,i,3);
    else
        tree_insert(nodes,2*n+1,i,4);
}
scanf("%d\n",&q);
for(i=0;i<q;i++){
    scanf("%c %d %d\n",&k,&x,&y);
    if(k=='C'){
        int *temp;
        temp=count_nums(nodes,2*n-1,x-1,y-1);
        printf("%d %d %d %d\n",temp[0],temp[1],temp[2],temp[3]);
    } else if(k=='X'){
        change_x_range(nodes,2*n-1,x-1,y-1);
    } else if(k=='Y'){
        change_y_range(nodes,2*n-1,x-1,y-1);
    }
}
return 0;
} 
```

在实现段树之前，我得到了 8/11 的测试用例。

有人请帮我解决这个问题

我想我会解释我的代码，这样你就不必努力理解它了

set_maxmin 设置所有节点的最大值和最小值 2*n-1 数量

Tree_insert 通过遍历插入一个元素，直到找到一个节点的 index=max=min (leaf o'course)

count_nums 返回提到的段的计数数组

change_x_range 反映沿 x 轴的选定范围并更新计数直到根

change_y_range 反映沿 y 轴的选定范围并更新计数直到根

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:03:51.513

我在您的代码中添加了一个函数：

```
#include <stdarg.h>
#include <stdlib.h>

static void err_exit(const char *fmt, ...)
{
    va_list args;
    va_start(args, fmt);
    vfprintf(stderr, fmt, args);
    va_end(args);
    exit(1);
} 
```

通过调整测试输入文件并使用相同的 4 点 10 次，我创建了一个 40 点而不是 4 点的新测试用例。我通过添加对输入操作的测试（`err_exit()`用于报告问题）来监控进度。

```
int main(void)
{
    int n,x,y,i,q;
    char k;
    if (scanf("%d",&n) != 1)
        err_exit("WTF? Failed to read number of points\n");
    printf("Points: %d\n", n);
    struct node nodes[2*n-1];
    set_maxmin(nodes,2*n+1,0,0,n-1);
    for(i=0;i<n;i++)
    {
        if (scanf("%d %d",&x,&y) != 2)
            err_exit("WTF? Failed to read point %d\n", i);
        printf("%d: %d %d\n", i, x, y);
        if(x>0 && y>0)
            tree_insert(nodes,2*n+1,i,1);
        else if(x<0 && y>0)
            tree_insert(nodes,2*n+1,i,2);
        else if(x<0 && y<0)
            tree_insert(nodes,2*n+1,i,3);
        else
            tree_insert(nodes,2*n+1,i,4);
    }
    if (scanf("%d\n",&q) != 1)
        err_exit("WTF? Failed to read number of queries\n", q);
    printf("Queries: %d\n", n);
    for(i=0;i<q;i++)
    {
        if (scanf("%c %d %d\n",&k,&x,&y) != 3)
            err_exit("WTF? Failed to read query %d\n", i);
        printf("%d: %c %d %d\n", i, k, x, y);
        if(k=='C')
        {
            int *temp;
            temp=count_nums(nodes,2*n-1,x-1,y-1);
            printf("%d %d %d %d\n",temp[0],temp[1],temp[2],temp[3]);
        }
        else if(k=='X')
            change_x_range(nodes,2*n-1,x-1,y-1);
        else if(k=='Y')
            change_y_range(nodes,2*n-1,x-1,y-1);
        else
            err_exit("WTF? %c?\n", k);
    }
    return 0;
} 
```

当我运行代码 ( `./tldr < input01.txt`) 时，它会产生：

```
Points: 40
0: 1 1
1: -1 1
2: -1 -1
3: 1 -1
4: 1 1
5: -1 1
6: -1 -1
7: 1 -1
8: 1 1
9: -1 1
10: -1 -1
Queries: 11
0: - 1 1
WTF? -? 
```

发生的事情是您超出了数组的边界`nodes`，并覆盖了变量`n`。

`2*n-1`您需要考虑为什么要使用节点数组。只需要`n`（或者可能`n + 1`是节点，因为问题中的索引是基于 1 的，而不是像 C 中那样基于 0）。

### 输入01.txt

```
40
1 1
-1 1
-1 -1
1 -1
1 1
-1 1
-1 -1
1 -1
1 1
-1 1
-1 -1
1 -1
1 1
-1 1
-1 -1
1 -1
1 1
-1 1
-1 -1
1 -1
1 1
-1 1
-1 -1
1 -1
1 1
-1 1
-1 -1
1 -1
1 1
-1 1
-1 -1
1 -1
1 1
-1 1
-1 -1
1 -1
1 1
-1 1
-1 -1
1 -1
5
C 1 4
X 2 4
C 3 4
Y 1 2
C 1 3 
```

# java - 使用 Timer 从另一个 JFrame 调用一个 JFrame 而无需任何按钮

> ID：12448947
> 
> 赞同：-1
> 
> 时间：2012-09-16T17:13:52.220
> 
> 标签：java, multithreading, swing, jframe

使用不带任何按钮的 Timer 从另一个 JFrame 调用一个 JFrame：时间减少，然后打开另一个不带任何按钮的 JFrame。请帮忙。在netbeans中使用

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-16T23:47:38.820

你的问题很不清楚，但[不建议](https://stackoverflow.com/a/9554657/230513)使用多帧。作为替代方案，请考虑一个无模式对话框，如下所示。对话框的封闭`JOptionPane`监听 a ，同时从使用`PropertyChangeEvent`倒计时。该按钮很方便，但不是*必需*的。`TIME_OUT``javax.swing.Timer``JOptionPane`

 *![在此处输入图像描述](../Images/6b2b0db14191a3410c9102eba7015048.png)

```
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowEvent;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.Timer;

/**
 * @see https://stackoverflow.com/a/12451673/230513
 */

public class JOptionTimeTest implements ActionListener, PropertyChangeListener {

    private static final int TIME_OUT = 10;
    private int count = TIME_OUT;
    private final Timer timer = new Timer(1000, this);
    private JDialog dialog = new JDialog();
    private final JOptionPane optPane = new JOptionPane();

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            public void run() {
                new JOptionTimeTest().createGUI();
            }
        });
    }

    private void createGUI() {
        JFrame frame = new JFrame("Title");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocationRelativeTo(null);
        timer.setCoalesce(false);
        optPane.setMessage(message());
        optPane.setMessageType(JOptionPane.INFORMATION_MESSAGE);
        optPane.setOptionType(JOptionPane.DEFAULT_OPTION);
        optPane.addPropertyChangeListener(this);
        dialog.add(optPane);
        dialog.pack();
        frame.add(new JLabel(frame.getTitle(), JLabel.CENTER));
        frame.pack();
        frame.setVisible(true);
        dialog.setLocationRelativeTo(frame);
        dialog.setVisible(true);
        timer.start();
    }

    public void propertyChange(PropertyChangeEvent e) {
        String prop = e.getPropertyName();
        if (JOptionPane.VALUE_PROPERTY.equals(prop)) {
            thatsAllFolks();
        }
    }

    public void actionPerformed(ActionEvent e) {
        count--;
        optPane.setMessage(message());
        if (count == 0) {
            thatsAllFolks();
        }
        timer.restart();
    }

    private String message() {
        return "Closing in " + count + " seconds.";
    }

    private void thatsAllFolks() {
        dialog.setVisible(false);
        dialog.dispatchEvent(new WindowEvent(
            dialog, WindowEvent.WINDOW_CLOSING));
    }
} 
```*

# html - 如何设置带边框的 100% 高度的 Div？

> ID：12448950
> 
> 赞同：4
> 
> 时间：2012-09-16T17:14:40.860
> 
> 标签：html, css

我想将页面分成两个“div”。左（25%）和右（75%）。我想要两者之间的边界，将它们分开。但除非我在“div”中输入文本/图像，否则它们不会扩展。

```
<div>
    <div class="left">
        <img src="granted_300_50.png" id="logo">
    </div>  
</div> 
```

而CSS是：

```
div.left{
    background-image: url("flower_ornament2_watermark.png") ;
    background-repeat: no-repeat;
    background-color:white;
    border-top: 0px;
    border-right: 2px solid #c3c3c3; 
    border-left: 0px;
    border-bottom: 0px;
    white-space: nowrap;
    height: 100%;
    width: 350px;
    margin: 0px;
    outline: 0px;
    padding: 0px;
    vertical-align: baseline;
} 
```

帮助？

迪格维杰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T17:20:14.933

`height`仅当**容器**也设置了特定高度时，以百分比设置内联元素才有效，直到`body`and `html`。

这个 CSS 应该可以工作：

```
html,body { height:100% ;}
div#container { height:100%; }
div.left { height:100%; } 
```

* * *

另一个常见的解决方法是所谓的“假列”方法：

*   [http://www.alistapart.com/articles/fauxcolumns/](http://www.alistapart.com/articles/fauxcolumns/)
*   [http://woorkup.com/2009/10/11/really-simple-css-trick-for-equal-height-columns/](http://woorkup.com/2009/10/11/really-simple-css-trick-for-equal-height-columns/)

* * *

您还可以`display:table;`用于容器和`display:table-cell;`浮动 div。但是IE7不支持。

```
div#container { display:table; }
div.left { display:table-cell; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T17:20:33.840

看看这个：

**CSS**

```
.left{
    width:25%;
    height:100px;
    border-right:1px solid #ccc;
}

.right{
    width:75%;
    height:100px;
    border-left:1px solid #ccc;
} 
```

**HTML**

```
<div class="left"></div>
<div class="right"></div>​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T17:37:14.907

除非您还在`body`和`html`节点上设置了高度，否则它们将折叠。您可以通过将它们设置为 100% 高度来解决此问题：

演示：http: [//jsfiddle.net/SO_AMK/Nhajy/](http://jsfiddle.net/SO_AMK/Nhajy/)

CSS：

```
html, body, div { height: 100%; }

div.left {
    background-image: url("flower_ornament2_watermark.png");
    background-repeat: no-repeat;
    background-color: white;
    border-top: 0px;
    border-right: 2px solid #c3c3c3; 
    border-left: 0px;
    border-bottom: 0px;
    white-space: nowrap;
    height: 100%;
    width: 350px;
    margin: 0px;
    outline: 0px;
    padding: 0px;
    vertical-align: baseline;
}​ 
```

另一种解决方案是设置一个`min-height`：

演示：http: [//jsfiddle.net/SO_AMK/MSLdT/](http://jsfiddle.net/SO_AMK/MSLdT/)

CSS：

```
div.left {
    background-repeat: no-repeat;
    background-color: white;
    border-top: 0px;
    border-right: 2px solid #c3c3c3; 
    border-left: 0px;
    border-bottom: 0px;
    white-space: nowrap;
    min-height: 100px;
    height: 100%;
    width: 350px;
    margin: 0px;
    outline: 0px;
    padding: 0px;
    vertical-align: baseline;
}​ 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-10-26T10:05:09.187

你可以使用类似的东西：

/ *css代码*/

```
height:calc(100%-2px);
border:1px solid black; 
```

# php - PHP：HTTP_Request2 给出零内容长度

> ID：12448952
> 
> 赞同：2
> 
> 时间：2012-09-16T17:15:07.957
> 
> 标签：php, curl, pear, http-request

我想使用 HTTP_Request2 Pear Class 发布。当我使用 cURL 做同样的事情时我是成功的，但是当我使用 HTTP_Request 时我没有得到响应数据。它说内容长度为 0。我阅读了 HTTP_Request2 的 PEAR 文档并按照它来编写代码。如果有人指出我的错误，那将有很大帮助。cURL 方法有效，但 HTTP_Request2 方法无效。我认为 HTTP_Request2 方法无法发布数据，但我也不确定标头。我的代码是

```
function header()
{
$this->setGuid(guid());
$this->header = array($this->service, 
time(), $this->getGuid());
return $this->header;
}

function header1()
{
$this->setGuid(guid());
$this->header = array('X-OpenSRF-service: '.$this->service, 
'X-OpenSRF-xid: '.time(), 'X-OpenSRF-thread: '.$this->getGuid());
return $this->header;
}
function toArray()
{
$url4 = urldata($this->method, $this->param);
return $url4; //returns an encoded url
}
function send1()
{
require_once 'HTTP/Request2.php';

//------cURL Method-------------------------
$endpoint = $this->endpoint;
$data = $this->toArray();
$header = $this->header1();
$url_post = 'http://'.$endpoint.'/osrf-http-translator';
$this->curl = curl_init();
curl_setopt($this->curl, CURLOPT_URL, $url_post);
curl_setopt($this->curl, CURLOPT_HEADER, 1);
curl_setopt($this->curl, CURLOPT_POST, 1);
curl_setopt($this->curl, CURLOPT_POSTFIELDS, $data);
curl_setopt($this->curl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($this->curl, CURLOPT_HTTPHEADER, $header);
$this->server_result = curl_exec($this->curl);
if (curl_error($this->curl) != 0 ) {
$error = 'Curl error: ' . curl_error($this->curl);
return $error;
}
var_dump ($this->server_result);
echo "<HR />";   

//-----HTTP_REQUEST2 Method---------------       
$request = new HTTP_Request2();
$request->setUrl($url_post);
$request->setHeader(array('X-OpenSRF-service' => $header[0], 'X-OpenSRF-xid' => $header[1], 'X-OpenSRF-thread' => $header[2]));
$request->setMethod(HTTP_Request2::METHOD_POST);
$request->addPostParameter($data);
var_dump ($request); echo "<HR />";
$response = $request->send(); var_dump($response);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:26:36.303

该[`HTTP_Request2::send()`](http://pear.php.net/package/HTTP_Request2/docs/latest/HTTP_Request2/HTTP_Request2.html#methodsend)方法的结果与`curl_exec`. 它不是字符串，而是另一种类型，即[`HTTP_Request2_Response`](http://pear.php.net/package/HTTP_Request2/docs/latest/HTTP_Request2/HTTP_Request2_Response.html).

要将响应正文作为字符串检索（HTTP 响应包含标头和正文），请使用以下[`HTTP_Request2_Response::getBody`](http://pear.php.net/package/HTTP_Request2/docs/latest/HTTP_Request2/HTTP_Request2_Response.html#methodgetBody)方法：

```
...
$response = $request->send();
$responseBody = $response->getBody(); 
```

这应该做你正在寻找的，`$responseBody`然后是一个字符串。更笼统地说：`HTTP_Request2`具有面向对象的接口。这允许使用不同的适配器（例如 Curl 和套接字，或者您甚至可以编写自己的适配器，例如用于测试）以及以流式方式检索响应主体（例如，对于大型响应，您不会将所有响应都放入单个一次串）。

# java - Java蜗牛线布局管理器

> ID：12448955
> 
> 赞同：0
> 
> 时间：2012-09-16T17:15:17.227
> 
> 标签：java, swing, layout, layout-manager, cyclic

我正在寻找一个 java 自定义布局管理器，它以类似于蜗牛的背线的方式排列几个数据（例如 jlabels）。

到目前为止，我一直在尝试使用我在互联网上找到的圆圈布局来定制它，但没有运气.. 有什么想法吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T11:52:40.473

您可以编写自己的布局。我从[Spirals](http://www.mathematische-basteleien.de/spiral.htm)得到的螺旋公式。它是阿基米德，而蜗牛更像是[费马螺旋](http://www.popmath.org.uk/rpamaths/rpampages/snail.html)，您可以更改`calculatePoint()`方法以返回不同的螺旋。

注意：这种布局效率有点低，因为它每次都重新计算所有组件的位置，而不是缓存它。

```
import java.awt.*;
import java.util.*;
import javax.swing.*;
import javax.swing.event.*;

public class SpiralLayout implements LayoutManager2 {

    private enum Size { MIN, MAX, PREF }

    private double radiusStep;
    private double angleStep;

    public SpiralLayout() {
        this(10, Math.toRadians(15.0));
    }

    public SpiralLayout(double radius, double stepSize) {
        this.radiusStep = radius;
        this.angleStep = stepSize;
    }

    public void setRadiusStep(double radiusStep) {
        this.radiusStep = radiusStep;
    }

    public void setAngleStep(double angleStep) {
        this.angleStep = angleStep;
    }

    @Override
    public void addLayoutComponent(String name, Component comp) {
        // calculated on the fly
    }

    @Override
    public void removeLayoutComponent(Component comp) {
        // calculated on the fly
    }

    @Override
    public Dimension preferredLayoutSize(Container parent) {
        return getSize(parent, Size.PREF);
    }

    private Dimension getSize(Container parent, Size size) {
        doLayoutContainer(parent, Short.MAX_VALUE, Short.MAX_VALUE, size);

        Point min = new Point(Integer.MAX_VALUE, Integer.MAX_VALUE);
        Point max = new Point(0, 0);
        for(Component component : parent.getComponents()) {
            Dimension preferredSize = getSize(component, size);
            min.x = Math.min(min.x, component.getX());
            min.y = Math.min(min.y, component.getY());
            max.x = Math.max(max.x, component.getX() + preferredSize.width);
            max.y = Math.max(max.y, component.getY() + preferredSize.height);
        }
        int center = Short.MAX_VALUE / 2;
        return new Dimension(
                Math.max(Math.abs(center - min.x), Math.abs(center - max.x) * 2),
                Math.max(Math.abs(center - min.y), Math.abs(center - max.y) * 2));
    }

    private Dimension getSize(Component component, Size size) {
        switch(size) {
        case MAX:
            return component.getMaximumSize();
        case MIN:
            return component.getMinimumSize();
        case PREF:
            return component.getPreferredSize();
        default:
            assert false : "Unknown size: " + size;
            return new Dimension();
        }
    }

    @Override
    public Dimension minimumLayoutSize(Container parent) {
        return getSize(parent, Size.MIN);
    }

    @Override
    public void layoutContainer(Container parent) {
        doLayoutContainer(parent,
                parent.getWidth(), parent.getHeight(), Size.PREF);
    }

    private List<Rectangle> doLayoutContainer(Container parent,
            int width, int height, Size size) {

        Point offset = new Point(width / 2, height / 2);
        List<Rectangle> componentBounds = new ArrayList<Rectangle>();
        double angle = 0;
        double radius = 1;
        for(Component component : parent.getComponents()) {
            Dimension preferredSize = getSize(component, size);
            Rectangle bounds;
            do {
                bounds = new Rectangle(
                        add(calculatePoint(angle, radius), offset),
                        preferredSize);
                angle += angleStep;
                radius += radiusStep;
            }
            while(overlaps(bounds, componentBounds));

            component.setBounds(bounds);
            componentBounds.add(bounds);
        }
        return componentBounds;
    }

    private Point calculatePoint(double angle, double radius) {
        double x = radius * Math.cos(angle);
        double y = radius * Math.sin(angle);
        return new Point((int) x, (int) y);
    }

    private boolean overlaps(Rectangle bounds, List<Rectangle> componentBounds) {
        for(Rectangle other : componentBounds) {
            if(other.intersects(bounds)) {
                return true;
            }
        }
        return false;
    }

    private Point add(Point a, Point b) {
        return new Point(a.x + b.x, a.y + b.y);
    }

    @Override
    public void addLayoutComponent(Component comp, Object constraints) {
        // calculated on the fly
    }

    @Override
    public Dimension maximumLayoutSize(Container parent) {
        return getSize(parent, Size.MAX);
    }

    @Override
    public float getLayoutAlignmentX(Container target) {
        return 0.5f;
    }

    @Override
    public float getLayoutAlignmentY(Container target) {
        return 0.5f;
    }

    @Override
    public void invalidateLayout(Container target) {
        // calculated on the fly
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                final SpiralLayout layout = new SpiralLayout();
                final JPanel panel = new JPanel(layout);

                final JSpinner angleSpinner = new JSpinner(new SpinnerNumberModel(Math.toDegrees(layout.angleStep), 1.0, 360.0, 5.0));
                angleSpinner.addChangeListener(new ChangeListener() {
                    @Override
                    public void stateChanged(ChangeEvent e) {
                        double angle = (Double) angleSpinner.getValue();
                        layout.setAngleStep(Math.toRadians(angle));
                        panel.revalidate();
                    }
                });
                final JSpinner radiusSpinner = new JSpinner(new SpinnerNumberModel((int)  layout.radiusStep, 1, 1000, 1));
                radiusSpinner.addChangeListener(new ChangeListener() {
                    @Override
                    public void stateChanged(ChangeEvent e) {
                        int radius = (Integer) radiusSpinner.getValue();
                        layout.setRadiusStep(radius);
                        panel.revalidate();
                    }
                });
                JPanel buttons = new JPanel();
                buttons.add(new JLabel("Radius step:"));
                buttons.add(radiusSpinner);
                buttons.add(new JLabel("Angle step"));
                buttons.add(angleSpinner);

                for(int i = 1; i <= 25; i++) {
                    panel.add(new JLabel("Label " + i));
                }
                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                frame.getContentPane().add(buttons, BorderLayout.PAGE_START);
                frame.getContentPane().add(panel);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

# css - CSS 百分比中的小数位数

> ID：12448963
> 
> 赞同：19
> 
> 时间：2012-09-16T17:16:23.017
> 
> 标签：css, rounding, percentage

好的，我进行了广泛搜索，并提出了一些轶事证据，表明CSS 规范中没有针对浮点数精度的**推荐标准行为。**

**注意**我不是在问[众所周知的亚像素舍入问题](http://ejohn.org/blog/sub-pixel-problems-in-css/)。

我问的原因是 IE 似乎将基于百分比的浮点值四舍五入到**小数点后 2 位**，而 Webkit 和 Gecko 至少允许 3 位，甚至更多（我没有测试过）。

例如：

```
li {
    width: 14.768%;
} 
```

在 Chrome 的 Web Inspector 或 Firebug 中检查时，`<li>`正确显示 s 的宽度为 14.768%。但是，在 IE 开发工具（IE9/8/7 模式）中，它们的宽度为 14.76%。这会导致实际的基于像素的值也完全消失。

任何人都可以阐明这种行为，或提供合适的解决方法吗？如果可能的话，我宁愿不必诉诸基于像素的值，因为内容需要是流动的宽度。

我知道处理这么多小数位非常麻烦，但我很想知道这些浏览器中的哪个（如果有的话）是“正确的”？

**编辑**

Firefox在检查器中显示时*似乎*使用了正确的百分比值（未四舍五入到小数点后 2 位），但在实际像素位置方面显示与 IE 相同的行为。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T20:23:12.737

您的问题可能有很多解决方案，我建议这些：

1.  除一位外，您自己四舍五入两位小数，而不是从最后一位的总宽度减少。
2.  使用`table`or `display: table`，而不是浏览器将自行修复宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-14T19:16:33.110

对于遇到这个问题的任何人，本文深入探讨了不同浏览器对小数点百分比的作用：[https ://cruft.io/posts/percentage-calculations-in-ie/](https://cruft.io/posts/percentage-calculations-in-ie/)

至于哪个浏览器是正确的，根据那篇文章：

> HTML5 规范没有提到截断或舍入小数位。第 11 点处理小数位，并表示要继续循环，直到“位置超过输入末尾，然后返回值作为长度”。

# php - 如何使用 PHP 发现我的 Windows 系统上的 RAM 量？

> ID：12448967
> 
> 赞同：1
> 
> 时间：2012-09-16T17:17:17.573
> 
> 标签：php, windows

如何使用 PHP 发现系统上的 RAM 量？

编辑：我使用的是 Windows，`echo exec('free -m');`下面建议的 Windows 不起作用。

# c# - 在不同域的远程计算机上启动 Windows 服务

> ID：12448972
> 
> 赞同：5
> 
> 时间：2012-09-16T17:17:31.980
> 
> 标签：c#, windows, service, restart

我的 PC 位于域 A 中，而远程服务器位于域 B 中，我想使用 c# 或任何其他语言或脚本从我的 PC 上重新启动服务器上的服务。

笔记：

1.  我通过 VPN 连接到服务器，这意味着我可以手动 RDP 服务器并可以手动重新启动服务。
2.  我无法在本地服务窗口的操作按钮下使用连接到其他计算机来访问服务器上的服务。
3.  我拥有服务器的管理员权限。
4.  我不能（不允许）向服务器添加任何组件。
5.  我对远程机器有不同的凭据集

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T19:13:35.720

您应该首先尝试该`sc`命令以确保您能够使用当前权限和凭据远程启动该服务。如果可行，请查看`System.ServiceProcess.ServiceController`.

当您说您是远程计算机上的管理员时，我假设这意味着您使用不同的凭据登录。我不相信其中任何一个都将允许您使用备用凭据——即，这些命令将以域 A 权限执行，而这些权限很可能不足以满足您的要求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T03:19:23.507

可以使用批处理文件吗？我通常使用这样的东西：

```
NET USE \\computername\IPC$ /U:domainname\username password
SC \\computername START service 
```

# c - void 指针作为参数

> ID：12448977
> 
> 赞同：8
> 
> 时间：2012-09-16T17:18:06.113
> 
> 标签：c, pointers, arguments, argument-passing, void-pointers

以下 C 代码段：

```
[...] 
void f1(void* a){
  printf("f(a) address = %p \n",a);
  a = (void*)(int*)malloc(sizeof(int));

  printf("a address = %p \n",a);
  *(int*)a = 3;

  printf("data = %d\n",*(int*)a);
}

void f(void){
  void* a1=NULL;
  printf("a1 address = %p \n",a1);

  f1(a1);

  printf("a1 address = %p \n",a1);
  printf("Data.a1 = %d\n",*(int*)a1);
}
[...] 
```

结果是

```
a1 address = (nil) 
f(a) address = (nil) 
a address = 0xb3f010 
data = 3
a1 address = (nil) 
Segmentation fault (core dumped) 
```

为什么不在`a1`函数中保留已分配给它的地址？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-16T17:22:00.033

由于这是 C，如果不传递指向指针的指针（例如，`void **`而不是`void *`指向指针），就不能通过引用传递指针。您需要返回新指针。怎么了：

```
f(a1); 
```

将指针 ( `NULL`) 的值作为 的堆栈参数值推送`a`。`a`拾取这个值，然后给自己重新分配一个新值（`malloc`ed 地址）。因为它是按值传递的，所以`a1`.

如果这是 C++，你可以通过引用传递指针来实现你想要的：

```
void f(void *&a); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-16T17:22:02.350

将指针传递`a1`给您的函数，您*无法*更改`a1`指向的位置。指针是*按值传递的*，因此`f1`您只需更改 . 持有的地址的副本`a`。如果要更改指针，即为传入的指针分配新内存，则需要将指针传递*给指针*：

```
void f1(void **a)
{
    // ...
    *a = malloc(sizeof(int));
    // ... 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-16T17:25:06.183

要通过函数调用更改变量，函数需要具有关于参数的*引用语义*。C 没有原生引用变量，但可以通过取地址和传递指针的方式实现引用语义。

一般来说：

```
void mutate_thing(Thing * x)    // callee accepts pointer
{
    *x = stuff;                 // callee derefences ("*")
}

int main()
{
    Thing y;
    mutate_thing(&y);           // caller takes address-of ("&")
} 
```

在你的情况下，`Thing`是`void *`：

```
void f(void ** pv)
{
    *pv = malloc(12);   // or whatever
}

int main()
{
     void * a1;
     f(&a1);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-01T03:53:26.893

基于 Kerrek SB 的示例，我用这个来演示 void 指针到指针作为参数以及如何使用它。

```
#include <stdio.h>

void test(void ** jeez)
{
  *jeez = (void *) (int) 3;
}

int main (int argc, char* argv[])
{
void *a;
test(&a);

int b = *(int *)&a;
printf("value returned = %d\n", b);

return 0;
} 
```

# android - 如何延迟在布局上添加图像？

> ID：12448980
> 
> 赞同：2
> 
> 时间：2012-09-16T17:18:21.307
> 
> 标签：android, layout

我有麻烦。我需要添加并显示几个图像（之前将计算数量）以延迟布局，但它们出现在同一时刻。

这是我的代码：

处理程序：

```
h = new Handler(){
        @Override
        public void handleMessage(Message msg) {
            Log.d(LOG_TAG, "handle message!");
            int delay = msg.arg2;
            try {
                Thread.currentThread().sleep(delay);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            Position position = (Position)msg.obj;
            int img = msg.arg1;
            int topMargin = getMarginInPixels(position.getY());
            int leftMargin = getMarginInPixels(position.getX());
            ImageView iv = new ImageView(MainActivity.this);
            iv.setImageResource(img);
            RelativeLayout.LayoutParams lp = new LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
            lp.topMargin = topMargin;
            lp.leftMargin = leftMargin;
            iv.setLayoutParams(lp);
            rl.addView(iv); 
        }
    }; 
```

在循环中：

```
Message m = h.obtainMessage(0, img, delay, newPosition);
            h.sendMessage(m); 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T17:25:22.153

处理程序与 UI 一起工作，尝试停止后台线程，并从中调用处理程序。像

```
new Thread( new Runnable(){
 for (int i=0;i<10;i++){
   SystemClock.sleep(1000);//
   Message m = h.obtainMessage(0, img,newPosition);
            h.sendMessage(m);
 }
}
).start(); 
```

# c++ - 现有通用开源项目的 Linux IDE 选择

> ID：12448981
> 
> 赞同：0
> 
> 时间：2012-09-16T17:18:22.300
> 
> 标签：c++, linux

我遇到了 wpa_supplicant 无法在我当前的 USB WIFI 卡上对我的 AP 进行身份验证的问题，所以我决定尝试调试并看看出了什么问题，也许我可以让它工作。在这个过程中，我希望能够调试应用程序。

我对 linux IDE 不是很精通。你能推荐我一个 IDE，它可以导入一个开源项目并神奇地让它出现在 IDE 中，以便我可以构建和执行它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T18:00:47.587

你可以试试 QtCreator IDE。将基于“make”的项目放入 QtCreator 的努力是可以接受的。如果项目使用 CMake 作为构建系统，支持会更好。

对于通用项目： [http ://doc.qt.nokia.com/qtcreator-2.5/creator-project-generic.html](http://doc.qt.nokia.com/qtcreator-2.5/creator-project-generic.html)

IDE 拥有您需要的一切，包括调试器 (gdb) 和分析 (valgrind) 支持。

# ruby-on-rails - Rails 3：检索父模型属性等于搜索键的所有子记录

> ID：12448983
> 
> 赞同：9
> 
> 时间：2012-09-16T17:18:33.737
> 
> 标签：ruby-on-rails, ruby-on-rails-3, scope

我想做一个查询，只返回没有序列号的资产，其中工作订单分支等于一个数字。

```
class Workorder < ActiveRecord::Base
    belongs_to :user
    has_many :assets

    scope :current_branch, where("branch=350").order("wo_date ASC")
end

class Asset < ActiveRecord::Base
    belongs_to :workorder

    scope :needs_serial, :conditions =>  {:serial => ""}
end

class AssetsController < ApplicationController
    def index
        @assets_needing_serial=???
    end
end 
```

所以我想要一个：assets 的哈希值，其中 assets.workorder.branch="350"。我想我可以做一个循环并以这种方式创建哈希，但我应该能够在查询中做到这一点吗？我应该尝试为此使用范围吗？

**更新

这就是我最终使用的。工作得很好。

```
@assets = Asset.joins(:workorder).where('workorders.branch=350').order('workorders.wo_date ASC') 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-16T21:00:51.950

您想要做的查询是

```
Asset.joins(:workorder).where('workorders.branch = 325') 
```

因此，您可以制作这样的范围：

```
scope :with_workorder_branch, lambda { |branch| joins(:workorder).where('workorders.branch = ?', branch) } 
```

如果您要遍历工作订单，则应将连接更改为包含，因为这会急切地加载它们。

Rails 查询指南对这类事情非常有帮助[http://guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)

# javascript - 将 JavaScript 片段添加到 Magento

> ID：12448984
> 
> 赞同：0
> 
> 时间：2012-09-16T17:19:00.820
> 
> 标签：javascript, magento, add, code-snippets

我正在尝试将一段 JavaScript 添加到需要在每个页面上的朋友网站。然而，在他网站的后端看，没有人要添加/编辑他正在使用的模板。（他不在 Magento Go 上？他在 1.5 版上）

所以我向他询问了他的 FTP 详细信息，以便我可以编辑模板中的 .phtml 文件，但是他的 FTP 上没有 Magneto 文件结构。但是，当您访问他的站点时，您可以执行“/skin/frontend”并且文件夹存在。

是否还有其他 FTP 详细信息或他的网站设计人员使用的访问级别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T18:48:41.020

`.phtml`您必须通过 XML 布局添加 javascript，而不是修改文件。在这里你是如何做到的：

1.  您需要找到要使用的目录。为此，请登录 Magento 管理界面，转到 System\Configuration\Design 并相应地检查第一个和第二个选项的“Package”和“Default”值。
2.  将 JS 文件上传到您在步骤 1 中在“Package”字段中`skin/frontend/PACKAGE_NAME/THEME_NAME/js`找到的值和在“Default”字段中找到的值的位置。`PACKAGE_NAME``THEME_NAME`
3.  转到`app/design/frontend/PACKAGE_NAME/THEME_NAME/layout`并创建一个`local.xml`包含以下内容的文件：

    ```
    <?xml version="1.0."?>
    <layout version="0.1.0">
        <cms_page>
            <reference name="head">
                <action method="addJs"><stylesheet>js/YOUR_SCRIPT.js</stylesheet></action>
            </reference>
        </cms_page>
    </layout> 
    ```

就这样。毕竟不要忘记清除 Magneto 缓存（Admin\System\Cache Management）。

# jsf - 使用 JDBC-Realm 的 JSF、EJB 和基于表单的登录的概念

> ID：12448992
> 
> 赞同：1
> 
> 时间：2012-09-16T17:19:59.353
> 
> 标签：jsf, netbeans, ejb

我正在尝试学习 Java EE (EJB,JSF...) 的概念，因此我正在开发一个示例应用程序。不幸的是，我无法理解某些概念应该如何协同工作，以及我是否以正确的专业方式进行操作。在这一点上，我真的对所有这些不同的方法感到困惑，希望有人能帮助我。

我的应用程序的核心功能包括一个文档服务器，注册用户可以在其中上传文档并用有用的信息对其进行描述。

文档应该简单地保存在服务器上，所有信息都应该存储在 MySQL 数据库中。我用 Netbeans 创建了三个项目。

*   企业应用项目（DocApp）
*   EJB 模块 (DocApp-ejb)
*   和一个 Web 应用程序项目 (DocApp-war)。

主要的东西工作得很好

*   使用 JPA 访问数据库
*   使用 primefaces FileUploader 上传文件
*   用 EJB 注入 JSF
*   甚至如本教程所示的 JDBC **-Realm****用户授权**[http://jugojava.blogspot.de/2011/02/jdbc-security-realm-with-glassfish-and.html](http://jugojava.blogspot.de/2011/02/jdbc-security-realm-with-glassfish-and.html)

 **我现在的问题是，特定子目录中的所有页面都应该只能由**注册用户**访问。

我看到的唯一方法是使用一个**SessionScoped** **ManagedBean**，而不是使用多个**RequestScoped** **ManagedBeans**。这似乎是一个不好的做法，但我不知道如何处理这个问题。按照我的理解，每个 JSF 页面（xhtml）都应该有一个 ManagedBeand。

有没有好的方法来处理这个或者我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:56:24.037

授予对整个子目录的访问权限的默认机制是在 web.xml 中为表示该目录的 URL 模式添加安全约束。

每个注册用户都应该得到一个代表正在注册的角色，例如“REGISTERED”

然后将此角色添加到 web.xml 中的安全约束。

JSF 和 Servlet 容器管理的安全性之间的交互有点尴尬，但确实有效。**

# vb.net - 如何在 VB.NET 中访问随机访问文件

> ID：12448998
> 
> 赞同：0
> 
> 时间：2012-09-16T17:20:37.630
> 
> 标签：vb.net

我正在尝试使用 VB.NET 打开一个随机访问文件我在尝试访问该文件时收到以下错误消息`Error 75 (Access to the path ....is denied)`。有什么我必须改变来解决这个问题吗？

```
Structure StdSections
    'UPGRADE_WARNING: Fixed-length string size must fit in the buffer. Click for more: 'ms-help://MS.VSCC.v90/dv_commoner/local/redirect.htm?keyword="3C1E4426-0B80-443E-B943-0627CD55D48B"'
    <VBFixedString(15), System.Runtime.InteropServices.MarshalAs(System.Runtime.InteropServices.UnmanagedType.ByValArray, SizeConst:=15)> Public A() As Char 'BEAM  --- complete beam designation          15
    'UPGRADE_WARNING: Fixed-length string size must fit in the buffer. Click for more: 'ms-help://MS.VSCC.v90/dv_commoner/local/redirect.htm?keyword="3C1E4426-0B80-443E-B943-0627CD55D48B"'
    <VBFixedString(2), System.Runtime.InteropServices.MarshalAs(System.Runtime.InteropServices.UnmanagedType.ByValArray, SizeConst:=2)> Public B() As Char 'DSG   --- shape  ie "W" or "C"                2
    Dim C As Single 'DN    --- nominal depth of section            4
    Dim d As Single 'WGT   --- weight                              4
    .
    .
    .
End structure
''Note 'File1' holds complete path!
        Public std As StdSections
        Dim i,ffr,fLength,lastmembNo as integer
        sectionFound = False

        fLength = Len(std)
        If fLength = 0 Then fLength = 168 ' 177
        ffr = FreeFile()
        'FileOpen(ffr, File1, OpenMode.Random, , , fLength)
        FileOpen(ffr, File1, OpenMode.Random, OpenAccess.ReadWrite, OpenShare.LockRead, fLength)
        >>Error 75 (Access to the path ....is denied) << path is perfectly good!!!
        lastmembNo = CInt(LOF(ffr)) \ fLength
        'ReDim std(lastmembNo)
        For i = 1 To lastmembNo
            FileGet(ffr, std, i)
               If Trim(memberID) = Trim(std.A) Then
                    sectionFound = True
                end if
        next i 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T18:20:05.467

首先要检查的是对相关文件的权限。“访问路径被拒绝”并不意味着路径错误或无效，而是您没有权限，或者文件被另一个进程锁定。还有一种可能性是路径变量中的拼写错误（示例中的 File1）