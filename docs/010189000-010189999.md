# StackOverflow 问答 10189000-10189999

# javascript - 在jQuery中制作挥之不去的悬停重复动作

> ID：10189000
> 
> 赞同：0
> 
> 时间：2012-04-17T09:54:48.770
> 
> 标签：javascript, jquery

```
$('#test').hover(
 function () {
  $(this).append('Blah');
 }
); 
```

如何根据您悬停多长时间`Blah`使jQuery 重复附加？`#test``#test`

例如，我怎样才能`Blah`在你悬停的每一秒追加一次`#test`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T09:58:36.553

你可以这样使用`setInterval`：

```
var myInterval = false;
$('#test').hover(
   function(){
      $that = $(this); 
      // need to save $(this) as 'this' will be different within setInterval
      myInterval = setInterval(function(){
         $that.append('Blah');
      }, 100); // repeat every 100 ms
   },function() {
      clearInterval(myInterval);  // clear the interval on hoverOut
   }
); 
```

[这里的工作示例](http://jsfiddle.net/zqkDz/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T09:59:55.503

```
(function() {
   var intv;
   $('#test').hover(
     function () {
        var $this = $(this);
        intv = setInterval(function() {
          $this.append('Blah');
        }, 1000);
     },
     function() {
       clearInterval(intv);
     }
  );
}()); 
```

我已将所有代码包含在一个匿名作用域函数中，以免污染全局作用域，并且我缓存了一个引用`$(this)`以避免在超时内每秒进行一次新的评估

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T10:00:03.217

您可以**[`setInterval`](https://developer.mozilla.org/en/DOM/window.setInterval)**这样做：

```
var appending; //var to store the interval

$('#test').hover(function(){ //on mouseenter
   var $this = $(this); //store the context, i.e. the element triggering the hover
   appending = setInterval(function(){ //the following function gets executed every second until the interval is cleared
      $this.append('<p>Blah</p>'); //append content to context
   },1000); //1000 meaning the repetition time in ms
},function(){ //on mouseleave
   clearInterval(appending); //clear the interval on mouseleave
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T09:59:23.187

使用 setInterval()

```
$('#test').hover(
 function () {
setInterval(function() {
  $(this).append('Blah');
},1000)
 }
); 
```

# c# - 使用 C# 删除 XML 中的默认命名空间属性 - 无法通过 ref 传递对象然后迭代

> ID：10189003
> 
> 赞同：0
> 
> 时间：2012-04-17T09:55:07.163
> 
> 标签：c#, xml, namespaces, xml-namespaces

我目前正在编写一段代码，旨在从 XML 文档中删除所有名称空间并将它们重新添加到标题中。我们使用它是因为我们摄取了非常大的 xml 文档，然后以小片段的形式重新提供它们，因此每个项目都需要复制父文档中的命名空间。

XML 首先作为 XmlDocument 加载，然后传递给删除命名空间的函数：

```
 _fullXml = new XmlDocument();
        _fullXml.LoadXml(itemXml);
        RemoveNamespaceAttributes(_fullXml.DocumentElement); 
```

remove 函数遍历整个文档以查找名称空间并删除它们。它看起来像这样：

```
 private void RemoveNamespaceAttributes(XmlNode node){

        if (node.Attributes != null)
        {
            for (int i = node.Attributes.Count - 1; i >= 0; i--)
            {
                if (node.Attributes[i].Name.Contains(':') || node.Attributes[i].Name == "xmlns")
                    node.Attributes.Remove(node.Attributes[i]);
            }
        }

        foreach (XmlNode n in node.ChildNodes)
        {
            RemoveNamespaceAttributes(n);
        }
    } 
```

但是，我发现它不起作用——它使所有命名空间保持不变。

如果您使用调试器遍历代码，那么它看起来正在做它应该做的事情 - 节点对象的名称空间属性被删除。但是原始的 _fullXml 文档保持不变。我认为这是因为该函数正在查看传递给它的数据的克隆，而不是原始数据。

所以我的第一个想法是通过 ref 传递它。但我不能这样做，因为 foreach 循环内函数的迭代部分有一个编译错误——你不能通过引用传递对象 n。

第二个想法是传递整个 _fullXml 文档，但这也不起作用，猜测是因为它仍然是一个克隆。

所以看起来我需要解决通过 ref 传递文档然后遍历节点以删除所有命名空间的问题。这显然需要重新设计这个代码片段，但我看不到一个好的方法。任何人都可以帮忙吗？

干杯，马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T23:29:57.940

要剥离命名空间，可以这样做：

```
void StripNamespaces(XElement input, XElement output)
{
    foreach (XElement child in input.Elements())
    {
        XElement clone = new XElement(child.Name.LocalName);
        output.Add(clone);
        StripNamespaces(child, clone);
    }
    foreach (XAttribute attr in input.Attributes())
    {
        try
        {
            output.Add(new XAttribute(attr.Name.LocalName, attr.Value));
        }
        catch (Exception e)
        {
            // Decide how to handle duplicate attributes
            //if(e.Message.StartsWith("Duplicate attribute"))
            //output.Add(new XAttribute(attr.Name.LocalName, attr.Value));
        }
    }
} 
```

你可以这样称呼它：

```
XElement result = new XElement("root");
StripNamespaces(NamespaceXml, result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T23:55:27.810

我不是 100% 确定没有失败的案例，但我觉得你可以做到

```
string x = Regex.Replace(xml, @"(xmlns:?|xsi:?)(.*?)=""(.*?)""", ""); 
```

在原始 xml 上摆脱命名空间。

这可能不是解决这个问题的最佳方法，但我想我会把它放在那里。

# c# - .NET CF 中的 FileStream 和 ObjectDisposedException

> ID：10189010
> 
> 赞同：0
> 
> 时间：2012-04-17T09:55:35.957
> 
> 标签：c#, compact-framework, filestream, objectdisposedexception

```
public byte[] GetFile(string filename)
{
    FileStream aStream = File.Open(filename, FileMode.Open, FileAccess.Read);
    BinaryReader binReader = new BinaryReader(aStream);
    binReader.BaseStream.Position = 0;
    byte[] binFile = binReader.ReadBytes(Convert.ToInt32(binReader.BaseStream.Length));
    binReader.Close();
    return binFile;
} 
```

我对许多文件路径运行此方法，问题是每当无法使用 File.Open 访问文件时（因为它被另一个进程使用）我得到：

```
'aStream.Position' threw an exception of type 'System.ObjectDisposedException' 
```

在以下行：

```
binReader.BaseStream.Position = 0; 
```

我很少得到

```
{System.IO.IOException: The process can not access the file '\folder\file.txt' because it is being used by another process.} 
```

这是我想要的例外。那么为什么对象大部分时间都被处理掉了呢？注意：我首先在 using 语句中添加了 FileStream 行，但删除了它，因为我认为这可能已经释放了该对象。但问题依然存在。

编辑：使用 Compact Framework，它没有`ReadAllBytes`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T13:18:21.137

**也许**那部分时间你在使用你的文件时`FileStream`抛出`IOException`，而在其他时候，你**可能**会得到 ，`ObjectDisposedException`因为你的数组没有初始化。

显然，我无法检验这个理论。

看看你是否可以复制粘贴这个效果很好：

```
public byte[] GetFile(string filename)
{
  byte[] binFile = null;
  try
  {
    using (var aStream = File.Open(filename, FileMode.Open, FileAccess.Read))
    {
      BinaryReader binReader = new BinaryReader(aStream);
      binFile = new byte[binReader.BaseStream.Length];
      binReader.BaseStream.Position = 0; // <= this step should not be necessary
      binFile = binReader.ReadBytes(binReader.BaseStream.Length);
      binReader.Close();
    }
  } catch (IOException err) {
    // file is being used by another process.
  } catch (ObjectDisposedException err) {
    // I am guessing you would never see this because your binFile is not disposed
  }
  return binFile;
} 
```

一定要检查空返回变量！

**编辑：**

我写了（我认为是）一个更简单的版本。我测试了它，它似乎工作正常。我也更喜欢`Read()`重载`ReadBytes()`，因为我知道有多少数据被拉入。

首先，是为 my Pictures 文件夹中的每个图像调用该方法的测试函数：

```
public void Test() {
  DirectoryInfo dir = new DirectoryInfo(Environment.GetFolderPath(Environment.SpecialFolder.Personal));
  foreach (var subDir in dir.GetDirectories()) {
    if (-1 < subDir.Name.ToLower().IndexOf("pictures")) {
      foreach (var file in subDir.GetFiles()) {
        byte[] data = GetFile(file.FullName);
        if (data != null) {
          Console.WriteLine(data.Length);
        }
      }
    }
  }
}

public byte[] GetFile(string filename) {
  byte[] result = null;
  try {
    if (File.Exists(filename)) {
      int len = 0;
      FileInfo file = new FileInfo(filename);
      byte[] data = new byte[file.Length];
      using (BinaryReader br = new BinaryReader(file.Open(FileMode.Open, FileAccess.Read))) {
        len = br.Read(data, 0, data.Length);
        br.Close();
      }
      if (0 < len) {
        if (len == data.Length) {
          return data;
        } else {
          // this section of code was never triggered in my tests;
          // however, it is good to keep it as a backup.
          byte[] dat2 = new byte[len];
          Array.Copy(data, dat2, len);
          return dat2;
        }
      }
    }
  } catch (IOException err) {
    // file is being used by another process.
  } catch (ObjectDisposedException err) {
    // I am guessing you would never see this because your binFile is not disposed
  }
  return result;
} 
```

我看不出这些不起作用的任何原因 - 除非你有`int`溢出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:58:58.080

你为什么不简单地使用

```
public byte[] GetFile(string filename)
{
    try { return File.ReadAllBytes(filename); }
    catch { return null; }
} 
```

只是为了好玩，你甚至可以定义一个扩展方法

```
public static class Extensions
{
    public static byte[] GetFile(this string filename)
    {
        try { return File.ReadAllBytes(filename); }
        catch { return null; }
    }
} 
```

所以你可以这样做`byte[] myfile = filename.GetFile();`。
请记住，在继续之前，您**必须**检查 return 不为空：

```
if (myfile != null)
{
    // Do what you need
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T10:03:55.097

只需使用这个：

```
byte[] contents = File.ReadAllBytes(filename); 
```

# java - 在java中生成短随机数？

> ID：10189016
> 
> 赞同：15
> 
> 时间：2012-04-17T09:55:53.373
> 
> 标签：java, random, short

我想生成一个短类型的随机数，就像有一个名为 Random.nextInt(134116) 的整数类型函数一样。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-17T09:59:44.600

没有`Random.nextShort()`方法，所以你可以使用

```
short s = (short) Random.nextInt(Short.MAX_VALUE + 1); 
```

+1 是因为该方法返回一个不超过指定数字（不包括）的数字。看[这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html#nextInt%28int%29)

这将生成从 0 到 Short.MAX_VALUE 的数字（OP 未请求负数）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-17T10:18:37.147

可以产生所有可能的短值的最有效的解决方案是做任何一个。

```
short s = (short) random.nextInt(1 << 16); // any short
short s = (short) random.nextInt(1 << 15); // any non-negative short 
```

甚至更快

```
class MyRandom extends Random {
    public short nextShort() {
        return (short) next(16); // give me just 16 bits.
    }
    public short nextNonNegativeShort() {
        return (short) next(15); // give me just 15 bits.
    }
}

short s = myRandom.nextShort(); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-04-17T09:59:46.543

Java 短裤包含在 -32 768 → +32 767 区间内。

你为什么不做一个

```
Random.nextInt(65536) - 32768 
```

并将结果转换为一个*短*变量？

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-17T09:59:41.580

怎么样`short s = (short) Random.nextInt();`？请注意，生成的分布可能有偏差。Java 语言规范保证这不会导致异常，int 将被截断以适应short。

**编辑**

实际上做一个快速测试，得到的分布似乎也是均匀分布的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-17T10:00:01.013

只需生成一个 int，如：

```
 short s = (short)Random.nextInt(Short.MAX_VALUE); 
```

生成的`int`将在 的值空间中`short`，因此可以在不丢失数据的情况下进行转换。

# java - 如何在列族中的超级列下创建子列

> ID：10189017
> 
> 赞同：2
> 
> 时间：2012-04-17T09:55:54.200
> 
> 标签：java, cassandra, super

我正在寻找一个在超级列下创建子列列表的过程。列族结构应如下所示

```
ColumnFamilyName{
     row_key: #something 
     Column:{
                Col1: {Name: "#text", value:"#value"},
                Col2: {Name: "#text", value:"#value", Name1: "#text", value:"#value"}
            }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T00:24:06.177

实际上并没有“创建”超级专栏的概念。插入具有该超列名称的任何子列后，超列就存在了。同样，没有任何子列也不能存在超级列。

关于超级列使用的[pycassa 文档](http://pycassa.github.com/pycassa/assorted/super_columns.html)可能有助于查看。简而言之，您的插入将如下所示：

```
col_fam.insert('row_key', {'supercol_name': {'col_name': 'col_val'}}) 
```

但是，此时**不**建议使用超级列。几乎在所有情况下都应该使用复合列。

# ruby-on-rails - 使用 find_by_id 获取 RSpec 中不存在的记录时引发 RecordNotFound

> ID：10189018
> 
> 赞同：6
> 
> 时间：2012-04-17T09:55:59.767
> 
> 标签：ruby-on-rails, activerecord, rspec, cancan

我在 products_controller_spec.rb 中编写了这个规范，旨在在不存在的记录上调用 destroy 时测试重定向：

```
it "deleting a non-existent product should redirect to the user's profile page with a flash error" do           
    delete :destroy, {:id => 9999}
    response.should redirect_to "/profile"
    flash[:error].should == I18n.t(:slideshow_was_not_deleted)
end 
```

这是 products_controller.rb 中的控制器操作：

```
def destroy
  product = Product.find_by_id(params[:id])
  redirect_to "profile" if !product
  if product.destroy
    flash[:notice] = t(:slideshow_was_deleted)
    if current_user.admin? and product.user != current_user
      redirect_to :products, :notice => t(:slideshow_was_deleted)
    else
      redirect_to "/profile"
    end
  else
    if current_user.admin?
      redirect_to :products, :error => t(:slideshow_was_not_deleted)
    else
      redirect_to "/profile"
    end
  end
end 
```

现在，我没想到规范会第一次通过，但我不明白为什么它会失败：

```
Failure/Error: delete :destroy, {:id => 9999}
 ActiveRecord::RecordNotFound:
   Couldn't find Product with id=9999 
```

我的印象是#find_by_id 不会在不存在的记录上返回 RecordNotFound 错误。那我为什么要买一个？提前致谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-17T21:09:49.177

CanCan 引发了 RecordNotFound 错误。它不能从控制器动作中救援（大概它发生在动作运行之前）。有两种解决方法——

1.  将规范更改为：

    ```
    it "deleting a non-existent product should result in a RecordNotFound Error" do         
      product_id = 9999
      expect { delete :destroy, {:id => product_id}}.to raise_error ActiveRecord::RecordNotFound
    end 
    ```

[或者，2.像这样](https://github.com/ryanb/cancan/issues/43)修补CanCan 。

我不喜欢修补路线，所以我选择了选项 1。

# elasticsearch - 如何更新 ElasticSearch 中的多个项目？

> ID：10189019
> 
> 赞同：12
> 
> 时间：2012-04-17T09:56:03.867
> 
> 标签：elasticsearch, elasticsearch-bulk-api

假设我`tag`在 ElasticSearch 索引中有一个类型，具有以下映射：

```
{
    "tag": {
        "properties": {
            "tag": {"type": "string", "store": "yes"},
            "aliases": {"type": "string"}
        }
    }
} 
```

每个条目都是一个标签，以及该标签的别名数组。这是一个示例项目：

```
{
    "word": "weak",
    "aliases": ["anemic", "anaemic", "faint", "flimsy"]
} 
```

有时，我想添加新的标签词及其别名，并为现有的标签词添加新的别名。

添加带有别名的新标签词很容易，它只是一个新文档。但是，如何以理智的方式向现有标签词添加新别名？

我知道我可以只搜索标签词，获取其文档，搜索以查看别名是否已存在于别名数组中，如果不添加，则保存。但是 - 这听起来不是一个好的解决方案。

有没有办法进行批量更新？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-17T13:16:36.087

All updates in ElasticSearch are done by finding the record, deleting the old version and adding the new version. You can save a little bit on moving records all the way to the client by using [Update API](http://www.elasticsearch.org/guide/reference/api/update.html). It would still require finding the record though.

What you, probably, want is [Update by query](https://www.elastic.co/guide/en/elasticsearch/reference/6.5/docs-update-by-query.html).

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-06-08T11:16:31.113

使用[_bulk](https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-bulk.html)试试这个：

```
http://127.0.0.1:9200/myindex/type/_bulk
{
"update": {
    "_index": "myindex",
    "_type": "type",
    "_id": "myid"
}
}{
"doc": {
    "field": "new value"
}
}{
"update": {
    "_index": "myindex",
    "_type": "type",
    "_id": "id"
}
}{
"doc": {
    "field": "new value"
}
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-01-21T01:50:00.150

这对我有用。

input_list.dat：

```
{ "index" : { "_index": "my_index", "_type": "my_type", "_id": "existing-value" } }

{ "Field_to_update": "New_Value" }

{ "index" : { "_index": "my_index", "_type": "my_type", "_id": "existing_value" } }

{ "Field_to_update": "New_Value" } 
```

命令：

```
curl -k -XPOST 'https://my_host:9200/my_url/_bulk' --data-binary "@input_list.dat"; echo 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-05-06T17:23:03.217

Elasticsearch 2.3.0 引入了[Update By Query API](https://www.elastic.co/guide/en/elasticsearch/reference/2.3/docs-update-by-query.html)作为期待已久的[Reindex API](https://www.elastic.co/guide/en/elasticsearch/reference/2.3/docs-reindex.html)的一部分。

例如，以下是如何更新所有文档以删除某个字段（如果存在）：

```
POST /myindex/mytype/_update_by_query
{
  "script": {
    "inline": "ctx._source.remove(\"remove\")"
  },
  "query": {
    "exists": {
      "field": "remove"
    }
  }
} 
```

`elasticsearch.yml`上面的示例使用内联脚本，因此请务必在`script.inline: on`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-09T15:50:33.490

Elastic Search 有一个[更新 API](https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-update.html)。使用该 API，您可以执行以下操作：

```
curl -XPOST 'localhost:9200/test/tag/weak/_update' -d '{
    "script" : "ctx._source.aliases += faint"
}' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-01T14:04:44.577

此外，如果您添加具有相同 id 的相同值，它将自动更新旧数据。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-09T06:15:12.557

您可以使用[ElasticSeach Bulk API](https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-bulk.html#bulk-update)使用单个 API 调用更新多个文档

**卷曲示例**

```
curl --location --request POST 'localhost:9200/whatsapp/_bulk' \
--header 'Content-Type: application/json' \
--data-raw '{ "update" : {"_id" : 692, "_index" : "whatsapp","_type":"_doc","retry_on_conflict" : 3} }
{ "doc" : {"thread_status" : 1} }
{ "update" : {"_id" : 693, "_index" : "whatsapp","_type":"_doc","retry_on_conflict" : 3} }
{ "doc" : {"thread_status" : 1} }

' 
```

**注意**最后一行数据必须以换行符 \n 结尾。这就是为什么你会在 json 的最后一行注意到**'**。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-14T10:32:38.007

Elasticsearch 的批量 API 也可用于更新请求，至少用于 Java 客户端。

```
List list = new Arraylist();
list.add("hello");
BulkProcessor bulk = new BulkProcessor();
UpdateRequest update = new UpdateRequest("index", "type", "id1");
update.script("ctx._source.aliases+= newaliases");  //dynamic script
update.addScriptParam("newaliases", list);
bulk.add(update); 
```

请注意，在较新版本的 elasticsearch 中禁用了动态脚本。启用该功能或​​使用预编译脚本来使用此功能。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-11-10T07:46:46.437

您可以使用以下代码使用 spring java 客户端执行相同的操作。以下是代码中使用的依赖项。

```
import org.elasticsearch.action.update.UpdateRequest;

import org.elasticsearch.index.query.QueryBuilder;

import org.springframework.data.elasticsearch.core.query.UpdateQuery;

import org.springframework.data.elasticsearch.core.query.UpdateQueryBuilder;

private UpdateQuery updateExistingDocument(String Id) {
    // Add updatedDateTime, CreatedDateTime, CreateBy, UpdatedBy field in existing documents in Elastic Search Engine
    UpdateRequest updateRequest = new UpdateRequest().doc("UpdatedDateTime", new Date(), "CreatedDateTime", new Date(), "CreatedBy", "admin", "UpdatedBy", "admin");

    // Create updateQuery
    UpdateQuery updateQuery = new UpdateQueryBuilder().withId(Id).withClass(ElasticSearchDocument.class).build();
    updateQuery.setUpdateRequest(updateRequest);

    // Execute update
     elasticsearchTemplate.update(updateQuery);
} 
```

# php - PHP：将数据从一个 php 数据库应用程序移动到另一台服务器上的另一个

> ID：10189020
> 
> 赞同：0
> 
> 时间：2012-04-17T09:56:12.093
> 
> 标签：php, database, data-transfer

我在不同的服务器上有两个 php 数据库应用程序。我希望能够将数据从第一台服务器的特定记录传输到第二台服务器，并在两者之间进行一些处理以解决数据库模式的差异。两台服务器无法访问彼此的数据库。因此，用户将单击记录上的链接，然后基本上该数据将被传输到另一台服务器进行确认。我用 POST 查看了重定向，但这似乎是不可能的。还有更好的方法吗？

选择服务器 1 上的记录 -> 处理记录以更正表格 -> 将 PHP 数组传输到服务器 2 -> 服务器 2 上的确认页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:02:18.603

如果我必须做这样的事情，我会获取需要处理的数据，在我的服务器上处理它（从我获取它的地方）然后序列化结果并使用 post 方法将其发送到另一台服务器。使用另一个脚本反序列化并简单地存储在第二台服务器上运行的数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:19:43.590

您可以在此示例的帮助下使用我提到的 curl

```
//assuming the variable that holds your record is $row
$row = array("key1" => "value1", "key2" => "value2");
$post_fields = "";
foreach($row as $key=>$field){
    $post_fields .= $key . "=" . $field . "&";
}
 $Curl_Session = curl_init('http://yourseconddomain.com/yourfile.php');
 curl_setopt ($Curl_Session, CURLOPT_POST, 1);
 curl_setopt ($Curl_Session, CURLOPT_POSTFIELDS, $post_fields);
 curl_setopt ($Curl_Session, CURLOPT_FOLLOWLOCATION, 1);
 curl_exec ($Curl_Session);
 curl_close ($Curl_Session); 
```

# mongodb - 使用 mongo c# 驱动程序将用户添加到数据库

> ID：10189026
> 
> 赞同：1
> 
> 时间：2012-04-17T09:56:35.193
> 
> 标签：mongodb

我想将用户添加到 mongodb 中新创建的数据库中。我正在使用 db.addUser（用户名，密码）。但它给出了 mongoAuthentication 异常。请告诉我原因。我想添加一个用户，以便下次我使用同一个数据库时，我可以将它与我通过创建用户时传递的相同的凭据集一起使用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-04-03T09:01:20.563

1.  `mongod.exe`从`--auth`参数开始。这将在启用身份验证模式的情况下启动 MongoDB。
2.  由于首次启动 MongoDB 时将没有用户，因此将被视为“localhost 异常”（您应该在控制台中看到一条消息“在 admin.system.users 中配置没有用户，允许 localhost 访问”） . 这意味着，它允许您在 admin 数据库中创建第一个用户（管理员用户），然后该用户将有权创建其他常规用户。
3.  要创建管理员用户启动`mongo.exe`并键入以下命令：

    ```
    > use admin
    > var user = {
        "user" : "adminUser",
        "pwd" : "adminPass",
        "roles" : [
            {
                "role" : "userAdminAnyDatabase",
                "db" : "admin"
            }
        ]
    }

    > db.createUser(user); 
    ```

    您还可以使用 C# 代码完成此操作，如下所示：

    ```
    private static bool fnCreateAdminUser()
    {
        try
        {
            var user = new BsonDocument { { "createUser", "adminUser" }, { "pwd", "adminPass" }, { "roles", new BsonArray { new BsonDocument { { "role", "userAdminAnyDatabase" }, { "db", "admin" } } } } };
            new MongoClient().GetDatabase("admin").RunCommand<BsonDocument>(user);
            return true;
        }
        catch (MongoCommandException) { return true; }
        catch { return false; }
    } 
    ```

4.  现在您的管理员用户已创建，您可以使用此管理员用户为您的数据库创建其他常规用户。您可以使用 C# 代码或命令行等，具体取决于您的实现。以下是为指定数据库创建用户的示例 C# 方法：

    ```
    private static bool CreateUser(string strDBName)
    {
        try
        {
            if (!string.IsNullOrEmpty(strDBName))
            {
                // prepare admin credentials
                MongoCredential cred = MongoCredential.CreateCredential("admin", "adminUser", "adminPass");
                MongoClientSettings setting = new MongoClientSettings();
                setting.Credentials = new[] { cred };

                var user = new BsonDocument { { "createUser", "regularUser" }, { "pwd", "regularPass" }, { "roles", new BsonArray { new BsonDocument { { "role", "readWrite" }, { "db", strDBName } } } } };
                new MongoClient(setting).GetDatabase(strDBName).RunCommand<BsonDocument>(user);
                return true;
            }
            else
            {
                return false;
            }
        }
        catch (MongoCommandException) { return true; } // if user already exists
        catch { return false; }
    } 
    ```

您还可以参考[此](http://tugdualgrall.blogspot.in/2015/02/introduction-to-mongodb-security.html)博客文章了解更多详细信息。它还解释了其他事情，例如添加/更改用户角色等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:02:06.353

此处记录了创建管理员用户和普通用户的过程：

[http://www.mongodb.org/display/DOCS/Security+and+Authentication#SecurityandAuthentication-ConfiguringAuthenticationandSecurity](http://www.mongodb.org/display/DOCS/Security+and+Authentication#SecurityandAuthentication-ConfiguringAuthenticationandSecurity)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T10:16:22.857

如果您已经在 admin 数据库中创建了一个包含用户的数据库，那么您将需要使用这些凭据进行连接，然后才能创建新用户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-02T18:54:35.427

您可以使用以下代码添加用户。

```
db.addUser(
    {
      user: "user",
      pwd: "pass",
      roles: [ "root" ]
    }
) 
```

# iphone - 如何在同一个 MPMoviePlayerController 中播放另一个视频？

> ID：10189031
> 
> 赞同：2
> 
> 时间：2012-04-17T09:57:22.030
> 
> 标签：iphone, objective-c, ios, mpmovieplayercontroller

*我正在创建一个 iPhone 应用程序，我们可以在其中观看视频......我一直在制作自己的控件，所以我想实现下一个，后退按钮，我可以显示主题，所以对于 UI，一切都很好，问题是用另一个内容重新启动 MoviePlayer……知道吗？？？

播放完成后我可以使用相同的配置，我的意思是...如果视频结束播放以开始播放另一个视频...我尝试设置 contentUrl 但它会引发异常：

```
2012-04-17 11:37:41.198 NexTest2[8218:11f03] *** Terminating app due to uncaught exception 'CALayerInvalidGeometry', reason: 'CALayer position contains NaN: [nan 11.5]' 
```

视图控制器.m

```
- (void)viewDidLoad{
[super viewDidLoad];    
fileURL = [NSURL URLWithString:urlString];
moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:fileURL];
moviePlayerController.controlStyle = MPMovieControlStyleNone;
[moviePlayerController setShouldAutoplay:YES];
[self addObservers];   

/* Inset the movie frame in the parent view frame. */
CGRect viewInsetRect = CGRectInset ([self.view bounds],0.0, 0.0 );
[[moviePlayerController view] setFrame: viewInsetRect ];
[self.view addSubview:moviePlayerController.view]; 
[self resizeControlViews];
} 
```

然后在 resizeControlViews 我有这个，因为我正在使用这两个视图，如控件：

```
-(void)resizeControlViews{
CGRect barFrame = self.controlBarView.frame;
barFrame.origin.x = round((moviePlayerController.view.frame.size.width - barFrame.size.width) / 2.0);
barFrame.origin.y = round((moviePlayerController.view.frame.size.height - barFrame.size.height)/10.0);
self.controlBarView.frame = barFrame;
[moviePlayerController.view addSubview:controlBarView];
CGRect playFrame = self.controlPlaybackView.frame;
playFrame.origin.x = round((moviePlayerController.view.frame.size.width - playFrame.size.width) / 2.0);
playFrame.origin.y = round((moviePlayerController.view.frame.size.height - playFrame.size.height)/1.1);
self.controlPlaybackView.frame = playFrame; 
[moviePlayerController.view addSubview:controlPlaybackView];
} 
```

这里一切正常，其中一个视图中有一个控制搜索的滑块，另一个是播放、下一步和后退按钮。我认为问题可能出在这些视图的 UI 组件上......

我添加了这些观察者来控制播放：

```
//Add the observers to the player
-(void)addObservers{
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(playbackStarted:) name:MPMoviePlayerPlaybackStateDidChangeNotification object:nil]; 
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(setDurationLabel:) name:MPMovieDurationAvailableNotification object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayBackDidFinish:) name:MPMoviePlayerPlaybackDidFinishNotification object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyWindowChanged:) name:UIWindowDidBecomeKeyNotification object:nil];

} 
```

因此，当播放器正在播放时，我将 MPMoviePlayerPlaybackStateDidChangeNotification 与此选择器一起使用：

```
//called when the playback state changes of state
- (void)playbackStarted:(NSNotification*)notification {
MPMoviePlayerController *player = notification.object;
if (player.playbackState == MPMoviePlaybackStatePlaying) {
    [self timerRunning];
}
} 
```

如果玩家正在“玩”我用这种方法监控它：

```
-(void)timerRunning{
self.currentTime.text = [self floatToStringTime:(moviePlayerController.currentPlaybackTime)];
self.timeBar.value = moviePlayerController.currentPlaybackTime / moviePlayerController.duration;

if (moviePlayerController.playbackState == MPMoviePlaybackStatePlaying) {
    [self performSelector:@selector(timerRunning) withObject:nil afterDelay:0.5];
}        
} 
```

所以也许这就是问题所在...但是对于单个视频，它可以完美运行...

我有四个错误在哪里...是在我在线监视以将值设置为滑块时，但我真的不知道为什么，我认为这是因为另一个视频或停止视频是仍然执行，所以播放器没有持续时间或当前播放是什么引发了这个异常......我怎么能解决它......这是错误......也许将此代码移动到另一部分......

```
self.timeBar.value = moviePlayerController.currentPlaybackTime / moviePlayerController.duration; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:12:09.267

检查您的 UI 相关代码。在从中获取和使用与内容相关的属性之前，您很可能没有正确检查播放器状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T08:22:13.260

好吧，最后它工作正常...... setCurrentContentUrl 工作正常，问题是我的代码，所以我解决了它......我只是验证持续时间与 0 不同......现在我有一个具有完整自定义控件的播放器 :) 酷： )

```
-(void)timerRunning{   
    if (moviePlayerController.playbackState == MPMoviePlaybackStatePlaying) {       
        self.currentTime.text = [self floatToStringTime:(moviePlayerController.currentPlaybackTime)];
        if (moviePlayerController.duration != 0) {
            self.timeBar.value = moviePlayerController.currentPlaybackTime / moviePlayerController.duration;
        }

    [self performSelector:@selector(timerRunning) withObject:nil afterDelay:0.5];
    }        
} 
```

还是谢谢你

# java - 获取 BufferedReader 读取的文件中的偏移量？

> ID：10189034
> 
> 赞同：1
> 
> 时间：2012-04-17T09:57:36.690
> 
> 标签：java, io, filesize, bufferedreader

我正在逐行读取文件。该文件由 编码`CipherOutputStream`，然后由`DeflaterOutputStream`. 该文件可以包含 UTF-8 字符，如俄语字母等。

我想获得实际读取文件中的偏移量，或者`br.ReadLine()`命令读取的字节数。问题是文件既加密又放气，因此读取字符串的长度大于文件中读取的字节数。

```
 InputStream fis=tempURL.openStream();                       //in tempURL I've got an URL to download
            CipherInputStream cis=new CipherInputStream(fis,pbeCipher); //CipherStream
            InflaterInputStream iis=new InflaterInputStream(cis);       //InflaterInputStream
            BufferedReader br = new BufferedReader(
                    new InputStreamReader(iis, "UTF8"));                //BufferedReader
            br.readLine();

            int fSize=tempURL.openConnection().getContentLength();      //Catch FileSize 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T10:04:58.777

使用[Apache Commons IO](http://commons.apache.org/io/)项目中的[CountingInputStream ：](http://commons.apache.org/io/api-release/org/apache/commons/io/input/CountingInputStream.html)

```
InputStream fis=tempURL.openStream();
CountingInputStream countStream = new CountingInputStream(fis);
CipherInputStream cis=new CipherInputStream(countStream,pbeCipher);
... 
```

稍后您可以使用`countStream.getByteCount()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:05:14.127

对于压缩文件，您会发现 String 不使用整数字节，因此无法回答问题。例如，压缩时一个字节可以占用少于一个字节（否则尝试压缩它就没有意义了）

顺便说一句：通常最好在加密**之前**压缩数据，因为它通常会更紧凑。只有在其输出是 base 64 或类似的东西时，在加密后压缩数据才会有所帮助。当内容变得可预测时（例如重复序列、常见字符），压缩效果最好，而加密的目的是使数据看起来不可预测。

# android - 安卓自定义标题。如何跟随系统主题

> ID：10189037
> 
> 赞同：0
> 
> 时间：2012-04-17T09:57:55.137
> 
> 标签：android, android-theme

我使用以下方法创建自定义标题。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
    setContentView(R.layout.main);
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.title);

} 
```

标题.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/tv"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Title"
     />
</LinearLayout> 
```

现在，系统标题跟随主题，标题文本颜色也跟随主题。（例如：颜色为蓝色）但我自定义的标题文本颜色不是蓝色。我无法修复我的文本颜色，因为主题可以改变。我的自定义标题颜色如何遵循系统主题？系统主题由索尼定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T21:29:13.497

您可以尝试将`TextView`' 样式设置为`?android:attr/windowTitleStyle`以应用系统当前的主题样式。顺便说一句，根据您实际想要自定义的内容，您可能不必为标题栏创建自己的布局。相反，在您的应用主题中自定义与“窗口标题”相关的属性。

# version-control - 如何使用 bazaar 下载源代码？

> ID：10189038
> 
> 赞同：1
> 
> 时间：2012-04-17T09:58:05.083
> 
> 标签：version-control, bazaar, bugzilla

我想将我的 bugzilla 3.6.3 升级到 4.2。要下载最新的源代码，我需要 bzr 存储库。当我尝试从 bazaar 存储库下载公司计算机上的源代码时，我收到以下错误消息。

```
C:/bugzilla/trunk
bzr: ERROR: unknown command "bzr co bzr://bzr.mozilla.org/bugzilla/trunk bugzilla" 
```

然后我将 bzr:// 更改为 http:// 但仍然收到以下错误消息：

```
Run command: bzr "bzr co http://bzr.mozilla.org/bugzilla/trunk bugzilla" 
C:/bugzilla/trunk 
bzr: ERROR: unknown command "bzr co http://bzr.mozilla.org/bugzilla/trunk bugzilla" 
```

也许我需要一个 bzr 的代理客户端，但我找不到任何 bazaar 的代理客户端，我也不确定。

如果有人可以在这方面提供帮助，我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T12:01:19.557

你跑了吗：

```
bzr "bzr co http://bzr.mozilla.org/bugzilla/trunk bugzilla" 
```

?

你应该运行：

```
bzr co http://bzr.mozilla.org/bugzilla/trunk bugzilla 
```

* * *

**更新**：我刚刚检查了它

```
bzr co http://bzr.mozilla.org/bugzilla/trunk bugzilla 
```

它工作得很好。

“未知命令”错误是因为您这样双引号。`bzr`在这种情况下，后面的第一个单词是`co`checkout 的缩写。因此，如果您引用一大堆东西，它被认为是一个词，显然是一个无效的 bzr 命令。如果不加引号但不起作用，请给我们您的确切命令和错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T17:16:12.353

如果您使用 qbzr 或 bzr explorer 之类的 bzr GUI 工具来签出分支，您应该只`bzr://bzr.mozilla.org/bugzilla/trunk`在签出对话框中提供 URL。

否则，`bzr co bzr://bzr.mozilla.org/bugzilla/trunk bugzilla`从控制台窗口运行应该可以工作。

# regex - 在 Sublime 中运行正则表达式 || 在 Sublime 中制作正则表达式包

> ID：10189041
> 
> 赞同：0
> 
> 时间：2012-04-17T09:58:12.060
> 
> 标签：regex, sublimetext, sublimetext2

是否可以在 Sublime 文本中运行正则表达式片段。通过使用键盘绑定还是通过创建包？

表达式是

```
^\s*$ 
```

它会删除文档中的所有双返回/行。对于我的强迫症来说非常方便。

任何有关这方面的帮助、提示、提示或建议都非常受欢迎。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T14:21:03.583

您可以点击`Ctrl+H`, 为“替换”，这会在屏幕底部弹出一个框，单击`.*`按钮，输入`^\s*$`，它会找到所有双输入，您可以将它们替换为任何内容。

或者有一个看起来非常强大的插件，它也应该允许您执行此操作，称为[RegReplace](https://github.com/facelessuser/RegReplace)。

# php - 试图输出 php -> md5 -> html 但文件为空

> ID：10189042
> 
> 赞同：1
> 
> 时间：2012-04-17T09:58:14.733
> 
> 标签：php, html, md5, invoices

我目前正在为我的发票使用一个名为 MyClientBase 的开源解决方案，一切都运行良好。

通常，当我为客户生成发票时，我可以将其作为 PDF 或电子邮件（或 HTML）。在生成 HTML 发票时，指向它的链接是安全的（只有登录的用户才能查看发票），所以我正在尝试制作可公开查看的发票，该发票会生成我们可以在电子邮件中发送的 md5-html。

现在它通过在正确的文件夹中生成一个 md5-html 文件来工作，一切都很好，除了 html 文件是空的。我已经在文件夹上将 CHMOD 设置为 777 并尝试了几种解决方案，但没有任何效果。相反，它会在同一页面上生成两张发票（重复），并将 html 文件留空。所以我认为一些熟练的 php/html-guy 可能会解决这个问题。

这是我现在正在使用的代码：

```
function generate_html() {

$invoice_id = uri_assoc('invoice_id');

$this->load->library('invoices/lib_output');

$this->load->model('invoices/mdl_invoice_history');

$this->mdl_invoice_history->save($invoice_id, $this->session->userdata('user_id'), $this->lang->line('generated_invoice_html'));

$this->lib_output->html($invoice_id, uri_assoc('invoice_template'));

 /*  ------------------ GENERATE MD5-HTML ---------------------------  */
     $file = md5('my_output_path'.$invoice_id).'.html';

     echo "<a href='my_output_path".$file."'>Link to client invoice</a>";
     $f = fopen('my_invoice_path'.$file, 'w');
     $template = $this->load->view('invoice_templates/default_template');
 fwrite($f, $template);true;    
     /*  ------------------ End generate md5 ---------------------------  */
     } 
```

我很感激我能得到的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:38:26.170

试试这个，它应该可以工作，它的作用是获取输出，并将其存储在一个变量中，然后这个变量将是该文件的内容它可能需要一些调整告诉我你是否有任何错误

```
function generate_html() {

$invoice_id = uri_assoc('invoice_id');

$this->load->library('invoices/lib_output');

$this->load->model('invoices/mdl_invoice_history');

$this->mdl_invoice_history->save($invoice_id, $this->session->userdata('user_id'), $this->lang->line('generated_invoice_html'));

$this->lib_output->html($invoice_id, uri_assoc('invoice_template'));

 /*  ------------------ GENERATE MD5-HTML ---------------------------  */
     $file = md5('my_output_path'.$invoice_id).'.html';

     echo "<a href='my_output_path".$file."'>Link to client invoice</a>";
     $f = fopen('my_invoice_path'.$file, 'w');
     ob_start(); // start output buffer flow
     $old_content = ob_get_contents();
     ob_clean();
     $this->load->view('invoice_templates/default_template');
     $template = ob_get_contents(); // assign buffer contents to variable
     ob_end_clean(); // end buffer and remove buffer contents
     fwrite($f, $template);true;   
     echo $old_content;

     /*  ------------------ End generate md5 ---------------------------  */
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:39:06.673

在“评论讨论”之后，问题来自不包含发票 HTML 的 $template。

$this->load->view('invoice_templates/default_template'); 的结果 不包含 HTML，但可能仅包含状态代码。

我认为您可以朝这个方向搜索。

# android - Android 活动流程

> ID：10189044
> 
> 赞同：1
> 
> 时间：2012-04-17T09:58:25.963
> 
> 标签：android, android-activity

我有两个活动，比如 A1 和 A2。序列是 A1->A2 从 A1 我开始 A2 而不在 A1 中调用 finish()。在我按下 A2 中的后退按钮后，我想在 A1 中触发一个功能。但是，如果我在 A1 中使用 onResume()，即使在我想避免的活动 A1 开始期间也会触发该函数。它只应在 A2 的“后”按时调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T10:04:36.013

那么从 A2`startActivityForResult`开始

A1机具

```
 @Override
  public void onActivityResult(final int requestCode, int resultCode, final Intent data) {

   // your code here

} 
```

在 A2 中覆盖 onBackPresset 以在完成活动之前设置结果。而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:48:06.713

这是另一种方法（一种是根据 Dimitar）。

```
public class A extends Activity {
    public static boolean isCalledFromB = false;

    public void onCreate(Bundle instance) {
        isCalledFromB = false;
    }

    public void onResume()
    {
        if(isCalledFromB)
            dosomething();

    }

    public void dosomething() {

    }

}

public class B extends Activity {
..............

    public boolean onKeyDown(int keycode, KeyEvent event) {
        if (keycode == KeyEvent.KEYCODE_BACK) {
            A.isCalledFromB=true;
            finish();
        } 
        return true;
    }

} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-17T10:02:33.147

然后覆盖**`onBackPressed()`**A2 Activity 中的方法。

仅供参考：它适用于 Android 2.x，否则您可以在 Android 1.x 中使用 onKeyDown()

## 第二种方式：

使用 启动 Activity A1 中的 A2 活动**`startActivityForResult()`**。因此，当您按下返回键时，它会将您重定向到**`onActivityResult()`**A1 活动内部。因此，在 onActivityResult() 中，您可以编写该代码。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-17T10:05:20.243

`onResume`无论是第一次还是重新启动，都将始终被调用。您可以通过覆盖来实现相同的目的`onRestart()`

编辑1：

按照其他用户的建议，改用 startActivityForResult 。

# javascript - 比较两个大小相同的 diff 数组

> ID：10189045
> 
> 赞同：1
> 
> 时间：2012-04-17T09:58:31.423
> 
> 标签：javascript, arrays, compare

我有一个简单的应用程序，我想在其中比较两个数组。

```
function check() {
    var Array1 = value.length;
    var Array2 = selected_value.length;
    alert(Array1 + "," + Array2);
    for (var i = 0; i < Array1; i++) {
        for (var j = 0; j < Array2; j++) {
            if (value[i] == selected_value[j]) {
                alert("both div are same");
            }
        }
    }
}​ 
```

我的数组每个都有 4 个元素，但`if`条件不满足。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:12:26.750

尝试查看您的价值观。在`if`编写 console.log(value[i], selected_valuw[j]) 之前检查它们是否相似

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-17T10:06:56.577

这是函数，您可以使用它比较两个数组

```
function arraysEqual(arr1, arr2) {
    if(arr1.length !== arr2.length)
        return false;
    for(var i = arr1.length; i--;) {
        if(arr1[i] !== arr2[i])
            return false;
    }

    return true;
} 
```

[资源](https://stackoverflow.com/a/4025958/295264)

你可以检查数组是否返回假，像这样

```
if(!arrayEqual(arr1,arr2)) {
   // false
} 
```

# c# - Resharper 代码缩进配置

> ID：10189046
> 
> 赞同：1
> 
> 时间：2012-04-17T09:58:34.327
> 
> 标签：c#, resharper, indentation

Resharper 目前将我的代码格式化为：

```
myField1 = expression1 +
    expression2 +
        expression4 +
            expression5 +
                expression6;

if (expression1 
        || expression2
            || expression4
                || expression5
                    || expression6
                        || expression7)
{
} 
```

如何将行为更改为：

```
myField1 = expression1 +
    expression2 + expression3 +
    expression4 +
    expression5 +
    expression6;

if (expression1 
    || expression2
    || expression4
    || expression5
    || expression6
    || expression7)
{
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T10:19:35.650

从菜单：

`Resharper -> Options...`

去：

`Languages -> C# -> Formatting Style -> Other`

并检查：

`Align Multiline Constructs -> Expression`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:09:01.923

在选项代码编辑下，有用于对齐多行结构的选项。其中之一是 Expression，您可以启用它来获得您想要的行为

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T20:27:08.940

顺便说一句，类似楼梯的格式已在 ReSharper 7.0 EAP 中修复。

# c# - NServiceBus 中的 SendOnly

> ID：10189047
> 
> 赞同：5
> 
> 时间：2012-04-17T09:58:34.607
> 
> 标签：c#, nservicebus

当创建一个 NServiceBus SendOnly 端点时，其目的是一劳永逸，即只发送一条消息，然后其他人会处理它。这似乎是我需要的东西。我不希望总线和系统处理消息之间有任何通信。系统“A”想要通知系统“B”某事。

好吧，如果非常简单，那么创建一个 SendOnly 端点，但是系统监听来自 SendOnly 端点的消息呢？

我正在尝试在将处理消息的命令行项目中设置一个侦听器。消息被发送到队列，但它们没有被系统“B”处理。

这是错误的方法吗？对于这种类型的功能来说，总线是否矫枉过正？

系统A：

```
public class Program
{
    static void Main(string[] args)
    {
        var container = new UnityContainer();

        var bus = Configure.With()
            .UnityBuilder(container)
            .JsonSerializer()
            .Log4Net()
            .MsmqTransport()
            .UnicastBus()
            .SendOnly();

        while(true)
        {
            Console.WriteLine("Send a message");
            var message = new Message(Console.ReadLine());
            bus.Send(message);
        }
    }
} 
```

系统 B：

```
class Program
{
    static void Main(string[] args)
    {
        var container = new UnityContainer();

        var bus = Configure.With()
            .UnityBuilder(container)
            .JsonSerializer()
            .Log4Net()
            .MsmqTransport()
            .UnicastBus()
            .LoadMessageHandlers()
            .CreateBus()
            .Start();

        Console.WriteLine("Waiting for messages...");

        while(true)
        {

        }
    }
}

public class MessageHandler : IHandleMessages<Message>
{
    public void Handle(Message message)
    {
        Console.WriteLine(message.Data);
    }
}

public class Message : IMessage
{
    public Message()
    {

    }

    public Message(string data)
    {
        Data = data;
    }

    public string Data { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T10:25:48.563

在 MessageEndpointMappings 中，您需要按如下方式对其进行更新：

1.  将 DLL 替换为包含您的消息的程序集的名称（例如“消息”）
2.  将端点更改为系统 B 正在读取的队列的名称（您可以通过查看私有队列下的 MSMQ 管理单元来检查队列名称）。

> ```
> <add Messages="Messages" Endpoint="SystemB" /> 
> ```

NServiceBus 3 根据宿主程序集的命名空间自动创建队列名称。

此外，您可能希望查看使用[NServiceBus.Host](http://nservicebus.com/GenericHost.aspx)来托管您的处理程序，而不是您自己的控制台应用程序。

# c# - JSON RPC 返回数字作为属性名称

> ID：10189048
> 
> 赞同：0
> 
> 时间：2012-04-17T09:58:35.673
> 
> 标签：c#, json, json-rpc

我从 oracle 服务器收到了这个 JSON 字符串（一个非常大的字符串的一部分）（数据是不可更改的），但现在我遇到了无法反序列化这个繁琐的问题..

```
 "rows":[
     {
        "1":"0000000001",
        "2":"SPARE00002",
        "5":"151.3354",
        "13":"100",
        "100000":"000000",
        "100001":"FFFFFF",
        "rowid":"0000000001"
     }, 
```

使用 NewtonSoft.JSon 它创建类：

```
public class Row
{
    public string __invalid_name__1 { get; set; }
    public string __invalid_name__2 { get; set; }
    public string __invalid_name__5 { get; set; }
    public string __invalid_name__13 { get; set; }
    public string __invalid_name__100000 { get; set; }
    public string __invalid_name__100001 { get; set; }
    public string rowid { get; set; }
} 
```

在尝试反序列化到类中时，我得到了令人敬畏的错误：无法评估表达式。

有什么方法可以正确格式化，以便 c# 意识到字符串 NAME 与 JSON 字符串发送的属性名称相同？

非常感谢任何帮助！

编辑！找到了解决方案！通过将 [JsonProperty("1")] ..etc 添加到无效的名称字符串，问题自行解决！惊人的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:05:51.630

在每个无效的属性名称上，添加属性：`[JsonProperty("1")]`

# xml - 将 Schematron 错误消息国际化的最佳方法是什么？

> ID：10189053
> 
> 赞同：1
> 
> 时间：2012-04-17T09:58:56.273
> 
> 标签：xml, xslt, localization, internationalization, schematron

在您看来，将 Schematron 错误消息国际化的最佳方式是什么？我不想复制 schematron 文件，只想复制断言和报告消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T08:58:16.537

我在 schematron ISO 标准文档中偶然发现了这一点：

```
Diagnostics in multiple languages may be supported 
by using a different diagnostic element for each language, 
with the appropriate xml:lang language attribute, 
and referencing all the unique identifiers of the diagnostic elements 
in the diagnostics attribute of the assertion. 
Annex G gives a simple example of a multi-lingual schema. 
```

附件 G：

```
<sch:schema xmlns:sch="http://purl.oclc.org/dsdl/schematron"
    xml:lang="en" >
    <sch:title>Example of Multi-Lingual Schema</sch:title>
    <sch:pattern>
        <sch:rule context="dog">
            <sch:assert test="bone" diagnostics="d1 d2">
    A dog should have a bone.
            </sch:assert>
        </sch:rule>
    </sch:pattern>
    <sch:diagnostics>
        <sch:diagnostic id="d1" xml:lang="en">
    A dog should have a bone.
        </sch:diagnostic>
        <sch:diagnostic id="d2" xml:lang="de">
    Ein Hund sollte ein Bein haben.
        </sch:diagnostic>
    </sch:diagnostics>
</sch:schema> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T05:57:09.787

有关详细信息，请参阅[XML 国际化的最佳实践](http://www.w3.org/TR/xml-i18n-bp/)。简而言之，您可以使用 xml:lang 属性将任何 XML 文档中的消息国际化。

例子：

```
 <messages xmlns:xml="http://www.w3.org/XML/1998/namespace">
  <message Id="cannot-find-file-msg">
   <message-text xml:lang="en">Cannot find file.</message-text>
   <message-text xml:lang="fr">Fichier non trouvé.</message-text>
  </message>
 </messages> 
```

在上面的示例中，您可以访问所需的消息文本，给定本地语言、消息标识符和 XPATH 表达式。

# c# - 使用 DotnetopenAuth 时报告和记录错误

> ID：10189055
> 
> 赞同：3
> 
> 时间：2012-04-17T09:59:04.770
> 
> 标签：c#, asp.net-mvc-4, dotnetopenauth

想要连接 Withings API。我在另一个项目中使用了相同的控制器，他工作得很好。在站点是 Azure webrole 的项目中（不知道这是怎么回事）它只是不起作用。首先我得到

> 'DotNetOpenAuth.Reporting' 的类型初始化程序引发了异常。

所以我在 web.config 中关闭了它

> 报告启用=“假”

现在我得到了

> 'DotNetOpenAuth.Logger' 的类型初始化程序引发了异常。

我不使用 log4net。

```
 public ActionResult StartOAuth()
    {

        var serviceProvider = GetServiceDescription();
        var consumer = new WebConsumer(serviceProvider, _tokenManager);

        // Url to redirect to
        var authUrl = new Uri(Request.Url.Scheme + "://" + Request.Url.Authority + "/Withings/OAuthCallBack");

        // request access
        consumer.Channel.Send(consumer.PrepareRequestUserAuthorization(authUrl, null, null));

        // This will not get hit!
        return null;
    }

private ServiceProviderDescription GetServiceDescription()
    {
        return new ServiceProviderDescription
        {
            AccessTokenEndpoint = new MessageReceivingEndpoint("https://oauth.withings.com/account/access_token", HttpDeliveryMethods.PostRequest),
            RequestTokenEndpoint = new MessageReceivingEndpoint("https://oauth.withings.com/account/request_token", HttpDeliveryMethods.PostRequest),
            UserAuthorizationEndpoint = new MessageReceivingEndpoint("https://oauth.withings.com/account/authorize", HttpDeliveryMethods.PostRequest),
            TamperProtectionElements = new ITamperProtectionChannelBindingElement[] { new HmacSha1SigningBindingElement() },
            ProtocolVersion = ProtocolVersion.V10a
        };
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T07:15:21.280

所以事实证明这是 Azure 的错。其中`web.config`有一个部分破坏了**DotnetOpenAuth**。删除此部分是一种解决方法。可能添加**log4net**也可以解决这个问题，但我没有测试。

```
<trace> 
<listeners> 
<add type="Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener, Microsoft.WindowsAzure.Diagnostics, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" name="AzureDiagnostics"> 

<filter type="" /> 
</add> 
</listeners> 
</trace> 
```

# jquery - 在基于母版页的asp.net Web应用程序中使用JQuery打开弹出窗口

> ID：10189068
> 
> 赞同：0
> 
> 时间：2012-04-17T09:59:42.127
> 
> 标签：jquery, asp.net, master-pages

我有一个基于母版页的 asp.net 4 Web 应用程序。在母版页中，我引用了所需的脚本和 css 文件。但是，当页面加载时，我收到一个 JavaScript 错误“Microsoft JScript 运行时错误：预期对象”。我知道这与母版页有关，因为如果我构建没有母版页的测试应用程序，则代码可以正常工作。

**母版页代码**

```
 <%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Site1.master.cs" Inherits="WebApplication2.Site1" %>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
    <script src="Popup.js" type="text/javascript"></script>
    <link rel="stylesheet" href="StyleSheet1.css" type="text/css" media="screen" />
    <script type="text/javascript" src="jquery-1.7.1.min.js"></script>
    <title>Test</title>
    <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>
    </head>
    <body>
        <form id="form1" runat="server">
    <div>
        <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
        </asp:ContentPlaceHolder>
    </div>
    </form>
    </body>
    </html> 
```

**弹出代码**

```
function Popup() {
        window.showModalDialog("webForm3.aspx", "");
    }

$(document).ready(function () {
    $("#button").click(function () {
        var isChecked = $('#checkbox1').is(':checked');
        if (isChecked) {
            Popup();
        }
    });
}); 
```

**主页代码**

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site1.Master" AutoEventWireup="true"
CodeBehind="WebForm1.aspx.cs" Inherits="WebApplication2.WebForm1" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
Check box
    <div id="button">
        <asp:CheckBox ID="checkbox1" runat="server" /></div>
</asp:Content> 
```

弹出页面代码

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm3.aspx.cs"     Inherits="WebApplication2.WebForm3" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0     Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title>Popup</title>
</head>
<body>
<form id="form1" runat="server">
<div>
Hellow World
</div>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:28:57.433

```
//================  site1.master  =======================//

<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="site1.master.cs" Inherits="NewJqueryPlugins.site1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script src="Popup.js" type="text/javascript"></script>
    <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
        </asp:ContentPlaceHolder>
    </div>
    </form>
</body>
</html>

//================  popup.js  =======================//

$(document).ready(function () {
    $('#button').click(function (e) {
        //var isChecked = $(this).find('#ContentPlaceHolder1_checkbox1').is(':checked');

        //Or

        var isChecked = $(this).find(':checkbox').is(':checked');

        if (isChecked) {
            Popup();
        }
    });
});

function Popup() {
    window.showModalDialog("webForm3.aspx", "");
};

//================  webfrom2.aspx  =======================//

<%@ Page Title="" Language="C#" MasterPageFile="~/site1.Master" AutoEventWireup="true"
    CodeBehind="WebForm2.aspx.cs" Inherits="NewJqueryPlugins.WebForm2" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
    <div id="button" style="border: 2px solid green;">
        Check box
        <asp:CheckBox ID="checkbox1" runat="server" />
    </div>
</asp:Content>

//================  webfrom3.aspx  =======================//

<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm3.aspx.cs" Inherits="NewJqueryPlugins.WebForm3" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title>Popup</title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        Hellow World
    </div>
    </form>
</body>
</html> 
```

# android - 更改首选项标题列表的颜色

> ID：10189073
> 
> 赞同：4
> 
> 时间：2012-04-17T10:00:03.090
> 
> 标签：android, android-layout

我正在为具有特定配色方案的 android 4.0 平板电脑创建应用程序。我正在使用 Theme.Holo 进行我的活动。我将 Theme.Holo.Light 用于我的 PreferenceActivity。我已经能够使用样式自定义操作栏。我使用 onBuildHeaders 方法创建首选项标题列表，并将不同的首选项分组到片段中（很像 android 系统设置）。我还想更改标题列表元素的颜色以匹配我的应用程序配色方案，但我无法弄清楚如何。请[点击链接](http://www.ImageThe.net/show-image.php?id=f9658acdb50e429e40d39275ddcdc6c1)查看我的偏好活动。

是否可以更改此配色方案以及如何更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T19:19:17.590

首选项标头使用`listViewStyle`xml 属性来确定其样式。如果您想对其进行自定义，请使用您自己的样式覆盖该设置。例如：

**主题.xml**

```
<style name="Theme.Custom" parent="android:Theme.Holo.Light.DarkActionBar">
    <item name="android:listViewStyle">@style/MyListViewStyle</item>
</style> 
```

**样式.xml**

```
<style name="MyListViewStyle" parent="@android:style/Widget.Holo.Light.ListView">
    <item name="android:background">@color/custom_color</item>
    <item name="android:listSelector">@drawable/my_selector</item> 
</style> 
```

# java - 解码从 XML 文件中检索到的特殊字符

> ID：10189078
> 
> 赞同：1
> 
> 时间：2012-04-17T10:00:19.177
> 
> 标签：java

这是关于从通过解析器从数据库内部检索的 XML 文件中的特殊字符解码。我们得到的部分数据是

```
&quot;qutes&quot;, sigle quotes&#39;, namne? 
```

在这里，XML 字符 '`&quot;`应该被转换为像 " 这样的普通引号。类似的方式`'&#39;'`是单引号（撇号）。在 JAVA 中有没有办法做到这一点。如果您需要任何信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:05:41.067

如果您使用 Stax 或 DOM 解析您的 XML，这将被自动处理。如果没有，这里有一个重复的线程：[如何解码字符串中编码的特殊 XML 字符？](https://stackoverflow.com/questions/2241787/how-to-decode-encoded-special-xml-characters-in-a-string)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:04:34.860

试试这个：[StringEscapeUtils.unescapeHTML()](http://commons.apache.org/lang/api-2.6/org/apache/commons/lang/StringEscapeUtils.html#unescapeHtml%28java.lang.String%29)

> 将包含实体转义的字符串取消转义为包含与转义对应的实际 Unicode 字符的字符串。支持 HTML 4.0 实体。例如，字符串 " `&lt;Fran&ccedil;ais&gt;`" 将变为 " `<Français>`" 如果实体无法识别，则将其单独保留，并逐字插入结果字符串中。例如“ `&gt;&zzzz;x`”将变为“ `>&zzzz;x`”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-22T10:33:06.277

您可以使用 PrintWriter 。印刷厂 您现在还可以使用 XPL 而不是 XML 来存储数据。[XPL 与 XML 类似，但允许在文本元素中使用特殊字符](http://hll.nu/xpl/xpl1.htm)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T10:19:26.217

利用：

[http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/DatatypeConverter.html#parseString%28java.lang.String%29](http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/DatatypeConverter.html#parseString%28java.lang.String%29)

还可以考虑使用 JAXB，它将为您完成所有转换。

# symfony1 - Symfony 1.4 验证器

> ID：10189079
> 
> 赞同：0
> 
> 时间：2012-04-17T10:00:21.757
> 
> 标签：symfony1, symfony-1.4, customvalidator

我对 symfony 1.4 验证器有疑问

我想编写自己的验证器，但我有一个小问题。

我的错误信息与表单配置中的值相同

我的代码

```
class sfValidatorDefaultString extends sfValidatorString{

  protected function configure($options = array(), $messages = array())
  {
    parent::configure($options, $messages);

    $this->addMessage('default_string', 'Error message');

    $this->addOption('default_string');
  }
  protected function doClean($value)
  {
    $clean = parent::doClean($value);

    // tutaj utknąłem 
    if(in_array($value, $this->getOptions('default_string')))
    {
         throw new sfValidatorError($this, 'default_string', array('value' => $value['name'], 'default_string' => $this->getOption('default_string')));
    }

    return $clean;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:54:44.333

当您在表单上遇到错误时，您总是有相关的小部件（此处`name`）和该小部件的错误消息（此处`Error message`）。

如何在模板中显示错误？使用自定义方式还是通常的方式（使用`<?php echo $form ?>`）？

对于`addMessage`and `sfValidatorError`，当 symfony 抛出`sfValidatorError`第二个参数是错误代码。它将尝试查找您在配置中明确定义的此错误代码的消息：

```
$this->addMessage('default_string', 'Error message'); 
```

# java - 面向服务的架构spring-mvc

> ID：10189083
> 
> 赞同：4
> 
> 时间：2012-04-17T10:00:50.153
> 
> 标签：java, web-services, rest, spring-mvc

我有一个返回 pojo 的 spring mvc 控制器：

```
@RequestMapping(value = "/person", method = RequestMethod.POST,headers="Accept=application/xml, application/json")
public @ResponseBody Person addPerson(@RequestBody Person person) {
  return personService.add(person);
} 
```

此控制器位于服务器 A 上的 war 文件 A 中。

我有另一个 spring 应用程序，war 文件 b，它可能在不同的服务器或同一台服务器上运行。访问 addPerson 方法的最佳方法是什么？通过 http 请求或将类文件（和依赖项）打包为 jar 并包含在 war 文件 b 中？或者我是不是搞错了，应该做点别的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T10:09:22.003

没有“最好的方法”，这完全取决于具体情况。战争 A 是否依赖于很多外部依赖项或数据库？如果是这样，将其包含在战争 B 中可能是不利的（实际上是在所有外部依赖项上复制负载），并且 Web 服务方法可能会更好。如果 A 是一个非常简单的应用程序，那么 Web 服务集成的额外复杂性可能会过大。也许他们应该完全合并？

但总的来说，您应该问自己（或写 A 和 B 的人）为什么将它们分成两个不同的应用程序。这可能是有原因的，如果它是一个令人信服的原因，您可能应该保持分离并进行 Web 服务调用。

# c - 如何摆脱 libxml2 错误消息

> ID：10189085
> 
> 赞同：1
> 
> 时间：2012-04-17T10:00:53.550
> 
> 标签：c, xml, xml-parsing

我想使用 libxml2 库来解析我的 xml 文件。现在，当我有一些错误的 xml 文件时，lib 本身正在打印大量错误消息。

下面是一些示例代码

```
reader = xmlReaderForFile(filename, NULL, 0);
if (reader != NULL) {
   ret = xmlTextReaderRead(reader);
   while (ret == 1) {
       printf("_________________________________\n");
       processNode(reader);
       ret = xmlTextReaderRead(reader);
       printf("_________________________________\n");
   }
   xmlFreeTextReader(reader);
   if (ret != 0) {
       fprintf(stderr, "%s : failed to parse\n", filename);
   }
} 
```

在上面的例子中，如果我有错误的 xml 文件，我会得到这样的错误

```
my.xml:4: parser error : attributes construct error
 include type="text"this is text. this might be excluded in the next occurrence 

my.xml:4: parser error : Couldn't find end of Start Tag include
 include type="text"this is text. this might be excluded in the next occurrence 

my.xml : failed to parse 
```

相反，我只想返回一些错误号。并摆脱这些丑陋的 lib 消息。

我该怎么办 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T10:32:44.947

最后一个参数`xmlReaderForFile(filename, NULL, 0);`是一组选项标志。阅读[这些标志的文档](http://xmlsoft.org/html/libxml-parser.html#xmlParserOption)，我看到您可能想要设置两个选项： `XML_PARSE_NOERROR`和`XML_PARSE_NOWARNING`. 请注意，我没有尝试过任何这些，我只是用谷歌搜索了 libxml2 和 xmlReaderForFile。

您将需要像这样将标志或标志放在一起：

```
reader = xmlReaderForFile(filename, NULL, XML_PARSE_NOERROR | XML_PARSE_NOWARNING); 
```

# grails - 剑道网格按降序排序

> ID：10189086
> 
> 赞同：12
> 
> 时间：2012-04-17T10:00:54.633
> 
> 标签：grails, kendo-ui, kendo-grid

我在我的 Grails 应用程序中使用 Kendo 网格，我的要求是在插入行后立即按降序对“日期”列进行排序，以便最近的日期出现在网格的第一行。

如何按日期列排序？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-31T17:50:35.047

默认排序标准是您的数据源上的一个属性：

```
sort: { field: "date", dir: "desc"} 
```

# jakarta-ee - Portal Server 作为解决方案太重了

> ID：10189090
> 
> 赞同：1
> 
> 时间：2012-04-17T10:01:01.697
> 
> 标签：jakarta-ee, frameworks, enterprise-portal

您好我有一个要设计的应用程序，并且正在考虑是否将其构建为 JSR 兼容的 portlet 以部署在门户服务器上或作为普通的 Java Web 应用程序。

这些要求并没有要求很多类似门户的功能，但只有少数几个，例如：需要将各个组件设计为可以插入页面并由管理员配置的小部件。管理员还应该能够在运行时决定目标页面，并且应该能够管理需要放置在页面中的组件，并且应该能够控制布局。

我知道门户服务器很容易满足这些要求，并将组件单独设计为 portlet，但是是否有任何替代框架或框架集可以帮助实现上述两个并且作为打包解决方案仍然是轻量级的。

像 - Spring + Tiles + Velocity 模板之类的东西？

# c - 继续扫描命令行中的所有输入。C程序

> ID：10189091
> 
> 赞同：1
> 
> 时间：2012-04-17T10:01:05.787
> 
> 标签：c, command-line, input, scanf

我正在尝试从命令行获取所有输入并将其放入链接列表中。命令行中的数字采用这种格式 0-1 2-3 4-9 etcc 这是我在两个变量中存储一对数字的方法：

```
scanf("%d-%d", &a, &b); 
```

现在，这个 scanf 语句在一个循环中，我的问题是：循环的条件是什么？我想继续做 scanf 直到所有输入完成。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T10:10:07.870

一个著名的，如果不是臭名昭著的特征`scanf`是，它会在读取非字符串数据（例如，`int`）时将数据留在输入缓冲区中。在这里查看：将[数据留在输入缓冲区](http://sourceforge.net/apps/mediawiki/cpwiki/index.php?title=Scanf_woes)中。

试试这个：

```
do
{
  int x = scanf("%d-%d", &a, &b);
}while ((x != EOF) && (getchar() != '\n')); 
```

您需要将`scanf`输出与 EOF 进行比较。最重要的是，您需要在输入缓冲区中清除`'\n'`左侧。`scanf`

# java - LinkedIn 集成到 Android 应用程序中

> ID：10189096
> 
> 赞同：1
> 
> 时间：2012-04-17T10:02:07.933
> 
> 标签：java, android, linkedin

我正在为我的 Android 应用程序构建 LinkedIn 共享功能。我可以登录 LinkedIn，但之后模拟器显示空白屏幕。我究竟做错了什么？

这是代码，我的`consumer_key`和`consumer_secret`删除的：

```
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;

import oauth.signpost.OAuth;
import oauth.signpost.OAuthConsumer;
import oauth.signpost.commonshttp.CommonsHttpOAuthConsumer;
import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

import com.google.code.linkedinapi.client.LinkedInApiClient;
import com.google.code.linkedinapi.client.LinkedInApiClientFactory;
import com.google.code.linkedinapi.client.oauth.LinkedInAccessToken;
import com.google.code.linkedinapi.client.oauth.LinkedInOAuthService;
import com.google.code.linkedinapi.client.oauth.LinkedInOAuthServiceFactory;
import com.google.code.linkedinapi.client.oauth.LinkedInRequestToken;
import com.google.code.linkedinapi.schema.Person;
import com.ndot.sample.R;
import com.ndot.sample.TestConnect;

public class LinkedinActivity extends Activity {

    public static final String CONSUMER_KEY = "xxxxxxxxxxxxx";
    public static final String CONSUMER_SECRET = "xxxxxxxxxx";
    public static final String APP_NAME = "LITest";
    public static final String OAUTH_CALLBACK_SCHEME = "x-oauthflow-linkedin";
    public static final String OAUTH_CALLBACK_HOST = "litestcalback";
    public static final String OAUTH_CALLBACK_URL = OAUTH_CALLBACK_SCHEME
            + "://" + OAUTH_CALLBACK_HOST;
    private static final int BOOK_SELECT = 1;
    DefaultHttpClient httpclient = new DefaultHttpClient();
    HttpPost post = new HttpPost("https://api.linkedin.com/v1/people/~/shares");

    final LinkedInOAuthService oAuthService = LinkedInOAuthServiceFactory
            .getInstance().createLinkedInOAuthService(CONSUMER_KEY,
                    CONSUMER_SECRET);
    final LinkedInApiClientFactory factory = LinkedInApiClientFactory
            .newInstance(CONSUMER_KEY, CONSUMER_SECRET);
    LinkedInRequestToken liToken;
    LinkedInApiClient client;
    TextView tv;
    private String oauth_verifier;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.hionCreate(savedInstanceState);
        setContentView(R.layout.post);
        tv = (EditText) findViewById(R.id.postscreen);
        liToken = oAuthService.getOAuthRequestToken(OAUTH_CALLBACK_URL);
    Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse(liToken
                .getAuthorizationUrl()));
    Log.d("log",liToken.getAuthorizationUrl());

    }

        @Override
    protected void onNewIntent(Intent intent) {
        String verifier = intent.getData().getQueryParameter("oauth_verifier");
        LinkedInAccessToken accessToken = oAuthService.getOAuthAccessToken(liToken, verifier);
        client = factory.createLinkedInApiClient(accessToken);
        client.postNetworkUpdate("LinkedIn Android app test");
        Person p = client.getProfileForCurrentUser();
        tv.setText(p.getLastName() + ", " + p.getFirstName());
        LinkedInAccessToken accessToken1 = oAuthService.getOAuthAccessToken(liToken, oauth_verifier);
        SharedPreferences prefs = null;
        final Editor edit = prefs.edit();
        edit.putString(OAuth.OAUTH_TOKEN, accessToken.getToken());
        edit.putString(OAuth.OAUTH_TOKEN_SECRET, accessToken.getTokenSecret());
        edit.putString("linkedin_login", "valid");

    }
    protected void onNewIntent1(Intent intent) {
    String verifier = intent.getData().getQueryParameter("oauth_verifier"); LinkedInAccessToken accessToken = oAuthService.getOAuthAccessToken(liToken, verifier); 
    client = factory.createLinkedInApiClient(accessToken);

    Intent t = new Intent(LinkedinActivity.this, LinkedinConstants.class);
    startActivity(t);
    }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T07:23:04.693

应用适当数量的错误处理、日志记录和调试。我没有看到检查任何错误或失败条件。你的回调被调用了吗？尝试单步调试调试器。

虽然我对 Linkedin 开发有点陌生，但我对 Android 开发非常熟悉，并且还让 Linkedin 小部件可以在 Web 上工作。在获取授权令牌之前，您需要从 Linkedin 取回一些验证。这就是回调发挥作用的地方。

我希望这能让你朝着正确的方向前进。让我们知道你发现了什么。

# iphone - xcode 将类型显示为“id”而不是 Code Sense 中的原始类型

> ID：10189097
> 
> 赞同：1
> 
> 时间：2012-04-17T10:02:08.077
> 
> 标签：iphone, ios, xcode, ipad

我不知道为什么会这样，但有时 xcode Code Sense 会将对象的类型显示为“id”而不是实际类型。我已经声明了一个可变数组的属性并合成了它，在 -dealloc() 中释放了它，在我的代码中没有任何地方使用过它，任何其他代码都不包含任何错误，（xcode 也不显示单个警告）。尽管如此，当我打开这个对象的代码感知时，它显示它的类型为 id，而不是 NSMutableArray。

# javascript - 当我移动它时，Chrome 会隐藏我的窗口

> ID：10189101
> 
> 赞同：1
> 
> 时间：2012-04-17T10:02:20.570
> 
> 标签：javascript, google-chrome

我有这个通用的javascript函数来打开一个窗口：

```
function OpenWindow(url,windowname,wide,high)
{
    spop=window.open(url,windowname,"width="+wide+",height="+high+",scrollbars=1,resizable=1,statusbar=1,menubar=0");
    spop.moveTo(Math.round((screen.availWidth-wide)/2),Math.round((screen.availHeight-high)/2));
    spop.focus();
} 
```

打开后，我把它移到屏幕中间。问题是 Chrome 当前正在隐藏打开的窗口（它在 Explorer 和 Firefox 中运行良好）。它打开它，移动它，但随后窗口保持最小化且无法访问。

有趣的是，如果我**双击**调用该函数的链接，那么窗口就会出现在它应该出现的位置，只是它的大小和高度不正确（它非常小，我必须调整它的大小）。更有趣的是，它曾经在 Chrome 中工作，但几个月前就停止工作了。

显然问题不在于 focus() 调用（我发现有人对此有问题）。如果我删除 moveTo()，窗口会出现（但不居中）。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:54:18.030

事实证明，这是当前 Chrome 版本中的一个已知错误：

[http://code.google.com/p/chromium/issues/detail?id=115585](http://code.google.com/p/chromium/issues/detail?id=115585)

似乎解决方法是在调用 open 后延迟对 resizeTo 或 moveTo 的任何调用，例如：

```
setTimeout(function(){
    spop.moveTo(
        Math.round((screen.availWidth - wide) / 2),
        Math.round((screen.availHeight - high) / 2)
    );
    spop.focus();
},100); 
```

不是最优雅的解决方案，但在修复错误之前应该足够了。

# c# - 当我通过 jquery 发布时，服务器验证不起作用

> ID：10189105
> 
> 赞同：2
> 
> 时间：2012-04-17T10:02:27.683
> 
> 标签：c#, jquery, asp.net-mvc, asp.net-mvc-3, razor

我有一个类问题，其属性如下：

```
[Required]
public string Subject { get; set; }
[Required]
public string Content { get; set; } 
```

我尝试做一些服务器验证。我已经包含了这些脚本：

```
<script src="@Links.Scripts.jquery_validate_min_js" type="text/javascript"></script>
<script src="@Links.Scripts.jquery_validate_unobtrusive_min_js" type="text/javascript"></script> 
```

这是“创建”视图：

```
<dt><span>Question title*</span>please be specific but brief</dt>
<dd>@Html.TextBoxFor(m => m.Subject, new { @class = "boxsizingBorder" }) @Html.ValidationMessageFor(m=>m.Subject)</dd>
<dt><span>Question details</span></dt>
<dd>@Html.TextAreaFor(m => m.Content, 7, 30, new { @class = "boxsizingBorder" })@Html.ValidationMessageFor(m => m.Content)</dd> 
```

当我尝试发布这样的新问题时：

```
$('#saveChanges').click(function () {
    $('#createQuestion').submit();
}); 
```

（`#saveChanges`是我的跨度`#createQuestion`的ID，是我的表格的ID）

如果我不填写示例主题字段，我会暂时看到一条错误消息（必填字段等），但无论如何都会发布问题。这是因为我试图使用 jQuery 或什么来发布表单吗？

在这种情况下，服务器验证应该如何工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T21:30:17.807

您需要在提交之前实际调用 Jquery validate 以执行验证。就像是：

```
$('#saveChanges').click(function (event) {
   $("#yourForm").validate();
   if ($("#yourForm").valid()) {
       $('#createQuestion').submit();
   }

   event.preventDefault; //this is needed if your saveChanges button is a submit button
}); 
```

# perl - 如何使perl中的图表中的每个条都可点击

> ID：10189110
> 
> 赞同：0
> 
> 时间：2012-04-17T10:02:51.927
> 
> 标签：perl, perl-module

我已经生成了一个图表。单击图表中的每个条形图，我应该能够生成另一个图表。我正在使用 GD::Graph 模块。如果无法使条形图可点击，有没有办法至少可以点击 x 轴值？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:27:26.207

如果您想要用户交互，我相信您需要使用 GUI 工具包，例如[Prima](http://www.prima.eu.org/)（[CPAN 链接](http://search.cpan.org/~karasik/Prima/Prima.pm)）、[Gtk2](http://gtk2-perl.sourceforge.net/)（[CPAN 链接](http://search.cpan.org/~xaoc/Gtk2-1.242/lib/Gtk2.pm)）或其他东西。（请注意，[Qt](http://perlqt.sourceforge.net/)绑定是旧的，我不确定它们现在是否有效。）例如，我认为使用 GD::Graph 创建图像文件然后将其[加载到 Prima](http://search.cpan.org/~karasik/Prima/pod/Prima/image-load.pod)中并不难。您必须编写自己的 MouseDown 例程，这可能超出您的技能或兴趣，但我认为这是（目前）唯一的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:47:20.223

我同意大卫的观点，你需要制作可点击的输出。如果您使用的是 Web 界面，那么您可能需要使用 javascript 库创建 Canvas 图，而不是通过 GD 生成图像。有很多可供选择。例如，快速搜索出现了高[图表](http://www.highcharts.com/)。

如果您正在制作非浏览器 GUI，那么 David 可以满足您的需求。

# google-maps - Google Fusion Tables 查询：全选选项

> ID：10189112
> 
> 赞同：1
> 
> 时间：2012-04-17T10:02:55.837
> 
> 标签：google-maps, google-fusion-tables

我坚持对我的 Fusion Tables 地图进行最后的修改。如何更改我的代码以便在查询中获得全选选项？

我找到了这段代码...

[https://developers.google.com/fusiontables/docs/samples/change_query](https://developers.google.com/fusiontables/docs/samples/change_query)

并将其放入我自己的代码中。但是我做错了什么？

```
<!DOCTYPE html>
<html>
  <head>
 <title>Aarbevingen 1900-2012 (+1000 dodelijke slachtoffers)</title>
  <style>
    #map-canvas { width:1000px; height:600px; }
  </style>
  <script type="text/javascript"
    src="http://maps.google.com/maps/api/js?sensor=false">
  </script>
  <script type="text/javascript">
    var map;
    var layer;
    var layerl1;
    var layerl2;
    var layerl3;  

    function initialize() {
      map = new google.maps.Map(document.getElementById('map-canvas'), {
        center: new google.maps.LatLng(0, 20),
        zoom: 2
      });
      var style = [
        {
          featureType: 'all',
          elementType: 'all',
          stylers: [
            { saturation: -99 }
          ]
        }
      ];
      var styledMapType = new google.maps.StyledMapType(style, {
        map: map,
        name: 'Styled Map'
      });
      map.mapTypes.set('map-style', styledMapType);
      map.setMapTypeId('map-style');

      layer = new google.maps.FusionTablesLayer({
        query: {
          select: "'Locatie'",
          from: 3555344
        },
        map: map
        });

      layer11 = new google.maps.FusionTablesLayer({
        query: {
          select: "'geometry'",
          from: 3556478
        },
        clickable: false,
        map: map
      });

      layer12 = new google.maps.FusionTablesLayer({
        query: {
          select: "'geometry'",
          from: 3556541
        },
        clickable: false,
        map: map
      });

      layer13 = new google.maps.FusionTablesLayer({
        query: {
          select: "'geometry'",
          from: 3556712
        },
        clickable: false,
        map: map
      });

       google.maps.event.addDomListener(document.getElementById('search-string-10'),
            'change', function() {
              updateMap(layer);
        });

var legendDiv = document.createElement('DIV');
  var legend = new Legend(legendDiv, map);
  legendDiv.index = 1;
  map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(legendDiv);      

    }

   function changeMap10(layer) {
        var searchString = document.getElementById('search-string-10').value;
        if (searchString) {
          layer.setOptions({
            query: {
              select: "'Locatie'",
              from: 3555344,
              where: "search-string-10 = '" + searchString + "'"
            }
          });
        } else {
          layer.setOptions({
            query: {
              select: "'Locatie'",
              from: 3555344
            }
          });
        }
      }   

function Legend(controlDiv, map) {
  // Set CSS styles for the DIV containing the control
  // Setting padding to 5 px will offset the control
  // from the edge of the map
  controlDiv.style.padding = '5px';

  // Set CSS for the control border
  var controlUI = document.createElement('DIV');
  controlUI.style.backgroundColor = 'white';
  controlUI.style.borderStyle = 'solid';
  controlUI.style.borderWidth = '1px';
  controlUI.title = 'Legend';
  controlDiv.appendChild(controlUI);

  // Set CSS for the control text
  var controlText = document.createElement('DIV');
  controlText.style.fontFamily = 'Arial,sans-serif';
  controlText.style.fontSize = '11px';
  controlText.style.paddingLeft = '4px';
  controlText.style.paddingRight = '4px';

  // Add the text
  controlText.innerHTML = '<b>Legenda</b><br />' +
    '<div style="background-color: #ff0000; height: 10px; width: 10px; margin: 2px; float: left;"></div>> 100.000 doden<br />' +
    '<div style="background-color: #ffff00; height: 10px; width: 10px; margin: 2px; float: left;"></div>10.000-100.000 doden<br />'+
    '<div style="background-color: #00ff00; height: 10px; width: 10px; margin: 2px; float: left;"></div>1.000-10.000 doden<br />';
  controlUI.appendChild(controlText);
}    

    google.maps.event.addDomListener(window, 'load', initialize);

  </script>
  </head>
  <body>
    <div id="map-canvas"></div>
    <div style="margin-top: 10px;">
      <label>Dodental</label>
        <select id="search-string-10">
        <option value="">--Selecteer--</option>
        <option value="1.000-10.000">1.000-10.000</option>
        <option value="10.000-100.000">10.000-100.000</option>
        <option value="> 100.000">> 100.000</option>
      </select>
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:45:29.183

我将您的代码放在 jsFiddle 中，并稍作改进：http: [//jsfiddle.net/odi86/hqm5k/](http://jsfiddle.net/odi86/hqm5k/)

首先：你应该从你的选择列表中返回可用的值，所以我改变了：

```
<select id="search-string-10">
  <option value="">All</option>
  <option value="1000">1.000-10.000</option>
  <option value="10000">10.000-100.000</option>
  <option value="100000"> 100.000</option>
</select> 
```

为了清楚起见，我为“所有”记录添加了一个新条目，但它与第一​​个不返回值的条目基本相同。

然后您可以在查询中使用此值：

**编辑：**如果没有选择特定选项，我更改了此函数以将 where 条件设置为空字符串

```
function changeMap10(layer) {
    var searchString = document.getElementById('search-string-10').value;
    var whereCondition = '';
    if (searchString) {
        whereCondition = "zoekveld = '" + searchString + "'";
    }
    layer.setOptions({
        query: {
          select: "'Locatie'",
          from: 3555344,
          where: whereCondition 
        }
    });
 } 
```

if/else 不是必需的，您可以使用具有默认值的相同查询。

最后，我更改了事件侦听器以调用您的`changeMap10()`函数，而不是`updateMap()`示例中的函数：

```
google.maps.event.addDomListener(document.getElementById('search-string-10'),
    'change', function() {
      changeMap10(layer);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T13:16:52.133

奥迪是正确的。此答案还有更多示例：[https](https://stackoverflow.com/a/9401345/1211981) ://stackoverflow.com/a/9401345/1211981 此外，要获取所有记录，您可以使用空的 where 子句：

```
where: "" 
```

此外，数字不应该需要引号，所以 where 应该是：

```
where: "Dodental > " + searchString, 
```

# android - 安卓 USBHost 闪存盘

> ID：10189118
> 
> 赞同：5
> 
> 时间：2012-04-17T10:03:25.157
> 
> 标签：android, usb

我正在尝试制作用于读取使用 OTG 电缆连接到带有 ICS 的 XOOM 的外部存储文件系统的应用程序。我正在使用此代码来确定与闪存设备通信的 IN 和 OUT 端点

```
final UsbDeviceConnection connection = manager.openDevice(device);
UsbInterface inf = device.getInterface(0);
if (!connection.claimInterface(inf, true)) {
    Log.v("USB", "failed to claim interface");
}
UsbEndpoint epOut = null;
UsbEndpoint epIn = null;
// look for our bulk endpoints
for (int i = 0; i < inf.getEndpointCount(); i++) {
    UsbEndpoint ep = inf.getEndpoint(i);
    if (ep.getType() == UsbConstants.USB_ENDPOINT_XFER_BULK) {
        if (ep.getDirection() == UsbConstants.USB_DIR_OUT) {
            epOut = ep;
        } else {
            epIn = ep;
        }
    }
}
if (epOut == null || epIn == null) {
  throw new IllegalArgumentException("not all endpoints found");
}
final UsbEndpoint inEndPoint = epIn; 
```

它工作正常。然后我试图读取前 512 个字节以获取 FAT32 引导扇区

```
ByteBuffer arg1 = ByteBuffer.allocate(512);
UsbRequest request = new UsbRequest();
request.initialize(connection, inEndPoint);
request.queue(arg1, inEndPoint.getMaxPacketSize());
UsbRequest result = connection.requestWait(); // halt here
connection.releaseInterface(inf);
connection.close(); 
```

但它不会从连接的设备读取任何数据。在获得设备许可后，所有这些代码都在单独的线程上运行

```
PendingIntent mPermissionIntent = PendingIntent.getBroadcast(USBHostSampleActivity.this, 0, new Intent(ACTION_USB_PERMISSION), 0);
IntentFilter filter = new IntentFilter(ACTION_USB_PERMISSION);
registerReceiver(mUsbReceiver, filter);
manager.requestPermission(lDevices.get(position),mPermissionIntent); 
```

在广播接收器中，我只是用以前的代码启动新线程；我也尝试拨打 [USBDeviceConnection.controlTransfer](http://developer.android.com/reference/android/hardware/usb/UsbDeviceConnection.html#controlTransfer%28int,%20int,%20int,%20int,%20byte%5B%5D,%20int,%20int%29)

```
byte[] b = new byte[0x10];
int cTransfer = connection.controlTransfer(128, 6, 16, 0,b, 12, 0); 
```

就像在 libusb 示例中获取 f0 数据和/或 hwstats 但它总是返回 -1 我也尝试使用 USBRequst 替换异步请求以同步 bulkTransfers 但结果是相同的。有人使用过这部分 Android SDK 吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T07:29:47.070

看来您缺少整个协议层；您不能只从设备中读取 512 个字节。它应该寄回什么？它怎么会知道你想从磁盘的开头开始读取呢？

您如何从 USB-MSC 设备实际读取内存位置取决于设备子类类型和支持的传输协议。

普通闪存盘很可能将[SCSI 透明命令集](http://www.usb.org/developers/docs/devclass_docs/uasp_1_0.zip)与[USB 海量存储类 Bulk-Only (BBB) 传输](http://www.usb.org/developers/docs/devclass_docs/usbmassbulk_10.pdf)结合使用。

您必须检查设备描述符以找出您的设备支持的内容。另请参阅[MSC 设备类概述](http://www.usb.org/developers/docs/devclass_docs/Mass_Storage_Specification_Overview_v1.4_2-19-2010.pdf)，了解所有可能的值和对其文档的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-21T00:20:32.430

我为此编写了一个名为 libaums 的库：[https ://github.com/mjdev/libaums](https://github.com/mjdev/libaums)

该库负责低级 USB 通信并实现 FAT32 文件系统。它还包括一个示例应用程序。列出目录的工作方式如下：

```
UsbMassStorageDevice[] devices = UsbMassStorageDevice.getMassStorageDevices(this);
device.init();

// we only use the first device
device = devices[0];
// we always use the first partition of the device
FileSystem fs = device.getPartitions().get(0).getFileSystem();
Log.d(TAG, "Capacity: " + fs.getCapacity());
Log.d(TAG, "Occupied Space: " + fs.getOccupiedSpace());
Log.d(TAG, "Free Space: " + fs.getFreeSpace());
UsbFile root = fs.getRootDirectory();

for(UsbFile f : root.listFiles())
    Log.d(TAG, f.getName()) 
```

# jqgrid - 网格外的 jqGrid 高级搜索按钮

> ID：10189128
> 
> 赞同：0
> 
> 时间：2012-04-17T10:04:09.040
> 
> 标签：jqgrid

我在 jqGrid 之外有高级搜索按钮。我在用：

```
var pSearch = //How do I get this object as mine is constructed in c# code. How do I get it from jqGrid's property collection or options??

$("#list").jqGrid("searchGrid",pSearch); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:56:16.023

的典型用法`searchGrid`是

```
$("#list").jqGrid("searchGrid"); 
```

或者

```
$("#list").jqGrid("searchGrid", {multipleSearch: true}); 
```

因为“高级搜索”对话框中所有真正重要的选项都在`colModel`.

我个人更喜欢第一种形式，并通过`$.jgrid.search`在我包含在项目的每个页面上的一些 JavaScript 文件中进行搜索来设置常用设置。例如

```
$.extend($.jgrid.search, {
    multipleSearch: true,
    multipleGroup: true,
    recreateFilter: true,
    overlay: 0
}); 
```

# mysql - 从表中检索最接近某个日期的前 10 个结果并保持升序排序

> ID：10189129
> 
> 赞同：3
> 
> 时间：2012-04-17T10:04:14.927
> 
> 标签：mysql, database, sorting

我有一个包含日历项目的表格；在我的 Web 应用程序中，我有两个视图：

1.  视图 1：显示接下来 10 个项目的主视图，从现在开始
2.  视图 2：根据视图 1 中第一个/最后一个项目的时间戳显示上一个/下一个 10 个项目的视图。这是麻烦制造者。

在页面底部，显示了指向视图 2 的上一个/下一个链接。

问题：

***如何在不知道日期的情况下检索前一组 10 个项目？***

起初，这对我来说似乎很简单，但显然事实并非如此。

**数据库表：**

```
+-------------+------------------+------+-----+---------+----------------+
| Field       | Type             | Null | Key | Default | Extra          |
+-------------+------------------+------+-----+---------+----------------+
| id          | int(11) unsigned | NO   | PRI | NULL    | auto_increment |
| name        | varchar(255)     | YES  | MUL | NULL    |                |
| start_time  | datetime         | YES  |     | NULL    |                |
| end_time    | datetime         | YES  |     | NULL    |                |
| created     | datetime         | NO   |     | NULL    |                |
| updated     | datetime         | YES  |     | NULL    |                |
| deleted     | tinyint(1)       | NO   |     | 0       |                |
+-------------+------------------+------+-----+---------+----------------+ 
```

**从现在开始显示接下来的 10 个项目的 SQL 查询（这里没有问题）：**

```
SELECT ci.*
FROM `calendar_item` AS `ci` 
WHERE ci.end_time >= NOW()
GROUP BY `ci`.`id` 
ORDER BY `ci`.`end_time` ASC
LIMIT 10 
```

**用于显示前 10 个项目的 SQL 查询，基于主视图中第一个项目的时间戳：**

```
SELECT ci.*
FROM `calendar_item` AS `ci` 
WHERE (ci.id IN (
    SELECT id FROM calendar_item 
    WHERE (end_time < FROM_UNIXTIME(1334667600))
    ORDER BY end_time DESC
))
GROUP BY `ci`.`id` 
ORDER BY `ci`.`end_time` ASC
LIMIT 10 
```

时间戳通过 URL 传递；在视图 1 中根本没有显示子查询。问题在于**项目应该按升序排序**；这将导致返回数据库中最早的项目，而不是最接近`timestamp`. 为了解决这个问题，我创建了一个降序排序的子查询。当我将这个子查询作为普通查询运行时，它可以正常工作，但是当包含在上述查询中时，它只显示与以下相同的结果：

```
SELECT ci.*
FROM `calendar_item` AS `ci` 
WHERE ci.end_time <= 1334667600
GROUP BY `ci`.`id` 
ORDER BY `ci`.`end_time` ASC
LIMIT 10 
```

我很可能忽略了一些东西，所以我可以使用你的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:26:49.810

这是一个简单的，限制子查询

```
SELECT ci.*
FROM `calendar_item` AS `ci` 
WHERE (ci.id IN (
    SELECT id FROM calendar_item 
    WHERE (end_time < FROM_UNIXTIME(1334667600))
    ORDER BY end_time DESC
    LIMIT 10
))
GROUP BY `ci`.`id` 
ORDER BY `ci`.`end_time` ASC
LIMIT 10 
```

如果没有子查询中的限制，您将选择时间戳 < FROM_UNIXTIMESTAMP 的所有行。然后您重新排序 ASC 并选择前 10 个，即最早的 10 个。

如果您限制子查询，您将获得满足 FROM_UNIXTIME 的最高 10 个，然后外部可以选择它们。

另一种选择（也是我的首选）如下，子查询获取数据，外部查询只是在将其吐出之前对其进行重新排序。

```
SELECT i.*
FROM (
    SELECT ci.*
    FROM calendar_item AS ci
    WHERE ci.end_time < FROM_UNIXTIME(1334667600)
    ORDER BY ci.end_time DESC
    LIMIT 10
) AS i
ORDER BY i.`end_time` ASC 
```

# ms-access - 如何编写加入查询？

> ID：10189132
> 
> 赞同：2
> 
> 时间：2012-04-17T10:04:34.860
> 
> 标签：ms-access

我在连接时遇到问题 - 问题出在：我有一个包含 17 位销售人员的数据库，每个销售人员都有自己的总计，例如费用、预付款和佣金。在我的数据库中，大约有 200 个客户，最多可以有 3 个销售人员。那是少数，但确实存在。每个销售人员都在该帐户的发票上获得报酬。我的一些销售人员只是一个帐户的第二个销售人员，这意味着他们永远不是第一个，所以如果我将销售人员加入发票 - 他没有任何发票，因为他从来不是销售人员 1。我可以提取发票当我只查看发票时，他作为推销员 2，但每 8 周我需要将他作为推销员 1 的费用加入到他作为推销员 2 的发票中。我无法让它工作或想出一个解决方案。

有没有办法可以将销售员查询中的 salesman1 加入到 slmn1 或 slmn2 或 slmn3 上的发票/付款查询？

这个例子太复杂了：

```
FROM qryFinalWeek
INNER JOIN QryFW ON qryFinalWeek.SLMN = QryFW.SLMN2 OR QryFW.SLMN3 OR QryFW.Salesrep1
WHERE (((QryFW.PDATE)=[FDATE]+4)); 
```

此示例仅在他是第一个推销员的情况下提供发票，因此如果他是第二个，我将无法获得任何佣金：

```
WHERE (((qryFinalWeek.SLMN)=[Forms]![frFWDATE]![Text0]) AND ((QryFW.PDATE)=[FDATE]+4)) OR (((QryFW.SLMN2)=[Forms]![frFWDATE]![Text0]) AND ((QryFW.PDATE)=[FDATE]+4)) OR (((QryFW.SLMN3)=[Forms]![frFWDATE]![Text0]) AND ((QryFW.PDATE)=[FDATE]+4)) 
```

任何反馈表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T13:04:53.433

数据结构为您带来了问题。我的建议是从您的客户表中删除销售人员（假设每个客户的数据多于相关的销售人员）并将他们添加到一个名为 Salesmen_Customers 或类似的新表中。此表将包含销售人员和客户之间的多对多关系

这是您当前的结构

![旧数据结构](../Images/5a6c3f4458294fa118af3e4d70535932.png)

这是新的结构

![新的数据结构](../Images/4a7e7feec2fb1db6f683b8d5b0c55fe9.png)

这应该会显着简化查询结构。如果您的销售人员的深度超过 3，这也将轻松扩展。如果您有兴趣进一步阅读数据库设计主题，我建议您使用[SQL 反模式](http://pragprog.com/book/bksqla/sql-antipatterns "Sql 反模式")。如果你真的嫁给了你的数据库结构，你可以查询你的出路，但我不推荐它。

# android - 在 Android 2.1 中实现下载的最佳做法是什么？

> ID：10189137
> 
> 赞同：0
> 
> 时间：2012-04-17T10:04:45.703
> 
> 标签：android, download

我真的是android世界的新手。现在我正在编码从我的保管箱存储中下载文件。我想知道实现下载（直接下载）的最佳实践是什么

我找到了 DownloadManager, service, AsyncTask .... DownloadManager - 不支持旧设备，Android2.1

[使用 Android 下载文件，并在 ProgressDialog 中显示进度](https://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog/3028660#3028660)

如果我想为 android 2.1 设备实现，我应该使用什么？你能指导我应该使用哪种方法，哪种方法更好（消耗资源更少）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:09:06.013

我写了一篇关于这个的文章。可以使用 AsyncTask 和服务来处理下载并将广播发送到不同的活动。还有可能使用进度条。[您可以在此页面](http://ootooban.com/en/2012/custom-download-manager-for-android-2-1/)查看教程和源代码。

# ruby-on-rails - 尝试更新数据库值时，rails update_attributes 返回 false

> ID：10189139
> 
> 赞同：17
> 
> 时间：2012-04-17T10:04:50.600
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, controller, update-attributes

希望这里有人能指出我正确的方向。

我有一个运行“update_attributes”的控制器更新定义。目前它返回 false，没有错误消息。我对 Ruby 很陌生，但对编码不是很熟悉，这让我难过了好几天！我正在尝试使用下面指定的值更新用户模型和数据库。

```
def update   
    #get currently logged in user
    @user = current_user
    #update user params based on edit form...
    if @user.update_attributes(params[:user])
        redirect_to profile_path, :notice  => "Successfully updated profile."
    else
        render :action => 'edit'
    end
end 
```

我的编辑定义....

```
def edit
    @user = current_user
end 
```

该表单将以下内容发送到此更新方法：

```
--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess
utf8: ✓
_method: put
authenticity_token: 9T4ihVI0p8j7pZEFxof3Bfahi2a+o3BPmtXJDnfHT4o=
user: !ruby/hash:ActiveSupport::HashWithIndifferentAccess
  first_name: Amanda
  last_name: Ross
  is_owner: '1'
  email: example@googlemail.com
commit: Update
action: update
controller: users
id: '20' 
```

params[:user] 返回：

```
{"first_name"=>"Amanda", "last_name"=>"Ross", "is_owner"=>"1", "email"=>"example@googlemail.com"} 
```

所有这些字段都在模型中的 attr_accessible 中，我可以毫无问题地创建用户。

这是 development.log 输出（抱歉有点乱）....

```
Started PUT "/users/20" for 127.0.0.1 at 2012-04-17 10:39:29 +0100
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"9T4ihVI0p8j7pZEFxof3Bfahi2a+o3BPmtXJDnfHT4o=", "user"=>    {"first_name"=>"Amanda", "last_name"=>"Ross", "is_owner"=>"1", "email"=>"example@googlemail.com"},     "commit"=>"Update", "id"=>"20"}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 20 LIMIT 1[0m
>>>>>>>>>>>>
{"first_name"=>"Amanda", "last_name"=>"Ross", "is_owner"=>"1", "email"=>"example@googlemail.com"}
     [1m[35m (0.0ms)[0m  begin transaction
     [1m[36mUser Exists (0.0ms)[0m  [1mSELECT 1 FROM "users" WHERE (LOWER("users"."email") =     LOWER('example@googlemail.com') AND "users"."id" != 20) LIMIT 1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT 1 FROM "users" WHERE ("users"."email" = 'example@googlemail.com'     AND "users"."id" != 20) LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
 Rendered users/_form.html.erb (7.0ms)
 Rendered users/edit.html.erb within layouts/application (10.0ms)
 Rendered layouts/_includes.html.erb (30.0ms) 
```

谁能帮忙指出我哪里出错了，好吗？

提前致谢！

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-17T10:16:25.317

两者都`#update_attributes`将`#save`首先检查您的模型实例是否`#valid?`在继续写入数据库之前。如果您的模型实例不是`#valid?`，那么这些方法将返回 false。要查看模型实例有什么问题，请查看模型的`#errors`.

```
Rails.logger.info(@user.errors.messages.inspect) 
```

或者，嵌入到您的方法中，

```
def update   
  @user = current_user
  if @user.update_attributes(params[:user])
    redirect_to profile_path, :notice  => "Successfully updated profile."
  else
    # print the errors to the development log
    Rails.logger.info(@user.errors.messages.inspect)
    render :action => 'edit'
  end
end 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-08-17T20:08:08.660

您还可以通过调用来更新属性时更好地进行自省`update_attributes!`，这会引发异常，而不仅仅是返回 false。

# iphone - 使用 NSMutableDictionary 的内容创建一个 NSManagedObject（可能用 NSCFString 代替数字）

> ID：10189140
> 
> 赞同：0
> 
> 时间：2012-04-17T10:04:50.850
> 
> 标签：iphone, nsdictionary, nsmanagedobject, nsmutabledictionary, kvc

我想用 NSMutableDictionary 和 Visa Versa 的内容创建一个 NSManagedObject。KVC 在 NSManagedObject 中无法正常工作，所以我无法使用

```
[managedObject setValue:@"1" forKey:@"testKey"]; 
```

这里 managedObject 有一个属性“NSNumber *testKey”

我有来自 web 服务的响应，我必须将其存储在我的应用程序的 sqlite DB 中，为此我正在使用核心数据，所以我有名称为“地址”的实体，其属性包括城市、州等（所有字符串都带有邮政编码为诠释）。

我有一个类来解析 JSON 响应以获取字典，但我不知道如何从该字典中创建托管对象并保存到我的 sqlite 数据库中。

提前致谢，

约格什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T20:03:43.333

要具体回答您的答案：您可以使用 [NSManagedObject setValuesForKeysWithDictionary:]

更多信息：[https ://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueCoding_Protocol/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueCoding_Protocol/Reference/Reference.html)

但是你真的应该使用 RestKit 来与你的 API 交互，因为它会自动处理所有的对象映射。

# eclipse - 日食弹出窗口

> ID：10189141
> 
> 赞同：2
> 
> 时间：2012-04-17T10:04:52.027
> 
> 标签：eclipse, eclipse-rcp, eclipse-gef

如何为 javadoc 创建类似于 eclipse jdt 中使用的窗口的弹出窗口。当鼠标悬停在图形节点上时，我需要显示其他信息。

![在此处输入图像描述](../Images/a4f3b305c81d3497547e2dfea7f0b201.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T12:32:43.240

我认为[IInformationPresenter (eclipse.org API)](http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/text/information/IInformationPresenter.html)接口可以在这里为您提供帮助。

可以在 IBM 找到关于如何使用它的精心编写的教程：

[Berthold Daum 的“为 SWT 应用程序配备内容助手”](http://www.ibm.com/developerworks/java/library/os-ecca/#IDAO4IDC)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-18T08:34:43.710

`org.eclipse.jface.dialogs.PopupDialog`似乎是一个很好的起点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T11:58:09.993

从[这里](https://stackoverflow.com/questions/10024526/background-color-of-widgets-in-jface-popupdialog)得到这个代码：

```
public class InfoPopUp extends PopupDialog {

    /**
     * The text control that displays the text.
     */
    private Text text;

    /**
     * The String shown in the popup.
     */
    private String contents = "";

    private final static int SHELL_STYLE = PopupDialog.INFOPOPUP_SHELLSTYLE;

    public InfoPopUp(Shell parent, String infoText) {
        this(parent, SHELL_STYLE, false, false, false, false, false, null,
                infoText);
    }

    public InfoPopUp(Shell parent, String titleText, String infoText) {
        this(parent, SHELL_STYLE, false, false, false, true, true, titleText,
                infoText);
    }

    public InfoPopUp(Shell parent, int shellStyle, boolean takeFocusOnOpen,
            boolean persistSize, boolean persistLocation,
            boolean showDialogMenu, boolean showPersistActions,
            String titleText, String infoText) {
        super(parent, shellStyle, takeFocusOnOpen, persistSize,
                persistLocation, showDialogMenu, showPersistActions, titleText,
                infoText);
    }

    /**
     * This method is used to show the animation by decreasing the x and y
     * coordinates and by setting the size dynamically.
     * 
     * @param shell
     *            of type {@link Shell}
     */
    private static void doAnimation(Shell shell) {
        Point shellArea = shell.getSize();
        int x = shellArea.x;
        int y = shellArea.y;
        while (x != -200) {
            try {
                shell.setSize(x--, y--);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

    protected void fillDialogMenu(IMenuManager dialogMenu) {
        dialogMenu.addMenuListener(new IMenuListener() {
            public void menuAboutToShow(IMenuManager arg0) {
                handleShellCloseEvent();
            }
        });
    }

    protected void handleShellCloseEvent() {
        // Comment out the following if do not want any kind of animated effect.
        doAnimation(getShell());
        super.handleShellCloseEvent();
    }

    protected Control createDialogArea(Composite parent) {
        text = new Text(parent, SWT.MULTI | SWT.READ_ONLY | SWT.WRAP | SWT.NO_FOCUS);
        text.setText(contents);
        return text;
    }

    protected void adjustBounds() {
        super.adjustBounds();
        // Point pt = getShell().getDisplay().getCursorLocation();
        // getShell().setBounds(pt.x,pt.y,rectangle.width,rectangle.height);
    }

    /**
     * Method to set the text contents of the InfoPop dialog
     * 
     * @param textContents
     *            of type String indicating the message
     */
    public void setText(String textContents) {
        this.contents = textContents;
    }

    protected Control createTitleMenuArea(Composite arg0) {
        Control ctrl = super.createTitleMenuArea(arg0);
        Composite composite = (Composite) ctrl;
        Control[] ctrls = composite.getChildren();

        ToolBar toolBar = (ToolBar) ctrls[1];
        ToolItem[] toolItems = toolBar.getItems();
        toolItems[0].setImage(Display.getDefault().getSystemImage(SWT.ICON_WARNING));

        return ctrl;
    }
} 
```

# c# - Automapper 条件语言映射

> ID：10189143
> 
> 赞同：1
> 
> 时间：2012-04-17T10:04:56.480
> 
> 标签：c#, automapper

我有一个域模型，其中包含两种语言的成员变量，如下所示：

```
public class Resource
{
   public string SwedishName;
   public string EnglishName;
} 
```

为了演示，我有一个简化的模型，它被传递给一个 json 序列化器：

```
[JsonObject]
public class JsonResource
{
   [JsonProperty]
   public string Name;
} 
```

这些是用 automapper 映射的，如下所示：

```
Mapper.CreateMap<Resource, JsonResource>()
    .ForMember(dest => dest.Name, opt => opt.MapFrom(src => src.SwedishName)); 
```

我的问题是，是否可以以更有条件的方式做到这一点，这取决于要求使用哪种语言？我最初的想法是这样的：

```
string lang = "en";
json = Mapper.Map<Resource, JsonResource>(resource, lang) 
```

但是，似乎不可能有多个相同类型的映射？

目前我倾向于为另一种语言定义另一个相同的表示模型：

```
if (lang == "en")
    json = Mapper.Map<Resource, EnglishJsonResource>(resource)
else
    json = Mapper.Map<Resource, JsonResource>(resource) 
```

这是一个可行的解决方案，还是有更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T10:14:03.250

我不会创建单独的类。使用`AfterMap`：

```
Mapper.CreateMap<Resource, JsonResource>()
 .AfterMap((r,b) => r.Name = isEnglish ? b.EnglishName : b.SwedishName); 
```

`isEnglish`是您的应用程序中的条件，但是您需要使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:12:28.590

您可以创建两个不同的类 EngMapper 和 SimpleMapper，它们将使用 initMapping 方法实现 IMapper 接口，例如，之后您可以创建一个工厂以便根据您的语言获得正确的映射器。因此，最终您的映射将为不同的语言分开（我认为这更好）。

# javascript - 在使用 ASP.Net 或 JavaScript 将图像复制到网站中的剪贴板方面需要帮助？

> ID：10189147
> 
> 赞同：2
> 
> 时间：2012-04-17T10:05:12.443
> 
> 标签：javascript, asp.net

我需要关于将图像复制到网站中的剪贴板的帮助。图像是动态创建的。

我找到了两个解决方案

解决方案 1：

```
using System.Windows.Forms;

Bitmap bitmapImage ;

protected void buttonClipboard_Click(object sender, System.Web.UI.ImageClickEventArgs e)
{
    MemoryStream memoryStream = new MemoryStream(imageByteArray);             // Image byte array is the input
    bitmapImage = (Bitmap)System.Drawing.Image.FromStream(memoryStream);
    memoryStream.Flush();
    memoryStream.Close();
    Thread cbThread = new Thread(new ThreadStart(CopyToClipboard));
    cbThread.ApartmentState = ApartmentState.STA;
    cbThread.Start();
    cbThread.Join();
}

[STAThread]
protected void CopyToClipboard()
{
    if (bitmapImage != null)
    {
        //Clipboard.SetData(DataFormats.Bitmap, bitmapImage);
        Clipboard.SetImage(bitmapImage);
    }
} 
```

这在发布网站之前工作正常。发布后，这在任何网站浏览器中都不起作用，因为这里使用了 STAThread。一些网站表示，由于浏览器中的内部多线程处理，线程无法在已发布的网站中工作。

解决方案 2：

```
<script type="text/javascript">
        function CopyToClip() {
            var imgControl = document.getElementById('imageContent');
            imgControl.contentEditable = 'true';
            var controlRange;
            if (document.body.createControlRange) {
                controlRange = document.body.createControlRange();
                controlRange.addElement(imgControl);
                controlRange.execCommand('Copy');
            }
            imgControl.contentEditable = 'false';
            return true;
        } 
```

在发布网站之前和之后，这个 java 脚本在 IE 上运行良好。但它在任何情况下都不适用于 Chrome 和 Mozilla。

我需要一种适用于 Mozilla 和 Chrome 的解决方案。

请为此提出任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:14:51.313

如果没有用户手动编辑至少一个配置文件，[它在 Firefox 中实际上是行不通的。](http://kb.mozillazine.org/Granting_JavaScript_access_to_the_clipboard)

在 chrome 中它被[禁用，除了 extensions](http://fartersoft.com/blog/2010/11/20/accessing-operating-system-clipboard-in-chromium-chrome-extensions/)。

如果您希望跨浏览器剪贴板支持可悲的是，Flash 小部件是目前唯一真正可行的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:23:29.790

IE 是唯一支持这种剪贴板交互方法的浏览器。没有其他浏览器支持在剪贴板中放置图像。

对于文本，您必须使用基于 Flash 的解决方案才能实现跨浏览器支持。你可以[试试](http://davidwalsh.name/clipboard) [ZeroClipboard](https://github.com/jonrohan/ZeroClipboard)。

Mozilla 有一个[剪贴板指南](https://developer.mozilla.org/en/Using_the_Clipboard)，但它的级别相当低，从[这个文档](http://support.mozilla.org/en-US/kb/Granting%20JavaScript%20access%20to%20the%20clipboard)来看，出于安全考虑，他们不太热衷于打开剪贴板。特别是关于“为网站启用剪贴板访问”：

> Firefox 没有内置这样的功能。

然而，剪贴板交互有一个有趣的[W3C API 规范](http://dev.w3.org/2006/webapi/clipops/)。特别是，该[`setData`](http://www.w3.org/TR/html5/dnd.html#dom-datatransfer-setdata)方法似乎对您的用例很有希望。[这个 SO 答案](https://stackoverflow.com/a/6338207/596068)对事件进行了有趣的测试`onpaste`，但不幸的是，剪贴板上的项目没有任何内容，只是检索它们。

# pdf - 基于规则的PDF文本提取verious账单和发票

> ID：10189156
> 
> 赞同：7
> 
> 时间：2012-04-17T10:05:47.317
> 
> 标签：pdf, text-extraction

我必须从发票和账单 pdf 文件中提取文本

文件布局可能会变得复杂，尽管它大部分都充满了表格。

我已经阅读了几十篇关于 pdf 格式的文章，我们的大脑掌握它是多么容易，而机器理解它的结构是多么困难。

还下载了一些工具，比如 python 的 pdfminer 和一些 java 工具，有些甚至有基于规则的布局提取，比如[LA-PDBtext](http://code.google.com/p/lapdftext/)这些都是很棒的库，留给你最后一步。

Adobe 也有一个名为 exportPdf 的在线服务，但它不能自定义

底线，我知道为了从结构化 pdf 文件中提取文本并将其转换为 XML，例如，应该有一定程度的手动工作。

我还发现了[From Data Extractor](http://www.a-pdf.com/form-data-extractor/index.htm)，这是一个非免费工具，能够设置声称可以完成这项工作的提取规则，尽管很难找到合适的手册并且它只能在 Windows 上运行。

我想我什至可以尝试将这些文件转换为图像并尝试[tesseract-ocr](https://github.com/tesseract-ocr/tesseract)但决定在我花更多时间之前在这里寻求建议。

如果有这样经验的人给我提示，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T13:35:03.890

我已经完成了很多 PDF 提取，我可以确认您已经发现这可能是一个痛苦的开始过程。要理解的一件重要事情是，PDF 中没有“表格”的概念，只是周围有线条的文本。此外，无法保证 PDF 代码中文本的线性顺序实际上与打印时的视觉顺序相匹配。换句话说，不能保证“hello world”是按这个顺序写的，它可能是`draw 'word' at coord 20 then draw 'hello' at coord 10`. 大多数 PDF 创建者不这样做，但仍然无法保证。PDF 创建者（InDesign、Illustrator 等）越有创意，文本就越难被删除。实际上，一旦设计师开始过多地使用字体，有些程序有时会一次输出一个字符，每次只稍微改变字体。

也就是说，我推荐您查看的第一个，LA-PDFText。您可以在[发现模式](http://code.google.com/p/lapdftext/wiki/Overview)(blockify) 下运行它，您可以从中创建规则。我不再安装 Java，所以我无法测试它，但它看起来很有希望。

您的第二个，A-PDF 表单数据提取器，仅适用于实际的 PDF 表单。如果这是您的情况，我建议您只使用 iText/iTextSharp 之类的开源解决方案。

最后一个 OCR 让我畏缩。我只是无法想象通过这些箍可以让您获得比解析 PDF 更好的文本表示。但话又说回来，PDF 是一种视觉格式，所以也许它会。

就我个人而言，我使用[iText/iTextSharp](https://stackoverflow.com/questions/6882098/how-can-i-get-text-formatting-with-itextsharp)来处理这类事情，但我也喜欢以艰难的方式做事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-02T11:50:37.083

不清楚您是在寻找开发工具来自动从账单和发票中提取数据，还是只是为了非开发人员可以使用的一次性工具（实用程序）？

无论如何，这里有一些专门的工具，包括他们使用的引擎：

1.  [Tabula](http://tabula.technology)（开源，专为从 PDF 表格中提取数据而设计。可以导出用于批处理的 shell 脚本，作为 localhost Web 服务运行，由 JRuby [Tabula 引擎](https://github.com/tabulapdf/tabula-extractor)提供支持）
2.  [Viet OCR （基于](http://vietocr.sourceforge.net)[tesseract oct 引擎](https://code.google.com/p/tesseract-ocr/)的开源 .NET 桌面实用程序，用于从 PDF 和图像中提取文本）
3.  [Bytescout PDF Viewer](https://bytescout.com/products/enduser/misc/pdfviewer.html)（免费软件闭源 .NET 实用程序，检测和提取表格，包括扫描的发票，由[PDF Extractor SDK](http://bytescout.com/products/developer/pdfextractorsdk/index.html)提供支持）

*免责声明：我为 ByteScout 工作。*

# python - 哪些对象可以保证具有不同的身份？

> ID：10189160
> 
> 赞同：3
> 
> 时间：2012-04-17T10:06:00.193
> 
> 标签：python, object, python-3.x, object-identity

原始问题：

（我的问题适用于 Python 3.2+，但我怀疑自 Python 2.7 以来这已经改变了。）

假设我使用我们通常期望创建对象的表达式。例子：`[1,2,3]`; `42`; `'abc'`; `range(10)`; `True`; `open('readme.txt')`; `MyClass()`; `lambda x : 2 * x`; 等等

假设两个这样的表达式在不同的时间执行并且“计算为相同的值”（即，具有相同的类型，并且比较为相等）。在什么条件下，Python 提供了我所谓的**不同对象保证**这两个表达式实际上创建了两个不同的对象（即，`x is y`计算为`False`，假设两个对象绑定到`x`and `y`，并且两者同时在范围内）？

我知道对于任何可变类型的对象，“不同的对象保证”成立：

```
x = [1,2]
y = [1,2]
assert x is not y # guaranteed to pass 
```

我也知道对于某些不可变类型（`str`, `int`），保证不成立；对于某些其他不可变类型（`bool`, `NoneType`），相反的保证成立：

```
x = True
y = not not x
assert x is not y # guaranteed to fail
x = 2
y = 3 - 1
assert x is not y # implementation-dependent; likely to fail in CPython
x = 1234567890
y = x + 1 - 1
assert x is not y # implementation-dependent; likely to pass in CPython 
```

但是所有其他不可变类型呢？

特别是，在不同时间创建的两个元组可以具有相同的身份吗？

我对此感兴趣的原因是我将图中的节点表示为 的元组`int`，并且域模型使得任何两个节点都是不同的（即使它们由具有相同值的元组表示）。我需要创建节点集。如果 Python 保证在不同时间创建的元组是不同的对象，我可以简单地进行子类化`tuple`以将相等性重新定义为表示同一性：

```
class DistinctTuple(tuple):
  __hash__ = tuple.__hash__
  def __eq__(self, other):
    return self is other

x = (1,2)
y = (1,2)
s = set(x,y)
assert len(s) == 1 # pass; but not what I want
x = DistinctTuple(x)
y = DistinctTuple(y)
s = set(x,y)
assert len(s) == 2 # pass; as desired 
```

但是，如果不能保证在不同时间创建的元组是不同的，那么上述是一种可怕的技术，它隐藏了一个可能随机出现并且可能很难复制和查找的休眠错误。在这种情况下，子类化将无济于事。我实际上需要向每个元组添加一个额外的元素，一个唯一的 id。或者，我可以将我的元组转换为列表。无论哪种方式，我都会使用更多的内存。显然，除非我原来的子类化解决方案不安全，否则我不希望使用这些替代方案。

我的猜测是 Python 不为不可变类型提供“不同的对象保证”，无论是内置的还是用户定义的。但是我在文档中没有找到关于它的明确声明。

更新 1：

@LuperRouch @larsmans 感谢您到目前为止的讨论和答案。这是我仍然不清楚的最后一个问题：

> 是否有可能创建用户定义类型的对象会导致重用现有对象？

如果这是可能的，我想知道如何验证我使用的任何类是否可能表现出这种行为。

这是我的理解。每当创建用户定义类的对象时，`__new__()`首先调用该类的方法。如果重写此方法，则语言中的任何内容都不会阻止程序员返回对现有对象的引用，从而违反了我的“不同对象保证”。显然，我可以通过检查类定义来观察它。

我不确定如果用户定义的类没有覆盖`__new__()`（或明确依赖`__new__()`于基类）会发生什么。如果我写

```
class MyInt(int):
  pass 
```

对象创建由`int.__new__()`. 我希望这意味着我有时可能会看到以下断言失败：

```
x = MyInt(1)
y = MyInt(1)
assert x is not y # may fail, since int.__new__() might return the same object twice? 
```

但是在我对 CPython 的实验中，我无法实现这种行为。这是否意味着该语言为不覆盖的用户定义类提供“不同的对象保证” `__new__`，或者它只是一种任意的实现行为？

更新 2：

虽然`DistinctTuple`结果证明我是一个非常安全的实现，但我现在明白我使用`DistinctTuple`节点建模的设计理念非常糟糕。

身份运算符已经在该语言中可用；make 的`==`行为方式与`is`逻辑上是多余的相同。

更糟糕的是，如果`==`可以做一些有用的事情，我就让它不可用。例如，很可能在我的程序中的某个地方，我想查看两个节点是否由同一对整数表示；`==`本来是完美的-实际上，这就是默认情况下的作用...

更糟糕的是，大多数人实际上确实希望`==`比较一些“价值”而不是身份——即使对于用户定义的类也是如此。他们会因为我只看身份的覆盖而措手不及。

最后......我必须重新定义的唯一原因`==`是允许具有相同元组表示的多个节点成为集合的一部分。这是错误的做法！需要改变的不是`==`行为，而是容器类型！我只需要使用多重集合而不是集合。

简而言之，虽然我的问题可能对其他情况有一些价值，但我绝对相信创建`class DistinctTuple`对我的用例来说是一个糟糕的主意（我强烈怀疑它根本没有有效的用例）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T10:16:15.047

Python 参考，[第 3 节，数据模型](http://docs.python.org/dev/reference/datamodel.html)：

> 对于不可变类型，计算新值的操作实际上**可能**返回对具有相同类型和值的任何现有对象的引用，而对于可变对象，这是**不允许**的。

（强调补充。）

实际上，CPython 似乎只缓存空元组：

```
>>> 1 is 1
True
>>> (1,) is (1,)
False
>>> () is ()
True 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T04:01:00.983

> *是否有可能创建用户定义类型的对象会导致重用现有对象？*

当且仅当用户定义的类型被明确设计为这样做时，才会发生这种情况。有`__new__()`或一些元类。

> *我想知道如何验证我使用的任何类是否可能表现出这种行为。*

使用来源，卢克。

说到`int`，小整数是预先分配的，并且这些预先分配的整数在您使用整数创建计算的任何地方都使用。当你这样做时，你不能让它工作`MyInt(1) is MyInt(1)`，因为你所拥有的不是整数。然而：

```
>>> MyInt(1) + MyInt(1) is 2
True 
```

这当然是因为 MyInt(1) + MyInt(1) 不会返回 MyInt。它返回一个 int，因为这是`__add__`整数的返回值（这也是检查预分配整数的地方）。如果有什么只是表明子类化 int 通常并不是特别有用。:-)

> *这是否意味着该语言为不覆盖**new**的用户定义的类提供“不同的对象保证” ，或者它只是一种任意的实现行为？*

它不能保证它，因为没有必要这样做。默认行为是创建一个新对象。如果您不希望发生这种情况，则必须覆盖它。有保证是没有意义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T14:15:20.107

> 如果 Python 保证在不同时间创建的元组是不同的对象，我可以简单地进行子类化`tuple`以将相等性重新定义为表示同一性。

您似乎对子类化的工作方式感到困惑：如果`B`subclasses `A`，则`B`可以使用所有`A`的方法[1] - 但这些`A`方法将在 的实例上工作`B`，而不是在 的`A`。这甚至适用于`__new__`：

```
--> class Node(tuple):
...   def __new__(cls):
...     obj = tuple.__new__(cls)
...     print(type(obj))
...     return obj
...
--> n = Node()
<class '__main__.Node'> 
```

[正如@larsman 在Python 参考](http://docs.python.org/dev/reference/datamodel.html#objects-values-and-types)中指出的那样：

> 对于不可变类型，计算新值的操作实际上可能返回对具有相同类型和值的任何现有对象的引用，而对于可变对象，这是不允许的

但是，请记住，这篇文章是在讨论 Python 的*内置*类型，而不是用户定义的类型（它们几乎可以以任何他们喜欢的方式变得疯狂）。

* * *

我理解上面的摘录是为了保证 Python 不会返回与现有对象相同的新可变对象，并且用户定义和在 Python 代码中创建的类本质上是可变的（再次，请参阅上面关于疯狂用户的注释 -定义的类）。

一个更完整的 Node 类（注意你不需要显式引用`tuple.__hash__`）：

```
class Node(tuple):
    __slots__ = tuple()
    __hash__ = tuple.__hash__
    def __eq__(self, other):
        return self is other
    def __ne__(self, other):
        return self is not other

--> n1 = Node()
--> n2 = Node()
--> n1 is n2
False
--> n1 == n2
False
--> n1 != n2
True

--> n1 <= n2
True
--> n1 < n2
False 
```

从最后两个比较中可以看出，您可能还想覆盖`__le__`and`__ge__`方法。

[1] 我知道的唯一例外是`__hash__`——如果`__eq__`在子类上定义但子类想要父类`__hash__`，则必须明确说明（这是 Python 3 的更改）。

# php - 将数组中的数据添加到新数组

> ID：10189162
> 
> 赞同：1
> 
> 时间：2012-04-17T10:06:15.873
> 
> 标签：php, arrays, loops

我创建了一个数据数组，我可以从中循环遍历特定字段并将这些值回显出来，但我需要做的是将这些值添加到一个新数组中，最终让我找到新数组中值的平均值大批。正如我所说，我可以回显数据，并且我想我已经知道如何获得平均值，只要我可以创建新数组！任何帮助将不胜感激，因为我无法在任何地方找到答案，而且我的人才不足！

我的表包含大约 25 个字段，我根据会话变量提取了一些行。在我正在处理的实例中，我只需要从表中的 1 列中获取值，然后将它们添加到数组中。下面的代码将循环遍历这些值，并一次回显它们 1：-

```
while ($cdarray=mysql_fetch_array($calldata))   {
echo $cdarray['score_total'];
} 
```

这给了我 25555 这是我期望的 4 个值 25、5、5、5

我试过了

```
while ($cdarray=mysql_fetch_array($calldata))   {
$cdts = $cdarray['score_total'];
$cdtsar = array($cdts);
} 
```

这导致 $cdts 被赋值为 5，

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:18:48.167

这将从数组中获取您的数据，将其放入一个新数组中并计算平均值。

```
$cdtsar = array();

while ($cdarray=mysql_fetch_array($calldata))   {
 $cdtsar[] = $cdarray['score_total'];
}

$average = array_sum($cdtsar) / count($cdtsar); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:25:04.780

它实际上打印了 25 和 5 以及 5 和 5，但中间没有空格，所以看起来像“25555”。要自己验证这一点：

```
while ($cdarray=mysql_fetch_array($calldata))   {
    echo $cdarray['score_total'];
    echo " / ";
} 
```

要获得平均值，您可以使用

```
$sum = $count = 0;
$average = null;
while ($cdarray=mysql_fetch_array($calldata))   {
    $sum += $cdarray['score_total'];
    ++$count;
}

// Make sure to guard against divide by zero
if ($count) {
    $average = $sum / $count;
} 
```

或者，如果可以选择更改查询，您可能会让数据库为您计算平均值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T10:25:06.427

如果要将元素分配给新数组，请像这样使用

```
$cdtsar = array();
while ($cdarray=mysql_fetch_array($calldata))   {
    array_push($cdtsar,$cdarray['score_total']);
} 
```

求数组的平均值

```
$sum = array_sum($cdtsar);
$num = sizeof($cdtsar);
$avg = $sum/$num;
echo $avg; 
```

# php - 2个相同的表，更新表1中存在数据的第二个表

> ID：10189163
> 
> 赞同：0
> 
> 时间：2012-04-17T10:06:16.147
> 
> 标签：php, mysql

我有 2 个具有相同列的表。例如

```
table 1
id
name
height
weight

table 2
id
name
height
weight 
```

数据表2是完整的。但在表 1 中，仅存在部分数据，其余列为空。例如：

```
 table 1    table 2
id        4          4
name      (empty)    salman
height    5'11"      5'9" 
weight    (empyy)    65kg 
```

我想要一个脚本，它允许我用表 1 中的值更新表 2，但仅限于它存在的地方。在表1为空的地方，我想保留表2中已经存在的数据。

我尝试了各种方法，但都需要多次查询，而且冗长而忙碌。我想知道是否有更简单的方法来完成这项工作？最好在单个查询中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:18:38.747

您可以尝试加入 2 个表，然后使用 CASE 关键字有条件地更新字段：

```
UPDATE table2 t2 INNER JOIN table1 t1 USING (id)
SET 
 t2.name = CASE WHEN (t1.name IS NULL) THEN t2.name ELSE t1.name END
 t2.height= CASE WHEN (t1.height IS NULL) THEN t2.height ELSE t1.height END
 t2.weight = CASE WHEN (t1.weight IS NULL) THEN t2.weight ELSE t1.weight END 
```

[http://dev.mysql.com/doc/refman/5.5/en/case-statement.html](http://dev.mysql.com/doc/refman/5.5/en/case-statement.html)

[http://dev.mysql.com/doc/refman/5.5/en/update.html](http://dev.mysql.com/doc/refman/5.5/en/update.html)

# xslt - 从 XSLT 运行 XQuery 转换

> ID：10189164
> 
> 赞同：-1
> 
> 时间：2012-04-17T10:06:17.397
> 
> 标签：xslt, xquery

我有一些 XQuery 文件，它们通常用于原子类型的语法检查`xs:ID`和`xs:IDREF`.

是否有任何纯 XSLT 方式（除了任何第三方，如[zorba](http://www.zorba-xquery.com/)！或[marklogic](http://www.marklogic.com/)或不使用`java`自定义扩展函数。

到目前为止，我一直在考虑编写扩展函数（使用 «xsl:function»）。如果有人有其他想法？欢迎提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:28:30.813

If you want to mix XSLT and XQuery then I think you need a product allowing that with the help of extension functions, like Saxon does with [http://www.saxonica.com/documentation/extensions/functions/query.xml](http://www.saxonica.com/documentation/extensions/functions/query.xml).

# prolog - 使用 Prolog 的定理证明

> ID：10189168
> 
> 赞同：5
> 
> 时间：2012-04-17T10:06:26.980
> 
> 标签：prolog

如何使用 Prologs 编写定理证明？

我试着把它写成正常的像这样：

```
parallel(X,Y):-perpendicular(X,Z),perpendicular(Y,Z), X\==Y,!.
perpendicular(X,Y):-perpendicular(X,Z),parallel(Z,Y),!. 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T15:37:20.410

我不愿意发布答案，因为这个问题的框架很差。感谢 theJollySin 添加了干净的格式！重写中省略了一些东西，表明 Aman 的想法是“I inter in Loop”（原文如此）。

我们不知道输入了什么查询导致了这个循环，所以需要推测。这两条规则表明 Goal 涉及**parallel/2**或**vertical/2**谓词。

通过实践，不难理解 Prolog 引擎在提出查询时会做什么，尤其是单目标查询。Prolog 使用一个非常简单的“跟随你的鼻子”策略来尝试实现一个目标。查找调用谓词的规则。然后看看是否可以应用这些规则中的任何一个，从第一个开始并在它们的列表中向下。

Prolog 初学者通常会遇到三个问题。一是 Prolog 引擎进行搜索的递归性质。**在这里， parallel/2**的唯一规则有一个右侧调用两个子目标的**垂直/2**，而垂直/2 的唯一规则**调用**它自己的一个子目标和另一个**并行/2**的子目标。人们应该预料到，试图满足任何一种查询都不可避免地会导致与分叉头[的类似九头蛇的](http://en.wikipedia.org/wiki/Lernaean_Hydra)斗争。

我们在这个例子中看到的第二个主题是自由变量的使用。如果我们要获得关于两条*特定*线（几何）的垂直性或平行性的知识，那么查询或规则需要以某种方式将变量“绑定”到“基础”术语。同样，如果没有查询实际的目标，很难猜测 Aman 期望它如何工作。也许应该提供有关垂直或平行的特定线的“事实”。行可以仅表示为原子（可能是小写字母），但 Prolog 变量是以大写字母（如在两个给定规则中）或下划线 (_) 字符开头的名称。

最后，可能相当混乱的第三个主题是 Prolog 如何处理否定。这些规则中只有一点点，`X\==Y`调用的地方。但即使是这个简短的子目标也需要仔细理解。Prolog 实现了“否定为失败”，因此`X\==Y`当且仅当不成功时才[`X==Y`成功](https://stackoverflow.com/q/8219555/487781)。后一个目标也很微妙，因为它询问是否相同`X`，`Y`而不试图进行任何统一。因此，如果这些是不同的变量，都是自由的，那么`X==Y`就会失败（并且`X\==Y`成功）。另一方面，`X==Y`成功的唯一途径（因此`X\==Y`失败）将是如果两个变量都绑定到相同的基本项。正如上面所讨论的，上述两条规则并没有为这种情况提供一种方法，尽管在查询目标中可能已经解决了这个问题。

Aman 的家庭作业是了解这些 Prolog 主题：

*   递归
*   自由和绑定变量
*   否定

也许可以就 Prolog 做几何证明提出更具体的建议！

**补充：** PTTP（Prolog Technology Theorem Prover）是由 ME Stickel 在 1980 年代后期编写的，[这个 2006 年的网页](http://www.ai.sri.com/~stickel/pttp.html)描述了它并提供了下载链接。

它还简洁地总结了为什么单独的 Prolog 不是“一个完整的通用定理证明系统”。指向后来的更强大的定理证明者的指针也可以在那里遵循。

# ios - iOS Core Data 搜索速度提升

> ID：10189171
> 
> 赞同：0
> 
> 时间：2012-04-17T10:06:54.063
> 
> 标签：ios, search, core-data

我正在努力提高使用核心数据的 iOS 应用程序的搜索速度。任何人都可以帮助或建议替代解决方案来提高我的搜索速度吗？我在下面列出了我的情况的详细信息。

**项目详情**

我目前正在创建一个数据参考应用程序，它使用带有预加载 SQLite 数据库的核心数据。我希望能够搜索可能包含超过 100000 条记录的实体的一个或多个属性并快速返回结果。

到目前为止，我取得的最好结果（搜索仍然很慢）是使用搜索显示控制器加载视图，为 fetchResultController 的获取请求设置获取限制（当前为 100）。我还使用搜索范围来简化谓词。我确实在我的谓词中使用了“包含”关键字，但我不确定如何在 WWDC 2010 的第 137 次会议中实施建议，以及我应该存储哪些关键字或应该存储多少。

这是我的一个课程的链接， http: [//pastebin.com/cHHicc1s](http://pastebin.com/cHHicc1s)

感谢您的时间和帮助。

敬敬敬涛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T07:13:42.867

您可能希望将现有属性规范化为新属性，然后对其进行索引。从您的谓词中删除“CONTAINS”，而是使用`>=`or`<`等​​值。此外，规范化搜索文本，以便比较平衡。Apple 在“ [Derived Property](http://developer.apple.com/library/mac/#samplecode/DerivedProperty) ”示例和 WWDC 2010 session #118 视频中记录了所有这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T17:21:23.020

如果要对属性进行大量搜索，则应创建索引。您可以在定义模型时在 Xcode 中执行此操作。单击实体，在您指定实体名称的下方，您可以创建其他索引。

但是请注意，您将产生额外的文件大小开销，并且插入/删除也会花费更多时间。但是，您的搜索会非常快。

# javascript - 使用 JavaScript 聚焦第一个组合框

> ID：10189175
> 
> 赞同：0
> 
> 时间：2012-04-17T10:06:58.093
> 
> 标签：javascript

我有相同名称和 ID 的组合框。我想关注第一个组合框。

我怎样才能做到这一点？

```
document.getElementById('test').focus(); 
```

这是我被赋予将焦点设置在组合框上的 javascript 代码，但没有任何反应。

我有一个组合框，例如：

```
<select name="test" id="test">
         <option value="0.25">0.25</option>
         <option value="0.50">0.50</option>
          <option value="1.00">1.00</option>
</select>

<select name="test" id="test">
         <option value="t1">t1</option>
         <option value="t2">t2</option>
         <option value="t3">t3</option>
</select> 
```

在我的页面中，我有这样的组合框，具有相同的名称和 ID。

现在我想将焦点设置到第一个组合框。我怎样才能使用 JavaScript 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:15:06.533

你不能有多个相同的元素`id`！

尝试这个：

**HTML：**

```
<select name="first" id="first">
     <option value="0.25">0.25</option>
     <option value="0.50">0.50</option>
     <option value="1.00">1.00</option>
</select>

<select name="second" id="second">
     <option value="t1">t1</option>
     <option value="t2">t2</option>
     <option value="t3">t3</option>
</select> 
```

**JavaScript：**

```
document.getElementById('first').focus(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-21T19:29:26.177

在调用所有元素之前，将选择焦点移到函数的顶行。例子

```
function myfunc()
    {
    document.getElementById('myselect').focus();
    document..........
    } 
```

# fonts - 识别任意文本中的外语字体

> ID：10189178
> 
> 赞同：0
> 
> 时间：2012-04-17T10:07:15.083
> 
> 标签：fonts

**一些背景：**在梵文字体中，相同的字符代码可以在视觉上表示为不同的字符。在一种字体中，“10”可以在视觉上表示为“A”，而在另一种字体中，“10”可以在视觉上表示为“B”。因此，如果我选择文本并更改字体，那么字符也会更改。有趣的是，键盘上的按钮也是如此。在一种字体中按“A”将显示“A”，在另一种字体中按“A”将显示“B”。

**我想要做的是**，识别粘贴到我的软件中的某些文本中使用的字体，以便在更改字体时，我可以以编程方式更改字符以对新字体表示相同的含义。

关于如何解决这个问题的任何指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T19:18:55.603

对于非 Unicode 字体，实现这一点的唯一方法是了解每种字体的映射。这是有问题的，因为即使有[一个非Unicode编码标准](http://en.wikipedia.org/wiki/Indian_Script_Code_for_Information_Interchange)，许多梵文/印地文字体都会忽略它或进行修改和添加，导致您在上面描述的情况（例如，一种字体中的键'A'可能对应于形状'म' 而另一种字体中的'A' 具有'क' 的形状......只是理论示例）。

至少存在一种可以帮助您的[转换工具](http://ltrc.iiit.ac.in/showfile.php?filename=downloads/FC-1.0/fc.html)，但最终归结为将输入字体特定编码转换为输出字体特定编码。如果对于每个特定于字体的映射，您有一个特定于 Unicode 的字体特定映射，您可以使用 Unicode 作为中介并转换为/从您的任何字体方案...类似于：

```
font         font-specific code    Unicode
----         ------------------    -------
MyFont       0001                  U+0021
MyFont       0002                  U+0022
...
MyOtherFont  00F1                  U+0021
MyOtherFont  00F2                  U+0022
... 
```

有了这些映射的完整数据库，您可以很容易地将“MyFont”中的文本集翻译成“MyOtherFont”的文本。

当然，如果可能的话，**最好**的选择是将字体和文本都转换为 Unicode，虽然……但这可能是不可能的。

# google-api - Web 和已安装应用程序的相同令牌 (Google Calender API V3)

> ID：10189180
> 
> 赞同：1
> 
> 时间：2012-04-17T10:07:24.323
> 
> 标签：google-api, google-calendar-api

我有一个 Web 应用程序，它在 Google 日历上创建事件并在数据库中保留一个刷新令牌。同时，我有另一个桌面应用程序需要使用这个已经保存的刷新令牌来获取这些事件并更新它们。现在，当我尝试在我的桌面应用程序中使用由 Web 应用程序保存的相同刷新令牌时，它不会获取任何事件……就好像刷新令牌无效一样。我可以在已安装的应用程序和 Web 应用程序上使用相同的刷新令牌吗？我在这里做错了吗？

# vbscript - 检查快捷方式的目标是否存在于批处理或vbs中？

> ID：10189183
> 
> 赞同：0
> 
> 时间：2012-04-17T10:07:38.917
> 
> 标签：vbscript, batch-file, target, shortcut

这是我的问题：

1º - 我有一个带有子文件夹的原始文件夹，里面全是 mp3 文件

2º - 我有原始文件夹的副本。

3º - 我已将复制文件夹的所有“mp3”文件“转换”为“lnk”文件（使用 NirCMD CLI 工具）维护文件夹结构。

现在我需要定期检查每个 .lnk 的目标是否仍然存在或被截断，因为我每天都在维护原始文件夹，移动文件或做某事......

我需要这样的东西：

```
Echo: Corrupted links:

For /F "tokens=*" %%# in ('Dir /B /AD') do (
    Pushd ".\%%#"
    For /F "tokens=*" %%# in ('Dir /B "*.lnk"') do (
        (SHORTCUT_CHECK_PROGRAM_OR_FUNCTION_OR_SOMETHING.EXE) "%%#"
        IF NOT %ErrorLevel% EQU 0 (Echo: Target doesn't exist: "%%#")
    )
    POPD
) 
```

我检查了以下参数：

```
mediainfo.exe
nircmd.exe shortcut
shortcut.exe
Vbscripts functions to create shortcuts (i can't find one vbs only for check the target) 
```

但是我找不到一种方法来使用某人向我提供有关快捷方式目标的信息。

请帮忙

PD：我也同意来自 3rd 方应用程序的解决方案 :)

PD2：所有 .lnks 的目标都有这个特殊的拉丁字符“ **ú** ”（如果解决方案是批量的，我可以转换字符，否则我不知道如何正确设置字符）

谢谢！

**编辑**：

**Narayanan**我不知道如何使用 VBA，但我会为您的帮助加分，谢谢。

我记得我在几年前批量制作了一个临时文件清理器，并且在检查任务栏快捷方式并删除它们时遇到了同样的问题。

我已经解决了这个问题，但我不记得了xD

如果对某人有帮助，请采纳：

（vbs 发送错误级别代码）

PD：代码是西班牙语，但每个人都能看懂:)

```
:Comprobar_accesos_directos_rotos.vbs
::Check invalid shortcuts target.vbs
:::::::::::::::::::::::::::::::::::::
echo set objshell = createobject("wscript.shell")>"%TEMP%\Comprobar_accesos_directos_rotos.vbs"
echo set objlink = objshell.createshortcut(wscript.arguments(0))>>"%TEMP%\Comprobar_accesos_directos_rotos.vbs"
echo set objfso = createobject("scripting.filesystemobject")>>"%TEMP%\Comprobar_accesos_directos_rotos.vbs"
echo if objfso.fileexists(objlink.targetpath) then>>"%TEMP%\Comprobar_accesos_directos_rotos.vbs"
echo wscript.quit(0)>>"%TEMP%\Comprobar_accesos_directos_rotos.vbs"
echo else>>"%TEMP%\Comprobar_accesos_directos_rotos.vbs"
echo wscript.quit(1)>>"%TEMP%\Comprobar_accesos_directos_rotos.vbs"
echo end if>>"%TEMP%\Comprobar_accesos_directos_rotos.vbs"

For /F "Tokens=*" %%a in ('dir /B /S "%appdata%\Microsoft\Windows\Start Menu\Programs\*.lnk"') do (
    Set archivo="%%a"
    call :comprobar
)
Goto :END

:Comprobar
::::::::::
"%TEMP%\Comprobar_accesos_directos_rotos.vbs" %archivo%

If %errorlevel% EQU 0 (
    goto:eof
) ELSE (
    Del /Q /F %archivo% >nul 2>&1
    goto:eof
)

:END
pause 
```

再见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:59:12.957

这样做似乎很痛苦，因为就我有限的知识而言，没有现成的解决方案可用。

但是，您可以创建一个小的可执行文件，如果链接的目标丢失，它将返回错误级别。[该](http://www.vbaccelerator.com/home/NET/Code/Libraries/Shell_Projects/Creating_and_Modifying_Shortcuts/article.asp)网页解释了如何创建这样的程序。

# android - Android 因内存问题而强制关闭

> ID：10189187
> 
> 赞同：0
> 
> 时间：2012-04-17T10:07:54.407
> 
> 标签：android, memory, memory-management, android-emulator

在我的 android 应用程序中，有大量的图像资源，我以实现*最大性能*的方式实现了它们。

我已经释放了几乎每个屏幕`System.gc()`和`calculated heap size`每个屏幕中的内存。

应用程序的流程是当我们完成应用程序的工作时，它从头开始重新启动以创建新模块。当用户在 4-5 次重复相同的过程以创建模块时，应用程序会强制关闭。

logcat 中的错误是相同的内存预算`exceeds VM budget error`。

有没有办法在重新启动或处理`bitmaps`多次出现的大事件时完全停止应用程序。

我不知道完全关闭应用程序的代码，在这个应用程序中我无法继续完成所有活动。

有一些限制。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:14:57.850

System.gc() 在您的代码中，Java VM 可能会或可能不会在运行时决定在该点进行垃圾收集。完成与位图的业务后，请尝试在位图上调用回收。这将有助于及时释放你的记忆。

# jquery - jQuery 插件骨架

> ID：10189189
> 
> 赞同：1
> 
> 时间：2012-04-17T10:08:24.127
> 
> 标签：jquery, jquery-plugins

查看 jQuery 的 [Plugins/Authoring][1] 文档，我发现了一些问题。我需要创建一个插件，让我可以执行以下操作：

```
$('#one').plug({foo:'bar'});
$('#two').plug(); 
```

根据文档，我应该：

```
(function($){

    var settings = {
        foo:''
    };
    var methods = {
        init:function(options){
            return this.each(function(){
                $.extend(settings, options);

                //------ Problem ----------//
                alert(settings.foo);

            });
        }
    };
    $.fn.plug = function(method){
        //...
    }

})(jQuery); 
```

问题：`$('#one').plug({foo:'bar'});`按预期警告“bar”，但下一行没有返回空字符串，它也返回“bar”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-19T08:52:22.487

我想我应该把这个发布给任何有同样问题的人。有很多方法可以创建一个 jQuery 插件。我现在经常使用的是这个骨架：

```
(function($, window, document, undefined){

    function Skeleton(element, options){
        this.$element = $(element);
        this.options = options;

        // Plugin init goes here...

    }

    Skeleton.prototype = {
        // Plugin methods
        sampleMethod: function(){
            // ...
        }

    };
    // Plugin Definition //
    $.fn.skeleton = function(options){
        if( typeof options == 'string'){
            var plugin = this.data('skeleton');
            if(plugin){
                var r = plugin[options].apply(plugin, Array.prototype.slice.call( arguments, 1 ) );
                if(r) return r
            }
            return this
        }

        options = $.extend({}, $.fn.skeleton.defaults, options);

        return this.each(function(){
            var plugin = $.data(this, 'skeleton');
            if( ! plugin ){
                plugin = new Skeleton(this, options);
                $.data(this, 'skeleton', plugin);
            }
        });
    };
    $.fn.skeleton.defaults = {
        // Plugin options ...
    };

})(jQuery, window, document); 
```

# java - csv文件中一列的最大长度是多少？

> ID：10189190
> 
> 赞同：9
> 
> 时间：2012-04-17T10:08:26.747
> 
> 标签：java, csv

csv文件中一列的最大长度是多少。是否可以通过java代码控制？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-17T10:10:55.577

您可以拥有与最大文件大小一样长的列。这通常受硬盘驱动器大小的限制。

在 Java 中，实际限制是大约 20 亿个字符，这是字符串的最大大小。

如果您愿意，可以限制长度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T10:11:42.863

CSV 是一种表示您使用逗号分隔值的格式。基本上就是这样。该标准没有最大值。

您的文件系统有文件大小限制，因此会停止它，并且您的代码可能存在内存问题，因为您尝试读取多个演出，但没有最大值。

所有可能的最大值都由其他因素定义，而不是 CSV。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-17T10:11:57.470

CSV 不是标准化格式。文件中的任何“列”都没有规定的长度，除了用逗号分隔的值列表之外，文件也没有任何实际的正式要求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T11:11:38.177

CSV 文件对最大大小没有限制，但内存限制除外。

但是，我觉得在您的应用程序中使用如此大的 CSV 文件将是一个非常糟糕的架构。

# c++ - 没有模板的 std::array 迭代器范围？

> ID：10189191
> 
> 赞同：3
> 
> 时间：2012-04-17T10:08:30.867
> 
> 标签：c++, arrays, iterator

使用 C 数组，编写任何大小的数组的代码都相当容易：

```
void func( T* itBegin, T* itEnd );

void main() {
    T arr1[1];
    func( std::begin(arr1), std::end(arr1) );
    T arr2[2];
    func( std::begin(arr2), std::end(arr2) );
} 
```

我怎么能用 std::arrays 做到这一点？

```
void func( ??? itBegin, ??? itEnd );

void main() {
    std::array<T,1> arr1;
    func( std::begin(arr1), std::end(arr1) );
    std::array<T,2> arr2;
    func( std::begin(arr2), std::end(arr2) );
} 
```

问题是，在 MSVC 2010 中，`std::array<T,N>::iterator`不同的`N`. 这是 MSVC 2010 中的错误吗？如果不是，这种设计的基本原理是什么？是的，我可以从 std::array 获取指针并传递它们而不是迭代器，但这不是不必要的丑陋吗？

顺便说一句，`boost::array<T,N>::iterator`所有人都一样`N`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T10:10:18.980

```
template <class I>
void func(I begin, I end)
{
    for (auto x = begin; x != end; ++x)
        something_with(*x);
} 
```

将它们一般定义为类型参数，然后将它们当作指针使用。任何行为类似于指针的东西都可以编译，没有的东西就不会。

类似指针的东西包括普通指针，以及标准库迭代器，以及任何其他定义`operator=`,`operator*`和`operator++`.

这样做，因为您将只使用匹配的开始/结束迭代器范围对，相同的，那么如果是不同的类型就`array<N>`无关紧要了。`array<N>::iterator``array<M>::iterator`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T10:15:53.210

据我所知，该标准并不要求不同大小`std::array`的迭代器具有相同类型。具有不同的类型`std::array<int, 1>`并且`std::array<int, 2>`看起来是合法的（尽管人们可能对实现的质量有一些看法）。

如果这是一个问题，您可以使用 C 样式数组，或使用指针：

```
func( &arr1[0], &arr1[0] + arr1.size() ); 
```

这两种解决方案都不是理想的，但它们是我能提供的最好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T10:11:43.610

```
template <class I>
void func(I begin, I end); 
```

# custom-controls - 如何使用 jquery 在 asp.net 中创建自定义控件

> ID：10189208
> 
> 赞同：0
> 
> 时间：2012-04-17T10:10:06.310
> 
> 标签：custom-controls, asp.net-customcontrol

请任何机构提供代码示例。如何在 asp.net 文本框中嵌入 jquery 数据选择器。意思是我如何使用带有 jquery 的 asp.net 控件创建它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:16:13.253

如果您在关联 ASP.NET 文本框以与[jQuery DatePicker](http://jqueryui.com/demos/datepicker/)一起使用时遇到问题，那么这应该会有所帮助：

```
<script>
    $(function() {
        $("<%=Date.ClientID %>").datepicker();
    });
</script>
<div class="demo">
     <p>Date: <asp:TextBox ID="Date" runat="server" /></p>
</div> 
```

# ios - UITableView 和 NSFetchedController 委托从未被调用

> ID：10189210
> 
> 赞同：0
> 
> 时间：2012-04-17T10:10:06.480
> 
> 标签：ios, uitableview, nsfetchedresultscontroller

我正在尝试实现一个具有 2 个 UITableViews（在 iPad 上）的 UIViewController：一个用于显示清单的部分，另一个用于显示所选/部分中的问题。

我已经设置了 NSFetchedResultsController 并且能够成功地从持久存储中获取对象，但是没有调用 NSFetchedResultsController 或 UITableView 委托方法。

我确实将类设置为实现各自的协议，并将 FRC 和 TableView 委托设置为“self”。

我在每个委托方法中都设置了断点，但从未到达其中任何一个（是的，我在启用断点的情况下运行，并且可以很好地单步执行代码的其他部分）。

我很欣赏关于为什么在这些情况下不会调用委托方法的任何见解：1）当 [FRC performFetch] 执行并且 FRC.fetchedObjects 被设置/更新时 2）当 [tableView reloadData] 被调用时（至少应该检查 numberOfSectionsInTableView ?)

.H 文件：

```
#import <UIKit/UIKit.h>
#import <CoreData/CoreData.h>

@interface ChecklistViewController : UIViewController <NSFetchedResultsControllerDelegate,
                                                        UITableViewDelegate,
                                                        UITableViewDataSource> 
{
    UIView *sectionsView;

    UITableViewController       *sectionsTable;
    NSFetchedResultsController  *sectionsFetchedResultsController;
}

@property (nonatomic, retain) IBOutlet  UIView                      *sectionsView;
@property (nonatomic, retain) IBOutlet  UITableViewController       *sectionsTable;
@property (nonatomic, retain)           NSFetchedResultsController  *sectionsFetchedResultsController;

-(void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath;

@end 
```

.M 文件

```
#import "ChecklistViewController.h"
#import "Inspection.h"
#import "InspectionQuestion.h"
#import "ContextManager.h"

@implementation ChecklistViewController

@synthesize sectionsView;
@synthesize sectionsTable;
@synthesize sectionsFetchedResultsController;

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];

    //Setup tableviews
    self.sectionsTable = [[UITableViewController alloc] init]; 
    self.sectionsTable.view = self.sectionsView;
    self.sectionsTable.tableView.dataSource = self;         
    self.sectionsTable.tableView.delegate = self;     

    //Fetch sections
    NSError *error = nil;
    if (self.sectionsFetchedResultsController.fetchedObjects == nil) {
        self.sectionsFetchedResultsController.delegate = self;
        if (![[self sectionsFetchedResultsController] performFetch:&error]) {
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        }       
    }
    NSLog(@"fetched results:%@",self.sectionsFetchedResultsController.fetchedObjects);

    //For testing delegates
    [self.sectionsTable.tableView reloadData];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return YES;
}

#pragma mark -
#pragma mark TableViewDelegate methods

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    NSInteger count = [[self.sectionsFetchedResultsController sections] count];

    if (count == 0) {
        count = 1;
    }

    return count;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    NSInteger numberOfRows = 0;

    if ([[self.sectionsFetchedResultsController sections] count] > 0) {
        id <NSFetchedResultsSectionInfo> sectionInfo = [[self.sectionsFetchedResultsController sections] objectAtIndex:section];
        numberOfRows = [sectionInfo numberOfObjects];
    }

    NSLog(@"CheckListViewController::numberOfRowsInSection - numberOfRows:%d", numberOfRows);
    return numberOfRows;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    // Dequeue or if necessary create a TableViewCell, then set its  to the  for the current row.           
    static NSString *cellIdentifier = @"cellIdentifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    [self configureCell:cell atIndexPath:indexPath];
    return cell;
}

- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath {
    // Configure the cell
    NSLog(@"CheckListViewController::configureCell - indexPath:%@,", indexPath);        
    InspectionQuestion *question = [self.sectionsFetchedResultsController objectAtIndexPath:indexPath];    
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSLog(@"CheckListViewController::didSelectRowAtIndexPath - started");
    InspectionQuestion *question = [self.sectionsFetchedResultsController objectAtIndexPath:indexPath];     
    //[self show: animated:YES];
    NSLog(@"CheckListViewController::didSelectRowAtIndexPath - ended"); 
}

#pragma mark -
#pragma mark FetchedResultsController

- (NSFetchedResultsController *)sectionsFetchedResultsController {
    // Set up the fetched results controller if needed.
    NSLog(@"ChecklistViewController::sectionsFetchedResultsController - started");

    if (sectionsFetchedResultsController == nil) {

        NSLog(@"ChecklistViewController::fetchedResultsController - FETCHING new results");     

        NSManagedObjectContext *managedObjectContext = [[ContextManager sharedContext] managedObjectContext];    

        // Create the fetch request for the entity.
        NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];

        NSEntityDescription *entity = [NSEntityDescription entityForName:@"InspectionQuestion" inManagedObjectContext:managedObjectContext];
        [fetchRequest setEntity:entity];

        NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"sectionId" ascending:YES];
        NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
        [fetchRequest setSortDescriptors:sortDescriptors];

        NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:managedObjectContext sectionNameKeyPath:nil 
           cacheName:nil
//                   cacheName:@"Root"
        ];

        //aFetchedResultsController.delegate = self;
        self.sectionsFetchedResultsController = aFetchedResultsController;
//        self.sectionsFetchedResultsController.delegate = self;

/* ARC
        [aFetchedResultsController release];
        [fetchRequest release];
        [sortDescriptor release];
        [sortDescriptors release];
*/ 
    }

    return sectionsFetchedResultsController;
}  

- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller {
    // The fetch controller is about to start sending change notifications, so prepare the table view for updates.
    if ( controller == self.sectionsFetchedResultsController ) {
        [self.sectionsTable.tableView beginUpdates];
    }
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath {
    UITableView *tableView;

    if ( controller == self.sectionsFetchedResultsController ) {
        tableView = self.sectionsTable.tableView;
    }    

    switch(type) {
        case NSFetchedResultsChangeInsert:
            NSLog(@"ChecklistViewController::didChangeObject - INSERT");
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            NSLog(@"ChecklistViewController::didChangeObject - DELETE");
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeUpdate:
            NSLog(@"ChecklistViewController::didChangeObject - UPDATE");
            [self configureCell:[tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
            break;

        case NSFetchedResultsChangeMove:
            NSLog(@"ChecklistViewController::didChangeObject - MOVE");
            [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
            [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type {
    switch(type) {
        case NSFetchedResultsChangeInsert:
            [self.sectionsTable.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:
            [self.sectionsTable.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
    // The fetch controller has sent all current change notifications, so tell the table view to process all updates.
    [self.sectionsTable.tableView endUpdates];
}

@end 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:29:10.580

try changing `UITableViewController` to `UITableView`

```
UITableView       *sectionsTable; 
```

and make the type your `UIViewController` a `UITableViewController`

```
@interface ChecklistViewController : UITableViewController <NSFetchedResultsControllerDelegate,
                                                    UITableViewDelegate,
                                                    UITableViewDataSource> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T17:11:48.400

我发现了问题——UITableViewController 没有正确添加到视图层次结构中

代替

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    //Setup tableviews
    self.sectionsTable = [[UITableViewController alloc] init]; 
    self.sectionsTable.view = self.sectionsView;
    self.sectionsTable.tableView.dataSource = self;         
    self.sectionsTable.tableView.delegate = self; 
```

它应该是

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    //Setup tableviews
    self.sectionsTable = [[UITableViewController alloc] init];     
    [self.sectionsView addSubview:self.sectionsTable.view];
    self.sectionsTable.tableView.dataSource = self;         
    self.sectionsTable.tableView.delegate = self; 
```

注意：sectionsTable.view 的框架仍然需要设置。

现在正在调用 tableview 和 FRC 委托方法并呈现 tableview。

# android - 检测android中每个百分比的电池状态变化

> ID：10189218
> 
> 赞同：7
> 
> 时间：2012-04-17T10:10:39.663
> 
> 标签：android, power-management

我想检测每个百分比的电池变化。我可以用广播接收器检测一次电池电量。但是当 % 从 66 变为 67 时，它不会自动更新值。

这是我的代码。

```
 private void batteryLevel() {
        BroadcastReceiver batteryLevelReceiver = new BroadcastReceiver() {
            public void onReceive(Context context, Intent intent) {
                context.unregisterReceiver(this);
                Log.i("Battery CHANGED******",":: IN RECEIVER");

                int rawlevel = intent.getIntExtra("level", -1);
                int scale = intent.getIntExtra("scale", -1);
                int level = -1;
                if (rawlevel >= 0 && scale > 0) {
                    level = (rawlevel * 100) / scale;
                }
                btnConsumer.setText("Battery Level Remaining: " + level + "%");
            }
        };
        IntentFilter batteryLevelFilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
        registerReceiver(batteryLevelReceiver, batteryLevelFilter);

    } 
```

添加权限

```
 <uses-permission android:name="android.permission.BATTERY_STATS"></uses-permission> 
```

它检测到 66，但是当它更改 65 或 67 时，它不会更新值。或者不显示日志

我想让它像我可以得到每一个改变。

提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-17T11:08:36.767

首先，您不需要`BATTERY_STATS`许可。

其次，您的第一行`onReceive()`取消注册 your `BroadcastReceiver`，从而阻止您获得任何进一步的更新。

第三，不能保证每 1% 的变化都会向您发送电池信息。例如，许多摩托罗拉手机仅`ACTION_BATTERY_CHANGED`每 10% 发送一次，直到电池电量不足。广播频率的决定取决于`ACTION_BATTERY_CHANGED`设备制造商，而不是您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-01T07:24:55.467

你不需要那个**BATTERY_STATS**权限

并且您不需要在 onReceive 方法中取消注册接收器，因为如果您这样做，您的接收器将只运行一次，而不是第二次。所以只需注册接收者并在 onReceive 方法中做你想做的事情。

如果您的手机处于充电状态，它将不断改变电池状态，并且会以百分之一的速度多次更新接收器

# swing - clojure doto 中的普通实例方法调用

> ID：10189222
> 
> 赞同：3
> 
> 时间：2012-04-17T10:10:59.743
> 
> 标签：swing, clojure

我在clojure中设置了一个swing UI，并有一个类似的块：

```
 (doto main-frame
    (.setUndecorated true)
    (.setExtendedState Frame/MAXIMIZED_BOTH)
    (.setDefaultCloseOperation JFrame/EXIT_ON_CLOSE)
    (.setVisible true)
    ) 
```

但现在我想打电话

```
(.setBackground (.getContentPane main-frame) Color/BLACK) 
```

在我将框架设置为可见之前，有没有比结束 doto 并使用 (.instanceMember instance args*) 语法更好的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T10:58:11.227

如果你真的想要一个`doto`，那么也许这会做：

```
(doto main-frame
  (.setUndecorated true)
  (.setExtendedState Frame/MAXIMIZED_BOTH)
  (.setDefaultCloseOperation JFrame/EXIT_ON_CLOSE)
  (-> (.getContentPane) (.setBackground Color/BLACK))
  (.setVisible true)) 
```

以上依赖于`doto`不限于 Java 方法的事实，它只是将其第一个参数（已评估）作为随后每个形式的第一个参数插入。

我会结束`doto`虽然上面的内容不是很可读。或者，也许只是定义一个`set-background-on-content-pane`函数（显然需要`main-frame`）并在 中使用它`doto`：

```
(defn set-bg-on-frame [fr color] (.setBackground (.getContentPane fr) color))

(doto main-frame
   .
   .
   .
   (set-bg-on-frame Color/BLACK)
   (.setVisible true)) 
```

# c# - C# 枚举器术语混淆

> ID：10189224
> 
> 赞同：2
> 
> 时间：2012-04-17T10:11:08.060
> 
> 标签：c#, .net, c#-4.0

在 C# 中，有人告诉我，如果首先将诸如 List(T) 之类的容器类向上转换为诸如 IEnumerable 之类的容器接口，然后随后使用 foreach 对其进行迭代，则将创建运行时垃圾。此外，即使完全沮丧，我也被告知迭代 Collection(T) 也会在堆上创建引用。我知道这是对 GetEnumerator() 的虚拟调用的结果，它可能返回引用或值类型结果。

检查 MSDN 文档中的值类型清楚地将所有枚举列为值类型。如果枚举由枚举器列表组成，那么这些枚举器不是按照文档的值类型吗？他们是盒装的吗？还是彼此完全不相关但名称相似？还是完全不同的东西？

我不确定如何统一这两个陈述，我希望有人可以更清楚地向我解释。

谢谢。

编辑：考虑到评论者对使用“从不”和“不必要”等词的建议，问题重新措辞

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:13:02.250

Enumerations ( `enum`s) 与 Enumerators 无关。

和

> 有人告诉我要避免...

似乎是一个非常不成熟且不必要的优化。

# javascript - 如何在保存打印页面的同时为文件创建自定义文件名？

> ID：10189225
> 
> 赞同：12
> 
> 时间：2012-04-17T10:11:12.053
> 
> 标签：javascript, asp.net

在这里，我正在通过 window.print() 事件打印一个页面，在打印之前我需要保存这个页面，因为我需要在这个事件中硬核一个文件名。

```
 <a href="_javascript:window.print()">
    <img class="noPrint" src="Images/Print_icon.png" border="0"></a> 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-17T10:13:39.387

您可以通过以下方式更改标题[`document.title`](http://www.w3schools.com/jsref/prop_doc_title.asp)：

```
<a href="someRealUrl" onclick="document.title='My new title'; window.print(); return false;"><img class="noPrint" src="Images/Print_icon.png" border="0"></a> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T10:43:24.847

```
onClick="document.title = "My new title";window.print();" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-10T18:14:31.130

看：

[https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onbeforeprint](https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onbeforeprint) [https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onafterprint](https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onafterprint)

> beforeprint 和 afterprint 事件允许页面在打印开始之前更改其内容（例如，可能删除横幅），然后在打印完成后恢复这些更改。一般来说，您应该更喜欢使用@media print CSS at-rule，但在某些情况下可能需要使用这些事件。

您的问题的解决方案是更改事件处理程序并`document.title`在`beforeprint`事件处理程序中恢复其原始值`afterprint`。

# windows - NSIS 安装程序使用错误的字符集创建目录

> ID：10189227
> 
> 赞同：0
> 
> 时间：2012-04-17T10:11:16.583
> 
> 标签：windows, character-encoding, nsis

在某些机器上，我的 NSIS 安装程序会使用一个错误的字符创建文件夹。

NSIS 应该使用**ń** char创建一个文件夹

```
// U+0144   ń   c5 84   LATIN SMALL LETTER N WITH ACUTE 
```

而是用**ñ** char创建了一个文件夹

```
// U+00F1   ñ   c3 b1   LATIN SMALL LETTER N WITH TILDE 
```

有线部分仅在某些机器上发生，我无法重现。据我所知，这仅针对 Windows Vista（可能是基本版）进行了报道。

我怀疑这与 Windows-1250 到 UTF 的转换有关。因为 NSIS 仍然不支持 UTF，所以我使用的是 Windows-1250 编码的脚本文件。*ń* char 是并且`0xF1`应该被翻译为 UTF `U+c584`，但安装程序会使用`U+c3b1`char 创建文件夹。另一方面，`U+c3b1`相当于 Windows-1252 `0xF1`。

当编译的安装程序运行时，什么可能会影响 NSIS 脚本中使用的字符的解释？如何确保预期的转化`0xF1`=> `U+c584`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T21:01:41.590

NSIS 源脚本的编码并不能真正决定最终的字符串，从脚本/安装程序到 unicode 字符串的字节转换发生在最终用户系统上，因此 ASCII 之外的字符可能会根据系统默认代码页而有所不同（[语言为非 Unicode 程序（系统区域设置）](http://windows.microsoft.com/en-US/windows-vista/Change-the-system-locale)）。

您可以尝试为此目录名称创建自定义[LangString 。](http://anders_k.users.sourceforge.net/public/NSIS/2.46/Manual.html#langstring)为此，您必须在键入 ń 时将编辑器代码页设置为有问题的代码页。您可以通过`System::Call kernel32::GetACP()i.r0`在 .onInit 和 StrCpy 中检查 $LANGUAGE（或使用并检查 $0）来模拟这一点，该字符串在此系统上正确转换为有问题的变量。

下一个 NSIS 版本可能是 v3.0，我不知道你从哪里得到 2.50，但它可能只是 unicode fork 使用的占位符。

# jpa - 使用 Bndtools 增强 JPA

> ID：10189229
> 
> 赞同：0
> 
> 时间：2012-04-17T10:11:30.323
> 
> 标签：jpa, eclipselink, openjpa, bnd, bndtools

一些 JPA 实现使用字节码增强来实现性能。我对 OpenJPA 和 EclipseLink（称之为编织）感兴趣。它们提供了一个 Ant 任务来在构建时完成它。我可以让 Bndtools 运行它（不太可能）还是给它已经增强的 .class 文件？

一种可能性是编写一个 Bnd 插件，所以我正在寻找其他插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:40:43.463

使用[OpenJPA Eclipse 工具](http://openjpa.apache.org/openjpaeclipseenhancementbuilder.html)对我有用。

更新：从头开始，它会产生错误的代码[https://issues.apache.org/jira/browse/OPENJPA-1879](https://issues.apache.org/jira/browse/OPENJPA-1879)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:20:37.643

使用[openjpa-maven-plugin](http://openjpa.apache.org/enhancement-with-maven.html)，[以通常的方式在 m2e 中启用增强目标](http://wiki.eclipse.org/M2E_plugin_execution_not_covered)，并在项目属性中将 Maven Project Builder 移动到 Bndtools Builder 之前。

# php - file_get_contents 超时

> ID：10189232
> 
> 赞同：1
> 
> 时间：2012-04-17T10:11:50.633
> 
> 标签：php, timeout, file-get-contents

我正在使用[`file_get_contents`](http://php.net/file_get_contents)，我想[定义一个超时](http://php.net/manual/context.http.php)。我试图通过创建这样的上下文来做到这一点：

```
$timeout = array('http' => array('timeout' => 6));

$context = stream_context_create($timeout);

$xml = file_get_contents($hostName,false,$context); 
```

但它忽略了这个值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-19T20:25:10.270

我想默认的超时设置是 60 秒。您可以将其更改为您想要的任何值。

```
<?php

$ctx=stream_context_create(array('http'=>
    array(
        'timeout' => 30 // 30 sec
    )
));

$conetnt = file_get_contents('http://example.com',false,$ctx);
var_dump($conetnt);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T06:43:48.917

由于我仍然无法发表评论（并且在这种情况下编辑或标记问题（作为重复项（？））可能​​不太合适），让我添加一个后续问题和评论作为答案：

*   当你说：

    > 我为超时分配了一个小值，尽管如此 file_get_contents 返回了良好的结果

你的意思是即使你设置了一个超时时间，比如 1 秒，file_get_contents() 需要更多的时间，并且不会超时？您是否有任何低级监控可用于区分“连接”和“读取”数据所需的时间？

*   [因为正如 Fanis 在他对“ PHP file_get_contents ignoring timeout?](https://stackoverflow.com/questions/3689371/php-file-get-contents-ignoring-timeout) ”问题的回答中所说，如果您使用的是“file_get_contents()”（而不是较低级别的套接字函数），则无法设置“*连接*”到远程服务器的时间可用的 ini 设置，或者显然是上下文条目。您只设置“*读取*”超时。

（我意识到这是一个老问题，但是我在搜索中遇到了这两个问题，因为我有同样的问题，并认为我应该在它们之间建立链接）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T10:16:43.280

从 PHP 5.2.1 开始，您可以指定`timeout`上下文选项并将上下文传递给 file_get_contents()

```
ini_set('default_socket_timeout',    120); 
```

# iphone - 多次点击时 UITextView textViewShouldBeginEditing 崩溃

> ID：10189239
> 
> 赞同：4
> 
> 时间：2012-04-17T10:12:14.190
> 
> 标签：iphone, objective-c, ios, xcode, uitextview

我有一个 UIViewController。在这个控制器中，我以编程方式创建一个 UITextView 并将其委托设置为我的控制器。我这样做是因为我不想在点击它时开始编辑 textView。

**ViewDidLoad 方法**

```
UITextView* textView = [[UITextView alloc] initWithFrame:CGRectMake(9, 10, 302, 200)];
[textView setDelegate:self];
[self.view addSubview:textView];
[textView release]; 
```

我实现了 textViewShouldBeginEditing 方法以在此处返回 NO 以禁用键盘显示。

**textViewShouldBeginEditing 方法**

```
- (BOOL)textViewShouldBeginEditing:(UITextView *)textView
{
    NSLog(@"Shouldbegin");
    return NO;
} 
```

**出现的问题**

当我点击 textView 时，它可以工作一次，但如果我再次点击它，它将使应用程序崩溃而没有任何日志。当我拿着 textView 并释放它时，奇怪的是，它会像我想要的那样工作。另一方面，正常的单击第二次不起作用。

**编辑**

彼此快速单击似乎也可以工作，所以在我等待 x 秒后它似乎不起作用。

经过一些测试，我发现它似乎是一个 iOS 5.X > 错误。在 4.3 设备/模拟器中运行我的应用程序时，它会正常工作。iOS 5.1 设备上的错误日志显示以下内容：

```
Date/Time:       2012-04-17 14:00:49.497 +0200
OS Version:      iPhone OS 5.1 (9B176)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x00000014
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   TextInput                       0x36bf69e8 TI::Favonius::BeamSearch::choose_hit_test_node(WTF::RefPtr<TI::Favonius::SearchNode> const&, WTF::RefPtr<TI::Favonius::KeyAreaNode> const&, WTF::RefPtr<TI::Favonius::SearchNode> const&, WTF::RefPtr<TI::Favonius::SearchNode> const&) + 12
1   TextInput                       0x36bf6d1e TI::Favonius::BeamSearch::update_for_touch(unsigned int, WTF::PassRefPtr<TI::Favonius::KeyAreaNode>) + 602
2   TextInput                       0x36bfb5c2 TI::Favonius::StrokeBuildManager::update_search_for_touch(unsigned int, int) + 66
3   TextInput                       0x36bfb97c TI::Favonius::StrokeBuildManager::key_down_or_drag_hit_test_for_UI(bool, CGPoint, double, int, int, float, bool, ZT::LayoutDictionaryContext&, bool, int) + 216
4   TextInput                       0x36bddf54 TIInputManagerZephyr::simulate_touches_for_input_string() + 344
5   TextInput                       0x36bed8ba -[TIKeyboardInputManagerZephyr candidates] + 214
6   UIKit                           0x31066616 -[UIKeyboardImpl generateAutocorrectionReplacements:] + 82
7   UIKit                           0x31108a96 __71-[UITextInteractionAssistant scheduleReplacementsForRange:withOptions:]_block_invoke_0 + 370
8   UIKit                           0x3110ec62 -[UITextSelectionView calculateAndShowReplacements:] + 6
9   Foundation                      0x3762192c __NSFireDelayedPerform + 408
10  CoreFoundation                  0x361a1a2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8
11  CoreFoundation                  0x361a1692 __CFRunLoopDoTimer + 358
12  CoreFoundation                  0x361a0268 __CFRunLoopRun + 1200
13  CoreFoundation                  0x3612349e CFRunLoopRunSpecific + 294
14  CoreFoundation                  0x36123366 CFRunLoopRunInMode + 98
15  GraphicsServices                0x324e3432 GSEventRunModal + 130
16  UIKit                           0x30e70e76 UIApplicationMain + 1074 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:07:03.737

我确实找到了解决方案。我真的不喜欢解决 Apple 错误，但有时你必须这样做。这是三个步骤...

1）用不可见的视图替换默认键盘

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    myTextView.inputView = customKeyboard;
} 
```

2）回答是允许编辑

```
- (BOOL)textViewShouldBeginEditing:(UITextView *)textView{
    return YES;
} 
```

3）在 textViewDidChangeSelection 中辞职第一响应者隐藏光标

```
- (void)textViewDidChangeSelection:(UITextView *)textView{
    [textView resignFirstResponder];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:12:11.303

如果您不想在点击 UITextView 时开始编辑它：

```
UITextView* textView = ...;
textView.editable = NO; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T11:25:27.880

```
-(BOOL)textViewShouldBeginEditing:(UITextView *)textView
{

   [txtView resignFirstResponder];

} 
```

并在 dealloc 方法中释放 txtView

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T12:45:45.080

经过一些测试，我发现它似乎是一个 iOS 5.X > 错误。在 4.3 设备/模拟器中运行我的应用程序时，它会正常工作。

查看我编辑日志文件的主要帖子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-27T11:00:05.033

**Swift 4.2** **解决这个问题的最好和最简单的方法就是让撤消管理器为假**

```
textView.undoManager?.disableUndoRegistration() 
```

如果您在运行时更改了表格中的视图，则会出现此错误，并且单元格将在点击时重新加载，

# iphone - 使用搜索显示控制器时自定义 CellIdentifier 为 Null

> ID：10189243
> 
> 赞同：13
> 
> 时间：2012-04-17T10:12:32.583
> 
> 标签：iphone, objective-c, xcode, uitableview, uisearchdisplaycontroller

在我的表格视图中有我从 UITableViewCell 类初始化的自定义单元格。我有记录首字母的部分，并且有一个动态创建的 indexPath。

我想在我的 tableview 中添加一个搜索显示控制器。所以我做到了，创建了所有过滤数据的方法。我确信我的函数运行良好，因为我正在将数组计数打印到屏幕以获取搜索结果。

我的问题是第一次加载视图时，数据在屏幕上。但是当我点击搜索输入并输入一个字母时，我得到了`'UITableView dataSource must return a cell from tableView:cellForRowAtIndexPath:'`错误。使用断点后，我发现我的自定义单元格在搜索后为零。数据存在，但单元格未初始化。

这是我用于自定义单元初始化的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"ObjectCell";

    SpeakerCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    NSDictionary *myObject = [[sections valueForKey:[[[sections allKeys] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)] objectAtIndex:indexPath.section]] objectAtIndex:indexPath.row];

    cell.label1.text = [myObject objectForKey:@"myValue"];
    return cell;
} 
```

我相信我在 IB 中放置控件时犯了一个错误。所以我添加了对象的截图：

![在此处输入图像描述](../Images/cc5e309fc6f1f2372c13e7ee8024e8ac.png)

我的表格视图的连接检查器

![我的表格视图的连接检查器](../Images/b387ab89d8da9b235f02e85d5d81c0d0.png)

我的搜索显示控制器的连接检查器

![在此处输入图像描述](../Images/0e6b687d230af37eaccba75992f539bc.png)

编辑：问题实际上已解决，我使用了 UISearchBar 而不是搜索显示控制器，但我想这个问题仍未解决。所以我愿意尝试任何方法让它发挥作用。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-06T18:24:41.043

截至此处[搜索显示控制器问题](https://stackoverflow.com/questions/8066668/ios-5-uisearchdisplaycontroller-crash)，您需要访问`self.tableView`而不是`tableView`：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:@"CellId"];

    // do your thing

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T06:23:21.167

对于使用 iOS 5 和 StoryBoards 的用户，您可能希望使用以下方法而不是**initWithIdentifier**：

**initWithStyle:(UITableViewCellStyle)stylereuseIdentifier:(NSString *)reuseIdentifier**

例子：

```
 NSString *cellIdentifier = @"ListItemCell";
  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
  if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T10:21:10.530

我不确定这在商店登机中应该如何工作。

但通常你会检查是否`[tableView dequeueReusableCellWithIdentifier:CellIdentifier]`返回一个单元格。因为如果之前未加载单元格或没有任何单元格可重用，则必须创建一个新单元格：

```
SpeakerCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
   cell = [[SpeakerCell alloc] initWithIdentifier: CellIdentifier];
} 
```

此外，当在 Objective-C 中声明局部变量时，我们倾向于不将第一个字母大写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-01T08:23:02.980

我遇到了同样的问题，自定义单元格（内置在 Storyboard 中）不会在第一个字母被放入搜索字段后立即被绘制。然而搜索成功了。

最后我[从 Brenna Blackwell 那里找到了一个很好的教程，](http://www.brennablackwell.com/?p=83)建议在 UITableViewCell 的相应子类中手动配置单元格绘制，添加 UILabels 和其他项目。

# ruby-on-rails - 在rails 3中上传用户头像的自定义方法op

> ID：10189244
> 
> 赞同：0
> 
> 时间：2012-04-17T10:12:35.933
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在使用 rails 3.2 。我对编辑用户个人资料有疑问。在我的编辑表单中，我有头像字段来保存用户图像，还有其他字段用于更新名字、姓氏、位置.. 现在我正在尝试编写一个函数来向主管发送邮件，说明该用户已上传头像。如何以及在何处编写此代码逻辑。我应该添加自定义验证方法还是如何添加？给建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:24:33.787

您可以创建写入模型它可能是 before_save 或 after_save，它将帮助您跟踪属性是否更改，这取决于您可以发送通知。更多您可以通过创建观察者并将代码发送给观察者来重构。

# jsf-2 - 在 JSF Primefaces 中隐藏手风琴面板的第一个选项卡

> ID：10189246
> 
> 赞同：12
> 
> 时间：2012-04-17T10:12:42.187
> 
> 标签：jsf-2, tabs, primefaces, accordion

默认情况下，primefaces 手风琴面板的第一个选项卡在页面加载时显示为打开。有没有办法可以在页面加载时关闭它。

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-24T16:14:54.163

你可以做

```
<p:accordionPanel activeIndex="-1"> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-17T10:23:58.703

一种方法是定义一个widgetVar：

```
<p:accordionPanel widgetVar="accordion">
    ...
</p:accordionPanel> 
```

接着：

```
<body onload="PF('accordion').unselect(0)"> 
```

或对于较旧的 PF 版本：

```
<body onload="accordion.unselect(0)"> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-24T10:31:32.903

如果将 activeIndex 设置为空白（Primefaces 3.4.1），它将起作用。

```
<p:accordionPanel activeIndex=""> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-16T16:56:03.727

在 PrimeFaces 3.5.x 中，没有一个已发布的回答对我有用。使用多种模式，但是：

```
<p:accordionPanel multiple="true" activeIndex="null" ... > 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-20T18:38:55.003

您可以使用 PF 函数来执行此操作，如下代码所示：

```
PF('accordionWidgetVarName').unselect(0); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-31T14:50:15.913

回答 PrimeFaces 6.0 用户：

您可以设置 widgetVar 属性，然后调用 PF('widgetVarValue').unselect(0); 正如弗雷德波利卡波所说；但是，我无法在手风琴**load**上使用它，我尝试了各种方法，例如使用 div 的 onload 事件、使用启用了 autoRun 的 remoteCommand，甚至使用自定义 jQuery。只有当我在控制台中运行 PF unselect 调用时，这些都不适用于加载事件。

在 PrimeFaces 6.0 中，您可以使用 activeIndex 属性并将其设置为多个值，例如“1,3,5”，以关闭所有选项卡但打开第 2、第 4 和第 6 个选项卡（以 0 为基数索引）。

# xml - XSLT 属性之间有什么区别 when 和 if

> ID：10189250
> 
> 赞同：18
> 
> 时间：2012-04-17T10:12:54.543
> 
> 标签：xml, xslt

下面给出的两个代码有什么区别？两个代码都检查标签中是否存在属性：

```
<xsl:choose>
  <xsl:when test="string-length(DBE:Attribute[@name='s0SelectedSite']/node()) &gt; 0"> 
    <table>
        ...
    </table>
  </xsl:when>
  <xsl:otherwise>
    <table>
        ...
    </table>
  </xsl:otherwise>
</xsl:choose> 
```

和

```
<xsl:if test="@Col1-AllocValue"> 
    <xsl:copy-of select="@Col1-AllocValue"/>
</xsl:if> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-17T10:39:18.260

选择的结构是

```
<xsl:choose>
    <xsl:when test="a">A</xsl:when>
    <xsl:when test="b">B</xsl:when>
    <xsl:when test="c">C</xsl:when>
    <xsl:when test="...">...</xsl:when>
    <xsl:otherwise>Z</xsl:otherwise>
</xsl:choose> 
```

它允许对评估为 的第一个测试执行多项检查和一个操作`true`。`xsl:otherwise`用于在没有任何检查评估为时执行默认操作`true`；特别是这有助于 if-then-else 构造（只是一个`xsl:when`替代方案加上一个`xsl:otherwise`块）。

`xsl:if`不允许替代方案总是让我感到震惊`xsl:else`，但由于这在`xsl:choose`构造中可用，我猜它被判断为不添加它。也许下一个 XSLT 版本将包含一个`xsl:else`?

其余的，测试 in`xsl:when`和 in`xsl:if`做同样的事情：检查条件。

注意结构`xsl:if`很简单

```
<xsl:if test="a">A</xsl:if> 
```

一个

```
<xsl:when test="a">A</xsl:when> 
```

将是无效的：`xsl:when`元素**始终**是`xsl:choose`. 并且`xsl:choose`可能只有`xsl:when`孩子`xsl:otherwise`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T10:23:14.343

允许您测试多个条件并仅在`choose`一个匹配（或默认情况）时应用。`if`你也可以测试，但它们是独立测试的，每个匹配的案例都会有输出。

添加更多细节（抱歉不得不匆忙离开）

`choose`允许您测试多种情况，并且仅在其中一个条件匹配的情况下生成输出，或者生成一些默认输出。例如：

```
<xsl:choose>
  <xsl:when test='@foo=1'><!-- do something when @foo is 1--></xsl:when>
  <xsl:when test='@foo=2'><!-- do something when @foo is 2--></xsl:when>
  <xsl:when test='@foo=3'><!-- do something when @foo is 3--></xsl:when> 
  <xsl:otherwise><!-- this is the default case, when @foo is neither 1, 2 or 3--></xsl:otherwise>
</xsl:choose> 
```

如您所见，**将**根据 的值采用“分支”**之一**。**`@foo`**

 **使用`if`，它是一个单一的测试，并在该测试的结果上生成输出：

```
<xsl:if test='@foo=1'><!-- do this if @foo is 1--></xsl:if>
<xsl:if test='@foo=2'><!-- do this if @foo is 2--></xsl:if>
<xsl:if test='@foo=3'><!-- do this if @foo is 3--></xsl:if> 
```

这里的复杂情况是*失败案例*- 当`@foo`既不是 1,2 也不是 3 时会发生什么？这种丢失的情况是由`choose`- 即具有*默认*操作的能力巧妙地处理的。

XSL 还缺少您在大多数其他语言中找到的“else”，它允许您在`if`测试失败时提供替代操作 - 以及`choose`一个单一的`when`并`otherwise`允许您解决这个问题，但在我上面的示例中，那将是可怕的（证明你为什么不这样做..）

```
<xsl:choose>
  <xsl:when test='@foo=1'><!-- do something when @foo is 1--></xsl:when>
  <xsl:otherwise> <!-- else -->
    <xsl:choose>
      <xsl:when test='@foo=2'><!-- do something when @foo is 2--></xsl:when>
      <xsl:otherwise> <!-- else -->
        <xsl:choose>
          <xsl:when test='@foo=2'><!-- do something when @foo is 2--></xsl:when>
          <xsl:otherwise><!-- this is the case, when @foo is neither 1, 2 or 3--></xsl:otherwise>
        </xsl:choose>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:otherwise>
</xsl:choose> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T13:28:58.563

> 下面给出的两个代码有什么区别？两个代码都检查标签中是否存在属性：

**这不是真的**：

1.  第一个代码片段表达了一个*if ... then ... else*动作，而第二个片段只表达了一个*if ...*动作。

2.  在提供的两个代码片段中测试的条件——`xsl:when`指令内和`xsl:if`指令内是不同的。事实上，只有`xsl:if`（在第二个代码片段中）测试属性是否存在。**

# firefox - 使用greasemonkey 将图像添加到任何网页？

> ID：10189253
> 
> 赞同：1
> 
> 时间：2012-04-17T10:13:30.550
> 
> 标签：firefox, greasemonkey

我希望能够将一组预定义的图像添加到 FireFox 中的各种网站上——这是为了使个人扩展能够工作。

我想我应该能够在 GreaseMonkey 中做到这一点 - 在我继续沿着这条路走下去之前，任何人都可以确认我是否正在寻找正确的方向？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:34:07.983

是的，您可以通过多种方式做到这一点。
这是一个完整的工作脚本，可帮助您入门：

```
// ==UserScript==
// @name        _Add an image to a web page
// @include     http://stackoverflow.com/*
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js
// ==/UserScript==

$("body").append (
    '<img id="myNewImage" src="http://i37.photobucket.com/albums/e77/kpeaton/unicorn.jpg">'
);
$("#myNewImage").css ( {
    position:   "fixed",
    width:      "128px",
    height:     "128px",
    top:        "0",
    left:       "0"
} ); 
```

# python - django 应用程序中的线程

> ID：10189254
> 
> 赞同：1
> 
> 时间：2012-04-17T10:13:32.130
> 
> 标签：python, django, apache

我在托管在 apache mpm worker 上的 django 应用程序中使用线程连接到另一台机器。问题是 apache 创建了许多进程，而 django 创建了那么多线程。

基本上我希望它只创建一个线程，即使 apache 创建了许多进程。

有什么办法可以阻止 django 制作许多线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:27:06.947

I'm assuming you're using WSGI to do this. In the [configuration guide](http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide) there is a bit about

```
WSGIDaemonProcess example.com processes=2 threads=15 
```

that may come in useful.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T21:24:53.730

对于 Django，最好使用 WSGI(gunicorn/uwsgi) 和 nginx Web 服务器作为前端。

试试这个[http://senko.net/en/django-nginx-gunicorn/](http://senko.net/en/django-nginx-gunicorn/)

如果还想通过fastcgi使用apache + django，可以尝试设置FcgidMaxProcessesPerClass(DefaultMaxClassProcessCount), FcgidMinProcessesPerClass(DefaultMinClassProcessCount), FcgidMaxProcesses(MaxProcessCount), FcgidMaxRequestsPerProcess(MaxRequestsPerProcess) 为1 - mod_fcgid(apache2)。我不知道 mod_python 是如何工作的，但我认为使用它不是一个好主意。

# asp.net - ASP.NET MVC 3 在渲染前发送

> ID：10189258
> 
> 赞同：4
> 
> 时间：2012-04-17T10:13:41.070
> 
> 标签：asp.net, asp.net-mvc-3, razor, buffer, flush

我有 asp.net mvc 应用程序，它使用 razor 视图引擎。

我想在渲染正文之前将 head 发送到浏览器，以开始并行加载 css、js 和图像，并在 css 中链接。（您可以看到，这种技术如何在 chrome 开发人员工具中的[SO](http://stackoverflow.com)上工作- 例如网络）我在 asp.net 网络表单中发现了关于它的问题：[Send head before body to load CSS and JS asap](https://stackoverflow.com/questions/9264222/send-head-before-body-to-load-css-and-js-asap) 我尝试使用这个解决方案，但是它不起作用。

对于剃须刀引擎，接下来的步骤是实际的：

1.  动作返回视图结果
2.  _ViewStart.cshtml 执行（设置 ViewBag.Layout）
3.  视图从第一行执行到最后（包含代码和部分）
4.  视图引擎检查 ViewBag.Layout，如果找到 - 执行布局（带有 renderind 正文和部分）

我认为好的解决方案是将步骤 3 分为 3 个部分：

1.  为 Head 和 Css 部分生成内容
2.  发送到浏览器
3.  生成视图的其他部分

其他解决方案是静态包含 all.css 和基本 .js 文件（没有部分内容，从视图生成），发送头部，然后生成视图（生成 FooterScript 部分）。

在这两种方式中，我都需要从布局页面开始执行，而不是从视图中。首先：布局（头部）-视图（部分）-布局（刷新）-视图（其他）-布局（正文）。第二：布局（头部+冲洗）-视图（全部）+布局（正文）。

我的 _Layout.cshtml 文件：

```
<html @Html.Raw(ViewBag.xmlns)>
    <head>
        <title>@ViewBag.Title</title>
        @Html.Partial("_MetaTags")    
        <link href="@Url.ThemeCss("jquery-ui-1.8.18.custom.css")" rel="stylesheet" type="text/css" />
        <link href="@Url.Css("masterPage.css")" rel="stylesheet" type="text/css" />          
        <link rel="shortcut icon" href="/favicon.ico"/>

        @RenderSection("Css", required: false)
        <script src="@Url.CommonScript("jquery.common.min.js")" type="text/javascript"></script>
        <script src="@Url.Script("Master.js")" type="text/javascript"></script>        
        @RenderSection("Head", required: false)    
    </head>

    <body>
        <div id="pageWhithoutFooter">    
            <div id="main">
                @RenderBody()
            </div>
        </div>
        @RenderSection("FooterScript", required: false)
    </body>
</html> 
```

如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T10:19:53.310

尝试将您的头部部分放入部分视图中，然后在您的控制器中调用它：

```
PartialView("_PageHeader").ExecuteResult(ControllerContext);
Response.Flush();

// Generate model

return View(model); 
```

没有对此进行测试，但我不明白为什么它不起作用。

# android - Android中数组适配器和游标适配器的区别

> ID：10189259
> 
> 赞同：16
> 
> 时间：2012-04-17T10:13:44.613
> 
> 标签：android

Android中的数组适配器和光标适配器有什么区别？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-17T10:16:52.420

数组适配器：一个适配器，它接受一个数组并使用这个数组来构建你的列表。

CursorAdapter ：它需要一个游标，作为对 sqlite 数据库或内容解析器的查询的结果，您会收到该游标。您将此游标传递给适配器，然后根据游标中存在的数据创建列表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T10:21:53.947

Array Adapter 由任意对象数组支持的具体 BaseAdapter。您可以添加自定义对象的列表或数组

游标适配器 从游标公开数据的适配器。游标必须包含名为“_id”的列，否则此类将不起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T10:15:30.907

数组适配器用于字符串或数据数组。当光标中有数据时使用光标适配器。例如，当您从数据库中获取数据时。

# core-data - CoreData 上的自由样式 SQL 请求

> ID：10189260
> 
> 赞同：1
> 
> 时间：2012-04-17T10:13:49.077
> 
> 标签：core-data

我有两个表，其中 User (id,name) 和 UserInfo (user_id,email,date_edit)

我如何向 CoreData 发出 SQL 请求，例如

```
select * from user inner join userinfo on userinfo.user_id=user.id 
```

不使用关系 bu CoreData？

另一个例子：

我想从 userinfo 表中获取 max date_edit 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:43:15.353

与其在 SQL 中思考并尝试将其转换为 Core Data，不如从您要解决的问题开始。然后，使用 Core Data 关系来表达。

例如，如果您想为一组用户获取一组电子邮件，您可以执行以下操作：

```
NSArray *emailArray = [usersArray valueForKeyPath:@"userInfo.email"]; 
```

Core Data 具有聚合函数。你也许可以用 KVO 做一些简单的事情，比如：

```
NSNumber *maxDateEdit = [userInfoArray valueForKeyPath:@"@max.date_edit"]; 
```

[否则，请在此处](https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/CoreData/FetchingObjects.html)查看“获取对象”部分

# javascript - flexslider 和 jquery 工具覆盖 - 访问滑块对象

> ID：10189263
> 
> 赞同：1
> 
> 时间：2012-04-17T10:13:59.213
> 
> 标签：javascript, jquery, flexslider

我在jquery[工具覆盖中使用](http://jquerytools.org/demos/overlay/index.html)[flexslider](http://www.woothemes.com/flexslider/)

我想访问显示和隐藏叠加层的滑块。

```
var slideToJumpTo  = 5; //this changes
var modals = ({
init: function(){
    $("div[rel]").overlay({         
        onBeforeLoad: function() {
                    //I want to be able to access the flexslider here.
                    //So I can do something like $('slider').jumpToSlide(slideToJumpTo) - dummy code
        },
        onLoad: function() {        
            $.getScript('/js/libs/jquery.flexslider-min.js', function() {
                if ($('.overlay-carousel').length > 0) {
                    $('.overlay-carousel').flexslider({

                    });
                }
            });             
        },
        onClose:function(){

        }
    });
}
}); 
```

我应该如何引用滑块？

# php - 安装fileinfo php扩展

> ID：10189266
> 
> 赞同：7
> 
> 时间：2012-04-17T10:14:21.227
> 
> 标签：php, apache, putty, whm

由于文件信息从 PECL 移动到 PHP。通过WHM或putty安装它的最佳方法是什么？

我尝试了以下命令：

```
pecl install fileinfo 
```

并收到以下错误：

> 警告：“pear/Fileinfo”已被弃用，取而代之的是“channel://php-src/ext/fileinfo/in php sources”
> 
> “警告：频道“pear.php.net”已更新其协议，请使用“pecl channel-update pear.php.net”更新
> 
> 正在下载 Fileinfo-1.0.4.tgz ...
> 
> 开始下载 Fileinfo-1.0.4.tgz (5,835 bytes)
> 
> .....完成：5,835 字节
> 
> 3个源文件，构建
> 
> 运行：phpize
> 
> 找不到 config.m4。
> 
> 确保在模块的顶级源目录中运行“/usr/local/bin/phpize”
> 
> 错误：“phpize”失败

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T15:23:04.507

自 PHP 5.3.0 起默认启用此扩展。在此之前，fileinfo 是一个 PECL 扩展，但不再在那里维护。但是，5.3+ 之前的版本可能会使用 »[已停产的 PECL 扩展](http://pecl.php.net/package/fileinfo)。

**参考：**

[http://www.php.net/manual/en/fileinfo.installation.php](http://www.php.net/manual/en/fileinfo.installation.php)

* * *

```
ERROR: `phpize' failed 
```

显示此错误是因为您没有安装`php-devel`软件包

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-17T15:02:31.030

你安装 php-devel 吗？
phpize 执行需要的 php-devel 包。如果你在 centos 上运行以下代码

```
yum install php-devel 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-10-12T09:46:55.207

我遇到了这个问题，需要在 VPS 专用服务器上为 WHM 安装 php-fileinfo。这个[https://www.inmotionhosting.com/support/website/how-to-install-a-php-extension-using-easyapache-4/](https://www.inmotionhosting.com/support/website/how-to-install-a-php-extension-using-easyapache-4/) 非常有帮助。我想我把这个贴给下一个人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-10T12:03:08.870

对我来说，这是有效的

```
#yum install rh-php70-php-devel 
```

[https://centos.pkgs.org/7/centos-sclo-rh/rh-php70-php-devel-7.0.10-2.el7.x86_64.rpm.html](https://centos.pkgs.org/7/centos-sclo-rh/rh-php70-php-devel-7.0.10-2.el7.x86_64.rpm.html)

# php - PHP：套接字未连接时，socket_connect() 不返回 false

> ID：10189267
> 
> 赞同：1
> 
> 时间：2012-04-17T10:14:22.613
> 
> 标签：php, sockets, return, connect

当我执行此代码时：

```
//Surely there isn't any server behind
$host = "192.168.0.0";
$port = 1;

if(!$socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP))
    exit("ERROR creating the socket.");

if(!socket_connect($socket, $host, $port))
    exit("ERROR connecting.");

socket_close($socket);

exit("Success connecting!"); 
```

它打印***成功连接！***. 但它应该是*错误连接*。

这意味着 socket_connect() 在套接字未连接时不会返回 false。为什么？

我正在使用在 Windows XP 上运行的 PHP 5.3.1。

谢谢。

# java - 使 Eclipse 看起来像 Visual Studio 2010

> ID：10189268
> 
> 赞同：-1
> 
> 时间：2012-04-17T10:14:25.070
> 
> 标签：java, eclipse, visual-studio, syntax-highlighting

我想让 eclipse 看起来像 Visual Studio 2010，所以我需要知道将语法设置为什么颜色。

我知道在 Eclipse 中去哪里更改语法突出显示，但我不知道要使用的确切颜色。

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:19:36.000

I don't work with VS2010, if you can't change colors there and take a look at the defined colors, you canmake screenshots of VS2010 and take a colorpicker.

But again: Why?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:22:30.233

在等待答案时，您可以开始自己确定颜色。[谷歌](https://www.google.de/search?q=color%20picker%20windows)想出了一些工具来帮助你。

# c# - 跟踪流式阅读器的行的位置

> ID：10189270
> 
> 赞同：20
> 
> 时间：2012-04-17T10:14:29.817
> 
> 标签：c#, streamreader

我需要跟踪从流阅读器读取的行的位置。当我说 时`reader.ReadLine()`，我需要知道该行在文件中的位置，然后我还希望能够从我之前跟踪的位置读取文件。

这可能吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-17T11:28:59.900

您可以通过以下三种方式之一执行此操作：

1) 编写自己的 StreamReader。这是一个很好的起点：[如何知道流阅读器在文本文件中的位置（行号）？](https://stackoverflow.com/questions/829568/how-to-know-positionlinenumber-of-a-streamreader-in-a-textfile)

2) StreamReader 类有两个非常重要的私有变量，称为 charPos 和 charLen，它们在定位实际“读取”位置时需要，而不仅仅是流的底层位置。您可以使用反射来获取[此处建议的值](http://www.daniweb.com/software-development/csharp/threads/35078/streamreader-and-position)

> ```
> Int32 charpos = (Int32) s.GetType().InvokeMember("charPos", 
> BindingFlags.DeclaredOnly | 
> BindingFlags.Public | BindingFlags.NonPublic | 
> BindingFlags.Instance | BindingFlags.GetField
>  ,null, s, null); 
> 
> Int32 charlen= (Int32) s.GetType().InvokeMember("charLen", 
> BindingFlags.DeclaredOnly | 
> BindingFlags.Public | BindingFlags.NonPublic | 
> BindingFlags.Instance | BindingFlags.GetField
>  ,null, s, null);
> 
> return (Int32)s.BaseStream.Position-charlen+charpos; 
> ```

3）只需将整个文件读入一个字符串数组。像这样的东西：

> ```
> char[] CRLF = new char[2] { '\n', '\r' };
> TextReader tr = File.OpenText("some path to file");
> string[] fileLines = tr.ReadToEnd().Split(CRLF); 
> ```

另一种可能性（沿与#3 相同的行）是读取行并将行存储在数组中。当您想阅读前一行时，只需使用数组即可。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-12-22T08:35:22.340

跟踪实际 StreamReader 位置（以字节为单位）：

```
readonly static FieldInfo charPosField = typeof(StreamReader).GetField("charPos", BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.DeclaredOnly);
readonly static FieldInfo charLenField = typeof(StreamReader).GetField("charLen", BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.DeclaredOnly);
readonly static FieldInfo charBufferField = typeof(StreamReader).GetField("charBuffer", BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.DeclaredOnly);

static long ActualPosition(StreamReader reader)
{
    var charBuffer = (char[])charBufferField.GetValue(reader);
    var charLen = (int)charLenField.GetValue(reader);
    var charPos = (int)charPosField.GetValue(reader);

    return reader.BaseStream.Position - reader.CurrentEncoding.GetByteCount(charBuffer, charPos, charLen-charPos);
} 
```

不客气。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-12T13:02:27.020

也许这可以帮助你

```
 public class StreamLineReader : IDisposable
    {
        const int BufferLength = 1024;

        Stream _Base;
        int _Read = 0, _Index = 0;
        byte[] _Bff = new byte[BufferLength];

        long _CurrentPosition = 0;
        int _CurrentLine = 0;

        /// <summary>
        /// CurrentLine number
        /// </summary>
        public long CurrentPosition { get { return _CurrentPosition; } }
        /// <summary>
        /// CurrentLine number
        /// </summary>
        public int CurrentLine { get { return _CurrentLine; } }
        /// <summary>
        /// Constructor
        /// </summary>
        /// <param name="stream">Stream</param>
        public StreamLineReader(Stream stream) { _Base = stream; }
        /// <summary>
        /// Count lines and goto line number
        /// </summary>
        /// <param name="goToLine">Goto Line number</param>
        /// <returns>Return true if goTo sucessfully</returns>
        public bool GoToLine(int goToLine) { return IGetCount(goToLine, true) == goToLine; }
        /// <summary>
        /// Count lines and goto line number
        /// </summary>
        /// <param name="goToLine">Goto Line number</param>
        /// <returns>Return the Count of lines</returns>
        public int GetCount(int goToLine) { return IGetCount(goToLine, false); }
        /// <summary>
        /// Internal method for goto&Count
        /// </summary>
        /// <param name="goToLine">Goto Line number</param>
        /// <param name="stopWhenLine">Stop when found the selected line number</param>
        /// <returns>Return the Count of lines</returns>
        int IGetCount(int goToLine, bool stopWhenLine)
        {
            _Base.Seek(0, SeekOrigin.Begin);
            _CurrentPosition = 0;
            _CurrentLine = 0;
            _Index = 0;
            _Read = 0;

            long savePosition = _Base.Length;

            do
            {
                if (_CurrentLine == goToLine)
                {
                    savePosition = _CurrentPosition;
                    if (stopWhenLine) return _CurrentLine;
                }
            }
            while (ReadLine() != null);

            // GoToPosition

            int count = _CurrentLine;

            _CurrentLine = goToLine;
            _Base.Seek(savePosition, SeekOrigin.Begin);

            return count;
        }
        /// <summary>
        /// Read Line
        /// </summary>
        /// <returns></returns>
        public string ReadLine()
        {
            bool found = false;

            StringBuilder sb = new StringBuilder();
            while (!found)
            {
                if (_Read <= 0)
                {
                    // Read next block
                    _Index = 0;
                    _Read = _Base.Read(_Bff, 0, BufferLength);
                    if (_Read == 0)
                    {
                        if (sb.Length > 0) break;
                        return null;
                    }
                }

                for (int max = _Index + _Read; _Index < max; )
                {
                    char ch = (char)_Bff[_Index];
                    _Read--; _Index++;
                    _CurrentPosition++;

                    if (ch == '\0' || ch == '\n')
                    {
                        found = true;
                        break;
                    }
                    else if (ch == '\r') continue;
                    else sb.Append(ch);
                }
            }

            _CurrentLine++;
            return sb.ToString();
        }
        /// <summary>
        /// Free resources
        /// </summary>
        public void Dispose()
        {
            if (_Base != null)
            {
                _Base.Close();
                _Base.Dispose();
                _Base = null;
            }
        }
    } 
```

利用：

```
 using (StreamLineReader st = new StreamLineReader(File.OpenRead("E:\\log.txt")))
        {
            bool ok = st.GoToLine(1);
            int count= st.GetCount(0);

            string w0 = st.ReadLine();
            string w1 = st.ReadLine();
            string w2 = st.ReadLine();
            string w3 = st.ReadLine();
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-29T17:24:08.370

您可以使用的另一种模式是`StreamReader`在您想要更改位置时使用新模式。这应该适用于任何版本的 .net，并且不需要太多代码。

```
using var stream = File.Open("file.txt");

using (var reader = new StreamReader(stream, Encoding.UTF8, true, 4096, leaveOpen: true) {
    reader.ReadLine();
}

stream.Seek(0, SeekLocation.Begin);

using (var reader = new StreamReader(stream, Encoding.UTF8, true, 4096, leaveOpen: true) {
    // read the same line again
    reader.ReadLine();
} 
```

# jquery - jQuery - 事件处理程序中切换（显示/隐藏）的回调

> ID：10189271
> 
> 赞同：2
> 
> 时间：2012-04-17T10:14:29.990
> 
> 标签：jquery, event-handling, callback, toggle

我有这个工作正常：

```
$('#RCH'+r).on('click',function(e){$('#RSC'+r).find('.rct,.rcp').toggle();}); 
```

不过，在所有切换结束时，我想调用一个函数`rs(1);`

计划 1：我尝试将回调放在切换按钮上，但一切都变得混乱。

```
$('#RCH'+r).on('click',function(e){
  $('#RSC'+r).find('.rct,.rcp').toggle('',function(){rs(1);});
}); 
```

`rs(1)`以上为类的每次出现调用该函数（如`each`）。它还撤消了通常发生的事情，因此如果`.rcp`显示并`.rct`隐藏，则恰好相反。因此，计划 1 让一切都在一个手提篮中化为乌有。

计划 2：我还尝试`rs(1)`在功能中的切换之后放置`.on`（如下所示）。

```
$('#RCH'+r).on('click',function(e){$('#RSC'+r).find('.rct,.rcp').toggle();rs(1);}); 
```

但是，此方法`rs(1)`在切换完成之前触发，因此该`rs`函数无法完成其工作。

`rs(1);`那么...切换完成后如何开火？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T10:30:17.257

嗯，首先，`.toggle()`它是即时的，所以我假设你实际上是在使用`.toggle(/* some duration */)`. 在这种情况下，您可以传递一个在切换动画完成后调用的函数：

```
$('sel').toggle(/* duration */, function () {
  // ...
}); 
```

如果您*实际*使用`.toggle()`但由于某种原因存在导致代码失败的延迟，您可以尝试以下操作：

```
$('sel').toggle(0, function () {
  // ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:34:34.550

```
$.when($('#RCH'+r).on('click',function(e){$('#RSC'+r).find('.rct,.rcp').toggle();}))
  .done(function(){rs(1);}); 
```

试试这个，我希望这有效。

# python - 对于 Python 字典，iterkeys 是否比 viewkeys 提供任何优势？

> ID：10189273
> 
> 赞同：27
> 
> 时间：2012-04-17T10:14:43.940
> 
> 标签：python, python-2.7

在 Python 2.7 中，字典有一个`iterkeys`方法和一个`viewkeys`方法（以及类似的值和项对），提供了两种不同的方法来懒惰地迭代字典的键。该`viewkeys`方法提供 的主要特征`iterkeys`，`iter(d.viewkeys())`有效地等效于`d.iterkeys()`。此外，返回的对象`viewkeys`具有方便的类似集合的功能。因此，有充分的理由`viewkeys`支持`iterkeys`.

另一个方向呢？除了与早期版本的 Python 兼容之外，还有什么`iterkeys`更好的方法`viewkeys`吗？总是使用会丢失任何东西`viewkeys`吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-17T10:57:21.583

字典视图会像字典一样更新，而迭代器不一定会这样做。

这意味着如果您使用视图，更改字典，然后再次使用视图，视图将发生更改以反映字典的新状态。

> 它们提供字典条目的动态视图，这意味着当字典更改时，视图会反映这些更改。 [资源](http://docs.python.org/release/3.0.1/library/stdtypes.html#dictionary-view-objects)

例子：

```
>>> test = {1: 2, 3: 4}
>>> a = test.iterkeys()
>>> b = test.viewkeys()
>>> del test[1]
>>> test[5] = 6
>>> list(a)
[3, 5]
>>> b
dict_keys([3, 5]) 
```

当对大小进行更改时，将引发异常：

```
>>> test = {1: 2, 3: 4}
>>> a = test.iterkeys()
>>> b = test.viewkeys()
>>> test[5] = 6
>>> list(a)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
RuntimeError: dictionary changed size during iteration
>>> b
dict_keys([1, 3, 5]) 
```

还值得注意的是，您只能对 keyiterator 进行一次迭代：

```
>>> test = {1: 2, 3: 4}
>>> a = test.iterkeys()
>>> list(a)
[1, 3]
>>> list(a)
[]
>>> b = test.viewkeys()
>>> b
dict_keys([1, 3])
>>> b
dict_keys([1, 3]) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-17T11:20:11.260

正如您所观察到的，在功能方面，视图更好。兼容性方面，它们更糟。

一些性能指标，取自 64 位 Ubuntu 机器上的 Python 2.7.2：

```
>>> from timeit import timeit 
```

处理空字典：

```
>>> emptydict = {}
>>> timeit(lambda: emptydict.viewkeys())
0.24384498596191406
>>> timeit(lambda: list(emptydict.viewkeys()))
0.4636681079864502
>>> timeit(lambda: emptydict.iterkeys())
0.23939013481140137
>>> timeit(lambda: list(emptydict.iterkeys()))
1.0098130702972412 
```

构造视图的成本略高，但使用视图比迭代器快得多（快两倍多一点）。

处理千元字典：

```
>>> fulldict = {i: i for i in xrange(1000)}
>>> timeit(lambda: fulldict.viewkeys())
0.24295306205749512
>>> timeit(lambda: list(fulldict.viewkeys()))
13.447425842285156
>>> timeit(lambda: fulldict.iterkeys())
0.23759889602661133
>>> timeit(lambda: list(fulldict.iterkeys()))
15.45390510559082 
```

结果相同，但标记较少；构建视图的成本要稍微高一些，但消耗它肯定会更快（快 15%）。

`list(dict.viewkeys())`为了与and进行公平比较`list(dict.iterkeys())`，`dict.keys()`明显更快：

```
>>> timeit(lambda: emptydict.keys())
0.2385849952697754
>>> timeit(lambda: fulldict.keys())
7.842105150222778 
```

**总结：**这是一个权衡；更好的功能（你将很少使用）和性能（*很少*会重要到足以让你担心——如果你关心这样的性能问题，你可能已经处于需要使用 numpy/scipy 的区域了) 与更好的兼容性和肌肉记忆使用率相比。

就个人而言，除非已经依赖于仅 2.7 的功能，或者除非我完全控制运行时环境，否则我会避免在 Python 2 代码中使用字典视图。即使在这些情况下，我的手指仍然想输入`iter`而不是`view`，所以我让他们！

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-04-17T10:59:52.090

不，`iterkeys`over没有优势`viewkeys`，就像对它们中的任何一个都没有优势`keys`一样。`iterkeys`只是为了向后兼容。事实上，在 Python 3 中，`viewkeys`是唯一仍然存在的行为，并且它已被重命名为`keys`- 该`viewkeys`方法实际上是 Python 3 行为的反向移植。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-04-17T11:10:02.780

正如名称（和[文档](http://docs.python.org/release/2.7.2/library/stdtypes.html#dictionary-view-objects)）所示，`viewkeys()`和`viewvalues()`方法`viewitems()`返回字典中当前元素的*视图*，这意味着如果字典更改，视图也会更改；意见*是* [懒惰](http://docs.python.org/glossary.html)的。在一般情况下，*键*视图是类似集合的，只有当值是可散列的时，*项目*视图才是类似集合的。

在什么情况下使用标准方法会更好`keys()`，`values()`以及`items()`？您提到了一个非常重要的问题：向后兼容性。此外，当您需要一个包含所有键、值或项目的简单列表（不是类似集合，不是迭代器）时，当您需要修改返回的列表而不修改原始字典时，以及当您需要快照时字典的键、值或项目在某一时刻，独立于对字典的任何后期修改。

那么和`iterkeys()`呢？当您需要字典内容的一次性、恒定空间、惰性迭代器快照时，它们是一个合适的选择，它将告诉您字典在迭代时是否被修改（通过 a ），它们对于向后兼容性也非常重要.`itervalues()``iteritems()``RuntimeError`

# c# - XNA 中的菜单按钮

> ID：10189278
> 
> 赞同：1
> 
> 时间：2012-04-17T10:14:57.457
> 
> 标签：c#, windows-phone-7, xna

windows phone 7 XNA 中是否有任何类型的菜单按钮？我想为我的游戏创建一个菜单按钮，比如 Cocos2D 中的 CCMEnu？这是我的 GamePage.xaml.cs。

```
public GamePage()
    {
        InitializeComponent();

        newButton = new Button();
        newButton.Height = 75;
        newButton.Width = 250;
        ///newButton.Foreground = new System.Windows.Media.SolidColorBrush(Colors.Green);
        newButton.Content = "Dynamically added";

        // Get the content manager from the application
        contentManager = (Application.Current as App).Content;
        contentManager.RootDirectory = "Content";

        // Create a timer for this page
        timer = new GameTimer();
        timer.UpdateInterval = TimeSpan.FromTicks(333333);
        timer.Update += OnUpdate;
        timer.Draw += OnDraw;

        newButton.Click += new RoutedEventHandler(newButton_Click);
    }

  void setUpBackgroundAndTitle()
    {
        // Draw a background picture with scaling since the picture is large //
        spriteBatch.Draw(background, new Vector2(0, 0), null, Color.White, 0f, Vector2.Zero, new Vector2(0.9f, 0.9f), SpriteEffects.None, 0f);
        spriteBatch.Draw(rhymeImage, new Vector2(400, 0), null, Color.White, 0f, Vector2.Zero, new Vector2(1f, 1f), SpriteEffects.None, 1f);
        spriteBatch.Draw(gameImage, new Vector2(180, 0), null, Color.White, 0f, Vector2.Zero, new Vector2(1f, 1f), SpriteEffects.None, 1f);
        spriteBatch.Draw(titleImage, new Vector2(150, -70), null, Color.White, 0f, Vector2.Zero, new Vector2(1f, 1f), SpriteEffects.None, 1f);
        ContentPanel.Children.Add(newButton);
    } 
```

xml 文件。

```
<Button Content="Button" Height="71" Name="button1" Width="160" Click="button1_Click" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:51:52.150

为什么不直接使用 Silverlight + XNA 配方，而不是只使用 XNA？

这样您就可以使用 Silverlight 的所有控件（例如 Button！），而不必在 XNA 中从头开始绘制它们！

[检查Windows Phone 代码示例](http://msdn.microsoft.com/en-us/library/ff431744%28v=vs.92%29.aspx)中的“Silverlight/XNA 框架示例”示例。

# mysql - 如何在 auto_increment 列中找到“洞”？

> ID：10189285
> 
> 赞同：8
> 
> 时间：2012-04-17T10:15:17.997
> 
> 标签：mysql, sql, gaps-and-islands

例如，当我删除 id 3 时，我有这个：

```
id | name
 1 |
 2 |    
 4 |
 5 |
 ... 
```

现在，我想搜索丢失的 id，因为我想再次填充 id：

```
INSERT INTO xx (id,...) VALUES (3,...) 
```

有没有办法在 auto_increment 索引中搜索“洞”？

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-17T10:20:04.037

您可以像这样找到差距的最高值：

```
select t1.id - 1 as missing_id
from mytable t1
left join mytable t2 on t2.id = t1.id - 1
where t2.id is null 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T10:41:33.650

的目的`AUTO_INCREMENT`是为您的行生成简单的唯一且无意义的标识符。一旦您计划重新使用这些 ID，它们就不再是唯一的（至少在时间上如此），所以我的印象是您没有使用正确的工具来完成这项工作。如果您决定摆脱`AUTO_INCREMENT`，则可以使用相同的算法进行所有插入。

关于 SQL 代码，此查询将现有行与具有下一个 ID 的行匹配：

```
SELECT a.foo_id, b.foo_id
FROM foo a
LEFT JOIN foo b ON a.foo_id=b.foo_id-1 
```

例如：

```
 1 NULL
 4 NULL
10 NULL
12 NULL
17 NULL
19   20
20 NULL
24   25
25   26
26   27
27 NULL 
```

所以很容易过滤掉行并得到第一个间隙：

```
SELECT MIN(a.foo_id)+1 AS next_id
FROM foo a
LEFT JOIN foo b ON a.foo_id=b.foo_id-1
WHERE b.foo_id IS NULL 
```

以此为起点，因为它仍然需要一些调整：

*   您需要考虑最低可用数字是可能的最低数字的情况。
*   您需要锁定表以处理并发插入。
*   在我的电脑里，大桌子慢得要命。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T10:34:13.303

我认为你可以做到这一点的唯一方法是使用循环：任何其他解决方案都不会显示大于 1 的间隙：

```
insert into XX values (1)
insert into XX values (2)
insert into XX values (4)
insert into XX values (5)
insert into XX values (10)

declare @min int
declare @max int

select @min=MIN(ID) from xx
select @max=MAX(ID) from xx

while @min<@max begin
    if not exists(select 1 from XX where id = @min+1) BEGIN
        print 'GAP: '+ cast(@min +1 as varchar(10))
    END

    set @min=@min+1
end 
```

结果：

```
GAP: 3
GAP: 6
GAP: 7
GAP: 8
GAP: 9 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T10:49:35.633

这是一个空白和孤岛问题，请参阅我的（和其他）回复[here](https://stackoverflow.com/a/8368766/905902)和[here](https://stackoverflow.com/a/8780227/905902)。在大多数情况下，使用递归 CTE 可以最优雅地解决间隙和孤岛问题，这在 mysql 中不可用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T10:21:31.367

首先，我同意你不应该尝试填补漏洞的评论。您将无法通过一条 SQL 语句找到所有漏洞。您必须遍历从 1 开始的所有可能的数字，直到找到一个洞。您可以编写一个 sql 函数来为您执行此操作，然后可以在函数中使用它。因此，如果您编写了一个名为 find_first_hole 的函数，则可以在插入中调用它，例如：

```
INSERT INTO xx (id, ...) VALUES (find_first_hole(), ...) 
```

# jquery - jQuery Rule 插件 - 添加新规则

> ID：10189286
> 
> 赞同：1
> 
> 时间：2012-04-17T10:15:23.817
> 
> 标签：jquery, css, jquery-plugins

对于我的项目，我需要使用 jQuery [Rule Plugin](http://flesler.blogspot.in/2007/11/jqueryrule.html)

它看起来很棒，所以我可以将新的 css 规则附加到 dom。

**但是我怎样才能创建一个新规则并将其附加到 dom 中？**

文档说：

```
These are the methods, the plugin adds to the different namespaces.

jQuery.fn
 - sheet: returns the stylesheets from the matched styles and links.
 - cssRules: return all the rules from all the given sheets.
 - ownerNode: returns the nodes that belong to the given sheet (opposite to sheets).
 - cssText: returns the text of the first matched style/link.

jQuery.rule
 - constructor( $.rule ):
    - 1st argument: nothing, a rule filter, rule literal, css rule or array of rules.
    - 2nd argument: nothing, node filter for link/style, nodes link/style.
 - sheets: returns the sheets that match the selector or all of them if none.
 - clean: converts a rule literal, to array of rules.
 - parent: returns the parent of a rule, neccesary for IE.
 - outerText: return the selector with the rules of the given rule.
 - text: gets/sets the cssText of the rule.

jQuery.rule.fn
 - append: will add one or more styles in the form of "attr:value; attr:value" to the matched rules.
 - css : sets a value to all matched rules.
 - outerText: return $.rule.outerText of the first rule.
 - text: sets the cssText of the rules, or gets the cssText from the first one.
 - appendTo: appends the matched rules to the specified stylesheet(1), can be a selector, dom element, sheet.

All these methods ( from jQuery.rule.fn ) are equal (or very similar) to those in jQuery.fn, but for CSS Rules.
    add, andSelf, animate, appendTo, attr, css, dequeue,
    each, end, eq, fadeIn, fadeOut, fadeTo, filter, get,
    hide, index, is, map, not, pushStack, queue, remove,
    setArray, show, size, slice, stop, toggle.

Some calls to show and hide behave unexpectedly sometimes. Some styles and animations might fail. 
```

请帮我 。

谢谢你。

*注意：我相信如果你对 jQuery 有所了解，这可能很容易做到，但如果你是新手，这会很困难，我尝试谷歌获取有关此的一些信息，但找不到任何东西。我对这个问题很熟悉`What you tried ?`，这里我不知道！请这是一个开始。谢谢 ！*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:40:01.553

基本示例：

```
$.rule('#some_id','style').append('font-size:17px'); 
```

在此示例中，它的规则将向名为“some_id”的 css id 添加新样式。它将添加新的css规则设置字体大小为17px；

所以基本上你正在使用“$.rule”关键字创建新规则，这里描述的参数[http://flesler.webs.com/jQuery.Rule/API.txt](http://flesler.webs.com/jQuery.Rule/API.txt)

您可以在这里获得更多示例：http: [//flesler.webs.com/jQuery.Rule/](http://flesler.webs.com/jQuery.Rule/)

当然首先你需要在你的文档中包含 jquery 和这个插件，例如。像这样：

```
<script type="text/javascript" src="jquery.js"></script> 
<script type="text/javascript" src="jquery.rule.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T05:09:00.823

不要使用 jQuery 规则——它的文档非常糟糕。JSS 要好得多：[https](https://github.com/Box9/jss) ://github.com/Box9/jss 。如何在 JSS 中做你想做的事：

```
jss('#some_id', {
  fontSize: '17px'
}); 
```

# android - 将 CheckBox 值插入 SQLite Android

> ID：10189287
> 
> 赞同：3
> 
> 时间：2012-04-17T10:15:25.447
> 
> 标签：android, database, sqlite, checkbox

我有这个数据库查询：

```
public void checkBox(String fasil1,String fasil2,String fasil3,String fasil4,String fasil5,String fasil6,String fasil7,
        String fasil8,String fasil9,String fasil10,String fasil11,String fasil12,String fasil13,String fasil14){
    ContentValues cv = new ContentValues();
    cv.put("fasil1", fasil1);
    cv.put("fasil2", fasil2);
    cv.put("fasil3", fasil3);
    cv.put("fasil4", fasil4);
    cv.put("fasil5", fasil5);
    cv.put("fasil6", fasil6);
    cv.put("fasil7", fasil7);
    cv.put("fasil8", fasil8);
    cv.put("fasil9", fasil9);
    cv.put("fasil10", fasil10);
    cv.put("fasil11", fasil11);
    cv.put("fasil12", fasil12);
    cv.put("fasil13", fasil13);
    cv.put("fasil14", fasil14);

    getWritableDatabase().insert("fasil", "name", cv);
} 
```

这是我的复选框代码：

```
fasil1 = (CheckBox)findViewById(R.id.rs);
    fasil1.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        //@Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
             if(isChecked){
                  checked = "Rumah Sakit";
                  Toast.makeText(CobaCombo.this, checked, Toast.LENGTH_SHORT).show();
             }else{
                  checked = "-";

             }
        }
   });
    fasil2 = (CheckBox)findViewById(R.id.skul);
    fasil2.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        //@Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
             if(isChecked){
                  checked = "Sekolah";
                  Toast.makeText(CobaCombo.this, checked, Toast.LENGTH_SHORT).show();
             }else{
                  checked = "-";

             }
        }
   });
    fasil3 = (CheckBox)findViewById(R.id.kampus);
    fasil3.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        //@Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
             if(isChecked){
                  checked = "Kampus";
                  Toast.makeText(CobaCombo.this, checked, Toast.LENGTH_SHORT).show();
             }else{
                  checked = "-";
             }
        }
   });
    fasil4 = (CheckBox)findViewById(R.id.officeBuild);
    fasil4.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        //@Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
             if(isChecked){
                  checked = "Office Building";
                  Toast.makeText(CobaCombo.this, checked, Toast.LENGTH_SHORT).show();
             }else{
                  checked = "-";
             }
        }
   });
    fasil5 = (CheckBox)findViewById(R.id.apartemen);
    fasil5.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        //@Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
             if(isChecked){
                  checked = "Apartemen";
                  Toast.makeText(CobaCombo.this, checked, Toast.LENGTH_SHORT).show();
             }else{
                  checked = "-";
             }
        }
   });
    fasil6 = (CheckBox)findViewById(R.id.hotel);
    fasil6.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        //@Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
             if(isChecked){
                  checked = "Hotel";
                  Toast.makeText(CobaCombo.this, checked, Toast.LENGTH_SHORT).show();
             }else{
                  checked = "-";
             }
        }
   });
    fasil7 = (CheckBox)findViewById(R.id.bank);
    fasil7.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        //@Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
             if(isChecked){
                  checked = "Bank";
                  Toast.makeText(CobaCombo.this, checked, Toast.LENGTH_SHORT).show();
             }else{
                  checked = "-";
             }
        }
   });
    fasil8 = (CheckBox)findViewById(R.id.spbu);
    fasil8.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        //@Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
             if(isChecked){
                  checked = "SPBU";
                  Toast.makeText(CobaCombo.this, checked, Toast.LENGTH_SHORT).show();
             }else{
                  checked = "-";
             }
        }
   });
    fasil9 = (CheckBox)findViewById(R.id.pasar);
    fasil9.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        //@Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
             if(isChecked){
                  checked = "Pasar";
                  Toast.makeText(CobaCombo.this, checked, Toast.LENGTH_SHORT).show();
             }else{
                  checked = "-";
             }
        }
   });
    fasil10 = (CheckBox)findViewById(R.id.wisata);
    fasil10.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        //@Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
             if(isChecked){
                  checked = "Jalur Wisata / Tempat Wisata";
                  Toast.makeText(CobaCombo.this, checked, Toast.LENGTH_SHORT).show();
             }else{
                  checked = "-";
             }
        }
   });
    fasil11 = (CheckBox)findViewById(R.id.terminal);
    fasil11.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        //@Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
             if(isChecked){
                  checked = "Stasiun / Terminal";
                  Toast.makeText(CobaCombo.this, checked, Toast.LENGTH_SHORT).show();
             }else{
                  checked = "-";
             }
        }
   });
    fasil12 = (CheckBox)findViewById(R.id.bandara);
    fasil12.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        //@Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
             if(isChecked){
                  checked = "Bandara / Airport";
                  Toast.makeText(CobaCombo.this, checked, Toast.LENGTH_SHORT).show();
             }else{
                  checked = "-";
             }
        }
   });
    fasil13 = (CheckBox)findViewById(R.id.mol);
    fasil13.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        //@Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
             if(isChecked){
                  checked = "Mal / Shoping Center";
                  Toast.makeText(CobaCombo.this, checked, Toast.LENGTH_SHORT).show();
             }else{
                  checked = "-";
             }
        }
   });
    fasil14 = (CheckBox)findViewById(R.id.hiburan);
    fasil14.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        //@Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
             if(isChecked){
                  checked = "Entertainment";
                  Toast.makeText(CobaCombo.this, checked, Toast.LENGTH_SHORT).show();
             }else{
                  checked = "-";
             }
        }
   }); 
```

然后我有代码在单击按钮时保存值：

```
helper.checkBox(fasil1.getText().toString(), fasil2.getText().toString(), fasil3.getText().toString(), 
                    fasil4.getText().toString(), fasil5.getText().toString(), fasil6.getText().toString(), 
                    fasil7.getText().toString(), fasil8.getText().toString(), fasil9.getText().toString(),
                    fasil10.getText().toString(), fasil11.getText().toString(), fasil12.getText().toString(), 
                    fasil13.getText().toString(), fasil14.getText().toString()); 
```

但这不起作用......
我想在选中或未选中时将值存储到数据库中***。***
我怎么能这样做？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:50:10.810

**第一个问题：**

您`checked`在每个选中的复选框上为字符串变量分配值，因此最后无论您选择了 2 个复选框还是单个复选框，您都将只有 1 个字符串值，相反，您应该为选中的复选框创建 String[] 数组。

**第二期：**

在单击按钮时，您正在尝试调用`checkBox`数据库的方法，在这里您再次获取 CheckBox 标题的值，因此在此处选中或取消选中复选框都没有关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:21:51.233

如果选中了一个复选框，您可以获得布尔值（真或假）`value = checkbox.isChecked();`

如果为真，则在您的数据库中另存为 1，如果不是，则另存为 0

# java - 如何在android中暂停和恢复线程？

> ID：10189289
> 
> 赞同：6
> 
> 时间：2012-04-17T10:15:37.007
> 
> 标签：java, android, multithreading, resume, suspend

我刚刚注意到 android 线程中的挂起和恢复已被弃用。解决此问题的方法是什么，或者如何在android中暂停和恢复线程？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T10:22:59.957

事实上，在随机点暂停或停止线程是一个不安全的想法，这就是这些方法被弃用的原因。

在我看来，你能做的最好的事情是在你的线程`run`方法中有固定的暂停点并使用`wait`：

```
class ThreadTask implements Runnable {

     private volatile boolean paused;
     private final Object signal = new Object();

     public void run() {
         // some code

         while(paused) { // pause point 1
            synchronized(signal) signal.wait();
         }

         // some other code

         while(paused) { // pause point 2
            synchronized(signal) signal.wait();
         }

         // ...
     }

     public void setPaused() {
         paused = true;      
     }

     public void setUnpaused() {
         paused = false;
         synchronized(signal) signal.notify();
     }
} 
```

# php - 从字符串文本获取值时出错？

> ID：10189291
> 
> 赞同：0
> 
> 时间：2012-04-17T10:15:48.480
> 
> 标签：php

我有一个来自文本：

```
$text = 'abc def abc ghi abc jkl';
$search = 'abc';
$regex = '/'.trim($search).'/ism';
if(preg_match_all($regex, $text, $tmp)) {
   $array_key = $tmp[0];
   foreach($array_key as $ak) {
       echo $ak[1];
   }
} 
```

当我 echo $ak[1] is result is **b**时，我想要结果是**abc**，如何解决它

abc def **abc** ghi abc jkl

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:18:29.533

你`echo $ak;`的循环内部呢？

`$ak[1]`是匹配中的第二个字符，因此产生`b`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:19:22.283

好吧，`$tmp`将在您的正则表达式中包含所有字段的数组。然后这些数组将包含这些字段的所有值。

你的代码有效地做的是`$ak = $tmp[0][$x] = "abc"`，当你把你带到`$ak[1]`比数组实际拥有的更远一层时，得到`"abc"[1] = "b"`。

我想你想`echo $ak;`改为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T10:31:21.250

```
if(preg_match_all($regex, $text, $tmp)) {
   $array_key = $tmp[0];
   echo $array_key[1];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T11:18:49.170

```
I am trying to discuss within your code. I hope its will help

<?php
$text = 'abc def abc ghi abc jkl';
$search = 'abc';
$regex = '/'.trim($search).'/ism';
if(preg_match_all($regex, $text, $tmp)) 
{
  $array_key = $tmp[0];

  /*Test using print_r($tmp); 
    then you will find result: Array( [0] => Array ( [0] => abc [1] => abc [2] =>      
     abc) ) 
   If you want to test/print first array value then echo $array_key[0]; result is: abc
   Similarly for $array_key[1] or $array_key[2] result is abc
   That means your array contains 3 same value
   */

   foreach($array_key as $ak) 
   {
    /*If you use echo $ak[1]; then it will print b because in foreach loop $ak value   
    is:  abc 
    You can't print only abc in foreach loop. To print abc you don't need to use   
    foreach loop. Just use echo $array_key[0]; 
   */ 
   }
  }
  ?>

  Maybe your expected code is:
  <?php
    $text = 'abc def abc ghi abc jkl';
    $search = 'abc';
    $regex = '/'.trim($search).'/ism';
    if(preg_match_all($regex, $text, $tmp)) 
    {
     $array_key = $tmp[0];
     echo $array_key[0];
    }
   ?>
  Output: abc 
```

# c# - 远程运行powershell命令时出错

> ID：10189301
> 
> 赞同：2
> 
> 时间：2012-04-17T10:16:30.253
> 
> 标签：c#, powershell, powershell-remoting

我想在远程机器上运行 Powershell 命令。这是我正在使用的方法（localhost:131 是因为我使用隧道到远程机器的端口 5985）：

```
 public string RunRemotePowerShellCommand(string command)
    {
           System.Security.SecureString password = new System.Security.SecureString();
            foreach (char c in _password.ToCharArray())
            {
                password.AppendChar(c);
            }

            string schema = "http://schemas.microsoft.com/powershell/Microsoft.Powershell";

            WSManConnectionInfo connectionInfo = new WSManConnectionInfo(false,
                "localhost", 131, "/wsman", schema, new PSCredential(_domain + @"\" + _userName, password));

            using (Runspace remoteRunspace = RunspaceFactory.CreateRunspace(connectionInfo))
            {
                remoteRunspace.Open();
                using (PowerShell powershell = PowerShell.Create())
                {
                    powershell.Runspace = remoteRunspace;
                    powershell.AddCommand(command);
                    powershell.Invoke();

                    Collection<PSObject> results = powershell.Invoke();

                    // convert the script result into a single string
                    StringBuilder stringBuilder = new StringBuilder();
                    foreach (PSObject obj in results)
                    {
                        stringBuilder.AppendLine(obj.ToString());
                    }
                    return stringBuilder.ToString();
                }
            }
    } 
```

我正在尝试运行以下命令：

```
D:\FolderName\scriptName.ps1 -action editbinding -component "comp1","comp2","comp3","comp4" 
```

像这样：

```
RunRemotePowerShellCommand(@"D:\FolderName\scriptName.ps1 -action editbinding -component ""comp1"",""comp2"",""comp3"",""comp4"""); 
```

但我得到：

```
Error: System.Management.Automation.RemoteException: The term 'D:\FolderName\scriptName.ps1 -action editbinding -component "comp1","comp2","comp3","comp4"' is not recognized as a name of cmdlet, function, script file, or operable program. Check the spelling of the name, or if the path is included, verify that the path is correct and try again. 
```

该方法适用于简单的命令，并且当我在远程机器上运行它时，我想要运行的命令是可以的。

提前致谢。

问候，杜桑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T16:14:29.020

您需要使用该`powershell.AddParameter()`方法为您的命令添加参数。AddCommand() 调用应该只命名命令：cmdlet 名称、函数名称、脚本路径等。来自文档：

```
PowerShell ps = PowerShell.Create();
ps.AddCommand("Get-Process");
ps.AddArgument("wmi*");
ps.AddCommand("Sort-Object");
ps.AddParameter("descending");
ps.AddArgument("id"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-19T23:58:53.483

我有类似的要求。

我的解决方案是在 C# 代码中创建一个 powershell 函数，并在 powershell 远程会话中使用它。

```
using System;
using System.Management.Automation;

namespace PowerShellTest
{
    class Program
    {
        static void Main(string[] args)
        {
            string func = @"function Test { Write-Host 'hello' };";
            PowerShell ps = PowerShell.Create();
            ps.AddScript(func);
            ps.Invoke();
            ps.AddCommand("Test");
            ps.Invoke();
            Console.WriteLine("Successfully executed function");
            Console.ReadLine();
        }
    }
} 
```

# drupal - Drupal 还是不使用 Drupal？

> ID：10189304
> 
> 赞同：3
> 
> 时间：2012-04-17T10:16:35.250
> 
> 标签：drupal

我正在创建一个潜水社区，但我不知道我应该使用 Drupal 还是自己用 PHP 创建我的社区。我从未使用过 Drupal，所以我不知道如何创建主题。我已经有设计了。我也需要一个论坛。

有任何想法吗？

亲切的问候

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-17T10:45:51.887

Drupal 非常适合社区网站 - 但它的学习曲线陡峭。如果您知道足够的 PHP 来创建自己的站点，那么您应该可以开始使用 Drupal。为什么不安装它并玩一玩呢？

Drupal 中的论坛有点普通，但是 PHPBB 集成得很好，并且有贡献的模块可以在一定程度上简化集成。

主题化也是一项艰巨的任务 - 但是有很多像这样的在线教程：[http](http://www.lullabot.com/videos/advanced-theming-drupal-7) ://www.lullabot.com/videos/advanced-theming-drupal-7解释了很多技术内容。如果您想加入，只需开始查看 D7 开箱即用的 Bartik 主题。同样，根据您的经验，您应该通过遵循代码来遵循更广泛的想法。

我还推荐（如果您喜欢阅读论文而不是屏幕）专业的 drupal 开发（有 Drupal 6 版本，以及当前的 Drupal 7 版本）。这本书对所有内容进行了非常详细的解释，我的副本在使用过程中非常真实地折旧。

希望在某种程度上有所帮助

干杯

史蒂夫

# iphone - MKReverseGeocoder 委托方法是否在单独的线程上工作？

> ID：10189305
> 
> 赞同：1
> 
> 时间：2012-04-17T10:16:42.117
> 
> 标签：iphone, objective-c, ios, mkmapview, mkreversegeocoder

我正在尝试在两个位置之间绘制路线。为此，我有两个`CLLocation`startPoin，endPoind 实例。我想将这两个位置转换为两个对应的位置地址。之后我想从谷歌地图网络服务中获取所有路线点。下面的代码也是如此。

```
- (void)viewDidLoad{
    [super viewDidLoad];
    locations =[[NSMutableArray alloc]initWithCapacity:2];//For location Name 
    [self.mapView_MP setMapType:MKMapTypeStandard];
    [self.mapView_MP setZoomEnabled:YES];
    [self.mapView_MP setScrollEnabled:YES];
    [self update:startPoint];  //MKReverseGeocoder start point  
    [self update:endPoint];    //MKReverseGeocoder end point

    [self updateRoute];

}

- (void)update:(CLLocation*)loc{
    MKReverseGeocoder *geoCoder = [[MKReverseGeocoder alloc] initWithCoordinate:loc.coordinate];

    geoCoder.delegate = self;
    [geoCoder start];

}
- (void)reverseGeocoder:(MKReverseGeocoder *)geocoder didFindPlacemark:(MKPlacemark *)placemark
{

    NSMutableDictionary *cplace=[[NSMutableDictionary alloc]initWithDictionary:[placemark addressDictionary]];

   // NSLog(@"The geocoder has returned: %@", [cplace objectForKey:@"FormattedAddressLines"] );
   // NSLog(@"The geocoder has returned: %@", [cplace objectForKey:@"Street"] );
    [locations addObject:[cplace objectForKey:@"SubAdministrativeArea"]];
     NSLog(@"The geocoder has returned: %@", locations );
}
- (void)reverseGeocoder:(MKReverseGeocoder *)geocoder didFailWithError:(NSError *)error
{
    NSLog(@"reverseGeocoder:%@ didFailWithError:%@", geocoder, error);
}

- (void)updateRoute {

    self.responseData=[NSMutableData data];  
    NSLog(@" string Formate.................................===%@",locations);   

    NSURLRequest *request=[NSURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://maps.googleapis.com/maps/api/directions/json?origin=%@&destination=%@&mode=driving&sensor=false", [locations objectAtIndex:0],[locations objectAtIndex:1]]]];
    [[NSURLConnection alloc] initWithRequest:request delegate:self];    
} 
```

在 viewDidLoad 我按顺序调用方法

```
[self update:startPoint];      //MKReverseGeocoder start point  
    [self update:endPoint];    //MKReverseGeocoder end point           
    [self updateRoute]; 
```

但不幸的是 [self updateRoute]; 正在执行首先与`MKReverseGeocoder`委托方法进行比较。在此方法中，位置数组为空。获得 EXEBADACCESS。我怎么能超过这个值。在`MKReverseGeocoder`委托方法中，我得到了位置名称。委托方法正在执行任何其他线程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:27:19.680

`MKReverseGeocoder`在 iOS 5 中已弃用，因此您可能应该`CLGeocoder`改用。

除此之外，是的，该`start`方法是*asynchronous*，如文档中所述。这并不一定意味着您将在不同的线程上获得结果，但这意味着该方法通常会在结果可用之前返回。

您需要跟踪您的地理编码器以`updateRoute`在两者都完成后调用您的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:27:52.837

它是否在另一个线程上执行并不重要。重要的是，您无法控制何时收到回复。

你应该有一些逻辑说“当我得到开始和结束路线的值时，调用我的`updateRoute`方法”。您可以`startPoint`在获得 的值时检查变量的值是否已设置`endPoint`（反之亦然），然后才调用该`updateRoute`函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T10:33:35.193

如果您仍然希望使用它，尽管它已被弃用....您应该 只在`[self updateRoute];`2 时打电话给您。`- (void)reverseGeocoder:(MKReverseGeocoder *)geocoder didFindPlacemark:(MKPlacemark *)placemark``[locations count]`

这样，当您拥有这两个值时，将调用 NSURLConnection 。

# java - 在多台机器上运行 tomcat 时的 Quartz 集群设置

> ID：10189310
> 
> 赞同：1
> 
> 时间：2012-04-17T10:16:53.577
> 
> 标签：java, quartz-scheduler

我有一个 webapp，它将在 2 台不同的机器上运行。从 webapp 可以“订购”石英在特定时间执行的作业。石英在 webapp 内运行。因此，石英在两台机器上运行。我正在使用 JDBC 数据存储来持久化作业、触发器等。

然而，这个想法是只有一台机器会运行作业，而另一台机器只会使用石英来安排作业。因此，调度程序只会在其中一台机器上启动（scheduler.start()）。

在文档中它说

> 永远不要在单独的机器上运行集群，除非它们的时钟使用某种形式的时间同步服务（守护程序）进行同步，这种服务非常有规律地运行（时钟必须在一秒内）。如果您不熟悉如何执行此操作，请参阅[http://www.boulder.nist.gov/timefreq/service/its.htm 。](http://www.boulder.nist.gov/timefreq/service/its.htm)
> 
> 永远不要针对任何其他实例正在运行 (start()ed) 的同一组数据库表启动 (scheduler.start()) 非集群实例。您可能会遇到严重的数据损坏，并且肯定会遇到不稳定的行为。

而且我不确定运行我的 webapp 的两台机器的时钟是否同步。

我的问题是：当只有一个石英实例将启动并运行作业而另一个实例仅用于调度作业以由第一个实例执行时，我是否仍应在集群模式下运行该设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:55:50.660

仅在一个节点上启动调度程序并在另一台机器上远程访问它呢？您可以使用 RMI/JMX 安排作业。或者，您可以使用[`RemoteScheduler`](http://quartz-scheduler.org/api/2.0.0/org/quartz/impl/RemoteScheduler.html)适配器。

基本上，不是有两个集群调度程序，一个正在工作，另一个只访问共享数据库，您只有一个调度程序（*服务器*），您可以从另一台机器访问它，通过 API 调度和监视作业。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:43:51.913

如果您永远不会在第二个节点上调用 start() 方法，那么您不必担心时钟同步问题。

但是，您需要将 isClustered 配置属性设置为 true 以确保在两个节点插入/更新/删除数据时使用基于表的锁定。

# java - 无法运行 GWT 示例

> ID：10189311
> 
> 赞同：0
> 
> 时间：2012-04-17T10:17:01.843
> 
> 标签：java, eclipse, gwt

我正在尝试运行 GWT sample `StockWatcher`。我用户`webAppCreator`按照 Google 教程中的所有说明获取 eclipse 的 progect。然后我将我的项目导入 Eclipse，在项目属性中设置“使用 Google Web Toolkit”复选框，然后单击“调试为”->“Web 应用程序”。然后我得到

```
Started code server on port 9997
Parsing file:<some file path>/StockWatcher/war/WEB-INF/web.xml
   startElement: web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5"
 xmlns="http://java.sun.com/xml/ns/javaee"
   startElement:   servlet
   startElement:     servlet-name
     characters:       greetServlet
     endElement:     servlet-name
   startElement:     servlet-class
     characters:       com.company.gwt.stockwatcher.server.GreetingServiceImpl
     endElement:     servlet-class
     endElement:   servlet
   startElement:   servlet-mapping
   startElement:     servlet-name
     characters:       greetServlet
     endElement:     servlet-name
   startElement:     url-pattern
     characters:       /stockwatcher/greet
     endElement:     url-pattern
     endElement:   servlet-mapping
   startElement:   welcome-file-list
   startElement:     welcome-file
     characters:       StockWatcher.html
     endElement:     welcome-file
     endElement:   welcome-file-list
     endElement: web-app
Loading modules
   \-remoteUI
      [ERROR] Invalid module name: '\-remoteUI'
[ERROR] shell failed in doStartup method
   Parsing response (length 1443)
   Ping delay is 1; next ping at Tue Apr 17 13:06:08 EEST 2012
   Server version (2.3.0) is not newer than 2.4.0 
```

这是我的**web.xml**文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
          http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
     version="2.5"
     xmlns="http://java.sun.com/xml/ns/javaee">

  <!-- Servlets -->
  <servlet>
    <servlet-name>greetServlet</servlet-name>
    <servlet-class>com.company.gwt.stockwatcher.server.GreetingServiceImpl</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>greetServlet</servlet-name>
    <url-pattern>/stockwatcher/greet</url-pattern>
  </servlet-mapping>

  <!-- Default page to serve -->
    <welcome-file-list>
    <welcome-file>StockWatcher.html</welcome-file>
  </welcome-file-list>

</web-app> 
```

这是**StockWatcher.gwt.xml**：

```
<?xml version="1.0" encoding="UTF-8"?>
<module rename-to='stockwatcher'>
  <inherits name='com.google.gwt.user.User'/>

  <inherits name='com.google.gwt.user.theme.clean.Clean'/>

  <entry-point class='com.company.gwt.stockwatcher.client.StockWatcher'/>

  <source path='client'/>
  <source path='shared'/>

</module> 
```

即使我从教程页面下载项目，问题也会重复。我该如何解决这个问题？

UPD：奇怪，但是当我尝试再次启动它（没有更改）时，我得到了“出现问题”窗口：

> “启动 StockWatcher”遇到问题。
> 
> 变量引用空选择：${container_path}

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:39:36.827

您能否通过右键单击项目并选择运行菜单项来检查运行配置窗口中 GWT 选项卡中的可用模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T16:18:49.960

您的启动配置取决于项目位置。因此，在您运行启动配置之前，您需要在项目资源管理器中选择您的项目，以便 Eclipse 可以知道您想要引用哪个项目的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T07:21:44.850

通过删除调试配置解决了问题。当我尝试在调试模式下运行时，Eclipse 生成了新的调试配置并且一切正常。

# jquery - 菜单和子菜单悬停之间的差距

> ID：10189312
> 
> 赞同：1
> 
> 时间：2012-04-17T10:17:02.093
> 
> 标签：jquery, jquery-effects

我正在处理带有子菜单的水平菜单。我在菜单上使用了 jQuery 来启用下拉功能，目前它运行良好。

但是，由于设计原因，水平菜单和垂直子菜单之间存在小的差距。因此，当您将鼠标悬停在子菜单上时，您将悬停在外面，这会导致子菜单在逻辑上消失。

但是，我需要保留该子菜单。有任何想法吗？

自己检查一下@ [已删除 url。已经提供的解决方案]

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T10:24:42.900

在 CSS 中

改变

```
#Menu ul ul {
    display: none;
    position: absolute;
    top: 40px;
} 
```

到

```
#Menu ul ul {
        display: none;
        position: absolute;
        padding-top: 40px;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T10:26:03.517

假设中间的间隙是一种设计选择，请使用[hoverIntent](http://cherne.net/brian/resources/jquery.hoverIntent.html)插件，这样一旦鼠标离开菜单，菜单就不会被告知消失。取而代之的是，用户可以在菜单消失之前离开指定数量的回旋时间。

[http://cherne.net/brian/resources/jquery.hoverIntent.html](http://cherne.net/brian/resources/jquery.hoverIntent.html)

您还有动画队列问题。为了防止它使用[这种技术](http://www.learningjquery.com/2009/01/quick-tip-prevent-animation-queue-buildup)。

[http://www.learningjquery.com/2009/01/quick-tip-prevent-animation-queue-buildup](http://www.learningjquery.com/2009/01/quick-tip-prevent-animation-queue-buildup)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T10:36:34.923

您可以使用 margin 或 padding 在 css 中添加间隙。

无论如何，这是一个很好的链接，您可以制作菜单：

[http://www.mycssmenu.com/visual_interface/template2/template.html](http://www.mycssmenu.com/visual_interface/template2/template.html#)

# jquery - 使用 AJAX 内容中的链接关闭 jQuery 模式弹出窗口

> ID：10189313
> 
> 赞同：0
> 
> 时间：2012-04-17T10:17:11.200
> 
> 标签：jquery, modal-dialog

我有一个 jQuery 模式窗口，我在其中加载了一个带有提交按钮的表单。我想添加一个“取消”链接来清除表单并关闭弹出窗口。

我正在使用新的 ASP.NET MVC4 默认模板附带的代码。我正在寻找一个脚本来完成这项工作。

这是用于存储和显示对话框的当前代码：

```
$(function () {
    // Cache for dialogs
    var dialogs = {};
    var loadAndShowDialog = function (id, link, url) {
        var separator = url.indexOf('?') >= 0 ? '&' : '?';

        // Save an empty jQuery in our cache for now.
        dialogs[id] = $();

        // Load the dialog with the content=1 QueryString in order to get a PartialView
        $.get(url + separator + 'content=1')
            .done(function (content) {
                dialogs[id] = $('<div class="modal-popup">' + content + '</div>')
                    .hide() // Hide the dialog for now so we prevent flicker
                    .appendTo(document.body)
                    .filter('div') // Filter for the div tag only, script tags could surface
                    .dialog({ // Create the jQuery UI dialog
                        title: link.data('dialog-title') || 'Inloggen',
                        modal: true,
                        resizable: false,
                        draggable: false,
                        width: link.data('dialog-width') || 370,
                        beforeClose: function () { resetForm($(this).find('form')); }
                    })
                    .find('form') // Attach logic on forms
                        .submit(formSubmitHandler)
                        .find('a.close-dialog').click(function (id) {
                            //dialog close logic here
                        }).end();

            });
    };

    var links = ['.loginLink'];

    $.each(links, function (i, id) {
        $(id).click(function (e) {
            var link = $(this),
                url = link.attr('href');

            if (!dialogs[id]) {
                loadAndShowDialog(id, link, url);
            } else {
                dialogs[id].dialog('open');
            }

            // Prevent the normal behavior since we use a dialog
            e.preventDefault();
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:07:16.670

`buttons:{Continue: function() { $(this).dialog('close');} }`

在对话框属性中尝试上面的代码。

# java - 不标记事务分界，只通过会话加载一个实体

> ID：10189316
> 
> 赞同：1
> 
> 时间：2012-04-17T10:17:18.863
> 
> 标签：java, hibernate, session, transactions

休眠：

**如果我加载一个实体说 session.load() 并关闭会话而不开始事务并提交它**会发生什么（出了什么问题）

 **我浏览了各种网站，但找不到任何好的解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T16:13:03.927

> 从会话加载持久实体而不开始事务是否正确（session.beginTransaction）

是的。没关系，但是当您从 DB 获取数据时，有时 hibernate 必须触发更新查询以刷新脏数据。因此，它更喜欢在事务中运行所有与数据库相关的活动。

使用交易时请按照以下步骤操作，

1.  开始交易。
2.  做你的数据库活动（选择/更新）。
3.  关闭您的交易。

> 我们可以保持一个开放的会话（事务提交）来帮助查看延迟加载吗？

你可以这样做，但这不是一个好方法。如果并发用户的数量更多，则会出现严重的性能问题。**

# c# - 根据子元素对堆栈面板进行排序？

> ID：10189318
> 
> 赞同：3
> 
> 时间：2012-04-17T10:17:29.700
> 
> 标签：c#, wpf, linq

有没有办法根据它的一些子元素来订购堆栈面板？

在后面的代码中，我向堆栈面板添加了一些通用的东西，例如 groupbox 和 textblock，其中一个文本块信息是来自我的 web 服务的 DateTime，我尝试使用 linq 通过降序排序，但输出仍然相同。

所以我想知道是否可以按堆栈面板子元素之一进行排序，即包含 DateTime 属性的 textblock1.Text ？

```
 XDocument xDoc = XDocument.Load(uriGroups);
        var sortedXdoc = xDoc.Descendants("Student")
                       .OrderByDescending(x => Convert.ToDateTime(x.Element("TimeAdded").Value));

        foreach (var node in xDoc.Descendants("Student"))
        {

            GroupBox groupbox = new GroupBox();
            groupbox.Header = String.Format(node.Element("StudentID").Value);
            groupbox.Width = 100;
            groupbox.Height = 100;
            groupbox.Margin = new Thickness(1);

            TextBlock textBlock = new TextBlock();
            textBlock.Text = String.Format(node.Element("FirstName").Value + " " + (node.Element("LastName").Value));
            textBlock.TextAlignment = TextAlignment.Center;

            TextBlock textBlock1 = new TextBlock();
            textBlock1.Text = (DateTime.Parse(node.Element("TimeAdded").Value)).ToString("d");
            String.Format("{0:d/M/yyyy}", DateTime.Parse(node.Element("TimeAdded").Value));
            textBlock1.TextAlignment = TextAlignment.Center;
            textBlock1.VerticalAlignment = VerticalAlignment.Bottom;

            StackPanel stackPanel = new StackPanel();
            stackPanel.Children.Add(groupbox);

            stackPanel.Children.Add(textBlock);
            stackPanel.Children.Add(textBlock1);
            stackPanel.Margin = new Thickness(5);
            stackPanel.MouseEnter += new MouseEventHandler(stackpanel_MouseEnter);
            stackPanel.MouseLeave += new MouseEventHandler(stackpanel_MouseLeave);
            MainArea1.Children.Add(stackPanel);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:12:38.090

显示顺序完全由调用顺序定义

```
MainArea1.Children.Add(stackPanel); 
```

所以，尝试类似的东西

```
 foreach (var node in xDoc.Descendants("Student").OrderBy(e => ...))
 {
    ....
 } 
```

（你真的应该在这里使用模板）

# vbscript - 使用 VBS 复制具有创建日期范围的文件（也在子文件夹文件中）

> ID：10189321
> 
> 赞同：1
> 
> 时间：2012-04-17T10:17:59.137
> 
> 标签：vbscript

我尝试使用此链接 [在指定日期范围之间复制文件，](https://stackoverflow.com/questions/6579224/copy-files-between-a-specified-date-range) 但我只能复制根目录，请任何人帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T13:28:33.260

干得好。请注意，这可能会创建空目录，因为它将创建一个目录，然后检查每个文件是否在指定的日期范围内。如果没有文件，则目录将保持为空。

显然，您可以注释掉或删除 WScript.Echo 行。它们仅用于故障排除。

```
Option Explicit
dim objFSO, strSource, strTarget

set objFSO = CreateObject("Scripting.FileSystemObject")
strSource = "c:\Folder1\"
strTarget = "c:\Copy of Folder1\"

call RecurseCopy(strSource, strTarget, True, #04/15/2012 00:00:01 AM#, #04/16/2012 00:00:01 AM#)

' // Recursively copy all files and folders
Sub RecurseCopy(strSource, strTarget, blnCopySubfolders, dBeginDate, dEndDate)
    dim objSource, objTarget

    WScript.Echo "Begin RecurseCopy" & vbcrlf & vbcrlf & _
            "strSource: " & strSource & vbcrlf & _
                "strTarget: " & strTarget

    set objSource = objFSO.GetFolder(strSource)

    If objFSO.FolderExists(strTarget) = False Then
        Wscript.Echo "Now going to create folder: " & strTarget
        objFSO.CreateFolder(strTarget)
    End If

    set objTarget = objFSO.GetFolder(strTarget)

    Dim file
    for each file in objSource.files
        If file.DateCreated => dBeginDate AND file.DateCreated =< dEndDate Then
            Wscript.Echo "Copying file: " & file.path & " to " & objTarget.Path
            file.Copy objTarget.Path & "\" & file.name
        Else
            WScript.Echo "File will not be copied because the DateCreated is not within the specified range." & vbcrlf & vbcrlf & _
                        File.Path & " " & file.DateCreated
        End If
    next

    If blnCopySubfolders = True Then
        ' ** For each subfolder of current dir, copy files to target and recurse its subdirs
        Dim subdir
        for each subdir in objSource.subfolders
            call RecurseCopy(objSource.Path & "\" & subdir.Name, objTarget.Path & "\" & subdir.Name, True, dBeginDate, dEndDate)
        Next
    End If

End Sub 
```

# java - 散列函数和键

> ID：10189326
> 
> 赞同：0
> 
> 时间：2012-04-17T10:18:25.727
> 
> 标签：java, hashtable

在阅读 Kathy Sierra 的书时，我偶然发现了这个代码片段：

```
m.put("k1", new Dog("aiko"));   // add some key/value pairs
m.put("k2", Pets.DOG);
m.put(Pets.CAT, "CAT key");
Dog d1 = new Dog("clover");
m.put(d1, "Dog key");
m.put(new Cat(), "Cat key"); 
```

映射用于以键和值格式存储内容。当我们输入“k1”或 new Cat() 作为密钥时，有人会告诉我密钥中实际存储的内容吗？是存储对这些对象的引用还是哈希码的值？我对此完全感到困惑。请指教。

如果您能指出我的进一步阅读材料，我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:41:05.773

该映射是一个由 N 个桶组成的数组。

该`put()`方法首先调用`hashCode()`您的密钥。从这个哈希码中，它使用一个模来获取地图中存储桶的索引。

然后，它遍历存储在与找到的存储桶关联的链表中的条目，并使用该`equals()`方法将每个条目键与您的键进行比较。

如果一个条目的键等于您的键，则其值将被新值替换。否则，使用新键和新值创建新条目，并存储在与桶关联的链表中。

由于 Cat 实例和 String 实例永远不会相等，因此永远不会通过放置与 Cat 键关联的值来修改与 String 键关联的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:31:05.117

它将由您的对象定义。

您必须创建一个 hashCode() 和一个 equals() 方法，以便将其存储在您的哈希表中。

> 在合理可行的情况下，由 Object 类定义的 hashCode 方法确实为不同的对象返回不同的整数。（这通常通过将对象的内部地址转换为整数来实现，但 JavaTM 编程语言不需要这种实现技术。）

请参阅 java.lang.Object 上的 javadoc [http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#hashCode](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#hashCode) ()

或者您可以阅读此内容以获得解释 [http://www.javaworld.com/javaworld/javaqa/2002-06/01-qa-0621-hashtable.html](http://www.javaworld.com/javaworld/javaqa/2002-06/01-qa-0621-hashtable.html)

我希望它有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T10:33:43.760

将值存储到 HashMap 取决于`hashcode()`and方法`equals()`。请从此处找到更多参考。

[HashMap - hashcode() 示例](http://ydtech.blogspot.in/2010/06/hashmap-hashcode-collision-by-example.html)

有关 HashMap`get()`检索值的更多信息。[这里](http://javarevisited.blogspot.in/2011/02/how-hashmap-works-in-java.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T11:05:01.457

使用 HashMap 时，其中的键是唯一的。键的这种唯一性在 Java 中根据所考虑对象的类提供的 equals() 和 hashCode() 方法的定义进行检查。

这是通过首先使用 equals() 方法进行比较来完成的，如果它返回相等，然后使用 hashCode() 进行比较。此外，您必须知道指向对象的每个引用都有一个位模式，对于引用的多个引用，该位模式可能不同同一个对象。

因此，一旦 equals() 测试通过，对象将不会插入到映射中，因为映射应该具有唯一键。因此，作为映射中键的对象的每个 hashCode 值将为一系列 hashCode 值形成不同的桶，并且对象将相应地分组。

**编辑提供一个例子：**

例如，让我们考虑两个对象有一个值为“hello”和“hlleo”的字符串属性，并假设 hashCode() 函数被编程为对象的哈希码是字符的 ASCII 值的总和如果 String 属性的值相等，则 String 属性和 equals() 方法返回 true。

因此，在上述情况下，equals() 返回 false，因为字符串不相等，但 hashCode 将相同。所以这两个对象将被放置在同一个哈希码桶中。

希望有帮助。

# perl - Perl 可存储的权限被拒绝

> ID：10189328
> 
> 赞同：1
> 
> 时间：2012-04-17T10:18:31.993
> 
> 标签：perl, permissions, permission-denied, storable

我正在尝试在 perl CGI 应用程序中保留数据（单击提交按钮时）。但是下面的代码：

```
use Storable;
my %hash = ('1'=>'a','2'=>'b','3'=>'c');
store \%hash, 'handle'; 
```

返回：

```
Error executing run mode 'Admin Page': can't create handle: Permission denied at Main.pm line 76 
```

如何授予脚本保存数据的权限？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T10:24:34.327

听起来 Web 服务器运行的用户没有写入目录的权限。作为测试，请尝试`store \%hash, '/tmp/handle';`，如果可行，您需要将目录权限排序到要保存数据的位置。

# c++ - C++。Child 继承自 Parent 并作为 Parent 属性包含在内

> ID：10189331
> 
> 赞同：1
> 
> 时间：2012-04-17T10:18:39.607
> 
> 标签：c++, inheritance, parent-child, forward-declaration, circular-dependency

我有一个非常简单的 Child-Parent 关系，其中 OlderSon 从 Parent 继承，并且 Parent 有一个指向他的 OlderSon 的指针，例如：

```
#ifndef PARENT_HXX
#define PARENT_HXX

#include <iostream>
#include <string>    
//#include "OlderSon.hxx"

class OlderSon;

class Parent
{
private :
    OlderSon* _os;
public  :           
    int _age;
    std::string _name;

    Parent(){
        _name="parent name";
        _age=60;
        //OlderSon* _os=new OlderSon();
    }
};

#endif //PARENT_HXX 
```

和儿子：

```
#ifndef OLDERSON_HXX
#define OLDERSON_HXX

#include <iostream>
#include <string>
#include "Parent.hxx"

class OlderSon: public Parent 
{
public:
    OlderSon(){
        _age=25;
        _name="Olderson name";
    }

 };

#endif //OLDERSON_HXX 
```

但是，每当我尝试取消注释初始化指针的行时，`OlderSon* _os=new OlderSon();`我都会收到一条错误消息：

```
Parent.hxx: In constructor ‘Parent::Parent()’:
Parent.hxx:25:31: error: invalid use of incomplete type ‘struct OlderSon’
Parent.hxx:8:7: error: forward declaration of ‘struct OlderSon’ 
```

我尝试了不同的方式，即同时包含 .hxx 或通过前向声明，但似乎没有任何帮助。我想这不是一个非常复杂的问题，但它开始令人沮丧。
有任何想法吗？
提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T10:25:44.357

你正在尝试不可能的事情。您可以通过将实现移动到实现文件来修复错误`Parent:Parent`，但您的代码仍然是灾难性的。

构造 Parent 需要构造 OlderSon，构造 OlderSon 也需要构造 Parent（因为 OlderSon*是*Parent）。你会有无限递归。

您不能同时让 Parent 的构造函数调用 OlderSon 的构造函数*，*反之亦然！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:25:43.360

为什么不将子指针定义为 Parent * like；

```
class Parent
{
private :
    Parent* _os;
.
.
.
} 
```

由于孩子的基类是父母。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T10:27:04.803

Parent() 构造函数使用 OlderSon() 的构造函数。但它不知道 OlderSon，因为您只是前向声明了它。（这意味着：我将使用一个名为 OlderSon 的类，但您 (Parent.hxx) 只需要知道它的名称，因为在这个头文件中我只使用指向它的指针。）尝试实现包含 OlderSon.hxx 的 cxx 文件中的 Parent() 构造函数

**编辑：**

我监督了 OlderSon 从 Parent 继承的事实......这导致了无限递归，这可能不是你想要的。

# java - Java - 存储从游戏到游戏的“分数”

> ID：10189334
> 
> 赞同：0
> 
> 时间：2012-04-17T10:18:50.090
> 
> 标签：java

我希望能够保持玩家在玩我的游戏时获得的分数，当他们关闭游戏并重新打开游戏时，分数仍然被保存。我能想到的唯一方法是使用文本文件，就像我在 VB6 中所做的那样。但是，这意味着他们可以编辑文本文件吗？或不？我的分数存储在一个“双倍”中，可以从任何班级访问，并且正在按原样在班级之间转移，如果这有影响的话。

希望有人可以提出解决此问题的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:22:50.500

如果保持分数保密且不可编辑非常重要，我建议您将所有玩家的分数存储在只有您控制的安全服务器上，或者如果这超出您的项目范围，请使用加密方法并同时存储分数作为二进制数据（即存储您的游戏状态对象，而不是分数本身）而不是文本文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:40:19.800

任何应用程序。可以使用[Java Web Start 启动](https://stackoverflow.com/tags/java-web-start/info)具有 GUI并使用[`PersistenceService`](http://docs.oracle.com/javase/7/docs/jre/api/javaws/jnlp/javax/jnlp/PersistenceService.html). 最终用户不容易访问持久性服务中的数据。这是一个小[演示。的持久化服务](http://pscode.org/jws/api.html#ps)。

至于如何存储数据，如果防止用户更改数据不是绝对重要的，我会使用`Properties`对象或 XML/POJO。

如果它**非常**重要（例如，玩家争夺 10,000 美元的奖金），请加密这些值，然后使用远程服务器进行加密（等等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T10:21:42.177

您可以使用一种或另一种方式加密文件，因此它不容易编辑（因此，编辑尝试可能会损坏乐谱。）[这](http://www.example-code.com/java/aes_stringEncryption.asp)是一个简单的 AES 字符串加密示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T10:23:23.313

你试过什么？这对我来说似乎是某种家庭作业。

您可以使用 Java 读取和写入文件。您还可以进行对象序列化或使用嵌入式数据库。

**更新：** 我建议将所有信息存储在服务器的数据库中。有很多方法可以做到这一点。具体实现将取决于您的后端。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T10:23:52.963

如果您将文件存储在本地计算机上，显然每个对该文件具有读/写权限的用户都可以修改它。

我建议您遵循以下其中一种方式

1.  加密文件并在打开时解密
2.  将其保存到服务器上的远程文件中
3.  使用数据库

# lucene - 如何处理 OpenSearchServer / Lucene 中的特殊字符，如 (#)？

> ID：10189336
> 
> 赞同：1
> 
> 时间：2012-04-17T10:19:13.287
> 
> 标签：lucene, search-engine

我正在使用 OpenSearchServer（社区版）v1.2.4-rc3 - stable - rev 1474 - build 802。我爬取了一个 C# 和 C++ 编程网站。现在，当我搜索 C# 或 C++ 时，软件会去除特殊字符，例如 #,+。结果并不确切是哪个软件返回的。如何处理 OpenSearchServer / Lucene 中的特殊字符，如 (#)？有人可以建议我的想法吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:56:04.360

您需要更改索引策略以使用自定义或半自定义标记器，以保留表示 C# 和 C++ 代码术语所需的特殊字符。您将在索引期间和搜索期间使用此标记器。

副手，我会看看**org.apache.lucene.analysis.standard**和**org.apache.lucene.wikipedia.analysis**以获得一些关于如何构造标记器（使用标记器（词法分析器）生成器，如 JFlex 等）的想法。可能需要而不是手动编码标记器）。

# java - org.apache.jasper.JasperException：PWC6033：JSP 的 Javac 编译出错

> ID：10189344
> 
> 赞同：0
> 
> 时间：2012-04-17T10:19:36.267
> 
> 标签：java, jsp, glassfish, netbeans-7

无法使用 glass fish server3.1.2 在 netbeans 中编译 jsp，它显示以下异常

```
org.apache.jasper.JasperException: PWC6033: Error in Javac compilation for JSP

PWC6197: An error occurred at line: 9 in the jsp file: /index.jsp
PWC6199: Generated servlet error:
';' expected

PWC6197: An error occurred at line: 9 in the jsp file: /index.jsp
PWC6199: Generated servlet error:
';' expected

PWC6197: An error occurred at line: 9 in the jsp file: /index.jsp
PWC6199: Generated servlet error:
not a statement

PWC6197: An error occurred at line: 9 in the jsp file: /index.jsp
PWC6199: Generated servlet error:
';' expected 
```

我的 java 和 jsp 代码

```
<%@page contentType="text/html" pageEncoding="UTF-8" %>
<%@page language="java" import= "java.sql.*"%>
<%
String driver="org.postgresql.Driver";
Class.forName(driver).newInstance();
Connection con=null;
ResultSet rst=null;
Statement stmt=null;
try
{
  String url="jdbc:postgresql://localhost:5432/ksa?user="postgres"password="postgres"";
  con=DriverManager.getConnection("url");
  stmt=con.createStatement();
}          
catch(Exception e)
               {
  System.out.println(e.getMessage());
       }
if(request.getParameter("action")!=null)
       {
           String name=request.getParameter("name");
           String address=request.getParameter("address");
           String id=request.getParameter("id");
           stmt.executeUpdate("insert into cd values('"+ name +"','"+ address +"')");
           rst=stmt.executeQuery("select * from cd");             
       }    
%> 
```

netbeans 显示该行中的错误

```
String url="jdbc:postgresql://localhost:5432/ksa?user="postgres"password="postgres""; 
```

我使用 postgresql9.1，glassfish 日志显示以下内容

```
SEVERE: Error compiling file: /home/adapco/.netbeans/7.1.1/config/GF3_1/domain1  /generated/jsp/cddata/org/apache/jsp/index_jsp.java
WARNING: StandardWrapperValve[jsp]: PWC1406: Servlet.service() for servlet jsp threw exception 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:25:01.410

该行不正确：

```
String url="jdbc:postgresql://localhost:5432/ksa?user="postgres"password="postgres"; 
```

它应该是：

```
String url="jdbc:postgresql://localhost:5432/ksa?user=\"postgres\"&password=\"postgres\""; 
```

**更新：**

顺便一提：

```
con=DriverManager.getConnection("url"); 
```

应该：

```
con=DriverManager.getConnection(url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-05T07:58:19.393

我认为这是一个小错误，您的“{”和“}”不匹配，我遇到了同样的问题。

# qt - Qt：获取以前输入的字符

> ID：10189345
> 
> 赞同：0
> 
> 时间：2012-04-17T10:19:42.700
> 
> 标签：qt

```
QTextCursor c = ui->textEdit->textCursor();
QChar cc = c.PreviousCharacter; 
```

这不会产生错误，但也不会产生结果（不确定 cc 中存储了什么）。我想在 QTextEdit 中收集以前键入的字符，无论光标在哪里（例如，不收集 QTextEdit 中的最后一个字符，而是最后键入的字符）。有人吗？谢谢！

更新：

终于明白了。见代码。

```
QTextCursor cursor = ui->textEdit->textCursor();
cursor.select(QTextCursor::WordUnderCursor);
QString c = cursor.selectedText().right(1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:27:27.160

`QTextCursor::PreviousCharacter` is an enumeration, so you will just store the int value of PreviousCharacter in that enumeration. It's supposed to be used like this: `c.movePosition(QTextCursor::PreviousCharacter)` meaning "move the cursor to the previous character", meaning to the next character to the left if you're typing in a Western left-to-right script, vice versa in RTL (i.e. Arabic) scripts. It doesn't keep track of the letters you type. You probably need to implement a key event handler that logs the keypresses.

# emacs - 如何在emacsClient中自动完成轻光标

> ID：10189347
> 
> 赞同：3
> 
> 时间：2012-04-17T10:19:52.867
> 
> 标签：emacs, autocomplete, elisp

模式在这里：[http ://emacswiki.org/emacs/AutoComplete](http://emacswiki.org/emacs/AutoComplete)

在底部：

> 我的背景是黑色的，当我使用自动完成功能时，只要我输入一些内容，我的光标就会变成黑色，所以现在我看不到它了。帮助！我将如何解决这个问题？
> 
> 好吧，没关系，修好了。加载自动完成包后，刚刚将 (set-cursor-color “white”) 添加到我的 .emacs 文件中。

所以我也成功了。甚至 (set-cursor-color “#ffffff”) 但它对我没有帮助。我怎么解决这个问题？

**更正：**它适用于 emacs，但不适用于 emacsclient

也许我必须添加一些钩子？但是我需要做一个适当的钩子，而不是在我试图解决设置所有前景光背景黑暗的麻烦的地方添加我所有的混乱......

*这里还有一个题外话问题：为什么大多数专业的 emacs 用户使用轻主题？*

配置：

```
(require 'auto-complete-config)
(ac-config-default)
(set-face-background 'ac-completion-face "darkgray")
(set-face-underline 'ac-completion-face "lightgray")
(set-face-background 'ac-yasnippet-candidate-face "black")
(set-face-underline 'ac-yasnippet-candidate-face "sandybrown")
(set-face-background 'ac-candidate-face "darkgray")
(set-face-underline 'ac-candidate-face "lightgray")
(set-face-background 'ac-selection-face "steelblue")
(set-cursor-color "#ffffff")

(provide 'auto-complete-settings) 
```

**评论答案：**

```
(frame-parameter (selected-frame) 'cursor-color)
"black" 
```

-- 自动完成之前（光标亮起）和光标变暗之后。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T11:38:30.057

自动完成使用的三个面`ac-candidate-face`是`ac-completion-face`和`ac-selection-face`。自定义它们应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T08:51:47.633

我没有使用自动完成功能，但我无法为默认面重现此行为。

在 23.1.1 中，我可以使用您指定的相同功能设置面部的背景颜色`default`，它会应用更改并将其设置为所有后续帧的默认值，包括来自 emacsclients 的帧。

您能否确认您*确实*在与已对其进行更改的服务器交谈？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T09:11:52.957

这对我有用：

```
(defun frame-bg (frame)
  "Custom behaviours for new frames."
  (with-selected-frame frame
    (set-cursor-color "#ffffff")
    ))
(frame-bg (selected-frame))
(add-hook 'after-make-frame-functions 'frame-bg) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T16:12:13.570

我同意 Heather 的回答会起作用，但我发现解决这个问题所需的只是将以下内容放入我的 .emacs 文件中（启用自动完成模式后）：

```
 (set-cursor-color “white”) 
```

# javascript - Dynatree IE9 加载问题

> ID：10189351
> 
> 赞同：0
> 
> 时间：2012-04-17T10:20:02.377
> 
> 标签：javascript, json, internet-explorer, dynatree

我在 Web 应用程序上实现了一个 dynatree，dynatree 是从带有 JSON 对象的服务器生成的。Dynatree 在 Firefox、Safari、Chrome 和 Opera（最新版本）上运行良好，但是当我在 IE9 上打开时，我只能在刷新页面后加载树，或者启动调试模式。我在控制台、脚本上找不到任何错误……有什么建议吗？有同样问题的人吗？代码：

```
function hacerPeticion(url, callback){
                var request;
                if(window.XMLHttpRequest){
                    request = new XMLHttpRequest();
                }else{
                    request = new ActiveXObject("Microsoft.XMLHTTP"); 
                }
                request.onreadystatechange = function(){
                    if (request.readyState == 4 && request.status == 200){
                        callback(request);
                    }
                }
                request.open("GET", url, true);
                request.send();
            } 
```

使用功能：

```
hacerPeticion('/ServiciosWeb/Zonas.jsp', function(data){
                var data = JSON.parse(data.responseText);
                var arbol = data;
                eval('var obj='+arbol);
                console.log(obj);
           $(function(){
                    $("#tree3").dynatree({
                        checkbox: true,
                        selectMode: 3,
                        children: obj,
                        onSelect: function(select, node) {

                            if(!select){
                                if(node.data.key=="zonas"){
                                    control=false;
                                    cargaMapaCYL(map, control);
                                }
                                if(node.data.key=="ast"){
                                    control=false;
                                    cargaMapaAst(map, control);
                                }
                            /*Nodos seleccionados*/
                            if(select){
                                if(node.data.key=="zonas"){
                                    control=true;
                                    cargaMapaCYL(map, control);
                                }
                                if(node.data.key=="ast"){
                                    control=true;
                                    cargaMapaAst(map, control);
                                }
                            }

                        onDblClick: function(node, event){
                            node.toggleSelect();
                        },
                        onKeydown: function(node, event) {
                            if( event.which == 32 ) {
                                node.toggleSelect();
                                return false;
                            }
                        }
                    }); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:10:22.013

所以.....，问题出在这一行：

```
console.log(obj); 
```

当我退役这条线时，一切正常。

# xml - 在 NSIS 中使用 Wizous XML 插件读取根节点属性

> ID：10189353
> 
> 赞同：0
> 
> 时间：2012-04-17T10:20:07.317
> 
> 标签：xml, plugins, nsis

我正在尝试读取根属性，但仍然无法使用 wizous xml.nsh 插件来做到这一点:(

代码本身很简单：

```
 ${xml::LoadFile} "${WHICH_DIR}" $0
  ${xml::RootElement} $R1 $R0
  !ifdef DEBUGMODE_NSISDBG
    nsisdbg::sendtolog /NOUNLOAD " root : $R1"
  !endif
  ${xml::GotoPath} "${XML_PATH}" $R1
  !ifdef DEBUGMODE_NSISDBG
    nsisdbg::sendtolog /NOUNLOAD "GotoPath '${XML_PATH}' result: $R1 "
  !endif
  ${xml::GetAttribute} "${XML_PARAM}" "${XML_VARIABLE}" $R1
  !ifdef DEBUGMODE_NSISDBG
    nsisdbg::sendtolog /NOUNLOAD "GetAttribute '${XML_PARAM}' result '$R1' : ${XML_VARIABLE} "
  ${xml::SetAttribute} "port" "$EditTextEditText" $0
  ${xml::SaveFile} "agent.xml" $0
  ${xml::Unload} 
```

但输出仍然不是我需要的：

```
<2012.04.17\. 13:01:04>  root : agent
<2012.04.17\. 13:01:04> GotoPath '/agent/' result: -1 
<2012.04.17\. 13:01:04> GetAttribute 'port' result '0' : 
```

输入 XML 文件：

```
<?xml version="1.0" encoding="windows-1257"?>
<agent port="0000" loglevel="3">
</agent> 
```

**感谢您提供任何提示或帮助。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:16:58.667

一些初步的观点：

*   由于您没有提供[sscc](http://sscce.org/ "简短、独立、正确（可编译）的示例")示例，因此我需要稍微调整一下您的代码
*   您似乎没有使用 Wizou 的[NsisXml 插件](http://nsis.sourceforge.net/NsisXML_plug-in_%28by_Wizou%29)，而是Instructor的[XML 插件](http://nsis.sourceforge.net/XML_plug-in)

在处理您的样本时，我注意到

*   您可能会对 nsis 常量和变量感到困惑（您应该查看 nsis 编译器输出的警告），因为`GetAttribute`期望变量作为第二个参数来存储结果
*   `GotoPath`不适用于最终`/`结果我通过删除它得到了预期的结果
*   我更改了代码，因为我不使用 nsisdbg 插件，而只使用 DebugView 来捕获`OutputDebugString`消息

```
!include "XML.nsh"

Name "Sample nsisXML"
OutFile "SampleSO.exe"

ShowInstDetails show    

!define XML_PATH "/agent"
!define XML_PARAM "port"
var XML_VARIABLE 

!define DEBUG `System::Call kernel32::OutputDebugString(ts)`

!macro GetXMLParam PATH PARAM VARIABLE
    ${xml::GotoPath} "${PATH}" $R1
    ${DEBUG} "GotoPath '${PATH}' result: $R1 "
    ${xml::GetAttribute} "${PARAM}" ${VARIABLE} $R1
    ${DEBUG} "GetAttribute '${PARAM}' result '$R1' : ${VARIABLE} "
!macroend

Section "Main program"

    ${xml::LoadFile} "so.xml" $0
    ${xml::RootElement} $R1 $R0
    ${DEBUG} " root : $R1"

    !insertmacro GetXMLParam "/agent" "port" $XML_VARIABLE
;        ${xml::GotoPath} "${XML_PATH}" $R1
;         ${DEBUG} "GotoPath '${XML_PATH}' result: $R1 "
;         ${xml::GetAttribute} "${XML_PARAM}" $XML_VARIABLE $R1
;         ${DEBUG} "GetAttribute '${XML_PARAM}' result '$R1' : $XML_VARIABLE "
    ${xml::SetAttribute} "port" "$XML_VARIABLE" $0
    ${xml::SaveFile} "agent.xml" $0
    ${xml::Unload}
SectionEnd 
```

结果 ：

```
root : agent
GotoPath '/agent' result: 0 
GetAttribute 'port' result '0' : 0000 
```

# jquery - Jquery克隆并包装每3个孩子并添加可滚动的jquery-tools

> ID：10189355
> 
> 赞同：0
> 
> 时间：2012-04-17T10:20:25.487
> 
> 标签：jquery, clone, jquery-tools, scrollable

我正在尝试使用以下方法解决此可滚动问题：

```
var divs = $(".wrap > .outerDiv");
for(var i = 0; i < divs.length; i+=3) {
  divs.slice(i, i+3).wrapAll("<div class='breakpoint'></div>");
} 
```

这是在我的孩子超过 3 岁时创建一个断点。

解决它的唯一一种方法是包装 3 个孩子。你能仔细检查一下为什么不创建 3 个 div 请看看我的演示。

```
 <div class="breakpoint">
        <div></div>
        <div></div>
        <div></div>
   </div> 
```

**演示** [http://jsfiddle.net/2mby5/98/](http://jsfiddle.net/2mby5/98/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:21:30.107

当您的代码运行时， $(".wrap").children() 的长度为 1。

如果您希望它在克隆后插入断点，则需要再次触发它（我想在每次克隆之后）。

考虑一个 pub / sub 使它松散耦合，在[https://gist.github.com/661855有一个很好的](https://gist.github.com/661855)

# github - 如何将屏幕截图添加到 github 存储库中的 README？

> ID：10189356
> 
> 赞同：680
> 
> 时间：2012-04-17T10:20:27.427
> 
> 标签：github, markdown

是否可以将屏幕截图放在 GitHub 存储库的 README 文件中？语法是什么？

* * *

## 回答 #1

> 赞同：942
> 
> 时间：2012-04-17T10:22:08.547

如果您使用 Markdown (README.md)：

如果您的存储库中有图像，则可以使用相对 URL：

```
![Alt text](/relative/path/to/img.jpg?raw=true "Optional Title") 
```

如果您需要嵌入在其他地方托管的图像，您可以使用完整的 URL

```
![Alt text](http://full/path/to/img.jpg "Optional title") 
```

GitHub 建议您使用带参数的**相对链接**`?raw=true`以确保分叉的 repos 正确指向。

该`raw=true`参数是为了确保您链接到的图像将按原样呈现。这意味着只有图像将被链接到，而不是相应文件的整个 GitHub 界面。有关更多详细信息，请参阅[此评论](https://stackoverflow.com/questions/10189356/how-to-add-screenshot-to-readmes-in-github-repository/10189374?noredirect=1#comment94874283_10189374)。

查看一个示例：[https ://raw.github.com/altercation/solarized/master/README.md](https://raw.github.com/altercation/solarized/master/README.md)

如果您使用 SVG，那么您还需要将 sanitize 属性设置`true`为：`?raw=true&sanitize=true`. （感谢@EliSherer）

此外，关于 README 文件中的相对链接的文档：[https ://help.github.com/articles/relative-links-in-readmes](https://help.github.com/articles/relative-links-in-readmes)

当然还有降价文档：[http ://daringfireball.net/projects/markdown/syntax](http://daringfireball.net/projects/markdown/syntax)

此外，如果您创建一个新分支`screenshots`来存储图像，您可以避免它们在`master`工作树中

然后，您可以使用以下方法嵌入它们：

```
![Alt text](/../<branch name>/path/to/image.png?raw=true "Optional Title") 
```

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2015-07-21T03:15:19.183

即使已经有一个公认的答案，我想添加另一种方式将图像上传到 GitHub 上的自述文件。

*   您需要在您的仓库中创建问题
*   将您的图像拖放到评论区
*   生成图像链接后，将其插入自述文件

您可以在[此处找到更多详细信息](http://solutionoptimist.com/2013/12/28/awesome-github-tricks/)

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2012-10-21T11:47:35.067

我发现我的仓库中图像的路径不够，我必须链接到`raw.github.com`子域上的图像。

网址格式`https://raw.github.com/{USERNAME}/{REPOSITORY}/{BRANCH}/{PATH}`

降价示例`![Settings Window](https://raw.github.com/ryanmaxwell/iArrived/master/Screenshots/Settings.png)`

* * *

## 回答 #4

> 赞同：44
> 
> 时间：2016-11-18T19:33:57.180

**2020 年 6 月 3 日：工作答案-**

1.  将您的图片上传到[postimage.org](https://postimages.org)
2.  上传图片后复制 **Github-Markdown-Url**
3.  插入自述文件

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2013-05-26T20:09:17.493

下面的一行应该是你要找的

如果您的文件在存储库中

```
![ScreenShot](https://raw.github.com/{username}/{repository}/{branch}/{path}) 
```

如果您的文件位于其他外部 url

```
![ScreenShot](https://{url}) 
```

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2015-08-27T14:50:50.580

显示图像的 markdown 语法确实是：

```
![image](https://{url}) 
```

**但是：**如何提供`url`？

*   你可能不想用截图弄乱你的仓库，它们与代码无关
*   您可能不想处理让您的图像在网络上可用的麻烦......（将其上传到服务器......）。

所以......你可以使用这个[很棒的技巧](http://solutionoptimist.com/2013/12/28/awesome-github-tricks/)让 github 托管你的图像文件。TDLR：

1.  在你的 repo 的 issue list 上创建一个 issue
2.  在此问题上拖放您的屏幕截图
3.  **复制 github 刚刚为您创建的 markdown 代码**以显示您的图像
4.  将其粘贴到您的自述文件中（或任何您想要的地方）

[http://solutionoptimist.com/2013/12/28/awesome-github-tricks/](http://solutionoptimist.com/2013/12/28/awesome-github-tricks/)

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2018-01-30T11:33:28.007

比添加 URL 简单得多只需将图像上传到同一个存储库，例如：

`![Screenshot](screenshot.png)`

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2018-03-08T17:16:55.637

将此添加到自述文件

```
<div align="center">
    <img src="/screenshots/screen1.jpg" width="400px"</img> 
</div> 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2016-10-12T19:16:53.137

**降价：** `![Screenshot](http://url/to/img.png)`

*   *创建有关添加图像的问题*
*   *通过拖放或文件选择器添加图像*
*   *然后复制图片源*

*   **现在添加`![Screenshot](http://url/to/img.png)`到您的 README.md 文件中**

完毕！

或者，您可以使用一些图像托管站点`imgur`，例如获取它的 url 并将其添加到您的 README.md 文件中，或者您也可以使用一些静态文件托管。

[示例问题](https://github.com/abe312/colors.js/issues/1)

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2017-08-17T14:44:21.973

**方法1->Markdown方式**

```
![Alt Text](https://raw.github.com/{USERNAME}/{REPOSITORY}/{BRANCH}/{PATH}) 
```

**方法2->HTML方式**

```
<img src="https://link(format same as above)" width="100" height="100"/> 
```

或者

```
<img src="https://link" style=" width:100px ; height:100px " /> 
```

*注意*->如果您不想设置图像样式，即调整大小，请删除样式部分

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2021-03-03T22:28:05.513

从 2021 年 3 月起，现在支持：

> ## [将文件附加到 Markdown 文件](https://github.blog/changelog/2021-03-03-attaching-files-to-markdown-files/)

> 您现在可以在 Web 中编辑文件时将文件（包括图像）附加到 Markdown 文件。
> 
> 这就像问题和拉取请求中的文件附件一样工作，并支持相同的文件类型。
> 
> **只需拖动和拖动、单击并选择或粘贴。**
> 
> [![拖放以上传 gif - https://i1.wp.com/user-images.githubusercontent.com/7900087/109347520-25045d00-7828-11eb-9609-ee96b396eb65.gif?ssl=1](../Images/4c5b0ac67cb244d0218d910f22ebfd8b.png)](https://i.stack.imgur.com/MOGzR.gif)
> 
> 注意：如果您将图像添加到 Markdown 文件，任何人都可以在无需身份验证的情况下查看匿名图​​像 URL，即使 Markdown 文件位于私有存储库中。
> 要使图像保密，请从需要身份验证的专用网络或服务器提供它们。有关匿名 URL 的更多信息，请参阅“[关于匿名图像 URL](https://docs.github.com/articles/about-anonymized-image-urls) ”。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2022-01-23T07:18:12.523

请放松这四个步骤，这对我有用

1-在 GitHub 上创建一个新问题。2-将图像拖放到评论字段或上传照片。3-等待上传过程完成。4-复制 URL 并在 GitHub 上的 Markdown 文件中使用它（在存储库的自述文件中使用生成的 URL）。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2020-10-06T01:10:55.023

添加`![ScreenShot](screenshot.png)`上面许多人提到的自述文件降价。将 screenshot.png 替换为您在存储库中上传的图像的名称。

**但是，当您上传图片时，这是一个新手提示（因为我自己犯了这个错误）：**

确保您的图像名称不包含空格。我的原始图像保存为“截图日月年 i​​d.png”。如果您不将名称更改为 contentofimage.png 之类的名称，则它不会在您的自述文件中显示为图像。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2021-09-09T12:57:52.623

## 对我来说，相对路径效果很好。

**我是怎么做到的：** 在我想要使用来自另一个目录的图片的当前 md 文件中，我使用了这样的相对路径 - 请考虑以下几点。

md 文件位置：`base dir -> _post -> current_file.md`

& 我想使用的图片文件 loc：`base dir -> _asset -> picture_to_use.jpeg`

我使用的声明在`current_file.md`文件中：

```
![your-pic-caption-name](../_asset/picture_to_use.jpeg) 
```

注意 - 在此之前，我使用的是直接`_asset`但理想情况下，它从`../_asset/and-so-no`

参考 - [https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-repository-on-github/about-readmes](https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-repository-on-github/about-readmes)

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2020-01-03T17:31:24.350

我用谷歌搜索了一些类似的问题，但没有看到我的问题及其非常简单/容易的解决方案的任何答案。

# Google Cloud Storage - README 中的图像处理方法略有不同

这里是这样的：像 OP 一样，我想要在我的 Github README 中有一个图像，并且知道这样做的 Markdown 语法，输入它：

```
![My Image](https://storage.cloud.google.com/${MY_BUCKET}/${MY_IMAGE} 
```

您需要完成上面的实际替换（例如 MY_IMAGE=image.jpg）才能使其正常工作。

> 但是，等等……失败——没有实际渲染的照片！*该链接与 Google Storage 提供的完全相同！*
> 
> [![Github 图片上传失败截图](../Images/c133cb759b0d68933c2029d9797700f5.png)](https://i.stack.imgur.com/hdLiT.png)

## Github `camo`- 匿名图片

[Github 匿名托管您的图像](https://help.github.com/en/github/authenticating-to-github/about-anonymized-image-urls)，耶！但是，这给 Google 存储资产带来了问题。您需要从 Google Cloud Console 获取生成的 url。

但是，我确信有一种更流畅的方法，只需访问您给定的 URL 端点并复制长 URL。细节：

### 指示

1.  访问您的存储控制台：[https](https://console.cloud.google.com/storage/browser/) : //console.cloud.google.com/storage/browser/ ${MY_BUCKET}?project=${MY_PROJECT}
2.  单击您想在 Github 中显示的图像（这将打开“对象详细信息”页面）
3.  `https`将该 URL（以not开头的 URL `gs`）复制到新的浏览器选项卡/窗口中
4.  将新生成的 URL（它应该更长）从您的新浏览器选项卡/窗口复制到您的 Github README 文件中

希望这有助于加快并为其他任何人澄清这个问题。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2018-04-02T14:23:51.363

首先，在本地存储库的根目录中创建一个目录（文件夹），其中包含`screenshots`您要添加的内容。我们就叫这个目录的名字吧`screenshots`。将要添加的图像（JPEG、PNG、GIF 等）放入此目录。

[Android Studio 工作区截图](https://i.stack.imgur.com/B1BPM.png)

其次，您需要将每个图像的链接添加到您的 README 中。所以，如果我在我的截图目录中命名了图像`1_ArtistsActivity.png`，`2_AlbumsActivity.png`我将添加它们的链接，如下所示：

```
 <img src="screenshots/1_ArtistsActivity.png" height="400" alt="Screenshot"/> <img src=“screenshots/2_AlbumsActivity.png" height="400" alt="Screenshot"/> 
```

如果您希望每个屏幕截图在单独的行上，请将它们的链接写在单独的行上。但是，最好将所有链接写在一行中，仅用空格分隔。它实际上可能看起来不太好，但这样做 GitHub 会自动为您安排它们。

最后，提交您的更改并推送它！

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-12-23T11:58:24.363

从上传文件选项在存储库中添加图像，然后在 README 文件中添加图像

```
![Alt text]("enter image url of repositoryhere") 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-11-27T22:19:04.037

对我来说最好的方法是——

1.  在 github 上使用该存储库创建一个新问题，然后以 gif 格式上传文件。要将视频文件转换为 gif 格式，您可以使用此网站[http://www.online-convert.com/](http://www.online-convert.com/)
2.  提交新创建的问题。
3.  复制上传文件的地址
4.  最后在你的 README 文件中放 ![demo](COPIED ADDRESS)

希望这会有所帮助。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-10-22T08:07:53.223

通过单击右上角的绿色按钮创建一个新问题。截取您需要的任何内容并将其粘贴到问题消息中（Mac 上的 CMD+V 或 Windows 上的 CTR+V）。

* * *

## 回答 #20

> 赞同：-5
> 
> 时间：2014-09-24T11:34:33.640

图像位于`/screen-shots`目录中。外部`<div>`允许定位图像。填充是使用`<img width="desired-padding" height="0">`.

```
<div align="center">
        <img width="45%" src="screen-shots/about.PNG" alt="About screen" title="About screen"</img>
        <img height="0" width="8px">
        <img width="45%" src="screen-shots/list.PNG" alt="List screen" title="List screen"></img>
</div> 
```

# php - 主干和 PHP 模型代码重复

> ID：10189359
> 
> 赞同：2
> 
> 时间：2012-04-17T10:20:37.360
> 
> 标签：php, architecture, backbone.js, singlepage

所以我决定采用一个我一直在做的项目和项目管理系统，并将其从标准的多页应用程序转换为单页应用程序。在此过程中，我查看了许多 javascript MV*ish 框架（ember、knockout、backbone 等），并决定使用backbone.js，因为它似乎是最灵活的解决方案，而且我已经使用了下划线。 js 的实用程序和模板系统。

我这样做的最大担忧是我的 PHP 模型和骨干模型中的模型和业务/域逻辑可能存在代码重复。

这只是我在使用这样的架构时支付的技术成本，或者我可以做些什么来减少这种担忧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T14:37:58.950

您可能想看看我之前回答的涉及 Node.js 的问题：

[使用 Backbone.js pushstate 进行 seo/书签时重用服务器上的主干视图/路由](https://stackoverflow.com/questions/7098130/reusing-backbone-views-routes-on-the-server-when-using-backbone-js-pushstate-for/7270771#7270771)

我目前正在做的是使用[Davis.js](http://davisjs.com/) + [Mustache](http://mustache.github.com/) + Java Spring MVC 支持（基于我最初的问题：[Java 框架中的单页 Web 应用程序或示例？](https://stackoverflow.com/questions/9773758/single-page-web-app-in-java-framework-or-examples)）。

如果浏览器不支持 Pushstate，那么我让服务器使用 Java 版本的 Mustache（即标准 Web 1.0）完成整个页面的呈现。如果浏览器确实支持 Pushstate，那么浏览器将对模型的 JSON 版本发出 AJAX 请求。然后在客户端使用[icanhz](http://icanhazjs.com/)（即 javascript mustache）渲染模型。

如果您的大部分逻辑是获取模型然后根据特定的 URL 呈现它，这将非常有效。那就是您的业务逻辑是“基于我将要呈现的某个 URL”。这就是网络上大多数网站的工作方式（包括这个仍然是 web 1.0 的网站）。显然，这不适用于实时聊天或 HTML5 游戏之类的内容。

这里提到了这个设计的python版本：http: [//duganchen.ca/single-page-web-app-architecture-done-right/](http://duganchen.ca/single-page-web-app-architecture-done-right/)

我敢肯定有人做过PHP版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:18:13.157

如果您在服务器和客户端中使用不同的语言，我认为不可能避免您担心的这种部分*逻辑重复。*

如果您确实想在服务器和客户端中使用相同的代码，则必须将所有代码移至唯一的通用语言：JavaScript。

有多个 JS 框架非常透明地集成了服务器和客户端之间的开发：[derby](http://derbyjs.com)，[meteor](http://www.meteor.com)，...

# c# - IntPtr 不包含本机值

> ID：10189363
> 
> 赞同：3
> 
> 时间：2012-04-17T10:21:17.173
> 
> 标签：c#, .net, interop, compact-framework, pinvoke

我有一个必须将字节数组传递给 .NET 包装器的本机方法。natove 方法如下所示：

```
__declspec(dllexport) int WaitForData(unsigned char* pBuffer)
{
    return GetData(pBuffer);
} 
```

GetData 使用 malloc 分配内存区域并将一些数据（字节流）复制到其中。此字节流是通过套接字连接接收的。返回值是 pBuffer 的长度。

必须从 .NET 调用此方法。导入声明如下所示：

```
[DllImport("CommunicationProxy.dll")]
public static extern int WaitForData(IntPtr buffer); 
```

**[编辑]**

dasblinkenlight 建议的 P/Invoke Interop Assistant 将原型转换为以下导入签名：

```
public static extern  int WaitForData(System.IntPtr pBuffer) 
```

结果是一样的：调用方法后ptr为0。

**[/编辑]**

调用该方法后，提取结果：

```
IntPtr ptr = new IntPtr();
int length = Wrapper.WaitForData(ref ptr);

byte[] buffer = new byte[length];
for(int i = 0;i<length;i++)
{
    buffer[i] = System.Runtime.InteropServices.Marshal.ReadByte(ptr, i);
}
Wrapper.FreeMemory(ptr); 
```

问题是，托管变量 ptr 不包含本机变量 pBuffer 包含的值。尽管指向分配的内存区域，但返回`ptr`时始终为 0 。`Wrapper.WaitForData``pBuffer`

原型有错误吗？如何编组指向字节数组的指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T11:12:45.360

您需要像这样传递对指针或“双指针”的引用

```
__declspec(dllexport) int WaitForData(unsigned char** pBuffer) 
```

然后更改指针的值（因为它是按**值**传递的）

```
*pBuffer = 'something' 
```

其他选项 - 返回指针（然后您必须以其他方式处理 int/length）

顺便说一句，这就是您自动生成的原型看起来像这样的原因（没有 out，ref 修饰符）

# asp.net-mvc-3 - EF 4.1 到 EF 4.3.1：某些东西仍在引用 4.1，但找不到它

> ID：10189364
> 
> 赞同：0
> 
> 时间：2012-04-17T10:21:17.883
> 
> 标签：asp.net-mvc-3, entity-framework-4

## 设置：

我有一个应用程序是另一个应用程序的副本，它与 EF 4.1 一起使用。在新应用程序中，我在域项目中添加了对 EF 4.3.1 的 nuget 包引用。

一切都在我的本地机器上工作，但在服务器上抛出以下错误：

```
Could not load file or assembly 'EntityFramework, Version=4.1.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040) 
```

显然，某些东西仍在引用旧的实体框架 4.1，但它找到的唯一 dll 是 EF 4.3.1 dll。

web.config 中没有对 EntityFramework 的引用。

## 问题：

如何找到仍在引用旧 dll 的内容？

我已经从解决方案中的所有项目中删除了所有 EF 引用，并将 EF 4.3.1 包添加到每个项目中，但仍然没有任何乐趣。

## 笔记：

我可以尝试使用dependentAssembly 进行绑定重定向（请参阅[此 SO question](https://stackoverflow.com/questions/4187907/net-picking-the-wrong-referenced-assembly-version)中的已接受答案）

但是，我找不到要使用的名称和标记。

尽管如此，最好还是找到问题的路径，而不是仅仅重定向绑定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T10:30:33.070

您是否在更改引用后重新编译了应用程序，或者只是上传了新`EntityFramework.dll`文件？应用程序的库可能仍在您的生产环境中引用旧版本。重新编译并重新发布。

**编辑**（见评论）：在记事本中打开所有 .csproj 文件并查找参考标记，仔细检查所有项目中是否不存在旧版本。

# machine-learning - 项目的 Mahout 朴素贝叶斯分类器

> ID：10189365
> 
> 赞同：0
> 
> 时间：2012-04-17T10:21:19.253
> 
> 标签：machine-learning, mahout, bayesian, classification

团队，

我正在做一个项目，我需要将项目分类到某个类别。我有一个文件作为输入；其中包含**目标变量**和**空间分隔的特征**。我的训练数据看起来像

## 类别名称 [Tab] DataString

水暖 [Tab] 管龙头 塑料管 PVC 管 冷水管 热水管 三通出口向上 弯头向上 弯头向下 闸阀 截止阀

油漆 [标签] 象牙黑 焦琥珀 卡普特 紫罗兰 大地红 黄色 赭石 钛白 镉黄 浅镉黄 深

Cloths [Tab] 衬衫 T 恤 Pent Jeans Tee Cargo

好吧，我有很多类别。我有几个问题

1.  我是否使用正确的数据进行培训？如果没有，那么我应该使用什么？
2.  一旦我训练和测试我的模型，下一步是什么？我如何使用输出？

请在这件事上给予我帮助

谢谢，

尼梅什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:09:00.317

是的，一旦你得到一些输出，你可以用它来测试。您可以看到一些测试数据集生成一些测试结果。有些是好的，但有些不是。调整模型或测试数据集可能是您的下一步。

# javascript - 从嵌套的异步 ajax 调用返回结果

> ID：10189367
> 
> 赞同：2
> 
> 时间：2012-04-17T10:21:35.103
> 
> 标签：javascript, jquery, ajax

我需要从嵌套的 ajax 调用返回数据，但也需要 ajax 调用保持异步。

我发现了一些相关的问题，但在以下情况下无法正常工作。我假设`returnData`在 ajax 调用完成之前返回，但我找不到解决方案。

```
function makeRequest(command, postData){

    var returnData;

    $.ajax({

        url: 'call.php?command='+command,
        data: postData,
        type: 'POST'

    }).done(function(data){
        returnData = data;
    });

    return returnData;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T10:24:28.517

是的，因为这个调用是异步的，returnData 会立即返回。如果您需要使用 returndata 将其传递给回调中的函数

```
function makeRequest(command, postData, functionToCallAfterAjax){

    var returnData;

    $.ajax({

        url: 'call.php?command='+command,
        data: postData,
        type: 'POST'

    }).done(function(data){
        functionToCallAfterAjax(data);
    });

} 
```

当然，您可以将要调用的函数作为参数传递。

这意味着，如果您的代码打算这样做：

```
var returnedData = makeRequest(command, postData);
anotherFunction(returnedData); 
```

你应该做的简单（使用上面的代码）

```
makeRequest(command, postData, anotherFunction); 
```

一切都会奏效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:23:48.643

你不能。异步事件不是这样工作的。

发送 HTTP 请求，然后触发它的函数*立即继续*。在 HTTP 响应到达之前不会触发回调，但调用函数将在何时结束。

您必须让您的回调（您传递给的函数`done()`）执行所需的任何进一步处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T10:24:04.927

您在函数运行`returnData`之前返回值。`.done()`通过将接收到的数据传递给函数进行处理来更正您的代码：

```
function makeRequest(command, postData){
    $.ajax({
        url: 'call.php?command='+command,
        data: postData,
        type: 'POST'
    }).done(function(data){
        HandleCallBack(data);
    });
} 
```

# database - 描述数据库服务的标准

> ID：10189369
> 
> 赞同：0
> 
> 时间：2012-04-17T10:21:46.037
> 
> 标签：database, web-services, standards

WSDL（Web Service Description Language）是一种描述Web服务的通用描述语言。

您知道专门用于描述数据库 Web 服务的描述语言/标准吗？

-潘克什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:24:12.620

我不知道“数据库 Web 服务”是什么，但[***模式***](http://en.wikipedia.org/wiki/Database_schema)大致相当于数据库的 WSDL——尽管用于描述模式的“语言”在 RDBMS 供应商之间会有所不同。

# gwt - GWT 中的无响应按钮

> ID：10189377
> 
> 赞同：0
> 
> 时间：2012-04-17T10:22:18.700
> 
> 标签：gwt

我有一个 GWT 应用程序，带有一些按钮。这些按钮有时似乎没有反应，即点击它们什么也没做。有没有人遇到过这个问题？和浏览器兼容性有关吗？

PS：如果相关的话，我正在 MAC OS 上运行 GWT 开发模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T03:03:03.040

过去，当通过 getElement().appendChild() 而不是 .add() 添加小部件层次结构中的元素时，我遇到过这种情况

有关相关线程，请参阅[http://comments.gmane.org/gmane.org.google.gwt/78360](http://comments.gmane.org/gmane.org.google.gwt/78360)。

-克林特

# php - 使用 php 在同一页面中显示输出

> ID：10189378
> 
> 赞同：2
> 
> 时间：2012-04-17T10:22:25.023
> 
> 标签：php, javascript, mysql

我是 php 新手。我在 php 中创建了一个页面，其中包含 chk 框、输入字段并从数据库（mysql）中检索数据并使用 javascript。我有一个问题，那就是我想在同一页面中显示输出。

我创建了这样的代码，我希望在同一页面中输出，但它显示错误。

```
<?php
if(isset($_POST['submit']))
{
  $con=mysql_connect("localhost","demosdef_review","review123");
if(!$con)
{
    die('could nt connect 2 the server');
}
mysql_select_db("demosdef_review", $con);
$state = $_POST["state"];
$country = $_POST['country'];

$contry = "USA";

if($country==1)
{
$result = mysql_query("SELECT address FROM storelocator WHERE countryid='1' AND id='$state'");
$row = mysql_fetch_array($result);
  echo $row['address'];
}
else
{
$result = mysql_query("SELECT address FROM storelocator WHERE countryid='$country'");
$row = mysql_fetch_array($result);
  echo $row['address'];
}

}
?>

    enter code here

        <div class=buy>
        <a href="dealer.php">Dealer Enquiry</a>
        </div><br/> 
        <div class=buyfont>Authorized Retailers</div>
        <div><a href="http://www.archiversonline.com/stores"><img src="images/archivers.png"><br/></a>
        <a href="http://www.archiversannex.com/Books-And-SoftwareSoftware-And-Accessoriesdefault.aspx?PageID=20&CategoryID=48"/>
        <img src="images/logo_archivers_annex.png" ></a><br/><br/>

    <a href="http://www.hobbylobby.com/storelocator"/><img src="images/logo_hobbylobby.png"></a><br/><br/>
    <a href="http://www.walgreens.com/storelocator/find.jsp"/><img src="images/logo_walgreens.png"></a></div><br/>
    <form method="POST" action="<?php echo $_SERVER['PHP_SELF']; ?>
    <p>
                <label for="country" style="padding-right: 2px;">Country</label><select name="country" value="countryid"
                 id="countryid" 
                onchange="sub()" style="width:120px;">
                <option value="1">USA</option>
                <option value="2">CANADA</option>
                <option value="3">UK</option>
                <option value="4">AUSTRALIA</option>
                <option value="5">ITALY</option>
                 <option value="6">GUATEMALA</option>
                <option value="7">NEW ZEALAND</option></select></p>
                <p>
<label for="state" style="padding-right: 14px;">State</label>
<select id="state" name="state" value="state"  style="width:120px">
<option value="7">Alabama</option>
            <option value="8">Alaska</option>
            <option value="9">Arizona</option>
            <option value="10">Arkansas</option>
            <option value="11">California</option>
            <option value="12">Colorado</option>
            <option value="13">Connecticut</option>
            <option value="43">Florida</option>
            <option value="14">Georgia</option>
            <option value="15">Idaho</option>
            <option value="16">Illinois</option>
</select></p> <br/>
     <input class="dealer-submit" type="submit" value="Submit" onClick="buy_func()"/>
                  </form>  
     <script type="text/javascript">
        function sub()

        {
    var x=document.getElementById("countryid").selectedIndex;
    var y=document.getElementById("countryid").options;
    var z = document.forms[0].state;
    if(y[x].index==0){
    z.disabled = false;}
    else if(y[x].index>0) {
    z.disabled = true;}}
        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:34:59.797

您的 HTML 标记有错误

```
<a href="http://www.hobbylobby.com/storelocator"/> 
```

它应该是

```
<a href="http://www.hobbylobby.com/storelocator"> 
```

也试试

```
<form method="POST" action=""> 
```

将操作保留为空白会将其发布到同一页面本身

并用这个替换你的提交按钮

```
<input class="dealer-submit" type="submit" name="submit" value="Submit" onClick="buy_func()"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:27:06.273

Check the value of the submit button, if its set `isset($_GET('submit'))` then display the results

does that solve your problem?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T10:29:37.207

submit is the type of the element, 'Submit' is the value you are looking for:

```
<?php
   if(isset($_POST['Submit']){

}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T11:03:14.210

删除行尾的反斜杠：

```
<a href="http://www.hobbylobby.com/storelocator"/>
                                                ^ 
```

# sql - 如何解释我的 ShowPlan（执行计划）

> ID：10189380
> 
> 赞同：4
> 
> 时间：2012-04-17T10:22:35.577
> 
> 标签：sql, database, ms-access, sql-execution-plan

我有一个 Access 2003 DB，我想提高它的性能。昨天，我读了一篇关于执行计划（Show Plan）的文章，今天我为这个查询运行了我的 show Plan：

```
SELECT tb_bauteile_Basis.*
FROM tb_bauteile_Basis
ORDER BY tb_bauteile_Basis.Name; 
```

我在该字段上放置了一个索引`Name`，并显示了它的查询计划：

```
 Inputs to Query -
Table 'tb_bauteile_Basis'
    Using index 'Name'
    Having Indexes:
    Name 1553 entries, 17 pages, 1543 values
      which has 1 column, fixed
    ID 1553 entries, 4 pages, 1553 values
      which has 1 column, fixed, clustered and/or counter
- End inputs to Query -
01) Scan table 'tb_bauteile_Basis'
    Using index 'Name' 
```

接下来，我从 中删除了索引`Name`，新的查询计划为：

```
- Inputs to Query -
Table 'tb_bauteile_Basis'
    Using index 'PrimaryKey'
    Having Indexes:
    PrimaryKey 1553 entries, 4 pages, 1553 values
      which has 1 column, fixed, unique, clustered and/or counter, primary-key, no-nulls
    Plauskomponente 1553 entries, 4 pages, 3 values
      which has 1 column, fixed
    Name 1553 entries, 17 pages, 1543 values
      which has 1 column, fixed
    ID 1553 entries, 4 pages, 1553 values
      which has 1 column, fixed, clustered and/or counter
- End inputs to Query -
01) Scan table 'tb_bauteile_Basis'
    Using index 'PrimaryKey' 
```

我应该如何解释这两个查询计划？

在第二个 Showplan 中，我应该为 建立一个索引`Plauskomponente,Name,ID`，我应该为这三个字段建立一个复合索引吗？如何确定是否应该制作综合索引？

为什么没有`Plauskommponente`出现在第一个展示计划中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T15:15:58.013

*在第二个展示计划中，这意味着：我应该为 Plauskomponente、名称、ID 放置索引？我应该从这三个领域建立一个综合指数吗？我怎样才能发现我应该做一个综合索引？*

这些名称出现在 ShowPlan 部分中，该部分显示了 Jet 在设计查询计划时分析的信息。这 3 个字段上的索引，无论是单独的索引还是基于所有三个字段的单个复合索引，都无助于该特定查询。实际上添加索引会减慢其他操作......当您添加或删除行或编辑索引字段中的值时，数据库引擎必须将更改写入表和复合索引。

优化索引可能很棘手。索引可以加快 SELECT，但会减慢 INSERT、DELETE 和 UPDATE 操作。您需要为您的应用找到合适的平衡点。如果您在 Access 中相对较新，请尝试从菜单的数据库工具部分中的性能分析器向导。检查它提供的建议。很多时候，这些建议将涉及索引。您可以添加它建议的索引，然后在它们降低或不提高整体性能时将其删除。

*为什么 Plauskommponente 没有出现在第一个展示计划中？*

打败我。我猜查询计划器已经找到了 Names 索引，因此认为寻找其他索引毫无意义。

然而，这带来了另一个重要的观点。该表包含 1,553 行，但 Plauskomponente 仅包含 3 个不同的值。由于具有如此低的可变性，Plauskomponente 上的索引甚至可能不会用于具有基于 Plauskomponente 的 WHERE 子句的查询的计划中。@Namphibian 在评论中谈到了原因。读取索引以找出哪些行与条件匹配，然后读取匹配的行可能被认为比忽略索引并从表中读取所有行的成本更高。

最后注意 ShowPlan 信息部分中提到的统计数据。这些统计信息会在您压缩数据库时更新。因此，压缩有助于为查询计划者提供最新信息以供它决定如何优化查询计划。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:21:58.770

该查询正在读取整个表。您没有 where 子句。您不太可能对其进行优化。您可以做的只是选择您需要的列。这减少了传回的数据量。添加索引不会加快查询速度，因为您没有 where 子句。如果您添加了 where 子句并为 where 子句中使用的那些字段编制索引，您可能能够优化查询。

# java - Spring控制器主要方法

> ID：10189381
> 
> 赞同：1
> 
> 时间：2012-04-17T10:22:45.700
> 
> 标签：java, spring, spring-mvc, controller

我是 Spring 和 Spring MVC 的新手。我正在尝试实现一个基本的 Web 应用程序来测试这个框架的功能，但我发现了一些困难。

我发现从版本 3 开始，注解带来了很多好处，因此控制器类不必实现抽象类（即`SimpleFormController`），但这意味着没有强制实现方法。

所以我的问题是：应该在控制器类中实现哪些常用的有用方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:27:48.813

You only have to implement the methods you wish to correspond to the actions from your various webpages - e.g. to accept the input of a form.

What specific difficulties are you having?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:54:08.573

这些方法将具有相关的注释，以表示它们应该为特定的 URL 调用。例如在以下代码中（取自[Official Doc.](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html)），

```
@Controller
public class HelloWorldController {

    @RequestMapping("/helloWorld")
    public String helloWorld(Model model) {
        model.addAttribute("message", "Hello World!");
        return "helloWorld";
    }
} 
```

`helloWorld(Model model)`只是任何类中的任何方法。它的特别之处在于注释`@RequestMapping`告诉该方法应该在请求 URL 时调用`/helloWorld`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T11:17:35.537

与 Santosh 类似，我建议您查看官方文档和 Javadoc：[http ://static.springsource.org/spring/docs/3.0.x/api/org/springframework/web/bind/annotation/RequestMapping.html](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/web/bind/annotation/RequestMapping.html)

基本上，您将在方法上使用注释而不是覆盖方法，并且基于参数注释和方法参数会发生不同的事情。上面的 Javadoc 说明了要使用的等效注释，而不是覆盖 simpleform 方法。

这是我使用 Roo 生成的 CRUD 控制器的完整示例：

```
@Controller
@RequestMapping("/timers")
public class MyTimer {
    @RequestMapping(method = RequestMethod.POST, produces = "text/html")
    public String create(@Valid Timer timer, BindingResult bindingResult, Model uiModel, HttpServletRequest httpServletRequest) {
        if (bindingResult.hasErrors()) {
            populateEditForm(uiModel, timer);
            return "timers/create";
        }
        uiModel.asMap().clear();
        timer.persist();
        return "redirect:/timers/" + encodeUrlPathSegment(timer.getId().toString(), httpServletRequest);
    }

    @RequestMapping(params = "form", produces = "text/html")
    public String createForm(Model uiModel) {
        populateEditForm(uiModel, new Timer());
        return "timers/create";
    }

    @RequestMapping(value = "/{id}", produces = "text/html")
    public String show(@PathVariable("id") Long id, Model uiModel) {
        uiModel.addAttribute("timer", Timer.findTimer(id));
        uiModel.addAttribute("itemId", id);
        return "timers/show";
    }

    @RequestMapping(produces = "text/html")
    public String list(@RequestParam(value = "page", required = false) Integer page, @RequestParam(value = "size", required = false) Integer size, Model uiModel) {
        if (page != null || size != null) {
            int sizeNo = size == null ? 10 : size.intValue();
            final int firstResult = page == null ? 0 : (page.intValue() - 1) * sizeNo;
            uiModel.addAttribute("timers", Timer.findTimerEntries(firstResult, sizeNo));
            float nrOfPages = (float) Timer.countTimers() / sizeNo;
            uiModel.addAttribute("maxPages", (int) ((nrOfPages > (int) nrOfPages || nrOfPages == 0.0) ? nrOfPages + 1 : nrOfPages));
        } else {
            uiModel.addAttribute("timers", Timer.findAllTimers());
        }
        return "timers/list";
    }

    @RequestMapping(method = RequestMethod.PUT, produces = "text/html")
    public String update(@Valid Timer timer, BindingResult bindingResult, Model uiModel, HttpServletRequest httpServletRequest) {
        if (bindingResult.hasErrors()) {
            populateEditForm(uiModel, timer);
            return "timers/update";
        }
        uiModel.asMap().clear();
        timer.merge();
        return "redirect:/timers/" + encodeUrlPathSegment(timer.getId().toString(), httpServletRequest);
    }

    @RequestMapping(value = "/{id}", params = "form", produces = "text/html")
    public String updateForm(@PathVariable("id") Long id, Model uiModel) {
        populateEditForm(uiModel, Timer.findTimer(id));
        return "timers/update";
    }

    @RequestMapping(value = "/{id}", method = RequestMethod.DELETE, produces = "text/html")
    public String delete(@PathVariable("id") Long id, @RequestParam(value = "page", required = false) Integer page, @RequestParam(value = "size", required = false) Integer size, Model uiModel) {
        Timer timer = Timer.findTimer(id);
        timer.remove();
        uiModel.asMap().clear();
        uiModel.addAttribute("page", (page == null) ? "1" : page.toString());
        uiModel.addAttribute("size", (size == null) ? "10" : size.toString());
        return "redirect:/timers";
    }

    void populateEditForm(Model uiModel, Timer timer) {
        uiModel.addAttribute("timer", timer);
    }
} 
```

# android - 用于 Android 视频上传的 Facebook - 适用于一个应用程序而不是另一个应用程序

> ID：10189389
> 
> 赞同：0
> 
> 时间：2012-04-17T10:23:26.753
> 
> 标签：android, facebook, facebook-android-sdk

将视频上传到 Facebook 时遇到一个奇怪的问题...

我的代码基于这个答案：[Is Uploading Videos from an SD Card to Facebook possible with the Facebook SDK?](https://stackoverflow.com/questions/6908413/is-uploading-videos-from-an-sd-card-to-facebook-possible-with-the-facebook-sdk)

它适用于一个 Facebook 应用程序，但不适用于另一个。

我作为管理员拥有 2 个 Facebook 应用程序。它们都使用我的调试密钥哈希设置，并且它们都具有完全相同的设置。

我在代码中唯一更改的是应用 ID（第一个应用或第二个应用）。

这两个应用程序的行为是：

1.  授权成功
2.  上传视频的代码运行成功，上传视频后调用onComplete()。
3.  对于第一个应用程序（有效），视频出现在我的 Facebook 个人资料中。对于第二个，它没有。

同样，我所做的唯一更改是更改应用 ID，以便使用 2 个 facebook 应用中的每一个进行测试。

有什么见解吗？

更新

在下面回答了我自己的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:50:37.303

解决了。

有效的 facebook 应用程序是几个月前创建的。昨天创建了不起作用的 facebook 应用程序。

显然，在那段时间里，facebook 添加了一种新的权限——“upload_video”。即使是正常工作的应用程序也从未请求过该许可，但无论如何它都会以某种方式上传视频 - 可能是因为 facebook 的向后兼容性。

我发现这一点的方法是注意到即使 onComplete 回调也有一条消息，并且在该消息中是错误。我认为非常愚蠢的 SDK 行为 - 如果我有错误，为什么要调用 onComplete() 而不是 onFacebookError()？

# php - magento 连接到两个数据库

> ID：10189390
> 
> 赞同：3
> 
> 时间：2012-04-17T10:23:26.920
> 
> 标签：php, magento

我在magento中有问题。我想用magento连接两个数据库。一个数据库将是主数据库，另一个将用于商店。我不知道该怎么做。此时我的连接在文件 app/etc/local.xml .....我的 local.xml 如下请帮助 false [mysql4]]> 1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T13:40:22.697

可能有一个比我实现的更优雅的解决方案，但我的方法有效。我为 osCommerce 导入/导出模块执行此操作。

* * *

/httpdocs/app/etc/config.xml

```
 <!-- osCommerce db/read/write -->
        <oscommercedb>
            <connection>
                <host>localhost</host>
                <username>root</username>
                <password>pass</password>
                <dbname>oscommerce_database_name</dbname>
                <model>mysql4</model>
                <initstatements>SET NAMES utf8</initstatements>
                <type>pdo_mysql</type>
                <active>1</active>
            </connection>
        </oscommercedb>
        <oscommercedb_write>
            <connection>
                <use>oscommercedb</use>
            </connection>
        </oscommercedb_write>
        <oscommercedb_read>
            <connection>
                <use>oscommercedb</use>
            </connection>
        </oscommercedb_read>
        <!-- end osCommerce db --> 
```

* * *

这使您能够`oscommercedb`在模型中调用。上面的代码在`<resources>`块内。

现在让我们看一个模型。

* * *

/httpdocs/app/code/local/Company/Extension/Model/OsCustomers.php

```
class Company_Extension_Model_OsCustomers extends Mage_Core_Model_Abstract
{

protected $_name = 'customers'; // name of the table

/**
 * Returns rowset of tables for customers
 *
 * @return Zend_Db_Table_Rowset
 */
public function getAllOscommerceCustomers()
{
    $read = Mage::getSingleton('core/resource')->getConnection('oscommercedb');

    $stmt = $read->select();

    $stmt->from(array('c' => 'customers'))
         ->join(array('a' => 'address_book'), 'a.address_book_id = c.customers_default_address_id')
         ->joinLeft('zones', 'zones.zone_id = a.entry_zone_id')
         ->join('countries','a.entry_country_id = countries.countries_id', array('countries_iso_code_2'));

    return $read->fetchAll($stmt);
} 
```

* * *

如果您遇到特定问题，请告诉我。

# javascript - YUI：数据表中的按钮在排序后未呈现

> ID：10189392
> 
> 赞同：0
> 
> 时间：2012-04-17T10:23:33.593
> 
> 标签：javascript, yui, velocity

我正在使用 YUI（YAHOO 用户界面库）和 Velocity 开发一个网页，并且我在其中一列中设置了一个带有一些按钮的数据表。我的问题是，当我对任何列进行排序时，按钮不再呈现，即显示为简单的输入字段。这里是（简化的）代码的一部分：

```
#set($states=['valid','invalid','empty'])

var buttonsFormatter = function(elLiner, oRecord, oColumn, oData) {
  elLiner.innerHTML = '';
  #foreach($state in $states)
    elLiner.innerHTML = elLiner.innerHTML+'<input id="${state}Button-'+oRecord.getData("id")+'"/>';
  #end
};

var myColumnDefs = [
  {key:"change",
   label: "Actions",
   formatter: buttonsFormatter,
   sortable: true,
   resizeable: true},
];

// Then create datasource, datatable, etc...

// $comment is the object I use to build the datasource
// So here I loop over records to instantiate the buttons
#foreach($comment in $comments_arraylist)
  new YAHOO.widget.Button("validButton-"+$comment.getId(),
      {label:'<img src="$content.getURI("images/gc.gif")"/>',
       title:'Valid',
       onclick:{ fn:makeRequest,obj:[$comment.getId(),"Valid"]}
      }
  ); 
  new YAHOO.widget.Button("invalidButton-"+$comment.getId(),
      {label:'<img src="$content.getURI("images/rc.gif")"/>',
       title:'Invalid',
       onclick:{ fn:makeRequest,obj:[$comment.getId(),"Invalid"]}
      }
  ); 
  new YAHOO.widget.Button("emptyButton-"+$comment.getId(),
      {label:'<img src="$content.getURI("images/close.jpg")"/>',
       title:'Reset',
       onclick:{ fn:makeRequest,obj:[$comment.getId(),"null"]}
      }
  ); 
#end 
```

我也尝试在格式化程序函数中添加*新的 YAHOO.widget.Button...*声明，但没有更多成功。有人对我有想法吗？我不得不提一下，除了排序的这个问题，一切都很好。

谢谢

亚历克西斯

* * *

编辑：以这种方式修改按钮格式化程序功能无济于事：

```
var buttonsFormatter = function(elLiner, oRecord, oColumn, oData) {
  elLiner.innerHTML = '';
  #foreach($state in $states)
    elLiner.innerHTML = elLiner.innerHTML+'<input type="button" id="${state}Button-'+oRecord.getData("id")+'"/>';
  #end
  elLiner.innerHTML = elLiner.innerHTML+'<input type="button" id="testButton-'+oRecord.getData("id")+'"/>';
  new YAHOO.widget.Button("testButton-"+oRecord.getData("id"),
      {label:'<img src="$content.getURI("images/gc.gif")"/>',
       title:'test',
       onclick:{ fn:makeRequest,obj:[oRecord.getData("id"),"test"]}
      }
  ); 
}; 
```

如此创建的“测试”按钮永远不会被渲染，只是作为一个基本的空按钮输入出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T15:26:12.457

您的“buttonsFormatter”函数正在创建文本输入元素。我认为你需要在你在那里创建的元素上有一个 'type="button"' 属性。

我*想*我理解你为什么要调用新的 YAHOO.widget.Button，但你应该在格式化程序函数中这样做。

# ruby - Sinatra 会议成员“消失”

> ID：10189395
> 
> 赞同：4
> 
> 时间：2012-04-17T10:23:45.100
> 
> 标签：ruby, session, heroku, sinatra

我已经成功解决了会话成员不可用的问题，即使他们已设置并且想知道为什么会发生这种情况。我的情况可以描述为：

1.  Sinatra 应用程序使用`:session`.
2.  使用 oAuth 授权用户并在此过程中设置`:ret_url`会话成员，以便应用知道在身份验证后返回到哪里。
3.  服务器是 Cedar 堆栈上的独角兽（Heroku）

这在本地运行时非常有效，但`:ret_url`会话成员完全从 Heroku 的会话中消失了。我发现如果我删除了这段代码，它可以解决问题：

```
 before do
    cache_control :public, :must_revalidate, :max_age => 60
  end 
```

问题 1：我猜我的 cookie 在没有`:ret_url`值的情况下被缓存，这就是它被破坏的原因？

问题2：我在下面的路由条件代码中设置了会话成员，这是错误的地方吗？

```
 # redirect users to login if necessary
  set(:auth) do |access_token|      
    condition do

      if request.request_method == 'GET'
        session[:ret_url] = request.path_info 
      end

      redirect '/' unless user_logged_in?
    end
  end 
```

*我想使用缓存并且我的 cookie 仍然有效。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T22:23:46.893

一个名叫 Ari Brown（向 Ari 挥手）的小伙子，他不是这里的成员，但这个答案值得称赞，他指出了正确的解决方案，根据[Sinatra 常见问题解答](http://www.sinatrarb.com/faq.html#sessions)，不使用`enable :sessions`而是`use Rack::Session::Cookie`作为每

```
use Rack::Session::Cookie, :key => 'rack.session',
                           :domain => 'foo.com',
                           :path => '/',
                           :expire_after => 2592000, # In seconds
                           :secret => 'change_me' 
```

我已将此添加到我的`config.ru`中，一切都很好。

我还注意到在[这篇文章](https://stackoverflow.com/questions/6115136/in-a-sinatra-app-on-heroku-session-is-not-shared-across-dynos)中的替代建议`set :session_secret, 'change_me'`，实际上，通过环境变量来做到这一点，即：

```
$ heroku config:add SESSION_KEY=a_longish_secret_key 
```

然后在你的应用程序中

```
enable :sessions
set :session_secret, ENV['SESSION_KEY'] || 'change_me' 
```

显然，您也可以将环境变量策略与该`Rack::Session::Cookie`方法一起使用。这就是我采用的方式，因为它提供了更大的配置灵活性。

这些工作的原因是缓存控制器中间件将请求发送到多个服务器实例，并且没有设置会话秘密，它只是为每个服务器创建一个，从而中断会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T17:28:36.180

在不了解所有细节的情况下很难看到发生了什么，但有一条简单的规则您很可能会违反：不要在应该做某事的操作上使用 http 缓存（除了显示页面之外）。当 http 缓存打开时，您的浏览器甚至不会尝试重新加载页面并从浏览器缓存中呈现它。

Cookie 不会在任何地方缓存，cache_control 唯一要做的就是设置 CacheControl http 响应值

在您的情况下，您可以做的最好的事情是将具有无操作页面的路线列表添加到您的 before 块中：

```
before '/my/static/page' do
  cache_control :public, :must_revalidate, :max_age => 60
end 
```

很可能您将拥有非常有限的一组路由，您可以从这些路由中受益于 http 缓存

# c++ - 你如何使用带有 boost 格式的 CAtlStringW？

> ID：10189399
> 
> 赞同：0
> 
> 时间：2012-04-17T10:23:51.053
> 
> 标签：c++, visual-studio-2010, boost-format

我试过这个：

```
#include <iostream>
#include <boost\format.hpp>
#include <atlstr.h>

std::ostream& operator<<(std::ostream& os, const ATL::CAtlStringW& string)
{
    return os << string.GetString();
}

int _tmain(int argc, _TCHAR* argv[])
{
    CAtlStringW world = L"world";
    boost::wformat formatter(L"hello %s");
    formatter % world;
    std::wstring formatted = formatter.str();
    return 0;
} 
```

并格式化为“hello 004B54D8”，但我希望它是“hello world”。我尝试了一些变体，例如在命名空间中定义 operator<<。我错过了什么？operator<< 似乎没有被调用。

谢谢。

boost 格式文档提供了以下用于格式化自定义类型的示例：http: [//www.boost.org/doc/libs/1_49_0/libs/format/example/sample_userType.cpp](http://www.boost.org/doc/libs/1_49_0/libs/format/example/sample_userType.cpp)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:41:01.653

多哈。

我错过了'w's：

```
std::wostream& operator<<(std::wostream& os, const ATL::CAtlStringW& string)
{
    return os << string.GetString();
} 
```

# php - 从数据库中选择数据并更新它 PHP/PDO

> ID：10189401
> 
> 赞同：3
> 
> 时间：2012-04-17T10:23:54.470
> 
> 标签：php, select, pdo

我需要制作一个 PHP 代码来从服务器获取数据，更新它并将更新的数据回显给用户。我是 PHP 的初学者，所以我不知道该怎么做。这是我现在拥有的代码。

那么如何更改代码以使其更新数据？

```
<?php
include 'config.php';

$ID = $_GET['ID'] ;

$sql = "select * from table where ID = \"$ID\" and condition = false ";
// This is what I need the table to be updated "Update table where where ID = \"$ID\" set condition = true" ;

try {
    $dbh = new PDO("mysql:host=$dbhost;dbname=$dbname", $dbuser, $dbpass);  
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $stmt = $dbh->query($sql);  
    $data = $stmt->fetchAll(PDO::FETCH_OBJ);
    $dbh = null;
    echo '{"key":'. json_encode($data) .'}'; 
} catch(PDOException $e) {
    echo '{"error":{"text":'. $e->getMessage() .'}}'; 
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:22:37.120

一个想法是创建一个包含 pdo 连接的不同数据库连接文件，并在您的应用程序中重用它。关于如何做到这一点。

在`database.php`你可以这样做

```
try {
    $dbh = new PDO("mysql:host=$dbhost;dbname=$dbname", $dbuser, $dbpass);
    $dbh->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} catch(PDOException $e) {
    //catch the exception here and do whatever you like to.
} 
```

以及任何你想使用连接的地方

`require_once 'Database.php';`

以及一些使用 PDO 的示例 CRUD（创建、读取、更新、删除）。

```
//Create or Insert
$sth = $dbh->prepare("INSERT INTO folks ( first_name ) values ( 'Cathy' )");  
$sth->execute(); 
//Read or Select
$sth = $dbh->query('SELECT name, addr, city from folks'); 
//Update
$sth = $dbh->prepare("UPDATE tablename SET col = val WHERE key = :value");
$sth->bindParam(':value', $value);
$sth->execute();
//Delete
$dbh->query('DELETE FROM folks WHERE id = 1'); 
```

[您还应该研究命名和未命名占位符，以逃避 SQL 注入等。您可以阅读更多关于 PDO 的内容，这里](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)有 nettuts 提供的非常容易理解的教程

希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:39:30.367

尝试这个。我认为这与您正在寻找的内容相符：

```
$query = "select * from table where ID = \"$ID\" and condition = false ";
$query_result = @mysql_query($query);
$query_row = mysql_fetch_assoc($query_result);
$update_query = "UPDATE table SET condition = true WHERE ID = {$row['ID']};";
if( @mysql_query($update_query) ) {
    echo "Update succeeded!";
} else {
    echo "Update failed!";
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-17T12:03:07.290

```
<?php

$ID     = 1;

try {
        $db = new PDO("mysql:host=$dbhost;dbname=$dbname", $dbuser, $dbpass);
        $select_statement = $db->prepare('select * from table1 where id = :id and `condition` = false');
        $update_statement = $db->prepare('update table1 set `condition` = true where id = :id');
        $select_statement->execute(array(':id' => $ID));
        $results = $select_statement->fetchAll();
        $update_statement->execute(array(':id' => $ID));
        echo '{"key":' . json_encode($results) .'}';

} catch(PDOException $e) {
    echo '{"error":{"text":'. $e->getMessage() .'}}';
}

?> 
```

# javascript - javascript - 生成一个新的随机数

> ID：10189408
> 
> 赞同：3
> 
> 时间：2012-04-17T10:24:06.297
> 
> 标签：javascript

我有一个数字在 1-3 之间的变量。

我需要在 1-3 之间随机生成一个新数字，但它不能与最后一个相同。

它循环发生数百次。

这样做最有效的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T10:37:23.647

**愿模运算的力量帮助你！**

此函数使用模运算符执行您想要的操作：

```
/**
 * generate(1) will produce 2 or 3 with probablity .5
 * generate(2) will produce 1 or 3 with probablity .5
 * ... you get the idea.
 */
function generate(nb) {
    rnd = Math.round(Math.random())
    return 1 + (nb + rnd) % 3
} 
```

如果要避免函数调用，可以内联代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T10:32:50.910

这是一个解决您的问题的 jsFiddle：http: [//jsfiddle.net/AsMWG/](http://jsfiddle.net/AsMWG/)

我创建了一个包含 1,2,3 的数组，首先我选择任何数字并将其与最后一个元素交换。然后我只从位置 0 和 1 中挑选元素，并将它们与最后一个元素交换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T10:39:38.090

```
var x = 1; // or 2 or 3
// this generates a new x out of [1,2,3] which is != x
x = (Math.floor(2*Math.random())+x) % 3 + 1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T10:28:27.923

您可以使用 javascript 内置的随机数生成器随机生成数字。你需要使用[`Math.random()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Math/random).

如果你正在[`push()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push)进入一个数组，你总是可以检查之前插入的一个是否是相同的数字，因此你可以重新生成这个数字。这是一个例子：

```
var randomArr = [];
var count = 100;
var max = 3;
var min = 1;

while (randomArr.length < count) {
    var r = Math.floor(Math.random() * (max - min) + min);

    if (randomArr.length == 0) {
        // start condition
        randomArr.push(r); 
    } else if (randomArr[randomArr.length-1] !== r) { 
        // if the previous value is not the same 
        // then push that value into the array
        randomArr.push(r);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T10:32:38.580

代码已经过测试，它可以满足您的需求。

```
var RandomNumber = {

    lastSelected: 0,

    generate: function() {

        var random = Math.floor(Math.random()*3)+1;

        if(random == this.lastSelected) {
            generateNumber();
        }
        else {
            this.lastSelected = random;
            return random;
        }
    }
}

RandomNumber.generate(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-17T10:36:45.483

正如 Widor 评论的那样，生成这样一个数字相当于生成一个概率为 0.5 的数字。所以你可以尝试这样的事情（未经测试）：

```
var x; /* your starting number: 1,2 or 3 */
var y = Math.round(Math.random()); /* generates 0 or 1 */

var i = 0;
var res = i+1;
while (i < y) {
   res = i+1;
   i++;
   if (i+1 == x) i++;
} 
```

# mysql - 选定的列会影响 MySQL 结果中的行顺序吗？

> ID：10189409
> 
> 赞同：2
> 
> 时间：2012-04-17T10:24:08.883
> 
> 标签：mysql, select

我必须进行“相同”的查询，除了在一个查询中我只从表中检索一列，而在另一个查询中我从同一个表中检索几列。否则一切都是一样的。由于某种原因，两个查询的结果中的顺序并不完全相同。怎么会这样？

这是两个查询：

```
SELECT b.bruker_id, b.poeng_j + b.poeng_ss + b.poeng_u + b.poeng_n + b.poeng_s + b.poeng_f + b.poeng_v AS orderColumn
FROM brukere b
JOIN soknad s ON b.bruker_id = s.bruker_id
WHERE s.t_start_y =2013
AND s.t_start_s =0
AND YEAR( NOW( ) ) - b.aar >30
AND YEAR( NOW( ) ) - b.aar <40
ORDER BY orderColumn DESC 
LIMIT 10 ;

SELECT b.bruker_id, b.poeng_j + b.poeng_ss + b.poeng_u + b.poeng_n + b.poeng_s + b.poeng_f + b.poeng_v AS orderColumn, b.etternavn, b.fornavn, YEAR( NOW( ) ) - b.aar AS alder, b.poeng_j, b.poeng_ss, b.poeng_u, b.poeng_n, b.poeng_s, b.poeng_f, b.poeng_v, b.kjonn
FROM brukere b
JOIN soknad s ON b.bruker_id = s.bruker_id
WHERE s.t_start_y =2013
AND s.t_start_s =0
AND YEAR( NOW( ) ) - b.aar >30
AND YEAR( NOW( ) ) - b.aar <40
ORDER BY orderColumn DESC 
LIMIT 10 ; 
```

第一个查询返回：

```
+-----------+-------------+
| bruker_id | orderColumn |
+-----------+-------------+
|        92 |          29 |
|       271 |          28 |
|       645 |          28 |
|       323 |          27 |
|       487 |          27 |
|        58 |          27 |
|        76 |          27 |
|       289 |          26 |
|       759 |          26 |
|       128 |          26 |
+-----------+-------------+ 
```

第二个查询返回：

```
+-----------+-------------+-----------+----------+-------+------------+------------------+------------------+-------------+-----------+-----------------+------------+-------+
| bruker_id | orderColumn | etternavn | fornavn  | alder | poeng_j | poeng_ss | poeng_u | poeng_n | poeng_s | poeng_f | poeng_v | kjonn |
+-----------+-------------+-----------+----------+-------+------------+------------------+------------------+-------------+-----------+-----------------+------------+-------+
|        92 |          29 | Tonheim   | Kine     |    33 |          4 |               16 |                3 |           0 |         0 |               6 |          0 |     1 |
|       645 |          28 | Saue      | Laila    |    36 |          8 |               16 |                0 |           0 |         0 |               4 |          0 |     1 |
|       271 |          28 | Grønnevik | Karl     |    38 |          8 |               16 |                0 |           0 |         0 |               4 |          0 |     0 |
|        76 |          27 | Tornes    | Kristina |    39 |          5 |               16 |                0 |           0 |         0 |               6 |          0 |     1 |
|       487 |          27 | Smestad   | Tonje    |    34 |          8 |               16 |                0 |           0 |         0 |               0 |          3 |     1 |
|        58 |          27 | Torjussen | Linn     |    35 |          8 |               16 |                0 |           0 |         0 |               0 |          3 |     1 |
|       323 |          27 | Gillebo   | Tore     |    31 |          5 |               16 |                0 |           0 |         0 |               6 |          0 |     0 |
|       759 |          26 | Sætren    | Grete    |    36 |          4 |               16 |                0 |           0 |         0 |               6 |          0 |     1 |
|       289 |          26 | Gjersøe   | Torbjørn |    37 |          4 |               16 |                0 |           0 |         0 |               6 |          0 |     0 |
|       339 |          26 | Gjøen     | Fredrik  |    34 |          4 |               16 |                0 |           0 |         0 |               6 |          0 |     0 |
+-----------+-------------+-----------+----------+-------+------------+------------------+------------------+-------------+-----------+-----------------+------------+-------+ 
```

如您所见，顺序不一样...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:35:49.277

如果先向每个 SELECT 添加一列

```
b.poeng_j + b.poeng_ss + b.poeng_u + b.poeng_n + b.poeng_s + b.poeng_f + b.poeng_v AS orderColumn 
```

然后将查询更改为`ORDER BY orderColumn`

然后，您将能够清楚地*看到*它在订购什么。然后您可能会看到一些行在 orderColumn 中具有相同的值，因此如果没有第二个 ORDER BY 条件，排序可能会不一致，即`ORDER BY orderColumn, bruker_id`

使用你的第二个查询我最终会得到

```
SELECT 
    b.bruker_id, 
    b.etternavn, 
    b.fornavn, 
    YEAR( NOW( ) ) - b.aar AS alder, 
    b.poeng_j, b.poeng_ss, 
    b.poeng_u, 
    b.poeng_n, b.poeng_s, 
    b.poeng_f, 
    b.poeng_v, 
    b.kjonn,
    (b.poeng_j + b.poeng_ss + b.poeng_u + b.poeng_n + b.poeng_s + b.poeng_f + b.poeng_v) AS orderColumn
FROM brukere b
JOIN soknad s ON b.bruker_id = s.bruker_id
WHERE s.t_start_y =2013
    AND s.t_start_s =0
    AND YEAR( NOW( ) ) - b.aar >30
    AND YEAR( NOW( ) ) - b.aar <40
ORDER BY orderColumn DESC, b.bruker_id ASC 
LIMIT 10 ; 
```

在您的示例数据中，bruker_id 645 和 271 的 orderColumn 值都为 28。

# java - 在java中读取上传的文件名

> ID：10189415
> 
> 赞同：2
> 
> 时间：2012-04-17T10:24:41.790
> 
> 标签：java, file-upload

我已经在java中上传了一个文件，我正在尝试这样的方法来获取上传的文件名

```
private UploadedFile uploadedFile;
System.out.println("File name: " + uploadedFile.getName()); 
```

并将文件名及其相对于计算机的路径打印为：

```
File name: E:\Grievances Project\Feb 2012 data\22439-29-02-2012\22439-29-02-2012.xls 
```

我如何才能只获取上传的文件名，而不管它是从哪里上传的，例如：

```
File name: 22439-29-02-2012.xls 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T10:27:52.883

```
System.out.println(new File(
    uploadedFile.getName()).getName()); 
```

您还可以查看`String`诸如`lastIndexOf("path separator")`and之类的方法`substring(int,int)`，以更通用的方式处理它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T10:47:13.593

这取决于浏览器。所以最好使用 sub String 方法。

```
String fileName="E:/Grievances Project/Feb 2012 data/22439-29-02-2012/22439-29-02-2012.xls";
System.out.println(fileName.substring((file.lastIndexOf("/")+1), fileName.length())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T10:31:20.110

```
import java.io.File;

......

System.out.println("File name: " + (new File(uploadedFile.getName())).getName()); 
```

或者，简单地说，使用`getName()`来自 的方法`java.io.File`。（我认为您`getName()`上面的方法来自您自己的`UploadedFile`班级？）

# c# - 有一个带有 ShowInTaskbar、Topmost 的窗口，还有一个通知区域图标

> ID：10189420
> 
> 赞同：4
> 
> 时间：2012-04-17T10:24:51.077
> 
> 标签：c#, wpf, winapi

我有一个程序希望能够处理所有三种状态：

1.  不显示在任务栏中，仅充当 Windows 声音、网络程序等小部件
2.  显示在任务栏中 - 但不是最顶层。该窗口仍将显示通知区域图标，并且仍应以与＃1 相同的方式运行，但也会在任务栏中显示该窗口。
3.  显示在最顶部的任务栏中。窗口的行为应该与 #2 相同，但现在窗口将显示在最顶部。注意：它应该仍然能够被最小化，就像单击任务栏图标最小化程序一样。

这些是我的标准，我一直在努力让它们一起很好地工作，但我似乎无法解决最后几个调整。＃1很好 - 我已经很容易地解决了这个问题。#2 和 #3 会导致更多问题。

我的第一个问题是，Windows 如何处理用户单击任务栏图标以使其最小化/切换回正常状态？因为我更喜欢用#2 和#3 来模拟它。

对于#1，我目前只需将窗口设置`Window.Visibility`为`Visibility.Hidden`. 并显示窗口，调用`Show()`然后`Activate()`。

就像我说的，对于#2 和#3，我想复制 Windows 在用户单击任务栏图标时所做的事情。我可以这样做吗？还是我必须找到另一种方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:55:57.640

1-这称为缩略图按钮 ![在此处输入图像描述](../Images/d20e010ff5de9a83bec58239a506cf58.png) ![在此处输入图像描述](../Images/7b63bf66e4cc4bd57e07750704c355c0.png)

您可以查看[http://elegantcode.com/2010/12/17/wpf-adding-thumbnail-buttons-to-windows-7-task-bar/](http://elegantcode.com/2010/12/17/wpf-adding-thumbnail-buttons-to-windows-7-task-bar/)或[http://shareourideas.com/2010/12/19/ windows-7-taskbar-thumbnail-buttons-in-wpf/](http://shareourideas.com/2010/12/19/windows-7-taskbar-thumbnail-buttons-in-wpf/)或[http://msdn.microsoft.com/en-us/library/ff699128.aspx](http://msdn.microsoft.com/en-us/library/ff699128.aspx)

2- Window 类中有一个名为 TopMost 的属性。

3-用于任务栏图标

![在此处输入图像描述](../Images/d624daf8ddee1b4d9381b5e1d9e06d03.png)你可以使用这个库，它易于使用且功能强大[http://www.codeproject.com/Articles/22876/WPF-Taskbar-Notifier-A-WPF-Taskbar-Notification-Wi](http://www.codeproject.com/Articles/22876/WPF-Taskbar-Notifier-A-WPF-Taskbar-Notification-Wi)

4-最小化和最大化你可以简单地使用

```
this.WindowState = FormWindowState.Maximized; 
```

* 这就是您根据需要创建应用程序所需的所有信息，如果您遇到任何问题，请仔细阅读文章，如果问题仍然存在，请准确找到问题所在并再次询问。

希望这有帮助...

# jquery - 在视图站点内为 ul li.active 设置动画

> ID：10189421
> 
> 赞同：1
> 
> 时间：2012-04-17T10:24:51.620
> 
> 标签：jquery, events, animation, html-lists

我有这样的分页

```
<div> ( =400px )
<ul> ( =2000px )
<li>1<div>1</div></li>
<li>2<div>2</div></li>
<li>3<div>3</div></li>
..
</ul>
</div> 
```

分页最多为 100，宽度约为 2000 像素。但是，该 div 只有 400px 宽度，`overflow:hidden`这意味着只有一定数量的`li`可见。我还有两个按钮做左右动画，这样访问者可以左右“滑动”分页：

```
$(".right").live('click', function(){
  $(ul).animate({"left": "-=140px"}, "fast");
});

$(".left").live('click', function(){
  $(ul).animate({"left": "+=140px"}, "fast");
}); 
```

问题是在某个时候“活动”（类）分页数是看不见的（原因在这个问题中并不重要）

`li.active`无论 Jquery 事件或文档准备好，我都想控制低谷。我希望`li.active`始终在 400px div 中可见。所以这意味着 ul 会相对于 向左或向右移动，这样 ul 就`li.active`不会`li.active`出现在“隐藏”的部分（溢出：隐藏）

我希望我的问题很清楚，我不能将所有代码都发布到它的大尺寸。（这只会使事情复杂化..）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:42:39.460

好的，我唯一的猜测是在“活动”类上添加一个 CSS 规则`position:absolute;`

**编辑 ：**

如果您正在寻找，请在此处尝试[此解决方案。](http://jsfiddle.net/JVXpu/12/)我希望它有帮助！

# c++ - Boost.Python 和 std::shared_ptr 的多态行为

> ID：10189426
> 
> 赞同：3
> 
> 时间：2012-04-17T10:25:24.840
> 
> 标签：c++, c++11, polymorphism, shared-ptr, boost-python

我想知道当使用`A`而不是?`B``std::shared_ptr``boost::shared_ptr`

```
struct A
{
    virtual ~A() {}
};

struct B : A
{
    B() {}
    virtual ~B() {}
};

void f(const std::shared_ptr<A>& ptr)
{}

BOOST_PYTHON_MODULE(test)
{
    class_<A, boost::noncopyable>("A", no_init);

    class_<B, std::shared_ptr<B>, bases<A>>("B")
        .def(init<>());

    def("f", f);
} 
```

我知道`boost::get_pointer`必须为 定义该方法`std::shared_ptr`，因此我确保在 a 之前存在以下行`#include <boost/python.hpp>`：

```
namespace boost {
template<class T> const T* get_pointer(const std::shared_ptr<T>& p)
{
    return p.get();
}

template<class T> T* get_pointer(std::shared_ptr<T>& p)
{
    return p.get();
}
} // namespace boost 
```

现在，在python中我尝试：

```
>>> from test import *
>>> b = B()
>>> f(b)
Traceback (most recent call last):
  File "<console>", line 1, in <module>
ArgumentError: Python argument types in
    test.f(B)
did not match C++ signature:
    f(std::shared_ptr<A>) 
```

注意：上面的代码适用于`boost::shared_ptr`，但我想坚持使用 C++11 类型。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T20:57:48.363

我曾经`std::shared_ptr`使用 boost::python IIRC，`get_pointer`在你写的时候使用。（相关评论在[这里](https://stackoverflow.com/a/6569028/761090)）。我的猜测是你需要有，`class_<A,std::shared_ptr<A>,...>`因为这是你的函数作为参数的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:02:41.683

Boost.Python 内置了特殊的魔法来识别 boost::shared_ptr。它目前无法识别 std::shared_ptr。现在，只需皱眉并使用 boost::shared_ptr。

# ruby-on-rails - 如何在 Factory Girl Rails/Cucumber 中为 HABTM 自引用添加许多子对象？

> ID：10189428
> 
> 赞同：2
> 
> 时间：2012-04-17T10:25:26.513
> 
> 标签：ruby-on-rails, ruby-on-rails-3, factory-bot

在`Project`模型中：

```
has_and_belongs_to_many :subprojects,
  :join_table => "project_projects" 
```

在 Cucumber 功能文件中：

```
Given the following projects exist:
| name   | type |
| first  | foo  |
| second | bar  |
| third  | baz  |
| fourth | bar  |
Given the following subprojects exist:
| subproject | superproject |
| first      |              |
| second     | first        |
| third      | first        |
| third      | second       |
...
And I add a superproject "second" to "fourth"
And I add a superproject "third" to "fourth" 
```

换句话说，`third`有*两个*父级，`first`并且`second`和`fourth`最初*没有*父级，但是为了单个场景的目的添加了一些父级。我们如何在 Factory Girl Rails 中为此创建工厂？我们已经有一个`:project`工厂，但是没有`Project_project`模型，原因很明显，而且我们显然不想在每次添加关系时都创建新项目——我们需要**重用子项目<->超级项目工厂中的现有对象。**

# c# - 如何提取 Linq 表达式的结果？

> ID：10189429
> 
> 赞同：0
> 
> 时间：2012-04-17T10:25:31.373
> 
> 标签：c#, linq, c#-4.0

我的结果表达式是

```
 var result = dtFields.AsEnumerable().Join(dtCDGroup.AsEnumerable(),
                                fieldList=>fieldList.Field<string>("CDGroupID"),
                                cd=>cd.Field<string>("CDGroupID"),
                                (fieldList,cd) => new 
                                {
                                    FieldID = fieldList.Field<string>("FieldID"),
                                    Name = cd.Field<string>("Name"),
                                    CDCaption = fieldList.Field<string>("CDCaption"),
                                    Priority = ((cd.Field<string>("Priority") == null) ? 99 : cd.Field<int>("Priority")),
                                    fldIndex = fieldList.Field<string>("fldIndex")
                                }).OrderBy(result => result.Priority).ThenBy(result => result.fldIndex); 
```

将上述结果转换为数组或列表会引发无效的转换异常。如何提取上述表达式的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:29:00.327

Add .ToArray() or .ToList() call respectively

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:41:54.720

尝试添加一个强类型：

```
public class NewModule
{
    public int FieldID { get; set; }
    public string Name { get; set; }
    public string CDCaption { get; set; }
    public int Priority { get; set; }
    public int fldIndex { get; set; }
} 
```

而不是匿名类型，那么您可以`ToList<NewModule>()`像这样使用：

```
var result = dtFields.AsEnumerable().Join(dtCDGroup.AsEnumerable(),
                            fieldList=>fieldList.Field<string>("CDGroupID"),
                            cd=>cd.Field<string>("CDGroupID"),
                            (fieldList,cd) => new NewModule
                            {
                                FieldID = fieldList.Field<string>("FieldID"),
                                Name = cd.Field<string>("Name"),
                                CDCaption = fieldList.Field<string>("CDCaption"),
                                Priority = ((cd.Field<string>("Priority") == null) ? 99 : cd.Field<int>("Priority")),
                                fldIndex = fieldList.Field<string>("fldIndex")
                            }).OrderBy(result => result.Priority)
                            .ThenBy(result => result.fldIndex)
                            .ToList<NewModule>(); 
```

# c# - 使用正则表达式匹配但不包含在结果中

> ID：10189437
> 
> 赞同：5
> 
> 时间：2012-04-17T10:25:59.750
> 
> 标签：c#, regex

我正在尝试匹配正则表达式中的一个组，但我不希望该组出现在最终结果中。

例如：

**`((kl(\.)?|at)?`**`([0-1][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?)`

运行上面的表达式`at 12:25`应该返回`12:25`。

有没有办法做到这一点？

我尝试使用：

`(?:((kl(\.)?|at)? )([0-1][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?)`

但这没有区别。

然后我尝试了

`(?<!(?:((kl(\.)?|at)? )([0-1][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?)`

但这返回了一个空结果。

我在 C# 中使用表达式。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T10:30:43.620

非捕获组（未在匹配组中找到）表示为**(?:)**。所以，

```
(?:(?:kl(?:\.)?|at)?([0-1][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?) 
```

但是您的正则表达式似乎从一开始就结构错误。你没有记录时间。

# ruby-on-rails - Rspec 与 ActiveRecord::AssociationTypeMismatch "x" 预期下降，在运行所有规范时得到 "x"；但不是分开时

> ID：10189438
> 
> 赞同：3
> 
> 时间：2012-04-17T10:26:01.210
> 
> 标签：ruby-on-rails, rspec, factory-bot

我是该项目的新手，有一些规范覆盖，当我运行所有规范时，所有比较都失败，预期相同的 ActiveRecord::AssociationTypeMismatch “x”，得到“x”，例如：

> ActiveRecord::AssociationTypeMismatch: 预期用户（#103950560），得到用户（#107825100）

有一个规范，当被排除在外时，一切正常。单独运行时本身工作正常。

我不能在这里发布它的内容我猜虽然 8(

cache_classes = true 解决了这个问题。

我在 Mac 上的同事没有这个错误，而我和几个在 Ubuntu 上的人有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T13:29:13.200

我遇到了同样的问题，我已经更新`factory_girl_rails`到最新版本， `factory_girl`从`2.6.4`to 升级`3.2.0`并修复它！

# iphone - xcode 在特定的线、视图或点开始模拟

> ID：10189440
> 
> 赞同：0
> 
> 时间：2012-04-17T10:26:08.627
> 
> 标签：iphone, ios-simulator

这不是关于代码的问题，有可能吗？因为我有一个有很多观点的项目，而且测试并不快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:30:51.470

您可以在根控制器中设置不同的视图
`-applicationDidFinishLaunching:withOptions:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:53:08.727

它可能，但在某些视图中，您会遇到问题，因为您的某些视图基于未加载的视图。

顺便说一句，这里是代码

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
             {
            self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

            self.YourviewController = [[[self.YourviewController alloc] initWithNibName:@"self.YourviewController" bundle:nil] autorelease];

            self.window.rootViewController = self.YourviewController;

            [self.window makeKeyAndVisible];

            return YES; 
```

}

# web-services - @webmethod - 不将该方法公开为 web 服务 (JAX-WS)

> ID：10189441
> 
> 赞同：0
> 
> 时间：2012-04-17T10:26:13.843
> 
> 标签：web-services, wsdl, jax-ws

我有一个无状态会话 bean，它作为 web 服务公开。有两种方法，并且都有@webmethod 注释。但是，只有一种方法公开为 web 服务。谁能指出这种行为的原因，请在下面找到代码：

```
@WebService(portName = "interfaceSoapHTTPPort", serviceName = "interfaceService", targetNamespace = "http://com.demo.service/interfaceservice", endpointInterface = "com.demo.service.interfacePortType")
@SOAPBinding(style = SOAPBinding.Style.DOCUMENT)
@Stateless(mappedName = "InterfaceBean")

public class InterfaceBean {
    @PostConstruct
    @PostActivate
    public void initializeBean() {

    }

    @WebMethod
    public void processPathEvent(XngEvent pathXngEvent) throws WSException {

    }   

    @WebMethod
    public void portAssignmentUpdate(WSHeader wsHeader,
            PortAssignmentUpdateRequest portAssignmentUpdateRequest,
            Holder<WSResponseHeader> wsResponseHeader,
            Holder<PortAssignmentUpdateResponse> portAssignmentUpdateResponse)
            throws WSException {

    }
} 
```

只有 portAssignmentUpdate 方法被暴露为 webservice，而不是 processPathEvent 方法。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T18:40:43.993

我能够解决这个问题。

我们在@webservice 注释中设置了“endpointInterface”属性。我忘记将 processPathEvent() 方法添加到此接口。因此，即使添加了 @webmethod 注释，该方法也没有公开。

# assembly - ldr 中相同的源和目标寄存器

> ID：10189442
> 
> 赞同：2
> 
> 时间：2012-04-17T10:26:19.733
> 
> 标签：assembly, arm

`ldr r0,[r0]`在 ARM 汇编中这样做是否合法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T17:59:31.013

如有疑问，请始终参阅 ARM 体系结构参考手册，该手册可在 arm.com 上找到。它说：

```
The destination register. The SP can be used. The PC can be used, provided the
instruction is either outside an IT block or the last instruction of an IT block.
If the PC is used, the instruction branches to the address (data) loaded to the PC.
In ARMv5T and above, this branch is an interworking branch, see Pseudocode details of
operations on ARM core registers on page A2-12. 
```

它并没有说目标寄存器不能与基址寄存器相同。即，答案是肯定的，它们可以相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T10:34:52.420

是的，它将获取 r0 指向的值，并用它加载寄存器 r0。如有疑问，您可以使用模拟器进行测试。我使用[VBA](http://vba.ngemu.com/) GBA 仿真器，尽管它是 GBA 特定的，但它是一个很好的 ARM 仿真器。要了解 GBA 编程的基础知识以便进行此类测试，请访问[本](http://www.coranac.com/tonc/text/asm.htm)教程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T17:48:34.923

从 ARMv4 开始，该编码当然对 arm 和 thumb 指令集都有效。

查看您感兴趣的系列的 ARM ARM（ARM 架构参考手册）（http://infocenter.arm.com）。在这种情况下，ARM7 是 ARMv4，它与 ARMv5 ARM（曾经是原始并且只有 ARM ARM，它们被分成单独的 ARM ARM）。

你正在寻找这样的东西：

```
if ConditionPassed(cond) then
Rd = (Rm * Rs)[31:0]
if S == 1 then
N Flag = Rd[31]
Z Flag = if Rd == 0 then 1 else 0
C Flag = unaffected in v5 and above, UNPREDICTABLE in v4 and earlier
V Flag = unaffected 
```

对于 mul 或这个

```
Specifying R15 for register <Rd>, <Rm>, or <Rs> has UNPREDICTABLE results. 
```

或这个

```
Operand restriction: Specifying the same register for <Rd> and <Rm> was previously described as producing UNPREDICTABLE results. There is no restriction in ARMv6, and it is believed all relevant ARMv4 and ARMv5 implementations do not require this restriction either, because high performance multipliers read all their operands prior to writing back any results. 
```

对于 ARMv4/5 手册中的 LDR 指令：

操作数限制 如果指定基址寄存器回写，并且为 和 指定相同的寄存器，则结果是不可预测的。

我认为这意味着这个指令

```
ldr r0,[r0,#+/-offset_12]! 
```

是不可预测的，因为您正在告诉指令将加载值和计算出的地址保存到 r0，只有一个可以赢，听起来像是在折腾。没有！最后，写入 r0 的唯一内容是加载的值。并且没有关于限制的评论（在原始 ARM ARM 的 rev I 中，回到印刷版的 ARM ARM 和 E 的 rev B 和 C，在这方面都各不相同，这就是为什么我认为arm 使用术语“相关”）。对于我在上面剪切和粘贴的 mul。

拇指指令不对限制或不可预测的行为发表评论。

现在，如果您在用 ARM7 标记此内容时指的是 ARMv7，请查看 ARMv7 手册之一

对于 ARMv7-AR 手册中的 ARMv7 相同的问题：

```
LDR<c> <Rt>, [<Rn>, #+/-<imm12>]!
if wback && n == t then UNPREDICTABLE; 
```

除此和使用 r15 之外，以这种方式使用指令没有任何限制。

# jquery - Jquery/Magento - 触发选择更改

> ID：10189444
> 
> 赞同：0
> 
> 时间：2012-04-17T10:26:28.733
> 
> 标签：jquery, magento

我的 magento 商店中有一些可配置的产品。

当我选择一个可配置的选项（比如颜色）时，下一个选择会基于此更新。

但是，我需要以编程方式发生这种情况，所以我使用 Jquery 来自动更改选项。

```
$j(selectbox).change(); // called after updating the select 
```

然而，这不会触发下一个选择被填充，尽管手动进行。我不知道如何通过 Jquery 做到这一点。

我也试过：

```
$j(selectbox).trigger('change'); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:39:23.283

如果我理解正确，也许可以这样尝试： $(selectbox).css("color","#fff"); 这会将选择框颜色更改为白色

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:20:41.203

我继续使用 event.simulate.js，显然 jquery trigger() 不允许我做我想做的事

# javascript - 在我的页面中包含 javascript 文件

> ID：10189447
> 
> 赞同：3
> 
> 时间：2012-04-17T10:26:39.133
> 
> 标签：javascript

我在我的网页中使用了许多（几乎 15 个）javascript 文件。包含所有这些文件的最佳方式是什么？

只是在底部，还是应该使用其他一些可以更快地加载 javascript 的技术？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:28:27.163

你可以合并和缩小它们。[YUI Compressor](http://developer.yahoo.com/yui/compressor/)可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:37:34.587

您可以考虑使用**并行/非阻塞**javascript 加载器。

以下是一些可以为您做到这一点的优秀库..

[http://headjs.com/](http://headjs.com/)

[http://requirejs.org/](http://requirejs.org/)

[http://labjs.com/](http://labjs.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T11:43:12.533

Google Closure Compiler 有一个方便的 web api，用于合并和缩小所有 js。 [https://developers.google.com/closure/compiler/docs/api-ref](https://developers.google.com/closure/compiler/docs/api-ref)

您可以放置​​一个带有直接链接到 api 的脚本标记。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T19:42:06.607

我还没有完全掌握实现这一切，但我发现服务器可以自动进行大量的缩小和连接，我从阅读 HTML5 样板和相关联的（注释良好的）.htaccess 文件中学到了很多文档。

Modernizr 还具有异步加载器功能，并且有足够的文档记录，当我无法弄清楚 require.js 时，我能够让它工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T03:02:15.250

您可以使用脚本加载器库，也可以自己完成。

# 在哪里包含脚本以及浏览器如何加载资源

始终位于结束标签之前的底部`<body>`，以增强用户体验。它确保首先呈现页面内容，从而给人一种页面加载速度更快的印象。

浏览器运行单线程，将从上到下处理页面内容，如果它发生在资源上，它首先必须检索资源，处理它，然后只继续页面上的下一个标签。由于我们通常希望等待 DOM 完成加载，因此无论如何在运行任何脚本之前，这种策略总是双赢的。

# 大小事项

对于生产，您希望确保所有脚本都被最小化，无论您将采用何种策略来加载它们（更小的尺寸 == 更少的下载 == 更快）

# 正确的顺序

最重要的始终是依赖顺序，如果我们调用一个函数或访问一个变量，而浏览器不知道它，脚本就会失败。您要确保仅在它们所依赖的任何脚本之后才包含脚本。因此，首先要做的是确定您需要在浏览器中包含和引入功能的顺序。

# 如何在页面中包含脚本

只有一种方法可以在页面中包含脚本（不推荐使用同源 ajax/eval），那就是通过`<script>`标签。

`<script>`创建标签只有两种方法：

1.  静态位于 html 或
2.  使用 JavaScript 动态添加。

## 静态添加的脚本

由于我们知道我们需要包含脚本的顺序，我们可以像这样一个接一个地添加它们

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.5.2/jquery.tablesorter.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.5.2/jquery.tablesorter.widgets.min.js"></script> 
```

## 动态添加的脚本

有三种方法可以有效地在 dom 中动态创建脚本标签，我们将对此进行探索。这些当然不是唯一的方法......

### 文档.write

write 方法将追加到现有的 dom。

```
document.write('<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>'); 
```

但是现在我们遇到了一个问题，因为没有办法告诉脚本已经完成加载，因为我们必须等到它完成才能加载下一个或调用那里定义的东西。

### 文档.createElement

createElement 方法创建一个 dom 元素，我们可以将它插入到我们选择的 dom 中的任何位置。以下示例检查 jQuery 是否存在或创建一个`<script>`元素来获取它。无论如何，函数 ready_go 被调用，我们应该有 jQuery。

```
(function() {
    if (!window.jQuery) {
        var jq = document.createElement('script');
        jq.type = 'text/javascript';
        jq.async = true;
        jq.src = 'http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js'
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(jq, s);

        jq.onreadystatechange = jq.onload = ready_go;
    } else ready_go();
})(); 
```

### jQuery.getScript

由于我们现在有了 jQuery，我们不必费力地做事，getScript 将脚本 url 作为第一个参数，并在脚本完成后将函数作为第二个参数调用。

```
function ready_go() {
    $.getScript('http://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.5.2/jquery.tablesorter.min.js', function () {
         // script is done loading we can include the next
         $.getScript('http://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.5.2/jquery.tablesorter.widgets.min.js', function () {
             // script is done loading we can include the next or start using our stuff
         });
    });
} 
```

# 从哪里获取脚本？

您要么想从公共 CDN 获取脚本，要么自己托管它们。需要牢记的一个重要概念是，与任何其他资源一样，脚本会被浏览器缓存，您无需重复下载相同的脚本。

## 来自内容交付网络的脚本

CDN 的优势是双重的；

1.  你离用户更近了，因为 CDN 由分布在世界各地的 POP 组成，即使你调用一个 url，服务器响应也可能不同
2.  如果您的用户在访问我的网站时已经从 google 的 CDN 获得了 jQuery，那么许多网站可能会使用相同的 CDN，他的浏览器会在您请求时简单地使用其已经拥有的缓存副本。

## 从源（您的服务器）提供的脚本

我同意@Mario 和@Xharze 建议的策略，每页包含18 个脚本。

在脚本可用但其余部分使用 CDN。

将所有脚本连接在一起，记住应用相同的依赖顺序，并缩小它们。

拥有一个脚本将简化您的包含，并且由于浏览器将缓存脚本，因此不再需要额外的下载，这对于长时间使用和访问许多页面的应用程序特别有用。

单独脚本的唯一优势是对于退出登录页面的用户以及我们为什么要为他们优化他们不会因此而留下来。

开心！

# c++ - 在 C++ 中标记字符串

> ID：10189448
> 
> 赞同：6
> 
> 时间：2012-04-17T10:26:49.410
> 
> 标签：c++

我有一个字符串 currentLine="12 23 45"

我需要在不使用 Boost 库的情况下从该字符串中提取 12、23、45。因为我使用的是字符串，所以 strtok 对我来说失败了。我尝试了很多事情仍然没有成功。

这是我的最后一次尝试

```
while(!inputFile.eof())
    while(getline(inputFile,currentLine))
        {
            int countVar=0;
            int inputArray[10];
            char* tokStr;
            tokStr=(char*)strtok(currentLine.c_str()," ");

            while(tokstr!=NULL)
            {
            inputArray[countVar]=(int)tokstr;
            countVar++;
            tokstr=strtok(NULL," ");
            }
        }
} 
```

没有strtok的那个

```
string currentLine;
while(!inputFile.eof())
    while(getline(inputFile,currentLine))
        {
            cout<<atoi(currentLine.c_str())<<" "<<endl;
            int b=0,c=0;
            for(int i=1;i<currentLine.length();i++)
                {
                    bool lockOpen=false;
                    if((currentLine[i]==' ') && (lockOpen==false))
                        {
                        b=i;
                        lockOpen=true;
                        continue;
                        }
                    if((currentLine[i]==' ') && (lockOpen==true))
                        {
                        c=i;
                        break;
                        }
                }
            cout<<b<<"b is"<<" "<<c;    
        } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T10:29:56.707

试试这个：

```
#include <sstream>

std::string str = "12 34 56";
int a,b,c;

std::istringstream stream(str);
stream >> a >> b >> c; 
```

在此处阅读有关 c++ 流的大量信息：[http ://www.cplusplus.com/reference/iostream/](http://www.cplusplus.com/reference/iostream/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-17T10:28:36.020

```
std::istringstream istr(your_string);

std::vector<int> numbers;
int number;
while (istr >> number)
    numbers.push_back(number); 
```

或者，更简单（虽然不是真的更短）：

```
std::vector<int> numbers;
std::copy(
    std::istream_iterator<int>(istr),
    std::istream_iterator<int>(),
    std::back_inserter(numbers)); 
```

（需要标准标题`<sstream>`和。）`<algorithm>``<iterator>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T10:35:28.050

您也可以选择 Boost tokenizer ......

```
#include <iostream>
#include <string>
#include <boost/foreach.hpp>
#include <boost/tokenizer.hpp>
using namespace std;
using namespace boost;

int main(int argc, char** argv)
{
    string str= "India, gold   was dear";
    char_separator<char> sep(", ");
    tokenizer< char_separator<char> > tokens(str, sep);
    BOOST_FOREACH(string t, tokens)
    {
        cout << t << "." << endl;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T10:47:07.460

`stringstream`并且`boost::tokenizer`是两种可能。`string::find`这是使用and的更明确的解决方案`string::substr`。

```
std::list<std::string>
tokenize(
  std::string const& str,
  char const token[])
{
  std::list<std::string> results;
  std::string::size_type j = 0;
  while (j < str.length())
  {
    std::string::size_type k = str.find(token, j);
    if (k == std::string::npos)
      k = str.length();

    results.push_back(str.substr(j, k-j));
    j = k + 1;
  }
  return results;
} 
```

希望这可以帮助。您可以轻松地将其转换为将令牌写入任意容器或采用处理令牌的函数句柄的算法。

# c# - 使用包含不区分大小写的字符串搜索

> ID：10189449
> 
> 赞同：2
> 
> 时间：2012-04-17T10:26:49.690
> 
> 标签：c#, string, search, equals, contains

我需要在目录中搜索**包含**输入文本的文件和文件夹，

我可以看到这是我需要的，但问题是**当字符大小写（小写/大写）不匹配时**`File.Name.Contains(txtSearch)`它不会返回 true 。

 **虽然`File.Name.Equals(txtSearch,StringComparison.InvariantCultureIgnoreCase)`解决了这个问题，但它要求搜索字符串应该完全相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T10:28:23.960

```
var position =  File.Name.IndexOf(txtSearch, StringComparison.InvariantCultureIgnoreCase) 
```

如果您的“文件名”包含任何出现的指定搜索字符串，则where`position`将大于。**`-1`**

所以..

```
if(position > -1){
    //found files, do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:07:21.620

```
 var _reps = new List<string>(); // with variant data

_reps.ConvertAll<string>(new Converter<string,string>(delegate(string srt){srt= srt.ToLower(); return srt;})).Contains("invisible") 
```

这是迄今为止我能找到的最干净的方法**

# java - Mule 3 web 服务不返回堆栈跟踪

> ID：10189460
> 
> 赞同：2
> 
> 时间：2012-04-17T10:27:09.690
> 
> 标签：java, spring, cxf, mule

我最近从 Mule 2.2.1 切换到 Mule 3.x

要点是 Mule 3 不返回堆栈跟踪，但 Mule 2 会，我如何复制 Mule 2 的行为？

更多细节：

一些 Web 服务被包装在一个 try-catch 中，我们在其中抛出一个 ServiceException

```
@WebFault(name = "ServiceException")
    public class ServiceException extends Exception {
    private static final long serialVersionUID = 1L;
    private Integer errorNumber;

public ServiceException(Exception e, User user) {
    super(makeMessage(e));
    LoggingDao.logException(this.getMessage(), e.toString());
    this.setStackTrace(e.getStackTrace());
    this.errorNumber = LoggingDao.getLogId();
} ... etc 
```

我们捕获异常的目的是将堆栈跟踪返回给 Web 服务调用者，顺便说一下，LoggingDao 记录堆栈跟踪但 Web 服务不返回它。

在路上的某个地方，我们跳进了 DefaultComponentLifecycleAdapter.java，它抛出了一个 MuleException，它覆盖了堆栈跟踪并返回

```
 <soap:Fault>
     <faultcode>soap:Server</faultcode>
     <faultstring>Component that caused exception is: org.mule.component.DefaultJavaComponent component for: SedaService{...}. Message payload is of type: Object[]</faultstring>
  </soap:Fault> 
```

我将如何在 Mule 3.x 中返回堆栈跟踪

PS 我正在使用 Mule 3.0.1，它似乎与我上面提供的链接不兼容。

也来自： http: [//www.mulesoft.org/documentation/display/MULE3USER/Error+Handling](http://www.mulesoft.org/documentation/display/MULE3USER/Error+Handling)

> 如果流交换模式是请求响应，则在执行后将不同的消息返回给调用者。该消息将 org.mule.transport.NullPayload 作为其有效负载，并且 exceptionPayload 属性设置为以下内容： org.mule.api.ExceptionPayload .< 上述是否给我带来了麻烦？

来自 mule 2 mule-config.xml 的不同之处在于交换模式不是“请求响应”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T09:48:52.097

有人告诉我这是 Mule 3.x < 3.2 中的一个已知问题 解决方案是由
Tomas Blohm编写 OutFault 拦截器代码

```
public class CustomSoapFaultOutInterceptor extends AbstractSoapInterceptor {
    private static final Log logger = LogFactory.getLog(CustomSoapFaultOutInterceptor.class);

public CustomSoapFaultOutInterceptor() {
        super(Phase.MARSHAL);
        getAfter().add(Soap11FaultOutInterceptor.class.getName());
    }
    @Override
    public void handleMessage(SoapMessage message) throws Fault {
        Fault fault = (Fault) message.getContent(Exception.class);
        logger.error(fault.getMessage(), fault);
    //delete the Mule Exception to have the one throw by the component in the SoapMessage
        Throwable t = getOriginalCause(fault.getCause());
        fault.setMessage(t.getMessage());
    }
    private Throwable getOriginalCause(Throwable t) {
        if (t.getCause() == null || t.getCause().equals(t))
            return t;
        else
            return getOriginalCause(t.getCause());
    }
}

//And then this into mule-config.
<cxf:jaxws-service>
   <cxf:outFaultInterceptors>
      <spring:bean class="is.tr.mule.interceptor.CustomSoapFaultOutInterceptor"/>
   </cxf:outFaultInterceptors>
</cxf:jaxws-service> 
```

# java - netbeans logging tutorial

> ID：10189464
> 
> 赞同：0
> 
> 时间：2012-04-17T10:27:29.910
> 
> 标签：java, netbeans, logging

hi i'm working with a netbeans project, that they gave me to work on, and i need to check if the connection to the database (postgres) are working well, and i notice that there are lines in the code like

```
static Logger log = Logger.getLogger(getNivel.class); 
```

then

```
if (user != null) {
            log.debug("Usuario identificado: " + user.getIdUsuario() + "obteniendo su cuadro de mandos"); 
```

but i don't know how to see if the connection is actually working, because i can't find the log file. so i searched the internet and i found this page [link](http://bits.netbeans.org/dev/javadoc/org-openide-util/org/openide/util/doc-files/logging.html)

but i don't really understand what i should do to see those messages. Can anybody help me?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T15:34:42.263

不确定您使用哪个日志记录库，但我认为您使用标准的 java 日志记录 API（java.util.logging 包）...

您可能看不到它，因为您使用的是 DEBUG 级别的日志记录，并且您的项目设置为打印 WARNING 及以上我相信。因此，如果您要快速查看发生了什么，请暂时将代码更改为：

```
if (user != null) {
        log.severe("Usuario identificado: " + user.getIdUsuario() + "obteniendo su cuadro de mandos"); 
```

或者在项目的根目录中创建 logging.properties 文件，您将在其中为要查看日志的类或包启用 DEBUG 级别的日志记录：

```
com.mycompany.mypackgepath.myclass.level=DEBUG 
```

请注意，您的项目中可能已经存在这样的文件。您还可以添加更多处理程序，以便将日志输出打印到文件以及 netbeans 控制台

```
handlers=java.util.logging.FileHandler, java.util.logging.ConsoleHandler
java.util.logging.ConsoleHandler.level=ALL
java.util.logging.FileHandler.pattern = %h/Library/Logs/xd%g-%u.log
java.util.logging.FileHandler.limit = 10485760
java.util.logging.FileHandler.count = 2
java.util.logging.FileHandler.formatter = java.util.logging.SimpleFormatter
java.util.logging.FileHandler.encoding = UTF8 
```

您可能想查看本教程，例如：[http ://www.javapractices.com/topic/TopicAction.do?Id=143](http://www.javapractices.com/topic/TopicAction.do?Id=143)

顺便提一句。记录器应该是`private`和`final`;)

# sql - 如何在 SQL 中附加表“Sideways”

> ID：10189466
> 
> 赞同：1
> 
> 时间：2012-04-17T10:27:43.077
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

我有大约 15 个表，每个表大约有 10 列和近 100 万行数据。

所有 15 个表都有相同的主键，我可以用来连接它们。

例如..
表 1 - 列 ABCDE
表 2 - 列 ABFGH
表 3 - 列 ABIJK
表 4 - 列 ABLMN
等。其中 A 和 B 是主键

我需要一张看起来像这样的大表..
mainTable - 列 ABCDEFG ... MN

现在，我所做的是：
- 从表 1 作为我的“主”表开始
- 更改表以添加所有列..（即 FGH .. LMN）
- 使用 UPDATE 命令填写“主”表“ 桌子

```
update mainTable set 
 F = a.F,
 G = a.G,
 H = a.H
from mainTable left join Table2 a on
mainTable.A = a.A  and 
mainTable.B = a.B 

(rinse and repeat for each of the 15 tables) 
```

这似乎有效，只是它的效率非常低。加入一张桌子需要很长时间..

是否有替代/更快的方法来执行此任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:45:43.077

我能想到的一种选择：

```
CREATE TABLE data
(
  A <some format> NOT NULL,
  B <some format> NOT NULL,
  C <some format> NOT NULL CONSTRAINT DF_data_C DEFAULT (' '),
  D <some format> NOT NULL CONSTRAINT DF_data_D DEFAULT (' '),
  ...
  N <some format> NOT NULL CONSTRAINT DF_data_N DEFAUT (' ')
) 
```

对，现在您有一个包含所有必要列的表。由于插入不会相互干扰，只需将所有导入数据插入到大表中即可。要检查的一件事是空间，因为该表最后必然很大，有数百万行。

然后使用 GROUP BY 子句将数据从表数据“移动”到主表：INSERT INTo main SELECT A, B, Max(C), Max(D), Max(E), Max(F).. . Max(N) FROM data GROUP BY A, B

现在这可能是一种资源消耗，但仍可能比更新执行得更快。它背后的想法是加快数据收集过程，然后当所有数据都在一个地方时，将数据正确地移动到一起。由于其他列默认为空白（或一个空格），因此 Max 函数将从实际导入的任何列中获取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:35:38.713

更新通常比插入慢。而是创建一个新表并将所有数据插入其中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T13:02:35.437

您可以像这样使用 select into：

```
 SELECT 
        T1.A, T1.B, T1.C,
        T2.D, T2.E, T2.F,
        T3.G, T3.H
    INTO NewTable 
    FROM 
      T1 
      inner join T2 on T1.A = T2.A and T1.B = T2.B
      inner join T3 on T1.A = T3.A and T1.B = T3.B
            ORDE BY A,B -- If this will become your PK 
```

然后你只需要改变表来添加所需的索引：

```
 ALTER TABLE NewTable ADD CONSTRAINT PK_NewTable PRIMARY KEY CLUSTERED (A,B) 
```

仅当所有表具有相同的 A、B 组合时，这才有效。如果这因表而异，则需要不同的解决方案：

```
 SELECT 
        T1.A, T1.B, T1.C,
        T2.D, T2.E, T2.F,
        T3.G, T3.H
    INTO NewTable 
    FROM
    (SELECT DISTINCT A,B FROM
     (SELECT A,B FROM T1
      UNION SELECT A,B FROM T2
      UNION SELECT A,B FROM T3) ALL) T0
      inner join T1 on T0.A = T1.A and T0.B = T1.B
      inner join T2 on T0.A = T2.A and T0.B = T2.B
      inner join T3 on T0.A = T3.A and T0.B = T3.B 
```

# tags - Normalize LastFM Tags

> ID：10189467
> 
> 赞同：0
> 
> 时间：2012-04-17T10:27:48.023
> 
> 标签：tags, last.fm, normalize

I have this set of music data crawled from LastFM, Now, I would like to normalize and classify the songs based on one tag per track. I got this master Genre list, [https://spreadsheets.google.com/pub?key=psnjFY3R2itsqjinSs9hkZw](https://spreadsheets.google.com/pub?key=psnjFY3R2itsqjinSs9hkZw)

But again, how will I identify, J-pop, JPop and Jap Pop all are same as Japanese Pop? Is there a web api or database which will be useful to get normalized genre?

Thanks for helping.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:00:21.897

LastFM 上的标签由用户提供。您希望谁（什么权威）提供这些标签的标准化视图？我猜你不能指望这样的服务存在。

标签是一种对信息进行分类的方法。您不能阻止用户使用不同的标签来表达相同的含义（例如日本流行音乐）。如果您想对此进行规范化，那么您将必须自己提供规范化映射，但同样您将不会成功，因为您必须包含所有创建的新标签。但是，如果名称不能自我解释，您将如何知道不同标签的用途。

我建议不要进行规范化，让用户决定要搜索的标签。当列出歌曲显示所有标签时，不要尝试显示标准化视图。

# c# - Json.NET Serialize private members and not readonly properties

> ID：10189471
> 
> 赞同：16
> 
> 时间：2012-04-17T10:27:54.367
> 
> 标签：c#, json.net

How can I customize Json.NET to serialize private members and NOT serialize public readonly properties (without using attributes).

I've had a stab around at creating a custom `IContractResolver` but am a bit lost.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-08T20:43:53.157

对于部分答案，弄乱 DefaultContractResolver.DefaultMembersSearchFlags 可以让它包含私人的东西：

```
Newtonsoft.Json.JsonSerializerSettings jss = new Newtonsoft.Json.JsonSerializerSettings();

if (includePrivateMembers)
{
    Newtonsoft.Json.Serialization.DefaultContractResolver dcr = new Newtonsoft.Json.Serialization.DefaultContractResolver();
    dcr.DefaultMembersSearchFlags |= System.Reflection.BindingFlags.NonPublic;
    jss.ContractResolver = dcr;
}

return Newtonsoft.Json.JsonConvert.SerializeObject(o, jss); 
```

似乎适用于很多对象，尽管其中一些似乎会产生 CLR 异常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-25T13:56:54.003

作为对[Chris 的回答](https://stackoverflow.com/a/14781014/806690)，`DefaultMemberSearchFlags`属性 on`DefaultContractResolver` [自版本 6 起已弃用](http://json.codeplex.com/releases/view/117958)。尽管弃用消息说了什么，但我相信您也需要覆盖该`CreateProperties`方法，就像[LB 解释](https://stackoverflow.com/a/24107081/806690)的那样。

此方法使您可以完全控制，包括排除只读属性：

```
class PrivateContractResolver : DefaultContractResolver
{
    protected override List<MemberInfo> GetSerializableMembers(Type objectType)
    {
        var flags = BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic;
        MemberInfo[] fields = objectType.GetFields(flags);
        return fields
            .Concat(objectType.GetProperties(flags).Where(propInfo => propInfo.CanWrite))
            .ToList();
    }

    protected override IList<JsonProperty> CreateProperties(Type type, MemberSerialization memberSerialization)
    {
           return base.CreateProperties(type, MemberSerialization.Fields);
    }           
} 
```

# asp.net - Can you set HTTP header before posting

> ID：10189473
> 
> 赞同：2
> 
> 时间：2012-04-17T10:27:57.913
> 
> 标签：asp.net, http-headers

Pretty sure I know the answer to this one, but want to make sure I'm not missing something...

Running ASP.NET 4.0 and have a request where I need to send a user to a 3rd party app but set an HTTP header value before doing so. This would be a Request header. I can set the Response Header no problem but am unable to do so with Request headers as the collection is read-only. Essentially, the process is as follows:

1.  User clicks button to initiate transfer to 3rd party app
2.  Page posts back and we grab user info - at this point I need to set the header
3.  Issue a Response.Redirect and send them to the 3rd party app.

Note: I'm not stuck on a Response.Redirect; I could change the form to POST to the 3rd party app simply as a means of transferring the user, that's fine.

I believe I could setup an IIS rewrite rule to set the header (based on this article: [http://learn.iis.net/page.aspx/686/setting-http-request-headers-and-iis-server-variables/](http://learn.iis.net/page.aspx/686/setting-http-request-headers-and-iis-server-variables/)) but I don't want to go that route as the header value will contain a UserID and I'd rather not expose that to the user at all - even for a brief moment. I certainly understand that even a header isn't invisible as someone could inspect the page, but I'm not concerned with that.

Any ideas would be a great help.

Thanks, Ryan

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:32:16.453

怎么样：

```
using System.Net;

HttpWebRequest req = (HttpWebRequest)HttpWebRequest.Create("http://www.google.com");
req.Headers.Add(new HttpRequestHeader(), "my header content"); 
```

# jasper-reports - Right-aligned page number information in JasperReports

> ID：10189474
> 
> 赞同：4
> 
> 时间：2012-04-17T10:28:01.143
> 
> 标签：jasper-reports

In JasperReports, I like to render page numbers in the style *current-page / total-pages* . Studying the official demos you can find the following solution using three `TextFields` (because there is no built-in variable for *number of pages* )

```
<!-- Right aligned current page -->
<textField>
    <reportElement x="100" width="40" .../>
    <textElement textAlignment="Right" ... />
    <textFieldExpression class="java.lang.String">
        <![CDATA[String.valueOf($V{PAGE_NUMBER})]]>
    </textFieldExpression>
</textField>

<!-- Centered aligned slash -->
<staticText>
    <reportElement x="140" width="5" .../>
    <textElement textAlignment="Center" ... />
    <text>
        <![CDATA[/]]>
    </text>
</staticText>

<!-- Left aligned total number pages (evaluationTime="Reports") -->
<textField evaluationTime="Report">
    <reportElement x="145" width="40"/>
    <textElement textAlignment="Left" ... />
    <textFieldExpression class="java.lang.String">
        <![CDATA[String.valueOf($V{PAGE_NUMBER})]]>
    </textFieldExpression>
</textField> 
```

However, this only works fine when the complete paging information is centered with respect to the page (with the slash in the middle). What I like to achieve is to right-align the whole group in a way that the *total-pages* has a constant distance to the right border.

How to achieve this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T18:23:02.760

乍一看，这是一个更难的问题。当您尝试更准确地了解此声明时，关键问题变得清晰，“没有用于页数的内置变量”。所有变量都有一个评估时间。因此，该变量`$V{PAGE_NUMBER}`确实是页数的内置变量……但仅在报告时对其进行评估时。

因此，您的总页数字段必须在 评估`Report Time`。

同样，相同的变量`$V{PAGE_NUMBER}`实际上是当前页码的内置变量……但仅在`Now`或`Page`（或其他适当时间）进行评估时。

因此，必须评估您的当前页面字段`Now`或`Page`。

因此，这些变量必须位于不同的文本字段中，以便可以在不同时间对它们进行评估。

但这与您的要求相冲突。由于您不能将它们放入同一个文本字段中，因此您不能让最右边的项目右对齐并且让其左侧的项目完美地流入其中。

根据您的具体情况，您可能能够实现可接受的解决方法。但我的猜测是，解决方法所涉及的工作量太高了。例如，您可以想象一个在报告完成填充后运行的小脚本。它可以解析报告以找到字段“第 3 页，共 xxx”，并将 xxx 替换为正确的总数。我不确定这到底是如何工作的。这听起来像是坏消息。我不推荐它。

或者，也许您可​​以在外部以某种方式计算总页数，并将其作为参数传递给报告。例如，如果页数直接取决于行数，它将起作用。但这只能在非常特殊定义的情况下工作。这是一个黑客。

您当然应该记录增强请求。我可以想象一个特殊的变量，当放置在一个在神奇时间进行评估的文本字段中时，它会执行您想要的操作`Auto`。但是现在我没有看到任何简单的方法来获得你想要的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T14:45:12.070

我在[http://jasperforge.org/plugins/espforum/view.php?group_id=102&forumid=103&topicid=68429](http://jasperforge.org/plugins/espforum/view.php?group_id=102&forumid=103&topicid=68429)找到了解决方案。

秘密似乎是您`evalutionTime="Auto"`在 text field 中定义的`Page {X} of {Y}`。

这是它对我的工作方式（再次归功于[http://jasperforge.org/plugins/espforum/view.php?group_id=102&forumid=103&topicid=68429](http://jasperforge.org/plugins/espforum/view.php?group_id=102&forumid=103&topicid=68429)）

首先定义变量`CURRENT_PAGE_NUMBER`

```
Variable class: java.lang.Integer
Calculation: Nothing
Reset type: Page
Variable Expression: $V{PAGE_NUMBER} 
```

这只是复制页码。（有趣的是，论坛帖子说，`Reset type: None`如果您想`Page {X} of {Y}`在详细信息带中显示，应该设置哪个有效，但如果您喜欢我希望它显示在页面标题带中，则不起作用。）

在此之后，你应该在你想要的地方放置一个文本字段`Page {X} of {Y}`——在我的例子中，在页面标题的右侧，输入表达式：

```
msg("Page {0} of {1}", $V{CURRENT_PAGE_NUMBER}, $V{PAGE_NUMBER}) 
```

并设置

```
evaluationTime="Auto" 
```

由于您现在在一个文本字段中同时拥有当前页数和总页数，因此您可以轻松地以任何您喜欢的方式对齐它。

# html5-video - Blank video in Firefox (Mac) using mediaelement.js

> ID：10189488
> 
> 赞同：2
> 
> 时间：2012-04-17T10:28:52.437
> 
> 标签：html5-video, mediaelement, mediaelement.js

Using mediaelement.js with great success except for Firefox on Mac OS X where the video seems to load fine and display the correct duration and the play head scrubs - the only problem is that the video is blank unlike in Firefox on Windows and all other browsers.

We are using the single h.264 option.

Sporadically we also see this error in Firefox on OS X randomly on page load - *Error: this.pluginAPI.playMedia is not a function*

Anybody have any ideas?

# html - 如何在 HTML 中编码 href 属性

> ID：10189489
> 
> 赞同：18
> 
> 时间：2012-04-17T10:28:53.867
> 
> 标签：html, urlencode, html-encode

应该对 href 属性的内容做什么：HTML 或 URL 编码？

```
<a href="???">link text</a> 
```

一方面，由于 href 属性包含 URL，我应该使用 URL 编码。另一方面，我将这个 URL 插入到 HTML 中，所以它必须是 HTML 编码的。

请帮助我克服这个矛盾。

谢谢。

* * *

编辑：

这就是矛盾。假设 URL 中可能有 '<' 和 '>' 字符。URL 编码不会对它们进行转义，因此在 href 属性中会有保留的 HTML 字符，这违反了标准。HTML 编码会转义 '<' 和 '>' 字符，HTML 将有效，但之后 URL 中会出现意外的 '&' 字符（这是 URL 的保留字符，用作查询字符串参数的分隔符） .

[保留的 URL 字符](http://en.wikipedia.org/wiki/Percent-encoding)形成了[保留的 HTML 字符](http://www.w3schools.com/tags/ref_entities.asp)的超集，除了为 HTML 保留但不为 URL 保留的“<”和“>”。

* * *

编辑2：

我对 '<' 和 '>' 字符是错误的，它们实际上是通过 URL 编码转义的。如果是这样，在这种情况下 URL 编码就足够了，不是吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-17T10:30:40.917

像往常一样构造一个 URL。遵循构建 URL 的规则。编码您放入其中的数据。

然后像往常一样构造 HTML。遵循构建 HTML 的规则。编码数据，因为你把它放进去。

即两者都做（但顺序正确）。

它们并不相互排斥，因此不存在矛盾。

例如（这是一个简化的示例，假设 $_GET 中的数据是正确的并且存在，不要在现实世界中这样做）：

```
$search_term = $_GET['q'];
$page = $_GET['page'];
$next_page = $page + 1;
$next_page_url = 'http://example.com/search?q=' . urlencode($search_term) . '&page=' . urlencode($next_page);
$html = '<a href="' . htmlspecialchars($next_page_url) . '">link text</a>'; 
```

# tomcat - 在 JBoss AS 5.x 中使用 Tomcat 连接池

> ID：10189492
> 
> 赞同：2
> 
> 时间：2012-04-17T10:29:09.477
> 
> 标签：tomcat, jdbc, jboss, jndi

如何在 JBoss 中创建 ConnectionPool/JDBC 而无需更改应用程序中的任何代码？我已经有了部署文件 (.WAR)。

例如，在 tomcat 中，我只需要将新资源添加到 server.xml 文件中。像这样的东西：

```
...
<GlobalNamingResources>
    ...
    <Resource driverClassName="com.mysql.jdbc.Driver" name="testDBConnectionPool" password="root" type="javax.sql.DataSource" url="jdbc:mysql://localhost:3306/testDB" username="root"/>
    ...
</GlobalNamingResources>
... 
```

如何在 JBoss 中做到这一点？据我了解，JBoss 为此使用[mysql-ds.xml 文件](https://stackoverflow.com/questions/820116/jboss-database-connection-pool)，但我们需要在代码中调用它。我对吗？

JBoss中是否有类似Tomcat的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:33:32.263

在 mysql-ds.xml 中添加所需的信息并将其放入 $JBOSS_HOME/dirserver/default/deploy 。

如果您的数据源名称是 jdbc/MySQLDS ，那么您可以这样称呼它

```
javax.naming.Context ic = new javax.naming.InitialContext();
javax.naming.Context ctx = (javax.naming.Context) ic.lookup("java:");
javax.sql.DataSource ds = (javax.sql.DataSource) ctx.lookup("jdbc/MySQLDS");
java.sql.Connection con = ds.getConnection(); 
```

更新：

您需要确保 mysql-ds.xml 具有在 tomcat 的 server.xml 中的确切值。

# jquery - Adding validation support for custom controls in mvc3

> ID：10189497
> 
> 赞同：1
> 
> 时间：2012-04-17T10:29:53.833
> 
> 标签：jquery, asp.net-mvc-3

I have a custom DateTextBoxControl in mvc 3\. The control is used as

```
@Html.DateTextBoxFor(x => x.ActiveParty.PartyDetail.InUSASince, 
     new { @class = "span-7 data date-picker", @maxlength = 10 }) 
```

In model i am adding validation attribute for the property InUSASince as

```
[RequiredWhen("NationalityId", new object[] { Nationality_USA }, 
                  true, ErrorMessage = "Date Field is Required.")]
public virtual DateTime? InUSASince { get; set; } 
```

I have registered unobtrusive javascript validator as

```
 $.validator.unobtrusive.adapters.add("requiredwhen", ["dependentproperty",                    
               "expectedvaluefordependentproperty", "reverse"], function (options) 
    {
        var expectedvaluefordependentproperty = null;
        var reverse = options.params.reverse;
        if (options.params.expectedvaluefordependentproperty.length != 0)
        {
             expectedvaluefordependentproperty = options. params.  
                                         expectedvaluefordependentproperty.split(',');
             var prefix = getModelPrefix(options.element.name);
             dependentproperty = options.params.dependentproperty,
             fullOtherName = appendModelPrefix(dependentproperty, prefix),
             element = $(options.form).find(":input[name='" + fullOtherName + "']");
             options.rules["jqRequiredwhen"] = { dependentelement: element, 
                          expectedvaluefordependentproperty:  
                          expectedvaluefordependentproperty, reverse: reverse };
             if (options.message) {
                  options.messages["jqRequiredwhen"] = options.message; }
         }
     }); 
```

when I run the page. it is not showing any validation msg. When i took view source. I can see the control has no validation related attributes.

anyone knows what I am missing ?

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T05:13:43.730

最后我想出了缺少的东西。在 DateTextBoxFor 的用户控件扩展中，我没有采用为 InUSASince 属性定义的不显眼验证属性。

为此，我们必须使用这些代码行。

```
 ModelState modelState;

    if (htmlHelper.ViewData.ModelState.TryGetValue(fullName, out modelState))
    {
          if (modelState.Errors.Count > 0)
          {
              tagBuilder.AddCssClass(HtmlHelper.ValidationInputCssClassName);
          }
    }

    var attr = htmlHelper.GetUnobtrusiveValidationAttributes(fullName, modelMetaData);
    tagBuilder.MergeAttributes(attr); 
```

这将为自定义控件添加验证属性。

我希望这对某人有用。

# java - exec-maven-plugin exec:java 失败：无法将配置值分配给 java.lang.String 类型的数组

> ID：10189504
> 
> 赞同：14
> 
> 时间：2012-04-17T10:30:32.460
> 
> 标签：java, maven, exec-maven-plugin

执行`mvn exec:java`时无法正确解析配置参数，抛出以下错误：

> [错误] 无法在项目 autotest-programmes 上执行目标 org.codehaus.mojo:exec-maven-plugin:1.2.1:java (default-cli)：无法解析 mojo org.codehaus.mojo:exec-maven 的配置-plugin:1.2.1:java：无法将配置值分配给 java.lang.String 类型的数组：[-classpath，Classpath {}，--glue，com.company.test.cucumber，--format，pretty，- -format, html:C:\workspace\autotest\target] -> [帮助 1]

这是使用的插件配置（使用 Apache Maven 3.0.3）：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>exec-maven-plugin</artifactId>
    <version>1.2.1</version>
    <executions>
        <execution>
            <goals>
                <goal>java</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <includeProjectDependencies>false</includeProjectDependencies>
        <includePluginDependencies>true</includePluginDependencies>
        <executableDependency>
            <groupId>info.cukes</groupId>
            <artifactId>cucumber-core</artifactId>
        </executableDependency>
        <mainClass>cucumber.cli.Main</mainClass>
        <commandlineArgs>-Dfile.encoding=UTF-8</commandlineArgs>
        <arguments>
            <argument>-classpath</argument>
            <classpath/>
            <argument>--glue</argument>
            <argument>com.company.test.cucumber</argument>
            <argument>--format</argument>
            <argument>pretty</argument>
            <argument>--format</argument>
            <argument>html:${project.basedir}\target</argument>
        </arguments>
    </configuration>
    <dependencies>
        <dependency>
            <groupId>info.cukes</groupId>
            <artifactId>cucumber-core</artifactId>
            <version>1.0.2</version>
        </dependency>
    </dependencies>
</plugin> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-17T10:51:22.827

我建议从您的配置中删除空条目并重试。

```
 <argument>-classpath</argument>
 <classpath/> 
```

[原因在 java 目标中，根据文档](http://www.mojohaus.org/exec-maven-plugin/java-mojo.html#arguments)不允许类路径。

顺便说一句：永远不要在你的 maven pom 中使用“\”。请改用正斜杠。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-31T12:37:14.747

根据[此处的 exec:java Docs](http://www.mojohaus.org/exec-maven-plugin/java-mojo.html)，您必须：

移除`<arguments>`零件

并使用`<additionalClasspathElements>`声明来定义类路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-06T10:31:47.770

如果你想使用`<classpath/>`，你必须使用`exec:exec`而不是`exec:java`。您还必须添加可执行文件，`java`在您的情况下：

```
<executable>java</executable> 
```

如果我理解正确，`exec:java`自动添加你不能覆盖它的类路径。参数添加在主类之后。`exec:exec`更通用，它执行任何带有任何参数的可执行文件，其中之一可以是`<classpath/>`.

# java - Java 语音或语言发音

> ID：10189512
> 
> 赞同：6
> 
> 时间：2012-04-17T10:31:06.803
> 
> 标签：java, audio, text-to-speech

我目前正在为学校制作一个项目，我将在其中制作一个教孩子如何阅读的程序。我对该程序的基本想法是生成句子，然后让 Windows Anna 说出它。我的问题是，如何通过 Java 访问 Winodws Anna？有没有更好的方法呢？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T16:10:37.217

如果让程序访问互联网是可以接受的，那么您可以使用[iSpeech](http://www.ispeech.org/)。

您可以使用他们的[API](http://www.ispeech.org/developers)，但问题是它仅限于每天 200 次使用。

iSpeech 的声音听起来不错，通常比我厌倦的其他 TTS 引擎（如[espeak](http://espeak.sourceforge.net/)或[FreeTTS](http://freetts.sourceforge.net/docs/index.php) ）更优美，因为它实际上更流利地发音。当然，它可能发音为“风”，与空气有关，作为“风”，与扭曲有关，但除此之外，它说得很好。

此外，虽然我之前没有任何经验，但我发现一篇文章向您展示了如何使用命令行访问 MS Speech（显然可以通过 Java 进行命令[如果您不知道如何，这里有一个很好的[文章]](https://stackoverflow.com/questions/2921621/executing-in-java-code-an-external-program-that-takes-arguments)）。它位于[这里](http://krolik.net/post/Say-exe-a-simple-command-line-text-to-speech-program-for-Windows.aspx)。在命令行中，您只需输入“SayDynamic.exe* 要说的文本”。

*或 SayStatic，页面上提供的其他下载。

这种方法在速度和不依赖互联网访问方面似乎更好，但它绝对不会像 iSpeech 那样发音。我想您的程序最理想的做法是在联机时使用 iSpeech，并在脱机时使用 Say*.exe。

该网站还提供了该程序的源代码。您可能会注意到，这不是 Microsoft Anna 的声音，但您可以在源代码中指定并重新编译它。

希望我有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:50:29.893

您可以使用命令行实用程序[NirCmd](http://www.nirsoft.net/articles/speak_from_command_line.html) ，它使用安装在 Windows 上的文本转语音 API。

因此，将此实用程序与您的 java 应用程序一起提供并使用适当的命令行运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T12:40:45.600

你可以试试[FreeTTS](http://freetts.sourceforge.net/docs/index.php)：一个用 java 写的语音合成器。

您可以尝试调用 Microsoft Speech API (SAPI)，但我不知道如何在 java 中调用。

你能告诉我们你是如何调用 NirCmd 的吗？作为 NirCmd 的替代方案，您可以在 C# 中构建自己的工具来读取文本。文本可以在 txt 中，并且您的工具使用该 txt 的路径作为参数调用。您可以轻松地调整这样的演示项目：http: [//www.codeproject.com/Articles/19334/Text-to-Speech-using-Windows-SAPI](http://www.codeproject.com/Articles/19334/Text-to-Speech-using-Windows-SAPI)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T19:48:42.790

有 Windows 的 Speech 平台 [http://www.microsoft.com/en-us/download/details.aspx?id=27226](http://www.microsoft.com/en-us/download/details.aspx?id=27226)

语音运行时 [http://www.microsoft.com/en-us/download/details.aspx?id=27225](http://www.microsoft.com/en-us/download/details.aspx?id=27225)

[您可以使用 JNA（不是 JNI）与来自 java https://github.com/twall/jna](https://github.com/twall/jna)的 dll 进行交互

# php - Foreach 循环：重复输出错误

> ID：10189513
> 
> 赞同：0
> 
> 时间：2012-04-17T10:31:10.453
> 
> 标签：php, foreach

我的代码如下

```
$aNewCodes = array("93", "355", "213");
$aServiceProviderId = array();
$oTerminationRate = new TerminationRate();

foreach ($aNewCodes as $iNewCodesKey => $iNewCodesValue)
{
    $oTerminationRate->GetServiceProviders($aServiceProviderId, $iNewCodesValue);

    foreach($aServiceProviderId as $iProviderKey => $iProviderValue)
    {
        echo $iNewCodesValue." :: ".$iProviderValue."<br>";
    }
} 
```

它给了我这样的输出 -

```
93 :: 1
93 :: 2
355 :: 1
355 :: 2
355 :: 1
355 :: 2
213 :: 1
213 :: 2
213 :: 1
213 :: 2
213 :: 1
213 :: 2 
```

其实我期待这样的输出 -

```
93 :: 1
93 :: 2
355 :: 1
355 :: 2
213 :: 1
213 :: 2 
```

尝试了很多来获得该输出，但没有成功。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:36:37.813

您的问题是您没有`aServiceProviderId`在循环的每次迭代中从数组中删除以前的条目。放线

```
$aServiceProviderId = array(); 
```

在第一个循环内 - 就在之前

```
$oTerminationRate->GetServiceProviders($aServiceProviderId, $iNewCodesValue); 
```

你应该没事。

# unix - 关于unix中“未设置”功能的一些疑问

> ID：10189514
> 
> 赞同：0
> 
> 时间：2012-04-17T10:31:11.690
> 
> 标签：unix

首先，我定义了一个变量`count=10`并将其设为只读。现在，我该如何取消它？

其次，在取消设置变量时，它将其设置为`NULL`字符串。我已经`dir=/home/kundan` 在取消设置目录上设置了现在，如果我这样做`echo $dir`，输出为空，但如果我给`cd $dir`它去`/home/kundan`。

为什么会这样？

我预计在取消设置后`dir`它不应该去`/home/kundan`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:40:10.483

好吧，因为它是只读的，所以你不能真正取消它。如果你想要那样，你不应该把它设为只读。参见[手册页](http://man.cx/unset)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:40:30.133

Unset 按预期工作，因为它将@dir 设置为空。如果变量是只读变量，它将不起作用。

在 cd $dir 上，如果 $dir 为空或不存在。它将转到默认目录。即/home/用户名。

只需从不同的路径尝试 cd $abcd(其中 $abcd 未定义)，因为 $abcd 未定义，它将以 /home/username 结尾

# maven-plugin - mvn archetype:generate 给出缺少类丛 PrompterException 错误

> ID：10189515
> 
> 赞同：0
> 
> 时间：2012-04-17T10:31:15.553
> 
> 标签：maven-plugin, maven-3

我正在使用 Maven 3.0.3。我正在运行 mvn archetype:generate 并且收到以下错误：-

[错误] 无法在项目 Standalone-pom 上执行目标 org.apache.maven.plugins:maven-archetype-plugin:2.0:generate (default-cli)：执行目标 org.apache.maven.plugins:maven 的 default-cli -archetype-plugin:2.0:generate failed: 无法在插件 'org.apache.maven.plugins:maven-archetype-plugin:2.0' 中加载 mojo 'generate'。缺少必需的类：org/codehaus/plexus/components/interactivity/PrompterException

我尝试清理存储库中的 maven-archetype-plugin 目录。没运气！

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:39:31.850

试着扩展你的命令行

```
mvn archetpe:2.2:generate ... 
```

# eclipse - Java Eclipse 插件开发——使用外部文件

> ID：10189518
> 
> 赞同：0
> 
> 时间：2012-04-17T10:31:24.037
> 
> 标签：eclipse, eclipse-plugin

我正在开发我的第一个 eclipse 插件并且有一个问题。我的插件使用外部 jar - 这很好用，问题是这个外部库使用属性文件，其中存储了登录和属性数据。我应该在哪里复制和添加这个文件？现在是“找不到文件”错误引发的 IO 异常。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:59:45.267

插件可以在几个地方存储信息；使用哪一个是基于数据范围以及它应该是多么短暂或可移植的决定。

*   [以下](http://wiki.eclipse.org/FAQ_Where_do_plug-ins_store_their_state?)是一些选项的简短概述。
*   您可以将持久设置保存为首选项；这样用户就可以在工作区之间导出/导入它们。请参阅[http://wiki.eclipse.org/FAQ_How_do_I_load_and_save_plug-in_preferences%3F](http://wiki.eclipse.org/FAQ_How_do_I_load_and_save_plug-in_preferences%3F)
*   您还可以使用[Plugin.getStateLocation()](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/core/runtime/Plugin.html#getStateLocation%28%29)获取对 IPath 的引用，以存储插件的内部状态。

# ruby-on-rails - Redmine 中的多个身份验证源

> ID：10189520
> 
> 赞同：0
> 
> 时间：2012-04-17T10:31:39.387
> 
> 标签：ruby-on-rails, ruby, redmine, redmine-plugins

是否可以在 Redmine 中启用多个身份验证源。

这就是说我可以使用我的谷歌应用程序帐户和/或我现有的 redmine 用户名和密码登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:54:02.910

是的。

您可以同时混合使用内部 redmine 帐户、[OpenID](http://www.redmine.org/projects/redmine/wiki/RedmineSettings#Allow-OpenID-login-and-registration)和[LDAP](http://www.redmine.org/projects/redmine/wiki/RedmineLDAP)。

# ios - iphone TabBarController 默认视图

> ID：10189525
> 
> 赞同：0
> 
> 时间：2012-04-17T10:32:04.743
> 
> 标签：ios, xcode4.2, storyboard, ios5

我是 iPhone 新手，正在构建一个需要标签栏导航的应用程序。我正在使用情节提要来做到这一点，这意味着 5.0 平台。我创建了三个视图控制器，并为此在情节提要中设置了视图。该应用程序目前显示三个选项卡，并且现在可以正确切换。现在，iPhone 中是否有任何工具来设置默认视图，以便在应用程序启动时它应该显示第三个视图而不是它现在正在执行的第一个视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:40:53.673

使用代码，您可以执行以下操作：

```
 [self.tabBarController setSelectedIndex:2];  
   //third view 
```

# sql-server-2008 - 在 SELECT 中将列名重命名为空白

> ID：10189528
> 
> 赞同：1
> 
> 时间：2012-04-17T10:32:10.120
> 
> 标签：sql-server-2008, alias

如何将列名重命名为空白，因为我不希望列名显示在输出中:)。我不想要临时更改或 html/xml 格式。可能这是一个非常基本的问题，但到目前为止我无法找到一个好的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T10:40:55.623

添加一个空格作为别名。不允许使用定义为 "" 或 [] 的别名。

```
SELECT Column1 AS [ ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:35:12.100

应该很简单（注意引号之间的空格）：

```
Select 'ColumnName' as ' ' From TableName 
```

# ruby - 运行任务 Cap deploy:setup 时发生错误在使用 Capistrano 和 Unicorn 进行部署期间

> ID：10189530
> 
> 赞同：1
> 
> 时间：2012-04-17T10:32:20.637
> 
> 标签：ruby, ruby-on-rails-3

这是运行任务 Cap deploy:setup 以使用 Capistrano 和 Unicorn 部署 ubuntu 服务器后发生的错误。如果您知道答案，请在这里帮助我？这是反映在终端上的错误-

[100.116.4.74] sh -c 'cp -RPp /home/deployer/apps/mcash/shared/cached-copy /home/deployer/apps/mcash/releases/20120417074244 && (echo 8f69f0a524dcecef478bad74df4a983d3cdad480 > /home/deployer/ mcash/releases/20120417074244/REVISION)' ** [out :: 100.116.4.75] cp：无法创建目录 `/home/deployer/apps/mcash/releases/20120417074244' ** [out :: 100.116.4.75]：否这样的文件或目录

失败：“sh -c 'cp -RPp /home/deployer/apps/mcash/shared/cached-copy /home/deployer/apps/mcash/releases/20120417074244 && (echo 8f69f0a524dcecef478bad74df4a983d3cdad480 > /home/deployer/apps/mcash/发布/20120417074244/REVISION)'" 在 100.116.4.74

这是整个 deploy.rb 文件-

需要“捆绑器/capistrano”

```
role :web,    "200.116.4.75"
role :app,    "200.116.4.75"
role :db,     "200.116.4.75", :primary => true

set :application,     "mcasher"
set :user,            "deployer"
set :deploy_to,       "/home/#{user}/apps/#{application}"
set :deploy_via,      :remote_cache
set :use_sudo,        false

set :scm,             :git
set :repository,      "git-server:mcasher.git"
set :branch,          "master"

default_run_options[:pty] = true
ssh_options[:forward_agent] = true

after "deploy", "deploy:cleanup" # keep only the last 5 releases

namespace :deploy do
  %w[start stop restart].each do |command|
    desc "#{command} unicorn server"
    task command, roles: :app, except: {no_release: true} do
      run "/etc/init.d/unicorn_#{application} #{command}"
    end
  end

  task :setup_config, roles: :app do
    sudo "ln -nfs #{current_path}/config/nginx.conf /etc/nginx/sites-enabled/#{application}"
    sudo "ln -nfs #{current_path}/config/unicorn_init.sh /etc/init.d/unicorn_#{application}"
    run "mkdir -p #{shared_path}/config"
    put File.read("config/database.example.yml"), "#{shared_path}/config/database.yml"
    puts "Now edit the config files in #{shared_path}."
  end
  after "deploy:setup", "deploy:setup_config"

  task :symlink_config, roles: :app do
    run "ln -nfs #{shared_path}/config/database.yml #{release_path}/config/database.yml"
  end
  after "deploy:finalize_update", "deploy:symlink_config"

  desc "Make sure local git is in sync with remote."
  task :check_revision, roles: :web do
    unless `git rev-parse HEAD` == `git rev-parse origin/master`
      puts "WARNING: HEAD is not the same as origin/master"
      puts "Run `git push` to sync changes."
      exit
    end
  end
  before "deploy", "deploy:check_revision"
end 
```

# java - @Component 和 @Named 都用于同一个 bean 类

> ID：10189531
> 
> 赞同：39
> 
> 时间：2012-04-17T10:32:21.533
> 
> 标签：java, spring, dependency-injection, annotations

在 Spring 应用程序中充当 bean 的类是否同时需要`@Component`两者`@Named`？

如果两者都这样使用有什么意义？

我尝试在网上搜索并查看这些注释的标准文档，发现它们有点混乱。

最后，如果`@Named`注解没有为 bean 指定任何名称，应用程序将采用哪个名称？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-04-17T10:52:22.423

`@Component`并且`@Named`是基本上做同样事情的注释，但来自不同的 API。

`@Component`属于 Spring API。它将类标记为自动检测为 bean，并可选择允许您为该 bean 指定名称 ( `@Component("foo")`)。如果没有明确的名称规范，检测到的 bean 将获得从其类名称派生的默认名称。

`@Named`属于`javax.inject`API。它将类标记为自动检测为 bean，并要求您指定名称。

Spring 支持这两种 API。在同一个类中使用两个注解是没有意义的，因为它们提供了相同的功能。

**也可以看看：**

*   [3.10 类路径扫描和托管组件](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-classpath-scanning)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-11-28T14:24:54.940

Spring 支持`@Named`注解 (JSR-330) 作为`@Component`(Spring) 的替代方案。

一般来说，`@Named`名字不好，因为没有描述它的作用，所以我宁愿尽可能使用`@Component`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-31T12:00:31.543

两者中的任何一个都应该使用。同时使用@Component 和@Named 没有任何意义。添加到上面（其他的）注释 @Component("[someComponentID]") 和 @Named("[someNamedID]") 通过在括号中传递 ID 为 bean 分配一个 ID，如果没有隐式分配一个。

# java - 将项目升级到 grails 2.0.1

> ID：10189534
> 
> 赞同：1
> 
> 时间：2012-04-17T10:32:39.787
> 
> 标签：java, eclipse, hibernate, grails, groovy

我将我的项目升级到 grails 2.0.1 但出现了问题：

**问题：**

```
Command terminated with an error code (see details for output)
------System.out:-----------
| Loading Grails 2.0.1
| Configuring classpath.
| Environment set to development.....
| Compiling 61 source files.
| Error Compilation error: startup failed:
/home/user/workspace/myProject/grails-app/controllers/myproject/WelcomeController.groovy:
-1: The return type of java.lang.Object wait() in myproject.WelcomeController 
is incompatible with void wait() in java.lang.Object
. At [-1:-1]  @ line -1, column -1.
1 error
------System.err:----------- 
```

**笔记：**

```
 i try right click --> Grails Tools -- >
   (Download source jars / & / refresh dependencies / & / grails plugin manager) 
   on my project but problem didn't solve. 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:38:02.190

似乎您有一个名为 wait() 的操作，它是在 java.lang.object 下的方法中构建的。

您必须更改此方法的名称（不要忘记更改其 gsp 页面的名称）

如果这不能解决您的问题，请转到您的项目目录，显示您的隐藏文件（根据您的操作系统）并打开 .project 文件。

在文件末尾你会发现

它必须是这样的：

```
<linkedResources>
   <link>
      <name>.link_to_grails_plugins</name>
      <type>2</type>
      <locationURI>GRAILS_ROOT/2.0.1/projects/myproject/plugins</locationURI>
   </link>
</linkedResources> 
```

如果是 GRAILS_ROOT/1.3.7/projects/...

将其更改为 GRAILS_ROOT/2.0.1/projects/...

希望对你有帮助

# android - 在 android 上创建画廊时出现内存不足错误

> ID：10189535
> 
> 赞同：0
> 
> 时间：2012-04-17T10:32:44.103
> 
> 标签：android

在 Eclipse 中创建 android 库时出现此错误。当我只添加两个图像时，它运行良好，但是当我将更多图像添加到图库时，它会出现此错误。任何帮助，将不胜感激！

```
package com.hospital;
import com.hospital.R;
import android.app.Activity;
import android.content.Context;
import android.content.res.TypedArray;
import android.os.Bundle;

import android.view.View;
import android.view.ViewGroup;

import android.widget.AdapterView;
import android.widget.BaseAdapter;
import android.widget.Gallery;
import android.widget.ImageView;
import android.widget.Toast;

import android.widget.AdapterView.OnItemClickListener;

public class myGallery extends Activity {

    private final Integer[] pic = {
            R.drawable.sample_1,
            R.drawable.sample_2,
            R.drawable.sample_3

    };
    ImageView imageview;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.gallery);

        Gallery gallery = (Gallery)findViewById(R.id.pics);
        gallery.setAdapter(new ImageAdapter(this));

        imageview = (ImageView)findViewById(R.id.ImageView01);
        gallery.setOnItemClickListener(new OnItemClickListener() 
        {
            public void onItemClick(AdapterView <?> arg0, View arg1, int arg2, long arg3) {
                Toast.makeText(myGallery.this, "" + arg0, Toast.LENGTH_SHORT).show();
                imageview.setImageResource(pic[arg2]);
            }
        });
        registerForContextMenu(gallery);
    }

public class ImageAdapter extends BaseAdapter {
    private final int mGalleryItemBackground;
    private final Context mContext;
    private final Integer[] pic = {
            R.drawable.sample_1,
            R.drawable.sample_2,
            R.drawable.sample_3

    };

       public ImageAdapter(Context c) {
        mContext = c;
        TypedArray attr = c.obtainStyledAttributes(R.styleable.photoGallery);
        mGalleryItemBackground = attr.getResourceId(
                R.styleable.photoGallery_android_galleryItemBackground, 1);
        attr.recycle();
    }

    public int getCount() {
        return pic.length;
    }
    public Object getItem(int arg0) {
        return arg0;
    }

    public long getItemId(int arg0) {
        return arg0;
    }

    public View getView(int arg0, View arg1, ViewGroup arg2) {
        ImageView imageView = new ImageView(mContext);

        imageView.setImageResource(pic[arg0]);
        imageView.setLayoutParams(new Gallery.LayoutParams(150, 100));
        imageView.setScaleType(ImageView.ScaleType.FIT_XY);
        imageView.setBackgroundResource(mGalleryItemBackground);

        return imageView;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:38:15.000

OutOfMemory 是使用大量位图时常见的错误。减少错误的唯一方法是调用`System.gc();`。`System.gc()`在您的代码中，Java VM 可能会或可能不会在运行时决定在该点进行垃圾收集。`"Bitmap".recycle()`在您完成业务后尝试调用您的位图。这将帮助您最大限度地减少此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:41:31.610

谷歌提供了解决您面临的问题的课程，您可以在以下链接中访问它。

[http://developer.android.com/training/displaying-bitmaps/process-bitmap.html](http://developer.android.com/training/displaying-bitmaps/process-bitmap.html)

希望这可以帮助。

# java - 如何在java中将结果添加到MySQL存储过程的结果集中

> ID：10189539
> 
> 赞同：0
> 
> 时间：2012-04-17T10:33:03.053
> 
> 标签：java, database, stored-procedures, resultset

我想将结果添加到结果集中并使用表来显示结果，这是我的 java 代码

```
while (resultSet.next()) {

            Object[] objects = {
                    resultSet.getDouble("January"),
                    resultSet.getDouble("February"), 
                    resultSet.getDouble("March"),
                    resultSet.getDouble("April"),
                    resultSet.getDouble("May"),
                    resultSet.getDouble("June"), 
                    resultSet.getDouble("July"),
                    resultSet.getDouble("August"), 
                    resultSet.getDouble("September"),
                    resultSet.getDouble("October"), 
                    resultSet.getDouble("November"),
                    resultSet.getDouble("December"), 
                     };
            model.addRow(objects);
        } 
```

错误显示“未找到列 '一月'”。

很抱歉我没有获得足够的声誉，所以我将存储过程的结果写如下。

```
categoryid  January   February....

1      3000      5000      (double).... 
```

查询代码：

```
CallableStatement callableStatement = connection.prepareCall(sql);
        if (cobAccount.getSelectedIndex() != 0) {
            String accountid = cobAccount.getSelectedItem().toString()
                    .substring(0, 1);
            callableStatement.setString(1, accountid);
        } else {
            callableStatement.setString(1, "0");
        }
        if (cobYear.getSelectedIndex() != 0) {
            String year = cobYear.getSelectedItem().toString();
            callableStatement.setString(2, year);
        } else {
            callableStatement.setString(2, "0");
        }
        if (cobMember.getSelectedIndex() != 0) {
            String memberid = cobMember.getSelectedItem().toString()
                    .substring(0, 1);
            callableStatement.setString(3, memberid);
        } else {
            callableStatement.setString(3, "0");
        }
        if (!"".equals(txtMinmoney.getText())) {
            double minMoney = Double.valueOf(txtMaxmoney.getText());
            callableStatement.setDouble(4, minMoney);
        } else {
            callableStatement.setDouble(4, '0');
        }
        if (!"".equals(txtMaxmoney.getText())) {
            double maxMoney = Double.valueOf(txtMaxmoney.getText());
            callableStatement.setDouble(5, maxMoney);
        } else {
            callableStatement.setDouble(5, '0');
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:38:17.137

确保为`getDouble`函数传递的字符串是 SQL 列的实际名称。例如，*January*似乎拼写不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:44:50.667

你跳过一月`resultSet.next()`没有？

也许做`resultSet.hasNext()`或等价，`resultSet.next()`在你的循环结束？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T11:18:34.763

看起来没有名为 January 的列。是否有一个名为“Month”的列，其值为 Jan/Feb/etc？如果您可以发布表定义和查询，则故障排除会更容易。

# symfony - isset 中的非法偏移类型或 EntityChoiceList.php 第 273 行中的空

> ID：10189541
> 
> 赞同：12
> 
> 时间：2012-04-17T10:33:09.110
> 
> 标签：symfony, doctrine-orm

在我的 Symfony2 项目中，我尝试动态生成在我的表单类型中使用的实体，绕过使用查询构建器等。

对于实体选择属性，我提供了要使用的实体数组。在页面加载时，一切似乎都很好，并且显示了正确的内容。但是在提交表单时我得到

> isset 中的非法偏移类型或 EntityChoiceList.php 第 273 行中的空

```
at ErrorHandler ->handle ('2', 'Illegal offset type in isset or empty',
'..../Symfony/Bridge/Doctrine/Form/ChoiceList/EntityChoiceList.php', '273', array('key'     => object(myEntity))) in  ..../Symfony/Bridge/Doctrine/Form/ChoiceList/EntityChoiceList.php at line 273   
            .....
            return isset($entities[$key]) ? $entities[$key] : null; 
            ..... 
```

让我难过的是如果我添加 var_dump(isset($this->entities[$key]));exit; 在这一行上方，我返回了“bool(true)”，这对我来说意味着密钥确实存在。

作为背景，我试图扩展 EntityType，以便在我的项目中轻松并添加：

```
public function getDefaultOptions(array $options)
{   
    $defaultOptions = array(
        'em'                => null,
        'class'             => 'Acme\TestBundle\Entity\myEntity',
        'property'          => null,
        'query_builder'     => null,
        'choices'           => $this->myEntityArray,
    );

    $options = array_replace($defaultOptions, $options);
    $defaults = parent::getDefaultOptions($options);        
    return $defaults;
} 
```

有没有人知道为什么我会收到这个错误，或者我的问题是否都错了，试图将一组实体传递给选择？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2014-04-08T03:06:59.043

如果您在尝试从 ArrayCollection 中删除元素时遇到此问题，可能是因为您输入了：

`$list->remove($item)`代替`$list->removeElement($item)`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-29T15:50:13.800

我猜你已经以其他方式解决了这个问题，这也不是一个真正的答案。

但我猜要么 $entities 在这一点上不是一个数组，要么 $key 不是一个标量值。对于调试，您应该使用：

```
<?php
if (!is_array($entities) || !is_scalar($key)) {
    var_dump($key, $entities));exit;
} 
```

您现在如何测试它，它将在该函数的第一次传递时停止。Symfony Forms 使用了很多递归，因此任何函数中的退出通常对您没有帮助。

# iphone - UISlider 删除滑块的右侧

> ID：10189545
> 
> 赞同：1
> 
> 时间：2012-04-17T10:33:32.383
> 
> 标签：iphone, objective-c

嗨，我想删除 UISlider 的右侧，我尝试这样做：

```
[progressSlider setMaximumTrackImage:[[[UIImage alloc] init] autorelease] forState:UIControlStateNormal]; 
```

但我删除了所有滑块并只保留拇指图像。知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:05:37.360

您应该使用简单的透明图像来提供它，而不是*没有*`UIImage`内容的自动发布。

# url - 如何使用 URL 在 Jasper 参数中获取正确的日期

> ID：10189548
> 
> 赞同：1
> 
> 时间：2012-04-17T10:33:47.520
> 
> 标签：url, jasper-reports, url-routing, jasperserver

我在下面创建一个 URL 是示例 URL：

```
http://localhost:9090/jasperserver/flow.html?_flowId=viewReportFlow&ndefined=&standAlone=true&start_date=01-01-2011&end_date=31-12-2011 ...... 
```

在这里，我传递了 start_date = 01-01-2011 和 end_date = 31-12-2011，但我没有得到 URL 中给出的日期。相反，我将 start_date 设为 0001-11-30，将 end_date 设为 0030-11-01。

有什么方法可以在输出中获得正确的日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:45:41.590

您的日期需要采用以下格式：`yyyyMMddHHmmss`

这是可配置的。它在 applicationContext.xml 中设置：

```
<bean id="hyperlinkDateParameterFormatter" class="com.jaspersoft.jasperserver.api.engine.jasperreports.util.HyperlinkDateParameterFormatter">
  <property name="pattern" value="yyyyMMddHHmmss"/>
</bean> 
```

一般来说，我建议修改您的 url 并符合默认格式。但原则上您可以修改 appContext 并继续使用您的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:38:19.217

更改参数格式，你应该很好，例如 date_format($P{start_date},'%m-%d-%Y')

# ruby-on-rails - div 类包装字段错误将不起作用

> ID：10189555
> 
> 赞同：0
> 
> 时间：2012-04-17T10:34:14.410
> 
> 标签：ruby-on-rails

我的 Rails 应用程序不会向有错误的字段添加任何类。找不到wihat是问题所在。

在模型中得到这个：

```
validates_presence_of :name
validates_uniqueness_of :name
validates_presence_of :phone 
```

任何想法从哪里开始寻找解决方案？

这是不生成所需样式类的视图 erb 文件：

```
<%= form_for :company, :url => {:action => 'create_lead'}, :html => {:class => "form-horizontal"} do |f|  %>

<div class="">

    <div class="span2"> 
    <%= f.label :csdd_nr, "CSDD numurs" %>
    <%= f.text_field :csdd_nr, {:class => "input-small"} %>
    </div>

    <div class="span4">
    <%= f.label :name, "Nosaukums" %>
    <%= f.text_field :name %>
    </div>

    <div class="span6">
    <%= f.label :ap_veh_count, "Auto skaits" %>
    <%= f.text_field :ap_veh_count, {:class => "input-small"} %><br /><br />
    </div>

    <div class="span6">
    <%= f.label :office_adress_street, "Faktiskā adrese" %>
    <%= f.text_field(:office_adress_street, {:placeholder => 'Iela', :class => "input-medium"}) %> <%= f.text_field(:office_adress_city, {:placeholder => 'Pilsēta', :class => "input-small"}) %> <%= f.text_field(:office_adress_postcode, {:placeholder => 'Pasta indekss', :class => "input-small"}) %>
    </div>

    <div class="span4">
    <%= f.label :web, "Mājaslapa" %>
    <%= f.text_field :web  %><br /><br />
    </div>

    <div class="span4">
    <%= f.label :phone, "Telefona numurs" %>
    <%= f.text_field :phone  %>
    </div>

    <div class="span4">
    <%= f.label :email, "E-pasts" %>
    <%= f.text_field :email  %>
    </div>

    <div class="span4">
    <%= f.label :company_field, "Uzņēmuma nodarbošanās" %>
    <%= f.text_field :company_field %><br /><br />
    </div>

    <%= f.hidden_field(:company_status, :value => "3") %>

    <div class="span12">
    <br /><br />
    <%= submit_tag("Saglabāt", :class => 'btn btn-primary') %>
    <%= link_to "Atcelt", {:action => 'list_leads'}, :class => 'btn' %>
    </div>  def new_lead
    @company = Company.new
end

def create_lead
    @company = Company.new(params[:company])

    if @company.save
        flash[:success] = "Uzņēmums saglabāts"
        redirect_to(:action => 'new_lead')
    else
        flash[:alert] = "!!! Uzņēmums nav saglabāts"
        redirect_to(:action => 'new_lead')
    end
end
</div>

<% end %> 
```

好的，这是将数据保存到数据库的控制器：

```
def new_lead
    @company = Company.new
end

def create_lead
    @company = Company.new(params[:company])

    if @company.save
        flash[:success] = "Uzņēmums saglabāts"
        redirect_to(:action => 'new_lead')
    else
        flash[:alert] = "!!! Uzņēmums nav saglabāts"
        redirect_to(:action => 'new_lead')
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T21:50:26.130

发生这种情况是因为当出现验证错误时，您正在重定向而不是渲染。您的控制器应如下所示：

```
def create_lead
  @company = Company.new(params[:company])

  if @company.save
    flash[:success] = "Uzņēmums saglabāts"
    redirect_to(:action => 'new_lead')
  else
    flash[:alert] = "!!! Uzņēmums nav saglabāts"
    render(:action => 'new_lead')
  end
end 
```

# ruby - Ruby rails - 如何find_by多个选项？

> ID：10189556
> 
> 赞同：11
> 
> 时间：2012-04-17T10:34:33.693
> 
> 标签：ruby, ruby-on-rails-3

我想查找基于多个参数的记录。但是这些参数有多个选项。

```
As "SELECT something FROM mytable WHERE user_name="xyz" and status=("Active" OR "Deleted") 
```

如何将其翻译为 rails 语句？

```
Person.find_by_user_name_and_status(user_name, status) # this doesn't take the OR operator 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-17T10:40:40.693

我现在无法测试，但你试过吗？

```
Person.find_all_by_user_name_and_status(user_name, ["active", "deleted"]) 
```

如果上述方法不起作用，这应该......

```
Person.where(:user_name => "xyz", :status => ["active", "deleted"])
# translates to:
# "select * from persons where username = 'xyz' and status in ('active', 'deleted')" 
```

您应该查看 Rails 的 Active Record 指南：http: [//guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)

# ios - 通过电子邮件发送文本字段的内容需要xcode的建议

> ID：10189561
> 
> 赞同：0
> 
> 时间：2012-04-17T10:34:59.380
> 
> 标签：ios, xcode, textbox, storyboard

当尝试从文本字段中通过电子邮件发送内容时，我抛出了异常。我想我把它们接线错了。

我在 .h 中为我的文本字段创建了出口，将我的电子邮件按钮设置为一个动作。

在 .m 中，我实现了发送电子邮件的常用代码。已导入 UI 消息框架套件。

现在我需要一些帮助，因为那对我不起作用。

总结一下：我如何通过电子邮件发送文本框中的内容？

我使用带有情节提要的 xcode 4.3

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:57:09.540

通过电子邮件发送文本框的内容没有任何技巧。您需要一些例外的帮助，您需要向我们提供准确的错误并向我们展示相关代码。如果您想尝试自己解决它，您应该调试代码，单步执行尝试通过电子邮件发送文本框内容的方法（请参阅[Xcode 4 用户指南：调试和分析您的代码](http://developer.apple.com/library/mac/documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/Debugging/Debugging.html#//apple_ref/doc/uid/TP40010215-CH3-SW1)；请参阅关于添加断点，然后是关于控制执行的部分）。

异常通常是内存管理问题的结果（例如，您的代码正在尝试使用一些已经释放的对象），因此如果您还没有[启用僵尸，您可能希望启用它。](http://developer.apple.com/library/mac/recipes/xcode_help-scheme_editor/Articles/SchemeDiagnostics.html#//apple_ref/doc/uid/TP40010402-CH9-SW1)我还认为人们没有充分认识到 Xcode 在产品菜单上的分析命令的价值（在前面的[分析代码部分](http://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/Debugging/Debugging.html#//apple_ref/doc/uid/TP40010215-CH3-SW15)中进行了描述）。这个分析命令不仅会识别悬空指针，还会识别一些内存泄漏。它并不完美，但它是一个好的开始。

如果人们没有首先解决Analyze 提出的问题，那么他们真的不应该在这里发布问题（当然，除非您需要帮助解决Analyze 提出的问题）。就个人而言，当我在我的第一个大型项目中进行分析练习时，清理它发现的所有问题是很痛苦的，但更重要的是，我突然“明白了”。几十年来，我一直是一名 IT 专业人士，使用过数十种（字面意思）编程语言进行编程，但只有在经历了这个痛苦的练习之后，我才最终了解了 Objective C 内存管理的精妙之处。突然，重新阅读 Apple 的[高级内存管理编程指南](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)，一切都变得非常有意义。

因此，如果您仍然受阻，并且“分析”命令未发现任何问题，并且您通过调试器运行代码，但您无法确定生成异常的原因，那么只需向我们提供详细的错误消息并向我们展示相关代码，我相信我们很乐意提供帮助。

# c# - 精灵表动画上的像素完美碰撞，XNA

> ID：10189565
> 
> 赞同：0
> 
> 时间：2012-04-17T10:35:25.567
> 
> 标签：c#, animation, xna, sprite-sheet, pixel-perfect

我在 XNA 中使用 spritesheet 动画，我想使用像素完美碰撞。我的问题是像素完美碰撞检查精灵表上的当前像素是否透明，而不是检查我正在使用的精灵表部分。这是我的代码：

```
blockTextureData = new Color[shot.texture.Width * shot.texture.Height];
shot.texture.GetData(blockTextureData);

personTextureData = new Color[player2.texture.Width * player2.texture.Height];

player2.texture.GetData(personTextureData);

if (IntersectPixels(player2.CollissionBox, personTextureData, shot.CollissionBox, blockTextureData)) 
```

我想知道如何选择 spritesheet 的特定部分并检查与它的碰撞。我使用[了这个 MSDN 指南](http://create.msdn.com/en-US/education/catalog/tutorial/collision_2d_perpixel)。

编辑：我设法弄明白了，我用这个代替

```
src = new Rectangle(frame, 0, 87, 100);

player.texture.GetData<Color>(0, src, personTextureData,0, 87*100); 
```

和框架是你启动它，例如`0`第一个和`87`第二个，因为我使用带有 2 张`2*87`宽度和`100`高度的图片的精灵表。

Edit2：现在的问题是，一旦你点击 pixelperfect 就会停止工作，所以它只适用于 1 次点击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T04:25:34.920

如果您可以详细说明您所说的仅适用一次，那将有所帮助。

我必须对相同的 IntersectsPixels 函数进行相当多的调整才能与我的项目一起使用。我发现有用的一件事是使用一个非常慢的正方形动画（比如 100x100），填充纯红色，然后在它的唯一其他帧中完全透明。

它对调试与碰撞和动画精灵的像素比较相关的问题有很大帮助。

看看您是否可以提供更多信息，说明究竟是什么不起作用以及它是如何发生故障的。祝您好运解决您的问题。

# xml - 谁能建议一个适合将 XML 呈现为“XML”的 XSLT 模板

> ID：10189566
> 
> 赞同：0
> 
> 时间：2012-04-17T10:35:26.753
> 
> 标签：xml, xslt

寻找一个 XSLT 模板，我可以在其中添加一些 XML，它会呈现就像 Firefox 说“这个 XML 文件似乎没有任何与之关联的样式信息。文档树如下所示。” - 即一种代码布局视图。

有任何想法吗？

干杯...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:17:16.760

如果您需要生成在浏览器中查看时显示缩进漂亮的 XML 的 HTML，那么请看看**[Xpath Visualizer](http://www.huttar.net/dimitre/XPV/TopXML-XPV.html)**是如何做到这一点的——对于 Firefox 和 IE。在FF下载XSLT样式表看是mozDss5.xsl

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T19:55:05.010

您应该将文档标题中的内容类型设置为“application/xml”或“text/xml”

# java - 使用 PageParameters 时将信息消息传递到 Wicket 页面

> ID：10189570
> 
> 赞同：2
> 
> 时间：2012-04-17T10:35:45.750
> 
> 标签：java, wicket, friendly-url

Wicket 是否允许在 PageParameters 对象中传递以下两种参数？显然不是？

*   `accountId`显示在 URL ( )**中**`/account/<ID>`
*   `infoMessage`**未**显示在（可添加书签的）URL 中的参数

我目前正在为有问题的页面使用 IndexedHybridUrlCodingStrategy ，只需尝试参数“0”和“infoMessage”就会出现此异常：

> WicketMessage：并非所有参数都经过编码。确保所有参数名称都是从零开始的连续顺序的整数。当前参数名称为：[0, infoMessage]

如果我将“infoMessage”参数名称更改为“1”，它可以工作，但会产生一个丑陋的 URL（在本例中类似于`/account/42/Tosite%20108207%20tallennettiin.5`），这不是我想要的。

* * *

现在，显而易见的答案可能是**infoMessage 不应该在 PageParameters 中**。但问题是，我尝试将其添加为普通的构造函数参数，如下所示：

```
public AccountPage(PageParameters parameters, String infoMessage) {
    // ...
} 
```

但是这种方法在一个重要的用例中失败了。删除与 Account 相关的持久“Record”对象后，以下内容**无法**正确加载 AccountPage（删除的记录仍然可见）。此代码在 AjaxFallbackLink 的 onClick() 中执行。

```
setResponsePage(new AccountPage(AccountPage.pageParameters(account), message)); 
```

另一方面，我原来的方法......

```
setResponsePage(AccountPage.class, AccountPage.pageParameters(account)); 
```

...工作正常，因为它以某种方式“更彻底地”加载 AccountPage，但是，我不知道如何干净地传递 infoMessage 参数。

（`AccountPage.pageParameters()`上面是一个简单的静态实用程序，用于使用“0”= 帐户 ID 创建适当的 PageParameters。AccountPage 构造函数始终使用 ID 从持久性加载帐户。）

有任何想法吗？也许使用 AjaxFallbackLink 会部分导致问题？

使用检票口 1.4。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T11:42:55.920

根据我在您的问题中看到的内容，您尝试呈现可收藏的页面并向用户显示反馈消息（很可能在 a 中`FeedbackPanel`），但您不希望该消息成为 URL 的一部分。

您要做的是告诉`Session`他们您有一条信息性消息，并让反馈面板处理该消息。

```
@Override void onSubmit() {
    ... save object ...
    getSession().info("Object ... has been saved");
    setResponsePage(ObjectPage.class, new PageParameters("id="+object.getId()));
} 
```

在这种情况下，您告诉 Wicket 在会话中临时存储一条消息，直到它被反馈面板呈现。这个成语也被称为“flash messages”。

您不能同时使用`PageParameters`和另一个参数作为构造函数参数，因为当请求页面时，Wicket 无法使用这样的构造函数创建页面实例。Wicket 只知道如何实例化带有默认构造函数的页面或带有`PageParameters`参数的页面。

# c# - open a fancybox on pageload

> ID：10189574
> 
> 赞同：0
> 
> 时间：2012-04-17T10:36:06.367
> 
> 标签：c#, jquery, asp.net

The situation is to open a fancy box on the page load,

Please find the below html, and the code behind I am using but with no success.

```
protected void Page_Load(object sender, EventArgs e)
        {
            if (SessionController.CurrentMember != null)
            {
                if (Request.IsAuthenticated)
                {
                    int memberId = SessionController.CurrentMember.MemberID;
                    bool checkaccepted = CheckAcceptedTermsandConditions(memberId);

                    if (!checkaccepted)
                    {
                        string script = @"<script>$(document).ready(function() {

                 $(""#onlineCasinoTandC"").fancybox({
                 'transitionIn'  :   'elastic',
                 'transitionOut' :   'elastic',
                  'speedIn'     :   600, 
                    'speedOut'    :   200, 
                    'overlayShow'   :   false,
                     'overlayOpacity':   0.5,
                       'width'         :   800,
                        'showCloseButton':  true,
                         });
                    $(""#onlineCasinoTandC"").click();
                    });</script>";

                        ClientScript.RegisterStartupScript(this.GetType(), "fancybox", script);
                        onlineCasinoTandC.HRef = "/Common/EN/TermsandConditions.aspx";
                    }

                }
            }

        } 
```

Regards Srividhya

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:39:06.623

delete the extra comma at the end of this line

```
'showCloseButton':  true 
```

And if u want to trigger, Click event, it should be

```
$('#foo').trigger('click'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T10:30:46.343

Please find the below solution.

on page load

```
string script = @"<script type=""text/javascript"">$(document).ready(function() {$(""#termsandConditions"").fancybox({'transitionIn':'elastic','transitionOut':'elastic','speedIn':600,'speedOut':200,'overlayShow':false,'overlayOpacity': 0.5,'width':800,'href':""/Contents/Common/EN/TermandConditions.aspx""}).trigger('click');});</script>";
                    Type cstype = this.GetType();
                    ClientScriptManager cs = Page.ClientScript;

                    if (!cs.IsStartupScriptRegistered(cstype, script))
                    {
                        cs.RegisterStartupScript(cstype, "fancybox", script);
                    } 
```

Regards Vidya

# c# - 如何使用 MVC RAZOR 将 DataTable 绑定到 DropDownList？

> ID：10189576
> 
> 赞同：1
> 
> 时间：2012-04-17T10:36:13.043
> 
> 标签：c#, asp.net-mvc, razor, drop-down-menu

我的模型返回一个 DataTables 的集合，如下所示。

如何使用 MVC RAZOR 将 DataTable 绑定到 DropDownList？

对于每个 DataTable，我想为其创建一个表格行和一个下拉列表。

我尝试了以下代码：

```
 foreach (DataTable dataTable in Model.ParameterDataSources)
      {
            <tr>
                <th>
                    Filter:
                </th>
                <td>                    
                    @Html.DropDownList("ddlFilterDataSource", dataTable, "--Select One--") 
                </td>
            </tr>
      } 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-24T17:28:16.620

一个简单的解决方案是将您的 DataTable 转换为 DataView，您应该一切顺利。

```
 //Controller Code
    ViewBag.Employees = new SelectList(objDt.AsDataView(), "id", "name"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T05:26:20.647

```
<http://dotnetpools.com/Article/ArticleDetiail/?articleId=48&title=Binding%20Dropdownlist%20In%20MVC3%20Using%20C#t;>

## razor ##

    @Html.DropDownList("Country", new SelectList(Model.CountryList, "Value", "Text", Model.CountryList.SelectedValue), new { @id = "ddlist", @data_role = "none", style = "color: #fff; background-color: #fff; font-family: Arial, Helvetica, sans-serif; font-size: 10px; color: #333333; margin-left:3px; width:100%; height:20px;" })

## model ##

     public class somename
      {
       public SelectList CountryList { get; set; }
      }
       public class Country
        {
            public string ID { get; set; }
            public string Name { get; set; }
        }

## Controller ##

       public ActionResult index()
        {
          List<Country> objcountry = new List<Country>();
          objcountry = GetCountryList();
          SelectList objlistofcountrytobind = new SelectList(objcountry, "ID", "Name", 0);
          model.CountryList = objlistofcountrytobind;       
          return View(model);
        }

      [HttpPost]
      public ActionResult Analyze(AnalyzeModels model)
       {
          List<Country> objcountry = new List<Country>();
          objcountry = GetCountryList();
          SelectList objlistofcountrytobind = new SelectList(objcountry, "ID", "Name", 0);
          model.CountryList = objlistofcountrytobind;
          return View(model);
       }
              **************************************************
## function for GetCountryList##
        public List<Country> GetCountryList()
        {
            DataTable reportDetailsTable = objCommon.GetDetails("tablename");

            List<Country> objcountrty = new List<Country>();
            int s = reportDetailsTable.Rows.Count;
            for (int i = 0; i < s; i++)
            {
                string d1 = reportDetailsTable.Rows[i][1].ToString();
                string d2 = reportDetailsTable.Rows[i][10].ToString();
                objcountrty.Add(new Country { ID = d1, LName = d2 });
            }
            return objcountrty;
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-01T16:11:25.840

我发现所有其他方法都非常令人困惑，所以我在我看来这样做了，并且似乎工作得很好。我正在使用 vb.net

```
<select>
    @Code
        For Each row In Model.dataTable.Rows
            @<option>@row(0)</option>
        Next
    End Code
</select> 
```

# java - 为什么 Eclipse 没有在 Debug 透视图中显示所有对象的值？

> ID：10189578
> 
> 赞同：2
> 
> 时间：2012-04-17T10:36:22.130
> 
> 标签：java, eclipse, debugging, eclipse-jdt

在 Eclipse JDT 中调试 Java 应用程序时，当将鼠标悬停在编辑器中的变量上时，某些变量的值会显示在“变量”视图中，但不会显示在工具提示中。

以下屏幕截图说明了该问题：

![在此处输入图像描述](../Images/b0cb85f507cc5af4b3609766c0ba0704.png)

如您所见，显示了一个带有变量值的工具提示`this`。但是，没有显示工具提示（或在组合悬停的情况下仅包含声明），`key`而变量视图显示`this`和的值`key`。

[我已经按照这里](https://stackoverflow.com/q/1730628/471164)的建议尝试了 Java/Editors/Hovers 中的组合悬停和变量值，具有类似的效果。唯一的区别是当变量值根本不显示工具提示时，组合悬停在工具提示中显示声明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-21T14:15:34.467

这原来是 Eclipse 中报告的一个[错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=317045)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:39:47.590

您似乎正在使用未保存的文件（文件名旁边的星号）。尝试保存文件+重建您的项目，然后重新启动。

# javascript - 正则表达式匹配 html 样式属性的有效值

> ID：10189582
> 
> 赞同：2
> 
> 时间：2012-04-17T10:37:02.490
> 
> 标签：javascript, css, regex, styles

我正在从一些 html 中删除所有样式属性。我可以使用正则表达式

```
/style=("[^"]"|'[^']')/ 
```

但我想知道这是否效率低下（由于负匹配）。我也知道它容易受到包含引号的样式属性（例如背景图像）的影响。

是否有一个正则表达式我可以用来匹配有效的样式字符串，或者像用正则表达式解析 html 一样，这对于一个正则表达式来说是否太难了？

*edit 这是（我认为）我正在抓取的 html 中最棘手的样式字符串

```
style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: 'Verdana','sans-serif'; mso-fareast-font-family: 'Times New Roman'" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:19:15.433

我不认为，否定匹配在每种情况下都很慢。`style=`毕竟，当您提供带有以下字节的起点时，无论如何都会将其与模式进行比较。

但是，您必须满足属性*未*用引号括起来的情况。

```
/style=(".*?"|'.*?'|[^"'][^\s]*)/s 
```

应该匹配所有 HTML 属性语法的产生。但是，请确保点*匹配正则表达式引擎中的所有*字符，包括换行符（因此是`/s`）。我还使用了非贪婪量词`*?`。这些也可能不实施。

有`style=`没有任何跟随值的特殊情况，上面没有表示以使其更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:39:45.150

尝试`/ style\=[\"\']?([a-zA-Z0-9 \:\-\#\(\)\.\_\/\;\'\,]+)\;?[\"\']? /ig`

它应该找到我知道的每个样式属性。

[http://jsfiddle.net/DULyx/3/](http://jsfiddle.net/DULyx/3/) - 在这里查看

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T02:53:27.667

您不应该将 HTML 作为字符串处理。你在 JS 中所需要的只是`elt.style='';`. 如果您有机会通过 XSLT 运行您的东西，那么它是单行的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-18T06:32:46.740

```
function trim (str) {
    return str.replace(/^\s\s*/, '').replace(/\s\s*$/, '');
}

function getStyle(element){
    return parseRules(element.getAttribute('style'))
}

function parseRules(rules){
  var parsed_rules= {}
      rules.split(';').map(function(rule){
          return rule.split(':').map(function(rule,index){
            // HERE YOU CAN TRY TO CLEAN THE RULES
            return trim( rule )
          })
      }).filter( function(rule){
            // HERE YOU CAN TEST THAT THE RULE IS VALID
          return rule.length == 2 && ( (rule[0]!="") || (rule[1]!="") )
      }).forEach(function(rule){
        parsed_rules[rule[0]] = rule[1]
      })

  return parsed_rules
} 
```

# jquery - jquery动画从右到左

> ID：10189583
> 
> 赞同：3
> 
> 时间：2012-04-17T10:37:11.480
> 
> 标签：jquery, right-to-left

我正在尝试使用 css sprites 制作动画（请告诉我我的方法是否正确），请检查以下 jquery 代码...

```
$(document).ready(function() {
    setTimeout("boat()",20);
});
function boat(){
    $("#boat").animate({right:"+=110%"},20000).css("background-position","0 0").animate({left:"+=110%"},20000).css("background-position","0 -68px")
    setTimeout("boat()",20000);
} 
```

**CSS：**

```
#boat {
    margin-top:160px;
    position:absolute;
    margin-left:100%;
    width:150px;
    height:68px;
    background-image:url(plane.png);
    background-repeat:no-repeat;
} 
```

动画效果完美（从右到左，从左到右），但有一个小问题，css sprite 没有按预期工作。它只占用这个属性`.css("background-position","0 -68px")`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:40:01.613

这是因为您将所有内容都应用在一个中。.css("background-position","0 0") 和 .css("background-position","0 -68px") 你想实现什么？动画完成时不应该是回调吗？

尝试这个：

```
 $(document).ready(function() {
    boat();
});
function boat(){
    $("#boat").css("background-position","0px 0px").animate({right:"+=110%"},10000, function() {
        $("#boat").css("background-position","0px -68px").animate({right:"-=110%"},10000, boat);
    });
} 
```

你可以在这里查看：http: [//jsfiddle.net/7GV9G/20/](http://jsfiddle.net/7GV9G/20/)

这将是连续的。从右到左比从左到右再比一次，永远循环。如果您不想要它一次，请从第二个动画中删除船回调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T20:46:36.770

嗨，正如您在上面提到的那样发布我的答案:) 看到这个：http: [//jsfiddle.net/UzLxZ/9/show/](http://jsfiddle.net/UzLxZ/9/show/) && 代码在这里：http: [//jsfiddle.net/UzLxZ/9/](http://jsfiddle.net/UzLxZ/9/) **&&**和我之前的开始是这样的：http: [//jsfiddle.net/5dqwP/1/](http://jsfiddle.net/5dqwP/1/)

这另一个版本为您确切需要[http://jsfiddle.net/UzLxZ/20/show/](http://jsfiddle.net/UzLxZ/20/show/)（等待蓝色框走出屏幕并回来）**或** [http://jsfiddle.net/UzLxZ/21/show/](http://jsfiddle.net/UzLxZ/21/show/) && 代码在[http://jsfiddle.net/UzLxZ/20](http://jsfiddle.net/UzLxZ/20)这里；你可以到处玩，让它漂亮。:)

**进一步编辑**

[http://jsfiddle.net/8sVDE/](http://jsfiddle.net/8sVDE/) - 这可能会给你更多的想法。

** [http://archive.plugins.jquery.com/project/Pause-Resume-animation](http://archive.plugins.jquery.com/project/Pause-Resume-animation) 或 **[在 JQuery 中鼠标悬停和鼠标悬停时停止和继续动画的方式](https://stackoverflow.com/questions/5088766/the-way-to-stop-and-continue-animation-while-mouseover-and-mouseout-in-jquery)

有确切的想法你在找什么。

希望这会有所帮助：（将鼠标悬停在蓝色框上，您将获得一次完整的重复）

因此，这个 jsfiddle 向您准确展示了您想要的内容，即**引用**- “我想暂停然后在鼠标悬停时恢复并在 1 次成功运行后停止（意味着完成完整功能，从右到左和从左到右）”

如果这有帮助，请告诉我，祝你愉快，干杯！

**jQuery代码**

```
$(document).ready(function() {
    boat();
});
function boat(){
    $("#boat").css("background-position","0px 0px").animate({right:"+=100%"},1000, function() {
        $("#boat").css("background-position","0px -68px").animate({right:"-=100%"},1000).stop();
    });
   // alert('foo');
}

$("#boat").mouseover(function(){
   boat(); 

});
​ 
```

# sql - 根据可用数据获取交叉表报告 - 透视

> ID：10189588
> 
> 赞同：2
> 
> 时间：2012-04-17T10:37:35.953
> 
> 标签：sql, sql-server, sql-server-2008

[![](../Images/4fc1e2a69fc37937159f959afb30fa0c.png "由 imgur.com 主办")](https://imgur.com/1SywW)

我想旋转并转动现有表格并生成报告（交叉表）。您会看到 vals 列由 date_a 和 date_e 列的唯一组合确定。我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:43:46.557

像这样的东西：

**测试数据**

```
CREATE TABLE #tbl(date_a DATE,date_e DATE, vals FLOAT)

INSERT INTO #tbl
VALUES
    ('2/29/2012','1/1/2013',28.47),
    ('2/29/2012','2/1/2013',27.42),
    ('2/29/2012','3/1/2013',24.36),
    ('3/1/2012','1/1/2013',28.5),
    ('3/1/2012','2/1/2013',27.35),
    ('3/1/2012','3/1/2013',24.39),
    ('3/6/2012','1/1/2013',27.75),
    ('3/6/2012','2/1/2013',26.63),
    ('3/6/2012','3/1/2013',23.66) 
```

**询问**

```
SELECT
    *
FROM
(   
    SELECT
        tbl.date_a,
        tbl.date_e,
        vals
    FROM
        #tbl AS tbl
) AS SourceTable
PIVOT
(
    SUM(vals)
    FOR date_e IN ([1/1/2013],[2/1/2013],[3/1/2013])
) AS pvt

DROP TABLE #tbl 
```

**编辑**

如果你不知道有多少列，那么你需要做一个动态的`pivot`。像这样：

**独特的列**

```
DECLARE @cols VARCHAR(MAX)
;WITH CTE
AS
(
    SELECT
        ROW_NUMBER() OVER(PARTITION BY date_e ORDER BY date_e) AS RowNbr,
        tbl.*
    FROM
        #tbl AS tbl
)
SELECT @cols=STUFF
(
    (
        SELECT 
            ',' +QUOTENAME(date_e)
        FROM
            CTE
        WHERE
            CTE.RowNbr=1
        FOR XML PATH('')
    )
,1,1,'') 
```

**动态枢轴**

```
DECLARE @query NVARCHAR(4000)=
N'SELECT
    *
FROM
(   
    SELECT
        tbl.date_a,
        tbl.date_e,
        vals
    FROM
        #tbl AS tbl
) AS SourceTable
PIVOT
(
    SUM(vals)
    FOR date_e IN ('+@cols+')
) AS pvt'
EXECUTE(@query) 
```

# ios - 如何获取CoreData中选中标签的所有消息？

> ID：10189589
> 
> 赞同：0
> 
> 时间：2012-04-17T10:37:37.757
> 
> 标签：ios, xcode, core-data, predicate

我有两个实体新闻和标签。新闻与标签具有一对多关系，而标签与新闻具有一对多关系（反向关系）。

```
Tag:
-tagcontent
News:
-title
-newscontent 
```

如何使用 tagcontent=@"Cars" 获取所有新闻的列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:05:10.080

你可以使用这样的东西 -**任何**应该帮助你

```
 NSFetchRequest *request = [[NSFetchRequest alloc]init];
    NSString *tagName = @"Cars";
    request.entity = [NSEntityDescription entityForName:@"News" inManagedObjectContext:context];
    request.predicate = [NSPredicate predicateWithFormat:@"ANY tag.tagcontent = %@",tagName];

    NSError *error = nil;
    NSrray *results = [context executeFetchRequest:request error:&error]; 
```

# python - 在 Matplotlib 图形窗口中更改图标

> ID：10189590
> 
> 赞同：6
> 
> 时间：2012-04-17T10:37:42.597
> 
> 标签：python, icons, matplotlib, tkinter

是否可以更改 Matplotlibe 图形窗口的图标？我的应用程序有一个按钮，可以打开一个带有图形的图形窗口（使用 Matplotlib 创建）。我设法修改了应用程序图标，但图形窗口仍然有 Tkinter 典型的“Tk”图标。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-18T11:07:07.020

我以这种方式解决了它：在按下创建图形的按钮之前`imshow()`，`show()`我以这种方式初始化图形：

```
plt.Figure()
thismanager = get_current_fig_manager()
thismanager.window.wm_iconbitmap("icon.ico") 
```

所以当我按下`show()`窗口时有我想要的图标。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T11:25:55.940

对我来说，以前的答案不起作用，而是需要以下内容：

```
from Tkinter import PhotoImage
import matplotlib

thismanager = matplotlib.pyplot.get_current_fig_manager()
img = PhotoImage(file='filename.ppm')
thismanager.window.tk.call('wm', 'iconphoto', thismanager.window._w, img) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-06T04:53:42.853

只需在此处添加此内容，现在 Qt5Agg 后端已成为主流。*它与 Sijie Chen*的回答中概述的 Qt4Agg 后端相似（几乎相同） 。

```
import os
import matplotlib.pyplot as plt
from PyQt5 import QtGui

# Whatever string that leads to the directory of the icon including its name
PATH_TO_ICON = os.path.dirname(__file__) + '/static/icons/icon.ico'

plt.get_current_fig_manager().window.setWindowIcon(QtGui.QIcon(PATH_TO_ICON)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-09T06:01:57.017

如果您使用的是 Qt4Agg 后端，以下代码可能会对您有所帮助：

```
thismanager = plt.get_current_fig_manager()
from PyQt4 import QtGui
thismanager.window.setWindowIcon(QtGui.QIcon((os.path.join('res','shepherd.png')))) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-12T15:21:00.423

我发现在带有 PyQT5 的 OS X 下，doing`plt.get_current_fig_manager().window.setWindowIcon()`没有任何效果。要更改停靠图标，您必须调用`setWindowIcon()`实例`QApplication`，而不是窗口。

对我有用的是：

```
QApplication.instance().setWindowIcon(QtGui.QIcon(icon_path)) 
```

请注意，直到`QApplication.instance()`您`None`实际创建一个图形，所以先这样做。

# c - 使用c检测文件上的重复行

> ID：10189594
> 
> 赞同：0
> 
> 时间：2012-04-17T10:38:10.443
> 
> 标签：c, search, file-io, csv

我有一个包含大约 (15000-25000) 行（固定大小）的 csv 文件，我想知道如何使用 c 语言检测重复的行。

输出示例如下：

```
0123456789;CUST098WZAX;35 
```

我没有记忆或时间限制，所以我想要最简单的解决方案。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T11:58:39.333

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct somehash {
        struct somehash *next;
        unsigned hash;
        char *mem;
        };

#define THE_SIZE 100000
struct somehash *table[THE_SIZE] = { NULL,};

struct somehash **some_find(char *str, unsigned len);
static unsigned some_hash(char *str, unsigned len);

int main (void)
{
char buffer[100];
struct somehash **pp;
size_t len;

while (fgets(buffer, sizeof buffer, stdin)) {
        len = strlen(buffer);
        pp = some_find(buffer, len);
        if (*pp) { /* found */
                fprintf(stderr, "Duplicate:%s\n", buffer);
                }
        else    {       /* not found: create one */
                fprintf(stdout, "%s", buffer);
                *pp = malloc(sizeof **pp);
                (*pp)->next = NULL;
                (*pp)->hash = some_hash(buffer,len);
                (*pp)->mem = malloc(1+len);
                memcpy((*pp)->mem , buffer,  1+len);
                }
        }
return 0;
}
struct somehash **some_find(char *str, unsigned len)
{
unsigned hash;
unsigned slot;
struct somehash **hnd;

hash = some_hash(str,len);
slot = hash % THE_SIZE;
for (hnd = &table[slot]; *hnd ; hnd = &(*hnd)->next ) {
        if ( (*hnd)->hash != hash) continue;
        if ( strcmp((*hnd)->mem , str) ) continue;
        break;
        }
return hnd;
}

static unsigned some_hash(char *str, unsigned len)
{
unsigned val;
unsigned idx;

if (!len) len = strlen(str);

val = 0;
for(idx=0; idx < len; idx++ )   {
        val ^= (val >> 2) ^ (val << 5) ^ (val << 13) ^ str[idx] ^ 0x80001801;
        }
return val;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:21:06.307

我不确定这是否是*最简单*的解决方案，但是...

如果每个条目看起来像这样：

```
0123456789;CUST098WZAX;35 
```

...并且最后两个字符始终是来自`00`-的值`99`，您可以使用此值来索引存储桶。这个桶是 100 个数组中的一项（即 0-99，就像值一样），每个都指向存储属于该桶的字符串的结构的链表。

将字符串分类到桶中后，识别重复项所需的完整字符串比较的数量（希望）大大减少 - 只需比较同一桶中的字符串。

如果所有条目具有相同的值，这会将所有条目放在同一个桶中，仅在比较步骤中将此方法降级为 O(n^2)。但是假设值的分布不同，这种方法在实践中会更快。

*（当然，我刚刚描述了一个哈希表，但它具有比通常使用的更天真的哈希函数。）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T12:35:12.307

最简单的算法：

1.  将原始文件作为行数组 A 加载到内存中。
2.  创建一个相同大小的单独数组 B。
3.  遍历 A。对 B 中的当前行进行线性搜索。如果不存在，将其添加到 B 和输出文件中。

这是非常简单、残酷、低效的 O(n^2) 解决方案。假设你有基本的 C 技能，实现起来非常简单。

顺便说一句，如果顺序无关紧要，您可以对文件进行排序，然后任务就更简单了。您只需首先对文件进行排序，然后为最后一行设置变量，您可以根据该变量检查当前，如果它等于最后一个则跳过当前。

# php - 我可以将 zend 框架与不使用它的 php 文件一起使用吗

> ID：10189595
> 
> 赞同：1
> 
> 时间：2012-04-17T10:38:10.647
> 
> 标签：php, zend-framework

我现在正在一个团队中使用 php 构建网站。听说Zend框架还算方便，希望用它来写页面。但是，团队中的一些成员在之前的工作中并没有使用该框架。不知道他们的作品和我的作品一起使用会不会有什么问题？所以我想知道我们是否有可能在网站的一部分使用 Zend 框架，而团队的其他成员不使用这个框架来构建网站的其余部分？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:42:43.783

我不太确定你的问题

但是对于网站的一部分使用 ZF 并为其他部分使用 PHP 看起来很复杂。但是，这是可能的。您可以使用 .htaccess 说明 URL 不是由 ZF 定义的（我曾经将它用于附加在 ZF 网站上的博客）

不要犹豫，评论任何其他答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:43:34.797

这取决于你如何分配工作。Zend Framework 是模块化的，因此您不必拘泥于使用整个框架。您只需选择所需的组件即可。我建议您至少为应用程序启动和路由使用一个框架。合并这些部分将是维护 imo 的麻烦。

# blackberry - 黑莓中的 TouchEvent() 和 FieldChange()

> ID：10189596
> 
> 赞同：0
> 
> 时间：2012-04-17T10:38:12.943
> 
> 标签：blackberry, touch-event

我正在使用两种分辨率，一种是触摸屏，另一种是非触摸

我设计了一个屏幕，其中有 10 个自定义按钮被添加到 VerticalFieldManager CustomButtonField 类扩展了 Field 类

我已经为 touchScreens 使用了 2 种方法 fieldChange() 和 touchEvent() 问题是每当我点击按钮时，它都会为 touchevent() 正确激活，但随后 fieldChange() 方法也会被立即调用

我该怎么办？？有什么问题 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:59:04.473

检查问题[BlackBerry touchEvent outside Field triggers fieldChanged](https://stackoverflow.com/questions/6398282/blackberry-touchevent-outside-field-triggers-fieldchanged)由[Paul Sylliboy](https://stackoverflow.com/a/6418301/431639)和[Arhimed](http://ttp://stackoverflow.com/a/6422582/431639)提供的答案。

在这些答案中，有一种方法仅更新`boolean`变量以识别发生了触摸事件，并基于在or方法`boolean`上执行操作的值。`fieldChanged``navigationClick`

> `navigationClick(int status, int time)` 如果在 执行`protected boolean touchEvent(TouchEvent message)`. 并 `navigationClick(int status, int time)`调用 `fieldChangeNotify(0)`导致`fieldChange()`（在问题中）或被调用的方法`public void fieldChanged(Field field, int context)` 。

# sharepoint - SharePoint 2010 在进入编辑模式时删除了 javascript 附加/前置

> ID：10189601
> 
> 赞同：0
> 
> 时间：2012-04-17T10:38:23.457
> 
> 标签：sharepoint, sharepoint-2010

进入编辑模式时，sharepoint 是否会删除 javascript？我有一个脚本，在图片下方附加图像替代文本。

前任：

```
$('.picture').each(function( i, elm){
   $(this).append("<p class='picture'>"+$(elm).find('img').attr('alt')+"</p>");
}); 
```

（代码有效，如果不是，可能是拼写错误）

但是当我进入编辑模式时，sharepoint 会删除脚本。如何保持 javascript 在编辑模式下运行？

# netty - Netty 架构——关于 NioWorker 循环的问题

> ID：10189603
> 
> 赞同：1
> 
> 时间：2012-04-17T10:38:36.023
> 
> 标签：netty

我正在研究 NioWorker.run() 方法并试图了解它是如何工作的。下面是代码的简化版本：

```
 for(;;) {           
      try {
        SelectorUtil.select(selector);

        if (wakenUp.get()) {
          selector.wakeup();
        }

        cancelledKeys = 0;
        processRegisterTaskQueue();
        processWriteTaskQueue();
        processSelectedKeys(selector.selectedKeys());

      } catch (Throwable t) {
      }
    } 
```

更不用说它的作用是什么，但是我有一些问题：

**1.** Selector.select(selector) 以 500 毫秒超时执行选择。为什么它不仅仅是一个阻塞调用？

**2.**以下片段的目的是什么？为什么我们需要执行唤醒？

```
 if (wakenUp.get()) {
       selector.wakeup();
    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T19:12:55.067

1.  我们使用基于时间的阻塞 Selector.select(..) 调用，因为我们还通过 processRegisterTaskQueue() 方法处理向工作人员注册新通道。如果我们不使用基于时间的调用，我们将面临放慢速度的风险。在最近的版本中，我们甚至更改了 Selector.select(..) 调用以使用 10ms。

2.  请参阅 [1] 处的评论

[1] [https://github.com/netty/netty/blob/3/src/main/java/org/jboss/netty/channel/socket/nio/AbstractNioWorker.java#L202](https://github.com/netty/netty/blob/3/src/main/java/org/jboss/netty/channel/socket/nio/AbstractNioWorker.java#L202)

# php - 为 foreach() php 提供的参数无效

> ID：10189604
> 
> 赞同：-2
> 
> 时间：2012-04-17T10:38:37.713
> 
> 标签：php, foreach

我有 index.php 和 index2.php

这是 index.php：

![在此处输入图像描述](../Images/02bb807cff12b4013ad0ef7f59113130.png)

当我提交此值时，index2.php 将显示。这是 index2.php：

![在此处输入图像描述](../Images/8e6a950b3c95ea197f3665feefa2bb96.png)

我不明白，为什么会显示此错误消息。

无论如何，提交这些选定的值（index2.php）它会从数据库中说出一个疾病名称。单击提交，此文本显示（下）：

![在此处输入图像描述](../Images/47f0881fca04c60a4dcce3ec71c75129.png)

我在这里讨厌我的代码：

### 索引.php

```
<?php 
$con = mysql_connect("localhost","root","");
mysql_select_db("symptomchecker",$con) or die(mysql_error());

$q = "select dtid,diseasetype from disease_type";

$result = mysql_query($q,$con) or die(mysql_error());

$numRB = mysql_num_rows($result);

echo "<html><head><title>Disease Type</title></head><body><h1>Disease List</h1></br><form action='index2.php' method='post'>";

$i=0;
while($row = mysql_fetch_array($result)){
    echo $row['diseasetype'];
    echo "<input type='radio' name='diseasetype' id='pet1' value='$row[dtid]' />" ;
    echo "<br />";
    $i++;
}
echo " <input type='submit' value='submit' name='submit'></form></body></html>";
?> 
```

### index2.php：

> ```
> $diseasetypeid = "$_POST[diseasetype]";
> 
> $j=0;$i=0;
> $query = "select did from disty_dis_rel where dtid = ".$diseasetypeid."";
> $result1 = mysql_query($query,$con) or die(mysql_error());
> echo "<html><head><title>symptom</title></head><body><h1>symptom List</h1></br><form action='' method='post'>";
> 
> while($row =  mysql_fetch_array($result1))
> {
>   $z=$row['did'];
>   $query2 = "select sid,symptomname from symptom where sid = ".$z."";
>   $result2 =  mysql_query($query2,$con) or die(mysql_error());
>   while($row2 = mysql_fetch_array($result2))
>   {
>       echo $row2['symptomname'];
>       echo "<input type='checkbox' name='pets[$i]' id='pet1' value='$row[sid]' />" ;
>       echo "<br />";
>       $i++;
>       }
>   $j++;
>   }
> echo " <input type='submit' value='submit' name='submit'></form></body></html>";
> 
> if(isset($_REQUEST[submit]))
> {
>   **foreach ($_REQUEST[pets] as $key=>$values)**
>   {
>       $yy.=$values."-";
>   }
>   $yy=rtrim($yy,"-");
> 
>   $xx = "select did,sids from dis_sym_rel where sids=".$yy."";
>   $result3 = mysql_query($xx,$con) or die(mysql_error());
> 
>   while($row = mysql_fetch_array($result3)){
>       $p=$row[did];
>       $xxx = "select did,diseasename from disease where did=".$p."";
>       $result4 = mysql_query($xxx,$con) or die(mysql_error());
>       while($row4 = mysql_fetch_array($result4))
>       {
>           echo $row4[diseasename];    
>       }
>   }
> }
> ?> 
> ```

###doublestar### 之间的线是错误线（49）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:41:06.767

就在`index2.php`：

```
$diseasetypeid = "$_POST[diseasetype]"; 
```

应该

```
$diseasetypeid = $_POST["diseasetype"]; 
```

和

```
if(isset($_REQUEST[submit])) 
```

真的应该是这样的：

```
if($_SERVER['REQUEST_METHOD'] == 'POST') 
```

这将检查 REQUEST_METHOD 而不是表单值。和

```
foreach ($_REQUEST[pets] as $key=>$values) 
```

应该

```
foreach ($_REQUEST['pets'] as $key=>$values) 
```

我建议你阅读关于[sql injection](http://php.net/manual/en/security.database.sql-injection.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:20:54.107

这段代码：

```
foreach ($_REQUEST[pets] as $key=>$values) 
```

应改为：

```
foreach ($_REQUEST['pets'] as $key=>$values) 
```

您应该引用（如果它是字符串，则在数组键之前和之后加上撇号或双引号）。

然后，您必须有以下表格（我在您的 index.php 文件中找不到它）。

```
<input type="text" name="pets[]" />
<input type="text" name="pets[]" />
<input type="text" name="pets[]" />
<input type="text" name="pets[]" />
<input type="text" name="pets[]" /> 
```

数组键 'pets' 是您输入的名称。[] 表示数组。在 foreach ($something as ...) 中，$something 必须是一个数组（或对象）。

# javascript - 如何在单击其他图像时更改div的图像

> ID：10189607
> 
> 赞同：1
> 
> 时间：2012-04-17T10:38:56.703
> 
> 标签：javascript, html

我在 HTML 中有两个图像 div 我希望一个图像的 onclik 另一个图像应该改变

```
 <div class="image_21"><img src="pagetwo_graph_two_4.png"/></div>
        <div class="alignment"><img src="pagetwo_graph_one.png"/></div>
        <div class="image_one"><img src="pagetwo_graph_two_1.png"/></div>
       <div class="image_two"><img src="pagetwo_graph_two_2.png"/></div>
        <div class="option_image"><img src="option1.png"/></div>
        <div class="option_image_label">Option 1</div>
        <div class="option_image_one"><img src="option1.png"/></div>

         <div class="option_image_label_one">Option 2</div> 
```

我希望点击 option_image_one 它应该改变 image_one 和 imagetwo 的图像

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T10:42:56.450

**更新**

```
<html>
 <head>
  <script type="text/javascript">
   function changeImage(){
    document.getElementById('toChange').src='3.jpg';
   }
  </script>
 </head>
 <body>
  <div class="option_image_one"><img src="1.jpg" onclick="changeImage()"/></div>
  <div class="image_two"><img src="2.jpg" id="toChange"/></div>
 </body>
</html> 
```

这是对我有用的代码

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T10:49:14.580

```
onclick = "document.getElementById('option_image_one').getElementsByTagName('img')[0].src='pagetwo_graph_two_2.png' " 
```

它会起作用的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T10:41:33.840

最好的选择是给图像一些 id，然后做类似的事情`document.getElementById('yourId').src='newimage'`（这应该是你分配给第一个 div 上的 onClick 事件的一些 js 函数）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T10:42:38.577

您可以尝试以下方法：

```
 <div class="option_image_one">
  <img onclick="document.getElementById('image2').src='http://www.w3schools.com/images/compatible_firefox.gif'" src="http://www.w3schools.com/images/compatible_chrome.gif"/>
 </div>
 <div class="image_two">
  <img id="image2" src="http://www.w3schools.com/images/compatible_safari.gif"/>
 </div> 
```

请注意，我已将 ID 添加到第二个`image`.

查看此[交互式 HTML/JS 编辑器上的实时示例](http://jsfiddle.net/877hX/embedded/result/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T10:43:53.147

div没用

```
<img src="option1.png" id="img1" onclick="document.getElementById('img2').src='newImage.png'"/>
<img src="pagetwo_graph_two_2.png" id="img2"/> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-17T10:46:55.277

如果你可以使用 jQuery，它会是这样的：

```
$(".option_image_one img").onclick(function(event) {
    $(".image_two img").attr('href','different_image,jpg').hide().fadeIn("fast");
}); 
```

要使用 jQuery，请通过在标题中包含以下内容来导入 jQuery 库：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-17T12:06:33.890

根据 Thomas 和 Filype 的回答，我建议使用 div 但将 onClick 用于 img 标签而不是 div 标签。

这是为了将来的增强，以便如果您想向这些 div 添加任何其他内容。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-08-24T11:14:46.013

```
complete code just copy it and paste
jQuery(document).ready(function(){
        jQuery('.small').click(function(){
            if(jQuery(this).hasClass('active')!=true);
            {
                jQuery('.small').removeClass('active');
                jQuery(this).addClass('active');
                var new_link=jQuery(this).children('img').attr('src');
                jQuery(countainer).children('img').attr('src',img_link);

            }
            });
        });
</script>
</head>

<body>

    <div class="countainer">
        <img src="image/slideme-jQuery-slider.jpg" width="400" heiht="200"/ alt="">
    </div>
    <div class="clear"></div>
    <br/>
    <div class="mini">
        <div class="small active">
            <img src="image/Galleria-JavaScript-Image-Gallery.jpg" height="50" width="50" alt="" />
        </div>
        <div class="small">
            <img src="image/Trip-Tracker-slideshow.jpg" height="50" width="50" alt="" />
        </div>

        <div class="small">
            <img src="image/Visual-Lightbox-Gallery.jpg" height="50" width="50" alt="" />
        </div>

        <div class="small">
            <img src="image/RoyalSlider_-_Touch-Enabled_Image_Gallery_and_Content_Slider_Plugin.jpg" alt="" height="50" width="50" />
        </div>
        <div class="small">
            <img src="image/UnoSlider-jQuery-image-slider.jpg" height="50" width="50" />

        </div>
    </div> 
```

# jquery - 处理程序未分配给 KoGrid 的过滤器字段 (Knockout + jQuery)

> ID：10189616
> 
> 赞同：1
> 
> 时间：2012-04-17T10:39:23.680
> 
> 标签：jquery, grid, knockout.js

我正在尝试自定义[KoGrid](https://github.com/ericmbarnard/KoGrid/)的过滤器，以便我可以根据“从-到”逻辑过滤包含日期数据的列（可以在[此处](http://ericmbarnard.github.com/KoGrid/examples/Complex-Server-Side-Paging.html)找到带有过滤器的 KoGrid 示例）。我想要的是在单击适当的过滤器字段时显示一个对话框，其中包含使用 Datepicker 的 From 和 To 输入。

```
var vm = {
            filterInfo: ko.observable(),
            myObsArray: arr
        };
        ko.applyBindings(vm); 
...
$("div.kgheadercell.col5").on("click", "input", function (event) {               
   $("#popup").dialog("open");
}); 
```

然而，这似乎不能正常工作，即一旦我单击文本字段，对话框就不会显示。但是，如果我尝试在 Chrome 的控制台中输入代码的最后一位，则处理程序已正确绑定，并且一旦我单击文本字段就会出现对话框。

但是，如果我尝试

```
$("body").on("click", "input", function (event) {               
 $("#popup").dialog("open");
}); 
```

这成功添加了处理程序，因为当我单击任何（显然）文本字段时，我能够看到对话框。

这段代码之后是否发生了一些事情，以便它删除或更改处理程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:50:11.503

KoGrid 在内部使用模板来管理网格的布局。有可能是：

*   当您尝试将“点击”处理程序附加到标题字段时，网格尚未完成渲染
*   标头的模板已重新呈现，有效地删除了您的点击处理程序

您可以选择使用自定义标题模板。这在 KoGrid 中还没有记录，但是功能在那里。`<input>`您可以在用作过滤器框的元素上使用单击绑定并手动设置其值：

[http://jsfiddle.net/ericbarnard/hCQ7r/1/](http://jsfiddle.net/ericbarnard/hCQ7r/1/)

看看我是如何`doSomething`通过单击过滤器将要调用的 viewModel 上的函数连接起来的`<input>`（在打开过滤器行之后）

# wordpress - RSS 提要在 wordpress 上无效

> ID：10189618
> 
> 赞同：0
> 
> 时间：2012-04-17T10:39:27.497
> 
> 标签：wordpress, rss, feedburner

当我单击我网站的 rss 提要 URL（来自 feedburner 和原始 atom 提要）时，我收到一条错误消息：

“此页面包含以下错误：

第 2 行第 6 列的错误：仅在文档开头允许 XML 声明 下面是页面的呈现，直到第一个错误。”

我已经检查了 rss 提要验证器，这就是我得到的：

[http://validator.w3.org/feed/check.cgi?url=http%3A%2F%2Ffeeds.feedburner.com%2FNoCamels](http://validator.w3.org/feed/check.cgi?url=http%3A%2F%2Ffeeds.feedburner.com%2FNoCamels)

我尝试了他们建议的一切（也重新启动了插件） - 但没有任何效果。

拜托我需要你的帮忙！

尤瓦尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:14:59.253

You simply have a blank line outside php tags in your wordpress files.

You should check and remove blank lines in :

*   wp-config.php
*   functions.php of your theme
*   *.php in your plugins
*   ...etc

Take a look here : [http://www.quickonlinetips.com/archives/2009/05/wordpress-feed-xml-parsing-errors/](http://www.quickonlinetips.com/archives/2009/05/wordpress-feed-xml-parsing-errors/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:02:10.693

我有同样的问题。罪魁祸首是 wp-trackback.php。底部空白处。我清除了空白区域，瞧。RSS 现在正在工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-16T13:00:02.697

我也有这个问题。我从[第 2 行第 6 列的错误中解决了](http://www.gogorapid.com/how-to-fix-xml-site-map/)

您只需在 WordPress 文件中的 php 标签之外有一个空行。

您应该检查并删除以下空白行：

wp-config.php functions.php of your theme *.php in your plugins ...etc 看看这里

# windows - 无法在 Windows 7 的 DOS 中执行 cvs 命令

> ID：10189624
> 
> 赞同：0
> 
> 时间：2012-04-17T10:39:53.040
> 
> 标签：windows, cmd, windows-7, cvs

在 windows 7 的 cmd.exe 中输入 cvs 时，没有任何输出。cvs 的路径已经在 PATH :C:\Program Files (x86)\CVSNT\; 当键入“C:\Program Files (x86)\CVSNT\cvs”时，那里有输出。但是当输入其他.exe 例如calc 时，可以执行相应的程序。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:49:39.380

这听起来可能是一个奇怪的建议，但请尝试`cvs.exe`而不是仅仅`cvs`. 如果不指定扩展名，您的操作系统将搜索与名称匹配的第一个文件`cvs`. 如果它碰巧`cvs.bat`在您的路径之一中找到，那么它将执行 .bat 文件而不是 .exe。

如果您在同一目录中有 cvs.bat、cvs.com 和 cvs.exe。优先顺序如下：

1.  简历网
2.  cvs.bat
3.  文件

我强烈怀疑在路径变量中定义的文件夹之一中隐藏了一个空白的 cvs.bat 文件，并且当您键入`cvs`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-01T17:26:37.623

嗨，答案是使用完整路径运行 exe，如“C:\Program Files (x86)\CVSNT\cvs.exe”，后跟 CVS 参数，如 -q Checkout.....

# c# - 如何为多个 DataGridView 使用相同的 DataSource，并在每个 DataGridView 上应用不同的过滤器？

> ID：10189630
> 
> 赞同：2
> 
> 时间：2012-04-17T10:40:13.190
> 
> 标签：c#, .net, data-binding, datagridview, filter

我是 C# 和 .NET 的初学者，我遇到以下问题（使用 .NET 4.5）：

我有三个 DataGridViews 应该显示来自 xml 文件的数据。每个 DataGrid 都应过滤其结果，因此它们的 xml 条目分布在三个 DataGridView 上。

我尝试了以下方法：

```
DataSet dataSet1 = new DataSet();
dataSet1.ReadXml('some-existing-file.xml');

DataTableCollection tables = dataSet1.Tables;
DataView view1 = new DataView(tables[0]);

BindingSource source1 = new BindingSource();
source1.DataSource = view1;
source1.Filter = "color = 'red'";
gridView1.DataSource = source1;

BindingSource source2 = new BindingSource();
source2.DataSource = view1;
source2.Filter = "color = 'white'";
gridView2.DataSource = source2;

BindingSource source3 = new BindingSource();
source3.DataSource = view1;
source3.Filter = "color = 'blue'";
gridView3.DataSource = source3; 
```

但这不起作用。所有三个 GridView 都使用最后一个过滤器（“蓝色）”。

XML 看起来像这样（简化）：

```
<?xml version="1.0" encoding="utf-8"?>
<collection>
    <entry>
        <color>blue</color>
        <headline>Some headline</headline>
    </entry>
    [...]
</collection> 
```

当我想将更改写回 xml 文件时，是否以正确的方式过滤相同的数据集？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T10:47:47.813

采取三个视图，因为我认为所有三个过滤器都应用于视图，并且您会得到显示最后一个过滤器结果的输出。你可以稍后改进它，如果它有效

```
DataView view1 = new DataView(tables[0]);
DataView view2 = new DataView(tables[0]);
DataView view3 = new DataView(tables[0]);

BindingSource source1 = new BindingSource();
source1.DataSource = view1;
source1.Filter = "color = 'red'";
gridView1.DataSource = source1;

BindingSource source2 = new BindingSource();
source2.DataSource = view2;
source2.Filter = "color = 'white'";
gridView2.DataSource = source2;

BindingSource source3 = new BindingSource();
source3.DataSource = view3;
source3.Filter = "color = 'blue'";
gridView3.DataSource = source3; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T10:48:39.800

DataView 可能有一个由过滤器修改的公开可读的集合。当您设置数据源时，以这种方式提供 view1 将提供 DataView 的引用，而不是副本。这意味着所有过滤器都在修改同一个 DataView 实例中的同一个可查看集合（这可以解释为什么最后一个过滤器是正在工作的过滤器）。

我建议为每个过滤案例创建单独的 DataView 实例/副本。但是，这将保留在您的范围内，因为它们仍将引用从您的 xml 文件加载的相同数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T10:49:38.007

`DataView view1 = new DataView(tables[0]);`应更改为为每个 gridview 准备新的 DataView obj，如下所示。

```
DataView view1 = new DataView(tables[0].Copy());
DataView view2 = new DataView(tables[0].Copy());
DataView view3 = new DataView(tables[0].Copy()); 
```

# java - 如何使用 Hive JDBC 从 Java 程序调用 Shell 脚本

> ID：10189632
> 
> 赞同：0
> 
> 时间：2012-04-17T10:40:28.783
> 
> 标签：java, shell, hive

我在 Hive 中实施了一项任务。

但是现在我需要调用我编写的用于使用 SQOOP 从 SQL Server 导入 Hive 中的表的 Shell 脚本。在那个 Shell 脚本中，我编写了一个用于在 HIve 中导入表的 SQOOP 命令。

我试图在其中一个演示应用程序中调用 Shell 脚本，但在程序运行时没有采取任何行动。我只看到空白控制台。

如果出现 Hive，我需要做一些额外的事情吗？请帮我解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:55:00.763

尝试运行`/bin/sh /home/....TableToExport.sh`。

这明确定义了解释您的脚本的 shell。这应该有效。如果它不起作用，请尝试简化您的命令行。从运行简单的命令开始，例如`ls`or `hostname`。当它起作用时，尝试执行更复杂的事情。

一般来说它应该工作。你走对了。

# git - Debian 上的 Git 克隆问题

> ID：10189641
> 
> 赞同：1
> 
> 时间：2012-04-17T10:40:54.500
> 
> 标签：git, bitbucket

让我们先做一个简短的总结。我所有的私人存储库都保存在 BitBucket 上，我使用 OSX 上的 Git Tower 检查了这些，我还有一个运行 debian 的本地开发服务器，我使用 samba 连接到它。

现在我遇到的问题才刚刚开始发生，据我所知，linux服务器没有任何改变。

我将项目签出到 linux 服务器，完成后我检查文件，所有文件都说它们已被修改，即使我刚刚签出项目。如果我将其签出到我的 mac 桌面并检查文件，一切都很好。

什么会导致这种情况？

我很感激任何帮助。

问候，

彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:46:35.103

Git 不存储和/或保留文件创建/修改时间，所以你看到的是正常的，除非我遗漏了什么。

# c# - 如何使用 .tt 模板创建文件夹？

> ID：10189643
> 
> 赞同：5
> 
> 时间：2012-04-17T10:41:01.583
> 
> 标签：c#, .net, t4

我正在尝试构建一个模板，该模板将在不同的文件夹中创建一系列文件，但我没有找到任何示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T10:52:08.550

您可以使用`RenderToFile`from [t4Toolbox](https://github.com/olegsych/T4Toolbox)来执行此操作。

截至 2016.10.12 的文档示例的片段：

> *   使用两个 C# 类库项目 ClassLibrary1.csproj 和 ClassLibrary2.csproj 创建一个 Visual Studio 解决方案。
>     
>     
> *   将一个名为 CodeGenerator.tt 的新代码生成文件添加到第一个类库项目中。
>     
>     
> *   将新文件的内容修改为如下所示

```
<#@ template language="C#" hostspecific="True" debug="True" #>
<#@ output extension="txt" #>
<#@ include file="T4Toolbox.tt" #>
<#
    SampleTemplate template = new SampleTemplate();
    template.Output.File = @"SubFolder\SampleOutput.txt";
    template.Output.Project = @"..\ClassLibrary2\ClassLibrary2.csproj";
    template.Render();
#>
<#+
    public class SampleTemplate : Template
    {
        public override string TransformText()
        {
            this.WriteLine("Hello, World!");
            return this.GenerationEnvironment.ToString();
        }
    }
#> 
```

[原始文件](http://www.olegsych.com/2009/03/t4-toolbox-generating-files-in-different-folders-and-projects/)

[回程机](https://web.archive.org/web/20160425021329/http://www.olegsych.com/2009/03/t4-toolbox-generating-files-in-different-folders-and-projects/)

# asp.net-mvc-2 - MVC2 和 Google 自定义搜索

> ID：10189647
> 
> 赞同：0
> 
> 时间：2012-04-17T10:41:17.577
> 
> 标签：asp.net-mvc-2, google-custom-search

我正在尝试将谷歌自定义搜索合并到我的 MVC2 应用程序中。我已经注册了谷歌自定义搜索并获得了 API 密钥和其他设置。我的视图上有一个输入类型文本框和一个搜索按钮。现在我如何将搜索字符串（来自我的文本框）传递给 google API 并接收搜索结果并将它们显示在相同或其他视图页面上？任何相关的帖子，示例都会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T14:13:00.077

[在 ASP.NET 宽度中实现搜索 Google 自定义搜索](http://dotnetslackers.com/articles/aspnet/Implementing-Search-in-ASP-NET-with-Google-Custom-Search.aspx)看起来很不错。只要您不将 Google 提供的表单标记转换为`form runat="server"`webforms 样式标记，它就应该在 MVC 上下文中正常工作。

# c# - 短信源地址中的积分消失

> ID：10189658
> 
> 赞同：1
> 
> 时间：2012-04-17T10:42:09.897
> 
> 标签：c#, asp.net, xmlhttprequest, serverxmlhttp

我正在从构建在 ASP.NET C# 中的 Web 应用程序发送短信，但由于某种原因，当我添加工作时`SourceAddress`，它会通过.`parameter.Add("SourceAddress", "BPD.co.uk");``BPD.co.uk``BPDcouk`

我怎样才能使积分出现？

这是我的 C# 代码：

```
public void SendSms(string MobileNumber, string SMSContent)
{
    Dictionary<string, string> parameter = new Dictionary<string, string>();

    parameter.Add("Action", "Send");
    parameter.Add("DestinationAddress", MobileNumber);
    parameter.Add("SourceAddress", "BPD.co.uk");
    parameter.Add("Body", SMSContent);
    parameter.Add("ValidityPeriod", "86400");
    string resultcode = api_connect("nsp04456", "pword", parameter);
} 
```

这是对 API_Connect 的调用

```
private string api_connect(string Username, string Password, Dictionary<string, string> ParametersDict)
{
    string url = "http://api.sms.co.uk/api/api.php";
    string poststring = "Username=" + Username + "&";
    poststring = poststring + "Password=" + Password;
    // Turn the parameter dictionary object into the variables
    foreach (KeyValuePair<string, string> item in ParametersDict)
    {
        poststring = poststring + "&" + item.Key + "=" + item.Value;
    }

    MSXML2.ServerXMLHTTP60 xmlHttp = new MSXML2.ServerXMLHTTP60();// Server.CreateObject("MSXML2.ServerXMLHTTP.4.0");
    xmlHttp.open("POST", url, false);
    xmlHttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
    xmlHttp.send(poststring);

    return xmlHttp.responseText;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:47:00.287

我猜你正在使用的 API 正在清理你的参数并删除它认为不应该存在的东西。您可以尝试转义参数的值并添加像 BPD\.co\.uk 这样的斜线，看看会发生什么

# git - Git：分叉并仅使用解决方案的一部分

> ID：10189669
> 
> 赞同：1
> 
> 时间：2012-04-17T10:42:44.847
> 
> 标签：git, git-fork

是否可以分叉一个解决方案，但只使用它的一部分？**假设我只想要 X 个命名空间中的 1 个，它们都位于不同的文件夹**中。当然假设这样做没有依赖性问题。

**我仍然希望能够从上游获取最新的更改**，但仅限于适用于我的部分解决方案。

请引导我完成所需的 Git 命令。

**更新：**如果解决方案只是删除文件，那么如何避免未来的合并问题？我如何告诉 Git 这些删除是对我的仓库的最新且正确的更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:49:19.907

我认为你可以做一个通常的分支，然后删除你不需要的部分。您仍然可以拉动更改（尽管有轻微的冲突），但是，显然，很难将任何更改推回（只能通过樱桃挑选）。

# php - 使用 mysql_pconnect() 获取多个连接

> ID：10189670
> 
> 赞同：0
> 
> 时间：2012-04-17T10:42:49.710
> 
> 标签：php, xampp, mysql-pconnect

我正在使用 mysql_pconnect() 连接到 mysql。但是当许多用户使用该网站时，它会给出错误“与 mysql 的多个连接”。

为此，我在 mysql 的 my.cnf 文件中设置了变量 max_connections=500 max_user_connections=1000。

这是可以使用还是有任何其他方法可以解决这个问题（“与mysql的多个连接”）。

我正在为 php 和 mysql 使用 xampp。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:44:20.757

这是增加最大连接数的方法。您可以[在此处](http://www.thoughtlabs.com/2008/02/18/dealing-with-mysql-too-many-connections-error/)参考以获取更多见解，对于使用 mysql_pconnect，请[在此处阅读](https://stackoverflow.com/questions/247807/mysql-connect-vs-mysql-pconnect)

# maven - 本机库未在设备上运行

> ID：10189675
> 
> 赞同：4
> 
> 时间：2012-04-17T10:42:59.270
> 
> 标签：maven, libgdx

我已将 armeabi,armeabi-v7a 文件夹放入 libs 文件夹中，而不是放入 maven 存储库中。但是在使用 libgdx 时出现以下错误：

库“gdx-backend-jogl-natives.jar”包含不会在设备上运行的本机库。找到了以下库：

*   libgluegen-rt-linux32.so -libgluegen-rt.jnilib
*   libgluegen-rt-linux64.so
*   libjogl.jnilib
*   libjogl_awt.jnilib
*   libjogl_awt-linux32.so
*   libjogl_awt-linux64.so
*   libjogl-linux32.so
*   libjogl-linux64.so
*   liblwjgl.jnilib
*   liblwjgl.so
*   liblwjgl64.so
*   libopenal.so
*   libopenal64.so

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T06:39:05.713

gdx-backend-jogl-natives.jar 文件包含有关如何在桌面环境中创建窗口的基本信息。因此，当您提供 android 环境时，它会与 android 本机库发生冲突，因此会引发错误。所以你必须从项目中删除本机库，然后检查它是否会成功执行。

# php - 如何从匹配多个过滤器的表中获取数据？

> ID：10189677
> 
> 赞同：-8
> 
> 时间：2012-04-17T10:43:09.320
> 
> 标签：php, mysql

我有 2 个不同的表：tbl_records、tbl_users

我想从 tbl_records 中获取所有数据，这些数据由 f_name='Kr' 发布并且今天插入（记录日期）。

![数据库结构图](../Images/06c4349ae0e171f4ea80c9ae31c3f0ef.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:08:03.557

这将为具有 f_name 'Kr' 的用户返回 tbl_records 中的所有列，其中 date_of_record 在今天午夜或之后。

```
SELECT r.* FROM tbl_records r
INNER JOIN tbl_users u ON r.user_id = u.user_id
WHERE r.date_of_record >= DATE(NOW()) AND u.f_name LIKE 'Kr' 
```

尽管通常最好指定所需的确切列，以防以后更改表定义：

```
SELECT r.user_id, r.status, r.date_of_record FROM tbl_records r
INNER JOIN tbl_users u ON r.user_id = u.user_id
WHERE r.date_of_record >= DATE(NOW()) AND u.f_name LIKE 'Kr' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:48:27.367

尝试这个，

```
SELECT * FROM tbl_records AS tr JOIN tbl_users AS tu ON ( tr.user_id = tu.user_id ) AND tr.date_of_record = DATE(NOW()) AND tu.f_name = 'kr' 
```

# c# - 如何锁定单个骨架

> ID：10189678
> 
> 赞同：5
> 
> 时间：2012-04-17T10:43:10.363
> 
> 标签：c#, sdk, kinect

我正在使用 SDK 创建一个应用程序，其中我必须只有一个用户并将其锁定，因此如果其他人出现，即使该人更接近 Kinect，应用程序也会继续跟踪它跟踪的第一个骨架。

从 msdn 库中，我发现我可以使用 Skeletom Stream 类：

属性：AppChoosesSkeletons = 获取或设置一个布尔值，该值确定应用程序是否选择要跟踪的骨架。

方法：SkeletonStream.ChooseSkeletons (Int32) = 选择一个要跟踪的骨架。语法：public void ChooseSkeletons (int trackingId1)

我不太擅长编程，而且我使用的是 C#，我想写下类似代码的东西，但它说我使用的是无效表达式。

```
SkeletonFrame SFrame = e.OpenSkeletonFrame();
if (SFrame == null) return;

Skeleton[] Skeletons = new Skeleton[SFrame.SkeletonArrayLength];
SFrame.CopySkeletonDataTo(Skeletons);

int firstSkeleton = Skeletons[0].TrackingId;
sensor.SkeletonStream.ChooseSkeletons(int firstSkeleton);

if (firstSkeleton == null)
return;

if (SkeletonTrackingState.Tracked == firstSkeleton.TrackingState)
{
//body... 
```

问题在于`sensor.SkeletonStream.ChooseSkeletons(int firstSkeleton`，它说`int firstSkeleton cannot be used`。
有人可以帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T17:28:07.293

```
sensor.SkeletonStream.ChooseSkeletons(int firstSkeleton); 
```

你想用这条线实现什么？

如果您想将 firstSkeleton 转换为 int，则 Imo 可以这样写：

```
sensor.SkeletonStream.ChooseSkeletons((int) firstSkeleton); 
```

如果您不想强制转换它而只是将 int 变量提供给方法，只需编写：

```
sensor.SkeletonStream.ChooseSkeletons(firstSkeleton); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-28T15:58:09.717

您不能锁定骨架，但您可以选择要跟踪的骨架，无论其位置如何。当两个人都离开 Kinect 的视野时，情况会变得复杂。

通过设置`AppChoosesSkeletons`为 true，您可以选择要跟踪的用户。要指定要跟踪的一个或多个用户，请调用该`SkeletonStream.ChooseSkeletons`方法并传递一个或两个要跟踪的骨架的跟踪 ID（如果没有要跟踪的骨架，则不传递参数）。

像这样的东西：

```
private void ChooseSkeleton()
  {
    if (this.kinect != null && this.kinect.SkeletonStream != null)
        {
        if (!this.kinect.SkeletonStream.AppChoosesSkeletons)
        {
        this.kinect.SkeletonStream.AppChoosesSkeletons = true; // Ensure AppChoosesSkeletons is set
        }

        foreach (Skeleton skeleton in this.skeletonData.Where(s => s.TrackingState != SkeletonTrackingState.NotTracked))
        {
        int ID { get.skeleton[1]}//Get ID here
        }

      if (ID = 0)
      {
        this.kinect.SkeletonStream.ChooseSkeletons(ID); // Track this skeleton
      }
    }
  } 
```

# actionscript-3 - 将所有错误定向到文本字段

> ID：10189680
> 
> 赞同：0
> 
> 时间：2012-04-17T10:43:14.323
> 
> 标签：actionscript-3, error-handling, textfield, flash-cs5.5

我正在开发一个 Flash 游戏。它有一个复杂的加载方案，*可能*在许多不同的地方出错。

当我从创作工具进行测试时，无论是使用“测试电影”还是“调试电影”，它**总是成功**并且可以正常启动。

但是，每次我通过在浏览器中加载它来测试它时，**它总是失败！**我不知道在哪里看。

问题是这样的：有没有一种简单的方法可以将**所有内部错误**引导到舞台上的 TextField，在那里我可以真正检查出了什么问题？或者，在浏览器上进行测试时，还有其他方法可以捕获和显示错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:01:11.350

最好的方法是安装调试闪存播放器。~~据我所知，没有办法将内部错误导向任何地方。~~显然有，请参阅其他答案。然而，安装调试播放器可能仍然更容易。

[您可以从http://www.adobe.com/support/flashplayer/downloads.html](http://www.adobe.com/support/flashplayer/downloads.html)获取调试播放器（向下滚动一点）。

至于错误本身，有两个常见的原因：

1.  如果文件托管在其他地方，则需要设置跨域文件
2.  flash 文件的基本 url 不在您认为的位置，因此任何相对路径都无法正确解析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:34:05.260

您可以使用[UncaughtErrorEvent](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/UncaughtErrorEvent.html)通过方法拦截 swf 的所有内部未捕获错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T11:36:35.990

调试播放器是必须的。它允许您使用断点并在运行时查看应用程序状态（如变量值等）（如果您使用带有调试器的 IDE，如 Flash Builder ofc）。不过，在控制台窗口中查看跟踪非常烦人，因此您可以使用一些外部调试实用程序，例如[Monster Debugger](http://demonsterdebugger.com/)。它有一些不错的功能，例如在运行时突出显示 MovieClips（和其他 DisplayObjects）。

# php - 我应该在哪里以及如何定义 spl_autoload_register？

> ID：10189683
> 
> 赞同：0
> 
> 时间：2012-04-17T10:43:19.963
> 
> 标签：php, autoload

基本上，我有`myclass`位于其中的 php 类，`root/lib/php/`并且每当我调用它们时，我都希望从那里自动加载这些类。

现在我试图在主 index.php 文件中执行此操作。我应该如何以及在哪里正确定义`spl_autoload_register`以便我可以将它用于静态类：`myclass::mymethod()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:47:38.717

通常，自动加载编码包含在配置文件或包含在每个页面加载中的其他文件中，并包含站点运行所需的通用代码。

就自动加载而言，对类方法的静态调用与实例化类和调用方法没有什么不同。

一个例子：

```
/*** nullify any existing autoloads ***/
spl_autoload_register(null, false);

/*** specify extensions that may be loaded ***/
spl_autoload_extensions('.Class.php');

/*** class Loader ***/
define('BASE_APP_PATH', '/path/to/root/web/');
function classLoader($class){
     $filename = $class . '.Class.php';
     $file = BASE_APP_PATH.'classes/' . $filename;
     if (file_exists($file)){
        include $file;
     }
}

/*** register the loader functions ***/
spl_autoload_register('classLoader'); 
```

然后，您可以在不明确要求类文件的情况下执行此操作：

```
echo SomeClass::staticCall(); 
```

# ios - ShareKit facebook，登录后视图消失，对话框窗口中不显示链接

> ID：10189684
> 
> 赞同：3
> 
> 时间：2012-04-17T10:43:21.567
> 
> 标签：ios, facebook, sharekit

我正在尝试在我的应用程序（使用 ARC）、Xcode 3.2 和设备 4.x 或 5.0 中添加 ShareKit 2.0，

我已遵循 [https://github.com/ShareKit/ShareKit/wiki/Installing-sharekit中的所有配置步骤](https://github.com/ShareKit/ShareKit/wiki/Installing-sharekit)

在应用程序中，当我单击“Facebook”按钮进行分享时，我会登录 OK，但是一旦我登录，视图就会消失，并且不再显示。

它不会在对话窗口中显示链接。

任何想法？

# algorithm - 每分钟/小时/天实时跟踪前 100 个推特词

> ID：10189685
> 
> 赞同：8
> 
> 时间：2012-04-17T10:43:21.643
> 
> 标签：algorithm, nlp

我最近遇到了一个面试问题：

```
Given a continuous twitter feed, design an algorithm to return the 100 most
frequent words used at this minute, this hour and this day. 
```

我正在考虑一个系统，其哈希映射`word -> count`链接到当前分钟、小时和天的 3 个最小堆。

每条传入的消息都经过标记、清理，并在哈希映射中更新字数（如果单词已经存在，则在堆中增加键）

如果堆中不存在任何单词（并且堆大小 == 100），请检查它们是否`frequency > min value`在堆中，如果是，则提取最小并插入堆中。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-17T12:00:46.967

你的算法是一个好的开始，但它不会产生正确的结果。问题在于，您描述它们的哈希表是一条单行道：一旦添加了一个单词，它就会永远被计算在内。

您需要按照您描述的方式组织的`1440`(24*60)哈希映射数组；`word+count`这些是您的每分钟计数。您需要两个额外的哈希图 - 用于小时和天的滚动总计。

在哈希映射上定义两个操作 -`add`和`subtract`，其语义是合并相同单词的计数，并在计数降至零时删除单词。

每分钟您都会启动一个新的哈希映射，并从提要中更新计数。在一分钟结束时，将该哈希图放入当前分钟的数组中，将其添加到一小时和一天的滚动总数中，然后从每小时运行总数中减去一小时前的哈希图，并从每日运行总数中减去 24 小时前的哈希图。

最后，您需要一种方法来生成给定哈希映射的前 100 个单词。这应该是一项微不足道的任务 - 将项目添加到条目数组中`word+count`，按计数排序，并保留前 100 个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-24T19:28:20.287

dasblinkenlight 很好地指出了未将项目排除在哈希图中的错误。

不过，还有一件事要补充，要实际计算给定分钟/小时/天的前 K 个单词，使用分区 (O(n)) 比排序 (O(nlgn)) 更快：

1.  将分钟/小时/天字数的哈希图转储到数组中：O(n)
2.  使用中位数选择来获得第 K 个元素：O(n)
3.  围绕第 K 个元素进行分区：O(n)

HTH。

# wpf - 水平菜单？

> ID：10189690
> 
> 赞同：1
> 
> 时间：2012-04-17T10:43:42.620
> 
> 标签：wpf, menu

我想在我的用户控件顶部创建一个水平菜单，其项目水平填充整个空间。有六个项目，它只是一个级别 - 所以它不是真正的菜单。

我可以用菜单做到这一点吗？还是我最好使用每列一个按钮的六列网格，甚至是水平堆栈面板？这是我到目前为止所拥有的：

```
 <DockPanel>
    <DockPanel DockPanel.Dock="Top" KeyboardNavigation.TabNavigation="None">
        <Menu KeyboardNavigation.TabNavigation="Cycle" VerticalAlignment="Top" Background="DarkGray" Height="40">
            <MenuItem Header="_New"/>
            <MenuItem Header="_Load" />
            <MenuItem Header="_Save" />
            <MenuItem Header="_Validate" />
            <MenuItem Header="_Import" />
            <MenuItem Header="_Export"/>
        </Menu>
    </DockPanel>
</DockPanel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-08T15:58:06.353

Menu 派生自`ItemsControl`所以可以只切换 ItemsPanel：

```
 <DockPanel>
    <DockPanel DockPanel.Dock="Top" KeyboardNavigation.TabNavigation="None">
        <Menu KeyboardNavigation.TabNavigation="Cycle" VerticalAlignment="Top" Background="DarkGray" Height="40">
          <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
              <UniformGrid Rows="1"/>
            </ItemsPanelTemplate>
          </ItemsControl.ItemsPanel>

            <MenuItem Header="_New"/>
            <MenuItem Header="_Load" />
            <MenuItem Header="_Save" />
            <MenuItem Header="_Validate" />
            <MenuItem Header="_Import" />
            <MenuItem Header="_Export"/>
        </Menu>
    </DockPanel>
</DockPanel> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-17T11:50:36.313

```
<Menu KeyboardNavigation.TabNavigation="Cycle" VerticalAlignment="Top" Background="DarkGray" Height="40">
            <MenuItem Header="File">
                <MenuItem Header="_New"/>
                <MenuItem Header="_Load" />
                <MenuItem Header="_Save" />
                <MenuItem Header="_Validate" />
                <MenuItem Header="_Import" />
                <MenuItem Header="_Export"/>
            </MenuItem>
            <MenuItem Header="Edit">
                <MenuItem Header="Cut"/>
                <MenuItem Header="Copy"/>
                <MenuItem Header="Paste" />
                </MenuItem>
        </Menu> 
```

希望这会有所帮助。您需要在 MenuItem 中添加菜单子项。它本身是 o0f List 类型。

# jquery - jQuery 计算 UL 中的 LI 元素并获取当前悬停的数量

> ID：10189692
> 
> 赞同：2
> 
> 时间：2012-04-17T10:43:47.493
> 
> 标签：jquery, count, hover, html-lists

我有一个`<ul>`像下面这样的；

```
<ul>
  <li>Item 1</li>
  <li>Item 2</li>
  <li>Item 3</li>
  <li>Item 4</li>
</ul> 
```

旁边我有一个包含另一个图像列表的 DIV。如下;

```
<ul>
  <li><img src="example1.png" alt="" /></li>
  <li><img src="example2.png" alt="" /></li>
  <li><img src="example3.png" alt="" /></li>
  <li><img src="example4.png" alt="" /></li>
</ul> 
```

从技术上讲，我想做的是，当我将鼠标悬停`<li>`在第一个列表中时，它会显示`<li>`第二个列表中的正确内容。

我的猜测是计算`<li>`'s 的数量并获得当前悬停的数量。然后对第二个执行相同的操作`<ul>`并显示`<li>`相同的数字。

那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:58:24.450

Hiya为你做了一个小秀和隐藏**demo** [http://jsfiddle.net/KAJsF/](http://jsfiddle.net/KAJsF/)

如果这有帮助，请告诉我，祝你愉快，干杯！

**Jquery 代码** [http://jsfiddle.net/KAJsF/](http://jsfiddle.net/KAJsF/)

```
$(document).ready(function(){
    $("ul li").hover(function(){
        var showcalss = $(this).attr("class");
        $("."+showcalss+"img").show();
    });
       $("ul li").mouseout(function(){
        var showcalss = $(this).attr("class");
        $("."+showcalss+"img").hide();
    });
});​ 
```

**html**

```
<ul>
  <li class="1">Item 1</li>
  <li class="2">Item 2</li>
  <li class="3">Item 3</li>
  <li class="4">Item 4</li>
</ul>

<ul>
  <li style="display:none" class="1img"><img src="example1.png" alt="" />SHOW 1</li>
  <li style="display:none" class="2img"><img src="example2.png" alt="" />SHOW 2</li>
  <li style="display:none" class="3img"><img src="example3.png" alt="" />SHOW 3</li>
  <li style="display:none" class="4img"><img src="example4.png" alt="" />SHOW 4</li>
</ul>​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:56:01.763

FIDDLED：http: [//jsfiddle.net/GTM3X/1/](http://jsfiddle.net/GTM3X/1/)

它并不花哨，但它可以满足您的需求。让我知道它是否有帮助。

编辑：在此处添加代码，以便于访问。

```
$('.one li').hover( function() {
    var x = $(this).index();
    $('.two li').hide().each( function(i, v) {
        if (i == x) {
            $(this).show();   
        }
    });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T11:20:39.890

请参阅此**示例** [http://jsfiddle.net/vtENY/3/](http://jsfiddle.net/vtENY/3/) 代码是自我解释的 :)

无需更改 html 标记...LI 索引就足够了 :)

如果鼠标不在第一个列表中的任何 LI 上，我认为您可能想要隐藏第二个列表的所有 LI ......这段代码很有效。让我知道...

```
// hide all LI in the "two" UL
$("ul#two li").hide();

// listen for hover/unhover event
$("ul#one li").hover(function(){

    // find the index of the LI to be displayed
    var index = $(this).index();

    // show new active element
    $("ul#two li").eq(index).addClass("active").show();
},function(){
    // hide prev active element
    $("ul#two li.active").removeClass("active").hide();
}) 
```

# c# - Shockwave Flash 对象进入 C# Surface 2.0 应用程序，工具箱项隐藏

> ID：10189695
> 
> 赞同：3
> 
> 时间：2012-04-17T10:44:04.547
> 
> 标签：c#, flash, .net-4.0, pixelsense

我正在为 SUR40 Surface 2.0 表开发应用程序。我正在 MS Visual C# 2010 Express .Net Framework 4 Client Profile 中开发。

现在我需要在 Surface Window 中嵌入一个 Flash 文件 (*.swf)。

我遵循了[这些步骤](http://weblogs.asp.net/twalters/archive/2003/12/29/46265.aspx)，但我被困在（将“Shockwave Flash Object”从工具箱拖到表单上（就像任何其他控件一样））步骤。

我找不到 Shockwave Flash 对象，所以我尝试了一些方法。右键单击工具箱并选择“全部显示”后，Shockwave Flash 对象出现，但已锁定。我无法将此 Shockwave Flash 对象移动到我的 Surface Window（见图）。

![隐藏的 Shockwave Flash 浏览器](../Images/b08b61702900b6b27763630aad2e272a.png)

我的问题：

*   我怎样才能解锁这个工具箱项目？
*   是否可以在 Surface 2.0 上使用 Shockwave Flash Object

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T09:42:21.877

试试这个

您需要安装最新版本的 Adob​​e Macromedia Flash Player。该组件将位于“%systemroot%\system32\macromed\flash11c.ocx”。然后你最好像这样手动注册它：

Regsvr32 flash11c.ocx

然后请按照以下步骤在 VB 2005 Express 中的表单上正确添加 Shockwave Flash 对象：

1.  在解决方案探索中，右键单击引用并选择添加引用。

在 COM 选项卡中，添加 Shockwave Flash（例如 Flash11c.ocx）

1.  右键工具箱 -> 点击“选择项目”，在 COM 选项卡中，选择 Shockwave Flash Object，然后您可以在工具箱中看到该控件。

2.  将 Shockwave 控件拖放到窗体上，您可能会收到错误消息“无法导入 ActiveX 控件。请确保它已正确注册”，忽略它并单击“确定”。

3.  在解决方案资源管理器中右键单击项目，选择“重建”。当项目重建成功后，这次可以在窗体上添加 Shockwave 控件。

4.  为 Shockwave 控件的 Movie 属性指定 .swf 文件。

**或者**

检查此链接[Fun With C# and the flash External API](http://www.codeproject.com/Articles/12010/Fun-with-C-and-the-Flash-Player-8-External-API)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:19:33.487

试试这个：

右键单击工具箱并按重置按钮，它将清除您添加的所有控件。

单击选择项目，**不要取消选中任何选中的选项**。

只需单击所需的 .dll 控制文件并按确定，它将添加您的控制并且不会禁用 asp.net 控件

# iphone - 如何为 iphone 核心数据中的实体创建唯一标识符

> ID：10189696
> 
> 赞同：0
> 
> 时间：2012-04-17T10:44:04.920
> 
> 标签：iphone, core-data, primary-key, nsentitydescription

我是核心数据和 iphone 编程的新手，所以不要介意我的傻 qn。我不知道如何在 xcdatamodel 文件中将属性标记为主键，或者可能在外部。我环顾四周，发现有人说这不可能。

我正在为我得到的每个对象获取标识符，我需要通过核心数据存储该对象，并且我可能需要在我的 Web 服务中使用该标识符来检索其他数据。我如何保持实体的主键等于该标识符，非常感谢任何帮助。

提前致谢，

约格什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:00:22.323

简而言之，您不能自动将属性标记为主键。你有一个自己维护。

您可以执行以下任何操作：

使用`[NSManagedObject objectID]`.

您自己的类似主键的系统，将整数存储在模型中，并随着每个对象的创建而递增

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:56:39.223

您不应该将 Core Data 视为具有表和键的数据库结构。这只是一个实现细节。

要获取具有特定实体的实体，您可以在数据存储中为该标识符创建一个获取请求，它将将该对象检索到托管对象上下文中。

如果您担心性能，可以将存储此标识符的属性设置为`indexed`数据模型中。

# java - 卡住从 Arduino 以字节为单位获取图像，并使用 Java 将它们重新转换为图像

> ID：10189700
> 
> 赞同：1
> 
> 时间：2012-04-17T10:44:21.767
> 
> 标签：java, image, serial-port, arduino

带有[Video Experimenter Shield的](http://nootropicdesign.com/ve/)[Arduino UNO R3](http://www.arduino.cc)。在 Video Experimenter Shield 的帮助下，我从 Arduino 获得了从安全摄像头捕获的图像的轮询串行通信字节。我用 Java 构建了该代码以从 Arduino 检索字节并将 ByteArrayList 转换为 0 和 1 的单色图像。

java 程序不会立即从 arduino 收集可用数据，然后在 OUTPUT_BUFFER_EMPTY 的情况下将此字节堆栈作为图像。但它会不断地将从 arduino 接收到的字节一次又一次地保存到字节块中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:24:05.063

我怀疑您没有从串口读取所有数据。您检查可用的字节数并将其读入缓冲区，但这可能不是整个图像。因此，当您调用`ImageIO.read`它时，它会返回 null。

有关如何执行此操作的详细信息，请参阅[此问题](https://stackoverflow.com/questions/1264709/convert-inputstream-to-byte-in-java)的答案。

的[文档](http://docs.oracle.com/javase/1.5.0/docs/api/javax/imageio/ImageIO.html#read%28java.io.InputStream%29)`ImageIO.read`还说，如果没有注册`ImageReader`图像数据，它将返回 null 。您使用的图像格式可能不受支持。

ImageIO 的实现[至少支持 JPEG、PNG、BMP、WBMP 和 GIF](http://docs.oracle.com/javase/1.5.0/docs/api/javax/imageio/package-summary.html)。从您的描述来看，您似乎没有使用任何这些格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T07:45:31.173

arduino 太慢了。因此，您应该在打开通讯通道后稍等片刻。如果没有，arduino 没有时间准备，你会丢失数据......

检查 RXTX java 库以及示例代码和注释：[http](http://arduino.cc/playground/Interfacing/Java) ://arduino.cc/playground/Interfacing/Java 。

# .net - 从 TCPClient 读取时延迟

> ID：10189701
> 
> 赞同：1
> 
> 时间：2012-04-17T10:44:25.903
> 
> 标签：.net, tcpclient

我有以下代码，它将未知大小的数据读入内存流。

```
Dim cl As New Net.Sockets.TcpClient()
cl.Connect(host, port)
Dim st As IO.Stream = cl.GetStream()
Dim bytes(50000) As Byte
Dim mem As New IO.MemoryStream()
Dim len As Integer = 0
Do
  len = st.Read(bytes, 0, 50000)
  mem.Write(bytes, 0, len)
Loop While len > 0
mem.Close() 
```

它工作正常，但唯一的问题是最后一次读取总是在返回 0 之前阻塞 20 秒。我假设这是某种超时。有没有办法缩短或消除它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:49:36.417

我无法在我的系统上重现该行为，当没有更多可用数据时，Read 立即返回 0。你确定你没有在 TcpClient 上设置任何其他属性，比如`cl.NoDelay = false`？

您可以尝试`cl.Available > 0`在调用 st.Read 之前进行检查，但这并不是必须的。

您还应该处理从 Read 返回的 -1 的情况（当 TCP 流已关闭时）。否则 mem.Write 将向您抛出 ArgumentOutOfRange 异常。

# regex - Grep Regex：列出所有行，除了

> ID：10189703
> 
> 赞同：47
> 
> 时间：2012-04-17T10:44:33.937
> 
> 标签：regex

我正在尝试从包含不紧跟“H”的字母“T”的文本文件中自动删除所有行。我一直在使用 grep 并将输出发送到另一个文件，但我想不出可以帮助我做到这一点的神奇正则表达式。

如果 grep 不是正确的工具，我不介意使用 awk、sed 或其他一些 linux 工具。

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-04-17T10:49:30.010

那应该这样做：

```
grep -v 'T[^H]' 
```

-v : 打印不匹配的行

[^H]：匹配除 H 以外的任何字符

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-17T10:49:26.097

你可以做：

```
grep -v 'T[^H]' input 
```

`-v`是 grep 的反向匹配选项，它不会列出与模式匹配的行。

使用的正则表达式`T[^H]`匹配任何作为 a`T`后跟除 a 之外的任何字符的行`H`。

# apache - 通过 SSL 通过 apache 的 wsgi 导致错误 500，没有日志条目

> ID：10189705
> 
> 赞同：0
> 
> 时间：2012-04-17T10:44:43.827
> 
> 标签：apache, mozilla

我正在安装 Mozilla Sync 并成功，直到我尝试让它使用 SSL。我一直在遵循（除其他外）这些说明

[http://www.wenks.ch/fabian/mozilla-custom-sync-server/](http://www.wenks.ch/fabian/mozilla-custom-sync-server/)

设置 Mozilla 同步服务器。当我连接到时它运行良好

[http://mydomain.com:5000/](http://mydomain.com:5000/)

但是当我使用 https 而不是 http 并删除 :5000 时，我得到一个错误 500 返回，没有任何错误日志文件条目。我在所有相关日志（apache、Mozilla Sync）中将日志文件级别设置为 DEBUG，但我无法找到问题所在。例如，调试级 apache-logfile 中与 wsgi 相关的唯一条目是：

[信息] mod_wsgi (pid=30174)：创建解释器“mydomain.com|”。

这是我的 ssl 配置：

```
<VirtualHost $$$.$$$.$$$.$$$:443>
LogLevel debug
ServerAdmin "webmaster@mydomain.com"
ServerName sync.mydomain.com
MIMEMagicFile /dev/null
CustomLog logs/ssl.mydomain.com_access_log "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-agent}i\""
CustomLog logs/ssl_request.mydomain.com_access_log "%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %b"
ErrorLog logs/ssl.mydomain.com_error_log

DocumentRoot /home/mydomain/public_html
<Directory /home/mydomain/public_html>
    Order deny,allow
    Allow from all
    AllowOverride All
</Directory>

WSGIProcessGroup sync.mydomain.com
WSGIPassAuthorization On
WSGIDaemonProcess sync.mydomain.com user=weave group=weave processes=2 threads=25
WSGIScriptAlias / /home/sync/server-full/sync.wsgi

SSLEngine on
SSLProtocol -ALL +SSLv3 +TLSv1
SSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:-LOW:-SSLv2:-EXP:+eNULL
SSLCertificateFile "/home/sync/ssl/server.crt"
SSLCertificateKeyFile "/home/sync/ssl/server.key"
</VirtualHost> 
```

我想使用 SSL 加密用户名和密码，否则以明文形式传输。

有人可以指出我如何解决这个问题的正确方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T13:08:39.380

我终于找到了问题。首先，[http://www.wenks.ch/fabian/mozilla-custom-sync-server/](http://www.wenks.ch/fabian/mozilla-custom-sync-server/)上的更新手册显示了 HTTPS 的完整设置。

其次，我的 SSL 证书是自签名的。您需要先使用浏览器访问 URL 并添加例外以使其工作。

第三，如果一个测试人员使用粘贴器之前的服务器创建了一个 sync-error.log，该日志具有来自用于测试的用户帐户（可能是 root）的写入权限，并且 WSGI 无法写入它。您需要删除错误日志并让 WSGI 进程重新创建它。

# objective-c - 在 UIWebView 中加载谷歌地图时出现内存警告

> ID：10189706
> 
> 赞同：0
> 
> 时间：2012-04-17T10:44:47.680
> 
> 标签：objective-c, ios4, uiwebview

在我的应用程序 UIWebView 加载谷歌地图，同时使用这个方向 url == [http://maps.google.com/maps?f=d&hl=en&geocode=&saddr=37.774930,-122.419415&daddr=37.7655277,-122.421811&ie=UTF8&z=12](http://maps.google.com/maps?f=d&hl=en&geocode=&saddr=37.774930,-122.419415&daddr=37.7655277,-122.421811&ie=UTF8&z=12) ,

它抛出“收到内存警告”并且我的应用程序崩溃。

UIWebview 是我的视图控制器中 UIView 的子视图。我把它当作一个 IBOutlet。

请帮我解决这个问题，它给我的应用程序带来了很多麻烦。

先感谢您...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:38:11.460

您的应用程序是否真的崩溃了（Xcode 调试器是否捕捉到它？您可以发布崩溃线程的堆栈跟踪），还是因为使用太多内存而被操作系统关闭？

您也可以尝试使用 NSZombieEnabled 重现崩溃 - 检查 Xcode 文档以获取有关如何执行此操作的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:15:37.383

.h ///---- #import

```
@interface WebsiteViewController : UIViewController <UIWebViewDelegate> 
```

{

```
IBOutlet UIWebView *webView; 
```

}

```
@property(nonatomic,retain) IBOutlet UIWebView *webView; 
```

.m ///---

```
-(void)viewDidLoad {
     NSURLRequest *request = [[NSURLRequest alloc] initWithURL:@"url"];
[self.webView setScalesPageToFit:YES];
[self.webView loadRequest:request];
[request release]; 
} 
```

# forms-authentication - 南希：FormsAuthentication - 入门

> ID：10189711
> 
> 赞同：6
> 
> 时间：2012-04-17T10:45:13.233
> 
> 标签：forms-authentication, nancy

我正在尝试遵循[Nancy.Demo.Authentication.Forms](https://github.com/NancyFx/Nancy/tree/master/src/Nancy.Demo.Authentication.Forms)示例，但我遇到了问题，因为示例代码现在看起来已经过时了。如果这个问题很长，我很抱歉，但我不想错过我的错误。所以这是我到目前为止所做的：

我通过包管理器控制台（VS11 beta）成功安装了认证包

```
PM> install-package nancy.Authentication.Forms
Attempting to resolve dependency 'Nancy (= 0.10.0)'.
Successfully installed 'Nancy.Authentication.Forms 0.10.0'.
Successfully added 'Nancy.Authentication.Forms 0.10.0' to uMentor. 
```

我编写了 IUserMapper 的实现，它依赖于我的 RavenDB 会话提供程序并使用它来查找和验证用户

```
public class FormsAuthenticationService : IUserMapper
{
    private readonly IRavenSessionProvider _ravenSessionProvider;

    public FormsAuthenticationService(IRavenSessionProvider ravenSessionProvider)
    {
        _ravenSessionProvider = ravenSessionProvider;
    }

    public IUserIdentity GetUserFromIdentifier(Guid identifier)
    {
        using (var ravenDB = _ravenSessionProvider.GetSession())
        {
            var user = ravenDB.Query<User>().FirstOrDefault(u => u.FormsAuthenticationGuid == identifier);
            return user;
        }
    }

    public static Guid? ValidateUser(IDocumentSession ravenDB, string username, string password)
    {
        var user = ravenDB.Query<User>().FirstOrDefault(u => u.UserName == username && u.Password == password);
        if (user == null)
        {
            return null;
        }
        return user.FormsAuthenticationGuid;
    }
} 
```

我已经在我的 User 类中添加了一个属性来满足使 cookie 更安全所需的 Guid 标识符字段（我已经阅读了 grumpydev 的帖子并理解为什么需要这个 Guid，但是将它作为一个属性字段在用户等级？）

```
public class User : IUserIdentity
{
    public string UserName { get; set; }
    public IEnumerable<string> Claims { get; set; }
    public string Email { get; set; }
    public string Password { get; set; }
    public Guid FormsAuthenticationGuid { get; set; }
} 
```

最后，我通过直接从演示中窃取代码（上面的链接）为我的引导程序添加了更多设置。这是我遇到问题的地方。代码似乎已更改。

```
public class MyBootstrapper : DefaultNancyBootstrapper
{
    protected override void ConfigureRequestContainer(TinyIoCContainer container, NancyContext context)
    {
        base.ConfigureRequestContainer(container, context);
        container.Register<IUserMapper, FormsAuthenticationService>();
    }

    protected override void RequestStartup(TinyIoCContainer requestContainer, IPipelines pipelines, NancyContext context)
    {
        var formsAuthConfiguration =
            new FormsAuthenticationConfiguration()
            {
                //These properties do not exist! <<---- Edit - yes they do - see comment 
                RedirectUrl = "~/login",
                UserMapper = requestContainer.Resolve<IUserMapper>(),
            };
        //This method does not exist <<---- Edit - yes they do - see comment
        FormsAuthentication.Enable(pipelines, formsAuthConfiguration);
    }

    protected override NancyInternalConfiguration InternalConfiguration
    {
        get { return NancyInternalConfiguration.WithOverrides(x => x.NancyModuleBuilder = typeof(RavenAwareModuleBuilder)); }
    }
} 
```

**编辑 1** 事实证明我的错误是愚蠢的（一个不正确的`using`陈述 - 见下面的评论）。上面的所有代码现在都可以正常工作，所以我将保留这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:03:29.350

万一你错过了上面的评论，答案很简单：

> 明白了！好的，我发现了损坏代码的问题。Resharper 有用地放入以下 ​​using 语句：'using FormsAuthenticationConfiguration = System.Web.Configuration.FormsAuthenticationConfiguration;'。删除它解决了损坏的代码:-) 但是我仍然欢迎任何关于我的实现的评论。我需要保证我走在正确的道路上。

# activemq - activemq 消息重发

> ID：10189713
> 
> 赞同：0
> 
> 时间：2012-04-17T10:45:29.070
> 
> 标签：activemq

我想知道是否可以在队列中保留一条消息，而在一次消费一段时间后，它不会被activemq重新传递，即消息m1一旦被消费并且会话关闭。我希望 m1 在一段时间内不被 activemq 重新交付。过了时间就可以重新发货了。

提前致谢。

问候， 阿里吉特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:00:24.340

看看这是否有帮助[http://activemq.apache.org/redelivery-policy.html](http://activemq.apache.org/redelivery-policy.html)

# asp.net-mvc-3 - 如何避免视图内的业务逻辑（if-else/循环）

> ID：10189715
> 
> 赞同：2
> 
> 时间：2012-04-17T10:45:42.723
> 
> 标签：asp.net-mvc-3

我有一个视图，它具有各种业务逻辑......其中包括 foreach，if else 语句。

根据编码标准，不应在视图内写入任何内容。这是我的代码。谁能建议我如何将业务逻辑移到视图之外

@if (qList.Data.GUIType.ToUpper().Equals(ConstantsBE.TEXTBOX))

我将遍历视图中的模型，并再次在 foreach 循环内，我将有太多的 if else 语句。现在我想要这个功能，但代码应该从视图中移走。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:56:30.363

你真的不能，你也不需要。这不是静态 HTML 内容，视图中总会有一些功能代码，如果您发现在多个视图中使用相同的登录名，您可以创建 HTML 帮助程序或模板。

[http://www.asp.net/mvc/tutorials/older-versions/views/creating-custom-html-helpers-cs](http://www.asp.net/mvc/tutorials/older-versions/views/creating-custom-html-helpers-cs)

# extjs - 如何将 JSON 文件中的数据存储到 JSON 存储中

> ID：10189722
> 
> 赞同：0
> 
> 时间：2012-04-17T10:46:02.140
> 
> 标签：extjs

嗨，我有一个 JSON 文件，其中包含

```
{
   "result": [
      {
         "urlFeedCategoryValue": "Language",
         "urlFeedName": "DB2",
         "urlId": "language_DB2",
         "urlFeedLink": "http://www-947.ibm.com/systems/support/myfeed/xmlfeeder.wss?feeder.requid=feeder.create_public_feed&feeder.feedtype=RSS&feeder.maxfeed=25&OC=SSEPDU&feeder.subdefkey=swgimgmt&feeder.channel.title=DB2 Connect&feeder.channel.descr=The latest updates about DB2 Connect",
         "urlFeedCategory": "1",
         "urlFeedTimeStamp": "2012-04-17-03:04:27"
      }
   ]
} 
```

现在我想读取这个 JSON 文件并将其存储在 Extjs 的 JSONStore

请帮助我如何实现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:30:21.487

这不是 Ext 的特别问题。你有任何服务器端后端吗？然后我建议在那里打开并准备 JSON 文件。

# python - AttributeError：“元组”对象没有“写入”属性

> ID：10189723
> 
> 赞同：6
> 
> 时间：2012-04-17T10:46:12.017
> 
> 标签：python, tuples, attributeerror

我有一个 Python 课程的家庭作业，并且遇到了一个我不理解的错误。在 Windows 7 上运行 Python IDLE v3.2.2。

下面是问题发生的地方：

```
#local variables
number=0
item=''
cost=''

#prompt user how many entries
number=int(input('\nHow many items to add?: '))

#open file
openfile=('test.txt','w')

#starts for loop to write new lines
for count in range(1,number+1):
    print('\nFor item #',count,'.',sep='')
    item=input('Name:  ')
    cost=float(input('Cost: $'))

    #write to file
    openfile.write(item+'\n')
    openfile.write(cost+'\n')

#Display message and closes file
print('Records written to test.txt.',sep='')
openfile.close 
```

这是我得到的错误：

> 回溯（最后一次调用）：文件“I:\Cent 110\test.py”，第 19 行，在 openfile.write(item+'\n')
> AttributeError: 'tuple' object has no attribute 'write'

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-17T10:47:42.470

你错过了[open](http://docs.python.org/py3k/library/functions.html#open "打开")。

```
openfile = open('test.txt','w') 
```

最后，当您尝试关闭文件时，缺少括号

```
openfile.close() 
```

*编辑*：我刚刚看到另一个问题。

```
openfile.write(str(cost)+'\n') 
```

# javascript-events - 我应该如何调用我的 javascript。href、onclick 还是绑定点击事件？

> ID：10189726
> 
> 赞同：2
> 
> 时间：2012-04-17T10:46:17.773
> 
> 标签：javascript-events, event-handling, jquery

我知道已经有很多关于这个概念的文章，但我的问题有一点不同。

在我的页面上，我有一个链接：

```
<a id="mylink">click me </a> 
```

然后我正在使用动态更改href：

```
$get('mylink').href = 'javascript:doSomething(id);'; 
```

碰巧我必须多次调用上面的代码，所以我用javascript代码覆盖href属性的当前值，调用具有不同id参数的相同函数。

以上是我用了很久的东西。但是，当我尝试实现 OnNavigateAway 以在用户关闭浏览器窗口时警告用户时，混乱开始了。当用户单击具有 href 属性值的锚点时，IE 也会触发此 onNavigateAway 事件。

所以我开始用jquery点击事件替换那些href：

```
$("#mylink").click(function (e) {
doSomething(id);
e.preventDefault();
}); 
```

但是请记住，这段代码可以被多次调用，所以我必须先取消绑定点击事件，然后再重新绑定：

```
function completed(result) { 
$("#mylink").unbind('click'); 
    $("#mylink").click(function (e) {
    doSomething(result.id);
    e.preventDefault();
    });
} 
```

这是处理我的javascript的好方法吗？还是这种绑定和解除绑定的东西不是好的做法？

另一种方法是使用 javascript 手动覆盖 onclick 属性。

你会怎么处理这个？

我期待着您的回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T10:55:25.450

我会在这里使用不同的逻辑。我不会重新分配单击事件，而是更改一些数据属性，然后在“全局”单击事件中使用此属性：

```
$("#mylink").on("click", function (e) {
    doSomething($(this).data("id"));
    e.preventDefault();
}); 
```

然后，当您需要更改`id`具有此类代码时：

```
$("#mylink").data("id", id); 
```

这样重复调用更改数据只会导致最后一个影响，例如

```
$("#mylink").data("id", 5);
$("#mylink").data("id", 6);
$("#mylink").data("id", 7); 
```

单击时，7 将传递给函数。

[现场测试用例](http://jsfiddle.net/EQ4Dt/)。

如果元素是动态创建的，并且假设您使用的是 jQuery 1.7 或更高版本，您`.on`甚至可以使用 捕获那些动态创建的元素：

```
$("body").on("click", "#mylink", function (e) {
    doSomething($(this).data("id"));
    e.preventDefault();
}); 
```

# ios - Delphi Firemonkey IOS TContextOpenGL.DestroyPixelShader EXC_BAD_ACCESS

> ID：10189728
> 
> 赞同：1
> 
> 时间：2012-04-17T10:46:28.110
> 
> 标签：ios, delphi, client, firemonkey, datasnap

我有一个最新的平台，在 Lion 上安装了 Delphi XE 2 update 4 和 Xcode 4.3.2。我下载了 embarcadero 示例 [http://cc.embarcadero.com/item/28786](http://cc.embarcadero.com/item/28786) ，因为我需要一个有效的示例来从带有 datasnap 服务器的 firebird 数据库中检索用 Delphi Firemonkey 编写的 iOS 应用程序中的数据和图片（所有其他链接都是欢迎）。当我尝试在 Xcode 中启动客户端时，我遇到了永久错误

```
procedure TContextOpenGL.DestroyPixelShader(const Shader: TContextShader);    
begin    
  if Valid and (Shader <> 0) and MakeCurrent then    
  glDeleteShader(Shader); <-HERE *****************    
end; 
```

> EXC_BAD_ACCESS（代码=2，地址=0x0）。

有没有人有同样的问题？如何测试应用程序？

谢谢和最好的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T17:28:00.563

这意味着您与 DataSnap 服务器的连接不起作用。去过那里，做到了...检查从客户端到服务器的连接设置；-)

# android - 使用生成的 hackbook-url 上传到墙上的图像

> ID：10189729
> 
> 赞同：1
> 
> 时间：2012-04-17T10:46:30.067
> 
> 标签：android, facebook, facebook-graph-api

我已经使用 hackbook for android 将图像上传到我的墙上。图片的网址是这样的。

```
http://www.facebook.com/photo.php?fbid=107428579392184&set=a.100386686763040.301.100003751260617&type=3&l=74e355fdc3&theater 
```

好的，这是我的问题：这是我`fbid=107428579392184`在`100003751260617`上传图片时得到的响应。剩下的数字呢？这些是什么？

我希望能够“猜测”为该照片生成的 url，只知道从我的应用返回的 id？有可能吗？

# mercurial - 在 Mercurial 中获取拉取和更新的日期

> ID：10189733
> 
> 赞同：6
> 
> 时间：2012-04-17T10:46:43.040
> 
> 标签：mercurial, dvcs, pull

是否可以知道何时从远程存储库中提取某个提交并使用 Mercurial 更新文件？

更准确地说，我`hg pull -u`是几天前做的，现在我想知道这次拉取是否只下载了最后一个提交，或者是否有一些提交还没有被拉取，使我的最后一次拉取也得到了它们。

`hg log`似乎给出了提交的日期，但没有关于更新。这些信息在任何地方吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T11:43:48.897

Mercurial 不会记录此信息。Mercurial 存储库只是变更集的容器，Mercurial 不存储变更集如何（或何时）进入存储库。

您可以为此设置挂钩，但您必须自己构建脚本。一个非常基本的系统将是

```
[hooks]
pre-pull = (date; hg root; hg tip) >> ~/.pull-log
post-pull = hg tip >> ~/.pull-log 
```

这将`~/.pull-log`在每个`hg pull`. 拉后记录新的提示。您可以构建解析日志文件的脚本，以提取有关每次拉取操作的信息。

> `hg log`似乎给出了提交的日期，但没有关于更新

是的，`hg log`只关心存储的历史记录（变更集），更新等工作副本操作不是记录历史记录的一部分。

最后，让我提一下，这是我第一次看到有人要求“拉日志”。然而，相反的情况很常见：有一些脚本用于在服务器上维护“推送日志”，以查看谁推送了什么以及何时推送。这是由[Mozilla](http://hg.mozilla.org/mozilla-central/pushloghtml)等人完成的。有关一些启动说明，请参阅[此自述文件。](http://hg.mozilla.org/users/bsmedberg_mozilla.com/hgpoller/file/tip/README)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-22T22:46:49.657

如果您想记录何时以及使用哪个修订版 hg update 来更新代码，请使用这些钩子：

```
[hooks]
pre-update = (echo "---------------------------------"; date --rfc-3339=s; hg root; echo "pre-update:"; hg identify --id --branch) >> .hgupdates
post-update = (echo "post-update:"; hg identify --id --branch) >> .hgupdates 
```

每次运行 hg update 时，上述钩子都会生成这样的日志条目：

```
2015-12-23 00:44:31+02:00
/var/www/my/project
pre-update:
802120d1d3a0 somebranch
post-update:
302720d1d3d2 otherbranch 
```

当 hg update 在没有设置特定修订标志 (-r) 的情况下运行时，这也有效

# python - python __import__文件夹中的所有文件都不起作用

> ID：10189734
> 
> 赞同：0
> 
> 时间：2012-04-17T10:46:44.060
> 
> 标签：python, import, module, directory

```
from os import listdir
modo= [name.split(".py")[0] for name in listdir("scripts") if name.endswith(".py")]
modules = {}
for modu in modo:
    modules[modu] = __import__(modu)
test_samp.function("test") 
```

你好！如果说脚本目录中存在“test_samp.py”，为什么这不允许我运行 test_samp.function("test")？它返回：

```
Unhandled exception in thread started by <function function at 0x8e39204>
Traceback (most recent call last):
  File "test_this.py", line 6, in function
    test_samp.function("test")  
NameError: global name 'test_samp' is not defined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:01:48.057

您的代码中有两个问题：

*   `__import__`不导入全局命名空间，它**返回**一个模块
*   `test_samp`您正在尝试导入`scripts.test_samp`

你真正想要的是：

```
scripts = __import__("scripts", fromlist=modo)
scripts.test_samp.function("test") 
```

上面`__import__`返回`scripts`加载了所有子模块的包。不要忘记`scripts`通过在其中创建来使目录成为一个包`__init__.py`。

另请参阅：[为什么 Python 的 __import__ 需要 fromlist？](https://stackoverflow.com/questions/2724260/why-does-pythons-import-require-fromlist)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:51:46.293

你没有定义`test_samp`你正在定义`modules['test_samp']`。另外，如果它在您需要导入的脚本中`scripts.test_samp`

在你的情况下使用一个包。添加一个空（或不）`__init__.py`（带有2个下划线）。并使用`import scripts`. 使用 访问您的功能`scripts.test_samp.function("test")`。你可以用它`reload(scripts)`来重新加载所有的包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T10:53:10.750

您可以使用以下命令运行它：

```
modules["test_samp"].function("test") 
```

# javascript - 是否使用 Sizzle 从 html 文档中获取唯一的搜索结果？

> ID：10189736
> 
> 赞同：1
> 
> 时间：2012-04-17T10:46:52.083
> 
> 标签：javascript, css, css-selectors, sizzle

我是 JS 和 Sizzle 的新手，试图实现一个根据关键字生成链接的系统，如 Google AdSense 所做的。我已经搜索并决定为此使用 Sizzle CSS Selector。

我有一个 html 文档和一个关键字，我想搜索“所有不在链接（标签）中的关键字。

我的示例 HTML 部分

```
<div> <p>... some text .... 
    ....................................
    <strong>......keyword......</strong>
    ....................................
    ...........................keyword..
    ....................................
</p>  </div> 
```

我使用 ":contains" 选择器在 JS 中搜索这个关键字，并使用文档正文作为搜索上下文。搜索结果后，我将用一些链接（关键字）替换元素。

```
Sizzle(":contains(keyword)", document.body); 
```

它返回给我一个包含“div、p、strong”元素的数组。上下文中有 2 个 "keyword" ，它们都返回结果的父元素（此处不需要 div）。

有没有使用 Sizzle 来防止这个问题？

一个额外的问题：我搜索了 Sizzle 选择器，也搜索了 w3c 选择器。":not" 选择器用于获得负的给定选择器。如果不使用“parentElement”属性遍历 dom，我如何才能看到元素不在链接标签中（我的意思是使用嘶嘶声选择器，考虑到链接标签可以是元素的上父节点）。

谢谢。

# git - 如何重置或更改 GitHub SSH 密钥的密码？

> ID：10189745
> 
> 赞同：88
> 
> 时间：2012-04-17T10:47:12.233
> 
> 标签：git, github, ssh, ssh-keys, passphrase

我忘记了我在 Git 中的密码。我该如何重置它？我在 Stack Overflow 上找到了两个解决方案，但我想知道要遵循什么流程来重置或获取它。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2016-03-03T13:00:05.870

如果您生成了带有密码的 SSH 密钥，然后您忘记了此 SSH 密钥的密码，**则无法恢复它**，您需要生成一个全新的 SSH 密钥对或切换到 HTTPS 克隆，以便您可以使用您的GitHub 密码。

## ***但是，也有例外***

如果您使用***OS X***钥匙串配置了 SSH 密码，您可能能够恢复它。

1.  在 Finder 中，搜索 Keychain Access 应用程序。
2.  在钥匙串访问中，搜索 SSH。
3.  双击您的 SSH 密钥条目以打开一个新对话框。
4.  钥匙串访问对话框在左下角，选择显示密码。
5.  系统将提示您输入管理密码。在“钥匙串访问”对话框中键入它。
6.  您的密码将被泄露。

请参阅[Github 帮助 - 如何恢复我的 SSH 密钥密码？](https://help.github.com/articles/how-do-i-recover-my-ssh-key-passphrase/#platform-mac)

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2012-08-28T14:34:51.883

简而言之，没有办法*恢复*一对 SSH 密钥的密码。为什么？因为出于安全原因，它首先是这样设计的。其他人给你的答案都是更改密钥密码的正确方法，而不是*恢复*它们。因此，如果您忘记了密码，最好的办法就是创建一对新的 SSH 密钥。以下是[如何生成 SSH 密钥并将其添加到您的 GitHub 帐户](https://help.github.com/articles/generating-ssh-keys)。

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2012-04-17T10:48:55.980

您可以通过执行以下操作更改私钥的密码：

```
ssh-keygen -f ~/.ssh/id_rsa -p 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-04-17T12:38:46.167

可以将密码短语添加到现有密钥或在不重新生成密钥对的情况下进行更改：
**注意**如果密钥没有密码短语，这将起作用，否则您将得到：`Enter old passphrase:`然后`Bad passphrase`

```
$ ssh-keygen -p
Enter file in which the key is (/Users/tekkub/.ssh/id_rsa):
Key has comment '/Users/tekkub/.ssh/id_rsa'
Enter new passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved with the new passphrase. 
```

如果您的密钥`passphrase`当时有，则**无法恢复一对 SSH 密钥的密码。**在这种情况下，您必须创建一对新的 SSH 密钥。

1.  [生成 SSH 密钥](https://help.github.com/articles/generating-ssh-keys/)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-05-03T22:23:23.877

1.  登录到您的 github 帐户。
2.  进入“设置”页面（页面右上角的“扳手和螺丝刀”图标）。
3.  转到“SSH 密钥”页面。
4.  生成一个新的 SSH 密钥（可能研究了 github 在该页面上提供的链接）。
5.  使用“添加 SSH 密钥”链接添加新密钥。
6.  验证您的新密钥是否有效。
7.  使用已知密钥列表中旁边的“删除”链接，让 gitub 忘记您的旧密钥。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-23T09:08:37.653

如果您正在使用，`Linux/Mac`那么您可以删除文件`known_hosts`。

它位于`~/.ssh/known_hosts`或者如果您想覆盖/删除特定的 ssh 主机，那么您可以编辑该`known_hosts`文件。

查看所有主机 =>`cat ~/.ssh/known_hosts` 删除 know_hosts 文件 =>`rm -rf ~/.ssh/known_hosts`

# jsp - org.apache.jasper.JasperException: java.lang.NullPointerException 怎么解决

> ID：10189749
> 
> 赞同：0
> 
> 时间：2012-04-17T10:47:24.700
> 
> 标签：jsp, glassfish-3, netbeans-7

我的代码

```
<%@page contentType="text/html" pageEncoding="UTF-8" %>
<%@page language="java" import= "java.sql.*"%>
<%
String driver="org.postgresql.Driver";
Class.forName(driver).newInstance();
Connection con=null;
ResultSet rst=null;
Statement stmt=null;
try
{
String url="jdbc:postgresql://localhost:5432/ksa?user="postgres"password="postgres"";
con=DriverManager.getConnection("url");
stmt=con.createStatement();
}          
catch(Exception e)
           {
System.out.println(e.getMessage());
   }
if(request.getParameter("action")!=null)
   {
       String name=request.getParameter("name");
       String address=request.getParameter("address");
       String id=request.getParameter("id");
       stmt.executeUpdate("insert into cd values('"+ name +"','"+ address +"')");
       rst=stmt.executeQuery("select * from cd");             
   }    
%> 
```

当我编译上面的代码时，我得到如下异常：

```
org.apache.jasper.JasperException: java.lang.NullPointerException 
```

我正在使用 glassfish 3 服务器，glassfish 日志显示以下内容

```
 WARNING: StandardWrapperValve[jsp]: PWC1406: Servlet.service() for servlet jsp threw exception
 java.lang.NullPointerException
at org.apache.jsp.index_jsp._jspService(index_jsp.java:96)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:111)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:403)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:473)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:377)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722) 
```

编码没有显示任何错误迹象，我认为我的编码很好。

# xcode - UITableView自定义分隔符，选择时隐藏

> ID：10189750
> 
> 赞同：0
> 
> 时间：2012-04-17T10:47:37.057
> 
> 标签：xcode, ios5, uitableview

我有一个快速的问题。我有一个`UITableViewController`带有自定义分隔符的自定义单元格（因为`UIImageView`它是 的子视图`cell.contentView`）。现在，当我选择一个单元格时，我想隐藏我的分隔符，这样它就不会在我突出显示的背景上可见。

我试图使用这样的结构：

```
self.separatorImageViewTop.frame = CGRectMake(-240, 0, 120, 2);        

self.separatorImageViewTop.hidden = YES;

self.separatorImageViewTop.alpha = 0;

[self.separatorImageViewTop.frame removeFromSuperview] 
```

Each of this ways is working but each of them is making a blinking effect on custom separator when cell is selected. 如何避免这种闪烁效果？

我的代码是从以下位置调用的：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

但我尝试使用：

```
-(NSIndexPath*)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

希望在`tableView:willSelectRowAtIndexPath: method, but the result are the same - still blinking effect of a disapearing`UIImageView 之后实际突出显示单元格。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:42:31.660

尝试在您的自定义单元格中覆盖此方法：

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
} 
```

# jquery - IE8 在文档中嵌入 Flash 准备就绪

> ID：10189751
> 
> 赞同：1
> 
> 时间：2012-04-17T10:47:37.273
> 
> 标签：jquery, flash, internet-explorer

我正在尝试在加载 dom 内容后加载 Flash 电影。为此，我使用 jQuerys 文档就绪功能。但是如果它在文档内部，则不会加载闪存。它将加载到外部。

最基本的代码版本。

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="js/swfobject.js"></script>
</script>
<body>
    <div id="uploader-1"></div>
</body>
<script>
$(document).ready(function() {
    var i =1;       
    flashElement = $('#uploader-1');

    var swfVersionStr = "11.1.0";
    var flashvars = {"x": 10, "y": 12};
    var params = {"wmode": "transparent"};
    params.quality = "high";
    params.allowscriptaccess = "sameDomain";
    params.allowfullscreen = "false";
    var attributes = {};
    attributes.id = "uploader-1";
    attributes.name = "uploader-1";
    attributes.styleclass = "uploader";

    swfobject.embedSWF(
        "flash/Uploader.swf", "uploader-1",
        '1000px', '1000px',
        swfVersionStr, false, 
        flashvars, params, attributes);
    swfobject.createCSS("#uploader-1", "position: absolute; left: 10px; top: 10px; width: 1000px; height:1000px;");
});
</script> 
```

如果我在没有准备好文档的情况下运行这个确切的代码。有用。（同样值得一提的是，在检查来源时，dom 完全相同）有什么建议吗？我尝试搜索 SO 和 google，但没有找到与此类似的任何内容。问题出现在 IE8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T16:05:10.377

终于解决了。加载电影的旧版本，旧版本似乎是缓存问题。

# c# - 在 mongodb 中为数据库添加新用户

> ID：10189757
> 
> 赞同：1
> 
> 时间：2012-04-17T10:47:49.833
> 
> 标签：c#, mongodb

我想向新创建的数据库添加一个新用户，如果该用户存在，那么我将连接到该数据库。我的代码是：

public CreateDatabaseOperationResult CreateDatabase(string databaseName,string username,string password, MongoServer server) {

```
 CreateDatabaseOperationResult createDatabaseOpResult = new CreateDatabaseOperationResult();
         string message = null;
         MongoCredentials credentials = new MongoCredentials(username, password);
         MongoUser user = new MongoUser(credentials, false);
         try
         {
             if (IsDatabaseNameValid(databaseName, out message))
             {
                 if (server.DatabaseExists(databaseName, admincredentials) == true)
                 {
                     createDatabaseOpResult.Database = server.GetDatabase(databaseName, credentials);
                     MongoUser tempuser = createDatabaseOpResult.Database.FindUser(username);
                     if (tempuser.Equals(user))
                     {

                         //createDatabaseOpResult.DatabaseExists = true;
                         createDatabaseOpResult.IsOperationSuccessfull = false;
                         throw new ArgumentException("Database Already exist with different set of credentials ");
                     }
                 }
                 else
                 {
                     createDatabaseOpResult.Database = server.GetDatabase(databaseName, credentials);
                     createDatabaseOpResult.Database.AddUser(user);
                     //createDatabaseOpResult.DatabaseExists = false;

                 }

                 createDatabaseOpResult.IsOperationSuccessfull = true;
             }
         }
         catch (MongoQueryException ex)
         {
             createDatabaseOpResult.Error = ex;
         }
         //catch (MongoAuthenticationException ex)
         //{
         //    createDatabaseOpResult.Error = ex;
         //}
         catch (MongoException ex)
         {
             createDatabaseOpResult.Error = ex;
         }
         catch (ArgumentException ex)
         {
             createDatabaseOpResult.Error = ex;
         }

        return createDatabaseOpResult;

    } 
```

当我使用现有数据库时，它连接到该数据库，但是当我尝试添加新的使用 Database.AddUser 时给出错误“此数据库的凭据无效”请查看错误并回复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T14:16:55.380

大多数人使用 mongo shell 来添加和删除用户，但如果您真的想在 C# 中执行此操作，诀窍是根据您要执行的操作使用正确的凭据。假设您有以下两组凭据，一组用于 admin 数据库，一组用于常规数据库：

```
var adminCredentials = new MongoCredentials("myadminusername", "myadminpassword", true);
var userCredentials = new MongoCredentials("myusername", "myuserpassword"); 
```

请注意，在创建 adminCredentials 时，您*必须*将 true 传递给 admin 参数。

要测试数据库是否存在需要管理员凭据：

```
if (server.DatabaseExists("mydatabase", adminCredentials))
{
    // database exists
} 
```

添加用户需要管理员凭据：

```
var myDatabaseWithAdminCredentials = server.GetDatabase("mydatabase", adminCredentials);
if (myDatabaseWithAdminCredentials.FindUser("myusername") == null)
{
    myDatabaseWithAdminCredentials.AddUser(userCredentials);
} 
```

通常，您使用常规用户凭据来处理数据库：

```
var myDatabaseWithUserCredentials = server.GetDatabase("mydatabase", userCredentials);
var count = myDatabaseWithUserCredentials.GetCollection("mycollection").Count(); 
```

另外，请记住，每个数据库都可以有任意数量的用户，因此您实际上不需要检查数据库是否已经存在使用不同的凭据集。

# mysql - 无法在 MySQL 中安排存储过程

> ID：10189759
> 
> 赞同：1
> 
> 时间：2012-04-17T10:47:59.287
> 
> 标签：mysql, stored-procedures

我在这里做错了什么？我只想每天运行程序。

```
CREATE EVENT my_event
ON SCHEDULE EVERY 1 DAY
DO
BEGIN
CALL my_procedure("foo");
END $$ 
```

或者

```
CREATE EVENT my_event
ON SCHEDULE EVERY 1 DAY
DO CALL my_procedure("foo"); 
```

并得到

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'EVENT my_event
ON SCHEDULE EVERY 1 DAY
DO
BEGIN
CALL my_procedure' at line 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:10:37.987

试试这个查询

检查事件调度程序是否关闭

```
select @@event_scheduler 
```

如果它关闭，您必须将其打开

```
SET @@global.event_scheduler = ON; 
```

如果 mysql 服务器关闭，事件调度程序将再次关闭

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:07:04.910

如果您使用的是Windows，那么

[如何在windows中安排一个mysql存储过程？](https://stackoverflow.com/questions/3745207/how-to-schedule-a-mysql-stored-procedure-in-windows)

该问题的评论显示了如何创建一个批处理文件，以作为将调用该过程的计划作业运行。

# java - Android：两个日期和时间的区别

> ID：10189761
> 
> 赞同：0
> 
> 时间：2012-04-17T10:48:00.970
> 
> 标签：java, android, date, time

我想知道两个日期和时间内以毫秒为单位的差异，我使用下面的代码，但它增加了 1 小时是 TimeZone 但在我的手机上设置为自动时区....：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    tempo_text = (TextView)findViewById(R.id.tempo_textv);
    Date data = new Date();
    long oggi = data.getTime();
    long finish = Delay(12,30, 18, 04, 2012);
    new TempoIndietro(finish-oggi,1000).start();
}

public class TempoIndietro extends CountDownTimer{

    public TempoIndietro(long millisInFuture, long countDownInterval) {
        super(millisInFuture, countDownInterval);   
    }

    @Override
    public void onFinish() {
    }

    @Override
    public void onTick(long millisUntilFinished) {
        SimpleDateFormat df = new SimpleDateFormat("dd : HH: mm: ss"); 
        df.setTimeZone(TimeZone.getDefault()); 
        String risultato = df.format(new Date(millisUntilFinished)); //arg0 tempo in ms preso dall'onTick
        tempo_text.setText(risultato);

    };

}

public long Delay(int mHour, int mMinute, int giorno, int mese, int anno){
    Calendar cal = Calendar.getInstance();
    cal.setTimeZone(TimeZone.getDefault());
    cal.set(Calendar.DAY_OF_MONTH, giorno);
    cal.set(Calendar.MONTH, mese);
    cal.set(Calendar.YEAR, anno);
    cal.set(Calendar.HOUR_OF_DAY, mHour);
    cal.set(Calendar.MINUTE, mMinute);
    cal.set(Calendar.SECOND, 0);
    cal.set(Calendar.MILLISECOND, 0);
    long delay = cal.getTimeInMillis();
    return delay;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T16:45:49.177

假设 date2 > date 1，我将使用以下方法：

1.  在 date1 和 date2 上使用 Date.getTime() 方法
2.  减去两个值
3.  创建一个日历对象并将以毫秒为单位的时间设置为新值

```
日历 c = Calendar.getInstance();
c.setTimeInMillis(timeDifference);

```

1.  使用 get(Calendar.DAY_OF_MONTH) get(Calendar.HOUR) 等获取值。

如果您的差异大于 31 天，那么您必须考虑月份甚至年份的计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:17:52.213

从这个问题中获取帮助[2个日期时间之间的差异](https://stackoverflow.com/questions/3838527/android-java-date-difference-in-days)

它将在几天内转换，您只需获得两个日期时间之间的差异并将其存储在 long 变量中。

# ruby-on-rails-3 - 如何处理 Rails 模型创建的附加参数？

> ID：10189765
> 
> 赞同：0
> 
> 时间：2012-04-17T10:48:25.760
> 
> 标签：ruby-on-rails-3, model

我有一个注册表格供用户注册我的 rails 应用程序，我为不想要特殊服务的用户添加了一个复选框。这是视图中的代码：

```
<%= form_for(@user, :url => { :action => "create" }, :html => { :multipart => true }) do |f| %>
<%= f.check_box :wantsaoc, :onchange => "check_field(this)" %>
[etc...]
<% end %> 
```

在我的模型中，我有一个 wantaoc 方法，它返回一个布尔值，依赖于其他一些属性。

我如何处理创建，以便我可以捕获 Wantaoc 参数并根据它的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:13:39.263

[回调](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)是 Active Record 对象生命周期的挂钩，允许您在更改对象状态之前或之后触发逻辑。例如，

```
class User < AR::Base
  ..
  before_save :do_something

  def do_something
    if wantsoac.eql?('true')
      .. # Do something
    end
  end
end 
```

浏览您可以使用的各种回调，并选择您需要执行的时间和操作。

# php - PHP：以 25 个字母的块显示输入序列，每行仅 75 个字母

> ID：10189771
> 
> 赞同：0
> 
> 时间：2012-04-17T10:48:45.803
> 
> 标签：php, html

我自己正在学习 PHP，所以我可以在大学里使用。我正在练习练习，但这对我来说太难了。用户将随机序列输入到表单中。我们称之为 $_POST ['query']。我想像下面这样显示这个 $_POST ['query']：

> 标题
> 
> > 1 QDGDAAKGEK EFNKCKACHM IQAPDGTDII KGGKTGPNLY GVVGRKIASE
> > 
> > > 76 EGFKYGEGIL EVAEKNPDLT WTEADLIEYV TDPKPWLVKM TDDKGAKTKM
> > > 
> > > > 第151章

任何帮助将非常感激。谢谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:53:24.160

看看[chunk_split](http://www.php.net/manual/en/function.chunk-split.php)和[explode](http://www.php.net/manual/en/function.explode.php)。结合基本的 for 循环应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:55:12.217

您应该遍历字符串，如下所示。

```
for($i = 0; $i < strlen($string); $i++) {
    echo $string[$i] . "\n";
} 
```

然后，您可以使用 if($i % $n) 控制流程，这对于每个 $n:th 迭代都是错误的。

# iphone - 复制数组 - 糟糕的设计？

> ID：10189772
> 
> 赞同：0
> 
> 时间：2012-04-17T10:48:48.473
> 
> 标签：iphone, objective-c, ios, nsmutablearray, nsarray

我从斯坦福 iTunes 学习了 Objective-C，我想知道如何在不初始化的情况下将 NSMutableArray 复制到 NSArray。我是说：

这是正确的吗？使用“延迟初始化”。

```
-(void)copyAnArray:(NSMutableArray*)listOfElements {
    if(privateElementsLists == nil)
        privateElementsLists = [[NSArray alloc] initWithArray:listOfElements copyItems:YES];
    else
        privateElementsLists = listOfElements;
} 
```

这是一个糟糕的设计吗？我想将对象添加到一个类中的可变数组中，然后当我完成将整个 NSMutableArray 复制到 NSArray 时。

还有一个问题：为什么我`copyItems:YES`在使用initWithArray时必须使用？什么是深拷贝？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:59:40.580

你可以使用 initWithArray: 将一个可变数组复制到一个新数组中：或者这样：

```
privateElementsLists = [NSArray arrayWithArray:listOfElements]; 
```

那么您正在创建一个新数组，其中每个元素都是与原始数组中的数字相同的对象。如果你写：

```
privateElementsLists = [NSArray arrayWithArray:listOfElements copyItems:YES]; 
```

那么新数组对于每个元素都有原始数组中元素的副本。它们不是同一个对象，而是一个副本。当然，对象必须能够响应复制。

你甚至可以这样做：

```
privateElementsLists = (NSArray*) listOfElements ; 
```

那么数组就和原来的一模一样了。这里没有新数组。但是当你使用 NSArray 指针类强制转换它时，你可以像使用 NSArray 而不是 NSMutableArray 一样使用它。如您所知，每个 NSMutableArray 都是一个 NSArray（继承类）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T12:58:33.233

正如 Joseph DeCarlo 所说，如果您唯一要做的就是在一个地方创建数组以在其他地方使用它，那么您不需要复制`NSMutableArray`到。`NSArray`例如，此语句是有效的：

```
NSArray* newArray = [NSMutableArray array]; 
```

或者在代码中：

```
-(NSArray*)returnAnArray
{
    NSMutableArray* editableArray = [NSMutableArray array];
    [editableArray addObject:[[NSObject alloc] init]]; //an exemplary object added to the array
    return editableArray;
} 
```

然而，这就是说，在某些特定情况下，转换`NSMutableArray`为`NSArray`可能不安全，例如，如果原始数组存储在实例变量中。如果同时枚举返回的数组，则在该数组中添加或删除对象可能会导致崩溃。例如：

```
-(void)createArray
{
    self->editableArray = [NSMutableArray array]; // instance variable: NSMutableArray* editableArray
}

-(void)addObjectToArray
{
    [self->editableArray addObject:[[NSObject alloc] init]];
}

-(NSArray*)getArray
{
    return self->editableArray;
}

-(void)enumerateArray
{
    for(NSObject obj in [self getArray])
    {
        // do something with obj
    }
} 
```

如果与（例如从后台线程）`addObjectToArray`同时调用，`enumerateArray`则应用程序将崩溃，因为在枚举时底层数组正在更改。它以 . 的形式返回并不重要`NSArray*`。在这种情况下，您需要添加以同步多个线程对同一对象的访问，或者按照建议`@synchronized`复制整个数组。`arrayWithArray:`但是请注意，文档并没有说明是否`arrayWithArray:`是线程安全的，所以无论如何我都会`@synchronized`在调用周围添加`arrayWithArray:`。

# c# - 如何在独立于浏览器的 jquery 中捕获精确的 td 值

> ID：10189773
> 
> 赞同：1
> 
> 时间：2012-04-17T10:48:51.413
> 
> 标签：c#, javascript, jquery, asp.net

我里面有 li 我包含 td。

```
 var values = '';
        $("#list4 li.add table .mytd").each(function () {
            values = $(this).html() + '|' + values;
        });
                 document.getElementById("MainContent_uscRetailParameters_hdRetailCustomerGroup").value = values;
        __doPostBack('<%=txtRCCode.ClientID%>', ''); 
```

当我在隐藏的字段中捕获时，它是这样的

```
 [alot of spaces]CHARMINSENSITIVE-1 
```

有很多空格我怎样才能在所有浏览器中检索确切的值。在 Internet Explorer 中找不到此空间。但在 Firefox 中，它带有空格，我怎么能捕捉到确切的 td 值。

```
 string lvValues = hdProductGroup.Value;
   //string trim = lvValues.Replace(" ", "");
    string trim = lvValues.Replace("\r", "");
    trim = trim.Replace("\r", "");
    trim = trim.Replace("\n", "");
    trim = trim.Replace("\t", "");

    string str = trim;
    string[] list = str.Split('|'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:03:54.417

你可以在 Jquery 中修剪它吗？尝试以下操作：

```
values = $.trim($(this).html() + '|' + values); 
```

或者在服务器上使用类似的东西：

```
value = value.Trim(); 
```

# objective-c - iOS 上的简单多点触控绘图应用程序：太慢了（因为 drawRect() 不是加法？）

> ID：10189775
> 
> 赞同：1
> 
> 时间：2012-04-17T10:49:05.003
> 
> 标签：objective-c, ios, core-graphics, quartz-2d

我正在使用 Quartz 2D 制作一个简单的多点触控绘图 iPad 游戏。游戏要求我每 1/30 秒在手指位置画一个新的笔画。

据我所知，基本上没有办法让 drawRect() 每次调用时都不清除上下文（self.clearsContextBeforeDrawing = NO; 不起作用），所以我的解决方案是创建一个后台缓冲区位图（或层，我可以同时使用），每次迭代每个手指都将每个新的小笔划绘制到该后台缓冲区中，然后每次调用 drawRect() 时将缓冲区复制到屏幕中。换句话说：

```
backlayer = CGLayerCreateWithContext(context, CGSizeMake(W, H), NULL);
offctx = CGLayerGetContext (backlayer); 
```

进而

```
- (void)drawRect:(CGRect)rect
{

    CGContextRef context = UIGraphicsGetCurrentContext();

    //code here to draw small strokes from old finger position to new one

    CGContextDrawLayerInRect(context, [self bounds], backlayer);
} 
```

这在我在 iPad 2 上测试时没有问题，但昨天我注意到同样的代码在新的 iPad 3 上运行速度要慢得多。性能非常糟糕，我的游戏从 30FPS 一直降低到大约 5 帧左右，可能是由于更大的视网膜显示器。如果我使用我创建的单独的 CGBitmapContext，然后每次迭代都从它创建一个 ImageRef 并用 CGContextDrawImage 绘制它，我会遇到同样的问题。

我可以采取什么方法来解决这个问题？似乎我必须在每次迭代时重绘所有内容，因为它甚至不足以将一个小矩形传递给 drawRect 改变了什么（因为每次迭代都需要为每个手指有几个矩形）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T09:07:00.570

我设法解决了这个问题：

我创建了一个新的 UIView 子类头和实现文件：

```
@interface fingerView : UIView {
} 
```

然后在我的主视图中，在标题中我声明了其中的 5 个视图：

```
fingerView* fview[5]; 
```

在我的主视图实现中，我创建了这个实例的 5 个视图，每个手指分别一个。此外，必须确保制作它们，为它们中的每一个启用多点触控，并确保 clearsContextBeforeDrawing 设置为 NO，因为我们将一次更新它们中的小矩形，并且我们不希望系统清除我们的工作。

```
for(int i=0;i<5;i++) {
        fview[i] = [[pView alloc] initWithFrame:topFrame];
        [self addSubview: fview[i]];
        [self sendSubviewToBack: fview[i]];
        fview[i].opaque= NO;
        fview[i].clearsContextBeforeDrawing = NO;
        fview[i].multipleTouchEnabled = YES;
} 
```

现在在每个手指视图中保留一个大数组（我使用一个简单的数组，比如 10,000 长），其中包含手指绘制的 x 和 y 位置。每当手指移动时，主视图都会检测到它，并调用 [fview[i] updatePos(newx, newy)]，至关重要的是，我们将命令视图仅在这些坐标周围更新其自身的一小部分：

```
[fview[i] setNeedsDisplayInRect: fingerRect]; 
```

其中 fingerRect 是一个以 (newx, newy) 为中心的小矩形。在每个手指视图的 drawRect 方法中，

```
- (void)drawRect:(CGRect)rect
{
    if (movep==0) return;

    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetRGBStrokeColor(context, r, g, b, 1);
    CGContextSetLineWidth(context, linewidth);

    //paint finger
    CGContextBeginPath(context);
    CGFloat slack= 15;
    CGFloat minx= CGRectGetMinX(rect)-slack;
    CGFloat maxx= CGRectGetMaxX(rect)+slack;
    CGFloat miny= CGRectGetMinY(rect)-slack;
    CGFloat maxy= CGRectGetMaxY(rect)+slack;    
    bool drawing = NO;
    for(int i=0;i<movep;i++) {
        CGFloat xx= x[i];
        CGFloat yy= y[i];
        if(xx>minx && xx<maxx && yy>miny && yy<maxy) {

            if(drawing) {

                // continue line
                CGContextAddLineToPoint(context, xx, yy);
                CGContextMoveToPoint(context, xx, yy);

            } else {

                // start drawing
                CGContextMoveToPoint(context, xx, yy);
                drawing= YES;
            }

        } else {
            drawing= NO;  
        }
    }

    CGContextStrokePath(context); 
```

而且，正如我提到的

```
- (void)updatePos: (CGFloat)xnew: (CGFloat) ynew
{
    x[movep]= xnew;
    y[movep]= ynew;
    movep= movep+1; 
```

希望你能弄清楚这是如何工作的。每个视图都会查看这个已修改的矩形，并检查围绕该矩形的所有手指位置，并且只绘制那些。这将归结为很少的笔画，因此整个代码运行得非常快。

整体的教训是 UIViews 是非常优化的。尽可能地尝试制作一大堆，如果有的话，只在本地更新它们，然后让 Apple 的魔法将它们融合在一起。

# jquery - 引发附加到元素的事件处理程序

> ID：10189787
> 
> 赞同：1
> 
> 时间：2012-04-17T10:49:39.030
> 
> 标签：jquery, ajax, asp.net-mvc, asp.net-mvc-3

我想引发附加到元素（`#scheduleLink`）的事件处理程序。我有一个带有以下 JS 的页面（page1）：

```
$(document).ready(function () {
    loadPublicationTab(); // load partial veiw via ajax
    var tab = "@Model.ActiveTab";

    if (tab === "#scheduleLink") {
        $("#scheduleLink").trigger('click');
        alert("true");
    } 
    else {
        alert("false");
        loadPublicationList(-1, 1); 
    }        
});

function loadPublicationTab() {
    $(".wrap_tabs").load("/Publication/GetPublicationTab?mainPage=" + false + "&isEvent=" + true);
} 
```

`loadPublicationTab`返回以下内容：

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#scheduleLink").click(function () {
            loadScheduleEvent();
            $(".wrap_tabs").find("a").removeClass("active");
            $(this).addClass("active");
        });
    });
</script>
// other html 
```

位于`#scheduleLink`其他页面和触发器不起作用。如何正确执行此操作？
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:07:31.633

loadPublicationTab 函数异步工作。所以`#scheduleLink`没有加载到 document.ready 上。您在 上启动事件。`load()`功能成功

```
$(document).ready(function () {
    $(".wrap_tabs").load("/Publication/GetPublicationTab?mainPage=" + false + "&isEvent=" + true, 
    function(){
     var tab = "@Model.ActiveTab";

    if (tab === "#scheduleLink") {
        $("#scheduleLink").trigger('click');
        alert("true");
    } 
    else {
        alert("false");
        loadPublicationList(-1, 1); 
    }    
});

}); 
```

# jquery - 如何将使用 jquery 的焦点监听添加到每个输入框？

> ID：10189789
> 
> 赞同：1
> 
> 时间：2012-04-17T10:49:42.380
> 
> 标签：jquery

这是我尝试添加一个侦听器，该侦听器清除每个输入框的焦点占位符。我的代码中是否有明显的错误？

```
var $inputs = $('.add-item-form :input');
$inputs.each(function() {
    var that = $(this);
    that.focus(function() {
        that.attr('placeholder') = '';
    })
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:53:46.510

采用

```
that.attr('placeholder',''); 
```

安装的

```
that.attr('placeholder')=''; 
```

完整代码

```
 var $inputs = $('.add-item-form :input');
        $inputs.each(function() {
            var that = $(this);
            that.focus(function() {
                that.attr('placeholder','');
            })  
        }); 
```

正如**gdoron**所说，不需要缓存dom对象，你可以使用**gdoron的**代码更简洁的代码

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T11:01:45.700

```
$('.add-item-form :input').focus(function() {
    $(this).attr('placeholder', '');
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T10:58:46.357

```
$('.add-item-form :input').each(function() {
     var that = $(this);
     that.on('focus', function() {
         that.attr('placeholder','');
     });  
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T11:09:18.090

```
$('.add-item-form:input').focus(function() {
    $(this).attr('placeholder', '');
});​ 
```

正如 gdoron 建议的那样，您必须删除 jquery 选择器上的额外空间：`'.add-item-form:input'` 而不是：`'.add-item-form :input'`

# php - PHP对象使用self数组

> ID：10189790
> 
> 赞同：0
> 
> 时间：2012-04-17T10:49:50.623
> 
> 标签：php, oop

我将如何更改以下代码以使其自身作为数组返回。例如使用 $this

```
 public function toArray($data) {

        if (is_array($data) || is_object($data)) {

            $result = array();

            foreach ($data as $key => $value){
                $result[$key] = $this->toArray($value);
            }

            return $result;
        }

        return $data;           
    } 
```

因此，它不是传递`$data`它，而是将所有私有属性从`$this`转换为一个数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:53:34.833

像这样的东西？[get_object_vars()](http://php.net/manual/en/function.get-object-vars.php)

```
$data = get_object_vars ($this); 
```

你也可以这样做（[typecast](http://www.php.net/manual/en/language.types.array.php#language.types.array.casting)）：

```
$data = (array)$this; 
```

这两个有点不同

# c# - 使用安装项目将两个外部文件夹复制到安装路径

> ID：10189791
> 
> 赞同：0
> 
> 时间：2012-04-17T10:49:50.987
> 
> 标签：c#, visual-studio-2010, setup-project

我有两个完全在解决方案之外的文件夹。将它们视为文件夹中的一些外部文本文件，当通过安装程序安装软件时，我需要将其复制到安装程序安装路径。

但是，我只找到了在解决方案（及其内容文件）中添加应用程序文件夹的选项。如何在此安装项目中添加外部文件夹及其内容，以便将其复制到安装路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:56:19.627

如果您正在谈论 Visual Studio 安装程序安装项目，它非常简单......

右键单击解决方案资源管理器中的项目并打开查看 -> 文件系统

从左侧树中选择应用程序文件夹，右键单击并说添加 -> 文件夹

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-28T09:17:43.803

在 Visual Studio 2015 上，只需在文件系统视图中拖放文件夹...

# c# - 从通用接口继承的通用基类

> ID：10189793
> 
> 赞同：5
> 
> 时间：2012-04-17T10:49:52.030
> 
> 标签：c#, generics, c#-4.0

出于某种原因，我正在努力通过使用通用基类从通用接口实现属性，如下所示：

```
public interface IParent<TChild> where TChild : IChild
{
    TChild Child { get; }
}

public interface IChild { } 
```

然后我有一个基类：

```
public class ParentBase<TChild> : IParent<TChild> where TChild : IChild
{
    private TChild _child;
    public ParentBase(TChild child)
    {
        this._child = child;
    }
    #region IParent<TChild> Members

    public TChild Child
    {
        get { return _child; }
    }

    #endregion
} 
```

现在我有一个新的 Parent Derivative 和 Child 对象，如下所示：

```
public class MyChild : IChild { }

public class MyParent : ParentBase<MyChild>, IParent<IChild> 
{
    public MyParent(MyChild child)
        : base(child)
    {
    }
} 
```

我想实例化它并让抽象（接口类型）传递给消费者，如下所示：

```
IParent<IChild> parent = new MyParent(new MyChild()); 
```

但是由于某种原因，我无法正确实现 TChild，即使我已经`public TChild Child`在 ParentBase 上定义了该属性，编译器仍说它没有实现，即使我尝试显式实现。如您所见，约束一直到基类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T11:00:03.560

`ParentBase<MyChild>`您正在从和派生 MyParent `IParent<IChild>`。没有实现

```
IParent<IChild> { IChild Child{get; } } 
```

添加显式实现将允许您的原始代码编译

```
public class MyParent : ParentBase<MyChild>, IParent<IChild>
{
    public MyParent(MyChild child)
        : base(child)
    {
    }

    #region Implementation of IParent<IChild>

    IChild IParent<IChild>.Child
    { 
        get { return base.Child; }
    }

    #endregion
} 
```

如果您还像这样使 IParent 协变：

```
public interface IParent<out TChild> where TChild : IChild
{
    TChild Child { get; }
} 
```

那么你现在可以这样做

```
IParent<IChild> parent = new MyParent(new MyChild()); 
```

或者

```
ParentBase<MyChild> parent2 = new MyParent(new MyChild()); 
```

和

```
IParent<IChild> parent3 = parent2; 
```

正如@svick 的回答所指出的那样，通过协方差，您可以通过不派生`IParent<IChild>`和删除显式接口实现来简化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T11:25:59.643

这正是通用方差有用的地方。如果您将界面标记`IParent`为协变：

```
public interface IParent<out TChild> where TChild : IChild 
```

并删除了`IParent<IChild>`from的显式推导`MyParent`：

```
public class MyParent : ParentBase<MyChild> 
```

那么`MyParent`就可以当作执行了`IParent<IChild>`。因此，例如，以下代码将起作用：

```
MyParent parent = new MyParent(new MyChild());
IParent<IChild> iParent = parent; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T11:14:13.890

如果消费者需要使用获取 IChild 而不是 TChild，你能不摆脱通用接口吗？

```
public interface IParent
{
    public IChild Child { get; }
} 
```

然后你的继承工作得很好

```
public class ParentBase<TChild> : IParent where TChild : IChild
{
    public IChild Child { get { return myChild; } }
} 
```

和

```
public class MyParent : ParentBase<MyChild> // already implements IParent by the base doing so.
{
} 
```

# asp.net - 带有 IIS 7.5 和 asp.net 4.0 的 Web 服务

> ID：10189794
> 
> 赞同：1
> 
> 时间：2012-04-17T10:50:03.683
> 
> 标签：asp.net, web-services, soap, iis-7.5

我在 c# 中有一个 web 服务我不想用 IIS7.5 来托管它所有的安全设置都已经完成了，我想。但是，当我使用 SOAP UI 运行其中一项功能时，它的响应并不好。我在 SOAP UI 中得到了很好的回报，这意味着 web 服务没有失败，但我没有得到正确的结果！该功能不执行..有人可以帮我吗？

# xslt - XSL 转换和 XPath

> ID：10189795
> 
> 赞同：1
> 
> 时间：2012-04-17T10:50:08.350
> 
> 标签：xslt, xpath

我正在开发一个应用程序，我需要转换如下所示的 XML 文档：

```
<?xml version='1.0' encoding='ISO-8859-1'?>
<!DOCTYPE words SYSTEM "words.dtd">
<words>
<word id="word_1">Alfa</word>
<word id="word_2">Beta</word>
<word id="word_3">Gamma</word>
<word id="word_4">Delta</word>
<word id="word_5">Zeta</word>
</words> 
```

使用 XSLT 样式表。我希望转换的结果是（在这种情况下）`Delta`，这是我正在使用的 XSL：

```
<?xml version='1.0' encoding='ISO-8859-1'?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:param name="Hurrengo_Hitza">word_4</xsl:param>
    <xsl:template match="word/[@id = Hurrengo_Hitza]">
  <html>
  <body>
    <tr>
      <td><xsl:value-of select="text()"/></td>
    </tr>
  </body>
  </html>
</xsl:template>

</xsl:stylesheet> 
```

它没有显示任何结果，我必须在 XSLT 中进行哪些更改？XPath 表达式有问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T13:07:55.907

**这里有两个问题**：

1.  `word/[@id = Hurrengo_Hitza]`是语法上无效的 XPath —— 一个谓词 showld 跟随一个位置步骤中的节点测试。

2.  `<xsl:template match="word/[@id = Hurrengo_Hitza]">`. 即使更正`<xsl:template match="word[@id = Hurrengo_Hitza]">`为现在语法上有效的 XPath 表达式和匹配模式，此模板也不匹配任何节点——它匹配`word`其`id`属性等于其`Hurrengo_Hitza`元素之一的字符串值的任何字符串值。但是`word`，所提供的 XML 文档中的任何元素都没有名为`Hurrengo_Hitza`-- 因此模板与任何节点都不匹配，因此根本不会执行。

**解决方案**：

您想要的是一个匹配模式，例如：`word[@id = $Hurrengo_Hitza]`-- 变量或参数引用必须以`$`字符开头。

**如果你改变**：

```
<xsl:template match="word/[@id = Hurrengo_Hitza]"> 
```

**至**：

```
<xsl:template match="word[@id = $Hurrengo_Hitza]"> 
```

您将拥有一个有效的*XSLT **2.0***解决方案。

**但是，在 XSLT 1.0（您似乎正在使用）中，**在匹配模式中包含变量或参数引用是非法的。

因此，XSLT 解决方案将是这样的：

```
<xsl:template match="word">
  <xsl:if test="@id = $Hurrengo_Hitza">
   <!-- Processing here -->
  </xsl:if> 
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:54:46.340

XSLT 中的参数前面需要一个圆号 ($)

所以试试：

```
<xsl:template match="word[@id = $Hurrengo_Hitza]"> 
```

**更新：**

我认为您只能使用`variables`XSLT 2 上的 match 属性。

但你可以这样做：

```
<xsl:param name="Hurrengo_Hitza" select="'word_4'" />

<xsl:template match="/">
        <xsl:for-each select="//word[@id = $Hurrengo_Hitza]">
          <html>
          <body>
            <tr>
              <td><xsl:value-of select="text()"/></td>
            </tr>
          </body>
          </html>
        </xsl:for-each>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T10:57:25.193

改变

```
<xsl:template match="word/[@id = Hurrengo_Hitza]"> 
```

至

```
<xsl:template match="word/[@id = $Hurrengo_Hitza]"> 
```

# c# - 操作 WCF 标头详细信息

> ID：10189802
> 
> 赞同：5
> 
> 时间：2012-04-17T10:50:40.610
> 
> 标签：c#, wcf, security, header

我正在为某些 STS 服务构建一个客户端，并且现在我正在尝试向 WCF 消息添加一个标头。在我对 RequestSecurityToken 的调用中，我必须包含一个 UsernameToken。

我不确定如何做到这一点。目前我定义了一个端点行为和一个消息检查器（花了我足够长的时间来发现这些......）。在后者的 BeforeSendRequest() 中，我创建了一个派生自 MessageHeader 的自定义类“Security”的对象。安全性包括 UsernameToken 的一个实例。

```
public class MessageInspector : IClientMessageInspector {

 public object BeforeSendRequest(ref Message request, IClientChannel channel) {
    Security uns = new Security();
    uns.UsernameToken = new UsernameToken();

    // ...

    var Header = new MessageHeader<Security>(uns);
    var untyped = Header.GetUntypedHeader("Security", "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd");
    request.Headers.Add(untyped);
    return null;
 }
}

public class Security : MessageHeader {
 public UsernameToken UsernameToken = new UsernameToken();

 public override string Name {
    get { return "Security"; }
 }

 public override string Namespace {
    get { return "http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd"; }
 }
}

public class UsernameToken {
 public String Username = "";
 public Password Password = new Password();
} 
```

这是正在序列化的内容

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Header>
    <Action s:mustUnderstand="1" xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none">urn:RequestSecurityToken</Action>
    <Security xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <UsernameToken xmlns="http://schemas.datacontract.org/2004/07/Tarifrechner.Kfz">
        <Password>
          <Type>http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText</Type>
          <password>******</password>
        </Password>
        <Username>******</Username>
      </UsernameToken>
    </Security>
  </s:Header>
  <s:Body />
</s:Envelope> 
```

特别是 UsernameToken 的命名空间似乎是错误的。我知道它来自数据合同序列化，但我需要一个不同的命名空间。

这就是我希望序列化数据的样子

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="...">
  <soap:Header>
    <Security xmlns:q1="http://www.bipro.net/namespace" xsi:type="q1:UserNameSecurity" 
          xmlns="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
      <UsernameToken>
        <Username>******</Username>
        <Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">******</Password>
      </UsernameToken>
    </Security>
    <wsa:Action>urn:RequestSecurityToken</wsa:Action>
    <wsse:Security>
      <wsu:Timestamp wsu:Id="Timestamp-b9dd599d-5901-451d-8321-6a309091f273">
        <wsu:Created>2012-03-11T16:02:56Z</wsu:Created>
        <wsu:Expires>2012-03-11T16:07:56Z</wsu:Expires>
      </wsu:Timestamp>
    </wsse:Security>
  </soap:Header>
  <soap:Body>
    <RequestSecurityToken xmlns="http://schemas.xmlsoap.org/ws/2005/02/trust">
      <TokenType>http://schemas.xmlsoap.org/ws/2005/02/sc/sct</TokenType>
      <RequestType>
        http://schemas.xmlsoap.org/ws/2005/02/trust/Issue
      </RequestType>
    </RequestSecurityToken>
  </soap:Body>
</soap:Envelope> 
```

我的方法对吗？以及如何操作诸如标题详细信息的名称空间或数据是否被序列化为属性或元素之类的东西？

**更新**

* * *

正如 Ladislav 已经指出的那样，我不必自己实现像 UsernameToken 这样的类。我这样做只是因为我对 WCF 的了解非常有限。

到现在为止，我发现 WS2007HttpBinding 配置为使用 SecurityMode.TransportWithMessageCredential 并且将 EstablishSecurityContext 设置为 false 几乎可以生成我正在寻找的 XML。我怎么会知道的？

但是还有一个问题：我的请求有一个空的 body 元素，我想要生成的请求在 body 元素内具有一个 RequestSecurityToken 元素。有谁知道，我怎么能做到这一点？

使用 EstablishSecurityContext = true 有帮助，但同时将我的 Soap-Action 从所需的“urn:RequestSecurityToken”更改为不工作的“http://docs.oasis-open.org/ws-sx/ws-trust/200512 /RST/SCT”。

* * *

我很感激任何答案！

非常感谢！

比约恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T21:12:13.343

另一种方法是为您的请求定义一个**MessageContract**类型，它允许您定义在 SOAP 消息的标头和正文中显示的内容并调整使用的名称空间。例如，考虑以下服务定义：

```
[ServiceContract]
    public interface IMyService
    {
        [OperationContract]
        MyResponse DoSomething(MyRequest request);
    }

    public class MyService : IMyService
    {
        public MyResponse DoSomething(MyRequest request)
        {
            return new MyResponse()
            {
                Details = "Service did something awesome.",
                Timestamp = DateTime.Now
            };
        }
    }

    [MessageContract(IsWrapped = true, WrapperNamespace = "http://myservice/messages/")]
    public class MyRequest
    {
        [MessageHeader(Namespace = "http://myservice/security")]
        public string TokenThingy
        {
            get;
            set;
        }
    }

    [MessageContract(IsWrapped = true, WrapperNamespace = "http://myservice/messages")]
    public class MyResponse
    {
        [MessageBodyMember]
        public string Details
        {
            get;
            set;
        }

        [MessageBodyMember]
        public DateTime Timestamp
        {
            get;
            set;
        }
    } 
```

发送请求会生成以下 SOAP：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Header>
    <Action s:mustUnderstand="1" xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none">http://tempuri.org/IMyService/DoSomething</Action>
    <h:TokenThingy xmlns:h="http://myservice/security">fda</h:TokenThingy>
  </s:Header>
  <s:Body>
    <MyRequest xmlns="http://myservice/messages/" />
  </s:Body>
</s:Envelope> 
```

该服务的响应如下所示：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Header />
  <s:Body>
    <MyResponse xmlns="http://myservice/messages">
      <Details xmlns="http://tempuri.org/">Service did something awesome.</Details>
      <Timestamp xmlns="http://tempuri.org/">2012-05-04T17:04:36.5980424-04:00</Timestamp>
    </MyResponse>
  </s:Body>
</s:Envelope> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:57:46.743

有几种不同的方法可以将标题添加到消息中，具体取决于您需要如何控制标题内容以及需要在何处插入标题。

在您的应用程序代码中，您可以围绕请求创建一个 OperationContextScope 以更改某些请求属性。在 OperationContextScope 中，您有一个有效的 OperationContext.Current 实例，它允许通过 OutgoingMessageHeaders 集合操作消息头。使用此方法可以将标头的控制深入到应用程序代码中。您必须负责在需要的地方复制适当的代码。

[这](http://blogs.msdn.com/b/drnick/archive/2008/07/07/adding-headers-to-a-call.aspx) [两个](http://blogs.msdn.com/b/drnick/archive/2008/08/22/autoheader-extension.aspx)链接（来自 WCF 团队的某个人）通过大量代码示例更详细地讨论了这一点：

# c++ - c++ 运算符重载逻辑运算符

> ID：10189803
> 
> 赞同：0
> 
> 时间：2012-04-17T10:50:40.907
> 
> 标签：c++, operator-overloading, logical-operators

嗨，我想知道如何解决这个问题，

我需要重载 +、- 和 * 运算符，但需要用逻辑运算符替换它们；

"+" 应该使用 OR

0+0 = 0 , 0+1 = 1, 1+1 = 1 ,1+0 = 1

我是否必须在重载中添加某种 if 语句？

关于我如何做到这一点的任何帮助？

谢谢

他们将使用二进制作为数据类型，两个以二进制作为数据的矩阵

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:55:22.013

不需要`if`语句，只需要返回`&&`and的结果即可`||`。

```
struct A
{
   bool val;
   bool operator + (const A& other) { return val || other.val; }
   bool operator * (const A& other) { return val && other.val; }
}; 
```

请注意，您不能为内置类型重载运算符。至少有一个参数**必须**是用户定义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:55:51.920

您不想为整数或任何其他内置类型重载这些运算符，对吗？因为这是不可能的。如果您有自己的*包含*布尔值或整数值的类，则逻辑如下所示：

```
bool operator + (const MyClass& m1, const MyClass& m2) 
{
     return m1.GetMyBooleanMember() || m2.GetMyBooleanMember();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T10:56:04.717

重载 operator+(int, int) 是不可能的，但是您可以创建一个包装 int 并具有您想要的行为的新类型...

```
struct BoolInt
{
   int i;
};

BoolInt operator+(BoolInt x, BoolInt y) { return { x.i || y.i }; }
BoolInt operator*(BoolInt x, BoolInt y) { return { x.i && y.i }; }
BoolInt operator-(BoolInt x, BoolInt y) { return { x.i || !y.i }; } // guessing 
```

# objective-c - 带有 OR 条件的 Objective-C IF 语句

> ID：10189809
> 
> 赞同：10
> 
> 时间：2012-04-17T10:51:33.467
> 
> 标签：objective-c, ios

这个 IF 语句有什么问题？

```
if ([currentElement isEqualToString:@"aaa" || currentElement isEqualToString:@"bbb"]) 
```

XCode 说：

```
No visible @interface for 'NSString' declares the selector 'isEqualToString:isEqualToString:' 
```

如果可以提供帮助，我将使用 NSXML Parser 程序，但我认为这不是问题所在。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-17T10:54:12.450

您必须比较两个方法调用的结果：

```
if ([currentElement isEqualToString:@"aaa"] || [currentElement isEqualToString:@"bbb"]) 
```

您实际编译的代码为

```
if ([currentElement isEqualToString:(@"aaa"||currentElement) isEqualToString:@"bbb"]) 
```

那就是编译器试图调用不存在`isEqualToString:isEqualToString:`的 NSString 方法

# c - SQLite3：将查询结果直接分配给 C 中的结构

> ID：10189810
> 
> 赞同：1
> 
> 时间：2012-04-17T10:51:40.017
> 
> 标签：c, sqlite

我在网上搜索，但找不到任何解决我的问题的方法。我有一个表 user_info，其中包含字段 user_id、用户名、密码。我也有一个结构 st_user_info。

```
typedef struct {
     int userId;
     char* userName;
     char* password;
} T_USERINFO;
T_USERINFO tUserInfo[10]; 
```

现在，我希望我的来自 sqlite3_step 命令或任何命令的查询结果将直接分配给这个结构 tUserInfo[index]。有没有办法在这条路上做......？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:57:40.650

不支持高级语言功能，例如C 中的[反射](http://en.wikipedia.org/wiki/Reflection_%28computer_programming%29)，所以简短的回答是否定的。SQLite 不能自动为你填充你的结构。您必须以正常方式检索查询结果，并自己将值分配给结构。

# php - 如何在服务器上启用 HTTP_RANGE

> ID：10189811
> 
> 赞同：1
> 
> 时间：2012-04-17T10:51:39.980
> 
> 标签：php, http

如果我在我的服务器上运行以下脚本来测试 HTTP_RANGE，我会得到一个“否”响应。我的 LAMP 服务器中是否需要为此设置一些内容才能让我接受？我似乎找不到任何有关此的信息，只有如何测试它的存在。

```
<?php
if (isset($_SERVER['HTTP_RANGE'])) {
    echo "yes";
} elseif (isset($_ENV['HTTP_RANGE'])) {
    echo "yes";
} else {
    echo "no";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:56:00.620

仅当客户端（“用户代理”）发出请求特定范围的字节（Accept-Ranges 请求标头）而不是整个文档时，才会出现此变量。这些不是为常规请求定义的。您确定您的用户代理要求字节范围吗？

# tomcat - Apache Tomcat 已安装并正在运行，但 localhost:8080 在浏览器中显示空白页面

> ID：10189817
> 
> 赞同：16
> 
> 时间：2012-04-17T10:52:45.913
> 
> 标签：tomcat

我正在使用 Fedora 16，并且我已经使用该`tomcat6`软件包安装了 Apache Tomcat。

在终端中，我启动了 Tomcat：

```
[rajani@localhost ~]$ sudo service tomcat6 start
[sudo] password for rajani: 
Redirecting to /bin/systemctl  start tomcat6.service
[rajani@localhost ~]$ 
```

但是，如果我浏览`http://localhost:8080`它只会显示一个空白页面。请给我解决方案。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-19T07:05:40.587

我在 Fedora 16 下遇到了同样的问题；[Tomcat 7 软件包安装正确，但我在localhost:8080](http://localhost:8080/)看不到任何东西。我四处搜索，发现我需要安装一些额外的软件包才能使默认的 webapps 工作。这是对我有用的解决方案：

```
# sudo yum install tomcat-admin-webapps.noarch tomcat-docs-webapp.noarch tomcat-javadoc.noarch tomcat-systemv.noarch tomcat-webapps.noarch 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-15T18:27:51.080

我认为您在 webapps 文件夹下删除了根文件夹等文件下载或再次在 wep 应用程序文件夹中安装其他位置复制粘贴它会起作用

默认的 Tomcat 主页。它可以在本地文件系统上找到：

```
$CATALINA_HOME/webapps/ROOT/index.html 
```

`$CATALINA_HOME`Tomcat 安装目录的根目录在哪里。如果您看到此页面，但您认为您不应该看到，那么您要么是刚安装 Tomcat 的用户，要么是尚未完成设置的管理员正确的。如果是后者，请参阅 Tomcat 文档以获取比 INSTALL 文件中更详细的设置和管理信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T02:48:17.137

如果 $TOMCAT_HOME/webapps 中没有内容，那么是的，您将看到一个空白的空白页面。

您是否安装了 tomcat6-webapps rpm？这为 tomcat 提供了 ROOT 和示例 Web 应用程序：

[http://pkgs.org/fedora-centos-rhel-opensuse-mandriva/jpackage-5.0-updates-i386/tomcat6-webapps-6.0.35-1.jpp5.noarch.rpm.html](http://pkgs.org/fedora-centos-rhel-opensuse-mandriva/jpackage-5.0-updates-i386/tomcat6-webapps-6.0.35-1.jpp5.noarch.rpm.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-08T16:26:29.780

我没有得到一个完全空白的页面，但它是一个错误页面：

[![在此处输入图像描述](../Images/471d05f9aa4f9a3ec5617c529dd04c98.png)](https://i.stack.imgur.com/KUrGm.png)

我只是错过了我的页面的路径。

我去了“localhost:8080/api/greetings”但我忘记了我写的

```
server.contextPath=/myapp 
```

在我的 application.properties 文件中（位于 src/main/resources 中）。

因此，正确的路径是“localhost:8080/myap/api/greetings”。那是我的错误。我希望它可以帮助某人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-07T19:16:24.957

我在 Ubuntu 14.04 和 Tomcat7 上遇到了同样的问题。就我而言， /etc/tomcat7/context.xml 有两个条目。删除其中一个解决了这个问题。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-05-08T23:47:12.107

确保 ${TOMCAT_HOME}/webapps/ROOT 目录可用。ROOT/index.html 是您尝试访问[http://localhost:8080时加载的默认文件](http://localhost:8080)

# sql - LEFT OUTER JOIN 未显示 JOIN 右侧缺失的行

> ID：10189820
> 
> 赞同：2
> 
> 时间：2012-04-17T10:52:51.460
> 
> 标签：sql, oracle11g, left-join

我正在建立一个查询以返回给定员工，该人角色所需的所有“测试”，该人要么未参加测试，要么测试已过期。

第一部分列出了雇员角色的所有测试，如下所示：

```
SELECT e.EMP_NO, e.POS_CODE, p.PROPERTY_CODE, p.PROPERTY_VALUE
FROM COMPANY_PERS_ASSIGN e
INNER JOIN COMPANY_POS_PROPERTY_ALL p ON p.POS_CODE = e.POS_CODE
WHERE e.EMP_NO = '3615'; 
```

到目前为止一切都很好......对于这个例子，它列出了这个人角色所需的 4 个测试。

接下来，我需要将它加入到显示员工参加了哪些测试的视图中：

```
SELECT e.EMP_NO, e.POS_CODE, p.PROPERTY_CODE, p.PROPERTY_VALUE, ep.PROPERTY_CODE, ep.PROPERTY_VALUE
FROM COMPANY_PERS_ASSIGN e
INNER JOIN COMPANY_POS_PROPERTY_ALL p ON p.POS_CODE = e.POS_CODE
LEFT OUTER JOIN COMPANY_EMPLOYEE_PROPERTY_ALL ep ON ep.PROPERTY_VALUE = p.PROPERTY_VALUE
WHERE e.EMP_NO = '3615'; 
```

使用 LEFT OUTER JOIN，我希望它返回上一个查询中的所有行，以及我们刚刚添加的视图中的任何匹配信息。

如果这个角色的测试是 A/B/C/D，并且如果这个员工做了一次测试 A，测试 D 3 次，我会期望以下输出：

```
3615 POS1 A A A A
3615 POS1 B B
3615 POS1 C C
3615 POS1 D D D D
3615 POS1 D D D D
3615 POS1 D D D D 
```

但相反，我得到：

```
3615 POS1 A A A A
3615 POS1 D D D D
3615 POS1 D D D D
3615 POS1 D D D D 
```

我对 T-SQL 比对 PL/SQL 更熟悉，但据我所知，我应该采取正确的方法，但显然有些地方不对劲。

我错过了什么？

**更新：** 我意识到我的逻辑有一个错误——在我的原始代码示例中，我加入了 COMPANY_EMPLOYEE_PROPERTY_ALL 表，通过 PROPERTY_VALUE （即测试）链接，但没有考虑到员工。

为了解决这个问题（并尝试不同的方法），我引入了一个子查询：

```
SELECT e.EMP_NO, e.POS_CODE, p.PROPERTY_VALUE, p.value_description, ep.PROPERTY_VALUE, ep.value_description, ep.VALID_TO
FROM COMPANY_PERS_ASSIGN e
INNER JOIN COMPANY_POS_PROPERTY_ALL p ON p.POS_CODE = e.POS_CODE
LEFT OUTER JOIN 
    (Select ep.PROPERTY_VALUE, ep.VALID_TO, ep.value_description
    FROM COMPANY_PERS_ASSIGN e
    INNER JOIN COMPANY_EMPLOYEE_PROPERTY_ALL ep ON ep.EMP_NO = e.EMP_NO
    WHERE e.EMP_NO = '3615') ep on ep.PROPERTY_VALUE = p.PROPERTY_VALUE
WHERE e.EMP_NO = '3615'
AND (to_char(ep.VALID_TO) <= '17-APR-12' OR ep.VALID_To IS NULL); 
```

此解决方案有效。

但是，鉴于我发现的问题，我该如何重新调整原始方法？或者我应该坚持这个解决方案。我处于“工作”阶段，但我一直在寻找进一步的优雅（以及学习的机会）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T15:08:47.687

尝试将与以下相关的条件添加到您的左外连接条件`EMP_NO`：

```
SELECT e.EMP_NO, e.POS_CODE, p.PROPERTY_CODE, p.PROPERTY_VALUE, ep.PROPERTY_CODE, ep.PROPERTY_VALUE
FROM COMPANY_PERS_ASSIGN e
INNER JOIN COMPANY_POS_PROPERTY_ALL p ON p.POS_CODE = e.POS_CODE
LEFT OUTER JOIN COMPANY_EMPLOYEE_PROPERTY_ALL ep ON ep.PROPERTY_VALUE = p.PROPERTY_VALUE
                                                AND ep.EMP_NO = e.EMP_NO
WHERE e.EMP_NO = '3615'
-- AND (ep.VALID_TO <= to_date('20120417', 'yyyymmdd') OR ep.VALID_To IS NULL) 
```

# r - 随机化和分层树

> ID：10189843
> 
> 赞同：1
> 
> 时间：2012-04-17T10:54:46.060
> 
> 标签：r, hierarchical-clustering

我正在尝试置换（仅按列）我的数据矩阵 1000 次，然后在“R”中进行层次聚类，因此在 1000 次随机化后我的数据上有最终的树。这就是我迷路的地方。我有这个循环

```
 for(i in 1:1000) 
    { 
    permuted <- test2_matrix[,sample(ncol(test2_matrix), 12, replace=TRUE)]; (this permutes my columns)
    d = dist(permuted, method = "euclidean", diag = FALSE, upper = FALSE, p = 2);
    clust = hclust(d, method = "complete", members=NULL);
    } 
    png (filename="cluster_dendrogram_bootstrap.png", width=1024, height=1024, pointsize=10) 
    plot(clust) 
```

我不确定最终的树是 1000 次随机化之后的产物，还是只是它在循环中计算的最后一棵树。另外，如果我想在树上显示引导值，我应该怎么做？

非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:24:03.357

您的示例中的值`clust`确实是循环中计算的最终树。这是一种制作和保存矩阵的 1000 个排列的方法

```
make.permuted.clust <- function(i){ # this argument is not used
  permuted <- data.matrix[,sample(ncol(data.matrix), 12, replace=TRUE)]
  d <- dist(permuted, method = "euclidean", diag = FALSE, upper = FALSE, p = 2)
  clust <- hclust(d, method = "complete", members=NULL)
  clust # return value
}

all.clust <- lapply(1:1000, make.permuted.clust) # 1000 hclust trees 
```

你的问题的第二部分应该在[这里](https://stackoverflow.com/a/1655072/188595)回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T12:52:46.290

您可能对 randomForest 包中实现的 RandomForest 方法感兴趣，该方法实现了数据和拆分变量的引导，并允许您保存树并获得共识树。

```
library(randomForest) 
```

[原始随机森林（在 FORTRAN 77 中）开发者网站](http://www.stat.berkeley.edu/~breiman/RandomForests/cc_home.htm)

[包装手册](http://cran.r-project.org/web/packages/randomForest/randomForest.pdf)

# c - 如何在c中实现定时器？

> ID：10189845
> 
> 赞同：5
> 
> 时间：2012-04-17T10:54:51.597
> 
> 标签：c, linux

我们想在 Linux 平台下给我们的 C 程序添加一个定时器。

我们正在尝试发送数据包，我们想知道在 1 分钟内发送了多少数据包。`while`我们希望计时器在执行发送数据包的循环的同时运行。例如：

```
 while(1)    
    {     
      send packets;    
    } 
```

此循环将继续发送数据包，直到按下 ctrl-z。应使用计时器在 60 秒后停止循环。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T14:24:37.820

你可以这样做：

```
#include <signal.h>
#include <unistd.h>
#include <stdio.h>

volatile int stop=0;

void sigalrm_handler( int sig )
{
    stop = 1;
}

int main(int argc, char **argv)
{
    struct sigaction sact;
    int num_sent = 0;
    sigemptyset(&sact.sa_mask);
    sact.sa_flags = 0;
    sact.sa_handler = sigalrm_handler;
    sigaction(SIGALRM, &sact, NULL);

    alarm(60);  /* Request SIGALRM in 60 seconds */
    while (!stop) {
        send_a_packet();
        num_sent++;
    }

    printf("sent %d packets\n", num_sent);
    exit(0);
} 
```

如果循环开销过大，您可以通过每次迭代发送 N 个数据包并将计数增加 N 次迭代来分摊开销。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-17T11:05:03.993

只需检查循环每次迭代的时间，当 1 分钟过去后，计算您发送了多少数据包。

**编辑**更改以反映问题的实际要求！

```
time_t startTime = time(); // return current time in seconds
int numPackets = 0;
while (time() - startTime < 60)
{
    send packet
    numPackets++;
}
printf("Sent %d packets\n", numPackets); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-17T11:00:32.050

也可以检查这个[http://www.gnu.org/software/libc/manual/html_node/Setting-an-Alarm.html](http://www.gnu.org/software/libc/manual/html_node/Setting-an-Alarm.html)来设置定时器，它会向你的进程发送信号，你可以停止 while 循环。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-17T10:58:44.343

看标准`[time()](http://linux.die.net/man/2/time)`函数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-15T13:03:55.813

以下是可用于 C 与 linux 平台的不同时间间隔的 itimer 代码片段：

```
 #include <signal.h>
    #include <stdio.h>
    #include <string.h>
    #include <sys/time.h>

    void timer_handler (int signum)
    {
     static int count = 0;
     printf ("timer expired %d times\n", ++count);
    }

    int main ()
    {
        struct sigaction sa;
        struct itimerval timer;

        /* Install timer_handler as the signal handler for SIGVTALRM. */
        memset (&sa, 0, sizeof (sa));
        sa.sa_handler = &timer_handler;
        sigaction (SIGVTALRM, &sa, NULL);

        /* Configure the timer to expire after 1 sec... */
        timer.it_value.tv_sec = 1;
        timer.it_value.tv_usec = 0;
        /* ... and every 1000 msec after that. */
        timer.it_interval.tv_sec = 1;
        timer.it_interval.tv_usec = 0;
        /* Start a virtual timer. It counts down whenever this process is
        *    executing. */
        setitimer (ITIMER_VIRTUAL, &timer, NULL);

        /* Do busy work. */
        while (1);
            sleep(1);
    } 
```

希望它会有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-25T10:20:03.823

使用 wheetimer（及其变体）数据结构来实现计时器。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-04-17T10:57:57.893

男人 3 睡觉：

> NAME sleep - 休眠指定的秒数
> 
> 概要 #include < unistd.h >
> 
> ```
>  unsigned int sleep(unsigned int seconds); 
> ```

# facebook - Facebook OAuth redirect_uri 到页面选项卡错误

> ID：10189846
> 
> 赞同：8
> 
> 时间：2012-04-17T10:54:53.993
> 
> 标签：facebook, oauth

我正在关注本教程[http://developers.facebook.com/docs/appsonfacebook/tutorial/](http://developers.facebook.com/docs/appsonfacebook/tutorial/) 尤其是这部分代码

```
 $app_id = "YOUR_APP_ID";

 $canvas_page = "YOUR_CANVAS_PAGE_URL";

 $auth_url = "http://www.facebook.com/dialog/oauth?client_id=" 
        . $app_id . "&redirect_uri=" . urlencode($canvas_page); 
```

当我输入`$canvas_page`为

```
$canvas_page = "http://www.facebook.com/PAGE_NAME/app_APP_ID/" 
```

我得到一个`"Error occured. Try again Later"`

如果我改为输入 Canvas Page Url，它会正确显示画布页面，但我不希望这样。

我确信它上周工作，所以我不知道现在出了什么问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T11:56:25.147

对我来说，问题是 GET 请求，似乎 facebook 要求 GET 参数，我会告诉你我的意思：

我有这个：

```
uri = "http://www.facebook.com/pagename/app_appId"; 
```

当我将其更改为以下内容时，它开始工作：

```
uri = "http://www.facebook.com/pagename/?sk=app_appId"; 
```

希望这对某人有所帮助，因为它对我有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T21:55:10.080

根据文档，这应该有效 - [https://developers.facebook.com/docs/authentication/pagetab/](https://developers.facebook.com/docs/authentication/pagetab/)

无法直接从 Canvas App -> Auth Dialog -> Page Tab 但 Page Tab -> Auth Dialog -> Page Tab 重定向应该与该文档一起正常工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T07:07:37.980

以前的工作是这样的

```
$canvas_page="http://www.facebook.com/pages/PAGE_NAME/PAGE_ID?sk=app_APP_ID" 
```

但是由于我将应用程序更改为命名空间，因此我必须执行以下操作：

```
$canvas_page="http://apps.facebook.com/APP_NAMESPACE/" 
```

现在它可以正确显示而没有错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T20:07:38.013

在应用程序设置中，尝试将 TAB URL 放入：

facebook 上的应用程序 -> 画布 URL

也在安全 URL 中

在最后加上斜线，但在你的重定向中最后放上斜线。

# asp.net - 使用 foreach 获取 Sql 表中的所有值

> ID：10189850
> 
> 赞同：1
> 
> 时间：2012-04-17T10:55:10.017
> 
> 标签：asp.net, entity-framework, foreach

我需要从表“StaffSectionInCharge”中获取所有 Id，它只有两列 StaffId 和 SectionId，我有 StaffId 和 StudentId 的值.....问题是我无法将记录直接获取到该表.....我使用实体框架，这个表的设计是

```
[EdmRelationshipNavigationPropertyAttribute("Model", "StaffSectionInCharge", "Section")]
    public EntityCollection<Section> Sections
    {
        get
        {
            return ((IEntityWithRelationships)this).RelationshipManager.GetRelatedCollection<Section>("Model.StaffSectionInCharge", "Section");
        }
        set
        {
            if ((value != null))
            {
                ((IEntityWithRelationships)this).RelationshipManager.InitializeRelatedCollection<Section>("Model.StaffSectionInCharge", "Section", value);
            }
        }
    } 
```

我可以通过人员表访问此表，例如

```
Staff staff = buDataEntities.Staffs.First(s => s.StaffId == StaffId);
Section section = buDataEntities.Sections.First(s => s.SectionId == SectionId);

staff.Sections.Add(section);
buDataEntities.savechanges(); 
```

像这样我可以将记录添加到这个 StaffSectionInCharge 表中......

这里我想获取对应SectionId的所有StaffId

我试着变得喜欢

```
DataAccess.Staff staffs = new DataAccess.Staff();

foreach (int staff in staffs.Sections.Select(s=>s.SectionId))
            { 

            } 
```

但它不起作用，任何人都可以在这里帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:40:28.843

```
var staffIds = buDataEntities.Staffs
    .Where(st => st.Sections.Any(se => se.SectionId == SectionId))
    .Select(st => st.StaffId)
    .ToList(); 
```

或者

```
var staffIds = buDataEntities.Sections
    .Where(se => se.SectionId == SectionId)
    .SelectMany(se => se.Staffs.Select(st => st.StaffId))
    .Distinct()
    .ToList(); 
```

两种选择都应该有效。如果`SectionId`是您的主键，`Section`您可以将第二个代码简化为：

```
var staffIds = buDataEntities.Sections
    .Where(se => se.SectionId == SectionId)
    .Select(se => se.Staffs.Select(st => st.StaffId))
    .SingleOrDefault(); 
```

# iphone - 在 iPhone 应用程序中持续显示 iAds

> ID：10189852
> 
> 赞同：0
> 
> 时间：2012-04-17T10:55:14.783
> 
> 标签：iphone, objective-c, ipad

我正在开发必须连续显示 iAd 的应用程序。谁能告诉我如何设置持续停留在屏幕上的 iAd。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T11:11:06.860

问题是您应该只在加载内容时才显示 iAd 横幅。并且无法保证 24/7 全天候为您提供内容。

但是，当 iAd 横幅没有内容时，您可以提供替代内容（自家广告或其他来源的广告）。

请注意，在这种情况下，您必须隐藏 iAd 横幅并在其位置显示自定义横幅。

作为替代内容的来源，您可以查看：

[莫比克利克斯](http://www.mobclix.com/)

[广告](http://www.google.com/ads/admob/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-06T09:45:30.907

您必须将 iAd 带入应用程序 Delegate View 并设置将子视图置于最前面。在 Application Delegate 中添加这一行

```
- (void) applicationDidFinishLaunching:(UIApplication*)application
{

    [self createAdBannerView];

}

- (void)createAdBannerView
{

    Class classAdBannerView = NSClassFromString(@"ADBannerView");

    if (classAdBannerView != nil) 

    {
        self.adBannerView = [[[classAdBannerView alloc] initWithFrame:CGRectZero] autorelease];
        [_adBannerView setRequiredContentSizeIdentifiers:[NSSet setWithObjects: ADBannerContentSizeIdentifier320x50, ADBannerContentSizeIdentifier480x32, nil]];

        if (UIInterfaceOrientationIsLandscape([UIDevice currentDevice].orientation)) 
        {
            [_adBannerView setCurrentContentSizeIdentifier:ADBannerContentSizeIdentifier480x32];
        } 
        else
        {
            [_adBannerView setCurrentContentSizeIdentifier:ADBannerContentSizeIdentifier320x50];            
        }

        if(DeviceFlag == 1)
        {
            [_adBannerView setFrame:CGRectOffset([_adBannerView frame], 0, -100)];

        }
        else
        {
            [_adBannerView setFrame:CGRectOffset([_adBannerView frame], 0, -70)];

        }
        //[_adBannerView setFrame:CGRectOffset([_adBannerView frame], 0, -[self getBannerHeight])];
        [_adBannerView setDelegate:self];

        [viewController.view addSubview:_adBannerView];
        [self.window bringSubviewToFront:_adBannerView];

    }
} 
```

# android - 控制 Google TTS API 的输入

> ID：10189860
> 
> 赞同：0
> 
> 时间：2012-04-17T10:55:41.683
> 
> 标签：android, string, android-asynctask, media-player, google-api

我正在使用谷歌的非官方 tts api 创建一个 TTS 应用程序，它工作正常，但 api 一次最多只能处理 100 个字符，但我的应用程序可能必须发送包含多达 300 个字符的字符串。

这是我的代码

```
 try {
        String text = "bonjour comment allez-vous faire";

        text=text.replace(" ", "%20"); 
        String oLanguage="fr";

        MediaPlayer player = new MediaPlayer();
        player.setAudioStreamType(AudioManager.STREAM_MUSIC);           
        player.setDataSource("http://translate.google.com/translate_tts?tl=" + oLanguage + "&q=" + text);

        player.prepare();
        player.start(); 

    } catch (Exception e) { 
        // TODO: handle exception
    } 
```

所以我的问题是

1.  如何让它检查字符串中的字符数并仅发送 100 个字符限制内的完整单词。

2.  如何检测第一组 TTS 何时完成，以便我可以发送第二组以避免两个语音相互重叠

3.  我是否需要在此过程中使用 Asynctask？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:09:45.120

**1.如何让它检查字符串中的字符数并仅发送 100 个字符限制内的完整单词。**

```
 ArrayList<String> arr = new ArrayList<String>();
    int counter = 0;
    String textToSpeach = "Your long text";
    if(textToSpeach.length()>100)
    {   
        for(int i =0 ; i<(textToSpeach.length()/100)+1;i++)
        {
        String temp = textToSpeach.substring(0+counter,99+counter);
        arr.add(temp.substring(0, temp.lastIndexOf(" ")));
        counter = counter + 100;
        }
    } 
```

**2.如何检测第一组 TTS 何时完成，以便我可以发送第二组以避免两个语音相互重叠**

```
 player.setOnCompletionListener(new OnCompletionListener() {

        @Override
        public void onCompletion(MediaPlayer mp) {

            // pass next block
        }
    }); 
```

**3.这个过程我需要使用Asynctask吗？**

现在我认为没有任何必要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T13:18:47.630

简单：这不是公共 API，不要使用它。使用 Andorid 的内置 TTS 引擎进行语音合成。它没有字符串长度限制。

# apache - htaccess 重定向规则失败

> ID：10189865
> 
> 赞同：0
> 
> 时间：2012-04-17T10:56:03.447
> 
> 标签：apache, .htaccess

```
RewriteEngine On

RedirectMatch http://api.fuckedapps.com//app_dl.php?app_id=([0-9])$ http://fuckedapps.com/app_dl.php?app_id=$1 
```

我正在尝试重定向任何这样的网址：

```
http://api.fuckedapps.com//app_dl.php?app_id=31 
```

对此：

```
http://fuckedapps.com/app_dl.php?app_id=$1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T11:56:19.627

你可以试试这个（抱歉，这里现在没有运行 Apache，所以无法在实时系统上测试它）：

```
# Activate Rewrite Engine
RewriteEngine On
RewriteBase /

# Actual rule
RewriteCond %{HTTP_HOST} =api.fuckedapps.com [NC]
RewriteCond ^/?app_dl\.php$ http://fuckedapps.com/app_dl.php [QSA,R=301,L] 
```

我不匹配查询字符串，因为它在两端是相同的，所以我只是使用`QSA`标志来复制它不变。

另外 - 考虑在测试期间使用 302 重定向而不是 301（现代浏览器会缓存 301 重定向，因此在更改规则时您可能会看到错误的行为，但浏览器似乎仍在使用旧重定向）并在您满意后改回 301结果。

我只是不确定`//`您的原始 URL - Apache/mod_rewrite 如何准确处理它。但它应该可以正常工作。

顺便说一句 - 这意味着放置在网站根文件夹中的 .htaccess 中。如果放置在其他地方，可能需要进行一些修改。

# iphone - 如何从 Facebook 获取生日列表

> ID：10189868
> 
> 赞同：0
> 
> 时间：2012-04-17T10:56:07.700
> 
> 标签：iphone, facebook

我正在开发一个应用程序，我想向朋友展示生日。这可能吗？如何从 Facebook 获取朋友的出生日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:15:33.813

您必须请求以下许可：-

在您的 .h 文件中定义宏，例如：-

```
#define kFBPermission @"@\"offline_access\", @\"publish_stream\",@\"friend_birthday\",@\"user_events\",@\"read_stream\",@\"friends_likes\"" 
```

现在在 .h 文件中 write.objDelegate 是 AppDelegate 类的对象。

```
if (![objDelegate.facebook isSessionValid])
    {
    [objDelegate.facebook authorize:App_ID permissions:[NSArray arrayWithObjects:@"offline_access",@"publish_stream",@"friends_birthday",@"user_events",@"read_stream",@"friends_likes", nil] delegate:self];
    } 
```

要在标签中显示生日，请使用：-

```
[lblDOB setText:[NSString stringWithFormat:[self.friendDictionary valueForKey:@"birthday"]]]; 
```

希望它有所帮助。谢谢:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:07:50.253

默认情况下，大多数对象属性都会在您进行查询时返回。您可以使用“fields”查询参数选择要返回的字段（或连接）。例如，这个 URL 只会返回 Ben 的 id、name 和图片：[https ://graph.facebook.com/bgolub?fields=id,name,picture](https://graph.facebook.com/bgolub?fields=id,name,picture)

您还可以使用“ids”查询参数在单个查询中请求多个对象。例如，URL [https://graph.facebook.com?ids=arjun,vernal](https://graph.facebook.com?ids=arjun,vernal)在同一响应中返回两个配置文件。

“ids”查询参数也接受 URL。这对于在 Open Graph 中查找 URL 的 ID 很有用。例如：[https ://graph.facebook.com/?ids=http://www.imdb.com/title/tt0117500/](https://graph.facebook.com/?ids=http://www.imdb.com/title/tt0117500/)

此外，还有一个特殊标识符 me，它指的是当前用户。因此 URL [https://graph.facebook.com/me](https://graph.facebook.com/me)返回活动用户的个人资料。

通过 /home、/feed 或 /posts 连接检索帖子时，您可以通过在 URL 参数中添加 with=location 来将结果限制为仅包含附加位置的结果： [https ://graph.facebook.com/me/家？有=位置](https://graph.facebook.com/me/home?with=location)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T11:11:35.673

要从 Facebook 帐户获取朋友的生日，请使用 Facebook 连接。

这是您必须触发如下查询才能获取朋友信息的代码。

```
 - (IBAction)getFriends {

        [self initFacebook];

        if ([facebook isSessionValid]) {

            [facebook requestWithGraphPath:@"me/friends?fields=id,name,gender,picture,birthday" andDelegate:self]; 

            } else {

            [self loginToFacebook];

            }
         } 
```

# powershell - 在 windows 命令行中配置命令和响应颜色。备择方案？

> ID：10189869
> 
> 赞同：1
> 
> 时间：2012-04-17T10:56:08.960
> 
> 标签：powershell, colors, cmd, console-application, console2

我在应用程序的命令行中进行了很多工作，并在 json 中发送大量信息作为响应。我发现有时很难找到响应的开始和结束位置以及该响应的命令在哪里 ![Console2 和 CMD 中的响应](../Images/798ba7f81215a4e8a164388c6ddbada0.png)

我尝试了 Console2、CMD、PowerShell，但没有找到任何配置命令和响应颜色的选项。你知道这样的应用程序吗？理想情况下，找到具有可配置语法颜色的应用程序会非常好（即为 JSON 设置颜色作为响应）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:16:49.887

是的，你可以在 powershell 中做到这一点，但不是那么容易。这取决于你实际在做什么。假设您只是使用 powershell 作为控制台来运行一些命令行工具，例如：

```
SendRequest "url" "param" "param" 
```

Powershell 只会打印返回的任何内容。您可以做的是编写一个小的 PowerShell 包装器，它将捕获此命令的输出并为其添加一些颜色，如下所示：

```
param($url, $param1, $param2)
$response = SendRequest $url $param1 $param2
Write-Host $response.Property1 -ForegroundColor Cyan
Write-Host $response.JSON -ForegroundColor Red 
```

这样你打电话：

```
.\execSendRequest.ps1 "url" "param" "param" 
```

它会以颜色显示您的响应。同样，您可以对每个属性进行更多处理，并以不同颜色打印出您的 JSON 响应。

# c# - C# 如果字符串包含

> ID：10189874
> 
> 赞同：1
> 
> 时间：2012-04-17T10:56:28.127
> 
> 标签：c#, contains

我在 C# 中工作，我有 2 个文本框。如果用户在第一个框中输入文本并按下按钮，则文本复制到文本框 2 中。我现在制作了另一个文本框，如果用户输入了它们，我希望它显示所有包含 @ 的字符串。
例如，
用户输入*“嗨@joey，我和@Kat 和@Max 在一起”*
按下按钮
*“嗨@joey，我和@Kat 和@Max 在一起”*出现在文本框2
和*@joey @Kat @Max*出现在文本框 3 中。

只是不确定我会如何做最后一部分。
任何帮助谢谢！..................................................... ............................. 好的，所以我决定去并尝试学习如何做到这一点，到目前为止我已经掌握了

```
string s = inputBx.Text;
             int i = s.IndexOf('@');

            string f = s.Substring(i);
            usernameBx.Text = (f); 
```

这可行，但是它会在带有@符号的单词之后打印所有单词。因此，如果我输入“嗨，@joey，你对@kat 做了什么”，它会打印出@joey 你对@kat 所做的事情，而不仅仅是@joey 和@kat。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T10:59:13.637

我会将字符串[拆分](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)为一个数组，然后使用[string.contains](http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx)获取包含 @ 符号的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T11:13:27.750

一个简单的正则表达式来查找以开头的单词就`@`足够了：

```
string myString = "Hi there @joey, i'm with @Kat and @Max";
MatchCollection myWords = Regex.Matches(myString, @"\B@\w+");
List<string> myNames = new List<string>();

foreach(Match match in myWords) {
    myNames.add(match.Value);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T10:59:09.407

```
var indexOfRequiredText = this.textBox.Text.IndexOf("@");

if(indexOfRequiredText > -1)
{
    // It contains the text you want
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T10:59:39.250

您可以使用正则表达式来查找您搜索的单词。

试试这个正则表达式

```
@\w+ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T11:03:41.453

也许不是最整洁的灵魂。但是这样的事情：

```
string str="Hi there @joey, i'm with @Kat and @Max";
var outout= string.Join(" ", str
               .Split(' ')
               .Where (s =>s.StartsWith("@"))
               .Select (s =>s.Replace(',',' ').Trim()
            )); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-17T11:05:00.400

正则表达式在这里可以很好地工作：

```
var names = Regex.Matches ( "Hi there @joey, i'm with @Kat and @Max", @"@\w+" );

foreach ( Match name in names )
    textBox3.Text += name.Value; 
```

# php - 如何进入 PHP 嵌套数组？

> ID：10189877
> 
> 赞同：0
> 
> 时间：2012-04-17T10:56:33.317
> 
> 标签：php, arrays, nested

我有一个嵌套数组，它的 print_r 看起来像这样-

```
Array
(
    [keyId] => Array
        (
            [hostname] => 192.168.1.127
            [results] => Array
                (
                    [1] => false
                    [2] => false
                    [3] => false
                )

            [sessionIDs] => Array
                (
                    [0] => ed9f79e4-2640-4089-ba0e-79bec15cb25b
                )

        ) 
```

我想处理（打印键和值）“结果”数组。我该怎么做呢？

我正在尝试使用 array_keys 函数首先获取所有键，如果键名是“结果”，则处理数组。但问题是 array_keys 没有进入“结果”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T11:00:18.703

php 的[foreach](http://in.php.net/manual/en/control-structures.foreach.php)循环就是您所需要的。

```
foreach($arr['keyId']['results'] as $key => $value) {
   //$key contains key and $value contains values.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T11:01:33.330

你想要的数组是`$array['keyID']['results']`. 从那里您可以使用`$array['keyID']['results'][1]`, `$array['keyID']['results'][2]`,访问值`$array['keyID']['results'][3]`

要遍历它，只需执行以下操作：

```
foreach($array['keyId']['results'] as $key => $value) {
   echo $key . ' ' . $value;
} 
```

或者

```
for ($i = 1; $i <= 3; i++)
{
    echo $i . ' ' . $array['keyID']['results'][i];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T10:58:30.070

```
foreach($array['keyId']['results'] as $k => $v) {
    // use $k and $v
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T10:59:17.310

浏览数组的一种方法是这样。

```
//Assuming, your main array is $array
foreach($array as $value) { //iterate over each item

   if(isset($value['results']) && count($value['results'])) { 
   // ^ check if results is present

       //Now that we know results exists, lets use foreach loop again to get the values
       foreach($value['result'] as $k => $v) {
           //The boolean values are now accessible with $v
       }
   }
} 
```

# iphone - facebook API 名称中缺少感叹号

> ID：10189878
> 
> 赞同：7
> 
> 时间：2012-04-17T10:56:33.983
> 
> 标签：iphone, objective-c, ios, facebook, ipad

我的 facebook api 名称包含感叹号 ( `!`)。每当我通过 API 在 facebook 上分享内容时，帖子都会包含 API 名称，但会删除感叹号。有谁知道如何显示`!`.

**编辑 1：**请参阅下图以更好地了解我的问题。 ![在此处输入图像描述](../Images/9ef42cc705a369bbd4c24202ac00cd5e.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T04:53:24.587

Facebook.com 上 News Feed 或 Timeline 上的“via”链接文本不会被您的 IOS 应用程序代码或 ShareKit 配置中的任何内容填充；它来自应用程序的基本设置页面，当以应用程序管理员身份登录时，可在[https://developers.facebook.com/apps访问](https://developers.facebook.com/apps)

例如，这是我的测试应用程序设置：

![应用设置页面](../Images/600715edd81e7513e4d5ad8fca49613b.png)

以及帖子的显示方式：

![示例帖子](../Images/188f3d973da163c64de6e4126aaaf727.png)

如果我更改应用名称：

![更改后的应用设置页面](../Images/7ffc00abb8f0f528dc71e2dc38b86e72.png)

它与 !

![更改后的示例帖子](../Images/7870b192cdb7ae0426b6cf15c9052381.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T20:13:38.073

我试过用“!” 和“!” （没有空格和引号）并且它正在工作，你可以再试一次吗？

**编辑**

* * *

我认为问题出在方法上：`- (BOOL)send`来自 class `SHKFacebook.m`。确保 SHKMyAppName 或您的 SHKItem 信息使用 SHKEncode 而不是 SHKEncodeURL 编码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T11:24:29.160

您是否尝试过在解释标记之前使用“\”，即：

```
APIKEY = "348geIb\!rgreg" 
```

# php - 用 imagemagick 创建图片太慢了。怎么提高？

> ID：10189881
> 
> 赞同：4
> 
> 时间：2012-04-17T10:56:42.860
> 
> 标签：php, imagemagick

我正在编写一个小 CMS，您可以在其中上传几张图片。这些图像使用 imagemagick转换为*3 个版本（大、中和缩略图大小） 。*

问题是 imagemagick 需要 5 分钟来创建这 3 个版本的 4 张图片（已上传）。

这是带有 imagemagick 命令的部分：

```
foreach($upIMGS as $key => $filename){
    list($width, $height) = getimagesize($path.$filename);
    if ($width > $height) $size = "x96";
    else $size = "96x";

    exec(P_IMAGEMAGICK." ".$path.$filename." -resize $size -gravity center -crop 96x96+0+0 +repage ".$path."th-".$filename);
    exec(P_IMAGEMAGICK." ".$path.$filename." -resize 320x320 ".$path."hl-".$filename);
    exec(P_IMAGEMAGICK." ".$path.$filename." -resize 514x ".$path."fl-".$filename);

    unlink($path.$filename);
} 
```

[$upIMGS 是一个包含最近上传图像的所有文件名的数组]

我的意思是..它确实有效，但是太慢了，5分钟后服务器给了我一个错误。有些文件是生成的，有些不是...

如果你能给我一个小费，那就太好了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T13:28:18.187

我最近遇到了同样的问题，但我只通过图像一次将它们从原来的 2592x1944 调整为 300xbestFit 或 bestFitx300

我使用的是 PHP 类 imagick 而不是命令行，但在我的情况下，我通过更改为 -scale 或 scaleImage 将我的时间缩短了一半。这是我的测试代码片段。

```
while ($images = readdir($handle)) {
    // check to see if the first or second character is a '.' or '..', 
    // if so then remove from list
    if (substr($images,0,1) != '.') {
        //Check files to see if there extensions match any of the following image extensions. 
        // GLOB_BRACE looks for all glob criteria within the {braces}
        $images = glob($dir."{*.gif,*.jpg,*.png,*.jpeg}", GLOB_BRACE);
        // the glob function gives us an array of images
        $i = 0;
        foreach ($images as $image) {
            // parse the data given and remove the images/ $dir, 
            // imagemagick will not take paths, only image names.
            $i++;
            list ($dir, $image) = split('[/]', $image);
            echo $i, " ", $image, "<br />";

            $magick = new Imagick($dir."/".$image);
            $imageprops = $magick->getImageGeometry();

            if ($imageprops['width'] <= 300 && $imageprops['height'] <= 300) {
                // don't upscale
            } else {

                // 29 Images at 2592x1944 takes 11.555036068 seconds -> 
                // output size = 300 x 255
                $magick->scaleImage(300,300, true);

                // 29 Images at 2592x1944 takes 23.3927891254 seconds -> 
                // output size = 300 x 255
                //$magick->resizeImage(300,300, imagick::FILTER_LANCZOS, 0.9, true);
                $magick->writeImage("thumb_".$image);

            }
        }
    }
} 
```

我正在以 2592x1944 处理 29 张图像，从 23.3927891254 秒到 11.555036068 秒。我希望这有帮助。

**编辑：**

除了我上面所说的之外，我刚刚在[ImageMagick v6 示例——API 和脚本](http://www.imagemagick.org/Usage/api/#speed)中遇到了以下内容，这可能会有所帮助：

*   “Shell 脚本本来就很慢。它被解释，需要多个步骤和额外的文件处理到磁盘。这当然更好，这要归功于新的 IM v6 选项处理，允许您在单个命令中执行大量图像处理操作. 即使这样你也很少能在一个`convert`命令中完成所有事情，所以你经常不得不使用多个命令来实现你想要的。”

*   “当读取大量甚至大量图像时，最好使用[读取修改](http://www.imagemagick.org/Usage/files/#read_mods)器来调整大小或裁剪它们，因为 IM 不会将它们读取完整图像，从而减少其内存需求。”

*   “如果您将 ImageMagick 称为 Apache 模块，它还将减少启动时间，因为部件将被加载一次并保持可供多次使用，而不是需要一遍又一遍地重新加载。这在未来可能会变得更加实用，永久运行“守护进程”IM 进程。”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T07:57:01.177

此示例可能会有所帮助，因为它将主图像加载到内存中并对其进行处理以制作其他图像：

```
$cmd = " input.jpg \( -clone 0 -thumbnail x480 -write 480_wide.jpg +delete \)". 
" \( -clone 0 -thumbnail x250 -write 250_wide.jpg +delete \) ". 
" \( -clone 0 -thumbnail x100 -write 100_wide.jpg +delete \) -thumbnail 64x64! null: ";
exec("convert $cmd 64_square.jpg "); 
```

这是创建 4 个不同大小的图像。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T11:03:03.063

等什么？从上传的三张图片生成 12 张图片不应该需要五分钟。

我没有看到您的其余代码，但是为什么您的 getimagesize 路径是 $path.$filename 而您的 unlink P_UPLOADS.$value 是？它们不同是有原因的吗？无论如何 $value 来自哪里，它没有在你的 foreach() 循环中定义。也许您只是有一个导致脚本挂起的错误。我用过 ImageMagick（虽然不是用 exec()，而是用实际的类），而且速度非常快。

您是否在 foreach 循环（）上运行了诊断程序？就像打印出执行每个 exec() 命令所需的毫秒数一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T11:03:47.967

一个小技巧是首先创建最大的图片，然后从这张图片创建后续图片，而不是原始图片。

然而，无论如何，5 分钟对于 12 张图像来说似乎太多了。
你必须做一些调查。

*   如果源相对较小（比如 1024x768），调整大小是否需要相当长的时间？
*   直接从外壳调用是否需要相同的时间？

如果延迟是不可避免的，您可能希望将调整大小工具移至专用服务器，将它们放入队列并使用简单的 AJAX 片段检查进程。

# scheme - 这个定义是如何工作的？

> ID：10189883
> 
> 赞同：2
> 
> 时间：2012-04-17T10:56:50.520
> 
> 标签：scheme

我有这段方案代码：

```
(define (x . y) y)
(x 1 2 3) 
```

我知道它相当于：

```
'(1 2 3) 
```

但我不明白为什么。

第一行代码是做什么的？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T11:20:59.270

根据[5.2 定义](http://www.schemers.org/Documents/Standards/R5RS/HTML/r5rs-Z-H-8.html#%_sec_5.2)（最后一个子句） ，第一行`(define (x . y) y)`等价于。`(define x (lambda y y))`

并且`(lambda y y)`是一个程序；调用时，所有参数将存储在新分配的列表中。eg`list`可以定义为`(define list (lambda xs xs))`. （见[4.1.4 程序](http://www.schemers.org/Documents/Standards/R5RS/HTML/r5rs-Z-H-7.html#%_sec_4.1.4)形式参数的第二种形式。）

所以`(x 1 2 3)`等价于`(list 1 2 3)`。

# uitableview - UITableViewCell 重新加载时无法按下 UIButton

> ID：10189884
> 
> 赞同：1
> 
> 时间：2012-04-17T10:56:51.560
> 
> 标签：uitableview, uiprogressview

我有一个包含下载和下载对象的表格视图，其中下载单元是自定义的，带有 2 个标签、1 个 UIProgressView 和 1 个 UIButton。

我的 NSURLConnection 委托将在对象下载时不断更新进度。但是，在重新加载单元格的过程中，单元格中的 UIButton 很难被按下，我必须非常快速地按下它，这样它才能得到响应。我发现的问题是代理刷新单元格太频繁（大约 0.002 秒），所以我将频率设置为 0.1 秒后每次刷新，但 UIButton 仍然很难按下，我无法设置间隔太长，因为这会使 UIProgressview 的更新不连续。

这是我的代表代码：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data 
{
 if(startTime == nil) startTime = [NSDate date];
    NSDate *currentTime = [NSDate date];
    NSTimeInterval timeInterval = [currentTime timeIntervalSinceDate:startTime];

    bytesReceived = [receivedData length];

    if (timeInterval >=0.1) {
        startTime = currentTime;

        double percent = bytesReceived/expectedBytes;
        WVSecondViewController *downloadsController = [[WVSecondViewController alloc] initWithNibName:nil bundle:nil];
        int index = [downloadsController.name0 indexOfObject:resourceName];
        [downloadsController.progress0 replaceObjectAtIndex:index withObject:[NSNumber numberWithFloat:percent]];

        NSIndexPath *indexP = [NSIndexPath indexPathForRow:index inSection:0];
        [downloadsController.downloadsTableview reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexP] withRowAnimation:UITableViewRowAnimationNone]; 
    }
  } 
```

downloadsController.progress0 是用于更新进度视图的 tableview 的数据源。

如果我删除最后一行代码

```
[downloadsController.downloadsTableview reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexP] withRowAnimation:UITableViewRowAnimationNone]; 
```

然后 UIButton 可以正常按下。

知道如何解决这个问题吗？非常感谢您的每一次帮助。

# ios - 为什么旧值出现在 tableViewCell

> ID：10189885
> 
> 赞同：0
> 
> 时间：2012-04-17T10:57:03.767
> 
> 标签：ios, uitableview

我在制作 TableViewCell 时添加了一个 UILabel。像这样的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    Special *special = [speciales objectAtIndex:indexPath.row];
    ......
    UILabel *description = [[UILabel alloc] initWithFrame:CGRectMake(80, 21, 220, 50)];
    description.text = special.specialDescription;
    description.font = [UIFont fontWithName:@"Heiti SC" size:12];
    description.textColor = [UIColor darkGrayColor];
    description.lineBreakMode = UILineBreakModeWordWrap;
    description.numberOfLines = 3;

    [cell addSubview:description];

    return cell;
} 
```

它工作得很好，但是当我从下到上滚动它时，当我选择一行时，旧值同时出现。谁能帮我解决这个问题？

谢谢！

更新：我所有的代码都是这样的： - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

```
Special *special = [speciales objectAtIndex:indexPath.row];

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

UIImageView *img = [[UIImageView alloc] initWithFrame:CGRectMake(10, 5, 60, 60)];
img.image = special.specialIconImage;

[self addShadowToImage:img];

[cell addSubview:img];

UILabel *name = [[UILabel alloc] initWithFrame:CGRectMake(80, 5, 220, 16)];
name.text = special.specialName;

name.font = [UIFont fontWithName:@"Heiti SC" size:16];

[cell addSubview:name];

UILabel *description = [[UILabel alloc] initWithFrame:CGRectMake(80, 21, 220, 50)];
description.text = special.specialDescription;
description.font = [UIFont fontWithName:@"Heiti SC" size:12];
description.textColor = [UIColor darkGrayColor];
description.lineBreakMode = UILineBreakModeWordWrap;
description.numberOfLines = 3;

[cell addSubview:description];

return cell; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:27:18.217

问题是每次调用单元格时您都在添加 Image 和 Label 子视图。相反，您只想在创建单元格时添加这些子视图。每次调用单元格时，您只想设置子视图的值。你会想要这样的东西（完成记忆）：

```
Special *special = [speciales objectAtIndex:indexPath.row];

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 5, 60, 60)];
    [imageView setTag:100];
    [cell addSubview:imageView];

    UILabel *nameLabel = [[UILabel alloc] initWithFrame:CGRectMake(80, 5, 220, 16)];
    name.font = [UIFont fontWithName:@"Heiti SC" size:16];
    [nameLabel setTag:101];
    [cell addSubview:nameLabel];

    UILabel *descriptionLabel = [[UILabel alloc] initWithFrame:CGRectMake(80, 21, 220, 50)];
    [descriptionLabel setTag:102];
    descriptionLabel.font = [UIFont fontWithName:@"Heiti SC" size:12];
    descriptionLabel.textColor = [UIColor darkGrayColor];
    descriptionLabel.lineBreakMode = UILineBreakModeWordWrap;
    descriptionLabel.numberOfLines = 3;
    [cell addSubview:descriptionLabel];
}

UIImageView *img = (UIImageView *)[cell viewWithTag:100];
img.image = special.specialIconImage;
[self addShadowToImage:img];

UILabel *name = (UILabel *)[cell viewWithTag:101];
name.text = special.specialName;

UILabel *description = (UILabel *)[cell viewWithTag:102];
description.text = special.specialDescription;

return cell; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:01:38.137

[tableView 重载数据]; 尝试这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T11:09:35.027

代码中的......是什么意思？

你在那里使用 dequeueReusableCellWithIdentifier 吗？

如果那部分代码包含如下代码，那么它应该可以正常工作-

```
UITableViewCell * cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
if(cell == nil)
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T11:22:33.513

虽然我认为您应该将单元格出列以重用它们，但这似乎不是您问题的根源 - 除非您正在重用单元格并且没有向我们展示。那里可能有指向问题的代码。

我认为这个问题可能与重绘有关。尝试将其放在`tableView:cellForRowAtIndex:`方法的末尾

```
[cell setNeedsDisplay]; 
```

这将强制 UI 重绘单元格。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-18T05:47:19.737

以下是一些需要注意的事项：

```
 • The new views must be added when we instantiate a new cell, but not when we
    reuse a cell (because a reused cell already has them).

  • We must never send addSubview: to the cell itself — only to its contentView (or
    some subview thereof).

  • We should assign the new views an appropriate autoresizingMask, because the
    cell’s content view might be resized.

  • Each new view should be assigned a tag so that it can be referred to elsewhere. 
```

这是代码：

```
//thanks to Thomas Hajcak's code
Special *special = [speciales objectAtIndex:indexPath.row];

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 5, 60, 60)];
[imageView setTag:100];

//autoresizingMask as follow
imageView.autoresizingMask = (UIViewAutoresizingFlexibleHeight |
                           UIViewAutoresizingFlexibleLeftMargin);
[cell.contentView addSubview:imageView];

UILabel *nameLabel = [[UILabel alloc] initWithFrame:CGRectMake(80, 5, 220, 16)];
name.font = [UIFont fontWithName:@"Heiti SC" size:16];
[nameLabel setTag:101];

[cell.contentView addSubview:nameLabel];

UILabel *descriptionLabel = [[UILabel alloc] initWithFrame:CGRectMake(80, 21, 220, 50)];
[descriptionLabel setTag:102];
descriptionLabel.font = [UIFont fontWithName:@"Heiti SC" size:12];
descriptionLabel.textColor = [UIColor darkGrayColor];
descriptionLabel.lineBreakMode = UILineBreakModeWordWrap;
descriptionLabel.numberOfLines = 3;
[cell.contentView addSubview:descriptionLabel];
}

UIImageView *img = (UIImageView *)[cell.contentView viewWithTag:100];
img.image = special.specialIconImage;
[self addShadowToImage:img];

UILabel *name = (UILabel *)[cell.contentView viewWithTag:101];
name.text = special.specialName;

UILabel *description = (UILabel *)[cell.contentView viewWithTag:102];
description.text = special.specialDescription;

return cell; 
```

# android - 如何使用 SOAP 将数据发布到服务器

> ID：10189886
> 
> 赞同：1
> 
> 时间：2012-04-17T10:57:05.367
> 
> 标签：android, soap, ksoap2, android-ksoap2, ksoap

这是我想要发布的 XML 格式：

```
`<soap:Body>
<UploadImagesAndNotes xmlns="http://www.datadog.co.nz/
<UserId>string</UserId>
<Password>string</Password>
<MobileNumber>string</MobileNumber>
<Note>string</Note>
<JobNumber>int</JobNumber>
<GPSLatitude>decimal</GPSLatitude>
<GPSLongitude>decimal</GPSLongitude>
<Images>
<Image>
<ImageData>base64Binary</ImageData>
<ImageLatitude>decimal</ImageLatitude>
<ImageLongitude>decimal</ImageLongitude>
</Image>
<Image>
<ImageData>base64Binary</ImageData>
<ImageLatitude>decimal</ImageLatitude>
<ImageLongitude>decimal</ImageLongitude>
</Image>
</Images>
<Fowards>
<EmailAddress>string</EmailAddress>
<EmailAddress>string</EmailAddress>
</Fowards>
</UploadImagesAndNotes>
</soap:Body>
</soap:Envelope>` 
```

我知道如何使用这个将它发送到服务器： -

```
`SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); //set up request
request.addProperty("GPSLatitude", lat);
request.addProperty("GPSLongitude", long);` 
```

但我遇到了问题

```
`<Images>
<Image>` 
```

如何设置这些节点值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T13:19:18.343

我在这里找到了解决方案 [http://code.google.com/p/ksoap2-android/wiki/CodingTipsAndTricks#sending/receiving_array_of_complex_types_or_primitives](http://code.google.com/p/ksoap2-android/wiki/CodingTipsAndTricks#sending/receiving_array_of_complex_types_or_primitives)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:14:36.793

```
<image name="image1"> 
```

并将其`<image name="image2">` 添加到您的图像中以区分黑白两个。

# axapta - 如何从表单控件中获取值

> ID：10189887
> 
> 赞同：2
> 
> 时间：2012-04-17T10:57:05.923
> 
> 标签：axapta, x++

我的情况很简单。请指导我。(x++/AX) 我有一个表单，其中包括一个 IntEdit 控件。用户可以在此控件中输入整数值。

同时，我有另一个类，它有一个方法。该方法需要从 IntEdit 控件中获取整数值。

我的问题是：如何在此类中获取该表单的整数值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:24:23.160

这种情况通常需要类和表单之间的某种类型的关系。

该类可以是一个`RunBase`类，并且该字段可以是在`dialog`方法中实例化的形式。查看`Tutorial_RunbaseForm`类和表单的实现以涵盖这种情况。

请注意，在大多数情况下不需要创建表单，`dialog`在类中搜索方法名称以其他方式提示输入。

# sql - 是否可以在主键不等于 column4 的表上写入约束

> ID：10189888
> 
> 赞同：2
> 
> 时间：2012-04-17T10:57:08.610
> 
> 标签：sql, sql-server, tsql

我有一个 tbl_User 表如下表1

```
Id       Name        ReportingId
==
1        Stala       Null
2        Coma        1
3        Rita        1
4        Rosy        2 
```

我必须限制：

```
Id       Name        ReportingId
==
1        Stala       1
2        Coma        2
3        Rita        3
4        Rosy        4 
```

我必须限制**案例 2**：

```
Id       Name        ReportingId
==
1        Stala       1
2        Coma        5
3        Rita        3
4        Rosy        8 
```

这可以通过对表进行约束来实现吗？

或者

如果有其他不应该妨碍表性能的简单方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T11:08:59.283

在创建表后添加检查约束以防止这些值：

```
alter table Table1 add CONSTRAINT ck_reportingId check(ReportingId <> Id) 
```

# sql - Rails - 当用户来到我的页面时，如何仅第一次运行方法

> ID：10189889
> 
> 赞同：2
> 
> 时间：2012-04-17T10:57:11.917
> 
> 标签：sql, ruby-on-rails, ruby, statistics, applicationcontroller

我在数据库中有很多数据，我想从中进行统计。大量数据 = 表中的数千行，我想获得每日、每周、每月（每个月）的统计数据......只是详细的统计数据。

问题是，获取这些数据需要时间（而且不少）。

所以，我认为最快、最清晰、最有效的方法是什么……

**我的第一个想法**- 当用户来到我的应用程序时，在`ApplicationController`我将从数据库统计信息中获取的方法中，将我得到的对象保存到会话的变量中，然后我将使用这些变量作为源。然后，当我需要在应用程序的某个地方打印出统计数据时，我只使用这个加载的数据。

问题是：这是个好主意吗？或者，还有更好的方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T11:19:12.437

而不是将数据库统计信息存储在会话变量中。您可以存储在 memcached

Rails 具有出色的内置缓存支持

[http://memcached.org/](http://memcached.org/)

[https://github.com/mperham/dalli](https://github.com/mperham/dalli)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:21:39.003

另一种方法。您可以通过这种方式在每个用户的基础上缓存部分页面：

```
- cache [@user, :stat] do # or [@user, :stat, :daily] 
  statistic for the user @user 
```

如果某些用户的关联记录影响他的统计，则使用：

```
# SomeModel.rb
belongs_to :user, touch: true 
```

这样`updated_at`，当相关模型的对象发生更改时，您的用户将被更新，并且用户的缓存将被自动视为已过期，并且`- cache ... do`将执行内部块。确保在此块之外没有（或最少）数据库命中发生（例如：不要在控制器中使用 Model1.where(conditions) .all **——**这样你就不会发出 db 请求，只是构造它们）。

要在开发模式下启用缓存，请转到您的`config/environments/development.rb`并更改`true`参数`config.action_controller.perform_caching`并重新启动您的应用程序。

# javascript - 未捕获的类型错误：无法调用未定义的方法“addEventListener”

> ID：10189890
> 
> 赞同：5
> 
> 时间：2012-04-17T10:57:14.063
> 
> 标签：javascript, dom

无法弄清楚这段代码中的错误在哪里。Chrome 调试控制台在第 31 行一直说“未捕获的类型错误：无法调用未定义的方法 'addEventListener'”！

```
jewel.dom = (function() {

    var $ = Sizzle;

    function hasClass(el, clsName){

        var regex = new RegExp("(^|\\s) + clsName + (\\s|$)");
        return regex.test(el.className);
    }

    function addClass(el, clsName) {

        if (!hasClass(el,clsName)) {
            el.className += ""+ clsName;
        }
    }

    function removeClass (el, clsName) {

        var regex = new RegExp("(^|\\s)" + clsName + "(\\s|$)");
        el.className = el.className.replace(regex, " ");
    }

    function bind(element, event, handler) {

        if (typeof element == "string") {
            element = $(element)[0];
        }

        element.addEventListener(event, handler, false)
}

    return {
        $:$,
        hasClass : hasClass,
        addClass : addClass,
        removeClass : removeClass,
        bind : bind
    };
;}) (); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:37:25.413

就我而言，这是由 Evernote Clipper 扩展脚本引起的。当您单击抛出错误的脚本时，您会在评论中找到“Evernote”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:02:27.073

可能是您的`bind`调用以 结尾`undefined` `element`吗？（例如，您传递的选择器与 DOM 中的任何元素都不匹配）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T11:02:58.647

有些浏览器不知道“addEventListener”是什么。尝试这个：

```
Element.prototype.setEvent = function(eventName, handler)
{
    if(document.addEventListener)
    {
        this.addEventListener(eventName, handler);
    }
    else
    {
        if(document.attachEvent)
        {
            this.attachEvent("on" + eventName, handler);
        }
    }
}
element.setEvent(eventName, handler); 
```

removeEventListener 也是如此。

另外，尝试更换

```
 element = $(element)[0]; 
```

和

```
 element = $("#" + element); 
```

前提是该字符串包含元素的 id，或者

```
 element = $("." + element)[0]; 
```

如果字符串包含元素的类名。

# mysql - SQL - 如何重新排序使用限制约束的选择查询

> ID：10189893
> 
> 赞同：1
> 
> 时间：2012-04-17T10:57:23.953
> 
> 标签：mysql, sql

我有以下正常工作的 sql 语句。

```
SELECT * FROM table WHERE name IS NULL ORDER BY date DESC LIMIT 20; 
```

该查询基本上按日期 desc 对表进行排序，并选择字段“名称”为空的最后 20 条记录。问题是检索到的查询是按日期降序排序的。这当然是逻辑......但我想要的是，“输出”是按日期 asc 排序的。预先感谢您的回复。干杯。马克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:59:49.867

试试这个：

```
SELECT * FROM (
    <your query>
)
ORDER BY date 
```

注意：某些 SQL 方言需要命名子查询，即使该名称并未真正使用，例如：

```
SELECT * FROM (
    <your query>
) T
ORDER BY date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:00:43.330

在另一个查询中使用您的查询并订购外部查询，这将再次应用订单。

# django - django-postman 丢弃 RequestContext

> ID：10189899
> 
> 赞同：0
> 
> 时间：2012-04-17T10:57:41.817
> 
> 标签：django, django-context, requestcontext

我将 django-postman 安装到我的项目中。之后，我看到当我登录时，它会登录到用户主页，但是每当我点击链接时，会话就会消失。它要我重新登录。

我在每个视图中都使用 context_instance=RequestContext(request) 。那么可能是什么问题呢？

当我插入以下内容时发生了这种情况：

```
TEMPLATE_CONTEXT_PROCESSORS = (
    'django.core.context_processors.static',
    'django.core.context_processors.request',
) 
```

没有静态的，它事件不会识别 STATIC_URL 并丢弃 CSS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T15:00:29.290

好的，我发现了问题。默认 django 配置没有在 settings.py 文件中写入 TEMPLATE_CONTEXT_PROCESSORS。当我写这个时：

```
TEMPLATE_CONTEXT_PROCESSORS = (
'django.core.context_processors.static',
'django.core.context_processors.request',
) 
```

我覆盖了默认的 TEMPLATE_CONTEXT_PROCESSORS 这是不可见的：

```
TEMPLATE_CONTEXT_PROCESSORS = ("django.contrib.auth.context_processors.auth",
"django.core.context_processors.debug",
"django.core.context_processors.i18n",
"django.core.context_processors.media",
"django.core.context_processors.static",
"django.contrib.messages.context_processors.messages",) 
```

所以我应该在这个元组的末尾添加请求。

# liferay - HTML 声明在 Liferay 中不起作用

> ID：10189901
> 
> 赞同：1
> 
> 时间：2012-04-17T10:57:57.223
> 
> 标签：liferay

我将 Liferay 6 与 Struts2 一起使用。我在 Liferay 中有这个 Struts2 Tags JSP。

```
<HTML>
    <HEAD>
        <TITLE>Login using Ravi</TITLE>
    </HEAD>
        <body bgcolor="#E6E6FA">
          <s:form action="helloForm" method="POST" theme="simple">
          <table>
                    <tr>
    <td>Enter Your Name:<s:textfield name="namer" value="%{name}" required="true"/></tr>td>
      </tr>
       <tr>
                     <td>Enter Your Password:<s:textfield name="passer" value="%{passer}" /></tr>td> 
                    </tr>
                </table>
    <s:submit/>
     <s:submit/>
      <s:submit/>
   </s:form>
    </BODY>
</HTML> 
```

此页面正在显示，但问题是，正文颜色根本没有改变。而且当我尝试设置身体高度宽度时，它们都没有被反映。

还是只有使用主题才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T19:17:55.903

Liferay 删除了 html-、header- 和 body-tag。切割后保留所有内部标签：

```
<s:form action="helloForm" method="POST" theme="simple">
          <table>
                    <tr>
    <td>Enter Your Name:<s:textfield name="namer" value="%{name}" required="true"/></tr>td>
      </tr>
       <tr>
                     <td>Enter Your Password:<s:textfield name="passer" value="%{passer}" /></tr>td> 
                    </tr>
                </table>
    <s:submit/>
     <s:submit/>
      <s:submit/>
   </s:form> 
```

但是您可以使用特定于 portlet 的 css 从 portlet 修改外观。在 liferay-portlet.xml 中设置`<css-class-wrapper>your-portlet-name-or-some-thing-uniq</css-class-wrapper>`

并添加 /MyPortlet/docroot/css/main.css

```
.your-portlet-name-or-some-thing-uniq {
  background-color: #E6E6FA;
} 
```

# javascript - 在 DOM 集合上使用 `querySelectorAll` 的子选择器

> ID：10189903
> 
> 赞同：25
> 
> 时间：2012-04-17T10:58:00.547
> 
> 标签：javascript, html, css, dom, selectors-api

假设您有一个包含嵌套子列表的列表。

```
<ul>
    <li></li>
    <li>
        <ul>
            <li></li>
            <li></li>
        </ul>
    </li>
    <li></li>
</ul> 
```

并用于`document.querySelectorAll()`进行选择：

```
var ul = document.querySelectorAll("ul"); 
```

我如何使用`ul`集合来获取直接子元素？

```
ul.querySelectorAll("> li"); 
// Gives 'Error: An invalid or illegal string was specified' 
```

让我们假设`ul`以某种方式缓存（否则我可以`ul > li`直接完成）。

在 jQuery 中这有效：

```
$("ul").find("> li"); 
```

但它不是 native `querySelectorAll`。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2014-02-26T00:45:05.720

将选择器“植根”到当前元素的正确方法是使用[`:scope`](https://developer.mozilla.org/en-US/docs/Web/CSS/:scope).

```
ul.querySelectorAll(":scope > li"); 
```

请在此处查看我的答案以获得解释和强大的跨浏览器解决方案：[https ://stackoverflow.com/a/21126966/1170723](https://stackoverflow.com/a/21126966/1170723)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-17T10:59:51.993

因为`ul`返回的是一个 NodeList，它不会像 jQuery 集合那样隐式循环其内容。您需要使用`ul[0].querySelectorAll()`或更好地选择`ul`with `querySelector()`。

除此之外，`querySelectorAll()`不会`>`从其当前上下文中获取和工作。但是，您可以使用[lazd 的答案](https://stackoverflow.com/a/22029375/31671)（尽管检查浏览器兼容性）或任何这些解决方法（应该没有浏览器问题）让它工作......

```
[].filter.call(ul.querySelectorAll("li"), function(element){
     return element.parentNode == ul;
}); 
```

[js小提琴](http://jsfiddle.net/wLpCy/)。

这将选择所有`li`属于你的后代的元素，`ul`然后删除那些不是直接后代的元素。

或者，您可以获取所有内容`childNodes`，然后过滤它们...

```
[].filter.call(ul.childNodes, function(node) {
    return node.nodeType == 1 && node.tagName.toLowerCase() == 'li';
}); 
```

[js小提琴](http://jsfiddle.net/kH53j/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T11:00:50.693

您需要遍历`NodeList`返回的 by `document.querySelectorAll()`，然后调用`element.querySelectorAll()`该列表中的每个元素。

# asp.net - 表单 css 反映到 ajax 日历 css

> ID：10189905
> 
> 赞同：2
> 
> 时间：2012-04-17T10:58:06.597
> 
> 标签：asp.net, css, ajax

我正在使用 MS AJAX ASP.NET 组件（日历扩展器），我使用了一些 css 属性来反映表单 div，它反映到日历 div，如何为日历扩展器应用默认 css，并且我无法删除表单的 css 样式。
CSS代码是

```
#form div{min-width:100px; float:left;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:03:03.277

试试这个：

1）向页面添加另一个文本框，在您的日历扩展器所在的更新面板之外

2）添加日历扩展器并指向文本框

3) 在文本框上设置 'style="display:none;" 所以它不会出现在页面上。

# ms-access - 在 JBoss 中连接到 MS-Access

> ID：10189907
> 
> 赞同：0
> 
> 时间：2012-04-17T10:58:17.013
> 
> 标签：ms-access, jboss, connection

我正在 JBoss-As 7 下开发一个应用程序。在应用程序中，我需要生成一个包含一些数据的 MS-Access 文件。为此，我使用了一个已经创建的 MS-Access 文件并使用 Jdbc-Odbc Brdige 连接和插入数据。问题是我无法在应用程序服务器环境中连接。它抛出 NoClassDefFoundError: sun/jdbc/odbc/JdbcOdbcDriver。（Windows 7 下的 JBoss）。有人可以将我的应用程序移动到 linux 并连接到 Linux 中的 MS-Access 文件吗？

最好的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:40:38.513

对于我的问题，jackcess 工作得很好。请阅读并使用它（jackcess.sourceforge.net）。

# maven - maven datanucleus ASM 问题

> ID：10189913
> 
> 赞同：1
> 
> 时间：2012-04-17T10:58:47.340
> 
> 标签：maven, maven-plugin, datanucleus

构建基于 maven datanucleus 的项目时出现以下错误。我已将 maven-datanucleus-plugin 放在插件下，并正确定义了包含持久类的路径。有人可以帮助解决这个问题吗？

```
Exception in thread "Thread-1" You have selected to use ClassEnhancer "ASM" yet
the JAR for that enhancer does not seem to be in the CLASSPATH!
org.datanucleus.enhancer.NucleusEnhanceException: You have selected to use Class
Enhancer "ASM" yet the JAR for that enhancer does not seem to be in the CLASSPAT
H!
        at org.datanucleus.enhancer.DataNucleusEnhancer.init(DataNucleusEnhancer
.java:212)
        at org.datanucleus.enhancer.DataNucleusEnhancer.addClasses(DataNucleusEn
hancer.java:370)
        at org.datanucleus.enhancer.EnhancerProcessor$EnhanceRunnable.run(Enhanc
erProcessor.java:163)
        at java.lang.Thread.run(Thread.java:662) 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:24:55.650

因此，根据文档，您想使用增强器并且不要将*asm.jar*放在 CLASSPATH 中。再清楚不过了。

# javascript - live('click' 不工作，但 .click( 在 IE 8 中工作

> ID：10189915
> 
> 赞同：0
> 
> 时间：2012-04-17T10:59:02.067
> 
> 标签：javascript, jquery, ajax

我正在使用`jquery version 1.3.2`。我面临一个奇怪的问题。在 IE9 中我的应用程序工作正常，但在 IE8 中此功能不起作用

```
jQuery('.mutulafriends').live('click',function(){}); 
```

我只是在这个函数里面放了一个警报但没有工作，似乎它没有识别`click`。在控制台中我可以看到一个错误

```
SCRIPT87: Invalid argument. 
jquery-1.3.2.min.js, line 12 character 12949 
```

当我将此功能与警报一起使用时

```
jQuery('.mutulafriends').click(function(){
    alert("");
}); 
```

完美运行。但也显示错误：

```
SCRIPT87: Invalid argument. 
jquery-1.3.2.min.js, line 12 character 12949 
```

似乎错误不影响`click`. 我知道对于 jquery 版本 1.3.2`live('change'`不起作用，但为什么`live('clck'`不起作用？任何想法，请帮忙。提前致谢。这是我的 HTML。它可能太长了，但我认为它可能会有所帮助。

```
 <div class="component-list-wrapper">

        <?php if(is_array($result) && count(array_filter($result)) > 0) {
            foreach($result as $record) {
                ?>

            <div class="eliment-component-list eliment-divider">
                <div class="user-profile-img-holder">
                    <img alt="Profile image"
                        src=<?php if(isset($record['ProfileImg'])){echo $img_url.md5($record['ProfileID'])."/default/".$record['ProfileImg'];}else{echo $this->config->item('ivory_img_path')."/thumb-img.png";} ?> />
                </div>
                <div class="user-des-container">
                    <div class="user-des-left">
                        <div class="namecontainer">
                            <label class="darkcolour-large"><?php echo $record['FirstName']; if($record['PrivacySettingFriend']){echo " ".$record['LastName'];} ?></label> <label
                                class="lblsub"><?php echo $record['StateName'].', '.$record['CityName']; ?></label>
                        </div>
                        <div class="friendcontainer">
                            <label img_url="<?php echo $img_url; ?>" req_type="recieved" friend_id="<?php echo $record['ProfileID']; ?>" class="darkcolour margine-top20 mutulafriends btndialogMutualFriends"><?php if(!isset($record['CommonFriendCount'])){echo "0 Friends in Common";}else if($record['CommonFriendCount']!=1){echo  $record['CommonFriendCount']."  Friends in Common";}else{echo  $record['CommonFriendCount']."  Friend in Common";} ?></label>
                        </div>
                    </div>
                    <div class="user-des-right">
                        <div class="user-des-right-inner">
                            <img width="13" height="13" class="btnDialogDelete request_del_dialog_open_but" req_type="recieved" prof_friend_id="<?php echo $record['ProfileFriendID']; ?>"
                                src="<?php echo $this->config->item('ivory_img_path'); ?>close_button.png"
                                alt="Profile image">
                            <div class="button-wrapper">
                                <input type="button" class="btnRequest btn-white-small request_accept_dialog_open_but" name="" prof_friend_id="<?php echo $record['ProfileFriendID']; ?>"
                                    tabindex="123456" value="Accept">                                       
                            </div>
                            <div class="button-wrapper">
                                <input type="button" class="btnDialogAssign btn-grey-small request_decline_dialog_open_but" prof_friend_id="<?php echo $record['ProfileFriendID']; ?>" 
                                    name="" tabindex="123456" value="Decline">                                  
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <?php }
        } else {?>

            <div class="no-records-found">No records found</div>

            <?php } ?>

        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:37:48.420

尝试使用最新的 jQuery。它*可能会*解决您的问题。该版本中可能存在一些错误/缺陷，这些错误/缺陷可能已在 jQuery 的更高版本中得到解决。

此答案的当前版本是 1.7.2 并且[`.live()`已弃用](http://api.jquery.com/category/deprecated/)，它的替换是[`.on()`](http://api.jquery.com/on/).

此外，*我几乎假设*您完全依赖最终错误警报，它最终出现在 jQuery 库中。它的信息量不是很大。检查您的堆栈跟踪以检查您的错误可能源自何处。尝试添加断点以了解执行的某个部分的值是什么。我对 jQuery 有信心，可能只是你给它提供了一些错误的值。还要检查错别字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:07:41.013

你的班级“mutulafriends”不需要动态绑定，所以我认为“点击”就足够了

把它包起来

```
$(document).ready(function(){
         jQuery('.mutulafriends').click(function(){
           alert('And update your JQuery to the latest one :=)');

       });
}); 
```

//委托方法

```
$(document).ready(function(){
             jQuery('div.component-list-wrapper').delegate('.mutulafriends','click',function(){
               alert('And update your JQuery to the latest one :=)');

           });
    }); 
```

实时或委托方法仅用于后期绑定，这意味着页面加载后生成的元素，例如通过 ajax 调用生成

# python - 如何在if语句中获取当前比较的值

> ID：10189919
> 
> 赞同：0
> 
> 时间：2012-04-17T10:59:10.953
> 
> 标签：python

```
if not sky.has_key('blue'):
    get_currently_compared_key # blue
elif not sky.has_key('cloud'):
    get_currently_compared_key # cloud 
```

在上面的代码中，我想在 if 语句中得到“蓝色”。有什么有用的方法吗？

编辑 1：如果天空 == 'blue' -> 如果不是天空 == 'blue' 编辑 2：如果不是 sky.has_key('blue')...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:03:04.790

没有魔法标识符可以扩展到`blue`结果内部，如果这就是你的意思，~~尽管`sky`显然具有您所追求的价值~~.

**编辑**：我想你的意思是`sky != 'blue'`而不是`not sky == 'blue'`. 不，没有神奇的方法可以在条件下获得比较值。再次键入`'blue'`或创建一个将其保存在条件之外的变量：

```
BLUE = 'blue'

if sky != BLUE:
    make_the_sky(BLUE) 
```

**编辑 2**：好的，所以它是`has_key`. 仍然没有魔法。请注意，它`has_key`已被弃用了相当长的一段时间以支持`'blue' in sky`（或`'blue' not in sky`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:05:40.817

不，这样做的唯一方法是显而易见的：

```
sky_colour = 'blue'
if not sky == sky_colour:
    do_something(sky_colour) 
```

或为您的编辑：

```
sky_colour = 'blue'
if sky_colour not in sky:
    do_something(sky_colour) 
```

`has_key()`不需要 - 改用`in`关键字，它更具可读性。

# ruby - 使字符串成为 ruby 中的文字正则表达式

> ID：10189923
> 
> 赞同：0
> 
> 时间：2012-04-17T10:59:15.797
> 
> 标签：ruby, regex, string

我有一个未知的输入字符串，我想将其用作正则表达式，但它可以包含许多字符，例如 (,/,\

在 Ruby 中，是否可以指定要匹配的输入参数只是一个文字字符串。

例如 text.match_literal(string) 而不是 text.match(string) ？

或者，是通过编写一个反斜杠函数来解决问题的唯一方法吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:05:51.970

您可以使用`index`方法：

```
text.index(string) 
```

# google-plus - 反正有没有在 google+ 之外的视频群聊？

> ID：10189926
> 
> 赞同：7
> 
> 时间：2012-04-17T10:59:19.687
> 
> 标签：google-plus, hangout

有什么方法可以让我们在我们的 web 应用程序中进行视频群聊，比如在 iframe 中？我正要尝试使用 hangout api，但是通过现有的 hangout 应用程序，似乎只能在 Google+ 中查看和使用它们。

是否有一种解决方法可以让用户觉得视频群聊是我的应用程序的一部分，而不是我的应用程序是视频群聊的一部分？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-17T20:58:09.227

无法将环聊嵌入到您的 Web 应用程序中，但您可以使用[环聊按钮](https://developers.google.com/+/hangouts/button)来启动环聊应用程序。这允许您将 Web 应用程序中的功能和数据集成到环聊中。

环聊按钮由图像和环聊启动链接组成。它有[几种尺寸](https://developers.google.com/+/hangouts/button#button)。这是最小尺寸（75x19 px）的代码

```
<a href="https://plus.google.com/hangouts/_?gid=APP_ID" style="text-decoration:none;">
  <img src="https://ssl.gstatic.com/s2/oz/images/stars/hangout/1/gplus-hangout-15x79-normal.png"
    alt="Start a Hangout"
    style="border:0;width:79px;height:15px;"/>
</a> 
```

在此代码段中，您必须使用[API 控制台](https://code.google.com/apis/console)`APP_ID`中的应用程序 ID替换。查看项目时，您会在 URL 的末尾找到应用程序 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-01T06:47:31.070

目前，无法在您的网络应用程序中嵌入环聊应用程序。但是，有一个[打开的问题跟踪器](http://code.google.com/p/google-plus-platform/issues/detail?id=28)，您可以在其中添加有关此功能需求的评论，Google 可能会在其未来的 API 版本中发布它。

# javascript - 为什么布尔值未定义？

> ID：10189927
> 
> 赞同：1
> 
> 时间：2012-04-17T10:59:20.720
> 
> 标签：javascript, undefined, undefined-reference

在javascript中我这样做：

```
var myObject = {
  myBoo: false,
  myMethod: function () {
     console.log("my method: "+ myBoo);
  }
}
console.log("myObject.myBoo=" + myObject.myBoo);
myObject.myMethod(); 
```

这输出：

```
myObject.myBoo=false
ReferenceError: myBoo is not defined 
```

从 myMethod 的角度来看，为什么 myBoo 是 undefeind 的？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T11:02:31.443

这是因为 myBoo 没有定义为全局变量，而是定义为对象属性。`myMethod`因此，在函数中访问它的正确方法是：

```
console.log("my method: "+ this.myBoo); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T11:01:44.970

您需要添加**它**来引用该对象：

```
myMethod: function () {
    console.log("my method: "+ this.myBoo);
} 
```

这是一个小提琴：http: [//jsfiddle.net/9xB83/](http://jsfiddle.net/9xB83/)

这是一篇关于**此** [http://www.quirksmode.org/js/this.html](http://www.quirksmode.org/js/this.html)的精彩文章。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T11:01:54.943

myBoo 是对象的一个​​属性，因此您必须参考对象本身来访问它。

它应该是 myMethod function() 中的 this.myBoo

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T11:03:16.507

您的函数“myMethod”正在尝试访问在您的函数上下文*中不存在*的局部变量 myBoo！你的意思是使用this.myBoo。

# php - MySql 如果语句不起作用

> ID：10189929
> 
> 赞同：0
> 
> 时间：2012-04-17T10:59:30.240
> 
> 标签：php, mysql

在我的详细信息表中，当完整字段为“0”时，我希望出现某个图像，而当它为“1”时，我希望出现不同的图像。目前只显示第二张图片（当完整字段为 1 时）这是我正在使用的代码：

```
$id = $_SESSION['user_id'];
    $isFinished= mysql_query("SELECT complete From details where user_id = $id") ?>
<p>  <img src='<?php if($isFinished) echo "correct.png"; else echo "incorrect.png"; ?>' /><a href="details.php">Details</p> 
```

任何想法都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:03:33.473

您的`WHERE`查询子句*仅指定选择记录 where `complete`= '1'*

所以你只会得到`1`结果。

您应该从`WHERE`子句中完全删除它，让您的 php IF 语句决定是否`complete = '1'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:12:54.703

功能

```
function getOne($query){
  $res = mysql_query($query);
  if (!$res) {
    trigger_error("db: ".mysql_error()." in ".$query);
    return FALSE;
  }
  if ($row = mysql_fetch_row($res)) {
    return $row[0];
  }
} 
```

编码

```
$sql = "SELECT complete From details where user_id = ".intval($_SESSION['user_id']);
$isFinished = getOne($sql);
?>
<p>
  <img src='<?php if($isFinished): ?>correct.png<? else: ?>incorrect.png<? endif ?>' />
  <a href="details.php">Details</a>
</p> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T11:04:22.997

您的 SQL 语句只选择 complete='1' 的条目。您应该从您的声明中删除“and complete='1'”。

编辑：如上所述，您的 if 语句仅检查您的查询是否返回某些内容或出现错误。

它应该是

```
if($isFinished['complete'] == '1') {echo "correct.png";}else{echo "correcy.png";} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T11:05:42.017

该`mysql_query`函数`false`仅在查询无效时返回。如果有零行，它不会返回 false。

您应该使用该`mysql_num_rows`函数来确定是否存在一行，或者使用这些`mysql_fetch_*`函数来获取完整的值。

示例 1（类似于您的原始（未编辑）问题）：

```
$result = mysql_query("SELECT 1 From details where user_id = $id where complete = 1");
$isFinished = mysql_num_rows($result); 
```

示例 2（替代方案）：

```
$result = mysql_query("SELECT complete From details where user_id = $id");
$record = mysql_fetch_assoc($result);
$isFinished = $record['complete']; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T11:06:46.540

这是整个代码吗？

在这种情况下，$isFinished 不是从 db 检索的内容：如果查询错误，mysql_query 返回 false，否则返回一个可以获取结果的对象。

在这种情况下 if($isFinished) 总是正确的，因为查询是正确的！

你错过了查询执行的获取部分！

[http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)

例如：

```
 $id = $_SESSION['user_id'];
 $result = mysql_query("SELECT complete From details where user_id = $id");
 $isFinished= mysql_num_rows($result);
<p>  <img src='<?php if($isFinished) echo "correct.png"; else echo "incorrect.png"; ?>'     /><a href="details.php">Details</p> 
```

这样，如果查询返回一个或多个行，则 $isFinished 为 1 或更多，否则 $isFinished 为 0。您的 if - else 应该可以正常工作

请注意，我没有更改您的原始 SQL，如果需要，请更改它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-17T11:09:24.757

它应该是这样的：

```
$id = $_SESSION['user_id'];
$result= mysql_query("SELECT complete From details where user_id = $id  and complete='1'") ?> 
$row = mysql_fetch_array( $result );
<p>
<?php if($row['complete']): ?>
<img src="correct.png"/>
<?php else: ?>
<img src="incorrect.png"/>
<?php endif; ?>
<a href="details.php">
Details</a>
</p> 
```

# c - 在 make 文件中包含多个子目录

> ID：10189931
> 
> 赞同：1
> 
> 时间：2012-04-17T10:59:36.673
> 
> 标签：c, makefile

我正在尝试为我在 Linux 下用 C 编写的小型应用程序编写一个 makefile。目前我所有的源文件`.c`都在顶级目录中，所有头文件都在包含目录中。这是我用于此的makefile。

```
IDIR =include
CC=gcc
CFLAGS=-I$(IDIR)

ODIR=obj

_OBJ = main.o kernel.o user_app.o myargs.o ofp_msgs.o pkt_ip.o pkt_ether.o pkt_tcp.o pkt_udp.o pkt_icmp.o 
OBJ = $(patsubst %,$(ODIR)/%,$(_OBJ))

#DEPS = ofp_msgs.h

$(ODIR)/%.o: %.c 
    $(CC) -c -o $@ $< $(CFLAGS)            
all: jam

jam: $(OBJ)
    gcc -o $@ $^ $(CFLAGS)  -lpthread

.PHONY: clean

clean:
    rm -f $(ODIR)/*.o *~ jam 
```

它工作正常，但我想要的是，例如，我创建了一个名为的子目录`"Packet"`，并且我的所有数据包解析文件`"pkt_ip.c, pkt_tcp.c etc"`都应该在那个目录中，因为它们的头文件应该仍然在顶级目录中`"toplevel/include"`。我做了一些搜索，最常见的方法是使用递归制作。然后我看到很多页面抱怨递归生成。任何人都可以帮我解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T12:03:07.767

我建议查看[Recursive Make Considered Harmful](http://miller.emu.id.au/pmiller/books/rmch/)中描述的方法。我已经在几个项目（小型到中型）中使用了它，并且发现它比递归方法更易于使用，并且更容易包装。

基本上，您在根目录中有一个 Makefile，其中包含来自每个子目录的（部分）makefile：

```
SRC := main.c
MODULES := Packet lib etc
-include $(patsubst %, %/module.mk, $(MODULES))

OBJ := $(patsubst %.c, %.o, $(filter %.c,$(SRC)))
# (...) 
```

数据包/模块.mk：

```
SRC += Packet/pkt_ip.c Packet/pkt_tcp.c
LIBS += -lsome_library 
```

这些模块生成文件当然也可以定义它们自己的模块目标，或特殊的构建要求。

与递归 make 不同，“make”只会被调用一次，这对于大多数用例会导致更快的构建。然而，对于大多数较小的项目来说，构建时间和复杂性都不是主要问题，所以使用感觉最自然的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T11:15:17.260

有几种方法可以做到这一点，但您当然可以使用`VPATH:=Packet`来告诉 make 在 'Packet' 目录中查找源文件。参见[制作手册](http://www.gnu.org/software/make/manual/make.html#General-Search)

# javascript - 对可拖动的 PowerCharts 图表中的变化做出反应

> ID：10189934
> 
> 赞同：1
> 
> 时间：2012-04-17T10:59:40.700
> 
> 标签：javascript, dom-events, fusioncharts

我正在使用[FusionCharts PowerCharts 包中的可拖动折线图](http://docs.fusioncharts.com/powercharts/Gallery/DragableCharts/Dragline.html)。

在用户移动可拖动点后，我需要获取图形的数据并将其发送到服务器端进行进一步处理。使用图表中内置的提交按钮很容易做到这一点，但我希望在用户不必单击提交按钮的情况下实现这一点。

根据文档（尤其是[events](http://docs.fusioncharts.com/charts/contents/JavaScript/API/Events.html)），当用户移动图表中的一个点时，图表似乎不会触发任何事件。

所以现在我正试图找出最好的方法来通知用户对图表所做的更改？

一种选择是定期调用一个 JS 函数，该函数将获取图形的数据并检查自上次检查以来它是否已更改。然而，这感觉非常丑陋和低效，我目前不知道如何在 JS 中实现连续轮询。

我现在倾向于只在图形所在的元素上侦听鼠标向上事件，然后检查对图形先前状态的更改。这应该可以工作，尽管用户可能会经常单击图形而不实际在其中拖动一个点。

我在这里错过了一些其他明显的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:33:17.530

在我们找到解决方案之前，我想提出几件事：

1.  轮询总是一个坏主意。并且短时间的轮询更糟糕。但是，如果您不需要对数据点的拖动做出自发反应，则可以进行高间隔轮询。供您参考，轮询是在 JavaScript 上通过使用[`setInterval`](http://www.w3schools.com/jsref/met_win_setinterval.asp)function 或使用 recursive完成的[`setTimeout`](http://www.w3schools.com/jsref/met_win_settimeout.asp)。
2.  如果您想跟踪鼠标事件，请注意，如果您正在渲染 Flash 图表，您需要确保图表的`wMode`（窗口模式）参数未设置为“窗口”。在“窗口”wMode 中，浏览器在将鼠标悬停在图表上时不会跟踪鼠标事件。要更改`wMode`图表，请确保执行`chartInstance.setTransparent(false)`或`chartInstance.setTransparent(true)`在呈现图表之前执行。

您计划的鼠标事件方法对您没有帮助，因为您不知道用户是否点击了数据点。因此排除了这种方法。

因此，剩下的就是轮询。:(

**更新（在 Janne 的第一条评论之后）：** 当图表上发生拖动事件时，使用两者的组合来检查数据更改是正确的解决方案。

# c# - 将 MembershipProvider 从 SQL Server Express 更改为 SQL Server CE

> ID：10189939
> 
> 赞同：0
> 
> 时间：2012-04-17T11:00:14.417
> 
> 标签：c#, asp.net, asp.net-membership, sql-server-ce, membership-provider

我即将将现有应用程序从使用 SQL Server Express 更改为 SQL Server CE 4，到目前为止，我已成功转换数据并实现了 SqlCeMembershipProvider。

现在我可以创建新用户并且他们可以登录，但所有现有用户都无法登录。我在新旧应用程序中都使用相同的 machineKey，并且我在成员资格和配置文件中的角色管理器中所做的所有更改都是类型（更改为`ErikEJ.SqlCeMembershipProvider`）。

```
<machineKey validationKey="xxx" decryptionKey="yyy" validation="SHA1" decryption="AES" />
<membership defaultProvider="SqlCeMembershipProvider" hashAlgorithmType="SHA1">
  <providers>
    <clear />
    <add name="SqlCeMembershipProvider" type="ErikEJ.SqlCeMembershipProvider" connectionStringName="myDB" applicationName="myapp" requiresQuestionAndAnswer="false" minRequiredPasswordLength="4" minRequiredNonalphanumericCharacters="0"/>
  </providers>
</membership>
<roleManager defaultProvider="SqlCeRoleProvider" enabled="true" cacheRolesInCookie="true" cookieName=".ASPROLES" cookieTimeout="30" cookiePath="/" cookieRequireSSL="false" cookieSlidingExpiration="true" cookieProtection="All">
  <providers>
    <add name="SqlCeRoleProvider" type="ErikEJ.SqlCeRoleProvider" connectionStringName="myDB" applicationName="myapp" />
  </providers>
</roleManager> 
```

任何想法如何让老用户重新上线？

# php - 用户上传/下载的文件名允许的字符

> ID：10189945
> 
> 赞同：0
> 
> 时间：2012-04-17T11:00:47.830
> 
> 标签：php, html, web, character, filenames

目前用户可以随意上传文件。所以在上传的文件中有空格，字符之类`ß, ü`的。比其他用户可以下载这些文件（包括 URL 中的空格等）。它以这种方式工作，但根据[RFC1738 - 统一资源定位符 (URL)](http://www.faqs.org/rfcs/rfc1738.html) ，只允许使用字母数字字符`[a-zA-Z0-9]`和一些特殊/保留字符。我认为也应该避免空白。

目前我在服务器上的文件名中得到一个`ß`a `ÃŸ`。想要下载文件的用户从 MySQL 数据库 (utf8_unicode_ci) 中获取正确的字符 (ß)，因此可以在服务器上找到该文件。

*   处理文件名的正确方法是什么？
*   我应该进行文件名检查并禁止上传吗？
*   我应该在用户上传后重命名服务器上的文件（例如`str_replace()`，，`urlencode()`...）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:28:14.510

只要您的网络服务器负责处理文件下载，请确保它知道文件系统上的编码，并且文件系统与您用于处理的上传文件名的字符集兼容。

只要这里的一切都兼容（看起来你使用的是 UTF-8），你就不会遇到任何问题。只需确保在您使用的每个地方（文件系统、网络服务器、数据库服务器、数据库客户端连接、浏览器、上传 POST 请求、提供 HTTP HTML 响应的文件链接等）都正确设置了编码。

如果您打算通过 PHP 提供带有`Content-Disposition`标头的文件，您应该只允许在文件名中包含以下字符：

```
a-z, A-Z, 0-9, _, - , . 
```

这是因为该标头没有针对 US-ASCII 可打印范围之外的字符的工作规范。

通常当一个文件被上传时，它的文件名被规范化了。在上传时进行一些验证/清理也是明智之举。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T11:04:13.467

> 处理文件名的正确方法是什么？

您似乎已经在处理它们了；在将文件名放入 URL 参数之前将它们包装起来`rawurlencode`以符合规范。

> 我应该进行文件名检查并禁止上传吗？

不，那只会惹恼您的用户。

> 用户上传后我应该重命名服务器上的文件吗？

这可能是个好主意。您可以使用您选择的技术生成一个“随机”名称，并将“原始”名称保存在数据库中。每当用户想要下载文件时，使用他们通过[`Content-Disposition`](https://stackoverflow.com/questions/1012437/uses-of-content-disposition-in-an-http-response-header)HTTP 标头上传文件时使用的名称将其返回给他们。

这样做的好处包括确保您不会被每个用户的文件系统和服务器文件系统之间的细微差异所困扰，并避免重复文件名问题。

# java - 在java中最小化复杂的线性多变量函数

> ID：10189951
> 
> 赞同：3
> 
> 时间：2012-04-17T11:01:14.580
> 
> 标签：java, function, constraints, minimization

我需要在某些**约束下最小化****复杂的线性多变量**函数。

 **设**x为长度为****L**的复数数组。

**a[0], a[1], ..., a[L-1]**是复系数，并且

**F**是复函数**F(x)= x[0]*a[0] + x[1]*a[1] + ... + x[L-1]*a[L-1]**必须被最小化。

**b[0], b[1], ..., b[L-1]**是复系数，有一个约束

**1 = complexConjuate(x[0])*x[0] + complexConjuate(x[1])*x[1] + ... + complexConjuate(x[L-1])*x[L-1]**有来实现。

我已经详细查看了[http://math.nist.gov/javanumerics/](http://math.nist.gov/javanumerics/)并浏览了许多文档。但是我找不到一个可以最小化复杂功能的库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:53:57.187

您想要最小化`f`平滑超曲面上的可微分实值函数`S`。如果存在这样的最小值——在编辑后的情况下，因为超曲面是紧致的，所以它保证存在——它出现在限制to`f|S`的临界点。`f``S`

`f`在限制到流形的环境空间中定义的可微函数的临界点是`M`那些[梯度](http://en.wikipedia.org/wiki/Gradient)`f`正交于`T(M)`流形的切线空间的点。对于一般情况，请阅读[拉格朗日乘数](http://en.wikipedia.org/wiki/Lagrange_multiplier)。

在流形是由`g(x) = 0`具有平滑函数的方程（局部）定义的超曲面（它具有实余维数 1）的情况下`g`，特别容易检测， 的临界点是与共线`f|S`的点。`x``S``grad(f)|x``grad(g)|x`

现在这个问题实际上是一个真实的（如涉及实数）问题，而不是一个复杂的（如涉及复数）问题。

去掉不必要的虚部，我们有

*   超曲面`S`，方便地是单位球体，由`(x|x) = 1`where`(a|b)`表示标量积全局定义， at`a_1*b_1 + ... + a_k*b_k`的梯度为`g``x``2*x`
*   一个真正的线性函数，`L(x) = (c|x) = c_1*x_1 + ... + c_k*x_k`梯度独立于`L``c``x`

因此，球面上有两个临界点`L`（除非`c = 0`在这种情况下`L`是常数），即通过原点的线`c`与球体相交的点，`c/|c|`以及`-c/|c|`。

显然`L(c/|c|) = 1/|c|*(c|c) = |c|`和`L(-c/|c|) = -1/|c|*(c|c) = -|c|`，所以最小值出现在`-c/|c|`并且值是`-|c|`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T11:33:09.067

每个复变量`x`可以看作是两个*实*变量，分别代表 的实部和虚部`x`。

我的建议是，您使用每个变量或系数的实部和虚部作为独立分量来重新制定目标函数和约束。

根据评论，您只打算优化目标函数的实部，因此您最终可以得到一个需要优化的目标函数。

约束可以分为两部分，其中“真实”约束应等于 1，“虚构”约束应等于 0。

以这种方式重新制定优化问题后，您应该能够应用适用于重新制定的问题的任何优化算法。例如，[Apache Commons Math](http://commons.apache.org/math/userguide/optimization.html)库中有一套不错的优化器，[算术](http://www.numericalmethod.com)库也包含一些优化算法。**

# gmail - MS Exchange 中的根 IMAP 文件夹类似于 gmail IMAP 中的 ALL MAIL 文件夹

> ID：10189952
> 
> 赞同：0
> 
> 时间：2012-04-17T11:01:20.960
> 
> 标签：gmail, exchange-server, imap

有没有办法连接到 ms Exchange 邮件服务器中的 IMAP 文件夹，通过它我可以访问邮箱内的所有邮件。我的意思是所有邮件，包括收件箱、已发送邮件和其他与收件箱文件夹处于同一层次结构的文件夹。

我正在 gmail IMAP 中寻找类似于 [Gmail]/All Mail 文件夹的内容。这个文件夹让我可以一次访问所有文件夹中的所有邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T19:44:46.837

我不知道要求 IMAP 使用 Exchange 投影整个邮箱的视图。

# machine-learning - Weka机器学习：如何解释朴素贝叶斯分类器？

> ID：10189953
> 
> 赞同：2
> 
> 时间：2012-04-17T11:01:28.873
> 
> 标签：machine-learning, weka, classification

我正在使用资源管理器功能进行分类。我的 .arff 数据文件有 10 个数字和二进制值的特征；（只有实例的 ID 是名义上的）。我有大约 16 个实例。预测的类是是/否。我使用了朴素贝叶斯，但我无法解释结果，有谁知道如何解释朴素贝叶斯分类的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T11:42:15.280

朴素贝叶斯不选择任何重要的特征。正如您所提到的，朴素贝叶斯分类器的训练结果是每个特征的均值和方差。将新样本分类为“是”或“否”是基于样本的特征值是否与“是”或“否”的训练特征的均值和方差最匹配。

您可以使用其他算法来查找信息量最大的属性。[在这种情况下，您可能想要使用决策树分类器，例如 WEKA 中的 J48（它是C4.5 决策树算法](https://en.wikipedia.org/wiki/C4.5_algorithm)的开源实现）。结果决策树中的第一个节点告诉您哪个特征具有最大的预测能力。

更好（如 Rushdi Shams 在另一篇文章中所述）；Weka 的 Explorer 提供有目的的构建选项来查找数据集中最有用的属性。这些选项可以在`Select attributes`选项卡下找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:41:00.130

正如 Sicco 所说，NB 无法为您提供最好的功能。决策树是一个不错的选择，因为分支有时可以告诉您重要的功能 - 但并非总是如此。为了处理从简单到复杂的功能集，您可以使用 WEKA 的 SELECT ATTRIBUTE 选项卡。在那里，您可以找到搜索方法和属性评估器。根据您的任务，您可以选择最适合您的任务。他们将为您提供特征排名（来自训练数据或来自 k 折交叉验证）。就个人而言，我认为如果您的数据集过度拟合，决策树的性能会很差。在这种情况下，对特征进行排名是选择最佳特征的标准方法。大多数时候我使用信息增益和排名算法。当你看到你的属性从 1 到 k 排序时，很高兴能找出需要的特征和不必要的特征。

# java - JSTL if 标记相等的字符串

> ID：10189963
> 
> 赞同：92
> 
> 时间：2012-04-17T11:02:00.793
> 
> 标签：java, jsp, websphere, jstl, jsp-tags

我从我的 JSP 页面上的一个对象中获得了一个变量：

`<%= ansokanInfo.getPSystem() %>`

变量的值是正确的 NAT，我想为这个值应用某些页面元素。如何使用标签来了解案例？我尝试了类似的东西

```
<c:if test = "${ansokanInfo.getPSystem() == 'NAT'}">      
   process  
</c:if> 
```

但上面没有显示任何内容。我该怎么做？或者我也可以使用scriptlet，即

```
<% if (ansokanInfo.getPSystem().equals("NAT"){ %>
process
<% } %> 
```

感谢您的任何回答或评论。

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2012-04-17T11:11:06.850

尝试：

```
<c:if test = "${ansokanInfo.PSystem == 'NAT'}"> 
```

JSP/Servlet 2.4（我认为是版本号）不支持 EL 中的方法调用，只支持属性。最新的 servlet 容器确实支持方法调用（即 Tomcat 7）。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-04-17T11:13:52.567

```
<c:if test="${ansokanInfo.pSystem eq 'NAT'}"> 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-04-17T11:25:26.337

我认为其他答案错过了有关在 EL 表达式中使用的属性名称的一个重要细节。从方法名称转换为属性名称的规则在[“Introspector.decpitalize”](http://docs.oracle.com/javase/6/docs/api/java/beans/Introspector.html#decapitalize(java.lang.String))中指定，它是 Java bean 标准的一部分：

> 这通常意味着将第一个字符从大写转换为小写，但是在（不寻常的）特殊情况下，当有多个字符并且第一个和第二个字符都是大写时，我们不理会它。
> 
> 因此“FooBah”变为“fooBah”，“X”变为“x”，但“URL”仍为“URL”。

因此，在您的情况下，JSTL 代码应如下所示，请注意大写“P”：

```
<c:if test = "${ansokanInfo.PSystem == 'NAT'}"> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-17T11:14:17.863

您可以使用小脚本，但是，这不是要走的路。现在 JSP 文件中的内联脚本或 JAVA 代码被认为是一个坏习惯。

您应该多阅读一下 JSTL。如果 ansokanInfo 对象在您的请求或会话范围内，则像这样打印对象（toString() 方法）： ${ansokanInfo} 可以为您提供一些基本信息。${ansokanInfo.pSystem} 应该调用对象的 getter 方法。如果这一切正常，你可以使用这个：

```
<c:if test="${ ansokanInfo.pSystem  == 'NAT'}"> tataa </c:if> 
```

# c# - RavenDB 嵌套 LINQ 表达式的解决方法

> ID：10189966
> 
> 赞同：2
> 
> 时间：2012-04-17T11:02:12.113
> 
> 标签：c#, linq, ravendb

我有一组简单的对象存储在 RavenDB 中：

```
public class Question
{
    public string Id { get; set; }
    public DateTime CreatedOn { get; set; }
    public ICollection<User> Supporters { get; set; }
    public ICollection<Answer> Answers { get; set; }
}

public class Answer 
{
    public string Id { get; set; }
    public bool IsOfficial { get; set; }
} 
```

现在我想查询 RavenDB 给我一组问题，首先按支持者数量排序，然后按条件排序 - 如果问题有任何官方答案，然后按问题创建日期排序。所以我写了一个查询：

```
var questions = DocumentSession.Query<Question>().AsQueryable(); 
questions = questions
                .OrderByDescending(x => x.Supporters.Count)
                .ThenByDescending(x => x.Answers.Any(a => a.IsOfficial)) //EDIT: source of exception
                .ThenByDescending(x => x.CreatedOn)
                .Take(15);                
var result = questions.ToList(); 
```

抛出异常：

```
System.InvalidCastException: Unable to cast object of type 'System.Linq.Expressions.MethodCallExpressionN' to type 'System.Linq.Expressions.MemberExpression' 
```

当我使用 linq-to-objects 并简单地将**.ToList()**添加到第一行时，查询在逻辑上是正确的并且有效：

```
var questions = DocumentSession.Query<Question>().Tolist().AsQueryable();
// next lines stay unchanged 
```

由于性能问题，我不想这样做（此更改强制在过滤之前将所有问题从数据库加载到内存中）。

如何在不影响性能的情况下使其工作？也许 shell 我定义了一个索引？那么它应该是什么样子呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T19:52:47.480

用于您目的的自定义索引基本上将是您的类的重新创建，其中包含额外的字段（以及一些支持它的逻辑）。似乎您不想在当前类中添加更多字段，您可以在项目中添加更多类吗？

这是一个例子：

```
public class Question_WithAnyOfficial: AbstractIndexCreationTask<Question>
{
    public class Question_WithAnyOfficial()
    {
        Map = questions => from question in questions
                           // New Anonymous Type
                           select new
                           {
                                Id = question.Id,
                                CreatedOn = question.CreatedOn,
                                Supporters = question.Supporters,
                                Answers = question.Answers,
                                AnyOfficial = question.Answers.Where(a => a.IsOfficial).Any()
                           };
    }
} 
```

然后你可以查询这个：

```
var questions = DocumentSession.Query<Question_WithAnyOfficial>()
                .OrderByDescending(x => x.Supporters.Count)
                .ThenByDescending(x => x.AnyOfficial)
                .ThenByDescending(x => x.CreatedOn)
                .Take(15)
                .ToList(); 
```

不要忘记，您必须在应用启动时注册索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T17:03:03.090

Raven 不能支持 LINQ 查询中的计算，所以这应该可以工作（删除了问题子句）：

```
var questions = DocumentSession.Query<Question>()
                .OrderByDescending(x => x.Supporters.Count)
                //.ThenByDescending(x => x.Answers.Any(a => a.IsOfficial))
                .ThenByDescending(x => x.CreatedOn)
                .Take(15);                
var result = questions.ToList(); 
```

如果您想包含该逻辑，则需要在您的类中添加一个名为`AreAllAnswersOfficial`（或类似名称）的字段。然后你可以把它放在子句中：

```
var questions = DocumentSession.Query<Question>()
                .OrderByDescending(x => x.Supporters.Count)
                .ThenByDescending(x => x.AreAllAnswersOfficial)
                .ThenByDescending(x => x.CreatedOn)
                .Take(15);                
var result = questions.ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T21:32:43.293

根据 Bear Alexander 的回应，我已经这样做了：

```
public class QuestionByAnyOfficial : AbstractIndexCreationTask<Question, QuestionByAnyOfficial.Result>
{
    public class Result
    {
        public string Id;
        public bool AnyOfficial;
        public int SupportersCount;
        public DateTime CreatedOn;
    }

    public QuestionByAnyOfficial()
    {
        Map = questions => from question in questions                               
                           select new
                              {
                                  Id = question.Id,                                              
                                  AnyOfficial = question.Answers.Any(a => a.IsOfficial),
                                  SupportersCount = question.Supporters.Count,
                                  CreatedOn = question.CreatedOn
                              };            
    }
}

var questionIds = DocumentSession.Query<QuestionByAnyOfficial.Result, QuestionByAnyOfficial>()
                       .OrderByDescending(x => x.SupportersCount)
                       .ThenByDescending(x => x.AnyOfficial)
                       .ThenByDescending(x => x.CreatedOn)
                       .Take(NumberOfQuestions)
                       .Select(x => x.Id);
var questions = DocumentSession.Load<Question>(questionIds);
var result = questions.ToList(); 
```

它有效，我相信它比我的原始版本更有效。如果它可以以任何更优雅的方式完成，我会很感激任何想法。问候。

# c++ - C ++ Boost图形库：构建在无向图搜索中访问的顶点向量？

> ID：10189967
> 
> 赞同：2
> 
> 时间：2012-04-17T11:02:14.763
> 
> 标签：c++, boost, depth-first-search, boost-graph

从我可以收集到的关于如何使用 BGL 来从已知根节点调用图形的 DFS 的信息中，我需要按照以下方式做一些事情

```
class MyVisitor : public boost::default_dfs_visitor
{
  public:
  void discover_vertex(MyVertex v, const MyGraph& g) const
 {
    cerr << v << endl;
    return;
 }

};

 void bfsMethod(Graph g, int rootNodeId)
 {

   boost::undirected_dfs(g, vertex(rootNodeId,g), boost::visitor(vis)); 

 } 
```

现在我不确定如何更改它，以便`std::vector`在 DFS 以类似于如何使用最小生成树算法的方式访问图中的所有顶点时构建 vertexId（或指针），例如

```
std::vector < JPEdge > spanning_tree;
kruskal_minimum_spanning_tree(g, std::back_inserter(spanning_tree)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:07:02.833

向量必须是您的访问者的成员。在`discover_vertex`函数中，只需将发现的元素推入向量中。

```
class MyVisitor : public boost::default_dfs_visitor
{
  public:
  void discover_vertex(MyVertex v, const MyGraph& g) const
 {
    cerr << v << endl;
    vv.push_back(v);
    return;
 }

  vector<MyVertex> GetVector() const {return vv; }

 private: 
 vector<MyVertex> vv;

};

void bfsMethod(Graph g, int rootNodeId)
{
  MyVisitor vis;
  boost::undirected_dfs(g, vertex(rootNodeId,g), vis); 
  vector<MyVertex> vctr = vis.GetVector();

 } 
```

# delphi - 如何使用Delphi在TImage中显示所有图片格式

> ID：10189969
> 
> 赞同：5
> 
> 时间：2012-04-17T11:02:22.983
> 
> 标签：delphi, delphi-xe2, timage

我编写了一个存储照片的应用程序，将照片的路径保存在数据库中。我遇到了一个问题。当我单击按钮选择要在 TImage 对象中显示以供用户在保存前查看的图片时，我收到以下异常通知：引发的异常类：EInvalidGraphic 带有消息“未知图片扩展名 (.jpg)”

我正在使用 TopenPicture 组件来获取图像。openPicture.filter 属性设置为接受大多数图像格式（jpg、jpeg、png、gif、bmp），但我无法将这些格式中的任何一种加载到 TImage 组件中。

这是我用来加载图像的代码：

```
openPicture.Execute();
filename := openPicture.FileName;

if not(fileName = '') then
begin
  imgFoto.Picture.LoadFromFile(filename);
  imgFoto.Visible := true;
end; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-17T11:08:35.443

添加`JPEG`到接口部分的uses 子句。

这会自动注册`.jpg`为有效的图像文件扩展名并将其耦合到将实例化的`TJPEGImage`类。`TPicture`

# c# - 对于给定的优先级， Dispatcher.Invoke() 和 Dispatcher.BeginInvoke() 是否相等？

> ID：10189973
> 
> 赞同：3
> 
> 时间：2012-04-17T11:02:36.170
> 
> 标签：c#, invoke, dispatcher, begininvoke

鉴于`Invoke()`在执行委托之前阻塞调用线程，我想知道它是否比排队的委托具有任何优先级`BeginInvoke()`，根据定义，这会推断出及时性不太重要？

有人知道吗？是的，我总是可以创建一个测试应用程序，但是我很懒 ;-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T12:58:28.997

调用之间的唯一区别是 BeginInvoke 是异步的，而 Invoke() 是同步的（正如您所指出的）。据我所知，在 Dispatcher 队列中 Invoke 调用优先于 BeginInvoke（假设使用了相同的优先级），但为了明确地证明这一点，您可以启动该测试应用程序...... :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T13:13:07.143

Dispatcher.Invoke() 将 DispatcherPriority 作为其第一个参数。这是一个相对粗略的优先安排。否则，它的功能是 FIFO 队列，先到先得。这一切都说得通，优先级只有在调用队列被备份时才有意义。您要*避免*的情况。如果它以这种方式工作，一个相当讨厌的错误工厂，代码将根据机器速度和负载以不可预测的顺序执行。

# php - 如何确定用户是否从局域网访问？

> ID：10189975
> 
> 赞同：2
> 
> 时间：2012-04-17T11:02:46.603
> 
> 标签：php, ip

我需要我的 PHP 脚本来确定用户是否从 LAN 访问它。

到目前为止，我一直使用 $_SERVER['REMOTE_ADDR'] 来确定用户的 ip 是否在私有 ip 范围内，但它在 ipv6 上失败了。

当前使用的代码...

```
if( filter_var($_SERVER['REMOTE_ADDR'], FILTER_VALIDATE_IP, FILTER_FLAG_NO_PRIV_RANGE | FILTER_FLAG_NO_RES_RANGE) ){                           
    echo "NOT private or reserved ip";
}else{
    echo "private or reserved ip";
} 
```

...但它似乎通过将我的 ipv6 报告为非私有或保留而失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:25:59.143

我不确定“单播”是什么意思，但根据*Abstract*，这就是你需要的： [RFC4193#3.1](https://www.rfc-editor.org/rfc/rfc4193#section-3.1)

您可以`Global ID`与`Subnet ID`服务器的相同值进行比较。

# visual-studio-2010 - C++ 本机 dll 的 C++/CLI 包装器

> ID：10189981
> 
> 赞同：1
> 
> 时间：2012-04-17T11:03:07.657
> 
> 标签：visual-studio-2010, dll, c++-cli

我有需要在我们小组的新 C# 程序中使用的本机 C++ dll。我想为本地 C++ dll 创建 C++/CLI 包装器，以便能够在 C# 中导入和编译它们。

我需要知道的是如何首先在包装源文件中加载dll文件。与 #using <...> 对 MSIL 所做的完全相同，但用于加载本机 C++ dll。

此外，dll 中的对象和命名空间将如何（从语法上）变得可访问？

**编辑：**

我用

```
class __declspec(dllexport) radar
{
    // declarations and definitions
    ...
}; 
```

从我的radar.dll中导出我的雷达类，并需要将其导入VC++（CLI）程序中，如下所示：`__declspec(dllimport) public class radar;`以便将其定义到C＃中，但我绝对看不到C＃中的雷达，因为它没有定义在 VC++(CLI) 中公开。即使我想在 VC++ dll 的代码中使用本机 dll 的对象，就像`radar pos1();`我得到的：

`error C2512: 'radar' : no appropriate default constructor available`

手头只有雷达声明，怎么能做到这一点？

**结束编辑。**

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T13:02:37.193

这是自动的，你不要自己做。您可以在 C++/CLI 项目的链接器设置的附加依赖项设置中指定本机 DLL 导入库 (.lib)。链接器将对 DLL 名称的引用链接到 C++/CLI 程序集中。只要 C# 代码使用 C++/CLI 程序集中的任何托管类型，CLR 就会加载程序集。Windows 会注意到 DLL 中的本机 DLL 引用并自动加载它们。

只有当 Windows 可以在运行时真正找到本机 DLL 时，这才会有一个好的结局。将它们复制到 EXE 项目的构建文件夹中。这很尴尬，您可以通过构建后事件或将它们添加到 C# 项目并将其 Copy to Output Directory 属性设置为 true 来实现。

# android - Android 操作表

> ID：10189985
> 
> 赞同：11
> 
> 时间：2012-04-17T11:03:17.377
> 
> 标签：android, uiactionsheet

在 iPhone 中，有 Action Sheet 的概念。我想在 Android 中单击按钮时使用相同的功能，但 Android 没有操作表。谁能告诉我 Android 中的 Action Sheet 等价物吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T11:10:36.513

您可以在 Android 中使用[弹出菜单](http://developer.android.com/guide/topics/ui/menus.html)

弹出菜单显示垂直列表中的项目列表，该列表锚定到调用菜单的视图。它适用于提供与特定内容相关的溢出操作或为命令的第二部分提供选项。弹出菜单中的操作不应直接影响相应的内容——这就是上下文操作的用途。相反，弹出菜单用于与您的活动中的内容区域相关的扩展操作。

# php - Magento sales_flat_order_item 表

> ID：10189989
> 
> 赞同：3
> 
> 时间：2012-04-17T11:03:33.467
> 
> 标签：php, magento, magento-1.6

magento 1.6 CE sales_flat_order_item 表中有四个价格列：

```
price, base_price, original_price and base_original_price, 
```

他们之间有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T21:30:47.963

这个名字确实暗示了这种关系： original_price 是你开始的地方， price 是你结束的地方。

如果您在后端编辑订单以应用自定义定价，您将在此表中看到差异。我附上了一个屏幕截图，显示我在哪里调整了最后一个订单以降低价格（444 对 1750）。

![字段中不同值的屏幕截图](../Images/aaadff89dcd981b018bec2983a89ca10.png)

# node.js - Connect2 和 Socket.io

> ID：10189992
> 
> 赞同：5
> 
> 时间：2012-04-17T11:03:42.630
> 
> 标签：node.js, socket.io, connect

我试图让 connect 和 socket.io 很好地和简单地一起工作。我在服务器端有以下代码：

```
var connect = require('connect'),
    io = require('socket.io');

var app = connect().use(connect.logger('dev'));
var sio = io.listen(app);

app.listen(8000); 
```

当我打开[http://localhost:8000/socket.io/socket.io.js](http://localhost:8000/socket.io/socket.io.js)时 出现错误：

```
Cannot GET /socket.io/socket.io.js 
```

并且 Socket.IO 不起作用，我正在尝试复制文件并从另一个位置加载，但 socket.io 请求没有到达服务器

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T05:22:17.587

[解决方案](https://github.com/senchalabs/connect/issues/500#issuecomment-4620773)

如果有人遇到此问题，您需要将 connect/express 应用程序包装在节点 http.Server 中。app.listen() 方法是一个方便的方法，它返回服务器：

```
var io = require('socket.io');
var app = connect();
var server = app.listen(3000);
io.listen(server); 
```

或以下等效：

```
var io = require('socket.io');
var http = require('http');
var app = connect();
var server = http.createServer(app);
server.listen(3000);
io.listen(server); 
```

# mysql - XAMPP USB Lite - 如何将 MySQL 5.5 更改或升级到 5.6？

> ID：10189995
> 
> 赞同：5
> 
> 时间：2012-04-17T11:03:49.270
> 
> 标签：mysql, xampp, upgrade

由于 XAMPP 仅支持 MySQL 5.5，我想在当前稳定的 1.7.7 或 1.8.1 版本的 XAMPP 中将 MySQL 服务器升级到版本 5.6（测试版）。

我可以这样做吗？如果是这样，怎么做？

（只是澄清一下：应对和切换`mysql`文件夹不会成功。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-31T15:20:10.220

我找到了完美的方法，没有任何副作用，并且可以与 xampp 控制面板完美配合......

在开始之前，请确保将数据库备份到文件并将所有用户导出到文件确保停止 mysql 无需卸载服务

第 1 步：在 MySQL 安装版本或 zip 上下载新版本。（首选安装版本，因为它要小得多）

第 2 步：将 MySQL 安装到 C:\TEMP。仅安装 MySQL 服务器

第 3 步：不要运行高级选项。不要让它安装服务。无需配置。

第 4 步：转到 C:\TEMP，查找安装并复制以下文件夹“bin、include、lib、share、support-files”。绝对不要复制数据 复制后，转到您的 xampp 文件夹，将 mysql 文件夹重命名为 mysql_old。创建新的mysql文件夹然后粘贴复制的内容

第 5 步：转到 mysql_old 并复制数据文件夹并将其粘贴到新的 mysql 文件夹中

第 6 步：转到位于 xampp 中的 mysql 中的 bin 文件夹，并创建一个空白的 my.ini 文件。如果您要升级到我所做的 5.6.11 版本，那么您所要做的就是编写一些我在本说明底部的命令

第 7 步：单击 xampp 控制面板上 MySQL 旁边的开始，假设您正确按照说明进行操作，它应该可以正常启动。完成后，您可以将已安装的 mysql 包卸载到 C:\TEMP 任何问题或问题，给我留言或回帖！

顺便说一句，关键是有一个正确的 my.ini 文件

这是我的：

```
[client]
port=3306
socket="C:/xampp/tmp/mysql.sock"

[mysqld]
port= 3306
socket = "C:/xampp/tmp/mysql.sock"
pid_file = mysql.pid

skip-federated
explicit_defaults_for_timestamp

basedir="C:/xampp/mysql"
datadir="C:/xampp/mysql/data"
tmpdir = "C:/xampp/tmp"

log-output = FILE
log-error = mysql_error.log
general-log
general_log_file = mysql_general.log
slow-query-log
slow_query_log_file = mysql_slow.log

default-time-zone = -5:00
long_query_time = 2
plugin_dir = "C:/xampp/mysql/lib/plugin"
server-id = 2

#ft_stopword_file = "C:/xampp/mysql/bin/mysql_ft_stopword_file.ini"
ft_min_word_len = 3
ft_max_word_len = 50

character-sets-dir = "C:/xampp/mysql/share/charsets"
character-set-server = utf8
collation-server = utf8_unicode_ci

innodb_ft_max_token_size = 50
innodb_ft_min_token_size = 3
innodb_ft_enable_stopword = off

key_buffer_size = 8M

query_cache_type = 1
query_cache_size = 4M
query_cache_limit = 4M

default-storage-engine = InnoDB

[mysql]

default-character-set=utf8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T11:43:42.333

我按照上面列出的所有步骤，我能够启动 mysql 不是从 xampp 控制面板，而是从 Windows 控制面板 - > 系统和安全 - > 管理工具 - > 组件服务（或者只是在 Windows 搜索中搜索组件服务）。启动组件服务后，单击“服务”。它将列出您计算机上的所有服务。寻找mysql，点击它并点击“开始”。那为我创造了魔力！享受。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-04T22:23:51.417

最安全和最兼容 xampp 的方式，我做了以下升级：

首先，停止现有的 Xampp 进程，如 Apache 和 MySQL 以及其他与 MySQL 相关的 Xampp 安装服务。只需停止服务，不要卸载它们。

1）查看您想要/需要升级到哪个 MySQL 版本。MOODLE 1.7+ 等一些软件包需要最低 MySQL 版本（fe 5.5.31）。

2) 下载 Xampp 安装程序，其中包含您要升级到的 MySQL 版本。Xampp 版本列表以及它们包含的 MySQL 版本，您可以在[此处](http://code.stephenmorley.org/articles/xampp-version-history-apache-mysql-php/)找到。

3）在另一台电脑上安装新版本的Xampp

4）在另一台电脑上新安装的 Xampp 上，转到 c:/xampp/mysql 并复制以下地图：

*   斌
*   包括
*   库
*   分享

5) 在您的旧 xampp 机器上，将 c:/xampp/mysql 映射重命名为 fe c:/xampp/mysql_backup 并创建一个新的空映射 c:/xampp/mysql

6) 现在在这个新的 c:/xampp/mysql 映射中粘贴之前从上面 4) 复制的映射。

7) 到 c:/xampp/mysql_backup 映射并复制 BIN 映射，并将其粘贴到 c:/xampp/mysql

8) 比较并完成/修改位于 c:/xampp/mysql/bin 映射中的新 my.ini 文件中的一些设置（如缓冲区大小或 DIR 位置）与 c 中的旧 my.ini 文件： /xampp/mysql_backup/bin。

不要太快删除 c:/xampp/mysql_backup 映射，稍后可能会出现错误，因此您可以稍后查阅一些文件。将其视为备份。

通过 Xampp 控制面板启动 PHP 和 MySQL，一切都应该像以前一样工作。这种方法的优点是，您使用的是与 Xampp CP 和 phpmyadmin 100% 兼容的 MySQL 构建。

使用 MySQL msi-installer 可能会出现一些问题以使其正常工作。不过，好处是您可以在未来非常轻松地升级它，只需单击几下即可使用更新的 MySQL msi 安装程序，而不是复制粘贴地图和文件......

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-29T09:01:20.220

你可以而且你不应该遇到任何问题。AFAIK 整个 XAMPP 是由多个单独的服务块构建的。MySQL 驻留在 mysql 子文件夹中（整体，包括数据、配置等）。我必须承认，我是在理论上写作，因为我没有做过类似的事情（但我即将更新 phpMyAdmin 并将使用相同的步骤）。但我会遵循以下步骤：

1.  关闭有关 XAMPP 的所有内容（您已启动的所有服务器）。

2.  如果您已将 MySQL 作为服务安装（勾选“MySQL”旁边的“Svc”）——卸载它（取消选中）。

3.  将 XAMPP 中的“mysql”文件夹重命名为“mysql_old”或类似名称，

4.  使用 MySQL 提供的安装程序或指南创建新的“mysql”文件夹并在其中安装全新的 MySQL。

5.  配置，您必须配置的内容（在 MySQL 中），从 XAMPP 控制面板或通过其他方式启动 MySQL，将其安装为服务（标记“Svc”复选框），如果您愿意的话。

6.  检查，如果一切正常。如果是，请从 XAMPP 安装中删除“mysql_old”文件夹。

至于数据迁移（如果有的话），您可以通过使用phpMyAdmin 或类似工具从旧MySQL 中导出数据（在安装新版本之前，即执行上述步骤之前），然后将其导入新版本的MySQL 中。或者你可以考虑一种蛮力模式，即将 mysql_old/data 文件夹的全部内容复制到 mysql/data 文件夹。但不能保证，这会奏效。

# jquery - 被 JQuery 覆盖的 ASP.Net 代码

> ID：10189996
> 
> 赞同：0
> 
> 时间：2012-04-17T11:03:52.000
> 
> 标签：jquery, asp.net-mvc

我有一个包含脚本的 ASP.Net 页面：#

```
 var Show;    

    $(document).ready(function () {
        ...Set fooDialog to autoOpen=false
        ...Open the dialog on fooLink.Click
if(Show){
...Open the dialog
        } 
```

行为是，当用户打开页面时，默认情况下会隐藏此模式对话框。然后，当他们单击 fooLink 时，它就会打开。他们输入一些进入网格的文本并关闭它，它又被隐藏了。

现在，当用户单击网格中该行上的编辑时，我想显示带有值的对话框。

当用户选择编辑行时，我们调用后面的代码：

```
protected void foo_RowEditing(object sender, GridViewEditEventArgs e)
{
...fill in the values in the dialog
...ClientScript.RegisterStartupScript(this.Page.GetType(), "webMethod", String.Format("<script>SetShowFooDialog()</script>"));
} 
```

问题是打开 fooDialogue 的函数被后面的代码调用，然后调用 $(document).ready(function () 并覆盖它，将对话设置为隐藏。所以实际上我们加载它然后隐藏它因为我们正在客户端上重新加载页面。

有没有办法解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:10:57.863

在 ready(function ()... 仅当 blnFlagDialog = false; 是全局 javascript 变量时才隐藏对话框。

像我一样更新这个注册脚本语句并在它之后重置标志

```
RegisterStartupScript(this.Page.GetType(), "webMethod", String.Format("<script>blnFlagDialog = ture;OpenFooDialog();blnFlagDialog = false;</script>")); 
```

# c++ - 有没有办法在类内部重载提取运算符而不是类的朋友？

> ID：10189998
> 
> 赞同：0
> 
> 时间：2012-04-17T11:03:59.303
> 
> 标签：c++, operator-overloading, friend-function

我正在尝试重载 << 运算符，以便当我在 std::cout 中使用我的类对象时，它会打印出应该打印的数据成员。我知道我必须在一个类内部定义一个友元函数签名，然后在类外部定义两个友元函数来完成这项工作，但我想交出这个类，并且不希望用户做任何事情，我想让班级照顾好一切。我怎样才能在 C++ 中实现这样的事情？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:29:18.283

C++ 旨在允许非成员函数执行在其他语言中需要成员函数的事情。`friend`函数与成员函数非常相似，因为它可以在类范围内定义。此外（这可能会令人困惑）如果您*仅*`friend`在类范围内声明一个函数，则只能通过将该类的对象传递给它来访问它。

 *```
struct printme {
    friend std::ostream &operator<< ( std::ostream &os, printme const & )
        { return os << "hello"; }

    friend void named_friend( printme const & ) {}
};

std::cout << printme(); // OK
named_friend( printme() ); // OK
void (*fn_ptr) = named_friend; /* function not found
           it can only be found by association with printme */ 
```

虽然这个微妙的规则起初很奇怪，但它反映了非成员函数也可以被类封装的想法。

有关更多信息，请阅读与[参数相关的查找](http://en.wikipedia.org/wiki/Argument-dependent_name_lookup)(ADL)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:17:12.197

我们通常以如下方式使用<<：

```
cout<<myobject; 
```

如果您将 operator<<() 设为类的成员函数，则必须使用以下语法来调用 operator<<()

```
myobject<<cout; 
```

你想要那样吗？如果它适合您，您可以将其设为成员函数。

如果你想要它

```
cout<<myobject 
```

- 你必须让 operator<<() 成为你班级的朋友功能

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-17T11:11:29.140

这是一个例子：

```
#include <iostream>
#include <string>

using namespace std;

class A {
public:
    string pr() { return "Hi, I'm class A"; }
};

ostream &operator << (ostream &o, const A &a) {
    o << a.pr();
    return o;
}

int main() {
    A a;

    cout << a << endl;

    return 0;
} 
```

但是，根据我的经验，不要那样做。超载在学术上很好，但它使搜索应用程序的实现变得困难，甚至无法理解 << 已被重载。我总是使用某种形式的东西`cout << myobject.tostring()`*