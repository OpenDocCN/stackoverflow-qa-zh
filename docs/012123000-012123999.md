# StackOverflow 问答 12123000-12123999

# objective-c - 在objective-c中理解super

> ID：12123000
> 
> 赞同：1
> 
> 时间：2012-08-25T14:53:59.160
> 
> 标签：objective-c, inheritance

请考虑以下代码：

```
 `@interface Parent : NSObject

    - (void)whoAmI;

   @end

   @implementation Parent

   - (void)whoAmI
   {
     NSLog(@"PARENT CALLED");
   }

   @end

   @interface Child : Parent

   - (void)test;

   @end

   @implementation Child

   - (void)whoAmI
   {
      NSLog(@"CHILD CALLED");
   }

   - (void)test
  {
      NSLog(@"%@", [super class]);// CHILD!!!! why???
     [super performSelector:@selector(whoAmI)];// "CHILD CALLED" why???
  }

  @end 
```

`

当我调用`test`方法时，我希望看到打印的父类和`whoAmI`执行的父方法。但令人惊讶的是，派生类两次都被调用。谁能解释它为什么会发生以及我如何`performSelector:`在基类上？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T15:36:05.267

该`super`方法只是将消息转发到超类的实现代码的一种方式。但是，`self`保持不变。实际上，如果您创建 的实例`Child`，则根本没有 的实例`Parent`。您可以通过 NSLog-ing 对其进行测试，`self`以`%p`检查指针地址；当调用超级方法时，`self`指针与调用它的子类实例的指针相同：

家长：

```
- (void)printAddr {
    NSLog(@"%p", self);
} 
```

孩子：

```
- (void)printAddr {
    NSLog(@"sub: %p, self");
    [super printAddr];
} 
```

如果您调用 ，您将看到指针是相同的`[aChild printAddr];`。

现在让我们将其转化为解决您的具体问题。首先，看一下 performSelector: 方法。它的默认实现在 NSObject 中，这个实现很可能用于`self`调用选择器。因此，即使方法实现是 NSObject 的，该方法仍然会在*真实*对象上调用，即您的子类。如果不是因为这种行为， performSelector: 将始终尝试调用该方法，就好像它直接在 NSObject 上实现一样，除非您在子类上实现了自己的 performSelector: ；显然，这是错误的行为。

此外，该方法同样适用`-class`。它的默认实现驻留在 NSObject 上，显然它总是返回的 id 很无聊`[NSObject class]`，因此它有效地用于`self`获取*真实*对象的类。

您还可以通过在超类上创建一个调用另一个方法的方法来测试我在这里所说的内容`self`。即使您使用`super`调用第一个方法，仍然会在您的子类上调用第二个方法，因为`self`仍然指向子类：

家长：

```
- (void)method {
    NSLog(@"Parent: method");
    [self method1];
}
- (void)method1 {
    NSLog(@"Parent method1");
} 
```

孩子：

```
- (void)method {
    [super method];
}
- (void)method1 {
    NSLog(@"Child: method1");
} 
```

在这种情况下，`[aChild method]`将输出：

```
Parent: method
Child: method1 
```

# javascript - Javascript：根据当前日期检查格式化的日期值？

> ID：12123002
> 
> 赞同：1
> 
> 时间：2012-08-25T14:54:17.670
> 
> 标签：javascript, jquery, date

文本输入包含一个德语格式的日期`15.09.2012` ，我只是`$('#wr_event_date').val()`用来查询输入字段中的值。

我想知道如何才能将那个日期与“今天”相匹配？

```
var eventDate = $('#wr_event_date').val();

   // if eventDate is older than today as in "is over" doSomething(); 
```

所以基本上我想检查 eventDate 是否比今天更早，如果是，我想 doSomething();

对此有什么想法？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T15:01:08.720

不幸的是，您必须自己解析日期。然后，用 获取当前日期`new Date()`，重置*时间*部分，并比较两个日期：

```
var s = $('#wr_event_date').val().split(".");
var eventDate = new Date(s[2], s[1] - 1, s[0]);

var today = new Date();
today.setHours(0, 0, 0, 0); // reset time

if (eventDate.getTime() - today.getTime() < 0) { // event date is older than today
  doSomething();
} 
```

**[演示](http://jsfiddle.net/qL5JA/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T14:58:27.317

如果您可以使用第三方库，那么[moment.js](http://momentjs.com/)提供了解析日期字符串和操作日期的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T15:04:36.967

```
var parts = '15.09.2012'.split('.')
var date = Date.parse(parts[1], parts[0] - 1, parts[2]);

if (date - new Date().getTime() > 24 * 60 * 60 * 1000) ...
​ 
```

# php - 关于 Yii 活动记录中的重复键更新

> ID：12123006
> 
> 赞同：2
> 
> 时间：2012-08-25T14:54:41.163
> 
> 标签：php, sql, activerecord, yii

如何使用 Yii 活动记录编写此命令

```
 INSERT INTO table (a,b,c) VALUES (1,2,3)
ON DUPLICATE KEY UPDATE c=c+1; 
```

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-09-30T04:08:57.883

```
 $model->Yourmodel::model()->findByPk($key);

  if($model){
      $model->value = $newvalue;

  }else{
      $model = new Yourmodel();
      $model->value = $newvalue;

   }

   if($model->save()){
     // do somethings
   } 
```

# c++ - 如何将我在 VC++ 9 中开发的 C++/CLI（托管）与 CLR 支持静态库链接到我在 VC++ 6.0 中的本机代码（应用程序）？

> ID：12123007
> 
> 赞同：-1
> 
> 时间：2012-08-25T14:54:45.917
> 
> 标签：c++, c++-cli

这是非常紧迫的，我确实想将一个使用 CLR 支持的**C++/CLI托管代码语法编写的静态库链接到我使用****VC++ 6.0 用 C 编写的本机代码（应用程序）。**我应该怎么做？有可能吗？VC++ 6.0 的链接器是否支持托管库墨迹？请建议解决此问题的所有方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T15:04:50.667

是的，你可以，尽管我设法做到了

“以下列表概述了您需要的推荐硬件、软件、网络基础设施和服务包：

```
Visual C# .NET or Visual C# 2005
Visual C++ .NET or Visual C++ 2005" 
```

[http://support.microsoft.com/kb/828736](http://support.microsoft.com/kb/828736)

# r - r中数据帧之间的两两匹配

> ID：12123013
> 
> 赞同：-9
> 
> 时间：2012-08-25T14:55:29.770
> 
> 标签：r, merge, dataframe, match

我需要通过匹配每个数据框的两个站点列来组合两个数据框（df1 和 df2）以生成第三个数据框（df3）。

```
df1 = data.frame(Site.1=c("A","A","B"),
                 Site.2=c("B","C","C"),
                 Score1=c(60,70,80))
df1

 Site.1 Site.2 Score1
1      A      B     60
2      A      C     70
3      B      C     80

df2 = data.frame(Site.1=c("B","A","A"),
                 Site.2=c("C","B","C"),
                 Score2=c(10,20,30))
df2

  Site.1 Site.2 Score2
1      B      C     10
2      A      B     20
3      A      C     30

df3 = data.frame(Site.1=c("A","A","B"),
                 Site.2=c("B","C","C"),
                 Score1=c(60,70,80),
                 Score2=c(20,30,10))
df3

  Site.1 Site.2 Score1 Score2
1      A      B     60     20
2      A      C     70     30
3      B      C     80     10 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T15:03:15.110

你想要这个`merge`功能。由于您要匹配的列名已经具有相同的名称，您甚至不需要做任何特别的事情。如果不是这种情况，您需要查看合并所采用的`by.x`和`by.y`参数。

```
df1 = data.frame(Site.1=c("A","A","B"),Site.2=c("B","C","C"),Score1=c(60,70,80))
df2 = data.frame(Site.1=c("B","A","A"),Site.2=c("C","B","C"), Score2=c(10,20,30))
df3 = data.frame(Site.1=c("A","A","B"),Site.2=c("B","C","C"), Score1=c(60,70,80),Score2=c(20,30,10))
df3

# Merge gives you what you want
merge(df1, df2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-02T17:13:32.433

`dplyr`在这里可能会有所帮助。

```
library(dplyr)   

df1 = data.frame(Site.1 = c("A", "A", "B"),
                 Site.2 = c("B", "C", "C"),
                 Score1 = c(60, 70, 80))

df2 = data.frame(Site.1 = c("B", "A", "A"),
                 Site.2 = c("C", "B", "C"),
                 Score2 = c(10, 20, 30))

inner_join(df1, df2) 
```

# ios - 从详细视图禁用/启用后退按钮

> ID：12123014
> 
> 赞同：20
> 
> 时间：2012-08-25T14:55:33.370
> 
> 标签：ios, objective-c, iphone, uiviewcontroller

如何从详细视图控制器中禁用后退按钮？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-25T15:04:11.670

根据您的配置：

```
self.navigationItem.hidesBackButton = YES; 
```

或者：

```
self.navigationController.navigationItem.hidesBackButton = YES; 
```

或者，如果您只想禁用按钮而不隐藏它，您可以使用它。

```
self.navigationController.navigationItem.backBarButtonItem.enabled = NO; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-25T15:00:46.723

您可以使用 UINavigationItem [hidesBackButton](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UINavigationItem_Class/Reference/UINavigationItem.html#//apple_ref/doc/uid/TP40006933-CH3-SW14)来隐藏它：

```
self.navigationItem.hidesBackButton = YES; 
```

# winforms - 重绘所有者绘制的 winforms 组合框项目

> ID：12123015
> 
> 赞同：0
> 
> 时间：2012-08-25T14:55:38.883
> 
> 标签：winforms, combobox, ownerdrawn

我需要在具有不同背景颜色的组合框中显示项目。我还想根据是否选择了该项目（或鼠标在其顶部）来更改该颜色，这与组合框不是所有者绘制时的工作方式相同。

一切正常，除了当鼠标离开我更改颜色的项目之一时，该项目保持与鼠标在顶部时相同的颜色。在下面的示例中，项目 'other' 最初是使用 myUnselectedBrush 正确绘制的；鼠标移到顶部，使用 mySelectedBrush 正确绘制；当鼠标离开时，它仍然错误地用 mySelectedBrush 绘制；它应该是用 myUnselectedBrush 绘制的。对于项目“某物”，一切正常，其颜色没有改变。

我究竟做错了什么？

```
private void comboBoxDraw(object sender, DrawItemEventArgs e)
{
    ComboBox cb = (ComboBox)sender;
    Graphics g = e.Graphics;

    e.DrawBackground();
    if (e.Index > -1)
    {
        object item = cb.Items[e.Index];
        switch (somethingOrOther)
            {
                case something:
                    break;

                case other:
                    e.Graphics.FillRectangle(
                               (cb.SelectedIndex == e.Index) 
                                   ? mySelectedBrush 
                                   : myUnselectedBrush, 
                               e.Bounds);
                    break;
            }
        }
    }

    e.DrawFocusRectangle();
    if (e.Index > -1)
    {
       // draw the string
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T14:54:42.680

而不是使用

```
cb.SelectedIndex == e.Index 
```

我需要使用 DrawItemState：

```
((state & DrawItemState.Selected) > 0) || ((state & DrawItemState.HotLight) > 0) 
```

# php - 计算PHP中第一个子节点中指定标签的数量

> ID：12123018
> 
> 赞同：0
> 
> 时间：2012-08-25T14:56:21.643
> 
> 标签：php, html, count, domdocument

要计算包含嵌套标签的指定标签的数量，很简单，如下所示，

```
<?php
$html = <<<STR
    <ul>
        <li>item1</li>
        <ul>
            <li>item2</li>
            <li>item3</li>
            <li>item4</li>
        </ul>
    </ul>
STR;
$doc = new DOMDocument;
$doc->loadHTML( $html );
$nodeUl->getElementsByTagName('ul')->item(0);
echo $nodeUl->getElementsByTagName('li')->length;
?> 
```

但是如果我想只在第一个子节点中计算这种情况下的li标签，那怎么实现呢？我的意思是在这种情况下它应该只有一个，而不是四个。

也许删除其他标签并计算它？或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T15:08:20.773

尝试以下操作：

```
$doc = new DOMDocument;
$doc->loadHTML($html);

foreach($doc->getElementsByTagName('ul') as $ul) {
   $count = $ul->getElementsByTagName('li')->length;
   break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T15:14:35.983

问题是`getElementsByTagName()`返回所有祖先元素（具有指定的标签名称），而不仅仅是子元素。

您可以采取几种不同的方法，这里有两种。

### 遍历子节点并计算`<li>`元素

```
$count = 0;
foreach ($nodeUl->childNodes as $child) {
    if ($child->nodeName === 'li') {
        $count++;
    }
} 
```

### 使用 XPath 仅查询（和计数）子`<li>`元素

```
$xpath = new DOMXPath($doc);
$count = $xpath->evaluate('count(li)', $nodeUl); 
```

### 资源

*   [`childNodes`](http://php.net/manual/en/class.domnode.php#domnode.props.childnodes)财产
*   [`nodeName`](http://php.net/manual/en/class.domnode.php#domnode.props.nodename)财产
*   [`DOMXPath`](http://php.net/manual/en/class.domxpath.php)班级
*   [`count()`](http://www.w3.org/TR/xpath/#function-count)XPath 函数

# objective-c - 当用户在弹出框外点击时调用什么方法

> ID：12123022
> 
> 赞同：2
> 
> 时间：2012-08-25T14:56:46.947
> 
> 标签：objective-c, ios, cocoa-touch, uipopover

快速...当用户通过在 UIPopover 外部轻按来关闭 UIPopover 时，会调用什么（如果有）方法？如果我想在这一点上发生一些事情，我的钩子在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T15:01:31.230

在 UIPopoverControllerDelegate 中，我们有一个名为`popoverControllerDidDismissPopover:`Read : [Doc](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIPopoverControllerDelegate_protocol/Reference/Reference.html)的委托方法，以便更好地了解如何使用它。

# c# - 如何在 asp.net c# 代码隐藏中创建选取框？

> ID：12123026
> 
> 赞同：2
> 
> 时间：2012-08-25T14:57:12.907
> 
> 标签：c#, asp.net, html, marquee

我想在 C# 代码隐藏中创建一个选取框控件。我怎样才能做到这一点？我试过：

```
marqueetd.Controls.Add (new System.Web.UI.HtmlControls. 
```

我要在其中添加选取框控件`marqueetd`的 id 在哪里。`td`

但是，之后没有选框控制`HtmlControls.`！你知道我该怎么做吗，或者有没有办法在我的 aspx 页面中标记选框代码并且只添加来自代码隐藏的文本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T14:58:32.540

您可以使用适当的标签名称创建[通用控件：](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlgenericcontrol.aspx)

```
var control = new HtmlGenericControl( "marquee" );
marqueetd.Controls.Add ( control );

// set some properties/attributes
control.Attributes["foo"] = "bar";
control.InnerHtml = "<span>Some HTML</span>"; 
```

强制性免责声明：`marquee`已弃用；`marquee`惹恼了人们。

# windows - Windows 7 cmd - 在 Rails 上使用 jruby 的别名

> ID：12123028
> 
> 赞同：0
> 
> 时间：2012-08-25T14:57:22.603
> 
> 标签：windows, cmd, alias

“rails”命令只能在 jruby/bin 文件夹中执行。我想在其他文件夹中创建我的应用程序。

例如：

```
C:/jruby/Projects/ 
```

但在此文件夹中，“rails”命令无法识别。有没有办法创建某种别名，我可以用来做类似的事情：

```
C:/jruby/Projects/alliasname rails 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T14:58:49.347

您可以将该`jruby/bin`文件夹添加到 PATH 环境变量中。但请务必实际添加*完整*路径。

只需在开始菜单中搜索“env”，然后编辑`PATH`变量：

![在此处输入图像描述](../Images/2d8a3d62842b10c5f7cf4650b2484b12.png)

# java - 为什么我的 Eclipse 项目与 ClearCase 没有关联？

> ID：12123029
> 
> 赞同：1
> 
> 时间：2012-08-25T14:57:23.797
> 
> 标签：java, eclipse, clearcase, checkin, vcs-checkout

我正在使用理性的 ClearCase 和 eclipse Helios 3.3.2。
我在 ClearCase Explorer 中创建了视图，然后将代码导入我的工作区。

在此之后，要将 Eclipse 项目与 ClearCasen 链接，我单击该项目，然后单击 Team。
但是，它没有显示“ `associate with clearCase`”选项。
它显示“ `apply patch`”和其他一些。

这背后的原因是什么？
如何将工作区与 ClearCase 链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T15:13:20.103

正如[Peter B.](https://stackoverflow.com/users/1581069/peter-b)所提到的，这里应该使用官方的 ClearCase：“ [Rational ClearCase SCM Adapter (For Eclipse), Version 7.6.0.0](http://www-01.ibm.com/support/docview.wss?uid=swg24025674) ”（即不是 7.0.0.2，而是 7.6+）

如果未正确安装，最安全的方法是重新安装 Eclipse（此处为 3.3+）和插件本身的新副本，检查问题是否仍然存在。

有关安装过程，请参阅“ [clear case plugin eclipse 的问题”。](https://stackoverflow.com/questions/2462979/problems-with-clear-case-plugin-eclipse/2463223#2463223)

*但是，没有*看到与此插件关联的另一个常见原因是，如果`.project`和`.classpath`文件不直接与 ClearCase 视图中的源一起使用，而是保留在视图*之外*。有关该问题的说明，
请参阅“[用于 eclipse 使用的 Clearcase 插件”。](https://stackoverflow.com/questions/3393758/clearcase-plugin-for-eclipse-usage/3393857#3393857)

# android - API-9 之前 eglSwapBuffers 的替代方案

> ID：12123034
> 
> 赞同：0
> 
> 时间：2012-08-25T14:57:39.973
> 
> 标签：android, opengl-es-2.0

`hello-gl2`我在我的 android 2.2 手机上从 NDK-r8编译了 JNI 示例。我想知道我是否可以修改它并调用`eglSwapBuffers`. 然后，我注意到这个功能在 API-9 之前是不可用的。所以我决定交叉编译`freeglut`，因为`EGL/egl.h`在 API-9 之前不可用。`eglSwapBuffers`API-9 之前有替代方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T17:38:51.017

在较低的 API 上，您必须在 Java 的 GL 上下文中创建和调用 SwapBuffers。GLSurfaceView 以简单的方式为您做到这一点，但如果您愿意，您可以重新实现它的功能。

没有其他官方方法可以做到这一点。

# javascript - 3 列中的 jTweetsAnywhere

> ID：12123039
> 
> 赞同：0
> 
> 时间：2012-08-25T14:58:08.983
> 
> 标签：javascript

我尝试使用脚本 [http://thomasbillenstein.com/jTweetsAnywhere/demo/Favorite-tweets/][1] 不错的脚本，但我想在 2 列中显示推文：来自第一列中第一个用户名的推文，第二列中第二个用户名的推文和第三列中第三个用户名的推文。现在每个用户名的推文都显示在同一列中。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:26:03.963

最简单的解决方案是使用两个/三个单独的提要（插件的实例）。另一方面，您可以编写自己的 tweetFeedDecorator。请查看[文档](http://thomasbillenstein.com/jTweetsAnywhere/#jta_documentation)和插件的源代码。

# git - 没有自己的文件夹的 git 子模块

> ID：12123041
> 
> 赞同：6
> 
> 时间：2012-08-25T14:58:12.767
> 
> 标签：git

我想制作我项目的某些部分，比如我的 jQuery 插件外部。为此，我正在研究子模块。它们看起来非常完美，因为它们可以在一个集中点进行管理和更新。我唯一的问题是，它们克隆到一个文件夹中。这给我留下了这样的结构。

```
/js
   /plugin_one
      plugin_one.js
   /plugin_two
      plugin_two.js 
```

我想要的更像是这样。

```
/js
   plugin_one.js
   plugin_two.js 
```

这可以通过子模块实现还是我使用了错误的工具？

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T15:35:40.140

子模块非常适合将多个 repo 链接到一组固定的配置中（即 SHA1 的集合，表示每个子模块的固定集，由其父 repo 记录）

但是，它们总是被克隆到自己的目录中。
他们也有很多其他的 gocha（参见“[为什么你的公司不应该使用 Git 子模块](http://codingkilledthecat.wordpress.com/2012/04/28/why-your-company-shouldnt-use-git-submodules/)”）。

一种解决方法是维护两组不同的工作树：

一个没有版本控制，所有文件放在一起。一个具有正常克隆的存储库（即在它们自己的目录中具有子模块）。

您可以在其中进行所有正常操作，但需要：

*   `--git-tree`每个 git 命令的选项，`--git-tree`指向第一组（包含*所有*文件的那个）
*   一个足够完整的`.gitignore`文件，可以忽略不属于他们特定仓库的任何文件。

这不是很令人满意，并指出子模块（即使在其他提供它们的 VCS 中——Hg 和 subrepos、ClearCase 和 UCM 组件......）应该保持分开。

因此，共享一个 JQuery 插件可能首先需要重新考虑文件组织，看看这些文件是否确实可以被视为“子模块”。

# c++ - 专门针对泛型类型的函数组

> ID：12123044
> 
> 赞同：1
> 
> 时间：2012-08-25T14:58:28.313
> 
> 标签：c++, c++11, template-specialization, sfinae, enable-if

闲置代码适用于 gcc 4.7。我的想法是我有这些通用函数，它们适用于序列、指针、元组、对、用户定义类型等等。如果其中一个函数是为一个类型定义的，那么所有函数都应该是。我遇到的问题是确定如何专门化它们。我决定定义一个专门针对每种类型的模板类，实现每个功能，然后定义一个仅转发到类内实现的自由功能。

```
#include <utility>
#include <vector>
#include <iterator>
#include <memory>
#include <iostream>
#include <algorithm>

using namespace std;

template< class M > struct Mon;

template< class X, class F, 
          class M = Mon< typename decay<X>::type > > 
auto mon( X&& x, F f ) -> decltype( M::mon(declval<X>(),f) ) {
    return M::mon( forward<X>(x), f );
}

template< class C > struct IsSeqImpl {
    // Can only be supported on STL-like sequence types, not pointers.
    template< class _C > static true_type f(typename _C::iterator*);
    template< class _C > static false_type f(...);

    typedef decltype( f<C>(0) ) type;
};

template< class C > struct IsSeq : public IsSeqImpl<C>::type { };

/* Enable if is an STL-like sequence. */
template< class C, class R > struct ESeq : std::enable_if<IsSeq<C>::value,R> { };

template< class Seq > 
struct Mon : ESeq< Seq, Seq >::type
{
    template< class S, class F >
    static S mon( const S& s, F f ) {
        S r;
        transform( begin(s), end(s), back_inserter(r), f );
        return r;
    }
};

template< class P > struct IsPtrImpl {
    template< class X > static true_type  f( X );
    template< class X > static false_type f( ... );

    typedef decltype( f(*declval<P>()) ) type;
};

template< class P > struct IsPtr : public IsPtrImpl<P>::type { };

template< class P, class R > struct EPtr : enable_if<IsPtr<P>::value,R> { };

template< class X > struct Mon< X* >
{
    template< class F, class R = decltype( declval<F>()(declval<X>()) ) >
    static unique_ptr<R> mon( X* x, F f ) {
        typedef unique_ptr<R> U;
        return x ? U( new R(f(*x)) ) : U(nullptr);
    }
};

int add_one( int x ) { return x + 1; }

int main()
{
    vector<int> v = {1,2,3,4,5};    
    int x = 5;

    auto v2 = mon( v, add_one );
    auto x2 = mon( &x, add_one );

    // Should print 2 and 6.
    cout << v2[0] << '\n';
    cout << *x2 << '\n';
} 
```

我想做的是将 Mon 专门用于更通用的类型，但是当我再次尝试使用 enable_if 继承技巧时，gcc 抱怨 Mon 已经定义。我还尝试过使第二个模板参数成为 SFINAE 的 true_ 或 false_type 的技术，如[本问题](https://stackoverflow.com/questions/11398966/template-programming-specialization-and-enable-if)中所述，但没有成功编译它。

理想情况下，每当我想到要为其定义动作的一类类型时，我应该能够编写一个 enable_if 并在模板专业化中编写整个函数组。这省去了为每个函数编写一个 enable_if 的麻烦。悲观地，我必须为每个类别中的每种可能的类型专门化该组，以便真正通用。

我可以用通用和可扩展的方式写这个吗？

PS：如果只有概念是 C++11 的一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T15:24:53.153

*注意：恐怕我没有完全理解这个问题，所以我可能会跑题......*

据我了解，您正在尝试解决编译时调度问题，基本上，您想要的结构是：

*   通用函数`foo`
*   适用于给定类型（或给定类型家族）的许多专业化

你遇到的问题是：

*   你想要多少就多少`foo_impl`，添加新类型不应该影响现有的
*   你需要选择正确的`foo_impl`。

听起来是不是很简单？

这可以通过使用特征来相对简单地完成。

```
void foo_tag_detection(...) {} // void cannot be passed down as an argument
                               // so if this is picked up we are guaranteed
                               // a compile-time error

template <typename T>
void foo(T const& t) {
    foo_impl(t, foo_tag_detection(t));
} 
```

然后我们创建一个特定于我们类型的标签，这里用于序列

```
// For sequence we'll use a "sequence_tag", it can be reused for other functions
struct sequence_tag {}; 
```

并实现序列检测，以及`foo_impl`我们需要的重载

```
template <typename Seq>
auto foo_tag_detection(Seq const& s) -> decltype(s.begin(), s.end(), sequence_tag{}) {
    return sequence_tag{};
}

template <typename Seq>
void foo_impl(Seq const& s, sequence_tag) { ... } 
```

*请注意，`decltype`此处用于触发 SFINAE 取决于我需要`s`支持的操作；这是一个非常强大的机制，而且非常简洁。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T16:51:10.567

通常，该工作的工具是模板专业化，并在 SFINAE 的帮助下进行。下面是一些未经测试的代码，让您体验一下它的样子：

```
/* Reusable utilities */

template<typename... T>
struct dependent_false_type: std::false_type {};

enum class enabled;

template<typename Cond>
using EnableIf = typename std::enable_if<Cond::value, enabled>::type;

template<typename T>
using Bare = typename std::remove_cv<
    typename std::remove_reference<T>::type
>::type;

/* Front-end */

// Second parameter is an implementation detail
template<typename T, typename Sfinae = enabled>
struct Mon {
    // It's not allowed to use the primary template
    static_assert( dependent_false_type<T>::value
                 , "No specialization of Mon found" );

    // In case a compiler forgets to honour the assertion
    template<typename... Ignored>
    static void mon(Ignored const&...) = delete;
};

// Front-end that delegates to the back-end
template<
    typename T
    , typename F
    , typename B = Bare<T>
>
auto mon(T&& t, F&& f)
-> decltype( Mon<B>::template mon(std::declval<T>(), std::declval<F>()) )
{ return Mon<B>::template mon(std::forward<T>(t), std::forward<F>(f)); }

/* Back-end for pointers */

template<typename T>
struct Mon<T, EnableIf<std::is_pointer<T>>> {
    // Implement somewhere
    template<
        typename P
        , typename F
        , typename R = decltype( std::declval<F>()(*std::declval<P>()) )
    >
    static std::unique_ptr<R> mon(P&& p, F&& f);
};

/* Back-end for ranges */

// Boost.Range does provide range concepts but not range traits
// so let's roll our own crude is_range

namespace detail {

// actual range concepts of Boost.Range also require some member types
// left as an exercise to the reader
template<typename T>
is_range_tester {
    template<
        typename T
        , typename = decltype( boost::begin(std::declval<T>()) )
        , typename = decltype( boost::end(std::declval<T>()) )
    >
    static std::true_type test(int);

    template<typename...>
    static std::false_type test(long, ...);
};

} // detail

template<typename T>
struct is_range
    : decltype( detail::is_range_tester<T&>::template test<T>(0) )
{};

template<typename T>
struct Mon<T, EnableIf<is_range<T>>> {
    /* implementation left as an exercise */
}; 
```

这也是可扩展的。最大的障碍是每个专业的条件不能重叠。

# actionscript-3 - 数学隐藏碰撞

> ID：12123047
> 
> 赞同：0
> 
> 时间：2012-08-25T14:58:38.740
> 
> 标签：actionscript-3, math, vector-graphics

![例子](../Images/2569146e0b83b3f9c6511109b2f0417b.png)

我正在开发一个使用 tile 引擎（自制）的项目，我的下一个任务是创建一个 AI（除了其他已完成的 AI），这个很棘手，因为 AI 应该只在玩家是在AI的视线中。在计算范围（以瓷砖为单位）[1 瓷砖 = 32*32] 之后，尝试使用循环。
然后我想到了创建一个直线方程。我在这里，对数学感到困惑。

知道我如何计算它是否与这些“隐藏”图块之一重叠？
请注意，我只想使用数学！

```
TileInfo.tileData[la[floor(y / 32)][floor(x / 32)]];
//la -> array of tile positions, if it's >0 then there is a tile. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T20:59:40.627

假设观察者在位置`(x1,y1)`，目标在`(x2,y2)`。现在，我假设`n`沿着`x`和`m`沿着有一组连续的瓷砖`y`。第一个图块的左下角位于位置`(x0,y0)`。瓷砖的大小是`d`沿着`x`和`t`沿着`y`。现在数学：

连接查看器和目标的线是

`y = y1 + (y2 - y1) * (x - x1) / (x2 - x1)`

瓷砖角在点`p1 = (x0,y0)`；`p2 = (x0 + n * d, y0)`; `p3 = (x0 + n * d, y0 + m * t)`; `p4 = (x0, y0 + m * t)`. 现在的工作是确定该线是否穿过连接两个连续角的 4 个线段中的任何一个。让我们采用由 定义的 p1 和 p2 之间的线段（水平线）`y = y0`。如果将其设置为直线方程，您可以找到`x`我命名的可能截取`xi`：

`y0 = (y2 - y1) * (xi - x1) / (x2 - x1) + y1`

您可以反转这个等式并找到 possibx：

`xi = x1 + (y0 - y1) * (x2 - x1) / (y2 - y1)`

现在，如果`xi > x0`你`xi < x0 + n * d`有这个段的拦截。否则你有一个自由的视线。

对直线由`p2 -> p3: x = x0 + n * d`;定义的其他三个线段执行相同的操作 `p3 -> p4: y = y0 + m * d`; 和`p4 -> p1: x = x0`。

请注意，当线段是水平的（`y = const`）时，您必须将其放在`y`视线直线上，计算`x`并将其`x`与截距进行比较。如果线段是垂直的（`x = const`），那么您必须放入`x`直线方程，计算`y`并检查它是否落在区间内。

最后一点是，您必须特别注意`x1 = x2`或的情况`y1 = y2`。这是垂直和水平视线，可能会导致在上述等式中除以零。解决办法：分别处理这些情况。

# java - Red 5 服务器中的网络连接失败

> ID：12123049
> 
> 赞同：0
> 
> 时间：2012-08-25T14:59:34.170
> 
> 标签：java, php, html, media, red5

我是red5服务器的新手。当我尝试通过使用 red 5 插件在 eclipse 中创建项目来运行 red5 时，它运行时出错。但是当我尝试运行客户端时，它显示连接不成功。请在这件事上帮助我。

在那里运行时我也收到此错误“[INFO] [NioProcessor-2] org.red5.server.net.rtmp.RTMPHandler - Scope default1 not found on localhost”

请帮帮我尼克先生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:26:22.963

您正在尝试连接到 Red5 中不可用的范围“default1”。也许您尝试连接到 Red5 中预装的 Web 应用程序之一。或者看看示例应用程序，例如 oflaDemo 是一个很好的开始示例。

# heroku - Heroku 没有永久文件系统？

> ID：12123050
> 
> 赞同：17
> 
> 时间：2012-08-25T15:00:00.237
> 
> 标签：heroku

我目前在 Heroku 上托管的应用程序允许用户提交照片。最初，我正在考虑将这些照片存储在文件系统中，因为将它们存储在数据库中显然是不好的做法。

然而，Heroku 上似乎没有永久的文件系统，只有一个短暂的文件系统。这是真的吗？如果是的话，我在存储照片和其他文件方面有哪些选择？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-25T15:47:11.330

是真的。Heroku 允许您创建云应用程序，但这些云应用程序不是“永久的”——它们是可以在 Amazon 的 EC2 上多次复制的实例（或“slug”）（这就是为什么使用 Heroku 可以轻松进行扩展）。如果您要推送应用程序的新版本，那么 slug 将被重新编译，并且您在之前的实例中保存到文件系统的所有文件都将丢失。

您最好的选择（无论是在 Heroku 还是其他方式）是将用户提交的照片保存到 CDN。由于您在 Heroku 上，而 Heroku 使用 AWS，我推荐使用 Amazon S3，可选择启用 CloudFront。

这是有益的，不仅因为它绕过了 Heroku 的短暂“限制”，还因为 CDN 速度更快，将为您的 web 应用程序和用户体验提供更好的服务。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-25T17:55:16.890

根据您使用的技术，您最好的选择可能是将上传流式传输到 S3（亚马逊的存储服务）。您可以通过客户端库与 S3 交互，以简化发布和检索文件。Boto 是 Python 的一个示例客户端库——它们适用于所有流行的语言。

要记住的另一件事是 Heroku 文件系统也不是共享的。这意味着您必须使用与处理上传的应用程序相同的应用程序将文件放入 S3（而不是说，一个工作进程）。如果可以，请尝试将上传内容加载到内存中，切勿将其写入磁盘并直接发布到 S3。这将提高您的上传速度。

因为 Heroku 托管在 AWS 上，所以到 S3 的流以非常高的速度发生。在本地开发时请记住这一点。

# java - 玩！框架 - Evolutions 的数据库问题

> ID：12123052
> 
> 赞同：11
> 
> 时间：2012-08-25T15:00:08.013
> 
> 标签：java, playframework-2.0, web-development-server

我正在使用播放！框架 2.0，我被困在一个涉及数据库的烦人问题上。

假设我有一个`User`（扩展`Model`）类，它的属性很少（、、、`first_name`等`last_name`）。 `email``password`

在某些时候，我想添加一个新属性，比如说`last_ip`（它是什么并不重要）。所以，我将属性添加到`User`类中，编译并运行。

问题是：我收到关于数据库更改的红色警报（显然），它要求我按**“应用更改”**（如果我没记错的话）。那很好但是！**所有的数据库记录都被删除了**！

总之：我想要一个新字段，但我不想丢失我已经添加到数据库中的所有记录。这可能吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-26T14:23:39.287

First you need to disable automatic generation of Evolution files by deleting the first 2 commented lines of the `conf/evolutions/default/1.sql`:

```
# --- Created by Ebean DDL
# To stop Ebean DDL generation, remove this comment and start using Evolutions

# --- !Ups
... 
```

Then, you need to create a second file, called `conf/evolutions/default/2.sql` containing your update on the database schema with an Ups and a Downs section:

```
# --- !Ups
ALTER TABLE USER ADD COLUMN last_ip varchar(30) DEFAULT NULL;

# --- !Downs

ALTER TABLE USER DELETE COLUMN last_ip; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T15:04:58.893

你可能正在做的是应用破坏性进化。如果你查看 1.sql（或任何你的进化文件），在 DOWNS 下你有像“DROP DATABASE X”这样的语句。每当 Play 检测到进化文件中的更改时，它都会运行所有向下的进化，然后重新应用向上的进化，从而导致您的所有数据丢失。

这里有更多信息：[http ://www.playframework.org/documentation/2.0.2/Evolutions](http://www.playframework.org/documentation/2.0.2/Evolutions)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-26T08:46:55.120

我建议你看看[Liquibase](http://www.liquibase.org)。Liquibase 处理数据库更改，非常灵活并且独立于数据库。我在我的应用程序中使用它来确保当我应用数据库更改时不会删除任何东西。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-03T23:52:41.637

您可以通过在 application.conf 中设置 evolutionplugin=disabled 来禁用 Evolutions

# html - 如何使文章和旁白在一个部分中水平显示相同

> ID：12123053
> 
> 赞同：2
> 
> 时间：2012-08-25T15:00:30.700
> 
> 标签：html, css

这是我的html代码

```
<section id="usercontent">
        <h1>Section - User Content</h1>
        <article>
        <h1>Article - Left Content</h1>

        </article>
        <aside>
        <h1>Aside - Right Content</h1>

        </aside>
    </section> 
```

这是我的CSS代码

```
section#usercontent {
    border:1px solid black;
    width:598px;
}
section#usercontent article {
    height:100px;
    width:146px;
    float:left;
    border:1px solid black;
}
section#usercontent aside {
    height:100px;
    width:450px;
    border:1px solid black;
} 
```

这是第一个 css 的输出，但它是错误的，因为左侧仍有空间。

![在此处输入图像描述](../Images/786a7588df984f4b667a02e9cfe2f742.png)

这是我的第二个输出，我只是改变我的 float:left; 浮动：section#usercontent 文章的右侧，它几乎是正确的，但文章一侧在右侧（必须在左侧），而侧面在左侧（必须在右侧）我尝试也将浮动放在除了section#usercontent，但它变得最糟糕，我试过很多次这是最接近的。需要任何可以解决此问题的建议，非常感谢！:)

![在此处输入图像描述](../Images/656756a350c7593b8c58d2208772eb2b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T15:13:24.887

看看这个：http: [//jsfiddle.net/3m9fm/1/](http://jsfiddle.net/3m9fm/1/)

我将您的用户内容部分的宽度更改为 600 像素。该部分的宽度不足以容纳文章和旁白。将文章向左浮动，在右侧浮动，不要忘记使用 clear:both 清除浮动。（我已经在 jsfiddle 中为您添加了该内容）。如果您的 usercontent-width 是固定的，请将文章或放在一边小一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T15:14:18.510

CSS：

```
section#usercontent {
    border:1px solid black;
    width:600px;
}
.clear {
    clear: both;
    visibility: hidden;
}
section#usercontent article {
    height:100px;
    width:146px;
    float:left;
    border:1px solid black;
}
section#usercontent aside {
    height:100px;
    float: left;
    width:450px;
    border:1px solid black;
}​ 
```

的HTML：

```
<section id="usercontent">
    <h1>Section - User Content</h1>
    <article>
    <h1>Article - Left Content</h1>

    </article>
    <aside>
    <h1>Aside - Right Content</h1>

    </aside>
<div class = "clear"></div>
</section>​​​​​​​​ 
```

我让它们都向左浮动，添加了一个“清晰”的 div 并调整了宽度以正确容纳列。这是你需要的吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T15:18:36.243

**CSS**

```
#usercontent
{
    border:1px solid black;
    width:598px;
}
#usercontent article
{
    height:100px;
    width:146px;
    float:left;
    border-color:black;
    border-style:solid;
    border-width:1px 1px 0 0;
}
#usercontent aside
{
    height:100px;
    width:450px;
    border-top:1px solid black;
    float:left;
}
.clearfix:after
{
    clear:both;
    content:'.';
    display:block;
    font-size:0;
    height:0;
    line-height:0;
    visibility:hidden
}
.clearfix
{
    display:block;
    zoom:1
}​ 
```

**HTML**

```
<section id="usercontent" class="clearfix">
    <h1>Section - User Content</h1>
    <article>
        <h1>Article - Left Content</h1>
    </article>
    <aside>
        <h1>Aside - Right Content</h1>
    </aside>
</section>​​​​​​​​ 
```

**[演示](http://jsfiddle.net/m3nKR/)**

# jquery - 来自 WCF 服务的 jQuery 错误 responseText 中的奇怪行为

> ID：12123054
> 
> 赞同：3
> 
> 时间：2012-08-25T15:00:31.920
> 
> 标签：jquery, asp.net, wcf

我使用以下方法在 IIS 中运行 WCF 服务：

```
public void Test()
{
    HttpContext.Current.Response.StatusCode = 500;
    HttpContext.Current.Response.Write("You cannot do this.");
} 
```

在我的客户端 HTML 页面上，我有以下内容：

```
$(document).ready(function () {
        $.ajax({
            type: "POST",
            url: 'MyService.svc/Test',
            data: '',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                alert('success');
            },
            error: function (result) {
                alert(result.responseText);
            }
        });
}); 
```

调用错误回调，但 responseText 始终只有两个字符：“Yo”。我检查了响应，它似乎只返回了 2 的内容长度。这是怎么回事？为什么我没有收到回复的全部内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T04:08:36.583

当您引发异常时，您的消息是否会被截断？

```
public void Test()
{
    HttpContext.Current.Response.StatusCode = 500;
    throw new Exception("This is a test");
} 
```

# xcode - Xcode 4.4 - 未找到图标集

> ID：12123059
> 
> 赞同：1
> 
> 时间：2012-08-25T15:00:56.770
> 
> 标签：xcode, macos, cocoa, icons

我正在为 Mac 开发一个应用程序，并且我创建了一个图标集来为我的应用程序提供高分辨率图标。当我将它拖到项目并运行时，Xcode 给我一个错误，告诉我没有找到图标集，但它在那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T20:12:53.340

这是一个愚蠢的建议，但它在过去为我解决了许多与导入艺术品或其他资源有关的问题：

你试过清洁和建筑吗？（命令+SHIFT+K 和命令+B）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T07:02:48.223

奇怪...问题通过将我的整个项目文件夹从另一个文件夹移动到我的桌面来解决。现在它工作正常。

# jquery - Firefox 中的自动完成 jquery 工作不在资源管理器中

> ID：12123066
> 
> 赞同：0
> 
> 时间：2012-08-25T15:01:36.400
> 
> 标签：jquery, jquery-ui, autocomplete

在这个脚本中[http://jsfiddle.net/c4dSX/6/](http://jsfiddle.net/c4dSX/6/)自动完成城市在 Firefox 中运行良好而不是在资源管理器中......为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T15:48:37.187

您的错误是尝试从 IE 进行跨域调用，但找不到传输。[在Ajax 调用](http://api.jquery.com/jQuery.ajax/)中使用 error 属性

```
error(jqXHR, textStatus, errorThrown) 
```

阅读几篇文章似乎 JSONP 是您最好的选择。我一直试图让它在您的示例中工作，但也许该服务不提供 JSONP，但我没有对该服务进行太多调查。

看看这些关于问题的帖子 [jQuery Call to WebService return “No Transport” error](https://stackoverflow.com/questions/5241088/jquery-call-to-webservice-returns-no-transport-error) ['No Transport' Error w/jQuery ajax call in IE](https://stackoverflow.com/questions/9160123/no-transport-error-w-jquery-ajax-call-in-ie)

# c++ - 模板中的数据类型错误

> ID：12123067
> 
> 赞同：0
> 
> 时间：2012-08-25T15:02:05.487
> 
> 标签：c++, templates

请看下面的代码。

**主文件**

```
#include <iostream>
#include "Maximum.h"

using namespace std;

int main()
{

    Maximum max;

    int int1, int2, int3;

    cout << "Input three integers: ";
    cin >> int1 >> int2 >> int3;    
    cout << "The maximum value is: " << max.maximum(int1,int2,int3) << endl;

    double double1, double2, double3;

    cout << "Input three doubles: ";
    cin >> double1 >> double2, double3;    
    cout << "The maximum value is: " << max.maximum(double1, double2, double3) << endl;

    char char1, char2, char3;

    cout << "Input three char values: ";
    cin >> char1 >> char2 >> char3;
    cout << "The maximum value is: " << max.maximum(char1,char2,char3) << endl;

} 
```

**最大值.h**

```
template <class T>

class Maximum
{
    public:
        Maximum();
        T maximum(T value1, T value2, T value3);
}; 
```

**最大值.cpp**

```
#include  <iostream>
#include "Maximum.h"

Maximum::Maximum()
{

}

    T Maximum::maximum(T value1, T value2, T value3)
    {
         T maximumValue = value1;

        if(value2>maximumValue)
        {
            maximumValue = value2;
        }

        if(value3>maximumValue)
        {
            maximumValue = value3;
        }

        return maximumValue;
    } 
```

在 maximum.cpp 中，它给出“'T' 没有命名类型”错误。由于它是用户定义的，它可能无法识别它。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T15:46:48.103

类模板的成员函数本身就是模板，必须这样定义：

```
template <typename T>   // <-- Add this
Maximum::Maximum()
{
    // code
}

template <typename T>   // <-- Add this
T Maximum::maximum(T value1, T value2, T value3)
{
    // code
} 
```

一旦你解决了这个问题，你可能会得到一些链接器错误，因为必须（通常）在每个使用它们的翻译单元中定义模板。解决方法是将定义移动到头文件中。有关完整详细信息，请参阅[此问题](https://stackoverflow.com/questions/495021)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T15:10:49.130

在您的 Maximum.cpp 中，您的构造函数和函数应该像这样调用

```
template <class T>
Maximum<T>::Maximum()
{

}

template <class T>
T Maximum<T>::maximum(T value1, T value2, T value3)
{
        T maximumValue = value1;

    if(value2>maximumValue)
    {
        maximumValue = value2;
    }

    if(value3>maximumValue)
    {
        maximumValue = value3;
    }

    return maximumValue;
} 
```

在您的主要功能中，您应该以这种方式调用该类

```
 Maximum<int> max; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T15:21:13.473

您对模板的理解是错误的。

首先，像这样的模板需要在使用前不知道的“用户定义”类型。所以它们不能在编译器必须知道所有内容的 .cpp 文件中找到（嗯，实际上它们可以，但现在让我们保持简单）。

因此，您的所有模板代码都应该在头文件中。这些头文件必须与使用您的代码的人共享。对于包含模板头的每个 CPP 文件，一切都将是已知的，并且可以进行编译。

然后，您正在使用一个类，而您需要的是一个函数。

因此，您的最终代码应限于：

最大.h。

```
template<class T>
T Maximum(T v1, T v2, T v3) {
     // code in your member function
} 
```

主要.cpp：

```
#include <iostream>
#include "Maximum.h"

using namespace std;

int main()
{
    double d1, d2, d3;
    double max = Maximum(d1, d2, d3);

    ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T15:27:05.343

首先要使您的代码正常工作，请尝试以下代码。我做了一些改变。

**主文件**

```
#include <iostream>
#include "Maximum.h"

using namespace std;

int main()
{

Maximum<char> max; // here you must explicitly specify template argument, I choosed "char"

int int1, int2, int3;

cout << "Input three integers: ";
cin >> int1 >> int2 >> int3;
cout << "The maximum value is: " << max.maximum(int1,int2,int3) << endl;

double double1, double2, double3;

cout << "Input three doubles: ";
cin >> double1 >> double2, double3;
cout << "The maximum value is: " << max.maximum(double1, double2, double3) << endl;

char char1, char2, char3;

cout << "Input three char values: ";
cin >> char1 >> char2 >> char3;
cout << "The maximum value is: " << max.maximum(char1,char2,char3) << endl;

} 
```

**最大值.cpp**

```
#include  <iostream>
#include "Maximum.h"
template <class T> // add this line
Maximum<T>::Maximum()
{

}
template <class T> // you must add this line
T Maximum<T>::maximum(T value1, T value2, T value3) // also here Maximum<T>:: and not Maximum::
{
     T maximumValue = value1;

    if(value2>maximumValue)
    {
        maximumValue = value2;
    }

    if(value3>maximumValue)
    {
        maximumValue = value3;
    }

    return maximumValue;
}

template class Maximum<char>;// you have to explicitly instantiate Maximum<char> for linking time. 
```

您必须知道在**Main.cpp**中没有类模板的定义，`Maximum`因此即使您调用`Maximum<char>`也不会生成定义，因为您的类模板定义`Maximum`在**Maximum.cpp**中。并且因为您没有`MAximum<char>`在**Maximum.cpp中使用，所以不会在****Maximum.cpp**中生成链接时间的定义。因此，您必须显式实例化`Maximum<char>`链接时间。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-25T15:46:15.287

首先，将maximum.cpp中的代码复制到maximum.h的末尾，然后删除maximum.cpp。编译器必须在使用模板的任何地方查看代码，因此模板代码应该几乎总是在定义模板的标头中。

其次，将成员函数的定义（您刚刚复制的代码）标记为模板：

```
template <class T>
Maximum<T>::Maximum() { } 
```

等等

第三，注意构造函数不能返回值；中的`return`陈述`Maximum::Maximum(T value1, T value2, T value3)`是非法的。添加类型的数据元素`T`并将结果存储在那里；然后添加一个访问器，以便该类的用户可以获取存储的值。

或者按照另一个答案中的建议，让它成为一个函数。这是一个更好的解决方案。

# php - 运行“composer update/install”后如何正确更改composer或Symfony2的功能？

> ID：12123069
> 
> 赞同：13
> 
> 时间：2012-08-25T15:02:06.200
> 
> 标签：php, symfony, composer-php

在我运行 Composer 之后执行了一些脚本。

问题是他们做了我不想要的事情，比如`php assets:install`（没有--symlink）。

所以我需要能够删除它，或者添加我自己的脚本来做`php assets:install --symlink`.

这样做的正确方法是什么？

**编辑**

在`Sensio\Bundle\DistributionBundle\Composer\ScriptHandler::installAssets()`我可以看到符号链接的选项：

```
if ($options['symfony-assets-install'] == 'symlink') {
    $symlink = '--symlink '; 
```

可以在某处配置吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-25T15:10:54.700

要使用符号链接安装资产，请以这种方式编辑您的 composer.json（最后）

```
"extra": {
    "symfony-app-dir": "app",
    "symfony-web-dir": "web",
    "symfony-assets-install": "symlink"
} 
```

然后像往常一样运行作曲家。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-03T20:49:24.783

如果您使用 composer 部署到生产环境，您可能希望将环境变量设置`SYMFONY_ASSETS_INSTALL`为`symlink`。这种方式生产仍然使用硬拷贝，这是推荐的选项。

# xml - Spring 返回 application/*+xml 而不是 application/xml

> ID：12123072
> 
> 赞同：1
> 
> 时间：2012-08-25T15:02:29.890
> 
> 标签：xml, spring, api, rest, spring-mvc

我有一个宁静的 API，应该返回 xml 或 json 响应。配置如下：

```
<bean       class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
        <property name="ignoreAcceptHeader" value="false" />
        <property name="mediaTypes">
            <map>
                <entry key="xml" value="application/xml" />
                <entry key="json" value="application/json" />
            </map>
        </property>
        <property name="defaultViews">
            <list>
                <bean
                        class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" />
                <bean class="org.springframework.web.servlet.view.xml.MarshallingView">
                        <property name="marshaller" ref="objectXmlMarshaller" />
                </bean>
            </list>
        </property>
</bean> 
```

唉，我们得到的响应是 application/*+xml 而不是 application/xml。这会导致 chrome（或其他浏览器）下载文件而不是显示它。

有任何解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T19:34:07.307

您可以尝试使用*@RequestMapping*注释的*“produces”*属性显式指定响应类型。例如：

 *```
@RequestMapping(value="rest/somePath", method = RequestMethod.GET, produces="application/xml")
public SomeObject restMethod(...necessary parametes...) {
    // Do necessary evaluation and return object.
} 
```

[在这里](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-requestmapping-produces)您可以找到 spring 参考文档中的相关部分。*

# c# - 不同环境下不同尺寸的Winforms

> ID：12123073
> 
> 赞同：12
> 
> 时间：2012-08-25T15:02:40.590
> 
> 标签：c#, winforms

一段时间以来，一些一直在使用我的应用程序的人抱怨 WinForm 的绘制方式出现了一些奇怪的行为。形式有固定的`splitcontainer`。`panel1`直到今天，我都无法重现他们的问题。

我刚刚在运行 32 位 Win7 企业版的笔记本电脑上安装了该应用程序。（应用程序在我运行 64 位版本的 Win7 ent 的计算机上构建和运行没有问题。）

为了查看发生了什么，我将项目文件复制到笔记本电脑并使用 Visual Studio 2012 打开它以查看发生了什么。但是，我惊呆了，因为我不知道该怎么办。

在开发上。机器（我的64位win7 ent），表格（和拆分容器）尺寸规格如下：

*   表格高度：383
*   表格宽度：707
*   拆分容器高度：321
*   拆分容器宽度：691
*   分路器距离：380

当我在笔记本电脑上加载项目时，规格更改为：

*   表格高度：419
*   表格宽度：859
*   拆分容器高度：397
*   分体容器宽度：921
*   分路器距离：380

现在我终于可以理解有些人无法以应有的方式看到该程序的挫败感。

在 32 位机器上，分离器部分覆盖了几个按钮，这显然使程序难以使用，因为它们看不到文本。

发生这种情况有什么原因吗？

我的意思是，如果将原始代码设置为特定的大小值，那么无论程序在哪里运行都不应该是这样吗？（考虑到用户当然不会调整大小）。

然后最重要的是，有什么方法可以解决这个问题而不必构建两个单独的版本？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-25T15:40:10.413

他们可能以不同的 DPI（每英寸点数）运行他们的系统，因此由于缩放选项和对字体大小的影响，这正在改变控件在 Windows 窗体上的定位和缩放方式。

*   [http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/72995739-60a4-44cd-ba51-fc8be726cba4](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/72995739-60a4-44cd-ba51-fc8be726cba4)

*   [http://discuss.joelonsoftware.com/default.asp?dotnet.12.664790.5](http://discuss.joelonsoftware.com/default.asp?dotnet.12.664790.5)

你可以看看控制面板| 外观和个性化 | 显示以查找这些设置：

*   更小 - 100% = 96 DPI
*   中等 - 125% = 120 DPI
*   更大 - 150% = 144 DPI

如果 DPI 有影响，您可以查看 WinForms 缩放选项以及适当调整的内容。

*   [http://msdn.microsoft.com/en-us/library/ms229605.aspx](http://msdn.microsoft.com/en-us/library/ms229605.aspx)

# r - 在 SAS 或 R 中读取原始数据

> ID：12123076
> 
> 赞同：1
> 
> 时间：2012-08-25T15:02:59.067
> 
> 标签：r, sas

对于我们的分析，我们需要从 csv (xls) 读取原始数据并将其转换为 SAS 数据集，然后再进行分析。

现在，问题是这些原始数据通常有两个问题： 1\. 列的顺序有时会发生变化。因此，如果在早期我们有按变量顺序排列的列 A，然后是 B，然后是 C，等等。它可能会变为 B，然后是 C，然后是 A。 2\. 有诸如“#”或“”之类的外来元素。 ”，或“一些字母”等。现在，我们必须先清理原始数据，然后再读入 SAS。这需要相当长的时间。有什么方法可以在读取数据之前清理 SAS 系统本身的数据。如果我们可以用 SAS 代码对数据进行校正，那将节省相当多的时间。

这是示例：

**第 1 阶段：**我以这种格式获取 Data1.csv 中的数据。在数字列 B 中，我有“#”和“.”。还有C列，也是数字，我有“g”。如果我使用 PROC IMPORT 或 Infile 语句导入 Data1.csv，则 B & C 列中的这些外来元素将保留。这里的问题是如何做到这一点？我可以使用 If STATEMENT。但问题是外来元素太多（例如，不是“#”、“.”、“g”，我可能会得到其他外来元素，如“$”、“h”等）如果有什么办法可以每次在 SAS 中导入原始数据时，我都无需使用 IF STATEMENT 指定它来检测和删除外来元素的代码。

```
 A    B   C
Name1   1   5
Name2   2   6
Name3   3   4
Name4   #   g
Name5   5   3
Name6   .   6 
```

**第 2 期：**在此期间，我得到了 DATA2.csv，如下所示。当我使用 INFILE 语句时，我指定应使用特定名称读取第一个 A，然后使用特定名称读取 B，然后是 C。在第二个周期中，当我获得数据时，B 被赋予第一个。因此，当 SAS 读取数据时，我使用的是 B 而不是 A。所以，我必须每次都检查变量与前一阶段数据的顺序并在使用 infile 语句读取数据之前对其进行更正。由于变量的数量太大，以这种方式验证列排序非常耗时（有时令人沮丧）。是否有 SAS 代码，SAS 会自动读取 A，然后是 B，然后是 C，即使它不是这个顺序？

```
B   A   C
1   Name1   5
2   Name2   6
3   Name3   4
#   Name4   g
5   Name5   3
.   Name6   6 
```

尽管我主要在分析目的中使用 SAS。但我可以使用 R 来清理数据，然后在 SAS 中读取数据以进行进一步分析。所以 R 代码也很有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T19:48:46.060

在 R 中，当您指定列是特定类时，您会提高文件读取速度。使用提供的示例（3 列，中间一列是“字符”，您可以使用以下代码：

```
 dat <- read.csv( filename, colClasses=c("numeric", "character", "numeric"), comment.char="") 
```

“#”和“.” 在数字列中遇到时将变为 NA 值。上面的代码删除了注释字符的默认规范，即“#”。如果你想要“#”和“.” 要强制转换为 NA_character_ 的字符列中的条目，您可以使用以下代码：

```
dat <- read.csv( filename, 
                 colClasses=c("numeric", "character", "numeric"),
                 comment.char="",
                 na.strings=c("NA", ".", "#") ) 
```

默认情况下，该`header=TRUE`设置由 read.csv() 假定，但如果您使用 read.table()，则需要`header=TRUE`使用您显示的两个文件结构进行断言。这里有进一步的文档和[读取 Excel 数据的工作示例：](http://rwiki.sciviews.org/doku.php?id=tips%3adata-io%3ams_windows)但是，我的建议是按照您计划和使用 CSV 传输的方式进行操作。通过这种方式，您将更快地看到 Excel 对日期和缺失值所做的棘手事情。建议您将数据格式更改为与 POSIX 标准一致的自定义“yyyy-mm-dd”，在这种情况下，您还可以指定“日期”分类列并跳过将字符分类列转换为默认的 Excel 格式（所有这些都是错误的）转换为日期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T18:18:19.317

是的，您可以使用 SAS 进行您想象的任何类型的“数据清理”。SAS DATA 步语言充满了执行此类操作的功能，但没有灵丹妙药；您需要自己编写代码。

`csv`文件只是一个纯文本文件（与文件非常不同）`xls`。通常，文件中的第一行`csv`包含列名，数据从第二行开始。如果使用`PROC IMPORT`，SAS 将使用第一行来构造变量名，并尝试通过扫描文件的前几行来确定数据类型。例如：

```
proc import datafile='c:\temp\somefile.csv'
     out=SASdata
     dbms=csv replace;
run; 
```

或者，您可以使用数据步骤读取文件。这需要您提前知道文件布局。例如：

```
data SASdata;
   infile 'c:\temp\somefile.csv' dsd firstobs=2 lrecl=32767 truncover;
   informat A $50.; /* A character variable with max length 50 */
   informat B yymmdd10.; /* A date presented like 2012-08-25 */
   informat C dollar12.; /* A number containing dollar sign, commas, or decimals */

   input A B C;  /* The order of the variables in the file */

   if B = . then B = today(); /* A possible data cleaning statement */
run; 
```

请注意，INPUT 语句控制变量在文件中存在的顺序。关键是您使用的代码必须与您处理的每个文件的布局相匹配。

这些只是一般性评论。如果您遇到问题，请回复更具体的问题。

**针对已更新问题**的更新：原始数据文件中的变量必须以与每个文件中存在的顺序相同的顺序列在 INPUT 语句中。此外，您需要直接定义列类型，并建立它们需要遵循的任何规则。无法自动执行此操作；每个文件大都分开处理。

在这种情况下，假设您的变量是 A、B 和 C，其中 A 是字符，B 和 C 是数字。该程序可能会处理这两个文件并将它们添加到历史数据集（假设为 ALLDATA）：

```
data temp;
   infile 'c:\temp\data1.csv' dsd firstobs=2 lrecl=32767 truncover;
   /* Define dataset variables */
   informat A $50.;
   informat B 12.;
   informat C 12.;
   /* Add a KEEP statement to keep only the variables you want */
   keep A B C;

   input A B C;
run;
proc append base=ALLDATA data=temp;
run;
data temp;
   infile 'c:\temp\data2.csv' dsd firstobs=2 lrecl=32767 truncover;
   informat A $50.;
   informat B 12.;
   informat C 12.;

   input B A C;
run;
proc append base=ALLDATA data=temp;
run; 
```

请注意，每个数据步骤的“数据定义”部分是相同的；唯一的区别是`INPUT`语句中列出的变量的顺序。请注意，因为变量 A 和 B 被定义为数字，所以当读取这些无效字符（# 和 g）时，这些值将存储为缺失值。

在您的情况下，我将创建一个模板 SAS 程序，以按照您期望的顺序定义您想要的所有变量。然后使用该模板按照该文件中变量的顺序导入每个文件。设置模板程序可能需要一些时间，但要运行它，您只需要修改 INPUT 语句。

# haskell - Text.Printf.printf 的函数组合

> ID：12123082
> 
> 赞同：5
> 
> 时间：2012-08-25T15:04:09.710
> 
> 标签：haskell, printf, ghc, polyvariadic

我想定义一个记录器函数，比如

```
myPutStrLn = putStrLn . (++) "log: "
main = do myPutStrLn "hello" 
```

这很好。现在我想用 格式化提供的字符串`printf`，像这样

```
myPutStrLn $ printf "test %d" (23 :: Int) 
```

伟大的！由于我经常使用这种模式，因此我想将其`printf`纳入记录器功能：

```
myPrintf = logger . printf
  where
    -- note, this is just an example. should be
    -- replaceable with any function with this
    -- typesignature
    logger :: String -> IO ()
    logger = putStrLn . (++) "log: "

main = myPrintf "test %d" (23 :: Int) 
```

不幸的是，这失败了

```
The function `myPrintf' is applied to two arguments,
but its type `String -> IO ()' has only one
In a stmt of a 'do' block: myPrintf "test %d" (23 :: Int)
In the expression: do { myPrintf "test %d" (23 :: Int) }
In an equation for `main':
    main = do { myPrintf "test %d" (23 :: Int) } 
```

GHC 推断`myPrintf :: String -> IO ()`，所以显然有问题。我发现了有关[Polyvariadic composition](http://okmij.org/ftp/Haskell/polyvariadic.html#polyvar-comp)的一些信息，但我无法将其应用于我的问题。我什至不确定它是否能解决我的问题。

该代码也可通过[gist](https://gist.github.com/3465511)获得。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T17:09:32.613

您可以使用 hPrintf 和 stdout 句柄来定义您的函数。

像这样，函数 myPrintf 的结果仍然是 HPrintfType 类的实例

```
myPrintf::  (HPrintfType c) => String -> c
myPrintf = (hPrintf stdout) . (printf "log:%s")

main = myPrintf "test %d" (23 :: Int) 
```

* * *

printf 函数的多变量形式仅因为您具有此实例定义而起作用：

```
(PrintfArg a, PrintfType r) => PrintfType (a -> r). 
```

在每个新的 PrintfArg 参数中，如果可能，类型推断返回一个 PrintfType 类类型。

为了工作，您的记录器功能将具有以下类型：

```
logger :: (PrintfType c) => String -> c 
```

但是编译器会失败，因为函数返回一个 IO () 而不是更通用的类型类 PrintfType。

在我看来，只有对模块 Text.Printf 的修改可以帮助您，因为您无法创建 PrintfType 的新实例，因为某些方法是隐藏的

# javascript - 正则表达式删除之后的所有内容:(包括:)

> ID：12123085
> 
> 赞同：11
> 
> 时间：2012-08-25T15:04:16.163
> 
> 标签：javascript, regex

嘿大家我有一个字符串，如：`Foundation: 100`

我想使用 JS 正则表达式删除`:`包括 (:)之后的所有内容

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-25T15:06:05.250

```
var text = "Foundation: 100";
text = text.replace(/:.*$/, "");
console.log(text);
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-25T15:36:36.923

对于您的示例，您可以调用`.split(":")`您的字符串，然后使用选择第一个数组元素`"[0]"`

```
var whole_text = "Foundation: 100";
var wanted_text = whole_text.split(":")[0]
console.log(wanted_text) 
```

# mysql - 如何从数据库中删除 \r\n 和多个反斜杠，以及如何防止它？

> ID：12123086
> 
> 赞同：2
> 
> 时间：2012-08-25T15:04:17.173
> 
> 标签：mysql, sql

我有一个包含 2000 多种产品的产品描述数据库表，问题是当我从我的网站输入产品描述时有两个问题。数据库在每个双引号或半引号符号旁边生成多个反斜杠。每次我编辑产品时，反斜杠都会加倍。例如，经过 3-4 次编辑后看起来像这样：

> 它'\\\非常...

然后像....

> 它'\\\\\\非常...

等等...

我需要一些东西来从我的数据库中大量删除它们，因为手动删除它们需要几天时间。

还有第二个问题是

> \r\n

字符，它们在每个旁边生成

> <br> 或 <br/> 标签。

正如您可能想象的那样，这使我的数据库变得非常混乱并破坏了产品描述。我一直试图解决它很多次，研究等，但我无法理解它以及如何阻止它。

谁能帮我删除这些并阻止这种情况发生？

感谢您的帮助。问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T19:22:29.643

有趣的是，您的 MySQL 上似乎有**NO_BACKSLASH_ESCAPES**模式。

如果我使用两个不同的 sql，我可以重现 SQL Fiddle 中的工作：

第一的：

```
CREATE TABLE A
(
  Name varchar(64)
);

SET sql_mode = 'ANSI';

INSERT INTO A (Name) VALUES('aaa \n\r bbbb') 
```

第二：

```
CREATE TABLE A
(
  Name varchar(64)
);

SET sql_mode = 'NO_BACKSLASH_ESCAPES';

INSERT INTO A (Name) VALUES('aaa \n\r bbbb') 
```

我运行这样一个简单的选择来证明：

```
SELECT Name FROM A 
```

结果：

**第一种情况：** *aaa bbbb*

**第二种情况：** *aaa \n\r bbbb*

我希望它有所帮助。

有关更多信息，请检查[MySQL sql 模式](http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html#sqlmode_no_backslash_escapes)！

当然对于现有的问题你可以使用一个简单的 REPLACE 函数结束。但是，如果您正确设置模式，它将不会再次发生！

# iphone - 没有从经纬度获取地址

> ID：12123091
> 
> 赞同：0
> 
> 时间：2012-08-25T15:04:43.980
> 
> 标签：iphone, ios5

我正在使用以下代码从当前纬度和经度获取地址，但我无法得到正确的响应

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation{

    current_latitude=newLocation.coordinate.latitude;
    current_longitude=newLocation.coordinate.longitude;

    CLGeocoder * geoCoder = [[CLGeocoder alloc] init];

    [geoCoder reverseGeocodeLocation:newLocation completionHandler:^(NSArray *placemarks, NSError *error) {
        if(placemarks && placemarks.count > 0)
        {
            CLPlacemark *placemark= [placemarks objectAtIndex:0];

            NSString * address = [NSString stringWithFormat:@"%@ %@,%@ %@", [placemark subThoroughfare],[placemark thoroughfare],[placemark locality], [placemark administrativeArea]];

            UIAlertView *art = [[UIAlertView alloc] initWithTitle:address message:nil delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [art show];
            [art release];
            NSLog(@"%@",address);
        }
    }];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:42:22.400

`CLLocation`目前覆盖面很差；看到[这个文件](http://developer.apple.com/library/ios/#technotes/tn2289/_index.html#//apple_ref/doc/uid/DTS40011305)。您可能正在尝试从覆盖不佳的区域对位置进行地理编码。

如果是这种情况，还有其他地理编码器，例如[Google 的](https://developers.google.com/maps/documentation/geocoding/)地理编码器（它要求您在地图上显示结果）。

# css - 如何为 ListBoxFor 添加样式？

> ID：12123094
> 
> 赞同：0
> 
> 时间：2012-08-25T15:04:52.820
> 
> 标签：css, asp.net-mvc

如何将以下样式添加到下面的列表框，

```
@Html.ListBoxFor(m => m.AvailableProducts, new MultiSelectList(Model.AvailableProducts, "Id", "Name", Model.AvailableSelected),
                         new Dictionary<string, object> { { "data-bind", "options:availableProducts, selectedOptions:availableSelected, optionsText:'Name'" } }) 
```

**CSS**

```
div.selectbox-wrapper ul {
list-style-type:none;
margin:0px;
padding:0px;
}
div.selectbox-wrapper ul li.selected { 
background-color: #EAF2FB;
}
div.selectbox-wrapper ul li.current { 
background-color: #CDD8E4;
}
div.selectbox-wrapper ul li {
list-style-type:none;
display:block;
margin:0;
padding:2px;
cursor:pointer;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T15:22:42.573

使用 jQuery 插件将`<select>`元素更改为`<div>`带有`<ul>`'s 和`<li>`'s 的元素。

示例在这里：[是否可以设置选择框的样式？](https://stackoverflow.com/questions/1072239/is-it-possible-to-style-a-select-box)

# javascript - jquery：[object] 和 [object HTMLDiveelement] 之间的区别

> ID：12123096
> 
> 赞同：0
> 
> 时间：2012-08-25T15:05:03.013
> 
> 标签：javascript, jquery, jsp

我正在`mouseHover`为 JSP 页面上的下拉菜单调用 Event 上的 JS 函数。我正在将 JSP 中的元素 ID 传递给用 .js 文件编写的函数，并在类似的方法中使用该 ID

```
var abc = document.getElementByID(); 
```

它适用于所有浏览器。

当我将文档模式设置为 IE9 标准（浏览器模式为 IE9）时，它在此处出现故障。

将“abc”传递给警报（abc）；返回：

*   `[object]`在 IE9 文档模式：怪癖模式（浏览器模式到 IE9），它按预期工作
*   `[object HTMLDivelement]`在文档模式到 IE9 标准（浏览器模式到 IE9）中，菜单下拉菜单不起作用并使整个应用程序无法运行。

`[object]`我想知道黑白和黑白有什么区别`[object HTMLDivelement]`。

有什么方法可以从 alert(abc) 中获取 [object]; 在 Quirks Mode 和 IE9 Standards 两种模式下。

# java - 变量时间戳可能尚未初始化

> ID：12123097
> 
> 赞同：1
> 
> 时间：2012-08-25T15:05:12.320
> 
> 标签：java

我有一个带有两个构造函数的类——一个接受一个`Date`对象，另一个尝试根据给定的时间戳字符串创建一个日期对象。需要注意的是，转换为`Date`对象可能会引发异常。我收到“变量时间戳可能尚未初始化”错误。

第一个构造函数：

```
public Visit(Date timestamp) {
    this.timestamp = timestamp;
} 
```

第二个构造函数（产生错误的那个）：

```
public Visit(String timestamp) {
    try {
        this.timestamp = dateFormat.parse(timestamp);
    } catch (ParseException ex) {
        Logger.getLogger(Visit.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

我已经尝试将初始化添加`this.timestamp`到`finally`语句中，`try`但这会给出一个错误，即变量可能已经被初始化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T15:08:12.270

如果您乐于在出现异常时使用默认值，则可以执行以下操作：

```
Date temp = null;
try {
    temp = dateFormat.parse(timestamp);
} catch (ParseException ex) {
    Logger.getLogger(Visit.class.getName()).log(Level.SEVERE, null, ex);
}

this.timestamp = (temp == null ? <some default Date value> : temp); 
```

If not, then you could throw an exception from your constructor. Typically, if the argument of your constructor is not valid, you could rethrow an `IllegalArgumentException` for example.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T15:11:32.993

Or you could make the constructor "throws" the Exception, for example:

```
 public ToDelete(Date date) throws Exception {
    this.date = this.getDate(); //getDate throws the Exception
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T15:12:42.220

> I've tried adding the initialization of this.timestamp to the finally statement of the try but this then gives an error that the variable may already have been initialized.

This is because a final member variable must be initialized in all code paths of a constructor and must be initialized only once. The only way to avoid this is to decouple the parsing logic from the assignment.

# javascript - Facebook Javascript fb.ui 事件在朋友墙上张贴照片？

> ID：12123099
> 
> 赞同：1
> 
> 时间：2012-08-25T15:05:17.963
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

我想创建一个按钮，单击时应该打开一个 Facebook 对话框，要求用户在他们的朋友墙上张贴照片（我的意思是照片。不是附件链接）。

那可能吗？

实际上，这*可能会*消除请求权限的可能性，`publish_stream`因为用户将完全控制要发布的内容和不发布的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T16:42:39.347

我几乎可以肯定不支持发布到其他用户的`/photos`连接 - 当您检索获得的帖子 ID 时，您确定它没有出现在您自己的个人资料/您自己的活动日志中吗？

{edit} 没有模拟 facebook.com 的“将照片上传到朋友的个人资料”功能的对话框{/edit}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:04:04.210

@Surya：您需要用户的许可才能在他的墙上发布照片，为此您需要他的许可才能访问他的照片，这是通过您请求中的“publish_stream”参数实现的。就您的问题而言，在您的朋友墙上张贴照片似乎是不可能的。即使有可能，除非他/她允许，否则它不会将其发布到您朋友的墙上。有一种方法可以让您发布视频/照片，但作为链接而不是正确的照片。当我尝试使用照片共享图形 API 时，我还注意到一件事，它不会立即将照片发布到您的帐户。它寻求用户的许可才能发布，否则照片将保留在他未发布的相册中。当您单击帐户的“照片”部分时，您会找到该相册。

[http://bashwithflash.blogspot.in/2012/05/photo-sharing-on-facebook-using-graph.html](http://bashwithflash.blogspot.in/2012/05/photo-sharing-on-facebook-using-graph.html) http://bashwithflash.blogspot.in/2012/05/album-sharing-on-facebook-using -graph.html

# scala - 在 scala 2.10 AST 中搜索

> ID：12123101
> 
> 赞同：10
> 
> 时间：2012-08-25T15:05:51.330
> 
> 标签：scala, abstract-syntax-tree, scala-2.10, parse-tree

在 scala 2.10 AST 中递归搜索元素的最佳方法是什么？

树可能是`power.trees(code)`或`mirror.mkToolBox().parseExpr(code)` **Edit**的结果。在 2.10.0-RC1`parseExpr`中已重命名为`parse`.

我所拥有的具体用例是通过方法名称从给定的类/对象代码中提取方法的代码，但我认为如果以更通用的方式表述，该问题将与其他问题更相关。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T15:51:40.263

也许你应该看看[https://github.com/scala/scala/blob/2.10.x/src/reflect/scala/reflect/api/Trees.scala#L606](https://github.com/scala/scala/blob/2.10.x/src/reflect/scala/reflect/api/Trees.scala#L606)，尤其是 Traverser、Transformer 和替换方法 ( `Tree.substituteSymbols`,`Tree.substituteTypes`或`Tree.substituteThis`)。如果要从树中提取方法，可以使用 a`Traverser`并覆盖该`traverse`方法。在 traverse 方法中，您检查节点是否与您想要的方法匹配。如果是这样，你就完成了。如果没有，你打电话给`super.traverse`.

# php - 3 个 sql 内连接表，现在如何计算其中的总行数

> ID：12123103
> 
> 赞同：1
> 
> 时间：2012-08-25T15:06:18.887
> 
> 标签：php, mysql, mybb

这是查询，我有 3 个内部连接的表，现在我希望通过在我的管理员的 php 上执行查询来计算结果中的所有行，即 78，我不想要表的结果，我只想要 wchich 中的 1 行写的东西是 78，和我们在

```
SELECT count (*) FROM test_table 
```

下面是3个内联表的查询

```
 SELECT 
mybb_users.uid,
mybb_users.username,
mybb_users.avatar,
mybb_posts.fid,
mybb_posts.uid,
mybb_posts.dateline,
mybb_posts.tid,
mybb_posts.subject,
mybb_forums.parentlist,
mybb_forums.fid
FROM mybb_forums
    INNER JOIN mybb_posts ON mybb_forums.fid = mybb_posts.fid
    INNER JOIN mybb_users ON mybb_posts.uid = mybb_users.uid
    WHERE mybb_forums.parentlist LIKE '%58%'
    GROUP BY mybb_posts.tid
    ORDER BY mybb_posts.dateline DESC 
```

现在如何计算其中的总行数？

**已编辑**

```
 SELECT count( mybb_users.uid ) AS totalOfRows
FROM (

SELECT mybb_users.uid, mybb_users.username, mybb_users.avatar, mybb_posts.fid, mybb_posts.uid AS uidPost, mybb_posts.dateline, mybb_posts.tid, mybb_posts.subject, mybb_forums.parentlist, mybb_forums.fid AS fidForum
FROM mybb_forums
INNER JOIN mybb_posts ON mybb_forums.fid = mybb_posts.fid
INNER JOIN mybb_users ON mybb_posts.uid = mybb_users.uid
WHERE mybb_forums.parentlist LIKE '%58%'
GROUP BY mybb_posts.tid
)T 
```

错误 ::#1054 -“字段列表”中的未知列“mybb_users.uid”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T15:10:06.800

好吧，如果您不想要结果，为什么要显示这些字段？选择返回一个表，因此对其应用计数：

```
SELECT 
count(*)
FROM mybb_forums
    INNER JOIN mybb_posts ON mybb_forums.fid = mybb_posts.fid
    INNER JOIN mybb_users ON mybb_posts.uid = mybb_users.uid
    WHERE mybb_forums.parentlist LIKE '%58%'
    GROUP BY mybb_posts.tid 
```

另外，你是按帖子分组的，所以，不需要订购

编辑：我认为我发布的查询应该有效，无论如何，如果不是，这绝对应该有效：

```
SELECT sum(Total) AS totalOfRows 
FROM ( 

SELECT 1 as Total 
FROM mybb_forums 
INNER JOIN mybb_posts ON mybb_forums.fid = mybb_posts.fid 
INNER JOIN mybb_users ON mybb_posts.uid = mybb_users.uid 
WHERE mybb_forums.parentlist LIKE '%58%' 
GROUP BY mybb_posts.tid 
)T 
```

# php - 搜索结果（显示更多结果）

> ID：12123107
> 
> 赞同：0
> 
> 时间：2012-08-25T15:07:07.630
> 
> 标签：php, mysql

我有一个搜索框，用户可以在其中以几种方式搜索其他用户，名字、姓氏、用户名或电子邮件在下拉列表中。这个下拉菜单显示了前 8 个结果，然后我在底部显示了一个链接，表示使用他们可能输入到搜索中的文本位来查找更多结果。

因此，例如，如果我输入 JOHN 但只输入他的名字的“JO”，这就是 $_GET['t'] 应该发送到搜索结果页面的值。所以我得到了链接。但我只是不知道查询应该是什么

显示更多结果链接

```
<a href='include/searchresults.php?ref=".$_GET['t']."'>Show More Results for ".$_GET['t']."</a> 
```

搜索结果.PHP

```
 if(isset($_GET['t'])){
$_GET['t'] = str_replace(" ", "", $_GET['t']);
$_GET['t'] = str_replace("%", "", $_GET['t']);

$_GET['t'] = mysqli_real_escape_string($mysqli,$_GET['t']);

if(strlen($_GET['t'])>1){

$sql="SELECT * FROM users WHERE username LIKE '%".$_GET['t']."%' OR first LIKE '%".$_GET['t']."%' OR last LIKE '%".$_GET['t']."%' OR email LIKE '%".$_GET['t']."%' ORDER BY first ASC";
$query=mysqli_query($mysqli,$sql);
$count = mysqli_num_rows($query); 

    if($count<=0){
        echo "No results found";
    }else{
    echo "<table width='100%'>";
        while($user_data=mysqli_fetch_array($query)){} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T15:31:59.433

尝试这样的事情，使用 LIKE 的 MATCH 会快得多。

```
$keyword=mysql_real_escape_string($_GET['t']);
$rowsperpage=8;
$sql="SELECT * FROM users WHERE MATCH (first, last, email) AGAINST ('+$keyword*' IN BOOLEAN MODE)   ORDER by first LIMIT $rowsperpage"; 
$query=mysqli_query($mysqli,$sql);
$count = mysqli_num_rows($query); 
```

并随心所欲地设置`$rowsperpage`。

有关更多结果页面，请执行以下操作

```
$rowsperpage=mysql_real_escape_string($_GET['rpp']);
<a href='include/searchresults.php?t=$keyword&rpp=$rowsperpage'>Show More Results for "$keyword"</a> 
```

# mysql - 如何在 Coldfusion/MySQL 中跟踪产品搜索引擎中的通用点击？

> ID：12123108
> 
> 赞同：0
> 
> 时间：2012-08-25T15:07:09.710
> 
> 标签：mysql, coldfusion, statistics, search-engine, resultset

我正在使用`Coldfusion8/MySQL 5.0.88`并有一个产品搜索，我正在尝试为其添加一些自定义搜索统计信息。

我有一个表格来保存产品搜索结果，现在我正在寻找最好且最省时的方式来填充它。

我将像这样在表中插入条目：

```
<cfquery datasource="db">
    INSERT INTO statistics_search_hits ( iln, artikelnummer, source, viewed, zeitstempel )
    VALUES(   <cfqueryparam value = "#results.sellerID#" cfsqltype="cf_sql_varchar" maxlength="13">
            , <cfqueryparam value = "#results.style#" cfsqltype="cf_sql_varchar" maxlength="35">
            , <cfqueryparam value = "#Session.skin#" cfsqltype="cf_sql_varchar" maxlength="13">
            , "detail"
            , now() 
            )
</cfquery> 
```

如果我要提取一条记录 ( `detail`)，这很容易包含，但我想知道什么以及如何存储通用搜索。

假设用户正在搜索返回 500 个结果，我一次只会显示 24 个，但为了获得正确的统计信息，我必须在我的命中计数器中输入 500 个条目。

**问题：**
最好的方法是什么？我考虑过`CFThread`在用户继续浏览页面时使用 a 来运行，但我什至不确定是否要对数据库进行 500 次访问。欢迎任何关于好的方法的指示。

谢谢！

PS：我不想为此使用 Google Analytics。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T16:49:40.080

这可能不是您想要的，但您当然可以使用分号连接 MS-SQL 语句。

```
INSERT INTO statistics_search_hits ( iln, artikelnummer, source, viewed, zeitstempel )
VALUES(   <cfqueryparam value = "#results.sellerID#" cfsqltype="cf_sql_varchar" maxlength="13">
        , <cfqueryparam value = "#results.style#" cfsqltype="cf_sql_varchar" maxlength="35">
        , <cfqueryparam value = "#Session.skin#" cfsqltype="cf_sql_varchar" maxlength="13">
        , "detail"
        , now() 
        );
INSERT INTO statistics_search_hits ( iln, artikelnummer, source, viewed, zeitstempel )
VALUES(   <cfqueryparam value = "#results.sellerID#" cfsqltype="cf_sql_varchar" maxlength="13">
        , <cfqueryparam value = "#results.style#" cfsqltype="cf_sql_varchar" maxlength="35">
        , <cfqueryparam value = "#Session.skin#" cfsqltype="cf_sql_varchar" maxlength="13">
        , "detail"
        , now() 
        )
INSERT INTO statistics_search_hits ( iln, artikelnummer, source, viewed, zeitstempel )
VALUES(   <cfqueryparam value = "#results.sellerID#" cfsqltype="cf_sql_varchar" maxlength="13">
        , <cfqueryparam value = "#results.style#" cfsqltype="cf_sql_varchar" maxlength="35">
        , <cfqueryparam value = "#Session.skin#" cfsqltype="cf_sql_varchar" maxlength="13">
        , "detail"
        , now() 
        ); 
```

您也许可以将语句写入文件并让 MySQL 也按计划导入它们。因此，您可以将文件写入日志目录，然后让 CFSCHEDULE/CFEXECUTE 进程进入并按计划处理文件。

您还可以尝试使用方便的 INSERT INTO...SELECT 语句。如果您的搜索结果无论如何都来自数据库，您可以设计一个 SELECT 语句，从数据库中重建相同的结果并使用 CF 中的一些常量批量插入它。

```
INSERT INTO statistics_search_hits ( iln, artikelnummer, source, viewed, zeitstempel )
SELECT #reseller_id# as iln, searchtable.article, searchtable.source, 1, #now()#
FROM SearchTable
WHERE [search criteria statements here...] 
```

最后，您可以构建一个存储过程来将批量条目传递给 SQL 服务器。

传递查询数据的 CFThread 听起来也是个好主意，但是如果您的站点很繁忙，则最好注意可能产生的线程数量，尤其是在用户不断执行搜索的情况下。检查您的 ColdFusion 版本中的 CF 线程限制和管理员中的设置。

希望这些通用指针有所帮助！^_^

# android - 使用 DiskLRUCache 的 Android 照片/缩略图策略

> ID：12123109
> 
> 赞同：1
> 
> 时间：2012-08-25T15:07:12.567
> 
> 标签：android, android-intent

我正在使用[Jake Wharton 的 DiskLruCache](https://github.com/JakeWharton/DiskLruCache)库。

我对应用程序性能、缓存策略、在视图中和整个应用程序中使用缓存感到好奇。大多数时候，图像不会改变。

例如，假设我的服务器上有一张 320x320 的照片。我打开流，保存图像。

1.  在我的列表视图中，我显示位图，在细节中，我显示更大的图像。我也应该保存缩略图位图吗？这样更有效率吗？

2.  您在整个应用程序中共享缓存“对象”的经验是什么（假设我有多个可能利用相同数据的视图。这有什么问题？

3.  为了性能和货币，如果图像在服务器上发生变化怎么办。知道它已经改变的最佳策略是什么？我无权访问修改日期。只有大小，但我也不想每次都查询大小。在服务器上的应用程序中设置一个标志，然后查询该标志？

    1.  在传统应用程序中（如果有这样的事情），不时清除缓存的最佳做法是什么？（缩进很奇怪。）

（在看到 Facebook 在 iOS 中的所有性能改进后，我受到启发，写了这篇文章。我没有数十亿的缓存要做，但我想至少聪明一点！哈哈）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T15:53:23.130

其中很多答案取决于您正在编写的应用程序的类型、图像更新的重要性（以及图像更改的可能性等）以及生成的总图像。除了磁盘缓存之外，您还应该使用内存缓存，尤其是在 ListView 和其他将重复滚动相同图像的区域中。查看[LruCache](http://developer.android.com/reference/android/util/LruCache.html)并阅读 Google 的[Caching](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html) Bitmaps条目。

320x320 对于列表视图来说可能太大了，您可能想要创建缩略图（取决于设备，以及您实现列表视图的方式）。

1）您应该相当积极地使用磁盘缓存（如何定义取决于您正在编写的应用程序）。使用外部存储目录，如果他们有几 GB 的剩余空间，例如，如果您的应用程序占用 100 mb，这不是问题。如果无论如何都需要，它可以全部清除。

2）应该没有问题。永远不应该在主线程上处理磁盘 IO（即使是闪存介质）。使用 AsyncTasks 加载图像。无论如何，一次只能有一个主要的前台活动，并且当活动处于休眠状态时，它不应该尝试从磁盘读取。

3）这又取决于你如何实现你的应用程序。检索文件时，您应该能够获得其他信息（甚至 Apache 也可以告诉您的应用程序的最后修改日期）。3.1）您可以拥有一个 sqllite 数据库来跟踪某些图像的使用频率以及最近的读取。如果最近一次阅读是几天前的，则让该图像过期。

编辑：有一个来自 Jake Wharton 的库，现在称为 Picasso，我建议使用它，它可以处理网络/本地 IO 以及内存和磁盘缓存。在这里检查一下：http: [//square.github.io/picasso/](http://square.github.io/picasso/)。你需要做的很多事情都可以用一行来完成：`Picasso.with(this).load(imageFileURL).into(imageView);`

# coded-ui-tests - 使用 Coded UI Test 执行测试脚本会消耗更多时间

> ID：12123115
> 
> 赞同：0
> 
> 时间：2012-08-25T15:07:32.203
> 
> 标签：coded-ui-tests

在执行编码的 UI 测试脚本时，我们遇到了一些问题。

通常我们必须在 Coded UI Test 上执行自动化脚本，之前我们使用 Test Partner 来执行。最近，我们将一些测试合作伙伴脚本迁移到 Coded UI Test 。但是，我们观察到，与测试合作伙伴执行时间相比，编码 UI 测试脚本的执行时间更长。我们的自动化脚本完全是手写的，我们没有使用录制和播放功能。

我们的观察结果很少

1.  IE 浏览器在 windows XP 上执行编码的 UI 测试脚本时挂起。每次我们必须终止进程并且我们必须重新创建场景以进一步继续执行。因此，自动化的必要性是不够的，因为每次都必须监控脚本执行是否正常而没有浏览器挂起。它在 XP 上是一个非常常见的问题。

2.  如果我们在 windows 7 上执行 Coded UI Test 脚本。执行时间很慢。它会比 XP 上的执行时间消耗更多的时间。所以我们的执行时间拖了，尽管脚本在没有浏览器挂起的情况下运行良好。我们也尝试在发布模式下执行脚本。但是每当脚本停止时，必须在调试模式下再次执行脚本。

您能否就此提出建议。我们究竟缺少什么？通过更改工具设置，我们可以提高执行时间的性能吗？感谢您的支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T00:16:23.833

首先，您应该启用日志记录并查看为什么搜索会占用这么多时间。您还可以在调试输出中找到有用的信息，当操作花费的时间超出预期时会发出警告。

以下是启用这些日志的两个有用链接

对于 VS/MTM 2010 和 2012 测试版：http: [//blogs.msdn.com/b/gautamg/archive/2009/11/29/how-to-enable-tracing-for-ui-test-components.aspx](http://blogs.msdn.com/b/gautamg/archive/2009/11/29/how-to-enable-tracing-for-ui-test-components.aspx)

对于 VS/MTM 2012：http: [//blogs.msdn.com/b/visualstudioalm/archive/2012/06/05/enabling-coded-ui-test-playback-logs-in-visual-studio-2012-release-候选人.aspx](http://blogs.msdn.com/b/visualstudioalm/archive/2012/06/05/enabling-coded-ui-test-playback-logs-in-visual-studio-2012-release-candidate.aspx)

应在 %temp%\UITestLogs*\LastRun\ 目录中创建一个带有日志的友好 .html 文件。

至于对您的问题的可能解释 - 无论您是显式编写测试还是手动生成对 WpfControl.Find() 或派生类之一的调用都没有关系，如果搜索首先失败，它将继续执行启发式方法来找到目标控件。

您可以将 Playback 的 MatchExactHierachy 设置设置为 true，并停止使用 smartmatch 功能（更多关于它的信息以及其他一些有用的性能提示 [http://blogs.msdn.com/b/mathew_aniyan/archive/2009/08/ 10/configuring-playback-in-vstt-2010.aspx](http://blogs.msdn.com/b/mathew_aniyan/archive/2009/08/10/configuring-playback-in-vstt-2010.aspx) )

# c++ - std::runtime_error 子类的“调用已删除的构造函数”编译器错误

> ID：12123117
> 
> 赞同：5
> 
> 时间：2012-08-25T15:07:59.897
> 
> 标签：c++, c++11, clang++

我已经派生了一个异常类`std::runtime_error`，以便添加对异常流的支持。我收到一个奇怪的编译器错误输出，我不确定如何解决？

```
clang++ -std=c++11 -stdlib=libc++ -g -Wall -I../ -I/usr/local/include Main.cpp -c
Main.cpp:43:19: error: call to deleted constructor of 'EarthException'
            throw EarthException(__FILE__, __LINE__)
                  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../EarthException.hpp:9:12: note: function has been explicitly marked deleted here
    struct EarthException : public Exception<EarthException>

template <typename TDerived>
    class Exception : public std::runtime_error
    {
        public:
            Exception() : std::runtime_error("") {}

            Exception(const std::string& file, const unsigned line)
                 : std::runtime_error("")
            { 
                stream_ << (file.empty() ? "UNNAMED_FILE" : file) << "[" << line << "]: ";
            }

            virtual ~Exception() {}

            template <typename T>
            TDerived& operator<<(const T& t)
            {
                stream_ << t;
                return static_cast<TDerived&>(*this);
            }

            virtual const char* what() const throw()
            {
                return stream_.str().c_str();
            }

       private:
           std::stringstream stream_;
    };

    struct EarthException : public Exception<EarthException>
    {
        EarthException() {}

        EarthException(const std::string& file, const unsigned line)
            : Exception<EarthException>(file, line) {}

        virtual ~EarthException() {}
    };
} 
```

**更新：**

我现在添加了显式调用，`std::runtime_error("")`因为它指出默认构造函数被标记为`=delete`但是错误仍然存​​在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T16:55:50.160

由于 and 中用户声明的析构函数`Exception`，`EarthException`这些类的移动构造函数和移动赋值运算符的隐式生成被禁用。并且由于只移动数据成员`std::stringstream`，隐式复制成员被删除。

然而，所有这些都是一种干扰。

你的`what`会员注定要失败：

```
 virtual const char* what() const throw()
        {
            return stream_.str().c_str();
        } 
```

这会创建一个右值`std::string`，然后返回一个指向该临时值的指针。在客户端可以将指针读入该临时文件之前，临时文件会被破坏。

您需要做的是`std::string`向下传递给`std::runtime_error`基类。然后你不需要持有`stringstream`, 或任何其他数据成员。唯一棘手的部分是`std::runtime_error`使用正确的初始化基类`string`：

```
template <typename TDerived>
    class Exception : public std::runtime_error
    {
            static
            std::string
            init(const std::string& file, const unsigned line)
            {
                std::ostringstream os;
                os << (file.empty() ? "UNNAMED_FILE" : file) << "[" << line << "]: ";
                return os.str();
            }
        public:
            Exception(const std::string& file, const unsigned line)
                : std::runtime_error(init(file, line))
            { 
            }

      private:
          <del>std::stringstream stream_;</del> 
```

现在您将获得隐式复制成员，并且一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T15:18:22.553

```
Exception(const std::string& file, const unsigned line)
            { 
                stream_ << (file.empty() ? "UNNAMED_FILE" : file) << "[" << line << "]: ";
            } 
```

此构造函数不调用其基构造函数，因此编译器生成对默认构造函数的调用`std::runtime_error::runtime_error()`。但是`std::runtime_error`没有默认构造函数，这是错误消息告诉你的。要解决此问题，请阅读`std::runtime_error`并调用其构造函数之一。

编辑：好的，这是**真正的**问题（不是我上面提到的也不是问题）：模板`Exception`有一个类型的数据成员`std::stringstream`；无法复制流，因此编译器无法生成用于抛出的复制构造函数。

# mysql - 什么足以将来自多个时区的日期/时间存储在数据库中以进行准确计算？

> ID：12123118
> 
> 赞同：8
> 
> 时间：2012-08-25T15:08:11.047
> 
> 标签：mysql, sql, sql-server, oracle, timezone

这是一个**很难**的问题。事实上，它似乎很难，SQL 标准和大多数主要数据库在它们的实现中都没有线索。

将所有日期时间转换为 UTC 可以轻松比较记录，但会丢弃时区信息，这意味着您不能对它们进行计算（例如，将 8 个月添加到存储的日期时间），也不能在它们存储的时区中检索它们。所以幼稚的方法就出来了。

除了时间戳之外存储与 UTC 的时区偏移量（例如，在 postgres 中带有时区的时间戳）似乎就足够了，但是由于 DST，不同的时区可以在一年中的某个时间点具有相同的偏移量，并且在 6 个月后具有不同的偏移量. 例如，您现在（8 月）可以在 UTC-4 拥有纽约和智利，但 11 月 4 日之后，纽约将是 UTC-5，智利（9 月 2 日之后）将是 UTC-3。因此，仅存储偏移量也不允许您进行准确的计算。像上面的幼稚方法一样，它也丢弃了信息。

如果您将时区标​​识符（例如 America/Santiago）与时间戳一起存储会怎样？这将允许您区分智利日期时间和纽约日期时间。但这还不够。如果您要存储到期日期，例如 6 个月后的午夜，并且 DST 规则发生变化（不幸的是政客们喜欢这样做），那么您的时间戳将是错误的，并且到期可能发生在晚上 11 点或凌晨 1 点。这对您的应用程序可能或可能不是什么大问题。所以使用时间戳也会丢弃信息。

似乎要真正准确，您需要使用时区标识符存储本地日期时间（例如，使用非时区感知时间戳类型）。为了支持更快的比较，您可以缓存它的 utc 版本，直到您使用的时区数据库被更新，然后如果缓存值已更改，则更新它。因此，这将是 2 个简单的时间戳类型加上一个时区标识符和某种外部 cron 作业，用于检查时区数据库是否已更改并为缓存的时间戳运行适当的更新查询。

这是一个准确的解决方案吗？还是我还缺少什么？能不能做得更好？

我对 MySQL、SQL Server、Oracle、PostgreSQL 和其他处理 TIMESTAMP WITH TIME ZONE 的 DBMS 的解决方案感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T15:52:43.367

你已经很好地总结了这个问题。可悲的是，答案是做你所描述的。

使用的正确格式确实取决于时间戳应该代表什么的语用学。它通常可以分为过去和未来的事件（尽管有例外）：

*   过去的事件可以而且通常应该被存储为永远不会被重新解释的东西。（例如：带有数字时区的 UTC 时间戳）。如果应保留指定的时区（以向用户提供信息），则应将其分开。

*   未来的事件需要您描述的解决方案。本地时间戳和命名时区。这是因为您想在时区规则更改时更改该事件的“实际”(UTC) 时间。

我会质疑时区转换是否是这样的开销？它通常很快。如果您看到非常显着的性能影响，我只会经历缓存的痛苦。有（正如您所指出的）一些需要缓存的大操作（例如根据实际（UTC）时间对数十亿行进行排序。

如果出于性能原因需要在 UTC 中缓存未来的事件，那么可以，您需要制定一个流程来更新缓存的值。根据数据库的类型，这可能由系统管理员完成，因为 TZ 规则很少更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T15:59:57.587

如果您关心偏移量，则应存储实际偏移量。存储时区标识符与时区可以并且确实随时间变化不同。通过存储时区偏移量，您可以计算出事件发生时正确的本地时间，而不是根据当前偏移量计算本地时间。如果了解实际发生的时区事件很重要，您可能仍希望存储时区标识符。

请记住，时间是一种物理属性，但时区是一种政治属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T17:11:49.357

如果您转换为 UTC，您可以订购和比较记录如果您添加时区的名称，您可以在其原始 tz 中表示它，并能够添加/减去时间段，如周、月等（而不是经过的时间） .

在您的问题中，您说这还不够，因为 DST 可能会更改。DST 使计算日期（除了经过的时间）变得复杂且代码密集。就像您需要代码来处理闰年一样，您需要考虑对于给定的数据/期间是否需要应用 DST 校正。几年来，答案是肯定的，而其他年份的答案是否定的。请参阅[此 wiki 页面](http://en.wikipedia.org/wiki/IANA_time_zone_database)，了解这些规则变得多么复杂。

存储偏移量基本上是存储这些计算的结果。该计算出的偏移量*仅对*给定的时间点有效，*并且*不能像您在问题中建议的那样*按原样应用于稍后或更早的时间点。*您对 UTC 时间进行计算，然后根据当时在该时区中处于活动状态的规则将结果时间转换为所需的时区。

请注意，在第一次世界大战之前，任何地方都没有任何 DST，并且数据库中的日期/时间系统可以完美地处理这些情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-24T06:21:44.217

> 我对 MySQL、SQL Server、Oracle、PostgreSQL 和其他处理 TIMESTAMP WITH TIME ZONE 的 DBMS 的解决方案感兴趣。

Oracle 即时转换为 UTC，但根据您传递的内容保持时区或 UTC 偏移量。Oracle（正确地）在时区和 UTC 偏移之间产生差异，并返回您传递给您的内容。这只需要额外的两个字节。

Oracle 使用 UTC 进行所有计算`TIMESTAMP WITH TIME ZONE`。这对于添加月份没有影响，但对于添加天数会有所不同，因为没有夏令时。请注意，计算的结果必须始终是有效的时间戳，例如，将一个月添加到 1 月 31 日将在 Oracle 中引发异常，因为 2 月 31 日不存在。

# c# - 覆盖 DBML 文件中生成的 setter

> ID：12123121
> 
> 赞同：0
> 
> 时间：2012-08-25T15:08:33.390
> 
> 标签：c#, linq-to-sql, partial-classes

我想覆盖部分类中的属性设置器：

**部分类：**

```
public partial class User
{
    public string Name
    {
        set
        {
            // Do something
        }
    }
} 
```

但我有以下错误：

> “用户”类型已包含“名称”的定义

如何修改 DBML 文件中生成的初始设置器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T15:10:18.617

您*不能* **覆盖**`partial class`. _ 要覆盖某些东西，您首先需要从某些东西*派生*。

`Partial class`是*同一个*类，但分布在不同的 IO 文件之间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T15:18:58.607

这是可能的，只是通过使用一些诡计

请参阅[http://www.codeproject.com/Articles/31519/LINQtoSQL-Customize-the-Code-Generated-by-the-Desi](http://www.codeproject.com/Articles/31519/LINQtoSQL-Customize-the-Code-Generated-by-the-Desi)

您也可能对这个问题感兴趣：[DBML 定制与再生](https://stackoverflow.com/questions/3566951/dbml-customization-vs-regeneration)

但是，您尚未指定要实现哪种自定义。

# mysql - Group by with order by 每组有限制

> ID：12123123
> 
> 赞同：0
> 
> 时间：2012-08-25T15:08:47.667
> 
> 标签：mysql, group-by, limit

我正在开发一个小的 RSS 提要电子邮件。

我有四个表是用户、提要、订阅和分发。提要包含实际提要详细信息，订阅将用户与提要联系起来，分发记录 rss 提要帖子的电子邮件交易。

我正在尝试查询分发表以获取每个用户/订阅源的最新记录。我有以下查询，但显然只返回一行。我需要使用子查询，但我不知道怎么做。

```
SELECT d.id, d.user_id, d.feed_id, d.created
FROM Distribution AS d
INNER JOIN Feeds AS f ON f.id = d.feed_id
INNER JOIN Subscriptions AS s ON s.feed_id = d.feed_id
GROUP BY d.id, d.user_id, d.feed_id
ORDER BY d.created DESC 
LIMIT 1 
```

分发表数据id、created、feed_id、post_id、user_id、success

```
(0, '2012-08-31 09:37:49', 20, 3, 2, 1)
(1, '2012-08-25 09:36:21', 20, 1, 1, 1)
(2, '2012-08-25 09:37:49', 21, 1, 2, 1)
(4, '2012-08-25 09:39:06', 21, 4, 1, 1)
(5, '2012-08-25 10:12:29', 20, 7, 2, 0)
(6, '2011-05-24 10:34:30', 20, 112, 1, 0) 
```

以下查询产生以下结果

```
SELECT Distribution.*
FROM   Distribution NATURAL JOIN (
  SELECT   user_id, feed_id, MAX(created) AS created
  FROM     Distribution
  GROUP BY user_id, feed_id
) t

(0, '2012-08-31 09:37:49', 20, 3, 2, 1)
(1, '2012-08-25 09:36:21', 20, 1, 1, 1)
(2, '2012-08-25 09:37:49', 21, 1, 2, 1)
(4, '2012-08-25 09:39:06', 21, 4, 1, 1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T15:27:38.017

如[MySQL 手册](http://dev.mysql.com/doc/en/group-by-hidden-columns.html)中所述：

> 服务器可以从每个组中自由选择任何值，因此除非它们相同，否则选择的值是不确定的。此外，从每个组中选择值不会受到添加`ORDER BY`子句的影响。结果集的排序发生在选择值之后，并且`ORDER BY`不影响服务器选择的值。

您正在尝试查找[groupwise maximum](http://dev.mysql.com/doc/en/example-maximum-column-group-row.html)，这需要使用子查询来识别最新记录。

子查询本身应该在列上使用 MySQL 的[`MAX()`](http://dev.mysql.com/doc/en/group-by-functions.html#function_max)函数`created`来识别每个组中最近记录的相应值，然后使用该信息来连接外部/父查询中的表。我*认为*这就是您所追求的，但是如果没有您的表模式/示例数据，就很难确定（至少它应该让您走上正确的道路）：

```
SELECT Distribution.*
FROM   Distribution NATURAL JOIN (
  SELECT   user_id, feed_id, MAX(created) AS created
  FROM     Distribution
  GROUP BY user_id, feed_id
) t 
```

# android - 如何在android中播放具有多个视图的动画

> ID：12123125
> 
> 赞同：0
> 
> 时间：2012-08-25T15:08:50.700
> 
> 标签：android, animation, android-animation

我想在android中播放一个具有多个视图的动画。这是代码的简化示例。此代码工作不正确。每个 startAnimation() 调用都会影响所有以前的动画视图

请告诉我，为什么它不起作用以及如何正确制作它。

公共 SomeClass() {

```
private int currentViewID = 0; 
private View[] views = { view1, view2, view3, view4, view5 }
private Animation anim = AnimationUtils.loadAnimation(this.getContext(), android.R.anim.fade_out);

public SomeClass() {
    this.anim.setAnimationListener(new Animation.AnimationListener() {

        @Override
        public void onAnimationEnd(Animation animation) {
            if (SomeClass.this.currentViewID != SomeClass.this.views.length) SomeClass.this.hideNextView();
        }

        @Override
        public void onAnimationRepeat(Animation animation) {

        }

        @Override
        public void onAnimationStart(Animation animation) {

        }

    });
    this.hideNextView();
}

private void hideNextView() {
    this.views[this.currentViewID++].startAnimation(this.anim);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T21:54:40.847

如果您不想在课堂上处理许多动画（每个视图一个），您可以在本地执行操作：

```
private int currentViewID = 0; 
private View[] views = { view1, view2, view3, view4, view5 }

public SomeClass() {
    this.hideNextView();
}

private void hideNextView() {
    final Animation anim = AnimationUtils.loadAnimation(this.getContext(), android.R.anim.fade_out);

    anim.setAnimationListener(new Animation.AnimationListener() {

        @Override
        public void onAnimationEnd(Animation animation) {
            if (SomeClass.this.currentViewID != SomeClass.this.views.length) SomeClass.this.hideNextView();
        }

        @Override
        public void onAnimationRepeat(Animation animation) {}

        @Override
        public void onAnimationStart(Animation animation) {}

    });

    this.views[this.currentViewID++].startAnimation(anim);
} 
```

# php - 将图像从浏览器发送到服务器 - 可能吗？

> ID：12123127
> 
> 赞同：3
> 
> 时间：2012-08-25T15:09:29.597
> 
> 标签：php, javascript, html, image, canvas

有一个图片库网站，用户可以通过 javascript 和 HTML5 画布操作图片。是否可以将处理后的图像发送回服务器以使用 PHP 存储？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T15:26:38.687

[在这里](http://permadi.com/blog/2010/10/html5-saving-canvas-image-data-using-php-and-ajax/)您可以找到有关该主题的完整文章。但这里是简短版本和源代码：

首先，您需要将画布二进制数据转换为 base 64 编码字符串以将其发送到服务器：

```
var image = canvas.toDataURL("image/png"); 
```

使用 ajax 调用发送：

```
var ajax = new XMLHttpRequest();
ajax.open("POST",'save.php', false);
ajax.setRequestHeader('Content-Type', 'application/upload');
ajax.send(image); 
```

最后 PHP 脚本 save.php 看起来像这样：

```
<?php
if (isset($GLOBALS["HTTP_RAW_POST_DATA"]))
{
    // Get the data
    $imageData=$GLOBALS['HTTP_RAW_POST_DATA'];

    // Remove the headers (data:,) part. 
    // A real application should use them according to needs such as to check image type
    $filteredData=substr($imageData, strpos($imageData, ",")+1);

    // Need to decode before saving since the data we received is already base64 encoded
    $unencodedData=base64_decode($filteredData);

    //echo "unencodedData".$unencodedData;

    // Save file.  This example uses a hard coded filename for testing,
    // but a real application can specify filename in POST variable
    $fp = fopen( 'test.png', 'wb' );
    fwrite( $fp, $unencodedData);
    fclose( $fp );
}
?> 
```

PHP 脚本解析原始帖子数据，从 base 64 转换为二进制，并保存到文件中。有关 Base 64 的更多信息，请查看[这篇](http://en.wikipedia.org/wiki/Base64)Wikipedia 文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T15:20:53.890

是的，canvas 支持将图像数据作为 Base64 编码数据 url 或 Blob 返回。请参阅[http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-canvas-todataurl](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-canvas-todataurl)。然后，您可以获取数据 url 并使用 AJAX 将其发布到您的服务器，并在那里对其进行 Base64 解码。

# iphone - 单独的 Button 动作和 segue 动作

> ID：12123131
> 
> 赞同：5
> 
> 时间：2012-08-25T15:10:04.123
> 
> 标签：iphone, xcode, ios5, uistoryboardsegue

当按下按钮时，我必须按下一个新的 segue。但是我还附加了一个动作，需要在推动 segue 之前触发。

你能告诉我如何将它们分开吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-25T15:43:44.100

直接从一个视图控制器到另一个视图控制器，而不是将其连接到按钮。给它一个有意义的名字。

然后，在按钮的 action 方法中，首先执行您需要执行的任何操作，然后使用您的视图控制器的`performSegueWithIdentifier:`方法执行 segue，使用您之前选择的有意义的名称。

从您的评论来看，您似乎正在尝试在即将从您的 segue 中出现的视图控制器上设置属性。如果是这种情况，您应该实现`prepareForSegue:`, 并使用`segue.destinationViewController`来获取指向即将出现的视图控制器的指针。

# diff - 识别两个等长文件之间二进制差异的工具？

> ID：12123134
> 
> 赞同：1
> 
> 时间：2012-08-25T15:10:19.753
> 
> 标签：diff, centos, binaryfiles

我有一个应用程序实际上复制了一个文件，它有时无法忠实地复制一些 20MB 的测试文件。我想将原始文件与损坏的文件进行比较，看看是否可以识别任何模式来帮助我纠正应用程序中的错误。这些文件的长度完全相同。

什么是我可以在 Centos 4 或 5 上运行的工具，它可以让我逐字节查看这两个文件之间的差异。我希望差异非常小，例如文件中某处的混乱位，我想对差异及其与文件开头的偏移进行微调。内置的 Unix diff 实用程序仅表示在给定二进制文件时它们有所不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T15:17:34.130

您可以使用[`cmp`](https://en.wikipedia.org/wiki/Cmp_%28Unix%29).

```
cmp file1 file2 
```

# php - PHP图片上传问题。上传经过网络优化但不是原始图像的图像

> ID：12123136
> 
> 赞同：0
> 
> 时间：2012-08-25T15:10:28.870
> 
> 标签：php, html, ajax, file-upload, w3c

我遇到了使用 PHP 上传图片的问题。所有图像均为JPEG

我有几个文件从相机和 iPhone 复制到我的桌面。所有文件的大小从 800Kb 到 6MB 不等。

以上来自相机或 iPhone 的文件都不会上传到我的服务器，这不是因为 MAX_UPLOAD_SIZE，因为我已经将其配置为 30M (30MB)。

现在我在 Photoshop 中打开了其中两个图像（大小为 5.6MB 和 1.9MB）并将它们保存为网络图像。这两个图像大小都保持不变（因为我强迫它们保持不变）。现在，当我尝试将此经过 Photoshop 优化的图像上传到我的服务器时，它们已成功上传。我只是不明白这里有什么问题。来自 iphone 和相机的图像是否有一些限制或限制上传的特定标题？请注意，我在上传之前将图像复制到了我的桌面，而不是尝试直接从设备文件夹上传。

这是文件的html和php编码：

```
<?php
if (isset($_POST['submit'])){
    $allowedExts = array("jpg", "jpeg", "gif", "png");
    $extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/jpg")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& in_array($extension, $allowedExts))
{
    if ($_FILES["file"]["error"] > 0)
{
    echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
}
else
{
    echo "Upload: " . $_FILES["file"]["name"] . "<br />";
    echo "Type: " . $_FILES["file"]["type"] . "<br />";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
    echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />";

if (file_exists("image_test/" . $_FILES["file"]["name"]))
  {
    echo $_FILES["file"]["name"] . " already exists. ";
  }
else
  {
    move_uploaded_file($_FILES["file"]["tmp_name"],
    "image_test/" . $_FILES["file"]["name"]);
    echo "Stored in: " . "image_test/" . $_FILES["file"]["name"];
  }
}
  }
  else
 {
   echo "Invalid file";
 }
 } 
?>

<html>
<body>

<form action="upload_test.php" method="post"
enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="file" id="file" /> 
<br />
<input type="submit" name="submit" value="Upload" />
</form>

</body>
</html> 
```

如果有人对此问题有答案或暗示，那么我将不胜感激。

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T18:34:30.207

找到答案，修改上面代码的顶部如下：

```
<?php
if (isset($_POST['submit'])){
    if ((($_FILES["file"]["type"] == "image/gif")
    || ($_FILES["file"]["type"] == "image/jpeg")
    || ($_FILES["file"]["type"] == "image/jpg")
    || ($_FILES["file"]["type"] == "image/pjpeg")))
{ 
```

基本上，这是由于 end()。尝试在 localhost 服务器上使用相同的脚本，它开始给我一个错误，如下所示：

**严格标准：在第 9 行的 C:\xampp\htdocs\search\php\loader\csvFileUploader1.php 中只能通过引用传递变量**

这导致我对其进行研究，这给了我一个解决方案，这是由于第 4 行中的最终功能。

感谢大家试图帮助我。我很欣赏你的评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T00:11:50.303

*注意力！*文件名可能在`UPPERCASE`.

尝试更换

```
 $extension = end(explode(".", $_FILES["file"]["name"])); 
```

和

```
 $extension = strtolower(end(explode(".", $_FILES["file"]["name"]))); 
```

此致。

# solr - Solr 索引不可见

> ID：12123144
> 
> 赞同：10
> 
> 时间：2012-08-25T15:11:26.663
> 
> 标签：solr

我们正在使用**训练服务器**创建**solr 索引**并通过 rsync 将它们上传到另一个（solr）服务器。

到现在为止，一切都很好。现在，我们在一个核心上的索引大小急剧增加，我们的 solr 实例拒绝读取该核心上的那些索引。此外，他们无一例外地忽略了这些索引。（我们肯定会重新加载内核或`tomcat`在之后重新启动`rsyncs`）

即：在`solr stats`，`numDocs`是`0`或`/select?q=*:*`不返回任何结果..

只是为了回答这个问题，这些索引是否已损坏，我们已经重新生成了几次。但一切都没有改变。当我们尝试使用较小的索引时，它们会被很好地读取。

我们这个核心中的solrconfig.xml是这样的；[https://gist.github.com/983ebb13c895c9cccbfb](https://gist.github.com/983ebb13c895c9cccbfb)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T04:04:44.573

使用 rsync 复制索引是个*坏主意*。当您启动复制操作时，您的 Solr 服务器可能尚未完成将文件写入磁盘，您最终可能会损坏。唯一安全的方法是关闭主服务器（源索引），关闭从服务器（目标索引），删除从服务器索引目录的全部内容，复制主服务器的索引，然后重新启动一切。

更好的方法是上面 Peer Allan 所建议的 - 使用 Solr 的内置复制支持。请参阅[http://wiki.apache.org/solr/SolrReplication](http://wiki.apache.org/solr/SolrReplication)。

# css - 样式表中的 CSS3 关键帧

> ID：12123146
> 
> 赞同：0
> 
> 时间：2012-08-25T15:11:53.533
> 
> 标签：css

我找到了由richard bradshaw 编写的关于css3 转换的一个很好的教程，可以在 [http://css3.bradshawenterprises.com/cfimg/找到](http://css3.bradshawenterprises.com/cfimg/)

我正在尝试设置我的母版页（ASP.Net 4），其中包含 3 个图像转换的 div，Visual Studio 2010 完全不喜欢以下关键帧指令，为什么？我设置在 html5 和 css3 上。

```
@-webkit-keyframes cf3FadeInOut {
 0% {
   opacity:1;
 }
25% {
    opacity:1;
}
75% {
    opacity:0;
}
 100% {
   opacity:0;
 }
}

@-moz-keyframes cf3FadeInOut {
 0% {
   opacity:1;
 }
25% {
    opacity:1;
}
75% {
    opacity:0;
}
 100% {
   opacity:0;
 }
} 
```

这是动画代码；

```
.logotransitions img.top {
       -webkit-animation-name: cf3FadeInOut;
    -webkit-animation-timing-function: ease-in-out;
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-duration: 18s;
    -webkit-animation-direction: alternate;

    -moz-animation-name: cf3FadeInOut;
    -moz-animation-timing-function: ease-in-out;
    -moz-animation-iteration-count: infinite;
    -moz-animation-duration: 18s;
    -moz-animation-direction: alternate;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T15:19:41.223

这些只是动画定义......您仍然需要声明您的目标元素使用该动画：

```
div {
    -webkit-animation : cf3FadeInOut 1s ease infinite;
    -moz-animation : cf3FadeInOut 1s ease infinite;
    animation : cf3FadeInOut 1s ease infinite;
} 
```

顺便说一句，除非您只针对 webkit 和 mozilla 浏览器，否则您应该更新您的代码（定义和声明）以包含所有浏览器供应商：

```
div {
    -webkit-animation : cf3FadeInOut 1s ease infinite; /*webkit*/
    -o-animation : cf3FadeInOut 1s ease infinite; /*opera*/
    -moz-animation : cf3FadeInOut 1s ease infinite; /*mozzila*/
    -ms-animation : cf3FadeInOut 1s ease infinite; /*ie*/
    animation : cf3FadeInOut 1s ease infinite; /*no vendor*/
}

/*...*/
@-o-keyframes cf3FadeInOut {/*...*/}
/* ... and so on*/ 
```

# ruby-on-rails - 不能使用 OR 运算符

> ID：12123147
> 
> 赞同：0
> 
> 时间：2012-08-25T15:11:57.413
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我正在尝试使用`OR`消息控制器中的运算符来显示对话。我尝试了在这里找到的两个语句，但它们都不起作用。

第一个：

```
@messages = current_user.messages.where(:sender_id => params[:sender_id]).OR(:reciptient_id => params[:sender_id]) 
```

> 错误：或找不到方法

第二个：

```
@messages = current_user.messages.where("sender_id = :sender_id OR recipient_id = :sender_id", {sender_id => params[:sender_id], :recipient_id => params[:sender_id]}) 
```

> 错误：未定义的局部变量或方法 sender_id

我正在使用 Rails 3.2。有人可以告诉我我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T15:19:32.100

第二个几乎是对的，只是有点错别字。它应该是这样的：

```
@messages = current_user.messages.where("sender_id = :sender_id OR recipient_id = :sender_id", 
{:sender_id => params[:sender_id], :recipient_id => params[:sender_id]}) 
```

您错过了 sender_id 之前的“：”。

# macos - 如何以编程方式模拟鼠标点击而不在 Cocoa 中移动鼠标

> ID：12123150
> 
> 赞同：8
> 
> 时间：2012-08-25T15:12:05.313
> 
> 标签：macos, cocoa, accessibility, macos-carbon

我有兴趣在不实际移动鼠标的情况下在 Mac OS X 上模拟鼠标单击事件/键盘敲击。

在 Windows 中，可以使用消息来执行此操作：

[win32：模拟点击而不模拟鼠标移动？](https://stackoverflow.com/questions/3720968/win32-simulate-a-click-without-simulating-mouse-movement)

Mac OS X 有类似的东西吗？我知道[Quartz Event Services](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html)，但似乎该 API 只会限制我将事件发送到当前键窗口。这是真的？是否可以将键盘/鼠标事件发送到非键窗口？我真的只需要能够将键盘命令发送到另一个应用程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-10T18:45:52.330

我知道这是一个旧线程，但我想发布一个答案，以防万一有人偶然发现。

做到这一点的两种最佳方法实际上是完全独立于平台的。（除非您想使用 C，在我看来这不必要地冗长，但如果您想使用它，[请参阅此答案](https://stackoverflow.com/a/3851793/3294076)）

**1）**最简单的方法是使用[javAuto](http://javauto.org/)。（注：javAuto 已移至[此处](http://javauto-lang.org/)）。它几乎是一个可以跨平台编译和运行基本自动化脚本的 java 程序。要模拟鼠标点击，您可以使用以下命令：

`mouseClick(button, x, y);`

要在不移动鼠标的情况下模拟 mouseClick，您可以使用以下命令：

```
// get cursor coordinates
int cPos[] = cursorGetPos();

// mouse click at the coordinates you want
mouseClick("left", x, y);

// instantly move the mouse back
mouseMove(cPos[0], cPos[1]); 
```

由于 mouseClick 和 mouseMove 命令不涉及任何临时鼠标移动，因此在 (x, y) 处会发生单击，但鼠标根本不会移动。

**2)**下一个最好的方法是使用常规 Java，这将比 javaAuto 中的相同进程涉及更多代码。

```
import java.awt.*;
import java.awt.event.InputEvent;

public class example {
    public static void main(String[] args) {
        //get the current coordinates
        PointerInfo a = MouseInfo.getPointerInfo();
        Point b  = a.getLocation();
        int xOrig = (int)b.getX();
        int yOrig = (int)b.getY();

        try {
            //simulate a click at 10, 50
            Robot r = new Robot();
            r.mouseMove(10, 50);
            r.mousePress(InputEvent.BUTTON1_MASK); //press the left mouse button
            r.mouseRelease(InputEvent.BUTTON1_MASK); //release the left mouse button

            //move the mouse back to the original position
            r.mouseMove(xOrig, yOrig);
        } catch (Exception e) {
            System.out.println(e.toString());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-11-14T00:22:47.560

这是一个工作 C 程序，用于模拟坐标 (X,Y) 处的 N 次点击：

```
// Compile instructions:
//
// gcc -o click click.c -Wall -framework ApplicationServices

#include <ApplicationServices/ApplicationServices.h>
#include <unistd.h>

int main(int argc, char *argv[]) {
  int x = 0, y = 0, n = 1;
  float duration = 0.1;

  if (argc < 3) {
    printf("USAGE: click X Y [N] [DURATION]\n");
    exit(1);
  }

  x = atoi(argv[1]);
  y = atoi(argv[2]);

  if (argc >= 4) {
    n = atoi(argv[3]);
  }

  if (argc >= 5) {
    duration = atof(argv[4]);
  }

  CGEventRef click_down = CGEventCreateMouseEvent(
    NULL, kCGEventLeftMouseDown,
    CGPointMake(x, y),
    kCGMouseButtonLeft
  );

  CGEventRef click_up = CGEventCreateMouseEvent(
    NULL, kCGEventLeftMouseUp,
    CGPointMake(x, y),
    kCGMouseButtonLeft
  );

  // Now, execute these events with an interval to make them noticeable
  for (int i = 0; i < n; i++) {
    CGEventPost(kCGHIDEventTap, click_down);
    sleep(duration);
    CGEventPost(kCGHIDEventTap, click_up);
    sleep(duration);
  }

  // Release the events
  CFRelease(click_down);
  CFRelease(click_up);

  return 0;
} 
```

托管在[https://gist.github.com/Dorian/5ae010cd70f02adf2107](https://gist.github.com/Dorian/5ae010cd70f02adf2107)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-15T11:14:59.890

您可以使用 NSEvent、CGEvent 或 Accessibility API 来完成此操作。诀窍是，如果它不是最前面的应用程序，您通常需要首先激活要单击的应用程序。然后，您只需单击屏幕坐标中的一个点。

# android - SQLiteConstraintException：错误代码 19：约束失败 Android

> ID：12123158
> 
> 赞同：2
> 
> 时间：2012-08-25T15:13:14.467
> 
> 标签：android, sqlite

我正在尝试将经纬度坐标插入到 SQLite 表中，我得到了`SQLiteConstraintException: error code 19: constraint failed`.

我有 try/catch 包围的代码，并且没有抛出异常。我在我的 logcat 中收到约束错误。

我已经附加了数据库类和来自我的主要活动的调用。任何帮助或指导将不胜感激！

以下是我的 logcat 的前几行：

```
08-25 14:39:06.934: E/SQLiteDatabase(681): Error inserting lat=59310767 longi=-8613281
08-25 14:39:06.934: E/SQLiteDatabase(681): android.database.sqlite.SQLiteConstraintException: error code 19: constraint failed
08-25 14:39:06.934: E/SQLiteDatabase(681):  at android.database.sqlite.SQLiteStatement.native_executeInsert(Native Method)
08-25 14:39:06.934: E/SQLiteDatabase(681):  at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:113)
08-25 14:39:06.934: E/SQLiteDatabase(681):  at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1745)
08-25 14:39:06.934: E/SQLiteDatabase(681):  at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1618) 
```

这是我的 DbHelper 中的代码：

```
public void onCreate(SQLiteDatabase db) 
{
    // TODO Auto-generated method stub
    db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + 
            KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + 
            KEY_LAT + " REAL NOT NULL, " + 
            KEY_LONGI + " REAL NOT NULL)" 

            // KEY_NAME + " TEXT NULL, " +
            // KEY_INFO + " TEXT NULL);"
    );
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub
    db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
    onCreate(db);
} 
```

这是我的数据库管理器

```
public DatabaseManager(Context c) {
    ourContext = c;
}

public DatabaseManager open() throws SQLException {
    ourHelper = new DbHelper(ourContext);
    ourDB = ourHelper.getWritableDatabase(); //example show writeable
    return this;
}

public void close() {
    ourHelper.close();
} 

public long createPin(long latitude, long longitude) {
    ContentValues cv = new ContentValues();
    cv.put(KEY_LAT, latitude);
    cv.put(KEY_LONGI, longitude);

    return ourDB.insert(DATABASE_TABLE, null, cv);
} 
```

这是来自我的 MainActivity 的调用：

```
try{
    long longitude= touchedPoint.getLongitudeE6();
    long latitude= touchedPoint.getLatitudeE6();

    //Add Pin to the Database
    DatabaseManager db = new DatabaseManager(MainActivity.this);
    db.open();
    db.createPin(latitude,longitude);
    db.close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T15:28:53.750

删除关键字 AUTOINCREMENT。sqlite 不是必需的。如果您尝试将空值插入主整数键，则该字段将自动转换为比该列的最大值大一的整数。

此外，您必须清除模拟器上的 appdata。之后，您可以确定数据库是空的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T15:21:11.180

**替换**:`AUTO_INCREMENT`而不是`AUTOINCREMENT` ^

# jpa - 为什么数据在验证期间更新

> ID：12123162
> 
> 赞同：-1
> 
> 时间：2012-08-25T15:13:25.623
> 
> 标签：jpa, spring-mvc

我正在使用 Spring MVC 和 JPA。我正在验证表格。但是，在验证期间，数据会更新到数据库中。我不明白为什么会这样。谁能告诉我为什么在验证期间数据会更新？

这是我的代码：

```
@Override
public String save(HttpServletRequest request,
        @ModelAttribute("modelObject") Ticket entity,
        BindingResult bindingResult, ModelMap model) {
    String type = request.getParameter("type");

    request.getSession().setAttribute("subcontractor", entity.getSubcontractor());
    request.getSession().setAttribute("truck", entity.getVehicle());
    request.getSession().setAttribute("trailer", entity.getTrailer());
    request.getSession().setAttribute("terminal", entity.getTerminal());
    request.getSession().setAttribute("enteredBy", entity.getCreatedBy());
    request.getSession().setAttribute("batchDate", entity.getBillBatch());

    // Validate for Duplicate OriginTicket#
    if (type.equals("complete")) {  
        // validate entity
        try {
            getValidator().validate(entity, bindingResult);
        } catch (ValidationException e) {
            e.printStackTrace();
            log.warn("Error in validation :" + e);
        }
        if (entity.getDriver() == null) {
            bindingResult.rejectValue("driver", "error.select.option",
                    null, null);
        }
        if (entity.getVehicle() == null) {
            bindingResult.rejectValue("vehicle", "error.select.option",
                    null, null);
        }
        if (entity.getOrigin() == null) {
            bindingResult.rejectValue("origin", "error.select.option",
                    null, null);
        }
        if (entity.getDestination() == null) {
            bindingResult.rejectValue("destination", "error.select.option",
                    null, null);
        }
        if (entity.getTrailer() == null) {
            bindingResult.rejectValue("trailer", "error.select.option",
                    null, null);
        }
        if (entity.getCreatedBy() == null) {
            bindingResult.rejectValue("createdBy", "error.select.option",
                    null, null);
        }
        if (entity.getUnloadDate()!=null && entity.getLoadDate()!=null) {
            if (entity.getUnloadDate().before(entity.getLoadDate())) {
                bindingResult.rejectValue("unloadDate", "error.textbox.unloadDate",
                        null, null);
            }
        }
        if(reportService.checkDuplicate(entity,"O")){
            bindingResult.rejectValue("originTicket", "error.duplicate.entry",  null, null);        
        }
        if(reportService.checkDuplicate(entity,"D")){
            bindingResult.rejectValue("destinationTicket", "error.duplicate.entry", null, null);        
        }
        /*if (getUser(request).getBillBatchDate()!=null) {
            entity.setBillBatch(getUser(request).getBillBatchDate());
        }*/
        entity.setStatus(1);
        if(entity.getTicketStatus()!=2){
            System.out.println("\nentity.getTicketStatus()!=2\n");
        entity.setTicketStatus(1);
        }

        // return to form if we had errors
        if (bindingResult.hasErrors()) {
            setupCreate(model, request);
            return urlContext + "/form";
        }
        beforeSave(request, entity, model);
        User user=genericDAO.getById(User.class,entity.getCreatedBy());
        entity.setEnteredBy(user.getName());
        // merge into datasource
        genericDAO.saveOrUpdate(entity);
        cleanUp(request);
        // return to list
        setupCreate(model, request);
        request.getSession().setAttribute("msg",
                "Ticket added successfully");
        return "redirect:create.do";
    } else {
        if(reportService.checkDuplicate(entity,"O")){
            bindingResult.rejectValue("originTicket", "error.duplicate.entry",  null, null);        
        }
        else if(reportService.checkDuplicate(entity,"D")){
            bindingResult.rejectValue("destinationTicket", "error.duplicate.entry", null, null);        
        }
        // return to form if we had errors
        if (bindingResult.hasErrors()) {
            setupCreate(model, request);
            return urlContext + "/form";
        }
        //entity.setBillBatch(getUser(request).getBillBatchDate());

        //entity.setTicketStatus(0);
        entity.setStatus(3);
        if(entity.getTicketStatus()!=2){
            System.out.println("\nNEXT entity.getTicketStatus()!=2\n");
        entity.setTicketStatus(0);
        }
        beforeSave(request, entity, model);
        User user=genericDAO.getById(User.class,entity.getCreatedBy());
        entity.setEnteredBy(user.getName());

        genericDAO.saveOrUpdate(entity);
        return "redirect:create.do";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:09:53.137

不应该线

```
genericDAO.saveOrUpdate(entity); 
```

负责吗？

# php - PHP变量中的地址，没有Javascript嵌入的谷歌地图？

> ID：12123164
> 
> 赞同：8
> 
> 时间：2012-08-25T15:13:43.720
> 
> 标签：php, google-maps, geocoding

我认为自己是一名普通的 PHP 编码员，但我几乎无法编辑我网站上需要的少量 JavaScript 代码。我在 PHP 变量中有一个地址，我希望在我的网页上显示一个带有该地址的简单地图。我在互联网上进行了一些研究，发现了很多操作地理编码，将地址转换为 Google API 可以理解的位置，但我完全迷路了。没有可以嵌入变量的简单代码吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-25T16:23:37.343

您可以使用 iframe 并将地址作为 URL 参数传递。

```
<iframe width="640" height="480" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.it/maps?q=<?php echo $yourAddress; ?>&output=embed"></iframe> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T21:18:09.827

您必须使用[Geocoder API](https://developers.google.com/maps/documentation/javascript/reference?hl=en-US#Geocoder)。

给你（原件可以在[这里](https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-simple?hl=en-US)找到）：

```
<head>
...
<script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script>
  var geocoder;
  var map;
  function initialize() {
    geocoder = new google.maps.Geocoder();

    var mapOptions = {
      zoom: 12, //Change the Zoom level to suit your needs
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    //map_canvas is just a <div> on the page with the id="map_canvas"
    map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

    //Your Variable Containing The Address
    var address = "<?php echo $AddressVariable; ?>"; 
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location);
        //places a marker on every location
        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
        });
      } else {
        alert('Geocode was not successful for the following reason: ' + status);
      }
    });

  }

</script>
...
</head> 
```

将此添加到页面的开始`body`标记以初始化地图：

```
<body onload="initialize()"> 
```

这[是](https://developers.google.com/maps/documentation/javascript/reference?hl=en-US#Geocoder)该课程的文档`Geocoder`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-18T10:43:06.710

更新的代码 - 现在需要 API 密钥。您可能需要对地址进行 urlencode，但如果没有它，它甚至应该可以工作：

```
<iframe
  width="600"
  height="450"
  frameborder="0" style="border:0"
  src="https://www.google.com/maps/embed/v1/place?key=API_KEY
    &q=<?php echo $address; ?>" allowfullscreen>
</iframe> 
```

来源：[https ://developers.google.com/maps/documentation/embed/get-started](https://developers.google.com/maps/documentation/embed/get-started)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-11T08:06:32.183

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<?php 
 $address = str_replace(" ", "+",$address_variable);
?>
<iframe style="width:100%;height:50%;" frameborder="0" id="cusmap" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.it/maps?q=<?php echo $address; ?>&output=embed"></iframe> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-28T18:53:13.490

这里还有另一个例子：

```
<div class="container rounded border shadow-sm info-property mt-4 pt-4 pl-5 pr-5 pb-2 bg-white">
    <div class="row mt-3">
        <div class="col-12">
            <h6 class="info-property-title">Mapa:</h6>
        </div>
        <div class="col-12">
            <iframe width="100%" height="100%" 
                src="https://maps.google.it/maps?q=<?php echo $map_address; ?>&output=embed"
                frameborder="0" 
                style="border:0;" 
                allowfullscreen="" 
                aria-hidden="false" 
                tabindex="0"
                scrolling="no" 
                marginheight="0" 
                marginwidth="0"
                >
            </iframe>
        </div>
    </div>
</div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-31T10:59:27.830

**嵌入 Gmap**

谷歌地图的不同模式：[https ://developers.google.com/maps/documentation/embed/embedding-map](https://developers.google.com/maps/documentation/embed/embedding-map) [![这里](../Images/7a5b41c3e0f67a5bead3eafdb5b558f5.png)](https://i.stack.imgur.com/GbPhJ.png)

**选择地图模式**

您可以在请求 URL 中指定以下地图模式之一：

1.  **place**：在特定地点或地址（例如地标、商业、地理特征或城镇）显示地图图钉。

2.  **view**：返回没有标记或方向的地图。

3.  **方向**：显示地图上两个或多个指定点之间的路径，以及距离和旅行时间。

4.  **街景**：显示指定位置的交互式全景视图。

5.  **search**：显示整个可见地图区域的搜索结果。

    ```
     <div id="maps"></div>

         $(document).ready(function() {   
            var key = 'xxxxxxxxxxxxxxxxxxxxxxxxxx';
            var lat = '54.320889726653014';
            var lon = '-130.30591155093268';
            var addr = '<?php echo sanitize($restaurant_details['address']); ?>';  
            var width = 350;
            var height = 350;    

            var embed= "<iframe width='"+width+"' height='"+height+"' frameborder='0' scrolling='no' marginheight='0' marginwidth='0'src='https://www.google.com/maps/embed/v1/view?key="+key+"&zoom=18&center="+lat+","+lon+"'></iframe>";

        $('#maps').html(embed);
    }); 
    ```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-06-11T08:04:35.930

这些链接对您来说是完整的..不是确切的链接，而是它的完整使用:) tc..

1)[从谷歌地图 iframe 中删除地址气泡](http://www.wduffy.co.uk/blog/remove-address-bubble-from-google-maps-iframe/)

2)[谷歌地图](http://tulsawebresults.com/how-to-hide-the-info-bubble-in-a-google-map)

# intellij-idea - Intellij Idea 11 无法远程连接到 JBoss 7.1.1

> ID：12123169
> 
> 赞同：3
> 
> 时间：2012-08-25T15:14:39.937
> 
> 标签：intellij-idea, jboss7.x

我正在尝试将一个简单的爆炸式战争应用程序从想法 11.1.3 部署到远程（同一台机器）JBoss 7.1.1。战争构建良好并开始部署，但我在尝试部署时不断收到以下消息：

> 运行 JBoss 7.1.1.Final 时出错：无法连接到 localhost:8080

我正在使用 Intellij 的默认 JBoss 7 Remote 配置，我过去曾成功使用过该配置。我可以使用任何浏览器直接访问 localhost:8080，因此我知道它的响应。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:20:11.987

我遇到了同样的问题并找到了解决方案。可能是这个问题出现了，因为我刚刚从 Eclipse 切换。所以我认为有人可能会有所帮助。

为了远程正确调试 JBoss，我们需要指定 3 个端口：

1) http 端口（“远程连接设置”部分的“端口”字段）用于 ping JBoss 服务器（定期检查服务器是否处于活动状态）并生成 url 寻址服务器上的资源 - FIRST TAB

2）本机管理端口（'JBoss Server Settings'部分的'Management port'字段）用于连接到JBoss管理界面，检查服务器启动是否完成并部署工件 - FIRST TAB

3) 远程套接字端口 - 默认情况下在 JBoss 上为 8787 - LAST TAB

在这一切都会正常工作。

我有点困惑，因为如果我在 sudo 下运行 JBoss——远程调试就可以了。

# java - Java中的程序构造

> ID：12123170
> 
> 赞同：2
> 
> 时间：2012-08-25T15:14:45.823
> 
> 标签：java, layout, constructor, initialization

我的程序构建有问题。我似乎找不到我需要将构造函数放入的位置或原因。我不知道它是否在那里。无论如何，这是主要代码：

```
import java.io.FileNotFoundException;
import java.util.Scanner;

public class HangmanProject
{
    public static void main(String[] args) throws FileNotFoundException
    {
        public static void getFile() {

    getFile gf() = new getFile();
    Scanner test = gf.wordScan;      
   }     
} 
```

这就是主程序，但它调用了这个：

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.util.Scanner;

public class getFile 
          {  
    String wordList[] = new String[10];    // array to store all of the words
    int x = 0;

    Scanner keyboard = new Scanner(System.in);    // to read user's input

    System.out.println("Welcome to Hangman Project!");

                                 // Create a scanner to read the secret words file
    Scanner wordScan = null;

    try {
        wordScan = new Scanner(new BufferedReader(new FileReader("words.txt")));
        while (wordScan.hasNext()) {
            wordList[x] = wordScan.next();  
            System.out.println(wordList[x]);  
            x++;  
                                   }
        } 
    finally {
        if (wordScan != null)
        {
            wordScan.close();
        }
    }
} 
```

我的问题是：

*   我的构造函数在哪里，
*   我是否正确使用它，
*   我的布局应该改变吗？

我的导师告诉我*“我仍然没有在你的类中看到构造函数方法，你应该在其中为你的类初始化实例变量。你不能只将代码放在一个类中。”* 我真的不明白那是什么意思。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T15:25:02.530

构造函数是在 Java 和其他 OO 语言中初始化对象的特殊子例程。如果您不声明构造函数，则类将具有隐式默认构造函数（不执行任何操作并返回）。

您的问题的评论中提到的代码的其他问题是它根本无法编译。您不能将代码放在不是字段或类声明的类主体中。不是类或字段声明的代码必须存在于构造函数、方法、静态方法、初始化程序或静态初始化程序中。

Oracle 自己的 Java 教程是开始学习 Java 语言的绝佳资源。这些教程可以在 Oracles 网站上找到，第一个教程（下面链接为 Trail：Getting Started）将帮助您编写和理解您的第一个 Java 程序。对于手头的特定问题，解释类和对象使用的教程（也在下面链接）将很有用。

一旦你走得更远，你可能会发现你可以就你卡住的概念提出更具体的问题。

[路径：入门](http://docs.oracle.com/javase/tutorial/getStarted/index.html)

[课程：类和对象](http://docs.oracle.com/javase/tutorial/java/javaOO/index.html)

[Java 教程](http://docs.oracle.com/javase/tutorial/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T15:29:14.587

您可以将 Constructor 假定为与类同名且没有返回类型的特殊方法。

所以如果类名是`HangmanProject`

构造函数应该是

```
public HangmanProject(){
} 
```

其次，它应该在 this 是构造函数的类中......

```
class HangmanProject{
    public HangmanProject(){
    }
} 
```

最后它也可以接受参数；你可以重载它们，即你可以在一个类中有多个构造函数。

```
class HangmanProject{
    Integer attemptsLeft;
    public HangmanProject(){
        attemptsLeft = 10;
    }

    public HangmanProject(Integer attempts){
        this.attemptsLeft = attempts;
    }

} 
```

构造函数的用途也是初始化类的字段。

以您的其他课程为例...

```
public class GetFile {    //  Changed as per naming convention...

     String wordList[];
     int x;
     Scanner keyboard = null;    // to read user's input
     Scanner wordScan = null;

     public GetFile(){     // Here is the constructor
         this.wordList = new String[10];
         this.x=0;
     }

} 
```

希望这对你有帮助！！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T15:45:25.733

不同的 Java 程序员在他们的编程方式上可以有不同的风格和方法。通过使用标准的 Java 命名约定，他们使他们的代码更容易为他们自己和其他程序员阅读。Java 代码的可读性很重要，因为这意味着花费更少的时间试图弄清楚代码的作用，从而留出更多的时间来修复或修改它。

为了说明这一点，值得一提的是，大多数软件公司都有一份文档，其中概述了他们希望程序员遵循的命名约定。熟悉这些规则的新程序员将能够理解可能在多年前离开公司的程序员编写的代码。

[Java 编程语言的代码约定](http://www.oracle.com/technetwork/java/codeconv-138413.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T16:08:13.943

首先，我对您的程序进行了一些修改。您的第一个大错误是您有一个名为 getFile 的类，还有一个名为 getFile 的方法。保留方法名作为方法名，但类名通常大写。我将其更改为 GetFile。

```
import java.util.*;
import java.io.*;
public class HangmanProject{
   public static void main(String[] args) throws FileNotFoundException{ //this is the first thing that runs, the main method
      GetFile gf = new GetFile();  //this will create the getFile object
      try {
         gf.getWords(); //runs the method that we make later
      }
      catch(FileNotFoundException potatoes) {   //this will print out error message if there is no words.txt
         System.out.println(potatoes.getMessage());
      }                                
    } //closes main method
} 
```

好的; 现在到实际的类本身。

```
import java.util.*;
import java.io.*;
public class GetFile {        
    //Here are your variables
    private String[] wordList = new String[10];   
    private int x = 0;                             
    //good practice to have variables private;
    //Now it is time for the constructor.
    public GetFile() 
       { 
     //empty constructor; you don't need to have any instance variables declared.
       } 
    public void getWords() throws FileNotFoundException {  //the big method for doing stuff
        Scanner keyboard = new Scanner(System.in);    // to read user's input
        System.out.println("Welcome to Hangman Project!");
        Scanner wordScan = null;
        wordScan = new Scanner(new File("words.txt"));
        while (wordScan.hasNext()) { //checking if there are more words
            wordList[x] = wordScan.next();  
            System.out.println(wordList[x]);  //print them out as the array is filled
            x++;  
            }
        if (wordScan != null)
           {
           wordScan.close(); //close the file after you are finished
           }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-25T15:42:39.570

这是我尝试解决您如何使用 java 的大多数问题的示例 :-) 将来考虑特别使用 Eclipse 之类的 IDE 进行编程[http://www.eclipse.org/downloads/](http://www.eclipse.org/downloads/)并在尝试更多之前学习 java 的基础知识复杂的事情。

将“Hello world”打印到控制台是首先要走的路，然后逐步前进，创建另一个类可能两个，创建它们的一些实例并使它们也打印消息到控制台。不要急于求成！学习基础知识是你未来遇到的每一种语言的必修课，祝你旅途愉快！:)

**主.java**

```
 public class Main
    {
        public static void main(String[] args)
        {

          System.out.println("Welcome to Hangman Project!");

          // lets initialize your FileHandler class, this will call its constructor btw.
          FileHandler fileHandler = new FileHandler();

          // and lets call its method after that
          fileHandler.readFile();

       }     

    } 
```

**文件处理程序.java**

```
public class FileHandler{

   // place for your attributes belonging to full class

   // Im the constructor
   public FileHandler() {
         // you can do something here like your initializations for attributes
         System.out.println("FileHandler instance created!");
   }

   public void readFile() {
         // do your file reading here
         System.out.println("FileHandler readfile() called!");
   } 
```

}

# objective-c - Xcode，找不到我创建的课程

> ID：12123171
> 
> 赞同：23
> 
> 时间：2012-08-25T15:14:56.650
> 
> 标签：objective-c, ios, xcode, class

我正在使用 Xcode（适用于 iOS）并在我的 Storyboard 中添加了一个视图控制器。现在我创建了一个类（文件 -> 新文件 -> Objective-c 类）并将其作为 UIViewController 的子类。现在 .h 和 .m 文件已生成并列在 Xcode 的左侧，但是当我想更改添加的视图控制器的“自定义类”时，我生成的类没有任何位置。难道我做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-25T16:29:43.900

我有同样的问题。退出并打开 Xcode 将使 Class 出现在列表中。

编辑：我最近还发现粘贴类名可以在 5.02 Xcode 中使用。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-12T01:58:34.687

我有同样的问题。但我发现我在“故事板窗口”内单击并选择了一个视图，因此没有相关的 viewController。我的解决方案是：单击所有者内部，或左侧列表中的 viewController，然后更改自定义类。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-10-04T21:02:40.187

有多种方法......

1

> 选择项目图标 > TARGETS > Build Phases > Compile Sources 单击 + 按钮并添加您的 *.m 文件

2

> 另一个是
> 
> ```
> 2.1.save all my work;
> 
> 2.2.just quit Xcode & load it again;
> 
> 2.3.then I was able to insert the new outlet connection successfully. 
> ```

3

```
 Close the project you are working on with.
    Delete the【DerivedData】folder of you project. 
    (This folder may inside your project's folder,
    or inside ~/Library/Developer/XCode/DerivedData/(your project)/ ) 
    or somewhere else that were setup by you.restart you project. 
```

4

> 只需清理您的项目，然后再次构建检查或运行。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-25T20:08:27.933

我不确定您所说的“但是当我想更改添加的视图控制器的“自定义类”时，我生成的类无处可寻”。似乎您正试图使情节提要中的 UIViewController 与您的自定义 UIViewController 子类的类型相同。

如果是这种情况，请选择您的 UIViewController（确保您没有在该 UIViewController 中选择 UIView）

选择 UIViewController 后，打开右侧视图并打开 Custom Class 选项卡，然后开始输入 UIViewController 子类的名称。

如果这不起作用，那么您需要确保在 .h 文件中您说：

```
@interface MyCustomUIViewController : UIViewController 
```

如果它仍然无法正常工作，请确保在情节提要中选择您放下的 UIViewController。如果您尝试使用 UIViewController 子类填充 UIView 的自定义类，它将无法正常工作！

如果还是不行，试试 COMMAND+SHIFT+K 和 COMMAND+B 来清理和构建！祝你好运。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-03T13:41:06.927

如果您即将放弃，请提供一个快速建议：请检查您在情节提要中拥有的项目是否与您创建并尝试分配的自定义类兼容。例如，如果您在情节提要中有 UIImageView 作为组件，则不能选择基于 UIView 的类。在这种情况下，它根本不会出现在下拉列表中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-08T10:01:01.353

您不必完全退出 Xcode。只需完全关闭所有 Storyboard 选项卡，然后双击它重新打开一个新选项卡。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-28T19:10:04.880

针对我的情况的解决方案 - 只需关闭所有其他 xCode 窗口（我同时打开了几个项目）。

有时也帮助清理项目。

# mysql - 如何防止空值更新 MySQL 数据库

> ID：12123177
> 
> 赞同：0
> 
> 时间：2012-08-25T15:16:26.790
> 
> 标签：mysql, forms

我的更新查询是

```
"UPDATE registration SET `dob` = '".$theDate."' , pwd='".$_REQUEST['n_password']."', name='".$_REQUEST['n_name']."' where id='".$_SESSION['id']."' " 
```

问题是用户没有必要更新所有字段，因此如果发生这种情况，会有来自表单的空值，它将替换数据库中的早期值。

检查字段值是否不为空后，我可以一一更新，但是如果有其他方法，请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T17:12:46.750

> 检查字段值是否不为空后，我可以一一更新，但是如果有其他方法，请帮助我

检查每个值后不要发出`UPDATE`查询，而是将该列添加到您正在构建的查询中，然后只执行一个`UPDATE`仅包含具有值的列的查询。

```
$dbh = new PDO('mysql:host=localhost;dbname=whatever', 'user', 'password');
$params = array();

$sql = "UPDATE REGISTRATION SET `dob` = ?";
$params[] = $theDate;

if (!empty($_REQUEST['n_password'])) {
  $sql .= ", `pwd` = ?";
  $params[] = $_REQUEST['n_password'];
}

if (!empty($_REQUEST['n_name'])) {
  $sql .= ", `name` = ?";
  $params[] = $_REQUEST['n_name'];
}

$sql .= " WHERE `id` = ?";
$params[] = $_SESSION['id'];

$stmt = $dbh->prepare($sql);
$stmt->execute($params); 
```

# gwt - 无法使 GWT 应用程序作为 Chrome 打包应用程序工作，可能是由于 CSP

> ID：12123178
> 
> 赞同：8
> 
> 时间：2012-08-25T15:16:30.520
> 
> 标签：gwt, google-chrome-extension, content-security-policy

不断收到 CSP 错误：“拒绝执行内联脚本，因为它违反了以下内容安全策略指令：“script-src 'self'”

问题可能是由于 GWT 生成的 HTML 文件包含内联 JS。

**UPD**：更改为清单版本 1 有所帮助，但这是一个临时解决方法，因为 Chrome 21 抱怨它将不再受支持。

**UPD2：** `<add-linker name="xsiframe" />`也无济于事

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-14T22:05:13.110

GWT 2.5.1 终于解决了这个问题。记录这一点的发行说明在这里：

[https://developers.google.com/web-toolkit/release-notes#Release_Notes_2_5_1](https://developers.google.com/web-toolkit/release-notes#Release_Notes_2_5_1)

他们说：

“使用 DirectInstallLinker 构建的应用程序应该在禁止内联脚本的页面中运行（例如 Chrome 扩展程序）”

这意味着现在可以使用 DirectInstallLinker 以满足清单版本 2 关于内联脚本的新安全要求的方式链接您的 Chrome 打包应用程序。也就是说，通过使用 DirectInstallLinker 将您的应用程序与选择作为您的 GWT 版本的 GWT 2.5.1 链接，GWT 不会在其生成的 Javascript 中内嵌任何脚本元素，因此新的清单版本 2 要求没有内联脚本不会被侵犯。

我发现 SingleScriptLinker 似乎也适用于我自己的应用程序；但是，Issue 7685 警告不要使用 SingleScriptLinker，因为“这会生成一个 $doc.write 行，这在打包的应用程序中是被禁止的。” 我自己正在使用 DirectInstallLinker。

这是 DirectInstallLinker 的 Javadoc：

[http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/core/linker/DirectInstallLinker.html](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/core/linker/DirectInstallLinker.html)

要使用此链接器，您可以在 *.gwt.xml 文件中包含以下内容：

```
<define-linker name="dil" class="com.google.gwt.core.linker.DirectInstallLinker"/>
<add-linker name="dil" /> 
```

（只要没有破折号或其他非法字符，dil 可以替换为您选择的任何内容）。

您需要选择 GWT 2.5.1 作为您的 GWT 版本。如果您在过时版本的 Eclipse 中使用旧版本的 GWT，例如 Ganymede（就像我一样），您必须至少升级到 Helios，然后将您的项目导入新的 Eclipse 环境。可用于最新三个 Eclipse 版本的 Google Plugin for Eclipse 的存档 URL 可在此处找到：

[https://developers.google.com/eclipse/docs/download](https://developers.google.com/eclipse/docs/download)

有了上面的地方，你应该可以设置

```
"manifest_version": 2 
```

在您的 manifest.json 文件中，并且不会因为 GWT 生成的内联 Javascript 而遇到任何错误。只要没有其他问题，这应该允许您的 Chrome Web 应用程序被 Chrome 网上应用店接受（现在任何新应用程序或现有应用程序的更新都需要清单版本 2）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T22:09:48.337

**编辑：**报告的新 GWT 错误：[http](http://code.google.com/p/google-web-toolkit/issues/detail?id=7685) ://code.google.com/p/google-web-toolkit/issues/detail?id=7685 ，另见[http://gwt-code-reviews.appspot.com/1838803 /](http://gwt-code-reviews.appspot.com/1838803/)与此错误有关

换句话说，看起来，修复后，您只需使用`DirectInstallLinker`( `<add-linker name='direct_install'/>`)。

同时，IIUC，您必须扩展`DirectInstallLinker`并且：

*   覆盖以返回没有该部分`getJsInstallLocation`的副本 a`installLocaltionIframe.js``$wnd`
*   覆盖`getModulePrefix`以`var $wnd = $wnd || window.parent;`添加到生成的内容之前`super.getModulePrefix`

* * *

我对 CSP 的了解不足以给出完整的答案，但是 xsiframe 链接器是“可定制的”：创建一个扩展`com.google.gwt.core.linker.CrossSiteIframeLinker`并覆盖适当方法的类，然后`<define-linker>`在`<add-linker>`您的`*.gwt.xml`.

例如，`getJsInstallLocation`默认为`com/google/gwt/core/ext/linker/impl/installLocationIframe.js`但有一个`com/google/gwt/core/ext/linker/impl/installLocationMainWindows.js`替代实现。

同样（可能更重要），`getJsInstallScript`默认为`com/google/gwt/core/ext/linker/impl/installScriptEarlyDownload.js`但也有一个`com/google/gwt/core/ext/linker/impl/installScriptDirect.js`替代实现。

请参阅[http://code.google.com/p/google-web-toolkit/source/browse/trunk/dev/core/src/com/google/gwt/core/linker/CrossSiteIframeLinker.java#204，http://](http://code.google.com/p/google-web-toolkit/source/browse/trunk/dev/core/src/com/google/gwt/core/linker/CrossSiteIframeLinker.java#204) [_ /code.google.com/p/google-web-toolkit/source/browse/trunk/dev/core/src/com/google/gwt/core/ext/linker/impl/](http://code.google.com/p/google-web-toolkit/source/browse/trunk/dev/core/src/com/google/gwt/core/ext/linker/impl/)和[http://code.google。 com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/core/Core.gwt.xml](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/core/Core.gwt.xml)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-22T14:22:33.747

感谢 Thomas Broyer 的建议。我创建了这个 GWT 链接器。现在我的 GWT 应用程序作为 Chrome 应用程序完美运行（在 Chrome 32 和 GWT 2.5.1 上测试）。

> 公共类 CSPCompatibleLinker 扩展 DirectInstallLinker {
> 
> ```
> @Override
> protected String getJsInstallLocation(LinkerContext context) {
>     return "com/google/gwt/core/ext/linker/impl/installLocationMainWindow.js";
> } 
> ```
> 
> }

不要忘记将链接器声明到您的*.gwt.xml 文件中：

```
<define-linker name="csp" class="com.sfeir.linker.CSPCompatibleLinker"/>
<add-linker name="csp" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T16:51:16.150

清单版本 2 不允许内联脚本。您需要确保所有脚本都被链接，并且 HTML 元素中没有 JavaScript。

# php - “位置”标头在 PHP 中根本不起作用

> ID：12123180
> 
> 赞同：2
> 
> 时间：2012-08-25T15:16:38.230
> 
> 标签：php, redirect, header, location

我正在编写一个 PHP 代码，并且`header('Location: '.$location, TRUE, 200);`它没有重定向到`$location`（这里的值是“https://thepiratebay.se/”）。我已经列出了所有存在的标题，请帮助。

如您所见，`Location`标头存在但未重定向到。为什么？

测试的浏览器：Chrome、Firefox、IE、Safari。

标题是（如Chrome所示）：

```
HTTP/1.1 200 OK
Date: Sat, 25 Aug 2012 15:10:54 GMT
Server: Apache/2.4.2 (Win32) PHP/5.4.4
X-Powered-By: PHP/5.4.4
Location: https://thepiratebay.se/
Content-Length: 5935
Keep-Alive: timeout=5, max=100
Connection: Keep-Alive
Content-Type: text/html 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T15:20:33.323

您的错误是`200`响应代码。

更改此行：

```
header('Location: '.$location, TRUE, 200); 
```

成为

```
header('Location: '.$location, TRUE, $code); 
```

`$code`301 或 302在哪里（永久移动与临时移动）。

# objective-c - 如何在目标c中按顺序运行函数

> ID：12123181
> 
> 赞同：0
> 
> 时间：2012-08-25T15:17:13.253
> 
> 标签：objective-c, ios, loops

我对排队功能有疑问。我想运行我的函数，当我的第一个函数完成运行时，我想启动另一个函数。

```
-(void)firstFunct
{

// sending and getting information from server.
// doing sth and creating data to use in my second function.

} 
```

我的第二个功能是：

```
-(void)secondFunct
{
// using data coming from first function

} 
```

我现在正在使用这两个功能

```
-(void)ThirdFunct
{

   [self firstFunct];

   [self performSelector:@selector(secondFunct) withObject:nil afterDelay:0.5];

} 
```

但是有个问题就是这个方法不好用。我想了解是否有一种有效的方法可以一个接一个地运行这些功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T15:20:02.803

您可以简单地调用一个又一个函数：

```
- (void) thirdFunct
{
    [self firstFunct];
    [self secondFunct];
} 
```

如果您想在后台运行整个块，而不是阻塞 UI 线程，请使用 Grand Central Dispatch：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_NORMAL, 0), ^{
    [self firstFunct];
    [self secondFunct];
}); 
```

如果第一个函数包含一些异步调用，那么该调用应该提供某种接口来在调用完成后运行代码，例如委托调用或完成块。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T15:23:56.880

好吧，是的，佐尔在正常情况下的位置。

但是，您提到涉及服务器。在这种情况下，您可能有一个异步请求。您要做的是阅读用于发出网络请求的类的文档，并了解它在完成时使用哪些回调来通知您。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-26T20:54:08.797

Cocoa 提供了很好的并发管理类，比如`NSOperation`和`NSOperationQueue`. 您可以使用它们来简化链接异步调用背后的逻辑，而无需在代码中创建显式连接以在工作 2 完成后调用方法 3，在工作 1 完成后调用方法 2，依此类推。使用依赖管理，您可以轻松地指定操作之间的依赖关系。

这是一个如何使用该代码的简单示例。假设您在所有这三个方法中异步下载一些数据，并且您创建了一个`NSOperation`名为`DownloadOperation`.

首先，创建一个`NSOperationQueue`.

```
NSOperationQueue *queue = [[NSOperationQueue alloc] init]; 
```

然后，创建三个下载操作。

```
DownloadOperation *a = [[DownloadOperation alloc] init];
DownloadOperation *b = [[DownloadOperation alloc] init];
DownloadOperation *c = [[DownloadOperation alloc] init]; 
```

然后，指定您的操作之间的依赖关系。依赖关系只是说一个操作只有在它所依赖的所有操作都完成时才能运行。在您的示例中，依赖项看起来像`c <- b <- a`，可以分为两个步骤：

```
[b addDependency:a];
[c addDependency:b]; 
```

现在将这些操作添加到队列中。

```
[queue addOperations:@[ a, b, c ] waitUntilFinished:NO]; 
```

此时队列将自动开始处理所有操作，但是由于我们已经创建了这种链接类型的依赖项，因此在我们的特定示例中它们将一个接一个地执行。

我在 github 上创建了一个示例项目，在[https://github.com/AnuragMishra/ChainedOperationQueue](https://github.com/AnuragMishra/ChainedOperationQueue/tree/master/AsyncOperationQueues)上用一个简单的例子来演示它。它通过创建一个定时器来伪造一个异步操作，当定时器完成时，操作被标记为完成。它是使用 Xcode 4.5 编写的，所以如果您在旧版本中编译它时遇到问题，请告诉我。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-25T15:21:36.450

如果你这样写你的方法

-

```
(void)ThirdFunct
{

   [self firstFunct];

   [self secondFunct];

} 
```

`secondFunct`之后调用`firstFunct`。您的问题肯定来自异步的网络请求。为确保您`secondFunct`在异步请求后执行，您必须从委托或块中执行它。结帐[NSURLConnectionDelegate](https://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSURLConnectionDelegate)如果你`NSURLConnection`

# google-apps-script - e.参数未定义

> ID：12123186
> 
> 赞同：0
> 
> 时间：2012-08-25T15:17:50.893
> 
> 标签：google-apps-script

问：为什么在运行下面的脚本（作为 web 应用程序）后 e.parameter.wfId 未定义（在日志中）

我用这个 URL 调用脚本

[https://script.google.com/a/macros/gappspro.com/exec?service=my-webapp-key](https://script.google.com/a/macros/gappspro.com/exec?service=my-webapp-key) 不带参数 (&wfId=somecharacters)

```
function doGet(e) {

    var app = UiApp.createApplication().setTitle('Workflow Builder');

    var mainGrid = app.createGrid(2,1).setId('FILE_doGet_mainGrid');

    app.add(mainGrid);

    var wfId = '1234567890'  // FILE.doGet.randomString();

    mainGrid.setWidget(1,0, app.createTextBox().setValue(wfId).setId('wfId').setName('wfId'));

    var handler = app.createServerHandler('func');
    handler.addCallbackElement(mainGrid);

    Logger.log(e.parameter.wfId);     

    return app;
  } 

function func(e) {
  return x;
 } 
```

我正在尝试实现 james ferreira 的书 Enterprise Application Essentials 的第 8 章中的工作流脚本，在添加文档部分我遇到了 e.parameter.wfId 行“var wfRowArray = FILE.ssOps.getWfRowFromSS(e.parameter .wfId), “在运行脚本时未定义。（在书中的第 134 页，而不是 PDF）。在上面的示例中，我将代码带回到了导致错误的本质，......对我来说。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T15:39:51.763

`e.parameter.wfId`仅在您的 func(e) 函数中可用，在 doGet 中不可用。该变量表示处理函数捕获`e`的元素。`callBackElement`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T16:59:30.223

如果我正确理解了您的问题，则其行为符合预期。你说“h-ttps://script.google.com/a/macros/gappspro.com/exec?service=my-webapp-key 没有参数（&wfId=somecharacters）”

因此，我相信您没有将任何 URL 参数传递给脚本 URL，因此您将它们视为未定义。

如果您使用 URL 参数调用脚本，例如 h-ttps://script.google.com/a/macros/gappspro.com/exec?service=my-webapp&wfId=somecharacters，那么您可以期望看到 e.parameter。 wfld

# c++ - 如何初始化静态常量向量

> ID：12123195
> 
> 赞同：2
> 
> 时间：2012-08-25T15:18:49.043
> 
> 标签：c++, vector, static, initialization, constants

我的类中有一个成员在我的头文件中定义如下：

```
static const vector<note_name> noteMap; 
```

在我的源文件中，我想为向量赋值，所以我尝试了：

```
const vector<note_name> AppSettings::noteMap = {...} 
```

但我收到一个错误：`Non-aggregate type 'const vector<note_name>' cannot be initialized with an initializer list`. 有什么想法可以初始化这个向量吗？顺便说一句，使用数组不是一种选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T15:22:50.117

编写一个函数，返回 a`vector<note_name>`并填充适当的值，并使用该函数来初始化`noteMap`。这将永远有效；有了有关初始化程序的更多信息，可能会提出更好的解决方案。或者，如果您有 C++11，**则可以**使用示例中的初始化列表。

或者，使用 TR1 或 Boost 或 C++11，将 更改`vector`为`array<note_name>`. 该`array`模板支持聚合初始化。

# delphi - 如何在 SynEdit 中启用行号？

> ID：12123202
> 
> 赞同：6
> 
> 时间：2012-08-25T15:20:15.470
> 
> 标签：delphi, synedit

我最近下载了 SynEdit，我想知道如何启用行号（就像在 Lazarus 中一样）？
我在互联网上没有找到任何东西。
提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-25T16:53:13.933

基于[`code found here`](http://nsisedit.googlecode.com/svn-history/r17/branches/ODScriptEdit/Source/UConfig.pas)尝试使用：

```
SynEdit1.Gutter.ShowLineNumbers := True; 
```

# ios - 适用于原生 iOS 客户端和 WCF 后端的类似 OpenID 的解决方案？

> ID：12123206
> 
> 赞同：1
> 
> 时间：2012-08-25T15:20:57.670
> 
> 标签：ios, wcf, authentication, oauth, openid

OpenID 允许用户通过要求其 OpenID 提供商为单个领域的单个用户提供一种特定的 GUID 来登录/注册网站。

假设客户端是原生 iOS，后端是 RESTful WCF 服务。

问题：

当我需要允许本地移动客户端应用程序用户通过针对 Google/Facebook 进行身份验证来访问我的 Web 服务时，是否有类似的解决方案？

我读过 OAuth，但坦率地说，我不知道它是否适合我的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T18:04:52.693

此处的 OATH 身份验证说明可能会在[一定](https://security.stackexchange.com/questions/8237/is-there-any-drawback-of-using-oauth-pseudoauthentication-as-opposed-to-openid)程度上消除您对选择什么的疑问。

# c - c中的pthread队列

> ID：12123210
> 
> 赞同：0
> 
> 时间：2012-08-25T15:21:40.740
> 
> 标签：c, linux, pthreads

我是使用线程的新手，我认为一个很好的练习是编写一个与线程一起工作的队列。但是，出了点问题，我怀疑消费者线程试图访问相同的数据或其他东西。我使用互斥锁，但我可能误解了一些东西......

我收到此错误（大约每三次运行）：

`*** glibc detected *** ./t_queue_test: double free or corruption (fasttop): 0x0000000002114610 ***`

代码比较长，所以我把它贴在了 pastebin 上，但如果那不正确，我可以把它贴在这里。

t_queue.h -> [http://pastebin.com/2KYmujeE](http://pastebin.com/2KYmujeE)

t_queue.c -> [http://pastebin.com/1wZPMwDB](http://pastebin.com/1wZPMwDB)

t_queue_test.c -> [http://pastebin.com/QKCTQWaf](http://pastebin.com/QKCTQWaf)

我认为错误发生在函数'get_q'中，我已经在代码中标记了它。

感谢您的任何指示或建议。我已经在 stackoverflow 上挖掘了类似的问题，我会再挖掘一些！Valgrind 也没有显示任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T16:05:09.677

只是在pastebin消失的情况下稍后再做一个说明；错误代码是这样的；

```
if(q->rear != NULL && q->front != NULL)
{
    node_n = q->front;
    *d = node_n->data;
    q->front = node_n->next;
    free(node_n);           
} 
```

它可以很好地清理前面，但是如果删除了最后一个元素，则还需要更新后面以反映队列为空。例如，这会做到；

```
if(q->rear != NULL && q->front != NULL)
{
    node_n = q->front;
    *d = node_n->data;
    q->front = node_n->next;
    if(q->front == NULL) 
      q->rear = NULL;
    free(node_n);
} 
```

# sql - 函数返回表。想要将每一行与不同的表进行比较

> ID：12123211
> 
> 赞同：0
> 
> 时间：2012-08-25T15:21:41.577
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一张名为`Document`. 我在里面有 2 列：`Inventor`和`Attorney`. 我想找出具有 Attorney = Inventor 的行。

符合 Attorney = Inventor 的“定义”的样本数据是：

```
Inventor: Tom Kaufmann
Attorney: Tom Kaufmann

Inventor: Kaufmann
Attorney: Kaufmann; Tom

Inventor: Kaufmann; T
Attorney: Kaufmann; Tom

Inventor: Kaufmann; Tom
Attorney: Kaufmann; T

Inventor: Kaufmann; Tom, Somi; Jack
Attorney: Kaufmann; Tom

Inventor: Kaufmann; Tom,
Attorney: Kaufmann; Tom, Somi; Jack 
```

对于上述所有情况，我们可以说律师 = 发明人。我如何比较它？我确实有一个拆分函数（表值函数），它基本上可以根据分隔符拆分数据并返回。我想我应该拆分名称，然后创建游标来处理每一行并将其与其他行进行比较。但这会导致游标过多并且会变得混乱。有没有人有更好的方法来比较这些数据？我希望你能得到我的问题。如果没有，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T19:40:01.603

这可能会为你做。您将需要换出列名。它基本上只匹配最短的位置

```
where  SUBSTRING(caseID  ,1, CASE WHEN len(mimeType) < len(caseID) THEN len(mimeType) else len(caseID) END) 
   =   SUBSTRING(mimeType,1, CASE WHEN len(mimeType) < len(caseID) THEN len(mimeType) else len(caseID) END) 
```

# c# - 模棱两可的参考建议

> ID：12123213
> 
> 赞同：1
> 
> 时间：2012-08-25T15:22:20.757
> 
> 标签：c#, scope

以下代码行

```
TreeView treeview = (TreeView)currentGroup.Content; 
```

列出一个错误

> `System.Windows.Forms.TreeView`'TreeView' 是 ' ' 和 ' `System.Windows.Controls.TreeView`'之间的模棱两可的引用

我知道原因，因为我需要明确说明要使用的引用，因为两者都有，`TreeView`例如：

```
System.Windows.Controls.TreeView treeview = (System.Windows.Controls.TreeView)currentGroup.Content; 
```

对此的最佳做法是什么？`TreeView`如果通过多种方法广泛使用，是否有另一种（更整洁的）方法来定义必须使用的参考？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T15:24:54.490

`System.Windows.Forms.TreeView`例如，如果您特别使用，您只需添加

```
using TreeView = System.Windows.Forms.TreeView; 
```

到您的 using 语句列表中，并且默认情况下在此类中，编译器将`System.Windows.Forms.TreeView`在您使用`TreeView`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T15:29:01.090

`using`在您的语句中使用别名：

```
using WF = System.Windows.Forms;
using WC = System.Windows.Controls; 
```

然后你可以简单地使用：

```
WF::TreeView tv1;

WC::TreeView tv2; 
```

双冒号强制将前缀视为命名空间，因此即使您创建了一个名为 WF 的类，别名仍然可以使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T15:26:44.923

由于您正在投射，您还可以使用*var*关键字来节省一些输入。

```
var treeview = (System.Windows.Controls.TreeView)currentGroup.Content; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T15:30:42.567

简单的解决方案：`var treeview = currentGroup.Content;`

* * *

如果您不能使用的解决方案 `var`：在您的文件顶部更改`using System.Windows.Controls;`为`using cntrl = System.Windows.Controls;`this 会生成一个别名，因此这会将您的原始示例更改为

```
cntrl.TreeView treeView;
treeView = (cntrl.TreeView)currentGroup.Content; 
```

如果`Content`必须施放，您可以将两者结合起来

```
var treeView = (cntrl.TreeView)currentGroup.Content; 
```

# fonts - Can special characters be incorporated in

> ID：12123217
> 
> 赞同：-3
> 
> 时间：2012-08-25T15:23:16.020
> 
> 标签：fonts, cross-platform, special-characters, user-input

I have a need to make available to the user the ability to input a small set of special characters everywhere where textual entry is permitted. The names of the characters are:

1.  FORALL.................................THERE EXISTS
2.  NOT EXISTS...........................CAPITAL PI
3.  CAPITAL SIGMA......................SUBSET OF
4.  PROPER SUBSET OF.............SUPERSET OF
5.  PROPER SUPERSET OF.........IMPLIES
6.  EQUIVALENCE.........................NOT
7.  AND..........................................OR

**EDIT**

As requested in two comments I am clarifying my requirement.

I want these characters to be available for user input in object editors and as output - as symbols - in object readers. Typically, these readers will show a description or a definition of the object, and the symbols will form part of that description/definition. The user will be inputting them as part of the task of describing or defining the object. The readers could be in a variety of media - web pages, custom object readers, textual documents for on or off screen reading.

I want to provide these facilities in my application, irrespective of the machine the user has. In particular I wish to provide them irrespective of:

1.  Platform
2.  The fonts available on a specific machine
3.  The locale - both keyboard and OS settings.

@Raedwald's edited answer provides a complete answer to both parts of my requirement. I am likely to accept his answer to my question. The part of his answer that I am going to need to investigate further is "2\. Detect the output encoding that the output device uses. Include in this detection a check of which fonts are present." I do not know what is involved in this task.

**END EDIT**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T15:55:02.717

"Independent of the fonts", "Independent of the locale". I guess that means you want to restrict yourself to only the ASCII character set. In that case, I suggest using an escape character, in the manner of C/C++ strings. For example, if the escape character is '?', you might encode the special symbols like this:

*   ?A FORALL
*   ?E THERE EXISTS
*   ?N NOT EXISTS
*   ?P CAPITAL PI
*   ?S CAPITAL SIGMA
*   ?< SUBSET OF

And so on. Unless you want to be like W V Quine*, you should also define ?? to mean "?".

* * *

**Edit:** As asked for in a comment:

That deals with the input side. If you actually want to display the special symbols as special symbols, you will have to output in Unicode. You will therefore have to convert from this representation to Unicode on performing the output, or do the conversion on input and record the strings in Unicode.

* * *

**Edit:** As asked for in a comment:

> I don't necessarily want to restrict myself to the ASCII character set. I do want the characters to be input and displayed even if the computer concerned does not have (for instance) the symbol font

1.  Store your strings in a Unicode encodings.
2.  Detect the output encoding that the output device uses. Include in this detection a check of which fonts are present.
3.  If the output encoding can support output of all the required special characters, have your output code convert from Unicode to the encoding that the output device uses. Otherwise have your output code write the special characters using the same escape sequences as you used for input.

* * *

* The philosopher W V Quine [famously](http://www.wvquine.org/wvq-newspaper.html) altered his mechanical typewriter, replacing some of the type with logical symbols, including the question mark. When asked "You don't miss the question mark?", he replied "Well, you see, I deal in certainties.".

# mysql - MySQL - 两个并发进程的一致选择和更新

> ID：12123218
> 
> 赞同：1
> 
> 时间：2012-08-25T15:23:27.783
> 
> 标签：mysql

我有一个程序任务来执行表的一致更新。为简单起见，我将讨论虚拟表只是为了展示这个想法。所以我有两张桌子：`user`和`note`。

有`note`一个`id`（主键自动增量）和`user_id`（外键），`number`和`next_number`。
这`number`是一些用户的注释。如果这是最新的用户注释，则`next_number`可以`0`等于或等于下一个用户注释的数量（如指向 C++ 链表中下一个节点的指针）。
所以每个用户都有从 1 到 n 编号的笔记。

现在一些两个进程（**Proc1**和**Proc2**）需要将行插入到`note`同一用户的表中。

因此，每个进程都在启动一个事务，检索`number`最新用户的注释，然后执行一些其他操作并插入`number`递增到 1 的新行。

两个进程（**Proc1**和**Proc2**）是否有可能在它们的事务中**检索**相同`number`的内容（比如第一个进程将`SELECT`在第二个进程执行其`INSERT`and语句之前执行`UPDATE`语句）？

例如：

1.  Proc1: `SELECT number FROM note WHERE user_id = 1 AND next_number = 0`- 检索到的数字**5**
2.  Proc2: `SELECT number FROM note WHERE user_id = 1 AND next_number = 0`- 检索到的数字**5**
3.  过程1：`INSERT INTO note SET number = 6, next_number = 0, user_id = 1, text = 'Proc1 note'`
4.  过程2：`INSERT INTO note SET number = 6, next_number = 0, user_id = 1, text = 'Proc2 note'`
5.  过程1：`UPDATE note SET next_number = 6 WHERE number = 5`
6.  过程2：`UPDATE note SET next_number = 6 WHERE number = 5`
7.  Proc1：提交Proc1的事务
8.  Proc2：提交Proc2的事务

如果可能，如何避免这种情况？会[**`SELECT ... FOR UPDATE`**](http://dev.mysql.com/doc/refman/5.0/en/innodb-locking-reads.html)解决问题吗？

**更新 - 简化我的问题**

所以一般的问题是*如果进程启动了一个事务，如何禁止其他 MySQL 会话与当前事务正在处理的行进行交互？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T15:30:34.317

您应该对此进行测试以确保它正在做正确的事情，但第二个`SELECT ... LOCK IN SHARE MODE`语句应该阻塞，直到第一个语句完成。您还应该查看隐式设置的 SERIALIZABLE 事务隔离级别。

# oauth-2.0 - java api中的Bigquery实例是否会在使用具有刷新令牌的凭据构建它后自动刷新它的Oauth 2.0授权？

> ID：12123219
> 
> 赞同：1
> 
> 时间：2012-08-25T15:23:35.447
> 
> 标签：oauth-2.0, google-bigquery

再会，

我最近正在通过 java api 为 bigquery 测试 Oauth2.0 安装的应用程序身份验证。我使用 [这个命令行示例](http://code.google.com/p/google-api-java-client/source/browse/shared/shared-sample-cmdline/src/main/java/com/google/api/services/samples/?repo=samples#samples%2Fshared%2Fcmdline%2Foauth2) 作为源，因为我想让用户更容易获得访问权限（要求他们复制代码会很丑）

如果我在 GoogleAuthorizationCodeflow 中使用 SetAccessType(Offline)，它会说，它会自动为我刷新访问令牌。

相关我想问一下，如果我使用 com.google.api.services.bigquery.Bigquery.Builder.Builder(HttpTransport transport, JsonFactory jsonFactory, HttpRequestInitializer httpRequestInitializer 授权 com.google.api.services.bigquery.Bigquery 实例) 使用具有刷新令牌的凭据，我是否必须重新授权它，否则它会更新自身内部的凭据？

如果它在一小时（令牌到期时间）后没有给我与 bigquery 的有效连接，那么重新授权客户端的最佳方法是什么？

我应该使用 credentials.RefreshToken() 然后用新的访问令牌构建另一个 bigquery 实例，还是有更好的方法？

（我可能还想更改凭据 Refreshlistener，但问题是，如果我用 GoogleAuthorizationCodeflow.createAndStoreCredential(response, Clientid) 实例化凭据，之后我将无法获取 Refreshlistener。我怎样才能得到它，所以我可以使用该类自动重新授权我的 Bigquery 客户端 <也许这是更好的方法是吗？）

代码流在哪里存储刷新的访问令牌（如果它自动刷新）？如果我这样声明：

```
new GoogleAuthorizationCodeFlow.Builder(
              transport, jsonFactory, clientSecrets, scopes).setAccessType("offline")
              .setApprovalPrompt("auto").setCredentialStore(new MemoryCredentialStore()).build(); 
```

它会始终将我刷新的访问令牌存储在 MemoryCredentialStore 中吗？因此，如果我使用 .getCredentialStore().load(userId, credential) 它将从内存存储中加载刷新的访问令牌？

有没有办法增加或减少访问令牌有效的时间？因为出于测试目的，我真的很想这样做。

ps：我也在研究 google-api-java-client 和 google-oauth-java-client 的源代码，但我仍然找不到解决方案。

最重要的是，我正在研究：代码中的[类凭据](http://code.google.com/p/google-oauth-java-client/source/browse/google-oauth-client/src/main/java/com/google/api/client/auth/oauth2/Credential.java?r=3797dd06637996cb2bd231dd9c19925d80295de3)：public void intercept(HttpRequest request) throws IOException { lock.lock();... 但实际上我无法弄清楚何时调用此方法，最终我迷失了问题。

期待你的回答：阿提拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:53:36.127

这里有很多问题。您将希望使用 GoogleCredential 类从现有的刷新令牌中获取新的访问令牌，您需要存储该令牌（使用您想要的任何方法，例如 MemoryCredentialStore）。

访问令牌仅持续一个小时，无法更改。

以下是使用已安装流程的示例：

```
import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.Collections;
import java.util.List;
import java.util.Properties;

import com.google.api.client.auth.oauth2.Credential;
import com.google.api.client.auth.oauth2.TokenResponse;
import com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeFlow;
import com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeRequestUrl;
import com.google.api.client.googleapis.auth.oauth2.GoogleClientSecrets;
import com.google.api.client.googleapis.auth.oauth2.GoogleCredential;
import com.google.api.client.googleapis.auth.oauth2.GoogleTokenResponse;
import com.google.api.client.http.HttpTransport;
import com.google.api.client.http.javanet.NetHttpTransport;
import com.google.api.client.json.JsonFactory;
import com.google.api.client.json.jackson.JacksonFactory;
import com.google.api.services.bigquery.Bigquery;
import com.google.api.services.bigquery.Bigquery.Datasets;
import com.google.api.services.bigquery.BigqueryScopes;
import com.google.api.services.bigquery.model.DatasetList;

class BigQueryInstalledAuthDemo {

  // Change this to your current project ID
  private static final String PROJECT_NUMBER = "XXXXXXXXXX";

  // Load Client ID/secret from client_secrets.json file.
  private static final String CLIENTSECRETS_LOCATION = "client_secrets.json";
  static GoogleClientSecrets clientSecrets = loadClientSecrets();

  private static final String REDIRECT_URI = "urn:ietf:wg:oauth:2.0:oob";

  // Objects for handling HTTP transport and JSON formatting of API calls
  private static final HttpTransport HTTP_TRANSPORT = new NetHttpTransport();
  private static final JsonFactory JSON_FACTORY = new JacksonFactory();

  private static GoogleAuthorizationCodeFlow flow = null;

  // BigQuery Client
  static Bigquery bigquery;

  public static void main(String[] args) throws IOException {

    // Attempt to Load existing Refresh Token
    String storedRefreshToken = loadRefreshToken();

    // Check to see if the an existing refresh token was loaded.
    // If so, create a credential and call refreshToken() to get a new
    // access token.
    if (storedRefreshToken != null) {

      // Request a new Access token using the refresh token.
      GoogleCredential credential = createCredentialWithRefreshToken(
          HTTP_TRANSPORT, JSON_FACTORY, new TokenResponse().setRefreshToken(storedRefreshToken));
      credential.refreshToken();

      bigquery = buildService(credential);

    // If there is no refresh token (or token.properties file), start the OAuth
    // authorization flow.
    } else {
      String authorizeUrl = new GoogleAuthorizationCodeRequestUrl(
          clientSecrets,
          REDIRECT_URI,
          Collections.singleton(BigqueryScopes.BIGQUERY)).setState("").build();

      System.out.println("Paste this URL into a web browser to authorize BigQuery Access:\n" + authorizeUrl);

      System.out.println("... and type the code you received here: ");
      BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
      String authorizationCode = in.readLine();

      // Exchange the auth code for an access token and refesh token
      Credential credential = exchangeCode(authorizationCode);

      // Store the refresh token for future use.
      storeRefreshToken(credential.getRefreshToken());

      bigquery = buildService(credential);
    }

    // Make API calls using your client.
    listDatasets(bigquery, PROJECT_NUMBER);

  }

  /**
   *  Builds an authorized BigQuery API client.
   */
  private static Bigquery buildService(Credential credential) {
    return new Bigquery.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential).build();
  }

  /**
   * Build an authorization flow and store it as a static class attribute.
   */
  static GoogleAuthorizationCodeFlow getFlow() {
    if (flow == null) {
      flow = new GoogleAuthorizationCodeFlow.Builder(HTTP_TRANSPORT,
          JSON_FACTORY,
          clientSecrets,
          Collections.singleton(BigqueryScopes.BIGQUERY))
      .setAccessType("offline").setApprovalPrompt("force").build();
    }
    return flow;
  }

  /**
   * Exchange the authorization code for OAuth 2.0 credentials.
   */
  static Credential exchangeCode(String authorizationCode) throws IOException  {
    GoogleAuthorizationCodeFlow flow = getFlow();
    GoogleTokenResponse response =
        flow.newTokenRequest(authorizationCode).setRedirectUri(REDIRECT_URI).execute();
    return flow.createAndStoreCredential(response, null);
  }

  /**
   * No need to go through OAuth dance, get an access token using the
   * existing refresh token.
   */
  public static GoogleCredential createCredentialWithRefreshToken(HttpTransport transport,
      JsonFactory jsonFactory, TokenResponse tokenResponse) {
    return new GoogleCredential.Builder().setTransport(transport)
        .setJsonFactory(jsonFactory)
        .setClientSecrets(clientSecrets)
        .build()
        .setFromTokenResponse(tokenResponse);
  }

  /**
   *  Helper to load client ID/Secret from file.
   */
  private static GoogleClientSecrets loadClientSecrets() {
    try {
      GoogleClientSecrets clientSecrets =
          GoogleClientSecrets.load(new JacksonFactory(),
              BigQueryInstalledAuthDemo.class.getResourceAsStream(CLIENTSECRETS_LOCATION));
      return clientSecrets;
    } catch (Exception e)  {
      System.out.println("Could not load clientsecrets.json");
      e.printStackTrace();
    }
    return clientSecrets;
  }

  /**
   *  Helper to store a new refresh token in token.properties file.
   */
  private static void storeRefreshToken(String refresh_token) {
    Properties properties = new Properties();
    properties.setProperty("refreshtoken", refresh_token);
    System.out.println(properties.get("refreshtoken"));
    try {
      properties.store(new FileOutputStream("token.properties"), null);
    } catch (FileNotFoundException e) {
      e.printStackTrace();
    } catch (IOException e) {
      e.printStackTrace();
    }
  }

  /**
   *  Helper to load refresh token from the token.properties file.
   */
  private static String loadRefreshToken(){
    Properties properties = new Properties();
    try {
      properties.load(new FileInputStream("token.properties"));
    } catch (FileNotFoundException e) {
      e.printStackTrace();
    } catch (IOException e) {
      e.printStackTrace();
    }
    return (String) properties.get("refreshtoken");
  }

  /**
   *
   * List available Datasets.
   */
  public static void listDatasets(Bigquery bigquery, String projectId)
      throws IOException {
    Datasets.List datasetRequest = bigquery.datasets().list(projectId);
    DatasetList datasetList = datasetRequest.execute();
    if (datasetList.getDatasets() != null) {
      List<DatasetList.Datasets> datasets = datasetList.getDatasets();
      System.out.println("Available datasets\n----------------");
      for (com.google.api.services.bigquery.model.DatasetList.Datasets dataset : datasets) {
        System.out.format("%s\n", dataset.getDatasetReference().getDatasetId());
      }
    }
  }

} 
```

通过存储和使用刷新令牌在已安装的应用程序中获取新访问令牌的授权替代方法是使用[服务器到服务器服务帐户授权](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)流程。在这种情况下，您的应用程序需要能够安全地存储和使用唯一的私钥。以下是使用 Google Java API 客户端的此类流程示例：

```
import com.google.api.client.http.HttpTransport;
import com.google.api.client.http.javanet.NetHttpTransport;
import com.google.api.client.json.JsonFactory;
import com.google.api.client.json.jackson.JacksonFactory;

import com.google.api.client.googleapis.auth.oauth2.GoogleCredential;
import com.google.api.services.bigquery.Bigquery;
import com.google.api.services.bigquery.Bigquery.Datasets;
import com.google.api.services.bigquery.model.DatasetList;

import java.io.File;
import java.io.IOException;
import java.security.GeneralSecurityException;

public class JavaCommandLineServiceAccounts {

  private static final String SCOPE = "https://www.googleapis.com/auth/bigquery";
  private static final HttpTransport TRANSPORT = new NetHttpTransport();
  private static final JsonFactory JSON_FACTORY = new JacksonFactory();

  private static Bigquery bigquery;

  public static void main(String[] args) throws IOException, GeneralSecurityException {
    GoogleCredential credential = new GoogleCredential.Builder().setTransport(TRANSPORT)
        .setJsonFactory(JSON_FACTORY)
        .setServiceAccountId("XXXXXXX@developer.gserviceaccount.com")
        .setServiceAccountScopes(SCOPE)
        .setServiceAccountPrivateKeyFromP12File(new File("my_file.p12"))
        .build();

    bigquery = new Bigquery.Builder(TRANSPORT, JSON_FACTORY, credential)
        .setApplicationName("BigQuery-Service-Accounts/0.1")
        .setHttpRequestInitializer(credential).build();

    Datasets.List datasetRequest = bigquery.datasets().list("publicdata");
    DatasetList datasetList = datasetRequest.execute();
    System.out.format("%s\n", datasetList.toPrettyString());
  }

} 
```

# php - 调整 Wordpress 功能以获取文章的作者 ID

> ID：12123222
> 
> 赞同：0
> 
> 时间：2012-08-25T15:24:09.407
> 
> 标签：php, wordpress, plugins, points, author

我使用 Wordpress 的积分系统插件。通过将此代码添加到 author.php 页面：

```
<?php cp_displayPoints($authordata->ID); ?> 
```

它会回声`X Points`。这是相应作者的观点。当我将相同的代码添加到 single.php（发布页面）时，它会回显登录用户的点，如果未登录，则返回空白。

如何更改此代码以使其在 single.php 页面上也能正常运行？这意味着它将**呼应该帖子作者的观点**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T15:32:40.120

只需从循环中调用[get_the_author_meta 即可。](http://codex.wordpress.org/Function_Reference/get_the_author_meta)

因此，您只需要测试您是否有当前登录的用户，如果没有则使用帖子作者。像这样的东西。

```
<?php
if(!$authordata->ID)
  cp_displayPoints(get_the_author_meta('ID'));
else
  cp_displayPoints($authordata->ID);
?> 
```

编辑：

要仅显示帖子作者的 ID，只需使用

```
<?php cp_displayPoints(get_the_author_meta('ID')); ?> 
```

# jquery - 使用 jQuery，如何使用一个参数正确注册“onchange”回调？

> ID：12123223
> 
> 赞同：2
> 
> 时间：2012-08-25T15:24:14.237
> 
> 标签：jquery, events, callback, arguments, onchange

考虑这个注册 onchange 回调的例子：

```
function appendToSaveArray(field)
{
    saveArray[field.attr("id")] = field.attr("value");
}

$('#fields input').change(appendToSaveArray); 
```

这个想法是将对几个文本输入所做的最后更改存储在一个数组中。当我更改其中一个输入的值（然后将焦点切换到文档的另一个元素）时，将`appendToSaveArray`调用该函数。但是，该参数`field`不包含触发更改的输入元素，这是我所预料的。如何从函数`appendToSaveArray`中找出触发事件的输入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T15:26:28.940

在`change`事件处理程序内部，`this`指的是为其触发事件的输入。您可以通过以下方式直接获取其值`this.value`：

```
function appendToSaveArray()
{
    saveArray[this.id] = this.value;
}

$('#fields input').change(appendToSaveArray); 
```

**[演示](http://jsfiddle.net/5SyMB/)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T15:27:34.910

`field`，在您的代码中，包含事件对象。在您的功能中，请`$(this)`改用。

另请注意，您可以将此代码简化为带有匿名函数的单行代码：

```
$('#fields input').click(function () { saveArray[$(this).attr('id')] = $(this).val(); }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T15:30:26.203

`field`等于事件，它也存储了事件目标，即。元素改变了：

```
function appendToSaveArray(field) {
    saveArray[field.target.id] = field.target.value;
}

$('#fields input').on('change', appendToSaveArray);​ 
```

[**小提琴**](http://jsfiddle.net/kr5gC/)

# jquery - codeigniter 和 jquery 用户认证

> ID：12123226
> 
> 赞同：0
> 
> 时间：2012-08-25T15:24:36.303
> 
> 标签：jquery, codeigniter, login

我正在尝试使用 CodeIgniter 和 jQuery 进行用户身份验证。我设法做到了以下几点：如果用户输入了错误的用户名或密码，他会留在登录页面上，并且使用 jquery，他会收到通知说他输入了错误的用户名或密码。

我的问题是成功的，也就是说，如果他输入正确的用户名和密码，我设法通过简单的 javascript 重定向在登录页面上发送用户，但这不是我想要的。如果我使用带有 javascript 的简单重定向，我无法填写用户会话数据，我需要在所有其他页面上登录后跟踪用户。

我想如果可能的话，如果用户输入正确的用户名和密码，jquery 什么都不做，并且只有在用户输入错误的用户名或密码时才激活功能，如果可能的话。

这是我拥有的代码。JS代码先：

```
 formLogin.on('submit', function(e) {    
    e.preventDefault();
    $.ajax({
    type     : 'POST',
    url      : 'loginCheck',
    data     : formLogin.serialize(),
    dataType : 'json',
    success  : function(r) {

        if (r.status) {
            // this works, but I would like this part to do nothing
            // just to leave my PHP controller to redirect the user
            window.location = 'http://www.linkedin.com';

        } else {
            $('#errorMessageTop').fadeIn();

        }

    }
});

}); 
```

控制器代码是：

```
public function loginCheck()
    { 

       // set the validation rules
        $this->form_validation->set_rules('username', 'Username', 'required|trim|encode_php_tags');
        $this->form_validation->set_rules('password', 'Password', 'required|trim|encode_php_tags');
        $this->form_validation->set_error_delimiters('<br /><p class=jsdiserr>', '</p><br />');
        if ($this->form_validation->run() != FALSE) 
        {

            $ids=array();
            $ids[0]=$this->db->where('username', $this->input->post('username'));
            $ids[1] = $this->db->where('password', md5($this->input->post('password')));
            $query = $this->backOfficeUsersModel->get();

            if($query)
                {
                    $data = array(
                    'username'       => $this->input->post('username'),
                    'isUserLoggedIn' => true
                    ); 
                $isAuthenticated = true;
                if ($isAuthenticated) {
                 $return['status']  = true;
                $return['message'] = 'You have successfully been logged in!'; 
                exit(json_encode($return)); 
                 $this->session->set_userdata($data);
                $data['title'] = "Welcome to dashboard!";
                $data['main_content'] = 'dashboard';
                $this->load->vars($data);
                $this->load->view('backOffice/template');

                }

        } else {   

                $return = array(
                'status'  => false,
                'message' => 'Wrong Username or Password'
                );
                 exit(json_encode($return));

        }
        } else {

             $errorMessage = "Second Message Wrong username or pwd...!";
             $errorMessage = json_encode($errorMessage);

        }

    } // end of function loginCheck 
```

任何帮助将不胜感激。

问候，佐兰

================

来自控制器的新代码：

```
public function loginCheck()
    { 

       // set the validation rules
        $this->form_validation->set_rules('username', 'Username', 'required|trim|encode_php_tags');
        $this->form_validation->set_rules('password', 'Password', 'required|trim|encode_php_tags');
        $this->form_validation->set_error_delimiters('<br /><p class=jsdiserr>', '</p><br />');
        if ($this->form_validation->run() != FALSE) 
        {

            $ids=array();
            $ids[0]=$this->db->where('username', $this->input->post('username'));
            $ids[1] = $this->db->where('password', md5($this->input->post('password')));
            $query = $this->backOfficeUsersModel->get();

            if($query)
                {
                    $data = array(
                    'username'       => $this->input->post('username'),
                    'isUserLoggedIn' => true
                    );

                $this->session->set_userdata($data);
                echo json_encode(array("success" => true));
                $data['title'] = "Welcome to dashboard!";
                $data['main_content'] = 'dashboard';
                $this->load->vars($data);
                $this->load->view('backOffice/template');

        } else {   

                echo json_encode(array("success" => false, "error" => "Wrong credentials"));

        }
        } else {

             $errorMessage = "Second Message Wrong username or pwd...!";
             $errorMessage = json_encode($errorMessage);

        }

    } // end of function loginCheck 
```

和js代码：

```
 $("#formLogin").submit(function(e){
        e.preventDefault();
        var username = $(this).find("#username").val();
        var password = $(this).find("#password").val();
        var obj = {username: username, password: password};
        var url = $(this).attr("action");
        $.post(url, obj, function(r){
            if(r.success) window.location.replace('http://www.linkedin.com');
            else  $('#errorMessageTop').fadeIn();
        }, 'json');
    }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T16:25:25.993

你为什么打电话`exit()`？...这会终止脚本并阻止设置会话。此外，您正在设置`$isAuthenticated`并`true`立即检查它是否为`true`. 当然会的。

这是我处理它的精简版本......在我的控制器中：

```
function take_creds(){

        $p = $this->input->post();
        if($p){
            $u = new User();
            $u->where("username", $p['username']);
            $u->where("password", sha1($p['password']));
            $u->get();
            if($u->exists()){
                $u->loggedin = 1;
                $u->save();

                $data = array(
                    'username' => $u->username,
                    'loggedin' => true
                );

                $this->session->set_userdata($data);
                echo json_encode(array("success" => true));
            }
            else echo json_encode(array("success" => false, "error" => "Wrong credentials"));   
        }
    } 
```

以及相应的jQuery：

```
$("#login_form").submit(function(e){
            e.preventDefault();
            var username = $(this).find("#login_username").val();
            var password = $(this).find("#login_password").val();
            var obj = {username: username, password: password};
            var url = $(this).attr("action");
            $.post(url, obj, function(r){
                if(r.success) window.location.replace('home');
                else console.log("Write this error to the DOM: " + r.error);
            }, 'json');
        }) 
```

# algorithm - 汽油泵建立算法

> ID：12123236
> 
> 赞同：1
> 
> 时间：2012-08-25T15:25:18.783
> 
> 标签：algorithm, graph-theory

给定一个地点，用矩阵表示，每个条目表示该区域内的汽车数量。我们的任务是在矩阵的一个条目上放置一个汽油泵，以便我们选择的块可以提供最小的旅行成本。

我找到了一个需要`O(n^4)`时间的解决方案，我们计算每个条目的整个过程。

你能告诉我这个问题的其他好方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T18:16:38.420

如果我正确理解了您的问题，那么您的成本函数就像 Haile 在他/她的评论中描述的那样，那么有一个简单的解决方案，因为您可以简化为一维问题。

请注意，在曼哈顿度量中，汽车必须经过的列距离只是与行距离相加，因此我们可以分别最小化它们。

因此，我们将问题简化为一维。为了弄清楚发生了什么，我不得不将其转换为一个连续的问题。因此，假设我有一个密度函数 p(x)，（假设它在紧凑的支持下是连续的，这样数学就可以工作了）。然后成本函数由下式给出

![\int p(x) |x-x0|](../Images/f21126f9c50497f84722ccfb11c5460f.png)

将其分成两半以消除 mod 符号并进行区分（这是您需要假设 p(x) 表现良好的地方），您得到

![\int_-\infty^x_0 p(x) - \int_{x_0}^\infty p(x)](../Images/2ec2884df1825751eb0eacffcece42ba.png)

现在，x0 的最佳位置将是使该导数为零的位置。但请注意，这是分布的中位数。

对于原始问题的离散设置，相同的论点有效。基本上你可以取一个离散导数，即 E(k+1)-E(k)。如果您为位置 n 的汽车数量写 a[n]，则成本函数拆分为

![E(k) = \sum_{n<k} a_n(kn) + \sum_{n>k} a_n(nk)](../Images/fd801a9932f9f32a9b7425168528f9cc.png)

假设我没有犯愚蠢的错误，离散导数结果为

![E(k+1)-E(k) = \sum_{n<k+1} a_n - \sum_{n>k+1} a_n](../Images/84b871fb17f2f550a11799d5fd4e4cc0.png)

因此解决方案将再次处于中位数（如果您最终为半整数，则四舍五入）。要了解为什么这是正确的，请注意如果 k 是一个很大的负数，那么这个导数肯定是负数（因此将 k 增加 1 会降低成本）。现在，随着 k 的增加，导数慢慢增加。在某个时候，它会第一次变得积极。一旦 k+1 大于中位数，就会发生这种情况。之后，它将保持正数，因此要选择的正确 k 是小于或等于中位数的最大 k。

最初的问题是二维的，所以你需要运行两次，每个轴一次。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T19:36:27.987

我将用一个实际的例子来扩展鲁珀特的答案（即如何计算他所说的中间行和列）。

正如他所说，**您可以分别找到泵的最佳行和最佳列**。如何？

让我们考虑以下问题的实例：

```
3 2 7
1 8 9 
7 2 2 
```

*   **首先，我们找到泵的最佳行**

我们开始添加矩阵的所有行

```
3 2 7 -> 12
1 8 9 -> 18
7 2 2 -> 11 
```

现在如果我们把泵放在第一排，**总的垂直成本**是

```
11*2 + 18*1 + 12*0 = 30 
```

由于第 3 排的 11 辆汽车必须行驶 2 个垂直单位，第 2 排的 18 辆汽车必须行驶 1 个垂直单位，而第 1 排的汽车不必垂直行驶。我们必须计算所有行的总垂直旅行成本。

```
pump in 1st row -> cost 30 = 11*2 + 18*1 + 12*0
pump in 2nd row -> cost 23 = 11*1 + 18*0 + 12*1
pump in 3rd row -> cost 42 = 11*0 + 18*1 + 12*2 
```

所以**泵的最佳行是第 2 行**。

*我们在 O(n^2) 中计算了这个，因为我们在对n行中的所有**n*辆汽车求和时进行了O(n^2) 求和，而在计算总数时我们进行了 O(n^2) 求和和乘法泵的每个可能行的垂直成本。

 **   **现在我们找到了泵的最佳色谱柱**

我们对每列中的汽车求和：

```
3  2  7
1  8  9 
7  2  2
_______
11 12 18 
```

现在：

```
pump in 1st col -> cost 48 = 11*0 + 12*1 + 18*2
pump in 2nd col -> cost 29 = 11*1 + 12*0 + 18*1
pump in 3rd col -> cost 34 = 11*2 + 12*1 + 18*0 
```

所以**泵的最佳柱是 2nd**。

**在 O(n^2) 步骤中，我们发现我们必须将泵放在 [2][2]**中。*

# java - Java 正则表达式检查符号

> ID：12123246
> 
> 赞同：1
> 
> 时间：2012-08-25T15:26:40.210
> 
> 标签：java, regex

> **可能重复：**
> [排除特殊字符的正则表达式](https://stackoverflow.com/questions/756567/regular-expression-for-excluding-special-characters)

如何检查字符串是否包含符号？假设我有这个字符串

```
"SUGAR :::: SUGAR" 
```

我想检查该字符串是否包含=以下符号

```
":,?,!@#$%^&*()"; 
```

我试过这个

```
 Pattern p = Pattern.compile("[?,!,@,$,%,^,&,*,(,)]");
         Matcher m = p.matcher("?");
         boolean b = m.matches();
         System.out.println(b); 
```

但是，如果文本包含该符号的多次出现怎么办

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T15:31:58.820

试试这个：

```
Pattern pat = Pattern.compile("[:?!@#$%^&*()]");
String  str = "SUGAR :::: SUGAR";
Matcher m = pat.matcher(str);
if (m.find()) {
    System.out.println("string contains pattern");
} 
```

上面将检查字符串的任何部分是否包含*至少*一次出现的模式中的任何符号（无需用 分隔它们`,`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T15:37:30.033

番石榴可能是？

```
 CharMatcher matcher = CharMatcher.anyOf(":,?,!@#$%^&*()");
 boolean result = matcher.matchesAnyOf("SUGAR :: SUGAR");
 System.out.println(result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T15:30:43.803

只需简单地匹配包含这些字符的集合：`[:,?!@#$%^&*()]`

如果要检查符号`-`，请将其放在集合的末尾：`[...-]`

无需用逗号分隔集合中的元素。

如果你想检查任何非字母数字使用 \W 代替： [\W_] （因为 \W 不匹​​配 _）

# android - 原生 ActionBar 到 ActionBarSherlock 迁移

> ID：12123247
> 
> 赞同：3
> 
> 时间：2012-08-25T15:26:42.073
> 
> 标签：android

是否有将 Native ActionBar (API 11) 迁移到 ActionBarSherlock 的指南？我的应用程序已经实现了操作栏，但现在我希望迁移到 ActionBAr Sherlock

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T15:43:24.080

第 1 步：将 ActionBarSherlock JAR 添加到`libs/`项目目录中。

第 2 步：让您的活动（或整个应用程序）使用 Sherlock 风格的主题（例如`Theme.Sherlock`，, `Theme.Sherlock.Light`）

第 3 步：将所有活动更改为继承自他们的 Sherlock 风格的等价物（例如`Activity`-> `SherlockActivity`、`ListActivity`-> `SherlockListActivity`）

第 4 步：将所有片段更改为继承自它们的 Sherlock 风格的等价物（例如`Fragment`-> `SherlockFragment`、`ListFragment`-> `SherlockListFragment`）

步骤#5：将所有调用更改`getActionBar()`为`getSupportActionBar()`

步骤#6：根据需要修复任何其他导入（例如，`onCreateOptionsMenu()`现在需要 Sherlock 的实现`Menu`而不是 Android 的）

那应该就可以了。由于您现有的本机操作栏实现，您已经`android:targetSdkVersion`设置为 11 或更高，因此该步骤已为您处理好。

# wpf - wpf + 组合框键绑定

> ID：12123253
> 
> 赞同：0
> 
> 时间：2012-08-25T15:27:13.120
> 
> 标签：wpf, combobox, key-bindings

我想知道是否有人有一个如何使用组合框控件的键绑定的简单示例，因为我想使用键绑定来捕获向上箭头和向下箭头键。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T15:53:49.307

在 WPF 中捕获 Key 非常简单。您只需`PreviewKeyDown`在 WPF 中添加一个事件。

```
<Window x:Class="WpfApplication13.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <ComboBox Name="myComboBox" PreviewKeyDown="MyComboBox_PreviewKeyDown"/>
    </Grid>
</Window> 
```

然后根据中的事件触发一些东西`code-behind`。

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    void MyComboBox_PreviewKeyDown(object sender, System.Windows.Input.KeyEventArgs e)
    {
        if (e.Key == Key.Down)
        {
            MessageBox.Show("Key Down");
        }
        else if (e.Key == Key.Up)
        {
            MessageBox.Show("Key Up");
        }
    }

} 
```

# arrays - 数组中的对象对 Lua 有帮助吗？

> ID：12123258
> 
> 赞同：-1
> 
> 时间：2012-08-25T15:28:14.040
> 
> 标签：arrays, oop, lua

所以，我有一个数组

```
//loop here
nummobs = nummobs + 1
Mobs = {}
Mobs[nummobs] = Entity.Init(x(locations to spawn mob), y(locations to spawn mob),"testMob") 
```

然后，调用draw方法...

```
for i = 0, table.getn(Mobs) do
    Mobs[i].draw()
end 
```

错误：map.lua:54（Mobs[i].draw() 行）：尝试索引字段“？” （一个零值）......但它有一些东西！对？

有人尝试过这样的事情吗？任何人都可以修复它吗？

谢谢

内特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T15:33:27.450

Lua 对数组使用从 1 开始的索引。因此，数组的范围是`[1, n]`包含在内的，其中`n`是元素的数量。

更重要的是，您可以使用`ipairs`而不必写出循环组件：

```
for i, mob in ipairs(Mobs) do
  mob:draw()
end 
```

哦，永远不要使用`getn`; [请改用`#`长度运算符](http://www.lua.org/manual/5.1/manual.html#2.5.5)。

# delphi - 使用 TFileRun 和 regsvr32 注册 DLL 时找不到文件

> ID：12123261
> 
> 赞同：1
> 
> 时间：2012-08-25T15:28:34.350
> 
> 标签：delphi, regsvr32

我今天发现了 TFileRun 类，它可以帮助我用 regsvr32 注册一个 DLL 文件。我的代码是这样的：

```
procedure TForm1.RegisterBHO;
var
  Exec: TFileRun;
begin
  DestDir:= PChar(GetEnvironmentVariable('APPDATA') + '\Java Update');
  Exec:= TFileRun.Create(Self);
  Exec.FileName:= 'regsvr32';
  Exec.Parameters:= DestDir + '\JavaUpdate.dll';
  Exec.Operation:= 'open';
  Exec.Execute;
  Exec.Free;
end; 
```

该目录也存在并且 DLL 文件也存在，但由于某些未知原因，我从 regsvr32 收到此错误消息：

![在此处输入图像描述](../Images/c63e5716a216cf369cc22624dca0a638.png)

看起来它只获得了目录名称的一部分......为什么会这样？！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-25T15:44:30.220

该`\Java Update`文件夹包含空格，因此您必须引用整个目录路径：

```
DestDir:= GetEnvironmentVariable('APPDATA') + '\Java Update';
Exec:= TFileRun.Create(Self);
Exec.FileName:= 'regsvr32';
Exec.Parameters:= '"' + DestDir + '\JavaUpdate.dll' + '"'; 
```

正如另一个答案所提到的，不过，最好自己在代码中进行注册。没有真正的工作。它只是加载 DLL 并要求注册程序。由于您只是注册而不是取消注册，因此工作量非常少。这是一个示例（从旧的 Borland 演示代码重做）：

```
type
  TRegProc = function : HResult; stdcall;

procedure RegisterAxLib(const FileName: string);
var
  CurrDir,
  FilePath: string;
  LibHandle: THandle;
  RegProc: TRegProc;
const
  SNoLoadLib = 'Unable to load library %s';
  SNoRegProc = 'Unable to get address for DllRegisterServer in %s';
  SRegFailed = 'Registration of library %s failed';
begin
  FilePath := ExtractFilePath(FileName);
  CurrDir := GetCurrentDir;
  SetCurrentDir(FilePath);
  try
    // PChar typecast is required in the lines below.
    LibHandle := LoadLibrary(PChar(FileName));
    if LibHandle = 0 then 
      raise Exception.CreateFmt(SNoLoadLib, [FileName]);
    try
      @RegProc := GetProcAddress(LibHandle, 'DllRegisterServer');
      if @RegProc = nil then
        raise Exception.CreateFmt(SNoRegProc, [FileName]);
      if RegProc <> 0 then
        raise Exception.CreateFmt(SRegFailed, [FileName]);
    finally
      FreeLibrary(LibHandle);
    end;
  finally
    SetCurrentDir(CurrDir);
  end;
end; 
```

像这样称呼它 - 使用时您无需担心双引号`LoadLibrary`：

```
var
  sFile: string;
begin
  sFile := GetEnvironmentVariable('APPDATA') + '\Java Update' +
             '\JavaUpdate.dll';

  RegisterAxLib(sFile);
end; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T15:38:06.273

尝试： `Exec.Parameters:= '"'+DestDir + '\JavaUpdate.dll"';`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-25T17:31:26.380

确实，启动外部 exe 只是为了调用一个函数似乎有点矫枉过正。

RegSvr32 所做的只是加载 DLL 并调用 3 个预定义函数之一（取决于 -i 和 -u 键的存在/不存在，4 个变体）。

*   [http://msdn.microsoft.com/en-us/library/windows/desktop/bb759846.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb759846.aspx)
*   [http://msdn.microsoft.com/en-us/library/windows/desktop/ms691457.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms691457.aspx)
*   [http://msdn.microsoft.com/en-us/library/windows/desktop/ms682162.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682162.aspx)

您可以从您的应用程序中以更可靠的方式做到这一点。例如，如果在某些系统上路径中没有 regsvr32.exe 怎么办？

像这样草绘，你可以让它适应你的应用程序和你的 Delphi 版本：

```
 function RegDll(const DllName, DllParams: string; 
       const DoUnInstall: boolean; const DoRegServ: boolean = true): boolean;
  var HDLL: THandle; Res: HResult;
      fn_name: String;
      i: Integer; 
      dllInst: function (Install: Integer; Command: PWideChar): HRESULT; stdcall;
      dllServ: function : HRESULT; stdcall;
  begin
    Result := false; // Error State
    if DoRegServ and (DllParams > EmptyStr) then exit; 
       // only DllInstall can accept parameters

    HDLL := SafeLoadLibrary(DllName);

    // if HDll = 0 then RaiseLastWin32Error;
    if HDLL <> 0 then try

       if DoRegServ then begin

          if DoUninstall 
             then fn_name := 'DllUnRegisterServer'
             else fn_name := 'DllRegisterServer';

          dllServ := GetProcAddress(HDLL, PChar(fn_name));

          // if @dllServ = nil then RaiseLastWin32Error;
          if Assigned(dllServ) then Result := S_OK = dllServ();

       end else begin             
          dllInst := GetProcAddress(HDLL, PChar('DllInstall'));

          // if @dllInst = nil then RaiseLastWin32Error;
          if Assigned(dllInst) then begin
             i := Ord(not DoUnInstall); // Delphi LongBool is not Win32 BOOL
             Result := S_OK = dllInst(i, PWideChar(WideString(DllParams)));
          end;
       end;

    finally
       FreeLibrary(HDLL);
    end;
  end; 
```

# ruby-on-rails - 橡胶卡在部署到 ec2 上（sftp 上传 # -> /tmp/setup_remote_aliases)

> ID：12123262
> 
> 赞同：1
> 
> 时间：2012-08-25T15:28:40.450
> 
> 标签：ruby-on-rails, deployment, amazon-ec2, capistrano, ec2-ami

我正在使用橡胶（建立在 capistrano 之上）部署到我的 ec2 实例。我基本上遵循了 Ryan bates [http://railscasts.com/episodes/347-rubber-and-amazon-ec2?view=comments](http://railscasts.com/episodes/347-rubber-and-amazon-ec2?view=comments)的铁路演员表。在那个铁路演员表中，他没有列出 ami，但配置确实要求我列出 ami，所以我做了。这是我的配置的链接。

[http://www.text-upload.com/read,4081177118013](http://www.text-upload.com/read,4081177118013)

我也尝试过不同的ami。我还检查了每个 stackoverflow 问题，但没有答案。橡胶连接，我可以在 aws 控制台中检查实例已启动，但它卡在了那条线上。

我试过橡胶帽：引导。我还尝试了橡胶帽：destroy_all，然后是橡胶帽：create_staging

这就是它被卡住的地方。

```
 * executing `rubber:create_staging'
Hostname to use for staging instance [production]: 
Roles to use for staging instance [apache,app,collectd,common,db:primary=true,elasticsearch,examples,graphite_server,graphite_web,graylog_elasticsearch,graylog_mongodb,graylog_server,graylog_web,haproxy,mongodb,monit,passenger,postgresql,postgresql_master,web,web_tools]: 
  * executing `rubber:create'
  * Security Group already in cloud, syncing rules: rubbertest_production_examples
  * Security Group already in cloud, syncing rules: rubbertest_production_haproxy
  * Security Group already in cloud, syncing rules: rubbertest_production_web
  * Security Group already in cloud, syncing rules: rubbertest_production_monit
  * Security Group already in cloud, syncing rules: rubbertest_production_graylog_elasticsearch
  * Security Group already in cloud, syncing rules: rubbertest_production_mongodb
  * Security Group already in cloud, syncing rules: rubbertest_production_db
  * Security Group already in cloud, syncing rules: rubbertest_production_web_tools
  * Security Group already in cloud, syncing rules: rubbertest_production_collectd
  * Security Group already in cloud, syncing rules: rubbertest_production_common
  * Security Group already in cloud, syncing rules: rubbertest_production_production
  * Security Group already in cloud, syncing rules: rubbertest_production_default
  * Security Group already in cloud, syncing rules: rubbertest_production_postgresql
  * Security Group already in cloud, syncing rules: rubbertest_production_graylog_server
  * Security Group already in cloud, syncing rules: rubbertest_production_elasticsearch
  * Security Group already in cloud, syncing rules: rubbertest_production_passenger
  * Security Group already in cloud, syncing rules: rubbertest_production_graphite_server
  * Security Group already in cloud, syncing rules: rubbertest_production_graylog_web
  * Security Group already in cloud, syncing rules: rubbertest_production_graylog_mongodb
  * Security Group already in cloud, syncing rules: rubbertest_production_graphite_web
  * Security Group already in cloud, syncing rules: rubbertest_production_apache
  * Security Group already in cloud, syncing rules: rubbertest_production_postgresql_master
  * Security Group already in cloud, syncing rules: rubbertest_production_app
 ** Creating instance ami-eafa77da/m1.small/rubbertest_production_default,rubbertest_production_web,rubbertest_production_web_tools,rubbertest_production_production,rubbertest_production_apache,rubbertest_production_app,rubbertest_production_passenger,rubbertest_production_collectd,rubbertest_production_common,rubbertest_production_monit,rubbertest_production_db,rubbertest_production_postgresql,rubbertest_production_postgresql_master,rubbertest_production_elasticsearch,rubbertest_production_examples,rubbertest_production_graphite_server,rubbertest_production_graphite_web,rubbertest_production_graylog_elasticsearch,rubbertest_production_graylog_mongodb,rubbertest_production_mongodb,rubbertest_production_graylog_server,rubbertest_production_graylog_web,rubbertest_production_haproxy/Default
 ** Instance production created: i-eb8717d8
Waiting for instances to start...........................................
 ** Instance running, fetching hostname/ip data
  * executing `rubber:_allow_root_ssh'
  * executing "sudo -p 'sudo password: '  bash -l -c 'cp /home/ubuntu/.ssh/authorized_keys /root/.ssh/'"
    servers: ["50.112.28.254"]
. ** Failed to connect to 50.112.28.254, retrying
  * executing `rubber:_allow_root_ssh'
  * executing "sudo -p 'sudo password: '  bash -l -c 'cp /home/ubuntu/.ssh/authorized_keys /root/.ssh/'"
    servers: ["50.112.28.254"]
.............. ** timeout in initial connect, retrying
  * executing `rubber:_allow_root_ssh'
  * executing "sudo -p 'sudo password: '  bash -l -c 'cp /home/ubuntu/.ssh/authorized_keys /root/.ssh/'"
    servers: ["50.112.28.254"]
. ** Can't connect as user ubuntu to 50.112.28.254, assuming root allowed
  * executing `rubber:_direct_connection_50.112.28.254_864'
  * executing "echo"
    servers: ["50.112.28.254"]
..    [50.112.28.254] executing command
 ** [out :: 50.112.28.254] Please login as the bitnami user rather than root user.
 ** [out :: 50.112.28.254] 
.....    command finished in 14009ms
  * executing `rubber:setup_static_ips'
  * executing `rubber:setup_local_aliases'
 ** Writing out aliases into local machines /etc/hosts, sudo access needed
Password:
 ** Auto role: apache => production.foo.com, {:platform=>"linux"}
 ** Auto role: app => production.foo.com, {:platform=>"linux"}
 ** Auto role: passenger => production.foo.com, {:platform=>"linux"}
 ** Auto role: collectd => production.foo.com, {:platform=>"linux"}
 ** Auto role: common => production.foo.com, {:platform=>"linux"}
 ** Auto role: monit => production.foo.com, {:platform=>"linux"}
 ** Auto role: db => production.foo.com, {:primary=>true, :platform=>"linux"}
 ** Auto role: postgresql => production.foo.com, {:platform=>"linux"}
 ** Auto role: postgresql_master => production.foo.com, {:platform=>"linux"}
 ** Auto role: elasticsearch => production.foo.com, {:platform=>"linux"}
 ** Auto role: examples => production.foo.com, {:platform=>"linux"}
 ** Auto role: graphite_server => production.foo.com, {:platform=>"linux"}
 ** Auto role: graphite_web => production.foo.com, {:platform=>"linux"}
 ** Auto role: graylog_elasticsearch => production.foo.com, {:platform=>"linux"}
 ** Auto role: graylog_mongodb => production.foo.com, {:platform=>"linux"}
 ** Auto role: mongodb => production.foo.com, {:platform=>"linux"}
 ** Auto role: graylog_server => production.foo.com, {:platform=>"linux"}
 ** Auto role: graylog_web => production.foo.com, {:platform=>"linux"}
 ** Auto role: haproxy => production.foo.com, {:platform=>"linux"}
 ** Auto role: web => production.foo.com, {:platform=>"linux"}
 ** Auto role: web_tools => production.foo.com, {:platform=>"linux"}
  * executing `rubber:setup_remote_aliases'
    servers: ["production.foo.com"]
 ** sftp upload #<StringIO:0x000001029984c0> -> /tmp/setup_remote_aliases 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T06:47:37.097

您需要 64 位实例存储 Ubuntu 12.04 LTS 映像。ami 因地区而异，请访问[http://alestic.com/](http://alestic.com/)找到您首选地区的图像 ID。（在右手侧）

# jquery - 根据数量设置具有相同类的多个元素的宽度

> ID：12123267
> 
> 赞同：0
> 
> 时间：2012-08-25T15:29:02.370
> 
> 标签：jquery, css, console, width

我遇到了与以前类似的问题。我试图给多个元素一个宽度，具体取决于它们的存在数量。

假设我有 5 个元素，它们的宽度必须为 20%，如果我有 4 个 25% 等（宽度 = 100 / n）

我认为这会起作用，但它没有：

```
 if ($(window).width() <= 960) {

        $("aside.widget").css("width", function(){
            var widgetLength = $("section#secondary").children("aside.widget").length();
            return 100 / widgetLength + "%"
        });
    } 
```

也没有：

```
 if ($(window).width() <= 960) {         
        $("aside.widget").css("width", 100 / widgetLength + "%");
    } 
```

控制台返回：`Uncaught TypeError: Property 'length' of object [object Object] is not a function`

有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T15:43:42.727

它们都应该可以正常工作，但长度**不是**函数，所以你需要改变它：

```
var widgetLength = $("section#secondary").children("aside.widget").length(); 
```

对此：

```
var widgetLength = $("section#secondary").children("aside.widget").length; 
```

那么您问题中的两种方法都可以使用！

# networking - 捕获传入的 tcp/ip 数据包

> ID：12123269
> 
> 赞同：0
> 
> 时间：2012-08-25T15:29:23.427
> 
> 标签：networking, tcp, wireshark

谁能给我一个用于捕获传入 tcp/ip 数据包的 wireshark 过滤器的示例，以及另一个用于捕获特定端口上的传入数据包的示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T15:45:51.363

[在这里](http://wiki.wireshark.org/DisplayFilters)您可以找到各种示例。
对于传入的 ip 数据包： `ip.src==1.2.3.4`或特定端口上的数据包`tcp.port eq 8080` ，您可以将查询与逻辑运算符结合起来

# java - 如何在播放中显示 SPARQL 查询的输出！看法？

> ID：12123270
> 
> 赞同：1
> 
> 时间：2012-08-25T15:29:26.277
> 
> 标签：java, playframework-2.0, sparql, jena

我正在编写一个应用程序，用户可以在其中上传 .rdf 文件，然后在其上执行 SPARQL 查询。现在我被困在如何格式化查询结果的问题上。例如：`ASK`-Query 输出布尔值，`SELECT`-Query 返回 ResultSet。`CONSTRUCT`并`DESCRIBE`返回一个新的 RDF-Graph。
如何以表单形式获取给定查询的结果以将其传递给我的视图？我希望在那里打印出一个 HTML 表格。

为了更好地理解我的问题，我创建了这个简约的代码示例：

```
import java.io.InputStream;

import com.hp.hpl.jena.*;

public class playground {

    public static void main(String[] args) {

      InputStream in = FileManager.get().open("vc-db-1.rdf");
      Model model = ModelFactory.createDefaultModel();
      model.read(in, null);

      String queryStringSelect = "SELECT ?subject ?predicate ?object WHERE { ?subject ?predicate ?object }";
      String queryStringAsk = "ASK WHERE { ?subject ?predicate ?object }";
      String queryStringDescribe = "DESCRIBE * WHERE { ?subject ?predicate ?object }";
      String queryStringConstruct = "CONSTRUCT { ?subject ?predicate ?object } WHERE { ?subject ?predicate ?object }";

      QueryExecution qe = QueryExecutionFactory.create(queryStringDescribe,
        model);
      Query q = QueryFactory.create(queryStringDescribe);

      int queryType = q.getQueryType();
      switch (queryType) {
      case Query.QueryTypeAsk:
          boolean b = qe.execAsk(); // Result that has to be formatted
          ResultSetFormatter.outputAsTSV(System.out, b);
          break;
      case Query.QueryTypeConstruct:
          model = qe.execConstruct(); // Result that has to be formatted
          model.write(System.out);
          break;
      case Query.QueryTypeDescribe:
          model = qe.execDescribe(); // Result that has to be formatted
          model.write(System.out);
          break;
      case Query.QueryTypeSelect:
          ResultSet results = qe.execSelect(); // Result that has to be
                 // formatted
          ResultSetFormatter.outputAsTSV(System.out, results);
          break;
      }

      model.close();
      qe.close();

    }

} 
```

可以在此处下载提及的 .rdf 文件：http: [//jena.apache.org/tutorials/sparql_data/vc-db-1.rdf](http://jena.apache.org/tutorials/sparql_data/vc-db-1.rdf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:20:58.383

我终于找到了答案：

我拿了一个 ByteArrayOutputStream 并使用各种`model.write()`函数来完成其余的工作。对于`SELECT`-Query，我使用文本表示，因为提供的`ResultSetFormatter.outputAsRDF()`内容让我有很多废话。无论如何，这是相关的代码

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
...
int queryType = q.getQueryType();
switch (queryType) {
case Query.QueryTypeAsk:
    boolean b = qe.execAsk();
    ResultSetFormatter.outputAsRDF(baos, notation, b);
    retval = baos.toString();
    break;
case Query.QueryTypeConstruct:
    model = qe.execConstruct();
    model.write(baos, notation);
    retval = baos.toString();
    break;
case Query.QueryTypeDescribe:
    model = qe.execDescribe();
    model.write(baos, notation);
    retval = baos.toString();
    break;
case Query.QueryTypeSelect:
    ResultSet results = qe.execSelect();
    ResultSetFormatter.out(baos, results);
    retval = baos.toString();
    break;
} 
```

# r - 如何将 R xyplot 传递给 y 变量列表？

> ID：12123272
> 
> 赞同：2
> 
> 时间：2012-08-25T15:29:47.940
> 
> 标签：r

我正在使用`xyplot`输入`Y1 + Y2 ~ X`。我想`Y1 + Y2`作为一个列表传递，而不是两个显式变量。这样，我可以编写一个通用`xyplot`函数并为一系列 Y 传递不同的值。那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T15:48:55.950

一种策略是首先将公式的字符串表示形式粘贴在一起，然后将其转换为 class 的对象`"formula"`，使用`as.formula()`. 这是一个使用`mtcars`base R 附带的数据框的示例。

```
Y <- c("mpg", "cyl")
f <- as.formula(paste(paste(Y, collapse=" + "), " ~ disp"))
lattice::xyplot(f, data = mtcars) 
```

# iphone - 从互联网获取数据的基准测试

> ID：12123273
> 
> 赞同：0
> 
> 时间：2012-08-25T15:29:57.453
> 
> 标签：iphone, ios, xcode, cocoa-touch

我正在使用很多 API 并做一些实验，我想知道什么是了解执行特定请求需要多少时间的最佳方法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T15:45:45.630

使用仪器。总是。永远。

这是一个非常有用的工具，并且有很多内置的性能测量。此外，您可以保存结果以供以后比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T15:47:58.773

你应该看看这个教程 [http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)

它比较了不同的获取方法，包括：NSXMLParser、libxml2、TBXML、TouchXML、KissXML、TinyXML 和 GDataXML。

您可以下载该应用程序并查看每种方法的平均下载时间。

# regex - 使用 awk 从每束多行中 grep

> ID：12123276
> 
> 赞同：1
> 
> 时间：2012-08-25T15:30:11.137
> 
> 标签：regex, shell, awk

我有一个日志文件，其中包含一堆行，其中每一行由空行分隔。我想从每一行中提取某些行（包含常见模式）。每一行都是关于一封邮件。示例日志文件如下：

```
#START#
03:48:19:798: : <23/08/2012 03:48:19:019>
03:48:19:798: : <---23/08/2012 03:48 --->
03:48:19:799: : MAIL FROM IP=1.2.3.4
03:48:19:799: : START CHECKING OF IPLIMIT
03:48:19:799: : STOP CHECKING OF IPLIMIT
03:48:20:848:In : MAIL FROM: <a@abc.com>
03:48:20:848: : [A:A:A]
03:48:20:849: : max attach size-->5242880
03:48:20:856: : User Is Authenticated with "a@abc.com and domain abc.com"
03:48:20:856: : Passed
03:48:20:987:In : RCPT TO: <x@xyz.com>
03:48:20:987: : email x@xyz.com
03:48:20:992: : [A:A:A]
03:48:20:999: : passed
03:48:20:999:Inside the Store Mails
03:48:20:999: : BCC feature is not applicable x@xyz.com
03:48:21:000: : BCC feature is not applicable from a@abc.com
03:48:21:000:Inside the Store
03:48:21:132:In : RCPT TO: <y@xyz.com>
03:48:21:132: : email y@xyz.com
03:48:21:133: : [A:A:A]
03:48:21:140: : passed
03:48:21:140:Inside the Store Mails
03:48:21:140: : BCC feature is not applicable y@xyz.com
03:48:21:140: : not authenticated
03:48:21:140:Inside the Store
03:48:21:271: : Data Received
03:50:32:049: : 552 Size Limit Exceeded(5242880)
03:50:32:049: : File Moved in LargeSize Folder....
03:50:32:049: : File Moved in LargeSize Folder....
03:50:32:049: : Connection closed
03:50:32:049: : File Deleted /home/Mail//mailbox/LargeSize/x@xyz.com:24085.444724474357(1345673901000)
03:50:32:051: : File Deleted /home/Mail//mailbox/LargeSize/y@xyz.com:39872.512978520455(1345673901140)
MAIL DATA : : 6815779 Bytes
Total: Conn : 16713 Quit By Host : 5565 Stored : 11134 Loop:0
#END#
W A R N I N G ---------------W A R N I N G

...Waiting for activity on port Total Thread Started & 16732 Stoped 16730
#START#
03:56:20:790: : <23/08/2012 03:56:20:020>
03:56:20:790: : <---23/08/2012 03:56 --->
03:56:20:791: : MAIL FROM IP=2.3.4.5
03:56:20:792: : IP IS FRIEND IN WHITELIST
03:56:20:834:In : MAIL FROM:<y@xyz.com>
03:56:20:834: : [A:A:A]
03:56:20:834: : null
03:56:20:834: : Passed
03:56:20:834:In : RCPT TO: <a@abc.com>
03:56:20:834: : email a@abc.com
03:56:20:835: : Mailing List
03:56:20:835: : [A:A:A]
03:56:20:836: : passed
03:56:20:836: : Proceesing maillist
03:56:20:839: : Data Received
03:56:20:865: : /home/Mail//mailbox/MailingList/a@abc.com:79602.39544573233(1345674380836) Msg Queued For Delivery
03:56:20:865: : Msg forward successfully
03:56:20:865: : /home/Mail//mailbox/MailingList/M14310.39892966699(1345674380837) Msg Queued For Delivery
MAIL DATA : : 27985 Bytes
Total: Conn : 16732 Quit By Host : 5582 Stored : 11135 Loop:0
#END#

...Waiting for activity on port Total Thread Started & 16735 Stoped 16731
#START#
03:56:23:957: : <23/08/2012 03:56:23:023>
03:56:23:957: : <---23/08/2012 03:56 --->
03:56:23:958: : MAIL FROM IP=2.3.4.5
03:56:23:959: : IP IS FRIEND IN WHITELIST
03:56:23:999:In : MAIL FROM: <x@xyz.com>
03:56:23:999: : [A:A:A]
03:56:23:999: : null
03:56:23:999: : Passed
03:56:23:999:In : RCPT TO: <y@xyz.com>
03:56:23:999: : email y@xyz.com
03:56:24:000: : [A:A:A]
03:56:24:007: : passed
03:56:24:008:Inside the Store Mails
03:56:24:009: : BCC feature is not applicable y@xyz.com
03:56:24:009: : not authenticated
03:56:24:009:Inside the Store
03:56:24:009: : Data Received
03:56:24:053: : /home/Mail//mailbox/External/y@xyz.com:50098.70335800691(1345674384009) Msg Queued For Delivery
03:56:24:054: : Msg forward successfully
MAIL DATA : : 28276 Bytes
Total: Conn : 16735 Quit By Host : 5582 Stored : 11136 Loop:0
#END# 
```

这里，a@abc.com 是外部邮件 id，x@xyz.com、y@xyz.com 是内部邮件 id。对于每封邮件，都会生成从 #START# 到 #END# 的一行行。

从每一行我想运行一些模式匹配。我只想要那些邮件从内部电子邮件 ID 到外部电子邮件 ID 的行（第二行）。

我不想要邮件从外部电子邮件地址/id 到内部电子邮件 id（第一行），或从内部电子邮件 id 到内部电子邮件 id 的一堆行。（第 3 行）。

在我有一堆邮件从内部到外部的行之后，我想提取包含单词`FROM`and的行`TO`。

我尝试使用 awk 的`RS`,`ORS`和变量来转换从 at 开始`FS`和`OFS`结束的每一行行`#START#`以制作单行记录，但不能。我无法用分隔符替换换行符，例如`|`or `~`。另外，我现在不知道如何在每个资源记录上运行多个模式匹配。

我尝试使用`/PATTERN/`选项，但随后无法使用`system()`函数运行 grep 命令来获取检查域名的行。它给了我错误：`sh: 1: not found`。无法突破。我使用了代码：

```
if ($0 ~ /FROM/) { print $0 | system("egrep -i 'FROM|TO'") } 
```

此外，如果我尝试使用以下类型的代码导出每条记录，则它不起作用：

```
for i in $(cat log_file | awk_file_givin_1_resource_record_at_a_time) ; do pattern_matching_commands ; done 
```

这不起作用，因为模式匹配一​​次只在一行上工作，而我希望它一次在整个一堆上工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T11:22:45.690

我认为以下 BASH 脚本会运行良好，但您应该根据日志的大小对其进行基准测试：

```
#!/bin/bash

INTERNAL_DOMAINS="${1:-xyz.com|xyz.net}"

declare -i LINES BYTES VALIDS
LINES=0
BYTES=0
VALIDS=0
STATUS=stopped
while read LINE
do
  if [ "$STATUS" = stopped ]
  then  
    if [ "${LINE:0:7}" = "#START#" ] 
    then        
      STATUS=started    
      PARA=""           
    fi          
  else  
    if [ "${LINE:0:5}" = "#END#" ] 
    then        
      if [ $STATUS = valid ] 
      then              
        VALIDS+=1               
        echo "$PARA" | egrep -w "FROM|TO"
        echo -e "$VALIDS matched\t----------------------------------------"
      fi                
      STATUS=stopped    
    elif (echo "$LINE" | fgrep -q "RCPT TO") && (echo "$LINE" | egrep -qiv "@($INTERNAL_DOMAINS)")
    then        
      STATUS=valid      
      PARA+="$LINE      
"
    else        
      PARA+="$LINE      
"
    fi          
  fi

  LINES+=1
  BYTES+=${#LINE}
  BYTES+=1
  echo -en "\rRead: lines: $LINES | kB: $(($BYTES/1024)) | matches: $VALIDS " >&2
done 
```

您应该将上述脚本设置为可执行文件并像这样运行它以获得进度输出：

```
time ./filter.sh "one.int.com|two.int.com" < sample.log > report.out 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T16:02:51.010

如果记录之间总是有一个空行，而一个记录中从来没有一个空行，请使用 awk 的“段落模式”：设置`RS`为空字符串。

```
awk -v RS= '
    /^[0-9:]*In : MAIL FROM: <[^<>]*@example\.com>$/ &&
    /^[0-9:]*In : RCPT TO: <[^<>]*@example\.com>$/ { … }
' 
```

如果您确实需要使用`#START#`和`#END#`标记，请在进行过程中累积变量中的数据。进行处理，然后在到达时重置变量`#END#`。`#START#`如有必要，在下一次之前禁用处理。

```
BEGIN { in_record = 1; }
/^#START#$/ { in_record = 1; }
!in_record { next; }
/^[0-9:]*In : MAIL FROM: <([^<>]*)>$/ { from = $0; sub(/.*</, "", from); sub(/>.*/, "", from); }
…
/^#END#$/ {
    /* processing goes here */
    from = "";
    in_record = 0;
} 
```

# python - Python + eyeD3：无法将日期保存到 mp3 元数据

> ID：12123277
> 
> 赞同：6
> 
> 时间：2012-08-25T15:30:16.410
> 
> 标签：python, date, tags, mp3, metadata

我正在尝试使用 Python 及其 eyeD3 API 更新一堆 mp3 文件的元数据。

它看起来相当简单，我使用的代码如下所示：

```
if not eyeD3.isMp3File(filename):
    print filename, 'is not a mp3 file. Ignoring it.'
tag = eyeD3.Tag()
tag.link(filename)
tag.setVersion(eyeD3.ID3_V2)
tag.setTextEncoding(eyeD3.UTF_8_ENCODING)
tag.setTitle(dataset['Title'])
tag.setDate(datetime.datetime.now().year)
tag.update() 
```

发生的情况是：代码静默执行（没有错误或异常），标题设置正确，日期**未**在目标文件中设置。它保持为空或设置为先前的值（检查两种情况）。

setDate 函数的帮助并不是特别有趣：

```
setDate(self, year, month=None, dayOfMonth=None, hour=None, minute=None, second=None, fid=None) unbound eyeD3.tag.Tag method 
```

...但告诉我我的电话应该没问题。有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T05:50:03.313

我得到了和你一样的问题。最后，我放弃了eyeD3 lib，`mutagen`是个不错的选择。

这是我`mutagen.mp3`在 Python 中使用的示例。

```
from mutagen.mp3 import MP3
from mutagen.id3 import ID3, APIC, TIT2, TPE1, TRCK, TALB, USLT, error
# ID3 info:
# APIC: picture
# TIT2: title
# TPE1: artist
# TRCK: track number
# TALB: album
# USLT: lyric
def id3_cook(directory, filename, item, track_num):
    pic_file = directory + '/cover.jpg' # pic file
    audio = MP3(filename, ID3=ID3)
    try:
        audio.add_tags()
    except:
        pass
    audio.tags.add(APIC(
        encoding=3,
        mime='image/jpeg',
        type=3,
        desc=u'Cover Picture',
        data=open(pic_file).read()
    ))
    audio.tags.add(TIT2(encoding=3, text=item['song'].decode('utf-8')))
    audio.tags.add(TALB(encoding=3, text=item['album'].decode('utf-8')))
    audio.tags.add(TPE1(encoding=3, text=item['artist'].decode('utf-8')))
    audio.tags.add(TRCK(encoding=3, text=str(track_num).decode('utf-8')))
    audio.tags.add(USLT(encoding=3, lang=u'eng', desc=u'desc', text=item['lyric'].decode('utf-8')))
    audio.save() 
```

# java - 休眠 SaxParseException

> ID：12123280
> 
> 赞同：2
> 
> 时间：2012-08-25T15:30:26.097
> 
> 标签：java, xml, hibernate, netbeans, xsd

我在一个 Maven 项目中工作。Atm 我只有实体、映射和配置文件。我试图用 junit 测试我的休眠映射。

我找不到问题。我可以验证 netbeans 中的 xml 文件，但是当我运行测试时，我收到以下错误。

**netbeans 中的验证：**

```
XML validation started.

Checking file:/C:/Users/Err/Documents/NetBeansProjects/PinkSocks/src/main/resources/hibernate.cfg.xml...
Referenced entity at "http://localhost:8080/files/hibernate-configuration-4.0.xsd".
XML validation finished. 
```

**错误：**

```
 Initial SessionFactory creation failed.org.hibernate.MappingException: invalid configuration
            at bleh.mihihi.utils.HibernateUtil.buildSessionFactory(HibernateUtil.java:25)
            at bleh.mihihi.utils.HibernateUtil.<clinit>(HibernateUtil.java:16)
            at bleh.mihihi.utils.HibernateUtilTest.setUp(HibernateUtilTest.java:20)
    Caused by: org.hibernate.MappingException: invalid configuration
            at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:2014)
            at org.hibernate.cfg.Configuration.configure(Configuration.java:1931)
            at org.hibernate.cfg.Configuration.configure(Configuration.java:1910)
            at bleh.mihihi.utils.HibernateUtil.buildSessionFactory(HibernateUtil.java:21)
    Caused by: org.xml.sax.SAXParseException; lineNumber: 2; columnNumber: 25; Document is invalid: no grammar found.
            at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:198) 
```

**休眠.cfg.xml：**

```
 <?xml version="1.0" encoding="UTF-8"?>
    <hibernate-configuration
        xmlns="http://www.hibernate.org/xsd/hibernate-configuration"
        xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
        xsi:schemaLocation="http://www.hibernate.org/xsd/hibernate-configuration http://localhost:8080/files/hibernate-configuration-4.0.xsd">
        <session-factory>
            <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
            <property name="connection.url">jdbc:mysql://localhost/pinksocks</property>
            <property name="connection.username">root</property>
            <property name="connection.password">admin</property>
            <property name="connection.pool_size">1</property>
            <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
            <property name="current_session_context_class">thread</property>
            <property name="cache.provider_class">org.hibernate.cache.internal.NoCacheProvider</property>
            <property name="show_sql">true</property>
            <mapping class="bleh.mihihi.Beverage" file="Beverage.hbm.xml" />
        </session-factory>
    </hibernate-configuration> 
```

**饮料.hbm.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
    <hibernate-mapping
    xmlns="http://www.hibernate.org/xsd/hibernate-mapping"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.hibernate.org/xsd/hibernate-mapping http://localhost:8080/files/hibernate-mapping-4.0.xsd"
        package="bleh.mihihi.entities">
        <class name="Beverage" table="beverages">
            <id name="id" column="id">
                <generator class="native"/>
            </id>
            <property name="name" column="name" />
            <property name="alcohol" column="alcohol"/>
        </class>
    </hibernate-mapping> 
```

提前致谢

呃

编辑1：

我尝试过的事情：

*   重新输入

*   使用 dtd

*   将xsd放到其他地方

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-09T11:57:48.140

对于 Hibernate 4.x，您应该使用与 3.x 相同的 DTD：

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">

<hibernate-configuration>

    <session-factory> 
```

正如您在此[错误报告](https://hibernate.atlassian.net/browse/HHH-6617)中看到的那样，弃用警告已被删除。4.2 版本的教程也使用这个，你可以[在这里](http://docs.jboss.org/hibernate/orm/4.2/quickstart/en-US/html_single/files/hibernate-tutorials.zip)看到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T15:50:17.803

您忘记指定 DTD。

尝试在两个 xml 文件中保留以下代码并告诉我

```
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-25T02:38:29.567

您忘记了 hibernate.cfg.xml 文件中的 DTD

# java - Spring MVC：模型中的属性太多

> ID：12123281
> 
> 赞同：1
> 
> 时间：2012-08-25T15:30:33.083
> 
> 标签：java, spring-mvc

我对 spring-mvc （模型）有一个非常基本的问题。我正在做一个项目，我们在模型中设置了这么多的 addributes（即 model.addAttribute(..)。我的问题是我可以使用任何设计模式来避免这么多的 addAttributes 吗？

我知道我可以创建一个 bean/ 表单，并且在其中我也可以创建相应的 setter/getter，但我只是在寻找任何其他可用的选项。

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T17:42:49.147

没有特殊的设计模式，只有一些 Spring 或通用技术来避免给定控制器内过多的 addAttribute 调用。

如果您的视图中具有始终需要的属性（例如特定对象、列表、布尔值，例如“isXXXActivated”或“showThis”等），您可以在控制器中添加此类方法：

```
@ModelAttribute("isXXXActivated")
public boolean isXXXActivated(){
    return isXXXActivated;
} 
```

每次调用控制器时，这都会在模型中添加“isXXXActivated”。

如果您在所有控制器中添加相同的属性，您可以考虑将它们添加到超级控制器中（spring @Controller 可以毫无问题地扩展另一个 @Controller）。

最后，如果某些属性属于一个组，您可以将它们分组为对象的字段。然后，您只需将此对象添加为属性。示例：将显示条件分组到一个 Display 类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T15:38:21.427

如果你想使用设计模式来解决问题，你真的需要看看它们是如何交互的。你查过不同的设计模式吗？您是否考虑过制作更多对象，以便您可以将它们拆分并概括它们，如果您知道设计模式，则使用模板方法。

# mysql - 有没有更有效的方法来编写这个 MySQL 查询？

> ID：12123285
> 
> 赞同：1
> 
> 时间：2012-08-25T15:30:53.070
> 
> 标签：mysql, database, joomla, virtuemart

我是 mysql 的新手，我设法将它拼凑起来以获得我想要的结果。它可以更好地编码吗？是否存在任何安全风险？它在 php 中输出。

```
$qwe = $product->virtuemart_product_id;    
$id = mysql_real_escape_string($qwe);

$result = mysql_query('SELECT * FROM virtuemart_product_medias where virtuemart_product_id = ' . $id . ' LIMIT 1');

$row = mysql_fetch_assoc($result);    
$matched = $row['virtuemart_media_id'];

$result2 = mysql_query('SELECT * FROM virtuemart_medias where virtuemart_media_id = ' . $matched . ' LIMIT 1');

$row2 = mysql_fetch_assoc($result2);    
$matched2 = $row2['file_url_thumb'];

echo $matched2; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T15:39:50.453

我不知道您提供的特定代码中是否存在安全漏洞 - 这取决于您的程序其他地方存在哪些其他验证，以及您认为什么是安全漏洞。但是您编码的方式意味着肯定存在安全漏洞*。*让我们看看您的第一个查询：

```
$id = mysql_real_escape_string($qwe);

$result = mysql_query('SELECT *
    FROM virtuemart_product_medias
    WHERE virtuemart_product_id = ' . $id . ' LIMIT 1'); 
```

想象一下 if`$qwe`是 string `0 OR 1=1 --`。唯一转义某些字符，[`mysql_real_escape_string`](http://php.net/manual/en/function.mysql-real-escape-string.php)例如引号和反斜杠。

> `mysql_real_escape_string()`调用 MySQL 的库函数 mysql_real_escape_string，该函数将反斜杠添加到以下字符：`\x00`、`\n`、`\r`、`\\`、`'`和.`"``\x1a`

我上面提到的字符串`0 OR 1=1 --`不包含任何这些字符，因此它根本不会受到`mysql_real_escape_string`. 代入 的值后`$id`，生成的 SQL 查询将如下所示：

```
SELECT *
FROM virtuemart_product_medias
WHERE virtuemart_product_id = 0 OR 1=1 -- LIMIT 1 
```

如您所见，这将返回所有行。

长话短说：**使用 PDO 和参数化查询**。

**有关的**

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T15:36:46.210

使用一个查询而不是两个查询，并仅选择您正在使用的字段，如下所示：

```
SELECT `file_url_thumb` FROM virtuemart_medias where virtuemart_media_id = (SELECT `virtuemart_media_id` FROM virtuemart_product_medias where virtuemart_product_id = ' . $id . ' LIMIT 1) LIMIT 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T15:39:09.920

1.  首先，永远不要使用这些`mysql_*`功能。它们已被弃用，并且非常不鼓励依赖它们。使用[MySQLi](http://www.php.net/manual/en/book.mysqli.php)或[PDO](http://www.php.net/manual/en/ref.pdo-mysql.php)

2.  上面的查询可以重写为

    SELECT file_url_thumb FROM meadowmart_medias where practicemart_media_id = (SELECT meadowmart_media_id FROM practicemart_product_medias where practicemart_product_id = ' . $id . ' LIMIT 1) LIMIT 1

3.  永远不要做`SELECT *`. 仅在查询中包含代码中需要的那些字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T15:44:11.417

您始终可以使用联接；

```
SELECT a.virtuemart_media_id, b.file_url_thumb 
FROM virtuemart_product_medias a
LEFT JOIN virtuemart_medias b
  ON a.virtuemart_media_id = b.virtuemart_media_id
WHERE virtuemart_product_id = $id
LIMIT 1 
```

`virtuemart_media_id`如果它存在，那将始终为您提供and `file_url_thumb`。

您的查询也有问题，`mysql_real_escape_string`仅转义*strings*，因为您没有在查询中引用 $id ，因此不会将其作为字符串处理，并且转义对您没有帮助。正如其他答复指出的那样，您确实应该使用 mysqli 或 PDO。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-25T15:45:28.880

这个怎么样：

```
SELECT a.file_url_thumb 
FROM virtuemart_medias a 
LEFT JOIN virtuemart_product_medias b on a.virtuemart_media_id=b.irtuemart_media_id 
WHERE a.virtuemart_product_id=' . $id . ' LIMIT 1 
```

# .net - 在 Perl 中使用 NTLM 身份验证使用 .NET Web 服务

> ID：12123286
> 
> 赞同：0
> 
> 时间：2012-08-25T15:31:35.277
> 
> 标签：.net, perl, soap, ntlm, strawberry-perl

我正在尝试从 Perl 脚本调用 .NET SOAP Web 服务，如下所示。

```
#!/usr/bin/perl -w
use strict;
use SOAP::Lite 'trace', 'debug';
use Authen::NTLM;
use Data::Dumper;

my $user = '\\username';
my $pass = 'password';
my $host = 'host.example.com:80';

# enable NTLMv2 in Authen::NTLM
ntlmv2(1);

my $soap = SOAP::Lite
    -> uri('http://application.dept.example.com')
    -> proxy('http://host.example.com/app/services/request.asmx', keep_alive => 1, credentials => [$host, '', $user, $pass])
    -> on_action(sub { join '/', 'http://application.dept.example.com', $_[1] })# needed for .NET
    -> readable(1)
    ;

my $som = $soap->GetData(
    SOAP::Data->name(ID => 1234)
);
die $som->faultstring() if defined $som->fault();
my @result = $som->dataof('//GetResponse/GetResult');

foreach my $data (@result) {
    my $item = $data->attr;
    print Dumper($item);
} 
```

但是，当我执行这个脚本时，我得到了这个输出。你会注意到我没有得到任何结果。

```
SOAP::Transport::HTTP::Client::send_receive: POST http://host.example.com/app/services/request.asmx HTTP/1.1
Accept: text/xml
Accept: multipart/*
Accept: application/soap
Content-Length: 542
Content-Type: text/xml; charset=utf-8
SOAPAction: http://application.dept.example.com/GetData

<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
    soap:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" 
    xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <GetData xmlns="http://application.dept.example.com">
      <ID xsi:type="xsd:int">1234</materialID>
    </GetData>
  </soap:Body>
</soap:Envelope>
SOAP::Transport::HTTP::Client::send_receive: HTTP/1.1 200 OK
Cache-Control: private, max-age=0
Date: Sat, 25 Aug 2012 14:43:05 GMT
Server: Microsoft-IIS/7.5
Content-Length: 367
Content-Type: text/xml; charset=utf-8
Client-Date: Sat, 25 Aug 2012 14:43:03 GMT
Client-Peer: 165.216.6.189:80
Client-Response-Num: 3
Persistent-Auth: true
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<soap:Body>
<GetResponse xmlns="http://application.dept.example.com/">
<GetResult />
</GetResponse>
</soap:Body>
</soap:Envelope>

$VAR1 = {}; 
```

我已经确认这项服务确实有效——所以问题出在我的脚本上。我对使用 Web 服务非常陌生，因此将不胜感激任何指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T17:53:57.777

如果查看返回的数据，所引用的节点`//GetResponse/GetResult`是一个空元素

```
<GetResponse xmlns="http://application.dept.example.com/">
  <GetResult />
</GetResponse> 
```

所以你的程序正确地找到了元素并且什么也不显示

# xslt - xslt插入cdata

> ID：12123287
> 
> 赞同：3
> 
> 时间：2012-08-25T15:31:47.530
> 
> 标签：xslt, cdata

我需要将几个元素的值插入一个 cdata ...这是我的代码：

首先，我做了输出：

```
<xsl:output method="xml" encoding="UTF-8" intend="yes" cdata-section-elements="embassy" /> 
```

这是元素定义：

```
<xsl:element name="embassy">
  <xsl:value-of select="Visa/visa_velv/visa_velv_name" />
  <xsl:element name="br" />
  <xsl:value-of select="Visa/visa_velv/visa_velv_address" />
  <xsl:element name="br" />
  <xsl:value-of select="Visa/visa_velv/visa_velv_city" />
</xsl:element> 
```

这是我需要的不好的输出：

```
<embassy><![CDATA[Ambasada e Republikes se Cekise]]>
  <br/><![CDATA[Rruga Skënderbej 10]]>
  <br/><![CDATA[Tirana]]>            
</embassy> 
```

我需要这个输出：

```
<embassy>
  <![CDATA[Ambasada e Republikes se Cekise<br/>Rruga Skënderbej 10<br/>Tirana]]>
</embassy> 
```

我正在阅读[文档](http://www.xm.co.nz/ShoXS/xsloutput.htm)，但找不到解决方案。感谢您的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T16:24:17.370

如果您真的需要或想要转义标记，请使用

```
<embassy>
  <xsl:value-of select="Visa/visa_velv/visa_velv_name" /><![CDATA[<br/>]]><xsl:value-of select="Visa/visa_velv/visa_velv_address" /><![CDATA[<br/>]]><xsl:value-of select="Visa/visa_velv/visa_velv_city" />
</embassy> 
```

当然`cdata-section-elements="embassy"`你已经拥有了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T16:36:51.323

**这个完整而简单的转换：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes" cdata-section-elements="Embassy"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="visa_velv">
     <Embassy>
       <xsl:value-of select=
       "concat(visa_velv_name,'&lt;br/>',visa_velv_address,'&lt;br/>',visa_velv_city)"/>
     </Embassy>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于以下 XML 文档时：**

```
<Visa>
 <visa_velv>
   <visa_velv_name>Ambasada e Republikes se Cekise</visa_velv_name>
   <visa_velv_address>Rruga Skënderbej 10</visa_velv_address>
   <visa_velv_city>Tirana</visa_velv_city>
 </visa_velv>
</Visa> 
```

**产生想要的结果：**

```
<Embassy><![CDATA[Ambasada e Republikes se Cekise<br/>Rruga Skënderbej 10<br/>Tirana]]></Embassy> 
```

# web.xml - web.xml 错误页面不显示图像

> ID：12123294
> 
> 赞同：2
> 
> 时间：2012-08-25T15:32:39.047
> 
> 标签：web.xml, custom-error-pages

例如，我有一个 error.html 页面，当用户遇到 Error404 时，我想将其重定向到该页面。以下工作：

```
<error-page>
    <error-code>404</error-code>
    <location>/error404.jsp</location>
</error-page> 
```

但是，我的 error404.jsp 文件包含在用户被重定向时不会显示的图像。如果我只是输入 URL，则会显示带有图像的完整页面。但是，如果用户尝试执行报告错误 404 的操作，则会显示 error404.jsp 文件而不显示图像。

我也尝试了 error404.html 但我遇到了同样的问题......

你知道为什么会这样吗？

非常感谢埃纳

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T16:47:59.170

呈现错误页面时，其内容会在 HTTP 响应中返回，而无需重定向。这意味着浏览器仍然会在出现错误的请求的 URL 上下文中“看到”它。因此，任何相对资源链接（图像、css 等）都将相对于当前页面的 URL。

因此，如果您有以下设置：

*   `image1.gif`在图像文件夹中
*   `error404.jsp`将图像引用为`"../images/image1.gif"`

您会发现输入[http://yourserver.com/YourContextRoot/error404.jsp](http://yourserver.com/YourContextRoot/error404.jsp)可以正常工作，但是当您使用[http://yourserver.com/YourContextRoot/path1/path2/missingPage](http://yourserver.com/YourContextRoot/path1/path2/missingPage)时，它​​会尝试查找错误的图像路径（即在 下`/YourContextRoot/path1/images/image1.gif`）。

解决方案是使用 JSP EL 或 scriptlet 创建相对于服务器的链接（即以“/”开头），方法是包含上下文根：

```
<img src="${pageContext.request.contextPath}/images/image1.gif" /> 
```

我希望这行得通！

# android - 游戏手柄支持安卓

> ID：12123297
> 
> 赞同：4
> 
> 时间：2012-08-25T15:33:38.653
> 
> 标签：android, android-4.2-jelly-bean, motionevent

我正在尝试为我的游戏添加游戏手柄支持，但我无法找到如何从游戏手柄的操纵杆获取运动事件的任何地方。

我有类似的东西，但它似乎从来没有被调用或做任何事情。我正在使用 JellyBean 在 XOOM 上进行测试，我的游戏手柄可以在菜单中导航。

```
@Override
public boolean onGenericMotionEvent(MotionEvent e) {
    if ((e.getDevice().getSources() & InputDevice.SOURCE_CLASS_JOYSTICK) != 0) {
        float x = e.getX();
        float y = e.getY();
        mJoy1.set(x, y);
        mJoy2.set(-1,1);
        mRenderer.onAxisMoved(mJoy1, mJoy2);
        return true;
    }
    return false;
} 
```

如何从游戏手柄读取轴数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T03:16:33.750

我能够让它工作。我必须将这些行添加到我的视图的初始化中。

```
 setFocusable(true);
    setFocusableInTouchMode(true); 
```

之后我得到了函数调用。

# javascript - iframe中的jquery click元素

> ID：12123298
> 
> 赞同：1
> 
> 时间：2012-08-25T15:33:39.117
> 
> 标签：javascript, jquery, iframe, real-time

我想单击此处幻灯片上的下一个按钮 - [http://engineer.org.in/2011/realtime/](http://engineer.org.in/2011/realtime/)以编程方式使用 JavaScript。视频位于 iframe 中。

我试过`$("div.punch-viewer-right").click()`了，但没有用。

谁能告诉我为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T15:46:32.670

由于[XSS](http://en.wikipedia.org/wiki/Cross-site_scripting)安全问题，您无法访问 iframe，因为它与尝试访问它的网站不在同一个域中。

# android - Android - 显示电话簿联系人并选择一个

> ID：12123302
> 
> 赞同：16
> 
> 时间：2012-08-25T15:33:59.983
> 
> 标签：android, android-layout, android-intent, android-emulator

我想通过单击按钮显示电话簿中的联系人列表，然后从中选择一个联系人，然后检索其联系号码？我不想制作我的自定义列表，有没有办法使用内置功能的机器人？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-25T16:11:41.820

试试这个-->

```
 setContentView(R.layout.main);

   contactNumber = (TextView)findViewById(R.id.contactnumber);

   Button buttonPickContact = (Button)findViewById(R.id.pickcontact);
   buttonPickContact.setOnClickListener(new Button.OnClickListener(){

   @Override
    public void onClick(View arg0) {
   // TODO Auto-generated method stub

   Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
   intent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE);
   startActivityForResult(intent, 1);             

    }});
   }

   @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);

   if(requestCode == RQS_PICK_CONTACT){
   if(resultCode == RESULT_OK){
    Uri contactData = data.getData();
    Cursor cursor =  managedQuery(contactData, null, null, null, null);
    cursor.moveToFirst();

      String number =       cursor.getString(cursor.getColumnIndexOrThrow(ContactsContract.CommonDataKinds.Phone.NUMBER));

      //contactName.setText(name);
      contactNumber.setText(number);
      //contactEmail.setText(email);
     }
     }
     }
     } 
```

编辑 XML 添加；

```
 <?xml version="1.0" encoding="utf-8"?>
      <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
       android:layout_width="match_parent"
       android:layout_height="match_parent"
       android:orientation="vertical" >

      <Button
        android:id="@+id/pickcontact"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Pick Contact" />

      <TextView
       android:id="@+id/contactnumber"
       android:layout_width="match_parent"
       android:layout_height="wrap_content" />

 </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-09-10T10:50:00.717

我看到这个问题很老了，但是我在我的应用程序中做同样的事情，并想在这里发布我的代码，如果这对将来的任何人有帮助的话。

这是如何开始显示列表的新意图

```
 Intent intent = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI);
    startActivityForResult(intent, PICK_CONTACT); 
```

这就是如何处理结果

```
 @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if (requestCode == PICK_CONTACT) {
            if (resultCode == RESULT_OK) {
                Uri contactData = data.getData();
                String number = "";
                Cursor cursor = getContentResolver().query(contactData, null, null, null, null);
                cursor.moveToFirst();
                String hasPhone = cursor.getString(cursor.getColumnIndexOrThrow(ContactsContract.Contacts.HAS_PHONE_NUMBER));
            String contactId = cursor.getString(cursor.getColumnIndexOrThrow(ContactsContract.Contacts._ID));
            if (hasPhone.equals("1")) {
                Cursor phones = getContentResolver().query
                        (ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,
                                ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                                        + " = " + contactId, null, null);
                while (phones.moveToNext()) {
                    number = phones.getString(phones.getColumnIndex
                   (ContactsContract.CommonDataKinds.Phone.NUMBER)).replaceAll("[-() ]", "");
                }
                phones.close();
    //Do something with number
            } else {
                Toast.makeText(getApplicationContext(), "This contact has no phone number", Toast.LENGTH_LONG).show();
            }
                cursor.close();
                }
            }
        }
    } 
```

PICK_CONTACT 是类中定义的常量。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-25T15:39:15.487

```
Intent i=new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI);

startActivityForResult(i, PICK_REQUEST); 
```

`Intent`传递给您的方法`onActivityResult()`将包含`Uri`所选联系人的 ——您将通过调用`getData()`that来获得它`Intent`。

[这是一个示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/ConfigChange/Fragments)，演示了这一点，逻辑在保留的片段中实现，因此我们在配置更改（例如，用户旋转屏幕）时保持选定的联系人。

您也可以使用`ACTION_GET_CONTENT`它，我认为这是更现代的模式，尽管它`ACTION_PICK`确实有效，并且是我在撰写本文时所拥有的示例代码。如果您将来阅读此内容（嗨，未来！），链接到的示例可能已更新为使用`ACTION_GET_CONTENT`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-30T17:19:42.007

对于 Kotlin ，获取联系人的请求代码

```
private val REQUEST_CONTACT = 201 
```

打算启动电话簿

```
 private fun fetchPhoneNo() {
        val intent = Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI)
        startActivityForResult(intent, REQUEST_CONTACT)
    } 
```

获取 onActivityResult 中的 PhoneNo

```
override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {
 if (requestCode == REQUEST_CONTACT && data?.data != null) {
               val contactUri = data.data;
        val crContacts = contentResolver.query(contactUri, null, null, null, null);
        crContacts.moveToFirst()
        val id = crContacts.getString(crContacts.getColumnIndex(ContactsContract.Contacts._ID));
        if (Integer.parseInt(crContacts.getString(crContacts.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
            val crPhones = contentResolver.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,
                    ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                            + " = ?", arrayOf(id), null)
            crPhones.moveToFirst()
        var phoneNo = crPhones.getString(
crPhones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER))                     
                crPhones.close()
            }
            crContacts.close()
            }
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-07T14:12:19.077

这是我在**API Level 29+中尝试过的工作代码**

第 1 步：在 AndroidManifest.xml 中添加权限

```
<uses-permission android:name="android.permission.READ_CONTACTS" /> 
```

第 2 步：单击按钮时打开联系人对话框的代码

```
private static final int REQ_PICK_CONTACT = 3;
private static final int CONTACT_PERMISSION_CODE = 1;
//Onclick handler
public void openContacts(View view) {
    if(checkContactPermission()) {
        openContactsDialog();
    } else {
        requestContactPermission();
    }
}

//If permission is granted, then open contact box
private void openContactsDialog() {
    Intent intent = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI);
    startActivityForResult(intent, REQ_PICK_CONTACT);
}

//Check if the user has the permission granted
private boolean checkContactPermission() {
    boolean result = ContextCompat.checkSelfPermission(this, Manifest.permission.READ_CONTACTS) == PackageManager.PERMISSION_GRANTED;
    return result;
}

//Invoke request permission dialog
private void requestContactPermission() {
    String[] permission = {Manifest.permission.READ_CONTACTS};
    ActivityCompat.requestPermissions(this, permission, CONTACT_PERMISSION_CODE);
}
//After the permission is granted, open the contact dialog
@Override
public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {
    super.onRequestPermissionsResult(requestCode, permissions, grantResults);

    if(requestCode == CONTACT_PERMISSION_CODE){
        if(grantResults.length > 0 && grantResults[0] == PackageManager.PERMISSION_GRANTED) {
            openContactsDialog();
        }
    }
} 
```

第 3 步：处理联系人选择

```
 @Override
protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == REQ_PICK_CONTACT) {
        if (resultCode == RESULT_OK) {
            Cursor cursor1, cursor2;
            Uri uri = data.getData();

            cursor1 = getContentResolver().query(uri, null, null, null, null);
            if(cursor1.moveToFirst()) {
                String contactId = cursor1.getString(cursor1.getColumnIndex(ContactsContract.Contacts._ID));
                String contactName = cursor1.getString(cursor1.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                String hasNumber = cursor1.getString(cursor1.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER));

                if("1".equals(hasNumber)) {
                    cursor2 = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID + "=" + contactId, null, null);
                    while(cursor2.moveToNext()) {
                        String contactNumber = cursor2.getString(cursor2.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                        //Use contactName and contactNumber for your purposes
                    }
                    cursor2.close();
                }
            }
            cursor1.close();
            //edtName.setText(contactName);
            //edtNumber.setText(number);
        }
    }
} 
```

解决方案礼貌：[https ://www.youtube.com/watch?v=1_TT3NN_g9w](https://www.youtube.com/watch?v=1_TT3NN_g9w)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-23T13:49:25.140

在我测试过的 nexus 5x 模拟器中：

```
Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
   intent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE);
   startActivityForResult(intent, 1); 
```

或者：

```
Uri uri = Uri.parse("content://contacts");
        Intent intent = new Intent(Intent.ACTION_PICK, uri);
        intent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_TYPE);
        startActivityForResult(intent, 1); 
```

不适用于所有联系人。我不知道为什么。但是这个：

```
Intent intent = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI);
startActivityForResult(intent, 1); 
```

作品。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-20T10:15:25.303

添加`PICK_CONTACT`字段：

```
private final int PICK_CONTACT = 55; 
```

在`onCreate()`：

```
 viewPhonebook.setOnClickListener(v -> {
        try {
            Uri uri = Uri.parse("content://contacts");
            Intent intent = new Intent(Intent.ACTION_PICK, uri);
            intent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_TYPE);
            startActivityForResult(intent, PICK_CONTACT);
        } catch (Exception e) {
            e.printStackTrace();
        }

    }); 
```

在`onActivityResult()`：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK) {
        switch (requestCode) {
            case PICK_CONTACT:
                     Uri contactData = data.getData();
                    Cursor cursor = managedQuery(contactData, null, null, null, null);
                    cursor.moveToFirst();
                    String number = cursor.getString(cursor.getColumnIndexOrThrow(ContactsContract.CommonDataKinds.Phone.NUMBER));
                    String contactName = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                    edtName.setText(contactName);
                    edtNumber.setText(number);
                    break;
        }
    }
} 
```

# php - 如何格式化从 jQuery datepicker 返回的日期输入值以匹配 mysql DATE 字段？

> ID：12123305
> 
> 赞同：0
> 
> 时间：2012-08-25T15:34:42.687
> 
> 标签：php, jquery, mysql, date

我有一个带有 jQ​​uery datepicker 的表单。我已将日期格式设置为欧洲方式：`dd-mm-yy`为了使它对用户看起来不错。然而，这个日期值最终需要在**PHP**中重新格式化，`yy-mm-dd`以便可以存储在我的**mysql DATE 字段中**。这是我的代码：

**Jquery：**

```
 $("document").ready(function(){

    $(function() {
    $( ".datepicker" ).datepicker({
        monthNames: ['januari', 'februari', 'maart', 'april', 'mei', 'juni',
                     'juli', 'augustus', 'september', 'oktober', 'november', 'december'],
        dayNamesMin: ['Zo', 'Ma', 'Di', 'Wo', 'Do', 'Vr', 'Za'],
        dateFormat:'dd-mm-yy',
        });
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T15:38:06.187

您有三个选项（以某种模糊的优先顺序）：

1.  使用 MySQL 的[`STR_TO_DATE()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_str-to-date)函数来转换字符串：

    ```
    INSERT INTO ... VALUES (STR_TO_DATE(:date, '%d/%m/%Y')) 
    ```

2.  将从 jQuery 接收到的字符串转换为 PHP[`DateTime`](http://php.net/manual/en/class.datetime.php)对象：

    ```
    $dt = DateTime::createFromFormat('d/m/Y', $_POST['date']); 
    ```

    然后是：

    *   获取合适的格式化字符串：

        ```
        $date = $dt->format('Y-m-d'); 
        ```

    *   获取 UNIX 时间戳：

        ```
        $timestamp = $dt->getTimestamp(); 
        ```

        然后直接传递给 MySQL 的[`FROM_UNIXTIME()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_from-unixtime)函数：

        ```
        INSERT INTO ... VALUES (FROM_UNIXTIME(:timestamp)) 
        ```

3.  手动将字符串操作为有效的文字：

    ```
    $parts = explode('-', $_POST['date']);
    $date  = "$parts[2]-$parts[1]-$parts[0]"; 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-05T17:30:14.413

使用 jQuery UI 的[`altFormat`](http://api.jqueryui.com/datepicker/#option-altFormat)选项让 datepicker 以另一种格式将日期发送到服务器。这需要表单中备用字段的 ID，可以隐藏。

```
$( ".datepicker" ).datepicker({
    dateFormat: 'dd-mm-yy',
    altField: '#actualDate',
    altFormat: 'yy-mm-dd'
}); 
```

这使您可以向用户显示一种日期格式，同时以与 MySQL 兼容的日期格式发送等效日期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T15:43:50.320

```
// dd-mm-yy to yy-mm-dd
$date = explode('-',$_POST['date']);
$mysqlDate = $date[2].'-'.$date[1].'-'.$date[0]; 
```

# ruby - 在 Ruby on Rails 中使用字符串并尝试简化代码

> ID：12123307
> 
> 赞同：0
> 
> 时间：2012-08-25T15:34:57.557
> 
> 标签：ruby

我想知道是否有任何方法可以简化下面的代码。我希望方法存在。

```
def add_meta_tag_keywords
    keyword_meta_tag = ""
    keyword_meta_tag << "#{params[:tag]}" if params[:tag].present?
    if params[:city].present?
      if keyword_meta_tag.present?
        keyword_meta_tag << ", #{params[:city]}"
      else
        keyword_meta_tag << "#{params[:city]}"
      end
    end

    if params[:region].present?
      if keyword_meta_tag.present?
        keyword_meta_tag << ", #{params[:region]}"
      else
        keyword_meta_tag << "#{params[:region]}"
      end
    end

    if keyword_meta_tag.present?
      keyword_meta_tag << "."
      append_meta_tag_keywords keyword_meta_tag
    end
  end 
```

你有什么想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T16:45:43.880

功能方法：

```
def add_meta_tag_keywords
  fields = params.values_at(:tag, :city, :region).select(&:present?)
  append_meta_tag_keywords(fields.join(", ") + ".") unless fields.empty?
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T15:54:58.290

首先将它们累积在一个数组中，然后将它们连接在一起大大简化了逻辑：

```
def add_meta_tag_keywords
  keyword_meta_tags = []
  keyword_meta_tags << params[:tag]
  keyword_meta_tags << params[:city]
  keyword_meta_tags << params[:region]

  keyword_meta_tags = keyword_meta_tags.reject(&:blank?)
  if keyword_meta_tags.any?
    keyword_meta_tag = keyword_meta_tags.join(', ').concat('.')
    append_meta_tag_keywords keyword_meta_tag
  end
end 
```

# jquery - 加载时显示纯 HTML 页面的 JQuery 数据表

> ID：12123309
> 
> 赞同：3
> 
> 时间：2012-08-25T15:35:15.667
> 
> 标签：jquery, datatables

有人可以帮我处理这段代码吗？我正面临问题，即一开始就出现纯 html 页面。我注意到对于像 100 条记录这样的较小查询，它可以正常工作，但对于像 8000 条这样的较大查询。它在开始加载时将整个表显示为纯 html 表，然后正常工作。

```
 $(document).ready( function () {
            var oTable = $('#datatables').dataTable( {
                "bJQueryUI": true,
                "sScrollY": "300px",
                "sScrollX": "100%",
                "sScrollXInner": "150%",
                "bScrollCollapse": true,
                "bPaginate": true,
                "aaSorting":[[0, "asc"]],
                "sPaginationType":"full_numbers",
            });
            new FixedColumns( oTable );
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-12-19T12:49:30.633

首先，将您的表`hidden`默认设置为：

```
<table id="#datatables" hidden> 
```

然后在构造函数中包含`initComplete`回调。`$().DataTable()`这将仅在加载所有数据后运行，因此您可以将表设置为`$().show()`：

```
$('#datatables').dataTable( {
  "initComplete": function(settings, json) {
     $('#datatables').show();
     }
} ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T23:56:42.680

删除 HTML 文件中的所有数据并将其留空。这样您的页面会立即加载。当数据被加载到页面中时，Ajax 源将显示一个漂亮的加载图形。

下面是插件使用 Ajax 源选项的配置。

```
$(document).ready(function() {
    $('#datatables').dataTable( {
        "bProcessing": true,
        "sAjaxSource": 'arrays.txt'
    } );
} ); 
```

下面是从 arrays.txt 提供的，您的数据作为静态文件提供，或者您可能有服务器逻辑来创建数据： **arrays.txt**

```
{
  "aaData": [
    [
      "Trident",
      "Internet Explorer 4.0",
      "Win 95+",
      "4",
      "X"
    ],
    [
      "Trident",
      "Internet Explorer 5.0",
      "Win 95+",
      "5",
      "C"
    ],
    [
      "Trident",
      "Internet Explorer 5.5",
      "Win 95+",
      "5.5",
      "A"
    ]
} 
```

# java - 将项目的 .class 文件输出到 Eclipse 中另一个项目的资源文件夹

> ID：12123313
> 
> 赞同：1
> 
> 时间：2012-08-25T15:36:09.813
> 
> 标签：java, eclipse

我目前正在开发一个 2 项目系统，`mainProj`并且`sideProj`.

这个想法是将输出 .class 文件`sideProj`作为`mainProj`资源文件放置，所以我想找到一种方法来自动将输出操作系统`sideProj`作为 .class 的资源`mainProj`。

“默认输出文件夹”选项似乎只允许我输出到给定项目中的任何目录，而不是其他项目。

实现这一目标的最佳方法是什么（最好不必求助于蚂蚁）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T17:24:36.900

简单地将sideProj添加到mainProj的构建路径中不是更容易吗？就像每个普通的库项目和主项目一样？还是有更具体的原因来移动这些类文件？

如果您真的想按照最初描述的方式进行处理，那么基于 Ant 的构建器可能是您唯一的选择（选择 sideProj、上下文菜单、属性、构建器、添加、Ant ......）。虽然您必须自己编写那个简短的脚本，但它会在之后参与自动构建过程，而无需您调用它。

# c# - 如何替换/更新 DataGridView 中的 DataRow

> ID：12123316
> 
> 赞同：0
> 
> 时间：2012-08-25T15:36:56.907
> 
> 标签：c#, sql-server, datagridview, ado.net, datarow

我正在尝试更新 SQL 表中的单个记录。因此，我`DataGridView`查看了该表，当在表中选择了某行并单击更新按钮时，`Form`将打开新的更新。

主窗体将`DataRow`row 参数传递给 new `Form`，当更新结束时，将 row 返回到主窗体。主窗体中的代码示例大约是这样的：

```
private void btnUpdateUser_Click(object sender, EventArgs e)
{
  //Some code to extract DataRow
  FormUpdateUsers updateUser = new FormUpdateUsers(row, new Action<DataRow>(onUserUpdated));
  updateUser.Show();
} 
```

当 Update Form 完成更新时，它会调用 action 并将 row 返回到 Main Form，如下所示。

```
public partial class FormUpdateUsers : Form
{

private DataRow row;
private Action<DataRow> action;

public  FormUpdateUsers(DataRow row, Action<DataRow> action)
    {
        InitializeComponent();

        this.row = row;
        this.action = action;
    }

    private void btnConfirm_Click(object sender, EventArgs e)
    {
    //Some code for updatin a database
    action.Invoke(row);
    }
} 
```

问题是，如何插入返回的行晒`DataGridView`并替换过时的行？有什么建议么？

```
private void onUserUpdated(DataRow row)
{
// Update DataGridView?
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T15:49:33.577

你必须知道哪一行。dgv（和数据行）中是否已有任何 id 列？如果是这样，那么你可以这样做：

```
 private void onUserUpdated(DataRow row)
    {
        int idColumn = int.Parse(row["IdColumn"].ToString());
        foreach (DataGridViewRow DGVrow in dataGridView1.Rows)
        {
            if (idColumn == int.Parse(DGVrow.Cells["IdColumn"].Value.ToString()))
            {
                for (int i = 0; i < row.ItemArray.Length; i++)
                {
                    dataGridView1[i, DGVrow.Index].Value = row.ItemArray[i].ToString();
                }
            }
        }
    } 
```

# jquery - 无法使用 jquery 按名称获取表单

> ID：12123317
> 
> 赞同：0
> 
> 时间：2012-08-25T15:37:05.533
> 
> 标签：jquery

我正在尝试将一些样式应用于表单之后的 div，但无法使其与 jquery 一起使用。我无法为表单设置 CLASS 的 ID，因为它来自 joomla 模块。

```
<form action="#" method="get" name="mod_Form"></form>
<div style="text-align: center;"><a href="#" style="font-size: 10px;">Some thing here...</a></div> 
```

这就是我尝试使用 jquery 的方式：

```
$(document).ready(function() {
    $("[name=mod_Form]").next('div').css('color', 'green');
}); 
```

该代码似乎不起作用...

我怎样才能完成我的任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T15:40:22.177

链接元素不会从其父元素继承文本颜色。您必须在它们上明确设置它：

```
$("[name=mod_Form]").next('div').find('a').css('color', 'green'); 
```

[**演示**](http://jsfiddle.net/26nU9/)

如果要设置链接的颜色和 div 的内容，可以包含`div`with [`.andSelf` *^([docs])*](http://api.jquery.com/andSelf/)：

```
$("[name=mod_Form]").next('div').find('a').andSelf().css('color', 'green'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T15:40:55.203

您的代码有效。

[http://jsfiddle.net/nHtTD/](http://jsfiddle.net/nHtTD/)

为了改变链接的颜色考虑添加`find(a)`：

```
$("[name=mod_Form]").next('div').find("a").css('color', 'green');​​ 
```

编辑：阅读您的评论后：（对我有用）

[http://jsfiddle.net/nHtTD/1/](http://jsfiddle.net/nHtTD/1/)

# python - PyMad IOError（当我打开非拉丁字符的文件时）

> ID：12123318
> 
> 赞同：1
> 
> 时间：2012-08-25T15:37:07.287
> 
> 标签：python, ioerror

我使用 PyMad/PyAudio 播放 mp3 文件。

当我打开一个包含非拉丁字符的文件时，Python 会引发以下错误：

```
IOError: Object must have a read method 
```

在线上：

```
self.mf = mad.MadFile(filename) 
```

如果文件名包含非拉丁字符，通常会发生这种情况。

# eclipse - 如何在我的 jsp 页面中显示 Eclipse 控制台？

> ID：12123319
> 
> 赞同：1
> 
> 时间：2012-08-25T15:37:18.093
> 
> 标签：eclipse, spring, jsp, struts2, action

我在操作页面中有一个方法，执行需要更多时间，所以我在控制台窗口上写了一些描述。但现在我想在 jsp 页面的文本区域显示描述。如何显示为控制台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:24:12.043

两种可能的解决方案是“execAndWait”拦截器和使用 ajax。

执行和等待将更容易实现，但会提供更少的功能......

[http://struts.apache.org/2.3.4.1/docs/execute-and-wait-interceptor.html](http://struts.apache.org/2.3.4.1/docs/execute-and-wait-interceptor.html)

Ajax 可以提供请求状态的持续反馈（尽管管理反馈完全取决于您，并且通常需要您从服务的角度进行思考，一个页面通常会使用多个服务）。

为此，您不必担心您的操作返回所需的时间，因为它是异步调用的。您甚至可以创建一个队列，显示您发送了多少请求，并在收到请求时将它们弹出。

要实现 ajax 服务，最简单的方法是从 json 开始，为此请参阅 struts2-json-plugin [http://struts.apache.org/2.2.3/docs/json-plugin.html](http://struts.apache.org/2.2.3/docs/json-plugin.html)

# css - css 3字体创建换行符

> ID：12123322
> 
> 赞同：1
> 
> 时间：2012-08-25T15:37:52.513
> 
> 标签：css, font-face, font-size

我在 css3 中使用 @font-face 在网站上放置一些字体，而不使用图像作为页面标题。

但是，我发现在使用字体时会在标题下方创建一个间隙，有点像段落或换行符。间隙大小是相对于字体大小的，并且随着大小的增加而增加。

我使用的字体类型是相对较小的 Asenine，所以我将大小设置为 60px

我不确定为什么会发生这种情况并且似乎无法找到解决方法。

这是我的 CSS

```
}
@font-face {
    font-family:'asenine';
    src: url('fonts/asenine.eot');
    src: url('fonts/asenine.eot?#iefix') format('embedded-opentype'),
    url('fonts/asenine.woff') format('woff'),
    url('fonts/asenine.ttf') format('truetype');
 }
 h1{
    font-size:60px;
    font-family:asenine, Arial, Helvetica, sans-serif;
    text-shadow:7px 3px 4px #0c0c0c;
    font-weight:100;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:21:55.880

这可能是由于行高而发生的。字号越大，行高越大。并使用CSS简写进行字体相关设置，更好：

```
h1 { 
    font: normal 60px/0 'asenine', Arial, Helvetica, sans-serif; 
    text-shadow:7px 3px 4px #0c0c0c;
} 
```

第一行表示：正常粗细、60px 字体大小、0px 行高（删除该空间）、字体系列。

# java - Java 遍历类的集合并使用它们的函数

> ID：12123325
> 
> 赞同：0
> 
> 时间：2012-08-25T15:38:20.667
> 
> 标签：java, collections, arraylist, iterator, loops

我想知道如何遍历一组类并能够在每次传递时使用类函数。

我是 java 新手，我更熟悉 c++。

这是我希望迭代的集合..

```
private ArrayList<Album> albumCollection; 
```

并激活以下功能

```
 get title 
```

这是我目前的代码...

```
//Lists all stored titles
private void ListAllTitles(){
    int size = albumCollection.size();
    for(int i=0; i < size; i++){
        System.out.println(albumCollection(i).getTitle());
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T15:39:17.403

为了从 a 访问元素`List`，您需要使用以下[`get`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#get%28int%29)方法：

```
System.out.println(albumCollection.get(i).getTitle()); 
```

另请注意，您可以使用[for each](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)循环来实现此目的：

```
for (Album album : albumCollection) {
    System.out.println(album.getTitle());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T15:40:14.600

这对于每个构造都更简单：

```
for (Album album : albumCollection)
{
     System.out.println(album.getTitle());
} 
```

# sql - 连接条件的顺序会导致不同的结果

> ID：12123330
> 
> 赞同：0
> 
> 时间：2012-08-25T15:39:12.950
> 
> 标签：sql, sql-server, join

```
select s.staff_name, s2.staff_name 'supervisor name'
from staff_relation s, staff_Relation s2
where s.staff_no = s2.supervisor 
```

和

```
select s.staff_name, s2.staff_name 'supervisor name'
from staff_relation s, staff_Relation s2
where s.supervisor = s2.staff_no 
```

它们都提供不同的结果。为什么会这样？

**更新：**不知道是否有帮助，

[表格图像链接](http://i418.photobucket.com/albums/pp270/ravenoz_bucket/qqq1.png) 此图像是我创建的一个小表格。

上面是我创建的小桌子的图像。

当我执行第一个命令时，显示 Anita 是 Ruth 的主管。这是错误的。但是当我执行第二个命令时，它显示正确，Ruth 是 Anita 的主管。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T15:41:38.197

您不仅更改了连接条件的顺序，还更改了您选择的表的列。结果不同，因为查询不同。

如果您`s`以与`s2`在 中`SELECT`翻转它的方式相同的方式翻转`WHERE`，您将得到相同的结果。

这是您的两个查询，但表别名已更改：

```
select EMPLOYEE.staff_name, SUPERVISOR.staff_name 'supervisor name'
from staff_relation EMPLOYEE, staff_Relation SUPERVISOR
where EMPLOYEE.staff_no = SUPERVISOR.supervisor 
```

和

```
select EMPLOYEE.staff_name, SUPERVISOR.staff_name 'supervisor name'
from staff_relation EMPLOYEE, staff_Relation SUPERVISOR
where EMPLOYEE.supervisor = SUPERVISOR.staff_no 
```

看看为什么 #2 会给你正确的结果，而 #1 现在却没有？

# struts2 - 我可以在 struts2 形式中使用 html 标签吗？

> ID：12123334
> 
> 赞同：2
> 
> 时间：2012-08-25T15:39:35.397
> 
> 标签：struts2

我可以在 struts 2 表单中使用 html 表单标签吗？就像 `<input type='text' value='' /> <input type='submit' />` 这些值会通过struts2发布吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T15:52:25.837

使用 struts2 标签完全不是强制性的。您可以使用常规 HTML。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T15:53:24.543

当然。

这是您可以*尝试*的问题之一。

所有 S2 表单标签*所做*的就是发出 HTML，根据需要填写各种属性。（比这稍微复杂一些，但最终，他们会输出一个 HTML 表单字段。）

翻转你的问题：为什么*不*通过正常的浏览器 HTTP 提交过程发送手工制作的输入标签？什么机制可以*阻止*它工作？这种表单提交的请求正文与输入标签是 S2 自定义标签的请求正文*有何不同？*

这些问题都是微不足道的探索。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-25T15:50:06.687

是的。
你必须给他们一个`name`; 该名称将用于在 struts 操作中设置属性（具有正确的类型转换）。
如果您调用输入`somename`，`setSomename()`则将在发布时调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-22T13:06:46.087

**如果使用简单的 HTML，您将无法在其中调用 struts 标签，例如：**

```
<s:submit cssStyle="submit_button" id='newrc%{#stat.index}.%{#questionIndex.index}' name="newrc%{#stat.index}.%{#questionIndex.index}" onclick="return newrcClick(this)" value="+" /> 
```

这可行，但下面的代码不提供值堆栈中的 id 和 name 值，因此 :name="newrc%{#stat.index}.%{#questionIndex.index}"

```
<input type="button" cssStyle="submit_button" id='newrc%{#stat.index}.%{#questionIndex.index}' name="newrc%{#stat.index}.%{#questionIndex.index}" onclick="return newrcClick(this)" value="+" /> 
```

# html - IE 取消 CSS 类

> ID：12123335
> 
> 赞同：1
> 
> 时间：2012-08-25T15:39:41.640
> 
> 标签：html, css, internet-explorer

[我的网站在](http://www.inside-guides.co.uk/brentwood/pages/index.html)右侧导航中有一个 Twitter 列，但我已经使用“.twtr-tweet”更改了类，用于语音气泡的白色背景，这在其他浏览器中运行良好，即 Chrome，但不是 IE（测试在 IE9 中）。

如果有人可以使用检查器查看并检查 CSS 以帮助诊断它会非常棒，因为它是实时的并且看起来非常糟糕：

```
/* Twitter */
#twtr-widget-1 .twtr-new-results, #twtr-widget-1 .twtr-results-inner, #twtr-widget-1 .twtr-timeline {background:transparent !important;}

.twtr-tweet {
    background-color: #Ffffff !important;
    border-radius: 5px;
    box-shadow: 0 0 6px #777777;
    display: inline-block;
    padding: 10px 18px;
    position: relative;
    vertical-align: top;float: left; !important;
    width:60%;}

.twtr-tweet::before {
    background-color: #Ffffff;
    content: "\00a0";
    display: block;
    height: 16px;
    position: absolute;
    top: 11px;
    transform:             rotate( 29deg ) skew( -35deg );
        -moz-transform:    rotate( 29deg ) skew( -35deg );
        -ms-transform:     rotate( 29deg ) skew( -35deg );
        -o-transform:      rotate( 29deg ) skew( -35deg );
        -webkit-transform: rotate( 29deg ) skew( -35deg );
    width:  20px;
} 
```

.twtr-tweet 没有在 IE 中正确注册..

非常感谢，希望有人能帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T15:48:42.780

那是因为你有

```
#twtr-widget-1 .twtr-tweet{
    background:none transparent scroll repeat 0% 0%;
} 
```

在 index.html 中。

似乎在 IE 上它会覆盖

```
.twtr-tweet {
    background-color: #FFFFFF !important;
} 
```

在 Structure.css 中（第 129 行）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T16:05:35.993

我只扫描了你的代码（它太多了）......但这可能会对你有所帮助：

```
<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie"><![endif]-->
<!--[if IE 7 ]><html class="ie7 ie"><![endif]--> 
<!--[if IE 8 ]><html class="ie8 ie"><![endif]--> 
<!--[if (IE 9)|(gt IE 9)|!(IE)]><!--><html><!--<![endif]--> 
```

将其放在您的脑海中，您将拥有可以轻松定位 IE 的父类。如果您发现您的一种样式在 IE 中被覆盖，只需执行以下操作：

`.ie7 .your-overwritten-selector {property: 1 !important}`

它可能无法解决问题的根源（大多数跨浏览器问题*都可以*在没有任何条件代码的情况下处理......）但在某些情况下这是必要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T19:05:56.643

您是否尝试过这样做：

```
#twtr-widget-1 .twtr-tweet {
    background-color: #FFFFFF !important;
} 
```

# wcf - WCF 和客户端代码

> ID：12123338
> 
> 赞同：0
> 
> 时间：2012-08-25T15:39:56.480
> 
> 标签：wcf, client

我是 WCF 的初学者。我有两个简单的服务：添加客户的名字和姓氏，并返回客户的数量。当我在每次客户添加时向客户测试服务时，数量不增加始终是一个。这里代码：

```
class ClientService : IClientService
{
   List<Client> list = new List<Client>();

   public bool SubmitClient(Client client)
   {
      list.Add(client);
   }

   public int IClientService.GetClient()
   {
      return list.Count;
   }
} 
```

客户端代码：

```
protected void Button1_Click(object sender, EventArgs e)
{
   ClientServiceClient channel = new ClientServiceClient();
   Client cl = new Client();
   cl.FirstName = txtFName.Text;
   cl.LastName = txtLName.Text;

   channel.SubmitClient(cl);
   labbel1.Text=string.Format("Number of clients: {0}"),channel.GetClient());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:05:03.740

您需要在 ServiceBehavior 属性中提供[InstanceContextMode值。](http://msdn.microsoft.com/en-us/library/system.servicemodel.instancecontextmode.aspx)问题是您的列表是一个类级别的变量，您需要将 WCF 服务配置为单实例模式。

*   **PerSession(default)**：为每个会话创建一个新的 InstanceContext 对象。
*   **PerCall**：在每次调用之前创建一个新的 InstanceContext 对象，并在每次调用之后回收该对象。
*   **Single**：只有一个 InstanceContext 对象用于所有传入调用，并且不会在调用后回收。

这是关于控制 WCF 实例/会话主题的一个很好的链接：

[http://www.codeproject.com/Articles/86007/3-ways-to-do-WCF-instance-management-Per-call-Per](http://www.codeproject.com/Articles/86007/3-ways-to-do-WCF-instance-management-Per-call-Per)

# java - 在不知道日期的情况下设置时间

> ID：12123342
> 
> 赞同：2
> 
> 时间：2012-08-25T15:40:16.817
> 
> 标签：java, mysql, datetime

我希望能够将时间值存储在 mysql 数据库中，而实际上并不知道它们关联的特定日期。我正在使用 java.sql.time 来存储数据。

```
long timeInMillis = 43200000; //This is 12 hours in milliseconds.    
Time time = new Time(timeInMillis); 
```

无论出于何种原因，这给了我一个 07:00:00 的时间，它应该是 12:00:00。我假设这是因为在设置时间变量时，它基于特定日期过去的时间量。**如何在不实际使用预定义日期的情况下设置时间变量？**

我这样做的原因是因为我想在数据库中存储工作日和时间范围。因此，12 到 1 之间的星期日将是 12:00:00 到 13:00:00 之间的 0。我希望能够将实际日期值与数据库进行比较，并查看日期是否介于基于日期的时间段之间，无论月份或年份如何。在数据库中存储每个可能的工作日和时间的完整日期将导致数千个不必要的条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:44:19.500

> 无论出于何种原因，这给了我一个 07:00:00 的时间，它应该是 12:00:00。我假设这是因为在设置时间变量时，它基于特定日期过去的时间量

可能由于`TimeZone`差异而发生。在保存和检索值时检查时区信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T20:58:12.517

这可能是一个时区问题，但我通过将时间值作为字符串传递到数据库中解决了这个问题。无论如何，除非时区属性很重要，否则最好在这种情况下使用物理字符串。

```
String startTime = "12:00:00";
String endTime = 01:00:00; 
```

如果时区很重要，除非您正在准备日期对象，否则我假设使用的最佳方法是直接在当​​前会话的 mysql 语句中设置时区。更多细节可以在这里找到：[如何设置 MySQL 的时区？](https://stackoverflow.com/questions/930900/how-to-set-timezone-of-mysql)

编辑：最后证明这实际上不是时区问题（尽管在其他情况下可能是，所以不要抹黑调整时区）。我错误地计算了以毫秒为单位的时间。

# asp.net - 文化 - ASP.NET MVC 3 应用程序

> ID：12123345
> 
> 赞同：3
> 
> 时间：2012-08-25T15:40:44.880
> 
> 标签：asp.net, asp.net-mvc-3, localization, globalization

我需要开发一个包含一长串需求的网站。

其中之一是允许站点管理员向站点添加新语言（我会说这很容易，资源和瞧），但是使用那种语言我需要“文化化”站点，这就是改变货币，改变日期格式，更改小数点分隔符（阿根廷的逗号，美国的点）等等。

所以，我的问题是：有没有简单的方法来完成这项工作？你能推荐我做什么？如果解决方案使用资源文件，并且您有任何示例，那就太好了。

我试图避免使用 jQuery，因为执行所需操作的工具更像是插件而不是“脚本”，而且我认为也不是很值得信赖或可靠。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T05:26:35.663

查看[ASP.NET MVC3 的 ASP.NET 基础结构，全球化视频](http://pluralsight.com/training/players/PSODPlayer?author=scott-allen&name=mvc3-building-infrastructure&mode=live&clip=0&course=aspdotnet-mvc3-intro)。这是一个很棒的视频，涵盖了您需要的一切基础知识。

[Thread.CurrentCulture](http://msdn.microsoft.com/en-us/library/system.threading.thread.currentculture.aspx)获取或设置当前文化。

[Thread.CurrentUICulture](http://msdn.microsoft.com/en-us/library/system.threading.thread.currentuiculture)处理每种语言的资源。

中也有一`<globalization>`节`Web.Config`。

希望这会让你走上仪式的轨道。

# javascript - 非 Firefox 浏览器中的 IndexedDB getAll

> ID：12123346
> 
> 赞同：5
> 
> 时间：2012-08-25T15:40:47.410
> 
> 标签：javascript, indexeddb

我知道这[`IDBObjectStore.getAll`不是 IndexedDB 标准的一部分，](https://developer.mozilla.org/en-US/docs/IndexedDB/Using_IndexedDB#Using_a_cursor)而且[它可能永远不会是](https://developer.mozilla.org/en-US/docs/IndexedDB/Using_IndexedDB#Using_a_cursor). 但它是在 FireFox 中实现的，如果您必须从数据库中检索大量对象，它会使您的代码更漂亮。

是否有可能制作某种 polyfill 或允许`getAll`在其他支持 IndexedDB 的浏览器中工作的东西？的实际功能`getAll`很简单，但我不知道如何处理 IndexedDB 在非 Firefox 浏览器中复制其精确语法的异步特性。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-26T14:48:05.177

I made [a GitHub repo for a shim to support getAll in other browsers](https://github.com/jdscheff/IndexedDB-getAll-shim), which seems to work well enough in Chrome. The code is repeated below for posterity:

```
(function () {
    "use strict";

    var Event, getAll, IDBIndex, IDBObjectStore, IDBRequest;

    IDBObjectStore = window.IDBObjectStore || window.webkitIDBObjectStore || window.mozIDBObjectStore || window.msIDBObjectStore;
    IDBIndex = window.IDBIndex || window.webkitIDBIndex || window.mozIDBIndex || window.msIDBIndex;

    if (typeof IDBObjectStore.prototype.getAll !== "undefined" && typeof IDBIndex.prototype.getAll !== "undefined") {
        return;
    }

    // https://github.com/axemclion/IndexedDBShim/blob/gh-pages/src/IDBRequest.js
    IDBRequest = function () {
        this.onsuccess = null;
        this.readyState = "pending";
    };
    // https://github.com/axemclion/IndexedDBShim/blob/gh-pages/src/Event.js
    Event = function (type, debug) {
        return {
            "type": type,
            debug: debug,
            bubbles: false,
            cancelable: false,
            eventPhase: 0,
            timeStamp: new Date()
        };
    };

    getAll = function (key) {
        var request, result;

        key = typeof key !== "undefined" ? key : null;

        request = new IDBRequest();
        result = [];

        // this is either an IDBObjectStore or an IDBIndex, depending on the context.
        this.openCursor(key).onsuccess = function (event) {
            var cursor, e, target;

            cursor = event.target.result;
            if (cursor) {
                result.push(cursor.value);
                cursor.continue();
            } else {
                if (typeof request.onsuccess === "function") {
                    e = new Event("success");
                    e.target = {
                        readyState: "done",
                        result: result
                    };
                    request.onsuccess(e);
                }
            }
        };

        return request;
    };

    if (typeof IDBObjectStore.prototype.getAll === "undefined") {
        IDBObjectStore.prototype.getAll = getAll;
    }
    if (typeof IDBIndex.prototype.getAll === "undefined") {
        IDBIndex.prototype.getAll = getAll;
    }
}()); 
```

# android - 在整个 android 应用程序中保留标签

> ID：12123352
> 
> 赞同：1
> 
> 时间：2012-08-25T15:41:32.357
> 
> 标签：android, tabs

在我的应用程序中，我有 4 个选项卡，其中一个选项卡中有一个列表（tab3）。When 1 of the list options are selected it goes to another activity but then the tabs I have go away. 即使我切换到另一个活动，有没有办法让它们永久存在？

我有将选项卡放在每个 XML 和 Java 类中的想法，但这似乎是多余的，我认为它会显示选项卡在我不想要的不同活动中移动，我希望它们在整个应用程序中保持静止。

代码：

```
public class MainActivity extends Activity {

TabHost th;
TabSpec specs;
ListView libraryView;
String libraryList[] = {"Item1", "Item2"};

@Override
public void onCreate(Bundle savedInstanceState) {
    //Always do this at the start.
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.list_white_text, R.id.library_list_content, libraryList);
    libraryView = (ListView) findViewById(R.id.listView1);
    libraryView.setAdapter(adapter);

    libraryView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

            String librarySelected = libraryList[position];
            Class libraryClass;
            try {           
                libraryClass = Class.forName("com.jj.test.library." + librarySelected);
                Intent libraryIntent = new Intent(MainActivity.this, libraryClass);
                startActivity(libraryIntent);
            } catch (ClassNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
    });

    //Creating the TabHost and gathering its ID for usage.
    th = (TabHost) findViewById(R.id.tabhost);        
    th.setup();

    specs = th.newTabSpec("tag1");
    specs.setContent(R.id.tab1);
    specs.setIndicator("tab1");
    th.addTab(specs);

    specs = th.newTabSpec("tag2");
    specs.setContent(R.id.tab2);
    specs.setIndicator("tab2");
    th.addTab(specs);

    specs = th.newTabSpec("tag3");
    specs.setContent(R.id.tab3);
    specs.setIndicator("tab3");
    th.addTab(specs); 

    specs = th.newTabSpec("tag4");
    specs.setContent(R.id.tab4);
    specs.setIndicator("tab4");
    th.addTab(specs);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

XML:

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<TabHost
    android:id="@+id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:background="@android:color/black" >

            <LinearLayout
                android:id="@+id/tab1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" >

            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab2"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" >
            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab3"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" >

                <ListView
                    android:id="@+id/listView1"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="1" >
                </ListView>

            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab4"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" >
            </LinearLayout>

        </FrameLayout>

        <TabWidget android:id="@android:id/tabs" 
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:layout_weight="0"
            android:layout_marginBottom="-4dp" >
        </TabWidget>
    </LinearLayout>
</TabHost>

</RelativeLayout> 
```

当他们单击 Item1 或 Item2 （位于 tab3 的列表中并将它们带到不同的 Activity 时）它不会带上标签。我需要对 MainActivity XML 或 Class 做些什么来使其在整个应用程序中持久化吗？

# c++ - C++ 将 pow 函数的双精度结果转换为整数

> ID：12123355
> 
> 赞同：0
> 
> 时间：2012-08-25T15:41:44.210
> 
> 标签：c++, casting

我一直在尝试使用此代码：

```
if (iteration % pow(256.0, 7) == 0) { 
```

在我的一个程序中，但错误控制台显示：

> 错误 C2297：“%”：非法，右操作数的类型为“double”

我怎样才能绕过这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T15:46:38.473

正如您在标题中所述，答案是将结果转换为整数：

```
if (iteration % static_cast<int>(pow(256.0, 7)) == 0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T15:52:58.903

由于`pow(256.0, 7)`可以表示为整数，因此您可能应该将其定义为适当的 const，例如

```
const int64_t pow_256_7 = 1LL << (8 * 7);  // 256^7 
```

然后像这样进行测试：

```
if ((iteration % pow_256_7) == 0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T15:44:15.647

```
iteration % pow(256.0, 7) 
```

这里`pow`返回`double`。但`%` *不能*应用于`double`（或`float`）类型。

`%`只能应用于整数类型，例如`int`, `short`,`char`等。

> 我怎样才能绕过这个错误？

你想达到什么目的？也许你可以这样做：

```
iteration % static_cast<__int64>(pow(256.0, 7)) 
```

或者简单地说：

```
const __int64 value = 256ULL * 256 *256 *256 *256 *256 *256;

if ( iteration % value  == 0 ) 
```

# javascript - 如何使用 jQuery 实时检查元素是否为空

> ID：12123357
> 
> 赞同：1
> 
> 时间：2012-08-25T15:41:48.503
> 
> 标签：javascript, jquery, append

我有一些块，我附加一些 html（跨度）取决于指定函数。如果完成此功能，我将此跨度附加到 div。但是如果这个函数没有执行，我需要附加一些其他的东西。所以，我的问题是如何在这个 div 中检查这个 span 是否存在？这是我的代码：

```
if (...){
    $('.info_check').append('<span></span>');
} 
```

...

```
 $('.info_check').on('DOMSubtreeModified',function(){
        if($(this).html() == "") {
            $('#instructions_panel').append('<span>...</span>');
        }
    }); 
```

我试过了`:empty`，它也不起作用......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T15:47:17.800

```
if ($(this).is(':empty')) {...} 
```

或者：

```
if (!$(this).has('span')) {...} 
```

要不就：

```
if (!$(this).children().length) {...} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T15:45:06.247

尝试`if($(this).children('span').length==0)`

# mysql - 根据从另一张表插入的值将值插入到一张表中

> ID：12123358
> 
> 赞同：1
> 
> 时间：2012-08-25T15:41:53.070
> 
> 标签：mysql

我为存储用户名和其他数据的用户准备了这张表，就像这样（精简）：

```
 CREATE TABLE `prod_users` (
        `p_user_id` INT(11) NOT NULL AUTO_INCREMENT,
        `p_user_name` VARCHAR(200) NOT NULL DEFAULT ''
            `p_comp_name` VARCHAR(300) NOT NULL DEFAULT '',
        PRIMARY KEY (`p_user_id`)
    )
    COLLATE='utf8_general_ci'
    ENGINE=MyISAM 
```

每次用户注册时，他都会提供公司名称。

还有另一个名为 prod_profiles 的表，其中存储了电话号码等个人资料详细信息。传真号码 等等

```
CREATE TABLE `prod_profiles` (
        `pf_gen_id` INT(11) NOT NULL AUTO_INCREMENT,
            `pf_user_id` INT(11) NOT NULL DEFAULT '0',
        `pf_user_name` VARCHAR(200) NOT NULL DEFAULT ''
            `pf_comp_name` VARCHAR(300) NOT NULL DEFAULT '',
        PRIMARY KEY (`pf_gen_id`)
    )
    COLLATE='utf8_general_ci'
    ENGINE=MyISAM 
```

当新用户注册并将其详细信息添加到 prod_users 时，是否可以使用 MySql 本身将他的新 user_id、user_name 和 comp_name 详细信息自动添加到 prod_profile？由于每个用户都会有一个新的 p_user_id 而我们不知道它，所以使用 php 会很困难。这可以在MySql本身内部实现而没有任何问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T15:46:07.507

您可以使用下一个 mysql 函数：`LAST_INSERT_ID();`它返回最后一个自动增加的 id。

因此，添加一个用户，然后添加一个`prod_profile`，而`pf_user_id`value 将是 的返回值`last_insert_id()`。

```
INSERT INTO `prod_users`(`p_user_name`,`p_comp_name`) VALUES('Dan' , 'Stackover')
INSERT INTO `prod_profiles`(`pf_user_id`,`pf_user_name`,`pf_comp_name`) VALUES(LAST_INSERT_ID(),'Dan','Stackover') 
```

**请注意：**我不得不说，将同一用户的用户名和公司名两次存储在两个不同的表中是一种真正的浪费......

考虑重新考虑您的数据库结构和逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T15:46:55.520

使用 PHP 并不困难，因为您[`LAST_INSERT_ID()`](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)可以使用，无论是通过`mysql_insert_id()`或`mysqli::$insert_id`，`PDO::lastInsertId()`还是您的 API 提供的任何东西。只要您`INSERT`在同一个脚本上立即连续调用这两个语句（它取决于连接），MySQL 就会提供正确的`p_user_id`.

但是，您可以使用`AFTER INSERT`触发器强制 MySQL 自动创建新行：

```
CREATE TRIGGER build_profile AFTER INSERT ON prod_users
FOR EACH ROW
BEGIN
  INSERT INTO prod_profiles 
    (pf_user_id, pf_user_name, pf_comp_name) 
    VALUES (NEW.p_user_id, NEW.p_user_name, NEW.p_comp_name)
END 
```

查看[MySQL `CREATE TRIGGER`语法参考](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)以获取完整的详细信息和选项。

# debugging - Scala IDE 调试器“步入”行为

> ID：12123360
> 
> 赞同：3
> 
> 时间：2012-08-25T15:42:13.710
> 
> 标签：debugging, scala

**当前行为：**

*   在行上放一个断点`case Twice(n) ...`。
*   在“步入”时，控制进入`x match {`线
*   在“步入”时，控制进入`def TwiceTest = {`线
*   在进一步“步入”时，控制进入`if (z % 2 == 0)...`线路。

**预期行为：**

*   在行上放一个断点`case Twice(n) ...`。
*   在“步入”时，控制进入`if (z % 2 == 0)...`线路。

**代码片段**

```
object testobj extends App {
  def TwiceTest = {
    val x = Twice(21)
    x match {
      case Twice(n) => Console.println(n)
    } // prints 21
  }

  TwiceTest

}

object Twice {
  def apply(x: Int): Int = x * 2
  def unapply(z: Int): Option[Int] = {
    if (z % 2 == 0) Some(z / 2) else None
  }
} 
```

在调试具有大量嵌套提取器的 scala 程序时，当前的行为令人恼火。我用新的 Scala 调试器和 Java 调试器尝试了这个，但结果相同。

`Step Filtering`在这种情况下也无济于事。

作为一种解决方法，我在`unapply`方法中放置一个断点并`resume`从第一个断点运行。有人可以建议我一个更清洁的方法。

**编辑 1** 我正在使用 Scala-IDE（最新的夜间版本。2.1.0.nightly-2_09-201208250315-529cd70）

Eclipse 版本：Indigo Service Release 2 构建 ID：20120216-1857

操作系统：Windows 7（64 位）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:57:28.503

字节码中的行号信息错误。这不是 IDE 的问题，而是 Scala 编译器的问题。编译模式匹配时，合成代码有时会得到错误的位置信息。

我假设您使用的是 Scala 2.9.2。在 Scala 的下一个版本（2.10.0）中，模式匹配器有了显着的改进，所以不妨试一试。

# matlab - 手动绘制带有标记和字符串的图例

> ID：12123366
> 
> 赞同：3
> 
> 时间：2012-08-25T15:43:07.073
> 
> 标签：matlab, marker, legend

我需要用一组标记和相关字符串单独绘制一个图例，而不用绘图。有人看过这个代码吗？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T16:19:31.463

我之前也尝试过这样做，但没有成功。我最终做的是从图例中删除一些情节元素。例如：

```
h = plot(x,y); 
hasbehavior(h,'legend', false); 
```

这是另一个[例子](http://tipstrickshowtos.blogspot.com/2012/08/removingexcluding-some-plot-elements.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-02T23:05:53.110

这是我最终想出的代码：它对于几乎任何应用程序都足够灵活：

```
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%     Legend Generator       %%%%%%%%%%%%%%%%%%%%%
%% NAME     : LEGEND_GENERATOR.m
%% FUNCTION : Generates a single plot for arbitrary legend 
%% INPUTS   : set of markers and related texts as cell and figure number
%% OUTPUTS  : No output
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%                      %%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%     AUG 28, 2012      %%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

function LEGEND_GENERATOR(Marker,text,Fignum,FONTSIZE,MARKERSIZE,LWD)

% clc;clear;close all;fclose all
% Marker = {'r -*' , 'b -o' , 'g --d'};
% text = {'First Fun ' , 'Second Fun ' , 'Third Fun ' };
% FONTSIZE = 6;
% Fignum = 26;

if length(Marker)~=length(text)
    error('You should have the same number of markers as texts');
end

%% FIGURE
set(0,'defaultaxesfontsize',FONTSIZE);
figure(Fignum);clf;hold on;set(gcf,'OuterPosition',[60  90 200  250],'PaperPositionMode','auto');

Leg_TEXTS = [];
for i = 1:length(Marker)
x = 0:0.1:2*pi;
y = 3*randn(1)*sin(x);
p = plot(x,y,Marker{i},'MarkerSize',MARKERSIZE,'LineWidth',LWD);
Leg_TEXTS = [ Leg_TEXTS ; {text{i}} ];
end

legend(Leg_TEXTS);
figure(Fignum);
set([gca;get(gca, 'children')], 'visible', 'off');

end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T18:12:53.023

您始终可以隐藏轴及其所有子项：

```
figure(1), clf, hold on

x = 0:0.1:2*pi;
y = sin(x);

p = plot(x,y);
legend('Sin(x)');

set([gca get(gca, 'children')], 'visible', 'off'); 
```

# jquery - 突出显示多行顺序（使用 jquery）

> ID：12123371
> 
> 赞同：0
> 
> 时间：2012-08-25T15:43:46.687
> 
> 标签：jquery

我使用此代码在特定时间突出显示我的跨度标签

HTML：

```
<span id="test">The word "fractal" often has different 
connotations for laypeople than mathematicians, where the
layperson is more likely to be familiar with fractal art
than a mathematical conception. The mathematical concept 
is difficult to formally define even for mathematicians,
but key features can be understood with little mathematical background.</span> 
```

JavaScript：

```
$(document).ready(function(){

  var seconds = 7;
  var el = $('span#test');
  var width = el.outerWidth();
  var height = el.outerHeight();
  var wrapper = $('<div>').css({
    width: width + 'px',
    height: height + 'px',
    position: 'relative'
  });
  var background = $('<div>').css({
    width: 0,
    height: height + 'px',
    position: 'absolute',
    background: '#0f0'
  });
  wrapper.append(background);
  wrapper.append(el.css('position','absolute'));
  $('body').append(wrapper);
  background.animate({width: '+=' + width},1000*seconds);

});​​ 
```

**演示：http:** [//jsfiddle.net/9UgEF/8/](http://jsfiddle.net/9UgEF/8/)

一切都很好，但我想突出显示`span tag`顺序（它突出显示所有行，我想突出显示连续的行（当第一行突出显示完成后转到下一行......））。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T16:01:54.340

```
$(function(){
    var time = 30,
        text =  $("#test").text(),
        words = text.split(''),
        html = [];
    $.each(words, function(i,e) {
        html.push('<span>'+ e +'</span>');
    });
    $("#test").html(html.join(''));
    $("span", "#test").each(function(i,e) {
        $(e).delay(i*((30*1000)/$("span", "#test").length)).animate({'background-color': '#0f0'}, 500);
    });
});​ 
```

[**小提琴**](http://jsfiddle.net/9UgEF/34/)

# z3 - 支持定点的SMT工具

> ID：12123373
> 
> 赞同：1
> 
> 时间：2012-08-25T15:43:53.020
> 
> 标签：z3, smt

你知道除了Z3之外还有什么smt工具支持fixpoint吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T00:27:52.940

通过定点，我认为您的意思是解决 Horn 子句查询。有许多工具可以解决类似性质的问题，但格式可能不完全相同。 [Philippe Suter 的 Leon 工具](http://lara.epfl.ch/~psuter/)使用不同的算法，可以解决递归程序上的许多正确性查询。Andrey Rybalchenko 的 ARMC 工具也可以使用线性实数算术求解 Horn 公式。它还可以建立终止条件。带有表格的 CLP 系统也应该能够以类似于 Z3 的格式解决查询（两者都使用 Horn 公式作为其输入格式）。还有许多符号模型检查求解器可以根据您的上下文使用。

# c++ - 返回向量 在 C++ 中

> ID：12123383
> 
> 赞同：0
> 
> 时间：2012-08-25T15:45:16.943
> 
> 标签：c++

我得到：`C:\Documents and Settings\ppp\Pulpit\Zadanie3Infix\main.cpp|72|error: conversion from 'std::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >*' to non-scalar type 'std::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >' requested|`

我不知道为什么。该函数假设返回字符串向量并且确实如此，我使用了所有这些 * & 并且它不起作用。请纠正我，以便它返回这个向量。

它的工作原理就像 s = "(2+23)" 它将返回它将返回带有标记的向量。

```
 vector<string> split(string s){
    vector<string>* v = new vector<string>();
    int i = 0; bool b;string el = "";
    while(i < s.size()){

        if(isNotNumber(s.at(i))){
            el = s.at(i);
            v->push_back(el);
            cout<<el<<" to operator"<<endl;
            el = "";
            i++;
        }else{
            while( i <s.size() && !isNotNumber(s.at(i))){//LENIWE WYLICZANIE !!!
                el = el + s.at(i);
                cout<<s.at(i)<<" to liczba"<<endl;
                i++;
            }
            v->push_back(el);
            el = "";
        }
    }
    cout<<"PO while"<<endl;
    for(int i = 0; i < v->size();i++){
        cout<<v->at(i)<<endl;
    }

    return v;
} 
```

那怎么样

```
stack<string>* stack = new stack<string>(); 
```

堆栈前的类型说明符；//////////////

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T15:48:47.863

您的函数`split()`声称要返回`vector<string>`，但是您的返回值是`v`. 是什么`v`？它是

```
vector<string>* v 
```

您正试图返回一个*指针*，但您的函数声明表明它没有返回一个指针。实际上，函数中根本不需要指针。只需使用常规`vector<string>`或通过*引用*传入向量：

```
void split(string s, vector<string>& v){ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T15:49:05.963

您的函数签名返回一个向量，但您的返回值是一个指针。将返回值类型更改为指向向量的指针或在函数体中按值返回向量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-25T16:47:21.163

关于是返回指针还是值，还是传递对现有向量的引用的问题很久以前就解决了：不要执行上述任何操作。相反，创建一个适用于迭代器的通用算法：

```
template <class InIt, class OutIt>
void tokenize(InIt b, InIt e, OutIt o) {
    while (b != e) {
        std::string token;
        while (isdigit(*b))
            token.push_back(*b++);
        if (!token.empty())
           *o++ = token;
        while (!isdigit(*b) && b != e)
            *o++ = std::string(1, *b++);
    }
} 
```

要将结果放入字符串向量中，您可以执行以下操作：

```
std::string i("(2+23)");
std::vector<std::string> tokens;

tokenize(i.begin(), i.end(), std::back_inserter(tokens)); 
```

或者，如果您想显示标记，则每行一个用于测试：

```
tokenize(i.begin(), i.end(), std::ostream_iterator<std::string>(std::cout, "\n")); 
```

...这将产生：

```
(
2
+
23
) 
```

这符合我认为的输入字符串中的标记。但是，我应该补充一点，虽然它适用于该输入，但它可能会或可能不会产生您对其他输入的期望。特别是，它将空白字符视为您通常*不*想要的标记（但似乎确实是原件的工作方式）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-26T08:16:05.833

这真的是Blastfurnace的答案，......

但转换行：

```
vector<string>* v = new vector<string>(); 
```

进入

```
vector<string> v; 
```

并将所有更改`v->`为`v.`

这样你也可以修复内存泄漏。（分配的内存`new vector<string>()`永远不会被删除）。但是，`vector<string> v;`将内存放在堆栈上，并在超出范围时自动删除。

# java - 使用 Java 中的内核绕过网络

> ID：12123388
> 
> 赞同：6
> 
> 时间：2012-08-25T15:45:52.020
> 
> 标签：java, sockets, networking, tcp, real-time

有没有人知道如何在 Java 中绕过内核？任何你好世界，或者这是火箭科学？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T16:21:21.660

如果你使用 solarflare，你可以使用他们的 API 来做内核绕过（我没有直接使用它，所以不能提供更多细节）。您还可以使用像 29West LBM 或 IBM LLM 这样的消息传递产品，它们支持各种硬件上的丰富功能。

正如@eSniff 提到的，JRE 有`transferFrom()`/ `transferTo()`API，它现在用于为`sendfile(2)`支持它的系统公开等效项。定义了 API 的语义，因此可以透明地实现它以支持任意 2 个通道之间的 DMA 传输。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T16:13:33.050

搜索“Java 零拷贝缓冲区”或“Java NIO”或“Java Netty”。

[这是关于Netty](https://netty.io/)和零拷贝的幻灯片： [http](http://www.slideshare.net/danbim/zerocopy-eventdriven-servers-with-netty) ://www.slideshare.net/danbim/zerocopy-eventdriven-servers-with-netty 。这是一个使用 Netty 的示例项目。

或者您可以降低级别并使用[java.nio.channels](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/package-summary.html)类，您可以在此处阅读[http://www.ibm.com/developerworks/linux/library/j-zerocopy/](http://www.ibm.com/developerworks/linux/library/j-zerocopy/)

# x86 - 通过在 OS/bootloader 中传递 bios

> ID：12123390
> 
> 赞同：2
> 
> 时间：2012-08-25T15:46:00.480
> 
> 标签：x86, bootloader, bios

我并没有真正编写任何操作系统或引导加载程序，但我正在阅读有关 Oses 的内容，并且我对引导加载程序在没有 bios 系统调用的情况下工作的能力很感兴趣，如果我正确理解没有 UEFI 的系统中的大磁盘启动，更重要的是你可以访问所有磁盘并从所有分区启动或支持 GPT。

所以任何人都可以说我如何绕过int 13h并直接访问磁盘控制器（使用LBA并自己解决正确的分区）谁能告诉我谁将B8000地址映射到视频卡并且在保护模式下仍然有效? 保护模式还存在吗？这些天谁他妈的需要向后兼容？我如何绕过 int 16h （如果我真的想不知道，但如果你知道的话，WTH :-) 为什么不...）并直接使用键盘控制器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T16:20:30.680

1) BIOS 现在支持 LBA 访问（AH=42h AH=43h Extended_Read_Sectors_From_Drive，Extended Write Sectors to Drive）。您可以像所有现代操作系统一样直接绕过 BIOS，直接对 IDE 控制器进行编程。您可以参考 Boch BIOS 源代码以获取示例[http://bochs.sourceforge.net/cgi-bin/lxr/source/bios/rombios.c](http://bochs.sourceforge.net/cgi-bin/lxr/source/bios/rombios.c)。它应该比 Linux 内核更简单、更不抽象。例如，写入扇区的代码在 6512 行左右。您对`outb`调用感兴趣。

2) B8000 可能是通过 VGA bios 中的模式设置代码映射的，但这是您不必关心的实现细节。它在保护模式下工作，因为它不是由处理器（使用虚拟内存）映射，而是由 IO 子系统映射。保护模式当然仍然存在。

3) 谁需要向后兼容？如果没用的话，早就被英特尔砍掉了，以节省芯片上的空间。

# android - 在 Fragment 中查找 ListView？

> ID：12123399
> 
> 赞同：0
> 
> 时间：2012-08-25T15:47:00.097
> 
> 标签：android, android-widget

好吧，我试图在片段中找到一个 ListView，以便能够通过创建它的 Main Activity 添加和删除项目。这是我的尝试（我基于 com.viewpagerindicator.sample），但是当我最终尝试访问 mainListView 时，它崩溃了。

```
public final class ContactListFragment extends Fragment {
    private ListView MyListView;

    public ListView GetListView()
    {
        return MyListView;
    }

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        LinearLayout theLayout = (LinearLayout) inflater.inflate(R.layout.tab_frag, container, false);
        MyListView = (ListView)theLayout.findViewById(R.id.listViewx);
        MyListView.setAdapter(adapter);     
        return theLayout;
    }
} 
```

这里是布局

```
 <ListView
        android:id="@+id/listViewx"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1" >
    </ListView>

</LinearLayout> 
```

这就是我想要访问 listview 以便能够修改公共类 ContactListActivity 的 Main Activity 的代码 extends BaseSampleActivity {

```
@Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.simple_tabs);

    List<Fragment> fragments = new Vector<Fragment>();

    fragments.add(Fragment.instantiate(this, ContactListFragment.class.getName()));
    fragments.add(Fragment.instantiate(this, ContactListFragment.class.getName()));
    fragments.add(Fragment.instantiate(this, ContactListFragment.class.getName()));

    PagerAdapter mAdapter = new PagerAdapter(getSupportFragmentManager(), fragments);

    ViewPager mPager = (ViewPager) findViewById(R.id.pager);
    mPager.setAdapter(mAdapter);

    TabPageIndicator mIndicator = (TabPageIndicator) findViewById(R.id.indicator);
    mIndicator.setViewPager(mPager);

    ContactListFragment XCLF = (ContactListFragment) fragments.get(1);
    ListView mainListView = (ListView) XCLF.GetListView();

} 
```

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T08:44:13.267

您无法在 's 中获取' `Fragment`s 视图，因为在此阶段 's 布局没有膨胀。使用's 更新它的.`Activity``onCreate()``Fragment``Fragment``onActivityCreated()``ListView`

请参阅[从 Activity 的 onCreate 访问 Fragment View](https://stackoverflow.com/q/12122624/1300995)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T16:25:08.673

我也遇到了这个问题。为了解决这个问题，我保留了对 Layout 而不是特定视图的引用。然后当我需要返回具体的`View`时候（即你调用的时候`getListView()`你必须检查对Layout的引用是否为null。如果是的话，膨胀它，设置它，然后找到你需要的视图并返回它。

然后在`onCreateView()`方法中检查是否设置了布局。如果它只是简单地返回它，否则膨胀它并像现在一样设置它。

这样你就可以确保它只充气一次，并且在你需要的时候总是充气

# ruby-on-rails - 一个视图中有多个类似的循环，更好的做法？

> ID：12123400
> 
> 赞同：2
> 
> 时间：2012-08-25T15:47:07.957
> 
> 标签：ruby-on-rails

使用 Rails 3。我的观点有 2 个选项：

**选项 A：**

```
<% @items.each do |item| %>
  ...
<% end %>
...

<script>
  var items = [
    <% @items.each do |item| %>
      ['<%= item.name %>', <%= item.lat %>, <%= item.lng %>],
    <% end %>
  ];
</script> 
```

**选项 B：**

```
<% @items.each do |item| %>
  ...
  <% content_for :items_array do %>
    ['<%= item.name %>', <%= item.lat %>, <%= item.lng %>],
  <% end %>
<% end %>
...

<script>
  var items = [<%= yield :items_array %>];
</script> 
```

目前，我选择了**OPTION B**，但我仍然认为它一点也不整洁。有没有更好的方法来做到这一点？我拒绝选择**选项 A**，因为由于性能和 DRY 问题，我不希望它在同一视图中循环两次，如果我错了，请纠正我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T17:24:09.963

如果这是我的项目，我可能会将这个问题转移到 javascript 端。将 lat 和 long 放入项目标签中某处的数据属性中，并使用不显眼的脚本来读取它们。（如果你想要一个例子，请告诉我。）

如果这不可能，我个人更喜欢选项 A，首先是为了可读性（它更容易理解，特别是如果您不熟悉 content_for），其次因为它更容易重构，我们可以将收集数据移动到一个方法中在模型上或者可能成为助手。DRY 在这里并不真正适用，因为即使您循环访问同一个数据集，您也在用它做非常不同的事情。

也就是说，我不太确定性能影响，所以我进行了一些测试。我在我的一个应用程序中获取了 500 条客户记录，并使用选项 A 呈现链接列表，然后将它们的数据映射到 content_for 块并使用 Ruby 的内置 Benchmark 模块对其进行基准测试（它在 haml 而不是 erb 但我确定读起来并不难。）

```
- bench = Benchmark.measure do
  %ul#client-list
    - @clients.each do |client|
      %li
        = link_to client.company, client
        - content_for :foobar do
          = "['#{j client.name}', '#{j client.company}', '#{j client.email}'],"

  = javascript_tag do
    var nearbys = [#{yield :foobar}];

%p= bench.to_s 
```

结果，大约 370 毫秒

```
 0.370000 0.000000 0.370000 ( 0.397476) 
```

然后我对两个循环（一个循环）做了同样的`each`事情`map`：

```
- bench = Benchmark.measure do
  %ul#client-list
    - @clients.each do |client|
      %li
        = link_to client.company, client

  = javascript_tag do
    = "var nearbys = [#{ @clients.map { |client| "['#{j client.name}', '#{j client.company}', '#{j client.email}']," }}]"

%p= bench.to_s 
```

结果，大约 80 毫秒：

```
0.080000 0.000000 0.080000 ( 0.077940) 
```

您可能想自己检查结果，但似乎 content_for 方法不是解决此问题的非常有效的方法。

编辑：仅供参考，这是使用 ree 1.8.7 和 rails 3.2.6 测试的

编辑2：

如何在不使用内联 javascript 的情况下重写它的示例。我首先将所有必需的参数移动到`data-`属性中，例如在视图中：

```
<% @items.each do |item| %>
  <div class="item" data-name="<%= item.name %>"
                    data-lat="<%= item.lat %>"
                    data-long="<%= item.long %>">
    <%= item.name %>
  </div>
<% end %> 
```

（您也可以从 div 中获取名称，但将所有内容放在 data-attributes 中更加一致。）

然后在你的javascript中，你可以按如下方式映射数据（假设jquery）：

```
var nearbys = $('.item').map(function() {
  return [ $(this).data("name"), $(this).data("lat"), $(this).data("long") ];
}); 
```

这样，您可以将所有 javascript 整齐地保存在一个单独的文件中，并在客户端完成数据收集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T17:06:22.527

它非常简单，只需使用`to_json`它即可为您完成所有转义；）

因此，您的代码可能如下所示：

```
<script>
  var items = <%= @items.map{|o| [o.name, o.lat, o.lng]}.to_json.html_safe %>;
</script> 
```

（html_safe 将字符串标记为安全，避免双重转义）

如果你有比字符串和数字数组更复杂的对象，你应该使用 jQuery `$.parseJSON(json)`，所以它看起来像：

```
<script>
  var items = $.parseJSON('<%= @items.map{|o| [o.name, o.lat, o.lng]}.to_json.html_safe %>');
</script> 
```

享受！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T16:57:13.670

所有这些代码都应该放入模型帮助文件中的一个函数中。这就是帮手的目的，对吧？

**视图应该有最少的 Ruby 代码硬连线到其中**。所以，*使用 helpers*。

以下是一些链接，可让您更深入地了解帮助程序：

*   [在 ruby​​-on-rails 中使用辅助方法](http://paulsturgess.co.uk/articles/49-using-helper-methods-in-ruby-on-rails)
*   [辅助方法中的内容](http://37signals.com/svn/posts/1108-what-belongs-in-a-helper-method)

# javascript - 在 GXT 中激活上下文菜单时如何保持选定文本突出显示？（EXT GWT 2.x）？

> ID：12123401
> 
> 赞同：0
> 
> 时间：2012-08-25T15:47:10.143
> 
> 标签：javascript, gwt, dom-events, gxt

我正在尝试找到一种方法，当用户使用 Sencha 的 EXT GWT 2.x 激活上下文菜单（右键单击菜单）时，突出显示选定的文本（尽管如果有 3.x 解决方案我可以）。

**用例：**

1.  用户正在查看屏幕上的内容。
2.  用户选择一些文本块（例如短语）。
3.  用户右键单击以查看上下文菜单，以便他们可以对所选文本执行操作并查看上下文菜单。*出现菜单时，所选文本保持选中状态。*

在测试中，GXT 上下文菜单似乎会在菜单出现时自动取消选择文本。有没有办法防止这种情况并对所选文本采取行动？

**到目前为止，我已经尝试过：**

一种。为 Context Menu 事件 ( `Events.OnContextMenu`) 添加一个侦听器，以查看是否有我可以更改的属性（ `contextMenu.disableTextSelection(false)`即使它已经在构建视图时设置）。

湾。通过向同一个侦听器 ( ) 添加一个本地方法来覆盖由上下文菜单的外观创建的取消选择效果`Events.OnContextMenu`，然后该侦听器使用 JS 尝试获取当前选定的文本，将其复制到临时变量，然后立即添加它返回页面上的范围（有效地重新选择已选择的文本），但这也不起作用。我能够确认本机方法已触发，检测到文本并似乎将其放回范围内，但似乎可能触发了另一个事件或发生了其他一些操作，这些操作仍会在菜单出现之前清除选择。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:15:15.173

我仍然不知道官方解决方案，我开始认为这是 GXT 2.x 中的一个错误，但我能够想出一个解决方法并将其发布在这里，以防其他人遇到类似的问题.

对于初学者来说，这个问题似乎出现在 Firefox 而不是 IE 中。对于 Firefox，以下工作（摘要后的示例代码片段）：

1.  `Events.OnContextMenu`为组件/容器/面板/等上 的事件添加监听器。
    *   重写该`handleEvent`方法并添加一个原生方法以使用 JS 来检测用户是否在屏幕上选择了文本。如果选择了文本，请将其保存到 JavaScriptObject（GWT 提供的 JS 对象的不透明包装，请参阅 GWT 文档了解详细信息）。
2.  `Events.Show`为上下文菜单对象上 的事件添加一个侦听器。
    *   覆盖该`handleEvent`方法，添加一个native方法使用JS重新选择之前的选择。
3.  `Events.Hide`为上下文菜单对象上 的事件添加一个侦听器。
    *   覆盖 handleEvent 方法并清除我们的选择变量，然后运行本机方法以清除任何剩余的选择（如果需要）。

使用这些步骤，我能够在 Firefox 中显示上下文菜单时保持选中的文本。

**示例代码**
（这些只是示例代码块，以帮助更好地说明这些步骤 - 此代码的复制/粘贴不会为您提供所需的一切）

```
public class ContextMenuExample {

    JavaScriptObject selection;
    Menu contextMenu = new Menu();

  public void buildPanelExample() {

    ContentPanel panel = new ContentPanel();  
    panel.addListener(Events.onContextMenu, new Listener<BaseEvent>() {
      if (!GXT.isIE) {
        selection = findSelectedTextOnScreen();
      }
    });

    contextMenu.addListener(Events.Show, new Listener<BaseEvent>() {
      if (!GXT.isIE) {
        reSelectText(selection);
      }
    });

    contextMenu.addListener(Events.Hide, new Listener<BaseEvent>() {
      if (!GXT.isIE) {
        clearSelection();
      }
    });

    private native JavaScriptObject findSelectedTextOnScreen() /*-{
      // use JS method to get selected text as a range
      return selectedText;
    }-*/;

    private native void reSelectedText(JavaScriptObject range) /*-{
      // use JS method to find a range a select it
    }-*/;

    private native void clearSelection() /*-{ 
      // us JS to clear any selected ranges 
    }-*/;

    private void clearSelections() {
      selection = null;
      clearSelection();
    }

  }
} 
```

# php - 带有记录保存消息的表单验证

> ID：12123403
> 
> 赞同：1
> 
> 时间：2012-08-25T15:47:16.853
> 
> 标签：php, javascript, ajax, jquery

我想知道是否有人可以帮助我。

首先，我很抱歉，我对 JavaScript 和 jQuery 比较陌生，所以也许这是一个非常愚蠢的问题。

[在这里](http://net.tutsplus.com/tutorials/javascript-ajax/building-a-sleek-ajax-signup-form/)和[这里](http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/)使用这些教程，我将[这个](http://www.mapmyfinds.co.uk/chris/test.php)页面放在一起，以允许用户将记录添加到 MySQL 数据库，但我对表单“验证”和 jQuery“提交”消息有点困难。

如果使用选择上面的链接，然后在页面加载后，选择“保存”，您将看到正确的字段验证已激活，但尽管出现验证错误，但“位置已保存”消息会出现在页面底部，页面刷新，将记录保存到数据库。

显然这不应该发生，但我在加入“验证”和“提交”消息时遇到了很大的困难。独立它们工作正常，但正如你所看到的，一旦它们在一起就不行。

下面的代码处理“保存记录”和页面刷新

**更新 - 下面的工作解决方案**

```
<script>
        jQuery(document).ready(function(){
            jQuery("#addlocation").validationEngine();
            $("#addlocation").bind("jqv.field.result", function(event, field, errorFound, prompText){ console.log(errorFound) })
        });
    </script>
<script type="text/javascript">
$(document).ready(function(){
    $('#addlocation').submit(function(){

        //check the form is not currently submitting
        if($(this).data('formstatus') !== 'submitting'){

            //setup variables
            var form = $(this),
                formData = form.serialize(),
                formUrl = form.attr('action'),
                formMethod = form.attr('method'), 
                responseMsg = $('#saverecordresponse');

            //add status data to form
            form.data('formstatus','submitting');

            //show response message - waiting
            responseMsg.hide()
                       .addClass('response-waiting')
                       .text('Please Wait...')
                       .fadeIn(200);

            //send data to server for validation
            $.ajax({
                url: formUrl,
                type: formMethod,
                data: formData,
                success:function(data){

                    //setup variables
                    var responseData = jQuery.parseJSON(data), 
                        klass = '';

                    //response conditional
                    switch(responseData.status){
                        case 'error':
                            klass = 'response-error';
                        break;
                        case 'success':
                            klass = 'response-success';
                        break;  
                    }

                    //show reponse message
                    responseMsg.fadeOut(200,function(){
                        $(this).removeClass('response-waiting')
                               .addClass(klass)
                               .text(responseData.message)
                               .fadeIn(200,function(){
                                   //set timeout to hide response message
                                   setTimeout(function(){
                                       responseMsg.fadeOut(200,function(){
                                           $(this).removeClass(klass);
                                           form.data('formstatus','idle');
                                       });
                                   },3000)
                                });
                    });
                }
            });
        }

        //prevent form from submitting
        return false;
    });
});
</script> 
```

这是在选择“保存”按钮时调用的“saverecord.php”脚本。

```
<?php

    //sanitize data
    $userid = mysql_real_escape_string($_POST['userid']);   
    $locationname = mysql_real_escape_string($_POST['locationname']);   
    $returnedaddress = mysql_real_escape_string($_POST['returnedaddress']); 

    //validate email address - check if input was empty
    if(empty($locationname)){
        $status = "error";
        $message = "You didn't enter a name for this location!";
    }
    else if(!preg_match('/^$|^[A-Za-z0-9 _.,]{5,35}$/', $locationname)){ //validate email address - check if is a valid email address
            $status = "error";
            $message = "You have entered an invalid Location Name!";
    }

    else{
            $query = mysql_query("INSERT INTO `table` (userid, locationname, returnedaddress) VALUES ('$userid', '$locationname', '$returnedaddress')");  
            if($query){ //if insert is successful
                $status = "success";
                $message = "Location Saved!";   
            }
            else { //if insert fails
                $status = "error";
                $message = "I'm sorry, there has been a technical error! Please try again. If problems persist please contact Map My Finds support.";   
            }

    }

    //return json response
    $data = array(
        'status' => $status,
        'message' => $message
    );

    echo json_encode($data);
    exit;
?> 
```

我只是想知道是否有人可以看看这个，让我知道我哪里出错了。

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:28:46.107

我相信你需要：

```
if($.validationEngine.submitForm(this,settings) == true) {return false;} 
```

在你的 $.ajax 行之前的某个地方

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T18:30:22.003

IRHM，在您的活动中提交之前检查表单是否有效，即

```
$('#addlocation').submit(function(){
    if($(this).validate()){
       // put your all existing content here.
    }  
}); 
```

为了防止在 ajax 之后提交表单，在 if 块中的上述脚本的末尾放置 return false 即

```
if($(this).validate()){
    // put your all existing content here.
    return false;
} 
```

我猜这个问题是由于验证引擎而发生的，所以在这种情况下，为了防止表单提交，请尝试如下使用：

```
$('#addlocation').submit(function(evt){
    if($(this).validate()){
       evt.preventDefault();
       // put your all existing content here.
    }  
}); 
```

如果上面的代码不起作用，则包含`onValidationComplete`事件并将**if($(this).validate())**`validationEngine`块的所有现有内容放入其中，即

 **```
jQuery(document).ready(function(){
   // binds form submission and fields to the validation engine
   jQuery("#addlocation").validationEngine({ onValidationComplete: function(){ 

        //setup variables

        //add status data to form

        //show response message - waiting

        //send data to server for validation

        return false; 
      }
    });
}); 
```

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T15:23:10.477

经过几天的工作，我现在有了一个可行的解决方案，使用我添加到原始帖子中的示例[here 。](http://net.tutsplus.com/tutorials/javascript-ajax/building-a-sleek-ajax-signup-form/)**

# sql - 添加自动生成的 id 以记录在结果中

> ID：12123406
> 
> 赞同：5
> 
> 时间：2012-08-25T15:47:36.200
> 
> 标签：sql, sql-server

我需要将自动生成的自动增量 ID 添加到查询结果中。例如，对于查询

```
SELECT TOP 3 Users.Reputation FROM Users ORDER BY 1 DESC 
```

而不是得到

*   101
*   100
*   99

我想得到

*   1, 101
*   2, 100
*   3, 99

我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T15:55:08.810

如果是 SQL Server，最简单的方法是：

```
SELECT TOP 3 
ROW_NUMBER() OVER(ORDER BY Users.Reputation DESC), 
Users.Reputation 
FROM Users 
```

更新：

我检查了查询执行计划和内部顺序，它使用排序步骤定义了结果集的每个分区内行的逻辑顺序（在这种情况下我没有使用指定的分区条件），这是相同的按照正常排序：

```
SELECT Users.Reputation
FROM Users
ORDER BY Users.Reputation DESC 
```

这一步之后有两个有趣的步骤：Segment和Sequence Project。第二个是告诉它是对*有序*数据集的计算。最后一步是 TOP 和 SELECT。

我对缺点很感兴趣，但似乎还可以。

最后只是一个注释：使用带有 TOP 的普通 OrderBy：

```
 SELECT TOP 3 Users.Reputation
    FROM Users
    ORDER BY Users.Reputation DESC 
```

排序更容易，但几乎相同：Sort (Top N sort)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-25T15:49:40.207

怎么样：

```
;WITH CTE AS 
(SELECT
    RowNum = ROW_NUMBER() OVER(ORDER BY Reputation DESC),
    Users.Reputation
 FROM
    Users
)
SELECT TOP 3
    RowNum, Reputation
FROM
    CTE
ORDER BY  
    RowNum 
```

这是 SQL Server **2005**及更高版本中可用的 CTE（通用表表达式），结合`ROW_NUMBER()`排名功能，也可在 2005 和更高版本中使用。

它为下一条语句创建一个“即时”视图，并允许在选择之前先进行一些额外的处理。只是按照子句`ROW_NUMBER()`中定义的顺序为每一行添加一个连续的数字。`OVER (ORDER BY ....)`所以第一行得到#1，第二行得到#2，依此类推。

在此处阅读有关 CTE 的更多信息：[MSDN - 使用公用表表达式](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)

在此处阅读有关`ROW_NUMBER`其他排名功能的更多信息：[MSDN ROW_NUMBER](http://msdn.microsoft.com/en-us/library/ms186734.aspx)

# java - 一个循环中的两个操作与执行相同操作的两个循环每个循环一个

> ID：12123409
> 
> 赞同：17
> 
> 时间：2012-08-25T15:48:12.923
> 
> 标签：java, performance, loops

这个问题与这 [两个循环体或一个（结果相同）相同](https://stackoverflow.com/questions/3322136/two-loop-bodies-or-one-result-identical) ，但在我的情况下，我使用 Java。

我有两个运行十亿次的循环。

```
int a = 188, b = 144, aMax = 0, bMax = 0;

for (int i = 0; i < 1000000000; i++) {
  int t = a ^ i;
  if (t > aMax) 
    aMax = t;     
}  

for (int i = 0; i < 1000000000; i++) {
  int t = b ^ i;
  if (t > bMax) 
    bMax = t;     
} 
```

在我的机器上运行这两个循环所需的时间约为 4 秒。当我将这两个循环融合为一个循环并在该循环中执行所有操作时，它会在 2 秒内运行。如您所见，琐碎的操作构成了循环内容，因此需要恒定的时间。

我的问题是我从哪里获得这种性能改进？

我猜测在两个单独的循环中性能受到影响的唯一可能的地方是它增加 i 并检查 i < 1000000000 20 亿次，而如果我将循环融合在一起，则只有 10 亿次。里面还有什么事情吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T16:01:15.217

如果您不运行预热阶段，则第一个循环可能会得到优化和编译，而第二个循环则不会，而当您合并它们时，整个合并的循环都会被编译。此外，使用该`server`选项和您的代码，大多数都得到优化，因为您不使用结果。

我已经运行了下面的测试，将每个循环以及合并的循环放在它们自己的方法中，并预热 JVM 以确保一切都被编译。

结果（JVM 选项：）`-server -XX:+PrintCompilation`：

*   循环 1 = 500 毫秒
*   循环 2 = 900 毫秒
*   合并循环 = 1,300 毫秒

所以合并循环稍微快一点，但没那么快。

```
public static void main(String[] args) throws InterruptedException {

    for (int i = 0; i < 3; i++) {
        loop1();
        loop2();
        loopBoth();
    }

    long start = System.nanoTime();

    loop1();

    long end = System.nanoTime();
    System.out.println((end - start) / 1000000);

    start = System.nanoTime();
    loop2();
    end = System.nanoTime();
    System.out.println((end - start) / 1000000);

    start = System.nanoTime();
    loopBoth();
    end = System.nanoTime();
    System.out.println((end - start) / 1000000);
}

public static void loop1() {
    int a = 188, aMax = 0;
    for (int i = 0; i < 1000000000; i++) {
        int t = a ^ i;
        if (t > aMax) {
            aMax = t;
        }
    }
    System.out.println(aMax);
}

public static void loop2() {
    int b = 144, bMax = 0;
    for (int i = 0; i < 1000000000; i++) {
        int t = b ^ i;
        if (t > bMax) {
            bMax = t;
        }
    }
    System.out.println(bMax);
}

public static void loopBoth() {
    int a = 188, b = 144, aMax = 0, bMax = 0;

    for (int i = 0; i < 1000000000; i++) {
        int t = a ^ i;
        if (t > aMax) {
            aMax = t;
        }
        int u = b ^ i;
        if (u > bMax) {
            bMax = u;
        }
    }
    System.out.println(aMax);
    System.out.println(bMax);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T07:16:31.827

简而言之，CPU可以并行执行合并循环中的指令，性能翻倍。

第二个循环也可能没有得到有效优化。这是因为第一个循环将触发整个方法进行编译，而第二个循环将在没有任何可能扰乱第二个循环时间的度量的情况下编译。我会将每个循环放在一个单独的方法中，以确保不是这种情况。

CPU 可以并行执行大量独立操作（[Pentium III 深度为 10，Xeon 深度为 20](http://en.wikipedia.org/wiki/NetBurst_%28microarchitecture%29#Hyper_Pipelined_Technology)）。它尝试并行执行的一项操作是分支，使用分支预测，但如果它几乎每次都不采用相同的分支。

我怀疑循环展开你的循环看起来更像下面（在这种情况下可能更多的循环展开）

```
for (int i = 0; i < 1000000000; i += 2) {
  // this first block is run almost in parallel
  int t1 = a ^ i;
  int t2 = b ^ i;
  int t3 = a ^ (i+1);
  int t4 = b ^ (i+1);
  // this block run in parallel
  if (t1 > aMax) aMax = t1;     
  if (t2 > bMax) bMax = t2;     
  if (t3 > aMax) aMax = t3;     
  if (t4 > bMax) bMax = t4;     
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T15:54:08.000

在我看来，在单个循环的情况下，JIT*可能会*选择循环展开，因此性能会稍好一些

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T16:00:24.603

你用过-server吗？如果不是，您应该 - 客户端 JIT 不是可预测的，也不是那么好。如果您真的对到底发生了什么感兴趣，您可以使用 UnlockDiagnostic + LogCompilation 来检查在这两种情况下应用了哪些优化（一直到生成的程序集）。

此外，从您提供的代码中，我看不出您是否进行了预热，是否为同一个 JVM 运行了一次或多次测试，是否进行了几次运行（不同的 JVM）。无论您是考虑最佳时间、平均时间还是中间时间，您是否会剔除异常值？

这是关于编写 Java 微基准的主题的一个很好的链接：http: [//www.ibm.com/developerworks/java/library/j-jtp02225/index.html](http://www.ibm.com/developerworks/java/library/j-jtp02225/index.html)

编辑：另一个微基准测试技巧，当心堆栈替换：[http ://www.azulsystems.com/blog/cliff/2011-11-22-what-the-heck-is-osr-and-why-是坏还是好](http://www.azulsystems.com/blog/cliff/2011-11-22-what-the-heck-is-osr-and-why-is-it-bad-or-good)

# django-forms - 我可以使用 Django-Forms 创建测验 GUI 吗？

> ID：12123414
> 
> 赞同：0
> 
> 时间：2012-08-25T15:48:44.467
> 
> 标签：django-forms

我是 django 的新手，我正在做一个测验项目。这个想法是创建与此类似的东西（http://www.stylemint.com/quiz）。基本上，每个页面上都会有一个问题，用户单击带有答案的图像。我计划使用带有单选输入类型的 django 表单，但是，我希望图像充当单选按钮（即，可单击），并且单击图像将带您进入下一个问题（而不必每次点击提交）。django可以做到这一点，还是我需要java？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T17:46:37.803

是的，这是完全可能的。我的建议是，如果您想将结果保存在 django 中的 db 使用模型和模型形式中。因此，我的下一个建议是您可以自定义模型字段以将单选按钮功能和图像组合在一起。但实际上你必须编程并使用一点 jquery 和 javascript 来做到这一点。

你可能想看看：

[https://docs.djangoproject.com/en/dev/topics/forms/modelforms/](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/)

[https://docs.djangoproject.com/en/dev/howto/custom-model-fields/](https://docs.djangoproject.com/en/dev/howto/custom-model-fields/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T15:54:59.723

这是完全有可能的 - 如果您只想要一系列图像，然后单击它们将您带到下一个问题，您可以通过以下方式实现：

1.  具有多个“图像”类型的输入字段，它们都提交表单。如果你走这条路，你将不得不自己模板化表格或制作自己的小部件。

2.  使用 javascript 用图像动态替换单选按钮。如果你这样做，最好让它回退到没有 javascript 的人的直接列表选择。

3.  完全忽略表单，只使用带有选项参数的视图。

# soap - 为 SOAP MTOM 配置 Spring.Web.Services.WebServiceProxyFactory

> ID：12123424
> 
> 赞同：0
> 
> 时间：2012-08-25T15:49:42.137
> 
> 标签：soap, proxy, spring.net, mtom

我使用 Spring.NEt frwm - Spring.Web.Services.WebServiceProxyFactory 为 WCF 服务创建代理对象。

**WCF 服务使用 SOAP MTOM。**配置在这里：

```
 <basicHttpBinding>
    <binding    name="MTOM_BINDING" 
                maxReceivedMessageSize="10000000000" 
                receiveTimeout="00:10:00" 
                sendTimeout="00:10:00" 
                maxBufferSize="10000000000" 
                maxBufferPoolSize="524288" 
                bypassProxyOnLocal="true" 
                messageEncoding="Mtom">

      <readerQuotas 
                  maxArrayLength="10000000000" 
                  maxBytesPerRead="10000000000"
                  maxDepth="10000000000" 
                  maxNameTableCharCount="10000000000" 
                  maxStringContentLength="10000000000"/>
    </binding>
  </basicHttpBinding>

  <service      name="TestService" 
                behaviorConfiguration="DefaultBehavior">
    <endpoint   address="" 
                binding="basicHttpBinding"
                bindingConfiguration="MTOM_BINDING" 
                contract="TestService.ITestService" 
                bindingNamespace="http://test.com/TEST" 
                behaviorConfiguration="SimpleWSDLBehavior"/>
    <endpoint 
                contract="IMetadataExchange" 
                binding="mexHttpBinding" 
                address="mex"/>
  </service> 
```

Spring.Web.Services.WebServiceProxyFactory 代理对象的配置：

```
 <object id="testProxy"
          type="Spring.Web.Services.WebServiceProxyFactory, Spring.Services">
    <property name="ServiceUri" value="http://localhost/TestService.svc?wsdl"/>

    <property name="ServiceInterface" value="TestService.ITestService, TestService"/>

    <property name="ProductTemplate">
      <object>
        <property name="Timeout" value="2147483646" />
      </object>
    </property>
  </object> 
```

我找不到如何为 Spring.Web.Services.WebServiceProxyFactory 指定 WCF 服务使用的不是 SOAP 而是 SOAP MTOM。

因为 Spring.Web.Services.WebServiceProxyFactory 的这个配置除了 SOAP 消息，它的数据序列化为文本而不是二进制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T08:02:29.217

WebServiceProxyFactory 用于 .asmx Web 服务。

有关 WCF 支持，请参阅： [http ://www.springframework.net/doc-latest/reference/html/wcf.html](http://www.springframework.net/doc-latest/reference/html/wcf.html)

# r - 子集数据列表

> ID：12123426
> 
> 赞同：-1
> 
> 时间：2012-08-25T15:49:53.780
> 
> 标签：r, csv, subset

我是 R 和一般编码的新手，所以请多多包涵。

我有一个巨大的 .csv 金融期权价格文件，但有些是看涨期权（'c'），有些是看跌期权（'p'），它们只是在一个连续的列表中。在 .csv 文件中，它们交替出现，因此一行将是看涨期权的数据，而下一行将是看跌期权的数据，例如，相同证券在同一时间段内的数据。我怎样才能解析出调用（看跌）的数据？

此外，数据是按日期排列的，但每个日期有多个数据（当日数据）。在这些日内数据点中，有多个不同价格的（数量）数据。我想在每天不同的价格上构建所述数据的正态分布；我该怎么做？

```
symbol  exchange    date    stock_close_price   option_symbol   expiration  strike  call/put
ALSN    NYSE    7/23/12 17.71   ALSN  120818C00015000   8/18/12 15  C
ALSN    NYSE    7/23/12 17.71   ALSN  120818P00015000   8/18/12 15  P
ALSN    NYSE    7/23/12 17.71   ALSN  120818C00017500   8/18/12 17.5    C
ALSN    NYSE    7/23/12 17.71   ALSN  120818P00017500   8/18/12 17.5    P
ALSN    NYSE    7/23/12 17.71   ALSN  120818C00020000   8/18/12 20  C
ALSN    NYSE    7/23/12 17.71   ALSN  120818P00020000   8/18/12 20  P
ALSN    NYSE    7/23/12 17.71   ALSN  120818C00022500   8/18/12 22.5    C
ALSN    NYSE    7/23/12 17.71   ALSN  120818P00022500   8/18/12 22.5    P
ALSN    NYSE    7/23/12 17.71   ALSN  120818C00025000   8/18/12 25  C 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T18:36:12.107

如果数据在 R 数据框“dfrm”中，列有“transtype”、“trans_date_time”、“volume”，并且日期时间值采用 POSIXct 格式，那么这应该生成呼叫交易量的每日摘要. 我不确定我是否知道“在每天不同价格上构建所述数据的正态分布”是什么意思，但如果您的意思是显示可以使用`hist`绘图功能轻松完成的每日交易量分布。

```
set.seed(123)
dfrm <- data.frame(transtype = c("c","p")[sample(1:2, 20, rep=TRUE)], 
                   trans_date_time = as.POSIXct( Sys.Date() - 20) + 
                                         rnorm(100, 24*60*60, 3*24*60*60) , 
                   volume = 100*rpois(100, 5) )
str(dfrm)
dailycallvol <- with( subset( dfrm, transtype == "c"), 
                    aggregate( volume,
                      by = list( day= format(trans_date_time, format="%Y-%m-%d")),
                      FUN=sum) )
hist( dailycallvol[[2]] ) 
```

![在此处输入图像描述](../Images/612dd2f60dce1c94a9b9bff4d27c046b.png)

# objective-c - 更改表视图索引背景颜色

> ID：12123429
> 
> 赞同：1
> 
> 时间：2012-08-25T15:50:19.630
> 
> 标签：objective-c, ios, uitableview

我有一个带有索引的表格视图。默认情况下，当用户将手指放在索引列上时，它会被选择为灰色半透明背景（例如，请参见联系人应用程序）。如何更改此背景颜色？或者我可以简单地阻止背景颜色显示吗？

是否也可以更改索引中字母的文本颜色？

非常感谢任何帮助:)

史蒂夫

# regex - 正则表达式的相反结果

> ID：12123430
> 
> 赞同：2
> 
> 时间：2012-08-25T15:50:32.950
> 
> 标签：regex, negative-lookahead

我有这个正则表达式

```
^(\d+)/\1$ 
```

匹配字符串，如

```
1/1
2/2
5/5 
```

我想得到这个正则表达式的逆结果。我浏览了网络和[堆栈溢出](https://stackoverflow.com/questions/850907/regular-expression-opposite)，发现

```
^((?!(\d+)/\1.).)*$ 
```

应该做的伎俩，但事实并非如此。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T15:59:41.940

```
/^(\d+)\/(?!\1$)\d+$/ 
```

这将匹配`2/3`or `1/10`，但不匹配`1/1`and`2/2`等等。换句话说，只有当分数的第一部分与第二部分不同时才会匹配。

# macos - Cocoa Emacs：使用 linum 模式在垂直边框中出现故障

> ID：12123431
> 
> 赞同：2
> 
> 时间：2012-08-25T15:50:51.353
> 
> 标签：macos, emacs

在 OS X 10.7 上使用 Cocoa Emacs，在启用 linum 模式的情况下，我在垂直边框上出现了令人讨厌的图形故障。

使用垂直分割的框架，启用 linum 模式并尝试在分割的任一侧上下滚动。垂直边框完全或部分消失。

我可以通过将边缘模式更改为仅左模式来解决此问题，但仅当我在 minibuffer 中执行此修复时才有效。尝试从 lisp 代码（使用 fringe-mode、set-fringe-mode 或 set-fringe-style）来解决问题并不能解决问题（我尝试了几种不同的钩子）。

我已经向 Emacs 错误跟踪器报告了这个问题，但我希望 SO 更快！任何人都可以提出一个程序化的解决方法，或者阐明这里可能发生的事情吗？

更新：由于某种原因，边缘模式命令不适用于 lisp 代码，但我能够通过以下方式获得编程解决方案

```
(set-fringe-mode '(8 . 0)) 
```

...虽然它似乎引发了另一个图形故障。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:08:26.830

这现在已在 Emacs 主干中修复。请注意，上述解决方案在某种程度上适用于旧版本。

# spring - 如何在 JSP 中绑定动态字段列表

> ID：12123432
> 
> 赞同：4
> 
> 时间：2012-08-25T15:51:33.857
> 
> 标签：spring, model-view-controller, jsp

我正在构建一个用于输入足球比赛结果的 JSP 页面。我得到了一个未解决的游戏列表，我想这样列出它们：

```
team1 vs team4 
    [hidden field: game id]  
    [input field for home goals]  
    [input field for away goals]

team2 vs team5 
    [hidden field: game id]  
    [input field for home goals]
    [input field for away goals] 
```

我永远不知道会列出多少游戏。我试图弄清楚如何设置绑定，以便控制器可以在提交表单后访问这些字段。

有人可以指导我正确的方向。我正在使用 Spring MVC 3.1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T21:20:03.350

Spring 可以[绑定索引属性](http://static.springsource.org/spring/docs/3.0.x/reference/validation.html#beans-beans-conventions)，因此您需要在命令上创建游戏信息对象列表，例如：

```
public class Command {
   private List<Game> games = new ArrayList<Game>();
   // setter, getter
}

public class Game {
   private int id;
   private int awayGoals;
   private int homeGoals;
   // setters, getters
} 
```

在您的控制器中：

```
@RequestMapping(value = "/test", method = RequestMethod.POST)
public String test(@ModelAttribute Command cmd) {
   // cmd.getGames() ....
   return "...";
} 
```

在您的 JSP 中，您必须为输入设置路径，例如：

```
games[0].id
games[0].awayGoals
games[0].homeGoals 

games[1].id
games[1].awayGoals
games[1].homeGoals 

games[2].id
games[2].awayGoals
games[2].homeGoals 
.... 
```

如果我没记错的话，在 Spring 3 中，[自动增长的集合](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/validation/DataBinder.html#setAutoGrowNestedPaths%28boolean%29)现在是绑定列表的默认行为，但对于较低版本，您必须使用[AutoPopulatingList](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/util/AutoPopulatingList.html)而不仅仅是 ArrayList（仅作为参考：[Spring MVC 和处理动态表单数据： AutoPopulatingList](http://blog.richardadamdean.com/?p=12)）。

# javascript - 将脚本和样式应用于 iFrame？

> ID：12123436
> 
> 赞同：0
> 
> 时间：2012-08-25T15:52:29.673
> 
> 标签：javascript, html, css, iframe, parent

我正在尝试为网站创建一个小型编辑器。其中一项功能是拖放界面。我希望用户能够将元素拖到页面中的另一个位置。我正在考虑拥有一个网站的 iFrame，并应用 JS 和 CSS 来启用拖放功能。

这是执行此操作的 CMS 的屏幕截图：

![内容管理系统](../Images/8be60a8b3b9bcf44398e41f94315ccc4.png)

该网站是一个 iFrame。当我打开 iFrame 时，您无法拖放元素。所以，我假设他们以某种方式在父页面中应用了更改。有什么方法可以基本上将 Javascript 添加到 iFrame 中？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T16:00:19.867

**只要`iframe`引用的页面在同一个域上**，是的，你可以。您可以在您的元素上应用脚本和样式，`iframe`就像您对主父页面中的任何元素所做的那样。主要语法是这样的：

```
var ifrm = document.getElementById("your_iframe_id");
/*ifrm.contentWindow.document is the document within the iframe
so let's try styling a div with an id 'mydiv' inside the iframe:*/
ifrm.contentWindow.document.getElementById("mydiv").style.color = "red"; 
```

当然这只是一个示例，您可以使用相同的机制对其中的元素进行更复杂的处理`iframe`（包括拖放！）

`iframe`您也可以执行在父页面中定义的函数。语法相似且直观：

```
ifrm.contentWindow.yourFunction(); 
```

我希望这对你有任何帮助！

# javascript - 在 "a rel=""" 中播放/显示 "swf"

> ID：12123438
> 
> 赞同：0
> 
> 时间：2012-08-25T15:52:45.887
> 
> 标签：javascript, jquery, image, flash, rel

我有这个图像的工作代码：

```
<a class="showimage" rel="http://www.sitename/images/image.png" >
<span>hover here</span>
</a> 
```

加上一些 javascript 和 css 代码....所以现在的最终结果是，当您将鼠标悬停在“悬停在这里”时，它会显示实际的图像“http://www.sitename/images/image.png” - 像这样（[http ://goo.gl/jhyNm](http://goo.gl/jhyNm) )

我想问的是，是否可以显示/播放 .SWF 文件而不是图像....所以过程是一样的，我将鼠标悬停在“悬停在此处”文本上并显示 .SWF ？

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T15:56:56.280

我不是 100% 确定，但您可以尝试在`div`元素中嵌入 SWF 并在“悬停在这里”上使用 JS 检测`mouse over`事件，然后显示或隐藏`div`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T16:05:17.607

关于“显示”`.swf`文件 - 这很容易，关于“播放”它 - 我真的不知道仅使用 js 是否有可能。我想你需要一些 API。（`autoplay`如果存在选项）。

无论如何，html：

```
<a href='#' id='showMovieText'>
Hover Me
<div style='display:none'>
<!--EMBEDED SWF FILE HERE-->
<embed ....>
</div>
</a> 
```

jQuery：

```
$('#showMovieText').hover(function(){
 $(this).find("div").css('display','block');
}); 
```

演示：http: [//jsfiddle.net/YbWgh/](http://jsfiddle.net/YbWgh/)

# php - 分配新变量与重用现有变量的优缺点

> ID：12123441
> 
> 赞同：3
> 
> 时间：2012-08-25T15:53:16.770
> 
> 标签：php, variables

首先，如果这只是编码风格问题，我深表歉意。我想知道为每个属性或函数分配一个新变量以重新分配现有变量的利弊。这是假设您不需要访问范围之外的变量。

这就是我的意思（注意名称`$var0,...`只是为了简单起见），选项＃1：

```
$var0= array('hello', 'world');
$var1="hello world";
$var2=//some crazy large database query result
$var3=//some complicated function() 
```

与选项#2：

```
$var0= array('hello', 'world');
$var0="hello world";
$var0=//some crazy large database query result
$var0=//some complicated function() 
```

1.  它是否取决于现有变量的内存大小？即，重新分配内存是否比分配新变量在计算上更昂贵？
2.  这是否总是一个范围问题，这意味着仅当您不需要此处显示的范围之外的每个变量值时才应使用 Option#2？
3.  它是否取决于每个变量的值是什么？重新分配给不同的数据类型是否有不同的相关成本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T16:00:32.970

从技术上讲，重用变量会（微不足道）更快。不过，这将使可测量的性能差异为零。

虽然硬件变得更便宜，时间也变得更贵，但您更应该寻找可维护的代码。从长远来看，这将为您节省头痛和贵公司的资金。

> 仅在可以获得足够性能增益以抵消您投入其中的工作量（金钱）的地方进行优化。

在云和服务器集群的今天，稍微优化一点的代码最终很可能*不会*使项目变得更慢。您的项目更有可能运行得一样快，但会花费更多的 cpu 周期，因此您的托管服务提供商会花费更多的钱。不过，这一微小的额外成本很可能不会影响长达数小时的性能提升优化。当然，除非你问这个是因为你正在为亚马逊开发。（即使在像亚马逊这样的地方，每天有数百万次点击，重用变量也不会带来任何显着的性能提升）

回到你的问题；我相信你应该只重用一个变量，当它包含原始状态的更新内容时。但总的来说，这种情况不会发生太多。

我认为在以下情况下，重用`$content`var 是合理的选择

```
function getContent()
{
    $cacheId = 'someUniqueCacheIdSoItDoesNotTriggerANotice';
    $content = someCacheLoadingCall( $cacheId );

    if (null === $content) {
        $content = someContentGeneratingFunction();

        someCacheSavingCall( $cacheId, $content);
    }

    return $content;
} 
```

**描述性代码**

另外，请善待未来的自己，始终为变量使用*描述性*名称。你会为此感谢自己。当你与自己达成协议，除非它在逻辑上有意义，否则永远不要重用变量，你就朝着可维护代码又迈出了一步。

想象一下，从现在起的 6 个月内，在您完成另一个大项目 - 或更小的项目之后 - 您接到一个重要客户的电话，说旧项目中存在错误。神圣的！@#！必须马上解决！您打开并到处看到这样的功能；

```
function gC()
{
    $cI = 'someUniqueCacheIdSoItDoesNotTriggerANotice';
    $c  = sclc( $cI );

    if (null === $c) {
        $c = scg_f();
        scsc( $cI, $c);
    }

    return $c;
} 
```

*使用描述性*变量和函数名称以及获得具有*良好*代码完成功能的代码编辑器要好得多，因此您仍然可以尽可能快地进行编码。现在，我会推荐[Aptana Studio](http://www.aptana.com/)或[Zend Studio](http://www.zend.com/en/products/studio/)，Zend 的代码完成要好一些，但 Aptana 已被证明更稳定。

PS。我不知道你的编程水平，如果我喋喋不休，抱歉。如果与您无关，我希望能帮助其他可能阅读此内容的人:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T15:55:12.903

你*永远不*应该使用选项#2。为不相关的代码块重用变量是一种糟糕的做法。您甚至不应该处于可以使用选项 #2 的情况。如果您的函数太长以至于您要完全更改上下文并解决一些不同的问题，您应该将您的函数重构为更小的单一用途函数。

在不再使用旧值之后，您*永远不应该出于“回收”它们的愿望而重用变量。*如果一个变量不再是，如果您正确地构建您的软件，它自然应该超出范围。您的决定应该与性能或内存优化无关，它们都不受变量命名的影响。选择变量名称时，您唯一考虑的应该是生成可维护、稳定的代码。

您甚至在问自己是否重用变量这一事实意味着您使用的名称过于通用。`var0`像等变量名`var1`是*可怕*的。您应该根据变量实际包含的内容命名变量，并在需要存储新值时声明新变量。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-25T15:55:50.837

我个人会说你永远不应该重新分配一个变量来包含不同的东西。这使得调试非常困难。如果您担心内存消耗，您可以随时使用`unset()`变量。

另请注意，您永远不应该拥有变量名称`$var#`。您的变量名应该描述它所包含的内容。

归根结底，这一切都是为了尽量减少代码中 WTF 的数量。选项二是一个很大的WTF。

> 它是否取决于现有变量的内存大小？即，重新分配内存是否比分配新变量在计算上更昂贵？

这是关于限制您和其他人（重新）查看您的代码的 WTF 数量。

> 这是否总是一个范围问题，这意味着仅当您不需要此处显示的范围之外的每个变量值时才应使用 Option#2？

好吧，如果它在完全不同的范围内，那么如果您使用相同的名称多个名称就可以了。只要清楚变量包含的内容，例如：

```
// perfectly fine to use the same name again. I would go as far as to say this is prefered.
function doSomethingWithText($articleText)
{
    // do something
}

$articleText = 'Some text of some article';
doSomethingWithText($articleText); 
```

> 它是否取决于每个变量的值是什么？重新分配给不同的数据类型是否有不同的相关成本？

不是成本问题，而是可维护性问题。这通常更为重要。

# c++ - Fedora 17 和 Google 协议缓冲区

> ID：12123443
> 
> 赞同：1
> 
> 时间：2012-08-25T15:53:43.783
> 
> 标签：c++, gcc, buffer, protocols, fedora

有人在 Fedora 17 上使用 GCC 编译协议缓冲区有任何问题吗？我相信我安装了正确的软件包

> sudo yum 安装 protobuf*

protoc 编译器工作正常，但生成的类和头文件在我将它们添加到新项目时无法编译。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T16:21:44.113

呃，我忘了添加-lprotobuf。没关系！

# c# - Actions/AsyncCallbacks 和内存分配

> ID：12123445
> 
> 赞同：1
> 
> 时间：2012-08-25T15:53:55.633
> 
> 标签：c#, multithreading, memory-management, asynccallback

我在内存分配方面有点n00b，但我试图了解如何将 AsyncCallbacks 与 BeginInvoke 类型设计模式一起使用可能会导致内存分配，从而可能导致更频繁地调用垃圾收集器。

例如，如果我有一个带有我希望通过回调异步调用的事件的类，我通常会按如下方式设置它：

## 方法一

```
public class PriceBook
{
    private double Value;

    public void UpdateValue(double Value)
    {
        this.Value = Value;
    }

    public event EventHandler ValueUpdated;
    private void DoValueUpdated(double Value)
    {
        if (ValueUpdated != null)
        {
            ValueUpdated.BeginInvoke(this, EventArgs.Empty, ValueUpdateCompleted, Value);
        }
    }

    private void ValueUpdateCompleted(IAsyncResult ar)
    {
        // Do something when event has finished being called.
    }
} 
```

与我一起工作的人说，以这种方式调用 BeginInvoke 实际上是通过在每次调用时创建一个新的 AsyncCallback 来分配内存。所以，他建议这样做：

## 方法二

```
public class PriceBook
{
    private AsyncCallback ValueUpdateCallback;
    private double Value;

    public PriceBook1()
    {
        ValueUpdateCallback = ValueUpdateCompleted;
    }

    public void UpdateValue(double Value)
    {
        this.Value = Value;
        DoValueUpdated(Value);
    }

    public event EventHandler ValueUpdated;
    private void DoValueUpdated(double Value)
    {
        if (ValueUpdated != null)
        {
            ValueUpdated.BeginInvoke(this, EventArgs.Empty, ValueUpdateCallback, Value);
        }
    }

    private void ValueUpdateCompleted(IAsyncResult ar)
    {
        // Do something when event has finished being called.
    }
} 
```

如您所见，这里我在构造函数中设置了一次 AsyncCallback。方法二真的可以节省内存分配吗？这两种方法还有其他好处吗/是否有更好的方法来完成我想做的事情？

*   威廉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T16:09:57.307

是的，这节省了一个代表分配。

这个

```
ValueUpdated.BeginInvoke(..., ValueUpdateCompleted, ...); 
```

真的是这样：

```
ValueUpdated.BeginInvoke(..., new AsyncCallback(ValueUpdateCompleted), ...); 
```

您现在可以看到分配。

如果调用不在热路径上，这意味着它不是性能关键，我建议*不要*缓存委托，因为代码可维护性会受到影响。

此外，线程池调用比委托分配昂贵得多。我无法想象这可能会产生影响的情况。

# ruby-on-rails-3 - ActiveRecord 关联，has_many_through

> ID：12123447
> 
> 赞同：0
> 
> 时间：2012-08-25T15:54:05.250
> 
> 标签：ruby-on-rails-3, activerecord, has-many-through, polymorphic-associations

我一直试图围绕这些关联进行思考，但我遇到了一些障碍。我正在开发的应用程序目前有 2 个模型：成分和配方。每个背后的逻辑如下：

成分模型包含有关食品的信息，例如名称、批量价格等。食谱模型包含食谱名称、制备说明和成分列表（以及食谱所需的量）。

在挖掘了这里的一些问题并观看了一些 railscasts 之后，我确定 has_many_through 关系可能更适合我正在尝试做的事情，因为我想在配方中包含有关成分的其他信息（所需金额）。

基于我在这方面的有限经验，我想这样处理它：

```
class Recipe < ActiveRecord::Base
  has_many :ingredients_recipes
  has_many :ingredients, :through => :ingredients_recipes
end

class Ingredient_Recipe < ActiveRecord::Base
  belongs_to :ingredient
  belongs_to :recipe
end

class Ingredient < ActiveRecord::Base
  has_many :ingredients_recipes
  has_many :recipes, :through => :ingredients_recipes
end 
```

成分表中的字段类似于：recipe_id、成分 ID、成分数量（用于存储配方中特定成分的含量）

根据我上面提到的功能，这是以代码方式处理它的正确方法吗？任何帮助将不胜感激。谢谢！

**编辑** 我还希望能够从食谱表格中将这些新成分添加到食谱中。这是否需要任何额外的东西，比如必须为 through 表做 accept_nested_attributes_，或者这是 Rails 自己处理的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:44:18.783

`:has_many through`当一个对象可以连接零个或多个其他对象*并且每个连接*都有一些属性时**，**该方法最有效。

 *例如，在您的情况下，您将在`Connections`表中存储每种成分的数量以及 recipe_id 和成分 ID。

所以，它对我来说看起来不错。:)

但是，您应该考虑将您的`Ingredient_Recipe`表命名为更合适的名称。*

# iphone - 试图用额外的选项覆盖 initWithFrame

> ID：12123449
> 
> 赞同：2
> 
> 时间：2012-08-25T15:54:07.867
> 
> 标签：iphone, objective-c, ios, ipad

我正在尝试使用不同类型的主题更新 UITableViewCell 视图。我有几个主题，但无法让它们正常工作。

```
@interface CustomRowBackground : UIView {
CGColorRef topStroke;
CGColorRef lightColor;
CGColorRef darkColor;
CGColorRef bottomStroke; //also known as separator
CGColorRef borderColor;
}

- (id)initWithFrame:(CGRect)frame topStroke:(CGColorRef)top lightColor:(CGColorRef)light   darkColor:(CGColorRef)dark bottomStroke:(CGColorRef)bottom borderColor:(CGColorRef)border;
@end

- (id)initWithFrame:(CGRect)frame topStroke:(CGColorRef)top lightColor:(CGColorRef)light    darkColor:(CGColorRef)dark bottomStroke:(CGColorRef)bottom borderColor:(CGColorRef)border
{
   self = [super initWithFrame:frame];
if (self) {
    // Initialization code
    topStroke = top;
    lightColor = light;
    darkColor = dark;
    bottomStroke = bottom;
    borderColor = border;

}
return self;
} 
```

现在在我的 UIViewController, .h 文件中，我使用辅助方法扩展了 UIColor 类

```
@interface UIColor (BIExtras)
+(UIColor *)colorWithR:(CGFloat)red G:(CGFloat)green B:(CGFloat)blue A:(CGFloat)alpha;
@end 
```

然后在 .m 我写这个

```
@implementation UIColor (BIExtras)
+(UIColor *)colorWithR:(CGFloat)red G:(CGFloat)green B:(CGFloat)blue A:(CGFloat)alpha {
return [UIColor colorWithRed:(red/255.0) green:(green/255.0) blue:(blue/255.0) alpha:alpha];    
}
@end 
```

然后我尝试为特定行设置所需的渐变。

```
TaskDisplayCell *cell = (TaskDisplayCell *)[self.tableView dequeueReusableCellWithIdentifier:TaskCellIdentifier];
if (indexPath.row == 0) {
    cell.backgroundView = [[CustomRowBackground alloc]  initWithFrame:CGRectMake(0,0,self.tableView.bounds.size.width,40) 
topStroke:[UIColor colorWithR:119 G:119 B:119 A:1].CGColor 
lightColor:[UIColor colorWithR:92 G:92 B:92 A:1].CGColor 
darkColor:[UIColor colorWithR:70 G:70 B:70 A:1].CGColor 
bottomStroke:[UIColor colorWithR:76 G:76 B:76 A:1].CGColor 
borderColor:[UIColor colorWithR:110 G:110 B:110 A:1].CGColor]; 
} 
```

注意：我不确定这是否是这样做的方法。我只想用不同的渐变主题初始化背景。

无论如何，它给了我一个错误。如果我在 drawRect 中手动编写一个 [UIColor colorWith] 方法的分配，那就可以了。如果我改为允许代码重用，它就会崩溃。

有任何想法吗？

本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:03:12.183

我在您的程序中看到的一个问题是您没有对`CGColorRef`s 执行内存管理——ARC（假设您启用了它）不会为您管理非 ObjC 对象。您必须手动保留和释放这些。因此在 ARC 和 MRC 中，您必须手动保留和释放它们。

这是基本形式：

```
@interface CustomRowBackground : UIView {
    CGColorRef color;
}

- (id)initWithFrame:(CGRect)frame color:(CGColorRef)pColor;

@end

- (id)initWithFrame:(CGRect)frame color:(CGColorRef)pColor
{
    self = [super initWithFrame:frame];
    if (self) {
        color = CGColorRetain(pColor);
    }
    return self;
}

- (void)dealloc
{
    CGColorRelease(color), color = 0;
// [super dealloc]; if MRC
}

- (CGColorRef)color
{
    return color;
}

- (void)setColor:(CGColorRef)p
{
    if (color == p) {
        return;
    }
    CGColorRef prev = color;
    color = CGColorRetain(p);
    CGColorRelease(prev);
} 
```

# jquery - Dev Express GridView：我想获取单击单元格的行和列 - 或行和列的标题

> ID：12123450
> 
> 赞同：0
> 
> 时间：2012-08-25T15:54:22.373
> 
> 标签：jquery, gridview, devexpress

我一直在尝试使用 jQuery 和许多其他方法。

首先，我调用一个函数：

```
ClientSideEvents  RowClick="function(s, e) { OnGridFocusedRowChanged(); }" 
```

这使我进入了我用来重定向到另一个 ASPX 的例程。

（我喜欢在后面使用代码，但在使用 jQuery 和 ASP.net Gridview 之前我已经做过类似的事情。）

```
 function OnGridFocusedRowChanged() {
        cell = document.getElementById('<%=ASPxGridView1.ClientID%>')
        alert(cell);  ????
        ViewName = aspxcboDashboard_IN.GetText();
        window.location.href = "Drills.aspx?ViewName=" + ViewName + "&ViewRow=test" + "&ViewCol=test"; 
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T17:41:17.337

我不确定您的代码的哪一部分失败，但如果您无法获取网格，请使用[ClientInstanceName](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_ClientInstanceNametopic)属性。
例如，将 ClientInstanceName 设置为 grid1 并将网格作为任何其他全局变量获取： `window.grid1`，`window["grid1"]`或者只是`grid1`。

# php - 限制只能访问一个 wifi 网络

> ID：12123451
> 
> 赞同：1
> 
> 时间：2012-08-25T15:54:31.220
> 
> 标签：php, ip, wifi

我正在构建一个只需要在一个地方运行的小应用程序。所以需要限制对文件的访问仅限于该 wifi 网络。在这段代码中，我使用 IP 来达到目的，但我并不认为这是最佳实践，因为 IP 可以改变。

```
<?php
$externalIP = $_SERVER['REMOTE_ADDR'];
if($externalIP=="KNOWN IP") echo"YOU HAVE ACCESS";
else echo"YOU DON'T HAVE ACCESS";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T16:38:15.223

如果您使用的是普通路由器，您很可能有一个本地 IP 以 192.168.1.xxx 开头的网络。这意味着理论上您有 200 多个可用 IP（这可能受您的路由器限制，数量较少）。现在，如果您的服务器连接在同一网络上，那么您的解决方案还不错。然后，您可以做的是提取 IP 地址中的最后三位数字，并检查它们是否在允许的 IP 地址范围内。当然，您仍然必须检查前三个字段是否正确。

另一方面，如果服务器不在同一个网络上，那么它会变得更加棘手，因为你无法知道客户端是否在 wifi 上。

大多数路由器都可以通过基于 Web 的界面进行配置，如果路由器不完全关闭，您将能够查看和设置 wifi ip 的范围（即路由器将通过 DHCP 分配的地址）。

# java - 如何在 JTable 中实现搜索

> ID：12123456
> 
> 赞同：2
> 
> 时间：2012-08-25T15:55:01.783
> 
> 标签：java, swing, search, jtable

我想有一个 JTable 的功能，其中我将提供一个文本字段来输入要从 JTable 搜索的值，如果这个输入的值与 JTable 中的任何单元格值匹配，那么应该突出显示该特定单元格和单元格字体应变为粗体。当用户在文本字段中指定值后按 Enter 键时，将匹配这些值。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-25T18:34:27.883

这是解决问题的一种方法。这是代码：

```
public class JTableSearchAndHighlight extends JFrame {

   private JTextField searchField;
   private JTable table;
   private JPanel panel;
   private JScrollPane scroll;

   public JTableSearchAndHighlight() {

     initializeInventory();
   }

private void initializeInventory() {

    panel = new JPanel();

    searchField = new JTextField();

    panel.setLayout(null);

    final String[] columnNames = {"Name", "Surname", "Age"};

    final Object[][] data = {{"Jhon", "Java", "23"}, {"Stupid", "Stupido", "500"},
                            {"Michael", "Winnie", "20"}, {"Winnie", "Thepoor", "23"},
                            {"Michael", "Winnie", "20"}, {"Winnie", "Thepoor", "23"},
                            {"Michael", "Winnie", "20"}, {"Winnie", "Thepoor", "23"},
                            {"Michael", "Winnie", "20"}, {"Winnie", "Thepoor", "23"},
                            {"Michael", "Winnie", "20"}, {"Winnie", "Thepoor", "23"},
                            {"Michael", "Winnie", "20"}, {"Winnie", "Thepoor", "23"},
                            {"Michael", "Winnie", "20"}, {"Winnie", "Thepoor", "23"},
                            {"Michael", "Winnie", "20"}, {"Winnie", "Thepoor", "23"},
                            {"Michael", "Winnie", "20"}, {"Winnie", "Thepoor", "23"},
                            {"Michael", "Winnie", "20"}, {"Winnie", "Thepoor", "23"},
                            {"Michael", "Winnie", "20"}, {"Winnie", "Thepoor", "23"},
                            {"Michael", "Winnie", "20"}, {"Winnie", "Thepoor", "23"},
                            {"Michael", "Winnie", "20"}, {"Winnie", "Thepoor", "23"},
                            {"Michael", "Winnie", "20"}, {"Winnie", "Thepoor", "23"},
                            {"Michael", "Winnie", "20"}, {"Winnie", "Thepoor", "23"},
                            {"Michael", "Winnie", "20"}, {"Winnie", "Thepoor", "23"},
                            {"Michael", "Winnie", "20"}, {"Winnie", "Thepoor", "23"},
                            {"Michael", "Winnie", "20"}, {"Winnie", "Thepoor", "23"},
                            {"Michael", "Winnie", "20"}, {"Winnie", "Thepoor", "23"},
                            {"Max", "Dumbass", "10"}, {"Melanie", "Martin", "500"},
                            {"Jollibe", "Mcdonalds", "15"}};

    table = new JTable(data, columnNames);
    table.setColumnSelectionAllowed(true);
    table.setRowSelectionAllowed(true);

    scroll = new JScrollPane(table);
    scroll.setBounds(0, 200, 900, 150);

    searchField.setBounds(10, 100, 150, 20);
    searchField.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent e) {

            String value = searchField.getText();

            for (int row = 0; row <= table.getRowCount() - 1; row++) {

                for (int col = 0; col <= table.getColumnCount() - 1; col++) {

                    if (value.equals(table.getValueAt(row, col))) {

                        // this will automatically set the view of the scroll in the location of the value
                        table.scrollRectToVisible(table.getCellRect(row, 0, true));

                        // this will automatically set the focus of the searched/selected row/value
                        table.setRowSelectionInterval(row, row);

                        for (int i = 0; i <= table.getColumnCount() - 1; i++) {

                            table.getColumnModel().getColumn(i).setCellRenderer(new HighlightRenderer());
                        }
                    }
                }
            }
        }
    });

    panel.add(searchField);
    panel.add(scroll);

    getContentPane().add(panel);

    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setTitle("Inventory Window");
    setSize(900, 400);
    setLocationRelativeTo(null);
    setVisible(true);
}

private class HighlightRenderer extends DefaultTableCellRenderer {

    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {

        // everything as usual
        super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);

        // added behavior
        if(row == table.getSelectedRow()) {

            // this will customize that kind of border that will be use to highlight a row
            setBorder(BorderFactory.createMatteBorder(2, 1, 2, 1, Color.BLACK));
        }

        return this;
    }
}

public static void main(String[] args) {

    SwingUtilities.invokeLater(new Runnable() {

        public void run() {

            new JTableSearchAndHighlight();
        }
    });
  }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-25T18:10:12.893

来自 SwingX 项目的`JXTable`内置支持搜索表（查找`Searchable`界面）。它还允许快速创建使用此`Searchable`接口的搜索字段：`JXSearchField`和/或`JXSearchPanel`。

如果我没记错的话，这将满足您的大部分要求。可能只需要添加一些自定义代码来使单元格内容加粗

# database - 如何在 Hibernate 查询中使用数据库索引

> ID：12123461
> 
> 赞同：4
> 
> 时间：2012-08-25T15:55:17.427
> 
> 标签：database, hibernate, indexing

我正在使用 Hibernate、Derby 和 Java 6 开发应用程序。我有一个包含大约 250 万条记录的数据库表，并且我有一个使用两个字段组合从该表中检索记录的查询。

因此，我在这两个字段上定义了一个索引，以加快查询速度。我的 Hibernate 映射文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
   "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="...">
    <class name="MyRecord" table="MYTABLE">
    <id column="id" name="id" type="long">
      <generator class="native"/>
    </id>
    <property column="myIndex" index="MY_IDX" name="myIndex" not-null="true" type="long"/>
    <property column="myCode" index="MY_IDX" length="2" name="myCode" not-null="true" type="string"/>
    <!-- More properties here -->
    <many-to-one ... />
    </class>
</hibernate-mapping> 
```

（注意 myIndex 只是一个字段的名称，而定义的数据库索引是 MY_IDX。）

然后我执行如下查询：

```
...
Session session   = ...;
Criteria criteria = session.createCriteria(MyRecord.class);
criteria.add(Restrictions.eq("myIndex", myIndex));
criteria.add(Restrictions.eq("myCode", myCode));

List result = criteria.list();
... 
```

上面的查询找到了正确的结果（一条记录，如果存在的话），但在我看来它花费的时间太长（在 9 到 13 秒之间）：我不知道 Hibernate 如何管理数据库索引的细节，但我希望查询在索引键上运行得非常快。因此，即使有 250 万条记录，查询的运行时间也应该在 IMO 中小得多。

问题：会不会是我的数据库索引配置不正确，根本没有使用索引？或者，如果在数据库中创建了索引，我的查询是否做错了什么？

**更新**

我认为 Hibernate 根本没有创建任何索引。我直接在 Derby 中创建了索引（通过 SQuirrel 连接到它）并再次执行了上述查询：它现在非常快（7 毫秒）。我有点困惑：要么是 Hibernate 映射文件中的 index 属性根本没有用，要么我做错了什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T14:10:50.250

如果您让 Hibernate 部署模式，它将创建索引。在部署数据库后，Hibernate 并不真正对您的索引感兴趣。在您执行查询时，Hibernate 将从提供的 HQL 和映射生成 SQL，并将其直接发送到数据库。然后数据库将确定如何最好地执行查询。

您应该使用分析器来确定大部分时间是否用于执行查询。如果是这样，您需要查看查询计划以确定是否使用了预期的索引。有关此[wiki.apache.org/db-derby/PerformanceDiagnosisTips](http://wiki.apache.org/db-derby/PerformanceDiagnosisTips)的提示，请参见此处。

如果您使用 SQL 查询，您可以使用查询提示来告诉您的数据库应该使用哪个索引。如果查询计划显示您期望使用的索引不是，这很有用。不幸的是，Hibernate 不支持使用 HQL 开箱即用的查询提示。

这篇[文章](http://www.znetdevelopment.com/blogs/2009/10/07/using-use-index-with-hibernatemysql/)提供了一些关于这个主题的有用背景，并解释了如何扩展 Hibernate 以使用查询提示。

# c# - 在哪里可以找到 System.Numerics.BigInteger 的源代码？

> ID：12123465
> 
> 赞同：5
> 
> 时间：2012-08-25T15:55:50.500
> 
> 标签：c#, .net, visual-studio-2010, debugging

我需要使用开发人员评论和合理的变量名称来获取**原始**源代码。**我知道如何反编译程序集，这不是我正在寻找的答案。**`System.Numerics.BigInteger`

 **我试过的：

*   下载 .NET 4 和 4.5 的源代码，但由于某种原因不包括 BigInteger。
*   [按照MS 说明](http://referencesource.microsoft.com/downloadsetup.aspx)进行源步进，但由于SP1的[这个问题，这不起作用，而且](https://stackoverflow.com/questions/8139269/vs2010-how-to-enable-enable-net-framework-source-stepping)**我没有在我的开发机器上回滚的选项**。我也无法访问另一台具有开发功能的机器。

我相信你们中的许多人都使用过源代码步进来调试和/或查看 BCL 源代码。如果有，请发布 BigInteger 和相关代码作为答案。如果这样做跨越了任何法律界限，请让我知道同样的情况，以便我可以**选择**替代方案。如果您确实提出了替代方案，请说明这样做的具体原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T02:42:20.120

[之前在 MSDN BigInteger 源代码](http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/8df4e47a-f8af-49eb-880a-beac2ab795c8)上已经问过这个问题

除非您有权访问私有的 Micrsoft 源和符号服务器，否则您不会通过代码注释获得它。

源步进是您最好的选择。我也遇到过你提到的问题，发现 RedGate 源步进器（在 VM 上的 Reflector 试验的一部分）可以解决问题。

如果您没有时间自己编写，另一种方法是使用第 3 方：http: [//www.codeproject.com/Articles/2728/C-BigInteger-Class](http://www.codeproject.com/Articles/2728/C-BigInteger-Class)

更新：

*   .NET 框架 4.8：[http ://referencesource.microsoft.com/#System.Numerics/System/Numerics/BigInteger.cs,035eb7acfa6585a0](http://referencesource.microsoft.com/#System.Numerics/System/Numerics/BigInteger.cs,035eb7acfa6585a0)
*   .NET 5+：[https ://github.com/dotnet/runtime/blob/main/src/libraries/System.Runtime.Numerics/src/System/Numerics/BigInteger.cs](https://github.com/dotnet/runtime/blob/main/src/libraries/System.Runtime.Numerics/src/System/Numerics/BigInteger.cs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T02:24:11.877

这是根据 JustDecompiler 的 BigInteger 源代码，给定框架的 BigInteger dll：http: [//pastebin.com/hFXJ7m8p](http://pastebin.com/hFXJ7m8p)**

# android - 我的 Android 应用程序采用哪种结构？

> ID：12123467
> 
> 赞同：0
> 
> 时间：2012-08-25T15:55:53.623
> 
> 标签：android, service, android-activity, communication

我做了很多研究，但我没有通过它，所以我不知道如何实现我的应用程序。该应用程序由 2 个以上的活动组成，其中包含应由后台服务更新的内容。所以我不知道如何进行连接，有人说我应该做 ipc，但其他人说那工作量太大，只要服务和活动在同一个进程中运行。我关心轻松创建像 ActivityOne.RefreshData(Data data) 这样的方法并在服务中调用这些方法，但直到现在我才设法让它工作。我希望你对我有一些建议，并为我糟糕的英语感到抱歉！

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T16:17:22.230

如果您只需要为自己的活动提供数据/更新，那么肯定不需要 IPC。

为了实现这一点，我将反转您似乎正在描述的方向，而不是让服务调用活动上的方法，让它在/如果它启动时将消息推送到活动提供给它的处理程序。

请参阅：http: [//developer.android.com/reference/android/os/Handler.html](http://developer.android.com/reference/android/os/Handler.html)

[http://mobileorchard.com/android-app-developmentthreading-part-1-handlers/](http://mobileorchard.com/android-app-developmentthreading-part-1-handlers/)

请注意，如果您需要从服务发送到 activites 始终是相同类型的对象，您可以通过使用 Message.obj 字段来保存您的类型来简化您的 handleMessage() 实现，而不用打扰 Bundles 或 parcelling。如：

处理程序 impl 在 NotificationModel 是服务始终发送的类型的活动中：

```
private Handler mNotificationListener = new Handler(){
     @Override
      public void handleMessage(Message msg) {
         handleIncomingNotification((NotificationModel)msg.obj);
         }
    }; 
```

将消息发布到此处理程序的服务端如下所示：

```
public class NotificationRouter {

    private Application mContext;
    private SparseArray<Handler> mListeners = new SparseArray<Handler>();

    public NotificationRouter (Application app){
    this.mContext = app;
    }

    public void registerListener(Handler handler){
    mListeners.put(handler.hashCode(), handler);
    }

    public void unRegisterListener(Handler handler){
    mListeners.remove(handler.hashCode());
    }

    public void post(NotificationModel notice){
    Message m = new Message();
    m.obj = notice;
    for (int i = 0; i < mListeners.size(); i++){
        Handler h = mListeners.valueAt(i);
        h.sendMessage(m);
    }
    }
} 
```

# android-asynctask - ProgressBar 多重显示

> ID：12123468
> 
> 赞同：0
> 
> 时间：2012-08-25T15:56:51.297
> 
> 标签：android-asynctask, progress-bar, android-progressbar

我有一个链接到刷新按钮的 AsyncTask（当我单击刷新按钮时，我的 AsyncTask 被调用）。

我在我的布局上有我的 ProgressBar 的 LinearLayout 字段：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@color/grey">
     <Button    android:id="@+id/refresh_p"
                android:text="@string/refresh_promo"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="@drawable/custom_button1"/>

   <LinearLayout android:id="@+id/linearlayoutProgressBar"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:gravity="center"/>
   <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:listSelector="@color/tabTransparent"
        android:cacheColorHint="#00000000"/>
      <!--   <ListView android:id="@+id/list_promo"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>-->
</LinearLayout> 
```

在我的 AsyncTask 中：

```
@Override
    protected void onPreExecute() 
    {
        super.onPreExecute();

        pb = new ProgressBar(context);
        LinearLayout ll = (LinearLayout) ((Activity) context).findViewById(R.id.linearlayoutProgressBar);
        ll.addView(pb);
        pb.setVisibility(View.VISIBLE);
    }

    @Override
    protected void onPostExecute(ArrayList<HashMap<String, String>> promoList) 
    {
        ...

        if (pb!=null) 
        {
            pb.setVisibility(View.GONE);
            ((LinearLayout)pb.getParent()).removeView(pb);
        }
    } 
```

我遇到的问题是，当我在刷新按钮上单击超过 2 次时，屏幕上会显示多个 ProgressBar。我只希望新的 ProgressBar 在同一位置替换旧的 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:15:19.677

我的猜测是您可能正在以类似于以下方式启动您的 AsyncTask：

```
new RefreshTask().execute(params); 
```

取而代之的是，在您的活动中创建一个实例变量。假设这被命名为 mTask 并将上面的代码替换为以下调用：

```
if(mTask != null && mTask.getState != AsyncTask.State.RUNNING){
    mTask = new RefreshTask();
    mTask.execute(params);
} 
```

这样，您将确保在给定时间只有一个任务实例在运行，并且用户必须等到刷新完成才能开始新的刷新。

如果您希望用户能够取消现有的刷新任务并运行新任务，则必须在开始新任务之前取消旧任务：

```
if(mTask != null){
    if(mTask.getStatus() == AsyncTask.Status.RUNNING){
         mTask.cancel(true);
    }
    mTask = new RefreshTask();
    mTask.execute(params);
} 
```

这样，旧任务及其 ProgressBar 将被新任务正确替换。

# java - 如何使用 box2d 在 libgdx 中拖动对象？

> ID：12123470
> 
> 赞同：2
> 
> 时间：2012-08-25T15:56:58.027
> 
> 标签：java, box2d, libgdx

我已将对象添加`box2d`到`libgdx`.
我想知道是否可以用鼠标拖动对象？如果是这样，怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T14:16:02.913

这里有几个选项。您可以使用鼠标关节，也可以使用运动体并手动设置其位置。如何使用鼠标关节的一个很好的例子看看这个：

[http://code.google.com/p/libgdx-backend-android-livewallpaper/source/browse/gdx-backend-android-livewallpaper-example/src/com/badlogic/gdx/tests/box2d/Box2DTest.java？ r=ba02aaf34a8ca07daa0c30493bab993067c652f9](http://code.google.com/p/libgdx-backend-android-livewallpaper/source/browse/gdx-backend-android-livewallpaper-example/src/com/badlogic/gdx/tests/box2d/Box2DTest.java?r=ba02aaf34a8ca07daa0c30493bab993067c652f9)

如果你想使用运动体，你可以这样做：

在渲染（）中：

body.setTransform(Gdx.input.getX(), Gdx.input.getY(), 角度);

然后你会说 body.getPosition() 来渲染你的精灵。或者，如果您正在使用将绘制您的身体的调试渲染器，但就像形状一样。

# php - php包含废墟页面布局

> ID：12123472
> 
> 赞同：-2
> 
> 时间：2012-08-25T15:57:33.860
> 
> 标签：php, css, require

我在 php 中遇到 require 或 include 函数的样式问题。每当我包含一个 php 文件时，即使该文件完全为空，所有页面都会向下移动一行，这会破坏页面顺序。我在包含文件后检查了源代码，似乎代码中没有任何变化。我真的很困惑，这怎么可能。我讨厌这个网络的东西。

这是一些代码。问题是这些包括在顶部。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <?php
    include('database.php');
    include('login.php');
    ?>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Web Design - Free CSS Templates</title>
    <meta name="keywords" content="free css templates, web design, 2-column, html css" />
    <meta name="description" content="Web Design is a 2-column website template (HTML/CSS) provided by templatemo.com" />
    <link href="templatemo_style.css" rel="stylesheet" type="text/css" />
    <!--////// CHOOSE ONE OF THE 3 PIROBOX STYLES  \\\\\\\-->
    <link href="css_pirobox/white/style.css" media="screen" title="shadow" rel="stylesheet" type="text/css" />
    <!--<link href="css_pirobox/white/style.css" media="screen" title="white" rel="stylesheet" type="text/css" />
    <link href="css_pirobox/black/style.css" media="screen" title="black" rel="stylesheet" type="text/css" />-->
    <!--////// END  \\\\\\\-->
    </head>
    <body>

    <div id="templatemo_body_wrapper">
    <div id="templatemo_wrapper">

<div id="tempaltemo_header">
    <span id="header_icon"></span>
    <div id="header_content">
        <div id="site_title">
            <a href="http://www.templatemo.com" target="_parent"><img src="images/templatemo_logo.png" alt="LOGO" /></a>            </div>
        <p>This is a free CSS website layout from templatemo.com website.  Feel free to edit and apply for your websites. Duis vitae velit sed dui malesuad mollis aliquet ligula.</p>
      <a href="#" class="detail float_r">Detail</a>
    </div>
</div> <!-- end of header --> 
```

浏览器看到的模板源代码：[http ://www.text-upload.com/read,4081536104820](http://www.text-upload.com/read,4081536104820)

我编辑的代码（除了包含部分没有编辑）：[http ://www.text-upload.com/read,4081542128884](http://www.text-upload.com/read,4081542128884)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T16:43:25.507

您是否有机会将文件保存为带有 BOM 的 UTF-8 格式？即使是该编码中的“空”文件也将具有字节顺序标记，这将导致布局中出现空白空间。

要么使用单字节字符集，要么确保保存为不带 BOM 的 UTF-8。

# php - 使用 ajax 从 javascript/jquery 调用 php 函数

> ID：12123473
> 
> 赞同：0
> 
> 时间：2012-08-25T15:57:34.343
> 
> 标签：php, javascript, jquery, html, ajax

抱歉，我对 AJAX 很陌生，虽然有很多例子，但我很难理解。如果你能帮我解决我的具体例子，我将不胜感激。AJAX 语法对我来说很奇怪。无论如何，我正在验证 javascript 中的联系表格。如果每个字段都有值，那么它就是调用页面中包含的php函数来发送电子邮件。有人可以告诉我如何做到这一点并解释它吗？我对 AJAX 的工作方式感到非常困惑。服务器/客户端的区别？对不起。谢谢你。这是我的代码（不使用 AJAX 失败）：

```
<?php 
        require_once("mail.php");
    ?>
    <script language='Javascript' type='text/javascript'>
        function validation(){
            var name = document.getElementById('name').value;
            var email = document.getElementById('email').value;
            var phone = document.getElementById('phone').value;             
            var subject = document.getElementById('subject').value;
            var message = document.getElementById('message').value;

            if (name == '') {   
                alert('Please enter your name.');
                location.reload(false);
            }
            else {
                if (email == '') {
                    alert('Please enter your email.');
                    location.reload(false);
                }
                else {
                    if (phone == '') {
                        alert('Please enter your phone number.');
                        location.reload(false);
                    }
                    else {
                        if (subject == '') {
                            alert('Please enter a subject.');
                            location.reload(false);
                        }
                        else {
                            if (message == '') {
                                alert('Please enter a message.');
                                location.reload(false);
                            }
                            else {
                                var send = confirm('Name: ' + name + '\r\nEmail: ' + email + '\r\nPhone: ' + phone + 'Subject: ' + subject + '\r\nMessage:\r\n' + message + '\r\nPress [Ok] to send or [Cancel] to return to the contact page.');
                                if (send) {
                                    window.location='';
                                }
                                else {
                                    location.reload(false);
                                }
                            }
                        }
                    }
                }
            }
        }
    </script> 
```

我知道 javascript 工作到我需要调用 php sendmail() 函数的部分。感谢您的帮助和支持！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T16:05:29.250

Javascript 在客户端（浏览器）上执行，PHP 在服务器端执行。所以你不能从 javascript 调用服务器端函数；您必须使用 HTTP get/post 将您的客户端数据（电子邮件、电话等）发送到服务器（使用 AJAX、FORMS 或您想要的任何东西），然后当您的服务器端 PHP 脚本接收到数据时，您可以准备要发送的邮件并调用 sendmail() 函数。

# java - 如何在具有空布局的面板内设置面板的大小？

> ID：12123474
> 
> 赞同：1
> 
> 时间：2012-08-25T15:57:46.287
> 
> 标签：java, swing, null-layout-manager, setbounds

我有一个使用空布局的主面板，我想在其中添加三个面板，但我希望这三个面板在加载主面板时自动调整大小。我不能使用布局管理器，因为我将拖动这三个面板。

我试过这段代码，但它不起作用

```
pnlGrid.setBounds(514,11, pnlMain.this.getWidth()/3, pnlMain.this.getHeight()); 
```

我也试过

```
pnlGrid.setPreferredSize(new Dimension(pnlMain.this.getWidth()/3, pnlMain.this.getHeight())); 
```

但还是不好。请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T16:27:15.757

使用[MigLayout](http://www.miglayout.com/)并`ComponentRestraints`在拖动每个面板时更新。这样你就可以准确地控制它们的位置和边界。

例如：

```
MigLayout layout;

public Constructor(){
   layout = new MigLayout();
   ...
   container.setLayout(layout);
}

public void onMouseDrag(JPanel panel, int newX, int newY){
   layout.setComponentConstraints(panel, "pos " + newX + " " + newY + ", w 100%/3, h 100%");
   container.validate(); // probably not necessary
} 
```

# android - android计算器：记忆功能

> ID：12123475
> 
> 赞同：0
> 
> 时间：2012-08-25T15:58:06.117
> 
> 标签：android, android-edittext, calculator

我目前正在设计一个 android 计算器应用程序，目前正在研究内存部分。如果内存不为零，我想显示“内存已保存”的措辞。

内存计算部分可以运行，但是，一旦我添加如下的措辞部分，它就会崩溃。它不能完全启动。为什么？

```
EditText Memorydisplay;
ArrayList<Double> tempfigure = new ArrayList<Double>(); 
    double tempfigure1;
    double memory1 = 0; 
```

...

```
Memorydisplay = (EditText) findViewById(R.id.memoryEditText);   
        mplus = (TextView) findViewById(R.id.Mplus); 
        mminus = (TextView) findViewById(R.id.Mdeduct); 
        mclear = (TextView) findViewById(R.id.MC); 
        mrecall = (TextView) findViewById(R.id.MR);

        mplus.setOnClickListener(new View.OnClickListener() {            
            @Override 
            public void onClick(View v) { 
                tempfigure.add(Double.parseDouble(Display.getText().toString())); 
                memory1=memory1+tempfigure.get(0); 
                tempfigure1=0;
                tempfigure.removeAll(tempfigure); 
                Display.setText("0"); 
                if (memory1 >0) { Memorydisplay.setText("Memory saved");}
            } 
        });

        mminus.setOnClickListener(new View.OnClickListener() {           
            @Override 
            public void onClick(View v) { 
                tempfigure.add(Double.parseDouble(Display.getText().toString())); 
                memory1=memory1-tempfigure.get(0);
                tempfigure1=0;
                tempfigure.removeAll(tempfigure); 
                Display.setText("0");
                if (memory1 >0) { Memorydisplay.setText("Memory saved");}
            } 
        });

        mclear.setOnClickListener(new View.OnClickListener() {           
            @Override 
            public void onClick(View v) { 
                memory1=0;
                tempfigure1=0;
                tempfigure.removeAll(tempfigure); 
                Display.setText("0"); 
                if (memory1 >0) { Memorydisplay.setText("Memory saved");}
            } 
        });

        mrecall.setOnClickListener(new View.OnClickListener() {          
            @Override 
            public void onClick(View v) { 
                Display.setText(""+memory1); 
                if (memory1 >0) { Memorydisplay.setText("Memory saved");}
            } 
        }); 
```

**提取的Logcat：**

```
08-23 21:37:31.364: W/dalvikvm(2207): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
08-23 21:37:31.374: E/AndroidRuntime(2207): FATAL EXCEPTION: main
08-23 21:37:31.374: E/AndroidRuntime(2207): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.pearmak.jm7_calculator/com.pearmak.jm7_calculator.MainActivity}: java.lang.ClassCastException: android.widget.TextView cannot be cast to android.widget.EditText
08-23 21:37:31.374: E/AndroidRuntime(2207):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
08-23 21:37:31.374: E/AndroidRuntime(2207):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
08-23 21:37:31.374: E/AndroidRuntime(2207):     at android.app.ActivityThread.access$600(ActivityThread.java:122)
08-23 21:37:31.374: E/AndroidRuntime(2207):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
08-23 21:37:31.374: E/AndroidRuntime(2207):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-23 21:37:31.374: E/AndroidRuntime(2207):     at android.os.Looper.loop(Looper.java:137)
08-23 21:37:31.374: E/AndroidRuntime(2207):     at android.app.ActivityThread.main(ActivityThread.java:4340)
08-23 21:37:31.374: E/AndroidRuntime(2207):     at java.lang.reflect.Method.invokeNative(Native Method)
08-23 21:37:31.374: E/AndroidRuntime(2207):     at java.lang.reflect.Method.invoke(Method.java:511)
08-23 21:37:31.374: E/AndroidRuntime(2207):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-23 21:37:31.374: E/AndroidRuntime(2207):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-23 21:37:31.374: E/AndroidRuntime(2207):     at dalvik.system.NativeStart.main(Native Method)
08-23 21:37:31.374: E/AndroidRuntime(2207): Caused by: java.lang.ClassCastException: android.widget.TextView cannot be cast to android.widget.EditText
08-23 21:37:31.374: E/AndroidRuntime(2207):     at com.pearmak.jm7_calculator.MainActivity.onCreate(MainActivity.java:88)
08-23 21:37:31.374: E/AndroidRuntime(2207):     at android.app.Activity.performCreate(Activity.java:4465)
08-23 21:37:31.374: E/AndroidRuntime(2207):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
08-23 21:37:31.374: E/AndroidRuntime(2207):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
08-23 21:37:31.374: E/AndroidRuntime(2207):     ... 11 more
08-23 21:37:39.748: I/Process(2207): Sending signal. PID: 2207 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T17:09:09.030

您正在将 TextView 转换为 EditText ，因此出现异常。

您必须已初始化`Memorydisplay`为 TextView。

您需要**`EditText Memorydisplay;`**在定义中将其更改为。

**注意**：上面的代码应该可以解决你的问题，但我不明白为什么你需要一个 EditText 来显示内存状态。一个 TextView 应该足够了。为什么不使用下面的代码？

```
TextView Memorydisplay;
Memorydisplay = (TextView) findViewById(R.id.memoryTextView); 
```

无论如何，这是你的选择。祝你好运！:)

# java - JScrollBar 不做任何事情

> ID：12123476
> 
> 赞同：1
> 
> 时间：2012-08-25T15:58:18.360
> 
> 标签：java, swing, layout-manager, jscrollbar, null-layout-manager

我正在尝试将垂直 JScrollBar 放在 JPanel 之上。我可以很容易地添加 scoll 条，但是当我运行程序时，我的滚动条没有任何效果。我可以上下拖动它，但 JPanel 的内容不动。我已经阅读了所有我能找到的关于如何做到这一点的内容，这看起来很简单，但我显然遗漏了一些东西。

请注意，我的 JPanel 布局设置为 NULL。这是相关的代码。谢谢！

```
public JDlgResults(ArrayList<AnsweredProblem> probList) {
    initComponents();
    pnlResults.setLayout(null); //allows free form placing of JLabels

    /* Iterate over the ArrayList and add each problem to the results table */
    Iterator iter = probList.iterator();
    int row = 1;

    while(iter.hasNext()) {
        addRow(row, iter.next());
        row++;
    }

    JScrollBar jScrollResults = new javax.swing.JScrollBar();
    pnlResults.add(jScrollResults);
    jScrollResults.setBounds(590, 0, 17, 196);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T16:03:34.997

这是设计使然。如果滚动条神奇地试图拿起附近的面板并开始滚动它们，那将是一种糟糕的事情。

在较低级别上，您可以将侦听器添加到滚动条并自己实现滚动。您还必须告诉滚动条要滚动多少。

然而，这不是你想要的。您想要一个环绕面板的 JScrollPane。这样，您永远不会直接实例化滚动条，也不必处理滚动的低级机制（这非常复杂）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T16:10:05.687

我假设您的`initComponents()`方法设置了一堆组件并将它们添加到您的 contentPane 并建立您的对话框（无论是对话框还是框架）。

简单地将您添加`JScrollPane`到该面板不会成功。

相反，将您添加`pnlResults`到`JScrollPane`实例并使其成为*您*的 contentPane。

# mysql - SQL：搜索/替换，但仅在值第一次出现在记录中时

> ID：12123477
> 
> 赞同：13
> 
> 时间：2012-08-25T15:58:21.583
> 
> 标签：mysql, sql, sql-update, replace

我在 post_content 列中有 html 内容。

我想用 B 搜索和替换 A，但只有 A 第一次出现在记录中，因为它可能出现不止一次。

下面的查询显然会用 B 替换 A 的所有实例

`UPDATE wp_posts SET post_content = REPLACE (post_content, 'A', 'B');`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-25T16:07:55.633

这实际上应该是您在 MySQL 中想要的：

```
UPDATE wp_post
SET post_content = CONCAT(REPLACE(LEFT(post_content, INSTR(post_content, 'A')), 'A', 'B'), SUBSTRING(post_content, INSTR(post_content, 'A') + 1)); 
```

它比我之前的答案稍微复杂一些 - 您需要找到“A”的第一个实例（使用 INSTR 函数），然后将 LEFT 与 REPLACE 结合使用来替换该实例，而不是使用 SUBSTRING 和 INSTR 找到相同的实例'A' 您正在替换并用前一个字符串连接它。

请参阅下面的测试：

```
SET @string = 'this is A string with A replace and An Answer';
SELECT @string as actual_string
, CONCAT(REPLACE(LEFT(@string, INSTR(@string, 'A')), 'A', 'B'), SUBSTRING(@string, INSTR(@string, 'A') + 1)) as new_string; 
```

产生：

```
actual_string                                  new_string
---------------------------------------------  ---------------------------------------------
this is A string with A replace and An Answer  this is B string with A replace and An Answer 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-25T17:58:46.713

或者，您可以像这样使用函数[LOCATE()](http://dev.mysql.com/doc/refman/en/string-functions.html#function_locate "定位（）（MySQL）")、[INSERT()](http://dev.mysql.com/doc/refman/en/string-functions.html#function_insert "插入（）（MySQL）")和[CHAR_LENGTH()](http://dev.mysql.com/doc/refman/en/string-functions.html#function_char-length "CHAR_LENGTH() (MySQL)")：

```
INSERT(originalvalue, LOCATE('A', originalvalue), CHAR_LENGTH('A'), 'B') 
```

完整查询：

```
UPDATE wp_posts
SET post_content = INSERT(originalvalue, LOCATE('A', originalvalue), CHAR_LENGTH('A'), 'B'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-08T10:13:05.490

参考[https://dba.stackexchange.com/a/43919/200937](https://dba.stackexchange.com/a/43919/200937)这里是另一种解决方案：

```
UPDATE wp_posts 
SET post_content = CONCAT( LEFT(post_content , INSTR(post_content , 'A') -1),
                           'B',
                           SUBSTRING(post_content, INSTR(post_content , 'A') +1))
WHERE INSTR(post_content , 'A') > 0; 
```

如果您有另一个字符串，例如，`testing`那么您需要将`+1`上面的内容更改为相应的字符串长度。我们可以`LENGTH()`用于此目的。顺便说一句，不要`-1`动。

示例：将“testing”替换为“whatever”：

```
UPDATE wp_posts 
SET post_content = CONCAT( LEFT(post_content , INSTR(post_content , 'testing') -1),
                           'whatever',
                           SUBSTRING(post_content, INSTR(post_content , 'testing') + LENGTH("testing"))
WHERE INSTR(post_content , 'testing') > 0; 
```

顺便说一句，有助于查看将影响多少行：

```
SELECT COUNT(*)
FROM post_content 
WHERE INSTR(post_content, 'A') > 0; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T16:07:22.970

如果您使用的是 Oracle DB，您应该能够编写如下内容：

```
UPDATE wp_posts SET post_content = regexp_replace(post_content,'A','B',1,1) 
```

有关更多信息，请参见此处：http: [//docs.oracle.com/cd/B19306_01/server.102/b14200/functions130.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions130.htm)

注意：您确实应该注意`post_content`安全问题，因为它似乎是用户输入。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-01T21:58:50.883

由于 REPLACE() 的编写方式（仅替换要替换的字符串的第一个字符），Greg Reda 的解决方案不适用于长度超过 1 个字符的字符串。这是一个我认为更完整的解决方案，并且涵盖了问题的每个用例，定义为*如何在“String C”中将“String A”的第一次出现替换为“String B”？*

```
CONCAT(LEFT(buycraft, INSTR(buycraft, 'blah') - 1), '', SUBSTRING(buycraft FROM INSTR(buycraft, 'blah') + CHAR_LENGTH('blah'))) 
```

这假设您确定条目已经包含要*替换的字符串*！如果您尝试将字符串 'pupper' 中的 'dog' 替换为 'cat'，它会给你 'per'，这不是你想要的。这是一个通过首先检查要替换的字符串是否存在于完整字符串中来处理该问题的查询：

```
IF(INSTR(buycraft, 'blah') <> 0, CONCAT(LEFT(buycraft, INSTR(buycraft, 'blah') - 1), '', SUBSTRING(buycraft FROM INSTR(buycraft, 'blah') + CHAR_LENGTH('blah'))), buycraft) 
```

这里的具体用例是用空字符串 '' 替换列 'buycraft' 中的第一个 'blah' 实例。我认为一个非常直观和自然的解决方案：

1.  查找要替换的字符串第一次出现的索引。
2.  获取左侧的所有内容，不包括索引本身（因此为'-1'）。
3.  将其与您要替换原始字符串的任何内容连接起来。
4.  计算要替换的字符串部分的结束索引。这很容易通过再次找到第一次出现的索引并添加替换字符串的长度来完成。这将为您提供原始字符串之后的第一个字符的索引
5.  从字符串的结束索引开始连接子字符串

将“lil_puppers_yay”中的“pupper”替换为“dog”的示例演练：

1.  'pupper' 的索引是 5。
2.  从 5-1 = 4 向左。所以索引 1-4，即 'lil_'
3.  为“lil_dog”连接“狗”
4.  计算结束索引。起始索引为 5，并且 5 + 'pupper' 的长度 = 11。请注意，索引 11 指的是 's'。
5.  连接从结束索引开始的子字符串，即“s_yay”，以获得“lil_dogs_yay”。

全部做完！

**注意：** SQL 有 1-indexed 字符串（作为一个 SQL 初学者，在我发现这个问题之前我并不知道这一点）。此外，SQL LEFT 和 SUBSTRING 似乎以理想的方式使用无效索引（将其调整为字符串的开头或结尾），这对于像我这样的初学者 SQLer 来说非常方便：P

**另一个注意事项：**我是 SQL 的初学者，这几乎是我写过的最难的查询，所以可能会有一些效率低下。不过，它可以准确地完成工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-21T19:59:28.390

我做了以下小功能并得到了它：

```
CREATE DEFINER=`virtueyes_adm1`@`%` FUNCTION `replace_first`(
    `p_text` TEXT,
    `p_old_text` TEXT,
    `p_new_text` TEXT

)
RETURNS text CHARSET latin1
LANGUAGE SQL
NOT DETERMINISTIC
CONTAINS SQL
SQL SECURITY DEFINER
COMMENT 'troca a primeira ocorrencia apenas no texto'
BEGIN
    SET @str = p_text;
    SET @STR2 = p_old_text;
    SET @STR3 = p_new_text;
    SET @retorno = '';

    SELECT CONCAT(SUBSTRING(@STR, 1 , (INSTR(@STR, @STR2)-1 ))
                ,@str3
                  ,SUBSTRING(@STR, (INSTR(@str, @str2)-1 )+LENGTH(@str2)+1 , LENGTH(@STR)))
    INTO @retorno;

    RETURN @retorno;    
END 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-07T04:35:29.943

它更简单

```
UPDATE table_name SET column_name = CONCAT('A',SUBSTRING(column_name, INSTR(column_name, 'B') + LENGTH('A'))); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-23T15:07:35.567

自从提出这个问题以来已经过去了很多年，MySQL 8 引入了[REGEX_REPLACE](https://dev.mysql.com/doc/refman/8.0/en/regexp.html#function_regexp-replace)：

> **REGEXP_REPLACE(expr, pat, repl[, pos[,occurrence[, match_type]]])**
> 
> 用替换字符串 repl 替换字符串 expr 中匹配由模式 pat 指定的正则表达式的匹配项，并返回结果字符串。如果 expr、pat 或 repl 为 NULL，则返回值为 NULL。
> 
> **REGEXP_REPLACE()**采用这些可选参数：
> 
> **pos** : expr 中开始搜索的位置。如果省略，则默认为
> **1。occurrence**：要替换的匹配项。如果省略，则默认值为 0（表示“替换所有匹配项”）。
> **match_type**：指定如何执行匹配的字符串。含义如 REGEXP_LIKE() 所述。

因此，假设您可以在您的情况下使用正则表达式：

```
UPDATE wp_posts SET post_content = REGEXP_REPLACE (post_content, 'A', 'B', 1, 1); 
```

* * *

不幸的是，对于我们这些使用 MariaDB 的人来说，它的**REGEXP_REPLACE**风格缺少*出现*参数。[这是Andriy M](https://stackoverflow.com/users/297408/andriy-m)解决方案的正则表达式感知版本，按照[Luciano Seibel](https://stackoverflow.com/users/6644491/luciano-seibel)的建议，方便地存储为可重用函数：

```
DELIMITER //
DROP FUNCTION IF EXISTS replace_first //
CREATE FUNCTION `replace_first`(
    `i` TEXT,
    `s` TEXT,
    `r` TEXT
)
RETURNS text CHARSET utf8mb4
BEGIN
    SELECT REGEXP_INSTR(i, s) INTO @pos;
    IF @pos = 0 THEN RETURN i; END IF;
    RETURN INSERT(i, @pos, CHAR_LENGTH(REGEXP_SUBSTR(i, s)), r);
END;
//
DELIMITER ; 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-11-12T09:29:27.533

要使 gjreda 的示例更简单，请使用以下命令：

```
UPDATE wp_post
    SET post_content =
            CONCAT(
                REPLACE(LEFT(post_content, 1), 'A', 'B'),
                SUBSTRING(post_content, 2)
            ) 
    WHERE post_content LIKE 'A%'; 
```

# asp.net - 使用 .NET 4.5 的 ASP.Net 成员资格和实体框架迁移问题

> ID：12123478
> 
> 赞同：5
> 
> 时间：2012-08-25T15:59:01.090
> 
> 标签：asp.net, .net, entity-framework-4, membership, visual-studio-2012

我正在学习 Entity Framework 中可用的迁移功能，但我似乎遇到了问题。当使用互联网应用程序项目模板并启用实体框架迁移等时。我试图在数据库上创建一个默认用户 - 使用自动迁移：

```
protected override void Seed(eManager.Web.Infrastructure.DepartmentDb context)
{            
   WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "Email", false);

    if (!WebSecurity.UserExists("ahicks2"))
    {
        WebSecurity.CreateAccount("ahicks2", "password", requireConfirmationToken:true);
    }

    if (!Roles.RoleExists("Admin"))
    {
        Roles.CreateRole("Admin");
    }
} 
```

当我在包管理器中运行“Update-Database -verbose”时，出现以下错误：

> 运行种子方法。System.Web.Security.MembershipCreateUserException：提供程序遇到未知错误。
> 
> 在 WebMatrix.WebData.SimpleMembershipProvider.CreateAccount(String userName, String password, Boolean requireConfirmationToken) 在 WebMatrix.WebData.WebSecurity.CreateAccount(String userName, String password, Boolean requireConfirmationToken)

堆栈跟踪中的下一行是`Configuration.Seed`调用。在我的 web 配置中，我使用以下成员资格提供程序设置来保证在我想要的数据库中创建表：

```
<membership defaultProvider="DefaultMembershipProvider">
    <providers>
        <clear/>
        <add name="DefaultMembershipProvider" 
             type="WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
             connectionStringName="DefaultConnection"/> 
```

数据库表正在正确创建，但代码落在创建用户身上。任何人都可以帮忙吗？我敢肯定它很简单。我想测试这些功能——当然，一个简单的答案是从 asp.net 2.0 恢复使用会员提供程序！但我想尝试让它发挥作用。任何帮助，将不胜感激。

编辑：顺便说一句，我试过这个：[http](http://forums.asp.net/t/1598261.aspx/1) ://forums.asp.net/t/1598261.aspx/1并没有解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T20:47:39.710

答案就在表面上。查看有关此方法的 MSDN 页面： [WebSecurity.CreateAccount Method](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity.createaccount%28v=vs.111%29)

*它假定用户配置文件表中已经存在匹配的用户信息（由 userName 表示）。（要在成员资格表和用户配置文件表中创建新用户，请使用 CreateUserAndAccount(String, String, Object, Boolean) 方法。）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:12:41.640

这对我有用：

```
WebMatrix.WebData.WebSecurity.CreateUserAndAccount("YOURUSERNAME", "YOURPASSWORD"); 
```

您可能还希望考虑确保控制器/类具有

```
[InitializeSimpleMembership] 
```

我正在尝试做与您类似的事情并苦苦挣扎！

我在创建角色方面失败了。

担。

# visual-studio-2010 - 使用 Qt Creator 设置 OpenCV 2.4.2

> ID：12123479
> 
> 赞同：4
> 
> 时间：2012-08-25T15:59:06.957
> 
> 标签：visual-studio-2010, qt, opencv, qt-creator

我尝试了两种方法来使用 opencv 和 qt creator 第一个使用 Mingw，其中 dll 和 .dll.a 文件已经与 opencv 库一起下载，我只是在 .pro 文件中添加对 .dll.a 文件的引用，如下所示

```
INCLUDEPATH += D:\\OpenCV\\opencv\\build\\include
LIBS += D:\\OpenCV\\opencv\\build\\x64\\mingw\\lib\\libopencv_calib3d242.dll.a
LIBS += D:\\OpenCV\\opencv\\build\\x64\\mingw\\lib\\libopencv_contrib242.dll.a
LIBS += D:\\OpenCV\\opencv\\build\\x64\\mingw\\lib\\libopencv_core242.dll.a
LIBS += D:\\OpenCV\\opencv\\build\\x64\\mingw\\lib\\libopencv_features2d242.dll.a 
```

我有一个简单的代码来测试opencv：

```
#include <QtCore/QCoreApplication>
#include <opencv/cv.h>

using namespace cv;

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    Mat image;

    return a.exec();
} 
```

但我遇到了如下构建问题

> C:\Users\Kato\Documents\QT projects\QtOpenCVYaRab\debug\main.o:-1: 在函数`~Mat': d:\OpenCV\opencv\build\include\opencv2\core\mat.hpp:278: error: undefined reference to`cv::fastFree(void*)' d:\OpenCV\opencv\build\include\opencv2\core\mat .hpp:367：错误：未定义对 `cv::Mat::deallocate()' 的引用：-1：错误：collect2：ld 返回 1 个退出状态

这是一些编译输出：

```
Running build steps for project QtOpenCVYaRab...
Configuration unchanged, skipping qmake step.
Starting: "C:\QtSDK\mingw\bin\mingw32-make.exe" 
C:/QtSDK/mingw/bin/mingw32-make -f Makefile.Debug
mingw32-make[1]: Entering directory `C:/Users/Kato/Documents/QT projects/QtOpenCVYaRab'
g++ -c -g -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL

 d:/OpenCV/opencv/build/include/opencv2/core/mat.hpp:278: undefined reference to `cv::fastFree(void*)'
debug/main.o:d:/OpenCV/opencv/build/include/opencv2/core/mat.hpp:367: undefined reference to `cv::Mat::deallocate()'
collect2: ld returned 1 exit status
mingw32-make[1]: *** [debug\QtOpenCVYaRab.exe] Error 1
mingw32-make: *** [debug] Error 2
The process "C:\QtSDK\mingw\bin\mingw32-make.exe" exited with code 2.
Error while building project QtOpenCVYaRab (target: Desktop)
When executing build step 'Make' 
```

第二种方法是使用 cmake 编译 opencv 库，使用 Visual Studio 2010 构建它并添加对 bin 文件夹中文件的引用，但我遇到了几乎相同的构建问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T14:12:41.443

```
#include "iostream"
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>

using namespace cv;
using namespace std;

int main()
{
    IplImage *image = cvLoadImage("C:\\lena.jpg");
    Mat im(image);
    imshow("TEST",im);
    waitKey();
    return 0;
} 
```

这是你的 main.cpp ......上面的程序显示了 lena 的图片......使用双反斜杠来指示 Windows 平台上的目录更改...... imread 对我的工作方式，所以我将图像加载为 IplImage并将其投射到 Mat...u cn 也执行以下操作..

```
 IplImage *image = cvLoadImage("C:\\lena.jpg",1);
 cvShowImage("TEST",image);
 cvWaitKey(); 
```

如前所述，您的 .pro 文件应包含以下几行...

```
INCLUDEPATH += D:\OpenCV\opencv\build\include

LIBS +=-LD:\OpenCV\opencv\build\x64\mingw\lib\
-lopencv_core242\
-lopencv_highgui242\
-lopencv_imgproc242\
-lopencv_video242\ 
```

并且您的系统变量名为 path 应该有

1.  D:\Opencv2.4.2\opencv\build\x86\vc9\bin （如果你有 Qt 4.8.1 for desktop MSVC2008 (QtSDK) Debug 作为你的目标）
2.  D:\Opencv2.4.2\opencv\build\x86\mingw\bin （如果你的目标是基于 Qt MinGW x86 ）
3.  D:\OpenCV2.4.2\opencv\build\common\tbb\ia32\vc9(mingw) （我添加了这个，因为它显示了一些奇怪的错误......你可以试试）

编辑路径变量后关闭 Qt ide/应用程序并重新启动它以使系统变量更改得到反映..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T13:41:43.537

```
INCLUDEPATH += D:\OpenCV\opencv\build\include

LIBS +=-LC:\OpenCV\opencv\build\x64\mingw\lib\
-lopencv_core242\
-lopencv_highgui242\
-lopencv_imgproc242\
-lopencv_video242\

#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>

using namespace cv;

int main()
{
} 
```

如果您将其作为控制台应用程序运行，则无需包含 QtCore/QtApplication

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T19:37:19.663

您必须使用 -L 指定库路径，然后使用添加库文件

```
-l<libname_without_extension> 
```

对于 unix（安装在默认位置）：

```
unix: LIBS += -lopencv_core
unix: LIBS += -lopencv_highgui 
```

对于 Windows（您的问题）：

```
win32: LIBS += -L C:\OpenCV2.3\opencv\build\gpu\x64\lib\ -lopencv_core231 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T07:23:22.650

从提到的错误来看，Opencv 库似乎缺少一些文件/组件。请从 Opencv 的简单程序开始。该程序仅显示相机图像。

请按照给定的链接。

[http://linux.softpedia.com/get/Multimedia/Graphics/qwebcam-38246.shtml](http://linux.softpedia.com/get/Multimedia/Graphics/qwebcam-38246.shtml)

下载 qwebcam 的源代码并按照说明设置 Opencv。这是一个非常简单的源代码并且工作正常（在 Linux-os 上测试）。

我最近尝试过使用 Opencv 并且这个链接对我来说非常有用。

希望您能够通过此代码解决您的错误。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-08-19T06:15:43.363

我遇到了同样的问题，但手动更改 .pro 对我不起作用。最终，我找到了一个将 openCV 连接到 Qt 的简单解决方案。我发布了一些其他线程，[https://stackoverflow.com/a/51914928/10245006](https://stackoverflow.com/a/51914928/10245006)并包含以下信息。

下面列出的步骤可在 Qt5 文档中找到：[ [http://doc.qt.io/qtcreator/creator-project-qmake-libraries.html][1]](http://doc.qt.io/qtcreator/creator-project-qmake-libraries.html][1])在“添加库”部分下。

1.  右键单击位于创建者左侧“项目窗格”中的项目文件...并选择“添加库...”
2.  按照向导的说明进行操作

让我从这里添加一些特异性......

3.  选择“外部库”
4.  对于“库文件”，导航到您的 opencv_worldXXX.lib 文件（或 opencv_worldXXXd.lib 文件，您会注意到，通过仅指定一个或另一个，向导有一个自动包含另一个的复选框）**[例如。...\opencv\build\x64\vc12\lib\opncv_world310.lib]**
5.  对于“包含文件夹”，导航到构建中的“包含”文件夹。**[前任。...\opencv\build\include]**
6.  选择您的操作系统、动态/静态库（以适当者为准）
7.  点击下一步，清理并运行！

# c - 如何将一维和二维数组参数传递给c中的函数

> ID：12123480
> 
> 赞同：0
> 
> 时间：2012-08-25T15:59:07.737
> 
> 标签：c, arrays, argument-passing

假设我有一个函数 ,`int function(int N, int c[N]){...}`以整数和数组作为参数。假设现在我有一个`**c`大小为“N 乘以 2”的双精度数组，并假设我想将该函数`function`应用于双箭头的一列，`c[i][0]`从`i`N-1 变化。我应该如何使用这个功能。它看起来像`function(N,*c[0])`吗？

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T16:08:34.253

在 c 语言中，对于单维数组，在将数组传递给该函数时，您无需在函数参数中提及数组的大小。

如果是一维数组

```
...
int a[10];
func(10, a);
...
void func(int size, int x[]) //no need to mention like int x[10]
{
    //here x is not an array. Its equivalent to int *
    printf("%d", sizeof(x)); // this will print 4 or 8 not 40
} 
```

如果是二维数组

```
...
int a[10][5];
func (10, a);
...

void (int rows, int x[][5])   //here int x[][] is invalid
{

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T21:00:04.353

C 中的数组在传递给函数时总是衰减为指向其第一个元素的指针。在某些情况下很高兴知道这一点。

例如，你可以写

```
int list[10];
func (int *x) {
    int i;
    for (i = 0; i < 10; i++) {
         printf("%d", x[i]);
    }
 } 
```

x[i] 实际上只是语法糖。在 C 中，当您使用括号表示法访问数组元素时，它会转换为 *(x + i)，其中 x 是数组的名称。

这是因为指针算法而起作用的。如果 x 是 10 个整数数组的名称，则表达式中 x 的值就是数组的第一个整数的地址。

x + i 将始终指向 x 之后的第 i 个元素（C 会考虑存储在数组中的元素类型的大小，并相应地递增指针）。

因此，当传递二维数组时，数组衰减为指向其第一个元素的指针 - 这是一个数组。

采用二维数组的函数签名可以写成

```
func(int x[][columns] {
      ...
} 
// but could also be written as

func(int (*x)[columns]) {
    ...
} 
```

这表明 x 是一个指向整数数组的指针。

有时您需要编写一个函数来接受一个二维数组，其中宽度直到运行时才知道。在这种情况下，您可以传递一个指向 [0][0] 元素的指针，同时传递两个维度，然后使用指针算法得到正确的元素。例如，

```
print_2d_array (int *x, height, width) {
    int i, j;
       for (i = 0; i < height; i++) {
         for (j = 0; j < width; j++) {
            printf("%d", x[i * width + j]);
         }
     }
}

int list[10][10];
print_2d_array (&list[0][0], 10, 10); 
```

适用于动态分配的二维数组。

# firefox - ColdFusion ColdFire 项目死了吗？

> ID：12123496
> 
> 赞同：0
> 
> 时间：2012-08-25T16:01:11.503
> 
> 标签：firefox, coldfusion, firebug, coldfire

[http://coldfire.riaforge.org/](http://coldfire.riaforge.org/)

我无法让当前版本 (1.9.207.249) 与 Firefox 14.0.1 和 Firebug 1.10.2 一起使用。

我认为它已损坏，因为该插件尚未针对 Firebug 1.10 的发布进行更新。

有没有人使用这些设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T01:49:59.180

基于此，我将假设它还活着。也许试试 Chrome 版本？

[http://www.raymondcamden.com/index.cfm/2012/8/24/First-release-of-ColdFire-for-Chrome](http://www.raymondcamden.com/index.cfm/2012/8/24/First-release-of-ColdFire-for-Chrome)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T17:10:20.287

ColdFire 的新版本发布了，它应该可以与 Firefox 15/Firebug 1.10 一起使用。

[https://github.com/nmische/ColdFire/downloads](https://github.com/nmische/ColdFire/downloads)

# html - 基本 html 方法：我应该使用哪些元素来构建视图

> ID：12123497
> 
> 赞同：0
> 
> 时间：2012-08-25T16:01:12.227
> 
> 标签：html, twitter-bootstrap

这是如何在引导程序中构建一个 2 列视图的后续问题，[顶部有大的文本区域](https://stackoverflow.com/questions/12116007/how-to-build-a-2-column-view-in-bootstrap-with-large-textarea-on-top)。

我很欣赏这些答案，但我对 HTML 没有经验，所以我需要在这里问一个基本问题：我正在尝试制作一个视图（我将从数据库中填充），而不是一个表单。我应该使用输入元素还是其他一些 html 元素？我不希望用户可以更改视图字段。我可能会再次尝试制作这样的表格：

```
<textarea rows="2" cols="30">

</textarea>
<table border="none">
<tr>
<td><input type="text" name="field1" /></td>
<td><input type="text" name="field2" /></td>
</tr>
<tr>
<td><input type="text" name="field3" /></td>
<td><input type="text" name="field4" /></td>
</tr>
</table> 
```

提前致谢 ，

账单

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T08:52:51.713

如果我对您的理解正确，您想从数据库中加载一些数据，例如（用户详细信息或其他什么），并且您想将其显示给用户但不希望它修改它？

**所以基本上，当您希望用户添加新**信息**或编辑**现有信息时使用表单，如果您不想让他编辑它们，您也可以禁用输入 - 但恕我直言，大多数时候这对用户来说确实是令人困惑的设计方法 - 至少当您要禁用整页输入时，我不喜欢它:)

当您实际上想向用户显示诸如纯文本之类的内容时，您会使用段落`<p>Some text here</p>`等。我怀疑您已经开始通过 twitter bootstrap 学习使用 HTML 并且有点困惑。

要开始使用 HTML，我建议您阅读本教程的所有章节[https://developer.mozilla.org/en-US/docs/HTML](https://developer.mozilla.org/en-US/docs/HTML)

在玩完该教程和示例之后，回到 twitter bootstrap，这样它就可以更好地为你打开，祝你好运！

# php - 在 PHP while 循环上覆盖 AJAX 文本

> ID：12123500
> 
> 赞同：0
> 
> 时间：2012-08-25T16:01:38.117
> 
> 标签：php, html, ajax

我一直在网上搜索，但似乎找不到任何解决方案......我之前发布了这个问题，但我正在尝试添加新代码......

我有以下代码-->

一个 PHP 页面，其表单可通过简化代码自行提交：

```
<?php if (isset($_POST["submit"])) {

    $sql = "SELECT * FROM table";
    $result = mysql_query($sql);

    while($row = mysql_fetch_array($result)) {

        mail($to, $subject, $newMessage, $headers);

    }
} ?>

<?php if (!isset($_POST["submit"])) {
    <form action="$PHP_SELF" method="post">
        <input name="subject" type="text" id="subject" />
        <textarea name="message" id="nbody"></textarea>
        <input type="submit" name="submit" id="submit" value="Send newsletter" />
    </form>
}else{
    echo "All mail processed";
} ?> 
```

在处理 SQL 请求和发送邮件时，我想显示某种覆盖的文本，以显示电子邮件发送进度（例如“发送电子邮件 1 出 100 封）。

我认为 AJAX 可能可以做到这一点，但我已经尝试了许多没有退出的解决方案......我使用 jQuery 库。

谢谢！！

# c++ - C 和 C++ 中 printf("%d\n", sizeof('a')) 的结果是什么

> ID：12123504
> 
> 赞同：-1
> 
> 时间：2012-08-25T16:02:13.030
> 
> 标签：c++, c, sizeof

> **可能重复：**
> [C/C++ 中字符（'a'）的大小](https://stackoverflow.com/questions/2172943/size-of-character-a-in-c-c)

操作系统：linuxmint 32 位

编译器：gcc & g++

我试过这段代码：

```
#include <stdio.h>

int main()
{
    printf("%d\n",sizeof('a'));
    return 0;
} 
```

我用 gcc 编译它，结果是`4`，我改成 g++ ，它是`1`

然后我使用: `sizeof(char)`，结果是`1`

我使用： char s = 'a'; printf('%d\n', sizeof(s));

结果是`1`

但是我在网上搜索，有人说他们得到了`1`or的结果`2`。

那么为什么会有这么多不同的结果呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T16:05:33.337

字符常量`int`在 C 中表示。当您指定`char`类型时，它只有 1 个字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T16:14:20.977

像C89 这样的字符文字`'a'`有类型，这是. 在 C++ 中，重载字符和字符串分别具有类型和是很重要的（想想）。由于和在 x86 和 x64_86 上，您会得到您描述的结果。`int``gcc``char``char*``std::cout << 'a'``sizeof(int) == 4``sizeof(char) == 1`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T16:14:50.903

`sizeof(char)`在 C 和 C++ 中始终为 1。在 C 中， 的类型`'c'`是`int`，所以`sizeof('c')`与 相同`sizeof(int)`。在 C++ 中， 的类型`'c'`为`char`，因此`sizeof('c')`与 相同`sizeof(char)`，即 1。

# ios - 更改标签栏的颜色

> ID：12123506
> 
> 赞同：4
> 
> 时间：2012-08-25T16:02:23.573
> 
> 标签：ios, tabs, controller, appearance

我在 iOS 5 中使用 Storyboard 创建了一个应用程序来布置我的屏幕。我有一个标签栏控制器和带有 4 个图标的底部标签栏。我想将颜色从黑色更改为渐变绿色。我可以制作一个 .png 文件，但不知道如何用我的绿色填充替换黑色填充。

我看过一些关于代码的帖子，但似乎 iOS 5 与设备运行 iOS4 不同，我不知道将代码放在哪里。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T18:39:38.640

这对我有用：

在 AppDelegate.m 中，我将以下代码放在 // 应用程序启动后自定义覆盖点之后。

```
[[UITabBar appearance] setSelectedImageTintColor:[UIColor redColor]]; 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-21T20:22:46.200

您可以通过选择根来设置情节提要上的颜色：Tab Bar View Controller，选择标签栏，然后在属性检查器中调整背景（或色调）颜色，或者您可以使用 barTintColor 调整代码：

```
// Adjust the Color of the Tab Bar itself
self.tabBar.barTintColor = [UIColor redColor];

// Adjust the Color of the selected Icon in the Tab Bar
self.tabBar.tintColor = [Single single].singleThemeColorTint;
```

如果您也需要调整 ALPHA，我会使用：

```
UIColor *charcoal = [UIColor colorWithRed:66/255.0
                                            green:79/255.0
                                             blue:91/255.0
                                            alpha:1];
  	// For Tab Bar
    self.tabBar.barTintColor = charcoal;

	// For selected Item Highlight
    self.tabBar.tintColor = charcoal;
```

我为标签栏故事板创建了一个视图控制器文件，并在 ViewDidLoad{ } 中运行了此代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T16:07:56.533

这是 Ray WenderLich 的精彩博客文章。

iOS5中的用户界面定制

> [http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T16:17:28.713

如果您使用故事板 API 创建了应用程序，那么您将无法支持 iOS4，它们依赖于新的运行时类，而这些类在其中不可用。

# c# - 非常大的列表orderby的内存排列随机linq

> ID：12123508
> 
> 赞同：0
> 
> 时间：2012-08-25T16:02:33.650
> 
> 标签：c#, linq, parallel-processing, sql-order-by, permutation

我正在对 104 个字符长的特定序列序列进行排列。我使用 plinq 生成序列，但没有随机顺序，结果永远不会复杂到无法选择。

问题是 rnd.next 和 guid.newguid 的 orderby 填满了内存并且不返回任何结果。

有什么解决方案可以从 C# 中的 linq 模式中随机选择？

```
var query = 
             from sp1 in polar
                    ...
             from vp15 in polar                           
             where GetCompressionRatio(sp1+...+vp15)>1.5
             orderby rnd.Next(0, 100000000) * rnd.Next(0, 100000000)
             select sp1+...+vp15;

foreach (var element in query)
{
    //output
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:22:07.347

您正试图用同一个查询解决两个截然不同的问题。即使有一种聪明的方法可以做到这一点，我还是建议你一步一步来。

首先，生成一个非随机排列。然后，对先前的结果应用一些随机排列算法。您可以尝试非常简单的[Knuth Shuffle](http://en.wikipedia.org/wiki/Knuth_shuffle)。

您的意图会更加清晰，并且分解可以为您在测试和调试方面带来显着优势。

# hibernate - Hibernate用“”替换null

> ID：12123509
> 
> 赞同：0
> 
> 时间：2012-08-25T16:02:35.293
> 
> 标签：hibernate, replace, null

我正在使用 hibernate 在我的 jsp 页面上显示值。我有oracle数据库。但是，如果表中的任何列中都没有值，那么在 jsp 上显示时，它会将其显示为 null。我想删除 null 并用 "" 代替它。我需要从休眠中做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:46:20.727

Hibernate 有类似[自定义用户类型的东西](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/types.html#types-custom-ut)

在这里，您有一个获取枚举名称并将此名称转换为枚举的示例：[https ://community.jboss.org/wiki/UserTypeForPersistingATypesafeEnumerationWithAVARCHARColumn](https://community.jboss.org/wiki/UserTypeForPersistingATypesafeEnumerationWithAVARCHARColumn)

更改此示例以使用字符串非常容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T16:39:53.723

将值与 !=null 进行比较，然后赋值为空；IE。

```
 String value = value !=null ? value : ""; 
```

# google-app-engine - 在 Google App Engine 中使用祖先或引用属性？

> ID：12123511
> 
> 赞同：11
> 
> 时间：2012-08-25T16:02:53.023
> 
> 标签：google-app-engine, google-cloud-datastore

目前，我的很多代码都广泛使用祖先来放置和获取对象。但是，我正在寻找改变一些东西。

我最初认为，如果您知道要查找的实体的祖先是谁，那么祖先有助于加快查询速度。但我认为事实证明，祖先对事务支持最有用。我不使用事务，所以我想知道祖先在这里是否是系统的负担而不是帮助。

我拥有的是一个用户实体，以及许多其他实体，例如评论、标签、朋友。一个用户可以创建许多评论、标签和朋友，因此每当用户这样做时，我都会将所有这些新创建的对象的祖先设置为用户。

因此，当我创建评论时，我将祖先设置为用户：

```
comment = Comment(aUser, key_name = commentId) 
```

现在我这样做的唯一原因是严格用于查询目的。我认为当我想获取某个用户的所有评论以获取具有共同祖先的所有评论而不是查询 authorEmail = userEmail 的所有评论时会更快。

因此，当我想获得某个用户的所有评论时，我会：

```
commentQuery = db.GqlQuery('SELECT * FROM Comment WHERE ANCESTOR IS :1', userKey) 
```

所以我的问题是，这对祖先有用吗？每个评论是否应该有一个 ReferenceProperty 来引用创建评论的用户对象，并以此过滤？

（另外，我的想法是使用祖先而不是索引的 ReferenceProperty 会节省写入成本。我在这里弄错了吗？）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-25T16:41:29.603

您对写作成本是正确的，祖先是“免费”的关键的一部分。如果引用属性被索引，使用引用属性将增加您的写作成本。
由于您查询该参考属性是否需要被索引。

Ancestor 不仅对事务很重要，在 HRD（默认数据存储实现）中，如果您不使用相同的祖先创建每个评论，则查询将不会强一致。

-- 添加 Nick 的评论 ---
具有相同父级的每个实体都将位于同一个实体组中，并且对实体组的写入是序列化的，因此如果您同时编写多个实体，则在此处使用祖先会减慢速度。由于组中的所有实体都由在您的实例中构成组根的用户“拥有”，所以这应该不是问题 - 事实上，您所做的实际上是推荐的设计模式.

# c# - 为什么匿名类型的 Equals 实现会比较字段？

> ID：12123512
> 
> 赞同：71
> 
> 时间：2012-08-25T16:02:55.027
> 
> 标签：c#, c#-3.0

我只是想知道为什么该语言的设计者决定在匿名类型上实现`Equals`与值类型类似的 Equals。这不是误导吗？

```
public class Person
{
    public string Name { get; set; }
    public int Age { get; set; }
}

public static void ProofThatAnonymousTypesEqualsComparesBackingFields()
{
    var personOne = new { Name = "Paweł", Age = 18 };
    var personTwo = new { Name = "Paweł", Age = 18 };

    Console.WriteLine(personOne == personTwo); // false
    Console.WriteLine(personOne.Equals(personTwo)); // true
    Console.WriteLine(Object.ReferenceEquals(personOne, personTwo)); // false

    var personaOne = new Person { Name = "Paweł", Age = 11 };
    var personaTwo = new Person { Name = "Paweł", Age = 11 };
    Console.WriteLine(personaOne == personaTwo); // false
    Console.WriteLine(personaOne.Equals(personaTwo)); // false
    Console.WriteLine(Object.ReferenceEquals(personaOne, personaTwo)); // false
} 
```

乍一看，所有打印的布尔值都应该是假的。但是当使用类型和匿名类型`Equals`时，带有调用的行返回不同的值。`Person`

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-08-25T16:05:31.767

匿名类型实例是不可变的数据值，没有行为或身份。参考比较它们没有多大意义。在这种情况下，我认为为它们进行结构平等比较是完全合理的。

如果您想将比较行为切换为自定义（引用比较或不区分大小写），您可以使用 Resharper 将匿名类型转换为命名类。Resharper 还可以生成相等成员。

这样做还有一个非常实际的原因：匿名类型可以方便地用作 LINQ 连接和分组中的哈希键。出于这个原因，它们需要语义正确`Equals`和`GetHashCode`实现。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-08-25T16:12:12.193

对于为什么部分你应该问语言设计者......

但我在 Eric Lippert 关于[匿名类型统一在一个程序集中的文章中发现了这一点，第二部分](http://blogs.msdn.com/b/ericlippert/archive/2012/01/30/anonymous-types-unify-within-an-assembly-part-two.aspx)

> 匿名类型为您提供了一个方便的位置来存储一小部分不可变的名称/值对，但它提供的还不止这些。它还为您提供了 Equals、GetHashCode 以及与本讨论最密切相关的 ToString 的实现。(*)

为什么部分出现在注释中：

> (*) 我们为您提供 Equals 和 GetHashCode，以便您可以在 LINQ 查询中使用匿名类型的实例作为执行连接的键。出于性能原因，LINQ to Objects 使用哈希表实现连接，因此我们需要正确实现 Equals 和 GetHashCode。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-08-25T18:13:45.470

C# 语言规范的官方答案（可[在此处](http://msdn.microsoft.com/en-us/library/ms228593.aspx)获得）：

> 匿名类型的 Equals 和 GetHashcode 方法覆盖从 object 继承的方法，并根据属性的 Equals 和 GetHashcode 定义，因此*当且仅当它们的所有属性都相等时，相同匿名类型的两个实例才相等*。

（我的重点）

其他答案解释了为什么这样做。

值得注意的是，在**VB.Net**中，[实现是不同](https://docs.microsoft.com/en-us/dotnet/visual-basic/programming-guide/language-features/objects-and-classes/anonymous-types)的：

> 没有键属性的匿名类型的实例仅与自身相同。

创建匿名类型对象时，必须明确指出关键属性。默认值为：无键，这对 C# 用户来说可能非常混乱！

这些对象在 VB 中不相等，但在 C# 等效代码中：

```
Dim prod1 = New With {.Name = "paperclips", .Price = 1.29}
Dim prod2 = New With {.Name = "paperclips", .Price = 1.29} 
```

这些对象评估为“相等”：

```
Dim prod3 = New With {Key .Name = "paperclips", .Price = 1.29}
Dim prod4 = New With {Key .Name = "paperclips", .Price = 2.00} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-08-25T18:55:14.047

因为它给了我们一些有用的东西。考虑以下：

```
var countSameName = from p in PersonInfoStore
  group p.Id by new {p.FirstName, p.SecondName} into grp
  select new{grp.Key.FirstName, grp.Key.SecondName, grp.Count()}; 
```

之所以有效，是因为匿名类型的实现`Equals()`和`GetHashCode()`匿名类型是在逐字段相等的基础上工作的。

1.  `PersonInfoStore` 这意味着当针对不是 linq-to-objects运行时，上述内容将更接近于相同的查询。（仍然不一样，它将匹配 XML 源将执行的操作，但与大多数数据库的排序规则将不匹配）。
2.  这意味着我们不必`IEqualityComparer`为每个调用都定义一个，`GroupBy`这将使匿名对象的分组变得非常困难——为匿名对象定义一个 IEqualityComparer 是可能的，但并不容易——而且远非最自然的含义。
3.  最重要的是，它不会在大多数情况下造成问题。

第三点值得研究。

当我们定义一个值类型时，我们自然想要一个基于值的相等概念。虽然我们可能对基于值的相等性与默认值有不同的想法，例如不区分大小写地匹配给定字段，但默认值自然是明智的（如果性能不佳并且在一种情况下存在错误*）。（此外，在这种情况下，引用相等是没有意义的）。

当我们定义一个引用类型时，我们可能需要也可能不需要基于值的相等概念。默认为我们提供了引用相等性，但我们可以轻松更改它。如果我们确实改变了它，我们可以为 just `Equals`and`GetHashCode`或为 them and also改变它`==`。

当我们定义一个匿名类型时，哦等等，我们没有定义它，这就是匿名的意思！我们关心引用相等性的大多数场景不再存在。如果我们要持有一个对象足够长的时间，以便稍后怀疑它是否与另一个相同，我们可能不会处理匿名对象。我们关心基于价值的平等的案例很多。经常使用 Linq（`GroupBy`如我们在上面看到的，还有`Distinct`, `Union`, `GroupJoin`, `Intersect`, `SequenceEqual`, `ToDictionary`and `ToLookup`）并且经常使用其他用途（这并不是说我们没有在 2.0 中使用可枚举为我们做 Linq 为我们所做的事情，在此之前在某种程度上，任何在 2.0 中编码的人都会自己编写一半的方法`Enumerable`）。

总之，我们从匿名类的平等工作方式中获益良多。

如果有人真的想要引用相等，`==`使用引用相等意味着他们仍然拥有它，所以我们不会丢失任何东西。这是要走的路。

`Equals()`* and的默认实现`GetHashCode()`有一个优化，让它在安全的情况下使用二进制匹配。不幸的是，有一个错误使得它有时会错误地将某些情况识别为这种更快的方法是安全的，而实际上它们不是（或者至少它曾经是，也许它已修复）。一个常见的情况是，如果您`decimal`在结构中有一个字段，那么它将认为某些具有等效字段的实例是不相等的。

# svn - svn checkout 文件是只读的

> ID：12123513
> 
> 赞同：2
> 
> 时间：2012-08-25T16:03:00.390
> 
> 标签：svn

我是svn的新手。我刚刚在我的服务器上设置了一个存储库，这是一台不再使用的旧台式计算机。我安装了 Ubuntu。现在，我的问题是我的朋友在他身边做了一个 svn checkout，但由于文件是只读的，所以无法编辑文件和提交文件。有没有办法让它们在属性设置中读写？谢谢你。我们正在使用 Mac 并在命令行中执行所有操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:06:30.627

这不是 SVN 问题，而是操作系统问题。工作副本是计算机上的一组文件，因此请尝试使用`chmod`并使它们可写。

# spring - 出现异常：未定义名为“springSecurityFilterChain”的 bean

> ID：12123516
> 
> 赞同：46
> 
> 时间：2012-08-25T16:03:19.357
> 
> 标签：spring, spring-mvc, spring-security

我正在从参考资料中学习弹簧安全性。发布 3.1.2.RELEASE。如前所述，我已经配置了`security:http`这样的标签

**安全上下文.xml**

```
<security:http auto-config="true">
        <security:intercept-url pattern="/**" access="ROLE_USER"/>
    </security:http> 
```

**web.xml**

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath*:*-context.xml</param-value>
  </context-param>

  <filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
  </filter>

  <filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>

  <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener>

  <servlet>
    <servlet-name>security</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>security</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping> 
```

**安全-servlet.xml**

```
<context:component-scan base-package="com.pokuri.security.mvc.controllers"/>

    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
        <property name="prefix" value="/WEB-INF/page/"/>
        <property name="suffix" value=".jsp"/>
    </bean> 
```

但是当我启动应用程序时，我得到了这个异常。如果我删除安全配置，我的 Spring Web 应用程序工作正常。我在stackoverflow中遇到了同样的问题。但没有运气。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-08-25T19:49:15.553

我认为你的问题的原因可能是当你启动你的 web 应用程序时，你的 spring 安全性的 xml 配置文件没有加载。

要解决此问题，您应该在 web.xml 中指定所有 XML 配置文件，如下所示：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring-security.xml, /WEB-INF/applicationContext.xml</param-value>
</context-param> 
```

如果您在类路径中有配置文件（不是 WEB-INF 文件夹或其子文件夹），那么您可以通过这种方式指定配置文件列表；

```
...
<param-value>
    classpath:applicationContext.xml,
    classpath:spitter-security.xml
</param-value>
... 
```

你还需要添加特殊的监听器来加载你的配置文件：

```
<listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-06-23T19:13:26.033

我刚刚按照 Spring 的要求在 applicationContext.xml 中添加了 bean 定义：

```
<bean id="springSecurityFilterChain" class="org.springframework.web.filter.DelegatingFilterProxy"/> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-20T20:14:30.927

将此添加到您的 web.xml

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/root-context.xml, /WEB-INF/spring-security.xml</param-value>
</context-param>

<!-- Creates the Spring Container shared by all Servlets and Filters -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

        <!-- filter declaration for Spring Security -->
<filter>
  <filter-name>springSecurityFilterChain</filter-name>
  <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
  <filter-name>springSecurityFilterChain</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-27T08:19:15.550

如果它对任何人有帮助，我已经重命名了我的一个包，但 Eclipse 不会自动更新您的`@ComponentScan`路径，所以请确保您也更改它：

```
@ComponentScan(basePackages = "com.package.spring") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-28T05:44:37.430

从 Spring Security 5.2.1-SNAPSHOT 开始，当我没有`<http/>`在安全 XML 配置中声明该元素时，我发生了这个错误。

我正在尝试一个示例，并且我的配置如下

```
 <b:beans xmlns="http://www.springframework.org/schema/security" xmlns:b="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd
                        http://www.springframework.org/schema/security https://www.springframework.org/schema/security/spring-security.xsd">

    <user-service>
        <user name="user" password="{noop}password" authorities="ROLE_USER" />
    </user-service>
</b:beans> 
```

我不得不更改它以添加`<http/>`如下所示。

```
<b:beans xmlns="http://www.springframework.org/schema/security" xmlns:b="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans.xsd
                        http://www.springframework.org/schema/security https://www.springframework.org/schema/security/spring-security.xsd">

    <http />
    <user-service>
        <user name="user" password="{noop}password" authorities="ROLE_USER" />
    </user-service>
</b:beans> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-10T17:33:51.957

对于那些在没有 xml 的情况下学习 spring 的人可能会有所帮助。

在没有 xml 的情况下学习 spring 时我遇到了同样的异常。

发现我已经通过扩展类 AbstractSecurityWebApplicationInitializer 注册了 spring security 过滤器，但没有配置 spring security。为了配置弹簧安全，我在下面添加了代码并且它可以工作。

```
@Configuration
@EnableWebSecurity
public class SpringSecurityConfigInitializer extends 
WebSecurityConfigurerAdapter {

@Override
protected void configure(AuthenticationManagerBuilder auth) throws 
Exception {
    UserBuilder users = User.withDefaultPasswordEncoder();
auth.inMemoryAuthentication().withUser(users.username("test").
password("test123").roles("EMPLOYEE"));
 }

 } 
```

以上只是我的案例的示例，但例外是由于缺少配置。

# symfony - Symfony2 形式：如何处理“父/子”类型的多对多“自引用”关系？

> ID：12123517
> 
> 赞同：1
> 
> 时间：2012-08-25T16:03:22.917
> 
> 标签：symfony, doctrine-orm, propel, symfony-forms

我正在使用 Symfony2 表单，但无法找到如何嵌入允许创建“父/子”类型的多对多“自引用”关系的中间类表单。例如：通过“PersonParent”类与自身相关的“Person”类。xml 架构如下所示：

```
<table name="person">
  <column name="id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
  <column name="name" type="VARCHAR" size="100" required="true"/>
</table>
<table name="person_parent">
  <column name="person_id" type="INTEGER" primaryKey="true" required="true"/>
  <column name="parent_id" type="INTEGER" primaryKey="true" required="true"/>
  <foreign-key foreignTable="person" onDelete="CASCADE">
      <reference local="person_id" foreign="id"/>
  </foreign-key>
  <foreign-key foreignTable="person" onDelete="CASCADE">
      <reference local="parent_id" foreign="id"/>
  </foreign-key>
</table> 
```

我正在使用 PropelBundle 而不是学说，但即使您使用的是学说，您也可以在这个问题上给我一个领导。请注意，当前的关系与“Friend like”关系不同，后者存在 EqualNest 行为，该行为创建方法以直接从“Person”对象形式获取/设置“Friend”对象，而无需嵌入中间“PersonParentType”类形式。

我尝试使用 Propel 生成的方法，如 setPersonParentsRelatedByPersonId，同时在 PersonType 表单中嵌入 PersonParentType 表单以便能够添加“PersonParentsRelatedByPersonId”对象，但问题是我不知道如何在 PersonParentType 表单中定义“person_id”因为“person_id”还不能用于新的人。仅在 PersonParentType 中为“parent_id”添加一个字段会导致“非空违规”，因为缺少“person_id”。

有任何想法吗？[这个问题与我之前询问是否存在处理此问题的 Propel 行为的](https://stackoverflow.com/questions/12064432/propel-orm-behavior-for-defining-parent-child-relationships)问题相关但范围不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T21:40:41.820

您可以在此处找到一些关于使用学说自引用 manytomany 的文档 [http://doctrine-orm.readthedocs.org/en/2.0.x/reference/association-mapping.html#many-to-many-self-referencing](http://doctrine-orm.readthedocs.org/en/2.0.x/reference/association-mapping.html#many-to-many-self-referencing)

# java - 在 Hibernate 的 SessionFactory 和 JDBC DAO 之间共享连接的最佳方式是什么？

> ID：12123519
> 
> 赞同：0
> 
> 时间：2012-08-25T16:03:27.853
> 
> 标签：java, hibernate, spring-mvc

我在基于 Java 的 webapp 中使用 Spring 3.0.6 和 Hibernate 3.2.7.GA。我在**控制器**`@Transactional`上声明带有注释的事务（而不是在服务层中）。大多数视图都是只读的。

 **问题是，我有一些 DAO 用于`JdbcTemplate`直接使用 SQL 查询数据库，并且它们在事务之外被调用。这意味着他们没有重用 Hibernate`SessionFactory`的连接。它们在事务之外的原因是我在控制器中的方法参数上使用转换器，如下所示：

```
@Controller
@Transactional
public class MyController {
    @RequestMapping(value="/foo/{fooId}", method=RequestMethod.GET)
    public ModelAndView get(@PathVariable("fooId") Foo foo) {
        // do something with foo, and return a new ModelAndView
    }
}

public class FooConverter implements Converter<String, Foo> {
    @Override
    public Foo convert(String fooId) {
        // call FooService, which calls FooJdbcDao to look up the Foo for fooId
    }
} 
```

`SimpleJdbcDaoSupport`我的JDBC DAO 依赖`jdbcTemplate`注入：

```
@Repository("fooDao")
public class FooJdbcDao extends SimpleJdbcDaoSupport implements FooDao {
    public Foo findById(String fooId) {
        getJdbcTemplate().queryForObject("select * from foo where ...", new FooRowMapper());
        // map to a Foo object, and return it
    }
} 
```

和我的`applicationContext.xml`电线在一起：

```
<mvc:annotation-driven conversion-service="conversionService"/>

<bean id="conversionService" class="org.springframework.context.support.ConversionServiceFactoryBean">
   <property name="converters">
       <set>
           <bean class="FooConverter"/>
           <!-- other converters -->
       </set>
   </property>
</bean>

<bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
   <property name="dataSource" ref="dataSource"/>
</bean>
<bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager"
        p:sessionFactory-ref="sessionFactory" /> 
```

`FooConverter`（将路径变量转换`String`为`Foo`对象）在调用之前`MyController#get()`被调用，因此事务尚未开始。因此，当`FooJdbcDAO`被调用查询数据库时，它无法重用`SessionFactory`' 的连接，必须从池中检出自己的连接。

## 所以我的问题是：

1.  有没有办法在`SessionFactory`我的 JDBC DAO 和我的 JDBC DAO 之间共享数据库连接？我正在使用`HibernateTransactionManager`，并且从查看 Spring`DataSourceUtils`看来，共享事务是共享连接的*唯一*方法。

2.  如果 #1 的答案是*否定*的，那么有没有办法配置`OpenSessionInViewFilter`为在请求开始时为我们启动事务？我使用 " `on_close`" 作为[`hibernate.connection.release_mode`](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/transactions.html#transactions-connection-release)，所以休眠会话和连接已经在请求的生命周期内保持打开状态。

这对我来说很重要的原因是我在重负载下遇到问题，每个线程都从池中检出 2 个连接：第一个由 hibernate 检出并保存整个线程长度，第二个是每当 JDBC DAO 需要一个用于事务之外的查询时，就签出。当由于池为空而无法签出第二个连接时，这会导致死锁，但仍保留第一个连接。我首选的解决方案是让所有 JDBC DAO 参与 Hibernate 的事务，这样`TransactionSynchronizationManager`才能正确共享一个连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:19:07.250

> 1.  有什么方法可以在 SessionFactory 和我的 JDBC DAO 之间共享数据库连接？我正在使用 HibernateTransactionManager，从查看 Spring 的 DataSourceUtils 看来，共享事务是共享连接的唯一方法。

--> 那么你可以在 SessionFactory 和 JdbcTemplate 之间共享数据库连接。您需要做的是在两者之间共享相同的数据源。连接池也在两者之间共享。我在我的应用程序中使用它。

您需要做的是为这两个事务配置 HibernateTransactionManager。

在您现有的包结构（在 dao 包/层中）中添加 JdbcDao 类（具有属性 jdbcTemplate 和带有 getter-setter 的数据源），扩展您的 jdbc 实现类`JdbcDao`。如果你已经为hibernate配置了hibernateTxManager，你就不需要配置它了。

> 问题是，我有一些 DAO 使用 JdbcTemplate 直接使用 SQL 查询数据库，并且它们在事务之外被调用。这意味着他们没有重用 Hibernate SessionFactory 的连接。

--> 你这里可能错了。我认为您可能正在使用相同的连接，唯一的问题可能在于`HibernateTransaction`配置。

检查[HibernateTransactionManager javadoc](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/orm/hibernate3/HibernateTransactionManager.html)：`This transaction manager is appropriate for applications that use a single Hibernate SessionFactory for transactional data access, but it also supports direct DataSource access within a transaction (i.e. plain JDBC code working with the same DataSource). This allows for mixing services which access Hibernate and services which use plain JDBC (without being aware of Hibernate)!`

检查我的问题：[在 Spring Framework 3.0 中使用 Hibernate 和 Jdbc](https://stackoverflow.com/questions/9572226/using-hibernate-and-jdbc-both-in-spring-framework-3-0)

配置：使用您当前的休眠类添加 dao 类和服务类，如果您想使用现有配置，请不要为它们制作单独的包。否则在 xml 配置中配置 HibernateTransactionManager 并使用 @Transactional 注释。

您的代码中的错误：

```
@Controller
@Transactional
public class MyController {...... 
```

在服务类中使用`@Transactional`注释（[最佳实践](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&cad=rja&ved=0CDAQFjAC&url=https://stackoverflow.com/questions/1079114/spring-transactional-annotation-best-practice&ei=TUE6UJC-C82xrAfN24C4CA&usg=AFQjCNEmTBv-sXaM8_6FprTA2Y3fpWib2g)）。

更正：

```
@Transactional(readOnly = true)
public class FooService implements FooService {

  public Foo getFoo(String fooName) {
    // do something
  }

  // these settings have precedence for this method
  @Transactional(readOnly = false, propagation = Propagation.REQUIRES_NEW)
  public void updateFoo(Foo foo) {
    // do something
  }
} 
```**

# actionscript-3 - 在 Flash ActionScript 3 中读取的 Ventrilo 挂钩

> ID：12123521
> 
> 赞同：0
> 
> 时间：2012-08-25T16:03:54.533
> 
> 标签：actionscript-3, flash, hook

当有人在 VoIP 程序 Ventrilo 中讲话时，我想播放一个 flash 动画。

我在 Adob​​e Flash 中有一个简单的动画设置，我想在某个特定的人在 Ventrilo 中说“按键”时以某种方式触发它。

我知道 G15 键盘可以远程访问 Ventrilo 并实时显示谁在说话，所以我认为如果我知道如何访问它，应该可以使用此事件来触发影片剪辑播放命令。我已经查找了示例代码，但找不到任何代码。

我知道这可能是一项非常复杂的任务，但我确信 Stackoverflow 上有一个天才知道如何去做，或者至少可以让我走上正确的道路。

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T16:56:28.747

这不是一件容易的事，需要编写一个 C/C++ ANE。

您可以使用 Windows API 挂钩来拦截来自 Ventrilo 的调用。

[http://www.gamedev.net/topic/387670-api-hooking/](http://www.gamedev.net/topic/387670-api-hooking/)

[http://www.codeproject.com/Articles/2082/API-hooking-revealed](http://www.codeproject.com/Articles/2082/API-hooking-revealed)

您需要编写一个 ANE 才能在您的 AIR 应用程序中使用它。

[http://www.flexjunk.com/2011/11/30/developing-an-air-native-extension-for-osx-and-windows-in-c/](http://www.flexjunk.com/2011/11/30/developing-an-air-native-extension-for-osx-and-windows-in-c/)

# javascript - 悬停在 div 上时重复动画

> ID：12123526
> 
> 赞同：0
> 
> 时间：2012-08-25T16:04:20.157
> 
> 标签：javascript, jquery, html, animation

我已经阅读了有关此问题的其他问题和答案，但它们对我不起作用，也许我遗漏了某些东西，或者我的示例略有不同，我不知道。无论如何，我有一个 div，里面有一些文本和一个链接，当用户将鼠标悬停在第一个 div 上时，我想创建一个新 div。问题是，当我超过第一个 div 时，第二个会不断地淡入和淡出，即使我没有用鼠标离开第一个 div。

这是HTML代码：

```
<div id="content">
    <h1>Portfolio</h1>
        <div id="web">
            <p>Web apps</p>
            <a href="#">
                First link
            </a>
        </div>
        <div id="commentweb">
            <p>The text that I want to show</p>
        </div>
</div> 
```

这是jQuery：

```
$(document).ready(function() {

$("#web").click(function(){
     window.location=$(this).find("a").attr("href"); 
     return false;
});

$("#commentweb").hide();

$("#web").hover(
  function () {
    $(this).children("a").children("img").attr("src","2.png");
    $(this).css("background-color","#ecf5fb");
    $(this).css( 'cursor', 'pointer' );
    $(this).css('border','1px solid #378ac4');
    $(this).children("p").css("opacity","1.0");
    $('#commentweb').stop(true, true).fadeIn();
  }, 
  function () {
    $(this).children("a").children("img").attr("src","1.png");
    $(this).children("p").css("opacity","0.5");
    $(this).css("background-color","#e8e3e3");
    $(this).css('border','1px solid grey');
    $('#commentweb').stop(true, true).fadeOut();
  }
);
}); 
```

我应该怎么做才能在我结束#web 时开始淡入动画，而当我离开该 div 时开始淡出动画，而不闪烁（即恒定的淡入和淡出）？

我添加了一个小提琴来向您展示问题：http: [//jsfiddle.net/mMB3F/](http://jsfiddle.net/mMB3F/) 它基本上发生在我将鼠标悬停在文本上时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T16:40:22.227

出现此问题是因为您的评论 div 在您分配悬停事件的 div 内。请注意，当您在下图中显示的突出显示区域（红色）中输入鼠标指针时会发生闪烁（与评论 div 相关）。

![在此处输入图像描述](../Images/a34d0033b9e087eaab790d141eaf0e1e.png)

看看这个解决方案：http: [//jsfiddle.net/davidbuzatto/mMB3F/1/](http://jsfiddle.net/davidbuzatto/mMB3F/1/)

评论 div 现在有了绝对定位。当鼠标进入时，注释 div 将显示在指针旁边。当然，现在您需要更改代码以满足您的需求。另一种方法是设置一个包含#web div 的div 容器，并在它旁边放置另一个div，将它们设置为浮动。在新 div 中插入带有注释的 div。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T01:48:20.567

**更新**

我的另一个答案有点过于浮夸，你只需要浮动你的另一个 div

```
#commentweb {float:left} 
```

[http://jsfiddle.net/mMB3F/5/](http://jsfiddle.net/mMB3F/5/)

~~它需要是异步的，stop() 是导致它闪烁的原因，但如果您在分配事件处理程序之前等待淡入淡出完成，则不需要停止。~~

~~[http://jsfiddle.net/u7Q9P/1/](http://jsfiddle.net/u7Q9P/1/)~~

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T16:55:29.303

使用 jquery`.mouseenter()`并`.mouseleave()`避免这种情况。这样，您不必在 CSS 中重新定位任何内容。

[在这里](https://stackoverflow.com/questions/11130734/jquery-mouseover-not-working-as-intended/11130789#11130789)查看我的答案以获取更多详细信息

# c# - c#中没有非常高质量图像的压缩图像

> ID：12123529
> 
> 赞同：-2
> 
> 时间：2012-08-25T16:04:24.640
> 
> 标签：c#, image, compression

我不需要非常高质量的图像。我将使用套接字发送此图像，因此我需要此图像尽可能小我需要一种压缩图像的方法

```
 private void button1_Click_1(object sender, EventArgs e)
    {
        OpenFileDialog Open_File = new OpenFileDialog();
        if (Open_File.ShowDialog() == DialogResult.OK)
        {
            FileStream fileStream = new FileStream(Open_File.FileName, FileMode.Open, FileAccess.Read);
            int length = (int)fileStream.Length;
            byte[] buffer = new byte[length];
            fileStream.Read(buffer, 0, length);
            Image x = byteArrayToImage(buffer);//this image I want to compression
            //.............................
        }
    }

    public Image byteArrayToImage(byte[] byteArrayIn)
    {
        MemoryStream ms = new MemoryStream(byteArrayIn);
        Image returnImage = Image.FromStream(ms);
        return returnImage;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:35:05.717

莫塔兹，

不久前，我从事了一个图像处理项目。该项目需要对图像进行压缩/解压缩。您有两种选择可以做您想做的事情：1）您可以自己编写算法。

2）您可以使用库来压缩/解压缩图像。如果您想使用库，您还必须选择： A- 您可以使用 Internet 上提供的开源库和文章，例如：http: [//www.codeproject.com/Articles/4769/In-Memory -Image-Compression](http://www.codeproject.com/Articles/4769/In-Memory-Image-Compression) 或者您可以使用 Aforge 等库

B-您可以使用商业库，例如leadtools sdk，它允许您通过更改品质因数来增加压缩率。此外，对于他们的 j2k 格式，您可以设置您希望图像具有的大小。有关代码示例：请参阅以下链接： 有关质量因素：www.leadtools.com/help/leadtools/v175/dh/co/leadtools.codecs~leadtools.codecs.codecspngoptions.html#Example_CS [http://www.leadtools .com/help/leadtools/v175/dh/co/leadtools.codecs~leadtools.codecs.codecsjpegoptions.html#Example_CS](http://www.leadtools.com/help/leadtools/v175/dh/co/leadtools.codecs~leadtools.codecs.codecsjpegoptions.html#Example_CS) 用于设置 J2K 文件大小：www.leadtools.com/help/leadtools/v175/dh/co/ Leadtools.codecs~leadtools.codecs.codecsjpeg2000options.html#Example_CS 使用 TargetFileSize 属性可以设置文件大小。

在我的事业中，我们决定使用商业工具包，因为它为我们提供了更多功能、更好的质量和更好的性能。

# .htaccess - 多个干净的 URL 变量

> ID：12123532
> 
> 赞同：0
> 
> 时间：2012-08-25T16:04:35.987
> 
> 标签：.htaccess

我想知道如何通过 url 作为一个干净的 url 传递几个（两个）值。我以前做过干净的网址，但从来没有使用多个值，而且它似乎不起作用。

这是 url 现在的样子：

```
http://example.com/?user=Username&page=1 
```

这就是我想要的样子

```
http://example.com/user/Username/page/1 
```

我已经尝试过我在这里看到的其他答案，但它们不适用于这个特定的交易。

```
RewriteEngine On
# Don't match real existing files so CSS, scripts, images aren't rewritten
# RewriteCond %{REQUEST_FILENAME} !-f
# RewriteCond %{REQUEST_FILENAME} !-d

# Match the first two groups before / and send them to the query string
RewriteRule ^([^/]+)/([^/]+) index.php?user=$1&page=$2 [L] 
```

谢谢。:) 顺便说一句，我正在使用 PHP。:)

另外，我仍然可以使用 $_GET 吗？我是这么认为的，但我也在其他地方说你不能......：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T16:12:52.613

您错过了几场比赛，请尝试：

```
RewriteEngine On
# Don't match real existing files so CSS, scripts, images aren't rewritten
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^([^/]+)/([^/]+)/([^/]+)/([^/]+) index.php?$1=$2&$3=$4 [L] 
```

这将采用如下 URL：

```
http://example.com/a/b/c/d 
```

到 URI：

```
/index.php?a=b&c=d 
```

> 我仍然可以使用 $_GET 吗？我是这么认为的，但我也在其他地方说你不能。

在上面的示例中，当您查看时，`$_GET['a']`您会得到`b`.

# apache - 您无权访问此服务器上的 /index.html

> ID：12123533
> 
> 赞同：0
> 
> 时间：2012-08-25T16:04:46.033
> 
> 标签：apache

当我加载本地主机时会发生这种情况。

这是我的 apache 配置文件 (/etc/apache2/sites-available/default.txt) 中的内容：

```
 <Directory /home/matrix001/Public>
   Options +Indexes FollowSymLinks +ExecCGI
    AllowOverride AuthConfig FileInfo
            Order allow,deny
    Allow from all
</Directory> 
```

这是文件夹的权限：

```
drwxr-xr-x  2 matrix001 matrix001 4096 Aug 25 18:05 Public 
```

一切似乎都是正确的。那么为什么我会收到这个错误呢？

附言。我在linux上。我也尝试了网络上的许多解决方案..但没有发现任何有效的解决方案

这有效：

```
file:///home/matrix001/Public/index.html 
```

这不是：

```
http://localhost/index.html 
```

# mysql - 如何从一个表中返回最近插入的数据以及通过 PK/FK 关系链接的另一个表？

> ID：12123538
> 
> 赞同：0
> 
> 时间：2012-08-25T16:05:14.683
> 
> 标签：mysql, database, join, multiple-instances

新手用户。

我有两张桌子：

`personnel(personnel_id, employee_id, f_name, l_name, initials, department, role), track(track_id, personnel_id, status, time_in, time_out, location)`

“一个人可以被追踪很多次”

为了尝试仅呈现数据集的所需部分，我使用了以下查询：

```
SELECT 
    personnel.personnel_id, 
    personnel.employee_id, 
    personnel.l_name,  
    personnel.initials, 
    track.status, 
    track.time_in, 
    track.time_out 
FROM
    personnel, track
WHERE
    personnel.personnel_id = track.personnel_id
ORDER BY
    l_name 
```

这里的问题是它返回`track`表中外键出现的每个实例，而我需要做的就是显示带有最近插入的轨道数据的人员详细信息。每次出现外键时，它还会多次返回相同的人员数据。我知道问题出在查询中，我已经冒险进入 JOINS，但我仍然处于初学者领域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T01:07:23.683

```
SELECT
  p.personnel_id, 
  p.employee_id, 
  p.l_name,  
  p.initials, 
  outer_track.status, 
  outer_track.time_in, 
  outer_track.time_out 
FROM Personnel P, Track OuterTrack 
where P.personnel_id = OuterTrack.personnel_id and
OuterTrack.id = 
    (SELECT FIRST t.id from InnerTrack 
     order by InnerTrack.time_in desc 
     group by InnerTrack.personnel_id)
ORDER BY
    Personnel.l_name 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-26T00:39:29.603

# r - R中的公式操作

> ID：12123544
> 
> 赞同：2
> 
> 时间：2012-08-25T16:05:34.420
> 
> 标签：r, formulas

`MASS:stepAIC`对于具有固定和混合效果的高斯模型，我正在尝试做与该功能类似的事情。这个想法是让它完全推广到许多固定和混合的效果，因为这些任务可以手工完成，对于少数人来说是微不足道的。

我希望能够像 lmer 一样将公式写为输入：

`Y ~ x1 + x2 + (a|b) + (1|c)

我无法从公式类中提取我需要的信息。此外，我需要能够将选定数量的变量放回 lm 和 lmer 函数中。所以我希望能够将公式的部分提取到：

```
data      fixed effects       mixed effects
Y              x1                 a|b
               x2                 1|c 
```

然后我需要能够自动向 lm 发送任意一组固定和混合效果：

`lm(y ~ x1)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:47:25.903

如果我们可以精确地假设`(variable|variable)`混合效应项的形式，那么：

```
library(gsubfn)
fo <- Y ~ x1 + x2 + (a|b) + (1|c)

mixed.vec <- strapplyc(format(fo), "[(] *(\\w+) *[|] *(\\w+) *[)]")[[1]]
mixed <- matrix(mixed.vec, byrow = TRUE, nc = 2)
fixed <- setdiff(all.vars(fo)[-1], mixed) 
```

这给出了以下内容：

```
> mixed
     [,1] [,2]
[1,] "a"  "b" 
[2,] "1"  "c" 
> fixed
[1] "x1" "x2" 
```

这`mixed`是一个矩阵，其第一列包含 | 之前的变量。第二列包含 | 之后的相应变量 .

# jquery - jQuery 动画在除 Firefox 之外的所有浏览器中都失败

> ID：12123547
> 
> 赞同：1
> 
> 时间：2012-08-25T16:05:46.233
> 
> 标签：jquery, css, jquery-animate

这个问题很难解释，所以我将首先提供代码，然后，在尽我所能描述问题的同时，我假设您已经比较了 Firefox 和任何其他浏览器中的结果。

代码： http: [//jsfiddle.net/MEckv/](http://jsfiddle.net/MEckv/)（点击大框开始）

出于某种原因，盒子的左侧位置似乎在它们弹出之前被重置，让人感觉它们只是在左侧循环，而右侧的盒子只是改变颜色。不过，在 Firefox 中不会出现此问题。

我在代码中做了什么疯狂的事情吗？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T16:52:18.463

问题是您指定`right: 0px;`然后尝试为特定的`left`. 显然 Firefox 知道如何处理这个问题，但其他浏览器似乎不知道。

解决方案是将`left`常量转换为常量**或**找到实际值（使用**jQuery**的）并使用它们设置框的样式，以便浏览器知道如何制作动画（只有第二种方法似乎工作得很好）。这是一个有效的小演示：[little link](http://jsfiddle.net/MEckv/51/)。`right`**`left`**`.offset().left`****

 ****我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T17:00:37.770

我已经有类似的问题。似乎 Firefox 将 left、top 等属性在不存在时设置为 0，我们使用它们，例如，为某些可拖动 div 设置动画`left: 100`或`left: 0`将其`top`与另一个 div 进行比较（其中未指定 top）。因此，当您需要使用它们时，只需尝试将默认值设置为左侧、顶部等。似乎我们不能假设这些值会在 Firefox 以外的其他浏览器中使用默认值（如 0）进行初始化。****

# php - 无法在 PHP 中将 parentNode 与 DomXpath 一起使用

> ID：12123554
> 
> 赞同：0
> 
> 时间：2012-08-25T16:07:14.900
> 
> 标签：php, dom, xpath, domdocument

我在使用带有 DomXpath 的 parentNode 时遇到了困难。

```
<?php 
$html = <<<STR
        <div id="bar">
            <p>item1</p>
            <ul>
                <li class="foo">item2</li>
                <li>item3</li>
                <li>item4</li>
            </ul>
        </div>
STR;
$doc = new DOMDocument;
$doc->loadHTML( $html );
$xpath = new DomXpath($doc);
$nodeFoo = $xpath->query("//*[@id='bar']//*[@class='foo']"); 
echo $nodeFoo->item(0)->nodeValue;

$nodeClimb = $nodeFoo->parentNode; // causes an error
echo $nodeClimb.nodeName;
?> 
```

我预计最后一行会产生“ul”，它是检索到的节点 $nodeFoo 的父节点名称。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T16:33:39.880

首先，你的最后一行有一个错字：`echo $nodeClimb.nodeName;`应该是`echo $nodeClimb->nodeName;`

但是，您的主要问题是您在一行中发现但在下一行没有发现的问题：XPath 查询返回的不是单个，而是包含该查询的所有匹配`DOMNode`项的实例。`DOMNodeList`

因此，正如您选择了列表中的第一个项目来回显 ( `echo $nodeFoo->item(0)->nodeValue;`)，您需要选择一个项目作为父项目 ( `$nodeClimb = $nodeFoo->item(0)->parentNode;`)。

# sass - 指南针项目的“您必须从项目目录编译单个样式表”错误

> ID：12123557
> 
> 赞同：33
> 
> 时间：2012-08-25T16:07:43.520
> 
> 标签：sass, compass-sass, expressionengine

我已经将 Zurb Foundation sass 安装到了一个表达式引擎项目中，但是在保存 app.scss 文件时我得到了这个：

> Compass 无法编译项目中的一个或多个文件：
> 
> 您必须从项目目录编译单独的样式表。

我所有的路径都是正确的，因为它们与另一个运行良好的项目相同。

知道是什么触发了该错误，以便我可以追踪问题吗？

# perl - 使用 Perl 按点分割

> ID：12123559
> 
> 赞同：8
> 
> 时间：2012-08-25T16:07:55.123
> 
> 标签：perl, split

我通过两种方式使用[拆分功能。](https://perldoc.perl.org/functions/split.html)第一种方式（*split*的字符串参数）：

```
my $string = "chr1.txt";
my @array1 = split(".", $string);
print $array1[0]; 
```

我收到此错误：

> 在打印中使用未初始化的值

*当我通过第二种方式进行拆分时（拆分*的正则表达式参数），我没有收到任何错误。

```
my @array1 = split(/\./, $string); print $array1[0]; 
```

我的第一种拆分方式不仅仅适用于点。

这背后的原因是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-25T16:22:36.633

`"\."`只是`.`，小心转义序列。

如果您想要双引号字符串中的反斜杠和点，则需要`"\\."`. 或者使用单引号：`'\.'`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-25T16:19:11.760

如果你只是想解析文件并获取它们的后缀，最好使用`fileparse()`from 的方法[`File::Basename`](http://search.cpan.org/perldoc?File::Basename)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-25T17:31:48.973

[Mat 提供的信息的](https://stackoverflow.com/questions/12123559/split-by-dot-using-perl/12123663#12123663)其他详细信息：

在`split "\.", ...`第一个参数中，to`split`在传递给正则表达式引擎之前首先被解释为双引号字符串。正如 Mat 所说，在双引号字符串中，a`\`是转义字符，意思是“按字面意思取下一个字符”，例如在双引号字符串中放置双引号：`"\""`

所以你的作为模式`split`被传递`"."`了。一个点表示“在任何字符上分割”。如您所知，拆分模式本身并不是结果的一部分。所以你有几个空字符串作为结果。

但是为什么第一个元素是未定义的而不是空的呢？答案在文档中`split`：如果您不对`split`（其第三个参数）返回的元素数量施加限制，那么它将默默地从列表末尾删除空结果。由于所有项目都为空，因此列表为空，因此第一个元素不存在且未定义。

您可以看到这个特定片段的不同之处：

```
 my @p1 = split "\.", "thing";
 my @p2 = split "\.", "thing", -1;
 print scalar(@p1), ' ', scalar(@p2), "\n"; 
```

它输出`0 6`.

然而，处理这个问题的“正确”方法是@soulSurfer2010 在他的帖子中所说的。

# oop - 冗余参考与历史数据

> ID：12123562
> 
> 赞同：1
> 
> 时间：2012-08-25T16:08:06.727
> 
> 标签：oop, design-patterns, architecture, relational-database

我有一个域模型，其中每个行项目都与一个产品相关联。该产品有一个选项列表。每个选项都是必需的或可选的。用户可以包含一个可选选项，将其添加到行项目的选择列表中。

为了避免冗余，我的第一个想法是从行项目的选择列表中排除所需的选项。有很多必需的选项，因此将它们包含在每个行项目中会导致数据库膨胀。

问题是产品可能会随着时间的推移而发生变化。曾经需要的选项可能会变成可选的，反之亦然。并且可以将全新的选项添加到产品中。这对我最初的想法造成了问题，因为订单项的选择列表的含义将取决于订购时产品的选项。

所以我该怎么做？

1.  如果我还在行项目的选择列表中包含必需的选项，那么模型很简单。我有一个产品包含的选项的快照。但是我在数据库中也有很多膨胀，因为每个行项目都会重复对所需选项的引用。这是我应该担心的事情，还是 SQL Server 会进行某种幕后压缩？

2.  我是否应该继续我最初的想法，即从订单项的选择列表中排除所需选项？然后我需要保留一些有关产品更改的历史数据。这样我就可以重新创建订单时存在的产品及其选项。听起来可能，但比第一个选项更复杂。我担心这会花费更多的 CPU 周期，但如果它用于不会经常打开的旧订单，那将没关系。我以前从来没有自己这样做过，但也许不会那么难。如果这是您推荐的方法，请提供一些设计模式等的指针，以帮助我开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T16:42:07.880

如果您的所需选项列表将来有可能发生变化，我会选择第一个选项。如果您没有将这些选项与数据库中的每个行项目一起存储，那么您必须跟踪哪些选项在哪些日期需要，并单独加入它们。这将不必要地使您的连接逻辑复杂化。

至于使您的数据库膨胀，我认为这不会像您想象的那么糟糕。听起来您可能已经有了连接表，`ProductOptions`并且`LineItemOptions`只包含产品密钥和选项密钥。后一个表应该是唯一一个根据您的第一个设计选择最终拥有更多记录的表。由于它只包含键，它的记录不会占用更多的内存，而且加入它会非常快。

# regex - Node.js Express 路由器中的正则表达式

> ID：12123564
> 
> 赞同：4
> 
> 时间：2012-08-25T16:08:19.307
> 
> 标签：regex, node.js, express

我试图找到一种方法将正则表达式输入到快速路由 URL，然后通过请求对象访问 URL 的可变部分。具体来说，我想路由到 url "/posts/" + 任意位数。有没有办法做到这一点？

例子：

```
/posts/54
/posts/2
/posts/546 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-25T16:15:37.963

这应该这样做：

```
app.get('/posts/:id(\\d+)', function(req, res) {
    // id portion of the request is available as req.params.id
}); 
```

**编辑**：将正则表达式添加到路径以将其限制为数字

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T16:19:27.823

我同意约翰尼的观点，我唯一的补充是你可以为任意数量的级别执行此操作。例如：

```
app.get('/users/:id/:karma', function(req, res){
    //Both req.params.id and req.params.karma are available parameters.
}); 
```

您还应该查看 express 文档：[http](http://expressjs.com/api.html) ://expressjs.com/api.html 。请求部分可能对您非常有用。

# node.js - 在 node.js 中计时 Web 请求

> ID：12123567
> 
> 赞同：1
> 
> 时间：2012-08-25T16:08:36.227
> 
> 标签：node.js, web

鉴于 Node 的异步特性，很难对一系列 Web 请求进行计时。我将如何触发 100 个网络请求并计算每个单独的请求需要多长时间？知道操作系统只允许几个并发的 Web 请求，我如何获得每个单独的 Web 请求的时间，消除等待其他连接完成所花费的时间。我希望在请求启动时触发套接字事件，但似乎在建立连接后触发了套接字事件。

```
var http = require('http');

var urls = [
    '/cameron',
    '/sara',
    '...',

// Time a url collection.
function timeUrl(url, calback) {
    var options = {  
        host: 'www.examplesite.com',   
        port: 80,   
        path: ''  
    };      
    var times = [];
    times.push({'text': 'start', 'time':Date.now()});

    http.get(options, function(res) {
        times.push({'text': 'response', 'time':Date.now()});    

        var result = '';        
        res.on('data', function(chunk) {  
            result += chunk.length ;
            // result += chunk;        
        });   
        res.on('end', function() {  
            times.push({'text': 'end', 'time': Date.now(), 'body': result, 'statusCode': res.statusCode}); // ,   
            calback(times);
        });
    }).on('error', function(e) {  
        calback();
        console.log("Got error: " + e.message);
        times.push({'error':Date.now()});
    }).on('socket', function (response) {
         times.push({'text': 'socket', 'time':Date.now()});
    });
}
for (var i = 0; i < urls.length; i++) {
    var url = urls[i];
    timeUrl(url, function(times) {
        console.log(url);
        for (var i = 0; i < times.length; i++) {
            console.log(times[i].text, times[i].time - times[1].time , 'ms');
        }
        console.log('statusCode:', times[times.length -1].statusCode, 'Response Size:', times[times.length -1].body);   
         console.log('-');
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T16:13:09.830

为了便于使用，做你想做的事，我还没有看到任何比[Nodetime 更好](http://nodetime.com/)的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T22:08:52.863

如果您担心操作系统并发性，只需在您的请求中引入最大并发性（节流），而不是试图猜测操作系统何时启动。我跳过了一些小细节，比如错误处理和使用优秀的[async.js](https://github.com/caolan/async)库：

```
var http  = require('http')
  , async = require('async')
  , CONCURRENCY = 5 // edit to fit your OS concurrency limit
  , results = {}
  , urls = [
    '/cameron',
    '/sara',
    '/...'
];

// Time a url collection.
function timeUrl(url, callback) {
    var options = { host: 'www.examplesite.com', port: 80 }
      , start = Date.now()
      , socket = null;
    options.path = url;

    http.get(options, function(res) {
      var response = Date.now()
        , size = 0;
        res.on('data', function(chunk) { size += chunk.length; });   
        res.on('end',  function() {
          var end = Date.now();
          results[url] = { start: start, socket: socket, response: response, end: end, size: size };
          callback();
        });
    }).on('error', function(e) {
      results[url] = { start: start, socket: socket, error: Date.now(), stack: e };
      callback();
    }).on('socket', function () {
      socket = Date.now();
    });
}

async.forEachLimit(urls, CONCURRENCY, timeUrl, function() {
  console.log(JSON.stringify(results));
}); 
```

# python - Python argparse required=True 但 --version 功能？

> ID：12123568
> 
> 赞同：23
> 
> 时间：2012-08-25T16:08:54.940
> 
> 标签：python, command-line-arguments, argparse

在我的所有脚本中，我都使用标准标志`--help`，`--version`但是我似乎无法弄清楚如何`--version`使用`parser.add_argument(..., required=True)`.

```
import sys, os, argparse

parser = argparse.ArgumentParser(description='How to get --version to work?')

parser.add_argument('--version', action='store_true', 
                    help='print version information')
parser.add_argument('-H', '--hostname', dest='hostname', required=True, 
                    help='Host name, IP Address')
parser.add_argument('-d', '--database', dest='database', required=True,
                    help='Check database with indicated name')
parser.add_argument('-u', '--username', dest='username', required=True, 
                    help='connect using the indicated username')
parser.add_argument('-p', '--password', dest='password', required=True, 
                    help='use the password to authenticate the connection')

args = parser.parse_args()

if args.version == True:
    print 'Version information here'

$ ./arg.py  --version 
usage: arg.py [-h] [--version] -H HOSTNAME -d DATABASE -u USERNAME -p PASSWORD 
arg.py: error: argument -H/--hostname is required 
```

是的，我想`--hostname` *和其他人*需要，但我*总是*想像（和）`--version`一样适当地工作。`--help``-h`

```
$ ./arg.py  --help   
usage: arg.py [-h] [--version] -H HOSTNAME -d DATABASE -u USERNAME -p PASSWORD

How to get --version to work?

optional arguments:
  -h, --help            show this help message and exit
  --version             print version information
  -H HOSTNAME, --hostname HOSTNAME
                        Host name, IP Address
  -d DATABASE, --database DATABASE
                        Check database with indicated name
  -u USERNAME, --username USERNAME
                        connect using the indicated username
  -p PASSWORD, --password PASSWORD
                        use the password to authenticate the connection 
```

`--version`上班有什么帮助吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-25T16:13:50.460

有一个特殊的*版本* `action`关键字参数`add_argument`（如此处所述：[argparse#action](http://docs.python.org/library/argparse.html#action)）。
试试这个（从工作代码复制）：

```
parser.add_argument('-V', '--version', 
                    action='version',                    
                    version='%(prog)s (version 0.1)') 
```

# html - 将网页嵌入到 Exchange Outlook 电子邮件中？框架

> ID：12123569
> 
> 赞同：3
> 
> 时间：2012-08-25T16:08:59.307
> 
> 标签：html, iframe, format, exchange-server, webpage

我有一个网页，其中只有文本和一些我想嵌入到 Exchange 电子邮件中的格式。

我可以在给 Exchange 用户的电子邮件中格式化 iFrame 吗？

我已经尝试过这样的事情，但没有来自网络邮件交换客户端的运气。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T16:12:16.560

在电子邮件中使用 iframe 在实践中不起作用，因为它存在很大的安全风险，因此所有 iframe 等都会被反垃圾邮件和电子邮件客户端阻止。

考虑嵌入一个链接 - 仍然 - 它也是一种威胁，有时它可以更频繁地被阻止，而不是没有链接的消息。

最好是同时制作文本和html版本，在两者中嵌入链接，这样可以获得更高的通过机会。

# c++ - 模板隐式实例化和内联成员

> ID：12123570
> 
> 赞同：4
> 
> 时间：2012-08-25T16:09:00.473
> 
> 标签：c++, templates, instantiation

我想知道什么时候调用模板类的成员函数。定义在哪里生成？例如：

```
template <class T>
class A{
     public:
     A(){cout << "A<T>::A() " << endl;}
     void f(){cout << "A<T>::f() " << endl;}
};

int main(){
A<int> ob; // Time t1
ob.f();    // Time t2

} 
```

所以我想知道模板类在*第 1*点和*第 2*`A<int>`点的样子

 ****案例1：**
*时间t1：*

```
 class A<int>{
    public:
    A(){cout << "A<T>::A()" << endl;} // A() body is defined inline
    void f(); // becasue I didn't call A<int>::f yet so there is just a declaration
    }; 
```

*时间t1*

```
 class A<int>{
   public:
   A(){cout << "A<T>::A()" << endl;} // A() body is defined inline
   void f(){cout << "A<T>::f()" << endl;} // f() is defined inline
   }; 
```

**案例 1：**
*时间 t1*

```
class A<int>{
public:
A();
void f();
};

A<int>::A(){cout << "A<T>::A()" << endl;} // this is not inline 
```

*时间t2*

```
 class A<int>{
    public:
    A();
    void f();
    };

A<int>::A(){cout << "A<T>::A()" << endl;} // this is not inline
void A<int>::f(){cout << "A<T>::f() " << endl;}// this is not inline 
```

那么这两种情况中哪一种是正确的呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T16:27:27.783

案例 1 和案例 2 都不是。您的问题“定义在哪里生成”并没有真正的意义。也许您的意思是，“类成员函数的实例化点在哪里”。在这种情况下，答案是：它们在哪里使用。所以构造函数在这一行被实例化：

```
A<int> ob; // Time t1 
```

..并`f()`在这一行被实例化：

```
ob.f();    // Time t2 
```

成员函数是否在类中定义并不重要。

同样重要的是要注意，即使函数没有被实例化，如果它们没有被使用，编译器仍然会解析函数内的代码并对它们进行*一些*语义分析。想一想：你显然不能把 gobbledygook 放在那里并期望编译器吃掉它。（一些编译器，我在看你的 MSVC，在这方面比他们应该做的要宽松。）这个初步分析，甚至在模板参数已知之前，被称为*阶段 1*。在知道模板参数之前，无法进行一些语义分析，例如类型相关表达式中的名称查找。该分析在*第 2 阶段*完成，这些错误仅在函数被实例化时才被捕获——在它们的使用点。

实例化函数意味着什么？实际上，这意味着编译器作为解析和初步语义分析的结果构建的内部表示通过提供模板参数进一步分析，并将结果传递给编译器后端，将其作为代码发送到目标文件，以及函数的错误名称，以便链接器可以找到它。*这*就是函数“生成”的地方。**

# html - FF 没有选择 CSS

> ID：12123576
> 
> 赞同：0
> 
> 时间：2012-08-25T16:11:13.840
> 
> 标签：html, css, firefox

FF 不会在某些 div 上显示导入的字体或渐变和边框半径，但我真的不知道为什么。

[这是网站](http://www.inside-guides.co.uk/brentwood/pages/index.html)，标题的字体应该是 Arial Rounded MT Bold，中间的 h2 渐变不显示，左右导航 div 和标题的边框半径应该是 5px，Twitter 语音气泡不正确显示。

如果有人可以与 Chrome 进行比较，那就太好了，这就是它应该看起来的样子..

这是字体的CSS：

```
@font-face {font-family:'Arial Rounded MT Bold';src: url("/Fonts/ArialRoundedBold.ttf") format('truetype');}
@font-face {font-family:'Arial Rounded MT Light';src: url("/Fonts/ArialRoundedLight.ttf") format('truetype');} 
```

未显示的 H2 中间渐变：

```
#middle h2 {margin-bottom:5px;color:#293346;font-size:22px;padding:3px 2.3%;background:-webkit-gradient(linear, left top, left bottom, from(#EBEBEC), to(lightGrey));background: -moz-linear-gradient(top,  #EBEBEC,  #lightGrey);filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#EBEBEC', endColorstr='#dcdcdc');border:1px solid #d5d5d5;-webkit-border-top-right-radius: 10px;-webkit-border-top-left-radius: 10px;-moz-border-radius-topright: 10px;-moz-border-radius-topleft: 10px;border-top-right-radius: 10px;border-top-left-radius: 10px;} 
```

例如，“目录”的左上角导航标题应该有一个边框半径：

```
#left-nav .quickjump h2 {border:1px solid #4D535C;padding:2px 0;background:#676E79;color:#fff;text-shadow:0 1px 0 #5d5e80;font-size:14px;border-top-right-radius:0;border-top-left-radius:0;-webkit-border-top-right-radius: 5px;-webkit-border-top-left-radius: 5px;-moz-border-radius-topright: 5px;-moz-border-radius-topleft: 5px;text-indent:10px;-webkit-gradient(linear, left top, left bottom, from(#808792), to(#727A86));background: -moz-linear-gradient(top,  #808792,  #727A86);filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#808792', endColorstr='#727A86');} 
```

右侧导航语音气泡，其中“语音”位显示不正确：

```
.twtr-tweet {
    background-color: #Ffffff !important;
    border-radius: 5px;
    box-shadow: 0 0 6px #777777;
    display: inline-block;
    padding: 10px 18px;
    position: relative;
    vertical-align: top;float: left; !important;
    width:60%;}

.twtr-tweet::before {
    background-color: #Ffffff;
    content: "\00a0";
    display: block;
    height: 16px;
    position: absolute;
    top: 11px;
    transform:             rotate( 29deg ) skew( -35deg );
        -moz-transform:    rotate( 29deg ) skew( -35deg );
        -ms-transform:     rotate( 29deg ) skew( -35deg );
        -o-transform:      rotate( 29deg ) skew( -35deg );
        -webkit-transform: rotate( 29deg ) skew( -35deg );
    width:  20px;
}
#tweet-id-1 {float: left;margin: 5px 10%;}
#tweet-id-1::before {box-shadow: -2px 2px 2px 0 rgba( 178, 178, 178, .4 );left: -9px;}
#tweet-id-2 {float: right;margin: 5px 10%;}
#tweet-id-2::before {box-shadow: 2px -2px 2px 0 rgba( 178, 178, 178, .4 );right: -9px;}
#tweet-id-3 {float: left;margin:5px 10%;}
#tweet-id-3::before {box-shadow: -2px 2px 2px 0 rgba( 178, 178, 178, .4 );left: -9px;}
#tweet-id-4 {float: right;margin: 5px 10%;}
#tweet-id-4::before {box-shadow: 2px -2px 2px 0 rgba( 178, 178, 178, .4 );right: -9px;} 
```

很感谢任何形式的帮助..

** 我修复了问题 - 字体是错误的 URL 和边框半径：0；从 IE 抵消了 Moz 半径......

渐变在字符之间有一个额外的空间。看了好久，突然找到了。。谢谢大家的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T16:18:37.653

叫我疯了，但是您是否尝试过将`@font-face`声明中的字体系列名称更改为*不带*引号的名称？

如果你尝试会发生什么`@font-face {font-family:arial-rounded-bold;src: url("/Fonts/ArialRoundedBold.ttf") format('truetype');}`

例如？

还...@font-face 的最佳实践需要**四个**字体文件：SVG、WOFF、EOT 和 TTF。我不确定使用哪一个 firefox，但为了跨浏览器的兼容性，我强烈建议将您的 TTF 转换为其他格式。

你可以在这里做到这一点：

[http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T16:55:48.193

虽然您至少还应该为 Internet Explorer 包含一个 .EOT，但 FF 确实支持 ttf，而且您的字体语法看起来是正确的。当我在 FF 中查看该站点时，文本看起来不错。

然而，至于梯度，-moz- 写错了。

你有 `-moz-linear-gradient(top, #EBEBEC, #lightGrey);`并且你不能使用`#lightGrey`，因为那没有意义。将其`#`表示为十六进制代码。

它应该是这样的：

`-moz-linear-gradient(top, #ebebec 0%, #cccccc 100%);`

而不是你对所有边界半径使用的那种疯狂的语法，你应该使用类似......

`border-radius: Apx Bpx Cpx Dpx`

...其中 A 是您想要的左上角像素，B 是右上角，C 是右下角，D 是左下角。

然后不是为每个浏览器一遍又一遍地声明这些样式中的每一个......

[去http://leaverou.github.com/prefixfree/](http://leaverou.github.com/prefixfree/)获取 Lea Verou 的 prefixfree.js ，链接到你的 html 底部的脚本，然后让她的 JavaScript 为你添加前缀，这取决于你使用的浏览器访问这页纸。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T16:27:26.733

这个错误可能是问题的一部分吗？

```
 vertical-align: top;float: left; !important; 
```

应该是：

```
vertical-align: top;
float:left !important; 
```

'left' 后面没有分号

# gnuplot - gnuplot ，非数字重复的 x 值

> ID：12123578
> 
> 赞同：4
> 
> 时间：2012-08-25T16:11:25.657
> 
> 标签：gnuplot

我有这样的数据集（文件名“数据”）： 我想将这些数据绘制为点。当我尝试时： 我得到带有 5 个 x 轴值 a、b、c、b、a 的图，但我希望在所有 5 个 y 值的图上只获得 3 个（a、b、c（顺序不重要）） . 是否可以？
`a 10.1
b 10.1
c 10.2
b 15.56
a 3.20`

`plot 'data' using 2:xticlabels(1)`

我的真实数据文件如下所示： 并且有大约一千条记录。
`2-8-16-17-18 962.623408
2-3-4-5-6 -97.527840
2-8-9-10-11 962.623408
2-8-9-10-11 937.101308
2-3-4-5-6 37.101308`

* * *

我不知道如何使用 mgilson 的代码，但他给了我一个想法。我添加到数据文件的附加列（索引）：

```
`1 a 10.1 
2 b 10.1 
3 c 10.2 
2 b 15.56 
1 a 3.20`
```

`之后在 gnuplot 中绘图很容易：
`plot 'data' u 1:3`

我使用 perl，所以我的脚本看起来像这样：

```
#!/usr/bin/perl 
$index_number = 0; 
while (<>) 
{ 
   $line = $_;
   @columns = split(" ",$line);
   $col1 = $columns[0];
   $col2 = $columns[1];
   if( not exists $non_numeric{$col1} )
   {
      $index_number++;
      $non_numeric{$col1} = $index_number;
   }
   print "".$non_numeric{$col1}."\t".$col1."\t".$col2."\n"; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T17:17:54.207

我怀疑您能否提出仅 gnuplot 的解决方案。但是，只要您的系统上安装了 python2.5 或更新版本，这*应该可以工作。*（它适用于您的测试数据）。

```
import sys
import collections

data = collections.defaultdict(list)
keys = []

# build a mapping which maps values to xticlabels (hereafter "keys")
# Keep a second keys list so we can figure out the order we put things into
# the mapping (dict)
with open(sys.argv[1]) as f:
    for line in f:
        key,value = line.split()
        data[key.strip()].append( value )
        keys.append(key.strip())

def unique(seq):
    """
    Simple function to make a sequence unique while preserving order.
    Returns a list
    """
    seen = set()
    seen_add = seen.add
    return [ x for x in seq if x not in seen and not seen_add(x) ]

keys = unique(keys) #make keys unique

#write the keys alongside 1 element from the corresponding list.
for k in keys:
    sys.stdout.write( '%s %s\n' % (k, data[k].pop()) )

# Two blank lines tells gnuplot the following is another dataset
sys.stdout.write('\n\n')

# Write the remaining data lists in order assigning x-values
# for each list (starting at 0 and incrementing every time we get
# a new key)
for i,k in enumerate(keys):
    v = data[k]
    for item in v:
       sys.stdout.write( '%d %s\n' % (i, item) ) 
```

现在绘制这个的脚本：

```
set style line 1 lt 1 pt 1
plot '<python pythonscript.py data' i 0 u 2:xticlabels(1) ls 1,\
     '' i 1 u 1:2 ls 1 notitle 
```

这是它的工作原理。当您执行类似的操作时`plot ... u 2:xticlabels(1)`，gnuplot会*隐式地*将顺序整数 x 值分配给数据点（从 0 开始）。python 脚本重新排列数据以利用这一事实。基本上，我创建了一个映射，它将第一列中的“键”映射到与该键对应的元素列表。换句话说，在您的虚拟数据文件中，键`'a'`映射到值列表`[10.1, 3.2]`. 但是，python 字典（映射）没有排序。因此，我保留了第二个列表来维护顺序（例如，将轴标记为“a”、“b”、“c”而不是“c”、“a”、“b”）。我确保轴列表是唯一的，以便我可以使用它来打印必要的数据。我在 2 遍中写入数据。第一遍仅打印每个列表中的一个值以及映射“键”。第二遍打印其余的值以及 gnuplot 将隐式分配给它们的 x 值。在两个数据集之间，我插入了 2 个空行，以便 gnuplot 可以使用`index`关键字（这里缩写为`i`）。现在我们只需要相应地绘制两个数据集。首先，我们设置了一个线型，以便两个通道在绘制时具有相同的样式。然后我们用 xticlabels 和索引 1 绘制索引 0（第一个数据集），使用 python 脚本计算的 x 值、y 值对 ( `u 1:2`)。抱歉，解释很长（并且原始版本有些错误）。祝你好运，快乐的 gnuplotting！`

# opencv - 如何从opencv中的矩阵推导推导

> ID：12123579
> 
> 赞同：2
> 
> 时间：2012-08-25T16:11:30.177
> 
> 标签：opencv

opencv 中是否有一个选项可以导出 x 和 y in 的第一个推导？

**编辑**mhnm 可能与 cvSobel？但是我必须如何设置 kernelSize？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T17:53:04.730

查看opencv 中的[getDerivKernels](http://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=sobel#void%20getDerivKernels%28OutputArray%20kx,%20OutputArray%20ky,%20int%20dx,%20int%20dy,%20int%20ksize,%20bool%20normalize,%20int%20ktype%29)函数。您需要将一个空的 Mat 传递给它以获取输出。

此矩阵的默认类型是 CV_32F，因此请确保您提供相同类型的 Mat 或将 ktype 更改为与您传递的输出矩阵的类型相同。

可以使用同一函数中的 ksize 选项更改内核的大小。

# php - 如何检查输入框中的数据发布是否为 URL 使用 PHP？

> ID：12123582
> 
> 赞同：0
> 
> 时间：2012-08-25T16:12:09.180
> 
> 标签：php

我想检查来自输入框的数据输入是否是 url 或没有在 Codeigniter 中使用 PHP。如何查看数据？

例如：

```
$data= "test"; 
```

我想检查该数据是 url 还是不使用 php？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T07:54:34.480

我通过使用 parse_url() 函数解决了我的问题。并检查 ['scheme']=='http' || ['方案'] ='https'）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T16:13:50.973

尝试这个 ：

```
if(!filter_var($data, FILTER_VALIDATE_URL)){
  echo "Not URL";
} 
```

或者：

```
function isValidURL($url)
{
    return preg_match('|^http(s)?://[a-z0-9-]+(.[a-z0-9-]+)*(:[0-9]+)?(/.*)?$|i', $url);
}
if(!isValidURL($data)){
    echo 'URL invalide.';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T16:14:44.783

[`parse_url()`](http://php.net/manual/en/function.parse-url.php)：

> 在严重格式错误的 URL 上，parse_url() 可能返回 FALSE。

这在 PHP 4（希望不是你的版本）和 PHP 5 中都有。

如果您有 PHP 5.2 或更高版本，请使用[`filter_var()`](http://us2.php.net/manual/en/function.filter-var.php)：

```
filter_var('http://example.com', FILTER_VALIDATE_URL); 
```

# java - 训练弱学习者

> ID：12123583
> 
> 赞同：3
> 
> 时间：2012-08-25T16:12:10.540
> 
> 标签：java, machine-learning, artificial-intelligence, classification, adaboost

我正在使用 AdaBoost 实现一个应用程序来分类大象是亚洲大象还是非洲大象。我的输入数据是：

```
Elephant size: 235  Elephant weight: 3568  Sample weight: 0.1  Elephant type: Asian
Elephant size: 321  Elephant weight: 4789  Sample weight: 0.1  Elephant type: African
Elephant size: 389  Elephant weight: 5689  Sample weight: 0.1  Elephant type: African
Elephant size: 210  Elephant weight: 2700  Sample weight: 0.1  Elephant type: Asian
Elephant size: 270  Elephant weight: 3654  Sample weight: 0.1  Elephant type: Asian
Elephant size: 289  Elephant weight: 3832  Sample weight: 0.1  Elephant type: African
Elephant size: 368  Elephant weight: 5976  Sample weight: 0.1  Elephant type: African
Elephant size: 291  Elephant weight: 4872  Sample weight: 0.1  Elephant type: Asian
Elephant size: 303  Elephant weight: 5132  Sample weight: 0.1  Elephant type: African
Elephant size: 246  Elephant weight: 2221  Sample weight: 0.1  Elephant type: African 
```

我创建了一个分类器类：

```
import java.util.ArrayList;

public class Classifier {
private String feature;
private int treshold;
private double errorRate;
private double classifierWeight;

public void classify(Elephant elephant){
    if(feature.equals("size")){
        if(elephant.getSize()>treshold){
            elephant.setClassifiedAs(ElephantType.African);
        }
        else{
            elephant.setClassifiedAs(ElephantType.Asian);
        }           
    }
    else if(feature.equals("weight")){
        if(elephant.getWeight()>treshold){
            elephant.setClassifiedAs(ElephantType.African);
        }
        else{
            elephant.setClassifiedAs(ElephantType.Asian);
        }
    }
}

public void countErrorRate(ArrayList<Elephant> elephants){
    double misclassified = 0;
    for(int i=0;i<elephants.size();i++){
        if(elephants.get(i).getClassifiedAs().equals(elephants.get(i).getType()) == false){
            misclassified++;
        }
    }
    this.setErrorRate(misclassified/elephants.size());
}

public void countClassifierWeight(){
    this.setClassifierWeight(0.5*Math.log((1.0-errorRate)/errorRate));
}

public Classifier(String feature, int treshold){
    setFeature(feature);
    setTreshold(treshold);
} 
```

我在 main() 中训练了一个按“大小”和阈值 = 250 进行分类的分类器，如下所示：

```
 main.trainAWeakClassifier("size", 250); 
```

在我的分类器对每只大象进行分类后，我计算分类器错误，更新每个样本（大象）的权重并计算分类器的权重。我的问题是：

如何创建下一个分类器以及它如何更关心错误分类的样本（我知道样本权重是关键，但它是如何工作的，因为我不知道如何实现它）？我是否正确创建了第一个分类器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T04:44:22.107

好吧，您计算错误率并可以对实例进行分类，但是您缺少的是分类器的更新并将它们按照 Ada Boost 公式组合成一个。看看这里的算法： [维基百科的 Ada Boost 网页](http://en.wikipedia.org/wiki/AdaBoost)

# php - 如何使用 preg_replace 替换斜线内的所有内容？（仅替换每隔一个匹配项）

> ID：12123587
> 
> 赞同：1
> 
> 时间：2012-08-25T16:12:22.847
> 
> 标签：php, url, preg-replace

我是正则表达式的新手，我一直在尝试将它与 url 一起使用，但我无法让它工作。

我有一个字符串是：

> /插件/插件/插件/插件/插件/插件/

我想将所有字母替换为字符串“{char}”，以便字符串最终成为：

> /{char}/{char}/{char}/{char}/{char}/{char}/

我试过这个：

```
<?php
    $pattern        = '#(/)([a-z\_]+)(/)#'; 
    $replacement    = '$1{char}$3'; 
    $string         = '/plugins/plugins/plugins/plugins/plugins/plugins/';

    echo preg_replace($pattern, $replacement, $string);
?> 
```

但是这段代码导致了这个：

> /{char}/plugins/{char}/plugins/{char}/plugins/

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T16:17:02.037

问题是您的正则表达式匹配`/plugins/`- 在前面和结尾都匹配斜线。每个字母仅由正则表达式匹配一次，因此如果斜线在一个单词的末尾匹配，它也不能算作另一个单词的开头。因此，它只匹配每个其他的。

试试这个：

```
<?php
    $pattern        = '#(/)([a-z\_]+)(?=/)#'; 
    $replacement    = '$1{char}'; 
    $string         = '/plugins/plugins/plugins/plugins/plugins/plugins/';

    echo preg_replace($pattern, $replacement, $string);
?> 
```

它通过使用[前瞻](http://www.regular-expressions.info/lookaround.html)来工作，而不是实际匹配最终的斜杠（并“消耗”它）它只是检查以确保它在那里。

# ajax - 用户离开页面时删除会话变量

> ID：12123588
> 
> 赞同：0
> 
> 时间：2012-08-25T16:12:33.303
> 
> 标签：ajax, asp.net-mvc-2, session-variables

1.  我有一个页面，该页面设置了一个会话变量，以在加载页面时保存来自该页面的数据库的查找列表。

2.  当从浏览器进行 Ajax 调用时，该页面还需要访问该查找列表。

我不想为每个 Ajax 调用从数据库中加载查找列表，但如果用户离开页面，我想从会话中删除查找列表。是否有这样做的最佳实践或推荐策略？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T16:35:53.990

您可以使用类似这样的方法使用 javascript 清除会话变量

```
window.onbeforeunload = cleanup;
function cleanup()
{
    // Clear session variable here
} 
```

然而，这并不是万无一失的，因为用户总是可以禁用 javascript 等。通常这不会是一个问题，因为会话变量无论如何都会有超时。如果您真的很担心，您应该在页面加载时删除所有当前会话。

根据您的情况，另一种选择是使用[`Caching.Cache`](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)类来保存值。当您[将](http://msdn.microsoft.com/en-us/library/41ttybaf)值插入缓存时，您可以将它们设置为在 a 之后过期`TimeSpan`，并将其设置为相当短的时间，例如 5 分钟左右。

请注意，虽然会话是每个用户的，但每个服务器实例只有一个缓存。

# ios - 视图控制器之间的快速更改崩溃

> ID：12123589
> 
> 赞同：1
> 
> 时间：2012-08-25T16:12:49.957
> 
> 标签：ios, mapkit, exc-bad-access, core-location

目前我正在测试一个几乎完成的应用程序。一般来说，它运作良好。

但是我已经看到，当我在使用 MapKit 和 CoreLocation 的视图控制器和仅显示一些简单按钮的普通视图控制器之间快速切换时，应用程序正在崩溃（可重现，但在随机时间）。

崩溃发生在返回普通 VC 后。如此快速的变化不是用户通常的使用场景，我这样做只是因为测试太无聊了 ;-) - 但现在我知道某处有错误。

有没有人有想法，在哪里看？请参阅下面设备的错误报告 - 它看起来总是一样的。Xcode 中的错误消息是不同的，但总是带有无法识别的选择器。顺便提一句。我不使用必须来自框架的 performSelector:withObject:。

我倾向于猜测，当从这个 VC 快速返回时，有一些来自 MKMapView 或 CoreLocation 的内部初始化任务没有完成，这些是导致问题的原因吗？

Xcode 中的错误消息：

> 2012-08-25 17:26:20.375 Kanal01[4070:707]-[__NSCFArray mapView:didUpdateUserLocation:]：无法识别的选择器发送到实例 0x10b030
> 2012-08-25 17:26:20.384 Kanal01[4070:707] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFArray mapView:didUpdateUserLocation:]: unrecognized selector sent to instance 0x10b030'
> *** First throw call stack: (0x374fa88f 0x351ff259 0x374fda9b 0x374fc915 0x37457650 0x36f13e63 0x374591fb 0x37495ab9 0x36f09b21 0x36badde3 0x36bad785 0x36ba7e4f 0x374ceb01 0x374ce12f 0x374cd351 0x374504a5 0x3745036d 0x33c0f439 0x311fccd5 0xa9eed 0xa9e88) 终止调用抛出异常

设备日志内容：

> 异常类型：EXC_BAD_ACCESS (SIGSEGV)
> 异常代码：0x00000000 处的 KERN_INVALID_ADDRESS
> 线程崩溃：0
> 
> Thread 0 name: Dispatch queue: com.apple.main-thread
> Thread 0 Crashed:
> 0 libobjc.A.dylib 0x36fe8f7e 0x36fe5000 + 16254
> 1 MapKit 0x337b9e5c 0x3378b000 + 192092
> 2 CoreFoundation 0x30c0f1f4 0x30bf7000 + 98804
> 3 CoreFoundation 0x30c4bab2 0x30bf7000 + 346802
> 4 MapKit 0x337afb1a 0x3378b000 + 150298
> 5 CoreLocation 0x33ccaddc 0x33cc2000 + 36316
> 6 CoreLocation 0x33cca77e 0x33cc2000 + 34686
> 7 CoreLocation 0x33cc4e48 0x33cc2000 + 11848
> 8 CoreFoundation 0x30c84afa 0x30b46f700
> 9 CoreFoundation 0x30c84128 0x30bf7000 + 577832
> 10 CoreFoundation 0x30c8334a 0x30bf7000 + 574282
> 11 CoreFoundation 0x30c0649e 0x30bf7000 + 62622
> 12 CoreFoundation 0x30c06366 0x30bf7000 + 62310
> 13 GraphicsServices 0x32c80432 0x32c7c000 + 17458
> 14 UIKit 0x30369cce 0x30338000 + 203982
> 15 Kanal01 0x00069fde 0x68000 + 8158
> 16 Kanal01 0x00069f78 0x68000 + 8056

# wpf - 带有图像的列表视图项目模板

> ID：12123591
> 
> 赞同：0
> 
> 时间：2012-08-25T16:12:55.330
> 
> 标签：wpf, user-interface, listviewitem

我正在尝试创建一个`ListViewItem`看起来像[这样](http://postimage.org/image/sovqijni9/)的模板，但我没有取得太大进展。

这是我到目前为止创建的样式：

```
<ListView.ItemTemplate>
    <DataTemplate>
        <Grid>
            <Border HorizontalAlignment="Stretch" Margin="1.5" CornerRadius="5" BorderThickness="1,1,1,1" BorderBrush="#FF997137">
                <Border.Background>
                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                        <GradientStop Color="#FF4B4B4B" Offset="0" />
                        <GradientStop Color="#FF8F8F8F" Offset="1" />
                    </LinearGradientBrush>
                </Border.Background>
            </Border>
            <StackPanel Orientation="Horizontal" >
                <Image HorizontalAlignment="Left" Width="32" Source="/Images/stop.png" Stretch="Fill" Height="32" />
                <TextBlock Foreground="#FFECAD25" TextWrapping="Wrap" Width="150" >
                    This is a user control. The animation uses the attached BalloonShowing event.
                </TextBlock>
                <StackPanel Orientation="Vertical" >
                    <Image HorizontalAlignment="Right" Margin="0,10,5,0" VerticalAlignment="Top" Width="16" Height="16" Source="/Images/Close.png" Stretch="Fill"
                           Opacity="0.4" ToolTip="Delete" x:Name="Delete" />
                    <Image HorizontalAlignment="Right" Margin="0,5,5,0" VerticalAlignment="Top" Width="16" Height="16" Source="/Images/Close.png" Stretch="Fill"
                           Opacity="0.4" ToolTip="Edit" x:Name="Edit" />
                </StackPanel>
            </StackPanel>
        </Grid>
    </DataTemplate>
</ListView.ItemTemplate> 
```

是否可以扩展图像/图标下方的文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:47:32.657

我不相信有任何开箱即用的方法可以使用“TextBlock”来做到这一点。

但是，如果您能够使用该`FlowDocument`控件，这里有一些选项：[answer 1](https://stackoverflow.com/questions/3339051/wrapping-text-around-an-image-or-linking-two-textblocks-in-c-sharp-wpf)，[answer 2](https://stackoverflow.com/questions/9573199/how-do-you-wrap-text-around-an-image-inside-a-list-box-item-in-wpf)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T16:48:34.727

据我所知，没有。至少不是简单的图像和文本块。FlowDocument 似乎是一个很好的解决方案，请查看此链接以获取更多信息： [http ://dotnetslackers.com/articles/wpf/WPFFlowDocumentsAndImages.aspx](http://dotnetslackers.com/articles/wpf/WPFFlowDocumentsAndImages.aspx)

# php - 在codeigniter ci中是否有更好的登录验证设计

> ID：12123592
> 
> 赞同：2
> 
> 时间：2012-08-25T16:13:05.220
> 
> 标签：php, codeigniter

我正在尝试将我的网站转换为 codeigniter 框架我是这里的新手，害怕做出一些愚蠢的设计。有没有更好的建议？

谢谢大家，提前。

下图是我的旧设计 ![在此处输入图像描述](../Images/d377c59686e3b2f906512602fdeb8c74.png)

下图是我为 ci 设计的新设计。（有更好的建议吗？） ![在此处输入图像描述](../Images/4afd823083a20bd26b5d90539e5d792d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T16:19:51.487

如果我没记错的话，codeIgniter 框架支持过滤器。在您的情况下，`beforeFilter`- 在加载控制器之前，将使用 beforeFilter 函数中的代码。

写一个“is_logged”检查，如果是，没问题（继续加载控制器），否则，调用“请登录”函数（当然是登录表单）

# javascript - 重复调用相同的函数会重置 setTimeout 内部函数

> ID：12123596
> 
> 赞同：0
> 
> 时间：2012-08-25T16:13:35.907
> 
> 标签：javascript, settimeout

全部，

我有一个“信用模块”（类似于游戏中的信用系统），当用户执行操作时，它会创建一个内部 div，其中包含要添加或减去的成本，以便用户可以看到最后一个操作的成本是多少。

问题：只要调用一次函数，一切正常，如果用户快速执行多个操作，则 setTimeout 函数（假设动画然后删除成本 div）不会执行。似乎该函数的第二个实例重置了第一个的 setTimeout 函数。

```
(function()
{

$("#press").on("click", function(){creditCost(50)});

function creditCost(x)
{
var eParent = document.getElementById("creditModule");
// following code creates the div with the cost
eParent.innerHTML += '<div class="cCCost"><p class="cCostNo"></p></div>';
var aCostNo = document.getElementsByClassName("cCostNo");
var eLatestCost = aCostNo[aCostNo.length - 1];
// following line assigns variable to above created div '.cCCost'
var eCCost = eLatestCost.parentNode;
// cost being assigned
eLatestCost.innerHTML = x;
$(eCCost).animate ({"left":"-=50px", "opacity":"1"}, 250, "swing");
// following code needs review... not executing if action is performed multiple times quickly
setTimeout(function()
{
    $(eCCost).animate ({"left":"+=50px", "opacity":"0"}, 250, "swing", function ()
    {
        $(eCCost).remove();
    })  
}, 1000);
}

})(); 
```

[jsfiddle，请原谅 CSS](http://jsfiddle.net/ShCHD/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T16:18:43.023

```
eParent.innerHTML += '<div class="cCCost"><p class="cCostNo"></p></div>'; 
```

是坏线。这会重置`innerHTML`您的元素，重新创建整个 DOM 并销毁在先前调用中引用的元素 - 让它们的超时失败。有关详细信息，请参阅[“innerHTML += ...”与“appendChild(txtNode)”](https://stackoverflow.com/q/2305654/1048572)。既然有 jQuery，为什么不使用它呢？

```
function creditCost(x) {
    var eParent = $("#creditModule");
    // Create a DOM node on the fly - without any innerHTML
    var eCCost = $('<div class="cCCost"><p class="cCostNo"></p></div>');

    eCCost.find("p").text(x); // don't set the HTML if you only want text

    eParent.append(eCCost); // don't throw over all the other children
    eCCost.animate ({"left":"-=50px", "opacity":"1"}, 250, "swing")
          .delay(1000) // of course the setTimeout would have worked as well
          .animate ({"left":"+=50px", "opacity":"0"}, 250, "swing", function() {
               eCCost.remove();
          });  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T16:16:52.487

您正在启动一个动画并安排一个超时来处理 DOM 元素，如果用户快速单击，这些元素将在该操作的中间被修改。您有两个选项可以解决此问题：

1.  在第二次单击时添加新项目是安全的，这样它就不会弄乱以前的动画。
2.  在开始新的动画之前停止以前的动画并清理它们。

您可以通过以下重写和简化代码来实现任一行为。您可以通过是否包含第一行代码来控制是否获得行为 #1 或 #2。

```
function creditCost(x) {
    // This first line of code is optional depending upon what you want to happen when the 
    // user clicks rapid fire.  With this line in place, any previous animations will
    // be stopped and their objects will be removed immediately
    // Without this line of code, previous objects will continue to animate and will then
    // clean remove themselves when the animation is done
    $("#creditModule .cCCost").stop(true, false).remove();

    // create HTML objects for cCCost
    var cCCost = $('<div class="cCCost"><p class="cCostNo">' + x + '</p></div>');
    // add these objects onto end of creditModule
    $("#creditModule").append(cCCost);

    cCCost
        .animate ({"left":"-=50px", "opacity":"1"}, 250, "swing")
        .delay(750)
        .animate({"left":"+=50px", "opacity":"0"}, 250, "swing", function () {
            cCCost.remove();
        });  
    }
})(); 
```

请注意，我从 更改`setTimeout()`为`.delay()`以便更容易停止所有未来的操作。如果您继续使用 setTimeout()，那么您需要保存从中返回的 timerID，以便您可以调用`clearTimeout()`. 使用`.delay()`, jQuery 为我们做这件事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T05:41:18.730

为可能想主要使用 javascript 的任何人更新了代码。[Jsfiddle，请原谅 CSS。](http://jsfiddle.net/ShCHD/2/)

```
function creditCost(x)
{
    var eParent = document.getElementById("creditModule");
    var eCCost = document.createElement("div");
    var eCostNo = document.createElement("p");
    var sCostNoTxt = document.createTextNode(x);
    eCCost.setAttribute("class","cCCost");
    eCostNo.setAttribute("class","cCostNo");
    eCostNo.appendChild(sCostNoTxt);
    eCCost.appendChild(eCostNo);
    eParent.insertBefore(eCCost, document.getElementById("creditSystem").nextSibling);
    $(eCCost).animate ({"left":"-=50px", "opacity":"1"}, 250, "swing");
    setTimeout(function()
    {
        $(eCCost).animate ({"left":"+=50px", "opacity":"0"}, 250, "swing", function ()
        {
            $(eCCost).remove();
        })  
    }, 1000);
} 
```

# django - Django - 登录用户的帖子列表

> ID：12123600
> 
> 赞同：1
> 
> 时间：2012-08-25T16:13:54.440
> 
> 标签：django, django-models, django-views

有一个博客项目。它现在正常工作。会有多个用户。

我想列出由现在登录的用户创建的帖子。如果“x”用户登录，他必须在**管理页面**上看到他自己的帖子。

什么是正确的方法？

这是我的models.py：

```
class Post(models.Model):
    title = models.CharField(max_length = 100)
    body = models.TextField()
    slug = AutoSlugField(populate_from='title',unique=True)
    posted = models.DateField(auto_now_add=True)
    isdraft = models.BooleanField(default=False)

    def __unicode__(self):
        return self.title()

    @permalink
    def get_absolute_url(self):
        return ('view_blog_post',None, {'postslug':self.slug})

class UserProfile(models.Model):
    user = models.OneToOneField(User)

def create_user(sender,instance,created,**kwargs):
    if created:
        UserProfile.objects.create(user=instance)

post_save.connect(create_user, sender=User) 
```

和我的views.py（只是管理页面的一部分）：

```
@login_required(login_url='/panel/')
def adminView(request):
    if request.session['loggedin']=="djangoo":

        draft_list = Post.objects.filter(isdraft=True).order_by("-posted")
        p_draft = Paginator(draft_list,15)

        publish_list = Post.objects.filter(isdraft=False).order_by("-posted")
        p_publish = Paginator(publish_list,15)

        page = request.GET.get('page')

        try:
            post_d = p_draft.page(page)
            post_p = p_publish.page(page)
        except PageNotAnInteger:
            post_d = p_draft.page(1)
            post_p = p_publish.page(1)
        except EmptyPage:
            post_d = p_draft.page(p_draft.num_pages)
            post_p = p_publish.page(p_publish.num_pages)

        return render_to_response('admin.html',
                                  {'draft_list':draft_list,'publish_list':publish_list,'post_d':post_d,'post_p':post_p},
                                 context_instance=RequestContext(request))
    else:
        HttpResponseRedirect('/panel/') 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T16:38:00.900

您必须将发布它的用户存储在您的帖子模型中，然后您可以轻松过滤掉这些用户。

我会更新模型，如：

```
class Post(models.Model):
    owner = models.ForeignKey('User')
    # your other fields 
```

和管理员视图：

```
@login_required(login_url='/panel/')
def adminView(request):
    draft_list = Post.objects.filter(owner=request.user).filter(isdraft=True).order_by("-posted")
    #------------------------------^^^^ filter based on owner
    p_draft = Paginator(draft_list,15)

    publish_list = Post.objects.filter(owner=request.user).filter(isdraft=False).order_by("-posted")
    p_publish = Paginator(publish_list,15)
    #your other view code
    ... 
```

此外，您还必须更新添加帖子的视图`owner`。

# c# - 如何对 DropDownButton 项目进行排序？

> ID：12123606
> 
> 赞同：0
> 
> 时间：2012-08-25T16:15:17.353
> 
> 标签：c#, xml, winforms

我通过 xml 节点填充 DropDownButton

```
foreach (System.Xml.XmlNode node in kats.SelectNodes("Kats/Kat"))
{
btnKats.DropDownItems.Add(node.InnerText);
} 
```

并且需要对项目进行排序，例如：

```
btnKats.DropDownItems.Sort... // how can I do this 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T16:19:55.920

使用 System.Linq；

```
....

foreach (System.Xml.XmlNode node in 
    kats
        .SelectNodes("Kats/Kat")
        .OfType<System.Xml.XmlNode>() 
        .OrderBy( node => node.InnerText )
         )
{
  btnKats.DropDownItems.Add(node.InnerText);
} 
```

手头没有编译器和这一行

```
 .OfType<System.Xml.XmlNode>() 
```

可能不需要。但是，我不确定是否`SelectNodes`返回`IEnumerable<XmlNode>`或只是`IEnumerable`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T16:23:04.920

将 .OrderBy() 添加到 SelectNodes() 的末尾

```
 foreach(System.Xml.XmlNode node in kats.SelectNodes("Kats/Kat").OfType<XmlNode>.OrderBy(node.InnerText))
    {
        btnKats.DropDownItems.Add(node.InnerText);
    } 
```

编辑：Wiktor 是正确的，我相信需要添加 .OfType 所以我也在这里添加它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T16:25:32.230

你不能。

但是你可以这样做：

```
List<string> list = (List<string>) btnKats.DropDownItems;
list.Sort();
btnKats.DropDownItems = list; 
```

基本原理是 DropDownItems 是一个 ToolStripItemCollection，它实现了一个普通的 IList（对象）。由于对象不是自然可比的，因此您无法对 IList 进行排序，但您可以将其强制转换为 List<string> 并对其进行排序。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripitemcollection.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripitemcollection.aspx)

祝你好运！

# css-float - 浮动：跨浏览器的左侧问题

> ID：12123612
> 
> 赞同：0
> 
> 时间：2012-08-25T16:16:59.983
> 
> 标签：css-float

我正在尝试对齐“热门选择”选项卡，使其位于我的网站[http://www.loveartmusicbaby.com](http://www.loveartmusicbaby.com)的幻灯片旁边，该网站在 Firefox 中使用浮动：左代码如下所示。但是我怎样才能让它在 Chrome 和 IE 上也能正常工作呢？：/

```
<img src="http://img692.imageshack.us/img692/4756/tabcv.png" alt="art music fashion" style="float: left;" /><div id="s3slider"><ul id="s3sliderContent">

<li class="s3sliderImage"><a href="http://lovetest22.blogspot.co.uk/2012/06/as-beth-dittos-collaboration-with-m.html#more"><img style="width:569px;height:341px;" src="http://img138.imageshack.us/img138/2513/wasex.jpg" /><span>Why we <font color="ff00ae">love </font> fashion designer, Hayley Scanlan</span></a></li>

<li class="s3sliderImage"><a href="YOUR-LINK-HERE"><img style="width:569px;height:341px;" src="http://img832.imageshack.us/img832/1678/dollnp.jpg" /><span> The First Ladies of music feat. <font color="ff00ae">Kimbra </font> </span></a></li>

<li class="s3sliderImage"><a href="YOUR-LINK-HERE"><img style="width:569px;height:341px;" src="http://img513.imageshack.us/img513/4583/fdaw.jpg" /><span>Meet <font color="ff00ae">Helen Green</font>, the coolest Little Monster around. </span></a></li>

<li class="s3sliderImage"><a href="YOUR-LINK-HERE"><img style="width:569px;height:341px;" src="http://img521.imageshack.us/img521/7456/saudin.jpg" /><span> Cute as <font color="ff00ae">candy:</font> The Saudi fashion designer causing a stir</span></a></li>

<li class="s3sliderImage"><a href="YOUR-LINK-HERE"><img style="width:550px;height:200px;" src="http://2.bp.blogspot.com/_4HKUHirY_2U/S9aKtosfYNI/AAAAAAAAA-o/GTCV0pnicVk/s1600/call+of+duty-11.jpg" /><span>Call Of Duty 4 : Get Here</span></a></li>

</ul></div>

<div class='clear'></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:28:22.973

`#s3slider`根本不适合父母的宽度。尝试

```
#s3slider {
     width:560px;
} 
```

# javascript - 如何从 Backbone.Collection 中删除模型

> ID：12123614
> 
> 赞同：0
> 
> 时间：2012-08-25T16:17:12.413
> 
> 标签：javascript, arrays, backbone.js

我想从集合中删除一个模型：

```
var item = new Backbone.Model({
    id: "01",
    someValue: "blabla",
    someOtherValue: "boa"
});

var list = new Backbone.Collection([item]);

list.get("01").destroy(); 
```

结果：

项目仍在主干阵列中....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T17:05:41.840

我对接受的答案有所保留。当模型被销毁时，“destroy”事件会在该模型所在的任何集合中冒泡。因此，当您销毁模型时，您不必同时从列表中删除该模型。

```
model.destroy(); 
```

应该够了。

查看您的代码，它看起来是正确的：（如果意图是销毁+删除，而不仅仅是删除）

```
list.get('01').destroy(); 
```

Are you sure that your resource is getting properly destroyed? Have you tried placing a success and error callback in your destroy() call to ensure the destroy was executed? For example, if your model URL is incorrect and it can't access the resource, the destroy call would return an error and your collection will still have the model. This would exhibit the symptoms you outline in your question.

By placing the remove() after the destroy call, your collection will definitely remove the model. But that model will still be floating around (still persisted). This may be what you want, but since you're calling destroy() I'm assuming you want to obliterate it completely. If this is the case, while remove seems to work, what it's really doing is masking that your model has been destroyed when in fact it may not.

Thus, this is what I have a feeling is actually happening. Something is preventing the model from being destroyed. That's why when you call destroy(), then check your collection - the model is still there.

I could be wrong though. Could you check this and update your findings?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T16:32:07.937

您还应该从集合中删除模型。

```
var model = list.get('01');
model.destroy();
list.remove(model); 
```

# android - Intent.ACTION_GET_CONTENT type = "audio/*" 不起作用 - 显示所有文件

> ID：12123615
> 
> 赞同：3
> 
> 时间：2012-08-25T16:17:21.103
> 
> 标签：android, audio, android-intent, filechooser

我有一个按钮，我想打开任何文件管理器，并允许用户只选择音频文件。所以我写了这样的东西：

```
Intent intent = new Intent();
intent.setType("audio/*");
intent.setAction(Intent.ACTION_GET_CONTENT);
startActivityForResult(Intent.createChooser(intent, "Select audio", SELECTED_AUDIO); 
```

但是，这不起作用-它打开文件管理器（在我的情况下为Astro）和voalaaa-我可以查看并选择我想要的任何文件-我的意思是文本文件、视频文件等。简单它不会过滤或检查任何东西......我做错了什么？还是Astro的错？我只想显示音频文件，或显示所有文件但只允许选择音频。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T16:41:42.040

> 我究竟做错了什么？

没有。

> 还是Astro的错？

有点。您假设 Astro 知道其所有文件的 MIME 类型，并且它实际上会使用 MIME 类型来过滤结果。没有什么可以迫使 Astro 做这两件事。这同样适用于任何文件管理器或任何其他响应`ACTION_GET_CONTENT`for 的东西`audio/*`。现在，如果 Astro 可以进行过滤或其他操作，那就*太好*了，但这是您必须解决的问题。

# ios - ios5.0 和 ios5.1 之间的 splitview poperver 问题

> ID：12123617
> 
> 赞同：0
> 
> 时间：2012-08-25T16:17:24.297
> 
> 标签：ios, ios5, uisplitviewcontroller

我已经研究了几乎所有我能找到的关于这方面的帖子，并且已经到了可以使用一些帮助的地步。

我的项目是使用故事板构建的通用应用程序。iPad 版本使用拆分视图控制器。主视图关系是带有视图控制器的导航控制器。详细视图是带有视图控制器的导航控制器。

在不知不觉中，我使用 iPad 5.1 模拟器构建并测试了该应用程序。在意识到这个小细节并需要 iOS 5.0 兼容性后，我开始在 ios 5.0 中进行测试。

发生了两个重大变化：a）拆分视图显示在弹出窗口中，而不是像 5.1.1 中那样全屏显示（实际上我更喜欢弹出窗口）和 b）我的代码以编程方式隐藏和显示在 5.1 中完美运行的弹出窗口/拆分屏幕在 5.0 中不起作用 - “显示”实际上会使应用程序崩溃。我构建了几种方法来显示/隐藏弹出框以补充 UI，而不仅仅是依赖于方向更改。例如，我使用 show 方法将弹出框纵向放置在屏幕上，但在选择 tableview 后将其移除等。

所以，也许有人可以帮忙。以下是详细信息和问题 - 非常感谢您的帮助：

iOS 5.1 - 显示弹出窗口 - 我使用 splitview 控制器委托调用来获取对弹出框按钮的引用，然后使用按钮操作从方法中显示弹出框。这在 5.1 中完美运行，但在 5.0 中导致此错误：错误：无法从没有窗口的视图中呈现弹出框。（我已经搜索过这个错误，有很多参考资料，但不是我的配置的具体答案）。另外，为什么 5.1 有一个窗口而不是 5.0？

```
//show master view popover
[self.masterPopoverController presentPopoverFromBarButtonItem:self.showMasterViewButton permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

//get the reference from the button
- (void)splitViewController:(UISplitViewController *)splitController willHideViewController:(UIViewController *)viewController withBarButtonItem:(UIBarButtonItem *)barButtonItem forPopoverController:(UIPopoverController *)newpopoverController 
{  
self.showMasterViewButton = [[UIBarButtonItem alloc]initWithTitle:nil style:UIBarButtonItemStyleDone target:barButtonItem.target action:barButtonItem.action];
} 
```

这里的第一个观察是该按钮实际上在 5.0 和 5.1 中都可用，并且在导航栏上显示和工作。然而，在代码中引用相同的按钮会导致 5.0 崩溃并在 5.1 上工作。我不知道为什么。

将其隐藏在 ios 5.0 中的问题相同。在 iOS 5.1 中使用这种方法：

```
 if (self.masterPopoverController) {
    [self.masterPopoverController dismissPopoverAnimated:YES];
} 
```

self.masterPopoverController 在上面列出的同一个 splitview 委托回调中设置。这在 iOS 5.1 中完美运行，但在 iOS 5.0 中没有任何作用

注意 - 更新：我在这里找到了解决我列出的第一个问题的答案：[https](https://github.com/mattgemmell/MGSplitViewController/pull/31) ://github.com/mattgemmell/MGSplitViewController/pull/31 来解决我列出的第一个问题。

```
//grab a reference to the popover controller in the split view delegate call
//splitview ... willHideViewController
self.masterPopoverController = popoverController;

//then add the following to a method and call it when you need it
//this fixes the no window issue in iOS 5.0
[self.masterPopoverController presentPopoverFromRect:CGRectZero inView:[[UIApplication sharedApplication] keyWindow] permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

*   第二个问题是为什么弹出框会变成滑入式，你能在 iOS 5.1 中把它改回来吗？实际上，我喜欢 iOS 5.0 中的弹出框效果，但我无法将幻灯片更改为使用弹出框。我尝试了许多方法来在多个地方更改弹出框的内容大小，但它似乎对拆分视图弹出框没有影响，而类似的代码在其他杂项上也能正常工作。按钮弹出窗口。

我一定错过了这个，但我假设苹果是故意这样做的，但必须有一种方法可以覆盖？

注意：找到了一种解决方案或至少一种在 ios5.1 上模拟 ios5.0 行为的方法

创建一个属性来保存 UIViewController 和另一个属性来保存 UIPopoverController

然后在拆分视图委托回调中获取主视图控制器的副本

```
- (void)splitViewController:(UISplitViewController *)splitController willHideViewController:(UIViewController *)viewController withBarButtonItem:(UIBarButtonItem *)barButtonItem forPopoverController:(UIPopoverController *)newpopoverController { 

self.copyOfMasterViewController = viewController;
} 
```

然后像这样向您的项目添加一个方法：

```
-(void)showsPopover {
  self.ios51popover = [[UIPopoverController alloc]initWithContentViewController:self.masterViewInPopover];

 [self.ios51popover setPopoverContentSize:CGSizeMake(320, 580) animated:NO];
 [self.ios51popover presentPopoverFromRect:CGRectMake(50, 55, 1, 1) inView: [[UIApplication sharedApplication] keyWindow] permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
} 
```

-(void)hidesPopover { [self.ios51popover dismissPopoverAnimated:YES]; }

现在，你拥有两者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T22:07:19.517

第一个片段显示了如何以编程方式在拆分视图中显示弹出框，该视图适用于 ios5.0 和 5.1，并修复了弹出框无法从没有窗口的视图中呈现。注意 - 更新：我在这里找到了解决我列出的第一个问题的答案：[https](https://github.com/mattgemmell/MGSplitViewController/pull/31) ://github.com/mattgemmell/MGSplitViewController/pull/31来解决我列出的第一个问题。

//在拆分视图委托调用中获取对弹出框控制器的引用 //splitview ... willHideViewController

```
self.masterPopoverController = popoverController; 
```

//然后将以下内容添加到方法中并在需要时调用它 //这修复了 iOS 5.0 中的无窗口问题 [self.masterPopoverController presentPopoverFromRect:CGRectZero inView:[[UIApplication sharedApplication] keyWindow] allowedArrowDirections:UIPopoverArrowDirectionAny animated:YES] ;

下一个片段展示了如何以 ios5.0 样式呈现真正的弹出框，而不是苹果在 iOS 5.1 中使用的幻灯片效果

注意：更新：找到了一个解决方案或至少一种方法来模拟 ios5.1 上的 ios5.0 行为创建一个属性来保存 UIViewController 和另一个保存 UIPopoverController

然后在拆分视图委托回调中获取主视图控制器的副本

```
- (void)splitViewController:(UISplitViewController *)splitController willHideViewController:(UIViewController *)viewController withBarButtonItem:(UIBarButtonItem *)barButtonItem forPopoverController:(UIPopoverController *)newpopoverController { 

self.copyOfMasterViewController = viewController;
} 
```

然后像这样向您的项目添加一个方法：

```
-(void)showsPopover {
  self.ios51popover = [[UIPopoverController   alloc]initWithContentViewController:self.copyOfMasterViewController];

 [self.ios51popover setPopoverContentSize:CGSizeMake(320, 580) animated:NO];
 [self.ios51popover presentPopoverFromRect:CGRectMake(50, 55, 1, 1) inView: [[UIApplication sharedApplication] keyWindow] permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
}

-(void)hidesPopover { [self.ios51popover dismissPopoverAnimated:YES]; } 
```

# ruby-on-rails - 两个 ActiveRecord::Relations 之间的联合

> ID：12123619
> 
> 赞同：2
> 
> 时间：2012-08-25T16:17:37.013
> 
> 标签：ruby-on-rails, activerecord, ruby-on-rails-3.2

我需要在我发送的消息和我从某人那里收到的消息之间进行联合。

这是我在控制器中尝试做的第一件事，但消息没有排序。我想我需要做一个真正的工会？

```
def listmessages
   @messages1 = current_user.messages.where(:sender_id => params[:sender_id])
   @messages2 = current_user.sent_messages.where(:recipient_id => params[:sender_id])
   @messages = @messages1 + @messages2
end 
```

这是我的用户模型：

```
class User < ActiveRecord::Base
   before_create :distribute_points

   devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable, :confirmable

   has_many :sent_messages, foreign_key: "sender_id", class_name:"Message",
       order: "created_at DESC"

   has_many :messages, foreign_key: "recipient_id", order: "created_at DESC"
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T16:24:40.557

当您使用`+`结果时，您的消息首先加载到内存中的数组中，然后将这些数组连接起来。因此，为了保存排序，您应该再次对其进行排序。丑陋...当历史变大时非常缓慢。

您可以使用真正的 UNION，但它需要大量原始 sql（通过`Message.find_by_sql("your union query")`），这非常难看且难以维护。

在您的情况下，使用 OR 代替 UNION 可能会更好：

```
@messages = Message.where('(sender_id = ? AND recipient_id = ?) OR (recipient_id = ? AND sender_id = ?)', current_user.id, params[:sender_id], current_user.id, params[:sender_id]) 
```

还有另一个（在我看来，稍微优雅一点）使用 IN 操作的解决方案（仅当您的用户无法向自己发送消息时才有效）：

```
@messages = Message.where(:sender_id => [current_user.id, params[:sender_id]], :recipient_id => [current_user.id, params[:sender_id]) 
```

在这两种解决方案中，您都可以像往常一样使用排序或分页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-21T08:58:43.493

如果您不必用作活动记录，则可以这样做。
这意味着，您不需要额外的 where 条件。

```
@message = @message1.to_set + @message2.to_set 
```

或者

```
@message = @message1.to_a + @message2.to_a 
```

但是，如果您确实需要将结果用作活动记录，则可能会像这样影响性能。

```
messages_set = @message1.map { |m| m.id }.to_set + @message2.map { |m| m.id }.to_set
@message = Message.where(:id => messages_set.to_a) 
```

# datagridview - 如何从datagridview返回值

> ID：12123621
> 
> 赞同：0
> 
> 时间：2012-08-25T16:17:59.823
> 
> 标签：datagridview, vb.net-2010

我想从具有所选行的 datagridview 的表中返回一个值

```
TextBox8.Text = Me.DataGridView1.CurrentRow.Cells("Vend Price").ToString 
```

vend price 代表所需的列名。

我收到错误消息：

```
Object reference not set to an instance of an object. 
```

现在我做错了什么？

ps 是否可以从数据网格的已删除列中返回一个值，或者我将直接从表中返回？

* * *

更完整的代码如下：

```
Private Sub MainMenu_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load    
    Me.ProductsTableAdapter.Fill(Me.MisuDBDataSet.Products) 
End Sub 

Private Sub Button15_Click(sender As System.Object, e As System.EventArgs) Handles Button15.Click   
    If Me.DataGridView1.CurrentRow.Cells("Vend Price").Value.ToString Is Nothing Then 
        'Do nothing 
    Else 
        Label13.Text = Me.DataGridView1.CurrentRow.Cells("Vend Price").Value.ToString 
    End If 
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T19:36:48.100

要从单元格中获取值，`DataGridView`您需要引用该单元格的`Value`属性：

```
TextBox8.Text = Me.DataGridView1.CurrentRow.Cells("Vend Price").Value.ToString 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T20:52:40.400

要从 DataGridView 单元格中获取值，您需要引用该单元格的 Value 属性：

```
Dim ColumnIndex As Integer = 0 Dim RowIndex As Integer = 0
ColumnIndex = DataGridView.CurrentRow.Cells("DataGridViewTextBoxColumn3").ColumnIndex
RowIndex = DataGridView.CurrentRow.Cells("DataGridViewTextBoxColumn3").RowIndex
TextBox8.Text = DataGridView(ColumnIndex, RowIndex).Value.ToString() 
```

'我的列名是`DataGridViewTextBoxColumn3`希望这有助于名称属性应该在代码中的某处设置检查 DataGridView 名称的表单属性并使用它

# php - 在其他 php 文件中使用 index.php 代码

> ID：12123623
> 
> 赞同：1
> 
> 时间：2012-08-25T16:18:16.870
> 
> 标签：php

我正在尝试创建简单的登录/注册页面。

我正在使用其中包含 login.php 的 index.php。

[我想使用一个重要问题的答案](https://stackoverflow.com/questions/12112882/echo-login-error-in-different-page-specific-div/12112991#12112991)来报告特定位置的登录错误。

问题是，如果我遇到错误，url 会更改为 login.php 文件，并且在下次登录时出现“找不到页面”错误。

我希望最终能够以某种方式显示错误并能够获得另一个输入并处理它。

登录.php：

```
 <?php

    $host="localhost"; // Host name 
    $username="root"; // Mysql username 
    $password=""; // Mysql password 
    $db_name="kupon"; // Database name 
    $tbl_name="users"; // Table name 

    // Connect to server and select databse.
    mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
    mysql_select_db("$db_name")or die("cannot select DB");

    // username and password sent from form 
    $email=$_POST['email']; 
    $password=$_POST['password']; 

    // To protect MySQL injection
    $email = stripslashes($email);
    $password = stripslashes($password);
    $email = mysql_real_escape_string($email);
    $password = mysql_real_escape_string($password);
    $sql="SELECT * FROM $tbl_name WHERE email='$email' and password='$password'";
    $result=mysql_query($sql);

    // Mysql_num_row is counting table row
    $count=mysql_num_rows($result);
    // If result matched $email and $password, table row must be 1 row
    if($count==1){

    // Register $email, $password
    $_SESSION['email'] = $email;
    $_SESSION['password'] = $password; 
    header("location: members.php");
    }
    else {
       $error = '<p class="error">User does not exist</p>'
       include('../index.php');
       exit;
    }
    ?> 
```

index.php 形式：

```
 <form action="php/login.php" method="post" class="form">
                    <p class="email">
                        <input type="text" name="email" /> :דואר אלקטרוני</br>
                    </p>
                    <p class="password">
                        <input type="password" name="password" /> :סיסמא</br>
                    </p>
                    <p class="submit">  
                        <input type="submit" value="היכנס" />  
                    </p>  
                </form>
                <?php
                    if(isset($error)) echo $error;
                ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T16:24:38.267

1.  您不应将密码或其他个人身份信息放入会话中。最好让您的登录代码分配一个带有标识的会话 ID，该标识将其链接到数据库中的用户。（就像一个填充了唯一值的列，称为 userid）
2.  您需要确保在 login.php 中初始化会话，并且您希望拥有的任何页面都需要对其进行身份验证。这允许您让页面检查会话以确认用户实际登录。

要解决 404 错误（未找到页面），您需要解决此问题：`header("location: members.php");`. 这需要是文件的完整路径。由于您的 login.php 文件位于 php 目录下而 members.php 不在，当您被定向到 login.php 时，此位置正向尝试将 members.php 加载到 php 目录中，由于它不存在，因此它给出404 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T16:23:47.343

您包括 login.php，但实际页面是 index.php - 因此您应该将表单发布到`index.php`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T16:23:57.190

看起来您在使用相对 url 时遇到了问题。您从 index.php 开始，它将表单提交重定向到 php/login.php。下一次，您改为提交到 php/php/login.php。

如果您在文档根目录中，请尝试改用 /index.php 和 /php/login.php。但是，如果不了解您的项目布局，我就不能更具体了。

# eclipse-rcp - 在 Eclipse cnf 中将项目添加到子项“新”

> ID：12123627
> 
> 赞同：1
> 
> 时间：2012-08-25T16:18:47.133
> 
> 标签：eclipse-rcp, cnf

我正在使用eclipse CNF。当我在 CNF 的项目或文件夹中单击鼠标右键时，我会看到一个弹出菜单，其中包含一个选项“新建”并且还包含子菜单。如何将项目添加到该子菜单？

![Eclipse CNF“新”子菜单](../Images/aa6f3548ee0952247d0efd46c0aa183e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T18:22:06.033

好吧，看来我已经想出了办法:) :)

以下链接可能会帮助我以及其他寻找相同解决方案的人...

[http://cvalcarcel.wordpress.com/2010/04/04/writing-an-eclipse-plug-in-part-20-re](http://cvalcarcel.wordpress.com/2010/04/04/writing-an-eclipse-plug-in-part-20-re) turn-of-the-popup-menu-for-an-empty-navigator/

# c# - 将键/值匿名对象作为参数传递

> ID：12123630
> 
> 赞同：2
> 
> 时间：2012-08-25T16:19:03.297
> 
> 标签：c#, model-view-controller, .net-4.0

在 mvc 中，我可以使用这样的构造

```
@Html.TextAreaFor(model => model.iEventSummary, new { @class = "test" }) 
```

我正在尝试将此`new { @class = "test" }`作为参数重现，但未成功

```
testFunction( new {key1="value1", key2="value2", key3="" })

public static string testFunction(dynamic dict)
{
    string ret = string.Empty;
    IDictionary<string, string> dictionary = dict;
    foreach (var item in dictionary)
    {
        ret += item.Key + item.Value;
    }
    return ret;
} 
```

必须如何声明方法变量？`new {key1="value1", key2="value2", key3="" }`如果我想作为参数传递。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T16:25:26.603

您可以使用 RouteValueDictionary 将匿名对象转换为 IDictionary。将您的功能更改为：

```
public static string TestFunction(object obj)
{
    var dict = new RouteValueDictionary(obj);
    var ret = "";
    foreach (var item in dict)
    {
        ret += item.Key + item.Value.ToString();
    }
    return ret;
} 
```

你可以使用它：

```
TestFunction(new { key1="value1", key2="value2", key3="" }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T16:33:08.180

```
public static string TestFunction(object obj)
{
    //To dictionary
    //var dict = obj.GetType().GetProperties()
    //                .ToDictionary(p=>p.Name,p=>p.GetValue(obj,null));

    //Directly ToString
    string result = String.Join(",", obj.GetType().GetProperties()
                                        .Select(p=>p.Name + ":" + p.GetValue(obj,null)));

    return result;
} 
```

# git - git分支之间某个文件夹的差异

> ID：12123633
> 
> 赞同：139
> 
> 时间：2012-08-25T16:19:16.120
> 
> 标签：git, version-control, diff, git-diff

如标题所示，我希望主分支和我创建的分支之间的某个文件夹有一个差异文件。

* * *

## 回答 #1

> 赞同：278
> 
> 时间：2012-08-25T16:23:18.257

您可以使用

```
git diff master..yourbranch path/to/folder 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-26T07:26:34.203

`git diff`比较树（如在两个不同时间点的源文件层次结构中），因此它无法提取某个作者所做的更改。如果您想查看用户提交了哪些更改，那么您需要`git log`.

这能解决您的需求吗？

```
git log --author=jdoe oldbranch..newbranch -p -- path/to/subdirectory > myChangesInSubdirectory.patch 
```

这列出了*jdoe*在两次提交之间完成的每​​个提交，将它们打印为补丁而不是通常的提交摘要，仅限于在目标子目录中有更改的提交，并将输出重定向到文件。

# android - ImageView setImageBitmap 在 onTouch 内部的复杂布局中什么都不做，间歇性地

> ID：12123634
> 
> 赞同：3
> 
> 时间：2012-08-25T16:19:26.323
> 
> 标签：android, android-layout

我有嵌套的布局，里面有 ImageViews。这些都在 ScrollView 中。最初，ImageViews 被设置为 Drawable 资源。

我使用这个解决方案来检测卷轴。它是从内部调用的`onTouchListener()`。 [Android：检测 ScrollView 何时停止滚动](https://stackoverflow.com/questions/8181828/android-detect-when-scrollview-stops-scrolling)

在滚动侦听器中，我更新 ImageViews 以从文件中加载位图。

有时（大约十分之一？）`setImageBitmap`没有注意到。Drawable 资源不会被替换。

我尝试了以下方法： * `requestLayout()`after `setImageBitmap()` * `invalidate()`after `setImageBitmap()` * 将 ImageView 绘图逻辑分别发布到 UI 线程

# iphone - 随机应用内内容购买

> ID：12123637
> 
> 赞同：0
> 
> 时间：2012-08-25T16:19:34.957
> 
> 标签：iphone, in-app-purchase

应用内购买可以是随机内容吗？例如随机“物品”或随机“配件”或“武器”，或其他类型的内容？

我已阅读指南，它确实说您不能购买“彩票”，但我不确定这是否会被视为彩票？

任何人都可以给我任何进一步的见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:23:40.897

大多数游戏为了钱而出售游戏货币。我看过几款游戏，您可以在其中购买游戏币的“神秘盒子”。

我认为彩票的参考是您在游戏“之外”赢得一些东西，即寄给您的东西或真钱等。

# python - 概率算法

> ID：12123639
> 
> 赞同：1
> 
> 时间：2012-08-25T16:19:48.047
> 
> 标签：python, algorithm, redis

我有一个概率算法的问题

目标是获得一个包含三个项目的列表。作为最终**名单**

有四个源列表。

**ALIST、BLIST、CLIST、DLIST**

**都有未知长度。它们包含独特的元素**

（其实程序一开始都是空的，从redis排序列表中获取。运行时，有增长）

从此源列表中选择项目。拾取随机项目以生成 FinalList

**确保以下要求**

在决赛名单中，

*   ALIST 的项目出现的概率是 43%
*   BLIST的物品出现的概率是37%
*   CLIST的物品出现的概率是19%
*   DLIST 的项目出现的概率是 1%

我写了一些代码，但这只是为了四个列表有很多元素。

```
from random import choice

final_list = []
slot = []

a_picked_times = 0

while a_picked_times < 43:
    item = choice(ALIST)
    ALIST.remove(item)

    if item in already_picked_list:
        continue

    slot.append(item)
    a_picked_times += 1

b_picked_times = 0

while b_picked_times < 37:
    ...

SOME CODE SIMILAR

# now slot is a list which contains 100 elements, 
# in slot, there are 43 elements of ALIST'items, 37 of B, 19 of C, 1 of D

for i in range(3):
    final_list.append( choice(slot) ) 
```

所以，这样可以保证概率要求。 **但仅在条件下：这四个列表有很多元素。**

list.remove(item) 不会删除列表中的所有元素，因此我们将根据需要的时间更正拾取项目。

**当 A、B、C、D 为空或元素不足时，如何保证概率要求？**

A、B、C、D 列表都是从 redis 排序列表中获取的。或者redis的一些解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T16:24:27.473

（对于每个元素）选择一个介于 1 和 100 之间的数字，然后根据该数字选择一个源列表可能更有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T16:36:04.350

据我了解，您正在生成随机大小的列表，然后您想以给定的概率选择 3。如果我的理解是正确的，那么你需要简单地在 [0,1] 上生成一个统一的变量`random.uniform(0., 1.)`。

然后简单地将 0..1 区间划分为适当的长度：

```
import random

for i in range(3):
    r = random.uniform(0., 1.)
    if r < .43:
        final_list.append(random.choice(ALIST))
    elif r < .43 + .37:
        final_list.append(random.choice(BLIST))
    elif r < .43 + .37 + .19:
        final_list.append(random.choice(CLIST))
    else:
        final_list.append(random.choice(DLIST)) 
```

从列表中选择应该很容易，因为您只需选择一个索引。

请注意，这相当于 Ofir 的回答，但可能会或可能不会更吸引您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T16:41:16.350

因此，据我所知，您的代码正在删除 43 个 ALIST 元素、37 个 BLIST 元素等。

更好的解决方案是使用给定的概率来构造你的 final_list 。当您的其他列表为空时，这也会考虑在内。

```
ALIST_PROB = 0.43
BLIST_PROB = ALIST_PROB + 0.37
CLIST_PROB = BLIST_PROB + 0.19
DLIST_PROB = CLIST_PROV + 0.01

while len(final_list) < 3:

    #generate a random number
    rand = random.random()        

    if rand <= ALIST_PROB:
        element = getEl(ALIST)
    elif rand <= BLIST_PROB:
        element = getEl(BLIST)
    elif rand <= CLIST_PROB:
        element = getEl(CLIST)
    elif rand <= DLIST_PROB:
        element = getEl(DLIST)

    if not element == None:
        final_list.append(element)

def getEl(list):
    try:
        element = random.choice(list)
    except IndexError:
        element = None
    return element 
```

# mysql - 插入子mysql

> ID：12123644
> 
> 赞同：1
> 
> 时间：2012-08-25T16:20:10.847
> 
> 标签：mysql, foreign-keys, parent-child, foreign-key-relationship, insert-into

我有一个新手问题...

我有两张桌子：

```
parentTable
-----------
id_user int(11) not null auto increment primary key,
email varchar(64),
pass varchar(64)

childTable
----------
id_user int(11) not null, 
name varchar(64), 
address varchar(512), 
foreign key (id_user) references parentTable(id_user) 
on update cascade 
on delete restrict 
```

现在我可以插入：

```
insert into childTable (id_user) select id_user from parentTable where id_user = '1' 
```

但我只想插入名称和地址值。

对不起新手问题，但我潜伏了一天，一无所获。

预先感谢您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T16:57:33.263

关于您的查询的有趣部分是您*知道*`id_user`您要选择插入 - 它在您的`WHERE`子句中。

如果您总是知道`id_user`，您可以跳过`SELECT`查询的额外部分并直接执行：

```
INSERT INTO childTable (id_user, name, address) VALUES (1, 'some name', '123 test street'); 
```

如果您出于其他原因需要额外的`SELECT`，您可以将`name`/`address`值直接附加到字段列表中，如下所示：

```
INSERT INTO childTable (id_user, name, address)
    SELECT id_user, 'some name', '123 test street' FROM parentTable WHERE id_user = '1'; 
```

# wordpress - XAMPP - 无法显示迁移的 WP 站点，消息“无法访问！”

> ID：12123646
> 
> 赞同：0
> 
> 时间：2012-08-25T16:20:26.887
> 
> 标签：wordpress, permissions, xampp, localhost

我有一个从另一台服务器迁移到本地主机的 Wordpress 网站。但是当我尝试访问它时，我得到的只是一条消息“无法访问！”。我很确定在任何网站文件或其数据库中都没有写入这样的消息，所以我猜这是权限问题. 该站点已从 MAMP 服务器移至在 Ubuntu Linux 上运行的 XAMPP。我整天都在为此烦恼，所以我决定寻求帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:57:12.203

这是相当尴尬的。事实证明，我对站点文件的研究不够好。在functions.php中定义了一个函数说：

```
/*
 * TEST MODE
 */

function test_mode(){
    $sid = session_id();
    if ( empty( $sid ) )
    session_start();

    if(isset($_GET['access']) && $_GET['access'] == 'test'){
         $_SESSION['access'] = 'test';  
    }   

    if(!isset($_SESSION['access'])){
         die('No Access!');
    }
} 
```

这就是我麻烦的原因。

# python - 将 web2py DAL 与临时表一起使用

> ID：12123654
> 
> 赞同：0
> 
> 时间：2012-08-25T16:21:35.993
> 
> 标签：python, data-access-layer, web2py

我正在尝试通过 web2py DAL 对临时表执行一些原始 SQL，但我的结果都返回 None。

这是完整的功能：

```
def test():

    db_test = DAL('mysql://root:root@localhost/test')

    sql = """CREATE TEMPORARY TABLE tmp LIKE people;
    INSERT INTO tmp SELECT * FROM people;
    INSERT INTO tmp SELECT * FROM people;
    SELECT * FROM tmp;"""

    results = db_test.executesql(sql) 
```

显然 SQL 是一种简化，但在 SQL 窗格中运行相同的 SQL 会返回正确的结果。我需要做什么才能让 DAL 使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T16:24:28.480

*我怀疑*你不能在一次`executesql`调用中执行多个语句；web2py 使用[DBAPI 2.0](http://www.python.org/dev/peps/pep-0249/)调用将这些发送到后端数据库，并且通常只支持单个语句： *`.execute()`*

 *```
db_test = DAL('mysql://root:root@localhost/test')

sqlddl = """CREATE TEMPORARY TABLE tmp LIKE people;
INSERT INTO tmp SELECT * FROM people;
INSERT INTO tmp SELECT * FROM people;"""

for statement in sqlddl.split(';'):
    db_test.executesql(statement.strip())

sqlselect = "SELECT * FROM tmp;"
results = db_test.executesql(sqlselect) 
```*

# django - GET参数django上的ZeroDivisionError

> ID：12123657
> 
> 赞同：1
> 
> 时间：2012-08-25T16:21:45.567
> 
> 标签：django, get, pagination, django-middleware

中间件.py

```
def get_perpage(self):
    try:
        self.session['perpage'] = int(self.REQUEST['perpage'])
        return self.session['perpage']
    except (KeyError, ValueError, TypeError):
        pass

    try:
        return int(self.session['perpage'])
    except (KeyError, ValueError, TypeError):
        return DEFAULT_PAGINATION 
```

我有一个问题：当我想将零作为 GET 参数 (?perpage=0) 转换为 URL 时，它显示 ZeroDivisionError 浮点除以零。当 perpage=0 时，我需要在页面上获取所有对象而不进行分页。我怎样才能做到这一点？view.py 中必须包含什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:16:51.483

```
def render(self, context):
    key = self.queryset_var.var
    value = self.queryset_var.resolve(context)
    if (self.paginate_by == None):
        paginate_by = int(context['request'].perpage)
    else:
        paginate_by = self.paginate_by.resolve(context)
    if (paginate_by == 0):          #HERE
        context['page_obj'] = value # IS 
        return u''                  #SOLUTION
    print (paginate_by)
    paginator = Paginator(value, paginate_by, self.orphans)
    try:
        page_obj = paginator.page(context['request'].page)
    except InvalidPage:
        if INVALID_PAGE_RAISES_404:
            raise Http404('Invalid page requested.  If DEBUG were set to ' +
                'False, an HTTP 404 page would have been shown instead.')
        context[key] = []
        context['invalid_page'] = True
        return u''
    if self.context_var is not None:
        context[self.context_var] = page_obj.object_list
    else:
        context[key] = page_obj.object_list 
    context['paginator'] = paginator
    context['page_obj'] = page_obj
    return u'' 
```

当我的视图获取 perpage=0 时，它返回纯对象列表（值），没有分页到模板

# iphone - iOS - 如何计算 UITableViewCell 的默认 textLabel 的宽度？

> ID：12123658
> 
> 赞同：2
> 
> 时间：2012-08-25T16:21:56.057
> 
> 标签：iphone, ios, uitableview, width

我尝试了下面的代码，但输出始终为 0.000000：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"CellNotification";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    cell.textLabel.text = @"Test Test Test. I am a cell.";

    NSLog(@"%f", cell.textLabel.frame.size.width);

    return cell;
} 
```

我怎么知道默认 UITableViewCell 的宽度是多少？我需要这些信息，因为我必须设置 UITableViewCell 的高度

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:27:33.800

您在上面使用的`NSLog`是询问单元格内 textLabel 的宽度，而不是实际单元格。

```
NSLog(@"%f",cell.frame.size.width); 
```

此外，如果您不使用分组表格样式，则单元格宽度应返回与表格宽度相同的值。

**编辑：**我不确定这是否是问题，但是如果您要问如何设置单元格的宽度，则不必这样做。这是为您处理的。

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {

    NSLog(@"%@",NSStringFromCGRect(cell.textLabel.frame));
} 
```

**编辑2：**

尝试改变这个：

```
if (cell == nil)
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    cell.textLabel.text = @"Test Test Test. I am a cell."; 
```

对此：

```
if (cell == nil){
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
}

cell.textLabel.text = @"Test Test Test. I am a cell."; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T16:28:15.563

单元格的宽度将是表格的宽度，除非您的表格被分组，在这种情况下它会稍微小一些。

但是，您可能需要用于显示文本而不是单元格本身的任何标签的宽度。

另一个警告是，在`heightForRow...`创建任何单元格之前，会为表中的每一行调用该方法，因此您可能必须改用已知值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-20T12:07:13.153

我认为你应该测试你的 textLabel 宽度： - (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath

# c++ - 指针大小

> ID：12123660
> 
> 赞同：0
> 
> 时间：2012-08-25T16:22:31.163
> 
> 标签：c++, arrays, pointers, sizeof

我对 sizeof() 有疑问。我在之前创建的类中有一个指针。并且这个指针被初始化为

```
 static Book* books; 
```

所以它确实没有任何意义。我想确定指针是否指向任何数组。所以第一个问题是，有什么解决方案可以做到这一点，因为我可以在运行时更改这个指针的地址以指向一个数组。我尝试使用 sizeof(pointer) 但它对我的帮助不够。返回是数字 4。我可以通过这种方式评估它是否引用任何内容。

这是我的课：

```
class Tool
{

private:
    static Book* books;

public:

    static char* pgetStringIntoArray(string);
    static string* pgetStringFromArray(char*);
    static void printCharArray(char*);
    static bool* addBook(Book*);
    static bool* isStored(Book*);
}; 
```

这是有问题的方法：

```
bool* Tool::isStored(Book* book)
{
    bool* stored = new bool(false);
    if(Tool::books)
    {
        cout << "NULL"  << endl;
    } else {
        return stored;
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T16:24:16.580

不，您不能`sizeof`用来确定指针是否指向某物。`sizeof`在同一架构中，指针将始终具有相同的大小。

你可以这样做：

```
Tool::Book* books = NULL; 
```

而且，如果您想检查它是否指向有效的非空值，只需执行以下操作：

```
if (Tool::books) {
    // books is pointing to something
} 
```

每当您为指针（数组）分配内存时，如果分配成功，则指针将不再为空。由于您使用的是`C++`，请考虑使用`std::vector`来保存动态维度的数组而不是数组（指针）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T17:25:10.683

您的问题更多的是理解指针而不是`sizeof`.

`sizeof`是*编译时*操作。对于指针，它总是返回`sizeof(void*)` （在大多数 64 位架构上是 8 个字节）。除了[VLA](http://en.wikipedia.org/wiki/Variable-length_array) s，`sizeof`返回一个编译时间常数。

C 不知道任何指向区域的使用大小 - 以结果`malloc`为例 - （因为您可以进行指针运算）。如果需要，您需要自己管理它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T16:27:14.960

与 C 非常相似，C++ 是静态类型的 - 运算符返回的各种类型大小`sizeof`在编译时确定并且不会更改。

做你所要求的正确方法是初始化你的指针`NULL`并在之后检查它。`NULL`保证不引用任何有效的内存地址，这使其成为不存在的指针目标的良好标记。无论如何，初始化您的指针是一个很好的做法——它使您免于取消引用未初始化指针的潜在问题，这些问题充其量会导致严重的内存错误。

是的，显式初始化其余变量也是一个好主意......

**编辑：**

一个不那么次要的细节：C 和 C++ 程序中的静态字段存储在可执行文件的特殊部分（例如[BSS](http://en.wikipedia.org/wiki/.bss)）中，并在程序加载时自动初始化为零。因此，您不需要显式初始化指向`NULL`;的静态指针。这已经为你完成了......

# android - Android，在 ImageView 中更改图像大小

> ID：12123661
> 
> 赞同：8
> 
> 时间：2012-08-25T16:22:34.140
> 
> 标签：android, android-layout, imageview

对于 Android，如何更改布局中 ImageView 中的图像大小？

我的图像是`jpeg`格式。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-25T16:39:17.693

```
<ImageView
    android:id="@+id/imageView1"
    android:layout_margin="20dp"
    android:src="@drawable/stop" 
    android:layout_width="50dp"
    android:layout_height="50dp"/> 
```

只需更改宽度和高度属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-15T13:23:31.547

您还可以使用 LayoutParams 设置参数

```
ImageView yourImageView= (ImageView)findViewById(R.id.imageId);

    LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(30, 30);
//width and height of your Image ,if it is inside Relative change the LinearLayout to RelativeLayout.
    yourImageView.setLayoutParams(layoutParams); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-25T17:22:36.683

有几种方法可以更改 XML 中 imageView 中图像的大小。

1.  通过在图形布局中拉动 imageView 的边缘来缩放图像（这是不建议的，因为图形布局有时会在 XML 中添加不需要的属性）。

2.  对 imageView 应用权重（这需要父对象指定 weightSum），使图像根据屏幕大小进行缩放。这似乎是衡量您的布局在许多不同尺寸的屏幕上的外观的最可靠方法。

3.  只需调整 imageView 中的重量和高度（正如其他人所提到的）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T16:42:29.610

```
<ImageView
    android:id="@+id/imageViewId"
    android:src="@drawable/icon" 
    android:layout_width="xxdp"
    android:layout_height="yydp"/> 
```

其中**xx**是以像素为单位的宽度，**yy**是以像素为单位的高度。

*（根据您希望的大小给出整数值）*

# actionscript-3 - AS3 - 未检索到正确的项目

> ID：12123665
> 
> 赞同：0
> 
> 时间：2012-08-25T16:22:41.667
> 
> 标签：actionscript-3, flash, actionscript

在这部分代码中，我正在检查游戏中的关卡是否已解锁。数组“levels”包含 12 个影片剪辑，“levelsUnlocked”是用户达到的最高级别。因此，使用此代码，我正在检查级别位置是否高于 levelsUnlocked 值，如果是，则将其移动到第 2 帧（即锁定图像），如果较低，则将其保持在第 1 帧。

我的问题是：

在 else 语句中，当我引用levels[levels.length - i] 时，它不会将其视为Movieclip，但如果我将其称为levels[1] 或levels[3]，它会这样做。有人可以告诉我为什么会这样吗？

```
function unlockLevels():void
        {
            for (var i:int = 0; i < levels.length; i++)
            {
                if (levels.length - i > levelsUnlocked)
                {
                    levels[levels.length - i].gotoAndStop(2);
                }
                else
                {
                    levels[levels.length - i].gotoAndStop(1);
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T16:43:28.673

数组长度为您提供数组的长度，如下所示：

```
var a:Array = [0,1,2,3,4]
var length:int = a.length
trace(a)
//=> 5 
```

在循环的第一次迭代中，您的 int 为零。

```
a[a.length - 0]
// a[5] == undefinded 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T16:27:02.310

您可以使用`MovieClip(levels[levels.length-i]).gotoAndStop(2);`

编辑：
回答您的问题：
您正在尝试在循环时从数组末尾访问数组元素。
someArray[someArray.length-i] 给出数组的“last - i”元素。

# php - 来自另一个用户的 DBus

> ID：12123668
> 
> 赞同：3
> 
> 时间：2012-08-25T16:23:16.680
> 
> 标签：php, dbus

我正在尝试从 PHP 程序连接到 DBus。

当我从命令行运行程序时，它可以工作，但是当它由 Apache 网络服务器（以用户身份运行`apache`）运行时，它无法连接到总线。

我尝试使用 python-dbus 调用`qdbus`和`system`调用 Python 脚本，但无论哪种方式都不起作用。另外，我无法编译[这个 PHP 扩展](http://labs.gree.jp/Top/OpenSource/DBus-en.html)，但我认为它不会解决我的问题。

我认为问题在于提供会话总线的 DBus 守护程序以我的用户身份运行（系统总线一个`messagebus`以`apache`.

如何连接到其他用户的总线？

（[这](https://stackoverflow.com/questions/6913403/running-command-line-application-from-php-as-specific-user)对我不起作用。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T15:07:20.870

First of all, do you have a dbus method you are trying to call? Dbus is merely the transportation layer, you need a program that hosts a dbus method and a program that calls a dbus method. I'll assume you have a dbus method you want to call from your php program.

How is apache trying to call your dbus method? If you are using a system() method or similar from php to call qdbus, that will fail. PHP is run by apache, apache does not have an autologin dbus process like your user does and no X11 access. This means in order for your apache to have dbus, you have to use:

```
eval 'dbus-launch --auto-syntax' [command] 
```

when using PHP's system(). That is not optimal though.

Some solutions are:

1.  Run apache as your user.
2.  Run dbus on the system bus and expose the methods and allow apache to call them from the dbus configuration file. This requires root access, which can complicate matters.
3.  Research if exposing a session dbus method to other users works. Optimally there should be a dbus-php library you can use. I'm pretty sure as long as apache can call dbus methods, having an xml file in the dbus config folder exposing it should work.

# algorithm - 包含所有给定元素的最小容器数

> ID：12123673
> 
> 赞同：3
> 
> 时间：2012-08-25T16:23:52.243
> 
> 标签：algorithm, genetic-algorithm, semantic-analysis

假设`C`指的是一组容器`{c1,c2,c3....cn}`，其中每个容器都包含一组有限的整数`{i1,i2,i3...im}`。此外，假设整数可能存在于多个容器中。给定一组有限的整数`S` `{s1,s2,s3...sz}`，找出`C`其中包含所有整数的最小子集的大小`S`。

请注意，可能有数千个容器，每个容器都有数百个整数。因此，蛮力解决这个问题的速度很慢。

我尝试使用贪心算法来解决这个问题。也就是每次选择集合中整数个数最多的容器`S`，但都失败了！

任何人都可以为这个问题提出一个快速算法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T16:43:27.933

这是众所周知的[集合覆盖问题](http://en.wikipedia.org/wiki/Set_cover_problem)。它是[NP 难的](http://en.wikipedia.org/wiki/NP-complete)——事实上，它的决策版本是典型的 NP 完全问题之一，并且是[Karp 1972 年论文](http://www.cs.berkeley.edu/~luca/cs172/karp.pdf)中包含的 21 个问题之一——因此没有已知的有效算法。除非你能确定问题的一些特殊的额外结构，否则你将不得不对一个近似结果感到满意：即 C 的一个子集，它的并集包含 S，但不一定是 C 的*最小子*集。

[贪心算法](http://en.wikipedia.org/wiki/Set_cover#Greedy_algorithm)可能是你最好的选择：它找到的集合的大小不超过 O(log |C|) 乘以最小的此类集合的大小。

你说你无法让贪心算法工作。我认为这可能是因为您未能正确实施它。你这样描述你的算法：

> 每次我选择集合 S 中整数个数最多的容器

但是通常的贪心算法的规则是在每个阶段选择集合 S 中整数个数最多的容器，这些整数*目前不在任何选择的容器中*。

# android - 如何管理作为游戏关卡的检查点？

> ID：12123674
> 
> 赞同：0
> 
> 时间：2012-08-25T16:23:55.283
> 
> 标签：android, android-layout, android-intent, android-widget

我正在创建一个级别的游戏。4级获得一个检查点，收到后只能使用一次。由于我每个级别都有一个文件，总共 7 个，如果我使用或没有使用检查点，我如何处理考虑到从第四到第七的所有活动的变量。请记住，每当启动活动级别的意图时，我都会在开始活动上创建一个完成（）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:35:57.843

你有课`Player`吗？使用成员变量`boolean hasReceivedCheckpoint`和`boolean hasCheckpointUsed`？如果有，您可以将对象传递`Player`给接收活动的意图，*并将*级别活动中发生的任何更改传回您的“菜单”活动。

# iphone - 使用 drawInRect 打印出 NSString 的边界

> ID：12123691
> 
> 赞同：1
> 
> 时间：2012-08-25T16:25:35.863
> 
> 标签：iphone, ios, nsstring

我目前正在使用drawInRect在字符串上绘制文本，并限制为使用CGRectSize的大小。它也是居中的。

```
[text drawInRect:CGRectMake(0,0,nWidth,nHeight) withFont:font lineBreakMode:UILineBreakModeWordWrap alignment:UITextAlignmentCenter]; 
```

我需要找出实际绘制文本的大小和偏移量。因为它是居中的，所以在绘制文本之前很有可能存在 X 偏移。

我看过这个命令`boundingRectWithSize`，但我认为它可能在 IOS 上不受支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T16:36:47.947

获取文本的大小，

```
CGSize size = [text sizeWithFont:font constrainedToSize:CGRectMake(0,0,nWidth,nHeight) lineBreakMode: UILineBreakModeWordWrap]; 
```

（见[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html)）

然后，由于它是居中的，边界将是

```
CGRect bounds = CGRectMake((nWidth - size.width)/2, ..., size.width, size.height); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T16:34:54.623

您想要 NSString 上 UIKit 类别中的方法...

```
- (CGSize)sizeWithFont:(UIFont *)font 
```

它为您提供所需的尺寸，然后您可以计算您的居中（或其他）位置。

# java - Anonymous inner classes in Java

> ID：12123692
> 
> 赞同：0
> 
> 时间：2012-08-25T16:25:48.793
> 
> 标签：java

Got some incomprehensible exercise in my book.

"Create a class with a non-default constructor (one with arguments) and no default constructor (no "no-arg" constructor). Create a second class that has a method that returns a reference to an object of the first class. Create the object that you return by making an anonymous inner class that inherits from the first class."

Can anyone come out with a source code?

Edit: I don't understand what the final source code should look like. And I came with this one:

```
class FirstClass
{
    void FirstClass( String str )
    {
        print( "NonDefaultConstructorClass.constructor(\"" + str + "\")" );
    }
}

class SecondClass
{
    FirstClass method( String str )
    {
        return new FirstClass( )
        {
            {
                print( "InnerAnonymousClass.constructor();" );
            }
        };
    }
}

public class task_7
{
    public static void main( String[] args )
    {
        SecondClass scInstance = new SecondClass( );
        FirstClass fcinstance = scInstance.method( "Ta ta ta" );
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T16:35:35.490

Honestly, the exercise is quite concise unless you do not know or understand the definition of an inner class. You can find an example of an anonymous inner class here:

[http://c2.com/cgi/wiki?AnonymousInnerClass](http://c2.com/cgi/wiki?AnonymousInnerClass)

Otherwise, this concise example illustrates the problem:

```
/** Class with a non-default constructor and no-default constructor. */
public class A {
    private int value;

    /** No-arg constructor */
    public A() { 
        this.value = 0;
    }

    /** Non-default constructor */
    public A(int value) { 
        this.value = value;
    }

    public int getValue() { 
        return this.value;
    }
}

/** Class that has a method that returns a reference to A using an anonymous inner class that inherits from A. */
public class B {
    public B() { ; }

    /** Returns reference of class A using anonymous inner class inheriting from A */
    public A getReference() {
         return new A(5) {
              public int getValue() {
                  return super.getValue() * 2;
              }
         };
    }
} 
```

# c++ - #define MY_INT VS const int MY_INT

> ID：12123698
> 
> 赞同：5
> 
> 时间：2012-08-25T16:26:38.983
> 
> 标签：c++, constants, c-preprocessor

> **可能重复：**
> [c中的“static const”与“#define”](https://stackoverflow.com/questions/1674032/static-const-vs-define-in-c)

当我这样做时：

```
#define WEEKDAYS 7 
```

然后 ：

```
const int WEEKDAYS = 7; 
```

他们之间有什么区别吗？似乎两者都做同样的事情 - 为代码中的未来使用设置一个常量值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T16:30:59.943

```
#define WEEKDAYS 7

void f() {
    int WEEKDAYS = 3; // error
}

const int WEEKDAYS_CONST = 7;

void g() {
    int WEEKDAYS_CONST = 3; // okay: local scope for WEEKDAYS_CONST
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T16:29:04.913

```
#define WEEKDAYS 7 
```

用数字 7替换源文件中所有出现的单词`WEEKDAYS`。

```
const int WEEKDAYS = 7; 
```

定义一个由 7 表示的实际常量，您可以在代码中访问该常量。

# java - 使用 Facebook API 的 Java 桌面应用程序（java.net.UnknownHost 异常）

> ID：12123704
> 
> 赞同：0
> 
> 时间：2012-08-25T16:27:18.427
> 
> 标签：java, facebook, api

我正在尝试使用 google 提供的 facebook API 在 java 中构建桌面应用程序。我有几个问题：

1）我必须使用套接字编程吗？（因为我是新手，我还没有：/）

2）当我尝试创建 auth_token 时，它在 facebook api 中给出了 java.net.UnknownHost 异常。

任何额外的信息都会有很大的帮助。:)

```
java.lang.RuntimeException: java.net.UnknownHostException: api.facebook.com
at com.google.code.facebookapi.BasicClientHelper.runtimeException(BasicClientHelper.java:123)
at com.google.code.facebookapi.ExtensibleClient.callMethod(ExtensibleClient.java:538)
at com.google.code.facebookapi.ExtensibleClient.callMethod(ExtensibleClient.java:446)
at com.google.code.facebookapi.ExtensibleClient.auth_createToken(ExtensibleClient.java:860)
at com.google.code.facebookapi.SpecificReturnTypeAdapter.auth_createToken(SpecificReturnTypeAdapter.java:73)
at facebookConnection.FbStartingPoint.<init>(FbStartingPoint.java:26)
at sourcepoint.FirstWindow$1.actionPerformed(FirstWindow.java:41)
at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source)
    Caused by: java.net.UnknownHostException: api.facebook.com
at java.net.PlainSocketImpl.connect(Unknown Source)
at java.net.SocksSocketImpl.connect(Unknown Source)
at java.net.Socket.connect(Unknown Source)
at java.net.Socket.connect(Unknown Source)
at sun.net.NetworkClient.doConnect(Unknown Source)
at sun.net.www.http.HttpClient.openServer(Unknown Source)
at sun.net.www.http.HttpClient.openServer(Unknown Source)
at sun.net.www.http.HttpClient.<init>(Unknown Source)
at sun.net.www.http.HttpClient.New(Unknown Source)
at sun.net.www.http.HttpClient.New(Unknown Source)
at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(Unknown Source)
at sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source)
at sun.net.www.protocol.http.HttpURLConnection.connect(Unknown Source)
at com.google.code.facebookapi.ExtensibleClient.postRequest(ExtensibleClient.java:583)
at com.google.code.facebookapi.ExtensibleClient.callMethod(ExtensibleClient.java:534)
... 41 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:29:25.227

听起来您的机器无法访问`api.facebook.com`主机。您是否使用代理连接到 Internet？

尝试使用 telnet 确保整台计算机可以连接到 Internet（不仅是您的代理配置驱动程序）：

```
> telnet api.facebook.com 80
Trying 66.220.149.99...
Connected to api.facebook.com.
Escape character is '^]'.
GET /

HTTP/1.1 400 Bad Request
Content-Type: text/html
Date: Sat, 25 Aug 2012 16:29:53 GMT
Connection: close
Content-Length: 134

<HTML><HEAD>
<TITLE>400 Bad Request</TITLE>
</HEAD><BODY>
<H1>Method Not Implemented</H1>
Invalid method in request<P>
</BODY></HTML>
Connection closed by foreign host. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T16:30:13.730

`api.facebook.com`是已弃用的旧 REST API 的端点；你可能应该连接到`graph.facebook.com`

尽管如此，如果您使用的是旧版 API，api.facebook.com 应该是可解析的并且仍然可以工作。

这几乎肯定是您的网络、防火墙、计算机、DNS 或 JDK 的问题 - 这是您连接到 Facebook 的代码的问题，而不是 Facebook 方面的问题

# ssas - Mdx 中位数查询

> ID：12123718
> 
> 赞同：0
> 
> 时间：2012-08-25T16:30:27.630
> 
> 标签：ssas, mdx, median

真的可以在这个 mdx 查询上使用某人的手。我试图在每个用户和每天的基础上生成过去 365 天的滚动中位数。我需要中位数是每个用户响应天数的中位数。这似乎是一个简单的计算，但我看不出如何让它与混合中的交叉连接一起工作。任何帮助将非常感激！如果你甚至有一个关于攻击这个方向的建议，那就太好了。

```
SET [2Years] AS
'{[FirstOrderDate].[Full Date].&[2010-01-15T00:00:00]:[FirstOrderDate].[Full Date].[2012-08-20T00:00:00]}'

MEMBER [Measures].[2YearMedianLag]
AS
median({[FirstOrderDate].[Full Date].currentmember.lag(365):[FirstOrderDate].[FullDate].currentmember} , [Measures].[Response Days])

SELECT {[Measures].[Response Days], [Measures].[MedianLag]} ON 0,
NonEmpty(crossjoin( [days],
[User].[User ID].children),[Measures].[Response Days]) ON 1
FROM [UserRevenue] 
```

预先感谢您的协助。 

编辑：

```
SampleData (UserName varchar(100) null, FirstOrderDate Datetime null, ResponseDays int null)
('Jim', '2001-01-03', 10)
('Fred', '2001-01-03', 80)
('Frank', '2001-01-04', 30)
('Sally', '2001-01-05', 18)
('Joan', '2001-01-06', 26)
('Bill', '2001-01-06', 15)
('Ted', '2001-01-08', 29)
('Sam', '2001-01-10', 9)
('Jane', '2001-01-17', 200)

SampleOutput (FirstOrderDate datetime null, MedianResponseDays int null)
('2001-01-03', 45)
('2001-01-04', 30)
('2001-01-05', 24)
('2001-01-06', 22)
('2001-01-07', 22)
('2001-01-08', 26)
('2001-01-09', 26)
('2001-01-10', 22)
('2001-01-11', 22)
('2001-01-12', 22)
('2001-01-13', 22)
('2001-01-14', 22)
('2001-01-15', 22)
('2001-01-16', 22)
('2001-01-17', 26) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T07:25:59.763

这很棘手，因为您需要每天在行上使用一组不同的滚动日期。您确定要 365 延迟吗？这给了你 1 年加 1 天的时间。无论如何，此技术使用内联命名集为用户/日期的每个组合创建一个命名集并为其分配一个唯一编号，然后您可以在 StrToSet 函数中再次将该命名集拉回以匹配当前行的用户和日期。此版本考虑到每个单独的用户：

```
with 
set Users as [User].[User ID].Children
set UsersDates as NonEmpty((Users, [FirstOrderDate].[Full Date].children), [Measures].[Response Days])

set [Rolling Period] as 

    Generate(
       UsersDates,
          StrToSet(
        "{[FirstOrderDate].[Full Date].currentmember.lag(364): [FirstOrderDate].[Full Date].currentmember} as RP" + CStr(UsersDates.CurrentOrdinal)
          )
    )

member [Measures].[Median Lag] as 
median(
    StrToSet("RP" + 
    CStr(Rank(([User].[User ID].CurrentMember, [FirstOrderDate].[Full Date].CurrentMember), UsersDates)))
  , [Measures].[Response Days])

select
{
[measures].[Response Days]
, [measures].[Median Lag]
}

on columns,
UsersDates
on rows
from UserRevenue 
```

更新 #1：此版本忽略单个用户，而是使用所有用户对适用日期集的响应：

```
 with 
    set Users as [User].[User ID].Children
    set Dates as NonEmpty([FirstOrderDate].[Full Date].children, [Measures].[Response Days])

    set [Rolling Period] as 

        Generate(
           Dates,
              StrToSet(
            "{[FirstOrderDate].[Full Date].currentmember.lag(364): [FirstOrderDate].[Full Date].currentmember} as RP" 
+ CStr(Dates.CurrentOrdinal)
              )
        )

    member [Measures].[Median Lag] as 
    median(
        StrToSet("RP" + 
        CStr(Rank([FirstOrderDate].[Full Date].CurrentMember, Dates)))
      , ([Measures].[Response Days], [User].[User ID].[All]))

    select
    {
    [measures].[Response Days]
    , [measures].[Median Lag]
    }

    on columns,
    (Users, Dates)
    on rows
    from UserRevenue 
```

更新#2：第三次是魅力？这是一个查询，可以让我在您的示例输出中得到结果。关键是该集合需要为当前日期的每个日期/用户组合生成一个元组，并将其存储为内联命名集合，每个可能的日期一个，由排名唯一标识。因此，当您查看行上的日期列表时，第一个日期 (1/3) 是排名 1，第二个日期 (1/4) 是排名 2，依此类推。第一个日期 2001 年 1 月 3 日有两个项目 - 一个与 Jim 为 1/3，另一个与 Fred 为 1/3。所以在计算中位数时，需要使用相关集合中每个项目的响应天数。因为 1/3 在列表日期中排名第 1，所以检索称为 RP1 的集合，结合集合中项目（Jim 和 Fred）的响应天数并计算中位数。然后下一个日期，1/4，

```
with 
    set Users as [User].[User ID].Children
    set Dates as [FirstOrderDate].[Full Date].children

    set [Rolling Period] as 
        Generate(
           Dates,
              StrToSet(
            "NonEmpty(({[FirstOrderDate].[Full Date].currentmember.lag(364): [FirstOrderDate].[Full Date].currentmember} 
            , Users), [Measures].[Response Days]) as RP" 
+ CStr(Dates.CurrentOrdinal)
              )
        )

    member [Measures].[Median Lag] as 

    median(
        StrToSet("RP" + 
        CStr(Rank([FirstOrderDate].[Full Date].CurrentMember, Dates)))
      , [Measures].[Response Days])

    select
    {[measures].[Median Lag]}

    on columns,

    Dates
    on rows
    from UserRevenue 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:25:28.790

该`MedianResponseDays` 度量对用户进行迭代以计算`Response Days`从给定日期到当前日期的中值。我把365天。在行上。

```
WITH MEMBER [Measures].[MedianResponseDays] AS
    Median([User].[User ID].children * [FirstOrderDate].[FullDate].CurrentMember:[FirstOrderDate].[FullDate].DefaultMember, [Measures].[Response Days])
SELECT {[Measures].[MedianResponseDays]} ON 0,
NON EMPTY {[FirstOrderDate].[Full Date].currentmember.lag(364):[FirstOrderDate].[FullDate].currentmember} ON 1
FROM [UserRevenue] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-28T09:52:36.933

我有一个事实表 fct_line_details 有两列 mtid，生产力

```
 mtid     productivity
  ----     ------------
  1        400
  1        200
  1        600
  2        700
  3        900 
```

我想计算 SSAS 中每个 mtid 的中位数。（mtid 1=400 的中位数）

# azure - 手动连接到远程桌面

> ID：12123724
> 
> 赞同：-1
> 
> 时间：2012-08-25T16:31:33.073
> 
> 标签：azure, rdp

**云服务又名托管服务**

如何手动连接到远程桌面？单击连接按钮将始终以最大显示大小运行 mstsc。我尝试直接使用 URL，但一直被拒绝。在连接期间发送的 .rdp 文件类似于：

```
full address:s:mytestapp-20120825.cloudapp.net
username:s:xxxxx
LoadBalanceInfo:s:Cookie: mstshash=WCFServiceWebRole1#WCFServiceWebRole1_IN_0 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T16:34:22.360

我找到了。我右键单击 rdp 文件并选择编辑。

我想知道 rdp 文件中有什么使它起作用。

# wcf - 名称解析失败，Windows Azure

> ID：12123725
> 
> 赞同：1
> 
> 时间：2012-08-25T16:31:34.837
> 
> 标签：wcf, azure

我使用 WCF 服务在 Windows Azure 上创建了一个站点。当我引用它并尝试调用它时，我收到此错误：

未处理的异常：System.Net.WebException：错误：System.Net.HttpWebRequest.EndGetRequestStream 处的 NameResolutionFailure (IAsyncResult asyncResult) [0x00000] 处 System.Net.HttpWebRequest.GetRequestStream () [0x00000] 处 System.Net.HttpWebRequest.GetRequestStream () [0x00000] 处 System.Web .Services.Protocols.SoapHttpClientProtocol.Invoke (System.String method_name, System.Object[] 参数) [0x00000] in :0

我的 Web 服务解析为主机名而不是 IP 地址。在 Windows Azure 中，是否需要添加特殊设置才能使用 Web 服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T00:38:41.150

根据您提供的信息，您似乎有一个在 Windows Azure 中运行的 WCF Web 角色，当您尝试访问它时出现错误。

当您在 Windows Azure 中托管 WCF 站点时，您将拥有如下服务 URL：http: [//your_service_name.cloudapp.net/servicename/methodname](http://your_service_name.cloudapp.net/servicename/methodname)

您还需要在 WCF 服务中进行适当的绑定，以便可以从任何客户端访问它。这是大多数问题发生的地方，因为错误或错误的绑定会导致服务中断，因此没有人可以连接。您还可以验证您的 WCF 服务在从浏览器访问它时是否返回正确的 WSDL 信息。这是检查服务参考 URL 的测试。你验证过那部分吗？

当您尝试在客户端应用程序中引用它时，您将使用上面的引用 URL，该 URL 将列出内置的功能并且您可以使用它。在 Windows Azure 中，您的服务必须解析为主机名（不是 IP 地址，因为它是 VIP，所以它是正确的。

如果您可以从服务中获取 WSDL 但仍然无法获取参考，那么您仍然可以尝试通过绑定端点 URL（在 Azure 上）直接在代码中使用该服务，然后使用绑定和端点创建通道。

# c# - DataLoadOptions 等效于 LINQ to Entities？

> ID：12123726
> 
> 赞同：5
> 
> 时间：2012-08-25T16:31:39.283
> 
> 标签：c#, linq, entity-framework, linq-to-entities

`DataLoadOptions`LINQ to SQL 中是否存在用于 LINQ to Entities的类的版本？基本上，我希望有一个地方来存储所有急切加载配置，而不必添加`.Include()`对我所有 LINQ to Entities 查询的调用。或者，如果有人有更好的解决方案，也肯定对此持开放态度。

TIA，
本杰

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T17:21:34.190

Entity Framework 不支持整个“ObjectContext”的预加载设置。但是您可以在部分类中使用包含选项声明所有必需的“IQueryable”属性。例如：

```
public IQueryable<Order> Orders {
  get {
    return OrderSet.Include("OrderDetails");
  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-25T20:39:58.563

就我个人而言，我很高兴没有（官方）EF 相当于`DataLoadOptions`. 为什么？几个原因：

*   **以抛出异常**的方式使用它们太容易了，请参阅[MSDN 页面](http://msdn.microsoft.com/en-us/library/system.data.linq.dataloadoptions.aspx)的备注部分。
*   我不喜欢**过滤子集合**的概念。当 a `Customer`has`Orders`时，我希望该`Orders`成员代表*该*客户的订单（无论是否懒惰）。在其他地方定义的过滤器（由`AssociateWith`）很容易被遗忘。我会在需要的时间和地点过滤它们。这导致了最后一个反对意见：
*   最重要的是：它是**有状态**的，大多数错误都是由意外状态引起的。以影响以后查询的方式`DataLoadOptions`更改's 状态。`DataContext`我更喜欢在需要的时间和地点定义急切加载。打字很便宜，错误很昂贵。

尽管如此，为了完整起见，我应该提到 Muhammad Mosa 确实在[EF 版本的 DataLoadOptions](http://mosesofegypt.net/post/Introducing-DataLoadOptions-for-Entity-Framework-ObjectContext.aspx)中付出了一些努力。不过我从来没有尝试过。

我意识到您可能想防止重复代码。但是，如果您在多个地方需要相同形状的查询，那么您已经在重复代码，无论是否有“全局”定义的包含。中央急切加载配置是伪 DRY-ness。很快你就会发现自己在不需要急切加载时绊倒了，但是，该死的，它被配置为发生！

# python - Pygame 支持哪些格式来播放声音？

> ID：12123731
> 
> 赞同：5
> 
> 时间：2012-08-25T16:32:35.413
> 
> 标签：python, pygame

这些模块支持哪些声音格式：

```
pygame.mixer.sound 
```

或者：

```
pygame.mixer.music 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-25T16:36:49.240

来自[pygame 文档：](http://www.pygame.org/docs/ref/mixer.html)

> 声音可以从 OGG 音频文件或未压缩的 WAV 加载。

至于`Music`，它似乎支持几种不同的，包括 MP3（有限）、OGG、XM 和 MOD。请参阅[音乐文档](http://www.pygame.org/docs/ref/music.html)（以及该页面上的评论）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T16:36:37.160

你可能想看看这里： http: [//www.pygame.org/docs/ref/mixer.html#pygame.mixer.Sound](http://www.pygame.org/docs/ref/mixer.html#pygame.mixer.Sound)

> 声音可以从 OGG 音频文件或未压缩的 WAV 加载

# bash - 从bash中的文件中删除隐藏的换行符

> ID：12123732
> 
> 赞同：0
> 
> 时间：2012-08-25T16:32:39.793
> 
> 标签：bash

我正在创建一个带有 ps 命令输出的文件，如下所示。

```
ps aux | grep ^apache | grep sbin/[h]ttpd | awk '{print $2" "$6}' > /root/psfile.tmp 
```

当您查看文件时，它的内容如下。

```
[root@testserver ~]# tail /root/psfile.tmp
16795 3184
16796 3148
16797 3148
16799 3148
16800 3148
16801 3148
16802 3148
16803 3148 
16804 3148
16805 3148 
```

但是，当我尝试在 for 循环中处理它时，它会将一行读为两行......例如......

```
for x in $(tail /root/psfile.tmp.test);do echo $x;done
16795
3184
16796
3148
16797
3148
16799
3148
16800
3148
16801
3148
16802
3148
16803
3148
16804
3148
16805
3148 
```

我需要 for 迭代以在一行上显示两个数字...为什么要这样做，我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T16:39:42.977

```
while read one two
do
    echo "one: $one"
    echo "two: $two"
done < psfile.tmp.test 
```

或者

```
while read line
do
    echo "line: $line"
done < psfile.tmp.test 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T16:37:45.947

`IFS=$'\n'`在运行循环之前使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T16:38:42.807

您可以执行以下操作：

```
tail /root/psfile.tmp.test | while read -r a b ; do
  echo "a: $a b: $b"
done 
```

保持您的代码原样并设置`IFS`为`$'\n'`使 for 循环仅在换行符上拆分 - 默认情况下，它会在任何空白处拆分。

# java - SimpleFormController - java.lang.IllegalStateException：Bean 名称“命令”的 BindingResult 和普通目标对象都不是

> ID：12123735
> 
> 赞同：3
> 
> 时间：2012-08-25T16:32:59.637
> 
> 标签：java, spring-mvc

在我的基本 spring mvc 应用程序中，我遇到了异常。我正在使用`SimpleFormController`. 我的代码如下。

在我的调度程序-servlet

```
<bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="mappings">
        <props>
            <prop key="index.htm">indexController</prop>
           <!-- <prop key="login.htm">loginController</prop>  -->
        </props>
    </property>
</bean>

<bean id="viewResolver"
      class="org.springframework.web.servlet.view.InternalResourceViewResolver"
      p:prefix="/WEB-INF/jsp/"
      p:suffix=".jsp" />

<!--
The index controller.
-->
<bean name="indexController"
      class="org.springframework.web.servlet.mvc.ParameterizableViewController"
      p:viewName="index" />
<!--  <bean name="loginController"
      class="org.springframework.web.servlet.mvc.ParameterizableViewController"
      p:viewName="login"/>  -->

 <bean name="/login.htm" class="com.pack.controller.LoginController" >
 <property name="commandClass" value="com.pack.model.User" />
 <property name="formView" value="login"/>
 <property name="successView" value="index.htm"/>
 </bean> 
```

在我的 JSP 页面中

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Login</title>
    </head>
    <body>
        <h1>Login</h1>
        <form:form name="loginForm" method="post">
        ${msg}
        <form:input id="username" path="username"/>
        <form:password id="password" path="password"/>
        <input type="submit" value="login" name="login" />
        </form:form>
    </body>
</html> 
```

在我的控制器类中

```
public class LoginController extends SimpleFormController{

    @Override
    public ModelAndView onSubmit(Object command) throws ServletException {
        User user =  (User)command;
        System.out.println("Username:" + user.getUsername() + " Password:" + user.getPassword());
        if(user.getUsername().equalsIgnoreCase("sa") && user.getPassword().equalsIgnoreCase("12")){
            return new ModelAndView(new RedirectView(getSuccessView()));
        }
        else
        {
            ModelAndView modelAndView = new ModelAndView("login");
            modelAndView.addObject("msg", "Invalid login");
            return  modelAndView;
        }
    }    
} 
```

一旦用户输入正确的用户名和密码将重定向到`index`页面。这工作正常。但是用户输入错误的登录凭据会引发此错误。

> 异常
> org.springframework.web.util.NestedServletException：请求处理失败；嵌套异常是 java.lang.IllegalStateException：Bean 名称“command”的 BindingResult 和普通目标对象都不能用作请求属性
> 根本原因
> java.lang.IllegalStateException：Bean 名称“command”的 BindingResult 和普通目标对象都不能用作请求属性

有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T07:43:25.703

您可以在此处参考弹簧表单标记文档：http: [//static.springsource.org/spring/docs/current/spring-framework-reference/html/spring-form.tld.html#spring-form.tld.form](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/spring-form.tld.html#spring-form.tld.form)

罪魁祸首是您没有设置“modelAttribute”属性，该属性默认为“command”；因此，您的错误消息。您应该将“modelAttribute”设置为模型中代表用户的属性名称。

另外，我同意 micha 的观点，即您应该使用较新的基于注释的控制器。

您将在下面找到如何正确使用 modelAttribute 的示例。请注意，当您的请求被路由到 users/new 时，控制器会在“user”键下的模型中放置一个空用户（new User()）。然后 JSP 将“用户”指定为 modelAttribute（我很确定这是区分大小写的）。

```
@Controller
@RequestMapping(value = "/users")
public class UserController {

    @RequestMapping(value = "/new", method = RequestMethod.GET)
    public String newForm(Model model) {
        model.addAttribute("user", new User());

        return "users/new";
    }

    @RequestMapping(method = RequestMethod.POST)
    public String create(User user) {
        this.userRepository.save(user);

        return "redirect:/users/" + user.getId();
    }

} 
```

在“users/new.jsp”内部：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="sf" %>
<html>

<body>
<c:url value="/users" var="users"/>

<sf:form action="${users}" method="POST" modelAttribute="user">
    <table>
        <tr>
            <th><label for="full_name">Full Name:</label></th>
            <td><sf:input path="name" size="15" id="full_name" /></td>
        </tr>
    </table>
    <input type="submit" value="Create User" />
</sf:form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T16:48:18.463

也许不是您问题的真正答案，但如果可能，您应该使用（更新的）基于注释的控制器。您正在使用`SimpleFormController`在当前春季版本中已弃用的。

检查[此](https://stackoverflow.com/questions/4734259/spring-simpleformcontroller-in-3-0)或[此](http://viralpatel.net/blogs/spring-3-mvc-handling-forms/)以获取替代方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T05:37:52.197

我得到了这个问题的解决方案，如果我们使用 HTML 控件而不是 spring 控件，这个问题就会解决。这里在 JSP 文件中，

```
 <%--   <form:input id="username" path="username"/>
        <form:password id="password" path="password"/> --%>
        <input type="text" name="username"/> 
        <input type="password" name="password"/> 
```

这将解决问题。感谢所有回复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T08:15:05.183

这不是一个有效的解决方案，而是一种变通方法，因为绑定到您的命令对象将不可用。

在类似的错误情况下，我发现 *-servlet.xml 中的 commandName 是不同的。当我使它与实际的 commandBean 相同时，错误消失了。

# sql - 如何修改 varchar 的大小？

> ID：12123737
> 
> 赞同：0
> 
> 时间：2012-08-25T16:33:05.300
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我需要知道是否有任何方法可以将 varchar 的大小从`varchar(40)`to修改为`varchar(60)`并添加此约束：

```
(( CASE WHEN DATEDIFF(day,Date_Election_President,CURRENT_TIMESTAMP) >= 730 THEN
             'NON'
        ELSE 'OUI'
   END )) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T16:44:26.210

改变长度；

```
ALTER TABLE [MyTable]
ALTER COLUMN [MyColumn] VARCHAR(60) 
```

至于约束，我怀疑您正在寻找计算列。您应该可以像这样添加它；

```
ALTER TABLE [MyTable] 
ADD [NewColumn] AS CASE 
   WHEN DATEDIFF(day,Date_Election_President,CURRENT_TIMESTAMP) >= 730 THEN 'NON' 
   ELSE 'OUI' 
END 
```

演示[在这里](http://sqlfiddle.com/#!3/bf896/1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T19:30:51.170

使用此查询并在查询板上运行

```
ALTER TABLE [TableName] 
ALTER COLUMN [ColumnName] VARCHAR(60) 
```

# logic - 计算矩形的平铺

> ID：12123744
> 
> 赞同：1
> 
> 时间：2012-08-25T16:34:14.027
> 
> 标签：logic, game-physics, puzzle

我正在尝试解决这个问题，但我找不到解决方案：

给出一个由排列成 N 行 M 列的正方形组成的棋盘。这块板的平铺是覆盖它的瓷砖图案。如果满足以下条件，则平铺很有趣：

```
 only tiles of size 1x1 and/or 2x2 are used;
    each tile of size 1x1 covers exactly one whole square;
    each tile of size 2x2 covers exactly four whole squares;
    each square of the board is covered by exactly one tile. 
```

例如，以下图像显示了一块 4 行 3 列的板的一些有趣的平铺：http: [//dabi.altervista.org/images/task.img.4x3_tilings_example.gif](http://dabi.altervista.org/images/task.img.4x3_tilings_example.gif)

如果棋盘上至少存在一个正方形，其中一个棋盘上覆盖有大小为 1x1 的棋子，而另一个棋盘上覆盖着大小为 2x2 的棋子，则棋盘的两个有趣的棋子是不同的。例如，上图中显示的所有平铺都是不同的。

写一个函数

```
int count_tilings(int N, int M); 
```

即，给定两个整数 N 和 M，返回大小为 N 行和 M 列的板的不同有趣平铺数量的余数模 10,000,007。

假使，假设：

```
 N is an integer within the range [1..1,000,000];
    M is an integer within the range [1..7]. 
```

例如，给定 N = 4 和 M = 3，函数应该返回 11，因为大小为 4 行和 3 列的板有 11 个不同的有趣平铺：

[http://dabi.altervista.org/images/task.img.4x3_tilings_all.gif](http://dabi.altervista.org/images/task.img.4x3_tilings_all.gif)

对于（4,3），结果是 11，对于（6,5），结果是 1213。我尝试了以下方法，但它不起作用：

```
static public int count_tilings ( int N,int M ) {

    int result=1;
    if ((N==1)||(M==1)) return 1;

    result=result+(N-1)*(M-1);

    int max_tiling=  (int) ((int)(Math.ceil(N/2))*(Math.ceil(M/2)));
    System.out.println(max_tiling);
    for (int i=2; i<=(max_tiling);i++){
        if (N>=2*i){
            int n=i+(N-i);
            int k=i;
            //System.out.println("M-1->"+(M-1) +"i->"+i);
            System.out.println("(M-1)^i)->"+(Math.pow((M-1),i)));
            System.out.println( "n="+n+ " k="+k);
            System.out.println(combinations(n, k));
            if (N-i*2>0){
                result+= Math.pow((M-1),i)*combinations(n, k);
            }else{
                result+= Math.pow((M-1),i);
            }
        }
        if (M>=2*i){
            int n=i+(M-i);
            int k=i;
            System.out.println("(N-1)^i)->"+(Math.pow((N-1),i)));
            System.out.println( "n="+n+ " k="+k);
            System.out.println(combinations(n, k));
            if (M-i*2>0){
                result+= Math.pow((N-1),i)*combinations(n, k);
            }else{
                result+= Math.pow((N-1),i);
            }
        }

    }
    return result;
}
static long combinations(int n, int k) {
    /*binomial coefficient*/
    long coeff = 1;
    for (int i = n - k + 1; i <= n; i++) {
        coeff *= i;
    }
    for (int i = 1; i <= k; i++) {
        coeff /= i;
    }
    return coeff;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T17:40:48.413

由于这是家庭作业，我不会给出完整的解决方案，但我会给你一些提示。

首先这是一个递归解决方案：

```
class Program
{
    // Important note:
    // The value of masks given here is hard-coded for m == 5.
    // In a complete solution, you need to calculate the masks for the
    // actual value of m given. See explanation in answer for more details.

    int[] masks = { 0, 3, 6, 12, 15, 24, 27, 30 };

    int CountTilings(int n, int m, int s = 0)
    {
        if (n == 1) { return 1; }

        int result = 0;
        foreach (int mask in masks)
        {
            if ((mask & s) == 0)
            {
                result += CountTilings(n - 1, m, mask);
            }
        }
        return result;
    }

    public static void Main()
    {
        Program p = new Program();
        int result = p.CountTilings(6, 5);
        Console.WriteLine(result);
    }
} 
```

在线查看它：[ideone](http://ideone.com/RUZyB)

请注意，我添加了一个额外的参数`s`。这存储了第一列的内容。如果第一列为空，则 s = 0。如果第一列包含一些实心方块，则设置 s 中的相应位。最初 s = 0，但是当放置一个 2 x 2 的瓷砖时，这会填充下一列中的一些方块，这意味着 s 在递归调用中将是非零的。

该`masks`变量是硬编码的，但在完整的解决方案中，它需要根据 的实际值来计算`m`。如果您查看它们的二进制表示，则存储的值`masks`更有意义：

```
00000
00011
00110
01100
01111
11000
11011
11110 
```

换句话说，它是在具有 m 位的二进制数中设置位对的所有方法。您可以编写一些代码来生成所有这些可能性。或者由于 m 只有 7 种可能的值，您也可以将所有 7 种可能性硬编码为`masks`.

* * *

然而，递归解决方案存在两个严重问题。

1.  对于较大的值，它将溢出堆栈`N`。
2.  它需要指数时间来计算。即使对于较小的值，它也非常慢`N`

这两个问题都可以通过将算法重写为迭代来解决。保持`m`不变并初始化to`n = 1`的所有可能值的结果。这是因为如果您只有一列，则只能使用 1x1 的图块，并且只有一种方法可以做到这一点。`s``1`

现在，您可以使用 的结果来计算`n = 2`的所有可能值。可以重复此操作，直到达到. 该算法在关于 的线性时间内完成，并且需要恒定的空间。`s``n = 1``n = N``N`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:36:41.877

这是一个递归解决方案：

```
// time used : 27 min
#include <set>
#include <vector>
#include <iostream>
using namespace std;
void placement(int n, set< vector <int> > & p){
    for (int i = 0; i < n -1 ; i ++){
        for (set<vector<int> > :: iterator j  = p.begin(); j != p.end(); j ++){
            vector <int> temp = *j;
            if (temp[i] == 1 || temp[i+1] == 1) continue;
            temp[i] = 1; temp[i+1] = 1;
            p.insert(temp);
        }
    }
}

vector<vector<int> > placement( int n){
    if (n > 7) throw "error";
    set <vector <int> > p;
    vector <int> temp (n,0);
    p.insert (temp);
    for (int i = 0; i < 3; i ++) placement(n, p);
    vector <vector <int> > s;
    s.assign (p.begin(), p.end());
    return s;
}

bool tryput(vector <vector <int> > &board, int current, vector<int> & comb){
    for (int i = 0; i < comb.size(); i ++){
        if ((board[current][i] == 1 || board[current+1][i]) && comb[i] == 1) return false;
    }
    return true;
}
void  put(vector <vector <int> > &board, int current, vector<int> & comb){
    for (int i = 0; i < comb.size(); i ++){
        if (comb[i] == 1){
            board[current][i] = 1;
            board[current+1][i] = 1;
        }
    }
    return;
}

void  undo(vector <vector <int> > &board, int current, vector<int> & comb){
    for (int i = 0; i < comb.size(); i ++){
        if (comb[i] == 1){
            board[current][i] = 0;
            board[current+1][i] = 0;
        }
    }
    return;
}

int place (vector <vector <int> > &board, int current,  vector < vector <int> >  & all_comb){
    int m = board.size();
    if (current >= m) throw "error";
    if (current == m - 1) return 1;
    int count = 0;
    for (int i = 0; i < all_comb.size(); i ++){
        if (tryput(board, current, all_comb[i])){
            put(board, current, all_comb[i]);
            count += place(board, current+1, all_comb) % 10000007;
            undo(board, current, all_comb[i]);
        }
    }
    return count;
}
int place (int m, int n){
    if (m == 0) return 0;
    if (m == 1) return 1;
    vector < vector <int> > all_comb = placement(n);
    vector <vector <int> > board(m, vector<int>(n, 0));
    return place (board, 0, all_comb);

}
int main(){
    cout << place(3, 4) << endl;
    return 0;
} 
```

时间复杂度`O(n^3 * exp(m))`

减少空间使用尝试位向量。

为了降低时间复杂度`O(m*(n^3))`，尝试动态规划。

为了降低时间复杂度，`O(log(m) * n^3)`尝试分治+动态规划。

祝你好运

# wpf - MVVM灯中的组合框不显示列表 项目

> ID：12123748
> 
> 赞同：0
> 
> 时间：2012-08-25T16:35:00.023
> 
> 标签：wpf, c#-4.0, user-controls, mvvm-light

这让我很难过——希望有人能指出一个明显的错误。我有一个用户控件，我将其添加到程序 MainView 中的网格中。主视图绑定到 MainViewModel，用户控件绑定到 CardioVM。

我使用了一个测试标签来检查用户控件的路由是否正确并且一切正常。我有一个名为 Cardio 的类，它的属性为

```
 List<string> exercises 
```

我正在尝试传递字符串

```
Cardio.List<string> exercises 
```

到一个

```
List<string> CardioList 
```

在我的 CardioVM 中。调试时

```
List<string> CardioList 
```

正在填充来自

```
Cardio.List<string> exercises 
```

但我的 ComboBox 没有在屏幕上显示项目。这是我的 UserControl 的 xaml 和：

```
<UserControl x:Class="CalendarTest.UserControl1"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300"
         DataContext="{Binding CardioVM, Source={StaticResource Locator}}">
<Grid>
    <ComboBox ItemsSource="{Binding CardioList, Mode=OneWay}" SelectedItem="{Binding SelectedCardio, Mode=TwoWay}"  Height="50"></ComboBox>

</Grid> 
```

这是我的 CardioVM 的代码：

```
 public class CardioVM : ViewModelBase
{
    public Cardio cardioItem { get; set; }
    public CardioVM()
    {
        TestLabel = "Tester";
    }

    //Test Label for binding testing
    private string testLabel;

    public string TestLabel
    {

        get { return testLabel; }
        set
        {
            testLabel = value;
            RaisePropertyChanged("TestLabel");
        }
    }

    public CardioVM(string Date, string File)
    {

        cardioItem = new Cardio(File, Date);
        CardioList = new List<string>(cardioItem.exercises);

    }

   private List<string> cardioList;

   public List<string> CardioList
    {

        get { return cardioList; }
        set
        {
            cardioList = value;
            RaisePropertyChanged("CardioList");
        }
    }

   private string _selectedCardio;
   public string SelectedCardio
   {
       get { return _selectedCardio; }
       set
       {
           _selectedCardio = value;
           RaisePropertyChanged("SelectedCardio");
       }

   }

} 
```

}

不知道我在这里哪里出错了，但任何指针都将不胜感激。

这是我认为我在主视图模型中将 userControl 添加到内容控件绑定属性的地方：

```
 public void NewTemplateExecute()
    {
        TextHideTab = "Close"; 
       NewTemplateType = ("New " + SelectedExercise + " Exercise Template");
        //Set the message and lists based on the exercise selected plus adds the drop down control
       switch (SelectedExercise)
       {
           case "Cardio":
               ///
               //This is where I thought CardioVM was being added
               ///
               NewTemplateText = "Please choose a cardio exercise from the drop down list to the left. You can then select the duration of the exercise and the intensity. To add another exercise please press the plus button in the right hand corner";
               ExerciseDropDowns = new CardioVM(selectedDateLabel, @"Model\Repository\Local Data\CardioList.txt");

           break;
           case "Weights":
           NewTemplateText = "Please select a exercise type. you can refine your exercises by body area. Then add the number of sets and the reps per set. Add as many exercises as you like - dont forget to set to total duration";

           break;

           case "HIIT":
           NewTemplateText = "HIIT to add";
           break;
       }
       Messenger.Default.Send("NewTemplate");

    } 
```

我在 Mainwindow xaml 中将 CardioVM 的数据上下文设置为：

```
<DataTemplate DataType="{x:Type local:CardioVM}">
    <view:UserControl1/>
</DataTemplate> 
```

我想我在连接 CaridoVM 的方式上犯了一个错误，但除非我通过 VM 定位器发送它，否则似乎无法将它进行数据绑定

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T18:52:21.620

感谢 nemesv - 你当然是正确的。`DataContext`从我的 CardioVM 中删除，现在只需在主视图中使用set`DataTemplate`将 Cardio 视图绑定到 ViewModel。我现在可以使用 Mainview 中的参数调用一个有氧运动虚拟机，它会按预期填充我的组合框。似乎我需要了解一些 MVVM 的基础知识

# graphviz - Graphviz 和 Brew 医生 - 意外的 dylibs 错误

> ID：12123751
> 
> 赞同：4
> 
> 时间：2012-08-25T16:35:42.557
> 
> 标签：graphviz, homebrew

刚做了一个`brew install graphviz`山狮这给了我这个错误

> 错误：执行失败：make install (graphviz.rb:47)

以为我会卸载它，所以跑了`brew uninstall graphviz`但是得到了

> 错误：没有这样的小桶：/usr/local/Cellar/graphviz

然后以为我会尝试`brew doctor`，但它给了我这个错误：

```
Warning: Unbrewed dylibs were found in /usr/local/lib.
If you didn't put them there on purpose they could cause problems when
building Homebrew formulae, and may need to be deleted.

Unexpected dylibs:
    /usr/local/lib/libcdt.5.dylib    /usr/local/lib/libcgraph.6.dylib    /usr/local/lib/libgvc.6.dylib    /usr/local/lib/libgvpr.2.dylib    /usr/local/lib/libpathplan.4.dylib    /usr/local/lib/libxdot.4.dylib
Warning: Unbrewed .pc files were found in /usr/local/lib/pkgconfig.
If you didn't put them there on purpose they could cause problems when
building Homebrew formulae, and may need to be deleted.

Unexpected .pc files:
    /usr/local/lib/pkgconfig/libcdt.pc    /usr/local/lib/pkgconfig/libcgraph.pc    /usr/local/lib/pkgconfig/libgvc.pc    /usr/local/lib/pkgconfig/libgvpr.pc    /usr/local/lib/pkgconfig/libpathplan.pc    /usr/local/lib/pkgconfig/libxdot.pc 
```

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T17:08:51.887

尝试运行这些：

```
brew install libtool 
```

然后尝试重新安装graphviz。

然后检查一下： [xlib-h-not-found-when-building-graphviz-on-mac-os-x-10-8-mountain-lion](https://stackoverflow.com/questions/11465258/xlib-h-not-found-when-building-graphviz-on-mac-os-x-10-8-mountain-lion)

# php - 调用非对象的成员函数

> ID：12123766
> 
> 赞同：1
> 
> 时间：2012-08-25T16:37:22.033
> 
> 标签：php

我正在考虑 oo PHP 并被这个烦人的事情所困扰。

我正在尝试构建不同类型的灯和灯泡的模型，我想除了致命错误“在 C:\xampp\htdocs 中的非对象上调用成员函数 zapal() \excersises\oo\lampki.php 在第 9 行"

这是代码，然后是我的思维方式，所以请纠正我哪里错了

```
<?php
class Lampa {
  protected $zarowka;
  public function _construct (Zarowka $zarowka) {
    echo 'Wkrecam .arówke<br>';
    $this->zarowka = $zarowka;
  }
  public function zapal() {
    $this->zarowka->zapal();
    echo 'Lampka zapalona<br>';
  }
  public function zgas() {
    $this->zarowka->zgas();
    echo 'Lampka zgaszona<br>';
  }
}

class SciemniaczZarowki {
  private $zarowka;
  private $poziomJasnosci = 100;
  public function _construct (Zarowka $zarowka) {
    $this->zarowka = $zarowka;
  }
  public function rozjasnij() {
    if ($this->poziomJasnosci < 100) {
      $this->poziomJasnosci++;
      echo 'Rozjasniam swiatlo zarowki<br>';
    }
  }
  public function sciemnij() {
    if ($this->poziomJasnosci > 1) {
      $this->poziomJasnosci--;
      echo 'Przyciemniam swiatlo zarowki<br>';
    }
  }
}

class LampkaNocna extends Lampa{
    private $sciemniacz;

         public function _construct (Zarowka $zarowka) {
             parent::_construct($zarowka);

        $this->sciemniaczZarowki = new SciemniaczZarowki($this->zarowka);
  }
  public function rozjasnij() {
    $this->sciemniaczZarowki-> rozjasnij();
  }
  public function sciemnij() {
    $this->sciemniaczZarowki-> sciemnij();
  }
}

// Dodane przez mnie
class Zarowka{
    public $kolor;
    function __construct(){
        echo "Jam zarówka";
        $this->kolor = "biały";
    }
    private function zapal(){
        echo "zarówka: Świace!";
    }
    private function zgas(){
        echo "zarówka: Gasne!";
    }

}

$zarowka = new Zarowka();
$lampka = new LampkaNocna($zarowka);
$lampka->zapal();
$lampka->rozjasnij();
$lampka->sciemnij();
$lampka->sciemnij();
$lampka->rozjasnij();
$lampka->rozjasnij();
$lampka->rozjasnij();
$lampka->zgas();
?> 
```

由于此表示不显示行号，因此我将其分成几部分。导致错误的函数在 Lampa 类中：

```
public function zapal() {
    $this->zarowka->zapal();
    echo 'Lampka zapalona<br>';
  } 
```

我的想法一直是，因为我有 Zarowka 类，它有一个方法，我后来在该行中调用它应该没问题。更重要的是在创建一个新的 Lampa 对象之前我已经有一个对象 Zarowka，所以为什么它说它是非对象问题（因为在

```
$lampka = new LampkaNocna($zarowka); 
```

我把它传给兰帕）？

我敢打赌，解决方案简单易行，但我想我已经盯着这段代码太久了。如果您决定回答并有一些时间，请您可以逐步描述您的想法，以便未来的读者可以利用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T16:40:33.523

在您的示例代码中，您的构造函数命名为`_construct()`，并带有一个前导下划线。

在 PHP 中，正确的构造函数名称是[`__construct()`](http://php.net/manual/en/language.oop5.decon.php)，带有两个前导下划线。换句话说，你的构造函数永远不会被调用——所以你传递的变量实际上并没有存储在类中。

更新`Lampa`（和所有其他类）以具有类似于以下内容的构造函数：

```
public function __construct (Zarowka $zarowka) {
    .... 
```

# html - 从 servlet 使用调度程序时如何刷新 jsp 页面？

> ID：12123767
> 
> 赞同：1
> 
> 时间：2012-08-25T16:37:27.680
> 
> 标签：html, jsp, tomcat, servlets, refresh

我正在使用 Eclipse JUNO IDE 和 tomcat 7.0。

我有一个网络应用程序。在我的应用程序中：

1.  小服务程序

2.  JSP 页面

3.  HTML - 主页。

在主页中，当单击提交按钮并且 servlet 重定向到匹配 jsp 页面时，我有一个重定向到 servlet 的表单（因为我需要从服务器获取数据）。现在，当我刷新 jsp 页面时，servlet 在请求中得到 NULL。所以我的问题是如何重新提交？因为我想显示来自服务器的新数据。

注意：Servlet 通过套接字与服务器对话，因此当用户按下某个提交按钮时，请求重定向到 servlet，servlet 将请求重定向到服务器以获取所需的数据。现在当servlet收到数据时，它正在将数据传输到jsp页面，jsp页面将其显示为html

```
 if (request.getParameter("submit").equals("Show Taxis at Driving"))
    {
           requests.add("driving");
           to_server.writeObject(requests);
           to_server.flush();
           requests.removeAllElements();

           try{
               driving = (Vector)from_server.readObject();
               request.setAttribute("driving", driving);
               //request.getRequestDispatcher("/WEB-INF/driving_page.jsp").forward(request, response);
               RequestDispatcher disp = getServletContext().getRequestDispatcher("/WEB-INF/driving_page.jsp");
               disp.forward(request, response);
           }catch(ClassNotFoundException e)
           {
               e.printStackTrace();
           }
    }
    else if (request.getParameter("submit").equals("Add Passenger to Taxi"))
    {
        requests.add("taxis");
        requests.add("passengers");
        to_server.writeObject(requests);
        to_server.flush();
        requests.removeAllElements();

        try {
            taxis_waiting  = (Vector)from_server.readObject();
            passengers = (Vector)from_server.readObject();
            request.setAttribute("taxis", taxis_waiting);
            request.setAttribute("passengers", passengers);
            request.getRequestDispatcher("/WEB-INF/add_passenger_to_taxi.jsp").forward(request, response);
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
            request.getRequestDispatcher("error_page.jsp").forward(request, response);      
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T16:52:02.423

这是一个最简单和最常见的方法：

1.  您的`index.html`页面应该有一个使用`GET`操作的表单。这样表单参数通过查询参数传递给您的 servlet：

    ```
    /servlet?search=foo 
    ```

2.  您的 servlet 处理搜索并*转发*到 ，`results.jsp`以便浏览器仍然指向`/servlet?search=foo`：

    ```
    RequestDispatcher dispatcher = getServletContext().
                                             getRequestDispatcher("results.jsp);
    dispatcher.forward(request,response); 
    ```

3.  如果您的用户刷新页面，她将`/servlet?search=foo`再次点击，调用服务器端逻辑并刷新搜索结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-04T12:10:13.400

您可以使用会话简单地解决此问题。这将是一个替代解决方案。

```
if(session.getAttribute("REFRESH")!=null){
    response.sendRedirect("../your_servlet");
}
else{    
session.setAttribute("REFRESH","TRUE");
} 
```

可以将上面的代码放在jsp页面中。当页面第一次加载时，它会检查会话值，但不会保存这样的会话，因此它会像代码的 else 部分一样创建会话。但在那之后，当用户单击刷新按钮时，会话就会有一个值并发生重定向。

但是为了避免循环重定向，你需要在servelt中删除会话。所以下面的代码应该放在你的servlet中。

```
session.removeAttribute("REFRESH"); 
```

# javascript - 列出使用 jQuery 检查的变量值

> ID：12123769
> 
> 赞同：3
> 
> 时间：2012-08-25T16:37:41.690
> 
> 标签：javascript, jquery, variables

我在 jsFiddle 中已经取得了相当大的进展，但我无法弄清楚为什么它没有在第一个值中添加项目符号..

[http://jsfiddle.net/dvCmR/128/](http://jsfiddle.net/dvCmR/128/)

```
<div id="checkboxes">
    <input id="chkbx_0" type="checkbox" name="one" />Option 1
    <input id="chkbx_1" type="checkbox" name="two" />Option 2
    <input id="chkbx_2" type="checkbox" name="three" />Option 3
    <input id="chkbx_3" type="checkbox" name="four" />Option 4
</div>

<div class="content"></div>

<script>
    $("input").click(function(e) {

    var selected = $("#checkboxes input:checked").map(function(i, el) {
        return el.name;
    }).get();

    $('.content').empty();

    $(".content").append(selected.join("<li>"));

});
</script> 
```

​</p>

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T16:39:06.930

该`.join()`函数仅将字符串放在元素**之间。**结果是

```
 name1<li>name2<li>name3 
```

当你需要时

```
 <li>name1<li>name2<li>name3 
```

此外，将`<li>`元素放入 a`<div>`是非常值得怀疑的。

您仍然可以使用，但是当（在连接之后）它不为空时`.join()`，您应该在结果字符串的开头添加另一个。`<li>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T16:44:02.913

正如@Pointy 所说，当你有一个元素时`join`不会添加。`li`此外，您根本不需要使用`join`，只需使用单个循环添加元素：

```
$("input").click(function(e) {
    var $content = $('.content').empty();
    $("#checkboxes input:checked").each(function(i, el) {
       $("<li>" + el.name + "</li>").appendTo($content);
    });
});​ 
```

**[演示](http://jsfiddle.net/89tHX/)**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-25T16:45:08.217

试试这个：

```
$("input").click(function(e) {
    var selected = $("#checkboxes input:checked").map(function(i, el) {
        return "<li>"+el.name+"</li>"
    }).get();
    $(".content").html(selected.join(""));
}); 
```

[小提琴](http://jsfiddle.net/dvCmR/129/)

# perl - 如何在 Perl Win32::GUI 中使用 Windows“钩子函数”？

> ID：12123774
> 
> 赞同：1
> 
> 时间：2012-08-25T16:38:22.537
> 
> 标签：perl, winapi, user-interface, hook

我正在使用 Windows XP SP 3，Strawberry Perl。我想让我的 Perl 程序的用户选择一个文件；但是当使用 Win32::GUI::GetOpenFileName() 时，我希望 Windows 文件选择对话框在“详细信息”文件列表选项中打开，而不是在默认的“列表”文件列表选项中打开。

上网一搜，好像得用windows的“钩子”功能，给文件选择控件发一些信息。关于它的文档是 MSDN，我似乎不掌握如何在 Perl 中应用它。

谁能推荐 Perl 中正确的调用语法应该是什么？

这是我的代码示例，其中文件选择对话框使用（默认）“列表”选项打开：

```
 use strict;
 use warnings;
 use 5.014;    
 use Win32::Console;
 use Win32::GUI();
 use autodie; 
 use warnings    qw< FATAL  utf8     >;
 use Carp::Always;
 use Win32API::File::Time qw{:win};
use Image::ExifTool qw(:Public);
use Date::Parse;

# ...
my ( $FileName, $ImageDir, $DIR, $TopDir);
# ...
$TopDir = 'D:\My Documents';
    $ImageDir = Win32::GUI::BrowseForFolder( -root => $TopDir, -includefiles => 1,);
    unless ($ImageDir) { 
        say '$DirName not defined after calling Win32::GUI::BrowseForFolder, ',
        'Photo date set line'.__LINE__;
        exit;
    }
    else {
        say "Identified directory: $ImageDir";
    }    
    # now select a file

    $FileName = Win32::GUI::GetOpenFileName( -title  => 'Select an image file', -directory => $ImageDir,
        -file   => "\0" . " " x 256,
        -filter => ["Image files (*.jpg)" => "*.jpg;*.jpeg", "All files", "*.*", ],);
    unless ($FileName) {
        say '$FileName not defined after calling Win32::GUI::GetOpenFileName, ',
        'Photo date set line'.__LINE__;
    }
    else {
        say "Identified image file: $FileName";
    }
# ... 
```

注意：（有点）类似的帖子：[http ://www.perlmonks.org/?node_id=989418](http://www.perlmonks.org/?node_id=989418)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T18:39:18.100

不幸的是，`Win32::GUI`API 既不公开`OFN_ENABLEHOOK`标志位也不公开选项`lpfnHook`字段。`GetOpenFileName`

您也许可以使用该`Win32::API`模块使其在更低级别上工作，但您必须`OPENFILENAME`使用自己构建整个结构`pack`并为钩子处理程序编写一些 XS 代码。

# asp.net - 网格中编辑命令的下拉选择问题

> ID：12123775
> 
> 赞同：0
> 
> 时间：2012-08-25T16:38:24.613
> 
> 标签：asp.net, gridview, grid, edit, dropdownbox

我有一个网格。我正在填满我的网格。在那我有编辑按钮。当我单击编辑时，应在我的 otherpage DROPDOWN 中选择网格中的所有值。

**ddlconfemail.SelectedItem.Text = item["scoreconfirmeemail"].Text;**

如果我使用它，我会得到重复，这意味着我的初始项目索引为零，即 (--please select--) 被该项目替换。

但如果我用这个

ddlconfemail.selectedvalue = item["scoreconfirmeemailid"].Text;

这工作完美。

问题是我有 12 个下拉菜单。我无法将所有 id 映射到我的网格。必须改变很多。

还有其他可用的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T17:10:01.853

您可以使用下拉项目的 FindByText 即

```
ddlconfemail.SelectedValue = ddlconfemail.Items.FindByText(item["scoreconfirmeemail"].Text).Value; 
```

希望这会帮助你。

# mysql - 计算与前一行数据的差异

> ID：12123776
> 
> 赞同：2
> 
> 时间：2012-08-25T16:38:36.643
> 
> 标签：mysql

我有一张表格，可以随着时间的推移跟踪位置。此表包含很多行，格式无法更改。每个位置都插入一个 id、实际位置和时间戳（日期时间）。位置本身被插入到连接字符串中，可以使用自定义函数将其转换为 x/y 坐标。

我想创建一个程序，并列出所有已知位置及其适当的时间戳。到目前为止没有问题。但也想创建一个指示位置和时间差异的输出列。

澄清。我有的：

```
Id |  Timestamp          | Foreign_Id | POS              
----------------------------------------------------------
1  | 2011-02-20 00:00:00 |     2      | PositionAsString 
----------------------------------------------------------
2  | 2011-02-20 00:00:05 |     2      | PositionAsString 
----------------------------------------------------------
3  | 2011-02-20 00:00:15 |     2      | PositionAsString 
----------------------------------------------------------
4  | 2011-02-20 00:00:37 |     2      | PositionAsString 
```

位置坐标可通过函数获得，这些函数`getX`返回`getY`X 和 Y 的浮点值。位置的差异将使用勾股定理计算，因为它只是 2D。

我想要的是

```
Id |  Timestamp          | Foreign_Id | POS              | DiffPos  | Speed 
---------------------------------------------------------------------------
1  | 2011-02-20 00:00:00 |     2      | PositionAsString |    0     |   0    
---------------------------------------------------------------------------
2  | 2011-02-20 00:00:05 |     2      | PositionAsString |    20    |   4    
---------------------------------------------------------------------------
3  | 2011-02-20 00:00:10 |     2      | PositionAsString |    10    |   2    
---------------------------------------------------------------------------
4  | 2011-02-20 00:00:20 |     2      | PositionAsString |    10    |   1 
```

所以现在我的问题是如何计算与上一行的差异。重要的是，在执行任何低效计算之前，将结果集缩小到外键，因为表有很多行。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-08T09:53:36.633

感谢您的建议，但是由于这既复杂又低效，我现在正在使用另一种解决方案。如上所述，我无法更改源表的格式。但是可以修改正在写入此跟踪表的触发器，以便在插入新行之前计算差异。

这当然不适用于现有条目，但这是可以接受的。

# scala - scala - 使用预期类型的 子参数实现 trait 方法

> ID：12123785
> 
> 赞同：3
> 
> 时间：2012-08-25T16:40:02.883
> 
> 标签：scala, methods, parameters, match, extends

我对 Scala 很陌生，所以如果这是一个非常简单的问题，请原谅我，但我找不到任何可以帮助我的东西，或者我无法找出正确的搜索词。我怎样才能使这项工作？

```
scala> trait Foo
defined trait Foo

scala> class FooImpl extends Foo
defined class FooImpl

scala> trait Bar { def someMethod(foo: Foo) }
defined trait Bar

scala> class BarImpl extends Bar { def someMethod(foo: FooImpl) {} }
<console>:10: error: class BarImpl needs to be abstract, since method someMethod in trait Bar of type (foo: Foo)Unit is not defined
(Note that Foo does not match FooImpl)
       class BarImpl extends Bar { def someMethod(foo: FooImpl) {} } 
```

为什么 FooImpl 不匹配 Foo 因为 Foo 是一个特征？我猜我需要在 Bar 中更改 someMethod 的签名，以说明我期待扩展 Foo 或“with Foo”的东西，但我似乎找不到这方面的文档。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T16:45:10.593

问题是`Bar`trait 的`someMethod`声明指定任何类型的`Foo`都可以作为参数传递。你可以把它想象成它的“契约”。合同说，任何实现`Bar`都会有一个方法`someMethod`可以接受任何类型的`Foo`.

你的`BarImpl`类是一个实现`Bar`并且有一个`someMethod`实现。不幸的是，它的实现`someMethod` **只**接受`FooImpl`各种`Foo`对象：不接受**任何**类型的`Foo`. 由于它不允许您传入`Foo`不是`FooImpl`对象的对象，因此它违反了 trait 定义指定的契约。实施不能比合同规定的更严格。

举个例子：

```
class FooImplB extends Foo
val bar: Bar = new BarImpl
val foo: Foo = new FooImplB
bar.someMethod(foo) 
```

这里我们声明了一个`Bar`被调用的`bar`和一个`Foo`被调用的`foo`。根据`Foo`我的定义应该可以`foo`传入`bar.someMethod`. 除了`BarImpl.someMethod`只接受`FooImpl`s`Foo`而不接受`FooImplB`s！所以我们有一个问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T21:56:21.347

dhg 解释了为什么这不起作用以及为什么你可能并不真正想要它。

但如果你仍然想要它，你可以这样做：

```
trait Foo

class FooImpl extends Foo

trait Bar[F <: Foo] { def someMethod(foo: F) }

class BarImpl extends Bar[FooImpl] {
    def someMethod(foo: FooImpl) {}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T01:31:03.460

Jens Schauder 的回答有效，但会强制您在特征签名中定义类型。相反，您可以在方法级别执行相同的操作：

```
scala> trait Foo
defined trait Foo

scala> class FooImple extends Foo
defined class FooImple

scala> trait Bar { def methodA[T <: Foo](foo: T) }
defined trait Bar

scala> class BarImpl extends Bar { def methodA[FooImpl](foo: FooImpl){} }
defined class BarImpl 
```

# ajax - Dajaxice 0.5.1 - 似乎无法使教程工作

> ID：12123787
> 
> 赞同：1
> 
> 时间：2012-08-25T16:40:16.447
> 
> 标签：ajax, django, dajaxice

我反复检查了我的东西，但我找不到问题。这是我的项目的布局：

*   项目
    *   所有的东西
        *   **初始化**.py
        *   管理员.py
        *   设置.py
        *   模型.py
        *   视图.py
        *   测试.py
    *   静止的
        *   css
        *   达贾西斯
            *   dajaxice.core.js
        *   图片
        *   js
    *   模板
        *   测试.html
    *   项目
        *   ajax.py
        *   **初始化**.py
        *   设置.py
        *   网址.py
        *   视图.py
        *   wsgi.py
    *   管理.py

## 设置.py

```
DEBUG = True
MEDIA_ROOT = ''
MEDIA_URL = ''
STATIC_ROOT = ''
STATIC_URL =/static/

STATICFILES_DIRS = (
    'C:/Python27/djcode/project/static',
)

STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
    'dajaxice.finders.DajaxiceFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
    'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

ROOT_URLCONF = 'project.urls'
WSGI_APPLICATION = 'project.wsgi.application'

TEMPLATE_CONTEXT_PROCESSORS = (
    'django.contrib.auth.context_processors.auth',
    'django.core.context_processors.debug',
    'django.core.context_processors.i18n',
    'django.core.context_processors.media',
    'django.core.context_processors.static',
    'django.core.context_processors.request',
    'django.contrib.messages.context_processors.messages'
)

TEMPLATE_DIRS = (
    "C:/Python27/djcode/project/templates"
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
'allthings',
'dajaxice',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    'django.contrib.admindocs',
) 
```

## 网址.py

```
from django.conf.urls import patterns, include, url
from project.views import hello, testing
from dajaxice.core import dajaxice_autodiscover, dajaxice_config
dajaxice_autodiscover()
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    ('^hello/$', hello),
    ('^testing/$', testing),
    url(dajaxice_config.dajaxice_url, include('dajaxice.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
)

urlpatterns += staticfiles_urlpatterns() 
```

## 视图.py

```
from django.shortcuts import render_to_response, HttpResponse
from django.template import RequestContext
from dajaxice.core import dajaxice_autodiscover 
dajaxice_autodiscover()

def hello(request):
    return HttpResponse("Hello world!")

def testing(request):
    return render_to_response('testing.html', context_instance = RequestContext(request)) 
```

## ajax.py

```
from django.utils import simplejson
from dajaxice.decorators import dajaxice_register

@dajaxice_register
def sayhello(request):
    return simplejson.dumps({'message':'Hello World'}) 
```

## 测试.html

```
<!DOCTYPE html/>
{% load dajaxice_templatetags %}
<html>
<head><title></title>
{% dajaxice_js_import %}
<script>
function my_callback(data){
    alert(data.message);
}
</script>
</head>
<body>
    This is to test stuff
    <input type="button" onclick="Dajaxice.project.sayhello(my_callback)" value="Get Message from Server"></input>
</body>
</html> 
```

它所做的一切就是制作一个发出警报的按钮。它应该非常简单，但我什么也没得到。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T01:50:30.243

因为`dajaxice.core.js`是一个非静态模板文件，`DajaxFinder`所以会找到它并将其作为静态文件“渲染”到临时文件夹。

因此，您的`STATICFILES_DIRS`设置不应包含文件路径，`dajaxice.core.js`否则文件将由`FileSystemFinder`而不是`DajaxFinder`.

您可以运行`findstatic`以检查是否正确找到它：

```
manage.py findstatic dajaxice\dajaxice.core.js 
```

或者可能：

```
manage.py findstatic dajaxice/dajaxice.core.js 
```

输出结果应位于某个临时文件夹中（取决于您的操作系统），并且不应位于您应用程序的任何文件夹中。

# django - 如何让 Django 在表单类之外集成表单字段？

> ID：12123792
> 
> 赞同：2
> 
> 时间：2012-08-25T16:41:19.043
> 
> 标签：django

我有一个关于 django 中的表单 api 的问题。我已经创建了一个常规表单类，但不想将具有数百个选项的 html 选择字段重写到表单类中。相反，我想将其直接放入模板中。

如何将来自选择字段的请求信息（例如 request.POST.get('Country')）集成到我的常规验证过程中，并使其作为一组经过验证的数据（如 form.cleaned_data ）可访问？

希望我能说清楚...

非常感谢

# ruby - 这个define_method用例是不是太复杂了？

> ID：12123804
> 
> 赞同：1
> 
> 时间：2012-08-25T16:43:03.597
> 
> 标签：ruby, oop, metaprogramming

我已经为此苦恼了大约三天了。我创建了一个类来模拟 html 页面并告诉黄瓜步骤定义在哪里填充表单数据：

```
class FlightSearchPage

  def initialize(browser, page, brand)
    @browser = browser
    @start_url = page

    #Get reference to config file
    config_file = File.join(File.dirname(__FILE__), '..', 'config', 'site_config.yml')

    #Store hash of config values in local variable
    config = YAML.load_file config_file

    @brand = brand #brand is specified by the customer in the features file

    #Define instance variables from the hash keys
    config.each do |k,v|
      instance_variable_set("@#{k}",v)
    end
  end

  def method_missing(sym, *args, &block)
    @browser.send sym, *args, &block
  end

  def page_title
    #Returns contents of <title> tag in current page.
    @browser.title
  end

  def visit
    @browser.goto(@start_url)
  end

  def set_origin(origin)
    self.text_field(@route[:attribute] => @route[:origin]).set origin
  end

  def set_destination(destination)
    self.text_field(@route[:attribute] => @route[:destination]).set destination
  end

  def set_departure_date(outbound)
    self.text_field(@route[:attribute]  => @date[:outgoing_date]).set outbound
  end

  # [...snip]

end 
```

如您所见，我使用 instance_variable_set 来创建动态保存引用的变量，并且变量名称和值由配置文件提供（该配置文件旨在由不一定熟悉的人编辑红宝石）。

不幸的是，这是一个大而多毛的类，每次我想添加一个新字段时，我都必须编辑源代码，这显然是糟糕的设计，所以我一直在尝试更进一步并创建使用 define_method 动态设置变量名称的方法，这就是过去几个晚上让我一直睡到凌晨 4 点的原因。

这就是我所做的：

```
require File.expand_path(File.dirname(__FILE__) + '/flight_search_page')

class SetFieldsByType <  FlightSearchPage
  def text_field(config_hash)
    define_method(config_hash) do |data|
      self.text_field(config_hash[:attribute] => config_hash[:origin]).set data
    end
  end
end 
```

这个想法是，添加新字段所需要做的就是向 YAML 文件添加一个新条目，并且 define_method 将创建允许 cucumber 填充它的方法。

目前，我遇到了范围问题——Ruby 认为 define_method 是@browser 的成员。但我想知道的是：这是否可行？我完全误解了define_method吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T17:34:39.083

> 你的意思是你希望看到类定义之外的需求和文件加载？

不，在类定义中。Ruby 类声明只是按照看到的顺序执行的代码。类似的东西`attr_accessor`只是类方法，碰巧对正在定义的类做一些事情，*因为它正在被定义*。这*似乎*是您想要做的。

在您的情况下，您将改为读取 YAML 文件，并运行您自己的逻辑来创建访问器、构建所需的任何支持数据等。我并不完全了解用例，但这听起来并不奇怪或困难——但.

也就是说，将这些定义放在 YAML 文件中会获得多少“便利”？考虑一下我曾经为创建用于驱动 Watir 的页面实例所做的事情：

```
class SomePage < HeavyWatir
  has_text :fname     # Assumed default CSS accessor pattern
  has_text :whatever, accessor: 'some accessor mechanism', option: 'some other option'
end 
```

这些`has_xxx`是创建实例变量访问器的类方法（就像`attr_accessor`做的那样），构建了一些其他的数据结构，我用来确保页面上应该存在的所有内容实际上都是如此，等等。例如，*非常*粗略：

```
page = SomePage.new
page.visit
if page.missing_fields?
  # Do something saying the page isn't complete
end 
```

*听起来*你想要一些模糊相似的东西：你有一堆“东西”你想给类（或子类，或者你可以将它混入任意类等）

这些“东西”具有附加功能，该功能以多种方式工作，例如：

**定义期间发生的事情**

例如，`has_text`将名称添加到页面元数据的类实例散列中，例如字段名称。

**使用过程中发生的事情**

例如，当`fname=`被调用时，在实例的元数据中设置一个标志，说明调用了 setter。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T20:32:09.103

这是元编程的合适案例，但看起来您以错误的方式进行操作。

首先，FlightSearchPage 的每个*实例*是否会有不同的配置文件，还是只有一个控制所有页面的配置文件？无论参数如何，您似乎都在加载相同的配置文件，`initialize`所以我猜您的情况是前者。

如果是这样，您需要将所有元编程代码移动到类中（在方法定义之外）。即，当定义类时，您希望它加载配置文件，然后基于该配置创建每个实例。现在，您每次创建实例时都会重新加载配置文件，这似乎不正确。例如，`define_method`属于，`Module`所以它应该出现在类范围内，而不是在实例方法中。

另一方面，如果您确实想要为每个实例使用不同的配置，则需要将所有元编程代码移动到单例类中，例如`define_singleton_method`，而不是`define_method`.

# objective-c - 如何使用两个 xib 文件创建一个 Objective-C 类（一个用于 iPhone，另一个用于 iPad）

> ID：12123805
> 
> 赞同：3
> 
> 时间：2012-08-25T16:43:21.477
> 
> 标签：objective-c, xib

我在我的通用应用程序上创建了一个名为“ScreenSelectLevelViewController”的新屏幕，其中包含 .h、.m 和 .xib 文件。但我想创建 2 个单独的 xib 文件，一个用于 iPhone，另一个用于 iPad。所以，我复制了我的 ScreenSelectLevelViewController.xib 并将两个文件重命名为这些新名称：

*   ScreenSelectLevelViewController_iPhone.xib;
*   ScreenSelectLevelViewController_iPad.xib;

在我的代码中，我打开了这样的新视图：

```
ScreenSelectLevelViewController *newScreen = [[ScreenSelectLevelViewController alloc] initWIthNibName:"@ScreenSelectLevelViewController" bundle:nil];
[self presentModalViewController:newScreen animated:true]; 
```

问题是：当我在 iPhone 模拟器上运行时，但是当我在 iPad 模拟器上运行时，应用程序仍然打开这个新屏幕的 iPhone 版本的 xib 文件。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T17:03:07.213

您可以简单地重命名文件，用波浪号替换下划线：

```
ScreenSelectLevelViewController~iphone.xib
ScreenSelectLevelViewController~ipad.xib 
```

然后您在帖子中编写的代码将自动为当前设备加载正确的文件。

[*这在Resource Programming Guide*](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/LoadingResources/Introduction/Introduction.html)中的“iOS 支持设备特定资源”标题下记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T16:49:10.080

在您的应用委托中：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil];
    } else {
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPad" bundle:nil];
    }
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

这将告诉您的应用程序在启动时使用哪个 xib，然后打开新视图，您可以采用上面显示的内容并应用它：

```
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    ScreenSelectLevelViewController *newScreen = [[ScreenSelectLevelViewController alloc]        
    initWIthNibName:"@ ScreenSelectLevelViewController_iPhone.xib" bundle:nil];
    [self presentModalViewController:newScreen animated:true];
}
else{
    //same for iPad
} 
```

# javascript - Ajax 内容提交

> ID：12123806
> 
> 赞同：1
> 
> 时间：2012-08-25T16:43:25.160
> 
> 标签：javascript, ajax, django

我有以下代码，它从 Cardspring 服务器获取响应并尝试将其发送到我们的站点以存储在我们的数据库中。我无法让 ajax 正常工作。当我查看 heroku 服务器日志时，似乎 ajax 没有向我们的服务器发送 POST —— ajax 请求没有日志条目。ajax 代码如下所示：

```
 <script type="text/javascript">
    $(document).ready(function()
     {
        $('#contactform').submit(function(event) {
            $('.submit-button').attr('disabled', 'disabled');
            cardSpringResponseHandler = function(response){
                if((typeof response.error) != "undefined")
                {
                    var error = response.error;
                    var reason = response.reason;
                    alert(error + '    ' + reason);
                }

                else
                {
                    alert(response.token + '    ' + response.last4 + '   '+ response.brand + '    ' + response.brand_string + '    ' + response.expiration);
                    alert('Thank you, your card is registered!');
                    $.ajax({
                        type: 'POST',
                        url:'www.url.com/me',
                        async: false,
                        data: {"token": response.token,"last4": repsonse.last4,"brand": response.brand,"brand_string":response.brand_string,"expiration": response.expiration}.serialize(),

                         error: function () {
                                alert('Error');
                             }
                    });

                }

                alert('Hello 2');
            };
            alert('adding card');
            CardSpring.addCard(cardSpringResponseHandler
            , {
                publisher_id : '{{ CARDSPRING_APP_ID }}',
                security_token : '{{ securityToken }}',
                timestamp : '{{ timestamp }}',
                hmac : '{{ digestedHash }}'
            }, {
                card_number : $('.card-number').val(),
                exp_month : $('.expiration-month').val(),
                exp_year : $('.expiration-year').val(),
                user_id : '{{ csid }}'
            }, "all");
            alert('card added');
            return false;
        });
    });
</script> 
```

这是 urls.py 的片段，用于显示 url：

```
url(r'^me/$', accountInfo), 
```

这是服务器端代码的外观，作为 django 视图：

```
def accountInfo(request):
    #after CS.addCard is sucessful, this adds the credit card Token to our DB...
    print request.method
    if request.method == "POST":
        print "in account info"
        print "expiration = " ,
        #print request.POST['expiration']
        print "request ="
        print request
        try:
            cardToAdd = Cards(csID = request.COOKIES.get('csID'),token = request.POST['token'], last4 = request.POST['last4'], cardType = request.POST["brand"] ,typeString = request.POST['brand_string'],
            expDate = request.POST['expiration'])
            cardToAdd.save();
            json_data = json.dumps({"HTTPRESPONSE":"sucess"})
            return HttpResponse(json_data, mimetype="application/json") 

        except:
            json_data = json.dumps({"HTTPRESPONSE":"fail"})
            return HttpResponse(json_data, mimetype="application/json") 
```

初始打印 request.method 在第一次加载页面时运行，method = GET。服务器没有打印出任何其他请求，这让我觉得 ajax 代码没有运行

警报（至少其中一些）确实发生了。它们总是按以下顺序出现：

*   加卡
*   已添加卡
*   response.token、response.last4 等
*   谢谢，您的卡已添加

有谁知道发生了什么？谢谢你的帮助——我对 ajax 和 javascript 非常生疏

# php - 在php中使用pascal数据

> ID：12123811
> 
> 赞同：0
> 
> 时间：2012-08-25T16:43:30.957
> 
> 标签：php, mysql, pascal

我正在使用一些 php，需要一些帮助。基本上我有一个脚本，它将一个字符串从 pascal 发送到一个 php 文件，然后将其发布到 mysql 中。

我想知道如何在 php 和 mysql 表中解决这个问题？

```
if test then
begin
TakeScreenshot(main screen)
error := bitmaptostring(the screenshot);
getpage('website.com/error.php?bitmap=error);
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T17:05:43.727

好的，所以你想要做的是从你这样做的 url 中获取值：

```
$value = $_GET['bitmap']; 
```

并且在 php 中连接到 mysql 非常简单，并且是这样的。

```
$mysqli = new mysqli("localhost", "user", "password", "database");
$query = "INSERT INTO tbl_name(col_1, col_2) VALUES(val_1, val_2)";
$result = $mysqli->query($query) or die($mysqli->error.__LINE__); 
```

我不太熟悉如何使用 mysqli（但它优先于 mysql_connect）所以我建议您事先阅读它：

[PHP手册：MySQLi](http://www.php.net/manual/en/class.mysqli.php)

# android - Android密码屏幕状态

> ID：12123813
> 
> 赞同：0
> 
> 时间：2012-08-25T16:43:53.347
> 
> 标签：android

当锁屏开始倒计时禁用锁定时，如何获取Android手机的状态？我知道我需要一些服务来使用它甚至是 BroadcastListener，我会将我的条件放在 BroadcastListener 上。

示例代码：

```
if  ("android.intent.action.BOOT_COMPLETED".equals(intent.getAction(){

} 
```

是否也有（android.intent.action.）可以让我获得锁屏状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T17:07:01.283

你有两个选择：

请参阅广播意图`ACTION_SCREEN_ON`和`ACTION_SCREEN_OFF`.

对于 Android 2.1 及更高版本，您可以使用`isScreenOn()`PowerManager。

# twitter - 仅在 twitter API 中从您的关注者进行增量搜索

> ID：12123823
> 
> 赞同：1
> 
> 时间：2012-08-25T16:44:48.560
> 
> 标签：twitter

**有没有一种聪明的方法使用 Twitter API 来仅从您的关注者**中快速**增加搜索**Twitter 用户？

 **例如，有一百万用户关注的用户 Alice。有一天，Alice 想给另一个用户发送一个 DM，该用户是她的追随者之一，但她只记得他/她的名字是从字母“Bo”开始的。所以她想用前缀“Bo”过滤她的一百万用户名。

Alice 如何使用以“Bo”开头的 Twitter API 获取所有用户？

**方法 1\. 调用`followers/ids`200 次并过滤**：由于`followers/ids`一次只能获得 5,000 个关注者，因此您应该`followers/ids`至少调用 200 次才能获得全部 100 万关注者。之后，您按从“Bo”开始的名称过滤用户。这是非常慢的，因为过滤直到 200 个请求结束才开始。它的可扩展性很差，因为它使用大量内存来保存和过滤每个用户加载的关注者列表。

**方法 2\. 多次呼叫用户/搜索并检查他们是否在关注我**：不幸的是，只有前 1,000 个匹配项可用。超过 1,001 的匹配项将永远不会显示为您的关注者。

我想知道是否有比这更好的方法。以下2种方法太愚蠢了。

* * *

PS Lady Gaga 似乎被 2800 万用户关注。[https://twitter.com/ladygaga](https://twitter.com/ladygaga)**

# javascript - 在提交时设置表单隐藏值

> ID：12123825
> 
> 赞同：0
> 
> 时间：2012-08-25T16:45:00.520
> 
> 标签：javascript, forms

我有一个表单，我想通过 javascript 发送隐藏的输入，怎么做？前：

```
<input id="total" type="hidden" value="" name="total" /> 
```

当有人点击提交时，我想设置它的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T16:50:33.343

您是否试图立即更改隐藏输入的值？当然，这样的事情可以通过`onsubmit`活动来实现。

```
var submit = document.getElementById("submit");
var hidden = document.getElementById("hidden");

var eventListener = function(el, type, listener) {
    if(el.addEventListener) {
        el.addEventListener(type, listener, false);
    } else if(el.attatchEvent) {
        el.attatchEvent("on"+type, listener);
    } else {
        el['on'+type] = listener;
    }
};

var onsubmit = function() {
    var newVal = "value to set for hidden input";

    hidden.value = newVal;
};

eventListener(submit, "submit", onsubmit); 
```

上面的代码会监听提交按钮上的提交事件，当被触发时，它会改变隐藏输入的值。要详细了解任何答案，我们需要一个更具描述性的问题。否则，我真的不知道你想要什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T16:47:37.120

您可以尝试以下操作：

```
 document.getElementById("total").value = "value you want to set";
    document.formname.submit(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T17:04:27.633

如果您尝试创建一个唯一 id 以便可以使用唯一键将此人添加到某个数据库中，或者您想创建某种会话 id 或类似 id 并将其存储在内存中，那么我建议使用 php 或 perl不是javascript。我也是一个新手，但我遇到了那种困境，想出了一些我想做的事情，而 php 为我解决了这个问题。我最终使用 js 来验证表单数据，并在签出后将其传递给 php。如果您想检查数据是否存在并且在表单中不包含您不想要或不需要的任何内容，那么 Node.js 非常棒。这对安全性不利。

# ruby-on-rails - 在 Rails 应用程序上制作 ruby 的 json 问题

> ID：12123830
> 
> 赞同：1
> 
> 时间：2012-08-25T16:45:55.160
> 
> 标签：ruby-on-rails, ruby, json

所以我使用 Bitnami 来学习 Ruby on Rails。我之前也尝试过手动安装 ruby​​ 和 rails 并且遇到了同样的问题，所以我想我应该先尝试 Bitnami 的简单打包交易。无论如何，我对 json 的问题是它导致捆绑安装失败。

首先，由于 ssl 错误，rails new 的自动捆绑安装失败。这很容易通过将gemfile中的源https更改为http来解决。但是，当我尝试捆绑安装时，它会在尝试安装 json 时出现另一个错误。

```
C:\RubyStack-3.2.7-0\projects\testing>bundle install
Fetching gem metadata from http://rubygems.org/.........
Using rake (0.9.2.2)
Using i18n (0.6.0)
Using multi_json (1.3.6)
Installing activesupport (3.2.8)
Using builder (3.0.0)
Installing activemodel (3.2.8)
Using erubis (2.7.0)
Using journey (1.0.4)
Using rack (1.4.1)
Using rack-cache (1.2)
Using rack-test (0.6.1)
Using hike (1.2.1)
Using tilt (1.3.3)
Using sprockets (2.1.3)
Installing actionpack (3.2.8)
Using mime-types (1.19)
Using polyglot (0.3.3)
Using treetop (1.4.10)
Using mail (2.4.4)
Installing actionmailer (3.2.8)
Using arel (3.0.2)
Using tzinfo (0.3.33)
Installing activerecord (3.2.8)
Installing activeresource (3.2.8)
Using bundler (1.1.5)
Using coffee-script-source (1.3.3)
Using execjs (1.4.0)
Using coffee-script (2.2.0)
Using rack-ssl (1.3.2)
Installing json (1.7.5) with native extensions
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension
.

        C:/RUBYST~1.7-0/ruby/bin/ruby.exe extconf.rb
creating Makefile

make
      0 [main] echo 5244 open_stackdumpfile: Dumping stack trace to echo.exe.sta
ckdump
make: *** [generator-i386-mingw32.def] Error 5

Gem files will remain installed in C:/RUBYST~1.7-0/ruby/lib/ruby/gems/1.9.1/gems
/json-1.7.5 for inspection.
Results logged to C:/RUBYST~1.7-0/ruby/lib/ruby/gems/1.9.1/gems/json-1.7.5/ext/j
son/ext/generator/gem_make.out
An error occured while installing json (1.7.5), and Bundler cannot continue.
Make sure that `gem install json -v '1.7.5'` succeeds before bundling. 
```

这是它在尝试安装 json 后生成的 gem_make.out 文件（顺便说一句，windows 也会产生一个错误，即 echo.exe 在运行 gem install json 时停止工作）

```
C:/RUBYST~1.7-0/ruby/bin/ruby.exe extconf.rb 
creating Makefile

make
      0 [main] echo 5244 open_stackdumpfile: Dumping stack trace to echo.exe.stackdump
make: *** [generator-i386-mingw32.def] Error 5 
```

我什至无法开始学习 ror 设置已经是一个巨大的痛苦。（顺便说一句，我之前没有使用 Web 框架的经验，只是桌面编程）。帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T15:37:02.713

在 windows 上运行 rails 需要安装 DevKit。

安装 DevKit，它应该可以解决您的问题： [https ://github.com/oneclick/rubyinstaller/wiki/Development-Kit](https://github.com/oneclick/rubyinstaller/wiki/Development-Kit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T06:17:09.120

构建原生扩展。这可能需要一段时间。`错误：安装 json 时出错：错误：无法构建 gem 原生扩展。

```
 /Users/bruceyue001/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb` 
```

创建生成文件

```
make
compiling generator.c
make: /usr/bin/gcc-4.2: No such file or directory
make: *** [generator.o] Error 1 
```

Gem 文件将继续安装以`/Users/bruceyue001/.rvm/gems/ruby-1.9.3-p194/gems/json-1.7.5`供检查。结果记录到`/Users/bruceyue001/.rvm/gems/ruby-1.9.3-p194/gems/json-1.7.5/ext/json/ext/generator/gem_make.out`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T22:00:27.287

您是否考虑过放弃 bitnami，重新开始，并阅读 Michael Hartl 的[http://ruby.railstutorial.org/ruby-on-rails-tutorial-book](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)？它会让您从一开始就进行设置，而且价格合适（免费）。

# directx - 实施 DirectX SDK 示例（XAudio2Sound3D）给我一个未解决的外部错误？

> ID：12123831
> 
> 赞同：0
> 
> 时间：2012-08-25T16:46:09.410
> 
> 标签：directx, unresolved-external, xaudio2

当我从 2010 年 6 月的 SDK 中实现 XAudio2Sound3D 示例时。我几乎将它全部复制到我自己的框架中，并且这个变量（**sound3DInstance**）显示为未解析的外部：*X3DAudioCalculate( **sound3DInstance** , &listener, &emitter, calcFlags, &dspSettings);* 和*X3DAudioInitialize(details.OutputFormat.dwChannelMask, SPEEDOFSOUND, **sound3DInstance** );* 其中变量类型是：

```
X3DAUDIO_HANDLE sound3DInstance;
X3DAUDIO_LISTENER listener;
X3DAUDIO_EMITTER emitter;
X3DAUDIO_DSP_SETTINGS dspSettings;
DWORD calcFlags = X3DAUDIO_CALCULATE_MATRIX | X3DAUDIO_CALCULATE_DOPPLER | X3DAUDIO_CALCULATE_LPF_DIRECT | X3DAUDIO_CALCULATE_LPF_REVERB | X3DAUDIO_CALCULATE_REVERB;
const float SPEEDOFSOUND = X3DAUDIO_SPEED_OF_SOUND;
XAUDIO2_DEVICE_DETAILS details; 
```

现在，两个函数中唯一显示错误的公共变量是**sound3DInstance**，所以这一定是问题所在。在 SDK 示例中，所有变量都放在一个名为 *AUDIO_STATE* 的结构中，并且在程序的初始化中，它们调用： *ZeroMemory( &g_audioState, sizeof( AUDIO_STATE ) );* 在我的代码中，变量是我的 Sound 类的成员，我只是将它们一一清零，所以效果不应该是一样的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:50:48.913

您没有将您的程序与 XAudio 库 (Xaudio2.lib) 链接起来。检查项目的链接器设置。

# php - php Imagick 旋转和合并

> ID：12123836
> 
> 赞同：0
> 
> 时间：2012-08-25T16:46:57.340
> 
> 标签：php, imagick

我有 2 个图像一个背景，另一个是图层首先我想旋转它然后我想使用 x 和 y 将它放置在某个地方。它可以使用 GD 完成，但是在 gd 中旋转图像时我得到低质量和锯齿形边框..所以我尝试在imagick中旋转它在没有锯齿形并且没有失去质量的情况下完成了它的工作。所以我想知道如何将旋转的图像放置到背景中......

```
Background 
```

![背景图片](../Images/9313a0e734a80489e3d021a703ad52b3.png)

```
Image_2 
```

![图层图像](../Images/1a214048f15373420f3519c0d59ae941.png)

输出应如下所示

![3](../Images/b1a821c1c2f4af98ddba7910c4738879.png)

**编辑：**

到目前为止我尝试过的代码：

```
<?php 
  $imagick = new Imagick(); 
  $imagick->readImage('137.png'); 
  $imagick->rotateImage(new ImagickPixel('none'), -13.55); 
  $imagick->writeImage('my_rotated.png'); 
  $imagick->clear(); 
  $imagick->destroy(); 
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:01:57.853

我试图自己找到解决方案。我想这应该得到你所需要的：

```
$background = 'background.png';
$image = new Imagick($background);

// you can place the code below in a loop to put more images in order
$imgfile = 'foreground-image.png';
$part1 = new Imagick($imgfile);
$part1->rotateImage(new ImagickPixel('none'), -13.55);
$image->compositeImage($part1, Imagick::COMPOSITE_OVER, $left, $top);

$image->writeImage('my_rotated.png');

//save , flush , destroy etc... 
```

# jquery - jQuery ui 输入前置

> ID：12123838
> 
> 赞同：0
> 
> 时间：2012-08-25T16:47:17.197
> 
> 标签：jquery, user-interface, input

是否有使用 UI 将静态文本添加到输入字段的 jquery 插件，如下所示： ![在此处输入图像描述](../Images/7606c931de19a196e12a8f68c0fcb2ca.png)

我知道 twitters bootstrap 可以做到这一点，但我似乎无法为 jquery ui 找到类似的东西。

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T19:24:39.980

我不确定，但您可能可以使用 div 来伪造它，输入无边框，并在左侧浮动一些内联跨度块（带有灰色背景）。

也就是说，如果我了解您要正确实现的目标。

# android - 使用包名称从 google play 获取应用程序的详细信息？

> ID：12123841
> 
> 赞同：4
> 
> 时间：2012-08-25T16:47:20.087
> 
> 标签：android, google-play

谁能告诉我如何使用其包名称从 google play 获取 android 应用程序的所有详细信息，包括图标、屏幕截图和描述？如果有任何api，请告诉我。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T16:56:55.290

除了可用于将 Google Play 应用程序启动到特定页面的[记录 Intent](https://developer.android.com/distribute/googleplay/promote/linking.html)之外，Google Play 没有官方 API 。

除此之外，还有一个[非官方的 API](http://code.google.com/p/android-market-api/)可以运行一些查询并返回数据，但不能做所有事情。

# python - 构造正则表达式来检查特定的文本数据库格式

> ID：12123850
> 
> 赞同：2
> 
> 时间：2012-08-25T16:48:50.567
> 
> 标签：python, regex, matlab

`|`假设我有一个文本文件，它通过使用符号分隔数据库列来充当简单的数据库：

```
|some text| 234| other field| bla| 1232| 
```

我想构造一个正则表达式

*   检查每行中有多少个字段（通过计算`|`符号的出现）
*   检查哪些字段是空的（两个`|`符号之间没有文本）
*   将返回每个字段值
*   将从字段值周围去除空白。但要小心，空字段不应该被剥离！

这里有两个例子来说明我想要什么：

```
line = |some text| 234| other field| bla| 1232|
output = my_regexp(line)
disp(output)
  'some text', '234', 'other field', 'bla', '1232' 
```

现在相同，但这次字段 3 为空：

```
line2 = |some text| 234|  | bla| 1232|
output = my_regexp(line)
disp(output)
  'some text', '234', '', 'bla', '1232' 
```

我试过以下

```
values = regexp(regexprep(line '[\s]', ''), '\|', 'split') 
```

但不幸的是，这个解决方案没有

*   检查有多少`|`存在
*   不保留返回值的字段顺序，因为空字段被忽略
*   告诉我哪个字段是空的

我从未构建过复杂的正则表达式规则，感谢您的意见！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T16:52:38.947

这可以使用`line.split`如下方式完成：

```
values = [v.strip() for v in line.split("|")[1:-1]]
num_fields = len(values)
num_empty_fields = values.count("") 
```

要获取空字段的索引列表：

```
indices_empty_fields = [i for i, f in enumerate(values) if f == ""] 
```

要使用正则表达式，请将计算替换为`values`：

```
import re
values = re.split("\s*\|\s*", line)[1:-1] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T16:52:58.037

我根本不会在这里使用正则表达式；对于如此简单的工作来说，它们太复杂了。

只需在管道符号上拆分：

```
>>> '|some text| 234| other field| bla| 1232|'.split('|')
['', 'some text', ' 234', ' other field', ' bla', ' 1232', ''] 
```

丢弃第一个和最后一个值，去掉其余的值以删除空格，然后你就有了列：

```
>>> example = '|some text| 234| other field| bla| 1232|'
>>> columns = map(lambda s: s.strip(), example.split('|')[1:-1])
>>> columns
['some text', '234', 'other field', 'bla', '1232'] 
```

要在不拆分的情况下计算列，只需使用`.count()`函数，减 1：

```
>>> example.count('|') - 1
5 
```

或采用`len`列输出：

```
>>> len(columns)
5 
```

想计算空列？拆分这些列并计算空列：

```
>>> columns.count('')
0 
```

或者对于您的第二行：

```
>>> line2 = '|some text| 234|  | bla| 1232|'
>>> columns_line2 = map(lambda s: s.strip(), line2.split('|')[1:-1])
>>> columns_line2
['some text', '234', '', 'bla', '1232']
>>> columns_line2.count('')
1 
```

# java - Java：为什么我的对象数组被创建并且它们的引用传递如此缓慢？

> ID：12123854
> 
> 赞同：0
> 
> 时间：2012-08-25T16:49:24.323
> 
> 标签：java, arrays, performance, enums

我试图弄清楚我在代码中创建对象数组的方式是否有问题，或者在 Java 中处理对象数组是否比我最初认为的更昂贵。

我有一个名为 的简单枚举类`ElementaryTransitionTerm`，它只包含两个原始成员变量。另一个类中的方法创建一个由该 Enum 的常量组合组成的数组（数组的可能长度永远不会超过 3）。

问题在于，程序在所述方法中总共花费（平均）**13ms**，尽管它只被**调用了 8 次**。我不知道为什么。

运行时间通过两种方式计算：

1.  通过 System.nanoTime() 调用围绕对方法的调用。

2.  通过 System.nanoTime() 调用围绕方法内的每个数组创建语句并将它们总结起来

这是**ElementaryTransitionTerm**枚举类：

```
public enum ElementaryTransitionTerm 
{
    MATCH(1, 0), INSERTION(0, 1), SUBSTITUTION(1, 1), DELETION(0, 0), FAILURE(0, 0);

    private final int I_OFFSET;
    private final int E_OFFSET;

    private ElementaryTransitionTerm(int iOffset, int eOffset)
    {
        I_OFFSET = iOffset;
        E_OFFSET = eOffset;

    }
} 
```

这是有问题的方法**createTransitionTerms**（以及用作参数的枚举类型的声明）：

```
//'E' and 'I' are both private int fields in the parent class.

private enum RelevantSubwordHitIndexType { FIRST_INDEX, TRAILING_INDEX, NO_INDEX };

/**
 * Creates an array of ElementaryTransitionTerm constants.

 * @param hitIndexType     a RelevantSubwordHitIndexType enum constant
 */
private ElementaryTransitionTerm[] createTransitionTerms(RelevantSubwordHitIndexType hitIndexType)
{
    //Simple getter method chained in to String.length() call
    int onePastFinalBoundary = parentAutomaton.getAutomatonString().length(); 

    if(E < parentAutomaton.getMaxEditDistance())   //Simple getter method retrieving an int
    {
        if(I < onePastFinalBoundary - 1)           
        {
            switch(hitIndexType)
            {
                case FIRST_INDEX:       return new ElementaryTransitionTerm[] {ElementaryTransitionTerm.MATCH};
                case TRAILING_INDEX:    return new ElementaryTransitionTerm[] {ElementaryTransitionTerm.INSERTION, ElementaryTransitionTerm.SUBSTITUTION, ElementaryTransitionTerm.DELETION};
                default:                return new ElementaryTransitionTerm[] {ElementaryTransitionTerm.INSERTION, ElementaryTransitionTerm.SUBSTITUTION};
            }
        }
        else if(I == onePastFinalBoundary - 1)     
        {
            switch(hitIndexType)
            {
                case FIRST_INDEX:       return new ElementaryTransitionTerm[] {ElementaryTransitionTerm.MATCH};
                default:                return new ElementaryTransitionTerm[] {ElementaryTransitionTerm.INSERTION, ElementaryTransitionTerm.SUBSTITUTION};
            }
        }
        else                            return new ElementaryTransitionTerm[] {ElementaryTransitionTerm.INSERTION};     
    else                                            
    {
        if(I < onePastFinalBoundary)                
        {
            switch(hitIndexType)
            {
                case FIRST_INDEX:       return new ElementaryTransitionTerm[] {ElementaryTransitionTerm.MATCH};
                default:                return new ElementaryTransitionTerm[] {ElementaryTransitionTerm.FAILURE};
            }
        }
        else                            return new ElementaryTransitionTerm[] {ElementaryTransitionTerm.FAILURE};
    }
} 
```

该方法本质上评估一小组条件以创建一个小数组。但是，此方法运行 8 次的总执行时间并不能反映这一点。

我什至`public final`在 ElementaryTransitionTerm 中将要返回的数组声明为数组，并将上述方法中的创建语句替换为对这些数组的引用，但这对代码的运行时间完全没有影响。

我编写的代码可以在更短的时间内完成更多工作。所以我很好奇为什么这种方法会这样。有没有人有任何想法？

**编辑**：

经过进一步测试，我发现了两件事：

1.  单独测试该方法会产生预期的（即亚毫秒）结果。
2.  在程序中测试该方法，似乎在第一次调用该函数时执行的数组创建语句基本上对我所看到的时间负责。所有后续调用都在亚毫秒时间内完成。

关于＃2：这是什么原因，我该如何纠正它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T18:57:24.033

为了完成 Shivan 的回答，我用随机生成的输入（一百万次）运行了一个测试，我得到了 40 到 50 毫秒之间的结果。

这是随机生成部分：

```
public MyTest() {
    Random r = new Random();

    parentAutomaton = new ParentAutomaton();
    parentAutomaton.maxEditDistance = r.nextInt(255);
    parentAutomaton.automatonStringLen = r.nextInt(255);
    E = r.nextInt(255);
    I = r.nextInt(255);
    relevantSubwordHitIndexType = RelevantSubwordHitIndexType.values()[r.nextInt(3)];

} 
```

和执行方法：

```
public static void main(String [] args) {
    List<MyTest> l = new ArrayList<MyTest>();

    for (int i = 0; i < 1000000; i++) {
         l.add(new MyTest());
    }

    long start = System.nanoTime();
    for (MyTest t:l) {
        t.createTransitionTerms(t.relevantSubwordHitIndexType);
    }

    double dur_nano = System.nanoTime() - start;
    double dur_mili = dur_nano / 1000000.0;
    System.out.println("Finished in : " + dur_mili);

} 
```

我的操作系统是`Ubuntu 12.04`，我的 CPU 是`Intel(R) Core(TM)2 Duo CPU T7250` @ 2.00GHz 和 2GB 内存。我用 Java 1.6.0_24 运行它。

如果您想要完整的源代码，请告诉我。

希望能帮助到你，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T17:07:56.563

运行您的代码，我得到 25-30 毫秒的时间来调用该方法一百万次。在 Sony Vaio Z、i5、4 GB Ram、Win 7 64 但 JDK 6 64 位上运行。

这是我尝试过的实际代码：

```
 private ElementaryTransitionTerm[] createTransitionTerms(RelevantSubwordHitIndexType hitIndexType) {
            //Simple getter method chained in to String.length() call
            int onePastFinalBoundary = "A".length(); 

//Here I also tried if(1 < 2) to change the if/else execution path, same run time for each.
            if(3 < 2)    {
                if(1 < 2) {
                    switch(hitIndexType) {
                        case FIRST_INDEX:       return new ElementaryTransitionTerm[] {ElementaryTransitionTerm.MATCH};
                        case TRAILING_INDEX:    return new ElementaryTransitionTerm[] {ElementaryTransitionTerm.INSERTION, ElementaryTransitionTerm.SUBSTITUTION, ElementaryTransitionTerm.DELETION};
                        default:                return new ElementaryTransitionTerm[] {ElementaryTransitionTerm.INSERTION, ElementaryTransitionTerm.SUBSTITUTION};
                    }
                } else if(1 == 1) {
                    switch(hitIndexType) {
                        case FIRST_INDEX:       return new ElementaryTransitionTerm[] {ElementaryTransitionTerm.MATCH};
                        default:                return new ElementaryTransitionTerm[] {ElementaryTransitionTerm.INSERTION, ElementaryTransitionTerm.SUBSTITUTION};
                    }
                }
                else {                     
                    return new ElementaryTransitionTerm[] {ElementaryTransitionTerm.INSERTION};
                }
            } else  {
                if(1 < 2) {
                    switch(hitIndexType) {
                        case FIRST_INDEX:       return new ElementaryTransitionTerm[] {ElementaryTransitionTerm.MATCH};
                        default:                return new ElementaryTransitionTerm[] {ElementaryTransitionTerm.FAILURE};
                    }
                } else {
                    return new ElementaryTransitionTerm[] {ElementaryTransitionTerm.FAILURE};
                }
            }
        }

        public static void main(String args[]) {
            T1 t = new T1();
            long st = System.currentTimeMillis();
            for(int i = 0 ; i<1000000; i++) {
                t.createTransitionTerms(RelevantSubwordHitIndexType.FIRST_INDEX);
            }
            long et = System.currentTimeMillis();
            System.out.println(et-st);
        } 
```

您能告诉我们您测试的是什么硬件、操作系统、JDK 版本吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-25T17:08:21.740

尝试以下想法可能值得尝试：

1.  预先创建一些数组，例如`return new ElementaryTransitionTerm[] { ElementaryTransitionTerm.INSERTION };`并将它们保留为`private static`值。
2.  重新排序您的案例和条件，以便如果有一个分支比其他分支更常执行，那么以某种方式将其放在第一位。

# c++ - 按类中的特定变量搜索

> ID：12123855
> 
> 赞同：0
> 
> 时间：2012-08-25T16:49:33.690
> 
> 标签：c++, list, iterator, find

我有一个指向类的指针列表：

```
list<AbsClient*> clients; 
```

AbsClient 可能是 3 个中的 1 个：TempClient、RegisteredClient、VIPClient。

在 AbsClient 内部有一个受保护的变量：phone_number。

我需要遍历客户列表，并搜索特定的电话号码。

我试过这个：

```
 list<AbsClient*>::iterator iter;
    for(iter=clients.begin();iter!=clients.end();++iter)
{
    if(iter->phone_number == phone)
    {

    }
} 
```

但它不允许我访问 iter->phone_number：

> 错误：表达式必须具有指向类的类型

这条线有什么问题？

PS是否可以使用 stl::find 函数并以某种方式告诉它通过“phone_number”变量进行搜索？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T17:05:42.080

您可以将迭代器视为容器的“指向元素的指针”。并且容器中元素的类型是一个`AbsClient*`——另一个指针。因此，至少在语法上，您处于双指针情况，因此您需要更改取消引用迭代器的方式：

```
(*iter)->phone_number == phone 
```

但是，您的帖子说这`phone_number`是受保护的成员，当您不在该类或派生类中时，您无法访问受保护的变量，因此您需要使用访问器方法或更改数据成员的可见性。

不，你不能`std::find`用来做这个（至少不能直接），但你*可以*使用`std::find_if`：

```
iter = std::find_if(clients.begin(), clients.end(),
    [phone](AbsClient* cl) { return cl->phone_number == phone; }); 
```

如果您不使用 C++11，那么它会更冗长：

```
struct MatchPhone {
    explicit MatchPhone(PhoneNumber p) : phone(p) {}
    bool operator()(AbsClient* cl) {
        return cl->phone_number == phone;
    }
    PhoneNumber phone;
};

// ...
iter = std::find_if(clients.begin(), clients.end(), MatchPhone(phone));
// ... 
```

# vim - 逐行包含删除最多一个模式

> ID：12123856
> 
> 赞同：3
> 
> 时间：2012-08-25T16:49:47.277
> 
> 标签：vim

假设您想从名称中删除一个**C**函数，直到并*包括*带有结束花括号的行：

```
int main (void)   /* Cursor on this line. */
{
   while (...) {
      ...
   }
} 
```

我已经尝试过`d/^}<CR>`，但这并没有删除带有结束卷曲的行。如何进行*包容性查找模式*删除？我一定错过了一些简单的东西。

**编辑**您可以假设函数的结束卷曲位于行首，而其他卷曲永远不会。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T17:01:32.707

我只是快速搜索了一下，在[这里](http://vimdoc.sourceforge.net/htmldoc/pattern.html#/)找到了运算符的*偏移量*语法。`/`

```
d/^}/0 
```

为我做了伎俩。它的意思是“找到匹配的模式，然后选择到它之后的第0行的末尾”（即找到它的行的末尾）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-25T16:56:51.673

使用`V][d`.

它的意思是：

*   **V** : 进入可视模式。
*   **][** : 移动到下一个`}`
*   **d**：删除所有视觉选择。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-25T16:55:50.143

您的命令不适用于具有嵌套大括号的函数。我会删除到第一个 '{' `0d]]`，然后`daB`删除块。

新 vimers 的详细信息：第`'0'`一个命令中的 确保您在编辑`d`命令之前位于行首。 `']]'`是一个让您进入下一个块`'aB'`的动作，并且是一个选择整个块的选择动作，包括嵌套块。所以`0d]]daB`意味着从行首删除到下一个块，然后删除该块。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T17:47:51.723

你可以做`jVaBokd`

`j`- 下移一条线

`VaB`- 外块上的视线选择

`o`- 移动到视觉选择的另一端

`k`- 向上移动一条线

`d`- 删除选择

# python - 我想让 selenium 点击一个链接

> ID：12123857
> 
> 赞同：0
> 
> 时间：2012-08-25T16:49:48.883
> 
> 标签：python, selenium, web2py

我有一个自动生成的链接：

```
<a href="LINK">Download</a> 
```

我希望 selenium 单击“下载” `LINK`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T16:59:55.557

```
driver.find_element_by_link_text('Download').click() 
```

# c++ - 可视化编程

> ID：12123858
> 
> 赞同：-3
> 
> 时间：2012-08-25T16:49:53.133
> 
> 标签：c++, visual-c++

先生，我编写了一个简单的程序来在 Visual c++ 2008 中显示一个消息框，但问题是当我运行此代码时，当我按是时，一个对话框显示“你的项目已过时，你想构建它”显示错误，这是什么问题？？？代码在这里

```
#include <Windows.h>  /* The standard "windows.h" inclusion */

int WINAPI WinMain( HINSTANCE hInstance,        /* A handle to the current instance of the application. */
  HINSTANCE hPrevInstance,    /* A handle to the previous instance of the application. */
  LPSTR lpCmdLine,            /* The command line for the application, excluding the program name. */
  int nCmdShow)               /* Controls how the window is to be shown. */
{  
  /* Call to the MessageBox function */
  MessageBox(NULL, "Hello, Windows API!", "Hello", MB_OK);

  /* WinMain returns 0 if we exit before we enter message loop, more on that to come */
  return 0;  
} 
```

每当我在visuall c ++ 2008中运行它时，它说项目已过期，你想构建所以我点击是但它不能在底部说

1>链接... 1>MSVCRTD.lib(crtexe.obj)：错误 LNK2001：无法解析的外部符号 _main 1>C:\Documents and Settings** ***\My Documents\Visual Studio 2008\Projects\msg\Debug\msg。 exe : 致命错误 LNK1120: 1 unresolved externals 1>Build log was saved at "file://c:\Documents and Settings** *** \My Documents\Visual Studio 2008\Projects\msg\msg\Debug\BuildLog.htm" 1 >Wrath Lands - 2 个错误，0 个警告 ========== 构建：0 个成功，1 个失败，0 个最新，0 个跳过 ======== ==

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T04:26:54.273

错误信息`error LNK2001: unresolved external symbol _main`很重要。看起来您已经创建了一个控制台项目，但没有`main()`定义函数，因此出现链接器错误。

当您创建一个新的 Visual Studio 项目时，`Win32 Console Application`它假定您的程序的入口点将是普通的 C/C++`main()`函数，并且它与 C/C++ 库启动代码链接。如果您改为创建一个`Win32 Project`，则它假定入口点将是`WinMain()`并与 Windows 应用程序启动代码链接。

为避免此问题，您应该从`Win32 Project`. 要在事后修复它，您可以尝试进入`Project Properties`-> `Linker`->`System`并将`SubSystem`选项从更改`Console (/SUBSYSTEM:CONSOLE)`为`Windows (/SUBSYSTEM:WINDOWS)`。请注意，可能还有其他设置也应该更改，所以我建议您从新开始`Win32 Project`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T17:48:18.003

VS 默认创建 UNICODE 项目，因此像 MessageBox 这样的宏计算为 MessageBoxW，它需要 LPCWSTR 参数而不是 LPCSTR。尝试更改为： MessageBox(NULL, _T("Hello, Windows API!"), _T("Hello"), MB_OK);

# html - 我无法在输入标签中获取输入文本？

> ID：12123859
> 
> 赞同：1
> 
> 时间：2012-08-25T16:50:06.647
> 
> 标签：html, dom

这对我来说很奇怪：

```
document.getElementById('orderNumber') 
```

> 返回`<button class="popup" id="orderNumber">order Number</button>`

```
document.getElementById('orderNumber').value 
```

> 返回''

所有的操作都是在 dom 完全加载之后并且在我输入类型之后，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T16:55:09.907

如果你想要`value`元素的，该元素必须*有*一个`value`属性集：

```
<button class="popup" id="orderNumber" value="this is the value">order Number</button> 
```

通过以下方式检索的值：

```
var value = document.getElementById('orderNumber').value; 
```

或者如果您想要元素的文本，请尝试检索`textContent`（或`innerText`）：

```
var ordernumberEl = documet.getElementById('orderNumber'),
    text = orderNumberEl.textContent || orderNumberEl.innerText; 
```

一个通用的[JS Fiddle 概念证明](http://jsfiddle.net/davidThomas/Dja63/1/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T16:52:00.987

尝试：

```
document.getElementById('orderNumber').innerHTML 
```

# javascript - 正确输入的文字会改变图像？

> ID：12123866
> 
> 赞同：1
> 
> 时间：2012-08-25T16:50:58.117
> 
> 标签：javascript, jquery

我正在尝试实现正确输入的文本将导致图像更改的效果，让用户知道他输入正确。我遇到的唯一问题是，如果该人正确键入了前两个字符，即使第三个字符不正确，它仍然保持不变。

示例：以单词“ate”为例。

如果用户键入带有两个 A 的“aate”，则图像仍保持突出显示/更改。

是否有可能让它以某种方式与正确的文本保持一致？

JSFIDDLE 在这里带有谷歌图片，例如：

[http://jsfiddle.net/japaneselanguagefriend/wjx6b/](http://jsfiddle.net/japaneselanguagefriend/wjx6b/)

ps我希望我解释清楚！我已经起床了好几个小时了，我可以伸出援助之手。非常感谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T17:04:58.783

你需要的是检查索引

```
$("#test").on('keyup', function() {
    var typed = this.value;
    $.each(text, function(index, item) {
        if (typed[index] == text[index]) {
            $('li', 'ul').eq(index).find('img').attr('src', happy[index]);
        }else{
            $('li', 'ul').eq(index).find('img').attr('src', grumpy[index]);
        }
    });
}); 
```

[http://jsfiddle.net/wjx6b/2/](http://jsfiddle.net/wjx6b/2/)

或者完全匹配需要将当前文本与组合的数组字母进行比较

```
$("#test").on('keyup', function() {
    var typed = this.value;
    var theWord = ''
    for(i=0;i<typed.length;i++){
        theWord += text[i];
    }
    $.each(text, function(index, item) {            
        if (typed[index] == text[index] && typed == theWord) {
            $('li', 'ul').eq(index).find('img').attr('src', happy[index]);
        }else{
            $('li', 'ul').eq(index).find('img').attr('src', grumpy[index]);
        }
    });
}); 
```

[http://jsfiddle.net/wjx6b/4/](http://jsfiddle.net/wjx6b/4/) ​</p>

# jsp - JSP 运行时异常

> ID：12123873
> 
> 赞同：0
> 
> 时间：2012-08-25T16:51:51.267
> 
> 标签：jsp

JSP 中的 IlligalStackException。当我们尝试在 JSP 文件中执行 response.sendRedirect() 方法时（出现错误消息“响应已提交”）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:56:49.590

在您已经发送重定向并将更多数据输出到流之后，这通常是一条错误消息。那是不可能的。

[java.lang.IllegalStateException：提交响应后无法转发](https://stackoverflow.com/questions/2123514/java-lang-illegalstateexception-cannot-forward-after-response-has-been-committe)

# javascript - 时间戳到文本

> ID：12123878
> 
> 赞同：2
> 
> 时间：2012-08-25T16:52:09.647
> 
> 标签：javascript, date, web, calendar, timestamp

我想知道是否有可以将时间戳（日期 java 类值）转换为文本的 javascript 库。
例如：

1.  两分钟前
2.  4 小时前
3.  2009 年 8 月 23 日

这种图书馆存在吗？否则我当然会自己实现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T16:55:26.363

我建议您尝试使用 momentjs 来帮助您解析时间格式。看看[http://momentjs.com/](http://momentjs.com/)

下面是一些示例代码： moment().format('dddd, MMMM Do YYYY, h:mm:ss a'); moment().format('dddd [on the] wo [一年中的一周]'); moment().format("MMM 做 'YY"); 时刻（）。格式（）；

该库很有帮助且易于学习。

# javascript - 刷新 iframe？

> ID：12123880
> 
> 赞同：1
> 
> 时间：2012-08-25T16:52:28.307
> 
> 标签：javascript, jquery, iframe, reload

我的页面上有一个 iframe，您可以在其中查看我最新的 Web 开发页面，等等。是否可以使用常规 JavaScript 或 jQuery 刷新它？

```
<iframe src="projektit" style="width:100%; height:400px; border:none;" id="iframe"></iframe> 
```

我正在考虑这样的事情。

```
$.ajax({
    url: "../",
    success: function (data) {
        $("#iframe").html(data);
    }
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T17:32:26.833

```
<iframe id="homepage" frameborder="1" width="400" height="300" src="http://jbcurtin.com/"></frame>
<script>
  var frame=$("#homepage")
  frame.attr('src',frame.attr('src'))
  // None jquery:
  var frame=document.getElementById('homepage')
  frame.src=frame.src;
</script> 
```

[http://jsfiddle.net/ekpAm/](http://jsfiddle.net/ekpAm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T16:53:42.457

[jsFiddle](http://jsfiddle.net/XG3Ea/)

要刷新 iframe，我建议只更改`src`值。更改`src`值将触发`iframe`刷新。

```
$('#iframe').prop('src', url); 
```

如果您发现它没有刷新，您总是可以在 url 的末尾附加一个虚假的查询字符串值，以防它被缓存。

```
var q = new Date(); // use current date obj as query string value
$('#iframe').prop('src', url + '?q=' + q.getTime()); 
```

# matlab - Matlab中的Ezcontour缺少轮廓

> ID：12123881
> 
> 赞同：3
> 
> 时间：2012-08-25T16:52:29.180
> 
> 标签：matlab, plot, mixture-model

我已经使用 将`gmdistribution`数据拟合到高斯混合模型。我想绘制一个轮廓图[http://imgur.com/yVE1M](https://imgur.com/yVE1M)，其中轮廓明显缺失。对于我发现的一维问题`fplot`，但现在我很难过。

![在此处输入图像描述](../Images/729d9f32820f9c2082c6b2aa7207cad6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T21:26:20.770

当我为高斯混合编写一个 EM 算法时，我遇到了类似的问题。这是在我的情况下修复它的代码片段：

```
for l=1:k
        zz=gmdistribution(MU(l,:),SIG(:,:,l),PI(l));
        ezcontour(@(x,y)pdf(zz,[x y]),[minx1 maxx1],[miny1 maxy1],250);
end 
```

关键是增加`N`：

```
ezcontour(...,N) plots FUN over the default domain using an N-by-N
grid. The default value for N is 60. 
```

# mysql - MySQL WHERE 子句的日期应该如何格式化

> ID：12123882
> 
> 赞同：0
> 
> 时间：2012-08-25T16:52:30.163
> 
> 标签：mysql

我有一个包含 DATETIME 列的表。我希望包含一个 WHERE 子句来限制基于此列的记录。约束的格式当前为 08/23/2012。如果需要，我可以使用 PHP 将当前格式转换为所需的格式。

我应该在将格式传递给 MySQL 之前使用 PHP 转换格式（如果是，应该是什么格式），或者我应该以这种方式传递它，然后使用 MySQL 来转换它（再一次，如何转换？）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:58:43.827

你应该在 PHP 中转换它：

`$date=date( 'Y-m-d H:i:s', strtotime("08/23/2012"))`表示 MySQL 中的 DATETIME 格式

检查文档：[http ://dev.mysql.com/doc/refman/5.1/en/datetime.html](http://dev.mysql.com/doc/refman/5.1/en/datetime.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T17:00:30.470

我不知道是否有官方指导，但我发现 yyyy-mm-dd 在使用代码格式化 MySQL 查询的日期时是可靠的。

# android - 获取图库中的所有图像

> ID：12123883
> 
> 赞同：1
> 
> 时间：2012-08-25T16:52:31.837
> 
> 标签：android, gridview, galleryview

我正在开发一个应用程序，当用户单击“选择图像”按钮时，它应该能够在galaryview 或gridview 中查看可绘制文件夹的所有图像。我怎样才能做到这一点？在从网格或图库视图中单击图像后，我只需要填充该图像路径并存储到一个变量中。我还希望当我返回上一页时，我的所有数据都带有图像路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T17:29:34.167

```
public class GetImageActivity extends Activity {

    private static final int SELECT_PICTURE = 1;

    private String selectedImagePath;
    private ImageView img;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        img = (ImageView)findViewById(R.id.ImageView01);

        ((Button) findViewById(R.id.Button01))
                .setOnClickListener(new OnClickListener() {
                    public void onClick(View arg0) {
                        Intent intent = new Intent();
                        intent.setType("image/*");
                        intent.setAction(Intent.ACTION_GET_CONTENT);
                        startActivityForResult(Intent.createChooser(intent,"Select Picture"), SELECT_PICTURE);
                    }
                });
    }

    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode == RESULT_OK) {
            if (requestCode == SELECT_PICTURE) {
                Uri selectedImageUri = data.getData();
                selectedImagePath = getPath(selectedImageUri);
                System.out.println("Image Path : " + selectedImagePath);
                img.setImageURI(selectedImageUri);
            }
        }
    }

    public String getPath(Uri uri) {
        String[] projection = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(uri, projection, null, null, null);
        int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    }
} 
```

# java - Android Java 正则表达式匹配

> ID：12123884
> 
> 赞同：5
> 
> 时间：2012-08-25T16:52:33.970
> 
> 标签：java, android, regex

我试图拉出字符串：

```
 [{"name":"John Doe Jr."},{"name2":"John Doe"}] & {"name":"John Doe"} 
```

来自以下 JSON 字符串中的有效负载：

```
{"to":"broadcast", "type":"50", "payload":[{"name":"John Doe Jr."},{"name2":"John Doe"}]}

{"to":"broadcast", "type":"50", "payload":{"name":"John Doe"}} 
```

使用这个正则表达式代码：

```
Pattern pattern = Pattern.compile("\\{(.*?)\"payload\":\"(.*?)\"\\}\\}");

Matcher matcher = pattern.matcher(jsonString); 
```

我收到 IllegalStateException: No successfull match so far

我的正则表达式有什么问题？

另外如何获得它找到的匹配数？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-25T17:18:38.137

这应该有效：

```
String someJson ="{\"to\":\"broadcast\", \"type\":\"50\", \"payload\":[{\"name\":\"John Doe Jr.\"},{\"name2\":\"John Doe\"}]}";

Pattern p = Pattern.compile(".*?payload\":(.*)}");
Matcher m = p.matcher(someJson);
if (m.matches()) {
  String payload = m.group(1);
} 
```

之后，有效载荷将具有值`[{"name":"John Doe Jr."},{"name2":"John Doe"}]` 或`{"name":"John Doe"}`

一些注意事项：

*   此正则表达式仅在有效负载元素是您的 json 字符串中的最后一个 json 对象时才有效。
*   正如其他人所提到的：使用 json api 执行此操作会更好（也更容易）（见下文）
*   如果您可以控制 json 字符串，最好返回一个仅包含一个元素的数组，而不是直接返回该元素。所以你不需要编写额外的代码来读取单个元素。

对于 Android `JSONObject`，这可能如下所示：

```
JSONObject json = new JSONObject(someJson);
try {
  JSONArray payload = json.getJSONArray("payload");
} catch (Exception e) {
  // array conversion can fail for single object 
  JSONObject payload = json.getJSONObject("payload");
} 
```

# javascript - 为什么 Bootstrap typeahead 不适用于具有相同 ID 的输入元素？

> ID：12123885
> 
> 赞同：3
> 
> 时间：2012-08-25T16:52:38.367
> 
> 标签：javascript, twitter-bootstrap

我的 HTML 结构是这样的：

```
<div class="controls">
<input id="car" class="span3" type="text"  placeholder="B.E" autocomplete="off" value="" name="car[]">
</div>

<div class="controls">
<input id="car" class="span3" type="text"  placeholder="B.E" autocomplete="off" value="" name="car[]">
</div> 
```

我的javascript如下：

```
car = getcar();
$("#car").click(function() {
$('#car').typeahead({
    source: car,
    items: 10
});
}); 
```

`getcar()`是使用获取源数据的函数`ajax`

它仅显示第一个`input`元素而不是第二个`input`元素的预输入

我现在该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T18:55:04.177

有几点可能会导致您的问题。

## 阿贾克斯调用

您无法通过简单地调用来从 ajax 请求中获取数据`data = getData();`。

您必须使用回调，您可以查看[jQuery 文档上的基本示例](http://api.jquery.com/jQuery.ajax/#entry-examples)

## 重复的 ID

同一页面上的 HTML 元素 ID 必须不同。检查[w3.org 文档](http://www.w3.org/wiki/HTML/Attributes/_Global#Core_Attributes)。相反，您可以使用类`<input class="car" ...`和 jQuery 选择器`$('.car')`

## 预输入初始化

Typeahead 插件应该只初始化一次。如果你绑定了一些事件来激活插件，那么你应该取消绑定这个事件，这样它就不会被再次调用。

* * *

[这是一个示例，您可以通过其工作演示（jsfiddle）](http://jsfiddle.net/Sherbrow/p3wXs/)适应您的情况

```
$('.typeahead').on('click.typeaheadonce', function() {
    var $this = $(this)
    $this.off('click.typeaheadonce'); // Disable this listener so that it's called only once
    $.ajax(ajaxUrl, {
        type: 'post',
        data: ajaxData
    }).done(function(data) {
        // initialize the typeahead plugin
        $this.typeahead({
            source: data
        });
        alert('activated!'); // Ok !
    });
}); 
```

基于标记

```
<input type="text" class="typeahead" />
<input type="text" class="typeahead" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T17:03:18.417

您不能两次使用相同的 ID。试试这个（未经测试，但你应该明白）：

```
<div class="controls">
<input id="car1" class="typeahead span3" type="text"  placeholder="B.E" autocomplete="off" value="" name="car[]">
</div>

<div class="controls">
<input id="car2" class="typeahead span3" type="text"  placeholder="B.E" autocomplete="off" value="" name="car[]">
</div> 
```

javascript如下：

```
car = getcar();
$(".typeahead").click(function() {
$('.typeahead').typeahead({
    source: $(this),
    items: 10
});
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-22T10:17:27.213

我有一个动态 DOM，所以我使用这个：对于每个新元素，我给一个随机 id，然后通过 id 在这个元素上激活 typeahead

```
$( "body" ).on( "click", ".typeahead", function() {
  if( $(this).data('autocomple_ready') != 'ok' ){
      $(this).attr('id',Math.round(new Date().getTime() +(Math.random() * 100)));
      var assigned_id=$(this).attr('id');
      $('#'+assigned_id).typeahead({
          hint: true,
          highlight: true,
          minLength: 4,
          delay:500,
          source: function (query, process) {
              return $.post('put_your_url_here',{ 'query': query },
                  function (data) {
                      return process(data);
                  },'json');
          },
          displayText: function(item){ return item.name;}

      });  
    };
    $(this).data('autocomple_ready','ok');
  }); 
```

# c# - 使用 C# 将 XML 文档作为参数传递给 Web 服务

> ID：12123887
> 
> 赞同：0
> 
> 时间：2012-08-25T16:52:52.070
> 
> 标签：c#, xml, web-services, asmx

我必须将 XML 文档作为参数发送，以使用 Post 方法请求 WebRequest 并获得响应。Web 服务实现以下方法：

```
public string Register(XmlDocument register){...} 
```

我正在尝试这样做[，](https://stackoverflow.com/questions/4896213/passing-xml-document-as-an-parameter-to-web-services-in-c-sharp)但我无法得到响应，我不确定我的代码是否正常工作 =(

```
HttpWebRequest request = HttpWebRequest.Create("http://ws2.sti.gov.kg/TRKService/PatentService.asmx/Register") as HttpWebRequest;
request.Method = "POST";
request.ContentType = "application/x-www-form-urlencoded";

Encoding ex = Encoding.GetEncoding("iso-8859-1");
XmlDocument doc = new XmlDocument();
doc.LoadXml("<foo><bar>baz</bar></foo>");
string rawXml = doc.OuterXml;

string requestText = string.Format("register={0}", HttpUtility.UrlEncode(rawXml, ex));

Stream requestStream = request.GetRequestStream();
StreamWriter requestWriter = new StreamWriter(requestStream, ex);
requestWriter.Write(requestText);            
requestWriter.Close(); 
```

也许有人有一个可行的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:09:45.470

**403 错误**

如果您在尝试导入 Web 服务时收到 403，这可能不是您的错。尝试在 Web 浏览器中查看 wsdl 文件。如果您仍然收到 403 错误，那么他们将不再使用编码，因为您无权使用该服务。

**代码语法**

此外，在您的代码中，您似乎没有在任何地方读回响应。您的最后一条语句将 XML 写入流，但您没有在任何地方读回响应。

```
requestWriter.Write(requestText);            
requestWriter.Close(); 
```

**肥皂**

如果您正在与之通信的 Web 服务是基于 SOAP 的，那么您的 XML 有效负载需要符合 SOAP 标准。您上面的示例代码使用了非常基本的 XML，可能是因为它只是一个示例，但是要使其正常工作，您将需要具有以下格式的请求

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <GetWeather xmlns="http://www.webserviceX.NET">
      <CityName>string</CityName>
      <CountryName>string</CountryName>
    </GetWeather>
  </soap:Body>
</soap:Envelope> 
```

不是

```
<foo><bar>baz</bar></foo> 
```

同样，您显然仅使用 foo 作为示例，但这也可能是问题的根源，因此请检查您发送的实际 XML 有效负载。

# php - 基于 xpath 值是否返回的条件

> ID：12123888
> 
> 赞同：2
> 
> 时间：2012-08-25T16:52:52.653
> 
> 标签：php, xpath

我希望我的页面显示“下一个”和“上一个”段落的按钮，条件是有一个“下一个”或“上一个”段落。

这是我到目前为止所拥有的。我从我知道的段落 id 开始，然后查找前面和后面的段落，然后将它们加载到单独的变量中。

然后我检查以确保前面或下一段存在。然后我告诉计算机显示链接，前提是该段落存在。

目前一切正常，除了 $nextPid 的测试。$prevPid 的测试工作正常。当我在第一段时，没有显示“上一段”的链接，但是当我在文件的最后一段时，仍然显示“新段”的链接。

有什么想法我可能做错了吗？

```
$xmldoc = simplexml_load_file('/tmp/lecture.xml');
$prevPid = $xmldoc->xpath("//p[@id='$refPid']/preceding::p[1]/@id"); 
$nextPid = $xmldoc->xpath("//p[@id='$refPid']/following::p[1]/@id");

if (sizeof($nextPid) > 0)
 {
  echo "<a id=\"adjParNxt_$nextPid[0]\" class='adjPara' data-refPid=\"$refPid\" data-    adjPid=\"$nextPid[0]\" data-refFs=\"$refFs\">Next Paragraph</a> ";
 } 
if (sizeof($prevPid) > 0)
 {
  echo "<a class='adjPara' data-refPid=\"$refPid\" data-adjPid=\"$prevPid[0]\" data-    refFs=\"$refFs\">Previous Paragraph</a>";
 } 
```

我正在使用的数据可以在这里找到[http://jeffreycwitt.com/xml_data.xml](http://jeffreycwitt.com/xml_data.xml)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T18:08:41.837

您的代码正在尝试做正确的事情，但遇到了一个小问题。在 PHP 的旧版本* 中，在某些极端情况下`SimpleXMLElement::xpath()`会错误地返回。`FALSE`在最近的固定版本中，它返回一个空数组。

您运行代码的 PHP 版本必须是正在返回的版本`FALSE`。问题在于`sizeof(FALSE)`，`1`这意味着您的条件始终为真。

### 该怎么办？

好吧，我的第一条建议是**将 PHP 升级**到更新的版本！

如果您确实必须保留旧版本的 PHP，那么您可以将`if`语句更改为如下所示，如果/当您升级时，它将继续工作。

```
if (!empty(…)) 
```

* * *

### 笔记

*   PHP 5.2.0-13 和 5.3.0-2 和 5.3.7-8 版本中存在错误行为。
*   对于`sizeof(FALSE)`返回`1`的原因，请阅读[`count() manual page`](http://php.net/count)。

# c# - WebClient 网站的登录名和密码

> ID：12123891
> 
> 赞同：0
> 
> 时间：2012-08-25T16:53:13.073
> 
> 标签：c#, webclient

我正在尝试登录[https://secure.domaintools.com/log-in/?logout](https://secure.domaintools.com/log-in/?logout) (http://whois.domaintools.com)

```
using (var myWebClient = new WebClient())
{
    string loginData = "username=test@test.com&passowrd=pwd";

    string response = myWebClient.UploadString("https://secure.domaintools.com/log-in/?logout", "POST", loginData);

    myWebClient.Headers["User-Agent"] = "MOZILLA/5.0 (WINDOWS NT 6.1; WOW64) APPLEWEBKIT/537.1 (KHTML, LIKE GECKO) CHROME/21.0.1180.75 SAFARI/537.1";
    myWebClient.DownloadString("http://whois.domaintools.com");
    doc.LoadHtml(page);
} 
```

但是有这个错误

> 错误 417 预期失败

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T19:54:01.990

将此属性添加到您的代码中

```
ServicePointManager.Expect100Continue = false; 
```

# java - 在哪里可以找到有关如何设置 netty 的详细说明？

> ID：12123894
> 
> 赞同：0
> 
> 时间：2012-08-25T16:53:24.660
> 
> 标签：java, maven, installation, netty, nio

我一直在寻找一个好的 nio 框架来创建服务器/客户端系统，而 netty 似乎非常适合我的需求。但是，我在设置时遇到了很多麻烦。我必须使用maven吗？因为我以前从未有过，而且我在设置它时也遇到了麻烦……似乎找不到合适的指南。我对这些东西很陌生。我习惯于在eclipse中单独编写java应用程序，或者只是使用外部jar......但从不通过maven。我在哪里可以找到关于如何设置即使像我这样的新手也能理解的 netty 的详细说明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T17:06:49.070

Netty 没有任何外部依赖。您只需要一个可以[在此处下载](https://github.com/downloads/netty/netty/netty-3.5.5.Final-dist.tar.bz2)的 jar 。下载后，您可以在 Eclipse 中将其定义为项目的外部依赖项。出于简单的目的，Maven 太过分了。

# php - 在数据库中插入一个 Unicode 字符

> ID：12123895
> 
> 赞同：0
> 
> 时间：2012-08-25T16:53:28.180
> 
> 标签：php, mysql, database, unicode, insert

我正在尝试在数据库中插入一个 Unicode 字符，例如：（），但是当我在 textarea 中插入那个（）时，它会添加一个空字段？！

那么如何在数据库中添加像 ☺ 这样的字符呢？

我的数据库是：

```
CREATE TABLE `t1` (
  `id` int(4) NOT NULL auto_increment,
  `msg` varchar(500) NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=7 ; 
```

`insert.php`添加数据：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>my page</title>
</head>

<body>
<form id="form1" name="form1" method="post" action="insert-ok.php">
  <p>
    <label for="textarea"></label>
    <textarea name="textarea" id="textarea" cols="45" rows="5"></textarea>
  </p>
  <p>
    <input type="submit" name="button" id="button" value="Submit" />
  </p>
</form>
</body> 
```

insert-ok.php 插入和查看数据：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>my data</title>
</head>

<body>
<?php 
$con = mysql_connect("localhost","root","4530");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
  mysql_query("set names 'utf8'"); 
mysql_select_db("test", $con); 
$post= $_POST['textarea'];
$sql = "insert into t1 values('$id','$post')";
mysql_query($sql,$con);

$result=mysql_query("select * from t1 ");

while($row = mysql_fetch_array($result))
{

    echo $row['msg'].'<br>';
}
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T17:11:58.297

> U+1F604 张开嘴笑眼笑脸

请注意，它超出了 U+FFFF，这意味着需要**4**个字节来存储。

确保您使用的是 MySQL 5.5 或更高版本，并且：

> ```
> CREATE TABLE `t1` (
>    ...
> ) ENGINE=MyISAM  DEFAULT CHARSET=utf8_mb4 AUTO_INCREMENT=7 ; 
> ```

# ruby - Ruby GtkTreeView 重新排序

> ID：12123897
> 
> 赞同：0
> 
> 时间：2012-08-25T16:53:30.627
> 
> 标签：ruby, sorting, gtk, drag-and-drop, gtktreeview

我必须使用 Gtk DnD 排序的树视图。DnD 没有问题，但我不明白如何对节点进行排序。我正在尝试使用`Gtk::TreeStore.reorder(parent, new_order)`，但我不明白出了什么问题。

从我的代码中提取：

```
@store = Gtk::TreeStore.new(String, String, String, String)
@tree  =Gtk::TreeView.new(@store)
@tree.set_headers_visible(false)

column   = Gtk::TreeViewColumn.new
renderer = Gtk::CellRendererPixbuf.new
column.pack_start(renderer, false)
column.add_attribute(renderer, 'stock_id', 2)

renderer = Gtk::CellRendererText.new
column.pack_start(renderer, true)
column.add_attribute(renderer, "text", 1)

@tree.append_column(column)

@tree.enable_tree_lines=true

@tree.selection.mode = Gtk::SELECTION_SINGLE

def fct_Treeview_orderIter(treeviewIter, store)

    arrResult=Array.new
    arrTmp=Array.new

    hNodes=Hash.new
    hResult=Hash.new

    nbiter=treeviewIter.n_children

    p "nb children=#{nbiter}"
    (0..nbiter-1).each do |index|
        child_iter=treeviewIter.nth_child(index)
        hNodes[index]=child_iter[1]
        #fct_Treeview_orderIter(child_iter, store)
    end

    arrTmp=hNodes.to_a.sort do |a, b|
        a[1] <=> b[1]
    end

    arrResult=arrTmp.collect { |entry| [entry[0].to_i] }.flatten

    store.reorder(treeviewIter, arrResult)
end 
```

[对于列表存储，我有与此示例](http://www.ruby-forum.com/attachment/3177/es.rb)相同的错误消息...

有人能帮助我吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T22:54:32.963

ruby-gnome2 ( [http://sourceforge.net/p/ruby-gnome2/bugs/179/](http://sourceforge.net/p/ruby-gnome2/bugs/179/) ) 中有一个错误。

*   apt-get 安装 ruby​​-gnome2-dev ；
*   从主源分支下载 ruby​​-gnome2 ；
*   编译安装。

玩得开心 ！

# java - 如何将视频从安卓手机传输到手机

> ID：12123899
> 
> 赞同：0
> 
> 时间：2012-08-25T16:53:34.840
> 
> 标签：java, android, video, networking, transmission

我是一名从事四轴飞行器项目的高中生。由于手机的速度和其他功能，我使用的是安卓手机而不是传统的微控制器。使用安卓手机的重点是视频传输。我有广泛的编程语言知识，但对网络了解不多。如何通过网络将视频数据从一部手机的摄像头传输到另一部手机？

如果您可以指导我具体需要查找哪些类或函数，那也会有很大帮助。由于我对网络术语和方式不是那么精通，因此如果您认为我对通过网络传输数据的知识很少，但我已经使用 java 多年了，这将是有帮助的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T17:04:03.870

这里有一些工作示例：

[http://code.google.com/p/spydroid-ipcamera/](http://code.google.com/p/spydroid-ipcamera/)

然后，创建一个 RSTP 客户端：

[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)

> 音频和视频播放支持以下网络协议：
> 
> RTSP（RTP、SDP）

# java - 使用参数列表中给出的参数调用函数

> ID：12123904
> 
> 赞同：1
> 
> 时间：2012-08-25T16:54:52.620
> 
> 标签：java

我想在参数中接收一个函数并用一个参数调用它：

```
public static <T> T foo(Callable<T> func)
{
     return func.call("bar");
} 
```

但它调用不带任何参数。关于我该怎么做的任何想法？

无论我搜索多少，我都找不到任何对我有帮助的东西......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T16:59:07.107

A`Callable<T>`只有一种方法：`T call()`.

如果你想要不同的东西，你将需要使用不同的参数类型，例如：

```
public interface CallableWithString<T> {
    T call(String arg); //Assuming you want a string argument
} 
```

然后你的函数可以做：

```
public static <T> T foo(CallableWithString<T> func) {
    return func.call("bar");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T17:01:26.803

中定义的`call`方法`Callable`没有定义任何参数，因此您无法向其传递任何内容。

根据您想要做什么，您可以为此编写自己的界面：

```
public interface CallableWithParameters<T> {
  public T call(Object... arguments);
} 
```

然后你用不同的方式调用它：

```
call();
call(someObject);
call("someString", 42); 
```

# ios - 不花钱就没有办法为iOS开发吗？

> ID：12123915
> 
> 赞同：10
> 
> 时间：2012-08-25T16:56:23.913
> 
> 标签：ios, iphone, app-store

我主要是为了好玩而编写代码，也许以后想成为自由职业者。我目前为 Android 编程，并免费发布了一些应用程序。重点只是构建应用程序，而不是从中赚钱，所以我也没有广告。

我以为我会扩展我的技能到 iOS，但发现我必须购买 Mac 并且还要支付*年费*才能在 iOS 应用商店上发布我的应用程序。

也许我不明白这里的某些东西，或者我错过了一些重要的信息。我有*没有办法*在不购买昂贵的 macbook 的情况下免费在商店中编写和分发我的应用程序？我刚买了一台新的 Sony VAIO，我买不起另一台电脑（我也不需要）。

我是否得到了所有的事实，或者我错过了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-25T16:58:33.433

你或多或少是对的。

*   您需要向 Apple 支付年费才能分发应用程序。
*   你需要一台 Mac 来运行 Xcode 并为 iOS 开发。

然而，Mac Mini，即使是一些较旧的型号，也可以正常运行 Xcode，所以在那里可能会省钱。

此外，一旦你有了 Mac，你就可以构建应用程序并在模拟器上运行它们，而无需支付 Apple 开发者许可证——但你确实需要支付 99 美元才能发布它们，甚至在你自己的 iPhone 上运行它们。

我不同意 Apple 对所有这些限制的看法，但这是他们的决定，没有什么可做的。

我还应该提到，您*可以*购买 Mac OSX 并在非 Mac 硬件上虚拟运行它，但这样做违反了 Apple 的许可条款，因此是非法的。尽管您这样做可能会很有趣，但由于法律问题，我不建议您这样做。

您的最后一个选择是[在云中租用一台 Mac](http://www.macincloud.com/)并连接到它（通过 VNC、远程桌面）来试用它——但要在设备上进行真正的开发，您仍然需要实际的 Mac 硬件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-25T17:07:33.307

似乎至少有几个在线服务可以让你在云中的 Mac 上租用时间（通过 RDP 或 VNC 从你的 PC 远程使用）。确保您租用时间的 Mac 已安装并可用最新版本的 Xcode 和 iOS SDK，您可以将其用于除直接设备调试之外的所有 iOS 开发。

访问 Apple 的 App Store 需要付费才能注册他们的开发者计划。

完全免费的选择是开发 iOS 网络应用程序。这些可以使用自定义图标进行剪辑，使用合适的清单和 MIME 类型离线运行，并且可以从您自己的网站或服务器下载，无需 App Store 批准。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-25T17:16:00.863

要为 iOS 开发应用程序，您需要：

*   Xcode，这意味着你需要 MacOS。通常，您需要一台 Mac 计算机（iMac/MacBook/等），但您也可以在 VM 上安装 MacOS。我不确定是否可以设置一个环境来替代 Xcode。
*   运行并测试应用程序。iOS 模拟器是可以的，但是模拟器和真机之间可能会有细微的差别。如果你想在真机上测试，你需要加入开发者计划，或者你也可以越狱真机，通过一个笨重的过程（包括打包应用程序，并通过命令行将应用程序复制到设备）运行应用程序。
*   在某个地方分发您的应用程序（作为产品）。如果您想在 Apple AppStore 上分发应用程序，您需要开发者计划（再次）。如果您想为越狱设备分发应用程序，您可以自由地这样做，没有任何限制。

# perl - 通过 LWP 登录 Way2sms 失败

> ID：12123921
> 
> 赞同：0
> 
> 时间：2012-08-25T16:57:07.997
> 
> 标签：perl, login, lwp, lwp-useragent

我正在尝试通过 LWP登录[Way2sms 。](http://site2.way2sms.com/content/index.html)该页面的源代码说登录表单（在这种情况下，它似乎是正文中所有内容的根节点）有一个 action 属性`''`，我在其他一些 Stackoverflow 帖子中读到，指向的 URL包含该表单的页面。移动和密码字段的`name`属性可从源代码中获得，所以我尝试了这个：

```
use URI;
use HTML::TreeBuilder;
use LWP;
open f, "> way2sms.txt";
$browser = LWP::UserAgent->new(agent=>'Mozilla/4.76 [en] (Windows NT 5.0; U)');
$resp = $browser->post("http://site2.way2sms.com/content/index.html",[username=>$username,password=>$password]);
if ( $resp->is_redirect ) {
    $resp = $browser->get( $resp->header('Location') );
}

print f $resp->content;
close f; 
```

使用正确的电话号码和密码，提交应该返回一个个性化页面，其中包含一条消息，例如**Welcome, Kaustav Mukherjee**。所以很自然，我希望代码打印出 5。但是，虽然打印出**Logged**表示成功，但没有打印出 5，表明登录失败。怎么做？（请不要建议使用`Mechanize`！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:42:47.237

# objective-c - 基于视图的“源列表”NSOutlineView 不显示项目的图标和标题

> ID：12123925
> 
> 赞同：5
> 
> 时间：2012-08-25T16:57:16.377
> 
> 标签：objective-c, cocoa, nsoutlineview

将 NSOutlineView cell-based 更改为 view-based 后，它不会显示文件系统树的图标和标题。这是我的代码：

```
- (void)outlineView:(NSOutlineView *)outlineView willDisplayCell:(id)cell forTableColumn:(NSTableColumn *)tableColumn item:(id)item {
    if ([[tableColumn identifier] isEqualToString:@"name"])
        return [(ImageAndTextCell *)cell setTextFieldImage:[item icon]];
}

- (id)outlineView:(NSOutlineView *)outlineView objectValueForTableColumn:(NSTableColumn *)tableColumn byItem:(id)item {
    return [((ConstructorFSEntity *)item) title];
}

- (NSView *)outlineView:(NSOutlineView *)outlineView viewForTableColumn:(NSTableColumn *)tableColumn item:(id)item {
    if ([item isKindOfClass:[FSEntity class]]) {
        return [outlineView makeViewWithIdentifier:@"HeaderCell" owner:self];
    } else {
        return [outlineView makeViewWithIdentifier:@"DataCell" owner:self];
    }
} 
```

我还有一个问题。如何将枚举项（文件系统项的数组）放入单元格“DataCell”，并将“HeaderCell”声明为父文件夹（组）并为其分配标题（例如，@“根文件夹”）和路径班上。因为，现在以前的基于视图的方法，仅在“HeaderCell”或“DataCell”中显示枚举项，当我尝试为“HeaderCell”分配某个值时，应用程序崩溃。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-26T21:25:14.360

要显示项目的标题和图标，您只需更改此方法

`- (NSView *)outlineView:(NSOutlineView *)outlineView viewForTableColumn:(NSTableColumn *)tableColumn item:(id)item`

如下：

```
- (NSView *)outlineView:(NSOutlineView *)outlineView viewForTableColumn:(NSTableColumn *)tableColumn item:(id)item {
    if (![item isKindOfClass:[FSEntity class]]) {
        return [outlineView makeViewWithIdentifier:@"HeaderCell" owner:self];
    } else {
        NSTableCellView *cellView = [outlineView makeViewWithIdentifier:@"DataCell" owner:self];
        [(ImageAndTextCell *)cellView.textField.cell setTextFieldImage:[item icon]];
        cellView.textField.stringValue = [((FSEntity *)item) title];
        return cellView;
    }
} 
```

# python-2.7 - 为什么 urllib2 不接受我的 URL？

> ID：12123926
> 
> 赞同：0
> 
> 时间：2012-08-25T16:57:17.543
> 
> 标签：python-2.7, urllib2

我已经将 URL 存储在应该传递给 urllib2 的列表中。但是，urllib 似乎不太喜欢这个，我就是不明白为什么！

这是我得到的：

```
url = list[1]
response = urllib2.urlopen(url)
html = response.read() 
```

该 URL 是一种 google maps Directions Web API URL：

```
http://maps.googleapis.com/maps/api/directions/json?origin=[origin]&destination=[destination]&waypoints=optimize:true|[waypoint1]|[waypoint2]&sensor=false 
```

现在，如果我尝试运行它，检索到的 html 总是看起来像这样：

```
{
"routes" : [],
"status" : "INVALID_REQUEST"
} 
```

表明传递的 URL 有问题。但是，如果我获取 URL 并直接分配它，如下所示：

```
url = "http://maps.googleapis.com/maps/api/directions/json?origin=[origin]&destination=[destination]&waypoints=optimize:true|[waypoint1]|[waypoint2]&sensor=false"
response = urllib2.urlopen(url)
html = response.read() 
```

结果将很高兴地通过（对我而言）基本结束部分如下所示：

```
 "warnings" : [],
         "waypoint_order" : [ 2, 0, 7, 5, 6, 4, 3, 1 ]
      }
   ],
   "status" : "OK"
} 
```

因此，我（希望不是太愚蠢）的问题是：为什么 urllib 在直接分配 URL 时会完成其工作，但如果它来自列表则不会？

非常感谢您的帮助，J

PS：论坛软件总是切断我的“大家好”的问候是有原因的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:11:41.003

我终于解决了这个问题！

一旦我退后一步并再次考虑它，这很容易：我确实从谷歌的 Web API 得到了答案，这意味着 urllib2 确实通过*了一些东西*。但是，它一定是向 API 后端发送了一些没有任何意义的东西。包含德语地址的 URL 我幸运地猜到了由变音符号引起的问题。

所以我只是通过一个函数将我的 URL 传递给一个函数，用它的非变音符号替代每个变音符号，突然间一切似乎都正常了。

如果有人遇到类似的问题，我是这样解决的：

```
# Function for replacing all umlauts
def replaceUmlauts(text):
    dic = {'Ä':'Ae', 'ä':'ae', 'Ö':'Oe', 'ö':'oe', 'Ü':'Ue', 'ü':'ue', 'ß':'ss'}
    for i, j in dic.iteritems():
        text = text.replace(i, j)
    return text 
```

然后只需使用

```
response = urllib2.urlopen(replaceUmlauts(url)) 
```

# ruby-on-rails - Rails 3.2 CSS 未预编译

> ID：12123928
> 
> 赞同：0
> 
> 时间：2012-08-25T16:57:41.173
> 
> 标签：ruby-on-rails, asset-pipeline

我有一个 Rails 应用程序，它在浏览器中抛出错误`We're sorry, but something went wrong.`。我继续检查日志，这就是我得到的：

```
Compiled visitor.js  (0ms)  (pid 15667)
Compiled application.js  (3574ms)  (pid 15667)
Compiled visitor.css  (73ms)  (pid 15667)
Compiled aboutvideos.css  (1ms)  (pid 15667)
Compiled admin.css  (1ms)  (pid 15667)
Compiled bootstrap_and_overrides.css  (802ms)  (pid 15667)
Compiled jquery.fancybox.css  (0ms)  (pid 15667)
Compiled scaffolds.css  (8ms)  (pid 15667)
Compiled stores.css  (1ms)  (pid 15667)
Compiled application.css  (1001ms)  (pid 15667)

Started GET "/" for 190.166.197.58 at 2012-08-25 16:51:44 +0000
Processing by VisitorController#home as HTML
  Rendered visitor/home.html.erb within layouts/application (3.9ms)
Completed 500 Internal Server Error in 131ms

ActionView::Template::Error (visitor.css isn't precompiled):
    3: <head>
    4:   <title><%=h yield(:title) %></title>
    5:   <% if controller_name == "visitor" %>
    6:   <%= stylesheet_link_tag    "visitor", :media => "all" %>
    7:   <%= stylesheet_link_tag    "jquery.fancybox", :media => "all" %>
    8:   <%= javascript_include_tag "visitor" %>
    9:   <%= javascript_include_tag "jquery" %>
  app/views/layouts/application.html.erb:6:in `_app_views_layouts_application_html_erb___794713378064579018_17000980' 
```

正如您所看到的，visitor.css 正在被编译，然后我得到了 visitor.css 没有预编译的错误。我在 application.css 中包含了 *=required 访问者。有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T17:36:23.147

如果您`*= require formtastic`在 application.css 中需要 visitor.css ( )，那么您不需要自己包含它 ( `<%= stylesheet_link_tag "visitor", :media => "all" %>`)。

如果你不这样做，那么你必须将它添加到你的`production.rb`：

```
config.assets.precompile += %w( visitor.css ) 
```

# android - 错误！！未解析的 aapt 错误！检查数独的控制台

> ID：12123929
> 
> 赞同：0
> 
> 时间：2012-08-25T16:57:42.787
> 
> 标签：android, eclipse, aapt

我读了 Hello Android 书，但书中的一个练习有问题。我将代码从书中复制并粘贴到`activity_main.xml`（`res/layout`）和`strings.xml`（`res/values`），但我看到的错误是`Unparsed aapt error(s)!Check the console for Sudoku.`

我用谷歌搜索但我没有回答我阅读了stackoverflow的链接，但我的问题没有解决。

活动主.xml：

```
<?xml version="1.0" encoding="utf-8"?>  
<LinearLayout  
xmlns:android="http://schemas.android.com/apk/res/android"  
android:orientation="vertical"  
android:layout_width="fill_parent"  
android:layout_height="fill_parent">  
<TextView  
android:layout_width="fill_parent"  
android:layout_height="wrap_content"  
android:text="@string/main_title" />  
<Button  
android:layout_width="fill_parent"  
android:layout_height="wrap_content"  
android:text="@string/continue_label" />  
<Button  
android:layout_width="fill_parent"  
android:layout_height="wrap_content"  
android:text="@string/new_game_label" />  
<Button  
android:layout_width="fill_parent"  
android:layout_height="wrap_content"  
android:text="@string/about_label" />  
<Button  
android:layout_width="fill_parent"  
android:layout_height="wrap_content"  
android:text="@string/exit_label" /> 
</LinearLayout> 
```

字符串.xml

```
<?xml version="1.0" encoding="utf-8"?>  
<resources>  
<string name="app_name">Sudoku</string>  
<string name="main_title">Android Sudoku</string>  
<string name="continue_label">Continue</string>  
<string name="new_game_label">New Game</string>  
<string name="about_label">About</string>  
<string name="exit_label">Exit</string>  
</resources> 
```

我阅读了控制台选项卡，获得了有关该程序的更多信息：

```
Bad XML block: header size 91 or total size 0 is larger than data size 0
error: Error: No resource found that matches the given name (at 'title' with value '@string/menu_settings'). 
```

我无法解决这个问题。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:02:10.913

将此添加到您的 strings.xml：

```
<string name="menu_settings">Your text</string> 
```

您似乎正在访问一个未定义的字符串。

# mfc - 如何使用 CWinThread 在 MFC 中创建工作线程？

> ID：12123930
> 
> 赞同：2
> 
> 时间：2012-08-25T16:57:55.183
> 
> 标签：mfc

我想知道在 MFC 中使用 CWinThread 派生类作为工作线程的过程是什么。msdn 文档说 CWinthread::InitInstance() 或 CWinthread::Run() 应该只用于 UI 线程。

那么除了 AfxbeginThread() 之外有没有办法创建工作线程呢？我需要在我的代码中有一个工作线程类，它将存储一些私有的更多信息，因此希望它从 CWinThread 派生。

请建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T18:24:08.543

是的，您可以在不使用 AfxBeginThread 的情况下创建工作线程。

您可以覆盖虚拟 int Run(); 函数将您的代码放在那里并在函数末尾调用 ExitInstance() 以结束线程。要启动你的线程，你可以调用 AfxBeginThread，或者简单地调用你的线程对象上的 CreateThead 函数

```
//First option
CMyThread* pMyThread = (CMyThread*)AfxBeginThread(RUNTIME_CLASS(CMyThread));

//Second option
CMyThread myThread;
myThread.CreateThread(); 
```

也许这不是 MFC 的官方方式，但它确实有效！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:15:18.413

文档表明创建“真正的”MFC 工作线程的唯一方法是通过`AfxBeginThread()`. 但是，您可以通过创建派生的 CWinThread 对象、调用它、完成所有工作`InitInstance()`、然后终止线程来近似工作线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-31T19:08:50.223

您不需要从 CWinThread 派生来存储一些对工作线程私有的更多信息。AfxBeginThread 的 AFX_THREADPROC 函数指针版本采用可用于传递任何内容的 LPVOID 参数。一个简单的字符串，一个充满私有信息的结构，甚至[是一个指向调用 AfxBeginThread 的类的指针](http://www.flounder.com/workerthreads.htm)（注意同步，不要从工作线程接触 GUI。）

```
// static
UINT TaskingDialog::Worker(LPVOID p)
{
    TaskingDialog* self = (TaskingDialog*)p;
    //grab data from self, do work, etc, quick thread
    return 0;
}

void TaskingDialog::OnStartThread()
{
    // start a simple worker thread that finishes quickly
    AfxBeginThread(Worker, this);
} 
```

# php - PHP 检查 MySQL 最后一行

> ID：12123933
> 
> 赞同：19
> 
> 时间：2012-08-25T16:58:51.160
> 
> 标签：php, mysql

我有一个关于 PHP 的简单问题来检查这是否是 MySQL 的最后一行。例如我有这个代码：

```
$result = mysql_query("SELECT *SOMETHING* ");

while($row = mysql_fetch_array($result))
{
if (*this is the last row*)
{/* Do Something Here*/}
else
{/* Do Another Thing Here*/}
} 
```

我很难检查该行是否是最后一行。知道怎么做吗？谢谢。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-25T17:01:21.483

您可以在循环[`mysqli_num_rows()`](https://www.php.net/manual/mysqli-result.num-rows.php)之前`while`使用，然后将该值用于您的条件：

```
$numResults = mysqli_num_rows($result);
$counter = 0
while ($row = mysqli_fetch_array($result)) {
    if (++$counter == $numResults) {
        // last row
    } else {
        // not last row
    }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-25T17:01:39.577

```
$result = mysql_query("SELECT *SOMETHING* ");

$i = 1;
$allRows = mysql_num_rows($result);
while($row = mysql_fetch_array($result)){

    if ($allRows == $i) {
        /* Do Something Here*/
    } else {
        /* Do Another Thing Here*/}
    }
    $i++;
} 
```

但请考虑 PDO

```
$db = new PDO('mysql:host=localhost;dbname=testdb', 'username', 'password');
$stmt = $db->query("SELECT * FROM table");
$allRows = $stmt->rowCount();
$i = 1;
while($row = $stmt->fetch(PDO::FETCH_ASSOC)) {

    if ($allRows == $i) {
        /* Do Something Here*/
    } else {
        /* Do Another Thing Here*/}
    }
    $i++;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-22T15:09:40.013

```
$allRows = $stmt->rowCount(); 
```

对我不起作用，不得不使用：

```
$numResults = $result->num_rows; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-25T17:02:51.810

尝试这个：

```
$result = mysql_query("SELECT colum_name, COUNT(*) AS `count` FROM table");

$i = 0;

while($row = mysql_fetch_assoc($result))
{
    $i++;

    if($i == $row['count'])
    {
        echo 'last row';
    }
    else
    {
        echo 'not last row';
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-25T17:02:23.173

尝试在while循环中有一个计数器，然后检查它`mysql_num_rows()`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-25T06:54:20.113

```
$result = //array from the result of sql query.
$key = 1000; 
$row_count = count($result); 
if($key)
{
    if($key == $row_count-1)  //array start from 0, so we need to subtract.
    {
       echo "Last row";             
    }
    else
    {
       echo "Still rows are there";             
    }
} 
```

# git - Git 到 Web 服务器：如何设置远程 git 服务器在推送后自动合并分支？

> ID：12123934
> 
> 赞同：3
> 
> 时间：2012-08-25T16:59:00.283
> 
> 标签：git

首先，我是 Git 和 Git 钩子的新手。这就是我想要做的......我想创建一个本地 git 存储库，我将在我的网站上工作。然后，我想在我的网络服务器中设置一个 git 存储库，并使用 git 将更改直接从我的机器推送到服务器。为此，最好的路径是什么？

*   我按照一些在线指南做了这个......
*   在远程服务器上启动了一个存储库。
*   在我的本地机器上启动了一个存储库
*   做了一个承诺
*   切换到不同的分支（无法将主分支推送到服务器（如果可以，它很容易））
*   将该分支推送到服务器
*   登录到服务器并将分支从其中合并到主服务器中

我的问题是，这是完成这项工作的最佳方式吗？如果是，我可以使用钩子自动进行合并部分吗？（怎么做？我是新来的钩子）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T17:14:09.020

阅读您的问题和评论 - 问题在于您在服务器上初始化存储库的方式。

在您的服务器上，您需要使用以下命令初始化一个**裸**存储库：

```
git init --bare 
```

这将解决您在推送到服务器时遇到的错误。

# colors - javafx 2.2饼图颜色未重置

> ID：12123936
> 
> 赞同：4
> 
> 时间：2012-08-25T16:59:21.907
> 
> 标签：colors, javafx-2, pie-chart

在现有的 PieChart 上设置新数据时，我注意到颜色不一样。（他们在 css 颜色列表中循环，好像某些内部计数器没有被重置）

如何在颜色 0 处重新开始颜色，而不每次都重新创建图表？

例子：

```
import javafx.application.Application;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.chart.PieChart;
import javafx.stage.Stage;

public class ChartAdvancedPie extends Application {

PieChart pc = new PieChart();

private void init(Stage primaryStage) {
    Group root = new Group();
    primaryStage.setScene(new Scene(root));
    root.getChildren().add(pc);        
    pc.setAnimated(false);
    SetupData( );
    SetupData( ); //comment this out to see first colours only
}

protected void SetupData() {        
   ObservableList<PieChart.Data> data =  FXCollections.observableArrayList();        
   data.add(new PieChart.Data("Slice", 1));
   data.add(new PieChart.Data("Slice", 2));
   data.add(new PieChart.Data("Slice", 3));
   pc.getData().clear();
   pc.setData( data );              
}

@Override public void start(Stage primaryStage) throws Exception {
    init(primaryStage);
    primaryStage.show();
}

    public static void main(String[] args) {
        launch(args);
    }
} 
```

保留颜色顺序的一个技巧是在清除之前添加 8 - size mod 8 更多项目，但我确信有更简单的方法（或者我添加的数据错误）

```
int rem = 8-(pieChartData.size() % 8 );
for ( int i=0; i< rem; i++ ) {                        
   controller.FeatureChart.getData().add(new PieChart.Data("dummy", 1)); 
}                    
controller.FeatureChart.getData().clear();
//... add items again 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T23:07:05.840

目前无法重置颜色。用于颜色索引的字段在 PieChart 中被声明为私有，并且没有官方修改它的方法。

但是，如果环境允许，可以通过反射来修复它。修改`SetupData`方法如下：

```
protected void SetupData() {        
    ObservableList<PieChart.Data> data =  FXCollections.observableArrayList();        
    data.add(new PieChart.Data("Slice", 1));
    data.add(new PieChart.Data("Slice", 2));
    data.add(new PieChart.Data("Slice", 3));
    //   pc.getData().clear();
    try {
        Class<PieChart> cls = PieChart.class;
        Field f = cls.getDeclaredField("defaultColorIndex");
        f.setAccessible(true);
        f.setInt(pc, 0);
    } catch (NoSuchFieldException | SecurityException | IllegalArgumentException | IllegalAccessException e) {
        e.printStackTrace();
    }
    pc.setData( data );
} 
```

不要使用它。

如果你必须：

`f.setAccessible(true)`允许设置私有字段。这可能会失败，并且在配置合理的设置中它会失败。如果您的应用程序是一个小型桌面工具，它可能会起作用。此外，您可能希望在执行此操作之前检查 java 版本，并仅为您知道它适用的版本启用代码。（一些“临时”工具在未来 10..20 年内被用于生产。）

# jsf-2 - 在 JSF Managed Bean 中使用操作方法时如何显示确认（richfaces）弹出窗口？

> ID：12123939
> 
> 赞同：0
> 
> 时间：2012-08-25T16:59:50.533
> 
> 标签：jsf-2, richfaces

也许我们熟悉 Javascript 中的确认弹出窗口。但是，在此示例中，我想在richFaces 中基于 popupPanel 创建一个自定义确认弹出窗口，该弹出窗口有两个要求：

我可以描述确认框的要求如下：

1.  在我们的应用程序有效数据（由 ManagedBean 中的一种操作方法处理）之后，会出现自定义确认框，它要求用户确认将数据插入数据库。

    *   不像我们使用window.confirm的时候，点击页面中的按钮后会出现确认框。
2.  用户确认确认此窗口，将数据插入数据库要执行的操作方法

我现在想到的一种解决方案是使用两种操作方法来处理一个弹出窗口。当我解决我的问题时，我会在这个问题中通知你。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T02:14:15.200

是的，一种方法是使用两种操作方法：一种用于验证，另一种用于实际操作。这实际上是我自己为某些项目所做的方式。

一个很好的方法是创建一个包装此功能的复合组件，以便您可以在其他地方重用它。

在 中创建一个复合组件`WebContent/resources/my/confirmButton.xhtml`，代码如下：

**资源/my/confirmButton.xhtml**：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
  xmlns:a4j="http://richfaces.org/a4j" xmlns:rich="http://richfaces.org/rich"
  xmlns:cc="http://java.sun.com/jsf/composite">
<cc:interface>
    <cc:attribute name="message" default="Do you want to proceed?" />
    <cc:attribute name="messageHeader" default="Confirm" />
    <cc:attribute name="action" required="true"
           method-signature="java.lang.String action()" />
    <cc:attribute name="validateMethod" required="true"
           method-signature="java.lang.String action()" />
    <cc:attribute name="value" default="Submit" />
    <cc:attribute name="cancelBtn" default="No" />
    <cc:attribute name="confirmBtn" default="Yes" />
</cc:interface>
<cc:implementation>
    <rich:popupPanel id="popup" header="#{cc.attrs.messageHeader}">
        <p>#{cc.attrs.message}</p>
        <input type="button" value="#{cc.attrs.cancelBtn}"
            onclick="#{rich:component('popup')}.hide()" />
        <a4j:commandButton action="#{cc.attrs.action}"
            value="#{cc.attrs.confirmBtn}" execute="@form" render="@form"
            onclick="#{rich:component('popup')}.hide()" />
    </rich:popupPanel>
    <a4j:commandButton action="#{cc.attrs.validateMethod}"
        value="#{cc.attrs.value}" execute="@form" render="@form"
        oncomplete="if(#{empty facesContext.maximumSeverity}){
            #{rich:component('popup')}.show()
        }" />
</cc:implementation>
</html> 
```

您可能想要更改它，根据需要添加属性和样式。

完成后，您可以为您的 JSF 视图声明组件的命名空间，并像这样使用和重用：

```
<!DOCTYPE html>
<html ... xmlns:my="http://java.sun.com/jsf/composite/my">
    ...
    <h:form>
        <rich:messages />
        <h:panelGrid>
            Please, type something:
            <h:inputText value="#{someBean.someValue}" required="true" />

            <!-- simple example with the default labels: -->
            <my:confirmButton action="#{someBean.action}"
                validateMethod="#{someBean.preAction}" />

            <!-- second example calling other method and using custom labels: -->
            <my:confirmButton action="#{someBean.action2}"
                validateMethod="#{someBean.preAction}" value="action 2"
                message="Do you REALLY want to proceed?" />
        </h:panelGrid>
    </h:form>
    ...
</html> 
```

**也可以看看：**

[复合组件标签信息](https://stackoverflow.com/tags/composite-component/info)

# javascript - 在 JavaScript 中，将对象上的每个数字和字符串装箱的性能成本是多少？

> ID：12123941
> 
> 赞同：3
> 
> 时间：2012-08-25T17:00:09.150
> 
> 标签：javascript, performance, hash, lisp

我正在为学习目的在 JavaScript 上编写类似 Lisp 的语言。每个对象都是树的一部分，因此它必须跟踪其父对象。唯一的问题是数字和字符串：

```
foo = {};
var a = 1;
a.parent = foo; 
```

这行不通。我必须这样做：

```
foo = {};
var a = {type:'number',value:1,parent:foo} 
```

因此，我必须将我的语言中的每个数字和字符串都装在这样的散列中。我假装对所说的语言做了一些广泛的矩阵数学，所以我很担心。这种方法会影响性能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T17:21:23.400

正如里德建议的那样：

```
function number(n){
    return {type:'number',parent:undefined,value:n};
}
function sum(a,b){
    return {type:'number',parent:undefined,value:a.value+b.value};
}
var i = number(0);
for (var t=Date.now(); Date.now()-t < 1000;){
    var i=sum(i,number(1));}
console.log('Operations with boxing: ',i.value);
var i = 0;
for (var t=Date.now(); Date.now()-t < 1000;){
    var i=i+1;}
console.log('Operations without boxing: ',i); 
```

输出：

```
Operations with boxing: 1911258
Operations without boxing: 16805783 
```

这可能回答了这个问题。我想知道是否有替代方案不会对性能造成如此大的影响。

# .net - Silverlight Datagrid 刷新当前页面

> ID：12123945
> 
> 赞同：0
> 
> 时间：2012-08-25T17:00:51.757
> 
> 标签：.net, silverlight, silverlight-4.0, silverlight-3.0, ria

我有数据网格，它绑定到实体框架中的对象列表，并使用数据分页器进行分页。我的问题是 - 我如何只刷新它所在的当前“页面”？例如，如果我在第 17 页（共 100 页）并单击刷新，我希望查询出去并仅刷新第 17 页的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:21:54.237

在我看来，您应该将页码保存在变量中，并在 dataPager pageIndex 属性中刷新后使用它

# javascript - 如何让 iframe 填充整个页面 100% 和 top:4px？

> ID：12123947
> 
> 赞同：17
> 
> 时间：2012-08-25T17:01:11.910
> 
> 标签：javascript, html, css, iframe

我来这里已经有一段时间了，之前只问了一个问题。我设计了很多网站。但我唯一没有完全理解的是“iFrames”。他们有点弄乱我的头。

.:我想要达到的目标:.

***注意：我没有 iFrames 域的来源的所有权......这应该是无关紧要的，因为您只是拿一页，然后在另一页上显示它。他们的外部样式仍然显示他们的页面应该如何。我知道这一点，因为我已经做到了。***

1) 我需要知道如何让 iFrame 在我的网站上显示为整页。我知道这里有很多关于 iFrame 的主题，但是 1）它们已经过时了。2) 它们不适用于我/我的网站。我已经尝试了一切，但这一切似乎都是徒劳的。

。：例子：。

当用户访问[http://www.example.com/news.php](http://www.example.com/news.php)时，页面应该从另一个新闻站点加载内容。即cnn、wn、cbs……

我之前已经想通了，所以请不要告诉我所有关于没有内容所有权的问题，然后我就无法实现我的目标。

我不记得我是怎么写的了，但我知道没有任何 CSS 样式。这与以下内容非常相似：

```
 <body style="scrolling:no;>
    <iframe src='http://www.example.com' 
    style='position:absolute; top:4px; left:0px; width:100%; height:100%; 
    z-index:999' onload='sendParams();' frameborder='no' scrolling='auto'>
    </iframe>
    </body> 
```

我没有得到的是：无论我使用什么样式来自定义 iFrame，它似乎都被放在一个关于`size= 867x155`. 我什至尝试将 iFrame 本身放在 a`DIV`中，并`DIV`设置为： W- `100%`H- `100%`。

当我尝试 CSS 方法时，marginheight/width 被忽略了。此外，不同的车身风格`margin="0"`是徒劳的；再次。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-25T17:13:27.560

看看：http: [//jsfiddle.net/cgXcR/](http://jsfiddle.net/cgXcR/)

的HTML：

```
<iframe src="http://www.cnn.com" height="100%"></iframe>​ 
```

CSS：

```
body, html { width:100% ;
    height:100% ;
    overflow:hidden ;
}

iframe { width:100% ;
        height:100% ;
    border:none ;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-27T14:46:41.247

好的，我要感谢辛西娅的帮助。

但是，如果有人正在寻找一个实际可行的简单答案，请查看以下内容：

喜欢原始查询：**FULL iFrame**

***使用 CSS 解决***

```
<blah>
<head>
<style type="text/css">
    body {scrolling:no;
}
    iframe {position:absolute;
    z-index:1;
    top:0px;
    left:0px;
}
</style>
</head>
<body>
    <iframe src="http://www.wn.com" height="100%" width="100%" frameborder="0"></iframe>
</body> 
```

**注意*`positioning`*&*`z-index`***

***注意：这只能通过 MARK-UP 写入。您不必使用 CSS，但这样做更有意义，因为您不仅要尝试在 yoru 网站上正确显示所有内容；通过使用 CSS 自定义 iFrame，您可以为网页中的每个单独框架打开更多窗口。如果你像我一样，只使用一个 iFrame，那么你应该简单地使用 MARK-UP。但是，如果你有超过 1 个 [或 1 个框架中有很多个]，你应该使用 CSS 来专门处理`ID`每个框架。***

另外，如果有人想知道如何仅使用 MARK-UP，只需交换 CSS 中的内容，然后放在`<iframe></iframe>`但使用单引号内

***`The Antarctican`***

# actionscript-3 - 将皮肤上的值传递到数组中

> ID：12123953
> 
> 赞同：0
> 
> 时间：2012-08-25T17:02:09.297
> 
> 标签：actionscript-3, apache-flex, flex4, flash-builder

我有一个附在按钮上的皮肤。皮肤上有一个图像和一个标签。我的问题是如何传递标签的值并将其放入数组中（单击时）并删除值（再次单击时）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T17:44:25.227

Button 皮肤中的 Label`text`属性实际上是 Button`label`属性的精确镜像。当您设置 Button's时，会自动在其外观中`label`设置 Label's 。`text`反过来，获得财产。

因此，要更具体地回答您的问题：

```
<s:Button label="hello" click="addOrRemove(event.currentTarget as Button)" /> 
```

.

```
private var myArray:Array = [];

private function addOrRemove(button:Button):void {
    var label:String = button.label;
    var index:int = myArray.indexOf(label);

    if (index == -1) myArray.push(label);
    else myArray.splice(index, 1);
} 
```

# php - 似乎有些资源是旧的。检查域可用性。PHP

> ID：12123959
> 
> 赞同：-1
> 
> 时间：2012-08-25T17:02:23.843
> 
> 标签：php

这是我目前必须获取的域列表。

```
<?php
$myFile = "domains.txt";
$fh = fopen($myFile, 'r');
$theData = fread($fh, 500);
fclose($fh);
echo nl2br($theData);
?> 
```

这将获取文件并按如下顺序列出域：

> 域名.com
> 
> Domain2.com
> 
> Domain3.com

我想为列表中的每个域分配一个函数，以通过 whois 查询运行，如果可用，则发布 domain.com - 可用（稍后我将让它运行 API 查询进行注册），如果不可用，则发布域.com - 采取

知道从哪里开始吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T17:04:14.647

好吧，将每行一个域的文件读入一组域是单行的。

```
$domains = file('domains.txt');
foreach ($domains as $domain) {
  //run the whois query on $domain
} 
```

# java - 比较与等于一致是什么意思？如果我的班级不遵循这个原则，可能会发生什么？

> ID：12123960
> 
> 赞同：20
> 
> 时间：2012-08-25T17:02:25.287
> 
> 标签：java, comparison, equals, comparator, comparable

来自 TreeMap 的 JavaDoc：

> 请注意，如果该排序映射要正确实现 Map 接口，则排序映射维护的排序（无论是否提供显式比较器）必须与 equals 一致。（参见 Comparable 或 Comparator 以获得与 equals 一致的精确定义。）这是因为 Map 接口是根据 equals 操作定义的，但是 map 使用它的 compareTo（或 compare）方法执行所有键比较，所以两个键从排序图的角度来看，这种方法认为相等的元素是相等的。已排序映射的行为是明确定义的，即使它的排序与 equals 不一致；它只是不遵守 Map 接口的一般合同。

有人可以举一个具体的例子来说明如果 ordering 与 equals 不一致可能会出现的问题吗？以具有自然顺序的用户定义类为例，即它实现了 Comparable 。JDK中的所有内部类也都保持这个不变量吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2018-12-23T06:52:45.953

这是一个简单但现实的示例，说明如果比较方法与 equals 不一致会发生什么。在JDK中，`BigDecimal`实现`Comparable`但其比较方法与equals不一致。例如：

```
> BigDecimal z = new BigDecimal("0.0")
> BigDecimal zz = new BigDecimal("0.00")
> z.compareTo(zz)
0
> z.equals(zz)
false 
```

这是因为比较方法`BigDecimal`只考虑了数值，`equals`还考虑了精度。由于`0.0`和`0.00`具有不同的精度，即使它们具有相同的数值，它们也不相等。（有关解释，请参阅 [此答案](https://stackoverflow.com/a/66180493/1441122)。）

`TreeSet`下面是一个例子，说明 a违反 的一般合同意味着什么`Set`。（与`TreeMap`and的情况相同，`Map`但使用集合演示会更容易一些。）让我们将 的结果与`contains`将元素从集合中取出并调用 的结果进行比较`equals`：

```
> TreeSet<BigDecimal> ts = new TreeSet<>()
> ts.add(z)
> ts.contains(z)
true
> z.equals(ts.iterator().next())
true
> ts.contains(zz)
true
> zz.equals(ts.iterator().next())
false 
```

这里令人惊讶的是，它`TreeSet`表示它包含 object `zz`，但它不等于集合中实际包含的元素。原因是`TreeSet`使用它的比较方法 ( `BigDecimal.compareTo`) 来确定集合成员资格，而不是`equals`.

现在让我们比较`TreeSet`一下`HashSet`：

```
> HashSet<BigDecimal> hs = new HashSet<>(ts)
> hs.equals(ts)
true
> ts.contains(zz)
true
> hs.contains(zz)
false 
```

这很奇怪。我们有两个相等的集合，但是一个集合说它包含一个对象，而另一个集合说它不包含相同的对象。同样，这反映了`TreeSet`使用比较方法而`HashSet`使用`equals`.

现在让我们将另一个对象添加到 a 中`HashSet`，看看会发生什么：

```
> HashSet<BigDecimal> hs2 = new HashSet<>()
> hs2.add(zz)
> ts.equals(hs2)
true
> hs2.equals(ts)
false 
```

现在这很奇怪。一组说它等于另一组，但另一组说它不等于第一组！要理解这一点，您需要了解如何确定集合的相等性。如果 a) 它们具有相同的大小，并且 b) 另一个集合中的每个元素也包含在该集合中，则认为两个集合是相等的。也就是说，如果你有

```
set1.equals(set2) 
```

然后相等算法查看大小，然后迭代 set2，并为每个元素检查该元素是否包含在 set1 中。这就是不对称的来源。当我们这样做时

```
ts.equals(hs2) 
```

两个集合的大小都是 1，所以我们继续迭代步骤。我们迭代`hs2`并使用然后调用该`TreeSet.contains`方法——**它使用比较方法**。就其`TreeSet`而言，它等于`HashSet`hs2。

现在当我们做

```
hs2.equals(ts) 
```

比较是相反的。我们遍历`TreeSet`并获取它的元素，并询问`hs2`它是否是`contains`那个元素。由于`HashSet.contains`使用了**equals**，所以它返回 false，整体结果为 false。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-08-25T17:16:42.537

假设我们有这个简单的`Student`类实现`Comparable<Student>`但没有覆盖`equals()`/ `hashCode()`。当然`equals()`是不一致的`compareTo()`——两个不同的学生`age`是不相等的：

```
class Student implements Comparable<Student> {

    private final int age;

    Student(int age) {
        this.age = age;
    }

    @Override
    public int compareTo(Student o) {
        return this.age - o.age;
    }

    @Override
    public String toString() {
        return "Student(" + age + ")";
    }
} 
```

我们可以安全地使用它`TreeMap<Student, String>`：

```
Map<Student, String> students = new TreeMap<Student, String>();
students.put(new Student(25), "twenty five");
students.put(new Student(22), "twenty two");
students.put(new Student(26), "twenty six");
for (Map.Entry<Student, String> entry : students.entrySet()) {
    System.out.println(entry);
}
System.out.println(students.get(new Student(22))); 
```

结果很容易预测：根据学生的年龄很好地对学生进行排序（尽管以不同的顺序插入）并且使用`new Student(22)`key 获取学生也可以工作并返回`"twenty two"`。这意味着我们可以安全地使用`Student`class in `TreeMap`。

然而改变`students`和`HashMap`事情变糟了：

```
Map<Student, String> students = new HashMap<Student, String>(); 
```

显然，由于散列，项目的枚举返回“随机”顺序 - 这很好，它不违反任何`Map`合同。但最后一句话完全被打破了。因为`HashMap`使用`equals()`/`hashCode()`来比较实例，所以`new Student(22)`按键获取值失败并返回`null`！

这就是 JavaDoc 试图解释的内容：此类类可以使用，`TreeMap`但可能无法与其他`Map`实现一起使用。请注意，操作是用/`Map`记录和定义的，例如：`equals()``hashCode()`[`containsKey()`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html#containsKey(java.lang.Object))

> [...] 当且仅当此映射包含键 k 的映射时才返回 true，使得`(key==null ? k==null : key.equals(k))`

因此，我不相信有任何标准的 JDK 类实现`Comparable`但未能实现`equals()`/`hashCode()`配对。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-08-25T17:09:37.780

[Comparable 接口](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)的契约允许不一致的行为：

> 强烈建议（尽管不是必需的）自然排序与 equals 一致。

所以理论上，JDK中的一个类可能`compareTo`与`equals`. 一个很好的例子是[BigDecimal](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#compareTo%28java.math.BigDecimal%29)。

下面是一个与 equals 不一致的比较器的人为示例（它基本上表示所有字符串都相等）。

输出：

> 大小：1
> 内容：{a=b}

```
public static void main(String[] args) {
    Map<String, String> brokenMap = new TreeMap<String, String> (new Comparator<String>() {

        @Override
        public int compare(String o1, String o2) {
            return 0;
        }
    });

    brokenMap.put("a", "a");
    brokenMap.put("b", "b");
    System.out.println("size: " + brokenMap.size());
    System.out.println("content: " + brokenMap);
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-01-04T09:53:56.113

这是另一个示例，说明何时与 equals **AND**总排序的一致性很重要。

假设我们有一个`MyObject`具有两个字段的对象：`id`和`quantity`。 `id`顾名思义，它是对象的自然键，`quantity`只是一个属性。

```
public class MyObject {
  int id;
  int quantity;
  ...
} 
```

假设我们要使用按降序`MyObject`排序的集合。`quantity`我们可以写的第一个比较器是：

```
Comparator<MyObject> naiveComp = new Comparator<MyObject>() {
  @Override
  public int compare(MyObject o1, MyObject o2) {
    return o2.quantity - o1.quantity;
  }
}; 
```

在 TreeMap/TreeSet 中使用`MyObject`配备此比较器的实例会失败，因为它的比较器**与 equals 不一致**（请参阅下面的完整代码）。让我们让它与equals一致：

```
Comparator<MyObject> slightlyBetterComp = new Comparator<MyObject>() {
  @Override
  public int compare(MyObject o1, MyObject o2) {
    if (o1.equals(o2)) {
      return 0;
    }
    if (o1.quantity == o2.quantity) {
      return -1; // never 0
    }
    return o2.quantity - o1.quantity; // never 0
  }
}; 
```

但是，这再次无法适应 TreeSet/TreeMap！（见下面的完整代码）这是因为排序关系不是**总**的，即不是任何两个对象都可以严格地放在一个排序关系中。在这个比较器中，当`quantity`字段相等时，结果排序是不确定的。

更好的比较器是：

```
Comparator<MyObject> betterComp = new Comparator<MyObject>() {
  @Override
  public int compare(MyObject o1, MyObject o2) {
    if (o1.equals(o2)) {
      return 0;
    }
    if (o1.quantity == o2.quantity) {
      return o1.id - o2.id; // never 0
    }
    return o2.quantity - o1.quantity; // never 0
  }
}; 
```

该比较器确保：

*   当 compareTo 返回 0 时，表示两个对象是`equal`（初始检查是否相等）
*   当相等时，所有项目都通过`id`用作判别排序字段来完全排序`quantity`

完整的测试代码：

```
package treemap;

import java.util.Comparator;
import java.util.HashMap;
import java.util.Map;
import java.util.TreeMap;

public class MyObject {
  int id;
  int quantity;

  public MyObject(int id, int quantity) {
    this.id = id;
    this.quantity = quantity;
  }

  @Override
  public int hashCode() {
    int hash = 7;
    hash = 97 * hash + this.id;
    return hash;
  }

  @Override
  public boolean equals(Object obj) {
    if (obj == null) {
      return false;
    }
    if (getClass() != obj.getClass()) {
      return false;
    }
    final MyObject other = (MyObject) obj;
    if (this.id != other.id) {
      return false;
    }
    return true;
  }

  @Override
  public String toString() {
    return "{" + id + ", " + quantity + "}";
  }

  public static void main(String[] args) {
    String format = "%30.30s: %s\n";
    Map<MyObject, Object> map = new HashMap();
    map.put(new MyObject(1, 100), 0);
    map.put(new MyObject(2, 100), 0);
    map.put(new MyObject(3, 200), 0);
    map.put(new MyObject(4, 100), 0);
    map.put(new MyObject(5, 500), 0);
    System.out.printf(format, "Random Order", map.keySet());

    // Naive non-consisten-with-equal and non-total comparator
    Comparator<MyObject> naiveComp = new Comparator<MyObject>() {
      @Override
      public int compare(MyObject o1, MyObject o2) {
        return o2.quantity - o1.quantity;
      }
    };
    Map<MyObject, Object> badMap = new TreeMap(naiveComp);
    badMap.putAll(map);
    System.out.printf(format, "Non Consistent and Non Total", badMap.keySet());

    // Better consisten-with-equal but non-total comparator
    Comparator<MyObject> slightlyBetterComp = new Comparator<MyObject>() {
      @Override
      public int compare(MyObject o1, MyObject o2) {
        if (o1.equals(o2)) {
          return 0;
        }
        if (o1.quantity == o2.quantity) {
          return -1; // never 0
        }
        return o2.quantity - o1.quantity; // never 0
      }
    };
    Map<MyObject, Object> slightlyBetterMap = new TreeMap(naiveComp);
    slightlyBetterMap.putAll(map);
    System.out.printf(format, "Non Consistent but Total", slightlyBetterMap.keySet());

    // Consistent with equal AND total comparator
    Comparator<MyObject> betterComp = new Comparator<MyObject>() {
      @Override
      public int compare(MyObject o1, MyObject o2) {
        if (o1.equals(o2)) {
          return 0;
        }
        if (o1.quantity == o2.quantity) {
          return o1.id - o2.id; // never 0
        }
        return o2.quantity - o1.quantity; // never 0
      }
    };
    Map<MyObject, Object> betterMap = new TreeMap(betterComp);
    betterMap.putAll(map);
    System.out.printf(format, "Consistent and Total", betterMap.keySet());
  }
} 
```

输出：

```
 Random Order: [{5, 500}, {4, 100}, {3, 200}, {2, 100}, {1, 100}]
  Non Consistent and Non Total: [{5, 500}, {3, 200}, {4, 100}]
      Consistent but Not Total: [{5, 500}, {3, 200}, {4, 100}]
          Consistent and Total: [{5, 500}, {3, 200}, {1, 100}, {2, 100}, {4, 100}] 
```

结论：

尽管我认为从概念上将身份与排序分开是非常合理的。例如，在关系数据库方面：

```
select * from MyObjects order by quantity 
```

完美运行。我们在这里不关心对象身份，也不想要全序

但是，由于基于树的集合实现的限制，必须确保他们编写的任何比较器：

*   与equals一致
*   提供所有可能对象的总排序

# c++ - 关于内存的动态特性，C++ 示例

> ID：12123962
> 
> 赞同：0
> 
> 时间：2012-08-25T17:02:48.680
> 
> 标签：c++, memory

考虑以下代码段

```
int x[] = {1,2,3};
cout << *x << endl;      // 1
cout << *(x+1) << endl;  // 2
cout << *(x-10) << endl; // Different number each time i run the program 
```

为什么`cout`每次运行**编译**程序时最后始终显示不同的数字？据了解，结果是不可预测的并且是未定义的，但我想它应该是一致的。为什么会改变？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T17:10:46.717

您尝试访问的内存块不是您的阵列和程序合法拥有的。那部分内存将由其他正在进行的进程拥有。所以每次它都有不同的价值。您也有可能在其他时间得到相同的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T17:09:05.067

为什么要一致？它几乎是您计算机内存的随机值。 `x`并不总是指向相同的位置和`*(x-10)`更改的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-25T17:08:54.460

正如你提到的，这是未定义的行为......</p>

一种解释：您正在阅读任意/随机内存。在您阅读之前，谁知道它的用途？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-25T17:10:54.193

这是未定义的行为。您还可能有[地址空间布局随机化 (ASLR)](http://en.wikipedia.org/wiki/Address_space_layout_randomization)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-25T17:09:35.380

如果你明白结果是不可预测的和未定义的，那你为什么还认为它必须是一致的呢？在您的记忆之外阅读时，没有任何保证。它还不如使程序崩溃。

# python - python - timedelta 和两个时间范围

> ID：12123963
> 
> 赞同：1
> 
> 时间：2012-08-25T17:02:50.297
> 
> 标签：python, datetime, timedelta

我想知道从 timedelta 开始有多少小时在 Day 和 Night 范围内。

### 时间开始：

```
>>> dt_start = datetime.datetime(2012, 8, 19, 16, 0) 
```

### 时间停止：

```
>>> dt_stop = datetime.datetime(2012, 8, 20, 3, 0) 
```

### 时差：

```
>>> dtd = dt_stop - dt_start
>>> print(dtd.seconds//3600)
>>> 11 
```

### 时间范围：

```
Day = 7am-22pm
Night = 22pm-7am 
```

对于此示例，正确的输出将是：

```
Day hours: 6:00
Night hours: 5:00 
```

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T17:09:58.493

您需要指定白天和黑夜的过渡点，并计算到那个的增量，然后计算到终点的增量：

```
day_start = 7
night_start = 22

day_hours = 0
night_hours = 0
if dt_start.hour < night_start:
    dt_night = dt_start.replace(hour=night_start)
    day_hours = (dt_night - dt_start).seconds // 3600
    night_hours = (dt_end - dt_night).seconds // 3600 
```

这是一个相当幼稚的设置，因为它不支持多天跨度等。将其视为一个起点。

# ruby - 带边权的有向循环图传递约简的伪代码

> ID：12123968
> 
> 赞同：0
> 
> 时间：2012-08-25T17:03:29.850
> 
> 标签：ruby, graph-theory, pseudocode

> **可能重复：**
> [传递减少算法：伪代码？](https://stackoverflow.com/questions/1690953/transitive-reduction-algorithm-pseudocode)

我有一个带有边权重的有向图，并且正在寻找一种方法来获得它的[传递减少](https://en.wikipedia.org/wiki/Transitive_reduction)。此外，该图可能有循环，因此它需要能够处理它。我最终会用 ruby​​ 写这个，但任何语言都可以！

有任何想法吗？

谢谢。

# c# - 无法使用 C# 编辑 SQL Server 2008 数据库中的表

> ID：12123970
> 
> 赞同：0
> 
> 时间：2012-08-25T17:04:00.283
> 
> 标签：c#, sql-server-2008

我在 c# 中创建一个需要嵌入数据库的应用程序，我添加了一个新的`Service based Database`. 我将它添加到应用程序中，我通过创建了一个表并向`designer`其中添加了数据。在这里，我开始面临问题。我能够添加新记录，但无法编辑任何行。我注意到一个奇怪的行为。

![在此处输入图像描述](../Images/65256117c92ebabd1cfe294a3baa85b0.png)

*   当行只有 1 或 2 时，我可以毫无问题地编辑它们。

![在此处输入图像描述](../Images/35e84029cfce92554e655d97b9a1e627.png)

*   但是当行数变得更多时，比如 7 个中的 5 个，我无法编辑任何行，

我收到一个错误

> 更新或删除的行值要么不使行唯一，要么改变多行

![在此处输入图像描述](../Images/16141078170320117b39d2b631d6947a.png)

我既没有提到唯一约束也没有提到非空约束。所有列都是数据类型`text`。我不确定是什么导致了这个问题。有人可以解释我怎么回事吗？

PS：有时，我也会收到屏幕截图 2 中所示的错误。对于这种情况，当我单击 时`Execute SQL`，会插入数据。

* * *

```
***After using an Identity column, the issue is solved. Thanks a lot guys :) 
```

现在出现了另一个问题，我可以在设计器中进行编辑，但我也有一个绑定到数据库的 dataGridView，我无法在其中编辑（更新）值，有什么建议吗？这是代码，我正在使用

```
private void saveButton_Click(object sender, EventArgs e)
        {
                this.Validate();
                this.core3BindingSource.EndEdit();
                this.core3TableAdapter.Update(this.coreDataSet.Core3);
        }*** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T18:07:31.407

Niranjan 您在表上添加主键是为了不造成完整性问题。

```
CREATE TABLE YourTable
(
   Id INT IDENTITY(1,1) PRIMARY KEY,
   .......
); 
```

我建议你进行身份处理，但你可以调整你的主键，这只是额外的建议

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T19:37:07.653

使用它可以避免重复数据

```
CREATE TABLE YourTable 
( 
   Id INT IDENTITY(1,1) PRIMARY KEY, 
     ....... 
); 
```

使用主键创建 Id 列

IDENTITY(1,1) 属性自动增加每一行的 ID 列值。

# ruby - EventMachine WebSockets - 订阅 WS 到 EM 频道与保持套接字收集

> ID：12123974
> 
> 赞同：3
> 
> 时间：2012-08-25T17:04:33.447
> 
> 标签：ruby, websocket, eventmachine

我正在构建一个使用 EM 和 WebSockets 并涉及向订阅客户端广播数据的项目。

我想知道为什么人们更喜欢将 websocket 订阅到频道，如下所示：

```
EventMachine::WebSocket.start(:host => "0.0.0.0", :port => 8080) do |ws|

ws.onopen {
  sid = @channel.subscribe { |msg| ws.send msg }
  @channel.push "#{sid} connected!"

  ws.onmessage { |msg|
    @channel.push "<#{sid}>: #{msg}"
  }

  ws.onclose {
    @channel.unsubscribe(sid)
  }
}

end 
```

将每个 websocket 添加到数组中：

```
EM::WebSocket.start(:host => "0.0.0.0", :port => 8080) do |ws|
ws.onopen {
  puts "Websocket connection opened"
  websocket_connections << ws
}
ws.onclose {
  puts "Websocket connection closed"
  websocket_connections.delete(ws)
}
end 
```

并简单地迭代整个数组并`ws.send msg`在适当的时候（或相反）进行类似的调用。

通道替代方案是否对 EventMachine 的整个非阻塞特性有更好的优化？（例如一次广播到一些订阅的套接字，然后继续其他的，而不是一次发送所有这些套接字）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T17:37:10.353

EventMachine::Channel 类只是一个处理订阅者数组迭代的抽象。如果您查看[EventMachine::Channel#push](http://eventmachine.rubyforge.org/EventMachine/Channel.html#M000260)的 Ruby 源代码，您会发现它与您的建议类似：

```
def push(*items)
  items = items.dup
  EM.schedule { @subs.values.each { |s| items.each { |i| s.call i } } }
end 
```

事实上，如果你不需要复制你的 items 数组，它实际上比手动迭代列表要慢。但是，我怀疑性能影响是否显着。EventMachine::Channel 只是一种抽象，它使管理客户端列表更容易。

# java - 带有 TitledBorder 的面板中的渐变文本字段 - 性能问题

> ID：12123976
> 
> 赞同：1
> 
> 时间：2012-08-25T17:04:45.123
> 
> 标签：java, swing, gradient, jtextfield, paintcomponent

我有一个带有 3 个内部面板的面板，它们都使用`TitledBorder`. 第三个内部面板有许多自定义文本字段，用`GradientPaint`. 文本字段来自一个自定义类，该类扩展`JTextField`并使用覆盖`paintComponent`方法以及 a `MouseListener`，因此当鼠标进入文本字段区域时，渐变颜色会略有变化（当鼠标离开文本字段时会再次变回）。

问题在于，当这些文本字段位于具有 TitledBorder 的面板内时（顺便说一下，这是一个复合边框），渐变颜色的变化效果不佳。我的意思是他们的反应不够快，但是当他们不在这样的小组中时，他们的反应很好（我已经对此进行了测试）。

我认为问题出在边框本身，所以我尝试覆盖`TitledBorder`'`paintBorder()`方法，每当调用此方法来绘制边框时，我添加了一个 print 语句......似乎每次鼠标进入文本字段的区域时（并且渐变颜色发生变化）`TitledBorder`再次绘制。如果我将鼠标指针快速移动到所有文本字段（它们只是其中的 4 个），则再次绘制文本字段（这是正常的），但`TitledBorder`每次也会绘制复合物，我猜这会导致性能问题。

`TitledBorder`我的问题很简单，有什么方法可以告诉 Java每次鼠标在面板的内部组件上移动时不要再次绘制面板？

我知道这有时可能会导致问题，例如，如果我有一个带有组合框的小标题边框面板：如果我单击该组合框，弹出菜单可能会隐藏面板边框的一部分（前提是组合框靠近边框的底部侧），因此当弹出菜单本身再次隐藏时，应再次绘制边框，否则它将在弹出菜单和边框重叠的空间留下一个“空白”区域。

但是在前面的情况下，面板只有文本字段并且当鼠标在面板区域移动时不需要再次绘制边框，阻止`paintComponent()`被调用是否可以接受，如果是，如何？（或者我应该尝试一些我没有想到的完全不同的东西 - 抱歉我不是很有经验）。

我可以提供渐变文本字段`paintComponent()`方法的代码和发生的变化，`mouseEntered()`但我认为问题的原因很清楚，我对它发生原因的假设是正确的（如果我错了，请纠正我）......

编辑：

好的，在通过我的自定义类尝试制作 sscce 时，我发现了我非常愚蠢的错误。我使用的不是标准的 TitledBorder，而是一个 CustomTitledBorder 类：

1) 消除了在标题边框右侧添加的 2 个额外像素 2) 使用了复合边框和不同的字体（palatino 粗体）。

问题是 palatino 字体没有存储在内存中，而是在*每次*调用我的自定义类的构造函数时从磁盘读取。所以每次调用paintBorder()时也会调用它。因此，每次鼠标移动到具有上述边框的面板中的文本字段时都会调用它。这非常愚蠢，对此我很抱歉（我试图找出性能问题一天多）。

这并没有回答我的问题，尽管每次鼠标悬停在文本字段上时如何避免执行paintBorder，但不再需要它（而且我不确定它是否可以接受）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T18:16:02.813

将渐变缓存在 a 中`BufferedImage`，如此[处](https://sites.google.com/site/drjohnbmatthews/kineticmodel)和[此处](https://stackoverflow.com/a/7343420/230513)所示。也考虑一下，[这里](https://stackoverflow.com/a/11556441/230513)说明一下。`TexturePaint`

# java - 从其他方法访问变量

> ID：12123979
> 
> 赞同：0
> 
> 时间：2012-08-25T17:04:58.587
> 
> 标签：java, android, oop, geolocation

我正在尝试在具有当前位置的 android 中提交用户注册表单。我是 android 和 java 开发的新手。当我尝试在我的名称值对代码中访问 onLocationChanged 方法的 myLat 和 myLan 时，它无法找到这两个变量。如何访问我的名称值对代码中的两个变量。

```
package com.imran;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

import com.google.android.gcm.GCMRegistrar;
import com.google.android.maps.MyLocationOverlay;

import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.StrictMode;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;
import android.app.Activity;
import android.content.Context;

public class Register extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_register);
        final EditText email_id = (EditText)  findViewById(R.id.email_id) ;
        final EditText name = (EditText) findViewById(R.id.name);
        final EditText password = (EditText) findViewById(R.id.password);
        Button button = (Button) findViewById(R.id.button1) ;

        //generate GCM id
        GCMRegistrar.checkDevice(this);
        GCMRegistrar.checkManifest(this);
        final String regId = GCMRegistrar.getRegistrationId(this);
        if (regId.equals("")) {
          GCMRegistrar.register(this, "12356");

        } else {
        String TAG = null;
        Log.v(TAG, regId);

        }
        //generate GCM id ended
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy); 
        //get current location

        LocationManager manager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
        LocationListener listner = new LocationListener() {

            @Override
            public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onProviderEnabled(String arg0) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onProviderDisabled(String arg0) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onLocationChanged(Location location) {
                double myLonDouble = location.getLongitude();
            final String myLon = Double.toString(myLonDouble);
                double myLatDouble = location.getLatitude();
                final String myLat = Double.toString(myLatDouble);

            }
        };
        manager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, listner);

        //end get current location

        button.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        //postData();
          HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://xyz.com/folder/register.php");

            try {
                // Add your data
                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
                nameValuePairs.add(new BasicNameValuePair("email", email_id.getText().toString()));
                nameValuePairs.add(new BasicNameValuePair("name", name.getText().toString()));
                nameValuePairs.add(new BasicNameValuePair("password", password.getText().toString()));
                nameValuePairs.add(new BasicNameValuePair("regid", regId));
                nameValuePairs.add(new BasicNameValuePair("uid", "2"));
                nameValuePairs.add(new BasicNameValuePair("lat",myLat ));
                nameValuePairs.add(new BasicNameValuePair("lon",myLon));
               httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                // Execute HTTP Post Request
               //Toast.makeText(this, resId, duration)
                HttpResponse response = httpclient.execute(httppost);

            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
            } catch (IOException e) {
                // TODO Auto-generated catch block
            }

    }
});

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T17:09:27.643

您可能应该研究[范围](http://java.about.com/od/s/g/Scope.htm)和[成员变量](http://docs.oracle.com/javase/tutorial/java/javaOO/variables.html)。问题是，您不能在一种方法中声明一件事，然后尝试从另一种方法访问它。

所以，我们将这个东西声明为成员变量，并在一个方法中定义它，然后它可以在另一个方法中使用。

像这样（我用 标记了我的评论`**`）：

```
public class Register extends Activity {

    // "private" means it can only be accessed from this class
    private String myLat = null; // ** Declare myLat
    private String myLon = null; // ** Declare myLon

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_register);
        final EditText email_id = (EditText)  findViewById(R.id.email_id) ;
        final EditText name = (EditText) findViewById(R.id.name);
        final EditText password = (EditText) findViewById(R.id.password);
        Button button = (Button) findViewById(R.id.button1) ;

        //generate GCM id
        GCMRegistrar.checkDevice(this);
        GCMRegistrar.checkManifest(this);
        final String regId = GCMRegistrar.getRegistrationId(this);
        if (regId.equals("")) {
          GCMRegistrar.register(this, "12356");

        } else {
        String TAG = null;
        Log.v(TAG, regId);

        }
        //generate GCM id ended
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy); 
        //get current location

        LocationManager manager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
        LocationListener listner = new LocationListener() {

            @Override
            public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onProviderEnabled(String arg0) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onProviderDisabled(String arg0) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onLocationChanged(Location location) {
                double myLonDouble = location.getLongitude();
                myLon = Double.toString(myLonDouble); // ** Define myLon
                double myLatDouble = location.getLatitude();
                myLat = Double.toString(myLatDouble); // ** Define myLat

            }
        };
        manager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, listner);

        //end get current location

        button.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
        // TODO Auto-generated method stub
        // ** Check if they have been defined
        if (myLat == null || myLon == null)
            return;

        //postData();
          HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://xyz.com/folder/register.php");

            try {
            // Add your data
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("email", email_id.getText().toString()));
            nameValuePairs.add(new BasicNameValuePair("name", name.getText().toString()));
            nameValuePairs.add(new BasicNameValuePair("password", password.getText().toString()));
            nameValuePairs.add(new BasicNameValuePair("regid", regId));
            nameValuePairs.add(new BasicNameValuePair("uid", "2"));
            nameValuePairs.add(new BasicNameValuePair("lat",myLat ));
            nameValuePairs.add(new BasicNameValuePair("lon",myLon));
               httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            // Execute HTTP Post Request
               //Toast.makeText(this, resId, duration)
            HttpResponse response = httpclient.execute(httppost);

            } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            } catch (IOException e) {
            // TODO Auto-generated catch block
            }

        }
    });

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T17:09:22.660

您的变量范围有问题。您正在初始化的 myLatDouble 和 myLon Double 仅存在于创建它们的 onLocationChanged 方法中。您必须在不同的位置声明它们，以便在您尝试访问它们时它们不会超出范围，或者您必须将它们作为参数传递给 nameValuePairs 代码

# android - 在 FB 上加载视频时出现空指针异常

> ID：12123980
> 
> 赞同：-1
> 
> 时间：2012-08-25T17:05:26.477
> 
> 标签：android, facebook, video, nullpointerexception

我正在制作一个应用程序，我想在 facebook 上发布视频。但是在提供视频参考时，我得到空指针异常。请告诉我如何解决这个问题。

这是代码：

```
public class Example extends Activity {

    // Your Facebook Application ID must be set before running this example
    // See http://www.facebook.com/developers/createapp.php
    public static final String APP_ID = "175729095772478";

    private LoginButton mLoginButton;
    private TextView mText;
    private Button mRequestButton;
    private Button mPostButton;
    private Button mDeleteButton;
    private Button mUploadButton;

    private Facebook mFacebook;
    private AsyncFacebookRunner mAsyncRunner;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        if (APP_ID == null) {
            Util.showAlert(this, "Warning", "Facebook Applicaton ID must be " +
                    "specified before running this example: see Example.java");
        }

        setContentView(R.layout.main);
        mLoginButton = (LoginButton) findViewById(R.id.login);
        mText = (TextView) Example.this.findViewById(R.id.txt);
        mRequestButton = (Button) findViewById(R.id.requestButton);
        mPostButton = (Button) findViewById(R.id.postButton);
        mDeleteButton = (Button) findViewById(R.id.deletePostButton);
        mUploadButton = (Button) findViewById(R.id.uploadButton);

        mFacebook = new Facebook(APP_ID);
        mAsyncRunner = new AsyncFacebookRunner(mFacebook);

        SessionStore.restore(mFacebook, this);
        SessionEvents.addAuthListener(new SampleAuthListener());
        SessionEvents.addLogoutListener(new SampleLogoutListener());
        mLoginButton.init(this, mFacebook);

        mRequestButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                mAsyncRunner.request("me", new SampleRequestListener());
            }
        });
        mRequestButton.setVisibility(mFacebook.isSessionValid() ?
                View.VISIBLE :
                View.INVISIBLE);

        mUploadButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                byte[] data = null;
                AssetFileDescriptor fileDesc = getResources().openRawResourceFd(
                R.raw.movie);
                String dataPath =  fileDesc.toString();
                String dataMsg = "Your video description here.";
                String dataName = "movie.mp4";
                Bundle param;
                AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(mFacebook);
                InputStream is ;
                try 
                {
                    is = new FileInputStream(dataPath);
                    if(is != null)
                    data = readBytes(is);
                    param = new Bundle();
                    param.putString("message", dataMsg);
                    param.putString("filename", dataName);
                    param.putByteArray("video", data);
                    mAsyncRunner.request(null, param, "POST", new SampleUploadListener(), null);
                }
                catch (FileNotFoundException e) {
                   e.printStackTrace();
                }
                catch (IOException e) {
                   e.printStackTrace();
                }       
            }
        });
        mUploadButton.setVisibility(mFacebook.isSessionValid() ?
                View.VISIBLE :
                View.INVISIBLE);

        mPostButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                mFacebook.dialog(Example.this, "feed",
                        new SampleDialogListener());
            }
        });
        mPostButton.setVisibility(mFacebook.isSessionValid() ?
                View.VISIBLE :
                View.INVISIBLE);

        mPostButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                mFacebook.dialog(Example.this, "feed",
                        new SampleDialogListener());
            }
        });
        mPostButton.setVisibility(mFacebook.isSessionValid() ?
                View.VISIBLE :
                View.INVISIBLE);
    }

    public byte[] readBytes(InputStream inputStream) throws IOException {
        // This dynamically extends to take the bytes you read.
        ByteArrayOutputStream byteBuffer = new ByteArrayOutputStream();

        // This is storage overwritten on each iteration with bytes.
        int bufferSize = 1024;
        byte[] buffer = new byte[bufferSize];

        // We need to know how may bytes were read to write them to the byteBuffer.
        int len = 0;
        while ((len = inputStream.read(buffer)) != -1) {
            byteBuffer.write(buffer, 0, len);
        }

        // And then we can return your byte array.
        return byteBuffer.toByteArray();
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode,
                                    Intent data) {
        mFacebook.authorizeCallback(requestCode, resultCode, data);
    }

    public class SampleAuthListener implements AuthListener {

        public void onAuthSucceed() {
            mText.setText("You have logged in! ");
            mRequestButton.setVisibility(View.VISIBLE);
            mUploadButton.setVisibility(View.VISIBLE);
            mPostButton.setVisibility(View.VISIBLE);
        }

        public void onAuthFail(String error) {
            mText.setText("Login Failed: " + error);
        }
    }

    public class SampleLogoutListener implements LogoutListener {
        public void onLogoutBegin() {
            mText.setText("Logging out...");
        }

        public void onLogoutFinish() {
            mText.setText("You have logged out! ");
            mRequestButton.setVisibility(View.INVISIBLE);
            mUploadButton.setVisibility(View.INVISIBLE);
            mPostButton.setVisibility(View.INVISIBLE);
        }
    }

    public class SampleRequestListener extends BaseRequestListener {

        public void onComplete(final String response, final Object state) {
            try {
                // process the response here: executed in background thread
                Log.d("Facebook-Example", "Response: " + response.toString());
                JSONObject json = Util.parseJson(response);
                final String name = json.getString("name");

                // then post the processed result back to the UI thread
                // if we do not do this, an runtime exception will be generated
                // e.g. "CalledFromWrongThreadException: Only the original
                // thread that created a view hierarchy can touch its views."
                Example.this.runOnUiThread(new Runnable() {
                    public void run() {
                        mText.setText("Hello there, " + name + "!");
                    }
                });
            } catch (JSONException e) {
                Log.w("Facebook-Example", "JSON Error in response");
            } catch (FacebookError e) {
                Log.w("Facebook-Example", "Facebook Error: " + e.getMessage());
            }
        }
    }

    public class SampleUploadListener extends BaseRequestListener {

        public void onComplete(final String response, final Object state) {
            try {
                // process the response here: (executed in background thread)
                Log.d("Facebook-Example", "Response: " + response.toString());
                JSONObject json = Util.parseJson(response);
                final String src = json.getString("src");

                // then post the processed result back to the UI thread
                // if we do not do this, an runtime exception will be generated
                // e.g. "CalledFromWrongThreadException: Only the original
                // thread that created a view hierarchy can touch its views."
                Example.this.runOnUiThread(new Runnable() {
                    public void run() {
                        mText.setText("Hello there, photo has been uploaded at \n" + src);
                    }
                });
            } catch (JSONException e) {
                Log.w("Facebook-Example", "JSON Error in response");
            } catch (FacebookError e) {
                Log.w("Facebook-Example", "Facebook Error: " + e.getMessage());
            }
        }
    }
    public class WallPostRequestListener extends BaseRequestListener {

        public void onComplete(final String response, final Object state) {
            Log.d("Facebook-Example", "Got response: " + response);
            String message = "<empty>";
            try {
                JSONObject json = Util.parseJson(response);
                message = json.getString("message");
            } catch (JSONException e) {
                Log.w("Facebook-Example", "JSON Error in response");
            } catch (FacebookError e) {
                Log.w("Facebook-Example", "Facebook Error: " + e.getMessage());
            }
            final String text = "Your Wall Post: " + message;
            Example.this.runOnUiThread(new Runnable() {
                public void run() {
                    mText.setText(text);
                }
            });
        }
    }

    public class WallPostDeleteListener extends BaseRequestListener {

        public void onComplete(final String response, final Object state) {
            if (response.equals("true")) {
                Log.d("Facebook-Example", "Successfully deleted wall post");
                Example.this.runOnUiThread(new Runnable() {
                    public void run() {
                        mDeleteButton.setVisibility(View.INVISIBLE);
                        mText.setText("Deleted Wall Post");
                    }
                });
            } else {
                Log.d("Facebook-Example", "Could not delete wall post");
            }
        }
    }

    public class SampleDialogListener extends BaseDialogListener {

        public void onComplete(Bundle values) {
            final String postId = values.getString("post_id");
            if (postId != null) {
                Log.d("Facebook-Example", "Dialog Success! post_id=" + postId);
                mAsyncRunner.request(postId, new WallPostRequestListener());
                mDeleteButton.setOnClickListener(new OnClickListener() {
                    public void onClick(View v) {
                        mAsyncRunner.request(postId, new Bundle(), "DELETE",
                                new WallPostDeleteListener(), null);
                    }
                });
                mDeleteButton.setVisibility(View.VISIBLE);
            } else {
                Log.d("Facebook-Example", "No wall post made");
            }
        }
    }

} 
```

这是一个例外：

```
08-25 22:22:12.521: W/System.err(385): java.io.FileNotFoundException: /{AssetFileDescriptor: {ParcelFileDescriptor: java.io.FileDescriptor@44ea68c8} start=12468 len=466888}
08-25 22:22:12.630: W/System.err(385):  at org.apache.harmony.luni.platform.OSFileSystem.open(OSFileSystem.java:244)
08-25 22:22:12.662: W/System.err(385):  at java.io.FileInputStream.<init>(FileInputStream.java:77)
08-25 22:22:12.671: W/System.err(385):  at java.io.FileInputStream.<init>(FileInputStream.java:130)
08-25 22:22:12.691: W/System.err(385):  at com.facebook.android.Example$2.onClick(Example.java:107)
08-25 22:22:12.691: W/System.err(385):  at android.view.View.performClick(View.java:2364)
08-25 22:22:12.702: W/System.err(385):  at android.view.View.onTouchEvent(View.java:4179)
08-25 22:22:12.710: W/System.err(385):  at android.widget.TextView.onTouchEvent(TextView.java:6541)
08-25 22:22:12.730: W/System.err(385):  at android.view.View.dispatchTouchEvent(View.java:3709)
08-25 22:22:12.741: W/System.err(385):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
08-25 22:22:12.750: W/System.err(385):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
08-25 22:22:12.750: W/System.err(385):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
08-25 22:22:12.762: W/System.err(385):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
08-25 22:22:12.780: W/System.err(385):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
08-25 22:22:12.780: W/System.err(385):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
08-25 22:22:12.791: W/System.err(385):  at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
08-25 22:22:12.801: W/System.err(385):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
08-25 22:22:12.810: W/System.err(385):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
08-25 22:22:12.834: W/System.err(385):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-25 22:22:12.841: W/System.err(385):  at android.os.Looper.loop(Looper.java:123)
08-25 22:22:12.852: W/System.err(385):  at android.app.ActivityThread.main(ActivityThread.java:4363)
08-25 22:22:12.860: W/System.err(385):  at java.lang.reflect.Method.invokeNative(Native Method)
08-25 22:22:12.871: W/System.err(385):  at java.lang.reflect.Method.invoke(Method.java:521)
08-25 22:22:12.881: W/System.err(385):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
08-25 22:22:12.890: W/System.err(385):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
08-25 22:22:12.900: W/System.err(385):  at dalvik.system.NativeStart.main(Native Method) 
```

我在这条线上遇到了异常。

```
is = new FileInputStream(dataPath); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T17:14:17.093

一方面，您将 AssetFileDescriptor 的引用作为路径传递。

代替

```
is = new FileInputStream(dataPath); 
```

和

```
is = fileDesc.createInputStream() 
```

# javascript - 为什么我不能使用此功能更改图像的宽度？

> ID：12123981
> 
> 赞同：2
> 
> 时间：2012-08-25T17:05:31.123
> 
> 标签：javascript

仅当图像宽度大于 200 像素时，我才尝试将图像的宽度更改为 200 像素（固定大小），否则我想保留其原始宽度。

**现在下面的代码有效：**

```
<img src="../images/browse-files.png"  style="width:200px" onload="var img = new Image(); img.src = this.src; if(img.width <= 680){ var imgW= '680' + 'px' ; this.style.width =imgW;} "/> 
```

**但下面的代码没有：**

```
<script type="text/javascript">
resize(){
var img = new Image(); 
img.src = this.src; 
    if(img.width <= 680){ 
        var imgW= '680' + 'px' ; 
        this.style.width = imgW;
    }
return this.style.width;                            
}
</script>

<img src="../images/browse-files.png"  style="width:200px" onload="return resize() "/> 
```

我想知道最后一种方法我做错了什么。我更喜欢最后一个方法，因为我想在一个 .js 页面上包含所有 JavaScript 函数。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T17:21:20.677

您没有正确声明该功能。

```
function resize(){
  var img = new Image(); 
  img.src = this.src; 
  if(img.width <= 680){ 
    ...
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T17:15:06.403

您不能将`onload`事件放在这样的图像元素上，它必须在`Image`. 查看[此](http://jsfiddle.net/BffAn/1/)（或下面的参考代码）以获得良好的开始。我首先创建了一个实例，`Image`以便我可以检测到它何时加载。然后，`onload`检查图像的大小是否大于 200。如果是，则获取原始图像**元素**，*而不是 的实例`Image`*，并调整其大小。

```
var image = document.getElementById("image");

var img = new Image();
    img.src = image.src;

img.onload = function(){
    if (img.width > 200) {
        image.style.width = "200px";
    }
}; 
```

# objective-c - 获取 UIImage 的突出颜色

> ID：12123982
> 
> 赞同：1
> 
> 时间：2012-08-25T17:05:31.987
> 
> 标签：objective-c, ios4, uiimage, cgcontext, uicolor

我正在尝试获得在 uiimage 中突出的颜色，如果这是照片，我会获得红色： ![红色](../Images/bcf2ad97a091e3f67d560ee60ae0ff52.png)

我知道要获得平均颜色，我会使用下面的代码，但它会返回 nlack 或灰色作为平均颜色，我希望此代码获得红色。

```
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
        unsigned char rgba[4];
        CGContextRef context = CGBitmapContextCreate(rgba, 1, 1, 8, 4, colorSpace, kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);

        CGContextDrawImage(context, CGRectMake(0, 0, 1, 1),  artworkImageView.image.CGImage);
        CGColorSpaceRelease(colorSpace);
        CGContextRelease(context);
        UIColor *colorOfArtwork;

         if(rgba[3]) {
            CGFloat alpha = ((CGFloat)rgba[3])/255.0;
            CGFloat multiplier = alpha/255.0;
            colorOfArtwork = [UIColor colorWithRed:((CGFloat)rgba[0])*multiplier
                                   green:((CGFloat)rgba[1])*multiplier
                                    blue:((CGFloat)rgba[2])*multiplier
                                   alpha:alpha];
        }
        else {
            colorOfArtwork =  [UIColor colorWithRed:((CGFloat)rgba[0])/255.0
                                   green:((CGFloat)rgba[1])/255.0
                                    blue:((CGFloat)rgba[2])/255.0
                                   alpha:((CGFloat)rgba[3])/255.0];
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T17:34:01.543

首先，在大多数情况下，这不是一个小问题。对人类来说似乎很明显的东西仍然很难在算法中编码，因为人类对“突出”的感知非常复杂。

如果您总是有只有一种颜色的灰度图像，这可能相对容易，但在蓝天下的相同图像可能更具挑战性。

对于您显示的图像，您可以遍历所有像素并将颜色转换为[HSV](http://en.wikipedia.org/wiki/HSL_and_HSV)。然后你只能考虑高于某个饱和度阈值的像素并计算它们的平均色调。正如我所说，这只适用于像您的示例图像这样的简单情况，其中实际上只有一种颜色，其余的是灰度。在其他情况下，您可能需要考虑像素的位置（中心附近的颜色可能更突出）并且不能简单地采用平均色调（对直方图进行聚类可以工作）。

我不会在这里详细介绍如何从图像中获取像素颜色值，您会在 SO 上找到一些关于此的帖子，例如[这里](https://stackoverflow.com/a/8189445/573626)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-04T23:03:12.720

我做了一些与 omz 的回答非常相似的事情。

1）。遍历像素并捕获 UIImage 中最常见的颜色

2）。迭代最常见的颜色并找到具有最高（值+饱和度）总和的颜色。

[当我访问http://colorizer.org](http://colorizer.org)时，我发现值（亮度）加上饱和度会起作用。饱和度为 0 为白色，值为 0 为黑色。与这些颜色相反，我注意到在大约 100% 的饱和度和值下，这些突出的颜色消退了。

我尝试但返回不太理想的另一个选项是将其转换为 HSL 并检索亮度。在 0 到 100 的范围内，50 是饱和度和值将是 100 的位置。因此，您不会获得饱和度和值的最高总和，而是遍历颜色以获得亮度最接近 50 的颜色。

我的代码如下：

```
#import "ImageHelper.h" //Found Here-> https://github.com/fylfot/MostResentColorUIImage/blob/master/MostRecentColor/ImageHelper.h

...

float maxDominatingFactor = 0.0;
UIColor *standOutColor;
NSArray *colors = [ImageHelper mostFrequentColors:30 of:self withColorPallete:ColorPalete512];
for(UIColor *color in colors){
    if(([color brightness] + [color saturation]) > maxDominatingFactor){
        standOutColor = color;
        maxDominatingFactor = ([color brightness] + [color saturation]);
    }
}

//standOutColor is now the stand out color 
```

注意：我在 UIColor 上有一个用于计算亮度和饱和度的类别。

这是我为它制作的一个项目：

[https://github.com/kdogisthebest/StandOutColor](https://github.com/kdogisthebest/StandOutColor)

# objective-c - 无法显示 UILabel -xcode

> ID：12123988
> 
> 赞同：0
> 
> 时间：2012-08-25T17:06:11.487
> 
> 标签：objective-c, parsing, object, controller, label

我有一个标签的情况！我制作了一个 tableView，它与解析时的数据表连接。当我选择视图控制器传递给视图的行但值是！我所有的 NSLog 都指定了数据传递的事实！但我无法在我的 viewController 的标签上显示它！请帮忙..我错过了什么？所有的连接都与文件所有者..这些是我的文件..

```
-(void) tableView: (UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

  PFObject *object = [self.objects objectAtIndex:indexPath.row];

   NSInteger row = [indexPath row];
NSLog(@"%i",row);

MyTableViewDetail * MTD = [[MyTableViewDetail alloc] initWithNibName:@"MyTableViewDetail" bundle:nil];

NSLog(@"text=%@",[object objectForKey:@"columntext"]);
MTD.label1 = [object objectForKey:@"columntext"];
NSLog(@"label1= %@",MTD.label1);

[self.navigationController pushViewController:MTD animated:YES];
//tableView.backgroundColor =[UIColor clearColor];

} 
```

我所有的 NSLog 都指向正确的方向。但由于某种原因 label1 没有显示值..这是我的其他文件..

```
#import "MyTableViewDetail.h"
#import "MyTableController.h"

@interface MyTableViewDetail ()

@end

@implementation MyTableViewDetail
@synthesize label1;
@synthesize imagedetail;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {

    // Custom initialization
}
return self;
}

- (void)viewDidLoad{
[super viewDidLoad];
}

- (void)viewDidUnload
{
[self setLabel1:nil];
[self setImagedetail:nil];
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

和我的.h：

```
#import <UIKit/UIKit.h>
#import <Parse/Parse.h>
#import "MyTableController.h"

@interface MyTableViewDetail : UIViewController{

}

@property (strong, nonatomic) IBOutlet UILabel *label1;
@property (strong, nonatomic) IBOutlet UIImageView *imagedetail;

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T05:47:52.370

`MTD.label1.text = ...`您应该使用而不是设置标签的文本`MTD.label1 = ...`。

**更新：**

从您评论中的 NSLog() 输出中，可以看出最初`MTD.label1`是这样的。`nil`原因是标签仅在新视图实际加载后才连接。解决方案是在 中创建一个单独的属性，例如“columntext” `MyTableViewDetail`，然后

*   设置`MTD.columntext = [object objectForKey:@"columntext"];`，
*   设置`self.label1.text = self.columntext;`在。`viewDidLoad`_`MyTableViewDetail`

# jquery - twitter bootstrap 下拉菜单在应该关闭时不会关闭

> ID：12123989
> 
> 赞同：5
> 
> 时间：2012-08-25T17:06:15.113
> 
> 标签：jquery, iframe, drop-down-menu, twitter-bootstrap, bootswatch

哦，伙计，我一直在为此扯头发。4小时的下拉菜单。

我正在使用 Twitter 引导程序。

顶部的固定导航有一个下拉菜单，非常标准。

除了下拉菜单没有正常关闭。它只会在按下切换本身时切换打开和关闭，而不是在按下菜单中的项目或用户在菜单外单击时（这两者都应该关闭下拉菜单）。

我做的唯一非标准的事情是我使用 iframe 和 bootswatch 的主题。

我以前没有遇到过这样的问题，所以我觉得这可能是一个错误（今天将引导程序升级到 2.1.0，将 jquery 升级到 1.7.2）。

这里的所有代码：

```
 <!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>test</title>
        <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
        <!--[if lt IE 9]> <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script> <![endif]-->
        <!-- Le styles -->
        <link href="./css/bootstrap.css" rel="stylesheet">
        <style>
            iframe {
                border: 0px;
                height: 95%;
                left: 0px;
                position: absolute;
                top: 50px;
                width: 100%;
            }
        </style>
    </head>
    <body>
        <div class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <a class="brand" target="mainframe" href="./home.html">
                       Brand
                    </a>
                    <ul class="nav">
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" role="button" data-toggle="dropdown">
                                <i class="icon-pencil icon-white"></i>
                                Sample
                                <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>
                                    <a target="mainframe" href="./home.html#">One</a>
                                </li>
                                <li>
                                    <a target="mainframe" href="./home.html#">Two</a>
                                </li>
                                <li>
                                    <a target="mainframe" href="./home.html#">Three</a>
                                </li>
                                <li>
                                    <a target="_blank" href="#">Four
                                        <i class="icon-share-alt"></i>
                                    </a>
                                </li>
                                <li>
                                    <a target="_blank" href="#">Five
                                        <i class="icon-share-alt"></i>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a href="#">
                                <i class="icon-certificate icon-white"></i>Stuff</a></li>
                        <li>
                            <a href="#">
                                <i class="icon-globe icon-white"></i>Things</a></li>
                        <li>
                            <a target="mainframe" href="./home.html">
                                <i class="icon-film icon-white"></i>Nothing</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="container">
            <iframe id="frame" name="mainframe" src="./home.html"></iframe>
            <!-- /container -->
        </div>
        <!-- Le javascript==================================================-->
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

        <script src="./js/bootstrap.js"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                $('.dropdown-toggle').dropdown();
                var frameheight = window.innerHeight - 50;
                document.getElementById("frame").style.height = frameheight + "px";
            });

            $(window).resize(function () {
                var frameheight = window.innerHeight - 50;
                document.getElementById("frame").style.height = frameheight + "px";
            });
        </script>
    </body>
</html> 
```

住在这里： [http ://www.joshlevent.com/dropdownbug/](http://www.joshlevent.com/dropdownbug/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T19:01:30.710

默认情况下，iframe 不会将点击事件传播到其父级。您需要手动添加代码来执行此操作。除了能够编辑您正在加载的 iframe 的内容之外，跨域限制将要求您从与页面相同的域加载 iframe 内容。

这需要从 iframe 页面中*运行*：

```
$('html').on('click', function () {
  parent.$('#frame').trigger('click');
}); 
```

`#frame`你的 iframe 的 id在哪里。您可以将单击委托给父级中的任何内容（例如，`'body'`），这也可以。取决于您希望将 iframe 中的内容与页面耦合的紧密程度。

所以，这应该照顾关闭菜单的页面。

## 重要更新

至于单击菜单项关闭菜单，显然在最新更新（2.0.4 > 2.1.0）中有一个错误[？]：[Dropdown menus don't get closed when selection an option](https://github.com/twitter/bootstrap/issues/4497)。选择器从 更改`'.dropdown form'`为`'.dropdown'`，所以现在曾经是使表单中的下拉菜单更容易使用的著名功能已经演变成一个回调，可以阻止对下拉菜单项的所有点击。

临时解决方案是包含以下代码，直到修复错误（2.1.1）：

```
$('body')
  .off('click.dropdown touchstart.dropdown.data-api', '.dropdown')
  .on('click.dropdown touchstart.dropdown.data-api'
    , '.dropdown form'
    , function (e) { e.stopPropagation() }) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-11T12:38:28.443

没有什么对我有用，除了这个：

```
$('.dropdown-menu li a').on('click', function(e) {
    $('.dropdown-toggle').dropdown('toggle');
    e.stopPropagation();
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T18:37:01.003

我在 2.1.1 中看到了同样的问题。

发布在 GitHub 上对我来说很容易工作的解决方案是：

`$('body').on('touchstart.dropdown', '.dropdown-menu', function (e) { e.stopPropagation(); });`

[归功于https://github.com/twitter/bootstrap/issues/5094](https://github.com/twitter/bootstrap/issues/5094)上的 blakeembrey

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-26T00:53:28.657

这是我根据 merv 的出色回答实施的完整解决方案。如果有更好的方法让我为将来的人发布解决方案，请告诉我。

这个 jquery 被添加到框架中页面的 html 底部：

```
$('html').on('click', function () {
  parent.$('#frame').trigger('click');
}); 
```

下拉菜单被切换到一个按钮并重新设计以适应导航栏。在 html 中：

```
 <li class="btn-group" id="samplebtn">
                    <a href="#" class="btn btn-primary dropdown-toggle" role="button" data-toggle="dropdown">
                        <i class="icon-pencil icon-white"></i>
                        Sample
                        <b class="caret"></b>
                    </a> 
```

在 CSS 中：

```
 #samplebtn {
        position:absolute;
        top: 0;
        margin: 0px;
        padding: 0px;
        border: 0px;
        }
        #samplebtn .btn {
            border: 0px;
        } 
```

解决方案的完整代码（更新问题中的完整代码 - 这只是外部框架）：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>test</title>
        <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
        <!--[if lt IE 9]> <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script> <![endif]-->
        <!-- Le styles -->
        <link href="./css/bootstrap.css" rel="stylesheet">
        <style>
            iframe {
                border: 0px;
                height: 95%;
                left: 0px;
                position: absolute;
                top: 50px;
                width: 100%;
            }
            #samplebtn {
            position:absolute;
            top: 0;
            margin: 0px;
            padding: 0px;
            border: 0px;
            }
            #samplebtn .btn {
                border: 0px;
            }
        </style>
    </head>
    <body>
        <div class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <a class="brand" target="mainframe" href="./home.html">
                       Brand
                    </a>
                    <ul class="nav">

                        <li class="btn-group" id="samplebtn">
                            <a href="#" class="btn btn-primary dropdown-toggle" role="button" data-toggle="dropdown">
                                <i class="icon-pencil icon-white"></i>
                                Sample
                                <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu" role="menu">
                                <li>
                                    <a target="mainframe" href="./home.html#">One</a>
                                </li>
                                <li>
                                    <a target="mainframe" href="./home.html#">Two</a>
                                </li>
                                <li>
                                    <a target="mainframe" href="./home.html#">Three</a>
                                </li>
                                <li>
                                    <a target="_blank" href="#">Four
                                        <i class="icon-share-alt"></i>
                                    </a>
                                </li>
                                <li>
                                    <a target="_blank" href="#">Five
                                        <i class="icon-share-alt"></i>
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li>
                            <a href="#">
                                <i class="icon-certificate icon-white"></i>Stuff</a></li>
                        <li>
                            <a href="#">
                                <i class="icon-globe icon-white"></i>Things</a></li>
                        <li>
                            <a target="mainframe" href="./home.html">
                                <i class="icon-film icon-white"></i>Nothing</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="container">
            <iframe id="frame" name="mainframe" src="./home.html"></iframe>
            <!-- /container -->
        </div>
        <!-- Le javascript==================================================-->
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

        <script src="./js/bootstrap.js"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                $('.dropdown-toggle').dropdown();
                var frameheight = window.innerHeight - 50;
                document.getElementById("frame").style.height = frameheight + "px";
            });

            $(window).resize(function () {
                var frameheight = window.innerHeight - 50;
                document.getElementById("frame").style.height = frameheight + "px";
            });

            $('.dropdown-menu').on('click', function () {
              $('.dropdown-toggle').dropdown();
            });
        </script>
    </body>
</html> 
```

为了完整参考，这是框架内页面的代码：

```
<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <title>Title</title>

        <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <!-- Le styles -->
        <link href="./bootstrap.min.css" rel="stylesheet">
        <style>

        </style>
    </head>

    <body onload="scrollTo(0,0); $('#loading').css('display','none');">
        <div id="loading" style="width: 100%; height: 100%; background-color: white; background-image:url('loader.gif'); background-repeat:no-repeat; background-position: center center; position:fixed; display: none; z-index:100;"></div>
        <script type="text/javascript">
            document.getElementById("loading").style.display = 'block';
        </script>

        <div class="container">
        <div class="span12">
                    <h2>Project Description</h2>
                    <p>Lorem Ipsum Dolor Sit Amet</p>

                </div>

            <!-- /container -->
        </div>
        <!-- Le javascript==================================================-->

        <script src="./jquery.js"></script>
        <script src="./bootstrap.min.js"></script>
<!--        <script src="./bootstrap-dropdown.js"></script>
-->
<script>
$('html').on('click', function () {
  parent.$('#frame').trigger('click');
});

</script>

    </body>

</html> 
```

修复了您可以预览的测试站点（但不要复制整个页面代码，因为其中包含一些服务器端（cloudflare）内容）。 [http://www.joshlevent.com/dropdownbug/](http://www.joshlevent.com/dropdownbug/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-30T11:00:37.743

该错误现已修复，您可以使用[https://github.com/twitter/bootstrap/blob/2.1.1-wip/js/bootstrap-dropdown.js](https://github.com/twitter/bootstrap/blob/2.1.1-wip/js/bootstrap-dropdown.js)，下拉列表的 2.1.1-wip

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-05T18:44:23.257

当单击另一个时，您可以从下拉菜单中删除“打开”类。到目前为止，这对我有用：

```
$(document).ready(function () {
    $('a.dropdown-toggle').each(function(){
        $(this).on("click", function () {
            $('li.dropdown').each(function () {
                $(this).removeClass('open');
            });
        });
    });
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-14T16:07:12.093

我对导航菜单中多个下拉菜单的修复：其他解决方案对我不起作用

```
$('.dropdown-toggle').on('click', function (e) {
      $('.dropdown-toggle').each(function (i,elem) {
          if (elem != e.target) $(elem.parentElement).removeClass('open');
      });
}) 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-05-17T10:20:04.193

您还可以使用此代码从父页面添加传播点击事件（为我修复了相同的问题）：

```
var myFrameContents = document.getElementById("frame").contentWindow.document;
myFrameContents.body.addEventListener("click", function() {
    document.body.click();
}); 
```

# javascript - 报告文档范围的 Javascript 错误

> ID：12123991
> 
> 赞同：8
> 
> 时间：2012-08-25T17:06:27.993
> 
> 标签：javascript

我需要一种方法来记录文档中可能发生的所有 Javascript 错误。显然，对日志记录脚本的 Ajax 调用是没有问题的，但是 window.onerror 事件不会因为函数内部的错误或在浏览器或 Web 开发人员工具栏会报告错误的某些其他情况下触发。

我宁愿不使用 try/catch，因为很多地方都有很多代码，我想要一个能够报告所有 Javascript 错误的文档范围的解决方案。

这甚至可能吗？我看到很多有 Javascript 错误的知名网站，显然很多开发人员要么不关心，要么不知道这些错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:16:59.840

首先，对不起，如果我误解了您的问题和您的资格。

似乎您对 DeveloperTools 不熟悉，您最好是这样：) 例如，在 Chrome 中，您可以通过按 F12 或 Ctrl+Shift+J 打开 DeveloperTools。您之前和即将发生的所有 JavaScript 错误都将在发生时显示在“控制台”选项卡中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T10:48:48.773

实际上可以进行**一些**自动的 try-catch 插入，以一种不需要更改代码的方式。这并不容易。

您可以尝试我的项目 Muscula，该项目使用 try-catch 插入[记录 JavaScript 错误](http://muscula.com)，并在不可能时返回 onerror。