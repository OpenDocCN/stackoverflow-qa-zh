# StackOverflow 问答 10186000-10186999

# c# - 根据.Ical文件的时区设置开始和结束时间？

> ID：10186003
> 
> 赞同：0
> 
> 时间：2012-04-17T06:06:58.027
> 
> 标签：c#, icalendar

我正在使用 C# 代码生成 .ics 文件以将我的事件添加到 Outlook 日历。

.ics 文件使用以下代码生成良好。但是我这里有一个问题是根据时区设置开始/结束时间。例如，我有 .ics 文件的新加坡标准时间开始/结束时间。我希望如果有人在新加坡打开文件，那么它应该显示新加坡时间，如果有人在印度打开它，那么它应该显示印度时间。就像 2012-04-20 13:00 这次在印度将是上午 10:30 因此，如果 .ics 文件在印度打开，.ics 文件将显示 10:30 作为开始时间。

我希望开始和结束时间应该根据系统的时区。那么下面的代码有什么问题，它不起作用。

请帮忙。

代码：

```
DateTime StartTime = DateTime.Parse("2012-04-20 13:00:00.000Z");//Singapore Standard Time
DateTime EndTime = DateTime.Parse("2012-04-20 14:00:00.000Z");//Singapore Standard Time
bool UseAlarm = true;
                    StringBuilder sb = new StringBuilder(450);
                    sb.Append("BEGIN:VCALENDAR\n");
                    sb.Append("BEGIN:VEVENT\n\n");
                    sb.Append("DTSTART:");
                    sb.Append(StartTime.ToString("yyyyMMdd\\THHmmss\\Z"));
                    sb.Append("\nDTEND:");
                    sb.Append(EndTime.ToString("yyyyMMdd\\THHmmss\\Z"));
                    sb.Append("\nLOCATION:");
                    sb.Append("Location"); 
                    sb.Append("\nCATEGORIES:");
                    sb.Append(string.Empty);
                    sb.Append("\nTRANSP:OPAQUE\n");
                    sb.Append("SEQUENCE:0\n");
                    sb.AppendFormat("UID:RFCALITEM{0}\n", DateTime.Now.Ticks); 
                    sb.Append("DTSTAMP:");
                    sb.Append(StartTime.ToString("yyyyMMdd\\THHmmss\\Z"));
                    sb.Append("\nX-ALT-DESC;FMTTYPE=text/html:");//
                    sb.Append("This is just for testing."); 
                    sb.Append("\nSUMMARY:");
                    sb.Append("Title:Test ICS File"); 
                    sb.Append("\n\nPRIORITY:");
                    sb.Append(5);
                    sb.Append("\nCLASS:PUBLIC\n");
                    if (UseAlarm)
                    {
                        sb.Append("BEGIN:VALARM\n");
                        sb.Append("TRIGGER:PT15M\n");
                        sb.Append("ACTION:DISPLAY\n");
                        sb.Append("DESCRIPTION:Reminder\n");
                        sb.Append("PRIORITY:5\n");
                        sb.Append("END:VALARM\n");
                    }
                    sb.Append("END:VEVENT\n"); 
                    sb.Append("END:VCALENDAR"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T06:16:29.577

我不想把我的生命押在 Outlook 将如何处理 iCal 数据上，所以这一切都不能保证......但是，您的代码中有一些误解：

```
//Singapore Standard Time
DateTime StartTime = DateTime.Parse("2012-04-20 13:00:00.000Z"); 
```

这里的“Z”表示“祖鲁时间”——因此`DateTime.Parse`将其解释为 UTC 值，然后将其转换为运行代码的系统上的本地时间。所以在我的机器上，例如（在英国时间，即 2012 年 4 月 20 日的 UTC+1）这会创建`DateTime`一个时间为 14:00 的值。

如果您希望将该值解析为*本地*日期/时间，则不应在此处使用“Z”。

当您*编写*值时，您可以（IIRC - 自从我完成任何 iCal 工作以来已经有一段时间了）表达日期/时间的三种方式之一：

*   通过包含“Z”作为 UTC 值（正如您当前所做的*错误*- 您将 Z 包含在*本地*值的末尾），从而使事情变得混乱
*   作为没有指定时区的一般“本地”日期/时间，例如“无论我在哪里，早上 8 点叫醒我”
*   作为*特定*时区的日期/时间

（有关每种类型的格式的详细信息，请参阅[RFC 2445。 ）](http://www.ietf.org/rfc/rfc2445.txt)

目前尚不清楚您想要哪一个 - 第一个可能是最简单的，但您需要使用*UTC*日期/时间，而不是本地日期/时间。

一点：.NET 在这里并没有真正帮助您，因为它与 .NET 混淆了`DateTime`。您可能希望考虑使用我的[Noda Time](http://noda-time.googlecode.com)项目，该项目将“本地日期/时间”和“特定区域中的日期/时间”分开。

# c++ - 在客户端编译本机 COM 客户端存根，使用 VS2010

> ID：10186006
> 
> 赞同：7
> 
> 时间：2012-04-17T06:07:05.267
> 
> 标签：c++, visual-studio-2010, com

我是 COM 编程的新手，并且从 Visual Studio 2010 创建了一个基本的本机 COM 服务器/客户端对。客户端和服务器项目都存在于同一个解决方案中。我想知道最合适的方法是将生成的客户端存根和头文件包含在客户端项目中。我在我的服务器项目中创建了 MIDL，当我编译项目时，在我的项目源目录中生成了 _h.h、_i.c 和 _p.c 文件。

*   我需要在我的客户端项目中编译这两个 .c 文件吗？
*   通过将它们作为链接文件从服务器项目的源目录添加到客户端项目中，在客户端项目中编译它们的最佳方法是什么？
*   有没有办法让 Visual Studio 在我修改 MIDL 时知道 _h.h、_i.c 和 _p.c 文件已过期，或者我是否需要记住在我触摸时重新编译服务器项目米德尔？
*   .h 文件的最佳存放位置在哪里？它可以存放在服务器项目的 stdafx.h 文件中吗？如果是这样，将服务器项目的源目录添加到客户端项目的标头包含目录中是否合适？
*   客户端项目是否应该对服务器项目有一个“参考”（在 Visual Studio 参考意义上）？

另外 - 我想让这个注册免费。在这种情况下，除了为我的客​​户端和服务器提供清单之外，我还需要做些什么吗？

..

*编辑*

看看这里的 MSDN 文章：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa366830](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366830(v=vs.85).aspx) (v=vs.85).aspx ，如果我只想为了支持进程内免注册激活，我只需要编译 _i.c 并将 _h.h 文件包含在我的客户端程序中。

dlldata.c 和 _p.c 似乎用于创建代理 DLL，该代理 DLL 支持在远程计算机上注册（用于远程计算机激活？或者本地计算机，在 proc 之外？如果本地计算机需要，out proc，既然注册了COM服务器的dll，为什么需要它？COM服务器DLL与代理DLL不同，是吗？）

非常感谢，

——马特

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T06:42:38.003

生成的 _p.c 和 dlldata.c 必须编译到单独的项目中才能构建代理/存根 DLL。您并不总是需要一个，只有在您跨单元或进程编组呼叫时才需要。

生成的 _i.c 文件提供 GUID 值。将其编译到服务器和代理/存根中。将它编译到客户端是可以的，但使用 __uuidof 关键字是最简单的。

生成的 _i.h 文件包含接口和 coclass 声明。您需要将其#include 到服务器和客户端中。

当您更改 .idl 时，Midl.exe 应该会自动重新生成这些文件。这反过来又确保了客户端、服务器和代理/存根得到重建。

stdafx.h 很好，在包含目录中是的。

“引用”上没有，客户端和服务器没有链接依赖。

您必须为 reg-free com 编写清单并将其嵌入到客户端中。

# php - ajax：responsetext 在本地返回我的整个 php 代码

> ID：10186009
> 
> 赞同：2
> 
> 时间：2012-04-17T06:07:12.183
> 
> 标签：php, javascript, ajax, response

我找到了一个很好的教程：[教程](http://www.webmasterpro.de/coding/article/einfuehrung-ajax.html)

但它在本地不起作用。问题是，responsetext 返回我的整个 php 代码。我双击我的 ajaxclock.html 并使用 Firefox。令人惊讶的是，它可以在服务器上运行。

这里的代码：ajaxclock.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>AJAX Tutorial</title>
</head>
<body>
    <div id="time"></div>
    <button onclick="getTime();">Aktualisieren</button>
    <script type="text/javascript" src="script.js"></script>
</body>
</html> 
```

脚本.js

```
var req = getXmlHttpRequestObject();
window.onload = getTime();

function getXmlHttpRequestObject()
{
    if(window.XMLHttpRequest) 
    {
         return new XMLHttpRequest();
    } 
    else if(window.ActiveXObject) 
    {
        return new ActiveXObject("Microsoft.XMLHTTP");
    } 
    else 
    {
        alert('Ajax funktioniert bei Ihnen nicht!');
    }
}

function getTime()
{
    if(req.readyState == 4 || req.readyState == 0) 
    {
        req.open('GET', 'ajaxclock.php', true);
        req.setRequestHeader("Content-Type","text/plain");
        req.onreadystatechange = setMessage;
        req.send(null);
    }
}

function setMessage()
{
    if(req.readyState == 4) 
    {
        var response = eval('(' + req.responseText+ ')');
        document.getElementById('time').innerHTML = response.time;
    }
} 
```

ajaxclock.php

```
<?php echo '{"time": "'.date("H:i:s").'"}'; ?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T06:10:41.603

> 令人惊讶的是，它可以在服务器上运行。

PHP 是一种服务器端技术。它只能在服务器上工作（特别是配置为运行 PHP 程序的服务器）。

如果你在没有这样的服务器的情况下使用它，那么什么都不会执行 PHP，它会以其原始状态传递给浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-26T18:10:38.960

我有同样的问题。直到我意识到 Firefox (97.0.1 (64-Bit)) 中的 LiveServer 插件没有执行 php 文件时才找到任何原因。不管什么原因。我使用 XAMPP（v.3.2.4）并通过以下方式尝试了“旧”方式：*localhost/project/index.php*，它再次对我来说很好。

# regex - 为 html 文件中的所有媒体链接添加前缀

> ID：10186014
> 
> 赞同：2
> 
> 时间：2012-04-17T06:07:56.430
> 
> 标签：regex, bash, unix, sed

我正在尝试在 HTML 文件中的所有图像之前插入绝对路径，如下所示：

```
<img src="/media/some_path/some_image.png"> to <img src="{ABS_PATH}/some_path/some_image.png"> 
```

我尝试了以下正则表达式来识别这些行：

```
egrep '(src|href)="/media([^"]*)"' 
```

我想使用 sed 进行这些更改，但是上面的正则表达式不起作用，有什么提示吗？

```
 sed 's#(src|href)="/media([^"]*)"##g' 
```

sed: -e 表达式 #1, char 32: `s' 的未知选项

编辑：好的，现在我有：

```
echo 'src="/media/some_image.png"' | "egrep -o '(src|href)="/media([^"]*)"' | sed 's/(src|href)=\"\/media([^"]*)\"//g' 
```

sed 应该匹配字符串，但它不匹配

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T06:12:53.243

1.  sed 不理解 ERE（扩展正则表达式），只理解 BRE（基本正则表达式）。GNU sed 具有打开 ERE 的“-r”选项。

2.  您应该更改正则表达式的分隔符，因为您在正则表达式中有斜杠，如下所示：

    ```
    sed -r 's#(src|href)="/media([^"]*)"##g' 
    ```

您几乎可以使用任何标点符号作为分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T06:12:07.183

`/`如果将 sed 用作模式的分隔符，则必须在 sed 中转义。

所以：

```
sed 's/(src|href)="/media([^"]*)"//g' 
```

变成：

```
sed 's/(src|href)="\/media([^"]*)"//g' 
```

也许令人困惑的是 egrep（使用扩展的正则表达式）与 sed 和 vanilla grep（使用基本的正则表达式）有不同的规则，当涉及到必须转义的内容时。

# c# - 你如何使用 Facebook 用户对象来获取你自己的用户对象？

> ID：10186016
> 
> 赞同：1
> 
> 时间：2012-04-17T06:08:09.007
> 
> 标签：c#, facebook

我正在使用 Facebook Connect 做一些工作，并想知道如何在 Stack Overflow 上，例如，您可以使用 Facebook 或 Yahoo 等其他登录提供商登录，并且该网站能够在您注册时获取您的用户详细信息在堆栈溢出？据我所知，您可以使用不同的电子邮件地址进行注册，并且您的名字和姓氏不是唯一标识符，那么它是如何完成的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:01:33.063

这完全取决于您的用例。例如，我使用电子邮件地址作为唯一标识符。当您使用 Facebook 登录时，我的门户网站还会从 Facebook 询问您的电子邮件地址。然后，它从数据库中搜索具有匹配电子邮件地址的用户对象。

有不止一种方法可以做到这一点：

*   只允许通过 Facebook 登录。然后，您绝对可以通过他们的电子邮件地址识别所有用户。
*   也允许通过 Facebook 和用户名/密码登录，但要求您的用户在两个地方使用相同的电子邮件地址。
*   也允许通过 Facebook 和用户名/密码登录，并允许您的用户为每个用户使用不同的电子邮件地址。这是最复杂的选项。大多数网站通过要求用户将他们的 Facebook 帐户与他们的网站帐户“配对”来解决这个问题。这意味着第一次设置时，用户需要登录网站，当他们登录网站时，他们可以登录 Facebook。然后您的站点存储他们的 Facebook 身份（在这种情况下不需要电子邮件，只需将用户 ID 存储在一个字段中）。之后，用户只能通过 Facebook 登录，您可以将他们的 Facebook 用户 ID 与您自己数据库中的相应用户对象配对。

如果您有任何问题，只需将它们写在评论中。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T06:55:57.593

您很可能会在您的用户表中添加一个新列，例如 facebook_uid。然后，如果用户有一个现有帐户，您可以让他们先登录，然后再连接到 facebook，然后您可以将他们的 facebook_uid 存储在您现有的 user_id 中。然后，如果用户出现并且已经登录到 Facebook，您也可以将他们登录到您的网站。如果用户在您的网站上没有现有帐户，您只需创建一个（可能使用来自 facebook 的用户名填写）

如果您想允许多种登录方法，您可能有另一个表，其中包含提供者（facebook、twitter、google 等）和该帐户的关联 ID 之间的映射回您的用户表。

基础是，当他们使用 3rd 方登录系统登录时，您要么将其映射到您网站上的当前帐户，要么在您的网站上创建新帐户（如果尚不存在），然后将该帐户映射到该帐户。您显然需要向您的用户说明这一点，或者有一些方法来合并帐户，以防他们在使用第 3 方时尚未登录。在创建新帐户之前，您还可能会要求从 facebook 访问电子邮件并尝试将其映射到现有帐户

谢谢

# jquery - Jquery ajax提交表单而不指定数据

> ID：10186018
> 
> 赞同：0
> 
> 时间：2012-04-17T06:08:19.357
> 
> 标签：jquery, ajax

是否可以使用 jquery 提交表单而无需明确设置数据。

IE。我有以下表格

```
<% using (Html.BeginForm("Search", "DrawingWindow", FormMethod.Get, new {id="DrawingSearch"}))
   { %>
    <div>
        <%: Html.LabelFor( m=> m.DrawingNumberName, new {@class="dark_blue"}) %>
    </div>
    <div>
        <%: Html.TextBoxFor(m=> m.DrawingNumberName)%>
        <%: Html.Submit("Search") %>
    </div>
<% } %> 
```

我想做如下的事情：

```
 $('#drawingSearch').submit(function (e) {
            e.preventDefault();

            $ajax({
                url: '<%:Url.Action("Search", "PID") %>',
                type: 'GET',
            })
    }); 
```

现在，由于我没有在这里指定任何数据，我认为我不会在 ajax 请求中发送文本框，有没有办法将其包含在内，而不必给文本框一个 id 并制作一个数据对象作为请求的一部分发送？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T06:33:24.123

您可以将其放在表单标签中，并使用 jquery 序列化功能。

```
$('#drawingSearch').submit(function (e) {
    e.preventDefault();

    var data = $('#myForm').serialize();

    $ajax({
        url: '<%:Url.Action("Search", "PID") %>',
        data: data,
        type: 'GET',
    })
}); 
```

通过这种方式，您可以在表单中放置任意数量的输入字段，而不必更改 javascript/jQuery 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T06:41:15.697

或者可以在`$('textarea').val()`不设置`id`文本框的情况下获取值

```
$ajax({
        url: '<%:Url.Action("Search", "PID") %>',
        data: 'textVal='+$('textarea').val(),
        type: 'GET',
    }) 
```

# zend-framework - 如何在路由器 On zend 中构造 GET 参数

> ID：10186023
> 
> 赞同：1
> 
> 时间：2012-04-17T06:09:08.787
> 
> 标签：zend-framework, url

我是 Zend Frame 工作的新手，任何人都可以帮助在路由器下面进行收缩，

[http://hostname/recruiter/index/login?height=360&width=800&random=1334642212073](http://hostname/recruiter/index/login?height=360&width=800&random=1334642212073)

作为 [http://hostname/login](http://hostname/login)

其他值必须通过路由器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:30:18.937

这是您的 Bootstrap.php 的外观：

```
<?php
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{

    /**
     * Define the URL routes here
     */
    public function _initRoutes()
    {
        // Get the router object
        $router = Zend_Controller_Front::getInstance()->getRouter();

        $routeLogin = new Zend_Controller_Router_Route(
                        'login',
                        array(
                            'controller' => 'index',
                            'action' => 'login',
                        )
        );

        $router->addRoute('login', $routeLogin);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T13:01:27.763

maSnun 之前提供的代码就是一个很好的例子。

您可以通过将默认参数添加到路由定义来指定它们。

```
 $routeLogin = new Zend_Controller_Router_Route(
                    'login',
                    array(
                        'controller' => 'index',
                        'action' => 'login',
                        'height' => 360,
                        'width' => 800,
                    )
        ); 
```

然后，您可以像往常一样使用 getParam() 获取高度和宽度。

# java - Android：无法阻止地图工作

> ID：10186024
> 
> 赞同：0
> 
> 时间：2012-04-17T06:09:12.857
> 
> 标签：java, android, google-maps

我想使用的活动：

```
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
public class BankoTinklasMap extends MapActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.banko_tinklas_map);

    MapView map = (MapView) findViewById(R.id.map);
    map.setBuiltInZoomControls(true);
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}
} 
```

我在清单中添加了活动：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="lt.balticamadeus.babank"
android:versionCode="1"
android:versionName="1.0" >
<uses-library android:name="com.google.android.maps" />
<uses-permission android:name="android.permission.INTERNET" />

<uses-sdk android:minSdkVersion="4" 
    android:targetSdkVersion="10"/>
<application

    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.Light.NoTitleBar">
    <!-- other activities goes here. They work fine -->
    <activity
        android:name="BankoTinklasMap"
        android:screenOrientation="portrait" >
    </activity>
</application>
</manifest> 
```

xml 布局文件看起来像在 android 教程中：

```
<?xml version="1.0" encoding="utf-8"?>
<com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:apiKey="My_Real_api_key_but_i_dont_show_you"
/> 
```

地图库存在，因为目标是 Google API。所以eclipse和编译没有显示任何问题。问题是我在运行时尝试启动 Activity 时收到此错误：

```
 04-17 08:51:07.637: E/AndroidRuntime(25080): java.lang.NoClassDefFoundError: lt.balticamadeus.babank.BankoTinklasMap 
```

所以问题是：我错过了什么，所以我可以正确地启动这个活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T06:22:08.717

进行以下更改

```
<activity
    android:name="your package name.BankoTinklasMap"
    android:screenOrientation="portrait" >
</activity> 
```

并在您的应用程序标签内放入以下行

```
<uses-library android:name="com.google.android.maps" /> 
```

让我知道它是否仍然无法正常工作............

# git - 如何桥接到远程 git

> ID：10186025
> 
> 赞同：1
> 
> 时间：2012-04-17T06:09:17.440
> 
> 标签：git, cordova, bitbucket

我是 Git 新手，并试图在 BitBucket 和 PhoneGapBuild 之间架起一座桥梁。我认为这样做的方法是从 BitBucket 结帐，然后推送到 PhoneGapBuild。问题是我无法让它发挥作用。

什么是创建从一个 git 到另一个 git 的单向推送的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T18:14:36.457

[我认为可以使用基本的 http 身份验证](http://www.mattgifford.co.uk/using-private-bitbucket-repositories-with-phonegap-build)直接将 PhoneGap Build 与 Bitbucket 私有仓库链接：

```
https://my_bitbucket_user:my_bitbucket_password@bitbucket.org/my_bitbucket_user/test-private-repo.git 
```

尝试在 PhoneGap Build 应用设置的“私人代码”选项卡中添加此 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:10:17.450

我认为您不能*直接*在 BitBucket 和 PhoneGapBuild 私有 Git 存储库之间推送。

我仍然会推荐：

*   在本地克隆您的 BitBucket Git 存储库
*   将远程地址添加到您的 PhoneGapBuild Git 存储库（遵循[Git Hosting 文档](https://build.phonegap.com/docs/git-hosting)）：
    `git remote add PhoneGapBuild`
*   `git push PhoneGapBuild master`

# php - 将上传的文件转换为 jar 或 rpm 文件

> ID：10186026
> 
> 赞同：0
> 
> 时间：2012-04-17T06:09:20.157
> 
> 标签：php

我需要上传几个文件并将其作为包存储在 php.ini 中。

在存储包时，它必须以 .jar 或 .rpm 格式作为输出。

有没有办法将包文件即时转换为 .jar 或 .rpm 或需要处理系统命令。这个操作系统是否依赖。

任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:28:05.750

.jar 文件基本上是一个 zip 存档，因此在 php 中生成一个 .jar 文件应该没有问题。

# c# - 将 DownloadDataAsync 与可识别 Cookie 的 Webclient 一起使用以获取更新进度

> ID：10186036
> 
> 赞同：0
> 
> 时间：2012-04-17T06:10:15.367
> 
> 标签：c#, winforms

我正在使用带有 CookieContainer 的 Webclient 从 Web 服务（Sharepoint）下载数据。

我想 DownloadDataAsync 以便下载多个文档并在每个文档下载时更新一个进度条。非异步版本 - DownloadData 不发送进度更新。

1.  在继续下一个文档之前，如何让异步版本在 doc.BinaryData = xx 行等待？
2.  如何从 DownloadFileCompleted 事件中获取字节数组？
3.  如何在不使用 DoEvents 的情况下将更改应用到进度条？

    部分类 Form() { void Main() { List urls= new List(); //urls.Add("xxxxxxx"); //从某个地方获取它们

    ```
     for (int i = 0; i < urls.Count; i++)
        {
            var doc = new Document();
            doc.BinaryData = DocumentAsArray(urls.ElementAt(i));
            entities.AddToDocument(doc);
        }
    }

    public byte[] DocumentAsArray(string URL)
    {
        byte[] @return = null;
        using (CookieAwareWebClient client = new CookieAwareWebClient())
        {
            client.CookieContainer = spAuthentication.CookieContainer;

            // Assign the events to capture the progress percentage
            client.DownloadFileCompleted += new AsyncCompletedEventHandler(client_DownloadFileCompleted);
            client.DownloadProgressChanged += new DownloadProgressChangedEventHandler(client_DownloadProgressChanged);

            client.DownloadDataAsync(new Uri(URL));
        }

        return @return;
    }

    void client_DownloadProgressChanged(object sender, DownloadProgressChangedEventArgs e)
    {
        progressBarControlFile.Position = e.ProgressPercentage;
        var newPc = string.Format("Downloaded {0} %", e.ProgressPercentage);

        labelControlFile.Text = newPc;
        Application.DoEvents();
    }

    void client_DownloadFileCompleted(object sender, AsyncCompletedEventArgs e)
    {
        progressBarControlFile.Position = progressBarControlFile.Properties.Maximum;
        labelControlFile.Text = string.Format("{0} %", progressBarControlFile.Properties.Maximum);

        Application.DoEvents();
    } 
    ```

    }

    公共类 CookieAwareWebClient ： WebClient { 公共 CookieContainer CookieContainer { 获取；放; }

    ```
    protected override WebRequest GetWebRequest(Uri address)
    {
        WebRequest request = base.GetWebRequest(address);

        var webRequest = request as HttpWebRequest;
        if (webRequest != null)
        {
            webRequest.CookieContainer = this.CookieContainer;
            webRequest.KeepAlive = false;
        }

        return request;
    } 
    ```

    } }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:42:24.480

1.  您必须等待 DownloadFileCompleted 事件。您可以设置一个 volatile bool 来进行轮询，也可以对事件执行此操作。在性能方面只有微小的差异，但通常事件可能是更清洁的解决方案（我更喜欢布尔轮询）。在您的情况下，您可能实际上希望在 DocumentAsArray 的末尾等待这种情况发生。
2.  [http://msdn.microsoft.com/en-us/library/ms144190.aspx](http://msdn.microsoft.com/en-us/library/ms144190.aspx)下载的数据在 Result 属性中可用。
3.  我不知道 DoEvents 方法 - 如果我正确理解你想要做什么，你想更新你的 UI 吗？你必须调用 InvokeEx （至少这是我知道的最简单和唯一的方法）。看看这篇很棒的 :) 文章[http://www.andreas-reiff.de/2011/06/accessing-a-winformwpf-control-from-another-thread-through-invoke/](http://www.andreas-reiff.de/2011/06/accessing-a-winformwpf-control-from-another-thread-through-invoke/)。或者，留在 stackoverflow 并查看[调用任何跨线程代码的最佳方法？](https://stackoverflow.com/questions/711408/best-way-to-invoke-any-cross-threaded-code).

回顾一下，如果您只是希望异步获取进度更新，只需更改您的 DocumentAsArray 函数以等待如 1 中所述的 DownloadFileCompleted 事件。然后您所要做的就是小心不要调用您的 UI来自另一个线程的代码 - 你应该在 Debug 中得到一个异常，告诉你不要这样做（它在 Release 中运行良好 - 大多数时候）。所以使用 InvokeEx 调用。

# php - 通过 php 从 css 显示项目

> ID：10186041
> 
> 赞同：0
> 
> 时间：2012-04-17T06:10:39.590
> 
> 标签：php, css, wordpress

我实际上正在制作一个皮肤菜单，例如我的 wordpress 皮肤上的输入/输出 => 在皮肤上显示选项，以使用户更容易使用它。但是，我一直试图让徽标出现，但一直失败......我已经将 CSS 与 PHP 合并以使其能够获取函数名称；但它不会在背景中显示图像。

这是名为 bg_image.php 的 css/php 文件。

```
<?php header("Content-type: text/css"); ?>

#logo_main{
    background:url('<?php echo get_settings('ld_header_img'); ?>') no-repeat;
} 
```

通过将其包含到标题中：

```
<link rel="stylesheet" type="text/css" href="./bg_image.php" /> 
```

当然，还有functions.php，它具有数组等，以便工作......

```
$themename = "LightD";
$shortname = "ld";

$options = array (

array( "name" => $themename." Options",
    "type" => "title"),

array( "name" => "Homepage",
    "type" => "section"),
array( "type" => "open"),

array( "name" => "Homepage header image",
    "desc" => "Enter the link to an image used for the homepage header.",
    "id" => $shortname."_header_img",
    "type" => "text",
    "std" => ""),

array( "type" => "close"),
array( "name" => "Footer",
    "type" => "section"),
array( "type" => "open"),

array( "name" => "Footer copyright text",
    "desc" => "Enter text used in the right side of the footer. It can be HTML",
    "id" => $shortname."_footer_text",
    "type" => "text",
    "std" => ""),

array( "type" => "close")

); 
```

**注意**完整的functions.php源代码/示例可以在下面的链接中找到；我查看了这个主题以获取此信息： http: [//net.tutsplus.com/tutorials/wordpress/how-to-create-a-better-wordpress-options-panel/](http://net.tutsplus.com/tutorials/wordpress/how-to-create-a-better-wordpress-options-panel/)

在哪里：

> name：输入字段的名称。
> 
> desc：向用户解释它是什么的简短描述。
> 
> id：字段的id，以shortname为前缀。它将用于存储和访问选项。
> 
> type：输入类型——选择、文本或文本区域
> 
> options：用于声明选择类型输入的选项数组。
> 
> std：默认输入值，在没有给出其他输入时使用。

这就是我的问题所在......我尝试在 中使用“样式”，它起作用了：

```
<div id="logo_main" style="background:url('<?php echo get_settings('ld_header_img'); ?>') no-repeat;">
<div id="branding">
<div id="blog-title"><?php if ( is_singular() ) {} else {echo '<h1>';} ?><a href="<?php echo /*home_url()*/"./home/" ?>/" title="<?php bloginfo( 'name' ) ?>" rel="home"><?php bloginfo( 'name' ) ?></a><?php if ( is_singular() ) {} else {echo '</h1>';} ?></div>
<p id="blog-description"><?php bloginfo( 'description' ) ?></p>
</div>
</div> 
```

我的问题是；为什么 CSSed PHP 不起作用？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:15:32.003

您的文件不知道使用的功能。您需要添加`include`声明。

```
<?php 
error_reporting(E_STRICT); 
ini_set('display_errors', 1);
include('path-to/functions.php');
header("Content-type: text/css"); 
?>

#logo_main{
    background:url('<?php echo get_settings('ld_header_img'); ?>') no-repeat;
} 
```

# iphone - 带有特殊字符的 NSPredicate 过滤

> ID：10186049
> 
> 赞同：1
> 
> 时间：2012-04-17T06:11:44.297
> 
> 标签：iphone, ios, cocoa-touch, cocoa, nspredicate

我正在使用下面的代码使用谓词过滤数组。

```
self.aPredicateString = [self.aPredicateString stringByAppendingString:[NSString stringWithFormat:@"%@ contains[cd] '%@'", self.selectedSearchParameter, self.searchString]];

NSLog(@"Predicate string %@",self.aPredicateString);
        self.aPredicate = [NSPredicate predicateWithFormat:self.aPredicateString]; 
```

如果用户输入其中一个`\`或`'`代码崩溃并出现错误。

我不明白错误是什么？不允许使用特殊字符，`NSPredicate`或者我应该以不同的方式格式化谓词。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T06:42:23.070

我想知道，为什么你使用所有这些`self.aPredicateString stringByAppendingString`，但我认为，你的谓词应该是这样的：

```
self.aPredicate = [NSPredicate predicateWithFormat:@"%@ contains[cd] %@", self.selectedSearchParameter, self.searchString]]; 
```

`''`周围没有`%@`

# c# - 如何在 C# 中使用 Gecko 检索整个 HTML 标签？

> ID：10186051
> 
> 赞同：0
> 
> 时间：2012-04-17T06:11:51.473
> 
> 标签：c#, gecko

问题的目的：

我需要向最终用户显示不正确的 HTML 标签。例如，拿标签。如果没有“alt”属性，我必须显示整个标签（

```
<img src="blahblah.jpg"/> 
```

）。

```
 My attempt:

    Skybound.Gecko.GeckoElementCollection elemcol=wbMain.Document.getElementsByTagName("img");
    foreach(Skybound.Gecko.GeckoElement elem in elemcol)
    {
//Just a basic check to see if the attribute exists
    if((elem.GetAttribute("alt").ToString())==null)
    {
    String content=elem.InnerHtml;
    return content;
    }
    } 
```

elem.InnerHtml 只返回一个空值。我需要获取整个标签..更像是 outerHTML.. 但是这里不支持 outerHTML 命令。我是 c# 的新手，我真的无法通过它。请帮帮我。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T11:48:03.300

`outerHTML`Gecko[从版本 11 开始](https://developer.mozilla.org/en/DOM/element.outerHTML)支持。Skybound 还支持这个版本吗？

# c++ - C++ 超出下标范围

> ID：10186059
> 
> 赞同：3
> 
> 时间：2012-04-17T06:12:28.493
> 
> 标签：c++, arrays, string, hex

我正在运行一个应该将字符串转换为十六进制的 C++ 程序。它编译但我在运行时出错说：

> 调试断言失败！（不好了！）
> 
> Visual Studio2010\include\xstring
> 
> 1440线
> 
> 表达式：字符串下标超出范围

而且我别无选择中止......它似乎将它转换为错误点，所以我不确定发生了什么。我的代码很简单：

```
#include <iostream>
#include <iomanip>
#include <string>
using namespace std;
int main()
{
    string hello = "Hello World";
    int i = 0;
    while(hello.length())
    {
        cout << setfill('0') << setw(2) << hex << (unsigned int)hello[i];
        i++;
    }

    return 0;
} 
```

这个程序应该做的是将每个字母转换为十六进制 - 逐个字符。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T06:14:50.763

您不会从字符串中删除任何内容，因此`length()`将始终返回转换为`true`.

改用 for 循环：

```
for(int i = 0; i < hello.length(); ++i)
{
    cout << setfill('0') << setw(2) << hex << (unsigned int)hello[i];
} 
```

或者更好的是，使用迭代器。

```
for(std::string::iterator it = hello.begin(); it != hello.end(); ++it)
{
    cout << setfill('0') << setw(2) << hex << *it;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T06:15:04.970

您的 while 条件不正确：

```
while(hello.length()) 
```

循环永远不会终止并`i`变大（超过字符串长度减一），当您访问该索引处的字符串时，您会获得运行时断言。

将其更改为：

```
while(i < hello.length()) 
```

或者更好地使用迭代器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-17T06:14:17.957

```
while(i < hello.length())
    {
        cout << setfill('0') << setw(2) << hex << (unsigned int)hello[i];
        i++;
    } 
```

你原来的循环永远不会结束。对于计数索引，我发现`for`循环语法更适合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T06:17:18.870

您缺少 while 循环中的条件。

```
 while(i < hello.length())
    {
        cout << setfill('0') << setw(2) << hex << (unsigned int)hello[i];
        ++i;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T06:17:25.753

我更喜欢在 for 循环中使用迭代器。

```
for (std::string::const_iterator it = hello.begin(); it != hello.end(); ++it) {
    // String processing
} 
```

或者，在 C++11 中：

```
for (char const c : hello) {
    // String processing
} 
```

一般来说，我更喜欢在 C++ 中尽可能使用迭代器来访问事物。这是一种更惯用的方式，它适用于所有类型的 STL 容器。例如，如果你想有一天使用`std::deque`or `std::list`，那么迭代器仍然可以工作。

在另一种风格上，我会避免使用 C 风格的转换。那是你做`(unsigned int)`的。相反，使用`static_cast<unsigned> (*it)`. 这通过只给你你真正追求的施法能力来传达你的意图。C 风格的转换要广泛得多，但您在这里只需要在整数类型的大小之间进行转换。

# android - Android Animate Scale Image 以适应屏幕宽度和高度

> ID：10186062
> 
> 赞同：0
> 
> 时间：2012-04-17T06:12:37.817
> 
> 标签：android, animation

我有四个图像放置在屏幕的不同位置。现在我想在点击时对它们进行动画缩放以适应屏幕宽度和高度。单击后，我想淡出屏幕的其他内容。目前我正在使用以下代码来缩放它们

```
Animation logoMoveAnimation = AnimationUtils.loadAnimation(this, R.anim.zoom_image);
view.startAnimation(logoMoveAnimation); 
```

zoom_image.xml 在哪里

```
<?xml version="1.0" encoding="utf-8"?> 
<set xmlns:android="schemas.android.com/apk/res/android"
android:interpolator="@android:anim/linear_interpolator">
   <scale android:fromXScale="0.0" android:fromYScale="0.0"
          android:toXScale="1.0" android:toYScale="1.0" 
          android:duration="700" android:fillBefore="false" />
   <translate android:fromXDelta="0.0" android:fromYDelta="1.0"
          android:duration="700" />
</set> 
```

上面的代码不起作用，因为我知道 xml 不正确，我需要在编码中做一些额外的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T08:11:15.557

我最终使用了以下代码

```
final int initialWidth = v.getWidth();
        final int initialHeight = v.getHeight();
        Log.v("WIDTH_", Integer.toString(initialWidth));
        Log.v("HEIGHT_", Integer.toString(initialHeight));
        DisplayMetrics displaymetrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
        final int finalHeight = displaymetrics.heightPixels;
        final int finalWidth = displaymetrics.widthPixels;
        Log.v("WIDTH_F", Integer.toString(finalWidth));
        Log.v("HEIGHT_F", Integer.toString(finalHeight));
        final int animationDuration = 1500;
        final float stepX = (float)((float)(finalWidth - initialWidth))/animationDuration;
        final float stepY = (float)((float)(finalHeight - initialHeight))/animationDuration;
        Log.v("stepX", Float.toString(stepX));
        Log.v("stepY", Float.toString(stepY));
        final RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(
             RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
        layoutParams.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM); 
    Animation a = new Animation() {
                @Override
                protected void applyTransformation(float interpolatedTime, Transformation t) {
                    int newWidth, newHeight;
                    Log.v("INTERPOLATION_T", Float.toString(interpolatedTime));
                    newWidth = (int)Math.ceil((initialWidth + stepX*interpolatedTime*animationDuration));   
                    newHeight = (int)Math.ceil((initialHeight + stepY*interpolatedTime*animationDuration));                             
                    if(v.getTag().toString().equals("1")) {
                        //layoutParams.setMargins(0, (int)-interpolatedTime*initialHeight, 0, 0);
                    }
                    else if(v.getTag().toString().equals("2")) {
                        layoutParams.addRule(RelativeLayout.RIGHT_OF, R.id.separator1);
                        //layoutParams.setMargins((int)-interpolatedTime*initialWidth, (int)-interpolatedTime*initialHeight, 0, 0);
                    }
                    else if(v.getTag().toString().equals("3")) {
                        layoutParams.addRule(RelativeLayout.RIGHT_OF, R.id.separator2);
                        //layoutParams.setMargins((int)-interpolatedTime*initialWidth, (int)-interpolatedTime*initialHeight, 0, 0);
                    }
                    else if(v.getTag().toString().equals("4")) {
                        layoutParams.addRule(RelativeLayout.RIGHT_OF, R.id.separator3);
                        //layoutParams.setMargins((int)-interpolatedTime*initialWidth, (int)-interpolatedTime*initialHeight, 0, 0);
                    }
                    v.setLayoutParams(layoutParams);
                    v.getLayoutParams().height = newHeight; 
                    v.getLayoutParams().width = newWidth;   
                    v.requestLayout();
                }
                @Override
                public boolean willChangeBounds() {
                    return true;
                }
            };

            a.setInterpolator(new LinearInterpolator());
            a.setDuration(animationDuration);
            a.setFillAfter(true);
            v.startAnimation(a); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T06:32:43.623

尝试一下 -

```
ImageView view = <from xml>;
view.startAnimation(logoMoveAnimation); 
```

并在 ImageView 的 XML 属性中设置 scaletype = fitxy。

# java - 添加了 GoogleAPI，但 MapActivity 变得看不见

> ID：10186065
> 
> 赞同：0
> 
> 时间：2012-04-17T06:12:54.950
> 
> 标签：java, android, eclipse, google-maps, eclipse-plugin

我对 googlemap 应用程序有一个小问题，我想使用本[教程](http://developer.android.com/resources/tutorials/views/hello-mapview.html)来处理我的 Eclipse，我已经更新了所有 Elipse ADT，下载了 GoogleAPI，但我仍然从我的 HelloWorld 应用程序所在的 MapActivity 的 IDE 中收到错误被扩展不能解析为一个类型。我是否遗漏了一些重要的导入或设置，我需要在 Eclipse 本身上执行以使其工作？

```
public class HelloGoogleMapActivity extends MapActivity {
    /** Called when the activity is first created. */
    @override
    protected boolean isRoundDisplayed()
    {
        return false;
    }
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        MapView mapv=(MapView)findViewById(R.id.mapview);
        mapv.setBuildInZoomControls(true);
    }
} 
```

第一个“@override”关键字也被报告为非法，我不知道为什么。

[**更新**]

提供的所有答案都是正确的。最正确的是下面的评论。感谢您的代码剪辑。凉爽的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:39:05.110

对于 @Override 异常 jst 一旦 javacompiler 从您的项目属性中更改 ...JDK 合规性 1.6 到 1.5 然后再次将其设置为 1.6 ...我面临同样的问题 .. 它是一些 jdk 构建项目的 bcz .​​..或日食问题...

对于地图 Prob

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainlayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <com.google.android.maps.MapView
        android:id="@+id/showmap"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:apiKey="@string/mapkey"
        android:clickable="true" />

</RelativeLayout> 
```

活动.java

```
MapView mapView;

@Override
    protected void onCreate(Bundle icicle) {

        try {
            super.onCreate(icicle);
            setContentView(R.layout.map_screen);
            mapView = (MapView) findViewById(R.id.showmap);
            mapView.setBuiltInZoomControls(true);
            final MapController mc = mapView.getController();
            mc.animateTo(new GeoPoint(((int) (latitude * 1E6) - 10),
                    ((int) (longitude * 1E6)) - 10));
            mc.setZoom(5);
        } catch (Exception e) {
            Log.e("MapCreate", e.getMessage());
        } 
```

应用程序清单.xml

```
 <uses-permission android:name="android.permission.INTERNET" />
        <application
                android:icon="@drawable/ic_launcher"
                android:label="Andro Integration"
                android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" >

                <uses-library android:name="com.google.android.maps" />
    <!--         <activity -->

<!--         </activity> -->

        </application> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T06:39:26.037

爪哇

```
package com.manit.HelloGoogleMaps2;

import java.util.List;        
import android.graphics.drawable.Drawable;    
import android.os.Bundle;   
import com.google.android.maps.GeoPoint;    
import com.google.android.maps.MapActivity;    
import com.google.android.maps.MapView;    
import com.google.android.maps.Overlay;    
import com.google.android.maps.OverlayItem;    

public class HelloGoogleMaps2 extends MapActivity {    
/** Called when the activity is first created. */    
@Override    
public void onCreate(Bundle savedInstanceState) {    
    super.onCreate(savedInstanceState);    
    setContentView(R.layout.main);    

    MapView mapView = (MapView) findViewById(R.id.mapview);    
    mapView.setBuiltInZoomControls(true);

    List<Overlay> mapOverlays = mapView.getOverlays();
    Drawable drawable = this.getResources().getDrawable(R.drawable.icon);
    HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable,this);
    GeoPoint point = new GeoPoint(30443769,-91158458);
    OverlayItem overlayitem = new OverlayItem(point, "hi", "I'm in India!");

    GeoPoint point2 = new GeoPoint(17385812,78480667);
    OverlayItem overlayitem2 = new OverlayItem(point2, "hi!", "I'm in Ahmedabad, India!");

    itemizedoverlay.addOverlay(overlayitem);
    itemizedoverlay.addOverlay(overlayitem2);

    mapOverlays.add(itemizedoverlay);
}

@Override
protected boolean isRouteDisplayed()
{
return false;
}   } 
```

HelloItemizedOverlay.java

```
package com.manit.HelloGoogleMaps2;

import java.util.ArrayList;
import android.app.AlertDialog;
import android.content.Context;
import android.graphics.drawable.Drawable;
import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.OverlayItem;

public class HelloItemizedOverlay extends ItemizedOverlay<OverlayItem>{
private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
 private Context mContext;

public HelloItemizedOverlay(Drawable defaultMarker, Context context) {
    // TODO Auto-generated constructor stub
    super(boundCenterBottom(defaultMarker));
     mContext = context;
}

public void addOverlay(OverlayItem overlay)
 {
 mOverlays.add(overlay);
 populate();
 }
 @Override
 protected OverlayItem createItem(int i)
 {
 return mOverlays.get(i);
 }
 @Override
 public int size()
 {
 return mOverlays.size();
 }
 @Override
 protected boolean onTap(int index)
 {
 OverlayItem item = mOverlays.get(index);
 AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
 dialog.setTitle(item.getTitle());
 dialog.setMessage(item.getSnippet());
 dialog.show();
 return true;
 }

} 
```

Androidmanifest.xml

```
 <?xml version="1.0" encoding="utf-8"?>
            <manifest xmlns:android="http://schemas.android.com/apk/res/android"
                  package="com.manit.HelloGoogleMaps2"
                  android:versionCode="1"
                  android:versionName="1.0">
                <uses-sdk android:minSdkVersion="7" />

                <application android:icon="@drawable/icon" android:label="@string/app_name">
                    <activity android:name=".HelloGoogleMaps2"
                              android:label="@string/app_name">
                        <intent-filter>
                            <action android:name="android.intent.action.MAIN" />
                            <category android:name="android.intent.category.LAUNCHER" />
                        </intent-filter>
                    </activity>
            <uses-library android:name="com.google.android.maps" />
                </application>
                <uses-permission android:name="android.permission.INTERNET" />
            </manifest> 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
    <com.google.android.maps.MapView
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/mapview"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:clickable="true"
     android:apiKey="0Y2GRNdvsKsNO5cbkNKYcht3_0ASApwak-Q19Fg"
    /> 
```

字符串.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<string name="hello">Hello World, HelloGoogleMaps!</string>
<string name="app_name">Hello,GoogleMaps</string>
<string name="mapskey">0Y2GRNdvsKsNO5cbkNKYcht3_0ASApwak-Q19Fg</string>
</resources> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T06:19:20.370

使用以下代码供您使用....当我尝试显示地图时，此代码工作正常...
代码中所需的 更改

```
public class GoogleMapsActivity extends MapActivity implements LocationListener{
/** Called when the activity is first created. */
MapView mapView; 
MapController mc;
GeoPoint p;
String add = "";
double lattitude ;
double longitude;
String selectedprofile;
AudioManager am;
Button search;
EditText placeSearch;

class MapOverlay extends com.google.android.maps.Overlay
{
    @Override
    public boolean draw(Canvas canvas, MapView mapView, 
    boolean shadow, long when) 
    {
        super.draw(canvas, mapView, shadow);                   

        //---translate the GeoPoint to screen pixels---
        Point screenPts = new Point();
        mapView.getProjection().toPixels(p, screenPts);

        //---add the marker---
        Bitmap bmp = BitmapFactory.decodeResource(
            getResources(), R.drawable.pushpin2);            
        canvas.drawBitmap(bmp, screenPts.x, screenPts.y-50, null);         
        return true;
    }

    @Override
    public boolean onTouchEvent(MotionEvent event, MapView mapView) 
    {   
        add="";
        //---when user lifts his finger---
        if (event.getAction() == 1) {                
            GeoPoint p = mapView.getProjection().fromPixels(
                (int) event.getX(),
                (int) event.getY());

            Geocoder geoCoder = new Geocoder(
                    getBaseContext(), Locale.getDefault());
                try {
                    List<Address> addresses = geoCoder.getFromLocation(
                        p.getLatitudeE6()  / 1E6, 
                        p.getLongitudeE6() / 1E6, 1);

                    lattitude=p.getLatitudeE6()  / 1E6;
                    longitude=p.getLongitudeE6() / 1E6;

                    if (addresses.size() > 0) 
                    {
                        for (int i=0; i<addresses.get(0).getMaxAddressLineIndex(); 
                             i++)
                           add += addresses.get(0).getAddressLine(i) + "\n";
                    }

                    Toast.makeText(getBaseContext(), add, Toast.LENGTH_SHORT).show();

                }
                catch (IOException e) {                
                    e.printStackTrace();
                }   
                return true;

        }                
        else {
        return false;
        }
    }        
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Intent intent=getIntent();
    setResult(RESULT_OK, intent);

    mapView = (MapView) findViewById(R.id.mapView);
    LinearLayout zoomLayout = (LinearLayout)findViewById(R.id.zoom);  
    View zoomView = mapView.getZoomControls(); 

    zoomLayout.addView(zoomView, 
        new LinearLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, 
            LayoutParams.WRAP_CONTENT)); 
    mapView.displayZoomControls(true);

    mc = mapView.getController();
    String coordinates[] = {"1.352566007", "103.78921587"};
    double lat = Double.parseDouble(coordinates[0]);
    double lng = Double.parseDouble(coordinates[1]);

    p = new GeoPoint(
        (int) (lat * 1E6), 
        (int) (lng * 1E6));

    mc.setCenter(p);
    mc.setZoom(17); 

    //---Add a location marker---
    MapOverlay mapOverlay = new MapOverlay();
    List<Overlay> listOfOverlays = mapView.getOverlays();
    listOfOverlays.clear();
    listOfOverlays.add(mapOverlay);      

    //mapView.invalidate();
    LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000L, 500.0f, this);
} 
```

# java - 如何使用java绕过代理

> ID：10186069
> 
> 赞同：2
> 
> 时间：2012-04-17T06:13:09.407
> 
> 标签：java

这是我的代码

```
import java.io.IOException;
import java.net.URL;
import java.net.URLConnection;

import javax.swing.JEditorPane;
import javax.swing.JFrame;
import javax.swing.JScrollPane;

import com.sun.org.apache.xml.internal.security.utils.Base64;

public class webpageDisplay {

    /**
     * @param args
     * @throws IOException 
     */
    public static void main(String[] args) throws IOException {
        System.getProperties().put( "proxySet", "true" ); 
        System.getProperties().put( "proxyHost", "I given proxy host" ); 
        System.getProperties().put( "proxyPort", "85" ); 
        URL url=new URL("http://www.yahoo.com");
        URLConnection uc = url.openConnection ();
        String encoded = new String
              (Base64.encode(new String("user:pass").getBytes()));
        uc.setRequestProperty("Proxy-Authorization", "Basic " + encoded);
        uc.connect();

         //String url = "http://www.yahoo.com";
            JEditorPane editor = new JEditorPane(url);
            editor.setEditable(false);
            JScrollPane pane = new JScrollPane(editor);
            JFrame f = new JFrame("HTML Demo");
            f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            f.getContentPane().add(pane);
            f.setSize(800, 600);
            f.setVisible(true);

    }

} 
```

即使我提供了代理主机和用户 ID，我仍然遇到如下错误

```
Exception in thread "main" java.net.UnknownHostException: www.yahoo.com
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:196)
    at java.net.Socket.connect(Socket.java:530)
    at java.net.Socket.connect(Socket.java:480)
    at sun.net.NetworkClient.doConnect(NetworkClient.java:169)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:406)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:541)
    at sun.net.www.http.HttpClient.<init>(HttpClient.java:245)
    at sun.net.www.http.HttpClient.New(HttpClient.java:318)
    at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:790)
    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:738)
    at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:649)
    at webpageDisplay.main(webpageDisplay.java:26) 
```

任何人都可以建议如何解决问题或我如何绕过代理

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T06:17:59.983

您需要使用属性`http.proxyHost`and`http.proxyPort`而不仅仅是`proxyHost`and `proxyPort`。

有关示例代码，请参阅以下问题：

[如何在 Java 中使用 HTTP 代理](https://stackoverflow.com/questions/4599933/how-to-use-proxy-in-java)

[使用 java 中的代理代码连接到站点](https://stackoverflow.com/questions/3035973/connect-to-a-site-using-proxy-code-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T06:36:59.043

你已经过了一半的桥。必须更改您传递 UID/pwd 的方式

您还需要一个 java.net.Authenticator 对象，必须调用其静态 setDefault() 方法来设置身份验证。浏览此处获取更多信息

[http://docs.oracle.com/javase/6/docs/technotes/guides/net/http-auth.html](http://docs.oracle.com/javase/6/docs/technotes/guides/net/http-auth.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-31T12:40:27.460

```
System.setProperty("http.proxyHost", "132.186.192.234");
System.setProperty("http.proxyPort", "8080");
System.setProperty("https.proxyUser", "ad001\\userid");
System.setProperty("https.proxyPassword", "sect"); 
```

# html - 打印时表格中断

> ID：10186073
> 
> 赞同：1
> 
> 时间：2012-04-17T06:13:21.527
> 
> 标签：html, css, xhtml

我有一个网站，上面有一些表格（带有thead & tbody）。本站应使用最新的firefox打印。问题：有时 Firefox 会破坏其中一个表格中的页面，该站点的打印版本无法使用。还没有找到任何可行的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T06:18:18.120

这将解决问题

```
table { 
   page-break-before: always;
} 
```

**更新**::

在这种情况下，使用以下

```
@media print {
    table {
       page-break-inside:avoid;
    }
} 
```

# spring - 在grails中实现spring cache插件

> ID：10186082
> 
> 赞同：1
> 
> 时间：2012-04-17T06:15:03.807
> 
> 标签：spring, caching, grails

我想在我的 grails 应用程序中实现 spring 缓存插件，并且我已经使用 install-plugin 命令安装了该插件。

根据我的**resources.groovy中的 spring 缓存**[文档](http://gpc.github.com/grails-springcache/docs/guide/single.html)，我有缓存配置

 **```
venueCache(org.springframework.cache.ehcache.EhCacheFactoryBean) { bean ->
    cacheManager = ref("springcacheCacheManager")
    eternal = true
    diskPersistent = false
    cacheName = "venueCache"
} 
```

在控制器中我有`@Cacheable("venueCache")`我的表演动作

```
@Cacheable("venueCache")
def show(id) {
 ...
} 
```

但是每当我启动应用程序并多次点击 URL 时，它似乎并没有从缓存中给出。它记录语句：

`web.GrailsFragmentCachingFilter - No cacheable annotation found for GET:/grails/venue/action-router.dispatch grails.plugin.springcache.web.FilterContext@4f7351e4`

我的配置中是否缺少任何东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T17:29:42.510

对我来说这是一些愚蠢的忽视 - 我必须为 @Cacheable 注释导入 grails.plugin.springcache.annotations.* ，但 STS 自动导入了 Spring Cacheable 注释。将导入更改为 grails.plugin.springcache.annotations.* 并且一切正常**

# r - 默认情况下，如何通过引导分位数回归来获得置信区间

> ID：10186085
> 
> 赞同：4
> 
> 时间：2012-04-17T06:15:10.467
> 
> 标签：r, regression, confidence-interval, quantreg

在我的统计课中，我们使用 Stata，因为我是 R 用户，所以我想在 R 中做同样的事情。我得到了正确的结果，但获得像置信区间这样简单的东西似乎有点尴尬。

这是我的粗略解决方案：

```
library(quantreg)
na = round(runif(100, min=127, max=144))
f <- rq(na~1, tau=.5, data=ds)
s <- summary.rq(f, se="boot", R=1000)
coef(s)[1]
coef(s)[1]+ c(-1,1)*1.96*coef(s)[2] 
```

我还在*引导*包上做了一些实验，但我还没有让它工作：

```
library(boot)
b <- boot(na, function(w, i){ 
        rand_bootstrap_sample = w[i]
        f <- rq(rand_bootstrap_sample~1, tau=.5)
        return(coef(f)) 
        }, R=100)
boot.ci(b) 
```

给出一个错误：

> bca.ci 中的错误（boot.out，conf，index[1L]，L = L，t = to，t0 = t0.o，：估计调整“a”为 NA

我的问题：

*   我不想知道是否有另一种更好的方法来获得置信区间
*   为什么引导代码抱怨？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T07:19:01.987

您的示例没有为我提供错误消息（Windows 7/64，R 2.14.2），因此可能是随机种子的问题。因此，如果您使用某种随机方法发布示例，最好添加一行 set.seed; 见例子。

注意错误信息是指boot.ci的bca类型；因为这个经常抱怨，所以通过明确给出类型来取消选择它。

我不知道你为什么在引导程序中使用相当复杂的 rq 。如果您真的想分析 rq，请忘记下面的简单示例，但请提供更多详细信息。

```
library(boot)
set.seed(4711)
na = round(runif(100, min=127, max=144))

b <- boot(na, function(w, i) median(w[i]), R=1000)
boot.ci(b,type=c("norm","basic","perc")) 
```

# ajax - 从一页执行处理程序到另一页

> ID：10186090
> 
> 赞同：0
> 
> 时间：2012-04-17T06:15:38.943
> 
> 标签：ajax, jquery

**简短描述：**
例如，我们有两个页面。第二页包含通过 AJAX 填充的块。这是一个大块，包含选项卡（5 个），每个选项卡都有处理程序（单击事件）。在第一页上，我们有一个打开第二页的链接。我想做以下事情：当用户点击第一页上的链接然后打开第二页并执行附加到特定选项卡的处理程序。

我怎样才能做到这一点？

**更多细节：**

我的页面包含事件时间表：

```
<div id="content">
    <div class="section">
        <div id="listInfoBlock" class="list_infoBlock">
        </div>
        <!-- .list_infoBlock-->
    </div>
    <!-- .section-->
</div> 
```

通过`listInfoBlock`AJAX 填充：

```
function loadEventList(id, tab) {
        $('#listInfoBlock').load('/BaseEvent/EventList?period=' + id+"&tab="+tab, function () {
        //the some actions
    });    
} 
```

`listInfoBlock`填充时包含有关事件和时间表的信息：

```
<table class="time_table" cellspacing="0">
  <tbody>
    <tr>
      <td>
        <a href="/Place/PlaceOverview/4">PlaceName</a>
      </td>
      <td class="time_list">
        <ul>
          <li>
            <a href="URL" session="19" hall="2" client="1">19:00</a>
          </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table> 
```

当用户点击时间（`a`标签）然后加载第二个页面。这是第二页，其中包含有关事件和块的详细信息`Publication`。这是一个包含通过 AJAX 加载的 tabs(5) 的大块。当用户单击名为“计划”的选项卡时，然后通过 AJAX 加载事件计划。用户选择时间，大厅平面图就会显示给他。用户不得不做很多不必要的动作。

我想做以下事情：当用户点击第一页上的时间然后加载第二页时，将“计划”选项卡设为活动状态并加载大厅计划。
如何做这样的事情？

谢谢和对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T06:23:09.867

You can look at the anchors. That is, on the first page append some anchor to the url (e.g. `$('#listInfoBlock').load('/BaseEvent/EventList?period=' + id+"&tab="+tab+"#ScheduleTab"`), and on the second page in the `onLoad` event check for anchor (`location.hash`) and make the required tab active if it is equals to `ScheduleTab`.

# c# - Outlook 电子邮件翻录应用程序在收到邮件后启动？

> ID：10186093
> 
> 赞同：0
> 
> 时间：2012-04-17T06:15:54.210
> 
> 标签：c#, .net, email, outlook, attachment

每当电子邮件到达 Outlook 时，我都想启动应用程序。反正我能做到这一点吗？我开发了一个从电子邮件中提取附件的应用程序（这是我要执行的应用程序），用户将发送一个 excel 电子表格，并将其从邮箱中提取并导入 Oracle 数据库。有谁知道我如何在电子邮件到达后立即调用该应用程序启动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:38:25.343

您可以使用 OpenPop [http://hpop.sourceforge.net/](http://hpop.sourceforge.net/)并在任何后台应用程序中执行此操作，或者为 Outlook 添加 VSTO 并挂钩 newmail 事件

# c++ - 确定正确的原点以旋转 QPolygonF

> ID：10186102
> 
> 赞同：1
> 
> 时间：2012-04-17T06:16:41.357
> 
> 标签：c++, qt, rotation, polygon

编辑：添加了更多信息。

我想`QPolygonF`围绕下图所示的原点旋转 a：

![块旋转](../Images/d898b8c147190bf64f2a4c7e647cee30.png)

我想要这个多边形（图像中心是原点 - `0, 0`）：

![第一个多边形](../Images/2d5215e4097c34106baaa3487ab9fff7.png)

要顺时针旋转以使其结束：

![在此处输入图像描述](../Images/cf337595d17da1e6e12d5d83986f0b02.png)

`QPolygonF`与上图中的第一个块的位置相同：

```
QPolygonF p1 =  QPolygonF() << QPointF(0, 1) << QPointF(4, 1) << QPointF(4, 2) << QPointF(0, 2); 
```

然后我围绕我认为正确的原点（`2, 2`）旋转：

```
QTransform t;
t.translate(2, 2);
t.rotate(-90);
t.translate(-2, -2);
QPolygonF p2 = t.map(p1);
qDebug() << p1 << "rotated = " << p2; 
```

输出：

```
QPolygonF(QPointF(0, 1) QPointF(4, 1) QPointF(4, 2) QPointF(0, 2) ) rotated =  QPolygonF(QPointF(1, 4) QPointF(1, 0) QPointF(2, 0) QPointF(2, 4) ) 
```

当我想要的输出是：

```
QPolygonF(QPointF(0, 1) QPointF(4, 1) QPointF(4, 2) QPointF(0, 2) ) rotated =  QPolygonF(QPointF(2, 0) QPointF(3, 0) QPointF(3, 4) QPointF(2, 4) ) 
```

但是，根据上面的输出，多边形最终看起来像这样：

![错误的旋转](../Images/396547131c9989ab8f8dd7f5586bf39f.png)

我应该在什么时候旋转？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T06:21:57.763

**编辑**

在弄清楚你是什么之后，我现在知道了实现这一目标的正确代码：

```
QTransform t; 
t.translate(2, 2); 
t.rotate(90); 
t.translate(-2, -2); 
QPolygonF p2 = t.map(p1); 
qDebug() << p1 << "rotated = " << p2; 
```

这将给出矩形：

```
QPolygonF(QPointF(3, 0) QPointF(3, 4) QPointF(2, 4) QPointF(2, 0) ) 
```

这是您所期望的（尽管由于轮换，顺序会发生变化）。值得注意的是，`rotate(90)`并且`rotate(-90)`不会给出与围绕矩形*边缘旋转相同的结果，而不是它的**中间*。

**概念化 QT 变换**

由于 qt[旋转](http://qt-project.org/doc/qt-5.0/qtransform.html#rotate)函数的方向，可能会出现一些混淆。尽管这会产生逆时针旋转，但因为我们“看到”y 轴倒转（至少在这种情况下），它对我们来说似乎是顺时针旋转。

打个比方，如果我在一个房间里观察一盏灯从左边掉下来，从悬挂在天花板上的人的角度来看，它已经“掉到”右边了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:44:30.207

我只是看了一眼，但我认为这是错误的：

```
t.translate(2, 2); 
```

要获得您的转换应该是：

```
t.translate(2, 1); 
```

据我了解，矩形的下界在 y = 1 处...

# javascript - 点击事件未激活脚本

> ID：10186103
> 
> 赞同：-1
> 
> 时间：2012-04-17T06:16:41.553
> 
> 标签：javascript, jquery

您好，我在 jquery 中编写了一些脚本并将其绑定到点击事件，但代码不会被点击事件激活。但是，当我将脚本放在另一个 JavaScript 函数中并将该 JavaScript 函数绑定到单击事件侦听器时，该函数能够在单击时执行。

另一件事是，当我使用 JavaScript 绑定脚本时，它返回的警报消息与我单击的 div 的数量相同，即如果我单击第 3 个 div，则警报消息在我的页面上显示 3 次 dom 结构属于 pdf.js 项目，并且这个 dom 是动态创建的，我想获取用户单击的 pagecontainer2 孙子的索引，以下是我的脚本：

```
<script type="text/javascript">
    $(function() {
        $(".textLayer > div", "#pageContainer2").click(function () {
            var index = $(this).index();
            alert("index of div is = " + index);
        });
    });
</script> 
```

DOM 代码：

```
<div id="pageContainer2" >
    <canvas id="page2" width="741" height="959"></canvas>
    <div class="textLayer">
        <div>......some text here....</div>
        <div>......some text here....</div>
        <div>......some text here....</div>
    </div>
</div>

<div id="pageContainer3" >
    <canvas id="page3" width="741" height="959"></canvas>
    <div class="textLayer">
        <div>......some text here....</div>
        <div>......some text here....</div>
        <div>......some text here....</div>
    </div>
</div>​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T07:11:42.930

如果您需要将 click 事件处理程序分配给尚不存在但稍后将创建的 DOM 节点，则需要使用`on`并指定子节点将事件处理程序绑定到现有节点：

假设它`<div id="pageContainer2">`已经存在，但是您正在动态地在该容器内创建这些 div。所以正确的语法是：

```
$(function() {
    $('#pageContainer2').on('click', '.textlayer > div', function() {
        /* .... */
    });
}); 
```

这样，您实际上将事件处理程序绑定到容器，但由于大多数事件会在 DOM 中冒泡，因此通过单击该容器内的任何元素触发的事件将到达容器本身。因为你指定了另一个选择器（`.textlayer > div´），jQuery 会检查被点击的实际元素是否满足这个选择器。

如果在绑定事件处理程序之后甚至创建了#pageContainer2，您仍然可以将事件处理程序绑定到文档本身：

```
$(document).on('click', '#pageContainer2 .textlayer > div', function() { ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T06:37:53.343

试试这个javascript：

```
 $(function() {
        $(".textLayer").click(function () {
            var index = $(".textLayer").index(this);
            alert("index of div is = " + (index+1));
        });
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T07:03:05.370

稍微修改一下试试这个...

```
$("#pageContainer2 > .textLayer > div").click(function () {
            var index = $(this).index();
            alert("index of div is = " + index);
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T06:33:33.843

由于 HTML 是动态创建的，因此您必须使用`on`API 来绑定事件。

```
$(function() {
   $(".textLayer > div", '#pageContainer2').on('click', function () {
       var index = $(this).index();
       alert("index of div is = " + index);
   });
}); 
```

# jquery - Phonegap Media API (Android) - 未定义媒体

> ID：10186104
> 
> 赞同：11
> 
> 时间：2012-04-17T06:16:42.503
> 
> 标签：jquery, android, cordova, webview

我想构建一个 Android WebView 应用程序，当用户按下按钮时它会播放声音。由于某种原因，我无法让 PhoneGap 媒体 API 工作。

它不断显示：

```
Uncaught ReferenceError: Media is not defined at
file:///android_asset/www/script.js:3 
```

**这是我的代码：**

```
$(document).ready(function(){
  var myMedia = new Media("/android_asset/www/one.mp3");

  $('.one').click(function(){ 
    myMedia.play();
  });
}); 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-17T06:50:25.853

您可能试图`Media`在 deviceready 事件触发之前调用。

```
<script type="text/javascript">

var myMedia = null;
document.addEventListener("deviceready",onDeviceReady,false);

function onDeviceReady () {
    myMedia = new Media("/android_asset/www/one.mp3", 
        function(){
            if (myMedia) {
                myMedia.stop();
                myMedia.release();
            }
        }, 
        function(error){
            console.log(error.message);
        }
    );
}

$(document).ready(function(){
    $('.one').click(function(event){ 
        myMedia.play();
    });
});

</script> 
```

# c# - 如何将 C++ dll 导入和使用/运行到另一个 C# 项目中？

> ID：10186107
> 
> 赞同：0
> 
> 时间：2012-04-17T06:17:09.000
> 
> 标签：c#, c++, dll, interop

我创建了一个 C# 应用程序。在这个应用程序中，我想使用/运行来自另一个项目的 C++ API（API 是用宏编码编写的）。我尝试导入该 C++ 项目的 dll 并尝试调用属于该 API 的函数。问题是它抛出“无法找到方法”错误。

如何在 C# 项目中运行 C++ 项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T06:48:06.550

You can't add a native DLL as a reference to a managed project. You have 3 main options:

1.  Make the native functions available with p/invoke.
2.  Expose the native code through COM.
3.  Compile the native code as a managed C++ assembly.

For any serious amount of code, option 3 is the most productive and effective approach.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T06:31:11.353

如果通过“运行”，您的意思是一个单独的过程：

使用`System.Diagnostics.Process` .NET 中可用的类：

```
myProcess.StartInfo.FileName = "notepad.exe";
myProcess.StartInfo.CreateNoWindow = false;
myProcess.Start(); 
```

否则，如果您的意思是使用 C++ 开发的 dll，您可以使用`Platform Invoke Services`：

```
using System;
using System.Runtime.InteropServices;

class PlatformInvokeTest
{
    //First param is of course either in your PATH, or an absolute path:
    [DllImport("msvcrt.dll", EntryPoint="puts", CallingConvention=CallingConvention.Cdecl)]
    public static extern int PutString(string c);
    [DllImport("msvcrt.dll", CallingConvention=CallingConvention.Cdecl)]
    internal static extern int _flushall();

    public static void Main() 
    {
        PutString("Test");
        _flushall();
    }
} 
```

# c# - ASP.NET MVC3 下拉列表未获取所选项目

> ID：10186108
> 
> 赞同：0
> 
> 时间：2012-04-17T06:17:14.490
> 
> 标签：c#, asp.net-mvc-3, razor, drop-down-menu

我的编辑控制器中有这个：

```
playerView.Users = new SelectList(repo.GetUsers(), "UserID", "UserName", player.User.UserID.ToString()); 
```

这就是我的下拉列表的外观：

```
@Html.DropDownListFor(x => x.SelectedUserID, Model.Users)
@Html.ValidationMessageFor(x => x.SelectedUserID) 
```

但我无法让选定的用户进入我的视图（我总是在下拉列表中获得第一项）。在 player.User 中，是具有 id、name、... 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T06:24:07.437

试试这样：

```
...
playerView.Users = new SelectList(repo.GetUsers(), "UserID", "UserName");
playerView.SelectedUserID = player.User.UserID.ToString();
return View(playerView); 
```

# android - 如何在android中设计自定义进度条

> ID：10186111
> 
> 赞同：0
> 
> 时间：2012-04-17T06:17:22.383
> 
> 标签：android, android-widget

我必须设计定制的进度条。请帮助我实现这一点。我正在使用两张图片，一张用于进度条的背景，另一张用于进度条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T06:39:17.617

当我们必须在现代图形用户界面中等待某项任务完成时，该界面通常会提供正在发生某事的视觉反馈，通常会指示该任务已经取得了多少进展。提供此信息的小部件通常被称为进度条（尽管它们不一定是进度条），并且对于为用户提供应用程序响应能力是必不可少的。

实现进度条还提供了一个机会来说明其他两个重要的 Android 概念：在与主用户界面 (UI) 分开的线程上运行进程以及线程之间的通信。在此示例中，我们将演示如何实现进度条并从运行在单独线程上的进程更新它们。 **这就是您的要求：[示例](http://blog.mediarain.com/2011/04/android-custom-progressbar-with-rounded-corners/)**

# sqlanywhere - Sql Anywhere 连接

> ID：10186114
> 
> 赞同：1
> 
> 时间：2012-04-17T06:17:43.270
> 
> 标签：sqlanywhere

我想问是否有人知道我可以在任何地方连接到 sql 10 .db 文件的方法或免费驱动程序。

我的意思是作为免费许可证的驱动程序，因为我只需要让我的应用程序在另一个应用程序数据库中添加几行，而且我不会将这个其他数据库用于其他任何事情，我需要某种驱动程序或一些解决方法来无需购买许可证即可在任何地方使用 sql 进行编写。

我并不是要破坏任何人的作者权利或任何东西，只是大多数数据库都有免费的驱动程序，您可以将其用于简单的任务，这就是为什么我要问我是否遗漏了什么。感谢您提前提供的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:53:57.637

您可以注册开发者版下载，驱动程序附带，它是免费的:)。

[http://www.sybase.com/detail?id=1016644](http://www.sybase.com/detail?id=1016644)

您还应该知道，如果您要连接到经过身份验证的数据库，则需要在 30 秒内进行身份验证

[http://dcx.sybase.com/1001/en/dbdaen10/da-running-s-3420607.html](http://dcx.sybase.com/1001/en/dbdaen10/da-running-s-3420607.html)

“在限制适用之前，每个连接都有三十秒的宽限期”

# database - 将dmp文件拆分为多个dmp文件？

> ID：10186121
> 
> 赞同：1
> 
> 时间：2012-04-17T06:18:29.053
> 
> 标签：database, oracle, oracle10g

我在 Windows XP 操作系统中使用 Oracle 10g EE。我的硬盘中有一个 5 GB 的 dmp 文件。我想将这个大的 dmp 文件拆分为多个 dmp 文件，拆分后我将导入这些多个 dmp 文件。

我看到了以下链接，但发现没有帮助。

1.  [拆分一个dmp](http://www.groupsrv.com/computers/about648085.html)

2.  [导入前拆分 dmp](http://newsgroups.derkeiler.com/Archive/Comp/comp.databases.oracle.misc/2009-11/msg00022.html)

如何拆分这个大的 dmp 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T06:25:18.680

导出转储并使用其他用户导入它不需要多个转储文件，只需传递 from/to 用户参数

```
imp scott/tiger file=emp.dmp fromuser=scott touser=jeff tables=dept 
```

如果还想拆分成多个文件，可以试试

```
exp scott/tiger FILE=D:F1.dmp,E:F2.dmp FILESIZE=10m LOG=multi-split.log 
```

这将每 10Mb 创建一个新的转储文件。

至于拆分现有的转储文件，是的，我认为这是不可能的。你想在什么基础上拆分它们？转储文件是二进制文件，因此无法对其进行文本解析。

不确定这是否是您想要的。您需要更清楚地发布您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-16T08:34:50.120

为什么不为导出命令设置条件，如下所示：

```
exp scott/tiger file=A1.dump log=A.log table=table1 query=\"ri>0 and ri< 1000000\"
exp scott/tiger file=A2.dump log=A2.log table=table1 query=\"ri>=1000000 and ri< 2000000\" 
```

# c++ - c++ 重载虚+运算符

> ID：10186123
> 
> 赞同：2
> 
> 时间：2012-04-17T06:18:44.897
> 
> 标签：c++, operator-overloading, virtual

```
#include <iostream>

class aa
{
public:
    aa(){}

    aa(aa& obj)
    {
        aa1 = obj.aa1;
    }

    virtual aa operator =(aa& obj)
    {
        aa1 = obj.aa1;
        return (*this);
    }

    virtual aa operator +(aa& obj)
    {
        aa1 += obj.aa1;
        return (*this);
    }

    int aa1;
};

class bb: public aa
{
public:
    bb():aa(){}

    bb(bb& obj)
    {
        bb1 = obj.bb1;
    }

    aa operator =(aa& obj)
    {
        aa::operator =(obj);
        bb b1 = dynamic_cast<bb&>(obj);
        bb1 = b1.bb1;       
        return (*this);
    }

    aa operator +(aa& obj)
    {
        aa::operator +(obj);
        bb b1 = dynamic_cast<bb&>(obj);
        bb1 += b1.bb1;
        return (*this);
    }

    int bb1;
};

int main()
{
    bb b1;
    bb b2;

    b1.bb1 = 1;
    b1.aa1 = 1;

    b2.bb1 = 2;
    b2.aa1 = 2;

    aa &a1 = b1;
    aa &a2 = b2;

    a1 = a2;
    b1 = dynamic_cast<bb&>(a1);
    b2 = dynamic_cast<bb&>(a2);

    std::cout<<b1.aa1<<";"<<b1.bb1;

    bb b3;
    b3.bb1 = 3;
    b3.aa1 = 3;

    aa &a3 = b3;

    aa &a4 = a2 + a3;
    b3 = dynamic_cast<bb&>(a4);

    return 0;
} 
```

输出： `2;2`然后它在`b3 = dynamic_cast<bb&>(a4);`给出错误的行崩溃`std::bad_cast at memory location 0x0012fdbc..`

我发现的原因是 a2+a3 的表达式结果作为 aa 类型的对象出现，在下一个语句中，我们试图将其强制转换为无效的派生类型对象，从而导致异常。所以我的疑问是我们能否实现上述意图，即`aa &a4 = a2 + a3;`对上述功能进行一些更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T07:53:03.657

C++ 有一个分派（基于虚函数）。多态二元运算符不可避免地陷入“双重调度”的情况，因此不能仅通过简单的虚函数来实现多态。

此外，由于您要返回一个值，因此每个子类信息都会丢失。

处理这种情况的更合适的方法是定义一个非多态句柄来实现操作并保存多态类型，将操作执行委托给它们。

像

```
class handle
{
public:
    class aa;
    class bb;

    class root
    {
    public:
        virtual ~root() {}         //< required being this polymorphic
        virtual root* clone()=0;

        virtual handle add_invoke(const root& r) const=0; //resolve the 2nd argument
        virtual handle add(const aa& a) const=0;    //resolve the 1st argument
        virtual handle add(const bb& a) const=0;    //resolve the 1st argument
    };

    class aa: public root
    {
    public:
        aa(...) { /*set vith a value */ }
        aa(const aa& a) { /* copy */ }
        virtual root* clone() { return new aa(*this); }

        virtual handle add_invoke(const root& r) const 
        { return r.add(*this); }  //will call add(const aa&);

        virtual handle add(const aa& a) const
        { return handle(new aa(.../*new value for aa with (aa,aa)*/)); }
        virtual handle add(const bb& a) const
        { return handle(new bb(.../*new value for bb with(aa,bb)*/)); }
    };

    class bb: public root
    {
    public:
        bb(...) { /*set vith a value */ }
        bb(const bb& b) { /* copy */ }
        virtual root* clone() { return new bb(*this); }

        virtual handle add_invoke(const root& r) const
        { return r.add(*this); }  //will call add(const bb&);

        virtual handle add(const aa& a) const
        { return handle(new bb(.../*new value for aa with (bb,aa)*/)); }
        virtual handle add(const bb& a) const
        { return handle(new bb(.../*new value for bb with (bb,bb)*/)); }
    };

    handle() :ps() {}
    //support both copy (by clone) and move (by stole)
    handle(const handle& s) :ps(s.ps? s.ps->clone(): nullptr) {}
    handle(handle&& s) :ps(s.ps) { s.ps=nullptr; };
    //assign by value, to force temporary assign
    handle& operator=(handle h) { delete ps; ps=h.ps; h.ps=0; return *this; }
    //cleanup
    ~handle() { delete ps; }

    //the operator+
    friend handle operator+(const handle& a, const handle& b)
    { 
        return (b.ps && a.ps)? b.ps->add_invoke(*a.ps): handle(); 
        //Note: manage also the a+b with one of `a` or `b` as null, if it make sense
    }

private:
    handle(root* p) :ps(p) {}

    root* ps;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T06:52:17.733

派生类中的字面重载`aa operator +(aa& obj)`几乎没有意义。

即使是虚拟的，你现在也会调用一个`aa`随时返回的方法，所以结果`a2 + a3`将是一个`aa`对象，而不是一个 bb 对象。它被构造为一个`bb`对象，但被复制到生成的`aa`对象中，并且副本丢失了`bb`信息。

你应该做的是覆盖一个特定的版本`bb operator +(const bb& obj)`，注意这将隐藏原来`operator+`的`aa`参数，所以你仍然需要重新定义它或使用[语句`using`导入](http://www.parashift.com/c++-faq-lite/strange-inheritance.html#faq-23.9)。

现在，这些是更好的语义，但它不会解决您的问题，因为在您的情况下，它仍然会调用`operator+`返回`aa`对象的 。在这种情况下，如果你真的想解决这个问题，你应该`a2`在添加它们`a3`*之前向下转换。*

但实际上，如果您在具有虚拟化功能的父子系统中执行此类操作，您可能会重新考虑您的设计。通常，`dynamic_cast`在任何情况下使用 a 都应该引起一些注意。它当然有它的用途，但应尽可能避免再次向下转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T06:26:20.400

您正在传递一个基类，为什么要将它转换为派生转换？您应该从强制转换中捕获异常，因为这就是您知道类型不是您期望的类型的方式。

请注意，while`a1`和被引用到,`a2`的实例不是。这就是前两次强制转换没有抛出异常的原因。`bb``a4`

# java - WebContents 文件夹在 Eclipse 项目视图中不可见

> ID：10186134
> 
> 赞同：3
> 
> 时间：2012-04-17T06:20:05.010
> 
> 标签：java, eclipse

这很奇怪，但是我的 WebContents 文件夹已经从 Eclipse 的“项目资源管理器”视图中消失了。

该项目是在 Ubuntu Linux 10.04 上运行的 Eclipse Helios 中的动态 Web 项目。

WebContents 文件夹直到某个时候才可见。我不太确定我可能搞砸了什么，但这个文件夹不再从 Eclipse 中可见。但是，它确实存在于文件系统中，并且具有 WEB-INF、META_INF 等。

这是对设置文件“org.eclipse.wst.common.component”的引用，其中包含对 WebContents 的引用。我认为这个文件没有任何改变。

```
<?xml version="1.0" encoding="UTF-8"?>
<project-modules id="moduleCoreId" project-version="1.5.0">
    <wb-module deploy-name="slides">
        <wb-resource deploy-path="/" source-path="/WebContent"/>
        <wb-resource deploy-path="/WEB-INF/classes" source-path="/src"/>
        <wb-resource deploy-path="/WEB-INF/classes" source-path="/test"/>
        <property name="context-root" value="slides"/>
        <property name="java-output-path" value="/slides/build/classes"/>
    </wb-module>
</project-modules> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2021-08-17T16:14:49.573

如果您有**Eclipse IDE 2021 或最新版本** ，并且想要创建新的动态 Web 项目，但 WebContent 未显示在您的项目中。

然后在创建项目时按照以下步骤操作：

1.  新建--> 动态 Web 项目--> 为您的项目命名---> 单击下一步按钮
2.  删除 src\main\java 文件夹
3.  并且只输入**src** --> 点击下一步按钮
4.  将 Content 目录重命名为 WebContent-->选择 Generate web.xml 部署描述符
5.  结束

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T06:38:26.070

您可以通过以下方式再次将其添加到 Eclipse：

右键单击您的项目，在上下文菜单中选择`Properties`-> `Java Build Path`(Tab Source) 并单击`Add Folder`。

如果您不添加`.settings`到版本控制中，通常会发生这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T06:39:00.023

我将 WebContents 添加到类路径中。这就是它从 ProjectExplorer 窗口中消失的原因。

# jquery - jQuery 圆形滑块

> ID：10186135
> 
> 赞同：4
> 
> 时间：2012-04-17T06:20:06.127
> 
> 标签：jquery, html, slider, volume

我想做一个如下图所示的圆形滑块。jQuery 能够做到这一点吗？

我知道直线滑块的工作原理，但我想制作一个 HTML5 圆形滑块。这是我在网上找到的 [http://jsfiddle.net/XdvNg/1/](http://jsfiddle.net/XdvNg/1/) - 但我不知道如何获取用户放开的滑块值 ![在此处输入图像描述](../Images/e162fe73a8f9896968f609be056678e7.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T14:17:07.373

这是我想出的：

## [jsBin 演示](http://jsbin.com/bejiku/2/)

```
$(function () {
    var $circle = $('#circle'),
        $handler = $('#handler'),
        $p = $('#test'),
        handlerW2 = $handler.width()/2,
        rad = $circle.width()/2,
        offs = $circle.offset(),
        elPos = {x:offs.left, y:offs.top},
        mHold = 0,
        PI2 = Math.PI/180;
    $handler.mousedown(function() { mHold = 1; });
    $(document).mousemove(function(e) {
        if (mHold) {
            var mPos = {x:e.pageX-elPos.x, y:e.pageY-elPos.y},
                atan = Math.atan2(mPos.x-rad, mPos.y-rad),
                deg  = -atan/PI2+180,
                perc = (deg*100/360)|0,
                X = Math.round(rad*  Math.sin(deg*PI2)),    
                Y = Math.round(rad* -Math.cos(deg*PI2));
            $handler.css({left:X+rad-handlerW2, top:Y+rad-handlerW2, transform:'rotate('+deg+'deg)'});
        }
    }).mouseup(function() { mHold = 0; });
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T09:46:24.677

这是 Roko 脚本的小改进版本： **[jsFiddle 演示](http://jsfiddle.net/ydV8F/34/)**

为了计算鼠标位置，我使用事件偏移量（firefox 的小修复），如果事件目标不是#rotationSliderContainer，则更正。我还添加了 90 度的倍数的吸引力。

```
$(function(){
    var $container = $('#rotationSliderContainer');
    var $slider = $('#rotationSlider');
    var $degrees = $('#rotationSliderDegrees');

    var sliderWidth = $slider.width();
    var sliderHeight = $slider.height();
    var radius = $container.width()/2;
    var deg = 0;    

    X = Math.round(radius* Math.sin(deg*Math.PI/180));
    Y = Math.round(radius*  -Math.cos(deg*Math.PI/180));
    $slider.css({ left: X+radius-sliderWidth/2, top: Y+radius-sliderHeight/2 });

    var mdown = false;
    $container
    .mousedown(function (e) { mdown = true; e.originalEvent.preventDefault(); })
    .mouseup(function (e) { mdown = false; })
    .mousemove(function (e) {
        if(mdown)
        {

            // firefox compatibility
            if(typeof e.offsetX === "undefined" || typeof e.offsetY === "undefined") {
               var targetOffset = $(e.target).offset();
               e.offsetX = e.pageX - targetOffset.left;
               e.offsetY = e.pageY - targetOffset.top;
            }

            if($(e.target).is('#rotationSliderContainer'))
                var mPos = {x: e.offsetX, y: e.offsetY};
            else
                var mPos = {x: e.target.offsetLeft + e.offsetX, y: e.target.offsetTop + e.offsetY};

            var atan = Math.atan2(mPos.x-radius, mPos.y-radius);
            deg = -atan/(Math.PI/180) + 180; // final (0-360 positive) degrees from mouse position 

            // for attraction to multiples of 90 degrees
            var distance = Math.abs( deg - ( Math.round(deg / 90) * 90 ) );

            if( distance <= 5 )
                deg = Math.round(deg / 90) * 90;

            if(deg == 360)
                deg = 0;

            X = Math.round(radius* Math.sin(deg*Math.PI/180));
            Y = Math.round(radius*  -Math.cos(deg*Math.PI/180));

            $slider.css({ left: X+radius-sliderWidth/2, top: Y+radius-sliderHeight/2 });              

            var roundDeg = Math.round(deg);

            $degrees.html(roundDeg + '&deg;');
            $('#imageRotateDegrees').val(roundDeg);

        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-13T18:24:26.857

这是满足您要求的 jQuery [roundSlider](http://roundsliderui.com/)插件，它也适用于移动设备和触摸设备。

这个圆形滑块具有与 jQuery ui 滑块类似的选项。它支持默认、最小范围和范围滑块类型。不仅是圆形滑块，它还支持各种[圆形](http://roundsliderui.com/demos.html#various-circle-shapes)，例如四分之一圆形、半圆形和饼形圆形。

有关更多详细信息，请查看[演示](http://roundsliderui.com/demos.html)和[文档](http://roundsliderui.com/document.html)页面。

请从中查看**演示**[**`jsFiddle`**](http://jsfiddle.net/soundar24/LpuLe9tr/5/)。

**输出截图：**

![移动圆形滑块 - jQuery 插件](../Images/a602c07aae37ab2eec2e69d1fdd699a3.png)

您可以根据需要自定义外观。请[**在此处**](http://roundsliderui.com/demos.html#different-theming-and-appearances)查看一些自定义外观。

# android - 将直接来自 Web 服务器的图像设置为 imageview

> ID：10186139
> 
> 赞同：-1
> 
> 时间：2012-04-17T06:20:12.880
> 
> 标签：android, android-layout, android-imageview, android-image

我正在研究 ImageView，我想在其中将图像设置为 Imageview，但 Image(byte array) 直接来自 Web 服务器。概念是：

1）我向网络服务器发送各种参数，作为回报，网络服务器向我发送该特定 ID 的图像。（只是一个图像，而不是 URL）

2) 现在我想直接将 Image 显示到 ImageView 中而不保存到 SD 卡中，这样每当用户想要查看任何其他 ID 相关的 Image 时，该 Image 应该直接来自服务器，我们最终不会保存它。

**[已编辑]**

**从服务器获取值并在 byte[] 中返回**

```
 static BufferedReader in=null;

byte[] result_image;
          DefaultHttpClient httpClient = new DefaultHttpClient();

        HttpPost httpPost = new HttpPost(uri1);
        if(list!=null)
        {

        UrlEncodedFormEntity formEntity = new UrlEncodedFormEntity(list);
        httpPost.setEntity(formEntity);

        }
         //URI uri=httpPost.getURI();
        HttpResponse httpResponse = httpClient.execute(httpPost);
        in = new BufferedReader(new InputStreamReader(httpResponse.getEntity().getContent()));
        StringBuffer sb = new StringBuffer("");
        String line = "";
       // String NL = System.getProperty("line.separator");
        while ((line = in.readLine()) != null) {
              sb.append(line +" "); //sb.append(line +NL);
        }
        in.close();

       result_image = String.valueOf(sb).getBytes();

}
    catch(UnsupportedEncodingException e)
    {
        String err = (e.getMessage()==null)?"Cant connect to server":e.getMessage();
        Log.e("Network Error:",err); 
    }
    catch (MalformedURLException e) {
        String err = (e.getMessage()==null)?"Malformed Exception":e.getMessage();
        Log.e("Malformed Exception:",err); 

     } 
     catch(Exception ex)
     {
        // Log.i("Exception,ex", ex.getMessage());
         String err = (ex.getMessage()==null)?"NetworkConnectionException":ex.getMessage();
         Log.e("NetworkConnectionException:",err); 
     }
    finally {

        if (in != null) {
            try {
                    in.close();
             } catch (Exception ex) {
                 String err = (ex.getMessage()==null)?"Excepion":ex.getMessage();
                 Log.e("Exception:",err); 
            }
        } 
```

这里 result_image 是一个字节 [] 并且使用这个字节 [] 正在对其进行解码并在位图中显示它..请帮助...对此的任何帮助非常感谢..谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T06:27:12.657

你可以这样使用

```
URL url = new URL(src);
HttpURLConnection connection = (HttpURLConnection) url.openConnection();
connection.setDoInput(true);
connection.connect();
InputStream input = connection.getInputStream();
Bitmap myBitmap = BitmapFactory.decodeStream(input);
imageView.setImageBitmap(myBitmap); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T06:26:59.307

试试这个：

```
Bitmap bMap = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length); 
image.setImageBitmap(bMap); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T06:31:53.210

鉴于您是从网络加载的，您可能想要延迟加载图像。这方面的例子很多。尽管他们中的许多人将图像保存到 sd 卡中，但您必须调整图像并将其存储到某种内存结构中。

*   [延迟加载图像视图问题](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview)
*   [流行的懒加载列表源码](https://github.com/thest1/LazyList/tree/master/src/com/fedorvlasov/lazylist)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T06:37:59.940

首先，不能将 url 设置为 ImageView 的 DataSource。您必须从 URL 获得响应并转换为字节。

其次，如果您不想将图像保存到 SDCARD，那么只需在 ImageView 中分配字节数组，这里您不会将图像保存到 SDCARD。字节数组将一直保留到您的应用在 RAM 中处于活动状态。

代码如下。这里的 URL 指向一个类似 [http://domain/test.jpg的图像](http://domain/test.jpg)

```
URL myFileUrl =null;          
        try {
             myFileUrl= new URL(url);
        } catch (MalformedURLException e) {
            return false;
        }
        try {
             HttpURLConnection conn= (HttpURLConnection)myFileUrl.openConnection();
             conn.setInstanceFollowRedirects(false);
             conn.setDoInput(true);
             conn.connect();                       
             InputStream is = conn.getInputStream();
             Bitmap bitmap = BitmapFactory.decodeStream(is);
             image.setImageBitmap(bitmap);
             return true;
        } catch (IOException e) {
            System.out.println("error="+e.getMessage());
            e.printStackTrace();        
            return false;
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T07:18:50.560

该`decodeByteArray()`方法是执行此操作的建议方法。如果它不适合您，您可以像下面的代码一样手动解码。

```
URL yourl = new URL(src);
HttpURLConnection connection = (HttpURLConnection) yourl.openConnection();
connection.setDoInput(true);
connection.connect();
InputStream input = connection.getInputStream();                                
bis = new BufferedInputStream(input,int);                   
baf = new ByteArrayBuffer(int);

int current = 0;                        
while ((current = bis.read()) != -1) {                  
baf.append((byte) current);
} 
```

希望上面的代码向您展示一些替代的想法。快乐编码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-29T22:09:13.810

```
if we use  asynctask then like this 
//declare Bitmap 
//new Loading().execute("http://Hsot/123.jpg"); //Call the asynctask

protected Bitmap doInBackground(String... args)
 {         
 bitmap=BitmapFactory.decodeStream((InputStream)newURL(args[0]).getContent());
 return bitmap;
}
 protected void onPostExecute(Bitmap image) 
{
     my_image.setImageBitmap(image);
     my_image2.setImageBitmap(image);
} 
```

# iphone - AVPlayer 当前在 iPhone 中播放项目详情和音量控制？

> ID：10186140
> 
> 赞同：1
> 
> 时间：2012-04-17T06:20:15.517
> 
> 标签：iphone, volume, avplayer, currentitem

我试过用 AVPlayer 播放在线 http 流音乐文件，效果很好。

获取当前播放的音轨名称、艺术家等的方法是什么？
有没有办法在播放音乐时调整 AVPlayer 的音量（使用`UISlider`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:27:56.813

您可以通过以下方式调节音量：

```
player.volume = slider.value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T06:33:39.087

```
MPMediaItem *currentItem = self.musicPlayer.nowPlayingItem;

//Display the artist, album, and song name for the now-playing media item.
//These are all UILabels.
self.songLabel.text   = [currentItem valueForProperty:MPMediaItemPropertyTitle];
self.artistLabel.text = [currentItem valueForProperty:MPMediaItemPropertyArtist];
self.albumLabel.text  = [currentItem valueForProperty:MPMediaItemPropertyAlbumTitle]; 
```

# python - PNG图像的Python缓冲区

> ID：10186142
> 
> 赞同：3
> 
> 时间：2012-04-17T06:20:22.337
> 
> 标签：python, binary, png, decode

我正在为基于 Web 的化学项目使用[Indigo 库](http://ggasoftware.com/opensource/indigo)。长话短说，他们为它编写了一个不错的 Python 界面，我正在通过 CGI 使用它。有几种输出格式，包括 SVG 和 PNG。我不是 Python 专业人士，所以我对作者关于缓冲区的想法感到有些困惑。以下作品：

```
#!python
from indigo import *
from indigo_renderer import *
from struct import *
print "Content-type: image/svg+xml"
print

indigo = Indigo()
renderer = IndigoRenderer(indigo);

mol1 = indigo.loadMolecule("ONc1cccc1");

indigo.setOption("render-output-format", "svg");
indigo.setOption("render-highlight-color-enabled", "true");

image = renderer.renderToBuffer(mol1);
output = image.tostring()
print output 
```

也就是说，上面的代码输出了格式正确的 SVG XML，没有不需要的前导或尾随字符。Firefox 识别了内容类型并将其渲染得很好。

但是，我很难理解我应该为 PNG 做什么：

我将代码更改为：

```
from indigo import *
from indigo_renderer import *
from struct import *

print "Content-type: image/png"
print

indigo = Indigo()
renderer = IndigoRenderer(indigo);

mol1 = indigo.loadMolecule("ONc1cccc1");

indigo.setOption("render-output-format", "png");
indigo.setOption("render-highlight-color-enabled", "true");

image = renderer.renderToBuffer(mol1);
output = image
print output 
```

我得到了这个（这不是我对 PNG 的期望）：

```
array('c', '\x89PNG\r\n\x1a\n\x00\x00\x00\rIHDR\x00[ truncated by me ]') 
```

如果我尝试使用 toString() 方法，我确实得到了一个不错的二进制文件（我没有花任何精力试图解释它），但它显然仍然被破坏了。我觉得这需要在转储到客户端之前进行解码（我以前用 PHP 来做）——这可能很简单，但我从文档中找不到太多帮助（或者我找到了我想要的东西）正在寻找，这超出了我的理解）。我只是不确定发生了什么，并希望得到一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:36:53.257

根据您的输出，它是一个 PNG 文件。只需将其保存到`wb`模式中的文件即可。

由于您是 PHP 开发人员，我只会使用您在 python 中必须使用的内容：

选项一：

保存到文件并使用 PHP 获取它

```
...
output = image
f=open ("someFileName.png", wb)
f.write(output[1])
f.close() 
```

然后`"someFileName.png"`与您的 PHP 包装器一起使用。

选项二：从 PHP 包装器调用 python 脚本。将图像数据作为退出代码传递给包装器。

```
...
output = image
import sys
sys.exit(output[1]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T21:46:51.613

（很抱歉将其放在评论和此处）。解决问题 - Windows 确实让这很痛苦，但现在必须这样做。不幸的是，当我开始为我的 Linux VPS 最终确定代码时，代码将不得不更改，但这就是我所做的。输出是一个字符数组，并且 tostring() 按预期工作，只是转储原始内容。我需要做的就是强制输出以二进制形式写入以防止损坏。以二进制形式写入文件是微不足道的，但以二进制形式写入标准输出是特定于平台的。请参阅：链接感谢您的帮助。我在这里找到了指导：

[Win32 二进制写入](http://code.activestate.com/recipes/65443-sending-binary-data-to-stdout-under-windows/) 最终代码为：

```
#!python
from indigo import *
from indigo_renderer import *
from array import *
import sys, cgitb, cgi

cgitb.enable()
httpArgs = cgi.FieldStorage()
print "Content-type: image/png"
print

indigo = Indigo()
renderer = IndigoRenderer(indigo)

mol1 = indigo.loadMolecule("ONc1cccc1")

indigo.setOption("render-output-format", "png")
indigo.setOption("render-highlight-color-enabled", "true")

outputStream = renderer.renderToBuffer(mol1)
if sys.platform == "win32":
   import os, msvcrt
   msvcrt.setmode(sys.stdout.fileno(), os.O_BINARY)
else:
sys.exit()
sys.stdout.write(outputStream.tostring()) 
```

# ios - 使用自定义图像添加新的 UIButton“状态”

> ID：10186143
> 
> 赞同：0
> 
> 时间：2012-04-17T06:20:24.457
> 
> 标签：ios, inheritance, uibutton

我正在尝试构建一个简单的钉子跳跃游戏（请参阅： [http](http://cl.ly/2x0v1V3z351t0j3d3y0L) ://cl.ly/2x0v1V3z351t0j3d3y0L ）。

我的计划是让每个“挂钩”一个 UIButton 并切换 UIButton 状态，以便在游戏期间的不同时间显示不同的图像。使用 UIButton 的默认状态让我走得很远，但我需要在默认状态 4 之外添加一个额外的状态。

我该怎么做呢？我想我需要子类 UIButton 来创建一个自定义 UIButton 对象，但这是我卡住的地方。我找不到任何有关添加新按钮状态的资源。这是可能的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T07:17:39.453

下面的这个链接对我实现自己的自定义按钮有很大帮助。我基本上采用了那个人的代码并使其与 ARC 兼容，但他所做的基本原理真的很棒！

[自定义按钮状态](http://supermegaultragroovy.com/2010/09/22/custom-uibuttons-via-subclassing/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T06:55:36.640

子类`UIBUtton`化并添加自定义状态变量，然后使用 setter 更改显示的图像。

# java - Java中的FFMPEG（运行时错误）

> ID：10186151
> 
> 赞同：0
> 
> 时间：2012-04-17T06:21:33.693
> 
> 标签：java, ffmpeg, runtime.exec

我想编写一个使用 FFMPEG 将视频转换为帧的程序。当我在 Ubuntu 终端上使用它时，它工作正常。但是当我尝试将它放入 Java 代码时，它给了我一个运行时错误。我在下面的代码中犯了错误吗？

```
import java.util.*;
import java.awt.*;
import java.lang.*;
import java.lang.Runtime;
import java.io.*;
import java.io.IOException;

public class ConvertVideoToImage
{
    private SingletonServer ss = null;

    public ConvertVideoToImage(SingletonServer ss)
    {
        this.ss = ss;
    }

    public void run()
    {
        convertVideo();
    }

    public void convertVideo()
    {
        try
        {
            Runtime rt = Runtime.getRunTime().exec("ffmpeg" + "-i" +         "display.wmv" + "image%d.jpg");
        }
        catch(Exception e){}
    }

} 
```

**编辑：**

我已经按照您的建议更改了代码，但它也不起作用。当我用谷歌搜索它时，我发现有人将完整路径放入可执行文件中，它变成了这样：

```
Runtime.getRuntime().exec("/home/pc3/Documents/ffmpeg_temp/ffmpeg -i display.wmv image%d.jpg") 
```

顺便说一句，谢谢你的回复。我有另一个问题。是否可以为 FFMPEG 做一个计数器？我在 Ubuntu 终端中使用此命令将视频转换为 30 帧/1 秒：

```
ffmpeg -i display.wmv image%d.jpg 
```

这将自动生成像 image1.jpg、image2.jpg 到 image901.jpg 这样的数字。可以为此做一个计数器吗？因为我需要统计文件并控制数量。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T06:24:37.263

调用`exec`时，不应在命令字符串中指定参数，而是将它们作为第二个参数传递到数组中。

```
Process p = Runtime.getRunTime().exec("ffmpeg",
               new String[]{"-i", "display.wmv", "image%d.jpg"));
//                        are you sure regarding this %^ 
```

# css - 在模式弹出窗口中对齐复选框

> ID：10186158
> 
> 赞同：0
> 
> 时间：2012-04-17T06:21:51.773
> 
> 标签：css, twitter-bootstrap

我正在使用[Twitter Bootstrap](http://twitter.github.com/bootstrap/)，它几乎是无痛的。但是，在模式弹出窗口中使用内联复选框时，我遇到了以下问题：

![复选框未对齐](../Images/7dedb74dcdf8b71b5e80aa9e604ffbf4.png)

复选框的第一行未正确对齐。

请注意，如果我删除内联属性，这将继续： ![未内联时复选框未对齐](../Images/f363846f473f277bb59e1c7e52f61905.png)

违规代码如下：

```
<div class="modal-body">
    <form class="form-horizontal">

        <div class="row-fluid">

            <div class="span4">

                <h4 style="display:inline !important;">Client: </h4> 

            </div>

            <div class="span4">

                <h4 style="display:inline !important;">Start Date: </h4> 

            </div>

            <div class="span4">

                <h4 style="display:inline !important;">End Date: </h4> 

            </div>

        </div>

        <br />

        <div class="row-fluid">

            <div class="span12">

                <h4 style="display:inline !important;">Industry: </h4> TBA

            </div>

        </div>

        <br />

        <div class="row-fluid">

            <h4>Role: </h4>

            <label class="checkbox inline">

                <input type="checkbox" value="2"> .NET Developer

            </label>

            <label class="checkbox inline">

                <input type="checkbox" value="1"> Business Analyst

            </label>

            <label class="checkbox inline">

                <input type="checkbox" value="14"> Change Manager

            </label>

            *SNIP*
        </div>

        <br />

        <div class="row-fluid">

            <div class="span12">

                <h4>Scope of Work (max. 150 words): </h4>

                <textarea class="bdBox" rows="3"></textarea>

            </div>

        </div>

        <br />

        <div class="row-fluid">

            <div class="span12">

                <h4>Deliverables (max. 150 words): </h4>

                <textarea class="bdBox" rows="3"></textarea>

            </div>

        </div>

    </form>
</div> 
```

为简洁起见缩短。

有没有人对此有任何想法，或者我应该把它带到 Bootstrap 问题列表中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T23:19:30.503

想通了。

bootstrap.css 文件中有两行：

```
.radio.inline,.checkbox.inline{display:inline-block;padding-top:5px;margin-bottom:0;vertical-align:middle;}
.radio.inline+.radio.inline,.checkbox.inline+.checkbox.inline{margin-left:10px;} 
```

底线仅将 margin-left 应用于除第一个以外的复选框，这意味着第一个未被推过弄乱了行。

如果我将 margin-left:10px 移动到第一个复选框选择器中，一切都会排成一行。Mac 的 CSS 也非常适合排列我的复选框： ![固定复选框](../Images/deaf7c9223a5bc3f182d472b35b6efc0.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T07:44:27.140

这是我尝试过的东西，我想这就是你想要的

[http://jsfiddle.net/xgKP4/](http://jsfiddle.net/xgKP4/)

# javascript - 如何从组合框显示多选值到gridpanel extjs 4

> ID：10186162
> 
> 赞同：0
> 
> 时间：2012-04-17T06:22:06.420
> 
> 标签：javascript, extjs4, extjs-mvc

论坛成员我遇到的一个问题是将组合框名称选择的值显示到我的网格面板列。

我的 gridPanel 有一列包含资源组合框，用户可以从资源中选择多个值。

下面是我的 gridpanel 列与列组合框 **gridpanel 列**

```
{
             xtype: 'gridcolumn',
             dataIndex: 'resourceid',
             text: 'Resource',
             field: resourcecombo
        }, 
```

**资源组合**

```
var resourcecombo = new Ext.form.ComboBox({
     id: 'resourceid',
     name: 'resourceid',
     emptyText: 'Select resource',
     displayField: 'firstname',
     store: Ext.create('rms.store.employee'),
     valueField: 'id',
     multiSelect: true,
     queryMode: 'local',
     typeAhead: true

}); 
```

在这里，我得到了资源列表，我也可以进行多选。基于此多选，将 id 发送到服务器，并且响应我想将值设置为网格列。

但是，我从服务器获得了正确的响应，**但我的网格列在此列中仅显示一个名称。**.

我想显示所有选定资源的名称，以逗号分隔**，**如 **rishi、yogi、hiren 等**

**解决方案** 只需使用以下代码更改网格列

```
xtype: 'gridcolumn',
             dataIndex: 'resources',
             header: 'Resources name',
             field: resourcecombo,
             renderer: function(resources){
                var result = [];
                resources = resources || [];
                for (var idx = 0, len = resources.length; idx < len; idx++ ){
                    var value = resources[idx].name;
                    if(value){
                        result.push(value);
                    }
                }
                return result.join(', ');
            } 
```

并使用以下代码更改模型

```
Ext.define('rms.model.taskmainModel', {
    extend : 'Ext.data.Model',

    fields : [ 
               { name : 'id', type : 'int' }, 
               { name : 'taskname', type: 'string'},
               **{ name : 'resources', type: 'auto'},**
               { name : 'cmpname', mapping: 'project.company.cmpname'}

             ]

}); 
```

上面的解决方案对我有用，希望这可以帮助一些人。

谢谢你的支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:43:38.560

您已指定组合框上显示的名称为“firstname”，该字符串将 1-1 对应于其下方的值（即“id”）。如果您认为它不适合您，请考虑以下几点：

*   如果选择了多个项目并且此组合框未处于“焦点”状态，“所选项目”将如何显示在组合框上？（组合将随机显示一个所选项目，还是将它们列为菜单？）
*   再次单击组合框选择其他项目后，“已选择项目”如何重新显示？（如果选择了多个项目，它们是否都显示相同的“所选资源的名称，以逗号分隔，如您所描述的 rishi,yogi,hiren”？）

所以我建议选择其他方式，例如：使用另一个字段来显示逗号分隔的名称

# oracle - 使用 OCCI 捕获密码到期警告

> ID：10186166
> 
> 赞同：1
> 
> 时间：2012-04-17T06:22:17.920
> 
> 标签：oracle, oracle-call-interface, occi

我正在尝试找到一种方法来“捕获”（不是严格的 C++ 意义上的）“ORA-28002：密码将在 %s 天内过期”警告连接到数据库时。

我知道在 OCI 中打开包含警告消息的连接时会返回一个 SUCCESS_WITH_INFO 状态，但是通过 OCCI 访问它的方法是什么？

# xcode - iOS5 - 自定义表单 API

> ID：10186171
> 
> 赞同：1
> 
> 时间：2012-04-17T06:23:16.467
> 
> 标签：xcode, cocoa-touch, forms, ios5, customization

我正在创建一个 iPhone 应用程序，该应用程序需要用户在表单中输入信息，然后将该数据发送到云服务器。是否有任何可以轻松部署在 XCode 故事板上的良好的可定制形式 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:31:30.823

也许，[QuickDialog](https://github.com/escoz/quickdialog)可能适合您。

# php - 如何加密 PHP 脚本的一部分

> ID：10186173
> 
> 赞同：1
> 
> 时间：2012-04-17T06:23:18.823
> 
> 标签：php, encryption, base64, eval, encode

例如，我有一个 PHP 脚本

```
<?php
$name="Alfred";
echo $name;
?> 
```

我使用以下脚本进行加密，（通过 www.rightscripts.com/phpencode/index.php）

```
<?php 
eval(gzinflate(str_rot13(base64_decode('encrypted code')))); 
?> 
```

但它只打印 "$name="Alfred";" 和“未定义的变量 $name”。问题是什么 ？还有其他解决方案吗？请帮我 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T18:17:07.443

以这种方式“编码”并不能真正保护您免受任何伤害。

编码的 PHP 代码在服务器上，将其解码回常规 PHP 的代码也是如此。

如果有人对您的服务器有足够的访问权限，他们可以读取您编码的 PHP 脚本，那么几乎可以肯定他们也有足够的权限来读取解码器脚本。这意味着您的代码实际上根本没有受到保护。

有许多混淆器和编码器可以做你想做的事，但归根结底，你真正对代码所做的只是减慢它的速度（`eval()`除了其他问题之外，这是一个主要的性能杀手） .

更好的解决方案可能是编译您的代码。有一个[名为 HipHop 的 PHP 编译器](https://github.com/facebook/hiphop-php/wiki/)可以为您解决问题。值得一试。

即使使用已编译的代码（任何语言），对于决心将其拆开并了解您的秘密的人来说，它仍然是可能的，但它比简单的编码脚本要困难得多，而且它应该比正常运行更快编译时，编码时比平时慢，所以你双赢。

# php - 登录后重定向到 Codeigniter 中的上一页

> ID：10186177
> 
> 赞同：1
> 
> 时间：2012-04-17T06:23:58.857
> 
> 标签：php, codeigniter, redirect, codeigniter-url

在我的一个 CI 应用程序中有一个用户登录部分。用户仅限于某些页面，即只有会员才能查看该页面。所以有两个控制器用户（其中​​包含注册，登录..），管理员（安全页面）。

我的问题是，如果用户访问管理员页面，那么如果该用户未登录，则必须显示登录页面（在用户控制器中），成功登录后，它将重定向到用户尝试访问的上一个页面。

例如：如果用户单击“myaccount”页面，则如果用户未登录，它将重定向到“login”页面，成功登录后将返回“myaccount”页面

请帮忙谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T06:33:44.020

在视图文件夹中的第一个创建页面>>name login.php

并写下你的登录页面

在控制器中，您可以尝试此代码

```
public function mypage()
    {
    $this->user_model->check_user_login();

    $this->load->view('cp/tamplate_header');
    } 
```

并在 User_model 中编写 rhis 代码

```
function check_user_login()
{
    if(! $this->session->userdata('logged_in'))
    {
        redirect('login');
    }

    if($this->session->userdata('user_active') == false)
    {
        redirect('pagename');
    }
} 
```

# java - 关于java语句

> ID：10186179
> 
> 赞同：0
> 
> 时间：2012-04-17T06:24:36.107
> 
> 标签：java

当我们制作简单的 java 类时，我们必须编写以下行

```
public static void main(String []args) 
```

也可以写成..

```
public static void main(String args[] )
public static void main(String... a ) 
```

我们可以用不同的方式编写上述语句的其他可能解决方案是什么..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:28:02.070

您可以声明`args`为`final`，或为参数使用不同的名称。

您可以添加一个`throws`子句（感谢 Prince），但最好自己捕获和诊断任何异常。（想想你的用户将如何使用随机堆栈跟踪......）

您可以将`main`方法声明为`synchronized`or (可能) `final`，但在任何实际情况下，这两者都是毫无意义的。

当然，您可以按不同的顺序指定修饰符。这既无意义又（IMO）烦人。

> 在交换它们方面有什么区别吗？

没有任何。它只会使您的代码更难阅读……因为您没有遵循公认的 Java 代码样式约定。

# javascript - 关闭窗口后删除会话

> ID：10186181
> 
> 赞同：1
> 
> 时间：2012-04-17T06:24:37.233
> 
> 标签：javascript, jquery, ajax

> **可能重复：**
> [如何覆盖 OnBeforeUnload 对话框并将其替换为我自己的？](https://stackoverflow.com/questions/276660/how-can-i-override-the-onbeforeunload-dialog-and-replace-it-with-my-own)
> [关闭窗口时销毁会话？](https://stackoverflow.com/questions/959655/destroy-session-on-window-close)
> [如何在onbeforeunload上执行ajax函数？](https://stackoverflow.com/questions/9701734/how-to-execute-ajax-function-onbeforeunload)

我想在用户关闭窗口后删除会话。我不知道该怎么做。请帮我 。我尝试了以下代码，它工作正常 IE 浏览器，但不能在其他浏览器中工作。有没有其他方法可以解决这个问题

```
$(window).unload( function (event) 
{ 
     if (window.event.clientX < 0 && window.event.clientY < 0)
     {
     alert("closeddddddddddd");
     $.ajax({ url: "logout.php"});
     }
 } ); 
```

# android - 如何在视图下方添加布局

> ID：10186182
> 
> 赞同：1
> 
> 时间：2012-04-17T06:25:15.703
> 
> 标签：android, android-layout, android-linearlayout, android-relativelayout

我想在 TextView 下方和 Button 上方添加一个相对布局。我的按钮在 LinearLayout 中，父级是 RelativeLayout。

这是我的代码。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/iWantPageLogo"
        android:layout_width="45dp"
        android:layout_height="45dp"
        android:src="@drawable/wic_logo_small" />

    <Button
        android:id="@+id/goButton_iWant"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:text="@string/go" />

    <EditText
        android:id="@+id/searchAutoCompleteTextView_iWant"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@id/goButton_iWant"
        android:layout_toRightOf="@id/iWantPageLogo"
        android:hint="@string/search" />

    <TextView
        android:id="@+id/iWantLabel"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/iWantPageLogo"
        android:gravity="center_vertical|center_horizontal"
        android:text="@string/iWant"
        android:textColor="@color/white" />

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:="@+id/iWantLabel">

        <TextView
            android:id="@+id/iNeedToBuy"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/iWantPageLogo"
            android:gravity="center_vertical|center_horizontal"
            android:text="@string/iNeedToBuy"
            android:textColor="@color/white" />

        <EditText
            android:id="@+id/iNeedToBuyEditText"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/iNeedToBuy"
            android:hint="@string/product"
            android:textColor="@color/black" />
    </RelativeLayout>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" >

        <Button
            android:id="@+id/feedButton_feed"
            android:layout_width="wrap_content"
            android:layout_height="30dp"
            android:layout_margin="0dp"
            android:layout_weight="1"
            android:background="@color/white"
            android:text="@string/feed"
            android:textColor="@color/black" />

        <Button
            android:id="@+id/iWantButton_feed"
            android:layout_width="wrap_content"
            android:layout_height="30dp"
            android:layout_margin="0dp"
            android:layout_weight="1"
            android:background="@color/white"
            android:text="@string/iwant"
            android:textColor="@color/black" />

        <Button
            android:id="@+id/shareButton_feed"
            android:layout_width="wrap_content"
            android:layout_height="30dp"
            android:layout_margin="0dp"
            android:layout_weight="1"
            android:background="@color/white"
            android:text="@string/share"
            android:textColor="@color/black" />

        <Button
            android:id="@+id/profileButton_feed"
            android:layout_width="wrap_content"
            android:layout_height="30dp"
            android:layout_margin="0dp"
            android:layout_weight="1"
            android:background="@color/white"
            android:text="@string/profile"
            android:textColor="@color/black" />
    </LinearLayout>

</RelativeLayout> 
```

我的相对布局（包含 TextView 和 EditText）位于父布局（RelativeLayout）中，位于 iWantLabel 下方和包含按钮的线性布局上方。如何实现这一目标

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:31:39.853

你几乎什么都知道，只需要一点关注。1）您需要提及所有布局相对于其他视图的位置，如下所示。因为它们的一些高度是 fill_parrent ，这会导致问题（与其他地方重叠），当这个地方没有明确提到时 2）你需要给你的线性布局一个 id 3）你需要使用 layout_below 和 layout_above 设置你的相对布局的位置

# java - java中 System.gc() 和 finalize() 方法有什么区别？

> ID：10186183
> 
> 赞同：15
> 
> 时间：2012-04-17T06:25:17.977
> 
> 标签：java, garbage-collection, finalize

我在 java 的 system.gc() 和 finalize() 方法之间感到困惑。我们不能强制将垃圾对象收集到 JVM。我们允许在我们的java代码中编写这两种方法，那么如果两者都用于垃圾收集，那么提供两种java垃圾收集方法有什么意义呢？

请告诉我这两种方法的确切工作原理以及它在内部是如何工作的？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-17T06:28:19.617

`System.gc()`恳请系统执行垃圾收集。Javadoc 说：

> 运行垃圾收集器。

您无法控制垃圾收集器工作的“难度”。垃圾收集器如何在内部工作是特定于 VM 的，并且本身就是一个研究课题。但通常会有“完整”垃圾收集和一些较小的“增量”收集。所以考虑`System.gc`作为一个请求，但不能保证你的对象的垃圾收集会发生。

`Object.finalize()`可以重写以指定当给定对象被垃圾收集时要做什么（实际上是在它被垃圾收集之前做什么）。Javadoc 说：

> 当垃圾收集确定不再有对该对象的引用时，由对象上的垃圾收集器调用。

终结器的经典用途是在对象被垃圾回收时释放系统资源，例如释放文件句柄、临时文件等。

不要在 JVM 退出时使用终结器来执行操作。为此，请使用您注册的关闭挂钩`Runtime.getRuntime().addShutdownHook(Thread)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T06:28:58.803

`System.gc()`强制垃圾收集器运行，而`Finalize()`对象的方法定义了垃圾收集器在收集此特定对象时应该做什么。

粗略地说，是这样的：

```
class MyClass {
    public UnmanagedResource resource;

    void Finalize() {
        FreeUnmanagedResource(resource);
    }
}

MyClass[] data = new MyClass[1000];
for(int i=0; i<1000; i++) {
    data[i] = new MyClass();
}
//do some work
data = null;
System.gc(); //Note that it doesn't guarantee you that all MyClass instances will be actually collected at this point. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T06:34:39.507

`system.gc()`方法通知JVM垃圾收集器现在可以运行以通过删除未使用的对象来清除内存。根据java文档：

> 调用 gc 方法表明 Java 虚拟机花费精力回收未使用的对象，以使它们当前占用的内存可用于快速重用。当控制从方法调用返回时，Java 虚拟机已尽最大努力从所有丢弃的对象中回收空间。

`finalize()`方法不会触发垃圾收集器，而是在垃圾收集器销毁对象时调用它。它提供了正确清除对象的说明。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-16T16:12:27.390

System.gc() 方法垃圾收集由 new 关键字创建的对象，而 finalise() 方法用于垃圾收集不是使用 new 关键字创建的对象。所以，我猜这个答案。你的Q

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-09T15:46:30.910

这里的答案很好，只是想详细说明关于 finalize() 方法的一点：你不应该使用它。它的执行根本无法保证，最终使用 finalize() 会增加性能损失。

正如 Joshua Bloch 在 Effective Java 中所写：

> 终结器是不可预测的，通常很危险，而且通常是不必要的。永远不要在终结器中做任何时间紧迫的事情。永远不要依赖终结器来更新关键的持久状态。

和：

> 哦，还有一件事：使用终结器会导致严重的性能损失。在我的机器上，创建和销毁一个简单对象的时间约为 5.6 ns。添加终结器会将时间增加到 2,400 ns。换句话说，使用终结器创建和销毁对象的速度大约慢了 430 倍。

更喜欢使用以下资源终止 try-finally 模式，它可以保证运行：

```
Bar bar = new Bar(...);
try {
    // Your code here
} finally {
    bar.releaseResource(); // You implementation. For example close connection
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-17T06:29:24.933

**垃圾回收**用于回收对象分配的内存，`Finalize()`由垃圾回收器在回收内存之前调用，该`Finalize()`方法主要用于在删除对象之前进行一些操作

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-17T06:29:40.197

有许多包含 finalize() 方法的类，我假设您的意思是 Object 类中的那个。当您希望 Java 的垃圾编译器运行时，您调用 System.gc()。它每隔几分钟就会自行运行，但您可以随时要求它运行。当 gargabe 收集器运行时，它会在每个没有更多引用的对象上调用 finalize() 方法。基本上， System.gc() 清理内存，并使用 finalize() 摆脱单个对象。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-25T04:16:30.520

通过调用`System.gc()`任何类的方法来调用垃圾收集器。但它并不能保证在 jvm 关闭之前所有的*无效对象都会被垃圾回收。*所以基本上`gc()`方法是只收集那些使用 new 关键字创建的对象。由任何其他逻辑创建的对象将在调用垃圾收集器`finalize()`之前通过显式调用方法进行`gc`垃圾收集。

# symfony - symfony2 链式选择器

> ID：10186185
> 
> 赞同：21
> 
> 时间：2012-04-17T06:25:29.423
> 
> 标签：symfony

我有三个实体：国家、州和城市，具有以下关系：

[![图片](../Images/23124bc63ac22847f2da7f6025a9c92d.png)](https://i.stack.imgur.com/t8zSk.png)

创建城市时，我需要两个选择器，一个用于国家，一个用于城市所属的州。这两个选择器需要链接，因此更改国家将“过滤”另一个选择器中显示的状态。

我找到了一个[教程](https://web.archive.org/web/20161004220412/http://aulatic.16mb.com:80/wordpress/2011/08/symfony2-dynamic-forms-an-event-driven-approach)，展示了如何使用表单事件来做到这一点，但他们的例子并不是我的情况。我的实体 City 它与 Country 实体没有直接关系（它们通过 State 间接相关）所以，当在 City 表单中设置 country 字段时（在 CityType 类中），我被迫声明该字段，`'property_path'=>false`如您所见在下面的代码中：

```
class CityType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder->add('country', 'entity', array(
            'class'=>'TestBundle:Country', 
            'property'=>'name', 
            'property_path'=>false //Country is not directly related to City
        ));
        $builder->add('name');

        $factory = $builder->getFormFactory();

        $refreshStates = function ($form, $country) use ($factory) 
        {
            $form->add($factory->createNamed('entity', 'state', null, array(
                'class'         => 'Test\TestBundle\Entity\State',
                'property'      => 'name',
                'query_builder' => function (EntityRepository $repository) use ($country)
                                   {
                                       $qb = $repository->createQueryBuilder('state')
                                                        ->innerJoin('state.country', 'country');

                                        if($country instanceof Country) {
                                            $qb->where('state.country = :country')
                                               ->setParameter('country', $country);
                                        } elseif(is_numeric($country)) {
                                            $qb->where('country.id = :country')
                                               ->setParameter('country', $country);
                                        } else {
                                            $qb->where('country.name = :country')
                                               ->setParameter('country', "Venezuela");;
                                        }        
                                        return $qb;
                                    }
            )));
        };

        $builder->addEventListener(FormEvents::PRE_SET_DATA, function (DataEvent $event) use ($refreshStates)
        {
            $form = $event->getForm();
            $data = $event->getData();

            if($data == null)
                return;               

            if($data instanceof City){
                if($data->getId()) { //An existing City
                    $refreshStates($form, $data->getState()->getCountry());
                }else{               //A new City
                    $refreshStates($form, null);
                }
            }
        });

        $builder->addEventListener(FormEvents::PRE_BIND, function (DataEvent $event) use ($refreshStates)
        {
            $form = $event->getForm();
            $data = $event->getData();

            if(array_key_exists('country', $data)) {
                $refreshStates($form, $data['country']);
            }
        });
    }

    public function getName()
    {
        return 'city';
    }

    public function getDefaultOptions(array $options)
    {
        return array('data_class' => 'Test\TestBundle\Entity\City');
    }
} 
```

问题是当我尝试编辑现有城市时，默认情况下不会在表单中选择相关的国家。如果我删除该行`'property_path'=>false`，我会（毫不奇怪）收到错误消息：

**“Test\TestBundle\Entity\City”类中不存在属性“country”、方法“getCountry()”和方法“isCountry()”**

有任何想法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-15T23:56:35.447

好的，我终于想出了如何正确地做到这一点：

```
namespace Test\TestBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

use Doctrine\ORM\EntityRepository;
use Symfony\Component\Form\FormEvents;
use Symfony\Component\Form\Event\DataEvent;

use Test\TestBundle\Entity\Country;
use Test\TestBundle\Entity\State;
use Test\TestBundle\Entity\City;

class CityType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder->add('name');

        $factory = $builder->getFormFactory();

        $refreshStates = function ($form, $country) use ($factory) {
            $form->add($factory->createNamed('entity','state', null, array(
                'class'         => 'Test\TestBundle\Entity\State',
                'property'      => 'name',
                'empty_value'   => '-- Select a state --',
                'query_builder' => function (EntityRepository $repository) use ($country) {
                    $qb = $repository->createQueryBuilder('state')
                        ->innerJoin('state.country', 'country');

                    if ($country instanceof Country) {
                        $qb->where('state.country = :country')
                            ->setParameter('country', $country);
                    } elseif (is_numeric($country)) {
                        $qb->where('country.id = :country')
                            ->setParameter('country', $country);
                    } else {
                        $qb->where('country.name = :country')
                            ->setParameter('country', null);
                    }

                    return $qb;
               })
           ));
        };

        $setCountry = function ($form, $country) use ($factory) {
            $form->add($factory->createNamed('entity', 'country', null, array(
                'class'         => 'TestBundle:Country', 
                'property'      => 'name', 
                'property_path' => false,
                'empty_value'   => '-- Select a country --',
                'data'          => $country,
            )));
        };

        $builder->addEventListener(FormEvents::PRE_SET_DATA, function (DataEvent $event) use ($refreshStates, $setCountry) {
            $form = $event->getForm();
            $data = $event->getData();

            if ($data == null) {
                return;
            }

            if ($data instanceof City) {
                $country = ($data->getId()) ? $data->getState()->getCountry() : null ;
                $refreshStates($form, $country);
                $setCountry($form, $country);
            }
        });

        $builder->addEventListener(FormEvents::PRE_BIND, function (DataEvent $event) use ($refreshStates) {
            $form = $event->getForm();
            $data = $event->getData();

            if(array_key_exists('country', $data)) {
                $refreshStates($form, $data['country']);
            }
        });
    }

    public function getName()
    {
        return 'city';
    }

    public function getDefaultOptions(array $options)
    {
        return array('data_class' => 'Test\TestBundle\Entity\City');
    }
} 
```

jQuery AJAX 选择器

```
$(document).ready(function () {
    $('#city_country').change(function(){
        $('#city_state option:gt(0)').remove();
        if($(this).val()){
            $.ajax({
                type: "GET",
                data: "country_id=" + $(this).val(),
                url: Routing.generate('state_list'),
                success: function(data){
                    $('#city_state').append(data);
                }
            });
        }
    });
}); 
```

我希望这对面临同样情况的其他人有所帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-21T10:06:38.003

由于您与此方法的链接已关闭，因此我决定补充您的出色答案，以便任何人都可以使用它：

为了执行以下 javascript 命令：

```
url: Routing.generate('state_list'), 
```

您需要安装 FOSJsRoutingBundle，可以在[此处](https://github.com/FriendsOfSymfony/FOSJsRoutingBundle)找到。

注意：在捆绑包的自述部分中有安装说明，但缺少一些东西。如果您将 deps 与此一起使用：

```
[FOSJsRoutingBundle]
git=git://github.com/FriendsOfSymfony/FOSJsRoutingBundle.git
target=/bundles/FOS/JsRoutingBundle 
```

您必须`php bin/vendors update`在接下来的步骤之前运行。

我仍在尝试找出在 routing.yml 中需要什么路由才能使该解决方案起作用。一旦我发现我会编辑这个答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-18T03:24:31.220

链式选择框需要一个专用的 FieldType。还有一个 xhr 控制器，可以根据传递的参数返回子选项。当然，property_path 应该设置为 false。

# java - 如何在 Applet 中使用 XSL 文件打开 XML？

> ID：10186186
> 
> 赞同：0
> 
> 时间：2012-04-17T06:25:41.210
> 
> 标签：java, swing, applet, japplet, jaxm

我有 XML 和 XSL 文件，并且我还在 XML 文件中声明了 XSL。所以我想用 Java 打开 XML 文件`JApplet`。那么如果可能的话，Java中有任何组件吗？

```
<?xml version = "1.0" ?>
<?xml-stylesheet type="text/xsl" href="emp.xsl"?>
.. 
```

# node.js - 节点js和hbase

> ID：10186187
> 
> 赞同：2
> 
> 时间：2012-04-17T06:26:13.940
> 
> 标签：node.js, hbase

我正在尝试通过连接到 hbase。nodejs hbase 模块。我用过

*   [https://github.com/wdavidw/node-hbase](https://github.com/wdavidw/node-hbase)

下载 nodejs 的 hbase 模块并尝试在我的 nodejs 脚本中运行以下代码，该脚本使用 express 并处理传入请求：- ......

```
app.post('/upload', function(req, res,next){
     var read_stream = fs.createReadStream(req.files.upload_file.path, {encoding: 'base64'});
              read_stream.on("data", function(data){
               // process.stdout.write(data);
                dataload(data);
              });
              read_stream.on("error", function(err){
                console.error("An error occurred: %s", err)
              });
              read_stream.on("close", function(){
                console.log("File closed.")
            });

}

function dataload(data){
 var hbase = require('hbase');

 var tableobj=hbase({ host: "{my server ip}", port: "8080" }).getTable('my_table1');
               sys.debug(tableobj);

                tableobj.create("my_column_family", function(err, success){
                    if(err)
                    {
                        sys.debug("error1");
                    }
                    else
                    {

                        this.getRow('my_row')
                        .put('my_column_family:my_column', data, function(err, success){
                            if(err)
                            {
                            sys.debug("error");
                            }
                            else
                            {
                            sys.debug("success");
                            }

                            });

                    }

                    });
} 
```

面临的问题：-当我重新启动服务器时[即通过在 cygwin 命令提示符上再次给出“节点 {script js 文件名}”由该脚本创建的服务器]，然后重新创建 hbase 表并且之前插入的所有行都是删除。

# javascript - javascript 类型的 HTML 元素

> ID：10186192
> 
> 赞同：23
> 
> 时间：2012-04-17T06:26:32.053
> 
> 标签：javascript, jquery, sorting

我正在尝试对`li`元素进行排序并得到一个意外的结果我需要对其进行三次排序才能正确获得它，

我错在哪里了？javascript

```
var sort_by_name = function(a, b) {
    return a.innerHTML.toLowerCase() > b.innerHTML.toLowerCase();
}
$this = $("ol#table1");
var list = $this.children();
list.sort(sort_by_name);
console.log(list);
$this.html(list); 
```

HTML

```
<ol id="table1" style="display: block; ">
   <li class="menu__run">I</li>
   <li class="menu__run">IXX</li>
   <li class="menu__run">I</li>
   <li class="menu__run">I</li>
   <li class="menu__run">I</li>
   <li class="menu__run">I</li>
   <li class="menu__run">I</li>
   <li class="menu__run">I</li> 
   <li class="menu__run">IXX</li>
   <li class="menu__run">I</li>
   <li class="menu__run">I</li>
   <li class="menu__run">I</li>
   <li class="menu__run">I</li>
   <li class="menu__run">I</li>
   <li class="menu__test">st</li>
   <li class="menu__test">st</li>
   <li class="menu__test">st</li>
</ol> 
```

[小提琴示例](http://jsfiddle.net/Qww87/4/)

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-17T06:40:00.057

有更好的排序方法。

1.  您需要一个返回正确值的比较函数：-1、0 和 1。
2.  `localeCompare()`就是这样一个比较函数。
3.  您可以只移动 DOM 元素而不是重新生成 HTML。
4.  您可以直接在原始选择器中获取 LI 元素。
5.  `"#table1"`是比 更有效的选择器`"ol#table1"`。

我建议这样做：

```
$("div#btn").click(function() {
    var sort_by_name = function(a, b) {
        return a.innerHTML.toLowerCase().localeCompare(b.innerHTML.toLowerCase());
    }

    var list = $("#table1 > li").get();
    list.sort(sort_by_name);
    for (var i = 0; i < list.length; i++) {
        list[i].parentNode.appendChild(list[i]);
    }
});​ 
```

你可以在这里看到工作：http: [//jsfiddle.net/jfriend00/yqd3w/](http://jsfiddle.net/jfriend00/yqd3w/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-17T06:32:04.607

自[定义 compareFunction](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort)需要返回 -1、0 或 1。

```
function sort_by_name(a, b) {
    var sa = a.innerHTML.toLowerCase(), sb = b.innerHTML.toLowerCase();
    return sb<sa ? -1 : sb>sa ? 1 : 0;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-17T06:33:02.467

```
var sort_by_name = function(a, b) {
    return $(a).text().toLowerCase().localeCompare($(b).text().toLowerCase());
} 
```

你可以使用 localeCompare 来让事情变得更加优雅和可行。

见 jsfiddle [http://jsfiddle.net/Qww87/11/](http://jsfiddle.net/Qww87/11/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T06:33:42.393

根据文档，它需要数值。更易懂：

```
 var sort_by_name = function(a, b) {
         if(a.innerHTML.toLowerCase() < b.innerHTML.toLowerCase()) return -1;
         if(a.innerHTML.toLowerCase() > b.innerHTML.toLowerCase()) return 1;
         return 0;
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-13T16:59:48.503

使用我的 jquery 插件排序内容：

```
 $('ol#table1').sortContent({asc:true}) 
```

就是这样！

演示：http: [//jsfiddle.net/abdennour/SjWXU/](http://jsfiddle.net/abdennour/SjWXU/)

# iphone - 如何在 iPhone SDK 中将瘦图像更改为胖图像？

> ID：10186200
> 
> 赞同：4
> 
> 时间：2012-04-17T06:27:16.840
> 
> 标签：iphone, image-processing

嗨，有什么方法可以在 iPhone SDK 中将您的图像瘦尺寸更改为胖尺寸，反之亦然？![像这张图片的东西](../Images/e5e3caacb94c434db0473cb39aebd05e.png)

在这个应用程序中，我想为用户提供一种通过滑动滑块将其图像从常规尺寸更改为胖尺寸的可能性，他可以在 iPhone SDK 中测量其尺寸？我认为这可以通过获取图像的像素来实现我已经尝试过这段代码来获取图像的像素，但它只是从图像中删除了颜色。

```
UIImage *image      = [UIImage imageNamed:@"foo.png"];

CGImageRef imageRef = image.CGImage;
NSData *data        = (NSData *)CGDataProviderCopyData(CGImageGetDataProvider(imageRef));
char *pixels        = (char *)[data bytes];

// this is where you manipulate the individual pixels
// assumes a 4 byte pixel consisting of rgb and alpha
// for PNGs without transparency use i+=3 and remove int a
for(int i = 0; i < [data length]; i += 4)
{
    int r = i;
    int g = i+1;
    int b = i+2;
    int a = i+3;

    pixels[r]   = pixels[r]; // eg. remove red
    pixels[g]   = pixels[g];
    pixels[b]   = pixels[b];
    pixels[a]   = pixels[a];
}

// create a new image from the modified pixel data
size_t width                    = CGImageGetWidth(imageRef);
size_t height                   = CGImageGetHeight(imageRef);
size_t bitsPerComponent         = CGImageGetBitsPerComponent(imageRef);
size_t bitsPerPixel             = CGImageGetBitsPerPixel(imageRef);
size_t bytesPerRow              = CGImageGetBytesPerRow(imageRef);

CGColorSpaceRef colorspace      = CGColorSpaceCreateDeviceRGB();
CGBitmapInfo bitmapInfo         = CGImageGetBitmapInfo(imageRef);
CGDataProviderRef provider      = CGDataProviderCreateWithData(NULL, pixels, [data length], NULL);

CGImageRef newImageRef = CGImageCreate (
  width,
  height,
  bitsPerComponent,
  bitsPerPixel,
  bytesPerRow,
  colorspace,
  bitmapInfo,
  provider,
  NULL,
  false,
  kCGRenderingIntentDefault

  // the modified image
  UIImage *newImage   = [UIImage imageWithCGImage:newImageRef];
  imgView.image = newImage; 
```

我也尝试过从这段代码中拉伸图像。

```
UIImage *stretchImage = [image stretchableImageWithLeftCapWidth:10 topCapHeight:10]; 
```

有谁能够帮助我？我没有找到任何可以为我提供这种功能的框架或 SDK。我已经用谷歌搜索了很长时间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T02:54:58.457

碰巧的是，我正在做的事情几乎和你现在为我们公司描述的一样。我们正在处理面孔，这是一个更容易现实地解决的问题。

这是一张之前的图片（你的真实的）

![邓肯马克杯之前](../Images/ac9f30249cc17da7733499b092c0bb3a.png)

这是一个“胖脸”的转变：

![邓肯马克杯之后](../Images/409ff06a0f39b7f942391526726704c0.png)

我所做的是将图像导入 OpenGL 纹理，然后将该纹理应用于网格。我对网格应用了一组更改，将某些点挤压得更近，而将其他点拉得更远。获得逼真的胖脸需要大量微调，但我认为效果相当不错。

一旦我计算出网格，OpenGL 就会“繁重”地转换图像，而且速度非常快。一切都设置好后，实际上绘制转换后的图像是一个调用。

这是相同的图像，显​​示了网格线：

[带有网格线的胖脸 http://imageshack.com/a/img404/8049/afterwithlines.jpg](http://imageshack.com/a/img404/8049/afterwithlines.jpg)

我花了几个星期的全职工作来完成基本的网格变形工作（对于一个失败的客户项目），然后又花了一周左右的时间来对胖脸布局进行微调。将整个东西变成可销售的产品仍然是一项正在进行的工作。

我提出的算法足够快，可以将胖变换（以及其他各种变换）应用到来自 iOS 摄像头的视频输入，速度为 30 FPS。

为了进行这种图像处理，您需要了解三角、代数、指针数学、转换矩阵，并对如何编写高度优化的代码有扎实的了解。

我正在使用 Apple 新的 Core Image 人脸识别代码来查找图像中的人脸特征，并使用眼睛和嘴巴的坐标作为转换的起点。

你的项目雄心勃勃。您必须进行一些严肃的图像处理才能找到所有特征，追踪它们的轮廓，然后弄清楚如何转换图像以获得令人信服的脂肪效果。您需要在精心控制的条件下摆姿势、照明和拍摄的高分辨率源图像才能获得良好的效果。

对于当前 iOS 设备的计算能力而言，这可能太过分了，而你需要进行的那种图像识别来找出身体部位以及如何转换它们将是非常困难的。您可能想查看开源 OpenCV 项目作为问题的图像识别部分的起点。

# mod-rewrite - 用于 FastCGI 的 Flask .htaccess

> ID：10186204
> 
> 赞同：0
> 
> 时间：2012-04-17T06:27:34.137
> 
> 标签：mod-rewrite, fastcgi, flask

我正在尝试让我的 Flask 应用程序在 Hostgator 共享帐户上运行。我无法正确配置 mod_rewrite 规则。我`dispatch.fcgi`作为 URL 的一部分出现，例如`www.example.com/dispatch.fcgi/news/`. 我该如何解决？

这是我的.htacess：

```
RewriteEngine On
AddHandler fcgid-script .fcgi
RewriteRule ^(dispatch\.fcgi/.*)$ - [L]
RewriteRule ^(.*)$ dispatch.fcgi/$1 [L] 
```

我尝试了许多变体，它们都不适合我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:50:51.030

找到了解决方案。现在它在[Flask 文档](http://flask.pocoo.org/docs/deploying/fastcgi/)中。检查“配置 Apache”部分。

# tfs - 要合并的相同代码库差异

> ID：10186209
> 
> 赞同：0
> 
> 时间：2012-04-17T06:28:05.250
> 
> 标签：tfs

我们在 TFS 中有 2 个具有相同代码库的项目。2 个开发团队正在研究这些。我们现在将代码合并到一个项目中，这不是一件容易手动完成的任务。在开始单独开发之前，我们没有使用 TFS 提供的任何功能来简化此类工作。像分支，标签或任何其他。

我能否获得一些**指南或最佳实践来规划**此类工作，以便我们将来可以采用它来克服此类工作。

**面向开发人员的 TFS 指南**链接也将有所帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:28:54.820

[TFS 分支指南](http://vsarbranchingguide.codeplex.com/)可能是一个不错的起点。它将帮助您根据不同的使用场景构建源代码

您可能还想查看以下问题的答案：[如何在 TFS 中分支和合并](https://stackoverflow.com/q/783674/63179)

关于“TFS 开发人员指南”，[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms181368.aspx)是一个很好的起点。除此之外，请考虑已出版的各种书籍 - 那里有一些不错的书籍。

# java - Java中的未知NullPointerException

> ID：10186211
> 
> 赞同：5
> 
> 时间：2012-04-17T06:28:07.413
> 
> 标签：java

以下代码段使用简单的 Java 代码。

```
package pkg;

final public class Main
{
    final private class Demo
    {
        private Integer value = null;

        public Integer getValue()
        {
            return value;
        }
    }

    private Integer operations()
    {
        Demo demo = new Demo();
        return demo==null?new Integer(1):demo.getValue();
    }

    public static void main(String[] args)
    {
        Main main=new Main();
        System.out.println("Value = " + String.valueOf(main.operations()));
    }
} 
```

上面的代码按预期工作，没有问题，并显示`Value = null`在控制台上。

在下面的`return`声明中，

```
return demo==null?new Integer(1):demo.getValue(); 
```

由于`demo`类型`Demo`为**not** `null`的对象，其后的表达式被执行，该表达式在`:`返回的内部类中`demo.getValue()`调用，最后，它被转换为 String 并显示在控制台上。`getValue()``Demo``null`

但是当我修改`operations()`如下所示的方法时，

```
private Integer operations()
{
    Demo demo = new Demo();    
    return demo==null?1:demo.getValue();
} 
```

它抛出`NullPointerException`。如何？

* * *

我的意思是当我使用这个`return`语句时

```
return demo==null?new Integer(1):demo.getValue(); 
```

它有效（不抛出`NullPointerException`）

当我使用以下**类似** `return`的语句时

```
return demo==null?1:demo.getValue(); 
```

它导致`NullPointerException`. 为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-17T06:34:33.073

这个说法：

```
return demo==null?1:demo.getValue(); 
```

实际上正在被转换成这样的东西：

```
int tmp = demo == null ? 1 : demo.getValue().intValue();
return (Integer) tmp; 
```

[根据JLS 第 15.25 节中](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.25)规定的规则，使用[二进制数字提升 (5.6.2)](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.6.2)将条件表达式的类型确定为`int`(not ) 。从空引用到then 的转换会触发.`Integer``int``NullPointerException`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T06:35:20.103

```
return demo==null?new Integer(1):demo.getValue(); 
```

在这种情况下，表达式的类型是整数，而 null 是合法值。

```
return demo==null?1:demo.getValue(); 
```

在这种情况下，表达式的类型是 int，因此您的 Integer 返回值会自动取消装箱。因为它是空的，所以它会抛出一个 NPE。

# android - SharedPreferences 值未更新

> ID：10186215
> 
> 赞同：25
> 
> 时间：2012-04-17T06:28:21.480
> 
> 标签：android, xml, sharedpreferences

我正在尝试更新**SharedPreferences**的值，这是我的代码：

```
edit = PreferenceManager.getDefaultSharedPreferences(this).edit();
edit.putString(Settings.PREF_USERNAME+"",txtuser);
edit.putString(Settings.PREF_PASSWORD+"",txtpass);
edit.commit();" 
```

问题是当我访问这个值时，它没有返回更新的值，它给了我一个 SharedPreferences 的值。

但是当我确认**XML**文件中的数据时，数据会更新。

重新启动我的应用程序后，我得到了更新的值。所以它需要我重新启动应用程序以获取更新的值。
那么，一旦发生变化，如何获取这些更新的值呢？

提前致谢

**这是我的整个代码：**

```
@Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);
        ctx=this;

            status=PreferenceManager.getDefaultSharedPreferences(this).getString(Settings.PREF_STATUS, Settings.DEFAULT_STATUS);// get old value
        submit.setOnClickListener(new View.OnClickListener() {
          @Override
            public void onClick(View v) {

                  on(ctx,true);//  function will call and value is updated

                }
            }});    

     status=PreferenceManager.getDefaultSharedPreferences(this).getString(Settings.PREF_STATUS, Settings.DEFAULT_STATUS);// this should give me a updated value but gives old value

    }
    public static boolean on(Context context) {
        return PreferenceManager.getDefaultSharedPreferences(context).getBoolean(Settings.PREF_ON, Settings.DEFAULT_ON);
    }

    public static void on(Context context,boolean on) {
            if (on) Receiver.engine(context).isRegistered(); //
        }

**********in reciver file***********
public void isRegistered ) {
        Editor edit = PreferenceManager.getDefaultSharedPreferences(Receiver.mContext).edit();
        edit.putString(Settings.PREF_STATUS+"","0");
        edit.commit();
} 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-04-17T06:55:31.883

而不是使用`edit.commit();`，你应该使用`edit.apply();`。**Apply**将立即更新首选项对象并*异步*保存新值，以便您读取最新值。

* * *

***犯罪（）***

> 将您的首选项更改从该编辑器提交回它正在编辑的 SharedPreferences 对象。这会自动执行请求的修改，替换 SharedPreferences 中当前的任何内容。
> 
> 请注意，当两个编辑器同时修改首选项时，最后一个调用 commit 的人获胜。
> 
> 如果您不关心返回值并且您在应用程序的主线程中使用它，请考虑改用 apply()。

**申请（）**

> 将您的首选项更改从该编辑器提交回它正在编辑的 SharedPreferences 对象。这会自动执行请求的修改，替换 SharedPreferences 中当前的任何内容。
> 
> 请注意，当两个编辑器同时修改首选项时，最后一个调用 apply 的人获胜。
> 
> 与将其首选项同步写入持久存储的 commit() 不同，apply() 会立即将其更改提交到内存中的 SharedPreferences，但会开始异步提交到磁盘，并且不会通知您任何失败。如果此 SharedPreferences 上的另一个编辑器在 apply() 仍未完成时执行常规 commit()，则 commit() 将阻塞，直到所有异步提交以及提交本身完成。
> 
> 由于 SharedPreferences 实例是进程中的单例，因此如果您已经忽略了返回值，则可以安全地将任何 commit() 实例替换为 apply()。
> 
> 您无需担心 Android 组件生命周期及其与 apply() 写入磁盘的交互。该框架确保在切换状态之前完成来自 apply() 的动态磁盘写入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-27T01:18:01.380

好吧，即使我的回答是在问题提出 3 年后出现的，我希望它会有所帮助。问题似乎不是来自提交或应用，而是来自代码结构。

让我们解释一下：在智能手机上，您运行一个 APP，但您不会像我们在计算机上那样退出该 APP。这意味着当您回到智能手机的菜单时，APP 仍在“运行”。当您再次“点击”APP图标时，您不会重新运行APP，而只是将其唤醒。在 juned 代码中，我们可以看到他在 Create 函数中调用了 getDefaultSharedPreferences。

所以他在第一次运行APP时会调用getDefaultSharedPreferences。但是当他将APP设置为后台然后唤醒APP时，呼叫没有完成。

我遇到了同样的问题：我检查我的 APP 是否有 SharedPreference。如果没有，我会提示一个表单向用户询问价值。如果是，我会检查偏好的日期。如果太旧，我提示表格。在表单之后，我将首选项保存为当前日期。我注意到的是，关于 SharedPreference 存在的测试（设置在与 juned 相同的位置）仅在 APP 的第一次运行时完成，但在我唤醒 APP 时没有完成。这意味着我无法检查我的 SharedPreferences 的时间限制！

如何解决？只需添加：

```
 @Override
          public void onResume(){
          super.onResume();
         // And put the SharedPreferences test here
          } 
```

此代码将在 APP 首次运行时调用，并且每次用户唤醒它时都会调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T06:37:46.353

希望它会帮助你..

```
SharedPreferences mypref = PreferenceManager.getDefaultSharedPreferences(this);
SharedPreferences.Editor prefsEditr = mypref.edit();
prefsEditr.putString("Userid", UserId);
prefsEditr.commit();

String task1 = mypref.getString("Userid", ""); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T06:40:14.050

试试这个代码：

```
SharedPreferences edit = PreferenceManager.getDefaultSharedPreferences(this);
SharedPreferences.Editor editor1 = edit.edit();
editor.putString(Settings.PREF_USERNAME + "", txtuser);
editor.putString(Settings.PREF_PASSWORD + "", entered_name);
editor.commit(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-15T14:46:55.097

**像这样试试**

```
public SharedPreferences prefs;
SharedPreferences.Editor editor = prefs.edit(); 
editor.putString(Settings.PREF_USERNAME+"", txtuser);
editor.putString(Settings.PREF_PASSWORD+"", entered_name);
editor.apply() 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-17T06:33:02.360

像这样试试

```
public SharedPreferences prefs;
SharedPreferences.Editor editor = prefs.edit(); 
editor.putString(Settings.PREF_USERNAME+"", txtuser);
editor.putString(Settings.PREF_PASSWORD+"", entered_name);
editor.commit(); 
```

# c - 数组下标的类型为 'char'

> ID：10186219
> 
> 赞同：4
> 
> 时间：2012-04-17T06:28:38.283
> 
> 标签：c, compiler-warnings, ctype

我有以下代码从命令行读取参数。如果字符串是 1 个字符长和一个数字，我想用它作为退出值。编译器在第二行给我一个警告（数组下标的类型为 'char' ）此错误来自 "&&" 之后的第二部分。

```
 if (args[1] != NULL) {
        if ((strlen(args[1]) == 1) && isdigit(*args[1]))
            exit(((int) args[1][0]));
        else
            exit(0);
    }
} 
```

此外，当我使用不同的编译器时，下一行（退出）会出现两个错误。

```
builtin.c: In function 'builtin_command':
builtin.c:55: warning: implicit declaration of function 'exit'
builtin.c:55: warning: incompatible implicit declaration of built-in function 'exit' 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-17T06:49:17.143

问题是`isdigit()`宏接受一个整数参数，它要么是 EOF 值，要么是`unsigned char`.

ISO/IEC 9899:1999（C 标准 - 旧），§7.4 字符处理`<ctype.h>`，¶1：

> 在所有情况下，参数都是 an `int`，其值应表示为 an`unsigned char`或应等于宏 EOF 的值。如果参数有任何其他值，则行为未定义。

在您的平台上，`char`是有符号的，因此如果您在 0x80..0xFF 范围内有一个字符，它将被视为负整数。宏的通常实现`isdigit()`是使用参数来索引标志位数组。因此，如果您`char`从 0x80..0xFF 范围内传递 a，您将在数组开始之前进行索引，从而导致未定义的行为。

```
#define isdigit(x)  (_CharType[(x)+1]&_Digit) 
```

您可以`isdigit()`通过以下两种方式之一安全地使用：

```
int c = getchar();

if (isdigit(c))
    ... 
```

或者：

```
if (isdigit((unsigned char)*args[1]))
    ... 
```

在后一种情况下，您知道该值不会是 EOF。请注意，这是不行的：

```
int c = *args[1];

if (isdigit(c))  // Undefined behaviour if *args[1] in range 0x80..0xFF
    ... 
```

* * *

关于“函数退出的隐式定义”的警告意味着你没有包括`<stdlib.h>`但你应该这样做。

您可能还注意到，如果用户给您一个 2 作为第一个参数的第一个字符，退出状态将是 50，而不是 2，因为`'2'`是（通常是 ASCII 和 UTF-8 和 8859-1 等）字符代码 50（`'0'`是 48 等）。通过`2`使用`*args[1] - '0'`作为`exit()`. 您不需要对该表达式进行强制转换，尽管它不会造成太大伤害。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T06:46:32.073

您使用的编译器似乎有一个用于 isdigit 的宏（而不是一个函数，如果是这种情况，您不会收到警告），它使用参数作为数组的下标。这就是为什么 isdigit 将 INT 作为参数，而不是 char。

删除警告的一种方法是将您的 char 转换为 int ：

```
isdigit(*args[1]) => isdigit((int)(*args[1])) 
```

第二个警告表示您想使用退出功能，但尚未定义。这意味着您必须执行所需的#include。

```
#include <stdlib.h> 
```

是 c 库中使用 exit(int) 函数的标准。

顺便说一句，如果这段代码在你的“main”函数中，你不能检查“arg[1] == NULL”，如果用户没有在命令行上提供任何参数，这可能会导致分段错误。您必须检查 argc 值（int 参数）是否大于 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T06:36:18.327

目前尚不完全清楚您想要作为退出代码给出什么，但您可能想要*字符*`args[1][0] - '0'`表示的十进制值而不是字符的代码。

如果你这样做，你会产生该表达式类型的副作用，`int`并且你不会看到警告。

因为`exit`您可能忘记包含头文件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-17T06:33:51.977

尝试改变

```
isdigit(*args[1]) 
```

到

```
isdigit(args[1][0]) 
```

你的其他错误是因为你没有使用`#include <stdlib.>`which 定义了`exit`函数。

# java - 如何将 ArrayList 的字符串表示形式转换为 ArrayList

> ID：10186220
> 
> 赞同：0
> 
> 时间：2012-04-17T06:28:38.517
> 
> 标签：java

我有一个 ArrayList，我将其转换为 String

```
ArrayList str = (ArrayList) retrieveList.get(1);
...

makeCookie("userCredentialsCookie", str.toString(), httpServletResponce);
....

private void makeCookie(String name, String value, HttpServletResponse response) {

    Cookie cookie = new Cookie(name, value);
    cookie.setPath("/");
    response.addCookie(cookie);

} //end of makeCookie() 
```

现在，当我检索 cookie 值时，我得到了字符串，但我再次想将其转换为 ArrayList 之类的

```
private void addCookieValueToSession(HttpSession session, Cookie cookie, String attributeName) {       
    if (attributeName.equalsIgnoreCase("getusercredentials")) {

        String value = cookie.getValue();
        ArrayList userCredntialsList = (ArrayList)value;  //Need String to ArrayList 
        session.setAttribute(attributeName, userCredntialsList);
        return;
    }

    String value = cookie.getValue();
    session.setAttribute(attributeName, value);

} //end of addCookieValueToSession 
```

我怎样才能再次将其转换为 ArrayList？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T06:35:50.670

`someList.toString()`不是序列*化*数据的正确方法，并且会给您带来麻烦。

由于您需要将其作为字符串存储在 cookie 中，因此请使用 JSON 或 XML。[google-gson](http://code.google.com/p/google-gson/)对你来说可能是一个很好的库：

```
ArrayList str = (ArrayList) retrieveList.get(1);
String content = new Gson().toJson(str);
makeCookie("userCredentialsCookie", content, httpServletResponce);
//...
ArrayList userCredntialsList = new Gson().fromJson(cookie.getValue(), ArrayList.class); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T06:44:12.507

只要它是一个对象`ArrayList`，`String`您就应该能够编写一个可以解析单个对象`String`以重新创建列表的小方法。的`toString`an`ArrayList`看起来像这样：

```
"[foo, bar, baz]" 
```

因此，如果该 String 在变量`value`中，您可以执行以下操作：

```
String debracketed = value.replace("[", "").replace("]", ""); // now be "foo, bar, baz"
String trimmed = debracketed.replaceAll("\\s+", ""); // now is "foo,bar,baz"
ArrayList<String> list = new ArrayList<String>(Arrays.asList(trimmed.split(","))); // now have an ArrayList containing "foo", "bar" and "baz" 
```

请注意，这是未经测试的代码。

此外，如果您的原始文件不是 s`ArrayList`列表，`String`而是说 an `ArrayList<MyDomainObject>`，则此方法将不起作用。为此，您应该找到如何正确序列化/反序列化您的对象 -`toString`通常不是一种有效的方法。如果是这样的话，值得更新这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T06:41:54.320

您不能直接将 a`String`转换为，`ArrayList`而是需要创建一个`ArrayList`对象来保存`String`值。

您需要在下面更改部分代码：

```
ArrayList userCredntialsList = (ArrayList)value;  //Need String to ArrayList 
session.setAttribute(attributeName, userCredntialsList); 
```

到：

```
ArrayList<String> userCredentialsList = ( ArrayList<Strnig> ) session.getAttribute( attributeName );
if ( userCredentialsList == null ) {
    userCredentialsList = new ArrayList<String>( 10 );
    session.setAttribute(attributeName, userCredentialsList);
}

userCredentialsList.add( value ); 
```

# c++ - C++ Win API 指定自定义工具栏位图？

> ID：10186224
> 
> 赞同：1
> 
> 时间：2012-04-17T06:29:04.640
> 
> 标签：c++, windows, winapi, bitmap, toolbars

图片和 c++ 文件可以在这里找到：http: [//phantomworksstudios.com/cpp/ss/](http://phantomworksstudios.com/cpp/ss/)

好的，所以我的工具栏一直有很多问题。例如它们无法正确显示，无论我做什么都无法通过高度和宽度设置按钮大小，位图向右偏移 1 个像素，即后退、前进、停止等图标。而其他图标，如剪贴板和新文件，是剩下的最后一个工具栏，被剪坏了。我认为它仍在尝试将工具栏列表剥离为 16x16，但我的位图图标为 14x14。

这些图标在一个 32 位深度的 bmp 文件中，一个是 16x16，而最后一个是 14x14

我不知道发生了什么，无论如何我似乎无法让它像它应该的那样工作：

![](../Images/5702c8cbf74ebe552dce97a6a22da8ac.png)

# extjs - 窗口关闭操作错误

> ID：10186226
> 
> 赞同：0
> 
> 时间：2012-04-17T06:29:18.810
> 
> 标签：extjs

我通过单击带有代码的 actioncolumn 图标使用 ExtJS 4 创建一个窗口：

```
{
        xtype:'actioncolumn',
        width: 20,
        items: [
            {
                tooltip: 'Log',
                icon: '/img/details.gif',
                handler: function(grid, rowIndex) {

                    var store = grid.getStore();

                    var record = store.getAt(rowIndex);

                    var ba = Ext.createByAlias('widget.ba');

                    ba.setTitle(ba.title + record.get('name'));

                    ba.down('grid').getStore().load({
                        params:{
                            id: record.get('id'),
                        },
                    });

                    ba.show();

                },

            },
        ]
    }, 
```

我的窗口有“closeAction：'destroy'”：

```
Ext.define('BB.view.Ba', {

    extend: 'Ext.window.Window',
    alias: 'widget.ba',
    title: 'Log ',
    layout: 'fit',
    width: 500,
    closeAction: 'destroy',
    items: {
            xtype: 'gridpanel',
            store: 'Bas',
            selType: 'rowmodel',
            columns: [
                {
                    dataIndex: 'order_id',
                    width: 60,
                    text: 'order id',
                }, {
                    dataIndex: 'time',
                    width: 100,
                    text: 'time',
                }, {
                    dataIndex: 'summ',
                    width: 80,
                    text: 'summ',
                    renderer: function(value) {
                        return value.toFixed(2); 
                    },
                }, {
                    dataIndex: 'comment',
                    width: 220,
                    text: 'comment',
                },
            ],
            //bbar: Ext.createByAlias('widget.paging'),           

        },

}); 
```

如您所见，Window 由别名“widget.ba”调用。

因此，当我第一次单击 actioncolumn 图标时一切顺利，但是如果我关闭该窗口（单击窗口右上角的关闭“交叉”）并再次单击 actioncolumn 图标，我会看到“未捕获的类型错误：无法读取属性”控制台日志中未定义的样式'，并在“ba.show();”上抛出 脚本的行。窗口没有显示，但在其他点击图标窗口渲染后，但它实际上不是一个窗口，它被渲染为视口的简单面板。

为什么如果“closeAction”设置为“destroy”会有这样的问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T06:42:19.483

我发现了问题。由于非常长的网格正在向下移动视口的底部，因此在视口中渲染了窗口。

# css - 通过本地 css 设置页面样式

> ID：10186231
> 
> 赞同：0
> 
> 时间：2012-04-17T06:29:42.667
> 
> 标签：css, browser

是否有某种方法可以设置外部网页的样式，以便当它在我们的浏览器中打开时，使用本地 css 文件（甚至可能是 javascript）对其进行样式设置。（对于 Firefox/Chromium）可以为 firefox 编辑 userContent.css（以及对于 chromium 的等效文件），但这反过来会影响将在浏览器上打开的每个网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T06:37:37.860

Firefox 有[`-moz-document domain(...)`规则](http://coreygilmore.com/blog/2008/10/23/per-site-custom-css-in-firefox/)，而 Chrome 有[*Stylish*扩展](https://chrome.google.com/webstore/detail/fjnbnpbmkenffdnngjfgmeleoegfcffe)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T15:10:15.783

`Greasemonkey!!`

这就是用户脚本的用途。

# html - 溢出：隐藏；文本溢出：省略号；空白：nowrap；不在字段集中工作？

> ID：10186233
> 
> 赞同：5
> 
> 时间：2012-04-17T06:29:46.043
> 
> 标签：html, css

我在 Google Chrome 和 Firefox 中使用`white-space: nowrap;`inside a时遇到问题（IE 的行为如我所愿）。`fieldset`

我想要发生的是只显示一行文本，隐藏任何多余的文本并添加省略号。这适用于我提到的所有三个浏览器，当我`div`在外面时，`fieldset`但一旦我把它移到里面就会中断。

下面的屏幕截图显示了“工作”和“不工作”的情况。

[![截屏](../Images/7f8fde01b1adc6e37711751182d1ef72.png)](https://i.stack.imgur.com/OUC3X.png)

底部`div`（外部`fieldset`）具有我想要的文本截断而不是 div 扩展的效果。

为什么会发生这种情况，我需要做些什么来防止它发生？

与屏幕截图相关的 HTML 如下所示。

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body style="background-color: #ccc;">
    <form action="">
    <div id="outer" style="background-color: #fff; width: 50%">
        <fieldset>
            <legend>Foo</legend>
            <div style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi posuere, elit id
                lobortis ultricies, mi velit dictum libero, pharetra dapibus libero lectus vel nibh.
                Mauris sem dolor, auctor vitae accumsan lacinia, rhoncus non mauris. Morbi ac mi
                eros, eu pretium massa. </div>
        </fieldset>
         <div style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi posuere, elit id
                lobortis ultricies, mi velit dictum libero, pharetra dapibus libero lectus vel nibh.
                Mauris sem dolor, auctor vitae accumsan lacinia, rhoncus non mauris. Morbi ac mi
                eros, eu pretium massa. </div>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:33:15.760

根据[另一个问题的答案](https://stackoverflow.com/a/7434846/103842)，`fieldset`必须设置宽度才能使其正常工作。通过设置宽度，一切正常。

看看[这个小提琴](http://jsfiddle.net/u3Q3p/58/)看看有什么不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T06:38:35.137

如果我没记错的话，你应该使用`word-wrap: break-word;`而不是`white-space: nowrap;`我没有测试我的代码，但我相信它会工作检查演示[http://jsfiddle.net/u3Q3p/1/](http://jsfiddle.net/u3Q3p/1/)

# regex - 使用正则表达式作为字符串的一部分

> ID：10186241
> 
> 赞同：1
> 
> 时间：2012-04-17T06:30:48.583
> 
> 标签：regex, vb.net

我有一个由 5 个字符组成的字符串，其中前两个字符应该在某个列表中，接下来的三个应该在另一个列表中。

我如何使用正则表达式验证它们？

例子：

*   前两个字符的列表`{VBNET, CSNET, HTML)}`

*   接下来三个字符的列表`{BEGINNER, EXPERT, MEDIUM}`

我的字符串将是: `VBBEG`, `CSBEG`, 等等。

我的正则表达式应该会发现输入字符串的前两个字符可以是 VB、CS、HT，其余的也应该是这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:35:06.343

像[这样](http://regexr.com?30lp4)的东西：

```
^(VB|CS|HT)(BEG|EXP|MED)$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T06:35:25.473

这个食谱对我有用：

```
^(VB|CS|HT)(BEG|EXP|MED)$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T06:47:29.003

以下表达式是否适用于更一般的情况（这样您就没有硬编码值）：`(^..)(.*$)` - 返回第一组中的前两个字母，以及第二组中的剩余字母。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T06:35:07.453

我想`(VB|CS|HT)(BEG|EXP|MED)`应该这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T07:07:08.740

如果你的字符串定义得这么好，你甚至不需要正则表达式——简单的字符串切片就可以了。

例如，在 Python 中，我们可能会说：

```
mystring = "HTEXP"

prefix = mystring[0:2]
suffix = mystring[2:5]

if (prefix in ['HT','CS','VB']) AND (suffix in ['BEG','MED','EXP']):
    pass # valid!
else:
    pass # not valid. :( 
```

不要在基本字符串操作可以使用的地方使用正则表达式。

# php - Magento 列出所有缺货商品

> ID：10186245
> 
> 赞同：3
> 
> 时间：2012-04-17T06:31:20.203
> 
> 标签：php, magento

我正在尝试制作一个列出所有缺货商品的 cms 页面。

```
protected function _getProductCollection()
   {

        $collection = Mage::getModel('catalog/product')->getCollection();
        $collection = $this->_addProductAttributesAndPrices($collection)
         ->addStoreFilter()
         ->addAttributeToSort('entity_id', 'desc') //<b>THIS WILL SHOW THE LATEST PRODUCTS FIRST</b>
         ->addAttributeToFilter('stock_status', 0)

         ->setPageSize($this->get_prod_count())
         ->setCurPage($this->get_cur_page());
        $this->setProductCollection($collection);
        return $collection;
   } 
```

但它不起作用。它列出了所有项目。列出所有 qty = 0 或 is_in_stock = 0 的项目的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T07:34:51.583

这是我一直在使用的功能

```
function getOutOfStockProducts()
{
        $products = Mage::getModel('catalog/product')
                ->getCollection()
                ->joinField(
                        'is_in_stock',
                        'cataloginventory/stock_item',
                        'is_in_stock',
                        'product_id=entity_id',
                        '{{table}}.stock_id=1',
                        'left'
                )
                ->addAttributeToFilter('is_in_stock', array('eq' => 0));

        return $products;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-17T07:37:04.873

你应该为此使用不同的集合

```
$outOfStockItems = Mage::getModel('cataloginventory/stock_item')
        ->getCollection()
        ->addFieldToFilter('is_in_stock', 0); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T09:05:37.167

这是我最终使用的方式。给出后端所有缺货项目的列表

```
protected function _getProductCollection()
   {

         $stockCollection = Mage::getModel('cataloginventory/stock_item')->getCollection()

        /*->addFieldToFilter('is_in_stock', 0);*/ //this can also be used to filter
        ->addFieldToFilter('qty', 0);

$productIds = array();

    foreach ($stockCollection as $item) {
        $productIds[] = $item->getOrigData('product_id');
    }

    $productCollection = Mage::getModel('catalog/product')->getCollection();
    $productCollection = $this->_addProductAttributesAndPrices($productCollection)
        ->addIdFilter($productIds)
         ->addAttributeToSort('entity_id', 'desc') //THIS WILL SHOW THE LATEST PRODUCTS FIRST
         ->setPageSize($this->get_prod_count())
         ->setCurPage($this->get_cur_page());
        $this->setProductCollection($productCollection);
        return $productCollection;
   }// _getProductCollection
}// Mage_Catalog_Block_Product_Outofstock 
```

# java - 从 Java 通过 LAN 共享数据库时 DB2 Express-C 连接中的问题

> ID：10186247
> 
> 赞同：0
> 
> 时间：2012-04-17T06:31:24.463
> 
> 标签：java, 64-bit, db2

我已经安装了 DB2 Express-C 9.7.5。它安装在 Windows 7（64 位）机器上，我创建了一个数据库 TESTXA。我的应用程序中使用的连接机制是：

```
Class.forName("com.ibm.db2.jcc.DB2Driver").newInstance();
Connection conn = DriverManager.getConnection("jdbc:db2://ABCCOMPUTER:50000/TESTXA", db2UserName, db2PassWord); 
```

使用上述 Java 代码在 ABCCOMPUTER 上成功创建了连接。但是，当我使用相同的 Java 代码通过 LAN 从另一个系统创建 DB2 连接时，例如，具有相同 db2UserName/db2PassWord 的 XYZCOMPUTER（Windows 7 机器）会引发异常：

```
com.ibm.db2.jcc.am.io: DB2 SQL Error: SQLCODE=-204, SQLSTATE=42704, SQLERRMC=USER.XA4APP, DRIVER=3.57.82
Which indicates "Connection authorization failure occurred.  Reason: User ID or Password invalid." 
```

在我的应用程序中，我需要在 DB2 中创建一个可以从 LAN 上的其他系统访问的数据库。应该在 XYZCOMPUTER 上查看什么来解决此问题？

（仅供参考：这不是 Windows XP 机器中 DB2 数据库共享的问题。上述机制正常工作。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:35:49.370

这应该不是 Java [JDBC](http://en.wikipedia.org/wiki/Java_Database_Connectivity)的问题。这一定是 Windows 7 安全问题的情况，因为无论是您自己的系统还是远程系统，DB2 类型 4 驱动程序都使用相同格式的连接字符串。您可以尝试以“以管理员身份运行”运行您的应用程序/工具。

# asp.net-mvc - 视图/模型/控制器的 MVC 3 DropDownList 语法

> ID：10186250
> 
> 赞同：0
> 
> 时间：2012-04-17T06:31:51.513
> 
> 标签：asp.net-mvc

我已经浏览了这里处理 MVC 以及如何使用 DropDownList 的大多数博客文章，但收效甚微。

我试图在这个链接上模仿一个帖子，但显然对我不起作用：[下拉菜单导致无效模型状态。ASP.NET MVC 3](https://stackoverflow.com/questions/9689045/drop-down-menu-causing-invalid-model-state-asp-net-mvc-3)

目标是为用户提供一个下拉列表，以在 HTTP GET 创建视图中选择一个家庭车库拥有多少辆汽车。

我目前收到的错误是：

> 编译器错误消息：CS1061：“MvcPropertyManagement.Models.Property”不包含“GarageId”的定义，并且找不到接受“MvcPropertyManagement.Models.Property”类型的第一个参数的扩展方法“GarageId”（您是否缺少使用指令还是程序集引用？）
> 
> 第 84 行： 第 85 行： 第 86 行：@Html.DropDownListFor(model => model.GarageId, Model.LkupGarageTypes) 第 87 行：
> @Html.ValidationMessageFor(model => model.GarageType) 第 88 行：

**我的模型：**

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using System.ComponentModel.DataAnnotations;
    using System.Web.Mvc;
    using MvcPropertyManagement.Models;
    using MvcPropertyManagement.Models.ViewModels;

    namespace MvcPropertyManagement.Models
    {
        public class Property
        {
            public bool Garage { get; set; }

            [Display(Name="Garage Capacity")]
            public string GarageType { get; set; }
    } 
```

**控制器：**

```
 using System;
    using System.Data;
    using System.Collections.Generic;
    using System.Data.Entity;
    using System.Linq;
    using System.Web;
    using System.Web.Mvc;
    using MvcPropertyManagement.Models;
    using MvcPropertyManagement.Models.ViewModels;

    public ActionResult Create()
    {
        PropertyViewModel viewModel = new PropertyViewModel();
        viewModel.LkUpGarageType = new SelectList(db.LkUpGarageTypes, "GarageTypeID",         "LkUpGarageType"); 
        return View(viewModel);
    } 
```

**属性视图模型：**

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;
    using System.Web.Mvc;
    using MvcPropertyManagement.Models;

    namespace MvcPropertyManagement.Models.ViewModels
    {
        public class PropertyViewModel
        {
            public int? GarageId { get; set; }
            public IEnumerable<SelectListItem> LkUpGarageType { get; set; }        
        }
    } 
```

**创建视图：**

```
<div class="editor-field">
    @Html.DropDownListFor(model => model.GarageId, Model.LkupGarageTypes)
    @Html.ValidationMessageFor(model => model.GarageType)
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T06:36:49.827

似乎您使用`MvcPropertyManagement.Models.Property`的是模型，而不是`MvcPropertyManagement.Models.ViewModels.PropertyViewModel`GarageId 所在的位置。

尝试将模型更改为`MvcPropertyManagement.Models.ViewModels.PropertyViewModel`视图：

```
@model MvcPropertyManagement.Models.ViewModels.PropertyViewModel 
```

**更新：** 用于模型的属性类：

```
public class Property
{
  public bool Garage { get; set; }

  [Display(Name="Garage Capacity")]
  public string GarageType { get; set; }

  public int? GarageId { get; set; }

  public IEnumerable<SelectListItem> LkUpGarageType { get; set; } 
} 
```

创建动作：

```
public ActionResult Create()
{
  Property viewModel = new Property();
  viewModel.LkUpGarageType = new SelectList(db.LkUpGarageTypes, "GarageTypeID",         "LkUpGarageType"); 
  return View(viewModel);
} 
```

# javascript - 为什么不用动画 GIF 而不是动画 CSS sprite？

> ID：10186257
> 
> 赞同：24
> 
> 时间：2012-04-17T06:32:53.350
> 
> 标签：javascript, animation, css-sprites, animated-gif

在最近的趋势中，我看到人们使用 JavaScript 而不是使用动画 GIF 来制作 CSS sprite 动画？

前任：

*   [http://www.google.com/doodles/eadweard-j-muybridges-182nd-birthday](http://www.google.com/doodles/eadweard-j-muybridges-182nd-birthday)（事实上，谷歌在其他涂鸦中也使用了这种技术）
*   [https://everyme.com/](https://everyme.com/)（“我”标志）
*   *还有很多...*

这只是为了展示或试验技术，还是有任何好处。我有兴趣知道好处，如果有的话。*我问的原因是我无法弄清楚，因为在这两种情况下我们都需要生成中间帧（主要使用补间技术）。*

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-17T06:38:45.417

*   **控制**

    您无法控制动画 GIF。你无法启动它们，也无法阻止它们。他们只是在加载后立即制作动画。

    使用精灵，您可以控制动画。您可以启动、停止和响应浏览器事件，平移动画。例如，Google Doodles 通常会在您单击它们时激活。

    在 9gag 中可以找到一个漂亮的 GIF 控制系统。您可以通过将它们附加到 DOM 来启动它们，并通过删除它们并使用预先生成的“第一帧视图”交换它们来停止它们。但这就是GIF的范围。

*   **独立实例**

    当您加载同一个 GIF 的多个实例时，所有这些实例都在页面上使用同一个图像并同时移动。如果你有一排跳舞的独角兽 GIF，它们会同时在跳舞。同步舞蹈！

    但是对于精灵，即使您使用相同的图像，动画也依赖于底层脚本。因此，如果一个精灵由一个脚本制作动画，而另一个由另一个脚本制作动画，则这两个动画可以独立运行，并且彼此不同。

    这使您免于创建另一个 GIF 并且很容易修改，因为您只更改脚本。

*   **确保流畅的动画**

    动画 GIF 只是在加载时进行动画处理，当互联网速度较慢时，动画会冻结，直到加载更多图像。

    相比之下，精灵的优点是您可以预先加载它们，确保预先加载所有图像。这确保用于该动画的资源在动画之前已经加载，以确保其动画尽可能流畅。

    但是，GIF 仍然是图像。您可以从 DOM 中动态加载它们并在将它们附加到 DOM 之前侦听加载事件。

*   **部分渲染**

    使用 PNG 精灵，您可以在动画中制作“部分”，将动画场景分解为部分。例如，当一个角色静止不动，但手臂在挥动时。您不需要为整个角色或整个场景设置动画。您可以将描绘角色身体精灵的元素置于“冻结”状态，而手臂是一个不同的动画元素。这节省了精灵表的空间和大小。谷歌 2012 年母亲节涂鸦就是一个很好的例子。

    相比之下，*大多数情况下*，GIF 动画中的每一帧都是整个图像，并且无论其中的任何内容是否移动都会进行动画处理。帧数越多，GIF 的大小就越大。

*   **GIF 无法缩放**

    GIF 用于图标。与 PNG 和 JPG 相比，文件大小与图像大小的比例在 GIF 中没有那么好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-24T11:45:27.593

除了梦想家约瑟夫的回答...

据我所知，或者至少过去是这样，GIF 文件不是真彩色，这是使用 JPG/PNG 作为 css sprite 的另一个原因。

# labview - 带有 Labiew 的 Playstation Eye

> ID：10186261
> 
> 赞同：0
> 
> 时间：2012-04-17T06:33:04.233
> 
> 标签：labview, playstation

有谁知道如何将 Playstation Eye 与 Labview 集成？能否以某种方式使用驱动程序让 Labview 将其识别为网络摄像头？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:26:08.753

你应该可以用视觉来做到这一点（安装 IMAQdx 和视觉开发模块）——它似乎是 DirectShow，IMAQ 可以做到——或者试试这个页面上的代码：[http ://www.labviewforum.de/thread -21279.html](http://www.labviewforum.de/thread-21279.html) - 它使用原始的 dll。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T23:09:15.770

由于 Windows 上的 PS3 Eye 没有官方 dll，唯一的选择是使用 Code Laboratries 的第 3 方驱动程序或通过 USB-RAW 命令直接连接硬件。然而，Code Laboratries PS3 实施似乎并非 100% 符合 Direct Show 标准。你可以让 PS3 Eye 与 Labview 一起工作（通过 Direct Show 和 IMAQ），但你会受到可用帧率的限制。

我试图直接从代码实验室连接 dll，但在我尝试的第二个函数中遇到了一个异常错误（参见已经引用的线程[http://www.labviewforum.de/thread-21279.html](http://www.labviewforum.de/thread-21279.html)）。然而，目前似乎有一个 Vi 包可用于 PS3 Eye 以支持 OSX 下的 LabView 并具有完整的可用帧率。更多信息可以在这里找到：http: [//labview.epfl.ch/](http://labview.epfl.ch/)

希望这可以帮助。最好的问候，扬

# c# - 单击 Flash（.swf 文件类型）后发生事件

> ID：10186262
> 
> 赞同：0
> 
> 时间：2012-04-17T06:33:13.437
> 
> 标签：c#, wpf, flash

这段代码在执行后会在一个窗口中打开一个 Flash。有什么办法：当点击Flash（不添加任何按钮）时，会发生什么事件？

```
private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        string filePath = @"C:\Users\IBM\Desktop\snailrunner1.swf";
        SWFFileHeader swfFile = new SWFFileHeader(filePath);
        this.Width = swfFile.FrameSize.WidthInPixels;
        this.Height = swfFile.FrameSize.HeightInPixels;

        WindowsFormsHost host = new WindowsFormsHost();
        FormFlashLibrary.FlashAxControl play = new FormFlashLibrary.FlashAxControl();

        host.Child = play;

        grdMain.Children.Add(host);

        play.Width = (int) this.Width;
        play.Height = (int) this.Height;

        play.LoadMovie(filePath);
        play.Play();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:56:45.677

取决于你想达到什么。

如果你只想处理 WindowsFormHost 的点击事件，它可以被认为是一个容器，有几个事件暴露出来：[WindowsFormsHost 类](http://msdn.microsoft.com/en-us/library/system.windows.forms.integration.windowsformshost.aspx)

如果您想响应 Flash 内容中的特定 Flash 控件，则要求它由 Flash 本身公开。[将外部 API 与 ActiveX 容器一起使用](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7cb0.html)

# ruby-on-rails - 需要卸载 rake 0.9.2.2 并安装 rake 0.8.7

> ID：10186263
> 
> 赞同：4
> 
> 时间：2012-04-17T06:33:17.363
> 
> 标签：ruby-on-rails, rake

我构建了一个新的干净 VM，安装了 rvm，并安装了 ruby​​ 1.9.2 并运行了`gem install rails --version '=3.0.7'`. 到目前为止，一切都很好。当我做 gem list rake 时，我看到 rake 0.9.2.2 已安装，我需要 rake 0.8.7。我阅读了有关卸载 rake 的信息。然后安装`gem install rake -v='0.8.7'`。这就是我所做并观察到的：

```
gem list rake
  rake (0.9.2.2, 0.8.7)
gem uninstall rake 0.9.2.2
  You have requested to uninstall the gem rake-0.8.7
  .......
  Continue [Yn]
  Successfully unistalled rake 0.8.7
  INFO: gem "0.9.2.2" is not installed

gem list rake
  rake (0.9.2.2) 
```

好的，所以它首先显示了两个版本的 rake，我指定删除 0.9.2.2，它说它正在卸载 0.8.7，并且它完成了 0.8.7 的卸载。（不是我输入的）最后它显示 0.9.2.2 仍然安装在 gem list rake 中。我已经多次经历了这个迭代，每次都得到相同的结果。

最后，我需要 Ruby 1.9.2；rails 3.0.7 和 rake 0.8.7。前两个我还好。但是我如何让 rake 回到 0.8.7？还是我看到的只是一些宝石库存中留下的一些垃圾，并不能反映现实？或者你能确定你真正拥有什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-05-22T07:15:51.440

尝试使用以下命令

```
rvm use @global && gem uninstall rake 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T14:16:33.663

我在使用预定义的常量“Ruby”和“LN_SUPPORTED”时遇到了同样的问题。

然而; 我的“宝石清单”只显示 rake 0.9.2.2。所以在我能够安装 0.8.7 之后，一切又开始工作了。

```
sudo gem install rake -v=0.8.7 
```

你能做一个：`sudo gem uninstall Rake`在尝试重新安装两个版本之前不指定一个版本来完全摆脱 rake 吗？或者可能（我知道它不受欢迎，但是......）删除 rake gem 文件夹？

另外，也许你可以添加`rake (0.9.2.2, 0.8.7)`到你的 gemfile 然后做一个`bundle update`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-25T18:36:53.330

这对我有用：

`gem uninstall rake --version 0.9.2.2`

# android - Android - JSON mySQL 查询给出 NetworkOnMainThreadException

> ID：10186266
> 
> 赞同：2
> 
> 时间：2012-04-17T06:33:25.147
> 
> 标签：android, mysql, database, json

我正在尝试运行此活动以查询数据库以填充表。我试图按照我在网上找到的一个片段，唯一的问题是，无论如何，我都会收到“connectionandroid.os.NetworkOnMainThreadException”错误。

正如许多论坛中所建议的那样，我尝试使用 AsyncTask 并在后台执行处理程序，但仍然没有。我知道将长查询发送到数据库时会出现错误，但此查询可能需要 0.1 秒。我在本地有数据库，尽管使用公共 IP 访问它，并且数据库非常小。

这是我的PHP代码：

```
<?php

$hostname_localhost ="localhost";
$database_localhost ="DB";
$username_localhost ="root";
$password_localhost ="pwd";

mysql_connect($hostname_localhost,$username_localhost,$password_localhost);

mysql_select_db($database_localhost);

$sql=mysql_query("select * from friendlist where Id1 = 1");
while($row=mysql_fetch_assoc($sql))
$output[]=$row;
print(json_encode($output));
mysql_close();
?> 
```

代码有效，就好像我转到页面一样，我看到显示的结果（我目前只有 3 行）。

这是java部分：

```
import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.net.ParseException;
import android.os.Bundle;
import android.util.Log;
import android.widget.Toast;

public class MySQLAndroidActivity extends ListActivity {

JSONArray jArray;
String result = null;
InputStream is = null;
StringBuilder sb=null;
HttpResponse response;
HttpEntity entity;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
//http post
try{
HttpClient httpclient = new DefaultHttpClient();

 HttpPost httppost = new HttpPost("http://X.X.X.X/test.php");

 httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
response = httpclient.execute(httppost);

 entity = response.getEntity();

 is = entity.getContent();

 }catch(Exception e){
     Log.e("log_tag", "Error in http connection"+e.toString());
     System.exit(1);
}

//convert response to string
try{
  BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
   sb = new StringBuilder();
   sb.append(reader.readLine() + "\n");

   String line="0";
   while ((line = reader.readLine()) != null) {
                  sb.append(line + "\n");
    }
    is.close();
    result=sb.toString();
    }catch(Exception e){
          Log.e("log_tag", "Error converting result "+e.toString());
    }
//parsing data
String idfriend;
String id1;
String id2;
try{
  jArray = new JSONArray(result);
  JSONObject json_data=null;
  for(int i=0;i<jArray.length();i++){
         json_data = jArray.getJSONObject(i);
         idfriend=json_data.getString("Idfriend");
         id1=json_data.getString("Id1");
         id2=json_data.getString("Id2");

         System.out.println("id1: " + id1);
     }
  }
  catch(JSONException e1){
   Toast.makeText(getBaseContext(), "No Id found" ,Toast.LENGTH_LONG).show();
  } catch (ParseException e1) {
   e1.printStackTrace();
 }
}
} 
```

我也尝试使用简单的 Activity 而不是 ListActivity。

我有一个几乎相似的代码，但是那个使用了不同的方法。实际上，它并没有得到结果，在 php 上，它只是返回一个字符，无论检索到 0 行还是更多行。在这种情况下，我需要更高级别的东西，因为我需要获取某些特定字段的值。

编辑：

根据要求，堆栈跟踪：

```
 Error in http connectionandroid.os.NetworkOnMainThreadException
  04-17 06:44:17.921: W/System.err(24207): java.lang.Exception
  04-17 06:44:17.921: W/System.err(24207):  at       com.mysql.android.MySQLAndroidActivity.onCreate(MySQLAndroidActivity.java:56)
  04-17 06:44:17.921: W/System.err(24207):  at       android.app.Activity.performCreate(Activity.java:4465)
  04-17 06:44:17.921: W/System.err(24207):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
  04-17 06:44:17.921: W/System.err(24207):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
  04-17 06:44:17.921: W/System.err(24207):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
  04-17 06:44:17.921: W/System.err(24207):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
  04-17 06:44:17.921: W/System.err(24207):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
  04-17 06:44:17.921: W/System.err(24207):  at android.os.Handler.dispatchMessage(Handler.java:99)
  04-17 06:44:17.921: W/System.err(24207):  at android.os.Looper.loop(Looper.java:137)
  04-17 06:44:17.931: W/System.err(24207):  at android.app.ActivityThread.main(ActivityThread.java:4424)
  04-17 06:44:17.931: W/System.err(24207):  at java.lang.reflect.Method.invokeNative(Native Method)
  04-17 06:44:17.931: W/System.err(24207):  at java.lang.reflect.Method.invoke(Method.java:511)
  04-17 06:44:17.931: W/System.err(24207):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
  04-17 06:44:17.931: W/System.err(24207):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
  04-17 06:44:17.931: W/System.err(24207):  at dalvik.system.NativeStart.main(Native Method) 
```

编辑2：

这与我使用 AsyncTask 所做的版本非常相似（我是动态创建它，没有编译器，因此它可能并不完美；但它与我之前所做的非常相似）：

```
 @Override
   public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.main);

      new LoadTask().execute();

  }

 private class LoadTask extends AsyncTask<Void, Integer, Void> {
            @Override
            protected void onPreExecute() {

            }

            @Override
            protected Void doInBackground(Void... params) {
                    synchronized (this) {

                    Looper.prepare();       
                    doStuff() //this method basically contains what it is inside the onCreate.

                    }

                    return null;
            }

       }
       } 
```

**- 我记得我被迫使用'Looper.prepare();'。所以我在 'doStuff();' 之前添加了它**

编辑2：

```
import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.net.ParseException;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Looper;
import android.util.Log;
import android.widget.Toast;

public class MySQLAndroidActivity extends ListActivity {

    JSONArray jArray;
    String result = null;
    InputStream is = null;
    StringBuilder sb = null;
    HttpResponse response;
    HttpEntity entity;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        new LoadTask.execute();

    }

    private class LoadTask extends AsyncTask < Void, Integer, Void > {@Override
        protected void onPreExecute() {

        }

        @Override
        protected Void doInBackground(Void...params) {

            Looper.prepare();

            doStuff();

            return null;

        }
    }

    public void doStuff() {
        ArrayList < NameValuePair > nameValuePairs = new ArrayList < NameValuePair > ();
        //http post
        try {
            HttpClient httpclient = new DefaultHttpClient();

            HttpPost httppost = new HttpPost("http://X.X.X.X/test.php");

            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            response = httpclient.execute(httppost);

            entity = response.getEntity();

            is = entity.getContent();

        } catch (Exception e) {
            Log.e("log_tag", "Error in http connection" + e.toString());
            System.exit(1);
        }

        //convert response to string
        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
            sb = new StringBuilder();
            sb.append(reader.readLine() + "\n");

            String line = "0";
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result = sb.toString();
        } catch (Exception e) {
            Log.e("log_tag", "Error converting result " + e.toString());
        }
        //parsing data
        String idfriend;
        String id1;
        String id2;
        try {
            jArray = new JSONArray(result);
            JSONObject json_data = null;

            System.out.println("Length " + jArray.length());
            Log.d("DB", "Length " + jArray.length());

            for (int i = 0; i < jArray.length(); i++) {

                System.out.println("counter " + i);
                json_data = jArray.getJSONObject(i);
                idfriend = json_data.getString("Idfriend");
                id1 = json_data.getString("Id1");
                id2 = json_data.getString("Id2");

                System.out.println("id1: " + id1);
            }
        } catch (JSONException e1) {
            Log.d("DB", "Error somewhere");
        } catch (ParseException e1) {
            e1.printStackTrace();
        }
    }
} 
```

提前致谢，

N。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T06:46:14.763

听说从ICS开始，不允许在UI（主）线程上进行网络操作。因此，您必须需要在单独的线程中执行此操作。所以要么使用**AsyncTask**、**Thread**或**HandlerThread*与 Looper 和 Handler***来执行 web 操作。如果您在运行 froyo 或姜饼的设备上尝试它，它会很好，但不能在 ICS 上。

关于您尝试通过处理程序或 AsyncTask 运行它，这取决于您是如何做到的。粘贴该代码，以便我看到问题。

* * *

**更新**

```
public class MySQLAndroidActivity extends ListActivity {

    private static final String url = "http://X.X.X.X/test.php";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity2);

        LoadTask t = new LoadTask();
        t.execute(null);

    }

    private static class LoadTask extends AsyncTask<Void, Void, Void> {
        @Override
        protected void onPreExecute() {

        }

        @Override
        protected Void doInBackground(Void... params) {
            doStuff();

            return null;
        }
    }

    public static void doStuff() {
        JSONArray jArray;
        String result = null;
        InputStream is = null;
        StringBuilder sb = null;
        HttpResponse response;
        HttpEntity entity;

        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        // http post
        try {
            HttpClient httpclient = new DefaultHttpClient();

            HttpPost httppost = new HttpPost(url);

            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            response = httpclient.execute(httppost);

            entity = response.getEntity();

            is = entity.getContent();

        } catch (Exception e) {
            Log.e("log_tag", "Error in http connection" + e.toString());
            System.exit(1);
        }

        // convert response to string
        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
            sb = new StringBuilder();
            sb.append(reader.readLine() + "\n");

            String line;
            while ((line = reader.readLine()) != null) {
                sb.append(line);
            }
            is.close();
            result = sb.toString();

            Log.i("json string", result);
        } catch (Exception e) {
            Log.e("log_tag", "Error converting result " + e.toString());
        }

        // parsing data
        String idfriend;
        String id1;
        String id2;
        try {
            jArray = new JSONArray(result);
            JSONObject json_data = null;

            System.out.println("Length " + jArray.length());
            Log.d("DB", "Length " + jArray.length());

            for (int i = 0; i < jArray.length(); i++) {

                System.out.println("counter " + i);
                json_data = jArray.getJSONObject(i);
                idfriend = json_data.getString("idfriend");
                id1 = json_data.getString("id1");
                id2 = json_data.getString("id2");

                System.out.println("id1: " + id1);
            }
        } catch (JSONException e1) {
            Log.d("DB", "Error somewhere");
        } catch (ParseException e1) {
            e1.printStackTrace();
        }
    }

} 
```

*有一些方法调用问题，最重要的是您从 JSONObject 中获取密钥作为**Idfriend, Id1, Id2**这是错误的，因为在您的 json 字符串中，密钥类似于**idfriend, id1, id2**。它区分大小写，这就是它崩溃的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T10:20:12.530

您应该阅读关于模型-视图-控制器模式（在 google 中查找）。该模式定义了您应该分别实现视图（用户界面）与模型（数据库访问。阅读有关 Dao 模式）和控制器（运行应用程序的逻辑，例如这些是主类）。

希望这对你有帮助！

# java - 堆栈和堆以及相等性测试

> ID：10186267
> 
> 赞同：1
> 
> 时间：2012-04-17T06:33:27.290
> 
> 标签：java

就引用及其在堆和堆栈上的实现而言，数组的相等性测试与整数的相等性测试有何不同？

如果您想知道为什么要进行如此不同的编辑，我可以发布新问题...

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:36:03.607

完整路径为：/user/web/docs/abc.html

基于 UNIX 只是意味着服务器的操作系统是某种 UNIX。

# android - 有什么方法可以检查 android 中的 Activity 是否已在清单文件中注册？

> ID：10186272
> 
> 赞同：0
> 
> 时间：2012-04-17T06:33:39.920
> 
> 标签：android, android-activity, manifest

有没有办法在启动之前检查 android 中的 Activity 是否已在清单文件中注册？

比如说：

```
 String test = "com.Hy5.activity.Navigate";  
             Intent intent = new Intent().setClassName(this.context,
                 test);                  intent.putExtra("params", params);  

            try {  
                ((Activity) context).startActivity(intent);  
            } catch (Exception e) {  
                            //e.printStackTrace();
        } // This Activity will implement 
```

在这里，我想检查测试活动是否已在清单中注册。

或者有什么方法可以读取/解析应用程序包中的这个 manifest.xml，就像我说的那样：getResources().getString(R.string.Sprint1)??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:38:35.183

如果你得到 ActivityNotFound 异常，这通常意味着它没有在清单中注册。你可以用它做点什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:38:05.453

使用 PackageManager.getActivityInfo() 如果它不存在，它将抛出 PackageManager.NameNotFoundException

不过，不确定您是否会通过这样做获得任何收益。

# c# - 如何通过卷 ID 获取驱动器信息

> ID：10186277
> 
> 赞同：9
> 
> 时间：2012-04-17T06:33:53.430
> 
> 标签：c#, c++, drive, driveinfo

我有一个带有卷 ID 的 txt 文件。

我需要从驱动器卷 ID (Windows) 中获取驱动器信息（驱动器号、驱动器大小等）：

卷 ID 采用以下格式：

```
\\?\Volume{XXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX} 
```

驱动器可以是可移动/本地磁盘

如何检索信息并不重要（可以是脚本、cpp、c#、java 代码）。

**编辑：**

我尝试使用 DriveInfo、Win32_LogicalDisk、Win32_Volume、Win32_PnpDevices - 但我找不到这个奇怪的 id ......在所有情况下，id 都有不同的格式

**更新：**

了解如何做到这一点。

你可以像这样枚举 Win32_Volume：

```
ManagementObjectSearcher ms = new ManagementObjectSearcher("Select * from Win32_Volume");    
foreach(ManagementObject mo in ms.Get())   
{
    var guid = mo["DeviceID"].ToString();

    if(guid == myGuid)
        return mo["DriveLetter"];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T06:41:34.783

试试用这个

```
System.Management.ManagementObjectSearcher ms =
new System.Management.ManagementObjectSearcher("SELECT * FROM Win32_DiskDrive");
foreach (ManagementObject mo in ms.Get())
{
    //Find by ID
} 
```

有关详细信息，请参阅此[Win32_DiskDrive 类](http://msdn.microsoft.com/en-us/library/aa394132%28VS.85%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T07:34:14.067

卷大小等很容易。只需使用正常的 Win32 方法即可。任何接受`"C:"`作为驱动器的函数也将接受**卷 GUID 路径**（因为这`\\?\Volume{XXX}`是正确调用的 a）。

“驱动器号”有点棘手，因为可能有 0、1 个或更多驱动器号。您需要致电`FindFirstVolumeMountPoint / FindNextVolumeMountPoint / FindVolumeMountPointClose`以获取所有这些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-18T23:27:23.760

有一个 API 函数： [GetVolumePathNamesForVolumeName](https://msdn.microsoft.com/en-us/library/windows/desktop/aa364998(v=vs.110).aspx)

它返回一个以空结尾的数组，以允许多个挂载点。如果您只有一个挂载点（典型），那么您可以将其读取为常规的以空字符结尾的字符串。

这比枚举磁盘/卷更有效，这可能导致空闲磁盘启动。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-04-17T06:43:12.867

您可以使用[`DriveInfo.GetDrives Method`](http://msdn.microsoft.com/en-us/library/system.io.driveinfo.getdrives.aspx)获取驱动器信息。这是来自 MSDN 的示例代码

```
DriveInfo[] allDrives = DriveInfo.GetDrives();

foreach (DriveInfo d in allDrives)
{
    Console.WriteLine("Drive {0}", d.Name);
    Console.WriteLine("  File type: {0}", d.DriveType);
    if (d.IsReady == true)
    {
        Console.WriteLine("  Volume label: {0}", d.VolumeLabel);
        Console.WriteLine("  File system: {0}", d.DriveFormat);
        Console.WriteLine(
            "  Available space to current user:{0, 15} bytes", 
            d.AvailableFreeSpace);

        Console.WriteLine(
            "  Total available space:          {0, 15} bytes",
            d.TotalFreeSpace);

        Console.WriteLine(
            "  Total size of drive:            {0, 15} bytes ",
            d.TotalSize);
    }
} 
```

# php - 如何创建 joomla 2.5 组件？

> ID：10186278
> 
> 赞同：14
> 
> 时间：2012-04-17T06:33:53.900
> 
> 标签：php, joomla, joomla-component

我已经在使用 joomla 组件创建应用程序。但这不是最好的方法，然后我想学习它。请为此发送最佳教程。:)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-17T07:13:21.810

这是[开发 Joomla! 的通用文档页面！组件](http://docs.joomla.org/Category%3aComponent_Development)。

Joomla！Doc[专门针对 2.5 中的组件的教程](http://docs.joomla.org/Developing_a_Model-View-Controller_%28MVC%29_Component_for_Joomla!2.5_-_Part_01)就是这个。

Joomla 的列表！Joomla 的所有版本的文档！可以在[这个页面](http://docs.joomla.org/Developing_a_Model-View-Controller_Component)上找到。

*@pikk 所引用的是 Joomla！1.5。*

*@chandresh 引用的页面是 2006 年针对 Joomla 1.0 的 Joomla 论坛问题。*

# iphone - 取消 UILocaleNotification 的问题

> ID：10186282
> 
> 赞同：0
> 
> 时间：2012-04-17T06:34:14.943
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我为我的应用程序创建了一个区域设置通知，它每天都会触发，在苹果开发者文档中也提到你只能触发 64 个通知，所以我的问题是如何防止这种限制？我的意思是我的通知计划每年触发一次，那么这是取消通知然后按预定计划再次触发的正确方法吗？

```
- (void)cancelLocalNotification:(UILocalNotification *)notification {

[[UIApplication sharedApplication] cancelLocalNotification:notification;

} 
```

这是我的通知代码：

```
- (void) notification  {

    NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSPersianCalendar];
    NSDate *now = [NSDate date];    
    NSDateComponents *componentsForFireDate = [calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit| NSSecondCalendarUnit ) fromDate: now];

    [componentsForFireDate year];
    [componentsForFireDate month];
    [componentsForFireDate day];
    [componentsForFireDate setHour:1];
    [componentsForFireDate setMinute:2];
    [componentsForFireDate setSecond:1];

    NSDate *fireDateOfNotification = [calendar dateFromComponents: componentsForFireDate];

    UILocalNotification *notification = [[UILocalNotification alloc]init];
    notification.fireDate = fireDateOfNotification;
    notification.timeZone = [NSTimeZone localTimeZone]; 
    notification.repeatInterval= NSDayCalendarUnit; 

    notification.alertAction = @"View";
    notification.soundName = UILocalNotificationDefaultSoundName;

        [[UIApplication sharedApplication] scheduleLocalNotification:notification];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T06:38:38.490

在这里阅读您的问题。它肯定解决了你[的问题重复 iOS 本地通知](http://useyourloaf.com/blog/2010/9/13/repeating-an-ios-local-notification.html)

```
NSCalendar *calendar = [NSCalendar autoupdatingCurrentCalendar];
        NSDate *pickerDate = [self.datePicker date];
        NSDateComponents *dateComponents = [calendar components:( NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit )
                                                       fromDate:pickerDate];
        NSDateComponents *timeComponents = [calendar components:( NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit )
                                                       fromDate:pickerDate];
        NSDateComponents *dateComps = [[NSDateComponents alloc] init];
        [dateComps setDay:[dateComponents day]];
        [dateComps setMonth:[dateComponents month]];
        [dateComps setYear:[dateComponents year]];
        [dateComps setHour:[timeComponents hour]];
        [dateComps setMinute:[timeComponents minute]];
        [dateComps setSecond:[timeComponents second]];
        NSDate *itemDate = [calendar dateFromComponents:dateComps];

        UILocalNotification *localNotif = [[UILocalNotification alloc] init];
        if (localNotif == nil)
            return;
        localNotif.fireDate = itemDate;
        localNotif.timeZone = [NSTimeZone defaultTimeZone];
        localNotif.alertBody = [eventText text];
        localNotif.alertAction = @"View";
        localNotif.soundName = audios;
        localNotif.applicationIconBadgeNumber = 1;

        [[UIApplication sharedApplication] scheduleLocalNotification:localNotif];
        [localNotif release]; 
```

# ios - 使用 nsxmlparser 解析 rss 提要时如何忽略非法字符？

> ID：10186283
> 
> 赞同：2
> 
> 时间：2012-04-17T06:34:28.303
> 
> 标签：ios, rss, nsxmlparser

使用 NSXMLParser（间接通过 Michael Waterfalls MWFeedParser 库）并解析以下 RSS 提要时：

[http://qdb.us/qdb.xml?action=latest](http://qdb.us/qdb.xml?action=latest)

```
NSURL *feedURL = [NSURL URLWithString:@"http://qdb.us/qdb.xml?action=random"];
self.feedParser = [[MWFeedParser alloc] initWithFeedURL:feedURL];
self.feedParser.delegate = self;
self.feedParser.feedParseType = ParseTypeFull; // Parse feed info and all items
self.feedParser.connectionType = ConnectionTypeAsynchronously;
[self.feedParser parse]; 
```

我收到了一个格式无效的 xml 文档，该文档似乎是提要中的非法字符。

[http://validator.w3.org/check?uri=http%3A%2F%2Fqdb.us%2Fqdb.xml%3Faction%3Dlatest&charset=utf-8&doctype=Inline&group=0&user-agent=W3C_Validator%2F1.1](http://validator.w3.org/check?uri=http%3A%2F%2Fqdb.us%2Fqdb.xml%3Faction%3Dlatest&charset=utf-8&doctype=Inline&group=0&user-agent=W3C_Validator%2F1.1)

我尝试将文档编码从 ISO-8859-1 更改为 UTF-8，但问题仍然存在。

如何识别非法字符，然后如何使它在遇到这些非法字符时解析 RSS 提要不会失败？

参考资料：（我已经调查过的链接）

[Objective-C / Cocoa Touch 中的 HTML 字符解码](https://stackoverflow.com/questions/1105169/html-character-decoding-in-objective-c-cocoa-touch/)

[https://stackoverflow.com/users/106244/michael-waterfall](https://stackoverflow.com/users/106244/michael-waterfall)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T01:00:31.820

我不知道如何忽略非法字符，但您可能会考虑在解析之前进行一些正则表达式更正以删除它们，但我建议使用 nsxmlparser 的 killxml instand，这对于非法字符可能没问题，[这里](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)是“如何选择iPhone 项目的最佳 XML 解析器”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-08T14:35:08.240

我在解析从我的 Enigma2 接收器的 REST API 抓取的 EPG 数据时发现了类似的东西。在这种情况下，一项服务正在推送带有非法字符 0x05 的 EPGInfo。
我已经为传入的 NSData 实现了一种清理方法。这是从我从 NSURLSession 收到的 NSData 中过滤这些 0x05 字节的穷人的方法，然后再将其传递给解析器：

```
-(NSData *)DataCleaned:(NSData *)data {
   NSData *clean = nil;
   const char *old = (const char *)data.bytes;
   char *flt = (char *)calloc( data.length, sizeof( char ) );
   NSInteger cnt = 0;
   for( NSInteger i = 0; i < data.length; i++ ) {
      if ( old[i] != 0x05 )
         flt[cnt++] = old[i];
   }
   clean = [NSData dataWithBytes:flt length:cnt];
   free( flt );
   return clean;
} 
```

就我而言，这解决了问题。但这当然需要在解析之前将响应加载到 NSData 中。

# mysql - 获取收件人的线程消息

> ID：10186287
> 
> 赞同：1
> 
> 时间：2012-04-17T06:34:34.623
> 
> 标签：mysql, sql, foreign-keys, primary-key

我有这样的数据库模式：

```
users
USERNAME (PK), SEX
Alex, F
John, M
Troy, M
Matt, M

messages
ID (PK), CREATOR (FK users), DATE_CREATED
1, John, 2012-04-15
2, Troy, 2012-04-16

message_recipients
ID, MESSAGE_ID (FK messages), RECIPIENT (FK users), DATE
1, 1, John, 2012-04-15
2, 1, Troy, 2012-04-15
3, 1, Matt, 2012-04-15
4, 2, Alex, 2012-04-16
4, 2, John, 2012-04-16 
```

挑战在于，我想获得一个只有 John、Troy 和 Matt 作为收件人的消息 ID。

这是我的查询：

```
SELECT mr1.MESSAGE_ID
FROM message_recipients mr1, message_recipients mr2
WHERE mr1.MESSAGE_ID = mr2.MESSAGE_ID
  AND mr1.RECIPIENT = mr2.RECIPIENT
  AND mr2.RECIPIENT = 'John'
  AND mr2.RECIPIENT = 'Troy'
  AND mr2.RECIPIENT = 'Matt' 
```

上面的 SQL 显示没有结果。

如果我执行此查询：

```
SELECT mr1.MESSAGE_ID
FROM message_recipients mr1, message_recipients mr2
WHERE mr1.MESSAGE_ID = mr2.MESSAGE_ID
  AND mr1.RECIPIENT_ID = mr2.RECIPIENT_ID
  AND (mr2.RECIPIENT_ID = 'John'
  OR mr2.RECIPIENT_ID = 'Troy'
  OR mr2.RECIPIENT_ID = 'Matt')
GROUP BY mr1.MESSAGE_ID 
```

结果：

```
MESSAGE_ID
1
2 
```

上面的结果是不正确的，因为我想看到的结果只有 1 (MESSAGE_ID)。

我做错什么了？有人可以启发我吗？

非常感谢，约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:38:16.970

我不确定你想要什么。但是一列不能是三件事。你可以只使用`IN`语法。像这样：

```
SELECT mr1.MESSAGE_ID
FROM message_recipients mr1, message_recipients mr2
WHERE mr1.MESSAGE_ID = mr2.MESSAGE_ID
  AND mr1.RECIPIENT = mr2.RECIPIENT
  AND mr2.RECIPIENT IN('John','Troy','Matt') 
```

或者`OR`像这样的语法：

```
SELECT mr1.MESSAGE_ID
    FROM message_recipients mr1, message_recipients mr2
    WHERE mr1.MESSAGE_ID = mr2.MESSAGE_ID
      AND mr1.RECIPIENT = mr2.RECIPIENT
      AND 
      (
      mr2.RECIPIENT = 'John'
      OR mr2.RECIPIENT = 'Troy'
      OR mr2.RECIPIENT = 'Matt'
      ) 
```

**编辑**

我仍然不确定你想要什么。但听起来你想要这样的东西：

```
SELECT
    m.ID AS MESSAGE_ID,
    m.CREATOR,
    mr.RECIPIENT,
    mr2.RECIPIENT
FROM
    messages AS m
    LEFT JOIN message_recipients AS mr
        ON m.ID=mr.MESSAGE_ID
        AND mr.RECIPIENT='Troy'
    LEFT JOIN message_recipients AS mr2
        ON m.ID=mr2.MESSAGE_ID
        AND mr2.RECIPIENT='Matt'
WHERE
    m.CREATOR='John' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T06:40:27.817

我认为你应该使用`OR`而不是`AND`

试试下面：

```
SELECT mr1.MESSAGE_ID
FROM message_recipients mr1 LEFT JOIN message_recipients mr2 
ON mr1.MESSAGE_ID = mr2.MESSAGE_ID
WHERE  mr1.RECIPIENT = mr2.RECIPIENT
  AND ( mr2.RECIPIENT = 'John'
  OR mr2.RECIPIENT = 'Troy'
  OR mr2.RECIPIENT = 'Matt') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T07:14:47.140

试试看-

```
SELECT mr1.MESSAGE_ID
FROM message_recipients mr1, message_recipients mr2
WHERE mr1.MESSAGE_ID = mr2.MESSAGE_ID
  AND mr1.RECIPIENT = mr2.RECIPIENT
  AND mr2.RECIPIENT = 'John'
  AND mr2.RECIPIENT in ('Troy','Matt') 
```

# cassandra - 如何从 Cassandra 的一个查询中获取多行的不同列？

> ID：10186289
> 
> 赞同：1
> 
> 时间：2012-04-17T06:34:39.583
> 
> 标签：cassandra, hector

是否可以在一个查询中从 Cassandra 中获取键为“1”的 col“a”和键“2”的 col“b”以及键“3”等的 cols“c”和“d”的值？

如果是，赫克托支持吗？

（所有这些列都在一个列族中并且属于同一类型。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:31:47.133

[cassandra thrift API ( http://wiki.apache.org/cassandra/API](http://wiki.apache.org/cassandra/API) )中的方法 mutliget_slice() 不支持它，并且 Hector 在此方法之上工作。

可以在客户端库中通过多次调用 get_slice 来实现便利方法，但无论如何都需要多次网络查询。

# java - 如何在java中查找函数使用的内存

> ID：10186291
> 
> 赞同：5
> 
> 时间：2012-04-17T06:34:41.440
> 
> 标签：java

我正在从我的代码（用 java 编写）中调用一个函数，并且我想知道该函数正在使用多少内存，并且请记住，我无法向该函数（我正在调用）添加任何代码。

例如-

```
 //my code starts
   .
   .
   .
   .
   myfunc();
 //print memory used by myfunc() here
  .
  .
 // my code ends 
```

这个怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T06:46:04.753

What you're trying to do is basically pointless. There is no such thing as *memory used by a function*. Your idea of comparing the total memory usage "before" and "after" function call does not have any sense: the function may change global state (which may decrease or increase total memory usage, and in some cases (e.g. cache filling) you probably won't want to consider the increase to count as "memory used by a function), or the garbage collector may run while you're inside of `myfunc` and decrease the total used memory.

The good question often contains the large part of an answer. What you should do is to correctly ask the question.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T07:58:26.070

我用这段代码成功了（不能保证它可以工作，但试试吧，它很有可能会给你你需要的东西）：

```
final Runtime rt = Runtime.getRuntime();
for (int i = 0; i < 3; i++) rt.gc();
final long startSize = rt.totalMemory()-rt.freeMemory();
myFunc();
for (int i = 0; i < 3; i++) rt.gc();
System.out.println("Used memory increased by " +
   rt.totalMemory()-rt.freeMemory()-startSize); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T07:12:41.983

> 但它是错误的，因为理想情况下，减法后它应该始终为零。

实际上是正确的，因为通常每个线程都有一个 TLAB（线程本地分配缓冲区），这意味着它以块的形式分配（因此每个线程可以同时分配）

关闭它`-XX:-UseTLAB`，您将看到分配的字节。

您应该多次运行它，因为使用此功能时可能会运行其他事情。

# objective-c - IBOutlets 必须是公开的吗？

> ID：10186292
> 
> 赞同：1
> 
> 时间：2012-04-17T06:34:43.687
> 
> 标签：objective-c, xcode, interface-builder

来自xib的出口？

有没有办法将其设为私有？

事实上，我对objective-c很困惑。面向对象的思想不是以封装为前提的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T06:57:24.433

你是对的，如果出口只与类的实现有关，那么它们不应该是“公共的”（在 .h 文件中声明）。

您可以在 .m 文件内的类扩展中声明插座。这些将被界面生成器识别。

在 Xcode 4.3 中，从模板创建的视图控制器子类为此目的自动添加了此类扩展。使用助手编辑器按住 Ctrl 并拖入 .m 文件将创建新的出口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T06:40:09.823

这是可能的，但不是真的:-)

一种“技巧”方式将类似于：[教程：封装](http://swish-movement.blogspot.com/2009/05/private-properties-for-iphone-objective.html)

并查看这个问题，并进行了精彩的讨论：[为什么 Objective-C 不支持私有方法？](https://stackoverflow.com/questions/2158660/why-doesnt-objective-c-support-private-methods/2159027#2159027)

# asp.net - 如何在 ASP.net 的页面中获取母版页的 Div？

> ID：10186295
> 
> 赞同：8
> 
> 时间：2012-04-17T06:34:46.650
> 
> 标签：asp.net, web-applications, html, master-pages, content-pages

我在我的 Web 应用程序中使用母版页。现在我正在创建多个内容页面。母版页中有一个带有标签的 Div。现在我想将该 Div 隐藏在一个内容页面中，而其他内容页面中的其他要求是获取 Div 内部的标签。

那么如何从内容页面隐藏母版页中的 Div 以及如何从内容页面获取该 Div 中定义的标签？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-17T07:07:12.063

在母版页中的 div 中添加属性：`runat="server"` 然后在内容页中编写以下代码来访问该 div：

```
 Control c=  this.Master.FindControl("masterDiv");// "masterDiv"= the Id of the div.
     c.Visible = false;//to set the div to be hidden. 
```

祝你好运！

# javascript - 如何在javascript中验证数字和大写字母

> ID：10186297
> 
> 赞同：5
> 
> 时间：2012-04-17T06:34:56.430
> 
> 标签：javascript, validation

我想验证密码：

*   至少包含 1 个数字
*   至少包含 1 个大写字母（大写）
*   至少包含 1 个普通字母（小写）

我用了这段代码

```
function validate()
{   
    var a=document.getElementById("pass").value
    var b=0
    var c=0
    var d=0;
    for(i=0;i<a.length;i++)
    {
        if(a[i]==a[i].toUpperCase())
            b++;
        if(a[i]==a[i].toLowerCase())
            c++;
        if(!isNaN(a[i]))
            d++;
    }
    if(a=="")
    {
        alert("Password must be filled")
    }
    else if(a)
    {
        alert("Total capital letter "+b)
        alert("Total normal letter "+c)
        alert("Total number"+d)
    }   
} 
```

让我困惑的一件事是，为什么如果我输入一个数字，它也算作大写字母？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T06:49:11.530

Regular expressions are more suitable for this. Consider:

```
var containsDigits = /[0-9]/.test(password)
var containsUpper = /[A-Z]/.test(password)
var containsLower = /[a-z]/.test(password)

if (containsDigits && containsUpper && containsLower)
....ok 
```

A more compact but less compatible option is to use a boolean aggregate over an array of regexes:

```
var rules = [/[0-9]/, /[A-Z]/, /[a-z]/]
var passwordOk = rules.every(function(r) { return r.test(password) }); 
```

Docs: [test](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/test), [every](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/every)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T06:40:25.020

"1".toUpperCase == "1" ！你对此有何看法:) 你可以像这样进行检查：

```
for(i=0;i<a.length;i++)
    {
        if('A' <= a[i] && a[i] <= 'Z') // check if you have an uppercase
            b++;
        if('a' <= a[i] && a[i] <= 'z') // check if you have a lowercase
            c++;
        if('0' <= a[i] && a[i] <= '9') // check if you have a numeric
            d++;
    } 
```

现在如果 b、c 或 d 等于 0，就有问题了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T06:43:12.783

如果无法转换字符，toUpperCase() 和 toLowerCase() 仍将返回字符，因此您的数字测试将成功。

`isNaN(a[i])`相反，在使用 toLowerCase/toUpperCase 进行测试之前，您应该首先检查它是否正确。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T14:56:52.813

很短的方法可能是：

```
var pwd = document.getElementById("pass").value,
    valid = Number(/\d/.test('1abcD'))+
            Number(/[a-z]/.test('1abcD'))+
            Number(/[A-Z]/.test('1abcD')) === 3; 
```

# python - 将 IP 配置从一个接口移动到另一个接口

> ID：10186298
> 
> 赞同：2
> 
> 时间：2012-04-17T06:35:02.867
> 
> 标签：python, linux, networking

我正在开发一个测试一个网络应用程序的 Python 脚本。作为测试的一部分，它需要将网络配置（IP 地址、路由...）从一个接口（*物理接口*）移动到另一个接口（*网桥*），测试完成后，将系统恢复到原始状态. 在 Python 中完成此任务的最优雅的方法是什么？

我想过的一些想法：

1.  *在测试过程中不要取消分配物理接口*的IP地址，以免路由丢失。但这意味着在测试期间，相同的 IP 地址将在*网桥上共存。*这会是某些特定 Linux 内核的问题吗？虽然，它似乎在我的系统上工作得很好......
2.  分配 IP 地址以*桥接*并从*物理接口*取消分配。易于在 python 中实现，因为这需要进行简单的`ifconfig`调用和解析。但是如果默认路由是通过*物理接口*，那么当我从*物理接口*取消分配IP地址时，它会同时消失。
3.  解析`ip route ls`输出并将路由与 IP 配置一起移动。这似乎是唯一合理的方法，但需要大量编码。

4.  也许有更优雅的东西？像`iptables-save eth0>eth0_conf`，`iptables-restore eth0_conf`？还有其他建议吗？

该测试工具必须是可移植的，并且能够在不同的 Linux 内核上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:38:21.273

我建议采用以下方法：

1.  确保网桥接口已关闭
2.  配置网桥接口
3.  执行`ifconfig eth0 down && ifconfig br0 up`

并恢复：

1.  执行`ifconfig br0 down && ifconfig eth0 up`

现在对于路线，这取决于您拥有什么样的路线。如果您使用显式接口定义静态路由，您唯一的选择似乎是`ip route ls`将它们解析并转换为新接口。

您还可以玩弄 up & down 命令的顺序以及多个路由表：

```
ip route add <whatever> table 2
ip rule add from br0 table 2 
```

但这可能会变得棘手，所以我的建议是坚持简单的解决方案，即使它包含更多编码。

这是另一个来自 xend`network-bridge`脚本的示例来实现这一点：

```
# Usage: transfer_addrs src dst
# Copy all IP addresses (including aliases) from device $src to device $dst.
transfer_addrs () {
    local src=$1
    local dst=$2
    # Don't bother if $dst already has IP addresses.
    if ip addr show dev ${dst} | egrep -q '^ *inet ' ; then
        return
    fi
    # Address lines start with 'inet' and have the device in them.
    # Replace 'inet' with 'ip addr add' and change the device name $src
    # to 'dev $src'.
    ip addr show dev ${src} | egrep '^ *inet ' | sed -e "
s/inet/ip addr add/
s@\([0-9]\+\.[0-9]\+\.[0-9]\+\.[0-9]\+/[0-9]\+\)@\1@
s/${src}/dev ${dst}/
" | sh -e
    # Remove automatic routes on destination device
    ip route list | sed -ne "
/dev ${dst}\( \|$\)/ {
  s/^/ip route del /
  p
}" | sh -e
}

# Usage: transfer_routes src dst
# Get all IP routes to device $src, delete them, and
# add the same routes to device $dst.
# The original routes have to be deleted, otherwise adding them
# for $dst fails (duplicate routes).
transfer_routes () {
    local src=$1
    local dst=$2
    # List all routes and grep the ones with $src in.
    # Stick 'ip route del' on the front to delete.
    # Change $src to $dst and use 'ip route add' to add.
    ip route list | sed -ne "
/dev ${src}\( \|$\)/ {
  h
  s/^/ip route del /
  P
  g
  s/${src}/${dst}/
  s/^/ip route add /
  P
  d
}" | sh -e
} 
```

# iphone - UIScrollView 分页在模拟器中工作正常，但应用程序在 15-20 页后在设备中崩溃

> ID：10186306
> 
> 赞同：0
> 
> 时间：2012-04-17T06:35:48.147
> 
> 标签：iphone, ios, ipad

我使用了启用分页的 UIScrollView。我有超过 1000 张图片，每页添加 12 张图片。每次滚动页面时，我都会加载 12 张图像。但是在滚动 15-20 页后，应用程序在设备中崩溃了。它适用于模拟器。请让我知道可能是什么问题？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T08:35:26.843

您没有提供任何代码，但正如所有评论所暗示的那样，这似乎是一个糟糕的内存管理案例。

解决此问题的一种方法是仅分配三个页面（每个页面包含 12 个图像），然后根据用户交互调整它们的位置和内容。

我想你会发现这两个链接很有帮助：

[创建循环和无限 UIScrollViews](http://iphonedevelopertips.com/user-interface/creating-circular-and-infinite-uiscrollviews.html)

[UIScrollView 无限滚动](https://stackoverflow.com/questions/3430267/uiscrollview-infinite-scrolling)

# eclipse - eclipse中没有动态web项目的选项

> ID：10186313
> 
> 赞同：2
> 
> 时间：2012-04-17T06:36:19.093
> 
> 标签：eclipse, web-services, google-app-engine

我需要在 Eclipse 中创建一个动态 Web 项目，但该选项不再出现。自从动态项目选项消失后，我安装了 Google Web Apps 引擎 (JAVA) 及其 SDK 以及 GWT。

此外，从 WSDL 文件生成 Web 客户端的选项也不再存在。我尝试重新安装 Eclipse 的 Web 应用程序工具包，但仍然无法正常工作。

任何找回这些选项的指针都会很棒

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:41:01.217

也许 Eclipse WTP 插件已被意外删除。[您是否尝试过使用此位置](http://download.eclipse.org/webtools/updates)重新安装 WTP ？如果我是你，我会从 strach 重新安装 Eclipse，或者甚至更好地尝试与**Google Plugin for Eclipse**无缝集成的[Spring ToolSuite](http://www.springsource.com/developer/sts) （使用 STS Dashboard 上的扩展选项卡*）*

# iphone - FBConnect API 最近在 iOS 中未显示共享页面

> ID：10186314
> 
> 赞同：0
> 
> 时间：2012-04-17T06:36:22.407
> 
> 标签：iphone, ios, fbconnect

我在我的应用程序中使用了“FBConnect API”进行 fb 共享..

在两三周前它工作正常。但现在它根本不显示共享页面。

有谁知道它有什么问题？

或者

有谁知道如何解决这个问题？

我已经为 FBConnect api 尝试了其他示例应用程序，但我在其他应用程序中也看到了同样的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T09:11:36.430

您可能会遇到使用旧 API 的问题。但以下链接可能会对您有所帮助。这是新 facebook ios sdk 的链接

[https://github.com/facebook/facebook-ios-sdk](https://github.com/facebook/facebook-ios-sdk)

教程在这里整合你的脸书

[http://developers.facebook.com/docs/mobile/ios/build/](http://developers.facebook.com/docs/mobile/ios/build/)

我已经编写了一个代码来实现 facebook 与对话页面的集成。您可以从下面的链接中使用我的代码。但不要忘记在 .plist 文件和代码中包含您的应用程序 ID。

[https://stackoverflow.com/a/9954128/1083859](https://stackoverflow.com/a/9954128/1083859)

# java - 如何确保线程不会在 Java 中延迟？

> ID：10186315
> 
> 赞同：2
> 
> 时间：2012-04-17T06:36:27.783
> 
> 标签：java, multithreading, performance, time

我写了一个多线程程序，它同时有两到四个线程。其中一个线程是时间关键线程，每 500 毫秒调用一次，不允许延迟超过 10 毫秒。但是当其他线程有更多负载时，我发现出现了一些延迟，大约是两毫秒。（打印时间戳显示）所以，我担心运行很长时间后它会延迟超过10毫秒，除了检查时间戳，并调整循环间隔以确保时间不延迟超过10毫秒，有什么方法可以让它安全吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T06:45:21.207

听起来你需要[实时 Java](http://www.ibm.com/developerworks/java/library/j-rtj1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T06:59:41.553

如果时间很关键，我会在专用于该线程的核心上使用忙等待。大多数情况下，这会给您 << 10 微秒的抖动。它有点极端，将导致逻辑​​线程不用于其他任何事情。

这是我使用的图书馆。您可以使用它来保留逻辑线程或整个内核。[https://github.com/peter-lawrey/Java-Thread-Affinity](https://github.com/peter-lawrey/Java-Thread-Affinity)

通过在 Linux 上的 grub.conf 中使用 isolcpus=，您可以确保逻辑线程或核心不用于任何其他用途（除了 100 Hz 计时器和电源管理，它们相对较小且延迟 < 2 us）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T06:41:17.347

您可以设置线程优先级：

```
myCriticalThread.setPriority(Thread.MAX_PRIORITY);
otherThread.setPriority(Thread.NORM_PRIORITY); // the default
yetAnotherThread.setPriority(Thread.MIN_PRIORITY); 
```

但它并不能真正保证任何事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T06:47:36.133

There is no guarantee that your thread isn't delayed, because the OS may decide to give other processes precedence (unless you put effort in setting up a complete real-time system including a modified OS). That being said, for basic tasks, you should use a [ScheduledExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html) like this:

```
class A {
  private final ScheduledExecutorService exe = Executors.newScheduledThreadPool(1);

  public void startCriticalAction(Runnable command) {
    this.exe.scheduleAtFixedRate(command, 100, 100, TimeUnit.MILLISECONDS);
  }

  public void shutdown() {
    this.exe.shutdown();
  }
} 
```

The executor service will do its best to execute the task every 100ms. You should not develop this functionality yourself, because a lot of things can go wrong.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T11:46:49.087

爬上超时：

```
waitFor(int timeout)
{
  dateTime wallTimeEnd;
  wallTimeEnd=now()+(msToDateTime(timeout));
  int interval=timeout/2;
  while(true){
    if(interval>10){
      sleep(interval);
      interval=dateTimeToMs(wallTimeEnd-now()) / 2;
    } 
      else
      {
        do{
          sleep(0);
          interval=dateTimeToMs(wallTimeEnd-now());
        }while(interval>0);
  }
} 
```

这只会浪费一个内核 5-10ms

# eclipse - SVN 提交错误“提交一次只能提交到一个存储库。”

> ID：10186317
> 
> 赞同：8
> 
> 时间：2012-04-17T06:36:31.493
> 
> 标签：eclipse, svn, commit, subclipse

我正在使用安装了“Subclipse”的 Eclipse 将我的更改提交到位于我的 DropBox 文件夹中的存储库。

我使用 Tortoise 创建了一个存储库。我的实际项目位于存储库文件夹的根目录中，但不在主干或分支或标记文件夹中。

我成功创建、签出并提交了几次，但最近我开始收到提交错误：

> org.apache.subversion.javahl.ClientException: svn: E200007: Commit failed (详情如下): svn: E200007: Commit 一次只能提交到一个存储库。所有目标都是同一个工作副本的一部分吗？org.apache.subversion.javahl.ClientException: svn: E200007: Commit failed (详情如下): svn: E200007: Commit 一次只能提交到一个存储库。所有目标都是同一个工作副本的一部分吗？

而且什么都不能承诺......是什么导致了这个问题以及如何解决？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-08-16T08:55:19.643

这通常有效：

右键单击项目->团队->清理/刷新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-21T15:08:03.827

对于命令行 svn，我通过运行 a`find ./ -name ".*"`来查找那些隐藏文件并仅维护根`.svn`结构来解决此问题。

# java - 什么是摆动的最佳 GUI 构建器

> ID：10186318
> 
> 赞同：0
> 
> 时间：2012-04-17T06:36:41.480
> 
> 标签：java, swing, user-interface

我正在使用 Netbeans IDE 创建我的 Swing GUI，但大多数时候我很难通过拖动 Swing 组件来创建一个好看的 GUI。我听说有些人建议通过编码来构建 swing GUI，这是真的吗？还是有更好的用于摇摆的 GUI 构建器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T13:36:38.533

NetBeans 是支持简单且现成的 GUI 生成的最佳 IDE 之一。

您可以指定要使用的布局管理器，它会为您编写代码。例如，将布局管理器设置为 GridBagConstraints。只需拖放摆动组件，它将使用适当的 GridBagConstraints 编写语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T06:40:47.110

[窗口生成器](http://www.eclipse.org/windowbuilder/)。在我看来，与手写代码集成得更好。

# c++ - [] 运算符的正确模拟

> ID：10186319
> 
> 赞同：0
> 
> 时间：2012-04-17T06:36:43.140
> 
> 标签：c++, operators

考虑包含数字数组的 Number 类的情况。我希望类用户轻松访问数字，因此我重载了 [] 运算符，以便用户可以选择十的幂，例如。number[2] 是代表百的数字，以此类推。该类是索引安全的 - 如果用户指定的索引超出范围，则返回 0（如 10 = 0010）。

但是，设置一个数字需要更多的努力，因为如果指数超过了保存数字的内部表的大小，则必须扩展后者。

很明显，必须选择不同的方法，用户是否要检索数字以及何时要存储它。我想出了以下解决方案（这些类是部分的，只是为了展示这个想法）：

```
class Number;

class Digit
{
    friend class Number;

private:
    Number number;
    int exponent;

    Digit(Number & newNumber, int newExponent) 
        : number(newNumber), exponent(newExponent)
    {
    }

public:
    operator unsigned char() 
    {
        return number.GetDigit(exponent);
    }

    void operator = (unsigned char digit) 
    {
        number.SetDigit(exponent, digit);
    }
};

class Number
{
    friend class Digit;

private:
    unsigned char GetDigit(int exponent) { ... };
    void SetDigit(int exponent, unsigned char value) { ... };

public:
    Digit operator [] (int exponent)
    {
        return Digit(*this, exponent);
    }
} 
```

Digit 类中的运算符显然调用了一些私有 Number 的方法，这样用户就可以分配一个值并检索一个值。我也可以采取不同的行动，无论用户是否想要检索价值以及何时想要存储它。

然而，const 有一个问题。如果 Number 类实例是 const，则不能调用运算符 []，除非它也被标记为 const。但是，无法实例化 Digit 类，因为它需要 Number &，而传递 const Number &。

一种解决方案涉及使用 const_cast，但感觉就像使用 hack - 更不用说，删除 const 将允许用户使用 Digit 的运算符 = 修改数字实例。有没有办法解决这个问题，而不是使用 const_cast 或编写另一个类，比如 ConstDigit？

* * *

另一个问题：我不希望用户存储 Digit 的实例，因为它只是为了用户的舒适而提供的。私有复制构造函数阻止用户存储数字，例如：

```
auto digit = number[5]; 
```

但是，他仍然可以通过引用存储数字：

```
auto digit & = number[5]; 
```

该数字通过引用传递给 digit（请参阅 Digit 构造函数）以防止指针出现问题，但在这种情况下它不会阻止 AV：

```
auto number = new Number();
auto & digit = (*number)[5];
delete number;
digit = 12; 
```

我可能会禁止用户在 Number 上使用 new 运算符，但也许还有另一种方法？

* * *

更长的答案，为什么我不能通过引用返回数字。

该数字被保存为两个独立的向量，一个用于整数部分，一个用于小数部分（我已经简化了相关示例，但在这里并不重要）。例如，

```
123.456 
```

存储为

```
intPart : {3, 2, 1}
fracPart : {4, 5, 6} 
```

如果用户请求第 100 位的数字，我只需检查它是否在数组边界之外并返回 0（因为 - 正如我所提到的，10 = 0010 = 00010 = ... 等等）

但是，如果用户希望设置数字，我必须扩展数组以填充所有剩余的指数，例如。

```
100 // user wants to set millions' digit to 5
5 [000] 100 // i have to add these empty digits 
```

当然，我也可以在 [] 运算符中这样做。但是，如果用户决定将第 100 位设置为 0，我将不得不添加 98 位，如果他尝试这样做，我什至无法检查（并且该数字应该以最小可能的表示形式存储，两者都不前导零和尾随零存在）。我也没有办法在他分配后压缩存储空间。

当然，其中一种解决方案是删除 [] 运算符并使用 getter/setter。但重点是使类易于使用，并且 [] 运算符比一对 getter/setter 方法更能满足这个假设:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:25:18.743

我将从你的第二个问题开始回答：如果你接受引用，你必须确保它在你想要访问它时仍然有效。在您的示例中，绝对不是这种情况。我认为这应该是一个简化的示例，以显示引用对象在通过先前存储的引用访问之前在*某处被销毁的情况。*你不能（直接）解决这个问题。

您也可以在 STL 中偶然发现这个“问题”。例如，如果您引用一个向量元素，然后在向量中插入一些内容，请注意该引用（可能）变得无效，因为容器内容可能由于新的内存分配而移动到其他地方。

我看到避免这种情况的唯一方法是使用智能指针。至少要保证对对象的访问是安全的。这不会让您访问*新*对象，如果某些代码更改您背后`(*number)[5]`的*新*数字替换。

`Number`现在开始您的第一个问题：目前，我看不到您打算如何在对象上设置某个数字。您确实有数字的赋值运算符，但由于`Number::operator[]`按值返回数字，因此您不能使用它来设置数字。

我*假设*我的（错误）理解只是由于代码示例不完整。请适当延长。现在，我假设`Digit`a 的 s在' 构造`Number`函数中被初始化，并且你的只是用于访问。`Number``operator[]`

一般来说，您可以只创建一个`const`返回的所述运算符的版本`const Digit`。如果您不能 100% 确定对象不是 const，请不要使用`const_cast`删除。`const`否则，您将获得未定义的行为。但是，使用向/从非常量对象`const_cast`添加/删除是安全的。`const`这对于重用代码`const`和非`const`访问方法很有用。非`const`方法可以添加`const`、调用`const`访问方法，然后安全地`const`从返回值中删除（嗯，这取决于您的实现）。有关详细信息，请参阅 Scott Meyers 的“Effective C++”。

也就是说，我必须补充一点，我通常希望在调用时引用对象`operator[]`，这可能允许我更改对象（例如：`std::vector`或`std::map`）。如果它仅用于只读访问，则通过 const 引用或 const 值而不是（非 const）值返回。否则，错误如

```
Number[5] = 12; 
```

会发生并被忽视。读者会假设`12`已分配给 Digit `stored in Number[5]`。事实上，它只是存储在一个*副本*中说的`Digit`。如果`Number::operator[]`只返回`const Digit`，编译器会捕获它。

### 编辑

我知道您如何按值返回但仍修改原始数字。但是，我仍然觉得这个界面不直观。在*大多数*情况下，为您的类提供运算符是明智的，前提是它提供一致的、甚至更好的、直观的行为。查看您的`operator[]`声明，我只看到它`Digit`按值返回。你的*界面*告诉我，我得到一个副本。没有办法看到它在内部仍然修改了我的`Number`对象。

因此，我认为如果使用 getter/setter 方法，界面会更清晰。

# cakephp - 我怎样才能分页： 上一页 4 5 6 7 下一页

> ID：10186323
> 
> 赞同：-1
> 
> 时间：2012-04-17T06:36:53.680
> 
> 标签：cakephp, numbers, next, paginator

我在 Cakephp 中的这个分页有问题。请告诉我如何做到这一点！我的问题是： + 正常情况下：页码是： Prev **1** 2 3 4 Next

*   当用户按 1 到 4 时，页码不变。

*   当用户按下**Next**按钮时，我希望页码必须是​​： Prev **5** 6 7 8 Next

*   但现在他们是： Prev 3 4 **5** 6 Next

**当我按下下一步**按钮时，如何将数字 5 移到最左边

我正在使用 $this->Paginator->numbers 生成页码，我该如何配置？

请帮助我，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:39:12.950

您不应该“移动”号码，而是在当前页面开始导航寻呼呼叫。
它是通过提供`options`给`numbers()`函数来完成的（`first`具体来说`last`）。

在这里检查：http: [//api.cakephp.org/class/paginator-helper#method-PaginatorHelpernumbers](http://api.cakephp.org/class/paginator-helper#method-PaginatorHelpernumbers)

# css - 相对于动态生成的 div 主体的绝对定位

> ID：10186326
> 
> 赞同：2
> 
> 时间：2012-04-17T06:37:02.013
> 
> 标签：css, position

我可以将 div 放置在相对于 body 的绝对位置，该位置是在 aa div 内部动态生成的，该位置是相对的

这是我的情况，我必须保持这种方式

[http://jsfiddle.net/bipin000/swqqH/](http://jsfiddle.net/bipin000/swqqH/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T06:54:41.073

`position:static`好吧，在你制作父 div然后制作动态 div之前这是不可能的`position:absolute`

[http://jsfiddle.net/swqqH/25/](http://jsfiddle.net/swqqH/25/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T06:56:54.700

不，那是不可能的。由于父 div 被定位，它成为偏移父，因此绝对定位的 div 将相对于外部 div 放置，而不是相对于 body。

# windows-phone-7 - 当我保持对直播服务器的请求以在 Windows Phone 7 中显示流派时

> ID：10186328
> 
> 赞同：0
> 
> 时间：2012-04-17T06:37:18.717
> 
> 标签：windows-phone-7, windows-phone-7.1

当我在 windows phone7 中保持对直播服务器的请求以显示流派时。我得到这样的响应 460 Missing required parameterREFERRER 我没有让流派显示。但它正在浏览器中显示。我可以在 Windows phone7 中显示所有站点，除了喊话服务器。请帮助先生。这是我的代码

private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e) { DoWebClient();

```
 }

    private void DoWebClient()
    {
        var webClient = new WebClient();

        webClient.OpenReadAsync(new Uri("http://api.shoutcast.com/legacy/genrelist?k=ar1CybnF1NXzbH9Z"));
        webClient.OpenReadCompleted +=new OpenReadCompletedEventHandler(webClient_OpenReadCompleted);
    }

    void webClient_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
    {
        using (var reader = new StreamReader(e.Result))
        {
            string data = reader.ReadToEnd();

        }
    } 
```

在数据中，它得到了这样的响应..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T10:06:22.073

只需添加这一行：

```
webClient.Headers[HttpRequestHeader.Referer] = "http://api.shoutcast.com"; 
```

在 DoWebClient 中如下：

```
private void DoWebClient()
{
    var webClient = new WebClient();

    webClient.Headers[HttpRequestHeader.Referer]
        = "http://api.shoutcast.com"; 

    webClient.OpenReadAsync(new Uri("http://api.shoutcast.com/legacy/genrelist?k=ar1CybnF1NXzbH9Z"));
    webClient.OpenReadCompleted += new OpenReadCompletedEventHandler(webClient_OpenReadCompleted);
} 
```

我还建议您使用 RestSharp 库对 xml 文件进行此类查询。

研究生，

# javascript - 如何在javascript中以dd/mm/yy格式格式化json日期？

> ID：10186330
> 
> 赞同：11
> 
> 时间：2012-04-17T06:37:37.240
> 
> 标签：javascript, json, datetime, datetime-format

我的回复中有一个 json 日期`\/Date(1334514600000)\/`，当我用 javascript 转换它时，我得到了这个日期`Tue Apr 17 2012 11:37:10 GMT+0530 (India Standard Time)`，但我需要日期格式，但我`17/04/2012`每次都失败。谁能告诉我该如何解决？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-17T07:26:09.210

我认为其他发布的答案不太正确，您已经接受了一个为您工作的答案，所以我不会对其进行编辑。

这是您接受的答案的更新版本。

```
var dateString = "\/Date(1334514600000)\/".substr(6);
var currentTime = new Date(parseInt(dateString ));
var month = currentTime.getMonth() + 1;
var day = currentTime.getDate();
var year = currentTime.getFullYear();
var date = day + "/" + month + "/" + year;
alert(date); 
```

它使用此[答案](https://stackoverflow.com/a/2316066/79835)中的一种技术从JSON 日期中提取纪元。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-12T06:05:26.820

我发现第 1 行的答案很有帮助，但是我被困在输入类型 =“日期”的格式上，因为只返回一个 10 以下小数的字符串，我能够修改以处理输入类型 =“日期”，我基本上适应了从 row1 到链接[http://venkatbaggu.com/convert-json-date-to-date-format-in-jquery/的代码](http://venkatbaggu.com/convert-json-date-to-date-format-in-jquery/)

我能够通过 jquery .val 将日期添加到输入

```
var dateString = "\/Date(1334514600000)\/".substr(6);
var currentTime = new Date(parseInt(dateString));
var month = ("0" + (currentTime.getMonth() + 1)).slice(-2);
var day = ("0" + currentTime.getDate()).slice(-2);
var year = currentTime.getFullYear();
var date = year + '-' + month + '-' + day;
alert(date); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T06:43:20.380

```
var currentTime = new Date()
var month = currentTime.getMonth() + 1
var day = currentTime.getDate()
var year = currentTime.getFullYear()
var date = day + "/" + month + "/" + year
alert(date); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T06:49:54.277

就是回答你的问题...

使用您的时间戳构建日期对象

```
var currentTime = new Date(1334514600000)
var month = currentTime.getMonth() + 1
var day = currentTime.getDate()
var year = currentTime.getFullYear()
var date = day + "/" + month + "/" + year
alert(date);​ 
```

有用

[http://jsfiddle.net/ChgUa/](http://jsfiddle.net/ChgUa/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-16T12:57:09.423

```
//parse JSON formatted date to javascript date object
var bdate = new Date(parseInt(emp.Birthdate.substr(6)));

//format display date (e.g. 04/10/2012)
var displayDate = $.datepicker.formatDate("mm/dd/yy", bdate); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-22T12:09:11.853

如果您使用 Angular，最简单的格式化日期的方法是使用管道。点击[这里](https://angular.io/api/common/DatePipe)

```
//in .ts file
ngOnInit() {
 this.currentDate = new Date()
}
//in html file
<p>Current date is:</p>{{currentDate | date: 'dd/MM/yyyy'}}

//Output: 22/04/2020 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-28T04:52:10.920

这是您接受的答案的更新版本。DD/MM/YYYY 格式 Get Try This..

```
var dateString = "/Date(1623781800000+0530)/"+.substr(6);
var currentTime = new Date(parseInt(dateString));
var month = currentTime.getMonth() + 1;
var day = currentTime.getDate();
var year = currentTime.getFullYear();
 if (month.toString().length == 1) 
   month = "0" + month.toString();
 if (day.toString().length == 1){ 
   day = "0" + currentTime.getDate();}                                       
var datenew = day + "/" + month + "/" + year; 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-06-15T16:11:01.140

```
 var Date = new Date(Tue Jun 15 2021 23:52:47 GMT+0800 (Malaysia Time)).toDateString(); console.log(Date); 
```

* * *

结果 == 2021 年 6 月 15 日星期二

* * *

# java - NullPointerException 接近警报

> ID：10186337
> 
> 赞同：1
> 
> 时间：2012-04-17T06:38:06.907
> 
> 标签：java, android, sqlite, android-pendingintent, proximity

我正在创建一个应用程序，它使用 GPS 跟踪用户位置，将经度和纬度存储在 SQLite 数据库中并添加接近警报。
参考 - [http://www.javacodegeeks.com/2011/01/android-proximity-alerts-tutorial.html](http://www.javacodegeeks.com/2011/01/android-proximity-alerts-tutorial.html)

错误消息`java.lang.NullPointerException`
LogCat：

```
04-19 08:14:42.617: W/IInputConnectionWrapper(585): showStatusIcon on inactive InputConnection
04-19 08:18:18.477: W/IInputConnectionWrapper(585): showStatusIcon on inactive InputConnection
04-19 08:18:26.717: D/dalvikvm(585): GC_EXPLICIT freed 3939 objects / 240736 bytes in 1956ms
04-19 08:18:37.947: W/KeyCharacterMap(636): No keyboard for id 0
04-19 08:18:37.947: W/KeyCharacterMap(636): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
04-19 08:18:46.638: D/AndroidRuntime(636): Shutting down VM
04-19 08:18:46.638: W/dalvikvm(636): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
04-19 08:18:46.677: E/AndroidRuntime(636): FATAL EXCEPTION: main
04-19 08:18:46.677: E/AndroidRuntime(636): java.lang.NullPointerException
04-19 08:18:46.677: E/AndroidRuntime(636):  at com.sql.SQLiteExample.saveProximityAlertPoint(SQLiteExample.java:157)
04-19 08:18:46.677: E/AndroidRuntime(636):  at com.sql.SQLiteExample.onClick(SQLiteExample.java:107)
04-19 08:18:46.677: E/AndroidRuntime(636):  at android.view.View.performClick(View.java:2408)
04-19 08:18:46.677: E/AndroidRuntime(636):  at android.view.View$PerformClick.run(View.java:8816)
04-19 08:18:46.677: E/AndroidRuntime(636):  at android.os.Handler.handleCallback(Handler.java:587)
04-19 08:18:46.677: E/AndroidRuntime(636):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-19 08:18:46.677: E/AndroidRuntime(636):  at android.os.Looper.loop(Looper.java:123)
04-19 08:18:46.677: E/AndroidRuntime(636):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-19 08:18:46.677: E/AndroidRuntime(636):  at java.lang.reflect.Method.invokeNative(Native Method)
04-19 08:18:46.677: E/AndroidRuntime(636):  at java.lang.reflect.Method.invoke(Method.java:521)
04-19 08:18:46.677: E/AndroidRuntime(636):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-19 08:18:46.677: E/AndroidRuntime(636):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-19 08:18:46.677: E/AndroidRuntime(636):  at dalvik.system.NativeStart.main(Native Method) 
```

错误代码行：

```
saveProximityAlertPoint(location1,longi, lati);
locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T20:47:02.533

该成员`locationManager`未在您调用`saveProximityAlertPoint()`的地方初始化或初始化`locationManager`失败。

# wpf - 奇怪的 KeyUp 行为（主窗体处理来自孩子的事件？！）

> ID：10186340
> 
> 赞同：4
> 
> 时间：2012-04-17T06:38:14.993
> 
> 标签：wpf, keyup, routedevent

问题：

1.  KeyUp 由主窗口中的网格处理 ( `Grid_KeyUp`)
2.  主窗口显示一个子窗口（例如`MessageBox.Show(...)`）
3.  用户按 [Return] ( `Keys.Return`) 关闭`MessageBox`
4.  主窗口实际上从 MessageBox 中的该按键获取 KeyUp 事件

我有一个非常简单的孤立样本，它显示了我遇到的问题。只需创建一个空的 WPF 项目并使用此 XAML：

```
<Grid KeyUp="Grid_KeyUp">
    <Button Click="Button_Click"></Button>
</Grid> 
```

和代码隐藏：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void Grid_KeyUp(object sender, KeyEventArgs e)
    {
        Console.WriteLine("KEYUP: " + e.Key);
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        MessageBox.Show(this, "TEST");
    }
} 
```

如果单击按钮并按 [Return] 关闭 MessageBox，输出窗口将打印：

```
KEYUP: Return 
```

奇怪的事实：

1.  按 [Escape] 时我得到相同的行为（`KEYUP: Escape`被打印），但是当我按 [Space] 时，控制台不会打印出任何东西！
2.  e.Source 和 e.OriginalSource 指向主窗口中的按钮（这显然是错误的）。
3.  如果您`MessageBox.Show(...)`在事件未由 out KeyUp 处理程序处理后立即放置断点（即输出为空）。

谁能向我解释发生了什么？

PS目标框架是：.NET 4 Client

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T07:22:52.140

显然，当您按下 enter 或 escape 时，消息框会关闭，并且***在您抬起按钮之前，`MainWindow`会获得焦点并捕获`KeyPress`aswell***。

空格键没有发生这种情况的原因是按下空格键会按下按钮，***但在您自己释放空格键之前不会释放它***。这意味着空格键在按钮“未按下”之前被释放，因此`MessageBox`只有在释放空格键后才会关闭，因此`MainWindow`不会捕捉按钮按下。

***您可以通过按住空格键来测试这一点。*** 您会看到按钮被按住但直到您释放它才被按下。

`MessageBox`您可以创建一个在收盘后熄灭的标志。检查它是否是第一个`KeyPress`（也许检查它是否在关闭后不到 10 毫秒发生）然后忽略它。

我知道，它很丑，但我认为你无能为力（如果我是对的）

# jquery - jqGrid默认值不起作用？

> ID：10186343
> 
> 赞同：0
> 
> 时间：2012-04-17T06:38:17.723
> 
> 标签：jquery, jqgrid

我有一个 jqGrid，添加新行时，一列应该有默认值。我已遵循文档，但该值从未出现。

这是 colModel 中的列：

```
{name: 'Lt', index: 'Lt', width: 25, editable: true, editoptions: {defaultValue: 'N'}} 
```

这就是我调用 addRowData 的方式：

```
$("#grid").addRowData(-1,
    { Datum: $.datepicker.formatDate("yy-mm-dd", new Date()) }, "first", true) 
```

据我所知，我是按照书本做的！

完整的网格定义：

```
 $("#dagbok_grid").jqGrid({
        datatype: 'json',
        mtype: 'GET',
        colNames: [
            'a',
            'b',
            'c',
            'd',
            'e',
            'f',
            'g',
            'h',
            'i',
            'j',
            'k',
            'l',
            'm',
            'n',
            'o',
            'p',
            'q',
            'r',
            's'],
        colModel: [
          { name: 'a', index: 'a', width: 30, formatter: 'checkbox', edittype: 'checkbox', editable: true },
          { name: 'b', index: 'b', width: 30, formatter: 'checkbox', edittype: 'checkbox', editable: true },
          { name: 'c', index: 'c', width: 70, formatter: 'date', editable: true, editrules: { required: true }, editoptions: { dataInit: function (elem) { $(elem).datepicker(); } } },
          { name: 'd', index: 'd', width: 65, editable: true, formatter: 'date', formatoptions: { srcformat: 'H:i:s', newformat: 'ShortTime' }, editrules: { time: true} },
          { name: 'e', index: 'e', width: 80, edittype: 'select', editable: true, formatter: 'select' },
          { name: 'f', index: 'f', width: 100, editable: true, edittype: 'textarea', editoptions: {rows: '7'} },
          { name: 'g', index: 'g', width: 80, editable: true, edittype: 'textarea', editoptions: { rows: '7'} },
          { name: 'h', index: 'h', width: 80, editable: true, editrules: { maxValue: 50} },
          { name: 'i', index: 'i', width: 120, edittype: 'select', editable: true, formatter: 'select' },
          { name: 'j', index: 'j', width: 200, edittype: 'select', editable: true, formatter: 'select' },
          { name: 'k', index: 'k', width: 70, edittype: 'select', editable: true, formatter: 'select' },
          { name: 'l', index: 'l', width: 70, editable: true, editrules: { maxValue: 10} },
          { name: 'm', index: 'm', width: 25, editable: true, editoptions: { defaultValue: 'N'} },
          { name: 'n', index: 'n', width: 70, editable: true, editrules: { integer: true, maxValue: 999999 }, formatter: formatPosition, unformat: unformatPosition },
          { name: 'o', index: 'o', width: 25, editable: true, editrules: { custom: true, custom_func: chkLongitudTecken} },
          { name: 'p', index: 'p', width: 80, editable: true, editrules: { integer: true, maxValue: 999999 }, formatter: formatPosition, unformat: unformatPosition },
          { name: 'q', index: 'q', width: 80, edittype: 'select', editable: true, formatter: 'select' },
          { name: 'r', index: 'r', width: 100, editable: true, editrules: { maxValue: 50} },
          { name: 's', index: 's', width: 65, edittype: 'select', editable: true, formatter: 'select' },
        ],
        sortname: 'c',
        sortorder: 'desc',
        shrinkToFit: false,
        viewrecords: true,
        gridview: true,
        onSelectRow: function (id) {
            if (id && id !== lastsel) {
                jQuery('#dagbok_grid').saveRow(lastsel);
                lastsel = id;
            }
            jQuery('#dagbok_grid').editRow(id, true);
        },
        height: 400,
        editurl: '@Url.Action("SaveGridRow")',
        caption: 'my grid'
    }); 
```

稍后我还将选择值添加到一些列：

```
 $.ajax({
        type: 'GET',
        url: '@Url.Action("GetGridComboValues")',
        async: false,
        success: function (data) {
            var grid = $("#dagbok_grid");
            grid.setColProp("e", { editoptions: { value: data.kallor} });
            grid.setColProp("i", { editoptions: { value: data.rubriker} });
            grid.setColProp("j", { editoptions: { value: data.verksamheter} });
            grid.setColProp("k", { editoptions: { value: data.opPadrag, dataEvents: [{ type: 'change', fn: function (e) {
                $.ajax({
                    type: "GET",
                    url: '@Url.Action("GetVerksamhetskod")',
                    data: { "opPadragId": e.currentTarget.value },
                    dataType: 'json',
                    success: function (data) {
                        var selr = jQuery('#dagbok_grid').jqGrid('getGridParam', 'selrow');
                        jQuery("#dagbok_grid").jqGrid('setCell', selr, "l", data);
                    }
                });
            }
            }]
            }
            });
            grid.setColProp("q", { editoptions: { value: data.medier} });
            grid.setColProp("s", { editoptions: { value: data.regioner} });
        }
    }); 
```

添加和删​​除代码

```
 $("#toolbarAddButton")
        .button()
        .click(function () {
            $("#dagbok_grid").addRowData(-1, { Datum: $.datepicker.formatDate("yy-mm-dd", new Date()) }, "first", true)
        });

    $("#toolbarDeleteButton").click(function () {
        var radid = $("#dagbok_grid").jqGrid("getGridParam", "selrow");
        if (radid != null) {
            var su = $("#dagbok_grid").jqGrid("delRowData", radid);
            $("#dagbok_grid").jqGrid("delGridRow", radid, { url: '@Url.Action("DeleteGridRow")', reloadaftersubmit: false });

        }
    }) 
```

当用户在编辑模式下按 enter 时执行保存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T07:24:58.250

首先你定义了`editoptions: { defaultValue: 'N'}`. 您可以阅读编辑选项的[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acommon_rules#editoptions)

> 选项可以是字符串或函数。此选项仅在与添加模式下的方法一起使用时**在表单编辑模块中有效。**`editGridRow`如果已定义，如果只有元素为空，则使用此值设置输入元素。如果在选择中使用，则应提供文本而不是键。此外，当使用函数时，该函数应返回值。

您想要的是在*填充*网格体期间而不是在编辑期间设置默认值。为此目的存在`defaulValue`格式化程序选项，但它仅用于一些预定义的格式化程序（请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3apredefined_formatter#predefined_format_types)）。

您可以通过使用[自定义格式化程序](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acustom_formatter)来解决问题，或者，如果您`addRowData`直接使用方法，则可以通过显式添加`Lt`列的值来解决该问题。

我不建议使用低级方法`addRowData`，这种方法速度慢，而且大多会以错误的方式使用。例如，您用作`-1`rowid。如果您多次执行相同的语句，您将有 id 重复，这是错误的，并且可能会产生非常奇怪的效果。如果您希望 jqGrid 自己生成唯一 ID，则应将`undefined`其用作 rowid 参数。

# c++ - 如何使用 select() 来监视对象？

> ID：10186344
> 
> 赞同：2
> 
> 时间：2012-04-17T06:38:21.920
> 
> 标签：c++, linux, networking

从[这里开始](http://linux.die.net/man/2/select%22)，它说它`select()`用于“监视多个文件描述符，等待一个或多个文件描述符为某种类型的 I/O 操作（例如，可能的输入）“准备好”。然后我看了一下[Beej的socket编程指南](http://beej.us/guide/bgnet/output/html/multipage/advanced.html#select)，他们用来`select()`监控socket文件描述符。

简而言之，教程和手册页说`select()`对**文件描述符**进行操作。但是，我遇到了一段`select()`用于监视**对象**的代码。代码：

```
class SomeObject
{
    public:
        static SomeObject *_pInstance;
        //...some other methods...
} 
```

* * *

```
SomeObject *SomeObject::_pInstance = new SomeObject();    
SomeObject &refObj = *SomeObject::_pInstance;
fd_set fdAllSet, fdReadableSet;
int nReadyHandles = 0;

FD_SET( refObj, &fdAllsSet ); //<---this line

while (1)
{
    fdReadableSet = fdAllSet;

    nReadyHandles = select( maxFd+1, &fdReadableSet, NULL, NULL, &someWaitTime );

    while (nReadyHandles > 0)
    {
        if (FD_ISSET(refObj, &fdReadableSet))
        {//do something
            FD_CLR(refObj, &fdReadableSet);
        }
    }
} 
```

所以问题是，如何`select()`确定我的“对象是否准备好”？为什么[`FD_SET()`](http://linux.die.net/man/3/fd_set)不给出任何编译错误，因为第一个参数假设是 an`int`而不是`refObj`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T06:52:22.717

FD_SET 和朋友们将整数作为第一个参数......

```
void FD_CLR(int fd, fd_set *set);
int  FD_ISSET(int fd, fd_set *set);
void FD_SET(int fd, fd_set *set); 
```

因此，您的代码可以编译的唯一方法是（a）SomeObject 具有`SomeObject::operator int()`返回文件描述符的用户定义转换运算符：

```
class SomeObject
{
    int my_fd;

    operator int() { return my_fd; }
}; 
```

或 (b) FD_* 操作被定义为真正的函数（而不是宏），并且有用户定义的 FD_* 重载，它们采用 SomeObject 并将它们提取/映射到 fd，然后调用原始系统版本：

```
void FD_CLR(const SomeObject& so, fd_set *set)
{
    FD_CLR(so.my_fd, set);
}

int  FD_ISSET(const SomeObject& so, fd_set *set)
{
    return FD_ISSET(so.my_fd, set);
}

void FD_SET(const SomeObject& so, fd_set *set)
{
    return FD_SET(so.my_fd, set);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T06:50:16.397

猜测一下，该类`SomeObject`有一个强制转换为整数的重载，它返回一个文件描述符，无论它做什么。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-17T06:55:33.957

select() 和 FD_SET 作用于文件描述符，它们实际上是整数，而不是指向“SomeObject”的指针。

# android - Android中dp的使用

> ID：10186355
> 
> 赞同：0
> 
> 时间：2012-04-17T06:39:03.803
> 
> 标签：android, dpi

**我对“ dp** ”的使用有疑问。
在哪种情况下可以使用 dp？它只是用于任何控件，即 ImageView 和 TextView，还是也可以用于调整布局。
为了调整布局，我目前正在根据屏幕宽度和高度的百分比来指定控件的宽度和高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T06:43:47.160

它可以用作指定宽度和高度的单位。您可以将它与所有视图一起使用...查看[更多](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)信息...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T06:46:20.170

dp

```
Density-independent Pixels - an abstract unit that is based on the physical density of the screen. These units are relative to a 160 dpi screen, so one dp is one pixel on a 160 dpi screen. The ratio of dp-to-pixel will change with the screen density, but not necessarily in direct proportion. Note: The compiler accepts both "dip" and "dp", 
```

使用 dip 或 dp 是为了让你的 Android 应用程序兼容多种屏幕密度和分辨率。

# asp.net - 'System.Data.DataView.DataView(System.Data.DataTable)' 的最佳重载方法匹配有一些无效参数

> ID：10186358
> 
> 赞同：2
> 
> 时间：2012-04-17T06:39:06.430
> 
> 标签：asp.net

我正在使用 gridview 的排序功能并收到上述错误

我的排序功能是

```
protected void gvUserMaster_Sorting(object sender, GridViewSortEventArgs e)
{
    UserMasterClass cs = new UserMasterClass();

    ResultClass objres = cs.fn_GetUserMasterList();
    if (objres.bStatus)
    {
        eslist<UserMasterClass> OBJLIST = objres.objData as eslist<UserMasterClass>;
        if (OBJLIST.Count > 0)
        {

            DataTableConverter<UserMasterClass> dt = new DataTableConverter<UserMasterClass>();
           dt.GetDataTable(OBJLIST);

            if (dt != null)
            {

                DataView dataView = new DataView(dt);
                dataView.Sort = e.SortExpression + " " + ConvertSortDirectionToSql(e.SortDirection);

                gvUserMaster.DataSource = dataView;
                gvUserMaster.DataBind();
            }
        }
    }
} 
```

我在这一行收到错误 DataView dataView = new DataView(dt);

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:41:31.400

是的，您正在尝试将 a 传递给`DataTableConverter<UserMasterClass>`期望 a 的构造函数`DataTable`。您还`GetDataTable`事先打电话并忽略了结果。也许你的意思是：

```
DataView dataView = new DataView(dt.GetDataTable(OBJLIST)); 
```

（顺便说一句，您的命名约定无处不在 - 我强烈建议您遵循[正常的 .NET 约定](http://msdn.microsoft.com/en-us/library/ms229002.aspx)。）

# linux - 在 bash 中定义一个类似函数的宏

> ID：10186359
> 
> 赞同：10
> 
> 时间：2012-04-17T06:39:07.393
> 
> 标签：linux, bash, ubuntu, macros

是否可以在 bash 中定义宏函数，所以当我编写时：

```
F(sth); 
```

bash 运行这个：

```
echo "sth" > a.txt; 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-17T06:45:22.457

不能使任意语法做任何事情。括号是对解析器具有特殊含义的*元字符*，因此您无法将它们用作有效*名称*。扩展外壳的最好方法是定义函数。

这将是一个`echo`始终写入同一个文件的基本包装器：

```
f() {
    echo "$@"
} >a.txt 
```

这大致相同，但另外处理标准输入 - 牺牲`echo's` `-e`和`-n`选项：

```
f() {
    [[ ${1+_} || ! -t 0 ]] && printf '%s\n' "${*-$(</dev/fd/0)}"
} >a.txt 
```

可以称为

```
f arg1 arg2... 
```

或者

```
f <file 
```

函数以与任何其他命令相同的方式传递参数。

第二个类似回声的包装器首先测试[设置的第一个参数](http://mywiki.wooledge.org/BashFAQ/083)或来自非 tty 的标准输入，并使用位置参数（如果已设置）或标准输入有条件地调用 printf。测试表达式避免了零参数和没有从文件重定向的情况，在这种情况下，Bash 会尝试扩展终端的输出，挂起 shell。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-17T06:42:51.733

```
F () {
  echo "$1" > a.txt
} 
```

调用它时不要使用括号。这就是你所说的：

```
F "text to save" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-17T06:43:35.210

是的，只有你应该用以下方式调用它`F sth`：

```
F()
{
  echo "$1" > a.txt
} 
```

[在这里](http://mywiki.wooledge.org/BashGuide/CompoundCommands#Functions)阅读更多。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-29T23:02:56.197

这是很久以前回答的，但是为了提供一个满足原始请求的答案（即使这可能不是真正想要的）：这是基于Simon Tatham[的 Magic Aliases: A Layering Loophole in the Bourne Shell](https://www.chiark.greenend.org.uk/%7Esgtatham/aliases.html)。

```
F() { str="$(history 1)"; str=${str# *F(}; echo "${str%)*}"; } >a.txt
alias F='\F #'

$ F(sth)
$ cat a.txt
sth 
```

另请参阅 ormaaj[更好的魔术别名](https://gist.github.com/ormaaj/5a969c62bab8d21fe468)。

# php - wsdl 返回 php 对象

> ID：10186365
> 
> 赞同：1
> 
> 时间：2012-04-17T06:39:42.577
> 
> 标签：php, soap, wsdl, zend-soap

**编辑**：我的代码没有问题。服务器正在从缓存中读取 wsdl 文件。要解决问题：

1.  禁用缓存`ini_set("soap.wsdl_cache_enabled", 0);`
2.  否则每次更改 wsdl 文件后从 /tmp 目录中删除缓存文件。

我正在使用 zend soap 来创建 Web 服务。我试图从中返回一个复杂的类型。我的 php 类如下所示：

```
require_once 'myclass.php';

class MyService {
    /**
     *
     * @param integer param1
     * @param string param2
     * @return myclass
     */
    public function myfunction ($param1, $param2) {

        $myobj= new myclass();
        $myobj->returncode = 100;
        return $myobj;
    }
} 
```

myclass 是一个带有两个公共变量的简单类

```
class myclass {
    /** @var int */
    public $returncode = '0';

    /** @var string */
    public $returnmessage = 'Başarılı';

} 
```

我正在使用[AutoDiscovery](http://framework.zend.com/manual/en/zend.soap.autodiscovery.html)生成 wsdl 文件：

```
<definitions xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="http://my.domain.com/wsdl/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap-enc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" name="MyService" targetNamespace="http://my.domain.com/wsdl/">
  <types>
  <xsd:schema targetNamespace="http://my.domain.com/wsdl/">
  <xsd:complexType name="myclass">
    <xsd:all>
    <xsd:element name="returncode" type="xsd:int"/>
    <xsd:element name="returnmessage" type="xsd:string"/>
    </xsd:all>
  </xsd:complexType>
  </xsd:schema>
  </types>
  <portType name="MyServicePort">
  <operation name="myfunction">
  <documentation></documentation>
  <input message="tns:myfunctionIn"/>
  <output message="tns:myfunctionOut"/>
  </operation>
  </portType>
  <binding name="MyServiceBinding" type="tns:MyServicePort">
  <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
  <operation name="myfunction">
  <soap:operation soapAction="http://my.domain.com/wsdl/#myfunction"/>
  <input>
  <soap:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://my.domain.com/wsdl/"/>
  </input>
  <output>
  <soap:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://my.domain.com/wsdl/"/>
  </output>
  </operation>
  </binding>
  <service name="MyServiceService">
  <port name="MyServicePort" binding="tns:MyServiceBinding">
  <soap:address location="http://my.domain.com/wsdl/"/>
  </port>
  </service>
  <message name="myfunctionIn">
  <part name="param1" type="xsd:int"/>
  <part name="param2" type="xsd:string"/>

  </message>
    <message name="myfunctionOut">
    <part name="return" type="tns:myclass"/>
  </message>
  </definitions> 
```

我可以毫无问题地接收原始类型。当我尝试返回一个对象时，它将对象转换为字符串（显示“对象”）并返回：

```
<SOAP-ENV:Envelope SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://my.domain.com/wsdl" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/">
<SOAP-ENV:Body>
   <ns1:myfunctionResponse>
      <return xsi:type="xsd:string">Object</return>
  </ns1:myfunctionResponse>
</SOAP-ENV:Body> 
```

我想要这样的结果：

```
<myclass>
  <returncode>100</returncode>
  <returnmessage>Ok</returnmessage>
</myclass> 
```

谢谢你。

# python - Python __init__/General Function Inline Equals In Argument(s):

> ID：10186367
> 
> 赞同：1
> 
> 时间：2012-04-17T06:39:50.597
> 
> 标签：python, oop

我的任务是将一些 Python 代码转换为 Java。我对 Python 有一些经验，但不熟悉它的一些功能。

我看到一个`__init__`我理解的方法本质上是一个构造函数。

我希望看到这样的论点：

`def __init__(self,derp1, derp2, derp3):`

但在代码的一部分中，我看到：

`def __init__(self,derp1=0, derp2=0, derp3=0):`

现在，对我来说，这看起来像是某种条件构造函数，专门在 (self,0,0,0) 已通过时使用。这不应该是这种情况，因为没有替代构造函数。

它也不应该是一个内联赋值，因为那是没有意义的。

我试过谷歌搜索来弄清楚这意味着什么，但我运气不好。

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T06:42:42.410

它们是[默认参数值](http://docs.python.org/release/1.5.1p1/tut/defaultArgs.html)。

我认为Java不支持它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T06:44:40.063

这些是默认参数。你可以像这样初始化一个类实例`my_class(1, 2, 3)`，它将 derp1 设置为 1，derp2 设置为 2，derp3 设置为 3。因为提供了默认值，你也可以调用它`my_class(5)`，它将 derp1 设置为 5，derp2 设置为 0，derp3 设置为 0。

请记住，derp 变量是`__init__`函数的本地变量，因此如果要保留它们，则需要将它们分配给某个类变量。例如，在 中`__init__`，您可以通过 do 保存 derp1 值`self.derpaderp = derp1`，然后`self.derpaderp`在类中的其他位置引用该值。

# mysql - 使用查询结果作为表名

> ID：10186370
> 
> 赞同：3
> 
> 时间：2012-04-17T06:40:13.490
> 
> 标签：mysql

我想只使用一个查询来删除父表和子表中的记录。我`CHILD1_TABLE`在父表`PARENT_TABLE`的字段名称中有子表名称`TABLENAME`。父表包含更多子表。我只想从其中一个子表和父表中删除一条记录。公共字段`ID`位于子表和父表中。我这样写我的查询，

```
DELETE PARENT.*,CHILD.* 
FROM PARENT_TABLE PARENT 
INNER JOIN (SELECT TABLENAME FROM PARENT_TABLE WHERE ID='CHILD1-001') CHILD 
ON PARENT.ID=CHILD.ID 
WHERE PARENT.ID='CHILD1-001' 
```

但它不起作用。有谁能够帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T06:59:18.480

那这个呢：

```
DELETE PARENT.*,CHILD.* 
FROM PARENT_TABLE PARENT 
INNER JOIN (SELECT * FROM (SELECT TABLENAME FROM PARENT_TABLE WHERE ID='CHILD1-001') AS CHILD)  
ON PARENT.ID=CHILD.ID 
WHERE PARENT.ID='CHILD1-001' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T06:50:41.603

为什么不使用`ON DELETE CASCADE`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T07:11:31.370

```
DELETE PARENT.*,CHILD.* 
FROM PARENT_TABLE PARENT 
INNER JOIN (SELECT * FROM (SELECT TABLENAME FROM PARENT_TABLE WHERE ID='CHILD1-001') AS a)  as child
ON PARENT.ID=CHILD.ID 
WHERE PARENT.ID='CHILD1-001' 
```

我不确定这个查询，但试一试。

# mongodb - mongodb：在 ReplicaSetConnection 上调用 end_request 会引发数据库错误

> ID：10186381
> 
> 赞同：0
> 
> 时间：2012-04-17T06:40:49.533
> 
> 标签：mongodb, pymongo

我正在使用新的 ReplicaSetConnection 方法连接到我的 mongodb 集群。更改实际上归结为用 pymongo.ReplicaSetConnection 替换 pymongo.Connection。我将连接用于我的目的，然后在连接上调用 end_request 以确保在连接上调用 disconnect() 之前刷新连接。这确保了长时间运行后我没有大量的半连接套接字。这在我使用 Connection 时效果很好，但是当我使用 ReplicaSetConnection 时，pymongo 抱怨说我正在尝试在数据库对象上运行 end_request()，尽管事实上我绝对是针对 ReplicaSetConnection 对象调用它。这是 pymongo 中的新功能还是驱动程序中的错误？以下是我遇到的问题的手动运行。

```
>>> import pymongo
>>> s = pymongo.ReplicaSetConnection("192.168.1.1:27017, 192.168.1.2:27017", replicaSet='rep1', safe=True)
>>> s
ReplicaSetConnection([u'192.168.1.1:27017', u'192.168.1.2:27017'])
>>> s.read_preference = pymongo.ReadPreference.SECONDARY
>>> s
ReplicaSetConnection([u'192.168.1.1:27017', u'192.168.1.2:27017'])
>>> type(s)
<class 'pymongo.replica_set_connection.ReplicaSetConnection'>
>>> d = s['test']
>>> s.end_request()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "build/bdist.linux-x86_64/egg/pymongo/database.py", line 696, in __call__
TypeError: 'Database' object is not callable. If you meant to call the 'end_request' method on a 'Connection' object it is failing because no such method exists.
>>> s.disconnect()
>>> s
ReplicaSetConnection([u'192.168.1.1:27017', u'192.168.1.2:27017']) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T15:04:02.940

PyMongo 2.1 中的 ReplicaSetConnection 不支持 end_request(); 它将在未来几周内发布 2.2 版。同时，在断开连接之前无需调用 end_request() 。断开连接将关闭所有套接字。

# c# - 如何使用异步 Web 请求进行多线程

> ID：10186382
> 
> 赞同：5
> 
> 时间：2012-04-17T06:41:01.827
> 
> 标签：c#, multithreading, asynchronous, httpwebrequest, task-parallel-library

我正在尝试实现 .NET 4 助手/实用程序类，它应该根据 web 测试工具的 url 列表检索 HTML 页面源。该解决方案应该是可扩展的并具有高性能。

我已经研究和尝试了很多天不同的解决方案，但找不到合适的解决方案。

根据我的理解，实现我的目标的最佳方法是使用使用 TPL 并行运行的异步 Web 请求。

为了完全控制标题等。我使用 HttpWebResponse 而不是包装 HttpWebResponse 的 WebClient。在某些情况下，输出应该链接到其他任务，因此使用 TPL 任务可能是有意义的。

经过许多不同的试验/方法，我到目前为止所取得的成就，

1.  实施了基本的同步、异步 (APM) 和并行（使用 TPL 任务）解决方案，以查看不同解决方案的性能水平。

2.  为了查看异步并行解决方案的性能，我使用了 APM 方法、BeginGetResponse 和 BeginRead，并在 Parallel.ForEach 中运行它。一切正常，我对性能感到满意。不知何故，我觉得使用简单的 Parallel.ForEach 不是要走的路，例如，我不知道如何使用任务链。

3.  然后我尝试了更复杂的系统，使用任务来包装 APM 解决方案，方法是使用 TaskCompletionSource 和迭代器来遍历 APM 流。我相信这个解决方案可能是我正在寻找的，但是有一个奇怪的延迟，介于 6-10 秒之间，在运行 500 个 url 列表时会发生 2-3 次。

    根据日志，当延迟发生时，执行已返回到在循环中调用 async fetch 的线程。当执行移回循环时，延迟并不总是发生，只有 2-3 次，其他时候它工作正常。看起来循环线程将创建一组任务，这些任务将由其他​​线程处理，并且在大多数/所有任务完成时，在循环继续创建剩余任务和其他线程再次处于活动状态之前会有延迟（6-8 秒） .

循环内迭代器的原理是：

```
IEnumerable<Task> DoExample(string input) 
    { 
    var aResult = DoAAsync(input); 
    yield return aResult; 
    var bResult = DoBAsync(aResult.Result); 
    yield return bResult; 
    var cResult = DoCAsync(bResult.Result); 
    yield return cResult; 
    … 
    }

Task t = Iterate(DoExample(“42”)); 
```

我正在使用 System.Net.ServicePointManager.DefaultConnectionLimit 解决连接限制，并使用 ThreadPool.RegisterWaitForSingleObject 超时

我的问题很简单，实现帮助器/实用程序类以检索 html 页面的最佳方法是：

*   可扩展并具有高性能
*   使用网络请求
*   很容易被链接到其他任务
*   能够使用超时
*   使用 .NET 4 框架

如果您认为我上面介绍的使用 APM、TaskCompletionSource 和迭代器的解决方案很好，我将不胜感激尝试解决延迟问题的任何帮助。

我对 C# 和 Windows 开发完全陌生，所以如果我正在尝试的东西没有太大意义，请不要介意。

任何帮助都将受到高度赞赏，因为如果没有解决这个问题，我必须放弃我的测试工具开发。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T06:09:00.897

在 TPL 之前的 .NET 中使用迭代器是一个很好的解决方案（例如，MS Robotics 的协调和并发运行时 (CCR) 大量使用了迭代器并帮助激发了 TPL）。一个问题是迭代器本身并不能满足你的需求——你还需要一个调度器来有效地分配工作负载。这*几乎*是由您链接到的 Stephen Toub 的片段完成的 - 但请注意一行：

```
enumerator.Current.ContinueWith(recursiveBody, TaskContinuationOptions.ExecuteSynchronously); 
```

我认为您看到的间歇性问题可能与强制“ExecuteSynchronously”有关——它可能导致可用内核/线程之间的工作分配不均。

看看 Stephen[在他的博客文章中](http://blogs.msdn.com/b/pfxteam/archive/2010/11/21/10094564.aspx)提出的其他一些替代方案。特别是，看看仅仅做一个简单的 ContinueWith() 调用链接会做什么（如果需要，然后匹配 Unwrap() 调用）。语法不会是最漂亮的，但它是最简单的，并且尽可能少地干扰底层工作窃取运行时，因此您有望获得更好的结果。

# firefox - 浏览器添加 www。和 .com 自动到服务器地址

> ID：10186383
> 
> 赞同：26
> 
> 时间：2012-04-17T06:41:05.780
> 
> 标签：firefox, url, google-chrome, browser, safari

在我的公司，我们通过本地服务器访问一些数据库，通过 firefox/chrome/safari，使用以下格式的 URL：

[http://server_name:端口/路径](http://server_name:port/path)

这意味着它不需要前缀 www。或后缀 .com。问题是最近浏览器已经开始自己添加这些，无论是在我们刚刚启动浏览器还是在加载新页面时，从而使 URL：

[http://www.server_name.com:port/path](http://www.server_name.com:port/path)

当然，这不是正确的 URL，它不允许连接到我们的服务器，或者它会在进程中间断开我们的连接。有没有办法阻止浏览器自动添加这些？

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-20T16:01:34.713

在 Firefox 14 之前我从来没有遇到过这个问题。我在过去几年中发现的问题的答案是：

> 1.  在地址栏中，输入 about:config 并按“Enter”
>     
>     
>     *   about:config "这可能会使您的保修失效！" 可能会出现警告页面。“点击我会 > 小心，我保证！”，继续到 about:config 页面。
> 2.  在搜索字段中，输入“browser.fixup.alternate.enabled”
>     
>     
> 3.  双击“browser.fixup.alternate.enabled”首选项以将其值设置为 false。

这似乎对人们有用，但对我无效。搜索配置后，我找到了 browser.urlbar.autocomplete.enabled。我把它关掉了，它成功了。因此，如果以前的方法不起作用，请尝试：

> 1.  在地址栏中，输入 about:config 并按“Enter”
>     
>     
>     *   about:config "这可能会使您的保修失效！" 可能会出现警告页面。“点击我会 > 小心，我保证！”，继续到 about:config 页面。
> 2.  在搜索字段中，输入“browser.urlbar.autocomplete.enabled”
>     
>     
> 3.  双击“browser.urlbar.autocomplete.enabled”首选项将其值设置为 false。

**编辑：**禁用`browser.urlbar.autoFill`而不是自动完成也可以解决问题，同时仍然显示历史记录中的建议结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T03:41:34.450

如果您只是`server_name`在搜索/url 栏中输入，浏览器会尝试提供帮助并猜测 URL 应该是什么或切换到搜索。但是，如果您单击 HTML 链接、输入完整的 URL ( `http://server_name`) 或使用书签，浏览器应尊重所输入的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-17T14:33:45.013

如果在互联网上的此处和其他地方找到的所有建议都不起作用（就像它们对我不起作用），请检查您的代理设置是否在公司环境中。

我不得不手动设置代理 - 它没有采用全局设置。选项 - 网络 - 设置 - '自动代理配置 url' 为我修复了它。

# iphone - 如何给progressview赋予超过百的进度值

> ID：10186384
> 
> 赞同：0
> 
> 时间：2012-04-17T06:41:06.783
> 
> 标签：iphone

我正在开发一个应用程序。在那我使用进度视图。在这个我需要给进度值超过一百。如果我给超过一百然后填满总栏。所以请告诉我如何做这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T06:45:53.860

当您调用时，如果您的进度值（无论出于何种原因）大于或等于，则[`-setProgress:animated`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIProgressView_Class/Reference/Reference.html#//apple_ref/occ/instm/UIProgressView/setProgress%3aanimated%3a)发送它，您的真正最大值在哪里。如果您的原始最大值为，请将其映射到，以便下面的值表示完成百分比，而及以上的值表示完全完成。`1.0``1.0``1.0``100``1.0``100``100`

# php - 使用php解析表格数据并将表格数据保存在excel表格中

> ID：10186388
> 
> 赞同：0
> 
> 时间：2012-04-17T06:41:21.420
> 
> 标签：php, html, excel

我有一个文件“import.php”，其中 html 数据写在表标签下。现在我想解析该数据并将该数据保存在 Excel 工作表中。格式是下面提到的，第一个 tr 包含标题，然后是数据

```
<html>
  <body>
  <table>
  <tr>
  <th>Name</th>
  <th>Email</th>
  <th>Addr</th>
  <th>City</th>
  </tr>

  <tr>
  <td>Jack</td>
  <td>a@b.com</td>
  <td>xyz Road</td>
  <td>LOS ANGELES</td>
  </tr>

  <tr>
  <td>Sam</td>
  <td>sam@b.com</td>
  <td>pr Road</td>
  <td>TUSTIN</td>
  </tr>
    </table>
  </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:17:53.863

也许你最好看看这个： http: [//phpexcel.codeplex.com/](http://phpexcel.codeplex.com/)

这个：[http ://www.easyxls.com/](http://www.easyxls.com/)

另一个技巧是将您的数据保存为 CSV 文件： http: [//www.homeandlearn.co.uk/php/php10p6.html](http://www.homeandlearn.co.uk/php/php10p6.html)

更新：

没有更简单的方法可以将数据直接保存到 Excel 文件中，而是另存为 CSV。试试这个代码：

```
<?php 
$data = array( array("firstname" => "Mary", "lastname" => "Johnson", "age" => 25), 
    array("firstname" => "Amanda", "lastname" => "Miller", "age" => 18), 
    array("firstname" => "James", "lastname" => "Brown", "age" => 31), 
    array("firstname" => "Patricia", "lastname" => "Williams", "age" => 7), 
    array("firstname" => "Michael", "lastname" => "Davis", "age" => 43), 
    array("firstname" => "Sarah", "lastname" => "Miller", "age" => 24), 
    array("firstname" => "Patrick", "lastname" => "Miller", "age" => 27) ); 

    # filename for download 
    $filename = "website_data_" . date('Ymd') . ".xls"; 
    header("Content-Disposition: attachment; filename=\"$filename\""); 
    header("Content-Type: application/vnd.ms-excel");
    $flag = false; 
    foreach($data as $row) 
    { 
        if(!$flag) 
        { # display field/column names as first row echo 
            implode("\t", array_keys($row)) . "\r\n"; $flag = true; 
        } 
        array_walk($row, 'cleanData');
        print implode("\t", array_values($row)) . "\r\n"; 
    }

    function cleanData(&$str) 
    { 
        $str = preg_replace("/\t/", "\\t", $str); 
        $str = preg_replace("/\r?\n/", "\\n", $str); 
        if(strstr($str, '"')) 
            $str = '"' . str_replace('"', '""', $str) . '"';
    }
?> 
```

至于从 html 标签中分离值，您可以从 import.php 中读取您的 html 代码，删除所有不必要的标签，在每个或标签的末尾放置一个分隔符，然后将您的值放入一维数组中：

```
<?php 
$htmldata = "";
$htmldata .= "<html>";
$htmldata .= "<body>";
$htmldata .= "<tr>";
$htmldata .= "<th>header1</th>";
$htmldata .= "<th>header2</th>";
$htmldata .= "<th>header3</th>";
$htmldata .= "<th>header4</th>";
$htmldata .= "</tr>";
$htmldata .= "<tr>";
$htmldata .= "<td>data1</td>";
$htmldata .= "<td>data2</td>";
$htmldata .= "<td>data3</td>";
$htmldata .= "<td>data4</td>";
$htmldata .= "</tr>";
$htmldata .= "</body>";
$htmldata .= "</html>";

//Remove the unecessary tags like <html>, </html>, <body>, </body>, <th>, </th>, <td>, </td>
$searchfor = array("<html>", "</html>", "<body>", "</body>", "<tr>", "</tr>", "<th>", "</th>", "<td>", "</td>");
$replacewith = array("", "", "", "", "", "", "", "**SEPERATOR**", "", "**SEPERATOR**"); // Replace </th> & </td> with **SEPERATOR** text
$htmldata = str_replace($searchfor, $replacewith, $htmldata);

$values = explode("**SEPERATOR**", $htmldata); ;
print_r($values);

?> 
```

数组 $values 的前 4 个值包含您的标头值。希望它有帮助...

# backbone.js - Backbone JS，获取时集合视图为空一秒钟

> ID：10186389
> 
> 赞同：0
> 
> 时间：2012-04-17T06:41:23.073
> 
> 标签：backbone.js, backbone-views

我将集合绑定到 DOM 元素“#collection_view”。

当收集获取数据并更新视图时，视图变为空一秒钟，然后填充正确的 HTML。在集合中有 addAll、addOne 方法将列表元素附加到列表中。

如何跳过空的，直接用新的 HTML 替换旧的 HTML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:30:23.683

这就是`fetch()`工作原理..它将一次*清空*集合并*添加所有*元素。我想你的事件绑定函数`this.$el.empty()`中有一个调用（或类似的东西） 。`addAll`正在发生的事情是`$el`DOM 元素将被*清除*，然后*重新填充*。

如果您想*刷新*集合而不是*重置*它，您应该[在此处查看答案](https://stackoverflow.com/questions/9640095/backbone-js-collection-upsert)。

看起来[有人提议将此*软更新*](https://github.com/documentcloud/backbone/issues/955)添加到 Backbone `Collection`，但被 Backbone 维护者拒绝。

# c# - 添加额外的文字字符

> ID：10186393
> 
> 赞同：1
> 
> 时间：2012-04-17T06:41:36.710
> 
> 标签：c#, string, literals

我需要分配一个字符串`"doTask.ex /select:"" + cmd + "param:"`

我想在 /select: 之后有一个额外的 qoute，我必须使用什么转义字符或如何执行此操作

```
String cmd = "doTask.ex /select:"" + cmd + "param:"; 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T06:48:00.873

In a regular string you use a backslash as escape character:

```
String cmd = "doTask.ex /select:\"" + cmd + "param:"; 
```

In a @ delimited string you use double quotation marks:

```
String cmd = @"doTask.ex /select:""" + cmd + "param:"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T06:45:23.973

```
String cmd = "doTask.ex /select:\"" + cmd + "param:"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T06:47:52.900

Escape Character for `"` is `\"`

```
String cmd = "doTask.ex /select:\"" + cmd + "param:"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T06:48:24.277

Surely googling this is faster than asking on so?! Escape characters with \. Like this:

```
String cmd = "doTask.ex /select:\"" + cmd + "param:"; 
```

# java - 渲染贴图 在 freemarker 表中

> ID：10186394
> 
> 赞同：0
> 
> 时间：2012-04-17T06:41:43.823
> 
> 标签：java, spring-mvc, freemarker

将 Map 渲染到 freemarker 模板表时出现错误。下面是我从控制器获得的带有实际值的地图。

```
Map<Object, Object> hramonths ={4={id=4, empjoindate=16 Nov 2007, description=Apr-2012, editable=T}, 5={id=5, empjoindate=16 Nov 2007, description=May-2012, editable=T}, 6={id=6, empjoindate=16 Nov 2007, description=Jun-2012, editable=T}, 7={id=7, empjoindate=16 Nov 2007, description=Jul-2012, editable=T}, 8={id=8, empjoindate=16 Nov 2007, description=Aug-2012, editable=T}, 9={id=9, empjoindate=16 Nov 2007, description=Sep-2012, editable=T}, 10={id=10, empjoindate=16 Nov 2007, description=Oct-2012, editable=T}, 11={id=11, empjoindate=16 Nov 2007, description=Nov-2012, editable=T}, 12={id=12, empjoindate=16 Nov 2007, description=Dec-2012, editable=T}, 1={id=1, empjoindate=16 Nov 2007, description=Jan-2013, editable=T}, 2={id=2, empjoindate=16 Nov 2007, description=Feb-2013, editable=T}, 3={id=3, empjoindate=16 Nov 2007, description=Mar-2013, editable=T}} 
```

从我的控制器现在我想将此值呈现给我的 freemarker 模板，例如

```
<#list hramonths as indication>
                <tr>
                    <td class="center">
                        <#list monthlyrent as rent>
                            <#if indication.id == rent.month><input type="hidden" name="locationIndicatorId_${indication.id}" value="${indication.id}" /> </#if>
                        </#list>    
                    </td>
                    <td class="center">
                        ${indication.description}  <input type="hidden" name="month_${indication.id}" id="month_${indication.id}" value="${indication.id}" />
                    </td>
                    <td class="center">
                        <# assign varIndicatorId ="">
                        <#list monthlyrent as rent>
                            <#if indication.id == rent.month>
                                <# assign varIndicatorId = ${rent.Indicator}>
                            </#if>
                        </#list>                    
                        <select name="indicator_${indication.id}" <#if indication.editable == "F"> disabled="true" </#if> <#if editable == false>disabled="true"</#if>>
                            <#list indicators as indicator>
                                <option value="${indicator.cid}" <#if indicator.cid == varIndicatorId> selected </#if>>
                                    ${indicator.description}
                                </option>
                            </#list>
                        </select>
                    </td>
                    <td class="right">
                        <#if mothlyrentsize != "0"> 
                            <#list monthlyrent as rent>
                                <#if indication.id == rent.month>
                                    <input type="text" align="right" name="rent_${indication.id}_${rent.cid}" 
                                        value="$DelphiNumber.formatNumber("$!rent.rent")"  
                                        <#if indication.editable == "F"> 
                                        readonly="true" class="rbox" </#if> 
                                        <#if editable == false>
                                            readonly="true" class="rbox"
                                        </#if>
                                        <#if indication.editable != "F" && editable != false>
                                            onBlur="isnumeric(this.form,this),updateHRATotalAll(this.form,'blurtype')"
                                    </#if> />                           
                                </#if>
                            </#list>                    
                        <#else>
                            <input type="text" name="rent_${indication.id}_0" value="$DelphiNumber.formatNumber("0")" 
                                #if("$!indication.editable" == "F") 
                                readonly="true" class="rbox" #end 
                                #if($editable == false)
                                    readonly="true" class="rbox"
                                #end
                                style="TEXT-ALIGN: right"
                                #if("$!indication.editable" != "F" && $editable != false)
                                    onBlur="isnumeric(this.form,this),updateHRATotalAll(this.form,'blurtype')"  
                                #end >
                            </input>    
                        </#if>  
            </td>                               
        </tr>
    </#list> 
```

但我收到错误

```
Expected collection or sequence. hramonths evaluated instead to freemarker.template.SimpleHash on line 199, column 40 in WEB-INF/classes/com/greytip/cougar/module/epayroll/v2/freemarker/salary/it-declaration.ftl. The problematic instruction: ---------- ==> list hramonths as indication [on line 199, column 33 in WEB-INF/classes/com/greytip/cougar/module/epayroll/v2/freemarker/salary/it-declaration.ftl] ----------  Java backtrace for programmers: ---------- freemarker.template.TemplateException: Expected collection or sequence. hramonths evaluated instead to freemarker.template.SimpleHash on line 199, column 40 
```

我如何将它呈现在桌子上，请任何人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T06:51:15.830

把你`Map`换成`List`. 所以它看起来像：

```
List<Object> hramonths =[
    {id=4, empjoindate=16 Nov 2007, description=Apr-2012, editable=T}, 
    {id=5, empjoindate=16 Nov 2007, description=May-2012, editable=T}, 
    {id=6, empjoindate=16 Nov 2007, description=Jun-2012, editable=T}] 
```

您可以使用从地图中获取所有值：

```
Collection<Object> hramonthsValues = hramonths.values(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-04T13:36:12.043

当 Map 使用 String 以外的其他内容作为键时，freemarker 不能很好地理解。用 a替换您`Map<Object, Object>`的`Map<String, Object>`可能会解决您的异常。但是您将需要使用“名称”属性来唯一标识您的对象，并且还需要作为 Map 的键。

# java - 没有队列的 ThreadPoolExecutor

> ID：10186397
> 
> 赞同：10
> 
> 时间：2012-04-17T06:42:05.843
> 
> 标签：java, queue, threadpool

我想创建一个固定大小的线程池，它不允许任何任务进入其队列。换句话说，如果线程池当前正在使用，那么传入的任务应该被彻底拒绝。根据[文档](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)，在我看来，一种方法是创建一个拒绝承认任务的虚拟 Queue 对象。在 Java 中实现此目的的惯用方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-17T07:17:02.887

您可以在 ThreadPoolExector 中使用[SynchronousQueue](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/SynchronousQueue.html)，它是一个不包含任何对象的队列。缓存线程池使用它是因为它按需创建新线程。

如果它不能排队，但我建议使用[RejectedExecutionHandler](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/RejectedExecutionHandler.html)在当前线程中运行任务。这样，它将始终“立即”运行。

顺便说一句：明确你为什么要这样做会很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-30T14:08:16.587

> 我想创建一个固定大小的线程池，它不允许任何任务进入其队列。

对于后代，如果您需要一个没有队列*并且*运行所有作业的线程池（与 OP 略有不同），那么您可以使用`SynchronousQueue`which 将阻塞，直到线程准备好执行该作业。诀窍是在将阻塞的队列上使用`RejectedExecutionHandler`which 调用`put(...)`。

```
threadPool = new ThreadPoolExecutor(corePoolSize, maximumPoolSize, keepAliveTime,
  unit, new SynchronousQueue<Runnable>(),
  new RejectedExecutionHandler() {
    @Override
    public void rejectedExecution(Runnable runnable, ThreadPoolExecutor executor){
      try {
        // this needs to be put(...) and not add(...)
        executor.getQueue().put(runnable);
      } catch (InterruptedException e) {
        Thread.currentThread().interrupt();
      }
    }
  }); 
```

您将能够提交作业，直到`maximumPoolSize`达到线程数，然后提交将阻塞，直到作业完成并且线程可用于从`SynchronousQueue`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T06:49:20.287

你能详细说明你为什么要做这样的事情吗？TP + Q 的根本目的是为工作建立一个自动“持有机制”，并将工人与工作创建过程分离。如果您的意图是只拥有与工人一样多的可接受的工作包，那么您真的不需要 TPE。

# apache - Rewrite-rules case "Internal server error" (error.log inside)

> ID：10186403
> 
> 赞同：3
> 
> 时间：2012-04-17T06:42:33.563
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我已将旧的 eZ-Publish 网站升级到最新的 PHP5 兼容 4.6 版本（以前在 PHP4 上）。该站点在我的本地网络服务器上运行，但是当我尝试将其上传到服务器时，它失败并在 Apache 的 error.log 中显示以下消息：

```
[Mon Apr 16 14:33:22 2012] [error] [client 46.249.225.2] Request exceeded the limit of 20 internal redirects due to probable configuration error. Use 'LimitInternalRecursion' to increase the limit if necessary. Use 'LogLevel debug' to get a backtrace. 
```

我已将其缩小到重写规则中的一个问题，这很奇怪，因为我使用与其他 4.6 安装相同的重写规则。这是 Apache 主机文件中的重写规则：

```
RewriteEngine On
Rewriterule ^/var/storage/.* - [L]
Rewriterule ^/var/[^/]+/storage/.* - [L]
#RewriteRule ^/var/cache/texttoimage/.* - [L]
#RewriteRule ^/var/[^/]+/cache/texttoimage/.* - [L]
RewriteRule ^/var/([^/]+/)?cache/(texttoimage|public)/.* - [L]
Rewriterule ^/design/[^/]+/(stylesheets|images|javascript)/.* - [L]
Rewriterule ^/share/icons/.* - [L]
RewriteRule ^/extension/[^/]+/design/[^/]+/(stylesheets|images|javascripts?|lib|flash)/.* - [L]
Rewriterule ^/packages/styles/.+/(stylesheets|images|javascript)/[^/]+/.* - [L]
RewriteRule ^/packages/styles/.+/thumbnail/.* - [L]
RewriteRule ^/favicon.ico - [L]
RewriteRule ^/robots.txt - [L]
RewriteRule ^/extension/sjsd/(FCKeditor|fcksjsd)/.* - [L]
RewriteRule ^/var/([^/]+/)?cache/public/.* - [L]
RewriteRule ^/extension/[^/]+/design/[^/]+/calendar/.* - [L]
RewriteRule ^/extension/[^/]+/design/[^/]+/calendar/ipopeng.htm - [L]
RewriteRule ^/extension/[^/]+/design/[^/]+/fckskins/.* - [L]
# Uncomment the following lines when using popup style debug.
# RewriteRule ^/var/cache/debug.html.* - [L]
# RewriteRule ^/var/[^/]+/cache/debug.html.* - [L]
RewriteRule .* /index.php 
```

有没有人发现任何问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T07:07:25.217

假设您的 .htaccess 文件位于根目录中，您的最后一条规则会创建一个内部重定向，该重定向会使用`/index.php`需要重写的 URL 重新启动重写过程。最后一条规则重写`/index.php`为`/index.php`并且循环继续。尝试在规则*之前*在 .htaccess 文件中添加这一行`.*`：

```
RewriteRule ^/index\.php$ - [L] 
```

# android - 如何在android中获取联系人的组ID

> ID：10186407
> 
> 赞同：0
> 
> 时间：2012-04-17T06:42:54.630
> 
> 标签：android, android-contacts, contactscontract

我想在我的android应用程序中获取每个联系人的组ID。我有这样的初始查询

```
Cursor cursor = cr.query(Phone.CONTENT_URI,
                new String[] { 
                Phone.CONTACT_ID}, null, null, null); 
```

我所做的是获取与此 CONTACT_ID 相关的每个细节。到目前为止，我已经设法获取电话号码、姓名、地址和电子邮件，但仍然无法获取联系人的组 ID。

[PS我在这里](https://stackoverflow.com/q/657154/559185)发现了一个问题，但该课程`android.provider.Contacts.GroupMembership`已被弃用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:40:58.363

尝试这个：

```
final String selection = "mimetype_id = (select _id from mimetypes where mimetype = \"" + 
        vnd.android.cursor.item / group_membership + "\")";

Cursor cursor = getContentResolver().query(Data.CONTENT_URI,
        new String[]{Phone.CONTACT_ID}, selection, null, null);
try {
    if (cursor != null && cursor.moveToFirst()) {
        do {
            Log.i("Details", "Contact IDs" + cursor.getLong(cursor.getColumnIndex(Phone.CONTACT_ID)));
        } while (cursor.moveToNext());
    }
} finally {
    if (cursor != null) {
        cursor.close();
    }
} 
```

# android - Google Market 计费包和 Google Play 计费库有什么区别

> ID：10186414
> 
> 赞同：2
> 
> 时间：2012-04-17T06:43:23.930
> 
> 标签：android

**Google Market 计费包和 Google Play 计费库有什么区别**。是一样的吗？我正在搜索 Google Market 计费包，但在安装所有更新后我没有得到它。我只有 Google Play 计费库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T06:54:49.060

Google Market Billing 可让您对移动应用程序的使用收费。

关于应用内计费，它是一项 Google Play 服务，可为应用内购买提供结帐处理。要使用该服务，您的应用程序会发送一个针对特定应用内产品的计费请求。两者是不同的

可以从此链接获得更多信息。

[http://developer.android.com/guide/market/billing/billing_overview.html](http://developer.android.com/guide/market/billing/billing_overview.html)

# ruby-on-rails - 如何将两个外键关联到创建帖子

> ID：10186415
> 
> 赞同：0
> 
> 时间：2012-04-17T06:43:29.857
> 
> 标签：ruby-on-rails

我有以下 3 个模型，并希望将两个外键与创建（user_id（来自用户模型）和 review_id（来自评论模型）上的帖子关联到目标模型。我设法使用 'current_user' 将 user_id 与目标相关联使用下面链接中给出的解决方案创建，但不确定如何为 review_id 完成此操作。

谢谢。

[设计如何将当前用户关联到帖子？](https://stackoverflow.com/questions/6009295/devise-how-to-associate-current-user-to-post)

我的模型：

```
class User < ActiveRecord::Base       
  has_many :reviews
  has_many :periods, :through => :reviews
  has_many :goals
end

class Review < ActiveRecord::Base       
  belongs_to :user
  belongs_to :period
  has_many :goals
end

class Goal < ActiveRecord::Base       
  belongs_to :user
  belongs_to :review
end 
```

我的目标控制器.rb

```
def create
  @goal = current_user.goals.build(params[:goal])

  respond_to do |format|
    if @goal.save
      format.html { redirect_to @goal, notice: 'Goal was successfully created.' }
      format.json { render json: @goal, status: :created, location: @goal }
    else
      format.html { render action: "new" }
      format.json { render json: @goal.errors, status: :unprocessable_entity }
    end
  end
end 
```

干杯，阿兹伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:14:21.910

虽然我不明白目标是什么。我通常使用的一种通用方法是将关系建模为您熟悉的事物，或者您可以轻松找到好的示例。例如，将您的用例视为用户问答模型。与您的用例相同，用户有很多问题和很多答案。question有很多答案，属于用户，答案属于用户和问题。

所以事情变得容易了，对吧？让我们看看stackoverflow是如何实现的。您可以查看评论框的 html 代码，表单操作类似于 (/questions/10186415/answer/submit)。这里 10186415 是问题 id，它被传递到服务器端，因此当创建答案时，可以使用此问题 id 并关联。

回到您的案例，目标表单应该知道它的用途。评论 ID 可以是隐藏字段，也可以是提交 url 的一部分。

# java - 单击按钮后如何使具有不可见属性“可见”的视图

> ID：10186420
> 
> 赞同：0
> 
> 时间：2012-04-17T06:44:00.520
> 
> 标签：java, android, eclipse, button, visibility

我有几个视图、文本视图和一个具有 android:visibility="invisible" 属性的按钮。我的目标是单击位于这些“不可见”小部件上方的按钮，以便这些小部件变得可见。我创建了另一个名为“VisibilityActivity.java”的java类并尝试了以下方法。但由于某种原因，当我运行应用程序时，按钮没有做任何事情。我不知道我错过了什么。

这是代码：

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class VisibilityActivity extends Activity {

    private View mVictim;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.new_property3);

        mVictim = findViewById(R.id.horizontalRule1);
        mVictim = findViewById(R.id.TextView03);
        mVictim = findViewById(R.id.horizontalRule2);

        Button submitRating = (Button) findViewById(R.id.submitRatingButton);

        submitRating.setOnClickListener(mVisibleListener);

    }

    OnClickListener mVisibleListener = new OnClickListener() {
        public void onClick(View v) {
            mVictim.setVisibility(View.INVISIBLE);
        }
    };

} 
```

这是xml：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/custom_background"
android:isScrollContainer="true"
android:orientation="vertical"
android:paddingTop="10dp" >

    <TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginBottom="5dp"
    android:layout_gravity="center"
    android:text="@string/ratingsInfo"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="@color/black1" />

    <View 
    android:layout_width="fill_parent" 
    android:layout_height="2dp"
    android:background="@color/black1"
    android:layout_marginLeft="2dp"
    android:layout_marginRight="2dp"
    android:layout_marginBottom="5dp" />

    <TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginBottom="5dp"
    android:text="@string/yourRating"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="@color/black1" />

    <RatingBar
    android:id="@+id/ratingBar1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginBottom="10dp" />

    <Button
    android:id="@+id/submitRatingButton"
    android:layout_width="275dp"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginBottom="10dp"
    android:background="@drawable/custom_button"
    android:text="@string/submitRating"
    android:textColor="@color/black1" />

    <View 
    android:id="@+id/horizontalRule1"
    android:layout_width="fill_parent" 
    android:layout_height="2dp"
    android:background="@color/black1"
    android:layout_marginLeft="2dp"
    android:layout_marginRight="2dp"
    android:layout_marginBottom="5dp"
    android:visibility="invisible" />

    <TextView
    android:id="@+id/TextView03"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginBottom="5dp"
    android:layout_gravity="center"
    android:text="@string/summaryInfo"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="@color/black1"
    android:visibility="invisible" />

    <View 
    android:id="@+id/horizontalRule2"
    android:layout_width="fill_parent" 
    android:layout_height="2dp"
    android:background="@color/black1"
    android:layout_marginLeft="2dp"
    android:layout_marginRight="2dp"
    android:layout_marginBottom="5dp"
    android:visibility="invisible" />

    <TextView
    android:id="@+id/TextView01"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginBottom="5dp"
    android:text="@string/ourRating"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="@color/black1"
    android:visibility="invisible" />

    <RatingBar
    android:id="@+id/ratingBar2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:stepSize=".01"
    android:layout_marginBottom="10dp"
    android:visibility="invisible" />

    <TextView
    android:id="@+id/TextView02"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginBottom="5dp"
    android:text="@string/overallRating"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="@color/black1"
    android:visibility="invisible" />

    <RatingBar
    android:id="@+id/ratingBar3"
    android:color="@color/black1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:stepSize=".01"
    android:layout_marginBottom="40dp"
    android:visibility="invisible" />

    <Button
    android:id="@+id/saveContinueButton3"
    android:layout_width="275dp"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginBottom="15dp"
    android:background="@drawable/custom_button"
    android:text="@string/saveContinue"
    android:textColor="@color/black1"
    android:onClick="onSaveAndContinue3Clicked"
    android:visibility="invisible" />

</LinearLayout>
</ScrollView> 
```

谢谢。帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:02:36.280

我正在更新**user936414**的答案。

```
OnClickListener mVisibleListener = new OnClickListener() {
    public void onClick(View v) {

        if( mText.getVisibility() == View.INVISIBLE )
            mText.setVisibility(View.VISIBLE);
        else
            mText.setVisibility(View.INVISIBLE);

        if( mRule1.getVisibility() == View.INVISIBLE )
            mRule1.setVisibility(View.VISIBLE);
        else
            mRule1.setVisibility(View.INVISIBLE);

        if( mRule2.getVisibility() == View.INVISIBLE )
            mRule2.setVisibility(View.VISIBLE);
        else
            mRule2.setVisibility(View.INVISIBLE);
    }
}; 
```

此外，您可能想尝试 View.GONE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T06:47:31.713

```
findViewById(R.id.ratingBar3).setVisibility(View.VISIBLE);
findViewById(R.id.saveContinueButton3).setVisibility(View.VISIBLE); 
```

你让它不可见视图再次不可见..试试上面的代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T06:50:24.863

尝试

```
public class VisibilityActivity extends Activity {

private TextView mText;
private View mRule1, mRule2;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.new_property3);

    mText= (TextView)findViewById(R.id.horizontalRule1);
    mRule1 = findViewById(R.id.TextView03);
    mRule2 = findViewById(R.id.horizontalRule2);

    Button submitRating = (Button) findViewById(R.id.submitRatingButton);

    submitRating.setOnClickListener(mVisibleListener);

}

OnClickListener mVisibleListener = new OnClickListener() {
    public void onClick(View v) {
        mText.setVisibility(View.VISIBLE);
        mRule1.setVisibility(View.VISIBLE);
        mRule2.setVisibility(View.VISIBLE);
    }
};

} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-03T09:30:07.040

```
Button submitRating = (Button) findViewById(R.id.submitRatingButton);
        submitRating.setOnClickListener(new View.onClickListener)
        {
             @Override
         public void onClick(View v) 
            {
                              //Insert your code here
                    }
        } 
```

# php - 排序在分页的第二页上不起作用

> ID：10186424
> 
> 赞同：0
> 
> 时间：2012-04-17T06:44:28.533
> 
> 标签：php, codeigniter, sorting, jquery, pagination

我试图在 Codeigniter 中使用分页列出。我愿意通过使用 jquery ajax 在列表中使用排序。它非常适合分页的第一页。我可以在该页面中进行升序和降序排序。但是当我点击其他页面时。这没用。

可能是什么问题呢。任何人都可以建议我吗？

提前致谢。

这是我的控制器的代码

```
function listData(){

  $this->clear_sample_id_catche();
  $out=$this->Mgeneral->listData();
  $per_page = 10;
    $total = $this->Mgeneral->countData();
    $data = $this->Mgeneral->listData($per_page, $this->uri->segment(3));

   $base_url = site_url('general/listData');

   $config['base_url'] = $base_url;
   $config['total_rows'] = $total;
   $config['per_page'] = $per_page;
   $config['uri_segment'] = '3';

$this->pagination->initialize($config); 
  $data=array('body'=>'list','out'=>$data);

  $this->load->view('template',$data);
} 
```

这是我的模型

```
function listData($limit = NULL, $offset = NULL)
{
 $this->db->limit($limit, $offset);
 $data=array();
$q=$this->db->get('tbl_sample_id');
if($q->num_rows()>0)
{     $data=$q->result_array();                             
        return $data;
    }
} 
```

我使用 ajax 作为

```
<script type="text/javascript"> 
```

$(document).ready(function(){ $("#internal").click(function(){

```
$.ajax({url:"general/listData_internal_ascending",success:function(result){
  $("body").html(result);

    }});
  });
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:57:20.773

在进行数据库调用时，分页使用 Limit 和 Offset 参数。如果您使用分页，则单击页面链接将传回偏移量。如果到目前为止这对您有用，那么您需要做的就是确保将 Sort 参数保留在页面中的某个位置。

如果您的控制器方法正在检查 GET 变量以查找分页的偏移量，您需要确保该方法还知道要按哪个字段进行排序。我个人将其存储在 flashdata 中。

因此，在您的控制器方法中，在 db 调用之前：

```
$SortColumn = $this->session->flashdata('SORT_BY'); 
```

如果那里没有保存排序，则返回 false，因此您可以在添加 $db->order_by() 方法时检查它。如果那里有东西，那么你可以适当地排序。

然后在加载视图之前在方法的底部，将 Sort 设置回 flashdata，以便下次调用该方法时（在下一页请求上），它有 Sort 字段可以再次使用。

```
$this->session->set_flashdata('SORT', $SortColumn); 
```

抱歉，我没有任何完整的代码示例，因为我使用 PHP-ActiveRecord 而不是 CI 内置的 activerecord 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:07:52.373

你的功能应该是这样的

```
function listData($limit = NULL, $offset = NULL)
{
    $this->db->limit($limit, $offset);
    $this->db->order_by('id');
    $q = $this->db->get('tbl_sample_id');
    if($q->num_rows()>0)
    {     
       return $q->result_array();                             
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T07:00:51.007

我可以建议您在分页的 ajax 调用中传递排序参数。这可能是问题所在。

# wordpress - Wordpress 将插件与 cimy 用户额外字段插件集成

> ID：10186431
> 
> 赞同：0
> 
> 时间：2012-04-17T06:44:41.227
> 
> 标签：wordpress

我目前正在使用 cimy 用户额外字段插件进行多步注册。如何将日期选择器插件、facebook 之类的插件与我当前使用的插件集成。
我在注册表单中添加了多个字段。是否可以在多步骤页面和进度条中打破表单页面，以向用户显示注册从第 1 步到第 2 步，依此类推。cimy用户额外字段插件的下载链接是[http://wordpress.org/extend/plugins/cimy-user-extra-fields/](http://wordpress.org/extend/plugins/cimy-user-extra-fields/)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T21:27:57.260

为了有可能回答您的日期字段问题，我建议您通过 jQuery UI 附加一个日期选择器，我认为您可以通过注册页面上的一个小 JS 相当容易地做到这一点。听起来你可能不得不在那里做一些编码。如果您在进行所有设置方面需要帮助，请尝试使用 Google，然后返回您找不到或无法弄清楚的任何内容。

# android - C2DM 设备到云数据传输可能吗？

> ID：10186432
> 
> 赞同：0
> 
> 时间：2012-04-17T06:44:44.180
> 
> 标签：android

是否可以在 c2dm 中将数据从设备发送到云端？如果是，如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:47:10.560

I don't think so. C2DM is a server to mobile notification system. If you have to do it the other way round you can expose a service on the cloud and access it directly from the device. What would be the point of using C2DM anyway?

# required - How to set a field required in joomla 2.5?

> ID：10186447
> 
> 赞同：0
> 
> 时间：2012-04-17T06:46:27.443
> 
> 标签：required, joomla2.5

I have created a component. In this component I have created the form fields using xml file. In xml file I set the attribute `required='required'` of a text field and that field become a required field automatically.

But Now I have a component which has created the form in a php file using html input tags. And now I want to make a textfield required in that form so how will I do this? As in the input tag I can't enter the `required='required'` attribute.

So what should I do with this so that the textbox becomes a required field and without entering some text in that field it should not be submitted.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T11:36:21.563

通过以下网站为 php 表单字段添加验证。

[http://buildinternet.com/2008/12/how-to-validate-a-form-complete-with-error-messages-using-php-part-1/](http://buildinternet.com/2008/12/how-to-validate-a-form-complete-with-error-messages-using-php-part-1/)

[http://phpmaster.com/form-validation-with-php/](http://phpmaster.com/form-validation-with-php/)

# html - Are most websites out there built on XHTML rather than HTML?

> ID：10186448
> 
> 赞同：1
> 
> 时间：2012-04-17T06:46:28.330
> 
> 标签：html, xhtml

Recall the fact brought up by [this lesson](http://www.udemy.com/lectures/1-what-is-xhtml-and-css-70050) of the Become a Web Developer From Scratch course on Udemy. Would be great to hear some observations here, as I'm having trouble finding anything conclusive on Wikipedia, Google, or even here on Stackoverflow.

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T06:58:25.853

[一些统计数据](http://blog.powermapper.com/blog/post/HTML-vs-XHTML-Version-Statistics.aspx)表明现在 xhtml 更为常见，但我相信大多数 xhtml 页面都是作为 html 提供给浏览器的（这意味着它们不是从服务器作为 application/xhtml+xml、application/xml 或 text/xml 发送的，可能是因为[某些浏览器的支持](http://caniuse.com/xhtml)不太好）。

HTML5 现在就在这里，它旨在避免 html/xhtml 争论的问题。浏览器已经支持来自早期版本的基础知识，所以我建议你坚持下去，不要回头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T07:10:04.127

实际上，根据MA​​MA 于 2008 年通过检查 3,011,668 个域中的 3,509,180 个 URL 进行[的](http://dev.opera.com/articles/view/mama-the-url-set/)研究[，](http://dev.opera.com/articles/view/mama-key-findings/#structsize) HTML:XHTML 约为 2:1 。

我不确定在不到 4 年的时间里究竟发生了怎样的变化，但我会高度怀疑任何声称 XHTML 比 HTML 更受欢迎的说法，除非有特定的数据源支持。

[资源](http://dev.opera.com/articles/view/mama-key-findings/#structsize)

[妈妈](http://dev.opera.com/articles/view/mama-the-url-set/)

# java - creating threads through annomyous inner class

> ID：10186466
> 
> 赞同：4
> 
> 时间：2012-04-17T06:48:09.333
> 
> 标签：java

I was developing the code of creating a thread but without extending the thread class or implementing the runnable interface , that is through anonymous inner classes ..

```
public class Mythread3 {
    public static void main(String... a) {

        Thread th = new Thread() {

            public synchronized void run() {
                for (int i = 0; i < 20; i++) {
                    try {
                        Thread.sleep(1000);

                        System.out.print(i + "\n" + "..");
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                }

            }

        };

        th.start();
        Thread y = new Thread();
        y.start();

    }
} 
```

Now please advise me can I create child threads also with the same approach..!! what I have tried is that...

```
public class Mythread3 {
    public static void main(String... a) {

        Thread th = new Thread() {

            public synchronized void run() {
                for (int i = 0; i < 20; i++) {
                    try {
                        Thread.sleep(1000);

                        System.out.print(i + "\n" + "..");
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                }

            }

        };

        Thread th1 = new Thread() {

            public synchronized void run() {
                for (int i = 0; i < 20; i++) {
                    try {
                        Thread.sleep(1000);

                        System.out.print(i + "\n" + "..");
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                }

            }

        };
        th.start();
        try {
            th.join();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        th1.start();

    }
} 
```

But there are two run() methods in it, I think this not practical..please advise..!

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-17T07:10:18.443

```
 Runnable run = new Runnable() {
    public void run() {
        try {
            for (int i = 0; i < 20; i++) {
                Thread.sleep(1000);
                System.out.print(i + "\n" + "..");
            }

        } catch (InterruptedException e) {
            System.out.println(" interrupted");
        }
    }
 };
 new Thread(run).start();
 new Thread(run).start(); 
```

在开始第二个之前不要等待一个完成，否则你有三个线程，其中一个正在运行（在这种情况下，额外的线程毫无意义）

顺便说一句：您的同步没有做任何有用的事情，但它可能导致线程无法正常运行。

* * *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T07:16:38.357

您声明两个匿名内部类扩展 Thread 并覆盖 run() 方法这一事实本身并不是问题。我们可能认为不是真正可读但没有问题。

但是，您应该考虑使用该`Runnable`接口。您应该将处理/算法和线程策略分开。所以最好有这样的东西：

```
public class ThreadLauncher {
    public static void main(String[] args) {
         Thread job1 = new Thread(new Job1());
         Thread job2 = new Thread(new Job2());
         job1.start();
         job2.start();
    }
}

public class Job1 implements Runnable {
    @Override
    public void run() {
         // Do some stuff
    }
}

public class Job2 implements Runnable {
    @Override
    public void run() {
         // Do some other stuff
    }
} 
```

例如，这允许您多次启动同一个作业。

如果你想更进一步，你可以考虑使用[`ThreadPoolExecutor`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)来处理你的线程策略。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-04T11:02:53.027

匿名内部类是没有名称的类，意味着它没有明确的名称，但 JVM 将其命名为 Mythread3$1 以引用其对象。因此，当您打印 th.getClass() 和 th.getClass().getSuperclass() 时，您将获得 MyThread3$1 和 Thread 的输出。

您可以通过扩展 Thread 类或其任何子类（另一个实现 Runnable 接口或其任何子类型）来创建匿名内部类。在第一段代码中，您扩展了线程类。这就是为什么您将类名命名为 MyThread3$1（因为它是匿名内部类）和超类作为 Thread 类（当您扩展它时）。所以你可以创建尽可能多的匿名内部类扩展一个线程类，JVM将它们命名为 MyThread3$1、MyThread3$2、MyThread3$3...... 但是当你调用 start 方法时，每个线程将只执行它们的 run 方法（你覆盖了在 MyThread3$1, MyThread3$2 通过扩展线程类）。

```
package com.tej.threads;

public class MyThread3 {
public static void main(String... a) {

    Thread th = new Thread() {

        public synchronized void run() {
            for (int i = 0; i < 20; i++) {
                try {

                    System.out.println(i + "\t" + ".." + Thread.currentThread().getId());
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }

        }

    };
    Thread th1 = new Thread() {

        public synchronized void run() {
            for (int i = 50; i < 70; i++) {
                try {

                    System.out.println(i + "\t" + ".."+ Thread.currentThread().getId());
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }

        }

    };
    th.start();
    try {
        th.join();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    th1.start();
    System.out.println(th.getClass()+ " " + th.getClass().getSuperclass());
    for(int i=0;i<20;i++)
    {
        System.out.println("i am main Thread");
    }

  }
} 
```

输出是

```
0   ..8
1   ..8
2   ..8
3   ..8
4   ..8
5   ..8
6   ..8
7   ..8
8   ..8
9   ..8
10  ..8
11  ..8
12  ..8
13  ..8
14  ..8
15  ..8
16  ..8
17  ..8
18  ..8
19  ..8
class com.tej.threads.MyThread3$1 class java.lang.Thread
i am main Thread
i am main Thread
i am main Thread
i am main Thread
i am main Thread
i am main Thread
i am main Thread
i am main Thread
i am main Thread
i am main Thread  
i am main Thread
i am main Thread 
i am main Thread
i am main Thread
i am main Thread
i am main Thread
i am main Thread
i am main Thread
i am main Thread
i am main Thread
50  ..9
51  ..9
52  ..9
53  ..9
54  ..9
55  ..9
56  ..9
57  ..9
58  ..9
59  ..9
60  ..9
61  ..9
62  ..9
63  ..9
64  ..9
65  ..9
66  ..9
67  ..9
68  ..9
69  ..9 
```

您可以清楚地看到 thread1 将打印 1 到 20 及其 id，Thread2 将打印 50 到 70 及其 id，这意味着每个线程都在执行自己的 run 方法。 **注意：**主线程如果遇到th.start方法会逐行执行程序，然后主线程将发送子线程执行其run方法，主线程进入下一行执行。

# ajax - How to obfuscate an ASP.Net MVC3 Project using Dotfuscator?

> ID：10186468
> 
> 赞同：4
> 
> 时间：2012-04-17T06:48:09.830
> 
> 标签：ajax, asp.net-mvc-3, obfuscation, deobfuscation, dotfuscator

I have a project to obfuscate. Its having layers separated such as Services,Data,Web,Models etc.. I am using nHibernate ORM also. Also like to know how to handle ajax also during obfustication. I prefer to use dotfuscator. Can any one help me in showing how to do it?

# c# - Serialize object, preserve order of xs:group

> ID：10186471
> 
> 赞同：2
> 
> 时间：2012-04-17T06:48:18.097
> 
> 标签：c#, .net, serialization, xsd, xml-serialization

I want to serialize an object using XmlSerializer and want it to use the order defined in a XSD.

For example I have an XSD with element like this:

```
...
<xs:element name="Screen" minOccurs="1" maxOccurs="1">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="Yaxis" minOccurs="1" maxOccurs="1" type="ab:AxisType"/>
    </xs:sequence>
  </xs:complexType>
</xs:element>
...

<xs:complexType name="AxisType">
  <xs:sequence>
    <xs:group ref="ab:IntervalSegmentGroup" minOccurs="1" maxOccurs="unbounded"/>
    <xs:element name="LastPoint" minOccurs="1" maxOccurs="1" type="ab:PointType" />
  </xs:sequence>
</xs:complexType>

<xs:group name="IntervalSegmentGroup">
  <xs:sequence>
    <xs:element name="Point" minOccurs="1" maxOccurs="1" type="ab:PointType"/>
    <xs:element name="Interpolation" minOccurs="1" maxOccurs="1" type="xs:string"/>
  </xs:sequence>
</xs:group>

<xs:complexType name="PointType">
  <xs:sequence>
    <xs:element name="Relative" type="xs:decimal" minOccurs="1" maxOccurs="1"/>
    <xs:element name="Absolute" type="xs:decimal" minOccurs="1" maxOccurs="1"/>
  </xs:sequence>
</xs:complexType>
... 
```

I have then used XSD.exe to create stub-classes for this. Then I create objects from these claseses and populate them with data. And then I serialize them with an XMLSerializer.

The result I WANT to get is something like this:

```
...
<Yaxis>
  <Point>
    <Relative>0</Relative>
    <Absolute>0</Absolute>
  </Point>
  <Interpolation>linear</Interpolation>
  <Point>
    <Relative>0.456</Relative>
    <Absolute>100</Absolute>
  </Point>
  <Interpolation>linear</Interpolation>
  <Point>
    <Relative>0.645</Relative>
    <Absolute>342</Absolute>
  </Point>
  <Interpolation>linear</Interpolation>
  <LastPoint>
    <Relative>1</Relative>
    <Absolute>3920</Absolute>
  </LastPoint>
</Yaxis>
... 
```

But what i get is:

```
...
<Yaxis>
  <Point>
    <Relative>0</Relative>
    <Absolute>0</Absolute>
  </Point>
  <Point>
    <Relative>0.456</Relative>
    <Absolute>100</Absolute>
  </Point>
  <Point>
    <Relative>0.645</Relative>
    <Absolute>342</Absolute>
  </Point>
  <Interpolation>linear</Interpolation>
  <Interpolation>linear</Interpolation>
  <Interpolation>linear</Interpolation>
  <LastPoint>
    <Relative>1</Relative>
    <Absolute>3920</Absolute>
  </LastPoint>
</Yaxis>
... 
```

When I try to validate the XML against the XSD it will fail, as it doesn't confirm to the order Point, Interpolation, Point...

What am I doing wrong? Can I control this in some kind of way?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:40:21.283

尝试在生成类时为 XSD.exe 指定 Order 参数。

XSD.exe。

/order 在所有粒子成员上生成明确的顺序标识符。

可能这可以解决您的问题。

# java - NullPointerException Query in JSF

> ID：10186481
> 
> 赞同：-1
> 
> 时间：2012-04-17T06:49:24.080
> 
> 标签：java, jsf, jpa, nullpointerexception, entitymanager

i got stuck in JSF login page, please help..

login.jsp

```
<f:view>
    <h:messages style="color: red"
                showDetail="true"/>
    <h:form id="login">
        <h:panelGrid columns="2" border="0">
            Username: <h:inputText id="nip"
                         value="#{peg.nip}"/>
            Password: <h:inputSecret id="passwd"
                           value="#{peg.passwd}"/>
        </h:panelGrid>
        <h:commandButton id="submit" 
                         value="Login"
                         action="#{peg.login}"/>
        <br>
    </h:form>

</f:view> 
```

pegawai.java

```
@Entity
@Table(name = "pegawai")
@NamedQueries({
    @NamedQuery(name = "Pegawai.findAll", query = "SELECT p FROM Pegawai p"),
    @NamedQuery(name = "Pegawai.findById", query = "SELECT p FROM Pegawai p WHERE p.id = :id"),
    @NamedQuery(name = "Pegawai.findByOtoritasId", query = "SELECT p FROM Pegawai p WHERE p.otoritasId = :otoritasId")})
public class Pegawai implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "id")
    private Integer id;
    @Basic(optional = false)
    @Lob
    @Column(name = "nip")
    private String nip;
    @Basic(optional = false)
    @Lob
    @Column(name = "nama_depan")
    private String namaDepan;
    @Lob
    @Column(name = "nama_tengah")
    private String namaTengah;
    @Lob
    @Column(name = "nama_belakang")
    private String namaBelakang;
    @Basic(optional = false)
    @Column(name = "otoritas_id")
    private int otoritasId;
    @Basic(optional = false)
    @Lob
    @Column(name = "passwd")
    private String passwd;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "pegawai")
    private Collection<Assets> assetsCollection;
    @JoinColumn(name = "jabatan_id", referencedColumnName = "id")
    @ManyToOne(optional = false)
    private Jabatan jabatan;
    @JoinColumn(name = "dept_id", referencedColumnName = "id")
    @ManyToOne(optional = false)
    private Department department;

    public Pegawai() {
    }

    public Pegawai(Integer id) {
        this.id = id;
    }

    public Pegawai(Integer id, String nip, String namaDepan, int otoritasId, String passwd) {
        this.id = id;
        this.nip = nip;
        this.namaDepan = namaDepan;
        this.otoritasId = otoritasId;
        this.passwd = passwd;
    }

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getNip() {
        return nip;
    }

    public void setNip(String nip) {
        this.nip = nip;
    }

    public String getNamaDepan() {
        return namaDepan;
    }

    public void setNamaDepan(String namaDepan) {
        this.namaDepan = namaDepan;
    }

    public String getNamaTengah() {
        return namaTengah;
    }

    public void setNamaTengah(String namaTengah) {
        this.namaTengah = namaTengah;
    }

    public String getNamaBelakang() {
        return namaBelakang;
    }

    public void setNamaBelakang(String namaBelakang) {
        this.namaBelakang = namaBelakang;
    }

    public int getOtoritasId() {
        return otoritasId;
    }

    public void setOtoritasId(int otoritasId) {
        this.otoritasId = otoritasId;
    }

    public String getPasswd() {
        return passwd;
    }

    public void setPasswd(String passwd) {
        this.passwd = passwd;
    }

    public Collection<Assets> getAssetsCollection() {
        return assetsCollection;
    }

    public void setAssetsCollection(Collection<Assets> assetsCollection) {
        this.assetsCollection = assetsCollection;
    }

    public Jabatan getJabatan() {
        return jabatan;
    }

    public void setJabatan(Jabatan jabatan) {
        this.jabatan = jabatan;
    }

    public Department getDepartment() {
        return department;
    }

    public void setDepartment(Department department) {
        this.department = department;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Pegawai)) {
            return false;
        }
        Pegawai other = (Pegawai) object;
        if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "Assets.Entities.Pegawai[id=" + id + "]";
    } 
```

pegawaimanager.java

```
public class PegawaiManager{
    private Integer id;
    @PersistenceContext
    private EntityManager em;

    private Department department;
    private String nip;
    private String namaDepan;
    private String namaTengah;
    private String namaBelakang;
    private int otoritasId;
    private String passwd;
    private Jabatan jabatan;
    private Collection<Assets> assetsCollection;

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getNip() {
        return nip;
    }

    public void setNip(String nip) {
        this.nip = nip;
    }

    public String getNamaDepan() {
        return namaDepan;
    }

    public void setNamaDepan(String namaDepan) {
        this.namaDepan = namaDepan;
    }

    public String getNamaTengah() {
        return namaTengah;
    }

    public void setNamaTengah(String namaTengah) {
        this.namaTengah = namaTengah;
    }

    public String getNamaBelakang() {
        return namaBelakang;
    }

    public void setNamaBelakang(String namaBelakang) {
        this.namaBelakang = namaBelakang;
    }

    public int getOtoritasId() {
        return otoritasId;
    }

    public void setOtoritasId(int otoritasId) {
        this.otoritasId = otoritasId;
    }

    public String getPasswd() {
        return passwd;
    }

    public void setPasswd(String passwd) {
        this.passwd = passwd;
    }

    public Collection<Assets> getAssetsCollection() {
        return assetsCollection;
    }

    public void setAssetsCollection(Collection<Assets> assetsCollection) {
        this.assetsCollection = assetsCollection;
    }

    public Jabatan getJabatan() {
        return jabatan;
    }

    public void setJabatan(Jabatan jabatan) {
        this.jabatan = jabatan;
    }

    public Department getDepartment() {
        return department;
    }

    public void setDepartment(Department department) {
        this.department = department;
    }

    public String login()
    {
            Pegawai q = (Pegawai) em.createQuery("SELECT p FROM Pegawai p").getSingleResult();

            //Query q = em.createQuery("select object(p) from Pegawai as p");
            /*if(!q.isEmpty()){
                return "app-main";
            }else{
                return "app-error";
            }*/
            //em.close();
            return "app-main";
    } 
```

and this face-config.xml

```
<navigation-rule>
        <from-view-id>/login.jsp</from-view-id>
        <navigation-case>
            <from-outcome>app-main</from-outcome>
            <to-view-id>/index.jsp</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>app-error</from-outcome>
            <to-view-id>/error.jsp</to-view-id>
        </navigation-case>
    </navigation-rule>
    <managed-bean>
        <managed-bean-name>peg</managed-bean-name>
        <managed-bean-class>Assets.Entities.PegawaiManager</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean> 
```

web.xml

```
<context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>faces/login.jsp</welcome-file>
    </welcome-file-list> 
```

when i hit login button, exception in page

```
javax.faces.el.EvaluationException: java.lang.NullPointerException
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:775)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1267)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:82)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:312)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:859)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:579)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1555)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NullPointerException
    at Assets.Entities.PegawaiManager.login(PegawaiManager.java:114)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:191)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:276)
    at org.apache.jasper.el.JspMethodExpression.invoke(JspMethodExpression.java:68)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88) 
```

please help, why always exception when i did Query method ? i deployed with apache tomcat and mysql, mysql connector has added in library folder

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:18:10.390

错误在`Assets.Entities.PegawaiManager.login(PegawaiManager.java:114)`。

login 方法中唯一的语句是`Pegawai q = (Pegawai) em.createQuery("SELECT p FROM Pegawai p").getSingleResult();`

确保 'em' 不为 NULL。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-17T07:27:27.547

您应该尝试注入`EntityManagerFactory`，然后从中创建一个`EntityManager`.

```
@PersistenceUnit
EntityManagerFactory emf; 
```

然后，从 EntityManagerFactory 实例中获取一个 EntityManager：

```
EntityManager em = emf.createEntityManager(); 
```

# amazon-ec2 - 想要在 AWS 上部署任务

> ID：10186483
> 
> 赞同：0
> 
> 时间：2012-04-17T06:49:44.017
> 
> 标签：amazon-ec2, amazon-web-services

我想在 AWS EC2 上部署我的任务（在 Hive 中实现）。我刚刚阅读了 AWS，我开始知道我们可以在 EC2 上创建自己的环境。

我对 AWS 完全陌生。所以我对此一无所知

如何在那里创造这样的环境？我还读到我们可以导入我们的 VM 映像？但是为此，它需要具有 .ova 扩展名的连接器。如果我下载它，如何安装它？（具有 .ova 扩展名）

所有这些都可以在 AWS 免费实例上实现（创建我们自己的环境以及 VM 导入）

如果您知道这一点，请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T15:08:19.497

要在 Amazon EC2 上设置实例，您可能需要阅读以下指南：[http ://docs.amazonwebservices.com/AWSEC2/latest/GettingStartedGuide/Welcome.html](http://docs.amazonwebservices.com/AWSEC2/latest/GettingStartedGuide/Welcome.html)

关于导入您自己的 VM 映像，您可能需要通过以下链接：[Amazon EC2 VM Import](http://aws.amazon.com/ec2/vmimport/)。它们确实支持导入 VMWare、Hyper V 等映像。在链接中，您将看到 2 个选项如何导入映像：

1.  命令行选项
2.  适用于 VMware vCenter 的 Amazon EC2 虚拟机导入连接器

我个人知道，使用命令行选项可以选择以特定于您的虚拟机软件的格式提供图像文件。[您可以在ec2-import-instance API 参考](http://docs.amazonwebservices.com/AWSEC2/latest/CommandLineReference/ApiReference-cmd-ImportInstance.html)中查看命令行选项的详细信息。

导入图像是免费的，因为进入 AWS 的数据是免费的。但是存储使用图像导入创建的实例有一个变化。每项服务都有某种与之相关的费用，例如按小时收费，直到实例启动为止。因此，无论您是否导入图像，这些费用都适用。请参阅 EC2 定价中的 Amazon EC2[定价](http://aws.amazon.com/ec2/#pricing)

# c# - 我无法在 XAML 文件中写入阿拉伯语文本

> ID：10186484
> 
> 赞同：5
> 
> 时间：2012-04-17T06:49:45.193
> 
> 标签：c#, .net, wpf, visual-studio, visual-studio-2010

```
<TextBlock Text="المبلغ" /> 
```

当我构建项目时，发生了以下错误：

![在此处输入图像描述](../Images/0837744cd786303d0e4e2d8933c361e5.png)

任何帮助....

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-17T07:01:44.220

问题很明显，您的文件编码有问题，如果没有记错 Text 属性中的单词，则有一个阿拉伯语关键字需要 Unicode 编码。通过执行以下操作将文件编码更改为 Unicode：

打开您遇到问题的 XAML 文件，转到“文件”>“另存为”

![在此处输入图像描述](../Images/9b5953b65a19d4740ed464ce097fb57e.png)

单击保存按钮上的小向下箭头以选择编码

![在此处输入图像描述](../Images/9538c2adf0f2d3bdc51bb006f9196136.png)

选择 Unicode 保存并替换您的旧文件。

![在此处输入图像描述](../Images/cf45d13389368898d1114238894bb15d.png)

这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T06:53:31.790

将 XAML 文件编码更改为**"UTF-8"**，您可以使用 Visual Studio 将文件另存为然后更改编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T07:01:46.200

要更改编码试试这个

```
var pi = xmldoc.createProcessingInstruction("xml",
                                " version='1.0' encoding='UTF-8'");
xmldoc.appendChild(pi); 
```

查看下面的链接。 [http://msdn.microsoft.com/en-us/library/aa468560.aspx](http://msdn.microsoft.com/en-us/library/aa468560.aspx)

# android - C2DM 是否需要设备 ID 和注册 ID？

> ID：10186489
> 
> 赞同：0
> 
> 时间：2012-04-17T06:50:13.587
> 
> 标签：android, android-c2dm

我在做 C2DM 时遇到了一些问题，我研究了很多，但我没有找到正确的方法来做。所以我在问一个问题。我的问题是：

1）。注册 ID 和设备 ID 有什么区别？

2）。推送通知是否需要两个 id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:54:20.117

**注册号**

> C2DM 服务器向 Android 应用程序发出的 ID，允许其接收消息。一旦应用程序拥有注册 ID，它就会将其发送到第三方应用程序服务器，第三方应用程序服务器使用它来识别已注册以接收给定应用程序消息的每个设备。换句话说，注册 ID 与运行在特定设备上的特定应用程序相关联。

[您可以在此处](http://code.google.com/android/c2dm/#arch)找到注册 ID 的来源。

**设备 ID**可能是特定设备的唯一标识 ID，如 IMEI/IMSI 号码或类似的东西。

AFAIK，两者都需要让 C2DM 工作。

# sql - 多行到带有标题名称的单行

> ID：10186490
> 
> 赞同：1
> 
> 时间：2012-04-17T06:50:14.037
> 
> 标签：sql, sql-server, database, pivot, pivot-without-aggregate

我的问题就像[这个问题](https://stackoverflow.com/questions/582840/how-can-i-return-multiple-rows-as-a-single-row-in-t-sql)，但我从不同的表中获取数据：

```
Name   ID  Subject-name    obtained-marks
gumman  9   English              3
gumman  9   Islamic-Studies      4
gumman  9   Pak Studies          3 
```

我想要这样的输出：

```
ID   Name   English   Islamic-Studies   Pak-studies
9   gumman   3             4                3 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T06:58:34.517

```
select ID,
       Name,
       [English],
       [Islamic-Studies],
       [Pak Studies]
from YourTable 
pivot
  (
    min([obtained-marks]) for [Subject-name] in ([English],
                                                 [Islamic-Studies],
                                                 [Pak Studies])
  ) as P 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T07:06:20.323

试试这个：

```
Select s.ID, s.Name, 
       MAX(case WHEN s.SubjectName = 'English'         THEN s.ObtainedMarks end) as 'English',
       MAX(case WHEN s.SubjectName = 'Islamic-Studies' THEN s.ObtainedMarks end) as 'Islamic-Studies',
       MAX(case WHEN s.SubjectName = 'Pak Studies'     THEN s.ObtainedMarks end) as 'Pak-studies'
From Students s
GROUP BY s.ID, s.Name 
```

[**演示**](https://data.stackexchange.com/stackoverflow/query/67020)

# actionscript-3 - 与 navigateToURL 发布方法有关的 as3 问题

> ID：10186494
> 
> 赞同：2
> 
> 时间：2012-04-17T06:50:25.143
> 
> 标签：actionscript-3, http-post

我有一个包含 Flash 对象的页面。在特定操作上，页面需要重定向到其他页面并发送一些数据（变量）。我正在结合使用 urlvariables 和 navigateToURL 来执行此操作。页面重定向并发送数据（变量）。

但问题是数据（变量）是在查询字符串中发送的（我的意思是这样的“ [http://dummy.php/?first_name=xyz](http://dummy.php/?first_name=xyz) ”）。我正在使用 post 方法发送数据（变量）。我无法像查询字符串一样发送数据（变量）。

如何解决这个问题？

PS：我已经在下面写了所有代码......

```
var request:URLRequest = new URLRequest("http://dummy.php");
var vars:URLVariables = new URLVariables();
vars.first_name = 'xyz';
request.data = vars;
request.method = URLRequestMethod.POST;
navigateToURL(request, "_blank"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T13:05:30.993

我刚刚做了这个简单的测试，向 Twitter 的搜索 API 发送了一个 POST 请求（它似乎同时接受 GET 和 POST 请求）。正如您在随附的屏幕截图中看到的那样，浏览器的 URL 字段没有显示任何变量，而 Httpfox（您可以使用 Firebug、Chrome 的开发人员工具等）显示 POST 按预期传递的变量。您发布的示例代码是真正给您带来麻烦的代码吗？这是我使用的：

```
 // Create the POST request
var request:URLRequest = new URLRequest("http://search.twitter.com/search.json");
request.method = URLRequestMethod.POST;

// Create the variables object
var vars:URLVariables = new URLVariables();
vars.q = 'love';
vars.rpp = '5';
vars.include_entities = 'true';

// Attach variables to request object
request.data = vars;

// Open new window using the POST request
navigateToURL(request, "_blank"); 
```

![Httpfox 屏幕截图显示 POST 变量按预期传递](../Images/ca6ffdab1afee2feae3111c3fee2cc1f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-08T22:36:33.717

当我执行以下操作时，我发生了这个错误：

```
var vars:URLVariables = new URLVariables();
vars.q = 'http://example.com/var1=7&var2=9'; 
```

获取样式变量显然不会自动进行 URL 编码，并导致 Flash 从设置的 POST 方法恢复为 GET 方法。我使用了 URL 编码和离开时的问题。

```
vars.q = encodeURIComponent('http://example.com/var1=7&var2=9'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T11:29:41.450

您是否遵守施加的各种规则和限制？

> 发送 POST 请求时，contentType 和 data 属性的值必须正确对应。contentType 属性的值指示服务器如何解释数据属性的值。
> 
> 如果 data 属性的值是 URLVariables 对象，则 contentType 的值必须是 application/x-www-form-urlencoded。如果 data 属性的值是任何其他类型，contentType 的值应该指示将要发送的 POST 数据的类型（即 data 属性值中包含的二进制或字符串数​​据）。对于 FileReference.upload()，请求的 Content-Type 自动设置为 multipart/form-data，并且 contentType 属性的值被忽略。
> 
> 在 Flash Player 10 及更高版本中，如果您使用包含上传的多部分 Content-Type（例如“multipart/form-data”）（由 POST 正文中的“content-disposition”标头中的“filename”参数指示)，POST 操作受应用于上传的安全规则的约束：必须执行 POST 操作以响应用户发起的操作，例如鼠标单击或按键。如果 POST 操作是跨域的（POST 目标与发送 POST 请求的 SWF 文件不在同一服务器上），则目标服务器必须提供允许跨域访问的 URL 策略文件。此外，对于任何多部分 Content-Type，语法必须有效（根据 RFC2046 标准）。如果语法似乎无效，

也许某些原因导致它默认返回 GET 请求。

# twitter - 推特搜索 api +paging +max_id +next_page

> ID：10186497
> 
> 赞同：1
> 
> 时间：2012-04-17T06:50:37.970
> 
> 标签：twitter

**twitter搜索api中分页+next_page的目的是什么？**- 他们不会像人们期望的那样以数据为中心。

我正在尝试使用搜索 api，并注意到以下查询随时间而变化。此 url 是从搜索 api“next_page”返回的。

[http://search.twitter.com/search.json?page=3&max_id=192123600919216128&q=IndieFilmLove&rpp=100&include_entities=1](http://search.twitter.com/search.json?page=3&max_id=192123600919216128&q=IndieFilmLove&rpp=100&include_entities=1)

在热门话题上点击刷新，您会注意到页面不是固定的。

当遍历一个热门话题的所有 15 页时，您会在每页的前几项上遇到重复项。

如果您正在聚合数据，分页变量 + next_page 似乎没用。几分钟后，第 1 页将成为热门话题的第 3 页。因此，由于新数据将页面向下推，因此您最终会在每页的 1-3 项上出现重复项。

避免这种情况的唯一方法是**不**使用此处讨论的 next_page 和/或分页参数：

[https://dev.twitter.com/discussions/3809](https://dev.twitter.com/discussions/3809)

> 我将现有结果集中最旧的 id 作为 max_id 传递。我没有通过页面。

***哪种方法更适合聚合数据？***

我可以使用 next_page 但跳过在这 15 页运行中已经处理的状态。

或者

仅使用 max_id 并跳过已处理

===============

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T02:34:18.373

在[http://dev.twitter.com/docs/working-with-timelines](http://dev.twitter.com/docs/working-with-timelines)上的“使用时间线”文档中， Twitter 建议使用 max_id 参数进行游标，而不是尝试逐页浏览时间线。

# asp.net - 下拉列表-selecteditems 错误

> ID：10186499
> 
> 赞同：0
> 
> 时间：2012-04-17T06:50:57.070
> 
> 标签：asp.net

我有 3 个下拉列表和 1 个按钮..，当页面加载时，它会转到最后一个其他部分...如果我选择任何一个下拉列表并单击 btn..即使我在数据库中有数据，它也会显示为空...我想我在选定的项目部分犯了一些错误……你能为此提出一些想法吗……

```
if (employee_name_ddl.SelectedItem.Text != "Select" & employee_paricularpro_ddl.SelectedItem.Text == "Select" & employee_status_ddl.SelectedItem.Text == "All Status")
            {
                ............
            }
            else if (employee_name_ddl.SelectedItem.Text == "Select" & employee_paricularpro_ddl.SelectedItem.Text != "Select" & employee_status_ddl.SelectedItem.Text == "All Status")
            {
                ............................
            }
            else if (employee_name_ddl.SelectedItem.Text == "Select" & employee_paricularpro_ddl.SelectedItem.Text == "Select" & employee_status_ddl.SelectedItem.Text != "All Status")
            {
               ............................
            }
            else if (employee_name_ddl.SelectedItem.Text != "Select" & employee_paricularpro_ddl.SelectedItem.Text != "Select" & employee_status_ddl.SelectedItem.Text == "All Status")
            {
                ...............................
            }
            else if (employee_name_ddl.SelectedItem.Text != "Select" & employee_paricularpro_ddl.SelectedItem.Text == "Select" & employee_status_ddl.SelectedItem.Text != "All Status")
            {
               ........................
            }
            else if (employee_name_ddl.SelectedItem.Text == "Select" & employee_paricularpro_ddl.SelectedItem.Text != "Select" & employee_status_ddl.SelectedItem.Text != "All Status")
            {
               ...................
            }
            else if (employee_name_ddl.SelectedItem.Text != "Select" & employee_paricularpro_ddl.SelectedItem.Text != "Select" & employee_status_ddl.SelectedItem.Text != "All Status")
            {
       .........................
            }
            else
            {
                ....................
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T06:59:03.593

的默认[`ListControl.SelectedItem`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.selecteditem.aspx)值为`null`，因此当未选择任何属性时，您可能会`NullReferenceException`在`Text`某处获得属性。`DropDownList`

您还使用按位比较`&`而不是正确的逻辑`&&`。

下面是一个例子来说明`&`和的区别`&&`：

```
if(employee_name_ddl.SelectedItem != null && employee_name_ddl.SelectedItem.Text == "Select")
{
    // no exception whether or not employee_name_ddl.SelectedItem is null
}

if(employee_name_ddl.SelectedItem != null & employee_name_ddl.SelectedItem.Text == "Select")
{
    // exception when employee_name_ddl.SelectedItem is null,
    // because the second condition will be evaluated anyway
} 
```

[C#中&和&&运算符有什么区别](https://stackoverflow.com/questions/4163483/what-is-a-diffrence-between-and-operator-in-c-sharp)

# android - 相机应用程序不起作用？

> ID：10186503
> 
> 赞同：4
> 
> 时间：2012-04-17T06:51:21.493
> 
> 标签：android, media-player, android-camera

我得到了以下堆栈跟踪

```
04-17 12:11:56.378: D/ATRecorder(10379): com.htc.autotest.dlib.RecordEngine in loader dalvik.system.DexClassLoader@40528b78
04-17 12:11:56.408: D/WindowManagerImpl(10379): addView, new view, mViews[0]: com.android.internal.policy.impl.PhoneWindow$DecorView@40520738
04-17 12:11:56.428: D/WindowManagerImpl(10379): addView, new view, mViews[1]: android.widget.LinearLayout@40525d00
04-17 12:11:56.438: D/WindowManagerImpl(10379): finishRemoveViewLocked, mViews[1]: android.widget.LinearLayout@40525d00
04-17 12:11:56.718: D/TAG(10379): Error setting camera preview: setPreviewDisplay failed
04-17 12:11:56.748: D/TAG(10379): Error starting camera preview: setPreviewDisplay failed
04-17 12:12:07.558: D/View(10379): onTouchEvent: viewFlags: 0x18004001
04-17 12:12:07.568: D/View(10379): onTouchEvent: isFocusable: true, isFocusableInTouchMode: false, isFocused: false; focusTaken: false
04-17 12:12:07.588: V/MediaRecorderJNI(10379): start
04-17 12:12:07.598: V/MediaRecorderJNI(10379): getMediaRecorder E
04-17 12:12:11.632: V/MediaRecorderJNI(10379): process_media_recorder_call
04-17 12:12:11.642: W/IMediaDeathNotifier(10379): media server died
04-17 12:12:11.642: V/MediaRecorderJNI(10379): JNIMediaRecorderListener::notify
04-17 12:12:11.642: V/MediaRecorderJNI(10379): notify msgType 0x1, ext1 0x64
04-17 12:12:11.642: W/Camera(10379): ICamera died
04-17 12:12:11.642: W/Camera(10379): Camera server died!
04-17 12:12:11.702: E/Camera(10379): Error 100 
```

我的代码是

```
public class VideoDemoActivity extends Activity {
/** Called when the activity is first created. */

private Camera mCamera;
private CameraPreview mPreview;
private Button btnCapture,btnStop;

private MediaRecorder mMediaRecorder;
FrameLayout preview;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    initialize();

    if (!checkCameraHardware(this)) {

        Toast.makeText(this, "Camera not found", Toast.LENGTH_SHORT).show();
        finish();

    } else {

        Toast.makeText(this, "Camera found", Toast.LENGTH_SHORT).show();
    }

    mCamera = getCameraInstance();
    mPreview = new CameraPreview(this, mCamera);
    preview.addView(mPreview);

    System.out.println(prepareVideoRecorder());

    btnCapture.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            try {

                mMediaRecorder.start();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }

    });

    btnStop.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            mMediaRecorder.stop();
        }
    });

}

private void initialize() {
    // TODO Auto-generated method stub

    preview = (FrameLayout) findViewById(R.id.camera_preview);
    btnCapture = (Button) findViewById(R.id.button_capture);
    btnStop = (Button) findViewById(R.id.button_stop);
}

public Camera getCameraInstance(){
    Camera c = null;
    try {
        c = Camera.open(); // attempt to get a Camera instance
    }
    catch (Exception e){

        e.printStackTrace();

    }
    return c; // returns null if camera is unavailable
}

private boolean checkCameraHardware(Context context) {
    if (context.getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA)){
        // this device has a camera
        return true;
    } else {
        // no camera on this device
        return false;
    }
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();

     releaseMediaRecorder();       // if you are using MediaRecorder, release it first
     releaseCamera();              // release the camera immediately on pause event

}

private boolean prepareVideoRecorder(){

    mMediaRecorder = new MediaRecorder();

    mCamera.unlock();
    mMediaRecorder.setCamera(mCamera);

    mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.DEFAULT);
    mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
    mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
    mMediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);
    mMediaRecorder.setOutputFile(getOutputMediaFile().toString());

    try 
    {
        mMediaRecorder.prepare();

    } catch (IllegalStateException e) {
        e.printStackTrace();
        releaseMediaRecorder();
        return false;
    } catch (IOException e) {
        e.printStackTrace();
        releaseMediaRecorder();
        return false;
    }
    return true;
}

private void releaseMediaRecorder(){
    if (mMediaRecorder != null) {
        mMediaRecorder.reset();   // clear recorder configuration
        mMediaRecorder.release(); // release the recorder object
        mMediaRecorder = null;
        mCamera.lock();           // lock camera for later use
    }
}

private void releaseCamera(){
    if (mCamera != null){
        mCamera.release();        // release the camera for other applications
        mCamera = null;
    }
}

private static File getOutputMediaFile(){

     File mediaFile = new File(Environment.getExternalStorageDirectory()+"/video.mp4");

    return mediaFile;
} 
```

}

所以请帮我解决这个问题..如果我删除该方法

> 准备录像机（）

然后它会正确预览相机..但是在执行此方法后，它不会显示任何预览..并且失败

> mMediaRecorder.start();

请帮帮我..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-17T08:44:28.963

您必须在创建 MediaRecorder 之前解锁相机。并在释放之前锁定它。

试试这个代码，它会工作玩得开心......

```
package com.marcodinacci.book.acb;

import java.io.IOException;
import android.app.Activity;
import android.content.pm.ActivityInfo;
import android.hardware.Camera;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.view.Surface;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ToggleButton;

public class MediaRecorderRecipe extends Activity implements SurfaceHolder.Callback {

    private final String VIDEO_PATH_NAME = "/mnt/sdcard/VGA_30fps_512vbrate.mp4";

    private MediaRecorder mMediaRecorder;
    private Camera mCamera;
    private SurfaceView mSurfaceView;
    private SurfaceHolder mHolder;
    private View mToggleButton;
    private boolean mInitSuccesful;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.media_recorder_recipe);

        // we shall take the video in landscape orientation
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

        mSurfaceView = (SurfaceView) findViewById(R.id.surfaceView);
        mHolder = mSurfaceView.getHolder();
        mHolder.addCallback(this);
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

        mToggleButton = (ToggleButton) findViewById(R.id.toggleRecordingButton);
        mToggleButton.setOnClickListener(new OnClickListener() {
            @Override
            // toggle video recording
            public void onClick(View v) {
                if (((ToggleButton)v).isChecked()) {
                    mMediaRecorder.start();
                    try {
                        Thread.sleep(10 * 1000);
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                    finish();
                }
                else {
                    mMediaRecorder.stop();
                    mMediaRecorder.reset();
                    try {
                        initRecorder(mHolder.getSurface());
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }
            }
        });     
    }

    /* Init the MediaRecorder, the order the methods are called is vital to
     * its correct functioning */
    private void initRecorder(Surface surface) throws IOException {
        // It is very important to unlock the camera before doing setCamera
        // or it will results in a black preview
        if(mCamera == null) {
            mCamera = Camera.open();
            mCamera.unlock();
        }

        if(mMediaRecorder == null)  mMediaRecorder = new MediaRecorder();
        mMediaRecorder.setPreviewDisplay(surface);
        mMediaRecorder.setCamera(mCamera);

        mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.DEFAULT);
       //       mMediaRecorder.setOutputFormat(8);
        mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
        mMediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264);
        mMediaRecorder.setVideoEncodingBitRate(512 * 1000);
        mMediaRecorder.setVideoFrameRate(30);
        mMediaRecorder.setVideoSize(640, 480);
        mMediaRecorder.setOutputFile(VIDEO_PATH_NAME);

        try {
            mMediaRecorder.prepare();
        } catch (IllegalStateException e) {
            // This is thrown if the previous calls are not called with the 
            // proper order
            e.printStackTrace();
        }

        mInitSuccesful = true;
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        try {
            if(!mInitSuccesful)
                initRecorder(mHolder.getSurface());
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        shutdown();
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {}

    private void shutdown() {
        // Release MediaRecorder and especially the Camera as it's a shared
        // object that can be used by other applications
        mMediaRecorder.reset();
        mMediaRecorder.release();
        mCamera.release();

        // once the objects have been released they can't be reused
        mMediaRecorder = null;
        mCamera = null;
    }

} 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.marcodinacci.book.acb"
      android:versionCode="1"
      android:versionName="1.0">

     <uses-sdk android:minSdkVersion="7" />
     <uses-permission android:name="android.permission.CAMERA"/>
     <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
     <uses-permission android:name="android.permission.RECORD_AUDIO" />
     <uses-feature android:name="android.hardware.camera.autofocus" />

     <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name="MediaRecorderRecipe"
              android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

     </application>
</manifest> 
```

media_recorder_recipe.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <ToggleButton
         android:id="@+id/toggleRecordingButton"
         android:layout_width="fill_parent"
         android:textOff="Start Recording" 
         android:textOn="Stop Recording"
         android:layout_height="wrap_content"/>

    <FrameLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <SurfaceView android:id="@+id/surfaceView" 
            android:layout_width="fill_parent" 
            android:layout_height="fill_parent"></SurfaceView>
    </FrameLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:23:29.203

您是否在清单中授予了权限？

```
<uses-feature android:name="android.hardware.camera" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name = "android.permission.RECORD_AUDIO"/> 
```

# php - 代码点火器中的错误clob（oracle）值，如何解决？

> ID：10186506
> 
> 赞同：2
> 
> 时间：2012-04-17T06:51:48.780
> 
> 标签：php, codeigniter, oracle11g, codeigniter-2

我在我的 oracle 中有数据并从 codeigniter 中检索它

```
$this->db->select('detail');
$r = $this->db->get($tableName);
$result = $r->result(); 
```

打印_r（$结果）：

```
Array
(
    [0] => stdClass Object
        (
            [DETAIL] => OCI-Lob Object
                (
                    [descriptor] => Resource id #80
                )
        )

    [1] => stdClass Object
        (
            [DETAIL] =>
        )

    [2] => stdClass Object
        (
            [DETAIL] => OCI-Lob Object
                (
                    [descriptor] => Resource id #80
                )
        )
) 
```

数据模型：

```
function get_ora_blob_value($value)
{
    $size = $value->size();
    $result = $value->read($size);
    return ($result)?$result:NULL;
} 
```

检索数据：

```
echo $this->data->get_ora_blob_value($result[0][DETAIL]); // should be 'remark1'
echo "<br />";
echo $this->data->get_ora_blob_value($result[1][DETAIL]); // should be null
echo "<br />";
echo $this->data->get_ora_blob_value($result[2][DETAIL]); // should be 'remark2' 
```

打印 ：

```
remark2 
(empty) 
(empty) 
```

为什么第一个数据具有第三个数据的价值？第三个数据变空？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T19:49:30.097

在 codeigniter 中只有两件事需要记住。

如果您知道只有一行数据要返回，那么您必须使用`row_array().`In 您的情况`$result = $r->row_array();`并检索其值，您将使用`$result['column_name'];`.

在多行的情况下，我们使用 result()，在您的情况下`$result = $r->result();`，您必须以这种方式遍历这些多行`foreach $result as $val { $val->column_name; }`，`$val->column_name;`将为您提供值。

# iphone - iPhone App 中的 UIAlertView 动态

> ID：10186507
> 
> 赞同：0
> 
> 时间：2012-04-17T06:51:51.103
> 
> 标签：iphone, uialertview

当从 web 服务加载数据时，我想在其中显示动态 UIAlertView 和 Indicator。我也不想要 UIAlertView 上的任何按钮。数据加载成功后会自动停止。

我该如何实现它。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T06:56:36.860

只需声明 UIAlertView 然后是您的活动指示器，使指示器成为警报视图的子视图，然后当您的数据已从 Web 服务加载时使用此实例方法关闭

```
 – dismissWithClickedButtonIndex:animated: 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T06:57:56.100

然后使用 MBProgress HUD 或 SVprogress HUD

[https://github.com/jdg/MBProgressHUD](https://github.com/jdg/MBProgressHUD)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T07:10:33.280

如果您使用的是 WebView，则在 ViewDidLoad 中编写 startAnimating ActivityIndi​​cator ，当您的数据加载时，此委托方法将自行调用

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
   //[[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];
   [ActivityIndicator stopAnimating];    
} 
```

希望它有所帮助。谢谢:)

# wpf - WinForms 中 WPF UserControl 的键盘问题

> ID：10186509
> 
> 赞同：2
> 
> 时间：2012-04-17T06:52:03.400
> 
> 标签：wpf, winforms, interop

经过漫长而无果的搜索，这是我的问题。我有一个 WPF UserControl，我通过 ElementHost 在 WinForms 表单中显示。开发几乎完成了，但仍然有两个轻微的副作用。

首先，如果我打开 ContextMenu，我希望我可以通过 Cursor-Keys Up/Down 选择项目。但是这个按键似乎不见了。第二个是，如果我明确查询*Keyboard.Modifiers*以确定是否按下了 Ctrl 键，*Keyboard.Modifiers*总是返回“None”。据我在这里阅读，我认为它与键盘或焦点状态有关。我经常在这里阅读作为调用*Integration.ElementHost.EnableModelessKeyboardInterop(window)*的解决方案，但我没有 WPF-Window，我只有一个 WPF-UserControl。

我创建了一个新的简化项目，以将复杂性降至最低。

**XAML**

```
<UserControl x:Class="UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="50" d:DesignWidth="300">
    <TextBlock Text="This is a Demo-Text">
        <TextBlock.ContextMenu>
            <ContextMenu>
                <MenuItem Header="First" Click="MenuItem_Click"></MenuItem>
                <MenuItem Header="Second"></MenuItem>
            </ContextMenu>
        </TextBlock.ContextMenu>
    </TextBlock>
</UserControl> 
```

**背后的代码**

```
Public Class UserControl1 

  Private Sub MenuItem_Click(sender As System.Object, e As System.Windows.RoutedEventArgs)
    If Keyboard.Modifiers = ModifierKeys.None Then
      Debug.WriteLine("Modifiers = None") ' <= I am always here, even if I press Ctrl
    Else
      Debug.WriteLine("Modifiers = Not None")
    End If
  End Sub
End Class 
```

我将此控件放入WinForms-Window 内的*ElementHost 。*如果我在 WinForms-Window（当然我有）内还有其他东西可以捕获焦点，我仍然可以通过右键单击 WPF-Control 打开 ContextMenu，但向上或向下按光标键不会选择任何的两个项目。如果我单击第一项并按住 Ctrl 键，*Keyboard.Modifiers*仍会返回*Modifiers.None*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:57:53.240

有人可以打我的后脑勺吗？我为此寻找了几个小时的解决方案，在发布这个问题后，我找到的答案并不引人注目

**关于上下文菜单：**

```
UserControl1.Focusable = True 
```

**关于 Keyboard.Modifiers：**
我找到了 Visual Basic 的可行替代方案。

```
If My.Computer.Keyboard.CtrlKeyDown Then ... 
```

但我找不到完整框架的通用等价物。如果有人找到替代方案，请留言。

# java - 在 Android 中从服务器获取和发送数据的最佳方法

> ID：10186510
> 
> 赞同：0
> 
> 时间：2012-04-17T06:52:05.027
> 
> 标签：java, android, http

嗨，我是一名 iPhone 开发人员，并且是 android 新手。我想知道在 android 中建立 http 连接并从服务器获取响应的最佳方法，并且（如 iOS 有 connectionDidFinish、connectionDidFail 方法）我想在连接开始和连接完成时显示一个加载器然后我关闭装载机。怎么做。

我阅读了有关 HttpConnection、HttpURLConnection、DefaultHttpClient 的信息，但我太混淆了哪种方法是最好的方法以及如何使用它们，还有一件事连接就像异步连接。

还有一件事我想建立两个或更多的联系，这样我也必须区分它们，所以也建议我这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:58:20.710

要显示和关闭加载程序（即 ProgressBar 或 ProgressDialog），请实现[**AsyncTask**](http://developer.android.com/reference/android/os/AsyncTask.html) ，它在 Android中被称为[Painless Threading 。](http://developer.android.com/resources/articles/painless-threading.html)

# java - 在 Eclipse 文本编辑器中创建工具栏

> ID：10186515
> 
> 赞同：1
> 
> 时间：2012-04-17T06:52:35.123
> 
> 标签：java, eclipse, eclipse-plugin

我有一个 Eclipse 插件，其中**我需要文本编辑器中的工具栏，就像切换面包屑视图一样**。Eclipse 中是否有任何通用实用程序类允许我这样做？

```
@Override
protected ISourceViewer createSourceViewer(Composite parent,
                                           IVerticalRuler ruler, 
                                           int styles)
{
    composite = new Composite(parent, SWT.NONE);
    GridLayout gridLayout = new GridLayout(1, true);
    gridLayout.numColumns = 1;
    gridLayout.marginHeight = 0;
    gridLayout.marginWidth = 0;
    composite.setLayout(gridLayout);

    ToolBar toolBar = new ToolBar(composite, SWT.FLAT);
    GridData gridData = new GridData(GridData.FILL, SWT.TOP, true, false);
    toolBar.setLayoutData(gridData);
    toolBarManager = new ToolBarManager(toolBar);

    return super.createSourceViewer(composite, ruler, styles);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:52:42.283

假设您有一个基于`org.eclipse.ui.editors.text.TextEditor`该类的文本编辑器，那么您必须覆盖`AbstractDecoratedTextEditor.createSourceViewer(Composite parent, ...)`. 基本上

*   使用. _ `Composite`_ （这是需要的，因为参数中有 a ）。`parent``GridLayout(1, false)``Composite``parent``FillLayout`
*   创建一个`ToolBarManager`并执行 'mng.createControl(top)' `GridData(FILL, TOP, true, false)`。
*   `Composite`在 with 之上创建新的孩子`GridData(FILL, FILL, true, true)`。
*   调用`super.createSourceViewer(child, ...)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-18T07:25:23.990

托尼的回答很好，但有时
`super.createSourceViewer(composite, ruler, styles);`
会改变父母的布局，就像RTA在托尼的回答中评论的那样，真正的编辑器区域会丢失。
当我想做与 RTA 完全相同的事情时，我遇到了这个问题。
这是我的解决方案：

```
@Override
protected ISourceViewer createSourceViewer(Composite parent,
        IVerticalRuler ruler, int styles) {
    changeParentLayout(parent);
    Label label = createPathLabel(parent);
    ISourceViewer viewer = super.createSourceViewer(parent, ruler, styles);
    updateSourceViewerLayout(parent, label);
    return viewer;
}

//change the parent layout to grid layout,
//so that the source file area can be shown
protected void changeParentLayout(Composite parent) {
    parent.setLayout(new GridLayout(1, false));
}

//i need a label here, ToolBar will be the same
protected Label createPathLabel(Composite parent) {
    Label lblNewLabel = new Label(parent, SWT.NONE);
    lblNewLabel.setLayoutData(new GridData(SWT.LEFT, SWT.TOP, true, false, 1, 1));
    lblNewLabel.setText(getFilePath());
    return lblNewLabel;
}

//after adding the label i need and call super.createSourceViewer()
//now all widgets are ready, we need to change the editor area's layout data to grid data
//here if you only have two widgets: label and area, you can directly choose the edit area widget. i used a loop to find all sub widgets
protected void updateSourceViewerLayout(Composite parent, Label label) {
    Control[] children = parent.getChildren();
    if (children.length < 2) return;
    for (Control child : children) {
        if (child != label) {
            child.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true, 1, 1));
        }
    }
}

private String getFilePath() {
    //get the path I want
    return "";
} 
```

# ruby - 在 Ruby Mechanize 中向表单添加按钮

> ID：10186516
> 
> 赞同：0
> 
> 时间：2012-04-17T06:52:37.757
> 
> 标签：ruby, screen-scraping, mechanize

我有一个结构很差的 HTML，我必须用 mechnize 解析。元素外部有一个提交按钮`<form>`，我想将此按钮添加到我的表单中。我已经看到了 mechanize 允许您使用 form.add_field 向表单添加新字段的文档！“名称”、“价值”

按钮有这样的东西吗？

提前致谢

# windows-8 - Windows 8 操作磁贴

> ID：10186518
> 
> 赞同：-1
> 
> 时间：2012-04-17T06:53:01.183
> 
> 标签：windows-8, microsoft-metro, windows-runtime

我可以从 C++ 应用程序（通过 WinAPI/WinRT、注册或其他方式）操作图块吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:44:05.103

你的问题非常不具体。查看这些示例[1](http://code.msdn.microsoft.com/windowsapps/App-tiles-and-badges-sample-5fc49148)和[2](http://code.msdn.microsoft.com/windowsapps/Secondary-Tiles-Sample-edf2a178)以开始使用 Tiles 和 C++。如果您有更具体/详细的问题，请随时提出。

编辑：（方法名称和命名空间来自 c#，但在 c++ 中应该是 ~equal）

*   主图块只能由用户删除。
*   您可以通过非 MetroApp 访问有限的 WinRT 功能。但据我所知，没有办法在“受限”WinRT 中删除外来磁贴。
*   如果要删除必须使用的辅助图块`Windows.UI.StartScreen.SecondaryTile.FindAllAsync("id of the app tiles belong to");`，然后`tile.RequestDeleteAsync()`在要删除的结果中调用每个图块。请注意，每个删除请求都必须由用户接受。如前所述`Windows.UI.StartScreen`，命名空间仅适用于 Metro 应用程序。

# ruby-on-rails-3 - Rails .js.erb 文件中的完整资源 URL

> ID：10186523
> 
> 赞同：6
> 
> 时间：2012-04-17T06:53:45.887
> 
> 标签：ruby-on-rails-3, asset-pipeline, sprockets

我有一个可以在任何网站上加载的书签。

它是这样工作的；

*   负载`http://my.example.com/assets/bookmarklet.js`
*   包括`http://my.example.com/assets/bookmarklet.css`

css 文件是通过添加到 dom 中的`bookmarklet.js`，所以它需要知道它在哪里。

我的代码如下；

```
// assets/javascripts/bookmarklet.js.erb

var config = {
  stylesheetUrl: '<%= asset_path("bookmarklet.css", :only_path => false) %>'
} 
```

但无论我尝试什么，这都会呈现为

```
var config = {
  stylesheetUrl: '/assets/bookmarklet.css'
} 
```

我需要`asset_path`返回一个完整的网址。但`asset_url`不存在，而且我找不到`asset_path`将当前域添加到前面的选项。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T07:48:04.080

您需要为每个环境设置一个显式资产主机。例如：

```
# development.rb
config.action_controller.asset_host = "http://localhost:3000" 
```

# groovy - 如何设置用户代理：new XmlSlurper().parse(URL)

> ID：10186524
> 
> 赞同：2
> 
> 时间：2012-04-17T06:53:57.850
> 
> 标签：groovy, user-agent, xmlslurper

我正在使用[Groovy/XmlSlurper](http://groovy.codehaus.org/Reading+XML+using+Groovy%27s+XmlSlurper)向 Web 服务发起请求：

```
new XmlSlurper().parse("http://en.wikipedia.org/w/api.php?action=...") 
```

我想设置用户代理让网站知道请求来自哪个项目。

如何设置用户代理？

*   [XMLSlurper 的构造函数](http://groovy.codehaus.org/api/groovy/util/XmlSlurper.html#constructor_summary)没有这样的东西。
*   setProperty[方法](http://groovy.codehaus.org/api/groovy/util/XmlSlurper.html#setProperty%28java.lang.String,%20java.lang.Object%29)听起来很有趣，但 Google 并没有引出任何与 UA 相关的内容。
*   我宁愿避免更改代码以放弃 XmlSlurper 以支持另一个库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T08:12:12.340

看起来像`Groovy`使用 JVM 的默认 SAX 解析器连接到输入流并执行初始解析。我在 SO 上看到了这个[答案](https://stackoverflow.com/a/2529903/357360)，这可能会有所帮助 - 您需要做的就是在调用 slurper 之前设置它以实现它：

```
System.setProperty("http.agent", "my-agent-name"); 
```

PS这只是一个猜测-希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:15:14.613

我看到第 3 页，顺便说一句，还有 Groovy Http Builder，它使用 JsonSlurper 来处理 JSON 结果，但发出 http 请求要灵活得多 - [http://groovy.codehaus.org/HTTP+Builder](http://groovy.codehaus.org/HTTP+Builder)

# svn - 迁移后在 SVN 中恢复用户

> ID：10186527
> 
> 赞同：1
> 
> 时间：2012-04-17T06:54:04.880
> 
> 标签：svn, data-migration, svn-repository

恢复转储文件后如何恢复用户帐户，以便存储库开始使用以前的用户帐户和访问规则运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:38:22.060

根据[*Subversion 的版本控制*](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.maint.html#svn.reposadmin.maint.migrate)：

> Subversion 存储库转储格式仅描述版本化存储库更改。它不会携带有关未提交事务、文件系统路径上的用户锁定、存储库或服务器配置自定义（包括挂钩脚本）等的任何信息。

但是，如果您仍然可以访问旧存储库，您可以尝试将`conf`子目录的内容复制到新存储库（前提是您使用的是 vanilla svn 身份验证，而不是 HTTP/DAV）。

# ios - 如何链接到标签栏控制器中的特定标签

> ID：10186534
> 
> 赞同：0
> 
> 时间：2012-04-17T06:54:34.103
> 
> 标签：ios, uiviewcontroller, uitabbarcontroller, uitabbar

我有一个菜单屏幕 - 一个 UIViewController，它有一些导航 UITabBar 的按钮。目前，当我加载 UITabBar 时，它总是转到第一个选项卡，但是，我希望 UIViewController 上的每个按钮加载相应的选项卡在 UITabBar 但似乎无法弄清楚..

我已经搜索了近乎无济于事 - 任何帮助/方向将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T06:59:42.020

使用 UITabBar 的 setSelectedIndex 属性，

并花一些时间阅读文档 - [http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBar_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBar_Class/Reference/Reference.html)

它会帮助你。

# php - 如何创建友好的 URL

> ID：10186536
> 
> 赞同：0
> 
> 时间：2012-04-17T06:54:41.120
> 
> 标签：php, .htaccess, url, mod-rewrite, joomla

请按照此 URL（示例）[http://www.test.com/test/vehicle?chrysler=crysler300](http://www.test.com/test/vehicle?chrysler=crysler300) 我想像这样更改此 URL [http://www.test.com/test/vehicle/chrysler/crysler300](http://www.test.com/test/vehicle/chrysler/crysler300)。我尝试使用`.htaccess`文件来做到这一点，但它不起作用。

这是我使用的代码

```
RewriteRule vehicle/chrysler/(.*) vehicle?chrysler=$1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-17T07:00:11.227

您的重写基础是`test`. 所以写这样的东西

```
RewriteEngine On
RewriteBase /test/
RewriteRule ^vehicle/chrysler/(.*) vehicle?chrysler=$1 
```

还要确保将`.htaccess`文件放在文档根目录中。如果将其放在`test`目录中，请省略该`RewriteBase`指令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T07:00:14.267

利用：

```
RewriteRule ^/test/vehicle/chrysler/(.*) http://www.test.com/test/vehicle?chrysler=$1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T07:04:25.823

尝试使用这样的东西：

```
RewriteRule ^vehicle/chrysler/?$ vehicle?chrysler=$1 [L,NC] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T07:23:35.517

这应该有效：

`RewriteRule ^test/vehicle/chrysler/(.*) test/vehicle?chrysler=$1`

在这个网站上检查它：[http ://martinmelin.se/rewrite-rule-tester/](http://martinmelin.se/rewrite-rule-tester/)

# iphone - 如何对 MPMoviePlayerController 进行简单的控制

> ID：10186539
> 
> 赞同：0
> 
> 时间：2012-04-17T06:54:43.303
> 
> 标签：iphone, ios, overlay, mpmovieplayercontroller

我正在使用 MPMoviePlayerController 制作应用程序。此捕获是我的参考应用程序的图片。我想制作像红色盒装的部分。- 只有完成按钮和进度条。我怎样才能做到这样？

我可以解决我在 MPMoviePlayerController 中添加一些选项还是添加覆盖视图包含一些控件？

我找不到好方法。请帮忙！~谢谢！

![媒体](../Images/f20696ee9eb19343ca1e1761eedcb9ce.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T10:47:36.267

您必须创建自己的控件，然后将它们添加到覆盖视图...

# java - Hibernate：如何刷新子实体

> ID：10186541
> 
> 赞同：4
> 
> 时间：2012-04-17T06:54:47.367
> 
> 标签：java, hibernate

我有一个“登录”域对象：

```
public class Login extends AuditEntity {

private static final long serialVersionUID = -309839789761736747L;

private String userName;
private String password;
private Timestamp lastLogin;
private Set customers = new HashSet(0);
private Set addresses = new HashSet(0);

public Set getCustomers() {
    return this.customers;
}

public void setCustomers(Set customers) {
    this.customers = customers;
}

public Set getAddresses() {
    return this.addresses;
}

public void setAddresses(Set addresses) {
    this.addresses = addresses;
}
   //Other setter, getters 
```

这是休眠映射文件的片段：

```
 <set name="customers" fetch="select" lazy="false">
        <key>
            <column name="LoginID" />
        </key>
        <one-to-many class="com.domain.Customer" />
    </set>
    <set name="addresses" fetch="join" lazy="false">
        <key>
            <column name="LoginID" />
        </key>
        <one-to-many class="com.domain.Address" />
    </set> 
```

登录引用的 Address.hbm.xml 映射如下所示：

```
 <many-to-one name="login" class="com.domain.Login"
        fetch="join" lazy="false">
        <column name="LoginID" />
    </many-to-one> 
```

这是我的春季测试：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "/applicationContext.xml" })
public class LoginDaoTest {

@Autowired
private BaseDao<Login, Integer> loginDao;

@Autowired
private BaseDao<Address, Integer> addressDao;

@Test
public void testLoginDao() {
    Login login = loginDao.load(1);
    Set<Address> addresses = login.getAddresses();

    System.out.println("size Before save..." + addresses.size());

    Address address = new Address();
    address.setCity("Kew gardens");
    address.setCreatedBy("user");
    address.setCreatedDate(new Timestamp(Calendar.getInstance().getTime().getTime()));
    address.setHouseNumber("1-2-3");
    address.setLogin(login);
    address.setLocality("Queens blvd");
    address.setState("NY");
    address.setStreetName("Some Street");
    address.setZipCode("11415");

    addressDao.save(address);

    System.out.println("size After save..." + addresses.size());

} 
```

}

这是输出：

```
size Before save...14
size After save...14 
```

**问题/问题**我希望在添加新地址后看到登录对象中设置的地址增加一个，因为我没有延迟加载。为什么我的集合的大小没有增长？是因为我在同一个事务中运行查询吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T07:02:23.513

您负责维护对象的内存状态。Hibernate 不会自动将该地址粘贴到您的列表中。要编写严格正确的代码，您应该在创建它时将新地址添加到列表中，以便您的内存状态与您打算保留的状态相匹配。

然后，您可以使用 Transitive Persistence 创建新地址，根本不需要在地址上调用“保存”。

从概念上讲，它与您所期望的相反。该框架的目的不是神奇地将数据库“绑定”到您的对象上。这是为了让您以与没有数据库时相同的方式使用普通对象（例如，将事物放入它们所在的列表中），并让您的对象状态的持久化神奇地发生。

# c# - 在 Asp.Net 中将某些页面功能或用户界面限制为经过身份验证的用户

> ID：10186549
> 
> 赞同：4
> 
> 时间：2012-04-17T06:55:16.670
> 
> 标签：c#, asp.net, forms-authentication

我正在使用`Asp.Net/C#`构建应用程序。我正在使用`Forms Authentication`。我有一个要求，以至于我的许多人`authenticated (not anonymous) users`都仅限于某些页面功能或用户界面。我想`Login Control`只能用于用户。`Authenticated vs Anonymous`所以我的问题是当我知道某些页面组件要对特定的经过身份验证的用户隐藏，我该怎么做。你认为我需要在 page_load 事件上使用它来隐藏具有此类要求的页面的组件吗？

```
// Is this Tito visiting the page?
string userName = User.Identity.Name;
if (string.Compare(userName, "Tito", true) == 0)
 // This is Tito, SHOW the Delete column
 FilesGrid.Columns[1].Visible = true;
else
 // This is NOT Tito, HIDE the Delete column
 FilesGrid.Columns[1].Visible = false; 
```

有没有更好的方法来实现这一点。非常感谢任何帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:07:22.923

在这里，您可以使用 Membeship User 类和[RolePrincipal](http://msdn.microsoft.com/en-us/library/system.web.security.roleprincipal.aspx)来分隔用户。

```
if(HttpContext.Current.User.IsInRole("Level1"))
{
    FilesGrid.Columns[1].Visible = true;
}
else
{
    FilesGrid.Columns[1].Visible = false;
} 
```

因此，您为用户创建和放置不同的成员名称，然后向他们展示取决于成员角色的不同控件。

一些链接：

[http://msdn.microsoft.com/en-us/library/ff648345.aspx](http://msdn.microsoft.com/en-us/library/ff648345.aspx)

[http://msdn.microsoft.com/en-us/library/system.web.security.roleprincipal.isinrole.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.roleprincipal.isinrole.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T07:40:19.737

您还需要知道，当您只是隐藏一个控件时，它的 base64 编码值仍然存在于视图状态中。客户端能够读取它。

客户端还可以读取哪个隐藏控件触发了一个动作。没有什么能阻止“智能”客户端触发此操作。

所以 ：

*   如果您不想显示受限访问值，则不应将其绑定到控件（在不可见的控件上不会调用 prerender。因此，在 prerender 中进行绑定是一个好习惯）
*   您应该始终在事件处理程序中添加另一个访问控制检查，以查看调用是否被授权

# c# - 如何访问在 ASP.NET C# 中的普通视图（aspx 页面）中使用的 ViewPartial（ascx 页面）中定义的变量

> ID：10186550
> 
> 赞同：1
> 
> 时间：2012-04-17T06:55:19.183
> 
> 标签：c#, asp.net, asp.net-mvc-3

我在名为 (Partial1.ascx) 的局部视图中定义了一些变量

```
 string value1 = "value1";
  string value2 = "value2";
  int id = 7; 
```

现在在 ASPX 页面视图中，我想使用上面的值。在我的正常视图（aspx 页面）中，我有这样的：

```
 <%Html.RenderPartial("Partial1.ascx");%>

  <%=value1 %> becomes <%=value2 %> with his id which is <%=id %> 
```

但是编译器会抛出`value1`,`value2`和`id`未定义的错误。

如何使用这些变量？

我是否需要定义一个模型（新模型）并在`RenderPartial`函数 ->中作为参数传递`<%Html.RenderPartial("Partial1.ascx", NewModel);%>`？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:18:43.563

您必须`NewModel`在视图中定义这样的代码块：

```
<% var newModel = new NewModel(); %> 
```

在您的局部视图中，您在代码块中分配属性，如下所示：

```
<%
  Model.Id = 2;
  Model.Test = "newString";
%> 
```

然后您可以像这样访问原始视图页面上的属性：

```
<p><%=newModel.Test %></p>
<p><%=newModel.Id %></p> 
```

# jquery - 从 Flash AS2 在 Lightbox/Fancy Box 等中打开 PDF

> ID：10186557
> 
> 赞同：0
> 
> 时间：2012-04-17T06:55:37.693
> 
> 标签：jquery, flash, fancybox, actionscript-2, lightbox

我一直在寻找这个，我只是没有运气正确地实现这个。我怎样才能在灯箱之类的东西（即fancybox等）中打开pdf文件？我也会从 Flash AS2 链接这个

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:40:08.537

虽然可以在某些浏览器中执行您所要求的操作，但您不会在所有浏览器中获得一致的结果。还有可能安装或未安装 PDF 阅读器插件的问题。

例如：Chrome（没有浏览器插件）可以在 iframe 中打开 pdf，而 Internet Explorer（没有插件）会打开 iframe，但它会使用任何与 .pdf 关联的程序来打开文件。iframe 将保持空白。正如我所说，一旦考虑到插件，所有这些都会发生巨大变化。

我的建议是将 pdf 文件视​​为一个简单的可下载文件，并让用户自行决定如何查看它。

# sql - 在 WHERE 条件下加倍

> ID：10186558
> 
> 赞同：2
> 
> 时间：2012-04-17T06:55:43.113
> 
> 标签：sql, sql-server, sql-server-2008

`@Age`是否有可能在 where 语句参数中做类似这里发生的事情？

```
 @AGE Varchar(8)

 SELECT NAME FROM TABLE WHERE 
 (
 If @AGE='man'
  then (AGE = 'man' or AGE = 'boy')
  else (AGE = 'man')
 )
 AND City IS NULL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T07:07:27.057

是的，像这样：

```
SELECT NAME FROM TABLE WHERE 
((@AGE='man'
   AND (AGE = 'man' or AGE = 'boy'))
OR
(@AGE <> 'man'
  AND (AGE = 'man')))
AND City IS NULL 
```

请注意，`@AGE <> 'man'`可能需要根据 @AGE 变量是否可以为空来调整条件。

[我在这里](https://stackoverflow.com/questions/87821/sql-if-clause-within-where-clause/87992#87992)回答了一个非常相似的问题。

> 这是 WHERE 子句中非常常见的技术。如果您想在 WHERE 子句中应用一些“IF”逻辑，您需要做的就是将带有布尔 AND 的额外条件添加到需要应用它的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T06:57:16.867

一种方法是使用`EXEC`并构建字符串命令`If's`。

像这样的东西：

```
declare @t nvarchar(max)
@AGE Varchar(8)
set @t=' SELECT NAME FROM TABLE WHERE '

 If @AGE='man' set @t=@t+'(AGE = ''man'' or AGE = ''boy'')'
  else  set @t=@t+'(AGE = 'man')'

set @t=@t+' AND City IS NULL' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T07:45:48.380

以合取范式（“一系列与”，较少依赖于参数）：

```
SELECT * 
  FROM TABLE
 WHERE ( @AGE <> 'man' OR (AGE IN ('man', 'boy') ) )
       AND ( @AGE = 'man' OR AGE = 'man' )
       AND CITY IS NULL; 
```

这里的想法是使用隐含重写规则：

```
( IF x THEN y )  is equivalent to  ( NOT ( x ) OR y ) 
```

* * *

下面是一些测试代码：

```
WITH T 
     AS
     (
      SELECT * 
        FROM (
              VALUES (1, 'man', NULL), 
                     (2, 'boy', NULL), 
                     (3, 'girl', NULL)
             ) AS T (NAME, AGE, CITY)
     ),
     Params
     AS
     (
      SELECT * 
        FROM (
              VALUES ('man'), 
                     ('boy'), 
                     ('girl')
             ) AS T (p_AGE)
     ), 
     Results
     AS
     (
      SELECT Params.*, T.*, 
             CASE WHEN     ( ( p_AGE <> 'man' OR (AGE IN ('man', 'boy') ) ) AND ( p_AGE = 'man' OR AGE = 'man' ) )  THEN 'TRUE'
                  WHEN NOT ( ( p_AGE <> 'man' OR (AGE IN ('man', 'boy') ) ) AND ( p_AGE = 'man' OR AGE = 'man' ) )  THEN 'FALSE'
                  ELSE 'UNKNOWN' 
             END AS result_onedaywhen, 
             CASE WHEN     ( AGE='man' OR (p_AGE='MAN' and AGE='boy') )  THEN 'TRUE'
                  WHEN NOT ( AGE='man' OR (p_AGE='MAN' and AGE='boy') )  THEN 'FALSE'
                  ELSE 'UNKNOWN' 
             END AS result_Damien_The_Unbeliever
        FROM T, Params
     )
SELECT * 
  FROM Results; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T07:26:26.810

或者你可以使用[解码功能](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions040.htm)

# php - Yii 模型：在 Yii 模型中使用动态表名

> ID：10186563
> 
> 赞同：1
> 
> 时间：2012-04-17T06:56:08.683
> 
> 标签：php, yii, yii-cmodel

我有一个 Yii 模型，它将使用（稍后）多个数据库，并且表前缀将基于代码。

例如：

AMI_tablename、BMI_AMI_tablename 等

这些所有表都是相同的，但在不同的数据库中。

我想知道如何在运行时向 Yii 模型提供动态表名？

我尝试使用 setter 函数，但父类 CActiveRecord 给出了错误，因为它没有从子模型类中获取值。

所以这是我的模型代码（只有我有问题的部分）

```
class RevShareModel extends CActiveRecord
{

    public $prefix;

    public static function model($className=__CLASS__)
    {
        return parent::model($className);
    }

    /**
     * @return string the associated database table name
     */
    public function tableName()
    {
        return $this->prefix . '_revshare_model';
    } 
```

现在在我的控制器的某个地方

```
$obj = RevShareModel::model();
$obj->prefix ="BMI";
$obj->tableName();
$obj->findByPk(1);

exit; 
```

但我得到的错误是：

```
CDbException

The table "_revshare_model" for active record class "RevShareModel" cannot be found in the database.

C:\wamp\www\framework\db\ar\CActiveRecord.php(2264) 
```

似乎当 CActiveRecord 调用 tableName() 方法时它没有得到 $prefix。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-13T21:28:06.760

你有这样的错误，因为表名实际上存储在模型的元数据中。您可以通过检查`$model->getMetaData()`which 返回`CActiveRecordMetaData`对象的内容来看到这一点。要刷新元数据，您应该`$model->refreshMetaData()`在更改模型的“前缀”属性后调用，例如：

```
...
$obj->prefix ="BMI";
$obj->refreshMetadata();
... 
```

这肯定会成功。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T06:59:10.753

您必须重写该[`CActiveRecord::tableName`](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#tableName-detail)方法（可能在模型的抽象基类中）。以下是它默认执行的操作：

```
public function tableName()
{
    return get_class($this);
} 
```

您可以将其更改为：

```
abstract class MyActiveRecord extends CActiveRecord
{
    public $prefix; // should probably be private, your call

    public function tableName()
    {
        return $prefix.'_'.get_class($this);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T19:38:30.503

这就是我解决这个问题的方法。

```
private static $_tableName;

public function __construct($tableName)
{
    if(strlen($tableName) == 0)
    {
        return false;
    }

    if(strlen($tableName)>0){
        self::$_tableName = $tableName;
    }

    self::setIsNewRecord(true);
}

public static function model($tableName)
{
    if(strlen($tableName) == 0)
    {
        return false;
    }

    $className=__CLASS__;

    if(strlen($tableName)>0){
        self::$_tableName = $tableName;
    }

    return parent::model($className);
}

public function tableName()
{
    return '{{'.self::$_tableName.'}}';
}

public function setTableName($tableName)
{
    self::$_tableName = $tableName;
}

... 
```

当我使用这个模型时，我只是将表格的名称放在括号中：

```
$model = new ClassName($tableName); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-17T09:13:04.327

我有同样的问题。我有一个模型，但我希望将数据保存在不同的表中。所以我在保存数据之前更改了表名。

```
public $tbl_name = 'tbl_user_1';//default table
public function tableName()
{
return $this->tbl_name;
}
public function saveDataReg(){
    $mKey = $this->selfMHash($this->username);
    $modKey = $mKey % 2;
    $this->tbl_name = 'tbl_user_' . $modKey;

    $this->refreshMetadata();//change the default Metadata

    $this->save();
}
public function selfMHash($key){
    $md5 = substr(md5($key), 0, 8);
    $seed = 31;
    $hash = 0;

    for($i=0; $i<8; $i++){
        $hash = $hash * $seed + ord($md5{$i});
        $i++;
    }

    return $hash & 0x7FFFFFFF;
} 
```

现在我发现使用 refreshMetadata 功能时元数据没有改变。最后我更改了原始代码

```
 public function refreshMetaData()
{
    $finder=self::model(get_class($this));
    $finder->_md=new CActiveRecordMetaData($finder);
    if($this!==$finder)
        $this->_md=$finder->_md;

    //return var_dump($this);
}

public function new_refreshMetaData()
{
    $finder=self::model(get_class($this));
    $finder->_md=new CActiveRecordMetaData($this);
    if($this!==$finder)
        $this->_md=$finder->_md;

    //return var_dump($this);
} 
```

我重写了refreshMetaData 的函数并更改了CActiveRecordMetaData 的参数。

```
$this->new_refreshMetadata();//use new function 
```

然后它起作用了。我不明白问题的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-14T08:28:25.753

您可以使用 with `MyModel::model()->tableName()`，但请不要忘记 write `{{table}}`。

# c# - 如何使用 C# 创建带有粗体标题行的 csv 文件

> ID：10186564
> 
> 赞同：2
> 
> 时间：2012-04-17T06:56:09.353
> 
> 标签：c#

我想创建一个带有粗体标题文本的 csv 文件。以下代码正在创建一个标题行。但我希望这个标题为粗体样式。

```
 'Add Response header 

    Response.Clear()
    Response.AddHeader("content-disposition", String.Format("attachment;filename={0}.csv", "check_"))
    Response.Charset = ""
    Response.ContentType = "application/vnd.csv"

    Try
        Dim sb As New StringBuilder()
        'Add Header  dr.GetName(count)     

        For count As Integer = 0 To GridView1.Columns.Count - 1
            If GridView1.Columns(count) IsNot Nothing Then
                sb.Append(GridView1.Columns(count).HeaderText)
            End If
            If count < GridView1.Columns.count - 1 Then
                sb.Append(",")
            End If
        Next
        Response.Write(sb.ToString() + vbLf)
        Response.Flush()

    Catch ex As Exception
        Response.Write(ex.Message)
    End Try
    Response.[End]() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T06:57:17.960

CSV 是由逗号 (,) 分隔的纯文本

它没有附加任何样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T07:27:25.940

正如其他人已经提到的，CSV 只是没有格式的文本。

由于我假设您想要 excel 中的粗体标题并且您正在将 ASP.NET 导出`GridView`到 CSV 文件，因此还有其他两个选项：

1.  `GridView`将带有粗体标题的 HTML（HTML 表）呈现到文件中，excel 将正确解释它
2.  创建一个真正的 excel 文件，我可以热情地推荐[EPPlus](http://epplus.codeplex.com/releases/view/42439)，[这](https://stackoverflow.com/a/9574414/284240)是一个示例。

第一种方法的示例：

```
string attachment = "attachment; filename=Contacts.xls";
Response.ClearContent();
Response.AddHeader("content-disposition", attachment);
Response.ContentType = "application/ms-excel";
StringWriter sw = new StringWriter();
HtmlTextWriter htw = new HtmlTextWriter(sw);
GridView1.RenderControl(htw);
Response.Write(sw.ToString());
Response.End(); 
```

如果按上述方式运行代码，将产生`HttpException`如下结果：

> 'GridView' 类型的控件 'GridView1' 必须放置在带有 runat=server 的表单标记内。”

为避免此错误，请添加以下代码：

```
public override void VerifyRenderingInServerForm(Control control)
{
    // yes, it's correct that this is empty
} 
```

# node.js - node.js REPL“未定义”

> ID：10186565
> 
> 赞同：18
> 
> 时间：2012-04-17T06:56:23.840
> 
> 标签：node.js

从节点 0.4.11 升级到 0.6.15，并注意到 REPL（不带参数的运行节点）在大多数命令或回车返回后不断转储“未定义”......

这让我分心，让我发疯，你如何禁用它？

```
> 
undefined
> 
undefined
> 
undefined
> 
undefined
> var x = 2
undefined
> x
2
> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-10-25T17:10:49.270

另一种在没有未定义的命令返回的情况下调用节点的方法是：

```
node -e "require('repl').start({ignoreUndefined: true})" 
```

从命令行

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-17T08:54:56.523

请参阅 Node.js [REPL](http://nodejs.org/api/repl.html)文档页面。

具体来说：

> 如果`ignoreUndefined`设置为true，那么repl不会输出command的返回值，如果它是`undefined`。默认为`false`.

示例代码：

```
var net = require("net"),
    repl = require("repl");

repl.start(null, null, null, null, true); 
```

样本输出：

```
> var x
> var blah 
```

此外，您可以别名`node`为

```
node -e "require('repl').start(null, null, null, null, true)" 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-09-22T13:55:32.583

```
# node -i -e "repl.repl.ignoreUndefined=true" 
```

我的新**_node**别名（v6.11.2）。

我在这里看到的与其他人相比的优势是它会影响当前/默认的 repl 上下文 ..这是我所有节点命令历史记录的地方！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-09-27T10:28:28.820

在[这个答案的类似行](https://stackoverflow.com/questions/10186565/node-js-repl-undefined/46366498#46366498)

您可以`repl.repl.ignoreUndefined=true`在 REPL 会话中运行它。

示例代码：

```
Welcome to Node.js v12.13.1.
Type ".help" for more information.
> var x
undefined
> repl.repl.ignoreUndefined=true
true
> var y = 10
> _
true
> console.log(y)
10
> 
```

# java - 如何在微调器内添加取消按钮

> ID：10186566
> 
> 赞同：0
> 
> 时间：2012-04-17T06:56:24.410
> 
> 标签：java, android

我想在微调器中添加取消按钮如何在微调器中添加取消按钮而不

使用警报对话框请给我一个例子..

spinner = (Spinner) findViewById(R.id.spinner);

```
 ArrayAdapter<String> adapter = new ArrayAdapter<String>(getApplicationContext(),R.layout.test_list_item,stringArray);

    adapter.setDropDownViewResource(R.layout.simple_spinner_dropdown_item);

    spinner.setAdapter((adapter)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T08:07:09.600

如果你问我，它的 UI 实现有点难看，但也许我错了（没有看过你的项目，所以我无法判断）

无论如何，我还没有尝试过，但我相信创建自己的 spinner_row xml 文件（从 androids simple_spinner_item 开始）并添加一个带有`invisiblity=invisible`属性的按钮并扩展您自己的`ArrayAdapter`和想要的行（例如：if `pos==array.length()`）是一件简单的事情将按钮属性更改为可见。

另一种选择是在您希望按钮所在的任何位置简单地膨胀另一行（同样的过程 - 使用按钮创建您自己的行 xml 文件（这次可见），然后在您的`ArrayAdapter`膨胀这个 xml 中）。

关于此细分中的每一步都有大量教程和问答

希望能帮助到你！

# batch-file - 如何在 Windows 中自动执行一系列操作

> ID：10186567
> 
> 赞同：0
> 
> 时间：2012-04-17T06:56:30.707
> 
> 标签：batch-file, automation

我有一个 Web 应用程序软件，它在 UI 中包含一个文本区域。我应该将我拥有的源代码粘贴到该 Web 应用程序的文本区域中，然后单击按钮提交。它处理代码并生成pdf。我应该单击 pdf 并指定保存位置。

如何为多个代码文件自动执行这一系列操作？

我尝试使用批处理文件。我可以打开应用程序，将 html 内容复制到另一个记事本文件中。但我不知道如何转到 UI 的特定选项并单击它等。

请建议我使用批处理文件的方法或建议任何开源工具来自动化这些功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T12:05:01.713

有很多工具可以完成这些任务——这里有一些可以帮助的建议：

*   [AutoIt](http://www.autoitscript.com/site/)
*   [自动热键](http://www.autohotkey.com/)
*   [宏](http://senthilthecoder.com/software/winmacro/index.html)
*   [NirCmd](http://www.nirsoft.net/utils/nircmd.html)
*   [行动](http://app.jbbres.com/actions/)

# opencms - 使用 opencms 重定向到移动网站

> ID：10186568
> 
> 赞同：1
> 
> 时间：2012-04-17T06:56:31.593
> 
> 标签：opencms

我有一个使用 OPENCMS 开发的网站。现在我们开发了一个移动网站。我如何向 opencms 添加代码或模块，以便当用户从移动设备访问时，它将被重定向到移动网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:01:40.887

在编辑器中的一个页面的开头插入。

```
<?php 
    function detect_mobile()
        {
        if(preg_match('/(alcatel|amoi|android|avantgo|blackberry|benq|cell|cricket|docomo|elaine|htc|iemobile|iphone|ipad|ipaq|ipod|j2me|java|midp|mini|mmp|mobi|motorola|nec-|nokia|palm|panasonic|philips|phone|sagem|sharp|sie-|smartphone|sony|symbian|t-mobile|telus|up\.browser|up\.link|vodafone|wap|webos|wireless|xda|xoom|zte)/i', $_SERVER['HTTP_USER_AGENT']))
                return true;

            else
                return false;
        }

        $mobile = detect_mobile();

        if($mobile === true)

    header('Location: /mobile');
    ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T01:49:39.010

```
<script type="text/javascript">

var url=***'http://yourmobilesite.com/***';
var host_name=document.location.hostname;
var request_uri=document.location.pathname;
var no_mobile=location.search;
var cookie=document.cookie;

function detect()
{
  var ua=navigator.userAgent.toLowerCase();
  var devices=['vnd.wap.xhtml+xml','sony','symbian','nokia','samsung','mobile',
               'windows ce','epoc','opera mini','nitro','j2me','midp-','cldc-',
               'netfront','mot','up.browser','up.link','audiovox','blackberry',
               'ericsson','panasonic','philips','sanyo','sharp','sie-',
               'portalmmm','blazer','avantgo','danger','palm','series60',
               'palmsource','pocketpc','smartphone','rover','ipaq','au-mic',
               'alcatel','ericy','vodafone','wap1','wap2','teleca',
               'playstation','lge','lg-','iphone','android','htc','dream',
               'webos','bolt','nintendo'];
  for (var i in devices)
  {
    if (ua.indexOf(devices[i]) != -1)
    {
      return true
    }
  }
}

if (no_mobile!='?nomobile=1' && cookie.indexOf('no_mobile')==-1)
{
  is_mobile=detect();
  if (is_mobile)
  {
    window.location = url
  }
} 
else
{
  if (cookie.indexOf('no_mobile') != -1)
  {}
  else
  {
    cookie_expires = new Date();
    cookie_expires.setTime(cookie_expires.getTime()+60*60*24);
    document.cookie = "no_mobile=1; expires="
                      + cookie_expires.toGMTString()
                      + "; path=/;"
  }
}
</script> 
```

# java - Java：验证某个字符串模式

> ID：10186569
> 
> 赞同：0
> 
> 时间：2012-04-17T06:56:32.693
> 
> 标签：java, regex

我正在尝试以“迭代方式”验证字符串，但我所有的尝试都失败了！我觉得它有点复杂，我猜也许你可以教我如何正确地做。我假设你们中的大多数人会建议我使用正则表达式模式，但我真的不知道如何，一般来说，如何为无限“集合”定义正则表达式？

我要验证的字符串是“ANYTHING|NUMBER_ONLY,ANYTHING|NUMBER_ONLY...”

例如：“hello|5,word|10”和“hello|5,word|10”都是有效的。

注意：我不介意字符串是否以逗号“，”结尾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:00:03.050

我建议通过`|`分隔符将您的字符串拆分为数组。并分别验证每个部分。每个部分（第一个除外）应匹配以下模式`\d+(,.*)?`

**更新**

拆分`,`并验证每个部分`.*|\d+`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T07:15:29.277

[Kleene 星号](http://en.wikipedia.org/wiki/Kleene_star)( `*`) 允许您在正则表达式中定义“无限集”。以下模式应该可以解决问题：

```
[^,|]+\|\d+(,[^,|]+\|\d+)*,?
A----------B--------------C- 
```

A 部分匹配第一个元素。B 部分匹配任何以下元素（注意星号）。C 部分是末尾的可选逗号。

警告：记住在 Java 字符串中转义反斜杠。

# parallel-processing - 在 opencl 中处理一组 2D 矩阵的最佳方法

> ID：10186571
> 
> 赞同：0
> 
> 时间：2012-04-17T06:56:38.393
> 
> 标签：parallel-processing, opencl, gpgpu

我想知道在 openCL 中处理一堆 2D 数组的最佳方法是什么。我的目标平台是 GPGPU。根据我的问题，我认为最好让每个工作组管理一个阵列。

至于将数组传递给每个工作组，我很想在 clEnqueueNDRangeKernel 中设置 global_worksize=numArrays*N*M 和 local_worksize=N*M。然后我会像处理 3D 数组一样处理数组：

```
(numArrays*localSize*wgroupID)+localSize*x+y 
```

这有意义吗？我一直在尝试搜索互联网以恢复一些最佳实践或示例，但我很难做到这一点。

谢谢！

# android - 从文本文件android加载微调器

> ID：10186573
> 
> 赞同：1
> 
> 时间：2012-04-17T06:56:38.910
> 
> 标签：android, spinner, text-files, fill

我正在做一个项目来从资产或 sdcard 中的文本文件中填充微调器。我的代码是

```
BufferedReader in = new BufferedReader(new FileReader("product.txt"));

        String line = in.readLine();
        int index = 0;
        while (line != null) {

            str[index++] = line;
            line = in.readLine();
        }

        Spinner spinner = (Spinner) findViewById(R.id.spinner);
        ArrayAdapter adapter = new ArrayAdapter(this,
                android.R.layout.simple_spinner_item, str);

        spinner.setAdapter(adapter); 
```

和 main.xml

```
<Spinner
       android:id="@+id/spinner"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
 /> 
```

谁能帮我解决这个问题？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T08:51:54.947

如果您的文件位于项目的资产文件夹中，我认为您必须这样做：

```
Vector<String>str=new Vector<String>();
BufferedReader in = new BufferedReader(new InputStreamReader(getAssets().open("product.txt"));

    String line = in.readLine();
    int index = 0;
    while (line != null) {

        str.add(line);
        line = in.readLine();
    }

    Spinner spinner = (Spinner) findViewById(R.id.spinner);
    ArrayAdapter adapter = new ArrayAdapter(this,
            android.R.layout.simple_spinner_item, str);

    spinner.setAdapter(adapter); 
```

然后您必须右键单击 Eclipse 中的资产目录，然后选择 Build Path -> Use as Source Folder。

# iphone - 实例方法 beginAnimations:context: 未找到

> ID：10186574
> 
> 赞同：0
> 
> 时间：2012-04-17T06:56:40.960
> 
> 标签：iphone, ios4

我正在尝试添加动画以将我的​​按钮从左向右移动。

我添加了以下代码

```
[self.view beginAnimations:nil context:nil];
[self.view setAnimationDuration:1.0f];
[button setFrame:newFrame];
[self.view commitAnimations]; 
```

但是当我构建时，我看到警告“实例方法 beginAnimations：context：未找到”

我添加了 QuartzCore 框架并包含

```
#import <QuartzCore/CoreAnimation.h> 
```

有人可以告诉我我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T07:04:35.060

不需要导入石英接头。

`beginAnimations:context:`是一个类方法。您在 UIView 的实例上调用它。这同样适用于`setAnimationDuration`和`commitAnimations`。替换`self.view`为`UIView`或更好的是使用基于块的动画。

您的代码，更正：

```
[UIView beginAnimations:nil context:nil]; 
[UIView setAnimationDuration:1.0f]; 
[button setFrame:newFrame]; 
[UIView commitAnimations]; 
```

基于块（iOS4.0 及更高版本）：

```
[UIView animateWithDuration:1.0 animations:^{[button setFrame:newFrame];}]; 
```

根据您的评论，您错过了我的观点。这些方法是**类**方法。您需要直接将它们称为`UIView`-**类**。不是`self.view`，这是**UIView 的一个实例**。查看上面的代码行 - 消息正在发送到`UIView`. 使用上面的确切代码行。如果您喜欢，请复制和粘贴。我没有使用 UIView 作为“在此处插入视图对象！”的占位符，这是您必须使用的代码。

# algorithm - 是否存在通过有向图的所有顶点的路径？

> ID：10186576
> 
> 赞同：3
> 
> 时间：2012-04-17T06:56:51.800
> 
> 标签：algorithm, directed-graph

给定 G，一个有向图，是否存在一条经过 G 中所有顶点的路径（不一定是简单路径）？

我首先需要检查无环图和强连接图中发生的情况，然后使用强连接组件的图找到一般图的解决方案。

到目前为止，我已经发现对于一个强连通图来说总是有一条路径。对于无环图，如果源不止一个，则路径将永远不存在。此外，如果有一个 D out 大于 1 的顶点，则路径将永远不存在。

问题是，我不确定最后一个是正确的，如果它是错误的，我的算法是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:21:40.190

**最后一个假设不成立**，例如看一下图`G = (V,E)`，其中`E = {(v_i,v_j) | i < j }`图显然是一个 DAG。所以找到最大的强连通分量不会改变图形。另外-该图具有汉密尔顿路径，但是`d_out(v_1) > 1`[假设`|V| > 3`]。

但是 - 你在正确的轨道上。

**高级伪代码中的算法：**

1.  在图中找到最大强连通分量 - 结果图是 DAG。
2.  对结果图¹使用拓扑排序。
3.  检查有序排序是否创建了哈密顿路径
4.  如果是 - 返回真，否则返回假

**宣称：**

> 当且仅当表示图的MSCC的DAG具有汉密尔顿路径时，存在具有所有顶点的路径

**索赔证明：**
**<-**
如果有一条汉密尔顿路径 - 那么这样的路径对于每个 MSCC 来说都是微不足道的 - 路径经过所有顶点，然后到达代表我们在汉密尔顿路径中选择的边的外边在 MSCC 图中。
**->**
如果存在这样的路径，就让它成为`v0->v1->...vm`。
让我们表示`V_i`其中的最大强连通分量`v_i`。
现在，对于原始图中的路径，MSCC 图²`v0->v1->...->vm`中也有一条路径：。 请注意，如果在上述路径中出现两次 [或更多] - 两次出现彼此相邻，否则找到的 MSCC 不是最大的，因为如果^(`V_0->V_1->...->V_m`
`V_i``V_i->V_k->...->V_i`是可行的路径 - 那么 V_i 和 V_k 不是最大的，因为您可以将它们合并成一个更大的 SCC。
现在，对于每一次`V_i`崩溃，它的所有出现都合二为一，你就会得到一条路径——每一个`V_i`最多出现一次[我们只是说明了原因]，而且恰好是一个[因为每一个`v_i`都在原始路径上，我们没有完全删除 MSCC - 只是折叠它们]。
因此 - 生成的路径是 MSCC 图中的哈密顿路径。)

**建议算法的正确性证明：**
由于我们在 MSCC 图中显示哈密顿路径存在当且仅当原始图中存在请求的路径 - 然后：
**->**
算法返回 true -> 算法在 DAG 中找到了哈密顿路径-> Dag 中有一条哈密顿路径 [脚注 1] -> 原始图中要求有一条路径。
**<-**
算法返回 false -> 算法在 DAG 中没有找到哈密顿路径 -> DAG 中没有哈密顿路径 [脚注 1] -> 原始路径中没有请求的路径。

**量子点**

* * *

1：在一个DAG中，如果存在hamiltonian路径，则存在唯一的拓扑排序，如果有hamiltonian路径——就是拓扑排序中顶点的顺序。因此，在 DAG 中 - 找到一条汉密尔顿路径很容易。
2：实际上，它有点修改，`V_i->V_i`不是MSCC上的真正边，图但现在让我们将它表示为一个。

# android - 使用主题完全透明的 ActionBarSherlock

> ID：10186580
> 
> 赞同：11
> 
> 时间：2012-04-17T06:57:13.037
> 
> 标签：android, dialog, transparent, actionbarsherlock

我正在使用[ActionBarSherlock](http://actionbarsherlock.com/) 4.0.2。

我需要一个完全透明的操作栏（没有霓虹色底部分隔线）。因此，我有以下风格：

```
<style name="AppTheme" parent="@style/Theme.Sherlock">
    <item name="windowActionBarOverlay">true</item>
    <item name="icon">@drawable/ic_home</item>
    <item name="titleTextStyle">@style/ActionBarCompatTitle</item>
    <item name="android:windowFullscreen">true</item>
</style> 
```

通过使用上面的代码，我仍然会有以下效果。

![SherlockFragmentActivity 带有分隔符和半透明背景](../Images/bcafdf4e793681e21b47ad4c02040d70.png)

为了禁用后台，我将以下代码放入`SherlockFragmentActivity#onCreate`. 然后问题就解决了。

```
getSupportActionBar().setBackgroundDrawable(null); 
```

![SherlockFragmentActivity 没有分隔线和透明背景](../Images/7ce9969d5cb4e4e8c995a454f35f1b26.png)

但是，我希望看到在*styles.xml*而不是 Java 代码中实现的解决方案，因为我有许多其他具有不同屏幕配置的设备。我将*styles.xml*修改为以下内容，而没有在Java 代码中使用前面提到的修复程序。

```
<style name="AppTheme" parent="@style/Theme.Sherlock">
    <item name="windowActionBarOverlay">true</item>
    <item name="icon">@drawable/ic_home</item>
    <item name="titleTextStyle">@style/ActionBarCompatTitle</item>
    <item name="android:windowFullscreen">true</item>

    <item name="android:background">@drawable/transparent</item>
    <item name="background">@drawable/transparent</item>
</style> 
```

然而，霓虹分隔线仍然可见。看来我的修复使用`android:background`并且`background`不起作用。我错过了什么吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-26T07:10:29.387

```
<style name="AppTheme" parent="@style/Theme.Sherlock">
    <item name="actionBarStyle">@style/AppTheme.ActionBar</item>
    <item name="android:actionBarStyle">@style/AppTheme.ActionBar</item>
</style>

<style name="AppTheme.ActionBar" parent="@style/Widget.Sherlock.ActionBar">
    <item name="background">@android:color/transparent</item>
    <item name="android:background">@android:color/transparent</item>
</style> 
```

# php - 如何将 jQuery 变量从滑块传递到 url 到 PHP？

> ID：10186585
> 
> 赞同：0
> 
> 时间：2012-04-17T06:57:36.340
> 
> 标签：php, jquery, hash, anchor

我是初学者。我正在使用[Filament Groups jQuery UI 滑块](http://www.filamentgroup.com/lab/update_jquery_ui_slider_from_a_select_element_now_with_aria_support/)。我制作了两个滑块，并想在我的 PHP 脚本中使用两个相应的变量。我想将 jQuery 变量传递给我当前的 url (http://url.com) 到新的 url (http://url.com/#slide1=7&slide2=6) 并将 url 变量读入 PHP 变量 ( $var1=7，$var2=6)。

如何为我的 jQuery 变量创建锚标记 (#)？

如何将值传递给 url？

如何将 url 中的变量读取为 PHP 变量？

```
 <script type="text/javascript">
    $(function(){
        //demo 1
        var num_var = $('select#num').selectToUISlider({labels:7}).next();
        var allpha_var = $('select#allpha').selectToUISlider({labels:7}).next();    

        //demo 2
        $('select#valueA, select#valueB').selectToUISlider();

        //demo 3
        $('select#valueAA, select#valueBB').selectToUISlider({
            labels: 12
        });

        //fix color 
        fixToolTipColor();
    }); 
```

HTML

```
<form action="#">
    <!-- demo 1 -->
    <fieldset>

        <select name="num" id="num">
        <optgroup label="low">
            <option value="1">1</option>
            <option value="2">2</option>
        </optgroup>
        <optgroup label="mid">
            <option value="3" >3</option>
            <option value="4" selected="selected">4</option>
            <option value="5">5</option>
        </optgroup>
        <optgroup label="high">
            <option value="6">6</option>
            <option value="7">7</option>
        </optgroup>
        </select>
    </fieldset> 
```

成品类似于[我想要的示例](http://www.yummly.com/search#flavor.salty.max=0.6666666666666666&flavor.salty.min=0&q=cookie&start=0)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:08:44.853

如果必须将数据导入 PHP，则必须以这种方式传递它们：

```
http://url.com/?slide1=7&slide2=6 
```

所以，相应地改变你的：

```
<form action="yourBusinessPhpFile.php" method="GET">
    <!-- demo 1 -->
    <fieldset>

        <select name="slide1" id="num" onchange="this.form.submit()">
        <optgroup label="low">
            <option value="1">1</option>
            <option value="2">2</option>
        </optgroup>
        <optgroup label="mid">
            <option value="3" >3</option>
            <option value="4" selected="selected">4</option>
            <option value="5">5</option>
        </optgroup>
        <optgroup label="high">
            <option value="6">6</option>
            <option value="7">7</option>
        </optgroup>
        </select>
    </fieldset>
</form> 
```

要在您的 PHP 代码 (yourBusinessPhpFile.php) 中检索它们，请使用常用运算符：

```
$var1 = $_GET["slide1"];
$var2 = $_GET["slide2"]; 
```

问候

# c# - 从配置文件中读取 Attributes 参数值

> ID：10186592
> 
> 赞同：5
> 
> 时间：2012-04-17T06:57:57.763
> 
> 标签：c#, custom-attributes

是否可以从配置文件加载属性值？例如，我有属性低于哪个缓存属性返回值。该属性在应用程序中使用了 10 次以上，我想从配置文件中加载第二个属性参数（1800 秒）。

```
[Cache(CacheType.Absolute, 1800, CacheLocation.Memory)] 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-17T07:05:34.467

我认为你可以通过这样写来做到这`Attributes`一点：

[如何创建自定义数据注释验证器](https://stackoverflow.com/questions/3413715/how-to-create-custom-data-annotation-validators)

# c# - C++/CLI 全局函数可访问性问题

> ID：10186602
> 
> 赞同：5
> 
> 时间：2012-04-17T06:58:37.747
> 
> 标签：c#, .net, c++-cli

在 C# 中导入已编译的 DLL 时，如何使 C++/CLI 函数可见？

我可以简单地通过在类的名称前面加上 public 来实现它，但函数不是这样，当我这样做时会出现语法错误。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-17T07:24:45.347

你不能，CLR 不支持全局函数。你可以用 C++/CLI 编写它们，但是编译器会生成一个特殊的类来给它们一个家。类名是`<Module>`，不能从 C# 代码访问。

通过使用公共静态方法声明公共 ref 类，您将获得完全相同的效果。访问这些没有问题。与 C# 中的静态类相同的想法，减去检查。您可以通过将检查声明为抽象和密封来添加检查：

```
public ref class Utils abstract sealed
{
public:
    void static foo() {}
}; 
```

# image - MATLAB 中关于尺寸不匹配的错误

> ID：10186603
> 
> 赞同：0
> 
> 时间：2012-04-17T06:58:39.157
> 
> 标签：image, matlab

实际上，我正在尝试在以下网站[http://www.mathworks.com/matlabcentral/fileexchange/28300](http://www.mathworks.com/matlabcentral/fileexchange/28300)上实现代码，但这仅在给定的两个图像具有相同尺寸时才有效，我想让此代码在一个图像中工作有一些维度，其他有一些其他维度，如果我用当前代码这样做，它会给出错误

```
??? Sub scripted assignment dimension mismatch. Error in ==> example2 at 27 
```

第 27 行：

```
I(:,1:size(I1,2),:)=I1; I(:,size(I1,2)+1:size(I1,2)+size(I2,2),:)=I2; 
```

你能为我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:11:25.620

您可以尝试用零填充较小的图像，使其具有与较大图像相同的尺寸。例如

```
%Start with rows:    
if size(I1,1) > size(I2,1) %I1 has more rows so pad I2
        pad = zeros (size(I1,1) - size(I2,1), size(I2,2));
        I2 = [I2 ; pad]; %Append the rows of zeros to the bottom of I2
else %I2 has more rows so pad I1
        pad = zeros (size(I2,1) - size(I1,1), size(I1,2));
        I1 = [I1 ; pad]; %Append the rows of zeros to the bottom of I1

%Pad the columns    
if size(I1,2) > size(I2,2) %I1 has more rows so pad I2
        pad = zeros (size(I2,1), size(I1,2) - size(I2,2));
        I2 = [I2 , pad]; %Append the columns of zeros to the left of I2
else %I2 has more rows so pad I1
        pad = zeros (size(I1,1), size(I2,2) - size(I1,2));
        I1 = [I1 , pad]; %Append the columns of zeros to the left of I1 
```

我还没有测试过，所以你可能需要摆弄一下才能得到完美的尺寸，比如 size(I2,2) - size(I1,2) + 1 而不是 size(I2,2) - size(I1 ,2)，诸如此类。

但是您需要首先弄清楚您正在尝试做的事情的逻辑。在您的应用程序中使用零填充可能没有意义。我的代码垫也在底部和左侧，但您可能想要一直填充，以便您的图像位于新图像的中心。

# c# - 如何实现简单的线程安全内存管理防止碎片？

> ID：10186604
> 
> 赞同：2
> 
> 时间：2012-04-17T06:58:42.537
> 
> 标签：c#, memory-management

我需要实现简单的线程安全内存管理来防止碎片。我已经阅读了一些关于[this](http://geekswithblogs.net/robp/archive/2008/08/07/speedy-c-part-2-optimizing-memory-allocations---pooling-and.aspx)和[this](http://flyeater.wordpress.com/2010/11/15/simple-memory-pool-implementation/)的文章，但我不知道如何在 C# 中开始实现。

要点：95% 的内存分配请求将是小于 1K 的块！

有人可以给我一些代码吗？

**编辑** 我已经写了一个`Allocator`但是我没有在`Alloc`方法中使用池。我如何更改它以使其使用池？

```
class Allocator
{
       private int _id;

       //TODO: it must be struct!
       class Block
       {
              public int offset;
              public int blockLength;
       }

       private readonly Dictionary<int, Block> idToBlock = new Dictionary<int, Block>();

       private List<byte> rawData;
       private int allocatedBlocksLength;

       // sync
       private readonly object _sync = new object();

       public int Alloc(int count)
       {                  
              rawData.AddRange(new byte[count]);
              idToBlock.Add(_id, new Block { offset = allocatedBlocksLength, blockLength = count });

              var blockId = _id;
              ++_id;
              allocatedBlocksLength += count;

              return blockId;
       }

       public void Free(int id)
       {
              // Search in table
              Block block;
              if (!idToBlock.TryGetValue(id, out block))
                     return;

              // remove object and update all offsets that after our block
              foreach (var kv in idToBlock)
              {
                     if (kv.Key == id)
                           continue;
                     if (kv.Value.offset > block.offset)
                           continue;

                     // changing indexes
                     kv.Value.offset -= block.blockLength;
              }

              // update how much left
              allocatedBlocksLength -= block.blockLength;
       }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:39:15.490

如果您的 .NET 应用程序确实需要自定义*内存管理器，则***不应**遵循非托管世界（您的第二个链接）的提示（或简单地翻译代码）。

.NET 环境中的内存分配完全不同，内存碎片更多（因为默认分配器赋予分配速度特权）但它可以被压缩（因此内存碎片问题在那里并不是真正的问题）。

这不是你的情况，但是大对象（现在这个阈值设置为 85 KB）将使用不同的策略进行分配，并且它们不会被压缩。我认为只有当你创建了很多短暂的大对象时，你才**可能需要一个自定义分配器。**

第一个链接提供了一个非常幼稚的实现，您是否在多线程环境中对其进行了分析**？**在您的情况下，您**确定**它的性能优于默认分配吗？即使它表现得更好一点，你确定你需要它吗？

为了使您的内存分配器线程安全，您可以为每个线程使用不同的堆或简单地锁定您的数据结构（例如，如果您将空闲内存块列表保留在 LinkedList 中，您可以在从列表中删除节点时锁定结构）。这不是几行就可以解释的话题，如果你真的对这些内部原理感兴趣，你可以阅读伟大的“CLR via C#”一书。

当对象分配非常广泛时，您可以为对象使用复活机制，但这会增加许多必须评估的复杂性，通常您要付出的代价更大。您可以从工厂方法开始，例如：

```
MyObject obj = ObjectFactory.Allocate(); 
```

而不是*简单*的：

```
MyObject obj = new MyObject(); 
```

通过这种方式，如果你真的需要它，你可以切换到其他东西，但是
............一个小提示：如果你不确定你在做什么并且在你分析**你**当前的之后，**不要玩内存分配**内存分配策略。

 **（我很想为这条消息使用更大的字体）

这可能是您可以对您的应用程序做的最糟糕的事情之一，因为您会使它变慢并且您的代码将不那么可读。99.999% 的应用程序不需要这些自定义的东西，你确定你的应用程序需要吗？

**编辑**
从示例中并不清楚您在做什么。您的 Alloc 方法返回一个 ID，但您如何获取分配的数据？无论如何......
如果你真的需要做那样的事情......

*   不要保留字节列表，只会浪费内存。
*   不提供`Free`方法，您在.NET 中，所以请依赖 GC。
*   保留**可用**块（`Block`对象）的列表。在该`Allocate`方法中，您将在空闲块列表中搜索所需大小的块。如果找到它，则返回该块并将其从列表中删除。如果您没有找到该块，您必须分配它并将其简单地返回给调用者。
*   在`Block`对象的终结器中调用 GC.ReRegisterForFinalize 方法并将对象插入可用块列表中。

非常简单的实现，作为一个例子而不是一个真正的程序：

```
sealed class Block
{
    internal Block(int size)
    {
        Data = new byte[size];
    }

    ~Block()
    {
        BlockFactory.Free(this);
        GC.ReRegisterForFinalize(this);
    }

    public byte[] Data
    {
        get;
        private set;
    }
}

static class BlockFactory
{
    public static Block Allocate(int size)
    {
        lock (_freeBlocks)
        {
            foreach (Block block in _freeBlocks)
            {
                if (block.Data.Length == size)
                {
                    _freeBlocks.Remove(block);

                    return block;
                }
            }

            return new Block(size);
        }
    }

    internal static void Free(Block block)
    {
        lock (_freeBlocks) _freeBlocks.Add(block);
    }

    private static List<Block> _freeBlocks = new List<Block>();
} 
```

请注意：

*   这种实现根本**没有**效率（在这种情况下，更好的解决方案可能是一个`ReadWriterLockSlim`代替`lock`或另一个更合适的数据结构代替 `List<T>`）。
*   使用枚举的搜索很**糟糕**，但这里只是为了清楚起见。
*   为每个对象添加终结器可能会降低性能。
*   该示例`Block`用作您需要的数据的容器（字节数组）。这是你需要的吗？

也就是说，我仍然认为在您花时间在此之前，您应该检查是否需要它。您的应用程序是否遇到此问题？是问题吗？例如，假设您有一个数据处理应用程序。您的管道由以下阶段组成：

*   采集（以某种方式定时以定期获取数据）。
*   处理（各种过滤器）。
*   可视化。

如果您为每个数据包分配一个新缓冲区，您可能会创建很多小对象。我真的不认为这可能是一个问题，但您可以考虑在获取阶段重用相同的（预分配的）缓冲区，而不是试图增加所有应用程序的复杂性。

我希望我的意思很清楚。**

# java - 比较 BigDecimals

> ID：10186605
> 
> 赞同：-1
> 
> 时间：2012-04-17T06:58:42.863
> 
> 标签：java, bigdecimal

我最近在研究一种算法，我偶然发现了一个点，例如我有两个 java BigDecimal，它们的值为 -1.9997 和 -1.9989，BigDecimal 的 compareTo 方法认为 -1.9989 大于 -1.9997，在这种情况下，我希望它们是被认为是相等的，但是如果例如我有 -1.9 和 -1.86 我希望它们被认为是不同的。有没有办法在Java中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T07:02:48.807

取值之间的差异并检查它是否小于某个阈值/错误，例如

```
double x = -1.9997;
double y = -1.9989;
if(Math.abs(x - y) < 1e-3) // almost the same 
```

`double`除非您需要 15 位或更多位的准确度，否则我个人会使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T07:01:05.127

然后你应该在比较它们之前对你的数字进行*四舍五入。*默认比较是非常合理的。

```
BigDecimal price = x.scale(2, RoundingMode.HALF_UP); 
```

此代码四舍五入为两位小数。

# xna - XNA SoundEffect 无法从文件加载

> ID：10186611
> 
> 赞同：2
> 
> 时间：2012-04-17T06:59:14.993
> 
> 标签：xna, xna-4.0, audio

我有一本字典来存储 SoundEffects，比如：

```
public static Dictionary<string, SoundEffect> Hangok = new Dictionary<string, SoundEffect>(); 
```

我从文件（普通 .wav 格式）加载声音，例如：

```
GStatic.Hangok.Add(Azonosító, SoundEffect.FromStream(File.OpenRead(Azonosító))); 
```

，其中 Azonosító 是文件名。

一切都很好，文件已加载，除了一个；创建了一个异常：

> 由于对象的当前状态，操作无效。

，什么对我来说信息不多。谁能解释此错误消息或告诉我为什么 SoundEffect.FromStream 无法读取？为什么？什么时候？解决方法？

提前致谢：彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:08:22.533

我使用 ContentManager 加载 SoundEffect 的。将 wav 文件放在内容项目中，它应该刚刚加载。

例如

```
SoundEffect s = Content.Load<SoundEffect>("name"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-12T10:16:15.933

不是一个完整但有效的解决方案。仅“回答我的问题”，因为它可能对其他不知道问题可能是什么的开发人员有用。

```
 try
    {
      GStatic.Hangok.Add(Azonosító, SoundEffect.FromStream(File.OpenRead(Azonosító)));
    }
    catch
    {
      GStatic.Hangok.Add(Azonosító, new SoundEffect(File.ReadAllBytes(Azonosító), 11025, AudioChannels.Mono));
    } 
```

好吧：我不知道为什么不能以正常方式加载该文件以及为什么可以像在异常处理程序中那样加载。有一个单声道文件应该不是什么大问题。如果有人知道，请留言/评论。

# android - android中的应用程序评分功能

> ID：10186612
> 
> 赞同：3
> 
> 时间：2012-04-17T06:59:17.627
> 
> 标签：android

我开发了一个 Android 应用程序。我想为其添加评分功能。这样用户就可以在 android 市场（谷歌播放）中对我的应用程序进行评分。谁能告诉我如何使用评分栏小部件来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T07:27:52.133

无法让用户从您的应用程序中对 Play 商店中的应用程序进行评分。您需要打开应用程序的 Play 商店页面并让用户从那里对其进行评分。

# android - 不能使用@string 表示法来定义 在 AndroidManifest.xml 中

> ID：10186615
> 
> 赞同：19
> 
> 时间：2012-04-17T06:59:28.503
> 
> 标签：android, android-manifest

当我使用“@string/action_name”来定义意图过滤器操作时，我的 BroadcastReceiver 永远不会被调用。如果我将 strings.xml 中的相应字符串复制/粘贴到 AndroidManifest.xml 中，那么它可以完美运行！

**AndroidManifest.xml 中的非**工作示例：

```
<receiver
    android:name=".ServerUpdateReceiver" >
    <intent-filter>
        <action android:name="@string/ACTION_INFORM_USER_SERVER_UPDATE" />
    </intent-filter>
</receiver> 
```

AndroidManifest.xml 中的工作示例：

```
 <receiver
        android:name=".ServerUpdateReceiver" >
        <intent-filter>
            <action android:name="com.franklinharper.intent.action.ACTION_INFORM_USER_SERVER_UPDATE" />
        </intent-filter>
    </receiver> 
```

为了完整起见，strings.xml 包含以下行：

```
<string name="ACTION_INFORM_USER_SERVER_UPDATE">com.franklinharper.intent.action.ACTION_INFORM_USER_SERVER_UPDATE</string> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-17T07:26:47.997

从[规范](http://developer.android.com/guide/topics/manifest/action-element.html)来看，无法使用资源标识符配置操作。它必须是一个简单的字符串，也许是为了避免要求 Android Intent 调度系统打开您的 APK 以确定过滤器的用途。

# jquery - .attr() 相关的东西在 jquery 升级 1.3.2 到 1.6.4 后停止工作，还有什么可以破坏的？

> ID：10186617
> 
> 赞同：4
> 
> 时间：2012-04-17T06:59:41.567
> 
> 标签：jquery, upgrade, backwards-compatibility

我从 jquery 1.3.2 升级到 1.6.4，发现现有代码中的一些东西不起作用 -

1.  禁用某些东西 -

    `$(selector).attr("disabled","");`

2.  检查单选按钮是否被选中 -

    `if($(selector).attr('checked'))`

我检查了版本[1.4](http://jquery14.com/day-01/jquery-14)、[1.5](http://blog.jquery.com/2011/01/31/jquery-15-released/)和[1.6](http://blog.jquery.com/2011/05/03/jquery-16-released/)的向后不兼容性，发现只提到了问题 #2，但没有明确提到上面的问题 #1。因此，我担心就像问题 #1 一样，我可以在现有代码中找到更多问题。[我想我错过了http://blog.jquery.com/2011/05/03/jquery-16-released/](http://blog.jquery.com/2011/05/03/jquery-16-released/)的“数据属性的案例映射”部分中的一些内容。有人可以解释一下吗。

来源 -[从 jQuery 1.3.2 升级到 jQuery 1.5（或 1.4）](https://stackoverflow.com/q/4960126/351903)

**更新**

我仍然对*适当*替换`attr`为`prop`. 我已阅读[.prop() 与 .attr()](https://stackoverflow.com/questions/5874652/prop-vs-attr)以及其他一些问题。到目前为止，无论我在哪里阅读，它都说在大多数情况下我需要这样做。但那是少数情况呢？有人可以给出一些代码示例或情况吗？如何在现有代码中找到此类案例？我还阅读 了[https://stackoverflow.com/a/6057122/351903](https://stackoverflow.com/a/6057122/351903)，其中提到 -

> 您真正需要小心的是不要在整个应用程序中混合使用这些用于相同的属性

如果这些线路现在工作正常，我是否需要更换`attr`？`prop`

```
$(selector).attr("id") 
```

**更新 #2**
假设在我现有的代码中，我有如下几行（我猜这会直接影响 UI 小部件的行为或状态），但目前没有检查该元素是否被检查 -

这是那里

```
$(selector).attr("checked","checked"); //setting 
```

但这不存在

```
if($(selector).attr("checked")) //checking 
```

即使设置现在有效，我是否仍应在设置代码中替换`attr`为？`prop`

**更新#3**
是否有一些地方可以从那里获得某种属性列表，这些属性直接影响 UI 小部件的某些属性？我仍然对决定哪些属性将 attr 替换为 prop 感到困惑。其他人对这个 jquery 版本有同样的感觉还是我只有一个：D？

**更新#4**
看起来，在这两个版本（1.3.2 到 1.6.4）之间的某个地方，jquery 使元素选择更加严格。

*详细信息*
在一个模块中，具有以下 HTML -

```
<div id="60table">
    <div>
        <input type="CHECKBOX" id="60_1" value="1" name="data[reportsInfo][Campaign][2752]">
        <label for="60_1">23 apr new campaign 1</label>
    </div>
    <div>
        <input type="CHECKBOX" id="60_2" value="1" name="data[reportsInfo][Campaign][2753]">
        <label for="60_2">23 apr new campaign 2</label>
    </div>
    <div>
        <input type="CHECKBOX" id="60_3" value="1" name="data[reportsInfo][Campaign][2707]">
        <label for="60_3">2nd camp added</label>
    </div>
</div> 
```

使用 jquery 1.3.2，以下返回输入的实际计数 -

```
$("#60table INPUT[type='checkbox']").length 
```

但是，现在使用 jquery 1.6.4，上面返回 0（注意输入的位置就像 #60table > div > input 而不是直接在 #60table 下）。我必须做 `$("#60table").find("INPUT[type='checkbox']").length`才能得到正确的号码。

因此，以下现有代码在升级后停止工作，即使我`attr`用`prop`-

```
$("#60table INPUT[type='checkbox']").attr('checked', $("#60").attr("checked")); //I replaced the attr by prop here 
```

所以，我仍然遇到新问题，旧代码在升级后不再工作。

**放赏金**
因为 -

*   *元素选择器逻辑不再起作用 -* 我不确定是否还有更多代码不起作用。以**Update 4**为例，当输入的位置是`#60table > div > input`，选择like是不是不正确`$("#60table INPUT[type='checkbox']")`。如果是这样，我的项目中是否还有一些其他常见错误可能已经损坏。

*   *更好地解释在哪里用 prop 替换 attr -*我需要更清楚地区分何时使用 prop 而不是 attr，并提供更多示例。根据乔恩的回答 -

> 如果它直接影响 UI 小部件的行为或状态，请使用 prop；否则使用 attr。

我在哪里可以获得某种属性列表，这些属性直接影响 UI 小部件的某些属性

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T07:03:19.363

该问题根本与数据属性的案例映射无关，这仅仅是由于属性/属性 API 的演变：

> 过去，jQuery 并没有在属性和属性之间划清界限。通常，DOM 属性表示从文档中检索到的 DOM 信息的状态，例如标记中的 value 属性。DOM 属性表示文档的动态状态；例如，如果用户单击上面的输入元素并键入 def，.prop("value") 是 abcdef，但 .attr("value") 仍然是 abc。
> 
> *在大多数情况下，浏览器将属性值视为属性的起始值，但选中或禁用等布尔属性具有不寻常的语义。*

至于缺少其他相关的重大更改，搜索您的代码`attr`以适当地使用和替换就足够了`prop`；考虑`attr`到大部分时间的使用倾向，大多数调用通常应该被替换。

**更新：**让我们*适当地*定义.

关键思想是元素具有 HTML*属性*：`<input name="foo" disabled>`具有属性`id`和`disabled`; `id`有值，而`disabled`没有。这些属性之一直接影响浏览器呈现以表示此元素*的 UI 小部件的属性（输入框被禁用，在桌面应用程序控件的意义上）。*所以经验法则是：

> 如果它直接影响 UI 小部件使用的行为或状态`prop`；否则使用`attr`.

在您提到的示例中，`id`是一个抽象量，不直接影响任何元素的行为或状态；因此，您应该继续使用`attr`它。

**更新 2：**

> 即使设置现在可以工作，我是否仍应将 attr 替换为设置代码中的道具？

是的，您应该这样做，因为 jQuery 的文档是这么说的。正如您在问题前面提到的那样，混合`prop`并`attr`可能导致有问题的行为。

**更新 3：**

> 有没有什么地方可以让我获得某种属性列表，这些属性直接影响 UI 小部件的某些属性？我仍然对决定哪些属性将 attr 替换为 prop 感到困惑。

并不真地。一个适用于此的经验法则是，如果某物是布尔值，那么`prop`很可能是访问它的正确方法。

**更新 4：**

> 看起来，在这两个版本（1.3.2 到 1.6.4）之间的某个地方，jquery 使元素选择更加严格。

实际上是[Sizzle](http://sizzlejs.com/)负责从选择器中解析匹配的元素（[jQuery 带有内置的 Sizzle](https://github.com/jquery/jquery/blob/master/src/sizzle-jquery.js)）。我不知道是什么变化导致了行为的改变，但罪魁祸首是你的`id`，它以数字开头。[这不是有效的 HTML 4.01](https://stackoverflow.com/q/70579/50079)，但由于某种原因，它在 Sizzle 中也有所不同。解决方法很简单：不要`id`以数字开头。

您发现的另一种解决方法（将选择器分成两部分并使用`.find`）是有效的，因为在选择器为 form 的特殊情况下`#id`，jQuery[直接调用](https://github.com/jquery/jquery/blob/master/src/core.js#L141) `getElementById`而不是调用 Sizzle。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T16:28:46.017

要回答您的更新 #4：

ID 属性[不应以数字开头](http://www.w3.org/TR/html401/types.html#type-name)

有效的原因`$('#60table')`是因为在 jQuery 内部进行了优化，因为`document.getElementById('#60table')`它通常在浏览器中有效，受到抗议:)

但是，当您开始使用组合表达式时，例如`$('#60table input[...]')`Sizzle 引擎就会运行，它对其查询使用更严格的规则。

希望有帮助。

# visual-c++ - 如何通过 C++ MFC 使 OpenGL 程序在显卡上运行？

> ID：10186620
> 
> 赞同：3
> 
> 时间：2012-04-17T06:59:44.937
> 
> 标签：visual-c++, opengl, graphics, mfc

我用c ++ MFC编写了一个OpenGL程序，但是渲染速度慢得令人难以忍受。我终于发现问题是因为程序使用***集成显卡***运行，并且在我强制设置程序运行后运行非常流畅和完美在 NVIDIA 面板中使用显卡....

我可以在代码级别或 VC 项目级别将程序使用的默认图形更改为图形卡吗？怎么做？

开发环境：64bit Win7, Visual Studio 2010, C++, MFC, OpenGL 硬件：i7-2670QM, NVIDA GeForce GT 540M with 2G dedicate memory

# java - Java 会计年度周计数器

> ID：10186626
> 
> 赞同：1
> 
> 时间：2012-04-17T07:00:18.480
> 
> 标签：java, date

我整晚都想弄清楚这一点，但我尝试的任何方法似乎都不起作用。假设财政年度从每年的 10 月 1 日开始，例如财政年度从 2012 年 1 月 1 日开始，这周数为 30。我似乎找不到返回适当周数的代码。

我得到的最接近的是下面的代码，它返回从一月开始的第 16 周。

```
public String getCurrentWeek() {
        GregorianCalendar current = new GregorianCalendar(getCalendar().get(Calendar.YEAR),
            getCalendar().get(Calendar.MONTH), getCalendar().get(Calendar.DATE));

        return Integer.toString(current.get(Calendar.WEEK_OF_YEAR));
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T07:09:33.370

我相信：

```
private static final int LENGTH_OF_WEEK = 7 * 24 * 60 * 60 * 1000;

public static int weekOf(Calendar yearStart, Calendar date) {
    long millisElapsed = date.getTimeInMillis() - yearStart.getTimeInMillis();
    int weeksElapsed = (int) (millisElapsed / LENGTH_OF_WEEK);
    return weeksElapsed + 1;
} 
```

应该这样做。

# php - 完成后使用ajax传递字符串

> ID：10186630
> 
> 赞同：0
> 
> 时间：2012-04-17T07:00:46.333
> 
> 标签：php, jquery, ajax

我正在尝试将一些 if-else 语句与 ajax

所以基本上我有这个 php 文件`get.php`和另一个 php 文件（带有 ajax 代码）`ajax.php`

我的 ajax 看起来像这样。这是`ajax.php`

```
$.ajax({ 
    type: "GET",
    data: data,
    url: "get.php"

}).done(function(data){
    alert(data);
    if(data == "homer"){
        alert("doh");
    }else if(data == "wife"){
        alert("marge");
    }

}); 
```

我有一些 php 脚本，这是`get.php`

```
if(!$something){
echo "homer";
}else{
echo "wife";
} 
```

所以基本上，我得到了合适的`alert(data)`，要么是本垒打，要么是妻子。但它没有警报`doh`或`marge`

有人可以解释为什么这不起作用吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T07:04:27.803

http 在数据中添加了一些空格，因此您必须先对其进行修剪

[如果其他路由在 ajax 数据上不起作用](https://stackoverflow.com/questions/10165359/if-else-route-on-ajax-data-not-working/10165525#10165525)

# c# - 从 C# 客户端应用程序调用 ac# COM 服务器 dll

> ID：10186634
> 
> 赞同：0
> 
> 时间：2012-04-17T07:01:03.857
> 
> 标签：c#, dll, com, interop

我有一个桌面应用程序，它使用一个用 C# 编写的小 DLL，注册为一个 COM 对象，以从 Active Directory 收集一些信息。该应用程序是用 C++ 编写的，运行良好。我想用 C# 编写一个小应用程序，它会调用相同的注册 DLL 方法（一种测试工具），但如果不在编译时引用 COM DLL，我不知道如何做到这一点（我真的需要使用COM 注册的 dll)

[我按照这篇文章](http://www.codeguru.com/csharp/csharp/cs_misc/com/article.php/c9065/Writing-Your-Own-COM-Interop-in-C.htm)，设法实例化了对象，但我无法将实例转换为从 IDL 创建的接口。调试器还知道显示所有成员的实例的确切类型。我怀疑这是因为 DLL 也加载到了 CLR 中。

这甚至可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:19:29.157

你不能。IDE 将拒绝让您添加对类型库的引用。您可以通过使用后期绑定来欺骗它。但这仍然不能欺骗 CLR，它不会同时创建 CCW 和 RCW。您将需要一个本地客户端，如 C++ 或脚本语言来真正练习 COM 特定路径。

没有意义，直接使用程序集引用，用普通的C#代码测试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T07:06:22.823

您可以使用 C# 项目中的 COM 组件。一般步骤如下：

找到要使用的 COM 组件并注册它。使用 regsvr32.exe 注册或取消注册 COM DLL。

向项目中添加对 COM 组件或类型库的引用。

添加引用时，Visual Studio 使用 Tlbimp.exe（类型库导入程序），它将类型库作为输入，以输出 .NET Framework 互操作程序集。该程序集也称为运行时可调用包装器 (RCW)，它包含托管类和接口，它们包装了类型库中的 COM 类和接口。Visual Studio 向项目添加对生成的程序集的引用。

创建在 RCW 中定义的类的实例。这反过来又创建了 COM 对象的一个​​实例。

像使用其他托管对象一样使用该对象。当对象被垃圾回收回收时，COM 对象的实例也会从内存中释放。

有关详细信息，请参阅向 .NET Framework 公开 COM 组件。

详细[文章](http://msdn.microsoft.com/en-us/library/ms173185.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T14:10:02.773

我建议您使用 .NET 4.0`dynamic`类型，而不是在您提到的那篇文章中处理反射的所有混乱

# iphone - 如何在 iPhone 应用程序中集成讲述人

> ID：10186636
> 
> 赞同：0
> 
> 时间：2012-04-17T07:01:08.617
> 
> 标签：iphone, ios

我必须创建一个应用程序，在其中我将向应用程序提供文本或 pdf 文件，并且应用程序会像旁白一样阅读它。是否有任何可用的 API 或 iOS sdk 本身提供此功能。

[这](http://itunes.apple.com/us/app/speak-it!-text-to-speech/id308629295?mt=8)是 App Store 上的一款此类应用的链接

谢谢-
**苛刻的Vardhan Mehrotra**

# c - 如何在 C 中获取文件的大小？

> ID：10186643
> 
> 赞同：-2
> 
> 时间：2012-04-17T07:01:59.977
> 
> 标签：c, file

> **可能重复：**
> [如何确定 C 中文件的大小？](https://stackoverflow.com/questions/8236/how-do-you-determine-the-size-of-a-file-in-c)

如何在 C 中获取文件的大小？我打开了一个用 C 编写的应用程序。我想知道大小，因为我想将加载文件的内容放入一个字符串中，我使用 malloc() 进行分配。只写 malloc(10000*sizeof(char)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T07:06:28.147

您可以使用 fseek 和 ftell 函数：

```
FILE* f = fopen("try.txt","rb");
fseek(f, 0, SEEK_END);
printf("size of the file is %ld", ftell(f)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T07:07:58.553

对于文件大小，stat、lstat 或 fstat 将是正确的选择。

请检查[统计](http://linux.die.net/man/2/stat)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T07:08:41.473

```
 int Get_Size( string path )
{

FILE *pFile = NULL;

// get the file stream

fopen_s( &pFile, path.c_str(), "rb" );

// set the file pointer to end of file

fseek( pFile, 0, SEEK_END );

// get the file size

int Size = ftell( pFile );

// return the file pointer to begin of file if you want to read it

rewind( pFile );

// close stream and release buffer

fclose( pFile );

return Size;
} 
```

更多答案[cplusplus.com](http://www.cplusplus.com/forum/windows/10853/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T07:08:59.177

您可以使用 fseek 将自己定位在文件的末尾，并为此使用 ftell()：

```
FILE *fd;
fd = fopen("filename.txt","rb");
fseek ( fd, 0 , SEEK_END );
int fileSize = ftell(fd); 
```

filesize 将包含以字节为单位的大小。

格科德

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T07:11:42.467

我认为有一个标准的 C 函数，但我找不到它。

If your file size is limited, you can use the solution proposed by izomorphius.

If your file can be larger than 2GB then you can use the _filelengthi64 function (see [http://msdn.microsoft.com/en-us/library/dfbc2kec(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/dfbc2kec(v=vs.80).aspx)). Unfortunately, this is a Microsoft/Windows function so it's probably not available for other platforms (although you will probably find similar functions on other platforms).

**EDIT:** Look at afge2's answer for the standard C function. Unfortunately, I think this is still limited to 2GB.

# magento - magento中base_stuff和sales_flat_order中的东西之间的区别

> ID：10186646
> 
> 赞同：4
> 
> 时间：2012-04-17T07:02:15.357
> 
> 标签：magento

我注意到有一些像 base_shipping_invoiced 这样的字段，然后在 sales_flat_order 中有像 shipping_invoiced 这样的东西。

我想知道它们之间有什么区别！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T07:27:40.297

如果您使用多种货币， magento 支持`multiple currencies`并允许您设置一个so并且`base currency``base_stuff will be in your base currency``stuff will be in converted currency`

每次你实现一些与价格相关的东西时，你都应该遵循这种方法并确保使用正确的值

# java - 如何获取主类android的实例？

> ID：10186654
> 
> 赞同：1
> 
> 时间：2012-04-17T07:03:40.020
> 
> 标签：java, android

我有一个班级正在调用其他班级，这个班级是我的主要班级。是否有可能以某种方式获得这个主类的实例，在其他类中我可以调用主类方法？

如果是，那么这应该如何在带有 java 的 android 中完成？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:07:10.220

使用[**单例**](http://www.javaworld.com/javaworld/jw-04-2003/jw-0425-designpatterns.html)设计模式来实现这一点。

或者，如果您愿意，您也可以使用**静态方法**类比来重用这些方法。

*例如：*

```
public class Helper{
    public static void doSomething(){
        //do something here
    }
} 
```

现在在您的其他类中，使用上述方法，如下所示：

```
Helper.doSomething(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T07:10:07.977

如果您在主类中创建其他类，一种方法是将主类的当前实例（即“this”）作为参数传递给其他类的构造函数，并让它们存储该引用以供将来使用采用。

或者，您可以简单地将主类的当前实例作为参数传递给您正在调用的方法，该方法需要能够回调。

# jquery - 输入文本框时未出现键盘

> ID：10186655
> 
> 赞同：0
> 
> 时间：2012-04-17T07:03:40.380
> 
> 标签：jquery, android, textbox, keyboard

我有一个文本框，它采用文件名从 sdcard 读取特定文件。此文本框使用 jQuery 和 html5、javascript。所以它在andorid上加载webview。

但是当我启动活动时，我无法获得设备的软键盘。
所以我无法输入任何内容。

我已经在三星 Galaxy 选项卡、三星 Galaxy Ace 和 S2（全 android）上进行了测试。

我也附上了它的屏幕截图![在此处输入图像描述](../Images/7f9928fabec8be26c12e42a54d6f2913.png)

谢谢斯内哈
_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:07:14.013

在您的活动中，请确认`android:configChanges="orientation|keyboardHidden"`是否提供。如果您使用的是phonegap 和jquery mobile，则必须提供。并且还要检查`android:windowSoftInputMode="adjustPan"`。

# ruby-on-rails - 带有ajax的rails，respond_to混乱

> ID：10186660
> 
> 赞同：0
> 
> 时间：2012-04-17T07:04:01.400
> 
> 标签：ruby-on-rails, ajax, voting

我有一个投票系统，我希望投票响应是异步的。

在我的“展示”视图中，我有......

```
<%= render 'score' %> 
```

呈现

```
<% if @user.voted?(@lesson) %>
    <%= render 'voted' %>
<% else %>
    <%= render 'unvoted' %>
<% end %> 
```

进而呈现我的 _voted.html.erb

```
 #will display different images, colored or not based on selection
    <% if @user.up_voted?(@lesson) %>
        <div class = "up_arrow">
            <%= link_to image_tag("up_color.png", alt: "Uncheck vote"), 
                clear_vote_lesson_url(@lesson), :method => :post, remote: true %>
        </div>
        <div class="average_score"><%= @lesson.votes %></div>
        <div class= "down_arrow">
            <%= link_to image_tag("down_uncolor.png", alt: "Vote down"), 
                down_vote_lesson_url(@lesson), :method => :post, remote: true %>
        </div>
    <!-- user down voted then -->
    <% else %>
        <div class = "up_arrow">
            <%= link_to image_tag("up_uncolor.png", alt: "Vote up"), 
                up_vote_lesson_url(@lesson), :method => :post, remote: true %>
        </div>
        <div class="average_score"><%= @lesson.votes %></div>
        <div class= "down_arrow">
            <%= link_to image_tag("down_color.png", alt: "Uncheck vote"), 
                clear_vote_lesson_url(@lesson), :method => :post, remote: true %>
        </div>
    <% end %> 
```

我的 unvoted.html.erb 是

```
<div class = "up_arrow">
<%= link_to image_tag("up_uncolor.png", alt: "Vote up"), 
    up_vote_lesson_url(@lesson), :method => :post, remote: true %>
</div>
<div class="average_score"><%= @lesson.votes %></div>
<div class= "down_arrow">
    <%= link_to image_tag("down_uncolor.png", alt: "Vote down"), 
        down_vote_lesson_url(@lesson), :method => :post, remote: true %>
</div> 
```

然后最后在我的控制器中我有..

```
 def up_vote
    lesson = Lesson.find(params[:id])
    current_user.up_vote!(lesson)

    respond_to do |format|
        format.html { render :action => 'show'}
        format.js {   ????????        }
    end
end 
```

我还有一些动作，例如 down_vote，但它非常相似。

我想我不太确定在我的 format.js 块中放什么。我尝试将诸如 redirect_to course_path(lesson) 之类的东西放入并渲染“分数”，但投票图像没有得到更新。

有人可以帮忙吗？谢谢！

更新@dhoelzgen

我把它改成...

```
def up_vote
    lesson = Lesson.find(params[:id])
    current_user.up_vote!(lesson)
    render :score, :layout => false
    #redirect_to lesson_path(lesson)
end 
```

我也将渲染 :score, :layout => false 放在我的其他操作中。

在我看来我有

```
<div id="surrounding_container">
    <%= render 'score' %>
</div> 
```

随着

```
$('.up_arrow')
  .bind 'ajax:success', (event, data) ->
    $('#surrounding_container').html($(data))

$('.down_arrow')
  .bind 'ajax:success', (event, data) ->
    $('#surrounding_container').html($(data)) 
```

在我的课程.js.coffee 中。

我错过了什么吗？图像仍然不会异步更改

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:13:33.987

你有几个选择，我建议只返回渲染的分数（而不是 js / json），然后把它放到（周围的）div 标签中。

在没有这样的布局的情况下渲染分数

```
render :score, :layout => false 
```

然后使用 JavaScript（在我的示例中为 CoffeeScript）替换 div 标签的内容

```
$('.up_arrow a')
  .bind 'ajax:success', (event, data) ->
    $('#surrounding_container').html($(data)) 
```

或者，您可以将结果作为 json 返回并手动修改页面，但我认为上面的选项会减少工作量。

# java - 如何在java中使用webservices（Jersey）登录

> ID：10186661
> 
> 赞同：-1
> 
> 时间：2012-04-17T07:04:14.000
> 
> 标签：java, mysql, web-services, jersey

如何使用数据库在 java 中使用 webservices(JAX - RS) Jersey 登录。任何人都可以提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:53:32.267

看看[这个](http://www.vogella.com/articles/REST/article.html)。在此页面中检查 CRUD RESTful Web 服务示例。我想这就是你需要的。

# java - 如何将 POI HSSFWorkbook 转换为字节？

> ID：10186662
> 
> 赞同：52
> 
> 时间：2012-04-17T07:04:14.607
> 
> 标签：java, apache-poi

调用 Simple[`toBytes()`](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFWorkbook.html#getBytes%28%29)确实会产生字节，但 exel 会引发警告。

> 丢失文件信息

谷歌搜索给了我这个[链接](http://mail-archives.apache.org/mod_mbox/poi-user/200610.mbox/%3Cloom.20061017T235349-739@post.gmane.org%3E)并查看[Javadocs](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFWorkbook.html#getBytes%28%29) for worksheet 和 POI [HOW-TO](http://poi.apache.org/hpsf/how-to.html) say similar things 。基本上我不能不`Bytes`丢失一些信息而应该使用该`write`方法。

虽然 write 工作正常，但我真的需要将字节发送过来。有什么办法可以做到吗？那就是在没有任何警告的情况下获取字节。

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-04-17T08:45:30.163

正如那个邮件列表帖子所说

> 调用[`HSSFWorkbook.getBytes()`](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFWorkbook.html#getBytes%28%29)不会返回重建完整 Excel 文件所需的所有数据。

您可以使用带有 a 的 write 方法[`ByteArrayOutputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/ByteArrayOutputStream.html)来获取字节数组。

```
ByteArrayOutputStream bos = new ByteArrayOutputStream();
try {
    workbook.write(bos);
} finally {
    bos.close();
}
byte[] bytes = bos.toByteArray(); 
```

（`close`a 并不真正需要调用`ByteArrayOutputStream`，但恕我直言，无论如何包含它是一种很好的风格，以防它后来更改为不同类型的流。）

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-04-17T08:45:38.257

怎么样：

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
workbook.write(baos);
byte[] xls = baos.toByteArray(); 
```

为了得到一个完整的 excel 文件，你必须调用 write(OutputStream) 方法。如果你想从中得到字节，只需给出一个 ByteArrayOutputStream

# django - 无法使用普通 Ubuntu Linux 用户访问 Django 中的 PostgreSQL 数据库

> ID：10186672
> 
> 赞同：1
> 
> 时间：2012-04-17T07:04:52.853
> 
> 标签：django, postgresql, ubuntu

我正在 Ubuntu 11.10 中学习用户`PostgreSQL`和`Django`一起使用，我发现我需要切换到我`"postgres"`在终端（通过`"sudo su postgres"`）中安装 PostgreSQL（）时创建的用户，以便创建然后访问数据库以在 Django 中使用. 不幸的是，`"postgres"`用户在我的本地文件系统上没有文件写入权限，所以当我尝试执行某些操作时，例如将模型对象添加到具有图像字段的数据库中，我被阻止了。但是，如果我在终端中切换到我的普通 Ubuntu 用户名并尝试访问我在 Django 开发服务器上的管理站点，我会收到如下错误：

```
OperationalError at /admin/

FATAL:  Peer authentication failed for user "postgres"

Request Method:     GET
Request URL:    http://127.0.0.1:8000/admin/
Django Version:     1.3.1
Exception Type:     OperationalError
Exception Value:    

FATAL:  Peer authentication failed for user "postgres"

Exception Location:     /usr/local/lib/python2.7/dist-packages/django/db/backends/postgresql_psycopg2/base.py in _cursor, line 140
Python Executable:  /usr/bin/python
Python Version:     2.7.2 
```

我正在尝试阅读 PostgreSQL 文档，以使我的普通用户可以访问我为 Django 项目创建的数据库，但我无法弄清楚，因为我不了解 PostgreSQL 角色/用户之间的关系和 Ubuntu 用户。有人可以向我解释一下如何让我的普通 Ubuntu 用户名访问我在 PostgreSQL 中的数据库吗？我可能需要一个特定的指令列表，因为我试图使用 PostgreSQL 文档将它拼凑在一起，但我完全迷失了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T12:56:57.600

cfedermann 是正确的；这是问题的副本：

[Django 与 PostgreSQL 的连接：“对等身份验证失败”](https://stackoverflow.com/questions/8167602/django-connection-to-postgresql-peer-authentication-failed)

解决方案是一样的。在我的 Django 项目的“settings.py”文件中，在 DATABASES 部分下，我的“HOST”被设置为空字符串，因为那里有一个内置注释（意思是 Django 开发人员编写的注释），字面意思是说，“设置为本地主机的空字符串。” 显然这不是真的，因为只有在我明确输入“localhost”之后，我才能以我的默认 Linux 用户名连接到我的 psql 数据库。

我想这里的教训是，对于所有试图在开发中与 postgresql 一起使用的 Django 其他新手，请确保在“settings.py”文件中输入“LOCALHOST”，否则将无法连接到存储在您自己机器上的 psql 数据库！

再次感谢 cfedermann 指出我的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:00:06.687

[Postgres 身份说明](http://www.postgresql.org/docs/current/static/auth-methods.html#AUTH-IDENT)

可能不允许您的普通用户从本地主机登录。如果您的 django 项目与 PG 数据库在同一台机器上运行，那么您需要检查 pg_ident.conf 文件。

基本上，您可以设置 postgres 以便您的 unix 用户自动映射到 postgre 用户，因此当您运行 pgsql 时它会尝试登录。您可以阻止用户登录外部 IP 或本地主机。因此，在摆弄 Django 设置之前，请先检查这些设置。

否则试试这个

好吧，你应该这样做

```
sudo passwd postgres 
```

然后输入 unix postgres 用户的密码

```
su postgres
psql
create database djangodb;
create role djangouser with password 'something'; 
```

在您的 settings.py 文件中尝试这些用户详细信息。更多关于 postgres 的[信息在这里](http://www.postgresql.org/docs/9.1/static/sql-createrole.html)

还

[Ident 方法](http://www.postgresql.org/docs/9.1/static/auth-methods.html) 和[pg_hba.conf 文件](http://www.postgresql.org/docs/9.1/static/auth-pg-hba-conf.html)

这对你有帮助吗？

# java - “-”字符的 Lucene 索引问题

> ID：10186675
> 
> 赞同：18
> 
> 时间：2012-04-17T07:05:15.933
> 
> 标签：java, lucene, indexing, escaping, character

我在使用包含“-”字符的索引词的 Lucene 索引时遇到问题。

它适用于某些包含“-”的单词，但不适用于所有单词，我找不到原因，为什么它不起作用。

我正在搜索的字段经过分析并包含带有和不带有“-”字符的单词版本。

我正在使用分析器：org.apache.lucene.analysis.standard.StandardAnalyzer

这里有一个例子：

如果我搜索“gsx-*”我得到一个结果，索引字段包含“SUZUKI GSX-R 1000 GSX-R1000 GSXR”

但如果我搜索“v-*”，我没有得到任何结果。预期结果的索引字段包含：“SUZUKI DL 1000 V-STROM DL1000V-STROMVSTROM V STROM”

如果我在没有“*”的情况下搜索“v-strom”，它可以工作，但如果我只搜索“v-str”，例如我不会得到结果。（应该有结果，因为它是用于实时搜索网店）

那么，两个预期结果之间有什么区别？为什么它适用于“gsx- *”但不适用于“v-* ”？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-17T07:42:20.947

我相信，StandardAnalyzer 会将连字符视为空格。因此，它会将您的查询`"gsx-*"`变为空`"gsx*"`，`"v-*"`因为 at 还消除了单字母标记。您在搜索结果中看到的字段内容是该字段的存储值，它完全独立于为该字段编制索引的术语。

所以你想要的是让“v-strom”作为一个整体成为一个索引词。`StandardAnalyzer`不适合这种文字。也许可以试试`WhitespaceAnalyzer`or `SimpleAnalyzer`。如果这仍然不能解决问题，您还可以选择将自己的分析器放在一起，或者只是从这两个开始并用进一步组合它们`TokenFilters`。[Lucene Analysis 包 Javadoc](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/all/org/apache/lucene/analysis/package-summary.html)中给出了很好的解释。

顺便说一句，不需要在索引中输入所有变体，例如 V-strom、V-Strom 等。这个想法是让同一个分析器在索引中和解析查询时将所有这些变体标准化为相同的字符串。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-17T20:48:36.103

[ClassicAnalyzer 将](http://lucene.apache.org/core/old_versioned_docs/versions/3_1_0/api/all/org/apache/lucene/analysis/standard/ClassicAnalyzer.html)“-”作为有用的非分隔符处理。据我了解 ClassicAnalyzer，它处理 '-' 就像 3.1 之前的 StandardAnalyzer 一样，因为 ClassicAnalyzer 使用[ClassicTokenizer](http://lucene.apache.org/core/old_versioned_docs/versions/3_1_0/api/all/org/apache/lucene/analysis/standard/ClassicTokenizer.html)将带有嵌入式'-' 的数字视为产品代码，因此整个事物被标记为一个术语。

当我在 Regenstrief Institute 时，我在升级 Luke 后注意到了这一点，因为 LOINC 标准医学术语（LOINC 由 RI 发起）由一个数字标识，后跟一个“-”和一个校验位，如“1-8”或“2857” -1'。我在 Luke 3.5.0 中使用 StandardAnalyzer 搜索“45963-6”之类的 LOINC 失败，但使用 ClassicAnalyzer 成功（这是因为我们使用 2.9.2 Lucene.NET 构建了索引）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-10-12T15:10:41.900

（基于 Lucene 4.7）[StandardTokenizer](https://lucene.apache.org/core/4_7_0/analyzers-common/index.html)将带连字符的单词分成两个。例如，将“chat-room”转换为“chat”、“room”，然后分别索引这两个单词，而不是索引为一个完整的单词。单独的词用连字符连接是很常见的：“sport-mad”、“camera-ready”、“quick-thinking”等等。很大一部分是连字符的名称，例如“Emma-Claire”。在进行全词搜索或查询时，用户希望在这些连字符中找到单词。虽然在某些情况下它们是单独的单词，但这就是 lucene 将连字符保留在默认定义之外的原因。

要在 中支持连字符`StandardAnalyzer`，您必须更改`StandardTokenizerImpl.java`从[jFlex](http://jflex.de/)生成的类。

请参阅此[链接](http://pvrworld-lucene.blogspot.com/)以获取完整指南。

您必须添加文件`SUPPLEMENTARY.jflex-macro`包含的以下行`StandardTokenizerImpl.jflex`。

```
 MidLetterSupp = ( [\u002D]  ) 
```

并在进行更改后提供`StandardTokenizerImpl.jflex`文件作为 jFlex 引擎的输入，然后单击生成。的输出将是`StandardTokenizerImpl.java`

并使用该类文件重建索引。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-14T06:21:40.600

建议使用 ClassicAnalzer 索引包含产品代码（如“GSX-R1000”）的文本。它将将此视为一个单独的术语，并且不会拆分其部分。但例如文本“Europe/Berlin”将被 ClassicAnalzer 拆分为“Europe”和“Berlin”两个词。这意味着如果您有一个由 ClassicAnalyzer 索引的文本，其中包含该短语

```
Europe/Berlin GSX-R1000 
```

您可以搜索“欧洲”、“柏林”或“GSX-R1000”。

但请注意您用于搜索的分析器。我认为搜索 Lucene 索引的最佳选择是 KeywordAnalyzer。使用 KeywordAnalyzer，您还可以搜索文档中的特定字段，并且可以构建复杂的查询，例如：

```
(processid:4711) (berlin) 
```

此查询将搜索带有短语“berlin”的文档，以及包含数字 4711 的字段“processid”。

但是，如果您在索引中搜索“欧洲/柏林”这个短语，您将得不到任何结果！这是因为 KeywordAnalyzer 没有更改您的搜索词组，但“Europe/Berlin”这个词组被 ClassicAnalyzer 分成了两个单独的词。这意味着您必须分别搜索“欧洲”和“柏林”。

要解决此冲突，您可以使用以下代码在适合您需要的搜索查询中翻译用户输入的搜索词：

```
QueryParser parser = new QueryParser("content", new ClassicAnalyzer());
Query result = parser.parse(searchTerm);
searchTerm = result.toString("content"); 
```

此代码将翻译 serach 短语

```
Europe/Berlin 
```

进入

```
europe berlin 
```

这将产生预期的文档集。

**注意：**这也适用于更复杂的情况。搜索词

```
Europe/Berlin GSX-R1000 
```

将被翻译成：

```
(europe berlin) GSX-R1000 
```

这将使用 KeyWordAnalyzer 正确搜索所有组合的短语。

# c# - 如何使用 pdfsharp 复制/裁剪文本？

> ID：10186680
> 
> 赞同：1
> 
> 时间：2012-04-17T07:05:36.760
> 
> 标签：c#, asp.net, pdf, pdfsharp

我想从现有的pdf中复制一些带有（x，y）的文本或区域并将其粘贴到新的pdf中。我正在使用 pdfsharp。如何做到这一点？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:59:12.587

如果要提取文本，请查看以下线程：

[C# PDFSharp：如何从 PDF 中去除文本的示例？](https://stackoverflow.com/questions/9591992/c-sharp-pdfsharp-examples-of-how-to-strip-text-from-pdf)

[C# 使用 PdfSharp 从 PDF 中提取文本](https://stackoverflow.com/questions/10141143/c-sharp-extract-text-from-pdf-using-pdfsharp)

如果要提取页面的图像（或其中的一部分），请查看此线程：

[在 C# 中将 PDF 导出为 JPG](https://stackoverflow.com/questions/8782942/export-pdf-to-jpgs-in-c-sharp)

# c# - System.Linq.Dynamic - 我可以在 WHERE 语句中使用 IN 子句吗

> ID：10186683
> 
> 赞同：15
> 
> 时间：2012-04-17T07:05:53.030
> 
> 标签：c#, .net, linq, dynamic

我有动态 linq WHERE 语句：

```
dataContext.Table.Where("id = 0 Or id = 1 Or id = 2 Or ..."); 
```

我想更改为：

```
dataContext.Table.Where("id IN (0, 1, 2, ...)"); 
```

但它不起作用。我怎样才能做到这一点以获得更好的性能？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-17T18:10:59.137

来自[如何在动态 linq 查询中使用“包含”或“喜欢”？](https://stackoverflow.com/a/2456070/145999)

```
//edit: this is probably broken, see below
ids = new int[] {1,2,3,4};
dataContext.Table.Where("id.Contains(@0)", ids); 
```

旁白：在动态 linq 表达式中使用占位符是一种很好的做法。否则，您可能会面临 linq 注入攻击（[Is Injection possible through Dynamic LINQ?](https://stackoverflow.com/a/9022254/145999)）

* * *

编辑：

实际上，我认为我搞砸了。不幸的是，我目前无法对此进行测试。但我认为在这种情况下正确的语法应该是`dataContext.Table.Where("@0.Contains(id)",ids);`，而不是相反，并且该版本**不能**开箱即用。

有关将此功能添加到动态链接的方法，请参见[此处。](http://blog.walteralmeida.com/2010/05/advanced-linq-dynamic-linq-library-add-support-for-contains-extension-.html)您需要为此修改库。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-17T07:34:17.117

```
var ids = new int[] {1,2,3,4};
dataContext.Table.Where(f => ids.Contains(f.id)) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-21T13:12:20.683

似乎在 System.Linq.Dynamic 的 1.0.4 版本中，我们可以使用以下语法，因为它是在已经引用的博客中制作和呈现的： [这里](http://blog.walteralmeida.com/2010/05/advanced-linq-dynamic-linq-library-add-support-for-contains-extension-.html)`dataContext.Table.Where("@0.Contains(**outerIt**.id)",ids);`

# python - 使用 'pip | 部署 Python 包的任何方法 easyinstall' + '*.pyc only' + 'flat namespace packges' + virtualenv？

> ID：10186686
> 
> 赞同：6
> 
> 时间：2012-04-17T07:06:02.753
> 
> 标签：python, virtualenv, packaging, setuptools

目标：

*   利用现代 Python 打包工具集将专有包部署/安装到一些 virtualenv 中。
*   已安装的软件包应仅包含已编译的 *.pyc（或 *.pyo），不包含源文件。
*   有几个包，供应商名称（这里我们为我们的工作室选择*dgmx*）用作包名称。因此，安装的软件包将类似于*dgmx/alucard*、*dgmx/banshee*、*dgmx/carmilla*，...
*   已安装软件包的文件层次结构应类似于`python setup.py install --single-version-externally-managed`或`pip install`。请参阅[我为什么无法通过手动 *python setup.py install* 获得 *pip install* 的确切结果？](https://stackoverflow.com/questions/10172286/how-come-i-cant-get-the-exactly-result-to-pip-install-by-manually-python-set/10173805#10173805)

简而言之：

我喜欢仅通过编译的 *.pyc（或 *.pyo）文件将专有命名空间包部署到 virtualenv 中，其中文件/目录层次结构仅反映命名空间，其中许多*ooxx.egg*路径污染了*sys.path 。*

 *我尝试过的东西：

1.  `python setup.py bdist_egg --exclude-source-files`然后`easy_install ooxx.egg`。
    *   污染每个命名空间包的“sys.path”。
2.  `python setup.py install --single-version-externally-managed`.
    *   不只是 *.pyc。
    *   “install_requires”被忽略了！
    *   需要手动放置*ooxx.egg-info/installed-files.txt*以使*卸载*正常工作。
3.  `pip install .`在“setup.py”的位置。
    *   不只是 *.pyc。
4.  `pysetup install .`在“setup.py”的位置。
    *   不只是 *.pyc。

**更新**：

我目前的想法是遵循方法2。

*   `python setup.py egg_info --egg-base .`# 获取 requires.txt
*   `python setup.py install --single-version-externally-managed --record installed-files.txt`# 获取安装文件.txt
*   通过“requires.txt”手动安装其他依赖
*   通过“installed-files.txt”手动删除已安装的源文件（*.py）
*   从“installed-files.txt”中删除源文件（*.py）并将其放入已部署的“ooxx.egg-info/installed-files.txt”

参考：

1.  [从 setuptools 迁移到 pip+virtualenv](https://stackoverflow.com/questions/4981174/migrating-to-pipvirtualenv-from-setuptools)
2.  [使用 setuptools 仅安装 .pyc（python 编译）](https://stackoverflow.com/questions/5730686/installing-only-pyc-python-compiled-with-setuptools)
3.  [我可以仅将 Python .pyc 文件部署到 Google App Engine 吗？](https://stackoverflow.com/questions/5002150/can-i-deploy-python-pyc-files-only-to-google-app-engine)
4.  [为什么我无法通过手动 *python setup.py install* 获得 *pip install* 的确切结果？](https://stackoverflow.com/questions/10172286/how-come-i-cant-get-the-exactly-result-to-pip-install-by-manually-python-set/10173805)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-17T10:17:18.103

一些技巧可能会有所帮助：

将您的源代码编译成`.pyc`，将它们压缩到一个`.zip`文件中。

用一个简单的模块编写一个新模块，它所做的只是`.zip`将`sys.path`.

因此，当您导入此模块时，`.zip`路径中。您所要做的就是在自定义步骤中`setup.py`，将 zip 文件复制到适当的位置。*

# iphone - 对取表视图控制器的数量感到困惑

> ID：10186693
> 
> 赞同：-1
> 
> 时间：2012-04-17T07:06:29.623
> 
> 标签：iphone, objective-c, ios, xcode, uitableview

我在一个视图 (ViewOne) 中有 6 个按钮。每个按钮都应该在同一个视图上显示一个 tableView。（按钮不应该消失，表格视图应该出现在剩余的视图上）

到目前为止，我已经使用了一个视图控制器（Button1 的 ViewTwo）并使用所需的数据推送视图

```
[self.view addSubview:ViewTwo.view]; 
```

由于 tableView 中的数据不同，我应该为每个 tableView 取 6 个 ViewControllers 还是有其他容易实现的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:10:38.427

您可以使用一个 UITableView 而不是 6 个不同的 viewController。并尝试使用按钮按下事件的 tableView 的 reloadData 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T07:14:49.743

不，不需要为每个表格视图添加不同的视图，您只需在单击每个按钮时将数据加载到（NSArray 或 NSDictionary，无论您使用什么来显示 cell.textlable.text）。

1.首先从（NSArray/NSDictionary）中删除所有对象

2.在（NSArray/NSDictionary）中添加新对象。

3.然后重新加载您的表格视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T07:19:03.930

无需占用 6 个 UIViewController。您可以在一个视图中执行此功能，每次检查单击哪个按钮并重新加载 tableview 数据时。这是执行此操作的最佳方法。

# android - PreferenceActivity Android 4.0 及更早版本

> ID：10186697
> 
> 赞同：36
> 
> 时间：2012-04-17T07:06:33.873
> 
> 标签：android, preferenceactivity

例如，在 Android 4.0 的 ApiDemos 中尝试不同的偏好活动，我在代码中看到某些方法在 PreferencesFromCode.java 中已被弃用。

所以我的问题是：如果我使用 PreferenceFragment，它将适用于所有版本还是仅适用于 3.0 或 4.0 及更高版本？

如果是这样，我应该使用什么也适用于 2.2 和 2.3？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-04-21T10:59:21.017

`PreferenceFragment`不适用于 2.2 和 2.3（仅 API 级别 11 及以上）。如果你想提供最好的用户体验并且仍然支持旧的 Android 版本，这里的最佳实践似乎是实现两个`PreferenceActivity`类并在运行时决定调用哪一个。但是，此方法仍然包括调用已弃用的 API，但您无法避免这种情况。

例如，您有一个`preference_headers.xml`：

```
<preference-headers xmlns:android="http://schemas.android.com/apk/res/android" > 
    <header android:fragment="your.package.PrefsFragment" 
        android:title="...">
        <extra android:name="resource" android:value="preferences" />
    </header>
</preference-headers> 
```

和一个标准`preferences.xml`（自从较低的 API 级别以来没有太大变化）：

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" android:title="...">
    ...
</PreferenceScreen> 
```

然后你需要一个实现`PreferenceFragment`：

```
public static class PrefsFragment extends PreferenceFragment {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preferences);
    }
} 
```

`PreferenceActivity`最后，对于支持或不支持的 API 级别，您需要两个实现`PreferenceFragments`：

```
public class PreferencesActivity extends PreferenceActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preferences);
        addPreferencesFromResource(R.xml.other);
    }
} 
```

和：

```
public class OtherPreferencesActivity extends PreferenceActivity {
    @Override
    public void onBuildHeaders(List<Header> target) {
        loadHeadersFromResource(R.xml.preference_headers, target);
    }
} 
```

在您想向用户显示首选项屏幕时，您决定从哪一个开始：

```
if (Build.VERSION.SDK_INT < 11) {
    startActivity(new Intent(this, PreferencesActivity.class));
} else {
    startActivity(new Intent(this, OtherPreferencesActivity.class));
} 
```

所以基本上，每个片段都有一个 xml 文件，为 API 级别 < 11 手动加载每个 xml 文件，并且两个活动都使用相同的首选项。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-04T22:42:09.327

@Mef您的答案可以进一步简化，这样您就不需要 PreferencesActivity 和 OtherPreferencesActivity （有 2 个 PrefsActivities 是一个 PITA）。

我发现您可以将 onBuildHeaders() 方法放入您的 PreferencesActivity 中，并且 v11 之前的 Android 版本不会引发错误。在 onBuildHeaders 中拥有 loadHeadersFromResource() 并没有在 2.3.6 上抛出异常，但在 Android 1.6 上确实如此。不过经过一些修改后，我发现以下代码适用于所有版本，因此只需要一项活动（大大简化了问题）。

```
public class PreferencesActivity extends PreferenceActivity {
    protected Method mLoadHeaders = null;
    protected Method mHasHeaders = null;

    /**
     * Checks to see if using new v11+ way of handling PrefFragments.
     * @return Returns false pre-v11, else checks to see if using headers.
     */
    public boolean isNewV11Prefs() {
        if (mHasHeaders!=null && mLoadHeaders!=null) {
            try {
                return (Boolean)mHasHeaders.invoke(this);
            } catch (IllegalArgumentException e) {
            } catch (IllegalAccessException e) {
            } catch (InvocationTargetException e) {
            }
        }
        return false;
    }

    @Override
    public void onCreate(Bundle aSavedState) {
        //onBuildHeaders() will be called during super.onCreate()
        try {
            mLoadHeaders = getClass().getMethod("loadHeadersFromResource", int.class, List.class );
            mHasHeaders = getClass().getMethod("hasHeaders");
        } catch (NoSuchMethodException e) {
        }
        super.onCreate(aSavedState);
        if (!isNewV11Prefs()) {
            addPreferencesFromResource(R.xml.preferences);
            addPreferencesFromResource(R.xml.other);
        }
    }

    @Override
    public void onBuildHeaders(List<Header> aTarget) {
        try {
            mLoadHeaders.invoke(this,new Object[]{R.xml.pref_headers,aTarget});
        } catch (IllegalArgumentException e) {
        } catch (IllegalAccessException e) {
        } catch (InvocationTargetException e) {
        }   
    }
} 
```

这样，您只需要一个活动，AndroidManifest.xml 中的一个条目和调用首选项时的一行：

```
startActivity(new Intent(this, PreferencesActivity.class); 
```

2013 年 10 月更新：Eclipse/Lint 将警告您使用已弃用的方法，但忽略该警告。我们只在必要时才使用该方法，即当我们没有 v11+ 样式偏好并且必须使用它时，这没关系。考虑到已弃用的代码后，不要害怕它，Android 不会很快删除已弃用的方法。如果它真的发生了，你甚至不再需要这个类，因为你将被迫只针对较新的设备。不推荐使用的机制会警告您在最新的 API 版本上有更好的方法来处理某些事情，但是一旦您考虑了它，您就可以放心地忽略该警告。删除对不推荐使用的方法的所有调用只会导致您的代码仅在较新的设备上运行 - 因此完全不需要向后兼容。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-01T15:55:17.900

有一个[新的库](https://github.com/saik0/UnifiedPreference)可能会有所帮助。

> UnifiedPreference 是一个库，用于处理 API v4 及更高版本的所有版本的 Android Preference 包。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-14T12:15:50.637

先前答案的问题在于，它将所有首选项堆叠到预 Honecomb 设备上的单个屏幕上（由于多次调用`addPreferenceFromResource()`）。

如果您需要第一个屏幕作为列表，然后是带有首选项的屏幕（例如使用首选项标题），您应该使用[官方指南来兼容首选项](http://developer.android.com/guide/topics/ui/settings.html#BackCompatHeaders)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-25T14:55:31.250

我想指出的是，如果您从[http://developer.android.com/guide/topics/ui/settings.html#PreferenceHeaders](http://developer.android.com/guide/topics/ui/settings.html#PreferenceHeaders)开始，一直到“支持带有首选项标头的旧版本”部分，它将更有意义。那里的指南很有帮助，而且效果很好。这是遵循他们的指南的明确示例：

因此，在 HoneyComb 之前从 android 系统的文件**preference_header_legacy.xml开始**

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
<Preference 
    android:title="OLD Test Title"
    android:summary="OLD Test Summary"  >
    <intent 
        android:targetPackage="example.package"
        android:targetClass="example.package.SettingsActivity"
        android:action="example.package.PREFS_ONE" />
</Preference> 
```

接下来使用 HoneyComb+ 为 android 系统创建文件**preference_header.xml**

```
<preference-headers xmlns:android="http://schemas.android.com/apk/res/android">
<header 
    android:fragment="example.package.SettingsFragmentOne"
    android:title="NEW Test Title"
    android:summary="NEW Test Summary" />
</preference-headers> 
```

接下来创建一个**preferences.xml**文件来保存您的偏好...

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
        <CheckBoxPreference
        android:key="pref_key_auto_delete"
        android:summary="@string/pref_summary_auto_delete"
        android:title="@string/pref_title_auto_delete"
        android:defaultValue="false" />
</PreferenceScreen> 
```

接下来创建文件**SettingsActivity.java**

```
package example.project;
import java.util.List;
import android.annotation.SuppressLint;
import android.os.Build;
import android.os.Bundle;
import android.preference.PreferenceActivity;

public class SettingsActivity extends PreferenceActivity{
final static String ACTION_PREFS_ONE = "example.package.PREFS_ONE";

@SuppressWarnings("deprecation")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    String action = getIntent().getAction();
    if (action != null && action.equals(ACTION_PREFS_ONE)) {
        addPreferencesFromResource(R.xml.preferences);
    }
    else if (Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB) {
        // Load the legacy preferences headers
        addPreferencesFromResource(R.xml.preference_header_legacy);
    }
}

@SuppressLint("NewApi")
@Override
public void onBuildHeaders(List<Header> target) {
    loadHeadersFromResource(R.xml.preference_header, target);
}
} 
```

接下来创建类**SettingsFragmentOne.java**

```
package example.project;
import android.annotation.SuppressLint;
import android.os.Bundle;
import android.preference.PreferenceFragment;

@SuppressLint("NewApi")
public class SettingsFragmentOne extends PreferenceFragment {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.xml.preferences);
}
} 
```

**AndroidManifest.xml**`<application>` ，在我的标签之间添加了这个块

```
<activity 
   android:label="@string/app_name"
   android:name="example.package.SettingsActivity"
   android:exported="true">
</activity> 
```

最后，对于`<wallpaper>`标签...

```
<wallpaper xmlns:android="http://schemas.android.com/apk/res/android"
android:description="@string/description"
android:thumbnail="@drawable/ic_thumbnail"
android:settingsActivity="example.package.SettingsActivity"
/> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-17T18:45:10.623

我正在使用[这个库](https://github.com/Machinarius/PreferenceFragment-Compat)，它有一个`AAR`in，`mavenCentral`因此如果您正在使用它，您可以轻松地包含它`Gradle`。

`compile 'com.github.machinarius:preferencefragment:0.1.1'`

# android - 我们如何在android中获取带有计时器的进度对话框的大小

> ID：10186699
> 
> 赞同：0
> 
> 时间：2012-04-17T07:07:05.357
> 
> 标签：android

我正在使用进度对话框。默认情况下它会全屏打开，所以我可以调整它的大小。

请让我知道答案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:14:54.527

查看文档（[ProgressDialog](http://developer.android.com/reference/android/app/ProgressDialog.html)）我找不到任何方法来更改此对话框的大小。

我认为您有 2 个选项，您可以扩展`ProgressDialog`类或创建自定义对话框。有关 Android 中对话框的更多信息在这里：[对话框](http://developer.android.com/guide/topics/ui/dialogs.html)

# debugging - 在 IE 开发工具中查找 xPath 类似于 Firebug 中的 $x(xPathString) 控制台功能

> ID：10186700
> 
> 赞同：3
> 
> 时间：2012-04-17T07:07:07.867
> 
> 标签：debugging, xpath, selenium, firebug, ie-developer-tools

我在 Firebug 中使用 $x 控制台功能非常成功，通常我在 Firebug 的控制台中编写：

```
$x("//div/whatever my xpath string is") 
```

然后我执行我的控制台功能，我得到了一个结果。有人知道可以在 IE Developer Tools 中使用的类似功能吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-05T09:30:54.593

[http://code.google.com/p/fire-ie-selenium/](http://code.google.com/p/fire-ie-selenium/) - 你在寻找这样的东西吗？

# java - Android + ORMLite + java.sql.Timestamp

> ID：10186705
> 
> 赞同：1
> 
> 时间：2012-04-17T07:07:15.560
> 
> 标签：java, android, sqlite, ormlite

我有一个使用 ORMLite 的 Android 项目。一切正常，但对于数据库中的某些字段，它`java.sql.Timestamp`用作字段类型。它在我之前使用的 ORMLite 4.10 上运行良好。但是现在我需要更新 ORMLite，并且遇到了问题。当我将 ORMLite 更新到更新版本并运行它时，应用程序抛出异常：

```
W/System.err(  615): java.sql.SQLException: ORMLite can't store unknown class
    class java.sql.Timestamp for field 'createDate'.
    Serializable fields must specify dataType=DataType.SERIALIZABLE 
```

之前的 createDate 字段没有 dataType 参数。但是当我添加它时，错误并没有修复，应用程序也抛出了这个异常:(。项目已经在市场上，所以我不能将 dataType 更改为其他类型（如 Date），也可以删除这个字段。

我应该在较新的 ORMLite 上使用什么作为时间戳？还是 ORMLite 错误？

**更新：** 通过将时间戳类型更改为可序列化类型来修复它。现在代码如下所示：

```
@DatabaseField(dataType = DataType.SERIALIZABLE)
public Serializable createDate;

public Timestamp getCreateDate()
{
    return (Timestamp)createDate;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T17:44:34.307

对此@st1ing 感到抱歉。这当然可能是[ORMLite](http://ormlite.com/)中的一个错误，但我怀疑它可能是不兼容的。在 4.14 版本中，我们必须更改`Serializable`字段的处理方式。 [升级说明](http://ormlite.com/docs/4.14)在线。去引用：

> 此外，序列化类型现在还必须指定它们的 dataType 值。您应该使用`DataType.SERIALIZABLE`来继续在数据库中存储序列化对象。这将允许我们在未来添加对其他序列化类型的直接支持，而不会破坏向后兼容性。
> 
> 如果您已经将`Serializable`数据（`byte[]`或其他对象）存储在数据库中，那么您需要在字段中添加以下内容：

```
@DatabaseField(dataType = DataType.SERIALIZABLE)
Serializable field; 
```

实际上，例外是试图给您提示如何解决您的问题：

```
Serializable fields must specify dataType=DataType.SERIALIZABLE 
```

因此，请尝试将其添加到您的`Timestamp`领域。让我知道它是否有效。

# c# - 在 XNA 中获得完美的精灵旋转

> ID：10186706
> 
> 赞同：2
> 
> 时间：2012-04-17T07:07:16.870
> 
> 标签：c#, xna, 2d, game-physics

当我旋转发射子弹的飞船时，我在更新子弹的位置时遇到了问题。目前，代码几乎可以工作，只是在大多数角度，子弹不是从我想要的地方发射的。有时它会比它应该在的中心稍微向上发射，有时会向下发射。我很确定这与三角函数有关，但我很难找到问题所在。

这段代码在构造函数中；它根据船的位置 ( `sp.position`) 和旋转 ( `Controls.rotation`) 设置子弹的初始位置和旋转：

```
this.backgroundRect = new RotatedRectangle(Rectangle.Empty, Controls.rotation);
//get centre of ship
this.position = new Vector2(sp.getPosition().X + sp.getTexture().Width/2, 
(sp.getPosition().Y + sp.getTexture().Height / 2));

//get blast pos
this.position = new Vector2((float)(this.position.X + (sp.getTexture().Width / 2 * 
Math.Cos(this.backgroundRect.Rotation))), (float)(this.position.Y + 
(sp.getTexture().Width / 2 * Math.Sin(this.backgroundRect.Rotation))));

//get blast pos + texture height / 2
this.position = new Vector2((float)(this.position.X + (this.texture.Height / 2 * 
Math.Cos(this.backgroundRect.Rotation))), (float)(this.position.Y + 
(this.texture.Height / 2 * Math.Sin(this.backgroundRect.Rotation))));

this.backgroundRect = new RotatedRectangle(new Rectangle((int)this.position.X, 
(int)this.position.Y, this.texture.Width, this.texture.Height), Controls.rotation);
speed = defSpeed; 
```

然后在更新方法中我使用以下代码；我很确定这可以正常工作：

```
this.position.X = this.position.X + defSpeed * 
(float)Math.Cos(this.getRectangle().Rotation);
this.position.Y = this.position.Y + defSpeed * 
(float)Math.Sin(this.getRectangle().Rotation);
this.getRectangle().CollisionRectangle.X = (int)(position.X + defSpeed * 
(float)Math.Cos(this.getRectangle().Rotation));
this.getRectangle().CollisionRectangle.Y = (int)(position.Y + defSpeed * 
(float)Math.Sin(this.getRectangle().Rotation)); 
```

另外我应该提到，当我旋转它时，我的船没有正常工作，因为原点（旋转中心）是（0,0）。为了解决这个问题，我将原点更改为船的中心（宽度/2，高度/2），并将这些值添加到绘图矩形中，以便精灵可以正确绘制。我想这可能是问题所在，并认为有更好的方法来解决这个问题。顺便说一下，游戏是2D的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:54:19.583

问题是精灵没有绘制在它们应该在的位置上。在计算中心位置时，您假设精灵没有旋转。这会引起一些麻烦。此外，旋转任意向量并不像您做的那么容易。当向量在 x 轴上时，您只能通过将其分量乘以 sin/cos 来旋转向量。

以下是旋转任意向量的方法：

```
Vector2 vecRotate(Vector2 vec, double phi)
{
    double length = vec.Length(); //Save length of vector
    vec.Normalize();
    double alpha = Math.Acos(vec.X); //Angle of vector against x-axis
    if(vec.Y < 0)
        alpha = 2 * Math.PI - alpha
    alpha += phi;
    vec.X = Math.Cos(alpha) * length;
    vec.Y = Math.Sin(alpha) * length;
    return vec;
} 
```

确保角度以弧度为单位。有了它，您可以计算船的正确位置：

```
Vector2 ShipCenter = sp.Position() + vecRotate(new Vector2(sp.getTexture().Width/2, sp.getTexture().Height/2), Controls.Rotation); 
```

您可以使用相同的函数来确定子弹中心的位置。我不完全知道，你想把子弹放在哪里。我假设它位于右边缘的中心：

```
Vector2 offset = new Vector2(sp.getTexture.Width/2, 0);
this.position = ShipCenter + vecRotate(offset, Controls.Rotation); 
```

如果你再需要子弹左上角的位置，你可以更进一步：

```
this.position -= vecRotate(new Vector2(this.texture.Width/2, this.texture.Height/2), Controls.Rotation) 
```

但是，正如我所说，将船和子弹的位置作为中心位置可能更容易处理。这样做，您需要的三角函数要少得多。

# php - 在wordpress中选择当前类别，意外行为

> ID：10186713
> 
> 赞同：-1
> 
> 时间：2012-04-17T07:07:38.067
> 
> 标签：php, wordpress, categories

```
<ul class="main-nav">
                <li class="menu-item <?php if( is_category('one') || in_category('one') ) echo 'current_cat'; ?>">
                    <a href="/category/one/">one</a>
                </li>
                <li class="menu-item <?php if( is_category('two') || in_category('two') ) echo 'current_cat'; ?>">
                    <a href="/category/two/">two</a>
                </li>
                <li class="menu-item <?php if( is_category('three') || in_category('three') ) echo 'current_cat'; ?>">
                    <a href="/category/three/">three</a>
                </li>
                <li class="menu-item <?php if( is_category('four') || in_category('four') ) echo 'current_cat'; ?>">
                    <a href="/category/four/">four</a>
                </li>
                <li class="menu-item <?php if( is_category('five') || in_category('five') ) echo 'current_cat'; ?>">
                    <a href="/category/five/">five</a>
                </li>
            </ul> 
```

底线是在主页（index.php）上分配了类别（实际上理论上这不应该发生），仔细检查我意识到主要的类别由页面上的第一个帖子决定 - 在他属于哪个类别。假设主页上出现了“2”类别的最新消息 - 那么索引页面是“2”类别......问题是什么以及如何解决它对我来说不是很清楚的行为？哪些功能没有考虑到？感谢您未来的回答。

我请求原谅我蹩脚的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T12:41:50.467

首先，确保代码没有在循环内运行，这可能是关键问题。如果即使在循环之外也发生这种情况，您可以通过如下修改条件来避免在主页上触发它：

```
if( is_category('one') || (in_category('one') and is_single()) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T07:49:38.030

If I understand what you are asking, you don't want this code to trigger on the home page?

to make sure this is only run on individual post pages put this all between:

```
<?php if(is_single(): ?>
      <!-- your code-->
<?php endif; ?> 
```

[is_single](http://codex.wordpress.org/Function_Reference/is_single)
stll I'm not sure what you are asking.

# objective-c - NSLocalizedString 在 Objective C 中使用外部源？

> ID：10186716
> 
> 赞同：0
> 
> 时间：2012-04-17T07:08:00.010
> 
> 标签：objective-c, localization, localizable.strings

有没有办法让本地化或 Localizable.strings 从 NSBundle 之外的目录中读取？

我试图让我的应用程序从通过服务器下载的文件中读取本地化，有没有办法做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T13:17:02.163

您必须编写自己的 MyLocalizedString 函数来手动读取文件。.strings 文件实际上是一种旧类型的属性列表，因此可以使用如下`NSPropertyListSerialization`类读取它：

```
id plist = [NSPropertyListSerialization
               propertyListWithData:[NSData dataWithContentsOfFile:stringsFilePath]
                            options:0
                             format:NULL
                              error:&error]; 
```

`plist`只是一个 NSDictionary，所以你可以从结果中读取一个字符串值，如下所示：

```
[plist objectForKey:@"my_string"]; 
```

您可能应该实现某种缓存，这样您就不会为每个字符串查找解析整个文件。

请注意，如果您正在使用`genstrings`和其他相关的命令行工具，您可以使用以下选项来指定自定义查找函数的名称：

```
Usage: genstrings [OPTION] file1.[mc] ... filen.[mc]

...[snip]...

-s substring             substitute 'substring' for NSLocalizedString. 
```

如果这些字符串文件被上传到服务器，您可以通过首先将它们转换为二进制 plist 格式来稍微提高应用程序的性能（这是 Xcode 在构建期间通常会做的事情）：

```
plutil -convert binary1 myStrings.strings 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T13:10:29.670

你必须自己把这些碎片拼凑起来。没有任何内置工具可以做到这一点。您的本地化可以只是序列化字典，其中开发语言字符串作为键，本地化字符串作为值。您可以序列化为 plist，这可能最方便编辑，也可以使用键控存档，这可能更紧凑。

# asp.net-mvc-3 - 在项目中重用 jquery 对话框模式弹出窗口，包含各种内容

> ID：10186719
> 
> 赞同：0
> 
> 时间：2012-04-17T07:08:32.413
> 
> 标签：asp.net-mvc-3, jquery-ui, jquery

我有一个要求，其中 jquery modal popup（骨架）应该是可重复使用的，只有对话框内的内容应该使用部分视图进行更改。

我有一个带有模态弹出框架的部分视图（目的是我想在整个项目中重用此代码）

单击 jqgrid 列图像时，我触发了一个功能

函数 RenderModalPopup(rowid, tableid, event) { 调试器;

```
$.ajax({
    url: '/Edit/GetPopupPartial',
    type: 'POST',
    async: false,
    success: function (data) {
        debugger;
        $('#showDialog').load(data);
 }
}); 
```

我将调用一个操作方法，该方法又将加载部分视图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:23:04.270

创建一个像common.js这样的通用js并将函数放入其中

```
function RenderModalPopup(rowid, tableid, event) { debugger; 
```

$.ajax({ url: '/Edit/GetPopupPartial', type: 'POST', async: false, success: function (data) { debugger; $('#showDialog').load(data); } });

并从任何页面调用该函数

RenderModalPopup();

# android - 调用 Androids Sqlite 数据库的 close() 后会发生什么？

> ID：10186725
> 
> 赞同：1
> 
> 时间：2012-04-17T07:09:20.190
> 
> 标签：android, sqlite

关于何时关闭 Sqlite 数据库有很多问题。但在此之前，问题是为什么有人要调用该方法。由于 Sqlite 被认为是符合 ACID 的，因此没有必要这样做。

但为了更好地理解，我想知道在 Android Sqlite 数据库上调用 close() 后会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:14:02.150

不应将*符合 ACID*的术语与打开的数据库连接为执行操作而持有的资源相混淆。调用`close()`会释放 Android 中 SQLite 数据库占用的资源。一旦调用它，就不能再使用 query、rawQuery、execSQL 等读取或写入数据。

# android - 从自定义列表视图中获取数据

> ID：10186729
> 
> 赞同：0
> 
> 时间：2012-04-17T07:09:43.133
> 
> 标签：android, listview

这是我的代码，

```
public class SecondScreenActivity extends Activity {
ListView foodJntListView;
ArrayList<Restaurent> restaurentData;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.second_screen);

    restaurentData = getFoodJnt();

    foodJntListView=(ListView)findViewById(R.id.listView_foodjnt);
    foodJntListView.bringToFront();

    // setting the adapter to the list 
    foodJntListView.setAdapter(new RestaurantBaseAdapter(this,restaurentData));

    //setting the onclick listener,activity on clicking on an item of the 
    foodJntListView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {
            // TODO Auto-generated method stub
            String hotelname=restaurentData.get(position).toString();
             //things to write
        }
    });
}

// get all the list of foodjoints

private ArrayList<Restaurent> getFoodJnt() {
    // TODO Auto-generated method stub
    ArrayList<Restaurent> results=new ArrayList<Restaurent>();

    Restaurent restrnt=new Restaurent();

    restrnt.setFoodJointname("Ashila");
    restrnt.setCuisine("Biriyani,Moughlai");
    restrnt.setAddress("Kolkata,E M Bypass");
    restrnt.setOpenhours("10:00am-10:00pm");
    results.add(restrnt);

    restrnt=new Restaurent();
    restrnt.setFoodJointname("Bhajohori Manna");
    restrnt.setCuisine("Bengali,Chinese");
    restrnt.setAddress("Kolkata,Esplanede");
    restrnt.setOpenhours("10:00am-10:00pm");
    results.add(restrnt);

    restrnt=new Restaurent();
    restrnt.setFoodJointname("Bar B Q");
    restrnt.setCuisine("Bengali,Chinese,Thai");
    restrnt.setAddress("Kolkata,Park Street");
    restrnt.setOpenhours("10:00am-10:00pm");
    results.add(restrnt);

    return results;
}

public void makeAToast(String str) {
    //yet to implement
    Toast toast = Toast.makeText(this, str, Toast.LENGTH_SHORT);
    toast.setGravity(Gravity.CENTER, 0, 0);
    toast.show();
} 
```

我可以显示一个带有一堆文本视图的自定义列表视图作为它的项目，但是，我想在列表视图上获取餐厅 setOnItemClick 的名称。

例如，每当我点击“Bar B Q”、“calcutta Food Court”时，它只会显示“Bar B Q”、“calcutta Food Court”而不是其他信息。thnx提前。如果你需要任何东西，请随意。

![在此处输入图像描述](../Images/4c3e3a97542e4473a3a4ed9367d07feb.png)“我的应用程序屏幕截图”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:46:42.233

假设你在课堂上有类似`getFoodJointname()`的方法`Restaurent`，你可以在你的`onItemClick()`：

```
String hotelname = restaurentData.get(position).getFoodJointname();
makeAToast(hotelname); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T07:53:44.427

希望这会奏效。

```
Restaurent rest= (Restaurent) foodJntListView.getSelectedItem(); 
```

# nosql - 倒排索引的最佳 NoSQL

> ID：10186731
> 
> 赞同：3
> 
> 时间：2012-04-17T07:09:47.577
> 
> 标签：nosql

我正在做一个小项目，我需要构建一个倒排索引并基于用户查询应用相似性算法 - 基本信息检索。构建和搜索倒排索引的最佳 NoSQL 产品是什么？

谢谢，J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-15T03:35:13.293

由于倒排索引是关于存储单词及其在文档中的位置之间的关系，我不确定这是否真的是 NoSQL 的一个很好的用例。传统的 SQL 在这里会更好地工作。例如，尝试这样的数据结构：

```
Documents (DocumentID primary key, DocumentText text)
Words (WordID primary key, Word text)
Instances (InstanceID primary key, WordID foreign key, DocumentID foreign key, WordIndex integer) 
```

使用这种结构，当您将文档插入`Documents`表中时，您会解析出每个单词并将其添加到`Words`表中（如果它是新的），或者检索现有的（`WordID`如果它已经存在），然后将关联的数据添加到`Instances`表中。

如果您打算使用 NoSQL，您可以将它与 MongoDB 等工具一起使用，并将所有文档放在一个集合中，将所有单词放在另一个集合中。在每个`Word`文档中，包含一个`Instances`数组，该数组将是一个对象数组，其中包含`ObjectID`相关文档的 和该文档中的单词索引。但是，我不确定 MongoDB 是否针对处理文档中如此大的数组进行了优化。像“a”和“the”这样的常用词最终甚至可能超过 4MB 的文档限制，具体取决于您拥有的数据量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-02T12:57:20.493

请参阅[弹性搜索](https://www.elastic.co/)

> *   分布式、可扩展和高可用
> *   实时搜索和分析功能
> *   复杂的 RESTful API

# css - 表格中段落中的自动换行断词

> ID：10186740
> 
> 赞同：0
> 
> 时间：2012-04-17T07:10:38.777
> 
> 标签：css, html-table, word-wrap

我有一个像这样的简单表：

```
<table>
<tr>
   <td id="col1"><p>test1</p></td>
   <td id="col2">
        <p>testtestetst@test.com</p>
        <p>abcd@efg.com</p>
        <p>testtesttesttest@gmail.comasdfdsasadfsadfsadfasdf</p>
   </td>
   <td id="col3"><p>10 April 2010 4:33 PM</p></td>
</tr>
</table> 
```

还有一些 CSS：

```
table{
  width: 300px;
}

#col1{
    width: 100px;
}

#col2{
    width: 100px;
    max-width: 100px;
}

#col3{
    width: 100px;
}

p{
    word-wrap: break-word;
} 
```

上面的小提琴：http: [//jsfiddle.net/ypMQX/](http://jsfiddle.net/ypMQX/)

我已经固定了表格和每一列的宽度。我还设置`word-wrap`了`break-word`所有段落元素。然后我将最大宽度设置为`#col2`. 为什么即使我已将第 2 列设置为，也允许在不换行的情况下扩展这么多`break-word`？

我希望我的所有列都有固定的宽度，然后将内容包裹起来。如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:27:19.167

只需将 100px 宽度添加到 <p> 标签。您不需要为表格列添加 100px 宽度。
这是所需的CSS：

```
table{
  width: 300px;
}

p{
 word-wrap: break-word;
 width: 100px;
} 
```

小提琴：http: [//jsfiddle.net/QNwtj/4/](http://jsfiddle.net/QNwtj/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T07:28:28.777

你在什么浏览器上测试？我在火狐上，这就是我所看到的

![在此处输入图像描述](../Images/6e74c8cc34c4f38b62616cbde75baada.png)

无论如何，这会在 IE 上中断，您可以为段落添加另一个选择器以及您的`#col2`喜欢：

```
#col2, #col2 p {
  width: 100px;
  max-width: 100px;
} 
```

# mysql - 我想在mysql中写这个查询你能帮帮我吗

> ID：10186744
> 
> 赞同：0
> 
> 时间：2012-04-17T07:11:17.370
> 
> 标签：mysql

我的查询是：（查找在 115 房间开会或有五个或更多学生注册的所有班级的名称。）

```
CREATE TABLE STUDENT (
    sid NUMERIC(6) NOT NULL,
    sname VARCHAR(15),
    major VARCHAR(20),
    level VARCHAR(2),
    sage NUMERIC(2) NOT NULL,
    PRIMARY KEY (sid)
    );
CREATE TABLE CLASS(
    cnum VARCHAR(6),
    meets_at TIME,
    room VARCHAR(6),
    fid NUMERIC(6) ,
    PRIMARY KEY (cnum),
    FOREIGN KEY (fid)
    references FACULTY (fid)     
   );
CREATE TABLE ENROLLED (   
    cnum VARCHAR(6),
    sid NUMERIC(6) NOT NULL,
    PRIMARY KEY (cnum,sid),
  FOREIGN KEY (sid)
       REFERENCES STUDENT (sid),
        FOREIGN KEY (sid)
       REFERENCES FACULTY (fid),
       FOREIGN KEY (cnum)
       REFERENCES CLASS (cnum)        
    );
  alter table ENROLLED 
   add foreign key (sid)
   references STUDENT (sid); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:17:11.490

也许是这样的：

```
SELECT
    *
FROM
    CLASS
WHERE
    CLASS.room='115'
    OR
    (
        SELECT
            COUNT(*)
        FROM
            ENROLLED
            JOIN STUDENT
                ON ENROLLED.sid=STUDENT.sid
        WHERE
            ENROLLED.cnum=CLASS.cnum
    )>=5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T07:18:11.077

```
SELECT `sid`, `cid` 
FROM (`STUDENT` INNER JOIN `ENROLLED` ON `STUDENT`.`sid` = `ENROLLED`.`sid`) 
    INNER JOIN `CLASS` ON `ENROLLED`.`cnum` = `CLASS`.`cnum` 
GROUP BY `ENROLLED`.`cid` 
HAVING 
    `CLASS`.`room` = '115' OR 
    COUNT(DISTINCT `STUDENT`.`sid`) >= 5 
```

# gwt - gwt 装饰的选项卡面板未正确显示选项卡

> ID：10186747
> 
> 赞同：0
> 
> 时间：2012-04-17T07:11:33.320
> 
> 标签：gwt

我在 GWT 中创建了一个 DecoratedTabPanel

```
 <g:HorizontalPanel ui:field="hpnlTab">
            <g:DecoratedTabPanel animationEnabled="true" ui:field="tabQuran" width="499px" height="281px">
                <g:Tab text="Quran">
                    <g:HTMLPanel width="249px" height="262px" ui:field="quranTab">
                    <!--  <div class="{style.qFrameMiddle}" id="middleFrame">-->
            <div  ui:field="quranText" class="{style.quranText}">       

            </div> 

        </g:HTMLPanel>
                </g:Tab>
                <g:Tab text="Translation">
                    <g:HTMLPanel width="7cm" height="249px"/>
                </g:Tab>
            </g:DecoratedTabPanel>
        </g:HorizontalPanel> 
```

它工作正常，显示单词测试，当我点击测试时，它也会打开 HtmlPanel，但问题是，它没有显示 TABS，只是一个简单的文本，看图片

谢谢

![在此处输入图像描述](../Images/7797312ec8c69c786960034b41e8beec.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:30:37.033

确保在您的 ModuleName.gwt.xml 中继承了标准主题或其他主题：

```
<inherits name="com.google.gwt.user.theme.standard.Standard"/> 
```

或者你在某个地方覆盖了它的默认样式。

# javascript - 对画布上的移动或动画形状应用持续时间

> ID：10186751
> 
> 赞同：-1
> 
> 时间：2012-04-17T07:11:50.513
> 
> 标签：javascript, jquery, html

我正在尝试在画布中的形状上应用 3 种类型的动画[出现、动画、消失]。我想指定所有 3 个动画发生的特定时间，例如：如果用户指定 5 分钟，那么在该持续时间内所有 3 个动画应该按顺序发生。所以请在代码中提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:19:56.317

在用户输入处理程序中使用以`window.setTimeout`在指定的暂停后启动动画。

# html - 在具有 haslayout 属性的 div 中输入，即具有“margin-left”

> ID：10186752
> 
> 赞同：0
> 
> 时间：2012-04-17T07:12:05.470
> 
> 标签：html, css, internet-explorer

一个简单的 html 页面。如果你在**IE**中运行它（我的版本是**7**）。
你会发现输入有一个“margin-left”（大小为 15px）。
但是如果你删除(*zoom:1)，我们应该用它来触发haslayout，即“margin-left”消失。

所以这就是为什么？？？

```
<!DOCTYPE>
    <html>
    <head>
    <style>
            body,div,input{margin:0;padding:0;}
            .div-inline{display:inline-block;*display:inline;*zoom:1;border:1px solid red;}
            .marginLeft-15{margin-left:15px;}
    </style>
    </head>
    <body>
        <div class="marginLeft-15">
            <div class="div-inline"><input type="text" id="proxy_unuse_address"></div>
        </div>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:26:28.953

我认为这`display:inline-block;`也会触发 hasLayout （根据[此页面](http://www.brunildo.org/test/InlineBlockLayout.html)），所以为什么不完全删除`*display:inline;*zoom:1;`样式，它应该可以工作......

# node.js - NodeJS + Socket.io：客户端无法连接到家庭网络中的 Ubuntu 服务器

> ID：10186753
> 
> 赞同：1
> 
> 时间：2012-04-17T07:12:07.093
> 
> 标签：node.js, socket.io, ubuntu-10.04

我已经在我的家庭网络中设置了一个 Ubuntu 10.04 服务器。我在上面安装了一个灯服务器、NodeJs 和 Socket.io。它似乎工作正常，但我无法从我的客户端连接到服务器。我认为我错过了存储客户端文件的位置和/或如何将 IP 地址和端口放入代码中的点。

我正在使用 David Walsh ( [http://davidwalsh.name/websocket](http://davidwalsh.name/websocket) ) 的示例。我的服务器 IP 地址是 192.168.1.113。在客户端上，我将**app.js**存储在

> /usr/local/bin

那也是安装节点的地方。

服务器代码

```
 // Require HTTP module (to start server) and Socket.IO
 var http = require('http'), io = require('socket.io');

 // Start the server at port 8000
 var server = http.createServer(function(req, res){ 

 // Send HTML headers and message
 res.writeHead(200,{ 'Content-Type': 'text/html' }); 
 res.end('<h1>Hello Socket Lover!</h1>');
 });
 server.listen(8000);

 // Create a Socket.IO instance, passing it our server
 var socket = io.listen(server);

 // Add a connect listener
 socket.on('connection', function(client){ 

 // Success!  Now listen to messages to be received
 client.on('message',function(event){ 
 console.log('Received message from client!',event);
  });
 client.on('disconnect',function(){
 clearInterval(interval);
 console.log('Server has disconnected');
 });

 }); 
```

当我使用 Node 启动服务器并在浏览器中输入地址*(http://192.168.1.113:8000)*时，我看到“Hello Socket Lover！” 所以我想这很好用。

我将我的客户文件（*client.html*）存储在

> /var/www

那是我的 LAMP 服务器的主文件夹所在的位置。

客户端.html

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>

<script src="http://cdn.socket.io/stable/socket.io.js"></script>

<script> 
// Create SocketIO instance, connect
var socket = new io.Socket('http://192.168.1.113',{
  port: 8000
});
socket.connect(); 

// Add a connect listener
socket.on('connect',function() {
  console.log('Client has connected to the server!');
});
// Add a connect listener
socket.on('message',function(data) {
  console.log('Received a message from the server!',data);
});
// Add a disconnect listener
socket.on('disconnect',function() {
  console.log('The client has disconnected!');
});

// Sends a message to the server via sockets
function sendMessageToServer(message) {
  socket.send(message);
}

</body>
</html> 
```

*现在，当我在浏览器(http://192.168.1.113/client.html)*中打开这个文件时，什么也没有发生。我在我的 Ubuntu 服务器或其他日志上看不到任何连接，并且浏览器中没有任何消息。

嗯……我做错了什么？我已经尝试了几个小时，改变了各种各样的东西，但仍然没有结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T19:47:32.367

在 pmavik 的帮助下（见评论）我的问题得到了回答。

我不知道如何正确地提供客户端文件（index.html）。我从 www.socket.io 复制了一个示例，添加了正确的 IP 地址和端口，现在建立了连接。

服务器文件 (app.js) 和客户端文件 (index.html) 应位于安装 Node 的目录中。节点服务器将客户端文件发送到浏览器，因此无需将客户端文件放在网站“正常”文件所在的 /var/www 目录中。

**应用程序.js**

```
var app = require('http').createServer(handler)
  , io = require('socket.io').listen(app)
  , fs = require('fs')

app.listen(8000);

function handler (req, res) {
  fs.readFile(__dirname + '/index.html',
  function (err, data) {
    if (err) {
      res.writeHead(500);
      return res.end('Error loading index.html');
        }

    res.writeHead(200);
    res.end(data);
  });
}

io.sockets.on('connection', function (socket) {
  socket.emit('news', { hello: 'world' });
  socket.on('my other event', function (data) {
    console.log(data);
  });
}); 
```

**索引.html**

```
<html>
<head></head>
<body>
<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect('http://192.168.1.113:8000');
  socket.on('news', function (data) {
    console.log(data);
    socket.emit('my other event', { my: 'data' });
  });
</script>
</body>
</html> 
```

# ios - 存档期间出错：无法剥离的间接符号表条目引用的符号

> ID：10186755
> 
> 赞同：10
> 
> 时间：2012-04-17T07:12:22.177
> 
> 标签：ios, xcode, macos

我有一个编译和运行良好的项目（即使使用“build for archive”命令构建）。

但是，当我想存档它（用于 MAS 发布）时，我收到以下错误：

> 命令 /Developer/usr/bin/strip 失败，退出代码为 1 /Developer/usr/bin/strip：由无法在 xxx 中剥离的间接符号表条目引用的符号

其中 xxx 是我的项目（框架）的子项目。

可能是什么问题？（我检查了，一切都正确签名）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-04-02T10:49:10.260

[![在此处输入图像描述](../Images/f015c70345749d86270051e3345b3bc2.png)](https://i.stack.imgur.com/uMzqI.png)

就我而言，将**Strip Style**构建设置从*All Symbols*更改为*Debugging Symbols*解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:58:50.177

请在您的项目中检查您的子项目的目标成员资格。在构建存档之前，请构建正常模式。这是检查任何链接错误的简单方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T23:43:47.717

strip 与归档/构建期间的符号剥离有关。我们将需要更多的错误信息，以便为您提供更好的帮助。

听起来子项目可能正在剥离它的符号并且不应该。尝试打开子项目的构建设置并关闭“在复制期间剥离调试符号”，看看是否可以修复它。

# perl - 在 Perl 中关闭文档时出现 OLE 异常

> ID：10186758
> 
> 赞同：0
> 
> 时间：2012-04-17T07:12:25.320
> 
> 标签：perl, ms-word, win32ole

我在 perl 中遇到了以下异常。我现在也使用 perl 技术。例外是：

```
Win32::OLE<0.1709> error 0x800a1423
       in METHOD/PROPERTYGET "Close" at getWordComments.pl line no 350 
```

这是异常即将到来的 getWordComments.pl 的示例代码。
A) 以下代码用于打开文档

```
#Open the document in MS Word
use Win32::OLE;
{
    no warnings;
    use Win32::OLE::Const 'Microsoft.Word';    # wd  constants
}

$word=Win32::OLE->new('Word.Application');
$word->{Visible} = 1;
$word->{DisplayAlerts} = 0;

$Document=$word->Documents->Open({Filename => $filename, ReadOnly => 1}); 
```

B）然后我正在阅读评论。
C) 以下代码用于关闭文档。

```
$Document->{Saved}=1;
$Document->Close;
undef $Document;

#Close Word
$word->Quit;
undef $word; 
```

是office版本的问题吗？因为文档是 .docx。它适用于.doc。

请帮我解决这个问题。

* * *

我正在阅读文档的评论并将文档保存在服务器上。它适用于扩展名为 *.docx 和 *.doc 的文档的其余部分

你也可以请我告诉我如何在 perl 中做到这一点。

我想关闭 2003 office 和 2007 office 版本的文档。

这是版本问题吗？

感谢和问候 Arvind Porlekar

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T11:10:59.783

等待！您正在打开它*ReadOnly*然后将其标记为*Saved* ?? 就在我的心理处理器中。

*   我可以找到的文档似乎表明这是一个关于保存为不同格式的问题。这可能解释了它合而为一但不是其他情况的原因。

*   此外，我已经看到迹象表明这是一个 COM 错误。了解一些有关 COM 的信息会有所帮助。可能 doc 和 docx 是前面 doc 逻辑定义的同一接口的完全不同的实现。可能是旧实现（doc）可以说你想以只读方式打开它，但又想将其标记为已保存，而新实现认为你真的不应该这样做。

正如您[在此处](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.word.document.close%28v=vs.80%29.aspx)看到的那样，处理的参数之一是`OriginalFormat`，如果您不指定该参数，它可能会默认为 doc 格式，然后抛出您试图以不同格式保存的异常，而无需显式指示。另一个论点是`SaveChanges`。

因此，您可能隐含地告诉它以默认的 doc 格式保存更改，该格式适用于 doc 格式，但抱怨试图以 docx 格式以不同的格式保存它。（可以理解）

# android - Android ADK 支持的设备

> ID：10186760
> 
> 赞同：2
> 
> 时间：2012-04-17T07:12:36.543
> 
> 标签：android, adk

我在这个论坛上阅读了类似的问题，现在我更困惑了。有人可以帮我解决以下问题：

1.  我有一个三星 Galaxy Y，Android 操作系统是 2.3.6，内核是 2.6.35.7 理想情况下，这个配置应该支持 ADK。我的理解正确吗？

2.  当我尝试在 Galaxy Y 上安装 DemoKit 应用程序时，我收到错误“安装失败：INSTALL_FAILED_MISSING_SHARED_LIBRARY”这实际上意味着我的手机没有所需的 Jar 文件（例如 USB.jar）。这个结论对吗？

3.  我使用 ADB 并检查了三星手机上的目录/文件，但没有看到任何与 USB 附件模式相关的 Jar 文件。唯一可用的解决方案是根设备并推送这些文件。我不想这样做，因为我的客户将无法这样做。有没有办法在安装过程中添加缺少的库（自动？）。很难问，但在这里试试我的运气:-)

4.  我们是否有支持 ADK 的设备列表。我看到了 Microchip 网站的链接，[http://www.microchip.com/stellent/idcplg](http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&nodeId=2919&param=en546070) ?IdcService=SS_GET_PAGE&nodeId=2919¶m= en546070 这个列表的可靠性如何？

5.  有人可以告诉我他们是否成功运行了 DemoKit 应用程序以及在哪些手机型号上（提前感谢您分享此信息）

-谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-17T17:15:31.587

我终于找到了当前支持 ADK 的手机列表......以及一些很好的解释......

- 即使您的手机有 OS 2.3.4 或 OS 3.1，您仍然可能没有 ADK 支持（即使在 root 之后）。这是因为需要制造商提供的 USB 驱动程序。

- 手机制造商提供的 USB 驱动程序必须与 ADK 兼容。

所以，还不要根您的设备（如果有异常，请告诉我），而是购买以下型号之一：

1.  谷歌 Nexus S
2.  谷歌 Nexus 一
3.  摩托罗拉 Xoom
4.  宏碁Iconia A100
5.  宏碁Iconia A500
6.  LG 擎天柱
7.  华硕 Eee Pad 变压器 TF101
8.  三星 Galaxy Tab 10.1
9.  三星盖乐世 S
10.  三星银河王牌

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T09:09:49.947

我尝试了一些支持 ADK 的手机。

1.  HTC 资源管理器
2.  三星注意
3.  三星盖乐世 SII

但我仍在尝试使用 micromax funbook P300，但尚未成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T07:38:28.023

从[这里](http://www.microchip.com/forums/tm.aspx?high=&m=591785&mpage=1#596040)看，您似乎仍然需要特定的设备支持，并且不清楚您的设备是否具有该支持。你可能只是运气不好。

# c - C中的char数组和char指针有什么区别？

> ID：10186765
> 
> 赞同：264
> 
> 时间：2012-04-17T07:12:43.523
> 
> 标签：c, arrays, pointers

我试图理解 C 中的指针，但我目前对以下内容感到困惑：

*   ```
    char *p = "hello" 
    ```

    这是一个指向字符数组的 char 指针，从*h*开始。

*   ```
    char p[] = "hello" 
    ```

    这是一个存储*hello*的数组。

当我将这两个变量都传递给这个函数时有什么区别？

```
void printSomething(char *p)
{
    printf("p: %s",p);
} 
```

* * *

## 回答 #1

> 赞同：261
> 
> 时间：2012-04-17T07:15:12.977

`char*`并且`char[]` *是不同*的类型，但并非在所有情况下都立即显现。这是因为数组*衰减为指针*，这意味着如果在需要类型`char[]`之一的地方提供类型表达式`char*`，编译器会自动将数组转换为指向其第一个元素的指针。

您的示例函数`printSomething`需要一个指针，因此如果您尝试像这样将数组传递给它：

```
char s[10] = "hello";
printSomething(s); 
```

编译器假装你写了这个：

```
char s[10] = "hello";
printSomething(&s[0]); 
```

* * *

## 回答 #2

> 赞同：99
> 
> 时间：2012-04-17T08:44:29.660

让我们来看看：

```
#include <stdio.h>
#include <string.h>

int main()
{
    char *p = "hello";
    char q[] = "hello"; // no need to count this

    printf("%zu\n", sizeof(p)); // => size of pointer to char -- 4 on x86, 8 on x86-64
    printf("%zu\n", sizeof(q)); // => size of char array in memory -- 6 on both

    // size_t strlen(const char *s) and we don't get any warnings here:
    printf("%zu\n", strlen(p)); // => 5
    printf("%zu\n", strlen(q)); // => 5

    return 0;
} 
```

foo* 和 foo[] 是不同的类型，编译器对它们的处理方式不同（指针 = 地址 + 指针类型的表示，数组 = 指针 + 数组的可选长度，如果已知，例如，如果数组是静态分配的)，详细信息可以在标准中找到。并且在运行时它们之间没有区别（在汇编程序中，差不多，见下文）。

此外，[C FAQ](http://c-faq.com/)中有一个相关[问题](http://c-faq.com/decl/strlitinit.html)：

> **问**：这些初始化有什么区别？
> 
> ```
> char a[] = "string literal";   
> char *p  = "string literal"; 
> ```
> 
> 如果我尝试为 p[i] 分配一个新值，我的程序就会崩溃。
> 
> **答**：字符串文字（C 源代码中双引号字符串的正式术语）可以以两种略有不同的方式使用：
> 
> 1.  作为 char 数组的初始值设定项，就像在 char a[] 的声明中一样，它指定了该数组中字符的初始值（如果需要，还指定其大小）。
> 2.  在其他任何地方，它都会变成一个未命名的静态字符数组，并且这个未命名的数组可能存储在只读存储器中，因此不一定可以修改。在表达式上下文中，数组像往常一样立即转换为指针（参见第 6 节），因此第二个声明初始化 p 以指向未命名数组的第一个元素。
> 
> 一些编译器有一个开关来控制字符串文字是否可写（用于编译旧代码），有些编译器可能有选项可以使字符串文字被正式视为 const char 数组（以便更好地捕获错误）。
> 
> 另见问题 1.31、6.1、6.2、6.8 和 11.8b。
> 
> 参考文献：K&R2 Sec。5.5 页。104
> 
> ISO 秒。6.1.4，秒。6.5.7
> 
> 理由二。3.1.4
> 
> H＆S秒。2.7.4 第 31-2 页

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2015-06-05T07:45:36.777

> C中的char数组与char指针有什么区别？

**C99 N1256 草案**

字符串字面量有两种不同的用法：

1.  初始化`char[]`：

    ```
    char c[] = "abc"; 
    ```

    这是“更神奇”，并在 6.7.8/14“初始化”中描述：

    > 字符类型的数组可以由字符串字面量初始化，可选地用大括号括起来。字符串文字的连续字符（如果有空间或数组大小未知，则包括终止的空字符）初始化数组的元素。

    所以这只是一个捷径：

    ```
    char c[] = {'a', 'b', 'c', '\0'}; 
    ```

    像任何其他常规数组一样，`c`可以修改。

2.  在其他任何地方：它会生成：

    *   未命名
    *   char 数组[C 和 C++ 中的字符串文字类型是什么？](https://stackoverflow.com/questions/2245664/what-is-the-type-of-string-literals-in-c-c)
    *   带静态存储
    *   如果修改，则会给出 UB（未定义的行为）

    所以当你写：

    ```
    char *c = "abc"; 
    ```

    这类似于：

    ```
    /* __unnamed is magic because modifying it gives UB. */
    static char __unnamed[] = "abc";
    char *c = __unnamed; 
    ```

    `char[]`请注意从to的隐式转换`char *`，这始终是合法的。

    那么你修改了`c[0]`，你也修改`__unnamed`了，也就是UB。

    这记录在 6.4.5“字符串文字”中：

    > 5 在翻译阶段 7 中，将一个字节或零值代码附加到每个由一个或多个字符串文字产生的多字节字符序列。然后使用多字节字符序列来初始化一个静态存储持续时间和长度刚好足以包含该序列的数组。对于字符串文字，数组元素的类型为 char，并使用多字节字符序列的各个字节初始化 [...]
    > 
    > 6 如果这些数组的元素具有适当的值，则未指定这些数组是否不同。如果程序尝试修改这样的数组，则行为未定义。

6.7.8/32“初始化”给出了一个直接的例子：

> 例 8：声明
> 
> ```
> char s[] = "abc", t[3] = "abc"; 
> ```
> 
> 定义“普通”字符数组对象`s`，`t`其元素用字符串字面量初始化。
> 
> 此声明与
> 
> ```
> char s[] = { 'a', 'b', 'c', '\0' },
> t[] = { 'a', 'b', 'c' }; 
> ```
> 
> 数组的内容是可修改的。另一方面，声明
> 
> ```
> char *p = "abc"; 
> ```
> 
> 定义`p`类型为“pointer to char”并将其初始化为指向长度为 4 的类型为“char 数组”的对象，其元素使用字符串字面量进行初始化。如果尝试使用`p`来修改数组的内容，则行为未定义。

**GCC 4.8 x86-64 ELF 实现**

程序：

```
#include <stdio.h>

int main(void) {
    char *s = "abc";
    printf("%s\n", s);
    return 0;
} 
```

编译和反编译：

```
gcc -ggdb -std=c99 -c main.c
objdump -Sr main.o 
```

输出包含：

```
 char *s = "abc";
8:  48 c7 45 f8 00 00 00    movq   $0x0,-0x8(%rbp)
f:  00 
        c: R_X86_64_32S .rodata 
```

结论：GCC 将`char*`其存储在`.rodata`section 中，而不是`.text`.

如果我们对`char[]`:

```
 char s[] = "abc"; 
```

我们获得：

```
17:   c7 45 f0 61 62 63 00    movl   $0x636261,-0x10(%rbp) 
```

所以它被存储在堆栈中（相对于`%rbp`）。

但是请注意，默认链接描述文件将`.rodata`和`.text`放在同一段中，该段具有执行但没有写权限。这可以通过以下方式观察到：

```
readelf -l a.out 
```

其中包含：

```
 Section to Segment mapping:
  Segment Sections...
   02     .text .rodata 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-04-17T12:08:16.610

您不能更改字符串常量的内容，这是第一个`p`指向的内容。第二个`p`是一个用字符串常量初始化的数组，你*可以*改变它的内容。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-04-17T07:19:32.757

对于这样的情况，效果是一样的：您最终传递了字符串中第一个字符的地址。

声明显然不一样。

下面为字符串和字符指针留出内存，然后将指针初始化为指向字符串中的第一个字符。

```
char *p = "hello"; 
```

而以下仅为字符串留出内存。所以它实际上可以使用更少的内存。

```
char p[10] = "hello"; 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-03-06T10:24:37.163

来自*APUE*，第 5.14 节：

```
char    good_template[] = "/tmp/dirXXXXXX"; /* right way */
char    *bad_template = "/tmp/dirXXXXXX";   /* wrong way*/ 
```

> ...对于第一个模板，名称是在堆栈上分配的，因为我们使用了一个数组变量。但是，对于第二个名称，我们使用指针。在这种情况下，只有指针本身的内存驻留在堆栈上；编译器安排将字符串存储在可执行文件的只读段中。当`mkstemp`函数试图修改字符串时，会发生分段错误。

引用的文字与@Ciro Santilli 的解释相匹配。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-04-17T07:16:14.550

据我所知，数组实际上是一组指针。例如

```
p[1]== *(&p+1) 
```

是一个真实的陈述

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-04-17T07:19:04.097

`char p[3] = "hello"`? 应该`char p[6] = "hello"`记住 C 中“字符串”的末尾有一个 '\0' 字符。

无论如何，C 中的数组只是指向内存中调整对象的第一个对象的指针。唯一不同的 s 在语义上。虽然您可以更改指针的值以指向内存中的不同位置，但数组在创建后将始终指向同一位置。
同样在使用数组时，会自动为您完成“新建”和“删除”。

# java - Java扫雷方法在炸弹周围添加数字无法正常工作

> ID：10186767
> 
> 赞同：0
> 
> 时间：2012-04-17T07:12:52.650
> 
> 标签：java, minesweeper

我为我的java扫雷游戏编写了这个方法，它应该检查一组坐标周围的点，然后计算附近有多少炸弹。

```
public void numberMines(){
    int count = 0;
    int x = 0;
    int y = 0;
    int xMin = x-1;
    int xMax = x+1;
    int yMin = y-1;
    int yMax = y+1; 
    if (x == 0){
        xMin = 0;
    }
    if (y == 0){
        yMin = 0;   //these restrictions take care of the spots in the edges
    }
    if (x == rows){
        xMax = rows;
    }
    if (y == columns){
        yMax = columns;
    }
    //first 2 loops go through every spot on the board
    for (x=0; x<rows; x++){
        for (y=0; y<columns; y++){
            //if the spot selected is not a bomb, for loops check spaces surrounding it
            if (mineBoard[x][y] != bomb){
                for (int i = xMin; i <=xMax; i++){
                    for (int j = yMin; j <=yMax; j++){
                        if (mineBoard[i][j] == bomb){
                            count++;
                        }
                    }
                }
            }

            if (count > 0){       //converts them characters
                mineBoard[x][y] = (char)(count + '0');
                count = 0;
            }
         }
    }
} 
```

每次我运行这个方法时，它都会返回 3,2,1，或者是空的，所以它会计算周围有多少炸弹，但由于某种原因，它过度循环并在第一个之后的每个不是炸弹的地方都返回相同的东西一。我真的看不到我搞砸了，请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:17:05.700

移动这段代码：

```
int xMin = x-1;
int xMax = x+1;
int yMin = y-1;
int yMax = y+1; 
if (x == 0){
    xMin = 0;
}
if (y == 0){
    yMin = 0;   //these restrictions take care of the spots in the edges
}
if (x == rows){
    xMax = rows;
}
if (y == columns){
    yMax = columns;
} 
```

在你的 for 循环内部：

```
for (x=0; x<rows; x++){
    for (y=0; y<columns; y++){
       //Insert code here <--- 
```

因为此刻，您只进行*一次*这些计算，对于 x=0，y=0。

* * *

如果您将, , 循环`count`之前的设置移动到 0并且在所有循环开始之前没有完成一次，并且再次在显示结果的条件内完成，那么代码可能看起来也更清晰。`i``j`

* * *

根据您的评论 - 我认为您的有效索引范围为`0..(rows-1)`-`0..(columns-1)`所以您也有一个栅栏错误。修改这些行：

```
if (x == rows-1){
    xMax = rows-1;
}
if (y == columns-1){
    yMax = columns-1;
} 
```

但是仍然在`x`/`y`循环中保留整个块。当它们在外面时，您不会得到超出范围的错误，因为您从不计算`xMax`以及`yMax`何时`x`以及`y`它们处于最大值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T07:19:55.233

*避免在方法的开头声明所有变量，最好在接近使用*时声明它们。要解决您的问题，您需要在循环中计算计数、xMin、xMax、yMin 和 yMax，如下所示：

```
public void numberMines(){
    //first 2 loops go through every spot on the board
    for (int x=0; x<rows; x++){
        for (int y=0; y<columns; y++){
            int count = 0;
            //if the spot selected is not a bomb, for loops check spaces surrounding it
            if (mineBoard[x][y] != bomb){
                for (int i = (x == 0 ? 0 : x-1); i <= (x == rows ? rows : x+1); i++){
                    for (int j = (y == 0 ? 0 : y-1); j <= (y == rows ? rows : y+1); j++){
                        if (mineBoard[i][j] == bomb){
                            count++;
                        }
                    }
                }
            }

            if (count > 0){       //converts them characters
                mineBoard[x][y] = (char)(count + '0');
            }
         }
    }
} 
```

我已经内联了边界检查，这不是必需的，但会使代码更短，以便在此处显示。

# combobox - ZK 窗口在 ID 空间中不是唯一的

> ID：10186769
> 
> 赞同：4
> 
> 时间：2012-04-17T07:13:05.073
> 
> 标签：combobox, listbox, zk, zul

在我们的项目中，我们`ZK`用于网页。有一个`combobox`列表。选择后，它通过 获取来自 java 对象的数据`onSelect`，我已经给出了逻辑。当我选择一个时，该页面上有 4 个`listboxes`要根据选择填充数据。当我第一次选择时，没有问题发生。

但是在第二次我收到一个错误弹出窗口，例如“在窗口的 id 空间中不是唯一的”，并显示必须在选择时填写的列表框项 id。

有人可以帮忙吗？

注意：虽然它显示此错误，但我`listboxes`根据组合框选择正确填写。我仍然无法阻止此错误的发生..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T10:55:40.490

您的问题是 ZK 中的 id 冲突`id space`。

有点背景。。

ZK 在运行时为组件生成 id，如果你在浏览器中打开 DOM，你会看到每个组件都有一些机器可读的 id。

但是，您也可以给组件一个 id。此 id 不会转到 DOM，但可以让您在应用程序中引用该组件。

这两个不应该混淆。您遇到的冲突是后一种类型的 id；您在 Java 代码或 ZUL 文件中为组件分配了一个 ID，该 ID 在运行时不是唯一的。

您描述的仅在您第二次单击时才发生的情况是这里的一个故事标志。您在事件中添加的内容中定义了一个 id，完成后您不会删除此内容。

考虑以下示例：

```
@Wire
private Window myWindow;

@Listen(Events.ON_CLICK + " = #myButton")
public void onMyButtonClicked() {
    Label myLabel = new Label("sean is cool");
    myLabel.setId("myLabel");
    myLabel.setParent(myWindow);
} 
```

这将在您第一次单击时起作用`myButton`，但会在第二次单击时引发错误。那是因为第二个事件试图添加`myLabel`，`myWindow`但那里已经有一个`myLabel`。

有很多方法可以解决这个问题，具体取决于您要执行的操作。[查看关于ID 空间](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/UI_Composing/ID_Space)
的 ZK 文档了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-16T08:45:27.827

我也面临同样的错误。我的场景是一样的，只是使用的小部件不同。因此将我的解决方法放在这里。

`doBeforeCompose()`我在作曲家的方法中放入了以下代码：

```
Component widgetWithId = page.getFellowIfAny("widgetWithId");
if (widgetWithId != null) {
    widgetWithId.detach();
} 
```

这`widgetWithId`是组件/小部件，它试图由代码重新生成，具有相同的 Id 并且 ZK 为其抛出错误。

# shell - 从 shell 命令调用 SOAP 请求

> ID：10186774
> 
> 赞同：11
> 
> 时间：2012-04-17T07:13:17.423
> 
> 标签：shell, unix, soap

我使用 curl 向 Web 服务发送 SOAP 请求并使用 shell 脚本获取响应。请在下面找到我正在使用的命令：-

```
curl  -H "Content-Type: text/xml; charset=utf-8" -H "SOAPAction:" -d @sample_request.txt -X POST http://someWebServiceURL 
```

我收到一个错误响应，上面写着没有 SOAPAction 标头。PFB 响应正文部分

```
<soapenv:Body>
<soapenv:Fault>
<faultcode>Client.NoSOAPAction</faultcode>
<faultstring>WSWS3147E: Error: no SOAPAction header!</faultstring>
</soapenv:Fault>
</soapenv:Body> 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-17T07:22:00.310

您需要提供 SOAP 操作的名称。你有：

```
-H "SOAPAction:" 
```

在其中提供操作的名称。例如

```
-H "SOAPAction: http://my_example/my_action" 
```

如果有，从 WSDL 获取操作的名称。例如，请参阅[如何确定有效的 SoapAction？](https://stackoverflow.com/questions/128263/how-do-you-determine-a-valid-soapaction).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T08:00:05.270

From the WSDL of the service, you can find the `SoapAction`. And you can find the operation you're trying to invoke and access the WSDL by opening a web browser to the URL of the service. Using the `curl` to invoke the `SoapAction`, you should specify the `Action` by `"-H"`, such as `-H SOAPAction: http://tempuri.org/Execute`.

# php - 将 JS 数组传递给 PHP 页面

> ID：10186779
> 
> 赞同：0
> 
> 时间：2012-04-17T07:13:31.513
> 
> 标签：php, javascript

我正在通过 JS Event 捕获更改字段的值并将该数据捕获到 temp1 数组中，例如，如果您更改字段名称“name”，那么它将获取字段名称“id”并将其存储到 temp1 中。但主要问题是我如何将这个数组传递给一个 php 表单处理页面，在那里我可以获得这个 temp1 的值。

我尝试使用 JSON，但它并没有帮助我。

我尝试的代码是： $.post('/somepage.php', temp1); 但它没有用。

这个你能帮我吗。

我在页面中包含了 jquery.js lib。

```
 <script type="text/javascript">
  var temp1 = new Array();

  function onChangeTest(changeVal)
  {    
 //alert("Field u changed was: " + changeVal.id) 

 temp1.push(changeVal.id);

 tmsg = "Fields u changed so far are:"
 for(var i=0;i<temp1.length;i++)
 {
 //document.write("<b>temp1["+i+"] is </b>=>"+temp1[i]+"<br>");
 tmsg = tmsg + " " + temp1[i];
 }
 alert(tmsg);
 }
 //$.post('/somepage.php', temp1);
 </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:16:16.560

你需要的是：

```
$.post("/somepage.php", { 'temp1[]': temp1 }); 
```

[在官方文档](http://api.jquery.com/jQuery.post/)中也可以看到这里，有各种数据的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:45:27.303

这个问题对我来说看起来很简单，试试下面的代码，让我知道结果..

```
function onChangeTest(changeVal)
{
    //alert("Field u changed was: " + changeVal.id)
    var temp1 = new Array();
    temp1.push(changeVal);

    tmsg = "Fields u changed so far are:"
    for(var i=0;i<temp1.length;i++){
        //document.write("<b>temp1["+i+"] is </b>=>"+temp1[i]+"<br>");
        //tmsg = tmsg + " " + temp1[i];
        var newHidInp = document.createElement('input');
        newHidInp.type  = 'hidden';
        newHidInp.name  = 'outArray[]';
        newHidInp.value = temp1[i];
        document.frm.appendChild(newHidInp);
    }
    return false;
} 
```

HTML：

```
 <form name="frm" action="" method="POST" >
  <tr>
<td><font color="red">*</font>Name:<input type="text" name="name" id="name" size="25" onkeyup="onChangeTest('name')" /></td>
<td><font color="red">*</font>Age<input type="text" name="age" id="age" size="25" onkeyup="onChangeTest('age')" />
<input type="submit" name="submit" value="SUBMIT">
</td>
</form>
 </body>
</html> 
```

PHP：

```
<?php
print("<pre>");
print_r(array_unique($_POST['outArray']));

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T07:20:51.767

更改存储更改的方式。如果您将字段 ID 存储为对象键（例如），您可以通过PHP 等`temp1["username"] = true`轻松使用`$.post("/somepage.php", temp1)`和读取值。`$_POST["username"]`

# jquery - Uploadify onComplete 没有被调用

> ID：10186781
> 
> 赞同：2
> 
> 时间：2012-04-17T07:13:34.033
> 
> 标签：jquery, spring-mvc, uploadify

我正在使用 spring-mvc 和 jquery uploadify 上传图像，我的 uploadify 脚本将图像保存在我的服务器上，我的图像正在保存但 uploadify 抛出 HTTP 错误并且 onComplete 没有被触发。我确保我的脚本正在返回一些东西。这是我的代码。

```
 $(document).ready(function() {
             $('#upload').click(function() {
                 $('#uploadify').uploadifyUpload();
                    return false;
                 });
                 $('#uploadify').uploadify({
                    'uploader': 'js/uploadify/uploadify.swf',
                    'script': 'uploadcreate.htm;jsessionid=${sessionId}',
                    'multi': false,
                    'auto' : true,
                    'fileDesc': 'JPG Image Files (*.jpg),JPG Image Files (*.JPG),JPG Image Files (*.JPEG)',
                    'fileExt' : '*.jpg;*.jpeg;*.JPEG;',
                    'cancelImg': 'js/uploadify/cancel.png',
                    onComplete: function (event, queueID, fileObj, response, data) {
                        alert("as");
                        //$("#showimage").html('<img src="' + response + '" height="500" width="500" /><br />http://localhost:8080' + fileObj.filePath);

                         }
                 });
         }); 
```

我的控制器代码是：

```
@RequestMapping(value="/uploadcreate.htm", method = RequestMethod.POST)
    public JSONObject uploadcreate(UploadProperties uploadbean, BindingResult result, HttpServletRequest request, Model model) {
        System.out.println("started uploading");
        if (result.hasErrors()) {
            for (ObjectError error : result.getAllErrors()) {
                System.err.println("Error in uploading: " + error.getCode()
                        + " - " + error.getDefaultMessage());
            }
            return null;
        }
        String relativeWebPath = "/WEB-INF/uploads";
        String absoluteFilePath = request.getServletContext().getRealPath(relativeWebPath);
        String username = request.getUserPrincipal().getName();

        JSONObject filepath = uploadFacade.upload(uploadbean, username, absoluteFilePath);

        model.addAttribute("filePath", filepath);
        return filepath;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:29:32.287

上述实现的主要问题是 sessionId，我的 Spring Security 不知何故创建了不同的会话 ID，这就是为什么我的请求没有通过身份验证。我像这样从我的 spring 安全配置文件中删除了安全性

```
<intercept-url pattern="/uploadcreate.htm" filters="none" /> 
```

之后我遇到了其他一些问题，但我通过正确处理会话绕过了这个问题。

# android - .apk 文件中没有 SQLite 数据库？它显示不匹配？

> ID：10186785
> 
> 赞同：2
> 
> 时间：2012-04-17T07:14:13.737
> 
> 标签：android, sqlite, android-emulator

我在 Android 中创建了一个简单的登录应用程序。
通过创建一个名为 MyDB 的数据库和一个名为 UserLogin 的表，我在 SQLite 数据库中插入了用户名和密码。我在eclipse中把它放到我项目的assets文件夹中。
在模拟器上我可以登录成功，但是当我制作一个.apk文件并将它放在移动测试设备上时，登录不成功，为什么？

# android - 如何使用 AsyncTask 将 json 数组显示到列表视图？

> ID：10186787
> 
> 赞同：1
> 
> 时间：2012-04-17T07:14:28.743
> 
> 标签：android, json, listview, android-asynctask, arrays

您好，我是 android 新手，所以请让我知道我错在哪里。

我想将 jsonarray 转换为自定义列表视图。我尝试了很多，但我没有得到解决方案。我在 strValue1 中得到了我想要的值（请检查下面的代码，Activites_Activity.java）。现在，我想将此 strValue1 传递到列表视图中。但我无法将其转换为列表视图。

所以请让我知道我应该怎么做？

我得到了错误

```
04-17 12:52:55.795: E/AndroidRuntime(765): FATAL EXCEPTION: AsyncTask #1
04-17 12:52:55.795: E/AndroidRuntime(765): java.lang.RuntimeException: An error occured               while executing doInBackground()
04-17 12:52:55.795: E/AndroidRuntime(765):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
04-17 12:52:55.795: E/AndroidRuntime(765):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
04-17 12:52:55.795: E/AndroidRuntime(765):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
04-17 12:52:55.795: E/AndroidRuntime(765):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
04-17 12:52:55.795: E/AndroidRuntime(765):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-17 12:52:55.795: E/AndroidRuntime(765):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
04-17 12:52:55.795: E/AndroidRuntime(765):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
04-17 12:52:55.795: E/AndroidRuntime(765):  at java.lang.Thread.run(Thread.java:1096)
04-17 12:52:55.795: E/AndroidRuntime(765): Caused by: android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
04-17 12:52:55.795: E/AndroidRuntime(765):  at android.view.ViewRoot.checkThread(ViewRoot.java:2802)
04-17 12:52:55.795: E/AndroidRuntime(765):  at android.view.ViewRoot.focusableViewAvailable(ViewRoot.java:1596)
04-17 12:52:55.795: E/AndroidRuntime(765):  at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:451)
04-17 12:52:55.795: E/AndroidRuntime(765):  at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:451)
04-17 12:52:55.795: E/AndroidRuntime(765):  at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:451)
04-17 12:52:55.795: E/AndroidRuntime(765):  at android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:451)
04-17 12:52:55.795: E/AndroidRuntime(765):  at android.view.View.setFlags(View.java:4474)
04-17 12:52:55.795: E/AndroidRuntime(765):  at android.view.View.setFocusableInTouchMode(View.java:3104)
04-17 12:52:55.795: E/AndroidRuntime(765):  at android.widget.AdapterView.checkFocus(AdapterView.java:694)
04-17 12:52:55.795: E/AndroidRuntime(765):  at android.widget.ListView.setAdapter(ListView.java:437)
04-17 12:52:55.795: E/AndroidRuntime(765):  at com.rahul.cheerfoolz.activites.Activites_Activity$activites.doInBackground(Activites_Activity.java:141)
04-17 12:52:55.795: E/AndroidRuntime(765):  at com.rahul.cheerfoolz.activites.Activites_Activity$activites.doInBackground(Activites_Activity.java:1)
04-17 12:52:55.795: E/AndroidRuntime(765):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
04-17 12:52:55.795: E/AndroidRuntime(765):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-17 12:52:55.795: E/AndroidRuntime(765):  ... 4 more 
```

谢谢。

Activity_Activity.java

```
public class Activites_Activity extends CheerfoolznativeActivity {

 TextView txtactivity;
 ListView list;
 LazyAdapter adapter;
 ImageView img;
 ProgressBar pgb;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_activites);
    setHeader("Activites");

/*
     list=(ListView)findViewById(R.id.activity_listView);
    adapter=new LazyAdapter(this, mImages,mTitle);
    list.setAdapter(adapter);
*/
    txtactivity = (TextView) findViewById(R.id.activity_textView);
    img=(ImageView)findViewById(R.id.activity_image);
    pgb = (ProgressBar)findViewById(R.id.activity_progressBar);
    new activites().execute();
}

public class activites extends AsyncTask<Void, Void, Void> {
    String parsedString = "\n";  
    String strValue1 ;
    public int i=0;

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
         pgb.setVisibility(View.VISIBLE);
    }

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub
        String url = " Here my json URL ";

        String strResponse = util.makeWebCall(url);

        try {
            JSONObject objResponse = new JSONObject(strResponse);

            JSONArray jsonnodes = objResponse.getJSONArray(API.cheerfoolz_activities.NODES);
            Log.i(" NO of entries===>" +Activites_Activity.class.getName(),"Number of entries " + jsonnodes.length());

            ArrayList<String> items = new ArrayList<String>();

            for (i = 0; i < jsonnodes.length(); i++) 
            {
                String str = Integer.toString(i); 
                Log.i("Value of i",str);

                JSONObject jsonnode = jsonnodes.getJSONObject(i); 

                JSONObject jsonnodevalue = jsonnode.getJSONObject(API.cheerfoolz_activities.NODE);

                strValue1 = jsonnodevalue.getString(API.cheerfoolz_activities.TITLE);

                Log.i("JSONArray", strValue1);
                //parsedString += " \n\n Value of stored parse :  => " + strValue1;
                parsedString = parsedString.trim(); //this will remove the blank white space

                items.add(strValue1);

                parsedString += " \n Value added in list  => " + items;

                Log.i("Value of items : ", parsedString);

            }

            //List<String> list = Arrays.asList((String[])jsonnodes.toString());
            //String[] values= new String[]{items.toString()};
            //myListView.setListAdapter(

            /* list=(ListView)findViewById(R.id.activity_listView);
               // adapter=new LazyAdapter((Activity) getApplicationContext(), mImages,mTitle);
                list.setAdapter(adapter);*/

            ListView myListView = (ListView)findViewById(R.id.activity_listView);
            myListView.setAdapter(new ArrayAdapter(getApplicationContext(), android.R.layout.simple_expandable_list_item_1, items));

    //      ArrayAdapter<String> adapter= new ArrayAdapter<String>(Activites_Activity.this, android.R.layout.simple_list_item_1,items);
    //      myListView.setAdapter(adapter);
            //Log.i("contact", items1 );

        }
        catch (JSONException e) {

            e.printStackTrace();
            txtactivity.setText(e.getMessage());

        }

        return null;
    }

    @Override
    protected void onProgressUpdate(Void... values) {
        // TODO Auto-generated method stub
        super.onProgressUpdate(values);
    }

    @Override
    public void onPostExecute(Void result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);

        txtactivity.setText(parsedString);
        pgb.setVisibility(View.GONE);
        //img.setImageResource(parsedString);
    }
}

} 
```

LazyAdapter.java

```
public class LazyAdapter extends BaseAdapter{

private Activity context;
private String[] title;
private String[] images;
private LayoutInflater inflater;

public LazyAdapter(Activity context,String[] img ,String[] title) {  
    super();  

    this.context = context;  
    this.title = title;  
    this.images = img; 

    this.inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);  
}  

@Override  
public int getCount() {  
    // TODO Auto-generated method stub  
    return title.length;  
}  

@Override  
public Object getItem(int position) {  
    // TODO Auto-generated method stub  
    return null;  
}  

@Override  
public long getItemId(int position) {  
    // TODO Auto-generated method stub  
    return 0;  
}  

public static class ViewHolder  
{  
    ImageView imgViewLogo;  
    TextView txtViewTitle;  

}  

@Override  
public View getView(int position, View convertView, ViewGroup parent) {  
    // TODO Auto-generated method stub  

    ViewHolder holder;  
    if(convertView==null)  
    {  
        holder = new ViewHolder();  
        convertView = inflater.inflate(R.layout.activity_listitem, null);  

        holder.imgViewLogo = (ImageView) convertView.findViewById(R.id.activity_list_logo);  
        holder.txtViewTitle = (TextView) convertView.findViewById(R.id.activity_list_title);  

        convertView.setTag(holder);  
    }  
    else  
        holder=(ViewHolder)convertView.getTag();  

 //  holder.imgViewLogo.setImageResource(images[position]);  
    holder.txtViewTitle.setText(title[position]);  

    return convertView;  
}   

} 
```

makeWebCall.class

```
public static String makeWebCall(String url) {

    DefaultHttpClient client = new DefaultHttpClient();

    HttpGet httpRequest = new HttpGet(url);

    try {

        HttpResponse httpResponse = client.execute(httpRequest);

         final int statusCode = httpResponse.getStatusLine().getStatusCode();

         if (statusCode != HttpStatus.SC_OK) {
          /*  Log.i(getClass().getSimpleName(),
                "Error => " + statusCode + " => for URL " + url);*/
            return null;
         }

         HttpEntity entity = httpResponse.getEntity();
            InputStream is = entity.getContent();
            return iStream_to_String(is);
    }
    catch (IOException e) {
        httpRequest.abort();
      // Log.w(getClass().getSimpleName(), "Error for URL =>" + url, e);
    }

    return null;

 }

public static String iStream_to_String(InputStream is1)
{
     BufferedReader rd = new BufferedReader(new InputStreamReader(is1), 4096);
     String line;
     StringBuilder sb =  new StringBuilder();
     try {
        while ((line = rd.readLine()) != null) {
                sb.append(line);
         }
         rd.close();

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
     String contentOfMyInputStream = sb.toString();
     return contentOfMyInputStream;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:32:43.953

假设您的 ListView 修改是正确的，然后移动此代码：

```
ListView myListView = (ListView)findViewById(R.id.activity_listView);
            myListView.setAdapter(new ArrayAdapter(getApplicationContext(), android.R.layout.simple_expandable_list_item_1, items)); 
```

从`AsyncTask`'`doInBackground`方法到`onPostExecute`函数。您不能`View`从内部修改任何 s `doInBackground`，您必须在保证在事件调度线程上运行的回调函数之一中进行。

# php - PHP中的时钟小部件

> ID：10186790
> 
> 赞同：0
> 
> 时间：2012-04-17T07:14:46.920
> 
> 标签：php, wordpress, date, time

我需要通过 PHP 中的 wordpress 在我的网站中显示系统日期。它会显示一次系统时间，但不会随着时间的流逝而更新。我需要根据我的系统日期更改它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T07:20:55.507

您无法使用 PHP 显示系统时间。如果你想显示你的系统时间，你只需要使用 javascript。

尝试这个，

```
 var currentTime = new Date()
  var hours = currentTime.getHours()
  var minutes = currentTime.getMinutes()

  var suffix = "AM";
  if (hours >= 12) {
  suffix = "PM";
  hours = hours - 12;
  }
  if (hours == 0) {
  hours = 12;
  }

  if (minutes < 10)
  minutes = "0" + minutes

  document.write("<b>" + hours + ":" + minutes + " " + suffix + "</b>") 
```

***更新：***

如果你想展示一切，请试试这个。

```
<script type="text/javascript">
   document.write(new Date());
</script> 
```

# ios - performSegueWithIdentifier 给了我 NSInvalidArgumentException

> ID：10186796
> 
> 赞同：1
> 
> 时间：2012-04-17T07:14:59.977
> 
> 标签：ios, segue

我正在尝试制作一个简单的基于 TabBar 的应用程序，该应用程序带有一个中心按钮来拍照、添加评论并上传（就像许多其他应用程序一样）。

到目前为止，我得到了在自定义视图控制器 (MSPickPhotoViewController) 中工作的相机东西作为我的标签栏项目之一，现在我想将它交给 NavigationController 允许输入一些信息并将照片上传到服务器。我正在使用情节提要并尝试使用从我的 MS PickPhotoViewController 到导航控制器的 segue。我给了 segue 一个标识符“addPhoto”，我称之为：

```
[self performSegueWithIdentifier:@"addPhoto" sender:self]; 
```

我还在 MSPickPhotoViewController 中实现了以下内容，以交出之前拍摄的照片：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([[segue identifier] isEqualToString:@"addPhoto"]) {
        MSPostPhotoViewController *vc = [segue destinationViewController];  
        vc.image.image = self.image;
    }
} 
```

我总是遇到异常

```
'NSInvalidArgumentException', reason: 'Receiver (<MSPickPhotoViewController: 0x189770>) has no segue with identifier 'addPhoto'' 
```

MSPickPhotoViewController 本身没有按钮，它只是打开一个操作表来选择是拍照还是从库中选择一张并应将其交给。

有什么建议么？

问候，比约恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T05:20:45.330

好的，我知道了：

1.  在再次运行之前删除 iphone 上的应用程序总是好的。故事板从未刷新。
2.  最后执行了 segue（正如我从日志中看到的那样），但我忘记隐藏模式 UiImagePickerController 并且没有看到下一个视图。

仍然在学习...

# apache-flex - 如何在 Flex 移动项目的 Spark 皮肤中使用带有 CSS 的嵌入字体？

> ID：10186797
> 
> 赞同：3
> 
> 时间：2012-04-17T07:15:08.440
> 
> 标签：apache-flex, mobile, adobe, skin, embedded-fonts

描述问题的简短示例。[使用以下文件（和OpenSans 字体](http://www.fontsquirrel.com/fonts/open-sans)）设置一个常用的 Flex 移动项目。

主.mxml

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
           xmlns:s="library://ns.adobe.com/flex/spark"
           applicationDPI="160">
    <s:layout><s:VerticalLayout/></s:layout>

    <fx:Style source="style.css"/>

    <s:Label text="Static Label"/>
    <s:Button label="Static Button" skinClass="MyButtonSkin"/>
</s:Application> 
```

样式.css

```
@namespace s "library://ns.adobe.com/flex/spark";

@font-face {
    src: url("fonts/opensans/OpenSans-Bold.ttf");
    fontFamily: OpenSansBoldEmbedded;
    embedAsCFF: true;
}

s|Label,
s|Button
{
    fontFamily: OpenSansBoldEmbedded;
    font-lookup: embeddedCFF;
} 
```

MyButtonSkin.mxml

```
<s:Skin xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:s="library://ns.adobe.com/flex/spark">
    <!-- host component -->
    <fx:Metadata>
        [HostComponent("spark.components.Button")]
    </fx:Metadata>

    <s:Label id="labelDisplay" />
</s:Skin> 
```

结果是简单标签使用嵌入字体设置样式，但按钮中的标签不是。所以它看起来像这样：http: [//img813.imageshack.us/img813/44/skinningtest.png](http://img813.imageshack.us/img813/44/skinningtest.png)

我已经尝试过其他 CSS 属性，如颜色和字体大小，它适用于两者。只有嵌入的字体在 Spark 皮肤中不起作用。

使用嵌入字体设置按钮中的标签样式时，我错过了什么？

* * *

**解决方案**

在导入 (@font-face) 和使用时 (.OpenSansEmbeddedBold) 使用属性 fontWeight 和 fontStyle。嵌入粗体字体并使用它是不够的。

```
/* Import the different font weights and styles */
@font-face {
        src: url("fonts/opensans/OpenSans-Regular.ttf");
        fontFamily: OpenSansEmbedded;
}

@font-face {
        src: url("fonts/opensans/OpenSans-Bold.ttf");
        fontFamily: OpenSansEmbedded;
        fontWeight: bold;
}

@font-face {
        src: url("fonts/opensans/OpenSans-Italic.ttf");
        fontFamily: OpenSansEmbedded;
        fontStyle: italic;
}

@font-face {
        src: url("fonts/opensans/OpenSans-BoldItalic.ttf");
        fontFamily: OpenSansEmbedded;
        fontWeight: bold;
        fontStyle: italic;
}

/* Register fonts as styleNames for further use */
.OpenSansEmbedded
{
        fontFamily: OpenSansEmbedded;
}

.OpenSansEmbeddedBold
{
        fontFamily: OpenSansEmbedded;
        fontWeight: bold;
}

.OpenSansEmbeddedItalic
{
        fontFamily: OpenSansEmbedded;
        fontStyle: italic;
}

.OpenSansEmbeddedBoldItalic
{
        fontFamily: OpenSansEmbedded;
        fontWeight: bold;
        fontStyle: italic;
} 
```

在 MXML 中使用定义的类作为 styleName

```
<s:Label text="Static Label" styleName="OpenSansEmbeddedBold"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T10:29:05.083

我不知道确切原因，但尝试添加`fontWeight: normal;`你的 CSS，这会有所帮助。在将 fontFamily 更改为 Verdana 并看到按钮标签是粗体后，我得出了这个结论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T21:29:55.867

对于您应该使用 embedAsCFF: false 的按钮

```
@namespace s "library://ns.adobe.com/flex/spark";

@font-face {
    src: url("fonts/opensans/OpenSans-Bold.ttf");
    fontFamily: OpenSansBoldEmbedded;
    embedAsCFF: true;
}

@font-face {
    src: url("fonts/opensans/OpenSans-Bold.ttf");
    fontFamily: OpenSansBoldEmbeddedForBtn;
    embedAsCFF: false;
}

s|Label
{
    fontFamily: OpenSansBoldEmbedded;
    font-lookup: embeddedCFF;
}

s|Button
{
    fontFamily: OpenSansBoldEmbeddedForBtn;
} 
```

# nservicebus - NServiceBus 网关公共 url

> ID：10186798
> 
> 赞同：1
> 
> 时间：2012-04-17T07:15:11.313
> 
> 标签：nservicebus

在我的应用程序中，我在端点上设置了 NServiceBus 网关，并且能够使用同一台机器上的 url [http://localhost/ {Endpoint name} 访问它。](http://localhost/)

我的问题是我必须做什么才能使用公共 IP 地址或域名从外部机器访问该端点。

例如，如何使用 url http://{My Public ip address}/{Endpoint name} 访问网关端点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:46:47.290

我自己找到了答案，你要做的就是把频道地址改成你想要的域名

```
<GatewayConfig>    
  <Channels>
    <Channel Address="http://{Your domain name}/{Endpoint name}/" ChannelType="Http" Default="true"/>
   </Channels>
</GatewayConfig> 
```

# javascript - JavaScript 在不同的选择选项上加载不同的函数

> ID：10186800
> 
> 赞同：0
> 
> 时间：2012-04-17T07:15:16.843
> 
> 标签：javascript, events, dom

我需要 JavaScript 在不同的选择选项上调用不同的函数。例如

```
<select name="city">
    <option value="1" onselect="function_one()">One</option>
    <option value="2" onselect="function_two()">Two</option>
    <option value="3" onselect="function_three()">Three</option>
    <option value="4" onselect="function_four()">Four</option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:20:30.540

您应该这样做，因为选项标签不支持 onclick 和 onselect 属性。

```
<select name="city" onchange="selectionchanged(this)">
    <option value="1" >One</option>
    <option value="2" >Two</option>
    <option value="3" >Three</option>
    <option value="4" >Four</option>
</select>

<script type="text/javascript">

function selectionchanged(e) {
    if (e.value == "1") 
        function_one();
    else if (e.value == "2") 
        function_two();
    else if (e.value == "3") 
        function_three();
    else if (e.value == "4") 
        function_four();
}
</script> 
```

[演示](http://jsfiddle.net/ocanal/3REbC/)

# jquery - jQuery 和 Ajax：我如何“激活”一个事件？

> ID：10186805
> 
> 赞同：0
> 
> 时间：2012-04-17T07:15:39.860
> 
> 标签：jquery, ajax

我对 jQuery 很陌生，对于我的工作，我曾经使用一些 JQuery 免费库并破解它们以获得我需要的东西。

现在我陷入困境，因为我有一个 JQuery 必须在页面加载时做一些事情，所以我使用“经典”JQuery 文档 onload 方法

```
$(document).ready(function(){
....
} 
```

当然，该方法在页面第一个运行时“加载数据”一次。

现在我有一些代码片段，它们使用 Ajax 调用来更改页面及其内容。因此，包含在其中的 JQuery 代码片段`ready function`必须再次调用和执行，但这不会发生，因为`ready function`无法调用。

我试过用谷歌搜索这个，但我的小经验并没有把我指向正确的地方。

那么，有一种“标准方式”来调用我的 JQuery 函数**而不直接将 Ajax 调用移入 JQuery**吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:24:52.493

如果我很好理解你应该在一个函数中重构你的代码，例如

```
var codeToBeExecuted = function() {
   /* your code here */
}; 
```

因此，当 document.ready 事件发生时，只需像这样调用该函数

```
$(document).ready(function(){
   codeToBeExecuted()
} 
```

以及当您执行 ajax 调用时（例如使用`deferred objects`）

```
$.when($.get(....)).done(function() {
    codeToBeExecuted()
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T07:26:32.043

试试这个：

```
$(document).trigger("ready"); 
```

# ios - 大型动画的 CAKeyframeAnimation 丢帧

> ID：10186807
> 
> 赞同：1
> 
> 时间：2012-04-17T07:15:48.380
> 
> 标签：ios, performance, animation

我有一个大型动画（~30ish 层和~150 个关键帧）。当我将该信息输入一组 CAKeyframeAnimation 对象时，动画需要一段时间才能开始（如果它很大，可以理解）但是当它开始时，应该在加载期间发生的帧已经被丢弃并从那里拾取.

我真的很想避免这种情况，我不介意动画是否延迟，但我确实介意它会丢失很多帧。

有什么办法可以减轻这种情况吗？或者我应该放弃整个事情并在openGL ES中实现我自己的动画师？

# fortran - 使用 IMSL 时出现 MKL 错误

> ID：10186809
> 
> 赞同：1
> 
> 时间：2012-04-17T07:16:01.873
> 
> 标签：fortran, intel, intel-mkl, imsl

我正在使用带有 MKL 的 Intel Virtual Fortran 的 IMSL。我尝试使用 IMSL 的例程。它编译得很好，但是当我尝试执行该文件时，它出现了一个错误：

```
MKL ERROR: Parameter 7 was incorrect on entry to SGEEVX

*** TERMINAL ERROR 2 from EVCRG.  The required storage cannot be allocated.
***          The specified N may be too large, where N = 1064682127. 
```

以下是我正在使用的代码：

```
PROGRAM test_evcrg
include 'link_fnl_static.h'  
!DEC$ OBJCOMMENT lib:'libiomp5mt.lib'

IMPLICIT NONE
REAL, Dimension(2,2) :: p,vr
REAL, Dimension(2) :: w

p = RESHAPE([0.7, 0.3, 0.5,0.5],[2,2])

CALL EVCRG (p,w,vr) 

WRITE (*,*), w
WRITE (*,*)
WRITE (*,*), vr

END PROGRAM test_evcrg 
```

我该如何解决这个问题？

在我添加使用 EVCRG_INT 之后

它给出了错误信息：

```
 test_evcrg.f90(14): error #6285: There is no matching specific subroutine for this generic subroutine call. [EVCRG]
    CALL EVCRG(p,w,vr)
---------^
    compilation aborted for test_evcrg.f90 (code 1) 
```

谢谢。

在 IMSL 用户指南中，它说：

```
 FORTRAN 90 Interface
   Generic:  CALL EVCRG (A, EVAL, EVEC [,…])
   Specific:  The specific interface names are S_EVCRG and D_EVCRG. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T07:43:51.640

我不太了解 IMSL，但我认为接口不匹配。因为您没有`use`任何 IMSL 模块，所以您使用的不是 Fortran 90 接口，而是需要更多参数的 Fortran 77 接口。请参阅[IMSL 手册](http://www.roguewave.com/Portals/0/products/imsl-numerical-libraries/fortran-library/docs/6.0/math/default.htm?turl=evcrg.htm)。无论`use`是模块，还是将调用更改为`CALL EVCRG (2, p, 2,w, vr, 2)`.

您可以使用的 use 语句可能是`USE numerical_libraries`.

- - 编辑 - -

这意味着，添加使用是一件好事。现在它暴露了，调用中确实存在错误。论据是错误的。参数 2 和 3，即 EVAL 和 EVEC 必须是`COMPLEX`!

# objective-c - “PerformSelector 命名保留对象的选择器”错误和 ARC

> ID：10186810
> 
> 赞同：2
> 
> 时间：2012-04-17T07:16:10.250
> 
> 标签：objective-c, automatic-ref-counting

好的 ARC 我们如何优雅地解决这个问题？

问题是使用 WSDL2OBJC 创建的代码。我修复了所有其他问题，但这个问题让我无法理解。

```
if ([super respondsToSelector:@selector(initWithCoder:)] && ![self isKindOfClass:[super class]]) {
    self = [super performSelector:@selector(initWithCoder:) withObject:decoder];
} else {
    self = [super init];
} 
```

在 WSDL2OBJC 中，他们在这里解决了这个问题，如下所示：

“在 Targets->Build Phases-> Compile Sources 对于所有 wsdl2objc 源添加：-fno-obcj-arc”

但这实际上不是对代码的修复.. 仅阻止 WSDL2OBJC 源上的 ARC..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-29T05:48:15.050

试试这个解决方案：

```
self = [super performSelector:NSSelectorFromString(@"initWithCoder:") withObject:aDecoder]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T07:19:34.010

如果您知道超类，您就不能简单地放下这个烂摊子并直接调用适当的初始化程序吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T13:18:08.677

我决定放弃 WSDL2OBJC 上的 ARC 并使用编译器标志

# php - 在PHP中从出生日期计算年龄

> ID：10186811
> 
> 赞同：3
> 
> 时间：2012-04-17T07:16:11.530
> 
> 标签：php

您遇到的从用户出生日期算出年龄的最精确功能是什么。我有以下代码，想知道如何改进它，因为它不支持所有日期格式并且不确定它是否是最准确的函数（DateTime 合规性会很好）。

```
function getAge($birthday) {
    return floor((strtotime(date('d-m-Y')) - strtotime($date))/(60*60*24*365.2421896));
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-17T07:18:23.147

```
$birthday = new DateTime($birthday);
$interval = $birthday->diff(new DateTime);
echo $interval->y; 
```

应该管用

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-01T04:58:19.563

检查这个

```
<?php
$c= date('Y');
$y= date('Y',strtotime('1988-12-29'));
echo $c-$y;
?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-13T05:58:25.013

使用此代码获得完整年龄，包括年、月和日-

```
 <?php
     //full age calulator
     $bday = new DateTime('02.08.1991');//dd.mm.yyyy
     $today = new DateTime('00:00:00'); // Current date
     $diff = $today->diff($bday);
     printf('%d years, %d month, %d days', $diff->y, $diff->m, $diff->d);
    ?> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-31T02:37:17.037

尝试为此使用[DateTime ：](http://www.php.net/manual/en/book.datetime.php)

```
$now      = new DateTime();
$birthday = new DateTime('1973-04-18 09:48:00');
$interval = $now->diff($birthday);
echo $interval->format('%y years'); // 39 years 
```

[看到它在行动](http://codepad.viper-7.com/sadvTg)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-07T03:53:15.390

这是我的长/详细版本（如果需要，您可以缩短它）：

```
$timestamp_birthdate = mktime(9, 0, 0, $birthdate_month, $birthdate_day, $birthdate_year);
$timestamp_now = time();
$difference_seconds = $timestamp_now-$timestamp_birthdate;
$difference_minutes = $difference_seconds/60;
$difference_hours = $difference_minutes/60;
$difference_days = $difference_hours/24;
$difference_years = $difference_days/365; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-03T13:14:09.303

此功能工作正常。

```
function age($birthday){
 list($day,$month,$year) = explode("/",$birthday);
 $year_diff  = date("Y") - $year;
 $month_diff = date("m") - $month;
 $day_diff   = date("d") - $day;
 if ($day_diff < 0 && $month_diff==0){$year_diff--;}
 if ($day_diff < 0 && $month_diff < 0){$year_diff--;}
 return $year_diff;
} 
```

[见博文](http://sag-3.blogspot.com/2013/05/the-best-age-calculation-code-in-php.html#.UYO1j7TD_nYhttp://sag-3.blogspot.com/2013/05/the-best-age-calculation-code-in-php.html#.UYO1j7TD_nY)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-17T07:29:22.910

这有效：

```
<?
$date = date_create('1984-10-26');
$interval = $date->diff(new DateTime);
echo $interval->y;
?> 
```

如果你告诉我你的`$birthday`变量是什么格式的，我会给你确切的解决方案

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-17T07:30:18.200

将 更改`$date`为`$birthday`。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-17T08:40:55.617

怎么回事？

> strtotime（日期（'dmY'））

因此，您从当前时间戳生成日期字符串，然后将日期字符串转换回时间戳？

顺便说一句，它不起作用的原因之一是 strtotime() 假定数字日期的格式为 m/d/y （即美国的日期格式）。另一个原因是公式中没有使用参数（$birthday）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-02-20T22:35:57.767

为了获得超高的准确性，您需要考虑闰年因素：

```
function get_age($dob_day,$dob_month,$dob_year){
    $year   = gmdate('Y');
    $month  = gmdate('m');
    $day    = gmdate('d');
     //seconds in a day = 86400
    $days_in_between = (mktime(0,0,0,$month,$day,$year) - mktime(0,0,0,$dob_month,$dob_day,$dob_year))/86400;
    $age_float = $days_in_between / 365.242199; // Account for leap year
    $age = (int)($age_float); // Remove decimal places without rounding up once number is + .5
    return $age;
} 
```

所以使用：

```
echo get_date(31,01,1985); 
```

管他呢...

注意要查看您的确切年龄到小数点

```
return $age_float 
```

反而。

# api - 自定义日历应用程序的 BlackBerry (BB) API 重复事件

> ID：10186812
> 
> 赞同：1
> 
> 时间：2012-04-17T07:16:13.043
> 
> 标签：api, blackberry, calendar

我正在 BB 本机日历之上构建一个应用程序，并尝试在我的应用程序中检索。但是没有太多信息可用于使用此 API 从本机 BlackBerry 日历中检索重复事件。

有人可以指导我或提供一些示例，以便我可以检索有关 BlackBerry 日历事件的信息吗？

我也浏览了以下链接，但没有太大帮助： [https ://stackoverflow.com/questions/10123724/handling-recurring-events-in-blackberry-calender](https://stackoverflow.com/questions/10123724/handling-recurring-events-in-blackberry-calender)

# javascript - 如何使用来自 javascript 的参数运行 cmd.exe

> ID：10186813
> 
> 赞同：12
> 
> 时间：2012-04-17T07:16:14.407
> 
> 标签：javascript, command-line, cmd, shellexecute

我正在尝试编写应该在其中运行带有指定命令行的 cmd.exe 的 javascript，例如[docs.google.com/file/d/0B7QHCoQDlEvKWUZSX3oxUDI2SDg/edit](http://docs.google.com/file/d/0B7QHCoQDlEvKWUZSX3oxUDI2SDg/edit)：

我在微软网站上阅读了 shellexecute 方法后准备了一个代码：

```
var objShell = new ActiveXObject("Shell.Application");
        objShell.ShellExecute("cmd.exe", "C: cd C:\\pr main.exe blablafile.txt auto", "C:\\WINDOWS\\system32", "open", "1"); 
```

但它不会在 cmd.exe 中插入命令行。

有人可以帮助我吗？先感谢您。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-17T07:54:32.813

也许您的计算机中没有安装（或注册）这个 ActiveX 控件。

`WScript.Shell`应该在每个 Windows 中找到：

```
var run=new ActiveXObject('WSCRIPT.Shell').Run("commands to run"); 
```

如果 中有空格`commands to run`，则需要使用双引号。

**编辑**

以下内容主要来自MSDN： http: [//msdn.microsoft.com/en-us/library/windows/desktop/gg537745 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/gg537745(v=vs.85).aspx)

```
iRetVal = Shell.ShellExecute(
  sFile,
  [ vArguments ],
  [ vDirectory ],
  [ vOperation ],
  [ vShow ]
) 
```

让我们来吧`[vDirectory]`。`path of the directory`文档说：“包含sFile指定的文件的完全限定。如果未指定此参数，则使用当前工作目录。”

这意味着您对此参数的路径无效（`.cmd.exe`在它的末尾）。此外，创建 ActiveX 的所有示例都是这样的：

```
var objShell = new ActiveXObject("shell.application"); 
```

注意 中的小写字母`"shell.application"`。

May12，谢谢你提出这个问题。我以前不知道这个ActiveX控件，它对我来说似乎很有用。

**编辑二**

但是你明白了吗？您的示例在我的应用程序中完美运行：

```
objShell.ShellExecute("cmd.exe", "cd C: C:\\cd c:\\ext_file main.exe test.txt", "C:\\WINDOWS\\system32", "open", 1); 
```

除了三个例外：

1）我在这个答案的前面提到的关于路径的那个

2) 转义`\`也用于参数。

3) 最后一个参数是数字类型，而不是字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-28T16:28:37.320

如果我理解正确，您只对使用参数调用另一个文件感兴趣。这是我从快捷方式或批处理文件中调用另一个文件的示例

如果路径中没有空格

```
 mshta.exe "javascript:new ActiveXObject('WScript.Shell').Run('cmd /c start /max C:\\Windows\\Notepad.exe',0,false);close()" 
```

路径中有空格。双引号替换为#

```
 mshta.exe "javascript:new ActiveXObject('WScript.Shell').Run('cmd /v /c set a=""&call set #=!a:~0,1!&start /max C:\\!#!Program Files (x86)\\Google\\Chrome\\Application\\chrome.exe!#!',1,true);close()" 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-01-27T14:33:14.840

```
var objShell = new ActiveXObject("Shell.Application");
objShell.ShellExecute("cmd.exe", "C: cd C:\\pr main.exe blablafile.txt auto", "C:\\WINDOWS\\system32", "open", "1"); 
```

可以使用

# android - android：重叠图像？

> ID：10186817
> 
> 赞同：1
> 
> 时间：2012-04-17T07:16:22.567
> 
> 标签：android, android-layout, image-processing

这是应用程序“Google Catalogs”的快照。我只是想知道我们如何做这种图像重叠。！[在此处输入图像描述][1]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T07:35:23.293

您可以使用 FrameLayout 将图像堆叠在一起。但是，我怀疑他们会这样做，因为您将在同一个屏幕上拥有无限数量的图像。这迟早会导致内存问题。

**我认为**他们所做的是从该目录中获取一些样本，然后将图像绘制到画布中，然后将其渲染为一个实体。他们可能只为整个面板使用一个画布，然后也以这种方式控制它。

只是我的两分钱。在这里尝试为您考虑可能性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T09:43:17.257

这是我想要的代码。

```
public Bitmap convertImage(Bitmap bitmap, int param1, int param2, int degree) {
        float f1 = 1.0F;
        int i = bitmap.getWidth();
        int j = bitmap.getHeight();

        if (((Math.abs(i - param1) <= 1) || (param1 <= 0))
                && (Math.abs(j - param2) <= 1) || (param2 <= 0) && degree == 0)
            return bitmap;

        Matrix matrix = new Matrix();
        float f4 = 1.0F;
        if (param1 > 0) {
            float f2 = param1;
            float f3 = i;
            f4 = f2 / f3;
        } else if (param2 > 0) {
            float f5 = param2;
            float f6 = j;
            f1 = f5 / f6;
        }

        boolean b1 = matrix.postScale(f4, f1);
        float f7 = degree;
        boolean b2 = matrix.postRotate(f7);
        Bitmap localbitmap = bitmap;

        int k = 0;

        bitmap = Bitmap.createBitmap(localbitmap, 0, k, i, j, matrix, true);
        return bitmap;

    } 
```

用法：-

```
BitmapDrawable drawable = (BitmapDrawable) getResources().getDrawable(
                R.drawable.ic_launcher);
        Bitmap localBitmap2 = convertImage(drawable.getBitmap(), -1, -1,
                -7);

        imageview1.setImageBitmap(localBitmap2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T07:31:13.537

您可以在 FrameLayout 中的 ImageView 对象中使用图像来重叠图像。[在这里](https://stackoverflow.com/questions/6792331/sluggish-zoom-and-scroll-with-gridview-in-android)，我发布了一个示例。

# c# - 无法从 C++/CLI-dll 实现抽象类

> ID：10186819
> 
> 赞同：1
> 
> 时间：2012-04-17T07:16:27.950
> 
> 标签：c#, visual-studio-2010, c++-cli, abstract-class, fix-protocol

**UPD我**[在这里](http://dl.dropbox.com/u/49126809/testQuickFast.zip)放置了 VS2010 解决方案。开始新的赏金。我需要从 .NET 实现自己的 ValueMessageBuilder。如果需要编写 C++ 代码，那么我正在寻找可以向我展示如何做到这一点以及如何将其与 C# 链接的人

我决定实现来自dll的抽象类，所以我写了一些琐碎的代码

```
class MyMessageBuilder : DNMessageBuilder
{
} 
```

作为`DNMessageBuilder`抽象，我在 VS2010 中单击了“实现成员”功能，并将代码更改为：

```
class MyMessageBuilder : DNMessageBuilder
{
    public override ValueMessageBuilder* builder()
    {
        throw new System.NotImplementedException();
    }
} 
```

但是我有编译错误：

> > 指针和固定大小的缓冲区只能在不安全的上下文中使用
> > 
> > “QuickFAST.Messages.ValueMessageBuilder”因其保护级别而无法访问
> > 
> > 可访问性不一致：返回类型“QuickFAST.Messages.ValueMessageBuilder*”比方法“Myproj.Fast.MyMessageBuilder.builder()”更难访问
> > 
> > 无法在此处访问内部结构“ValueMessageBuilder”。

我应该如何实现抽象类`DNMessageBuilder`，我该如何解决我的问题？我需要提供自定义（由我编写）`ValueMessageBuilder`。

[ValueMessageBuilder.h 如果这很重要。](http://code.google.com/p/quickfast/source/browse/src/Messages/ValueMessageBuilder.h?spec=svnc51c96a9f5aa11b5b9731466bdacc678520a3443&r=c51c96a9f5aa11b5b9731466bdacc678520a3443)

[我要实现的抽象类的实现](http://code.google.com/p/quickfast/source/browse/src/DotNet/DNMessageBuilder.h?spec=svn306ac5c838ce60779a64e7cb40f456e11d62cdbf&name=V1_2&r=306ac5c838ce60779a64e7cb40f456e11d62cdbf)

[ValueMessageBuilder 描述](http://code.google.com/p/quickfast/wiki/ValueMessageBuilder)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:53:03.840

在看了你的`C++/CLI`课后，我注意到你`ValueMessageBuilder`是一个纯课，`C++`而不是`C++/CLI`它应该是的课。

因此这可能是一个实现问题，似乎该类是抽象的，但只能在使用时被覆盖，`C++/CLI`而不是`C#`因为它不支持`C++`-only 类型。

### 看

[http://www.codeproject.com/Articles/17741/C-CLI-in-Action-Declaring-CLR-types](http://www.codeproject.com/Articles/17741/C-CLI-in-Action-Declaring-CLR-types)

### 代码

这一行是错误的：

```
class ValueMessageBuilder : public Common::Logger 
```

我不认为它可以更改为与 .NET 兼容的类型，因为它可以处理大量 C++ 对象和类型。你得到的唯一机会是：在一个`C++/CLI`-type 中实现这个类并`C#`通过另一个类或接口将其公开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T03:04:21.790

你不能。如果您使用 ILSpy 之类的反编译器检查 QuickFASTDotNet.dll [，](http://www.ilspy.net/)您会发现它`ValueMessageBuilder`是内部的。事实上，ILSpy 显示了这段代码：

```
using Microsoft.VisualC;
using System;
using System.Runtime.CompilerServices;
using System.Runtime.InteropServices;
namespace QuickFAST.Messages
{
    [DebugInfoInPDB, MiscellaneousBits(64), NativeCppClass]
    [StructLayout(LayoutKind.Sequential, Size = 8)]
    internal static struct ValueMessageBuilder
    {
        private long <alignment member>;
    }
} 
```

我不喜欢 C++，但检查 ValueMessageBuilder.h 我看到 ValueMessageBuilder 没有公共修饰符（例如，[DNMessageBuilder](http://code.google.com/p/quickfast/source/browse/src/DotNet/DNMessageBuilder.h?r=c51c96a9f5aa11b5b9731466bdacc678520a3443)有），根据[这个家伙](http://manski.net/2011/04/19/cpp-cli-cheat-sheet/)，没有可见性修饰符的类/结构将被解释为内部。如果确实需要，可以添加修饰符，然后重新编译 QuickFASTDotNet.dll。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-19T11:28:08.230

问题的主要根源可能与此有关（来自他们的文档页面）：

**重要注意事项 QuickFAST 中 .NET 支持的编码器端目前已禁用。这是由于在编码器中进行了一些重大改进。一旦这些编码器更改稳定，将重新启用 .NET 支持。如果 .NET 编码对您很重要，您可以通过赞助来加速这项工作。**

更何况你为什么要实施`DNMessageBuilder`？如果您只想要自己的消息构建器，您应该继承`ImplBuilderBase`已经从`Messages::ValueMessageBuilder`.

# javascript - 如何使用 AJAX 浏览网站？

> ID：10186828
> 
> 赞同：1
> 
> 时间：2012-04-17T07:17:07.247
> 
> 标签：javascript, ajax, navigation, google-plus

我已经看到 Google+ 中的导航不像其他网站那样正常导航。许多元素保持不变，我确信它不是 **$('body').load()** 或类似的东西，因为页面实际上会重新加载并且 URL 会更改。

谁能向我解释它是如何完成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T07:32:26.537

它正在使用 AJAX。此外，它还使用了[History API](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history)。

History API 允许您控制浏览器的历史记录，更改 URL 以更改网站的状态。每个状态都是不同的 URL。唯一的缺点是它在旧浏览器上不受支持，它使用 hashbangs 回退（它附加`#foo/bar`到 URL）。

所以它使用某种`$('body').load()`，除了它不使用 jQuery。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T07:20:33.410

有很多方法可以实现这一点，您通常需要 ajax/Jquery。

```
$('#randomdiv').load('load.php'); 
```

这会在 div randomdiv 中加载 load.php 生成的 html

# ocaml - 在将 Coq 提取为 Ocaml 时将 nat 转换为 big_int

> ID：10186830
> 
> 赞同：2
> 
> 时间：2012-04-17T07:17:16.860
> 
> 标签：ocaml, coq, coq-extraction

我正在提取转换`nat`为`big_int`

当我使用库时：[ExtrOcamlNatBigInt](http://coq.inria.fr/V8.3/stdlib/Coq.extraction.ExtrOcamlNatBigInt.html)，它没有返回正确的类型`big_int`in`Ocaml`

所以我修改了它（文件 ExtrOcamlNatBigInt），但我找不到定义函数的方法，`nat_case`因为在`Big_int`Ocaml 的库中它们没有函数`nat_case`。

```
Extract Inductive nat => "Big_int.big_int"
  [ "Big_int.zero_big_int" "Big_int.succ_big_int" ] "Big_int.nat_case". 
```

我尝试为`nat_case`by 定义第二个定义：

```
Extract Inductive nat => "Big_int.big_int"
  [ "Big_int.zero_big_int" "Big_int.succ_big_int" ] "(fun fO fS n ->
    let one = Big_int.unit_big_int in
    if n = Big_int.zero_big_int then fO () else fS (n - one))". 
```

这是使用第二个定义后的结果：

```
(** val nat_rect :
    'a1 -> (Big_int.big_int -> 'a1 -> 'a1) -> Big_int.big_int -> 'a1 **)

let rec nat_rect f f0 n =
  let one = Big_int.unit_big_int in
    if n = Big_int.zero_big_int then f () else f0 (n - one)
    (fun _ ->
    f)
    (fun n0 ->
    f0 n0 (nat_rect f f0 n0)) n 
```

我`n`在行出现错误`else f0 (n - one)`：

**文件“Datatypes.ml”，第 68 行，字符 51-52：错误：此表达式的类型为 Big_int.big_int，但表达式应为 int 类型**

我认为是因为`minus`( `-`)

我还修改了`minus`提取：

```
Extract Constant minus => "fun n m -> Big_int.max_big_int Big_int.zero_big_int 
   (Big_int.sub_big_int n m)". 
```

你能帮我定义函数`nat_case`吗`Big_int`？非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T12:10:16.110

`(-)`保留给整数运算，您不能对 . 使用相同的运算符`big_int`。代替

```
(n - one) 
```

经过 ：

```
Big_int.sub_big_int n one 
```

# date - Yii 全局日期格式 (l18n)

> ID：10186831
> 
> 赞同：1
> 
> 时间：2012-04-17T07:17:17.940
> 
> 标签：date, yii, internationalization, format

当我输入：

```
Yii::app()->getLocale()->dateFormat 
```

它为我提供了当前设置语言的正确日期格式。（在我的例子中是'de' => dd.MM.yyyy）。但是当我输入：

```
Yii::app()->format->dateFormat 
```

Yii 给了我 'en_us' 的日期格式（Y/m/d）。

使用 getLocale() 我只会得到保存在 i18n 文件中的字符串。在 ->format->date() 中应该使用这个格式字符串，但我找不到将 i18n 字符串分配给 CDateFormatter 或 CFormatter 对象的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:30:26.260

访问的[`CFormatter`](http://www.yiiframework.com/doc/api/1.1/CFormatter)组件`Yii::app()->format`并不意味着用于开箱即用的本地化；它不会根据应用程序区域设置自动工作。

您可以手动更改相关属性`Yii::app()->format`以使其与应用程序区域设置保持一致，但有一种更方便的方法来格式化日期：

```
Yii::app()->locale->dateFormatter->formatDateTime(...) 
```

更多信息请参见[`CDateFormatter::formatDateTime`](http://www.yiiframework.com/doc/api/1.1/CDateFormatter#formatDateTime-detail)；如果您想要更多控制，还有其他方法，例如[`CDateFormatter::format`](http://www.yiiframework.com/doc/api/1.1/CDateFormatter#format-detail)可用。另请记住，[`CLocale::getNumberFormatter()`](http://www.yiiframework.com/doc/api/1.1/CLocale#getNumberFormatter-detail)它可用于格式化数字。

# tinymce - 当前 TinyMCE 中的填充插件

> ID：10186836
> 
> 赞同：2
> 
> 时间：2012-04-17T07:17:42.713
> 
> 标签：tinymce, padding

我一直在寻找几个小时来找到一个可以在图像中添加诸如“填充：5px”之类的东西的插件。每个人都通过纯 html 做到这一点吗？我们的客户需要一种方法来简单地使用按钮或右键单击上下文菜单来添加它。有什么建议/解决方案，还是我必须自己开发？

不需要关于 TinyMCE 以外的其他产品的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T12:21:44.250

最容易使用的是添加自定义样式表，只需将其设置为参数（[content_css](http://www.tinymce.com/wiki.php/Configuration%3acontent_css)）。tinymce 配置的示例代码片段：

```
...
theme: 'advanced',
content_css: "http://my_server/my_css/my_custom_css_file.css",
... 
```

这个 css 应该包含如下内容

```
img {
    padding-left: 5px;
} 
```

tinymce 按钮的代码有点复杂（但如果明智的话，我也可以发布它）并且使用以下内容设置 css

```
$(ed.get('my_editor_id').getBody()).find('img').css('padding-left','5px'); 
```

**更新：**按钮代码：

```
tinyMCE.init({
   ...
   setup : function(ed) {
      ed.onInit.add(function(ed, evt) {
          ed.addButton ('wrap_div', {
            'title' : 'my title',
            'image' : 'my_image.png',
            'onclick' : function () {
                ed.getBody().find('img').css('padding-left','5px');
            }
        });
      });
   }
}); 
```

# c# - 如何在单击按钮时关闭简单的模式对话框？

> ID：10186838
> 
> 赞同：1
> 
> 时间：2012-04-17T07:17:58.637
> 
> 标签：c#, javascript, jquery, asp.net, modal-dialog

在这里，我试图在单击按钮时关闭模式对话框，但它没有关闭对话框。这是我的代码

```
function closemodal() {
    alert("true");
    $.modal.close();
    return false;
} 
```

和

```
protected void btnOK_Click(object sender, EventArgs e)
{
    ScriptManager.RegisterStartupScript(this.Page, this.GetType(), "ScriptRegistration", "closemodal();", true);
} 
```

我需要调用一个javascript函数，然后我需要关闭该对话框..有什么建议吗？

编辑：

```
 $(document).ready(function () {
        $('#MainContent_uscRetailParameters_btnOK').click(function (e) {
            closemodal();
            return false;
        });
        function closemodal() {
            $.modal.close();
        }
    }); 
```

编辑2：

```
 $('#CusCatPOPUP .basic').click(function (e) 
{ 
$('#CusCatPOPUP-content').modal(); 
return false; 
}
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T07:24:47.377

除非我错过了重点：

```
$('#MainContent_uscRetailParameters_btnOK').click(function (e) {
    MyFunctionCall();   //i.e. call you function here
    $.modal.close();
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T07:50:08.860

其他地方可能有错误，请检查您的浏览器控制台。

创建了一个示例：http: [//jsfiddle.net/eTnJF/](http://jsfiddle.net/eTnJF/)

带代码：

```
$(document).ready(function() {
    $('.open').click( function() {
        $('#modal').modal();
    });

    $('.close').click( function() {
        closemodal();
        return false;
    });

    function closemodal() {
        alert("true");
        $.modal.close();
    }
}); 
```

哪个工作正常:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T08:34:33.733

如果您想简单地关闭 modalpopup，那么 javascript 代码就是。

```
var mpu = $find('ModalPopupExtender1');
mpu.hide(); 
```

希望能帮助到你。

谢谢卡姆兰

# android - 如何让 Android 分享按钮出现在触摸屏上？

> ID：10186841
> 
> 赞同：0
> 
> 时间：2012-04-17T07:18:11.430
> 
> 标签：android

我正在创建一个包含“分享新闻”按钮的新闻应用程序。目前这个按钮在用户阅读新闻时一直显示，这让阅读新闻很烦人。现在我的问题是如何让共享按钮在用户触摸屏幕时显示出来，如果不触摸它会在 2-3 秒后消失。如果我可以在按钮出现/消失期间制作一个小动画（例如，从底部显示并向下消失），那就太好了。请帮忙...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:27:58.123

在您的视图上添加一个触摸事件并更改按钮在触摸后可见的可见性，然后使用处理程序启动计时器三秒钟并设置可见性在三秒钟后消失处理程序代码检查此答案

[运行一个线程几秒钟](https://stackoverflow.com/questions/10136494/running-a-thread-for-some-seconds/10136652#10136652)

# c# - 对简单视图进行过多测试？

> ID：10186843
> 
> 赞同：7
> 
> 时间：2012-04-17T07:18:13.037
> 
> 标签：c#, asp.net-mvc, testing, integration-testing

嗨，我正在整理我的网站，虽然它非常简单，但我决定尽可能多地测试它。使用只编写有用的测试的精神，这些测试可以解释我可以想象发生的情况（重命名脚本或 css 文件等）

我正在使用 Steve Sanderson 的 MVC 集成测试框架，我的测试如下。

我的问题是双重的，这个级别的测试是否“太多”，如果不是，您还能想到哪些其他场景（与开发人员相关，例如重命名或其他任何内容）。

```
using System.Web;
using System.Web.Mvc;
using MvcIntegrationTestFramework.Hosting;
using NUnit.Framework;
using website.Properties;

namespace website.tests
{
    [TestFixture]
    public class HomeControllerIndexTests
    {
        [TestFixtureSetUp]
        public void Setup()
        {
            appHost = AppHost.Simulate("Website");
        }

        [Test]
        public void HomeControllerIndexReturnsTheIndexView()
        {
            appHost.Start(session =>
            {
                var result = session.Get("/Home/Index");
                Assert.AreEqual("Index", ((ViewResult)result.ActionExecutedContext.Result).ViewName);
            });
        }

        [Test]
        public void HomeControllerIndexReturnsCorrectRouteData()
        {
            appHost.Start(session =>
            {
                var result = session.Get("/Home/Index");
                Assert.AreEqual("Home", result.ActionExecutedContext.RouteData.Values["controller"]);
            });
        }

        [Test]
        public void HomeControllerIndexReturnsViewResult()
        {
            appHost.Start(session =>
            {
                var result = session.Get("/Home/Index");
                Assert.IsInstanceOf(typeof(ViewResult), result.ActionExecutedContext.Result);
            });
        }

        [Test]
        public void HomeControllerIndexReturnsNoError()
        {
            appHost.Start(session =>
            {
                var result = session.Get("/Home/Index");
                Assert.IsNull(result.ResultExecutedContext.Exception);
            });
        }

        [Test]
        public void HomeControllerIndexReturnsViewWithSiteCssFile()
        {
            appHost.Start(session =>
            {
                var result = session.Get("/Home/Index");
                Assert.IsTrue(result.ResponseText.Contains("/Content/Site.css"));
            });
        }

        [Test]
        public void HomeControllerIndexReturnsViewWithCorrectTitle()
        {
            appHost.Start(session =>
            {
                var result = session.Get("/Home/Index");
                Assert.IsTrue(result.ResponseText.ToLowerInvariant().Contains("<title>{ me: danielelliott.info(); }</title>"));
            });
        }

        [Test]
        public void HomeControllerIndexReturnsViewContainingBanner()
        {
            appHost.Start(session =>
            {
                var result = session.Get("/Home/Index");
                var expected = HttpUtility.HtmlEncode(Resources.SiteName);
                Assert.IsTrue(result.ResponseText.Contains(expected));
            });
        }

        [Test]
        public void HomeControllerIndexViewIncludesBioParagraph()
        {
            appHost.Start(session =>
            {
                var result = session.Get("/Home/Index");
                var expected = HttpUtility.HtmlEncode(Resources.Bio.ToLowerInvariant());
                Assert.IsTrue(result.ResponseText.ToLowerInvariant().Contains(expected));
            });
        }

        [Test]
        public void HomeControllerIndexViewIncludesServicesParagraph()
        {
            appHost.Start(session =>
            {
                var result = session.Get("/Home/Index");
                var expected = HttpUtility.HtmlEncode(Resources.Services.ToLowerInvariant());
                Assert.IsTrue(result.ResponseText.ToLowerInvariant().Contains(expected));
            });
        }

        [Test]
        public void HomeControllerIndexViewIncludesHistoryParagraph()
        {
            appHost.Start(session =>
            {
                var result = session.Get("/Home/Index");
                var expected = HttpUtility.HtmlEncode(Resources.History.ToLowerInvariant());
                Assert.IsTrue(result.ResponseText.ToLowerInvariant().Contains(expected));
            });
        }

        private AppHost appHost;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:03:39.960

Testing is always context dependent and the risks that you see should guide the amount of testing.

*   How critical it would be if some part is not working after some change?
*   Do you believe that these parts could break when something is changed?
*   How big task it would be to maintain these tests if the structure of the page would change?
*   Do you believe these parts will change often? Does it pay off to automate them?
*   How long will running the tests take when the amount grows? Are you ready to wait that time often to see that latest changes have not broken anything?

If the page is not changing very often, this amount seems like quite much. You can also think if it would be enough to test just a sample of things. For example, it seems that you are including multiple parts to the page. If they are coming from same location and are included with the same mechanism, it seems unlikely that including one would fail if others are there.

On the other hand, it is always easier to reduce the amount. You can start with this when learning and then see if you need to change the approach later.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T09:26:23.320

当我看到您的测试时，我的反应是它们主要验证实现细节。我建议你专注于行为。测试最终用户与站点的交互。验证信息是否存在，而不是其呈现方式。

# algorithm - 最短路径变化

> ID：10186848
> 
> 赞同：2
> 
> 时间：2012-04-17T07:18:33.873
> 
> 标签：algorithm, optimization, shortest-path

我正在寻找与最短路径相关的以下问题的解决方案。

给定一个有向图 G = (V,E)，源 s，目标 t1, t2, ..., tk 并且移动边 {i,j} 的成本是 cij。现在我想知道从 s 到 t1, ..., tk 的最短路径。但是，如果使用顶点 vi [（]不是源或目标），那么我们有额外的成本 C。请注意，两条路径使用相同的顶点 vi，成本 C 只支付一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:49:09.790

**If** you are looking for the shortest path, and **each path is penaltised if using c** then:

Create a modified weightning function:

```
w'(u,v) = w(u,v) + C    if v == c
w'(u,v) = w(u,v)        otherwise 
```

It is easy to see that when running [dijkstra's algorithm](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm) or [Bellman Ford](http://en.wikipedia.org/wiki/Bellman%E2%80%93Ford_algorithm), with `w'` any path that uses `c` is penaltized by exactly `C`, since if `c` appears in the path - it appears exactly once, so `C` is added to the total weight [note that `c` cannot appear more then once in a shortest path], and of course there is no penalty if `c` is not used in this path.

* * *

**EDIT:** I am not sure I understood correctly, if what @SaeedAmiri is mentioning is correct, and **if you want to give the penalty only once [and minimize the total sum of paths to t1,...,tk]** Then you should use a different solution - with a similar idea:

create a weightning function w' such that:

```
w'(u,v) = w(u,v) + C + epsilon    if v == c
w'(u,v) = w(u,v)                  otherwise 
```

Note that it is important epsilon is a small size that can be achieved only on w', and is the smallest possible size.

1.  Run dijkstra or BF on the graph with `w`, let's denote the weights as `W1`
2.  Run dijkstra or BF in the graph with `w'` let's denote the weights as `W2`
3.  If `W1[ti] == W2[ti]` for each ti ∈ { t1, ..., tk } - then you don't need `c` in the shortest paths, and the total result is `SUM(W1[ti])`
4.  Otherwise - the result is min { SUM(W1[ti]) + C , SUM(W2[ti])`

The idea behind step 4 is you got two possibilities:

*   You can get to all of t1, ... , tk without using c, and it will be cheaper then using a path with it, so you return the sum of W2.
*   Or, if ignoring `c` - will only be more expansive - thus you use it freely [and return the sum of W1], and add the penalty only once.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T13:00:06.643

您还没有确切地告诉我们问题出在哪里，但是有一个明确的片段承认从设置的掩护中进行了保持客观的减少。

对于集合覆盖的任意实例，使用源、每个集合的顶点和每个元素的顶点建立一个图。终端 t1, ..., tk 是元素顶点。每个集合顶点到源和与其元素对应的顶点的权重为零的边。在这个图表上，我们必须购买一套覆盖物才能从源头到达终端，每套覆盖物就足够了。

除非您可以告诉我们有关您的实例的信息，否则多项式时间算法的近似比率不会比 Theta(log n) 好，所以我建议使用整数编程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T07:21:00.027

标准的 O(n^3) 动态规划解决方案...

[http://en.wikipedia.org/wiki/Dijkstras_algorithm](http://en.wikipedia.org/wiki/Dijkstras_algorithm)

...仍然有效，只需稍作调整：

只需计算直接成本的邻接矩阵，然后通过考虑快捷方式进行迭代，但是在计算快捷方式的成本时添加 vi。

# css - CSS中的反增量

> ID：10186849
> 
> 赞同：2
> 
> 时间：2012-04-17T07:18:37.143
> 
> 标签：css

我正在尝试获取有序列表，第一项不应该以数字开头。数字应从第二项开始。

请检查我想要实现的这个 URL - [http://jsfiddle.net/kheema/tXtQF/5/](http://jsfiddle.net/kheema/tXtQF/5/)

这里使用 counter-reset 和 counter-increment 第一项显示 0 和第二项从 1 开始.. 如果无论如何我可以删除 0 我的问题将解决。

有人对此有更好的想法吗？

问候， Kheema

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T07:20:51.060

只需将最后一个 CSS 规则更改为

```
ol li:before {content: ""; color: green; display: inline-block; width: ... ; }
ol li + li:before {content: counter(chapter) "."; } 
```

通过这种方式，您可以从第二个`li`元素开始插入内容（我使用过`li + li`，因此它也可以使用`IE8`）

见小提琴：http: [//jsfiddle.net/WwNqN/](http://jsfiddle.net/WwNqN/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T07:24:13.007

尝试添加此规则：

```
ol li:nth-of-type(1):before{content: "";} 
```

这将删除第一个元素的零。

# iphone - xcode - 解码 xml 输出字符串

> ID：10186855
> 
> 赞同：-1
> 
> 时间：2012-04-17T07:19:01.037
> 
> 标签：iphone, objective-c, xml, xcode, decode

```
NSString *col1 = [aBook.name stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@" \n\t"]];

NSLog(@"column1: %@", col1); //output:-  ABC+Company 
```

这是我的 xml 数据输出。它带有“+”标记。我该如何解码？请你帮助我好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T07:23:29.687

您的意思是获取由“+”号分隔的部分？你可以这样做：

```
NSArray *stringArray = [col1 componentsSeparatedByString:@"+"];

[stringArray objectAtIndex:0]; //ABC
[stringArray objectAtIndex:1]; //Company 
```

如果要删除/替换“+”号，可以这样做：

```
NSString* string = [col1 stringByReplacingOccurrencesOfString:@"+" withString:@""]; //last string can be empty or have a string value 
```

希望这对您有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T07:25:02.727

如果这是您所追求的，您还可以用空格替换加号：

```
NSString *name = [col1 stringByReplacingOccurrencesOfString:@"+" withString:@" "]; 
```

# javascript - RegEx 从 _GET 请求中获取值

> ID：10186860
> 
> 赞同：1
> 
> 时间：2012-04-17T07:19:12.760
> 
> 标签：javascript, regex

我将在不久的将来阅读有关 RegEx 的更多信息，但现在我无法获得以下内容的 RegEx：

```
?filter=aBcD07_1-&developer=true 
```

只需要得到**aBcD07_1-**，不需要其他。你能帮忙并为我提供一个用于 javascript 的 RegEx

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:22:40.487

试试这个：

```
var rx = /[?&]filter=([a-zA-Z0-9_-]+).*/g;

var result = rx.exec(yourGetStr);

if (result && result.length == 2) {
    alert (result[1]);
} 
```

即使`filter`不是第一个查询参数，此正则表达式也将起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T07:25:00.777

一个简单的`substring`，`indexOf`应该做的伎俩。

```
var startIndex = str.indexOf('filter=') + 7;
str.substring(startIndex, str.indexOf('&', startIndex)); // returns "aBcD07_1" 
```

# yui - 什么 ajax 工具包 zimbra 6.x 正在使用？歌舞伎或 YUI

> ID：10186870
> 
> 赞同：0
> 
> 时间：2012-04-17T07:20:05.077
> 
> 标签：yui, webclient, zimbra

我正在尝试自定义 zimbra Web 客户端并进行更改。我的问题是，zimbra 使用的是什么 Ajax 工具包？雅虎用户界面？还是歌舞伎？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:21:59.920

到现在我都记得是歌舞伎。

# java - Java Axis Webservice 解析错误

> ID：10186872
> 
> 赞同：3
> 
> 时间：2012-04-17T07:20:09.407
> 
> 标签：java, web-services, axis2

我的服务器是一个带有服务模块和肥皂服务器的 Drupal 网站。网络服务允许用户登录并创建或检索新闻。

我已经用 SOAPUi 测试了该服务，它工作正常。wsdl 由soap 服务器生成，它返回一个结构给客户端。

我已经使用轴来生成一个存根类。我用它来创建一个客户端，但是当我调用一个方法“ `serviceStub.user_soap_login(login);`”到我的网络服务时，我得到了这个错误

```
org.apache.axis2.AxisFault: com.ctc.wstx.exc.WstxParsingException: Expected a text token, got START_ELEMENT.
 at [row,col {unknown-source}]: [2,275]
    at org.apache.axis2.AxisFault.makeFault(AxisFault.java:430)
    at soap_server.Soap_server_serviceStub.fromOM(Soap_server_serviceStub.java:5035)
    at soap_server.Soap_server_serviceStub.user_soap_login(Soap_server_serviceStub.java:1027)
    at soap_server.test.main(test.java:67)
Caused by: org.apache.axiom.om.impl.exception.OMStreamingException: com.ctc.wstx.exc.WstxParsingException: Expected a text token, got START_ELEMENT. 
```

谢谢

# c# - 在 WPF，C# 中并行渲染多个选项卡？

> ID：10186874
> 
> 赞同：0
> 
> 时间：2012-04-17T07:20:12.817
> 
> 标签：c#, wpf, tabs

假设我有 3 个带有浏览器的不同选项卡项，并且我希望所有选项卡在打开窗口应用程序后同时加载和呈现。

我的问题：对于可以并行或线程渲染的每个选项卡是否有任何方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:42:08.443

您可以使用使用 a`ListBox`而不是默认值的自定义模板来破解它`ContentPresenter`：

```
 <TabControl>
        <TabItem Header="A">
            <WebBrowser Source="http://www.google.com/" />
        </TabItem>
        <TabItem Header="B">
            <WebBrowser Source="http://www.bing.com/" />
        </TabItem>
        <TabItem Header="C">
            <WebBrowser Source="http://www.yahoo.com/" />
        </TabItem>
        <Control.Template>
            <ControlTemplate TargetType="TabControl">
                <DockPanel>
                    <TabPanel IsItemsHost="True"
                              DockPanel.Dock="{TemplateBinding TabStripPlacement}" />
                    <ListBox ItemsSource="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Items}"
                             SelectedIndex="{TemplateBinding SelectedIndex}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <Grid />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemContainerStyle>
                            <Style TargetType="ListBoxItem">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="ListBoxItem">
                                            <ContentPresenter Content="{Binding Content}"
                                                              ContentTemplate="{Binding ContentTemplate}"
                                                              ContentTemplateSelector="{Binding ContentTemplateSelector}" />
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                                <Setter Property="Visibility"
                                        Value="Hidden" />
                                <Style.Triggers>
                                    <Trigger Property="IsSelected"
                                             Value="True">
                                        <Setter Property="Visibility"
                                                Value="Visible" />
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </ItemsControl.ItemContainerStyle>
                    </ListBox>
                </DockPanel>
            </ControlTemplate>
        </Control.Template>
    </TabControl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T07:37:53.050

一个窗口可以在它自己独立的 UI 线程中启动。但是选项卡将在当前窗口启动的 UI 线程上呈现。

# c# - c#中数据集的Linq查询？

> ID：10186875
> 
> 赞同：0
> 
> 时间：2012-04-17T07:20:22.353
> 
> 标签：c#, linq, c#-4.0, linq-to-dataset

我有数据集，其中包含两个这样的表：

```
DataTable dtFields = new DataTable("tmpFieldTable");

dtFields.Columns.Add("FieldID");
dtFields.Columns.Add("CDGroupID");
dtFields.Columns.Add("CDCaption");
dtFields.Columns.Add("fldIndex");

DataTable dtCDGroup = new DataTable("tmpCDGroup");

dtCDGroup.Columns.Add("CDGroupID");
dtCDGroup.Columns.Add("Name");
dtCDGroup.Columns.Add("Priority");

DataSet ds = new DataSet("tmpFieldSet");

ds.Tables.Add(dtFields);
ds.Tables.Add(dtCDGroup); 
```

如何将以下 SQL 查询写入 LINQ

```
queryString = "Select FieldID, tmpCDGroup.Name, CDCaption, IIF(ISNULL(Priority),99,Priority), fldIndex from tmpFieldList LEFT OUTER JOIN tmpCDGroup ON tmpFieldList.CDGroupID = tmpCDGroup.CDGroupID order by 4,5 "; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:32:41.713

我不确定您为什么要按“4,5”订购，但它会是这样的：

```
var resultArray = tmpFieldList.Join(
    tmpCDGroup,                           // inner join collection
    fieldList => fieldList.CDGroupID,     // outer key selector
    cd => cd.CDGroupID,                   // inner key selector
    (fieldList, cd) => new {             // result selector
        FieldID = fieldList.FieldID, 
        Name = cd.Name, 
        CDCaption = cd.CDCaption, 
        Priority = fieldList.Priority ?? 99, 
        fldIndex = fieldList.fldIndex
     })
.OrderBy(result => result.Priority)
.ThenBy(result => result.fldIndex)
.ToArray(); 
```

然后您可以访问使用，例如，

```
resultArray[0].FieldID 
```

， ETC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T07:57:04.607

这可能会起作用，或者至少有助于使其正常工作。请注意，我已经更改了某些列的类型。

```
var result = from field in dtFields.AsEnumerable()
             join cdGroup in dtCDGroup.AsEnumerable()
             on field.Field<int>("CDGroupID") equals cdGroup.Field<int>("CDGroupID") 
                    into fieldGroup
             from row in fieldGroup.DefaultIfEmpty()
             let priority = row.IsNull("Priority") ? 99 : row.Field<int>("Priority")
             orderby priority, row.Field<int>("fldIndex")
             select new
             {
                 FieldID   = row.Field<int>("FieldID"),
                 GroupName = row.Field<int>("Name"),
                 CDCaption = row.Field<int>("CDCaption"),
                 Priority  = priority,
                 fldIndex  = row.Field<int>("fldIndex")
             }; 
```

# c# - 带有onservervalidation的CustomValidator返回false，但控制移动到下一步asp.net c#

> ID：10186878
> 
> 赞同：1
> 
> 时间：2012-04-17T07:20:41.363
> 
> 标签：c#, asp.net, validation, customvalidator

我正在使用带有 onservervalidation 的 CustomValidator。服务器端函数正常触发并返回 false 值，但验证器未显示错误消息，而是进入下一步。

代码：

```
<asp:CustomValidator OnServerValidate="Naminee_Validate" 
 ErrorMessage="You cannot set yourself as Nominee"
 runat="server" Display="None">*</asp:CustomValidator>  

<asp:ValidationSummary ID="ValidationSummary3" runat="server" DisplayMode="SingleParagraph"
  HeaderText="Error in saving the data: "  />

  protected void Naminee_Validate(object sender, ServerValidateEventArgs e)
    {           
         if (....)
            {
                e.IsValid = false;
            }
         else
            {
                e.IsValid = true;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-25T13:13:11.420

刚刚添加了如下所示的事件处理程序！

```
protected void ButtonClick(object sender, WizardNavigationEventArgs e)
{
    if (!Page.IsValid)
    {
        e.Cancel = true;
    }
} 
```

[http://forums.asp.net/post/1385627.aspx](http://forums.asp.net/post/1385627.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:19:28.177

如果您的标记代码中有除“CustomValidator”之外的其他验证器并且您**不使用**客户端验证，请将（这些其他验证器的） *EnableClientScript*属性设置为“false”。这个属性的默认值是“真”，即使它没有被声明。

该解决方案解决了我添加的类似问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T07:37:18.040

为您要验证代码的 RequireFieldValidator、ValidationSummary 和控件使用验证组属性。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-17T07:28:04.020

使用 requiredfieldvalidator 因为您的目标是检查它是否为空..

# cordova - 如何使用 phonegap 播放本地音频文件

> ID：10186885
> 
> 赞同：1
> 
> 时间：2012-04-17T07:21:01.590
> 
> 标签：cordova

我是 phonegap 的新手，我试图在用户单击播放按钮时播放本地音频文件，并在用户单击暂停按钮时暂停音频...

```
and am adding the path 
1) playAudio("/android_asset/fire.mp3");

But it is showing an error in logcat 

 04-17 07:17:20.221: E/Web Console(4558): ReferenceError: Can't find variable: Media at      file:///android_asset/www/index.html:29 
```

我将音频文件放在资产文件夹中

我正在检查真实设备 HTC android

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T08:19:21.760

您可能试图在 deviceready 事件触发之前调用 Media。

像下面这样的东西可能会有所帮助：

```
<script type="text/javascript">

var myMedia = null;
document.addEventListener("deviceready",onDeviceReady,false);

function onDeviceReady () {
    myMedia = new Media("/android_asset/www/fire.mp3", 
        function(){
            if (myMedia) {
                myMedia.stop();
                myMedia.release();
            }
        }, 
        function(error){
            console.log(error.message);
        }
    );
}

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:47:12.930

如果您在 www 文件夹中有一个名为 audio 的文件夹。您可以使用代码访问其中的本地文件 test.mp3。

```
media = new Media('audio/test.mp3'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T06:11:11.310

给 src = /android_asset/www/mp3filename.mp3 检查它，一旦你可能得到

/android_assets/www/mp3filename.mp3

# java - Java线程池解决单个结果

> ID：10186886
> 
> 赞同：0
> 
> 时间：2012-04-17T07:21:04.847
> 
> 标签：java, multithreading, threadpool

给定一组不相等的输入值（某些输入可能比其他输入更容易解决），如何实现多线程方法来找到单个答案（在一个线程中基于一个“正确”输入）

因此，例如，使用多个线程在这些数组中查找并返回给定的字母（显然在实际程序中具有更大的数据集）

```
Inputs

[A, B, C, D, E, F]
[G, H]
[I, J, K]
[L, M, N, O, P, Q, R, S, T, U, V, W, X, Y, Z] 
```

定位到目标元素后，需要将其从线程返回给调用函数（父线程），并且可以杀死所有其他线程

我考虑过的事情：

使用线程池（'常规'线程，Executor线程）运行并在调用函数（公共变量？）中设置返回值

循环障碍阻塞主线程，直到找到答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T07:28:27.670

您可以使用由其他任务共享和轮询的答案设置 AtomicReference 以查看它们是否应该停止。您还可以使用它来通知（）等待线程。

```
final AtomicReference result = ...
// adds tasks
synchronized(result) {
    while(result.get() == null)
          result.wait();
}

// to check there is no answer. It doesn't have to be synchronized 
// as the value is thread safe.
while(result.get() == null) {

// in the task when a result is found.
synchronized(result) {
    result.set(answer);
    result.notifyAll();
} 
```

我会使用 ExecutorService。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T17:04:36.837

我更喜欢自己做这一切。它提供了更好的解决问题的机会，但也提供了更多的灵活性。我将从控制字段开始：

```
public volatile boolean  foundIt = false;
public final boolean[]   jobList = { true, true, ..., true };
public final Object      threadLock = new Object();
public final Object      controllerLock = new Object(); 
```

（它们不应该真正公开；给它们您可以管理的最小可见性。）然后启动每个线程，让每个线程知道要搜索哪个数组以及完成后应该关闭哪个布尔值（`index`下面）。暂停控制器：

```
synchronized (controllerLock)  { controllerLock.wait(); } 
```

线程中的 Runnable 应该定期检查`foundIt`以确保它仍然是错误的。如果属实，它应该关闭。不需要同步。找到答案时，搜索代码应执行如下操作：

```
haveAnswer:  {
    if (foundIt)  break haveAnswer;   // Already found by another thread.
    synchronized (threadLock)  {
        // Only one thread at a time can get into this block.
        if (foundIt)  break haveAnswer;   // Found since previous check.
        foundIt = true;
    }
    // Add code here to put answer in right place.
    // Only one thread will get this far.
} 
```

关闭时，无论是到达搜索数组的末尾、注意到这`foundIt`是真的还是找到答案，都以：

```
synchronized (controllerLock)  {
    jobList[index] = false;    // Tell world this thread is done.
    for (boolean active : jobList)
        if (active)
            // Another thread is still running.
            return;
    // This was the last thread. We're done. Restart controller.
    controllerLock.notifyAll();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T07:24:28.280

在工作线程中添加对控制器的引用（该控制器保留所有线程的列表）。

控制器有一个方法来表示已找到结果，该方法存储结果并杀死/中断所有线程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T07:28:21.030

不知何故，正在寻找结果的线程需要检查结果是否已经找到。他们可以通过被中断然后检查中断标志来做到这一点（任何抛出 InyerruptedExceprion 的方法都会进行此检查。

他们还可以通过查看其他状态（如结果队列或条件变量）来进行检查。

例如：

```
while (resultQueue.isEmpty()) {
    do a small amount of work
} 
```

检查中断状态：

```
while (!Thread.interrupted()) {
    do a small amount of work
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T15:58:59.137

您可以使用 ExecutorCompletionService 来处理找到的结果。一旦你得到你想要的结果，取消剩余的任务。

我喜欢这种方法的原因是任务保持简单。他们只需要知道如何完成他们的工作并检测他们何时被取消。

然后任务的创建者处理处理结果并确定何时取消剩余工作。

# nfc - NFC 标准（NFC 论坛、ISO/IEC、ECMA

> ID：10186887
> 
> 赞同：17
> 
> 时间：2012-04-17T07:21:09.007
> 
> 标签：nfc, iso, rfid, ecma

我经常被问到标准，NFC 是基于的。我在下面的文字中总结了我的知识。我希望它可以回答这些问题。请随时通过发表评论和回复来更正它 - 我会将其包含在我的文本中。

由于 NFC 基于 RFID，它通常被视为 RFID 的扩展、其形式或子集。这是正确的，因为 NFC 采用了许多现有的 RFID 标准。物理层的 NFC 基本标准是**NFCIP-1**（ISO 18092 或 ECMA 340）——它标准化了两个 NFC 设备之间的通信。NFCIP-1 中使用的 RF 层直接继承自较旧的 ISO 标准 ISO 14443（感应式非接触式卡），更具体地说是该标准中定义的 A 类协议，以及日本 JIS 6319-4（Sony FeliCa 所基于的） NFC Forum Type 3 Tag 标准使用）。其结果是 NFC 设备（读取器/写入器模式）与 ISO 14443 智能卡兼容。

NFCIP-1 新定义了活动模式。在这种模式下，两个正在通信的 NFC 设备都必须有自己的电源来生成 RF 场（即两个移动设备或移动设备和 NFC 阅读器），并且两者都可以是通信的发起者。

第二个主要标准是**NFCIP-2**（ISO 21481 或 ECMA 352），它定义了在相同频率 13.56Mhz 上运行的不同非接触式技术之间的选择机制。它旨在供支持根据 ISO 18092、ISO 14443 进行通信的移动设备使用，但它们也兼容其他非接触式标准，如 ISO 15693。

除了 NFC 论坛还发布了其他一些标准，如**NDEF**（数据格式）**RTD**（用于各种目的的记录类型），以及**NFC 切换**建议，特别是 NFC 用于**蓝牙配对**的建议。Wi-Fi 联盟将 NFC 作为配置家庭网络的四种方式之一引入。

NFC 论坛还定义了在 NFCIP-1 之上用于点对点通信的**LLCP协议。**LLCP 顶部的点对点通信中使用的另一个协议是**SNEP**（简单 NDEF 交换协议），它允许交换类似于标签操作规范的 NDEF 消息。

NFC 设备还可以在**卡模拟模式下**工作，这允许它们假装自己是无源非接触式智能卡。这可能是最重要的模式，因为它允许手机充当非接触式支付卡。NFC 控制器与卡仿真模式中使用的安全元件（用于存储安全应用程序和敏感数据的元件）的互连有几个标准 - **SWP**（尚未标准 - 参见 ETSI TS 102 613 V.9.1.0）和**NFC-威斯康星**(ECMA-373)。

我不是 100% 确定上述文本的正确性，所以我的问题是 - 它是否正确？你有什么要补充的吗？

BR 斯坦

* * *

*添加了来自 NFC 家伙的评论*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T07:43:16.397

我不确定您的问题是否属于 SO，因为它们与编程无关。不过，我有一些评论和补充。

NFC-IP1 基于 ISO 14443，更具体地说是该标准中定义的 Type A 协议，以及 JIS 6319-4（Sony FeliCa 所基于的，也被 NFC Forum Type 3 Tag 标准使用）。NFC-IP1 不以任何方式基于 ISO 15693。

我认为支持 NFC-IP2 的设备没有必要被视为支持 NFC 的设备。此外，LLCP 不需要主动模式。

在谈到 NFC 标准时，我还会提到 SNEP（简单 NDEF 交换协议），它使用 LLCP 来交换 NDEF 消息。除了蓝牙切换之外，WiFi 联盟还针对 WiFi 对 NFC 连接切换进行了标准化。

将安全元件连接到 NFC 控制器：该协议称为 SWP（不是 SWI）。该协议通常用于将 SIM 卡作为安全元件连接到 NFC 控制器。

另一个值得一提的标准是 ISO 7816-4，NFC Forum Type 4 Tag 标准使用了该标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-18T07:47:42.713

NFC 论坛在 2015 年秋季左右增加了 ISO15693 标准兼容性。

# jquery - HTML5 textarea 占位符未出现

> ID：10186913
> 
> 赞同：219
> 
> 时间：2012-04-17T07:23:33.287
> 
> 标签：jquery, forms, html, textarea, placeholder

我无法弄清楚我的标记出了什么问题，但不会出现文本区域的占位符。似乎它可能被一些空格和制表符所掩盖。当您专注于文本区域并从光标所在的位置删除，然后离开文本区域时，就会出现正确的占位符。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">

<html>
    <head>
    </head>

    <body>

    <form action="message.php" method="post" id="message_form">
        <fieldset>

            <input type="email" name="email" id="email" title="Email address"
                maxlength="40"
                placeholder="Email Address" 
                autocomplete="off" required />
            <br />
            <input type="text" 
                name="subject" 
                id="subject" title="Subject"
                maxlength="60" placeholder="Subject" autocomplete="off" required />
            <br />
            <textarea name="message" 
                id="message" 
                title="Message" 
                cols="30" 
                rows="5" 
                maxlength="100" 
                placeholder="Message" required>
            </textarea>
            <br />
            <input type="submit" value="Send" id="submit"/>

        </fieldset>
    </form>
</body>

<script>

$(document).ready(function() {        
    $('#message_form').html5form({
        allBrowsers : true,
        responseDiv : '#response',
        messages: 'en',
        messages: 'es',
        method : 'GET',
        colorOn :'#d2d2d2',
        colorOff :'#000'
    }
);
});

</script>

</html> 
```

* * *

## 回答 #1

> 赞同：792
> 
> 时间：2012-12-27T00:34:58.943

这对我和其他许多人来说一直是一个问题。简而言之，`<textarea>`元素的开始标签和结束标签必须在同一行，否则换行符占据它。因此，不会显示占位符，因为输入区域包含内容（换行符在技术上是有效的内容）。

好的：

```
<textarea></textarea> 
```

坏的：

```
<textarea>
</textarea> 
```

## 更新 (2020)

根据 HTML5 解析规范，这不再是[真的了：](https://html.spec.whatwg.org/multipage/parsing.html#parsing-main-inbody:parse-errors-35)

```
If the next token is a U+000A LINE FEED (LF) character token, 
then ignore that token and move on to the next one. (Newlines 
at the start of textarea elements are ignored as an authoring 
convenience.) 
```

但是，如果您的编辑坚持以 CRLF 结束行，您可能仍然会遇到麻烦。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2014-04-09T12:17:22.293

**`<textarea>`删除开始标签和结束`</textarea>`标签之间的所有空格和换行符。**

```
<textarea placeholder="YOUR TEXT"></textarea>  ///Correct one

<textarea placeholder="YOUR TEXT"> </textarea>  ///Bad one It's treats as a value so browser won't display the Placeholder value

<textarea placeholder="YOUR TEXT"> 
</textarea>  ///Bad one 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-05T21:44:25.250

这是因为某处有空间。我使用的是 jsfiddle，标签后面有一个空格。在我删除空间后它开始工作

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-06-12T19:03:38.153

好吧，从技术上讲，只要在开始标记的结尾“>”和结束标记的开头“<”之间没有字符，它就不必在同一行。`...></textarea>`那就是您需要以以下示例结尾 ：

```
<p><label>Comments:<br>
       <textarea id = "comments" rows = "4" cols = "36" 
            placeholder = "Enter comments here"
            class = "valid"></textarea>
    </label>
</p> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-02-13T08:29:43.900

我知道 Aquarelle 已经（很好地）回答了这篇文章，但以防万一有人遇到其他标签表单的问题，没有输入等文本，我将把它留在这里：

如果您在表单中有输入并且占位符没有显示，因为开头有空格，这可能是您的“值”属性引起的。如果您使用变量来填充输入值，请检查逗号和变量之间是否没有空格。

将 twig 用于 php 框架 symfony 的示例：

```
<input type="text" name="subject" value="{{ subject }}" placeholder="hello" />       <-- this is ok
<input type="text" name="subject" value" {{ subject }} " placeholder="hello" />      <-- this will not show placeholder 
```

在这种情况下，{{ }} 之间的标签是变量，只需确保您没有在逗号之间留下空格，因为空格也是有效字符。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-05-27T14:52:08.633

使用`<textarea></textarea>`而不是在开始和结束标签之间留一个空格作为`<textarea> </textarea>`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-25T13:30:15.453

在我们的案例中，开始和结束标记之间的 textarea 标记不应该是**空格**或**换行符**或任何文本（值）。

如果有空格、换行符或任何文本，则将其视为覆盖占位符的值。

```
 **PlaceHolder Appears**
    <textarea placeholder="Am Default Message"></textarea>

    **PlaceHolder Doesn't Appear**

    <textarea placeholder="Am Default Message">  </textarea>
   <textarea placeholder="Am Default Message"> 
   </textarea>
   <textarea placeholder="Am Default Message">Something</textarea> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-11-18T14:43:14.363

我有同样的问题，只使用一个`.pug`文件（类似于`.jade`）。在我的右括号结束之后，我意识到这也是一个**空间问题。**在我的示例中，您需要突出显示之后的文本`(placeholder="YOUR MESSAGE")`才能看到：

**前：**

```
form.form-horizontal(method='POST')
  .form-group
    textarea.form-control(placeholder="YOUR MESSAGE") 
  .form-group  
    button.btn.btn-primary(type='submit') SUBMIT 
```

**后：**

```
form.form-horizontal(method='POST')
  .form-group
    textarea.form-control(placeholder="YOUR MESSAGE")
  .form-group  
    button.btn.btn-primary(type='submit') SUBMIT 
```

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2020-07-09T02:14:27.503

那么，现在的问题是我们如何预填充 textarea 元素？XYZ，你会得到：

[![上面 textarea 元素的输出](../Images/c40a5184459424b3cfa873af5de06a8f.png)](https://i.stack.imgur.com/NECzF.png)

主要问题是在 textarea 元素中，我们无意中用空格预填充了元素。

# r - 基于时间和时间

> ID：10186915
> 
> 赞同：0
> 
> 时间：2012-04-17T07:23:36.470
> 
> 标签：r, xts

```
a <- c("12/4/2010 9:30:00","12/4/2010 9:31:00","12/4/2010 9:32:00",
       "12/4/2010 9:33:00","12/4/2010 9:34:00","12/4/2010 9:35:00")
b <- strptime(a,"%d/%m/%Y %H:%M:%S")

> time(a)
[1] 1 2 3 4 5 6
attr(,"tsp")
[1] 1 6 1

> time(b)    
Error in hasTsp(x) : invalid time series parameters specified

> timeBased(a)
[1] FALSE

> timeBased(b)
[1] TRUE 
```

有没有办法让它同时适用于`time`和`timeBased`函数，这意味着使用`time`和返回`TRUE`时没有错误`timeBased`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:40:26.077

`time`不做你认为它做的事。它是通用的，所以它根据你给它的对象类型做不同的事情，但一般来说，它给你索引，它与`index`

```
> require("xts")

> x <- xts(1:6, b)
> time(x)
[1] "2010-04-12 09:30:00 CDT" "2010-04-12 09:31:00 CDT"
[3] "2010-04-12 09:32:00 CDT" "2010-04-12 09:33:00 CDT"
[5] "2010-04-12 09:34:00 CDT" "2010-04-12 09:35:00 CDT"

> index(x)
[1] "2010-04-12 09:30:00 CDT" "2010-04-12 09:31:00 CDT"
[3] "2010-04-12 09:32:00 CDT" "2010-04-12 09:33:00 CDT"
[5] "2010-04-12 09:34:00 CDT" "2010-04-12 09:35:00 CDT"

> timeBased(x)
[1] FALSE
> timeBased(index(x))
[1] TRUE
> timeBased(time(x))
[1] TRUE 
```

# asp.net - asp.net：使启用= false的文本框变灰，但需要获取值

> ID：10186918
> 
> 赞同：6
> 
> 时间：2012-04-17T07:24:10.683
> 
> 标签：asp.net, textbox, readonly

我想为用户禁用文本框。

但在文本框中是一个值，我需要阅读。

所以我想要这个`readOnly`属性（因为我可以读取值），但也想要灰掉`enabled = false`用户可以看到的框（功能），他无权编辑文本框。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-17T07:36:46.590

如果您的文本框是 html 输入文本，请执行以下操作：

```
 <input id="Text1" type="text" value="read me"  readonly="readonly" disabled="disabled" /> 
```

如果它是一个asp TextBox，那么：

```
 <asp:TextBox ID="TextBox1" runat="server"  ReadOnly ="true" Enabled="false"></asp:TextBox> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T07:29:08.320

@Keith`Readonly`为输入框设置属性会很好。您可以通过更改其背景颜色使文本框变灰。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-17T07:38:32.637

改用标签，如果要为用户打开编辑，为什么要使用文本框，还要更改标签控件的颜色。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-07-25T21:12:51.773

对我来说，最好的方法是设置 enabled = false 属性，但来自 jQuery：

$('#txtTotal').attr('disabled','disabled');

这样您就可以读取后面代码中的值。

# android - Android 应用程序中的单元测试。我应该怎么做？

> ID：10186921
> 
> 赞同：1
> 
> 时间：2012-04-17T07:24:15.970
> 
> 标签：android, unit-testing

我已经通过这个[链接](https://stackoverflow.com/questions/522312/best-practices-for-unit-testing-android-apps)。

但是，例子太多了。行业跟风是什么？那里最好的是什么？

另外，使用 JUnit 编写我自己的单元测试是一个更好的主意，还是学习曲线太大了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T07:34:49.593

业内有许多可用的测试工具，但这些都是标准工具和方法

1.  机器人馆
2.  Deviceanywhere [http://www.keynotedeviceanywhere.com/mobile-application-testing-automation.html](http://www.keynotedeviceanywhere.com/mobile-application-testing-automation.html)

3.  完美手机

这是android官方测试指南链接

[http://developer.android.com/guide/topics/testing/testing_android.html](http://developer.android.com/guide/topics/testing/testing_android.html)

使用 Junit 进行单元测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T07:31:04.333

常见的方法是从不依赖于 android 平台的类的常规测试用例开始。之后，您可以使用 AndroidTestCase 或 ActivityTestCase 类测试您的数据库类或类似的东西。

单元测试完成后，您可以继续使用 Robotium 进行 UI 测试。

# sql - 嵌套 sql 计数从两个计数查询到一个查询

> ID：10186922
> 
> 赞同：0
> 
> 时间：2012-04-17T07:24:16.507
> 
> 标签：sql, merge, count

我正在努力寻找一种将两个查询合并为一个的方法（显然我不是 sql 专家；））

```
SELECT COUNT(orderid) AS TotalAmountOfOrders
FROM tableorder
WHERE (YEAR(orderDate) BETWEEN 2012 AND 2012)

SELECT COUNT(errorid) AS AmountOfErrorsOnOrders
FROM  tableError                      
WHERE (YEAR(errorDate) BETWEEN 2012 AND 2012) 
```

问题是如果我只是将它们添加为

```
SELECT COUNT(orderid) AS ...,COUNT(errorid) AS ...
From tableorder inner join tableError 
```

我没有得到总金额，而只有由于我将它们组合在一起的方式而导致错误的订单数量。

那么我怎样才能在一个查询中同时获得两个计数呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T07:30:07.563

你可以作为一个 UNION 来做：

```
SELECT COUNT(orderid) AS counted
FROM tableorder
WHERE (YEAR(orderDate) BETWEEN 2012 AND 2012)

UNION

SELECT COUNT(errorid) AS counted
FROM  tableError                      
WHERE (YEAR(errorDate) BETWEEN @Year1 AND @Year2)
GROUP BY SurName, FirstName; 
```

然后第一行将是来自 tableorder 的计数，第二行将是来自 tableError 的计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T07:31:02.070

这会将值作为两列返回。

```
SELECT 
  (
    SELECT COUNT(orderid)
    FROM tableorder
    WHERE (YEAR(orderDate) BETWEEN 2012 AND 2012)
  ) AS TotalAmountOfOrders,
  (
    SELECT COUNT(errorid)
    FROM  tableError                      
    WHERE (YEAR(errorDate) BETWEEN 2012 AND 2012)
  ) AS AmountOfErrorsOnOrders 
```

我建议您根据间隔检查日期，而不是在列上应用函数。

```
SELECT 
  (
    SELECT COUNT(orderid)
    FROM tableorder
    WHERE orderDate >=  '20120101' AND OrderDate < '20130101'
  ) AS TotalAmountOfOrders,
  (
    SELECT COUNT(errorid)
    FROM  tableError                      
    WHERE errorDate >=  '20120101' AND errorDate < '20130101'
  ) AS AmountOfErrorsOnOrders 
```

[是什么让 SQL 语句可搜索？](https://stackoverflow.com/a/799616/569436)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T07:31:14.493

试试这个：

```
SELECT COUNT(o.orderid), COUNT(e.errorid) AS TotalAmountOfOrders 
FROM tableorder o
INNER JOIN tableError e ON o.orderid = e.orderid
WHERE (YEAR(o.orderDate) BETWEEN 2012 AND 2012)
AND   (YEAR(e.errorDate) BETWEEN 2012 AND 2012)
GROUP BY o.orderid 
```

# image - WordPress 中是否有每个类别的图片库插件？

> ID：10186923
> 
> 赞同：1
> 
> 时间：2012-04-17T07:24:21.073
> 
> 标签：image, wordpress, gallery

我正在寻找一个插件，可以让我在 WordPress 中管理每个类别的图片库。特定类别中的所有帖子都应具有相同的图像集或单个特色图像（如 CMS 中所定义）。

快速帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T11:40:56.163

也许这篇文章会帮助你找到一些现有的插件：[http ://speckyboy.com/2010/06/30/top-10-content-slider-plugins-for-wordpress/](http://speckyboy.com/2010/06/30/top-10-content-slider-plugins-for-wordpress/)

我在我的[代理博客](http://blog.mba-multimedia.org/)中自定义了 wp-featured-content-slider以仅在滑块中显示某些类别，但这不是您可以在管理部分配置的插件参数。

在您的主题中，您必须结合以下测试：

```
if (is_category('XXX'))... 
```

和

```
query_posts( 'cat=XXX' ) 
```

在循环之前仅查询当前类别的帖子（请参阅[query_post codex page](http://codex.wordpress.org/Function_Reference/query_posts)）。

希望对你有帮助！

# c# - 如何在 C#.Net 中创建 PDF 文件

> ID：10186930
> 
> 赞同：2
> 
> 时间：2012-04-17T07:24:53.083
> 
> 标签：c#

我想在 C# 中创建 pdf 文件。Pdf 文件包含文本文件和图像。我想在运行时安排文本文件和图像，安排后我想将其保存为 .pdf 文件。请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T07:26:35.207

你应该试试：http: [//itextpdf.com/](http://itextpdf.com/)

我有很多示例如何将其用于您描述的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T10:10:15.207

尝试这个，

您需要下载 wnvhtmlconvert.dll 才能使用 pdfconverter 类

--html端

```
 <table id="tbl" runat="server"  style="width: 940px;" cellpadding="0" cellspacing="0" border="0">
                <tr id="tr" runat="server">
                    <td id="td" runat="server" align="center" valign="top"></td>
                </tr>
            </table> 
```

--代码端

```
 Imports System.Web.UI.WebControls
    Imports System.Web.UI.WebControls.WebParts
    Imports System.Web.UI.HtmlControls
    Imports System.IO
    Imports System.Collections.Generic
    Imports System.Drawing

    Public Sub ExportQuickScToPDF()
        Dim stringWrite As New System.IO.StringWriter()
        Dim htmlWrite As System.Web.UI.HtmlTextWriter = New HtmlTextWriter(stringWrite)
        Dim pdfByte As [Byte]() = Nothing
        Dim strPageBreak As String = "<br style=""page-break-before: always"" />"
        Dim lblPageBreak As New Label
        Dim lbltext As New Label
        lblPageBreak.Text = strPageBreak

        'add image 
        Dim imgqsc As New System.Web.UI.WebControls.Image
        imgqsc.ImageUrl = "path"
        td.Controls.Add(imgqsc)
        tbl.RenderControl(htmlWrite)
        'add text
        lbltext.Text = "text"
        lbltext.RenderControl(htmlWrite)
        'add page break
        lblPageBreak.Text = "text"
        lblPageBreak.RenderControl(htmlWrite)

        Dim objPdf As New PdfConverter()
objPdf.LicenseKey = "license key with dll"
        objPdf.PdfFooterOptions.ShowPageNumber = False
        objPdf.PdfFooterOptions.FooterTextFontSize = 10
        objPdf.PdfDocumentOptions.ShowHeader = True
        objPdf.PdfDocumentOptions.ShowFooter = False
        objPdf.PdfDocumentOptions.EmbedFonts = True
        objPdf.PdfDocumentOptions.LiveUrlsEnabled = True
        objPdf.RightToLeftEnabled = False
        objPdf.PdfSecurityOptions.CanPrint = True
        objPdf.PdfSecurityOptions.CanEditContent = True
        objPdf.PdfSecurityOptions.UserPassword = ""
        objPdf.PdfDocumentOptions.PdfPageOrientation = PDFPageOrientation.Landscape
        objPdf.PdfDocumentInfo.CreatedDate = DateTime.Now
        objPdf.PdfDocumentInfo.AuthorName = ""

        pdfByte = objPdf.GetPdfBytesFromHtmlString(stringWrite.ToString())

        Session("pdfByte") = pdfByte
    End Sub 
```

您需要添加该 dll 的引用并将其导入代码中

```
Imports Winnovative.WnvHtmlConvert 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T07:30:40.723

您可以使用[iTextSharp](http://itextsharp.sourceforge.net/)。还有一些其他的库。[点击这里。](http://csharp-source.net/open-source/pdf-libraries)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-17T07:30:40.737

要创建 PDF，我使用“iText”库，它是开放的，并且非常易于使用。[您可以在此处](http://itextpdf.com/download.php)下载 iText 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-17T07:32:54.023

我也投票给 iText :) 开始时相当容易和舒适：

```
 string pdfFilename = @"c:\temp\test.pdf";
    string imageFilename = @"C:\map.jpg";

    // Create PDF writer, document and image to put
    iTextSharp.text.Image image = iTextSharp.text.Image.GetInstance(imageFilename);
    Document doc = new Document();
    PdfWriter pdfW = PdfWriter.GetInstance(doc, new FileStream(pdfFilename, FileMode.Create));

    // Open created PDF and insert image to it
    doc.Open();
    doc.Add(image);
    doc.Close(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-13T20:05:37.277

尝试下载并添加 bytescout 的引用，然后使用以下代码：

```
using System.Diagnostics;
using Bytescout.PDF;

namespace WordSpacing
{
    /// <summary>
    /// This example demonstrates how to change the word spacing.
    /// </summary>
    class Program
    {
        static void Main()
        {
            // Create new document
            Document pdfDocument = new Document();
            pdfDocument.RegistrationName = "demo";
            pdfDocument.RegistrationKey = "demo";
            // Add page
            Page page = new Page(PaperFormat.A4);
            pdfDocument.Pages.Add(page);

            Canvas canvas = page.Canvas;

            Font font = new Font("Arial", 16);
            Brush brush = new SolidBrush();
            StringFormat stringFormat = new StringFormat();

            // Standard word spacing
            stringFormat.WordSpacing = 0.0f;
            canvas.DrawString("Standard word spacing 0.0", font, brush, 20, 20, stringFormat);

            // Increased word spacing
            stringFormat.WordSpacing = 5.0f;
            canvas.DrawString("Increased word spacing 5.0", font, brush, 20, 50, stringFormat);

            // Reduced word spacing
            stringFormat.WordSpacing = -2.5f;
            canvas.DrawString("Reduced word spacing -2.5", font, brush, 20, 80, stringFormat);

            // Save document to file
            pdfDocument.Save("result.pdf");

            // Cleanup 
            pdfDocument.Dispose();

            // Open document in default PDF viewer app
            Process.Start("result.pdf");
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-23T07:03:11.047

// 粘贴按钮点击

文档 pdfDoc = new Document(PageSize.A4, 25, 10, 25, 10);

```
 PdfWriter pdfWriter = PdfWriter.GetInstance(pdfDoc, Response.OutputStream);

            pdfDoc.Open();

            Paragraph Text = new Paragraph("This is test file"); // hardcode text

            pdfDoc.Add(new Phrase(this.lbl1.Text.Trim())); //from label

            pdfDoc.Add(new Phrase(this.txt1.Text.Trim())); //from textbox

            pdfDoc.Add(Text);

            pdfWriter.CloseStream = false;

            pdfDoc.Close();

            Response.Buffer = true;

            Response.ContentType = "application/pdf";

            Response.AddHeader("content-disposition", "attachment;filename=Example.pdf");
            Response.Cache.SetCacheability(HttpCacheability.NoCache);

            Response.Write(pdfDoc);

            Response.End(); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-04-17T07:31:35.003

首先获取[参考](http://partners.adobe.com/public/developer/pdf/index_reference.html)，然后尝试使用此代码

```
using System.Runtime.InteropServices;
[DllImport("shell32.dll")]
public static extern int ShellExecute(int hWnd,
string lpszOp, string lpszFile, string lpszParams, string lpszDir,int FsShowCmd);
ShellExecute(0, "OPEN", args[0] + ".pdf", null, null, 0); 
```

或者使用这个[sharppdf](http://sharppdf.sourceforge.net/)或这个[itextsharp](http://itextsharp.sourceforge.net/)

# php - 创建具有共享结构和 php 功能的多语言 wordpress 站点

> ID：10186937
> 
> 赞同：2
> 
> 时间：2012-04-17T07:25:26.877
> 
> 标签：php, wordpress, blogs, multilingual

我知道有很多多语言 wp 插件，但我不确定我应该为此使用哪种方法；

我想创建一个具有高级功能的 wp 站点，部分由我自己用 php 编写。然后我一般想用其他语言创建这个站点的**结构、设计和行为**的副本，例如，es.blog.com 将是 en.blog.com 的副本。但是，不应共享内容。

我还想**只在一个地方更改代码**，并使这些更改影响所有其他语言的重复项，所以我认为这意味着代码本身或其中的一部分将被共享。

有没有办法让多个博客共享结构、设计和功能，而每个博客的内容都不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T16:52:08.263

我相信这是 WordPress Multisite 的完美案例。

> ### [多语言网络](http://wordpress.org/support/topic/multilingual-network)（论坛主题）
> 
> > *我希望用户在第一次访问该站点时选择他们的语言——这样他们就可以选择用英语、库尔德语（也许还有其他语言）阅读、注册、管理整个站点（前端和后端）。*

> ### [如何设置双语或多语 WordPress 多站点博客](http://oncleben31.cc/en/how-to-bilingual-multilingual-wordpress-multisite-blog/)（博文）
> 
> > *我需要两个独立的站点来促进插件和主题本地化，如果有翻译，可以通过一种简单的方式在语言之间切换。另一个原因是优化搜索引擎的索引。有了这个解决方案，我可以在没有翻译的情况下发布一些特定语言的帖子。*

[**更新**]

> ### [多语种出版社](http://wordpress.org/extend/plugins/multilingual-press/)（插件）
> 
> 然后可以将每个站点/博客归因于不同的语言。只需用一种语言写一篇文章或页面，Multilingual-Press 就会自动在其他网站/博客中创建一个副本。这些新帖子和页面是相互关联的，并且可以通过帖子/页面编辑器屏幕轻松访问 - 您可以来回切换以翻译它们！Multilingual-Press 符合 WordPress，易于安装且不对 WordPress 核心进行任何更改。它不会损害您网站的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T08:28:45.783

您可以使用任何 MVC 框架来实现这一点，只需将数据存储在具有“语言”字段的数据库中，并仅调用该语言中的行。

谷歌“MVC 框架”。

CodeIgniter 是一个很好且免费的示例。

在 CodeIgniter 中，您可以将 Wordpress 文件包含在您的“库”文件夹中，然后创建一个具有您需要使用的特定功能的模型。

最后，如果你要使用这种方法，你必须创建一个 .HTACCESS 文件来从 URL 中获取子域部分，但是，同样，有很多关于实现这一点的教程，google 'htaccess URL rewrite'

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-17T08:24:26.817

我不会将 WP 推荐给任何真正的多语言网站，搜索会搞砸，插件不兼容等。

在子目录中安装并行 WP 实例，并使其成为开发/错误修复的“主”。内容是隔离的，您可以使用标准的 WP 功能而无需元数据或插件黑客。

通过“更改代码”，我想您是指模板？这是一个不错的 ftp 客户端中的简单拖放操作。

# c# - 拍摄在 WP7 中使用矩形的快照

> ID：10186938
> 
> 赞同：1
> 
> 时间：2012-04-17T07:25:30.807
> 
> 标签：c#, .net, windows-phone-7, bitmap, writeablebitmap

我正在开发一个 WP7 应用程序，我想在其中录制视频并在保存视频之前拍摄视频快照，以便将其用作缩略图。缩略图在使用前临时保存在隔离存储中。对于相机，我使用矩形来录制视频，然后我想在手机上显示图片。问题是图片只显示黑屏。即使我尝试将图片保存在媒体库中，图片也显示为黑色。这个问题的原因可能是什么，我该如何解决？

我插入了下面的代码：

这是您用来捕捉视频的矩形。

```
 <Rectangle 
            x:Name="viewfinderRectangle"
            Width="640" 
            Height="480" 
            HorizontalAlignment="Left" 
            Canvas.Left="80"/> 
```

这是拍照的代码：

```
try
            {
                String tempJPEG = FOSConstants.TEMP_VIDEO_THUMBNAIL_NAME;
                var myStore = IsolatedStorageFile.GetUserStoreForApplication();
                if (myStore.FileExists(tempJPEG))
                {
                    myStore.DeleteFile(tempJPEG);
                }
                IsolatedStorageFileStream myFileStream = myStore.CreateFile(tempJPEG);

                WriteableBitmap wb = new WriteableBitmap(viewfinderRectangle, null);
                wb.SaveJpeg(myFileStream, wb.PixelWidth, wb.PixelHeight, 0, 85);
                myFileStream.Close();

                myFileStream.Close();

            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message, "Error saving snapshot", MessageBoxButton.OK);
            } 
```

下面是从隔离存储中读取缩略图的代码：

```
private BitmapImage GetIsolatedStorageFile(string isolatedStorageFileName)
{
        var bimg = new BitmapImage();
        using (var store = IsolatedStorageFile.GetUserStoreForApplication())
        {
           using (var stream = store.OpenFile(isolatedStorageFileName, FileMode.Open,                 FileAccess.Read))
            {  
                bimg.SetSource(stream);
            }
        }

return bimg;    
} 
```

这是我想在 GUI 中显示缩略图的图像。

```
<Image Width="180" 
                       Height="180" 
                       Stretch="Fill"
                       Margin="24,0,0,0"
                       Source="{Binding Path=ImageSoruce, Mode=TwoWay}"
                       HorizontalAlignment="Left"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T08:15:16.657

编辑：删除了有关 Invalidate() 的误导性内容，您不需要这样做。

因此，您可以使用 GetPreviewBufferArgb32() 方法来获取相机当前提供的内容。这可以复制到您的可写位图中，如下所示。

```
using (var myStore = IsolatedStorageFile.GetUserStoreForApplication())
{
    if (myStore.FileExists(tempJPEG))
    {
        myStore.DeleteFile(tempJPEG);
    }

    IsolatedStorageFileStream file = myStore.CreateFile(tempJPEG);
    int[] buf = new int[(int)c.PreviewResolution.Width * (int)c.PreviewResolution.Height];
    c.GetPreviewBufferArgb32(buf);

    WriteableBitmap wb = new WriteableBitmap((int)c.PreviewResolution.Width, (int)c.PreviewResolution.Height);
    Array.Copy(buf, wb.Pixels, buf.Length);
    wb.SaveJpeg(file, (int)c.PreviewResolution.Width, (int)c.PreviewResolution.Height, 0, 100);
} 
```

您的示例代码不起作用的原因是取景器画笔设置在 GPU 上（我想我记得为什么我认为它在那里完成，但我认为它是）。这意味着 silverlight 也无法访问原始视频，并且当您渲染 silverlight 元素时，它是空白的（就好像它没有背景一样）。

# automation - 如何使用 Sikuli 进行屏幕截图？

> ID：10186947
> 
> 赞同：1
> 
> 时间：2012-04-17T07:26:32.343
> 
> 标签：automation, sikuli

我需要使用 Sikuli 进行自动化，但我无法截屏。问题是，当我单击“截屏”或“创建区域”时，IDE 被隐藏，但没有出现选择区域选项....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T09:36:58.003

确保您使用的是 Java 6 而不是 7。如果您尝试在同一台计算机上运行两者，请务必查看该`system32`文件夹。因为 Java 7 复制`java.exe`并`javaw.exe`存在。您必须删除/重命名它们。

**更好的解决方案：**卸载 Java 7 并安装 Java 6。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T11:58:28.133

卸载JDK，你有哪个版本，我也遇到了同样的问题，但是卸载JDK后，它运行良好

# java - 浮动属性在 HtmlWorker（iText）中不起作用

> ID：10186952
> 
> 赞同：1
> 
> 时间：2012-04-17T07:26:54.363
> 
> 标签：java, css, itext

我正在尝试将浮动属性应用于 itext 中的 div。内容是 HTML 内容

```
Document document = new Document(PageSize.A4, 36, 72, 108, 180);
PdfWriter.getInstance(document, servletOutputStream);
document.open();

HTMLWorker htmlWorker = new HTMLWorker(document);
StyleSheet style = new StyleSheet();
style.loadStyle("class-name", "float", "left");

 htmlWorker.setStyleSheet(style);
 htmlWorker.parse(new StringReader(stringBuilder.toString())); 
```

上面的代码不适用于浮动，但适用于其他属性，如大小、颜色等。可能的解决方案是什么。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-18T17:02:00.403

HTMLWorker 已停止使用，取而代之的是 XML Worker。

该项目 ：

[http://sourceforge.net/projects/xmlworker/](http://sourceforge.net/projects/xmlworker/)

演示：

[http://demo.itextsupport.com/xmlworker/](http://demo.itextsupport.com/xmlworker/)

文档：

[http://demo.itextsupport.com/xmlworker/itextdoc/index.html](http://demo.itextsupport.com/xmlworker/itextdoc/index.html)

# javascript - 如何根据行ID列表更改表中的行顺序？

> ID：10186954
> 
> 赞同：1
> 
> 时间：2012-04-17T07:27:13.417
> 
> 标签：javascript, jquery, html, css

我有 id 表`test_table`

```
<table id="test_table"> </table> 
```

和或有不同的ID。

我已经订购了行 id 的列表，例如

```
["name","value","description"] 
```

与屏幕上呈现的表格有什么不同（用户可以即时设置新订单，这就是我填写行 ID 列表的方式）。

如何根据有序列表在该表中设置新顺序？（说明：我有两个列表，用户可以在第一个表中拖放行，我需要在第二个表中具有相同的顺序，第二个表中的 ID 与第一个 + 前缀“预览”中的 ID 相同。这就是我的方式在第一个表中拖放。）

```
$("#cleanVert").tableDnD({
    onDragClass: "myDragClass",
    onDrop: function(table, row) {
        var rows = table.tBodies[0].rows;
        var debugStr = "New Order: ";
        var outStr = "";
        for (var i=0; i<rows.length; i++) {
            debugStr += rows[i].id+" ";
            outStr += rows[i].id;
            if(i<(rows.length-1)){
                outStr+=","
            }
        }
        $("#debugArea").html(debugStr);
    },
    onDragStart: function(table, row) {
        $("#debugArea").html("Started dragging row "+row.id);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:37:22.697

我想你是在客户端表排序之后，网上有很多可用的，这取决于你熟悉的 javascript 库。我选择使用一个名为[tablesorter](http://tablesorter.com/docs/)的 jQuery 插件，我根据您的标签假设它对您来说也是一个不错的选择。

它的缺点是它只是客户端，所以如果用户没有启用 Javascript，他们将无法对表格进行排序，我想说这不是主要问题，普通用户总是有启用 Javascript。

另一种选择是构建服务器端排序，这可以像添加一样简单

```
ORDER BY "$selectedField" "$order" 
```

在您的数据库查询中。它还将确保它在没有 Javascript 的情况下工作。

现在许多流行的 Web 开发框架都提供了这种特性，如果你还没有发现它，我鼓励你看看你的编程语言的一些选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T08:27:34.630

如果你想在 jQuery 中做所有事情，看起来你正在尝试做，那么我会研究[jQuery Sortable](http://jqueryui.com/demos/sortable/)但如果你希望它像一个链接/按钮，通过升序或降序对每个字段进行排序，或通过类似的用户名等，并将其保留在服务器端，然后我建议让按钮/链接重新加载自身，并在 url 中使用子查询来表示类似`?order_by=asc`或`?order_by=username&dir=asc`然后在页面上对其进行检查，通过该变量/子查询 ($_GET['order_by']) 到一个函数。在函数中，执行类似于以下内容的查询：

```
$order_by = "ORDER BY " . $_GET['order_by'] . $_GET['dir'];
$query = "SELECT *
          FROM table
          $order_by"; 
```

然后，您可以毫无困难地使用该变量对主页加载（尚未排序）使用相同的查询，然后在加载的情况下重新运行查询时，`$order_by`列表将按参数排序。

# android - 如何解析包含 HTML 内容的 XML

> ID：10186955
> 
> 赞同：0
> 
> 时间：2012-04-17T07:27:15.957
> 
> 标签：android

我是安卓新手。你能帮我解析这个包含 HTML 内容的 XML，比如，

```
<title>Jeff Mayweather: Floyd Sr showed a Sign of finally letting go of his Son, Passing Torch to Roger</title>

<summary type="html">
                        &lt;p&gt;By Shawn Craddick&lt;/p&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;Boxingsocialist had a chance to catch up with Floyd Mayweather&#039;s other uncle Jeff Mayweather. While Jeff stays busy at the gym he gave us some updates on his fighters as well as his thoughts on Brandon Rios, Gamboa, Floyd Mayweather Sr and Floyd Jr. meeting back together. Also he talked to us about a surprise boxing veteran he might be working with. Check out the interview below.&lt;/p&gt;
&lt;p&gt;&lt;br&gt;&lt;/br&gt; &lt;span style=&quot;color: #ff6600;&quot;&gt;BoxingSocialist&lt;/span&gt;- What did you…&amp;lt;/p&gt;                    </summary> 
```

我可以解析**标题**字段，为了解析**摘要**字段，我在 RSS 处理程序中给出命令--localname.equals **("summary")** 。我无法解析**摘要**字段中的内容。有人帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:54:40.253

试试这个

```
android.text.Html.fromHtml(text).toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:39:55.937

一旦我在标签内有这样的带有 html 数据的提要。我的解决方案是要求数据提供者将 html 与`CDATA`. 因此，如果您有权访问 xml 的制作方式，请考虑使用此选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T08:00:06.850

您可以使用[jsoup](http://jsoup.org/)来解析 java 中的 html 内容。

教程[链接示例](http://codeblow.com/questions/android-jsoup-parsing-tables-fromweb-sites/)

干杯

# cocoa-touch - 自定义 tableview 和 highlightTextColor

> ID：10186970
> 
> 赞同：0
> 
> 时间：2012-04-17T07:28:12.867
> 
> 标签：cocoa-touch, uitableview

我有一个带有自定义单元格的表格视图，我已将单元格设置为当您点击它时在文本上突出显示颜色。

//特定于单元格

```
NSString *ligneTableau = [NSString stringWithFormat:@"%@", [[table objectAtIndex:indexPath.row] nome]];
cell.label.text = ligneTableau;  
cell.label.font = [UIFont fontWithName:@"populaire" size:35];
cell.label.textColor = [UIColor colorWithRed:124.0f/255.0f green:153.0f/255.0f blue:106.0f/255.0f alpha:1.0f];
cell.fondo.image = [UIImage imageNamed: @"cell_ant.png"];    

//highlighted Text

cell.label.highlightedTextColor = [UIColor colorWithRed:55.0f/255.0f green:70.0f/255.0f blue:48.0f/255.0f alpha:1.0f]; 
```

一切正常，但是当回到表格时，文本保持突出显示。

我忘记了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:18:50.250

在您的`UpdatesTableViewCell`课程中，您可以实现以下方法：

```
- (void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated {
    [super setHighlighted:highlighted animated:animated];

    if (highlighted)
        self.label.textColor = [UIColor colorWithRed:55.0f/255.0f green:70.0f/255.0f blue:48.0f/255.0f alpha:1.0f];
    else
        self.label.textColor = [UIColor colorWithRed:124.0f/255.0f green:153.0f/255.0f blue:106.0f/255.0f alpha:1.0f];
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated {
    [super setSelected:selected animated:animated];

    if (selected)
        self.label.textColor = [UIColor colorWithRed:55.0f/255.0f green:70.0f/255.0f blue:48.0f/255.0f alpha:1.0f];
    else
        self.label.textColor = [UIColor colorWithRed:124.0f/255.0f green:153.0f/255.0f blue:106.0f/255.0f alpha:1.0f];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T07:35:47.113

当您返回表格时，可能该单元格仍处于选中状态。因此，一旦回到表中，您应该设置取消选择。

```
 [cell setSelected:NO]; 
```

# jquery - jsp没有被重新包含

> ID：10186971
> 
> 赞同：0
> 
> 时间：2012-04-17T07:28:14.787
> 
> 标签：jquery, jsp

在我的应用程序中，我有一个 jsp，其中包含 3 个 jsp 文件。在这 3 个 jsp 中，我有一个带按钮的 jsp。按下按钮后，我想更改内容accordion2.jsp。我所做的是一旦按下任何按钮，我就会调用一个 servlet，这个 servlet 执行逻辑部分我使用的还有 html 的摘录。

```
<script type="text/javascript">
    $(document).ready(function() {
      // select all the links with class="lnk", when one of them is clicked, get its "href" value
      // load the content from that URL and place it into the tag with id="content"
      $('input.button').click(function() {

        var url = $(this).attr('src');
        alert(url);
        var status= $(this).attr('value');
          alert(status);
          alert(url+"?name="+status);
        $('.accordion2').detach();
        $('.accordion2').load(url+"?name="+status);
        alert("after load");
        return false;
      });
    });
    </script>

    </head>

    <body class="bodybg" >
    <div class="wrapwidth">
        <!--put header here -->
        <%@include file="header.jsp" %>
        <div class="mainbpdy">
            <!--put vetinav here-->
            <%@include file="vetinav.jsp" %>

            <div class="sroolable">

            <%@include file="accordion2.jsp" %>

            </div>
        </div>
        <div class="footer">footer</div>

    </div>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T08:24:35.460

如果顶层 JSP 生成了整个页面，则应该调用它再次生成页面。

# php - 我如何构造这种 sql 查询

> ID：10186974
> 
> 赞同：2
> 
> 时间：2012-04-17T07:28:21.607
> 
> 标签：php, mysql, database

我在下面有以下数据库表 ![在此处输入图像描述](../Images/ff9515b09d861a59705d43ad33c3d5e6.png)

我想用`owner_id`1 向用户显示通知。通知显示告诉所有者两个用户（ID 为 17 和 2）用`post_id`1 评论了他/她的帖子。我尝试了以下查询，但它返回 2 行。我如何构造查询以返回一行，因为我希望一起返回一篇帖子的通知？谢谢你。

```
SELECT DISTINCT commenters_id, id, owner_id, 
                post_id, type, UNIX_TIMESTAMP(date_done) AS date 
FROM notification 
GROUP BY commenters_id 
HAVING owner_id = '$user_id' AND commenters_id != '$user_id' 
ORDER BY date_done DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T07:38:53.927

此代码不会为您提供commenters_id，而是计算有多少人回复了每个帖子。这`date`将是最后一次有人回复该特定帖子：

```
SELECT
    COUNT(DISTINCT commenters_id) AS commenter_count,
    owner_id,
    post_id,
    type,
    UNIX_TIMESTAMP(MAX(date_done)) AS date 
FROM notification
WHERE owner_id = '$user_id' AND commenters_id != '$user_id' 
GROUP BY owner_id, post_id, type
ORDER BY UNIX_TIMESTAMP(MAX(date_done)) DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T07:40:21.680

您可以使用[`GROUP_CONCAT(commenters_id)`](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat)获取帖子的评论者 ID 的逗号分隔列表。但是你必须按帖子而不是评论者分组，所以查询看起来像：

```
SELECT DISTINCT GROUP_CONCAT(commenters_id), id, owner_id, 
                post_id, type, UNIX_TIMESTAMP(date_done) AS date 
FROM notification 
GROUP BY post_id 
HAVING owner_id = '$user_id' AND commenters_id != '$user_id' 
ORDER BY date_done DESC 
```

如果需要，GROUP_CONCAT 允许对数据进行一些处理，例如仅返回不同的值或对值进行排序。在此处查看完整文档：http: [//dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T07:36:49.570

您的问题是您也选择了 date_done 列，这使得行是唯一的。`DISTINCT`在这种情况下，也不允许`GROUP BY`对结果集进行分组。

将此列排除在此查询之外或使用类似`MAX(date_done)`

编辑：等等......你已经只有两行，而不是四行？这不就是你想要的结果吗？也许我误解了这个问题

# javascript - Liquid Layout IE 问题，当然（新手）

> ID：10186980
> 
> 赞同：0
> 
> 时间：2012-04-17T07:28:32.807
> 
> 标签：javascript, html, css, liquid-layout

我是 CSS 新手，以前从未创建过布局，我在 Internet Explorer 中的第一个布局遇到了一些问题。我认为它在 Firefox 中看起来不错。在开始布局之前，我已经阅读了大量有关 HTML 和 CSS 的内容，所以我知道 IE 有一些错误，但即使在制作布局和研究问题之后，这些解决方案似乎都没有奏效。我希望这里有人可以提供帮助。

TL；DR：新布局在 IE 中不起作用，需要帮助（进行了研究）

* * *

问题 1：在 IE 中，与 Firefox 相比，2 个右侧边栏太宽了。其他一切看起来都很正常，只是那些 2 太宽，影响布局问题 2：当窗口宽度低于 1024 时，它应该从 container1.css 切换到 container2.css，有效地改变容器属性以更好地以较小的分辨率显示. 在 Firefox 中效果很好，但在 IE 中，它似乎删除了容器期间，使内容在整个窗口中流动。

```
<HTML>
<HEAD>
<TITLE>My Liquid Layout</TITLE>
<link rel="stylesheet" type="text/css" href="LiquidLayout.css" />
<link id="container1" rel="stylesheet" type="text/css" href="container1.css" />
<link id="container2"  rel="alternate" type="text/css" href="container2.css" />

<script type="text/javascript">
<!--    

var css = "container1";
function changeStyle(styleSheet)
{
if(styleSheet == css)
    return;
var selected = document.getElementById(styleSheet);
var current = document.getElementById(css);
if(!selected)
{
    selected = current.cloneNode(true);
    selected.id=styleSheet;
    selected.setAttribute("href",current.getAttribute("href").replace(new
   RegExp(css),styleSheet));
}
    current.setAttribute("rel","stylesheet1");
    selected.setAttribute("rel","stylesheet");
    document.getElementsByTagName('head')[0].appendChild(selected);
    css = styleSheet;
    }

function windowSize()
{
var windowWidth;
var windowHeight;
windowWidth = window.innerWidth;
windowHeight = window.innerHeight;

if (document.body && document.body.offsetWidth)
{
    windowWidth = document.body.offsetWidth;
    windowHeight = document.body.offsetHeight;
}
if (document.compatMode=='CSS1Compat' &&
    document.documentElement &&
    document.documentElement.offsetWidth ) 
{
    windowWidth = document.documentElement.offsetWidth;
    windowHeight = document.documentElement.offsetHeight;
}
if (window.innerWidth && window.innerHeight) 
{
    windowWidth = window.innerWidth;
    windowHeight= window.innerHeight;
}

if(windowWidth < 1024)
changeStyle('container2');
else if(windowWidth >= 1024)
changeStyle('container1');
}

window.onresize = new Function("windowSize()");
//-->   

</script>   

</HEAD>
<BODY>
<div id = "container">
<div id = "header"><p id = "size"></p></div>
<div id = "content">
    <div id = "menu">
        <ul>
            <li><a href="#">About</a></li>
            <li><a href="#">Contact</a></li>
            <li><a href="#">Home</a></li>
            <li><a href="#">Video</a></li>
            <li><a href="#">Gallery</a></li>
            <li><a href="#">IGN</a></li>
        </ul>
    </div>
    <div id = "sidebox"></div>
    <div class = "column" id = "sidebar"></div>
    <div class = "column" id = "main"></div>    
</div>
<div id = "footer"></div>
</div>

</BODY>
</HTML> 
```

主要的CSS是：

```
body 
{
background-color:gray;
margin: 0px;
text-align: center;
}

#header
{
width: 100%;
height: 200px;
background-color: yellow;

}

#content
{
padding-top:5px;
padding-bottom:0px;
padding-right:5px;
padding-left:5px;
min-height: 768px;
}

#menu
{
width: 66%;
height: 250px;
background-color: blue;
float: left;
}

#sidebox
{
width: 34%;
height: 250px;
background-color: red;
float: right;
display: inline;
}

#sidebar
{
width: 34%;
background-color: red;
height: 100%;
float: right;
}

#main
{
width: 65%;
height: 100%;
background-color: green;
float: left;
} 
```

如果有人可以提供一些关于在 IE 中解决这些问题的建议，我将不胜感激！也欢迎任何改进建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T09:13:11.973

如果您复制并粘贴了整个内容，那么您缺少使 IE 以 quirksmode 呈现的文档类型。

我建议将 HTML5 文档类型添加到文档的顶部`<!DOCTYPE html>`

[更多关于 quirks 模式的信息可以在这里找到](http://www.quirksmode.org/css/quirksmode.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T07:51:37.473

您没有指定 IE 的哪个版本，所以我猜您只检查了最新版本？

按照建议添加一个文档类型，您在 IE9 中应该没问题，但是如果您也支持其他版本的 IE，您将需要某种方式来独立定位每个版本，因为它们都有不同且越来越严重的错误。有时，某些东西在 IE7 中会起作用，但在 IE8 中不起作用，但通常当您转向 IE6 时，您的问题会成倍增加，尤其是在流动布局的情况下。

我建议使用[Modernizr](http://modernizr.com/)，它会根据使用的 IE 版本向 HTML 元素添加不同的类名。它还做了很多其他的事情，比如在旧的 IE 中也可以使 HTML5 元素样式化，所以它值得使用，即使没有它提供的任何其他功能测试。我可以看到你没有使用任何 HTML5 元素，但我不知道这是你的整个布局，还是只是它的开始......

您可能还想使用[Selectivizr](http://selectivizr.com/)，以便在 IE8 及以下版本中也可以使用最有用的 CSS3 功能，尽管您需要使用 JS 库，例如 jQuery，因此它可能有用也可能没有用。您的 CSS 中没有任何 CSS3，但同样，您的示例可以大大简化

在对代码的改进方面，您不需要在脚本标签中包含 HTML 注释，`<!--`并且自从 IE4 之类的日子以来就没有。此外，出于性能原因，您应该在`<body>`（就在关闭之前`</body>`）的底部，而不是在`<head>`，如果您使用 HTML5 doctype（即使您不打算使用任何 HTML5 元素，您仍然可以使用它) 你不需要在`<script>`元素上指定类型属性。在 JavaScript 中，左大括号应该与函数定义或条件在同一行，所以这样做：

```
if (condition) { 
```

或者：

```
function something() { 
```

并不是：

```
if (condition)
{ 
```

或者：

```
function something()
{ 
```

这通常在大多数情况下都可以，但它会产生很难发现的错误，因此值得养成一直这样做的习惯。而附加事件监听器时，不需要指定`new Function("function_name")`，直接附加函数即可：

```
window.onresize = windowSize(); 
```

此外，在 CSS 中，零值不需要指定测量单位，因此您可以只使用`0`而不是`0px`...

# java - 为 Android 应用绘制自定义标签栏

> ID：10186986
> 
> 赞同：0
> 
> 时间：2012-04-17T07:29:14.773
> 
> 标签：java, android, android-tabhost

我需要开发一个底部带有标签栏的应用程序，但是我在使用 Fragments 时遇到了很多问题，其中 Android 文档显示了如何使用 TabHost 和 Fragments。
因为没有显示任何关于如何正确处理每个选项卡堆栈的内容。

因为我可以转到 tab1，它打开了 Fragment A，然后我想深入并打开 Fragment B，并有可能将 tab 切换到 tab2，以及切换回来在 tab1 中看到相同的 Fragment B。

有一些解决方案会为每个选项卡创建一个 FragmentActivity，但对于该管理，您应该使用已弃用的 TabActivity。

所以也许我可以绘制我的标签栏并将其放在所有布局上，并且每次用户按下标签栏按钮时我只是启动一个 Activity ？

如果这是可能的，也许有些人已经实现了这个，或者可以展示一些如何绘制的教程，或者使用这个？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T07:48:59.703

在 XML down_tabs.xml 中添加此代码

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost" android:layout_width="fill_parent"
android:layout_height="fill_parent">
<LinearLayout android:orientation="vertical"
    android:layout_width="fill_parent" android:layout_height="fill_parent">
    <FrameLayout android:id="@android:id/tabcontent"
        android:layout_width="fill_parent" android:layout_height="0dip"
        android:layout_weight="1" />

    <TabWidget android:id="@android:id/tabs"
        android:layout_width="fill_parent"        android:layout_height="wrap_content"
        android:layout_weight="0"  />
</LinearLayout> 
```

并在 Activity 类中添加选项卡规范，

```
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.down_tabs);
    initTabs();
}

private void initTabs() {
    // Set Calendar Tab
    // getTabWidget().setDividerDrawable(R.drawable.tab_divider);
    getTabWidget().setPadding(0, 0, 0, 0);
    addTab("", R.drawable.home_tab_drawable, CalendarUIActivity.class);
    addTab("", R.drawable.lucky_dates_drawable, LuckyDatesActivity.class);
    addTab("", R.drawable.life_stages_drawable, LifeStagesActivity.class);
    addTab("", R.drawable.find_items_drawable, FindItemsActivity.class);
    addTab("", R.drawable.more_tab_drawable, MoreActivity.class);
}

private void addTab(String labelId, int drawableId, Class<?> targetClass) {
    TabHost tabHost = getTabHost();
    Intent intent = new Intent(this, targetClass);
    TabHost.TabSpec spec = tabHost.newTabSpec("tab" + labelId);

    View tabIndicator = LayoutInflater.from(this).inflate(
            R.layout.tab_indicator, getTabWidget(), false);
    TextView title = (TextView) tabIndicator.findViewById(R.id.title);
    title.setText(labelId);
    ImageView icon = (ImageView) tabIndicator.findViewById(R.id.icon);
    icon.setImageResource(drawableId);

    tabIndicator.setBackgroundResource(R.drawable.tab_backgroud);
    // //////////
    spec.setIndicator(tabIndicator);
    spec.setContent(intent);
    tabHost.addTab(spec);

} 
```

我希望它能正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:16:35.267

是的，很好的答案..片段很容易工作..你知道..

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@android:id/tabhost" android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <LinearLayout android:orientation="vertical"
            android:layout_width="fill_parent" android:layout_height="fill_parent">

            <FrameLayout android:id="@android:id/tabcontent"
                android:layout_width="fill_parent" android:layout_height="0dip"
                android:layout_weight="1" />

            <TabWidget android:id="@android:id/tabs"
                android:layout_width="fill_parent" android:layout_height="wrap_content"
                android:layout_weight="0" />
        </LinearLayout>
    </TabHost> 
```

完整的教程访问

[http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/](http://thepseudocoder.wordpress.com/2011/10/04/android-tabs-the-fragment-way/)

[http://android.codeandmagic.org/2011/07/android-tabs-with-fragments/](http://android.codeandmagic.org/2011/07/android-tabs-with-fragments/)

# codeigniter - Codeigniter 锚找不到链接

> ID：10186995
> 
> 赞同：0
> 
> 时间：2012-04-17T07:29:57.730
> 
> 标签：codeigniter, anchor

我正在使用 CodeIgniter 设计一个网站，但无法让锚点正常工作。

这是我使用它的方式。它在codeigniter中应用程序的views文件夹中的一个文件中使用。

```
 <?php echo anchor('/profile', 'PROFILE'); ?> 
```

我的目的是让锚加载配置文件控制器，它位于 codeigniter 的应用程序控制器中。但是，当我点击链接时，它说找不到该文件。

我自动加载 url 辅助函数 alreader，并且该文件中的其他函数正在运行，例如 `site_url()`.

我不知道我会错过什么？你有什么建议吗？这是我使用 codeigniter 的第二个项目，所以我还在学习。

编辑：是的，我遵循 codeigniter 中的命名约定，并且该文件具有索引功能。我尝试不使用正斜杠，它仍然给出相同的结果。

这产生的 HTML 链接是`localhost/profile`. 这是我应该做对的吗？因为对于 codeigniter，它是`url/controller/function`. 我做了一个 mod 重写以从 url 中删除 index.php，但这应该不是问题，不是吗？我会尝试再次检查基本网址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:28:37.883

你确定你需要前导正斜杠吗？你有没有尝试过：

```
<?php echo anchor('profile', 'PROFILE'); ?> 
```

如果您试图进入控制器文件夹中的“配置文件”子文件夹，您只会使用斜线。当 url 变得混乱时，帮助我的是在浏览器中输入我想要到达的路径的完整 url（以确保我没有得到 404 等）。从那里你可以从头开始，然后回去看看你错过了什么。

但是您通常希望从控制器名称开始并添加您正在调用的函数，例如：

```
anchor(controllerName/functionName) 
```

有关示例，请参阅[CodeIgniter URL Helper](http://codeigniter.com/user_guide/helpers/url_helper.html)。

编辑：另外 - 您可能需要检查您的配置 base_url 设置为。如果有花哨的 .htaccess 发生，你的 base_url 需要正确设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:02:26.683

有一个非常简单的解决方案，转到 config/constants 并在那里定义 SITE_URL 并将其值设置为

```
http://localhost/myprojectname/index.php. 
```

然后在这里像这样使用它。

```
<?php echo anchor(SITE_URL.'/profile', 'PROFILE'); ?> 
```

# jsf-2 - 复合材料中的jstl没有正确处理？

> ID：10186996
> 
> 赞同：0
> 
> 时间：2012-04-17T07:30:00.903
> 
> 标签：jsf-2, myfaces

myfaces-2.1.7、Tomcat-7.0.27

似乎 jstl 并没有很随意地传播到复合元素中。谁能解释我的示例页面的输出：

直接的：

```
String:f0,f1,f2,f3,f4,f5
Array: f0 f1 f2 f3 f4 f5
Array2: f0 f1 f2 f3 f4 f5 
```

内部复合（相同的 JSTL）：

```
String:f0,f1,f2,f3,f4,f5
Array: f0
Array2: f0 f1 f2 f3 f4 f5 
```

内部复合（相同的 JSTL，myfaces-2.1.6）：

```
String:f0,f1,f2,f3,f4,f5
Array:
Array2: 
```

这是一个错误吗？

复合材料：'testje2.xhtml'：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html 
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:composite="http://java.sun.com/jsf/composite"
>

  <composite:interface>
  </composite:interface>

  <composite:implementation>
     <composite:insertChildren/>
  </composite:implementation>
</html> 
```

页面“test.xhtml”：

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"
[
    <!ENTITY euro   "&#8364;">
    <!ENTITY nbsp   "&#160;" >
    <!ENTITY hearts "&#9829;" >
]>  

<html
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:vm="http://java.sun.com/jsf/composite/vm"
>   

<body>
    <c:set var="combined1" value="f0"/>
    <c:set var="extra1" value="#{fn:split('f1,f2,f3,f4,f5', ',')}"/>
    <c:forEach begin="0" end="4" var="index">
            <c:set var="combined1" value="#{combined1},#{extra1[index]}"/>
    </c:forEach>
    <c:set var="combined1Array" value="#{fn:split(combined1, ',')}"/>
    String:#{combined1}<br/>
    Array:
    <c:forEach items="#{combined1Array}" var="value">
            #{value} 
    </c:forEach>
    <br/>
    Array2:
    <c:forEach items="#{fn:split(combined1, ',')}" var="value">
            #{value} 
    </c:forEach>

    <br/>
    <br/>

    <vm:testje2>
        <c:set var="combined" value="f0"/>
        <c:set var="extra" value="#{fn:split('f1,f2,f3,f4,f5', ',')}"/>
        <c:forEach begin="0" end="4" var="index">
            <c:set var="combined" value="#{combined},#{extra[index]}"/>
        </c:forEach>
        <c:set var="combinedArray" value="#{fn:split(combined, ',')}"/>
        String:#{combined}<br/>
        Array:
        <c:forEach items="#{combinedArray}" var="value">
            #{value} 
        </c:forEach>
        <br/>
        Array2:
        <c:forEach items="#{fn:split(combined, ',')}" var="value">
            #{value} 
        </c:forEach>
    </vm:testje2>
</body>
</html> 
```

# java - BoneCP 0.7.1.RELEASE 和休眠 4.1.*

> ID：10186999
> 
> 赞同：4
> 
> 时间：2012-04-17T07:30:11.973
> 
> 标签：java, hibernate, bonecp

我尝试将 BoneCP 添加到休眠状态并具有：

```
java.lang.ClassNotFoundException: org.hibernate.connection.ConnectionProvider 
```

我在新的休眠包中找不到这个接口并且有两个问题：

1）您能否分享链接或示例如何使用休眠 4.1.* 手动配置 BoneCP 0.7.1？（我只在hibernate.cfg.xml中添加了connection.provider_class=com.jolbox.bonecp.provider.BoneCPConnectionProvider）

2) 有人测试过 BoneCP 0.8.0-alpha1？它适用于新的 hibarnate，但版本中有可怕的“alpha1”

谢谢你的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T01:27:46.583

1) JVM 找不到`ConnectionProvider`接口，因为它从[Hibernate 3](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/connection/ConnectionProvider.html)移至[Hibernate 4](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/service/jdbc/connections/spi/ConnectionProvider.html)的不同包，因此您需要使用 BoneCP 0.8.0-alpha1。

2）到目前为止，它没有给我带来任何问题，但其他人应该贡献他们的经验。