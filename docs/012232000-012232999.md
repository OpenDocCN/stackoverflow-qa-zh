# StackOverflow 问答 12232000-12232999

# visual-studio-2010 - 在 Visual Studio 设置项目的任务栏中固定应用程序

> ID：12232001
> 
> 赞同：0
> 
> 时间：2012-09-01T22:40:30.243
> 
> 标签：visual-studio-2010, setup-project

安装 Mozilla Firefox 时，安装程​​序将 Mozilla 固定在任务栏中，我也想要它！！！

我正在使用 VS2010

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T06:36:12.650

从任务栏和开始菜单固定到/取消固定的 Vb.net 代码片段。（框架 3.5）

```
Dim shellApplication As Shell = New ShellClass()

Dim directoryName As String = Path.GetDirectoryName(filePath)
Dim fileName As String = Path.GetFileName(filePath)

Dim directory As Shell32.Folder = shellApplication.[NameSpace](directoryName)
Dim link As FolderItem = directory.ParseName(fileName)

Dim verbs As FolderItemVerbs = link.Verbs()
For i As Integer = 0 To verbs.Count - 1
  Dim verb As FolderItemVerb = verbs.Item(i)
  Dim verbName As String = verb.Name.Replace("&", String.Empty)   
 If (verbName.Equals("Pin to Start Menu")) Or (verbName.Equals("Unpin from Start Menu")) Then

    verb.DoIt()
  End If
Next
shellApplication = Nothing 
```

'filePath 是要固定/取消固定任务栏的 .exe 文件的路径

在固定/取消固定任务栏的情况下，将“固定到开始菜单”替换为“固定到任务栏”，将“从开始菜单取消固定”替换为“从任务栏取消固定”

所有固定的文件都位于

```
C:\Users\%LoggedIn_User_Name%\AppData\Roaming\Microsoft\Internet Explorer\Quick Launch\User Pinned 
```

此代码适用于 Windows7 美国英语。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T22:44:51.947

```
private static void PinUnpinTaskBar(string filePath, bool pin) {
    if (!File.Exists(filePath)) throw new FileNotFoundException(filePath);

    // create the shell application object
    Shell shellApplication = new ShellClass();

    string path = Path.GetDirectoryName(filePath);
    string fileName = Path.GetFileName(filePath);

    Folder directory = shellApplication.NameSpace(path);
    FolderItem link = directory.ParseName(fileName);

    FolderItemVerbs verbs = link.Verbs();
    for (int i = 0; i < verbs.Count; i++) {
        FolderItemVerb verb = verbs.Item(i);
        string verbName = verb.Name.Replace(@"&", string.Empty).ToLower();

        if ((pin && verbName.Equals("pin to taskbar")) || (!pin && verbName.Equals("unpin from taskbar"))) {

            verb.DoIt();
        }
    }

    shellApplication = null;
} 
```

请务必包含“Microsoft Shell 控件和自动化”参考

并感谢@James Johnston - 他的[原始帖子](https://stackoverflow.com/a/6874417/162671)

# php - 为 symfony2 和其他 web 项目设置所有权/权限

> ID：12232004
> 
> 赞同：0
> 
> 时间：2012-09-01T22:41:02.037
> 
> 标签：php, apache, symfony, permissions, chown

我一直很困惑如何为我的网站设置权限和用户/组。它尤其是我最弱的套装之一

我当前的问题是，我经常发现自己遇到这样一种情况，即如果我查看特定页面，它将无权写入缓存或日志。在这一点上，我将所有权设置为 apache。然后，在其他情况下，如果我尝试运行内部脚本，例如，我无法写入这些缓存/日志文件，因为我将它们设置为 apache。

目前，我的 symfony2 文件都作为员工（Handonam：Staff）的一部分注册给我。我见过各种各样的人创建诸如www-data、apache 等组，并使用诸如他们自己（例如Handonam）或www 等用户作为这些组的一部分。

所以我的问题是：对于 symfony2 和其他 web 项目，用户/组设置的最佳设置通常是什么，以便 apache 和我自己可以与这些文件交互，同时保持良好的安全性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T12:50:23.943

如果您从 symfony 转到安装指南的设置权限部分，它会给您一些提示。

[http://symfony.com/doc/current/book/installation.html](http://symfony.com/doc/current/book/installation.html)

专门做 chmod +a，应该这样做，但所有非糟糕的选项都在那里。

```
sudo chmod +a "www-data allow delete,write,append,file_inherit,directory_inherit" app/cache app/logs
sudo chmod +a "`whoami` allow delete,write,append,file_inherit,directory_inherit" app/cache app/logs 
```

# jquery - 制作一个 Jquery shuffle Gallery

> ID：12232007
> 
> 赞同：2
> 
> 时间：2012-09-01T22:41:22.670
> 
> 标签：jquery, gallery, shuffle

我正在尝试做一个随机播放幻灯片，就像[这个网站](http://www.tim-barber.com)一样。这是一个带有随机播放和淡入淡出的画廊，但我只有这个代码：

```
<div class="slideshow">    
     <img src="http://davy0324.netne.net/dummys/dummy1.jpg">
     <img src="http://davy0324.netne.net/dummys/dummy2.jpg">
     <img src="http://davy0324.netne.net/dummys/dummy3.jpg">
     <img src="http://davy0324.netne.net/dummys/dummy4.jpg">
     <img src="http://davy0324.netne.net/dummys/dummy5.jpg">
</div> 
```

你能帮我吗？我已经处理了洗牌代码，但它们从一个按钮开始，但我不想要按钮，我想要一个自动画廊，就像在网站上无限期地重复一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T23:48:06.067

你是这个意思吗（使用[jQuery](http://jquery.com/)）

```
$(function(){
    (function(){
        var imgs=$('.slideshow img');
        var i=0;
        function shuffle()
        {
            $(imgs[i]).fadeIn(2000, function(){
                i=(i < imgs.length-1) ? (i+1) : 0;
                setTimeout(function(){
                    $('.slideshow img').fadeOut(2000);
                    shuffle();
                }, 2000);
            });
        }
        shuffle();
    })();
});​ 
```

[**演示**](http://jsfiddle.net/heera/6xMrc/14/)。

**更新：**也许你想要一个像[**这样**](http://jsfiddle.net/heera/6xMrc/15/)的随机排序的图像动画。

# cakephp - 带有 self 的 HABTM 需要连接表中的 2 倍行数？

> ID：12232011
> 
> 赞同：2
> 
> 时间：2012-09-01T22:42:08.547
> 
> 标签：cakephp, has-and-belongs-to-many, cakephp-2.1

我正在尝试构建一个以 CMS`Nodes`为主要模型的内容。每个`Node` `belongsTo`a`NodeType`和 every`Node`都可以与 any/every other 相关`Node`。

所以 - 认为这需要HABTM：

```
//Node model
public $hasAndBelongsToMany = array(
    'AssociatedNode' => array(
        'className' => 'Node',
        'foreignKey' => 'node_id',
        'associationForeignKey' => 'associated_node_id',
        'joinTable' => 'node_associations'
    )
); 
```

问题是，似乎唯一可行的方法是每个关联都有两行。

**只有一个关联行的示例：**

节点

*   急诊室 (id=1)
*   乔治克鲁尼 (id=2)

连接表中的一行描述了这两个节点之间的关系：

*   'node_id' = 1
*   '关联节点ID' = 2

现在 - 如果我查询 TV Shows 并包含它的 Actor 节点：

```
$nodes = $this->Node->find('all', array(
        'conditions' => array(
            'Node.node_type_id' => '645' //tv shows
        ),
        'contain' => array(
            'AssociatedNode' => array(
                'conditions' => array(
                    'AssociatedNode.node_type_id' => '239' //actors
                ),
            )
        )
    )); 
```

这行得通，我得到 ER -> George Clooney。

但是 - 如果我想取消所有乔治克鲁尼参加的节目怎么办？

```
$nodes = $this->Node->find('all', array(
        'conditions' => array(
            'Node.node_type_id' => '239' //actors
        ),
        'contain' => array(
            'AssociatedNode' => array(
                'conditions' => array(
                    'AssociatedNode.node_type_id' => '645' //tv shows
                ),
            )
        )
    )); 
```

这不起作用，因为它正在寻找 George Clooney 的 ID 在 'node_id' 字段中，而 ER 的 ID 在 'associated_node_id' 字段中 - 而实际上它们是相反的。

我想到的唯一解决方案是为每个关联保留两行。但这似乎有些矫枉过正。但是随后我必须想出某种自定义的东西，以确保每次保存或删除关联时都使每个副本与另一个副本保持同步......等等 - 这似乎是一大罐蠕虫。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T12:51:16.810

您可能可以使用自定义查询来做到这一点，但为了保持标准的 Cake 函数，我能想到的一件事是声明节点之间的两种关系：

```
public $hasAndBelongsToMany = array(
  'AssociatedNode1' => array(
      'className' => 'Node',
      'foreignKey' => 'node_id',
      'associationForeignKey' => 'associated_node_id',
      'joinTable' => 'node_associations'
  ),
  'AssociatedNode2' => array(
      'className' => 'Node',
      'foreignKey' => 'associated_node_id',
      'associationForeignKey' => 'node_id',
      'joinTable' => 'node_associations'
  )
); 
```

然后您可以在 afterFind 回调中合并两个数组。

```
function afterFind($results)
{
  foreach($results as &$result)
  {
    if(isset($result['AssociatedNode1']) || isset($result['AssociatedNode2']))
    {
      $associated_nodes = array();

      if(isset($result['AssociatedNode1']))
      {
        foreach($result['AssociatedNode1'] as $associated_node)
        {
          $associated_nodes[] = $associated_node;
        }
      }

      if(isset($result['AssociatedNode2']))
      {
        foreach($result['AssociatedNode2'] as $associated_node)
        {
          $associated_nodes[] = $associated_node;
        }
      }

      $result['AssociatedNode'] = $associated_nodes;
    }
  }
  unset($result);

  return $results;
} 
```

但这会迫使您在调用 contains(); 时同时声明 AssociatedNode1 和 AssociatedNode2；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T22:59:39.887

我不确定您的用例的详细信息是什么，但我为您提供了几个替代选项：

您可能会考虑使用[树行为](http://book.cakephp.org/2.0/en/core-libraries/behaviors/tree.html)- 这是为将事物存储在树中而构建的，这听起来可能就是您正在做的事情。我自己没有使用过，所以我不确定它对你的使用有多大的适用性。

另一方面，如果您以一致的方向存储关系（即始终是 TV Show->Actor）并知道您的查询运行的方向（查找树中的 TV Shows an Actor is in vs 向下查找 Actors in a电视节目），您应该能够在反向时查询 AssociatedNode，例如

```
$nodes = $this->AssociatedNode->find('all', array(
    'conditions' => array(
        'AssociatedNode.node_type_id' => '239' //actors
    ),
    'contain' => array(
        'Node' => array(
            'conditions' => array(
                'Node.node_type_id' => '645' //tv shows
            ),
        )
    )
)); 
```

在这种情况下，为了清楚起见，最好使用“ChildNode”而不是“AssociatedNode”。

但是同样，这两个答案都取决于您的用例的细节 - nIcO 的答案是一个很好的通用解决方案。它（必然）很尴尬并且可能更慢，但它很好地抽象了尴尬。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T19:50:08.727

我过去做过的一件事可能会有所帮助，那就是为连接表制作模型。我能够在其中存储额外的数据，并用我的查询做任何我想做的事情。然后在该连接模型的两侧定义一个 hasMany 关联（也可能是一个 belongsTo ）。然后您可以使用连接模型进行查找并编写类似（来自控制器）的内容：

```
$this->Node->NodesNode->find('all', array('conditions'=>array("or"=>array('node_id'=>$id,'sub_node_id'=>$id)))); 
```

恕我直言：没有什么真正迫使你使用蛋糕惯例。我喜欢蛋糕，但有时它和 ORM 都会使非常简单的事情变得复杂。您可能只想编写自己的查询并自己解析结果。它可能比处理其他行为或模型的开销要快，而且您可能会编写比给定默认值更好的查询方式。

哦，最后，当您将 1 个模型用于多种用途时，我会注意。真的想一想那个模型是否真的应该支持一切。我发现每当我这样做时，我都会在一两年内重写整个内容。您将很快遇到瓶颈，其中一些节点需要以这种方式进行额外的行为，而另一些则需要其他的东西，并且您的 if 语句（或者可能更聪明的东西）散布在各处。另外，在数据库中进行基于树的疯狂查询确实会减慢速度。

# javascript - jquery 事件处理程序堆叠

> ID：12232013
> 
> 赞同：3
> 
> 时间：2012-09-01T22:42:31.773
> 
> 标签：javascript, jquery, html

我有这样的东西：http: [//jsfiddle.net/PTcw8/4/](http://jsfiddle.net/PTcw8/4/)

```
<div id="container">
    <a href="#" onclick="javascript:alert('inline'); return false;"> show me </a>
    <br />
    <input type="button" value="click to change the links onclick event" onclick="javascript:changeOnClick(); return false;" />
</div>​

function changeOnClick() {
    $("#container a").unbind('click');
    $("#container a").on('click', function() {
        alert("changed on the fly");
    })
}​ 
```

该链接有一个内联 onclick 事件，我无法解除绑定并绑定一个新的处理程序，它们只是出于某种原因堆叠。

是否可以取消绑定内联处理程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T22:45:00.950

如果您[`.unbind()`](http://api.jquery.com/unbind/)之前已将事件处理程序附加为`.bind()`：

> 使用 .bind() 附加的事件处理程序可以使用 .unbind() 删除。

对于*内联*事件处理程序，请使用：

```
$("#container a").removeAttr("onclick"); 
```

或者

```
$("#container a")[0].onclick = null; 
```

**[演示](http://jsfiddle.net/STvJY/)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T22:59:48.420

我会这样做：

```
$(document).ready(
    function(){
       $("#container a").removeAttr("onclick");
       $("#container a").on('click', function() {
          alert("changed on the fly");
       })
    }
); 
```

# grails - 知道为什么对嵌入在 grails 中的 vertx 的请求会同步排队

> ID：12232017
> 
> 赞同：0
> 
> 时间：2012-09-01T22:43:20.693
> 
> 标签：grails, websocket, vert.x, grails-2.1

```
Environment: Mac osx lion
Grails version: 2.1.0
Java: 1.7.0_08-ea 
```

如果我在 Bootstrap.groovy 中以嵌入模式启动 vertx 并尝试通过多个浏览器访问同一个 websocket 端点，则请求会排队。

因此，根据请求的时间，在一个请求执行完毕后，下一个请求会进入处理程序。

我已经用 websocket 和 SockJs 尝试过这个，并注意到两者的行为相同。

BootStrap.groovy (SockJs)：

```
 def vertx = Vertx.newVertx()
    def server = vertx.createHttpServer()
    def sockJSServer = vertx.createSockJSServer(server)
    def config = ["prefix": "/eventbus"]

    sockJSServer.installApp(config) { sock ->
      sleep(10000)      
    }
    server.listen(8088) 
```

javascript:

```
<script>

    function initializeSocket(message) {
            console.log('initializing web socket');
            var socket = new SockJS("http://localhost:8088/eventbus");
            socket.onmessage = function(event) {
                console.log("received message");
            }
            socket.onopen = function() {
                console.log("start socket");
                socket.send(message);
            }
            socket.onclose = function() {
                console.log("closing socket");
            }
    } 
```

或者

BootStrap.groovy (Websockets):

```
 def vertx = Vertx.newVertx()
    def server = vertx.createHttpServer()
    server.setAcceptBacklog(10000);
    server.websocketHandler { ws ->
        println('**received websocket request')
        sleep(10000)
    }.listen(8088) 
```

javascript

```
socket = new WebSocket("ws://localhost:8088/ffff");
            socket.onmessage = function(event) {
                console.log("message received");
            }
            socket.onopen = function() {
                     console.log("socket opened")
                socket.send(message);
            }
            socket.onclose = function() {
                console.log("closing socket")
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:37:07.870

来自 vertx 的乐于助人的人：

def server = vertx.createHttpServer() 实际上是一个verticle，而一个verticle是一个单线程进程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T16:51:54.903

正如 bluesman 所说，每个 verticle 都有自己的线程。您可以将您的 Verticle 跨越硬件中的核心，甚至将它们与更多机器进行集群。但这增加了接受同时请求的能力。

在编写实时应用程序时，我们应该尝试尽快构建响应以避免阻塞。如果您认为您的操作可能需要大量时间，请考虑以下模型：

1.  发出请求
2.  将任务传递给工作人员 Verticle 并为该任务分配一个 UUID（例如），并将其放入响应中。调用者现在知道工作正在进行中并且收到响应如此之快
3.  当工作人员结束任务时，使用分配的 UUID 在事件总线中放置通知。
4.  调用者检查事件总线以获取任务结果。

这通常通过 websockets、sockjs 等在 web 应用程序中完成。

这样您就可以接受数千个请求而不会阻塞。并且客户端将在不阻塞 UI 的情况下收到结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T21:00:12.380

Vert.x 使用 JVM 创建所谓的“多反应器模式”，即修改后的反应器模式以更好地执行。

据我了解，每个verticle都有自己的线程**并不是**真的：事实是每个verticle总是由同一个事件循环提供服务，但是更多的verticle可以与同一个事件循环绑定，并且可以有多个事件循环。事件循环基本上是一个线程，所以很少的线程应该服务于很多 Verticle。

我没有在嵌入式模式下使用 vert.x（我不知道主要概念是否改变），但你应该更好地为工作实例化许多 Verticle

问候， 卡罗

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-02T10:15:52.047

如前所述，Vertx 概念基于反应器模式，这意味着单个实例具有至少一个单线程事件循环并按顺序处理事件。现在请求处理可能包含几个事件，这里的重点是为请求和每个事件提供非阻塞例程。

例如，当您等待 Web Socket 消息时，请求应该被挂起，如果有消息，它会被唤醒。无论您对消息做什么也应该是非阻塞的，因此是异步的，就像任何文件 IO、网络 IO、数据库访问一样。Vertx 提供了构建此类异步流的基本元素：Buffers、Pumps、Timers、EventBus。

总结一下 - 永远不要阻塞。使用`sleep(10000)`扼杀了这个概念。如果您真的需要停止执行，请改用[VertX 的计时器](http://vertx.io/core_manual_java.html#delayed-and-periodic-tasks)。

# c++ - 在Linux上使用makefile对'main'的未定义引用，带有boost和mpi

> ID：12232019
> 
> 赞同：0
> 
> 时间：2012-09-01T22:43:58.450
> 
> 标签：c++, boost, makefile, mpi, linker-errors

我对make不是很熟悉；我一直使用和修改这个从另一个项目继承的非常古老的 makefile，并根据需要进行修改。到目前为止，它运行良好，将包含 20-50 个文件的项目编译在一起，即使在子目录中，也能正确确定和构建所有依赖项。

今天我正在运行一个非常简单的测试代码来确定 BOOST.MPI 是否可以在我最近访问的集群上工作。我正在尝试编译一个 1 文件测试用例以确保该库正常工作。这也是我第一次在这个系统上构建和链接来提升。

我在我的用户目录中安装了 boost：~/boost，并且我已经运行了适当的 bjam 以确保 BOOST.MPI 存在。我不相信我的问题出在那儿。但是，正如您稍后会看到的，我必须包含**-lboost_mpi**和**-lboost_serialization**才能达到我所做的那样。

makefile 似乎可以编译，并且可以很好地组装生成中间 .a 文件。它挂断了链接步骤，出现了一个令人惊讶的错误：

```
Creating dependency for "boosttest.cpp"
Compiling "boosttest.cpp"
Assembling ag...
ar: creating ./libag.a
Linking bt1...
/usr/lib/gcc/x86_64-redhat-linux/4.4.5/../../../../lib64/crt1.o: In function `_start':
(.text+0x20): undefined reference to `main'
collect2: ld returned 1 exit status
make: *** [bt1] Error 1 
```

我编写的唯一源代码（从[Boost.MPI 实现页面](http://www.boost.org/doc/libs/1_51_0/doc/html/mpi/getting_started.html#mpi.config)复制/粘贴）：

**升压测试.cpp：**

```
#include <boost/mpi/environment.hpp>
#include <boost/mpi/communicator.hpp>
#include <iostream>

int main(int argc, char* argv[])
{
  boost::mpi::environment env(argc, argv);
  boost::mpi::communicator world;
  std::cout << "I am process " << world.rank() << " of " << world.size()<< "." << std::endl;
  return 0;
} 
```

现在是我迷路的部分。这是我修改的makefile。我主要了解它在做什么，它是我见过的唯一一个生成文件（尽管如上所述我对它们不是很有经验）来生成包含所有依赖库列表的 .d 文件。

**生成文件：**

```
PROJECT = boosttest

# The names of the sub-projects that the  executable depends on.  These names are used later on to define targets, location, libraries, etc.
DEPS =

# The names of the sub-projects that the  test executable depends on.
TEST_DEPS =

EXE_DEPS =

LOCAL_O_FILES       = boosttest.o

LOCAL_TEST_O_FILES  =
LOCAL_LIB_NAME      = ag
LOCAL_LIB_DIR       = .
LOCAL_TEST_LIB_NAME =
LOCAL_TEST_LIB_DIR  =
LOCAL_INCLUDE_ROOT  = .
EXE_NAME            = BT

MPIC_DIR = /usr/local/mvapich2-1.6-gcc/

#these assume our local path and bin are set up properly since I don't know where the compilers are
CC          = $(MPIC_DIR)/bin/mpicc
CCC         = $(MPIC_DIR)/bin/mpicxx
F77         = $(MPIC_DIR)/bin/mpif77
CLINKER     = $(MPIC_DIR)/bin/mpicc
CCLINKER    = $(MPIC_DIR)/bin/mpicxx
FLINKER     = $(MPIC_DIR)/bin/mpif90
F90         = $(MPIC_DIR)/bin/mpif90
F90LINKER   = $(MPIC_DIR)/bin/mpif90
MAKE        = make --no-print-directory
SHELL       = /bin/sh

#PROF = -ggdb -O2
PROF = -O2
ADDITIONAL_LIBS = -lboost_mpi -lboost_serialization
SED  = $(shell which sed)
GREP = $(shell which grep)

# Warnings will depend on the GCC version -- if it's 4, have "-Wdeclaration-after-statement -Wunused-value -Wunused-variable"
#GCC_MAJOR_VERSION = $(shell $(CCC) --version | $(GREP) "\(egcs\|gcc\)" | $(SED) "s/[^0-9]*\([0-9]\).*/\1/")
#WARNINGS = -Wno-import $(shell if test $(GCC_MAJOR_VERSION) -eq 4; then echo -Wunused-value -Wunused-variable; fi)
#GCC_INSTALL_DIR = /turing/software-linux/mpich-eth
GCC_INSTALL_DIR = $(MPIC_DIR)
GCC_INCLUDE_DIR = $(GCC_INSTALL_DIR)/include/
GCC_LIB_DIR = $(GCC_INSTALL_DIR)/lib/
BOOST_DIR = ~/boost
BOOST_LIB_DIR = ~/boost/stage/lib

# Expand SRCDIR so that it turns into "-I <srcdir>" for each listed directory
INCLUDE_DIRS = -I $(OBJC_ROOT)/include $(foreach dep, $(UNIQUE_DEPS), -I$($(dep)_INCLUDE_ROOT)) -I $(LOCAL_INCLUDE_ROOT) -I $(BOOST_DIR) -I $(GCC_INCLUDE_DIR)

#C_FLAGS  = -DROM $(PROF) $(WARNINGS) $(INCLUDE_DIRS)
C_FLAGS = -DROM $(PROF) $(INCLUDE_DIRS)
L_FLAGS  = $(foreach dir, $(OBJC_ROOT) $(DEP_LIB_DIRS), -L$(dir)) -L $(BOOST_LIB_DIR) -L $(GCC_LIB_DIR) $(PROF) $(ADDITIONAL_LIBS)

TEST_L_FLAGS  = $(foreach dir, $(OBJC_ROOT) $(TEST_DEP_LIB_DIRS), -L$(dir)) -L/usr/lib  -Xlinker --whole-archive $(TEST_REQUIRED_LIBS) -Xlinker --no-whole-archive

REQUIRED_LIBS = $(foreach dep, $(DEPS) LOCAL, $(if $($(dep)_LIB_NAME), -l$($(dep)_LIB_NAME)))
TEST_REQUIRED_LIBS = $(foreach dep, $(TEST_DEPS) LOCAL LOCAL_TEST, $(if $($(dep)_LIB_NAME), -l$($(dep)_LIB_NAME)))

.SUFFIXES:
.SUFFIXES: .d .cc .cpp .c .o

ASSEMBLE_TARGETS = $(foreach dep,$(DEPS),$(dep)_LIB_NAME)

ASSEMBLE_TEST_TARGETS = $(foreach dep,$(TEST_DEPS),$(dep)_LIB_NAME)

CLEAN_TARGETS = $(foreach dep, $(UNIQUE_DEPS), $(dep)_CLEAN)

LOCAL_D_FILES = $(LOCAL_O_FILES:.o=.d)

LOCAL_TEST_D_FILES = $(LOCAL_TEST_O_FILES:.o=.d) $(TEST_RUNNER:.o=.d)

DEP_LIB_DIRS = $(foreach dep, $(DEPS) LOCAL, $($(dep)_LIB_DIR))

TEST_DEP_LIB_DIRS = $(foreach dep, $(TEST_DEPS) LOCAL LOCAL_TEST, $($(dep)_LIB_DIR))

UNIQUE_ASSEMBLE_TARGETS = $(sort $(ASSEMBLE_TARGETS) $(ASSEMBLE_TEST_TARGETS))

UNIQUE_DEPS = $(sort $(DEPS) $(TEST_DEPS))

LOCAL_LIB = $(if $(LOCAL_LIB_NAME), $(LOCAL_LIB_DIR)/lib$(LOCAL_LIB_NAME).a)

LOCAL_TEST_LIB = $(if $(LOCAL_TEST_LIB_NAME), $(LOCAL_TEST_LIB_DIR)/lib$(LOCAL_TEST_LIB_NAME).a)

EXE_TARGETS = $(foreach dep,$(EXE_DEPS),$(dep)_EXE_NAME)

INSTALL_TARGETS = $(foreach dep,$(EXE_DEPS),$(dep)_INSTALL)

export PROJECTS += $(PROJECT)

# PHONY targets get remade even if there exists an up-to-date file with the same name.
.PHONY: default clean compile assemble link submit

# Targets for mortals
default: link

clean: $(CLEAN_TARGETS) LOCAL_CLEAN

compile: $(DEPS) $(LOCAL_D_FILES) $(LOCAL_O_FILES)

assemble: compile $(ASSEMBLE_TARGETS) $(LOCAL_LIB)

link: assemble $(EXE_TARGETS) $(EXE_NAME)

install: $(INSTALL_TARGETS) $(if $(EXE_NAME), LOCAL_INSTALL)

submit: link
        qsub $(PROJECT).qsub

# Targets for make

# Invoking sub projects
$(UNIQUE_DEPS): MAKE_TARGET = $(if $(filter %_TEST, $@), compile-tests, compile)
$(UNIQUE_DEPS):
        $(if $(findstring $(DEP_NAME), $(PROJECTS)),,cd $($@_DIR) && $(MAKE) $(MAKE_TARGET))

# First, remove the _LIB_NAME attached by ASSEMBLE_TARGETS, a
$(UNIQUE_ASSEMBLE_TARGETS): DEP_NAME = $(@:_LIB_NAME=)
$(UNIQUE_ASSEMBLE_TARGETS): MAKE_TARGET = $(if $(filter %_TEST, $(DEP_NAME)), assemble-tests, assemble)
$(UNIQUE_ASSEMBLE_TARGETS):
        $(if $(findstring $(DEP_NAME), $(PROJECTS)),,cd $($(DEP_NAME)_DIR) && $(MAKE) $(MAKE_TARGET))

# First, remove the _EXE_NAME attached by EXE_TARGETS, a
$(EXE_TARGETS): DEP_NAME = $(@:_EXE_NAME=)
$(EXE_TARGETS):
        $(if $(findstring $(DEP_NAME), $(PROJECTS)),,cd $($(DEP_NAME)_DIR) && $(MAKE) link)

$(CLEAN_TARGETS): DEP_NAME = $(@:_CLEAN=)
$(CLEAN_TARGETS):
        $(if $(findstring $(DEP_NAME), $(PROJECTS)),,cd $($(DEP_NAME)_DIR) && $(MAKE) clean)

$(INSTALL_TARGETS): DEP_NAME = $(@:_INSTALL=)
$(INSTALL_TARGETS):
        $(if $(findstring $(DEP_NAME), $(PROJECTS)),,cd $($(DEP_NAME)_DIR) && $(MAKE) install)

#Local stuff

# The rule to change either a '.c' or a '.m' to a '.o'
#%.o : %.c %.d %.cc %.cpp
.cc.o .cpp.o .c.o:
        @echo "Compiling \"$<\""
        @$(CCC) -c $(C_FLAGS) $< -o $@

.cc.d .cpp.d .c.d :
        @echo "Creating dependency for \"$<\""
#       @$(CCC) $(WARNINGS) $(INCLUDE_DIRS) -MM $< -o $@
# This foogly hack because gcc seems to have issues with emitting the correct target/dependency names of
# files in sub-dirs of the current dir (specifically, it doesn't add the sub-dir to the target
# name, and insists on adding the directory to the dependencies) which ends up breaking dependencies...)
        @dependLine=$$( $(CCC) $(C_FLAGS) $(INCLUDE_DIRS) -MM $< ); \
        dirName=$$( dirname $< | $(SED) "s/\//\\\\\//g" ); \
        dependLine=$$( echo $${dependLine} | $(SED) "s/ $${dirName}\// /g" ); \
        oFile=$$( echo $${dependLine} | $(SED) "s/:.*//" ); \
        dependencies=$$( echo $${dependLine} | $(SED) "s/.*://" ); \
        echo $${oFile} $${oFile%.o}.d: $${dependencies} | $(SED) "s/ \\\//g" > $@
$(UNIQUE_ASSEMBLE_TARGETS): DEP_NAME = $(@:_LIB_NAME=)
$(UNIQUE_ASSEMBLE_TARGETS): MAKE_TARGET = $(if $(filter %_TEST, $(DEP_NAME)), assemble-tests, assemble)
$(UNIQUE_ASSEMBLE_TARGETS):
        $(if $(findstring $(DEP_NAME), $(PROJECTS)),,cd $($(DEP_NAME)_DIR) && $(MAKE) $(MAKE_TARGET))

# First, remove the _EXE_NAME attached by EXE_TARGETS, a
$(EXE_TARGETS): DEP_NAME = $(@:_EXE_NAME=)
$(EXE_TARGETS):
        $(if $(findstring $(DEP_NAME), $(PROJECTS)),,cd $($(DEP_NAME)_DIR) && $(MAKE) link)

$(CLEAN_TARGETS): DEP_NAME = $(@:_CLEAN=)
$(CLEAN_TARGETS):
        $(if $(findstring $(DEP_NAME), $(PROJECTS)),,cd $($(DEP_NAME)_DIR) && $(MAKE) clean)

$(INSTALL_TARGETS): DEP_NAME = $(@:_INSTALL=)
$(INSTALL_TARGETS):
        $(if $(findstring $(DEP_NAME), $(PROJECTS)),,cd $($(DEP_NAME)_DIR) && $(MAKE) install)

#Local stuff

# The rule to change either a '.c' or a '.m' to a '.o'
#%.o : %.c %.d %.cc %.cpp
.cc.o .cpp.o .c.o:
        @echo "Compiling \"$<\""
        @$(CCC) -c $(C_FLAGS) $< -o $@

.cc.d .cpp.d .c.d :
        @echo "Creating dependency for \"$<\""
#       @$(CCC) $(WARNINGS) $(INCLUDE_DIRS) -MM $< -o $@
# This foogly hack because gcc seems to have issues with emitting the correct target/dependency names of
# files in sub-dirs of the current dir (specifically, it doesn't add the sub-dir to the target
# name, and insists on adding the directory to the dependencies) which ends up breaking dependencies...)
        @dependLine=$$( $(CCC) $(C_FLAGS) $(INCLUDE_DIRS) -MM $< ); \
        dirName=$$( dirname $< | $(SED) "s/\//\\\\\//g" ); \
        dependLine=$$( echo $${dependLine} | $(SED) "s/ $${dirName}\// /g" ); \
        oFile=$$( echo $${dependLine} | $(SED) "s/:.*//" ); \
        dependencies=$$( echo $${dependLine} | $(SED) "s/.*://" ); \
        echo $${oFile} $${oFile%.o}.d: $${dependencies} | $(SED) "s/ \\\//g" > $@

$(LOCAL_LIB): compile $(ASSEMBLE_TARGETS)
        @echo Assembling $(LOCAL_LIB_NAME)...
        @ar rs $(LOCAL_LIB) $(LOCAL_O_FILES)

# Create the executable
$(EXE_NAME): assemble
        @echo Linking $(EXE_NAME)...
        @$(CCC) -o $(EXE_NAME) $(L_FLAGS)

# Erase all object files, the dependencies file, the core file and the executable, then rebuild everything
LOCAL_CLEAN:
        @echo Cleaning $(PROJECT)...
        @rm -f $(LOCAL_O_FILES) $(LOCAL_TEST_O_FILES) $(LOCAL_LIB) $(LOCAL_TEST_LIB) $(EXE_NAME) $(TEST_EXE_NAME) $(LOCAL_D_FILES) $(LOCAL_TEST_D_FILES) $(TEST_RUNNER) $(TEST_RUNNER:.o=.d) core*

ifeq (,$(findstring clean,$(MAKECMDGOALS)))
-include $(LOCAL_O_FILES:.o=.d) $(LOCAL_TEST_O_FILES:.o=.d)
endif 
```

我的 mpicxx 编译器的路径（集群需要，对于那些不熟悉的，它包装 gcc）是正确的，正如它编译的事实所证明的那样，它只是不会链接。同样，我的 boost 库路径似乎可以正常工作， -lboost_mpi 标志被正确捕获。

在这一点上，我的问题已经扩展到基于这个 makefile 如何工作/打算工作的我自己的教育。最终完全明显/简单的命令：

```
mpicxx boosttest.cpp -L ~/boost/stage/lib/ -lboost_mpi -lboost_serialization -o test 
```

但是，一旦我通过了验证 Boost.MPI 相当于 hello world 的测试用例，我想获得一个正确的 makefile，我将继续进行涉及我的完整源代码、20 多个具有交叉依赖关系的文件等的项目。任何帮助或直觉将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T00:19:49.677

根据上面@Oktalist 的建议，我能够找到一些有用的东西，至少对于单文件的情况，但我不明白为什么当我将它扩展到多个文件时它不起作用。我仍然不知道为什么这在过去有效但现在无效，但也许我改变了一些我没有跟踪的东西。

更正接近尾声，在此块中： # 创建可执行文件 $(EXE_NAME): assemble @echo Linking $(EXE_NAME)... @$(CCC) $(L_FLAGS) $(LOCAL_LIB) -o $(EXE_NAME)

# javascript - javascript的firefox14的奇怪结果

> ID：12232020
> 
> 赞同：1
> 
> 时间：2012-09-01T22:44:09.383
> 
> 标签：javascript, jquery, internet-explorer, firefox

```
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>

  <script type="text/javascript">
    $(document).ready(function () {
      $(".m").hide();
      $("#home").show();
    });

    function f(id) {
      $(".m").hide();
      $(id).show();
    }
  </script>
</head>

<body>
  <a href="#" onclick="f(home)"> HOME </a>
  <a href="#" onclick="f(home2)"> HOME2 </a>
  <a href="#" onclick="f(contact)">CONTACT</a>

  <div class="m" id="home">home</div>
  <div class="m" id="home2">home2</div>
  <div class="m" id="contact">contact</div>
</body> 
```

在 firefox14 中：每当我单击第一个`<a>`时，它都不起作用，页面将为空白。但是除了第一个`<a>`（即除了家庭）之外的其他人都可以正常工作。

但在 IE8 中，它们都可以正常工作。

为什么？我的代码有什么问题？是我的问题吗？

*   我想要某种菜单，另一页的来源（如联系人，关于我们）在一个页面中，但它们是隐藏的，通过单击它们，它们将可见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T22:51:38.567

那是因为 Firefox 已经定义了函数`window.home`，所以它不会引用带有 . 的元素`id="home"`。该函数未在 IE 中定义，这就是它在那里工作的原因。

您不应该依赖元素成为基于其 id 的全局变量。使用选择器查找元素：

```
<a href="#" onclick="f($('#home'))"> HOME </a>
<a href="#" onclick="f($('#home2'))"> HOME2 </a>
<a href="#" onclick="f($('#contact'))"> CONTACT </a> 
```

或者，将 id 的名称作为字符串发送到函数中：

```
<a href="#" onclick="f('home')"> HOME </a>
<a href="#" onclick="f('home2')"> HOME2 </a>
<a href="#" onclick="f('contact')"> CONTACT </a> 
```

并使函数使用字符串而不是元素：

```
function f(id) {
    $(".m").hide();
    $('#' + id).show();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T22:53:35.357

您的函数调用都是错误的，使用未定义的变量而不是字符串。

代替

```
<a href="#" onclick="f(home)"> HOME </a> 
```

它应该是

```
<a href="#" onclick="f('#home')"> HOME </a> 
```

这与浏览器类型和版本无关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T22:52:41.283

您还可以将标记更改为：

```
<a href="#home" class='anchors'> HOME </a>
<a href="#home2" class='anchors'> HOME2 </a>
<a href="#contact" class='anchors'> CONTACT </a> 
```

而不是 HTML 内在属性使用 jQuery`click`方法。

```
$('.anchors').click(function(e){
   e.preventDefault()
   $('.m').hide()
   $(this.href).show()
}) 
```

# debugging - 这个 gdb 警告是什么意思？当我尝试转储核心文件的回溯时，我得到了它

> ID：12232024
> 
> 赞同：4
> 
> 时间：2012-09-01T22:44:38.530
> 
> 标签：debugging, gdb, segmentation-fault

我看到了 gdb 在核心转储后转储所有线程的回溯的这一漂亮的衬线。所以我尝试了一个快速：

```
int main() {int* x = new int[5]; for(int i = 0; true; ++i) x[i] = i; } 
```

获取核心转储，然后运行：

```
gdb --batch --quiet -ex "thread apply all bt full" -ex "quit" a.out core.box-name.a.out.27459.8515.11 
```

我得到输出：

```
[New LWP 27459]

warning: Can't read pathname for load map: Input/output error.

warning: no loadable sections found in added symbol-file system-supplied DSO at 0x7fff9e503000
Core was generated by `./a.out'.
Program terminated with signal 11, Segmentation fault.
#0  0x00000000004005ca in main () at <stdin>:6
6       <stdin>: No such file or directory.

Thread 1 (LWP 27459):
#0  0x00000000004005ca in main () at <stdin>:6
        i = 33788
        x = 0x1a460010 
```

我看到一个很好的回溯，但我想知道我还看到的两个警告是关于什么的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-22T07:24:41.517

从这个链接看来，这是 gdb 中的一个错误，并已在最近的版本中修复。

[https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=248898](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=248898)

# r - 如何重新排序 data.table 列（不复制）

> ID：12232041
> 
> 赞同：136
> 
> 时间：2012-09-01T22:47:27.353
> 
> 标签：r, data.table

`data.table` `x`给定列名的字符向量，我想重新排序我的列`neworder`：

```
library(data.table)
x <- data.table(a = 1:3, b = 3:1, c = runif(3))
neworder <- c("c", "b", "a") 
```

显然我可以这样做：

```
x[ , neworder, with = FALSE]
# or
x[ , ..neworder]
#            c b a
# 1: 0.8476623 3 1
# 2: 0.4787768 2 2
# 3: 0.3570803 1 3 
```

但这需要再次复制整个数据集。还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2012-09-01T23:02:43.243

使用`setcolorder()`：

```
library(data.table)
x <- data.table(a = 1:3, b = 3:1, c = runif(3))
x
#      a b         c
# [1,] 1 3 0.2880365
# [2,] 2 2 0.7785115
# [3,] 3 1 0.3297416
setcolorder(x, c("c", "b", "a"))
x
#              c b a
# [1,] 0.2880365 3 1
# [2,] 0.7785115 2 2
# [3,] 0.3297416 1 3 
```

来自`?setcolorder`：

> 用`data.table`术语来说，所有`set*`函数都通过引用改变它们的输入。也就是说，除了一列大小的临时工作内存之外，根本不进行任何复制。

所以应该非常有效。详情请参阅`?setcolorder`。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-12-02T20:09:21.800

人们可能会发现使用上述解决方案更容易，而是按列号排序。例如：库（data.table）

```
 > x <- data.table(a = 1:3, b = 3:1, c = runif(3))
    > x
         a b         c
    [1,] 1 3 0.2880365
    [2,] 2 2 0.7785115
    [3,] 3 1 0.3297416
    > setcolorder(x, c(3,2,1))
    > x
         c         b a
    [1,] 0.2880365 3 1
    [2,] 0.7785115 2 2
    [3,] 0.3297416 1 3 
```

# facebook - Facebook 在给予许可后定向到空白页面

> ID：12232045
> 
> 赞同：1
> 
> 时间：2012-09-01T22:48:08.850
> 
> 标签：facebook

我在我的网站上使用社交连接，当我尝试使用我的 facebook 帐户连接时，弹出窗口显示权限屏幕，当我单击“允许”时，它会将我引导到一个空白页面......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T00:26:55.200

您可能在打开对话框时正在浏览页面 - 例如，如果您使用表单提交按钮或带有 onclick 执行的锚点，就会发生这种情况`FB.login`。

# google-app-engine - 什么对 GAE 数据存储配额有影响？

> ID：12232049
> 
> 赞同：1
> 
> 时间：2012-09-01T22:49:15.213
> 
> 标签：google-app-engine, google-cloud-datastore

文档说数据存储区有 50,000 次免费的读取、写入和小型操作。

我想读写是显而易见的，但什么属于“小操作”类别？如果我运行一个查询，它会是一个小操作还是读取操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T23:06:15.627

这是有关此的[文档](https://developers.google.com/appengine/docs/billing#Billable_Resource_Unit_Cost)。据我了解，按键查询被认为是“小操作”，因此查询实体、查询键和创建新键都会耗尽小操作配额。

查询既是小型操作又是读取操作：每个检索的实体花费 1 次读取 + 1 次小型。

# jquery - Border-left-width 在 jQuery 中返回 NaN

> ID：12232056
> 
> 赞同：1
> 
> 时间：2012-09-01T22:51:02.717
> 
> 标签：jquery, css, nan, border-box

我正忙着写一小段代码，它应该允许跨浏览器使用边框框模型。到目前为止，基本功能工作正常，但我无法获得工作余地。它应该适应可用的空间，但控制台返回一个 NaN，我不知道它来自哪里。

[这](http://jsfiddle.net/BramVanroy/PD7tk/11/)是一个小提琴。

console.log 甚至没有记录任何东西，我也不知道为什么。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T22:59:57.780

在您的小提琴的许多部分中，您都有这种模式：

```
($(this).css("border-left-width") * 2).replace("px", "") 
```

您试图在执行导致语法错误的乘法`px` **后擦除。**它应该是

```
($(this).css("border-left-width").replace("px", "") * 2) 
```

通过自动类型转换或

```
(parseInt($(this).css("border-left-width"), 10) * 2) 
```

它将字符串解析为整数，删除尾随`px`：

> 如果`parseInt`在指定的基数中遇到不是数字的字符，它会忽略它和所有后续字符并返回解析到该点的整数值。`parseInt`将数字截断为整数值。允许前导和尾随空格。

[**小提琴**](http://jsfiddle.net/ult_combo/PD7tk/12/)

[`parseInt`参考](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T22:56:41.090

因为这：

```
 $(this).css("padding-left") 
```

和

```
$(this).css("border-left-width") 
```

返回一个包含“px”的字符串，您尝试将其与 2 相乘，得到 NaN。您可以通过在相乘之前将结果字符串解析为浮点数来解决此问题，如下所示：

```
(parseFloat($(this).css("padding-left")) * 2 ) 
```

希望这可以帮助！

# drupal-7 - 如何将参数传递给 Drupal 视图？

> ID：12232058
> 
> 赞同：1
> 
> 时间：2012-09-01T22:51:15.953
> 
> 标签：drupal-7, drupal-views

我需要将参数从我的模块传递给视图；例如，我想传递节点标题的一部分，并且需要获取以该值开头的所有节点。

我不能使用暴露过滤器，因为我有一个无法使用暴露过滤器设计的特定布局，所以我需要以编程方式传递参数。

我想使用上下文过滤器，但我还没有找到指定“开始于”指令的方法。

我能做些什么来传递过滤器/参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T13:56:56.370

```
$view = views_get_view('machine_name_of_view');
$view->set_arguments(array('argument1', 'argument2'));
$view->execute(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T13:51:42.943

```
$nids = array(123);
$view = views_get_view('news');
$view->set_arguments($nids);
$preview = $view->preview('page_1');
$view->destroy();
return $preview; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-29T10:40:57.343

```
 $nid_str = implode(",",$nid_arr['nid']); // i.e. "1,2,3,4"

  $view = views_get_view('view_name');
  $view->set_display('view_display');
  $view->set_arguments(array($nid_str));
  $view->dom_id = 'view_dom_id';
  $output .= $view->render(); 
```

# ruby-on-rails - 选择查询heroku数据库

> ID：12232063
> 
> 赞同：1
> 
> 时间：2012-09-01T22:51:50.283
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, heroku

如何将 select * 查询发送到 heroku 数据库？我登录到 heroku 控制台，我想执行这个查询：select * FROM refinery_pages

我正在使用 ruby​​ 或 rails、refinery cms、heroku

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T23:01:49.903

`heroku pg:psql --app yourapp`

[https://devcenter.heroku.com/articles/heroku-postgres-starter-tier#psql-console](https://devcenter.heroku.com/articles/heroku-postgres-starter-tier#psql-console)

# java - 如何从 java.lang.SecurityManager 获取权限信息？

> ID：12232072
> 
> 赞同：4
> 
> 时间：2012-09-01T22:53:31.557
> 
> 标签：java, java-7, securitymanager

我正在应用程序（不是小程序）中进行一些调试，并通过调用**System.getSecurityManager()**获得了系统的安全管理器。如何打印设置此**SecurityManager**的所有配置信息？查看[Java 7 SE API](http://docs.oracle.com/javase/7/docs/api/)似乎所有方法本质上都是询问性的，并且无法获取权限配置。**toString()**方法似乎也直接从**Object**继承，并且只打印指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T01:27:56.437

使用 -Djava.security.debug=access,domain 运行程序，您将看到需要查看的所有内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-02T00:52:43.033

看这里。[`http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136007.html`](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136007.html)

还有另一种检查权限的方法。使用 try catch 块。

```
try{

} catch (Exception e){
    if (e instanceof SecurityException){
        // It's a security violation.
        // Look for another possibility
    }
} 
```

希望这可以帮助。

# apache - 如何配置服务器以允许大文件下载？

> ID：12232078
> 
> 赞同：1
> 
> 时间：2012-09-01T22:55:15.850
> 
> 标签：apache, nginx, download, apache-config

我可以从我的服务器毫无问题地下载 1+ Gb 文件。今天上传了2.3GB的文件，发现无法下载，下载1GB后就中断了，每个用户都会出现这种情况。我尝试了 Firefox 15、最新的 Chrome 和 IE9。

服务器：Apache 2.2.22 fcgi eAccelerator CPnginx

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-08T16:44:11.333

我想我刚刚遇到了同样的问题，希望这可能对其他人有所帮助。

我的服务器设置为使用[`ngx_http_proxy_module`](http://nginx.org/en/docs/http/ngx_http_proxy_module.html). 该[`proxy_max_temp_file_size`](http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_max_temp_file_size)模块的指令默认为`1024m`并且是导致我的问题的原因。

尝试在文件`proxy_max_temp_file_size 5120m;`中的 http、server 或 location 指令中添加该行，`nginx.conf`然后重新加载 nginx 的配置文件`/etc/init.d/nginx reload`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T01:08:53.227

看起来默认的最大下载大小 apache 集约为 2 Gb，您可以通过在 httpd.conf 中调整[LimitRequestBody来覆盖它。](http://httpd.apache.org/docs/2.2/mod/core.html#limitrequestbody)不知道为什么它会停在 1 Gb，这会让我认为问题出在其他问题上。希望这会有所帮助。

# php - PHP PDO：如何插入多行？

> ID：12232085
> 
> 赞同：5
> 
> 时间：2012-09-01T22:56:29.007
> 
> 标签：php, sql, pdo

我有很多 sql 语句，但我想要，但我想知道是否有任何方法或函数可以缩短并使用 PHP PDO 在尽可能少的行中完成。

我的一个想法是创建一个具有以下名称的数组：Perfiles、Usuarios、Customer、Mps、Poliza 和 Servicios 一起像 foreach 但我没有具体的想法，你能帮我吗？

**SQL 语句**

```
$sqlpermsPer = "INSERT INTO t_perfiles_permisos (Id_Perfil, Area_Permiso, Buscar, Crear, Eliminar, Modificar)
                                            VALUES ($idPerfil,'Perfiles',0,0,0,0)";
$resultpermsPer = $this->dbConnect->query($sqlpermsPer) or die ($sqlpermsPer);

sqlpermsC = "INSERT INTO t_perfiles_permisos (Id_Perfil, Area_Permiso, Buscar, Crear, Eliminar, Modificar)
                                            VALUES ($idPerfil,'Clientes',0,0,0,0)";
$resultpermsC = $this->dbConnect->query($sqlpermsC) or die ($sqlpermsC);

$sqlpermsU = "INSERT INTO t_perfiles_permisos (Id_Perfil, Area_Permiso, Buscar, Crear, Eliminar, Modificar)
                                            VALUES ($idPerfil,'Usuarios',0,0,0,0)";
$resultpermsU = $this->dbConnect->query($sqlpermsU) or die ($sqlpermsU);

$sqlpermsM = "INSERT INTO t_perfiles_permisos (Id_Perfil, Area_Permiso, Buscar, Crear, Eliminar, Modificar)
                                            VALUES ($idPerfil,'Mps',0,0,0,0)";
$resultpermsM = $this->dbConnect->query($sqlpermsM) or die ($sqlpermsM);

$sqlpermsP = "INSERT INTO t_perfiles_permisos (Id_Perfil, Area_Permiso, Buscar, Crear, Eliminar, Modificar)
                                            VALUES ($idPerfil,'Poliza',0,0,0,0)";
$resultpermsP = $this->dbConnect->query($sqlpermsP) or die ($sqlpermsP);

$sqlpermsS = "INSERT INTO t_perfiles_permisos (Id_Perfil, Area_Permiso, Buscar, Crear, Eliminar, Modificar)
                                            VALUES ($idPerfil,'Servicio',0,0,0,0)";
$resultpermsS = $this->dbConnect->query($sqlpermsS) or die ($sqlpermsS); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T23:14:44.110

这将创建一个包含您的字符串的数组，并循环遍历它们，每次使用绑定参数执行相同的查询。

```
$stmt = $this->dbConnect->prepare("INSERT INTO t_perfiles_permisos (Id_Perfil, Area_Permiso, Buscar, Crear, Eliminar, Modificar) VALUES (:idPerfil,:str,0,0,0,0)");
$stmt->bindParam(':idPerfil', $idPerfil);
$stmt->bindParam(':str',$val);
$in_arr = array("Perfiles","Clientes","Usuarios","Mps","Poliza","Servicio");

foreach ($in_arr as $key => $val) {
    $stmt->execute();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T23:13:58.603

```
INSERT INTO
  table 
    (column_one, column_two) 
  VALUES
    ('value_one_one', 'value_one_two'), 
    ('value_two_one', 'value_two_two'), 
    ('value_three_one', 'value_three_two'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T23:14:17.267

只要您`INSERT`正确终止每个，您就可以将它们连接起来。下面的代码示例还利用了`prepare`来防止 SQL 注入。

```
$sql  = "INSERT INTO t_perfiles_permisos (Id_Perfil, Area_Permiso, Buscar, Crear, Eliminar, Modificar) VALUES (:idPerfil,'Perfiles',0,0,0,0);";
ssql .= "INSERT INTO t_perfiles_permisos (Id_Perfil, Area_Permiso, Buscar, Crear, Eliminar, Modificar) VALUES (:idPerfil,'Clientes',0,0,0,0);";
$sql .= "INSERT INTO t_perfiles_permisos (Id_Perfil, Area_Permiso, Buscar, Crear, Eliminar, Modificar) VALUES (:idPerfil,'Usuarios',0,0,0,0);";
$sql .= "INSERT INTO t_perfiles_permisos (Id_Perfil, Area_Permiso, Buscar, Crear, Eliminar, Modificar) VALUES (:idPerfil,'Mps',0,0,0,0);";
$sql .= "INSERT INTO t_perfiles_permisos (Id_Perfil, Area_Permiso, Buscar, Crear, Eliminar, Modificar) VALUES (:idPerfil,'Poliza',0,0,0,0);";
$sql .= "INSERT INTO t_perfiles_permisos (Id_Perfil, Area_Permiso, Buscar, Crear, Eliminar, Modificar) VALUES (:idPerfil,'Servicio',0,0,0,0);";

try
{
  if ( $stmt = $db->prepare( $sql ) )
  {
    if ( ! $stmt->execute( array( ':idPerfil' => $idPerfil ) )
      error_log( $stmt->errorInfo() );
  }
}
catch ( PDOException $e )
{
  error_log( $e->getMessage() );
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-01T23:10:57.903

请检查这个[答案](https://stackoverflow.com/questions/1176352/pdo-prepared-inserts-multiple-rows-in-single-query)。

您可能希望像这样执行**多插入语句**：

```
$qry = 'INSERT INTO table (FirstName, LastName) VALUES ';
$qry .= "(?,?), "
      . "(?,?), "
      . "(?,?)  "
      ; 
```

# entity-framework - 如何将 EF (STE) 实体保存到临时表中

> ID：12232087
> 
> 赞同：1
> 
> 时间：2012-09-01T22:56:33.287
> 
> 标签：entity-framework, temp-tables

有没有办法，如何将 EF (STE) 实体保存到临时表中？

我正在努力实现这一目标：

1）将我的 STE 保存到临时表 2）在它们上运行一些存储过程 3）根据过程的结果，做其他事情..

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T23:32:28.517

EF 不会处理这个问题。EF 将实体保存到映射中定义的表中，但映射是在设计时定义的。您不能决定在运行时通过 EF 将实体保存到其他表而不更改其映射，这将非常低效 - 在运行时更改映射不是受支持的用例，因此它非常复杂，而且应用新映射是最昂贵的EF中的操作。

您只需要另一个存储过程即可将数据插入临时表。根据您期望的逻辑，您可以将该过程映射到实体的插入操作（但在这种情况下，每次插入新实体时都会使用您的过程）或直接执行它。

# php - 使用 readdir() 时排序输出

> ID：12232091
> 
> 赞同：0
> 
> 时间：2012-09-01T22:57:02.023
> 
> 标签：php, readdir

我对 PHP 相当陌生，并且一直在使用 PHP 的 readdir() 来查看一个充满图像的文件夹，并根据该文件夹中有多少图像动态地呈现它们。一切都很好，但我注意到的一件事是图像没有按照它们出现在我的本地机器 HD 上的顺序显示。

所以我对任何知道 PHP 的人的问题是，有没有办法使用 PHP 来读取文件夹的内容并按顺序显示它们，而不必重命名实际的文件名，例如 01.jpg、02.jpg 等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T23:14:26.690

看看这个[`glob()`](http://php.net/manual/en/function.glob.php)函数，它默认返回按字母顺序排序的文件：

```
$files = glob('/some/path/*.*'); 
```

奖励，您可以只过滤图像，而忽略目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T23:03:26.327

`readdir`可能只需要文件系统顺序。在 NTFS 上按字母顺序排列，但在大多数 Unix 文件系统上似乎是随机的。[文档](http://de3.php.net/readdir)甚至说了这么多：»条目按文件系统存储的顺序返回。«

因此，您必须将列表存储在一个数组中，并根据您希望它们的排序方式对其进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T23:03:34.607

php手册说：

```
string readdir ([ resource $dir_handle ] )
Returns the name of the next entry in the directory. The entries are returned in the order in which they are stored by the filesystem. 
```

这意味着它们应该以相同的方式出现。

更多信息可在[手册](http://se2.php.net/manual/en/function.readdir.php)中找到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T23:07:14.517

为什么不应用[PHP 的排序功能之一](http://php.net/manual/en/array.sorting.php)？

```
$files = readdir( $theFoldersPath );
sort( $files  ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T16:11:15.580

这是我在回答我自己的问题时提出的（在发布者的帮助下）。

```
<?php 

$dir = "low res";
$returnstr = "";

// The first part puts all the images into an array, which I can then sort using natsort()
$images = array();

if ($handle = opendir($dir)) {
    while ( false !== ($entry = readdir($handle))) {
        if ($entry != "." && $entry != ".."){
            $images[] = $entry;
        }
    }
    closedir($handle);
}

natsort($images);
print_r($images);

$newArray = array_values($images);

// This bit then outputs all the images in the folder along with it's own name

foreach ($newArray as $key => $value) {
    // echo "$key - <strong>$value</strong> <br />"; 

    $returnstr .= '<div class="imgWrapper">';
    $returnstr .= '<div class="imgFrame"><img src="'. $dir . '/' . $value . '"/></div>';
    $returnstr .= '<div class="imgName">' . $value . '</div>';
    $returnstr .= '</div>';

}

echo $returnstr;
?> 
```

# c++ - std::lock_guard 是否增加 dll 引用计数器？（负载计数）

> ID：12232093
> 
> 赞同：0
> 
> 时间：2012-09-01T22:57:28.873
> 
> 标签：c++, winapi, dll, c++11, std

我在使用 std::lock_guard 时遇到了一件奇怪的事情。注意：我正在使用 MSVS 2012 和 std::lock_guard，正如在此版本中包含和发布的新 c++11 标头中的 mutex 标头中声明的那样。

以下是复制此行为的代码，似乎使用此函数会由于某种原因增加 dll LoadCount，我的问题是是否有人可以解释原因，是否有更好的锁定函数可以使用，不会与 LoadCount 混淆？

```
#include <windows.h>
#include <mutex>

typedef struct _PEB_LDR_DATA {
ULONG Length;
BOOLEAN Initialized;
PVOID SsHandle;
LIST_ENTRY InLoadOrderModuleList;
LIST_ENTRY InMemoryOrderModuleList;
LIST_ENTRY InInitializationOrderModuleList;
} PEB_LDR_DATA, *PPEB_LDR_DATA;

typedef struct _LSA_UNICODE_STRING {
    USHORT Length;
    USHORT MaximumLength;
    PWSTR  Buffer;
} LSA_UNICODE_STRING, *PLSA_UNICODE_STRING;
typedef LSA_UNICODE_STRING UNICODE_STRING, *PUNICODE_STRING;

typedef struct _RTL_USER_PROCESS_PARAMETERS {
   BYTE           Reserved1[16];
   PVOID          Reserved2[10];
   UNICODE_STRING ImagePathName;
   UNICODE_STRING CommandLine;
} RTL_USER_PROCESS_PARAMETERS, *PRTL_USER_PROCESS_PARAMETERS;

typedef VOID (NTAPI *PPS_POST_PROCESS_INIT_ROUTINE) (VOID);

typedef struct _PEB {
    BYTE                          Reserved1[2];
    BYTE                          BeingDebugged;
    BYTE                          Reserved2[1];
    PVOID                         Reserved3[2];
    PPEB_LDR_DATA                 Ldr;
    PRTL_USER_PROCESS_PARAMETERS  ProcessParameters;
    BYTE                          Reserved4[104];
    PVOID                         Reserved5[52];
    PPS_POST_PROCESS_INIT_ROUTINE PostProcessInitRoutine;
    BYTE                          Reserved6[128];
    PVOID                         Reserved7[1];
    ULONG                         SessionId;
} PEB, *PPEB;
typedef struct _PROCESS_BASIC_INFORMATION
{
    PVOID Reserved1;
    PPEB PebBaseAddress;
    PVOID Reserved2[2];
    ULONG_PTR UniqueProcessId;
    PVOID Reserved3;
} PROCESS_BASIC_INFORMATION;
typedef enum _PROCESSINFOCLASS
{
    ProcessBasicInformation = 0,
} PROCESSINFOCLASS, *PPROCESSINFOCLASS;

typedef struct _LDRP_CSLIST
{
    PSINGLE_LIST_ENTRY Tail;
} LDRP_CSLIST, *PLDRP_CSLIST;
typedef enum _LDR_DDAG_STATE
{
LdrModulesMerged = -5,
LdrModulesInitError = -4,
LdrModulesSnapError = -3,
LdrModulesUnloaded = -2,
LdrModulesUnloading = -1,
LdrModulesPlaceHolder = 0,
LdrModulesMapping = 1,
LdrModulesMapped = 2,
LdrModulesWaitingForDependencies = 3,
LdrModulesSnapping = 4,
LdrModulesSnapped = 5,
LdrModulesCondensed = 6,
LdrModulesReadyToInit = 7,
LdrModulesInitializing = 8,
LdrModulesReadyToRun = 9
} LDR_DDAG_STATE;
typedef struct _LDR_DDAG_NODE
{
LIST_ENTRY Modules;
PVOID ServiceTagList;
ULONG LoadCount;//this is where its located in windows 8
ULONG ReferenceCount;
ULONG DependencyCount;
union
{
    LDRP_CSLIST Dependencies;
    SINGLE_LIST_ENTRY RemovalLink;
};
LDRP_CSLIST IncomingDependencies;
LDR_DDAG_STATE State;
SINGLE_LIST_ENTRY CondenseLink;
ULONG PreorderNumber;
ULONG LowestLink;
} LDR_DDAG_NODE, *PLDR_DDAG_NODE;
typedef struct _LDR_MODULE {
LIST_ENTRY InLoadOrderModuleList;
    LIST_ENTRY InMemoryOrderModuleList;
    LIST_ENTRY InInitializationOrderModuleList;
    PVOID BaseAddress;
    PVOID EntryPoint;
    ULONG SizeOfImage;
    UNICODE_STRING FullDllName;
    UNICODE_STRING BaseDllName;
    ULONG Flags;
    USHORT obsoleteLoadCount;//in windows 8 this is obsolete
    USHORT TlsIndex;//but we can still use it in win 7 and below
union
{
        LIST_ENTRY HashLinks;
        struct CheckPtr
        {
            PVOID SectionPointer;
            ULONG CheckSum;
        };
};
union
{
        ULONG TimeDateStamp;
        PVOID LoadedImports;
};
struct _ACTIVATION_CONTEXT *EntryPointActivationContext;
PVOID PatchInformation;
PLDR_DDAG_NODE DdagNode;
} LDR_MODULE, *PLDR_MODULE;

typedef NTSTATUS (__stdcall *pfnZwQueryInformationProcess) (HANDLE, PROCESSINFOCLASS,
    PVOID, ULONG, PULONG);
pfnZwQueryInformationProcess ZwQueryInformationProcess;

DWORD GetModuleLoadCount(HMODULE hmod)
{
    HMODULE hModule = LoadLibrary("ntdll.dll");
    if(hModule==NULL)
       return NULL;
    ZwQueryInformationProcess = (pfnZwQueryInformationProcess) GetProcAddress(hModule, 
        "ZwQueryInformationProcess");
    if (ZwQueryInformationProcess == NULL) {
        FreeLibrary(hModule)
        return NULL;    // failed to get PEB
    }

PROCESS_BASIC_INFORMATION pbi;
    PROCESSINFOCLASS pic = ProcessBasicInformation;
    if (ZwQueryInformationProcess(GetCurrentProcess(), pic, &pbi, sizeof(pbi), NULL) 
        != STATUS_SUCCESS)
    {
        // ZwQueryInformationProcess failed...
        FreeLibrary(hModule);
        return NULL;
    }
    FreeLibrary(hModule);

LDR_MODULE *peb_ldr_module = (LDR_MODULE 
        *)pbi.PebBaseAddress->Ldr->InLoadOrderModuleList.Flink;
while((peb_ldr_module = (LDR_MODULE 
        *)peb_ldr_module->InLoadOrderModuleList.Flink)!=(LDR_MODULE 
        *)pbi.PebBaseAddress->Ldr->InLoadOrderModuleList.Blink) {
    if(peb_ldr_module->BaseAddress==hmod) {
        //well this actualy works in windows 8...
        //and probably vista with aero enabled as well...
        //anyway if it is obsolete its always 6
        //so we can if it out like this...
        if(peb_ldr_module->obsoleteLoadCount==6)
            return peb_ldr_module->DdagNode->LoadCount;
        else
            return peb_ldr_module->obsoleteLoadCount;
    }
}
if(peb_ldr_module->BaseAddress==hmod) {
    if(peb_ldr_module->obsoleteLoadCount==6)
        return peb_ldr_module->DdagNode->LoadCount;
    else
        return peb_ldr_module->obsoleteLoadCount;
}
}

mutable std::mutex g_logMutex;
void test()//test is just a function inside of my dll
{          //which is injected and running under low privileges in internet explorer as
           //an addon, I dont think that matters, but i dont want to leave any info out 
           //that might help answer my question.
int loadcount = GetModuleLoadCount((HMODULE)gModule);//its 1 here
    std::lock_guard<std::mutex> lock(g_logMutex);
loadcount = GetModuleLoadCount((HMODULE)gModule);//now its 2
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T23:07:19.370

如果是这样，这是未定义的行为。C++ 不“了解” DLL（因为 DLL 是特定于 Windows 的）。

更有可能的是，您要么看到了竞争条件，要么您正在使用的 std::lock_guard 实现正在泄漏模块句柄。

# scala - Scala 类型不匹配

> ID：12232095
> 
> 赞同：3
> 
> 时间：2012-09-01T22:57:58.953
> 
> 标签：scala, mongodb, playframework, playframework-2.0

我遇到类型不匹配的问题。

类型不匹配; 找到：Option[models.User] 必需：models.User

```
def authenticate = Action { implicit request =>
        signinForm.bindFromRequest.fold(
          formWithErrors => BadRequest(html.signin(formWithErrors)),
          user => Redirect(routes.Application.active).withSession(Security.username -> User.getUserName(user))
        )
      } 
```

如何强制函数接受 Option[models.User] 或者我可以将 models.User 转换为 Option？

错误发生在这里：User.getUserName(user)。getUserName 需要模型。用户类型。

================================================

使用所有使用的代码进行更新：

来自 User.scala

```
 def authenticate(email: String, password: String) : Option[User] = {
    (findByEmail(email)).filter { (user => BCrypt.checkpw(password, user.password)) }
  }

  def findByEmail(email: String) : Option[User] = {
    UserDAO.findOne(MongoDBObject("email" -> email))
  } 
```

来自 Application.scala

```
 val signinForm = Form {
    mapping(
      "email" -> nonEmptyText, 
      "password" -> text)(User.authenticate)(_.map(user => (user.email, "")))
      .verifying("Invalid email or password", result => result.isDefined)
  }

  def authenticate = Action { implicit request =>
    signinForm.bindFromRequest.fold(
      formWithErrors => BadRequest(html.signin(formWithErrors)),
      user => Redirect(routes.Application.active).withSession(Security.username -> User.getUserName(user.get))
    )
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T23:58:25.943

要将 an 取消选择`Option[User]`为 a `User`，您可以执行以下操作之一：

1）不安全的方式。仅当您**确定**不是`optUser`时才这样做`None`。

```
val optUser: Option[User] = ...
val user: User = optUser.get 
```

2）安全的方式

```
val optUser: Option[User] = ...
optUser match {
  case Some(user) => // do something with user
  case None => // do something to handle the absent user
} 
```

3）一元安全方式

```
val optUser: Option[User] = ...
optUser.map(user => doSomething(user)) 
```

最重要的是，如果有`optUser`可能`None`，你需要弄清楚在没有`User`对象的情况下你真正想要发生的事情。

`Option`如果您想了解更多信息，请参阅其他 StackOverflow 问题中的更多信息。

# .htaccess - 编写 mod-rewrite 规则

> ID：12232097
> 
> 赞同：0
> 
> 时间：2012-09-01T22:58:37.050
> 
> 标签：.htaccess, mod-rewrite

我正在尝试为要解析的以下 URL 编写一个 htaccess 文件。

```
/folder/title-of-article/id=6 
```

传递给-

```
/page.php?id=6 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T01:48:54.957

假设您的文章标题不能包含斜杠，您可以使用：

```
RewriteEngine On
RewriteRule ^folder/[^/]+/id=([0-9]+)$ /page.php?id=$1 
```

这将匹配`/folder/<anything not containing slashes>/id=<digits>`

# python - Django：{{ request.user }} 没有在模板中显示任何内容

> ID：12232100
> 
> 赞同：1
> 
> 时间：2012-09-01T22:59:03.567
> 
> 标签：python, django, django-templates

我的`view`样子

```
def done(request):
    """Login complete view, displays user data"""
    ctx = {
        'version': version,
        'last_login': request.session.get('social_auth_last_login_backend')
    }
    logging.info(str(request))
    return render_to_response('home.html', ctx, RequestContext(request)) 
```

，`template: home.html`我愿意

```
 <p>Hello {{ request.user }}</p> 
```

但它不打印**用户**，只是打印**Hello** I do user in logs

```
'USER': 'iamuser', 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T23:04:35.810

确保您已添加：

```
django.core.context_processors.request 
```

到您的 TEMPLATE_CONTEXT_PROCESSORS 设置`settings.py`。[文档](https://docs.djangoproject.com/en/dev/ref/templates/api/#django-core-context-processors-request)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T04:25:40.497

不需要请求对象。模板可以访问用户变量。所以简单地`{{ user.first_name }}`工作。

# .net - 类型初始化异常

> ID：12232102
> 
> 赞同：0
> 
> 时间：2012-09-01T22:59:40.823
> 
> 标签：.net, visual-studio-2010, exception, projects-and-solutions

我想在解决方案中下订单。

它看起来像这样：

![在此处输入图像描述](../Images/8a43ce9cebc1c682d79657d34328d173.png)

当我将 DLL 文件放入 OpenCV_DLL 文件夹时，如下所示：

![在此处输入图像描述](../Images/488a98214d8f8d979a6318c5ec80ffd1.png)

我得到这个例外：

**{“'Emgu.CV.CvInvoke' 的类型初始化器抛出异常。”}**

知道为什么我会得到这些异常，我该如何解决？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T05:17:08.387

异常经常被包装。展开异常以获取有关问题的更多详细信息：

```
catch(Exception ex) {
    while(ex!=null) {
        Debug.WriteLine(ex.Message);
        ex = ex.InnerException;
    }
} 
```

你会在下面找到真正的问题。

在这种情况下，问题在于 dll 将部署到错误的位置 - 到子文件夹中，而不是在正在运行的程序集旁边。您*可以*尝试向 OpenCV_dll 添加探测路径，但坦率地说，我只是将它们移回根级别。有关添加探测路径的信息，请参阅 MSDN：http: [//msdn.microsoft.com/en-us/library/823z9h8w.aspx](http://msdn.microsoft.com/en-us/library/823z9h8w.aspx)

# mysql - 表名超过 18 个字符时 sqlSave 失败

> ID：12232105
> 
> 赞同：0
> 
> 时间：2012-09-01T23:00:07.967
> 
> 标签：mysql, r, rodbc

我目前正在编写一个脚本，该脚本从 FTP 服务器下载一堆 .csv，然后将每个 .csv 作为自己的表放入 MySQL 数据库中。

我使用 RCurl 从 FTP 下载 .csv 文件，并将所有 .csv 文件放在我的工作目录中。为了从每个 .csv 中创建表，我使用了 RODBC 包中的 sqlSave 函数，其中表名与 .csv 相同。每当 .csv 名称少于 18 个字符时，这都可以正常工作，但是当它更大时，它会失败。“失败”是指 R 崩溃。为了追踪这个错误，我在 sqlSave 上调用了调试。

我发现至少有两个 sqlSave 调用的函数会导致 R 崩溃。第一个是 RODBC:::odbcTableExists，它是一个不可见的函数。这是该函数的代码：

```
 RODBC:::odbcTableExists
function (channel, tablename, abort = TRUE, forQuery = TRUE, 
    allowDot = attr(channel, "interpretDot")) 
{
    if (!odbcValidChannel(channel)) 
        stop("first argument is not an open RODBC channel")
    if (length(tablename) != 1) 
        stop(sQuote(tablename), " should be a name")
    tablename <- as.character(tablename)
    switch(attr(channel, "case"), nochange = {
    }, toupper = tablename <- toupper(tablename), tolower = tablename <- tolower(tablename))
    isExcel <- odbcGetInfo(channel)[1L] == "EXCEL"
    hasDot <- grepl(".", tablename, fixed = TRUE)
    if (allowDot && hasDot) {
        parts <- strsplit(tablename, ".", fixed = TRUE)[[1]]
        if (length(parts) > 2) 
            ans <- FALSE
        else {
            res <- if (attr(channel, "isMySQL")) 
                sqlTables(channel, catalog = parts[1], tableName = parts[2])
            else sqlTables(channel, schema = parts[1], tableName = parts[2])
            ans <- is.data.frame(res) && nrow(res) > 0
        }
    }
    else if (!isExcel) {
        res <- sqlTables(channel, tableName = tablename)
        ans <- is.data.frame(res) && nrow(res) > 0
    }
    else {
        res <- sqlTables(channel)
        tables <- stables <- if (is.data.frame(res)) 
            res[, 3]
        else ""
        if (isExcel) {
            tables <- sub("^'(.*)'$", "\\1", tables)
            tables <- unique(c(tables, sub("\\$$", "", tables)))
        }
        ans <- tablename %in% tables
    }
    if (abort && !ans) 
        stop(sQuote(tablename), ": table not found on channel")
    enc <- attr(channel, "encoding")
    if (nchar(enc)) 
        tablename <- iconv(tablename, to = enc)
    if (ans && isExcel) {
        dbname <- if (tablename %in% stables) 
            tablename
        else paste(tablename, "$", sep = "")
        if (forQuery) 
            paste("[", dbname, "]", sep = "")
        else dbname
    }
    else if (ans) {
        if (forQuery && !hasDot) 
            quoteTabNames(channel, tablename)
        else tablename
    }
    else character(0L)
} 
```

当表名长度超过 18 个字符时，此处失败：

```
 res <- sqlTables(channel, tableName = tablename) 
```

我已通过将其更改为：

```
 res <- sqlTables(channel, tablename) 
```

然后，我使用 assignInNamepace 重新分配命名空间中具有相同名称 (odbcTableExists) 的函数，并更改此代码。

RODBC:::odbcTableExists 不再导致问题。但是，当从 sqlSave() 中调用 sqlwrite 时，R 仍然会崩溃。我在 sqlwrite 上调用了调试，我发现 RODBC:::odbcColumns （另一个不可见的函数）会导致表名太长时崩溃。不幸的是，我不确定如何更改 RODBC:::odbcColumns 以避免像以前那样出现错误。

我使用的是 R 2.15.1，平台是：x86_64-pc-ming32/x64（64 位）。我还应该注意，我正在尝试在工作计算机上运行它，但是如果我在个人计算机上运行完全相同的代码，R 不会崩溃（没有错误）。工作计算机运行 windows 7 专业版，我的家用计算机运行带有 R 2.14.1 的 windows 7 家庭高级版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:58:01.683

我喜欢这个 hack（我也有 R 2.15.1 的 Windows 7 Professional 在工作），它不再崩溃，但是在我替换该行并使用 assignInNamespace 后它会导致另一个问题；也出于某种原因，我不得不用 RODBC:::odbcValidChannel 替换 odbcValidChannel 和用 RODBC:::quoteTabNames 替换 quoteTabNames

但是当我使用 sqlSave 时，出现以下错误：

odbcUpdate(channel, query, mydata, coldata[m, ], test = test, 中的错误：没有参数，所以没有什么要更新的

我什至没有在代码中的任何地方使用 odbcUpdate，而且 RODBC::: sqlSave 内部没有 odbcUpdate 调用。

有什么想法吗？

谢谢你，-亚历克斯

# jquery - 带箭头的滑块

> ID：12232106
> 
> 赞同：1
> 
> 时间：2012-09-01T23:00:10.697
> 
> 标签：jquery, slider, zurb-foundation, orbit

我正在创建一个与 zurb 的轨道滑块一起运行的滑块。这一点是我想用一组导航箭头控制两个幻灯片......这是我添加到 orbit.next 函数的内容：

```
$('.description > p:visible')
  .fadeOut(500)
  .next()
  .fadeIn(500)
  .end()
  .appendTo('.description'); 
```

那是下一个箭头的代码，但我如何调整此代码使其也适用于上一个箭头？

谢谢
本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T02:55:04.707

我已经想通了...

```
 this.$element.bind('orbit.next', function () {
    self.shift('next');

    if ($('.description > p:visible').is(':not(:last-of-type)')) {
      $('.description > p:visible').fadeOut(500).next().fadeIn(500);
    } else {
      $('.description > p:visible').fadeOut(500);
      $('.description > p:first').fadeIn(500);
    }
  });

  this.$element.bind('orbit.prev', function () {
    self.shift('prev');
    if ($('.description > p:visible').is(':not(:first-of-type)')) {
      $('.description > p:visible').fadeOut(500).prev().fadeIn(500);
    } else {
      $('.description > p:visible').fadeOut(500);
      $('.description > p:last').fadeIn(500);
    }
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T00:01:17.030

我真的不知道轨道滑块，但我想我可以以某种方式提供帮助，这就是我到目前为止所做的

```
$('.description p:last-fo-type')
  .fadeOut(500)
  .prev()
  .fadeIn(500)
  .end()
  .prependTo('.description'); 
```

如果我误解了什么，请告诉我。所以我可以做必要的更正。

祝你好运。

# mysql - bash脚本访问多个mysql数据库

> ID：12232109
> 
> 赞同：0
> 
> 时间：2012-09-01T23:00:39.150
> 
> 标签：mysql, bash, sh

我都，

我有一系列具有不同用户和密码的 MYSQL 数据库，但是所有数据库的数据库结构都是相同的。我无法为所有用户创建具有相同用户名和密码的用户，我需要快速对所有用户执行操作。

我正在考虑一个通过 cron 运行的 bash 脚本。

有什么建议吗？我在想这样的事情，但它不起作用:(

```
#!/bin/bash
uconn=(
            'mysql -u user_db1         --password=pass_db1      db1      '
            'mysql -u user_db2         --password=pass_db2      db2      ' 

             )

for f in "${uconn[@]}"
do
    exec ${f}
    echo `mysql show tables`
    echo `mysql exit`
done
exit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T00:57:49.157

为什么不使用[记录](http://dev.mysql.com/doc/refman/5.5/en/mysql.html)的方式？

```
do
  ${f} <<EOF
show tables
\\q
EOF
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T08:55:03.027

考虑到@Ansgar Wiechers，只需粘贴完整的代码：

```
#!/bin/bash
uconn=(
            'mysql -u user_db1 --password=pass_db1  db1'
            'mysql -u user_db2 --password=pass_db2  db2' 

             )

for f in "${uconn[@]}"
    do
      ${f} <<EOF
    show tables
    \\q
    EOF
    done
exit 
```

要将代码从本地机器执行到远程机器，这对我有用：

```
ssh ssh_user@mydomain.com 'bash -s' < /local/path/to/multiple_db_connections.sh 
```

其中**multiple_db_connections.sh**的内容就是上面的代码

# iphone - 尝试使用 Reachable.h/.m 检查互联网访问时出错

> ID：12232110
> 
> 赞同：0
> 
> 时间：2012-09-01T23:00:41.493
> 
> 标签：iphone, objective-c, c, xcode, reachability

我已经导入了 Reachable 并在这个线程上遵循了选择的分析器：[iOS 4 的可达性指南](https://stackoverflow.com/questions/3790957/reachability-guide-for-ios-4)一切看起来都很好，除了一个黄色三角形表示“不完整的实现”。然后，当我按下运行时，我收到来自 Reachable.m 文件的十个红色错误，例如“ARC 禁止显式发送释放消息”、“NSAutoReleasePool 在自动计数引用模式下不可用”和“C 类型指针类型转换” void ': to objective-c 指针类型'Reachability' 等和'struct sockaddr_in' 的声明将在Reachable.h 文件中在此函数[3] 之外不可见。有什么想法吗？也许Reachable 文件已经出来了日期？我没有使用 C 数据类型等的经验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T23:38:48.010

Apple 的 Reachability 示例代码最后一次更新是在 2010 年。它不使用`ARC`并且包含转换为`ARC`.

解决方案很简单：

设置该`-fno-objc-arc`文件的编译器标志。

![为 Reachability.m 设置的编译器 -fno-obj-arc 标志](../Images/a007181db954fcfffdac955fa919098c.png)

# wpf - 创建具有不同前后拇指背景颜色的滑块

> ID：12232120
> 
> 赞同：10
> 
> 时间：2012-09-01T23:02:22.693
> 
> 标签：wpf, xaml, slider, styling

我目前正在开发媒体播放器。我想创建一个像这个屏幕截图上的滑块：

![滑块](../Images/e6debb153978056c71739e7b6497417e.png)

我现在得到的是这个：

![current_slider](../Images/b331a02281e701919f63f71ae2c580ea.png)

我目前正在为拇指前的灯条而苦苦挣扎。它根据拇指的位置改变它的长度。如何在 WPF 中实现这一点？还是我应该尝试使用进度条？

ATM，我有这个代码：

```
 <LinearGradientBrush x:Key="SliderThumbGradient" StartPoint="0,0" EndPoint="0,1">
    <GradientStop Offset="0" Color="#f7f7f7"/>
    <GradientStop Offset="1" Color="#bcbcbc"/>
</LinearGradientBrush>

<Style x:Key="SliderButtonStyle" TargetType="{x:Type RepeatButton}">
    <Setter Property="SnapsToDevicePixels" Value="true"/>
    <Setter Property="OverridesDefaultStyle" Value="true"/>
    <Setter Property="IsTabStop" Value="false"/>
    <Setter Property="Focusable" Value="false"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type RepeatButton}">
                <Border Background="Transparent" />
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<Style x:Key="SliderThumbStyle" TargetType="{x:Type Thumb}">
    <Setter Property="SnapsToDevicePixels" Value="true"/>
    <Setter Property="OverridesDefaultStyle" Value="true"/>
    <Setter Property="Height" Value="14"/>
    <Setter Property="Width" Value="14"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Thumb}">
                <Ellipse 
      Name="Ellipse" 
      Fill="{DynamicResource SliderThumbGradient}"
      Stroke="#404040"
      StrokeThickness="1" />
                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter TargetName="Ellipse" Property="Fill" Value="#808080"/>
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="false">
                        <Setter TargetName="Ellipse" Property="Fill" Value="#EEEEEE"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<ControlTemplate x:Key="HorizontalSlider" TargetType="{x:Type Slider}">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto" MinHeight="{TemplateBinding Slider.MinHeight}"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <TickBar 
  Name="TopTick"
  SnapsToDevicePixels="True" 
  Placement="Top"
  Fill="#404040"
  Height="4"
  Visibility="Collapsed" />
        <Border 
  Name="TrackBackground"
  Margin="0"
  CornerRadius="6" 
  Height="12"
  Grid.Row="1"
  Background="#0a0a0a" 
  BorderBrush="#121212"
  BorderThickness="1" />
        <Track Grid.Row="1" Name="PART_Track">
            <Track.DecreaseRepeatButton>
                <RepeatButton 
      Style="{StaticResource SliderButtonStyle}"
      Command="Slider.DecreaseLarge" />
            </Track.DecreaseRepeatButton>
            <Track.Thumb>
                <Thumb Style="{StaticResource SliderThumbStyle}" />
            </Track.Thumb>
            <Track.IncreaseRepeatButton>
                <RepeatButton 
      Style="{StaticResource SliderButtonStyle}"
      Command="Slider.IncreaseLarge" />
            </Track.IncreaseRepeatButton>
        </Track>
        <TickBar 
  Name="BottomTick"
  SnapsToDevicePixels="True" 
  Grid.Row="2"
  Fill="{TemplateBinding Foreground}"
  Placement="Bottom"
  Height="4"
  Visibility="Collapsed" />
    </Grid>
    <ControlTemplate.Triggers>
        <Trigger Property="TickPlacement" Value="TopLeft">
            <Setter TargetName="TopTick" Property="Visibility" Value="Visible"/>
        </Trigger>
        <Trigger Property="TickPlacement" Value="BottomRight">
            <Setter TargetName="BottomTick" Property="Visibility" Value="Visible"/>
        </Trigger>
        <Trigger Property="TickPlacement" Value="Both">
            <Setter TargetName="TopTick" Property="Visibility" Value="Visible"/>
            <Setter TargetName="BottomTick" Property="Visibility" Value="Visible"/>
        </Trigger>
    </ControlTemplate.Triggers>
</ControlTemplate>

<ControlTemplate x:Key="VerticalSlider" TargetType="{x:Type Slider}">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="Auto" MinWidth="{TemplateBinding Slider.MinWidth}"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        <TickBar 
  Name="TopTick"
  SnapsToDevicePixels="True" 
  Placement="Left"
  Fill="#404040"
  Width="4"
  Visibility="Collapsed" />
        <Border 
  Name="TrackBackground"
  Margin="0"
  CornerRadius="2" 
  Width="4"
  Grid.Column="1"
  Background="#E0E0E0" 
  BorderBrush="#404040"
  BorderThickness="1" />
        <Track Grid.Column="1" Name="PART_Track">
            <Track.DecreaseRepeatButton>
                <RepeatButton 
      Style="{StaticResource SliderButtonStyle}"
      Command="Slider.DecreaseLarge" />
            </Track.DecreaseRepeatButton>
            <Track.Thumb>
                <Thumb Style="{StaticResource SliderThumbStyle}" />
            </Track.Thumb>
            <Track.IncreaseRepeatButton>
                <RepeatButton 
      Style="{StaticResource SliderButtonStyle}"
      Command="Slider.IncreaseLarge" />
            </Track.IncreaseRepeatButton>
        </Track>
        <TickBar 
  Name="BottomTick"
  SnapsToDevicePixels="True" 
  Grid.Column="2"
  Fill="{TemplateBinding Foreground}"
  Placement="Right"
  Width="4"
  Visibility="Collapsed" />
    </Grid>
    <ControlTemplate.Triggers>
        <Trigger Property="TickPlacement" Value="TopLeft">
            <Setter TargetName="TopTick" Property="Visibility" Value="Visible"/>
        </Trigger>
        <Trigger Property="TickPlacement" Value="BottomRight">
            <Setter TargetName="BottomTick" Property="Visibility" Value="Visible"/>
        </Trigger>
        <Trigger Property="TickPlacement" Value="Both">
            <Setter TargetName="TopTick" Property="Visibility" Value="Visible"/>
            <Setter TargetName="BottomTick" Property="Visibility" Value="Visible"/>
        </Trigger>
    </ControlTemplate.Triggers>
</ControlTemplate>

<Style TargetType="{x:Type Slider}">
    <Setter Property="SnapsToDevicePixels" Value="true"/>
    <Setter Property="OverridesDefaultStyle" Value="true"/>
    <Style.Triggers>
        <Trigger Property="Orientation" Value="Horizontal">
            <Setter Property="MinWidth" Value="104" />
            <Setter Property="MinHeight" Value="21" />
            <Setter Property="Template" Value="{StaticResource HorizontalSlider}" />
        </Trigger>
        <Trigger Property="Orientation" Value="Vertical">
            <Setter Property="MinWidth" Value="21" />
            <Setter Property="MinHeight" Value="104" />
            <Setter Property="Template" Value="{StaticResource VerticalSlider}" />
        </Trigger>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-02T00:20:03.187

在左侧改变其长度的对象是[DecreaseRepeatButton](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.track.decreaserepeatbutton%28v=vs.100%29)。您可以通过为其创建样式来实现不同的颜色。~~不知道如何获得右侧的凹边~~。

IE

```
<Style x:Key="DecreaseSliderButtonStyle" TargetType="{x:Type RepeatButton}">
    <Setter Property="SnapsToDevicePixels" Value="true"/>
    <Setter Property="OverridesDefaultStyle" Value="true"/>
    <Setter Property="IsTabStop" Value="false"/>
    <Setter Property="Focusable" Value="false"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type RepeatButton}">
                <Border Height="12" Background="DimGray" CornerRadius="6" Margin="0,0,-12,0" />
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

并在您的 ControlTemplate 中：

```
<Track.DecreaseRepeatButton>
    <RepeatButton 
        Style="{StaticResource DecreaseSliderButtonStyle}"
        Command="Slider.DecreaseLarge" />
</Track.DecreaseRepeatButton> 
```

# javascript - 如何在不进入无限循环的情况下将站点重定向到 Facebook 画布 URL？

> ID：12232121
> 
> 赞同：2
> 
> 时间：2012-09-01T23:02:32.473
> 
> 标签：javascript, jquery, html, facebook, facebook-graph-api

如果我的 Facebook 画布页面指向 mydomain.com，并且如果用户直接访问 mydomain.com，我如何让该网站显示在 Facebook 画布页面上？基本上，我希望我的网站始终加载到 Facebook 画布上。如果我只是重定向到apps.facebook.com/mydomain，我认为它会进入无限循环，因为Facebook 画布正在尝试加载mydomain.com。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T23:20:04.497

你可以在javascript中做客户端。检查页面当前是否在 iframe 中打开，如果不是，您不在 facebook 中，应该执行重定向：

if(window.parent === window) 做重定向

您可以找到一种在服务器端实现它的方法，但是，除非 facebook 在加载时传递一些特定参数，否则您可能需要依赖 HTTP_REFERER 参数并且浏览器不会总是发送它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T15:46:46.580

我在另一个问题上找到了这个并在我自己的脚本中使用它：

```
<script type="text/javascript">
  function NotInFacebookFrame() {
    return top === self;
  }
  function ReferrerIsFacebookApp() {
    if(document.referrer) {
      return document.referrer.indexOf("apps.facebook.com") != -1;
    }
    return false;
  }
  if (NotInFacebookFrame()) {
    top.location.replace("https://apps.facebook.com/YOUR_APP_NAMESPACE");
  }
</script> 
```

这会检查他们当前是否在 Facebook 框架中，*仅当他们不在时才会将他们重定向到“https://apps.facebook.com/YOUR_APP_NAMESPACE”

**注意：**您可以在应用程序的任何页面上使用它，只需相应地更改 URL。

**例如：**如果您在[http://YourDomain.com/anotherpage.php](http://YourDomain.com/anotherpage.php)中使用它，您可以将上面代码中的 URL 更改为[https://apps.facebook.com/YOUR_APP_NAMESPACE/anotherpage.php](https://apps.facebook.com/YOUR_APP_NAMESPACE/anotherpage.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T23:06:12.500

检查 HTTP 请求标头中的引荐来源网址，并以此为基础。话虽如此，我不知道将您的整个网站重定向到 Facebook 是解决您问题的好方法。

更好的解决方案是将 Facebook 应用程序部分托管在单独的页面或域上，并从您的首页链接到它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-02T00:24:58.553

如果您的应用程序正在 Facebook 中加载，则该页面将被发布到，并且 POST 数据将包含一个`signed_request`字段。这可以在服务器上用于发现用户是否正确访问应用程序 - 如何在 iframe 内的导航中保留此信息取决于您。

客户端可以查`window !== top`，和`/canvas/.test(window.name)`。

# ajax - 使用 managedBean jsf2 primefaces 中的代码编辑数据表

> ID：12232132
> 
> 赞同：0
> 
> 时间：2012-09-01T23:04:41.743
> 
> 标签：ajax, jakarta-ee, jsf-2, datatable, primefaces

我有一个数据表，当用户选中或取消选中其中一个检查框时，我想通过编程来编辑其组件的值，这里是数据表：

```
<p:dataTable  var="car" style="width: 270px;margin-top: 15px;margin-left: 60px" binding="#{editCommandController.hd}" value="#{editCommandController.lp}" id="carList" editable="true">  

                    <f:facet name="header">  
                        Stock Papiers 
                    </f:facet>  

                    <p:column headerText="Libéllé" style="width:70px">                                
                        <h:outputText value="#{car.libelle}" style="width: 70px;" label="Year"/>                                   
                    </p:column>  

                    <p:column headerText="Stock" style="width:40px">                             
                        <h:outputText value="#{car.stock}"  label="Year"/>                        
                    </p:column>

                    <p:column headerText="Choisir" style="width:40px;margin: auto;">       
                        <p:selectBooleanCheckbox  id="karim" binding="#{editCommandController.tmp}" value="#{car.checked}" disabled="#{editCommandController.result gt car.stock}" >
                            <p:ajax  listener="#{editCommandController.checkListener}"/>
                        </p:selectBooleanCheckbox> 

                    </p:column>

                </p:dataTable> 
```

这是 managedBean ：

```
public void checkListener(AjaxBehaviorEvent e) {
    System.out.println("je suis "+e.getComponent().getClientId()+" utilisé : et tmp :" );

     List<Papier> lp1;
    lp1 = new ArrayList();
     lp1 = (List<Papier>) getHd().getValue();
   // getHd().se
     System.out.println("lp1.size() : "+lp1.size());
     Boolean a = true;
     System.out.println("ce bool a = "+a);
    for(int i = 0 ; i< lp1.size();i++){
       System.out.println("alors le cheched est : "+lp1.get(i).getChecked());
       if(lp1.get(i).getChecked()){
           if(lastChecked != null){                   
               for(int j = 0;j<lp1.size();j++){
                   if(lp1.get(j).getId().equals(lastChecked)){
                       lp1.get(j).setChecked(false);
                       break;
                   }
               }
               lastChecked = lp1.get(i).getId();
           }else{
               lastChecked = lp1.get(i).getId();
           }

       }

    }
     System.out.println("avant d'affecter voila ce quilya : ");
      for(int i = 0 ; i< lp1.size();i++){
          System.out.println("alors le cheched n "+i+" est : "+lp1.get(i).getChecked());
        }

      org.primefaces.component.datatable.DataTable editdt = new DataTable();
      editdt.setValue(lp1);
      setHd(editdt);
    //getHd().setValue(lp1);

} 
```

在 managedBean 我也有：

```
private org.primefaces.component.datatable.DataTable hd;

public org.primefaces.component.datatable.DataTable getHd() {
    return hd;
}

public void setHd(org.primefaces.component.datatable.DataTable hd) {
    this.hd = hd;
} 
```

就像你在上面看到的，我使用 binding 属性将数据表与 managedBean 链接，但是当我使用

```
org.primefaces.component.datatable.DataTable editdt = new DataTable();
      editdt.setValue(lp1);
      setHd(editdt);
    //getHd().setValue(lp1); 
```

我在数据表上看不到我的更改，您知道吗，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:02:44.647

您不会在客户端更新数据表以反映您在服务器端所做的更改。`update= "carList"`使用ajax 事件通过 ajax 刷新数据表。

# android - 移动网络变化的广播意图

> ID：12232133
> 
> 赞同：1
> 
> 时间：2012-09-01T23:04:49.980
> 
> 标签：android

我需要检测用户何时移至 3g 网络或 2G 网络或处于无服务区。是否有标准的android广播意图？

目前我在服务中每分钟轮询以下代码。

> TelephonyManager tm=(TelephonyManager) getSystemService(TELEPHONY_SERVICE); if(tm.getNetworkType()==TelephonyManager.NETWORK_TYPE_EDGE){ }

但这不是正确的方法，并且可能会饿死。如果它仅由侦听器或广播意图触发会更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T00:05:57.697

`ConnectivityManager.CONNECTIVITY_ACTION`您需要在 OnRecieve中注册意图才能执行此操作。

```
if (intent.getAction().equals(ConnectivityManager.CONNECTIVITY_ACTION)) {
    NetworkInfo info = intent.getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);
    String typeName = info.getTypeName();
} 
```

编辑：您需要在意图过滤器标签“android.net.conn.CONNECTIVITY_CHANGE”中使用实际字符串。还要检查这个[文档](http://developer.android.com/reference/android/net/ConnectivityManager.html#CONNECTIVITY_ACTION)

# javascript - 如何清除所有正在进行的 JQuery

> ID：12232138
> 
> 赞同：1
> 
> 时间：2012-09-01T23:06:08.660
> 
> 标签：javascript, jquery

我编写了一个 JQuery 程序，只需按一下按钮，它就会运行十几个 setTimeout 以及一些动画。该程序在现有的 div 上运行，更改它们的 HTML（使用 id 选择器），淡入，淡出等......

整个过程最多可能需要 15 秒。问题是，如果在该时间范围内再次按下按钮，那么淡入和淡出开始相互堆叠并且看起来很奇怪。

有什么我可以使用的东西，如果再次按下按钮，那么所有正在进行的 JQuery 内容都会停止并被清除？我尝试过使用 clearTimeout，这似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T23:12:08.670

您可以使用[`.stop()`](http://api.jquery.com/stop/)或[`.clearQueue()`](http://api.jquery.com/clearQueue/)。

> 当调用 .clearQueue() 方法时，队列中所有尚未执行的函数都会从队列中移除。当不带参数使用时，.clearQueue() 会从标准效果队列 fx 中删除剩余的函数。这种方式类似于.stop(true)。然而，虽然**.stop() 方法仅用于动画**，**但 .clearQueue() 也可用于删除已使用 .queue() 方法添加到通用 jQuery 队列的任何函数。**

您还可以阻止按钮执行任何操作，直到计时器完成。您可以放置​​一个布尔变量，在第一次单击后获取值`false`并且计时器完成时，将此变量转回`true`并在您单击按钮时检查它。

# java - 如何使用 ACM 库在 Java 中创建圆角对角线？

> ID：12232141
> 
> 赞同：2
> 
> 时间：2012-09-01T23:06:14.787
> 
> 标签：java, graphics, acm-java-libraries

我正在尝试使用 ACM 库在 Java 中绘制圆角对角线。

一个非常复杂的方法是画一条对角线，放大它以增加它的宽度，在这条线的顶部画一条相对于它的圆角的弧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T05:25:21.340

从您链接到的图片中，您似乎想要带有圆形端盖的线条，有时称为线条连接。我不太了解 ACM 库，但是查看它的文档，您似乎可以通过使用[`GPen`](http://jtf.acm.org/javadoc/student/acm/graphics/GPen.html)带有填充圆圈的图像来实现这种外观。您可以在其上调用`setLocation(x,y)`then`drawLine(dx, dy)`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T06:02:55.270

我从未使用过 ACM，但查看 javadoc 您可能要考虑使用形状而不是线条。因此，例如，您可以使用[GPolygon绘制一个宽度的矩形，然后使用](http://jtf.acm.org/javadoc/student/acm/graphics/GPolygon.html)[GOval](http://jtf.acm.org/javadoc/student/acm/graphics/GOval.html)在末端绘制圆形

就像这样：围绕点 [100,0]、[0,100]、[10,110]、[110,10] 绘制一个多边形，然后在 0,110 和 110,0 处绘制两个大小为 10 的圆。如果这些形状都用相同的颜色填充，它们应该看起来像一个实体。

# javascript - 如何从重叠的图像创建时钟

> ID：12232142
> 
> 赞同：3
> 
> 时间：2012-09-01T23:06:21.583
> 
> 标签：javascript, jquery, html, css

我正在尝试制作时钟（html/css/javascript），它会缓慢地向前打开另一张图片（在这种情况下是污染）。

例子：

![在此处输入图像描述](../Images/f71024f49d23b95b0f270daeb0571e44.png)

任何想法如何在旋转棒的同时更好地展示另一张图片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T23:17:50.087

好吧，我们不会为您编写代码，但启发式将是这样的：

1.  创建一个`div`并将样式设置为包含`background: url(myPollutedImage.jpg);`。
2.  JavaScript[`SetInterval`](http://www.w3schools.com/js/js_timing.asp)以预先确定的时间间隔设置操作。
3.  在每个时间间隔，用与该时间点相关的图像填充`div`来自 #1 的图像。确保图像是 gif 或 png，以便它可以具有透明背景，从而暴露背景图像（污染）。

祝你好运！

# android - textview 下面的 textview 线性布局

> ID：12232144
> 
> 赞同：2
> 
> 时间：2012-09-01T23:06:33.937
> 
> 标签：android

我正在使用 LinearLayout，因为它是我可以使用 layout_weight 的唯一方法，而且我对在 RelativeLayout 中均匀对齐 textview 还不够熟悉。（我是安卓新手）。我正在制作一个日历应用程序，但似乎无法弄清楚如何在我的 7 个文本视图下方获得一个文本视图。（这 7 个文本视图是一周中的几天）。他们最终显示在同一行。

如何获得低于我 7 天的最终文本视图？请注意，我已经在 stackoverflow 上搜索了这个问题，但我没有找到任何对我有意义或有效的东西。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="horizontal"
android:layout_gravity="top" >

<TextView
    android:id="@+id/day1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:gravity="center"
    android:text="@string/day1"
    android:textAppearance="?android:attr/textAppearanceSmall" />

<TextView
    android:id="@+id/day2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:layout_weight="1"
    android:text="@string/day2"
    android:textAppearance="?android:attr/textAppearanceSmall" />

<TextView
    android:id="@+id/day3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:layout_weight="1"
    android:text="@string/day3"
    android:textAppearance="?android:attr/textAppearanceSmall" />

<TextView
    android:id="@+id/day4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:layout_weight="1"
    android:text="@string/day4"
    android:textAppearance="?android:attr/textAppearanceSmall" />

<TextView
    android:id="@+id/day5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:layout_weight="1"
    android:text="@string/day5"
    android:textAppearance="?android:attr/textAppearanceSmall" />

<TextView
    android:id="@+id/day6"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:layout_weight="1"
    android:text="@string/day6"
    android:textAppearance="?android:attr/textAppearanceSmall" />
<TextView
    android:id="@+id/day7"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:layout_weight="1"
    android:text="@string/day7"
    android:textAppearance="?android:attr/textAppearanceSmall" />

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="a text string below" 
    android:textAppearance="?android:attr/textAppearanceSmall" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-01T23:19:37.960

简化：

```
<LinearLayout android:orientation="vertical">    
    <LinearLayout android:orientation="horizontal" android:layout_weight="1">
        <!-- TextView 1,2,3,4,5,6,7 here -->
    </LinearLayout>
    <TextView android:layout_weight="1"/><!-- (TextView 8) -->
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T23:19:09.260

如果您使用 RelativeLayout，您将能够使用 *android:layout_below* 属性。

您使用的所有文本视图都具有相同的权重。据我所知，您可以删除这些行。

如果我是你，我会考虑如下层次结构：

```
<RelativeLayout>
    <LinearLayout android:id="@+id/blabla">
        *7 textviews*
    </LinearLayout>
    <TextView>
        android:layout_below= @+id/blabla
    </TextView>
</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T23:26:57.553

要在其余视图下方放置一个带有摘要的视图，您可以将主线性布局的方向更改为垂直，并将您的 7 个文本视图与另一个水平方向的线性布局包围起来。这是一个代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical"
android:layout_gravity="top" >

<LinearLayout android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="horizontal">

<TextView
android:id="@+id/day1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_weight="1"
android:gravity="center"
android:text="@string/day1"
android:textAppearance="?android:attr/textAppearanceSmall" />

<TextView
android:id="@+id/day2"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:gravity="center"
android:layout_weight="1"
android:text="@string/day2"
android:textAppearance="?android:attr/textAppearanceSmall" />

<TextView
android:id="@+id/day3"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:gravity="center"
android:layout_weight="1"
android:text="@string/day3"
android:textAppearance="?android:attr/textAppearanceSmall" />

<TextView
android:id="@+id/day4"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:gravity="center"
android:layout_weight="1"
android:text="@string/day4"
android:textAppearance="?android:attr/textAppearanceSmall" />

<TextView
android:id="@+id/day5"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:gravity="center"
android:layout_weight="1"
android:text="@string/day5"
android:textAppearance="?android:attr/textAppearanceSmall" />

<TextView
android:id="@+id/day6"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:gravity="center"
android:layout_weight="1"
android:text="@string/day6"
android:textAppearance="?android:attr/textAppearanceSmall" />

<TextView
android:id="@+id/day7"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:gravity="center"
android:layout_weight="1"
android:text="@string/day7"
android:textAppearance="?android:attr/textAppearanceSmall" />

</LinearLayout>

<TextView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="a text string below" 
android:textAppearance="?android:attr/textAppearanceSmall" />

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T23:17:36.640

不知道我是否理解正确，但是您可以尝试将第 1-7 天封装在一个额外的线性布局中，并将最后一个 TextView 封装在 RootLayout 中。

例如：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical"
android:layout_gravity="top" >

<LinearLayout 
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical"
android:layout_gravity="top" >

  <!-- TextView for Days 1 to 7 in here -->

</LinearLayout>

<!-- Last TextView in here -->

</LinearLayout> 
```

编辑：并尝试将 android:orientation 标签设置为“垂直”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-01T23:22:13.420

一个更简单的解释：您正在使用方向设置为水平的 LinearLayout；这告诉Android“所有这些项目都应该在一行中彼此相邻放置”。您想要的是一个垂直线性布局，其中包含您当前拥有的线性布局。然后，您的最终 textView 可以是垂直布局的子级，而不是水平布局的子级（这是其他答案所显示的）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-13T21:49:56.187

据我了解，您想要做的是：

*   文本视图1
*   文本视图2
*   （更多的TextViews）
*   文本视图最后

为了在垂直方向上实现这一点，我在我的 .xml 布局文件中做到了这一点。希望它也适合你。

注意：**您不需要嵌套线性布局。这可以通过一个线性布局来实现。**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
     android:layout_height="wrap_content"
    android:orientation="vertical">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/fullNameTextView"
        android:text="@string/fullNameString"
        android:textSize="@dimen/mainActivityFontSize"
        android:layout_marginLeft="@dimen/mainActivityMarginLeft"/>

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/programNameTextView"
        android:textSize="@dimen/mainActivityFontSize"
        android:layout_marginLeft="@dimen/mainActivityMarginLeft"
        android:text="@string/programName"/>

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/semesterTextView"
        android:textSize="@dimen/mainActivityFontSize"
        android:layout_marginLeft="@dimen/mainActivityMarginLeft"
        android:text="@string/semesterTextView"/>

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/courseNameTextView"
        android:textSize="@dimen/mainActivityFontSize"
        android:layout_marginLeft="@dimen/mainActivityMarginLeft"
        android:text="@string/courseName"/>

</LinearLayout> 
```

三件事使我的布局成为我想要的方式（希望你也想要相同类型的布局）：

1.  `android:layout_width="match_parent"`
2.  `android:layout_height="wrap_content"`
3.  `android:orientation="vertical"`

结果是这样的：

[![](../Images/4a1a663bbd45bee29eae69c2d6ea122f.png)](https://i.stack.imgur.com/KZbBP.jpg)

# iphone - 计算包含所有引脚的 MKMapRect

> ID：12232153
> 
> 赞同：6
> 
> 时间：2012-09-01T23:08:33.340
> 
> 标签：iphone

我正在尝试放大一张地图，该地图专注于与该地图相关的所有图钉。我将这些信息保存在我的地图属性中。

我从这个开始，但它还没有工作：

```
 double maxLatitude = 0;
    double minLatitude = 0;

    double maxLongitude = 0;
    double minLongitude = 0;

    for (MKAnnotation *address in self.map.locations) {
        // Latitude
        if ([address.latitude doubleValue] > 0) {
            maxLatitude = MAX(maxLatitude, [address.latitude doubleValue]);
        }
        else {
            minLatitude = MAX(abs(minLatitude), abs([address.latitude doubleValue]));
        }

        // Longitude
        if ([address.longitude doubleValue] > 0) {
            maxLongitude = MAX(maxLongitude, [address.longitude doubleValue]);
        }
        else {
            minLongitude = MAX(abs(minLongitude), abs([address.longitude doubleValue]));
        }
    }
    double centerLatitude = (maxLatitude - abs(minLatitude)) / 2;
    centerLatitude *= [self calculateSignWithFirstValue:maxLatitude secondValue:minLatitude];

    double centerLongitude = (maxLongitude - abs(minLongitude)) / 2;
    centerLongitude *= [self calculateSignWithFirstValue:maxLongitude secondValue:minLongitude]; 
```

// 用坐标创建一些 MKMapRect？

我不认为我理解 MKMapRect 虽然当我尝试做这样的事情时：

```
 CLLocationCoordinate2D theOrigin = CLLocationCoordinate2DMake(32, -117);
    MKMapRect mapRect;
    mapRect.origin = MKMapPointForCoordinate(theOrigin);
    mapRect.size = MKMapSizeMake(10, 10); 
```

我被安置在海洋而不是圣地亚哥。不确定 MKMapRect 发生了什么。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-01T23:26:07.083

```
/** 
 * Return a region covering all the annotations in the given array.
 * @param annotations Array of objects conforming to the <MKAnnotation> protocol.
 */
+(MKCoordinateRegion) regionForAnnotations:(NSArray*) annotations 
{
    double minLat=90.0f, maxLat=-90.0f;
    double minLon=180.0f, maxLon=-180.0f;

    for (id<MKAnnotation> mka in annotations) {
        if ( mka.coordinate.latitude  < minLat ) minLat = mka.coordinate.latitude;
        if ( mka.coordinate.latitude  > maxLat ) maxLat = mka.coordinate.latitude;
        if ( mka.coordinate.longitude < minLon ) minLon = mka.coordinate.longitude;
        if ( mka.coordinate.longitude > maxLon ) maxLon = mka.coordinate.longitude;
    }

    CLLocationCoordinate2D center = CLLocationCoordinate2DMake((minLat+maxLat)/2.0, (minLon+maxLon)/2.0);
    MKCoordinateSpan span = MKCoordinateSpanMake(maxLat-minLat, maxLon-minLon);
    MKCoordinateRegion region = MKCoordinateRegionMake (center, span);

    return region;
}

// usage
MKCoordinateRegion region = [XXXX regionForAnnotations:self.mapView.annotations];
[self.mapView setRegion:region animated:YES]; 
```

MKMapView 缩放到离散间隔，这意味着如果您放大随机区域，它将选择最近的缩放间隔。这可能与瓷砖分辨率有关，但 AFAIK 没有记录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T22:10:08.817

只是为了解释你关于创建`MKMapRect`圣地亚哥上空并最终进入海洋的问题的第二部分......

首先，坐标`32, -117`仅在圣地亚哥“附近”。
实际上，它在南边几公里处，在距墨西哥西海岸几公里的太平洋上。

另请注意，在 中`MKMapRect`，`origin`是矩形的左上角（不是中心），因此生成的矩形不完全包括您指定的坐标周围的区域。

另一个真正的问题是跨度大小设置为`MKMapSizeMake(10, 10)`.
`MKMapSize`使用`MKMapPoint`单位（不是度、米、英里、公里等）。
地图点等于的距离（以米为单位）因纬度而异。

在 latitude `32`，`10`地图点对应于`1.261110` *米*（您可以使用 MapKit 函数计算`MKMetersPerMapPointAtLatitude`米`10.0 * MKMetersPerMapPointAtLatitude(32)`）。

因此，正在创建的地图矩形位于墨西哥西海岸附近，大小约为 1.26 x 1.26*米*。因此，您只能看到海洋（直到您放大很多）。

虽然您可以使用上面提到的函数将米转换为地图点并创建一个，但使用常规坐标（以度为单位的纬度和经度）以及以米为单位的所需宽度和高度的函数`MKMapRect`会更容易，所以所有`MKCoordinateRegionMakeWithDistance`计算由地图视图处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T00:39:44.537

我有一种很好的感觉，Jano 的答案也很有效，但为了多样化，这里有另一种解决方案。这是我通常用来放大给定注释的方法：

```
-(void)zoomToFitMapAnnotations:(MKMapView *)mapView {
    if([mapView.annotations count] == 0)
        return;

    CLLocationCoordinate2D topLeftCoord;
    topLeftCoord.latitude = -90;
    topLeftCoord.longitude = 180;

    CLLocationCoordinate2D bottomRightCoord;
    bottomRightCoord.latitude = 90;
    bottomRightCoord.longitude = -180;

    for(MKPointAnnotation *annotation in mapView.annotations)
    {
        topLeftCoord.longitude = fmin(topLeftCoord.longitude, annotation.coordinate.longitude);
        topLeftCoord.latitude = fmax(topLeftCoord.latitude, annotation.coordinate.latitude);

        bottomRightCoord.longitude = fmax(bottomRightCoord.longitude, annotation.coordinate.longitude);
        bottomRightCoord.latitude = fmin(bottomRightCoord.latitude, annotation.coordinate.latitude);
    }

    MKCoordinateRegion region;
    region.center.latitude = topLeftCoord.latitude - (topLeftCoord.latitude - bottomRightCoord.latitude) * 0.5;
    region.center.longitude = topLeftCoord.longitude + (bottomRightCoord.longitude - topLeftCoord.longitude) * 0.5;
    region.span.latitudeDelta = fabs(topLeftCoord.latitude - bottomRightCoord.latitude) * 1.1;
    region.span.longitudeDelta = fabs(bottomRightCoord.longitude - topLeftCoord.longitude) * 1.1; 

    region = [mapView regionThatFits:region];
    [mapView setRegion:region animated:YES];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-22T18:41:02.020

从 iOS 7 开始，有一种更简单的方法可以做到这一点：

`mapView.showAnnotations(mapView.showAnnotations, animated: true)`

希望这可以帮助。

# java - 简单的 xml 和具有相同名称但不同命名空间的元素

> ID：12232155
> 
> 赞同：3
> 
> 时间：2012-09-01T23:08:42.600
> 
> 标签：java, xml-parsing, xml-serialization

嗨，我正在使用这个库进行 xml 解析[http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php#state](http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php#state)

我怎样才能解析这样的文档？

```
<atom:link href="http://address.xml" rel="self" type="application/rss+xml" />
<link>http://address.com</link> 
```

我不断收到“名称'链接'的重复注释”......我尝试过这种方式：

```
@Root
@NamespaceList({
@Namespace(reference="http://purl.org/rss/1.0/modules/content/", prefix="content"),
@Namespace(reference="http://wellformedweb.org/CommentAPI/", prefix="wfw"),
@Namespace(reference="http://purl.org/dc/elements/1.1/", prefix="dc"),
@Namespace(reference="http://www.w3.org/2005/Atom", prefix="atom"),
@Namespace(reference="http://purl.org/rss/1.0/modules/syndication/", prefix="sy"),
})
public class Rss {
   @Element
   private Channel channel; 
```

我的元素：

```
@Element
private String link;

@Element(name="link")
@Namespace(reference="http://www.w3.org/2005/Atom")
private RssLink rssLink; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T00:34:11.313

你在定义命名空间吗？

在 XML 中通过设置属性来完成`xmlns:atom="any://unique/url/here"`；设置它的最佳位置是所有子元素共有的父元素 - 通常是根元素。

在您的库中，[请参阅相关文档](http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php#namesoace)。

# timezone - 带时区的两个 NSDate 日期之间的天数

> ID：12232160
> 
> 赞同：1
> 
> 时间：2012-09-01T23:10:09.417
> 
> 标签：timezone, compare, nsdate

我计算两个日期之间的天数：

```
NSDateComponents *datesDiff = [calendar components: NSDayCalendarUnit 
                                          fromDate: someDate
                                            toDate: currentDate
                                           options: 0]; 
```

但是这种方法有一个缺点 - 它不考虑时区。因此，例如，如果我在 +2GMT 并且当地时间是凌晨 1:00，则当前日期是昨天。

如何比较指定时区的日期（没有“黑客”）？

PS：通过计算时差来防止答案，我需要实际天数的差异：

*   `yesterday 23:00`与`today 1:00`-`1 day`
*   `yesterday 1:00`与`today 23:00`-`1 day`
*   `today 1:00`与`today 23:00`-`0 days`

*   （所有这些都在当前时区）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T20:34:32.593

为什么不将 dateformatter 配置为将所有日期默认为 GMT 时间，然后进行比较。

```
 NSDate *now = [NSDate date]; 
    NSCalendar *gregorianCalendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar]; 
    NSTimeZone *timeZone = [NSTimeZone timeZoneWithName:@"GMT"]; // Sets to GMT time. 

    NSDateFormatter *formatter = [[NSDateFormatter alloc] init]; 
    [formatter setCalendar:gregorianCalendar]; 
    [formatter setTimeZone:timeZone]; 
    [formatter setDateFormat:@"yyyyMMddHH"];

    NSString *dateString = [formatter stringFromDate:now]; 
  // do whatever with the dates
    [gregorianCalendar release]; 
    [formatter release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T05:46:36.397

我不知道它是否符合您不老套的标准，但一种相当简单的方法似乎是定义一个 GMT 调整日期，如下所示：

```
NSDate *newDate = [oldDate dateByAddingTimeInterval:(-[[NSTimeZone localTimeZone] secondsFromGMT]) 
```

有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/12257937/get-number-of-days-between-two-nsdate-dates-in-a-particular-timezone)。

# php - 怎么做 tag dynamic

I need some help in generating dynamic web Title pages, based on what action the user has taken. The code below is what I include at the top of all pages... `$title` ch

> ID：12232161
> 
> 赞同：1
> 
> 时间：2012-09-01T23:10:16.227
> 
> 标签：php, mysql, html, dynamic, title

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T23:55:34.590

您遇到的问题是由于代码的执行顺序。请记住，PHP 是一种[解释型语言](http://en.wikipedia.org/wiki/Interpreted_language)，这意味着变量的内容是从脚本的“从上到下”设置和使用的。用简单的英语来说，这意味着因为您的`<title>`标签 (in `header.php`) 出现在您的查询实际在代码主体中运行之前，所以在选择自定义标题之前很久就已经设置了标题。

基本上，您可以采取两种主要方法来解决此问题：

1) 将查询放在包含的行*上方*`header.php`，以便在实际使用/解释变量之前选择动态标题。

*2）重新考虑您的设计模式，以便可以*在包含文件的主体中更改变量，并且您*不必*确保如此严格的执行顺序。这可以通过多种方式完成：查看[输出控制和缓冲](http://php.net/manual/en/book.outcontrol.php)，或者更好的是，将您的逻辑与输出/表示完全分开（即 MVC），以便您可以对变量做任何您喜欢的事情，只有在那之后才是您的页面居然吐出来了。

至于为什么您更新的代码不起作用，那是因为您可能还没有运行 SELECT 查询，但是您正在尝试访问它返回的 $row 对象。基本上，您无法访问查询的结果，因为 - 在代码中 - 查询甚至还没有发生！

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T23:37:41.880

我在评论中的回答仍然有效，将选择部分放在`require`：

```
<?php
      //Do all the selects:
      $bios = mysql_query( "SELECT *
                   FROM  `comp_bios`
                   WHERE `comp_bios_id` =  '{$id}'") or die(mysql_error());
                   $row = mysql_fetch_array($bios);

      //Use this how ever you want: $row[comp_bios_position]
      $title = "Biographies of Company Executives : " . $row[comp_bios_position];
      require('includes/header.php');
?> 
```

你将`$title`拥有`header.php`

# mongodb - Ubuntu 上的 MongoDB 不会作为服务启动，日志中没有任何内容

> ID：12232166
> 
> 赞同：56
> 
> 时间：2012-09-01T23:11:11.460
> 
> 标签：mongodb, ubuntu, service

我在 Ubuntu 上运行 MongoDB 2.2，如果我运行：

```
sudo mongod 
```

我收到一个错误，它找不到/data/db，这不是数据库所在的位置。在 mongod.conf 中，数据库路径被指定为 Ubuntu 10gen 默认值`/var/lib/mongodb`，即 db 所在的位置。好像`mongod`没有找到conf文件。所以当我运行时：

```
sudo mongod -f /etc/mongodb.conf 
```

服务器启动正常，输出记录到日志文件：`/var/log/mongodb/mongodb.log`. 一切都很幸福。我可以切换到另一个 shell，登录 mongo shell，查看数据库并运行查询。

所以，我取消了它并尝试作为服务运行：

```
> sudo status mongodb
mongodb stop/waiting
> sudo start mongodb
mongodb start/running, process 10468 
```

到目前为止看起来不错，但是 mongo 服务器没有启动。运行另一个：

```
> sudo status mongodb
mongodb stop/waiting
> mongo
MongoDB shell version: 2.2.0
connecting to: test
Sat Sep  1 19:07:43 Error: couldn't connect to server 127.0.0.1:27017 src/mongo/shell/mongo.js:91
exception: connect failed 
```

“test”不是正确的数据库，日志文件中没有任何内容。

我不知道可能出了什么问题。我检查了暴发户脚本，它们看起来不错。`/etc/init/mongodb.conf`运行：

```
mongodb --exec  /usr/bin/mongod -- --config /etc/mongodb.conf 
```

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-09-02T01:07:57.423

好的，这一切都归结为权限，但让我们一步一步来。当您运行`sudo mongod`它时，它根本不加载配置文件，它从字面上开始以默认值编译 - 端口[27017](https://docs.mongodb.org/manual/reference/configuration-options/#net.port)， /data/db 的[数据库路径](https://docs.mongodb.org/manual/reference/configuration-options/#storage.dbPath)等 - 这就是为什么您收到有关无法找到该文件夹​​的错误. “Ubuntu 默认值”仅在您将其指向配置文件时使用（如果您开始使用 service 命令，这将在幕后为您完成）。

接下来你像这样运行它：

```
sudo mongod -f /etc/mongodb.conf 
```

如果之前没有问题，那么现在就会有 - 您已经以 root 用户身份使用正常配置（指向您通常的 dbpath 和日志）运行了该过程。这意味着现在该普通 MongoDB 文件夹中将有许多文件，用户：组为`root:root`.

当您再次尝试将其作为普通服务启动时，这将导致错误，因为 mongodb 用户（该服务将尝试以该用户身份运行）将无权访问这些`root:root`文件，最值得注意的是，它可能无法访问写入日志文件以向您提供任何信息。

因此，要将其作为普通服务运行，我们需要修复这些权限。首先，确保 MongoDB 当前没有以 root 身份运行，然后：

```
cd /var/log/mongodb
sudo chown -R mongodb:mongodb .
cd /var/lib/mongodb
sudo chown -R mongodb:mongodb . 
```

这应该可以解决它（假设 user:group 是`mongodb:mongodb`），尽管最好用 an`ls -al`或类似的方法进行验证以确保。完成此操作后，您应该能够使服务再次成功启动。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-10-25T22:31:42.617

首先确认**mongodb**用户/组有权限写入**数据**目录和**日志**文件：

> $ sudo chown -R mongodb:mongodb /var/lib/mongodb/.
> 
> $ sudo chown -R mongodb:mongodb /var/log/mongodb.log

使用以下命令将 MongoDB*作为守护进程（后台进程）启动：*

> $ mongod --fork --dbpath /var/lib/mongodb/ --smallfiles --logpath /var/log/mongodb.log --logappend

要[关闭 MongoDB](http://www.mongodb.org/display/DOCS/Starting+and+Stopping+Mongo)，请输入 Mongo CLI，访问管理员并发出关闭命令：

> $ ./mongo
> 
> > 使用管理员
> 
> > db.shutdownServer()

参考：[http ://www.mongodb.org/display/DOCS/Starting+and+Stopping+Mongo](http://www.mongodb.org/display/DOCS/Starting+and+Stopping+Mongo)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-22T09:41:04.503

我也有同样的问题。所以我去了 cd /var/lib/mongodb/ 并删除了 mongod.lock 文件然后它对我有用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-13T14:59:00.327

按照@nelsonic 的建议检查数据、日志和日志文件夹中的所有权限后，我的问题通过授予锁定 /tmp 文件夹中的文件的权限得到解决

```
sudo chown mongod:mongod mongodb-27017.sock 
```

我将它作为 AWS Amazon Linux 实例运行。我通过以下方式以 mongod 用户身份执行，然后研究错误代码来解决这个问题。它可能对其他故障排除有用。

```
sudo -S -u mongod mongod -f /etc/mongod.conf 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-06T12:03:17.890

没有什么对我有用，然后我发现这是`/tmp`目录上的权限问题：

```
sudo chmod 1777 /tmp
sudo chown root:root /tmp 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-06-14T13:20:25.787

试试这个命令：

```
sudo chown mongodb /tmp/mongodb-27017.sock 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-29T05:35:51.230

以上答案都不适合我。我终于通过调试初始化脚本弄清楚了：

sudo bash -x /etc/init.d/mongodb start

并且看到它正在将错误的配置路径传递给 mongod。我只是将 /etc/init.d/mongodb 中的行从“CONF=/etc/mongodb.conf”更改为“CONF=/etc/mongod.conf”。版本 2 使用前者，安装版本 3 添加了新格式的 /etc/mongod.conf 但显然没有更新 init 脚本。

更新：我现在有一个更奇怪的问题，初始化脚本可以工作，但前提是我使用“sudo bash -x /etc/init.d/mongodb start”而不是“sudo service mongodb start”运行它。停止也是一样。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-12-03T15:34:18.420

我的 mongodb 在以 mongod 用户身份从命令行启动时启动，但不是作为用户 = mongod 的服务。经过一个小时检查权限、服务定义、套接字......它是 SElinux ！

在 /etc/selinux/config 我从*强制*切换到*许可*并重新启动。现在好了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-10-31T04:03:52.690

在上述答案都不适合我之后，删除我的日志文件使 Mongo 恢复了生机。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-05-25T18:59:29.347

现在，如果您更新了 mongod 并且正在运行旧数据库，则可能会发生此错误。Mongod 将默认使用wiredTiger 引擎，您将拥有一个mmapv1 数据库

在 /etc/mongod.conf 中编辑引擎设置

```
# engine: wiredTiger
engine: mmapv1 
```

小心 - YAML 对空格敏感

journalctl/systemd 不会看到这个问题。检查 /var/log/mongodb/mongod.log 中的 mongod 日志

我想您可以使用此处概述的步骤转换数据库

[https://docs.mongodb.com/manual/tutorial/change-standalone-wiredtiger/](https://docs.mongodb.com/manual/tutorial/change-standalone-wiredtiger/)

# ios - 创建自定义 CALayer 实现

> ID：12232168
> 
> 赞同：4
> 
> 时间：2012-09-01T23:11:35.647
> 
> 标签：ios, core-animation

我正在尝试学习核心动画来开发某个应用程序，但我需要继承 CALayer 类，但是我正在努力让图层自行绘制。

我需要自定义 CALayer 来拥有一些额外的属性并处理自定义事件（触摸等），但是从一开始我正在实现的基本 CALayer 并不是自己绘制的，谁能告诉我我做错了什么？

我有一个MagicSquare

```
#import "MagicSquare.h"

@implementation MagicSquare

-(id) initWithLayer:(id)layer {
    self = [super initWithLayer:layer];

    self.bounds = CGRectMake(0, 0, 200, 200);
    self.position = CGPointMake(10,10);
    self.cornerRadius = 100;
    self.borderColor = [UIColor redColor].CGColor;
    self.borderWidth = 1.5;

    return self;
}

- (void)drawInContext:(CGContextRef)theContext
{

    NSLog(@"Drawing");
    CGMutablePathRef thePath = CGPathCreateMutable();

    CGPathMoveToPoint(thePath,NULL,15.0f,15.f);
    CGPathAddCurveToPoint(thePath,
                          NULL,
                          15.f,250.0f,
                          295.0f,250.0f,
                          295.0f,15.0f);

    CGContextBeginPath(theContext);
    CGContextAddPath(theContext, thePath );

    CGContextSetLineWidth(theContext,
                          1.0);
    CGContextSetStrokeColorWithColor(theContext,
                                     [UIColor redColor].CGColor);
    CGContextStrokePath(theContext);
    CFRelease(thePath);
} 
```

这就是我试图让它在主控制器上绘制的方式

```
@implementation BIDViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    MagicSquare *layer = [[MagicSquare alloc] initWithLayer:[CALayer layer]];

    [self.view.layer addSublayer:layer];

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T23:46:49.470

发现了问题。

我需要调用图层上的 setNeedsDisplay，因为它不会自动绘制自己：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    MagicSquare *layer = [[MagicSquare alloc] initWithLayer:[CALayer layer]];

    [self.view.layer addSublayer:layer];

    [layer setNeedsDisplay];
} 
```

# php - 在 php 类和函数的非对象上调用成员函数 prepare()

> ID：12232169
> 
> 赞同：0
> 
> 时间：2012-09-01T23:11:42.163
> 
> 标签：php, pdo

```
<?php
    try{
     $conn = new PDO("mysql:host=$DB_SERVER;dbname=$DB_NAME",$DB_USER,$DB_PASS);
    }

class SessionManager {

        var $life_time;
        function SessionManager() {
            global $conn;
            $this->life_time = get_cfg_var("session.gc_maxlifetime");

            // Register this object as the session handler
            session_set_save_handler( 
                array( &$this, "open" ), 
                array( &$this, "close" ),
                array( &$this, "read" ),
                array( &$this, "write" ),
                array( &$this, "destroy"),
                array( &$this, "gc" )
            );
        }

        function read( $id ) {
            global $conn;
            $data = "";
            $time = time();
            $newid = $id;       
            $sql = "SELECT session_data FROM session_tmp WHERE session_id=? AND expired_date > ?";
            $q = $conn->prepare($sql);
            $result = $q->execute(array($newid, $time));
            while($r = $q->fetch(PDO::FETCH_ASSOC)){
                $data = $row['session_data'];
            }
            return $data;
        }

        function write( $id, $data ) {            
            $time = time() + $this->life_time;
            global $conn;
            $newid = $id;
            $newdata = $data;
            $sql = "SELECT session_id FROM session_tmp WHERE session_id = ?"; // error happen here!!!!
            $q = $conn->prepare($sql);
            $result = $q->execute(array($newid));
            return TRUE;
        }
} 
```

我添加`global $conn;`并`function read()`修复了错误。我不知道为什么`global $conn;`无法修复错误`function write()`。如何修复错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T23:21:05.893

在 PHP 中，**当且仅当在函数内部定义了变量 like 时，它​​才能在函数**`$conn`中使用。“在内部定义”一词的意思是“在内部分配”。

 **在您的情况下，`$conn`未在`write()`函数中定义，而是**在所有函数之外定义**。因此，您需要告诉`write()`它应该引用全局变量 $conn。这是使用

```
 global $conn; 
```

请注意，使用`global`是**非常糟糕的代码风格**！您永远不需要使用`global`.

而不是全局，你可能会做这样的事情：

```
// This class should actually be a singleton class
// http://en.wikipedia.org/wiki/Singleton_pattern
//
class CDBSession {

  protected 
    $conn;

  public function __construct( $DB_SERVER, $DB_NAME, $DB_USER,$DB_PASS ) {

      $this->conn 
         = new PDO("mysql:host=$DB_SERVER;dbname=$DB_NAME",$DB_USER,$DB_PASS);

  } // __construct

  public function getPDO() {

      return $this->conn;

  }      

}

class SessionManager {

  protected 
    $_PDOSession;

  public function __construct( CDBSession $theDBSession ) {

      $this->_PDOSession = $theDBSession;

  } // __construct

  ... other methods need to access $this->_PDOSession->getPDO() too ...

} // class SessionManager 
```

最后，您必须像这样使用 SessionManager：

```
$mySessionManager 
  = new SessionManager(new CDBSession($DB_SERVER, $DB_NAME, $DB_USER,$DB_PASS)); 
```**

# php - 如何创建对表单的自我更新响应

> ID：12232172
> 
> 赞同：0
> 
> 时间：2012-09-01T23:12:06.310
> 
> 标签：php, javascript, html, ajax, forms

所以我想使用 Javascript (AJAX) 和 PHP/HTML 来创建一个表单并自动更新它。我正在尝试创建一个网站来执行简单的数学计算（思考体积、表面积和其他几何材料）。最终我想有图形表示，但还没有。

最有效的方法是什么？

我是否希望表单提交到输出 JSON 或 XML 对象的网页，然后使用 XMLHttp 来拉取它？那会是最简单的方法吗？我想使用 Javascript 来阻止我实际重定向到该页面吗？

我曾经使用过 AJAX 一次或两次，但只是名义上的。这也是让自己更好地熟悉这项技术的练习。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T23:15:08.373

对于 PHP 开发人员来说，一个非常好的方法是使用 xAjax，它是[此处的文档](http://www.xajaxproject.org)。

使用此 PHP 代码，您可以**注册一些函数**：

```
include './xajax/xajax_core/xajax.inc.php';

$xajax = new xajax();

$xajax->register(XAJAX_FUNCTION, 'doAdd');
$xajax->register(XAJAX_FUNCTION, 'doReset');

$xajax->processRequest(); 
```

然后，您只需将**注册的函数**用作**JavaScript 方法**：

```
<form action="#" method="post" onsubmit="return false;">

  <input type="button" onclick="xajax_doAdd(10,600);" id="btnAdd" value="Click Me" />

  <input type="button" onclick="xajax_doReset();" id="btnReset" value="Reset" />

  <p id="answer"></p>

</form> 
```

# ruby-on-rails - Rails 3：rake:assets 预编译错误

> ID：12232174
> 
> 赞同：0
> 
> 时间：2012-09-01T23:12:23.537
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rake

每当我跑步

```
bundle exec rake assets:precompile 
```

我不断收到以下错误：

```
rake aborted!
missing auth params or block 
```

什么可能导致此错误？

# testing - 在 groovy 中测试的方法中模拟一个静态方法返回调用

> ID：12232175
> 
> 赞同：1
> 
> 时间：2012-09-01T23:12:24.237
> 
> 标签：testing, groovy

我有一个

```
class A {
  public static boolean isRunning() {
    if (ctx == null) { .. }
    return ctx.isRunning();
  }
} 
```

我正在测试一个中间调用 A.isRunning(); 的方法。

```
class B {
 public void methodToBeTested() {
   A.isRunning();
   // do somthing
 }
} 
```

我想以一种在调用 A.isRunning() 时立即返回 true 并且不去初始化上下文的方式对此进行测试。

由于 B 类没有 A 类型的属性，我不确定测试此方法的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T00:30:55.387

您可以`A.isRunning()`通过元编程重新定义您的：

```
A.metaClass.static.isRunning = { true } 
```

如果您在测试之前运行该行，它将使该方法始终返回 true

# c++ - 使用结构时，表达式必须具有 (Pointer-to-) 函数类型

> ID：12232183
> 
> 赞同：0
> 
> 时间：2012-09-01T23:14:01.880
> 
> 标签：c++, arrays, function, pointers, struct

所以基本上我正在做的是将一组结构从一个函数传递到另一个函数。它适用于显示功能，但不适用于最大功能：/我到底做错了什么？

```
void show( const ABC & x ){
    cout<<"{"<<x.n<<",'"<<x.c<<"',{"<<x.a[0]<<","<<x.a[1]<<","<<x.a[2]<<"}}";
}

void show( const ABC arr[], unsigned elements ){
    for(unsigned i=0; i<elements; i++)
        show(arr[i]);
} 
```

以下不起作用

```
double max( const ABC & x ){
    double max=x.a[2];
    if(x.a[1]>max)
        max=x.a[1];
    if(x.a[0]>max)
        max=x.a[0];
    return max;
}

double max( const ABC arr[], unsigned elements ){
    double max=arr[2].a[3];
    for(unsigned i=0; i<elements; i++)
        if(max<max(arr[i])){
            max=max(arr[i]);
        }
    return max;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T23:22:51.803

将您的`double`变量重命名为`max`. 事实上，它隐藏了共享相同名称的函数，因此调用表达式无效（您试图将参数传递给 a `double`）。

# c++ - _asm 交换和编译器添加

> ID：12232184
> 
> 赞同：2
> 
> 时间：2012-09-01T23:14:03.850
> 
> 标签：c++, assembly, compiler-construction, x86

我刚刚编写了一个整数数组的bubble_sort（请参阅上一个问题）并决定忽略标准交换并实现一个程序集交换，如下所示：

```
int swap(int* x, int* y)
{
if(x != y)
  {
       _asm
      {
        mov eax,[x];
        mov ebx, [y];
        mov [y],eax;
        mov [x], ebx;
      }
    }
return 0;
} 
```

我实际上确信它将按原样插入到生成的代码中并且可以正常工作。好吧，我使用此交换的代码确实有效，但我研究了编译器将它变成了什么，我的交换变成了这样：

```
if(x != y)
00E01A6F  inc         ebp  
00E01A70  or          byte ptr [ebx],bh  
00E01A72  inc         ebp  
00E01A73  or          al,74h  
if(x != y)
00E01A75  or          al,8Bh  
  {
       _asm
      {
        mov eax,[x];
00E01A77  inc         ebp  
00E01A78  or          byte ptr [ebx+45890C5Dh],cl  
        mov [y],eax;
00E01A7E  or          al,89h  
        mov [x], ebx;
00E01A80  pop         ebp  
00E01A81  or          byte ptr [ebx],dh  
      }
   }
return 0;
00E01A83  rcr         byte ptr [edi+5Eh],5Bh  
} 
```

我已经在 MS VS 2012 中编译了它。所有这些额外的行是什么意思，为什么它们在那里？为什么我的 _asm 片段不能直接使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T23:31:57.097

你能告诉我们你是如何编译那个函数的以及你是如何得到反汇编的吗？

当我编译使用

```
cl /FAsc -c test.c 
```

我在内联汇编器部分的汇编列表中得到以下内容：

```
; 4    :   {
; 5    :        _asm
  0000a 53       push    ebx
; 6    :       {
; 7    :         mov eax,[x];
  0000b 8b 44 24 08  mov     eax, DWORD PTR _x$[esp]
; 8    :         mov ebx, [y];
  0000f 8b 5c 24 0c  mov     ebx, DWORD PTR _y$[esp]
; 9    :         mov [y],eax;
  00013 89 44 24 0c  mov     DWORD PTR _y$[esp], eax
; 10   :         mov [x], ebx;
  00017 89 5c 24 08  mov     DWORD PTR _x$[esp], ebx
; 4    :   {
; 5    :        _asm
  0001b 5b       pop     ebx
$LN4@swap:
; 11   :       } 
```

需要注意的一件事是，您并没有交换您真正想要交换的内容 - 您交换的是传递给函数的指针，而不是指针所指的项目。因此，当函数返回时，交换的数据将被丢弃。该功能只是一个大问题。

您可能想尝试类似的东西：

```
 _asm
  {
    mov eax,[x];
    mov ebx,[y];

    mov ecx, [eax]
    mov edx, [ebx]

    mov [eax], edx
    mov [ebx], ecx
  } 
```

但坦率地说，在 C 中执行交换可能会产生类似（或更好）的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T14:58:04.010

它缺少第一个和最后一个字节。如果你看一下现在的代码：

```
inc ebp                    ; 45
or byte ptr [ebx],bh       ; 08 3B
inc ebp                    ; 45
or al,74h                  ; 0C 74
or al,8Bh                  ; 0C 8B
inc ebp                    ; 45
or byte ptr [ebx+45890C5Dh],cl ; 08 8B 5D 0C 89 45
or al,89h                  ; 0C 89
pop ebp                    ; 5B
or byte ptr [ebx],dh       ; 08 33
rcr byte ptr [edi+5Eh],5Bh ; C0 5F 5E 5B 
```

如果你忽略前两个字节，你会得到：

```
 cmp eax, [ebp + 12] ; 3B 45 0C
  jz skip             ; 74 0C
  mov eax, [ebx + 8]  ; 8B 45 08
  mov ebx, [ebp + 12] ; 8B 5D 0C 
  mov [ebp + 12], eax ; 89 45 0C 
  mov [ebx + 8], ebx  ; 89 5B 08 
skip:
  xor eax, eax        ; 33 C0
  pop edi             ; 5F
  pop esi             ; 5E
  pop ebp             ; 5B 
```

它最后缺少 ret ，而且，至关重要的是，一些指令具有`eax`和`[ebp + 8]`作为参数（a`mov`在那里有意义）。丢失的第一个字节使反汇编与指令流不同步。

当然，它也缺少序幕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T23:17:52.233

如果您想看到 main() 的结尾，则需要在开头推送并在结尾弹出 :)

```
 _asm
  {
    push eax     //back-up of registers
    push ebx
    mov eax,[x];
    mov ebx, [y];
    mov [y],eax;
    mov [x], ebx;
    pop ebx      //resume the registers where they were
    pop eax      // so, compiler can continue working normally
  } 
```

因为编译器也将它们用于其他事情！

你也可以使用`xchg`

```
mov eax,[x]
xchg   eax, [y]
mov   [x],eax 
```

你是64位的？然后是单读、单交换、单写。你可以搜索一下。

再会！

# f# - F# 中单一大小写区分联合的简明模式匹配

> ID：12232187
> 
> 赞同：33
> 
> 时间：2012-09-01T23:14:31.273
> 
> 标签：f#, pattern-matching, discriminated-union

假设我有以下单一案例歧视工会：

```
type OrderId = OrderId of string 
```

在某些时候我需要实际的字符串。我发现提取它的方法是：

```
let id = match orderId with OrderId x -> x 
```

有没有更简洁的方法来做到这一点？

我知道我的使用是一种特殊情况，匹配是有意义的，以确保您已经涵盖了可能性，只是想知道是否有办法做类似的事情：

```
let OrderId id = orderId 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-01T23:21:23.593

您快到了。需要括号以便编译器将 let-bound 解释为模式匹配：

```
let (OrderId id) = orderId 
```

如果`orderId`是函数的参数，你也可以直接在那里使用模式匹配：

```
let extractId (OrderId id) = id 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-02T23:21:52.160

当您使用可区分联合来保存单个值（这是一种有用的 F# 编程技术）时，使用用于访问该值的属性来定义它可能是有意义的：

```
type OrderId = 
  | OrderId of string 
  member x.Value = let (OrderId v) = x in v 
```

的实现`Value`是使用`let`pad 发布的模式匹配。现在，如果你有一个`orderId`type的值`OrderId`，你可以写：

```
let id = orderId.Value 
```

但是，模式匹配 using`(OrderId id)`仍然非常有用，因为属性访问仅在编译器已经知道类型的情况下才有效`orderId`（因此您通常会在函数参数中使用模式匹配，但对其他值使用属性访问）。

# wpf - 如何将 BitmapImage 的源设置为 Stream？

> ID：12232193
> 
> 赞同：0
> 
> 时间：2012-09-01T23:15:53.127
> 
> 标签：wpf, stream, bitmapimage

我正在尝试在 WPF 中显示图像。我用这个：

```
 Stream fs = File.Open(path, FileMode.Open);

            BitmapImage bmp = new BitmapImage();
            bmp.BeginInit();
            bmp.StreamSource = fs;
            bmp.EndInit();
            img.Source = bmp;
            fs.Close(); 
```

无论是否关闭流，这都不起作用。有什么作用：

```
 BitmapImage bmp = new BitmapImage(new Uri(path));
            img.Source = bmp; 
```

除了需要关闭流之外，我将使用第二种方法。这有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T23:24:04.660

对于将来寻找此问题的任何人：我通过在设置 StreamSource 之前添加以下行来解决此问题： bmp.CacheOption = BitmapCacheOption.OnLoad;

完整代码：

```
 BitmapImage bmp = new BitmapImage();
            bmp.BeginInit();
            bmp.CacheOption = BitmapCacheOption.OnLoad;
            bmp.StreamSource = fs;
            bmp.EndInit();
            img.Source = bmp; 
```

# objective-c - Objective C 将标准输出打印到 UIAlertView

> ID：12232203
> 
> 赞同：0
> 
> 时间：2012-09-01T23:18:06.093
> 
> 标签：objective-c, ios, stdout, nsfilehandle

我有一个使用 打印到 stdout 的 C 函数，`fprintf`我试图在`UIAlertView`. 我的代码如下：

```
NSFileHandle *stdoutFileHandle = [NSFileHandle fileHandleWithStandardOutput];
NSData *stdoutData = [stdoutFileHandle availableData];
NSString *stdoutString = [[NSString alloc] initWithData:stdoutData encoding:NSASCIIStringEncoding];

UIAlertView *stdoutAlert = [[UIAlertView alloc] initWithTitle:@"STDOUT OUTPUT" message:stdoutString delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
[stdoutAlert show]; 
```

运行代码时出现以下错误。

**由于未捕获的异常“NSFileHandleOperationException”而终止应用程序，原因：“[NSConcreteFileHandle availableData]：错误的文件描述符”**

当我替换`[stdoutFileHandle availableData]`为`[stdoutFileHandle readDataToEndOfFile]`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T01:57:48.173

问题是您正在从输出流中读取。要完成这项工作，您需要欺骗 stdout 将其内容写入输入流而不是控制台。

我知道执行此操作的旧 C 方法，但您不会喜欢它。这使用了[pipe](http://pubs.opengroup.org/onlinepubs/009604599/functions/pipe.html) () 和[dup2](http://pubs.opengroup.org/onlinepubs/9699919799/functions/dup2.html) ()。

```
int pipefd[2];

pipe(pipefd);
dup2(pipefd[1], STDOUT_FILENO);
close(pipefd[1]); 
```

此时，任何写入 stdout 的内容都可以被`pipefd[0]`. 此时，您可以使用`-initWithFileDescriptor:`从`pipefd[0]`.

```
NSFileHandle *stdoutReader = [[NSFileHandle alloc] initWithFileDescriptor:pipefd[0]]; 
```

请注意，您将需要进行大量错误检查。希望有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-06T21:29:55.433

我在这个问题中遵循了选定的答案帖子： [在 Cocoa 中将标准输出重定向到 NSTextView 的最佳方法是什么？](https://stackoverflow.com/questions/2406204/what-is-the-best-way-to-redirect-stdout-to-nstextview-in-cocoa)

跟着我感觉有点熟悉。我为管道和读取处理程序创建了一个 NSPipe 和 NSFileHandler 对象，并使用了通知。由于我的需要，我将下面的 open 方法放在 viewDidAppear 和 viewDidDisappear 方法中，但是您可以将其放在合适的位置

```
// Piping stdout info from here WILL NOT PIPE NSLOG:
// https://stackoverflow.com/questions/2406204/what-is-the-best-way-to-redirect-stdout-to-nstextview-in-cocoa
- (void) openConsolePipe {
    _pipe = [NSPipe pipe];
    _pipeReadHandle = [_pipe fileHandleForReading] ;
    dup2([[_pipe fileHandleForWriting] fileDescriptor], fileno(stdout)) ;

    [[NSNotificationCenter defaultCenter] addObserver: self selector: @selector(handleNotification:) name: NSFileHandleReadCompletionNotification object: _pipeReadHandle] ;
    [_pipeReadHandle readInBackgroundAndNotify] ;
}

- (void) closeConsolePipe {
    if (_pipe != nil) {
        [[_pipe fileHandleForWriting] closeFile];

        // documentation suggests don't need to close reading file handle b/c auto but this suggests otherwise:
        // https://stackoverflow.com/questions/13747232/using-nstask-and-nspipe-causes-100-cpu-usage
//        [[_pipe fileHandleForReading] closeFile];
    }
}

- (void) handleNotification:(NSNotification *)notification {
    [_pipeReadHandle readInBackgroundAndNotify] ;
    NSString *str = [[NSString alloc] initWithData: [[notification userInfo] objectForKey: NSFileHandleNotificationDataItem] encoding: NSUTF8StringEncoding];

    // do what you want with the str here.
    [_consoleView setText:[_consoleView.text stringByAppendingString:str]];
    [_consoleView scrollRangeToVisible:NSMakeRange([_consoleView.text length], 0)];
} 
```

我希望这最终能帮助其他人在谷歌上搜索这个......

# css - 表单中的 CSS 样式 html 弹出窗口？

> ID：12232205
> 
> 赞同：2
> 
> 时间：2012-09-01T23:18:44.627
> 
> 标签：css, html

好吧，我已经搜索过，但没有找到任何关于此的信息，或者是否有可能。好的，所以如果我制作注册表单，我有一个这样的电子邮件字段。

```
<input type="email" id="email"/> 
```

现在很简单，但它是一个简单的 html 过滤器，用于在进入服务器端之前过滤掉其中输入的一些 bs。现在 idk 如果您以前看过它，但它是该字段的通用箭头框。看起来不是最好的，尤其是我的网站布局。有没有办法编辑这个所谓的弹出框/窗口的外观？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T23:33:01.353

您应该能够在 chrome 中使用以下样式：

```
/* The entire area of the popup including area outside the bubble shape */
 ::-webkit-validation-bubble{}
/* Portion above the bubble behind top arrow */
 ::-webkit-validation-bubble-arrow-clipper{}
/* The arrow at the top of the bubble */
 ::-webkit-validation-bubble-arrow{}
/* The area containing the validation message */
 ::-webkit-validation-bubble-message{} 
```

它在这个[StackOverflow question](https://stackoverflow.com/questions/5713405/how-do-you-style-the-html5-form-validation-messages)中被引用。

这是默认样式：

```
/* form validation message bubble */

::-webkit-validation-bubble {
    display: block;
    z-index: 2147483647;
    position: absolute;
    opacity: 0.9;
    line-height: 0;
    -webkit-text-security: none;
    -webkit-transition: opacity 05.5s ease;
}

::-webkit-validation-bubble-message {
    display: block;
    font: message-box;
    min-width: 50px;
    max-width: 200px;
    border: solid 2px black;
    background: -webkit-gradient(linear, left top, left bottom, from(#fbf9f9), to(#f0e4e4));
    padding: 8px;
    -webkit-border-radius: 8px;
    -webkit-box-shadow: 4px 4px 4px rgba(204,204,204,0.7);
    line-height: normal;
}

::-webkit-validation-bubble-top-outer-arrow {
    display: inline-block;
    position: relative;
    left: 14px;
    height: 0;
    width: 0;
    border-style: solid;
    border-width: 14px;
    border-bottom-color: black;
    border-right-color: transparent;
    border-top-width: 0;
    border-left-width: 0;
}

::-webkit-validation-bubble-top-inner-arrow {
    display: inline-block;
    height: 0;
    width: 0;
    border-style: solid;
    border-width: 10px; /* <border box width of outer-arrow> - <message border width> * 2 */
    border-bottom-color: #fbf9f9;
    border-right-color: transparent;
    border-top-width: 0;
    border-left-width: 0;
    position: relative;
    top: 2px; /* <message border width> */
    left: 2px; /* <outer-arrow position> + <message border width> - <border box width of outer-arrow>  */
} 
```

# java - Java - 使用字符串从数组中获取值

> ID：12232211
> 
> 赞同：4
> 
> 时间：2012-09-01T23:19:46.973
> 
> 标签：java, arrays, string, int

我需要使用字符串而不是整数来创建一个整数数组。前任：`int["number2"] = 0; instead of int[2] = 0;`

有谁知道如何做到这一点？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T23:21:04.413

您可以使用 HashMap - 请参阅[此处](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashMap.html)了解更多信息！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T23:24:41.470

Java 不支持关联数组，但您可以使用[HashMap](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/HashMap.html)：

```
Map<String, Integer> map = new HashMap<String, Integer>();
map.put("key1", 25);
map.put("key2", 4589); 
```

`map.get("key1")`将返回 25。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T23:23:36.713

您不是在寻找*数组*，而是在寻找[*关联数组*](http://en.wikipedia.org/wiki/Associative_array)。

在 Java 中，实际上，每个实现的类[`Map`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)都可以用作关联容器，因为它们可以将键映射到值（`TreeMap<K,V>`、`HashMap<K,V>`等）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-01T23:23:27.133

这种语法看起来很像[Groovy 中的映射](http://groovy.codehaus.org/Collections)，在 Java 中，您可以使用类似`Map<String, Integer>`.

# eclipse - 在 Eclipse 中，可以重命名 Java 包而不会导致“test”和“main”之间的名称冲突吗？

> ID：12232213
> 
> 赞同：2
> 
> 时间：2012-09-01T23:20:10.070
> 
> 标签：eclipse, m2e

在使用标准 Maven 布局的 Eclipse 项目中`test`，如果包存在于`main`.

*Eclipse 可以执行这样的重构吗？*谢谢你。

安装的版本是：

1.  Eclipse Juno，内部版本号：20120614-1722
2.  m2e - Eclipse 1.1.0.20120530-0009 的 Maven 集成 org.eclipse.m2e.feature.feature.group Eclipse.org
3.  WTP 的 Maven 集成 0.15.2.20120306-2040 org.maven.ide.eclipse.wtp.feature.feature.group 红帽的 JBoss

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T01:55:29.667

这与maven无关。在单个 java 项目中，您不能有两个具有相同名称的包，即使这些包位于不同的源文件夹中。

# python - Python 3.2.3：套接字超时时间比它应该的要长？

> ID：12232225
> 
> 赞同：1
> 
> 时间：2012-09-01T23:23:12.823
> 
> 标签：python, windows, sockets, networking

我在 Windows 7 上使用 Python 3.2.3，并且我有一段代码连接到具有阻塞套接字的服务器，并具有用户指定的超时值。代码很简单：

```
testconn = socket.create_connection((host, port), timeout) 
```

代码工作正常，除了奇怪的事实是超时似乎比无效请求需要的时间更长。我故意尝试连接到 www.google.com:59855（随机端口应该意味着它应该尝试连接直到达到超时），超时为 5 秒，但似乎至少需要 15 秒才能超时。

是否有任何可能的原因，和/或任何修复？（如果它无法修复，这不是一个大问题，但仍然会感谢您的解决方案。）提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T00:36:50.847

这不是特定于 Python 3 或 Windows 的问题。查看 create_connection() 的文档：http: [//docs.python.org/library/socket.html#socket.create_connection](http://docs.python.org/library/socket.html#socket.create_connection)

重要的片段是：

> 如果 host 是一个非数字的主机名，它将尝试为 AF_INET 和 AF_INET6 解析它，然后尝试依次连接到所有可能的地址，直到连接成功。

它使用 socket.getaddrinfo 解析名称。如果你跑

```
socket.getaddrinfo('google.com', 59855, 0, socket.SOCK_STREAM) 
```

您可能会返回一些结果。当您调用 socket.create_connection 时，它将遍历所有这些结果，每个结果都会等待 timeout 秒，直到它失败。因为它为每个结果等待 timeout 秒，所以总时间显然会大于 timeout。

如果您使用 IP 地址而不是主机名调用 create_connection，例如

```
testconn = socket.create_connection(('74.125.226.201', 59855), timeout=5) 
```

你应该得到你的 5 秒超时。

如果您真的很好奇，请查看 create_connection 的源代码。这很简单，您可以看到导致问题的循环： [https ://github.com/python/cpython/blob/3.2/Lib/socket.py#L408](https://github.com/python/cpython/blob/3.2/Lib/socket.py#L408)

# function - 无法将函数转换为委托

> ID：12232229
> 
> 赞同：2
> 
> 时间：2012-09-01T23:24:17.947
> 
> 标签：function, delegates, d

我有这个功能

```
 private ulong Html(ubyte[] data)
  {
    return data.length;
  } 
```

我想通过使用[`toDelegate()`](http://dlang.org/phobos/std_functional.html#toDelegate)函数转换为委托。我试过了：

```
client.onReceive = toDelegate(&Html); 
```

但我收到一条错误消息：

```
lixo.d(722): Error: not a property client.onReceive
/home/$/D/libs/arsd/dom.d(743): Warning: statement is not reachable
/usr/include/d/dmd/phobos/std/range.d(595): Error: static assert  "Cannot put a dchar[] into a Appender!(char[])"
/usr/include/d/dmd/phobos/std/format.d(1758):        instantiated from here: put!(Appender!(char[]),dchar[])
/usr/include/d/dmd/phobos/std/format.d(1514):        instantiated from here: formatRange!(Appender!(char[]),dchar[],char)
/usr/include/d/dmd/phobos/std/conv.d(101):        instantiated from here: formatValue!(Appender!(char[]),dchar[],char)
/usr/include/d/dmd/phobos/std/conv.d(757):        ... (1 instantiations, -v to show) ...
/usr/include/d/dmd/phobos/std/conv.d(244):        instantiated from here: toImpl!(char[],dchar[])
/home/$/libs/arsd/dom.d(2115):        instantiated from here: to!(dchar[]) 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T18:03:13.280

我猜 /home/$/D/libs/arsd/dom.d 库有一个名为“ *Html* ”的结构或类。尝试将您的“ *Html* ”函数重命名为其他名称，看看是否有帮助。

如果它仍然不起作用，您可能需要向我们展示更多代码，因为您的示例似乎对我来说很好：http: [//dpaste.dzfl.pl/fd729f3d](http://dpaste.dzfl.pl/fd729f3d)

（我以前见过类似的错误。由于某种原因，自 dmd 2.060 以来，“不是属性”错误经常发生，即使真正的错误与此无关。）

# javascript - 带有javascript的下拉菜单中的复选框

> ID：12232231
> 
> 赞同：0
> 
> 时间：2012-09-01T23:24:31.023
> 
> 标签：javascript, html, drop-down-menu, checkbox

如何使用javascript实现下拉菜单内的复选框，以便每次单击菜单时更改情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T23:50:30.427

您链接的网站提供了一个列表：http: [//jsfiddle.net/XJWkH/](http://jsfiddle.net/XJWkH/)

当然，这只是一个原始示例，但基本上这是网站上下拉列表的工作方式。当您单击下拉/子菜单元素时，jQuery 会在该元素上添加或删除“已检查”类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T23:27:36.607

jQuery 是这里最简单的路径。我已经非常成功地使用[了这个插件](http://code.google.com/p/dropdown-check-list/)，并且也推出了我自己的插件。

祝你好运！

# android - Android Eclipse Lint API 检查

> ID：12232237
> 
> 赞同：5
> 
> 时间：2012-09-01T23:26:09.633
> 
> 标签：android, eclipse, android-lint

[感谢 PT 对于在 Eclipse 中构建多 SDK Android 应用程序而不会丢失编译时检查的](https://stackoverflow.com/questions/7642249)问题的正确答案。但是，当我尝试按照推荐使用 @TargetApi() 注释时，它会产生语法错误。

```
@TargetApi(11)    // location 1
public class DisplayMessageActivity extends Activity {

    @Override
    @TargetApi(11)    // location 2
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            @TargetApi(11)    // location 3
            getActionBar().setDisplayHomeAsUpEnabled(true); } 
```

当@TargetApi 行位于代码中间时，它会在位置 3 处生成两个语法错误：

```
x Syntax error, insert "enum Identifier" to complete EnumHeaderName
x Syntax error, insert "enumBody" to complete BlockStatements 
```

如图所示，无论我在语句`@TargetApi`之前`if`还是在语句之​​后都存在错误。`Lint API Check`是否有任何先决条件（导入）或文章[http://tools.android.com/recent/lintapicheck](http://tools.android.com/recent/lintapicheck)中未提及的其他注意事项以使 @TargetApi() 正常工作？

--- 2012 年 9 月 3 日编辑 ---

如果我将 @TargetApi 注释移动到类定义之前（显示为位置 1）或方法定义之前（显示为位置 2，在 @Override 注释之前或之后），我会收到不同的错误：

```
x TargetApi cannot be resolved to a type
x The attribute value is undefined for the annotation type TargetApi 
```

--- 2012 年 9 月 4 日编辑 ---

这是完整的源代码：

```
package com.example.my.first.app;

import android.app.Activity;
import android.content.Intent;
import android.os.Build;
import android.os.Bundle;
import android.support.v4.app.NavUtils;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.TextView;

public class DisplayMessageActivity extends Activity {

    @TargetApi(11)
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // ActionBar introduced in Android 3.0 Honeycomb API 11
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            getActionBar().setDisplayHomeAsUpEnabled(true); }   // Up Navigation

        // Get the message from the intent
        Intent intent = getIntent();
        String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

        // Create the text view
        TextView textView = new TextView(this);
        textView.setTextSize(40);
        textView.setText(message);

        // Set the text view as the activity layout
        setContentView(textView);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_display_message, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case android.R.id.home:
                NavUtils.navigateUpFromSameTask(this);
                return true;
        }
        return super.onOptionsItemSelected(item);
    }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-09T21:16:05.473

[FizzBu​​zz 在How do you version code in Android without compiler warnings](https://stackoverflow.com/questions/11983959/how-do-you-version-code-in-android-without-compiler-warnings)中提供了答案？.

除了`@TargetApi(nn)`代码中的注解，还需要导入该注解的定义：

```
import android.annotation.TargetApi; 
```

`@Override`由于某些未知原因，使用注释不需要导入。[如果修正了 ADT 文档http://tools.android.com/recent/lintapicheck](http://tools.android.com/recent/lintapicheck)以消除虚假代码示例并提及所需的导入，那将会很有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T06:51:50.547

网站上使用代码中间注释的示例完全是错误的（或者可能已过时）。注释本身的声明表明它只允许用于[类型、方法和构造函数](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/annotation/ElementType.html)：

```
/** Indicates that Lint should treat this type as targeting a given API level, no matter what the
    project target is. */
@Target({TYPE, METHOD, CONSTRUCTOR})
@Retention(RetentionPolicy.CLASS)
public @interface TargetApi {
    /**
     * This sets the target api level for the type..
     */
    int value();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T23:38:54.967

在覆盖注释上方插入目标 API 注释

# java - 音节的正则表达式不起作用

> ID：12232242
> 
> 赞同：2
> 
> 时间：2012-09-01T23:27:00.203
> 
> 标签：java, regex

我正在尝试为我的 java 程序编写一个简单的正则表达式来计算音节，但我对正则表达式真的很陌生，所以我没有正确编写它，而且我不确定我做错了什么。我写的正则表达式是：

```
((a|i|o|u|y)?!(a|i|o|u|y|e)|e?!(a|i|o|u|y|e|\\w)|\\w) 
```

.

```
(a|i|o|u|y)?!(a|i|o|u|y|e) 
```

应该匹配所有没有紧跟另一个元音的非 e 元音。

```
e?!(a|i|o|u|y|e|\\w) 
```

应该匹配所有没有紧跟元音或非字母字符的 e。

```
\\w 
```

应该匹配其他两个部分之一部分不匹配的所有单词。

相反，我的前两个根本不匹配，而 \w 匹配每个字母数字字符，所以很明显我做错了很多事情。

我非常感谢您的帮助，如果这个问题有点基本，对不起！

java方法本身就在这里，但我认为它工作正常：

```
public int countNumberOfSyllables(String textToCountSyllablesIn) {

        int syllableCounter = 0;

        Pattern regexForSyllables = Pattern.compile(
                "((a|i|o|u|y)?!(a|i|o|u|y|e)|e?!(a|i|o|u|y|e|\\w)|\\w)",
                Pattern.CASE_INSENSITIVE);

        Matcher syllableMatcher = regexForSyllables.matcher(textToCountSyllablesIn);

        while (syllableMatcher.find()) {
            syllableCounter++;
        }

        if (syllableCounter == 0) {
            syllableCounter++;
        }

        return syllableCounter;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T23:32:41.993

您忘记了前瞻周围的括号：

```
(?!...) 
```

# ruby-on-rails - Rails 包含验证

> ID：12232243
> 
> 赞同：2
> 
> 时间：2012-09-01T23:27:08.830
> 
> 标签：ruby-on-rails, ruby, arrays, validation

我正在努力获得包含验证以在模型上工作，所以也许有人可以告诉我我在这里缺少什么。

这是我的模型：

```
class Order < ActiveRecord::Base

  ORDER_TYPES = %w{ Verkooporder Retourorder }

  ORDER_TYPES.each_with_index do |meth, index|
    define_method("#{meth}?") { type == index }
  end
  validates_inclusion_of :order_type, :in =>  %w{ Verkooporder Retourorder }
  ... 
```

我还创建了一个使用常量数组创建下拉框的表单，如下所示：（我是

```
 = f.input :order_type, as: :select, collection: Order::ORDER_TYPES, label: 'Order type', include_blank: false 
```

我将它保存到我的模型中，如下所示：

```
@order.order_type =   params[:order][:order_type] 
```

所以当我保存我的订单模型时，它总是无法验证 order_type。有没有人可以指出我做错了什么？

PS：order_type 是我模型中的整数值字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T00:27:26.750

问题是您正在定义方法`Verkooporder?`and `Retourorder?`，但它们并没有从您的验证中被调用，因为它`:in`被解释`%w{ Verkooporder Retourorder}`为字符串数组，即`[ "Verkooporder", "Retourorder"]`.

你真正想要验证的`order_type`是一个介于 0 和`ORDER_TYPES`数组大小之间的数字，即一个值介于 0 和 1 之间的字符串：

```
validates_inclusion_of :order_type, :in => %w{ 0 1 } 
```

在这种情况下，您实际上不需要定义布尔值`Verkooporder?`和`Retourorder?`方法，除非您在其他地方需要它们。

更新：

我现在意识到您的表单将`order_type`作为 in 中的字符串返回`Order::ORDER_TYPES`，这不适用于上面的验证，因为上面的验证正在验证整数值字符串。

我过去这样做的方式不是使用整数，`order_type`而是使用字符串。在这种情况下，您只需使用 验证`validates_inclusion_of :order_type, :in => ORDER_TYPES`，选择下拉菜单不必更改。您使用整数值字段是否有任何特殊原因`order_type`？或者，您可以让 select 返回每个订单类型的整数值。

# python - 如何使外部数据库查询可迭代？

> ID：12232244
> 
> 赞同：5
> 
> 时间：2012-09-01T23:27:14.360
> 
> 标签：python, django, django-templates, django-views

我有以下代码：

**设置.py**

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', 
        'NAME': 'tectcom',                     
        'USER': 'test',                    
        'PASSWORD': '***146***',                 
        'HOST': '',                     
        'PORT': '',                      
    },

    'cdr': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'ast',                     
        'USER': '123',                      
        'PASSWORD': '654',                 
        'HOST': '',                      
        'PORT': '',                     
    } 
```

**视图.py**

```
def cdr_user(request):
        cursor = connections['cdr'].cursor()
        calls = cursor.execute('SELECT * FROM cdr')
        return render_to_response("cdr_user.html",
                {'result':calls }, context_instance=RequestContext(request)) 
```

**cdr_user.html**

```
{% for res in result %}

{{ res.billsec }}<br />

{% endfor %} 
```

表是这样的：

```
+-------------+--------------+------+-----+---------------------+-------+
| Field       | Type         | Null | Key | Default             | Extra |
+-------------+--------------+------+-----+---------------------+-------+
| calldate    | datetime     | NO   | MUL | 0000-00-00 00:00:00 |       | 
| clid        | varchar(80)  | NO   |     |                     |       | 
| src         | varchar(80)  | NO   |     |                     |       | 
| dst         | varchar(80)  | NO   | MUL |                     |       | 
| dcontext    | varchar(80)  | NO   |     |                     |       | 
| channel     | varchar(80)  | NO   |     |                     |       | 
| dstchannel  | varchar(80)  | NO   |     |                     |       | 
| lastapp     | varchar(80)  | NO   |     |                     |       | 
| lastdata    | varchar(80)  | NO   |     |                     |       | 
| duration    | int(11)      | NO   |     | 0                   |       | 
| billsec     | int(11)      | NO   |     | 0                   |       | 
| disposition | varchar(45)  | NO   |     |                     |       | 
| amaflags    | int(11)      | NO   |     | 0                   |       | 
| accountcode | varchar(20)  | NO   | MUL |                     |       | 
| userfield   | varchar(255) | NO   |     |                     |       | 
| uniqueid    | varchar(32)  | NO   |     |                     |       | 
| linkedid    | varchar(32)  | NO   |     |                     |       | 
| sequence    | varchar(32)  | NO   |     |                     |       | 
| peeraccount | varchar(32)  | NO   |     |                     |       | 
+-------------+--------------+------+-----+---------------------+-------+ 
```

问题是我得到一个**“异常值：'long'对象不可迭代”**

```
TypeError at /cdr_user/
'long' object is not iterable
Request Method: GET
Request URL:    http://localhost:8000/cdr_user/
Django Version: 1.4.1
Exception Type: TypeError
Exception Value:    
'long' object is not iterable
Exception Location: /usr/local/lib/python2.7/site-packages/django/template/defaulttags.py in render, line 144
Python Executable:  /usr/local/bin/python
Python Version: 2.7.0
Python Path:    
['/home/tectadmin/cdr/billing',
 '/usr/local/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg',
 '/usr/local/lib/python2.7/site-packages/pip-1.0-py2.7.egg',
 '/usr/local/lib/python2.7/site-packages/django_endless_pagination-1.1-py2.7.egg',
 '/usr/local/lib/python27.zip',
 '/usr/local/lib/python2.7',
 '/usr/local/lib/python2.7/plat-linux2',
 '/usr/local/lib/python2.7/lib-tk',
 '/usr/local/lib/python2.7/lib-old',
 '/usr/local/lib/python2.7/lib-dynload',
 '/usr/local/lib/python2.7/site-packages']
Server time:    Sab, 1 Set 2012 19:56:10 -0300
Error during template rendering

In template /home/tectadmin/cdr/billing/config/templates/cdr_user.html, error at line 21
'long' object is not iterable
11    text-indent: 6em;
12  }
13  </style>
14  {% extends "index_cliente.html" %}
15  {% load endless %}
16  {% block title %}CDR{% endblock %}
17  {% block content %}
18  
19  
20  
21  {% for res in result %}
22  
23  {{ res.billsec }}<br />
24  
25  {% endfor %}
26  
27  
28  
29  
30  <br />
31  <form name="input" action="/user_cdr/" method="et" >
Traceback Switch to copy-and-paste view

/usr/local/lib/python2.7/site-packages/django/core/handlers/base.py in get_response
                        response = callback(request, *callback_args, **callback_kwargs) ...
▶ Local vars
/home/tectadmin/cdr/billing/config/views.py in cdr_user
                {'result':result }, context_instance=RequestContext(request)) ...
▶ Local vars 
```

如何使结果可迭代以在我的模板中显示？我已经看过[https://docs.djangoproject.com/en/dev/topics/db/sql/](https://docs.djangoproject.com/en/dev/topics/db/sql/) 以及其他文档，但我仍然迷失在代码中。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T00:18:07.243

要在 Python 中迭代 SQL 查询的结果，请使用`cursor.fetchall()`将其转换为列表列表。[这里](http://code.activestate.com/recipes/577186-accessing-cursors-by-field-name/)有一个非常方便的方法可以将这些结果转换为您可以轻松访问的对象：

```
class SQLRow(object):
    def __init__(self, cursor, row):
        for (attr, val) in zip((d[0] for d in cursor.description), row) :
            setattr(self, attr, val) 
```

一旦你有了那个类，这很简单：

```
def cdr_user(request):
    cursor = connections['cdr'].cursor()
    calls = cursor.execute('SELECT * FROM cdr')
    result = [SQLRow(cursor, r) for r in cursor.fetchall()]
    return render_to_response("cdr_user.html",
            {'result': result }, context_instance=RequestContext(request)) 
```

这样，该`billsec`属性（和所有其他属性）仍然可以在您的模板中访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T00:20:38.067

`cursor.execute()`不返回可迭代的。它在原地修改光标对象。这是有关此的一些[文档](http://www.python.org/dev/peps/pep-0249/)。

您需要调用`.fetchone()` `.fetchmany()`或`.fetchall()`检索结果，这些结果应该是可迭代的，例如：

```
def cdr_user(request):
  cursor = connections['cdr'].cursor()
  cursor.execute('SELECT * FROM cdr')
  calls = cursor.fetchall()
  return render_to_response("cdr_user.html",
                            {'result':calls }, 
                            context_instance=RequestContext(request)) 
```

# jquery - 与 iPad 兼容的前后插件

> ID：12232249
> 
> 赞同：1
> 
> 时间：2012-09-01T23:28:07.303
> 
> 标签：jquery, iphone, ipad

我想在我的网站上使用之前和之后的 jQuery 插件，但我找不到任何与 iPad 兼容的插件，这样你就可以用手指在前后分隔器上下药在 iPad/iPhone 中以及在台式机/笔记本电脑上使用鼠标。

# php - 调整 base64 图像大小

> ID：12232250
> 
> 赞同：14
> 
> 时间：2012-09-01T23:28:19.093
> 
> 标签：php, image, node.js, resize, base64

我有多个图像 - 保存为 Base64 字符串，现在我想调整这些图像的大小以获取它们的缩略图......

最好使用 Javascript (Node-Server) 来调整它们的大小，但也可以使用 php 来调整它们的大小。

提前致谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-03-25T08:41:35.710

我同意[Jon Hanna 的方法](https://stackoverflow.com/a/12232281/4058484)：Do **Parsing** the Base64code then load it to GD Image before Resample。然而，要将它作为数据取回，它并不像我那么容易。在 GAE 中的 php 上，它需要通过在 php.ini 文件中设置来[*启用输出缓冲。*](https://cloud.google.com/appengine/docs/php/config/php_ini)`output_buffering = "On"`

这里我详细解释一下这个步骤。

此文档被视为使用 Base64code 解析创建图像**资源的参考：** [http ://php.net/manual/en/function.imagecreatefromstring.php](http://php.net/manual/en/function.imagecreatefromstring.php)

```
// Create image resource from Base64code
$data64 = 'iVBORw0KGgoAAAANSUhEUgAAABwAAAASCAMAAAB/2U7WAAAABl'
        . 'BMVEUAAAD///+l2Z/dAAAASUlEQVR4XqWQUQoAIAxC2/0vXZDr'
        . 'EX4IJTRkb7lobNUStXsB0jIXIAMSsQnWlsV+wULF4Avk9fLq2r'
        . '8a5HSE35Q3eO2XP1A1wQkZSgETvDtKdQAAAABJRU5ErkJggg==';
$image = imagecreatefromstring(base64_decode($data64)); 
```

这是一个可以直接放入**Resample**函数的图片资源：http: [//php.net/manual/en/function.imagecopyresampled.php](http://php.net/manual/en/function.imagecopyresampled.php)

```
// Resample
$image_p = imagecreatetruecolor($new_w, $new_h);
imagecopyresampled($image_p, $image, 0, 0, 0, 0, $new_w, $new_h, $org_w, $org_h); 
```

结果也是一个图像资源。要将其作为数据获取，我们需要**Buffering**。
了解 [如何从图像资源创建 base64 编码字符串](https://stackoverflow.com/questions/8502610/how-to-create-a-base64encoded-string-from-image-resource)

```
// Buffering
ob_start();
imagepng($image_p);
$data = ob_get_contents();
ob_end_clean(); 
```

[*使用下面的文档，我在我的项目*](https://github.com/chetabahana)上将 GCS 存储桶设置为网站，以便我可以直接**存储和显示**它： [https ://cloud.google.com/storage/docs/website-configuration#tips](https://cloud.google.com/storage/docs/website-configuration#tips)

```
//Store & Display
$context = stream_context_create([
   'gs' =>[
        'acl'=> 'public-read', 
        'Content-Type' => 'image/jpeg', 
        'enable_cache' => true, 
        'enable_optimistic_cache' => true,
        'read_cache_expiry_seconds' => 300,
    ]
]);
file_put_contents("gs://mybucket/resample/image.jpeg", $data, false, $context); 
header("Location: http://mybucket/resample/image.jpeg"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-01T23:37:54.297

你最好的选择是在 PHP 中使用[PHPThumb](http://phpthumb.sourceforge.net/)。

另一种方法是调用 ImageMagick，但您更喜欢：

*   [http://coffeeshopped.com/2009/01/creating-image-thumbnails-using-php-and-imagemagick](http://coffeeshopped.com/2009/01/creating-image-thumbnails-using-php-and-imagemagick)

*   [http://www.hacksparrow.com/node-js-image-processing-and-manipulation.html](http://www.hacksparrow.com/node-js-image-processing-and-manipulation.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-01T23:37:00.867

不知道如何在 node.js 中做到这一点（或任何事情），但你的问题中的 PHP 位肯定是可能的。解析完 Base64 后，将其加载到[GD 图像](http://php.net/manual/en/book.image.php)中，然后[重新采样](http://www.php.net/manual/en/function.imagecopyresampled.php)。

[http://php.net/manual/en/function.imagecopyresampled.php](http://php.net/manual/en/function.imagecopyresampled.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-20T15:27:33.953

也许你可以使用一个库来处理它。试试宽幅图像。我已经使用它并且工作得很好。

例子：

```
$image = base64_decode(preg_replace('#^data:image/\w+;base64,#i', '', $req->image));

$thumbnail = WideImage::load($image)
  ->resize(300, 300, 'inside')
  ->crop('center', 'center', 300, 300); 
```

图书馆文档：[http ://wideimage.sourceforge.net/](http://wideimage.sourceforge.net/)

# java - 调整大小时JButton消失

> ID：12232254
> 
> 赞同：8
> 
> 时间：2012-09-01T23:29:05.537
> 
> 标签：java, swing, jbutton

任何人都知道或知道为什么在我调整小程序大小后我的按钮消失了？

这是我的代码：

```
 import java.awt.event.*;
import javax.swing.*;
import acm.program.*;

public class button extends ConsoleProgram {

    public void init(){

        hiButton = new JButton("hi");
        add(hiButton, SOUTH);
        addActionListeners();

    }

    public   void actionPerformed(ActionEvent e){
        if(hiButton == e.getSource()){
           println("hello") ;
        }

    }
private JButton hiButton;

} 

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T20:14:55.427

我不确定重新定义init方法是否是个好主意。当我查看[http://jtf.acm.org/javadoc/student/acm/program/ConsoleProgram.html](http://jtf.acm.org/javadoc/student/acm/program/ConsoleProgram.html)我希望您只实现运行方法。在不调用 super.init() 的情况下覆盖 init 对我来说看起来很奇怪。

也许我会更好地直接从 JApplet 派生您在 Applet 编程的第一步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T01:09:50.153

您是否尝试过在 init() 方法开始时调用 super.init() ？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T23:36:11.600

尝试为您的控制台显式使用布局，然后使用相对定位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T21:36:28.603

假如说

*   您的 ConsoleProgram 扩展（直接或间接）JApplet
*   您将 SOUTH 声明为具有值 BorderLayout.SOUTH 的静态最终变量（否则您的代码无法编译）

代码应该可以工作，无需重新绘制（除非您想做一些特定于应用程序的优化）。我刚刚复制并粘贴了您的代码（通过明确上面的两个假设），我看到了小程序并且按钮在调整大小时不会消失。

无论如何，代码中几乎没有“不好”的东西：

1.  首先，命名约定问题：类名应该是“Button”，首字母大写（除此之外，这对于 Applet 来说是个糟糕的名称）
2.  其次，在添加组件之前应该附加动作监听器；
3.  第三，正如 Oracle 文档[在这里](http://docs.oracle.com/javase/tutorial/deployment/applet/getStarted.html)所建议的那样，构建 GUI 的代码应该是在事件调度程序线程上运行的作业。您可以通过使用 SwingUtilities.invokeAndWait(Runnable() 将构建 gui 代码包装在 Runnable 中来做到这一点

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-06T09:49:40.023

要在 Applet 中调整按钮的大小：

```
public class Button extends JApplet implements ActionListener {

   private JButton button;

   public void init() {
      Container container = getContentPane();
      container.setLayout(null);
      container.setBackground(Color.white);
      button = new JButton("Press Me");
      button.setSize(getWidth()/2,20);
      button.setLocation(getWidth()/2-button.getSize().width/2, getHeight()/2-button.getSize().height/2);
      container.add(button);
      button.addActionListener(this);
   }

   public void actionPerformed(ActionEvent e) {
      int width = (button.getSize().width == getWidth()/2) ? getWidth()/4 : getWidth()/2;
      int height = button.getSize().height;
      button.setSize(width,height);
      button.setLocation(getWidth()/2-width/2, getHeight()/2-height/2);
   }
} 
```

在 JFrame 中重新调整按钮的大小：

```
public class Button extends JFrame implements ActionListener {
   private JButton button;

   public Button(String title) {
      Container container = getContentPane();
      container.setLayout(null);
      container.setBackground(Color.white);
      setTitle(title);
      setSize(400,400);
      button = new JButton("Press Me");
      button.setSize(getWidth()/2,20);
      button.setLocation(getWidth()/2-button.getSize().width/2,
                     getHeight()/2-button.getSize().height/2);
      container.add(button);
      button.addActionListener(this);
    }

   public void actionPerformed(ActionEvent e) {
      int width = (button.getSize().width == getWidth()/2) ? getWidth()/4 : getWidth()/2;
      int height = button.getSize().height;
      button.setSize(width,height);
      button.setLocation(getWidth()/2-width/2, getHeight()/2-height/2);
   }

   public static void main(String[] args) {
      Button button = new Button("Test");
      button.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      button.setVisible(true);
   }
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-09-06T09:47:41.867

你有没有声明重绘方法...？？？

您正在使用摆动。它需要声明重绘。

请定义自定义重绘 mwthod

# derby - 如何使用 SQLDeveloper 连接到嵌入式 Derby 数据库

> ID：12232258
> 
> 赞同：4
> 
> 时间：2012-09-01T23:30:32.747
> 
> 标签：derby, oracle-sqldeveloper

我有一个使用 derby 和 JPA 的项目。我可以在我的应用程序中很好地连接到数据库。我想用 SQL Developer 连接到嵌入式数据库，这样我就可以轻松浏览/查询数据库中的数据。

这是我正在使用的 derby 依赖项：

```
<dependency>
    <groupId>org.apache.derby</groupId>
    <artifactId>derby</artifactId>
    <version>10.7.1.1</version>
</dependency> 
```

这是我用于 JPA 的连接信息：

```
<property name="javax.persistence.jdbc.driver" value="org.apache.derby.jdbc.EmbeddedDriver"/>
<property name="javax.persistence.jdbc.url" value="jdbc:derby:fs-hash-database;create=true"/> 
```

使用 SQL Developer 3.2.09，我尝试在 Tools > Preferences > Database > Third Party JDBC Drivers 中添加驱动程序，并添加以下条目：

```
C:\Users\axiopisty\.m2\repository\org\apache\derby\derby\10.7.1.1\derby-10.7.1.1.jar 
```

但是当我尝试创建新连接时，SQL Developer 仍然只显示 Oracle 和 Access 的选项卡。我无法获得第 3 方驱动程序的 JDBC 选项卡。

我认为问题在于我作为 3rd 方驱动程序添加的 jar 是整个 derby jar，而不仅仅是驱动程序。然而，驱动程序包含在 jar 中。

有谁知道如何配置 SQL Developer 以使用 derby-10.7.1.1.jar 中包含的 org.apache.derby.jdbc.EmbeddedDriver？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T06:33:34.427

SQL Developer 不支持 Apache Derby。[它仅支持WebSite 上记录](http://www.oracle.com/technetwork/developer-tools/sql-developer/featurelist-094691.html#con)的非常有限（且固定）的 DBMS 集：

*   甲骨文（显然）
*   MySQL（显然）
*   SQL 服务器
*   DB2
*   微软访问
*   赛贝斯
*   太极数据

（所有第三方 DBMS 在网站上都被列为“只读”——无论这意味着什么）

您将需要一个“真正的”通用 JDBC 客户端来针对 Derby（如 Squirrel、DbVisualizer 或 SQL Workbench/J）使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-21T06:33:41.250

从 Java 8 开始，可以使用 JDK 附带的驱动程序手动配置 Oracle SQL Developer 以与 Derby 一起使用。

**第 1 步：在 Oracle SQL Developer 中，包括 Derby 相关库。**

Oracle SQL Developer -> 工具 -> 首选项 -> 数据库 -> 第三方 JDBC 驱动程序。我只是 [添加条目...] C:\Program Files\Java\jdk1.8.0_92\db\lib 下的所有库

**步骤 2：手动编辑 connections.xml**

编辑 C:\Users\USERNAME\AppData\Roaming\SQL Developer\system4.1.2.20.64\o.jdeveloper.db.connection.12.2.1.0.42.151001.541\connections.xml

在本例中，我使用的是嵌入式 Derby 驱动程序。

```
<Reference name="DerbyConn" className="oracle.jdeveloper.db.adapter.DatabaseProvider" xmlns="">
  <Factory className="oracle.jdevimpl.db.adapter.DatabaseProviderFactory1212"/>
  <RefAddresses>
     <StringRefAddr addrType="OracleConnectionType">
        <Contents>BASIC</Contents>
     </StringRefAddr>
     <StringRefAddr addrType="RaptorConnectionType">
        <Contents>Microsoft SQL Server</Contents>
     </StringRefAddr>
     <StringRefAddr addrType="customUrl">
        <Contents>jdbc:derby:firstdb;create=true</Contents>
     </StringRefAddr>
     <StringRefAddr addrType="driver">
        <Contents>org.apache.derby.jdbc.EmbeddedDriver</Contents>
     </StringRefAddr>
     <StringRefAddr addrType="subtype">
        <Contents>SQLServer</Contents>
     </StringRefAddr>
     <StringRefAddr addrType="ConnName">
        <Contents>DerbyDB</Contents>
     </StringRefAddr>
  </RefAddresses> 
```

注意：
1\. XML 设置可以像上图一样简单。
2\. customUrl 是**jdbc:derby:firstdb;create=true**。这将在 C:\sqldeveloper\bin\firstdb 中初始化 firstdb 模式。您可以使用**jdbc:derby:D:\\Project\\derbydb\\firstdb**将架构初始化为绝对位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-23T05:36:39.567

通过将驱动程序文件添加到类路径，然后编辑目录 AppData\Roaming\SQL Developer\system4.0.2.15.21\ o.jdeveloper.db.connection.12.1.3.2.41.140418.1111

我通过复制一个 sql server 连接来做到这一点，但它似乎很高兴地认为它是一个 sql server 数据库。

我在文件中添加了以下内容：

```
     <参考名称="DATABASENAME" className="oracle.jdeveloper.db.adapter.DatabaseProvider" xmlns=""\>
      <Factory className="oracle.jdevimpl.db.adapter.DatabaseProviderFactory1212"/>
      <参考地址>
         <StringRefAddr addrType="端口">
            <内容>1527/数据库名称</内容>
         </StringRefAddr>
         <StringRefAddr addrType="user">
            <内容>用户名</内容>
         </StringRefAddr>
         <StringRefAddr addrType="NoPasswordConnection">
            <内容>正确</内容>
         </StringRefAddr>
         <StringRefAddr addrType="subtype">
            <Contents>SQLServer</Contents>
         </StringRefAddr>
         <StringRefAddr addrType="RaptorConnectionType">
            <Contents>Microsoft SQL Server</Contents>
         </StringRefAddr>
         <StringRefAddr addrType="ConnName">
            <内容>数据库名称</内容>
         </StringRefAddr>
         <StringRefAddr addrType="主机名">
            <Contents>主机名</Contents>
         </StringRefAddr>
         <StringRefAddr addrType="customUrl">
            <Contents>JDBCURL</Contents>
         </StringRefAddr>
         <StringRefAddr addrType="SavePassword">
            <内容>假</内容>
         </StringRefAddr>
         <StringRefAddr addrType="驱动程序">
            <Contents>org.apache.derby.jdbc.ClientDriver</Contents>
         </StringRefAddr>
      </参考地址>
   </参考>

```

您必须为数据库配置适当的 DATABASENAME、USERNAME、HOSTNAME 和 JDBCURL 值。

我希望这有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-07T15:56:57.963

在经历了许多“错误的 URL 格式”和一些“空指针异常”之后，我终于成功地让这个连接正常工作了！在我的上下文中，不是嵌入式 DERBY 数据库，而是[作为网络服务器启动的](https://db.apache.org/derby/docs/10.11/adminguide/index.html)Derby 。这是清单：

*   使用带有 JDK 8 的 SQL 开发者版本 20.x（早期可能会 - 未选中）（SQL 开发者需要 171 以上）。后者包含历史上是 Apache DERBY 10 数据库的 javaDB。

*   DERBY 已启动并侦听端口 1527（其默认值）。根据您的上下文，权限必须确实允许本地主机和/或远程连接。我强烈建议您准备好数据库，然后使用本地 Derby[命令行工具 'ij'](http://db.apache.org/derby/papers/DerbyTut/ij_intro.html)等检查连接性。例如，在 ij 提示符下：

> ```
> ij> connect 'jdbc:derby://localhost:1527/MyDB;user=MYUSER;password=abcd'; 
> ```

*   确保将 Derby JDBC 驱动程序添加到 SQL Developer > 工具 > 首选项 > 数据库 > 第三方 JDBC 驱动程序。浏览并添加 ***你的JDKpath* \db\lib\derbyclient.jar**；这个单一的罐子就足够了。

*   创建一个新连接，只是为了在我们必须手动编辑的连接配置文件中创建条目。确保使用正确的用户名和密码为其提供所需的名称。填写其他字段的任何数据并保存您的连接。它还不能工作。

*   退出 SQL 开发人员并手动编辑连接元数据。在最近的 SQL 开发人员版本中，此文件为 JSON，以前的版本为 XML，两种情况下的属性名称相同。路径是这样的：

> ```
> C:\Users\YourNAME\AppData\Roaming\SQL Developer\system20.2.0.175.1842\o.jdeveloper.db.connection\connections.json 
> ```

*   打开文件并识别您刚刚创建的连接。编辑它以获得类似：

    ```
     {
         "info": {
             "role": "",
             "SavePassword": "true",
             "OracleConnectionType": "BASIC",
             "RaptorConnectionType": "Microsoft SQL Server",
             "customUrl": "jdbc:derby://localhost:1527/MyDB",
             "NoPasswordConnection": "TRUE",
             "password": "123456789PLVEC4wxu80ijhx5ALU4ZpRgo123456789=",
             "hostname": "localhost",
             "port": "1527",
             "subtype": "SQLServer",
             "ConnName": "DerbyDB",
             "driver": "org.apache.derby.jdbc.ClientDriver",
             "IS_PROXY": "false",
             "OS_AUTHENTICATION": "false",
             "KERBEROS_AUTHENTICATION": "false",
             "user": "MYUSER"
         },
         "name": "local DERBY",
         "type": "jdbc"
     } 
    ```

*   是的，您可能已经注意到对“Microsoft SQL Server”作为*RaptorConnectionType*和“SQLServer”作为*subtype*的引用。这是魔术。当然，客户端*驱动程序*类路径也很关键，对于 Derby 网络模式客户端，它是“org.apache.derby.jdbc.ClientDriver”，*connectionUrl*也是如此。

*   启动 SQL Developer 并打开将出现在“SQLServer Connections”下的连接

# solr - solr 产品促销

> ID：12232272
> 
> 赞同：2
> 
> 时间：2012-09-01T23:33:34.643
> 
> 标签：solr

是否可以在 SOLR 中进行产品促销。例如 - 我想提升属于类别的所有产品：“跑鞋”和价格：[0 TO 100]

因此，如果是搜索鞋，那么属于类别：“跑鞋”和价格：[0 TO 100] 的产品应该在搜索结果中出现更高的位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T08:49:34.577

检查例如[Boost Score](http://wiki.apache.org/solr/SolrRelevancyFAQ#How_can_I_boost_the_score_of_newer_documents)或如果您使用 Dismax 解析器检查参数[Boost Query](http://wiki.apache.org/solr/DisMaxQParserPlugin#bq_.28Boost_Query.29)

根据你的情况你可以试试`bq=(category:"running shoes" AND price: [0 TO 100])^2.0`

# authorization - Java EE 6 组、用户和角色 -vs- Shiro 的角色、用户和权限

> ID：12232277
> 
> 赞同：5
> 
> 时间：2012-09-01T23:36:18.523
> 
> 标签：authorization, java-ee-6, shiro

我正在尝试将 Java EE 6 的**组**、**用户**和**角色**的安全概念映射到[Apache Shiro](http://shiro.apache.org/)的**角色**、**用户**和**权限**的概念，我的理解是它们是不兼容的。

阅读[Java EE 6 安全教程](http://docs.oracle.com/javaee/6/tutorial/doc/bnbxj.html)，似乎该模型过于严格：**组**是在每个服务器而不是每个应用程序的基础上配置的，这实际上只给我们留下了两个灵活的概念来表达授权机制：**用户**和**角色**，存在于简单的 1 对 N 关系中。相比之下，Shiro 的**角色**、**用户**和**权限**模型更加动态，因为它允许在注释代码中硬编码**权限**并修改**角色**到**权限的映射**在运行时随着事情的变化或新角色的引入。我看不出如何根据 Java EE 6 模型对容器管理的授权做同样的事情。

我的理解正确吗？因为这意味着容器管理的授权不能真正走得太远。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:27:09.273

它们不兼容，我认为 Java EE 安全性的设计者弄错了，因为术语似乎与 ROLES 无关。

根据经验，我知道提供基于 ROLE 的访问控制（在他们的文档中建议）只会在您想向其他组/角色打开功能时导致问题。映射回角色（或组）的基于权限的访问似乎效果最好，因为它是抽象级别的重新映射练习，而不是重新编码/重新注释的练习。

我可以看出您会对 Java EE 安全模型感到困惑。我建议仔细看看 Shiro 以及它是如何模拟应用程序级安全性的。Shiro 的创建者 Les Hazelwood 写了[一篇关于 RBAC](http://www.stormpath.com/blog/new-rbac-resource-based-access-control)的博客，这对于需要细粒度控制甚至到**实例级别**的应用程序来说非常有意义。

# android - android模拟器设置不太正确

> ID：12232279
> 
> 赞同：0
> 
> 时间：2012-09-01T23:36:30.200
> 
> 标签：android, eclipse, android-emulator

当我按照教程在我的 android 模拟器上运行应用程序时，我的应用程序看起来总是与预期的不同。我的默认背景是白色和黑色文本，但我在互联网上看到的所有其他模拟器都有默认的黑色背景和白色文本。此外，当我创建`Spinner`它时，它没有似乎在所有其他模拟器上默认的绿色选择圆圈。我正在使用带有 android sdk rev 20 的 eclipse Juno。看起来我没有安装或启用某些东西，但我不知道我错过了什么。这里有一些图片来说明我的意思。

我`Spinner`被点击的模拟器：

![在此处输入图像描述](../Images/e6091c0c757be1dc2917125328950d3f.png) 单击时其他模拟器看起来像什么`Spinner`：

![在此处输入图像描述](../Images/24e8579739a9174d8fbf67f151571c37.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T00:01:52.157

这不是模拟器问题，而是您应用到应用程序的主题和运行应用程序的目标 SDK。请将 manifest 文件中的 target SDK 改为 10 或更低，并注释或删除应用主题的行：android:theme="..." 即可达到预期效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T00:01:39.770

不是模拟器。这是您在其上运行的 Android 版本。默认情况下，Spinner 看起来像 Android 2.0-2.3.3 中的第二张图片，而第一张图片显示的是 Android 4.0+ 上的微调器，通常类似于下拉菜单。

# ruby-on-rails-3 - 未能执行 rails g bootstrap:install with 'twitter-bootstrap-rails'

> ID：12232280
> 
> 赞同：2
> 
> 时间：2012-09-01T23:36:37.123
> 
> 标签：ruby-on-rails-3, twitter-bootstrap

看来我和 OP 的人有同样的问题： [https](https://github.com/seyhunak/twitter-bootstrap-rails/issues/27) ://github.com/seyhunak/twitter-bootstrap-rails/issues/27 但我无法解决它。

执行如下所述的基本 Rails 应用程序： [http:](http://railscasts.com/episodes/328-twitter-bootstrap-basics) //railscasts.com/episodes/328-twitter-bootstrap-basics 尝试`rails g bootstrap:install`.

我系统上 r/r 的基本版本是：ruby v 1.9.2p320，雪豹 10.6.4 上的 rails 3.1.0

我可以在本地系统上复制的方式：

```
rails new bsapp --skip-stylesheets
cd bsapp
rails g scaffold product name:string price:decimal --skip-stylesheets 
```

将 gem 'twitter-bootstrap-rails' 添加到 gemfile 中的资产组。

```
bundle update
rails g bootstrap:install 
```

这就是问题所在。

```
Hayk-Saakians-Mac:bsapp hayk$ rails g bootstrap:install
/Users/hayk/.rvm/gems/ruby-1.9.2-p320/gems/less-2.2.1/lib/less/java_script/v8_context.rb:61:in `rescue in lock': uninitialized constant V8::JSError (NameError)
    from /Users/hayk/.rvm/gems/ruby-1.9.2-p320/gems/less-2.2.1/lib/less/java_script/v8_context.rb:60:in `lock'
    from /Users/hayk/.rvm/gems/ruby-1.9.2-p320/gems/less-2.2.1/lib/less/java_script/v8_context.rb:19:in `initialize'
    from /Users/hayk/.rvm/gems/ruby-1.9.2-p320/gems/less-2.2.1/lib/less/java_script/v8_context.rb:15:in `new'
    from /Users/hayk/.rvm/gems/ruby-1.9.2-p320/gems/less-2.2.1/lib/less/java_script/v8_context.rb:15:in `instance'
    from /Users/hayk/.rvm/gems/ruby-1.9.2-p320/gems/less-2.2.1/lib/less/loader.rb:10:in `initialize'
    from /Users/hayk/.rvm/gems/ruby-1.9.2-p320/gems/less-2.2.1/lib/less.rb:14:in `new'
    from /Users/hayk/.rvm/gems/ruby-1.9.2-p320/gems/less-2.2.1/lib/less.rb:14:in `<module:Less>'
    from /Users/hayk/.rvm/gems/ruby-1.9.2-p320/gems/less-2.2.1/lib/less.rb:9:in `<top (required)>'
    from /Users/hayk/.rvm/gems/ruby-1.9.2-p320/gems/less-rails-2.2.3/lib/less/rails.rb:6:in `require'
    from /Users/hayk/.rvm/gems/ruby-1.9.2-p320/gems/less-rails-2.2.3/lib/less/rails.rb:6:in `<top (required)>'
    from /Users/hayk/.rvm/gems/ruby-1.9.2-p320/gems/less-rails-2.2.3/lib/less-rails.rb:1:in `require'
    from /Users/hayk/.rvm/gems/ruby-1.9.2-p320/gems/less-rails-2.2.3/lib/less-rails.rb:1:in `<top (required)>'
    from /Users/hayk/.rvm/gems/ruby-1.9.2-p320/gems/twitter-bootstrap-rails-2.1.3/lib/twitter-bootstrap-rails.rb:9:in `require'
    from /Users/hayk/.rvm/gems/ruby-1.9.2-p320/gems/twitter-bootstrap-rails-2.1.3/lib/twitter-bootstrap-rails.rb:9:in `<top (required)>'
    from /Users/hayk/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.0/lib/bundler/runtime.rb:68:in `require'
    from /Users/hayk/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.0/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
    from /Users/hayk/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.0/lib/bundler/runtime.rb:66:in `each'
    from /Users/hayk/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.0/lib/bundler/runtime.rb:66:in `block in require'
    from /Users/hayk/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.0/lib/bundler/runtime.rb:55:in `each'
    from /Users/hayk/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.0/lib/bundler/runtime.rb:55:in `require'
    from /Users/hayk/.rvm/gems/ruby-1.9.2-p320@global/gems/bundler-1.2.0/lib/bundler.rb:128:in `require'
    from /Users/hayk/ror/bsapp/config/application.rb:7:in `<top (required)>'
    from /Users/hayk/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.1.0/lib/rails/commands.rb:21:in `require'
    from /Users/hayk/.rvm/gems/ruby-1.9.2-p320/gems/railties-3.1.0/lib/rails/commands.rb:21:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'
Hayk-Saakians-Mac:bsapp hayk$ 
```

完整来源： http: [//pastebin.com/nXBcq2bB](http://pastebin.com/nXBcq2bB)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T02:39:07.967

问题的根源是 v8/therubyracer/libv8 的错误/旧/不存在安装

某些版本的 libv8 gem 直接安装失败，而那些安装了 - 他们花了几个小时，所以我认为它们挂起/崩溃（我正在使用上网本，所以这是可以预料的）。

目前，以下配置对我有用：

```
gem "libv8", "3.11.8.13"
gem "therubyracer", :require => 'v8'
gem "less-rails"
gem "twitter-bootstrap-rails" 
```

在开发和生产中（heroku）

在 ruby​​racer 或 libv8 上有一个与此相关的 github 问题，其中提到了 x86/32 位处理器的问题——我不记得了。

# php - 降低验证码 zend 表单元素的难度级别？

> ID：12232282
> 
> 赞同：7
> 
> 时间：2012-09-01T23:37:27.157
> 
> 标签：php, zend-framework, zend-form, recaptcha

我正在使用带有 zend 形式的 reCaptcha，如下所示：

```
 $recaptcha = new Zend_Service_ReCaptcha('xxx', 'yyy',
        NULL, array('theme' => 'white'));

    $captcha = new Zend_Form_Element_Captcha('captcha',
        array(
            'label'          => 'Type the characters you see in the picture below.',
            'captcha'        =>  'ReCaptcha',
            'captchaOptions' => array(
                'captcha' => 'ReCaptcha',
                'service' => $recaptcha
            )
        )
    ); 
```

我想知道是否有一种设置可以降低人们阅读单词的难度。似乎很难破译那些话

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T00:05:07.670

不; ReCaptcha 没有难度设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T00:10:35.083

你可以在它下面写一个字条说“尽力而为”。

在每个重新验证码中，都有一个简单的单词和一个难的单词。如果您键入简单的，您几乎可以得到它。如果您尽最大努力输入硬词，则很可能有人已经输入了与您相同的内容。如果至少有 3 个用户已经给出了答案，谷歌（在 re-captcha 之后）认为答案有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T00:51:02.730

我知道这不能回答您的验证码问题，但您是否考虑过使用其他“人体测试”方法？恕我直言，验证码使最终用户更难使用表单，这绝不是一件好事。我个人喜欢在我的表单上使用计时器。当页面加载和提交时，我将一个变量设置为 time()，该变量会根据当前时间进行检查，如果表单是在 2 或 3 秒内提交的，它可能是一个机器人。除了验证码之外，还有许多其他更好的“人体测试”方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T04:42:27.507

ReCaptcha 上没有难度级别的设置。时期。

我不使用它，也不推荐任何人使用它。

问像2 + 2这样的数学问题的答案，这样你就不会只有人类进来了。还有像独立日什么时候这样的问题？不是很好的问题，因为您将有来自世界各地的访客。使用数学。

# c# - 调用 WCF 是否必须使用 Java Metro？

> ID：12232284
> 
> 赞同：-2
> 
> 时间：2012-09-01T23:37:37.997
> 
> 标签：c#, java, wcf, web-services

为什么 jaxws 还不够，因为 Metro 并不为人所知，所以开发团队需要一个新的学习曲线： Metro 有什么好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T23:54:19.587

> 调用 WCF 是否必须使用 Java Metro？

不。首先，您可以（理论上）自己实现互操作性，尽管这显然很困难。其次，微软显然已经为 Codeplex 上的 WCF 互操作性发布了 Java 绑定：

参考： [Microsoft 为 WCF 服务发布 Java 友好的互操作绑定](http://www.infoq.com/news/2011/06/microsoft-interop-bindings)

我无法告诉您 Metro 方法或 MS 绑定是否会更好。

* * *

另一方面，WCF 也不是使用 Java Metro 的强制要求

*“注意：因为基于 Metro 的客户端和服务是可互操作的，所以您可以在不使用 WCF 的情况下获得 Metro 的好处。”*

参考：Metro 用户指南：[第 1.3 章](http://metro.java.net/guide/ch01.html#ahiar)

* * *

> 为什么 jaxws 还不够

理论上是这样。在实践中，使用现有绑定（Metro 或 MS）将比挖掘规范等工作来弄清楚如何实现绑定*并使其实际工作*要少得多。当然，工作量取决于您需要使用多少 WCF。但是重新发明轮子通常是个坏主意……

# windows - 代码如何存储在可执行文件中？

> ID：12232287
> 
> 赞同：5
> 
> 时间：2012-09-01T23:37:49.633
> 
> 标签：windows, linux, macos, executable

我读到可执行文件将代码存储在不同的部分。例如，数据等的单独部分。这是否跨不同平台（如 Win、MacO 或 Linux）通用？

对它的一些见解将非常有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T03:21:11.157

您是正确的，因为可执行文件具有多个部分或段：但是，并非所有部分都是代码。

通常有一段代码——在 ELF 和 PE 中，这通常称为 .text。存在额外的存储动态链接数据、硬编码字符串、只读数据、全局变量等。

要亲自查看这些，而不是 Wiki 和 Google，请尝试：

在 Windows 中：您有一个名为 DUMPBIN.EXE 的工具，它是 Visual Studio 的一部分。如果您不能亲自动手，请使用 Dependency Walker（可免费下载）。这将解析 PE 和 PE32+（即 64 位）文件

在 Linux 中：对 ELF 文件使用 objdump -x 或 readelf（两者几乎相同，但选项略有不同）。

在 Mac 中：使用 otool -l 查看 Mach-O 文件中的加载命令（显示部分和段）。

使用其中一个或所有工具有望让您更好地了解事情的运作方式。

希望这可以帮助，

TG

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T23:51:36.270

Windows 使用 Portable Executable 格式。

*nix 通常使用可执行和可链接格式。以前有些使用 SOM、a.out、ECOFF、XCOFF、COFF 和其他一些。

OS X 和 iOS（以及 NeXT，历史爱好者）使用 Mach-O。

PowerPC 系统仍然支持与早期 Mac OS 和某些形式的 BeOS 一起使用的首选可执行格式。

也许从[http://en.wikipedia.org/wiki/Comparison_of_executable_file_formats开始](http://en.wikipedia.org/wiki/Comparison_of_executable_file_formats)

# c++ - 发出 Qt HTTP 请求并在单个函数调用中接收响应

> ID：12232290
> 
> 赞同：2
> 
> 时间：2012-09-01T23:38:02.413
> 
> 标签：c++, qt

我正在尝试创建一个库，其 API 将以下列方式使用：

```
WebService *service = new WebService( username, password );
User *user = service->getAuthenticatedUser();
UserAssets *assets = user->assets();
// And so on 
```

创建实例时，经过身份验证的用户及其资产都不会被下载`WebServer`，而是只有在明确请求时才会被检索。

每当我必须在使用 Qt 之前从网络中检索数据时，我都会遵循将`finished()`信号连接`QNetworkReply`到适当插槽并使用该插槽处理返回数据的标准模式。

我的问题是该模式似乎不适合我想要的用例。我希望我的图书馆的用户（其他开发人员）能够使用单行来请求和接收他们想要的数据，但至少从我的角度来看，“Qt 方式”似乎要求他们启动一条线上的请求，然后将一些信号连接到其他插槽以获取数据，这不是我希望他们拥有的体验。

我是网络编程的新手，无论是一般的还是 Qt 的，但我使用了用 Python 编写的库，与完全相同的服务进行通信，能够实现这一点，所以这似乎是可能的。

**是否可以通过一个函数调用使用 Qt 执行 HTTP 请求的整个生命周期？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T23:45:35.637

您最好的选择可能是使用[QEventLoop](http://doc.qt.nokia.com/4.7-snapshot/qeventloop.html)。这将允许您 1) 启动 HTTP 连接，并且从调用者的角度来看，2) 有效阻止，直到您得到响应。

例如：

*   [QNetworkReply 等待完成](https://stackoverflow.com/questions/5486090/qnetworkreply-wait-for-finished)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T03:20:43.840

正如其他人已经提到的，您可以使用`QEventLoop`等待`finished()`或`error()`信号，以及退出事件循环。这种解决方案在工作时有一些严重的缺点。

如果下载给定地址需要更长的时间，那么您可能会在事件循环中卡住很长一段时间。事件循环很好地处理事件，因此您的应用程序不会冻结，但无论如何都有一些怪癖。想象一下，用户正在等待加载，然后按下另一个按钮来加载其他内容。然后你将有多个循环，第一个文件必须等待第二个文件完成下载。

在单个调用中做事向许多程序员暗示，这将在一瞬间发生。但是您的函数正在内部处理事件，因此这可能不成立。想象一个像这样的代码

```
// some pointer accessible to many functions/methods (eg. member, global)
MyData* myData=0; 
```

然后是调用您的函数的代码：

```
if (myData){
    QNetworkReply* reply = getMyWobsite(whatever);
    myData->modify(reply);
} 
```

看起来不错，但是如果其他插槽碰巧调用了怎么办

```
 myData=0; 
```

如果在等待请求时执行此槽，应用程序将崩溃。如果您决定在您的函数中使用 QEventLoop，请务必在函数文档中提及它，这样使用它的程序员将能够避免此类问题。

如果您没有将 qt 用于其他任何事情，您甚至可以考虑一些替代库（例如[libcurl](http://curl.haxx.se/libcurl/)），它们可能已经实现了您需要的东西。

# cakephp - Cakephp: $this->Auth->user vs $this->User vs $user

> ID：12232293
> 
> 赞同：1
> 
> 时间：2012-09-01T23:38:45.400
> 
> 标签：cakephp, authentication, controller

我意识到这可能不是一个明确的“问题/答案”问题，但我认为值得一问。

在控制器中，似乎有三个选项可以访问 Auth 对象：

$this->Auth->用户 $this->用户 $user

他们每个人都返回登录用户的记录，我看不出他们之间有什么区别。

现在，我突然想到，如果在关联模型 $this->Posts->User 中工作，$this->User 可能会有点令人困惑或不清楚。

但除此之外，这三个选项之间有区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T04:42:17.387

`$this->Auth->user()`从会话中返回当前经过身份验证的用户。

`$this->User`是一个模型，除非您使用会话数据（来自 Session 或 Auth 组件）来获取用户 ID，否则您不会获得当前经过身份验证的用户。无论哪种方式，您都必须对每个请求进行查询以获取有关登录用户的信息。

`$user`..只是一个变量。我不明白这是一个“访问 Auth 对象的选项”

如果您想要有关当前登录用户的信息，请使用`$this->Auth->user();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T05:03:03.130

在 cakephp 2 中，您必须使用`AuthComponent::user($user_field)`来访问经过身份验证的用户数据，例如：对于经过身份验证的用户的 id，您必须使用`AuthComponent::user('id')`。

正如tirang所说`$this->User`，是一个模型，`$user`只是一个变量。

# assembly - 我应该在哪里将程序加载到 RAM 中？

> ID：12232296
> 
> 赞同：0
> 
> 时间：2012-09-01T23:39:24.987
> 
> 标签：assembly, x86

我正在开发一个汇编操作系统。我有一个可以加载 COM 文件的工作可执行加载器，但我不确定是否应该加载它们。我的操作系统在 0x200000 处加载到 RAM 中。目前我没有内存管理或类似的东西。我只是害怕将程序加载到我不应该加载的某个地方（例如加载到视频内存中，或覆盖现有代码）。除了 IDT 和视频 RAM 之外，BIOS 是否使用 0x200000 之前的任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T00:36:38.117

几乎任何高于 0x100000 的东西都应该是安全的。我将内核加载到该地址，您可以将程序存储在大部分高端内存中。

您应该在 0x100000 以上有足够的空间用于操作系统和程序。之前的一些部分是可用的，但除非你真的需要它，否则避免该部分可能更容易。

[Memory Map (x86) - OSDev Wiki](http://wiki.osdev.org/Memory_Map_%28x86%29)是您可以期待的一些东西的一个很好的参考。

[Detecting Memory (x86) - OSDev Wiki](http://wiki.osdev.org/Detecting_Memory_%28x86%29)解释了如何查找可用内存。

# javascript - For 循环中断 IndexOf

> ID：12232297
> 
> 赞同：0
> 
> 时间：2012-09-01T23:39:27.510
> 
> 标签：javascript, html, for-loop, indexof

好吧，我把头发扯掉了，因为我以为我已经完成了这个脚本，但是突然添加了一个 for 循环破坏了每个 indexOf，我尝试创建检查，这样控制台就不会崩溃，但遗憾的是没有成功。为“z”或 LevelCheck 使用静态值允许所有 indexOfs 正常工作，但一旦涉及 for 循环，似乎没有一个 indexOfs 希望工作

```
<script type="text/javascript">
var tempval = new Array();
function Renew(){ //Reset tempval back to val
    for(d=0;d<val.length;d++){
        tempval[d] = val[d];
    }
}
function UpdateLoop(){
    Renew();
    var Levels = document.getElementById("Lvl");
    if(Levels){
        for(z=0; z<=Levels.value; z++){
            Update(z);
        }
    }
}
function Update(LevelCheck){
    for (i=0; i<=key.length; i++){
        if(key[i] != null){
            if ( key[i].indexOf("rate") > -1 ) { //Search through
                for (r=0; r<=key.length; r++){
                    if(key[i].indexOf(key[r]) > -1){ //Finds out which form it should replace
                        var raw=tempval[i];
                        for (y=0; y<=key.length; y++){
                            if(key[i] != "movespeed" && key[i] != "Movrate"){ //add a check to see if string is not there
                                var item = document.getElementById(key[y]);
                                if (item) {    //Make it use formula value and then put that result into a value and loop back into function until level reached. If level changed to a lower number, reset to original value and repeat
                                    //raw=raw.replace(key[y],document.getElementById(key[y]).value); //replace this with val[y]
                                    raw=raw.replace(key[y],tempval[y]);
                                }
                            }
                            else
                                break;
                        }
                        if(raw != null){
                            if(raw.indexOf("Mov") > -1){
                                for(x=0; x<=key.length; x++){
                                    if(key[x].indexOf("movespeed") > -1){
                                        //raw=raw.replace("Mov",document.getElementById(key[x]).value);
                                        raw=raw.replace("Mov",tempval[x]);
                                        break;
                                    }
                                }
                            }
                            if(raw.indexOf("Lvl") > -1){
                                raw=raw.replace("Lvl",document.getElementById('Lvl').value);
                            }
                            if(raw.indexOf("Exp") > -1){
                                raw=raw.replace("Exp","0");
                            }
                        }
                        if( document.getElementById('Lvl').value == LevelCheck){
                            alert("Input:"+tempval[i]);
                            if(key[i] == "Movrate"){
                                document.getElementById("movespeed").value = eval(raw);
                            }
                            else{
                                var check = document.getElementById(key[r]);
                                if (check){
                                    document.getElementById(key[r]).value = eval(raw);
                                }
                            }
                        }
                        else{
                            tempval[r] = eval(raw);
                        }
                        break; //So it doesn't keep searching
                    }
                }
            }
        }
    }
}
</script> 
```

Html 部分（这是通过 php 生成的，所以我只是使用了浏览器生成的内容）

```
<table>
    <tbody>
        <tr>
            <td>Creature Name:</td>
            <td>
                <input type="Text" name="CName" value="Thing" size="10%">
            </td>
        </tr>
        <tr>
            <td>Level:</td>
            <td>
                <input type="Text" id="Lvl" name="level" onchange="" value="1" size="10%">
            </td>
        </tr>
        <tr>
            <td>movespeed:</td>
            <td>
                <input type="Text" name="movespeed" id="movespeed" value="1" size="10%">
            </td>
        </tr>
        <tr>
            <td>str:</td>
            <td>
                <input type="Text" name="str" id="str" value="4" size="10%">
            </td>
        </tr>
        <tr>
            <td>dex:</td>
            <td>
                <input type="Text" name="dex" id="dex" value="3" size="10%">
            </td>
        </tr>
        <tr>
            <td>int:</td>
            <td>
                <input type="Text" name="int" id="int" value="1" size="10%">
            </td>
        </tr>
        <tr>
            <td>will:</td>
            <td>
                <input type="Text" name="will" id="will" value="2" size="10%">
            </td>
        </tr>
        <script type="text/javascript">
            var key=new Array();
            var val=new Array();
            key.push("movespeed");
            val.push("1");
            key.push("str");
            val.push("4");
            key.push("dex");
            val.push("3");
            key.push("int");
            val.push("1");
            key.push("will");
            val.push("2");
            key.push("Movrate");
            val.push("Mov+1");
            key.push("strrate");
            val.push("1+str");
            key.push("dexrate");
            val.push("1+dex+(str/4)");
            key.push("intrate");
            val.push("1+int");
            key.push("willrate");
            val.push("1+will");
        </script>
        <tr>
            <td>
                <input type="button" name="button" value="Use Formula" onclick="UpdateLoop();">
            </td>
            <td>
                <input type="submit" value="Save">
            </td> 
```

安慰：

```
Uncaught TypeError: Object 2 has no method 'indexOf' Monsters.php:62
Update Monsters.php:62
UpdateLoop Monsters.php:39
onclick Monsters.php:28 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T08:39:22.237

事实证明，平面数字不是字符串，因此为了安全地通过每个值 .toString() 必须存在，但感谢大家的尝试。所以它看起来像：

```
key[i].toString().indexOf(key[r]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T00:45:26.213

您需要将更新功能更改为以下内容：

```
function UpdateLoop(){
    var Levels = document.getElementById("Lvl");
    if(Levels){
        for(z=0; z<=Levels.value; z++){
            Renew();
            Update(z);
        }
    }
} 
```

在处理 0 级后，`tempval`数组具有来自 0 级的值，这会清除`val`数组中的原始值。

进行此更改解决了我的测试中的问题：http: [//jsfiddle.net/jimmym715/xTUND/](http://jsfiddle.net/jimmym715/xTUND/)

哦，MaxArt 在上面的评论中所说的对钱是正确的......有更好的方法来完成你在这里的目标

# sql - 将查询结果推入数组

> ID：12232298
> 
> 赞同：1
> 
> 时间：2012-09-01T23:40:51.507
> 
> 标签：sql, bash, shell, psql

我有一个 bash shell 脚本。我有一个 psql 复制命令，它从数据库中捕获了一些数据行。数据库中的数据是我将在 bash 脚本中使用的实际 sql 语句。我将语句放在数据库中，因为它们的长度不同，并且我希望能够动态调用某些语句。

1）我不确定在复制语句中使用什么分隔符。我不能使用逗号或管道，因为它们在来自数据库的数据中。我尝试了几个随机字符，因为它们不在我的数据库中，但副本很合适，只需要一个 ascii 字符。

此外，为了使事情复杂化，我需要为每一行获取 query_name 和 query_string。

这是我目前拥有的。我通过副本获得了所有数据，但现在我只想将数据推送到一个数组中，以便稍后可以循环它：

```
q="copy (select query_name,query_string from query where active=1) 
to stdout delimiter ','" 
statements=$(psql -d ${db_name} -c "${q}")
statements_split=(`echo ${statements//,/ }`)
echo ${statements_split[0]}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T00:37:22.950

在我看来，您实际上想要构建诸如将 query_name 映射到 query_string 的字典（关联数组）之类的东西。`bash`并不是处理复杂数据结构的最佳选择。如果可以的话，我建议使用`Perl`这种任务。

# android - 将 MediaStore.Video.MHi,edia.DURATION 格式化为小时和秒

> ID：12232300
> 
> 赞同：0
> 
> 时间：2012-09-01T23:41:36.400
> 
> 标签：android

我使用 managedQuery 来查询我的设备中的视频。MediaStore.Video.Media.DURATION 返回的毫秒数是使用我编写的函数格式化的。这是作为

```
 Date d = new Date(Long.parseLong(milliseconds));
    DateFormat df = new SimpleDateFormat("hh:mm:ss");
    return df.format(d); 
```

但是从这里返回的格式被返回。我直接将光标返回的值传递给这个。这里有什么帮助吗？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:16:41.657

MediaStore.Video.Media.DURATION 的默认值为 0。当视频复制到 sdcard 时，不会自动计算持续时间。如果应用程序知道，它必须使用有效的持续时间值更新 MediaStore 数据库记录。

# solr - 突出显示 Solr 中引用的查询的问题 - 未返回片段

> ID：12232302
> 
> 赞同：1
> 
> 时间：2012-09-01T23:42:03.077
> 
> 标签：solr, lucene-highlighter

这很好奇。突出显示在所有其他情况下都可以正常工作，但在这种情况下它不会返回任何片段。我的文档如下（fieldType `text_en`）：

> Abu Yahya Suhaib bin Sinan（愿真主喜悦他）报告说：真主的使者（PBUH）说：“信士的情况是多么美妙；他的一切都是好事，这仅适用于信士。如果顺境降临，他向真主表示感谢，这对他有好处；如果逆境降临在他身上，他会耐心地忍受，这对他更好”。[穆斯林]。

我的查询是

```
"wonderful is the case of a believer" 
```

Solr 找到文档返回正常，但是返回值的高亮部分不包含文档的文本。它有一个文档主键字段（像往常一样），但没有比这更深的了。

如果我删除最后一个词，一切正常。如果我从引号中删除最后一个单词并将其放在外面，它会起作用。它甚至可以在引号中使用更长（不同）的字符串。它只是不适合这个！

我该如何开始调试呢？

我在 schema.xml 中没有任何突出显示设置，这里是我作为查询的一部分传递的参数：&hl=true&hl.fl=hadithText&hl.snippets=50&hl.fragsize=2500&hl.mergeContiguous=true&defType=edismax&mm=3 <-1%205<-2&hl.usePhraseHighlighter=true

# python - 如何在 Flask 框架中实现服务器推送？

> ID：12232304
> 
> 赞同：73
> 
> 时间：2012-09-01T23:42:35.277
> 
> 标签：python, redis, flask, juggernaut

我正在尝试在 Flask 微网络框架上构建一个具有服务器推送功能的小型站点，但我不知道是否有可以直接使用的框架。

我使用了[Juggernaut](http://flask.pocoo.org/snippets/80/)，但在当前版本中它似乎无法与[redis-py](https://github.com/andymccurdy/redis-py)一起使用，并且 Juggernaut 最近已被弃用。

有人对我的案子有什么建议吗？

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-09-02T12:40:08.013

看看[Server-Sent Events](http://dev.w3.org/html5/eventsource/)。Server-Sent Events 是一种浏览器 API，可让您保持打开服务器的套接字，订阅更新流。欲了解更多信息，请阅读 Alex MacCaw（Juggernaut 的作者）发布的关于[他为何杀死 juggernaut](http://blog.alexmaccaw.com/killing-a-library)以及为什么在许多情况下更简单的服务器发送事件是比 Websockets 更好的工作工具的帖子。

该协议非常简单。只需将 mimetype 添加`text/event-stream`到您的响应中。浏览器将保持连接打开并监听更新。从服务器发送的事件是一行以换行符开头的文本`data:`。

```
data: this is a simple message
<blank line> 
```

如果您想交换结构化数据，只需将您的数据转储为 json 并通过网络发送 json。

一个优点是您可以在 Flask 中使用 SSE，而无需额外的服务器。github 上有一个简单的[聊天应用程序示例](https://github.com/jkbr/chat)，它使用 redis 作为 pub/sub 后端。

```
def event_stream():
    pubsub = red.pubsub()
    pubsub.subscribe('chat')
    for message in pubsub.listen():
        print message
        yield 'data: %s\n\n' % message['data']

@app.route('/post', methods=['POST'])
def post():
    message = flask.request.form['message']
    user = flask.session.get('user', 'anonymous')
    now = datetime.datetime.now().replace(microsecond=0).time()
    red.publish('chat', u'[%s] %s: %s' % (now.isoformat(), user, message))

@app.route('/stream')
def stream():
    return flask.Response(event_stream(),
                          mimetype="text/event-stream") 
```

您不需要使用 gunicron 来运行示例应用程序。只需确保在运行应用程序时使用线程，否则 SSE 连接将阻塞您的开发服务器：

```
if __name__ == '__main__':
    app.debug = True
    app.run(threaded=True) 
```

在客户端，您只需要一个 Javascript 处理函数，当从服务器推送新消息时将调用该函数。

```
var source = new EventSource('/stream');
source.onmessage = function (event) {
     alert(event.data);
}; 
```

最近的 Firefox、Chrome 和 Safari 浏览器[支持](http://caniuse.com/#feat=eventsource)服务器发送事件。Internet Explorer 尚不支持服务器发送事件，但预计将在版本 10 中支持它们。推荐使用两种 Polyfill 来支持旧版浏览器

*   [事件源.js](https://github.com/remy/polyfills/blob/master/EventSource.js)
*   [jquery.eventsource](https://github.com/rwldrn/jquery.eventsource)

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2018-08-22T14:44:12.033

## Redis 是大材小用：使用服务器发送事件 (SSE)

聚会迟到了（像往常一样），但恕我直言，使用 Redis 可能有点矫枉过正。

只要您使用 Python+Flask，就可以考虑使用[Panisuan Joe Chasinga 的这篇优秀文章](https://medium.com/code-zen/python-generator-and-html-server-sent-events-3cdf14140e56)中描述的生成器函数。它的要点是：

## 在您的客户端 index.html

```
var targetContainer = document.getElementById("target_div");
var eventSource = new EventSource("/stream")
  eventSource.onmessage = function(e) {
  targetContainer.innerHTML = e.data;
};
...
<div id="target_div">Watch this space...</div> 
```

## 在您的 Flask 服务器中：

```
def get_message():
    '''this could be any function that blocks until data is ready'''
    time.sleep(1.0)
    s = time.ctime(time.time())
    return s

@app.route('/')
def root():
    return render_template('index.html')

@app.route('/stream')
def stream():
    def eventStream():
        while True:
            # wait for source data to be available, then push it
            yield 'data: {}\n\n'.format(get_message())
    return Response(eventStream(), mimetype="text/event-stream") 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-04-19T12:36:20.310

[作为@peter-hoffmann 回答](https://stackoverflow.com/a/12236019/141395)的后续，我编写了一个专门用于处理服务器发送事件的 Flask 扩展。它称为[Flask-SSE](https://github.com/singingwolfboy/flask-sse)，[可在 PyPI 上使用](https://pypi.python.org/pypi/Flask-SSE)。要安装它，请运行：

```
$ pip install flask-sse 
```

你可以像这样使用它：

```
from flask import Flask
from flask_sse import sse

app = Flask(__name__)
app.config["REDIS_URL"] = "redis://localhost"
app.register_blueprint(sse, url_prefix='/stream')

@app.route('/send')
def send_message():
    sse.publish({"message": "Hello!"}, type='greeting')
    return "Message sent!" 
```

要从 Javascript 连接到事件流，它的工作方式如下：

```
var source = new EventSource("{{ url_for('sse.stream') }}");
source.addEventListener('greeting', function(event) {
    var data = JSON.parse(event.data);
    // do what you want with this data
}, false); 
```

[文档可在 ReadTheDocs 上找到。](https://flask-sse.readthedocs.org)请注意，您需要一个正在运行的[Redis](http://www.redis.io/)服务器来处理发布/订阅。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-12T18:49:46.210

作为[https://github.com/WolfgangFahl/pyFlaskBootstrap4](https://github.com/WolfgangFahl/pyFlaskBootstrap4)的提交者，我遇到了同样的需求，并为不依赖于 redis 的服务器发送事件创建了一个烧瓶蓝图。

该解决方案建立在过去在这里给出的其他答案的基础上。

[https://github.com/WolfgangFahl/pyFlaskBootstrap4/blob/main/fb4/sse_bp.py](https://github.com/WolfgangFahl/pyFlaskBootstrap4/blob/main/fb4/sse_bp.py)有源代码（另见下面的 sse_bp.py）。

[在https://github.com/WolfgangFahl/pyFlaskBootstrap4/blob/main/tests/test_sse.py](https://github.com/WolfgangFahl/pyFlaskBootstrap4/blob/main/tests/test_sse.py)有单元测试

这个想法是您可以使用不同的模式来创建您的 SSE 流：

*   通过提供一个函数
*   通过提供生成器
*   通过使用 PubSub 帮助程序类
*   通过使用 PubSub 帮助程序类并同时使用 pydispatch。

截至 2021 年 2 月 12 日，这是我想分享的 alpha 代码。请在此处发表评论或作为项目中的问题发表评论。

[http://fb4demo.bitplan.com/events](http://fb4demo.bitplan.com/events)有一个演示，示例使用说明，例如进度条或时间显示：[http ://wiki.bitplan.com/index.php/PyFlaskBootstrap4#Server_Sent_Events](http://wiki.bitplan.com/index.php/PyFlaskBootstrap4#Server_Sent_Events)

**示例客户端 javascript/html 代码**

```
<div id="event_div">Watch this space...</div>
<script>
    function fillContainerFromSSE(id,url) {
        var targetContainer = document.getElementById(id);
        var eventSource = new EventSource(url)
        eventSource.onmessage = function(e) {
            targetContainer.innerHTML = e.data;
        };
    };
    fillContainerFromSSE("event_div","/eventfeed");
</script> 
```

**示例服务器端代码**

```
 def getTimeEvent(self):
        '''
        get the next time stamp
        '''
        time.sleep(1.0)
        s=datetime.utcnow().strftime('%Y-%m-%d %H:%M:%S')
        return s   

def eventFeed(self):
        '''
        create a Server Sent Event Feed
        '''
        sse=self.sseBluePrint
        # stream from the given function
        return sse.streamFunc(self.getTimeEvent) 
```

**sse_bp.py**

```
'''
Created on 2021-02-06
@author: wf
'''
from flask import Blueprint, Response, request, abort,stream_with_context
from queue import Queue
from pydispatch import dispatcher
import logging

class SSE_BluePrint(object):
    '''
    a blueprint for server side events 
    '''
    def __init__(self,app,name:str,template_folder:str=None,debug=False,withContext=False):
        '''
        Constructor
        '''
        self.name=name
        self.debug=debug
        self.withContext=False
        if template_folder is not None:
            self.template_folder=template_folder
        else:
            self.template_folder='templates'    
        self.blueprint=Blueprint(name,__name__,template_folder=self.template_folder)
        self.app=app
        app.register_blueprint(self.blueprint)

        @self.app.route('/sse/<channel>')
        def subscribe(channel):
            def events():
                PubSub.subscribe(channel)
            self.stream(events)

    def streamSSE(self,ssegenerator): 
        '''
        stream the Server Sent Events for the given SSE generator
        '''  
        response=None
        if self.withContext:
            if request.headers.get('accept') == 'text/event-stream':
                response=Response(stream_with_context(ssegenerator), content_type='text/event-stream')
            else:
                response=abort(404)    
        else:
            response= Response(ssegenerator, content_type='text/event-stream')
        return response

    def streamGen(self,gen):
        '''
        stream the results of the given generator
        '''
        ssegen=self.generateSSE(gen)
        return self.streamSSE(ssegen)   

    def streamFunc(self,func,limit=-1):
        '''
        stream a generator based on the given function
        Args:
            func: the function to convert to a generator
            limit (int): optional limit of how often the generator should be applied - 1 for endless
        Returns:
            an SSE Response stream
        '''
        gen=self.generate(func,limit)
        return self.streamGen(gen)

    def generate(self,func,limit=-1):
        '''
        create a SSE generator from a given function
        Args:
            func: the function to convert to a generator
            limit (int): optional limit of how often the generator should be applied - 1 for endless
        Returns:
            a generator for the function
        '''   
        count=0
        while limit==-1 or count<limit:
            # wait for source data to be available, then push it
            count+=1
            result=func()
            yield result

    def generateSSE(self,gen):
        for result in gen:
            yield 'data: {}\n\n'.format(result)

    def enableDebug(self,debug:bool):
        '''
        set my debugging

        Args:
            debug(bool): True if debugging should be switched on
        '''
        self.debug=debug
        if self.debug:
            logging.basicConfig(level=logging.DEBUG, format='%(asctime)s.%(msecs)03d %(levelname)s:\t%(message)s', datefmt='%Y-%m-%d %H:%M:%S')

    def publish(self, message:str, channel:str='sse', debug=False):
        """
        Publish data as a server-sent event.

        Args:
            message(str): the message to send
            channel(str): If you want to direct different events to different
                clients, you may specify a channel for this event to go to.
                Only clients listening to the same channel will receive this event.
                Defaults to "sse".
            debug(bool): if True  enable debugging
        """
        return PubSub.publish(channel=channel, message=message,debug=debug)

    def subscribe(self,channel,limit=-1,debug=False):
        def stream():
            for message in PubSub.subscribe(channel,limit,debug=debug):
                yield str(message)

        return self.streamGen(stream)

class PubSub:
    '''
    redis pubsub duck replacement
    '''
    pubSubByChannel={}

    def __init__(self,channel:str='sse',maxsize:int=15, debug=False,dispatch=False):
        '''
        Args:
            channel(string): the channel name
            maxsize(int): the maximum size of the queue
            debug(bool): whether debugging should be switched on
            dispatch(bool): if true use the pydispatch library - otherwise only a queue
        '''
        self.channel=channel
        self.queue=Queue(maxsize=maxsize)
        self.debug=debug
        self.receiveCount=0
        self.dispatch=False
        if dispatch:
            dispatcher.connect(self.receive,signal=channel,sender=dispatcher.Any)

    @staticmethod
    def reinit():
        '''
        reinitialize the pubSubByChannel dict
        '''
        PubSub.pubSubByChannel={}

    @staticmethod
    def forChannel(channel):    
        '''
        return a PubSub for the given channel

        Args:
            channel(str): the id of the channel
        Returns:
            PubSub: the PubSub for the given channel
        '''
        if channel in PubSub.pubSubByChannel:
            pubsub=PubSub.pubSubByChannel[channel]
        else:
            pubsub=PubSub(channel)
            PubSub.pubSubByChannel[channel]=pubsub
        return pubsub

    @staticmethod    
    def publish(channel:str,message:str,debug=False):
        '''
        publish a message via the given channel

        Args:
            channel(str): the id of the channel to use
            message(str): the message to publish/send
        Returns:
            PubSub: the pub sub for the channel

        '''
        pubsub=PubSub.forChannel(channel)
        pubsub.debug=debug
        pubsub.send(message)
        return pubsub

    @staticmethod    
    def subscribe(channel,limit=-1,debug=False): 
        '''
        subscribe to the given channel

        Args:
            channel(str): the id of the channel to use
            limit(int): limit the maximum amount of messages to be received        
            debug(bool): if True debugging info is printed
        '''  
        pubsub=PubSub.forChannel(channel)
        pubsub.debug=debug
        return pubsub.listen(limit)

    def send(self,message):
        '''
        send the given message
        '''
        sender=object();
        if self.dispatch:
            dispatcher.send(signal=self.channel,sender=sender,msg=message)
        else:
            self.receive(sender,message)

    def receive(self,sender,message):
        '''
        receive a message
        '''
        if sender is not None:
            self.receiveCount+=1;
            if self.debug:
                logging.debug("received %d:%s" % (self.receiveCount,message))
            self.queue.put(message)

    def listen(self,limit=-1):
        '''
        listen to my channel

        this is a generator for the queue content of received messages

        Args:
            limit(int): limit the maximum amount of messages to be received

        Return:
            generator: received messages to be yielded
        '''
        if limit>0 and self.receiveCount>limit:
            return
        yield self.queue.get()

    def unsubscribe(self):
        '''
        unsubscribe me
        '''
        if self.dispatch:
            dispatcher.disconnect(self.receive, signal=self.channel)
        pass 
```

# javascript - Ajax 从数据库中连续拉取

> ID：12232305
> 
> 赞同：1
> 
> 时间：2012-09-01T23:43:01.640
> 
> 标签：javascript, ajax, jquery

我实际上刚刚开始使用 Ajax 进行编程，但无法让它工作。

这是我到目前为止所拥有的：

```
var oldAction = '';

function updateCheck() {
  $.ajax({
    url: 'check_status.php',
    success: function (data) {
      if (data.length != oldAction) {
        if (data.length == '4') {
          playSong();
        } else {
          pauseSong();
        }
      }

      oldAction = data.length;
    }
  });
}

setInterval('updateCheck();', 1000); 
```

有谁知道为什么这不起作用？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T23:46:36.917

当然。 `length()`正在寻找一个整数，但您正在将它与一个字符串进行比较。

如果`oldAction`真的需要是一个字符串，那么你需要做这样的事情：

```
if (data.length != Number(oldAction)) {
  if (data.length == 4) {
    playSong();
  } else {
    pauseSong();
  }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T23:55:21.833

试试这个：

```
function updateCheck() {
  var
    oldAction = 0,
    callAjax = function () {
      $.ajax({
        url: 'check_status.php',
        success: function (data) {
          if (data.length != oldAction) {
            (data.length == 4) ? playSong() : pauseSong();
          }

          oldAction = data.length;
        }
      });
    };

  setInterval(callAjax, 1000);
}

updateCheck();

​ 
```

# javascript - 将特定元素放入变量

> ID：12232307
> 
> 赞同：0
> 
> 时间：2012-09-01T23:43:10.207
> 
> 标签：javascript, html

如何通过 javascript 将文本输入的特定元素获取到变量中，换句话说，以下面的示例为例

```
 <form id="123">

        <input type="text" id="supply_qty" />

     <input type="submit" name="submit" id="123" />
  </form> 
```

单击提交按钮时，如何将文本输入中的元素放入变量中，我遇到的问题是我有上面代码的多个实例，有很多文本输入，所以我只想获取特定的元素点击提交按钮。希望你能明白我的意思。我需要通过 JavaScript 而不是 php 等完成此操作的原因是我稍后想使用 ajax，但目前我只需要变量。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T23:48:58.610

最简单的方法是给`id`元素和用户`getElementById()`方法来获取变量上的元素。*就像你现在正在做的一样*

简单示例：

```
var button = document.getElementyById("123");
button.onclick = function() {
    var text = document.getElementById('supply_qty'); //now you got your element in varaiblle
}; 
```

使用 jQuery 对您的标记稍作更改。我只是要添加一些类。

```
 <form>
        <input type="text" class="textbox" />
        <input type="submit" class="submit" name="submit" />
  </form> 
```

然后

```
$(".submit").click(function() {
    var txtbox = $(this).parent("form").children(".textbox")[0];
}); 
```

或者，最好绑定到表单的提交处理程序，在这种情况下，为表单提供一个公共类。

```
 <form class="tinyforms">
        <input type="text" class="textbox" />
        <input type="submit" class="submit" name="submit" />
   </form> 
```

然后

```
$('.tinyforms').submit(function() {
    var txtbox = $(this).children(".textbox")[0];
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T00:25:32.243

如果你接受使用 jQuery，你可以这样做：

DOM

```
<form class="form" action="false">
    <input type="text" value="some input" name="textInput" />
    <input type="text" value="some text" name="textInput2" />
    <input type="submit" class="sumbit" value="Send" />
    <div id="results"></div>
</form>​​​​​​​​​​​​​​​​​​​ 
```

和 JavaScript

```
$(".form").submit( function(){
    var inputs = $(this).serializeArray();
    $.each(inputs , function(i, input){
        $("#results").append(input.value + "<br />");
    });
    return false;
} );​ 
```

编辑：更新代码和小提琴：http: [//jsfiddle.net/65Xtp/4/](http://jsfiddle.net/65Xtp/4/)

# mysql - MySQL - 棘手的 Many2Many 查询

> ID：12232310
> 
> 赞同：3
> 
> 时间：2012-09-01T23:44:21.237
> 
> 标签：mysql, hibernate, doctrine-orm

我有具有以下简化架构的多个属性的实体：

实体：

*   ID

属性：

*   ID
*   姓名

实体属性：

*   entity_id
*   属性ID

如果我想检索具有名为“男性”的属性的记录，我可以这样写：

```
SELECT * FROM Entity
INNER JOIN entity_attribute ON ...
INNER JOIN Attribute ON ...
WHERE Attribute.name = 'male' 
```

如果我想检索属性名为“男”或“老师”的记录，我可以这样写：

```
SELECT * FROM Entity
INNER JOIN entity_attribute ON ...
INNER JOIN Attribute ON ...
WHERE Attribute.name = 'male'  OR Attribute.name = 'teacher' 
```

如果我想检索属性名为“男”和属性名为“老师”的记录，我可以这样写：

```
SELECT *, COUNT(*) AS cnt FROM Entity
INNER JOIN entity_attribute ON ...
INNER JOIN Attribute ON ...
WHERE Attribute.name = 'male'  OR Attribute.name = 'teacher'
HAVING cnt = 2 
```

现在是棘手的部分。我的查询需要包含`and`并`or`组合在多对多查询中。

### 例子：

哪些实体是[（具有属性'male'）和（具有属性'teacher'或具有属性'gardener'）和（具有属性'likes_apple'或具有属性'likes_orange'或具有属性' likes_cherry')]。

使用子查询可能是一种解决方案，但据我所知，这会很慢（~10000 个实体，~30 个属性，~15000 个实体属性）。什么可能是一个快速的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T23:58:10.147

好吧，你可以对它们进行 3 个查询和一个联合，这将是最快（最简单）的方式

如果你想要一个快速的方法......使用exists与子查询，exists的想法是它在第一个匹配的项目上返回true......所以你可以避免这种方式内部连接和多个where子句

# css - 创建一个缩放到浏览器高度但具有设定宽度的 svg

> ID：12232311
> 
> 赞同：6
> 
> 时间：2012-09-01T23:44:26.880
> 
> 标签：css, html, svg, background-image

我试图在 illustrator 中创建一个 svg 并将其用作背景图像以填充页面的顶部和底部，但仍位于 950px 宽的 div 内，并且我遇到了无穷无尽的麻烦。

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
 width="950px" height="522.785px" viewBox="0 0 950 522.785" enable-background="new 0 0 950 522.785" xml:space="preserve">
<path fill-rule="evenodd" clip-rule="evenodd" d="M-1.076-16.544v560h45.512C31.152,180.379-1.076-16.544-1.076-16.544z"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M951,543.456v-560h-45.512C936.375,205.063,951,543.456,951,543.456z"/>
</svg> 
```

这是我的 svg，你可以看到插画家给了它宽度和高度元素。我删除了这些，所以我可以将它们设置在 css 中：

```
#middle{
                    width: 950px;
                    margin: 0px;
                    height: 100%;
                    float: left;
                    display: block;
                    background: url(../images/l.svg) no-repeat left top #00aeef;                    
} 
```

我尝试了各种不同的组合，从 svg 中删除大小并在 css 中添加样式，例如：

```
background-size: cover;
background-size: 950px cover;
background-size: 100% 100%;
background-size: contain; 
```

但我所做的一切似乎都不起作用。有任何想法吗？可能有一些我对 svg 不了解的基本内容？当我可以让它显示任何东西时，行为似乎是它要么完全设置大小，要么设置大小，然后当我缩小窗口时，它会缩小宽度并保持纵横比。

它应该看起来像这样，无论窗口多大：

![两边的黑色曲线是蓝色元素内部的形状，宽度为 950px](../Images/ed25db2fa2b07870d8fdad01abd9a116.png)

但是当我使窗口高度变大时，它的侧面消失了，这是使用

```
background-size: cover; 
```

在css中，svg中没有尺寸。

![右边消失了](../Images/d689a291d685cf642bbc17de39a05307.png)

当我像这样添加设置宽度时：

```
background-size: 950px cover; 
```

它显示如下：

![添加设置宽度](../Images/44ccf941a25825ac7a1ae26fd8cfc3ae.png)

如果我让窗口变小，这样做：

![什么？](../Images/5ab5ae8a852bcf7d226a77c7fe4a4735.png) 这尤其令人讨厌。

***编辑***

其余的 css 和 HTML 看起来像这样

CSS

```
/* Main Containers */
.center{
                    margin: 0px auto;
                    width: 1200px;
                    height: 100%;
}
#left{
                    width: 150px;
                    height: 100%;
                    display: block;
                    float: left;
                    background: #000000;
}
#middle{
                    width: 950px;
                    margin: 0px;
                    height: 100%;
                    float: left;
                    display: block;
                    background: url(../images/l.svg) no-repeat left top #00aeef;
                    background-size: cover;

}
#right{
                    width: 100px;
                    height: 100%;
                    display: block;
                    float: left;
                    background: #000000;
} 
```

HTML

```
<body>
    <div class="center">

        <div id="left">
            <!-- Header -->

            <!-- END Header -->

        </div>

        <!-- Nav -->
        <div id="nav">

        </div>
        <!-- END Nav -->

        <div id="middle">

        </div>

        <div id="right">

        </div>
        <!-- Footer -->

        <!-- END Footer -->

    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T02:09:33.533

找到了我的问题的解决方案

使用

```
preserveAspectRatio="none" 
```

在 svg 文件中

像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
viewBox="0 0 950 522.785" enable-background="new 0 0 950 522.785" preserveAspectRatio="none" >
<path fill-rule="evenodd" clip-rule="evenodd" d="M-1.076-16.544v560h45.512C31.152,180.379-1.076-16.544-1.076-16.544z"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M951,543.456v-560h-45.512C936.375,205.063,951,543.456,951,543.456z"/>
</svg> 
```

尺寸已完全从 svg 中删除。不要删除 viewBox 或 enableBackground 属性——这些很重要。

像这样的CSS：

```
#middle{
                    width: 950px;
                    margin: 0px;
                    height: 100%;
                    float: left;
                    display: block;
                    background: url(../images/l.svg) no-repeat left top #00aeef;
                    background-size: 100% 100%;                 
} 
```

*** 这是结果 ***

![全屏](../Images/2129f8f07e5bf9a5bf8ff3557d485011.png)

大窗户

![小屏幕](../Images/060c96272677032b8ed2f5b1db7953b0.png)

小窗户

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T00:05:13.623

使用`max-width`CSS 属性。试试这个：

```
#middle{
                    max-width: 950px;
                    margin: 0px;
                    height: 100%;
                    float: left;
                    display: block;
                    background: url(../images/l.svg) no-repeat left top #00aeef;   
                    background-size: 950px 100%;                 
} 
```

# javascript - JS 中的老虎机 - 堆栈调用大小超过

> ID：12232316
> 
> 赞同：1
> 
> 时间：2012-09-01T23:46:13.447
> 
> 标签：javascript

我正在尝试制作一个基本（非动画）老虎机，但堆栈大小出现错误。

我希望有人可以解释原因是什么=/

我的错误：

```
Uncaught RangeError: Maximum call stack size exceeded 
```

代码：

```
 window.requestAnimFrame = (function(){
      return  window.requestAnimationFrame       || 
              window.webkitRequestAnimationFrame || 
              window.mozRequestAnimationFrame    || 
              window.oRequestAnimationFrame      || 
              window.msRequestAnimationFrame     || 
              function( callback,  element){
                window.setTimeout(callback, 1000 / 60);
              };
    })();
var img_array = new Array('fire','life','lightning','rain','snow','sound','sun');

function roll(start_time){
var seconds_passed = new Date().getTime() / 1000 - start_time ;

if(seconds_passed < 3){
    slot = 1;
    while(slot < 4){
        randno = Math.floor(Math.random()*img_array.length);
        document.getElementById("slot"+slot).innerHTML = '<img src="'+img_array[randno]+'.png"/>';
        slot++;
        }
    requestAnimFrame(roll(start_time));     
    } else {
    document.getElementById("start").innerHTML = 'Roll The Slots Again?';
    document.getElementById("start").onclick = function(){start(); };
    }
    return false;
}

function start(){
start_time = new Date().getTime() / 1000;
document.getElementById("start").innerHTML = 'Processing......';
roll(start_time);
}

window.onload = function(){
document.getElementById("start").innerHTML = 'Roll The Slots';
document.getElementById("start").onclick = function(){start(); };
} 
```

我的错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T23:52:20.730

这只是`roll`递归调用三秒钟，这将超过最大调用堆栈大小：

```
requestAnimFrame(roll(start_time)); 
```

你可能的意思是：

```
requestAnimFrame(function() {
    roll(start_time);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T23:52:11.020

您正在进行没有保护表达式的递归调用。

`function roll(start_time)`在块结束后立即调用`roll`（作为 requestAnimFrame 的 value 参数） 。`while()`

# erlang - 位串长度

> ID：12232320
> 
> 赞同：2
> 
> 时间：2012-09-01T23:47:34.733
> 
> 标签：erlang, bitstring

我需要位串的长度。我为它创建了这样的功能：

```
len( << Bitstr/bitstring >> ) ->
        len( Bitstr, 0 ).

len( << _X, Tail/bitstring >>, Len ) ->
        len( Tail, Len + 8 );
len( << _X:7, Tail/bitstring >>, Len ) ->
        len( Tail, Len + 7 );
len( << _X:6, Tail/bitstring >>, Len ) ->
        len( Tail, Len + 6 );
len( << _X:5, Tail/bitstring >>, Len ) ->
        len( Tail, Len + 5 );
len( << _X:4, Tail/bitstring >>, Len ) ->
        len( Tail, Len + 4 );
len( << _X:3, Tail/bitstring >>, Len ) ->
        len( Tail, Len + 3 );
len( << _X:2, Tail/bitstring >>, Len ) ->
        len( Tail, Len + 2 );
len( << _X:1, Tail/bitstring >>, Len ) ->
        len( Tail, Len + 1 );
len( <<>>, Len ) ->
        Len. 
```

但是，也许有更优化的方法来获取位串的长度？也许一些BIF？（我实际上已经搜索过它，但没有找到）。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T02:19:27.437

使用该[`erlang:bit_size/1`](http://www.erlang.org/doc/man/erlang.html#bit_size-1)功能。

# zend-framework - zend：参数冲突

> ID：12232321
> 
> 赞同：5
> 
> 时间：2012-09-01T23:47:39.483
> 
> 标签：zend-framework, parameter-passing, collision

我想知道为什么从来没有人问过这个问题。

控制器类中的每个 zend Action 函数都有 3 个参数，即“模块”、“控制器”和“动作”。

当我从表单或 url 中获取名为“action”的参数时会发生什么，例如“?action=edit”？

我对其进行了测试：动作从路由器中保存其价值，而不是“编辑”。

```
public function someAction() {
    $params = $this->getRequest()->getParams();
... 
```

如果必须，我如何传递名为“action”的参数？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T00:39:03.507

默认路由是`Zend_Controller_Router_Route_Module`使用模块、控制器和操作的默认键：

```
protected $_moduleKey     = 'module';
protected $_controllerKey = 'controller';
protected $_actionKey     = 'action';

// ...

/**
 * Set request keys based on values in request object
 *
 * @return void
 */
protected function _setRequestKeys()
{
    if (null !== $this->_request) {
        $this->_moduleKey     = $this->_request->getModuleKey();
        $this->_controllerKey = $this->_request->getControllerKey();
        $this->_actionKey     = $this->_request->getActionKey();
    }

    if (null !== $this->_dispatcher) {
        $this->_defaults += array(
            $this->_controllerKey => $this->_dispatcher->getDefaultControllerName(),
            $this->_actionKey     => $this->_dispatcher->getDefaultAction(),
            $this->_moduleKey     => $this->_dispatcher->getDefaultModule()
        );
    }

    $this->_keysSet = true;
}

/**
 * Matches a user submitted path. Assigns and returns an array of variables
 * on a successful match.
 *
 * If a request object is registered, it uses its setModuleName(),
 * setControllerName(), and setActionName() accessors to set those values.
 * Always returns the values as an array.
 *
 * @param string $path Path used to match against this routing map
 * @return array An array of assigned values or a false on a mismatch
 */
public function match($path, $partial = false)
{
    $this->_setRequestKeys();

    $values = array();
    $params = array();

    if (!$partial) {
        $path = trim($path, self::URI_DELIMITER);
    } else {
        $matchedPath = $path;
    }

    if ($path != '') {
        $path = explode(self::URI_DELIMITER, $path);

        if ($this->_dispatcher && $this->_dispatcher->isValidModule($path[0])) {
            $values[$this->_moduleKey] = array_shift($path);
            $this->_moduleValid = true;
        }

        if (count($path) && !empty($path[0])) {
            $values[$this->_controllerKey] = array_shift($path);
        }

        if (count($path) && !empty($path[0])) {
            $values[$this->_actionKey] = array_shift($path);
        }

        if ($numSegs = count($path)) {
            for ($i = 0; $i < $numSegs; $i = $i + 2) {
                $key = urldecode($path[$i]);
                $val = isset($path[$i + 1]) ? urldecode($path[$i + 1]) : null;
                $params[$key] = (isset($params[$key]) ? (array_merge((array) $params[$key], array($val))): $val);
            }
        }
    }

    if ($partial) {
        $this->setMatchedPath($matchedPath);
    }

    $this->_values = $values + $params;

    return $this->_values + $this->_defaults;
} 
```

可以看到，默认模块路由有默认的 mvc 参数键，但是，如果请求对象存在，它将使用请求对象设置的键，我们可以修改这些键。

例如在你的引导程序中：

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{
    protected function _initRequestKeys()
    {
        $this->bootstrap('frontcontroller');
        $frontController = $this->getResource('frontcontroller');
        /* @var $frontController Zend_Controller_Front */

        $request = new Zend_Controller_Request_Http();

        // change action key
        $request->setActionKey("new_action_key");

        // change module
        $request->setModuleKey("new_module_key");

        // change controller
        $request->setControllerKey("new_controller_key");

        // don't forget to set the configured request
        // object to the front controller
        $frontController->setRequest($request);
    }
} 
```

现在您可以使用*模块*、*控制器*和*动作*作为`$_GET`参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T06:35:38.430

*经过一些测试后，您如何通过关键“动作”*似乎很重要。

如果您尝试传递一个名为*“action”*的参数，`$this->_request->getParams()`您将获得控制器操作值键对。

如果您从表单中传递*“action”*键，`$form->getValues()`您将从名为*“action”*的表单元素中检索值。

与许多事情一样，您的用例决定了您需要如何处理这种情况。

祝你好运。

# c# - InkCanvas 水晶报表

> ID：12232326
> 
> 赞同：2
> 
> 时间：2012-09-01T23:48:20.527
> 
> 标签：c#, wpf, mvvm, crystal-reports, inkcanvas

我在.net framework 4.0 上有一个WPF/MVVM 应用程序，使用水晶报告13。在其中一个窗口上，我使用inkcanvas 控件来捕获签名。我需要将其保存在 sql server 中并显示在水晶报告中。

这样做的最佳方法是什么？我只能保存 strokecollection 并将其显示在 inkcanvas 上，但我还需要在水晶报告上重现签名。到目前为止，我已经尝试将笔画转换为 bmp，但报告中显示为黑色。

我可以尝试其他控件吗？

# objective-c - NSString 到静态整数？

> ID：12232336
> 
> 赞同：0
> 
> 时间：2012-09-01T23:51:26.123
> 
> 标签：objective-c, ios, xcode, cocoa-touch

好的，问题来了，我有三个`NSString`带有 int 值的 s，当视图加载时需要运行：

```
NSCalendar* gregorian = [[NSCalendar alloc]
      initWithCalendarIdentifier:NSGregorianCalendar];

unsigned int uintFlags = NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit;
NSDateComponents* differenceComponents = [gregorian components:uintFlags
                    fromDate:quitDate toDate:nowDate options:0];

NSString *hours1 = [NSString stringWithFormat:@"%d",[differenceComponents hour]];
hours = hours1;

NSString *minutes1 = [NSString stringWithFormat:@"%d",[differenceComponents minute]];
minutes = minutes1;

NSString *seconds1 = [NSString stringWithFormat:@"%d",[differenceComponents second]];
seconds = seconds1; 
```

那些`NSString`现在有 int 值，所以我不能将 int 设置为 static 任何建议？我想这样做，所以我不会...

```
- (void)updater:(id)sender {
    [NSTimer scheduledTimerWithTimeInterval:1.0f target:self
        selector:@selector(timer:) userInfo:nil repeats:YES];
}
- (void)timer:(id)sender {
    // I get error right here that says (initialize 
    // element is not a compile-contstant)
    static int hour = hours.intValue;
    static int minute = minutes.intValue;
    static int second = seconds.intValue;

    NSString *sec = [NSString stringWithFormat:@"%i",second];
    if (seconds1 < 10) {
        sec = [NSString stringWithFormat:@"0%i",second];
    }
    NSString *min = [NSString stringWithFormat:@"%i",minute];
    if (minutes1 < 10) {
        min = [NSString stringWithFormat:@"0%i",minute];
    }
    NSString *hours5 = [NSString stringWithFormat:@"%i",hour];
    NSString *timerTime = [NSString stringWithFormat:@"%@:%@:%@" ,hours5 ,min ,sec];
    label1.text = timerTime;
    seconds1 ++;
    if (seconds1 > 59) {
        seconds1 = 00;
        minutes1 ++;
    }
    if (minutes1 > 59) {
        minutes1 = 00;
        hours1 ++;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T01:28:37.697

为什么要使用`static`？我不明白制作这些变量的意义`static`。为什么还要使用`NSString`来封装你的`int`价值观？！？？？为什么不直接存储 int 值？

实际上，您不应该在每次执行该方法时自己添加秒数`timer`，因为`NSTimer`可能会漂移，所以在一段时间后（相当长的时间，当然，但仍然如此），您可以让这种漂移影响“秒”部分。最好每次重新计算 timeInterval。`%02i`当您可以使用格式时，为什么还要自己添加前导“0” ？

实际上，您的代码可以像这样简单明了：

```
-(void)timer:(NSTimer*)sender
{
    NSTimeInterval elapsedTime = -[quitDate timeIntervalSinceNow];
    label1.text = [NSString stringWithFormat:@"%02i:%02i:%02i",
                    (int)elapsedTime/3600,
                   ((int)elapsedTime/60  ) % 60,
                   ((int)elapsedTime     ) % 60];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T00:04:14.930

`static`变量不能是“动态的”。编译器应该知道在程序运行之前分配的值是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T01:06:09.353

只需将它们移动到所述视图控制器的实例变量，并在初始化时设置/计算它们的值。完毕。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T02:12:48.610

您希望这些整数是静态的原因让我难以理解，仍然有一个技巧可以让您拥有可以在运行时（动态）初始化的静态（全局）数据。只需创建一个管理它的类方法：

```
@interface MyClasss : NSObject

+ (NSDateComponents *)dateComponents;
+ (NSInteger)hours;
+ (NSInteger)minutes;
+ (NSInteger)seconds;

@end

@implementation MyClass

+ (NSDateComponents *)dateComponents
{
    NSCalendar* gregorian = [[NSCalendar alloc]
    initWithCalendarIdentifier:NSGregorianCalendar];

    unsigned int uintFlags = NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit |     NSSecondCalendarUnit;
    NSDateComponents* differenceComponents = [gregorian components:uintFlags
                    fromDate:quitDate toDate:nowDate options:0];
}

+ (NSInteger)hours
{
    NSString *hoursText = [NSString stringWithFormat:@"%d",[self dateComponents hour]];
    return hoursText.integerValue;
}

+ (NSInteger)minutes
{
    NSString *minutesText = [NSString stringWithFormat:@"%d",[self dateComponents minute]];
    return minutesText.integerValue;
}

+ (NSInteger)seconds
{
    NSString *secondsText = [NSString stringWithFormat:@"%d",[self dateComponents second]];
    return secondsText.integerValue;
}

@end 
```

现在您可以随意使用静态数据，无需实例化对象即可访问：

```
NSInteger hours = [MyClass hours]; 
```

# javascript - 在 AngularJS 中，我可以在 ngView 之外的 ngSwitch 中使用当前路由吗

> ID：12232339
> 
> 赞同：6
> 
> 时间：2012-09-01T23:51:48.680
> 
> 标签：javascript, angularjs

我正在尝试根据当前视图更改页眉。标头在 ngView 之外。这是可能的还是我需要将标题放在视图中？

我的代码与此类似：

```
<div id="header">
    <div ng-switch on="pagename">
        <div ng-switch-when="home">Welcome!</div>
        <div ng-switch-when="product-list">Our products</div>
        <div ng-switch-when="contact">Contact us</div>
    </div>
    (a lot of unrelated code goes here)    
</div>

<div id="content>
    <div ng-view></div>
</div> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T15:15:15.980

Give each route a name when you are defining it. Then inject $route into the controller, then have the controller publish it into the current scope. You can then bind the ng-switch to $route.current.name

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-02T02:43:14.560

您可以注入`$location`服务并检查`$location.path()`. [http://docs.angularjs.org/api/ng.$location](http://docs.angularjs.org/api/ng.%24location)

JS：

```
function Ctrl($scope, $location) {
  $scope.pagename = function() { return $location.path(); };
}; 
```

HTML：

```
<div id="header">
  <div ng-switch on="pagename()">
    <div ng-switch-when="/home">Welcome!</div>
    <div ng-switch-when="/product-list">Our products</div>
    <div ng-switch-when="/contact">Contact us</div>
  </div>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-11T19:28:26.773

解决这个问题的一个很好的方法是在你的控制器中注入 $route 然后用它来获取当前的路由名称。

```
app.controller('YourController', function($scope, $route){
    $scope.pagename = $route.current.$$route.name;
}); 
```

你必须像下面这样命名你的路线：

```
app.config(['$routeProvider',
  function($routeProvider) {
    $routeProvider.
      when('/product-list', {
        templateUrl: 'views/product-list.html',
        controller: 'ProductsController',
        name: 'product-list'
      }).
      when('/home', {
        templateUrl: 'views/home.html',
        controller: 'HomeController',
        name: 'home'
      }).
      otherwise({
        redirectTo: '/'
      });
  }]); 
```

因此，当您加载路由时，控制器将读取当前路由名称并将其传递给您的 pagename 变量中的视图。然后视图将拾取它并根据需要显示正确的视图。

希望能帮助到你 ：）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-02T01:07:46.107

似乎它将是标题和内容的不同控制器。控制器之间通信的最佳方式是服务。另一种方式 - 事件。[请参阅 Vojta 答案](https://stackoverflow.com/questions/9293423/can-one-controller-call-another-in-angularjs/9407953#9407953)。

# java - 成功更改内容视图的方法？

> ID：12232340
> 
> 赞同：0
> 
> 时间：2012-09-01T23:52:05.560
> 
> 标签：java, android, actionbarsherlock

我有一个使用这个[RibbonMenu](https://github.com/darvds/RibbonMenu)的应用程序，我想知道是否可以使用菜单项来更改 Activity 的 ContentView 而不是另一个 Activity 来减小我的应用程序的大小。我已经尝试过这样做，它完美地改变了内容视图，但我无法按下主页按钮。我在这里有点着急，但如果有人要求，我会尝试发布代码。谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T00:27:33.193

菜单项是 UI 元素。它自己什么也不做。但是，它可以在您的代码中触发更多操作。至于更改活动布局，是的，您可以随时调用`setContentView()`。

> 减小我的应用程序的大小

这不是优化的方式

# javascript - 动态正则表达式组操作

> ID：12232342
> 
> 赞同：0
> 
> 时间：2012-09-01T23:52:18.897
> 
> 标签：javascript, regex, replace

```
node.data =
  node.data.replace(/((?:\d+\.?\d+?)|(?:\d{1,3}(?:\,\d{3})+)) *([a-zA-Z]+)/,
    function(a,b,c) {
      return value[c] ? a+" (("+(b.replace(',',"") * value[c]).toFixed(2) +
      " "+ names[c]+"))" : a;
    }
  ); 
```

如您所见，我的函数捕获了正则表达式组，必要时对其进行操作并返回它们以进行替换。

我想做的是能够动态地操作它们，所以如果我在字符串中有多个匹配项，我将能够从数组或其他东西中获取它们（比如代替**function(a,b,c)**之类的**函数（数组[]）**）。

任何建议如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T23:54:13.987

使用`arguments`对象。`arguments[0]`是第一个参数，`arguments[1]`是第二个参数，依此类推。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T00:23:50.130

好吧，我确实想通了..这是表达式中缺少的'g'..现在它根据需要多次执行该函数。

/((?:\d+.?\d+?)|(?:\d{1,3}(?:\,\d{3})+)) *([a-zA-Z]+)/ **G**

# java - 如何根据日期有效地触发Java中的事件？

> ID：12232344
> 
> 赞同：2
> 
> 时间：2012-09-01T23:53:24.700
> 
> 标签：java, date, triggers, calendar, listener

我正在为一家公司构建一个相对复杂的应用程序，该应用程序跟踪多个对象并根据对象的年龄或其中包含的预设日期触发事件。

例如：

对象 object_A 包含一个“更新日期”。当更新日期和系统日期重合时，应用程序需要运行特定的例程。

我的问题是：既然会有成千上万个这样的对象，那么跟踪所有这些对象并在各自的日期和时间触发各自的例程的最有效方法是什么？

值得一提的是，我使用 Calendar 对象来描述这些日期（尽管它们可以很容易地转换为 Date 对象，所以这并不完全相关）。

我将不胜感激任何指向正确方向的...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T00:47:02.087

[Quartz](http://quartz-scheduler.org/)是一个用于健壮/复杂任务调度的优秀库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T00:04:31.110

我会鼓励你（因为你说你正在构建应用程序）重新考虑责任。我认为维持该更新日期不应该是客体责任。我的意思是你可以这样做，并且有一个代理会定期访问这些项目，看看它的更新日期是否是今天。

但是，如果您认为作为包含续订日期表的外部代理，它会更有效，因为：

1.  具有相同更新日期的所有对象的触发器将同时触发。
2.  将集中管理检查逻辑
3.  如果折叠到同一日期，则存储续订日期的成本（空间）将降低。

这是一个大图景，但希望它能发挥作用。

# javascript - 在 HTML Body 中运行随机 javascript

> ID：12232346
> 
> 赞同：-1
> 
> 时间：2012-09-01T23:53:53.763
> 
> 标签：javascript, html

我有两个脚本：

```
<script type='text/javascript' src='http://goldenads.ir/showb.php?text=0&uid=230&c=2&mod=h&type=h' ></script> 
```

和

```
<script type="text/javascript" src="http://bermodashop.com/adcode/run/banner/h/horizontal/1/0/0/null//ref:2066"></script> 
```

我想将它们放入 a`<div>`并在刷新 HTML 文档时随机运行它们。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T00:07:18.810

您可以使用

```
document.write(Math.floor(Math.random()*2)
    ?'<table border="0" align="center"><tr><td width="468px"><a href="http://www.goldenads.ir/red.php?uid=230&pid=97&bid=26" target="_blank" ><img border="none" src="http://www.goldenads.ir/uploads/bnr/1319812021.gif" width="468" height="60" /></a></td><td width="468px"><a href="http://www.goldenads.ir/red.php?uid=230&pid=105&bid=49" target="_blank" ><img border="none" src="http://www.goldenads.ir/uploads/bnr/1319819372.gif" width="468" height="60" /></a></td></tr>   <tr><td style="font: 11px tahoma;" colspan="2"><center><a href="" target="_blank" ></a></center></td></tr></table>'
    :'<div align="center" dir="rtl"><a href="http://bermodashop.com/ad/click/1/90/ref:2066" target="_blank"><img src="http://bermodashop.com/upload/ad_90.gif" /></a></div>'
); 
```

`Math.floor(Math.random()*2)``0`是和之间的随机整数`1`。

但是你应该避免使用`document.write`.

如果[http://goldenads.ir/showb.php?text=0&uid=230&c=2&mod=h&type=h](http://goldenads.ir/showb.php?text=0&uid=230&c=2&mod=h&type=h)和[http://bermodashop.com/adcode/run/banner/h/horizo​​ntal /1/0/0/ null//ref:2066](http://bermodashop.com/adcode/run/banner/h/horizontal/1/0/0/null//ref:2066)是 JavaSCript 文件，您应该将它们作为`text/javascript`. 在浏览器中打开链接，您将看到如果将它们作为`text/html`.

**编辑：**

如果脚本中包含的数据是可变的，那么您可以使用

```
var s=document.createElement('script');
s.type="text/javascript";
s.src=Math.floor(Math.random()*2)?"http://goldenads.ir/showb.php?text=0&uid=230&c=2&mod=h&type=h":"http://bermodashop.com/adcode/run/banner/h/horizontal/1/0/0/null//ref:2066";
document.body.appendChild(s); 
```

**编辑2：**

上面的代码似乎不起作用，因为`document.write`它有问题。然后，您可以使用另一个`document.write`：

```
document.write('<script type="text/javascript" src="'+(Math.floor(Math.random()*2)?"http://goldenads.ir/showb.php?text=0&uid=230&c=2&mod=h&type=h":"http://bermodashop.com/adcode/run/banner/h/horizontal/1/0/0/null//ref:2066")+'"><\/script>'); 
```

**编辑3：**

如果你想要两个以上的脚本，你可以使用

```
var scripts=["http://goldenads.ir/showb.php?text=0&uid=230&c=2&mod=h&type=h",
    "http://bermodashop.com/adcode/run/banner/h/horizontal/1/0/0/null//ref:2066",
    "URL1",
    "URL2"];
document.write('<script type="text/javascript" src="'+scripts[Math.floor(Math.random()*scripts.length)]+'"><\/script>'); 
```

# git - 如何找到有关一种特定数据结构的更改？

> ID：12232349
> 
> 赞同：2
> 
> 时间：2012-09-01T23:54:19.287
> 
> 标签：git

我正在浏览一个 git 存储库。假设我在文件 cache.h 中有一个数据结构：

```
struct cache_entry {
    struct cache_time ctime;
    struct cache_time mtime;
    unsigned int st_dev;
    unsigned int st_ino;
    unsigned int st_mode;
    unsigned int st_uid;
    unsigned int st_gid;
    unsigned int st_size;
    unsigned char sha1[20];
    unsigned short namelen;
    unsigned char name[0];
}; 
```

如何找到包含此特定数据结构更改的所有后续版本？

例如，在 20 次提交后，作者在上述数据结构中添加了一个新条目。

所以基本上我想看看特定数据结构上代码的演变。

这在 Git 中可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T23:57:19.103

Git pickaxe 可能确实想要你想要的 - 例如，如果你想找到与`st_mode`

```
git log -Sst_mode 
```

基本上它是一个 grep 字符串，因为 git 返回它找到的包含该字符串的任何提交。

git blame 也可能有帮助。这将显示文件名中第 100 到 125 行的最后提交

```
git blame -L100,125 filename 
```

# matlab - 如何完全重置 MATLAB？

> ID：12232350
> 
> 赞同：3
> 
> 时间：2012-09-01T23:54:44.280
> 
> 标签：matlab

我希望能够从一个*完全干净*的状态运行 MATLAB ：没有历史记录、没有快照、没有自定义、***什么都没有***。更好的是，我希望能够以*刚刚*安装 MATLAB 的状态启动 MATLAB 会话。这可能吗？

（当然，我正在寻找一种解决方案，它不需要我从我的硬盘中删除所有 MATLAB [这可能无法在不重新格式化驱动器的情况下完成]，然后在其中重新安装 MATLAB 的新副本.)

FWIW，我正在运行 7.11.0 R2010b。（到目前为止，我在网上找到的令人震惊的罕见/神秘解决方案不适用于此版本。）

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T00:04:31.140

最好的选择可能是打开 prefdir 并删除设置（未经我测试）：

*prefdir* - 包含首选项、历史和布局文件的文件夹

句法：

```
prefdir
folder = prefdir
folder = prefdir(1) 
```

从这里： http: [//www.mathworks.com/help/techdoc/ref/prefdir.html](http://www.mathworks.com/help/techdoc/ref/prefdir.html)

重置为一个新实例（就像您刚刚打开了一个新的 MATLAB 会话）：

```
!matlab &
exit 
```

资料来源： http: [//www.mathworks.com/matlabcentral/answers/1093](http://www.mathworks.com/matlabcentral/answers/1093)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T00:11:34.863

在 Virtualbox、VirtualPC 或类似软件中创建虚拟机。在上面安装 OS + Matlab。此时对系统进行快照或克隆。现在，每当您想运行“新鲜的 matlab”时，都可以从快照启动虚拟机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T15:22:35.463

另一种方法是使用新制作的目录作为`$HOME`会话。像这样的东西（在 Linux 上，使用`bash`语法）

```
$ mkdir /tmp/dummyHome
$ HOME=/tmp/dummyHome matlab & 
```

# php - 如何使用 fopen 将数据写入文件的特定部分并将现有数据推送到文件中而不删除它？

> ID：12232351
> 
> 赞同：1
> 
> 时间：2012-09-01T23:54:52.207
> 
> 标签：php, fopen, fwrite, fseek

正如标题所问，我如何使用 fopen 将数据写入文件的特定部分，同时将现有数据向下推而不擦除它。我已经将 fseek 与 SEEK_SET 和 SEEK_CUR 一起使用，到目前为止，我能够将新数据写入文件的正确部分，但是，现有数据的前几行被删除。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T23:57:02.950

您在普通桌面和服务器操作系统上找到的文件系统不支持插入，因此无法做到这一点。

你必须重写文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T23:57:40.350

我必须承认我很少`fopen`用于“复杂”的数据操作，并且在文件中间附加东西并不是我经常做的事情。通常，当我需要这种使用模式时，我只需用新数据覆盖整个文件。所以可能有一种聪明的方法可以在文件中间附加数据，但我不知道：我很确定你只能覆盖。

我能想到的最简单的追加到文件中间的方法如下：找到需要写入的位置，找到需要重定位的字节数，找到要插入的数据长度，将写入光标移动到（你需要写的地方+长度），用你需要重新定位的数据覆盖那个点的数据，然后写你首先需要写的东西。

```
#include <stdio.h>
#include <stdlib.h>

size_t finsert(void* data, size_t length, FILE* fp)
{
    const long writePosition = ftell(fp);
    fseek(fp, 0, SEEK_END);
    const long fileSize = ftell(fp);
    const long relocatedDataSize = fileSize - writePosition;
    char* dataToRelocate = malloc(relocatedDataSize);

    fseek(fp, writePosition, SEEK_SET);
    fread(dataToRelocate, relocatedDataSize, 1, fp);

    fseek(fp, writePosition + length, SEEK_SET);
    fwrite(dataToRelocate, relocatedDataSize, 1, fp);

    free(dataToRelocate);

    fseek(fp, writePosition, SEEK_SET);
    return fwrite(data, length, 1, fp);
} 
```

请注意，您需要对文件进行读写访问，仅写入不会剪切它。

此外，正如 Cole Johnson 所提到的，如果您使用“像数据库一样”的文件，请考虑使用 SQLite。它为您处理所有那些疯狂的事情，并使很多事情变得更简单。

# java - Java通过套接字不断检查连接

> ID：12232355
> 
> 赞同：-2
> 
> 时间：2012-09-01T23:55:47.137
> 
> 标签：java, sockets, stream

我正在开发一个基于 GUI 和数据库的 Java 多客户端服务器程序。客户端对程序的要求是确保始终与服务器建立连接，如果连接丢失（服务器关闭/套接字或流问题），则应通知它。

换句话说，我需要一个解决方案来持续检查与服务器的连接。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T03:35:48.213

TCP/IP 中没有这样的 API。在 TCP 中检测连接失败的唯一方法是尝试使用它。您可能会考虑在协议中添加心跳，但最好与客户端人员一起查看要求。TCP/IP 在设计上没有“拨号音”，在应用程序级别添加一个不重要的、容易出错的，并且会带来时间和空间开销。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-02T00:02:38.867

实施心跳协议...

如果您不这样做，则可以使用连接侦听器线程 [`Socket.isConnected`](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html#isConnected%28%29)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-02T03:22:36.220

检查套接字连接是否关闭。

```
if(Socket.isClosed()) {
    //reconnect or alert the user
} //end if 
```

# javascript - 关于 LocalScroll 和 ScrollTo (jQuery) 的问题

> ID：12232361
> 
> 赞同：3
> 
> 时间：2012-09-01T23:57:25.773
> 
> 标签：javascript, jquery, plugins, scrollto

这个问题对你们中的一些人来说可能看起来很微不足道，但我很抱歉我无法处理它。

问题：我有一个名为“DivBox”的Div-Box，带有该属性`overflow:hidden;`，我想通过滚动到其中的其他div来显示其中的其他信息。上面我有引用其他信息的链接。

```
<a href="#" id="LinkToInfo">Info</a>
<a href="#" id="LinkToInfo2">Info2</a>
<div id="DivBox">
  <div id="info1">Information</div>
  <div id="info2">other Information</div>
</div> 
```

我还包括 jquery、ScrollTo、LocalScroll 和 Easing 并编写了以下代码：

```
$('#LinkToInfo').click(function(){
  $('#DivBox').localScroll({
    target:'#info1'
  });
});
$('#LinkToInfo2').click(function(){
  alert("Debugging reasons");
  $('#DivBox').localScroll({
    target:'#info2'
  });
}); 
```

但它不起作用。我尝试调试它，但它没有滚动。我究竟做错了什么？

我希望你能帮助我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T07:04:28.673

不确定这是否可行，但请尝试`href="#"`从`<a>`标签中删除 。

# python - Pyramid.security 问题：双重 cookie？不安全的cookies？过期？

> ID：12232364
> 
> 赞同：8
> 
> 时间：2012-09-01T23:57:59.430
> 
> 标签：python, cookies, security, pylons, pyramid

我第一次涉足 Pyramid 安全模块。我正在使用此登录代码来设置 auth_tkt：

```
@view_config(route_name='LoginForm', request_method='POST', renderer='string')
class LoginForm(SimpleObject):
    def __call__(self):

        emailAddress = self.request.params.get('emailAddress')
        password = self.request.params.get('password')

        if emailAddress != 'testemail@gmail.com' or password != 'testpassword':
            errorDictionary = { 'message' : "Either the email address or password is wrong." }
            self.request.response.status = 400
            return json.dumps( errorDictionary, default=json_util.default)

        testUserGUID = '123123123'

        headers = remember(self.request, testUserGUID)
        return HTTPOk(headers=headers) 
```

它似乎工作正常，但有一些令人费解的细节：

首先，实际上设置了 2 个 cookie 而不是一个。这 2 个 cookie 是相同的（都具有名称“auth_tkt”），除了一个区别：一个的主机值为“.www.mydomain.com”，而另一个 cookie 的主机值为“www.mydomain.com” 为什么是设置 2 个 cookie 而不是 1 个？不同的主机值有什么意义？

问题 2，网络工具报告这两个 cookie 都不安全。我可以做些什么来确保 cookie/s 是安全的？

问题 3：两个 cookie 的过期值都是“在会话结束时”。这是什么意思，我如何自己自定义到期值？登录 cookie 过期时间的推荐做法是什么？

问题4：我不明白为什么“remember”的第一个参数是self.request而不是self.request.response。不应该在响应对象而不是请求对象上记住数据吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-02T08:52:14.697

1.  实际上，生成了 3 个 cookie；一个没有`Domain`密钥，一个有，第三个带有您的域的通配符版本（前导点）。您的浏览器通常要么合并两者，要么忽略其中之一（哪一个因浏览器而异，这就是设置 2 的原因）。

    当该`wild_domain`选项设置为`AuthTktAuthenticationPolicy`（默认为 True）时，会生成最后一个 cookie；见[`AuthTktAuthenticationPolicy`API](http://docs.pylonsproject.org/projects/pyramid/en/latest/api/authentication.html)。如果您的身份验证 cookie 要在不同的子域之间共享（想想 app1.domain、app2.domain），则需要这个；您的浏览器不会在没有通配符 cookie 的情况下跨子域共享 cookie。

2.  您需要在`secure`cookie 的身份验证策略上设置选项以设置安全标志。再次，请参阅[API](http://docs.pylonsproject.org/projects/pyramid/en/latest/api/authentication.html)。

3.  没有设置过期时间，这意味着当您关闭浏览器时 cookie 将被删除（浏览器向您显示的会话结束）。如果您希望您的用户在关闭浏览器时注销，请将其保留为默认值。

    *仅*当您希望会话在浏览器关闭期间持续存在时，才设置 cookie 最大期限，请参阅[API](http://docs.pylonsproject.org/projects/pyramid/en/latest/api/authentication.html)`max_age`中的选项。此选项将导致浏览器将 cookie 存储在磁盘上，以在浏览器关闭之间持续存在，并在最长期限过后将其删除。

    请注意，`AuthTktAuthenticationPolicy`策略对象可以通过限制将任何身份验证 cookie 视为有效的时间长度来以更细粒度的方式管理登录会话，并允许您设置 cookie 刷新策略。有了这样的刷新策略，用户将在继续使用您的应用程序时收到新的（刷新的）cookie，但如果他们没有在设定的时间段内连接到您的服务器，他们的 cookie 将被视为无效，他们将重新登录。

    有关如何配置的更多详细信息，请参阅[API 文档](http://docs.pylonsproject.org/projects/pyramid/en/latest/api/authentication.html)`timeout`中的和`reissue_time`选项。

4.  策略对象需要请求中的几条信息才能生成 cookie，尤其是服务器的所有主机名。

# javascript - 谷歌地图如何只显示一个标记？

> ID：12232370
> 
> 赞同：1
> 
> 时间：2012-09-01T23:59:58.600
> 
> 标签：javascript, vb.net, visual-studio, google-maps, windows-applications

我一直在处理这几个小时，但我仍然不知道该怎么做。

我的目标是在搜索彼此靠近的地址时只显示一个标记。

下面你有我在我的 html 中使用的代码来搜索地址，注意 - 我正在开发一个这样做的 Windows 应用程序，在这种情况下，你可能会发现一些缺少的东西可以通过单击按钮来执行操作，因为这是通过.NET 窗口应用程序

html代码

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />

<script type="text/javascript" src="http://maps.google.com.mx/maps/api/js?sensor=true&language=es"></script>
<script type="text/javascript">

       var G = google.maps;
       var map;
       var geocoder = new G.Geocoder();
       var marker;
       var markersArray = [1];

        function initialize() {
          createMap();
          geocode('Chicago');
        }

        function createMap() {
            var myOptions = {
                center: new G.LatLng(0,0),
                zoom: 17,
                mapTypeId: G.MapTypeId.ROADMAP
            }
            map = new G.Map(document.getElementById("map_canvas"), myOptions);
        }

function geocode(address){
            geocoder.geocode({ 'address': (address ? address : "Miami Beach, Florida")}, function (results, status) {
                if (status == G.GeocoderStatus.OK) {
                    map.setCenter(results[0].geometry.location);

                        marker = new G.Marker({
                        map: map,
                        animation: google.maps.Animation.DROP,
                        position: results[0].geometry.location
                        });

                } else {
                    alert("Geocode was not successful for the following reason: " + status);
                }
            });

        }

        </script>
      </head>
      <body onload="initialize()">
        <div id="map_canvas" style="width:100%; height:100%"></div>

      </body>
    </html> 
```

阅读以前的帖子我知道必须使用 if/else 语句，但无法正确使用。

非常感谢您的帮助。

里奥·P。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T01:06:31.807

您可以在 Geocode 函数的开头添加一小段代码，这将在设置新标记之前删除之前的标记。试试这个：

```
function geocode(address){
    if (marker) {
        marker.setMap(null);
    }
    geocoder.geocode({ 'address': (address ? address : "Miami Beach, Florida")}, function (results, status) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T10:04:22.830

仅创建一个标记作为全局变量并根据需要更改其位置。这样您还可以节省内存，因为您没有在每个请求上创建新的标记对象：

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
    <html>
    <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style>
    html, body {width:100%; height:100%}
    </style>

    <script type="text/javascript" src="http://maps.google.com.mx/maps/api/js?sensor=true&language=es"></script>
    <script type="text/javascript">

           var G = google.maps;
           var map;
       var marker;
           var geocoder = new G.Geocoder();

            function initialize() {
              createMap();
              geocode('Chicago');
            }

            function createMap() {
                var myOptions = {
                    center: new G.LatLng(0,0),
                    zoom: 17,
                    mapTypeId: G.MapTypeId.ROADMAP
                }
                map = new G.Map(document.getElementById("map_canvas"), myOptions);

// Create a single marker, (global variable), and don't give it a position just yet.
        marker = new G.Marker({
        map: map,
        animation: google.maps.Animation.DROP,
        });

            }

    function geocode(address){
                geocoder.geocode({ 'address': (address ? address : "Miami Beach, Florida")}, function (results, status) {
                    if (status == G.GeocoderStatus.OK) {
                        map.setCenter(results[0].geometry.location);

                //Position the marker
                marker.setPosition(results[0].geometry.location);

                    } else {
                        alert("Geocode was not successful for the following reason: " + status);
                    }
                });

            }

            </script>
          </head>
          <body onload="initialize()">
            <div id="map_canvas" style="width:100%; height:100%"></div>

          </body>
        </html> 
```

# python - Python '整数除以零' 错误 Pyglet 和 AVBin

> ID：12232374
> 
> 赞同：1
> 
> 时间：2012-09-02T00:01:11.860
> 
> 标签：python, python-2.7, pyglet

我目前正在运行 python 2.7 并尝试使用 AVBin 安装 Pyglet 模块。对于图形和其他不需要 AVBin 但其他一切都有错误的东西，它似乎工作正常。

这是我收到的错误。

* * *

```
Microsoft Windows XP [Version 6.1.7601]
(C) Copyright 1985-2001 Microsoft Corp.

C:\Users\Brian\Documents\Python>media.py

Traceback (most recent call last):
File "C:\Users\Brian\Documents\Python\media.py", line 3, in <module>
sound = pyglet.media.load('music.mp3')
File "C:\Python27\lib\site-packages\pyglet\media\__init__.py", line 1406, in l
oad
source = get_source_loader().load(filename, file)
File "C:\Python27\lib\site-packages\pyglet\media\__init__.py", line 1382, in l
oad
return avbin.AVbinSource(filename, file)
File "C:\Python27\lib\site-packages\pyglet\media\avbin.py", line 268, in __ini
t__
av.avbin_stream_info(self._file, i, info)
File "C:\Python27\lib\site-packages\pyglet\media\avbin.py", line 198, in f
result = func(*args)
WindowsError: exception: integer divide by zero 
```

* * *

python 脚本文件已从 Windows 命令提示符处执行。我是 Python 新手，因此对它的工作原理了解有限。我正在运行 64 位 Windows 7，带有 64 位 beta 版本的 pyglet 和 64 位版本的 AVBin。

谢谢，

布赖恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T22:33:39.147

It was probably cause by [this bug](https://github.com/AVbin/AVbin/issues/49) that was fixed in [AVbin 11 alpha 4](https://github.com/AVbin/AVbin/downloads).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T00:11:20.183

似乎 AVBin 模块与 Pyglet 模块发生冲突并试图除以零。

我能想到解决这个问题的唯一方法是使用 AVBin 以外的东西来安装

# vim - Vim 模板，获取文件名并使用它

> ID：12232379
> 
> 赞同：4
> 
> 时间：2012-09-02T00:01:54.497
> 
> 标签：vim, macvim, vim-plugin

我正在为 Java 文件编写一个基本的 Vim 模板，当我创建一个扩展名为 .java 的新文件时，它会创建一个裸骨架类。

例子：

```
vim Banana.java 
```

Vim 创建一个包含如下代码的文件：

```
public class TODO {
    public static void main(String[] args) {
    // ... 
```

我的目标是将我的默认类名 , 更改`TODO`为不带扩展名的文件名，以便：

```
vim Coconut.java 
```

创建：

```
public class Coconut { 
```

而不是：

```
public class TODO { 
```

请问我怎样才能做到这一点？我已经搜索了该站点，并且有一些脚本可以在变量中提取名称并在正确的位置执行 :substitute，但我不知道如何找到正确的位置并将文件名放置在那里。

我从我的 .vimrc 中按扩展名读取了我的模板文件：

```
autocmd BufNewFile * silent! 0r $HOME/vimfiles/templates/%:e.vim_template 
```

或者：

```
autocmd BufNewFile * silent! 0r $HOME/.vim/templates/%:e.vim_template 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T00:18:42.843

我相信这可能会有所帮助？[http://vim.wikia.com/wiki/Insert_current_filename](http://vim.wikia.com/wiki/Insert_current_filename)

有了这个，你可以得到当前的文件名：

```
expand("%:t:r") 
```

具体来说，您可能正在寻找这个：

```
%s/TODO/\=expand("%:t:r")/g 
```

一个完整的例子：

```
function! NewFile()
    silent! 0r $HOME/vimfiles/templates/%:e.vim_template
    s/FILENAME/\=expand("%:t:r")
endfunction

autocmd BufNewFile * call NewFile() 
```

您也可以尝试[tSkeleton 之](http://www.vim.org/scripts/script.php?script_id=1160)类的东西，我自己从未尝试过，但它似乎为您解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T17:05:42.760

我会看看 snipmate ( [vim.org](http://www.vim.org/scripts/script.php?script_id=2540) , [github](https://github.com/msanders/snipmate.vim) )。它是样板代码的通用扩展，带有许多 Java 的内置配方（您可以[在此处](https://github.com/msanders/snipmate.vim/blob/master/snippets/java.snippets)浏览以了解它），并且非常适合此类内容。

有了它，您可以输入关键字，点击标签，然后将关键字扩展到您的样板代码中。所以你可以输入`stdclass->`并得到你想要的。

The snippet can have vim expressions embedded (like `Filename()`); you can tab through important points in the expanded code, and it's useful for smaller snippets too (like getters & setters, try/catch/finally, toString, etc.)

It's easy to use, easy to customize, and in a boilerplate-heavy language like Java, it's a godsend.

# javascript-framework - 使用 AngularJS 和 HeadJS 异步实例化模块指令

> ID：12232384
> 
> 赞同：0
> 
> 时间：2012-09-02T00:02:58.627
> 
> 标签：javascript-framework, head, angularjs

我创建了一个自定义指令属性，它将一个普通的选择框变成一个 ChosenJS (http://harvesthq.github.com/chosen/) 选择框。为了使代码更干净，我想用 HeadJS 异步加载外部 selected.js 插件文件。这是我的 AngularJS 指令：

```
myApp.module.directive('chosen-select', function() {
  head.js(myApp.pathTo.plugin.chosen);

  head.ready(function() {
    var linker = function(scope, element, attr) {
        element.chosen();
    }

    return {
        restrict: 'A',
        link: linker
    }
  })
}); 
```

我遇到的问题是，似乎因为我异步加载它，Angular 不知道它存在并且指令不起作用。有没有办法以编程方式注入动态加载的模块指令，以便 Angular 知道它并相应地更新视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T00:41:18.393

在您的示例中，指令函数没有返回指令的配置对象，这就是它失败的原因。

试试这个：

```
var myApp = angular.module('myApp', []);
myApp.directive('chosenSelect', function() {
  var el;

  // load chosen file
  head.js(myApp.pathTo.plugin.chosen);
  head.ready(function() {
    jQuery(el).chosen();
  });

  return {
    restrict: 'A',
    link: function(scope, element, attr) {
      // set el via closure, so that head ready callback has access to it
      el = element;
    }
  };

}); 
```

# iphone - TableViewCells 和字典数组

> ID：12232385
> 
> 赞同：0
> 
> 时间：2012-09-02T00:03:18.953
> 
> 标签：iphone, ios, ios5, uitableview, nsmutablearray

我无法理解如何用所有日期填充我的表格。仅返回 2012 年 9 月 1 日，而不是 2012 年 8 月 31 日。我已经尝试了一些事情，比如在 numberofrows 部分中使用我的日子和时段。我认为它与 .count 有关，但没有看到在哪里。但我还没有弄清楚。它仍然只发布 9/1 字典。如何在 tableviewcell 中显示所有字典数组，我希望我有意义，附上图片。我的代码：

```
NSDictionary *json = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableContainers error:&error];

    NSDictionary* myslots =[json objectForKey:@"slots"];
    NSLog(@"allslots: %@", myslots);

    for (NSString *slotKey in myslots.allKeys) {
    NSDictionary *slot = [myslots valueForKey:slotKey];
       UPDATED:
        self.timesArray = [[NSMutableOrderedSet alloc] init];
    for (NSDictionary *myDays in slot){

        if ([[myDays objectForKey:@"isReservable"] isEqualToNumber:[NSNumber numberWithInt:1]])

           [self.timesArray addObject:[myDays objectForKey:@"begin"]];
         //NSLog(@"This is the times count: %@", timesArray.count);
    }

       NSLog(@"These are the times avail: %@", self.timesArray);          

    [self.tableView reloadData];
    }
} 
```

看起来是这样的：

```
2012-08-31 16:34:57.074 GBSB[780:15b03] These are the times avail: {(
    "2012-08-31 09:00:00 America/Los_Angeles",
    "2012-08-31 13:00:00 America/Los_Angeles",
    "2012-08-31 14:00:00 America/Los_Angeles",
    "2012-08-31 15:00:00 America/Los_Angeles",
    "2012-08-31 16:00:00 America/Los_Angeles"
)}
2012-08-31 16:34:57.074 GBSB[780:15b03] These are the times avail: {(
    "2012-09-01 09:00:00 America/Los_Angeles",
    "2012-09-01 10:00:00 America/Los_Angeles",
    "2012-09-01 11:00:00 America/Los_Angeles",
    "2012-09-01 12:00:00 America/Los_Angeles",
    "2012-09-01 13:00:00 America/Los_Angeles",
    "2012-09-01 14:00:00 America/Los_Angeles",
    "2012-09-01 15:00:00 America/Los_Angeles",
    "2012-09-01 16:00:00 America/Los_Angeles"
)} 
```

这是我在.h中尝试过的

```
@property (nonatomic, retain) NSMutableOrderedSet *timesArray; 
```

.m

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
//#warning Incomplete method implementation.
    // Return the number of rows in the section.
    return self.timesArray.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...
    //cell.textLabel.text = timesArray;
    cell.textLabel.text = [self.timesArray objectAtIndex:indexPath.row];
    return cell; 
```

这是一张照片 ![只显示一本字典](../Images/d5882a433dcf54d06435159df488f844.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T00:40:38.800

我认为您很接近，因为您的数组具有所有值，但不是同时。尝试移动 self.timesArray = [[NSMutableOrderedSet alloc] init]; 在 for 循环之前向上，以便它只初始化一次。此外，将最终的 NSLog 和 tableView reloadData 向下移动，如下所示：

```
 NSDictionary *json = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableContainers error:&error];

    NSDictionary* myslots =[json objectForKey:@"slots"];
    self.timesArray = [[NSMutableOrderedSet alloc] init];
    NSLog(@"allslots: %@", myslots);

    for (NSString *slotKey in myslots.allKeys) {
        NSDictionary *slot = [myslots valueForKey:slotKey];
       UPDATED:
        for (NSDictionary *myDays in slot){

            if ([[myDays objectForKey:@"isReservable"] isEqualToNumber:[NSNumber numberWithInt:1]])

               [self.timesArray addObject:[myDays objectForKey:@"begin"]];
            //NSLog(@"This is the times count: %@", timesArray.count);
        }

    }
    NSLog(@"These are the times avail: %@", self.timesArray);
    [self.tableView reloadData];
} 
```

# django - 在 oauth2app 的登录中传播下一个参数

> ID：12232391
> 
> 赞同：0
> 
> 时间：2012-09-02T00:04:53.033
> 
> 标签：django, django-templates, django-crispy-forms

我有一个 Django 网站，我在其中使用 oauth2app 库进行 OAuth 2 身份验证。我还修改了 oauth2app 以使用 Krispy_forms，而不是弃用的 uni_form。

oauth2app 中的 authorize() 方法由 Django 装饰器 @login_required 保护。事实上，如果客户在没有先登录的情况下尝试授权，则会出现登录页面。

正如预期的那样，装饰器使登录页面 URL 具有“下一个”CGI 参数，其中包含授权请求的原始 URL。

问题是，当登录页面的模板被实例化时，“next”参数没有被传播。我想要的是表单“action”包含“next”参数。

此页面旨在提供解决方案：

[http://django-uni-form.readthedocs.org/en/latest/helpers.html](http://django-uni-form.readthedocs.org/en/latest/helpers.html)

在“在视图中操作助手”部分中。

按照那个例子，我尝试了：

```
form = LoginForm()
redirect_url = request.GET.get('next')
if redirect_url is not None:
    form.helper.form_action = reverse(login) + '?next=' + 
      redirect_url 
```

但是结果页面的来源显示了表单的原始“操作”。对 form_action 的分配似乎没有生效。事实上，如果我不实例化模板，而只是返回 form_action，它并没有改变：

```
return HttpResponse('action: ' + form.helper.form_action) 
```

让我不解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T19:00:38.387

uni_forms 的作者在这里提示了我。

问题是表单助手是一个属性，因此 form_action 是该属性的固定部分。

通过将属性更改为创建助手的方法，可以动态修改 form_action。

现在一切正常，无需 Javascript hack。

# memory - 如何确定程序可用的主存大小？

> ID：12232394
> 
> 赞同：0
> 
> 时间：2012-09-02T00:05:21.163
> 
> 标签：memory, memory-management

我正在研究与虚拟内存和内存分配相关的主题，但我并不真正了解如何知道进程的可用内存。我如何确定可用金额；其次，这是由您的操作系统内核决定的还是有更多的架构原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T00:07:39.793

分配给进程的内存完全取决于操作环境、系统、体系结构，甚至可能是底层硬件。*甚至流程*的字面细节定义也常常依赖于这些元素。因此，这个问题根本没有普遍的答案。

# django - django继承伤害了我的大脑

> ID：12232397
> 
> 赞同：1
> 
> 时间：2012-09-02T00:06:00.990
> 
> 标签：django, django-models, django-inheritance

我正在制作一个啤酒网站，但我被困住了。我需要一个能与许多不同成分相关的食谱。有没有办法创建一个模型“成分”，并继承许多不同的模型：“啤酒花”、“谷物”等。我想这样做，所以我有我的配方和成分之间的关​​系，我没有创建 100 种不同的关系来涵盖每种成分。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T00:25:38.253

尽管在大多数情况下我个人建议不要这样做，因为表继承在 Django 中是一种痛苦（恕我直言）。

你可以这样做：

```
class Recipe(models.Model):
    name = models.CharField()

class Ingredient(models.Model):
    name = models.CharField()
    recipes = models.ManyToManyField(Recipe, related_name='%(app_label)s_%(class)s')

class Hop(Ingredient):
    pass

class Grain(Ingredient):
    pass 
```

# c# - 如何调用互操作传递的对象的函数？

> ID：12232401
> 
> 赞同：1
> 
> 时间：2012-09-02T00:08:41.853
> 
> 标签：c#, .net, vb6, interop, com-interop

我有以下代码模式：

```
[VB6] 
Dim objNetDllObject As New NetDllObject 
objNetDllObject.PassVb6Form(MyForm) 
objNetDllObject.ShowForm  

[C#] 
object Vb6Form;  
private void PassVb6Form(object form) { Vb6Form = form; } 
private void button1_Click(object sender, EventArgs e) { Vb6Form.Show(); } 
```

问题是 C# 编译器不喜欢该`Vb6Form.Show()`语句，因为`Show()`它不是 的函数`object`，这是真的。如何编译此代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:15:51.013

我会这样解决问题（因为 VB6 有对 NetDllObject 的引用，我猜它有一个引用并且也可以实现其他对象）

在 .Net 中公开一个您希望 VB6 接口实现的接口：

```
public interface IVB6Form
{
     void Show();
} 
```

在 VB6 中的一个新类中实现它：

```
Implements IVB6Form

Public myForm as Form

Public Sub IVB6Form_Show()
    myForm.Show()  
End Form 
```

更改 C# 签名以使用它而不是对象引用：

```
private void PassVb6Form(IVB6Form form) { Vb6Form = form; } 
```

# javascript - Is "this" necessary in javascript apart from variable definition

> ID：12232402
> 
> 赞同：2
> 
> 时间：2012-09-02T00:08:47.517
> 
> 标签：javascript, this, scope, javascript-objects

My question is dead simple.

I just casually discovered that once you have defined a property with `this.` into an object, you don't need to prepend `this.` anymore when you want to call them.

So `this.` is really meant to be used ad definition time, like `var`?

I found it my self shortly after, i was referencing the window object with this. since i called my object without using new, so like it was a function.

One extra question, maybe for comments. Inside the main object, if i create a new object, and use `this` during the object definition, this `this` what will be referring to?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T00:16:17.323

There are all sorts of circumstances where you MUST use `this` in order to reference the right data.

These two implementations do very different things:

```
Array.prototype.truncate(newLen) {
    // sets the length property on the current Array object
    this.length = newLen;
}

Array.prototype.truncate(newLen) {
    // sets a global variable named length
    length = newLen;
}

var arr = [1,2,3,4,5,6,7];
arr.truncate(2); 
```

You MUST use `this` in order to control what happens if you want to modify the current object. Your assumption that you can leave it off and it will still modify the current object's properties is not correct. If you leave it off, you are modifying global variables, not member properties.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T00:18:07.057

No, unless the context of `this` is a **global** object, such as `window`. Take the following example:

```
function Foo(bar) {
    this.data = bar;
    console.log(this.data); // OK
    console.log(data); // ReferenceError
} 
```

In this example, you'll get a `ReferenceError: data is not defined` on the first `console.log(data)`, *unless*, `data` is a global variable. To access the instance's public member, you *have* to use `this.data`.

### References:

*   [Understanding JavaScript’s `this` keyword](http://javascriptweblog.wordpress.com/2010/08/30/understanding-javascripts-this/)
*   [The `this` keyword](http://www.quirksmode.org/js/this.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T00:13:49.840

> So this. is really meant to be used ad definition time, like var?

No, the point of `this` is to be the current scope of execution. You can (and will) run into weird errors if you don't use `this`. For example, imagine you are an object with a property `val` and then on the prototype of that object you have

```
App.obj = function(){
   this.val = 'initial';
}

obj.prototype.myMethod = function(val) {
   // how would you assign argument val to object val?
} 
```

also note that your reasoning breaks down with methods.

```
obj.prototype.meth2 = function(){
   myMethod();  // fails where this.myMethod() would work.
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-02T00:17:42.763

See [http://jsfiddle.net/BRsqH/](http://jsfiddle.net/BRsqH/):

```
function f(){
    this.public='hello!';
    var hidden='TOP SECRET!';
}
var instance=new f();
alert('Public data: '+instance.public+ /* gives "hello!" */
    '\nHidden data: '+instance.hidden /* gives undefined */
); 
```

Variables created with `var` are hidden and cannot be viewed nor modified outside the function which created them.

But variables created with `this` are public, so you can access them outside the function.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-02T00:16:23.580

I think I got it.

I defined my object as `function My_Object(){...}` and then called it with `MyObject()`. This way the My_Object was treated as a function, not an object and therefore this == window.

So in the end I was attaching properties and methods to window instead of My_Object! That's way there were available without prepending `.this`.

The right way to initialize My_Object as an object is to call it like this `new My_Object`, isn't right?

# entity-framework - 按 ID 链接 MVC4 模型

> ID：12232403
> 
> 赞同：0
> 
> 时间：2012-09-02T00:09:11.360
> 
> 标签：entity-framework, asp.net-mvc-4

昨天醒来，想知道 MVC 的大惊小怪是什么。所以我发现了，哇，它很好，类似的东西。

我习惯在 ASP.NET 项目中使用一个相关的 Linq to Sql DataContext DB。

```
 //Some ASP.NET Page Codebehind
 DataContext dbEntire = new DataContext() 
```

使用带有实体框架的 MVC4，您可以创建模型并为您创建数据库。

```
 //Models/Article/Article.cs
public class ArticleDBContext: DbContext
{
    public DbSet<Article> Articles { get; set; }
} 
public class Article
{
    public int ID {get;set;}
    public string Title{ get; set; }
    public int AuthorID { get; set; }
    public string Body { get; set; }
    public int CategoryID { get; set; }
    public DateTime Submitted{ get; set; }
    public DateTime LastModified { get; set; }
} 
```

作者和类别是单独的模型。

但是你如何设置所有的数据库关系......一对多等等等等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T00:39:39.630

```
public class ArticleDBContext: DbContext
{
    public DbSet<Article> Articles { get; set; }
    public DbSet<Category> Categories { get; set; }
} 

public class Article
{
    public int ID {get;set;}
    public string Title{ get; set; }
    public int AuthorID { get; set; }
    public string Body { get; set; }

    public int CategoryID { get; set; }
    public virtual Category Category { get; set; }

    public DateTime Submitted{ get; set; }
    public DateTime LastModified { get; set; }
}

public class Category
{
    public int ID {get;set;}
    public string Name{ get; set; }
    public virtual ICollection<Article> Articles { get; set; }
} 
```

首先阅读一些关于实体框架代码的教程。

[EF 代码优先和 MVC](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application)

[英孚入门](http://msdn.microsoft.com/en-us/data/ee712907)

# ruby-on-rails - 将数据导出到 sqlite3 数据库文件

> ID：12232405
> 
> 赞同：1
> 
> 时间：2012-09-02T00:09:18.157
> 
> 标签：ruby-on-rails, sqlite

我正在尝试构建一个新闻文章归档 Rails 应用程序。

主要目标是允许将所有文章作为 sqlite3 数据库文件导出和下载。

这样做的目的是让最终用户可以使用另一个应用程序离线查看他们的文章。

如果我可以简单地将数据导出为适当的格式，我不想制作整个离线查看器。

tl：dr 如何允许用户“下载为 sqlite3 数据库”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T01:18:55.943

1.  将数据制作为 CSV 格式的文件/对象
2.  创建一个空白的 sqlite3 db 文件。
3.  将该 CSV 文件/对象导入 SQLITE3 文件
4.  将流式操作写入控制器以向用户发送 CSV 文件。请参阅：[Ruby on Rails 3：通过 Rails 将数据流式传输到客户端](https://stackoverflow.com/questions/3507594/ruby-on-rails-3-streaming-data-through-rails-to-client)

# mysql - MySQL存储过程的烦恼

> ID：12232408
> 
> 赞同：0
> 
> 时间：2012-09-02T00:09:46.603
> 
> 标签：mysql, stored-procedures

基本上，每当学生注册/放弃课程时，我都会运行此程序。我正在尝试在课程中设置 student_total = # of students，然后用 (student_total + 1) 更新相应的部分，我无法为存储过程找到好的文档。我的`Declare student_total int;`线路出现错误。我做错了什么？

```
DELIMITER $$

CREATE PROCEDURE `mydb`.`update_seats` (IN section_ID varchar(20))
BEGIN

SET @section_id=section_id;

DECLARE student_total int;
-- count the number of students in the course --

SET student_total = SELECT count(student_ID) from course
WHERE section_ID = @section_id;

Update Section SET students_enrolled = (student_total + 1) 
WHERE section_ID = @section_id;

END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T00:41:35.290

# 问题

### 错误 1

从[MySql 文档](http://dev.mysql.com/doc/refman/5.0/en/declare.html)：

> DECLARE 仅允许在 BEGIN ... END 复合语句中使用，并且必须位于其开头，在任何其他语句之前。

所以，你应该在`DECLARE...`语句之前移动`SET @section_id...`语句。

### 错误 2

您正在尝试使用无效的语法将值选择到变量中！您应该使用`SELECT ... INTO`而不是`SET ... = SELECT ...`（这是无效的语法）。

### 去除冗余

无需将参数 ( `section_ID`) 分配给全局变量 ( `@section_ID`)。您可以简单地更改参数名称以避免名称与`section.section_ID`列冲突。

# 解决方案

```
DELIMITER ;;

CREATE PROCEDURE `update_seats` (IN p_section_ID VARCHAR(20))
BEGIN
    DECLARE student_total INT;

    SELECT  count(student_ID)
    INTO    student_total
    FROM    course
    WHERE   section_ID = p_section_ID;

    UPDATE  section
    SET     students_enrolled = (student_total + 1)
    WHERE   section_ID = p_section_ID;
END;;

DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T00:37:53.370

您正在使用命令行工具，是吗？

了解您收到的错误消息会很有帮助，但根据您发布的代码，我看不到您在 BEGIN...END 块之后重置分隔符命令的位置。

取自[http://dev.mysql.com/doc/refman/5.1/en/stored-programs-defining.html](http://dev.mysql.com/doc/refman/5.1/en/stored-programs-defining.html)

# unicode - 在 iconv 中将 UTF-8 转换为 UTF-16

> ID：12232411
> 
> 赞同：2
> 
> 时间：2012-09-02T00:11:03.617
> 
> 标签：unicode

据我所知，“你好”（英文意思是“How are you?”）
`\xe4\xbd\xa0\xe5\xa5\xbd`的UTF-8形式是，UTF-16形式是`u\u4f60\u597d`（或者你可以写成`\x4f\x60\x59\x7d`）。

现在我使用 iconv 从 UTF-8 转换为 UTF-16。首先，我创建了一个新文件，其中包含一行（“你好”），命名为 test，然后运行命令：

```
cat test | iconv  -f  UTF-8 -t UNICODE  
��`O}Y 
```

它不是 \x4f\x60\x59\x7d。如何获得正确的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T00:14:50.950

不是`UTF-8`，而是`UCS-2`

尝试：-

```
cat test | iconv  -f  UCS-2 -t UTF-16 
```

# iphone - 通过导航栏按钮的操作在 UITableview 中设置删除按钮

> ID：12232416
> 
> 赞同：1
> 
> 时间：2012-09-02T00:12:39.737
> 
> 标签：iphone, objective-c, ios, uitableview

我正在开发一个包含表格视图的应用程序。我想在导航中点击右栏按钮时显示表格视图的默认删除按钮（类似于删除时滑动）。有可能这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T00:23:14.570

您可以通过调用使所有单元格的删除指示器出现

```
[myTableView setEditing:YES animated:YES]; 
```

从按钮的处理程序。如果您希望指示器仅出现在当前选定的单元格上，您可以这样做：

```
NSIndexPath selection = [myTableView indexPathForSelectedRow];
UITableViewCell *selectedCell = [myTableView.dataSource tableView:myTableView cellForRowAtIndexPath:selection];
[selectedCell setEditing:YES animated:YES]; 
```

# virtualenvwrapper - virtualenvwrapper 命令不起作用

> ID：12232421
> 
> 赞同：68
> 
> 时间：2012-09-02T00:14:17.403
> 
> 标签：virtualenvwrapper

```
tow-81-235:Projects pessimisticoptimism$ mkvirtualenv development
-bash: mkvirtualenv: command not found
tow-81-235:Projects pessimisticoptimism$ sudo pip install virtualenvwrapper
Password:
Requirement already satisfied (use --upgrade to upgrade): virtualenvwrapper in /Library/Python/2.7/site-packages
Requirement already satisfied (use --upgrade to upgrade): virtualenv in /Library/Python/2.7/site-packages (from virtualenvwrapper)
Requirement already satisfied (use --upgrade to upgrade): virtualenv-clone in /Library/Python/2.7/site-packages (from virtualenvwrapper)
Cleaning up...
tow-81-235:Projects pessimisticoptimism$ mkvirtualenv development
-bash: mkvirtualenv: command not found 
```

为什么我会收到此错误？我已经安装了`virtualenv`。`virtualenvwrapper`我想使用`mkvirtualenv`and `workon`。我觉得这很奇怪`virtualenv`，但`virtualenvwrapper`不是。

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2012-12-06T04:28:54.583

1st，确保您使用 sudo 进行安装：

```
sudo pip install virtualenvwrapper 
```

2nd，将以下行附加到您的 .bashrc 文件（带有`nano ~/.bashrc`）：

```
export WORKON_HOME=$HOME/.virtualenvs
source /usr/local/bin/virtualenvwrapper.sh 
```

3、重新加载您的个人资料

```
source ~/.bashrc 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2014-05-13T14:29:24.693

**概括**

我在 Mac 上，我的答案类似于 @Ramces 的答案，只是它使用的是 bash_profile。我只想为 Mac 用户进一步详细说明，以了解有很多不同的配置文件，包括：

*   .bashrc
*   .bash_profile
*   。轮廓

像 .profile 这样的一些文件不会优先于 .bash_profile （如果存在），然后将被忽略。如果您成功执行以下步骤并让虚拟环境正常工作，但随后关闭终端并“找不到工作命令”，那么您需要设置正确的配置文件。详细答案请看[这里](https://superuser.com/questions/479703/profile-and-bashrc-doesnt-work-on-my-mac)

**安装步骤：**

1.  `sudo pip install virtualenv`

    安装 virtualenv（允许你分离你的环境）

2.  `sudo pip install virtualenvwrapper`

    安装 virtualenvwrapper（允许你使用 'workon' 命令）

3.  `nano ~/.bash_profile`

    ```
    export WORKON_HOME=$HOME/.virtualenvs
    source /usr/local/bin/virtualenvwrapper.sh 
    ```

4.  `source ~/.bash_profile`

    重新加载配置文件。展望未来，您只需要第 5 步（创建新环境）和第 6 步（运行环境）

5.  `mkvirtualenv my_env`

    这将创建您的虚拟环境（此示例使用“my_env”）

6.  `workon my_env`

    这使您可以在特定环境中工作（此示例使用“my_env”）

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-02T02:01:40.813

使用安装`virtualenvwrapper`软件包后`pip`，您还必须进行一些初始化/设置您的首选项。请参阅[virtualenvwrapper 文档中的介绍](http://virtualenvwrapper.readthedocs.org/en/latest/index.html#introduction)。

与查找命令最相关的应该是*将 virtualenvwrapper 脚本采购*到您的 shell 中。在文档中它被称为

```
$ source /usr/local/bin/virtualenvwrapper.sh 
```

您仍然需要调整设置的路径。我对你的 Mac 的猜测是：

```
$ source /Library/Python/2.7/site-packages/virtualenvwrapper.sh 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-06-25T12:58:41.393

简单的过程

1.  sudo apt-get install python-pip（如果没有安装 pip）
2.  sudo pip install virtualenv
3.  创建一个目录来存储你的 virtualenvs

    mkdir ~/.virtualenvs

4.  sudo pip install virtualenvwrapper

5.  运行以下命令

    导出 WORKON_HOME=~/.virtualenvs

6.  将 virtualenvwrapper.sh 添加到 .bashrc 将此行添加到 ~/.bashrc 的末尾，以便加载 virtualenvwrapper 命令。

    . /usr/local/bin/virtualenvwrapper.sh

7.  通过执行 ctrl+h，您将在主目录中找到 .bashrc.sh 文件。如果没有，则使用 find 命令查找 .bashrc.sh "file ls -la ~/ | more"

8.  打这个命令

    源 /usr/local/bin/virtualenvwrapper.sh

9.  打这个命令

    源〜/ .bashrc

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-10-30T04:03:31.807

听起来您的机器上安装了多个 Python，而 virtualenvwrapper 没有指向正确的 Python。

找出正在使用的 Python virtualenvwrapper。你会得到一个提示`which virtualenvwrapper.sh`（在这种情况下`/usr/local/bin`）：

```
> /usr/local/bin/virtualenvwrapper.sh 
```

如果您在这里没有得到任何回报，请确保在安装时使用正确的 pip。该`pip`命令可能会链接到您期望的不同 Python。检查您的`usr/local/bin`目录中的 pip 链接 ( `pip`, `pip2`, `pip2.7`, `pip3`, `pip3.5`)。很容易搞定系统`pip`，搞混了`pip2`。`pip2.7`

找到 Python 位置后，添加/更新您的所有路径`.profile`：

```
export WORKON_HOME=$HOME/venv
export VIRTUALENVWRAPPER_PYTHON=/usr/local/bin/python2
source /usr/local/bin/virtualenvwrapper.sh 
```

最后重新加载您的个人资料：`source ~/.profile`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-04-25T03:07:15.270

我在 Mac OS X 10.9.2 上，对我来说`virtualenvwrapper.sh`文件存在于

```
/usr/local/bin/virtualenvwrapper.sh 
```

所以我只是将它复制到`~/.profile`文件中：

```
source /usr/local/bin/virtualenvwrapper.sh 
```

现在我的`~/.profile`文件看起来像这样：

```
# MacPorts Installer addition on 2014-02-23_at_17:28:39: adding an appropriate PATH variable for use with MacPorts.
export PATH=/opt/local/bin:/opt/local/sbin:$PATH
# Finished adapting your PATH environment variable for use with MacPorts.

source /usr/local/bin/virtualenvwrapper.sh 
```

现在我可以`virtualenvwrapper`毫无问题地使用命令了

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-07-24T13:53:47.040

Python 的 Anaconda（来自 Continuum）发行版的用户应注意

```
sudo pip install virtualenvwrapper 
```

将是 anaconda 感知的。所以如果你

```
which python 
```

这应该让您了解在 .bashrc 和/或 .profile 配置文件中将 virtualenv 指向何处。

# mysql - Mysql 查询我想知道访问者投票例如（ answer_id (767) ）他们还投票给什么

> ID：12232422
> 
> 赞同：1
> 
> 时间：2012-09-02T00:14:16.790
> 
> 标签：mysql

当访客投票时，我存储信息`answer_id`等`ip`。

我的网站访问者在多项民意调查中投票。

我想知道例如投票的访问者（ answer_id (767) ）他们还投票给什么。基于ip。可以说 answer_id=767

表：**poll_stat**

```
`id` int(11) NOT NULL auto_increment,
`question_id` int(11) NOT NULL,
`answer_id` int(11) NOT NULL,
`ip` varchar(255) NOT NULL,
`date` date NOT NULL,
`country` text NOT NULL,
`time` int(11) NOT NULL,
`age` int(11) NOT NULL, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T00:20:32.437

我认为这对你有用。

```
select ip, question_id
from poll_stat
where ip in (select ip from poll_stat where answer_id = 767 group by ip)
and answer_id <> 767 
```

**编辑**

嗯...您可能会检查是否`INDEX`在 ip 列上创建了一个。如果不是这样，也许它不喜欢 IN 子句。我将重写为一个连接：

```
select ip, question_id
from poll_stat ps1
inner join (select ip from poll_stat where answer_id = 767 group by ip) ps2
on ps1.ip = ps2.ip
where answer_id <> 767 
```

# php - proc_open() 失败并显示“权限被拒绝”

> ID：12232427
> 
> 赞同：3
> 
> 时间：2012-09-02T00:15:20.580
> 
> 标签：php, apache, centos

我正在尝试使用`proc_open()`执行程序并打印结果。但是，我不断收到“权限被拒绝”。已将脚本和可执行文件的 chmod 设置为 0777，但无济于事。

`ini_get('safe_mode')`是假的。

有什么问题？

我正在使用 CentOS、Apache 和 PHP 5.3.3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T21:59:55.433

我在相同的设置下遇到了这个问题，结果证明问题是 SELinux（默认情况下处于打开状态）阻止 httpd 执行我的外部程序。您可以通过以下方式将其置于许可模式，

```
setenforce permissive 
```

如果您遇到与我相同的问题，那么现在一切都应该正常了。这将持续到您重新启动。

要使更改永久生效，请转到 /etc/selinux/config，然后更改：

```
SELINUX=enforcing 
```

至

```
SELINUX=permissive 
```

编辑：

好的，我找到了一种不需要关闭 SELinux 的方法。据我了解，问题在于 httpd 有自己的域，不能触及它之外的东西。因此，最简单的做法是将您的脚本/程序移动到 /var/www 目录树中。

如果这不可能，您可以改为就地更改程序的上下文：

```
semanage fcontext -a -t httpd_sys_content_t "/path/to/program(/.*)?" 
```

这基本上会说你的程序属于httpd。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T00:22:46.350

您必须启用 safe_mode 并查看您的 safe_mode_exec_dir。您不能在安全模式执行目录之外执行。如果您在 safe_mode_exec_dir 中有您的程序，则问题是您的共享主机（有时共享主机会禁用 exec 功能）

# hyperlink - 亚马逊添加到购物车 url 参数

> ID：12232428
> 
> 赞同：9
> 
> 时间：2012-09-02T00:15:29.573
> 
> 标签：hyperlink, parameters, amazon, amazon-product-api

好的，所以我已经是亚马逊的附属公司。我正在根据其 API 的结果动态生成链接。我试图让客户获得将商品添加到购物车的权限。我以这个结构为例：

[http://www.amazon.com/gp/aws/cart/add.html?AssociateTag=your-tag-here-20&ASIN.1=B003IXYJYO&Quantity.1=2&ASIN.2=B0002KR8J4&Quantity.2=1&ASIN.3=B0002ZP18E&Quantity。 3=1&ASIN.4=B0002ZP3ZA&Quantity.4=2&ASIN.5=B004J2JG6O&Quantity.5=1](http://www.amazon.com/gp/aws/cart/add.html?AssociateTag=your-tag-here-20&ASIN.1=B003IXYJYO&Quantity.1=2&ASIN.2=B0002KR8J4&Quantity.2=1&ASIN.3=B0002ZP18E&Quantity.3=1&ASIN.4=B0002ZP3ZA&Quantity.4=2&ASIN.5=B004J2JG6O&Quantity.5=1)

只要我销售仅限亚马逊的产品，这很有效。我想做的是把它们放在该产品的最低价格之前（其他人/经销商在亚马逊上出售的商品）。

我已经有了最低的价格等等。问题是构建链接以使它们到达那里。你们中是否有人知道我要添加的 url 中的参数，或者至少是我可以筛选的参数列表以找到我要查找的内容？

此外，如果有一种方法可以将物品放入他们的购物车，而不是让他们获得添加到购物车的许可……那就更好了！

提前致谢！

* * *

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2021-07-25T14:32:19.690

“添加到购物车”表单使您能够将任意数量的商品添加到客户的购物车中，并将客户发送到亚马逊零售网站以完成购买。某些参数是可选的，但您必须指定数量和至少以下参数之一：ASIN 或 OfferListingId。AssociateTag 是必须进行归因的。您可以使用此[在线亚马逊添加到购物车链接生成器](https://www.techneg.tech/p/amazon-affiliate-add-to-cart-url.html)轻松生成添加到购物车链接而无需自己编写属性，也可以像这样手动执行此操作：

```
"ASIN.1=[ASIN]&Quantity.1=1&ASIN.2=[Another ASIN]&Quantity.2=10" 
```

您的最终链接可能如下所示：

```
https://www.amazon.in/gp/aws/cart/add.html?AWSAccessKeyId=leNM%2FocHLQ%2ByqCuwtsgoza8buGoeRSlHuoDGRnlb&AssociateTag=ajaykumar9207-21&ASIN.1=B07CQ6Q52H&Quantity.1=1&ASIN.2=B07CQ6Q52H&Quantity.2=1&ASIN.3=B07CQ6Q52H&Quantity.3=1&ASIN.4=B07CQ6Q52H&Quantity.4=1&ASIN.5=B07CQ6Q52H&Quantity.5=1 
```

# jquery - 使用 jQuery 删除第一个列表元素

> ID：12232431
> 
> 赞同：10
> 
> 时间：2012-09-02T00:16:27.650
> 
> 标签：jquery

我有以下列表：

```
<ul id="list">
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
    <li>5</li>
    <li>6</li>    
</ul> 
```

如何使用 jQuery 删除此列表的第一个元素（即数字 1）并保持其余元素不变？

我原以为这是一个非常简单的解决方案，但事实证明它比我预期的要难。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-02T00:17:57.743

```
$('#list li').first().remove(); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/DvGa9/)**

参考：

*   [第一的](http://api.jquery.com/first/)
*   [消除](http://api.jquery.com/remove/)

您也可以使用纯 CSS3（无 JavaScript）实现类似的效果：

```
#list li:nth-child(1) {
    display:none;
}​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T00:20:26.037

```
$("#list li:first-of-type").remove(); 
```

# c++ - 编译器错误：“区域”未在此范围内声明

> ID：12232432
> 
> 赞同：0
> 
> 时间：2012-09-02T00:17:04.823
> 
> 标签：c++, compiler-errors

我刚刚开始学习 c++，并正在尝试编写一个程序来查找圆的面积。我已经编写了程序，每当我尝试编译它时，我都会收到 2 条错误消息。第一个是：

```
areaofcircle.cpp:9:14: error: expected unqualified-id before numeric constant 
```

第二个是：

```
areaofcircle.cpp:18:5: error: 'area' was not declared in this scope 
```

我应该怎么办？我会发一张图片，但我是新用户，所以我不能。

```
#include <iostream> 
using namespace std; 
#define pi 3.1415926535897932384626433832795 
int main() 
{
    // Create three float variable values: r, pi, area 
    float r, pi, area; 
    cout << "This program computes the area of a circle." << endl; 

    // Prompt user to enter the radius of the circle, read input value into variable r 
    cout << "Enter the radius of the circle " << endl; 
    cin >> r; 

    // Square r and then multiply by pi area = r * r * pi; 
    cout << "The area is " << area << "." << endl; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T00:32:45.243

问题比较简单。见下文。

> ```
> #define pi 3.1415926535897932384626433832795 
> int main() 
> {
>     // Create three float variable values: r, pi, area 
>     float r, pi, area; 
> ... 
> ```

请注意，您对`pi`. 这会将声明中的变量名称替换`pi`为 text `3.1415926535897932384626433832795`。这会导致此处看到的错误：

> 错误：数字常量之前的预期不合格 id

现在，由于这导致对该语句的解析失败，因此`area`永远不会被声明（因为它是 after `pi`）。结果，您还会收到以下错误：

> 错误：“区域”未在此范围内声明

请注意，您实际上也既不分配`pi`也不分配`area`……您需要先执行此操作。

作为一般经验法则，*不要将宏用于 C++ 中的常量*。

```
#include <iostream>
#include <cmath>

int main() {
  using std::cin;
  using std::cout;
  using std::endl;
  using std::atan;

  cout << "This program computes the area of a circle." << endl;

  cout << "Enter the radius of the circle " << endl;
  float r;
  cin >> r;

  float pi = acos(-1.0f);
  float area = 2 * pi * r;
  cout << "The area is " << area << '.' << endl;

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T19:15:21.093

构建和工作正常的修改代码：

```
///--------------------------------------------------------------------------------------------------!
// file:    Area.cpp
//
// summary: console program for SO

#include <iostream> 

using namespace std; 

const double PI = 3.1415926535897932384626433832795;

int main() 
{
    // Create three float variable values: r, pi, area 
    double r, area; 
    cout << "This program computes the area of a circle." << endl; 

    // Prompt user to enter the radius of the circle, read input value into variable r 
    cout << "Enter the radius of the circle " << endl; 
    cin >> r; 

    // Square r and then multiply by pi area = r * r * pi; 
    area = PI*r*r;
    cout << "The area is " << area << "." << endl;

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T00:37:16.120

对于初学者，您实际上从未将任何内容分配给“区域”，因此它仍然未定义（实际上包含一个随机数）。尝试`area = r * r * pi;`在最后一个 cout 之前添加该行。您还想`float pi`从变量列表中删除 ，因为它与`#define pi`顶部的 冲突。稍后，当您了解相关信息时，`#include <math>`您*可能会*在内部找到一个`M_PI`常数，这样您就不必自己动手了。

# java - 实时java - 如何应用多次运行

> ID：12232434
> 
> 赞同：5
> 
> 时间：2012-09-02T00:17:48.693
> 
> 标签：java, multithreading, algorithm, real-time

我正在研究实时 java 来实现传感器网络模拟。我的模拟有效，但问题是我想做一些敏感性分析，所以我需要多次运行模拟，一个接一个。在第一次迭代之后，由于暂停，我无法获得任何结果，激活或重置它们有点问题。所以这里是代码：

```
class Response_Time extends SimulationProcess{

/*static Random seed ;

public Response_Time(Random seeds) {
    seed= new Random (seeds);
}*/

public static void main(String[] args){

    for(int i=0;i<5; i++)
    {

    Response_Time exp = new Response_Time();
    exp.await();

    }

}

public void run(){

    System.out.println("Creating components...");
    Mesh2DSensorNetwork sn = new Mesh2DSensorNetwork(7,7);
    Task_Generator tg = new Task_Generator(sn);     
    emiission ee = new emiission(sn);
    DataCollection dc = new DataCollection(sn, tg);

    try {

        tg.Activate();
        ee.Activate();
        dc.Activate();
        sn.Activate();
        Scheduler.startSimulation();
        System.out.println("Simulation started... "+CurrentTime());
        Hold(576000);
        System.out.println("Simulation stopped... "+CurrentTime());
        Scheduler.stopSimulation();
        tg.terminate();
        ee.terminate();
        dc.terminate();
        sn.terminate();
        SimulationProcess.mainResume();

    } catch (Exception e) {
        e.printStackTrace();
    } 

}

public void await ()
{
    this.Resume();
    //SimulationProcess.mainSuspend();
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T01:05:36.347

我认为您需要使用`Scheduler.reset()`来重新启动模拟。您可能还需要调用`SimulationProcess.finalize()`当前进程以将其从当前进程集合中删除（该项目对静态/全局成员有一些丑陋的使用）。

# javascript - 在新创建模式将使用的函数之外定义私有变量

> ID：12232436
> 
> 赞同：0
> 
> 时间：2012-09-02T00:17:59.303
> 
> 标签：javascript, oop, prototype-programming

这个问题是我的旧问题[将范围变量添加到构造函数](https://stackoverflow.com/questions/12226559/adding-scope-variable-to-a-constructor)的简化版本。问题很简单，我可以在不更改函数的情况下将 priv 变量添加到 fu() 的范围吗？（不在功能块内部添加）

[这是小提琴](http://jsfiddle.net/Mxu5M/2/)

这是代码：

```
fff = function() {
    alert('constructed');
    //alert(priv);
};
pro = {
    pub: 'public'
}
var make = function(fu, pro) {

    var priv = 'private';
    fu.prototype = pro
    return function() {
      return new fu();
    };
};

var cls = make(fff, pro);
var obj = cls();

alert(obj.pub);​ 
```

如您所见，如果您取消注释

```
//alert(priv); 
```

行 Uncaught ReferenceError: priv is not defined 错误。

我需要一种方法来重新定义 fu() 函数对象的范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T00:28:41.750

我没有看到`fu`列出的对象，但我认为答案是“是”，您可以在不更改“函数”的情况下添加私有变量。现在，我可能会遗漏一些东西，但如果我关注你，这就是你想要的：

```
var fu = {
           DoStuff: function(someVar){
            alert(someVar);
}
}; 
```

然后在您的代码中：

```
fu["NewPrivateVar"] = "something!"; 
```

或以点表示法：

```
fu.NewPrivateVar = "someting!"; 
```

最后：

```
fu.DoStuff(fu.NewPrivateVar); 
```

结果是：

```
"something!" 
```

那是你想要做的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T00:38:40.237

您不能通过从对象或闭包内部调用函数来更改函数的范围。

但是，您可以将变量添加到函数的范围内，即在全局范围内：

```
window.priv = 'private'; 
```

这将使函数无需更改即可工作，但变量不是很私密......

# java - 如何通过poi注册函数？

> ID：12232439
> 
> 赞同：3
> 
> 时间：2012-09-02T00:18:06.793
> 
> 标签：java, excel, apache-poi

有谁知道如何注册一个 poi 无法实现的功能？例如：拦截？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T06:14:25.787

答案取决于你想要实现什么样的功能。它是 Excel 内置函数之一，在文件格式中具有特殊的预定义 ID，POI 目前没有实现吗？还是用于用户定义的功能？（最近的一些excel函数实际上是作为文件格式的UDF实现的）

如果是后者，那么[POI 网站](http://poi.apache.org/spreadsheet/user-defined-functions.html)上有关于如何做到这一点的优秀文档- 我建议你[遵循它](http://poi.apache.org/spreadsheet/user-defined-functions.html)，你应该没问题！

如果是前者，那就有点棘手了。最好的办法是自己实现公式，在[POI Bugzilla](http://issues.apache.org/bugzilla/buglist.cgi?product=POI)中打开一个增强错误并附加您的实现，然后获取包含您的修复的每晚构建。为了进行测试，您需要编辑函数元数据文件，以根据函数的文件格式 ID 注册您的类。这有点繁琐，但如果每个人都为 POI 贡献了一个缺失的功能，那么我们很快就会到达那里！

*更新：*有关实现内置功能的更多信息。首先，在 functionMetadata.txt 中找到函数的 ID [（](https://svn.apache.org/repos/asf/poi/trunk/src/resources/main/org/apache/poi/ss/formula/function/functionMetadata.txt)您的情况为 311）。接下来，实现功能。现在，`org.apache.poi.ss.formula.eval.FunctionEval`在适当的索引处自定义并添加您的函数。最后，提交补丁！（重写内置函数是半刻意的，部分原因是为了鼓励人们贡献缺失的函数！）

# java - Eclipse 中的程序未运行

> ID：12232446
> 
> 赞同：0
> 
> 时间：2012-09-02T00:18:52.000
> 
> 标签：java, eclipse

我刚刚安装了 Eclipse 4.2.0 并将我所有的旧程序都导入其中，除了当我运行我的程序时，它会弹出一条消息说：

选择要运行的内容：

Ant Build：使用默认值启动 Ant Build

Ant Build...：启动 Ant Build 并允许对其进行配置

![在此处输入图像描述](../Images/1ff07bbca02a601602e6f02581bf90d5.png)

这条消息以前从未出现在我面前。我想知道是因为我错误地导入了我的文件还是我忘记安装的东西。请告诉我如何使它再次正常工作。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T00:39:21.470

啊! 这是我之前遇到的一个问题。这个技巧解决了这个问题。这是如何做到的。

确保你已经构建了它。或者您可以启用`Project --> Build Automatically`.

设置上述选项后，尝试清理工作区。`Project --> Clean`并清理您导入的所有项目。

现在`restart`eclipse，你可以启动你的程序了。

# objective-c - 使用 NSNotificationCenter 从另一个视图更新 UILabel

> ID：12232450
> 
> 赞同：0
> 
> 时间：2012-09-02T00:19:31.543
> 
> 标签：objective-c, ios, uilabel, nsnotificationcenter

我正在使用使用 NSNotification 中心调用的方法在另一个视图中更新 UILabel。

我发现它不起作用，标签保持不变，直到稍后重新加载视图（不使用 nsnotification 中心调用的方法）。

标签设置为非原子，保留，我使用 self 将所有内容绑定到该属性。

显然，所有尝试更新标签的代码（方法）都位于相应的 viewController 中。该方法被调用（我可以通过 NSLog 看到），它所做的只是 self.label2.text = @"label 2 updated";

我可以使用计时器更新标签的文本值就好了，所以我认为标签没有问题，而是我对线程和/或给定加载或未加载的内容的理解时间。

你认为是什么问题？

PS：我会选择一个答案，即使它对我没有太大帮助，所以请发表你最疯狂的猜测！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T00:34:46.677

首先确保您的标签不在`nil`您设置文本时。

如果不是`nil`，请在设置文本后尝试调用`setNeedsLayout`您的标签（这不是必需的）。另外，验证您是否在主线程上：

```
[NSThread isMainThread] 
```

如果这没有帮助，请使用 的子类`UILabel`，覆盖`setText`并在其上放置断点以查看发生了什么。

# git - 不知道如何配置 git 仓库 - Git、GitHub、GitBox、EGit、Eclipse Indigo 等诸多问题

> ID：12232459
> 
> 赞同：2
> 
> 时间：2012-09-02T00:20:51.407
> 
> 标签：git, github, osx-lion, egit, gitbox

我是论坛的新手，也是 git、github 和所有其他 git-things 的新手。我和另一个人正在为我们的学位项目使用 git 和 github，但由于我不是终端的好朋友，这真的让我发疯。

让我告诉你我到目前为止所做的事情：

*   Mac OS X 狮子 10.7.4
*   安装了 EGit 插件的 Eclipse Indigo
*   从 mac 上的图形视图安装的 git
*   安装了 gitBox
*   带有存储库的 github 帐户（我通过下载 github for mac 并按照说明创建了存储库：输入名称、电子邮件地址等）-> 这就是我进行配置的方式。
*   我第一次启动 gitbox 并选择了“克隆存储库”选项。然后输入 github repo url，然后选择位置并点击接受。

现在问题是我真的不明白它应该如何工作，我需要能够将我正在处理的 eclipse 工作区中的更改链接到我创建的存储库。

当尝试使用 EGit 插件从 Eclipse 创建存储库时（右击项目 > Team > Share...），创建的存储库显示：[NO-HEAD] 而不是 master（这是为 repo 创建的唯一分支） .

帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:53:57.207

最后，我可以按照本指南弄清楚这一点：

[http://www.vogella.com/articles/EGit/article.html](http://www.vogella.com/articles/EGit/article.html)

享受！;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T00:24:59.033

克隆存储库可能无法正常工作，因为没有可克隆的内容。github 存储库是空的。例如，甚至没有一次提交。

HEAD 指的是最后一次提交。这意味着它无法克隆它，因为主分支中没有任何提交。

您可以简单地在本地机器上**初始化一个新的存储库。**将文件复制到存储库，并将这些文件作为初始提交提交**。**然后，将 github URL 添加为源，并将更改**推**送到源。

不确定您正在使用的 egit GUI git 界面，但这里是您需要执行的主要命令（您可以尝试在可用菜单中找到）：

*   “git init”：创建新的空存储库
*   “git add .”：暂存/准备所有要提交的更改文件
*   “git commit”：提交暂存文件（即，将其保存为文件的版本）
*   “git push”：将当前分支（默认为 master）上的文件推送到源 - 如果 github 有一个空存储库，您可以将任何内容推送到它。

* * *

要将文件从 github 复制回本地计算机：

*   “git pull”：从原点获取所有更改，并在您的工作目录中签出新的 HEAD

    *   “git fetch”：从原点获取更改，但不签出新的 HEAD
*   “git checkout HEAD”：检查头部提交

# javascript - string.split 问题

> ID：12232460
> 
> 赞同：-1
> 
> 时间：2012-09-02T00:21:02.347
> 
> 标签：javascript, string, internet-explorer-9

我第一次使用 .split() 调用函数时，它失败了，但此后它工作了。知道为什么它在 IE9 中如此吗？有没有人有这个错误/复杂性和修复它的经验？如果不是这样，是否有 .split() 的替代品可以在 IE8 和 9 中无缝运行？非常感谢。

编辑：

第一次调用该函数时出现的错误消息是：

```
ERROR: SCRIPT5007: Unable to get value of the property 'split': object is null or undefined. 
```

EDIT2，引发错误的代码：

```
function parseArgs() {
...
    var urlParams = $(allE[i]).css('list-style-image').split('?')[1].split('_');
...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T00:27:13.027

为避免该错误，请测试字符串对象是否不为空。Null 没有成员：

```
function parseArgs() {
...
    var urlParams = [];
    var listStyleImage = $(allE[i]).css('list-style-image');
    if(listStyleImage) { // <-- might be null
       var items = listStyleImage.split('?');
       if(items.length>0) urlParams = items[1].split('_');
    }
...
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-02T00:31:28.273

你想要的`split`是一个 jQuery 对象。也许您必须先尝试调用 a`.html()`或 a`.text()`才能调用 split 函数。

更新：

好吧，我的坏。`.css()`不返回 jQuery 对象。有时它会返回 CSS 属性的值。它可能是字符串，也可能不是。但无论如何，`.split()`只能在一个字符串对象上调用。刚刚浏览了文档：[http ://api.jquery.com/css/](http://api.jquery.com/css/)

# arrays - Lua 中的内存管理

> ID：12232465
> 
> 赞同：1
> 
> 时间：2012-09-02T00:21:54.777
> 
> 标签：arrays, lua

我正在为 lua 中的一个简单游戏制作关卡编辑器，并且图块由 2d 数组中的整数表示，当我从文件中读取关卡描述时，可能会发生这个 2d 数组填充稀疏的情况，lua 如何管理内存？它会保留阵列中的这些孔，还是会很聪明而不浪费任何空间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T00:43:59.397

这个问题本身在实际意义上是无关紧要的。您有以下两种情况之一：

1.  您的瓷砖地图相当小。
2.  您的 tilemap 足够大，因此压缩对于适应内存限制很重要。

如果＃1是这种情况，那么你不应该关心。Lua 的内存效率有多高并不重要，因为你的 tilemaps 不够大，以至于它根本不重要。

如果＃2是这种情况，那么您也不应该在意。为什么？因为如果适合内存对您很*重要*，并且您可能会用完，那么您不应该让 Lua 碰巧管理数组内存的方式变幻莫测。

如果内存很重要，您应该构建一个 Lua 可以*使用*但用 C 编写的专用数据结构。这样，您可以显式控制内存管理；因此，您的瓷砖地图将占用您选择的内存。

至于实际问题，这取决于您如何构建“数组”。Lua 表本质上是关联数组，但它们的实现分为“数组部分”和“表部分”。一般来说，如果你稀疏地存储元素，那么元素将稀疏地存储在内存中（对于“稀疏”的某些定义）。只要你不做一些愚蠢的事情，比如：

```
for i = 1, max_table_size do
  my_tilemap[i] = 0
end 
```

再说一次，出于性能原因，您可能*希望这样做。*这可确保您拥有一个大数组而不是一个稀疏表。由于数组元素是引用而不是值，因此每个元素可能只占用 16 个字节。一旦你决定在一个条目（一个实际的瓷砖）中放置一些真实的东西，你就可以。在这种情况下，对数组的索引会很快，但由于表部分是一个哈希表，它并不是很慢。

# c++ - C ++中有序树的良好节点定义

> ID：12232466
> 
> 赞同：3
> 
> 时间：2012-09-02T00:22:25.463
> 
> 标签：c++, data-structures, api-design

我有一个代表整数集的有根有序树。每个节点存储相关子树的大小，以及该子树中的最大和最小元素。如果固定（但在运行时确定），则所有节点的分支度。同样对于足够小的子树，我想将表示更改为关联子集的位图。例如，根节点可能存储一组大小为 1000000 的子节点，其中一个子节点将存储大小为 100000 的子集，然后他的一个子节点将再次存储大小为 10000 的子集，在下一个级别中，我们将停止使用此表示并只存储相关子集的普通位图。

我正在尝试在 C++ 中实现这个结构，我对节点类型的定义存储了三个整数（大小、最小值和最大值）、指向子树的指针数组（类似于 node_t ** 子节点）和位图（如果我们是使用这种表示）。问题是所有节点都存储了至少一个不相关的元素（例如，如果集合足够大，我们将使用指针数组而不是位图）。应该如何声明节点类型来解决这个问题？我考虑过使用两种节点子类型（每种情况一个），但我不确定对运行时性能的影响是什么。

提前致谢。PS。如果问题不清楚以进行编辑，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T01:06:58.030

由于您使用多种表示形式，您可能至少需要两种节点类型：第一种将是处理根以及附近后代的通用节点，第二种类型将包含指向地图的指针。后面的节点没有任何子节点，但它们的直接祖先应该将它们视为整个子树，而不是指向地图的终止节点。

由于每个上层节点都有指向其子节点的指针，因此您需要一种方法来确保这些指针也能够指向 mapNode 以及分支节点。一个很好的方法是创建一个带有虚拟函数的虚拟基节点类型，该函数返回您正在寻找的任何数据。例如：

```
class baseNode {
  virtual int getLargest();
  virtual baseNode* addData(int);
};

class leafNode : baseNode { //for non-map termination
  leafNode(int in) {Data = in;}

  int getLargest() {return Data;}
  baseNode* addData(int);

  int Data;
};

class treeNode : baseNode {

public:
  int getLargest(); //returns leftChild->getLargest(), etc
  baseNode* addData(int);

  baseNode* leftChild;//can point to either a treeNode or mapNode
  baseNode* rightChild;
};

class mapNode : baseNode {
  baseNode* addData(int);
  int getLargest(); //parses subMap to find/return the desired value

  Map* subMap;
}; 
```

你需要一些技巧才能让它做你需要做的事情，但原理是一样的。请记住，对于 1m 个对象，您添加的每个字节都会增加大约 1 MB 的净内存使用量，因此请尽量保持最小。如果您的所有分支节点最终都到达一个 mapNode，您可以`leafNode`完全消除该声明。

向结构中添加数据很棘手，特别是因为您正在使用多种类型并且父母（希望）对他们的邻居一无所知；使用虚拟访问器来做需要的事情。在许多情况下，如果分支节点尝试“向下”添加值，则它引用的子节点可能需要更改类型。在这种情况下，子结构应该构造新的子结构，然后将其返回给父结构。这可以这样做：

```
baseNode* treeNode::addData(int in) {
  if ((childCount+1) < threshold) { //not enough to merit a map
    //....
    //if (input needs to go to the leftChild) {
      if (leftChild == 0) {
        leftChild = new leafNode(in); 
      } else {
        leftChild = leftChild->addData(in);
      }
    //}  
    return (baseNode*)this; //casting may be optional
  } else {  //new Data merits converting self + kids into a map
    mapNode* newMap = new mapNode();
    //Set newMap->subMap to children, deleting as you go

    delete this;//remove self after return
    return (baseNode*)newMap; //return the mapNode holding subtree
  }
}

baseNode* leafNode::addData(int in) {
  treeNode* tmpNode = new treeNode(); //create replacement
  tmpNode->leftChild = this; //pin self to new node
  tmpNode->rightChild = new leafNode(in); //store data
  return (baseNode*)tmpNode;
}

baseNode* mapNode::addData(int in) {
  subMap->addValue(in);//However you do it...
  return (baseNode*)this; //parent is always a treeNode
} 
```

通常`leftChild = leftChild->addData(in);`实际上不会修改任何东西，特别是如果它指向一个treeNode，但是这样做并没有真正伤害任何东西，额外的`if (newPtr != leftChild)`检查只会增加不必要的开销。请注意，如果一个leafNode 需要更改为具有多个孩子的treeNode，或者如果它是一个具有足够孩子的treeNode 值得将其自身（而且是孩子！）更改为mapNode ，*则会导致更改。*

# java - 使用简单返回的 Java xml 解析？？？而不是希腊字母

> ID：12232467
> 
> 赞同：3
> 
> 时间：2012-09-02T00:22:34.280
> 
> 标签：java, xml-parsing, simple-framework

我试图从以下 xml 中获取值，但我编写的代码返回一堆问号而不是它应该返回的值。我猜这一定是一些编码问题，但我还没有在网上找到任何关于此的内容。

```
 <channel>
    <title>ΖΩΔΙΑ Προβλέψεις, 1 Σεπτεμβρίου 2012</title>
   </channel> 
```

zodiaClass.java

```
public class zodiaClass {

    @Root(strict = false)
    public static class Example {

        @Path("channel")
        @Element
        private String title;

    }

    public static void main(String[] list) throws Exception {
        Persister persister = new Persister();
        File file = new File("example1/download.xml");
        Example example = persister.read(Example.class, file);

        System.out.println(example.title);
    }
} 
```

输出：

```
????? ??????????, 1 ??????????? 2012 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T12:57:42.570

[根据要求，这是将上述评论线程翻译成答案的形式。]

我怀疑问题出在输出上，而不是输入上。并非所有命令行环境都支持希腊语。要对此进行测试，您可以尝试`System.out.println("\u03B1")`；如果您的命令行支持希腊语，它应该显示为 α（小写字母 alpha）。

在您的一条评论中，您提到您正在使用 Eclipse。如果事实证明问题出在输出上，那么[谷歌搜索 Eclipse 控制台编码](https://www.google.com/search?q=Eclipse+console+encoding)表明人们已经成功尝试了许多不同的方法——从[修改 Eclipse 中的相关运行配置](http://decoding.wordpress.com/2010/03/18/eclipse-how-to-change-the-console-output-encoding/)到[编辑`eclipse.ini`和系统编码](http://paranoid-engineering.blogspot.com/2008/05/getting-unicode-output-in-eclipse.html)。

**更新：** [不是*真正*的更新，但我试图保持定期回答的错觉。. .] 我从您的后续评论中看到，您可以通过更改`*.java`文件的编码来更改控制台编码。凉爽的！

# mysql - 从 ibd 文件恢复 *partitioned* mysql InnoDB 表

> ID：12232469
> 
> 赞同：4
> 
> 时间：2012-09-02T00:23:00.280
> 
> 标签：mysql, innodb, restore, database-partitioning

如何仅从 TableName#P#pname.ibd 形式的 .ibd 文件中恢复分区的 mysql InnoDB 表？Chris Calendar 在此处的文章 [http://www.chriscalender.com/?p=28](http://www.chriscalender.com/?p=28) 适用于具有单个 .ibd 文件的非分区表，但“丢弃”和“导入”步骤导致“存储引擎不分区表有此选项”错误。

Wes Smith 在上面链接的其中一条评论中建议使用手动过程一次导入一个分区，但这对我不起作用。如果我尝试按照他的方法创建一个非分区表，移动第一个重命名为 TableName.ibd 的 .ibd 文件，然后进行导入，导入成功，但表中的行数为零。随后建议的“添加回分区”步骤`"alter table TableName partition by range ... (partition pname1 values less than (...) ENGINE=InnoDB)"`令人震惊地用一个很小的新 TableName#P#pname1.ibd 替换了 TableName.ibd 文件（对应于第一个分区）。尝试这样做时，我丢失了一个分区的数据。我有大约 150 个分区要恢复。

关于如何从 .ibd 文件中恢复数据的任何建议？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T05:27:11.193

因此，事实证明，原始帖子链接的评论中建议的方法确实有效。我在上面的“更改表...”步骤中提到的分区的删除是合法的，因为在丢失 ibdata 和日志文件之前，它已在原始表中被故意删除（但 mysql 无论如何都不会删除 .ibd 文件） . 恢复过程非常缓慢，但我设法编写了脚本并希望让它在接下来的几天内运行完成。

如果您发现自己处于类似情况，需要恢复许多分区，这里有一些提示。假设您有一个包含 100 个分区的表 TableName。通常，如果通过“create table”语句创建 100 个分区，它们将具有连续的 innodb ID，但通常情况可能并非如此，因为分区可能是在创建后添加的。所以，这里是步骤：

1）使用上面博客中Calendar的方法找出每个partition对应的innodb ID如下。注意这一步不需要重启mysql服务器。只需创建一个像 TableName 这样没有任何分区的表并丢弃它的表空间。然后将第一个分区的 .ibd 文件（命名为 TableName#P#pname1.ibd）作为 TableName.ibd 移动到数据库目录并尝试导入它。查看 mysql error.log（通常是 /var/log/mysql/error.log）以查看该分区的 innodb ID 是什么。对每个分区（或根据需要）重复此步骤，直到文件中的所有分区都有 2 元组（innodb_ID_i，partition_boundary_i）。

2）从一个空的innodb状态开始（停止服务器，删除ibdata和ib_logfile*，重新启动服务器）。对于上面步骤 1 中文件中的每个 innodb_ID 条目，创建一个表 TableName_i，如 TableName。例如，如果这 100 个分区对应的 ID 为 321、322、...、370、415、416、...464（两个块，每个块有 50 个连续 ID），那么编写一个脚本来创建 320 个虚拟表，50 个表像 TableName、45 个虚拟表和 50 个像 TableName 的表。

3) 对于上面创建的每个 TableName_i 表，

```
--do 

     (i) rename table TableName_i to TableName

     (ii) alter table TableName discard tablespace // important to do this step before the next one

     (iii) mv TableName#P#pname_i.ibd TableName.ibd // with the appropriate directory prefixes

     (iv) alter table TableName import tablespace

     (v) alter table partition by range (partition_field) (partition pname_i values less than (partition_boundary_i))   // This is the most and only time consuming step

     (vi) rename table TableName to TableName_i // or some other name or just dump it to a file

--repeat 
```

请注意，上述所有步骤都是可编写脚本的，并且不需要在任何时候重新启动服务器，除非在第 2 步开始时以空的 innodb 状态开始。在进行下一步之前，请注意在步骤 3 中引入对每个子步骤是否成功的检查，否则后续步骤可能会失败和/或 .ibd 文件可能会被覆盖。如果可行，请在步骤 3(iii) 中使用副本而不是 mv。

最后一点：使用 percona 的恢复工具包使用十六进制编辑可能会稍微简单一些，但这不适用于我的分区表情况。我遇到了同样的，看似未解决的问题，分区表如[http://www.mysqlperformanceblog.com/2011/05/13/connecting-orphaned-ibd-files/](http://www.mysqlperformanceblog.com/2011/05/13/connecting-orphaned-ibd-files/)的评论之一所述。不过，您的里程可能会有所不同。如果有一种方法可以避免重新创建分区（如上面的步骤 3(v)），那将是非常好的和快速的，但我不确定是否有一个。

# haskell - 为什么 cabal 不能动态构建 maytpd2？

> ID：12232471
> 
> 赞同：3
> 
> 时间：2012-09-02T00:23:14.213
> 
> 标签：haskell, ghc, cabal

GHC 静态链接我的可执行文件时太慢了，所以我想使用“-dynamic”选项进行测试。以下两个命令虽然可以，但会导致相同的错误`cabal install mighttpd2`。

```
$cabal install --ghc-options=-dynamic mighttpd2
$cabal install --enable-executable-dynamic mighttpd2

Linking dist/build/mkindex/mkindex ...
Preprocessing executable 'mightyctl' for mighttpd2-2.7.1...
Process.hs:11:8:
    Could not find module `Data.Conduit.Process'
    Perhaps you haven't installed the "dyn" libraries for package `process conduit-0.5.0.2'?
    Use Perhaps you haven't installed the "dyn" libraries for package `process-conduit-0.5.0.2'?
    Use -v to see a list of the files searched for.
    cabal: Error: some packages failed to install:
    mighttpd2-2.7.1 failed during the building phase. The exception was:ExitFailure 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T00:40:33.823

您需要安装所有`mighttpd2`依赖的库的动态版本。 `cabal-install`正确地抱怨动态版本`process-conduit`不可用。您将不得不重新安装传递给`mighttpd2`的整个依赖关系树。`--enable-shared --enable-executable-dynamic``cabal-install`

# java - Java Nailgun 无法启动简单的 Swing 应用程序

> ID：12232472
> 
> 赞同：3
> 
> 时间：2012-09-02T00:23:31.577
> 
> 标签：java, swing

## 背景

[Nailgun](http://martiansoftware.com/nailgun/background.html)是一个实用程序（服务器协议客户端），用于将 Java 应用程序发送到服务器，目的是减少 VM 的启动时间。

## 问题

一个不同的基本摆动应用程序无法通过 nailgun 启动。调用 setDefaultCloseOperation 时，应用程序在标有“NG 1”和“NG 1.1”的行之间退出。服务器打印： `NGSession 2: 127.0.0.1: org.genja.volumeslider.Aframe exited with status 0`
如果我注释掉 JFrame 的关闭操作方法，框架显示它应该。

## 代码

```
 package org.genja.volumeslider;
   import java.awt.*;
   import java.awt.event.*;
   import javax.swing.*;
   import javax.swing.event.*;
   import javax.imageio.*;
   import java.util.*;
   import java.io.*;

   public class Aframe {
       public static void main(String[] argv) {
           System.out.println("NG 1");
           JFrame frame = new JFrame("VolumeSlider");
           frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
           System.out.println("NG 1.1");
           frame.setPreferredSize(new Dimension(64,200));
           frame.setResizable(false);

           JSlider  slider = new JSlider(JSlider.VERTICAL, 0, 55, 12);

           frame.add(slider, BorderLayout.CENTER);
           //Display the window.
           frame.pack();
           frame.setVisible(true);
       }
   } 
```

## 问题

这可能是什么原因造成的？这是 nailgun 中的错误，还是我应该使用其他方式在 swing/java 中启用关闭按钮？我认为有必要提到应用程序确实退出而没有问题（x 按钮有效），即使该类是通过 nailgun 运行的，也没有设置默认的关闭操作（也许 nailgun 以某种方式这样做？）。

在这一点上我很困惑，任何建议都会很有用。

**更新：**

keylistener 似乎也获得了未正确配置的 KeyEvents。我遇到数字键在使用 KeyEvent.VK_[0-9] 切换时仍然可以通过，但 VK_ESCAPE 和 VK_Q 等键似乎不匹配。我可能应该只查看它们在该 VM 中生成的“原始”代码并与之匹配，而不是 KeyEvent.VK_* 常量。合理的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T23:44:30.890

钉枪作者在这里。

安德鲁的直觉是完全正确的。Nailgun 使用 SecurityManager 来防止一个类的 System.exit() 杀死整个 Nailgun VM。

如果您将默认关闭操作设置为 EXIT_ON_CLOSE 则关闭窗口将关闭 VM 并阻止将来的调用，我猜您不想阻止。

快速检查 JFrame 的 openjdk 源代码可以确认在您调用 setDefaultCloseOperation(EXIT_ON_CLOSE) 时调用了 System SecurityManager 的 checkExit() 方法。这就是你的应用程序正在消亡的地方。结果，您可能还会看到 com.martiansoftware.nailgun.NGExitException。

当您设置默认关闭操作而不是尝试退出时，JFrame 会检查退出权限，这很好 - 至少它很容易找到！:)

# jquery - jQuery 日历应用程序

> ID：12232473
> 
> 赞同：1
> 
> 时间：2012-09-02T00:23:32.543
> 
> 标签：jquery, calendar

我需要一些关于 jQuery 日历应用程序的帮助。我正在寻找的特定日历可以在以下地址找到。如果有人知道并且愿意向我提供以下链接中使用的日历的名称，我将很高兴。

[日历示例 1](http://www.macroeconomics.lv/)

[日历示例 2](http://www.macroeconomics.lv/calendar)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T00:39:58.160

在 chrome 上右键单击页面，选择检查元素，然后转到资源面板并检查脚本文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T00:45:45.837

在您的链接中，它是一个定制的服务器端日历。它与 jQuery 无关。

# jquery - SCRIPT5：由于 Wordpress 中的 jQuery.min CDN 文件，IE9 上的访问被拒绝

> ID：12232475
> 
> 赞同：6
> 
> 时间：2012-09-02T00:24:00.537
> 
> 标签：jquery, wordpress, internet-explorer, debugging, internet-explorer-9

我已经阅读了很多关于 SCRIPT5: Access is Denied issue in IE9 的其他文章，但据我所知，这篇文章有点不同，我不确定它为什么会发生。

这种情况出现在使用标准 2011 主题的 Wordpress 3.4.1 安装上。我使用以下函数将我的脚本排入队列：

```
function my_scripts(){
    wp_deregister_script('jquery');
    wp_register_script('jquery', 'http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js',null,null,true);
    wp_register_script('cycle', 'http://ajax.microsoft.com/ajax/jquery.cycle/2.88/jquery.cycle.all.js',null,null,true);
    wp_register_script('plugin', get_stylesheet_directory_uri() . '/scripts/plugin-init.js',null,null,true);
    wp_enqueue_script('jquery');
    wp_enqueue_script('cycle');
    wp_enqueue_script('plugin');
} 
```

首先，脚本`jquery`和`cycle`脚本都是从 CDN 中提取的。除了对单个元素的基本调用外，该`plugin`脚本为空。`cycle`

此时所有浏览器都可以正常工作，IE9 除外。我收到以下错误：

```
 SCRIPT5: Access is denied
 jquery.min.js, line 2 character 68522 
```

我很快发现这是一个跨源问题：

[拒绝访问 IE 上的 jQuery 脚本](https://stackoverflow.com/questions/5087549/access-denied-to-jquery-script-on-ie)

[SCRIPT5：在 IE9 中对 xmlhttprequest 的访问被拒绝](https://stackoverflow.com/questions/5793831/script5-access-is-denied-in-ie9-on-xmlhttprequest)

我发现这很奇怪，因为我的插件中没有跨源函数。问题也出现在`jquery`它本身而不是我的代码上。尝试了几个建议的修复，但没有运气。

尝试了一些基本的东西。将脚本直接移动到页脚中。尝试将其直接移动到标题中。尝试将我的脚本排除在等式之外。在这一点上拉我的头发。

我最好的选择是实际查看导致代码错误的原因（因为我无法使用缩小版本）。此时代码直接在标题中，因此`.min`从脚本中删除了，进行了刷新，然后 TA-DA: 一切都在顺利运行。

如果我尝试使用&将未缩小的脚本声明移回`my_scripts()`函数，它将再次失败。如果我尝试将未缩小的脚本声明移动到页脚中，它将再次失败。我当时没有测试本地副本，只测试了 CDN 版本。`wp_register_script``wp_enqueue_script`

这是相同的 SCRIPT5 错误，但不幸的是，我没有方便地生成错误的代码。这是前几天在办公室，我周末休息。我试图在我的个人沙盒上重现这些事件，但未能成功重现错误，这使我相信未列出的某些东西可能是罪魁祸首。

有谁知道这里发生了什么？为什么会`jquery.min`在未压缩文件不会失败的地方失败？为什么未缩小的文件会继续失败，除非它直接在`<head>`?

很高兴提供更多信息，尽管其中一些可能要等到我下周重返工作岗位。只要有能力，我将尝试发布其余代码。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-05T16:51:56.963

我有同样的问题，jQuery 1.8.1 为我解决了这个问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T23:17:46.770

出于某种原因，@axel 的回答对我不起作用。相反，我决定将文件托管在与我的 HTML 文件相同的服务器上并修复它（至少对我而言）

# asp.net-mvc - 在 MVC4 视图中链接多个类

> ID：12232479
> 
> 赞同：3
> 
> 时间：2012-09-02T00:25:11.417
> 
> 标签：asp.net-mvc, ef-code-first

假设我有一个这样的模型（从原始模型简化）：

```
public class Location
{
    public int ID { get; set; }
    public string BinNumber { get; set; }
}

public class Item
{
    public int ID { get; set; }
    public string Description { get; set; }
    public virtual Location Bin { get; set; }
}

public class LineOnPickList
{
    public int ID { get; set; }
    public virtual Item Item { get; set; }
} 
```

在 LineOfPickList Create 视图中通常要做的事情是有一个下拉列表，列出所有项目描述，并在单击 Create 时将所选项目放入新创建的 LineOnPickList 记录中。

然而，我需要做的是显示位置 BinNumbers 的下拉列表，但在新创建的 LineOnPickList 记录中仍然有与该位置关联的项目。

那怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T02:26:45.467

为您的下拉菜单定义视图模型

```
public class ItemViewModel
{
    public int ID { get; set; }
    public string BinNumber { get; set; }
} 
```

然后在您的控制器操作中构建下拉列表数据，如下所示

```
public class CreateLineOnPickListViewModel
{
    public int ItemId { get; set; }
    public IEnumerable<ItemViewModel> Items { get; set; }
}

public ActionResult Create()
{
    var model = new CreateLineOnPickListViewModel();
    model.Items = db.Items
          .Select(i => new ItemViewModel { ID = i.ID, BinNumber = i.Bin.BinNumber });

    return View(model);
} 
```

那么在你看来

```
@model CreateLineOnPickListViewModel

@Html.DropDownListFor(m => m.ItemId, new SelectList(Model.Items, "ID", "BinNumber"), "-") 
```

然后你的控制器中的 post action 方法看起来像这样

```
public ActionResult Create(CreateLineOnPickListViewModel model)
{
    var item = new Item { ID = model.ItemID };
    db.Items.Attach(item);

    var lineOnPickList = new LineOnPickList { Item = item };

    db.SaveChanges();

    return View(model);
} 
```

# ruby - 如何在不使用空格字符的情况下运行 unix 命令以便执行远程命令？

> ID：12232483
> 
> 赞同：2
> 
> 时间：2012-09-02T00:26:16.750
> 
> 标签：ruby, unix, uri, exploit, command-execution

我一直在学习远程/任意命令执行。在这样做的过程中，我遇到了一些我认为尝试和利用会很有趣的 Ruby。

当我设法让它运行“ls”命令时，我已经取得了一些成功，但我不知道如何在我的命令中添加空格字符。如果我在其中添加一个空格，则 URI 调用的 parse 方法会引发异常。

这是我试图利用的代码：

```
injection = "www.google.com';ls;#"

require 'uri'
URI.parse(injection)
puts `curl '#{injection}'` 
```

因此，如果您选择接受它，您的挑战是**仅**通过更改注入字符串来运行“ls -l”命令而不是“ls”。除了第一行之外，您可能不会更改任何内容。

我尝试过的事情：

```
ls%2f-l   - # Doesn't raise an exception but unix doesn't unescape CGI encodings.
ls\x20-l  - # Raises an exception because Ruby parses the UTF-8.

# Other various escape combinations (\\x20, etc) 
```

也许这是不可能的？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T01:10:54.810

您可以使用内部字段分隔符 ( `<space><tab><newline>`)。由于无论如何这都是外壳分隔的内容，因此它将接受它作为分隔符。

```
injection = "www.google.com';ls$IFS-l;#" 
```

（顺便说一句，感谢周六晚上的精彩拼图。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T00:31:34.230

是 - 这是可能的。只需将您的字符串放在引号中：

1）从命令提示符：

`two strings` # 无引号：shell 看到两个字符串

`"one string"`# 使用单引号 (') 或双引号 (")，shell 只能看到一个字符串

2) 从字符串文字

`mystring = "\"this will be interpreted as one string\"";`

# javascript - 使用 FlexSlider 保持尺寸

> ID：12232492
> 
> 赞同：1
> 
> 时间：2012-09-02T00:27:35.433
> 
> 标签：javascript, jquery, web, flexslider

我正在使用新的 flex 滑块，我想保留图像的尺寸。无论我使用什么选项，它都会不断调整图像的大小。有没有人硬编码，以及可以为 FlexSlider 视口保留一定高度和宽度的选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:50:22.000

你在使用[Flexslider 2](http://www.woothemes.com/flexslider/, "弹性滑块 2")

尝试使用一个包含类的元素，如 ,`.flexcontainer`和一个集合`width`或`max-width`在你的 css 中以匹配图像的宽度：

```
<div class="flexcontainer">
    <div id="my-slider" class="flexslider">
        <ul class="slides">
        ...
        </ul>
    </div> 
</div> 
```

# ruby-on-rails - 在 Rails 上创建链接

> ID：12232493
> 
> 赞同：1
> 
> 时间：2012-09-02T00:27:47.220
> 
> 标签：ruby-on-rails, hyperlink

我昨天才开始使用 Rails，所以这是一个菜鸟问题

例如，一个用户在 www.example.com/name，我想创建几个指向 www.example.com/name/:id 的链接

所以我尝试了这样的事情：

```
<% @items.each do |item| %>
<%= link_to item.name, '/name' :id %>
<% end %> 
```

我知道，这是对我应该如何编写代码的完全猜测，但是安静的代码发送到一个完全错误的链接。这三行应该怎么写？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T00:33:30.907

使用路由助手：

```
<% @items.each do |item| %>
    <%= link_to item.name, item_path(item) %>
<% end %> 
```

ps：当你有这样一个简单的问题时，看看[这个指南](http://guides.rubyonrails.org/)，你会经常找到答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T00:32:58.650

尝试

```
<%= link_to item.name, item_path(item) %> 
```

`item_path`是一个 URL 辅助方法，它吐出链接以显示名称。

URL 助手具有以下一般形式：

```
{action}_{class}_path({object or object_id}) 
```

如果`{action}_`省略，则假定默认操作（通常显示）。

# web-services - axis2 与 cxf 最近有什么比较吗？

> ID：12232498
> 
> 赞同：1
> 
> 时间：2012-09-02T00:29:41.570
> 
> 标签：web-services

SO有一个有用的线程（http://stackoverflow.com/questions/1243247/difference-between-apache-cxf-and-axis），但最后一次更新是在2009年。我想获得最新的比较他们俩。

spring-ws 怎么样？

# node.js - 带有 Express 框架的 Node.js 中的自定义事件

> ID：12232500
> 
> 赞同：15
> 
> 时间：2012-09-02T00:30:13.793
> 
> 标签：node.js, express, socket.io

所以，我想知道如何在 node.js 中创建自定义事件，但我碰壁了。我很确定我误解了 express 的工作原理以及 node.js 事件的工作原理。

[https://creativespace.nodejitsu.com](https://creativespace.nodejitsu.com)这就是应用程序。

当用户创建一个新的“活动”（会发生很多次的事情）时，他们会发送一个 POST 请求。然后在我的路由中，如果 POST 成功，我想发出一个事件，告诉 socket.io 为该活动创建一个新的命名空间。

在我的路线文件中：

```
var eventEmitter = require('events').EventEmitter;    
// Tell socket.io about the new space.
eventEmitter.emit('new activity', {activityId: body.id}); 
```

和socket.io：

```
// When someone creates a new activity
eventEmitter.on('new activity', function (data) {  // this gives and error
  var newActivity = '/activity?' + data.activityId;
  io.of(newActivity).on('connection', function (socket) {

    // Socket.io code for an activity

  });
}); 
```

所以我得到的错误是 CANNOT CALL METHOD ON OF UNDEFINED 它指的是上面 socket.io 中的第 2 行。我想我搞砸了我的要求，也许......或者我不太了解事件是如何运作的。

任何帮助，甚至是对 Node.js 事件的良好阅读的参考都会震撼！

谢谢！！！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-06-08T07:43:14.310

如果使用 express，您也可以只监听从 EventEmitter 继承的 express 'app' 上的事件。例如：

```
res.app.on("myEvent", function) 
```

并像

```
res.app.emit("myEvent", data) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-02T01:04:25.240

您应该将 EventEmitter 视为可以继承的类。试试这个：

```
function MyEmitter () {
  events.EventEmitter.call(this);
}

util.inherits(MyEmitter, events.EventEmitter); 
```

现在您可以使用您的类来监听和发出事件：

```
var e = new MyEmitter;
e.on("test", function (m) { console.log(m); });
e.emit("test", "Hello World!"); 
```

# php - 通过 Jquery 向 PHP 发送多个上传

> ID：12232504
> 
> 赞同：3
> 
> 时间：2012-09-02T00:31:20.757
> 
> 标签：php, jquery, ajax

我知道关于这个问题有几个问题，我已经梳理了其中的许多问题，但还没有找到正确实现目标的正确方法。本质上，我试图捕获表单中的多个文件输入并将它们推送到 PHP。我至少弄清楚了 PHP 部分，但它的 Jquery 我正在苦苦挣扎。我通过调试注意到的主要问题之一是我的操作参数根本没有通过。我发布的代码如下。任何帮助将不胜感激。谢谢。

```
$(document).ready(function () {
  //if submitting imgages form
  $('#submit').click(function () {
    // match anything not a [ or ]
    regexp = /^[^[\]]+/;
    var fileInput = $('.putImages input[type="file"]');
    var fileInputName = regexp.exec(fileInput.attr('name'));

    // make files available
    var data2 = new FormData(fileInput);
    jQuery.each($(fileInput)[0].files, function (i, file) {
      data2.append(fileInputName + '[' + i + ']', file);
    });

    //organize data
    var data = new FormData($('input[name^="uploadFile"]'));
    jQuery.each($('input[name^="uploadFile"]')[0].files, function (i, file) {
      data.append(i, file);
    });

    $.ajax({
      type: 'GET',
      url: 'productadminupdate.php',
      data: data2 + "&action=" + 'images',
      cache: false,
      contentType: false,
      processData: false,
      success: function (response) {
        $('#imgform_result').html(response).fadeIn();
      }
    });

    return false;
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T03:05:21.690

我不知道我是否明白了，但是当人们想到 ajax 上传器时，他们并不真正知道这一点。实际上，不是 JavaScript 做的。该技术存在于将表单的操作定位到 Iframe。这个 iframe 应该被隐藏这里是一个例子：

```
<form method='post' enctype='multipart/form-data' action='YOUR_FILE.php' target='upload_iframe'>        
    <label>photo1:</label>
    <input type='file' name='photo1'/>
    <label>photo2:</label>
    <input type='file' name='photo2'/>
    <label>photo3:</label>
    <input type='file' name='photo3'/>
    <label>photo4:</label>
    <input type='file' name='photo4'/>
    <label>photo5:</label>
    <input type='file' name='photo5'/>
    <input type='submit' value='Send'/>
    </form>
</div>
<iframe name='upload_iframe'></iframe> 
```

因此，在 iframe 中，您的 php 代码将进行上传，使用 $_FILES 获取信息。

# ios - 检查图像中是否存在有孔的重叠图像

> ID：12232507
> 
> 赞同：1
> 
> 时间：2012-09-02T00:31:35.087
> 
> 标签：ios, xcode, core-graphics, cgrect, cgrectmake

我有两个图像视图。它们是“拼图”，我想测试一个是否适合另一个。并不是说框架重叠。我猜它是一个 CGRect 的东西......但似乎他们测试了外部边界。任何想法，将不胜感激？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T01:07:41.560

只是在这里集思广益......也许这会让你想到一些对你有用的东西。如果图像不重叠，则在图像 B 上绘制图像 A 将产生与在图像 A 上绘制图像 B 相同的图像。如果它们重叠，则会产生不同的图像。您可以执行类似绘制图像 A，然后是 B。创建结果的校验和，再次绘制 A，然后对其进行校验和。如果校验和匹配，则拼图适合。

如果您有一个代表每个图像的 1 位掩码，那么如果它们不重叠，那么对它们进行 OR 运算和 XOR 运算将得到相同的结果，而如果它们重叠，则会得到不同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T03:53:20.913

你事先知道正确的棋子顺序吗？可能最好将标签分配给每个`UIImageView`代表图像的索引号。然后，您只需创建一种网格并检查该块放置在哪个单元格中。如果单元格编号和`UIImageView`标签匹配 - 那么这是正确的地方。

如果您只有两张图像并且一张必须适合另一张的特定区域，您可以存储该孔的框架并检查该片是否放置在该框架中心附近的某个位置。它将更加用户友好，因为当您检查像素或位掩码时，您希望用户非常精确。或者您的比较代码应该允许一些变化并且会非常复杂。

但是，如果您不想对孔框进行硬编码，则可以动态计算它（只需在图像中找到透明区域）。无论如何，这个解决方案将比动态检查位匹配更有效。

# javascript - 表单输入字段随着溢出的文本而增长

> ID：12232523
> 
> 赞同：3
> 
> 时间：2012-09-02T00:34:10.100
> 
> 标签：javascript, jquery, html, css, input

> **可能的重复：**
> [Jquery 增长和缩小 textarea](https://stackoverflow.com/questions/988876/jquery-growing-and-shrinking-textarea)

我想实现`<input>`当文本溢出时文本会垂直增长的效果。所以不是滚动开始的文本，而是一个新的行开始，并且`<input>`垂直增长。

我如何使用 Javascript/jQuery/CSS/HTML/etc 来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T00:45:58.603

您可能可以使用`textarea`样式为`input`- [**DEMO的自动生长**](http://jsfiddle.net/bcHnV/)

```
textarea {
    height: 20px;
    line-height: 20px;
    resize: none;
}​ 
```

有许多插件可以实现相同的效果 - 我在演示中使用了[这个](http://www.jacklmoore.com/autosize)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T01:36:30.127

纯Javascript方式：

```
<textarea onkeyup="while(this.scrollTop > 0) {this.rows++;}"></textarea> 
```

# objective-c - 处理推送通知

> ID：12232528
> 
> 赞同：5
> 
> 时间：2012-09-02T00:34:52.403
> 
> 标签：objective-c, ios, cocoa-touch, push-notification, uilocalnotification

我有一个简单的新闻应用程序，由 UINavigationController 、 UITableViewController 和 UIViewController 组成，当应用程序启动时，它会从网络加载新闻，然后当单击表格单元格时，它会转到另一个视图以显示全文，我已经添加了推送通知但我现在想处理它，所以当用户单击通知时，会出现带有文章的视图，如果用户单击后退按钮，它会转到新闻列表表，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T01:33:56.010

在 application:didFinishLaunchingWithOptions: 你应该看看 launchOptions 字典中有什么。像这样的东西：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    …
    NSDictionary *userInfo = [launchOptions objectForKey: UIApplicationLaunchOptionsRemoteNotificationKey];
    if ( userInfo != nil )
        [self handlePushNotification: userInfo];

    …
} 
```

不要忘记实现：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo 
```

以防在您的应用程序运行时出现推送通知。

在您的 handlePushNotification: 方法中，您应该手动创建视图堆栈，可能带有动画：NO。

# php - PHP将所有用户定义的变量导出到文件，如果文件存在则导入？

> ID：12232531
> 
> 赞同：2
> 
> 时间：2012-09-02T00:35:33.437
> 
> 标签：php, variables, crash-dumps

是否可以（例如，当 PHP 脚本崩溃或其他情况）将所有用户定义的变量转储到文件中，然后在下次脚本运行时，导入文件并重新设置（可能从用户定义的列表中）运行前的变量？

我正在考虑为此编写一个完整的函数，它以 XML 格式导出，但我希望它能够使用 $array 的输出来完成它，`print_r($array);`其中 $array 具有大部分数据。

我意识到这对于在脚本进行计算之后设置的变量来说会失败。这意味着我们必须告诉 PHP 从它崩溃之前停止的那一行开始。（如果服务器可能/未成功完成，我还有哪些其他选项可以运行处理 500,000 个项目并且可能需要 30 小时才能运行的 PHP 脚本？）

# python - 基于 Python CSV 行值的流控制

> ID：12232539
> 
> 赞同：2
> 
> 时间：2012-09-02T00:37:55.023
> 
> 标签：python, csv, control-flow, urlparse

我正在使用具有以下结构的 CSV：

```
"2012-09-01 20:03:15","http://example.com" 
```

数据是我浏览历史的清理转储。我有兴趣计算每天的前五个唯一域。这是我到目前为止所拥有的：

```
from urlparse import urlparse
import csv
from collections import Counter

domains = Counter()

with open("history.csv") as f:
    for row in csv.reader(f):
        d = row[0]
        dt = d[11:19]
        dt = dt.replace(":","")
        dd = d[0:10]
        if (dt < "090000") and (dt > "060000"):
            url = row[1]
            p = urlparse(url)
            ph = p.hostname
            print dd + "," + dt + "," + ph
            domains += Counter([ph])
t = str(domains.most_common(20)) 
```

使用 d、dt 和 dd，我将日期和时间分开。对于上面的示例行，dt = 20:03:15，dd = 2012-09-01。“if (dt < "090000") and (dt > "060000")” 只是说我只对计算早上 6 点到 9 点之间访问的网站感兴趣。我怎么说“只计算每天早上 6 点之前访问的前五个网站”？任何一天都有数百行，并且这些行按时间顺序排列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T00:56:13.103

> 我有兴趣计算每天的前五个唯一域。

```
import csv
from collections import defaultdict
from datetime import datetime
from urlparse import urlsplit

domains = defaultdict(lambda: defaultdict(int))
with open("history.csv", "rb") as f:
     for timestr, url in csv.reader(f):
         dt = datetime.strptime(timestr, "%Y-%m-%d %H:%M:%S")
         if 6 <= dt.hour < 9: # between 6am and 9am
            today_domains = domains[dt.date()] #  per given day
            domain = urlsplit(url).hostname
            if len(today_domains) < 5 or domain in today_domains:
               today_domains[domain] += 1 # count the first 5 unique domains

print(domains) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T09:45:25.593

```
import csv
from collections import defaultdict, Counter
from datetime import datetime
from urlparse import urlsplit

indiv = Counter()

domains = defaultdict(lambda: defaultdict(int))
with open("history.csv", "rb") as f:
    for timestr, url in csv.reader(f):
        dt = datetime.strptime(timestr, "%Y-%m-%d %H:%M:%S")
        if 6 <= dt.hour < 11: # between 6am and 11am
            today_domains = domains[dt.date()]
            domain = urlsplit(url).hostname
            if len(today_domains) < 5 and domain not in today_domains:
                today_domains[domain] += 1
                indiv += Counter([domain])
for domain in indiv:
    print '%s,%d' % (domain, indiv[domain]) 
```

# java - 使用双缓冲 Java Applet 停止小程序闪烁

> ID：12232541
> 
> 赞同：0
> 
> 时间：2012-09-02T00:38:35.497
> 
> 标签：java, swing, applet, awt, double-buffering

很抱歉一直问关于我的程序的问题，但我想我快到了，我正在自学 Java，所以请多多包涵。我正在创建一个小程序，当狗对象靠近绵羊时，它会以随机方向在屏幕上移动绵羊对象。让羊朝随机方向移动需要一些工作，在你们这里​​的帮助下，它现在可以工作（有点），但我现在要做的是阻止它在我将对象拖过屏幕时闪烁。我读过关于双缓冲的文章，我可以让它适用于在主类的paint方法中绘制的项目，但不能让它适用于我的羊和狗对象，这些对象在不同的​​类中被定义为单独的对象。任何帮助都感激不尽。这是我的代码：

```
 package mandAndDog;

import java.applet.Applet;
import java.awt.*;
import java.awt.event.*;
import java.util.Random;

public class SheepDog extends Applet implements ActionListener, MouseListener, MouseMotionListener
{
    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    /**
     * 
     */

    Dog dog;
    Sheep sheep;
    int[] directionNumbersLeft = {0, 1, 3};
    int[] directionNumbersUp = {0, 1, 2};
    int x;
    int selection;
    int xposR;
    int yposR;
    int sheepx;
    int sheepy;
    int sheepBoundsx;
    int sheepBoundsy;
    int MAX_DISTANCE = 50;
    int direction;
    int distance;
    Boolean sheepisclosetodog;

    public void init()
    {
        addMouseListener(this);
        addMouseMotionListener(this);
        dog = new Dog(10, 10);
        sheepx = 175;
        sheepy = 75;
        sheep = new Sheep(sheepx, sheepy);
        sheepBoundsx = 30;
        sheepBoundsy = 30;
        direction = (int)(Math.random()*4); 
        distance = (int) (Math.random() * MAX_DISTANCE) % MAX_DISTANCE;
        sheepisclosetodog = false;
        Random rand = new Random();
        x = rand.nextInt(3);
        selection = directionNumbersLeft[x];

    }
    public void paint(Graphics g)
    {
        dog.display(g);
        sheep.display(g);
        g.drawString(Integer.toString(distance), 85, 100);
        g.drawString(Integer.toString(direction), 85, 125);
        g.drawString(Integer.toString(selection), 85, 140);

    }
    public void actionPerformed(ActionEvent ev)
    {}
    public void mousePressed(MouseEvent e)
    {}
    public void mouseReleased(MouseEvent e)
    {}
    public void mouseEntered(MouseEvent e)
    {}
    public void mouseExited(MouseEvent e)
    {}
    public void mouseMoved(MouseEvent e)
    {
    }
    public void mouseClicked(MouseEvent e)
    {}
    public void mouseDragged(MouseEvent e)
    {
        dog.setLocation(xposR, yposR);
        sheep.setLocation(sheepx, sheepy);
        if (xposR > (sheepx - 20)&& xposR < (sheepx - 20)+(sheepBoundsx - 20) && yposR > (sheepy - 20)
                && yposR < (sheepy - 20)+(sheepBoundsy - 20) && direction == 0){
            sheepx = sheepx + 50;
            direction = (int)(Math.random()*4); 
        }
        if (xposR > (sheepx - 20)&& xposR < (sheepx - 20)+(sheepBoundsx - 20) && yposR > (sheepy - 20)
                && yposR < (sheepy - 20)+(sheepBoundsy - 20) && direction == 1){
            sheepy = sheepy + 50;
            direction = (int)(Math.random()*4); 
        }

        if (xposR > (sheepx - 20)&& xposR < (sheepx - 20)+(sheepBoundsx - 20) && yposR > (sheepy - 20)
                && yposR < (sheepy - 20)+(sheepBoundsy - 20) && direction == 2){
            sheepx = sheepx - 50;
            direction = (int)(Math.random()*4); 
        }
        if (sheepx <= 5){
            direction = directionNumbersLeft[x];
        }

        if (xposR > (sheepx - 20)&& xposR < (sheepx - 20)+(sheepBoundsx - 20) && yposR > (sheepy - 20)
                && yposR < (sheepy - 20)+(sheepBoundsy - 20) && direction == 3){
            sheepy = sheepy - 50;
            direction = (int)(Math.random()*4); 
        }
        if (sheepy <=5){
            direction = directionNumbersUp[x];
        }

        xposR = e.getX();
        yposR = e.getY();
        repaint();

    }
}

class Dog 
{
    int xpos;
    int ypos;
    int circleWidth = 30;
    int circleHeight = 30;

    public Dog(int x, int y)
    {
        xpos = x;
        ypos = y;

    }

    public void setLocation(int lx, int ly)
    {
        xpos = lx;
        ypos = ly;
    }

    public void display(Graphics g)
    {
        g.setColor(Color.blue);
        g.fillOval(xpos, ypos, circleWidth, circleHeight);
    }       
}
class Sheep
{
    int xpos;
    int ypos;
    int circleWidth = 10;
    int circleHeight = 10;

    public Sheep(int x, int y)
    {
        xpos = x;
        ypos = y;

    }

    public void setLocation(int lx, int ly)
    {
        xpos = lx;
        ypos = ly;
    }

    public void display(Graphics g)
    {
        g.setColor(Color.green);
        g.fillOval(xpos , ypos, circleWidth, circleHeight);
        g.drawOval(xpos - 20, ypos - 20, 50, 50);
    }

} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-28T04:41:31.900

首先，我不完全理解为什么你的 Sheep 和 Dog 类中有一个显示方法。我建议您在 SheepDog 类中显示羊和狗，而不是这样做。

此外，您应该使用 Graphics2D，而不是使用 Graphics。为了使用这个简单地做

```
public void paint(Graphics g) {
    Graphics2D g2 = (Graphics2D) g;
} 
```

这是可能的，因为 Graphics2D 是 Graphics 的子类。一旦你这样做了，我要做的是覆盖 update() 方法并执行此操作

```
public void update(Graphics g) {
    if (image == null) {
        image = createImage(this.getWidth(), this.getHeight());
        graphics = image.getGraphics();
    }
    graphics.setColor(getBackground());
    graphics.fillRect(0,  0,  this.getWidth(),  this.getHeight());
    graphics.setColor(getForeground());
    paint(graphics);
    g.drawImage(image, 0, 0, this);
} 
```

当您调用 repaint() 时，它实际上首先调用了 update() 方法，该方法又调用了 paint() 方法。在类的顶部，你应该声明

```
Image image;
Graphics graphics; 
```

# json - 分页工具栏没有收到总数

> ID：12232555
> 
> 赞同：0
> 
> 时间：2012-09-02T00:40:38.487
> 
> 标签：json, extjs4.1

嗨，我在 extjs4 中有一个网格，我需要分页，服务器正确发送了 totalProperty，但是 pagingToolbar 只看到接收到的记录数，而不是总数，所以例如，如果我将记录数限制为 200 并且商店的 pageSize 是 50 可以移动四页，但是我丢失了我留在数据库中的其他 1800 条记录；这是我的商店：

```
 var store = Ext.create('Ext.data.Store', {
    pageSize: 50,
    model: 'companiesModel',
    autoLoad: true,
    root:'results',

    listeners :
    {
        load : function(store)
        {// riporta il numero di items nello store in alto sulla grid
            Ext.getCmp('numRow').setText("Companies: "+store.getCount());
        }
    },
    proxy: {
        idProperty: 'id',
        type: 'direct',
        directFn: QueryDatabase.getResults,
        totalProperty:'total',
        api:{
            read:QueryDatabase.getResults,
            update:QueryDatabase.updateCompany
        }

    }
}); 
```

这是放置为网格的停靠编辑项的分页工具栏：

```
dockedItems: [Ext.create('Ext.toolbar.Paging', {
        dock: 'bottom',
    pageSize:50,
        store: store,
    displayInfo: true,
        displayMsg: 'Displaying Companies {0} - {1} of {2}',
    emptyMsg: "No Companies to display"
    })] 
```

这是我的 json 的一部分，正如萤火虫所示：

```
total 
```

2026

结果

[对象 {noteid=

《1811》

, 地址=

“不相关”

, 城市=

“不相关”

, altri elementi...}, 对象 { noteid=

“4956”

, 地址=

“X”

, 城市=

“布宜诺斯艾利斯”

, altri elementi...}, 对象 { noteid=

“4957”

, 地址=

“X”

, 城市=

“布宜诺斯艾利斯”

, altri elementi...}, 47 altri elementi...]

我用谷歌搜索了很多都没有成功，我找不到我的错误，我相信分页不应该那么困难，提前感谢您的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T15:40:14.630

我解决了，我按照 extjs 4 中的描述更改了我的服务器发送的 json [，直接 php 代理和网格分页](http://www.sencha.com/forum/showthread.php?211181-extjs-4-direct-php-proxy-and-grid-paging) 我将总数与数据放在一起

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T02:31:29.553

根据您的服务器 api 要求，验证代理上的[`startParam`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.proxy.Server-cfg-startParam)、[`limitParam`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.proxy.Server-cfg-limitParam)和/或[`pageParam`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.proxy.Server-cfg-pageParam)配置是否正确设置。如果是这样，您的服务器端代码未正确处理后续页面的请求。当通过工具栏请求每个页面时，请检查 firebug 中的请求详细信息和响应。

此外，[`totalProperty`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.reader.Reader-cfg-totalProperty)and[`root`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.reader.Json-property-root)配置继续阅读器：

```
proxy: {
    ...
    reader: {
        type: 'json',
        root: 'results',
        totalProperty: 'total'
    }
} 
```

# .net - .Net 4 中通用方法的 LdToken 行为改变了吗？

> ID：12232561
> 
> 赞同：4
> 
> 时间：2012-09-02T00:43:22.830
> 
> 标签：.net, reflection, .net-4.0, reflection.emit

给定一个识别非泛型类的开放泛型方法的 MethodInfo 实例，考虑以下伪代码：

```
class Foo { void FooMethod<T>() {} }

public static void PrintMethodInfo(RuntimeMethodHandle methodHandle)
{
    var mi = (MethodInfo) MethodBase.GetMethodFromHandle(methodHandle);
    Console.WriteLine("Method: "+mi.ToString());
}

var methodInfo = typeof(Foo).GetMethod("FooMethod"); 
```

在正文中生成包含此代码的方法“void GeneratedMethod<T>()”：

```
IL.Emit(OpCodes.Ldtoken, methodInfo);
IL.Emit(OpCodes.Call, methodInfoPrintMethodInfo); 
```

调用 GeneratedMethod<int>()，.Net 3.5 上的输出将是：

```
Method: System.Object Method[Int32]() 
```

在 .Net 4.0 上，它将是：

```
Method: System.Object Method[T]() 
```

因此，在 .Net 2.0/3.5 中，为 ldtoken 生成的 IL 将包含一个元数据令牌，该元数据令牌标识通用 FooMethod<>，该通用 FooMethod<> 使用调用 GeneratedMethod<T> 时给出的类型参数进行实例化。

然而，在 .Net 4.0 中，ldtoken 将包含标识开放泛型类型的元数据。

我很难找到支持 .Net 3.5 案例中发生的事情的文档（实际上，如果生成的方法本身不是通用的，它应该完全失败） - .Net 4 的行为似乎更合乎逻辑。我也找不到任何有关更改的文档。这是现在已经修复的早期版本中的错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T09:43:15.980

当您反汇编生成的代码时，您可以看到在 .NET 3.5`ldtoken`中，与 open 泛型方法相关的指令发出如下：

```
.method public static void  GeneratedMethod<T>() cil managed
{
  // Code size       11 (0xb)
  .maxstack  1
  IL_0000:  ldtoken    method instance void [ConsoleApplication16]ConsoleApplication16.Program/Foo::FooMethod<!!0>()
  IL_0005:  call       void [ConsoleApplication16]ConsoleApplication16.Program::PrintMethodInfo(valuetype [mscorlib]System.RuntimeMethodHandle)
  IL_000a:  ret
} // end of method TestType::GeneratedMethod 
```

语法`!!0`是对周围方法 ( `GeneratedMethod`) 的类型参数的引用，因此该方法是用属于 的`Foo`实例化的。（事实上​​，这与为 . 发出的 IL 相同。）即使根本不是通用的，也会发出此引用- 结果程序不再可验证（并且在执行时会导致 BadImageFormatException）。`T``GeneratedMethod<T>``IL.Emit (OpCodes.Ldtoken, methodInfo.MakeGenericMethod (<typeParameterOfGeneratedMethod>))``!!0``GeneratedMethod`

这显然是一个错误，在 .NET 4 中，这似乎已修复，因为（反汇编）发出的代码现在看起来像这样：

```
.method public static void  GeneratedMethod<T>() cil managed
{
  // Code size       11 (0xb)
  .maxstack  1
  IL_0000:  ldtoken    method instance void [ConsoleApplication16]ConsoleApplication16.Program/Foo::FooMethod<[1]>()
  IL_0005:  call       void [ConsoleApplication16]ConsoleApplication16.Program::PrintMethodInfo(valuetype [mscorlib]System.RuntimeMethodHandle)
  IL_000a:  ret
} // end of method TestType::GeneratedMethod 
```

如您所见，签名现在指的是未实例化的`FooMethod`（在 IL 汇编中，这表示为`FooMethod[1]`）。

所以是的，这看起来像是 .NET 3.5 中的一个错误，已在 .NET 4 中修复。但是，它似乎并没有改变 ; 的语义`ldtoken`。只是 Reflection.Emit 没有发出正确打开泛型方法的引用。我怀疑这也与[IL 汇编器过去甚至没有表示开放泛型方法的语法有关](http://www.mail-archive.com/advanced-dotnet@discuss.develop.com/msg12626.html)。

# php - （AvastSVC.exe 和 XAMPP）/（XAMPP 上的虚拟主机）

> ID：12232563
> 
> 赞同：0
> 
> 时间：2012-09-02T00:44:18.563
> 
> 标签：php, xampp, port, virtualhost

所以我安装了 XAMPP，一开始它工作得很好（至少我是这么认为的。我输入了 localhost 并得到了 XAMPP 页面）。

我的 Dropbox 文件夹中有我正在处理的网站的文件，因此它们在我的计算机上保持最新。我正在寻找一种将 XAMPP 指向我的工作文件夹的方法，这样我就不必在 htdocs 中工作，然后将其移回 Dropbox。我找到了这个线程： [Make XAMPP/Apache serve file outside of htdocs](https://stackoverflow.com/questions/1408/make-xampp-apache-serve-file-outside-of-htdocs)

我遵循了 cmcculloh 关于如何设置虚拟主机的回答。正如他指示中的最后一步所说，我重新启动了 Apache。除非它不会启动。我在控制面板中单击“开始”，它显示“正在启动 apache 服务...” ....它就在那里

谷歌搜索后，我看到了诸如禁用确保端口 80 清除并禁用防病毒之类的提示。并在 cmd 提示符中使用“netstat -nab”来检查是否有东西在使用端口 80

好吧，AvastSVC.exe 正在使用端口 80。我不明白为什么在我安装它之后它运行良好，Avast 正在运行......但直到我尝试重新启动，Avast 才突然妨碍我....所以我不太确定这是问题所在。

也许这是我在尝试设置虚拟主机时所做的事情？

我只想测试 php 而不上传到网络服务器 D=

编辑：哦，顺便说一句，我关闭了 Avast 并确保该过程已经消失，但它仍然显示在“netstat -nab”下。我在服务下查看，仍然有 Avast 服务，但它不会让我停止它 =S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T01:30:46.823

如果这只是为了测试/学习/开发目的，也许您可​​以尝试使用[EasyPHP](http://www.easyphp.org/)并为包含 HTML 文件的 Dropbox 文件夹设置一个别名。另外，我建议您使用 port`8080`进行开发，而不是 port `80`。

# sql - 如何将 SQL 表解析为多个多对多表

> ID：12232564
> 
> 赞同：0
> 
> 时间：2012-09-02T00:44:34.207
> 
> 标签：sql, sql-server, database-normalization

我有一个`Staging`包含以下列的表格

*   视频网址
*   评分
*   长度
*   缩略图
*   标签（逗号分隔）

视频与标签有多对多的关系。我创建了以下新表：

*   视频
*   标签
*   视频标签

**如何将 Staging 表中的数据解析成三个新表？**Tag 表不应包含重复项。此外，在将数据插入新表之前，我需要对数据进行一些格式化，例如需要从 Length 列中删除所有字母。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T02:22:24.237

我会怎么做。

1.  使用此[问题](https://stackoverflow.com/questions/3660734/create-a-table-from-csv-columns-in-sql-server-without-using-a-cursor) 将 CSV 列解析为多行，另一个表使用人工键将旧表链接到新表
2.  将两个表与另一个生成的人工键（Many many join table primary key）列连接以创建多对多表
3.  修复多对多关系的两端

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T02:44:18.107

使用辅助数字表，您可以将标签列拆分为行，同时保持与 VideoURL 的关联：

```
CREATE TABLE NumberPivot (NumberID INT PRIMARY KEY)
DECLARE @intLoopCounter INT
SELECT @intLoopCounter =0
SET NOCOUNT ON

WHILE @intLoopCounter <=999 BEGIN
   INSERT INTO NumberPivot
   VALUES (@intLoopCounter)
   SELECT @intLoopCounter = @intLoopCounter +1
END
GO

SELECT
  ContentPageID,
  Substring(',' + Tags + ','
            , numberID + 1
            , Charindex(',', ',' + Tags + ',', numberID + 1) - numberid - 1) AS value 
FROM   dbo.NumberPivot  AS np,
       Staging AS S
WHERE  numberid <= Len(',' + Tags + ',') - 1
   AND Substring(',' + Tags + ',', numberID, 1) = ',' 
```

所以在这里我们用唯一的标签填充标签表：

```
;WITH X AS (
SELECT
  VideoURL,
  Substring(',' + Tags + ',', numberID + 1, Charindex(',', ',' + Tags + ',', numberID + 1) - numberid - 1) AS Tag
FROM   dbo.NumberPivot  AS np,
       Staging AS S
WHERE  numberid                                      <= Len(',' + Tags + ',') - 1
   AND Substring(',' + Tags + ',', numberID, 1) = ',' 
)
INSERT Tag (Tag)
SELECT DISTINCT Tag FROM X; 
```

接下来填写视频表：

```
INSERT Video (VideoURL, Rating, Length, Thumbnail)
SELECT VideoURL, Rating, Length, Thumbnail
FROM Staging; 
```

最后填写VideoTag：

```
INSERT VideoTag (VideoURL, Tag)
SELECT
  VideoURL,
  Substring(',' + Tags + ',', numberID + 1, Charindex(',', ',' + Tags + ',', numberID + 1) - numberid - 1) AS Tag
FROM   dbo.NumberPivot  AS np,
       Staging AS S
WHERE  numberid                                      <= Len(',' + Tags + ',') - 1
   AND Substring(',' + Tags + ',', numberID, 1) = ',' 
```

[从这里](http://wiki.lessthandot.com/index.php/Split_A_String_By_Using_A_Number_Table "Split String using Number Table")使用数字表获取拆分字符串

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T02:57:53.833

试试这个，假设 videourl 作为视频名称和***splitstring 函数***返回表有***标记***名列

```
create table video(...)
create table tag(...)
create table videotag(...)

insert video
select distinct(maintable.videourl) as videoname
from   maintable 

insert tag
select distinct(tag.tagname)
from   maintable cross apply SplitString(maintable.tags,',') tag

insert videotag
select maintable.videourl as videoname,tag.tagname
from   maintable   cross apply SplitString(maintable.tags,',') tag 
```

如果您从 video 和 tag 表中自动生成 id，那么
在插入 videotag 表时会从
它的主表中获取关联的自动生成的 id。

Splitstring 函数来自[这里](https://stackoverflow.com/questions/2647/split-string-in-sql)

# r - 访问R中数据框中的字符值

> ID：12232566
> 
> 赞同：0
> 
> 时间：2012-09-02T00:45:01.317
> 
> 标签：r

我正在使用 R 并且我有一个像这样的数据框（很多行）

```
 DATE TICKER PERMNO PERMCO   BIDLO ASKHI    PRC CFACPR
1 20060901   ALOG  14198    173 55.8112 57.59 56.440      1
2 20060905   ALOG  14198    173 55.0101 56.48 55.650      1
3 20060906   ALOG  14198    173 55.0200 56.53 55.380      1
4 20060907   ALOG  14198    173 55.1200 57.05 56.360      1
5 20060908   ALOG  14198    173 55.3180 56.98 55.345      1
6 20060911   ALOG  14198    173 54.0000 56.23 56.190      1 
```

我正在尝试访问任何行的 TICKER 值。像这样

```
> data[1,]$TICKER

[1] ALOG
150 Levels:  ACTG ACTL AEIS ALOG ALSC ALTR AMCC AMK AMSC ANAD ARMH ARMHY ARXX ASTSF ASYS ATMI ATML AVNX AXTI BELFA BELFB BRCM CAMD CATT CBMX CECE ... ZRAN 
```

为什么我得到低于实际值的 150 个级别。如何访问 TICKER 符号

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T00:51:29.743

您获得低于结果水平的原因是因为 TICKER 被视为一个因素。Dirk 提供了一些建议，说明如何从一开始就防止这种情况发生，但您可以使用`as.character`

```
as.character(data[1, "TICKER"]) 
```

或者，如果您想将整个列更改为字符向量而不是一个因子，您可以执行类似的操作

```
data$TICKER <- as.character(data$TICKER) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T00:47:48.260

使用`stringsAsFactor=FALSE`，作为 或 的选项，`read.table()`或`read.csv()`作为全局设置。如果这样做，值将是字符串。

```
R> data <- read.table(textConnection(" DATE TICKER PERMNO PERMCO   BIDLO ASKHI    PRC CFACPR
1 20060901   ALOG  14198    173 55.8112 57.59 56.440      1
2 20060905   ALOG  14198    173 55.0101 56.48 55.650      1
3 20060906   ALOG  14198    173 55.0200 56.53 55.380      1
4 20060907   ALOG  14198    173 55.1200 57.05 56.360      1
5 20060908   ALOG  14198    173 55.3180 56.98 55.345      1
6 20060911   ALOG  14198    173 54.0000 56.23 56.190      1"), header=TRUE, stringsAsFactors=FALSE)
data <- read.table(textConnection(" DATE TICKER PERMNO PERMCO   BIDLO ASKHI    PRC CFACPR
+ 1 20060901   ALOG  14198    173 55.8112 57.59 56.440      1
+ 2 20060905   ALOG  14198    173 55.0101 56.48 55.650      1
+ 3 20060906   ALOG  14198    173 55.0200 56.53 55.380      1
+ 4 20060907   ALOG  14198    173 55.1200 57.05 56.360      1
+ 5 20060908   ALOG  14198    173 55.3180 56.98 55.345      1
+ 6 20060911   ALOG  14198    173 54.0000 56.23 56.190      1"), header=TRUE, stringsAsFactors=FALSE)
R> data[1,"TICKER"]
[1] "ALOG"
R> 
```

# iphone - 为 NavigationBar 中的编辑按钮设置 IBAction

> ID：12232574
> 
> 赞同：0
> 
> 时间：2012-09-02T00:46:57.253
> 
> 标签：iphone, ios, xcode, navigationbar

如何为使用以下代码创建的 NavigationBar 中的编辑按钮设置 IBAction self.navigationItem.leftBarButtonItem = [self editButtonItem];

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T01:05:19.620

由于您以编程方式分配左栏按钮，因此您必须自己创建按钮。当您实例化按钮时，您还可以设置回调操作，如下所示：

```
UIBarButtonItem *editButton = [[UIBarButtonItem alloc]
     initWithBarButtonSystemItem:UIBarButtonSystemItemEdit
     target:self
     action:@selector(editButtonPressed:)];
self.navigationItem.leftBarButtonItem = editButton; 
```

当按下编辑按钮时，将调用以下方法

```
- (void)editButtonPressed:(id)sender
{
   // do something
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T01:04:23.037

由于您已经在使用代码而不是 Interface Builder，因此以编程方式分配选择器也可能更容易：

```
[self.navigationItem.leftBarButtonItem setAction:@selector(doSomething:)]; 
```

# drupal-6 - 在自定义模块中使用多选模块（drupal 6）

> ID：12232576
> 
> 赞同：1
> 
> 时间：2012-09-02T00:47:01.133
> 
> 标签：drupal-6, multi-select

我在 Drupal 6 中编写自己的模块并创建一个表单，但我需要一些东西来从列表中选择数据。我正在尝试使用多选模块。我可以显示带有选项的字段，但在提交时我无法获得选定的选项。我做了以下：

```
$element = array(
          '#type' => 'field_multi_select',
          '#title' => 'Field name',
          '#description' => 'description',
          '#multiple' => true,
          'required' => true,
          '#field_name' => 'field_select',
          '#columns' => array('value'),
          '#value' => array(array('value' => null)),
          '#process' => array('multiselect_select_process'),
          '#enable'=>true,
          'module' => 'module name'   // set here you current module name
      );

        $form['#field_info']['field_multi_select'] = $element;
        $element = multiselect_select_process($element, NULL, $form_state, $form); 
```

# html - 在什么情况下相对比绝对定位更可取（反之亦然）？

> ID：12232577
> 
> 赞同：-1
> 
> 时间：2012-09-02T00:47:18.887
> 
> 标签：html, css, positioning

我正在设计一个网站，但无法决定哪种类型的定位更好，相对的还是绝对的。我知道过去当我使用绝对定位并尝试重新调整浏览器的大小时，它会偏离我放置的任何位置。但是，如果我使用相对定位并想要更改某些内容，它似乎总是会把页面上的所有其他内容都扔掉。

你们那里的专业人士用什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T00:50:48.433

默认情况下，将所有内容保留为静态（相对）。当浏览器大小发生变化时，这可以让事物稍微调整大小。绝对定位（相对于整个网页）往往会使网页在窗口大小发生变化时停止正常工作。

然而，在某些情况下使用绝对位置总是有用的。但是，设置相对于其他元素的绝对元素 - 永远不要使用相对于页面的绝对定位。

绝对定位让您将某些元素放在其他元素之上，例如：

```
<div style="position: relative; width: 100px; height: 100px">
  <img src="" width="100" height="100">
  <div style="position: absolute; left: 0; top: 0">Some text on top</div>
<div> 
```

在上面的示例中，浏览器将绝对定位的 div 相对于某物定位。那是 DOM 层次结构中的第一个相对祖先。所以它会看到它上面的 div 并将其定位在相对于该 div 的 (0,0) 处。因此，一个 div 被放置在另一个 div 之上，当然，另一个 div 是相对于页面的其余部分放置的。

通常，当绝对元素放置在另一个元素之上并相对于另一个元素时，它将位于顶部。如果需要调整其他元素前面的内容，可以使用 z-index css 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T01:01:46.207

1.  一般来说，最好的是`position:static`
2.  如果您希望元素相对于窗口保持在同一位置，最好是`position:fixed`
3.  如果您希望元素相对于父元素保持在相同的位置，最好是`position:absolute`与父元素`position`不同`static`。
4.  如果你想从文档流中移除一个元素，最好的是`position:absolute`and `position:fixed`。
5.  如果你想向上/向下/向右/向左移动一个元素，但又不想影响周围的元素，最好的方法是`position:relative`
6.  如果要向上/向下/向右/向左移动元素并且想要影响周围的元素，请使用边距。
7.  如果一个元素与另一个元素重叠，并且您想查看第一个元素，则最好`position:relative`使用`z-index`.

# c# - 将 Base64 字符串转换为字节时出现 FormatException

> ID：12232580
> 
> 赞同：1
> 
> 时间：2012-09-02T00:47:43.573
> 
> 标签：c#, bytearray, base64, formatexception

尝试将 base64 字符串转换为字节数组时出现异常。我将图像转换为字节数组，然后转换为 base64 字符串，然后对其进行加密并将其存储在文件中。然后我尝试将 base64 字符串转换回 MemoryStream 中的字节数组，并重新创建图像。我在这里得到一个 FormatException：

```
byte[] imgBytes = Convert.FromBase64String(str); 
```

这是两个主要功能的完整代码：

```
public string ImageToString(Image img)
{
     using (MemoryStream ms = new MemoryStream())
     {
          img.Save(ms, ImageFormat.Jpeg);

          return Convert.ToBase64String(ms.ToArray());
     }
}

public Image StringToImage(String str)
{            
     int lent = str.Length;
     byte[] imgBytes = Convert.FromBase64String(str);
     MemoryStream ms = new MemoryStream(imgBytes, 0, imgBytes.Length);

     ms.Write(imgBytes, 0, imgBytes.Length);
     return Image.FromStream(ms, true);
} 
```

这是我要转换的base64字符串的开头和结尾...... `G>/9j/4AAQSkZJRgABAQEAYABgAAD .... Uh+8fxpT/B9KAP/2Q==`

任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T00:54:21.657

问题是您的字符串沿线某处损坏。这不是 base64 字符串，正如您在第二个字符中看到的那样`>`，它不会出现在 base64 字符串中。

* * *

旁注：您的函数创建一个包含数据的内存流，然后再次将数据写入内存流。然后您尝试从内存流中读取而不将位置重置为流的开头。

只需创建内存流并从中读取：

```
public Image StringToImage(String str) {            
  byte[] imgBytes = Convert.FromBase64String(str);
  return Image.FromStream(new MemoryStream(imgBytes), true);
} 
```

# android - Android SurfaceView导致屏幕闪烁

> ID：12232583
> 
> 赞同：7
> 
> 时间：2012-09-02T00:49:09.760
> 
> 标签：android, android-fragments, surfaceview, android-mediaplayer, flicker

我正在开发适用于 Android 的多媒体视频处理应用程序，但遇到了一些问题。我正在使用`FragmentPagerAdapter`该类，其中包含许多不同的片段，用于视频处理的各个步骤。

我的第一个`Fragment`包含 a`SurfaceView`和 a `MediaPlayer`，以及各种播放控件。当我从片段 1（使用 SurfaceView）滑动到片段 2（此时为空）时，我的问题发生了。如果我还没有调用`start()`，则不会发生任何异常情况，并且我可以正常在片段之间滑动。但是，一旦我打电话`start()`，当我滑动到下一个时，整个屏幕就会开始闪烁`Fragment`，即使我已经将 置于`MediaPlayer`空闲状态并且它没有向`SurfaceView`. 唯一可以阻止这种情况的方法是通过滑动到第三个视图来破坏表面以及包含视图，`Fragment`以便`FragmentPagerAdapter`销毁`Fragment`一个，或者通过主页或后退按钮退出应用程序以销毁视图。

我一生都无法弄清楚为什么会发生这种情况，除了`SurfaceView`渲染线程可能会以某种方式干扰主 UI 线程。LogCat 上也没有出现异常，所以我有点卡住了。我正在运行一个带有 android 4.1 的 Galaxy Nexus 作为我的测试硬件。

任何帮助，将不胜感激！

捷通

**更新：**我现在已经设法找到一种解决`setPrimaryItem()`方法，方法是在视频播放器停止显示时`FragmentPagerAdapter`调用`SurfaceView`从层次结构中删除的方法（`removeView()`在其`LinearLayout`容器上使用）`Fragment`，然后`SurfaceView`在它处于活动状态时恢复再次。不幸的是，发生这种情况时仍然会眨眼，所以如果有人有其他想法，我将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T04:52:04.807

来自[Android 开发者博客](http://android-developers.blogspot.in/2011/11/android-40-graphics-and-animations.html)

> 这个小部件[SurfaceView] 通过创建一个放置在应用程序窗口后面的新窗口来工作。然后它会在您的应用程序窗口上打一个洞以显示新窗口。
> 
> 因为 SurfaceView 的内容不在应用程序的窗口中，所以不能有效地转换（移动、缩放、旋转）。这使得在 ListView 或 ScrollView 中使用 SurfaceView 变得困难。

如果您正在构建 4.0 或更高版本，则解决方案是使用 TextureView。如果您有兴趣使用 TextureView 显示视频，[此线程](https://stackoverflow.com/questions/10736517/playing-video-on-textureview)可能会有所帮助

# python - 如何将序列中的所有数字相乘（python）

> ID：12232584
> 
> 赞同：4
> 
> 时间：2012-09-02T00:49:13.503
> 
> 标签：python, numbers, sequence

就像我告诉程序一样`n=10`，我将如何让它返回`10*9*8*7*6*5....1`？

我想了一个while循环，但我觉得我在某个地方搞砸了，因为它没有总结序列中的所有数字。

我当前的代码看起来像这样

```
def product(n):
  i=n
  a=n-1
  while a>0:
    return i * a
    b=i * a
    a=a-1
    i=i-1 
```

有没有更好的方法可以在不使用递归的情况下做到这一点？对于令人难以置信的初学者问题，我很抱歉，但我正在尝试自学如何编码。你必须从某个地方开始！

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T00:53:40.443

由于您正在尝试学习编码，因此我不会给您一个完整的解决方案，但我会给您一些提示：

*   有一个`for`从 1 运行到 n 的循环（使用`range(1, n+1)`）而不是你的`while`-loop。这将生成您想要乘以和迭代正确次数的值（`while`有时循环可能有点棘手）。

*   有一个名为的变量`product`来存储每次通过循环的乘法结果。

*   在进入-loop`product`之前进行初始化。`for`进入后，您只需更新`product`.

*   完成循环后，您可以使用该`return`语句返回 的值`product`。

*   最后，出于测试目的，您可能希望从一个小的值开始`n`，例如 4，然后打印出您在循环内计算的值，以验证您的代码是如何工作的。

有更多简洁和 Pythonic 的方法可以做到这一点，但这使用您已经设置的代码结构。当然递归以及你提到的。

一旦你掌握了基础知识，你就会喜欢用更惯用的方式来写这个，或者调用为你做这件事的适当的函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-02T01:17:20.713

好吧，这是另一种 Pythonic 方法。

```
>>> import operator
>>> numbers = range(1, 11)
>>> numbers
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
>>> reduce(operator.mul, numbers)
3628800 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T00:53:51.550

假设你的意思是阶乘函数，你可以简单地使用`math.factorial()`：

```
>>> import math
>>> math.factorial(10)
3628800 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-02T00:57:54.633

本质上，您试图找到数字 n 的阶乘。求一个数的阶乘，有两种方法

1.  使用循环结构
2.  使用递归（正如你所提到的）

作为一名新程序员，最好使用一个从 1 到 n 运行的简单循环结构，并将每次迭代的相乘值放入一个变量中。这个变量就是你的答案。但也要知道递归也可以工作并使代码看起来很优雅。快乐编程！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-02T00:54:38.750

这称为*阶乘*。*10！*相当于*10 * 9 * 8 * 7 * 6 * 5 * 4 * 3 * 2 * 1*。

```
def factorial(n):
    product = 1
    while n > 0:
        product *= n
        n -= 1
    return product 
```

顺便说一句，在实践中，只需使用[`math.factorial`](http://docs.python.org/library/math.html#math.factorial).

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-02T01:04:46.407

```
 def factorial(n):
     if n <= 1: return 1
     return n * factorial(n-1) 
```

我一直认为阶乘是学习递归的典型例子......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-02T02:00:24.253

另一种方法是使用`scipy.product`.

```
>>> import scipy
>>> scipy.product(xrange(1,11))
3628800 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-06T10:04:26.617

作为学习者，您应该在不使用任何内置函数的情况下进行操作，这将帮助您学习编程而不仅仅是工具，因为学习工具更容易成为优秀的程序员。有两种方法可以做到这一点，我已经实现了更简单的版本。

使用递归：

```
def product(n):
    if n== 1:
        return 1
    return n * product(n-1) 
```

使用简单循环：

```
def product(n):
    res = 1
    while n>1:
        res = res * n
        n = n - 1
    return res 
```

# javascript - 表单文本框不会自动更新

> ID：12232586
> 
> 赞同：1
> 
> 时间：2012-09-02T00:49:37.170
> 
> 标签：javascript

这是我的代码：

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>The Raptor Astronomer</title>
        <script>
          function getQuantity()
{
    var theForm = document.forms["formula"];
    var radiusform = theForm.elements["radius"];
    var radius =0;
    if(radiusform.value!="")
    {
        radius = parseInt(radiusform.value);
          var circumference = radius * 2 * Math.PI;
    }
theForm.elements["circumference"].value = var circumference;
}
getQuantity();

    </script>
    </head>
    <body>
        <form id="formula">
            <label>Radius</label>
            <input id="radius" name="radius" type="text" />
            <label>Circumference</label>
            <input id="circumference" name="circumference" type="text"/>
        </form>

    </body>
</html> 
```

据我从教程中可以看出，我的代码应该更新为圆周 - 不过我没有看到这种情况发生。

为什么这不能正常运行？我不包括触发器吗？需要触发吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T00:53:39.713

删除`var`：-

```
theForm.elements["circumference"].value = circumference; 
```

并在之前声明`if`

```
var circumference=0
if(radiusform.value!="")
    {
        radius = parseInt(radiusform.value);
        circumference = radius * 2 * Math.PI;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T00:57:59.363

做了一些小的改动。请参阅**[jsFiddle 示例](http://jsfiddle.net/j08691/LvqKq/1/)**。我将调用脚本绑定到半径输入元素的 onchange 事件。您也不能将 var 用作作业的一部分，因此我将其移至正确的位置。

**JavaScript**

```
function getQuantity() {
    var theForm = document.forms["formula"];
    var radiusform = theForm.elements["radius"];
    var radius = 0;
    var circumference;
    if (radiusform.value != "") {
        radius = parseInt(radiusform.value);
        circumference = radius * 2 * Math.PI;
    }
    theForm.elements["circumference"].value = circumference;
} 
```

​<strong>HTML

```
 <form id="formula">
            <label>Radius</label>
            <input id="radius" name="radius" type="text" onChange="getQuantity()"/>
            <label>Circumference</label>
            <input id="circumference" name="circumference" type="text"/>
        </form>​ 
```

# linux - 在 ubuntu 中执行 shell 脚本

> ID：12232589
> 
> 赞同：0
> 
> 时间：2012-09-02T00:50:59.280
> 
> 标签：linux, shell, unix

也许我在这里遗漏了一些东西，但我有以下小 bash 脚本来删除使用 flex 和 yacc 时创建的一些旧文件，它非常简单，但是当我运行脚本时，它会将结果回显到终端，但不会删除我的文件'我可能错过了一些愚蠢的东西，你们能否指出我正确的方向。

```
#!/bin/bash

echo "rm -f y.tab.h"; (just using one file for now) 
```

我尝试将其更改为

```
echo rm -f y.tab.h; 
```

但仍然没有运气

我尝试使用 bash delete.sh 和 sh delete.sh 执行它，甚至在文件上使用 chmod +x 并使用 ./ 执行它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T00:52:41.107

删除 echo 语句

只需使用

```
rm -f y.tab.h 
```

# java - Java：从 Google https 下载网页内容

> ID：12232593
> 
> 赞同：1
> 
> 时间：2012-09-02T00:52:18.963
> 
> 标签：java, https, download

我正在尝试从 Google https 下载 Web 内容，如下面的链接所示。

[下载链接](https://www.google.com/webhp?hl=en&tab=ww#hl=en&tbs=dfn:1&sa=X&ei=obxCUKm7Ic3GqAGvoYGIBQ&ved=0CDAQBSgA&q=pronunciation&spell=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=c5bfe0fbd78a3271&biw=1024&bih=759)

使用下面的代码，我首先出于测试目的禁用证书验证并信任所有证书，然后将网络作为常规 http 下载，但由于某种原因，它没有成功：

```
public static void downloadWeb() {
        // Create a new trust manager that trust all certificates
        TrustManager[] trustAllCerts = new TrustManager[] { new X509TrustManager() {
            public java.security.cert.X509Certificate[] getAcceptedIssuers() {
                return null;
            }

            public void checkClientTrusted(
                    java.security.cert.X509Certificate[] certs, String authType) {
            }

            public void checkServerTrusted(
                    java.security.cert.X509Certificate[] certs, String authType) {
            }
        } };

    // Activate the new trust manager
        try {
            SSLContext sc = SSLContext.getInstance("SSL");
            sc.init(null, trustAllCerts, new java.security.SecureRandom());
            HttpsURLConnection
                    .setDefaultSSLSocketFactory(sc.getSocketFactory());
        } catch (Exception e) {}

            //begin download as regular http
        try {
            String wordAddress = "https://www.google.com/webhp?hl=en&tab=ww#hl=en&tbs=dfn:1&sa=X&ei=obxCUKm7Ic3GqAGvoYGIBQ&ved=0CDAQBSgA&q=pronunciation&spell=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=c5bfe0fbd78a3271&biw=1024&bih=759";
            URLConnection yc = new URL(wordAddress).openConnection();
            BufferedReader in = new BufferedReader(new InputStreamReader(
                    yc.getInputStream()));
            String inputLine = "";
            while ((inputLine = in.readLine()) != null) {
                System.out.println(wordAddress);
            }

        } catch (IOException e) {}

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T01:09:38.057

您需要伪造 HTTP 标头，以便 Google 认为您是从 Web 浏览器下载它。这是使用[HttpClient](https://hc.apache.org/httpcomponents-client-ga/index.html)的示例代码：

```
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

public class App1 {

    public static void main(String[] args) throws IOException {
        HttpClient httpclient = new DefaultHttpClient();
        HttpGet httpget = new HttpGet("http://_google_url_");
        httpget.setHeader("User-Agent", "Mozilla/5.0 (Windows NT 5.1; rv:8.0) Gecko/20100101 Firefox/8.0");
        HttpResponse execute = httpclient.execute(httpget);
        File file = new File("google.html");
        FileOutputStream fout = null;
        try {
            fout = new FileOutputStream(file);
            execute.getEntity().writeTo(fout);
        } finally {
            if (fout != null) {
                fout.close();
            }
        }
    }
} 
```

警告，如果您使用此代码并违反 Google 的服务条款协议，我概不负责。

# ruby-on-rails-3 - 用于 nil:NilClass 的 Rails 未定义方法“map”

> ID：12232600
> 
> 赞同：1
> 
> 时间：2012-09-02T00:53:44.477
> 
> 标签：ruby-on-rails-3, activerecord

我正在尝试为基于为模型选择的记录（称为“Cancellation_Reasons”）进行选择的表单创建一个选择字段。

在我称为取消的模型中：

```
<%= form_for(@cancellation do |f| %>
    <%= options_from_collection_for_select(@cancellation_reasons, :id, :name) %>
<% end %> 
```

在 Cancellation_Controller 中：

```
def new
  @cancellation = Cancellation.new
  @cancellation_reasons = CancellationReason.find(1)    

  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @trade }
  end
end 
```

当我`CancellationReason.find(1)`在 Rails 控制台中运行时，它会找到记录，所以 @cancellation_reasons 不是零。我认为这可能与我使用选择助手的方式有关（我已经尝试过使用它们，但即使在阅读了 Rails Guide 和[Rails API 文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html)之后我也不太确定要使用哪一个）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T02:33:58.573

options_from_collection_for_select 期望一个集合（即使它是 1 的集合）。所以将代码更改为：

```
def new
  @cancellation = Cancellation.new
  @cancellation_reasons = CancellationReason.all

  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @trade }
  end
end 
```

# c# - 关闭所有表格后退出应用程序

> ID：12232602
> 
> 赞同：1
> 
> 时间：2012-09-02T00:53:51.160
> 
> 标签：c#, monodevelop, gtk#

我想在我的 Gtk# 应用程序中有很多表单。当用户关闭所有表单时，我想退出应用程序。我尝试使用下一个代码：

```
 protected void OnDeleteEvent (object sender, DeleteEventArgs a)
{
    /*Application.Quit ();
    a.RetVal = true;*/

    if(System.Windows.Forms.Application.OpenForms.Count==0)
    {
        Gtk.Application.Quit ();
        a.RetVal = true;
    }
} 
```

但是 System.Windows.Forms.Application.OpenForms.Count 总是返回“0”，无论打开表单的数量如何（OS Ubuntu 12.04）。我该如何解决这个问题并获得实际打开表格的数量？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T18:50:16.400

还试图找到该问题的答案。
我当前的实现基于我在 MS Visual Studio 文档中看到的一些概念：
在项目的主类中维护一个打开窗口的静态列表。
不要使用 delete 事件，而是使用 GTK# 窗口的 destroy 事件（使用 OnDelete 事件处理程序某些东西不起作用，如果我没记错的话，windows delete 不能被成员函数直接调用）。
在 OnDestoy 事件处理程序中：当窗口被销毁时，将其从静态列表中删除。然后检查列表是否为空，然后退出应用程序。
不确定这是否真的适合 GTK# 窗口，但在我的应用程序中，这个概念有效。
问候
哈拉尔

# php - 通过 PHP 远程上传服务器文件

> ID：12232605
> 
> 赞同：9
> 
> 时间：2012-09-02T00:54:56.290
> 
> 标签：php, file, post

我有两台服务器，一台用于我的网站，另一台用于存储。我正在尝试创建一个页面，让某人可以将文件上传到存储服务器，我希望使用表单帖子将其发送到那里。我写了一段非常简单的代码来解决这个问题，但遇到了一些麻烦。如果我将操作更改为将其保存在同一服务器上的 .php，它工作正常，但是当我将其更改为我的存储服务器时，它无法上传并显示我未能上传的“其他”回声。

我的网络服务器上的 HTML：

```
<form action="http://storageServer/upload_file.php" method="post"
enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="file" id="file" /> 
<br />
<input type="submit" name="submit" value="Submit" />
</form> 
```

我的存储服务器上的 PHP：

```
<?php
$folder = "files/";
$path = $folder . basename( $_FILES['file']['name']); 
if(move_uploaded_file($_FILES['file']['tmp_name'], $path)) {
echo "The file ".  basename( $_FILES['file']['name']). " has been uploaded";
} else{
echo "There was an error uploading the file, please try again!";
}
?> 
```

.php 位于带有“files”文件夹的 html 文件夹中。

文件没有进入您可以看到的服务器的任何原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T01:25:28.383

[本主题回答你的问题](https://stackoverflow.com/questions/6963742/remote-file-upload-help-needed)

按照建议，您可以使用 CURL：

```
$ch = curl_init("http://www.remotepage.com/upload.php"); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, array('fileupload' => '@'.$_FILES['theFile']['tmp_name'])); 
echo curl_exec($ch); 
```

# css - 创建动态高度

> ID：12232610
> 
> 赞同：2
> 
> 时间：2012-09-02T00:56:16.697
> 
> 标签：css, html, height, collapse

在尝试创建 div 的结构时，我很难覆盖背景颜色。在下面的示例中，wrap div 没有覆盖其他层。我在 css 中遗漏了一些东西，但无法弄清楚问题所在:(任何帮助都会很棒:)

```
<style type="text/css">
* {
    margin: 0px;
    padding: 0px;
    font-family: Arial;
}
html {
    height: 100%;
}
body {
    background: #688420;
    height: 100%;
    font-family: Arial, Verdana, Geneva, Helvetica, sans-serif;
    font-size: 12px;
    color: #000;
}
#column {
    position: relative;
    width: 950px;
    margin: auto;
}
#wrap {
    background-color:#FF0;
}
.wrapleft {
    background-color: #039;
    text-align: left;
    float:left;
    width:60%;
}
.wrapright {
    background-color:#3F9;
    text-align:left;
    float:left;
    width: 35%;
}
.seperator {
    width:5%;
    background-color:#9CC;
    float:left;
}
.space {
    width:100%;
    height:20px;
    clear:both;
}
#wrapContent {
    background-color: #C3F;
}
</style>
</head>

<body>
<div id="main">
    <div id="column">
        <div id="wrapContent">
            <div id="wrap">
                <div class="space">&nbsp;</div>
                <div class="wrapleft">
                <p> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam a sem risus. Suspendisse ullamcorper iaculis pellentesque. Aenean urna urna, fringilla at semper id, placerat cursus urna. Morbi tempor, orci sed elementum tempor, velit felis elementum dui, sit amet suscipit lorem sapien id nulla. Praesent molestie consequat erat, nec dictum lorem vehicula non. Aenean sodales lacinia tincidunt. Sed semper ornare augue ut malesuada. Etiam ac ornare mauris.  </p>
                </div><!-- wrapleft -->
                <div class="seperator">&nbsp;</div>
                <div class="wrapright">
                                <p> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam a sem risus. Suspendisse ullamcorper iaculis pellentesque. Aenean urna urna, fringilla at semper id, placerat cursus urna. Morbi tempor, orci sed elementum tempor, velit felis elementum dui, sit amet suscipit lorem sapien id nulla. Praesent molestie consequat erat, nec dictum lorem vehicula non. Aenean sodales lacinia tincidunt. Sed semper ornare augue ut malesuada. Etiam ac ornare mauris.  </p>
                </div> <!-- wrapright -->
                <div class="space">&nbsp;</div>
                                <div class="wrapleft">
                <p> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam a sem risus. Suspendisse ullamcorper iaculis pellentesque. Aenean urna urna, fringilla at semper id, placerat cursus urna. Morbi tempor, orci sed elementum tempor, velit felis elementum dui, sit amet suscipit lorem sapien id nulla. Praesent molestie consequat erat, nec dictum lorem vehicula non. Aenean sodales lacinia tincidunt. Sed semper ornare augue ut malesuada. Etiam ac ornare mauris.  </p>
                </div><!-- wrapleft -->
                <div class="seperator">&nbsp;</div>
                <div class="wrapright">
                                <p> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam a sem risus. Suspendisse ullamcorper iaculis pellentesque. Aenean urna urna, fringilla at semper id, placerat cursus urna. Morbi tempor, orci sed elementum tempor, velit felis elementum dui, sit amet suscipit lorem sapien id nulla. Praesent molestie consequat erat, nec dictum lorem vehicula non. Aenean sodales lacinia tincidunt. Sed semper ornare augue ut malesuada. Etiam ac ornare mauris.  </p>
                </div> <!-- wrapright -->

            </div><!-- wrap -->

    </div> <!-- column -->
</div> <!-- main -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T00:57:34.940

你必须清除你的花车：

```
#wrap {
    background-color:#FF0;
    overflow: hidden;
} 
```

# ios - ipad 上的应用程序双存档大小

> ID：12232611
> 
> 赞同：2
> 
> 时间：2012-09-02T00:56:26.247
> 
> 标签：ios, ipad, size, disk-access

大家好，我有一个适用于 iPad 的媒体重应用程序，我的存档约为 370mb。对于我正在做的事情，这并非不合理。如果我在 finder 中查看 xcarchive，它是 ~391MB，.ipa 是 ~388mb，这大致对应于我所有未压缩资产的大小。

所以我在我的测试设备上仔细检查了实际使用情况，它是 755 兆！这类似于管理器中显示的“估计应用商店”大小。

我检查了其他几个测试设备的使用情况，结果是一样的。

我阅读了有关组织者估计往往不准确的其他帖子，但这是否会转化为 iPad 本身的使用指示？iPad不应该只报告正在使用的实际空间吗？

370 mb（双倍）的额外使用与可执行文件未压缩无关，这不应该是 PNG 以某种方式扩展的结果，我使用了大量的 jpeg，因为它们要小得多。

整个压缩/未压缩的讨论感觉就像一个红鲱鱼，因为如果我只是在 finder 中获取未压缩资产文件夹的信息，它是...... 355 mb。所以我不明白如何压缩然后解压缩一堆图像会使它们的大小加倍。

我唯一的理论是： - 由于某种原因，在开发 iPad 上的使用没有表明最终应用程序的大小

*   我所有的 jpeg 都以某种方式在 ipad 本身内转换为 PNG ... ??? 真的怎么可能？

*   我有两个视频文件，它们可以以某种方式自动转换为另一种格式.. ??再次，真的吗？这听起来不可能

*   该应用程序具有应用程序内购买功能，它可能会以某种方式分配磁盘空间以预期未来的购买？

我讨厌所有这些理论，因为它们都没有意义。你们中有人遇到过这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T13:20:37.800

因此，在您的应用程序中编写一些代码，在启动后使用 nsfilemanager 在设备（或模拟器）上运行您的完整应用程序并计算总数并记录它。这样你就可以准确的知道了。还记得文件系统使用固定大小的离散磁盘块，因此 1 字节文件实际上消耗更多，但这可能不是您的问题。

此外，压缩媒体很少会节省空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:54:16.093

> 这类似于管理器中显示的“估计应用商店”大小。

您可以通过检查存档的内容来检查原因：

打开管理器，选择存档，选择您的应用程序，右键单击您的存档，在 Finder 中显示，右键单击文件，显示包内容，打开产品，打开应用程序，右键单击您的应用程序包，显示包内容。

此外，Xcode 可能会将视网膜和非视网膜图像组合成一个多页 TIFF 文件。查看此[答案](https://stackoverflow.com/questions/5567897/combine-high-resolution-artwork-in-xcode-4)以获取更多详细信息。

# excel-2007 - 从符合范围条件的数组中返回条目

> ID：12232614
> 
> 赞同：1
> 
> 时间：2012-09-02T00:57:08.147
> 
> 标签：excel-2007

有没有办法让 Excel 2007 中的单元格通过六个数字的数组查看并返回适合指定范围的任何数字中的最大值？

我在数组中的特定数字是`22 18 14 10 7 4`，我的范围是`6 to 12`。我正在考虑使用 AND 函数创建一个单独的列来简化一些步骤，但我无法使其工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T18:55:39.063

当您说数组时，我不确定您指的是什么，但是如果数组指的是单元格：

```
{=MAX(IF(B18:G18<12,IF(B18:G18>6,B18:G18,0),0))} 
```

将为您提供 (6,12) 之间的值，该值在 A1:A6 范围内最高。

请务必使用`control + shift + enter`.

# java - Java GUI 未在 Ubuntu 上的 Eclipse 中显示

> ID：12232615
> 
> 赞同：3
> 
> 时间：2012-09-02T00:57:19.880
> 
> 标签：java, eclipse, swing, user-interface, ubuntu

我正在开发一个在 Eclipse 中用 Java（使用 Swing）编写的 GUI 程序。我通常在 Windows 上开发，我能够在 Eclipse 中运行\调试程序，它显示得很好。（我正在使用 JUnit 测试来运行 GUI 程序的不同窗口）。

但是，我最近将 Ubuntu 放在我的机器上的硬盘上的第二个分区上，安装了 Eclipse，并尝试运行 JUnit 测试，但 GUI 窗口出现了一秒钟然后消失了。JUnit 测试的其余部分运行良好（0 个错误，0 个失败），但我看不到 GUI。有谁知道为什么会发生这种情况？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:59:07.567

好的，我想通了。GUI 并不意味着在 JUnit 测试中运行，因为一旦测试完成，程序就会退出，并且 GUI 会立即关闭。出于某种原因，当我在 Windows 中运行 JUnit 测试时，该程序保持打开状态，但这并不应该发生。

因为，在我正在处理的当前项目中，在 JUnit 测试中打开 GUI 对我来说更有意义，我实现了以下解决方法：我让运行 GUI 的方法只是等到 GUI 关闭之前它继续执行。为此，我使用了[此处](https://stackoverflow.com/questions/1341699/how-do-i-make-a-thread-wait-for-jframe-to-close-in-java%20which)描述的机制。

# ruby-on-rails - Ruby 中有没有一种方法可以根据逻辑条件将一个数组分成两个较小的数组？

> ID：12232616
> 
> 赞同：2
> 
> 时间：2012-09-02T00:57:25.557
> 
> 标签：ruby-on-rails, ruby

假设我有一个数组中的元素列表，但是有一种合乎逻辑的方法可以将它们分成两组。我想根据该标准将这些元素放入两个较小的数组中。这是一些有效的代码，有助于说明我的意思：

```
foo = ['a', 'bb', 'c', 'ddd', 'ee', 'f']
 => ["a", "bb", "c", "ddd", "ee", "f"] 
a = foo.select{|element| element.length == 1}
 => ["a", "c", "f"]
b = foo.reject{|element| element.length == 1}
 => ["bb", "ddd", "ee"] 
```

我似乎记得看到过某种方式，单个方法调用会同时分配 a 和 b，但我不记得它是什么。它看起来像

```
matching, non_matching = foo.mystery_method{|element| element.length == 1} 
```

我疯了，还是 Ruby 和/或 Rails 中存在这样的方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-02T01:02:36.673

是的！[http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-partition](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-partition)

```
matching, non_matching = foo.partition {|element| element.length == 1} 
```

# xna - XNA Texture2D 裁剪错误

> ID：12232619
> 
> 赞同：0
> 
> 时间：2012-09-02T00:57:46.383
> 
> 标签：xna, crop, texture2d

我有一个问题，我的菜单和面板的菜单项被裁剪，所以这些东西不会低于面板的顶部。一切正常，你只是看不到那个点以下的东西。当我使用此代码检查该面板的位置时

```
if (Position.X <= 400)
    panelMenu.Initialize(TestPanelMenuTexture, new Vector2(700, 200), Item1, Item2, Item3, Item4);
else
    panelMenu.Initialize(TestPanelMenuTexture, new Vector2(100, 200), Item1, Item2, Item3, Item4); 
```

前 4 个裁剪整个菜单，然后接下来的 8 个裁剪除一个部分以外的所有内容，依此类推。如果我不检查它（我只使用第 2 行），那么前 8 个会切断所有内容，接下来的 8 个会切断除一个部分之外的所有内容，依此类推。（旁注：每个部分的高度为 100 像素。）

这是用于初始化每个面板以及菜单和菜单项的代码：

```
for (int i = 0; i <= 7; i++)
{
    for (int q = 0; q <= 7; q++)
    {
        Panel Panel = new Panel();
        Panel.Initialize(TestTextureStill, TestTextureHover, TestTextureActive, new Vector2 (q * 100 + 50, i * 100 + 50), MenuTexture, menuItem1, menuItem2, menuItem3, menuItem4);
        Panels[i, q] = Panel;
    }
} 
```

面板菜单

```
if (Position.X <= 400)
    panelMenu.Initialize(TestPanelMenuTexture, new Vector2(700, 200), Item1, Item2, Item3, Item4);
else
    panelMenu.Initialize(TestPanelMenuTexture, new Vector2(100, 200), Item1, Item2, Item3, Item4); 
```

下面是绘图代码：

```
GraphicsDevice.Clear(Color.CornflowerBlue);
spriteBatch.Begin();
for (int i = 0; i <= 7; i++)
{
    for (int q = 0; q <= 7; q++)
        Panels[i, q].Draw(spriteBatch);
}
spriteBatch.End();
base.Draw(gameTime); 
```

Panel.Draw() 内部

```
if (selected)
    panelMenu.Draw(spriteBatch);
spriteBatch.Draw(PanelTextureCurrent, Position, null, Color.White, 0f, new Vector2(Width / 2, Height / 2), 1f, SpriteEffects.None, 0f); 
```

PanelMenu.Draw() 内部

```
spriteBatch.Draw(PanelMenuTexture, Position, null, Color.White, 0f, new Vector2(Width / 2, Height / 2), 1f, SpriteEffects.None, 0f);
spriteBatch.Draw(Item1.CurrentTexture, new Vector2(Position.X, 50), null, Color.White, 0f, new Vector2(WidthMI1 / 2, HeightMI1 / 2), 1f, SpriteEffects.None, 0f);
spriteBatch.Draw(Item2.CurrentTexture, new Vector2(Position.X, 150), null, Color.White, 0f, new Vector2(WidthMI2 / 2, HeightMI2 / 2), 1f, SpriteEffects.None, 0f);
spriteBatch.Draw(Item3.CurrentTexture, new Vector2(Position.X, 250), null, Color.White, 0f, new Vector2(WidthMI3 / 2, HeightMI3 / 2), 1f, SpriteEffects.None, 0f);
spriteBatch.Draw(Item4.CurrentTexture, new Vector2(Position.X, 350), null, Color.White, 0f, new Vector2(WidthMI4 / 2, HeightMI4 / 2), 1f, SpriteEffects.None, 0f); 
```

如果您还需要什么，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T23:14:40.240

在绘制完所有面板后将绘制菜单和项目。这是因为面板与菜单重叠，导致菜单消失。

# java - 如何在 Applet 中移动图像？

> ID：12232624
> 
> 赞同：-1
> 
> 时间：2012-09-02T00:58:31.503
> 
> 标签：java, image, swing, applet, awt

[我想在applet](http://i.stack.imgur.com/o2zU6.png)中左右上下移动角色，但它根本不动。这是我的代码，请帮助

```
import javax.swing.JPanel;

import java.awt.image.BufferedImage;
import java.io.*;
import javax.imageio.ImageIO;
import java.applet.*;
import java.awt.event.*;
import java.awt.*;

public class drawCenter extends Applet
{
    private int x,y;// the x and y of the position of the player
    private BufferedImage image, pos;

    public void init(  )
    {
        try
        {
            image = ImageIO.read(new File("pokemonCenter.png"));
            pos = ImageIO.read(new File("player/maleInGame.png"));
        }
        catch (IOException ex)
        {

        }
        x = 150; y = 171;
    }

    public void keyPressed(KeyEvent e)
    {
        int keyCode = e.getKeyCode();

        switch( keyCode )
        {
            case KeyEvent.VK_UP: if( y>0 )
            {
                y=y-19;
                repaint();

            }

            break;
            case KeyEvent.VK_DOWN: if( y<171 )
            {
                y=y+19;
                repaint();

            }

            break;
            case KeyEvent.VK_LEFT:if( x>0 )
            {
                x=x-15;
                repaint();

            }

            break;
            case KeyEvent.VK_RIGHT:if( x<285 )
            {
                x=x+15;
                repaint();

            }

            break;
        }
        e.consume();
    }

    public void keyReleased(){

    }

    public void paint( Graphics g )
    {
        g.drawImage(image, 0, 0, null);
        g.drawImage(pos, x, y, null);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T01:10:08.870

您的代码假装有一个 KeyListener，但在任何地方都找不到 KeyListener，更不用说添加到 GUI 的组件中了。您的解决方案：创建一个实现 KeyListener 或扩展 KeyAdapter 的类，然后将其添加到具有焦点的 GUI 组件中。

请查看：[如何编写 KeyListener](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)。

此外，我建议您避免让您的 GUI 类、Applet 实现 KeyListener，因为这会给类带来太多责任。更好的是，我认为要么为您的 KeyListener 创建一个匿名内部类，甚至是一个单独的独立类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T01:11:21.637

让你的类实现[`KeyListener`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/KeyListener.html)，然后`super.addKeyListener(this)`在你的构造函数中调用。正如您现在所拥有的，您既没有指定类实现接口（尽管实现了它需要的方法），也没有使用`Applet`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T01:14:05.993

尝试这个。

```
import javax.swing.*;
import java.awt.*;

import static java.awt.event.KeyEvent.*;

public class DrawCenter extends JApplet implements KeyListener {

    Image character = null;
    int x = 0;
    int y = 0;

    public Image loadImage(String name){
        return new ImageIcon(getClass().getClassLoader().getResource(name)).getImage();
    }

    public void init(){
        character = getImage("pokemonCenter.png");
        x = getWidth()/2 - character.getWidth(null)/2;
        y = getHeight()/2 - character.getHeight(null)/2;
        addKeyListener(this);
    }

    public void keyPressed(KeyEvent e){
        switch (e.getKeyCode()){
            case VK_LEFT: x--; break;
            case VK_RIGHT: x++; break;
            case VK_UP:    y--; break;
            case VK_DOWN: y++; break;
        }
        repaint();
    }

    public void paint(Graphics g){
        g.drawImage(character, x, y, null);
    }

} 
```

如果您正在制作游戏，请查看游戏循环或尝试`Game-Engine (If you'r interested, go to http://game-engine-for-java.googlecode.com/ )`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T01:15:03.943

你应该是这样的：

```
package stack;

import java.applet.*;

import java.awt.event.*;

import java.awt.*;

public class DrawCenter extends Applet implements KeyListener{

    private int x=50,y=50;// the x and y of the position of the player

    public void init(  ){ 
        addKeyListener(this);
    }

    public void keyPressed(KeyEvent e) {
        int keyCode = e.getKeyCode();

        switch( keyCode ) { 
            case KeyEvent.VK_UP: if( y>0 ){ //when up key is pressed and the position of the player is not on the edge
                                y=y-19;
                                repaint();
                            }
                            break;
        case KeyEvent.VK_DOWN: if( y<171 ){//when down key is pressed and the position of the player is not on the edge
                                    y=y+19;
                                    repaint();
                                }
                                break;
        case KeyEvent.VK_LEFT:  if( x>0 ){
                                    x=x-15;
                                    repaint();
                                }
                                break;
        case KeyEvent.VK_RIGHT: if( x<285 ){
                                    x=x+15;
                                    repaint();
                                }
                                break;
        }
    } 

    public void keyReleased(){

    }

    public void paint( Graphics g ){ //will draw the background and the character
        g.fillRect(x, y, 20, 20);

    }

    @Override
    public void keyReleased(KeyEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void keyTyped(KeyEvent arg0) {
        // TODO Auto-generated method stub

    }
} 
```

# html - css psuedo class ::before ::after 不覆盖其他元素的阴影

> ID：12232625
> 
> 赞同：1
> 
> 时间：2012-09-02T00:58:50.890
> 
> 标签：html, css

我正在使用在这里找到的 css 阴影技术：

[http://nicolasgallagher.com/css-drop-shadows-without-images/demo/](http://nicolasgallagher.com/css-drop-shadows-without-images/demo/)

它使用之前和之后的伪类来赋予阴影更多形状。问题是我无法让阴影显示在其他元素上。

这是jsfiddle：http: [//jsfiddle.net/S7dzj/6/](http://jsfiddle.net/S7dzj/6/)

我尝试了具有不同 z 索引的 div 的各种相对定位。我也尝试在*顶部*div 中移动标题元素，没有帮助。我还尝试相对移动*顶部*div`top: -5px`以使其位于*标题*div 下方，但仍然没有阴影。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T01:04:42.117

1.  该`z-index`属性仅适用于 not 的元素`position: static`，因此您的`.top`类只是忽略了该属性。

2.  你`.header`和`.top`类都有相同的`z-index`，所以标题出现在顶部。

[**请参阅更新的 jsFiddle。**](http://jsfiddle.net/KRG3K/)我所做的只是添加`position: relative`（它本身在视觉上不会做任何事情）`.top`并将其更改`z-index`为`-2`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T01:08:21.987

如果您希望阴影重叠`.top`，请参阅 animuson 的回答。

如果没有，请参阅[http://jsfiddle.net/S7dzj/8/](http://jsfiddle.net/S7dzj/8/)

```
.drop-shadow{
    margin-bottom:10px;
} 
```

如果添加边距，您将看到阴影。

# javascript - 在 textarea 中禁用 javascript 定义的 keydown 事件并恢复默认行为

> ID：12232626
> 
> 赞同：3
> 
> 时间：2012-09-02T00:58:57.320
> 
> 标签：javascript, jquery

我正在使用 Hakim El Hattab 的reveal.js 来制作演示幻灯片。我已将 textarea 添加到幻灯片中。在 textarea 中，我想防止在按下某些键时调用 javascript 函数，并恢复默认的键入行为。例如，从以下代码行中可以看到，reveal.js，当`p`按下时，会调用一个函数`navigatePrev()`。我想阻止这个函数被调用，只是想在按下`p`时在文本区域中输入。`p`我怎样才能使用 jquery 做到这一点？我尝试添加以下脚本，但这无济于事。

```
<script>
  $(document).keydown(function (e) {
    if ($(e.target).is('textarea')) {
      e.stopPropagation();
    }
  })
</script> 
```

在reveal.js 中定义的函数仍然被调用。使用`return false`代替`e.stopPropagation()`也无济于事。我还在页面的最后包含了上面的 jQuery 行（在调用reveal.js 之后）。

谢谢你。

**来自reveal.js的相关行**

```
function onDocumentKeyDown(event) {
  // FFT: Use document.querySelector( ':focus' ) === null 
  // instead of checking contentEditable?

  // Disregard the event if the target is editable or a 
  // modifier is present
  if (event.target.contentEditable != 'inherit' || event.shiftKey || event.altKey || event.ctrlKey || event.metaKey) return;

  var triggered = false;

  switch (event.keyCode) {
    // p, page up
    case 80: case 33: navigatePrev(); triggered = true; break;
    // n, page down
    case 78: case 34: navigateNext(); triggered = true; break;
    // h, left
    case 72: case 37: navigateLeft(); triggered = true; break;
    // l, right
    case 76: case 39: navigateRight(); triggered = true; break;
    // k, up
    case 75: case 38: navigateUp(); triggered = true; break;
    // j, down
    case 74: case 40: navigateDown(); triggered = true; break;
    // home
    case 36: navigateTo(0); triggered = true; break;
    // end
    case 35: navigateTo(Number.MAX_VALUE); triggered = true; break;
    // space
    case 32: overviewIsActive() ? deactivateOverview() : navigateNext(); triggered = true; break;
    // return
    case 13: if (overviewIsActive()) { deactivateOverview(); triggered = true; } break;
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T01:27:25.030

您的 keydown 事件绑定的问题在于它绑定到接收事件 LAST 的文档（一旦为时已晚，无法阻止事件在 DOM 树中进一步冒泡）。

相反，请尝试在每次创建事件时将事件直接绑定到 textarea：

```
// create text area & append to slide container
createTextAreaOnSlideContainer();

// bind an event handler to the element
$('textarea.slideTextArea').keydown( function(e) {
    e.stopPropagation();
}); 
```

这将在事件冒泡（传播）到正在侦听要按下的键的文档之前停止事件

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-02T01:38:34.650

你可以这样做：

```
$(document).keydown(function(e){
 if(!$('#textarea').is(':focus')){
    yourfunction();
    }
}); 
```

您只需在其中添加一条`if`语句，如果 textarea 没有聚焦，则调用该函数。

# r - 将整个包裹传递给雪团

> ID：12232629
> 
> 赞同：8
> 
> 时间：2012-09-02T01:00:02.417
> 
> 标签：r, parallel-processing, scope

我正在尝试并行化（使用`snow::parLapply`）一些依赖于包（即，除 之外的包`snow`）的代码。调用的函数中引用的对象`parLapply`必须使用 显式传递给集群`clusterExport`。有没有办法将整个包传递给集群，而不必显式命名每个函数（包括用户函数调用的包的内部函数！）`clusterExport`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T01:12:55.227

在所有节点上安装软件包，并`library(thePackageYouUse)`通过可用命令之一在所有节点上调用代码，例如

```
 clusterApply(cl, library(thePackageYouUse)) 
```

我认为`parallel`最近 R 版本附带的包有示例——例如，请参见此处从`help(clusterApply)`哪里`boot`加载包：

```
 ## A bootstrapping example, which can be done in many ways:
 clusterEvalQ(cl, {
   ## set up each worker.  Could also use clusterExport()
   library(boot)
   cd4.rg <- function(data, mle) MASS::mvrnorm(nrow(data), mle$m, mle$v)
   cd4.mle <- list(m = colMeans(cd4), v = var(cd4))
   NULL
 }) 
```

# windows - 制作一个简单的跨平台程序

> ID：12232630
> 
> 赞同：1
> 
> 时间：2012-09-02T01:00:54.490
> 
> 标签：windows, macos, cross-platform

我想知道如何制作一个简单的跨平台程序。我的意思是，我想制作一个可以轻松编辑 iPad/iPhone 文件的程序。我不知道怎么做。我使用什么，就像它检查您是否连接了 iPad 以及要使用哪个 iPad。另外，我所说的简单就是按钮和文本，也许还有一些图片。有点像 Visual Basic。是否有一个程序可以满足我的要求，或者我需要两个单独的程序？如果你不明白我在问什么，请直说，因为我真的很想制作这个应用程序。谢谢！顺便说一句，我有一台 Mac，所以如果你能推荐我可以使用的 Mac 程序。:)

# mysql - Facebook 减少我发送的所有查询？

> ID：12232633
> 
> 赞同：0
> 
> 时间：2012-09-02T01:02:07.830
> 
> 标签：mysql, facebook, performance, facebook-graph-api, query-optimization

这就是我正在做的事情：

1.  运行为所有者抓取所有专辑的查询
2.  循环执行 1\. 查询，并运行另一个查询以从 pid=cover_pid 的照片中获取 cover_pic 并显示它。
3.  在通过 1\. 查询的同一循环中，我现在还运行另一个查询，该查询选择照片限制 5 并显示它们。

这是：1 + 1 + 5 = 7 个查询每个相册，有 33 个相册 = 231 个查询，这需要 TIME 加载站点，并破坏用户体验！

我在调试后发现不是 1\. 查询需要时间加载，而是 2\. 和 3\. （2\. 运行 33 个查询和 3\. 运行 165 个查询！）

我怎样才能以任何方式减少这种情况？

我想我需要重新考虑结构，但我看不到任何更好的解决方案来加载 2\. 和 3.

我已经考虑过要保存的 cookie、会话，因此下次它会更快，但我认为由于加载时间，第一次加载将用户离开，因此下次无关紧要..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:31:23.033

请使用 Graph API 字段扩展工具来实现这一点。

例如 - graph.facebook.com/[USER_ID]?fields=name,albums.fields(cover_photo,photos.limit(5))

[您可以使用图形资源管理器](https://developers.facebook.com/tools/explorer)直观地构建查询

# ruby-on-rails - 使用 Janrain 和 Ruby on Rails 访问当前用户信息

> ID：12232636
> 
> 赞同：2
> 
> 时间：2012-09-02T01:02:46.050
> 
> 标签：ruby-on-rails, janrain

我正在使用 Janrain 在我的 Ruby on Rails 应用程序中处理用户会话。它似乎正在工作，但是，我不知道如何判断用户是否登录或访问当前用户的信息。用户登录后，是否创建了会话变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-24T18:45:40.150

假设您指的是 Janrain 社交登录（参与），一旦用户通过社交提供者进行身份验证，小部件就会获得一个有效期为 60 分钟的 Janrain OAuth 令牌。您可以使用该令牌通过此 API 端点检索用户的个人资料数据：(https://{your-engage-domain.com}/api/v2/auth_info)。

Janrain Social Login 不维护任何与登录状态相关的会话数据。它只是简化了身份验证并规范了从多个身份验证提供程序检索用户配置文件数据。一旦成功的身份验证事件发生，由您的服务器来验证身份验证令牌，然后建立任何形式的授权会话相关工作。

大多数社交提供者返回有效期为 30-60 天的访问令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T01:05:47.050

尝试 'current_user' 变量，它适用于大多数 Rails 身份验证库，例如：

```
#in the erb file: 
<% current_user = session[:user_id] %>

# or in the rb file: 
class MusicController < ApplicationController
  before_filter :authenticate_user! # just like devise

  def index
    # same methods and api as devise.
    return if signed_in? and current_user.email
  end
end

# put this method in application_controller.rb
def current_user
  @current_user ||= User.find_by_id(session[:user_id])
end 
```

更多细节参考这个例子：[https ://github.com/hatem/janrain-engage-demo](https://github.com/hatem/janrain-engage-demo)

# vb.net - 我怎样才能做到这一点，如果进度条值为 90 或以上，事件就会发生？

> ID：12232639
> 
> 赞同：0
> 
> 时间：2012-09-02T01:03:59.363
> 
> 标签：vb.net, progress-bar, system

我想要它，这样如果progressbar1 的值是90 或以上，就会弹出一个消息框。我将如何在 VB.Net 中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T01:19:06.317

您可能希望创建一个自定义 ProgressBar，添加一个在栏更改时引发的事件。然后在您的消费代码中处理检查值的事件。这个线程有一个很好的例子来说明如何做到这一点。

[forums.codeguru.com/showthread.php?449375-RESOLVED-Where-is-progressbar-change-event](http://forums.codeguru.com/showthread.php?449375-RESOLVED-Where-is-progressbar-change-event)

我希望这有帮助！

# sql - 在 postgresql 中，“数据库”和“关系”有什么区别？('错误关系 x 不存在', '错误数据库 x 已存在')

> ID：12232640
> 
> 赞同：16
> 
> 时间：2012-09-02T01:04:07.890
> 
> 标签：sql, ruby-on-rails, postgresql, relation

我看到这两个错误并列，鉴于谷歌搜索结果的缺乏，不得不问。有什么区别，我需要在这里做什么？

```
deploy=# GRANT SELECT ON angel_research_production TO angel_research;
ERROR:  relation "angel_research_production" does not exist
deploy=# create database angel_research_production;
ERROR:  database "angel_research_production" already exists 
```

我的猜测是我需要从其他一些用户那里做这个授权选择业务......

所以我在 postgres (dbroot) 上运行它并得到这个：

```
postgres=# GRANT SELECT ON angel_research_production TO angel_research;
ERROR:  relation "angel_research_production" does not exist 
```

所以它确实作为数据库存在，但不是作为关系存在。我该如何纠正这个问题以及这里的潜在问题是什么？我有点不知所措。谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-02T01:21:08.797

我的猜测是，您真的想递归地获得数据库中每个关系（表和视图）`GRANT`的权限。正确的？`SELECT``angel_research_production`

## 如何授予数据库中的所有表

如果是这样，在 PostgreSQL 9.0 及更高版本中，您有：

```
GRANT { { SELECT | INSERT | UPDATE | DELETE | TRUNCATE | REFERENCES | TRIGGER }
    [, ...] | ALL [ PRIVILEGES ] }
    ON { [ TABLE ] table_name [, ...]
         | ALL TABLES IN SCHEMA schema_name [, ...] }
    TO { [ GROUP ] role_name | PUBLIC } [, ...] [ WITH GRANT OPTION ] 
```

来自[GRANT 的手册](http://www.postgresql.org/docs/current/static/sql-grant.html)。注意`ALL TABLES IN SCHEMA`子句。用法：

```
GRANT SELECT ON ALL TABLES IN SCHEMA public TO angel_research; 
```

如果您的所有用户定义的对象都在`public` [模式](http://www.postgresql.org/docs/current/static/ddl-schemas.html)中（见下文），那就可以了。

在以前的版本中没有这样的功能，但[用户定义的功能作为解决方法存在](https://stackoverflow.com/questions/11599533/postgresql-8-4-grant-dml-privileges-on-all-tables-to-a-role)。

Pg 9.0 还具有[ALTER DEFAULT PRIVILEGES](http://www.postgresql.org/docs/current/static/sql-alterdefaultprivileges.html)，它更改了分配给*新创建*对象的*默认*权限。它不会影响现有对象。

 *## 错误信息是什么意思？

正如 TokenMacGuy 所指出的，关系是表或视图，而不是数据库。

```
GRANT SELECT ON angel_research_production TO angel_research; 
```

可以被认为是以下的简写：

```
GRANT SELECT ON TABLE angel_research_production TO angel_research
                ^^^^^ 
```

并且该表（关系）不存在，因此您收到上面报告的错误。

在[GRANT 手册](http://www.postgresql.org/docs/current/static/sql-grant.html)或`psql` `\h GRANT`输出中，您将看到：

```
GRANT { { CREATE | CONNECT | TEMPORARY | TEMP } [, ...] | ALL [ PRIVILEGES ] }
    ON DATABASE database_name [, ...]
    TO { [ GROUP ] role_name | PUBLIC } [, ...] [ WITH GRANT OPTION ] 
```

这表明您可以`GRANT`对数据库的权限`CREATE`是`CONNECT`和`TEMPORARY`。数据库没有`SELECT`权限。

## 关系？架构？嗯？

Pg中有四个层次的组织：

*   [集群](http://www.postgresql.org/docs/current/static/creating-cluster.html)- 由 postmaster 控制，接受给定 IP/端口组合上的连接，包含一个或多个*数据库*，包括内置的`template0`和`template1`数据库`postgres`。由`postgresql.conf`和控制`pg_hba.conf`。您的数据库集群通常由安装程序或软件包为您创建。不要与 cluster 作为[计算集群](http://en.wikipedia.org/wiki/Computer_cluster)的正常含义或一般[英语语言含义](http://en.wikipedia.org/wiki/Cluster)相混淆。

*   [数据库](http://www.postgresql.org/docs/current/static/tutorial-createdb.html)——包含一个或多个*模式*或*模式*。连接到 Pg 时，您连接到特定的数据库。

*   [Schema](http://www.postgresql.org/docs/current/static/ddl-schemas.html) - 包含*对象*，包括*关系*。如果您未另行指定，则用户创建的任何内容都会进入`public`架构。查询可以显式引用多个模式中的对象，也可以通过[search_path](http://www.postgresql.org/docs/current/static/ddl-schemas.html#DDL-SCHEMAS-PATH)隐式引用。

*   [对象](http://www.postgresql.org/docs/current/static/ddl-others.html)- 某种 PostgreSQL 特有的，存在于模式中的任何东西（包括关系）。

    *   关系 - 外观和行为类似于表格的事物，例如[视图](http://www.postgresql.org/docs/current/static/tutorial-views.html)和[表格](http://www.postgresql.org/docs/current/static/ddl-basics.html)

    *   其他对象也驻留在模式中，如函数、强制转换、索引、序列、运算符、聚合等。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-02T01:07:38.063

关系是一个表（或者看起来像一个的东西，例如一个视图），也就是说，它是行的集合，所有行都具有相同的字段，并给出了一些名称来引用它们。

数据库是关系和其他实体（如触发器、函数和规则）的集合，它们以某种逻辑分组形式保存在一起。*

# java - 每次创建一个新对象或保留一个

> ID：12232641
> 
> 赞同：0
> 
> 时间：2012-09-02T01:04:12.290
> 
> 标签：java, c++, design-patterns, coding-style, temporary

我们使用原始类型而不考虑构造函数和析构函数。可能正因为如此，它们中的大多数都存储在堆栈中。我们还将`struct`like`float3`用于原始类型。我们也可以为课程做同样的事情。在函数开始时，创建一个新实例，使用它并在函数结束时释放内存。

如果我们在类级别声明一个实例变量，而不是使用局部变量，那么该变量将一直存在，直到持有它的类被释放。这增加了稳定的内存使用量。此外，应该有一些更新方法被转发到这个实例。例如，更改容器大小可能会影响内容，因此应将新大小转发给它们。

类应该如何保持对变量的引用以避免多次创建变量？

我知道它与调用其构造函数（或析构函数）的次数有关，但我正在寻找一个通用的解决方案。例如，如果类只包含像 x、y、z 这样的原语并且它们是不可变的，那么您应该始终构造它们等等。

一种决定选择哪种方式的方法，使其`float3`不可变或使其 x、y 和 z 可修改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T01:51:02.380

通常，您会希望最小化变量的范围以提高性能。此外，在 Java 中，总是更喜欢原语而不是它们的包装类等价物。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T09:22:13.943

如果您使用原始类型，则可能没有区别。

如果您使用一些更“复杂”类型的对象，您可能必须在重用它之前将其重置为已知状态。这可能至少需要与创建一个新对象一样多的代码。它还会使您的代码复杂化，这绝不是一个优势。

除非您注意到代码中存在特定的瓶颈，否则您应该尽量保持其简单易读。除非绝对必要，否则不要使事情复杂化。

# c++ - 当 b 不为零时，我是否总是有 `(a / b * b) + a % b == a`？

> ID：12232650
> 
> 赞同：11
> 
> 时间：2012-09-02T01:04:59.687
> 
> 标签：c++, c

对于`int a, b`，我知道当`a`和恰好有一个`b`为负时， 和 的结果`a / b`取决于`a % b`机器。但是我总是有`(a / b * b) + a % b == a`什么时候`b`不为零？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-02T01:07:57.713

C++11 §5.6[expr.mul]/4 规定：

> 如果商`a/b`在结果的类型中是可表示的，`(a/b)*b + a%b`则等于`a`。

C11 §6.5.5/6 指定相同但措辞略有不同：

> 如果商`a/b`是可表示的，则表达式`(a/b)*b + a%b`应等于`a`；否则，两者的行为`a/b`和`a%b`是未定义的。

# fonts - 使用 Typedia 对字体集进行分类

> ID：12232652
> 
> 赞同：0
> 
> 时间：2012-09-02T01:05:27.843
> 
> 标签：fonts

所以这可能是一个长镜头。

[Typedia](http://typedia.com)是字体的百科全书。

[Fontcase](http://www.bohemiancoding.com/fontcase/)是一个字体管理程序。

Fontcase 使用 Typedia 数据库使用标签和流派等对字体（衬线、显示、无衬线等）进行分类。

这真的很酷，但我不想使用 Fontcase。我更喜欢 FontExplorer X Pro。手动分类字体很痛苦，可能需要数小时。有没有办法将这种功能用于其他程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:31:35.427

不，这似乎是不可能的。

# c# - RestSharp ASYNC 客户端示例。ExecuteAsync () 作品

> ID：12232653
> 
> 赞同：19
> 
> 时间：2012-09-02T01:05:30.573
> 
> 标签：c#, restsharp

有人可以帮我修改下面的代码：

```
client.ExecuteAsync(request, response => {
    Console.WriteLine(response.Content);
}); 
```

基本上我想使用上面的 ExecuteAsync 方法，但不想打印，而是将 response.Content 返回给调用者。

有没有简单的方法来实现这一目标？

我试过这个但不起作用：

```
 public T Execute<T>(RestRequest request) where T : new()
        {
            var client = new RestClient();
            client.BaseUrl = BaseUrl;
            client.Authenticator = new HttpBasicAuthenticator(_accountSid, _secretKey);
            request.AddParameter("AccountSid", _accountSid, ParameterType.UrlSegment); // used on every request
            var response = client.ExecuteAsync(request, response => {
    return response.data);
}); 
```

}

以上代码来自 [https://github.com/restsharp/RestSharp](https://github.com/restsharp/RestSharp)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-02T01:14:33.413

事情是这样的……你不能返回一个异步传递的值，因为你的调用方法已经返回了。在获得结果之前阻止调用者会破坏使用 ExecuteAsync 的意义。在这种情况下，我会返回一个`Task<string>`（假设 response.Content 是一个字符串）：

```
Task<string> GetResponseContentAsync(...)
{
  var tcs=new TaskCompletionSource<string>();
  client.ExecuteAsync(request, response => {
    tcs.SetResult(response.Content);
  });
  return tcs.Task;
} 
```

现在，当任务完成时，你就有了价值。当我们转向 c#5 async/await 时，你应该习惯于用`Task<T>`它的核心来描述异步。

[http://msdn.microsoft.com/en-us/library/dd537609.aspx](http://msdn.microsoft.com/en-us/library/dd537609.aspx)

[http://msdn.microsoft.com/en-us/library/hh191443.aspx](http://msdn.microsoft.com/en-us/library/hh191443.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-27T11:53:59.953

在@spender 的帮助下，这就是我得到的：

您可以在 RestSharp 项目中添加新文件，并添加以下代码：

```
public partial class RestClient
{
    public Task<IRestResponse<T>> ExecuteAsync<T>(IRestRequest request)
    {
        var tcs=new TaskCompletionSource<IRestResponse<T>>();

        this.ExecuteAsync(request, response => 
            {
                tcs.SetResult(
                    Deserialize<T>(request, response)
                );
            });

    return tcs.Task;
    }       
} 
```

这实际上将返回完整的响应，包括状态码和所有内容，因此您可以在获取内容之前检查响应的状态是否正常，您可以通过以下方式获取内容：

```
response.Content 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T01:14:39.250

通过阅读代码，您似乎想要使用`ExecuteAsGet`或`ExecuteAsPost`代替异步实现。

或者也许只是执行——不确定客户端到底是什么类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-11T12:04:38.313

在某些时候，有一堆重载引入了这种支持`System.Threading.Tasks.Task`，并在其中包含了“任务”这个词。可以等待它们（如`HttpClient`'s 方法）。

例如：

*   `ExecuteTaskAsync(request)`（返回`Task<IRestResponse>`）
*   `ExecuteGetTaskAsync(request)`（返回`Task<IRestResponse>`）
*   `ExecuteGetTaskAsync<T>(request)`（返回`Task<IRestResponse<T>>`）

然后这些在后来的 v106 版本中被弃用，我相信任务支持是默认的，例如第一个成为`client.ExecuteAsync(request)`.

所以这些天你可以这样做：

```
var response = await client.ExecuteAsync(request);
return response.Content; 
```

# facebook - 不需要 user_likes 权限 BUG？

> ID：12232657
> 
> 赞同：1
> 
> 时间：2012-09-02T01:06:02.857
> 
> 标签：facebook, facebook-graph-api, facebook-fql

脸书[说](https://developers.facebook.com/docs/reference/fql/page_fan/)：

> 要阅读您需要的 page_fan 表
> 
> *   任何有效的 access_token，如果它是公开的（Facebook 上的任何人都可以看到）。
> *   **如果查询当前用户，则 user_likes 权限。**
> *   如果查询用户的朋友，friends_likes 权限。

[我刚刚在Graph Explorer](https://developers.facebook.com/tools/explorer)中运行了这个查询：

```
SELECT page_id FROM page_fan WHERE uid=me() AND page_id=105557426145540 
```

...但是我没有**请求**user_likes**许可**，它（正确地）说我喜欢这个页面。这是一个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T14:39:03.010

伊吉：

> 转到您的个人资料，然后点赞，然后编辑一个部分，每个部分都有一个隐私选择器 - 我认为“您喜欢的其他页面”涵盖了大部分未分类的页面

但是，您只能管理个人资料中喜欢的隐私。您喜欢的任何粉丝页面（即商业页面）都会自动公开。

就我的应用程序而言，很高兴知道我不必请求**user_like**权限。

从用户的角度来看，有一些人对此不太满意......

[https://www.facebook.com/MakeFanPagesPrivate](https://www.facebook.com/MakeFanPagesPrivate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-16T19:46:51.287

根据[文档，您需要提交您的 Facebook 应用程序进行审核](https://developers.facebook.com/docs/facebook-login/permissions/v2.5#reference-user_likes)

# php - 简单的 PHP 联系表未发送

> ID：12232662
> 
> 赞同：4
> 
> 时间：2012-09-02T01:06:52.090
> 
> 标签：php, email, contact, contact-form

在发布了一个我想不通的更[强大的示例之后，并且浏览了一些无济于事的条目后，我无法获得世界上最简单的 PHP 联系表单来工作。](https://stackoverflow.com/questions/12169912/php-contact-form-not-validating-or-sending)

我从最后一个条目中分解了它，看看我是否至少可以 *发送*一封电子邮件。我已经测试了所有 $var 元素，并且通过简单的回声检查可以识别它们，所以我知道这不是问题。我还检查了 SMTP 兼容性，这也很好。

问题是当我在实时表单上单击“提交”时，会弹出消息说“谢谢”，但我的收件箱中没有收到任何电子邮件。

我在这里能错过什么？

**首先，这是 HTML**

```
 <form action="contactus.php" method="POST" class="create">
     <fieldset>
    <legend align="center">Please fill out details below and click "Submit"</legend>
    <div>
     <label for="fullname" class="fixedwidth">Full Name</label>
     <input type="text" name="fullname" id="fullname" class="input2"/>
    </div><br/>
    <div>
     <label for="email" class="fixedwidth">Email</label>
     <input type="text" name="email" id="email" class="input2"/>
    </div><br/>
      <div>
     <label for="subject" class="fixedwidth">Subject</label>
     <input type="text" name="subject" id="subject" class="input2"/>
    </div><br/>
    <div>
    <label for="details" class="fixedwidth">Body</label>
     <textarea id="details" name="details" cols="62" rows="20"></textarea>
    </div>
    <div class="buttonarea">
        <input type="submit" name="submit" id="submit" value="Submit"/>
    </div>

    </fieldset>
   </form> 
```

**这是PHP**

```
<?php 
$fullname = $_POST['fullname'];
$email = $_POST['email'];
$subject = $_POST['subject'];
$details = $_POST['details'];
$formcontent = "From: $fullname \n Message: $details";
$recipient = "johndoe1@email.com";
$mailheader = "From: $email \r\n";
mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");
echo "Thank You!";
?> 
```

# java - Java Basic：在单独的类中插入数据

> ID：12232671
> 
> 赞同：1
> 
> 时间：2012-09-02T01:08:46.293
> 
> 标签：java

如何在单独的类中插入数据？

```
package teste01classes;

public class Teste01Classes {

    public static void main(String[] args) {
        Alunos[] aluno = new Alunos[20];
        aluno[0] = new Alunos();
        aluno[0].nome = "Abel";
        aluno[0].n1 = 10;
        aluno[0].n2 = 7;
        aluno[0].n3 = 8;

        aluno[1] = new Alunos();
        aluno[1].nome = "Ana Carolina";
        aluno[1].n1 = 8;
        aluno[1].n2 = 7;
        aluno[1].n3 = 5;
        //... n alunos
    }
}

package teste01classes;

public class Alunos {
    String nome;
    int n1, n2, n3;
} 
```

但是我需要

```
 Alunos[] aluno = new Alunos[20];
    aluno[0] = new Alunos();
    aluno[0].nome = "Abel";
    aluno[0].n1 = 10;
    aluno[0].n2 = 7;
    aluno[0].n3 = 8;

    aluno[1] = new Alunos();
    aluno[1].nome = "Ana Carolina";
    aluno[1].n1 = 8;
    aluno[1].n2 = 7;
    aluno[1].n3 = 5;
    //... n alunos 
```

在单独的类中并在 main 中调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T01:18:05.110

创建一个新类，例如`SchoolClass`，使用`createAlunos`将创建 all 的方法`alunos`：

```
package teste01classes;    

public class SchoolClass {

  public static Alunos[] createAlunos() {
    Alunos[] aluno = new Alunos[20];
    aluno[0] = new Alunos();
    aluno[0].nome = "Abel";
    aluno[0].n1 = 10;
    aluno[0].n2 = 7;
    aluno[0].n3 = 8;
    //... n alunos
    return aluno;
  }
} 
```

然后，在 中`Teste01Classes`，调用此方法：

```
public class Teste01Classes {
    public static void main(String[] args) {
        Alunos[] aluno = SchoolClass.createAlunos();
    }
} 
```

# ios - iOS - 第二个视图未显示在选项卡视图上

> ID：12232672
> 
> 赞同：1
> 
> 时间：2012-09-02T01:08:51.163
> 
> 标签：ios, views, tabbar

我有一个 tabBarView 和一个 GWDNativeViewController。GWDNativeViewController 是一个主菜单。我试图让该视图首先显示并覆盖 tabBarView。我在 IBAction 中设置了相同的代码，并且可以正常工作。当我将它放入 Loaddifinishwithoptions 时，它不起作用。

```
@implementation GWDNativeAppDelegate
@synthesize window = _window;
@synthesize tabBarController = _tabBarController;
@synthesize secondView = _secondView;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    // Override point for customization after application launch.
    UIViewController *viewController1 = [[GWDNativeFirstViewController alloc] initWithNibName:@"GWDNativeFirstViewController" bundle:nil];
    UIViewController *viewController2 = [[GWDNativeSecondViewController alloc] initWithNibName:@"GWDNativeSecondViewController" bundle:nil];
    UIViewController *viewController3 = [[GWDNativeThirdViewController alloc] initWithNibName:@"GWDNativeThirdViewController" bundle:nil];
    UIViewController *viewController4 = [[GWDNativeFourthViewController alloc] initWithNibName:@"GWDNativeFourthViewController" bundle:nil];
    UIViewController *viewController5 = [[GWDNativeFifthViewController alloc] initWithNibName:@"GWDNativeFifthViewController" bundle:nil];

    //tabBarController Stuff
    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, viewController2, viewController3, viewController4, viewController5, nil];
    self.window.rootViewController = self.tabBarController;

    //Specify W`enter code here`hich tab to display (Number need to be set based on button selected)
    //self.tabBarController.selectedIndex = 2;       

    GWDNativeViewController *secondView = [[GWDNativeViewController alloc] initWithNibName:nil bundle:nil];
    [secondView setModalTransitionStyle:UIModalTransitionStyleCoverVertical];
    [self.tabBarController presentModalViewController:secondView animated:YES];

    [self.window makeKeyAndVisible];
    return YES;
} 
```

这是 GWDNativeFirstViewController.m 中的代码 IBAction 中的代码有效。viewDidLoad 中的代码无效。？

```
-(IBAction)pressedButton {

    GWDNativeViewController *secondView = [[GWDNativeViewController alloc] initWithNibName:nil bundle:nil];
    [secondView setModalTransitionStyle:UIModalTransitionStyleCoverVertical];
    [self presentModalViewController:secondView animated:YES];
    //[secondView release];
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"First", @"First");
        self.tabBarItem.image = [UIImage imageNamed:@"first"];

    }
    return self;
}

- (void)viewDidLoad
{
    [contentWebView1 loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://m.web.org/?iapp=1#tab1"]]];
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

     GWDNativeViewController *secondView = [[GWDNativeViewController alloc] initWithNibName:nil bundle:nil];
     [secondView setModalTransitionStyle:UIModalTransitionStyleCoverVertical];
     [self.tabBarController presentModalViewController:secondView animated:YES];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T01:29:38.617

tabBarController 的视图还没有加载到这里。您可以将该代码放入 5 个视图控制器之一的 viewDidLoad 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T04:40:18.797

我不确定为什么它在 viewDidLoad 中不起作用，但它可以在 applicationDidFinishLaunchingWithOptions 中起作用：如果您在定义 secondView 之前放置 [self.window makeKeyAndVisible] 行。

```
[self.window makeKeyAndVisible];
 GWDNativeViewController *secondView = [[GWDNativeViewController alloc] initWithNibName:nil bundle:nil];
 [secondView setModalTransitionStyle:UIModalTransitionStyleCoverVertical];
 [self.tabBarController presentModalViewController:secondView animated:YES]; 
```

如果您希望它立即出现，请将动画选项更改为 NO，并删除定义 modalTransitionStyle 的行。

# html - 如何使目录浮动？

> ID：12232675
> 
> 赞同：5
> 
> 时间：2012-09-02T01:09:11.800
> 
> 标签：html, css, org-mode

[http://orgmode.org/worg/org-tutorials/org-beamer/tutorial.html](http://orgmode.org/worg/org-tutorials/org-beamer/tutorial.html) 目录浮动是一个非常不错的功能。如何达到这个效果？顺便说一句，我也在使用 org 模式

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-02T01:15:02.250

看看 CSS

```
position: fixed;
right: 0em;
top: 0em; 
```

这是一个孤立的[**演示**](http://jsbin.com/uxeyuc/1/edit)，包括在悬停时扩展菜单。

**HTML**

```
<div id="toc">
    hello
    <div id="full">hey there<br />This is the full TOC</div>
</div> 
```

**CSS**

```
#toc {
  position: fixed;
  right: 0;
  top: 0;
  background-color:#FFF;
}

#toc #full { display: none; } /* Hide the full TOC by default */

#toc:hover #full{
  display: block; /* Show it on hover */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-01T16:00:18.183

如果您查看教程的源代码（同时移至[http://orgmode.org/worg/exporters/beamer/tutorial.html](http://orgmode.org/worg/exporters/beamer/tutorial.html)），您会发现它引用了两个 css 文件[http://orgmode.org/worg/样式/worg-zenburn.css](http://orgmode.org/worg/style/worg-zenburn.css)和 */worg-classic.css。在那里你可以找到相关的 CSS。

这是您需要添加到 org-mode 文件的相关部分：

```
#+HTML_HEAD: <style>  /* TOC inspired by http://jashkenas.github.com/coffee-script */
#+HTML_HEAD_EXTRA:   @media all
#+HTML_HEAD_EXTRA:   {
#+HTML_HEAD_EXTRA:   #table-of-contents {
#+HTML_HEAD_EXTRA:     font-size: 10pt;
#+HTML_HEAD_EXTRA:     position: fixed;
#+HTML_HEAD_EXTRA:     right: 2em;
#+HTML_HEAD_EXTRA:     top: 0em;
#+HTML_HEAD_EXTRA:     background: #2b2b2b;
#+HTML_HEAD_EXTRA:     color: #dcdccc;
#+HTML_HEAD_EXTRA:     -webkit-box-shadow: 0 0 1em #777777;
#+HTML_HEAD_EXTRA:     -moz-box-shadow: 0 0 1em #777777;
#+HTML_HEAD_EXTRA:     -webkit-border-bottom-left-radius: 5px;
#+HTML_HEAD_EXTRA:     -moz-border-radius-bottomleft: 5px;
#+HTML_HEAD_EXTRA:     text-align: right;
#+HTML_HEAD_EXTRA:     /* ensure doesn't flow off the screen when expanded */
#+HTML_HEAD_EXTRA:     max-height: 80%;
#+HTML_HEAD_EXTRA:     overflow: auto; }
#+HTML_HEAD_EXTRA:     #table-of-contents h2 {
#+HTML_HEAD_EXTRA:       font-size: 10pt;
#+HTML_HEAD_EXTRA:       max-width: 8em;
#+HTML_HEAD_EXTRA:       font-weight: normal;
#+HTML_HEAD_EXTRA:       padding-left: 0.5em;
#+HTML_HEAD_EXTRA:       padding-left: 0.5em;
#+HTML_HEAD_EXTRA:       padding-top: 0.05em;
#+HTML_HEAD_EXTRA:       padding-bottom: 0.05em; }
#+HTML_HEAD_EXTRA:     #table-of-contents #text-table-of-contents {
#+HTML_HEAD_EXTRA:       display: none;
#+HTML_HEAD_EXTRA:       text-align: left; }
#+HTML_HEAD_EXTRA:     #table-of-contents:hover #text-table-of-contents {
#+HTML_HEAD_EXTRA:       display: block;
#+HTML_HEAD_EXTRA:       padding: 0.5em;
#+HTML_HEAD_EXTRA:       margin-top: -1.5em; }
#+HTML_HEAD_EXTRA:     #table-of-contents {
#+HTML_HEAD_EXTRA:       color: black;
#+HTML_HEAD_EXTRA:       background: #FFF;
#+HTML_HEAD_EXTRA:       font-size: 80%;
#+HTML_HEAD_EXTRA:       padding: .5em;
#+HTML_HEAD_EXTRA:       margin: 1em -2em 1em 1em;
#+HTML_HEAD_EXTRA:       display: block;
#+HTML_HEAD_EXTRA:     }
#+HTML_HEAD_EXTRA:     #table-of-contents a  {
#+HTML_HEAD_EXTRA:       color: #003333;
#+HTML_HEAD_EXTRA:     }
#+HTML_HEAD_EXTRA:     #table-of-contents a:hover {
#+HTML_HEAD_EXTRA:       color: #003333;
#+HTML_HEAD_EXTRA:       text-decoration: underline;
#+HTML_HEAD_EXTRA:     }
#+HTML_HEAD_EXTRA:     #table-of-contents li  {
#+HTML_HEAD_EXTRA:       margin: .2em;
#+HTML_HEAD_EXTRA:     }
#+HTML_HEAD_EXTRA:     #table-of-contents h2 {
#+HTML_HEAD_EXTRA:       margin-top: .2em;
#+HTML_HEAD_EXTRA:       border: none;
#+HTML_HEAD_EXTRA:     }
#+HTML_HEAD_EXTRA:   } /* END OF @media all */
#+HTML_HEAD_EXTRA:   @media screen {
#+HTML_HEAD_EXTRA:       #table-of-contents {
#+HTML_HEAD_EXTRA:         float: right;
#+HTML_HEAD_EXTRA:         border: 1px solid #CCC;
#+HTML_HEAD_EXTRA:         max-width: 50%;
#+HTML_HEAD_EXTRA:         overflow: auto;
#+HTML_HEAD_EXTRA:       }
#+HTML_HEAD_EXTRA:     } /* END OF @media screen */
#+HTML_HEAD_EXTRA:   </style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T01:15:54.400

它是用`position: fixed`css 属性完成的，尽管旧的 ie 版本不支持它。

就像你说的，它在创建用户友好的界面时非常有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T01:16:20.720

您可以使用固定定位来相对于窗口放置一些东西。

```
<div id="contents" style="position:fixed;width: 200px;right:0;top:0">
  Floating table of contents
  <div id="expanded" style="display: none">
    Content details
    links
    more links
    more links
  </div>
</div> 
```

然后你可以使用 javascript 或者 css hover 伪类来扩展内容，这样当你将鼠标悬停在浮动的东西上时，它会显示更多的细节（通过将#expanded div 设置为 display: 块）。

要让 css hover psuedo-class 工作，您可以使用以下 css：

```
<style>
  #contents:hover div {
    display: block;
  }
</style> 
```

这意味着如果有人将鼠标悬停在#contents div 上，将显示#contents div 内的任何div。

# .net - 如何将时间点值传递或冻结给任务？

> ID：12232683
> 
> 赞同：1
> 
> 时间：2012-09-02T01:10:30.997
> 
> 标签：.net, task

如何将时间点值传递或冻结给任务？

下面的代码的问题是传递给 DocFTSinXsCollection(SID) 的 SID 不是在执行 Task.Factory.StartNew 时，而是来自下一个 rdr.Read() 的 SID。

```
while (rdr.Read())
{
     SID = rdr.GetInt32(0);
     // other code
     Task.Factory.StartNew(() =>
     {
         // this often gets the new  SID - I need the SID from when Task was started
         DocFTSinXsCollection docFTSinXsCollection = new DocFTSinXsCollection(SID);
     }
     // other code
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T01:11:55.367

您需要`SID`在循环中声明为局部变量，`while`以便每个闭包都有*自己的*变量：

```
while (rdr.Read())
{
     int SID = rdr.GetInt32(0);
     // other code
     Task.Factory.StartNew(() =>
     {
         // this often gets the new  SID - I need the SID from when Task was started
         DocFTSinXsCollection docFTSinXsCollection = new DocFTSinXsCollection(SID);
     }
     // other code
} 
```

# mysql - MySQL表设计模式的建议

> ID：12232687
> 
> 赞同：3
> 
> 时间：2012-09-02T01:11:10.537
> 
> 标签：mysql

我从一个**媒体**表开始，用于存储一个包含 100 万张图像和 1000 部电影的目录树的基本信息（id、路径、文件名、mime、文件大小、md5 等）。我需要添加一些主要与电影相关的新列（标题、描述、运行时），并且需要查询标题匹配。有 1+ 百万行没有标题，我认为我不应该将其他列添加到“媒体”，因为它会给我 1+ 百万空/空行，它不适用。我有一个**media_meta** (id, media_id, meta_key, meta_value) 表，它存储杂项信息的序列化值，标题是其中之一，但现在我需要能够仅索引“标题”以进行搜索。我应该添加另一个表**media_titles**仅使用 media_id，标题上带有索引的标题，例如：

`SELECT * FROM media_titles WHERE title LIKE '%title%';`

我意识到上面的查询还不是最优的，但它仍然是我需要做的事情，即。在标题中搜索子字符串。

表格摘要：

```
media (id, path, filename, filesize, mime, md5, etc...)
media_meta (id, media_id, meta_key, meta_value)
media_titles (media_id, title) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T02:13:02.640

如果您在标题搜索中使用通配符作为您在示例查询中所做的那样，那么表格设计实际上是无关紧要的。如果没有某种全文搜索功能，那就是 - 我不太熟悉。

据我所知，当您以通配符开头时，MySQL（或任何 RDBMS）无法使用列上的索引。

# php - PHP PDO：为什么在 sql 语句中导致此错误？

> ID：12232688
> 
> 赞同：3
> 
> 时间：2012-09-02T01:11:18.500
> 
> 标签：php, sql, pdo

好吧，我不明白为什么不正确执行这一行：

```
try {
    $sql = "UPDATE t_perfiles_permisos 
        SET :tipo = :valor
            WHERE Area_Permiso = :area AND Id_Perfil = :idp";
    $result = $this->dbConnect->prepare($sql) or die ($sql);
    $result->bindParam(':tipo',$this->tipo,PDO::PARAM_STR);
    $result->bindParam(':valor',$this->valor,PDO::PARAM_INT); 
    $result->bindParam(':area',$this->area,PDO::PARAM_STR);
    $result->bindParam(':idp',$this->idp,PDO::PARAM_INT);

    $result->execute();
} catch (PDOException $e) {
    echo "Error!! No se puede establecer el permiso: ".$e->getMessage()."<br/>";
    return false;
} 
```

**错误：**

```
Error!! No se puede establecer el permiso: SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''Buscar' = '1' WHERE Area_Permiso = 'Perfiles' AND Id_Perfil = '4'' at line 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T01:13:23.307

问题是：

```
SET :tipo = :valor 
```

您只能将绑定参数用于值，而不能用于列名。

在这种情况下，您需要做的是在 sql 语句中使用普通变量，并根据允许的列名的白名单检查该变量。

```
SET `{$checked_against_whitelist_column_name}` = :valor 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T01:13:35.350

您不应该“绑定”列名。你在哪里

```
SET :tipo = :valor 
```

这不是正确的语法。而是做

```
SET tipo=:valor 
```

你有它

# php - sql 数据库/php 中的模式值

> ID：12232696
> 
> 赞同：3
> 
> 时间：2012-09-02T01:12:55.680
> 
> 标签：php, sql

我正在研究这个小招生系统，我有一个问题，如果我想在我的系统中招收学生，那么年/lvl 的值应该只会增加，例如，一旦注册，Grade1 将是 2 年级，不会减少到预科或双倍值到 3 级。到目前为止，我的数据输入完全是插入 varchars。希望能对我如何进行进度模式以及我的数据库的外观提供任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T01:51:52.553

我不建议您在真正指数字的地方使用 varchars。它让一些事情变得非常容易。

```
mysql> create table studentLevels(id int(3) primary key auto_increment, name varchar(100));
Query OK, 0 rows affected (0.02 sec)

mysql> desc studentLevels;
+-------+--------------+------+-----+---------+----------------+
| Field | Type         | Null | Key | Default | Extra          |
+-------+--------------+------+-----+---------+----------------+
| id    | int(3)       | NO   | PRI | NULL    | auto_increment |
| name  | varchar(100) | YES  |     | NULL    |                |
+-------+--------------+------+-----+---------+----------------+
2 rows in set (0.00 sec)

mysql> create table studentEnrolled (studentID int(3),subjectID int(3), grade int(3));
Query OK, 0 rows affected (0.00 sec)

mysql> desc studentEnrolled;
+-----------+--------+------+-----+---------+-------+
| Field     | Type   | Null | Key | Default | Extra |
+-----------+--------+------+-----+---------+-------+
| studentID | int(3) | YES  |     | NULL    |       |
| subjectID | int(3) | YES  |     | NULL    |       |
| grade     | int(3) | YES  |     | NULL    |       |
+-----------+--------+------+-----+---------+-------+
3 rows in set (0.00 sec)

mysql> create table subjects (id int(3), subGrade int(3));
Query OK, 0 rows affected (0.05 sec)

mysql> desc subjects;
+----------+--------+------+-----+---------+-------+
| Field    | Type   | Null | Key | Default | Extra |
+----------+--------+------+-----+---------+-------+
| id       | int(3) | YES  |     | NULL    |       |
| subGrade | int(3) | YES  |     | NULL    |       |
+----------+--------+------+-----+---------+-------+
2 rows in set (0.00 sec) 
```

现在，使用这种结构，您有一个表格可以很好地识别您的学生，您可以根据需要在此处使用主键做很多事情（将其链接到其他表格，添加您现在不知道的功能 - 并且数据已标准化）。您有一个整洁的表格，定义了学生注册的内容 - 链接回学生。最后，您还有另一个包含主题信息的简洁表格。

查看`grade`用于查看学生所在位置的列，您可以使用以下选项之一：

当学生完成课程时，您可以像这样更新成绩：

```
update 
    studentEnrolled a, 
    subjects b 
set 
    a.grade=b.subGrade 
where 
    a.subjectID=b.id 
    and a.studentID=:ID 
```

以上将使用您应用程序中的绑定参数，代码将简单地将学生成绩更新为刚刚通过的科目。

如果您希望学生能够返回并学习成绩较低的课程，但不希望他们的“成绩”下降，您可以轻松地将上面的内容修改为：

```
update 
    studentEnrolled a, 
    subjects b 
set 
    a.grade=b.subGrade 
where 
    a.subjectID=b.id 
    and a.grade<subGrade 
    and a.studentID=:ID 
```

更新现在只会修改学生获得“成绩”的记录。

# c# - C# WinForms 如何以特定格式增加数字

> ID：12232703
> 
> 赞同：0
> 
> 时间：2012-09-02T01:14:33.117
> 
> 标签：c#, winforms, increment

我想增加不是从 0 到 1000 而是从 0000 到 1000 开始的增量，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T01:16:14.900

您想将数字格式化为字符串：

```
0.ToString("D4"); // "0000"
1.ToString("D4"); // "0001" 
```

[http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

演示：http: [//ideone.com/VlYBh](http://ideone.com/VlYBh)

# mysql - mysql按3行分组

> ID：12232707
> 
> 赞同：1
> 
> 时间：2012-09-02T01:15:18.997
> 
> 标签：mysql

我有这个查询：

```
SELECT t1.* FROM table t1
  JOIN 
  (
    SELECT MIN(orig_id) min_orig_id, MAX(orig_id) max_orig_id 
    FROM table
    GROUP BY left(datetime,4), mid(datetime,5,2), 
        mid(datetime,7,2), mid(datetime,10,2), mid(datetime,13,2)
  ) t2
  ON t1.orig_id = t2.min_orig_id OR t1.orig_id = t2.max_orig_id; 
```

它按每分钟的第一条和最后一条记录对记录进行分组。现在我想每 3 分钟按第一条和最后一条记录分组。任何想法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T01:30:46.073

这可能是您正在寻找的

```
SELECT t1.* FROM table t1
  JOIN 
  (
    SELECT MIN(orig_id) min_orig_id, MAX(orig_id) max_orig_id 
    FROM table
    GROUP BY concat(left(datetime,4), mid(datetime,5,2), 
        mid(datetime,7,2), mid(datetime,10,2),(cast mid(datetime,13,2) as integer)/3)
  ) t2
  ON t1.orig_id = t2.min_orig_id OR t1.orig_id = t2.max_orig_id; 
```

如果 datetime 是时间戳/日期时间数据类型而不是字符串

```
SELECT t1.* FROM table t1
  JOIN 
  (
    SELECT MIN(orig_id) min_orig_id, MAX(orig_id) max_orig_id 
    FROM table
    GROUP BY UNIX_TIMESTAMP(datetime)/3
  ) t2
  ON t1.orig_id = t2.min_orig_id OR t1.orig_id = t2.max_orig_id; 
```

干净多了

# c# - 使用 EF4 仅获取 SQL 表的最后一行的最有效方法是什么？

> ID：12232708
> 
> 赞同：9
> 
> 时间：2012-09-02T01:15:39.220
> 
> 标签：c#, linq, entity-framework, entity-framework-4

我正在寻找通过表的 ID 列检索表的最后一行。我目前使用的作品：

```
var x = db.MyTable.OrderByDescending(d => d.ID).FirstOrDefault(); 
```

有没有办法以更高效的速度获得相同的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T01:29:23.593

我看不到这个查询通过整个表。

ID 列上没有索引吗？

您能否将分析查询的结果添加到您的问题中，因为这不是应该的样子。

以及分析结果，产生的SQL。`select top 1 * from MyTable order by id desc`除了显式的列名和一些别名之外，我看不出它会是什么。`id`除了对该索引的扫描之外，也没有关于它如何的索引。

编辑：承诺的解释。

Linq 为我们提供了一组通用接口，并且在 C# 和 VB.NET 的情况下，一些关键字支持，用于对返回 0 个或多个项目的源的各种操作（例如内存中的集合、数据库调用、解析 XML 文档， ETC。）。

这使我们能够表达类似的任务，而不管底层来源如何。例如，您的查询包括源，但我们可以做一个更一般的形式：

```
public static YourType FinalItem(IQueryable<YourType> source)
{
  return source.OrderByDesending(d => d.ID).FirstOrDefault();
} 
```

现在，我们可以这样做：

```
IEnumerable<YourType> l = SomeCallThatGivesUsAList();
var x = FinalItem(db.MyTable);//same as your code.
var y = FinalItem(l);//item in list with highest id.
var z = FinalItem(db.MyTable.Where(d => d.ID % 10 == 0);//item with highest id that ends in zero. 
```

但真正重要的部分是，虽然我们有一种方法来定义我们想要完成的操作类型，但我们可以隐藏实际的实现。

调用`OrderByDescending`生成一个对象，该对象包含有关其源的信息，以及它将在排序中使用的 lambda 函数。

调用`FirstOrDefault`反过来有这方面的信息，并使用它来获得结果。

在列表的情况下，实现是生成`Enumerable`基于等效的代码（`Queryable`并`Enumerable`镜像彼此的公共成员，就像他们使用的接口一样`IOrderedQueryable`，`IOrderedEnumerable`等等）。

这是因为，对于我们不知道的列表已经按照我们关心的顺序（或相反的顺序）排序，没有比检查每个元素更快的方法了。我们可以期望的最好的结果是 O(n) 操作，我们可能会得到 O(n log n) 操作 - 取决于排序的实现是否针对仅从其中取出一个项目的可能性进行了优化*。

或者换一种说法，我们可以在仅对可枚举项起作用的代码中手工编写代码的最佳方式仅比以下代码更有效：

```
public static YourType FinalItem(IEnumerable<YourType> source)
{
  YourType highest = default(YourType);
  int highestID = int.MinValue;
  foreach(YourType item in source)
  {
    curID = item.ID;
    if(highest == null || curID > highestID)
    {
      highest = item;
      highestID = curID;
    }
  }
  return highest;
} 
```

我们可以在直接处理枚举器上使用一些微选项做得稍微好一些，但只是轻微的，额外的复杂性只会导致不太好的示例代码。

由于我们不能手动做比这更好的事情，而且由于 linq 代码对源的了解比我们多，所以这是我们可能希望它匹配的最好的。它可能做得不太好（同样，取决于是否考虑到我们只想要一个项目的特殊情况），但它不会打败它。

然而，这**并不是**linq 将采用的唯一方法。它将采用与内存中可枚举源类似的方法，但您的源不是这样的。

`db.MyTable`代表一个表。枚举它会给我们一个 SQL 查询的结果或多或少等同于：

```
SELECT * FROM MyTable 
```

但是，`db.MyTable.OrderByDescending(d => d.ID)`并不等同于调用**它**，然后在内存中对结果进行排序。因为查询在执行时会作为一个整体进行处理，所以我们实际上得到的 SQL 查询结果或多或少类似于：

```
SELECT * FROM MyTable ORDER BY id DESC 
```

最后，整个查询`db.MyTable.OrderByDescending(d => d.ID).FirstOrDefault()`会产生如下查询：

```
SELECT TOP 1 * FROM MyTable ORDER BY id DESC 
```

或者

```
SELECT * FROM MyTable ORDER BY id DESC LIMIT 1 
```

取决于您使用的数据库服务器类型。然后将结果传递给与以下基于 ADO.NET 的代码等效的代码：

```
return dataReader.Read() ?
  new MyType{ID = dataReader.GetInt32(0), dataReader.GetInt32(1), dataReader.GetString(2)}//or similar
  : null; 
```

你不能变得更好。

至于那个 SQL 查询。如果列上有索引`id`（因为它看起来像主键，当然应该有），那么该索引将用于非常快速地找到有问题的行，而不是检查每一行。

总之，由于不同的 linq 提供者使用不同的方式来完成查询，他们都可以尽最大努力以最好的方式来完成。当然，在一个不完美的世界里，我们无疑会发现有些人比其他人更好。更重要的是，他们甚至可以针对不同的条件选择最佳方法。这方面的一个例子是，与数据库相关的提供者可以选择不同的 SQL 来利用不同版本数据库的功能。另一个是`Count()`与内存枚举一起使用的版本的实现有点像这样；

```
public static int Count<T>(this IEnumerable<T> source)
{
  var asCollT = source as ICollection<T>;
  if(asCollT != null)
    return asCollT.Count;
  var asColl = source as ICollection;
  if(asColl != null)
    return asColl.Count;
  int tally = 0;
  foreach(T item in source)
    ++tally;
  return tally;
} 
```

这是更简单的情况之一（在我的示例中再次进行了一点简化，我展示的是这个想法而不是实际代码），但它展示了代码在可用时利用更有效方法的基本原则 -数组的 O(1) 长度和`Count`集合上的属性有时是 O(1) 并且在 O(n) 的情况下我们并没有让事情变得更糟 - 然后当它们不可用时回退一种效率较低但仍然有效的方法。

所有这一切的结果是，Linq 在性能方面往往会物超所值。

现在，一个体面的编码器应该能够在大多数情况下匹配或击败它的方法来处理任何给定的情况†，即使 Linq 提出了完美的方法，它本身也会有一些开销。

然而，在整个项目的范围内，使用 Linq 意味着我们可以简洁地创建合理有效的代码，这些代码与相对有限数量的定义良好的实体相关（就数据库而言，通常每个表一个）。特别是，匿名函数和连接的使用意味着我们得到的查询非常好。考虑：

```
var result = from a in db.Table1
  join b in db.Table2
  on a.relatedBs = b.id
  select new {a.id, b.name}; 
```

在这里，我们忽略了我们不关心的列，生成的 SQL 也会这样做。考虑一下如果我们要创建与手工编码的 DAO 类相关的对象，我们会做`a`什么`b`：

1.  创建一个新类来表示`a`' id 和`b`' 名称的组合，以及运行我们需要生成实例的查询的相关代码。
2.  运行查询以获取有关每个`a`和相关的所有信息`b`，并与废物一起生活。
3.  运行查询以获取我们关心的每个字段的信息，并为其他字段设置默认值`a`。`b`

其中，选项 2 将是浪费的，也许是非常浪费的。选项 3 会有点浪费并且非常容易出错（如果我们不小心尝试在代码中的其他地方使用未正确设置的字段怎么办？）。只有选项 1 会比 linq 方法产生的效率更高，但这只是一种情况。在一个大型项目中，这可能意味着生成数十个甚至数百个或数千个略有不同的类（与编译器不同，我们不一定会发现它们实际上相同的情况）。因此，在实践中，当涉及到效率时，linq 可以为我们带来一些好处。

高效 linq 的良好策略是：

1.  尽可能长时间地使用您开始使用的查询类型。`ToList()`每当您使用或等将项目抓取到内存中时`ToArray`，请考虑是否真的需要。除非你需要或者你可以清楚地说明这样做给你带来的好处，否则不要这样做。
2.  如果您确实需要转移到内存中的处理，请优先`AsEnumerable()`使用`ToList()`其他方法，因此您一次只能抓取一个。
3.  使用 SQLProfiler 或类似工具检查长时间运行的查询。在少数情况下，此处的策略 1 是错误的，而移至内存`AsEnumerable()`实际上更好（大多数与`GroupBy`不使用非分组字段上的聚合的使用有关，因此实际上没有单个 SQL 查询他们对应）。
4.  如果一个复杂的查询被多次命中，那么`CompiledQuery`可以提供帮助（4.5 的情况较少，因为它具有自动优化功能，涵盖了它所帮助的一些情况），但通常最好将其排除在第一种方法之外，然后只使用它在效率问题的热点。
5.  你可以让 EF 运行任意 SQL，但除非它是一个强大的收益，否则避免它，因为太多这样的代码会降低使用 linq 方法的一致性可读性（我不得不说，我认为 Linq2SQL 在调用存储过程甚至调用 UDF 更是如此，但即使在那里这仍然适用 - 仅查看代码之间的关系就不太清楚了）。

*AFAIK, this particular optimisation isn't applied, but we're talking about the best possible implementation at this point, so it doesn't matter if it is, isn't, or is in some versions only.

†I'll admit though that Linq2SQL would often produce queries that use APPLY that I would not think of, as I was used to thinking of how to write queries in versions of SQLServer before 2005 introduced it, while code doesn't have those sort of human tendencies to go with old habits. It pretty much taught me how to use APPLY.

# java - 在数组中创建均匀数量的随机性

> ID：12232712
> 
> 赞同：2
> 
> 时间：2012-09-02T01:16:34.317
> 
> 标签：java, random

假设您有一个任意大的二维数组，其中包含偶数个项目。为清楚起见，我们还假设您只能在两个事物之间进行选择，以将其作为给定项目放入数组中。您将如何在数组中的给定索引处放置一个随机选择，但是一旦数组被填充，您将在两个选择之间进行平均分配？

如果有任何代码答案，Java 是首选，但其他语言也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T01:21:03.147

您基本上可以以相反的方式考虑它。您可以从数组中选择 n/2 个元素并将第一个值放入其中，而不是决定给定索引，将哪个值放入其中。然后将第二个值放在另一个 n/2 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T01:27:29.940

二维`A[M,N]`数组可以映射到向量`V[M*N]`（您可以使用行优先或列优先顺序进行映射）。

从一个向量开始`V[M*N]`。用第一个选择填充它的前半部分，用第二个选择对象填充数组的后半部分。运行[*Fisher-Yates*](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)洗牌，并将洗牌后的数组转换为二维数组。数组现在填充了在两个选项之间平均分配的元素，并且每个特定索引处的选项都是随机的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T01:36:38.483

下面创建矩阵区域的大小，并用第一个选项 ( )`List<T>`填充一半，用第二个选项 ( ) 填充一半。之后，它应用 shuffle（即 Fisher-Yates，via ）并开始用这些值填充矩阵。`spaces[0]``spaces[1]`[`Collections.shuffle`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)

```
static <T> void fill(final T[][] matrix, final T... space) {
  final int w = matrix.length;
  final int h = matrix[0].length;
  final int area = w * h;
  final List<T> sample = new ArrayList<T>(area);
  final int half = area >> 1;
  sample.addAll(Collections.nCopies(half, space[0]));
  sample.addAll(Collections.nCopies(half, space[1]));
  Collections.shuffle(sample);
  final Iterator<T> cursor = sample.iterator();
  for (int x = w - 1; x >= 0; --x) {
    final T[] column = matrix[x];
    for (int y = h - 1; y >= 0; --y) {
      column[y] = cursor.next();
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T01:43:02.023

伪代码：

```
int trues_remaining = size / 2;
int falses_remaining = size / 2;

while (trues_remaining + falses_remaining > 0)
{
  if (trues_remaining > 0)
  {
    if (falses_remaining > 0)
      array.push(getRandomBool());
    else
      array.push(true);
  }
  else
    array.push(false);
} 
```

但是，实际上并不能扩展到两个以上的值。怎么样：

```
assoc_array = { 1 = 4, 2 = 4, 3 = 4, 4 = 4 };

while (! assoc_array.isEmpty())
{
  int index = rand(assoc_array.getNumberOfKeys());
  int n = assoc_array.getKeyAtIndex(index);

  array.push(n);

  assoc_array[n]--;
  if (assoc_array[n] <= 0) assoc_array.deleteKey(n);
} 
```

编辑：刚刚注意到你要求一个二维数组。好吧，将这种方法应用于 n 维应该很容易。

EDIT2：根据您上面的评论，“校园选择”是一个很棒的名字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-02T02:25:10.520

听起来您对随机性的要求不是很严格，但我想我会为任何可能从中受益的人贡献更多想法。

您基本上是在要求一个伪随机二进制序列，而我所知道的最流行的是[最大长度序列](http://en.wikipedia.org/wiki/Maximum_length_sequence)。这使用了一个 n 位寄存器和一个线性反馈移位寄存器来定义具有完全平坦频谱的周期性系列 1 和 0。至少它在某些范围内是完全平坦的，由序列的周期（2^n-1 位）确定。

这意味着什么？基本上，这意味着如果使用其全长，则可以保证序列在所有班次（以及因此频率）上是最大随机的。与从随机数生成器生成的等长数字序列相比，它的每个长度包含比典型随机生成的序列更多的随机性。

正是由于这个原因，它被用于确定系统白噪声分析中的脉冲函数，特别是当实验时间很宝贵且高阶交叉效应不太重要时。因为序列相对于自身的所有变化是随机的，所以它的自相关是一个完美的 delta 函数（除了上面指出的限定符），因此刺激不会污染刺激和响应之间的互相关。

我真的不知道你对这个矩阵的应用是什么，但如果它只是需要“出现”随机，那么这将非常有效地做到这一点。就平衡而言，1 与 0，序列保证恰好比 0 多一个 1。因此，如果您尝试创建 2^n 的网格，则可以保证通过添加一个0 到最后。

So an m-sequence is more random than anything you'll generate using a random number generator and it has a defined number of 0's and 1's. However, it doesn't allow for unqualified generation of 2d matrices of arbitrary size - only those where the total number of elements in the grid is a power of 2.

# java - 在 Eclipse for Mac 上转换为 Dalvik 格式失败，出现错误 1

> ID：12232714
> 
> 赞同：0
> 
> 时间：2012-09-02T01:17:29.560
> 
> 标签：java, android, eclipse, compiler-errors, dalvik

我知道有很多这样的问题，但是我遵循了很多不同的解决方案，但都没有成功。

我在 Mac OSX 10.6.8 上运行 Eclipse 3.7。我以前在这个 SDK 上开发过 Android 应用程序，并让它们编译。但是，在我的最新项目中（当它处于非常基本的状态时，我已经让它使用 Android 虚拟设备编译和运行），当我告诉它运行（在虚拟设备上对其进行测试）时，我得到了这个错误消息（即使我的项目中没有小红色 X 或任何其他可检测的错误）：

[2012-09-01 18:13:48 - RadarGun] Dx 故障处理“java/andythompson/radargun/BuildConfig.class”：

不构建核心库时对核心类（java.* 或 javax.*）的不明智或错误使用。

这通常是由于在使用 IDE（例如 Eclipse）时无意中在应用程序的项目中包含了核心库文件。如果您确定您不是故意定义核心类，那么这是对正在发生的事情的最可能的解释。

但是，您实际上可能正在尝试在核心命名空间中定义一个类，例如，您可能从非 Android 虚拟机项目中获取了该类的源代码。这肯定是行不通的。至少，它会危及您的应用程序与平台未来版本的兼容性。它的合法性也经常受到质疑。

如果你真的打算构建一个核心库——它只适合作为创建完整虚拟机分发的一部分，而不是编译应用程序——然后使用“--core-library”选项来抑制这个错误消息。

如果您继续使用“--core-library”，但实际上正在构建应用程序，那么请预先警告您的应用程序在某些时候仍将无法构建或运行。请为愤怒的客户做好准备，他们会发现，例如，一旦他们升级操作系统，您的应用程序就会停止运行。你会为这个问题负责。

如果您合法地使用了一些恰好位于核心包中的代码，那么您拥有的最简单安全的替代方法是重新打包该代码。也就是说，将有问题的类移动到您自己的包命名空间中。这意味着它们永远不会与核心系统类发生冲突。JarJar 是一个可以帮助您完成这项工作的工具。如果你发现你做不到这一点，那么这表明你所走的道路最终会导致痛苦、痛苦、悲伤和悲叹。

[2012-09-01 18:13:48 - RadarGun] Dx 1 错误；中止 [2012-09-01 18:13:48 - RadarGun] 转换为 Dalvik 格式失败，错误 1

--------------------------（错误信息结束）------------------ -----

我已经尝试了整个项目-> 属性-> 构建路径-> 删除除您正在处理的项目之外的所有项目-> 清理部分。

还有其他建议吗？谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-02T01:39:41.963

> 还有其他建议吗？

好吧，错误消息*表明*您的代码正在使用它不应该使用的`java.*`或类。`javax.*`因此，请尝试检查您的代码以找出它抱怨的类。

# wordpress - 如何删除客户帖子类型网址中的 slug？

> ID：12232715
> 
> 赞同：2
> 
> 时间：2012-09-02T01:17:51.170
> 
> 标签：wordpress, url, wordpress-theming, slug, permalinks

在 Woothemes 的列表主题中，孩子们是 Bookclub。当我添加一本书时 - 作为自定义帖子类型 - 网址如下所示：

```
mysite/book/post-name 
```

我试图删除蛞蝓“书”，但我失败了，我希望它是

```
mysite/post-name 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-24T09:40:02.710

比为此安装一个完整的插件要好得多。
用 4.3 测试：

```
register_post_type( 'dummy', array(
    //other custom posttype definitions 
    'rewrite' => array('slug' => '/')
) ); 
```

在此之后**保存您的重写规则**以使其工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-01T15:47:51.850

其实很简单，安装插件“Remove slug from custom post type”来删除'/product/'slug，不需要设置。安装插件“SEO Ultimate”以删除“产品类别”slug，在“Permalink Tweaker”下的 SEO Ultimate 设置中检查“产品类别”并保存。我们将其用于关联公司，因此无法对购物车等其他领域发表评论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T01:55:51.010

我不知道这个插件的效果如何，但你去吧。

[http://wordpress.org/extend/plugins/remove-slug-from-custom-post-type/](http://wordpress.org/extend/plugins/remove-slug-from-custom-post-type/)

# java - Java 输入问题 - 如何比较字符串

> ID：12232723
> 
> 赞同：2
> 
> 时间：2012-09-02T01:19:38.120
> 
> 标签：java, input, java.util.scanner

这似乎很简单，但我已经被困在这里几个小时了。

当您必须在 Java 中比较两个字符串时，我有疑问。

如果我只是做这样的事情：

```
String var1 = "hello";
String var2 = "hello"; 
```

然后在另一个函数中比较这两个词，结果显然是正确的。

但问题是当我必须比较来自输入的两个单词时。这是我的代码：

```
import java.util.Scanner;

public class Compare{

public static void main(String[] args){
    Scanner Scanner = new Scanner (System.in);

    System.out.println("Enter first word: ");
    String var1 = Scanner.nextLine();

    System.out.println("Enter second word: ");
    String var2 = Scanner.nextLine();

    if (same (var1, var2))
        System.out.println("Yes");
    else
        System.out.println("No");
}

public static boolean same (String var1, String var2){
    if (var1 == var2)
        return true;        
    else
        return false;
}

} 
```

我已经尝试了几次（显然输入了同一个单词），结果总是 False。

我不知道为什么会这样。我错过了什么？

这是我第一次接触 Java。我将不胜感激任何帮助。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T01:21:56.923

你应该改变

```
if (var1 == var2)
{
    return true;        
}
else
{
    return false;
} 
```

至

```
if (var1.equals(var2))
{
    return true;        
}
else
{
    return false;
} 
```

请参阅[此答案](https://stackoverflow.com/questions/767372/java-string-equals-versus)以了解两者之间的区别

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T01:24:39.603

在 Java 中，`==`是一个引用相等运算符。

它适用于以下内容。

```
String var1 = "hello";
String var2 = "hello";
boolean cmp = var1 == var2; 
```

只是因为它们是字符串文字并且它们被分配在字符串表中的同一个位置，所以两个变量都指向同一个字符串。

如果您从另一个来源获取数据，则字符串是动态分配的，因此您应该使用[`var1.equals(var2)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)（并且在比较两个对象时应该始终使用那个）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T01:38:51.560

更准确地说，在 Java 中使用字符串时，如果您的字符串已被实习，有时您可以使用 == 而不是 .equals。请记住 == 总是比较对象引用，而不是对象的内容。实习字符串意味着您将获得相同的对象引用，这就是 == 与实习字符串一起工作的原因。

请阅读此处的 Javadoc 以更清楚地理解这一点：

[String.intern()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#intern%28%29)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T09:25:59.570

相等运算符（==）首先检查字符串的引用，然后检查字符串的值。而 equals 方法首先检查值。因此，在这种情况下，应使用 equals 方法而不是相等运算符。 `String s="hello"; String s1="hello"; String s3=new String("hello")` 在上面的代码片段中，如果你使用`If(s==s1){System.out.print("Equal");}`它会打印相等。但是如果你检查`If(s==s3){System.out.print("unqual");}`它不会打印不相等。因此，您可以看到即使字符串 s 和 s3 相等，输出也是错误的。因此，在这种情况下，就像有问题的程序一样

> 必须使用等于方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-03T07:19:56.433

```
var1 == var2 
```

有时会起作用，因为 VM 为内存优化的两个变量分配了相同的内存，因此具有相同的引用。情况并非总是如此，因此最好使用

```
var1.equals(var2) 
```

如果您想比较它们的值并且不关心参考。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-02T01:23:28.317

而不是`if (same (var1, var2))`使用`if (v1.equals(v2))`. 无需创建新方法来比较两个[`String`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)s。就是[`equals()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equals%28java.lang.Object%29)这样。

`==`用于比较引用，而不是每个`String`对象的内容。

# android - PopupWindow - 在外部单击时关闭

> ID：12232724
> 
> 赞同：107
> 
> 时间：2012-09-02T01:19:41.363
> 
> 标签：android, popupwindow, android-menu

我的活动中有一个 PopupWindow，问题是我的 PopupWindow 仍然显示，即使我正在与我的活动交互（比如在我的列表上滚动）。我可以滚动浏览我的列表并且 PopupWindow 仍然存在。

我想要实现的是当我在不是 PopupWindow 的屏幕上触摸/滚动/单击/等时，我想关闭 PopupWindow。就像菜单的工作原理一样。如果您在菜单外单击，菜单将被关闭。

我试过`setOutsideTouchable(true)`了，但它不会关闭窗口。谢谢。

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-09-02T01:31:43.827

如果您触摸它的外部，请尝试设置`setBackgroundDrawable`它`PopupWindow`应该关闭窗口。

* * *

## 回答 #2

> 赞同：132
> 
> 时间：2013-07-31T15:31:55.450

我发现除了 WareNinja 对已接受答案的评论之外，提供的任何答案都不适合我，而 Marcin S. 的可能也适用。这是对我有用的部分：

```
myPopupWindow.setBackgroundDrawable(new BitmapDrawable());
myPopupWindow.setOutsideTouchable(true); 
```

或者：

```
myPopupWindow.setFocusable(true); 
```

不知道有什么区别，但是 ListPopupWindow 源代码实际上在使用 setModal 将其模态设置为 true 时使用后者，因此至少 Android 开发人员认为这是一种可行的方法，而且只有一行。

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2015-06-03T02:22:04.920

我遇到了同样的问题，并将其修复为以下代码。这对我来说可以。

```
 // Closes the popup window when touch outside.
    mPopupWindow.setOutsideTouchable(true);
    mPopupWindow.setFocusable(true);
    // Removes default background.
    mPopupWindow.setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT)); 
```

顺便说一句，不要使用 BitmapDrawable 已弃用的构造函数，使用这个***新的 ColorDrawable(android.R.color.transparent)***替换默认背景。

玩得开心@。@

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2012-09-29T19:01:16.033

我知道已经很晚了，但我注意到人们仍然对弹出窗口有疑问。我决定编写一个完整的工作示例，您可以通过触摸或单击弹出窗口外部或仅触摸窗口本身来关闭弹出窗口。为此，创建一个新的 PopupWindow 类并复制以下代码：

**PopupWindow.class**

```
public class PopupWindow extends android.widget.PopupWindow
{
Context ctx;
Button btnDismiss;
TextView lblText;
View popupView;

public PopupWindow(Context context)
{
    super(context);

    ctx = context;
    popupView = LayoutInflater.from(context).inflate(R.layout.popup, null);
    setContentView(popupView);

    btnDismiss = (Button)popupView.findViewById(R.id.btn_dismiss);
    lblText = (TextView)popupView.findViewById(R.id.text);

    setHeight(WindowManager.LayoutParams.WRAP_CONTENT);
    setWidth(WindowManager.LayoutParams.WRAP_CONTENT);

    // Closes the popup window when touch outside of it - when looses focus
    setOutsideTouchable(true);
    setFocusable(true);

    // Removes default black background
    setBackgroundDrawable(new BitmapDrawable());

    btnDismiss.setOnClickListener(new Button.OnClickListener(){

        @Override
        public void onClick(View v) {

         dismiss();
        }});

    // Closes the popup window when touch it
/*     this.setTouchInterceptor(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            if (event.getAction() == MotionEvent.ACTION_MOVE) {
                dismiss();
            }
            return true;
        }
    }); */   
   } // End constructor

   // Attaches the view to its parent anchor-view at position x and y
   public void show(View anchor, int x, int y)
   {
      showAtLocation(anchor, Gravity.CENTER, x, y);
   }
} 
```

现在为弹出窗口创建布局： **popup.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout     
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="1dp"
    android:orientation="vertical"
    android:padding="10dp" >

<TextView 
    android:id="@+id/text" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"  
    android:gravity="center" 
    android:padding="5dp" 
    android:text="PopupWindow Example"
    android:textColor="#000000" 
    android:textSize="17sp" 
    android:textStyle="italic" />

<FrameLayout
    android:layout_width="match_parent" 
    android:layout_height="wrap_content" 
    android:layout_gravity="center_vertical">

    <Button
        android:id="@+id/btn_dismiss" 
        style="?android:attr/buttonStyleSmall" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:text="Dismiss" 
        android:visibility="gone" />

    <TextView
        android:id="@+id/lbl_dismiss"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="Touch outside of this box to dismiss"
        android:textColor="#ffffff"
        android:textStyle="bold" />

</FrameLayout> 
```

在您的主要活动中创建 PopupWindow 类的实例：

```
final PopupWindow popupWindow = new PopupWindow(this);
popupWindow.show(findViewById(R.id.YOUR_MAIN_LAYOUT), 0, -250); 
```

其中 YOUR_MAIN_LAYOUT 是 popupWindow 将在其中弹出的当前活动的布局

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2017-11-14T08:51:59.237

感谢@LunaKong 的回答和@HourGlass 的确认。我不想做重复的评论，只想说清楚简洁。

```
// Closes the popup window when touch outside. This method was written informatively in Google's docs.
mPopupWindow.setOutsideTouchable(true);

// Set focus true to prevent a touch event to go to a below view (main layout), which works like a dialog with 'cancel' property => Try it! And you will know what I mean.
mPopupWindow.setFocusable(true);

// Removes default background.
mPopupWindow.setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT)); 
```

月票。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2014-08-05T18:22:01.923

对于`ListPopupWindow`将窗口设置为显示时的模式。

```
mListPopupWindow.setModal(true); 
```

这样，在外部单击`ListPopupWindow`将关闭它。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2017-08-06T07:12:42.960

请注意，要取消`popupWindow.setOutsideTouchable(true)`，您需要`wrap_content`像下面的代码一样制作宽度和高度：

```
PopupWindow popupWindow = new PopupWindow(
            G.layoutInflater.inflate(R.layout.lay_dialog_support, null, false),
            WindowManager.LayoutParams.WRAP_CONTENT,
            WindowManager.LayoutParams.WRAP_CONTENT, true);

popupWindow.setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));
popupWindow.setOutsideTouchable(true);
popupWindow.setFocusable(true);
popupWindow.showAtLocation(view, Gravity.RIGHT, 0, 0); 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-09-27T06:11:30.803

```
mPopWindow.setFocusable(true); 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2017-07-31T06:21:54.443

```
 popupWindow.setTouchable(true);
  popupWindow.setFocusable(true);
  popupWindow.showAtLocation(popupView, Gravity.CENTER, 0, 0); 
```

当单击/触摸屏幕时，它将关闭 PopupWindow。确保在 showAtLocation 之前设置了可聚焦的 true。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2019-07-18T02:22:09.170

触摸外部时，您可以使用`isOutsideTouchable` **OR** `isFocusable`关闭弹出窗口

```
popupWindow.isOutsideTouchable = true // dismiss popupwindow when touch outside

popupWindow.isFocusable = true // dismiss popupwindow when touch outside AND when press back button 
```

**笔记**

*   目前，经过测试，我看到`setBackgroundDrawable` **不要**帮助我们关闭 popupwindow

*   如果您查看`PopupWindow`(`PopupWindow->PopupDecorView->dispatchKeyEvent`和`PopupWindow->PopupDecorView->onTouchEvent`) 中的关闭代码。您会看到，当按下后退按钮时，它们会关闭`ACTION_UP`，当触摸外部时，它们会关闭`ACTION_UP`或`ACTION_OUTSIDE`

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2015-09-25T10:07:07.783

@LunaKong 建议工作就像一个魅力。

但是设置**mPopupWindow.setFocusable(false)。**消除使弹出窗口消失所需的不必要的触摸。

例如：假设屏幕上有一个可见的弹出窗口，并且您将要单击一个按钮。因此，在这种情况下，（如果 mpopwindow.setFocusable(true)）在第一次单击按钮 popupwindow 时将关闭。但是您必须再次单击才能使按钮起作用。if**(mpopwindwo.setFocusable(false)** 单击按钮**关闭弹出窗口并触发按钮单击。** 希望对您有所帮助。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2014-02-17T10:08:44.137

设置窗口背景透明：

```
PopupWindow.getBackground().setAlpha(0); 
```

在布局中设置背景之后。工作正常。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2017-08-09T10:02:13.797

在某些情况下，使弹出窗口具有焦点是不可取的（例如，您可能不希望它从另一个视图中窃取焦点）。

另一种方法是使用触摸拦截器：

```
popupWindow.setOutsideTouchable(true);
popupWindow.setTouchInterceptor(new View.OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_OUTSIDE) {
            popupWindow.dismiss();
        }
        return false;
    }
}); 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-08-28T14:45:59.267

如果此弹出窗口是另一个活动，并且您将其大小减小到原始屏幕并且您想要启用或禁用外部区域。您可以通过以下代码简单地启用或禁用外部区域：

使能够：

`YourActivity.this.setFinishOnTouchOutside(true);`

禁用：

`YourActivity.this.setFinishOnTouchOutside(false);`

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-07-20T09:07:39.477

使用 View popupView 关闭 popupWindow

```
`popupView.setOnClickListener(new View.OnClickListener() {
                   @Override
                   public void onClick(View view) {
                       popupWindow.dismiss();
                   }
               }); 
```

` 如果你使用它，你还可以将 OnClickListener 设置为 popupWindow 内的任何按钮

# html - CSSing 输入类型仅提交 - 不适用于所有输入，而我根本无法使用更改 html

> ID：12232737
> 
> 赞同：7
> 
> 时间：2012-09-02T01:23:01.773
> 
> 标签：html, css

我正在尝试更改提交按钮的外观 - 我无法向我们提供 id 或 class 或类似的东西。

我有一个 div - 在这个 div 内 2 输入 1 是文本，另一个是提交假设 div 的类是持有者。

```
<div class="holder">
<input type="text" name="somename" value="somevalue">
<input type="submit" name="submit" value="save changes">
</div> 
```

我目前的CSS是：

```
.holder input, textarea {
width:250px;
} 
```

但是，为此更改了两种输入类型。我正在尝试单独更改它们。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-02T01:25:39.993

您可以指定 css 属性所需的特定属性：

```
.holder input[type=submit] {
  width:250px;
} 
```

参考：[http ://www.w3.org/TR/CSS2/selector.html#attribute-selectors](http://www.w3.org/TR/CSS2/selector.html#attribute-selectors)

基本上，这意味着 width 属性仅适用于`<input>`#holder 容器内的标签，如果 type 属性的值为“submit”。

您也可以在 name 属性上使用它：

```
.holder input[name=submit] {
  width:250px;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-02T01:25:46.967

提交输入的选择器将是：

```
.holder input[type="submit"] 
```

请注意，您的 div 有一个“持有人”*类*，而不是“持有人”的 id，所以使用`.`not `#`。

# java - 如何将方法追溯到他们的类，然后是他们的包？Java 语法

> ID：12232740
> 
> 赞同：0
> 
> 时间：2012-09-02T01:24:39.313
> 
> 标签：java, syntax, methods

我最近一直在尝试使用 Java API (http://docs.oracle.com/javase/7/docs/api/)。我想知道如何找到“page.drawRect”方法。“drawRect”方法是“page”类的一部分吗？我不确定这是否是语法的工作方式，或者我是否有意义。我想要的只是“page.drawRect”的解释，也许还有一些关于如何使用 API 文档的提示。我发布的实际代码没有任何问题。谢谢 ：）

```
import javax.swing.JApplet;
import java.awt.*;

public class HopeThisWorks extends JApplet
{

    public void paint(Graphics page)
    {
        page.drawRect(50, 50, 40, 40);
        page.drawRect(60, 80, 225, 30);
        page.drawOval(75, 65, 20, 20);
        page.drawLine(35, 60, 100, 120);

        page.drawString ("\"Don't try to be like Jackie. There is only one Jackie. " + 
        "Study computers instead.\"", 110, 70);
        page.drawString ("-Jackie Chan",130, 100);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T01:27:55.750

这很简单

*   *包*只是类定义的命名容器，它们不包含代码或方法，只是 .java 文件
*   方法只能驻留在类中

在您的示例中，您所谈论的`Graphic`类`page`确实是对 Graphic 实例的引用。所以你应该寻找 class [`java.awt.Graphic`](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html)。

每当您导入一个包时，您不需要指定该包中包含的类的完整限定名，这就是为什么您可以简单地使用`Graphic page`它，`java.awt.Graphic page`但这只是一种简写方式，可以使所有内容不那么冗长（有时更加模糊）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T01:27:46.533

`drawRect`类中的一个方法`Graphics`。看看[Graphics.drawRect()](http://docs.oracle.com/javase/1.7/docs/api/java/awt/Graphics.html#drawRect%28int,%20int,%20int,%20int%29)。

`page`这是小程序`Graphics`对象的变量实例名称。

有关更多信息，请参阅：

[在 AWT 和 Swing 中绘画](http://java.sun.com/products/jfc/tsc/articles/painting/index.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T01:32:35.247

其他答案已经足够好了。添加一个小注释。

使用[IntelliJ](http://www.jetbrains.com/idea/webhelp/viewing-inline-documentation.html) /Netbeans/Eclipse 之类的 IDE。这些工具中的大多数都能够进行适当的定义、显示快速文档等。

[实用程序员提示 - 用好一个编辑器](http://pragmatictips.com/22)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-02T01:39:15.217

> 也许一些关于如何使用 API 文档的提示

如果您使用的是 Eclipse，

1.  右键单击您的项目并选择`Properties`
2.  选择`Javadoc Location`
3.  `http://docs.oracle.com/javase/7/docs/api/`在`Javadoc location path`文本字段中输入“ ”
4.  轻敲`OK`

现在您将能够进入源代码，或者只需将鼠标悬停在`drawRect`上面并阅读相关文档。

# javascript - MIME 与 JavaScript 有什么关系？

> ID：12232742
> 
> 赞同：1
> 
> 时间：2012-09-02T01:24:48.540
> 
> 标签：javascript, web-hosting, mime

将我的 JavaScript、PHP 和其他相关文件上传到 Web 托管服务器并尝试在浏览器上运行它们后，我遇到了以下错误：

```
Resource interpreted as Script but transferred with MIME type text/html:  "http://stats.hosting24.com/count.php". 
```

似乎 html 和 php 文件工作正常，但我认为 js 文件有问题。如果有人能解释实际问题是什么以及如何解决它，我将不胜感激。

最好的..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T01:43:26.000

您似乎正在使用[000webhost](http://www.000webhost.com/)，根据经验，我知道它会在您的 HTML 末尾插入一些 HTML，从而触发 Google Chrome 中的特定警告。您会在页面源代码的末尾找到它：

```
<!-- Hosting24 Analytics Code -->
<script type="text/javascript" src="http://stats.hosting24.com/count.php"></script>
<!-- End Of Analytics Code --> 
```

URL 上的页面有一个空的响应正文，这表明它只是一个记录分析数据的脚本。没有返回实际的 JavaScript。

# 如何解决问题

我能够通过禁用额外的 HTML 来解决这个问题。访问[http://members.000webhost.com/analytics.php](http://members.000webhost.com/analytics.php)并填写表格。密码与您用于通过 FTP 连接到服务器的密码相同。在“管理分析代码”下，选择“禁用代码”。单击提交，下次刷新网页时，警告消息应该会消失。

如果您不知道您的域的 FTP 密码，您可以通过[登录您的帐户](http://members.000webhost.com/)，单击相关域下的“转到 CPanel”，然后单击主菜单下的“更改帐户密码”来更改它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T01:36:10.787

Mime 类型是指您希望最终数据生成的文件类型。以下是 mime 类型的列表：

[http://en.m.wikipedia.org/wiki/Internet_media_type#section_1](http://en.m.wikipedia.org/wiki/Internet_media_type#section_1)

服务器说：“你想让我处理一个脚本吗？或者你想让我把这段代码显示为 html。”

它正在接收一个脚本，您希望它显示一个 html。所以，服务员一头雾水。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T01:27:04.223

您需要在 PHP 中指定内容类型：

```
header("Content-type: application/javascript"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T01:29:36.627

在这个特定错误的情况下，PHP 代码（我假设）实际上是在吐出 JavaScript 代码。默认情况下，Apache 会将任何 PHP 文件的内容作为 HTML 发送，因此 Web 浏览器接收脚本但认为它应该是 HTML。浏览器足够聪明，可以“克服”问题并解释脚本，但如果您想停止错误，请让 PHP 让 Apache 知道它正在返回 JavaScript：

```
header("Content-type: text/javascript"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-02T01:30:28.807

你可以使用

```
AddType text/javascript .js 
```

在你的 .htaccess / httpd.conf

# spring - 第二次注册实体管理器（警告：HHH000436：实体管理器工厂名称（empsys）已注册。）

> ID：12232743
> 
> 赞同：6
> 
> 时间：2012-09-02T01:25:19.260
> 
> 标签：spring, hibernate, jpa, glassfish

有一个类似的问题，但已接受的解决方案不适用（由 Spring MVC 以某种方式引起的问题，在这个类似的问题中并非如此：[Spring 3.1 + Hibernate 4.1 JPA, Entity manager factory is registered two](https://stackoverflow.com/questions/10866263/spring-3-1-hibernate-4-1-jpa-entity-manager-factory-is-registered-twice)）

需要明确的是，我唯一的问题是实体管理器工厂的（emf）名称已注册两次的警告，尽管有警告，但我在使用 JPA 时没有任何问题。

那么如果spring没有这样做，第一次加载emf名称是如何加载的，我应该/如何停止它？

**环境**：Glassfish v 3.1.1、Spring 3.1.1、JPA 2.0（Hibernate-entity-manager 4.1.0）、Struts2

我收到以下警告：

```
WARN: HHH000436: Entity manager factory name (empsys) is already registered.  If entity manager will be clustered or passivated, specify a unique value for property 'hibernate.ejb.entitymanager_factory_name' 
```

这是**服务器日志**的一部分（最后一行是警告，我切掉了顶部但其余部分是连续的）：

```
INFO: Instantiated an instance of org.hibernate.validator.engine.resolver.JPATraversableResolver.
INFO: HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
INFO: HHH000412: Hibernate Core {4.1.0.Final}
INFO: HHH000206: hibernate.properties not found
INFO: HHH000021: Bytecode provider name : javassist
INFO: HHH000204: Processing PersistenceUnitInfo [
    name: empsys
    ...]
INFO: HHH000130: Instantiating explicit connection provider: org.hibernate.ejb.connection.InjectedDataSourceConnectionProvider
INFO: HHH000400: Using dialect: org.hibernate.dialect.MySQLInnoDBDialect
INFO: HHH000423: Disabling contextual LOB creation as JDBC driver reported JDBC version [3] less than 4
INFO: HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jta.CMTTransactionFactory
INFO: HHH000397: Using ASTQueryTranslatorFactory
INFO: Instantiated an instance of org.hibernate.validator.engine.resolver.JPATraversableResolver.
INFO: Instantiated an instance of org.hibernate.validator.engine.resolver.JPATraversableResolver.
INFO: PWC1412: WebModule[null] ServletContext.log():No Spring WebApplicationInitializer types detected on classpath
INFO: PWC1412: WebModule[null] ServletContext.log():Initializing Spring root WebApplicationContext
INFO: Root WebApplicationContext: initialization started
INFO: Refreshing Root WebApplicationContext: startup date [Sat Sep 01 19:14:15 MDT 2012]; root of context hierarchy
INFO: Loading XML bean definitions from class path resource [applicationContext.xml]
INFO: JSR-250 'javax.annotation.ManagedBean' found and supported for component scanning
INFO: JSR-330 'javax.inject.Named' annotation found and supported for component scanning
INFO: JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
INFO: Bean 'org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter#3170938b' of type [class org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
INFO: Bean 'dataSource' of type [class org.springframework.jndi.JndiObjectFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
INFO: Bean 'dataSource' of type [class com.sun.gjc.spi.jdbc40.DataSource40] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
INFO: Building JPA container EntityManagerFactory for persistence unit 'empsys'
INFO: HHH000204: Processing PersistenceUnitInfo [
    name: empsys
    ...]
INFO: HHH000130: Instantiating explicit connection provider: org.hibernate.ejb.connection.InjectedDataSourceConnectionProvider
INFO: HHH000400: Using dialect: org.hibernate.dialect.MySQLInnoDBDialect
INFO: HHH000423: Disabling contextual LOB creation as JDBC driver reported JDBC version [3] less than 4
INFO: HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jta.CMTTransactionFactory
INFO: HHH000397: Using ASTQueryTranslatorFactory
INFO: Instantiated an instance of org.hibernate.validator.engine.resolver.JPATraversableResolver.
INFO: Instantiated an instance of org.hibernate.validator.engine.resolver.JPATraversableResolver.
WARN: HHH000436: Entity manager factory name (empsys) is already registered.  If entity manager will be clustered or passivated, specify a unique value for property 'hibernate.ejb.entitymanager_factory_name' 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:applicationContext.xml</param-value>
    </context-param>  
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>  
    <welcome-file-list>
        <welcome-file>/index.action</welcome-file>
    </welcome-file-list>
</web-app> 
```

**应用程序上下文.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:jdbc="http://www.springframework.org/schema/jdbc"
       xmlns:jee="http://www.springframework.org/schema/jee"
       xsi:schemaLocation="
            http://www.springframework.org/schema/beans
            http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.springframework.org/schema/aop
            http://www.springframework.org/schema/aop/spring-aop.xsd
            http://www.springframework.org/schema/tx
            http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
            http://www.springframework.org/schema/jdbc
            http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.0.xsd
            http://www.springframework.org/schema/jee 
            http://www.springframework.org/schema/jee/spring-jee-3.0.xsd">
    <context:annotation-config/>            
    <context:component-scan base-package="com.kenmcwilliams.employmentsystem" />
    <jee:jndi-lookup id="dataSource" jndi-name="jdbc/empsys" /> 
    <bean class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor"/>
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <!--  <property name="persistenceUnitName" value="empsys" /> -->
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"/>
        </property>
        <property name="dataSource" ref="dataSource"/>

    </bean>
    <bean id="transactionManager" class="org.springframework.transaction.jta.JtaTransactionManager"/>
    <tx:annotation-driven  transaction-manager="transactionManager"/>
</beans> 
```

**持久性.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="empsys" transaction-type="JTA">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <jta-data-source>jdbc/empsys</jta-data-source>
    <class>com.quaternion.orm.Something</class>
    <properties>
      <property name="hibernate.transaction.jta.platform" value="org.hibernate.service.jta.platform.internal.SunOneJtaPlatform"/> 
      <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLInnoDBDialect"/>
    </properties>
  </persistence-unit>
</persistence> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T13:42:33.143

似乎 Hibernate 被要求为这个 PU 创建一个 EMF 两次。Hibernate 跟踪它在注册表中构建的每个 EMF。这个警告只是告诉你一个 EMF 已经在同一个 PU 名称下注册了。随着警告继续告诉您，如果您使用该 EMF 对应用程序进行集群，则可能会出现问题。否则它只是一个警告，让您了解情况（甚至如何解决它）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-21T17:52:31.807

我相信这个问题可以在这里解决：

```
<context:component-scan base-package="com.kenmcwilliams.employmentsystem" /> 
```

您应该过滤掉任何带有 @Component 注释的 JPA 包/类，尤其是创建实体管理器 bean 的包/类。

Classes annotated with @Component are scanned by default, at least for root context JPA configurations.

I had the same issue and resolved it by filtering the JPA configuration classes out of the component scan.

# c - OpenCV：调整图像大小

> ID：12232749
> 
> 赞同：1
> 
> 时间：2012-09-02T01:26:24.267
> 
> 标签：c, opencv

我似乎错过了一些东西，但我不明白如何调整图像大小。这是代码：

```
#include <opencv2\core\core.hpp>
#include <opencv2\imgproc\imgproc.hpp>
#include <opencv2\highgui\highgui.hpp>

using namespace cv;

int main(int argc, char* argv[])
{
    IplImage* src = NULL;
    IplImage* dst = NULL;
    src = cvLoadImage("image.tif");
    dst = cvCreateImage(cvSize( src->width / 10, src->height / 10 ), src->depth, src->nChannels );

    resize(src, dst, dst->nSize, 0.1, 0.1, CV_INTER_AREA );

    return 0;
} 
```

但是这段代码只会导致编译器错误：

```
error C2664: 'cv::resize' : cannot convert parameter 1 from 'IplImage *' to 'cv::InputArray' 
```

有人可以告诉我这里有什么问题吗？我的意思是如何从 IplImage 创建 InputArray？

谢谢，克里斯蒂安

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T01:51:12.087

您正在混合 OpenCV C 和 C++ 函数。如果您使用 C++ 编程，您应该使用[Mat](http://docs.opencv.org/modules/core/doc/basic_structures.html#mat)类来存储图像数据。另一方面，如果你使用纯 C，你应该使用函数[cvResize](http://docs.opencv.org/modules/imgproc/doc/geometric_transformations.html?highlight=resize#resize)来调整你的 IplImage。

正如您在 OpenCV API 文档中所见，每个函数都有一个 C 和 C++ 编程接口。它们本质上是相同的，您当然可以在 C++ 中使用 C 函数，但不能将 C OpenCV 结构（如 IplImage）与 C++ OpenCV 函数（如 resize()）一起使用。

[本](http://docs.opencv.org/modules/core/doc/intro.html)介绍介绍了 OpenCV C++ API 的基本概念。

# c++ - 文件系统中的数据结构存储

> ID：12232755
> 
> 赞同：3
> 
> 时间：2012-09-02T01:27:33.847
> 
> 标签：c++, c, binary-compatibility

我正在尝试用 C++ 编写一个持久性数据结构，但是我觉得我应该能够使它与我的数据结构阅读器的各种其他实现二进制兼容，因此，我目前的想法是在本机内存中声明数据结构而不进行任何抽象.

例如，我会指定一个线性内存块作为数据结构（使用`new`关键字），然后描述第一个字节的含义，第二个字节的含义等等。我知道我可以这样做，`struct`但是随后，数据结构将绑定到一种语言，而其他语言将不得不使用这种结构。此外，实现可能会从编译器更改为编译器。相反，我希望它作为内存标准。

我想做的事情有点明智吗？或者我试图过度简化事情并且真的应该继续使用`struct`数据结构？现在进入 C++ 部分，如果您认为我应该使用`struct`数据结构，那么使用成熟的类有什么缺点？

（无论如何，我都在使用一个类来包装内存结构并为其提供函数，因为数据结构无论如何都是持久的。） **编辑** 正如贾斯汀所建议的那样，我*不需要*任何围绕内存结构的高级接口包装器，所以我的最后一点关于类包装器的说明不正确。我的意思是我想要一个用于内存表示的类接口，它不一定是包装器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T02:00:15.890

我已经阅读/使用过的几种文件格式正是这样做的——定义内存标准或布局，然后通常用类似 C 的伪代码演示来支持它`struct`。有时它们会提供结构或类表示，有些则完全由库抽象。当然，这些格式会继续记录所有字段、它们的大小、数据的字节顺序等。

我认为与字节序相关的问题、填充、复杂性（例如由数据结构的变化引入）和正确的版本控制是最大的错误来源。我发现的另一个问题是过去的数据结构的使用以及用于表示类似功能的数据结构的不一致——你可能会收到一份规范，并意识到它包含几种不同的字符串表示——所有这些都是过时的，有人必须继续支持所有这些（双向）。

继续那条路线：

如果您不想支持二进制表示（或可编译程序）（并且随着平台和工具集的变化，长期存在的格式的尝试在此过程中失败/绊倒），则不应提交它。只需首先提交正式的内存标准，然后在此基础上构建测试和示例输入文件，以验证表示是否正确序列化和反序列化。一个非常基本的测试套件将有助于确保您的模型在您需要的所有系统上都是可移植的，并且可以指出您可能没有意识到的潜在缺陷或特定于平台的注意事项。

如果您真的想提供可编译的表示，我会坚持使用非常兼容的`struct`表示——客户端可以采用该（在内存中）表示并将其转换为他们喜欢的任何 C++ 抽象/表示。也就是说，序列化的表示可能不应该反映内存中的表示，除了简单的表示和这种表示的中间存储（扁平和打包的结构）。

其中一个重要部分是您应该进行测试，以确认您使用这些结构创建的内存对象图是向前和向后可序列化和可反序列化的，并支持正确的版本控制——因此通常需要做一些工作一个复杂的序列化表示兼容。所以你看到这种方法只是在另一个之上引入了一个抽象层。在这方面，您可能希望 C++ 抽象能够从打包的内存表示中创建自己，并确保该表示也可以正确填充打包结构而不会丢失数据。

除此之外，是否*需要*更高级的界面？如果有，那么您可能需要提供该信息。

所以是的，内存标准是你必须正确和稳定的部分，所有实现都应该参考和测试——无论平台/架构差异如何。IOW，你走在正确的轨道上；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T01:35:59.487

`struct`在 C++ 中，和之间没有实际区别`class`（除了默认可访问性是 public in `struct`）。传统上，`struct`当一个类型只有（公共）成员变量而没有成员函数时使用，但这只是一个约定，而不是编译器强制执行的规则。

我当然会使用`struct`/`class`来描述数据。如果有人想为您的数据结构编写阅读器，他们可以导入您的头文件或以他们选择的语言实现数据结构 - 在大多数编程语言中，这应该非常简单。

我建议你开始你的结构是这样的：

```
typedef struct
{
    int Version; // struct layout version
    int ByteSize; // byte size of structure for validation
    ...
} MYDATA; 
```

这样，当您的数据结构被传递时，您的代码可以验证分配的结构大小是否与您期望的给定版本的结构的字节数相匹配。然后，您可以通过简单地更新版本字段并检查新大小来轻松引入结构的新版本。

当您将数据保存到磁盘时，请确保将其逐个字段写入，而不是通过单个写入（使用指针并`sizeof()`确保其他语言不必处理您的 C++ 编译器的潜在填充可能会决定放入。可以在结构中手动布置字段，这样就没有填充，但是在这样做时你必须非常非常小心，而且很容易出错。

# jquery-mobile - 单选按钮仅在首次访问时增强，但并非在所有后续访问中都增强

> ID：12232756
> 
> 赞同：0
> 
> 时间：2012-09-02T01:27:39.707
> 
> 标签：jquery-mobile

我动态创建了一个对话框页面，并在其中注入了两个单选按钮。这些代码仅适用于第一次访问。在接下来的访问中，奇怪的是单选按钮没有得到增强。

代码位于[http://jsfiddle.net/BScLu/](http://jsfiddle.net/BScLu/)。您可以打开、关闭和重新打开对话框以进行尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T05:04:19.613

当动态生成事物时，JQuery Mobile 可能会变得很挑剔，因为您是在 DOM 中创建页面之后插入这些单选按钮。你能在`$('#myDialog').on(pagebeforecreate)` [活动](http://jquerymobile.com/demos/1.1.1/docs/api/events.html)中插入它们吗？

# javascript - 如何为 CSS 和 javascript 指定基本 url？

> ID：12232762
> 
> 赞同：3
> 
> 时间：2012-09-02T01:28:56.403
> 
> 标签：javascript, css

假设我有 style.css：

```
#some_element{
   background-image: url('img/picture.gif');
} 
```

css 和 picture.gif 位于这样的结构中：

```
style.css 
other_style.css
more_style.css
img
   picture.gif 
```

使用 php，我将 style.css、other_style.css 和 more_style.css 组合到远离原始位置的 cache_style.css 中。

在这种情况下，链接将被破坏。

在 html 中，我们有标签来定义（如其名称）当前文档的基本 url。这样每个链接和每个图像都可以基于该基本 url 获取内容。

css 和 javascript 有什么替代方法可以做到这一点吗？

编辑：一些 css/javascript 是缩小的第三方，几乎不可能将“img/picture.gif”更改为“/something/img/picture.gif”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T01:32:33.867

使用您所服务的根目录的绝对路径：

```
background-image: url('/img/picture.gif'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T01:41:59.073

在 javascript 中，您可以定义一个变量来保存您的基本 url，但是您不能使用该变量引用或设置 CSS。一种可行的方法是使用指向 gif 的绝对链接而不是相对链接。或者，如果您知道`cache_style.css`文件相对于站点根目录的最终位置，则可以通过它与根目录的相对位置来引用 gif。例如，如果您`cache_style.css`位于`www.example.com/path/path/cache_style.css`，则可以通过执行此操作来引用 img 目录`../../img/picture.gif`

# c++ - 在 c++/c++11 中测试“POD-ness”？

> ID：12232766
> 
> 赞同：6
> 
> 时间：2012-09-02T01:30:04.020
> 
> 标签：c++, c++11, types

我有一些代码采用打包的 POD 结构/类并将其复制到内存块中。

```
struct A
{
   int a;
   int b;
} a;

memcpy(mymemoryblock, (void *)&a, sizeof(A));

// later I get a reply and...

memcpy((void *)&a, mymemoryblock, sizeof(A)); 
```

这仅对 POD 类型的数据有效，并且我想知道是否有一种方法可以测试 POD-ness。如果有人不小心将成员函数添加到此类，则 memcpy 操作将变为无效，但仍可编译。这导致非常难以检测错误。

是否有 is_POD_type(A) 函数或其他可用于在运行时或编译时检测 POD 的技巧？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-02T01:31:41.643

`std::is_pod<A>::value`在 C++11 中。

[编辑：请参阅上面 Luc 的评论，在 C++11 中，您不需要将类型设为 POD 即可。

就此而言，你也不需要强制转换为`void*`，而 C 风格的强制转换指针`void*`不必要地有点冒险，因为有一天你会`const`意外地抛弃！]

在 C++03 中没有标准的方法可以做到这一点，但是 Boost 有自己`is_pod`的错误，因为编译器不提供非标准的查找方法。因此，如果您正在编写 POD 特殊情况是优化的代码（您不会在任何地方都得到优化），那么它会很有用。如果您只关心 Boost 可以得到准确答案的编译器，它也很有用。如果误报`is_pod`导致您的代码厌恶地放弃，那就不是很好了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-02T02:02:12.763

标准 (C++98) 说只有具有类似 C 的构造/破坏语义的类型才能成为联合的成员。这涵盖了使类型成为非 POD 的大部分内容，因此只需使用类型 A 的成员定义一个联合类型，如果 A 不是 POD，编译器应该会抱怨。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-17T07:01:27.653

存在调用 std::tr1::is_pod 的方法

你也可以使用 bycicle 像：

```
#define CHECK_TYPE_IS_A_POD(TYPE)\
{\
  switch(1)\
  {\
    case 1:\
        TYPE IF_COMPILE_ERROR_THEN__##TYPE##__IS_NOT_A_POD;\
        /* prune out any warnings about not usage */ \
        IF_COMPILE_ERROR_THEN__##TYPE##__IS_NOT_A_POD = TYPE();\
    case 2:\
        ;\
  }\ 
```

但它不适用于命名空间限定名称和专用模板类型。

# python - 重命名模板中对 Django 消息的引用？

> ID：12232771
> 
> 赞同：1
> 
> 时间：2012-09-02T01:30:55.560
> 
> 标签：python, django

我正在使用 Django 的消息传递框架来提醒用户消息已成功发送。默认情况下，您使用 {{ messages }} 在模板中显示 Django 消息。我想通过重命名变量以将 Django 的系统消息引用为 {{ system_message }} 之类的东西来避免任何混淆的可能性，让 {{ message }} 可以自由引用用户消息。

我试过做类似的事情

```
from django.contrib import messages as system_message 
```

但在这种情况下重命名它并不能延续到我的模板。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T08:42:05.893

Messages 不是模板标签，而是`"django.contrib.messages.context_processors.messages"`处理器提供的模板上下文变量。我认为重命名它的最佳方法是简单地将 django 的上下文处理器替换为您自己的版本，例如：

```
from django.contrib.messages.api import get_messages

def messages(request):
    """
    Returns a lazy 'messages' context variable.
    """
    return {'your_name_space': get_messages(request)} 
```

# r - R中的缩写变量

> ID：12232773
> 
> 赞同：-5
> 
> 时间：2012-09-02T01:31:30.907
> 
> 标签：r, plot

我正在使用一个名为`Forbes2000`HSAUR 包提供的数据集。我可以绘制数据，但不能用相应的国家名称缩写每个点。这是我尝试过的代码：

```
Forbes2000top50ccompanies <- head(Forbes2000[order(Forbes2000$profits, decreasing= T),], n = 50)
plot(sales ~ assets,data=Forbes2000top50ccompanies) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T02:28:47.710

这将为您提供国家名称前 4 个字母的标签，并使它们小于默认值：

```
with(Forbes2000top50ccompanies, 
         text(x=assets, y=sales, 
              labels=substr(Forbes2000top50ccompanies$country, 1, 4), cex=0.6) ) 
```

# sql - 在 T-SQL 中，是否有可能通过带有子选择的选择返回一个结果集，而这些子选择无法使用连接获得？

> ID：12232779
> 
> 赞同：0
> 
> 时间：2012-09-02T01:32:08.010
> 
> 标签：sql, join, subquery

**给定一个`SELECT`带有任意嵌套子选择的 SQL 表达式，是否总是可以重写所述 SQL 表达式，使其不包含子选择并返回相同的结果集？**

**如果是这样，是否有这样做的算法？**

**如果没有，是否存在`SELECT`无法重写的那些表达式的特征？**

我正在制作一个将生成 SQL`SELECT`语句的应用程序。在这一点上，我仍在设计它的工作方式。不过，这是一般的想法：

用户将选择显示哪些列、结果如何排序以及如何限制。

这些列不仅是 SQL 列，而且是命名对象，因此该对象可以包含一个 SQL 表达式，其中包含来自多个表的列变量。这些对象将包含有关如何相互连接的信息。

我想让这些表达式的配置尽可能灵活；如果可以编写返回某些结果集的 SELECT 语句`S`，那么我希望应用程序能够生成`SELECT`返回的语句`S`。SQL 中可能的一件事是子选择。我读过用 JOINS 重写所说的子选择在性能方面会更好。因此，我正在考虑在配置中禁止子选择。但是我不想这样做，除非每个子选择都可以重写为连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T03:22:32.237

WHERE 子句中的子选择通常不可能重写为 JOIN，尤其是在使用聚合函数时。

[从这里](http://www.programmershelp.co.uk/mysqlsubquery.php)引用：

> 下面是一个普通形式的子查询比较示例，您不能使用连接进行比较：查找表 t1 中与表 t2 中的最大值相等的所有值。
> 
> SELECT column1 FROM t1 WHERE column1 = (SELECT MAX(column2) FROM t2);
> 
> 这是另一个示例，这对于连接也是不可能的，因为它涉及聚合其中一个表：查找表 t1 中包含出现两次的值的所有行。
> 
> SELECT * FROM t1 WHERE 2 = (SELECT COUNT(column1) FROM t1);

因此，如果 SELECT 子句中的复杂子选择本身在其 WHERE 子句中具有子选择，则可能无法表示为 JOIN。

```
SELECT T2.B, (SELECT A from t1 where t1.ID=T2.ID 
                         and 2=(SELECT COUNT(A) from t1 as TX WHERE TX.A=T1.A))
FROM T2 
```

# javascript - 如何使用 HTML/CSS/JavaScript 开发桌面应用程序？

> ID：12232784
> 
> 赞同：195
> 
> 时间：2012-09-02T01:32:53.950
> 
> 标签：javascript, html, css, desktop-application

首先，我对专业地做这件事不感兴趣。我是一名网络开发人员，我的一个同事最近离开了 Spotify，他说他将主要使用 JavaScript 为 Spotify 桌面应用程序工作。他说它使用“Chrome 框架”，里面的一切都像网络应用程序（HTML/JS/CSS）一样完成。

作为一个从未为桌面构建过任何东西的 Web 开发人员，这是个好消息。如果我可以使用我已经知道的技术并在某种“框架”中实现它们，并且仍然能够构建 Windows 或更好的跨平台应用程序。

我知道我没有提到任何关于数据库的内容，但即使是一个简单的带有 Web 技术的 hello world 桌面应用程序也可以很好地开始。

那么怎么做呢？我到底需要/需要知道什么？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-09-02T08:48:51.287

您可以从 Titanium for desktop dev 开始。你也可以看看**[Chromium Embedded Framework](https://bitbucket.org/chromiumembedded/cef)**。它基本上是一个基于 chromium 的网络浏览器控件。

它是用 C++ 编写的，因此您可以在容器应用程序中执行所有您想要的低级操作系统内容（咆哮、托盘图标、本地文件访问、com 端口等），然后在 html/javascript 中执行所有应用程序逻辑和 gui。它允许您拦截任何 http 请求以提供本地资源或执行一些自定义操作。例如，对[http://localapp.com/SetTrayIconState?state=active](http://localapp.com/SetTrayIconState?state=active)的请求可能会被容器拦截，然后调用 C++ 函数来更新托盘图标。

它还允许您创建可以直接从 JavaScript 调用的函数。

直接在 CEF 中调试 JavaScript 非常困难。不支持像 Firebug 这样的东西。

你也可以试试**[AppJS.com](http://appjs.com/)**（帮助构建桌面应用程序。适用于 Linux、Windows 和 Mac，使用 HTML、CSS 和 JavaScript）

此外，正如@Clint 所指出的，**[brackets.io](http://brackets.io/)** (Adobe) 的团队使用 Chromium Embedded Framework 创建了一个很棒的 shell，这使得上手变得更加容易。它被称为括号外壳：[github.com/adobe/brackets-shell](http://github.com/adobe/brackets-shell)在此处了解更多信息：[clintberry.com/2013/html5-desktop-apps-with-brackets-shell](http://clintberry.com/2013/html5-desktop-apps-with-brackets-shell)

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-07-15T13:17:59.700

# NW.js

（以前称为 node-webkit）

如果您熟悉 Node 或有 JavaScript 经验，我建议您使用**[NW.js。](http://nwjs.io/)**

> NW.js 是一个基于 Chromium 和 node.js 的应用运行时。
> 
> 特征
> 
> *   用现代 HTML5、CSS3、JS 和 WebGL 编写的应用程序
> *   完全支持 Node.js API 及其所有第三方模块。
> *   性能好：Node和WebKit在同一个线程中运行：函数调用简单；对象在同一个堆中，并且可以相互引用
> *   易于打包和分发应用程序
> *   适用于 Linux、Mac OS X 和 Windows

[您可以在此处](https://github.com/rogerwang/node-webkit)找到 NW.js 存储库，并在此处找到对 NW.js[的](http://code.tutsplus.com/tutorials/introduction-to-html5-desktop-apps-with-node-webkit--net-36296)良好介绍。如果你喜欢学习[Node.js](http://nodejs.org/)，我会推荐[这篇](https://stackoverflow.com/a/5511507/1724097)带有很多好的链接的 SO 帖子。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2014-07-01T13:49:18.243

> ~~[Awesomium](http://www.awesomium.com/)让您在 C++ 或 .NET 应用程序中轻松使用 HTML UI~~

# 更新

我以前的答案现在已经过时了。这些天你不考虑使用[Electron](http://electron.atom.io/)会很疯狂。许多流行的桌面应用程序都是在它之上开发的。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-09-02T01:43:07.090

注意：[AppJS](https://github.com/appjs/appjs)已被弃用，不再推荐。

请查看[NW.js。](https://github.com/nwjs/nw.js/)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-11-29T06:24:44.793

似乎 HTML/JS/CSS 桌面应用程序的解决方案并不短缺。

我刚刚遇到的一种解决方案是 TideSDK：[http](http://www.tidesdk.org/) ://www.tidesdk.org/ ，看看文档，这似乎很有希望。

您可以使用 Python、PHP 或 Ruby 进行开发，并将其打包用于 Mac、Windows 或 Linux。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-09-02T07:45:30.400

很抱歉打破你的泡沫，但*Spotify 桌面客户端*只是[一个基于 Webkit 的浏览器](https://developer.spotify.com/technologies/apps/guidelines/#webbrowserengine)。当然它暴露了特定的附加功能，但它只能运行 JS 和渲染 HTML/CSS，因为它有一个 JS 引擎和一个 Chromium 渲染引擎。这不能帮助您编写客户端 Web 应用程序并部署到多个平台。

您正在寻找的是类似于[Sencha Touch](http://www.sencha.com/products/touch/) - 一个允许 HTML5 应用程序本地部署到 iOS、Android 和 Blackberry 设备的框架。它基本上充当某些 API 调用和可用的设备特定功能之间的中介。

我没有使用[appcelerator](http://www.appcelerator.com/)的经验，它似乎就是这样做的——并且在网上获得了非常好的评价。您应该试一试（除非您想回​​到 1999 年并使用[MS HTA](http://en.wikipedia.org/wiki/HTML_Application)；）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-02T01:42:17.017

我知道有[Fluid](http://fluidapp.com/)和[Prism](https://wiki.mozilla.org/Prism)（还有其他的，这是我以前使用的），可以让您将网站加载到看起来像独立应用程序的地方。

在 Chrome 中，您可以为网站创建桌面快捷方式。（您在 Chrome 中执行此操作，您不能/不应将其与您的应用程序打包）Chrome Frame 不同：

> Google Chrome Frame 是基于开源 Chromium 项目为 Internet Explorer 设计的插件；它将 Google Chrome 的开放网络技术引入 Internet Explorer。

你需要为你的 webapp 提供某种类似的包装器，然后剩下的就是你习惯的 web 技术。您可以在应用离线时使用 HTML5[本地存储来存储数据。](http://diveintohtml5.info/storage.html)我认为您甚至可以使用 SQLite。

不过，我不知道您将如何访问操作系统的特定功能。我上面描述的内容与任何“常规”网站具有相同的限制。希望这能给你一些关于从哪里开始的指导。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-05-21T19:04:20.643

您可以使用 Adob​​e AIR 构建 Javascript 应用程序... [http://www.adobe.com/products/air.html](http://www.adobe.com/products/air.html)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-11-24T14:49:57.683

CEF 为定制提供了很多灵活性和选项。但是如果目的是快速开发，node-webkit 也是一个不错的选择。Node-web 工具包还提供了直接从 DOM 调用节点模块的能力。

如果没有任何本地模块来集成 Node-Webkit 可以提供更好的里程。使用本机模块 C/C++ 甚至 C#，使用 CEF 会更好。

# java - 子类不允许世界运行

> ID：12232786
> 
> 赞同：0
> 
> 时间：2012-09-02T01:33:21.363
> 
> 标签：java, class, subclass

我是初学者，在学校上 CompSci 课程。本章正在制作子类；但是，该类以某种方式导致程序终止。世界甚至没有出现，也没有错误。（我正在运行 Eclipse）。

这是我的代码：

```
package karel;
import kareltherobot.*;
public class Race implements Directions
{
public static void main(String args[]) {

class Car extends UrRobot
{   public Car(int street, int avenue, Direction direction, int beepers) 
    {super(5, 5, East, infinity);
    }

    public void turnAround()
    {
        turnLeft();
        turnLeft();
    }

    public void turnRight()
    {   
        turnLeft();
        turnLeft();
        turnLeft();
    }
}
    {   
        World.setVisible(true);
        World.showSpeedControl(true);
    }
        {
            Car kar = (Car) new UrRobot(5, 5, East, infinity);
            kar.move();
            kar.turnLeft();
            kar.move();
            kar.turnAround();
            kar.move();
            kar.turnRight();

        }

}

} 
```

有没有办法让这个程序不会出错终止？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T02:14:19.907

您需要在 main 函数中运行代码。Java 在类主函数中查找并执行代码。试试看，如果不行，请回来重新发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T07:13:46.840

试试下面的。

```
import kareltherobot.*;

public class Race implements Directions
{
    public Race(){
     }

public static void main(String args[]) {

class Car extends UrRobot
{   

public Car(int street, int avenue, Direction direction, int beepers)

{

    super(street, avenue, direction, beepers);
}

public void turnAround()

{
    super.turnLeft();
    super.turnLeft();
}
public void turnRight()
{           
    super.turnLeft();
    super.turnLeft();
    super.turnLeft();
}
}

World.setVisible(true);
World.showSpeedControl(true);    
Car kar = new Car(5, 5, East, 100);
kar.move();
kar.turnLeft();
kar.move();
kar.turnAround();
kar.move();
kar.turnRight();

}
} 
```

# ruby - 迭代时添加到数组

> ID：12232788
> 
> 赞同：7
> 
> 时间：2012-09-02T01:34:04.073
> 
> 标签：ruby, arrays, iteration

为什么这段代码会“锁定”红宝石？克服它的最好方法是什么？我在下面发布了我的解决方案。还有另一种方法可以做到这一点吗？提前致谢！

代码：

```
nums = [1, 2, 3] 
nums.each { |i| nums << i + 1 } 
```

我的解决方案：

```
nums = [1, 2, 3]
adjustments = []
nums.each { |i| adjustments << i + 1 }
nums += adjustments 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-02T01:37:45.927

那是因为每个都使用一个枚举器（所以如果你继续添加它，它永远不会到达末尾）。

您可以在应用每个之前复制数组。

```
nums = [1, 2, 3] 
nums.dup.each { |i| nums << i + 1 } 
```

另一种方法是附加 map 给出的额外元素：

```
nums = [1, 2, 3] 
nums += nums.map { |i|  i + 1 } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-02T01:39:06.970

```
nums = [1, 2, 3] 
nums.each { |i| nums << i + 1 } 
```

您在迭代数组时将其添加到数组中，因此它永远不会完成执行。

# mysql - Select * from 'many to many' SQL 关系

> ID：12232789
> 
> 赞同：4
> 
> 时间：2012-09-02T01:34:04.013
> 
> 标签：mysql, many-to-many, inner-join

我还在学习 SQL，但我的大脑很难处理这个问题。

假设我有 3 张桌子：

```
teams
players 
```

并`teams_players`作为我的链接表

我想做的就是运行一个查询来获取每支球队和他们的球员。

我试过这个：

```
SELECT * 
FROM teams 
INNER JOIN teams_players 
    ON teams.id = teams_players.team_id 
INNER JOIN players 
    ON teams_players.player_id = players.id 
```

但它为每支球队的每个球员返回了一个单独的行。加入是正确的方法还是我应该做其他事情？

- - - - - - - - - - - - - - - - - - - - - 编辑

好的，所以据我所知，这不一定是一个坏方法。我只需要在循环时按团队对数据进行分组。

我还没有尝试过提供的修改后的 SQL 语句，但我会在今天回复您。

要回答有关结构的问题 - 我想我并没有考虑返回的行结构，这是导致我困惑的一部分。在这种特殊情况下，每支球队仅限于 4 名球员（或更少），所以我想对我有帮助的结构如下所示：

```
teams.id, teams.name, players.id, players.name, players.id, players.name, players.id, players.name, players.id, players.name,
1         Team ABC    1           Jim           2           Bob           3            Ned          4             Roy
2         Team XYZ    2           Bob           3           Ned           5            Ralph        6             Tom 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T01:46:23.160

好的，这是一个猜测，但你想要一个团队，并且团队中的球员名单在一行

怎么样

```
SELECT t.id, GROUP_CONCAT(p.id)
FROM teams t
INNER JOIN teams_players tp
    ON t.id = tp.team_id 
INNER JOIN players p
    ON tp.player_id = p.id
GROUP BY t.id 
```

手册可能会有所帮助[http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html#function_group-concat)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T01:43:23.600

MySQL 将以表格格式返回数据，因此请考虑如何在一个表格/结果集中返回球员和球队的列表，包括每个球员与哪个球队相关联，而不为球队中的每个球员返回单独的行？

您的查询应返回：

```
team.id, team.name, player.id, player.name
1        team1      1          player1
1        team1      2          player2
2        team2      3          player3
2        team2      4          player4 
```

如果你想要类似的东西

```
team.id, team.name
1        team1
2        team2

player.id, player.name, team.id
1          player1      1
2          player2      1
3          player3      2
4          player4      2 
```

其中有两个单独的结果集，那么您必须进行两个查询。如果您想为每个团队提供不同的结果集，则必须为每个团队进行额外的查询。

话虽如此，我认为您的初始查询并没有什么太大的问题，只是它为您提供了大量重复数据以换取不必进行多个查询。

# python - Delphi TBitmap 代码到 Python PIL

> ID：12232797
> 
> 赞同：0
> 
> 时间：2012-09-02T01:36:12.823
> 
> 标签：python, delphi, python-imaging-library, timage, tbitmap

我正在尝试将一些 Delphi 代码转换为 Python PIL。问题是两方面的。首先，我不是 Delphi 程序员。其次，我今天之前没有使用过 PIL，所以我可能在这两个方面都有问题。

```
case PixelFormat of
  pf32bit: PixSize:=4;
  pf24bit: PixSize:=3;
  pf16bit: PixSize:=2;

end;
BitCounter:=0;
for i:=0 to Height-1 do begin
  Row:=ScanLine[i];
  PB:=@Row[PixSize-1];
  for j:=0 to Width-1 do begin 
    Ch[BitCounter] := (PB^ and 1);
    ....
    inc(BitCounter);
    inc(PB, PixSize);
end; 
```

所以我知道 PixelFormat 属性表示每个像素的大小（以字节为单位）。我还知道 ScanLine 方法应该获取代表线条的像素数组。我没有得到的是，我倾向于将每个像素可视化为 RGB 值。我习惯于提取颜色值的最低有效位。但是，我认为我什至不确定现有代码正在提取什么。我有一些 python PIL 代码可以提取同一图像中每个像素的 RGB 值，但我不知道 RGB 值的元组与之前代码中获得的 PB 变量相比如何。根据一些实验，我猜它根本无法比较。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T22:51:17.570

以防以后有人尝试这样做。感谢 David 帮助澄清 ScanLine 返回的内容。

```
from PIL import Image
img = Image.open('picture.gif')
(width, height) = img.size
conv = img.convert("RGB").getdata()
bt = []
for h in range(height):
  for w in range(width):
    pixel = conv.getpixel((w, h))[0]    # getpixel returns a tuple (R,G,B)
    bt.append((pixel & 0x1)) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-02T02:32:47.907

这将有助于显示您正在使用的变量是如何定义的，以便我们可以看到您正在尝试使用它们做什么。也就是说，ScanLine 属性是一个数组，表示代表像素的字节。也就是说，您需要一个像 case 语句这样的小函数来确定字节数。但是您需要将每个 ScanLine 作为指向字节数组的指针拉出。

所以 ScanLine 数组中的条目数是 Bitmap1.Height，这意味着你有这部分是正确的。但其余的有点不同。假设我们将一个名为 row 的变量定义为一个指针。然后要在数组中找到特定像素，您必须相应地设置另一个指针。

不确定这是否得到它，因为它经过了非常轻微的测试。我只是用 Longint 来表示我拉回的像素数据。您将使用更适合您需要的东西来提取 RGB 数据，但希望这演示了如何处理 ScanLine 属性以从中获取您需要的像素数据：

```
var
  i, j: integer;
  row: pointer;
  pixel: pointer;
  pixelsize: integer;
  thepixel: longint;
begin
  for i := 0 to (Image1.Picture.Height - 1) do
    begin
      row := Image1.Picture.Bitmap.ScanLine[i];
      pixelsize := GetPixelSize(Image1.Picture.Bitmap.PixelFormat);
      pixel := row;
      for j := 0 to (Image1.Picture.Width - 1) do
        begin
          thepixel := Longint(Pixel^);
   //     Memo1.Lines.Add(IntToHex(thepixel, 12));
          Inc(Longint(Pixel), pixelsize);
        end;
     end;
end; 
```

# phpexcel - 表格对于页面来说太大时出现 mPDF 错误

> ID：12232798
> 
> 赞同：1
> 
> 时间：2012-09-02T01:36:17.633
> 
> 标签：phpexcel, mpdf

使用以下 PHP 代码：

```
$pdf = new mPDF('utf-8', 'A4-L');  //have tried several of the formats
$pdf->WriteHTML($content,2);
$pdf->Output(); 
```

其中 $content 是一个非常普通的 html 表

只要表格中的行数少于一页，就可以生成PDF而不会出错。如果我在 html 中添加一行或多行，我会收到 PHP 警告：

```
Message: Invalid argument supplied for foreach()
Filename: mpdf/mpdf.php
Line Number: 11043 
```

重复了很多很多次。打开 mPDF 错误通知后，我得到

```
mPDF error: Some data has already been output to browser, can't send PDF file 
```

我尝试使用[Can't get rid of PHP notices in mPDF 中的代码来抑制警告](https://stackoverflow.com/questions/9067872/php-mpdf-cant-get-rid-of-notices)

这种工作，但强制下载的 PDF 有以下怪癖：

```
first page: blank
2nd page:  table header only
3rd to next to last pages:  header and 1 row of data
last page:  header + full page of data 
```

这是我尝试与我的 CodeIgniter 框架一起使用的 PHP 库中的第三个 PDF，所以在这一点上我非常沮丧。

PHPExcel（我用来为我的客户端提供 Excel 下载数据选项）在格式化 Excel 电子表格时效果很好，但是无论我使用什么选项，PDF 的输出都是可怕的（主要是，它在每个单元格周围加上一个轮廓巨大的填充物）

ezPDF/PHP-PDF（根据[http://www.ahowto.net/php/easily-integrate-ezpdf-aka-pdf-php-into-codeigniter-framework](http://www.ahowto.net/php/easily-integrate-ezpdf-a-k-a-pdf-php-into-codeigniter-framework)）效果很好。除了我无法让它与客户的徽标一起使用，他们坚持要在 PDF 的顶部显示。

我想我接下来要尝试 domPDF。

# javascript - Three.js CanvasRenderer，将图像纹理设置为平面时出现问题

> ID：12232806
> 
> 赞同：0
> 
> 时间：2012-09-02T01:38:19.233
> 
> 标签：javascript, html, css, html5-canvas, three.js

所以基本上，我正在尝试模拟一种类似于 Halo Reach 菜单中使用的 UI。我计划通过将网页的背景设置为某个图像，在其前面创建一个平面，并将其纹理设置为具有一些半透明矩形形状的图像，以用作主背景用户界面本身。我会担心按钮以及将来不会发生的事情，但到目前为止，我无法再让它在画布上渲染任何东西。以前它能够使用白色材质在正确的位置渲染平面，但是在尝试对其应用纹理时，我设法混合了一些东西，结果它没有渲染任何东西。

如果有人能帮助我，这里是源链接： [https](https://dl.dropbox.com/u/40043006/test.zip) ://dl.dropbox.com/u/40043006/test.zip \

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T20:08:53.707

我怀疑你在打[这个](https://github.com/mrdoob/three.js/wiki/How-to-run-things-locally)。但是，我建议对 UI 内容使用纯 HTML/图像。

# jquery-masonry - 定位时页面加载时砌体/无限滚动“跳跃闪烁”

> ID：12232812
> 
> 赞同：2
> 
> 时间：2012-09-02T01:39:12.283
> 
> 标签：jquery-masonry

**前言：** *Masonry 是一个 JQuery 插件，它在一个页面上创建 html 页面的“砖式”布局。Infinite scroll 是一个插件，允许以 pintrest 样式滚动页面项目。*

我在这里安装了带有无限滚动的砖石：

[http://helpknow.com/black2/](http://helpknow.com/black2/)

我的问题是这个。

我想定位“容器” div 以使页面中的整个项目列表居中。

所以我使用这样的一些代码：

```
#container {
  left:140px;   // <---- Positioning 
  padding:10px;
  background: #FFF;
  padding: 5px;
  margin-bottom: 20px;
  border-radius: 5px;
  clear: both;
  -webkit-border-radius: 5px;
     -moz-border-radius: 5px;
          border-radius: 5px;

} 
```

问题是当我这样做时，在打开页面时会出现一个快速的“闪烁跳跃”，所有砖石项目都会移动到它们的位置（您可能无法在刷新时看到它，只能在初始页面加载时看到）。我不想要这个。我希望这些项目不会“闪烁”。我希望它们在用户滚动之前显示为静态，然后我希望动画按预期发生。当我删除**左侧**定位时，不会发生此问题（但显然项目向左浮动并且未居中，这不是我想要的）。我尝试将主 div“容器”和其他项目包装在一个新的 div 容器中并移动它/它们，但遇到了同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T06:49:49.000

您是否尝试过 2，即在加载所有内容后初始化 Masonry？现在，您正在按照 1 中的方式进行操作...

1 这会在 DOM 构建完成后，在所有内容加载完成之前执行

```
$(document).ready(function(){ ... });
$(function(){...}); // short form 
```

2 这会在所有内容加载完成后执行

```
$(window).load(function(){ ... }); 
```

3 当浏览器第一次遇到它时立即执行

```
(function(){ ... })(); 
```

后者是一个自执行的匿名函数（称为*闭包*），非常方便，但这里不是，因为它自执行时可能没有加载任何内容或没有加载正确的内容。

**更新**或者，您可以淡入您的#container，有时看起来也不错。在这里看到[这个小提琴](http://jsfiddle.net/ALmYX/)，它与 Masonry 的大哥 Isotope 一样。

# javascript - UIWebView 保存用户名和密码

> ID：12232816
> 
> 赞同：2
> 
> 时间：2012-09-02T01:40:02.273
> 
> 标签：javascript, objective-c, xcode, uiwebview

我使用 javascript 获得了用户名和密码，但该代码不适用于所有网站。gmail 使用的 id 与 Facebook 不同，许多网站也可能这样做，那么如何使代码适用于任何登录的网站？

下面是它现在如何获取用户名/密码：

```
if (navigationType == UIWebViewNavigationTypeFormSubmitted) {
    //works for gmail
    NSString *username = [WebView stringByEvaluatingJavaScriptFromString:@"document.getElementsByName('Email')[0].value"];
    NSString *password = [WebView stringByEvaluatingJavaScriptFromString:@"document.getElementsByName('Passwd')[0].value"];

    //works for facebook?
    //NSString *username = [WebView stringByEvaluatingJavaScriptFromString:@"document.getElementsByName('email')[0].value"];
    //NSString *password = [WebView stringByEvaluatingJavaScriptFromString:@"document.getElementsByName('pass')[0].value"];
    NSLog(@"username is %@\npassword is %@",username,password);
} 
```

所以我只想知道如何获取用户登录的任何站点的用户名和密码，以便我可以保存它，然后在他们返回并注销时自动填充，以便轻松登录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T04:09:45.950

要获取所有文本字段，您可以像这样放置一个 js 查询

```
document.querySelectorAll("input[type='text']") 
```

希望这有帮助。:)

另外要了解更多详细信息，请参阅[此帖子](https://stackoverflow.com/a/9722805/1357774)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-02T02:02:20.087

如果您希望它适用于任何网站，您将不得不做一些完全不同的事情。也许创建一个站点数组，然后将字段存储到该对象。您可以搜索每个“密码”输入，然后尝试向上移动到上一个输入，因为大多数时候它是用户名然后是密码字段。

但是您将无法使其适用于那里的每个站点。

# php - MySQL SELECT WHERE 返回空的长数字，尽管它们在那里

> ID：12232817
> 
> 赞同：0
> 
> 时间：2012-09-02T01:40:03.963
> 
> 标签：php, mysql, sql

好吧，所以基本上是有史以来最简单的查询......我已经做了一百万次......

```
 SELECT * 
 FROM   purchased_items
 WHERE  uid = '$uid' 
```

如果`$uid == 123`它工作正常并返回 uid 为 123 的行中的所有数据

如果`$uid == 351565051447743`它返回空...

我很肯定在某些行中`351565051447743`是可能`uid`的，我从字面上将其复制并粘贴到表格中。

$uid 是一个字符串，并且作为字符串传递。

这是我做过一百万次的事情，而且我从来没有让这个简单的查询不起作用。

任何想法为什么这不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T02:14:49.687

您可能会从 double 中获得 E{some_power} 表示形式的字符串。

我的意思是

```
$query1 = "SELECT * FROM   purchased_items WHERE  uid = '$uid'"; 
```

产生：

```
SELECT * FROM purchased_items WHERE uid = '3.5156505144774E+14' 
```

解决它的一种方法是：

```
$query = sprintf("SELECT * FROM purchased_items WHERE uid = '%d'", $uid); 
```

不确定 sql 是否支持 E 格式，所以这可能是也可能不是问题。 [http://viper-7.com/v6MhVe](http://viper-7.com/v6MhVe)

dit：快速解决方法

```
$format = (is_numeric($uid)) ? '%d' : '%s';
$query2 = sprintf("SELECT * FROM purchased_items WHERE  uid = '{$format}'", $uid);; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T03:35:13.843

你表上的数据类型是什么`uid`？转换`uid`为另一种数据类型怎么样？

```
 SELECT * 
 FROM   purchased_items
 WHERE  CAST(uid AS VARCHAR(25)) = '$uid' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T17:45:50.900

好的，因此，如果您在使用浏览器进行测试时显然使用了 AMFPHP，那么您是否将值“转换”为查询中的字符串并不重要。您需要在浏览器界面中用字符串中的引号传递它。

# c# - Listview 清除和释放内存

> ID：12232820
> 
> 赞同：1
> 
> 时间：2012-09-02T01:40:24.880
> 
> 标签：c#, memory-management

我有一个使用 ListView 将大量数据打印到用户界面的程序。它有时可以容纳超过 500MB 的数据，但这不是我的问题。我的问题是，如果我尝试通过 `listview.Items.Clear();`我的应用程序的内存消耗来清除列表视图中的项目，只会下降一小部分，并坐在那里。来自一个全新的 Windows 窗体应用程序的内存示例，其中只有一个列表视图：

*   7,812K - 程序运行时未添加列表视图项。
*   26,816K - 填充了 50000 个分配给值“test”的 ListView 项
*   22,860K - 清除前 50000 个 ListView 项目后的内存。

内存值来自任务管理器。

我的问题是 listview.Items.Clear() 没有释放 listview 项目占用的所有内存，据我所知。

相关信息：在我的测试程序中，它只包含一个具有“详细信息”视图属性的 ListView 和一列。

相关代码：

```
public void Test()
{
    for (int i = 0; i < 50000; i++)
    {
        listView1.Items.Add(new ListViewItem("test"));
    }
}
private void listView1_Click(object sender, EventArgs e)
{
    listView1.Items.Clear();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T01:48:47.320

清除列表视图不会处理项目，这就是内存保持不变的原因。

但是，如果项目中的任何地方都没有引用这些项目，那么当垃圾收集器启动时，它们将被正确处理，并且内存将再次下降。

# git - 如何存储工作树，更新本地分支并合并两者

> ID：12232821
> 
> 赞同：1
> 
> 时间：2012-09-02T01:40:41.947
> 
> 标签：git, merge

存储工作树、更新本地分支然后合并在本地和远程分支上修改的两个文件的最佳方法是什么？

我正在做如下：

*   首先，我，保存我的工作树`git stash`的快捷方式`git stash save`
*   然后我`git pull`，更新我的本地分支。
*   由于我的分支已更新，我使用`git stash pop`从存储列表中删除单个隐藏状态并将其应用于当前工作树状态的顶部。

这还不错，尽管合并部分不是最好的。我只想合并更改，如果可能的话，使用 mergetool。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T01:47:00.650

你为什么不直接提交和变基？

```
git commit -a
git pull --rebase
*fix merge conflicts* 
```

然后，如果您想追加到该提交，您可以执行

```
git commit -a --amend 
```

然后，如果您想取消提交刚刚所做的提交，但仍要保存更改，请进行软重置：

```
git reset --soft HEAD^ 
```

# c++ - 如何知道是否从 Windows 本地服务启用了唤醒计时器？

> ID：12232829
> 
> 赞同：2
> 
> 时间：2012-09-02T01:42:23.990
> 
> 标签：c++, winapi, service, power-management

我正在使用 C++ 编写 Windows 本地服务。我需要知道是否在运行它的系统上启用了唤醒计时器。我怎样才能从本地服务中做到这一点？

此屏幕截图中圈出的设置：

![在此处输入图像描述](../Images/3a4ce2aac287143ebe0761b61642bdfe.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T06:40:34.160

[正如我在上](https://stackoverflow.com/questions/8501109/allow-wake-timers-windows-7-vista/12595731#12595731)一篇文章中指出的，此设置存储在注册表中：

> HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Power\User\PowerSchemes\(Current Power Scheme GUID)\(Sleep Category GUID)\(Enable AC or DC Wake Timers GUID) = 0 或 1

您还可以从命令行检索此设置的当前值：

```
powercfg.exe -q SCHEME_CURRENT SUB_SLEEP 
```

我确信存在更好的方法，但这就是我迄今为止发现的全部。如果我找到更好的技术，我会更新我的帖子。

**编辑**

使用以下 C# 代码作为指南。ACWakeTimerEnabled() 返回 0 或 1 表示启用或禁用。

```
 [DllImport("powrprof.dll", SetLastError = true)]
    private static extern UInt32 PowerReadACValue(
        IntPtr RootPowerKey,
        ref Guid SchemeGuid,
        ref Guid SubGroupOfPowerSettingGuid,
        ref Guid PowerSettingGuid,
        IntPtr Type,
        IntPtr Buffer,
        ref UInt32 BufferSize);

    public static int ACWakeTimerEnabled()
    {
        Guid Root = new Guid("8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c"); // High Performance GUID
        Guid Sleep = new Guid("238c9fa8-0aad-41ed-83f4-97be242c8f20"); // Sleep Subcategory GUID
        Guid WakeTimers = new Guid("bd3b718a-0680-4d9d-8ab2-e1d2b4ac806d"); // AC Wake Timers GUID
        IntPtr ptrActiveGuid = IntPtr.Zero;
        uint buffSize = 0;
        uint res = PowerReadACValue(IntPtr.Zero, ref Root, ref Sleep, ref WakeTimers, IntPtr.Zero, IntPtr.Zero, ref buffSize);
        if (res == 0)
        {
            IntPtr ptrName = IntPtr.Zero;
            try
            {
                ptrName = Marshal.AllocHGlobal((int)buffSize);
                res = PowerReadACValue(IntPtr.Zero, ref Root, ref Sleep, ref WakeTimers, IntPtr.Zero, ptrName, ref buffSize);
                byte[] ba = new byte[buffSize];
                Marshal.Copy(ptrName, ba, 0, (int)buffSize);
                return BitConverter.ToInt32(ba, 0);
            }
            finally
            {
                if (ptrName != IntPtr.Zero) Marshal.FreeHGlobal(ptrName);
            }
        }
        throw new Win32Exception((int)res, "Error reading wake timer.");
    } 
```

# java - 如何在数组结果中关联变量

> ID：12232834
> 
> 赞同：1
> 
> 时间：2012-09-02T01:43:20.213
> 
> 标签：java, arrays

我从一开始就在学习 Java 基础知识。但仍有一定的理论依据。

如何计算下面示例中每个学生的平均值？

```
 package teste01classes;

    public class Metodos {

        static void Media(Alunos[] aluno) {
            // SEE HERE.
            double[] media;
            for (int i = 0; i < aluno.length; i++) {
                media[i] = (aluno[i].n1 + aluno[i].n2 + aluno[i].n3) / 3;
                System.out.println(aluno[i].nome + media[i]);
            }
        }
    }

package teste01classes;

// Classe Alunos com os campos
public class Alunos {
    String nome;
    int n1, n2, n3;
}

package teste01classes;

public class Teste01Classes {

    public static void main(String[] args) {

        Alunos[] aluno = DadosAlunos.createAlunos();

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T01:44:59.103

你必须*初始化*`media` [数组](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)，然后`return`它：

```
static double[] media(Alunos[] aluno) {
  // allocate memory for a double array of size aluno.length
  double[] media = new double[aluno.length];
  for (int i = 0; i < aluno.length; i++) {
    media[i] = (aluno[i].n1 + aluno[i].n2 + aluno[i].n3) / 3;
    System.out.println(aluno[i].nome + media[i]);
  }
  return media;
} 
```

然后，在您的 中`main`，调用它：

```
public static void main(String[] args) {
  Alunos[] aluno = DadosAlunos.createAlunos();
  double[] medias = Metodos.media(aluno);
} 
```

# cloud-foundry - 在 STS 和 GGTS（Linux，64 位）中启动 Cloud Foundry 插件时出错

> ID：12232837
> 
> 赞同：0
> 
> 时间：2012-09-02T01:43:35.923
> 
> 标签：cloud-foundry

我正在尝试使用最新的 cloudfoundry 插件并得到“无法创建部件的控件”。我已经尝试过 STS 64 位、GGTS 32 和 64 无济于事（都在 Linux 64 位机器上）。

有任何想法吗？这是我在“服务器”选项卡中双击 SpringSource Cloud Foundry 服务器时显示的异常。

```
org.eclipse.core.runtime.AssertionFailedException: assertion failed: 
at org.eclipse.core.runtime.Assert.isTrue(Assert.java:110)
at org.eclipse.core.runtime.Assert.isTrue(Assert.java:96)
at org.eclipse.ui.part.MultiPageEditorPart.setActivePage(MultiPageEditorPart.java:1079)
at org.eclipse.ui.part.MultiPageEditorPart.createPartControl(MultiPageEditorPart.java:362)
at org.eclipse.ui.internal.e4.compatibility.CompatibilityPart.createPartControl(CompatibilityPart.java:129)
at org.eclipse.ui.internal.e4.compatibility.CompatibilityEditor.createPartControl(CompatibilityEditor.java:95)
at org.eclipse.ui.internal.e4.compatibility.CompatibilityPart.create(CompatibilityPart.java:300)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:56)
at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:857)
at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:837)
at org.eclipse.e4.core.internal.di.InjectorImpl.inject(InjectorImpl.java:111)
at org.eclipse.e4.core.internal.di.InjectorImpl.internalMake(InjectorImpl.java:318)
at org.eclipse.e4.core.internal.di.InjectorImpl.make(InjectorImpl.java:240)
at org.eclipse.e4.core.contexts.ContextInjectionFactory.make(ContextInjectionFactory.java:161)
at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.createFromBundle(ReflectionContributionFactory.java:102)
at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.doCreate(ReflectionContributionFactory.java:71)
at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.create(ReflectionContributionFactory.java:53)
at org.eclipse.e4.ui.workbench.renderers.swt.ContributedPartRenderer.createWidget(ContributedPartRenderer.java:141)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createWidget(PartRenderingEngine.java:889)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:623)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:725)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:696)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:690)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:675)
at org.eclipse.e4.ui.workbench.renderers.swt.StackRenderer.showTab(StackRenderer.java:1042)
at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer$1.handleEvent(LazyStackRenderer.java:67)
at org.eclipse.e4.ui.services.internal.events.UIEventHandler$1.run(UIEventHandler.java:41)
at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:180)
at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:150)
at org.eclipse.swt.widgets.Display.syncExec(Display.java:4291)
at org.eclipse.e4.ui.internal.workbench.swt.E4Application$1.syncExec(E4Application.java:187)
at org.eclipse.e4.ui.services.internal.events.UIEventHandler.handleEvent(UIEventHandler.java:38)
at org.eclipse.equinox.internal.event.EventHandlerWrapper.handleEvent(EventHandlerWrapper.java:197)
at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:197)
at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:1)
at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)
at org.eclipse.equinox.internal.event.EventAdminImpl.dispatchEvent(EventAdminImpl.java:135)
at org.eclipse.equinox.internal.event.EventAdminImpl.sendEvent(EventAdminImpl.java:78)
at org.eclipse.equinox.internal.event.EventComponent.sendEvent(EventComponent.java:39)
at org.eclipse.e4.ui.services.internal.events.EventBroker.send(EventBroker.java:81)
at org.eclipse.e4.ui.internal.workbench.UIEventPublisher.notifyChanged(UIEventPublisher.java:57)
at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:374)
at org.eclipse.e4.ui.model.application.ui.impl.ElementContainerImpl.setSelectedElement(ElementContainerImpl.java:171)
at org.eclipse.e4.ui.internal.workbench.ModelServiceImpl.showElementInWindow(ModelServiceImpl.java:418)
at org.eclipse.e4.ui.internal.workbench.ModelServiceImpl.bringToTop(ModelServiceImpl.java:385)
at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.delegateBringToTop(PartServiceImpl.java:578)
at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.bringToTop(PartServiceImpl.java:314)
at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.showPart(PartServiceImpl.java:962)
at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:3071)
at org.eclipse.ui.internal.WorkbenchPage.access$21(WorkbenchPage.java:2996)
at org.eclipse.ui.internal.WorkbenchPage$8.run(WorkbenchPage.java:2978)
at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2974)
at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2933)
at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2916)
at org.eclipse.wst.server.ui.internal.ServerUIPlugin.editServer(ServerUIPlugin.java:439)
at org.eclipse.wst.server.ui.internal.ServerUIPlugin.editServer(ServerUIPlugin.java:422)
at org.eclipse.wst.server.ui.internal.view.servers.OpenAction.perform(OpenAction.java:36)
at org.eclipse.wst.server.ui.internal.view.servers.AbstractServerAction.run(AbstractServerAction.java:64)
at org.eclipse.ui.actions.RetargetAction.run(RetargetAction.java:221)
at org.eclipse.ui.navigator.CommonNavigatorManager$3.open(CommonNavigatorManager.java:185)
at org.eclipse.ui.OpenAndLinkWithEditorHelper$InternalListener.open(OpenAndLinkWithEditorHelper.java:48)
at org.eclipse.jface.viewers.StructuredViewer$2.run(StructuredViewer.java:866)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:49)
at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
at org.eclipse.jface.viewers.StructuredViewer.fireOpen(StructuredViewer.java:864)
at org.eclipse.jface.viewers.StructuredViewer.handleOpen(StructuredViewer.java:1152)
at org.eclipse.ui.navigator.CommonViewer.handleOpen(CommonViewer.java:462)
at org.eclipse.jface.viewers.StructuredViewer$6.handleOpen(StructuredViewer.java:1256)
at org.eclipse.jface.util.OpenStrategy.fireOpenEvent(OpenStrategy.java:275)
at org.eclipse.jface.util.OpenStrategy.access$2(OpenStrategy.java:269)
at org.eclipse.jface.util.OpenStrategy$1.handleEvent(OpenStrategy.java:309)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1276)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3554)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3179)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1022)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:916)
at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:585)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:540)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
at org.eclipse.equinox.launcher.Main.main(Main.java:1414) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T20:16:18.110

您能否提供更多信息来帮助缩小可能导致问题的范围？

1.  Linux 的发行版和版本。Ubuntu 10.0.4、12.0.4 等。SWT 库不同，使用 Gnome 3 的较新版本的 Linux 可能不如旧版本稳定和健壮。

2.  您能否验证安装了哪个版本的 Cloud Foundry 插件？

3.  打开 Eclipse 错误日志，清除它，尝试通过双击服务器视图中的 Cloud Foundry 服务器实例来打开 CF 编辑器，看看除了您已经发布的异常之外，是否还有其他异常被抛出。

4.  查看打开tc服务器编辑器时是否也出现错误。如果可能，双击出现在服务器视图中的默认 tc 服务器实例，或创建一个。创建一个：

    *   右键单击服务器视图
    *   选择新建 -> 服务器
    *   在向导中，在 VMware 下，选择“VMware vFabric tc Server...”，单击下一步
    *   选择“创建新实例”，点击下一步
    *   输入名称并选择任何模板，单击完成
    *   在服务器视图中创建 tc 服务器实例后，双击它以打开编辑器

# html - 根据所选图像重新加载贝宝按钮源

> ID：12232838
> 
> 赞同：0
> 
> 时间：2012-09-02T01:43:55.657
> 
> 标签：html, css

我创建了 3 个单独的贝宝按钮。小型，中型和大型（所有不同的价格）

小号、中号和大号是我网站 S、M 和 L 上的图片。

我希望客户选择 S、M 或 L，但这些都是不同的价格，所以我希望“添加到购物车”按钮根据客户的选择自动更新。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T01:53:20.547

如果您选择使用 jQuery，这可以轻松完成。

首先，在这一行中包含 jquery：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script> 
```

现在使用下面的代码。为每个图像提供其大小（小、中或大）的 ID，当单击该图像时，将显示正确的表单。请记住将正确的表单域粘贴到正确的空格中。

```
<script>    
    $('#small').click(function(){
        $('.paypalForm').hide();
        $('#smallForm').show();
    });
    $('#medium').click(function(){
        $('.paypalForm').hide();
        $('#mediumForm').show();
    });
    $('#large').click(function(){
        $('.paypalForm').hide();
        $('#largeForm').show();
    });
</script>

<form id="smallForm" class="paypalForm" target="paypal" action="paypal.com/cgi-bin/webscr" method="post">
    ...
</form>

<form id="mediumForm" class="paypalForm" target="paypal" action="paypal.com/cgi-bin/webscr" method="post">
    ...
</form>

<form id="largeForm" class="paypalForm" target="paypal" action="paypal.com/cgi-bin/webscr" method="post">
    ...
</form> 
```

# java - 如何从 Selenium 获取 JavaScript 值？

> ID：12232842
> 
> 赞同：0
> 
> 时间：2012-09-02T01:45:30.947
> 
> 标签：java, javascript, selenium

我正在运行以下代码（Java selenium 客户端）- PAGE_NUMBER 有一个值，但我无法使用 selenium 获取它：

```
String script = "var cellValue = selenium.browserbot.getUserWindow().PAGE_NUMBER;";
selenium.runScript(script);

String value = selenium.getEval("selenium.browserbot.getUserWindow().cellValue;");
System.out.println("Value: " + value); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T03:19:46.487

我根本不知道 Selenium 1，而 Selenium2/Webdriver 非常不同。但是，我怀疑有三件事在这个问题中起作用：

1.  范围：您将变量声明为脚本范围的本地变量（通过写入`var`）。您可以尝试通过省略`var`关键字来使用全局变量，以便以后可以访问它。
2.  您为什么尝试通过`selenium.browserbot.getUserWindow().`. 尝试省略这部分。
3.  cellValue 之后的分号可能也不是一个好主意

再说一次，为什么不简单地使用

```
String value = selenium.getEval("selenium.browserbot.getUserWindow().PAGE_NUMBER"); 
```

?

我希望这个答案的至少一部分对您有所帮助。正如我所说，我只是猜测。

# ajax - 100% Ajax 网站

> ID：12232844
> 
> 赞同：1
> 
> 时间：2012-09-02T01:45:59.320
> 
> 标签：ajax, client-side

我一直在查看 Hulu 的新网站，从开发人员的角度（以及设计师的角度）给我留下了深刻的印象。

我发现，除非您在 http/https 之间切换，否则您将获得完全来自 json 请求的内容。在保持浏览返回按钮支持以及允许直接访问每个 url 的同时拥有这种级别的 ajax 是一项巨大的壮举。

我想创建一个这样的网站作为学习体验。是否有任何类型的框架可以给我这种支持？

我以为我可以...

*   利用 jQuery
*   使用像 KnockoutJS 这样的客户端 MVVM 框架？
*   使用 ASP.NET MVC 内容协商来提供由接受标头确定的 html 或 json。
*   使用相同的代码库。
*   客户端和服务器端渲染使用相同的模板
*   提供更新页面标题/元标记/等的方法。

仍然会使用 Ajax 表单/小部件/等，因为我正在考虑使用 json 和客户端模板的页面级 ajax。

你怎么看？有什么框架吗？我可以遵循任何模式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T01:52:42.827

最好先建立一个不支持 AJAX 的网站，然后在其上添加 AJAX。这样做意味着：

*   没有 javascript 的用户已经可以访问您的网站
*   用户已经可以直接访问任何 URL。

添加 AJAX 支持可以通过各种 javascript 库来完成。为了能够呈现 json 内容，您需要查看**javascript 模板**。当您添加 AJAX 支持（文件扩展名为 .ejs）时，您甚至会希望在服务器端使用 javascript 模板。这可能需要一些适当的库来在服务器上运行 javascript。

添加 AJAX 支持时，您需要使用“History.js”库来支持浏览器后退/前进/历史记录。

不犯错误。这是一个巨大的项目（除非您的网站只有几页）。因此，将所有 AJAX 支持添加到可能的最佳标准需要很长时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T02:38:33.433

回答关于使用相同模板服务器端和客户端的要点：检查[灰尘](http://linkedin.github.com/dustjs/)。它最初由[akdubya](http://akdubya.github.com/dustjs/)开发，但后来被linkedin采用和增强。他们使用它在他们的移动应用程序[客户端](http://engineering.linkedin.com/frontend/leaving-jsps-dust-moving-linkedin-dustjs-client-side-templates)呈现模板。我个人在服务器端使用过它，效果很好。

# javascript - 何时使用 Requirejs 以及何时使用捆绑的 javascript？

> ID：12232848
> 
> 赞同：75
> 
> 时间：2012-09-02T01:47:56.453
> 
> 标签：javascript, requirejs, servicestack

对于网络人来说，这可能是一个愚蠢的问题。但我对此有点困惑。现在，我有一个应用程序，我在其中使用几个 Javascript 文件来执行不同的任务。现在，我正在使用 Javascript[捆绑](https://github.com/ServiceStack/Bundler)器来组合和缩小所有文件。因此，在运行时将只有一个 app.min.js 文件。现在，[Requirejs](http://requirejs.org/)用于在运行时加载模块或文件。所以，问题是如果我已经在一个文件中拥有所有东西，那么我需要 requirejs 吗？或者我可以使用 requirejs 和/或 bundler 的用例场景是什么？

如果需要任何进一步的细节，请告诉我。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-02T02:06:24.653

通常，您在开发过程中仅在其加载形式中使用 RequireJS。站点完成并准备好部署后，您可以缩小代码。这里的优点是 RequireJS 确切地知道你的依赖项是什么，因此可以轻松地以正确的顺序缩小代码。这是[RequireJS 网站上](http://requirejs.org/docs/start.html#optimize)的内容：

> 完成开发并希望为最终用户部署代码后，您可以使用优化器将 JavaScript 文件组合在一起并缩小它。在上面的示例中，它可以将 main.js 和 helper/util.js 合并到一个文件中并缩小结果。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-09-02T02:07:38.423

这是许多精通 javascript 开发人员之间激烈争论的问题。许多其他语言都有一个“编译”阶段，在该阶段将整个程序捆绑起来进行部署（想到 JBoss 的 .WAR 文件）。来自更传统背景的程序员通常喜欢这种方法。

近年来，Javascript 的增长如此之快，以至于很难绘制出确切的最佳实践，但那些欣赏 Javascript 更多功能特性的人通常更喜欢模块加载方法（如 require.js 使用）。

我编写的[Frame.js](https://github.com/bishopZ/Frame.js)与 require.js 非常相似，所以我偏向于模块加载器方法。

要直接回答您的问题，是的，它是一个或另一个。

大多数主张将脚本打包到单个文件中的人认为它可以实现更多压缩，因此更有效。我相信在大多数情况下打包的效率优势可以忽略不计，因为：（1）模块加载时间分布在整个会话中，（2）单个模块可以压缩到几乎相同的百分比，（3）单个模块可以通过服务器和路由器分开，以及 (4) 仅在需要时加载脚本最终允许您为某些用户加载更少的代码，而整体上加载更多的代码。

从长远来看，如果您能看到动态脚本加载的优势，请使用它。如果没有，请将您的脚本捆绑到一个文件中。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-09-03T19:34:52.873

这取决于您的应用程序。如果您正在制作一个仅使用适度 javascript（小于 100kb 缩小）的服务器端应用程序，那么进行完全捆绑，您可能会没事的。

但是，如果您正在制作一个 javascript 应用程序并且其中包含大量代码，那么您的需求将会有所不同。

例如，在我的应用程序中，我捆绑了所有核心文件。有 jQuery、下划线、主干、我的主要应用程序文件、我的用户登录系统、我的布局系统、我的通知和聊天系统，所有这些都是我最初的大文件的一部分。

但是我还有许多其他模块，它们不属于初始捆绑包的一部分，它们是在这些模块之后加载的。

论坛、wiki、所见即所得、颜色选择器、拖放、日历和一些动画文件属于第二类。您需要对哪些是常用的和立即需要的，哪些是可以延迟的，做出合理的决定。

如果我立即包含所有内容，我可以超过一兆的 javascript，这将是疯狂的，并且会使初始启动速度慢得令人无法接受。

第二类在`initSuccess`事件从初始文件触发后开始下载。

但第二类比第一类更智能，因为它首先加载更重要的内容。例如，如果您正在查看 wiki，它将在加载颜色选择器之前加载 wiki。

# c++ - 左操作数是什么意思？

> ID：12232849
> 
> 赞同：2
> 
> 时间：2012-09-02T01:48:01.337
> 
> 标签：c++, operator-overloading

我试图弄清楚为什么这段代码有效（尤其是“价格”部分）

```
struct CarType
{
    string maker;
    int year;
    float price;
    bool operator > (carType car)
    {
        if (price > car.price)
            return true;
        else return false;
    }
}; 
```

它说“我们不需要 myCar.price，因为 myCar 是左操作数”。这意味着什么？我在另一个 .h 文件中写了这个：

```
bool operator > (Fraction a, Fraction b)
{
    if (a.numerator*b.denominator > b.numerator*a.denominator) return true;
    else return false;
} 
```

看看我是如何通过 2 个 Fraction 结构的？我不确定为什么“myCar”只需要传递一个 CarType 数据结构或解释的含义。有人可以启发我吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T01:58:20.647

如果你写成`operator>`一个自由函数（不是类的成员），那么你需要两个操作数。

如果你把它写成一个成员函数，那么你仍然有两个操作数，但其中一个是隐藏`this`操作数。（请记住，当您调用非静态成员函数时，您是在类的特定实例上调用它。）

如果我输入隐含的内容，它可能会帮助您理解`this->`

```
bool operator > (carType car)
{
    if (this->price > car.price)
        return true;
    else return false;
} 
```

这也意味着您可以根据需要比较这样的汽车：

```
CarType one, two;
if (one.operator>(two)) // same as if (one > two)
{
    // some code...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T08:39:04.847

Three points:

1.  Passing the parameter(s) by value is expensive, because all the data members have to be copied.
2.  Since the comparison does not alter the objects, you should sprinkle `const` on your code.
3.  `if (expr) return true; else return false;` can always be simplified to `return expr;`

Modified code:

```
bool operator>(const carType& car) const
{
    return price > car.price;
}

bool operator>(const Fraction& a, const Fraction& b)
{
    return a.numerator*b.denominator > b.numerator*a.denominator;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T01:56:25.717

`CarType`是一个结构。它包含有关汽车的信息。假设它已正确初始化，它已为`maker`、`year`和设置了值`price`。

`bool operator > (carType car)`是 的成员运算符`CarType`。当成员运算符`>`被调用时，它是从/由左侧的对象调用的，就像函数一样。如果你有一个函数`CarType`被调用`myFunction`，你会这样调用它：

```
myCar.myFunction(); 
```

而且它会对里面已经设置好的数据进行操作`myCar`，对吧？运营商也是如此。当您为 创建`>`运算符时`CarType`，您可以这样称呼它：

```
myCar > otherCar 
```

可能有一个 if 或一些围绕它的东西，但重点是存在的。因为`myCar`在运算符的左边`>`，所以它是左边的操作数。 `>`被调用`myCar`，并`otherCar`作为右手变量传入。运营商只是让事情看起来更漂亮；在这种情况下，您的`>`功能与您在其中编写此功能相同`CarType`：

```
bool isGreaterThan (carType car)
{
    if (price > car.price)
        return true;
    else return false;
} 
```

然后这个函数会被这样调用：

```
myCar.isGreaterThan(otherCar); 
```

在这种情况下，很清楚发生了什么，对吧？ `myCar`是函数被调用的对象；`otherCar`是它正在与之比较的汽车。使用运算符时也是如此；这意味着左操作数正在调用函数，并传入右操作数。重载运算符使代码简单易读，并提供灵活性（即，现在有一些数据结构可以根据您的`>`运算符执行排序，如果您决定用`isGreaterThan`函数定义相等性，他们就无法做到这一点。

我希望这能消除您的困惑；如果您还有什么需要我解释的，请告诉我！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T01:54:01.053

第一个`operator>`是 的成员，因此调用它`CarType`的实例是左操作数。`CarType`第二个`operator>`不是任何事物的成员，因此必须指定左操作数。

# wpf - 如何手动触发 MahApps 动画

> ID：12232850
> 
> 赞同：2
> 
> 时间：2012-09-02T01:48:22.163
> 
> 标签：wpf, animation, mahapps.metro

我在 WPF 应用程序中使用 MahApps.Metro。动画非常漂亮，就像 TabControl 更改选项卡的动画一样。

我想手动为某些元素（例如 Wrap Panel）设置动画。

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T20:19:04.953

我知道了，我需要将我的元素包含在 MetroContentControl 元素中并调用 MetroContentControl 的 Reload() 方法。

# css - Chrome中的CSS表和最大宽度不起作用

> ID：12232858
> 
> 赞同：24
> 
> 时间：2012-09-02T01:51:20.127
> 
> 标签：css, google-chrome, firefox, css-tables

这是我的 CSS 代码；

```
#wrap {
    width:50em;
    max-width: 94%;
    margin: 0 auto;
    background-color:#fff;  
}

#head {
    width:50em;
    height:10em;
    max-width: 100%;
    margin: 0 auto;
    text-align:center;
    position: relative;
}

#css-table { 
    display: table; 
    margin: 1em auto;
    position: relative;
    width:50em;
    max-width: 100%;            
}

#css-table .col { 
    display: table-cell; 
    width: 20em;
    padding: 0px;
    margin: 0 auto;
}

#css-table .col:nth-child(even) { 
    background: #fff;
}

#css-table .col:nth-child(odd) { 
    background: #fff;
    border-right: 4px double #b5b5b5;
} 
```

还有我的 HTML 代码；

```
<div id="cont">
    <div id="css-table">
        <div class="col">123</div>
        <div class="col">123</div>
    </div>
</div> 
```

当我缩放 Firefox 窗口时，表格甚至可以缩小到 300 像素宽度的视口……就像我想要的那样。但是在 Chrome 中，只有当视口宽于 50em 时，表格才显得正常。如果我缩小 Chrome 窗口，表格会在包装的右侧流出。

Chrome这样做是有原因的吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-02T02:48:36.863

从技术上讲，Chrome 遵循规则，因为**max-width 应该只适用于块元素**。

来自 MSDN 文档：

> min-width/max-width 属性适用于浮动和绝对定位的块和内联块元素，以及一些内在控件。它们不适用于不可替换的内联元素，例如表格行和行/列组。（“替换”元素具有内在维度，例如 img 或 textArea。）

该表（或在您的情况下为 display:table）在技术上不应工作或受支持。FF 显然很好地遵守了它，但您可能需要提出另一种解决方案，或者删除*display:table*或*max-width*。

[最大宽度属性](http://reference.sitepoint.com/css/max-width)

[MSDN 文档](http://msdn.microsoft.com/en-us/library/ie/ms530811(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2017-01-16T12:16:04.340

我找到的解决方案是使用`table-layout: fixed`和`width: 100%`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-02T04:58:14.433

创建一个 div 并为其设置样式以显示块和最大宽度。您可以使用传统`<table>`的并给它一个 100% 宽度的样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-03T01:39:22.703

我能够使用 mixin(SASS) 来解决这个问题。

```
 @mixin clearfix {
   &::after{
    content: "";
    display: table;
    clear: both;
   }
 } 
```

# c++ - 一段 C++ 代码得到“无效指针”错误

> ID：12232859
> 
> 赞同：0
> 
> 时间：2012-09-02T01:51:47.063
> 
> 标签：c++, delete-operator

这是代码：

```
#include <iostream>
#include <string>
#include <vector>
using namespace std;
int main()
{
    int *p = new int[2];
    p[0] = 1;
    p[1] = 2;
    cout << *p++ << endl;
    delete p;
    return 0;
} 
```

它可以编译，但出现运行时错误“free(): invalid pointer”，然后是内存映射。

操作系统 ubuntu 10.10
编译器：g++ 4.4.3

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T01:52:43.567

您需要调用数组版本`delete`：

```
delete[] p; 
```

**编辑**：但是，您真正的问题是您正在增加`p`.
运算符仅对分配的`delete`原始指针起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T02:24:10.383

您的调用`delete`必须使用与调用返回的相同的指针`new`。

在您的代码中，您使用 递增`p`，`*p++`由于运算符优先级被解释为`*(p++)`。因此，您提供`delete`了一个内存管理器从未听说过的指针。

此外，您应该使用`delete[]`来匹配对`new[]`.

话虽如此，以下是您可能想要的猜测：

```
int *p = new int[2];
p[0] = 1;
p[1] = 2;
for(int i = 0; i < 2; i++)
    cout << p[i] << endl;
delete[] p;
return 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T02:25:45.370

看代码：

```
int *p1 = new int;
int *p2 = new int[2];

int *p3 = p1;
int *p1 = p2;

delete p3;
delete[] p1; 
```

指针`p1`和`p2`具有相同的表示和相同的允许操作集。对于编译器，它们都是`int*`.

尽管他们指向的对象有很大的不同。来自`new int[2]`hegative offset 的对象有一个包含数组中项目数的标头。

使用数组对象与使用标量对象相同。只有当这个对象被释放时，才需要告诉编译器它是什么类型的对象。一个简单的对象或数组。这是已知的错误和混乱来源。尽管如此，语言在几十年前就是这样定义的，我们无法改变这一点。

`delete`与返回的指针完全相同也很重要`new`。此规则适用于 simple`new`和`new[]`.

# c# - 了解 C# 中的 {0} 以及如何引用事物

> ID：12232862
> 
> 赞同：1
> 
> 时间：2012-09-02T01:52:07.847
> 
> 标签：c#

我对 C# 编程非常陌生，在 C++ 和 HTML 中具有浅色背景，所以我几乎是从头开始。我一直在看msdn教程，特别是属性教程，到目前为止我只有一个部分不明白。代码中有一部分是这样的：

```
// person.cs

using System;

class Person
{

private string myName ="N/A";

private int myAge = 0;

// Declare a Name property of type string:
public string Name
{
    get 
    {
       return myName; 
    }
    set 
    {
       myName = value; 
    }
}

// Declare an Age property of type int:
public int Age
{
    get 
    { 
       return myAge; 
    }
    set 
    { 
       myAge = value; 
    }
}

public override string ToString()
{
    return "Name = " + Name + ", Age = " + Age;
}

public static void Main()
{
    Console.WriteLine("Simple Properties");

    // Create a new Person object:
    Person person = new Person();

    // Print out the name and the age associated with the person:
    Console.WriteLine("Person details - {0}", person);

    // Set some values on the person object:
    person.Name = "Joe";
    person.Age = 99;
    Console.WriteLine("Person details - {0}", person);

    // Increment the Age property:
    person.Age += 1;
    Console.WriteLine("Person details - {0}", person);
}
} 
```

程序的输出是这样的：

```
Simple Properties
Person details - Name = N/A, Age = 0
Person details - Name = Joe, Age = 99
Person details - Name = Joe, Age = 100 
```

现在我知道 {0} 实际上是一个引用代码的一部分的占位符，在这种情况下它是“人”，但我不明白这部分是如何：

```
public override string ToString()
{
    return "Name = " + Name + ", Age = " + Age;
} 
```

列在“人”下。我看不到与“姓名”和“年龄”之间的联系。有人可以突出显示建立连接的代码部分并可能对其进行解释（如果要求不多的话）？非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T01:53:53.647

您正在使用 .Net 的字符串格式化服务（允许您编写`{0}`.

.Net 将`ToString()`在您传递的每个对象上调用该方法，以将其转换为字符串。（如果它已经是一个字符串，`string.ToString()`只会返回自己）
由于您在类中覆盖了该`ToString()`方法，因此系统会调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T01:59:58.870

您正在使用字符串格式。有`WriteLine`一个重载，其中第一个参数是一个格式字符串，所以你正在做同样的事情：

```
Console.WriteLine(String.Format("Person details - {0}", person)); 
```

该`Format`方法获取值参数并将它们转换为字符串，然后将它们插入到格式字符串中。将任何内容转换为字符串的标准方法是调用`ToString`每个对象都有的方法。如果您想指定某物变成字符串时的样子，请覆盖该`ToString`方法。

因此，最后代码的作用与以下相同：

```
Console.WriteLine("Person details - " + person.ToString()); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-02T02:02:51.597

严格来说，这不是您问题的答案-其他人在下面解释了如何`ToString()`涉及。我在这里添加它是因为您说您是 C# 新手。

我建议不要使用这种`{0}`方式来格式化你的字符串 - 这是一种非常缓慢的做事方式，它只是在 C# 中安抚那些期望类似于`printf()`. 执行起来要快得多

```
Console.WriteLine ( "Age: " + Age.ToString() ); 
```

当您使用`{0}`等时，该`Format()`函数（及其接受此输入样式的变体）首先必须解析输出以检测各种格式选项，然后仍将各种字符串连接在一起。

（在我看来，格式化样式也更难阅读，`{0}`因为如果您的格式字符串中有 5-6 个输入参数，则很难在字符串后面的参数列表中找到匹配的输入参数。这只是个人喜好，但这里有一个例子来证明这一点）：

```
Console.WriteLine ( "Details: 1.Age: {0}\n2.First Name: {1}\n3.Last Name: {2}\n",
    FirstName, LastName, Age ); 
```

你能发现错误吗？这只有 3 个参数 - 使用 5-6（在生产代码中很常见）很难阅读这种格式。但同样，这是个人喜好。

# facebook-graph-api - 我看到这里发生的事情，真的发生在这里吗？

> ID：12232863
> 
> 赞同：-1
> 
> 时间：2012-09-02T01:52:35.723
> 
> 标签：facebook-graph-api

我在 FB 上管理了几个页面，我们最近被一个所谓的假页面击中。

[http://www.facebook.com/pages/Duke-St-Rollins/478408292178951](http://www.facebook.com/pages/Duke-St-Rollins/478408292178951)

该页面应该是该用户的副本：

[http://www.facebook.com/DukeStRollins](http://www.facebook.com/DukeStRollins)

然而。当我输入这个时，`Graph.facebook.com/478408292178951`我得到了这个返回：

```
{
   "name": "Duke St. Rollins",
   "is_published": true,
   "talking_about_count": 2,
   "category": "Public figure",
   "id": "478408292178951",
   "link": "http://www.facebook.com/pages/Duke-St-Rollins/478408292178951",
   "likes": 2
} 
```

当我输入这个时，`graph.facebook.com/Duke-St-Rollins`我得到了这个返回：

```
{
   "name": "Duke St. Rollins",
   "is_published": true,
   "username": "DukeStRollins",
   "about": "World famous troll and nemesis of teabaggers.",
   "bio": "Press!\n\nhttp://blogs.phoenixnewtimes.com/bastard/2012/07/duke_st_rollins_on_jan_brewer.php \n\nhttp://madmikesamerica.com/2012/07/an-interview-with-duke-st-rollins/\n\nYouTube Channel\nhttp://www.youtube.com/channel/UC_xk6GQzKacHImYl3Vns4VQ\n",
   "personal_info": "Follow me on Twitter  ",
   "talking_about_count": 6450,
   "category": "Public figure",
   "id": "204170076355643",
   "link": "http://www.facebook.com/DukeStRollins",
   "likes": 9459,
   "cover": {
      "cover_id": 261500633955920,
      "source": "http://sphotos-a.xx.fbcdn.net/hphotos-ash4/s720x720/376513_261500633955920_779910133_n.jpg",
      "offset_y": 92
   }
} 
```

如果我理解这是如何正常工作的，并且做得对，这是否意味着所谓的“假”FB页面实际上是由“真正的”公爵拥有的？

如果我有这个错误（我希望我有），有人可以慢慢向我解释一下，就像你在和一个孩子说话一样，因为我对做 FB 页面的东西完全陌生，直到昨天，甚至都不知道`graph.facebook`这些东西。

把我当成菜鸟。因为我是。但我真的很想知道我认为我所看到的是否是我所害怕的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T10:52:56.453

不，它们不一样。前者是页面/公众人物。后者是用户。您可以通过它们的不同 ID 来区分它们 (478408292178951 / 204170076355643)。它们共享相同的名称但不能共享相同的图形 api 地址，因为连字符被忽略（尝试[http://graph.facebook.com/Duke-------------StRollins](http://graph.facebook.com/Duke-------------StRollins)），这意味着DukeStRollins 和 Duke-St-Rollins 实际上是相同的。

我认为这是 API 的一个小故障：按名称查询应该能够区分这两种资源，即使连字符 - 是它们名称之间的唯一区别；这不仅使欺骗者更容易迷惑人们。

您可能已经看过这个：[https ://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T23:26:56.790

在[http://www.facebook.com/pages/Duke-St-Rollins/478408292178951](http://www.facebook.com/pages/Duke-St-Rollins/478408292178951)中，“Duke-St-Rollins”只是 Facebook 使用页面标题名称创建的虚拟名称。您可以使用任何东西代替它来将您重定向到同一页面。以下链接都会将您重定向到[http://www.facebook.com/pages/Duke-St-Rollins/478408292178951](http://www.facebook.com/pages/Duke-St-Rollins/478408292178951)

1.  [http://www.facebook.com/pages/page-name/478408292178951](http://www.facebook.com/pages/page-name/478408292178951)
2.  [http://www.facebook.com/pages/page-title-name/478408292178951](http://www.facebook.com/pages/page-title-name/478408292178951)
3.  [http://www.facebook.com/pages/dummy-name/478408292178951](http://www.facebook.com/pages/dummy-name/478408292178951)
4.  [http://www.facebook.com/478408292178951](http://www.facebook.com/478408292178951)（请注意，此处 facebook 将 478408292178951 识别为页面的用户名，因为页面尚未设置其用户名）

在另一个页面中，[http://www.facebook.com/Duke-St-Rollins](http://www.facebook.com/Duke-St-Rollins) “Duke-St-Rollins”是页面设置的用户名，因此它使用“dukesrollins”作为 facebook 图形节点来识别页面. （请注意，用户名中的任何点或连字符将被自动删除）下面的所有链接将您重定向到[http://www.facebook.com/DukeStRollins](http://www.facebook.com/DukeStRollins)

1.  [http://www.facebook.com/duke.st.rollins](http://www.facebook.com/duke.st.rollins)
2.  [http://www.facebook.com/dukesrollins](http://www.facebook.com/dukestrollins)
3.  [http://www.facebook.com/Duke-StRollins](http://www.facebook.com/Duke-StRollins)
4.  [http://www.facebook.com/204170076355643](http://www.facebook.com/204170076355643)
5.  [http://www.facebook.com/pages/some-thing-here/204170076355643](http://www.facebook.com/pages/some-thing-here/204170076355643)

# android - 通讯录应用程序如何处理平板电脑上的标签？

> ID：12232872
> 
> 赞同：0
> 
> 时间：2012-09-02T01:54:04.770
> 
> 标签：android, android-fragments, android-viewpager

我正在为手机和平板电脑编写应用程序。像联系人应用程序一样，有多个选项卡（在我的例子中是 2 个）。对于手机 UI，它们由 ViewPager 管理，每个选项卡都有一个片段。

但是对于平板 UI，每个选项卡都是一个活动，而不是一个片段。它们必须是，因为您不能将片段放入片段中。（对？）

我意识到我可以只调用`setContentView()`选项卡侦听器，但是每次更改活动时不会破坏活动吗？我对很多事情感到困惑。

在不破坏手机用户界面的情况下，最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T04:39:46.903

设计良好的选项卡式 UI 从不将活动用于选项卡内容。

您是正确的，因为您不能在当前实现中嵌套片段，但这并不意味着您唯一的选择是活动。选项卡应始终充当视图开关；选项卡切换永远不会创建导航历史记录，并且选项卡导航应该始终发生在同一个活动中。

请记住，从 MVC 的角度来看，活动和片段只是控制器。它们的存在是为了响应生命周期事件并管理应用程序的元素以响应这些事件，包括 UI 中的视图。UI 的内容完全由当前窗口的视图层次结构决定，您可以以任何对您的应用有意义的方式操作视图层次结构。（虽然最好仍然遵循设计指南！）

由于 Fragment 具有用于管理视图子层次结构的内置机制，因此它们通常是分解 UI 的自然选择，但它们不是唯一的方法。ViewPager PagerAdapters 可以通过从资源系统中膨胀视图子层次结构来操作视图子层次结构，以 ListView 的方式回收视图，或者您可以提出的任何其他机制，如果不需要它们提供的生命周期事件，则根本不使用 Fragments。不同的布局资源可以根据屏幕大小使用针对不同资源限定符的不同布局变体来包含或排除某些元素。

简而言之，不要认为 Fragments 是实现多窗格 UI 的唯一方法，或者是实现 ViewPager 的每个页面的唯一方法。它们是两者的强大选项，但根据您的 Activity 的信息架构，您可能会发现自己使用它们的方式与其他应用程序不同，这没关系。

总体而言，如果您在分解 Activity 的 UI 时无法确定逻辑切点在哪里，那么您可能正在为您的应用程序构建一个整体 UI，该 UI 使用起来将与实现起来一样尴尬。让 UI 设计指导您的实现。如果每个选项卡都自然地切换出 Activity 窗口的全部内容，那么每个选项卡都可能非常适合片段。也许平板模式下的那些 Fragment 扩展了它们的功能，并使用不同的布局资源在各自的布局中呈现了多个窗格。

# php - PHP：我是否将事件驱动编程与信号感知接口（信号和插槽/观察者模式）混为一谈？

> ID：12232874
> 
> 赞同：19
> 
> 时间：2012-09-02T01:54:30.733
> 
> 标签：php, oop, design-patterns, signals, event-driven

我看到很多人说 Symfony2、Zend Framework 2 等都是事件驱动的。

在桌面世界中，通过事件驱动编程，我了解到应用程序将在其状态发生变化时通知其观察者。

由于 PHP 应用程序是无状态的，因此无法做到这一点。IE 在用户使用界面时让观察者绑定到视图观察变化。相反，它需要一个新的请求进程来更新视图。所以，**这不是一个事件，而是一个全新的请求**。

另一方面有一个类似的概念：事件驱动架构。

在这里你可以阅读：

[http://en.wikipedia.org/wiki/Event-driven_programming](http://en.wikipedia.org/wiki/Event-driven_programming)

[http://en.wikipedia.org/wiki/Event-driven_architecture](http://en.wikipedia.org/wiki/Event-driven_architecture)

这里是另一个：

[http://en.wikipedia.org/wiki/Signal_programming](http://en.wikipedia.org/wiki/Signal_programming)

> 信号是对发生事件的进程的通知。信号有时被描述为软件中断。信号类似于硬件中断，因为它们会中断程序的正常执行流程。在大多数情况下，无法准确预测信号何时到达。
> 
> *   Stackoverflow [singals] 标签说明

而且，我以前所说的事件驱动，似乎和Qt引入的Signals and Slots Pattern（观察者模式实现）有更多的关系

例如，普拉多框架声称是事件驱动的：

[http://www.pradosoft.com/demos/quickstart/?page=Fundamentals.Applications](http://www.pradosoft.com/demos/quickstart/?page=Fundamentals.Applications)（应用程序生命周期部分）

[http://www.pradosoft.com/docs/manual/System/TApplication.html#methodonEndRequest](http://www.pradosoft.com/docs/manual/System/TApplication.html#methodonEndRequest)

IIRC，这不是一个事件驱动的应用程序，而只是实现`observable Interface`. 我的意思是，考虑到桌面应用程序使用事件的方式和无状态应用程序使用事件的方式（作为插件）：第一次使用整个应用程序的事件，包括视图，最后一次仅用于服务器端操作。

一种与面向方面的编程（带有信号和槽）更相关，另一种与**横切关注点**/AOP 无关。换句话说，它与应用程序状态更相关。

那么，这些术语之间的关系实际上是什么以及它们之间的区别是什么？

1.  事件驱动编程
2.  事件驱动架构
3.  信号和槽模式

这些术语只是通用模式吗？因此，所有实现观察者模式的东西都可以被认为是事件驱动的吗？

**更新**

Zend 框架 2

> 我在上面链接的关于 AOP 的文章（[http://mwop.net/blog/251-Aspects,-Filters,-and-Signals,-Oh,-My!.html](http://mwop.net/blog/251-Aspects,-Filters,-and-Signals,-Oh,-My!.html)）由 Matthew Weier O'Phinney 撰写（采埃孚领导者）。IIRC，它没有提到“事件驱动”，只是信号和插槽。

Symfony 2

> Symfony2`EventDispatcher`组件描述没有提到“事件驱动”应用程序： [http](http://symfony.com/doc/current/components/event_dispatcher/introduction.html) ://symfony.com/doc/current/components/event_dispatcher/introduction.html 它只包含对“事件”的引用（确实，由信号和插槽处理）。

两个框架似乎都在 Signal 和 Slots 中使用 Intercepting Filter Pattern 来处理请求过程中的同步事件。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-02T23:55:10.537

> **免责声明：**这是一个很长的答案，但我认为它的所有参考资料都值得一读。恕我直言，它导致了一个确凿的答案。

过去几天我一直在努力解决这个问题，如果我没看错的话，答案是：

> **事件驱动！== 请求驱动**
> 
> “[...] 我发现这是事件协作中最有趣的区别，套用 Jon Udell 的话说：请求驱动的软件在说话时说话，事件驱动的软件在有话要说时说话。
> 
> 这样做的结果是管理状态的责任发生了变化。在请求协作中，您努力确保每条数据都有一个归宿，如果需要，您可以从该归宿进行查找。这个家负责数据的结构，存储多长时间，如何访问它。在事件协作场景中，欢迎新数据源在传递到其消息端点的第二秒忘记数据。”
> 
> Martin Fowler -[活动协作（查询部分）](http://martinfowler.com/eaaDev/EventCollaboration.html)

基于该断言，IIRC，现代 PHP 框架实现了观察者模式 + 拦截过滤器 + 信号和插槽，以便在请求周期中触发一些事件。

但是，尽管它采用了一些事件驱动架构的思想，但似乎并不支持整个框架是事件驱动的（即 Symfony2 是一个事件驱动的框架）。

> 我们习惯于将程序分成多个协作的组件。（我在这里故意使用模糊的“组件”一词，因为在这种情况下，我的意思很多：包括程序中的对象和通过网络进行通信的多个进程。）使它们协作的最常见方式是请求/响应样式. 如果客户对象想要来自销售员对象的一些数据，它会调用销售员对象上的一个方法来向它询问该数据。
> 
> 另一种协作方式是事件协作。在这种风格 **中，您永远不会有一个组件要求另一个组件做任何事情**，而是当任何事情发生变化时，每个组件都会发出一个事件。其他组件侦听该事件并根据他们的意愿做出反应。著名的观察者模式是事件协作的一个例子。
> 
> Martin Fowler -[关注事件（部分：使用事件进行协作）](http://martinfowler.com/eaaDev/EventNarrative.html)

我认为 PHP 应用程序更接近于事件驱动而不是请求驱动，**只有当焦点放在事件上时**。如果这些应用程序/框架仅将事件用于横切关注点 (AOP)，那么它就不是事件驱动的。同样，您不会仅仅因为您有一些域对象和单元测试而将其称为测试驱动或域驱动。

# 现实世界的例子

我选择了一些例子来说明为什么这些框架不是完全事件驱动的。尽管有 AOP 事件，但一切都是**请求驱动的**：

> 注意：虽然，它可以适应事件驱动

## Zend 框架 2

让我们检查一下[\Zend\Mvc\Application](https://github.com/zendframework/zf2/blob/master/library/Zend/Mvc/Application.php)组件：

它实现了[\Zend\EventManager\EventManagerAwareInterface](https://github.com/zendframework/zf2/blob/master/library/Zend/EventManager/EventManagerAwareInterface.php)并依赖于描述可能事件的[\Zend\Mvc\MvcEvent ：](https://github.com/zendframework/zf2/blob/master/library/Zend/Mvc/MvcEvent.php)

```
class MvcEvent extends Event
{
    /**#@+
     * Mvc events triggered by eventmanager
     */
    const EVENT_BOOTSTRAP      = 'bootstrap';
    const EVENT_DISPATCH       = 'dispatch';
    const EVENT_DISPATCH_ERROR = 'dispatch.error';
    const EVENT_FINISH         = 'finish';
    const EVENT_RENDER         = 'render';
    const EVENT_ROUTE          = 'route';

    // [...]
} 
```

[\Zend\Mvc\Application](https://github.com/zendframework/zf2/blob/master/library/Zend/Mvc/Application.php)组件本身是事件驱动的，因为它不直接与其他组件通信，而是仅触发事件：

```
/**
 * Run the application
 *
 * @triggers route(MvcEvent)
 *           Routes the request, and sets the RouteMatch object in the event.
 * @triggers dispatch(MvcEvent)
 *           Dispatches a request, using the discovered RouteMatch and
 *           provided request.
 * @triggers dispatch.error(MvcEvent)
 *           On errors (controller not found, action not supported, etc.),
 *           populates the event with information about the error type,
 *           discovered controller, and controller class (if known).
 *           Typically, a handler should return a populated Response object
 *           that can be returned immediately.
 * @return ResponseInterface
 */
public function run()
{
    $events = $this->getEventManager();
    $event  = $this->getMvcEvent();

    // Define callback used to determine whether or not to short-circuit
    $shortCircuit = function ($r) use ($event) {
        if ($r instanceof ResponseInterface) {
            return true;
        }
        if ($event->getError()) {
            return true;
        }
        return false;
    };

    // Trigger route event
    $result = $events->trigger(MvcEvent::EVENT_ROUTE, $event, $shortCircuit);
    if ($result->stopped()) {
        $response = $result->last();
        if ($response instanceof ResponseInterface) {
            $event->setTarget($this);
            $events->trigger(MvcEvent::EVENT_FINISH, $event);
            return $response;
        }
        if ($event->getError()) {
            return $this->completeRequest($event);
        }
        return $event->getResponse();
    }
    if ($event->getError()) {
        return $this->completeRequest($event);
    }

    // Trigger dispatch event
    $result = $events->trigger(MvcEvent::EVENT_DISPATCH, $event, $shortCircuit);

    // Complete response
    $response = $result->last();
    if ($response instanceof ResponseInterface) {
        $event->setTarget($this);
        $events->trigger(MvcEvent::EVENT_FINISH, $event);
        return $response;
    }

    $response = $this->getResponse();
    $event->setResponse($response);

    return $this->completeRequest($event);
} 
```

那是事件驱动的：你不知道将使用哪个路由器、调度程序和视图渲染器的代码，你只知道这些事件将被触发。您可以挂钩几乎任何兼容的组件来侦听和处理事件。组件之间没有直接的通信。

但是，需要注意一件重要的事情：这是表示层（控制器 + 视图）。领域层确实可以是事件驱动的，但并非您看到的几乎所有应用程序都是如此。**事件驱动和请求驱动混合在一起：

```
// albums controller
public function indexAction()
{
    return new ViewModel(array(
        'albums' => $this->albumsService->getAlbumsFromArtist('Joy Division'),
    ));
} 
```

控制器组件不是事件驱动的。它直接与服务组件通信。**相反，服务应该订阅由控制器引发的事件，控制器**是表示层的一部分。（我将在此答案的末尾指出有关什么是事件驱动的域模型的参考资料）。

## Symfony 2

现在让我们在 Symfony2 Application/FrontController 上检查相同的内容：[\Symfony\Component\HttpKernel\HttpKernel](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpKernel/HttpKernel.php)

它确实有请求期间的主要事件：[Symfony\Component\HttpKernel\KernelEvents](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpKernel/KernelEvents.php)

```
/**
 * Handles a request to convert it to a response.
 *
 * Exceptions are not caught.
 *
 * @param Request $request A Request instance
 * @param integer $type    The type of the request (one of HttpKernelInterface::MASTER_REQUEST or HttpKernelInterface::SUB_REQUEST)
 *
 * @return Response A Response instance
 *
 * @throws \LogicException If one of the listener does not behave as expected
 * @throws NotFoundHttpException When controller cannot be found
 */
private function handleRaw(Request $request, $type = self::MASTER_REQUEST)
{
    // request
    $event = new GetResponseEvent($this, $request, $type);
    $this->dispatcher->dispatch(KernelEvents::REQUEST, $event);

    if ($event->hasResponse()) {
        return $this->filterResponse($event->getResponse(), $request, $type);
    }

    // load controller
    if (false === $controller = $this->resolver->getController($request)) {
        throw new NotFoundHttpException(sprintf('Unable to find the controller for path "%s". Maybe you forgot to add the matching route in your routing configuration?', $request->getPathInfo()));
    }

    $event = new FilterControllerEvent($this, $controller, $request, $type);
    $this->dispatcher->dispatch(KernelEvents::CONTROLLER, $event);
    $controller = $event->getController();

    // controller arguments
    $arguments = $this->resolver->getArguments($request, $controller);

    // call controller
    $response = call_user_func_array($controller, $arguments);

    // view
    if (!$response instanceof Response) {
        $event = new GetResponseForControllerResultEvent($this, $request, $type, $response);
        $this->dispatcher->dispatch(KernelEvents::VIEW, $event);

        if ($event->hasResponse()) {
            $response = $event->getResponse();
        }

        if (!$response instanceof Response) {
            $msg = sprintf('The controller must return a response (%s given).', $this->varToString($response));

            // the user may have forgotten to return something
            if (null === $response) {
                $msg .= ' Did you forget to add a return statement somewhere in your controller?';
            }
            throw new \LogicException($msg);
        }
    }

    return $this->filterResponse($response, $request, $type);
} 
```

但是除了“事件能力”之外，它还直接与 ControllerResolver 组件通信，因此从请求过程开始它就不是完全事件驱动的，尽管它会触发一些事件并允许一些组件是可插入的（事实并非如此）作为构造函数参数注入的 ControllerResolver ）。

相反，要成为一个完全事件驱动的组件，它应该像 ZF2 应用程序组件一样：

```
 // Trigger dispatch event
    $result = $events->trigger(MvcEvent::EVENT_DISPATCH, $event, $shortCircuit); 
```

## 普拉多

我没有足够的时间研究源代码，但起初它似乎并没有以[SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)方式构建。无论哪种方式，什么是类似 MVC 的框架上的控制器，Prado 将其称为 TPage（尚不确定）：

[http://www.pradosoft.com/demos/blog-tutorial/?page=Day3.CreateNewUser](http://www.pradosoft.com/demos/blog-tutorial/?page=Day3.CreateNewUser)

它确实直接与组件通信：

```
class NewUser extends TPage
{
    /**
     * Checks whether the username exists in the database.
     * This method responds to the OnServerValidate event of username's custom validator.
     * @param mixed event sender
     * @param mixed event parameter
     */
    public function checkUsername($sender,$param)
    {
        // valid if the username is not found in the database
        $param->IsValid=UserRecord::finder()->findByPk($this->Username->Text)===null;
    }
    [...]
} 
```

我知道这`TPage`是一个事件监听器，可以插入。但它不会使您的域模型成为事件驱动的。所以我认为，在某种程度上，它更接近于 ZF2 的提议。

# 事件驱动的例子

为了完成这个冗长的答案，下面是一个成熟的事件驱动应用程序应该具备的：

使用域事件解耦应用程序 [http://www.whitewashing.de/2012/08/25/decoupling_applications_with_domain_events.html](http://www.whitewashing.de/2012/08/25/decoupling_applications_with_domain_events.html)

事件采购 [http://martinfowler.com/eaaDev/EventSourcing.html](http://martinfowler.com/eaaDev/EventSourcing.html)

领域事件模式 [http://martinfowler.com/eaaDev/DomainEvent.html](http://martinfowler.com/eaaDev/DomainEvent.html)

活动协作 [http://martinfowler.com/eaaDev/EventCollaboration.html](http://martinfowler.com/eaaDev/EventCollaboration.html)

事件拦截 [http://martinfowler.com/bliki/EventInterception.html](http://martinfowler.com/bliki/EventInterception.html)

消息端点 [http://www.enterpriseintegrationpatterns.com/MessageEndpoint.html](http://www.enterpriseintegrationpatterns.com/MessageEndpoint.html)

... 等等

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-02T05:11:31.443

PHP 不是无状态的，HTTP 是。简单地说，我们基本上在无状态技术之上构建了一个层，我们可以在该层上实现有状态设计。总而言之，PHP 和您选择的数据存储拥有所需的所有工具，可以通过会话的标记化构建基于事件驱动模式的应用程序设计。

以一种高度概括的方式，您可以将 HTTP 视为用于 Web 的，就像 BIOS 用于桌面计算一样。事实上，只要稍微深入一点，您就可以很容易地看到 Web 隐含的事件驱动性质。你说“这不是一个事件，而是一个全新的请求”，我回过头来说，“一个全新的请求*是*一个事件”，我的意思是在设计模式的意义上。它具有与用户与应用程序交互相关的具体语义含义。

本质上，通过 MVC 和 Front Controller 等模式（以及通过 HTTP cookie 和 PHP 会话的机制），我们只需恢复会话状态，然后响应事件，相应地修改该状态。

我喜欢思考 REST 的本质：具象状态转移……但我要补充一点，我们不应该忘记仅在 UI 事件发生时才转移状态的隐含含义。因此，我们维护与 HTTP 签订的合同，我们仅在模型的“表示状态”（即文档、JSON 等）中“说话”，但这只是我们的方言。其他系统选择在画布坐标、信号数据库等中说话。

# 编辑/更多想法

所以我一直在思考它，我认为有一个概念可以说明在通过 HTTP 讨论 PHP 领域中的这些模式时有点模棱两可：确定性。具体来说，一旦接收到请求，PHP 执行的路径是确定的，这正是为什么在 PHP 中考虑“事件驱动”架构非常困难的原因。我的想法是，我们应该考虑比 PHP 更高的一个级别，即与用户交互的更大“会话”。

在桌面计算中，我们使用运行循环和有状态的上下文来“等待”事件。但是，我会争辩说，网络实际上是对这种架构的改进（在大多数情况下），但最终**是相同的模式**。*当事件发生时*，我们引导我们的状态，然后处理该事件，而不是运行循环和无限持续时间的状态。我们不只是将该状态保存在内存中并等待下一个事件，而是存档该状态并关闭资源。在某种意义上它可以被认为效率较低（我们需要在每个“事件”处加载状态），但它也可以被称为更高效，因为内存中永远不会无缘无故地*空闲状态。*我们只加载*实际被消费/操作的状态*

因此，通过这种方式，将通过 HTTP 的 PHP 视为*宏观*层面的事件驱动，同时确保任何给定的执行确实是确定性的，而不是真正的事件驱动。但是，我们实现了前端控制器和 MVC 模式，以便我们可以为应用程序开发人员提供熟悉的偶数驱动挂钩*结构*。当您使用一个体面的框架时，您只需说“我想知道用户何时注册，并且该用户应该可供我修改”。这是事件驱动的开发。你不应该担心框架已经引导环境（几乎）唯一的目的是调用你的钩子（相对于更传统的概念，即环境已经存在并且你*只是*通知事件）。这就是以事件驱动的方式开发 PHP 的意义所在。控制器确定（基于请求）哪个*事件*正在发生，并使用它设计使用的任何机制（即观察者模式、钩子架构等）来允许您的代码处理事件、响应事件或任何命名法最适合您的特定框架的语义。

# php - 写入数据库时 出错

> ID：12232877
> 
> 赞同：0
> 
> 时间：2012-09-02T01:56:02.520
> 
> 标签：php, mysql

我正在使用 php 将一些数据写入数据库。99% 的时间，数据被正确写入数据库。但有时，空白数据被插入到数据库中。我不认为这是我的代码的问题，因为我大部分时间都可以将数据写入数据库。

如果数据库所在的服务器的互联网连接速度很慢，或者用户的电脑上的互联网连接速度很慢，会发生这种情况吗？

实际上有一个小错误..似乎空白的数据来自会话变量。会话变量如何在某个时间被空白？

这是将数据存储到会话变量中的代码：

```
if(!preg_match('/^[a-zA-Z0-9._\-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/', $email))
$count = 2;
if(!preg_match('/^[A-Za-z0-9]{6}+$/',$key))
$count = 2;
if(!$count)
{
$result = mysql_query("SELECT * FROM test WHERE verify = '$key' AND email = '$email'");
$count = mysql_num_rows($result);
if($count == 1)
 {
  $row = mysql_fetch_row($result);
  $_SESSION['id'] = $row[0];
  $_SESSION['name'] = $row[1];
  $_SESSION['email'] = $email;
  $_SESSION['pass'] = $row[3];
  $_SESSION['key'] = $key;
  mysql_close();
 }
} 
```

当它发生时，所有 5 个变量 id、name、email、pass 和 key 都变为空白。电子邮件和密钥不是从数据库中获取的。关键字段仅包含字母数字内容。那么有没有办法从数据库中获取的数据以及 GET 变量中的数据变为空白？（但即便如此 $count 应该是 1）。因为，只有当 $count 为 1 时，才能将数据写入新表（空白处）

有2种形式。当用户完成第一个表单时，该数据将存储在表测试中，并向他们发送验证邮件。从验证链接中，我找到了他们的密钥和电子邮件，并检查了表格测试，看看它们是否有效。如果它们有效（这意味着 $count 为 1 ），则会向用户显示一个新表单，要求他们输入更多详细信息。然后将所有数据（这个新数据，以及写入表 test 的数据）写入一个新表。

这就是事情出错的地方。新数据完美写入新表。但是，存储在表 test 中并复制到会话变量中的旧数据有时会变为空白。我已经在上面发布了它的代码，展示了会话变量是如何设置的。

如果有人能指出我的错误，如果我的代码有问题，那将很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T02:07:32.907

程序员至少有五种策略来确保将数据写入数据库。

1.  在编写之前检查变量的内容是否合理。
2.  设计数据库以拒绝不良数据。
3.  陷阱错误。他们全部。
4.  回读你刚刚写的。
5.  写入日志文件的详细模式。

# python - Linux 上使用 Python 的平板电脑压力

> ID：12232880
> 
> 赞同：1
> 
> 时间：2012-09-02T01:56:31.713
> 
> 标签：python, linux, usb, tablet

有没有一种简单的方法可以在 Linux 上使用 python 从 USB 平板电脑获取笔压数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T06:31:19.530

您可以通过读取输入设备节点上的输入事件来做到这一点。我写了一些模块来做到这一点。你可以在[Pycopia](https://github.com/kdart/pycopia3/blob/master/core/pycopia/OS/Linux/Input.py)项目中找到它。

这样做的缺点是您的程序必须以 root 身份运行。

powerdroid项目也使用这个，但现在是旧代码[。](https://github.com/kdart/powerdroid)[您可以在设备](https://github.com/kdart/powerdroid/blob/master/src/droid/devices.py)模块中看到另一个合成触摸输入的示例。它可能不再起作用，但您可以从它开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T01:59:18.057

尝试使用 PySide，它是一个 QT Wrapper：[QTabletEvent](http://www.pyside.org/docs/pyside/PySide/QtGui/QTabletEvent.html#PySide.QtGui.QTabletEvent)。

或者你可以使用 Python 和 PyGame：[这里。](http://www.akeric.com/blog/?page_id=798)

# python - Python嵌套的json对象被序列化为str

> ID：12232882
> 
> 赞同：2
> 
> 时间：2012-09-02T01:57:12.023
> 
> 标签：python, json, simplejson

嗨，我制作了一个自定义 JSONEncoder，碰巧遇到了这个问题。当我使用`dumps`simplejson 的函数时，嵌套对象被序列化为字符串。例如我使用这个：

```
simplejson.dumps({'lat': obj.lat, 'lon': obj.lon}) 
```

得到这个：

```
{
website: "http://something.org",
location: "{"lat": 12.140158037163658, "lon": -86.24754807669069}"
} 
```

如果您看到位置对象带有双引号，有没有一种方法可以指定要正确转储为 JSON 对象的位置对象（不带双引号）。

**编辑**

```
class jsonEncoder(simplejson.JSONEncoder):
    def default(self, obj):
        isinstance(obj, db.GeoPt):
            return simplejson.dumps({'lat': obj.lat, 'lon': obj.lon})

        else:
            return simplejson.JSONEncoder.default(self, obj) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T07:18:13.820

当 obj 是 db.GeoPt 时，不要从 default() 返回字符串。相反，返回带有键 'lat' 和 'lon' 的字典，并让 JSON 库序列化字典。

尝试这个：

```
class jsonEncoder(simplejson.JSONEncoder):
    def default(self, obj):
        if isinstance(obj, db.GeoPt):
            return {'lat': obj.lat, 'lon': obj.lon}
        else:
            return simplejson.JSONEncoder.default(self, obj) 
```

# css - 如何防止这个 DIV 背景随着浏览器窗口移动？

> ID：12232884
> 
> 赞同：0
> 
> 时间：2012-09-02T01:57:50.450
> 
> 标签：css, html, joomla, background

我有一个正在开发的网站：http: [//digitaldemo.net/sadj/](http://digitaldemo.net/sadj/)

如果您查看它，整个页面背景是带有汽车的图像。然后标题由该高速公路标志图像组成，角落横幅覆盖它。

困境是，如果您调整浏览器窗口的大小，标志会滑到角落横幅后面。我需要他们留在原地。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T02:13:07.330

在 template.css 文件（第 156 行）中添加以下代码`.nav-signs { }`

```
min-width: 1340px; 
```

您当然可以将像素值更改为您认为最好的值。

基本上，这定义了某物的最小宽度，因此不能做得更小。当您将浏览器尺寸缩小时，它会考虑`min-width`到它，一旦达到 1340 像素就不会再移动它。

希望这可以帮助。

# c# - MVC：MultiSelectList 对象引用未设置为对象的实例

> ID：12232885
> 
> 赞同：0
> 
> 时间：2012-09-02T01:58:16.050
> 
> 标签：c#, asp.net-mvc, nullreferenceexception

我试图在我的部分视图中绑定一个 ListBox，但我得到了异常......

> 你调用的对象是空的。

参考`@Html.ListBoxFor(x => x.SelectedRoles, Model.Roles)`

我不确定我做错了什么......

模型：

```
public class RegisterModel {
    public string UserName { get; set; }
    public string Email { get; set; }
    public string Password { get; set; }
    public string ConfirmPassword { get; set; }
    public string[] SelectedRoles { get; set; }
    public MultiSelectList Roles { get; set; }
} 
```

控制器：

```
public class AdminController : Controller  {
    [ChildActionOnly]
    public ActionResult _AddUser() {
        var model = new RegisterModel {
            Roles = new MultiSelectList(Roles.GetAllRoles())
        };

        return View(model);
    }

} 
```

PartialView _AddUser.cshtml：

```
@model RobotDog.Models.RegisterModel

@using(Html.BeginForm("_AddUser","Admin", FormMethod.Post)) {
    @Html.EditorFor(x => x.Email, new { @class = "input-xlarge", @placeholder = "Email"})
    @Html.EditorFor(x => x.UserName, new { @class = "input-xlarge", @placeholder = "User Name"})
    @Html.EditorFor(x => x.Password, new { @class = "input-xlarge", @placeholder = "Password"})
    @Html.ListBoxFor(x => x.SelectedRoles, Model.Roles)
} 
```

这是引用 _AddUser.cshtml Users.cshtml 的视图：

```
@model IEnumerable<RobotDog.Models.UserModel>
<table></table>
<div id="addUser">
    @Html.Partial("_AddUser", new ViewDataDictionary())
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T02:59:02.637

您的示例的问题在于，通过调用 @Html.Partial 您正在渲染部分 _AddUser 而无需通过控制器 _AddUser 方法。这意味着局部视图的 Model 没有可供访问的 Model.Roles。您可以通过几种不同的方式解决此问题。

一种可能性是使用@Html.RenderAction 或@Html.Action 来调用控制器方法，并让控制器方法_AddUser 按照您的设置填充值。

# java - Liferay：如何在 MailServiceUtil 中为附件指定 CID（以便它们可以嵌入（即图像）在 HTML 内容电子邮件中）

> ID：12232889
> 
> 赞同：1
> 
> 时间：2012-09-02T01:58:43.827
> 
> 标签：java, email, liferay, mime-message

附件需要像这样添加

```
MailMessage.addAttachment(File file, [String fileName]) 
```

，但内部似乎 fileName 仅用于 MimeBodyPart.setFileName()

我无论如何都找不到使用

```
MimeBodyPart.setContentID("myID") or MimeBodyPart.setHeader("Content-ID", "myID"); 
```

功能，所以我可以使用嵌入在邮件中的图像

```
<img src='CID:MyID'> 
```

似乎 MailEngine 位于门户 jar 中，因此仅供内部使用，我无法找到 MailServiceUtil 的解决方案。这是否意味着我需要从头开始解码所有 Liferay 高级 API 并使用 Java Mail API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-12-21T15:11:48.863

我认为 Liferay 没有办法做到这一点（至少在 6.2 版中没有）。但我使它与标准的 Java 方法一起工作。以下与 Liferay 界面非常相似。

```
public void send(TemplateEmailerMailMessage mailMessage) throws UnsupportedEncodingException {
    Properties properties = System.getProperties();
    Session session = Session.getDefaultInstance(properties);

    try {
        MimeMessage message = new MimeMessage(session);
        message.setFrom(new InternetAddress(mailMessage.getFromEmail(), mailMessage.getFromName()));
        message.addRecipient(Message.RecipientType.TO, new InternetAddress(mailMessage.getTo()));
        message.setSubject(mailMessage.getSubject());

        if (mailMessage.isHtmlFormat()) {
            message.setText(mailMessage.getBody(), "text/html");
        } else {
            message.setText(mailMessage.getBody());
        }

        // create container for attachments and body parts
        Multipart multipart = new MimeMultipart();

        // Create the message part
        BodyPart messageBodyPart = new MimeBodyPart();
        messageBodyPart.setContent(mailMessage.getBody(), "text/html; charset=UTF-8");

        multipart.addBodyPart(messageBodyPart);

        // add attachments one by one
        for (File file : mailMessage.getFileAttachments()) {
            BodyPart messageAttachmentPart = new MimeBodyPart();
            DataSource source = new FileDataSource(file);
            messageAttachmentPart.setDataHandler(new DataHandler(source));
            messageAttachmentPart.setFileName(file.getName());
            // set Content-ID so it is recognized by <img src="cid: ... ">
            messageAttachmentPart.setHeader("Content-ID", "<" + file.getName() + ">");
            multipart.addBodyPart(messageAttachmentPart);
        }

        // Send the complete message parts
        message.setContent(multipart);

        // Send message
        Transport.send(message);
    } catch (MessagingException mex) {
        mex.printStackTrace();
    }
} 
```

消息对象

```
public class TemplateEmailerMailMessage {

   private String fromEmail;

   private String fromName;

   private String to;

   private String body;

   private String subject;

   private boolean htmlFormat;

   private List<File> fileAttachments = new ArrayList<>();

   public void addAttachment(File file) {
       fileAttachments.add(file);
   }

   public String getBody() {
       return body;
   }

   public void setBody(String body) {
       this.body = body;
   }

   public String getSubject() {
       return subject;
   }

   public void setSubject(String subject) {
       this.subject = subject;
   }

   public boolean isHtmlFormat() {
       return htmlFormat;
   }

   public void setHtmlFormat(boolean htmlFormat) {
       this.htmlFormat = htmlFormat;
   }

   public List<File> getFileAttachments() {
       return fileAttachments;
   }

   public void setFileAttachments(List<File> fileAttachments) {
       this.fileAttachments = fileAttachments;
   }

   public String getFromEmail() {
       return fromEmail;
   }

   public void setFromEmail(String fromEmail) {
       this.fromEmail = fromEmail;
   }

   public String getFromName() {
       return fromName;
   }

   public void setFromName(String fromName) {
       this.fromName = fromName;
   }

   public String getTo() {
       return to;
   }

   public void setTo(String to) {
       this.to = to;
   }

   public void setFrom(String fromEmail, String fromName) {
       this.fromEmail = fromEmail;
       this.fromName = fromName;
   }

} 
```

# vb.net - 在没有类实例的情况下获取 PropertyInfo

> ID：12232899
> 
> 赞同：0
> 
> 时间：2012-09-02T02:00:50.700
> 
> 标签：vb.net, reflection

我已经开始使用反射并且对获取`PropertyInfo`.

我做了这样的事情，它的工作原理：

```
Dim x as New MyClass
Dim prop as PropertyInfo = x.GetType.GetProperty("Name") 
```

我不明白为什么我必须有一个类的实例才能从中获取属性。如果`GetType`返回一个 Type 对象，为什么我不能只引用类型本身？

```
Dim prop as PropertyInfo = GetType(MyClass).GetProperty("Name") 
```

或者

```
Dim prop as PropertyInfo = MyClass.GetType.GetProperty("Name") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T02:13:23.247

```
Dim prop as PropertyInfo = GetType(MyClass).GetProperty("Name") 
```

这是完全正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-02T00:14:44.717

更安全的方法：

```
Dim prop as PropertyInfo = GetType(MyClass).GetProperty(NameOf(MyClass.MyProperty)) 
```

# python - 如何使用柏林噪声 python 制作二维地图

> ID：12232901
> 
> 赞同：1
> 
> 时间：2012-09-02T02:01:32.100
> 
> 标签：python, pyglet, terrain, perlin-noise

我一直在尝试为我用 Python 制作的自上而下的 RPG 制作随机地图。（和 Pyglet）到目前为止，我一直在从 0,0 开始并沿随机方向前进 500 次（x+=32 或 y -=32 之类的东西）来制作岛屿，但这看起来不太像真实图像所以我看了一下 Perlin Noise 方法。我如何从中获得随机生成的地图：/（最好是一个岛屿），它是否比随机方向方法更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T04:54:47.723

可以轻松生成 perlin 地图......它只是一个二维数组值（通常为 0 - 255），您只需要选择一个高于该阈值的阈值（例如 126）并渲染您的土地正方形。否则会使水

这样的事情可能会有所帮助 [http://simblob.blogspot.com/2010/01/simple-map-generation.html](http://simblob.blogspot.com/2010/01/simple-map-generation.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T20:33:30.897

您还可以使用 1d perlin 噪声来计算从每个点到岛“中心”的半径。它应该很容易实现，但它会产生更多的圆形岛屿，并且不会给每个点不同的高度。

# php - .htaccess 在本地主机上给出 500 错误

> ID：12232907
> 
> 赞同：4
> 
> 时间：2012-09-02T02:02:56.060
> 
> 标签：php, apache, .htaccess

我是 MVC 框架的初学者。我正在尝试根据教程创建一个我自己的。

他们提供的 .htaccess 文件包含：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^(.+)$ index.php?url=$1 [QSA, L] 
```

我收到 500 服务器错误：服务器遇到内部错误，无法完成您的请求。服务器过载或 CGI 脚本中存在错误。

我检查了 httpd.conf 以检查 mode_rewrite 是否没有被评论。任何人都可以帮助我吗？我在 Ubuntu 12.04 上使用 LAMPP

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T03:51:44.967

```
RewriteRule ^(.+)$ index.php?url=$1 [QSA, L] 
```

变成：

```
RewriteRule ^(.+)$ index.php?url=$1 [QSA,L] 
```

注意，“[QSA, L]”与 [QSA,L]

重复你的错误，删除空间，工作）。我正在使用 WAMP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T04:01:03.757

尝试 cjriii 的答案，如果这不起作用，请检查 httpd.conf 文件中的 AllowOverride 变量，并确保它显示为 All 而不是 None。当我第一次开始使用 mod_rewrite 时，这也让我大吃一惊。

# java - 使用数据网格源 2 的错误挂毯

> ID：12232909
> 
> 赞同：0
> 
> 时间：2012-09-02T02:03:58.773
> 
> 标签：java, datagrid, error-handling, tapestry

继续[教程](http://www.packtpub.com/article/tapestry-5-advanced-components)我遇到了一个错误。以前的问题似乎已经[解决](https://stackoverflow.com/questions/12220936/tapestry-using-data-gridsource)了。

教程说：要使用创建的 CelebritySource，请将以下方法添加到 ShowAll 页面类：

```
public GridDataSource getCelebritySource()
{
return new CelebritySource(dataSource);
} 
```

然后在 ShowAll.tml 模板中更改 Grid 组件的 source 参数：

```
<t:grid t:source="celebritySource" rowsPerPage="5"
row="celebrity" t:model="model"> 
```

运行应用程序。登录查看 ShowAll 页面，一旦显示名人表，您应该会看到以下输出：

准备选择。索引从 0 到 4 属性名称为：null 排序顺序升序：true 获取第 0 行的值 获取第 1 行的值 获取第 2 行的值 获取第 3 行的值 获取第 4 行的值

页面有错误：

> 发生了意外的应用程序异常。
> 
> 异常组装页面 ShowAll 的根组件：无法将“模型”转换为组件参数绑定：表达式“模型”的异常生成管道：类 org.apache.tapestry.pages.ShowAll 不包含名为的属性（或公共字段） '模型'。

从 t:grid 中删除 t:model="model" 后

页面有错误：

> 发生了意外的应用程序异常。
> 
> SetupRender [ShowAll:grid] 中的渲染队列错误：索引：0

外面有人有这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T11:48:27.477

似乎该示例缺少一些代码。尝试将以下内容添加到页面`ShowAll.java`：

```
@Inject
private BeanModelSource beanModelSource;

@Inject
private Messages messages;

public BeanModel<Celebrity> getModel() {
  return beanModelSource.createDisplayModel(Celebrity.class, messages);
} 
```

来自[T5 网格组件参考](http://tapestry.apache.org/current/apidocs/org/apache/tapestry5/corelib/components/Grid.html)：

> 用于标识要呈现的属性和呈现顺序的模型。

以上应该为您创建一个基于公共方法和属性的默认 BeanModel。

# ruby-on-rails - 页面无法在 Heroku 上运行

> ID：12232913
> 
> 赞同：0
> 
> 时间：2012-09-02T02:04:39.303
> 
> 标签：ruby-on-rails

我在 RoR 中制作了一个应用程序，它在本地运行良好，但是当我上传到 Heroku 时，只有一个页面无法运行。这是一个在代码中只有这个的视图：

```
<h1>Listagem</h1>
<% @items.each do |item| %>
<%= link_to item.materia, public_path(item) %>
<% end %>
<br /> 
```

我注意到，如果我删除 public_path(item) 页面可以正常工作，那么，有什么替代方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T05:10:13.717

唯一让我印象深刻的是，你可能拼错了材料

```
<%= link_to item.materia, public_path(item) %> 
```

这会引发异常。您可能还想检查您的[日志](https://devcenter.heroku.com/articles/logging)

# javascript - 在javascript中访问数组中的数组

> ID：12232918
> 
> 赞同：5
> 
> 时间：2012-09-02T02:06:53.507
> 
> 标签：javascript, jquery

我收到 JSON 回复，如下所示：

```
[{
  "order_id": "12",
  "customer": "user user",
  "status": "Pending",
  "date_added": "02\/09\/2012",
  "total": "$500.00",
  "action": [{
    "text": "View",
    "href": "http:\/\/localhost\/oc\/admin\/index.php?route=sale\/order\/info&amp;token=92a80574e5fcbf3e2d021404cfaae1a4&amp;order_id=12"
  }]
}] 
```

看看动作键，它的值又是一个数组。我正在尝试通过以下代码获取操作键值，但它对我显示未定义

```
function (data) {
  if (data) {
    for (var i = 0; i < data.length; i++) {
      $('div.dashboard-content table.list tbody tr:first').before(
        '<tr id="' + 
        data[i]['order_id'] + 
        '"><td class="right">' + 
        data[i]['order_id'] + 
        '</td><td class="left">' + 
        data[i]['customer'] + 
        '</td><td class="left">' + 
        data[i]['status'] + 
        '</td><td class="left">' + 
        data[i]['date_added'] + 
        '</td><td class="right">' + 
        data[i]['total'] + 
        '</td><td class="right"> [<a href="' + 
        data[i]['action']['href'] + '">' + 
        data[i]['action']['text'] + 
        '</a>]</td></tr>'
      );
    }
  }
} 
```

有人可以帮助我吗？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T02:10:35.747

就像你说的，`action`是一个数组。因此，您无法使用`data[i]['action']['href']`. 您必须使用下标来指示您想要的数组的位置。例如，要访问第一个位置，您可以使用：

```
var href = data[i].action[0].href;
var text = data[i].action[0].text; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T02:10:52.613

`action`是一个数组，其中包含一个具有名为 text 的属性的对象。改变：

```
data[i]['action']['text'] 
```

到：

```
data[i]['action'][0]['text'] 
```

# java - 并发编程。使用机器人卡雷尔

> ID：12232922
> 
> 赞同：1
> 
> 时间：2012-09-02T02:07:46.473
> 
> 标签：java, multithreading, class, robot, karel

我在上计算机科学课，我们已经开始使用 Karel the Robot 作为 Java OOP 的介绍。我想同时运行两个 Karel the Robots，执行两个不同的任务。我曾尝试在互联网上查找解决方案，并且我已经成功地制作了一个工作线程，但是，我无法同时运行两个 Karel the Robots。对此并发编程问题的任何帮助将不胜感激。这是我一直在使用的代码：

```
package karel;
import kareltherobot.*;
import kareltherobot.Directions;
import kareltherobot.World;
public class KarelSample implements Directions
{
    public static void main(String [] args)  
    {

          Thread Karelrunner = new Thread();
          Karelrunner.start();
 UrRobot Karel = new UrRobot ( 1,5, North, 2);
 Karel.move();
 Karel.move();
 Karel.putBeeper();
 Karel.turnLeft();
 Karel.move();

}

    static
    {   
    World.setVisible(true);
    World.showSpeedControl(true);

}

    class Karelrunner implements Directions {

        UrRobot Karel2 = new UrRobot(8,8, South, 2);
        Karel2.move();
        Karel2.move();
        Karel2.turnLeft();
        Karel2.turnLeft();
        Karel2.putBeeper();
        Karel2.move();
}

} 
```

我还使用了 Karel J Robot book 的示例，其中线程设置代码如下：

```
public static void main (String [] args)
{ ...

Karelrunner r = new Karelrunner();
World.setupThread(r);

  . . .
} 
```

请以任何方式提供帮助，我正在尝试制作一个多线程并发程序。我是新手，感谢您的时间和关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T18:13:58.373

我做了更多的研究并找到了解决我问题的方法。感谢 kevinsa5 的想法。对于任何可能在 Karel the Robot 或一般情况下对多线程有问题的人，我将在下面发布我的代码。希望它可以帮助您提供一个想法。

```
package karel;
import kareltherobot.*;
import kareltherobot.Directions;
import kareltherobot.World;
public class KarelSample implements Directions
{
    public static void main(String [] args)  
    {
        new Karelrunner(8,8,South,2); 

        UrRobot Karel = new UrRobot (1,3,North,2);

        Karel.move();
        Karel.move();
        Karel.putBeeper();
        Karel.move();
        Karel.turnLeft();
        Karel.move();
    }   

    static
    {   
        World.setVisible(true);
        World.showSpeedControl(true);
    }
}

class Karelrunner extends UrRobot implements Directions 
{
    public Karelrunner (int street, int avenue, Direction direction, int beepers)
    { 
        super ( street, avenue, direction, beepers);
        World.setupThread(this);
    }

    public void run()
    {
        move();
        move();
        putBeeper();
        turnLeft();
        move();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T04:39:47.590

与其考虑线程，或许考虑设置动作之间的延迟会更有帮助。伪代码示例：

```
create karel_one
create karel_two
while(true){
setdelay(0)
karel_one.act()
karel_two.act()
setdelay(10) // or whatever
} 
```

所以看起来他们好像在同时行动。几年前我这样做了，但是（正如你可能想象的那样）机器人 karel 在课堂之外并不是很有用，所以我不记得具体细节了。我认为延迟方法可能是世界的一部分？没有把握。

编辑：您也可以使用这个想法来创建像 turnRight() 这样的“即时”函数，而不是永远等待左转三遍......呃。

# web - 网站重定向到恶意网站，已清理代码

> ID：12232924
> 
> 赞同：1
> 
> 时间：2012-09-02T02:09:34.297
> 
> 标签：web, malware

我有一个被一些恶意软件感染的网站。一开始我注意到网站页面上有一些奇怪的javascript代码，所以我删除了它，几天后一切都很好，但现在谷歌将该网站列为危​​险网站，即使我已经检查了网站代码是否有任何奇怪代码，但我找不到任何东西。

我尝试[了 Sucuri SiteCheck](http://sitecheck.sucuri.net/scanner/)，它检测到重定向到恶意站点。起初我认为它可能是一个 .htaccess 文件正在执行重定向，但我检查了共享服务器上的文件并且没有 .htaccess 文件。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T02:13:17.537

您的主机帐户已被黑客入侵。更改您的托管服务密码。再次检查您的站点代码（每个文件）并查找不属于您的内容。清除浏览器缓存，然后重试。如果您的帐户再次被黑客入侵，请寻找新的托管服务。一旦您确定您的网站是干净的并且您的帐户已得到保护，请让 Google 知道这些问题并请求从他们的可疑列表中删除：

[谷歌支持](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=163633)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T10:36:03.487

检查您的 .htaccess 文件是否有重定向或文件是否包含不需要的恶意 Java 脚本。

# algorithm - 找出数组中元素之间的最小差异

> ID：12232930
> 
> 赞同：30
> 
> 时间：2012-09-02T02:12:39.483
> 
> 标签：algorithm

我有一个具有有限数量值的整数数组。我的工作是找出数组中任意两个元素之间的最小差异。

考虑数组包含

```
4, 9, 1, 32, 13 
```

这里的差异是 4 和 1 之间的最小值，所以答案是 3。

解决这个问题的算法应该是什么。另外，我不知道为什么，但我觉得使用树，这个问题可以相对容易地解决。可以这样做吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-02T02:17:03.917

最小差异将是排序顺序中连续对之间的差异之一。对数组进行排序，并通过相邻数字对寻找最小的差异：

```
int[] a = new int[] {4, 9, 1, 32, 13};
Arrays.sort(a);
int minDiff = a[1]-a[0];
for (int i = 2 ; i != a.length ; i++) {
    minDiff = Math.min(minDiff, a[i]-a[i-1]);
}
System.out.println(minDiff); 
```

[这打印`3`。](http://ideone.com/vMu8Y)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-08-08T22:18:16.457

您可以利用您正在考虑整数来制作线性算法的事实：

1.  第一遍：计算最大值和最小值
2.  第二遍：分配一个长度为 (max - min + 1) 的布尔数组，初始化为 false，并将数组中的每个值的第 (value - min)th 值更改为 true
3.  第三遍：计算布尔数组的真值条目的索引之间的差异。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-03-28T12:43:52.037

虽然所有答案都是正确的，但我想展示负责`n log n`运行时的底层算法。找到两点之间的最小距离或在一维平面中找到最近点的分而治*之的方法。*

通用算法：

[![在此处输入图像描述](../Images/ebd3b1d27b001fe46c44f26407c11e65.png)](https://i.stack.imgur.com/F1Q6b.png)

*   设 m = 中位数 (S)。
*   在 m 处将 S 分为 S1、S2。
*   δ1 = 最近对 (S1)。
*   δ2 = 最近对 (S2)。
*   δ12 是穿过切口的最小距离。
*   返回 δ = min(δ1, δ2, δ12)。

这是我在 Javascript 中创建的示例：

```
// Points in 1-D
var points = [4, 9, 1, 32, 13];

var smallestDiff;

function mergeSort(arr) {
  if (arr.length == 1)
    return arr;

  if (arr.length > 1) {
    let breakpoint = Math.ceil((arr.length / 2));
    // Left list starts with 0, breakpoint-1
    let leftList = arr.slice(0, breakpoint);
    // Right list starts with breakpoint, length-1
    let rightList = arr.slice(breakpoint, arr.length);

    // Make a recursive call
    leftList = mergeSort(leftList);
    rightList = mergeSort(rightList);

    var a = merge(leftList, rightList);
    return a;
  }
}

function merge(leftList, rightList) {
  let result = [];
  while (leftList.length && rightList.length) {
    // Sorting the x coordinates
    if (leftList[0] <= rightList[0]) {
      result.push(leftList.shift());
    } else {
      result.push(rightList.shift());
    }
  }

  while (leftList.length)
    result.push(leftList.shift());

  while (rightList.length)
    result.push(rightList.shift());

  let diff;
  if (result.length > 1) {
    diff = result[1] - result[0];
  } else {
    diff = result[0];
  }

  if (smallestDiff) {
    if (diff < smallestDiff)
      smallestDiff = diff;
  } else {
    smallestDiff = diff;
  }
  return result;
}

mergeSort(points);

console.log(`Smallest difference: ${smallestDiff}`);
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-02T05:35:11.447

我会将它们放在一个堆中，`O(nlogn)`然后一个接一个地弹出并获得我弹出的每个元素之间的最小差异。最后我会有最小的差异。但是，可能有更好的解决方案。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-06-18T18:18:21.907

这实际上是对`closest-pair`问题的重述`one-dimension`。 [https://en.wikipedia.org/wiki/Closest_pair_of_points_problem](https://en.wikipedia.org/wiki/Closest_pair_of_points_problem) [http://www.cs.umd.edu/~samir/grant/cp.pdf](http://www.cs.umd.edu/~samir/grant/cp.pdf)

正如下面引用的维基百科文章所指出的，这个问题的最佳决策树模型也能`Ω(nlogn)`及时运行。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-10-19T13:02:39.537

分享最简单的解决方案。

```
function FindMin(arr) {

    //sort the array in increasing order

    arr.sort((a,b) => {
       return a-b;
    });

    let min = arr[1]-arr[0];

    let n = arr.length;

    for (var i=0;i<n;i++) {

      let m = arr[i+1] - arr[i];
      if(m < min){
        m = min;
      }
    }

    return m; // minimum difference.
  } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-02-24T19:08:02.600

给定的问题可以在 O(n) 时间内轻松解决。看下面我写的代码。

```
 import java.util.Scanner;
    public class Solution {
    public static void main(String [] args) {
        Scanner input = new Scanner(System.in);
        int i, minDistance = 999999;
        boolean flag = false;
        int capacity = input.nextInt();
        int arr[] = new int[capacity];
        for (i = 0; i < capacity; i++) {
            arr[i] = input.nextInt();
        }

        int firstElement = input.nextInt();
        int secondElement = input.nextInt();

        int prev = 0;

        for (i = 0; i < capacity; i++) {
            if (arr[i] == firstElement || arr[i] == secondElement) {
                prev = i;
                break;
            }
        }

        for (; i < capacity; i++) {
            if(arr[i] == firstElement || arr[i] == secondElement) {
                if(arr[i] != arr[prev] && minDistance > Math.abs(i - prev)) {
                    minDistance = Math.abs(i - prev);
                    flag = true;
                    prev = i;
                } else {
                    prev = i;
                }
            }
        }

        if(flag)
            System.out.println(minDistance);
        else
            System.out.println("-1");
    }
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-11-26T17:43:58.690

在 Python 3 中，这个问题可以通过使用模块**itertools**来简化，它提供了可用于列表的组合。从该列表中，我们可以找到每个组合的总和并找到这些值的最小值。

```
import itertools

arr = [4, 9, 1, 32, 13]

if len(arr) > 1:
    min_diff = abs(arr[0] - arr[1])
else:
    min_diff = 0

for n1, n2 in itertools.combinations(arr, 2): # Get the combinations of numbers
    diff = abs(n1-n2) # Find the absolute difference of each combination
    if min_diff > diff:
        min_diff = diff # Replace incase a least differnce found

print(min_diff) 
```

# android - 我的应用程序中的每个活动都添加到应用程序抽屉中

> ID：12232932
> 
> 赞同：1
> 
> 时间：2012-09-02T02:12:53.557
> 
> 标签：android, android-activity, manifest

好吧，就像标题所暗示的那样，我的应用程序中的每个活动都被添加到应用程序抽屉中......我真的很讨厌这个新的 ADT。首先，应用程序名称作为第一个活动名称出现的问题，现在所有活动都显示在应用程序列表中。如果我去卸载它只显示 1\. 其他人有这个问题并想出了一个解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T14:16:08.860

对于未来的情况，您可以在 android 清单中进行更改：

```
<intent-filter>
  <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

改成：

```
<intent-filter>
  <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

这将从应用程序抽屉中删除活动的图标。正如 OP 所说：有时向导会为您将其放入清单中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T02:15:16.960

好的，想通了...每次您通过 adt 向导（New -> Android Activity）创建一个新活动时，它都会在您的清单中为您创建代码......问题是它也向它添加了意图过滤器. 只需删除它们，它们就不会出现....愚蠢的广告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-23T21:04:33.640

我知道当我使用 IntelliJ 作为我的 Android 编程 IDE 时，在使用向导创建一个新的 Activity 时可以检查一个框，上面写着“标记为启动 Activity”。

请注意这些类型的事情，因为这就是导致我遇到与肖恩相同的问题的原因。

我不会完全删除意图过滤器，只需将您想要的活动作为清单文件中标记为“启动器”的“启动”活动。所有其他活动都获得“默认”。

# php - 读取用脚本编辑的文件时出现空字符

> ID：12232938
> 
> 赞同：0
> 
> 时间：2012-09-02T02:13:54.343
> 
> 标签：php, character, whitespace

我有一个简单的格式化/编写脚本，但是每当我保存并阅读它（将其写入`<textarea>`HTML 标记中）时，我都会收到一些奇怪的空字符，例如当您在文本编辑器中按 Tab 之前和之后实际文字。如果我用文本编辑器打开写入的文件，则只有文本。这是我的脚本（仅相关代码）：

```
<?php 
$text = $_POST["info"];
$text = str_replace("\n", "<br />", $text);
$text = preg_replace('/\*([^\*]+)\*/', '<b>\1</b>', $text);
if ($_POST["updateContato"]="updateContato") {
    $file = fopen("./pages/contato.php","w");
    fwrite($file, $text);
    fclose($file);
}
?>
<form action="./?painel" method="post">
    <textarea name="info" class="fullwidth">
    <?php include "./pages/contato.php";?>
    </textarea> <br />
    <input type="checkbox" name="updateContato" value="updateContato" checked style="display:none;height:0;width:0;" />
    <input type="submit" value="Salvar" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T08:47:27.777

如果您使用此代码呈现内容，`<textarea>`则应**将其放在开始和结束标记之间，内容和标记之间没有任何制表符、新行或空格**！

```
<form action="./?painel" method="post">
    <textarea name="info" class="fullwidth"><?php include "./pages/contato.php";?></textarea> <br />
    <input type="checkbox" name="updateContato" value="updateContato" checked style="display:none;height:0;width:0;" />
    <input type="submit" value="Salvar" />
</form> 
```

**另一方面**，您是否使用`return`关键字来返回内容`"./pages/contato.php"`？

因为如果您不这样做，`include "..."`则不是用于返回文本数据的好选择。而是将您的数据保存到常规文件中（在非公共文件夹中），而不是包含它，而是使用以下命令读取它`file_get_contents()`：

```
<form action="./?painel" method="post">
    <textarea name="info" class="fullwidth"><?php echo file_get_contents("./pages/contato.php"); ?></textarea> <br />
    <input type="checkbox" name="updateContato" value="updateContato" checked style="display:none;height:0;width:0;" />
    <input type="submit" value="Salvar" />
</form> 
```

**另一方面**，调用`include "some_script.php"`实际上会**执行脚本**，如果您像示例中那样将内容写入脚本，**则极有可能出现代码/解析错误，并且如果您向公众或您的客户展示此功能，则会带来严重的安全风险**（或者甚至为此自己使用它）。即使您在被调用脚本中使用 return，它仍然是一个重大的安全漏洞。

我强烈建议您`file_get_contents()`改用！

# linux - 为 Hyper-V 编译最小的 Linux 3.5 内核

> ID：12232944
> 
> 赞同：0
> 
> 时间：2012-09-02T02:15:24.350
> 
> 标签：linux, compilation, kernel, hyper-v

我正在寻找为 Hyper-V 编译一个最小的 linux 3.5 内核。

“选择” hyper-v 驱动程序部分非常简单。但是，如何删除不必要的模块/驱动程序并提高性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T02:16:44.057

阅读 Greg Kroah 的 Linux Kernel in a Nutshell

[http://www.kroah.com/lkn/](http://www.kroah.com/lkn/)

# java - 在java的接口中使用实现类型

> ID：12232945
> 
> 赞同：7
> 
> 时间：2012-09-02T02:15:25.443
> 
> 标签：java, generics, interface

我想为实现的类的类型创建一个接口，强制实现它的每个类具有一定的功能。

因此，假设我有类 MyClassA、MyClassB、MyClassC 等，它们都需要自己类型的函数：

在 MyClassA 中：

```
public class MyClassA implements MyClass {
    MyClassA function(MyClassA x) {
        doSomethingImplementedInMyClassA(x);
    }
} 
```

在 MyClassB 中：

```
public class MyClassB implements MyClass {
    MyClassB function(MyClassB x) {
        doSomethingImplementedInMyClassB(x);
    }
} 
```

问题是，如何编写接口`MyClass`来要求这样的功能？

```
public interface MyClass {
    MyClass function(MyClass x);
} 
```

显然不起作用，因为返回类型是 MyClass 而不是它的实现。如何在 Java 中正确执行此操作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-02T02:16:39.847

您可以使用泛型：

```
public interface MyClass<V extends MyClass<V>> {
    V function(V x);
}

public class MyClassA implements MyClass<MyClassA> 
```

这称为[CRTP](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)。

* * *

这并不完美。它仍然允许像

```
public class MyClassB implements MyClass<MyClassA> 
```

要正确执行此操作，您需要Java 不支持的更高种类的类型^([需要引用] 。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T02:40:07.420

如果实现总是在参数上调用一个方法，为什么不将该方法添加到接口中呢？

```
interface MyClass {
    MyClass doSomething();
}

class MyClassA implements MyClass {
    MyClassA doSomething() {
        //implementation here
    }
}

class MyClassB implements MyClass {
    MyClassB doSomething() {
        //implementation here
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T02:45:50.313

在 Java 中做你想做的事情的正确方法是这样的：

首先，您定义包含*抽象方法*的接口，即尚未定义的方法。提醒一下，接口不是类！

```
public interface Animal {
    public Animal reproduceWith(Animal someAnimal);
} 
```

然后定义实现接口的类并覆盖抽象方法，但现在使用您选择的代码实现它。这样，类中唯一相同的就是方法名称。这有效地强制一个类实现某个方法。

```
public class Dog implements Animal {

    @Override
    public Animal reproduceWith(Animal someAnimal) {
        return new Dog();
    }
}

public class Cat implements Animal {

    @Override
    public Animal reproduceWith(Animal someAnimal) {
        return new Cat();
    }
} 
```

之后，您可以例如创建一个*MyInterface*列表并对其进行迭代，即使它是一个不同的类也调用相同的方法。

```
List<Animal> list = new ArrayList<Animal>();
list.add(new Cat());
list.add(new Dog());

Animal cat = new Cat();
Animal dog = new Dog();

for (Animal animal : list) {
    System.out.println(animal.reproduceWith(cat));
    System.out.println(animal.reproduceWith(dog));
} 
```

我希望这可以帮助你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-02T04:01:21.103

您可能需要的是除了接口之外的父类。

我发现一个接口理想地用于定义行为，因此`GroupElementA` **在** `GroupElement`概念上听起来更准确，而不是`GroupElementA` **表现得像** `GroupElement`.

我会考虑使用父类来实现你想要的。

```
/**
 * An abstract group element.
 */
abstract class GroupElement
{
    // attributes of all group elements
}

/**
 * Defines behavior for objects that can be multiplied with
 * GroupElements.
 */
interface GroupElementMultipliable
{
    public GroupElement multiplyBy(GroupElement groupElement);
}

/**
 * Defines behavior for objects that can be divided by
 * GroupElements.
 */
interface GroupElementDivisible
{
    public GroupElement divideBy(GroupElement groupElement);
}

/**
 * An abstract GroupElement that can perform operations like
 * multiplication and division.
 *
 * Then again this class may not be necessary. The interfaces
 * implemented here may actually be directly implemented by
 * GroupElementA. GroupElementA will also be the one to inherit
 * GroupElement.
 */
abstract class OperableGroupElement extends GroupElement
        implements GroupElementMultipliable, GroupElementDivisible
{
    // attributes of all operable group elements
}

/**
 * A concrete GroupElement that can perform operations like
 * multiplication and division.
 */
class GroupElementA extends OperableGroupElement
{
    @Override
    public GroupElementA multiplyBy(GroupElement groupElement)
    {
        // Since we expect to multiply with another GroupElementA
        // we attempt to typcast the groupElement
        GroupElementA groupElementA = (GroupElementA) groupElement;

        // do multiplication operation -- this * groupElementA
        // then return new self
        return this;
    }

    @Override
    public GroupElementA divideBy(GroupElement groupElement)
    {
        // Since we expect to divide by another GroupElementA
        // we attempt to typcast the groupElement
        GroupElementA groupElementA = (GroupElementA) groupElement;

        // do division operation -- this / groupElementA
        // then return new self
        return this;
    }
} 
```

# python - 如何在python中高效地创建全局变量

> ID：12232951
> 
> 赞同：0
> 
> 时间：2012-09-02T02:17:18.993
> 
> 标签：python, variables, global

我有大量需要创建和引用的变量，例如 diceOutCome2、diceOutCome4... diceOutCome12、diceOutComeHornHigh、diceOutComeHornFive 等，我经常需要引用它们，所以我希望将它们存储为全局变量而不是传递它们作为参数。

最重要的是，我也尝试不使用索引号来引用它们，而是使用名称或属性，例如 counter.diceOutCome2 ... 2 这里不是 2 号结果，而是骰子掷出 1 和 1 的结果，四个将存储骰子总数2,2, 1,3 信息等

创建它们的最有效方法和正确语法是什么？

```
def setGlobalVariables():
    counter=[]
    for i in range (0, 12):
        global counter["count_"+i]=0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T02:41:27.290

对于像“diceOutCome2”这样的属性，实际上最好使用带有索引号的列表，比如`counter.diceOutCome[2]`. 这使您可以轻松地遍历所有 diceOutcomes 列表，或者`counter.diceOutCome[n-1]`在 n 为 5 时引用第 5 个骰子结果之前的结果。

[角注](http://en.wikipedia.org/wiki/Craps#Single_roll_bets)可以计算为对象的方法，可以是您之前引用的计数器对象（`counter.highHorn(5)`可以评估高角注的输赢`counter.diceOutcome[5]`），或者用于表示掷骰结果的对象，其中的列表保存在 diceOutCome 中，如`counter.diceOutcome[5].highHorn()`. 或者`HighHorn`可以是`Bet`;的子类 的一个实例`HighHorn`是使用 DiceOutcome 构造的，`HighHorn`并将实现一个`wins()`在 abstract on 中定义的方法，将`Bet`在子类中实现 - 将其评估为`HighHorn(counter.diceOutCome[5]).wins()`. 由于 diceOutcomes 都附加到`counter`，因此这可能是传递给相关方法的逻辑项，或者是定义这些方法的逻辑项。

通常，如果您开始考虑使用尾随数字定义变量名称，例如，将`something1`在您的程序中使用，您必须立即停止并替换为名为 的列表，并使用列表索引（如.`something2``something3``somethings``somethings[2]`

（**注意**- 为了便于交流，我使用基于 1 的索引来对应描述 - 实际上，序列中项目的索引是基于 0 的，因此第 5 项实际上将被引用为`sequence[4]`，它之前的项目是`sequence[4-1], the 1st item being found at`序列[0]`。关键是，这是索引*有意义*的情况，而不是变量名上的数字后缀。）

# ios - UITableView 单元格选择已禁用且 UITableViewHeader 已启用

> ID：12232952
> 
> 赞同：0
> 
> 时间：2012-09-02T02:17:48.637
> 
> 标签：ios, uitableview, uiview

我正在添加我的标题视图

```
 self.tableView.tableHeaderView=headerView; 
```

这个 tableView 有 10 个单元格。

我想禁用单元格选择，但是必须启用**headerView触摸事件。**

为此，我添加了以下代码：

```
self.tableView.userInteractionDisabled=YES;
self.headerView.userInteractionDisabled=NO;
self.headerView.exclusiveTouch=YES; 
```

我哪里错了？

实现的基本思想是，如果启用了**headerView ，则禁用****单元格选择**，反之亦然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T03:23:54.570

我不确定我是否完全理解您的要求，但如果您想避免看到任何单元格突出显示，请将 UITableViewCell selectionStyle 设置为 UITableViewCellSelectionStyleNone。我就是这样做的，然后不实现UITableViewDelegate方法tableView:didSelectRowAtIndexPath:。

我从未尝试过，但我很确定您也可以通过将 UITableView 属性 allowSelection 设置为 NO 来禁止选择任何行。

表视图的 userInteractionDisabled 属性应设置为 NO。否则，作为 tableView 的子视图的 headerView 将不会获得触摸事件。将 superview 的 userInteractionDisabled 属性设置为 no 会禁用其所有子视图的触摸事件。

# java - 刚开始Java，我应该继续7还是6，为Android编写代码？

> ID：12232953
> 
> 赞同：6
> 
> 时间：2012-09-02T02:18:03.197
> 
> 标签：java, android

正如标题所描述的，我开始从各种来源（目前是 youtube 上的播放列表）学习 Java。我已经安装了 JDK 7。

问题是，使用 java 7 作为初学者，我会学到什么在 6 上不起作用的东西吗？语言有什么大的不同吗？

我在网上找到的语言规范和各种东西太难理解了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T02:30:58.103

Android SDK 与 Java 6 兼容，而不是 Java 7。如果您打算编写 Android SDK 代码，那么学习 Java 7 特定的语言功能不会让您受益。

Android SDK 与 JDK 有很多共同点，但不是一回事。有些东西是缺失的，有些东西是添加的。如果你想在 android 上开发，请获取 Android SDK。那么就没有问题了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T02:33:01.690

了解最新信息，节省心理翻译。

几年前我学习了 Java，并发现 Ivor Horton 的 Java 入门是一本非常有用的参考书，我永远保留了它！我看到他达到了 Java 7 版[http://www.wrox.com/WileyCDA/WroxTitle/Ivor-Horton-s-Beginning-Java-Java-7-Edition.productCd-0470404140.html](http://www.wrox.com/WileyCDA/WroxTitle/Ivor-Horton-s-Beginning-Java-Java-7-Edition.productCd-0470404140.html)

Wrox 系列书的魅力在于，即使不看书，也可以下载代码示例，这是一个有用的参考。查看章节大纲，您可以弄清楚作者展示的内容。

如果您可以阅读代码，只需下载示例。

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T02:35:50.037

1) 官方表示，Android 不支持 JDK 7

2) 没什么大不了的 - 无论如何，JDK 7 应该可以在 Android 上正常工作。只需进入 Eclipse 并设置“Java 6”的兼容性。

3) .jar 签名还有一个小问题。它可能已经在最新的 Eclipse/Ant 组合（Eclipse 4.2/Juno）中修复，但解决方法在这里：

*   [使用 Ant 进行 Android 签名](https://stackoverflow.com/questions/8036422/android-signing-with-ant)

4) 底线：如果你有 JDK 7，那么就保留 JDK 7。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T02:27:43.390

JDK是当前的标准版本；6 和 5 已达到其支持寿命的终点。

一定要继续使用 JDK 7。

# php - 在 PHP 中计算具有特定值的子数组的总数

> ID：12232960
> 
> 赞同：1
> 
> 时间：2012-09-02T02:20:33.253
> 
> 标签：php, arrays

```
$example = 
  array
    'test' =>
      array(
        'something' => 'value'
      ),
    'whatever' =>
      array(
        'something' => 'other'
      ),
    'blah' =>
      array(
        'something' => 'other'
      )
  ); 
```

我想计算有多少`$example`的子数组包含一个值为 的元素`other`。

这样做最简单的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T02:24:52.093

[`array_filter()`](http://php.net/manual/en/function.array-filter.php)是你需要的：

```
count(array_filter($example, function($element){

    return $element['something'] == 'other';

})); 
```

如果您想更灵活：

```
$key = 'something';
$value = 'other';

$c = count(array_filter($example, function($element) use($key, $value){

    return $element[$key] == $value;

})); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T02:28:30.390

您可以尝试以下方法：

```
$count = 0;
foreach( $example as $value ) {
    if( in_array("other", $value ) )
        $count++;
} 
```

# javascript - 在两个多选字段之间移动选项

> ID：12232962
> 
> 赞同：3
> 
> 时间：2012-09-02T02:21:12.160
> 
> 标签：javascript, jquery, wtforms

我正在尝试做这样的事情： [https ://stackoverflow.com/a/6256910/1641189](https://stackoverflow.com/a/6256910/1641189)

但是我想用多选字段来做，因为它们提供滚动条。

我不会像上面的答案链接那样让每个项目在单击后立即移动，而是在两个选择字段之间设置两个按钮。

像这样的东西： [http ://www.kj4ohh.com/stuff/selectfields.png](http://www.kj4ohh.com/stuff/selectfields.png)

1.  我将如何在 javascript/jquery 中执行此操作？
2.  如何将两个选择字段的内容返回到我的烧瓶应用程序？

编辑：

我尝试了以下javascript：

```
function assign(form)
{
   for(i=0;i<form.unassigned.length;i++) {
      if (form.unassigned.options[i].selected == true) {
         form.assigned.add(form.unassigned.options[i]);
         form.unassigned.remove(i);
      }
   }
   //unselect all items
   form.assigned.selectedIndex = -1
}

function unassign(form)
{
   for(i=0;i<form.assigned.length;i++) {
      if (form.assigned.options[i].selected == true) {
         form.unassigned.add(form.assigned.options[i]);
         form.assigned.remove(i);
      }
   }
   //unselect all items
   form.unassigned.selectedIndex = -1
} 
```

但结果很奇怪：

使用此脚本，如果您从任一选择字段中选择一个项目并点击相应的分配/取消分配按钮，它就会正常工作。

如果选择两项，则仅移动一项。

如果您选择两个以上，则移动一个，一个保持不动，其余的消失。

但是，如果我添加一个输出当前正在观察的选择的 alert() 行，它将为正确选择的每个项目生成一个警告框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T02:40:26.233

您必须使用 jquery 插件以获得更好的结果

[http://loudev.com/](http://loudev.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T00:01:44.840

你可以试试这个

```
​$(function(){
    $('#toSel1, #toSel2').on('click', function(){
        if($(this).attr('id')=='toSel2')
        {
            var l=$('#sel1 option:selected').length;
            if(!l) { 
                alert("Option not selected !");
                return false;
            }
            $('#sel1 option:selected').each(function(){
                $('#sel2').append($(this));
            });
        }
        else
        {
            var l=$('#sel2 option:selected').length;
            if(!l) { 
                alert("Option not selected !");
                return false;
            }
            $('#sel2 option:selected').each(function(){
                $('#sel1').append($(this));
            });
        }
    });
});​ 
```

[**演示**](http://jsfiddle.net/GWkcq/3/)。

# c# - MVC - 在 SelectBox 索引更改上显示部分视图

> ID：12232963
> 
> 赞同：0
> 
> 时间：2012-09-02T02:21:32.440
> 
> 标签：c#, asp.net-mvc, partial-views

我有一个带有各种键值对的选择框。我想要做的是，当我在选择框中选择一个项目时，我想使用该选定的键值对来显示一个表单（部分视图）并使用基于该选定值的值填充它。我想我需要一个回调到我的控制器或返回部分视图的东西，但不知道如何准确地做到这一点，因为它超出了我一直在使用的典型 MVC 工作流程。任何帮助我研究如何做到这一点的链接将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T02:42:53.980

请参阅此处接受的 SO 答案[Dynamically loading partial view](https://stackoverflow.com/questions/5587485/dynamically-loading-partial-view)。

如果在浏览器中禁用了 javascript，您将需要一个触发器（例如一个按钮）来触发对所有操作的回发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T02:53:40.753

假设您有一个呈现这样的 HTML Select 的视图

```
<select id="states">
  <option value="1">MI</option>
  <option value="2">NY</option>
  <option value="3">CA</option>
</select>
<div id="partialContent"> </div> 
```

我们将捕获此 SELECT 元素的更改事件，并对服务器进行 ajax 调用以获取部分视图内容

```
<Script type="Text/javascript">
 $(function(){
   $("#states").change(function(){
     var stateId=$(this).val();
     $("#partialContent").load("@Url.Action("StateDetails","State")/"+stateId);
   });
 });

</script> 
```

这将通过传递带有值的参数 id 作为 HTML Select 的选定值来进行 ajax GET 调用以从控制器中的`StateDetails`操作方法获取响应。`State`

```
public ActionResult StateDetails(int id)
{
  var stateDetail=myRepositary.GetStateDetail(id);
  return View(stateDetail);
} 
```

# sql - SQL查找事件的最后日期和最后时间

> ID：12232967
> 
> 赞同：2
> 
> 时间：2012-09-02T02:23:52.313
> 
> 标签：sql

我正在尝试列出最新事件（仅输出一行）

基本上是事件的最后日期和事件的最后时间。

下面的代码如果是 max(starttime) 则不起作用，但如果是 min(starttime) 则有效

但是，如果我做 min(starttime)，它会告诉我事件的最后日期，但最后日期的第一个事件。

我想得到最后一个日期的最后一个事件时间的结果。（因此只有 1 行输出）

有任何想法吗？

```
SELECT * from Events
where dateheld in (select max(dateheld) from events)
AND starttime in (select max(starttime) from events) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T02:30:39.843

问题似乎是逻辑，因为您的 WHERE 语句可能会生成两个不相交的集合（表的 max(time) 不与 max(date) 共享一行）。像下面这样的东西呢：（DISTINCT 确保只有一个记录）

```
SELECT MAX(dateheld) AS 'MaxDate', starttime 
FROM Events
WHERE starttime in 
      (SELECT MAX (starttime) AS temp FROM events) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T02:33:31.337

您可以将结果限制为返回的前 1 条记录：

```
select * from events
order by dateheld, starttime desc
limit 1 
```

**编辑以满足新要求**

```
select max(starttime) as maxstart, dateheld
from events
where dateheld = (select max(dateheld) as maxdateheld from events) 
```

# ruby-on-rails - 调试 Heroku 部署（500 错误）

> ID：12232969
> 
> 赞同：1
> 
> 时间：2012-09-02T02:24:09.957
> 
> 标签：ruby-on-rails, ruby-on-rails-3, deployment, heroku

在过去的几个晚上，我一直在努力将我的第一个 rails 应用程序部署到 heroku，并且正在努力弄清楚如何解决这个问题。

我使用 Michael Hartl 的教程 (http://ruby.railstutorial.org/chapters/beginning#sec-deploying) 来确保我在 Cedar Stack 上设置了我的应用程序。

根据 Heroku 教程，我使用“瘦”作为服务器。

我已经阅读了一堆帖子并使用以下方法预编译了我的资产：

heroku run bundle exec rake assets:precompile bundle exec rake assets:precompile

我还迁移了我的数据库。

我的应用程序在我的本地主机上运行。

这是我的宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'
gem 'bootstrap-sass', '2.0.0'
gem 'bcrypt-ruby'
gem 'thin'

group :development, :test do
  gem 'rspec-rails'
end

group :development do
  gem 'sqlite3'
end

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :production do
  gem 'pg'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

group :test do
  gem 'capybara'
  gem 'factory_girl_rails'
end 
```

这是我的heroku日志

```
2012-09-02T01:56:17+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-09-02T01:56:20+00:00 app[web.1]: => Booting Thin
2012-09-02T01:56:20+00:00 app[web.1]: => Rails 3.2.8 application starting in production on http://0.0.0.0:50510
2012-09-02T01:56:20+00:00 app[web.1]: => Call with -d to detach
2012-09-02T01:56:20+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-09-02T01:56:20+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2012-09-02T01:56:21+00:00 app[web.1]: >> Thin web server (v1.4.1 codename Chromeo)
2012-09-02T01:56:21+00:00 app[web.1]: >> Maximum connections set to 1024
2012-09-02T01:56:21+00:00 app[web.1]: >> Listening on 0.0.0.0:50510, CTRL+C to stop
2012-09-02T01:56:21+00:00 heroku[web.1]: State changed from starting to up
2012-09-02T01:56:23+00:00 app[web.1]: 
2012-09-02T01:56:23+00:00 app[web.1]: 
2012-09-02T01:56:23+00:00 app[web.1]: Started GET "/" for 108.210.1.241 at 2012-09-02 01:56:23 +0000
2012-09-02T01:56:23+00:00 app[web.1]: Processing by StaticPagesController#home as HTML
2012-09-02T01:56:23+00:00 app[web.1]:   Rendered static_pages/home.html.erb within layouts/application (14.9ms)
2012-09-02T01:56:23+00:00 app[web.1]: Completed 500 Internal Server Error in 103ms
2012-09-02T01:56:23+00:00 app[web.1]: ActionView::Template::Error (screen.css isn't precompiled):
2012-09-02T01:56:23+00:00 app[web.1]: 
2012-09-02T01:56:23+00:00 app[web.1]:     2: <html>
2012-09-02T01:56:23+00:00 app[web.1]:     3: <head>
2012-09-02T01:56:23+00:00 heroku[router]: GET morning-inlet-9513.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=262ms status=500 bytes=643
2012-09-02T01:56:23+00:00 app[web.1]:     4:   <title>GabisBag</title>
2012-09-02T01:56:23+00:00 app[web.1]: 
2012-09-02T01:56:23+00:00 app[web.1]:     5:   <%= stylesheet_link_tag    "screen", :media => "screen" %>
2012-09-02T01:56:23+00:00 app[web.1]: 
2012-09-02T01:56:23+00:00 app[web.1]:   app/views/layouts/application.html.erb:5:in `_app_views_layouts_application_html_erb__1090905269972481286_30934000'
2012-09-02T01:56:23+00:00 app[web.1]:     6:   <%= stylesheet_link_tag    "landing_pages", :media => "screen" %>
2012-09-02T01:56:23+00:00 app[web.1]:     7:   <%= javascript_include_tag "application" %>
2012-09-02T01:56:23+00:00 app[web.1]:     8:   <%= csrf_meta_tags %>
2012-09-02T02:05:54+00:00 heroku[api]: Starting process with command `bundle exec rake assets:precompile` by jflores1@alumni.nd.edu
2012-09-02T02:05:57+00:00 heroku[run.1]: Awaiting client
2012-09-02T02:05:57+00:00 heroku[run.1]: Starting process with command `bundle exec rake assets:precompile`
2012-09-02T02:05:58+00:00 heroku[run.1]: State changed from starting to up
2012-09-02T02:06:14+00:00 heroku[run.1]: Client connection closed. Sending SIGHUP to all processes
2012-09-02T02:06:15+00:00 heroku[run.1]: Process exited with status 0
2012-09-02T02:06:15+00:00 heroku[run.1]: State changed from up to complete
2012-09-02T02:08:22+00:00 heroku[slugc]: Slug compilation started
2012-09-02T02:08:37+00:00 heroku[api]: D
eploy 6817a8e by jflores1@alumni.nd.edu
2012-09-02T02:08:37+00:00 heroku[api]: Release v8 created by jflores1@alumni.nd.edu
2012-09-02T02:08:38+00:00 heroku[web.1]: State changed from up to starting
2012-09-02T02:08:38+00:00 heroku[slugc]: Slug compilation finished
2012-09-02T02:08:40+00:00 heroku[web.1]: Starting process with command `bundle exec rails server thin -p 42652 -e production`
2012-09-02T02:08:41+00:00 heroku[web.1]: Stopping all processes with SIGTERM
2012-09-02T02:08:41+00:00 app[web.1]: Exiting
2012-09-02T02:08:42+00:00 heroku[web.1]: Process exited with status 0
2012-09-02T02:08:44+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-09-02T02:08:44+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-09-02T02:08:47+00:00 app[web.1]: => Booting Thin
2012-09-02T02:08:47+00:00 app[web.1]: => Rails 3.2.8 application starting in production on http://0.0.0.0:42652
2012-09-02T02:08:47+00:00 app[web.1]: => Call with -d to detach
2012-09-02T02:08:47+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-09-02T02:08:47+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2012-09-02T02:08:48+00:00 app[web.1]: >> Thin web server (v1.4.1 codename Chromeo)
2012-09-02T02:08:48+00:00 app[web.1]: >> Maximum connections set to 1024
2012-09-02T02:08:48+00:00 app[web.1]: >> Listening on 0.0.0.0:42652, CTRL+C to stop
2012-09-02T02:08:49+00:00 heroku[web.1]: State changed from starting to up
2012-09-02T02:08:50+00:00 app[web.1]: Started GET "/" for 108.210.1.241 at 2012-09-02 02:08:50 +0000
2012-09-02T02:08:50+00:00 app[web.1]: 
2012-09-02T02:08:50+00:00 app[web.1]: 
2012-09-02T02:08:50+00:00 app[web.1]: Processing by StaticPagesController#home as HTML
2012-09-02T02:08:50+00:00 app[web.1]:   Rendered static_pages/home.html.erb within layouts/application (9.3ms)
2012-09-02T02:08:50+00:00 app[web.1]: Completed 500 Internal Server Error in 77ms
2012-09-02T02:08:50+00:00 app[web.1]: 
2012-09-02T02:08:50+00:00 app[web.1]: ActionView::Template::Error (screen.css isn't precompiled):
2012-09-02T02:08:50+00:00 app[web.1]:     2: <html>
2012-09-02T02:08:50+00:00 app[web.1]:     3: <head>
2012-09-02T02:08:50+00:00 app[web.1]:     4:   <title>GabisBag</title>
2012-09-02T02:08:50+00:00 app[web.1]:     5:   <%= stylesheet_link_tag    "screen", :media => "screen" %>
2012-09-02T02:08:50+00:00 app[web.1]:     6:   <%= stylesheet_link_tag    "landing_pages", :media => "screen" %>
2012-09-02T02:08:50+00:00 app[web.1]:     7:   <%= javascript_include_tag "application" %>
2012-09-02T02:08:50+00:00 app[web.1]:     8:   <%= csrf_meta_tags %>
2012-09-02T02:08:50+00:00 app[web.1]:   app/views/layouts/application.html.erb:5:in `_app_views_layouts_application_html_erb__3619394764979485472_40067220'
2012-09-02T02:08:50+00:00 app[web.1]: 
2012-09-02T02:08:50+00:00 app[web.1]: 
2012-09-02T02:08:50+00:00 heroku[router]: GET morning-inlet-9513.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=221ms status=500 bytes=643
2012-09-02T02:14:08+00:00 heroku[api]: Starting process with command `bundle exec rake db:migrate` by jflores1@alumni.nd.edu
2012-09-02T02:14:10+00:00 heroku[run.1]: Awaiting client
2012-09-02T02:14:10+00:00 heroku[run.1]: Starting process with command `bundle exec rake db:migrate`
2012-09-02T02:14:11+00:00 heroku[run.1]: State changed from starting to up
2012-09-02T02:14:17+00:00 heroku[run.1]: Client connection closed. Sending SIGHUP to all processes
2012-09-02T02:14:18+00:00 heroku[run.1]: Process exited with status 0
2012-09-02T02:14:18+00:00 heroku[run.1]: State changed from up to complete
2012-09-02T02:14:35+00:00 app[web.1]: 
2012-09-02T02:14:35+00:00 app[web.1]: Started GET "/" for 108.210.1.241 at 2012-09-02 02:14:35 +0000
2012-09-02T02:14:35+00:00 app[web.1]: 
2012-09-02T02:14:35+00:00 app[web.1]: Processing by StaticPagesController#home as HTML
2012-09-02T02:14:35+00:00 app[web.1]:   Rendered static_pages/home.html.erb within layouts/application (0.5ms)
2012-09-02T02:14:35+00:00 app[web.1]: Completed 500 Internal Server Error in 2ms
2012-09-02T02:14:35+00:00 app[web.1]: 
2012-09-02T02:14:35+00:00 app[web.1]: ActionView::Template::Error (screen.css isn't precompiled):
2012-09-02T02:14:35+00:00 app[web.1]:     2: <html>
2012-09-02T02:14:35+00:00 app[web.1]:     3: <head>
2012-09-02T02:14:35+00:00 app[web.1]:     4:   <title>GabisBag</title>
2012-09-02T02:14:35+00:00 app[web.1]:     5:   <%= stylesheet_link_tag    "screen", :media => "screen" %>
2012-09-02T02:14:35+00:00 app[web.1]:     6:   <%= stylesheet_link_tag    "landing_pages", :media => "screen" %>
2012-09-02T02:14:35+00:00 app[web.1]:     7:   <%= javascript_include_tag "application" %>
2012-09-02T02:14:35+00:00 app[web.1]:     8:   <%= csrf_meta_tags %>
2012-09-02T02:14:35+00:00 app[web.1]:   app/views/layouts/application.html.erb:5:in `_app_views_layouts_application_html_erb__3619394764979485472_40067220'
2012-09-02T02:14:35+00:00 app[web.1]: 
2012-09-02T02:14:35+00:00 app[web.1]: 
2012-09-02T02:14:35+00:00 heroku[router]: GET morning-inlet-9513.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=11ms status=500 bytes=643 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T02:48:41.153

这看起来像重要的部分：

```
ActionView::Template::Error (screen.css isn't precompiled): 
```

好像[这个线程](https://stackoverflow.com/questions/7275636/rails-3-1-0-actionviewtemplateerrror-application-css-isnt-precompiled)会解决你的问题。

正如它所说：

```
On heroku server (readonly filesystem), If you want runtime compilation of css (its not recommended but you can do it), make sure you have done settings like below -

# inside config/application.rb
config.assets.enabled = true
config.assets.prefix = Rails.root.join('tmp/assets').to_s

# If you are using sass then keep gem outside of asset group
 gem 'sass-rails',   '3.1.4'

# inside config/environments/production.rb
config.assets.compile = true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T01:09:48.657

我在这里找到了答案：[blueprint css rails 3.1 help](https://stackoverflow.com/questions/7300532/blueprint-css-rails-3-1-help)

据我所知，这似乎是使用 Blueprint CSS 框架的问题。也就是说，还有两个注意事项：

1.  我从 application.html.erb 布局文件中注释掉了 <%= stylesheet_link_tag "screen", :media=>"screen"%> 代码。
2.  我没有安装“rubyracer”gem。我安装它是因为它位于引用答案的配置文件中。我不知道它做了什么。
3.  URL 斜杠（“/”）现在在我有链接的地方再次出现。我的预感是它是我将不得不深入研究和调试的 CSS 文件之一。但是，我首先拥有 stylesheet_link_tag 的全部原因是因为我试图摆脱那些讨厌的斜线。最终，我决定部署更重要。

希望这对其他人有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T14:17:58.627

这是我最终解决问题的方法。感谢那些把我推荐到别处的人，这样我就可以把它们放在一起。

首先，我将蓝图移至供应商目录。我认为这对解决方案并不重要，但感觉更干净。

**编译问题：**

这个线程：[blueprint css rails 3.1 help](https://stackoverflow.com/questions/7300532/blueprint-css-rails-3-1-help)真的很有帮助。我发现 Martin 和 Gary 的回答（第 2 和第 3 条）比选定的回答更有帮助。

我（个人）在编译时遇到问题的部分原因是我对蓝图文件进行了一些编辑，这意味着在部署之前需要再次编译它们。

这个线程：[rails 3.1.0 ActionView::Template::Error (application.css is not precompiled)](https://stackoverflow.com/questions/7275636/rails-3-1-0-actionviewtemplateerrror-application-css-isnt-precompiled)在这方面很有帮助。基本上，只需在上传到 heroku 之前运行“Bundle exec rake assets:precompile”。上传后我还运行“heroku run rake assets:precompile”。

**我如何摆脱链接中的 URL 斜杠：** URL 是 Blueprint/print.css 中这段代码的结果：

```
a:link, a:visited {background:transparent;font-weight:700;text-decoration:underline;}
a:link:after, a:visited:after {content:" (" attr(href) ")";font-size:90%;} 
```

我通过注释掉该代码解决了这个问题。当然，更改文件后，您必须再次 rake assets:precompile。但是，这一切都奏效了！

# java - 如何从dist文件夹java中读取文件

> ID：12232972
> 
> 赞同：0
> 
> 时间：2012-09-02T02:25:16.807
> 
> 标签：java

这可能是几个人重复提出的问题，但我在搜索答案后无法理解。

netbeans 在构建操作后创建一个文件夹 dist。我想在该文件夹中放置一个文本文件，jar 文件应该读取文本文件。

目标平台是windows和linux

文件夹的结构，

```
.java file  =  C:\My Documents\NetBeansProjects\Example\src\example
 build folder = C:\My Documents\NetBeansProjects\Example
 build folder contains classes folder. classes folder contains all the class files
 dist folder = C:\My Documents\NetBeansProjects\Example
 dist folder contains the .jar files and i want to place a text file inside this folder 
```

这，

```
 getClass().getClassLoader().getResource("example.txt"); 
```

似乎只有当路径与 .java 文件一起时才有效。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-30T06:15:04.667

要从 jar 中读取一些文件，您应该这样做：

```
getClass().getResourceAsStream("path/to/file"); 
```

请参阅：[通过 getClass().getResource() 加载文件](https://stackoverflow.com/a/14089228/10330374)

# jquery - getJSON 正在从此 API 返回 XML

> ID：12232973
> 
> 赞同：1
> 
> 时间：2012-09-02T02:25:24.810
> 
> 标签：jquery, api, jsonp

这是返回一个 XML 文件并且不允许正常的 .get，我做错了什么？这是他们的指南：[http ://svc.metrotransit.org/NexTrip/help/operations/GetRoutes](http://svc.metrotransit.org/NexTrip/help/operations/GetRoutes)

```
jQuery(document).ready(function($) { 
 var url = "http://svc.metrotransit.org/NexTrip/Routes?callback=?";
  $.getJSON(url, function (data) {
            $('#content').append(data);
  });    
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T02:31:47.530

您需要通过添加到查询字符串来*明确*请求响应格式为 JSON ：`format=json`

```
jQuery(document).ready(function($) { 
  var url = "http://svc.metrotransit.org/NexTrip/Routes?format=json&callback=?";
  $.getJSON(url, function (data) {
    for (var i = 0; i < data.length; i++) {
      $("#content").append(data[i].Description + "<br />");
    }
  });    
}); 
```

**[演示](http://jsfiddle.net/yhqdD/)**。

# php - 如何使用 mysqli_multi_query 识别导致错误的查询？

> ID：12232974
> 
> 赞同：2
> 
> 时间：2012-09-02T02:25:43.190
> 
> 标签：php, mysqli, error-handling, mysqli-multi-query, multiple-select-query

使用 SO 上其他地方的示例来更好地捕捉“隐藏”错误。虽然下面的代码将捕获并返回错误，但是否可以改进它以报告发生错误的查询？

使用下面的代码，输出是：

```
Columns: 18
Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'FRO inventory' at line 1 
```

正在测试的代码：

```
$query = "SELECT * FROM orders WHERE location = 'IN' ORDER BY orderNum DESC LIMIT 20;";
$query .= "SELECT * FRO inventory";             //  With error
$ord = array();
$invent = array();

if(mysqli_multi_query($link, $query)) {
    do {
        // fetch results
        if($result = mysqli_store_result($link)) {
           echo 'Columns: ' . mysqli_field_count($link) . "<br>"; 
           while($row = mysqli_fetch_assoc($result)) {
                if(count($row) > 17)
                    $orders[] = $row;
                elseif(count($row) == 6)
                    $inv[] = $row;
            }
        }
        if(!mysqli_more_results($link))
            break;
        if(!mysqli_next_result($link)) {
            // report error
            echo 'Error: ' . mysqli_error($link);
            break;
        }
    } while(true);
    mysqli_free_result($result);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-18T04:33:14.073

这是一种方法，不仅可以提高错误消息的质量，还可以改进处理结果集的方式。

```
$q["Orders"] = "SELECT * FROM orders WHERE location = 'IN' ORDER BY orderNum DESC LIMIT 20";
$q["Inventory"] = "SELECT * FRO inventory";

if (!$link = mysqli_connect("host", "user", "pass", "db")) {
    echo "Failed to connect to MySQL: " , mysqli_connect_error();
} elseif (mysqli_multi_query($link, implode(';', $q))) {
    do {
        $q_key = key($q);                                 // current query's key name (Orders or Inventory)
        if ($result = mysqli_store_result($link)) {       // if a result set... SELECTs do
            while ($row = mysqli_fetch_assoc($result)) {  // if one or more rows, iterate all
                $rows[$q_key][] = $row;
            }
            mysqli_free_result($result);
            echo "<div><pre>" . var_export($rows[$q_key], true) . "</pre></div>";
        }
    } while (next($q) && mysqli_more_results($link) && mysqli_next_result($link));
}
if ($mysqli_error = mysqli_error($link)) {                // check & declare variable in same step to avoid duplicate func call
    echo "<div style=\"color:red;\">Query Key = " , key($q) , ", Query = " , current($q) , ", Syntax Error = $mysqli_error</div>";
} 
```

**第一次查询时出错**：如果您的第一个查询尝试访问指定数据库中不存在的表，例如：`ordersXYZ` 数组`$rows`将不存在，不会`var_export()`发生，您将看到以下响应：

> 查询键 = 订单，查询 = SELECT * FROM ordersXYZ WHERE location='IN' ORDER BY orderNum DESC LIMIT 20，语法错误 = 表 '[someDB].ordersXYZ' 不存在

**第二个查询错误**：如果您的第一个查询成功，但您的第二个查询尝试访问不存在的表，例如：`inventory2`
`$rows["Orders"]`将保存所需的行数据并将被`var_export()`'ed，`$row["Inventory"]`将不存在，您将看到以下响应：

> 查询键 = Inventory，查询 = SELECT * FROM inventory2，语法错误 = 表 '[someDB].inventory2' 不存在

**没有错误**：如果两个查询都没有错误，您的`$rows`数组将填充所需的数据并`var_export()`'ed，并且不会有错误响应。将查询的数据保存在 中，您可以从和`$rows`中访问您想要的内容。`$rows["Orders"]``$rows["Inventory"]`

* * *

注意事项：

1.  您可能会注意到我同时进行变量声明和条件检查，这使代码更加简洁，但一些开发人员更愿意避免这种情况。

2.  由于我的方法在行`implode()`上使用分号，因此请`elseif`确保不要在查询中添加尾随分号。

3.  这组查询总是返回一个结果集，因为所有查询都是 SELECT 查询，如果您有混合的查询集合，您可以在此链接 ( [https://stackoverflow.com/a/22469722/2943403](https://stackoverflow.com/a/22469722/2943403) )`affect_rows`找到一些有用的信息。

4.  `mysqli_multi_query()`一旦出现错误，将立即停止运行查询。如果您期望捕获“所有”错误，您会发现永远不会超过一个。

5.  不建议像在 OP 的问题和解决方案中那样编写条件断点。虽然在其他情况下可能会正确使用自定义断点，但在这种情况下，断点应位于块的`while()`语句内部。`do()`

6.  返回零行的查询不会导致错误消息——它只是不会在其中创建任何子数组，`$rows`因为`while()`不会进入循环。

7.  通过使用该函数，可以避免计算每个结果集行中的列`key()`的 OP条件。`if/elseif`这是更好的做法，因为在某些情况下，在每次迭代中运行条件可能会变得很昂贵。请注意，数组指针在每次迭代`$q`结束时都在内部前进。`do()`这是您在 php 手册页上找不到的附加技术；它允许`key()`按预期工作。

8.  而且，当然，`<div><pre>var_export()...</pre></div>`可以从您的工作代码中删除该行——这纯粹是为了演示。

9.  如果您要在此代码块之后再运行任何重用变量的查询，请务必清除所有使用的变量，以免残留数据干扰。例如`$mysqli_error=null; // clear errors` & `reset($q); // reset array pointer`。

10.  自行决定注意这个有点模糊的警告： http: [//php.net/manual/en/mysqli.use-result.php](http://php.net/manual/en/mysqli.use-result.php)：

> 如果在客户端执行大量处理，则不应使用 mysqli_use_result()，因为这将占用服务器并阻止其他线程更新从中获取数据的任何表。

11.  最后也是**最重要**的，出于安全原因，不要公开显示查询或查询错误信息——你不希望险恶的人看到这种反馈。同样重要的是，始终保护您的查询免受注入黑客攻击。如果您的查询包括用户提供的数据，您需要在`mysqli_multi_query()`. 事实上，在处理用户输入时，我非常强烈的建议是远离`mysqli_multi_query()`并使用[mysqli](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)或[pdo](https://www.php.net/manual/en/pdo.prepared-statements.php)准备好的语句来进行数据库交互，以获得更高级别的安全性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T16:35:43.037

为了回答我自己的问题，并且由于文档很差，这里有一个解决方案，希望能对其他人有所帮助。缺少的是一种在第一次查询中捕获错误的方法。（mysqli_multi_query的隐藏动作很难理解。）

现在检查 $err 数组中的条目。

```
$q[1] = "SELECT * FROM orders WHERE location = 'IN' ORDER BY orderNum DESC LIMIT 20";
$q[2] = "SELECT * FROM inventory";
$ord = array();
$invent = array();
$err = array();
$c = 1;

if(mysqli_multi_query($link, implode(';', $q))) {
    do {
        // fetch results
        if($result = mysqli_use_result($link))
            while($row = mysqli_fetch_array($result, MYSQLI_ASSOC)) {
                if(count($row) > 17)
                    $orders[] = $row;
                elseif(count($row) == 6)
                    $inv[] = $row;
            }
        }
        $c++;
        if(!mysqli_more_results($link))
            break;
        if(!mysqli_next_result($link) || mysqli_errno($link)) {
            // report error
            $err[$c] = mysqli_error($link);
            break;
        }
    } while(true);
    mysqli_free_result($result);
}
else
    $err[$c] = mysqli_error($link);

mysqli_close($link); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T05:02:45.200

在你的 do 循环中，添加一个计数器，每个成功的 mysqli_next_result 都会增加计数器。一旦 mysqli_next_result 返回 false，也输出计数器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-30T01:42:37.937

这适用于两个查询。

如果错误出现在第一个，则对 PHP 的第一个查询的响应是错误消息，而对于第二个（不会触发），第一个查询的响应是一条消息。

如果错误在第二个，则返回第一个的响应，第二个得到错误消息。

我正在使用关联数组和 nixing 数组元素 [0]。这仅在存在相关错误时才添加 ['Error'] 键。

最后，我不是最好的 PHPer，所以由你来解决丑陋的问题。

```
$query_nbr=0;

if (mysqli_multi_query($link,$query ))
{ 
  do
  { 
    unset($field_info) ;            $field_info = array() ;
    unset($field_names) ;           $field_names = array() ;
    unset($values) ;                $values = array(array()) ;

    if ($result = mysqli_store_result($link))
    { 
      $query_nbr += 1 ; 
      $rows_found = mysqli_num_rows($result);
      $fields_returned = mysqli_num_fields($result);
      $field_info = mysqli_fetch_fields($result);

      $field_nbr=0;
      foreach ($field_info as $fieldstuff)
      { $field_nbr +=1 ;
        $field_names[$field_nbr] = $fieldstuff->name ;
      }

      $now = date("D M j G:i:s T Y") ;

      if ($query_nbr == 1)
      { 
        $result_vector1 = array('when'=>$now) ;
        $result_vector1['nrows']=0;
        $result_vector1['nrows']=$rows_found ;
        $result_vector1['nfields']=$fields_returned ;
        $result_vector1['field_names']=$field_names ;
      }
      else 
      { 
        $result_vector2 = array('when2'=>$now) ;
        $result_vector2['nrows2']=0;
        $result_vector2['nrows2']=$rows_found ;
        $result_vector2['nfields2']=$fields_returned ;
        $result_vector2['field_names2']=$field_names ;
      }

      $row_nbr=0 ;
      while ($row = mysqli_fetch_array($result, MYSQLI_BOTH))
      { 
        $row_nbr++ ;
        for ($field_nbr=1;$field_nbr<=$fields_returned;$field_nbr++)
        {
          $values[$row_nbr][$field_names[$field_nbr]]    =$row[$field_nbr-1] ;
        }
      }
      mysqli_free_result($result) ;

      unset($values[0]) ;
      if ($query_nbr == 1)
      {$result_vector1['values']=$values ;}
      else
      {$result_vector2['values2']=$values ;}

    }  // EO if ($result = mysqli_store_result($link))

  } while (mysqli_more_results($link) && mysqli_next_result($link)) ;

}  // EO  if (mysqli_multi_query($link,$query ))
else 
{
  // This will be true if the 1st query failed
  if ($query_nbr == 0)
  { 
    $result_vector1['Error'] = "MySQL Error #:  ".mysqli_errno($link).":  ".mysqli_error($link) ;
    $result_vector2['Error'] = "MySQL Error in first query." ;
  }

}  // EO MySQL

//  Here we only made it through once, on the 2nd query
if ( $query_nbr == 1 && $nqueries == 2  && empty( $result_vector2 ) )
{
  $result_vector2['Error'] = "MySQL Error #:  ".mysqli_errno($link).":  ".mysqli_error($link) ;
} 
```

# iphone - html5 画布游戏 - 如何添加视网膜支持

> ID：12232979
> 
> 赞同：10
> 
> 时间：2012-09-02T02:27:44.470
> 
> 标签：iphone, html, html5-canvas, retina-display

我正在为 iPhone 创建一个 HTML5 画布游戏。我想同时支持视网膜和非视网膜显示器。

我的问题是，我如何同时支持视网膜和非视网膜显示器？

IE，这样做的一般实现是什么？我是否使用 iPhone 尺寸编写游戏，然后添加视网膜支持？还是我要创建游戏视网膜尺寸并添加非视网膜支持？最好有两张图像，一张视网膜一张非视网膜？或者只是缩小视网膜图像？视网膜和非视网膜是否有单独的画布尺寸？我需要缩放鼠标输入吗？

基本上，我不知道实现两者的一般想法/逻辑。

干杯，J

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-02T17:50:57.747

您使用 devicePixelRatio 将视网膜显示器与普通显示器分开

*   [http://blog.iwalt.com/2010/08/generating-highresolution-graphics-with-html5s-canvas-element.html](http://blog.iwalt.com/2010/08/generating-highresolution-graphics-with-html5s-canvas-element.html)

您的游戏逻辑坐标（精灵位置等）必须独立于屏幕坐标运行，屏幕坐标在视网膜显示器上始终是 2 倍。

您的图形资源必须有两个版本。高分辨率版本和 50% 缩小的普通版本。当您在视网膜显示器上操作时，您绘制 2 倍大小的画布，使用 CSS 调整大小，并在此画布上使用高分辨率资源。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-06T04:05:51.303

一篇关于该主题的新文章刚刚在 html5rocks.com 上发表：

*   [高 DPI 画布](http://www.html5rocks.com/en/tutorials/canvas/hidpi/)

> 通过 devicePixelRatio / webkitBackingStorePixelRatio 增大画布宽度和高度，然后使用 CSS 将其缩小到所需的逻辑像素大小。以 Chrome 报告的 webkitBackingStorePixelRatio 为 1 和 devicePixelRatio 为 2 为例，我们将画布的尺寸缩放 2 / 1，即将它们乘以 2，然后我们将使用 CSS 将其缩小。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-05-07T22:26:56.363

*我知道这现在是一篇旧帖子，但我想我会用我实施的解决方案来更新它。*

* * *

1：我使用了两组图像：

*   一个用于非视网膜显示器（尺寸 1:1），
*   另一组视网膜是两倍大。

取决于正在使用的设备取决于加载的设备。

* * *

2：然后我调整画布的大小（这是它的关键）

**非视网膜**

```
 var canvas = document.createElement('myCanvas');

    canvas.width = 320;
    canvas.height = 480;
    canvas.style.width = "320px";
    canvas.style.height = "480px"; 
```

**视网膜**

```
 var canvas = document.createElement('myCanvas');

    canvas.width = 640;
    canvas.height = 960;
    canvas.style.width = "320px";
    canvas.style.height = "480px"; 
```

请注意，无论您是否使用视网膜， `canvas.style.width`&都是相同的。`height`

* * *

*这就是它的全部内容！*

# asp.net - 向最终用户透明的 PayPal 转账

> ID：12232980
> 
> 赞同：0
> 
> 时间：2012-09-02T02:27:53.390
> 
> 标签：asp.net, paypal

我们目前正在使用 Visual Studio 2010 开发一个 ASP.NET Web 项目，作为一项要求，我们必须实施一种机制，将一些资金从我们的商业账户转移到最终用户的 PayPal 账户。

授权用户应仅提供 PayPal 电子邮件地址。

前提是在不重定向到 PayPal 网站的情况下完成所有工作人员，一切都应该在后台完成。

有什么解决方案可以解决这个问题吗？任何信息将不胜感激。

PS我已经阅读了很多官方文档，但仍然感到失望。API 和服务太多，无法确定到底应该使用什么。

请帮忙……</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T02:41:07.070

如果您使用高级 PayPal 支付解决方案，您可以从您的网站进行透明支付，而无需重定向到 PayPal。此解决方案使用 Web 服务来发送付款。当我前段时间使用它时，它的设置非常简单，您可以获得一个沙盒环境，您可以在其中进行试验。您可能需要一个企业帐户才能使用此特定 API。

[这是一篇描述如何使用它的文章。](http://www.codeproject.com/Articles/42894/Introduction-to-PayPal-for-C-ASP-NET-developers)

# node.js - 如何使用 node.js dns.resolve 函数查找几种记录类型？

> ID：12232981
> 
> 赞同：2
> 
> 时间：2012-09-02T02:28:17.073
> 
> 标签：node.js, dns, lookup, cname

我正在使用[node.js](http://nodemanual.org/0.8.6/nodejs_ref_guide/dns.html#dns.resolve)的 dns.resolve 函数来查找给定域的 NS 和 CNAME 记录。我现在也想获取 TXT 和 SPF 记录。如果我单独做这一切 - 这是四个请求。有没有办法在一个请求中获取所有四种记录类型？

此外，SPF 信息是始终采用 TXT 记录类型还是可以有自己的记录类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T02:39:51.267

我不是 Nodejs 专家，但从外观上看，您似乎将不得不执行四个不同的请求。

> 另外，有没有办法用这个功能查询 SPF 记录，或者我应该使用别的东西吗？

那么根据维基百科，SPF是：

> 发件人策略框架 (SPF) 是一种电子邮件验证系统，旨在通过验证发件人 IP 地址检测电子邮件欺骗（一种常见漏洞）来防止垃圾邮件。SPF 允许管理员通过在域名系统 (DNS) 中创建特定的 SPF 记录（或 TXT 记录）来指定允许哪些主机从给定域发送邮件。邮件交换器使用 DNS 来检查来自给定域的邮件是否由该域管理员批准的主机发送。

您可以自己编写代码，可能是通过查询 TXT 记录然后检查它是否有效。

同样，我对 Nodejs 的了解非常少。

# ruby-on-rails - 新 Rails 3.2.8 项目出错 - `require': 无法加载此类文件 - sqlite3/sqlite3_native (LoadError)

> ID：12232986
> 
> 赞同：1
> 
> 时间：2012-09-02T02:29:21.800
> 
> 标签：ruby-on-rails, ruby, sqlite

我刚刚创建了一个新的 amazon Linux 实例并安装了 ruby​​ 1.9.3 和 rails 3.2.8。

在创建一个新项目后，我立即收到由于 sqlite3 导致的失败。错误是：

```
[root@xxxxx fun]# rails server
/usr/local/share/gems/gems/sqlite3-1.3.6/lib/sqlite3.rb:6:in `require': cannot load such file -- sqlite3/sqlite3_native (LoadError)
    from /usr/local/share/gems/gems/sqlite3-1.3.6/lib/sqlite3.rb:6:in `rescue in <top     (required)>'
    from /usr/local/share/gems/gems/sqlite3-1.3.6/lib/sqlite3.rb:2:in `<top     (required)>' 
```

我已经确认 sqlite3 在 Rails 之外工作得很好（即我成功创建了一个数据库，使用 ruby​​ 代码进行了插入/读取）。这是在 irb 中加载 sqlite3 的快速演示：

```
irb(main):001:0> require 'sqlite3'
=> true 
```

我完全了解捆绑安装。sqlite3 版本为 1.3.6

我安装了以下软件包：

```
ruby19-1.9.3.0-7.17.amzn1.i686
ruby19-devel-1.9.3.0-7.17.amzn1.i686
ruby19-irb-1.9.3.0-7.17.amzn1.noarch
ruby19-libs-1.9.3.0-7.17.amzn1.i686
rubygem19-io-console-0.3-7.17.amzn1.i686
rubygem19-rdoc-3.9.4-7.17.amzn1.i686
rubygems19-1.8.11-7.17.amzn1.noarch
sqlite-3.6.20-1.8.amzn1.i686
sqlite-devel-3.6.20-1.8.amzn1.i686 
```

关于我可以尝试使事情正常进行的任何想法？谢谢！

**更新** 为了“有趣”，我从我的 Gemfile 中注释掉了 gem sqlite3 行并再次尝试了“rails server”。首先它抱怨没有 javascript 运行时（我可以修复），但随后它得到了以下信息。我的安装似乎出了点问题。

```
[root@xxxx fun]# rails server
/usr/local/share/gems/gems/railties-3.2.8/lib/rails/railtie/configuration.rb:85:in `method_missing': undefined method `active_record' for #<Rails::Application::Configuration:0x9e68f58> (NoMethodError)
    from /srv/rails/fun/config/application.rb:54:in `<class:Application>'
    from /srv/rails/fun/config/application.rb:13:in `<module:Fun>'
    from /srv/rails/fun/config/application.rb:12:in `<top (required)>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T14:59:25.660

你可能有路径问题。

要查看您是否安装了多个版本的 Ruby、Rails 或 gem：

```
find / | grep bin/ruby 
```

    查找 / | grep bin/rails 查找 / | grep bin/gem

在 Amazon 服务器上，我通常保持系统 Ruby 不变，并使用出色的 ruby​​-build 脚本（我认为比 RVM 更好）安装我自己当前的 Ruby。

```
https://github.com/sstephenson/ruby-build 
```

如果您确实有多个 Ruby，我建议您将环境设置为选择一个，例如通过`ruby-build`在文件中使用或设置 PATH`.bashrc`或`/etc/environment`文件如下：

```
PATH=/opt/ruby/1.9.1-p134/bin;$PATH 
```

如果您使用的是 RVM，我建议您将其卸载并更改为使用 ruby​​-build。

要卸载 RVM，我使用以下脚本：

```
https://github.com/SixArm/sixarm_unix_shell_scripts/blob/master/rvm-uninstall-danger 
```

# jquery - 将 jBar 定位在页面底部而不是顶部

> ID：12232989
> 
> 赞同：0
> 
> 时间：2012-09-02T02:30:27.730
> 
> 标签：jquery, toolbar

几个小时以来，我一直在尝试修改[此脚本](http://www.toddmotto.com/jbar-plugin-the-jquery-call-to-action-bar)，以使“hello bar Alternative”出现在页面底部而不是顶部，但均未成功。我知道这可能不是很难，但是我对 jQuery 的理解非常有限，而且我还在学习 CSS 的基础知识来编辑样式。这些图像将相当直接。谁能建议我朝着正确的方向前进？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T03:01:32.017

首先，由于您希望它出现在页面底部，因此您必须使其“固定”：

```
.jBar {
    position: fixed;
    bottom: 0;
    width: 100%;
} 
```

那么你可能想要使用`.slideDown`而不是`.slideUp`.

不知道还需要什么，你可以从那个开始。