# StackOverflow 问答 10300000-10300999

# pdf - 如何使用 iTextSharp 从 PDF 中提取 RichMediaContent

> ID：10300000
> 
> 赞同：0
> 
> 时间：2012-04-24T14:26:44.460
> 
> 标签：pdf, dictionary, annotations, itextsharp, asp.net-4.0

我需要提取嵌入在 pdf 文件中的视频文件。我可以找到注释中的视频，因此我无法单独保存。我需要保存这个文件我怎么做到这一点？

例如： [iTextSharp - 如何打开/读取/提取文件附件？](https://stackoverflow.com/questions/3007780/itextsharp-how-to-open-read-extract-a-file-attachment)

他提取了附件，就像我需要提取视频的方式一样。

这是我的代码：

```
 string FileName = AppDomain.CurrentDomain.BaseDirectory + "raven test.pdf";
    PdfReader pdfreader = new PdfReader(FileName);
    PdfDictionary PageDictionary = pdfreader.GetPageN(1);
    PdfArray Annots = PageDictionary.GetAsArray(PdfName.ANNOTS);       
    if ((Annots == null) || (Annots.Length == 0))
        return;

    foreach (PdfObject oAnnot in Annots.ArrayList)
    {
        PdfDictionary AnnotationDictionary = (PdfDictionary)PdfReader.GetPdfObject(oAnnot);

        if (AnnotationDictionary.Get(PdfName.SUBTYPE).Equals(PdfName.RICHMEDIA))
        {
            if (AnnotationDictionary.Keys.Contains(PdfName.RICHMEDIACONTENT))
            {
                PdfDictionary oRICHContent = AnnotationDictionary.GetAsDict(PdfName.RICHMEDIACONTENT); // here i could see the video embeded but it is in annotation, how do i save this file?
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T21:32:36.263

对于这一点，您需要参考[ISO 32000、BaseVersion 1.7、ExtensionLevel 3](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/devnet/pdf/pdfs/adobe_supplement_iso32000.pdf)官方规范的 Adob​​e 补充。下面是基本代码，尽管您可能需要进行更多`null`检查。如有任何问题，请参阅评论。请注意，并非所有嵌入式电影都使用 RichMedia 格式，有些只是特殊附件，因此不会全部包含在内。

```
PdfReader pdfreader = new PdfReader(FileName);
PdfDictionary PageDictionary = pdfreader.GetPageN(1);
PdfArray Annots = PageDictionary.GetAsArray(PdfName.ANNOTS);
if ((Annots == null) || (Annots.Length == 0))
    return;

foreach (PdfObject oAnnot in Annots.ArrayList) {
    PdfDictionary AnnotationDictionary = (PdfDictionary)PdfReader.GetPdfObject(oAnnot);

    //See if the annotation is a rich media annotation
    if (AnnotationDictionary.Get(PdfName.SUBTYPE).Equals(PdfName.RICHMEDIA)) {
        //See if it has content
        if (AnnotationDictionary.Contains(PdfName.RICHMEDIACONTENT)) {
            //Get the content dictionary
            PdfDictionary RMC = AnnotationDictionary.GetAsDict(PdfName.RICHMEDIACONTENT);
            if (RMC.Contains(PdfName.ASSETS)) {
                //Get the assset sub dictionary if it exists
                PdfDictionary Assets = RMC.GetAsDict(PdfName.ASSETS);
                //Get the names sub array.
                PdfArray names = Assets.GetAsArray(PdfName.NAMES);
                //Make sure it has values
                if (names.ArrayList.Count > 0) {
                    //A single piece of content can have multiple assets. The array returned is in the form {name, IR, name, IR, name, IR...}
                    for (int i = 0; i < names.ArrayList.Count; i++) {
                        //Get the IndirectReference for the current asset
                        PdfIndirectReference ir = (PdfIndirectReference)names.ArrayList[++i];
                        //Get the true object from the main PDF
                        PdfDictionary obj = (PdfDictionary)PdfReader.GetPdfObject(ir);
                        //Get the sub Embedded File object
                        PdfDictionary ef = obj.GetAsDict(PdfName.EF);
                        //Get the filespec sub object
                        PdfIndirectReference fir = (PdfIndirectReference)ef.Get(PdfName.F);
                        //Get the true file stream of the filespec
                        PRStream objStream = (PRStream)PdfReader.GetPdfObject(fir);
                        //Get the raw bytes for the given object
                        byte[] bytes = PdfReader.GetStreamBytes(objStream);
                        //Do something with the bytes here
                    }
                }
            }
        }
    }
} 
```

# asp.net - Facebook Graph API 发布图片

> ID：10300003
> 
> 赞同：0
> 
> 时间：2012-04-24T14:26:49.170
> 
> 标签：asp.net, facebook-graph-api

我正在尝试使用 ASP.NET 将图像发布到 Facebook，但它不起作用并收到这些警告。

应该修复的开放图警告：推断属性：
应该显式提供“og:url”属性，即使可以从其他标签推断出值。推断属性：
应显式提供“og:title”属性，即使可以
从其他标签推断出值。推断属性：
应显式提供“og:image”属性，即使可以
从其他标签推断出值。

“明确提供”是什么意思？有人有使用 ASP.net 发布照片的好例子吗？将不胜感激！

这是参数：

```
WebRequest(oAuthFacebook.Method.POST, 
"https://graph.facebook.com/me/feed/access_token=" + oAuth.Token,
"http://www.test.com/Image.aspx?" + image; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:44:50.297

您是否将元标记添加到您的页面

```
<meta property="og:title" content="title" />
<meta property="og:description" content="description" />
<meta property="og:image" content="thumbnail_image" /> 
```

明确提供意味着它们必须出现在页面上，如果没有则抛出错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T22:17:38.817

发生在我身上一次，你可能有错误的`og:url`价值。我有同样的 Open Graph 警告，问题是我在一个“dev”文件夹中工作以测试东西（`http://example.com/dev/`），并且`og:url`为根文件夹（`http://example.com/`）设置了元标记，所以 Facebook 在 example.com/ 中寻找一切example.com/dev/

`og:url`更改为时警告消失`example.com/dev/`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-24T14:30:43.070

您能否向我们展示您在 HTML 标头中使用的代码？我建议您使用 Facebook URL Linter 进行测试和调试，因为 Facebook 会在您第一次尝试共享时缓存每个 URL：[https ://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

# forms - 增加表单小部件的大小

> ID：10300005
> 
> 赞同：0
> 
> 时间：2012-04-24T14:27:03.810
> 
> 标签：forms, symfony-1.4, widget

这个问题太简单了，有点尴尬，但是这里......

这适用于 Symfony 1.4 - 我正在尝试在 Symfony 1.4 应用程序中修改一些自动生成的表单。问题是，小部件被渲染得太小而无法显示字段中的所有文本。例如，在数据库表中，我有一个 varchar(50) 类型的字段，但小部件只显示 20 个字符。我试图增加 _form 类的大小，例如

```
<td colspan="4"> <?php echo $form['email'] ?></td> 
```

但这似乎没有任何效果。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:40:48.090

您可以通过不同的方式实现这一目标。

*   在模板中关联一个类/样式：

您为渲染提供一些属性。

```
<?php echo $form->render(array('email' => array('class' => 'email'))) ?>
<?php echo $form['email']->renderRow(array('class' => 'email')) ?>

// Both generate HTML
<input type="text" name="contact[email]" value="" id="contact_email" class="email" /> 
```

*   关联小部件中的类/样式：

您为小部件提供一些属性。

```
$this->widgetSchema['email'] = new sfWidgetFormInput(array(), array('class' => 'email')); 
```

# wcf - 在 app.config 控制台应用程序中配置轮询双工

> ID：10300010
> 
> 赞同：0
> 
> 时间：2012-04-24T14:27:29.767
> 
> 标签：wcf, app-config, console-application, pollingduplexhttpbinding

我在控制台应用程序中配置轮询双工绑定时遇到问题。这是我收到的错误：

`Configuration binding extension 'system.serviceModel/bindings/pollingDuplexHttpBinding' could not be found. Verify that this binding extension is properly registered in system.serviceModel/extensions/bindingExtensions and that it is spelled correctly.`

另外，这是我的 app.config 中的一个片段：

```
 <extensions>
      <bindingExtensions>
        <add name="pollingDuplexHttpBinding" type="System.ServiceModel.Configuration.PollingDuplexHttpBindingCollectionElement,
         System.ServiceModel.PollingDuplex,
         Version=4.0.0.0,
         Culture=neutral,
         PublicKeyToken=31bf3856ad364e35"/>
      </bindingExtensions>
    </extensions>

    <services>
      <service behaviorConfiguration="PositionBehaviour" name="RabbitMQSub.PositionUpdates">
        <endpoint address="positionsDUPLEX" binding="pollingDuplexHttpBinding" contract="RabbitMQSub.IPositionUpdates">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>

        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8732/RabbitMQSub/PositionsDUPLEX" />
          </baseAddresses>
        </host>

      </service>
    </services>

<behaviors>
  <serviceBehaviors>
    <behavior name="PositionBehaviour">
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="true"/>
      <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
      <serviceTimeouts transactionTimeout="10:00:00"/>
      <serviceThrottling maxConcurrentCalls="500" maxConcurrentSessions="500" maxConcurrentInstances="2147483647"/>
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

**问题**

*   甚至可以在控制台应用程序中配置轮询双工吗？
*   如果是这样，我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:39:07.373

据我所知，PollingDuplexHttpBinding 不能用作 .NET Framework 的客户端组件。

实际上，正如您所知，拥有发布通知的客户端不需要双工功能——它可以构建为通过 BasicHttpBinding 等简单绑定公开的单独请求/响应 WCF 服务端。对于确实需要通过双工合同接收异步通知的 Windows 应用程序或控制台客户端，请考虑使用 WsDualHttpBinding 或 NetTcpBinding，它们都提供双工通信。

尽管在 .NET Framework 的最新版本中（可能没有），这可能已经发生了变化——如果它可用，请尝试添加对 System.ServiceModel.PollingDuplex.dll 的引用。

# android - Android onPictureTaken 未被调用

> ID：10300011
> 
> 赞同：1
> 
> 时间：2012-04-24T14:27:30.813
> 
> 标签：android, android-widget, hardware

我正在尝试制作一个用户可以拍照的屏幕。这张照片将进入数据库。问题是，我尝试了多种方法，并且在每种方法中，我都需要使用 PictureCallback。但是无论如何，从不调用 PictureCallback 的 onPictureMethod。

我已经尝试过查看[this](https://stackoverflow.com/questions/6200369/picturecallback-onpicturetaken-never-called)和[this](https://stackoverflow.com/questions/7275111/picturecallback-not-called-when-using-takepicture-in-android)，但仍然无法移动。

编辑：使用 Android 2.2 (API 8)

编辑代码：

```
package touchcare.idealogix.android;

//imports

public class CameraActivityTest extends Activity implements SurfaceHolder.Callback
{
private SurfaceView surfaceCamera;
private SurfaceHolder holderCamera;
private Camera camera;
private Button btnCapture;
private PictureCallback mPictureJpg;
private PictureCallback mPictureRaw;
private ShutterCallback shutterCallback;

@Override public void onCreate(Bundle bundle){
    super.onCreate(bundle);
    setContentView(R.layout.layout_camera);

    Log.d("PICTURE", "ACTIVITY START");

    surfaceCamera = (SurfaceView) findViewById(R.id.surfaceCamera);
    btnCapture = (Button) findViewById(R.id.btnCapture);
    holderCamera =  surfaceCamera.getHolder();

    holderCamera.addCallback(this);
    holderCamera.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

    shutterCallback = new ShutterCallback() 
    {   
        @Override
        public void onShutter() 
        {
            //DONOTHING
        }
    };

    mPictureRaw = new PictureCallback() 
    {   
        @Override
        public void onPictureTaken(byte[] data, Camera camera)
        {
            //DONOTHING
        }
    };

    mPictureJpg = new PictureCallback()
    {
        @Override
        public void onPictureTaken(byte[] data, Camera camera) 
        {
            Log.d("PICTURE", "ON PICTURE TAKEN START");

            Intent intent = getIntent();

            final boolean beds = intent.getExtras().getBoolean(Main.BEDS, false);
            final boolean nurse = intent.getExtras().getBoolean(Main.NURSE, false);
            final int position = intent.getExtras().getInt(Main.POSITION, 0);

            if(beds)
            {
                BedroomDataSource bedDs = new BedroomDataSource(CameraActivityTest.this);
                String where = SQLiteBedroomHelper.COLUMN_UID + "=" + AppData.getBedrooms().get(position).getUid();
                bedDs.open();
                bedDs.updateBedroom(where, null, null, null, null, null, null, data);
                bedDs.close();
                Log.d("PICTURE", "BEDS BOOLEAN");
                AppData.getBedrooms().get(position).setImage(data);
            }else if(nurse)
            {

            }

            Log.d("PICTURE", "ON PICTURE TAKEN END");

            finish();
        }
    };

    btnCapture.setOnClickListener(new View.OnClickListener() 
    {   
        @Override
        public void onClick(View arg0) 
        {               
            camera.takePicture(shutterCallback, mPictureRaw, mPictureJpg);
        }
    });
}

@Override public void surfaceCreated(SurfaceHolder holder)
{
    camera = Camera.open();

    Camera.Parameters params = camera.getParameters();      

    params.setPreviewSize(holder.getSurfaceFrame().width(), holder.getSurfaceFrame().height());
    params.setPictureSize(32, 32);
    params.setJpegQuality(100);

    camera.setParameters(params);

    try
    {
        camera.setPreviewDisplay(holder);
    }catch(IOException ex){
        Log.d("PICTURE", "PREVIEW EXCEPTION");
    }

    camera.startPreview();

    Log.d("PICTURE", "SURFACE CREATED");
}

@Override public void surfaceChanged(SurfaceHolder holder, int format, int w, int h)
{
    Log.d("PICTURE", "SURFACE CHANGED");
}

@Override public void surfaceDestroyed(SurfaceHolder holder)
{
    camera.stopPreview();

    camera.release();

    Log.d("PICTURE", "SURFACE DESTROYED");
}
} 
```

谢谢。

编辑：看起来拍摄了一些照片并达到了回调。数据库获取照片，并在位图中加载回来就好了。但根据我拍摄的照片，回调没有到达。更小更简单的事情有 100% 的机会执行回调。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-24T15:00:15.537

看起来您创建了回调 mPicture，然后从不将其设置为任何内容的回调。我从来没有使用过任何图片的东西，所以我不能建议在哪里设置它，但据我所知，你需要注册回调才能调用它，只是定义它对你没有任何好处。

# salesforce - 基于复选框操作显示字段

> ID：10300012
> 
> 赞同：0
> 
> 时间：2012-04-24T14:27:35.547
> 
> 标签：salesforce, visualforce

我有一个 VF 页面，我在其中使用复选框字段，如果选中了复选框，我想显示其他三个字段。

我该怎么做呢？

谢谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:55:39.177

使用或[`rendered`](http://www.salesforce.com/us/developer/docs/pages/Content/pages_compref_inputField.htm)上的属性。通过设置此属性，您可以控制组件是否出现在 Visualforce 页面上。`<apex:inputfield>``<apex:inputtext>`

包括所有可能会或可能不会显示在 Visualforce 页面`rendered="{!Object.YourCheckboxField}"`上的字段，但会根据复选框字段在要显示/隐藏的字段上设置。或者，您可以使用 Visualforce[函数](http://www.salesforce.com/us/developer/docs/pages/Content/pages_variables_functions.htm)，例如`IF`或`NOT`。

例如，如果您想根据 HasOptedOutOfEmail 字段是真还是假来显示或隐藏联系人上的电子邮件字段，它看起来像这样。

```
<apex:page standardController="Contact">
    <apex:sectionHeader title="Custom Contact Visualforce Page" />
    <apex:form>
        <apex:pageblock>
            <apex:pageblocksection>
                <apex:inputfield value="{!Contact.FirstName}" />
                <apex:inputfield value="{!Contact.LastName}" />
                <apex:inputfield value="{!Contact.Phone}" />
                <apex:inputfield value="{!Contact.Email}" rendered="{!NOT(Contact.HasOptedOutOfEmail)}" />
            </apex:pageblocksection>
        </apex:pageblock>
    </apex:form>
</apex:page> 
```

# c++ - 将 c++ 转换为 vb.net

> ID：10300014
> 
> 赞同：-3
> 
> 时间：2012-04-24T14:27:37.360
> 
> 标签：c++, vb.net

我有这个 cpp 代码，我需要 vb.net 中的等效代码，或者至少知道它在做什么，这样我就可以自己找出转换

```
const char * CResult::strnchr(const char *str, int len, char c) const
{
if (!str)
    return NULL;

const char *p = str;
while (len > 0)
{
    if (!*p)
        return NULL;
    if (*p == c)
        return p;
    p++;
    len--;
}
return NULL;
} 
```

和这个

```
memcmp(prevprev, "ANY", 3) 
```

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:30:44.767

```
strnchr --  Find a character in a length limited string 
```

看到[这个](http://gnugeneration.com/mirrors/kernel-api/r2320.html)。您可以在 VB.net 中使用`String.IndexOf`，例如

```
Dim myString As String = "ABCDE"
Dim myInteger As Integer
myInteger = myString.IndexOf("D")  ' myInteger = 3 
```

[从MSDN](http://msdn.microsoft.com/en-us/library/aa903372%28v=vs.71%29.aspx)复制的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:34:21.243

`strnchr`查找 char`c`在 string中第一次出现的位置`str`。它返回一个指向字符的指针，这在 VB.Net 中是无法做到的，最接近的方法是从字符串的开头获取字符的偏移量。

`memcmp(prevprev, "ANY", 3)`将“ANY”的三个字母与 的内存位置进行比较`prevprev`，有效地检查 prevprev 是否​​包含 ANY 的子字符串。

在 VB.Net 中，第一个可以用类型的`IndexOf`成员来完成`String`。您需要使用的第二个`SubString` （再次是`String`类型上的成员）创建字符串的子字符串并检查它是否等于“ANY”。

```
Dim myString As String = "Any Hello World"
Dim AnyAtStart As Boolean = myString.SubString(0, 3) = "ANY")  ' Will be true '
Dim AnyAtSecond As Boolean = myString.SubString(1, 3) = "ANY")  ' Will be false ' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T15:03:51.310

使用 MSDN 为许多标准 C 函数查找 VB.NET 类似物或密切对应的函数相对简单。以 memcmp() 为例： - MSDN source [memcmp, wmemcmp](http://msdn.microsoft.com/en-us/library/zyaebf12.aspx) - “比较两个缓冲区中的字符”。- 在 VB.NET 中查找字符串的比较方法 - [String.Compare 方法 (String, String)](http://msdn.microsoft.com/en-us/library/84787k22.aspx#Y208) 但是将 C 源函数逐个函数复制到 VB.NET 中对于相对较小的程序会产生奇怪的无效代码。每次寻找替换 C 程序中随处使用的原始指针时，您都会感到困惑。

PS 如果你的*::strnchr*的调用方式与标准 C 函数[strnchr()](http://msdn.microsoft.com/en-us/library/b34ccac3%28v=VS.71%29.aspx)不同- “在字符串中查找字符”，你会怎么做？

# javascript - 打印网页视图

> ID：10300016
> 
> 赞同：0
> 
> 时间：2012-04-24T14:27:48.327
> 
> 标签：javascript, qt, webkit, qtwebkit

我们如何打印出 webview 包含的内容？我试过类似的东西：

```
view.page().currentFrame().toPlainText() 
```

但它没有用

PS：我的 webview 包含对 javascript 函数的评估，所以我想 toHtml() 不会做任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:37:45.990

`QtWebKit`将显示 javascript 生成的网页，与显示任何其他网页完全相同（尽管您可以通过 禁用 js [`QWebSettings`](http://qt-project.org/doc/qt-4.8/qwebsettings.html)）。然后我假设您希望网页根据来自 C++ 应用程序的请求生成元素。

如果是这种情况，您想要[`QWebFrame::evaluateJavaScript`](http://doc.qt.nokia.com/4.7-snapshot/qwebframe.html#evaluateJavaScript)（如前一个问题中所述：[Qt4: How to call JavaScript functions in a page from C++ via QtWebkit?](https://stackoverflow.com/questions/1409522/qt4-how-to-call-javascript-functions-in-a-page-from-c-via-qtwebkit)）。

更一般地说，您可能会发现[这](http://doc.qt.nokia.com/4.7-snapshot/qtwebkit-bridge.html)很有用。

# html - 如何使这个子菜单 100% 宽度？

> ID：10300018
> 
> 赞同：1
> 
> 时间：2012-04-24T14:27:50.310
> 
> 标签：html, css

这是一个奇妙的 CSS 菜单：

`http://www.devinrolsen.com/wp-content/themes/dolsen/demos/css/infinite-sub-menu/`

唯一的问题是它的宽度为 200 像素...如果我将其更改为 100% 它不起作用...所有子菜单的宽度在 IE 中都不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:36:02.570

它正在工作，请看[小提琴](http://jsfiddle.net/zbZfn/1/)。我已经检查过Firefox和IE8

# xcode4 - XCode 4 快照文件集管理

> ID：10300019
> 
> 赞同：1
> 
> 时间：2012-04-24T14:28:06.447
> 
> 标签：xcode4

我一直在 Xcode 4 中使用快照，并且不时恢复一些旧文件，或者偶尔将文件的当前版本与以前的版本进行比较，所以我认为它非常方便。但是后来，我尝试在一个包含几十个文件的相当大的项目上使用它，我刚刚意识到这个傻瓜不记得快照中项目的实际文件列表，或者至少它不记得不要利用它。

例如，在某个时间，我为我的项目制作了一个快照（S1），其中包含文件 A、B 和 C。然后，我重新编写代码，删除文件 B 并引入文件 D 和 E，并制作一个快照数量（S2、S3、S4）。现在假设我完全恢复了 S3。好吧，我最终在我的项目文件夹中找到了文件 B，即使它不是自快照 S2 以来项目的一部分......

有一种方法可以从完整集中选择要恢复的文件，但是当我在项目中有 100 多个文件时，我什至不记得哪些文件真正仍在使用，哪些是旧文件，我不能打扰一个接一个地单击那些愚蠢的复选标记以删除那些我不想要的文件。

有什么我做错了吗？有没有办法告诉 Xcode 只恢复快照时确实在项目中的那些文件（如果它有任何大脑就应该这样做）？

谢谢

# java - 使用 Java 解析/读取 C-Header 文件

> ID：10300021
> 
> 赞同：7
> 
> 时间：2012-04-24T14:28:15.080
> 
> 标签：java, c, header-files

我有一个 C-Header 文件定义了几个结构，包含多个字符数组。

我想使用 Java 解析这些文件。是否有用于将 C-Header 文件读取到结构中的库，或者是否有可以理解 C-Header 文件的流解析器？

只是为了获得更多背景知识（我只是在寻找 C-Header 解析器，而不是针对这个特定问题的解决方案）：我有一个包含数据的文本文件和一个解释结构的 C-Header 文件。两者都有点动态，所以我不想生成 Java 类文件。

例子：

```
#define TYPE1
typedef struct type1
{
char name1[10];
char name2[5];
}
#endif 
```

Type2、Type3 等类似。

数据结构：

```
type1ffffffffffaaaaa 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-24T15:04:55.413

您可以为 Java 使用现有的 C 解析器。当然，它不仅仅是解析头文件，但这不应该伤害你。

[我们使用来自Eclipse CDT](http://www.eclipse.org/cdt)项目的解析器。这是一个 Eclipse 插件，但我们成功地在 Eclipse 之外使用它，我们只需要将 Eclipse 的 3 个 JAR 文件与解析器 JAR 捆绑在一起。

要使用 CDT 解析器，请从 的实现开始`org.eclipse.cdt.core.model.ILanguage`，例如`org.eclipse.cdt.core.dom.ast.gnu.c.GCCLanguage`。你可以调用`getTranslationUnit`它，传递代码和一些帮助的东西。代码文件由`org.eclipse.cdt.core.parser.FileContent`实例表示（至少在 CDT7 中，这似乎发生了很大变化）。创建此类对象的最简单方法是`FileContent.createForExternalFileLocation(filename)`或`FileContent.create(filename, content)`。这样您就不需要关心 Eclipse 的`IFile`东西，它似乎只在项目和工作区中工作。

你得到的`IASTTranslationUnit`代表文件的整个 AST。其中的所有节点都是`IASTSomething`类型的实例，例如`IASTDeclaration`等。您可以实现自己的子类，`org.eclipse.cdt.core.dom.ast.ASTVisitor`以使用访问者模式遍历 AST。如果您需要进一步的帮助，请询问。

我们使用的 JAR 文件是`org.eclipse.cdt.core.jar`、`org.eclipse.core.resources.jar`、`org.eclipse.equinox.common.jar`和`org.eclipse.osgi.jar`.

**编辑**：我找到了一篇包含源代码片段的论文：“使用 Eclipse C/C++ 开发工具作为强大、功能齐全、积极维护的开源 C++ 解析器”，但它不再在线提供（仅作为缩短版）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-16T02:41:26.713

仅使用 2 个 jar 的**Eclipse CDT**示例。
- [https://github.com/ricardojlrufino/eclipse-cdt-standalone-astparser](https://github.com/ricardojlrufino/eclipse-cdt-standalone-astparser)
*在该示例中，有一个类将源文件的结构显示为树，另一个示例在 api 上进行交互...*

一个细节是，使用这个 api(Eclipse CDT Parser)，您可以**从内存中的字符串进行解析。**

另一个使用示例是：
[https ://github.com/ricardojlrufino/cplus-libparser](https://github.com/ricardojlrufino/cplus-libparser)
*库，用于 C/C++ 中源代码的元数据提取（有关类、方法、变量的信息）。*

见文件： [https ://github.com/ricardojlrufino/cplus-libparser/blob/master/src/main/java/br/com/criativasoft/cpluslibparser/SourceParser.java](https://github.com/ricardojlrufino/cplus-libparser/blob/master/src/main/java/br/com/criativasoft/cpluslibparser/SourceParser.java)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-15T15:13:03.090

如前所述，CDT 非常适合这项任务。但与上面描述的不同，我在插件中使用它并且能够使用 IFiles。然后一切都变得容易多了。要获得“ITranslationUnit”，只需执行以下操作：

```
ITranslationUnit tu = (ITranslationUnit) CoreModel.getDefault().create(myIFile);
IASTTranslationUnit ias = tu.getAST(); 
```

我正在寻找一个特殊的#define，所以我可以：

```
ppc = ias.getAllPreprocessorStatements(); 
```

要获取所有预处理的代码语句，数组元素中的每个语句。非常容易。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-24T15:04:33.710

您可以尝试使用[ANTLR](http://www.antlr.org/)。应该已经有一些[现有的 C 语法](http://www.antlr.org/grammar/list)可用。

# c++ - 如何设计一个实时的 CUDA 金融应用程序

> ID：10300022
> 
> 赞同：2
> 
> 时间：2012-04-24T14:28:20.607
> 
> 标签：c++, cuda, real-time, nvidia, financial

我有一个关于如何设计我的应用程序的一般性问题。我已经阅读了 Cuda 文档，但仍然不知道我应该研究什么。如果有人可以阐明它，我真的很感激。

我想做一些关于股票的实时分析，比如 100 只股票。而且我有实时市场数据馈送，它将随着更新的市场价格流式传输。我想做的是：

1.  为cuda卡上的每只股票预先分配内存黑色，并在白天保留内存。

2.  当有新数据进来时，直接更新Cuda卡上相应的内存。

3.  更新后发出信号或触发事件开始解析计算。

4.  计算完成后，将结果写回 CPU 内存。

以下是我的问题：

1.  将数据从 CPU 内存流式传输到 GPU 内存的最有效方法是什么？因为我想要它是实时的，所以每秒将内存快照从 CPU 复制到 GPU 是不可接受的。

2.  我可能需要在 CPU 和 GPU 上为 100 个股票分配内存块。如何将 CPU 内存单元映射到每个 GPU 内存单元？

3.  当新数据到达 Cuda 卡时如何触发分析计算？

我在 Windows XP 上使用带有 Cuda 3.2 的 Tesla C1060。

非常感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T22:41:14.220

你的要求没有什么不寻常的。

只要您的应用程序正在运行，您就可以将信息保存在 GPU 内存中，并进行少量更新以使数据与 CPU 上的数据保持同步。您可以分配 GPU 内存`cudaMalloc()`并用于`cudaMemcpy()`将更新的数据写入已分配内存的部分。或者，您可以将数据保存在 Thrust 结构中，例如`thrust::device_vector`. 更新时`device_vector`，CUDA 内存副本在后台完成。

更新数据后，您只需重新运行内核即可获得更新的计算结果。

你能扩展问题（2）吗？

# html - 如何隔离 HTML5 音频播放器控制功能？

> ID：10300026
> 
> 赞同：0
> 
> 时间：2012-04-24T14:28:25.500
> 
> 标签：html, user-interface, user-controls, custom-controls, html5-audio

我想为我的 HTML5 播放器隔离“播放”、“暂停”和“停止”功能。我想把它们放在我主页上的随机位置（即，停在左上角，在右下角播放，在页面中间暂停）。我还希望能够隔离跟踪器。因此，例如，将跟踪器放在页面的左下角。

谁能告诉我隔离其中一个控件需要什么？因此，例如，“如果用户单击 div 中的任意位置，“右下角”，音频将开始“播放”。左下角的跟踪器将开始跟踪，停止和暂停按钮将转到就绪状态……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T23:53:38.657

我不相信您可以通过 CSS 或 JavaScript 影响浏览器的本机音频播放器的控件，至少在您想要的范围内。因此，您需要从音频标签中省略 controls 属性（这将为您提供一个没有控件的播放器）并自己编写控件和控件背后的逻辑。

本[教程](http://html5doctor.com/native-audio-in-the-browser/)应该为您提供足够的入门知识。但是，您应该注意，根据您需要的功能级别，这可能不是一项简单的任务。

您还可以考虑寻找支持您所需的 UI 自定义级别的第三方库。我自己没有使用过它，但听说过有关[audio.js](http://kolber.github.com/audiojs/)的好消息。

[编辑]

这个[HTML5 音频测试套件](http://areweplayingyet.org/)作为音频元素 API 的摘要非常方便，并为列出的每个属性和事件提供了指向 W3 规范中相应条目的链接，尽管我希望各种支持不一致支持 HTML5 音频的浏览器。

我创建了[这个小提琴](http://jsfiddle.net/MKUF6/)，它演示了一个由一组非常基本的自定义控件控制的 HTML5 音频播放器（仅在最新版本的 Chrome 中测试）。

# java - 如何在 Android NDK 上使用 JNI 在 C 和 Java 之间传递复杂的结构

> ID：10300039
> 
> 赞同：14
> 
> 时间：2012-04-24T14:28:48.920
> 
> 标签：java, c, android-ndk, java-native-interface, share

我的 Android 应用程序的 C 代码中有一个复杂的结构，我想在 Java 端使用它。我已经在 google 和 stackoverflow 中进行了一些研究，所以我从我的 C 结构创建了 java 类，但现在如何在 Java 中获取它。

我找到了这些信息，关于在类中创建一个指针并在 C 端使用它：

```
Get the field ID : (*env)->GetFieldID(...)
Get the pointer : (*env)->GetLongField(...)
Set the pointer : (*env)->SetLongField(...) 
```

但我不明白它是如何工作的......

上面，你可以找到我到现在为止所做的事情......不是那么多！在 C 侧：

```
ComplexStructure Java_com_main_MainActivity_listenUDP(JNIEnv* env, jclass clazz)
{
    int i,taille;
    ComplexStructure myStruct;    
    taille = -1;    
    taille = recvfrom(socket, &myStruct, sizeof(ComplexStructure ), 0, &rcvAddr, &sizeOfSock);
    if(taille != -1)
    {   
        return myStruct;
    }
    return NULL;
} 
```

在 Java 方面：

```
public void getFromUDP() {

    ComplexClass myClass = new ComplexClass();
    myClass = listenUDP();              
}

@Override
public void run() {
    initUDP();
    getFromUDP();
}

public static native ComplexClass listenUDP();
public static native void initUDP();
public static native void closeUDP();

/** Load jni .so on initialization */
static {
     System.loadLibrary("native-interface");
} 
```

编辑：我想补充一点，我的结构非常复杂：

```
typedef struct{
  TYPE_A myStructA;
  TYPE_B myStructB;
  TYPE_C myStructC;
  TYPE_D myStructD;
}ComplexStructure;

typedef struct{
  float rad;
  int size;
  bool isEmpty;
}TYPE_A;

typedef struct{
  float rad;
  bool isEmpty;
  float color;
  int temp;
}TYPE_B;

typedef struct{
  int temp;
  float rain;
  bool isEmpty;
}TYPE_C;

typedef struct{
  float rad;
  int idPerson;
  bool isOnTime;
}TYPE_D; 
```

更复杂的，只是一个例子来告诉你它是怎么回事！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T15:26:49.940

您不能将原始 C 结构传递给 Java 并期望它将这些结构视为类。您需要为您的结构创建一个类。我看到你已经这样做了，所以你唯一需要做的就是将此结构转换为类的实例。

Java端的代码：

```
public static native ComplexClass listenUDP(); 
```

将转化为：

```
JNIEXPORT jobject JNICALL Java_com_main_MainActivity_listenUDP(JNIEnv *env, jclass); 
```

在该 C 代码中，您需要使用该`env->FindClass();`函数加载 ComplexClass。然后要创建该类的新实例（如果您有零参数构造函数，它会简化问题），您需要加载构造函数方法签名并在`env->NewObject()`方法中“调用”它。完整代码：

```
jclass complexClass = env->FindClass("/com/main/ComplexClass");
jmethod constructor = env->GetMethodId(complexClass, "<init>", "()com/main/ComplexClass"); //The name of constructor method is "<init>"
jobject instance = env->NewObject(complexClass, constructor); 
```

然后你需要设置这个类的字段使用`env->setXXXField();`。如果您有更多对象作为字段并且想要创建它们，则对另一个对象重复上述过程。

这看起来很复杂，但这就是在托管 Java 代码中使用本机 C 的代价。

# mysql - 如何最有效地缩小从数据库中选择的实体？

> ID：10300043
> 
> 赞同：1
> 
> 时间：2012-04-24T14:29:00.180
> 
> 标签：mysql, asp.net-mvc-3, entity-framework, select

我正在使用以下代码从包含一堆课程的表中选择每门课程 - 我将如何更改代码以缩小从每门课程到每门课程的选择范围，字段为 db.Courses.myField = true？

```
var courses = from s in db.Courses
                select s; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T14:31:33.963

这很简单...

```
var courses = from s in db.Courses
              where s.myField == true
              select s; 
```

查看 asp.net 上的[数据教程](http://www.asp.net/mvc/overview/models-%28data%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:33:28.197

使用 Linq，

```
var courses = db.Courses.Where(s=>s.myField == true); 
```

# iphone - 项目构建没有错误但尚未运行

> ID：10300047
> 
> 赞同：0
> 
> 时间：2012-04-24T14:29:25.753
> 
> 标签：iphone, ios, xcode4, ios-simulator

我刚刚在 Xcode 4 中构建了一个项目，当我单击构建时它工作正常，没有错误或警告，但是它没有加载到模拟器或我的手机上，有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:37:21.600

单击运行而不是构建（或左上角的“播放”按钮）。Build 只编译。Run 将编译它并将其加载到模拟器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:38:15.637

使用左上角的“播放”按钮构建 + 运行您的应用程序，它将在所选设备中启动（在其旁边可见，通常是 iOS 模拟器）。

# java - Hadoop中奇怪的UnsatisfiedLinkError

> ID：10300053
> 
> 赞同：0
> 
> 时间：2012-04-24T14:29:50.807
> 
> 标签：java, hadoop, java-native-interface, mapreduce

我在 OpenCV linux 版本上做了一个 cmake，它创建了所有需要的共享对象（库）。我什至可以在我的系统上使用 JNI 从 Java 调用使用这些库的示例 OpenCV 程序。它正在运行。但是当我尝试使用 Hadoop Mapper 加载 libhighgui.so.2.0 时

```
System.load("path/to/libhighgui.so.2.0"); 
```

我得到错误：

```
UnsatisfiedLinkError:/path/to/libhighgui.so.2.0: libjpeg.so.62: cannot
open shared object file: No such file or directory 
```

有趣的是，OpenCV 上的 CMake 并没有创建这个 libjpeg.so。

您有任何帮助/解决方案吗？提前致谢..

**编辑**：其他库正在成功加载，我正在使用分布式缓存来分发共享库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:47:07.477

`ldd path/to/libhighgui.so.2.0`命令行上的 yield 是什么？

您的共享库依赖于其他共享库，并且这些共享库在运行时在标准库路径上不可用。

您需要确保您的库所依赖的所有 .so 也在每个集群节点的库路径上（或者像 /lib 这样的标准系统路径，或者您需要修改 java.library.path 系统属性包括一个非标准目录 - 或者也只是使用 DistributedCache 推送它们，因为它将本地文件夹添加到库路径）

# html - iframe 与父级对齐

> ID：10300054
> 
> 赞同：0
> 
> 时间：2012-04-24T14:29:51.243
> 
> 标签：html, css, iframe, alignment

我的网站分为 4 个部分，每个部分都有一个 h3 和一个`<p>`. 中的所有内容`<p>` 都以`margin-left: auto; margin-right: auto;`它为中心，还具有背景颜色和边框。它的`<p>`内容也会自动增长。

其中之一`<p>`是一个 iframe，它也是居中的，但我需要它与左侧对齐。iframe 小于`<p>`.

float: left 有效，但 iframe 被`<p>`. 所以我`<p>`的只是在线，而 iframe 会浮出水面。

知道为什么会这样吗？

[http://jsfiddle.net/dennym/KBShz/](http://jsfiddle.net/dennym/KBShz/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:48:27.843

尝试添加：

```
#another p { overflow: hidden; } 
```

更新小提琴：http: [//jsfiddle.net/KBShz/13/](http://jsfiddle.net/KBShz/13/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:48:38.520

在这里，我更新了你的小提琴：

[http://jsfiddle.net/KBShz/14/](http://jsfiddle.net/KBShz/14/)

发生这种情况的原因是浏览器如何处理浮动元素。它们的行为不同，它们的容器不再适合它们。在这种情况下使用`text-align: left`。

在其他情况下，您可能需要将 a`<div style="clear:both"></div>`放在容器 div 的末尾，以告诉它增长以适应其内容。

# c# - 非托管 C++ 在构建或不使用 COM 时通过自动注册调用 C# dll？

> ID：10300059
> 
> 赞同：0
> 
> 时间：2012-04-24T14:30:09.327
> 
> 标签：c#, c++, dll, com, dllregistration

我有一个需要调用 C# dll 的 C++ 函数。C++ 函数只是将值发送到 C# dll 函数。C# dll 使用这些值生成一些文件，然后完成。

我的问题是，使用 COM 时，每次使用不同的计算机时都需要注册 DLL。那么，有没有办法注册 dll 文件并在构建时生成 .tlb 文件？

复制 $(TargetPath) $(TargetDir) C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\RegAsm.exe $(TargetPath) /codebase CReportGenerationDLL.dll /tlb:CReportGenerationDLL.tlb

这是我尝试过的，但它不起作用..我退出代码 9009

//Pewdut

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T14:48:31.593

如果您的意思是每次在另一台计算机上**构建**应用程序时自动注册您的 COM 对象，那么答案是（假设您使用 VS2010 进行构建）：转到 Project/Properties/Build 事件并添加到“构建后事件命令行”以下行：

```
regasm <path to your COM .dll> 
```

如果您的意思是每次在另一台计算机上**运行**您的应用程序时自动注册您的 COM 对象，那么您可以创建一个批处理文件，其中包含：

```
regasm <path to your COM .dll>
<path to your application>app.exe" 
```

或者只是使用 ShellExecute 函数从您的应用程序中调用 regasm.exe。

您可能需要添加 /s 开关以使注册静默。

错误 9009 表示您的 regasm 路径错误，请参见[此处](http://support.microsoft.com/kb/908268)

复制 $(TargetPath) $(TargetDir) 不合适，你为什么需要这个，你想达到什么目的？

# c# - 如何在 OpenDocument 中保存 .NET DateTime

> ID：10300060
> 
> 赞同：2
> 
> 时间：2012-04-24T14:30:09.420
> 
> 标签：c#, .net, opendocument

我正在使用 C# 以 XML 格式编写 OpenDocument 电子表格。编写双精度值没问题，就像这样可以正常工作：

```
 private void SaveFloatCell(XmlNode rowNode, XmlDocument ownerDocument, double number)
    {
        XmlElement cellNode = ownerDocument.CreateElement("table:table-cell", this.GetNamespaceUri("table"));

        XmlAttribute valueType = ownerDocument.CreateAttribute("office:value-type", this.GetNamespaceUri("office"));
        valueType.Value = "float";
        cellNode.Attributes.Append(valueType);

        XmlAttribute value = ownerDocument.CreateAttribute("office:value", this.GetNamespaceUri("office"));
        value.Value = number.ToString(CultureInfo.InvariantCulture);
        cellNode.Attributes.Append(value);

        rowNode.AppendChild(cellNode);
    } 
```

但是，当尝试保存 DateTime 值时，我无法正确显示它们。这是我到目前为止所拥有的，它在单元格中显示“2012”而不是指定的日期格式：

```
 private void SaveDateTimeCell(XmlNode rowNode, XmlDocument ownerDocument, double number, string format)
    {
        XmlElement cellNode = ownerDocument.CreateElement("table:table-cell", this.GetNamespaceUri("table"));

        XmlAttribute valueType = ownerDocument.CreateAttribute("office:value-type", this.GetNamespaceUri("office"));
        valueType.Value = "date";
        cellNode.Attributes.Append(valueType);

        XmlAttribute value = ownerDocument.CreateAttribute("office:value", this.GetNamespaceUri("office"));
        value.Value = Utils.DateTime(number).ToString("yyyy-mm-ddThh:mm:ss");
        cellNode.Attributes.Append(value);

        rowNode.AppendChild(cellNode);
    } 
```

我花了很长时间玩我发现的各种代码片段，但没有成功。顺便说一句，有没有任何慷慨的灵魂可以帮助我解决这个问题？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:32:13.210

鉴于当前已损坏，您可能只需要修复格式*：*

```
value.Value = Utils.DateTime(number).ToString("yyyy-MM-ddTHH:mm:ss"); 
```

变化：

*   使用 M 表示月份，而不是 m（表示分钟）
*   使用 HH 表示小时，而不是 hh（即 12 小时制）

我建议您也指定inh `CultureInfo.InvariantCulture`，以表明您不希望应用任何文化设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T12:59:58.680

好的，我有答案了。最终代码如下所示：

```
 private void SaveDateTimeCell(XmlNode rowNode, XmlDocument ownerDocument, double number, string format)
    {
        XmlElement cellNode = ownerDocument.CreateElement("table:table-cell", this.GetNamespaceUri("table"));

        XmlAttribute valueType = ownerDocument.CreateAttribute("office:value-type", this.GetNamespaceUri("office"));
        valueType.Value = "date";
        cellNode.Attributes.Append(valueType);

        XmlAttribute value = ownerDocument.CreateAttribute("office:date-value", this.GetNamespaceUri("office"));
        value.Value = Utils.DateTime(number).ToString("yyyy-MM-ddTHH:mm:ss");
        cellNode.Attributes.Append(value);

        XmlAttribute tableStyleName = ownerDocument.CreateAttribute("table:style-name", this.GetNamespaceUri("table"));
        tableStyleName.Value = "ce2";
        cellNode.Attributes.Append(tableStyleName);

        rowNode.AppendChild(cellNode);
    } 
```

关键是“ce2”的定义。这是在解压后的 *.ods 文件的 styles.xml 文件中完成的：

```
 private void SaveStyleSheet(XmlNode sheetsRootNode)
    {
        XmlDocument ownerDocument = sheetsRootNode.OwnerDocument;

        XmlNode sheetNode = ownerDocument.CreateElement("number:date-style", this.GetNamespaceUri("number"));

        XmlAttribute styleName = ownerDocument.CreateAttribute("style:name", this.GetNamespaceUri("style"));
        styleName.Value = "N19";
        sheetNode.Attributes.Append(styleName);

        XmlElement numberDay = ownerDocument.CreateElement("number:day", this.GetNamespaceUri("number"));
        XmlAttribute numberStyle = ownerDocument.CreateAttribute("number:style", this.GetNamespaceUri("number"));
        numberStyle.Value = "long";
        numberDay.Attributes.Append(numberStyle);
        sheetNode.AppendChild(numberDay);

        XmlElement numberText = ownerDocument.CreateElement("number:text", this.GetNamespaceUri("number"));
        numberText.InnerText = "/";
        sheetNode.AppendChild(numberText);

        XmlElement numberMonth = ownerDocument.CreateElement("number:month", this.GetNamespaceUri("number"));
        XmlAttribute numberStyle2 = ownerDocument.CreateAttribute("number:style", this.GetNamespaceUri("number"));
        numberStyle2.Value = "long";
        numberMonth.Attributes.Append(numberStyle2);
        sheetNode.AppendChild(numberMonth);

        XmlElement numberText2 = ownerDocument.CreateElement("number:text", this.GetNamespaceUri("number"));
        numberText2.InnerText = "/";
        sheetNode.AppendChild(numberText2);

        XmlElement numberYear = ownerDocument.CreateElement("number:year", this.GetNamespaceUri("number"));
        XmlAttribute numberStyle3 = ownerDocument.CreateAttribute("number:style", this.GetNamespaceUri("number"));
        numberStyle3.Value = "long";
        numberYear.Attributes.Append(numberStyle3);
        sheetNode.AppendChild(numberYear);

        sheetsRootNode.AppendChild(sheetNode);
    } 
```

然后在解压缩的 *.ods 文件的 content.xml 的自动样式中引用此日期样式 N19，因此：

```
 private void SaveAutomaticStyleSheet(XmlNode sheetsRootNode)
    {
        XmlDocument ownerDocument = sheetsRootNode.OwnerDocument;

        XmlNode sheetNode = ownerDocument.CreateElement("style:style", this.GetNamespaceUri("style"));

        XmlAttribute styleName = ownerDocument.CreateAttribute("style:name", this.GetNamespaceUri("style"));
        styleName.Value = "ce2";
        sheetNode.Attributes.Append(styleName);

        XmlAttribute styleFamily = ownerDocument.CreateAttribute("style:family", this.GetNamespaceUri("style"));
        styleFamily.Value = "table-cell";
        sheetNode.Attributes.Append(styleFamily);

        XmlAttribute styleParentStyleName = ownerDocument.CreateAttribute("style:parent-style-name", this.GetNamespaceUri("style"));
        styleParentStyleName.Value = "Default";
        sheetNode.Attributes.Append(styleParentStyleName);

        XmlAttribute styleDataStyleName = ownerDocument.CreateAttribute("style:data-style-name", this.GetNamespaceUri("style"));
        styleDataStyleName.Value = "N19";
        sheetNode.Attributes.Append(styleDataStyleName);

        sheetsRootNode.AppendChild(sheetNode);
    } 
```

事实上，Jon 的建议对于代码完美运行也是必要的。所以再次感谢乔恩。无论如何，确实是一种黑色，黑色的艺术...... :)

# asp.net - 我可以创建 .config 文件并将其包含到 web.config 中吗？

> ID：10300063
> 
> 赞同：34
> 
> 时间：2012-04-24T14:30:18.987
> 
> 标签：asp.net, config

我可以创建 .config 文件并将其包含到 web.config 中吗？我怎样才能做到这一点？

UPD。如果你想分离配置文件，例如，将 appSettings 移动到另一个文件，你必须下一步：在 web.config

```
 <appSettings configSource="myAppSettings.config" /> 
```

在 myAppSettings.config 中：

```
 <appSettings>
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings> 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-24T14:32:40.230

尚不完全清楚您要做什么，但所有配置部分都可以存储在单独的文件中，并由`.config`使用[`configSource`](http://msdn.microsoft.com/en-us/library/system.configuration.sectioninformation.configsource.aspx)属性的主文件引用。

有关详细信息，请参阅[此](http://weblogs.asp.net/fmarguerie/archive/2007/04/26/using-configsource-to-split-configuration-files.aspx)博客文章。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-04-24T14:34:17.247

这是将多个配置集成到一个 web.config 中的方法

web.config 中的代码：

```
<appSettings configSource="config\appSettings.config"/>
<nlog configSource="config\nlog.config"/>
<applicationSettings>
        <MyApp.UI.Properties.Settings configSource="config\Settings.APGUI.config"/>
        <MyApp.BusinessServices.Properties.Settings configSource="config\Settings.Business.config"/>
        <MyApp.Auditing.Properties.Settings configSource="config\Settings.Auditing.config"/>
</applicationSettings> 
```

更多：[在部署环境之间管理复杂的 Web.Config 文件](https://stackoverflow.com/questions/428573/managing-complex-web-config-files-between-deployment-environments)

# ruby-on-rails - 带有 ruby on rails 的 twitter 引导模式

> ID：10300064
> 
> 赞同：9
> 
> 时间：2012-04-24T14:30:20.370
> 
> 标签：ruby-on-rails, controller, twitter-bootstrap, modal-dialog

我遇到了一些问题和头疼的问题，因为我不确定 RoR 是否可以实现我想要做的事情。

一些背景信息：我有一个带有多个控制器的应用程序......并且希望在这个模态示例中使用其中的 2 个。第一个是 users_controller，另一个是 Recommendations_controller。

这是我想要做的：在用户索引视图中，我有一个帖子列表。每个帖子都有一个推荐按钮。如果用户点击它，他/她将被发送到推荐索引页面，并且可以搜索并找到他/她想要与之分享帖子的用户。我以这种方式设置它的原因是因为 Recommendation 模型创建了推荐关系。

我想要它，所以当用户单击用户索引页面上的推荐按钮时，会出现一个模式（访问推荐控制器的模式），用户可以搜索他/她想与之分享帖子的用户。基本上，我想知道是否可以通过用户控制器的索引视图页面访问推荐控制器。

如果不是，是否有解决方法？如果有帮助，我可以发布我拥有的代码，但我不确定在这种情况下是否会有所帮助——因为我正在尝试看看是否有可能做我想做的事情。

谢谢！

**更多细节：**

建议控制器：

```
 def index
    @user = Search.find_users(params[:name], current_profile)

    respond_to do |format|
      format.html
      format.js
    end   
  end 
```

index.js.haml（位于 view/recommendations 文件夹中）

```
 :plain
    $(#my-modal).show(); 
```

index.html.haml（位于 view/recommendations 文件夹中）

```
 = form_tag post_recommendations_url, :method => "get" do
    = text_field_tag :name, '', :class => "span12", :placeholder => "Please enter the name of the users you would like to share this post with."
    %center
      = submit_tag "Search", :class => "btn btn-primary" 
```

index.html.haml（位于 view/posts 文件夹中）

```
 %a{:href => "#{post_recommendations_path(post)}", :remote => true}
    %i.icon-share.icon-large
    Recommend Post

#my-modal.modal.hide.fade
  .modal-header
    %a.close{"data-dismiss" => "modal"} ×
    %h6 This is a header
  .modal-body
  %p This is where I would like the contents of the index.html.haml file, located in the view/recommendations folder to appear. 
```

## **第 2 部分：在 modal/partial 中显示搜索结果**

Matzi，目前，用户点击他们想要推荐的帖子附近的链接。此链接在其中呈现带有部分 (_recommendation.html.haml) 的模式。

这个部分（现在在模式中）包含搜索`form_tag`和呈现与搜索结果匹配的所有用户的代码。不幸的是，当我尝试通过输入名称并单击搜索按钮（同样，现在位于模式内部）来运行搜索时，它会将我带到以下 url，而不是在模式内部呈现结果。

`http://localhost:3000/posts/2/recommendations?utf8=%E2%9C%93&name=Test&commit=Search`

这是我更新**后的 index.html.haml（位于 view/posts 文件夹中）的**样子：

```
= link_to 'Recommend Post', post_recommendations_path(post), :remote => true, "data-toggle" => "modal"

#my-modal.modal.hide
.modal-header
  %a.close{"data-dismiss" => "modal"} ×
  %h6 
    %i.icon-share.icon-large
    Recommend Post
.modal-body
  #modal-rec-body
    %p *this is where _recommendation.html.haml is rendered* 
```

更新**了 index.js.haml**

```
:plain
  $("#modal-rec-body").html("#{escape_javascript(render('recommendations/recommendation'))}");

  $('#my-modal').modal({
    keyboard: true,
    show: true
  }); 
```

**_recommendation.html.haml**

```
.span12
  = form_tag post_recommendations_path, :method => "get" do
    = text_field_tag :name, '', :class => "span12", :placeholder => "Please enter the name of the user you would like to share this post with.", :style => "max-width:520px;"
    %center
      = submit_tag "Search", :class => "btn btn-primary", :remote => "true"

- @user.each do |i|
  - unless current_profile == i
    .row-fluid
      .span6
        .row-fluid
          .well{:style => "margin-left:0px;"}
            .row-fluid
              .span2
                =image_tag i.avatar(:bio), :class=> "sidebar_avatar"
              .span6
                %dl{:style => "margin:0px"}
                  %dt
                    %i.icon-user
                    Name
                  %dd= i.name
                  %dt
                    %i.icon-map-marker
                    Location
                  %dd= i.location
              .span4
                - form_for :recommendation do |r|
                  = r.hidden_field :friend_id, :value => i.account.id 
                  = r.submit "Send Recommendation", :class => "btn btn-primary" 
```

**问题：**不幸的是，似乎当我单击模式内的提交（搜索）按钮而不是在模式内呈现结果时，它会将浏览器重定向到`post_recommendations_path (posts/post.id/recommendations)`. 我想在模态框内显示搜索结果，而无需将其重定向到帖子推荐路径。

一如既往，非常感谢！我非常感谢您的帮助——感谢您，我对 AJAX 有了更好的了解。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T14:47:00.993

当然你可以这样做，但它需要一些 ajax 魔法。

首先，您需要在推荐控制器中创建一个响应 .js 请求的操作。到目前为止，它已在您的更新中完成。但是，您的 .js 不太正确。问题是您从帖子视图呈现模态表单，但可能在帖子控制器中您没有正确的字段。我推荐以下 .js.erb：

```
$("#modal-body").html(<%= escape_javascript render(:partial => 'recommendations/index')%>);
$("#my-modal").show(); 
```

这会用表单填充模式。下一步是从此表单执行远程请求。通过以下方式修改您的帖子/索引：

```
 = form_tag post_recommendations_url, :remote => true, :method => "get" do
    = text_field_tag :name, '', :class => "span12", :placeholder => "Please enter the name of the users you would like to share this post with."
    %center
      = submit_tag "Search", :class => "btn btn-primary" 
```

区别在于`:remote => true`标签，这会向您的控制器发送 ajax 请求，因此您必须准备 .js 和 .html 响应（以防客户端上没有 JS）。.js 应该隐藏模态表单，并可能刷新原始页面，html 可能会将您重定向回帖子。

**第 2 部分：** 问题是 :remote 部分。它需要是表单定义的一部分，而不是提交按钮的定义。我的错。

我现在找到[了这个指南](http://www.alfajango.com/blog/rails-3-remote-links-and-forms/)，它看起来很不错。

我希望它有帮助！问有什么不清楚的。

# programming-languages - 如何开发像 Coffee Script 这样的编程语言？

> ID：10300065
> 
> 赞同：7
> 
> 时间：2012-04-24T14:30:20.807
> 
> 标签：programming-languages

开发像咖啡脚本这样的编程语言，基本上有自己的语法，但在编译成另一种语言后，我需要知道什么初始要求。我对此进行了谷歌搜索，但找不到正确的答案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T15:15:29.443

*   [用EBNF 之](http://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_Form)类的基本[形式语法](http://en.wikipedia.org/wiki/Formal_grammar)指定您的语言。

    ```
    statement        = if-statement
                     | return-statement
                     | expression
                     | ...

    if-statement     = "if" "(" expression ")" "{" statements "}"

    return-statement = "return" expression ";"

    ... 
    ```

*   了解[递归下降](http://en.wikipedia.org/wiki/Recursive_descent_parser)和[运算符优先级](http://effbot.org/zone/simple-top-down-parsing.htm)的简单[解析](http://en.wikipedia.org/wiki/Parsing)。

*   编写一个从源文件创建[抽象语法树的解析器。](http://en.wikipedia.org/wiki/Abstract_syntax_tree)

*   编写一个[代码生成器](http://en.wikipedia.org/wiki/Code_generation_%28compiler%29)，将这个 AST 转换成你的目标语言；或者

*   编写一个仅评估 AST的[解释器。](http://en.wikipedia.org/wiki/Interpreter_%28computing%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T18:10:27.380

一个好的第一步是阅读[Programming Languages: Application and Interpretation](http://www.cs.brown.edu/~sk/Publications/Books/ProgLangs/)。它将教你如何使用解释器设计和实现语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T14:41:43.817

最初的要求是：

*   确定目标计算机语言
*   开发新语言的语法
*   将新语言的语法映射到目标语言。

您还有很多工作要做，但基本上，您正在将您的新语言翻译成目标语言。

# iphone - 适用于 Apple 设备的 Sencha 触控包装

> ID：10300066
> 
> 赞同：1
> 
> 时间：2012-04-24T14:30:22.053
> 
> 标签：iphone, ipad, mobile, extjs, native

尝试将我的 sencha touch 2 测试应用程序加载到 iPhone 和 iPad 等设备时，我收到以下错误消息：

> 申请成功打包
> 
> codesign_allocate：对于架构 armv7 对象：/Applications/XAMPP/xamppfiles/htdocs/build//testApp.app/stbuild_template 格式错误的对象（未知的加载命令 8）../build//testApp.app：对象文件格式无效或不合适
> 
> 签署应用程序时执行系统命令失败，错误 256
> 
> 打包申请失败

我已经创建了相应的供应证书、apple id、.pem 文件和 .p12 文件；我已按照 sencha 的 API[网站上的说明进行操作](http://docs.sencha.com/touch/2-0/#!/guide/native_packaging)

我还发现 Youtube 视频解释了从开始到结束的过程，直到最后一步似乎一切正常。我试图用谷歌搜索错误消息，但我收到的答案不是很明确，有很多“也许”

我正在运行 Mac OSX 版本 10.6.8 和 xcode 版本 4.0.2。任何具体的建议将不胜感激，因为我已经为此工作了 2 天

谢谢你

# mathml - 如何将 Mathml 公式加载到 Libreoffice

> ID：10300067
> 
> 赞同：4
> 
> 时间：2012-04-24T14:30:22.740
> 
> 标签：mathml, libreoffice

我有一个 MATHML 公式（由[http://www.mathtoweb.com/cgi-bin/mathtoweb_online.pl](http://www.mathtoweb.com/cgi-bin/mathtoweb_online.pl)生成）。我想将它粘贴到 Libreoffice 中。我怎么能那样做？

或者更好的是，我想将其转换为 odf-formula 标准。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-16T11:57:13.120

最新的 Libreoffice v 5.1 可以直接从剪贴板导入 mathml 公式。目前 5.1 是 beta 版本，但您可以在[此处下载 beta 版本](http://www.libreoffice.org/download/pre-releases/)

截图是俄语的（不幸的是，我的测试版只支持俄语语言），但它是如何做到的（工具-> 从剪贴板导入 MathML） [![数学导入](../Images/8eedd4bd4a289d47db59cc870583a533.png)](https://i.stack.imgur.com/fJKKA.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T15:26:05.153

您是否尝试使用“导入公式”功能？

只需插入一个新的公式对象：

![插入公式](../Images/bb762fa794816c9fdbd5b2b89f6e2680.png)

你有两种导入方法。第一个，将 MathML 导入为 XML：

![导入公式](../Images/2d627797bd2bea999c1820fb77504472.png)

要导入，请将 MathML 代码粘贴到文本文件中，并使用文件扩展名`.mml`. 这样，LO Math 应该可以识别 MathML 内容并将其转换为其内部格式。

第二种方法，“从剪贴板导入 MathML”（在 LO 5.2 中支持）： ![导入公式](../Images/fd6a07e482f0f6905d16d0840466d1a7.png)

# javascript - JavaScript 在 IE 中工作，但在 Firefox 中不工作

> ID：10300068
> 
> 赞同：-1
> 
> 时间：2012-04-24T14:30:27.343
> 
> 标签：javascript

```
function onLoadMoneyEarned(size){
    for(var i=1;i<=size;i++){
        var countStr1 = 'howOften__JB1_'+i;
        var countStr2 = 'howOften__JB2_'+i;
        var countStr3 = 'howOften__JB3_'+i;
        var countStr4 = 'howOften__JB4_'+i;

        var hrsPerWeek1 = 'hrsPerWeek__JB1_'+i
        var hrsPerWeek2 = 'hrsPerWeek__JB2_'+i
        var hrsPerWeek3 = 'hrsPerWeek__JB3_'+i
        var hrsPerWeek4 = 'hrsPerWeek__JB4_'+i

        var dropDownValue1 = document.getElementById(countStr1).value;
        var dropDownValue2 = document.getElementById(countStr2).value;
        var dropDownValue3 = document.getElementById(countStr3).value;
        var dropDownValue4 = document.getElementById(countStr4).value;

        var textbox1 = document.getElementById(hrsPerWeek1);
        textbox1.disabled = true;
        var textbox2 = document.getElementById(hrsPerWeek2);
        textbox2.disabled = true;
        var textbox3 = document.getElementById(hrsPerWeek3);
        textbox3.disabled = true;
        var textbox4 = document.getElementById(hrsPerWeek4);
        textbox4.disabled = true;

        if(dropDownValue1=="HR"){
            textbox1.disabled = false;
        }
        if(dropDownValue2=="HR"){
            textbox2.disabled = false;
        }
        if(dropDownValue3=="HR"){
            textbox3.disabled = false;
        }
        if(dropDownValue4=="HR"){
            textbox4.disabled = false;
        }
    } 
```

这是在IE中工作的那个..

我这样调用脚本

```
<script  language="javascript" type="text/javascript">
$(window).load(function(){onLoadMoneyEarned("<%=nameLength%>");});
</script> 
```

该脚本的主要功能是仅当我们在旁边的下拉列表中选择每小时时才启用小时数文本字段。但它在 Firefox 中引发验证错误

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:35:44.940

结尾的花括号似乎不见了。尝试在 onLoadMoneyEarned 函数的最后添加一个结束 }。

# fonts - 为什么字体质量与 HTML 中的 PSD 不同

> ID：10300069
> 
> 赞同：0
> 
> 时间：2012-04-24T14:30:28.390
> 
> 标签：fonts, xhtml, psd

当我将 PSD 转换为 XHTML+CSS 时，我一直觉得最常见的问题是字体边缘和大小单位的松脆度。

在 Photoshop 中字体大小单位是 pt，在 css 中是 px。现在 Photoshop 中的平滑度非常棒，但是当我将它转换为 XHTML 时，对于 myrid pro 等常见字体和我使用 @font-face 属性的稀有字体，我都无法达到同样的平滑度。

现在最近我将 PSD 转换为 XHTML，使用的字体是 GothamHTF，我使用@font-face 使该字体在网站上可用，但问题是我无法达到与在 Photoshop 中相同的文本相同的质量， 字体大小。

有没有人面临同样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:34:22.490

Photoshop 有一个用于渲染字体的引擎。这五个浏览器还有一个用于渲染字体的引擎。

这些引擎是不同的，因此，字体并不总是显示相同（或有时非常好）。

确保在选定位置进行质量控制的最佳方法是使用标题或文字的图像。否则，最好理解一种字体不会在所有屏幕媒体上显示相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-06T21:11:50.637

使用图像作为标题或文本片段并不方便。这样，谷歌或任何其他搜索引擎都不会索引您用作图像的文本。对 SEO 不友好。

# special-characters - 在 URL 查询中传递“点斜杠”序列

> ID：10300070
> 
> 赞同：0
> 
> 时间：2012-04-24T14:30:28.840
> 
> 标签：special-characters, url-encoding

在我正在处理的 ASP.net Web 应用程序中，有一个如下所示的链接

```
<a href="search.aspx?orig_q=source:%22INFCE/DEP./WG--8/48%22">INFCE/DEP./WG--8/48</a> 
```

当我单击该链接时，它会给出一个 File not found (404) 错误。我做了一些研究，认为是链接中存在“./”（点斜杠）序列导致了这个错误。

我尝试对链接进行如下编码（尽管 URL 中的句点可以）

```
<a href="search.aspx?orig_q=source:%22INFCE%2FDEP%2E%2FWG--8%2F48%22">INFCE/DEP./WG--8/48</a> 
```

但是，它没有帮助。它仍然给我同样的错误。有什么办法可以克服这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:37:05.937

在我看来，你不应该在里面放那些 %22 。%22 是用于引用的 ascii 字符。我想这可能会影响你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T04:55:02.240

IIS 7.5 具有过滤出现在查询字符串中的字符序列的规则。点斜线就是其中之一，这是一个潜在的安全威胁。可以通过在 web.config 下的 web.config 中添加以下标记来克服`<security>`

```
<requestFiltering>
    <denyQueryStringSequences>
      <remove sequence="./"/>
    </denyQueryStringSequences>
</requestFiltering> 
```

# c# - 使用 Singleton 时在 Winforms 之间传递属性

> ID：10300077
> 
> 赞同：0
> 
> 时间：2012-04-24T14:30:44.643
> 
> 标签：c#, winforms, properties, singleton

好的，所以我试图将一个布尔值从我的登录表单传递到我的主页表单，通常这对我来说很好，我只会使用一个属性。但是我认为这次我可以使用类似的方法，但我正在表单上实现单例工厂。

这是与此相关的登录代码： AdminAccess 属性设置得很好，我检查了该值是否正确。

```
private bool adminAccess;

public bool  AdminAccess
    {
        get { return adminAccess; }
        private set { adminAccess = value; }
    }

private void btnLogin_Click(object sender, EventArgs e)
    {
        //Some Code Does Stuff

         OpenHome();
    }

private void OpenHome()
    {
        HomeForm CreateHomeForm = HomeForm.HomeUI;
        CreateHomeForm.StartupHome = this;

        //Trying to set the property.
        CreateHomeForm.AdminPermissions= this.AdminAccess;

        CreateHomeForm.Show();
        this.Hide();
    } 
```

以下是 Home 表单中的相关代码：

```
public HomeForm()
    {
        InitializeComponent();
        //just to check what is in the property quickly
        textBox1.Text = AdminPermissions.ToString();
    }

private bool adminPermissions;
public bool AdminPermissions
    {
        private get { return adminPermissions; }
        set { adminPermissions = value; }
    }

public Form StartupHome
    {
        set;
        get;
    }

private static HomeForm homeUI;
public static HomeForm HomeUI
    {
        get
        {
            if (homeUI == null || homeUI.IsDisposed)
            {
                homeUI = new HomeForm();
            }
            return homeUI;
        }
    } 
```

当 HomeUI if 循环在创建表单的新实例时运行时，该值将被重置。我似乎无法考虑如何修改它以获得有效的解决方案。如您所知，我相当业余，所以我只是在寻找一种快速而干净的解决方案:) 非常感谢您提前抽出时间！

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:38:21.990

`AdminPermissions`在实际设置属性之前，您在构造函数中分配值。像这样更改您的代码

```
public class HomeForm
{
    public HomeForm()
    {
        InitializeComponent();
    }

    private bool adminPermissions;  
    public bool AdminPermissions
    {
        get { return adminPermissions; }
        set { 
            adminPermissions = value;
            textBox1.Text = value.ToString();
        }
    }

    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:44:33.313

尝试在其中一个事件中设置`textBox1.Text`值。先试，`Form`再试。您在构造函数中将其重置为每次！`Loaded``Activated``false`**

# system.reactive - 反应式扩展中缺少方法

> ID：10300079
> 
> 赞同：0
> 
> 时间：2012-04-24T14:30:56.577
> 
> 标签：system.reactive, eventaggregator

我正在尝试使用 RX(Reactive extensions) 实现事件聚合器，这是我正在使用的代码，但 缺少**subject.AddDisposable**方法。谁能帮我？也许它是旧版本所以在新版本的 Rx 中这个方法被删除了？如果是这种情况，那么实现这一点的正确方法是什么？

```
 if (_observablesByTypeKey.ContainsKey(key))
            {
                Tuple<object, object> tuple = _observablesByTypeKey[key];
                stream = (IObservable<T>)tuple.Item2;
            }
            else
            {
                Type specificSubjectType = typeof(Subject<>).MakeGenericType(new[] { typeof(T) });
                var subject = (Subject<T>)Activator.CreateInstance(specificSubjectType, new object[] { });

                var removeEventStreamFromCache = Disposable.Create(
                    () =>
                        {
                            lock (_observablesByTypeKeyLock)
                            {
                                _observablesByTypeKey.Remove(key);
                            }
                        }
                    );

                stream = subject.AddDisposable(removeEventStreamFromCache).Publish().RefCount();

                var tuple = new Tuple<object, object>(subject, stream);
                _observablesByTypeKey.Add(key, tuple); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T23:53:03.130

你可以更换

```
stream = subject.AddDisposable(removeEventStreamFromCache).Publish().RefCount(); 
```

和

```
stream = Observable.Create(observer => 
  new CompositeDisposable(
    subject.Subscribe(observer),
    removeEventStreamFromCache));
stream.Publish().RefCount(); 
```

# ruby-on-rails-3 - 权衡路线和视图 rails 3

> ID：10300080
> 
> 赞同：0
> 
> 时间：2012-04-24T14:31:05.830
> 
> 标签：ruby-on-rails-3, routes

这里是 routes.db

```
resources :licenses  do 
 resources :sublicenses do
  resources :time_licenses
 end
end 
```

然后有一个客户端应用程序调用 time_licenses_controller 来创建新的 time_licenses，控制器以 json 文件响应，但我不需要显示任何视图。

在其他地方，我需要向客户显示一个索引文件，其中包括每个子许可证的所有 time_licenses。这就是路径

```
license/:id/sublilicense/:id/time_lincenses 
```

现在我的路线有问题。当我在 time_licenses_controller 上调用 create 时，我收到此错误：

```
No route matches "/time_licenses.js" 
```

我可以解决像这样更改 routes.db 文件的问题

```
resources :time_licenses
resources :licenses  do 
 resources :sublicenses
end 
```

但在那种情况下，我在链接索引视图时遇到同样的错误。

你有什么建议？我必须创建两个不同的控制器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T04:48:57.137

Since you are using nested resources, you will always need to specify license and sublicense while specifying the path to timelicense. Your path helpers will be:

```
license_sublicense_timelicense_path(@license, @sublicense, @timelicense) and so on 
```

You can get the path names for the timelicense by

```
rake routes 
```

Refer [rails guides - nested resources](http://guides.rubyonrails.org/routing.html#nested-resources) for any doubts.

# python - 如何防止python pylint抱怨套接字类sendall方法

> ID：10300082
> 
> 赞同：11
> 
> 时间：2012-04-24T14:31:18.110
> 
> 标签：python, pylint

我有一些代码使用简单的 tcp 套接字设置来测试一些东西。我们`pylint --errors-only`在 python 文件上运行，通常作为验证所有代码的一种方式。

但是，python 套接字库文档中给出的简单示例代码 - [http://docs.python.org/library/socket.html](http://docs.python.org/library/socket.html) - 将输出：

```
************* Module SocketExample
E: 16: Instance of '_socketobject' has no 'recv' member
E: 18: Instance of '_socketobject' has no 'sendall' member 
```

文档显示了这些成员，代码运行和工作。

一个套接字目录显示它们也存在：

```
>>> import socket
>>> s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
>>> dir(s)
['__class__', '__delattr__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__module__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__slots__', '__str__', '__subclasshook__', '__weakref__', '_sock', 'accept', 'bind', 'close', 'connect', 'connect_ex', 'dup', 'family', 'fileno', 'getpeername', 'getsockname', 'getsockopt', 'gettimeout', 'listen', 'makefile', 'proto', 'recv', 'recv_into', 'recvfrom', 'recvfrom_into', 'send', 'sendall', 'sendto', 'setblocking', 'setsockopt', 'settimeout', 'shutdown', 'type'] 
```

这归结为片段：

```
 for method in _delegate_methods:
        setattr(self, method, getattr(_sock, method)) 
```

在 socket.py 实现中。

可以让 pylint 接受这种风格（并验证它）还是唯一选择忽略“无成员”警告`# pylint: disable-msg=E1101`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T18:03:01.040

您可以使用`pylint --errors-only --ignored-classes=_socketobject`或添加

```
[TYPECHECK]
ignored-classes=SQLObject,_socketobject 
```

到你的`~/.pylintrc`文件。

从[文档](http://pylint.pycqa.org/en/1.8/technical_reference/features.html?highlight=ignored-classes#id34)中，

> **忽略类**：
> 
> 不应检查其成员属性的类名称列表（对于动态设置属性的类很有用）。
> 
> 默认值：*SQLObject*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T15:46:11.227

使用[http://www.logilab.org/blogentry/78354](http://www.logilab.org/blogentry/78354)中定义的技巧，我们可以开始向 pylint 添加一个通用的 astng 插件，这将帮助他从 stdlib 中理解这些东西（还有各种关于 hashlib 的票/评论在跟踪器中）。

这确实是一个很大的进步。有志愿者吗？:)

除此之外，我认为除了禁用消息之外没有其他选择。

# asp.net - 为什么 IIS 重定向就像未设置默认文档一样？

> ID：10300083
> 
> 赞同：0
> 
> 时间：2012-04-24T14:31:18.920
> 
> 标签：asp.net, iis

这是一件小事，但它让我发疯，我希望 IIS 专家可以提供帮助。

场景很简单：

*   IIS 被配置为“default.aspx”是站点的默认文档。
*   表单身份验证已开启，loginUrl 为 default.aspx，defaultURL 为 default.aspx
*   在web.config中，default.aspx文件的授权是'*'（任何人都可以访问）

当我仅使用基本 URL 导航到该站点时：www.somesite.com 该 URL 会返回：www.somesite.com/default.aspx?ReturnUrl=%2f

如果我导航到全名 (www.somesite.com/default.aspx)，它没有 ReturnUrl。那么，为什么当 IIS 添加名称时，我们会得到奇怪的重定向，但在我们键入时却没有呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:33:28.090

您还需要添加`<allow users="?" />`以允许未登录的用户。

# ios - 发布一个具有多个（外语）名称的 iOS 应用程序？

> ID：10300086
> 
> 赞同：15
> 
> 时间：2012-04-24T14:31:22.460
> 
> 标签：ios, app-store

是否可以重新发布具有不同标题的现有 iOS 应用程序？

该应用支持多种语言，但在应用商店中只有英文标题。我的想法很可能是任性的，我的潜在俄罗斯/印度/中国/法国观众看不到它。

听起来苹果不会支持的东西，但我想我还是会问。

如果它是可行的，那么我需要捆绑 id/prov 配置文件/dist 证书的方式是什么？每个应用程序一个？

提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-24T14:54:44.717

是的，您可以 - 只需本地化以下值`CFBundleDisplayName`：

1.  在 Xcode 中打开你的项目
2.  确保项目导航器在视图中*（视图 > 导航器 > 显示项目导航器，或 CMD+1）*
3.  确保文件检查器在视图中*（视图 > 实用程序 > 显示文件检查器，或 OPT+CMD+1）*
4.  在 Project Navigator 中选择**InfoPlist.strings**
5.  在文件检查器中，在本地化下单击 + 按钮并添加您要翻译成的语言（例如法语）
6.  在 Project Navigator 中，展开现在出现在 InfoPlist.strings 旁边的显示三角形并选择 InfoPlist.string（法语）
7.  添加以下行：

    ```
    CFBundleDisplayName = "Translated app name here"; 
    ```

![说明上述步骤的 Xcode 屏幕截图](../Images/b1e6317933f8e69221468dee294ce5b9.png)

正如@runmad 所建议的，您还可以在 iTunes Connect 中提供本地化的营销内容，包括本地化的应用名称。这不是强制性的，尽管它确实是有道理的。但请注意，iTunes Connect 仅支持一小组语言。[Apple 的iTunes Connect 开发人员指南](https://itunesconnect.apple.com/docs/iTunesConnect_DeveloperGuide.pdf)(PDF)中列出的当前支持 iTunes Connect 本地化的语言。截至该文档的当前版本（7.4），支持的语言是：

*   澳大利亚英语
*   巴西葡萄牙语
*   加拿大英语
*   荷兰语
*   英语
*   法语
*   法裔加拿大人
*   德语
*   意大利语
*   日本人
*   韩国人
*   拉丁美洲西班牙语
*   葡萄牙语
*   俄语
*   简体中文
*   西班牙语
*   瑞典
*   英国英语

如果您想将应用程序名称本地化为该列表之外的语言（比方说，匈牙利语），您可以使用上面在 Xcode 中概述的过程来完成，您在 Xcode 中提供的名称是匈牙利用户将看到的名称当他们在他们的设备上安装您的应用程序时，但在匈牙利应用程序商店中，该应用程序将列在（我假设）其英文名称下。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-24T14:37:09.130

是的。您需要在 iTunes Connect 中为所有国家/地区本地化应用程序，包括应用程序名称和描述。

最后，您还需要[本地化您的应用程序的捆绑包 ID](http://kb.applingua.com/2011/10/how-to-localize-app-names/)。

# css - 每个操作系统加载不同的样式表

> ID：10300087
> 
> 赞同：1
> 
> 时间：2012-04-24T14:31:23.757
> 
> 标签：css, operating-system, wordpress-theming

抱歉，如果这个问题看起来多余，但环顾四周，我发现每个浏览器都有很多关于条件 CSS 的问题，而不是操作系统。

有没有办法简单地为每个操作系统加载不同的样式表？（我试图绕过 Mac 上的像素行走背景。）我最好需要一个可以很好地集成到 Wordpress 子主题中的选项。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:34:53.697

最好的方法是通过用户代理将其分解，然后提供不同的样式表。如果您使用 wordperss 这将是 PHP。#

```
$_SERVER['HTTP_USER_AGENT'] 
```

[http://php.about.com/od/learnphp/p/http_user_agent.htm](http://php.about.com/od/learnphp/p/http_user_agent.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:18:38.493

几年前我也有同样的问题。我不得不搜索一段时间才能再次找到该文章，所以这里是文章中的代码：

```
function get_broswer_stylesheet ($test_by = 'browser')
{
    $broswer = array(
        'MSIE', // parent
        'OPERA',
        'MOZILLA',
        'NETSCAPE',
        'FIREFOX',
        'SAFARI',
        'CHROME'
        );

    $os = array(
        'MAC',
        'WINDOWS',
        'LINUX'
        );

    $info[browser] = 'OTHER';
    $info[os] = 'OTHER';

    $user_agent = $_SERVER['HTTP_USER_AGENT'];

    foreach ($broswer as $parent)
    {
        $s = strpos(strtoupper($user_agent), $parent);
        $f = $s + strlen($parent);
        $version = substr($user_agent, $f, 5);
        $version = preg_replace('/[^0-9,.]/', '', $version);
        if (strpos(strtoupper($user_agent), $parent))
        {
            $info[browser] = $parent;
            $info[version] = $version;
        }
    }

    foreach ($os as $parent)
    {
        if (strpos(strtoupper($user_agent), $parent))
        {
            $info[os] = $parent;
        }
    }

    if ($test_by == 'browser' || $test_by == 'os')
    {
        $string = '<link rel="stylesheet" type="text/css" href="' . get_bloginfo('template_directory') . '/css/';

        if ($test_by == 'browser')
        {
            if ($info[browser] == 'MSIE') {
                switch ($info[version])
                {
                    case 9 : $string .= 'ie9.css'; break;
                    case 8 : $string .= 'ie8.css'; break;
                    case 7 : $string .= 'ie7.css'; break;
                    default: $string .= 'ie6.css'; break;
                }
            } elseif ( $info[browser] == 'FIREFOX') {
                $string .= 'firefox.css';
            } elseif ($info[browser] == 'SAFARI') {
                $string .= 'safari.css';
            } elseif ($info[browser] == 'CHROME') {
                $string .= 'chrome.css';
            } else {
                $string .= 'style.css';
            }
        } elseif ($test_by == 'os') {
            if ($info[os] == 'MAC') {
                $string .= 'mac.css';
            } elseif ($info[os] == 'WINDOWS') {
                $string .= 'windows.css';
            } elseif ($info[os] == 'LINUX') {
                $string .= 'linux.css';
            } else {
                $string .= 'style.css';
            }
        }
        $string .= '">';

        return $string;
    }
} 
```

我希望这会有所帮助。您可以将`$test_by`参数设置为`browser`or `os`，它会尝试提供正确的样式表。

# java - 查找控制器方法的注解时，RequestMapping 注解导致空的 RequestMethod 数组

> ID：10300088
> 
> 赞同：1
> 
> 时间：2012-04-24T14:31:26.250
> 
> 标签：java, spring, reflection, spring-mvc, annotations

我们正在构建某种自动自我描述 REST 服务（实时文档生成）。为此，我们有一个控制器方法，它查找所有控制器 bean 并获取请求映射信息以将它们显示在一个友好的 html 页面中。

为此，我们使用 MetadataReader（通过 CachingMetadataReaderFactory 创建）来获取类的元数据。当我们获取公共方法的 MethodMetaData 时，我们发现 RequestMapping 注释以及生产和值参数，但方法字段始终是一个空数组，尽管我们在源代码中配置了它并且映射工作。所以信息应该在某个地方。这相当令人费解！:-)

编辑：方法字段为空=> RequestMapping 注释有一个方法字段，它是一个 RequestMethod 对象数组。如果您尝试从 MethodMetaData 实例中读取它，则它是一个空数组。示例： metadata.getAnnotationAttributes(RequestMapping.class.getName()).get("method")

我尝试在spring框架源码中查找原因，但目前还没有找到原因……

有任何想法吗？

仅供参考：我们使用的是 Spring 3.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T20:30:27.047

出于自己的好奇心，我创建了一个小示例项目，并对 Spring 提供的 MetadataReader 进行了一些操作。对于演示，我创建了一个非常简单的控制器，如下所示：

```
@Controller
public class SomeAnnotatedController {

   @RequestMapping(method = {RequestMethod.GET}, value = "/someUrl")
   public void someMethod() {
       // do something later
   }

} 
```

我无法使用 Spring MetadataReader 从注释中提取正确的信息。

```
@Test
public void shouldReturnMethodArrayWithSpringMetadataReader() throws Exception {
    MetadataReader metadataReader = new CachingMetadataReaderFactory().getMetadataReader(SomeAnnotatedController.class.getName());
    Set<MethodMetadata> annotatedMethods = metadataReader.getAnnotationMetadata().getAnnotatedMethods(RequestMapping.class.getName());
    assertEquals(1, annotatedMethods.size());
    MethodMetadata methodMetadata = annotatedMethods.iterator().next();
    assertEquals("someMethod", methodMetadata.getMethodName());
    Map<String, Object> annotationAttributes = methodMetadata.getAnnotationAttributes(RequestMapping.class.getName());
    assertTrue(annotationAttributes.containsKey("method"));
    RequestMethod[] methodAttribute = (RequestMethod[]) annotationAttributes.get("method");
    assertEquals(1, methodAttribute.length);
} 
```

在最后一行运行此测试失败，并告诉您这是一个空数组...

```
java.lang.AssertionError: 
Expected :1
Actual   :0 
```

用原生 Java 做同样的事情感觉更容易一些，并返回正确的信息。

```
@Test
public void shouldReturnMethodArrayWithPlainJava() throws Exception {
    Method method = SomeAnnotatedController.class.getDeclaredMethod("someMethod");
    RequestMapping annotation = method.getAnnotation(RequestMapping.class);
    assertEquals(1, annotation.method().length);
    assertEquals(RequestMethod.GET, annotation.method()[0]);
} 
```

所以我很遗憾地告诉您，我没有找到问题的解决方案，但也许示例项目或基于纯 java 的文档替代方案可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T01:39:31.363

这不是您所要求的直接答案，而是一种非常好的方式来对 REST API 进行自我记录。在他的 github 位置使用 Rossen Stoyanchev 描述的端点文档控制器：[https ://github.com/rstoyanchev/spring-mvc-31-demo.git](https://github.com/rstoyanchev/spring-mvc-31-demo.git)

总而言之，您的控制器看起来像这样：

```
@Controller
public class EndpointDocController {

    private final RequestMappingHandlerMapping handlerMapping;

    @Autowired
    public EndpointDocController(RequestMappingHandlerMapping handlerMapping) {
        this.handlerMapping = handlerMapping;
    }

    @RequestMapping(value="/endpointdoc", method=RequestMethod.GET)
    public void show(Model model) {
        model.addAttribute("handlerMethods", this.handlerMapping.getHandlerMethods());
    }

} 
```

并且您的 jsp 会以这种方式引用方法、生产、消费、方法签名的属性，假设 hm 是一个处理程序方法：

```
Patterns:${hm.key.patternsCondition.patterns}
Method: ${hm.key.methodsCondition.methods}
Method signature: ${hm.value}
Consumes: ${hm.key.consumesCondition.expressions}
Produces: ${hm.key.producesCondition.expressions} 
```

# ruby - 如何使用 Nokogiri 在 NodeSet 中添加子节点

> ID：10300095
> 
> 赞同：5
> 
> 时间：2012-04-24T14:31:33.243
> 
> 标签：ruby, xml, nokogiri

我正在尝试在根节点下添加子节点。我使用以下 XML 进行了尝试，但它不起作用。

```
builder = Nokogiri::XML::Builder.with(@doc) do |xml|   
  nodes = Nokogiri::XML::NodeSet.new(@doc, [])   
  [].each {|nodes_one_by_one|  
    << nodes_one_by_one.Book  
    << nodes_one_by_one.Pen 
  }      
end 
```

我需要像这样在根节点下添加节点：

```
<Catalog>
    <Book>abc</Book>
    <Book_Author>Benjamin</Book_author>
</Catalog> 
```

这对我有用，但我在文档中的特定位置之后添加这些节点：

```
<Catalog>
    <!-- 
    <Book>abc</Book>
    <Book_Author>Benjamin</Book_author>
    -->
    <Interface></Interface>
    <Dialog></Dialog>
    <Manifest></Manifest>
</Catalog> 
```

我试过了，`at_xpath('//Catlog')`但它在元素的末尾添加了它：

```
 <Catalog>
    <Interface></Interface>
    <Dialog></Dialog>
    <Manifest></Manifest>
     <!-- 
      <Book>abc</Book>
      <Book_Author>Benjamin</Book_author>
     -->
 </Catalog> 
```

和

```
book = Nokogiri::XML::Node.new('book', doc)
pen  = Nokogiri::XML::Node.new('pen', doc)     
.
. 
```

有没有办法循环使用`each`而不是一个一个地添加它们。我尝试过这种方式，但这不起作用：

```
builder = Nokogiri::XML::Builder.with(doc) do |xml|   
    nodes = Nokogiri::XML::Node.new(doc, [])   
    [].each {|child_list_element|  
        child_list_element.Book  "value"
        child_list_element.Pen  "value" 
        child_list_element.Diary  "value"
        child_list_element.Pen_stand  "value"
        child_list_element.Pencil  "value"
        .
        .
        .        
}      
end  
doc << nodes 
```

代码可能是错误的，但我想这样做。

另外，我可以将所有元素添加为 NodeSet 而不是 Node.js 吗？

* * *

嵌套的 OpenStruct 似乎不起作用。我试过了：

商店目录集合：

```
 require 'ostruct'
    require 'nokogiri'

    collection = [
    OpenStruct.new(:catalogStoreNumber => '657758',
    :catalogStoreId => 'CTH6536',
    :catalogStoreLocation => 'UnitedStates', 
    :catalogOwnerId => 'TYCT11190',
    :catalogOwner => 'McGrawHill Pub.',
    :catalogList => OpenStruct.new(
        :catalogProductInfo => OpenStruct.new(
      :productType => 'Book',
      :productName => 'The Client',
      :productId => 'CRSUS113246A',
      :productCategory => 'Crime And Suspense',
      :productSubcategory => 'Vintage Books',  
      :productPrice => '45.50 USD',
      :productAuthor => OpenStruct.new(
                :authorFirstName =>'John Grisham',
    :authorMiddleName=> 'Willburt',
    :authorContact => '19876648981')),
  :catalogProductInfo => OpenStruct.new(
      :productType => 'Pen',
      :productName => 'Reynolds',
      :productId => 'PRREY546647',
      :productCategory => 'Misc. Stationary',
      :productSubcategory => 'Stationery Items',  
      :productPrice => '3.00 USD',
      :productManufacturer => 'Reynolds Inc.',
      :productAuthor => OpenStruct.new(
          :authorFirstName => 'Ryan Reynolds',
    :authorMiddleName => 'William',
    :authorContact => '16577589898')),
    :catalogListType => 'ProductCollection',
    :catalogListSource => 'Web'
    ),
    :catalogVerificaitionLog => OpenStruct.new(
        :catalogVerificationStatus => 'Verified',
  :catalogVerificationDateTime => '2012-03-12T13:00:15+5:30',
  :catalogVerificationId => '64774A',
  :catalogVerificationRequestedBy => 'user_121')
    )] 
```

我想访问`productType`第一个`catalogProductInfo`并且我使用过的

```
collection.catalogList.catalogProductInfo.productType.content 
```

我得到了这个错误：

```
undefined method `productType' for #<Array:0x3057438> (NoMethodError) 
```

OpenStruct 是否支持嵌套的 OpenStruct 我想使用 OpenStruct 和 Nokogiri 以以下格式构造 XML？

```
<CatalogOrder>
  <CatalogStoreNumber>657758</CatalogStoreNumber>
  <CatalogStoreId>CTH6536</CatalogStoreId>
  <CatalogStoreLocation>UnitedStates</CatalogStoreLocation>
  <CatalogOwnerId>TYCT11190</CatalogOwnerId>
  <CatalogOwner>McGrawHill Pub.</CatalogOwner>
  <CatalogList>
    <CatalogProductInfo>
      <ProductType>Book</ProductType>
      <ProductName>The Client</ProductName>                
      <ProductId>CRSUS113246A</ProductId>
      <ProductCategory>Crime And Suspense</ProductCategory>
      <ProductSubCategory>Vintage Books</ProductSubCategory>
      <ProductPrice>45.50 USD</ProductPrice>
      <ProductAuthor>
        <AuthorFirstName>John Grisham</AuthorFirstName>
        <AuthorMiddleName>Willbur</AuthorMiddleName>
        <AuthorContact>19876648981</AuthorContact>
      </ProductAuthor>
    </CatalogProductInfo>
    <CatalogProductInfo>
      <ProductType>Pen</ProductType>
      <ProductName>Reynolds</ProductName>                
      <ProductId>PRREY546647</ProductId>
      <ProductCategory>Misc. Stationary</ProductCategory>
      <ProductSubCategory>Stationary Items</ProductSubCategory>
      <ProductPrice>3.00 USD</ProductPrice>
      <ProductAuthor>
        <AuthorFirstName>Ryan Reynolds</AuthorFirstName>
        <AuthorMiddleName>William</AuthorMiddleName>
        <AuthorContact>16577589898</AuthorContact>
      </ProductAuthor>
    </CatalogProductInfo>
    <CatalogListType>ProductCollection</CatalogListType>
    <CatalogListSource>Web</CatalogListSource>
  </CatalogList>
  <CatalogVerificationLog>
    <CatalogVerificationStatus>Verified</CatalogVerificationStatus>
    <CatalogVerificationDateTime>2012-03-12T13:00:15+5:30</CatalogVerificationDateTime>
    <CatalogVerificationId>64774A</CatalogVerificationId>
    <CatalogVerificationRequestedBy>User_121</CatalogVerificationRequestedBy>
  </CatalogVerificationLog>
</CatalogOrder> 
```

我想使用 Nokogiri 和 OpenStruct 来做到这一点，但我不确定 OpenStruct 是否可行，因为它缺乏嵌套功能。有没有其他方法可以使用 JSON 来实现这一点而没有任何限制？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T14:54:08.923

如果我对您的理解正确，则以下内容应该大致是您要查找的内容：

```
doc = Nokogiri::XML(original_xml_string) 

catalog = doc.at_css('Catalog') # #at_css will just grab the first node.
                                # use #css if you want to loop through several.
                                # alternatively just use doc.root

book = Nokogiri::XML::Node.new('Book', doc)
book_author = Nokogiri::XML::Node.new('Book_Author', doc)

book.content = 'abc'
book_author.content  = 'benjamin'

catalog << book
catalog << book_author 
```

应该在`<<`元素末尾之前附加节点。

在更新问题并使用@Phrogz 的建议进行简化后，这应该满足您的要求：

```
require 'nokogiri'

xml = <<'XML'
<Catalog>
  <Interface></Interface>
  <Dialog></Dialog>
  <Manifest></Manifest>
</Catalog>
XML

doc = Nokogiri::XML(xml) 
catalog = doc.root

catalog.first_element_child.before("<Book_Author>abc</Book_Author>")
catalog.first_element_child.before("<Book>benjamin</Book>")

puts doc.to_xml 
```

要遍历集合，动态添加节点，并使用 NodeSet，请尝试以下操作：

```
require 'nokogiri'
require 'ostruct'

xml = <<-'XML'
<Catalog>
  <Interface></Interface>
  <Dialog></Dialog>
  <Manifest></Manifest>
</Catalog>
XML

collection = [
  OpenStruct.new(book: '1984', pen: 'George Orwell'),
  OpenStruct.new(book: 'Thinking, Fash and Slow', pen: 'Daniel Kahneman')
]

doc = Nokogiri::XML(xml) 
catalog = doc.root

node_set = Nokogiri::XML::NodeSet.new(doc)
collection.each do |object|
  book = Nokogiri::XML::Node.new('Book', doc)
  book_author = Nokogiri::XML::Node.new('Book_Author', doc)

  book.content = object.book
  book_author.content = object.pen

  node_set << book
  node_set << book_author
end

catalog.first_element_child.before(node_set)

puts doc.to_xml 
```

# javascript - 为什么在 Symfony2 应用程序中由 Twig 模板导入的 Javascript 文件被重命名？

> ID：10300099
> 
> 赞同：1
> 
> 时间：2012-04-24T14:31:49.653
> 
> 标签：javascript, symfony, tinymce, twig, assetic

我需要在 Symfony2 项目中使用 TinyMCE javascript 库。好吧，我正在按照[傻瓜教程](http://www.tinymce.com/wiki.php/%22For_Dummies%22)来使用这个库。因此，由于我使用的是 Symfony2 框架，我将库保存到我的包*Resouces/public/js*中，然后我通过 Assetic 在我的 Twig 模板中导入了脚本。下面是代码：

```
{% block javascripts %}
    {{ parent() }}
    {% javascripts 
        '@AcmeTestBundle/Resources/public/js/tiny_mce/tiny_mce.js' 
    %}
    <script src="{{ asset_url }}" type="text/javascript"></script>
    {% endjavascripts %}
    <script type="text/javascript" >
        tinyMCE.init({
            mode : "textareas",
            theme : "simple"
        });
    </script >            
{% endblock %} 
```

然后，当我渲染模板时，我发现我的表单中没有 textarea 按预期使用 TinyMCE 库。任何想法？我不知道它是否有帮助，但我查看了 HTML 源代码，我看到 Assetic 将库导入如下：

```
<script src="/Acme/web/app_dev.php/js/0540f06_tiny_mce_1.js" type="text/javascript"></script> 
```

为什么原来的路径和JS文件都被重命名了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T03:18:19.443

该[`output`](http://symfony.com/doc/current/cookbook/assetic/asset_management.html#controlling-the-url-used)选项允许您控制资产的最终位置。

# mysql - 我可以优化这种查询吗？

> ID：10300100
> 
> 赞同：3
> 
> 时间：2012-04-24T14:31:50.930
> 
> 标签：mysql, sql, database

我有这个查询：

```
SELECT 
    s.last_spread, s.sd, s.mean, s.id
    ,c.id_ticker, c.coef
    ,t.ticker
    ,p.last, p.price

FROM (SELECT * FROM spreads WHERE spreads.id_check=1 LIMIT 100,500 ) as s 

    INNER JOIN coef as c 
        ON c.id_spread = s.id

    INNER JOIN tickers AS t
            ON t.id = c.id_ticker

    LEFT JOIN (SELECT prices.id_ticker, MAX(prices.date) as last, prices.price FROM prices GROUP BY prices.id_ticker) AS p
            ON p.id_ticker = t.id 
```

这些是表的架构：

```
mysql> desc spreads;
+-------------+---------+------+-----+---------+----------------+
| Field       | Type    | Null | Key | Default | Extra          |
+-------------+---------+------+-----+---------+----------------+
| id          | int(11) | NO   | PRI | NULL    | auto_increment |
| id_check    | int(11) | YES  | MUL | NULL    |                |
| sd          | double  | YES  |     | NULL    |                |
| mean        | double  | YES  |     | NULL    |                |
| last_spread | double  | YES  |     | NULL    |                |
+-------------+---------+------+-----+---------+----------------+
5 rows in set (0.00 sec)

mysql> desc coef;
+-----------+---------+------+-----+---------+----------------+
| Field     | Type    | Null | Key | Default | Extra          |
+-----------+---------+------+-----+---------+----------------+
| id        | int(11) | NO   | PRI | NULL    | auto_increment |
| id_spread | int(11) | YES  | MUL | NULL    |                |
| id_ticker | int(11) | YES  |     | NULL    |                |
| coef      | double  | YES  |     | NULL    |                |
| side      | double  | YES  |     | NULL    |                |
+-----------+---------+------+-----+---------+----------------+
5 rows in set (0.00 sec)

mysql> desc tickers;
+----------+------------------+------+-----+---------+----------------+
| Field    | Type             | Null | Key | Default | Extra          |
+----------+------------------+------+-----+---------+----------------+
| id       | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| ticker   | varchar(45)      | NO   |     | NULL    |                |
| name     | varchar(150)     | NO   |     | NULL    |                |
| category | varchar(150)     | NO   |     | NULL    |                |
| issuer   | varchar(150)     | NO   |     | NULL    |                |
+----------+------------------+------+-----+---------+----------------+
5 rows in set (0.00 sec)

mysql> desc prices;
+-----------+------------------+------+-----+---------+----------------+
| Field     | Type             | Null | Key | Default | Extra          |
+-----------+------------------+------+-----+---------+----------------+
| id        | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| id_ticker | int(10) unsigned | NO   | MUL | NULL    |                |
| date      | date             | NO   |     | NULL    |                |
| price     | double           | NO   |     | NULL    |                |
+-----------+------------------+------+-----+---------+----------------+
4 rows in set (0.01 sec) 
```

这些是上表的索引；

```
mysql> show indexes from spreads;
+---------+------------+-----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| Table   | Non_unique | Key_name  | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+---------+------------+-----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| spreads |          0 | PRIMARY   |            1 | id          | A         |        2299 |     NULL | NULL   |      | BTREE      |         |
| spreads |          1 | check_idx |            1 | id_check    | A         |           1 |     NULL | NULL   | YES  | BTREE      |         |
+---------+------------+-----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
2 rows in set (0.00 sec)

mysql> show indexes from coef;
+-------+------------+-------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| Table | Non_unique | Key_name          | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+-------+------------+-------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| coef  |          0 | PRIMARY           |            1 | id          | A         |        9078 |     NULL | NULL   |      | BTREE      |         |
| coef  |          1 | spread_ticker_idx |            1 | id_spread   | A         |        NULL |     NULL | NULL   | YES  | BTREE      |         |
| coef  |          1 | spread_ticker_idx |            2 | id_ticker   | A         |        NULL |     NULL | NULL   | YES  | BTREE      |         |
+-------+------------+-------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
3 rows in set (0.00 sec)

mysql> show indexes from tickers;
+---------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| Table   | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+---------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| tickers |          0 | PRIMARY  |            1 | id          | A         |         100 |     NULL | NULL   |      | BTREE      |         |
+---------+------------+----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
1 row in set (0.00 sec)

mysql> show indexes from prices;
+--------+------------+-----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| Table  | Non_unique | Key_name  | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+--------+------------+-----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| prices |          0 | PRIMARY   |            1 | id          | A         |       19962 |     NULL | NULL   |      | BTREE      |         |
| prices |          1 | id_ticker |            1 | id_ticker   | A         |       19962 |     NULL | NULL   |      | BTREE      |         |
+--------+------------+-----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
2 rows in set (0.15 sec) 
```

这是查询的解释：

```
+----+-------------+------------+--------+-------------------+-------------------+---------+---------------------------+--------+-------------+
| id | select_type | table      | type   | possible_keys     | key               | key_len | ref                       | rows   | Extra       |
+----+-------------+------------+--------+-------------------+-------------------+---------+---------------------------+--------+-------------+
|  1 | PRIMARY     | <derived2> | ALL    | NULL              | NULL              | NULL    | NULL                      |    500 |             |
|  1 | PRIMARY     | c          | ref    | spread_ticker_idx | spread_ticker_idx | 5       | s.id                      |     90 | Using where |
|  1 | PRIMARY     | t          | eq_ref | PRIMARY           | PRIMARY           | 4       | spreadtrading.c.id_ticker |      1 | Using where |
|  1 | PRIMARY     | <derived3> | ALL    | NULL              | NULL              | NULL    | NULL                      |    100 |             |
|  3 | DERIVED     | prices     | index  | NULL              | id_ticker         | 4       | NULL                      | 119774 |             |
|  2 | DERIVED     | spreads    | ref    | check_idx         | check_idx         | 5       |                           |   2298 | Using where |
+----+-------------+------------+--------+-------------------+-------------------+---------+---------------------------+--------+-------------+
6 rows in set (0.27 sec) 
```

我可以优化它吗？

谢谢！

**编辑：**

我想知道索引和表的结构是否针对我上面发布的查询进行了优化。我使用这个查询得到的结果很好，效果很好，但也许我可以优化它以提高查询的“速度”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T15:51:24.733

我认为您可以通过删除`spreads`子查询并将`WHERE`子句移到末尾来获得一些好处，如下面的代码所示。这失去了你的`LIMIT`限制——也许你也可以`LIMIT`在最后加上一个子句，这取决于你在限制输出大小方面想要达到的目标。

```
SELECT 
    s.last_spread, s.sd, s.mean, s.id
    ,c.id_ticker, c.coef
    ,t.ticker
    ,p.last, p.price

FROM  spreads as s 

    INNER JOIN coef as c 
        ON c.id_spread = s.id

    INNER JOIN tickers AS t
            ON t.id = c.id_ticker

    LEFT JOIN (SELECT prices.id_ticker, MAX(prices.date) as last, prices.price FROM prices GROUP BY prices.id_ticker) AS p
            ON p.id_ticker = t.id
WHERE s.id_check = 1 
```

# java - Oracle RDF 表在保存三重时抛出 ORA-22835 错误

> ID：10300104
> 
> 赞同：1
> 
> 时间：2012-04-24T14:31:58.373
> 
> 标签：java, oracle, rdf, jena, sqlexception

我们正在运行一个 Java 应用程序，它使用 Jena 适配器将数据保存到 Oracle RDF 三元存储。我们的 Oracle 版本是 11gR2。

最近，我们在保存大三元组时出现了这个错误。

```
ERROR http-bio-8080-exec-4 oracle.spatial.rdf.client.jena.GraphOracleSem:
Could not add triple java.sql.SQLException: 
ORA-22835: Buffer too small for CLOB to CHAR or BLOB to RAW conversion (actual: 5223, maximum: 4000)
        at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:439)
        at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:395)
        at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:802)
        at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:436)
        at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:186)
        at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:521)
        at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:205)
        at oracle.jdbc.driver.T4CPreparedStatement.executeForRows(T4CPreparedStatement.java:1008)
        at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1307)
        at oracle.jdbc.driver.OraclePreparedStatement.sendBatch(OraclePreparedStatement.java:3753)
        at oracle.jdbc.driver.OraclePreparedStatement.processCompletedBindRow(OraclePreparedStatement.java:2112)
        at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3444)
        at oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:3530)
        at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeUpdate(OraclePreparedStatementWrapper.java:1350)
        at oracle.spatial.rdf.client.jena.GraphOracleSem.performAdd(GraphOracleSem.java:3509)
        at oracle.spatial.rdf.client.jena.OracleBulkUpdateHandler.add(OracleBulkUpdateHandler.java:1226)
        at oracle.spatial.rdf.client.jena.OracleBulkUpdateHandler.addIterator(OracleBulkUpdateHandler.java:1257)
        at oracle.spatial.rdf.client.jena.OracleBulkUpdateHandler.add(OracleBulkUpdateHandler.java:1278)
        at oracle.spatial.rdf.client.jena.OracleBulkUpdateHandler.add(OracleBulkUpdateHandler.java:1268)
        at com.hp.hpl.jena.sparql.modify.UpdateProcessorVisitor$1.exec(UpdateProcessorVisitor.java:51)
        at com.hp.hpl.jena.sparql.modify.GraphStoreUtils.action(GraphStoreUtils.java:60)
        at com.hp.hpl.jena.sparql.modify.UpdateProcessorVisitor.visit(UpdateProcessorVisitor.java:48)
        at com.hp.hpl.jena.sparql.modify.op.UpdateInsertData.visit(UpdateInsertData.java:16)
        at com.hp.hpl.jena.sparql.modify.UpdateProcessorMain.execute(UpdateProcessorMain.java:34)
        at com.hp.hpl.jena.update.UpdateAction.execute(UpdateAction.java:253)
        at com.hp.hpl.jena.update.UpdateAction.parseExecute(UpdateAction.java:176)
        at com.hp.hpl.jena.update.UpdateAction.parseExecute(UpdateAction.java:143)
        at com.hp.hpl.jena.update.UpdateAction.parseExecute(UpdateAction.java:105) 
```

如错误所述，它发生在数据字符串大于 4000 个字符时。尽管它没有在错误中指定表/列，但 Oracle 文档建议它应该在内部自动处理：

> RDF_VALUE$ 表：
> 
> LONG_VALUE: CLOB - 如果词法值的长度大于 4000 字节，则为字符串。否则，此列具有空值。
> 
> VALUE_NAME: VARCHAR2(4000) - 这是一个计算列。如果词法值的长度为 4000 字节或更少，则该列的值是 VNAME_PREFIX 列和 VNAME_SUFFIX 列的值的串联。

一些用户没有看到这个错误，尽管他们可能只是没有尝试保存足够大的东西。我们已经尝试清除用户的三重存储模型，这似乎工作了几天，但后来又回来了。

有人对从哪里开始调试有任何提示吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T08:43:19.703

几年前我遇到了同样的问题。您使用的是哪个版本的耶拿适配器？我有一个补丁解决了这个问题，也许你可以试试看它是否仍然可以在 oracle 支持上使用。这是我收到的指示：

1.  登录 support.oracle.com，
2.  然后点击补丁和更新选项卡
3.  在 Patch Search 面板中，单击 Search 选项卡，在 Patch Name 或 Number 按钮后的文本框中键入 10186312。
4.  单击搜索按钮。它应该返回一场比赛。
5.  单击补丁名称 10186312，然后单击下载。

# jquery-mobile - 如何像列表分隔符一样设置 jquery-mobile 单选按钮的图例

> ID：10300106
> 
> 赞同：8
> 
> 时间：2012-04-24T14:32:03.317
> 
> 标签：jquery-mobile

将单选按钮放在`fieldset`with 中`data-role="controlgroup"`，jquery-mobile 会将它们呈现为插入列表，但图例只是文本。我希望图例看起来像列表视图的列表分隔符。

所以代替这个：

![现在的情况](../Images/e9a3c1b28cafeef2275e06af4336283b.png)

我想要这样的东西：

![我需要什么](../Images/8e57fcdaacbf92bc08a891fcca7ace9c.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T16:29:10.720

您可以将 radiogroup 放在 listview 中，并使用 listdivider 样式作为标题。要获得与您演示的结果相似的结果，您需要删除一些填充、边距和边框。

见这个例子：http: [//jsfiddle.net/zdMhF/](http://jsfiddle.net/zdMhF/)

编码：

```
<div data-role="page">
    <div data-role="content">
<ul data-role="listview" data-inset="true">
    <li data-role="list-divider">Choose a pet:</li>
<li style="padding:0;border:0;">
<div data-role="fieldcontain" style="margin:0;">
    <fieldset data-role="controlgroup">
             <input type="radio" name="radio-choice-1" id="radio-choice-1" value="choice-1" checked="checked" />
             <label for="radio-choice-1">Cat</label>

             <input type="radio" name="radio-choice-1" id="radio-choice-2" value="choice-2"  />
             <label for="radio-choice-2">Dog</label>

             <input type="radio" name="radio-choice-1" id="radio-choice-3" value="choice-3"  />
             <label for="radio-choice-3">Hamster</label>

             <input type="radio" name="radio-choice-1" id="radio-choice-4" value="choice-4"  />
             <label for="radio-choice-4">Lizard</label>
    </fieldset>
</div>
</li>
</ul>
</div>
</div>​ 
```

# node.js - node.js 服务器端口不工作

> ID：10300109
> 
> 赞同：0
> 
> 时间：2012-04-24T14:32:26.957
> 
> 标签：node.js, centos

所以我在我的 Centos 5.x 机器上创建了一个简单的服务器测试，我无法让 node.js 在我的端口上响应：

```
var http = require("http");

http.createServer(function(request, response) {
  response.writeHead(200, {"Content-Type": "text/plain"});
  response.write("Hello World");
  response.end();
}).listen(8888); 
```

这是标准的复制/意大利面测试。我昨晚让它工作了，它已经停止工作了。我在 /home/user/nodejs 之外运行它并且没有得到任何编译错误。也没有其他节点进程在运行。关于当时和现在之间可能发生的事情有什么想法吗？任何已知的可能与此相关的古怪 nodejs 问题？

**编辑：**

*   我已经测试了各种端口
*   页面只是超时

**RHEL / Centos 5.8 / 节点 v0.6.15**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T14:46:02.037

您是否尝试关闭防火墙？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-23T06:31:20.557

我已禁用防火墙并且它正在工作。

# postgresql - 如何保证PostgreSQL表中聚合数据的准确性？

> ID：10300113
> 
> 赞同：0
> 
> 时间：2012-04-24T14:32:40.430
> 
> 标签：postgresql, aggregate

我有两个 PostgreSQL 表 - 表 A 包含单个客户的信用变动记录（增加/减少），表 B 包含聚合表 A 的数据。表的简化结构（我删除了 FK 和规则）：

```
CREATE TABLE "public"."credit_review" (
      "id" SERIAL, 
      "client_id" INTEGER NOT NULL, 
      "credit_change" INTEGER DEFAULT 0 NOT NULL, 
      "itime" TIMESTAMP(0) WITH TIME ZONE DEFAULT now()
) WITHOUT OIDS;

CREATE TABLE "public"."credit_review_aggregated" (
  "id" SERIAL, 
  "credit_amount" INT DEFAULT 0 NOT NULL, 
  "valid_to_review_id" INT NOT NULL, 
  "client_id" INTEGER NOT NULL, 
  "itime" TIMESTAMP(0) WITH TIME ZONE DEFAULT now()
) WITHOUT OIDS; 
```

“credit_review_aggregated.valid_to_review_id”列是“credit_review.id”的FK。

因为聚合表中的数据正确非常重要，所以我正在寻找一种方法来确保这种需求。我突然想到：

1.  禁用删除和更新两个表中的记录
2.  在聚合表上创建触发器以检查输入的数据是否正确（如果不正确，则不允许插入）。我不太喜欢它，因为当将记录插入聚合表时，credit_amount 值将被计算两次（一次在应用程序中，第二次在触发器中）。

您对我如何确保这种情况有一些建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T16:12:35.147

我并不完全清楚您要强制执行的不变量，但从问题的一般轮廓来看，我倾向于使用触发代码来强制执行它，并使用 SERIALIZABLE 事务。否则，在多个表中强制执行不变量会很快变得非常棘手。

[http://wiki.postgresql.org/wiki/SSI](http://wiki.postgresql.org/wiki/SSI)

全面披露：因为我的雇主需要跨多个表强制执行复杂的完整性规则，所以我与麻省理工学院的 Dan RK Ports 一起将 SSI 添加到 PostgreSQL。

# c - 我应该使用“-ansi”还是明确的“-std=...”作为编译器标志？

> ID：10300114
> 
> 赞同：12
> 
> 时间：2012-04-24T14:32:45.457
> 
> 标签：c, c89, compiler-flags, ansi-c

我[读过](https://stackoverflow.com/questions/4232099/are-there-any-differences-between-ansi-c-and-iso-c)ANSI C 与 ISO C 并不完全相同，编译器对“-ansi”的解释可能有所不同。（gcc 将其映射到 C90，clang 将其映射到 C89） 目前我倾向于使用“-std=...”而不是“-ansi”，因为它会明确显示使用的标准。由于我对在 Linux、Windows 和 MAC 上编译特别感兴趣，我担心有些编译器无法理解“-std=...”而是“-ansi”。那么使用其中一个有什么优点和缺点吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-24T15:10:29.663

如果您希望编译器强制执行 1989 ANSI C 标准，或等效的 1990 ISO C 标准（它们描述完全相同的语言），您可以安全地使用`-ansi`或`-std=c89`.

`-ansi`严格来说，这个名字是不正确的；它指的是 1989 年的 ANSI C 标准，但 ANSI 本身认为该标准已过时；它被 1999 年 ISO C 标准（ANSI 发布后不久正式采用）取代，该标准本身已经或很快将被新的 2011 年 ISO C 标准取代。但是更改`-ansi`选项的含义会破坏太多`Makefile`的s并构建脚本。

gcc 4.7 及更高版本也`-std=c90`将`-std=c89`. gcc 4.7 于 2012 年 3 月发布，因此`-std=c90`具有合理的可移植性，除非您需要允许旧版本的 gcc。

`-std=c99`执行（大部分）1999 ISO C 标准。由于 Microsoft 尤其不支持 C99（即使经过这么多年），使用此选项意味着编译器不会警告您使用其他地方可能不支持的 C99 特定功能。gcc 的 C99 支持[在此处记录](https://gcc.gnu.org/wiki/C99Status)。

gcc 4.7*部分*支持新的 ISO C 2011 标准，带有`-std=c11`. 该支持在以后的版本中得到了改进，但尚未完成。gcc C11 状态[在此处记录](https://gcc.gnu.org/wiki/C11Status)，据说与 C99 支持的级别相似。

还有更多选项，以及我提到的一些别名；例如，该选项`-std=c9x`是在 1999 年 ISO 标准最终确定之前添加的，并且仍然受支持；同样，`-std=c1x`是 的同义词`-std=c11`。

我相信 clang 旨在尽可能地与 gcc 兼容，因此它应该支持具有相同含义的相同选项（可能除了一些较新的选项，具体取决于您使用的 gcc 和 clang 版本）。

gcc 手册包含完整的详细信息，其中[一节](http://gcc.gnu.org/onlinedocs/gcc-4.7.0/gcc/Standards.html#Standards)描述了支持的标准，另一[节](http://gcc.gnu.org/onlinedocs/gcc-4.7.0/gcc/C-Dialect-Options.html#C-Dialect-Options)指定了各种选项。链接指向 4.7 版本。您也可以运行（如果您安装了 GNU命令和 gcc 文档），或者您可以在[此处](http://gcc.gnu.org/onlinedocs/)查看手册的多个版本。`-ansi``-std=...``info gcc``info`

如果您要使用 gcc 以外的编译器（以及旨在与 gcc 兼容的编译器），则必须阅读他们的文档以了解如何执行各种版本的 C 标准。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T14:35:28.123

`-ansi`和`-std=`编译器标志可能由其他编译器共享，但它们是`gcc`标志。

截至目前`-ansi`相当于`-std=c89`in`gcc`但这可能^(1))将来会发生变化，所以我建议你使用`-std=c89`over `-ansi`。事实上，例如 ISO c99 也已被 ANSI 批准。

您应该注意到 c89 和 c90 本质上是相同的 C 标准。c89 是 ANSI 名称，而 c90 是 ISO 名称。

从`gcc` [页面](http://gcc.gnu.org/onlinedocs/gcc/Standards.html)：

> 这些出版物之间没有技术差异，尽管 ANSI 标准的部分被重新编号并成为 ISO 标准中的条款。从批准之日起，该标准的两种形式通常称为 C89，有时也称为 C90。

* * *

 [1) 正如 Keith Thompson 在评论中指出的那样，尽管它可能不太可能，因为它会破坏许多构建脚本。]

# java - 如何嵌入 Java 小程序？

> ID：10300115
> 
> 赞同：0
> 
> 时间：2012-04-24T14:32:46.080
> 
> 标签：java, javascript, html, applet, embed

我在 NetBeans 中编写了一个简单的 Java 小程序，但在嵌入它时遇到了真正的麻烦。我将我的类文件复制到与我的 html 页面相同的目录中。我也把我的 .jar 放在那里。在我做的html页面上

```
<applet code="ServerStatus.class" width="200" height="200">
Your browser does not support the <code>applet</code> tag.
</applet> 
```

但是小程序永远不会加载。长错误的第一位是：

```
load: class ServerStatusChecker.jar not found.
java.lang.ClassNotFoundException: ServerStatusChecker.jar 
```

我必须做什么才能嵌入这个小程序？我的 MyApplet.java 文件的顶部是

```
package org.me.serverstatuschecker;

import java.applet.*;
import java.awt.*; 
import java.awt.event.*;
import java.io.*;
import java.net.*;

public class MyApplet extends Applet implements ActionListener  { 
```

我的 ServerStatusChecker.jar 与我试图将其包含在其中的 html 文件位于同一位置。在 jar 中，我有文件夹 org/me/serverstatuschecker/MyApplet.class。

编辑：

完整的错误信息如下：

```
 Java Plug-in 1.6.0_31
 Using JRE version 1.6.0_31-b05 Java HotSpot(TM) Client VM

 ----------------------------------------------------

    java.lang.UnsupportedClassVersionError: org/me/serverstatuschecker/ServerStatusChecker : Unsupported major.minor version 51.0
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(Unknown Source)
at java.lang.ClassLoader.defineClass(Unknown Source)
at java.security.SecureClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.defineClass(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.defineClassHelper(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.access$100(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader$2.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at sun.plugin2.applet.Plugin2ClassLoader.findClassHelper(Unknown Source)
at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Unknown Source)
at sun.plugin2.applet.Plugin2Manager.createApplet(Unknown Source)
at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
    Exception: java.lang.UnsupportedClassVersionError: org/me/serverstatuschecker/ServerStatusChecker : Unsupported major.minor version 51.0
    java.lang.UnsupportedClassVersionError: org/me/serverstatuschecker/ServerStatusChecker : Unsupported major.minor version 51.0
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(Unknown Source)
at java.lang.ClassLoader.defineClass(Unknown Source)
at java.security.SecureClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.defineClass(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.defineClassHelper(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.access$100(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader$2.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at sun.plugin2.applet.Plugin2ClassLoader.findClassHelper(Unknown Source)
at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Unknown Source)
at sun.plugin2.applet.Plugin2Manager.createApplet(Unknown Source)
at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
    Exception: java.lang.UnsupportedClassVersionError: org/me/serverstatuschecker/ServerStatusChecker : Unsupported major.minor version 51.0
    java.lang.UnsupportedClassVersionError: org/me/serverstatuschecker/ServerStatusChecker : Unsupported major.minor version 51.0
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(Unknown Source)
at java.lang.ClassLoader.defineClass(Unknown Source)
at java.security.SecureClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.defineClass(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.defineClassHelper(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.access$100(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader$2.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at sun.plugin2.applet.Plugin2ClassLoader.findClassHelper(Unknown Source)
at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Unknown Source)
at sun.plugin2.applet.Plugin2Manager.createApplet(Unknown Source)
at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
    Exception: java.lang.UnsupportedClassVersionError:      org/me/serverstatuschecker/ServerStatusChecker : Unsupported major.minor version 51.0
    java.lang.UnsupportedClassVersionError: org/me/serverstatuschecker/ServerStatusChecker :   Unsupported major.minor version 51.0
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClassCond(Unknown Source)
at java.lang.ClassLoader.defineClass(Unknown Source)
at java.security.SecureClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.defineClass(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.defineClassHelper(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.access$100(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader$2.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at sun.plugin2.applet.Plugin2ClassLoader.findClassHelper(Unknown Source)
at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Unknown Source)
at sun.plugin2.applet.Plugin2Manager.createApplet(Unknown Source)
at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
    Exception: java.lang.UnsupportedClassVersionError:          org/me/serverstatuschecker/ServerStatusChecker : Unsupported major.minor version 51.0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T15:32:49.607

## Directory Structure

*   `theappletdir/`
    *   `applet.html`
    *   `ServerStatusChecker.jar`

## Content of `applet.html`

Then use the script supplied by Oracle to deploy applets and JWS apps. It is called `deployJava.js` and linked from the [applet info. page](https://stackoverflow.com/tags/applet/info). It will:

*   Check the minimum stated JRE version is available for use by applets.
    *   If not, help the user to upgrade it.
*   Embed & run the applet.

* * *

```
<html>
<head>
<!-- ... -->
<script src="http://www.java.com/js/deployJava.js"></script>
</head>
<body>
<!-- ... -->
<script>
    var attributes = {codebase:'.',
                      code:'org.me.serverstatuschecker.MyApplet',
                      archive:'ServerStatusChecker.jar',
                      width:200, height:200};
    var parameters = {};
    var version = '1.6';  // or whatever version the code was compiled for 
    deployJava.runApplet(attributes, parameters, version);
</script>
</body>
</html> 
```

## New Error

```
UnsupportedClassVersionError: org/me/serverstatuschecker/MyApplet : 
    Unsupported major.minor version 51.0 
```

When I refer to the [version number list](http://en.wikipedia.org/wiki/Java_class_file#General_layout) it indicates the code is being compiled compatible for a 1.7 JRE, whereas the `version` attribute above indicates the code should be able to be loaded in any 1.6+ JRE. The best way to fix this is to use the `source`, `target` `bootclasspath` options when compiling the code. Specify the first 2 as `1.6` and the last as a path to a 1.6 version `rt.jar`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:19:06.197

您是否尝试过 HtmlConverter 工具？

[http://java.sun.com/products/plugin/1.3/docs/htmlconv.html](http://java.sun.com/products/plugin/1.3/docs/htmlconv.html)

它创建一个 HTML 代码，尝试使用 Java 插件正确加载您的小程序。

# c++ - 基于 UDP 的小行星游戏的待办事项列表

> ID：10300117
> 
> 赞同：0
> 
> 时间：2012-04-24T14:32:59.203
> 
> 标签：c++, network-programming, udp, network-protocols

我正在为我的网络 Asteroids 游戏开发协议。第一个版本将只允许每个玩家在滚动世界中拥有一艘射击对手的船。稍后我会添加岩石，许多岩石。

在 UDP 之上实现协议似乎并非易事，但 UDP 无疑是实时游戏的必经之路。我研究了 Gaffers 关于游戏网络的文章，所以我认为我必须在 UDP 之上实现以下内容：

*   Reliablilty（通过发送确认确保某些数据包到达。这也意味着确保确认到达）。
*   对大于建议的 UDP 数据包大小的数据包进行分段和重组。
*   检测死客户。

我遗漏了什么重要的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:29:28.630

问题是，您最终会重新发明 TCP / 流套接字功能吗？一旦您开始考虑 ACK/NAK、数据包排序和重组以及端点完整性，您实际上就是在重新发明轮子。不仅如此，您还在用户空间中执行此操作，并且没有内核提供的广泛的路径优化和内存管理策略。我并不是说 UDP 是错误的选择，但请查看 Q3 引擎中多人游戏/网络代码的来源等。很大程度上取决于有效负载内容和冗余。即，你能承受丢帧/数据包的代价吗？

# php - 在域模型中获取对象相关对象

> ID：10300119
> 
> 赞同：1
> 
> 时间：2012-04-24T14:33:14.207
> 
> 标签：php, oop, dns, doctrine-orm

如何处理获取一个对象的相关对象？例如**对象**项目有一些**标签**。我应该如何以及何时获取这些对象？在映射器的用户初始化中？那将是一个很大的超载。最好的方法是在系统向用户询问标签时动态加载它们，但是如果模型对映射器一无所知怎么办？或者只是使用 Doctrine 而忘记了所有这些问题？

我问这个与 PHP Zend 框架有关。但我认为任何技术都足以解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:13:53.847

很难回答您的问题，因为您指的不是特定的 ORM 或框架。如果您正在寻找建议，我建议您使用 Doctrine 作为模型 API 和 Zend Framework 作为独立库。

如果您需要一个功能齐全的框架，您可以查看以下任何一个：

1.  [Symfony2](http://symfony.com/)
2.  [CakePHP](http://cakephp.org/)
3.  [Zend 框架](http://framework.zend.com/)（作为框架与独立库）
4.  [代码点火器](http://codeigniter.com/)

如果您选择使用[Doctrine](http://www.doctrine-project.org/)作为您的 ORM，您可以设置模式文件以确保对象是关系感知的，然后您可以进行如下引用：

```
// Joins tags table by way of intermediary object_tag table providing
//  a M:1, 1:M relationship
$tags = $object->getTags(); 
```

Doctrine（1.2 不确定 2.x）确实采用延迟加载模式，其中仅在请求时才查询对象。

# jquery - jQuery将某些单词包装在标签中

> ID：10300122
> 
> 赞同：2
> 
> 时间：2012-04-24T14:33:24.707
> 
> 标签：jquery, regex

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T14:38:35.277

你可以这样做：

```
$("p").each(function() {
    $(this).html($(this).html().replace(/contracting/g, "<strong>contracting</strong>"));
});​ 
```

**[活生生的例子](http://jsfiddle.net/QQAPK/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:38:18.997

您必须让要替换的内容被`<span>` `<div>`带有 ID 的东西包围，这样才能正常工作。

HTML：

```
<div id="content">Contracting</div>​ 
```

JS：

```
content=document.getElementById("content");

​content.innerHTML=content.innerHTML.replace(/contracting/gi,"<strong>$&</strong>");​​​​​​​​​​​ 
```

JSfiddle：http: [//jsfiddle.net/jwTz8/](http://jsfiddle.net/jwTz8/)

JSfiddle 工作，但字体对我来说没有改变，您可能需要检查元素（右键单击 Contracting，检查元素）才能看到强标签在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T14:38:52.290

这个怎么样？

```
var yourElement = $("#your-element-selector");

yourElement.html(yourElement.html().replace("yourword", "<strong>yourword</strong>")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T15:04:00.840

我写了一个小插件来做到这一点，但是它目前有一个错误，阻止它在同一个元素上多次有效地使用而不重置它的内容。这是一个jsfiddle：http: [//jsfiddle.net/NFDqe/1/](http://jsfiddle.net/NFDqe/1/)

```
$("#content").highlightText("contracting","bold",true); 
```

`bold`在这种情况下，是一个类，它被添加到一个包含文本的跨度中`font-weight: bold`

[https://github.com/tentonaxe/jQuery-highlightText](https://github.com/tentonaxe/jQuery-highlightText)

如果您发现另一个没有我的错误的插件可以做同样的事情，我不会感到惊讶。

**更新**

您还可以设置`defaultTagName`插件以`strong`获得强标签而不是跨度标签。

```
$.fn.highlightText.defaultTagName = "strong";
$("#content").highlightText("contracting",true); 
```

[http://jsfiddle.net/NFDqe/6/](http://jsfiddle.net/NFDqe/6/)

与 .html() 方法相比，使用此方法的好处是它不会触及可能在标签中找到的类名或 id 或表单输入的值。您可以通过替换为来影响整个`#content`页面`body`。

**更新**

此外，`"contracting"`您可以传入正则表达式，而不是 ，例如`/contracting/ig`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T15:19:33.253

```
(function(){

$("p").each(function() {

var self = $(this);

self.html(self.html().replace(/contracting/gi, "<strong>$&</strong>"));

})

})() 
```

;

# java - 更新 sql 外键约束

> ID：10300126
> 
> 赞同：0
> 
> 时间：2012-04-24T14:33:32.397
> 
> 标签：java, sql

我有一个正在开发的应用程序，它将查询数据库并显示结果。该程序还对数据库进行更改（更新、删除、插入）。直到最近我进行了一些更改时，这些功能中的大部分都可以正常工作。现在我得到一个 SQLException，告诉我我违反了外键约束。我查了一下，发现违规是多个表共享数据的结果。有没有办法克服这个问题？如何在不违反约束的情况下进行更新？这是我的更新方法：

```
InstructorEditorPanel updateEditorPanel = new InstructorEditorPanel();

updateEditorPanel.setFieldText(InstructorEditorPanel.FieldTitle.B_NUMBER, updBNumber);
updateEditorPanel.setFieldText(InstructorEditorPanel.FieldTitle.FIRST_NAME, updFName);
updateEditorPanel.setFieldText(InstructorEditorPanel.FieldTitle.LAST_NAME, updLName);

int result = JOptionPane.showConfirmDialog(null, updateEditorPanel,
              "Update Instructor",        JOptionPane.OK_CANCEL_OPTION,JOptionPane.PLAIN_MESSAGE);
  if(result == JOptionPane.OK_OPTION)
  {
      for (InstructorEditorPanel.FieldTitle fieldTitle :    InstructorEditorPanel.FieldTitle
                 .values()) {

                    bNum =    getBNumber(updateEditorPanel.getFieldText(fieldTitle.values()[0]));
                    fName = getFirstName(updateEditorPanel.getFieldText(fieldTitle.values()[1]));
                    lName =  getLastName(updateEditorPanel.getFieldText(fieldTitle.values()[2]));
                   }
      try
{
    connection = DriverManager.getConnection(URL);
    updateInstructor = connection.prepareStatement(
    "UPDATE Instructor SET BNUMBER = ?, FIRSTNAME = ?, LASTNAME = ? WHERE BNUMBER = ?");

}catch(SQLException sqlException){
    sqlException.printStackTrace();
    System.exit(1);
}//end catch
  try
{

    updateInstructor.setString(1, bNum);
    updateInstructor.setString(2, fName);
    updateInstructor.setString(3, lName);
            updateInstructor.setString(4,mNumber);

    updateInstructor.executeUpdate();
}catch(SQLException sqlException){
        sqlException.printStackTrace();
}//end of catch
finally
{
    close();
}//end 
  }

Display(panel); } 
```

直到最近我进行了一些更改时，我才使该方法正常工作。我不知道我做了什么，但现在我得到了违反外键约束的异常

这是例外：java.sql.SQLIntegrityConstraintViolationException：表'INSTRUCTOR'上的更新导致违反外键约束'SQL120408141918440'键（1234500000）。该语句已回滚。

数据库信息

```
CREATE TABLE Instructor (
BNumber varchar(10) NOT NULL,
FirstName varchar(20),
LastName varchar(30),
PRIMARY KEY (BNumber)
);

CREATE TABLE Section (
CRN int NOT NULL,
Term varchar(6) NOT NULL,
SectionNumber varchar(3),
CourseID varchar(9),
Enrollment smallint,
BNumber varchar(10),
PercentResp numeric(5,2),
CONSTRAINT CRN_Term PRIMARY KEY (CRN,Term),
FOREIGN KEY (CourseID) REFERENCES Course (CourseID), 
FOREIGN KEY (BNumber) REFERENCES Instructor (BNumber)
);

INSERT INTO Instructor (BNumber, FirstName, LastName)
VALUES 
('0000012345','Bill','Smith'),
('0000023456','Sue','Taylor'),
('0000034567','Skilar','Ramsey'),
('1234500000','Sam','Jones'),
('2345600000','Tyson','Quilez');

INSERT INTO Section (CRN, Term, SectionNumber, CourseID, Enrollment,
                 BNumber, PercentResp)
VALUES 
(40035,'201040','02B','CHM2210', 31,'0000034567',100),
(40001,'201040','02B','CGS1000', 27,'0000012345',100),
(40002,'201040','70B','CGS2100', 25,'0000012345',100),
(40003,'201040','71B','CGS2100', 19,'0000012345',100),
(40004,'201040','01B','COP1000', 15,'0000012345',100),
(40030,'201040','01B','BSCC1005',30,'0000023456',100),
(40031,'201040','02B','BSCC1005',25,'0000023456',100),
(40032,'201040','70B','BSCC1005',24,'0000023456',100),
(40000,'201040','01B','CGS1000', 15,'0000012345',100),
(40034,'201040','01B','CHM2210', 27,'0000034567',100); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T15:07:52.040

代替

```
"UPDATE Instructor SET BNUMBER = ?, FIRSTNAME = ?, LASTNAME = ? WHERE BNUMBER = ?" 
```

和

```
"UPDATE Instructor SET FIRSTNAME = ?, LASTNAME = ? WHERE BNUMBER = ?" 
```

如果主键是更新查询中的匹配条件，则不应更新主键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-14T05:06:20.503

您应该在引用之后放置 ON UPDATE CASCADE

# javascript - 任务完成后如何收集多个回调来调用

> ID：10300130
> 
> 赞同：2
> 
> 时间：2012-04-24T14:33:43.757
> 
> 标签：javascript, design-patterns, node.js

我似乎找不到这个问题的通用解决方案，即使我觉得我不能成为第一个遇到这个问题的人。我也怀疑这可能是我首先在这里采取了错误的方法。让我知道。

我有一个 Expressjs 应用程序，它与各种 API（主要是 OAuth2）交互。一旦请求进入应用程序，就会检查它是否具有访问令牌以从 API 获取数据。如果令牌过期，它将请求一个新令牌。

现在，当我的应用同时收到第二个请求时，需要完全相同的 API，我想避免再次调用访问令牌。

我所做的是使用“收集器”，其中可以为给定键存储回调。存储键回调的第一个请求会在完成任务后调用收集器回调。所有后续回调都被排入队列并稍后使用收集器回调调用。

这是简单的收集器类（CoffeeScript）

```
# Collect callbacks for tasks and execute all once the job is done
module.exports = class Collector
  constructor: ()->
    @tasks = {}
  add: (key, callback)->
    unless @tasks[key]
      # Initiate callback list for the key with first callback
      @tasks[key] = [callback]
      return ()=>
        # Call all collected callbacks for the key
        (callback.apply {}, arguments for callback in @tasks[key])
        # Reset callback list
        @tasks[key] = null
    else
      # Add callback to existing list
      @tasks[key].push callback
      return false 
```

我不确定在这个类中存储回调是否正确，但是要使用数据库（Redis），我必须找到一种存储回调的方法......</p>

完成工作后是否有更好的方法来调用多个回调？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T10:59:12.323

为什么不将回调聚合到一个循环中的数组中，在原始调用完成时执行每个包含的函数？

它可能很简单：

```
var dones = [];

dones.push(function (err, res) { console.log('hoo'); });
dones.push(function (err, res) { console.log('ray!'); });

function whenDone(err, res) { 
   _.each(dones, function (done) { done(err, res); } }); 
}

myWhateverFunction(whenDone); 
```

如果你想让它更漂亮，你可以将它包装到你想要的任何数据结构中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:11:29.230

对于您的问题，我没有具体的答案，但您应该查看异步模块。我认为这是朝着正确方向迈出的一步：[https ://github.com/caolan/async](https://github.com/caolan/async)

# sql-server - TSQL 中的多个 LIKE 语句

> ID：10300131
> 
> 赞同：7
> 
> 时间：2012-04-24T14:33:44.470
> 
> 标签：sql-server, tsql, user-defined-functions, sql-like

这就是我试图以最简单的形式实现的目标：

```
SELECT 
    p.ProductId,
    p.ProductName,
    p.SKU
FROM tbl_Product p
WHERE (p.ProductName LIKE '%white%' OR p.SKU LIKE '%white%')
AND (p.ProductName LIKE '%cup%' OR p.SKU LIKE '%cup%') 
```

我正在尝试在 UDF 中执行此操作，它接受所有搜索词的逗号分隔参数。

我尝试将该参数拆分为一个临时表并尝试连接，如下所示：

```
DECLARE @SearchText nvarchar(1000) SELECT @SearchText='white,cup'

DECLARE @SearchTerms TABLE (String nvarchar(200))
INSERT INTO @SearchTerms (String)
SELECT '%' + String + '%' FROM dbo.CsvSplitString(@SearchText)

SELECT 
    p.ProductId,
    p.ProductName,
    p.SKU
FROM tbl_Product p
JOIN @SearchTerms s ON (p.ProductName LIKE s.String OR p.SKU LIKE s.String) 
```

但这不会返回我想要的 - 它返回名称或 SKU 与任一搜索词匹配的任何记录。我需要它像第一个查询一样返回，其中名称或 SKU 匹配所有搜索词（我认为这是有道理的）。

将非常感谢朝着正确的方向推动 - 如果您需要我更具体，请告诉我。

注意：全文搜索目前不是一个可行的选择。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T15:02:44.007

下面的查询应该可以做到，但它可能不是最快的！

```
DECLARE @SearchText nvarchar(1000) SELECT @SearchText='white,cup'
DECLARE @keywords TABLE (keyword nvarchar(255))
DECLARE @keywordCount int

INSERT INTO @keywords (keyword) SELECT * FROM dbo.CsvSplitString(@SearchText)
SET @keywordCount = (SELECT COUNT(*) FROM @keywords)

SELECT *
FROM tbl_Product p
WHERE EXISTS
    (SELECT *
    FROM
        (SELECT productId
        FROM tbl_Product, @keywords
        WHERE productname like '%' + keyword + '%' or sku like '%' + keyword + '%' 
        GROUP BY productid
        HAVING COUNT(*) = @keywordCount
        ) matches 
    WHERE p.ProductId=matches.ProductId
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:45:39.853

如果一切都失败了，您可以运行光标`@SearchTerms`并循环遍历结果，检查每个项目是否存在于您的结果中。

您很可能不会有很多搜索项（5-6 会非常罕见），因此与`like`在文本上一遍又一遍地运行相比，光标成本应该可以忽略不计。这也不应该太贵。

编辑：我过去所做的搜索是以纯文本形式将查询发送到服务器，而不是依赖存储过程，所以我可以自己拼凑我的条件。如果您愿意，您可以对动态查询和`exec`服务器执行相同的操作。这种方式看起来很老套，而且性能提升并不明显。深思熟虑。

# javascript - scriptaculous 可排序树 - 防止节点进入子/父列表

> ID：10300132
> 
> 赞同：1
> 
> 时间：2012-04-24T14:33:45.143
> 
> 标签：javascript, html, scriptaculous

处理一个使用 scriptaculous 并遇到问题的旧项目。我目前有一个如下的树结构：

```
Item 1
  + Item 1a
    + Item 1aa
    + Item 1ab
  + Item 1b 
Item 2
  + Item 2a
  + Item 2b
    + Item 2ba
    + Item 2bb 
```

通过我现在使用树选项进行排序设置的方式，用户可以将**Item 2bb**拖到我试图阻止的**Item 2a中。**我想将拖动的项目保留在其父类别中。因此，如果**Item 2ba**存在于**Item 2b**下，则用户应该无法将该项目拖到该父项之外。我使用的创建代码非常简单：

```
Sortable.create('cats', {tree:true,scroll:window,treeTag:'ul',tag:'li', onChange:function(){$('save-cats').style.visibility='visible';}}); 
```

并且结构由标准`<li>`标签组成（注意嵌套`<ul>`标签：

```
<ul>
<li>Item 1</li>
<li>
   Item 2
   <ul>
      <li>Item 2a</li>
   </ul>
</li>
</ul> 
```

这甚至可以通过scriptaculous实现，还是我必须升级到其他东西？

我忘了提到这是一个动态列表。我不知道遏制选项是否是我正在寻找的，但这似乎不可能，因为我没有唯一的 ID。

## 更新

这有帮助，我一直在玩弄以下代码：

```
new Draggable('cats',{revert:true});

    Droppables.add('cats', { 
    onDrop: function(element) 
            {
                return false;
            }}); 
```

cat 是主要 ul 元素的 ID。onDrop 正在触发，但我无法让它恢复或“不接受”该项目。我假设如果我能做到这一点，我可以将当​​前父级与新父级进行比较，如果它们不相同，则将元素推回。

# c# - WPF Expander 在 Canvas 内不会向左扩展

> ID：10300139
> 
> 赞同：3
> 
> 时间：2012-04-24T14:34:05.443
> 
> 标签：c#, wpf, xaml, expander

我有一个 4 列的网格。第一列是一个 ZIndex 为 99 的 Canvas，里面是一个扩展器。展开方向设置为 RIGHT。当我单击标题时，扩展器会展开第 2 列的 OVER TOP ......这正是我想要的。我试图在第 4 列中复制这个（仅相反的方向），以便在展开时，它将显示在第 3 列上。即使我已将第二个扩展器的 ExpandDirection 标记为“左”，它仍然会扩展为右侧，并关闭屏幕。

**这是工作扩展器：**

```
<Canvas Grid.Column="0" Panel.ZIndex="99" Grid.RowSpan="4" VerticalAlignment="Stretch" Margin="0,5"> 
    <Expander ExpandDirection="Right" Style="{DynamicResource OptionsExpanderStyle}" VerticalAlignment="Stretch" Height="{Binding ActualHeight, RelativeSource={RelativeSource AncestorType={x:Type Canvas}}}">
        <Border BorderBrush="Black" BorderThickness="0,0,2,0">
            <Grid Background="White">

            </Grid>
        </Border>
    </Expander>
</Canvas> 
```

**这是损坏的扩展器：**

```
<Canvas x:Name="rightCanvas" Panel.ZIndex="99" Grid.RowSpan="4" Grid.Column="3" Margin="0,5">
    <Expander ExpandDirection="Left" Style="{DynamicResource OptionsExpanderStyle}" HorizontalAlignment="Right" VerticalAlignment="Stretch" Height="{Binding ActualHeight, RelativeSource={RelativeSource AncestorType={x:Type Canvas}}}">
        <Border BorderBrush="Black" BorderThickness="2,0,0,0">
            <Grid Background="White" Width="150">

            </Grid>
        </Border>
    </Expander>
</Canvas> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T15:12:57.743

不要使用画布。

尝试这样的事情：

```
<Grid>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <TextBlock Background="LightBlue"
            TextAlignment="Center" Text="Left Column"/>
        <TextBlock Grid.Column="1" Background="LightCoral" 
            TextAlignment="Center" Text="Right Column"/>
    </Grid>
    <Expander Background="LightGray" ExpandDirection="Right"
        Header="LeftMenu" VerticalAlignment="Top" HorizontalAlignment="Left">
        <StackPanel Width="200">
            <TextBlock Text="Some menu stuff"/>
            <TextBlock Text="Some more"/>
        </StackPanel>   
    </Expander>
    <Expander Background="LightGray" ExpandDirection="Left"
        Header="RightMenu" VerticalAlignment="Top" HorizontalAlignment="Right">
        <StackPanel Width="200" >
            <TextBlock Text="Some menu stuff"/>
            <TextBlock Text="Some more"/>
        </StackPanel>
    </Expander>
</Grid> 
```

# objective-c - Objective C，支持 ARC 和自动压缩数据的 RestFull 库

> ID：10300141
> 
> 赞同：0
> 
> 时间：2012-04-24T14:34:12.603
> 
> 标签：objective-c, ios5, automatic-ref-counting

我将 ASIHTTP 用于我的 Web 服务连接，但我决定迁移到 ARC，并且不想单独使用使用 ARC 和非 ARC 部分的静态库。因此，我正在寻找一个像 ASIHTTP 这样的新库，它可以让我处理连接。我只是寻找一个在发送数据之前自动压缩数据的 ARC 模型。有人知道哪个最好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T15:51:47.803

我推荐[RestKit](http://restkit.org/)。这是一个非常可靠的框架，它为您提供了一个带有光滑对象映射层的网络层（不需要 ASI 或 AFN），如果需要，还可以与 CoreData 很好地集成。

RestKit 确实[通过支持的 Apple 网络类](https://github.com/restkit/restkit/issues/511)支持 GZIP 压缩（NSURLConnection 为响应提供透明的 GZIP deflate 支持）。

就 ARC 而言，RestKit 将是您项目中的一个单独依赖项，因此 RestKit 本身是否使用 ARC 构建并不重要......如果您使用的是 ARC，您将使用 RestKit 对象的方式与其他任何东西（无需释放等）。

# webfonts - 如何从（官方）Google Web Fonts repo 下载多种格式的网络字体？

> ID：10300143
> 
> 赞同：35
> 
> 时间：2012-04-24T14:34:17.343
> 
> 标签：webfonts, google-webfonts

我了解到，Google 会根据访问它的**浏览器/设备自动提供****TTF**、**EOT**、**WOFF**或**SVG**字体文件。

 **现在我计划从我的服务器本身托管和提供字体文件，为此我首先必须下载网络字体的所有文件格式。

我如何或在哪里可以下载我想使用的网络字体的 4 种文件格式？

***PS：****通过使用不同的浏览器——Chrome、IE9 和 Safari（开发 - iPhone UA），我能够获得 WOFF、EOT 和 TTF 格式。不过 SVG 格式不走运。如果有更简单的方法，那就太棒了。*

*编辑：哦，顺便说一句，我知道我可以从[fontsquirrel](http://www.fontsquirrel.com/fonts/Droid-Serif)下载各种格式，但我说的是从官方 repo 下载。*

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-10-23T20:27:57.827

**======= 2016-05-31 更新 =======**

我制作了一个小的 PHP 脚本来从 Google 字体 CSS 导入 URL 获取下载链接，例如：[https ://fonts.googleapis.com/css?family=Roboto:400,700|Slabo+27px|Lato:400,300italic,900italic](https://fonts.googleapis.com/css?family=Roboto:400,700|Slabo+27px|Lato:400,300italic,900italic)

你可以在这里使用这个工具：http: [//nikoskip.me/gfonts.php](http://nikoskip.me/gfonts.php)

例如，如果你使用上面的导入 URL，你会得到：

[![在此处输入图像描述](../Images/ba74e8fb85cb1b792c3491e8914307a9.png)](https://i.stack.imgur.com/w0xCP.png)

我厌倦了在每个新版本的 Chrome 上更新这个答案，因为它们总是改变你可以欺骗用户代理字符串的方式，所以请改用这个脚本。

**======= 旧解决方案 =======**

使用 Chrome 中的 DevTools，您可以覆盖用户代理。

如何：

1.  在 Google 字体页面获取您需要的字体。
2.  您将在 CSS 中导入一个 URL，例如： http://fonts.googleapis.com/css?family=Cabin:500,700,500italic, [700italic](http://fonts.googleapis.com/css?family=Cabin:500,700,500italic,700italic)
3.  在浏览器中打开该 URL，您将看到可以实际下载字体的完整 URL。
4.  转到开发人员工具 (F12) 并按 ESC
5.  选择“仿真”选项卡，然后单击“网络”子选项卡
6.  最后`Spoof user agent`选择 IE9 用于 EOT 格式，Android 4 用于 TTF，此 UA 字符串用于 SVG：（`Mozilla/4.0 (iPad; CPU OS 4_0_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/4.1 Mobile/9A405 Safari/7534.48.3`感谢匿名）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-24T14:39:17.720

[您可以在http://code.google.com/p/googlefontdirectory/](http://code.google.com/p/googlefontdirectory/)克隆 Google webfonts 目录

您还可以在[http://code.google.com/p/googlefontdirectory/source/browse/#font_name获取单一字体文件](http://code.google.com/p/googlefontdirectory/source/browse/#font_name)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-03-09T08:23:19.543

# 如何获取字体下载 url，包括 SVG 和 woff2。

下载每种字体所需的用户代理如下。[来源](https://github.com/majodev/google-webfonts-helper/blob/539f0c41be4735b5b9d7005aef5022d0d9729fbe/server/logic/conf.js)。

```
module.exports = {
  USER_AGENTS: {
    eot: 'Mozilla/5.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/4.0)',
    woff: 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:27.0) Gecko/20100101 Firefox/27.0',
    woff2: 'Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML like Gecko) Chrome/38.0.2125.104 Safari/537.36', // complete woff2 file for one variant
    svg: 'Mozilla/4.0 (iPad; CPU OS 4_0_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/4.1 Mobile/9A405 Safari/7534.48.3',
    ttf: 'Mozilla/5.0 (Windows NT 6.1) AppleWebKit/534.54.16 (KHTML, like Gecko) Version/5.1.4 Safari/534.54.16'
  },
  GOOGLE_FONTS_API_KEY: 'AIzaSyDY-C-Lt9uyPP5fSTjMCR4bB944SlI4spw',
  CACHE_DIR: __dirname + "/cachedFonts/",
} 
```

使用 devtool 添加这些用户代理。

[![如何将新设备添加到 chrome](../Images/acb925b805168d51302e8d9bdac2a65e.png)](https://i.stack.imgur.com/BAFiV.gif)

[来源](https://developers.google.com/web/updates/2015/07/add-a-new-custom-device-as-a-preset?hl=en)

您现在可以访问`https://fonts.googleapis.com/css?family=Open+Sans`和欺骗您的用户代理，通过访问`@font-face`.

或者[google-webfonts-helper](https://google-webfonts-helper.herokuapp.com/)为您完成这一切。 [![google-webfonts-helper](../Images/334098b99dae65fc373f9dc59e2b3271.png)](https://i.stack.imgur.com/dr2gh.png) 这里有一篇很棒的博客文章[，](http://ranf.tl/2014/12/23/self-hosting-google-web-fonts/)来自我获取图像的开发人员。

## 为什么要自托管？

如果可能，请始终使用通用 CDN，您的字体甚至不需要下载（浏览器缓存）的可能性更大。

如果您担心谷歌向用户发送错误的字体，很可能是因为他们欺骗了他们的用户代理，那么还有另一种选择，仍然可以获得使用谷歌托管的好处。

插入`@font-face`自己，只需使用上述步骤找到谷歌字体网址并将其插入`<head>`;

`<style>`

```
@font-face {
    font-family: 'Open Sans';
    font-style: normal;
    font-weight: 400;
    src: url(google-font-url-here/opensans.eot);
    src: local('Open Sans'), local('OpenSans'),
    url(google-font-url-here/opensans.eot?#iefix) format('embedded-opentype'),
    url(google-font-url-here/opensans.woff2) format('woff2'), 
    url(google-font-url-here/opensans.woff) format('woff'), 
    url(google-font-url-here/opensans.ttf) format('truetype'), 
    url(google-font-url-here/opensans.svg#OpenSans) format('svg');
} 
```

`</style>`

## 这会带来风险，因为 URL 可能会发生变化！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-23T12:46:09.630

# **[https://github.com/google/fonts](https://github.com/google/fonts)**

旧答案： ~~我在线克隆了[https://code.google.com/archive/p/googlefontdirectory/](https://code.google.com/archive/p/googlefontdirectory/) :)~~

~~[https://bitbucket.org/Tymek/google-web-fonts/](https://bitbucket.org/Tymek/google-web-fonts/)你去！~~

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-12-29T00:15:50.997

我编写了一个 PowerShell 脚本来自动下载提供给几个不同用户代理的字体。对于基本字体，它获得所有四种格式（woff、ttf、svg、eot）。Google 似乎没有为粗体和斜体提供 SVG 和 EOT 文件。

```
 $agents = "Mozilla/5.0 (X11; Linux i686; rv:6.0) Gecko/20100101 Firefox/6.0",`
    "Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_8; de-at) AppleWebKit/533.21.1 (KHTML, like Gecko) Version/5.0.5 Safari/533.21.1",`
    "Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 7.1; Trident/5.0)",`
    "Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_0 like Mac OS X; en-us) AppleWebKit/532.9 (KHTML, like Gecko) Version/4.0.5 Mobile/8A293 Safari/6531.22.7",`
    "Mozilla/5.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/4.0; GTB7.4; InfoPath.2; SV1; .NET CLR 3.3.69573; WOW64; en-US)"

foreach($arg in $args) {
    $arg;
    foreach($agent in $agents) {
        $agent;
        $webclient = New-Object System.Net.WebClient
        [void]$webclient.Headers.Add("user-agent", $agent)
        $url = "http://fonts.googleapis.com/css?family=$arg"

        $css = $webclient.DownloadString($url)
        $css
        $fonts = $css |
            Select-String -AllMatches "http://[A-Za-z0-9/._?&=%-]+" |
            Select-Object -ExpandProperty Matches |
            Select-Object -ExpandProperty Value

        foreach($font in $fonts) {
            $font
            $fontfile = [System.Io.Path]::GetFileName((new-object System.Uri $font).LocalPath)
            [void]$webclient.DownloadFile($font, "$pwd\$fontfile")
        }
    }
} 
```

一旦它位于 .ps1 文件中，就可以使用要下载的字体作为参数调用它：

```
PS> .\DownloadFonts.ps1 "Open+Sans:400,700,400italic,700italic" 
```

该脚本将输出从 Google 服务器中提取的 CSS，以帮助您确定哪个文件是哪个文件（例如，在我的情况下，SVG 字体被提取为一个名为“font”的文件）。

这是基于 RichardN 和 ldeck 在博客文章[Locally Caching Google Web Fonts](http://tensquirrel.blogspot.com/2010/10/locally-caching-google-web-fonts.html)上发布的 bash 脚本。

作为参考，这里是 ldeck 的 bash 脚本：

```
 #!/bin/sh

for family in $*; do
 for url in $( {
 for agent in \
 'Mozilla/5.0 (X11; Linux i686; rv:6.0) Gecko/20100101 Firefox/6.0' \
 'Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_8; de-at) AppleWebKit/533.21.1 (KHTML, like Gecko) Version/5.0.5 Safari/533.21.1' \
 'Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 7.1; Trident/5.0)' ;
 do
 curl -A "$agent" -s "http://fonts.googleapis.com/css?family=$family" | \
 grep -oE 'http://[A-Za-z0-9/._-]+'; \
 done } | sort -u ) ;
 do
 extn=${url##*.} ;
 file=$(echo "$family"| tr +[:upper:] _[:lower:]);
 echo $url $file.$extn;
 curl -s "$url" -o "$file.$extn";
 done
done 
```

进一步参考：[使用 HTML5 AppCache](https://thebaercode.wordpress.com/2014/06/22/using-html5-appcache/)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-01-25T10:22:04.873

作为我在开源项目[MDIDX](https://github.com/jossef/material-design-icons-iconfont)上工作的一部分，我编写了一个[python 脚本](https://github.com/jossef/material-design-icons-iconfont/blob/master/build/build.py)。它将从 Google Fonts CDN 获取给定字体系列的所有可能字体格式。这很天真 - 暴力破解通用平台的用户代理

可以这样简化：

```
import re
import os
import requests

def main():
    font_family = "Material Icons"
    output_directory = "fonts"
    download_fonts(font_family, output_directory)

def download_fonts(font_family, output_directory, output_file_name=None):
    if not os.path.isdir(output_directory):
        os.makedirs(output_directory)

    if not output_file_name:
        output_file_name = font_family.lower().replace(" ","-")

    user_agents = USER_AGENTS.splitlines()
    user_agents = map(lambda x: x, user_agents)

    font_urls = set()
    for user_agent in user_agents:
        url = 'https://fonts.googleapis.com/icon?family={}'.format("+".join(font_family.strip().split()))
        r = requests.get(url, headers={"user-agent": user_agent})
        r.raise_for_status()
        urls = re.findall('url\((.*?)\)', r.text)
        urls = map(str, urls)
        urls = filter(str, urls)
        font_urls.update(urls)

    fonts_map = {font_url.split('.')[-1].lower(): font_url for font_url in font_urls}

    for file_extension, url in fonts_map.items():
        file_path = os.path.join(output_directory, '{output_file_name}.{file_extension}'.format(output_file_name=output_file_name, file_extension=file_extension))
        _download_file(url, file_path)

USER_AGENTS = """
Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.3) Gecko/20090913 Firefox/3.5.3
Mozilla/5.0 (Windows; U; Windows NT 6.1; en; rv:1.9.1.3) Gecko/20090824 Firefox/3.5.3 (.NET CLR 3.5.30729)
Mozilla/5.0 (Windows; U; Windows NT 5.2; en-US; rv:1.9.1.3) Gecko/20090824 Firefox/3.5.3 (.NET CLR 3.5.30729)
Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.1) Gecko/20090718 Firefox/3.5.1
Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US) AppleWebKit/532.1 (KHTML, like Gecko) Chrome/4.0.219.6 Safari/532.1
Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; InfoPath.2)
Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0; Trident/4.0; SLCC1; .NET CLR 2.0.50727; .NET CLR 1.1.4322; .NET CLR 3.5.30729; .NET CLR 3.0.30729)
Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.2; Win64; x64; Trident/4.0)
Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; SV1; .NET CLR 2.0.50727; InfoPath.2)Mozilla/5.0 (Windows; U; MSIE 7.0; Windows NT 6.0; en-US)
Mozilla/4.0 (compatible; MSIE 6.1; Windows XP)
Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/42.0.2311.135 Safari/537.36 Edge/12.246
Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2227.0 Safari/537.36
Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_7; da-dk) AppleWebKit/533.21.1 (KHTML, like Gecko) Version/5.0.5 Safari/533.21.1
Opera/9.80 (Windows NT 6.1; U; es-ES) Presto/2.9.181 Version/12.00
Mozilla/5.0 (Linux; U; Android 2.3.4; fr-fr; HTC Desire Build/GRJ22) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1
Mozilla/5.0 (Linux; Android 7.0; SAMSUNG SM-N920C Build/NRD90M) AppleWebKit/537.36 (KHTML, like Gecko) SamsungBrowser/6.2 Chrome/56.0.2924.87 Mobile Safari/537.36
Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.43 BIDUBrowser/2.x Safari/537.31
Mozilla/5.0 (Linux; U; Android 4.4.2; zh-cn; GT-I9500 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko)Version/4.0 MQQBrowser/5.0 QQ-URL-Manager Mobile Safari/537.36
Mozilla/5.0 (Android 8.0.0; Tablet; rv:57.0) Gecko/57.0 Firefox/57.0
Mozilla/5.0 (Android 8.1.0; Mobile; rv:61.0) Gecko/61.0 Firefox/61.0
"""

def _download_file(url, file_path):
    r = requests.get(url)
    r.raise_for_status()
    with open(file_path, 'wb') as f:
        f.write(r.content)

if __name__ == '__main__':
    main() 
```

[![在此处输入图像描述](../Images/dc41728b0d6a96f03a032172b6c4d9bd.png)](https://i.stack.imgur.com/oZhYO.png)**

# javascript - 如何在单击 aspx 页面中的图像按钮时将焦点设置在不同的元素上

> ID：10300150
> 
> 赞同：1
> 
> 时间：2012-04-24T14:34:41.520
> 
> 标签：javascript, asp.net

我的 aspx 页面中有一个图像按钮。单击该按钮时，它将调用一个javascript函数，例如

```
function skiptoaccess() {

    if (document.getElementById("ctl00_txtBox") != null)
        document.getElementById("ctl00_txtBox").focus();
} 
```

在该函数中，我尝试在单击图像按钮时为文本框设置焦点，我收到错误消息，例如“”htmlfile：无法将焦点移动到控件，因为它不可见、未启用或类型不接受重点。” ”。所以有人请让我知道解决方案吗？我的图像按钮和文本框如下

```
<asp:TextBox ID="txtBox" Style="display: none;" runat="server">Click 'OK' to continue and reload the page or 'Cancel' to close the window</asp:TextBox>

<asp:ImageButton ImageUrl="~/App_Themes/images/visuallyimpaired_Disabled.gif" ID="imgbtnAccessibility" runat="server" AlternateText="Accessibility" ToolTip="Accessibility" OnClientClick=" return skiptoaccess();" />` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:39:50.147

基本上，您不能将焦点放在隐藏的元素上。

`Style="display: none;"`如果您希望能够为其提供焦点，或者在单击按钮时使其可见，请删除。

# .net - IValidatableObject 对 EF 导航属性没用？

> ID：10300156
> 
> 赞同：0
> 
> 时间：2012-04-24T14:35:23.117
> 
> 标签：.net, validation, ef-code-first, entity-framework-4.3

IValidatableObject.Validate 仅在实现实体 DbEntityEntry.State 不同于“未更改”时才被调用。并且仅更改导航属性不会更改状态，因此永远不会发生验证。

为什么微软总是发布半生不熟的测试版？

我什至无法手动检测导航属性的变化：

```
var changes = context.ChangeTracker.Entries()
    .Where(e => e.State != EntityState.Unchanged)
    .ToArray(); 
```

返回一个空数组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T18:58:36.800

这里有几个有趣的点。EntityFramework 独立于实体的更改跟踪导航属性的更改。context.ChangeTracker.Entries() 仅返回对实体的更改，而不是对关系的更改。这就是你看不到这些的原因。如果您真的想查看关系以及它们如何变化，您可以下拉到 ObjectContext 并执行以下操作：

```
var objectContext = ((IObjectContextAdapter) ctx).ObjectContext;
foreach(var relationshipEntry in objectContext.ObjectStateManager
                                              .GetObjectStateEntries(EntityState.Added | EntityState.Modified | EntityState.Deleted)
                                              .Where(e => e.IsRelationship))
{
    EntityKey entityKey1, entityKey2;

    if (relationshipEntry.State == EntityState.Added)
    {
        entityKey1 = (EntityKey)relationshipEntry.CurrentValues[0];
        entityKey2 = (EntityKey)relationshipEntry.CurrentValues[1];            
    }
    else
    {
        entityKey1 = (EntityKey)relationshipEntry.OriginalValues[0];
        entityKey2 = (EntityKey)relationshipEntry.OriginalValues[1];                        
    }

    var entity1 = objectContext.GetObjectByKey((EntityKey)entityKey1);
    var entity2 = objectContext.GetObjectByKey((EntityKey)entityKey2);
} 
```

对我来说更有趣的场景是当关系发生变化时需要重新验证实体的场景。我假设您没有外键 - 否则您的实体将被标记为已修改，因为更改导航属性会更改外键的值，这反过来会将实体标记为已修改。无论如何，鉴于我有三个有效实体 - 改变关系可能使实体（或模型）无效的情况是什么？另外，请注意，验证本身仅验证给定实体，但从不遵循导航属性来验证相关实体。最后，如果您真的需要在关系发生变化时验证实体，我认为您有 4 个选项：

*   尝试添加外键，以便更改关系将更改应将实体标记为已修改的外键（免责声明：我没有尝试过）

*   覆盖 DbContext.ShouldValidateEntity() 方法以验证所有实体，而不是仅验证修改的实体（这是过滤逻辑发生的地方）。请注意，它可能会对性能产生一些负面影响。这是您需要添加到从 DbContext 派生的类的代码：

```
 protected  override bool ShouldValidateEntity(DbEntityEntry entityEntry)
        {
            return (entityEntry.State & EntityState.Deleted) == 0;
        } 
```

*   覆盖 DbContext.SaveChanges() 以便您为所有修改的实体和涉及修改的关系的所有实体调用验证（使用上面的代码，您很可能只对已添加的关系条目感兴趣）

*   当您修改集合时，手动将实体标记为已修改。请注意，它可能会导致向数据库发送不需要的更新，因此取决于您跟踪的实体数量，仅验证所有未删除的实体可能会便宜得多

您可以在此处找到有关验证和验证自定义的更多详细信息： http: [//blogs.msdn.com/b/adonet/archive/2010/12/15/ef-feature-ctp5-validation.aspx](http://blogs.msdn.com/b/adonet/archive/2010/12/15/ef-feature-ctp5-validation.aspx) http://blogs.msdn .com/b/adonet/archive/2011/05/27/ef-4-1-validation.aspx（是的，它适用于 CTP 和 EF 4.1，但仍然有效）

# c# - 如何将 linq 中的相关对象删除到实体框架

> ID：10300161
> 
> 赞同：2
> 
> 时间：2012-04-24T14:35:47.650
> 
> 标签：c#, entity-framework, linq-to-entities, foreign-key-relationship

我有 2 张桌子：

```
orders 
orderItems 
```

相互连接引发了关系（表`orderId`中的FK `orderItems`）。有没有区别：

```
order.orderitems.remove(...) 
```

在尝试删除相关实体时仅将`orderId`值设置为？`null`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T04:08:56.063

将 FK 属性设置为 null 并从 navugation 属性中删除实体都做同样的事情。也就是说，它们都切断了实体之间的关系，但不会导致任一实体被删除。这与将数据库中的 FK 值设置为 NULL 相同。

要删除实体，您必须在实体的 DbSet 上调用 Remove。例如

```
context.OrderItems.Remove(orderitem);
context.SaveChanges(); 
```

# python - 如何在python中随机合并两个列表的两个元素并确保结果条目都是唯一的？

> ID：10300162
> 
> 赞同：1
> 
> 时间：2012-04-24T14:35:51.460
> 
> 标签：python, list

我有两个列表，A 和 B，具有相同数量的元素，尽管每个列表中的元素不一定不同。

我想通过随机耦合来自 A 和 B 的元素来形成一个新列表（随机配对很重要）。

但是，我还需要确保结果列表中的每一对都是唯一的。

到目前为止，我一直在解决以下问题，它适用于小型列表，但显然不适合具有多种组合的大型列表。

```
from random import shuffle

# Create a list of actors and events for testing
events = ['P1','P1','P1','P2','P2','P2','P3','P3','P3','P4','P5','P6','P7','P7']
actors = ['IE','IE','ID','ID','IA','IA','IA','IC','IB','IF','IG','IH','IH','IA']

# Randomize the elements of each list
shuffle(events)
shuffle(actors)

# Merge the two lists into a new list of pairs
edgelist = zip(events,actors)

# If the new list of pairs has all unique elements, then it is a good solution, otherwise try again at random
x = set(edgelist)

if len(edgelist) == len(x):
  break
else:
  while True:
    shuffle(events)
    shuffle(actors)
    edgelist = zip(events,actors)
    x = set(edgelist)
    if len(edgelist) == len(x):
      break

# Display the solution
print 'Solution obtained: '
for item in edgelist:
  print item 
```

任何人都可以提出一种修改或替代方法来扩展到更大的输入列表吗？

感谢您的帮助。

**更新**

事实证明，这是一个比最初想象的更具挑战性的问题。我想我现在有一个解决方案。它可能无法很好地扩展，但适用于中小型列表。它会在开始之前检查解决方案是否可行，因此不需要对输入列表的分布进行假设。我还包含了几行代码来显示结果列表的频率分布与原始列表匹配。

```
# Randomize the elements
shuffle(events)

# Make sure a solution is possible
combinations = len(set(events))*len(set(actors))
assert combinations >= len(events) and combinations >= len(actors) and len(events) == len(actors), 'No soluton possible!'

# Merge the two lists into a new list of pairs (this will contain duplicates)
edgelist = zip(events,actors)

# Search for duplicates
counts = collections.Counter(edgelist)
duplicates = [i for i in counts if counts[i] > 1]
duplicate_count = len(duplicates)

while duplicate_count > 0:

  # Get a single duplicate to address
  duplicate = duplicates[0]

  # Find the position of the duplicate in the in edgelist
  duplicate_pos = edgelist.index(duplicate)

  # Search for a replacement
  swap = choice(edgelist)
  swap_pos = edgelist.index(swap)

  if (swap[0],duplicate[1]) not in edgelist: 
    edgelist[duplicate_pos] = (swap[0],duplicate[1])
    edgelist[swap_pos] = (duplicate[0],swap[1])

  # Update duplicate count
  counts = collections.Counter(edgelist)
  duplicates = [i for i in counts if counts[i] > 1]
  duplicate_count = len(duplicates)

# Verify resulting edgelist and frequency distributions

print 'Event Frequencies: '
print sorted([y for (x,y) in list(collections.Counter(events).items())], reverse=True)

print 'Edgelist Event Frequencies: '        
print sorted([y for (x,y) in list(collections.Counter([x for (x,y) in edgelist]).items())], reverse=True)

print 'Actor Frequencies: '        
print sorted([y for (x,y) in list(collections.Counter(actors).items())], reverse=True)

print 'Edgelist Actor Frequencies: '        
print sorted([y for (x,y) in list(collections.Counter([y for (x,y) in edgelist]).items())], reverse=True)

assert len(set(edgelist)) == len(events) == len(actors) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:22:02.810

好吧，您没有理由*对这两个*列表进行洗牌。配对不会变得“更随机”。

更新：我发布了与原始解决方案不同的解决方案。它是递归的，并且保证总是返回一个有效的答案，或者如果不可能，则返回 None。

```
from random import shuffle

def merge(events, actors, index=None):
    """Returns list of unique pairs of events and actors, none of which may on index"""
    if len(events) == 0:
        return []
    if index is None:
        index = set()

    merged = None
    tried_pairs = set()
    for event in events:
        for i, actor in enumerate(actors):
            pair = (event, actor)
            if pair not in index and pair not in tried_pairs:
                new_index = index.union([pair])
                rest = merge(events[1:], actors[:i]+actors[i+1:], new_index)

                if rest is not None:
                    # Found! Done.
                    merged = [pair] + rest
                    break
                else:
                    tried_pairs.add(pair)
        if merged is not None:
            break

    return merged

if __name__ == '__main__':
    _events = ['P1','P1','P1','P2','P2','P2','P3','P3','P3','P4','P5','P6','P7','P7']
    _actors = ['IE','IE','ID','ID','IA','IA','IA','IC','IB','IF','IG','IH','IH','IA']
    shuffle(_events)
    edgelist = merge(_events, _actors)

    if edgelist is not None:
        print 'Solution obtained: '
        for item in edgelist:
            print item
    else:
        print 'No possible solution with these events and actors.' 
```

注意：在 OP 的解决方案中，“index”变量类似于检查 edgelist。“tried_pa​​irs”变量只是对每个特定递归步骤的优化，以避免一遍又一遍地重试相同的对（例如，如果参与者中有几个连续的相同项目）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:55:37.560

这似乎工作正常，但是我不完全确定它的扩展性如何......

```
# Create tuples of lists of actors and events for testing
testcases = [
    (['P1','P1','P1','P2','P2','P2','P3','P3','P3','P4','P5','P6','P7','P7'],
     ['IE','IE','ID','ID','IA','IA','IA','IC','IB','IF','IG','IH','IH','IA']),

    (['P1','P1','P1','P1','P1','P1','P1','P2','P2','P2','P2','P2','P2','P2'],
     ['IE','IE','IE','IE','IE','IE','IE','ID','ID','ID','ID','ID','ID','ID']),

    (['P1','P2','P3','P4','P5','P6','P7','P8','P9','PA','PB','PC','PD','PE'],
     ['IE','IE','IE','IE','IE','IE','IE','ID','ID','ID','ID','ID','ID','ID']),
]

events, actors = testcases[0]

import random

def random_choice(items):
    """ yield list items in random order """
    items = items[:]  # preserve input argument
    random.shuffle(items)
    while items:
        yield items.pop()

pairs = set()
for event in random_choice(events):
    for index in random_choice(range(len(actors))):
        pair = (event, actors[index])
        if pair not in pairs:  # unique?
            pairs.add(pair)
            actors.pop(index)
            break

# Display the solution (in sorted order)
print 'Solution obtained has %d unique pairs: ' % len(pairs)
for item in sorted(list(pairs)):
    print item 
```

我使用了问题的答案中的想法[如何从列表中选择随机元素并将其删除？](https://stackoverflow.com/questions/3791400/how-can-you-select-a-random-element-from-a-list-and-have-it-be-removed).

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-24T14:50:02.223

```
# Create a list of actors and events for testing
events = ['P1','P1','P1','P2','P2','P2','P3','P3','P3','P4','P5','P6','P7','P7']
actors = ['IE','IE','ID','ID','IA','IA','IA','IC','IB','IF','IG','IH','IH','IA']

# Randomize the elements
shuffle(events)

# Merge the two lists into a new list of pairs
edgelist = zip(events,actors)

# remove duplicates
x = set(edgelist)

# If there were not enough unique elements : add new ones as needed.
while len(x)<len(edgelist):
    x.add((choice(events), choice(actor)))

# Display the solution
print 'Solution obtained: '
for item in x:
  print item 
```

# windows-xp - 单机系统密码丢失，域控制器崩溃，无法重置密码

> ID：10300163
> 
> 赞同：0
> 
> 时间：2012-04-24T14:35:52.790
> 
> 标签：windows-xp, forgot-password, domaincontroller

在网络故障期间，我们的域控制器崩溃并且不再可用。其中一位用户丢失了密码，并且不记得了。由于我没有域控制器来重置他的密码，我该如何继续帮助他？

初始设置：通过域控制器连接的所有计算机。

当前设置：没有域控制器。

任何帮助将非常感激！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T05:05:47.693

问题已关闭。如果不在崩溃后重新创建域，就没有办法做到这一点。无分辨率。

# google-maps - Google Maps JavaScript API v3 GPS 坐标作为中心

> ID：10300167
> 
> 赞同：2
> 
> 时间：2012-04-24T14:36:16.450
> 
> 标签：google-maps, gps, center

我一直在网上搜索解决方案，但我仍然无法找到任何解决方案，我一直在谷歌自己的自由中找到这个。

我想要从 GPS 中提取的坐标用作我的谷歌地图的中心，所以当你在 fx 中时。在 Kongs nytorv 的哥本哈根，你会得到那个位置作为中心。

我的地图有一些选项：

```
var myOptions = {
      center: new google.maps.LatLng(55.674, 12.403),
      zoom: 10,
      disableDefaultUI: true,
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      mapTypeControl: false,
      mapTypeControlOptions: {
        style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,
        position: google.maps.ControlPosition.BOTTOM_CENTER
        },
        panControl: true,
        panControlOptions: {
            position: google.maps.ControlPosition.TOP_RIGHT
        },
        zoomControl: true,
        zoomControlOptions: {
            style: google.maps.ZoomControlStyle.LARGE,
            position: google.maps.ControlPosition.LEFT_CENTER
        },
        scaleControl: false,
        scaleControlOptions: {
            position: google.maps.ControlPosition.BOTTOM_CENTER
        },
        streetViewControl: true,
        streetViewControlOptions: {
            position: google.maps.ControlPosition.BOTTOM_CENTER
        }
    }; 
```

现在我有一个静态位置作为中心。
但我找不到从哪里获取信息

我一直在尝试解决这个问题，所以如果可能的话，我们都会找到解决问题的方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T15:27:24.467

这是来自谷歌文档的示例

[https://google-developers.appspot.com/maps/documentation/javascript/examples/map-geolocation](https://google-developers.appspot.com/maps/documentation/javascript/examples/map-geolocation)

这是代码，以防此链接损坏：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Google Maps JavaScript API v3 Example: Map Geolocation</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="UTF-8">
    <link href="/maps/documentation/javascript/examples/default.css"
      rel="stylesheet" type="text/css">
    <!--
    Include the maps javascript with sensor=true because this code is using a
    sensor (a GPS locator) to determine the user's location.
    See: https://developers.google.com/apis/maps/documentation/javascript/basics#SpecifyingSensor
    -->
    <script type="text/javascript"
        src="https://maps.googleapis.com/maps/api/js?sensor=true"></script>

    <script type="text/javascript">
      var map;

      function initialize() {
        var myOptions = {
          zoom: 6,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('map_canvas'),
            myOptions);

        // Try HTML5 geolocation
        if(navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
            var pos = new google.maps.LatLng(position.coords.latitude,
                                             position.coords.longitude);

            var infowindow = new google.maps.InfoWindow({
              map: map,
              position: pos,
              content: 'Location found using HTML5.'
            });

            map.setCenter(pos);
          }, function() {
            handleNoGeolocation(true);
          });
        } else {
          // Browser doesn't support Geolocation
          handleNoGeolocation(false);
        }
      }

      function handleNoGeolocation(errorFlag) {
        if (errorFlag) {
          var content = 'Error: The Geolocation service failed.';
        } else {
          var content = 'Error: Your browser doesn\'t support geolocation.';
        }

        var options = {
          map: map,
          position: new google.maps.LatLng(60, 105),
          content: content
        };

        var infowindow = new google.maps.InfoWindow(options);
        map.setCenter(options.position);
      }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div id="map_canvas"></div>
  </body>
</html> 
```

# javascript - 替换为正则表达式

> ID：10300172
> 
> 赞同：1
> 
> 时间：2012-04-24T14:36:44.110
> 
> 标签：javascript, regex

我需要使用什么正则表达式来纠正

```
if (text.indexOf("+") != -1) {
            action = "+";
        } else if (text.indexOf("-") != -1) {
            action = "-";
        } else if (text.indexOf("*") != -1) {
            action = "*";
        } else if (text.indexOf("/") != -1) {
            action = "/";
        } 
```

这段代码？

编辑：

以及如何改进此代码：

```
switch (action) {
        case "+":
            result = parseInt(array[0]) + parseInt(array[1]);
            break;
        case "-":
            result = parseInt(array[0]) - parseInt(array[1]);
            break;
        case "*":
            result = parseInt(array[0]) * parseInt(array[1]);
            break;
        case "/":
            result = parseInt(array[0]) / parseInt(array[1]);
            break;
        default:
            break;
        } 
```

抱歉，我是 js 新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T14:38:29.537

您可以使用以下任何一种：

```
var action = text.replace(/.*([+*/-]).*/,'$1');

var match  = /[*+/-]/.exec(text);
var action = match && match[0]; 
```

如果您的中可能有换行符，`text`则将第一个更改为：

```
var action = text.replace(/[\d\D]*([+*/-])[\d\D]*/,'$1'); 
```

**编辑**：您可以通过使用来改进您的`switch`陈述，例如

```
// allow floating point values, and also 
// don't accidentally interpret "011" as octal
array[0]*1 + array[1]*1; 
```

有关为什么`parseInt`可能不好的更多详细信息，请参阅[此答案](https://stackoverflow.com/a/10184402/405017)。

您还可以删除`default`案例陈述中多余的部分。但是，我怀疑您想要的“改进”正在减少行数。鉴于这`=-*/`是JavaScript 中的*运算符*（而不是方法），我想不出任何方法来避免进行四个计算（即 a`switch`或`if/else if`）。

*而在 Ruby 中，例如，您可以使用它`array[0].send(action,array[1])`来涵盖所有四种情况；）*

# algorithm - 寻找一组非相邻子数组的有效算法，使其总和最大化

> ID：10300177
> 
> 赞同：2
> 
> 时间：2012-04-24T14:37:18.890
> 
> 标签：algorithm

我在一个编程竞赛网站上遇到了这个问题，并尝试了几天不同的东西，但它们似乎都不够有效。

问题是：给定一个大整数数组和一个数字 k。目标是将数组划分为子数组，每个子数组包含不超过 k 个元素，使得所有子数组中所有元素的总和最大。另一个条件是这些子阵列中没有一个可以彼此相邻。换句话说，我们必须从原始数组中删除一些项。

它困扰了我一段时间，想听听您对解决这个问题的看法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T15:22:47.033

动态编程应该可以解决问题。简短的解释为什么：

易受动态规划影响的问题的关键特性是问题的最优解（这里：整个数组）总是可以表示为子问题（这里：两个子数组）的两个最优解的组合。并非每个拆分都需要有此属性 - 对于任何最佳解决方案，存在一个这样的拆分就足够了。

显然，如果您在数组之间拆分最优解（在已删除的元素上），那么子解在两个子数组中都是最优的。

算法：

依次尝试数组中的每个元素作为拆分元素，寻找产生最佳结果的元素。递归解决数组的两个部分的问题（当子数组不超过 时，递归停止`k`）。记忆解决方案以避免指数时间（递归显然会多次尝试相同的子数组。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:05:36.170

这不是一个解决方案，而是一个线索。

考虑解决以下问题：

从数组 X 中选择元素的一个子集，使得它们都不相邻并且它们的总和最大。

现在，上述问题是您的问题的一个特例，其中 K=1。想想如何将解决方案扩展到一般情况。如果您不知道如何解决更简单的情况，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-15T14:50:07.173

我没有时间解释为什么会这样，应该是公认的答案：

```
def maxK(a, k): 
    states = k+1
    myList = [0 for i in range(states)]
    for i in range(0, len(a)): 
        maxV = max (myList)
        myList = [a[i] + j for j in myList]
        myList[(states-i) % k] = maxV  
    return max(myList) 
```

这也适用于负数。`size(a)`这在时间上是线性的`k`。我使用的语言是 Python，因为在这个级别上它可以像伪代码一样被阅读。

# java - 下载和保存图形

> ID：10300181
> 
> 赞同：0
> 
> 时间：2012-04-24T14:37:32.723
> 
> 标签：java, image, graphics, file-io, javax.imageio

我无法保存已加载的图片。图片保存在该程序所在的同一文件夹下。错误不断重复出现。错误画面如下

## 错误

```
---------- Capture Output ----------
>"C:\Program Files\Java\jdk1.6.0_22\bin\java.exe" loadapicture
java.lang.NoClassDefFoundError: loadapicture
Caused by: java.lang.ClassNotFoundException: loadapicture
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
Could not find the main class: loadapicture.  Program will exit.
Exception in thread "main" 
> Terminated with exit code 1. 
```

## 我的程序

```
import hsa.*;
import java.awt.*;
// Look at all of these extra imports needed for a picture file
import java.io.File;
import java.io.IOException;
import java.awt.image.*;
import javax.imageio.*;

public class loadapicture{
    public static void main(String[] args){
        Console con = new Console();

        // Variables need to open a picture file
        File tictactoefile;
        BufferedImage tictactoeimage;
        tictactoefile = null;
        tictactoeimage = null;

        // Now that the variables are created.. Time to load the picture into the variables
        // BTW  You need to load the file using a block called try/catch
        // Becuase if the file does not exist, you need to catch the error
        // You can use jpg, gif, and bmp

        try{
            // Trying to open the file and loading it
            tictactoefile = new File("");
            tictactoeimage = ImageIO.read( owin.jpeg);

        }catch(IOException e){
            // If the file is not found, this will happen
            con.println("ERROR... IMAGE FILE NOT FOUND"); 
        }

        con.drawImage(tictactoeimage, 100, 100, null);

        // Yes you can do all of this in a method
}
} 
```

如何正确下载和保存图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:49:28.393

我想你只需要指定你的班级的路径

```
"C:\Program Files\Java\jdk1.6.0_22\bin\java.exe" -classpath <path to your class> loadapicture 
```

# c# - AutoMapper - 集合到数组返回包含空项的数组

> ID：10300182
> 
> 赞同：1
> 
> 时间：2012-04-24T14:37:42.140
> 
> 标签：c#, .net, automapper

我的课如下

```
class MyControl { //..lot of primitive variable
private MyItemCollection items;
public MyItemCollection Items { get { return items; } set { items = value; } } 
```

在 AutoMapper 中，我将其设置为

```
Mapper.CreateMap(typeof(MyItem), typeof(MyItem));
Mapper.CreateMap<MyControl, MyWebService.MyControl>()
   .ForMember(dest => dest.Items, opt => opt.MapFrom(src => src.Items)); 
```

在代码中，我提供这样的转换

```
MyWebService.MyControl mc1 = Mapper.Map<MyControl, MyWebService.MyControl>(mc); 
```

mc1 包含所有原始数据值。但`mc1.Items`包含 3 个全部为空的项目。`mc`对象正确填充了这 3 个项目..

为什么`MyItem`没有发生转换？

有人可以帮忙吗？

我正在尝试将 web 服务对象转换为数据对象。

# php - PHP：下载时如何返回原始文件名？

> ID：10300183
> 
> 赞同：0
> 
> 时间：2012-04-24T14:37:59.187
> 
> 标签：php

我正在将文件上传到服务器，然后将原始文件名存储在数据库中。

现在下载我目前正在使用这样的东西：

`Content-Disposition: attachment; filename=<?=urlencode($file)?>`

它有效，但它用 + 替换空格字符

下载时如何恢复原始文件名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:41:23.500

该`urlencode`函数将`+`符号放在您的文件名字符串中 - 如果您不希望`+`符号删除`urlencode`- 然后将字符串放在引号中：

```
header('Content-Disposition: attachment; filename="'.$file.'"'); 
```

# ruby-on-rails - Rails 中为头像选择场景构建 RESTful 资源的建议

> ID：10300184
> 
> 赞同：0
> 
> 时间：2012-04-24T14:38:00.387
> 
> 标签：ruby-on-rails, rest, rails-routing

我们有一个要求，用户需要为其个人资料选择头像。在编辑个人资料页面上，用户单击更改图片链接，该链接将他们带到另一个页面，并为他们提供两个链接以从 Facebook 或 gravatar 获取他们的照片。此页面上还显示了图像的预览，以及保存按钮。此页面的控制器是 AvatarsController。我有编辑和更新操作，以及 facebook 和 gravatar 的自定义 GET 操作，因此路线看起来像 avatar/facebook 和 avatar/gravatar。这些操作只是查询相应的服务并创建一个包含照片 url 的新头像模型。当用户单击保存时，将调用更新操作并将头像模型与配置文件一起保存。该页面由编辑模板交付，默认情况下，创建用户时，

Profile 模型（使用 mongoid）本质上看起来像：

```
def Profile
  embeds_one :avatar
end 
```

头像模型如下所示：

```
def Avatar
  embedded_in :profile
end 
```

路线如下：

```
resource :avatar, only: [:edit, :update] do
   member do
     get 'facebook'
     get 'gravatar'
   end
end 
```

控制器看起来像：

```
class AvatarsController < ApplicationController
  def facebook
    url = AvatarServices.facebook(current_user, params[:code])
    respond_to do |format|
      unless url
        format.json { head :no_content }
      else
        @avatar = Avatar.new({:url => url, :source => "Facebook"})
        @avatar.member_profile = current_user.member_profile
        format.html { render :edit }
        format.json { render json: @avatar }
      end
    end
  end
  def gravatar
    respond_to do |format|
      url = AvatarServices.gravatar(current_user)
      unless url 
        format.json { head :no_content }
      else
        @avatar = Avatar.new({:url => url, :source => "Gravatar"})
        @avatar.member_profile = current_user.member_profile
        format.html { render :edit }
        format.json { render json: @avatar }
      end
    end
  end
  def edit
    @avatar = current_user.member_profile.avatar
  end
  def update
    @avatar = current_user.member_profile.avatar
    respond_to do |format|
      if @avatar.update_attributes(params[:avatar]) 
        format.html { redirect_to edit_member_profile_path }
        format.json { head :no_content }
      else
        format.html
        format.json { render json: @avatar.errors }
      end
    end
  end
end 
```

这行得通，但是对于 Rails 来说还很新，我想知道 Rails 专家是否会以不同的方式设置“facebook”和“gravatar”资源，也许是以更 RESTful 的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:26:26.977

好吧，子文件夹将 facebook 和 gravatar 控制器放入一个公共命名空间。你可以使用嵌套路由，

```
resource :avatar, only: [:edit, :update] do
  resource :facebook
  resource :gravatar
end 
```

这将路由到 FacebooksController 和 GravatarsController。

无论如何，这就是您的想法，并且您不需要 facebook 或 gravatar 记录的记录 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:18:49.620

你能添加你的控制器代码吗？我很想看看你是如何设置你的动作的。

如果您想保持安静，可能只需为头像创建一个控制器子文件夹，然后为 gravatar 和 facebook 创建后续控制器。您只需使用生成器就可以做到这一点

```
rails g controller avatars/facebook
rails g controller avatars/gravatar 
```

# java - 解密（使用 PHP）Java 加密（PBEWithMD5AndDES）

> ID：10300185
> 
> 赞同：0
> 
> 时间：2012-04-24T14:38:06.357
> 
> 标签：java, php, cryptography, md5, des

有人让我用 PHP 解密一个用以下 Java 类加密的字符串。

```
public class CryptoLibrary {

private Cipher encryptCipher;
private sun.misc.BASE64Encoder encoder = new sun.misc.BASE64Encoder();

public CryptoLibrary() throws SecurityException{

    java.security.Security.addProvider(new com.sun.crypto.provider.SunJCE());

    char[] pass = "NNSHHETJKKSNKH".toCharArray();
    byte[] salt = {
    (byte) 0xa3, (byte) 0x21, (byte) 0x24, (byte) 0x2c,
    (byte) 0xf2, (byte) 0xd2, (byte) 0x3e, (byte) 0x19 };

    init(pass, salt, iterations);

}

public void init(char[] pass, byte[] salt, int iterations)throws SecurityException{

        PBEParameterSpec ps = new javax.crypto.spec.PBEParameterSpec(salt, 20);
        SecretKeyFactory kf = SecretKeyFactory.getInstance("PBEWithMD5AndDES");
        SecretKey k = kf.generateSecret(new javax.crypto.spec.PBEKeySpec(pass));

        encryptCipher = Cipher.getInstance("PBEWithMD5AndDES/CBC/PKCS5Padding");
        encryptCipher.init(Cipher.ENCRYPT_MODE, k, ps);
    }
}

public synchronized String encrypt(String str)  throws SecurityException{
    if(str!=null){
        byte[] utf8 = str.getBytes("UTF8");
        byte[] enc = encryptCipher.doFinal(utf8);
        return encoder.encode(enc);
    }
    else {
        return null;
    }
}
} 
```

我不懂任何 Java，所以我需要一些帮助来理解这种加密。

1）这条线是什么意思？ `PBEParameterSpec ps = new javax.crypto.spec.PBEParameterSpec(salt,20);`

2）我应该为第一个参数使用什么值 `string mcrypt_encrypt ( string $cipher , string $key , string $data , string $mode [, string $iv ] )`

3) 我什么时候应该在我的 php 脚本中使用 MD5？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-28T13:18:58.647

我不得不为我的一个客户做同样的事情，并写了几行代码来帮助解决问题：[https ://github.com/kevinsandow/PBEWithMD5AndDES](https://github.com/kevinsandow/PBEWithMD5AndDES)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T20:22:01.427

1) 它为基于密码的加密创建参数，包括在哈希计算中的盐，以及执行哈希方法的迭代次数（在它自己的输出上）。它用于击败彩虹表攻击，基本上攻击者必须经过相同次数的迭代来检查密码是否正确，并且他不能使用预先计算的表，因为每个密码的盐都会不同（所以你看不到如果有人与另一个用户具有相同的密码）。

2) MCRYPT_DES，你需要 MCRYPT_MODE_CBC 作为模式，当然还有 PKCS#5 填充。

3) 仅当您绝对确定其弱点未暴露或绝对需要兼容性时。幸运的是，它对于密钥派生功能相对安全。下载 PHP 的 pbkdf1 方法并将其放入其中 - 如果尚未包含。

# ruby-on-rails - HAML - 如何制作注销链接？

> ID：10300187
> 
> 赞同：0
> 
> 时间：2012-04-24T14:38:15.240
> 
> 标签：ruby-on-rails, ruby, haml

我有这条路线：

```
 scope :module => :mobile, :as => :mobile do
    constraints(:subdomain => /m/) do
      devise_for :users, :path => "", :path_names =>
               { :sign_in => "login", :sign_out => "logout",
                 :sign_up => "signup" },
                 :controllers => {:sessions => "mobile/sessions"}
     ... 
```

所以我想这将是我注销的链接：

```
 =link_to("Log Out", logout_url) 
```

但这给出了错误：

```
undefined local variable or method `logout_url' for #<#<Class:0x134881e88>:0x134879a08> 
```

知道如何让链接正确指向吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T14:48:23.263

如果您签出，`rake routes`您会注意到您的路线看起来像`destroy_user_session`.

此外，该路由仅在使用删除 http 方法时才有效。

`link_to "Log out", destroy_user_session_url, :method => :delete`

# java - 如何刷新 GEF 编辑器视图

> ID：10300193
> 
> 赞同：1
> 
> 时间：2012-04-24T14:38:23.313
> 
> 标签：java, eclipse

我有一个多页编辑器，在编辑器的第二页我有一个编辑器，当我双击一个树节点时，会打开一个视图部分，我在视图部分显示图形编辑器并显示单击的节点的树 xpath。

现在，当我转到第一页时，我隐藏了视图部分，但是如果我再次转到第二页，我想显示具有相同内容的相同视图部分，但是当我执行 showView(ViewPart.ID) 时，我得到黑色视图部分。

我也正在获取 GEF 编辑器的 rooTEditPart 的内容并尝试刷新子 editPart 但视图部分也没有显示内容。

请帮忙！！

# javascript - IE 7 jquery 绑定和 $(this)

> ID：10300194
> 
> 赞同：2
> 
> 时间：2012-04-24T14:38:24.910
> 
> 标签：javascript, jquery

我有树视图脚本，其中一部分看起来像：

```
root.find("." + classControl).each(function () {
    $(this).bind('click', function () {
        if ($(this).text() == "-") {
            $(this).text("+");
        }
        else {
            $(this).text("-");
        }
        $(this).parentsUntil("li").parent().children("ul").toggle();
    });
}); 
```

它应该找到所有折叠/显示按钮并将它们绑定到适当的功能。它适用于 FF、Chrome、IE 8，但不适用于 IE7。当我单击按钮时，它会从 + 变为 - 或相反，但它也会将所有其他按钮设置为空文本。

我认为问题一定出在 this 选择器上，因为如果我只绑定简单的 alert()，它甚至在 IE7 中也有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T08:32:24.863

您想强制 IE7 重新绘制您的对象 - 如果您调整屏幕大小，它会这样做。有多种方法可以做到这一点，但这里有一种声称与您的情况非常相似的方法：[IE7 何时重新计算样式？](https://stackoverflow.com/questions/2458579/when-does-ie7-recompute-styles-doesnt-work-reliably-when-a-class-is-added-to-t)

# c# - 换行符在 MailMessage 的正文中不起作用

> ID：10300203
> 
> 赞同：3
> 
> 时间：2012-04-24T14:38:51.473
> 
> 标签：c#, asp.net, html

我正在使用 MailMessage 和 SmtpClient 从 ASP.NET 发送电子邮件。我想介绍一些换行符，但以下都不起作用：

*   添加标签`sbBody.Append("<table width='100%'><tr><td></br></br>");`
*   添加 \r\n`sbBody.Append("<table width='100%'><tr><td>\r\n\r\n");`
*   将新行添加到 StringBuilder。

sbBody 是一个 StringBuilder，我在最后使用它来设置 MailMessage 的正文：`mailMessage.Body = sbBody.ToString()`

我在这里想念什么？我正在 Outlook 中查看电子邮件，当然我将 IsBodyHtml 设置为 true。

谢谢你的时间。

**编辑：**已解决，这是一个语法错误，`</br>`而不是`<br/>`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T14:41:53.957

你的 br 标签是错误的。它们应该写成：

```
<br /> 
```

# ffmpeg - 从 UDP 组播 RTSP 视频流中读取

> ID：10300207
> 
> 赞同：1
> 
> 时间：2012-04-24T14:38:54.940
> 
> 标签：ffmpeg, udp, video-streaming, multicast

我目前正在开发一个需要解码 UDP 多播 RTSP 流的应用程序。目前，我可以通过 ffplay 查看 RTP 流

```
ffplay -rtsp_transport udp_multicast rtsp://streamURLGoesHere 
```

但是，我正在尝试使用 FFMPEG 打开 UDP 流（为简洁起见，删除了错误检查和清理代码）。

```
AVFormatContext* ctxt = NULL;
av_open_input_file(
    &ctxt,
    urlString,
    NULL,
    0,
    NULL
);

av_find_stream_info(ctxt);

AVCodecContext* codecCtxt;

int videoStreamIdx = -1;
for (int i = 0; i < ctxt->nb_streams; i++)
{
    if (ctxt->streams[i]->codec->codec_type == AVMEDIA_TYPE_VIDEO)
    {
        videoStreamIdx = i;
        break;
    }
}

AVCodecContext* codecCtxt = ctxt->streams[videoStreamIdx]->codec;
AVCodec* codec = avcodec_fine_decoder(codecCtxt->codec_id);
avcodec_open(codecCtxt, codec);

AVPacket packet;
while(av_read_frame(ctxt, &packet) >= 0)
{
    if (packet.stream_index == videoStreamIdx)
    {
        /// Decoding performed here
        ...
    }
}

... 
```

这种方法适用于包含原始编码视频流的文件输入，但对于 UDP 多播 RTSP 流，它无法通过在`av_open_input_file()`. 请指教...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T19:55:42.213

事实证明，可以通过以下方式打开多播 UDP RTSP 流：

```
AVFormatContext* ctxt = avformat_alloc_context();

AVDictionary* options = NULL;
av_dict_set(&options, "rtsp_transport", "udp_multicast", 0);
avformat_open_input(
    &ctxt,
    urlString,
    NULL,
    &options
);

...

avformat_free_context(ctxt); 
```

以`avformat_open_input()`这种方式使用而不是`av_open_input_file()`导致所需的行为。我猜这`av_open_input_file()`要么已被弃用，要么从未打算以这种方式使用——很可能是后者；）

# windows-phone-7 - Windows 手机 Microsoft.Phone.Media.Extended.dll 文件

> ID：10300208
> 
> 赞同：1
> 
> 时间：2012-04-24T14:39:01.697
> 
> 标签：windows-phone-7

如何为我的项目获取 Microsoft.Phone.Media.Extended dll 文件？我无法在任何地方找到这个。有人能帮我吗？

谢谢杰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T22:23:39.450

您必须注意，此 DLL 不是公共 SDK 的一部分，因此如果使用它，**您的应用程序将无法通过 Marketplace 认证。**您可以通过转储模拟器操作系统映像来获取它，例如，获取 GAC。

或者你可以使用反射。我在[这里](http://dotnet.dzone.com/articles/not-your-regular-photo-and)工作过。

**编辑：**既然你需要访问闪存，你知道吗？它在 Mango 中已有一段时间了：http: [//msdn.microsoft.com/en-us/library/hh202949 (v=VS.92).aspx](http://msdn.microsoft.com/en-us/library/hh202949(v=VS.92).aspx)

# java - 我有一个日期对象，需要对其进行格式化以进行缓存查找，simpledateformat 不是线程安全的吗？

> ID：10300212
> 
> 赞同：1
> 
> 时间：2012-04-24T14:39:12.047
> 
> 标签：java, spring, datetime, spring-mvc

在我的 servlet 中，当一个请求进来时，我创建一个日期对象。

```
Date now = new Date(); 
```

我想执行缓存查找，我需要创建一个辅助函数，将日期格式化为：

2012.04.24-10:34

这是： `yyyy-MM-dd,HH:mm`

我有这个使用简单的日期格式：

```
public class DateHelpers {
      public static final DateFormat minuteDateFormat = new SimpleDateFormat("yyyy-MM-dd,HH:mm", Locale.US);

      public static String getDateKey(Date now) {
         // use minuteDateFormat to format date
      }
} 
```

但我正在阅读简单的日期格式不是线程安全的。

我没有将字符串解析为日期格式，所以也许有更好更快的方法来做到这一点？

我正在获取一个日期对象并将其格式化为一个字符串，它必须是线程安全的，因为许多请求将使用此 DateHelper 静态方法从日期中获取密钥。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T14:58:53.023

退后一步，如果您真的很想提高性能，我会完全避免格式化日期，而只使用 unix 时间戳作为键（即 System.currentTimeMllis()）。如果您想根据现有日期对象进行查找，`date.getTime()`则会为您提供时间戳。

如果你想将它舍入到一分钟，你可以整数除法和乘以 60,000 - 它更快并且保证线程安全。

对于格式化日期的情况，我通常要么按需创建日期格式（它并不*昂贵*），要么我有一个实用程序对象池，我明确地将其与每个工作人员相关联。

线程本地解决方案将起作用，但随着时间的推移，很容易忘记所有 TL，最终得到更难调试的代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T14:41:40.080

使用[`ThreadLocal<DateFormat>`](http://docs.oracle.com/javase/7/docs/api/java/lang/ThreadLocal.html).

```
public class DateHelpers {
    private static final ThreadLocal<DateFormat> minuteDateFormat = new ThreadLocal<DateFormat>() {
        @Override protected DateFormat initialValue() {
            return new SimpleDateFormat("yyyy-MM-dd,HH:mm", Locale.US);
        }
    };

    public static String getDateKey(Date now) {
        DateFormat df = minuteDateFormat.get();
       // use df to format date
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-19T12:46:24.513

# java.time

The [java.time](https://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html) framework is built into Java 8 and later. (See [Tutorial](https://docs.oracle.com/javase/tutorial/datetime/TOC.html).)

Included is a new date formatter which **is thread-safe**: [`DateTimeFormatter`](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html).

Another advantage is the support of optional parts in the formatting pattern.

Its creation will be like this:

```
protected static DateTimeFormatter df = DateTimeFormatter.ofPattern("yyyy-MM-dd,HH:mm"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T15:17:50.220

来自 SimpleDateFormat 的 javadoc：

> 建议为每个线程创建单独的格式实例。

太多的开发人员看到了这一点，他们的第一直觉是在 ThreadLocal 上同步或添加同步块。在不知不觉中，代码中充满了 ThreadLocal，通常作为“预防措施”，但并非没有必要。排除故障会变得异常困难。除非绝对别无选择，否则没有理由使用线程本地同步您的格式。如果您确实有一个永远不会改变的日期格式（为什么要使用给定的字符串格式将其标记为静态最终格式），那么您真正需要的是在 JVM 中创建一次的该日期格式的实例。最好在应用程序启动时使用控制反转来注入您的简单日期格式。这样，当您在任何地方需要它时，您就知道它存在。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T14:44:10.550

试试这个

```
public class DateFormatTest {

  private static final ThreadLocal<DateFormat> df
                 = new ThreadLocal<DateFormat>(){
    @Override
    protected DateFormat initialValue() {
        return new SimpleDateFormat("yyyy-MM-dd,HH:mm", Locale.US);
    }
  };

  public Date convert(String source)
                     throws ParseException{
    Date d = df.get().parse(source);
    return d;
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-24T14:50:04.673

您也可以从 Joda 时间 API尝试[DateTimeFormat 。](http://joda-time.sourceforge.net/api-release/org/joda/time/format/DateTimeFormat.html)它是不可变的和线程安全的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-24T14:51:21.177

来自[commons-lang的](http://commons.apache.org/lang/)[FastDateFormat](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/time/FastDateFormat.html)是线程安全的。此外，您不会通过继承 ThreadLocal 来创建 ClassLoader-leaks。但是它只做格式化，不做解析。

另一种选择是优秀的[joda-time](http://joda-time.sourceforge.net/)库，它具有无状态的因此是线程安全的解析器和格式化程序。

# xml - 需要 XSD 小帮助

> ID：10300217
> 
> 赞同：0
> 
> 时间：2012-04-24T14:39:28.333
> 
> 标签：xml, xsd

我需要小。我很难将手动 xml 模式映射到简单的 xml 结构。任何一位 xml 专家都可以在 2 分钟内解决我的问题，相信我可以挽救我的生命。

这是 xsd 中的架构。

[https://rapidshare.com/files/688147446/schema.zip](https://rapidshare.com/files/688147446/schema.zip)

在**import_customers_request.xsd**文件中，我们有这个元素

```
<xs:element name="customer" type="COCustomerDetail" minOccurs="0" maxOccurs="unbounded"/> 
```

在文件**coTypes.xsd中有详细信息**

我对 xml 不太擅长，所以到目前为止我发现的是跟随 xml 结构。

```
<import_customers_request schemaVersion="5.5">

    <customers>

    <customer>
    <useBillingCodeIdentifier>false</useBillingCodeIdentifier>
    <useShippingCodeIdentifier>false</useShippingCodeIdentifier>
    <companyName>Tech Max</companyName>
    <contact>

    <firstName>Sohaib</firstName>
    <lastName>Rajpoot</lastName>
    <email>suhaibpucit\@yahoo.com</email>

    </contact>
    </customer>
    </customers>
    </import_customers_request> 
```

现在我只想要两个领域。

1.  地址
2.  密码

能否请您改进这个结构，并为这些领域提供良好的位置。我将非常感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T18:33:22.033

在更改之前，您可以考虑检查您的信息中已有的内容。我这么说只是因为你可能在你的“发现”中忽略了一些内容。检查文档是个好主意，以便含义匹配...

密码：

![密码](../Images/3773db707a8501e818491b51b064a3ca.png)

地址信息似乎以 addressLine1 开头，然后是更多字段。

![地址](../Images/f22858eb7b4ef167965a0cdf9d0f9180.png)

无论如何，如果您想修改 XSD，我建议保持一致。例如，这是您在 XSD 中用作密码的模型：

```
<xs:element name="password" minOccurs="0">
    <xs:annotation>
        <xs:documentation> password is of course mandatory on any request message it may not be echoed on responses </xs:documentation>
    </xs:annotation>
    <xs:simpleType>
        <xs:restriction base="xs:string">
            <xs:minLength value="3"/>
            <xs:maxLength value="20"/>
        </xs:restriction>
    </xs:simpleType>
</xs:element> 
```

始终建议使用工具来分析和可视化 XSD。例如，遍历所有 XSD，您可以搜索诸如**addr**或**passw**之类的模式。

![在 QTAssistant XSR 中查找 XSD 内容](../Images/a584a2283b5fd9ce3e29cc1cdb8dd266.png)

然后“放大” COAddress 的使用可能会产生它在各种组件中的使用，以及它们与全局内容（根元素、类型等）的关系；在这里你可以看到它追溯到你的根元素。

![XSD 依赖关系图](../Images/22b6e16cea013edcc7f540f8218be613.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:00:02.340

要将密码添加为最大长度为 80 的字符串，表示为一个元素：

```
<xs:complexType name="COCustomer">
  <xs:complexContent>
     <xs:extension base="COAddress">
        <xs:sequence>
           <xs:element name="password">
             <xs:simpleType>
                <xs:restriction base="xs:string">
                   <xs:maxLenght value="80"/>
                </xs:restriction>
              <xs:simpleType/>
           </xs:element>
     . . . . 
```

在这种情况下，它将是其中的第一个元素`customer`- 您当然可以将其向下移动。

将地址添加到`COContact`. . .

# c - 有没有办法确定apache模块的加载顺序

> ID：10300220
> 
> 赞同：1
> 
> 时间：2012-04-24T14:39:36.247
> 
> 标签：c, apache, apache-modules

我正在开发一个基于 Apache 的应用程序，其中包含几个自定义模块。

我想与其他人分享一个模块中的一些功能。我需要在分层阶段将它们连接在一起。我想使用带有模块名称的 GetModuleHandle + GetProcAddress（它将仅在 Windows 下运行） - 但只有当 Apache 服务器已加载该模块时，这才会成功。

有没有办法配置 Apache 模块的加载顺序。我只需要控制我的模块——其他模块无关紧要。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:07:23.420

如果您尝试从模块的源代码控制 Apache 钩子调用顺序，您可以尝试使用`APR_HOOK_FIRST`、`APR_HOOK_MIDDLE`和`APR_HOOK_LAST`. 或者您可以专门命名其他模块以强制执行排序约束。从[文档](http://httpd.apache.org/docs/2.2/developer/hooks.html#hooking-order)：

> ...“有两种机制可以做到这一点。第一种相当粗略的方法，允许我们粗略地指定挂钩相对于其他模块的运行位置。最后一个参数控制它。有三个可能的值：APR_HOOK_FIRST、APR_HOOK_MIDDLE和 APR_HOOK_LAST。
> 
> “使用任何特定值的所有模块都可以相对于彼此以任何顺序运行，但是，当然，所有使用 APR_HOOK_FIRST 的模块都将在 APR_HOOK_MIDDLE 之前运行，它们在 APR_HOOK_LAST 之前。不关心何时运行的模块应该使用 APR_HOOK_MIDDLE . 这些值是隔开的，因此像 APR_HOOK_FIRST-2 这样的位置可能会比其他函数稍早挂钩。 ...
> 
> “另一种方法允许更好的控制。当一个模块知道它必须在一些其他模块之前（或之后）运行时，它可以通过名称指定它们。第二个（第三个）参数是一个以 NULL 结尾的字符串数组，由必须在当前模块之前（之后）运行的模块的名称。例如，假设我们希望“mod_xyz.c”和“mod_abc.c”在我们之前运行，那么我们将挂钩如下......” [示例如下]

# android - Android Toasts 在某些手机上获得触摸事件，而不是在其他手机上

> ID：10300224
> 
> 赞同：7
> 
> 时间：2012-04-24T14:39:45.993
> 
> 标签：android

我正在使用带有自定义视图的 Toast。我实例化视图并在 toast 上调用 setView。Toast 应该漂浮在顶部并且不接收焦点和触摸事件，并且效果很好。该应用程序启动后，用户抱怨在 Galaxy Note 等一些手机型号上，Toast 确实有触摸事件，而它下面的应用程序没有。

我打印了视图在方法 setLayoutParams 中获取的布局参数标志 (WindowManager.LayoutParams)。事实证明，在大多数设备上，该值是 0x000098，但在某些设备上是 0x040088。在 Toast 获得触摸事件的设备上，标志 FLAG_NOT_TOUCHABLE 被移除，并添加标志 FLAG_WATCH_OUTSIDE_TOUCH。这解释了为什么 toast 会获得触摸事件。

但造成这种差异的原因是什么？有没有办法强制吐司不可触摸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-12T17:48:47.133

我有一个解决办法。您需要访问 toast 所覆盖的视图。您基本上可以捕获到 Toast 的触摸事件。然后更改 MotionEvent X 和 Y。然后将 MotionEvent 发送到被遮挡的视图。对我来说感觉有点hacky，但它有效。我认为更改 Toast 上的标志会更好，但我找不到它们。

在活动中创建 Toast：

```
final Taost toast = Toast.makeText(this, "Text", Toast.LENGTH_LONG);
final View myCoveredView = findViewById(R.id.my_covered_view);
final View toastView = toast.getView();

toastView.setOnTouchListener(new OnTouchListener() {

                @Override
                public boolean onTouch(final View v2, final MotionEvent event) {
                    //Make sure the view is accessible
                    if(myCoveredView != null){
                        //Set the touch location to the absolute screen location
                        event.setLocation(event.getRawX(), event.getRawY());
                        //Send the touch event to the view
                        return myCoveredView.onTouchEvent(event);
                    } 
                    return false;
                }
            }); 
```

如果有人有更好的方法，我很想在这里。

# wpf - 从代码中设置 ItemContainerStyle

> ID：10300228
> 
> 赞同：0
> 
> 时间：2012-04-24T14:39:56.673
> 
> 标签：wpf, wpf-controls

我正在开发一个从 ListBox 派生的自定义 wpf 控件，并尝试将一些格式应用于自定义属性。当特定的自定义属性为 false 时，我想对 ListBox 应用一些格式。我正在使用以下代码尝试应用样式 -

```
var t = new Trigger();                

var BackgroundSetter = new Setter {Property = BackgroundProperty, Value = null};
var BrushSetter = new Setter { Property = BorderBrushProperty, Value = null };

t.Setters.Add(BackgroundSetter);
t.Setters.Add(BrushSetter);

var s = new Style(typeof(ListBox));
s.Triggers.Add(t);

editor.ItemContainerStyle.Triggers.Add(t); 
```

我也试过以下没有运气 -

```
editor.ItemContainerStyle = s; 
```

我收到一个错误，表明某些对象未初始化，并且单步执行显示 editor.ItemContainerStyle 为空。实际的错误消息只是说调用目标抛出了异常。

有谁知道我可能做错了什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:37:51.630

我能够得到这个工作 - 下面是我最终使用的代码 -

```
public bool IsSelectable
{
    get { return (bool)GetValue(IsSelectableProperty); }
    set { SetValue(IsSelectableProperty, value); }
}

public static DependencyProperty IsSelectableProperty = DependencyProperty.Register("IsSelectable", typeof(bool), typeof(ListEditor), new FrameworkPropertyMetadata(true, new PropertyChangedCallback(IsSelectablePropertyChanged)) { BindsTwoWayByDefault = true });

private static void IsSelectablePropertyChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
{
    var editor = sender as ListEditor;

    var s = new Style(typeof(ListBoxItem));                
    var enableSetter = new Setter {Property = IsEnabledProperty, Value = editor.IsSelectable};
    s.Setters.Add(enableSetter);

    editor.ItemContainerStyle = s;                                       
} 
```

# iphone - 如何配置 Microsoft Encoder 4 Pro 以流式传输 http Live？

> ID：10300229
> 
> 赞同：0
> 
> 时间：2012-04-24T14:40:00.333
> 
> 标签：iphone, objective-c, ios, mpmovieplayercontroller, http-live-streaming

好吧，我正在开发一个 iphone 应用程序，我想流式传输一些视频，我已经完成了播放器应用程序，但是由于我自己的控件，可以播放部分视频，比如 6 秒，这给我带来了一些问题因为当我在任何一秒寻找或启动我的播放器时，它会持续到接近 10 秒，我的意思是，如果我想进入第二个 43，它会进入 40 ......如果我想进入第二个 46，它会进入50 一个所以...我认为这是 HTTP 直播的问题，或者大部分来自编码？？？

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:39:28.513

HLS 使用短媒体段，因此搜索会转到最近段的开头并不奇怪。我认为 10 秒是默认值。如果你想要更细的粒度，你应该减少[Segment length](http://learn.iis.net/page.aspx/854/live-smooth-streaming-for-iis-7---apple-http-live-streaming#configurepubpt)。不能将段长度降低到小于 I 帧间隔，通常为 2 秒左右。

# jquery - 谷歌分析阻止在新窗口中打开

> ID：10300231
> 
> 赞同：1
> 
> 时间：2012-04-24T14:40:03.507
> 
> 标签：jquery, google-analytics

我正在尝试与另一家公司的谷歌分析代码合作。不幸的是，我没有太多经验，只了解代码的基础知识。

我正在使用的以下代码应该跟踪跨浏览器点击：（我已经删除了大部分代码并编写了重要的部分）

```
if (($(link).attr('href').indexOf('example.com') != -1) && 
         (window.location.href.indexOf('example.com') == -1)) {
  $(link).bind('click', function (l) {
    if (typeof (_gat) == "object") {
      l.preventDefault();
      _gaq.push(['_link', $(link).attr('href')]);
    }
  });
} 
```

现在我遇到的问题是阻止默认设置现在阻止所有外部链接在新窗口中打开。

如何修改此代码并维护跟踪，以便他们仍然这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T16:24:15.713

`_link`set 在`location.href`内部跳转到新的 URL，但忽略链接中的任何目标属性。`_link`您可以`_getLinkerUrl`自己使用和关注 URL ，而不是使用

```
$(link).bind('click', function (l) {
  if (typeof (_gat) == "object") {
      var pageTracker = _gat._getTrackerByName();
      var url = pageTracker._getLinkerUrl(this.href);
      l.preventDefault();
      if ($(this).attr('target') != '_blank') location.href = url;
      else window.open(url);
  }
}); 
```

# android - 无法删除可绘制对象，VM 预算崩溃

> ID：10300233
> 
> 赞同：0
> 
> 时间：2012-04-24T14:40:09.833
> 
> 标签：android, imageview, android-linearlayout

我正在开发一个使用一种本地背景的应用程序。我们的想法是让它变得可变。我设法使用此代码更改“背景”。

```
Bitmap bMap = BitmapFactory.decodeFile(sharedPreferences.getString("PICTURE", ""));
        Drawable d =new BitmapDrawable(bMap);
        bac.setBackgroundDrawable(d);
        } 
```

问题是每次我返回“背景屏幕”时，应用程序都会因为 OutOfMemoryError 而崩溃。然后它显示新的背景。我需要某种使应用程序不会崩溃的代码。我在 ImageView 中做到了这一点，但在 LinearLayout 中没有。对于 ImageView，我使用以下代码：

```
Bitmap bMap = BitmapFactory.decodeFile(sharedPreferences.getString("PICTURE", ""));
    image.setImageBitmap(bMap); 
```

为了避免它崩溃：

```
@Override
protected void onPause() {
super.onPause();

unbindDrawables(findViewById(R.id.iv_pic));
System.gc();

}

private void unbindDrawables(View view) {
    if (view.getBackground() != null) {
    view.getBackground().setCallback(null);
    }
    if (view instanceof ViewGroup) {
        for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
        unbindDrawables(((ViewGroup) view).getChildAt(i));
        }
    ((ViewGroup) view).removeAllViews();
    }
}
@Override
protected void onDestroy() {
super.onDestroy();

unbindDrawables(findViewById(R.id.iv_pic));
System.gc();

} 
```

我如何为 LinearLayout 做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T15:17:03.787

SO上有很多关于OOM异常以及如何处理的问题。请在发布问题之前[搜索论坛。](https://stackoverflow.com/search?q=%5Bandroid%5D%20OOM)

一些注意事项：

1.  `Bitmap`您可以使用该方法释放 a 消耗的内存`recycle`（在您的代码中，您可以调用`bMap.recycle()`）
2.  您可以检索对您的`LinearLayout`使用的引用`findViewById`并将其传递给`unbindDrawables`类似的`unbindDrawables(findViewById(R.id.myLinearLayoutId));`

# php - Json 将 print_r 拆分为 foreach

> ID：10300240
> 
> 赞同：0
> 
> 时间：2012-04-24T14:40:47.033
> 
> 标签：php, foreach, json

我有以下代码

```
$List2 = json_decode(file_get_contents("https://___URL____&format=json"),true); 
```

以下作品完美

```
echo '<pre>';print_r($List2);echo '</pre>'; 
```

并产生例如

```
Array
(
[0] => Array
    (
        [uid] => 123456
        [name] => John Williams
        [pic_square] => http://nc4/565228_799523_q.jpg
        [birthday_date] => 07/31/1987
    )

[1] => Array
    (
        [uid] => 123789
        [name] => Jane Thompson
        [pic_square] => http://profile.ak.fbcdn.net/785505233_1702140670_q.jpg
        [birthday_date] => 07/31/1983
    )

[2] => Array
    (
        [uid] => 456789
        [name] => John Gaffney
        [pic_square] => http://profet/hprofile-ak-snc4/3717297628_q.jpg
        [birthday_date] => 07/31/1965
    )

[3] => Array
    (
        [uid] => 987654
        [name] => Johnny Illand
        [pic_square] => http://c4/41766_14329_q.jpg
        [birthday_date] => 07/31/1958
    ) 
```

我想运行一个 foreach 以使结果打印得更清楚一些，所以我正在尝试以下操作：

```
$data = $List2['data'] ;

foreach ($data as $nr => $friends){

echo $friends[name].' - ';

} 
```

但我明白了

```
Warning: Invalid argument supplied for foreach() 
```

我很难过，这可能很容易！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:43:54.000

尝试：

```
foreach ($List2 as $element)
    echo $element[name].' - '; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:43:06.933

在此示例中，“数据”键不存在

`$data = $List2;`

# c - 打印双链接列表的访问冲突

> ID：10300244
> 
> 赞同：0
> 
> 时间：2012-04-24T14:40:53.877
> 
> 标签：c, linked-list, access-violation

我需要一些帮助来弄清楚为什么我会遇到这种访问冲突。这是家庭作业，我已经全部写好了，但是在打印列表时最终遇到了访问冲突。我正在尝试正向和反向打印列表。我怀疑问题出在反向功能上。这是代码，感谢您的帮助。

*列表.h*

```
typedef int Titem;

// Interface of list
typedef struct node *Tpointer;
typedef struct node 
{
    Titem item;
    Tpointer next, previous;
} Tnode;

typedef struct
{
Tpointer first;
Tpointer last;
}Tdbl;

void initialize_dbl (Tdbl *list);
void insert_to_dbl_front (Tdbl *list, Titem data);
void insert_to_dbl_back (Tdbl *list, Titem data);
void print_dbl (Tdbl const list);
void print_dbl_reverse (Tdbl const list); 
```

*列表.c*

```
#include <stdio.h>
#include <stdlib.h>
#include "List.h"

#define TYPE_INT 0
#define TYPE_FLOAT 1

// Implementation of list (only obj is need in appl)
void initialize_dbl (Tdbl *list) 
{
   list->first = NULL;
   list->last = NULL;
}

void insert_to_dbl_front (Tdbl *list, Titem data)
{
    Tpointer newnode;

    if(list->first == NULL)
    {
       newnode = (Tpointer) malloc(sizeof(Tnode));
       newnode->item = data;
       newnode->next = NULL;
       newnode->previous = NULL;
       list->first = newnode;
    }
    else
    {
        newnode = (Tpointer) malloc(sizeof(Tnode));
        newnode->item = data;
        newnode->next = list->first;
        newnode->previous = NULL;
        list->first = newnode;

    }
}

void insert_to_dbl_back (Tdbl *list, Titem data)
{
    Tpointer newnode;

    newnode = (Tpointer) malloc(sizeof(Tnode));
    newnode -> item = data;
    if (list->first == NULL)
        list->first = newnode;       //first node
    else
        list->last->next = newnode;  //not first node
    list->last = newnode;
    list->last->next = NULL;
}

void print_dbl (Tdbl const list) 
{
    Tpointer what;

    printf("\nList forward:");
    what = list.first;
    while (what != NULL) {
        printf("%d ", what->item);
        what = what->next;
    }

}

void print_dbl_reverse (Tdbl const list)
{
    Tpointer last = list.last;
    Tpointer temp = NULL;

    printf("\nList reversed: ");
    if(last == NULL)
    {
        printf("");
    }
    else
    {   
        while(last != NULL)
        {
            temp = last->next;  
            last->next = last->previous;
            last->previous = temp;
            last = temp;

        }

        printf("\nList reverse:");

        while (last != NULL) 
        {
            printf("%d ", last->item);
            last = last->next;
        }
    }
} 
```

*主程序*

```
#include "list.h"
#include <stdio.h>

int main(void) {
Tdbl dbl;
initialize_dbl(&dbl);
print_dbl(dbl);
print_dbl_reverse(dbl);
insert_to_dbl_back(&dbl, 10);
print_dbl(dbl);
print_dbl_reverse(dbl);
insert_to_dbl_front(&dbl, 20);
print_dbl(dbl);
print_dbl_reverse(dbl);
insert_to_dbl_back(&dbl, 30);
print_dbl(dbl);
print_dbl_reverse(dbl);
insert_to_dbl_front(&dbl, 40);
print_dbl(dbl);
print_dbl_reverse(dbl);
insert_to_dbl_back(&dbl, 50);
print_dbl(dbl);
print_dbl_reverse(dbl);

fflush(stdin); getchar();
} 
```

我查看了大约 10 个不同的链接列表示例，并在论坛中搜索了我的问题的答案。我尝试反转列表的每个示例似乎都没有执行任何操作或最终出现此访问冲突错误。哦，是的，主文件或头文件中的任何内容都无法更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:44:17.823

在

```
void insert_to_dbl_front (Tdbl *list, Titem data)
{
    Tpointer newnode;

    if(list->first == NULL)
    {
       newnode = (Tpointer) malloc(sizeof(Tnode));
       newnode->item = data;
       newnode->next = NULL;
       newnode->previous = NULL;
       list->first = newnode;
    } 
```

你没有设置`list->last`，所以仍然设置为`NULL`。但是，如果`list->first`不是`NULL`，

```
else
{
    newnode = (Tpointer) malloc(sizeof(Tnode));
    newnode->item = data;
    newnode->next = list->first;
    newnode->previous = NULL;
    list->first = newnode;

} 
```

您从未将`previous`当前第一个节点的指针设置为新节点，因此您实际上并没有双向链表。

当你在后面插入时，

```
void insert_to_dbl_back (Tdbl *list, Titem data)
{
    Tpointer newnode;

    newnode = (Tpointer) malloc(sizeof(Tnode));
    newnode -> item = data;
    if (list->first == NULL)
        list->first = newnode;       //first node
    else
        list->last->next = newnode;  //not first node
    list->last = newnode;
    list->last->next = NULL;
} 
```

您永远不会设置`previous`新节点的指针。所以你仍然只有一个单链表。仅此一项不会导致访问冲突，但是在这里**您从未设置`newnode->previous`为任何内容**，因此它包含恰好位于该内存位置的所有位。

然后在`print_dbl_reverse`你交换一些`previous`和`next`指针并有

```
while (last != NULL) 
{
    printf("%d ", last->item);
    last = last->next;
} 
```

在某些时候设置`last`为未初始化的非`NULL`指针，这会导致访问冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:41:56.987

您的代码中有很多错误。我写了一个简单的，所以你可以研究它，但把反向函数留给你。玩得开心！

```
#include <stdio.h>
#include <stdlib.h>
#include "List.h"

#define TYPE_INT 0
#define TYPE_FLOAT 1

// Implementation of list (only obj is need in appl)
void initialize_dbl (Tdbl *list) 
{
   list->first = NULL;
   list->last = NULL;
}

void insert_to_dbl_front (Tdbl *list, Titem data)
{
    Tpointer newnode = (Tpointer) malloc(sizeof(Tnode));;
    newnode->item = data;
    newnode->previous = NULL;
    newnode->next = list->first;

    if(list->first != NULL) 
        list->first->previous = newnode;
    else 
        list->last = newnode;

    list->first = newnode;
}

void insert_to_dbl_back (Tdbl *list, Titem data)
{
    Tpointer newnode = (Tpointer) malloc(sizeof(Tnode));
    newnode->item = data;
    newnode->next = NULL;
    newnode->previous = list->last;

    if (list->first == NULL)
        list->first = newnode;
    else
        list->last->next = newnode;

    list->last = newnode;
}

void print_dbl (Tdbl const list) 
{
    Tpointer what;

    printf("\nList forward: ");
    what = list.first;
    while (what != NULL) {
        printf("%d ", what->item);
        what = what->next;
    }
}

void print_dbl_reverse (Tdbl const list)
{
    Tpointer last = list.last;
    Tpointer temp = last;

    printf("\nList reverse: ");
    while (last != NULL) 
    {
            last = last->previous;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T15:56:12.863

以下是调试此问题的一些建议。

1) 修改您的源代码以打印调试语句。您甚至可以根据#ifdef DEBUG_STATEMENTS 标志编译出调试信息。

2）您可以使用调试器并在程序崩溃之前单步执行和/或设置断点。如果程序不是守护程序/系统服务或驱动程序，调试器将很容易工作。

其他建议我真的围绕实现而不是调试，并且与预分配内存和在预分配内存中操作您的链表有关。但是，因为这比前两个建议更复杂，所以我将停止对该想法的概述。

祝你好运。

# python - 尝试使用python中的绝对值按最接近零的值对列表进行排序

> ID：10300245
> 
> 赞同：2
> 
> 时间：2012-04-24T14:40:55.487
> 
> 标签：python

我花了很长时间寻找是否有类似的问题。不幸的是，我不能只对之前提出的问题发表评论，看看为什么我的尝试没有奏效。在这个网站上存在一个问题，一个人想要根据最接近特定值的数字对列表进行排序。他的例子：*不是逐字复制他的例子，而是提出一个可行的解决方案*

```
list_x = [1,2,5,11]
list_x.sort(key = lambda x: abs(x-4)) 
```

这将返回按最接近 4 的值排序的列表`(5,2,1,11)` 但是，当尝试按最接近零的值对更大的列表进行排序时，这发生在我身上：

```
listA.sort(key = lambda x: abs(x))

Traceback (most recent call last):
  File "<pyshell#382>", line 1, in <module>
    listA.sort(key = lambda x: abs(x))
  File "<pyshell#382>", line 1, in <lambda>
    listA.sort(key = lambda x: abs(x))
TypeError: bad operand type for abs(): 'str' 
```

我到底做错了什么，这会阻止列表按绝对值排序？

这是组成 listA 的输入数据

```
for i in decrange(0, 13, i):
   code = (func(seq, float(i)))
   codes = '%.3f' % code
   listA.append(float(codes))
   listB.append(str(codes))
listA.sort(key = lambda k: abs(k))
x = listA[0]
answer = listB.index(x) * float(.01) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T14:44:02.957

您得到的错误似乎不言自明：

```
TypeError: bad operand type for abs(): 'str' 
```

看起来您列表中的某个地方有一个字符串值而不是数值。这将起作用（假设整数值）：

```
listA.sort(key = lambda x: abs(int(x))) 
```

...但最好弄清楚为什么您的列表中有字符串并修复*它*。

# jquery - 在 Jquery Mobile/Jquery 中离开页面时，我应该取消绑定事件/插件吗？

> ID：10300248
> 
> 赞同：0
> 
> 时间：2012-04-24T14:41:01.633
> 
> 标签：jquery, jquery-plugins, jquery-mobile, event-handling

我在 Jquery Mobile 网站中使用了一堆插件，并且正在寻找在离开页面后“清理”的最佳方法，该页面保留在 DOM 中。

问题是，我应该尝试取消绑定/关闭/取消委托插件绑定并在页面被拉回视图时重新初始化，还是应该在用户在另一个页面上时让所有内容“在后台”运行？

无论哪种方式，如果我要设置这样的插件，最好的方法是什么：

```
 // example using flexslider plugin
 $('div:jqmData(role="page").basePage').on('pagecreate.flexslider', function() {    

      // make sure this fires only once when pagecreates fires more often
      if ( $('.flexslider').length > 0 && $('.flexslider').jqmData('bound') != true ) {
          // lock           
          $('.flexslider').jqmData('bound',true);
          $('.flexslider').flexslider({ 
                    animation: "slide", 
                    controlsContainer: $(".flex-container")
                    }); 
          } 
      }); 
```

**问题：**
假设这是我的 Jquery Mobile 锚页面（始终停留在 DOM 中），我应该在用户离开页面并在重新加载时重新初始化时关闭，还是让滑块在后台运行*？*

这里最好的做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T16:22:54.950

当您离开通过 AJAX 引入 DOM 的页面时，jQuery Mobile 会自动从 DOM 中删除该页面，包括它的后代及其所有事件处理程序/数据。

> 要使动画页面过渡正常工作，您要从中过渡的页面和向两者过渡的页面都需要位于 DOM 中。但是，将旧页面保留在 DOM 中会很快填满浏览器的内存，并可能导致某些移动浏览器变慢甚至崩溃。
> 
> 因此，jQuery Mobile 有一个简单的机制来保持 DOM 整洁。每当它通过 Ajax 加载页面时，jQuery Mobile 会在您稍后离开它时（技术上，在 pagehide 事件上）标记要从 DOM 中删除的页面。如果您重新访问已删除的页面，浏览器可能能够从其缓存中检索该页面的 HTML 文件。如果没有，它会从服务器重新获取文件。（在嵌套列表视图的情况下，一旦您导航到不属于列表的页面，jQuery Mobile 就会删除构成嵌套列表的所有页面。）
> 
> 多页面模板中的页面完全不受此功能的影响 - jQuery Mobile 仅删除通过 Ajax 加载的页面。

*来源：http: [//jquerymobile.com/demos/1.1.0/docs/pages/page-cache.html](http://jquerymobile.com/demos/1.1.0/docs/pages/page-cache.html)*

.

jQuery Mobile 内部使用`.remove()`：

> 与**.empty()**类似，**.remove()**方法从 DOM 中取出元素。当您想要删除元素本身以及其中的所有内容时，请使用**.remove() 。**除了元素本身，所有与元素关联的绑定事件和 jQuery 数据都将被删除。

*来源：[http ://api.jquery.com/remove/](http://api.jquery.com/remove/)*

# javascript - AJAX 和 onbeforeunload 事件

> ID：10300250
> 
> 赞同：1
> 
> 时间：2012-04-24T14:41:09.337
> 
> 标签：javascript, asp.net, ajax, updatepanel

我有一个 aspx 页面。在页面上我有一个 javascript 函数

```
window.onbeforeunload = confirmExit;
function confirmExit()
{
return "You have attempted to leave this page.  If you have made any changes to the fields      without clicking the Submit button, your changes will be lost.  Are you sure you want to exit   this page?";

} 
```

这在用户离开页面时执行。然而，它也在部分页面回发上执行。如何检查这是否是部分页面回发并忽略它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T15:11:11.037

[我可以防止在进行 AJAX 调用时调用 window.onbeforeunload](https://stackoverflow.com/questions/537702/can-i-prevent-window-onbeforeunload-from-being-called-when-doing-an-ajax-call)

查看您正在执行的操作是否执行以下任何操作：

[onbeforeunload 事件](http://msdn.microsoft.com/en-us/library/ms536907%28VS.85%29.aspx)

要调用此事件，请执行以下操作之一：

*   关闭当前窗口。
*   通过输入新地址或选择收藏夹导航到另一个位置。
*   单击引用另一个文档的锚点。
*   调用 anchor.click 方法。
*   调用 document.write 方法。
*   调用 document.close 方法。
*   调用 window.close 方法。
*   调用 window.navigate 或 NavigateAndFind 方法。
*   调用 location.replace 方法。
*   调用 location.reload 方法。
*   为 location.href 属性指定一个新值。
*   通过 INPUT type=submit 控件将表单提交到 ACTION 属性中指定的地址，或调用 form.submit 方法。
*   调用 window.open 方法，为窗口名称提供可能的值 _self。
*   调用 document.open 方法。
*   单击“后退”、“前进”、“刷新”或“主页”按钮。

# java - 编程中“工人”的概念是什么意思？

> ID：10300251
> 
> 赞同：26
> 
> 时间：2012-04-24T14:41:10.963
> 
> 标签：java, operating-system

我想知道编程中“工人”的概念是什么意思？我最近开始使用 Java，并且在很多地方都看到了它们，但不明白。

例子会很棒。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-24T14:46:04.147

工作人员是您赋予任务并在您的流程中继续的东西，而工作人员（或多个工作人员）在不同的线程上处理任务。当他们完成后，他们会通过回调方法让您知道。即调用初始调用时提供的特殊方法。

# java - 将字符串日期转换为日期

> ID：10300252
> 
> 赞同：1
> 
> 时间：2012-04-24T14:41:13.850
> 
> 标签：java, date, datetime

如何将 24/04/2012 形式的字符串日期转换为 24-Apr-12 格式的日期变量，以后可以将其传递到我的 Oracle 数据库中。

我试过这个，但它说字符串日期是不可解析的：

```
DateFormat format = new SimpleDateFormat("dd-MMM-yy");
Date newDate = (Date) format.parse(date); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T14:45:49.270

我认为您对解析和格式化感到困惑，请尝试以下操作：

```
String old_date = "24/04/2012";

DateFormat old_format = new SimpleDateFormat("dd/MM/yyyy");
Date newDate = (Date) old_format.parse(old_date);

DateFormat new_format = new SimpleDateFormat("dd-MMM-yy");
String date = new_format.format(newDate);

System.out.println(date); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:44:04.190

您的日期格式应为“dd/MM/yyyy”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T14:46:33.447

您正在向后执行此操作：

```
DateFormat format = new SimpleDateFormat("dd/MM/yyyy");
Date newDate = format.parse(date);

DateFormat formatOutput = new SimpleDateFormat("dd-MMM-yyyy");
String output = formatOutput.format(newDate); 
```

但是，如果您正在做的是将日期传递给 Oracle，那么您真的应该使用`PreparedStatement`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T14:46:01.653

```
SimpleDateFormat sdf= new SimpleDateFormat("dd-MM-yy");
DateTime  newDate = sdf.format(date); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T14:46:34.683

尝试`DateFormat format = new SimpleDateFormat("dd/MM/yyyy")`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-24T14:50:33.487

为什么不尝试使用 java.sql.Date。

例如：

```
Date newDate = new java.sql.Date(date.getTime()); 
```

所以你可以只为日期提供一个通用的 sql 对象。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-24T14:51:03.027

Java 的 Date 类在很多情况下都很难使用。我建议使用更好的[Joda Time](http://joda-time.sourceforge.net/)课程：

```
DateTimeFormatter oldFormat = DateTimeFormat.forPattern("dd/mm/yyyy");
DateTimeFormatter newFormat = DateTimeFormat.forPattern("dd-MMM-yy");
DateTime dateTime = oldFormat.parseDateTime("24/04/2012");
String newDate = newFormat.print(dateTime); 
```

# c - 用作睡眠的空 for 循环会被优化掉吗？

> ID：10300253
> 
> 赞同：8
> 
> 时间：2012-04-24T14:41:14.657
> 
> 标签：c

我正在查看一些要查看的代码，并且遇到了这样的忙碌等待：

```
int loop = us*32;
int x;
for(x = 0;x<loop;x++)
{
    /*do nothing*/      
} 
```

我似乎记得读过这些空循环可以优化掉。这是这里会发生的事情还是可以工作？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-24T15:08:58.077

答案是肯定的，编译器可以优化出循环。

使用`volatile`限定符避免优化：

```
int loop = us * 32;
volatile int x;
for (x = 0; x < loop; x++)
{
    /*do nothing*/      
} 
```

如果您在嵌入式世界中进行编程，请阅读编译器的文档，因为它们通常提供延迟函数，等待一定数量的周期或微秒传入参数。

例如，`avr-gcc`在 中具有以下功能`util/delay.h`：

```
void _delay_us(double __us); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-24T14:42:09.780

你受编译器的摆布。事实上，如果它很聪明，它会检测到它是一个 noop。顺便说一句，Neil Butterworth 有一篇[不错的帖子](http://punchlet.wordpress.com/2011/07/01/letter-the-eighth-bedevilling-benchmarks/)，他也谈到了这个主题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-24T14:59:10.970

这是非常不便携的东西。

在某些编译器中，其中一种可能有效（但您必须检查是否启用了完全优化，空指令可能会被丢弃）：

```
for (i = 0; i < spinCount; )
   ++i; // yes, HERE 
```

或者：

```
for (i = 0; i < spinCount; ++i)
   ((void)0); 
```

如果你足够幸运，那么你的编译器可能会提供一个宏或一个内部函数，它们将编译为`nop`汇编指令，就像`__noop`在 MSVC 中一样。

作为最后一个资源，您可以简单地添加一条汇编指令（它取决于编译器，可能是 __asm 或类似的东西）来执行......什么都没有，像这样：

```
for (i = 0; i < spinCount; ++i)
   __asm nop 
```

或（检查您的编译器文档）：

```
for (i = 0; i < spinCount; ++i)
   asm("nop"); 
```

**编辑**
如果您没有`noop`指令并且无法添加汇编代码（对不起，您使用的是哪种编译器？）您可以依赖这样的假设，即不会优化具有副作用的指令离开（或者，正如@ouah 所发布的，访问声明的变量`volatile`）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-06-26T11:39:37.997

语言标准中没有任何内容禁止它，因此编译器可以做到这一点。

**让我们反编译 GCC 4.8 看看它做了什么**

输入代码：

```
int main() {
    int i;
    for(i = 0; i < 16; i++)
        ;
} 
```

编译和反编译：

```
gcc -c -g -std=c99 -O0 a.c
objudmp -S a.o 
```

输出：

```
a.o:     file format elf64-x86-64

Disassembly of section .text:

0000000000000000 <main>:
int main() {
   0:   55                      push   %rbp
   1:   48 89 e5                mov    %rsp,%rbp
    int i;
    for(i = 0; i < 16; i++)
   4:   c7 45 fc 00 00 00 00    movl   $0x0,-0x4(%rbp)
   b:   eb 04                   jmp    11 <main+0x11>
   d:   83 45 fc 01             addl   $0x1,-0x4(%rbp)
  11:   83 7d fc 0f             cmpl   $0xf,-0x4(%rbp)
  15:   7e f6                   jle    d <main+0xd>
  17:   b8 00 00 00 00          mov    $0x0,%eax
        ;
}
  1c:   5d                      pop    %rbp
  1d:   c3                      retq 
```

循环就在那里：`jle`跳回来。

与`-O3`：

```
0000000000000000 <main>:
   0:   31 c0                   xor    %eax,%eax
   2:   c3                      retq 
```

它只返回 0。所以它被完全优化掉了。

可以对任何编译器进行相同的分析。

**也可以看看**

*   如何防止它：[如何防止 GCC 优化一个繁忙的等待循环？](https://stackoverflow.com/questions/7083482/how-to-prevent-gcc-from-optimizing-out-a-busy-wait-loop)
*   无限循环的相同问题：[是否允许编译器消除无限循环？](https://stackoverflow.com/questions/2178115/are-compilers-allowed-to-eliminate-infinite-loops)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-24T14:47:44.217

一些编译器，比如 gcc，会检测到它是一个空的 for 循环，并为此特别悲观，期望你把它作为延迟循环放在那里。您可以在[http://gcc.gnu.org/onlinedocs/gcc-4.7.0/gcc/Non_002dbugs.html阅读更多相关信息](http://gcc.gnu.org/onlinedocs/gcc-4.7.0/gcc/Non_002dbugs.html)

请注意，这是特定于编译器的，因此不要指望所有编译器都使用它。

# android - WebApp ajax 未使用 jQueryMobile 加载

> ID：10300256
> 
> 赞同：2
> 
> 时间：2012-04-24T14:41:27.230
> 
> 标签：android, iphone, cordova

我试图了解 jquerymobile，我想做的是在我从另一个链接加载另一个页面时运行 javascript 的东西，从菜单到子菜单 1 工作得很好，但从子菜单 1 到 1-1 不起作用.. .

主站点菜单 (index.php) -> 子菜单 1 (menu1.php) -> 子菜单 1-1 (menu11.php)

这是我的代码：

索引.php

```
<div data-role="page" id="main">
    <div data-role="header" id="cosito" align="center" style="font-size:36px; font-family:'Naturelle'">avant</div>
    <div class="titulo" align="center">Menu</div>
    <div id="menu_">
        <a href="cartelera.php" data-rel="page" data-transition="slide" class="btnChiqui">
            <img src="img/rollo.png">
            <span>Cartelera</span>
        </a>
     </div>
</div> 
```

Menu1.php（index.php 的子菜单）

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/slider.js"></script>
<script type="text/javascript" src="js/jquery.mobile-1.1.0.min.js"></script>
<script type="text/javascript" src="js/allscripts.js"></script>
<div data-role="page" id="sala_cines" data-add-back-btn="true" data-back-btn-text="Atras">
    <div data-role="header" id="cosito" align="center" style="font-size:36px; font-family:'Naturelle'">Sala de Cines</div>
    <div id="menu_">
        <a href="cine.php" data-rel="page" data-transition="slide" class="btnChiqui">
            <img src="img/rollo.png">
            <span>Shopping del Sol</span>
        </a>
     </div>
</div> 
```

Menu11.php（这里的 menu1.php 的子菜单是我的触摸滑块不起作用的地方）

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/slider.js"></script>
<script type="text/javascript" src="js/jquery.mobile-1.1.0.min.js"></script>
<script type="text/javascript" src="js/allscripts.js"></script>
<div data-role="page" id="cine_detalle" data-add-back-btn="true" data-back-btn-text="Atras">
    <div data-role="header" align="center" style="font-size:36px; font-family:'Naturelle'">Cine 1</div>
      //Stuff here
</div> 
```

我的 allscripts.js

```
$('#cine_detalle').live("pagecreate", pageInitializationHandler);   
    $('#estrenos').live("pagecreate", pageInitializationHandler);   
    $('#sala_cines').live("pagecreate", pageInitializationHandler);

    function pageInitializationHandler(event) {
        alert("Ok");
         touchslider.createSlidePanel('#slidebar', 190, 5);
      } 
```

我做错了什么？任何帮助表示赞赏，谢谢，祝您有美好的一天！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:25:45.973

尝试添加`rel="external"`指向其他页面的链接

您可以在[jQuery Mobile 网站上找到更多信息](http://jquerymobile.com/demos/1.0a4.1/docs/pages/#link-formats.html)

# javascript - 在 JavaScript 中替换字符串的一部分

> ID：10300257
> 
> 赞同：-1
> 
> 时间：2012-04-24T14:41:27.807
> 
> 标签：javascript, regex, replace

我该如何更换：

```
var url = "http://localhost:2879/ServiceDonneesArchive.svc/Installations(1002)?$expand=Stations"; 
```

经过：

```
var nameInstallation = 1002;
    var url = "http://localhost:2879/ServiceDonneesArchive.svc/Installations(nameInstallation)?$expand=Stations"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T21:34:51.843

使用[`.replace()`方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)。要将变量`"nameInstallation"`中的任何实例替换为：`url``"1002"`

```
url = url.replace(/nameInstallation/g, "1002"); 
```

或者，如果您在变量中有替换值`nameInstallation = 1002`：

```
url = url.replace(/nameInstallation/g, nameInstallation); 
```

编辑：正如大卫托马斯所指出的，您可能不需要`g`正则表达式上的标志，即`.replace()`. 使用这个“全局”标志，它将替换文本“nameInstallation”的所有实例。如果没有标志，它将仅替换第一个实例。因此，要么包括它，要么根据您的需要将其关闭。（如果您只需要替换第一个匹配项，您还可以选择将字符串作为第一个参数而不是正则表达式传递。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T21:17:03.347

为什么要这样做？对于这个用例，简单的连接将非常易读：

```
var nameInstallation = 1002;
var url = 'http://localhost:2879/ServiceDonneesArchive.svc/Installations(' + nameInstallation + ')?$expand=Stations'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T15:11:05.780

试试这个javascript函数

```
// from http://www.codeproject.com/Tips/201899/String-Format-in-JavaScript
        String.prototype.format = function (args) {
            var str = this;
            return str.replace(String.prototype.format.regex, function(item) {
                var intVal = parseInt(item.substring(1, item.length - 1));
                var replace;
                if (intVal >= 0) {
                    replace = args[intVal];
                } else if (intVal === -1) {
                    replace = "{";
                } else if (intVal === -2) {
                    replace = "}";
                } else {
                    replace = "";
                }
                return replace;
            });
        };
        String.prototype.format.regex = new RegExp("{-?[0-9]+}", "g"); 
```

并使用：

```
var url = "http://localhost:2879/ServiceDonneesArchive.svc/Installations{0}?$expand=Stations";
var nameInstallation = 1002;
var result = url.format(nameInstallation ); 
```

# forms - FuelPHP 表单字段值将某些字符转换为 HTML 实体

> ID：10300258
> 
> 赞同：0
> 
> 时间：2012-04-24T14:41:29.933
> 
> 标签：forms, encoding, html-entities, fuelphp

我在 FuelPHP 中有奇怪的行为。我使用 FuelPHP Form::input() 方法生成表单字段。问题是某些字符被转换为 HTML 实体。例如字符`š`被转换为`&scaron;`. 下面可以看到表单域生成代码，图片上可以看到输出（第一个输出就是纯html文本）。

```
<?php echo $user->profile_fields['firstname']; ?> 
<?php echo Form::input('firstname', Input::post('firstname', isset($user->profile_fields['firstname']) ? $user->profile_fields['firstname'] : '')); ?> 
```

![在此处输入图像描述](../Images/2c1c7d0f964ef6fe851f55ee4ea94aa2.png)

最奇怪的是，这只发生在从用户表 ( )中的`profile_fields`DB 字段读取值的表单字段中。是 SimpleAuth 驱动程序使用的用户表中的标准 MySQL 文本字段。该字段包含用户信息的序列化键=>值对，例如名字，姓氏，地址等...如果我从数据库中的非序列化字段中读取相同的值并使用该值创建表单字段，那么它将正确显示.`$user->profile_fields['firstname']``Profile_fields`

我在我的数据库设置中使用`utf8_unicode_ci`排序规则和编码，并且 FuelPHP 语言环境和编码也正确设置为`UTF-8`.

UPDATE1：看看这个：

```
//values read from MySQL DB, via FuelPHP orm, unserialized
echo $user->profile_fields['firstname'] . ' ' . $user->profile_fields['lastname'];
echo '<br>';

//same values serialized and assigned to PHP array var
$test = serialize(array('firstname'=>'Urška', 'lastname'=>'Neumüller'));
var_dump($test);

echo '<br>';
$test2 = unserialize($test);
var_dump($test2);

echo '<br>';
echo '<input type="text" value="'.$test2['firstname'].'">';
echo '<input type="text" value="'.$test2['lastname'].'">';

echo '<br>';
echo '<input type="text" value="'.htmlspecialchars($test2['firstname']).'">';
echo '<input type="text" value="'.htmlspecialchars($test2['lastname']).'">';

echo '<br>';
echo '<input type="text" value="'.$user->profile_fields['firstname'].'">';
echo '<input type="text" value="'.$user->profile_fields['lastname'].'">';

echo '<br>';
echo '<input type="text" value="'.htmlspecialchars($user->profile_fields['firstname']).'">';
echo '<input type="text" value="'.htmlspecialchars($user->profile_fields['lastname']).'">'; 
```

`htmlspecialchars`在这里使用是因为 FuelPHP Form 类在生成表单字段时使用它，并且是某些字符被转换为 HTML 实体的原因。

输出：

![在此处输入图像描述](../Images/3961134703bf1133b38bcbfc5c48b642.png)

DB、PHP、FuelPHP 中是否存在这个问题……我完全迷失了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T20:24:42.450

你必须非常清楚地看到你在做什么。

FuelPHP 默认对输出进行编码，这意味着您发送到视图的所有数据都将被 html 编码。在这种情况下，从控制器发送到视图的 $user 将被编码。

您的 $test2 数组是在视图内部创建的，因此不会被编码。

现在，当您在 Form::input() 中使用 $user 的值时，该值将被准备好（正如 Frank 正确提到的那样），它将再次编码。例如，“&” 将转换为“&amp;”，并会导致您描述的行为。如您的示例所示，如果您手动编码来自 $user 的值，则相同。

所以：

*   将变量传递给视图而不进行编码（可能很危险！）
*   按照弗兰克的描述禁用准备
*   升级到最新的 1.1/develop 分支，默认禁用双重编码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T21:38:12.373

出于安全原因，通常在输出时对特殊字符进行编码。如果您将表单 condig 参数设置`prep_value`为`false`或为输入字段提供 attr ，则可以将其关闭`"dont_prep" => true`。

# visual-c++ - 目标计算机上的文件输出

> ID：10300266
> 
> 赞同：0
> 
> 时间：2012-04-24T14:42:00.170
> 
> 标签：visual-c++, file-io

我有一个使用以下内容的 Windows 窗体应用程序

```
ofstream myfile;
myfile.open("foo.csv");
myfile << "whatever";
myfile.close() 
```

该文件很好地输出到我的计算机上，进入应用程序所在的同一目录（编译后自动释放文件夹）。但是，如果我将应用程序移动到计算机上的另一个位置，或者在使用 Windows 设置文件分发它时移动到目标计算机上，则无法输出文件。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:49:17.757

它应该在任何计算机上都可以正常工作。

两个可能的原因：

1) 发生错误，导致无法写入文件，或

2) 文件未写入您期望的位置

绝对检查错误。例如：

```
std::ofstream outFile("foo.csv");
if (!outFile)
{
   // Open failed - take error handling action.
} 
```

附录：这将打印错误消息：

```
std::ofstream outFile("foo.csv");
if (!outFile)
{
   // Open failed - take error handling action.
   cout << "error reading file foo.csv" << " error: " << strerror(errno) << endl;
} 
```

# c# - 贝塞尔曲线、Loop 和 Blinn 风格

> ID：10300271
> 
> 赞同：9
> 
> 时间：2012-04-24T14:42:13.657
> 
> 标签：c#, graphics, xna, hlsl, bezier

几天前，我开始研究如何有效地绘制贝塞尔曲线，我遇到了由 Charles Loop 和 Jim Blinn 开发的这种方法，看起来非常有趣。然而，在对他们的算法进行了大量试验之后，我似乎无法让它能够渲染三次曲线。二次元很好，没有问题。

到目前为止，我发现的唯一资源如下：

[GPU 宝石 3 第 25 章](http://http.developer.nvidia.com/GPUGems3/gpugems3_ch25.html)

[曲线蓝调](http://www.mdk.org.pl/2007/10/27/curvy-blues)

[使用可编程图形硬件的分辨率无关曲线渲染](http://research.microsoft.com/en-us/um/people/cloop/LoopBlinn05.pdf)

为了让测试快速启动并运行，我在 XNA 中执行此操作。基本上，我将带有顶点的纹理坐标传递给 GPU，应用透视变换并使用像素着色器中所有文章中提到的公式来渲染最终结果。然而，问题（我认为）在于我如何计算纹理坐标。检查此代码：

```
public void Update()
{
    float a1 = Vector3.Dot(p1, Vector3.Cross(p4, p3));
    float a2 = Vector3.Dot(p2, Vector3.Cross(p1, p4));
    float a3 = Vector3.Dot(p3, Vector3.Cross(p2, p2));

    float d1 = a1 - 2 * a2 + 3 * a3;
    float d2 = -a2 + 3 * a3;
    float d3 = 3 * a3;

    float discr = d1 * d1 * (3 * d2 * d2 - 4 * d1 * d3);

    if (discr > 0)
    {
        Type = CurveTypes.Serpentine;

        float ls = 3 * d2 - (float)Math.Sqrt(9 * d2 * d2 - 12 * d1 * d3);
        float lt = 6 * d1;
        float ms = 3 * d2 + (float)Math.Sqrt(9 * d2 * d2 - 12 * d1 * d3);
        float mt = 6 * d1;

        TexCoord1 = new Vector3(ls * ms, (float)Math.Pow(ls, 3), (float)Math.Pow(ms, 3));
        TexCoord2 = new Vector3((3 * ls * ms - ls * mt - lt * ms) / 3, ls * ls * (ls - lt), ms * ms * (ms - mt));
        TexCoord3 = new Vector3((lt * (mt - 2 * ms) + ls * (3 * ms - 2 * mt)) / 3, (float)Math.Pow(lt - ls, 2) * ls, (float)Math.Pow(mt - ms, 2) * ms);
        TexCoord4 = new Vector3((lt - ls) * (mt - ms), -(float)Math.Pow(lt - ls, 3), -(float)Math.Pow(mt - ms, 3));
    }
    else if (discr == 0)
    {
        Type = CurveTypes.Cusp;
    }
    else if (discr < 0)
    {
        Type = CurveTypes.Loop;
    }
} 
```

对不起，这只是一些测试代码。p1...p4 是世界空间中的控制点，TexCoord1...TexCoord4 是对应的纹理坐标。这是对 GPU Gems 文章中所说内容的复制。

这里有几个问题，首先在计算 a3 时，我们对两个参数都使用了 p2，这当然总是会产生一个 (0,0,0) 向量，并且取它和 p3 的点积总是会给我们 0。那不是很没用，那他们为什么要在文章中提到呢？

这当然会使 discr 不正确，我们甚至无法确定它是什么类型的曲线。

在摆弄了该代码一段时间后，我决定尝试完全按照他们在 Loop 和 Blinn 论文中所做的那样去做。从那我得到这样的东西：

```
public void Update()
{
    Matrix m1 = new Matrix(
        p4.X, p4.Y, 1, 0,
        p3.X, p3.Y, 1, 0,
        p2.X, p2.Y, 1, 0,
        0, 0, 0, 1);
    Matrix m2 = new Matrix(
        p4.X, p4.Y, 1, 0,
        p3.X, p3.Y, 1, 0,
        p1.X, p1.Y, 1, 0,
        0, 0, 0, 1);
    Matrix m3 = new Matrix(
        p4.X, p4.Y, 1, 0,
        p2.X, p2.Y, 1, 0,
        p1.X, p1.Y, 1, 0,
        0, 0, 0, 1);
    Matrix m4 = new Matrix(
        p3.X, p3.Y, 1, 0,
        p2.X, p2.Y, 1, 0,
        p1.X, p1.Y, 1, 0,
        0, 0, 0, 1);

    float det1 = m1.Determinant();
    float det2 = -m2.Determinant();
    float det3 = m3.Determinant();
    float det4 = -m4.Determinant();

    float tet1 = det1 * det3 - det2 * det2;
    float tet2 = det2 * det3 - det1 * det4;
    float tet3 = det2 * det4 - det3 * det3;

    float discr = 4 * tet1 * tet3 - tet2 * tet2;

    if (discr > 0)
    {
        Type = CurveTypes.Serpentine;

        float ls = 2 * det2;
        float lt = det3 + (float)((1 / Math.Sqrt(3)) * Math.Sqrt(3 * det3 * det3 - 4 * det2 * det4));
        float ms = 2 * det2;
        float mt = det3 - (float)((1 / Math.Sqrt(3)) * Math.Sqrt(3 * det3 * det3 - 4 * det2 * det4));

        TexCoord1 = new Vector3(lt * mt, (float)Math.Pow(lt, 3), (float)Math.Pow(mt, 3));
        TexCoord2 = new Vector3(-ms * lt - ls * mt, -3 * ls * lt * lt, -3 * ms * mt * mt);
        TexCoord3 = new Vector3(ls * ms, 3 * ls * ls * lt, 3 * ms * ms * mt);
        TexCoord4 = new Vector3(0, -ls * ls * ls, -ms * ms * ms);
    }
    else if (discr == 0)
    {
        Type = CurveTypes.Cusp;
    }
    else if (discr < 0)
    {
        Type = CurveTypes.Loop;
    }
} 
```

你猜怎么着，那也没用。然而，现在 discr 似乎至少更正确了一点。至少它有正确的符号，当控制点排列形成一个尖点时它是零。我仍然得到相同的视觉结果，除了曲线随机消失一段时间（像素着色器公式总是大于零）并在我将控制点移回更多方形后返回。顺便说一下，这是像素着色器代码：

```
 PixelToFrame PixelShader(VertexToPixel PSIn)
 {
     PixelToFrame Output = (PixelToFrame)0;

     if(pow(PSIn.TexCoords.x, 3) - PSIn.TexCoords.y * PSIn.TexCoords.z > 0)
     {
     Output.Color = float4(0,0,0,0.1);
     }
     else
     {
     Output.Color = float4(0,1,0,1);
     }

    return Output;
} 
```

这就是我现在能想到的所有有用信息。有谁知道发生了什么？因为我用完了它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T15:43:29.583

我在看论文和你的代码，它接缝你错过了 M3 矩阵的乘法。

您的 p1、p2、p3 和 p4 坐标应放在一个矩阵中并乘以 M3 矩阵，然后再使用它来计算行列式。例如。

```
Matrix M3 = Matrix(
    1, 0, 0, 0,
    -3, 3, 0, 0,
    3, -6, 3, 0,
    -1, 3, -3, 1);
Matrix B = Matrix(
    p1.X, p1.Y, 0, 1,
    p2.X, p2.Y, 0, 1,
    p3.X, p3.Y, 0, 1,
    p4.X, p4.Y, 0, 1);
Matrix C = M3*B; 
```

然后使用 C 矩阵的每一行作为代码中 m1 到 m4 矩阵的坐标。其中行的第一个和第二个值是 x,y 坐标，最后一个是 w 坐标。

最后，纹理坐标矩阵需要乘以 M3 的逆矩阵，例如。

```
Matrix invM3 = Matrix(
    1, 0, 0, 0,
    1, 0.3333333, 0, 0,
    1, 0.6666667, 0.333333, 0,
    1, 1, 1, 1);
Matrix F = Matrix(
    TexCoord1,
    TexCoord2,
    TexCoord3,
    TexCoord4);
Matrix result = invM3*F; 
```

结果矩阵的每一行对应于着色器所需的纹理坐标。

我自己还没有实现它，所以不能保证它会解决你的问题。这只是我在阅读本文后注意到您的实施中缺少的内容。

我希望这会有所帮助，如果我错了，请告诉我，因为我很快就会尝试这个。

# sql - 如何从 SQL 查询构建对象层次结构？（对于 WPF 树视图）

> ID：10300273
> 
> 赞同：2
> 
> 时间：2012-04-24T14:42:15.200
> 
> 标签：sql, wpf, treeview, hierarchical-data, hierarchyid

感谢您抽出时间阅读这篇文章。

从我的 SQL 数据库获取数据时，我在尝试构建分层对象时遇到了麻烦。请注意，我是一个新手程序员。

如何构建具有未知级别的分层对象？当我说未知级别时，我的意思是每个节点可能有不同数量的子节点，而子节点又可能有不同数量的自己的子节点，依此类推。

这个想法是我需要使用我的 SQL 数据创建一个层次对象来绑定到 WPF TreeView 控件。

下面我已经包含了我到目前为止的代码。第一段代码是我的由属性组成的类。请注意，“Products”类有一个 ObservableCollection 引用自身。我认为这就是构建嵌套节点的方式。即列表中的列表。

第二段代码是我从 SQL 数据库下载数据的 Get 方法。这是我需要了解如何将下载的数据分类为层次结构的地方。

**产品类（属性）**

```
public class Products : INotifyPropertyChanged, IDataErrorInfo
{
    private Int64 m_ID;
    private SqlHierarchyId m_Hierarchy;
    private string m_Name;
    private ObservableCollection<Products> m_ChildProducts;

    // Default Constructor
    public Products()
    {
        ChildProducts = new ObservableCollection<Products>();
    }

    //Properties

    public Int64 ID
    {
        get
        {
            return m_ID;
        }
        set
        {
            m_ID = value;
            OnPropertyChanged(new PropertyChangedEventArgs("ID"));
        }
    }

    public SqlHierarchyId Hierarchy
    {
        get
        {
            return m_Hierarchy;
        }
        set
        {
            m_Hierarchy = value;
            OnPropertyChanged(new PropertyChangedEventArgs("Hierarchy"));
        }
    }

    public String Name
    {
        get
        {
            return m_Name;
        }
        set
        {
            m_Name = value;
            OnPropertyChanged(new PropertyChangedEventArgs("Name"));
        }
    }

    public Int16 Level
    {
        get
        {
            return m_Level;
        }
        set
        {
            m_Level = value;
            OnPropertyChanged(new PropertyChangedEventArgs("Level"));
        }
    }

    public Int64 ParentID
    {
        get
        {
            return m_ParentID;
        }
        set
        {
            m_ParentID = value;
            OnPropertyChanged(new PropertyChangedEventArgs("ParentID"));
        }
    }

    public ObservableCollection<Products> ChildProducts
    {
        get
        {
            return m_ChildProducts;
        }
        set
        {
            m_ChildProducts = value;
            OnPropertyChanged(new PropertyChangedEventArgs("ChildProducts"));
        }
    }

    //INotifyPropertyChanged Event
    public event PropertyChangedEventHandler PropertyChanged;
    public void OnPropertyChanged(PropertyChangedEventArgs e)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, e);
    }
} 
```

**从 SQL DB 获取数据的方法：**

```
public static ObservableCollection<Products> GetProductsHierarchy()
    {

        ObservableCollection<Products> productsHierarchy = new ObservableCollection<Products>();

        SqlConnection connection = new SqlConnection(DBConnection.GetConnection().ConnectionString);

        string selectStatement = "SELECT ID, Hierarchy, Name, Hierarchy.GetLevel() AS Level, Hierarchy.GetAncestor(1) AS ParentHierarchy, " +
                                                 "(SELECT ID " +
                                                 "FROM SpecProducts " +
                                                 "WHERE (Hierarchy = SpecProducts_1.Hierarchy.GetAncestor(1))) AS ParentID " +
                                 "FROM  SpecProducts AS SpecProducts_1 " +
                                 "WHERE (EnableDisable IS NULL) " +
                                 "ORDER BY Hierarchy";

        SqlCommand selectCommand = new SqlCommand(selectStatement, connection);

        try
        {
            connection.Open();
            SqlDataReader reader = selectCommand.ExecuteReader();

            while (reader.Read())
            {

                Products product = new Products();
                product.ID = (Int64)reader["ID"];
                product.Name = reader["Name"].ToString();
                product.Hierarchy = (SqlHierarchyId)reader["Hierarchy"];
                product.Level = (Int16)reader["Level"];
                if (reader["ParentID"] != DBNull.Value)
                {
                    product.ParentID = (Int64)reader["ParentID"];
                }
                else
                {
                    product.ParentID = 0;
                }

                productsHierarchy.Add(product);

                // *** HOW TO BUILD HIERARCHY OBJECT WITH UNKNOWN & VARYING LEVELS?
                // *** ADD PRODUCT TO CHILDPRODUCT
            }

            return productsHierarchy;
        }
        catch (SqlException ex)
        {
            throw ex;
        }
        finally
        {
            connection.Close();
        }
    } 
```

下面我附上了一张图片，显示了我的 SQL 查询数据的结构。请注意，将来添加更多产品时，层次结构级别可能会更深。无论节点级别的数量是多少，我需要创建的 Hierarchy 对象都应该足够灵活以进行扩展。

非常感谢您的宝贵时间，非常感谢您提供的所有帮助。

![SQL 查询数据](../Images/86a97e6cf5963528c6b009e99527af1e.png)

********* 编辑 26/04/2012 14:37 *******************

请在下面找到下载我的项目代码的链接（这仅包含树视图代码）。有人可以看看它，看看为什么我不能创建超过 2 个级别的节点吗？

该代码是由用户 HB MAAM 提供给我的。感谢“HB MAAM”到目前为止的帮助！

[点击此链接下载代码](http://www.stately-albion.co.uk/docs/robs-junk/wpfapplication1-%282%29.zip)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T17:08:28.470

我将为您创建一个示例，
1-首先我将创建一个包含来自数据库的数据的类

```
public class SqlDataDto
{
    public int? Id { get; set; }
    public int? ParentId { get; set; }

    public String Name { get; set; }
    public String OtherDataRelatedToTheNode { get; set; }
} 
```

2-该数据将被转换为分层数据，我们将使用这个类来保存它：

```
public class LocalData : INotifyPropertyChanged
{
    private int? _id;
    public int? Id
    {
        get { return _id; }
        set { _id = value; OnPropertyChanged("Id"); }
    }

    private int? _parentId;
    public int? ParentId
    {
        get { return _parentId; }
        set { _parentId = value; OnPropertyChanged("ParentId"); }
    }

    private string _name;
    public String Name
    {
        get { return _name; }
        set { _name = value; OnPropertyChanged("Name"); }
    }

    private string _otherDataRelatedToTheNode;
    public String OtherDataRelatedToTheNode
    {
        get { return _otherDataRelatedToTheNode; }
        set { _otherDataRelatedToTheNode = value; OnPropertyChanged("OtherDataRelatedToTheNode"); }
    }

    private LocalData _parent;
    public LocalData Parent
    {
        get { return _parent; }
        set { _parent = value; OnPropertyChanged("Parent"); }
    }

    private ObservableCollection<LocalData> _children;
    public ObservableCollection<LocalData> Children
    {
        get { return _children; }
        set { _children = value; OnPropertyChanged("Children"); }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    public void OnPropertyChanged(String propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this,new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

3-最后我们需要将sql数据更改为分层数据：

```
public List<LocalData> GetHerachy(List<SqlDataDto> sqlData)
{
    var sqlParents = sqlData.Where(q => q.ParentId == null).ToList();
    var parents = sqlParents.Select(q => new LocalData {Id = q.Id, Name = q.Name}).ToList();
    foreach (var parent in parents)
    {
        var childs = sqlData.Where(q => q.ParentId == parent.Id).Select(q => new LocalData { Id = q.Id, Name = q.Name , Parent = parent});
        parent.Children = new ObservableCollection<LocalData>(childs);
    }
    return parents;
} 
```

4-然后您可以创建一个虚拟数据并将其转换并在树中显示：

```
var sqlData = new List<SqlDataDto>
                  {
                      new SqlDataDto {Id = 1, ParentId = null, Name = "F1"}
                      , new SqlDataDto {Id = 2, ParentId = null, Name = "F2"}
                      , new SqlDataDto {Id = 3, ParentId = 1, Name = "S1"}
                      , new SqlDataDto {Id = 4, ParentId = 2, Name = "S21"}
                      , new SqlDataDto {Id = 5, ParentId = 2, Name = "S22"}
                  };
treeView.ItemsSource = GetHerachy(sqlData); 
```

5-树应该是这样的：

```
<TreeView Name="treeView">
    <TreeView.ItemTemplate>
        <HierarchicalDataTemplate ItemsSource="{Binding Children}">
            <TextBlock Text="{Binding Name}" />
        </HierarchicalDataTemplate>
    </TreeView.ItemTemplate>
</TreeView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T19:32:53.493

您需要使用递归来填充每个对象的子列表。这是 WPF HierarchicalDataTemplate 工作所必需的。否则你只能得到第一级。 [还有](https://stackoverflow.com/questions/9409021/id-parentid-list-to-hierarchical-list)一种使用 Linq 方法 ForEach() 并传递 Action 参数的替代方法。以下解决方案非常简单易懂：

```
public List<Product> Products { get; set; }

public MainViewModel()
{
    Products = new List<Product>();

    Products.Add(new Product() { Id = 1, Name = "Main Product 1", ParentId = 0 });
    Products.Add(new Product() { Id = 3, Name = "Sub Product 1", ParentId = 1 });
    Products.Add(new Product() { Id = 4, Name = "Sub Product 2", ParentId = 1 });
    Products.Add(new Product() { Id = 5, Name = "Sub Product 3", ParentId = 1 });
    Products.Add(new Product() { Id = 6, Name = "Sub Product 3.1", ParentId = 5 });

    this.ProcessRootNodes();
}

private void ProcessRootNodes()
{
    var rootNodes = Products.Where(x => x.ParentId == 0).ToList();

    for (int i = 0; i < rootNodes.Count; i++)
    {
rootNodes[i].Children = this.AddChildren(rootNodes[i]);
    }
}

private List<Product> AddChildren(Product entry)
{
    var children = Products.Where(x => x.ParentId == entry.Id).ToList();

    for(int i=0;i<children.Count;i++)
    {
children[i].Children = this.AddChildren(children[i]);
    }

    return children;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T17:10:57.377

`// *** HOW TO BUILD HIERARCHY OBJECT WITH UNKNOWN & VARYING LEVELS?`

而不是
`ObservableCollection<Products> productsHierarchy = new ObservableCollection<Products>();`
使用`Dictionary<Int64, Products> IdToProduct = new ...`

当您循环您的产品时；做一个`IdToProduct[product.ID] = product;`

然后，循环完成的`IdToProduct`集合并执行；

```
if(product.ParentID != 0)
{
    IdToProduct[product.ParentID].ChildProducts.Add(product);
} 
```

现在，您的 Product --> ChildProducts 关系已被映射出来。

（可选）将属性添加到`Products class`：
`public bool IsCategory { get { return (ChildProducts.Count >= 1); } } // e.g. Oven`
`public bool IsProduct { get { return !(IsCategory); } } // e.g. Electric (Oven)`

现在，您已经定义了视图的大部分模型。

本文是使用 WPF [TreeView](http://www.codeproject.com/Articles/26288/Simplifying-the-WPF-TreeView-by-Using-the-ViewMode)的实际起点。

提示：您的起点`HierarchicalDataTemplate`

```
<TreeView.ItemTemplate>
    <HierarchicalDataTemplate DataType="{x:Type local:Products}" 
                              ItemsSource="{Binding ChildProducts}">
      <TextBlock Text="{Binding Name}" />
    </HierarchicalDataTemplate>
</TreeView.ItemTemplate> 
```

您应该创建一个`MainViewModel`具有：（
`public Products RootProduct { get; set; }`通知属性更改属性）的类

在你做你的 SQL 解析之后，什么不是；做：
`RootProduct = IdToProduct.FirstOrDefault(product => (product.Level == 0));`

`<TreeView ItemsSource="{Binding RootProduct.ChildProducts}">`

# c# - 文件路径和文本框

> ID：10300278
> 
> 赞同：1
> 
> 时间：2012-04-24T14:42:33.063
> 
> 标签：c#

好的，我要再试一次。我现在得到了更多信息。我知道我不能使用打开和保存对话框，也没有数据库。所以我还是有点迷茫，因为我之前被展示过如何使用打开和保存对话框来做到这一点。我将提出我应该做的事情，然后是到目前为止我拥有的代码。我必须构建和添加的代码。我还将展示我想添加的内容。我只是想找到最好的方法来理解这个原因，现在我不是。我还是新手，我知道过去几天人们一直试图帮助我理解，然后我被告知它不是打开和保存对话框。这是我应该做的。

•添加一个名为 txtFilePath <--- 已经有的文本框

•在上面的文本框旁边添加一个按钮，上面写着“加载”（适当地命名）<-已经有了

•添加一个按钮，上面写着“保存”（适当地命名）<--已经有了这个

•单击“加载”按钮时，读取文本框中指定的文件（txtFilePath：绝对路径不是相对的）并将在其中找到的对象添加到列表框<---不理解

•当用户点击“保存”按钮时，将选中的记录写入txtFilePath中指定的文件（绝对路径不是相对的）而不截断当前里面的值<--不明白

这是我拥有的代码的一部分：`

```
public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void addButton_Click(object sender, EventArgs e)
        {
            EditDialog newEmployeeDialog = new EditDialog();
            if (newEmployeeDialog.ShowDialog() == DialogResult.OK)
            {
                employeeList.Items.Add(newEmployeeDialog.StaffMember);
            }
        }

        private void deleteButton_Click(object sender, EventArgs e)
        {
            if (employeeList.SelectedIndex == -1)
                return;

            if (MessageBox.Show("Really delete this employee",
                "Delete", MessageBoxButtons.YesNo,
                    MessageBoxIcon.Question)
            == DialogResult.Yes)
            {
                employeeList.Items.Remove(
                    employeeList.SelectedItem);
            }
        }

        private void editButton_Click(object sender, EventArgs e)
        {
            if (employeeList.SelectedIndex == -1)
                return;

            int employeeNum = employeeList.SelectedIndex;
            EditDialog newEmployeeDialog = new EditDialog();
            newEmployeeDialog.StaffMember =
                (Employee)employeeList.SelectedItem;

            if (newEmployeeDialog.ShowDialog() == DialogResult.OK)
            {
                employeeList.Items.RemoveAt(employeeNum);
                employeeList.Items.Insert(employeeNum, newEmployeeDialog.StaffMember);
                employeeList.SelectedIndex = employeeNum;
            }
        }

        private void employeeList_SelectedIndexChanged(object sender, EventArgs e)
        {
            if (employeeList.SelectedIndex != -1)
            {
                Employee currentEmployee = (Employee)employeeList.SelectedItem;
                firstName.Text = currentEmployee.FirstName;
                lastName.Text = currentEmployee.LastName;
                jobTitle.Text = currentEmployee.JobTitle;
            }
            else
            {
                firstName.Text = lastName.Text = jobTitle.Text = "";
            }
        }
` 
```

现在我知道你看不到按钮点击，但我确实有它们的标记。我知道您何时使用 open 并保存它是如何工作的。我该怎么办？我会正确使用流编写器。我知道用户将在文本框中输入路径，当用户点击加载时，它将加载他们指定的文件。现在我只是想理解一个能够正确表达这一点的代码。

会是这样的吗：

```
String filePath = this.txtFilePath.Text; 
```

因为我需要将文本框命名为 txtFilePath。我知道你们中的一些人可能会说这很简单，但是当您第一次学习时，它似乎并不那么简单。自从我在家上大学以来，我一直在尝试一些事情来帮助我理解。感谢您的阅读，希望收到你们的来信。

更新：会是这样吗

读取文件

```
private void Load_Click(object sender, EventArgs e)
{ 
StreamReader myReader = new StreamReader(C:\\")
txtFilePath.Text = my reader.read to end();
myReader.Close();
} 
```

然后是写一个文件

```
{
StreamWriter myWriter = new StreamWriter("C:\\test.txt", true);
            myWriter.Write("Some text");
            myWriter.WriteLine("Write a line");
            myWriter.WriteLine("Line 2");
            myWriter.Close();
} 
```

如果这是正确的，那么我必须将它放在哪里，如果文件不存在以便记事本弹出以便他们可以添加它，那么他们可以保存它而不删除文件中的任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T15:04:59.270

假设该文件包含员工姓名列表，您应该能够使用以下内容将它们加载到您的列表框中：

```
var filepath = txtFilePath.Text;
if (File.Exists(filepath))
{
    var lines = File.ReadAllLines(filepath);
    foreach (var line in lines)
        employeeList.Items.Add(line);
} 
```

然后假设您想将新员工姓名添加到用户刚刚输入到列表框中的文件中：

```
var filepath = txtFilePath.Text;
if (File.Exists(filepath))
    using (var sw = File.AppendText(filepath)) 
        sw.WriteLine((string)employeeList.Text);
else
    using (var sw = File.CreateText(filepath)) 
        sw.WriteLine((string)employeeList.Text); 
```

这尚未经过测试，但它应该几乎可以按原样工作......

# cocoa - 以编程方式在 WebView 中打开链接

> ID：10300279
> 
> 赞同：0
> 
> 时间：2012-04-24T14:42:36.083
> 
> 标签：cocoa, webkit, webview

我有一个带有 WebView 的 NS 窗口。

我的程序接受搜索查询并使用它执行 Google 搜索，结果显示在 WebView 中，就像浏览器一样。

我不想在 WebView 中显示搜索结果，而是想自动打开第一个链接并显示该结果的内容。

作为一个更好的例子，如何在 WebView 中显示 Google 的第一个结果的内容？

这甚至可能吗？

非常感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T15:12:26.527

您可以使用直接的 Google Search API。这样会更方便。
[https://developers.google.com/custom-search/v1/cse/list?hl=de-DE](https://developers.google.com/custom-search/v1/cse/list?hl=de-DE)

此外，您还可以尝试发出“我感觉很幸运”按钮之类的 google 请求，它会自动将您定向到第一个搜索结果。

如果必须解析 HTML，则需要查看 google 结果页面的 HTML 结构。在and标记中查找特定的`id`和`class`css 属性。如果您找到了实际结果所在的位置，您就可以开始解析该内容。另外我想将一些javascript放在一起会更容易，这会找到第一个结果并打开它。（比使用 obj-c 解析 HTML 更容易）。您可以使用.`div``a``[myWebView stringByEvaluatingJavaScriptFromString: @"put your js code here"]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:55:05.117

Sure it is possible.

The first way to accomplish that that goes through my head is to **parse** the HTML response from Google, then launch a WebView with the first link you extracted.

Take a look at **regular expressions** to make it easy.

# c# - 如何对 IRepository 进行单元测试？

> ID：10300280
> 
> 赞同：4
> 
> 时间：2012-04-24T14:42:41.847
> 
> 标签：c#, unit-testing, nunit, repository, ravendb

我使用 RavenDB 使用以下博客文章 (http://www.codecapers.com/post/Using-RavenDB-with-ASPNET-MVC.aspx) 中提到的存储库编写了以下方法：

```
public User GetUserById(string id)
{
     var user = (from usr in _repository.All<User>() where usr.Id == id select usr).FirstOrDefault();

     if (user == null)
     {
          throw new NullReferenceException("No user with the id (" + id + ") could be found.");
     }

     return user;
} 
```

您将如何使用 nunit（可能还有 moq）对这种方法进行单元测试？

“用户”只是一个普通的类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:49:49.567

通常，您不会直接针对存储库层编写测试。例如，假设您使用的是 nHibernate 或实体框架，而不是对存储库进行测试在技术上将是测试该框架。

创建者或那些 ORM 已经这样做了。

与数据库交谈也会使您的测试成为集成测试而不是单元测试。

例如，您的单元测试将针对模拟存储库层的业务层。

如果您想编写集成测试，您也可以针对业务层编写它，但不要模拟存储库层并让它通过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:52:19.757

我将执行以下操作来准备您的代码：

1.  确保您`_repository`是通过构造函数或属性传入的，以便可以轻松更改它以进行测试。
2.  确保您的`_repository`变量被声明为`IRepository`类型，而不是具体类型。

然后，在您的测试中：

1.  创建一个模拟界面并将其传递给您的`_repository`.
2.  覆盖该`.All<User>()`方法以返回一个已知的硬编码列表，`User`其中包含适合您的测试的值。
3.  在一项测试中断言当您查询现有 ID 时返回正确的值。
4.  在单独的测试中断言当您查询不存在的 ID 时会引发异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T14:53:03.703

第一个问题是——在这种情况下你要测试什么？提供的方法实际上只有两个结果，所以你基本上是在测试是否`user`为空。那是增值测试吗？

至于*如何*，我假设`_repository`是通过某种机制注入的？如果是这样，那么您只需提供一个`Mock<IRepository>`（根据需要插入您的类型名称）并将其注入到注入的位置`_repository`。然后您可以设置返回值并测试您的方法是否存在异常。

```
mockRepository.Setup(x => x.All<User>()).Returns(new List<User> { ... }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T20:07:48.440

RavenDB 是专门设计的，因此您**无需**为单元测试模拟所有内容。

只需在内存中运行它，然后您就可以直接针对它执行单元测试。有关更多信息，请参阅[此博客文章](http://ayende.com/blog/4662/ravendb-managed-storage)。

它允许您编写如下代码：

```
[Fact]
public void CanQueryForDistinctItemsUsingLinq()
{
    using (var store = NewDocumentStore())
    {
        using (var s = store.OpenSession())
        {
            s.Store(new { Name = "ayende" });
            s.Store(new { Name = "ayende" });
            s.Store(new { Name = "rahien" });
            s.SaveChanges();
        }

        store.DocumentDatabase.PutIndex("test", new IndexDefinition
        {
            Map = "from doc in docs select new { doc.Name }",
            Stores = { { "Name", FieldStorage.Yes } }
        });

        using (var s = store.OpenSession())
        {
            var objects = s.Query<User>("test")
                .Customize(x => x.WaitForNonStaleResults())
                .Select(o => new {o.Name })
                .Distinct()
                .ToList();

            Assert.Equal(2, objects.Count);
            Assert.Equal("ayende", objects[0].Name);
            Assert.Equal("rahien", objects[1].Name);
        }
    }
} 
```

这来自 RavenDB[单元/集成测试](https://github.com/ayende/ravendb/blob/master/Raven.Tests/Bugs/Distinct.cs)，因此您需要一些基础设施才能使其正常工作，但它提供了总体思路。

# java - 如果会话在运行时被替换，Jetty 不会删除超时会话

> ID：10300283
> 
> 赞同：1
> 
> 时间：2012-04-24T14:42:56.177
> 
> 标签：java, session, jetty, session-state, session-timeout

在应用程序中，一旦用户模式发生变化，我们就会切换会话。

所以基本上我们有这样的东西：

```
request.getSession(false).invalidate();
request.getSession(true); 
```

现在发生了问题：超时后，会话没有被删除。在调试了一些内部代码后，我发现在`org.eclipse.jetty.server.session.AbstractSession.timeout()`会话中没有删除 if `_requests > 0`. 并且`_requests`大于零，因为在会话`org.eclipse.jetty.server.session.SessionHandler.doScope(String, Request, HttpServletRequest, HttpServletResponse)`的`complete()`运行`access`中增加了相同的会话，即使在调用期间实际会话被替换了！

有没有人遇到过同样的问题并设法解决了？

*更新*：我创建了一个解决方法。请参阅下面接受的答案。

*更新*：泽西社区中的错误：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=377610](https://bugs.eclipse.org/bugs/show_bug.cgi?id=377610)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T07:24:14.207

我通过覆盖 SessionHandler 解决了这个问题：

```
import java.io.IOException;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import org.eclipse.jetty.server.Request;
import org.eclipse.jetty.server.session.SessionHandler;

public class MySessionHandler extends SessionHandler {

    @Override
    public void doScope(String target, Request baseRequest, HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {

        HttpSession oldSession = request.getSession(false);
        super.doScope(target, baseRequest, request, response);
        HttpSession newSession = request.getSession(false);

        if (newSession != null && oldSession != newSession) {
            getSessionManager().complete(newSession);
        }
    }
} 
```

在应用程序的上下文中：

```
<Set name="sessionHandler">
     <New class="*************.MySessionHandler">
     </New>
</Set> 
```

# r - pheatmap 聚类注释

> ID：10300284
> 
> 赞同：2
> 
> 时间：2012-04-24T14:43:03.233
> 
> 标签：r, heatmap

我正在尝试将基于 k-means 的聚类算法的结果显示为`pheatmap`. 为此，我使用此处建议的程序：[R draw kmeans clustering with heatmap](https://stackoverflow.com/questions/5084077/r-draw-kmeans-clustering-with-heatmap)

现在的问题是，我想添加一个突出显示集群的配色方案，类似于 and 中的“RowSideColors”`heatmap`选项`heatmap.2`。至于`pheatmap`，我只找到了这个`annotation`选项，但这按列而不是按行工作。有没有办法突出显示中的行簇`pheatmap`？

我的另一个想法是将集群列添加为热图中的单独颜色。但是，与热图的其余部分相比，我需要使用另一种配色方案，所以我不确定它是否可能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-09-30T16:17:29.983

现在[pheatmap](http://cran.r-project.org/web/packages/pheatmap/index.html)包中有一个 annotation_row 参数：

```
library(pheatmap)

# define a matrix
test = matrix(rnorm(200), 20, 10)
test[1:10, seq(1, 10, 2)] = test[1:10, seq(1, 10, 2)] + 3
test[11:20, seq(2, 10, 2)] = test[11:20, seq(2, 10, 2)] + 2
test[15:20, seq(2, 10, 2)] = test[15:20, seq(2, 10, 2)] + 4
colnames(test) = paste("Test", 1:10, sep = "")
rownames(test) = paste("Gene", 1:20, sep = "")

# annotate rows
annotation_row = data.frame(
GeneClass = factor(rep(c("Path1", "Path2", "Path3"), c(10, 4, 6))))
rownames(annotation_row) = paste("Gene", 1:20, sep = "")

# plot pheatmap
pheatmap(test, annotation_row = annotation_row) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-11-06T22:01:10.723

好吧，你可以直接使用heatmap或heatmap.2，因为pheatmap没有这个参数。实际上，我有类似的任务。![在此处输入图像描述](../Images/d9aa974d4eac827871ad3e3dc5c8b2f4.png)

# java - Web 应用程序和 Tomcat 7 内存泄漏

> ID：10300288
> 
> 赞同：4
> 
> 时间：2012-04-24T14:43:11.103
> 
> 标签：java, hibernate, quartz-scheduler, tomcat7, visualvm

我正在（测试）在Tomcat 7中运行我的网络应用程序并使用他们的“查找泄漏”按钮，当然当我停止/取消部署时它会抱怨内存泄漏。

> 以下 Web 应用程序已停止（重新加载、取消部署），但它们之前运行的类仍加载到内存中，从而导致内存泄漏（使用分析器确认）：/LeakyWebApp

所以我使用了 Java VisualVM（我第一次尝试这个）

**在没有部署的 Tomcat 启动上：http:** [//img15.imageshack.us/img15/4441/tomcatstartup.jpg](http://img15.imageshack.us/img15/4441/tomcatstartup.jpg)

我的网络应用程序涉及：

*   石英 1.8.5
*   休眠 3.6.3
*   JAXB 2.2.4
*   销售人员 API
*   日志4j

**部署后立即：http:** [//img850.imageshack.us/img850/2951/tomcatafterdeployment.jpg](http://img850.imageshack.us/img850/2951/tomcatafterdeployment.jpg)

所以我注意到它抱怨 Quartz，我还在某处读到了在 servlet 销毁时关闭 Hibernate Session Factory。

在停止/取消部署时，Visual VM 确实显示 Quartz 线程已停止，但 tomcat 日志显示

> “似乎启动了一个名为 ... 的线程，但未能停止它”

所以我创建了一个新的 ServletContextListener 并在 contextDestroyed 上调用 Quartz 工厂调度程序来关闭并在 Hibernate Session Factory 上调用 close。并进行另一次部署/取消部署，tomcat 日志不再抱怨上述 Quartz 线程问题。

但是，当我使用“查找泄漏”时，它仍然抱怨同样的事情

> 以下 Web 应用程序已停止（重新加载、取消部署），但它们之前运行的类仍加载到内存中，从而导致内存泄漏（使用分析器确认）：/LeakyWebApp

然后我发现另一个关于 JDBC 驱动程序的抱怨（我的战争中有 mysql 连接器 jar），所以我尝试删除它，来自 tomcat 日志的抱怨消失了，但“查找泄漏”仍然说我的网络应用程序有内存泄漏同样的事情

所以我的问题是——我还应该看什么？和/或如何更好地使用 Visual VM 来检测发生了什么？

谢谢

**编辑：** 我根据 David Feitosa 的帖子解决了 Quartz 的问题，我错过了

```
 <init-param>
     <param-name>wait-on-shutdown</param-name>
     <param-value>true</param-value>
 </init-param> 
```

来自 web.xml 中的 Quartz 属性。

但是 - 我的 JDBC 驱动程序仍然存在问题 - 我的 Web 应用程序需要它，并且似乎我有 2 个基于以下答案的解决方案：[为了防止内存泄漏，JDBC 驱动程序已被强制注销](https://stackoverflow.com/questions/3320400/to-prevent-a-memory-leak-the-jdbc-driver-has-been-forcibly-unregistered)

1.  将 mysql-connector jar 放入 tomcat/lib
2.  在 contextDestroyed 中手动取消注册驱动程序。

我应该走哪条路，最好的做法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T14:53:37.643

我在这类 Web 应用程序中发现的大多数内存泄漏问题都与 Quartz 有关。为了解决这个问题，尝试使用正确的 Quartz Servlet 来初始化工厂：http: [//quartz-scheduler.org/api/2.0.0/org/quartz/ee/servlet/QuartzInitializerServlet.html](http://quartz-scheduler.org/api/2.0.0/org/quartz/ee/servlet/QuartzInitializerServlet.html)

如在 Quartz 文档中，尝试使用：

```
 <servlet>
     <servlet-name>
         QuartzInitializer
     </servlet-name>
     <display-name>
         Quartz Initializer Servlet
     </display-name>
     <servlet-class>
         org.quartz.ee.servlet.QuartzInitializerServlet
     </servlet-class>
     <load-on-startup>
         1
     </load-on-startup>
     <init-param>
         <param-name>config-file</param-name>
         <param-value>/some/path/my_quartz.properties</param-value>
     </init-param>
     <init-param>
         <param-name>shutdown-on-unload</param-name>
         <param-value>true</param-value>
     </init-param>
     <init-param>
         <param-name>wait-on-shutdown</param-name>
         <param-value>true</param-value>
     </init-param>
     <init-param>
         <param-name>start-scheduler-on-load</param-name>
         <param-value>true</param-value>
     </init-param>
 </servlet> 
```

希望这可以帮到你。

# android - 如何在 Android 应用程序中集成 Authorize.Net？

> ID：10300290
> 
> 赞同：2
> 
> 时间：2012-04-24T14:43:17.307
> 
> 标签：android, authorize.net

我想将我的应用程序与 Authorize.Net 集成。我已按照[教程](https://developer.authorize.net/integration/fifteenminutes/android)中给出的步骤进行操作。

我如何设法创建一个库项目 anet_android_sdk。现在我的库项目 anet_android_sdk 没有显示错误。但是当我在步骤 3 中创建一个新项目时，我遇到了错误。

```
import net.authorize.android.AuthNet;
import net.authorize.android.AuthNetActivityBase;
import net.authorize.android.SimpleActivity;
import net.authorize.android.button.AuthNetButton; 
```

此导入语句未解析。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T04:59:53.923

最后是我设法解决它的一些方法。实际问题是创建 anet_android_sdk 库项目并将其添加到我的项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T07:06:12.627

可能是您在添加 jar 文件时遇到问题，转到您的项目属性-> java 构建路径-> 订购和导出并在复选框中选择 jar 文件，然后清理项目.. 可能这可以帮助您

# python - Python - Twisted：以表格形式发布

> ID：10300294
> 
> 赞同：-1
> 
> 时间：2012-04-24T14:43:33.833
> 
> 标签：python, parsing, post, twisted, beautifulsoup

**嗨，大家好 ！**

我仍在发现 Twisted，并且我制作了这个脚本来将 HTML 表格的内容解析为 excel。这个脚本运行良好！我的问题是我怎么能做同样的事情，只有一个网页（http://bandscore.ielts.org/）但是有很多 POST 请求能够获取所有结果，用 beautifulSoup 解析它然后把它们进入excel？

解析源代码并将其放入 excel 中是可以的，但我不知道如何使用 Twisted 进行 POST 请求以便在

这是我用于解析（使用 Twisted）许多不同页面的脚本（我希望能够编写相同的脚本，但在同一页面上使用许多不同的 POST 数据而不是很多页面）：

```
from twisted.web import client
from twisted.internet import reactor, defer
from bs4 import BeautifulSoup as BeautifulSoup
import time
import xlwt

start = time.time()
wb = xlwt.Workbook(encoding='utf-8')
ws = wb.add_sheet("BULATS_IA_PARSED")
global x
x = 0
Countries_List = ['Afghanistan','Armenia','Brazil','Argentina','Armenia','Australia','Austria','Azerbaijan','Bahrain','Bangladesh','Belgium','Belize','Bolivia','Bosnia and Herzegovina','Brazil','Brunei Darussalam','Bulgaria','Cameroon','Canada','Central African Republic','Chile','China','Colombia','Costa Rica','Croatia','Cuba','Cyprus','Czech Republic','Denmark','Dominican Republic','Ecuador','Egypt','Eritrea','Estonia','Ethiopia','Faroe Islands','Fiji','Finland','France','French Polynesia','Georgia','Germany','Gibraltar','Greece','Grenada','Hong Kong','Hungary','Iceland','India','Indonesia','Iran','Iraq','Ireland','Israel','Italy','Jamaica','Japan','Jordan','Kazakhstan','Kenya','Kuwait','Latvia','Lebanon','Libya','Liechtenstein','Lithuania','Luxembourg','Macau','Macedonia','Malaysia','Maldives','Malta','Mexico','Monaco','Montenegro','Morocco','Mozambique','Myanmar (Burma)','Nepal','Netherlands','New Caledonia','New Zealand','Nigeria','Norway','Oman','Pakistan','Palestine','Papua New Guinea','Paraguay','Peru','Philippines','Poland','Portugal','Qatar','Romania','Russia','Saudi Arabia','Serbia','Singapore','Slovakia','Slovenia','South Africa','South Korea','Spain','Sri Lanka','Sweden','Switzerland','Syria','Taiwan','Thailand','Trinadad and Tobago','Tunisia','Turkey','Ukraine','United Arab Emirates','United Kingdom','United States','Uruguay','Uzbekistan','Venezuela','Vietnam']
urls = ["http://www.cambridgeesol.org/institutions/results.php?region=%s&type=&BULATS=on" % Countries for Countries in Countries_List]

def finish(results):
    global x
    for result in results:
        print 'GOT PAGE', len(result), 'bytes'
        soup = BeautifulSoup(result)
        tableau = soup.findAll('table')
    try:
        rows = tableau[3].findAll('tr')
        print("Fetching")
        for tr in rows:
        cols = tr.findAll('td')
        y = 0
        x = x + 1
        for td in cols:
            texte_bu = td.text
            texte_bu = texte_bu.encode('utf-8')
            #print("Writing...")
                    #print texte_bu
            ws.write(x,y,td.text)
            y = y + 1
    except(IndexError):
        print("No IA for this country")
        pass

    reactor.stop()

waiting = [client.getPage(url) for url in urls]
defer.gatherResults(waiting).addCallback(finish)

reactor.run()
wb.save("IALOL.xls")
print "Elapsed Time: %s" % (time.time() - start) 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T16:57:19.460

你有两个选择。继续使用`getPage`并告诉它使用**POST**而不是**GET**或使用`Agent`.

[API 文档`getPage`](http://twistedmatrix.com/documents/current/api/twisted.web.client.getPage.html)将您引导至[API 文档`HTTPClientFactory`](http://twistedmatrix.com/documents/current/api/twisted.web.client.HTTPClientFactory.html)以发现其他支持的选项。

后面的 API 文档明确涵盖`method`并暗示（但解释不好）`postdata`。因此，要使用以下方式进行**POST**`getPage`：

```
d = getPage(url, method='POST', postdata="hello, world, or whatever.") 
```

有一个[howto 样式的文档`Agent`](http://twistedmatrix.com/documents/current/web/howto/client.html)（链接自[整个 web howto 文档索引](http://twistedmatrix.com/documents/current/web/howto/)。这给出了发送带有正文的请求的示例（即，参见`FileBodyProducer`示例）。

# mysql - MySQL时间戳触发器

> ID：10300296
> 
> 赞同：0
> 
> 时间：2012-04-24T14:43:35.833
> 
> 标签：mysql, triggers, timestamp

我正在尝试设置触发器以在更新主表时在日志表中记录时间戳。我有一个名为 cm 的主表，并且有一个带有时间戳列的日志表。

日志表中的时间戳列设置如下：

```
ALTER TABLE log ADD COLUMN modified_timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP 
```

我尝试的触发器如下但抛出此错误“错误代码1193。未知系统变量'modified_timestamp'

扳机：

```
DELIMITER //
CREATE TRIGGER `ahrq cm`.`table_timestamp` BEFORE UPDATE ON `ahrq    cm`.`ahrq_inventory_all`
FOR EACH ROW begin

set log.modified_timestamp=CURRENT_TIMESTAMP();

end
// 
```

任何人都可以阐明这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:54:12.667

您的触发器应该`log`使用普通的 SQL 命令更新表：

```
DELIMITER //
CREATE TRIGGER `ahrq cm`.`table_timestamp` BEFORE UPDATE ON `ahrq cm`.`ahrq_inventory_all`
FOR EACH ROW begin

INSERT INTO log (modified_timestamp) VALUES (CURRENT_TIMESTAMP());

end
// 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:56:38.083

set 用于设置变量（用户、系统或存储的例程变量）的值。

要更新日志表中的字段需要发出UPDATE查询，例如

```
UPDATE log SET modified_timestamp = CURRENT_TIMESTAMP() WHERE ... 
```

# python - 使用 Python 和 GAE 对编码的 URL 查询参数的解码不一致

> ID：10300303
> 
> 赞同：1
> 
> 时间：2012-04-24T14:43:59.010
> 
> 标签：python, ios, google-app-engine, url-encoding

我试图在提交之前在我的移动客户端中获取一致的 URL 字符串，并在服务器上获取一致的 URL 字符串，以便能够可靠地添加哈希以用于安全校验和目的。目前，我在客户端上的 URL 编码之后添加哈希，并尝试在服务器上解码任何内容之前获取 URL，但我得到一个字符（句点）已经解码：

当我发布这样的内容时：

```
 https://myapp.appspot.com/endpt?par=0%3Afirstlast%40gmail%2Ecom&di . . . 
```

从服务器上的这个：

```
self.request.url 
```

我得到：

```
https://myapp.appspot.com/endpt?par=0%3Afirstlast%40gmail.com&di . . . 
```

由此：

```
self.request.get('par') 
```

如我所料，我将其完全解码：

```
0:firstlast@gmail.com 
```

我想知道如何在任何解码发生之前获取 URL？或者，如果可以在整个查询部分解码的情况下获取 URL，我可以在编码/解码之外进行散列？即我可以在任何时候注入我的哈希值，我可以获得一致、可靠的结果。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T04:16:35.947

您可以直接从您的 WSGI 环境中获取它，但我建议您从[Amazon 的书中](http://docs.amazonwebservices.com/AmazonS3/latest/dev/RESTAuthentication.html)取出一页，并定义用于签名 URL 的规范格式。然后，您可以在两端以相同的方式对 URL 进行编码和格式化，并且您不必依赖框架和代理的变幻莫测来不干扰 URL 的琐碎编码细节。

# asp.net - Web 服务中的 ThreadPool.QueueUserWorkItem 用于“一劳永逸”任务

> ID：10300308
> 
> 赞同：6
> 
> 时间：2012-04-24T14:44:10.420
> 
> 标签：asp.net, .net, multithreading, web-services, threadpool

这是 ASP.NET ASMX Web 服务/.NET Framework 4.0。

在 Web 服务中，我想在另一个线程上执行一个方法，例如“一劳永逸”，以便 Web 服务返回**一些值**以立即响应网站。Web Service 立即向网站返回响应后，另一个线程上的该方法可能需要 10 分钟。另外，我不需要该方法的返回值。

我已经使用 ThreadPool.QueueUserWorkItem 测试了这个场景，似乎使用 ThreadPool 启动的线程仍然会继续执行，即使 Web 服务将响应返回到网站。我在这里正确吗？还有更好的方法来实现这一目标吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T14:48:10.957

问题是，ASP.NET 会时不时地回收应用程序池。因为它不知道你的后台任务，所以它不会被考虑并且会在 AppDomain 被释放时中止。

大多数时候，工作会完成，但如果你运行的时间足够长，就会遇到这种情况。

有两种解决方案：

1）“正确”的方法是编写一个在 ASP.NET 之外运行的 Windows 服务。您可以通过 WCF 向服务发送指令。

2）“快速而肮脏”的方式是在您的 ASP.NET 站点中编写一个隐藏的 Web 服务，该服务永远不会被用户调用。您的应用程序向隐藏服务发起异步请求，然后将自己的结果返回给用户，无需等待。

ASP.NET 不知道对隐藏服务的请求来自您的应用程序内部 - 它只是将其视为另一个请求。因为 ASP.NET 知道这个请求，所以它不会在回收时中止它。

# php - 在 Zend_Form_Select 元素中显示特殊字符

> ID：10300316
> 
> 赞同：1
> 
> 时间：2012-04-24T14:44:34.933
> 
> 标签：php, zend-framework, utf-8, zend-form

我正在使用 Zend_Form 显示一个包含组合框的简单表单，该组合框的数据直接从数据库中提取。这些值是网站本地语言（法语）的国家名称，包含特殊字符（é、è、ï、...）。我的文件都是 UTF-8 格式，还有表格和网站字符集。

但是所有包含特殊字符的条目都显示为空行。

知道为什么吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:52:16.380

确保您的所有脚本和视图文件也以 UTF-8 编码。确保您与数据库的连接要求使用 UTF-8。

链中的缺失部分可能导致错误显示。

# android - ListView 颜色超出边界

> ID：10300319
> 
> 赞同：0
> 
> 时间：2012-04-24T14:44:40.030
> 
> 标签：android, listview

如果您知道我的意思，我正在尝试找到一种最简单的方法来覆盖当您尝试将 ListView 滚动到其边界之外时出现的颜色。我希望这可以用一些不涉及 9 补丁的简单方法来代替 :)。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T15:38:13.597

我知道的不是您希望的答案，但这是我所知道的：

```
<ListView
    android:overScrollHeader="@drawable/header"
    android:overScrollFooter="@drawable/footer"/> 
```

或以编程方式执行相同操作：

```
setOverscrollFooter(Drawable d);
setOverscrollHeader(Drawable d); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:04:37.493

你试过了`mListView.setCacheColorHint(color);`吗？

# ios - IBOutlets 和内存管理

> ID：10300320
> 
> 赞同：0
> 
> 时间：2012-04-24T14:44:42.213
> 
> 标签：ios, memory-management, memory-leaks, instruments

我知道这可能是一个重复的问题，但也有相互矛盾的答案！我对此有点困惑..我的问题是当我使用仪器检查泄漏来分析我的应用程序时..它在这种方法上一直显示泄漏`loadNibNamed:`..与这些问题相关：

1.[使用loadNibNamed:方法时需要释放IBOutlets吗？](https://stackoverflow.com/questions/382576/do-i-need-to-release-iboutlets-when-using-loadnibnamed-method)

2.[使用 loadNibNamed 会导致内存泄漏](https://stackoverflow.com/questions/3401847/using-loadnibnamed-leaves-a-memory-leak)

我发现有些人说`IBOutlets`即使你不实现访问器方法也必须释放！其他人说你不应该发布这些插座，因为 iOS 会处理它，所以我需要一个基于专业经验的正确答案，因为这需要我在我的项目上做很多工作。

**编辑/例如：**

如果这是我的 .h 类文件

```
@interface MenuViewEPub : UIViewController<ePubBrightnessDelegate,FontDelegate,PagesSlidePreviewerDelegate,ePubExpandSearchBarDelegate,EnviromentAudioChooserDelegate,UIPopoverControllerDelegate,WEPopoverControllerDelegate> {

    IBOutlet UIView *upperMenu;
    IBOutlet UIView *lowerMenu;

    IBOutlet ePubBrightnessButton *brightnessButton;
    IBOutlet FontButton *fontButton;

    IBOutlet UIBarButtonItem *backButtonTitle;
    IBOutlet UIBarButtonItem *indexButtonTitle;
    IBOutlet UIBarButtonItem *annotationButtonTitle;
    UIView *readerView;

    IBOutlet ePubExpandSearchBar *searchBar;

    id<MenuViewControllerDelegat>delegate;

    IBOutlet PagesSlidePreviewer *pageSilder;
    IBOutlet UIButton *arEnButton;

    int pageNumber;

    int chapterIndex;
    int chtCount;

    BOOL isLandscape;

    UIPopoverController *lastPopover;
}
@property (nonatomic, assign) id<MenuViewControllerDelegat>delegate;
@property (nonatomic, retain) ePubExpandSearchBar *searchBar;
@property (nonatomic, assign) int chtCount;
@property (nonatomic, assign) int pageNumber;
@property (nonatomic, assign) int chapterIndex;
@property (nonatomic, assign) BOOL isRotate;

- (IBAction)tocButtonPressed:(id)sender;
- (IBAction)AnnotationsPressed:(id)sender;
- (IBAction)BackPressed:(id)sender;
- (IBAction)rtfPressed:(id)sender;
- (IBAction) audioPressed:(UIButton*)sender;
- (IBAction) tipsPressed:(UIButton*)sender;
- (void) showMenuInView :(UIView*) destview;
- (void) createViews;
- (void) hideMenu : (BOOL)animate;
- (void) changePageNumber:(int)pageNum;

@end 
```

*除了searchBar*之外，我是否必须发布任何出口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:49:32.783

除非您使用 ARC，否则您应该释放该`viewDidUnload`方法中所有保留的子视图。这将包括通过 IBOutlets “注入”的子视图。您通常还会在方法中包含您自己创建的任何内容`viewDidLoad`。

# javascript - 在 Javascript 上显示警报时忽略按键

> ID：10300321
> 
> 赞同：1
> 
> 时间：2012-04-24T14:44:46.120
> 
> 标签：javascript, dom-events, alert, keypress

当光标聚焦在文本框中并按下回车键时，我有一个函数 X 在做某事，但是有可能（使用其他 JS 函数）如果我专注于这个文本框，我会收到警报。

问题发生在这里，有时我通过按“忽略”错误，`enter`当警报在那里时如何不调用此函数 X，但我希望它在警报再次关闭时再次工作。

在 HTML 页面上：

```
<input type='text' name='col0' id='col0' onkeyup='arrowHandler(0);'
onblur='count(0)' />
<input type='text' name='col1' id='col1' onkeyup='arrowHandler(1);' 
onblur='count(1)' />
<input type='text' name='col2' id='col2' onkeyup='arrowHandler(2);' 
onblur='count(2)' />
<input type='text' name='col3' id='col3' onkeyup='arrowHandler(3);' 
onblur='count(3)' /> 
```

在 JS 页面上：

```
function arrowHandler(i){
  var key = window.event.keyCode;
  if(key == 13){
    // moving to the next (or first, if last) text field
    var newcol = parseInt(i) + 1;
    if(newcol == col) newcol = 0;
    elmt = document.getElementById("col" + newcol);
    elmt.focus();
  }
}

function count(i){
  if(parseInt(document.getElementById("col" + i).value) > 20){
    alert("error!");
  }
} 
```

在这里，当焦点在 时`col0`，我写 25，然后焦点移动到`col1`，我收到警报，然后按 enter，结果，焦点移动到`col2`（我不想要最后一个移动，因为按 enter当显示警报时）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:10:22.353

您可以尝试以下方法：

```
var block = false;

function arrowHandler(evt, i){
  var key = window.event.keyCode;
  if(!block && key == 13){
    // moving to the next (or first, if last) text field
    var newcol = parseInt(i) + 1;
    if(newcol == col) newcol = 0;
    elmt = document.getElementById("col" + newcol);
    elmt.focus();
  }
}

function count(i){
  if(parseInt(document.getElementById("col" + i)).value > 20){
    block = true;
    alert("error!");
    setTimeout(function(){block=false;},100);
  }
} 
```

在`alert`停止 JS 执行时，会在警报后立即忽略任何按键。

虽然，您可能应该重新考虑使用`alert`，但有更好的方法来进行验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T10:23:00.790

您可以在 if(key == 13) 条件内的**arrowHandler**中使用**count**函数，并在 count 函数中添加**return false**

 ****（有时间我会改进我的答案）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T16:01:22.347

这是一个更简单的版本。处理焦点是在一个单独的函数中完成的。不需要计时器等等。希望这可以帮助。

正如其他人所说，请避免使用警报 - 如果你发现这样的东西真的很烦人，不是吗？考虑一下。

```
var handleFocus = function (i, error) {
    var id = "col" + (error ? i : ++i);
    if (id === 'col' + col) id = 'col0';
    alert(id + "  " + i + "  " + error)
    document.getElementById(id).focus();
};

var arrowHandler = function (evt, i) {
    var key = window.event.keyCode;
    if (key == 13) {
        handleFocus(i, false);
    }
};

var count = function (i) {
    if (parseInt(document.getElementById("col" + i).value) > 20) {
        alert("error!");
        handleFocus(i, true);
    }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T18:56:35.033

试试这个，我想它应该工作：

当您警告“错误！”时，您可以使用全局临时变量说 t 并将其设置为 1。然后在您的 arrowHandler 函数中将 if 条件更改为 if(key==13 && t==0)，然后是您的代码并在其中添加一个 else 部分，您可以在其中更改 t=0。

另外，我想您的`parseInt(document.getElementById("col" + i))>20`声明应该替换为`parseInt(document.getElementById("col" + i).value)>20`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T23:22:40.613

理想情况下，您不会使用`alert()`，而是弹出一个`<div>`样式很好的样式以获得焦点，或者显示一个`<span>`指示失败消息而不强制用户确认的消息。

如果您选择坚持使用该`alert()`解决方案，@gopi1410 是正确的：在之前设置一个 var 并在之后清除它，这意味着“不过滤击键”。****

# sql-server - 异构查询需要为连接设置 ANSI_NULLS 和 ANSI_WARNINGS 选项。这确保了一致的查询语义

> ID：10300322
> 
> 赞同：8
> 
> 时间：2012-04-24T14:45:00.680
> 
> 标签：sql-server, heterogeneous, ansi-nulls

我已经检查了整个网络，但找不到似乎对我有用的解决方案..

我重新创建了我的存储过程，确保将这些行作为第一行：

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_WARNINGS ON
GO
CREATE PROCEDURE test_insert
AS
....
BEGIN
...
END 
```

当我从 php 调用我的存储过程时，我只会收到此错误。它在 sql server 中运行良好..我真的不知道我还能做什么..请帮助我;_;

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-08-17T06:06:16.747

在您的语句之前而不是在主查询的开头添加了这个

```
$result = mssql_query("SET ANSI_NULLS ON;");
$result = mssql_query("SET ANSI_WARNINGS ON;"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-16T06:47:16.320

这是一个有效的例子......试试这样

```
create procedure dbo.access_update @O_SQL_Error_State int = NULL     output

as

set ANSI_NULLS ON 

SET ANSI_WARNINGS ON    

....
....

GO 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-01T11:38:00.853

它通常不是更好的答案是在另一个论坛上 - 但根据[这篇文章](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/1d501b57-fc58-4fbe-9bec-6c38ad158a62/heterogeneous-queries-ansinulls-ansiwarnings?forum=sqldataaccess)，`SET`命令必须在`CREATE PROCEDURE`. 经过测试并与 SQL Server 2017 一起使用。

例如：

```
SET ANSI_WARNINGS ON
SET ANSI_NULLS ON 
GO

CREATE PROCEDURE dbo.access_update 
    @O_SQL_Error_State int = NULL OUTPUT
AS
    ... 
```

# r - 使用动态前零调整数据集中的因子

> ID：10300325
> 
> 赞同：0
> 
> 时间：2012-04-24T14:45:11.933
> 
> 标签：r, r-factor

我有一个很大的`data.frame`（1.9M 记录，有 20 列）。其中一列是具有不同长度的数字值的因子列（不同数量的字符/数字，例如 567839、234324324、3243211 等）注意：这些是数字代码，没有实际值，也可能只是不同的字符这个例子的长度。

现在我想将 do 因子转换为 13 位因子，这样在位数小于 13 的情况下，因子会在零之前。

例子：

```
Old factor      Length  New factor
432543532532    12      0432543532532
3285087250932   13      3285087250932
464577534       9       0000464577534
2225324324324   13      2225324324324
864235325264    12      0864235325264 
```

我尝试了不同的方法，但现在我被卡住了。问题是因子的长度在整个数据集中都不同。

我尝试了以下方法，并举了一个例子。

`data.frame`使用我执行代码的三个不同列进行创建，以识别问题。

```
> df.test <- as.data.frame(cbind(c("432543532532", "3285087250932", "464577534", "2225324324324", "864235325264"), c("3285087250932", "132543532532", "464577534", "2225324324324", "864235325264"), c("164577534", "3285087250932", "432543532532", "2225324324324", "864235325264")))
> df.test
             V1            V2            V3
1  432543532532 3285087250932     164577534
2 3285087250932  132543532532 3285087250932
3     464577534     464577534  432543532532
4 2225324324324 2225324324324 2225324324324
5  864235325264  864235325264  864235325264

> levels(df.test$V1) <- paste(substr("0000000000000", 0, 13 - nchar(as.character(levels(df.test$V1)))), levels(df.test$V1), sep = '')
> levels(df.test$V2) <- paste(substr("0000000000000", 0, 13 - nchar(as.character(levels(df.test$V2)))), levels(df.test$V2), sep = '')
> levels(df.test$V3) <- paste(substr("0000000000000", 0, 13 - nchar(as.character(levels(df.test$V3)))), levels(df.test$V3), sep = '')
> df.test
             V1             V2                V3
1  432543532532 03285087250932     0000164577534
2 3285087250932  0132543532532 00003285087250932
3     464577534     0464577534  0000432543532532
4 2225324324324 02225324324324 00002225324324324
5  864235325264  0864235325264  0000864235325264 
```

问题是代码`nchar(as.character(levels(df.test$V1)))`不使用向量的长度，`df.test$V1`而只使用一个值；因子的第一级的长度（在字母/升序上）。它对所有记录执行必要的前面零的数量。所以没有矢量代码！

注意：如果我单独运行“nchar”代码，它会给我一个包含所有记录长度的向量，所以我认为它应该可以工作......

```
> nchar(as.character(levels(df.test$V1)))
[1] 13 13 12  9 12
> nchar(as.character(levels(df.test$V2)))
[1] 13 14 14 10 13
> nchar(as.character(levels(df.test$V3)))
[1] 13 17 17 16 16 
```

为什么不`nchar(as.character(levels(df.test$V1)))`作为矢量运算符运行？谁能告诉我如何更改我的代码，以便得到正确的结果？

提前致谢！

注意。请注意，在实际情况下，我只需要对`data.frame`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T14:59:07.110

对于零填充，您可以使用`sprintf('%04d', 1:5)`，但示例中的代码必须是数字。

```
max.nchar <- max(nchar(levels(df.test$V1)))

sprintf(paste0('%0',max.nchar), as.numeric(levels(df$V1))[df$V1]) 
```

也许有更好的方法......但你可以使用`gsub`with `sprintf`：

```
gsub(' ', '0', sprintf('%04s', levels(factor(10:15)))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T15:43:32.613

```
as.data.frame( lapply(df.test, sprintf, fmt="%013s"))
#---------------------    
         V1            V2            V3
1 0432543532532 3285087250932 0000164577534
2 3285087250932 0132543532532 3285087250932
3 0000464577534 0000464577534 0432543532532
4 2225324324324 2225324324324 2225324324324
5 0864235325264 0864235325264 0864235325264 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T09:19:02.293

您的代码无法正常工作，因为返回“与（在可能的强制之后）`substr`具有相同长度和相同属性的字符向量”。`x`因此，您必须确保`x`具有与预期返回值一样多的元素

```
df.test <- as.data.frame(cbind(c("432543532532", "3285087250932", "464577534", "2225324324324", "864235325264"), c("3285087250932", "132543532532", "464577534", "2225324324324", "864235325264"), c("164577534", "3285087250932", "432543532532", "2225324324324", "864235325264")))
df.test

n <- nrow(df.test)
start <- rep(0, n)
padStrs <- rep("0000000000000", n)
for (thevar in colnames(df.test))) {
    cdiff1 <- 13 - nchar(as.character(levels(df.test[, thevar])))
    levels(df.test[, thevar]) <- paste(substr(padStrs, 0, cdiff), levels(df.test[, thevar]), sep = '')
} 
```

# ruby-on-rails - RAILS_ENV=生产脚本/delayed_job 开始（目录未定义）

> ID：10300326
> 
> 赞同：2
> 
> 时间：2012-04-24T14:45:25.917
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, delayed-job, production-environment

我实际上想在生产模式下激活延迟作业。所以我输入“

> RAILS_ENV=生产脚本/delayed_job 开始

“在控制台并且出现错误”

> :dir => File.join(dir, 'tmp', 'pids'),

" 报告未定义的目录...在线搜索原始文件但找不到任何文件。

```
#!/usr/bin/env ruby
require File.expand_path(File.join(File.dirname(__FILE__), '..', 'config',   'environment'))
require 'delayed/command'
Delayed::Command.new(ARGV).daemonize
daemon_options = {
  :multiple   => false,
  :dir_mode   => :normal,
  **:dir        => File.join(dir, 'tmp', 'pids'),**
  :backtrace  => true
}

Daemons.run_proc('job_runner', daemon_options) do
  if ARGV.include?('--')
    ARGV.slice! 0..ARGV.index('--')
  else
    ARGV.clear
  end

  Dir.chdir dir
  RAILS_ENV = ARGV.first || ENV['RAILS_ENV'] || 'development'
  require File.join('config', 'environment')

  Delayed::Worker.new.start
 end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T15:27:25.960

尝试替换`dir`为`Rails.root`（替换两个事件）。变量或方法`dir`从未在上述代码中定义。您还可以在上面定义 dir `daemon_options`：

```
dir = Rails.root
daemon_options = {
  ... 
```

# android - 索引 1 处的绑定值在查询中为空？

> ID：10300327
> 
> 赞同：2
> 
> 时间：2012-04-24T14:45:26.000
> 
> 标签：android, sqlite

我在以下查询中得到“索引 1 处的绑定值为空”：

```
public String searchForWifiSSID(String one, String two){
c = db.query(Constants.TABLE_NAME, new String[]{Constants.PARAM1, Constants.PARAM2}, Constants.PARAM1 + " =? " +" AND " + Constants.PARAM2 + " =? ", new String[]{one,two}, null, null, null);
} 
```

我的 selectionArgs 语法不正确吗？这样做是否不正确：

```
 public String searchForWifiSSID(String one, String two){
    c = db.query(Constants.TABLE_NAME, new String[]{Constants.PARAM1, Constants.PARAM2}, Constants.PARAM1 + " = " + one +" AND " + Constants.PARAM2 + " = " + two, null, null, null, null);
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T14:57:23.903

确保值“一”和“二”不为 NULL。我相信该错误意味着这些值之一为空。

# asp.net-mvc-3 - 如何正确覆盖 EF 4.1 中的 SaveChanges 函数

> ID：10300330
> 
> 赞同：5
> 
> 时间：2012-04-24T14:45:37.633
> 
> 标签：asp.net-mvc-3, entity-framework, entity-framework-4.1

在我的 EF 4.1 MVC3 Web 应用程序中创建新订单时，我需要自动插入当前日期。我还需要自动添加当前登录的用户——我正在使用表单身份验证。在网上搜索后，我发现我需要重写 SaveChanges() 函数，StackOverflow 上的一篇文章展示了如何做到这一点：[Entity Framework 4.1 Automatic date](https://stackoverflow.com/questions/6465438/entity-framework-4-1-automatic-date)。但是，我无法让代码工作。这段代码去哪儿了？我如何找出是什么？

对不起，如果这个问题是微不足道的 - 我是 EF 的新手。B.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T15:07:48.267

您可以在上下文类中覆盖，

```
public partial class YourDbContext: DbContext
    {
      public  YourDbContext()
        {               
        }
      public override int SaveChanges()
      {
       // do your additional stuff here.. (Ex:- save current user)
           return base.SaveChanges();
      }   
} 
```

另一个选项是您可以在实体的构造函数中设置默认值，

```
 Public class YourEntity{

      public YourEntity(){
          CreatedDate=DateTime.Now;
      }

      Public DateTime CreatedDate{get;set;}
   } 
```

# java - SpeedyFX哈希算法的Java实现

> ID：10300333
> 
> 赞同：2
> 
> 时间：2012-04-24T14:45:44.607
> 
> 标签：java, hash

根据这篇论文[，用于分类和索引的极快文本特征提取](http://www.scribd.com/doc/5557479/Extremely-Fast-Text-Feature-Extraction-for-Classification-and-Indexing)SpeedyFX 是一种非常快速的散列算法。

我想知道是否有人有这个算法的 Java 实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:55:56.320

最初的实现在 UTF-8 和 Unicode 处理方面*有点*缺陷。它只考虑[Unicode 平面 0](https://en.wikipedia.org/wiki/Plane_%28Unicode%29#Basic_Multilingual_Plane)，而平面 1 和 2 中实际上有许多单词字符（并且截至 2012 年 12 月 28 日，平面 3-16 中没有单词字符）。

FWIW，我已经[在 C 中实现了 SpeedyFx 算法](https://github.com/creaktive/Text-SpeedyFx/blob/master/SpeedyFx.xs#L127)，作为 Perl 模块[Text::SpeedyFx](https://metacpan.org/module/Text%3a%3aSpeedyFx)的一部分。对于 UTF-8 和 ISO 8859-1 编码的字符串，对我来说真的很棒。

# objective-c - 从 iOS 上的元数据获取位置

> ID：10300336
> 
> 赞同：4
> 
> 时间：2012-04-24T14:45:50.520
> 
> 标签：objective-c, ios, uiimagepickercontroller, cllocationmanager, geotagging

有没有办法在不使用 CLLocationManager 的情况下从新拍摄的图像中获取位置？

如果您可以从图像中提取数据，那么使用位置管理器有点愚蠢。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T15:15:58.417

使用 iphone-exif：[http ://code.google.com/p/iphone-exif/](http://code.google.com/p/iphone-exif/)

```
#import "EXFJpeg.h"

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editingInfo {
    NSLog(@"image picked %@ with info %@", image, editingInfo);
    NSData* jpegData = UIImageJPEGRepresentation (image,0.5);
    EXFJpeg* jpegScanner = [[EXFJpeg alloc] init];
    [jpegScanner scanImageData: jpegData];
    EXFMetaData* exifData = jpegScanner.exifMetaData;
    EXFJFIF* jfif = jpegScanner.jfif;
    EXFTag* tagDefinition = [exifData tagDefinition: [NSNumber numberWithInt:EXIF_DateTime]];
    //EXFTag* latitudeDef = [exifData tagDefinition: [NSNumber numberWithInt:EXIF_GPSLatitude]];
    //EXFTag* longitudeDef = [exifData tagDefinition: [NSNumber numberWithInt:EXIF_GPSLongitude]];
    id latitudeValue = [exifData tagValue:[NSNumber numberWithInt:EXIF_GPSLatitude]];
    id longitudeValue = [exifData tagValue:[NSNumber numberWithInt:EXIF_GPSLongitude]];
    id datetime = [exifData tagValue:[NSNumber numberWithInt:EXIF_DateTime]];
    id t = [exifData tagValue:[NSNumber numberWithInt:EXIF_Model]];
....
.... 
```

# php - CodeIgniter 中库的实例数组

> ID：10300348
> 
> 赞同：-1
> 
> 时间：2012-04-24T14:46:34.680
> 
> 标签：php, arrays, codeigniter

`Student`在 CodeIgniter 中加载某种库（比如说）之后，如何构造它的实例数组？据我所知，在使用加载`student`库后，`$this->load->library('student');` 我可以`student`使用`$this->student` . 这是我的问题，我需要一个数组，我该`student`怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:56:48.453

在您的库文件中

```
 function get_student_list()
 {
      // $uqery = SQL query to get the students - or a call to your model to get them

      return $query;
 } 
```

然后在你的控制器中

```
 $list = $this->student->get_student_list(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T22:38:40.883

您应该真正使用模型而不是库。**库**用于扩展 CodeIgniter 的功能。**模型**让您与数据交互；学生在这种情况下。使用库来获取您的数据并对其进行实例化是在自取其辱。

在您的`Student_model`中，您可以放置​​获取数据的函数（从数据库或任何地方）：

```
function get_students() {
    // Returns an array or object of all students and their info
}

function get($student_id) {
    // Returns a single student's information
}

// Additional CRUD functions, if desired. 
```

此外，我建议再看看：

*   [http://ellislab.com/codeigniter/user-guide/overview/mvc.html](http://ellislab.com/codeigniter/user-guide/overview/mvc.html)
*   [http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)

# facebook - facebook like button (box_count) like count 与 Graph API 不同

> ID：10300350
> 
> 赞同：1
> 
> 时间：2012-04-24T14:46:36.060
> 
> 标签：facebook, html, facebook-graph-api, facebook-social-plugins

我在页面上的几篇文章中使用了like button box_count 样式，并通过Graph API 获取了like 计数以供进一步使用。问题是我页面上的“赞”按钮显示 7 个赞，但是当我在 Graph API 中输入完全相同的 URL 时，它根本没有列出任何赞。

这只发生在我的一些文章中，而不是全部。 [https://graph.facebook.com/?ids=http://www.example_url.de](https://graph.facebook.com/?ids=http://www.example_url.de) -> 没有分享/喜欢（实际上API在这里只列出了ID，没有别的）但是[http://www.example_url。在点赞按钮工具中输入的de](http://www.example_url.de)表示 7 个赞。这个怎么可能？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T03:09:39.737

肖恩是对的。洞察[文件](https://developers.facebook.com/docs/insights/)说...

> 为什么我的“赞”按钮旁边的计数与我在 Insights 中看到的不匹配？Like 按钮旁边的计数表示 Like 按钮点击次数、News Feed 喜欢、News Feed 评论和 Facebook 上的分享的总和。

您可以使用下面的 FQL 查询来检查实数。

> 选择 normalized_url、like_count、share_count、total_count、comment_count、commentsbox_count FROM link_stat WHERE url ='URL'

```
[
  {
    "normalized_url": "URL",
    "like_count": 64,
    "share_count": 17,
    "total_count": 83,
    "comment_count": 2,
    "commentsbox_count": 1
  }
 ] 
```

like_count 表示喜欢的数量，total_count 是他们在喜欢按钮周围显示的数量。[此处](https://developers.facebook.com/docs/reference/fql/link_stat/)描述了每个字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T23:10:02.453

点赞按钮通常不仅仅代表来自用户点击的点赞，它还包括分享次数、发送次数、标记次数等：因此这个数字通常与图形 api 中的用户点赞对象数不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T14:32:30.227

好的，数字不同，但仍然存在问题。

我目前有一个在按钮上显示**119 个**赞的页面，FQL 给了我：

```
{
  "data": [
    {
      "normalized_url": "http://wesleydesouza.com.br/prefixo9/", 
      "like_count": 80, 
      "share_count": 23, 
      "total_count": 119, 
      "comment_count": 16, 
      "commentsbox_count": 0
    }
  ]
} 
```

所以，你可以说 Graph 应该只显示 80 个，但它只显示**13 个**赞：

```
{
   "id": "415948168442690",
   "name": "Prefixo 9",
   "picture": "http://profile.ak.fbcdn.net/hprofile-ak-snc4/372843_415948168442690_618178971_s.jpg",
   "link": "http://wesleydesouza.com.br/prefixo9/",
   "likes": 13,
   "category": "Website",
   "is_published": true,
   "description": "Adicione o nono d\u00edgito de celular de S\u00e3o Paulo aos seus contatos do Google. R\u00e1pido. F\u00e1cil. Gr\u00e1tis.",
   "about": "Adicione o nono d\u00edgito de celular de S\u00e3o Paulo aos seus contatos do Google. R\u00e1pido. F\u00e1cil. Gr\u00e1tis."
} 
```

这反映在 Facebook 的页面管理中，也只显示了 13 个赞。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-25T02:36:52.600

您页面上的“赞”按钮必须使用与您期望的略有不同的 URL。

域[http://www.example_url.de](http://www.example_url.de)和[http://www.example_url.de/](http://www.example_url.de/)在 facebook 眼中是不同的。像 url 末尾的正斜杠“/”这样微不足道的东西可以使一切变得不同。

我猜这就是问题所在。

# iphone - 如何放大地图图块而不是绘制下一个缩放级别

> ID：10300352
> 
> 赞同：4
> 
> 时间：2012-04-24T14:46:38.757
> 
> 标签：iphone, mkmapview, openstreetmap

我一直在使用[此代码](https://github.com/mtigas/iOS-MapLayerDemo)在我的应用程序上显示`OpenCycleMap`图块`mapview`，但如果我放大得太远，地图图块将消失。由于`OCM`图块可能不存在于缩小的缩放级别（例如，对于某个区域，15 或 16），因此在为某个缩放级别绘制地图时它们不会出现，并且地图视图仅显示位于下方的 Google 街道地图`OCM`覆盖。

有没有办法编辑代码以使地图视图显示一个区域可用的任何地图图块，但为地图视图显示的区域调整大小？

# iphone - NSURLRequest : 发布数据并读取发布的页面

> ID：10300353
> 
> 赞同：18
> 
> 时间：2012-04-24T14:46:38.927
> 
> 标签：iphone, objective-c, ios, request, nsurlrequest

在 iOS（当前目标 5.0，Base SDK 5.1）中，如何向服务器发送发布请求，然后读取页面内容。例如，页面采用用户名和密码，然后回显 true 或 false。这只是为了更好地理解 NSURLRequest。

提前致谢！

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-04-24T16:10:16.317

先说几件事

*   决定如何对数据进行编码 - JSON 或 url 编码是一个好的开始。
*   决定一个返回值——它是 1、TRUE 还是 0、FALSE，甚至是 YES/non-nil nothing/nil。
*   阅读[URL 加载系统](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html#//apple_ref/doc/uid/20001836-BAJEAIEE)，这是你的朋友。

旨在使您的所有 url 连接异步，以便您的 UI 保持响应。您可以使用 NSURLConnectionDelegate 回调来做到这一点。NSURLConnection 有个小缺点：你的代码必须解耦。您希望在委托函数中可用的任何变量都需要保存到 ivars 或您请求的 userInfo 字典中。

或者，您可以使用 GCD，它与 __block 限定符结合使用时，允许您在声明它的点指定错误/返回代码 - 对于一次性提取很有用。

事不宜迟，这是一个快速而肮脏的 url 编码器：

```
- (NSData*)encodeDictionary:(NSDictionary*)dictionary {
      NSMutableArray *parts = [[NSMutableArray alloc] init];
      for (NSString *key in dictionary) {
        NSString *encodedValue = [[dictionary objectForKey:key] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
        NSString *encodedKey = [key stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
        NSString *part = [NSString stringWithFormat: @"%@=%@", encodedKey, encodedValue];
        [parts addObject:part];
      }
      NSString *encodedDictionary = [parts componentsJoinedByString:@"&"];
      return [encodedDictionary dataUsingEncoding:NSUTF8StringEncoding];
    } 
```

使用[JSONKit 之](https://github.com/johnezang/JSONKit)类的 JSON 库可以更轻松地进行编码，考虑一下！

## 方法 1 - NSURLConnectionDelegate 异步回调：

```
// .h
@interface ViewController : UIViewController<NSURLConnectionDelegate>
@end

// .m
@interface ViewController () {
  NSMutableData *receivedData_;
}
@end

...

- (IBAction)asyncButtonPushed:(id)sender {
  NSURL *url = [NSURL URLWithString:@"http://localhost/"];
  NSDictionary *postDict = [NSDictionary dictionaryWithObjectsAndKeys:@"user", @"username", 
                            @"password", @"password", nil];
  NSData *postData = [self encodeDictionary:postDict];

  // Create the request
  NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
  [request setHTTPMethod:@"POST"];
  [request setValue:[NSString stringWithFormat:@"%d", postData.length] forHTTPHeaderField:@"Content-Length"];
  [request setValue:@"application/x-www-form-urlencoded charset=utf-8" forHTTPHeaderField:@"Content-Type"];
  [request setHTTPBody:postData];

  NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request 
                                                                delegate:self];

  [connection start];  
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
  [receivedData_ setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data { 
  [receivedData_ appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
  NSLog(@"Succeeded! Received %d bytes of data", [receivedData_ length]);
  NSString *responeString = [[NSString alloc] initWithData:receivedData_
                                                  encoding:NSUTF8StringEncoding];
  // Assume lowercase 
  if ([responeString isEqualToString:@"true"]) {
    // Deal with true
    return;
  }    
  // Deal with an error
} 
```

## 方法 2 - Grand Central Dispatch 异步功能：

```
// .m
- (IBAction)dispatchButtonPushed:(id)sender {

  NSURL *url = [NSURL URLWithString:@"http://www.apple.com/"];
  NSDictionary *postDict = [NSDictionary dictionaryWithObjectsAndKeys:@"user", @"username", 
                            @"password", @"password", nil];
  NSData *postData = [self encodeDictionary:postDict];

  // Create the request
  NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
  [request setHTTPMethod:@"POST"];
  [request setValue:[NSString stringWithFormat:@"%d", postData.length] forHTTPHeaderField:@"Content-Length"];
  [request setValue:@"application/x-www-form-urlencoded charset=utf-8" forHTTPHeaderField:@"Content-Type"];
  [request setHTTPBody:postData];

  dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    // Peform the request
    NSURLResponse *response;
    NSError *error = nil;
    NSData *receivedData = [NSURLConnection sendSynchronousRequest:request  
                                           returningResponse:&response
                                                       error:&error];    
    if (error) {
      // Deal with your error
      if ([response isKindOfClass:[NSHTTPURLResponse class]]) {
        NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse*)response;
        NSLog(@"HTTP Error: %d %@", httpResponse.statusCode, error);
        return;
      }
      NSLog(@"Error %@", error);
      return;
    }

    NSString *responeString = [[NSString alloc] initWithData:receivedData
                                                    encoding:NSUTF8StringEncoding];
    // Assume lowercase 
    if ([responeString isEqualToString:@"true"]) {
      // Deal with true
      return;
    }    
    // Deal with an error

    // When dealing with UI updates, they must be run on the main queue, ie:
    //      dispatch_async(dispatch_get_main_queue(), ^(void){
    //      
    //      });
  }); 
} 
```

## 方法 3 - 使用 NSURLConnection 便利功能

```
+ (void)sendAsynchronousRequest:(NSURLRequest *)request queue:(NSOperationQueue *)queue completionHandler:(void (^)(NSURLResponse*, NSData*, NSError*))handler 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T15:07:54.690

```
 NSData *postData = [someStringToPost dataUsingEncoding:NSUTF8StringEncoding];

  NSURL *url = [NSURL URLWithString:someURLString];
  NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];
  [req setHTTPMethod:@"POST"];
  [req setValue:[NSString stringWithFormat:@"%d", postData.length] forHTTPHeaderField:@"Content-Length"];
  [req setValue:@"application/x-www-form-urlencoded charset=utf-8" forHTTPHeaderField:@"Content-Type"];
  [req setHTTPBody:postData];

  NSError *err = nil;
  NSHTTPURLResponse *res = nil;
  NSData *retData = [NSURLConnection sendSynchronousRequest:req returningResponse:&res error:&err];
  if (err)
  {
    //handle error
  }
  else
  {
    //handle response and returning data
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-02T16:13:42.917

对于您的目的，这个项目可能非常方便。它将处理您的下载并将其存储在本地。查看链接[https://github.com/amitgowda/AGInternetHandler](https://github.com/amitgowda/AGInternetHandler)

# c# - 出现错误“附加信息：引用未声明的实体 'acirc'。第 3325 行，位置 145。”

> ID：10300355
> 
> 赞同：0
> 
> 时间：2012-04-24T14:46:53.343
> 
> 标签：c#, .net

我正在使用以下代码来读取实时 xml url。

```
 XmlDataDocument xmlDoc = new XmlDataDocument();

 xmlDoc.Load("http://deluxecomm.com.au/feed.php"); 
```

我收到以下错误消息“附加信息：引用未声明的实体 'acirc'。第 3325 行，位置 145。”

我在这里做错了什么！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:49:02.000

您正在尝试将 HTML 读入 XML 数据文档。HTML 不是 XML。它们都是标记语言，但两者不可互换。

您应该考虑使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)

# c - 选择排序程序产生不正确的输出

> ID：10300357
> 
> 赞同：1
> 
> 时间：2012-04-24T14:46:57.557
> 
> 标签：c, arrays, sorting

我正在尝试用 C 编写一个简单的程序来实现[选择排序](http://en.wikipedia.org/wiki/Selection_sort)。

下面是我的程序：

```
#include<stdio.h>
#include<conio.h>

int main(void)
{
  int min, total, *arr,i,j,temp;

  clrscr();
  printf("Enter the size of array : ");
  scanf("%d",&total);
  arr = (int *) malloc(total * sizeof(int));

  for(i = 0; i<total; i++)
  {
    printf("\nEnter element %d: ", i+1);
    scanf("%d", &arr[i]);
  }

  min = arr[0];
  for(i = 0; i<total; i++)
  {
    for(j = i; j<total; j++)
    {
      if(arr[j]<min)
      { min=arr[j]; }
    }

    min = temp;
    min = arr[i];
    arr[i] = min;
  }

  for(i = 0; i<total; i++)
  {
    printf("%d \t", arr[i]);
  }

  getch();
  return 0;
} 
```

输出：

![在此处输入图像描述](../Images/2d50a704eb35ff818583c151f72fdfd3.png)

答案应该是

10 20 30 40 70 80

如何修复我的程序？

**编辑1：**

阅读 cnicutar 的答案后修复了 Temp 问题

```
 min = arr[0];
  for(i = 0; i<total; i++)
  {
    for(j = i; j<total; j++)
    {
      if(arr[j]<min)
      { 
    min=arr[j]; 
    min_index = j;
      }
    }

       temp = a[i];
       a[i] = min;
       a[min_index] = temp;
  } 
```

现在，我得到了上述输入值：10 10 10 20 10 10

**编辑2：**

发现问题，程序对所有迭代使用相同的最小值

```
#include<stdio.h>
#include<conio.h>

int main(void)
{
  int min, min_index, total, *arr,i,j,temp;

  clrscr();
  printf("Enter the size of array : ");
  scanf("%d",&total);
  arr = (int *) malloc(total * sizeof(int));

  for(i = 0; i<total; i++)
  {
    printf("\nEnter element %d: ", i+1);
    scanf("%d", &arr[i]);
  }

  min = arr[0];               //           min = arr[0] = 70              ||   min = 10     <-- Problem          
  for(i = 0; i<total-1; i++)  //           i = 0                          ||                 
  {                           //                                          ||
    for(j = i; j<total; j++)  //           j = i = 0                      ||                
    {                         //                                          ||                          
      if(arr[j]<min)          //           30<70     ; 40<30 ; 10<30      ||                                   
      {                       //                                          ||
    min=arr[j];               //           min = 30  ;       ; min = 10   ||                                            
    min_index = j;            //           index = 1 ;       ; index = 3  ||                                                                    
      }                       //                                          ||
    }                         //                                          ||
                              //                                          ||
    if(min!=arr[i])           //                                          ||
    {                         //                                          ||
       temp = arr[i];         //                                          ||
       arr[i] = min;          //                                          ||
       arr[min_index] = temp; //     After swap:     10 30 40 70 80 20    ||
    }
    min = arr[i+1];           // (Add this to fix the problem)  
  }

  for(i = 0; i<total; i++)
  {
    printf("%d \t", arr[i]);
  }

  getch();
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:51:02.730

至少有两个问题：你的“交换”是错误的：

> ```
> min = temp;
> min = arr[i];
> arr[i] = min; 
> ```

你应该记住最小元素的索引，改变是`min`不行的。`arr[mystery]`具体来说：您想`mystery = j`更改`if`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:54:24.000

这不应该是

```
for(j = i+1; j<total; j++)
{ 
```

如果没有 i+1，您将遍历已排序的值。

# big-o - 具有 f(n) 成本的运算的算法复杂度

> ID：10300362
> 
> 赞同：0
> 
> 时间：2012-04-24T14:47:14.080
> 
> 标签：big-o

如果我需要确定具有给定函数设置的成本的过程的算法复杂性，这只是给出 O(n^2 log n) 的问题 - 还是大 O 碰巧是什么？

另外，不是大 O 只是多项式中任何项的最高阶吗？如果要求我提供推导，我不确定要提供什么，因为这似乎有点微不足道。

最后一个问题，如果我需要给出算法的操作计数，这真的很简单——大致就像

```
array1, array2, array3 of size n 
for i in n:
    array2[i] = sqrt(array1[i])
    array3[i] = array1[i]^2 
```

对于“操作计数”，我只是计算我所有的算术运算并找出哪些（如 sqrt）算作多个操作，等等......或者我可以写它是 O(n) 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T21:28:50.907

流程的算法成本是流程所有组件的成本。例如，使用您的示例，我们可以分解所有事物的成本

```
array1, array2, array3 of size n 
```

每个数组需要 n 时间，所以总共需要 3n 时间，在 O(n) 中。

```
for i in n: 
```

这意味着循环中的所有内容都乘以 n。

```
array2[i] = sqrt(array1[i]) 
```

这需要 O(1) 时间。为什么？访问数组元素是常数时间。取 sqrt 是常数时间。并且设置数组元素的值是常数时间。所以整个操作是常数时间。

```
array3[i] = array1[i] ^ 2 
```

这需要 O(1) 时间，原因与前面的操作相同。

所以整个运行时间是 3n + n * ( 1 + 1) （这里使用粗略的数学，不精确），这只是 O(n) 时间。这有帮助吗？

至于实际推导，有专门的技术。你学习过大哦符号的精确数学定义吗？

[这个链接](http://en.wikipedia.org/wiki/Big_oh)描述了大哦符号的正式定义，并提供了一个如何证明这些东西的例子。

# jquery - Jquery Delegate 未绑定到动态创建的元素

> ID：10300364
> 
> 赞同：0
> 
> 时间：2012-04-24T14:47:18.350
> 
> 标签：jquery, android, delegates, touch, live

我正在开发一个具有动态创建元素的 Phonegap 应用程序。该应用程序可以在[这里](http://www.ab-mobile-apps.com/app/hapman/test2/index.html#build)看到 当用户单击手风琴菜单以显示元素选择时创建元素。然后，用户可以通过单击菜单中的图像来选择要添加到布局的新元素。浏览器会提醒一个新元素将被插入一个标有新元素的 div 中。

这是踢球者，我正在使用 jQuery touch 插件来将新创建的元素拖放到屏幕上。当新元素被创建时，一个 class="touchMove" 被添加到元素中。问题是我似乎无法让触摸功能绑定到新元素。

我尝试过 live()、delegate() 和 on()。我可以获得一个点击事件来绑定并在点击时显示一个警告框，但我无法让触摸事件绑定到新元素。我添加了单击以进行测试。如果我将其更改为“触摸”，我什么也得不到，也许是因为它正在寻找要为函数定义的参数。身份证！

```
$('#newElement').delegate("img","click",function(){
                           // alert('I was clicked');
                            $(this).touch({
                                            animate: false,
                                            sticky: false,
                                            dragx: true,
                                            dragy: true,
                                            rotate: false,
                                            resort: true,
                                            scale: false
                                            });

                            }); 
```

同样，如果我取消注释警报功能并注释掉触摸功能，警报就会起作用。如果我注释掉警报并取消注释触摸功能，则不会发生任何事情。在此过程中，我看不到任何错误。

页面上的三个元素在使用此功能加载页面时可以很好地接收触摸功能

```
$('.touchMove').touch({
                           animate: false,
                           sticky: false,
                           dragx: true,
                           dragy: true,
                           rotate: false,
                           resort: true,
                           scale: false
                           }); 
```

“#2 Touch Me :)”元素工作正常。我正在尝试添加类（工作正常的“touchMove”），并使用该类将触摸功能附加到新元素。

顺便说一句，触摸功能仅在设备（Android、iPad）上运行，因此如果您在实际的计算机浏览器中查看它，触摸事件将不起作用。

对此问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:53:30.517

为什么不使用

```
//start to touch
$("body").on("touchstart mousedown","#newElement",function(e){
    alert("you started to touch");
});

//moving
$("body").on("touchmove mousemove","#newElement",function(e){
    alert("you moved");
});

//finished touching
$("body").on("touchstop mouseup","#newElement",function(e){
    alert("you stopped touching");
}); 
```

您需要使用 'live' 或 'on' 因为所有事件都在文档加载时绑定，因此任何绑定到在初始加载后添加到 dom 的对象的新事件都需要包含在回调中或与 jquery 绑定活”或“开”。

您还可以包含鼠标事件，以便在没有可用触摸屏时也可以使用功能。

# text - Aspose.Words...以像素为单位计算文本宽度

> ID：10300365
> 
> 赞同：0
> 
> 时间：2012-04-24T14:47:27.603
> 
> 标签：text, alignment, words, aspose

我有一个 MVC3 C# .Net Web 应用程序。我正在使用 Aspose.Words 创建一个 MS Word 文档。我要求不在文档中包含表格。但是，在文档的几行中，文本的对齐方式会根据文本的宽度不对齐。
例如：

这看起来不错

```
Proposal Name: My Proposal         Date:04/24/2012 
```

这不

```
Proposal Name: My Prop         Date:04/24/2012 
```

它应该是

```
Proposal Name: My Prop             Date:04/24/2012 
```

根据文本第一位的宽度，我需要以像素为单位计算宽度（我认为）并在必要时插入一个 TAB。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T11:38:17.163

您可以使用 Graphics.MeasureString 函数，该函数根据您的字体为您提供字符串的宽度（以像素为单位）。欲了解更多信息，请[点击此处](http://msdn.microsoft.com/en-us/library/6xe5hazb.aspx)

干杯，

厄桑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-27T00:32:10.507

下面的代码示例返回当前实体相对于页面左上角的边界矩形。

```
Document doc = new Document(MyDir + "in.docx");

LayoutCollector layoutCollector = new LayoutCollector(doc);
LayoutEnumerator layoutEnumerator = new LayoutEnumerator(doc);

foreach (Paragraph para in doc.GetChildNodes(NodeType.Paragraph, true))
{
    var renderObject = layoutCollector.GetEntity(para);
    layoutEnumerator.Current = renderObject;
    RectangleF location = layoutEnumerator.Rectangle;
    Console.WriteLine(location);
} 
```

来源：[https ://www.aspose.com/community/forums/thread/541215/replace-run-text-with-string-of-spaces-of-same-pixel-length.aspx](https://www.aspose.com/community/forums/thread/541215/replace-run-text-with-string-of-spaces-of-same-pixel-length.aspx)

# android - 在 Android 中以编程方式添加视图后丢失 EditText 样式

> ID：10300367
> 
> 赞同：2
> 
> 时间：2012-04-24T14:47:34.680
> 
> 标签：android, android-edittext, viewflipper

我有一个名为向导的布局，其中有一个空的 ViewFlipper。

我还有其他包含此“向导”的视图，并以编程方式将子级添加到向导内的 ViewFlipper。我遇到的问题是其中一个孩子有一个 EditText，这个视图失去了它的默认样式。我尝试在 xml 文件中设置所有内容并且问题消失了，所以问题在于以编程方式添加视图。我还尝试在主容器上调用 invalidate() （在下面的代码中：）`@+id/recarga_celular_main`，但没有任何反应。编辑文本可以在以下链接中看到：[EditText 奇怪的样式问题](http://i42.tinypic.com/35cn15g.png)

视图是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/recarga_celular_main"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/theme_home_background"
    android:gravity="center_horizontal|top" >
...

    <CustomWizard
        android:id="@+id/recargaCelular_wizard"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="top"
        android:background="@drawable/theme_layer_blue_bottom_black"
        android:gravity="center_horizontal|center_vertical"  >

    </CustomWizard>
...

</RelativeLayout> 
```

“向导”类似于：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/touch_wizard_main_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@android:color/transparent"
    android:gravity="center|top"
    android:orientation="vertical" >

...

        <ViewFlipper
            android:id="@+id/wizard_flipper"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_above="@+id/aceptar_limpiar_btns"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true" />
...

</LinearLayout> 
```

在 java 代码中，首先我将视图添加到翻转器，然后显示所需的子项：

```
flipper.addView(step.getView(), flipper.getChildCount() - 1);
...
flipper.setDisplayedChild(index); 
```

**编辑**

手动设置默认的 EditText 样式：

```
<EditText
 style="@style/some_style"
 android:background="@android:drawable/edit_text" 
 android:gravity="left"
 android:hint="Celular" /> 
```

# java - 替换位置 SESSION_MANAGEMENT_FILTER 的默认过滤器

> ID：10300369
> 
> 赞同：1
> 
> 时间：2012-04-24T14:47:42.417
> 
> 标签：java, spring, spring-security, servlet-filters

我想`SessionManagementFilter`用我自己的替换默认值，但我遇到了这个

`17:31:32,901 ERROR [[/accounts]] Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Filter beans '<accountsSessionManageFilter>' and 'Root bean: class [org.springframework.security.web.session.SessionManagementFilter]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null' have the same 'order' value. When using custom filters, please make sure the positions do not conflict with default filters. Alternatively you can disable the default filters by removing the corresponding child elements from <http> and avoiding the use of <http auto-config='true'>. Offending resource: ServletContext resource [/WEB-INF/spring-contexts/security.xml]`

问题似乎是我正在使用`<http>`将默认过滤器设置在同一位置的元素/属性。然而，我不是（或者如果我是无意的）。

这是我的安全上下文`<http>`定义：

```
<http use-expressions="true" auto-config="false" entry-point-ref="loginUrlAuthenticationEntryPoint">

    <!-- lots of intercept-url definitions (nothing else) -->

    <custom-filter position="SESSION_MANAGEMENT_FILTER" ref="accountsSessionManageFilter"/>
    <custom-filter position="FORM_LOGIN_FILTER" ref="accountsSsoFilter"/>
</http>

.......

<beans:bean id="accountsSessionManageFilter" class="org.springframework.security.web.session.SessionManagementFilter">
    <beans:property name="sessionAuthenticationStrategy" ref="NullAuthenticatedSessionStrategy"/>
</beans:bean>

.......

<bean id="accountsSsoFilter" class="cayetano.core.base.service.impl.spring.filter.SsoUserPassAuthFilter">
    <property name="authenticationManager" ref="ssoAuthManager" />

    <property name="authenticationFailureHandler" ref="relativeLoginFailureHandler" />
    <property name="authenticationSuccessHandler" ref="noopLoginSuccessHandler" />

    <property name="authenticationService" ref="basicAuthenticatorService" />
    <property name="authorityService" ref="userTypeBasedAuthotiryService" />
</bean> 
```

那么为什么 Spring 抱怨我使用了一个`<http>`使用默认过滤器的元素呢？

文档还指出这`<session-management>`是唯一`<http>`使用默认过滤器的元素，还有其他元素吗？

我正在使用 Spring Security 3.0。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T15:52:14.480

如果您尝试指定 a`custom SESSION_MANAGEMENT_FILTER`以便可以更改`sessionAuthenticationStrategy`默认类/实例的，只需[使用`session-authentication-strategy-ref`属性](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/session-mgmt.html#d0e4412)：

```
<http ...>
    <session-management session-authentication-strategy-ref="NullAuthenticatedSessionStrategy"/>
</http> 
```

这当然假设这`NullAuthenticatedSessionStrategy`是在上下文中定义的另一个 bean。由于这也是 Spring Security 中的一个类的名称，我认为您真正想要的是：

```
<http ...>
    <session-management session-authentication-strategy-ref="sessionStrategy"/>
</http>

<bean id="sessionStrategy" class="org.springframework.security.web.authentication.session.NullAuthenticatedSessionStrategy"/> 
```

# wpf - SQL Server CE 上的实体框架，无需安装驱动程序

> ID：10300373
> 
> 赞同：2
> 
> 时间：2012-04-24T14:47:44.887
> 
> 标签：wpf, entity-framework-4, sql-server-ce

我正在使用 Entity Framework 4 和 SQL Server CE 数据库 3.5 开发 WPF 应用程序，它工作正常。

但是，我想让这个应用程序在安装了 .Net Framework 4 但没有`SQL Server Compact 3.5`驱动程序的机器上运行。而且没有安装程序。是否可以？

我尝试了以下方法：

1.  在 app.config 中创建一个部分

    ```
    <configuration>
       <connectionStrings>
          <add name="DbEntities" 
               connectionString="metadata=res://*/Model.Model1.csdl|res://*/Model.Model1.ssdl|res://*/Model.Model1.msl;provider=System.Data.SqlServerCe.3.5;provider connection string=&quot;Data Source=|DataDirectory|\Data\Database1.sdf&quot;" 
               providerName="System.Data.EntityClient"/>
       </connectionStrings>
       <system.data>
          <DbProviderFactories>
              <add name="SQL Server Compact Edition Data Provider" 
                   invariant="System.Data.SqlServerCe" 
                   description=".NET Framework Data Provider for Microsoft SQL Server Compact Edition" 
                   type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=9.0.242.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/>
          </DbProviderFactories>
       </system.data>
    </configuration> 
    ```

2.  添加引用`System.Data.SqlServerCe`并`System.Data.SqlServerCe.Entity`允许本地复制

3.  构建应用程序并将其复制到未安装 SQL Server CE 驱动程序的机器上。在创建数据上下文时，我不断收到此错误：

> System.ArgumentException：在配置中找不到指定的商店提供程序，或者无效。--->
> System.ArgumentException：找不到请求的 .Net Framework 数据提供程序。它可能没有安装。

我在浪费时间吗？还是我应该切换到 SQLite？

谢谢！

**编辑：**

感谢 josemiguel.torres 的回答，我查看了[这篇文章](http://blogs.msdn.com/b/stevelasker/archive/2008/10/22/privately-deploying-sql-server-compact-with-the-ado-net-entity-provider.aspx)，详细介绍了如何实现这一点。但是，我仍然有一个装配错误。

```
"System.IO.FileLoadException: Could not load file or assembly 'System.Data.SqlServerCe, Version=3.5.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference.
(Exception from HRESULT: 0x80131040)" 
```

所以我看了一下[这篇](http://blogs.msdn.com/b/sqlservercompact/archive/2010/05/12/troubleshooting-problem-with-private-deployment-of-sql-server-compact-3-5sp2-entity-dll.aspx)解释如何解决这个问题的帖子。添加一些程序集绑定后：

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="System.Data.SqlServerCe" publicKeyToken="89845dcd8080cc91" culture="neutral"/>
      <bindingRedirect oldVersion="3.5.1.0-3.5.1.50" newVersion="3.5.1.50"/>
    </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

它仍然不起作用......：| 错误信息类似：

```
System.IO.FileLoadException: Could not load file or assembly 'System.Data.SqlServerCe, Version=3.5.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040) 
```

文件名：'System.Data.SqlServerCe，版本=3.5.0.0，Culture=neutral，PublicKeyToken=89845dcd8080cc91'

我没办法了。任何人？

**编辑2：**

1.我已经从我的机器上卸载了所有的微软“SQL Server Compact Edition”版本。

2.我检查了 machine.config 版本：在 DbProviderFactories 部分中没有条目。

[3.我从那里](http://www.microsoft.com/download/en/details.aspx?id=5783)下载了 3.5 SP2 驱动程序并安装了 x86 包。

4.我检查了我的 machine.config (v4 x86)，并在 DbProviderFactories 节点下创建了以下条目：

```
<add name="Microsoft SQL Server Compact Data Provider" invariant="System.Data.SqlServerCe.3.5" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=3.5.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"/> 
```

为什么是 3.5.0.0 而不是 3.5.1.50？？？

以防万一：我的开发机器在 Win7 x64 上，目标机器是 WinXP x86。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T12:12:16.673

安装3.5 SP2，修改app.config如下：

```
<?xml version="1.0"?>
<configuration>
  <connectionStrings>
    <add name="ChinookEntities" connectionString="metadata=res://*/Chinook.csdl|res://*/Chinook.ssdl|res://*/Chinook.msl;provider=System.Data.SqlServerCe.3.5;provider connection string=&quot;Data Source=C:\Users\erik.COMMENTOR\Documents\Visual Studio 2010\Projects\SqlCeTest\Chinook.sdf&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
  <system.data>
    <DbProviderFactories>
      <remove invariant="System.Data.SqlServerCe.3.5" />
      <add name="Microsoft SQL Server Compact Data Provider 3.5" invariant="System.Data.SqlServerCe.3.5" description=".NET Framework Data Provider for Microsoft SQL Server Compact" type="System.Data.SqlServerCe.SqlCeProviderFactory, System.Data.SqlServerCe, Version=3.5.1.50, Culture=neutral, PublicKeyToken=89845dcd8080cc91" />
    </DbProviderFactories>
  </system.data>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly xmlns="">
        <assemblyIdentity name="System.Data.SqlServerCe" publicKeyToken="89845dcd8080cc91" culture="neutral" />
        <bindingRedirect oldVersion="3.5.1.0-3.5.1.50" newVersion="3.5.1.50" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

确保使用 C:\Program Files (x86)\Microsoft SQL Server Compact Edition\v3.5\Private 文件夹中的 System.Data.SqlServerCe.dll 和 System.Data.SqlServerCe.Entity.dll

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T14:58:43.877

我放弃了 SQL CE 3.5 并切换到 4.0。它工作正常，感谢[这篇文章](http://erikej.blogspot.fr/2011/02/using-sql-server-compact-40-with.html)。谢谢埃里克；）

# sql - 对于出现在三个表中的字段，哪个是合理的：枚举还是表？

> ID：10300376
> 
> 赞同：0
> 
> 时间：2012-04-24T14:47:57.807
> 
> 标签：sql

我有一个应该包含研讨会的地方。可以举办研讨会：

*   内部
*   在另一个城市
*   在另一个国家

起初，我只有一个表，所以我使用了枚举。但是现在我有三个无法合并的表，它们都应该有这些信息，客户希望这个字段可以自定义，以便将来添加或删除选项。但是他们说选项的数量是有限的，可能是 5 个左右。

现在，我的问题是，我应该为这个字段使用枚举还是表格？更重要的是，在枚举或表之间做出决定的正确方法是什么？

PS：枚举字段是从数据库中动态检索的，它们没有嵌入到代码中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:12:55.110

作为一般经验法则，在应用程序中，在以下情况下使用枚举：

1.  你的价值观很少改变，并且
2.  只有几个值。

在以下情况下使用查找表：

1.  值经常变化，或
2.  您的客户希望能够实时添加、更改或删除值，或者
3.  有很多价值观。

如果满足枚举的先前标准并且：

1.  您需要能够使用应用程序外部的工具来报告数据，或者
2.  您认为以后可能需要消除枚举以支持纯查找表方法。

您需要为截止点的值数量选择您认为合理的截止值，我经常听到建议在 10 到 15 之间。

如果您使用数据库引擎提供的枚举构造，则前两组规则仍然适用。

在您的具体情况下，我会使用查找表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:53:02.183

如果在这种情况下元素是固定的，则应使用枚举，如果是可变数据，则`enum`不应使用。在那些情况下`table`是更优选的。

我认为在你的情况下表应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-13T10:23:50.897

我同意关于枚举精简、稍微快一点并在合理使用时降低数据库复杂性的最佳答案（即没有大量且快速变化的值）。

但是：有一些巨大的警告需要考虑：

*   ENUM 数据类型不是标准的 SQL，除了 MySQL 之外，没有多少其他 DBMS 对它有原生支持。PostgreSQL、MariaDB 和 Drizzle（后两者无论如何都是 MySQL 的分支）是我所知道的仅有的三个。如果您或其他人想要将您的数据库移动到另一个系统，那么有人将不得不在迁移过程中添加更多步骤来处理您所有聪明的 ENUM。（来源和更多观点[http://komlenic.com/244/8-reasons-why-mysqls-enum-data-type-is-evil/](http://komlenic.com/244/8-reasons-why-mysqls-enum-data-type-is-evil/)）
*   [大多数 ORM（例如Doctrine](http://www.doctrine-project.org/)）不支持 ENUMS，因为它们不是 SQL 标准。因此，如果您考虑在您的项目中使用 ORM，甚至使用某些东西作为[Doctrine Migrations Bundle](http://symfony.com/doc/current/bundles/DoctrineMigrationsBundle/index.html) ，您最终可能会编写一个复杂的扩展包（我已经尝试过）或使用现有的类似[Postgresql](https://github.com/fre5h/DoctrineEnumBundle)的扩展包甚至不能为枚举添加更多的伪支持：通过将枚举视为带有检查约束的字符串类型。一个例子：

    CREATE TABLE test (id SERIAL NOT NULL, pseudo_enum_type VARCHAR(255) CHECK(pseudo_enum_type IN ('value1', 'value2', 'value3')) , ...

因此，在更复杂的设置中使用 Enums 的收益确实低于零。

说真的：如果我不是绝对必须（而且我没有），我总是会避免在数据库中使用枚举。

# java - 计划开始使用代码覆盖工具

> ID：10300380
> 
> 赞同：2
> 
> 时间：2012-04-24T14:48:12.107
> 
> 标签：java, code-coverage

寻找实际讨论用 Java 编写代码覆盖工具的书籍或其他参考资料；一些不同的技术或技巧 - 源代码与字节码检测。这是一种在底层生成 java 字节码的脚本语言。

任何帮助都会提前感谢。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:50:20.233

[请参阅http://www.semanticdesigns.com/Company/Publications/TestCoverage.pdf](http://www.semanticdesigns.com/Company/Publications/TestCoverage.pdf)上的论文“Abranch Coverage for Arbitrary Languages Made Easy”

# java - StringBuilder.append(String str); 发生了一些疯狂的事情。

> ID：10300387
> 
> 赞同：2
> 
> 时间：2012-04-24T14:48:30.517
> 
> 标签：java

我的 java 项目有问题。

以下函数应该为 SQL 语句提供一个字符串：

```
private static String createInsertString(Pat p)
{   
    StringBuilder x = new StringBuilder();

    x.append(""  + p.getPatnr() +","+ p.getSvnr());

    java.sql.Date andat = null,gebdat;

    if(p.getAndat()==null)
        andat=null;
    else
        andat=new java.sql.Date(p.getAndat().getTimeInMillis());

    if(p.getGebdat()==null)
        gebdat=null;
    else
        gebdat=new java.sql.Date(p.getGebdat().getTimeInMillis());

    x.append("," + andat==null?"null":andat);
    x.append("," + p.getTele()==null?"null":p.getTele());
    x.append("," + p.getVName() +","+ p.getNname());
    x.append("," + p.getKk()==null?"null":p.getKk());
    x.append("," + gebdat==null?"null":gebdat);
    x.append("," + p.getAdrplzort()==null?"null":6);
    x.append("," + p.getAdrstr()==null?"null":p.getAdrstr());
    x.append("," + p.getAdrhnr()==null?"null":p.getAdrhnr());
    s.append("," + p.getReplzort()==null?"null":p.getReplzort().getPlzortnr());
    x.append("," + p.getRestr()==null?"null":p.getRestr());
    x.append("," + p.getRehnr()==null?"null":p.getRehnr());
    x.append("," + p.getLevel());
    x.append("," + p.getCon()==null?"null":p.getCon());
    x.append("," + (p.isPa()?"y":"n")+","+ (p.isLonly()?"y":"n") +","+ (p.isGest()?"y":"n"));
    x.append("," + p.getBem()==null?"null":p.getBem());
    x.append("," + (p.isKat1()?'y':'n') +","+ (p.isKat2()?'y':'n') +","+ (p.isKat3()?'y':'n'));

    System.out.println(x);

    return x.toString();
} 
```

输出是

```
6,6465136nullnull,Jürgen,Wieslernullnull6nullnullnullnull,0null,n,n,nnull,n,n,n 
```

但它应该是这样的：

```
6,6465136,null,null,Jürgen,Wiesler,null,null,6,null,null,null,null,0,null,n,n,n,null,n,n,n 
```

任何人的想法？我在 debian（64 位）上使用 jdk 1.7

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T14:50:26.133

问题是运营商如何绑定。看这个：

```
x.append("," + andat==null?"null":andat); 
```

现在把它想象成：

```
x.append(("," + andat) == null ? "null" : andat); 
```

LHS*永远不会*为空，所以它总是只是附加`andat`... 如果引用为空，它*仍然会*转换为“null”，因为这是`StringBuilder`.

您的代码比它需要的要复杂*得多且效率低下。*考虑将其重写为：

```
private static String createInsertString(Pat p)
{   
    StringBuilder x = new StringBuilder();
    java.sql.Date andat = p.andat == null ? null 
        : new java.sql.Date(p.getAndat().getTimeInMillis());
    java.sql.Date gebdat = p.getGebdat() == null ? null 
        : new java.sql.Date(p.getGebdat().getTimeInMillis());

    x.append(p.getPatnr()).append(",")
     .append(p.getSvnr()).append(",")
     .append(andat).append(",")
     .append(p.getTele()).append(",")

     // etc

    return x.toString();
} 
```

请注意，我认为您在原始版本中有一个错误：

```
x.append("," + p.getVName() +","+ p.getNname()); 
```

这些*意味着*在哪里调用两个不同的吸气剂？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T14:52:51.827

您`.append()`通过将连接放入其中来滥用！这错过了`StringBuilder`应该使用的全部要点。

```
 x.append("," + andat==null?"null":andat); 
```

应该

```
 x.append(",").append( andat == null ? "null" : andat); 
```

这将是使您的三元运算符按预期工作的正确逻辑。

`.append()`返回对的引用，`StringBuilder`以便您可以`.append()`根据需要链接调用。

每当您在内部放置字符串连接时，`.append()`只会创建更多的中间`String`对象，这些对象会占用内存、cpu 周期，然后使用更多资源，因为它们现在需要被垃圾收集。

此外，您应该预先分配`StringBuilder`一个比您期望的内容稍大的默认大小，以避免浪费分配和垃圾创建。

有关构造函数，请参见[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/StringBuilder.html#StringBuilder%28int%29)`StringBuilder(int)`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-24T14:51:35.213

问题来自您的“+”。

1.  如果您使用 StringBuilder，请不要使用“+”：效率不高
2.  `"," + andat==null?"null":andat`结果`",null"==null?"null":andat`如果 andat 为空。

'+' 字符串连接优先于三元运算符

当您将“+”与 String 一起使用时，您的编译器实际上会将其转换为 StringBuilder（或 Java5 之前的 StringBuffer）

所以有

```
String s = a + b + c; 
```

实际上翻译为：

```
String s = new StringBuilder().append(a).append(b).append(c).toString(). 
```

因此，在 StringBuilder 中使用 + 会适得其反，因为您会创建额外的不必要的 StringBuilder。

# regex - 此特定模式的正则表达式

> ID：10300391
> 
> 赞同：1
> 
> 时间：2012-04-24T14:48:37.123
> 
> 标签：regex

我有三种不同的东西

```
xxx
xxx>xxx
xxx>xxx>xxx 
```

其中 xxx 可以是字母和数字的任意组合

我需要一个可以匹配前两个但不是第三个的正则表达式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T14:51:00.093

要匹配 ASCII 字母和数字，请尝试以下操作：

```
^[a-zA-Z0-9]{3}(>[a-zA-Z0-9]{3})?$ 
```

如果需要 ASCII 字符集之外的字母和数字，则以下内容就足够了：

```
^[^\W_]{3}(>[^\W_]{3})?$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:51:27.073

```
^\w+(?:>\w+)?$ 
```

匹配整个字符串。

```
\w+(?:>\w+)?\b(?!>) 
```

在更大的子字符串中匹配这样的字符串。

如果你想从匹配中排除下划线，你可以使用`[\p{L]\p{N}]`（如果你的正则表达式引擎知道 Unicode），或者`[^\W_]`如果它不知道，作为`\w`.

# php - 管理部分在 Magento 中自动注销

> ID：10300394
> 
> 赞同：5
> 
> 时间：2012-04-24T14:48:39.073
> 
> 标签：php, magento, logout, magento-1.6

我刚刚安装了 Magento CE 1.6.2，现在最烦人的是管理界面会在我闲置 3 分钟后自动将我注销。如何解决此问题以使我保持登录状态或增加注销前的时间？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-25T10:32:56.447

如果你想增加你的登录时间，那么你必须在管理员中更改视野生命周期，你可以在系统->配置->管理员中找到这个字段，然后选择安全选项卡并在此处检查会话生命周期字段，你可以定义你的时间。

# ruby-on-rails - 有没有一种简单的方法可以在 Rails 和 Node.js 应用程序之间共享存储在 Redis 中的会话数据？

> ID：10300396
> 
> 赞同：5
> 
> 时间：2012-04-24T14:48:48.860
> 
> 标签：ruby-on-rails, session, node.js, redis

我有一个使用 Redis 作为会话存储的 Rails 3.2 应用程序。现在我要在 Node.js 中编写一部分新功能，并且我希望能够在两个应用程序之间共享会话信息。

我可以手动做的是读取`_session_id`cookie，然后从名为 的 Redis 键读取`rack:session:session_id`，但这看起来有点像 hack-ish 解决方案。

**有没有更好的方法在 Node.js 和 Rails 之间共享会话？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T23:41:49.673

我已经这样做了，但它确实需要自己制作东西

首先，您需要使会话密钥具有相同的名称。这是最简单的工作。

接下来，我创建了 redis-store gem 的一个分支并修改了编组的位置。我需要在双方讨论 json，因为为 javascript 找到一个 ruby​​ 样式的 marshal 模块并不容易。[我更改编组的文件](https://github.com/stuintrepica/redis-store/blob/master/redis-store/lib/redis/store/marshalling.rb)

我还需要替换连接的会话中间件部分。创建的哈希非常具体，与 rails 创建的一个不匹配。我需要把这个留给你解决，因为可能有更好的方法。我本可以分叉连接，但我提取了连接 > 中间件 > 会话的副本并需要我自己的副本。

您会注意到原始版本如何添加在 rails 版本中不存在的基本变量。另外，您需要处理 rails 创建会话而不是节点的情况，这就是 generateCookie 函数的作用。

```
/***** ORIGINAL *****/
// session hashing function
store.hash = function(req, base) {
  return crypto
    .createHmac('sha256', secret)
    .update(base + fingerprint(req))
    .digest('base64')
    .replace(/=*$/, '');
};

// generates the new session
store.generate = function(req){
  var base = utils.uid(24);
  var sessionID = base + '.' + store.hash(req, base);
  req.sessionID = sessionID;
  req.session = new Session(req);
  req.session.cookie = new Cookie(cookie);
};

/***** MODIFIED *****/
// session hashing function
store.hash = function(req, base) {
  return crypto
    .createHmac('sha1', secret)
    .update(base)
    .digest('base64')
    .replace(/=*$/, '');
};

// generates the new session
store.generate = function(req){
  var base = utils.uid(24);
  var sessionID = store.hash(req, base);
  req.sessionID = sessionID;
  req.session = new Session(req);
  req.session.cookie = new Cookie(cookie);
};

// generate a new cookie for a pre-existing session from rails without session.cookie
// it must not be a Cookie object (it breaks the merging of cookies)
store.generateCookie = function(sess){
  newBlankCookie = new Cookie(cookie);
  sess.cookie = newBlankCookie.toJSON();
};

//... at the end of the session.js file
  // populate req.session
  } else {
    if ('undefined' == typeof sess.cookie) store.generateCookie(sess);
    store.createSession(req, sess);
    next();
  } 
```

我希望这对你有用。我花了很多时间才让他们说同样的话。

我还发现闪存消息存储在 json 中的问题。希望你找不到那个。Flash 消息具有特殊的对象结构，json 在序列化时会被吹走。当从会话中恢复 flash 消息时，您可能没有正确的 flash 对象。我也需要为此打补丁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T15:09:12.477

This may be completely unhelpful if you're not planning on using this, but all of my session experience with node is through using Connect. You could use the connect session middlewhere and change the key id:

[http://www.senchalabs.org/connect/session.html#session](http://www.senchalabs.org/connect/session.html#session)

and use this module to use redis as your session store:

[https://github.com/visionmedia/connect-redis](https://github.com/visionmedia/connect-redis)

I've never setup something like what your describing though, there may be some necessary hacking.

# java - 当独立程序想要退出时，@Scheduled Tasks 保持 JVM 挂起，需要杀死 JVM

> ID：10300403
> 
> 赞同：2
> 
> 时间：2012-04-24T14:49:28.177
> 
> 标签：java, multithreading, spring, jvm, scheduled-tasks

我在 spring bug tracker 中打开了这个 bug。如果这里的一些聪明人已经可以帮助我会很酷

[https://jira.springsource.org/browse/SPR-9341](https://jira.springsource.org/browse/SPR-9341)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-30T05:19:45.617

在调度程序的守护进程属性上设置“true” - 例如

```
<!-- task scheduling for @Scheduled annotation -->
<task:annotation-driven executor="myExecutor" scheduler="myScheduler"/>
<task:executor id="myExecutor" pool-size="1" />

<bean id="myScheduler" class="org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler">
    <property name="poolSize" value="2" />
    <property name="threadNamePrefix" value="myScheduler-"/>
    <property name="waitForTasksToCompleteOnShutdown" value="false" />
    <property name="daemon" value="true" />
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:56:24.497

您是否尝试过让您的`@Scheduled`bean 实现`DisposableBean`（以便在 Spring 上下文关闭时通知它）并在您的`main()`方法中显式关闭上下文？

从概念上讲，我看不出发布的代码如何像您期望的那样工作。Spring 需要以`@Scheduled`您配置的时间/速率启动新线程来运行您的任务，这意味着当您的`main()`方法中的代码退出时，JVM 中仍在运行非守护线程。如果你不告诉 Spring 关闭这些线程，那么它们将如何被终止？

编辑：要清楚，我认为解决方案是明确调用`close()`您的`ApplicationContext`. 否则 Spring 没有办法告诉运行计划任务的执行器服务自行关闭。退出时不会调用 JVM 关闭挂钩，`main()`因为非守护线程仍在运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-06T11:59:08.643

这是使用 Java 配置的解决方案

```
@Bean
public TaskScheduler daemonTaskScheduler() {
    ThreadPoolTaskScheduler taskScheduler = new ThreadPoolTaskScheduler();
    taskScheduler.setDaemon(false);
    taskScheduler.setThreadNamePrefix("daemon");
    taskScheduler.setPoolSize(5);
    return taskScheduler;
} 
```

或者如果你想真正了解细节，配置类可以是这样的

```
@Configuration
public class SchedulerConfig implements SchedulingConfigurer {

   @Override
   public void configureTasks(ScheduledTaskRegistrar taskRegistrar) { 
```

但不支持的一件事是能够在单个应用程序中使用多个 TaskScheduler。我为此开了一个[JIRA](https://jira.spring.io/browse/SPR-16271)

# android - 自定义字体的额外行距问题

> ID：10300407
> 
> 赞同：4
> 
> 时间：2012-04-24T14:49:37.037
> 
> 标签：android

我在我的应用程序上为 TextView 使用自定义字体/自定义字体。TextView 显示一段文本，但是由于字体本身的额外行距，这很烦人。因此，段落中的一行与另一行之间存在相当大的差距。任何人都可以知道如何通过 XML 或以编程方式减少间距吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T14:51:41.083

您可以使用[`lineSpacingMultiplier`](http://developer.android.com/reference/android/widget/TextView.html#attr_android:lineSpacingMultiplier)TextView 的属性来减少/增加间距。像这样：

```
<TextView
    android:lineSpacingMultiplier="0.6"
    ...
    /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T04:04:11.560

减小间距可能会截断文本最后一行的长体字字符。一种替代方法是调整自定义字体参数。FontForge 是一个很棒的免费字体工具，它的手册包含一个很好的字体介绍[http://fontforge.sourceforge.net/overview.html](http://fontforge.sourceforge.net/overview.html)

# css - 反正有没有清除绝对定位？

> ID：10300413
> 
> 赞同：0
> 
> 时间：2012-04-24T14:49:51.350
> 
> 标签：css, css-position

我已经在页面的内容区域上使用了绝对定位，现在我想创建页脚是否有让流量恢复正常？

或者我是选择绝对定位页脚还是将页脚放在内容容器中？

# sql - SQL Server FOR EACH Loop

> ID：10300414
> 
> 赞同：65
> 
> 时间：2012-04-24T14:49:53.483
> 
> 标签：sql, sql-server, tsql

I have the following SQL query:

```
DECLARE @MyVar datetime = '1/1/2010'    
SELECT @MyVar 
```

This naturally returns '1/1/2010'.

What I want to do is have a list of dates, say:

```
1/1/2010
2/1/2010
3/1/2010
4/1/2010
5/1/2010 
```

Then i want to FOR EACH through the numbers and run the SQL Query.

Something like (pseudocode):

```
List = 1/1/2010,2/1/2010,3/1/2010,4/1/2010,5/1/2010

For each x in List
do
  DECLARE @MyVar datetime = x

  SELECT @MyVar 
```

So this would return:-

1/1/2010 2/1/2010 3/1/2010 4/1/2010 5/1/2010

I want this to return the data as one resultset, not multiple resultsets, so I may need to use some kind of union at the end of the query, so each iteration of the loop unions onto the next.

**edit**

I have a large query that accepts a 'to date' parameter, I need to run it 24 times, each time with a specific to date which I need to be able to supply (these dates are going to be dynamic) I want to avoid repeating my query 24 times with union alls joining them as if I need to come back and add additional columns it would be very time consuming.

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-04-24T14:57:06.477

SQL is primarily a set-orientated language - it's generally a bad idea to use a loop in it.

In this case, a similar result could be achieved using a recursive CTE:

```
with cte as
(select 1 i union all
 select i+1 i from cte where i < 5)
select dateadd(d, i-1, '2010-01-01') from cte 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-04-24T14:54:21.873

Here is an option with a table variable:

```
DECLARE @MyVar TABLE(Val DATETIME)
DECLARE @I INT, @StartDate DATETIME
SET @I = 1
SET @StartDate = '20100101'

WHILE @I <= 5
BEGIN
    INSERT INTO @MyVar(Val)
    VALUES(@StartDate)

    SET @StartDate = DATEADD(DAY,1,@StartDate)
    SET @I = @I + 1
END
SELECT *
FROM @MyVar 
```

You can do the same with a temp table:

```
CREATE TABLE #MyVar(Val DATETIME)
DECLARE @I INT, @StartDate DATETIME
SET @I = 1
SET @StartDate = '20100101'

WHILE @I <= 5
BEGIN
    INSERT INTO #MyVar(Val)
    VALUES(@StartDate)

    SET @StartDate = DATEADD(DAY,1,@StartDate)
    SET @I = @I + 1
END
SELECT *
FROM #MyVar 
```

You should tell us what is your main goal, as was said by @JohnFx, this could probably be done another (more efficient) way.

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-04-24T14:55:17.020

You could use a variable table, like this:

```
declare @num int

set @num = 1

declare @results table ( val int )

while (@num < 6)
begin
  insert into @results ( val ) values ( @num )
  set @num = @num + 1
end

select val from @results 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-04-24T14:57:21.263

This kind of depends on what you want to *do* with the results. If you're just after the numbers, a set-based option would be a [numbers table](http://www.sqlservercentral.com/articles/Advanced+Querying/2547/) - which comes in handy for all sorts of things.

For MSSQL 2005+, you can use a recursive CTE to generate a numbers table inline:

```
;WITH Numbers (N) AS (
    SELECT 1 UNION ALL
    SELECT 1 + N FROM Numbers WHERE N < 500 
)
SELECT N FROM Numbers
OPTION (MAXRECURSION 500) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-07-12T16:22:19.217

```
declare @counter as int
set @counter = 0
declare @date as varchar(50)
set @date = cast(1+@counter as varchar)+'/01/2013'
while(@counter < 12)
begin 
select  cast(1+@counter as varchar)+'/01/2013' as date
set @counter = @counter + 1
end 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-03-24T06:58:03.653

Off course an old question. But I have a simple solution where no need of Looping, CTE, Table variables etc.

```
DECLARE @MyVar datetime = '1/1/2010'    
SELECT @MyVar

SELECT DATEADD (DD,NUMBER,@MyVar) 
FROM master.dbo.spt_values 
WHERE TYPE='P' AND NUMBER BETWEEN 0 AND 4 
ORDER BY NUMBER 
```

**Note :** `spt_values` is a Mircrosoft's undocumented table. It has numbers for every type. Its not suggestible to use as it can be removed in any new versions of sql server without prior information, since it is undocumented. But we can use it as quick workaround in some scenario's like above.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-03-19T12:20:35.417

```
[CREATE PROCEDURE [rat].[GetYear]

AS
BEGIN

-- variable for storing start date
Declare @StartYear as int
-- Variable for the End date 
Declare @EndYear as int 

-- Setting the value in strat Date
select @StartYear = Value from   rat.Configuration where Name = 'REPORT_START_YEAR'; 

-- Setting the End date 
select @EndYear = Value from   rat.Configuration where Name = 'REPORT_END_YEAR'; 

-- Creating Tem table 
    with [Years] as
    (
        --Selecting the Year
        select @StartYear [Year] 
        --doing Union 
        union all
         -- doing the loop in Years table 
         select Year+1 Year from [Years] where Year < @EndYear
     )
    --Selecting the Year table 
selec] 
```

# iphone - 如何将所有 DeviceTokens 保存在 APNS iPhone 应用程序的 php 服务器中？

> ID：10300423
> 
> 赞同：2
> 
> 时间：2012-04-24T14:50:32.987
> 
> 标签：iphone, ios, apple-push-notifications, apns-php

我正在将 APNS 集成到我的 iPhone 应用程序中。我已经浏览了 Apple 提供的 Apple Push Notification 文档。我对服务器端有疑问。请在下面找到我的疑问，

```
 1\. Apple said to create a server from below steps,

    Installing the SSL Certificate and Key on the Server:
    You should install the SSL distribution certificate and private cryptographic key you obtained earlier on the server computer on which the provider code runs and from which it connects with the sandbox or production versions of APNs. To do so, complete the following steps:
    1.1.Open Keychain Access utility and click the My Certificates category in the left pane.
    1.2.Find the certificate you want to install and disclose its contents.
    You'll see both a certificate and a private key.
    1.3.Select both the certificate and key, choose File > Export Items, and export them as a Personal Information Exchange (.p12) file.
    1.4.Servers implemented in languages such as Ruby and Perl often are better able to deal with certificates in the Personal Information Exchange format. To convert the certificate to this format, complete the following steps:
         a.In KeyChain Access, select the certificate and choose File > Export Items. Select the Personal Information Exchange (.p12) option, select a save location, and click Save.
         b.Launch the Terminal application and enter the following command after the prompt: openssl pkcs12 -in CertificateName.p12 -out CertificateName.pem -nodes
    1.5.Copy the .pem certificate to the new computer and install it in the appropriate place.

Am clear to create a server (i assume it will be .php server). Am doubt is how we storing all user's DeviceTokens in the server?

2\. How to send push notifications to all registered devicetokens?
3\. How to send push notifications to a specific user? 
```

您能否就我的问题提出一些建议？我从此链接获得了一个示例 .php 文件`http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12`。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T07:11:52.123

您可以使用以下代码在服务器端获取它：

```
-(void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken
{
NSLog(@"My token is: %@", deviceToken);

    NSData *postData = [[NSString stringWithFormat:@"token=%@", deviceToken] dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

    NSString *postLength = [NSString stringWithFormat:@"%d",[postData length]];

    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
    [request setURL:[NSURL URLWithString:[NSString stringWithFormat:@"YOURDOMAIN/FILE.php"]]];

    [request setHTTPMethod:@"POST"];

    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];

    [request setHTTPBody:postData];

    NSURLConnection *conn = [[NSURLConnection alloc]initWithRequest:request delegate:self];
} 
```

只需将您的令牌存储在数据库中（$_POST['token']）

要发送通知，您必须执行如下所示的循环：

```
//getTokens from database
$deviceToken = getDeviceTokens();

foreach($arr AS $key => $val)
    {
        // Create the payload body
        $body['aps'] = array(
                'alert' => 'Puuuuush',
                'sound' => 'vuvzela.wav',
                'badge' => ($badge != (null) ? $badge + 1 : 1)
                );

// Encode the payload as JSON
        $payload = json_encode($body);

        // Build the binary notification
        $msg = chr(0) . pack('n', 32) . pack('H*', $val) . pack('n', strlen($payload)) . $payload;

        // Send it to the server
        $result = fwrite($fp, $msg, strlen($msg));

        if (!$result)
                echo 'Message not delivered' . PHP_EOL;
        else
                echo 'Message successfully delivered' . PHP_EOL;

        $count++;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T15:09:53.353

您需要将所有设备令牌存储在您的服务器中。您必须为此设置一个数据库。要发送推送通知，您需要将消息和设备令牌信息从您的服务器发送到 APNS。

如果您想向特定用户发送推送通知，您的应用程序应将用户信息与设备令牌一起发送到您的服务器。并且您需要将用户信息和设备令牌保存在数据库中。如果您需要向特定用户发送通知，请获取该用户的设备令牌，形成消息并将其发送到 APNS。

您引用的两部分教程包含所有这些详细信息。它有一个可下载的 php 脚本供您试用。

# java - 如何从线程向 ExecutorService 提交 Callable

> ID：10300426
> 
> 赞同：0
> 
> 时间：2012-04-24T14:50:36.523
> 
> 标签：java, concurrency

我有一个在套接字连接上创建新线程的应用程序。我想将此线程中的 Callable 提交给 ExecutorService。Callable 需要通过命令行参数执行程序，所以我不想通过连接线程执行此操作。

问题是，我不知道如何将 Callable 提交给具有设定线程数的 ExecutorService。

我曾考虑使用单例执行此操作并编写提交方法以将我的 Callable 提交给 ExecutorService 实例，但不熟悉 api，我不确定这是否明智。

非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T14:55:48.727

I would try

```
 static final ExecutorService service = Executors.newFixedThreadPool(4);

 Callable call = 
 service.submit(call); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T14:54:38.860

这是我在网上找到的有关您的问题的一些代码：

```
public class CallableExample {

  public static class WordLengthCallable
        implements Callable {
    private String word;
    public WordLengthCallable(String word) {
      this.word = word;
    }
    public Integer call() {
      return Integer.valueOf(word.length());
    }
  }

  public static void main(String args[]) throws Exception {
    ExecutorService pool = Executors.newFixedThreadPool(3);
    Set<Future<Integer>> set = new HashSet<Future≶Integer>>();
    for (String word: args) {
      Callable<Integer> callable = new WordLengthCallable(word);
      Future<Integer> future = pool.submit(callable);
      set.add(future);
    }
    int sum = 0;
    for (Future<Integer> future : set) {
      sum += future.get();
    }
    System.out.printf("The sum of lengths is %s%n", sum);
    System.exit(sum);
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T15:06:22.553

There is method submit():

```
ExecutorService service = Executors.(get the one here you like most)();
Callable<Something> callable = (your Callable here);
Future<AnotherSomething> result = service.submit(callable); 
```

Please note than when using executor service, you have no control over when the task actually starts.

# c# - 轮询数千个 TCP 套接字

> ID：10300428
> 
> 赞同：5
> 
> 时间：2012-04-24T14:50:46.820
> 
> 标签：c#, .net, tcp, threadpool

我需要在专有协议上通过 TCP 连接到数千个客户端以循环获取数据。我需要用 C# 编写一个 .NET 服务器应用程序。

第一次尝试是为每个 tcp 套接字创建一个自己的线程，它可以工作但需要大量的 cpu 使用。

我发现使用 .NET 线程池会更好。据我了解（[http://msdn.microsoft.com/en-us/library/ms973903.aspx](http://msdn.microsoft.com/en-us/library/ms973903.aspx)），我可以使用计时器来让每个套接字在给定的时间段内（如 1 秒）循环获取数据。这对我不起作用，因为一旦连接打开，套接字就会超时，因为在打开的套接字再次打开之前必须打开更多的套接字。

另一种尝试是使用异步回调。这对我有用，但我不知道如何让套接字循环获取数据？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T15:02:57.530

尝试使用 Socket 的[高性能 API](http://msdn.microsoft.com/en-us/library/bb968780.aspx)，它允许同时在大量套接字上接收数据，而无需每个套接字使用一个线程。在文章的底部有一个完整示例的链接。MSDN 文章中还有一个[SocketAsyncEventArgs 类](http://msdn.microsoft.com/en-us/library/system.net.sockets.socketasynceventargs.aspx)的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:54:50.953

为什么不使用您需要轮询的地址填充队列并让您的线程池从队列中取出项目以进行处理？

一旦你完成了一个项目，就把它推到队列的后面。

# javascript - 将子节点附加到 XML 节点 jquery/js

> ID：10300430
> 
> 赞同：1
> 
> 时间：2012-04-24T14:50:53.387
> 
> 标签：javascript, jquery, xml

我有这样的 XML：

```
<REQUEST> 
  <GET_IMAGE> 
   <PROPERTIES>
     <LAYERLIST>
     </LAYERLIST> 
    </PROPERTIES>
   </GET_IMAGE>
</REQUEST> 
```

我想向节点 LAYERLIST 添加一些其他子节点，如下所示：

```
<LAYER id="1"/>
<LAYER id="2"/>
.
.
. 
```

我正在尝试通过

```
$(xml).find('LAYERLIST').get(0).append(nodes) 
```

当我在做的时候，`$(xml).find('LAYERLIST').get(0)`我可以到达这个节点，但是当我做的时候，`$(xml).find('LAYERLIST').get(0).append(nodes)`我得到'追加不是一个函数'。我尝试使用 appendTo ，效果几乎相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:55:50.000

利用：

```
$(xml).find('LAYERLIST').eq(0) 
```

# android - 将 USB 设备连接到 Android 平板电脑主机

> ID：10300432
> 
> 赞同：2
> 
> 时间：2012-04-24T14:50:54.400
> 
> 标签：android, camera, usb, host, galaxy-tab

我想将 USB 摄像头（工业用摄像头，非消费类摄像头）连接到我的 Android 平板电脑（Samsung Galaxy Tab 10.1n）。我从三星购买了原装 USB 适配器。当我连接相机时，我收到消息“未知 USB 设备”。在谷歌的 API 中有一个意图过滤器示例，我已经用我的设备进行了测试。我无法与相机通信。我看不到任何端点或供应商和产品 ID。是否有任何应用程序可以告诉我连接了哪些 USB 设备并在 Windows 中显示它们的 pid 和 vid，如设备管理器？

我读过一些关于白名单的东西。使用我的相机是否需要添加我的产品和供应商 ID？

我已经安装了不显示我的设备的应用程序“USB 设备信息”。应用程序“DSLR Controller”与我的佳能 7D 完美配合。

没有机会将我的设备连接到平板电脑吗？： [三星 Galaxy 10.1 平板电脑的 Android Usb 主机问题](https://stackoverflow.com/questions/7534878/android-usb-host-problem-with-samsung-galaxy-10-1-tablet)

谢谢，卢马普

# geolocation - 您如何与其他第 3 方数据提供商交叉引用 Google 地方信息结果？（Yelp、Foursquare 等）

> ID：10300434
> 
> 赞同：4
> 
> 时间：2012-04-24T14:50:59.103
> 
> 标签：geolocation, google-places-api

Google Places API 是否有任何内置支持与其他数据提供者（Yelp、Foursquare 等）交叉引用返回的地点？例如，Factual 建立了 Crosswalk 标准，以将结果的 ID 映射到各种不同的数据提供者。不过，我没有在[受支持的提供商](http://developer.factual.com/display/docs/Places+API+-+Supported+Crosswalk+Services)上看到 Google 地方信息。如果使用 Google Places 作为您的位置提供者，您将如何从其他数据提供者（或使用您自己的数据）中扩充信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T11:55:56.830

此外，Yelp 不会让您将结果合并为他们 T&C 的一部分，这是可以理解但可悲的。

# silverlight - Silverlight Richtextbox 获取光标位置

> ID：10300436
> 
> 赞同：1
> 
> 时间：2012-04-24T14:51:00.627
> 
> 标签：silverlight, position, richtextbox

我正在尝试使用 silverlight 5 Richtextbox 创建用户控件。我需要能够插入“内联 ui”，但不知道如何获取当前光标位置。

我像这样触发我的代码：

```
this.GetAbsolutePos(this.richText.Selection.Start); 
```

这种方法的核心在这里：

```
private int GetAbsolutePos(TextPointer textPointer)
{
   int index = 0;
   TextPointer pos = this.richText.ContentStart;
   while (pos.CompareTo(textPointer) != 0)
   {
      if (pos.IsAtInsertionPosition)
      {
          index++;
      }

      pos = pos.GetNextInsertionPosition(LogicalDirection.Forward);
   }
   return index;
} 
```

给定富文本框控件中的以下文本....

![空控制](../Images/1bce95fc671ad04b5ac4192aa0bcf66a.png)

如果光标在第一行的 5 和 6 之间，则上述函数正确返回 5。但随着光标进一步进入文本，位置变得更加不准确。即第二行的 5 和 6 之间返回 16，第三行返回 27。

当我在这些位置插入内联元素时，这也变得更加困难，然后将其视为“符号”并进一步导致计数出错。

此图显示了当我在每行的 5 和 6 之间“插入”内联 ui 时发生的情况。 ![带 3 个内联](../Images/e12e86213d23c329687523a608feb060.png)

只是为了完整起见，这里是来自richtext.Xaml 的 Xaml（我已经从 Section/Paragraph 元素中删除了所有额外的属性以使其更清晰）

```
<Section>
   <Paragraph>
       <Run>1234567890</Run>
       <LineBreak />
       <Run>1234567890</Run>
       <LineBreak />
       <Run>1234567890</Run>
   </Paragraph>
</Section> 
```

基于this page [MSDN Silverlight TextPointer Class的备注](http://msdn.microsoft.com/en-us/library/system.windows.documents.textpointer%28v=vs.95%29.aspx)

> 符号 - 对于 TextPointer 操作，以下任何一项都被视为符号：
> 
> *   TextElement 元素的开始或结束标记。
>     
>     
> *   包含在 InlineUIContainer 中的 UIElement 元素。请注意，UIElement 始终被计为一个符号。UIElement 包含的任何其他内容或元素均不被视为符号。
>     
>     
> *   文本 Run 元素内的每个 16 位 Unicode 字符。

我想我需要“知道”我目前使用的是哪种“符号”，但无法弄清楚如何。

看起来应该很容易，但使用 TextPointers 似乎很不直观。我有一个想法来解析 Xaml 以找到光标位置，但这似乎是一个真正的 hack。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:42:10.623

最后，我们只是通过文本点之前的 SubstituteEdits（我们的 UIElement 表示）的数量手动调整索引。它仍然不稳定，我们的控制还有其他问题，但目前已经足够好了。

干杯

蒂姆

```
 private int GetAbsolutePos(SubstituteEdit newSub)
    {
        int index = 0;
        TextPointer textPointer = this.richText.Selection.Start;
        TextPointer caretWhere = this.richText.ContentStart;

        while (true)
        {
            caretWhere = caretWhere.GetNextInsertionPosition(LogicalDirection.Forward);
            if (caretWhere == null || caretWhere.CompareTo(textPointer) == 0)
            {
                break;
            }

            index++;
        }

        foreach (SubstituteEdit sub in this.Substitutes)
        {
            if (sub.Position < index && sub != newSub)
            {
                index--;
            }
        }

        return index;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-09T17:51:38.683

我不确定这是否会有所帮助，但我最终让用户插入选择的位置而不是插入符号位置，它似乎运作良好。这是我的一些代码：

```
InlineUIContainer MyUI = new InlineUIContainer();
TextBlock tblx = new TextBlock() { Text = addedItem.Title, FontWeight = FontWeights.Bold };
MyUI.Child = tblx;
Paragraph myParagraph = new Paragraph();
myParagraph.Inlines.Add(MyUI);
rtb.Selection.Insert(myParagraph); 
```

# javascript - 带有 JS 的 ActiveX“无按钮”

> ID：10300442
> 
> 赞同：0
> 
> 时间：2012-04-24T14:51:11.283
> 
> 标签：javascript, internet-explorer, activex

我有一个 JS 调用 activex 来创建一个文件。

```
var object = new ActiveXObject("Scripting.FileSystemObject");
if (object != null) {
    var file = object.CreateTextFile("C:\\" + str2 + ".csv", false);
} 
```

这会弹出一个带有是/否按钮的 Activex 框。YES 按钮工作正常，我的脚本已执行。

我的问题是 NO 按钮，它返回一个 IE 警告：

> 自动化服务器无法创建对象。

有没有办法处理NO按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T17:38:33.590

这是一项重要的安全功能。任意 JavaScript 代码无法访问文件系统，因此您使用的是 ActiveX。但是因为这样做非常危险，所以需要询问用户是否可以，这就是您看到的弹出窗口。

如果用户选择“否”，这意味着他们不信任您的代码。你必须接受这一点。

您可以尝试添加类似“当 IE 警告您有关 ActiveX 时请单击是；我保证不会对您的计算机造成太大伤害！” 但当然，他们是否会接受你的话取决于用户。

# java - 实现 Shape 接口的 boolean contains(Rectangle2D r) 方法

> ID：10300445
> 
> 赞同：3
> 
> 时间：2012-04-24T14:51:23.933
> 
> 标签：java, interface, implementation, contains, shape

这是我的Java问题：

我的 Circle 类实现了 Shape 接口，因此它必须实现所有需要的方法。我对“测试形状的内部是否完全包含指定的 Rectangle2D”的方法 boolean contains(Rectangle2D r) 有疑问。现在， Rectangle2D 是一个抽象类，它不提供（据我所知）任何获取矩形角坐标的方法。更准确地说：“Rectangle2D 类描述了一个由位置 (x, y) 和尺寸 (wxh) 定义的矩形。该类只是所有存储 2D 矩形的对象的抽象超类。坐标的实际存储表示留给子类”。

那么我该如何解决呢？

请在下面找到我的代码的一部分：

```
public class Circle implements Shape
{
private double x, y, radius;

public Circle(double x, double y, double radius)
{
    this.x = x;
    this.y = y;
    this.radius = radius;
}

// Tests if the specified coordinates are inside the boundary of the Shape
public boolean contains(double x, double y)
{
    if (Math.pow(this.x-x, 2)+Math.pow(this.y-y, 2) < Math.pow(radius, 2))
    {
        return true;
    }
    else
    {
        return false;
    }
}

// Tests if the interior of the Shape entirely contains the specified rectangular area
public boolean contains(double x, double y, double w, double h)
{
    if (this.contains(x, y) && this.contains(x+w, y) && this.contains(x+w, y+h) && this.contains(x, y+h))
    {
        return true;
    }
    else
    {
        return false;
    }
}

// Tests if a specified Point2D is inside the boundary of the Shape
public boolean contains(Point2D p)
{
    if (this.contains(p.getX(), p.getY()))
    {
        return true;
    }
    else
    {
        return false;
    }
}

// Tests if the interior of the Shape entirely contains the specified Rectangle2D
public boolean contains(Rectangle2D r)
{
    // WHAT DO I DO HERE????
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T14:56:59.160

`Rectangle2D`继承`getMaxX, getMaxY, getMinX, getMinY`自`RectangularShape`。所以你可以得到角落的坐标。

[http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/geom/Rectangle2D.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/geom/Rectangle2D.html)

请参阅“从类 java.awt.geom.RectangularShape 继承的方法”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T14:59:18.647

使用路径迭代器。适用于所有凸形

```
PathIterator it = rectangle.getPathIterator(null);
while(!it.isDone()) {
    double[] coords = new double[2];
    it.currentSegment(coords);
    // At this point, coords contains the coordinates of one of the vertices. This is where you should check to make sure the vertex is inside your circle
    it.next(); // go to the next point
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T15:00:03.587

鉴于您当前的实施：

```
 public boolean contains(Rectangle2D r)
{
    return this.contains(r.getX(), r.getY(), r.getWidth(), r.getHeight());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T15:08:48.163

您可以将`Ellipse2D.Double`宽度和高度设置扩展为相同的值。

```
Ellipse2D.Double(double x, double y, double w, double h) 
```

然后你可以使用它的`contains`方法将`Rectangle2D`角传递给它（你有左上角 X 和 Y 以及宽度和高度，所以计算角是微不足道的）。`true`返回用于`contains`应用于所有矩形角表示圆包含矩形

# php - 服务器有时会返回分块传输编码

> ID：10300446
> 
> 赞同：2
> 
> 时间：2012-04-24T14:51:26.013
> 
> 标签：php, api

我正在构建一个 REST API .. 有时服务器会返回带有分块传输编码的响应？这是为什么？！

为什么服务器不能总是以相同的编码返回响应？

问题是当数据以分块形式返回时，我不知道如何读取数据！？

# 更新

需要moore downvotes...才能呼吸...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T18:03:08.460

假设您的服务器使用的是 Apache，这是预期的行为。您可以通过将此行放入`.htaccess`文件中来禁用它：

```
SetEnv downgrade-1.0 
```

但是，您应该考虑修改阅读代码以仅支持不同的内容编码。您使用什么库来发出 HTTP 请求？任何合理的 HTTP 库都可以处理分块请求。如果您的请求代码是用 PHP 编写的，请使用 curl。[http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-24T08:54:19.163

取自[服务器故障](https://serverfault.com/questions/155558/how-can-i-disable-transfer-encoding-chunked-in-apache-with-http-1-1-responses)：

1.  指定“Content-Length”标头，以便服务器知道响应的大小
2.  在请求者端使用 HTTP 1.0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T11:22:18.527

一个问题可能是 Apache 正在压缩您的下载，负责更正 Content-Length，或者在您的情况下，添加标题

> 内容编码：分块

您可以添加一个`.htaccess`RewriteRule 来禁用 gzip：

```
RewriteRule . - [E=no-gzip:1] 
```

# c# - 使用 UserPrincipal 更改 AD 用户帐户属性

> ID：10300450
> 
> 赞同：0
> 
> 时间：2012-04-24T14:51:30.470
> 
> 标签：c#, active-directory, impersonation, userprincipal

我正在尝试使用 UserPrincipal 更改 Active Directory 中的用户帐户属性。

我已经读到我们必须使用对 Active Directory 具有写访问权限的特殊帐户，而不是当前登录用户。所以，我创建了一个特殊的类来使用特殊帐户来模拟。但我仍然有

`System.UnauthorizedAccessException: General access denied error`

在 user.Save(ctx); 线。

```
System.Security.Principal.WindowsImpersonationContext newUser = clsImpersonate.ImpersonateUser("ADUser", "ADPassword");

            if (newUser != null)
            {
                PrincipalContext ctx = blAD.GetAdminPrincipalContext();
                UserPrincipal user = blAD.GetUserPrincipal(this.SAMAccount);
                user.Enabled = false;
                user.Save(ctx);
                newUser.Undo();
            } 
```

我怎样才能达到这个要求？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-26T14:43:45.247

要以其他用户身份访问 Principal，请使用用户的凭据定义您的 PrincipalContext，并在获取 UserPrincipal 时使用该 PrincipalContext。

```
 PrincipalContext ctx = new PrincipalContext(ContextType.Domain, "domain.tld", "ADUser", "ADPassword");
    UserPrincipal user = UserPrincipal.FindByIdentity(ctx, IdentityType.SamAccountName, this.SAMAccount);
    if (user != null) 
    {
        user.Enabled = false;
        user.Save();
    } 
```

如果您仍然收到 UnauthorizedAccess 异常，可能是因为您指定的帐户无权在 Active Directory/LDS 中的用户对象上写入 userAccountControl 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:00:48.267

哪些权限已委派给您的特殊用户？它需要能够写`userAccountControl`在有问题的用户身上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-07T15:07:20.177

我不会先冒充帐户！首先通过广告传递值来获得访问权限。

对于真正的问题，请查看错误：

1.  获取 principalContect。
2.  获取用户主体。
3.  做你想做的事。
4.  保存它，你为什么使用撤消？删除撤消（）。

# css - 仅适用于 iframe 的 CSS 滚动条移除

> ID：10300453
> 
> 赞同：1
> 
> 时间：2012-04-24T14:51:41.560
> 
> 标签：css, iframe

我似乎无法找到一个明确的答案。

以下样式将从 Firefox 和 chrome 中的 iframe 中删除滚动条，但我似乎找不到 ie 的替代方法。我真的不想设置`scrolling`属性。有任何想法吗？

```
iframe
{
    height:500px;
    width:500px;
    overflow:hidden;
}

iframe::-webkit-scrollbar
{  
    display: none;
} 
```

**编辑**：我无法控制 iframe 源的 html。IE 可悲地意味着 ie7 向上。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-24T16:07:41.607

这个技巧怎么样？（如果您只是不想显示滚动条）
您`<iframe>`必须有一个容器。所以做这样的事情：

```
<container>
  <iframe src="http://www.domain.com"></iframe> 
</container> 
```

还有你的 CSS：

```
container {
    width: 500px;
    height: 500px;
    overflow: hidden;
    position: relative;
}
iframe {
    width: 517px;  /* scrollbar = 17px */
    height: 517px; /* scrollbar = 17px */
    position: absolute;
    top: 0; left: 0;
} 
```

# visual-studio - 每个从事同一个 VS 项目的开发人员都需要添加 Nuget 包吗？

> ID：10300459
> 
> 赞同：5
> 
> 时间：2012-04-24T14:52:16.803
> 
> 标签：visual-studio, nuget

我使用 Nuget（RestSharp、Twilio 等）向 VS 2010 解决方案添加了一些库。当我将相同的解决方案从 TFS 拉到一台新 PC 并尝试构建它时，对这些程序集的所有引用都被破坏（错误“找不到命名空间......”）。每个第一次使用这个 VS 解决方案的开发人员是否有必要在他们的 PC 上独立安装相同的 Nuget 包？谢谢，吉姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T13:24:20.767

正如安德鲁已经说过的那样，这完全取决于包裹的位置。

要么您必须签入包含所有软件包的整个软件包文件夹，要么每个开发人员都必须在第一次签出后安装软件包。但是有一个更好的方法可以做到这一点，即[使用 NuGet 包还原](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)——它会在项目构建时自动安装所有丢失的包。

如果您使用包还原，您只需将 repositories.config 检入您的 VCS。使用 TFS，您可以隐藏除 repositories.config 之外[的整个包文件夹](http://www.xavierdecoster.com/post/2011/10/17/Tell-TFS-not-to-add-NuGet-packages-to-source-control.aspx)，这样 TFS 就不会因新包的挂起签入而烦恼。

另请参阅[此答案](https://stackoverflow.com/a/8442160/66849)以获取有关如何使用 TFS + NuGet 的指导。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T16:52:15.517

不，但您需要确保程序集都包含在相同的相对路径中，以便 Visual Studio 可以找到它们。您可以包含解决方案的 nuget 包目录，我认为它存储了项目要引用的库的副本。

顺便说一句，包括所述目录可能实际上与“安装软件包”相同。如果将 NuGet 在其包管理中使用的所有文件都包括在内，NuGet 的行为将与您安装它们时的行为相同。但是您不需要通过 NuGet 进行实际的包安装，它就可以工作......甚至首先在 Visual Studio 中安装 NuGet。这只是适当的文件位于 Visual Studio 项目文件所期望的位置的问题。

# php - 当变量未在 url 中传递时，include_once 会出错

> ID：10300462
> 
> 赞同：0
> 
> 时间：2012-04-24T14:52:22.840
> 
> 标签：php, arrays, include, warnings

索引.php

```
<?php include_once 'lang.php'; ?> 
```

语言.php

```
<?php
session_start();
header('Cache-control: private'); // IE 6 FIX
if (isSet($_GET['lang'])) {
    $lang = $_GET['lang'];
    // register the session and set the cookie
    $_SESSION['lang'] = $lang;
    setcookie("lang", $lang, time() + (3600 * 24 * 30));
}
else if (isSet($_SESSION['lang'])) {
    $lang = $_SESSION['lang'];
}
else if (isSet($_COOKIE['lang'])) {
    $lang = $_COOKIE['lang'];
}
else {
    $lang = 'en';
}
switch ($lang) {
    case 'en':
        $lang_file = 'lang.en.php';
        break;
    case 'pl':
        $lang_file = 'lang.pl.php';
        break;
}
include_once 'languages/' . $lang_file;
?> 
```

在里面`lang.en.php`，`lang.pl.php`我有包含内容的数组。

第一次打开网站时，我收到两个警告：

> 警告：include_once(languages/) [function.include-once]：无法打开流：第 37 行的 blah/blah/blah/lang.php 中没有此类文件或目录
> 
> 警告：include_once() [function.include]: 未能在 blah/blah/blah/ 中打开 'languages/' 以包含 (include_path='.:/usr/local/lib/php-5.2.17/lib/php')第 37 行的 lang.php

然后，当我在网页上选择一种语言时，变量“lang”在 url 中传递（例如`index.php?lang=en`）一切正常。如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:56:21.020

如果您没有定义语言，它会尝试加载“语言/”（一个目录）。您的 switch 语句中应该有一个默认值。如果您希望默认语言为“en”，例如：

```
switch ($lang) {
  case 'pl':
  $lang_file = 'lang.pl.php';
  break;
  default: // en will fall here, too
  $lang_file = 'lang.en.php';
  break;
} 
```

否则`$lang_file`是未定义的，当然会无法加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:57:50.440

也许只是添加一个`default`部分`switch`：

```
switch($lang){
  case 'en':
    $lang_file='lang.en.php';
    break;
  case 'pl':
    $lang_file='lang.pl.php';
    break;
  default:
    // This will set a default language file.
    $lang_file='lang.en.php';
}
include_once 'languages/'.$lang_file; 
```

这一次，当`$lang`未设置为`'en'`或`'pl'`时，开关将返回设置`$lang_file`为`lang.en.php`。但是，如果您想`pl`默认设置，您可以更改它。

# html - 从 Outlook 2007 交换服务器发送的 HTML 电子邮件显示为纯文本 IPHONE

> ID：10300463
> 
> 赞同：0
> 
> 时间：2012-04-24T14:52:39.517
> 
> 标签：html, iphone, email, plaintext

所以，我到处寻找解决方案，发现了 2 个未回答的死线程。在我们的办公室，我们有一台处于“生产”状态的计算机 (PC-Windows XP)，可以发送 HTML 格式的电子邮件。此电子邮件包含复制到电子邮件正文中的几个格式化的 excel 单元格，通常是一个 pdf 图像作为附件。

当这封电子邮件通过 Outlook 2007 发送到老板的 Iphone（4S-iOS 不确定）时，这封电子邮件以纯文本格式出现。当从我的 Iphone 4 (Jailbroken/ios 4.2.6) 查看一封相同的电子邮件时，它完美地显示出来。

除了电话之间的硬件差异之外，我们使用具有相似设置的相同 Exchange Server 工作。

任何人都有解决方案或一些建议来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:58:23.943

这里 ：

设置 | 邮件、通讯录、日历、| 邮件 | 加载远程图像 | 在

[http://www.iphoneforums.net/forum/iphone-general-discussion-12/viewing-html-emails-iphone-4s-34869/](http://www.iphoneforums.net/forum/iphone-general-discussion-12/viewing-html-emails-iphone-4s-34869/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T21:18:28.023

这可能是由于电子邮件编码导致 iPhone 无法正确显示电子邮件。如果您的老板通过他的 iPhone 将电子邮件转发给自己，那么电子邮件是否正确显示？如果是这样，那么通过 Outlook 2007 发送的电子邮件将被编码为 UTF-8。

# android - Android文件资源管理器使用ListView和带有multiple_selection的缩略图（通过long_press连续切换形式single_selection）

> ID：10300464
> 
> 赞同：2
> 
> 时间：2012-04-24T14:52:41.847
> 
> 标签：android, listview, explorer, thumbnails, multipleselection

我有一个使用 ListView（图标 + 文本）的文件管理器 .. 并且仅用于照片（jpg）我想显示预览而不是默认图标 .. 像 es 文件资源管理器或类似...

我想通过长按列表视图上的一行将表单单选列表视图..切换到多选..就像在android消息系统应用程序上发生的那样...通过选定行上的突出显示...没有复选框..

我的实际情况：

我的 ListView 为每一行使用一个 RelativeLayout

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="60dip"
        android:padding="5dip">
        <ImageView
                android:id="@+id/fd_Icon"
                android:layout_width="50dip"
                android:layout_height="50dip"
        >
        </ImageView>
        <TextView
                android:text="Nome"
                android:layout_marginLeft="5dip"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:id="@+id/fd_Text"
                android:layout_toRightOf="@+id/fd_Icon"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"></TextView>
</RelativeLayout> 
```

我有类 FileDirRow

```
public class FileDirRow {
        private String file_dir_text;
        private int file_dir_icon;
        public FileDirRow( int file_dir_icon , String file_dir_text ) {
                super();
                this.file_dir_icon = file_dir_icon;
                this.file_dir_text = file_dir_text;
        }
        public String getFileDirText() {
                return file_dir_text;
        }
        public int getFileDirIcon() {
                return file_dir_icon;
        }
} 
```

我像这样填写列表视图............

```
//arrayItemT contains all files and directories of the current path
    ArrayList<FileDirRow> lista_file_dir =new ArrayList<FileDirRow>();

    for(int i=0;i<arrayItemT.size();i++){
        if (arrayItemT.get(i).endsWith("/"))
            lista_file_dir.add(new FileDirRow(R.drawable.folder, arrayItemT.get(i)));
        else
-----------------------------------------------------------------------------
        //if it's a photo add thumbnails or if it's a generic file...
            lista_file_dir.add(new FileDirRow(R.drawable.file, arrayItemT.get(i)));
-----------------------------------------------------------------------------
    }

    //popolate list
    ArrayList<HashMap<String, Object>> data=new ArrayList<HashMap<String,Object>>();

    for(int i=0;i<arrayItemT.size();i++){
         FileDirRow p= lista_file_dir.get(i);

            HashMap<String,Object> rowMap=new HashMap<String, Object>();//create value map

            rowMap.put("image", p.getFileDirIcon()); //for image key,image res
            rowMap.put("name", p.getFileDirText()); //for name key,l'informazine sul nome
            data.add(rowMap);  //add value map to data source
            }
    String[] from={"image","name"}; //from value under this key
    int[] to={R.id.fd_Icon,R.id.fd_Text};//to views id

    //create adapter 
    SimpleAdapter adapter=new SimpleAdapter(
                    getApplicationContext(),
                    data,//sorgente dati
                    R.layout.icon_row, //layout
                    from,
                    to);

    //use adapter
    ((ListView)findViewById(R.id.FileDirList)).setAdapter 
```

# android - Android WebView - 背景PNG图像导致出现细白线

> ID：10300474
> 
> 赞同：1
> 
> 时间：2012-04-24T14:53:50.990
> 
> 标签：android, webview

我有一个 webview，它显示一个足够简单的 HTML，其标题是使用半透明渐变的 PNG 图像“投射阴影”。无处不在，除了 Androids WebView 它看起来都很好，无缝融合。

然而，在 Android 上，它会导致使用 PNG 作为背景的容器边缘出现一条非常细的白线。删除 PNG 后，该行就会消失。

我想知道 - 这是 Android 上的一个已知问题，还是我设法偶然发现了一张想要特别的 PNG 图像？

**UPD：截图**

![该线在标记为绿色的区域中可见。](../Images/ff27f90ef9577079beb0812b290fc4b7.png)

该线在标记为绿色的区域中可见。“投射阴影”的灰色条是 z-index 10 处的绝对位置，而红色条是 z-index 1 处的绝对位置。

# javascript - Javascript Window.在 IE 中打开错误的 URL

> ID：10300475
> 
> 赞同：1
> 
> 时间：2012-04-24T14:54:04.683
> 
> 标签：javascript, internet-explorer, .htaccess, url, window.open

使用 javascript 打开新窗口时遇到问题。在 Chrome 和 Firefox 中这很好用，但 IE 给出了错误的 url。

该链接位于这样的页面上：www.CORRECTURL.com/SEOKEYWORD/SONGID/SONGNAME.html

链接：

```
<a href="javascript:void(0)" onclick="window.open('extraListen.php?visa=<?php echo($songID); ?>','welcome','toolbars=1, scrollbars=1, location=1, statusbars=1, menubars=1, resizable=1, width=748, height=660, left = 300, top = 100')">Listen</a> 
```

在 chrome/firefox 中打开：[http](http://www.CORRECTURL.com/extraListen.php?visa=19) ://www.CORRECTURL.com/extraListen.php?visa=19 在 IE 中打开：[http ://www.CORRECTURL.com/SEOKEYWORD/SONGID/extraListen.php?visa=19](http://www.CORRECTURL.com/SEOKEYWORD/SONGID/extraListen.php?visa=19)

当“seokeyword”和“songid”添加到链接中时，找不到新页面，但我不明白IE如何在url和chrome中添加这个，firefox没有！？？

顺便说一句，我有以下 htaccess：

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule midsommarvisor/(.*)/(.*)\.html$ index.php?visa=$1&midsommarvisa=$2 [L]
RewriteRule sitemap\.xml sitemap.php [L]
RewriteRule rss\.xml rss.php [L]
RewriteRule (.*)/(.*)\.html$ index.php?fel=$1&page=$2 [L]
RewriteRule (.*)\.html$ index.php?page=$1 
```

我不知道从哪里开始...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T15:39:23.677

当我谈到我的评论时。我相信这里的问题在于您的网址不是以正斜杠开头`/`。`onclick`在您的活动中尝试以下操作：

```
onclick="window.open('/extraListen.php?visa=<?php echo($songID); ?>' 
```

问题是，如果开头没有斜线，一些浏览器不会将其识别为根路径 URL，因此会尝试将其附加到当前请求路径，而不是仅将其附加到域名。

# sql-server-2008 - Sql Server BI 开发工作室

> ID：10300478
> 
> 赞同：1
> 
> 时间：2012-04-24T14:54:09.923
> 
> 标签：sql-server-2008, visual-studio-2008

在使用 BI Development Studio 完全安装 sql server 2008 developer edition 之前，我是否需要安装 vs 2008 Professional？

在 MS 页面上，我们可以找到...

“Business Intelligence Development Studio 是**Microsoft Visual Studio 2008**，具有特定于 SQL Server 商业智能的其他项目类型。Business Intelligence Development Studio 是您将用于开发业务解决方案的主要环境，包括 Analysis Services、Integration Services 和 Reporting Services每个项目类型都提供用于创建商业智能解决方案所需对象的模板，并提供各种设计器、工具和向导来处理这些对象”

**vs 2008 哪个版本**？专业的 ？表示 ？标准 ？？

提前谢谢：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:32:02.330

不，你没有。

如果您没有安装 VS，BI Dev Studio 安装将安装一个名为 Visual Studio Premier Partner Edition 的 VS shell。在添加或删除程序中查找这样的条目。

BIDS 与 SQL Server 许可相关，与 VS 无关，并且仅随 Standard、Enterprise 和 Developer Edition 提供。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T16:42:46.750

不，如果你只打算创建 BI 项目，那么你根本不需要安装 Visual Studio

安装 Sql Server 时，只需确保选择 Business Develpoment Studio 选项，然后安装程序将安装 Studio IDE 以及创建 BI 项目所需的模板

# javascript - 将参数从 servlet 传递给函数 Javascript，查看数据库时它不起作用？

> ID：10300482
> 
> 赞同：0
> 
> 时间：2012-04-24T14:54:15.443
> 
> 标签：javascript, html, servlets, dom-events

我有一个视图 servlet，它查看数据库中的用户，在每一行查看用户的表，我们有按钮将这一行的单元格更改为文本框。

我面临的问题是，当我获取数据并进行循环以查看每行内的表格时，我打印了一个更新按钮并将其附加到 Javascript 函数。传递此动态行的 id 的重要一点，当我运行代码时没有任何反应；说明有问题！

这是视图 servlet 的代码：

```
@SuppressWarnings("serial")

public class View extends HttpServlet {

public void doGet(HttpServletRequest req, HttpServletResponse resp)
        throws IOException {
    resp.setContentType("text/html");

    PrintWriter out = resp.getWriter();
    out.println("<html> <head>");
    out.println("<script type='text/javascript'>");

    out.println("function show_textBOX(i){");
    out.println("alert(\"update  these users -- \"+i+ \" -- \")");
    out.println(" document.getElementById(i).innerHTML ='f';");
    out.println("}");

    out.println("</script>");
    out.println(" </head> <body>");

    PersistenceManager pm = PMF.get().getPersistenceManager();
    Query query = pm.newQuery("select from " + User.class.getName());

    List<User> list = (List<User>) query.execute();

    resp.getWriter().println("<form method='' action='' name='formMY'>");

    resp.getWriter()
            .println(
                    " <table border = '1'> <caption><h4>all users </h4></caption> ");
    resp.getWriter()
            .println(
                    "</br> <h2> <tr> "
                            + "<td> "
                            + " USERname "

                            + "</td> <td> Salary  "
                            + " </td> <td>BirthDate "
                            + " </td> <td> Modification1 </td> <td> Modification2 </td> </tr></h2>");
    int i = 1;
    for (User obj : list) {
        DateFormat formatter = new SimpleDateFormat("dd/MM/yyyy");

        String today = formatter.format(obj.getDate());

        resp.getWriter()
                .println(
                        "</br> <tr id='"
                                + i
                                + "'> <td>"
                                + obj.getName()
                                + " </td> <td> "
                                + obj.getSalary()
                                + "</td> "
                                + "  <td> "
                                + today
                                + "</td>"
                                + " <td>"
                                + " <input type=button value='Update' onclick()='show_textBOX("
                                + i + ")'>" + " </td> <td>"
                                + " <input type=button value='DELETE' >"
                                + " </td>" + "  </tr>");
        i++;
    }

    resp.getWriter().println("</table> </form>");

    resp.getWriter().println("</body> </html> "); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T16:54:04.547

你可以使用这个简单的javascript函数

```
function submitform(obj,action){
    act = document.getElementById("act");
    act.value = action;
    obj.submit();
    } 
```

你会打电话给它

```
" <td><input type=button value='Update' onclick()='submitform(this.form,"+i+")'></td>" 
```

哪个

```
this.form 
```

调用相同的表单，然后它将动作参数传递给你的 servlet，你将从中处理它

```
req.getParameter("action") 
```

注意：我没有测试它，因为我的 JDEVELOPER 不工作:(

# wcf - 命名管道的 WCF 安全问题

> ID：10300487
> 
> 赞同：2
> 
> 时间：2012-04-24T14:54:32.340
> 
> 标签：wcf, security, windows-7, named-pipes

我有一个稍微复杂的设置，当然，在 XP 中可以正常工作，但在 Windows 7 上会卡住。这可能看起来很疯狂，但在当时是有道理的！

我有一个 WPF 应用程序，它启动然后启动另一个与外部设备通信的应用程序。启动后，它通过命名管道 (net.pipe) 使用 WCF（由新进程托管）与新进程建立通信。这似乎在任一操作系统上都可以正常工作。

我想让 WPF 应用程序的一些功能在外部对命令行程序可用，所以我设置了另一个 WCF 服务，这次由 WPF 应用程序托管，并再次通过命名管道公开它。同样，这似乎有效。

接下来，我想让 WPF 应用程序的功能通过 Web 可用。现在，重要的是 WPF 应用程序可以从普通用户帐户运行，所以我认为在 Windows 7 上完成这项工作的最佳方法是创建一个 Windows 服务，该服务将提供 Web 服务部分并让它与WPF 应用程序通过与命令行正常工作的相同命名管道。我实现了这一点，它在 XP 上运行良好，但在 Windows 7 上运行良好。问题*似乎*在于试图在 Windows 服务和 WPF 应用程序之间建立命名管道连接。

如果我以管理员身份运行 WPF 应用程序，它工作正常。因此，运行 Windows 服务的帐户似乎存在问题，无法与通过命名管道托管 WCF 服务的常规用户帐户进行通信。有没有办法使这项工作？似乎在普通用户帐户中运行的 WCF 服务可以使用命名管道与在同一帐户中运行的另一个应用程序进行通信，但它似乎不能用不同的帐户做同样的事情。

奇怪的是，反过来似乎也奏效了。事实上，windows 服务确实也公开了一个带有命名管道绑定的服务（它被用作激活函数，因为该服务一直在运行）。我可以毫无问题地从 WPF 应用程序连接到该服务。

我的安全知识有些有限。任何人都可以了解正在发生的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T23:11:54.630

这个问题之前在 SO 上已经被问过好几次了。例如，请参阅[通过命名管道从 Windows 服务连接到桌面应用程序](https://stackoverflow.com/a/4307552/502194)

问题是您的用户会话应用程序不具备允许他们在其他会话可见的全局内核命名空间中创建对象所需的 SeCreateGlobalPrivilege 安全权限，但只能在仅在会话中可见的本地命名空间中创建对象。另一方面，默认情况下使用此权限运行的服务可以这样做。

不是命名管道对象本身以这种方式被约束到本地命名空间，而是另一个命名内核对象，一个共享内存部分，WCF命名管道绑定依赖于它，以便向其客户端发布实际名称管道，这是一个 GUID，每次启动服务时都会更改。

您可以通过颠倒角色来绕过此限制 - 使 Windows 服务应用程序成为您的用户会话应用程序连接到的 WCF 服务。Windows 服务将其服务发布到您的会话没有问题。以这种方式连接起来更有意义，因为 Windows 服务始终在运行，而您的会话及其应用程序在您登录和注销时来来去去。您将希望使用双工合同定义服务，以便一旦建立连接，通过 WCF 服务的基本通信流仍然可以按照您最初预期的方向发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T15:25:04.540

应用程序（WPF/Console）正在创建本地范围的命名管道（默认情况下，当它们无法创建全局范围的管道时会发生这种情况）。我的猜测是它们可以相互通信，因为它们可以看到彼此命名的管道，因为它们在同一个帐户下运行。

Windows 服务具有更高的权限，因此可以创建一个全局范围的命名管道供客户端应用程序查看。

您可以查看[Christian Weyer 博客](http://weblogs.thinktecture.com/cweyer/2007/12/dealing-with-os-privilege-issues-in-wcf-named-pipes-scenarios.html)上的讨论。

# ios - fontWithName:size: 如何将自己的字体导入项目？

> ID：10300491
> 
> 赞同：3
> 
> 时间：2012-04-24T14:54:38.410
> 
> 标签：ios, iphone, objective-c, uifont, custom-font

我尝试将自己的字体导入到项目中，但我被卡住了。我做了我的研究，发现[了这一点](https://stackoverflow.com/questions/360751/can-i-embed-a-custom-font-in-an-iphone-application) ，但是**从 iOS 3.2 开始，这个功能是内置的。如果你需要支持 pre-3.2，你仍然可以使用这个解决方案。**我为 iOS 5.0 创建应用程序。

我尝试使用`fontWithName:size:`并且[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIFont_Class/Reference/Reference.html)说**字体的完全指定名称。此名称包含字体系列名称和字体的特定样式信息。**所以我把我的显示名称放在那里。

```
cell.textLabel.font = [UIFont fontWithName:@"Sansation-Light" size:10.0]; 
```

但它不起作用。我在哪里存储此字体？在我的项目中？这是正确的名字吗？我的字体名称是：`Sansation_Light.ttf`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:43:07.517

为了这，

```
 You have to add  key   "Fonts provided by application" in your info.plist .   
  for that key add  your ttf file name  for ex: "Sansation_Light.ttf" .
  it works fine for me. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T07:26:21.703

这行得通！ [http://kgriff.posterous.com/45359635](http://kgriff.posterous.com/45359635)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-24T15:12:39.540

这似乎是Sansation和Light之间的界限，应该是

```
cell.textLabel.font = [UIFont fontWithName:@"Sansation_Light" size:10.0]; 
```

或将您的字体名称更改为 Sansation-Light.ttf

# c# - 在两个单独的屏幕上加载两个窗口

> ID：10300496
> 
> 赞同：1
> 
> 时间：2012-04-24T14:54:55.090
> 
> 标签：c#, wpf, mvvm

我正在尝试创建一个 WPF 演示应用程序，其中主屏幕上的主窗口将用于更新演示窗口上的内容，该窗口需要位于辅助屏幕上。我正在寻找可以帮助我做到这一点的示例或代码片段。

![在此处输入图像描述](../Images/c37129c190a07af71dafb1e6749c4779.png)

我也尝试了以下但不起作用：

```
protected override void OnStartup(StartupEventArgs e)
        {
            base.OnStartup(e);

            var screens = System.Windows.Forms.Screen.AllScreens;
            if (screens.Length > 1)
            {
                var window = new MainWindow
                {
                    WindowStartupLocation = WindowStartupLocation.Manual,
                    WindowState = WindowState.Maximized,

                    Top = screens[0].WorkingArea.Top,
                    Left = screens[0].WorkingArea.Left,
                    Topmost = true
                };
                window.Show();

                var pesentationWindow = new PresentationWindow
                {
                    WindowStartupLocation = WindowStartupLocation.Manual,
                    ShowInTaskbar = false,
                    Top = screens[1].WorkingArea.Top,
                    Left = screens[1].WorkingArea.Left,
                    Topmost = true
                };
                pesentationWindow.Show();
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:01:07.423

使用[`System.Windows.Forms.Screen.AllScreens`](http://msdn.microsoft.com/en-us/library/system.windows.forms.screen.allscreens.aspx)静态属性，您可以计算出有多少个屏幕以及它们的分辨率。找出哪个是第二个`PrimaryScreen`窗口并将辅助窗口设置为正确的大小和位置。**有关详细信息，请参阅：[在辅助监视器中创建 WPF 窗口时遇到问题](https://stackoverflow.com/questions/8362865/trouble-creating-a-wpf-window-in-a-secondary-monitor)**

然后只需创建两个单独的 Window 类，以不同方式绑定 DataContext 的绑定。例如：

```
class DataContext
{
   public string Header { get; set; }
} 
```

```
<Window Title="Primary Window">
   <TextBox Text="{Binding Header}"/>
</Window> 
```

```
<Window Title="Presentation Window">
  <TextBlock Content="{Binding Header}"/>
</Window> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T07:52:37.287

您可以通过这种方式使用 Screen 对象

```
protected override void OnStartup(StartupEventArgs e)
{
    base.OnStartup(e);

    Window1 w1 = new Window1();
    Window2 w2 = new Window2();

    Screen s1 = Screen.AllScreens[0];
    Screen s2 = Screen.AllScreens[1];

    Rectangle r1 = s1.WorkingArea;
    Rectangle r2 = s2.WorkingArea;

    w1.Top = r1.Top;
    w1.Left = r1.Left;

    w2.Top = r2.Top;
    w2.Left = r2.Left;

    w1.Show();
    w2.Show();

    w2.Owner = w1;

} 
```

点击此[链接](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/5d181304-8952-4663-8c3c-dc4d986aa8dd)了解更多详情。

# security - How to use HttpServletRequest#login() programmatic login with SHA-256 configured security realm

> ID：10300503
> 
> 赞同：1
> 
> 时间：2012-04-24T14:55:09.593
> 
> 标签：security, jsf, jsf-2, glassfish-3, servlet-3.0

i have read [there](https://stackoverflow.com/a/2207147/921535), i am using glassfish 3.1.1 security realm configured with sha-256 digest algorithm. is there any tutorial about this ? maybe i am blethering, i am trying to login with this code:

```
public void login() throws NoSuchAlgorithmException {
    FacesContext context = FacesContext.getCurrentInstance();
    HttpServletRequest request = (HttpServletRequest)context.getExternalContext().getRequest();

    EntityManager em = emf.createEntityManager();
    boolean committed = false;
    try {
        FacesMessage msg = null;
        EntityTransaction entr = em.getTransaction();
        entr.begin();
        try {
            MessageDigest md = MessageDigest.getInstance("SHA-256");
            md.update(password.getBytes());
            byte byteData[] = md.digest();
            StringBuffer sb = new StringBuffer();
            for (int i = 0; i < byteData.length; i++) {
                sb.append(Integer.toString((byteData[i] & 0xff) + 0x100, 16).substring(1));
            }
            password = sb.toString();
            Query query = em.createQuery("SELECT COUNT(u) FROM EntityUser u WHERE u.userName = :userName AND u.password = :password")
                    .setParameter("userName", userName).setParameter("password", password);
            long result = (long)query.getSingleResult();
            if (result == 1) {
                request.login(userName, password);
                msg = new FacesMessage();
                msg.setSeverity(FacesMessage.SEVERITY_INFO);
                msg.setSummary("You are logged in");
            }
            entr.commit();
            committed = true;
        } catch (ServletException e) {
            context.addMessage(null, new FacesMessage("wrong username or password"));
        }
        finally {
            if (!committed) entr.rollback();
        }
    } finally {
        em.close();
    }
} 
```

result variable returns 1, but request.login(userName, password); method in if condition always throws servletexception.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-27T08:12:24.220

您可以发布异常堆栈跟踪吗？这样就更容易理解异常的来源。但是从您当前提供的代码来看，您应该提供

```
request.login(userName, password); 
```

密码为纯文本密码，而不是散列密码。

```
Interface HttpServletRequest
ServletException - if the configured login mechanism does not support username password
authentication, or if a non-null caller identity had already been established (prior to 
the call to login), or if validation of the provided username and password fails. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T16:41:26.757

登录失败可能有很多原因。您刚刚检查了适当的用户和密码是否在表中。Glassfish 在身份验证过程中对两个表进行了两次查询。一到指定为 的表`userTable`，二到`groupTable`在安全领域定义中确定。检查 web.xml 和 glassfish-web.xml 是否也正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-08T14:03:38.630

质疑的问题完全是关于方法的

> request.login（用户名，密码）；

作者做的一切都是正确的，甚至是他自己使用用户数据库的身份验证方式，但是*request.login*需要设置身份验证域，才能用于此方法。你有你自己的，你不需要单独的*request.login*身份验证。对于您需要它的情况 - 这就是您的操作方式[jdbc-realm-setup-with-glassfish-v3](http://blog.gamatam.com/2009/11/jdbc-realm-setup-with-glassfish-v3.html)

所以，在你得到 result=1 之后，你设置你的`context.getExternalContext().getSessionMap().put("user", u);` 并发送重定向 `context.getExternalContext().redirect(context.getExternalContext().getRequestContextPath() + "какой-то модуль.xhtml");`

并使用 webfilter 在不登录的情况下阻止对 /Pages/*.xhtml 的访问。

```
@WebFilter("/Pages/*")
    public class LoggingFilter implements Filter {

        @Override
        public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
            HttpServletRequest req = (HttpServletRequest)request;
            HttpServletResponse res = (HttpServletResponse)response;
            User user = (User) req.getSession().getAttribute("user");         
            if(user != null){
                chain.doFilter(request,response);
            }  
            else res.sendRedirect(req.getContextPath()+"/запрос_учетных_данных.xhtml");
        }

        @Override
        public void init(FilterConfig filterConfig) throws ServletException {
        }

        @Override
        public void destroy() {
        }
    } 
```

# ios - iOS：存储联系信息和 GPS 坐标的最佳方式

> ID：10300506
> 
> 赞同：0
> 
> 时间：2012-04-24T14:55:25.807
> 
> 标签：ios, nsmutablearray, mkmapview, nsmutabledictionary, abaddressbook

我想在将特定信息添加到我的 UITableView 之前存储它

我正在访问最终用户地址簿并获取

```
First Name
Last Name
Street Address
City
State
Zip 
```

然后我使用 MKReverseGeocoder 来获取 GPS 坐标

所以我需要存储地址簿中的数据并将其与我收到的 GPS 坐标配对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:55:02.237

您可以执行`NSDictionary`(use `[NSMutableDictionary][1]`) 并将其存储在`[NSUserDefaults][2]`.

节省：

```
[[NSUserDefaults standardUserDefaults] setObject:yourDictionary forKey:@"AkeyToUseAgainShouldBeAConstant"]; 
```

加载：

```
NSDictionary *yourDictionary = [[NSUserDefaults standardUserDefaults] objectForKey:@"AkeyToUseAgainShouldBeAConstant"]; 
```

如果您需要它再次可变（更改内容）

```
NSMutableDictionary *yourDictionaryMutable = [[[[NSUserDefaults standardUserDefaults] objectForKey:@"AkeyToUseAgainShouldBeAConstant"] mutableCopy] autorelease]; 
```

# javascript - 一段 Javascript 阻止另一段加载

> ID：10300508
> 
> 赞同：0
> 
> 时间：2012-04-24T14:55:34.803
> 
> 标签：javascript, html

下面的代码似乎相互抵消了，上面的代码有效，但下面的代码无效，但是当我删除顶部时，一切正常！

可以在此处找到两者的工作示例：[http](http://www.healthygit.com) ://www.healthygit.com ，因为您可以看到菜单上的淡入淡出不起作用，但手风琴起作用...有谁知道是什么原因造成的？

```
<script>
$(function() {
    $('#slidorion').slidorion({
        first: 2,
        easing: 'easeInOutCubic',
        effect: 'random'
    });
});
</script>

<title>Healthy Git | Health And Fitness Guide</title>
</head>
<body>
<div id="headerimage"></div>
<script type="text/javascript">
$(document).ready(function($){
$('.megamenu').megaMenuCompleteSet({
    menu_speed_show : 300, // Time (in milliseconds) to show a drop down
    menu_speed_hide : 200, // Time (in milliseconds) to hide a drop down
    menu_speed_delay : 300, // Time (in milliseconds) before showing a drop   down
    menu_effect : 'hover_fade', // Drop down effect, choose between    'hover_fade', 'hover_slide', etc.
    menu_click_outside : 1, // Clicks outside the drop down close it (1 = true,    0 = false)
    menu_show_onload : 0 // Drop down to show on page load (type the number of      the drop down, 0 for none)
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:29:26.497

您的 javascript 中有错误。

未捕获的类型错误：对象 [对象对象] 没有方法“megaMenuCompleteSet”

我猜是您的菜单未正确加载或未初始化。

您可以使用 Firebug(FF) 或 Inspect Element(Chrome) 调试 javascript

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:55:12.187

我没有看到任何特别错误的地方，但是如果没有其余代码，就很难看到。我的猜测是 slidorion 函数尚未添加到 jQuery 原型中，即：

```
$.fn.slidorion = function() {
    //do something
} 
```

# python - 如果 IPython 存在，则将 IPython 与代码模块互换使用

> ID：10300510
> 
> 赞同：3
> 
> 时间：2012-04-24T14:55:40.983
> 
> 标签：python, ipython

在现有的代码片段中，我有

```
import sys
from code import InteractiveConsole

class FileCacher:
    "Cache the stdout text so we can analyze it before returning it"
    def __init__(self):
        self.reset()

    def reset(self):
        self.out = []

    def write(self, line):
        self.out.append(line)

    def flush(self):
        output = '\n'.join(self.out)
        self.reset()
        return output

class Shell(InteractiveConsole):
    "Wrapper around Python that can filter input/output to the shell"
    def __init__(self):
        self.stdout = sys.stdout
        self.cache = FileCacher()
        InteractiveConsole.__init__(self)
        return

    def get_output(self):
        sys.stdout = self.cache

    def return_output(self):
        sys.stdout = self.stdout

    def push(self, line):
        self.get_output()
        # you can filter input here by doing something like
        # line = filter(line)
        InteractiveConsole.push(self, line)
        self.return_output()
        output = self.cache.flush()
        # you can filter the output here by doing something like
        # output = filter(output)
        print output  # or do something else with it
        return

if __name__ == '__main__':
    sh = Shell()
    sh.interact() 
```

如果 IPython 可用，我如何修改它以使用 IPython 的交互式 shell，如果可能的话不更改其余代码。

我尝试将第 2 行`from code import InteractiveConsole`替换为，`from IPython.core import interactiveshell as InteractiveConsole`但显然，它不是一个可直接互换的类。

什么是最好的方法来做到这一点（对代码库的其余部分的改变最小）除了存在时`IPython`优先使用`code`模块`IPython`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:32:05.613

这是我自己的尝试：-

```
import sys
from code import InteractiveConsole

class FileCacher:
    "Cache the stdout text so we can analyze it before returning it"
    def __init__(self):
        self.reset()

    def reset(self):
        self.out = []

    def write(self, line):
        self.out.append(line)

    def flush(self):
        output = '\n'.join(self.out)
        self.reset()
        return output

class Shell(InteractiveConsole):
    "Wrapper around Python that can filter input/output to the shell"
    def __init__(self):
        self.stdout = sys.stdout
        self.cache = FileCacher()
        InteractiveConsole.__init__(self)
        return

    def get_output(self):
        sys.stdout = self.cache

    def return_output(self):
        sys.stdout = self.stdout

    def push(self, line):
        self.get_output()
        # you can filter input here by doing something like
        # line = filter(line)
        InteractiveConsole.push(self, line)
        self.return_output()
        output = self.cache.flush()
        # you can filter the output here by doing something like
        # output = filter(output)
        print output  # or do something else with it
        return

if __name__ == '__main__':
    try:
        import IPython
        IPython.embed()
    except:
        sh = Shell()
        sh.interact() 
```

这似乎工作正常，但我可能丢失了`cache`自`stdout`定义方法/功能。

欢迎任何批评、编辑和改进建议！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:25:20.210

我不是一个大专家（所以如果我错了请不要投反对票），但我认为你可以选择类似的东西

try: from IPython.core import interactiveshell as InteractiveConsole #facade code here，如果需要，除了 ImportError: from code import InteractiveConsole #fallback case

这样，您将获得您的`code.InteractiveConsole`，如果它存在并且`IPython.core.interactiveshell`以其他方式重新映射为`InteractiveConsole`. 无论如何，您都必须更改方法名称和签名，或者尝试构建某种外观或适配器。

一种可能的方法是将所有必需的函数调用别名到您的命名空间并使用此别名。与“外观”代码相比，您只需定义具有相同签名（名称和参数列表）的函数并让它们调用`interactiveshell`函数：

```
try:
     from IPython.core import interactiveshell as InteractiveConsole
     def func1(a,b,c):
          InteractiveConsole.some_other_func(a,b,c)
except ImportError:
     from code import InteractiveConsole        #fallback case
     func1 = InteractiveConsole.func1

...
func1(a,b,c) 
```

# android - Eclipse 和 Android：无法在三星 Galaxy S2 上调试，因为未检测到

> ID：10300511
> 
> 赞同：5
> 
> 时间：2012-04-24T14:55:41.203
> 
> 标签：android, linux, eclipse, ubuntu, galaxy

我刚刚开始学习Android开发。我使用 Ubuntu 11.10 和 Eclipse。我已经从 android 开发中安装了所需的插件，并且我还编写了一些在模拟器上编译和运行良好的示例。

但是不能在模拟器上测试多点触控，所以我想在我真正的三星 Galaxy S2 设备上测试它们。问题是我已经尝试了我在网上找到的所有东西，但仍然无法使用它。

当我运行 ./adb devices 时，它确实没有显示，尽管设备已连接。

```
$ lsusb
...
Bus 001 Device 012: ID 04e8:6860 Samsung Electronics Co., Ltd 
$ ./adb devices
List of devices attached 
```

我已经按照网络上的说明以不同的方式修改了 /etc/udev/rules.d/51-android.rules 多次，但它们都没有任何区别。目前我有这行：

```
SUBSYSTEM=="usb", ATTRS{idVendor}=="04e8", ATTRS{idProduct}="6860", MODE="0666", GROUP="plugdev" 
```

当然我试过重启udev和adb服务，甚至重启整个系统，但也没有用。

有什么提示吗？

非常感谢提前，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T05:26:03.827

从设置 -> 应用程序 -> 开发中启用设备上的 USB 调试

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T15:02:07.710

试试三星 kies，它提供了合适的 ADB 驱动程序：http: [//www.samsung.com/uk/support/usefulsoftware/KIES/JSP](http://www.samsung.com/uk/support/usefulsoftware/KIES/JSP)

使用正确的 adb 驱动程序（来自 kies 或其他地方），它应该可以完美运行

编辑：在 linux 上：http: [//developer.android.com/tools/device.html](http://developer.android.com/tools/device.html)

> 如果您在 Ubuntu Linux 上进行开发，则需要添加一个 udev 规则文件，其中包含您要用于开发的每种设备类型的 USB 配置。在规则文件中，每个设备制造商都由唯一的供应商 ID 标识，由 ATTR{idVendor} 属性指定。有关供应商 ID 的列表，请参阅下面的 USB 供应商 ID。要在 Ubuntu Linux 上设置设备检测： 以 root 身份登录并创建此文件：/etc/udev/rules.d/51-android.rules。使用此格式将每个供应商添加到文件中：SUBSYSTEM=="usb", ATTR{idVendor}=="0bb4", MODE="0666", GROUP="plugdev"
> 
> 在此示例中，供应商 ID 用于 HTC。MODE 分配指定读/写权限，而 GROUP 定义哪个 Unix 组拥有设备节点。注意：规则语法可能会因您的环境而略有不同。根据需要查阅适用于您系统的 udev 文档。有关规则语法的概述，请参阅编写 udev 规则的指南。现在执行： chmod a+r /etc/udev/rules.d/51-android.rules

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T15:00:59.130

尝试另一根 USB 数据线

如果有可能，请检查它是否适用于其他设备

本地化您的问题，确保软件有问题（如果有）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T15:09:09.547

从终端执行以下命令

```
$ echo "0x04e8" >> ~/.android/adb_usb.ini 
```

并使用重新启动 adb

```
$ adb kill-server
$ adb start-server 
```

检查设备是否列出使用`adb devices`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T04:28:26.203

我在带有 Eclipse 的 Mac OS X 上遇到了同样的问题。简单地将手机置于“调试”模式（设置 -> 应用程序 -> 开发 -> USB 调试）并不能解决问题。我必须在命令行中执行以下操作才能解决问题。

```
sudo adb kill-server
sudo adb start-server 
```

# java - 如何在 h:dataTable 中实现行编号

> ID：10300514
> 
> 赞同：4
> 
> 时间：2012-04-24T14:55:48.813
> 
> 标签：java, jsf, jsf-2

我有这个带有分页的 JSF 表。

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"    
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <ui:insert name="header">           
            <ui:include src="header.xhtml"/>         
        </ui:insert>
        <script type="text/javascript" src="resources/js/jquery-1.7.2.min.js"></script>
    </h:head>
    <h:body>

        <h1><img src="resources/css/images/icon.png" alt="DX-57" /> History Center</h1>
        <!-- layer for black background of the buttons -->
        <div id="toolbar" style="margin: 0 auto; width:1180px; height:30px; position:relative;  background-color:black">
            <!-- Include page Navigation -->
            <ui:insert name="Navigation">           
                <ui:include src="Navigation.xhtml"/>         
            </ui:insert>

        </div>  

        <div id="logodiv" style="position:relative; top:35px; left:0px;"> 
            <h:graphicImage alt="Dashboard"  style="position:relative; top:-20px; left:9px;"  value="resources/images/logo_sessions.png" />
        </div>
        <div id="main" style="margin: 0 auto; width:1190px; height:700px; position:absolute;  background-color:transparent; top:105px">

            <div id="mainpage" style="margin: 0 auto; width:1190px; height:500px; position:absolute;  background-color:transparent; top:80px">

                <div id="settingsHashMap" style="width:750px; height:400px; position:absolute;  background-color:r; top:20px; left:1px">

                    <h:form id="form">

                        <!-- The sortable data table -->
                        <h:dataTable id="dataTable" value="#{SessionsController.dataList}" var="item">
                            <!-- Check box -->
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Select" />
                                </f:facet>
                               <h:selectBooleanCheckbox onclick="highlight(this)" value="#{SessionsController.selectedIds[dataItem.id]}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Account Session ID" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Account Session ID" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.aSessionID}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="User ID" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="User ID" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.userID}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity Start Time" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity Start Time" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activityStart}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity End Time" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity End Time" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activityEnd}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activity}" />
                            </h:column>
                        </h:dataTable>

                        <f:verbatim><br/><hr /><br/></f:verbatim>

                        <table>
                            <tr>
                                <td>№&lt;/td>
                                <td>Select</td>
                                <td>Account Session ID</td>
                                <td>User ID</td>
                                <td>Activity Start Time</td>
                                <td>Activity End Time</td>
                                <td>Activity</td>
                            </tr>

                            <ui:repeat value="#{SessionsController.dataList}" var="i" varStatus="status">
                                <tr>
                                    <td>#{status.index + 1 + i.firstRow}</td>
                                    <td><h:selectBooleanCheckbox  value="#{i.selected}" /></td>
                                    <td><h:outputText value="#{i.aSessionID}" /></td>
                                    <td><h:outputText value="#{i.userID}" /></td>
                                    <td><h:outputText value="#{i.activityStart}" /></td>
                                    <td><h:outputText value="#{i.activityEnd}" /></td>
                                    <td><h:outputText value="#{i.activity}" /></td>
                                </tr>
                            </ui:repeat>
                        </table>
                        <!-- The paging buttons -->
                        <h:commandButton value="first" action="#{SessionsController.pageFirst}"
                                         disabled="#{SessionsController.firstRow == 0}" />
                        <h:commandButton value="prev" action="#{SessionsController.pagePrevious}"
                                         disabled="#{SessionsController.firstRow == 0}" />
                        <h:commandButton value="next" action="#{SessionsController.pageNext}"
                                         disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" />
                        <h:commandButton value="last" action="#{SessionsController.pageLast}"
                                         disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" />
                        <h:outputText value="Page #{SessionsController.currentPage} / #{SessionsController.totalPages}" />
                        <br />

                        <!-- The paging links -->
                        <ui:repeat value="#{SessionsController.pages}" var="page">
                            <h:commandLink value="#{page}" actionListener="#{SessionsController.page}"
                                           rendered="#{page != SessionsController.currentPage}" />
                            <h:outputText value="#{page}" escape="false"
                                          rendered="#{page == SessionsController.currentPage}" />
                        </ui:repeat>
                        <br />

                        <!-- Set rows per page -->
                        <h:outputLabel for="rowsPerPage" value="Rows per page" />
                        <h:inputText id="rowsPerPage" value="#{SessionsController.rowsPerPage}" size="3" maxlength="3" />
                        <h:commandButton value="Set" action="#{SessionsController.pageFirst}" />
                        <h:message for="rowsPerPage" errorStyle="color: red;" />

                    </h:form>                  

                </div>   

                <div id="settingsdivb" style="width:350px; height:400px; position:absolute;  background-color:transparent; top:20px; left:800px">

                </div>   
            </div>  
        </div>

        <script type="text/javascript">
              $("tr").not(':first').hover(
              function () {
                $(this).css("background","#707070");
              }, 
              function () {
                $(this).css("background","");
              }
            );              

            function highlight(param) {  
            var row = jQuery(param).parent().parent().children();
                row.toggleClass('highlited');
            }        
        </script>

    </h:body>
</html> 
```

我创建了简单的行数示例，只是为了用非常简单的 html 表来表示行数。在第二个表中分页工作，但我不知道如何实现`ui:repeat`到`h:dataTable`以实现行计数。我该如何实现呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T15:10:08.120

使用[`UIData#getRowIndex()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIData.html#getRowIndex%28%29).

```
<h:dataTable binding="#{table}" ...>
    <h:column>
        #{table.rowIndex + SessionsController.firstRow + 1}
    </h:column>
    ...
</h:dataTable> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:06:27.643

我不确定我理解正确。你只想要编号的行？

但是，我认为这并不像您想象的那么容易。h:dataTable 实际上不支持这个。混合 h:dataTable 和 ui:repeat 似乎是完全错误的方法（如果我理解正确的话）。

你可以：

*   使用 t:dataTable（来自 Tomahawk：[http](http://myfaces.apache.org/tomahawk/index.html) ://myfaces.apache.org/tomahawk/index.html ）。在那里您可以使用 rowIndexVar 属性，如下所示：

    ```
    <t:dataTable rowIndexVar="row" value="#{someBean.value}">  
        <h:column>  
            <h:outputText value="#{row + 1}"/>  
        </h:column>  
    </t:dataTable> 
    ```

*   或者，更改您的数据模型并在其中提供索引。或者使用包装类：

    ```
    public class DataWrapper{
        private int index;
        private Object model;
        // getter and setter
        ...
    } 
    ```

    然后将 DataWrapper 列表传递给 JSF，而不是直接传递给您的模型。当然，您首先需要在服务层中的某处设置索引。

我希望这有帮助。如果您需要进一步的帮助，请告诉我。

# r - 在 R 中的 levelplot 函数中调整轴标签的字体大小

> ID：10300518
> 
> 赞同：2
> 
> 时间：2012-04-24T14:56:04.693
> 
> 标签：r, levelplot

我有 90 x 90 的矩阵，我正在尝试获得一个数组相关矩阵。使用以下命令：

```
pdf('corr.pdf')
data <- read.table("test", header=T) 
z <- cor(data)
levelplot(z)
dev.off() 
```

我得到这样的图像，我的标签被弄脏了![在此处输入图像描述](../Images/90554abad320bad727b7e3d3b0ce6cfb.png)

请提出您的建议，以改善形象。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-24T15:21:57.303

**编辑**：以[levelplot 手册](http://stat.ethz.ch/R-manual/R-devel/library/lattice/html/levelplot.html)`scales=list(log="e")`中的第一个示例并将参数更改为`scales=list(log="e",x=list(cex=.3),y=list(cex=.3))`：

```
x <- seq(pi/4, 5 * pi, length.out = 100)
y <- seq(pi/4, 5 * pi, length.out = 100)
r <- as.vector(sqrt(outer(x^2, y^2, "+")))
grid <- expand.grid(x=x, y=y)
grid$z <- cos(r^2) * exp(-r/(pi^3))
levelplot(z~x*y, grid, cuts = 50, 
      scales=list(log="e",x=list(cex=.3),y=list(cex=.3)), xlab=list(cex=.05),
      ylab=list(cex=.25), main=list(label="Weird Function", cex=5), sub="with log scales",
      colorkey = FALSE, region = TRUE) 
```

这会将轴标签的字体大小减小 0.3 倍。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T15:20:27.877

你可以用

```
pdf('corr.pdf', width=100, height=100)
data <- read.table("test", header=T) 
z <- cor(data)
levelplot(z)
dev.off() 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-25T10:35:38.947

最终获胜者是：

```
pdf('corr.pdf')
data <- read.table("test", header=T)
z <- cor(data)
heatmap.2(z, Rowv=FALSE, Colv=FALSE, dendrogram="none", 
          key=TRUE, density.info="none", trace="none", 
          col=colorpanel(100, lowColor, highColor), scale="none",cexRow=0.3, cexCol=0.3 )
dev.off() 
```

# silverlight - 如何停止包含“Copy Local=False”dll 的 Silverlight xap 文件？

> ID：10300519
> 
> 赞同：0
> 
> 时间：2012-04-24T14:56:07.550
> 
> 标签：silverlight, visual-studio-2010, copy, xap

过去，我使用以下 URL 中概述的解决方案来避免在模块化 Silverlight 应用程序中多次下载第 3 方 dll：

[如何通过删除常用文件来优化 silverlight XAP 文件的大小？](https://stackoverflow.com/questions/6048269/how-to-optimize-the-size-of-silverlight-xap-file-by-removing-common-files)

但是，我正在开发一个不起作用的 Visual Studio 2010/Silverlight 5 解决方案应用程序。

我有一个 PRISM 模块，我们称之为 Parent1.csproj，它没有引用我的 3rdParty dll，但它确实引用了其他两个引用 3rdParty dll child1.csproj 和 child2.csproj 的项目文件

child1.csproj 和 child2.csproj 都将 3rdParty.dll 的“复制本地”设置为 false，但尽管如此，Parent1.csproj 的 .xap 文件仍包含第 3 方 dll。

如果我在 Parent1.csproj 文件中将 child1.csproj 和 child2.csproj 引用设置为 false，那么我会得到一个显着减少的 xap 文件，其中没有第 3 方 dll，但也没有子项目中的其他代码我实际上需要能够运行。

似乎包含的项目文件忽略了它们的“复制本地”设置并使用父“复制本地”设置，我无法排除那些 3rdParty.dll

我在这里错过了一些微妙的东西吗？当外壳应用程序已经下载它们时，是否有其他方法可以避免在多个模块中下载这些 3rdParty.dll？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T15:04:41.870

我不是 100% 确定*为什么*会出现这个问题，但它与 Prism 有关。我们解决它的方法是添加对所有启动项目和每个子项目的引用，*即使它们不是直接引用*而是该项目。

1.  确保为**所有**项目启用“使用应用程序库缓存来减少 XAP 大小”。

2.  确保它`Parent1.csproj`引用了所有 3 ^(rd)方 dll。

3.  将这些相同的引用添加到`child1.csproj`和`child2.csproj`。

4.  仔细检查您是否有所有 3 ^(rd)方 dll 的 extmap 文件。如果这些缺失，dll 将被加载到 XAP 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-15T21:05:04.790

添加对模块项目的引用并将其上的 Copy Local 设置为 false 将起作用，这或多或少是公认的答案所描述的。但是，Prism 模块不支持应用程序库缓存，因此可能无法按预期工作。

如果您有很多程序集引用，那么以这种方式添加它们不是很容易维护。您还可以使用构建后步骤从 XAP 中删除不需要的程序集。这是我写的一篇关于如何做的简短[文章。](http://thorarin.net/blog/post/2013/09/15/XapReduce-Optimizing-Modular-Silverlight-Applications.aspx)

# iphone - 如何在不使用仪器的情况下查找 iphone 应用程序中的内存分配和泄漏？

> ID：10300520
> 
> 赞同：0
> 
> 时间：2012-04-24T14:56:09.140
> 
> 标签：iphone, ios, xcode, ipad, instruments

我计划创建一个 iPhone/ipad 应用程序，它可以检查设备上可用应用程序的分配和泄漏。目前我不知道是否有任何现有的 API（可能是私有的，因为我不打算将它提交到应用商店）来实现这一点。我的想法可能有点疯狂，但任何人都可以知道它是否可行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T15:11:56.890

**更新 1：（您的问题错了！）** 在未越狱的手机（沙盒）上无法分析 iOS 应用程序中的其他应用程序。如果您可以越狱，请尝试在 iOS 上编译 valgrind（非常难！）并围绕它构建一个 GUI（iOS 应用程序）。

如果您在应用程序中搜索泄漏（不同的问题）：对于内存泄漏，您不需要 API。

我会推荐你​​...

1.  ...使用[ARC](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)。
2.  ... 使用适用于 iOS 的[valgrind](http://landonf.bikemonkey.org/code/iphone/iPhone_Simulator_Valgrind.20081224.html)（流行的 c 检测框架）（仅限模拟器）。

当您在模拟器中发现并修复泄漏时，它们在 iOS 设备版本上也得到修复的几率 >99.9%。

但是为什么不使用仪器呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T15:17:43.093

iOS 应用程序是沙盒的——一个应用程序无法查看另一个应用程序的内存或资源。因此，您将无法编写检测其他应用程序泄漏的应用程序。如果您愿意越狱您的设备，故事可能会或可能不会有所不同，但在这种情况下查找信息将被证明是困难的。

# java - Play 框架中文件下载完成时的通知

> ID：10300523
> 
> 赞同：3
> 
> 时间：2012-04-24T14:56:29.643
> 
> 标签：java, playframework, playframework-1.x

我成功地使用 Play 1.2.4 为使用 renderBinary() 方法的用户提供大型二进制文件下载。

我想知道用户何时真正完成下载。一般来说，我知道这在某种程度上是可能的，因为我以前做过。在我网站的旧版本中，我编写了一个简单的 servlet，用于提供二进制文件下载。一旦该 servlet 完成了文件内容的写出，就会发送一个通知。当然不是完美的，但仍然有用。在我的测试中，它确实提供了用户下载文件所需时间的指示。

查看 Play 源代码，我看到 play.mvc.results.RenderBinary 类有一个方便的 apply() 方法，我可以使用它。我编写了自己的 RenderBinary 版本，因此可以在 apply() 方法写完文件内容后发送通知。

我发现的问题是对 response.out.write() 的调用显然会缓存传出字节（通过 Netty？），所以即使我正在写出几兆字节的数据，对 play.mvc.Http.Response.out 的调用.write() 在几秒钟内完成，即使下载器需要几分钟才能下载文件。

我不介意编写自定义类，尽管我更喜欢使用股票 Play 1.2.4 发行版。

关于如何在文件下载结束时向用户浏览器推送通知的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:06:29.543

这似乎可以帮助你，因为它解决了一个类似的问题：

[检测浏览器何时接收文件下载](https://stackoverflow.com/questions/1106377/detect-when-browser-receives-file-download)

我不确定您是否能够通过控制器中`renderBinary`的`@After`注释来做到这一点。一些浏览器端检测下载，然后通知服务器（ping 下载结束）会起作用。

可能有另一种选择：使用 WebSockets（通过套接字流式传输文件，然后让客户端回答），但这可能是矫枉过正:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T09:30:26.370

您可以使用[ArchivedEventStream](http://www.playframework.com/documentation/api/1.2.5/index.html)。

首先创建一个可序列化的 ArcivedEventStream 类..

```
public class Stream<String> extends ArchivedEventStream<String> implements Serializable{

   public Stream(int arg0) {
        super(arg0);
   }

} 
```

然后在你的控制器上......

```
public static void downloadPage(){
    Stream<String> userStream = Cache.get(session.getId(),Stream.class);
    if( userStream == null){
        userStream = new Stream<String>(5);
        Cache.add(session.getId(), userStream);
    }
    render();
}

public static void download(){
    await(10000);// to provide some latency. actually no needed
    renderBinary(Play.getFile("yourfile!"));
}

public static void isDownloadFinished(){
    Stream<String> userStream = Cache.get(session.getId(),Stream.class);
    List<IndexedEvent<String>> list = await(userStream.nextEvents(0));
    renderJSON(list.get(0).data);

}

@After(only="download")
static void after(){
    Stream<String> userStream = Cache.get(session.getId(),Stream.class);
    userStream.publish("ok");
} 
```

在你的 html...

```
#{extends 'main.html' /}

#{set title:'downloadPage' /}
<a href="download" target="_blank">download</a>

<script>
$(document).ready(function(){
$.ajax('/application/isDownloadFinished',{success:function(data){
    if(data){
        console.log("downloadFinished");    
    }

}});
});

</script> 
```

下载完成后，原始页面将检索通知。

此代码只是一个示例。您可以阅读 ArchivedEventStream 的 api 并进行自己的实现..

# apache - Tomcat 多个本地主机实例

> ID：10300527
> 
> 赞同：1
> 
> 时间：2012-04-24T14:56:39.530
> 
> 标签：apache, tomcat, localhost, instances

将 Tomcat 配置为具有两个 localhost 实例的最聪明的方法是什么？

请注意，我没有系统管理员权限，因此无权访问 /etc/hosts 文件。我希望能够执行以下操作，但无法修改我的 /etc/hosts 文件：http: [//juststuffreally.blogspot.com/2007/03/enabling-multiple-localhost-sites-in.html](http://juststuffreally.blogspot.com/2007/03/enabling-multiple-localhost-sites-in.html)

我想要这样的东西，以便我的 localhost 实例如下所示：

keith.localhost.com joe.localhost.com

...但我无法修改我的 /etc/hosts 文件 =-(

我发现的另一个资源是这个，但这给出了多个外部域的说明——我需要多个 localhost 实例：http: [//iam-rakesh.blogspot.com/2009/10/hosting-multiple-domains-in-tomcat。 html](http://iam-rakesh.blogspot.com/2009/10/hosting-multiple-domains-in-tomcat.html)

有任何想法吗？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T15:05:59.030

您可以在多个端口上运行多个 tomcat 实例。每个实例都需要一个唯一`server.xml`的，并且每个实例都需要在适当的`<Server>`和`<Connector>`元素中定义不同的端口。

设置好所有内容后，您将在连接到实例时指定一个显式端口，例如：

```
- http://localhost:8080/
- http://localhost:8081/ 
```

[本文档](http://kief.com/running-multiple-tomcat-instances-on-one-server.html)更详细地介绍了该过程。

# ruby-on-rails - 为什么我的 Rails 应用程序不获取服务器上错误消息的翻译

> ID：10300529
> 
> 赞同：2
> 
> 时间：2012-04-24T14:56:40.720
> 
> 标签：ruby-on-rails, internationalization

我有一个在 Ruby 1.9.2 上运行的 Rails 3.2.3 站点。我使用 rails-i18n gem 进行翻译，并将国际化设置设置为荷兰语翻译：

```
config.i18n.available_locales = :nl
config.i18n.default_locale = :nl 
```

我还将翻译文件添加到我的语言环境地图中，这甚至不需要。

当我在本地以开发或生产模式运行站点时，所有翻译都得到正确处理，包括错误消息。但是，当我将站点部署到我的服务器（托管在 Webfaction 上，使用 nginx）时，它不使用错误消息的翻译；它们仍以英文显示。

我确实重新启动了服务器，我进行了预编译，并且我只是通过从服务器上的 github 拉取来“部署”。

为了使网站使用荷兰语翻译错误，我还应该做些什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T10:23:34.773

rails-i18n gem 包含它自己的翻译文件 - 您的生产环境是否可能没有使用相同的 gemset？

在这种情况下，解决方案将是`bundle update`在生产服务器上。

或者，您可以

*   将所需的翻译文件复制到 config/locales 中（荷兰语文件在这里：[https](https://github.com/svenfuchs/rails-i18n/blob/master/rails/locale/nl.yml) ://github.com/svenfuchs/rails-i18n/blob/master/rails/locale/nl.yml ）。

*   使用诸如[Locale 之](http://www.localeapp.com)类的东西来管理您的翻译依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T21:23:35.747

根据要求，根据我对这个问题的评论：

> 愚蠢的问题，我知道你说你已经让它在本地生产模式下工作，但是什么文件 `config.i18n.available_locales = :nl`在里面？在 `config\environments\development.rb`? 也在 `config\environments\production.rb`吗？

通常很容易忘记您在一个环境中设置了一个选项，但在另一个环境中却没有。

# c# - 重新利用现有的 GUI，同时保留大部分相同的功能

> ID：10300530
> 
> 赞同：2
> 
> 时间：2012-04-24T14:56:44.073
> 
> 标签：c#, winforms, oop

我正在开发一个用户管理系统，我想将 GUI 重新用于编辑用户表单的添加用户表单，这只是更改了一些功能。

例如，在我的添加用户中，用户 ID 设置为下一个可用 ID，用户名、密码、确认密码和组留空。有一个添加用户按钮，对上述字段进行验证，表单的标题是“添加用户”

编辑用户需要更改的只是填写正在编辑的用户的数据（从我的 DataGridView 获取 DataRow 不是问题）并将“添加”按钮更改为“编辑用户”按钮，同时仍执行相同的验证，并将表单的标题更改为“编辑用户”。

这样的事情可能吗？这种类型的用途会被称为什么，以便我可以更有效地用谷歌搜索它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T00:03:57.460

这是绝对可能的，而且一直都在这样做。当您实例化您的表单以进行添加时，您通常会执行以下操作：

```
using (AddUserForm form = new AddUserForm())
{
  form.ShowDialog();
} 
```

如果你想编辑一个用户：

```
using (AddUserForm form = new AddUserForm(user))
{
  form.ShowDialog();
} 
```

请注意，您将有两个用于表单的构造函数。在 AddUserForm 的代码中（您实际上应该调用 ModifyUserForm 或 UserForm），如果用户为空，您将执行 Add()，如果用户不为空，您将执行 Update()。

示例构造函数：

```
public AddUserForm()
{
  this._user = new User();
}

public AddUserForm(User user)
{
  this._user = user;
} 
```

然后保存：

```
private void SaveUser()
{
  if (this._userId == 0)
  {
    MyDal.AddUser(this._user);
    return;
  }

  MyDal.UpdateUser(this._user);
} 
```

我在没有 Visual Studio 的情况下完成了这一切，所以我不保证它会编译。:)

# android - 尝试添加帐户时出现 SecurityException

> ID：10300534
> 
> 赞同：6
> 
> 时间：2012-04-24T14:56:48.737
> 
> 标签：android, accountmanager

我正在试验 Android `AccountManager`。

我有一个帐户身份验证服务，显示 UI 以输入用户名/密码。

我转到设置/帐户/添加帐户，选择我的新帐户类型，然后我会看到 UI。

当我单击确定时，我收到以下错误

```
04-24 14:48:29.334: E/AndroidRuntime(386): java.lang.SecurityException: 
    caller uid 10035 is different than the authenticator's uid 
```

MyAccountAuthenticationService 的唯一方法：

```
@Override
public IBinder onBind(Intent intent) {
    return new MyAccountAuthenticator(this).getIBinder();
} 
```

MyAccountAuthenticator：

```
@Override
public Bundle addAccount(AccountAuthenticatorResponse response, 
    String accountType, String authTokenType, String[] requiredFeatures, 
    Bundle options) throws NetworkErrorException {

    final Intent intent = new Intent(context, MyAccountCreatorActivity.class);
    intent.putExtra(AccountManager.KEY_ACCOUNT_AUTHENTICATOR_RESPONSE, response);
    final Bundle bundle = new Bundle();
    bundle.putParcelable(AccountManager.KEY_INTENT, intent);
    return bundle;
} 
```

`MyAccountCreatorActivity`的片段`onClick`

```
AccountManager accManager = AccountManager.get(this);
Account newAccount = new Account(email, MyAccountAuthenticator.ACCOUNT_TYPE);
accManager.setPassword(newAccount, password); 
```

抛出异常`setPassword`。我已经需要所有的会计权限。我不确定是什么原因造成的。如果您需要更多代码/信息，请询问。

谢谢你。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-06-06T20:57:35.510

看起来很明显，但如果您的身份验证器服务尚未在 AndroidManifest.xml 中定义，您也会看到此错误。例如：

```
<service android:name="your.AuthService">
    <intent-filter>
        <action android:name="android.accounts.AccountAuthenticator" />
    </intent-filter>
    <meta-data android:name="android.accounts.AccountAuthenticator"
         android:resource="@xml/authenticator" />
</service> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T15:10:32.003

感谢@imran khan，我发现我的常量值与验证器 XML 定义中的“完全”不匹配

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-08-05T21:55:41.243

就我而言，当我在同一台设备上运行两种不同的风格时出现此错误。第二个试图访问与第一个相同的帐户，这导致了错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-08T16:48:26.277

在我的例子中，我不小心在`<application>`标签之外的 Manifest 中定义了 AuthenticatorService。将声明移到里面`<application>`解决了这个问题。希望能帮助某人。

# c - 有条件的跳转或移动取决于未初始化的值和在 retval 上分配的指针

> ID：10300541
> 
> 赞同：1
> 
> 时间：2012-04-24T14:57:25.303
> 
> 标签：c, pointers, valgrind

我得到这个 Valgrind 输出（这是我得到的唯一错误）：

```
==20627== Conditional jump or move depends on uninitialised value(s)
==20627==    at 0x804913A: main (main.c:223) 
```

我的`main.c`大致是这样的：

```
//other code

char **sets;

//other code

//char** get_char_sets(FILE *source);
sets = get_char_sets(config_file); // I malloc the sets in here

//other code

int i = 0;
while(sets[i]){ // line 223
    free(sets[i]);
    i++;
}
free(sets);

//other code 
```

`get_char_sets`看起来像这样：

```
char** get_char_sets(FILE *source){

    char **sets = malloc((n + 1) * sizeof(char*));

    for(int i=0;i<=n;i++){
        sets[i] = malloc(1 * sizeof(char));
    }

    //rest of function

    return sets;
} 
```

我知道 valgrind 说我正在使用一个未初始化的变量，我唯一能看到的是`sets`，但它被`malloc()`编辑`get_char_sets()`并分配了返回的指针。

我怎样才能摆脱那个 valgrind 错误以更正我的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T15:00:09.347

> ```
> while(sets[i]) { // line 223
>     free(sets[i]);
>     i++;
> } 
> ```

在某个时候，分配的集合将结束。然后`sets[i]`将指向分配的内存之外，指向您未设置的内容。

鉴于您的其余代码，您可以像这样修复它：

```
for(int i = 0; i < n; i++) /* Note < instead of <=. */
    sets[i] = malloc(1);

size[n] = NULL; /* Add terminator marker. */ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T15:00:27.367

的值没有限制`i`，最终会导致越界：

```
while(sets[i]){ 
```

更改为（类似于）：

```
int i = 0;
while(i <= n && sets[i]){ /* Ensure check i <= n before accessing sets */
    free(sets[i]);
    i++;
}
free(sets); 
```

您还可以在其中添加一个`NULL`哨兵值`sets`，并且`while`原样就可以了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-24T15:02:12.647

你们`malloc`都`n+1`分配`char*`自`sets`,

```
for(int i=0;i<=n;i++){
    sets[i] = malloc(1 * sizeof(char));
} 
```

因此，除非`malloc`失败，否则它们都是非`NULL`. 但是然后你继续`free`直到你找到一个`NULL`，

```
int i = 0;
while(sets[i]){ // line 223
    free(sets[i]);
    i++;
} 
```

它将访问分配的（到`sets`）内存的末尾，从而调用未定义的行为。

# javascript - Javascript/Jquery 如何从键/值中获取键

> ID：10300542
> 
> 赞同：0
> 
> 时间：2012-04-24T14:57:38.937
> 
> 标签：javascript, jquery

我有一个名为 City 的字段，它是一个下拉列表。它有一个键值对。

要获取该值，我可以在 Jquery 中简单地执行以下操作：

```
 var city = $("#city").val(); 
```

我如何获得关键值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:59:38.000

所以你想要所选选项的文本：

```
$('#city').find('option:selected').text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:59:22.500

如果它是选择中的一个选项，请尝试`.text()`.

# javascript - 在 window.prompt 上更改确定/取消？

> ID：10300545
> 
> 赞同：3
> 
> 时间：2012-04-24T14:57:42.993
> 
> 标签：javascript

嗨，是否可以将窗口提示上的“确定”和“取消”按钮更改为只有一个“关闭”按钮？出于我的目的，我喜欢 window.prompt 显示我的链接并且很容易复制，因为它已经突出显示。这是我的代码：

```
function sLink()
    {   
        var ctr = map.getCenter();
        var text = "http..../viewer-emailtest.shtml?lat="+ ctr.lat().toString() + "&lng=" + ctr.lng().toString() + "&z=" + map.getZoom().toString()
        window.prompt("Copy the highlighted link below and paste into your email program to share:", text);
      } 
```

谢谢！

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-24T15:26:26.627

根据 OP 评论，在 jquery 中回答

```
jQuery.alerts.okButton = 'Continue';
jQuery.alerts.cancelButton = 'Cancel';
jQuery.alerts.confirm("are you sure to do ?","Confirm",function(result){
     if(result){
        alert("you selected continue");
     }else{
        alert("you selected cancel");
     }
}); 
```

# sip - 如何使用 AT 命令控制 GoIP 网关内的调制解调器

> ID：10300547
> 
> 赞同：5
> 
> 时间：2012-04-24T14:57:54.367
> 
> 标签：sip, voip, embedded-linux, gsm, at-command

我们获得了一个 4 通道 GSM 网关，型号为 GoIPx4-G610（手册标题为“用于 GSM 语音网关的 GoIP 系列 SIM 卡 - GSM VOIP 网关”）。

我们正在寻求开发一个自定义应用程序来控制 GOIP 网关。我们过去开发了自定义应用程序，通过 AT 命令控制简单的 GSM 调制解调器，特别是发送/接收 SMS 消息。

虽然可以通过 SIP 控制网关，但如果可能，我们希望通过 AT 命令控制嵌入在网关中的 GSM 调制解调器。这是因为 AT 命令提供了细粒度的控制，而且我们不需要 VoIP 功能，因为我们只需要发送/接收 SMS 消息。

网关运行一个未知的 Linux 实例，我们可以通过 telnet 连接到该实例。不幸的是，我们没有对其进行身份验证的凭据。网关还有一个 web http 管理界面，我们可以对其进行身份验证，但我们无法找到与我们可以用于 AT 命令的通道相关的设置/信息。

文档很差，提供商无法向我们提供任何有用的信息。

如果有人知道我们如何向网关内的调制解调器发送 AT 命令，我们将不胜感激。

到目前为止，我们已经尝试对 telnet 接口进行暴力攻击以查找凭据，但没有成功。我们希望一旦我们可以连接到驱动网关的 Linux 实例，我们就可以通过串行连接从那里连接到调制解调器（发送 AT 命令），我们可以重新配置它以重定向调制解调器外部的连接或为向调制解调器发送命令。

该设备有一个更新固件选项（通过网络界面），它总是给出错误“下载失败”。从他们的更新页面手动下载固件（.pkg 文件），并从嵌入式 Linux 发行版中提取文件，这些文件应与放置在网关上的文件相对应。这些文件作为 ROMFS 压缩映像保存在 pkg 文件中，我们将其安装在测试站上以查看文件（网关上运行的操作系统可能是[uClinux](http://www.uclinux.org/)发行版）。

这样做是希望我们可以在那里找到可以通过经典攻击破解的 /etc/passwd 文件。但是没有找到它，可能该文件放在网关闪存上（与存储在 ROM 内存上的 Linux 文件相反）。因此，如果有一种方法可以擦除/重置此闪存，这可能是一种解决方案（以防网关在没有这些文件的情况下不会拒绝启动）。如果有这样的事情，另一个解决方案是能够使用 passwd 文件访问闪存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T04:10:56.610

您可以取下盖子，看看里面有什么部件。

如果它是具有已发布数据表且没有大量代码安全功能的通用处理器，那么您可能会走运。例如，您可能会发现：

*   通过猜测标头或从已知引脚跟踪，控制台串行端口，无论是逻辑电平还是 RS232，希望有一个 shell 监听

*   微控制器的启动模式引脚连接到一个电阻，您可以跳线使微控制器启动到一个 uart 引导加载程序，您可以在其中下载新的系统映像，或修补现有系统映像。如果幸运的话，引导加载程序将是众所周知的，例如 u-boot。

*   处理器的 JTAG 端口

*   您可以删除和更改的可移动存储设备

*   一个 SPI 闪存，您可以小心地使用和更改

*   可以拆焊并移植到编程器上的闪存芯片

您还可以对内核和供应商的任何其他内容提出 GPL 源请求。甚至只是尝试识别诸如 Web 服务器之类的事物的版本可以帮助您查找任何已知的漏洞。由于您似乎具有与已安装的系统映像相似的系统映像，因此查看它可能会有所帮助 - 查找正在运行的其他守护程序、侦听您以前不知道的端口、剩余的调试支持等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T14:00:37.627

我是您购买的 GoIP 的开发者。您没有尝试破解 GoIP，而是联系我们以支持您开发自定义应用程序？这是为您提供的 GoIP 更新。

1.  GoIP 现在支持 SMPP。这可以替代使用 AT 命令发送和接收 SMS。

2.  GoIP 的 API（应用程序编程接口）现在可用于支持您的自定义应用程序开发。

如果 AT 命令仍然是首选方法，请联系我们，我很乐意与您进一步讨论。

# ms-access - 在 Access 2010 中将报告另存为 PDF 时尝试自定义报告名称

> ID：10300548
> 
> 赞同：0
> 
> 时间：2012-04-24T14:57:57.143
> 
> 标签：ms-access, vba, report

当我运行以下代码时，我收到错误“需要对象”。我希望能够单击一个按钮，它将保存此文件以及报告上的一个数字字段，称为`Market_ID`，然后报告的名称是 Market Rate Notification Final。报告确实显示了，但我没有得到保存对话框。此外，如果我从中删除 `Report![Market Rate Notification Final].Market_ID +`，`strReportName`我会看到一个保存对话框，其中包含名为 Market Rate Notification Final.pdf 的文件。

```
Option Compare Database

'------------------------------------------------------------
' Export_MLR
'
'------------------------------------------------------------
Function Export_MLR()
On Error GoTo Export_MLR_Err
    Dim strReportName As String

    strReportName = Report![Market Rate Notification Final].Market_ID + "Market Rate Notification Final"
    DoCmd.OutputTo acOutputReport, strReportName, "PDFFormat(*.pdf)", "", False, "", , acExportQualityScreen

Export_MLR_Exit:
    Exit Function

Export_MLR_Err:
    MsgBox Error$
    Resume Export_MLR_Exit

End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:48:11.113

您不能像这样引用报表控件的内容：

```
strReportName = _
   Report![Market Rate Notification Final].Market_ID + "Market Rate Notification Final" 
```

各种错误的结果是 strReportName 为 Null。首先是`Reports`，不是`Report`，接下来，你不能通过这种方式从报表中获取一个控件的值，你会得到报表最后一行的值，并且连接符是&不是+，除非你是做一些很花哨的事情。

# c# - 通过 c# Web 服务将 100mb+ 的大文件上传到 Sharepoint 2010

> ID：10300550
> 
> 赞同：2
> 
> 时间：2012-04-24T14:57:58.020
> 
> 标签：c#, visual-studio-2010, web-services, sharepoint, file-upload

我无法将大文件上传到 Sharepoint 2010。我使用的是 Visual Studio 2010 和语言 C#。我从网上找到的内容中尝试了多种方法，但没有任何效果。我已将设置和配置文件更改为允许的最大上传限制，但仍然没有。我正在将 copy.asmx 用于工作正常的小文件，并且当文件太大并且抛出异常但它不起作用时正在尝试 UploadDataAsync。请看下面的代码...

非常感谢任何/所有帮助。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;

namespace ListsService
{

    public class UploadDocumentcs
    {
        public string UploadResult { get; set; }
        public string Errors { get; set; }
        public UploadDataCompletedEventHandler WebClient_UploadDataCompleted { get; set; }
        public byte[] content { get; set; }

        public void UploadDocumentToSP(string localFile, string remoteFile)
        {
            string result = string.Empty;
            SPCopyService.CopySoapClient client = new SPCopyService.CopySoapClient();

            string sUser = "user";
            string sPwd = "pwd";
            string sDomain = "dmn";
            System.Net.NetworkCredential NC = new System.Net.NetworkCredential(sUser, sPwd, sDomain);

            client.ClientCredentials.Windows.AllowedImpersonationLevel = System.Security.Principal.TokenImpersonationLevel.Impersonation;
            client.ClientCredentials.Windows.ClientCredential = NC;

            try
            {
                client.Open();

                string url = "http://SP/TestLibrary/";
                string fileName = localFile.Substring(localFile.LastIndexOf('\\'), (localFile.Length - localFile.LastIndexOf('\\')));
                fileName = fileName.Remove(0, 1);
                string[] destinationUrl = { url + fileName };

                System.IO.FileStream fileStream = new System.IO.FileStream(localFile, System.IO.FileMode.Open);
                byte[] content = new byte[(int)fileStream.Length];
                fileStream.Read(content, 0, (int)fileStream.Length);
                fileStream.Close();

                // Description Information Field
                SPCopyService.FieldInformation descInfo = new SPCopyService.FieldInformation
                                                  {
                                                      DisplayName = "Description",
                                                      Type = SPCopyService.FieldType.File,
                                                      Value = "Test file for upload"
                                                  };

                SPCopyService.FieldInformation[] fileInfoArray = { descInfo };

                SPCopyService.CopyResult[] arrayOfResults;

                 uint result2 = client.CopyIntoItems(fileName, destinationUrl, fileInfoArray, content, out arrayOfResults);                

                // Check for Errors
                 foreach (SPCopyService.CopyResult copyResult in arrayOfResults)
                 {
                     string msg = "====================================" +
                                  "SharePoint Error:" +
                                  "\nUrl: " + copyResult.DestinationUrl +
                                  "\nError Code: " + copyResult.ErrorCode +
                                  "\nMessage: " + copyResult.ErrorMessage +
                                  "====================================";

                     Errors = string.Format("{0};{1}", Errors, msg);
                 }
                 UploadResult = "File uploaded successfully";

            }
            catch (OutOfMemoryException)
            {
                System.Uri uri = new Uri("http://bis-dev-srv2:300/DNATestLibrary/");
                (new System.Net.WebClient()).UploadDataCompleted += new UploadDataCompletedEventHandler(WebClient_UploadDataCompleted);
                (new System.Net.WebClient()).UploadDataAsync(uri, content);

            }

            finally
            {
                if (client.State == System.ServiceModel.CommunicationState.Faulted)
                {
                    client.Abort();
                    UploadResult = "Upload aborted due to error";
                }

                if (client.State != System.ServiceModel.CommunicationState.Closed)
                {
                    client.Close();
                }
            }
        }

        void WcUpload_UploadDataCompleted(object sender, UploadDataCompletedEventArgs e)
        {

            if (e != null)
            {
                UploadResult = "Upload Unuccessful";
            }
            else
            {
                UploadResult = "Upload Successful";
                //throw new NotImplementedException();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T18:49:28.010

Shaun
为了让它工作，您必须更改 SharePoint 配置以增加上传限制和超时。下面的链接显示了使大文件上传工作的必要步骤。

[http://blogs.technet.com/b/sharepointcomic/archive/2010/02/14/sharepoint-large-file-upload-configuration.aspx](http://blogs.technet.com/b/sharepointcomic/archive/2010/02/14/sharepoint-large-file-upload-configuration.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T08:16:22.760

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net;
using System.IO;
namespace UploadTester
{
    public partial class frmMain : Form
    {
        public frmMain()
        {
            InitializeComponent();
        }

        private void btnSelectFile_Click(object sender, EventArgs e)
        {
            openFileDialog1.ShowDialog();
            textBox1.Text = openFileDialog1.FileName;
        }

        private void btnUpload_Click(object sender, EventArgs e)
        {
            try
            {
                byte[] content = GetByteArray();
                string filename = Path.GetFileName(openFileDialog1.FileName);

                System.Net.WebClient webClient = new System.Net.WebClient();
                System.Uri uri = new Uri("http://SP/DNATestLibrary/" + filename);
                webClient.Credentials = new NetworkCredential("username", "pwd", "domain");

                webClient.UploadData(uri, "PUT", content);

                MessageBox.Show("Upload Successful");
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.ToString());
            }
        }

        byte[] GetByteArray()
        {
            FileStream fileStream = new System.IO.FileStream(openFileDialog1.FileName, System.IO.FileMode.Open);
            byte[] content = new byte[(int)fileStream.Length];
            fileStream.Read(content, 0, (int)fileStream.Length);
            fileStream.Close();

            return content;
        }

        private void btnUploadAsync_Click(object sender, EventArgs e)
        {
            try
            {
                byte[] content = GetByteArray();
                string filename = Path.GetFileName(openFileDialog1.FileName);

                System.Net.WebClient webClient = new System.Net.WebClient();
                System.Uri uri = new Uri("http://SP/DNATestLibrary/" + filename);

                webClient.UploadDataCompleted += new UploadDataCompletedEventHandler(webClient_UploadDataCompleted);
                webClient.Credentials = new NetworkCredential("username", "pwd", "domain");

                webClient.UploadDataAsync(uri, "PUT", content);
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.ToString());
            }
        }

        void webClient_UploadDataCompleted(object sender, UploadDataCompletedEventArgs e)
        {
            if (e.Error == null)
            {
                MessageBox.Show("Upload Successful");
            }
            else
            {
                MessageBox.Show(e.ToString());
            }

        }
    }
} 
```

# c# - 填充 asp.net Gridview 的简单应用程序

> ID：10300551
> 
> 赞同：0
> 
> 时间：2012-04-24T14:58:02.637
> 
> 标签：c#, asp.net, gridview

我似乎无法让我的代码工作。这是一个用于填充 asp.net GridView 控件的简单应用程序。网格控件没有被填充，我没有收到错误消息。
我在这里想念什么？

**代码隐藏**

```
public void DisconnectedDataform()
{
    try
    {
        Initdata();

        gvProjectList.DataSource = dsProjectList;
        gvProjectList.DataMember = tableName;
    }
    catch (Exception e)
    {
        Response.Write(e.ToString());
    }
    finally
    { }
}  

    public void Initdata()
    {
        try
        {
            string conn = ConfigurationManager.ConnectionStrings["dbProjectManager"].ConnectionString;

            dsProjectList = new DataSet();
            daProjectList = new SqlDataAdapter("select PersonID, FirstName, LastName from Person", conn);

            SqlCommandBuilder cmdBldr = new SqlCommandBuilder(daProjectList);
            daProjectList.Fill(dsProjectList, "ProjectList");
        }
        catch (Exception e)
        {
            Response.Write(e.ToString());
        }
        finally
        { }
    } 
```

**ASP 代码：**

```
 <asp:GridView ID="gvProjectList" runat="server" AutoGenerateColumns="true" DataKeyNames="PersonID">
            <Columns>
                <asp:BoundField DataField="PersonID" HeaderText="PersonID" InsertVisible="False" ReadOnly="True" SortExpression="PersonID" />
                <asp:BoundField DataField="FirstName" HeaderText="FirstName" SortExpression="FirstName" />
                <asp:BoundField DataField="LastName" HeaderText="LastName" SortExpression="LastName" />
            </Columns>
        </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T15:03:30.870

设置数据源后尝试

```
gvProjectList.DataBind(); 
```

# php - 从mysql数据库创建菜单结构

> ID：10300553
> 
> 赞同：0
> 
> 时间：2012-04-24T14:58:10.003
> 
> 标签：php, mysql, database, menu

我只是想知道人们在这里的意见，也许还有一些关于如何最好地实施某事的指导。

我所拥有的是一个非常基本的 Intranet，其设计目的只是为了提供公司范围内的文档和文件。它在页面顶部有一个基本菜单栏，有一个顶级项目，然后是子菜单/项目。显然，菜单可以级联许多级别，并且是我得到的一个简单的动态驱动器javascript，它将html <li> 结构转换为菜单。

基本思路是这样的：

```
<li><a href='#'>Top Level 1</a>
    <ul>
        <li><a href='#'>Item 1</a></li>
        <li><a href='#'>Item 2</a></li>
        <li><a href='#'>Sub menu 1</a>
            <ul>
                <li><a href='#'>Sub Item 1</a></li>
            </ul>
        </li>
    </ul>
</li> 
```

所以这是用来创建菜单的。每次你启动一个新的 <ul> 元素时，它都会创建一个子菜单。

这工作正常，但有点痛苦，因为每次网站上的文档发生变化时，我都必须手动创建新链接、删除旧链接等。

我要做的是将这个结构移动到我的数据库中，这样我就可以在需要时使用基本的 html 表单和 PHP 脚本来插入、更新和删除链接。

如果我不能这样做，它还使管理人员能够上传新文件。

我对此进行了快速尝试，并找到了一种可行的选择，但有点笨拙，并且可能很难继续前进。

基本上，我会有一个包含下面列出的列的表：

*   文件编号*   文件名*   文件路径*   菜单*   子 1*   子 2*   子 3*   标签*   打开

我能做的是有一个唯一的 ID 供参考，输入文件名和文件路径，它们一起可用于 href 链接指向文件位置。然后我可以使用菜单和 3 个子菜单字段来告诉它该项目在菜单结构中的位置。标签只是给链接起个名字，open in 告诉页面在哪里打开文档，即_new、frame、ifram 等。

然后 PHP 可以使用 mysql 查询来查找菜单中的所有项目并将它们回显。问题来了，我需要对我拥有的每个菜单和子菜单进行单独的 MySQL 查询，这意味着整个菜单很可能最终充满了 MySQL 查询。

任何人都可以建议更好的解决方案，或者帮助使 PHP 尽可能简单和灵活吗？

非常感谢

编辑

编辑：

如果需要，可以提供一些 PHP 的示例，但它们非常大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T15:05:39.730

best practise for this as i know is nested tree structure, which logic is in two words:

table required fields: id, parent_id, left, right

then, in adding first row, you got this values

```
1, 0, 1, 2 
```

next will improve left and right fields like:

```
2, 0, 3, 4
3, 0, 5, 6 
```

and if we need to make subdirectory for first item, the full structure will be this:

```
1, 0, 1, 4
2, 0, 5, 6
3, 0, 7, 8
4, 1, 2, 3 
```

so you can easily take all the tree ordered by left, and then just check every row parent level value, if parrent exists, to calculate its own level.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-03T15:03:36.477

我开发了这个“Git”菜单，因为我也找不到任何 MySQL 驱动的东西。 [https://github.com/jgarbe/DDrop_Menu](https://github.com/jgarbe/DDrop_Menu) 希望有人可以使用！

# debugging - 如何在 CFBuilder 中实际配置调试

> ID：10300554
> 
> 赞同：4
> 
> 时间：2012-04-24T14:58:10.923
> 
> 标签：debugging, coldfusion, coldfusionbuilder

我已经安装了 ColdFusion Builder 2.0.0，我正在尝试查看备受吹嘘的步骤调试。但是，我似乎无法让它工作，因为我没有以示例显示的幼稚方式安装我的站点/JRun 安装程序。

我正在使用 ColdFusion 版本 9,0,1,274733，我的配置如下：-

在此处安装为 Jrun 的多服务器版本：- c:\Apps\JRun4

应用程序文件在这里：- d:\websites\my.website.com

网站根目录在这里 d:\websites\my.website.com\www

CFC 的核心库位于 d:\websites\frameworks\core 中，它在 CF 中作为核心映射

* * *

我已经读过这个看了这个[http://help.adobe.com/en_US/ColdFusionBuilder/Using/WS0ef8c004658c1089-31c11ef1121cdfd6aa0-7fff.html](http://help.adobe.com/en_US/ColdFusionBuilder/Using/WS0ef8c004658c1089-31c11ef1121cdfd6aa0-7fff.html)和这个[http://forta.com/blog/index.cfm/2007/5/30 /CF8-Debugger-Getting-Started](http://forta.com/blog/index.cfm/2007/5/30/CF8-Debugger-Getting-Started)并观看了此[https://experts.adobeconnect.com/_a204547676/p33029638/?launcher=false&fcsContent=true&pbMode=normal](https://experts.adobeconnect.com/_a204547676/p33029638/?launcher=false&fcsContent=true&pbMode=normal)但是在您配置 RDS 并且您正在设置之后我卡住了您的项目的服务器。

![](../Images/997d6a456e97c4da8a0230557a2a3776.png)

现在我很确定以上内容是正确的，当我转到向导的下一页时，我得到以下信息：-

![](../Images/52da77632cc25db9a3b0c63cb9089c5f.png)

现在，据我所知，我的 Server Home 应该是 c:\Apps\JRun4 而我的 Document root 应该是 d:\websites\my.website.com

这一切看起来都会好起来的，直到你真正尝试调试我得到

![](../Images/0dbf768a58dd26e6326f3c4038ce3786.png)

其次是

![](../Images/8dbef736acac5ede68b4a13c8d411377.png)

我可以确认服务器正在运行并且 RDS 已启用，因为在 RDS 数据视图中我可以看到我的所有数据库。

任何帮助都将不胜感激，因为这非常令人沮丧并且文档非常缺乏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T16:00:51.623

还有一个视频教程，您可能想检查一下是否有帮助。[http://blogs.adobe.com/anand/2011/01/learn-how-to-debug-coldfusion-applications-using-coldfusion-builder-2.html](http://blogs.adobe.com/anand/2011/01/learn-how-to-debug-coldfusion-applications-using-coldfusion-builder-2.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:31:47.330

您需要指定 RDS 用户名/密码和“应用程序服务器名称”。如果您使用的是在设置 CF 的多服务器安装时安装的基本实例，即“cfusion”，否则它是您正在使用的实例的名称。

除非您为 RDS 设置自定义用户，否则 RDS 用户名很可能是“admin”。密码是您在安装 CF 时指定的 RDS 密码。

# java - 按值/引用传递，什么？

> ID：10300555
> 
> 赞同：5
> 
> 时间：2012-04-24T14:58:12.947
> 
> 标签：java, methods, arguments

该程序输出 6，但是当我取消注释第 9 行时，输出为 5。为什么？我认为 ba 不应该改变，应该保持 5 为主。

```
1  class C1{
2      int a=5;

3      public static void main(String args[]){
4          C1 b=new C1();
5          m1(b);
6          System.out.println(b.a);
7      }

8      static void m1(C1 c){
9          //c=new C1();
10         c.a=6;
11    }
12 } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T15:02:04.507

当您在 Java 中传递对象时，它们作为引用传递，即方法中引用的对象`b`和`main`方法`c`中的参数`m1`，它们都指向同一个对象，因此当您将值更改为 6 时，它会反映在`main`方法中。

现在，当您尝试这样做时，您`c = new C1();`指向`c`了一个不同的对象，但`b`仍指向您在`main`方法中创建的对象，因此更新的值 6 在 main 方法中不可见，您得到 5。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T15:03:06.087

您正在向您的方法 m1 传递对 C1 类型对象的引用的副本。

如果您取消注释该行，您将获取该引用并将其指向其他地方（不是原始引用仍指向第一个对象），因此，当您打印 b 的值时，您正在打印的值原始对象，您没有更改。

这个问题有一些很好的答案，你真的应该看看。

[Java 是“按引用传递”还是“按值传递”？](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-24T15:09:26.683

Java 是按值传递的，用通俗的话来说，这意味着当你传递一个参数时，你会创建一个**指针变量**的副本。对象变量真的应该像 C 中的指针一样读取：这在某种程度上使事情更容易理解，至少在来自 C 世界时（其中 C 仅是按值传递）。

因此，在执行 时`c=new C1()`，或者通常在执行对 的任何分配时`c`，您正在使`c`（以前指向所指向的内存的同一位置`b`）指向另一个位置。因此，以下`c.a=6`是对 所指向的对象的成员的赋值，该对象不再`c`是所指向的对象`b`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T15:03:46.877

这是因为 m1(C1 c) 中的 c 是对对象的引用，当您执行 ca=6 时，现在 a 等于该对象中的 6。但是如果你在这个方法中执行 c=new c1() ，c 现在正在引用一个完全新的对象，那么你在这个新对象中执行 ca=6 。之后，你退出方法，另一个 c 对象的值仍然是 5

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-24T15:06:55.443

您的方法`m1(b);`在 main 中调用，导致在 m1 中创建的新实例取代 main 方法中已创建的 C1 实例。如果您在 m1 中注释实例化，则 main 中的第一个实例将生效。这是因为在java中对象是通过引用而不是值传递的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-26T03:34:32.207

在 Java 中，除了原始类型之外，所有内容都是通过引用传递的，尽管它说传递引用的副本。

因此，在您的情况下，在第一个实例中，指针 b 和 c 都指向同一个对象，因此更新的值会反映在 main 方法中。

在第二种情况下，当您使 c 指向一个新对象（通过调用 new）时，b 仍然指向在 main 方法中创建的对象，因此更新的值不会反映在 main 方法中，因为 b 和 c 指向两个不同的对象。

# batch-file - 在 bat 文件或 inno 设置中检测窗口安装程序版本

> ID：10300556
> 
> 赞同：1
> 
> 时间：2012-04-24T14:58:22.093
> 
> 标签：batch-file, installation, inno-setup, cmd

我目前正在使用 inno 安装程序中的安装程序并运行 bat 文件来检查操作系统版本并安装 windows 安装程序 4.5 如果操作系统是 windows xp，现在我有一个问题我想检测是 windows 安装程序 4.5 已经安装或未安装机器 ？

有命令 msiexec 弹出窗口以显示版本，但我需要它作为字符串来做出决定是否有任何方法可以知道 bat 文件中当前安装的窗口安装程序版本？

```
 REM Check Windows Version
ver | findstr /i "5\.0\." > nul
IF %ERRORLEVEL% EQU 0 goto ver_2000
ver | findstr /i "5\.1\." > nul
IF %ERRORLEVEL% EQU 0 goto ver_XP
ver | findstr /i "5\.2\." > nul
IF %ERRORLEVEL% EQU 0 goto ver_2003
ver | findstr /i "6\.0\." > nul
IF %ERRORLEVEL% EQU 0 goto ver_Vista
ver | findstr /i "6\.1\." > nul
IF %ERRORLEVEL% EQU 0 goto ver_Win7
goto warn_and_exit

:ver_XP
start WindowsXP-KB942288-v3-x86.exe
end 
```

现在是 bat 文件我想在启动窗口安装程序之前检查版本是否为 4.5 如果 < 4.5 安装否则没有

寻求良好和快速的响应

问候瓦西夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T16:36:53.527

我会尝试这样的事情。你也可以关注[`commented version`](https://stackoverflow.com/revisions/10302170/3)这篇文章：

```
[Files]
Source: "WindowsXP-KB942288-v3-x86.exe"; DestDir: "{tmp}"

[Run]
Filename: "{tmp}\WindowsXP-KB942288-v3-x86.exe"; Check: CheckInstallMSI; OnlyBelowVersion: 0,6.0

[code]
const
  // The minimum MSI version is 4.50.0.0
  MinMSIVersionMS = (4 shl 16) or 50;
  MinMSIVersionLS = (0 shl 16) or 0;

function CheckInstallMSI: Boolean;
var
  MSIVersionMS: Cardinal;
  MSIVersionLS: Cardinal;
begin
  Result := True;

  if GetVersionNumbers(ExpandConstant('{sys}\msi.dll'), MSIVersionMS, MSIVersionLS) then
    if MSIVersionMS >= MinMSIVersionMS then
      Result := False;
end; 
```

资料来源：

*   [`Example of how to deploy shfolder.dll`](http://www.jrsoftware.org/iskb.php?shfolder)

*   [`Description of the OnlyBelowVersion parameter`](http://www.jrsoftware.org/ishelp/topic_commonparams.htm)

*   [`Windows versions used by the OnlyBelowVersion parameter`](http://www.jrsoftware.org/ishelp/topic_winvernotes.htm)

*   [`How to determine the the Windows Installer version (MSDN)`](http://msdn.microsoft.com/en-us/library/aa368280%28VS.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-20T22:16:51.493

另一种解决方案：

```
function InitializeSetup(): Boolean;
var
 MS: cardinal;
 LS: cardinal;
 V1 : dword;
 V2 : dword;
 V3 : dword;
 V4 : dword;

 begin
  Result := true;
  if GetVersionNumbers(ExpandConstant('{sys}\msi.dll'), MS, LS) then
   begin
    V1 := MS shr 16;
    V2 := MS and $FFFF;
    V3 := LS shr 16;
    V4 := LS and $FFFF;
    if IntToStr(V1)+'.'+IntToStr(V2) < '4.5' then begin
        MsgBox('Your message...', mbConfirmation, MB_OK)             
        Result := False;    
    end;      
  end;    
 end; 
```

代码参考：[https ://www.daniweb.com/programming/software-development/threads/297848/pascal-inno-question-re-cardinal](https://www.daniweb.com/programming/software-development/threads/297848/pascal-inno-question-re-cardinal)

# java - java.sql.SQLException: ORA-01747

> ID：10300559
> 
> 赞同：-1
> 
> 时间：2012-04-24T14:58:40.533
> 
> 标签：java, sql, oracle, sqlexception

当我运行以下 SQL 查询时，我收到以下错误：

```
java.sql.SQLException: ORA-01747: invalid user.table.column, table.column, or column specification

String strQuery = "UPDATE themed_night SET theme_night_name = ?, theme_night_date = TO_DATE(?, 'dd-MM-yy'), theme_night_description = ?, WHERE theme_id = ?";
        PreparedStatement stmt = conn.prepareStatement(strQuery);//prepare the SQL Query
        stmt.setString(1, title);
        stmt.setString(2, output);
        stmt.setString(3, details);
        stmt.setString(4, themeID); 
```

我的 SQL 查询语法是否正确？我已经仔细检查了这些列，并且输入了正确的名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T15:00:28.287

您的语句中有一个额外的逗号。正确的说法应该是

```
String strQuery = "UPDATE themed_night SET theme_night_name = ?, theme_night_date = TO_DATE(?, 'dd-MM-yy'), theme_night_description = ? WHERE theme_id = ?"; 
```

此外，您可能需要用单引号将一些值括起来（尽管我不确定）

# google-analytics - 为全 ajax 网站设置谷歌分析

> ID：10300560
> 
> 赞同：1
> 
> 时间：2012-04-24T14:58:41.140
> 
> 标签：google-analytics

我在 onstatechange 回调中调用 trackpageview（我检查过它正在被调用），因为在全 ajax 站点中，状态是页面。

```
History.Adapter.bind(window, 'statechange', function() {
_gaq.push([ '_trackPageview', History.getState().url ]); 
} 
```

我也有必要的片段（同样，它只被调用一次，因为这个网站是全ajax的）。

```
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-31081343-1']);
  _gaq.push(['_trackPageview']);

  (function() { ... })();

</script> 
```

但是，我在我的谷歌分析帐户上看不到这些综合浏览量，无论是在“标准报告”中还是在“实时”中。

为什么不跟踪这些综合浏览量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:13:28.037

（我假设你使用[History.js](https://github.com/balupton/History.js/)）

History.getState().url 返回完整的 URL，以协议 (http://...) 开头。

使用`pageURL`参数 with 时`_trackPageview`，**必须**使用斜杠 (/) 开头来指示页面 URL (cf [doc](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiBasicConfiguration#_gat.GA_Tracker_._trackPageview) )。否则，Google Analytics 将不会考虑该请求。

# ios - uiautomation iOS uilabel 值

> ID：10300563
> 
> 赞同：3
> 
> 时间：2012-04-24T14:58:55.463
> 
> 标签：ios, ios-ui-automation

我试图通过执行 a 从 UILabel 获取值，`target.logElementTree()`但我无法看到 Label 实际设置的值。

它只显示我们根据accessibilityLabel设置的字符串

```
self.settlementDate.isAccessibilityElement = YES;
self.settlementDate.accessibilityLabel = @"DetailViewInCode_SettlementDate"; 
```

这`target.logElementTree()`是我在 Instruments-Automation 日志中看到的值

```
UIAStaticText: name:DetailViewInCode_SettlementDate value:DetailViewInCode_SettlementDate rect:{{260, 345}, {304, 21}}    

UIALogger.logMessage("Target static:"+target.frontMostApp().mainWindow().staticTexts()["Activity_DetailedView_SettlementDate"].value()); 
```

当我单击该条目时，我可以看到屏幕截图
![在此处输入图像描述](../Images/09878708145eab111b0438ecc8094967.png)

iOS 5.1 模拟器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T10:55:28.033

似乎该值**默认**设置为accessibilityLabel 属性的值。尝试以与设置accessibilityLabel 属性相同的方式在代码中设置accessibilityValue 属性。

```
self.settlementDate.accessibilityValue = <ActualVale>; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-15T14:10:32.007

该值显示在日志中。该标签的值为`DetailViewInCode_SettlementDate`。值和名称相同的事实可能会让您感到困惑。这并不少见。

# matlab - 在matlab中生成具有零协方差的多元正态随机数

> ID：10300568
> 
> 赞同：2
> 
> 时间：2012-04-24T14:59:13.700
> 
> 标签：matlab, statistics, sampling

假设在Matlab中生成一个分布为N(u, diag(sigma_1^2, ..., sigma_n^2)的n维正态随机数，其中u是一个垂直向量。

有两种方法。

```
randn(n,1).*[sigma_1, ..., sigma_n]' + u;

mvnrnd(u', diag(sigma_1^2, ..., sigma_n^2))'; 
```

我认为他们都是正确的。但我想知道基于某些原因，是否有某种偏好？我问这个问题，因为我看到别人总是选择第一种方式，而我没有考虑就选择了第二种方式。

谢谢并恭祝安康！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-27T11:32:50.433

如果随机变量之间存在相关性，则协方差矩阵不再是对角线。在这种情况下，您可以使用`mvnrnd`或`randn`与 Cholesky 解压缩一起使用，如下所示。

```
U = chol(SIGMA);
x = U'*randn(n,1); 
```

尽可能使用基本功能而不是使用工具箱功能。基本功能更快、更便携。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T15:08:18.590

它们是等效的方法。就个人而言，我更喜欢第二种选择，因为它是一个可用于为任意形状的数组生成此类数据的函数。如果你突然想要一个完整的高斯值矩阵，你可以从第二个函数调用中更容易地得到它，而无需调用`reshape()`. 我还认为第二个示例更易于阅读，因为它依赖于长期以来无处不在的内置 Matlab。

我想如果`n`很大，人们可能会争辩说实际形成`diag(sigma_1^2, ..., sigma_n^2)`. 但是，如果您需要从这么大的矩阵中进行随机抽取，那么 Matlab 已经是该工作的错误工具，您应该在 C++ 中使用 Boost::Probability，或者在 Python 中使用 SciPy / scikits.statsmodels。

# html-lists - Opera OL 错误文本与 justify 对齐

> ID：10300570
> 
> 赞同：1
> 
> 时间：2012-04-24T14:59:14.897
> 
> 标签：html-lists, opera

我在**Opera**的有序列表 ( ) 中**对齐****列表项**( )时遇到问题。行前有不同的间距。`<li>``<ol>`

 **歌剧版：

*   版本：11.62
*   建造：1347
*   平台：Win32
*   系统：Windows 7

截图：

[![Opera 11.62 (Build 1347), Windows 7 - 有序列表缩进问题](../Images/f1dc7b1a9814445846deaa490244b730.png)](https://i.stack.imgur.com/sn04t.png)

[![Opera 11.62 (Build 1347), Windows 7 - 有序列表缩进问题](../Images/084d3d0a871dd04d6ca1eff03d2e8118.png)](https://i.stack.imgur.com/GcOTI.png) （转载于 jsfiddle.com）

测试代码：http: [//jsfiddle.net/ySmJZ/](http://jsfiddle.net/ySmJZ/)

```
ol {
  list-style: decimal;
  margin: 16px 0px;
  padding: 0px 0px 0px 40px;
  text-align: justify;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T22:24:15.890

这是 Opera 中的一个已知错误 (CORE-41499)。没有真正的解决方法，除了避免使用`text-align:justify.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T15:49:33.360

是的，这是 Opera 中的一个已知错误（即使在 中`12.01 (x86)`），但有一种解决方法，由*deadshadow*在这里编写：
[http ://my.opera.com/community/forums/topic.dml?id=1424852&t=1347118644&page=1 #comment12696422](http://my.opera.com/community/forums/topic.dml?id=1424852&t=1347118644&page=1#comment12696422)

引用：

> *“一种解决方法（直到/如果他们修复它）是 LI 内的额外 SPAN 或 DIV 将所有内容设置为`display:inline-block; vertical-align:top;`”*

我试过了，它确实有效（至少在 Opera 12.01 (x86) 中）：

[http://jsfiddle.net/Sk8erPeter/ySmJZ/10/](http://jsfiddle.net/Sk8erPeter/ySmJZ/10/)

## 前

[![带有有序列表 (<ol>) 和 text-align:justify 的 Opera 错误；](../Images/416751709bdfccd04a3af4beaca871f8.png)](https://i.stack.imgur.com/mHJQB.png)

## 后

[![带有有序列表 (<ol>) 和 text-align:justify 的 Opera 错误； 解决方法](../Images/b9ab75a31ea2af5556f2d9b1c750ed98.png)](https://i.stack.imgur.com/tJ5Ly.png)**

# iphone - 程序化 iPhone 横向锁定

> ID：10300571
> 
> 赞同：0
> 
> 时间：2012-04-24T14:59:18.210
> 
> 标签：iphone, locking, landscape

iPhone 具有仅用于纵向的方向锁定。所以我在我的 UI 中添加了一个横向锁定按钮，将`landscape_orientation_locked`变量设置为`YES`or `NO`。然后在`shouldAutorotateToInterfaceOrientation:`我基本上做以下事情：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
  if (landscape_orientation_locked)
    return (UIInterfaceOrientationIsLandscape(interfaceOrientation));

  return YES;
} 
```

这工作正常，除了一种情况。当我将 iPhone 转为横向时，切换方向锁定按钮，将 iPhone 旋转到纵向并再次按下该按钮。界面方向不会从横向变为纵向。iPhone必须先变成横向然后纵向才能触发界面旋转。

所以我的问题是：我能以某种方式“强制”iPhone 重新评估它的当前方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T15:28:30.497

呈现然后关闭模拟模式视图控制器应该强制进行方向检查。

编辑：发现我第一次读到的问题：

[是否有记录的方法来设置 iPhone 方向？](https://stackoverflow.com/questions/181780/is-there-a-documented-way-to-set-the-iphone-orientation)

# iphone - 如何在 iOS 5 中永久更改亮度？

> ID：10300575
> 
> 赞同：1
> 
> 时间：2012-04-24T14:59:37.850
> 
> 标签：iphone, ios

iOS UIScreen 具有亮度属性。将其设置为不同的值会更新屏幕亮度。但是在锁定/解锁后屏幕亮度会恢复到 iOS 设置中设置的亮度。

我必须打电话来保存设置吗？有同步通话之类的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:06:10.883

Applications can't make device (system) wide settings changes. That would violate the application "sandbox" philosophy.

The best you can do is have the app delegate detect when your application comes back into the foreground (after unlocking the phone) and then reset the screen brightness just for your app.

# jquery - 将参数传递给 for 中的 $.doTimeout 函数

> ID：10300577
> 
> 赞同：0
> 
> 时间：2012-04-24T14:59:39.390
> 
> 标签：jquery, parameter-passing, settimeout

这将在 1 秒后记录“7”七次。

```
for (var i = 0; i < 7; i++) {
    $.doTimeout(1000, function() {
        console.log(i);
    });
} 
```

但是，如果我希望它记录 '0','1','2','3','4','5','6' 怎么办？

（$.doTimeout 是[Ben Alman 的插件](http://benalman.com/projects/jquery-dotimeout-plugin/)，但我认为 setTimeout 的问题是一样的。）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:04:17.240

```
for (var i = 0; i < 7; i++) {
    (function(i) {
        $.doTimeout(1000, function() {
            console.log(i);
        });
    }(i));
} 
```

您需要将范围与变量相关联，`i`以便当闭包查找它时，它会从该范围中获取值。

# c# - 为什么这些字符串不显示在单独的行中？

> ID：10300579
> 
> 赞同：3
> 
> 时间：2012-04-24T14:59:47.007
> 
> 标签：c#, string

将人的内容写入文件

名字： Abcd

第二名：Tsfsdfs

为此，我编写了一个示例应用程序

```
namespace BinaryStream
{
    class Program
    {
        static void Main(string[] args)
        {
            StreamWriter binWriter = new StreamWriter(@"c:\happybirthday.txt");
            string name = "Sachin";
            string secondname = "tendulkar";
            string wishes = "happy birthday";

            string firstname = string.Format("FirstName: {0} \n", name);
            binWriter.Write(firstname);
            string sn = string.Format("SecondName: {0} \n", secondname);
            binWriter.Write(sn);
            binWriter.Close();          
        }
    }
} 
```

如果我在记事本中打开内容，下一行没有显示字符串这是什么原因？格式部分是否正确？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T15:01:37.253

您需要使用 WriteLine，而不是 Write。写入不会在行尾放置换行符\cr。在文本中放置 \n 只会放置换行符，不会放置回车符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T15:03:07.687

您需要回车和换行。你只有一个换行符。将您的 \n 替换为 \r\n ，您将在记事本中正确看到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T15:02:07.830

您可能会发现您需要回车 (CR) 和换行 (LF) 字符的组合，而不仅仅是 LF。

所以 - 在您的代码中，将 \n 替换为 \r\n

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T15:02:42.813

对于初学者，您正在创建一个二进制文件而不是文本文件。这可能会使记事本感到困惑。

除了在 C# 中，\n 仅表示 LF，您必须使用 \r\n (CR - LF)。

写这个：

```
string[] lines = {"FirstName: Abcd", "SecondName: Tsfsdfs"};
System.IO.File.WriteAllLines(@"c:\happybirthday.txt", lines); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T15:01:56.303

新行在`\n\r`窗口中。但是有些程序足够聪明，可以理解`\n`。其他人，如记事本 - 不是。

# db2 - 如何在 cics 地图中显示表格数据

> ID：10300580
> 
> 赞同：2
> 
> 时间：2012-04-24T14:59:48.660
> 
> 标签：db2, cobol, cics

我有一个包含 50 行的 db2 表。如何在我创建的 cics 地图中显示这些数据。可能吗？如果是，如何在最多 24 行的屏幕中容纳 50 行数据。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T18:28:07.360

您的屏幕是 24 行 x 80 列。如果您的行包含少于 40 列数据，您可以创建两列显示。我假设您的 CICS 页面有页眉和页脚，所以无论如何您都没有全部 24 行。您必须创建多个 CICS 页面才能显示 50 个 DB2 行。

如果您可以将您的 DB2 信息放在一个 CICS 字段中，您可以这样做：

```
LINE  DFHMDF POS=(03,01),
             LENGTH=79,
             ATTRB=(ASKIP,NORM,PROT),
             OCCURS=20 
```

如果您需要多个 CICS 字段，则必须单独列出每一行。CICS 中没有组 OCCURS。

[IBM CICS 手册](http://publib.boulder.ibm.com/infocenter/cicsts/v3r1/index.jsp?topic=/com.ibm.cics.ts31.doc/dfhp3/dfhp3bn.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T22:38:06.273

您将不得不编写自己的滚动逻辑。这个轮子已经被发明了很多次，大概已经在你自己的商店里做过了。搜索其他类似的交易和地图，并复制。有一个老笑话说只有一个原始 COBOL 程序，而其他所有程序都是从它复制而来的。从已经编写的执行相同操作的内容开始，您的任务会容易得多。

请记住，您将不得不处理向前和向后滚动（传统上是 PF7 和 PF8 键）以及表格的开头和结尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T04:50:14.393

If you just want to dump the fields to a terminal, you can do an "EXEC CICS Send Text" and format the data however you want in a text string with paging supplied.

However, you say you have a map already that is constrained to a Mod-2 terminal with only 24 80 byte lines. If that is the case, your map already exists, how can you ask us how to display it? You already have the map with it's 50 fields. Populate those fields and use an "EXEC CICS Send Map".

Perhaps if you posted the map you have, or the size of the data items you wish to display, you could get a better answer...

# ubuntu - ubuntu /dev 文件夹恢复

> ID：10300581
> 
> 赞同：0
> 
> 时间：2012-04-24T14:59:50.653
> 
> 标签：ubuntu, restore

我是 Linux 新手。我`/dev/test/`在 Ubuntu 中创建了一个文件夹。当我重新启动服务器时，该文件夹不再存在。文件夹怎么了？什么会导致它消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:02:09.893

您不能在根目录上拥有一个名为 dev 的文件夹，根目录上已经有一个名为 dev 的系统文件夹，用于“设备”而不是开发。此外，如果没有 root 或 sudo，您将无法在 root 上创建文件夹。在主目录下创建文件夹。

# javascript - 检查是否设置了 cookie，然后使用 jquery cookie 库显示注销链接

> ID：10300585
> 
> 赞同：0
> 
> 时间：2012-04-24T15:00:08.517
> 
> 标签：javascript, jquery, cookies

我正在尝试使用该`cookie.js`库清除 DNN cookie。当用户单击登录时，他们应该通过 CMS 登录。那么jquery需要：

检查是否设置了cookie（如果设置了则隐藏登录链接并显示注销）

这是我的尝试：

**HTML：**

```
<a id="dnn_dnnLOGIN_cmdLogin" href="Login">
    Login
</a>

||

<a id="dnn_dnnLOGIN_cmdLogin" href="Logoff">
    Logoff
</a>

<br />

<a id="see" href="#">
    see if cookie is set?
</a> 
```

**查询：**

```
$('#dnn_dnnLOGIN_cmdLogin').live('click', function() {
    var preval = $.cookie('DNN-COOKIE');
    if(preval != null) {
        $(this).hide();
    } else {
    var action = $(this).attr('href');
    var cookie_value = (action == 'Login') ? 1 : null;

    $.cookie('DNN-COOKIE', cookie_value);
    }
    return false;
});

// clicking on 'see' should bring up an alert box display the cookie value of 1 or 0
$('#see').live('click', function() {

    alert($.cookie('DNN-COOKIE'));

    return false;
}); 
```

我已将库资源添加到此 JsFiddle：http: [//jsfiddle.net/whQaq/](http://jsfiddle.net/whQaq/) 我需要检查是否设置了 cookie

**编辑：这是一个似乎有效的示例，但在 DNN 中，当我将代码放在皮肤文件中时，它不起作用。** [http://jsfiddle.net/whQaq/3/](http://jsfiddle.net/whQaq/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:23:03.263

我会测试以下内容：

```
$.cookie('DNN-COOKIE', null); 
```

然后检索：

```
var preval = $.cookie('DNN-COOKIE') 
```

并断言：

```
preval === null; 
```

无论如何，使用它可能更安全：

```
if(!preval) {
    $(this).hide();
} 
```

更新：

您是否需要将 cookie 设置为您的域的根目录：

```
$.cookie('the_cookie', 'the_value', { path: '/' }); 
```

如果您使用子域，可能就是这种情况。

# java - 在 Java 中查找 href 链接和 URL 的内容

> ID：10300588
> 
> 赞同：6
> 
> 时间：2012-04-24T15:00:14.900
> 
> 标签：java, href

我想解析这个链接：

```
<a href="http://www.google.fr">Link to google</a> 
```

为了得到两个结果：

```
Link = "http://www.google.fr"
LinkName = "Link to google" 
```

我真的不知道该怎么做，Java中有一个库可以解决这个问题吗？

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T15:10:38.033

使用[jsoup](http://jsoup.org/cookbook/extracting-data/dom-navigation)解析器：

例子：

```
File input = new File("/tmp/input.html");
Document doc = Jsoup.parse(input, "UTF-8", "http://example.com/");

Element content = doc.getElementById("content");
Elements links = content.getElementsByTag("a");
for (Element link : links) {
    String linkHref = link.attr("href");
  String linkText = link.text();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:29:09.833

这会做。

```
public class Parse
{
  public static void main(String[] args)
  {
    String h = " <a href=\"http://www.google.fr\">Link to google</a>";
    int n = getIndexOf(h, '"', 0);

    String[] a = h.substring(n).split(">");
    String url = a[0].replaceAll("\"", "");
    String value = a[1].replaceAll("</a", "");

    System.out.println(url + " - " + value);
  }

  public static int getIndexOf(String str, char c, int n)
  {
    int pos = str.indexOf(c, 0);
    while (n-- > 0 && pos != -1)
    {
      pos = str.indexOf(c, pos + 1);
    }
    return pos;
  }
} 
```

# html - W3C 验证错误 XHTML 标记 - 省略“div”的结束标记

> ID：10300590
> 
> 赞同：0
> 
> 时间：2012-04-24T15:00:18.583
> 
> 标签：html, validation, xhtml, w3c

使用位于以下位置的 W3C 标记验证服务验证的网页：

[http://validator.w3.org/](http://validator.w3.org/)

返回的错误和信息是：

**错误**第 112 行，第 7 列：省略了“div”的结束标记，但指定了 OMITTAG NO

```
 </body> 
```

**信息**第 16 行，第 1 列：开始标签在这里

```
<div id="wrapper"> 
```

但是，我在标记中看不到错误，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T15:08:35.217

看起来您的导航 div 缺少关闭 div。start nav 有一个起始 div，但 close nav 注释没有关闭 div。您的源代码比关闭 div 多了一个打开的 div，这看起来像是缺少的一个。

# html - 试图使 FieldSet 居中

> ID：10300592
> 
> 赞同：0
> 
> 时间：2012-04-24T15:00:22.560
> 
> 标签：html, css

div 中的 fieldSet 有问题。前 2 个彼此相邻居中，但第三个居中对齐，似乎无法在 div 中居中。

![在此处输入图像描述](../Images/a58b4a1a5b54f3a57d2aca41b2db44ba.png)

JSP

```
<tr>
<th>
<span onclick="toggleDiv('rollupGranularity', 'rollImg')" style="cursor: hand;">Data Structure&nbsp;<img name="rollImg" src="../images/minus.gif" /></span>
</th>
</tr>

<tr>
<td>
<div class="det" id="rollupGranularity" style="text-align: center;">

<table class="det">
<tr>
<td>
<fieldset class="det">
    <legend>Rollup Level</legend>
    <input type="radio" class="filterBoxes" id="groupLevel1" name="groupLevel" value="1" <c:if test="${form.groupLevel == '1'}">checked="checked"</c:if>>SOR</input>
    <input type="radio" class="filterBoxes" id="groupLevel2" name="groupLevel" value="2" <c:if test="${form.groupLevel == '2'}">checked="checked"</c:if>>Commodity</input>
    <input type="radio" class="filterBoxes" id="groupLevel4" name="groupLevel" value="4" <c:if test="${form.groupLevel == '4'}">checked="checked"</c:if>>TAMCN</input>
    <input type="radio" class="filterBoxes" id="groupLevel5" name="groupLevel" value="5" <c:if test="${form.groupLevel == '5'}">checked="checked"</c:if>>NSN</input>
    <input type="radio" class="filterBoxes" id="groupLevel6" name="groupLevel" value="6" <c:if test="${form.groupLevel == '6' || empty form.groupLevel}">checked="checked"</c:if>>MWSLIN</input>
    <input type="radio" class="filterBoxes" id="groupLevel7" name="groupLevel" value="7" <c:if test="${form.groupLevel == '7'}">checked="checked"</c:if>>Planned Unit</input>
    <input type="radio" class="filterBoxes" id="groupLevel8" name="groupLevel" value="8" <c:if test="${form.groupLevel == '8'}">checked="checked"</c:if>>Actual Unit</input>

    </fieldset>
  <fieldset class="det">
    <legend>Granularity</legend>
    <input type="radio" class="filterBoxes" id="granularity1" name="granularity" onclick="javascript:updateOutYearsSelect();" value="1" <c:if test="${form.granularity == '1'}">checked="checked"</c:if>>Workload Year</input>
    <input type="radio" class="filterBoxes" id="granularity2" name="granularity" onclick="javascript:updateOutYearsSelect();" value="2" <c:if test="${form.granularity == '2'}">checked="checked"</c:if>>Quarter</input>
    <input type="radio" class="filterBoxes" id="granularity4" name="granularity" onclick="javascript:updateOutYearsSelect();" value="4" <c:if test="${form.granularity == '4' || empty form.granularity}">checked="checked"</c:if>>Month</input>
    &nbsp;&nbsp;Out years:&nbsp;
    <select id="outYears" name="outYears" class="filterSelect">
        <option value="0" <c:if test="${form.outYears == '0'}">selected</c:if>>None</option>
        <option value="1" <c:if test="${form.outYears == '1' || empty form.outYears}">selected</c:if>>One</option>
        <option value="2" <c:if test="${form.outYears == '2'}">selected</c:if>>Two</option>
    </select>
</fieldset>

</td>
</tr>
</table>

<fieldset class="det" style="align:center;">
<legend>Additional Breakout</legend>
<table class="det" style="text-align:left;" width="98%">
<tr>
    <c:forEach var="field" items="${groupingFields}" varStatus="status">
        <c:set var="mapKey" value="grp_${field.fieldName}"/>
        <c:if test="${status.index%7==0 && !status.first}"></tr><tr></c:if>
        <td style="padding-top=0; padding-bottom=0; padding-right: 2px; margin-top=0; margin-bottom=0; margin-right: 2px;">
            <span class="mouseover_text" style="color: #000000;" title="${field.description}"><input type="checkbox" class="filterBoxes" id="grp_${field.fieldName}" name="groupingFieldNames" value="${field.fieldName}" <c:if test="${preselectionMap[mapKey]}">checked="checked"</c:if>>${field.displayName}</input></span>
        </td>
    </c:forEach>
</tr>
</table>
</fieldset>

</div>
</td>
</tr> 
```

CSS：

```
/*styling for Data Extraction tool. */
table.data_extract
{

 border: 3px DarkGray solid;
 border-collapse: collapse;

}

td.data_extract,
table.data_extract > tbody > tr > td
 {
border-color : DarkGray;
border-style : groove;
border-width : thin;
border: #000000 1px solid;
font-size: 9pt;
white-space: normal;
background-color:#FFFFFF;
padding-left: 4px;
padding-right: 4px;
overflow:hidden;
 } 

 th.data_extract,
 table.data_extract > tbody > tr > th
 {
 border: #000000 1px solid;
 background-color:#DDDDD0;
 font-size: 10pt;
 white-space: normal;
 padding: 10px;
 }

table.det
{
background-color: #FFFFDD;
border-collapse: collapse;
margin: auto;
}
table.det > tbody > tr > td
{ 
border: none; 
background-color: #FFFFDD;
}
fieldset.det 
{     
display:block;
float:left;
font-family:Verdana, Arial, Helvetica, sans-serif;
font-size:12px;
margin-top:20px;
margin-left:20px;
border:2px solid #CCCCCC;
background-color: #FFFFDD;

}
fieldset.det legend
{
    padding:2px 5px;
    border:2px solid #CCCCCC;
    font-weight:  bold;
    background-color: #FFFFDD;
}

div.det
{   
display:block;
background-color: #FFFFDD;
text-align: center;
width: 100%;
margin: auto;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:34:15.240

You need to center the text in the tr, div.det should float left and 100% width, and fieldset.det should have 100% width as well: [Here's an example](http://jsfiddle.net/HcKAU/2/)

Good luck!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:24:23.153

text-align:left 可能会覆盖您的大纲 CSS：

```
<legend>Additional Breakout</legend>
<table class="det" style="text-align:left;" width="98%"> 
```

# c# - FileStream 用于在不同进程之间共享文件

> ID：10300593
> 
> 赞同：1
> 
> 时间：2012-04-24T15:00:23.010
> 
> 标签：c#, .net, file, filestream, sharing

我正在使用以下代码来修改可以从多个进程中使用的 XML 文件

```
using (FileStream fs = new FileStream(path, FileMode.Open, FileAccess.ReadWrite, FileShare.Read))
{
    var d = XDocument.Load(fs);
    d.Descendants("TestNode").FirstOrDefault().Descendants("MyInfo").FirstOrDefault().Attribute("Id").Value = "Tested Successfully";
    XElement x1 = new XElement(new XElement("PoolId", "A91"));
    d.Root.Add(x1);
    fs.Seek(0, SeekOrigin.Begin);
    d.Save(fs);
} 
```

此方法位于 LOCK 对象内部。

现在，我总是想覆盖 XML 文件的内容，所以我使用了

```
fs.Seek(0, SeekOrigin.Begin); 
```

这是正确的吗？有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:17:07.557

已经保存覆盖，您无需调用 Seek。

你在用 XElement 做什么？

```
new XElement(new XElement("PoolId", "A91")); 
```

只能读

```
new XElement("PoolId", "A91"); 
```

# ejb-3.0 - EJB 给出错误的输出

> ID：10300598
> 
> 赞同：0
> 
> 时间：2012-04-24T15:00:30.843
> 
> 标签：ejb-3.0

我正在调用本地 EJB，它会为我获取一些评论列表。这里每个评论都有一个特定的创建日期。从这里我需要获取最新评论所以我要做的是检查最新时间，然后使用这个时间来获取最新评论并在 UI 上显示

现在，在测试相同内容时，我面临一个问题，即在 UI 中它不显示最新评论，而是在一段时间内显示最新评论之前的评论。

例如：

我创建了comment1、comment2、comment3、comment4，其中comment1 是最旧的，comment4 是最新的

现在，当我运行我的应用程序时，我在输出中得到了 comment3 而不是 comment4 ，这是预期的，但是大约一个小时后，当我再次运行应用程序时，我可以看到 comment4 。

另外，当我检查日志时，我实际上最初并没有从 EJB 获得 comment4**现在**这个 EJB 也被部署为 web 服务当我同时运行这个 web 服务时，我也可以看到 comment4

这是任何缓存问题。我无法理解问题所在

如果需要更多详细信息，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T09:03:53.313

请参阅下面获取最新日期的逻辑。现在根据这个日期，我提取最新评论

```
private Date getLatestNoteDate(List<AlarmNoteHistoryDTO> noteHistory ) {    
  Date tempDate=noteHistory.get(0).getTimeStamp();    
  for(AlarmNoteHistoryDTO alarmNoteHistory:noteHistory) {        
      if(alarmNoteHistory.getTimeStamp().after(tempDate)) {
        tempDate=alarmNoteHistory.getTimeStamp();
      }  
     return tempDate;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:12:30.740

获取您可能使用了 JPQL 的评论，因为我认为

```
SELECT MAX(time) from comments 
```

通过这种方式，您可以获得带有时间戳的最新评论

检查您是否正确查询数据..

# php - PHP foreach 超出内存限制

> ID：10300599
> 
> 赞同：4
> 
> 时间：2012-04-24T15:00:35.790
> 
> 标签：php, memory, memory-leaks

我正在尝试遍历数组中的数千个项目，执行一些操作并将一些值保存到 mysql 表中。

然而，当我循环时，内存使用量不断增长，直到我们用完我在 php.ini 中指定的内存，这非常快。

我尝试使用未设置，将变量设置为 null 并查看垃圾收集，但没有任何影响。

有没有更有效的方法可以循环遍历这些元素（即内存使用量不会持续增长）。

下面是我正在做的一个简化示例。

```
foreach ($subscribers as $subscriber)
{
    $member = new Member($subscriber['id']);
    if ($member['id'] > 0)
    {
        $bulletin = Bulletin::getCustomBulletin($member['id']);

        Bulletin::compileBulletin($member['email'], time(), $bulletin['title'], $bulletin['content']);

        echo $member['email'] . "\n";
        echo memory_get_usage() . "\n";
    }
} 
```

这会产生以下结果：

```
an@email.com
11336688
an@email.com
12043640
an@email.com
12749952 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T15:21:00.763

是`$suscribers`数据库查询的结果吗？

如果是这样，它可能是您的问题的根源：行将被缓冲在内存中，即使您一次通过它们。

您可以尝试使用[无缓冲查询](http://www.php.net/manual/en/function.mysql-unbuffered-query.php)或限制查询的结果数量并执行几个较小的查询。

另请参阅：[为什么“允许的内存大小已用尽”？](https://stackoverflow.com/questions/9243070/why-allowed-memory-size-exhausted)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:15:38.617

您的`foreach`循环没有任何可疑之处（没有要取消设置的变量，因为它们都在每次迭代中被覆盖）。您将需要找出导致内存占用的行。在专业 IDE 中找到的分析器会对此有所帮助。如果您无法访问其中一个，您将希望照常使用`memory_get_usage()`，但将其放在每一行之后，以检查哪一个导致了瓶颈。

还有免费的分析工具，例如[xdebug](http://xdebug.org/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T15:30:47.657

不幸的是，很难从您发布的代码中看出，因为没有任何关于 Member 对象在内部做什么的线索，但这看起来是可能的：

[递归引用泄漏内存](https://bugs.php.net/bug.php?id=33595)

我将在上面的代码中消除新成员对象的创建，以检查这是否是内存泄漏的根源。从您所说的来看，无论如何创建成员对象可能都是不必要的，并且可以用静态查找成员函数替换它。

# android - Facebook 单点登录：当用户退出 Facebook 应用程序时，我如何退出我的应用程序？

> ID：10300600
> 
> 赞同：9
> 
> 时间：2012-04-24T15:00:42.167
> 
> 标签：android, facebook, facebook-graph-api

我完全被 Facebook SDK for Android 惊呆了——有效使用它非常具有挑战性。据我了解，这些是单点登录的规则：

*   如果用户拥有 Facebook 应用并使用 SDK 登录第三方应用，则 Facebook 应用也已登录
*   如果用户使用 SDK 退出第三方应用程序，Facebook 应用程序仍处于登录状态（可能是最好的）
*   如果用户退出 Facebook 应用，使用 SDK 的第三方应用不受影响

有没有办法在使用 Facebook SDK 的 Android 应用程序中检查官方 Facebook 应用程序是否未登录到 Android 应用程序正在使用的同一帐户，如果是这种情况，请退出 Android 应用程序。 ..换句话说，如果你进入Facebook应用程序并退出，然后去第三方应用程序，它会被退出吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-12T13:10:27.617

### 更新的答案

> 有没有办法在使用 Facebook SDK 的 Android 应用程序中检查官方 Facebook 应用程序是否未登录到 Android 应用程序正在使用的同一帐户，如果是这种情况，请退出 Android 应用程序。 ..

如果我理解这一点，你问我们是否可以：

*   从您的应用程序中，检查是否安装了官方 android 应用程序
*   如果已安装，请检查它是否登录到与您的应用相同的帐户
*   如果官方应用未登录您的帐户，请退出您的应用

简短的回答：不，但你可以，通过编写自己的 Facebook 课程

*   检查官方 FB 应用程序是否未安装或处于注销状态或登录到另一个帐户。
*   如果是这种情况，请强制您的应用显示登录对话框。

长答案：

Single Single On(SSO) 在 Facebook Android SDK 的 Facebook 类中处理。Facebook 类 API 没有可让您访问或修改 SSO 流程的方法。

在 Facebook 类中，有四个重载的公共授权方法。其中三个称第四个：

```
public void authorize(Activity activity, String[] permissions,
        int activityCode, final DialogListener listener) 
```

在这里，SSO 过程开始。它像这样检查 SSO：

```
 // Prefer single sign-on, where available.
    if (activityCode >= 0) {
        singleSignOnStarted = startSingleSignOn(activity, mAppId,
                permissions, activityCode);
    }
    // Otherwise fall back to traditional dialog.
    if (!singleSignOnStarted) {
        startDialogAuth(activity, permissions);
    } 
```

私有 startSingleSignOn 方法检查官方 Facebook 应用程序是否可以管理 Auth 过程：

```
private boolean startSingleSignOn(Activity activity, String applicationId,
        String[] permissions, int activityCode) {
    boolean didSucceed = true;
    Intent intent = new Intent();

    intent.setClassName("com.facebook.katana",
            "com.facebook.katana.ProxyAuth");
    intent.putExtra("client_id", applicationId);
    if (permissions.length > 0) {
        intent.putExtra("scope", TextUtils.join(",", permissions));
    }

    // Verify that the application whose package name is
    // com.facebook.katana.ProxyAuth
    // has the expected FB app signature.
    if (!validateActivityIntent(activity, intent)) {
        return false;
    }

    mAuthActivity = activity;
    mAuthPermissions = permissions;
    mAuthActivityCode = activityCode;
    try {
        activity.startActivityForResult(intent, activityCode);
    } catch (ActivityNotFoundException e) {
        didSucceed = false;
    }

    return didSucceed;
} 
```

该方法为 com.facebook.katana 包中的类 ProxyAuth 创建显式意图，该包是官方 Facebook 应用程序包。然后该方法以意图作为参数调用 validateActivityIntent。如果服务意图解析成功并且 FB 签名匹配，则返回 true。

我们无权访问 ProxyAuth 类源，但根据您在问题和评论中描述的观察到的应用程序行为，如果用户在官方应用程序上登录到与在您的应用程序上。这意味着无法从您的应用程序中区分 1) 官方 FB 应用程序未安装 2) 官方 FB 应用程序未处于登录状态，以及 3) 它已登录到另一个帐户。

所以你可以这样做：

*   检查是否未安装 FB 应用程序或未登录或登录到另一个帐户。
*   如果是这种情况，请注销您的应用程序。

但你不能

*   验证官方 FB 已安装且处于注销状态。
*   验证官方 FB 应用程序是否已安装并登录到另一个帐户。

如果您*可以*按照上述操作满足触发注销的需求，则需要编写自己的自定义 Facebook 类来添加新逻辑。Facebook Android SDK 中的 Facebook 类不扩展抽象类，仅隐式扩展 Object，因此您需要将 Facebook 代码复制到您的 CustomFacebook 类中并对其进行修改以添加强制注销的代码。

以供参考：

### 旧答案

我不确定这是否能回答您的问题，但要强制用户使用 Facebook Android SDK 注销，请在身份验证/登录期间调用 authorize() 时使用 FORCE_DIALOG_AUTH 标志，如下所示：

```
mFacebook.authorize(this, PERMS, mFacebook.FORCE_DIALOG_AUTH, new LoginDialogListener()); 
```

其中 mFacebook 是 SDK 的 Facebook 类的一个实例，而 LoginDialogListener 实现了 DialogListener。

如果用户注销，登录对话框将在下次用户想要登录或启动您的应用程序时出现。

如果您不设置 FORCE_DIALOG_AUTH 标志，则用户将“自动”登录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T08:04:05.483

很少评论，希望对你有帮助。

鉴于 Facebook 应用程序是主应用程序，您（或其他）应用程序的登录/注销操作不会产生任何影响。您的应用程序通过 SSO 流获得自己的访问令牌，这不会与主应用程序建立任何联系。

简单地; 当您完成 SSO 时，您将获得为您的 appid 分配的 access_token，过期时间为 ca.2 小时（如果您不要求 offline_access 权限）。

-- 如何检查你的token的有效性？最简单的方法是使用 HTTP GET 将我的个人资料加载到

```
https://graph.facebook.com/me?access_token=<access_token> 
```

如果您的令牌无效，响应将清楚地告诉您

-- 如何使你的令牌失效（又名注销）？您可以对该端点进行 HTTP GET 调用，请参见示例

```
https://api.facebook.com/restserver.php?method=auth.expireSession&format=json&access_token=<access_token> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T12:17:51.233

1）检查是否安装了官方FB应用程序非常简单。如果已安装，facebook.authorize(blah,blah,blah) 将带您进入应用程序中的登录屏幕，否则它将切换到 webview 进行授权。

2）您可以尝试从共享首选项中获取 access_token 并检查是否存在，然后尝试在注销时将其清除。

# jsf-2 - 两次调用 begin 时 JSF/CDI 会话范围内的错误

> ID：10300603
> 
> 赞同：1
> 
> 时间：2012-04-24T15:00:52.523
> 
> 标签：jsf-2, cdi, conversation-scope

我正在使用 CDI 对话范围，当用户遵循正常情况时就可以了。但是，当用户未完成“对话”时，我收到此错误：

```
WELD-000214 Attempt to call begin() on a long-running conversation 
```

显然，是因为有 2 次调用*begin*方法而没有调用*end*方法。

为了澄清这一点，这是我的场景：

*   在第一页中，用户通过参考编号搜索产品。如果找到了，我会调用*conversation.begin*并导航到产品详细信息页面。
*   在此页面中，当用户按下保存按钮时，此时我调用了*conversation.end*。

问题是在用户离开的详细信息页面（例如，单击菜单中的链接）时，不会调用*end*方法。当他们返回搜索页面时，我收到错误，因为再次调用了*begin 。*

我认为，一种可能的解决方案可能是在用户存在第二页时调用*end方法。*但我不知道如何实现这一点。

（我正在使用 JSF 2.1 和 CDI 的 Weld 1.1.6 实现）

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T18:08:49.633

这种行为是故意的。您可以轻松检查`conversation.isTransient()`以决定是否要/需要进行长时间的对话。

> 如果 begin() 被调用，并且当前会话已被标记为长时间运行，则会引发 IllegalStateException。

（[请参阅此处的规范](http://docs.jboss.org/cdi/spec/1.0/html/contexts.html#d0e5678)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-17T10:20:08.333

始终首先开始对话检查是使用 isTransient() 方法结束对话。

```
public void beginConversation(){
    if (!conversation.isTransient()){
        conversation.end();
    }
    conversation.begin();
} 
```

# signalr - 从 Visual Studio 运行时，SignalR 连接会在一段时间后自动停止

> ID：10300606
> 
> 赞同：2
> 
> 时间：2012-04-24T15:01:13.960
> 
> 标签：signalr

我有一个网页，它使用 SignalR 在 JqGrid 中显示最新的数据集。每当数据被修改时，所有连接的客户端都会用更新的数据重新加载 jQGrid。

一切正常，但我注意到页面在一段时间后停止刷新数据，即一分钟左右。浏览器中的状态栏几乎每秒都在快速运行。如果我通过执行 F5 刷新页面，则网格开始刷新数据但一段时间后停止。

此外，我已经意识到，无论我在 ReconnectionTimeout 参数中设置什么值，我的网格都只会在这段时间内刷新数据，然后停止。

ReconnctionTimeOut 我设置如下：

```
var config = AspNetHost.DependencyResolver.Resolve<IConfigurationManager>();
            config.ReconnectionTimeout = TimeSpan.FromSeconds(60); 
```

在这种情况下，我的页面仅刷新数据 60 秒，然后停止。我尝试将其设置为 0，假设它将永远刷新页面，但在这种情况下，网格刷新几乎立即出现在顶部。我正在使用 IE8 浏览器。请让我知道如何让它永远运行？

* * *

来自提琴手的堆栈跟踪—— **错误从此请求开始**

```
GET http://localhost.:2629/AlarmPoc/signalr?transport=foreverFrame&connectionId=600dda9b-225f-42ef-a8f3-79008bf6faaf&connectionData=%5B%7B%22name%22%3A%22YW.AlarmPoC.Web.SignalR.AlarmHub%22%2C%22methods%22%3A%5B%22notification%22%5D%7D%5D&messageId=2&frameId=1
302 Found to /AlarmPoc/signalr/ 
```

**对上述请求的回应**

```
HTTP/1.1 302 Found
Server: ASP.NET Development Server/10.0.0.0
Date: Mon, 30 Apr 2012 13:05:00 GMT
Content-Length: 135
Location: /AlarmPoc/signalr/
Connection: Close

<html><head><title>Object moved</title></head><body>
<h2>Object moved to <a href='/AlarmPoc/signalr/'>here</a>.</h2>
</body></html> 
```

**下一个请求**

```
GET http://localhost.:2629/AlarmPoc/signalr/
500 Internal Server Error (text/html) 
```

**回复**

```
HTTP/1.1 500 Internal Server Error
Server: ASP.NET Development Server/10.0.0.0
Date: Mon, 30 Apr 2012 13:05:00 GMT
X-AspNet-Version: 4.0.30319
Cache-Control: private
Content-Type: text/html; charset=utf-8
Connection: Close

<html>
    <head>
        <title>Unknown transport.</title>
        <style>
         body {font-family:"Verdana";font-weight:normal;font-size: .7em;color:black;} 
         p {font-family:"Verdana";font-weight:normal;color:black;margin-top: -5px}
         b {font-family:"Verdana";font-weight:bold;color:black;margin-top: -5px}
         H1 { font-family:"Verdana";font-weight:normal;font-size:18pt;color:red }
         H2 { font-family:"Verdana";font-weight:normal;font-size:14pt;color:maroon }
         pre {font-family:"Lucida Console";font-size: .9em}
         .marker {font-weight: bold; color: black;text-decoration: none;}
         .version {color: gray;}
         .error {margin-bottom: 10px;}
         .expandable { text-decoration:underline; font-weight:bold; color:navy; cursor:hand; }
        </style>
    </head>

    <body bgcolor="white">

            <span><H1>Server Error in '/AlarmPoc' Application.<hr width=100% size=1 color=silver></H1>

            <h2> <i>Unknown transport.</i> </h2></span>

            <font face="Arial, Helvetica, Geneva, SunSans-Regular, sans-serif ">

            <b> Description: </b>An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

            <br><br>

            <b> Exception Details: </b>System.InvalidOperationException: Unknown transport.<br><br>

            <b>Source Error:</b> <br><br>

            <table width=100% bgcolor="#ffffcc">
               <tr>
                  <td>
                      <code>

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.</code>

                  </td>
               </tr>
            </table>

            <br>

            <b>Stack Trace:</b> <br><br>

            <table width=100% bgcolor="#ffffcc">
               <tr>
                  <td>
                      <code><pre>

[InvalidOperationException: Unknown transport.]
   SignalR.PersistentConnection.ProcessRequestAsync(HostContext context) +329
   SignalR.Hubs.HubDispatcher.ProcessRequestAsync(HostContext context) +203
   SignalR.Hosting.AspNet.AspNetHost.ProcessRequestAsync(HttpContextBase context) +433
   SignalR.Hosting.AspNet.HttpTaskAsyncHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +125
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8967220
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&amp; completedSynchronously) +184
</pre></code>

                  </td>
               </tr>
            </table>

            <br>

            <hr width=100% size=1 color=silver>

            <b>Version Information:</b>&nbsp;Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272

            </font>

    </body>
</html>
<!-- 
[InvalidOperationException]: Unknown transport.
   at SignalR.PersistentConnection.ProcessRequestAsync(HostContext context)
   at SignalR.Hubs.HubDispatcher.ProcessRequestAsync(HostContext context)
   at SignalR.Hosting.AspNet.AspNetHost.ProcessRequestAsync(HttpContextBase context)
   at SignalR.Hosting.AspNet.HttpTaskAsyncHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)
--> 
```

# c++ - 当我使用 C++ 设计井字游戏时，如何恢复保存的游戏？

> ID：10300607
> 
> 赞同：-2
> 
> 时间：2012-04-24T15:01:15.447
> 
> 标签：c++

我现在正在设计一个更复杂的井字游戏。我想问玩家是否想恢复保存的游戏。如果是，从文本或二进制文件加载游戏状态。有谁知道这是怎么做到的吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:02:55.383

通常的方法是将有状态对象序列化/反序列化到某个文件。序列化的一个很好的替代方法是使用[Google Protocol Buffers](https://developers.google.com/protocol-buffers/)。

在您的情况下，我只能看到需要序列化的一件事：游戏板。IMO 这包含足够的信息，以便能够在上次保存的确切时间恢复游戏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T16:16:04.267

您需要做的第一件事是制作包含游戏状态的数据列表。这绝对包括；

*   游戏板（哪些位置有“X”，哪些有“0”，哪些是空的）
*   该轮到谁啦？（播放器还是电脑？）

并且可能包括（取决于您的游戏的复杂程度）；

*   人工智能难度
*   其他我可能会忘记的事情。

为简单起见，我假设我们只看棋盘和转牌。你应该已经有一个板的结构/类。您可能还拥有游戏“状态”的结构/类（包含棋盘和回合）。现在您只需要一些功能来执行以下操作（每个功能一个）；

*   将数据结构转换为二进制（或其他）的函数。
*   将二进制文件写入文件的函数。
*   从文件中读取二进制文件的函数。
*   解释二进制并加载游戏“状态”的函数。
*   （可选）允许用户在保存时选择文件的目录/名称的功能（您可以只拥有一个硬编码的目录，然后将游戏保存为当前日期/时间）。
*   （可选）询问用户是否要加载已保存游戏的功能。如果是，则提示用户输入目录或提供可能的文件选择列表供用户从硬编码的目录名称中进行选择。

这似乎势不可挡，但从小处着手。在看下一件之前，试着让一件工作。

# c# - 例外：表达式树可能不包含动态操作

> ID：10300609
> 
> 赞同：5
> 
> 时间：2012-04-24T15:01:29.873
> 
> 标签：c#, .net-4.0, razor

我在这里发现了一个类似的问题： [Razor View Engine : An expression tree may not contain a dynamic operation](https://stackoverflow.com/questions/4155392/razor-view-engine-an-expression-tree-may-not-contain-a-dynamic-operation)

但是我已经尝试了解决方案，但它们并没有解决我的问题。我有一个具有以下内容的控制器：

```
 public ActionResult CreateOrganization(Guid parentOrganizationId)
    {
        Organization organization = new Organization();

        return View(organization);
    } 
```

该视图具有以下内容：

```
@using Project.Data
@Model Project.Data.Organization

@{
    ViewBag.Title = "Create new Organization";
}

<hgroup class="title">
    <h1>@ViewBag.Title.</h1>
    <h2>Use the form below to create a new Organization.</h2>
</hgroup>

<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>

@using (Html.BeginForm((string)ViewBag.FormAction, "Organization"))
{
    <fieldset>
        <legend>Create Organization</legend>
        <ol>
            <li>
                @Html.LabelFor(m=> m.Name)
                @Html.TextBoxFor(m=> m.Name);
                @Html.ValidationMessageFor(m=> m.Name)
            </li>
        </ol>
        <input type="submit" value="Register" />
    </fieldset>
} 
```

这是明确指定模型（如另一篇文章中所建议）。但是，我仍然收到“表达式树可能不包含动态操作”错误。我在某个地方犯了一个愚蠢的错误吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T15:07:19.083

您的视图似乎不正确。

模型声明应该是小写的“模型”，而不是“模型”：

```
@model Project.Data.Organization 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-05T13:09:33.413

修复是

```
@model ProjectName.Models.Modelname 
```

模型 >> 如果在模型文件夹 ProjectName.MVC 模型路径中使用模型类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T15:47:51.487

您是否在任何地方使用动态类型？

这看起来与您的问题非常相似。 [错误：表达式树可能不包含动态操作](https://stackoverflow.com/questions/7118550/error-an-expression-tree-may-not-contain-a-dynamic-operation)

您可以使用与链接中的类似的工作（铸造）。

# android - Android - GLSurface，关闭时出错

> ID：10300611
> 
> 赞同：0
> 
> 时间：2012-04-24T15:01:36.940
> 
> 标签：android, canvas, glsurfaceview

每次我在关闭应用程序时发生错误。我不知道为什么？它仅发生在 2.3.7 上。在 3.2 和 4 上一切正常

```
FATAL EXCEPTION: main
java.lang.NullPointerException
at android.opengl.GLSurfaceView.onDetachedFromWindow(GLSurfaceView.java:533)
at android.view.View.dispatchDetachedFromWindow(View.java:6190)
at android.view.ViewGroup.dispatchDetachedFromWindow(ViewGroup.java:1162)
at android.view.ViewGroup.dispatchDetachedFromWindow(ViewGroup.java:1162)
at android.view.ViewGroup.dispatchDetachedFromWindow(ViewGroup.java:1162)
at android.view.ViewRoot.dispatchDetachedFromWindow(ViewRoot.java:1751)
at android.view.ViewRoot.doDie(ViewRoot.java:2766)
at android.view.ViewRoot.die(ViewRoot.java:2736)
at android.view.WindowManagerImpl.removeViewImmediate(WindowManagerImpl.java:218)
at android.view.Window$LocalWindowManager.removeViewImmediate(Window.java:477)
atandroid.app.ActivityThread.handleDestroyActivity(ActivityThread.java:2822)
at android.app.ActivityThread.access$2100(ActivityThread.java:123)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:972)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3835)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T16:12:46.443

可能与此重复：[GLSurfaceView.onDetachedFromWindow](https://stackoverflow.com/questions/4785182/glsurfaceview-ondetachedfromwindow)

当您关闭窗口时，游戏是否真的在运行？在另一个问题中，听起来他们从未附加渲染器，但我不确定在您的情况下是否属实。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-14T07:00:25.223

```
Because on 2.3 the GLSurfaceView.onDetachedFromWindow method didn't do nullpointer protection;However this method did nullpointer protection on other version above 2.3.

protected void onDetachedFromWindow() {
  super.onDetachedFromWindow();
  mGLThread.requestExitAndWait();
}

the solution is that set a render for your GLSurfaceView object like below:
mGLSurfaceView.setRenderer(new MyRenderer());

mGLThread is init in setRenderer() method;the code is below:

    public void setRenderer(Renderer renderer) {
        checkRenderThreadState();
        if (mEGLConfigChooser == null) {
            mEGLConfigChooser = new SimpleEGLConfigChooser(true);
        }
        if (mEGLContextFactory == null) {
            mEGLContextFactory = new DefaultContextFactory();
        }
        if (mEGLWindowSurfaceFactory == null) {
            mEGLWindowSurfaceFactory = new DefaultWindowSurfaceFactory();
        }
        mRenderer = renderer;
        mGLThread = new GLThread(mThisWeakRef);
        mGLThread.start();
    }
so if you have set a renderer on 2.3,you would not met the nullpointer exception;Hope this could help you. 
```

# c# - 在 asp.net WebService 中未调用 Application_End 时

> ID：10300613
> 
> 赞同：5
> 
> 时间：2012-04-24T15:01:43.287
> 
> 标签：c#, asp.net, .net, iis, application-end

我知道在以下情况下将调用 Apllication_end：

1.  编辑正在运行的应用程序的配置文件。
2.  更改bin目录中的dll。
3.  停止（或重新启动）IIS。
4.  进程回收在 IIS6 应用程序池中打开，或者使用 aspnet 工作进程。

但我的问题是什么情况下它不会被调用？
我知道如果您手动结束 w3wp 进程或服务器将残酷关闭，它将不会被调用。

有没有其他的场景？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T15:22:28.380

你的问题的答案基本上已经在你的问题中了。只要托管您的 Web 服务的进程正常关闭，就会调用 Application_End。

唯一会发生这种情况的是：

1.  一项操作导致 IIS 重新启动服务进程（更改文件会强制执行此操作）
2.  IIS 服务已关闭
3.  工艺回收。

如果进程突然终止（即杀死 w3wp 进程），它将没有机会运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T12:27:49.017

残酷的关闭似乎是由 OutOfMemoryException 引起的，导致创建执行请求所需的 AppDomain 失败。在这种情况下 Application_end 不会被调用。

> 事件类型：错误
> 事件源：ASP.NET 2.0.50727.0
> 事件类别：无
> 事件 ID：1334
> 日期： 2012 年 4 月 22 日
> 时间：上午 11:23:13
> 用户：
> 不适用计算机：CCBSHAIS02
> 描述：
> 无法初始化AppDomain:/LM/W3SVC/1/Root/AgentWS
> 
> 异常：System.SystemException
> 
> 消息：无法创建 AppDomain。
> 
> StackTrace：在 System.Web.Hosting.ApplicationManager.CreateAppDomainWithHostingEnvironment（字符串 appId，IApplicationHost appHost，HostingEnvironmentParameters hostingParameters）在 System.Web.Hosting.ApplicationManager.CreateAppDomainWithHostingEnvironmentAndReportErrors（字符串 appId，IApplicationHost appHost，HostingEnvironmentParameters hostingParameters）
> 
> 内部异常：System.OutOfMemoryException
> 
> 消息：引发了“System.OutOfMemoryException”类型的异常。
> 
> StackTrace：在 System.AppDomain.CreateDomain（字符串友好名称，证据 securityInfo，AppDomainSetup 信息）在 System.Web.Hosting.ApplicationManager.CreateAppDomainWithHostingEnvironment 的 System.AppDomain.nCreateDomain（字符串友好名称，AppDomainSetup 设置，证据提供安全信息，证据创建者安全信息，IntPtr parentSecurityDescriptor） （字符串 appId、IApplicationHost appHost、HostingEnvironmentParameters 托管参数）

有关 IIS 和 AppDomain 的进一步阅读，请查看：[http ://weblogs.asp.net/owscott/archive/2007/09/02/application-vs-appdomain.aspx](http://weblogs.asp.net/owscott/archive/2007/09/02/application-vs-appdomain.aspx)

# javascript - 跟进：检查两个整数是否具有相同的符号

> ID：10300614
> 
> 赞同：0
> 
> 时间：2012-04-24T15:01:50.267
> 
> 标签：javascript

我尝试了[针对我的问题](https://stackoverflow.com/questions/10298109/check-if-two-integers-have-the-same-sign)和[此处](https://stackoverflow.com/a/66968/1047823)建议的按位运算符。

检查我的测试套件的结果：

```
function equal(n1,n2){
    var bool = (n1^n2 >= 0)?true:false;
    document.write("<div>"+bool+" ("+(n1^n2)+")</div>");
}

equal(-5,-2);  //true
equal(-4,-20); //true
equal(15,-2);  //false
equal(25,3);   //true 

equal(-1,1);   //false
equal(1,1);    //true
equal(-1,-1);  //true

// edgecases
equal(0,0);
equal(-0,0);
equal(+0,0);
equal(-0,+0);
equal(+0,-0); 
```

结果：

```
true (5)
true (16)
true (-15)
true (26)

true (-2)
false (0)
true (0)

true (0)
true (0)
true (0)
true (0)
true (0) 
```

我的[小提琴在这里](http://jsfiddle.net/qSwFt/)。

结果让我非常困惑。我是不是太傻了？这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:07:49.713

你的括号放错了地方：

```
function equal(n1, n2){
    var bool = (n1 ^ n2) >= 0 ? true : false;
    document.write("<div>" + bool + " (" + (n1^n2) + ")</div>");
} 
```

这是一个[更新的小提琴](http://jsfiddle.net/qSwFt/1/)，其结果符合您的期望。

这在这种情况下很重要，因为所有位运算符的[优先级](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Operator_Precedence)都低于关系比较运算符。另请注意，条件运算符 ( `?:`) 的优先级低于所有按位运算符，因此不需要在整个条件周围使用另一组括号。

# java - 无法运行 Blackberry Advanced UI 示例

> ID：10300616
> 
> 赞同：0
> 
> 时间：2012-04-24T15:01:54.930
> 
> 标签：java, eclipse, blackberry, user-interface

我是黑莓开发（java）的初学者。我有 C/C++、Qt/QML 的经验，但没有 Java 技能。我已经成功地在模拟器和设备上使用了其他示例。但是，我从 Github 下载了代码并使用 JDK 6.0 和 7.0 导入到 Blackberry Eclipse Plug-in (Version 1.5.0)。它无法在模拟器或设备上运行并出现错误：

```
Packaging project Advanced UI

C:\Eclipse\plugins\net.rim.ejde.componentpack6.0.0_6.0.0.43\components\bin\rapc.exe -quiet codename=deliverables\Standard\6.0.0\Advanced_UI -sourceroot=C:\Documents and Settings\Administrator\workspace\Advanced UI\src -import=C:\Eclipse\plugins\net.rim.ejde.componentpack6.0.0_6.0.0.43\components\lib\net_rim_api.jar deliverables\Standard\6.0.0\Advanced_UI.rapc C:\Documents and Settings\Administrator\workspace\Advanced UI\bin

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\FieldDimensionUtilities.java:49: Warning!: method 'com.samples.toolkit.ui.FieldDimensionUtilities.getBorderHeight(Field)' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\FieldDimensionUtilities.java:64: Warning!: method 'com.samples.toolkit.ui.FieldDimensionUtilities.getBorderAndPaddingWidth(Field)' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\FieldDimensionUtilities.java:79: Warning!: method 'com.samples.toolkit.ui.FieldDimensionUtilities.getBorderAndPaddingHeight(Field)' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\component\BitmapButtonField.java:52: Warning!: method 'com.samples.toolkit.ui.component.BitmapButtonField.setImage(Bitmap)' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\component\BitmapButtonField.java:57: Warning!: method 'com.samples.toolkit.ui.component.BitmapButtonField.setFocusImage(Bitmap)' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\component\BitmapGaugeField.java:145: Warning!: method 'com.samples.toolkit.ui.component.BitmapGaugeField.getNumValues()' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\component\BitmapSliderField.java:222: Warning!: method 'com.samples.toolkit.ui.component.BitmapSliderField.getNumStates()' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\component\BitmapSliderField.java:229: Warning!: method 'com.samples.toolkit.ui.component.BitmapSliderField.getColour()' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\component\EmbossedButtonField.java:96: Warning!: method 'com.samples.toolkit.ui.component.EmbossedButtonField.setText(String)' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\component\HyperlinkButtonField.java:1: Warning!: member data 'int _menuOrdinal' not required in class: com.samples.toolkit.ui.component.HyperlinkButtonField

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\component\HyperlinkButtonField.java:1: Warning!: member data 'int _menuPriority' not required in class: com.samples.toolkit.ui.component.HyperlinkButtonField

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\component\HyperlinkButtonField.java:144: Warning!: method 'com.samples.toolkit.ui.component.HyperlinkButtonField.getMenuText()' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\component\HyperlinkButtonField.java:153: Warning!: method 'com.samples.toolkit.ui.component.HyperlinkButtonField.getMenuItem()' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\component\LabeledSwitch.java:43: Warning!: member data 'boolean _selected' not required in class: com.samples.toolkit.ui.component.LabeledSwitch

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\component\LabeledSwitch.java:88: Warning!: method 'com.samples.toolkit.ui.component.LabeledSwitch.setOn(boolean)' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\component\LabeledSwitch.java:93: Warning!: method 'com.samples.toolkit.ui.component.LabeledSwitch.getOnState()' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\component\ListStyleButtonField.java:139: Warning!: method 'com.samples.toolkit.ui.component.ListStyleButtonField.setText(String)' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\component\RatingField.java:59: Warning!: member data 'int _rop' not required in class: com.samples.toolkit.ui.component.RatingField

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\component\RatingField.java:109: Warning!: method 'com.samples.toolkit.ui.component.RatingField.getNumValues()' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\component\SliderField.java:75: Warning!: member data 'int _progressWidth' not required in class: com.samples.toolkit.ui.component.SliderField

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\component\SliderField.java:218: Warning!: method 'com.samples.toolkit.ui.component.SliderField.getValue()' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\component\SliderField.java:223: Warning!: method 'com.samples.toolkit.ui.component.SliderField.getNumValues()' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\component\SwitchField.java:54: Warning!: method 'com.samples.toolkit.ui.component.SwitchField.setOn(boolean)' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\component\SwitchField.java:59: Warning!: method 'com.samples.toolkit.ui.component.SwitchField.getOnState()' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\container\JustifiedHorizontalFieldManager.java:58: Warning!: method 'com.samples.toolkit.ui.container.JustifiedHorizontalFieldManager.addLeftField(Field)' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\container\JustifiedHorizontalFieldManager.java:67: Warning!: method 'com.samples.toolkit.ui.container.JustifiedHorizontalFieldManager.addRightField(Field)' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\container\JustifiedHorizontalFieldManager.java:139: Warning!: method 'com.samples.toolkit.ui.container.JustifiedHorizontalFieldManager.getLeftField()' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\container\JustifiedHorizontalFieldManager.java:144: Warning!: method 'com.samples.toolkit.ui.container.JustifiedHorizontalFieldManager.getRightField()' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\container\JustifiedVerticalFieldManager.java:102: Warning!: method 'com.samples.toolkit.ui.container.JustifiedVerticalFieldManager.getTopField()' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\container\JustifiedVerticalFieldManager.java:107: Warning!: method 'com.samples.toolkit.ui.container.JustifiedVerticalFieldManager.getBottomField()' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\container\TwoColumnField.java:66: Warning!: method 'com.samples.toolkit.ui.container.TwoColumnField.getLeftField()' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\container\TwoColumnField.java:71: Warning!: method 'com.samples.toolkit.ui.container.TwoColumnField.getRightField()' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\decor\BitmapMask.java:94: Warning!: method 'com.samples.toolkit.ui.decor.BitmapMask.getTop()' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\decor\BitmapMask.java:99: Warning!: method 'com.samples.toolkit.ui.decor.BitmapMask.getRight()' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\decor\BitmapMask.java:104: Warning!: method 'com.samples.toolkit.ui.decor.BitmapMask.getBottom()' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\decor\BitmapMask.java:109: Warning!: method 'com.samples.toolkit.ui.decor.BitmapMask.getLeft()' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\decor\BitmapMask.java:114: Warning!: method 'com.samples.toolkit.ui.decor.BitmapMask.getWidth()' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\decor\BitmapMask.java:119: Warning!: method 'com.samples.toolkit.ui.decor.BitmapMask.getHeight()' not invoked.

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\component\RatingField.java:250: Warning!: local variable(s) { isConsumed } initialized but not used in: com.samples.toolkit.ui.component.RatingField.touchEvent(TouchEvent)

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\container\HorizontalButtonFieldSet.java:51: Warning!: local variable(s) { availableWidth maxPreferredWidth } initialized but not used in: com.samples.toolkit.ui.container.HorizontalButtonFieldSet.sublayout(int,int)

C:\Documents and Settings\Administrator\workspace\Advanced UI\src\com\samples\toolkit\ui\container\JustifiedEvenlySpacedHorizontalFieldManager.java:40: Warning!: local variable(s) { availableWidth maxPreferredWidth } initialized but not used in: com.samples.toolkit.ui.container.JustifiedEvenlySpacedHorizontalFieldManager.sublayout(int,int)

Error: Cannot run program "jar": CreateProcess error=2, ?????????

Packaging project Advanced UI failed (took 15.953 seconds) 
```

如何解决这种情况？谢谢。

问候， QC

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T22:55:47.610

确保已将 Java/bin 文件夹设置为 PATH 系统环境变量。

警告不是问题的原因。在线描述的问题：

```
Error: Cannot run program "jar": CreateProcess error=2, ????????? 
```

这意味着 BlackBerry 编译器没有找到标准的 java 编译器 (javac.exe) 来继续编译过程。

通过将系统 PATH 变量设置为 JavaSDK/bin 文件夹，确保可以从任何地方访问 javac.exe 所在的文件夹。

例如，如果您已将标准 Java SDK 安装到文件夹`C:\Java`，则将以下字符串添加到系统 PATH 变量中：

```
C:\Java\bin 
```

# excel - Excel合并和组合类似单元格

> ID：10300618
> 
> 赞同：3
> 
> 时间：2012-04-24T15:01:56.587
> 
> 标签：excel, merge

我有一个简单的 Excel 电子表格，它是每日更新的计数器列表。表格的格式如下：

```
A         B          C             D          E
date      name       computer      info       counter 
```

例子：

```
A             B          C         D              E
04/04/2012    John       186       Workstation    4813
04/04/2012    Mary       181       Workstation    2273
04/05/2012    John       186       Workstation    4822
04/05/2012    Mary       181       Workstation    2274
04/06/2012    John       186       Workstation    4854
04/06/2012    Mary       181       Workstation    2275
04/06/2012    Bill       183       Workstation    3698 
```

和儿子……

我需要做的是将所有类似的单元格组合起来。因此，例如合并每个月的所有行，并从第一列中减去最后一个 E 列，这样它在新工作表中看起来如下所示。

```
A             B          C         D              E
April 2012    John       186       Workstation    41
April 2012    Mary       181       Workstation    2
April 2012    Bill       183       Workstation    0 
```

依此类推……请记住，这是每天更新的，并且有很多天，几个月和几年。

我什至不知道如何考虑这样做，但我认为我需要一个宏。如果有人有任何帮助，那就太好了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T18:01:09.370

![假设这是你想要做的](../Images/3777bfdf28e9beeb5ce1f29ef83cec76.png)

我花了一些时间在这上面，感觉我终于得到了你需要的东西。我会上传一个示例文件，但这里阻止了文件共享站点:)。

现在我知道，您希望您的输出在不同的选项卡中，但现在请耐心等待。

以下解决方案很长（由于您的问题的性质而预期）。按照这里对T的操作，不要关心可能在某些单元格中弹出的中间错误，它会在一段时间内全部解决。

我假设您的工作表看起来像图像的黄色部分。（别管第一栏中的日期，它们都是 2012 年 4 月的日期，这很重要。）

在单元格 F2 中，粘贴以下公式

`=IF(A2="","",MONTH(A2))`

在单元格 G2 中，粘贴以下公式，

`=IF(A2="","",YEAR(A2))`

在单元格 H2 中，粘贴以下公式，

`=IF(B2="","",B2&"|"&F2&"@"&G2)`

我正在使用字符“|” 和“@”在这里，因为我假设它们不会出现在任何名称中！**请确定是不是这样！！**

现在将单元格 F2 复制到 H2，并将它们一直粘贴到您有数据的地方。

现在，我还假设您有 8000 行数据。如果您有超过 8000 行，请将以下公式中的所有“8000”替换为您想要的数字。

在单元格 Q2 中，粘贴以下公式，

`=IF(ISERROR(INDEX($H$2:$H$8000,MATCH(0,COUNTIF($Q$1:Q1,$H$2:$H$8000),0))),"",INDEX($H$2:$H$8000,MATCH(0,COUNTIF($Q$1:Q1,$H$2:$H$8000),0)))`

**请注意，这是一个数组公式，需要使用 Ctrl+Shift+Enter 输入**。因此，在第二季度，您将此公式粘贴到公式栏中，而不是按 Enter，而是按 Ctrl + Shift + Enter。我从[这里](http://www.get-digital-help.com/2009/03/30/how-to-extract-a-unique-list-and-the-duplicates-in-excel-from-one-column/)借用了这个公式。您可以查看该站点以了解该公式的工作原理。

现在，在单元格 K2 中，粘贴以下公式

`=IF(OR(Q2=0,Q2=""),"",LEFT(Q2,FIND("|",Q2)-1))`

在单元格 P2 中，粘贴以下公式

`=IF(OR(Q2=0,Q2=""),"",VALUE(RIGHT(Q2,LEN(Q2)-(FIND("@",Q2)))))`

在单元格 O2 中，粘贴以下公式

`=IF(OR(Q2=0,Q2=""),"",VALUE(MID(Q2,FIND("|",Q2)+1,LEN(Q2)-LEN(K2)-LEN(P2)-2)))`

在单元格 J2 中，粘贴以下公式

`=IF(OR(Q2=0,Q2=""),"",TEXT(DATE(P2,O2,1),"mmm yyyy"))`

在单元格 L2 中，粘贴以下公式

`=IF(OR(Q2=0,Q2=""),"",INDEX($C$2:$C$8000,MATCH(K2,$B$2:$B$8000,0)))`

在单元格 M2 中，粘贴以下公式

`=IF(OR(Q2=0,Q2=""),"",INDEX($D$2:$D$8000,MATCH(K2,$B$2:$B$8000,0)))`

在单元格 N2 中，粘贴以下公式，

`=IF(OR(Q2=0,Q2=""),"",MAX(IF((($B$2:$B$8000=K2)*($F$2:$F$8000=O2)*($G$2:$G$8000=P2)),($E$2:$E$8000)))-MIN(IF((($B$2:$B$8000=K2)*($F$2:$F$8000=O2)*($G$2:$G$8000=P2)),($E$2:$E$8000))))`

**再次请注意，这是一个数组公式，需要使用 Ctrl+Shift+Enter 输入**。确保您已完成上述所有步骤

现在选择从 J2 到 Q2 的单元格，复制它们并将它们粘贴到所需的位置。在示例屏幕截图中，这将是第 5 行（以涵盖所有可能性）。

你终于有了你需要的桌子。您现在可以使用简单的“等于”关系将该表链接到其他位置。此外，如果您愿意，您可以从数据表中隐藏所有这些额外的列。

呼！！我**真的**希望能解决你的问题！我想我应该为所有这些努力而表扬！！希望能帮助到你！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T18:25:18.887

在工作表中添加 4 个新列 ( `F`to `I`) 并输入以下公式：（*假设 100 行数据：根据需要调整！*）

```
F --> =DATE(YEAR(A1), MONTH(A1), 1)

G --> =MIN(IF(($B$1:$B$100=$B1)*($C$1:$C$100=$C1)*($D$1:$D$100=$D1)*($F$1:$F$100=$F1),$E$1:$E$100)) [press CTRL+SHIFT+ENTER (this is an array formula)]

H --> =MAX(IF(($B$1:$B$100=$B1)*($C$1:$C$100=$C1)*($D$1:$D$100=$D1)*($F$1:$F$100=$F1),$E$1:$E$100)) [press CTRL+SHIFT+ENTER (this is an array formula)]

I --> =H1-G1 
```

（向下拖动以将公式扩展到所有行）

它应该如下所示：

```
A             B          C         D              E       F                              G                              H                              I
04/04/2012    John       186       Workstation    4813    =DATE(YEAR(A1), MONTH(A1), 1)  {=MIN(IF(($B$1:$B$100=$B1)...  {=MAX(IF(($B$1:$B$100=$B1)...  =H1-G1
04/04/2012    Mary       181       Workstation    2273    =DATE(YEAR(A2), MONTH(A2), 1)  {=MIN(IF(($B$1:$B$100=$B2)...  {=MAX(IF(($B$1:$B$100=$B2)...  =H2-G2
04/05/2012    John       186       Workstation    4822    =DATE(YEAR(A3), MONTH(A3), 1)  {=MIN(IF(($B$1:$B$100=$B3)...  {=MAX(IF(($B$1:$B$100=$B3)...  =H3-G3
04/05/2012    Mary       181       Workstation    2274    =DATE(YEAR(A4), MONTH(A4), 1)  {=MIN(IF(($B$1:$B$100=$B4)...  {=MAX(IF(($B$1:$B$100=$B4)...  =H4-G4
04/06/2012    John       186       Workstation    4854    =DATE(YEAR(A5), MONTH(A5), 1)  {=MIN(IF(($B$1:$B$100=$B5)...  {=MAX(IF(($B$1:$B$100=$B5)...  =H5-G5
04/06/2012    Mary       181       Workstation    2275    =DATE(YEAR(A6), MONTH(A6), 1)  {=MIN(IF(($B$1:$B$100=$B6)...  {=MAX(IF(($B$1:$B$100=$B6)...  =H6-G6
04/06/2012    Bill       183       Workstation    3698    =DATE(YEAR(A7), MONTH(A7), 1)  {=MIN(IF(($B$1:$B$100=$B7)...  {=MAX(IF(($B$1:$B$100=$B7)...  =H7-G7 
```

结果是：

```
A             B          C         D              E       F              G        H        I
04/04/2012    John       186       Workstation    4813    04/01/2012     4813     4854     41
04/04/2012    Mary       181       Workstation    2273    04/01/2012     2273     2275     2
04/05/2012    John       186       Workstation    4822    04/01/2012     4813     4854     41
04/05/2012    Mary       181       Workstation    2274    04/01/2012     2273     2275     2
04/06/2012    John       186       Workstation    4854    04/01/2012     4813     4854     41
04/06/2012    Mary       181       Workstation    2275    04/01/2012     2273     2275     2
04/06/2012    Bill       183       Workstation    3698    04/01/2012     3698     3698     0 
```

为了清楚起见，让我们在另一张表中获取相关数据的参考。假设上述数据存储在 中`Sheet1`，请在 上输入以下内容`Sheet2`：

```
A           B            C           D           E
=Sheet1!F1  =Sheet1!B1   =Sheet1!C1  =Sheet1!D1  =Sheet1!I1
=Sheet1!F2  =Sheet1!B2   =Sheet1!C2  =Sheet1!D2  =Sheet1!I2
... 
```

结果是：

```
A             B          C         D              E
04/01/2012    John       186       Workstation    41
04/01/2012    Mary       181       Workstation    2
04/01/2012    John       186       Workstation    41
04/01/2012    Mary       181       Workstation    2
04/01/2012    John       186       Workstation    41
04/01/2012    Mary       181       Workstation    2
04/01/2012    Bill       183       Workstation    0 
```

**最后，在`Sheet2`：**

*   ***将A***列[的格式更改](http://spreadsheets.about.com/od/excelformatting/ss/number_format_5.htm)为“自定义” / `mmmm yyyy`，以便日期显示为您喜欢的（即`April 2012`，而不是`04/01/2012`）

*   最后但同样重要的是：[使用 excel 的高级过滤器](https://superuser.com/questions/49614/how-do-i-get-the-distinct-values-in-a-column-in-excel/49618#49618)去除重复项。

# lisp - Windows 7 上的 LispWorks 不会加载 Quicklisp

> ID：10300619
> 
> 赞同：2
> 
> 时间：2012-04-24T15:01:58.780
> 
> 标签：lisp, common-lisp, quicklisp, lispworks

我正在使用 LispWorks 个人版，并且只能通过加载文件而不是通过初始化文件来加载 Quicklisp，`.lispworks`LispWorks 应该在我的主目录中找到`C:\Users\Me\`。我是否将初始化文件放在错误的目录中？还是有其他问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T15:34:57.283

The Personal Edition does not load any initialization file. This is clearly stated in the documentation.

The limitations of the LispWorks Personal Edition are described here: [http://www.lispworks.com/downloads/index.html](http://www.lispworks.com/downloads/index.html)

# php - 解析用 Javascript 加载的图像的方法

> ID：10300620
> 
> 赞同：0
> 
> 时间：2012-04-24T15:02:03.450
> 
> 标签：php, javascript, web-crawler

是否有任何流畅的方法来获取加载了 javascript 的图像？可能与 PHP。让我再解释一下：我不想从网站上获取一张图片，但它加载了 JS，所以我无法通过 url 或通过 dom 获取它，因为需要执行 JS。所以我想知道是否有任何方法可以用 PHP 做到这一点，如果没有，任何语言或方法都可以接受

# jquery - jQuery 复选框单击同步（需要正则表达式）

> ID：10300622
> 
> 赞同：0
> 
> 时间：2012-04-24T15:02:05.353
> 
> 标签：jquery, regex, checkbox

我有两个复选框组，我最终需要让其中一个影响另一个的输出。我已经引用[了这个](https://stackoverflow.com/questions/6964495/checkbox-manipulation)问题/答案，这似乎让我有了一个大致的方向，但这里有一些`regex`需要，我不太熟悉。

这是第一个复选框组：

```
<div class="tabs-panel" id="wood_types-all" style="display: block;">
    <input type="hidden" value="0" name="tax_input[wood_types][]">
    <ul class="list:wood_types categorychecklist form-no-clear" id="wood_typeschecklist">
        <li class="popular-category" id="wood_types-33"><label class="selectit"><input type="checkbox" id="in-wood_types-33" name="tax_input[wood_types][]" value="33"> Clear Pine</label></li>
        <li class="popular-category" id="wood_types-35"><label class="selectit"><input type="checkbox" checked="checked" id="in-wood_types-35" name="tax_input[wood_types][]" value="35"> Oak</label></li>
        <li class="popular-category" id="wood_types-34"><label class="selectit"><input type="checkbox" checked="checked" id="in-wood_types-34" name="tax_input[wood_types][]" value="34"> Poplar</label></li>
        <li class="popular-category" id="wood_types-36"><label class="selectit"><input type="checkbox" id="in-wood_types-36" name="tax_input[wood_types][]" value="36"> PVC</label></li>
    </ul>
</div> 
```

我试图提取和比较的值是（例如），`33`在`id="wood_types-33"`

另一个复选框组是：

```
<div class="field field-categories" id="acf-mp_wood_species_availability"><label for="fields[field_4f7f4709cdb16]" class="field_label">Wood Species Availability</label>
    <ul>
        <li>
            <input type="checkbox" class="33" value="clear-pine" name="fields[field_4f7f4709cdb16][]" id="fields[field_4f7f4709cdb16][]">&nbsp;Clear Pine
        </li>
        <li>
            <input type="checkbox" class="34" value="poplar" name="fields[field_4f7f4709cdb16][]" id="fields[field_4f7f4709cdb16][]">&nbsp;Poplar
        </li>
        <li>
            <input type="checkbox" checked="" class="35" value="oak" name="fields[field_4f7f4709cdb16][]" id="fields[field_4f7f4709cdb16][]">&nbsp;Oak
        </li>
        <li>
            <input type="checkbox" class="36" value="pvc" name="fields[field_4f7f4709cdb16][]" id="fields[field_4f7f4709cdb16][]">&nbsp;PVC         
        </li>
    </ul>
</div> 
```

所以这两个复选框组确实共享一个共同的属性`id="wood_types-33"`和`class="33"`.

我最终要做的是默认隐藏所有第二个复选框（我知道可以这样做）：

```
$('#acf-mp_wood_species_availability li').hide(); 
```

`show()`如果选择了第一个复选框组中的匹配项，则第二组可供选择（未选择，只是）。我还试图让它在页面加载时“查找”这些匹配项（因此，如果有人回来编辑项目，则选择可用）并且如果取消选择第一个复选框组中的项目（在被选中后） ，那么第二个复选框组项目不仅应该消失，而且应该取消选中（可以用 来完成`click()`）。我已经有一段时间了，还没有走得很远，所以任何帮助都将不胜感激。谢谢！

入门 jFiddle：http: [//jsfiddle.net/JfwWv/](http://jsfiddle.net/JfwWv/)

我看到[这](http://www.jquery4u.com/syntax/jquery-basic-regex-selector-examples/)是 jQuery 中正则表达式的备忘单 - 但我找不到该`match()`函数的任何引用 -> 我只是想错了 - 这是正常的选择器`$()`参数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:27:29.857

```
var numberToCompare = "#wood_types-33".split("-")[1]; 
```

基本上，调用`.split()`一个字符串会返回一个在您指定的字符上拆分的字符串数组。在这种情况下，`"wood_types-33".split("-")`返回一个具有两个索引的数组，即“-”之前和之后的内容。我们需要后面的东西；因此`[1]`在最后。

这样做会更快：

```
var myStr = "#wood_types-33";
myStr = myStr.substr(myStr.lastIndexOf("-")+1); 
```

但是解释起来有点棘手。它只是工作。:p

# python - python - “int”对象不可下标

> ID：10300625
> 
> 赞同：0
> 
> 时间：2012-04-24T15:02:08.880
> 
> 标签：python, arrays, knn

我正在尝试一些 knn 分类。当我尝试规范化数组中的数据时，我不断收到上述错误。

```
 norm_val = 100.00                                                              
    for i in range(0, len(ListData)):                                               
            ListData[i][0] = int(ListData[i][0]/max_val) 
```

我在最后一行收到错误消息，“int”对象不可下标。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T15:04:26.580

`ListData`似乎是一个整数列表（或者至少是一个还包含整数的列表）。

因此，`ListData[i]`返回`i`列表的第 th 个整数。而且由于没有“整数的第一个元素”之类的东西，所以在尝试访问`ListData[i][0]`.

除此之外，如果您打算将列表的所有项目除以`max_val`，您可以简单地使用列表推导：

```
ListData = [int(item/max_val) for item in ListData] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T15:08:32.867

`ListData`不仅包含列表，还包含其他不是列表的对象。

以下作品：

```
ListData = [ [99, "Some thing"],
             [88, "Some other thing"] ] 
```

以下没有：

```
ListData = [ 99,
             88 ] 
```

目前还不清楚你想做什么。

# jquery - 为什么我的 jquery if/else 代码没有隐藏/显示？

> ID：10300627
> 
> 赞同：0
> 
> 时间：2012-04-24T15:02:23.477
> 
> 标签：jquery

请问有人能在下面的代码中发现我做错了什么吗？我知道这不是最优雅的代码，但我目前正在做五件事，我想我可以快速敲掉这个简单的代码，让它从我的盘子里消失。

我要做的就是>>如果选择的项目类型等于特定值，则显示一个字段集，如果它不等于该值，则隐藏该字段集。很简单吧？如果选择的值不匹配，我无法隐藏字段集。

请注意，我是 jquery 的新手，但这是一个基本的 if/else - 我在这里做错了什么？先感谢您。

```
$('fieldset#section-841', 'fieldset#section-837' ).hide();
var DM_projtype = new Array(
        {value : 'Direct Mail', sect_id : 'fieldset#section-841'},
        {value : 'Multiple items', sect_id : 'fieldset#section-837'}
    );
$('select#3596').change(function() {
    var getDM_projType = $(this).val();
    var sect_id = '';
     for (var i = 0; i < DM_projtype.length; ++i) 
        {
            if (DM_projtype[i].value == "Direct Mail" )
                {
                    sect_id = DM_projtype[i].sect_id;
                   $(sect_id).show();
                }
            else
                {
                   $('fieldset#section-841').hide(); 
                }
            if (DM_projtype[i].value == "Multiple items" )
                {
                    sect_id = DM_projtype[i].sect_id;
                   $(sect_id).show();
                }
            else
                {
                   $('fieldset#section-837').hide(); 
                }
       }
  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T15:08:58.640

You have structured your code against logic it seems - each element of your array is going to be processed through the loop, so you execute both an if and else of each block set you contain. You should instead do this:

```
$('select#3596').on('change', function() // do .change() if using a lower jQuery version
{
    var thisVal = $(this).val(); // Assuming this returns 'Direct Mail' or 'Multiple Items'

    $(DM_projtype).each(function()
    {
         $(this.sect_id).hide();

         if(this.value == thisVal)
            $(this.sect_id).show();
    });
}); 
```

# mysql - 如何选择两列，其中一列必须是 DISTINCT？

> ID：10300628
> 
> 赞同：6
> 
> 时间：2012-04-24T15:02:33.900
> 
> 标签：mysql, sql

`Table1`有 3 列：`col1`, `col2`,`col3`

我怎样才能让where的`SELECT`所有`DISTINCT`值都等于某个值，然后按 排序，但不同的结果显示它们对应的值？`col1``col3``col2 DESC``col1``col2`

我尝试了以下但没有奏效：

```
SELECT DISTINCT (col1), col2
FROM  `Table1` 
WHERE  `col3` =  'X'
ORDER BY  `col2` DESC 
```

以上不会导致 的不同值`col1`。如果我删除“ `, col2`”，那么它将显示不同的值`col1`，但不会显示它们对应的`col2`值。

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T15:50:30.423

也许是这样的：

```
SELECT col1, MAX(col2) col2_max
FROM Table1
WHERE col3 = 'X'
GROUP BY col1
ORDER BY col2_max 
```

?

您可以在这个[SQL Fiddle](http://sqlfiddle.com/#!3/4c855/5)中使用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T15:50:03.583

我很确定 mySQL 支持该`GROUP BY`子句，并且给定您想要 的*最大值*，`col2`这应该可以得到您想要的结果：

```
SELECT col1, MAX(col2) as col2
FROM Table1
WHERE col3 = 'X'
GROUP BY col1
ORDER BY col2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T15:06:26.987

我假设您希望`col2`每个人都做到最好`col1`：

```
SELECT  tm.*
FROM    (
        SELECT  DISTINCT col1
        FROM    table1
        WHERE   col3 = 'X'
        ) t
JOIN    table tm
ON      id =
        (
        SELECT  id
        FROM    table1 ti
        WHERE   ti.col3 = 'X'
                AND ti.col1 = t.col1
        ORDER BY
                col2 DESC
        LIMIT 1
        ) col2
ORDER BY
        col2 DESC 
```

为此创建一个索引以`(col3, col1, col2)`使其快速工作。

**更新：**

如果只需要这两列，查询确实可以更简单：

```
SELECT  col1, MAX(col2) AS maxcol2
FROM    table1
WHERE   col3 = 'X'
GROUP BY
        col1
ORDER BY
        maxcol2 DESC 
```

但是，如果您需要整个记录（以及表中可能包含的其他字段），则需要初始语法。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-24T15:07:24.923

```
SELECT t.col1, max(t.col2)
  FROM Table1 t
 WHERE t.col3='X'
 GROUP BY t.col1
 ORDER BY t.col2 DESC; 
```

**编辑：**这个答案有几个修改，保持最准确的一个。

# oracle - 我们可以在 oracle 中命名一个默认约束吗

> ID：10300630
> 
> 赞同：6
> 
> 时间：2012-04-24T15:02:40.113
> 
> 标签：oracle, oracle10g

在 MS-SQL 中，我们在创建表的过程中可以有以下约束

```
create table test
(
  WarningEnabled bit NOT NULL CONSTRAINT DF_WarningEnabled   DEFAULT 1,
); 
```

正如我们所看到的，我已经为默认约束命名。是否可以在 oracle 中执行此操作

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T15:10:58.573

不，Oracle 没有将默认值作为约束来实现，因此无法命名约束。您也无法在与约束相关的数据字典视图中看到默认约束（即`ALL_CONSTRAINTS`、`DBA_CONSTRAINTS`、`USER_CONSTRAINTS`）。您必须`DATA_DEFAULT`从`DBA_TAB_COLUMNS`（或`ALL_TAB_COLUMNS`或`USER_TAB_COLUMNS`取决于您的权限和您感兴趣的列）查询该列。

# c# - 添加到 System.Web.Caching.Cache 的项目的默认行为是什么？

> ID：10300645
> 
> 赞同：3
> 
> 时间：2012-04-24T15:03:37.960
> 
> 标签：c#, asp.net

与添加到 ASP.NET 缓存的项目相关的默认过期参数是什么？

添加的项目是否在绝对时间段后过期，如果是，默认过期时间是多少？还是他们使用滑动窗口？

我似乎找不到对添加的项目的默认行为的任何引用，我需要知道，因为我支持一个代码库，其中对缓存的所有调用都是通过 Cache[key] = value 完成的，而不是指定显式依赖项/过期政策

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T15:12:57.010

根据[文档](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.item.aspx)，这相当于[Cache.Insert](http://msdn.microsoft.com/en-us/library/9bawy15w.aspx)这意味着

> 使用 Insert 方法的此重载添加到缓存中的对象在插入时没有文件或缓存依赖项、默认优先级、NoSlidingExpiration 的滑动到期值和 NoAbsoluteExpiration 的绝对到期值。

实际上，这意味着 ASP.NET 将根据内存压力对其进行管理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T15:11:10.447

默认情况下，提交到缓存的项目将保留在那里，直到内存不足并且 ASP.NET 决定它有更重要的东西要存储。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T15:14:03.953

来自[ASP.NET 缓存：技术和最佳实践](http://msdn.microsoft.com/en-us/library/aa478965.aspx)

> 将数据存储在 Cache 中的最简单方法是使用键对其进行分配，就像 HashTable 或 Dictionary 对象一样：

```
Cache["key"] = "value"; 
```

> **这会将项目存储在缓存中而没有任何依赖关系，因此除非缓存引擎将其删除以便为其他缓存数据腾出空间，否则它不会过期。**

# tsql - 如何在 SQL Server 中将 DateTime 字符串转换为 DateTime

> ID：10300647
> 
> 赞同：5
> 
> 时间：2012-04-24T15:03:44.370
> 
> 标签：tsql, sql-server-2005, datetime-format

我有一个 DateTime varchar，格式如下：2005-08-08T00:00:00+01:00。

1.  这种格式有名字吗？（不是 ISO8601。是 RFC3339 吗？）
2.  如何使用 Transact-Sql 将其转换为 DateTime？

**编辑** 这是一个摘要答案，由其他人输入拼凑而成：

1.  它*是*ISO8601，与 UTC 有时间偏移。如果是 UTC，它将以“Z”而不是“+01:00”结尾。 [维基百科](http://en.wikipedia.org/wiki/ISO_8601#Time_offsets_from_UTC)
2.  您可以将其转换为当地时间或 UTC，如下所示：

    > 声明@d VARCHAR(25) 设置@d = '2007-08-08T00:01:00+01:00' 设置@d = '2007-08-08T00:01:00-01:00' 设置@d = ' 2007-08-08T00:01:00+05:30'
    > 
    > 选择 @d 作为输入，CONVERT(DATETIME, LEFT(@d, 19), 126) 作为 LocalDate , DATEADD(MINUTE , -CAST((SUBSTRING(@d, 20, 1) + RIGHT(@d, 2)) 作为INT) , DATEADD(HOUR ,-CAST(SUBSTRING(@d, 20, 3) AS INT) , CONVERT(DATETIME, LEFT(@d, 19), 126))) as UtcDate WHERE @d LIKE ' **_ *-*** *-* _T__ : **:** [+-] **:** '

结果：

```
Input                     LocalDate               UtcDate
------------------------- ----------------------- -----------------------
2007-08-08T00:01:00+01:00 2007-08-08 00:01:00.000 2007-08-07 23:01:00.000

2007-08-08T00:01:00-01:00 2007-08-08 00:01:00.000 2007-08-08 01:01:00.000

2007-08-08T00:01:00+05:30 2007-08-08 00:01:00.000 2007-08-07 18:31:00.000 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T15:17:07.743

在 SQL Server **2008**中，您可以使用`datetimeoffset`数据类型。

```
SELECT [Result] = CONVERT(datetimeoffset, '2005-08-08T00:01:00+01:00', 127) 
```

输出：

```
Result
----------------------------------
2005-08-08 00:01:00.0000000 +01:00 
```

* * *

在 SQL Server **2005**及更早版本中，您可以计算 UTC 日期和偏移量：

```
SELECT [LocalDate], [OffsetMinutes], [UtcDate]
FROM
(
    SELECT [IsoDate] = '2007-08-08T00:01:00+01:00'
) A
OUTER APPLY
(
    SELECT [LocalDate] = CONVERT(datetime, LEFT([IsoDate], 19), 126)
    , [OffsetMinutes] =
        CASE SUBSTRING([IsoDate], 20, 1)
            WHEN '+' THEN +1
            WHEN '-' THEN -1
        END
        * DATEDIFF(minute, 0,
            CAST(SUBSTRING([IsoDate], 21, 5) + ':00' AS datetime))
    WHERE [IsoDate] LIKE '____-__-__T__:__:__[+-]__:__'
) B
OUTER APPLY
(
    SELECT [UtcDate] = DATEADD(minute, -[OffsetMinutes], [LocalDate])
) C 
```

输出：

```
LocalDate               OffsetMinutes UtcDate
----------------------- ------------- -----------------------
2007-08-08 00:01:00.000 60            2007-08-07 23:01:00.000 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T15:07:35.457

其 ISO8601 时区 Z

采用

```
SELECT CONVERT(datetime,'2005-08-08T00:00:00',126) 
```

见 [MSDN 说明](http://msdn.microsoft.com/en-us/library/ms187928%28v=sql.90%29.aspx)

编辑：我认为这与我最初认为 tSql 会接受的最后区域有关，但事实证明它不会。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T15:27:05.323

你可以用一种非常丑陋的方式来做，首先获取日期，然后获取时间并将偏移量添加为小时：

```
declare @d varchar(50)
set @d = '2005-08-08T00:00:00+01:00'

select Convert(datetime, left(@d, 10)) 
    + DateAdd(hour, Cast(substring(@d, 21, 2) as int), convert(datetime, substring(@d, 12, 8))) 
```

或合并版本：

```
SELECT DateAdd(hour, Cast(substring(@d, 21, 2) as int), CONVERT(datetime, LEFT(@d, 19) ,127))

Final Result:
2005-08-08 01:00:00.000 
```

如果您不需要偏移量，则：

```
declare @d varchar(50)
set @d = '2005-08-08T00:00:00+01:00'

select Convert(datetime, left(@d, 10)) 
    +  convert(datetime, substring(@d, 12, 8))

Result:
2005-08-08 00:00:00.000 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-16T17:07:47.480

根据所选答案， datetimeoffset 是一个很好的解决方案。但是，要小心带有内置函数的 sql server 端。（我试图将此作为评论粘贴到已接受的答案中，但它不会格式化代码示例）

```
select GETDATE(), CONVERT(datetimeoffset, GETDATE(), 127), CONVERT(varchar, convert(datetimeoffset, getdate(), 127)) 
-- Ugg! a SQL Server Bug!!!
-- 2013-08-16 12:54:54.090  2013-08-16 12:54:54.0900000 +00:00  2013-08-16 12:54:54.0900000 +0

select GETUTCDATE(),convert( datetimeoffset, GETUTCDATE(), 127), convert(varchar, convert( datetimeoffset, GETUTCDATE(), 127)) 
-- 2013-08-16 16:54:54.090  2013-08-16 16:54:54.0900000 +00:00  2013-08-16 16:54:54.0900000 +0 
```

# wpf - 文本框验证工具提示未出现

> ID：10300652
> 
> 赞同：2
> 
> 时间：2012-04-24T15:03:59.823
> 
> 标签：wpf, validation, xaml, textbox, tooltip

我有以下文本框样式：

```
<Style x:Key="RenamingTextBox" TargetType="{x:Type TextBox}">
        <Style.Setters>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type TextBox}">
                        <Grid>
                            <TextBlock x:Name="block" Visibility="Visible" Text="{TemplateBinding Text}" Margin="0"/>
                            <TextBox x:Name="box" Visibility="Collapsed" 
                                     Text="{Binding Text, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                     Margin="1.25"/>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <DataTrigger Binding="{Binding IsRenaming}" Value="true">
                                <DataTrigger.Setters>
                                    <Setter TargetName="block" Property="TextBox.Visibility" Value="Collapsed" />
                                    <Setter TargetName="box" Property="TextBox.Visibility" Value="Visible" />
                                    <Setter TargetName="box" Property="FocusManager.FocusedElement" Value="{Binding ElementName=box}" />
                                    <Setter TargetName="box" Property="behaviors:TextBoxBehavior.SelectAll" Value="True"/>
                                </DataTrigger.Setters>
                            </DataTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style.Setters>
    </Style> 
```

并且：

```
<Style TargetType="{x:Type TextBox}">
    <Setter Property="Margin" Value="5" />
    <Setter Property="VerticalAlignment" Value="Center" />
    <Setter Property="BorderBrush" Value="LightGray" />
    <Style.Triggers>
        <Trigger Property="Validation.HasError" Value="True">
            <Setter Property="ToolTip" 
                    Value="{Binding RelativeSource={RelativeSource Self},
                    Path=(Validation.Errors)[0].ErrorContent}"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

重命名文本框效果很好，它从 TextBox 到 TextBlock 来回更改没有问题。当我的名字有错误时，它甚至会得到漂亮的红色边框。问题是当我将鼠标悬停在有错误的文本框上时，工具提示没有出现。我在项目中的所有其他文本框都可以正常工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T15:46:52.050

renamingTextBox 不会收到第二种样式，因为它无法获得多种样式。

只需在重命名文本框样式中包含“默认”文本框样式，并使用以下`BasedOn`属性：

```
<Style TargetType="{x:Type TextBox}">
  ...
</Style>

<Style x:Key="RenamingTextBox" TargetType="{x:Type TextBox}" BasedOn="{StaticResource {x:Type TextBox}}">
  ...
</Style> 
```

# youtube - youtube 频道名称的允许大小是多少？

> ID：10300655
> 
> 赞同：3
> 
> 时间：2012-04-24T15:04:24.817
> 
> 标签：youtube, min, youtube-channels

YouTube 频道名称的允许大小是多少（最小长度 - 最大长度）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T02:33:34.343

Google 帐户名称大小限制如下：[https](https://developers.google.com/youtube/faq#login_limits) ://developers.google.com/youtube/faq#login_limits YouTube 频道名称限制为 20 个，不区分大小写的字母数字字符。

我相信最小长度是 6 个字符。我对在 Google 观看 Randall Munroe 演示文稿有一个模糊的记忆，他抱怨他无法获得 xkcd gmail 用户名，因为它太短了。

# capture - 在 tcpdump 中捕获传入流量

> ID：10300656
> 
> 赞同：35
> 
> 时间：2012-04-24T15:04:25.543
> 
> 标签：capture, packet, traffic, packet-capture, tcpdump

在 tcpdump 中，如何捕获所有发往我机器的传入 IP 流量？我不关心我当地的交通。

我应该说：

```
tcpdump ip dst $MyIpAddress and not src net $myIpAddress/$myNetworkBytes 
```

...还是我错过了什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-24T15:28:30.503

在 Bash shell 中试试这个：

```
tcpdump -i eth0 tcp and dst host $MyIpAddress and not src net $MyNetworkAddress/$myNetworkBytes 
```

或这个等效的公式：

```
tcpdump -i eth0 ip proto \\tcp and dst host $MyIpAddress and not src net $MyNetworkAddress/$myNetworkBytes 
```

在我的系统上，这会解析为：

```
tcpdump -i eth0 tcp and dst host 10.0.0.35 and not src net 10.0.0.0/24 
```

如果您想查看到目标主机的所有流量，而不仅仅是 TCP 协议流量，您可以这样做：

```
tcpdump -i eth0 dst host $MyIpAddress and not src net $MyNetworkAddress/$myNetworkBytes 
```

一些注意事项：

1.  我`$myIpAddress/$myNetworkBytes`改为`$MyNetworkAddress/$myNetworkBytes`. 这是因为您的规则的明显意图是排除本地网络的流量，而指定网络地址的[正确方法](http://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing)是指定网络的最低​​ IP 地址（称为网络地址）/网络掩码。如果您为网络掩码为 $myNetworkBytes 的网络指定范围内最低地址以外的任何地址，那么您将收到错误消息：

    ```
    tcpdump: non-network bits set in "10.0.0.3/24" 
    ```

2.  在第一个示例中，'tcp' 是 libpcap 表达式语言 (man pcap-filter) 中的*关键字*，而在第二个示例中，'tcp' 用作的*值*。`ip proto`为了表明第二个实例中的“tcp”是一个值而不是另一个“tcp”关键字，我需要用双反斜杠转义“tcp”。它必须是双反斜杠，以便 Bash 解释器将单个反斜杠传递给 libpcap 解释器（Bash 吃第一个反斜杠，libpcap 获得第二个反斜杠。）为了减少双转义混淆，最好进入双引号命令的整个表达式部分的习惯：

    ```
    tcpdump -i eth0 "ip proto \tcp and dst host $MyIpAddress and not src net $MyNetworkAddress/$myNetworkBytes" 
    ```

3.  为避免警告和意外，最好使用接口说明符`-i eth0`或您希望的任何接口。并非所有接口都必须分配一个 IP 地址，并且在没有具体说明的情况下，您可能会看到您不希望看到的流量。在运行网络管理器的系统上尤其如此，它似乎对添加哪些接口以及何时添加有自己的想法。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-11-13T14:13:02.680

对于具有多个 ip 的盒子，上述方法都不能很好地工作。

这在绑定了许多 ip 的 DNS 服务器上对我来说非常有效：

`tcpdump -l -n -i pub dst port 53 and inbound`

可能不适用于所有版本`tcpdump`。

```
# tcpdump -V
tcpdump version 4.1-PRE-CVS_2012_03_26
libpcap version 1.4.0 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-02-15T00:52:44.867

-Q 方向 --direction=direction 选择应捕获数据包的发送/接收方向。可能的值为`in',`out' 和 `inout'。并非在所有平台上都可用。

# java - 如何使这个对象更易于维护？

> ID：10300658
> 
> 赞同：3
> 
> 时间：2012-04-24T15:04:27.187
> 
> 标签：java, oop, maintainability

例如，我有这样的事情：

```
User
-FirstName
-SecondName
-Gender 
```

和`VIPUser`，它是 的子类`User`

```
VIPUser extends User
-GiftNum
-Birthday 
```

但是突然应用程序需要更改策略，所有`User`必须有`Birthday`....而且它不是一个可选字段，不允许`null`再为用户设置，它成为新寄存器的必须填写变量`User`，但我可以保留`null`给现有用户...

所以，我需要改变所有的`User`创建方法，并通过`Birthday`，它涉及很多代码。我怎样才能使它更易于维护？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T15:39:39.563

> 我怎样才能使它更易于维护？

我认为您真正要求的是一些设计技术，可以避免您不得不重构代码。

我认为答案是......不幸的是......没有这样的技术可以被视为良好的 Java 实践。最好的策略是在设计 API 时尝试超前思考，并准备好在需求发生变化时积极重构。

* * *

对其他问题的评论：

*   设计接口是一个很好的建议，并且通常可以简化某些类型的重构。但是，我认为这对解决像您这样的问题没有帮助。

*   创建包装器和支持新状态（生日）的东西可能是个坏主意。包装类可能会以各种方式使您的代码库复杂化。如果你多次使用这种方法，你会发现你的代码库变得越来越难以理解。你正在有效地建立一个没有完全解决的问题的“技术债务”。

*   是的。一个好的 IDE 对进行大规模重构非常有帮助。事实上，你的特殊问题让我觉得很容易重构......使用一个好的 IDE。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T15:09:59.290

设计到接口，更加灵活，一个类可以实现多个接口。

与其将 User 类指定为参数类型，不如指定适当的接口……因为底层实现并不重要，因此维护起来更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T15:18:01.913

创建一个创建`User`实例的包装器，他必须接收设置`Date`参数`Birthday`、验证和创建它的所有规则的参数。此外，正如@NimChimpsky 所说，您应该为此包装器定义一个接口（接口主要用于业务逻辑类，而不是实体）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T15:24:37.093

像这样更改 API 会在您的代码中产生涟漪，这是无法解决的。至少不是强类型语言。

正如其他人所建议的那样，您应该在接口及其实现之间进行严格而清晰的分离。

然后，您可以对 API 及其各自的 impl 模块进行版本控制，以便在更新程序时不会破坏 API 客户端。数据库模式兼容性是另一个有趣的问题。:)

一般来说，使用工厂（模式）来提供用户类的实例并将其实现隐藏在接口后面，是创建对象的良好封装。而且，正如其他人所建议的那样，使用一些具有重构功能的优秀 IDE 应该会变得轻而易举。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T15:21:11.247

这应该很容易。使用实际的 Java-IDE 右键单击​​您的构造函数并执行重构。问题不在于更改代码，而在于获取“生日”的值。

重构很容易（我更喜欢 IntelliJ，但我认为 Eclipse 和 Netbeans 也会做得很好）。

# python - Cython 和 distutils

> ID：10300660
> 
> 赞同：4
> 
> 时间：2012-04-24T15:04:34.070
> 
> 标签：python, cython, distutils

我想使用 Cython 将多个 .pyx 文件转换为可执行包（.DLL）。

如何通过 distutils 从多个 .pyx 创建单个 Windows DLL？

使用的样本：

sub1.pyx：

```
cimport sub1

class A():
    def test(self, val):
        print "A", val 
```

sub1.pxd：

```
cdef class A:
    cpdef test(self,val) 
```

sub2.pyx：

```
cimport sub2

class B():
    def test(self):
        return 5 
```

sub2.pxd：

```
cdef class B:
    cpdef test(self) 
```

**初始化**.py：

```
cimport sub1
cimport sub2

import sub1
import sub2 
```

设置.py：

```
from distutils.core import setup
from distutils.extension import Extension
from Cython.Distutils import build_ext

ext_modules = [Extension("sub", ["__init__.pyx", "sub1.pyx", "sub2.pyx"])]

setup(
  name = 'Hello world app',
  cmdclass = {'build_ext': build_ext},
  ext_modules = ext_modules
) 
```

错误：

```
sub1.obj : error LNK2005: ___pyx_module_is_main_sub already defined in __init__.obj
sub1.obj : error LNK2005: _initsub already defined in __init__.obj
sub2.obj : error LNK2005: ___pyx_module_is_main_sub already defined in __init__.obj
sub2.obj : error LNK2005: _initsub already defined in __init__.obj
Creating library build\temp.win32-2.7\Release\sub.lib and object build\temp.win32-2.7\Release\sub.exp
C:\temp\ctest\sub\sub.pyd : fatal error LNK1169: one or more multiply defined symbols found 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T10:00:58.123

我不知道这一点：

[http://groups.google.com/group/cython-users/browse_thread/thread/cbacb7e848aeec31](http://groups.google.com/group/cython-users/browse_thread/thread/cbacb7e848aeec31)

我报告了 cython 的主要编码员之一（Lisandro Dalcin）的答案（抱歉交叉发布）：

```
ext_modules=[ 
    Extension("myModule", 
              sources=['src/MyFile1.pyx', 
                       'src/MyFile2.pyx'], 
```

您不能从两个不同的来源构建一个“myModule”。也许您可以添加一个“src/myModule.pyx”文件，其中包含以下两行：

```
# file: myModule.pyx 
include "MyFile1.pyx" 
include "MyFile2.pyx" 
```

然后使用

```
Extension("myModule", sources=['src/myModule.pyx'], ...) 
```

# titanium - 从 Titanium Studio 运行 Android 模拟器时出错

> ID：10300661
> 
> 赞同：1
> 
> 时间：2012-04-24T15:04:35.630
> 
> 标签：titanium, appcelerator

基本上试图让[默认示例项目](https://github.com/appcelerator/KitchenSink)（[链接到此处](https://wiki.appcelerator.org/display/guides/Example+Applications)）在 Android 模拟器中运行。

（我使用的是 Windows XP-SP3，有关更多配置信息，请参阅问题页脚中的“诊断日志”输出，如果您对配置有任何疑问，请告诉我。）

这是我到目前为止所做的：

*   安装了当前版本的 Titanium Mobile SDK 版本：2.0.1
*   安装了 Java SDK“jdk-6u31-windows-i586.exe”
*   安装了 Android SDK Manager r18，然后是以下软件包：Android SDK Tools、Android SDK Platform Tools、Android 2.2 API-8 SDK Platform、Android 2.2 API-8 Google APIs
*   在 GitHub 上下载 Kitchen Sink 的 zip，解压缩文件，将文件名更改为 KitchenSink，将文件复制到“我的文档”下的 Titanium 项目目录，然后通过文件选项卡对该目录执行导入到“项目资源管理器” " Titanium Studio 中的选项卡。
*   然后我在 Titanium Studio 的“Project Explorer”选项卡中右键单击 KitchenSink 项目，选择“Run As...”，然后选择“Android Emulator”
*   奇怪的是，这样做会返回不同的结果（意味着我运行它、重新启动等），其中包括：
    *   **ERROR-MSG：**出现问题“启动 Titanium Android 模拟器 - KitchenSink”遇到问题。会话初始化失败。连接被拒绝：连接。
    *   还有一次，我收到了这种形式的消息“[INFO] [2012-04-24 17:03:33,140] 正在从 C:\Documents and Settings 在 0.0.0.0:1133 为 com.test.test 提供文件\user\My Documents\Titanium Studio Workspace\test"，这似乎是因为应用程序已部署到静态 IP 下的服务器，但从未出现过模拟器；对我来说，这似乎是一个错误的 IP 地址，尽管可能是错误的。

**我需要做什么才能让 KitchenSink 在 Android 模拟器中运行？有没有办法只运行 Android 模拟器来确认它自己工作？**

* * *

这是帮助选项卡下“诊断日志”的完整输出：

*   **主机操作系统：** Windows XP
*   **操作系统架构：** x86
*   **JRE 版本：** 1.6.0_24
*   **JRE 供应商：** Sun Microsystems Inc.
*   **JRE 主页：** C:\Program Files\Appcelerator\Titanium Studio\jre
*   **安装目录：** file:/C:/Program Files/Appcelerator/Titanium Studio/
*   **版本：** 2.0.1.201204132053
*   **虚拟机参数：** -Xms40m -Xmx1024m -Declipse.p2.unsignedPolicy=allow -Declipse.log.size.max=10000 -Declipse.log.backup.max=5 -Djava.awt.headless=true -XX:MaxPermSize=256m - Djava.class.path=C:\Program Files\Appcelerator\Titanium Studio\plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
*   **工作区目录：** file:/C:/Documents and Settings/user/My Documents/Titanium Studio Workspace/
*   **语言：** en_US
*   **钛桌面 SDK 版本：** 1.1.0
*   **Titanium 桌面 SDK 位置：** C:\Documents and Settings\user\Application Data\Titanium\sdk\win32\1.1.0
*   **钛移动 SDK 版本：** 2.0.1
*   **移动 SDK 模块 API 版本：** 2
*   **移动 SDK 时间戳：** 04/12/12 16:33
*   **移动 SDK 内部版本号：** 999c68a
*   **Titanium Mobile SDK 位置：** C:\Documents and Settings\user\Application Data\Titanium\mobilesdk\win32\2.0.1.GA2

* * *

根据下面的建议，我创建了一个针对 Android 的新移动项目，然后使用“Run As...”Android 模拟器选项运行该项目。系统返回此消息：“[INFO] [2012-04-24 17:03:33,140] 正在从 C:\Documents and Settings\user\My Documents\ 在 0.0.0.0:1133 为 com.test.test 提供文件Titanium Studio 工作区\测试"

**build.log 输出：** C:\Documents and Settings\user\My Documents\Titanium Studio Workspace\test\build.log

```
Logfile initialized
[INFO] logfile = C:\Documents and Settings\user\My Documents\Titanium Studio Workspace\test\build.log
[DEBUG] C:\Documents and Settings\user\Application Data\Titanium\mobilesdk\win32\2.0.1.GA2\android\builder.py simulator test C:\Program Files\Android\android-sdk C:\Documents and Settings\user\My Documents\Titanium Studio Workspace\test com.test.test 1 HVGA
[INFO] logfile = C:\Documents and Settings\user\My Documents\Titanium Studio Workspace\test\build.log
[DEBUG] C:\Documents and Settings\user\Application Data\Titanium\mobilesdk\win32\2.0.1.GA2\android\builder.py emulator test C:\Program Files\Android\android-sdk C:\Documents and Settings\user\My Documents\Titanium Studio Workspace\test com.test.test 1 HVGA
[ERROR] Error locating JDK: set $JAVA_HOME or put javac and jarsigner on your $PATH
[ERROR] Error locating JDK: set $JAVA_HOME or put javac and jarsigner on your $PATH 
```

**Windows 命令（java、javac、jarsigner）都返回有效响应，这似乎与 build.log 文件冲突，表明 JDK 不在文件路径中。路径当前设置为：

```
%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;"C:\Program Files\Java\jdk1.6.0_31\bin" 
```

* * *

**更新：**

```
Logfile initialized
[INFO] logfile = C:\Documents and Settings\user\My Documents\Titanium Studio Workspace\test3\build.log
[DEBUG] C:\Documents and Settings\user\Application Data\Titanium\mobilesdk\win32\2.0.1.GA2\android\builder.py simulator test3 C:\Program Files\Android\android-sdk C:\Documents and Settings\user\My Documents\Titanium Studio Workspace\test3 com.tester.test3 1 HVGA
[INFO] Building test3 for Android ... one moment
[ERROR] JDK version 'javac' is not recognized as an internal or external command,

operable program or batch file. detected, but 1.6 is required 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:23:27.383

第一步要查看你的配置，创建一个新项目并运行它，它应该有一个默认的 app.js 页面，上面有 2 个选项卡，如果这不起作用它的配置问题

如果失败，请尝试按照此处的步骤设置钛： [http ://docs.appcelerator.com/titanium/2.0/index.html#!/guide/Setting_up_Titanium_Studio-section-30086257_SettingupTitaniumStudio-SoftwareLocations](http://docs.appcelerator.com/titanium/2.0/index.html#!/guide/Setting_up_Titanium_Studio-section-30086257_SettingupTitaniumStudio-SoftwareLocations)

或者在这里设置环境变量： [http ://docs.appcelerator.com/titanium/2.0/index.html#!/guide/Software_Locations_and_Environment_Variables](http://docs.appcelerator.com/titanium/2.0/index.html#!/guide/Software_Locations_and_Environment_Variables)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T09:49:29.697

您的系统环境变量设置不正确。尝试像这样设置它们：

```
android_sdk : C:\Android\android-sdk
JAVA_HOME : C:\Program Files\Java\jdk1.6.0_31
PATH : %JAVA_HOME%\bin;%android_sdk%;C:\Android\android-sdk\platform-tools;C:\Android\android-sdk\tools 
```

在控制面板 -> 系统 -> （在 Windows 7 上：高级系统设置 ->）高级选项卡 -> 环境变量 使用正确的值创建 2 个名为“android_sdk”和“JAVA_HOME”的新变量。之后更改您的系统 PATH 变量并添加我在此处粘贴的行。（也尽量不要在你的 android_sdk 路径中使用空格，以防万一）

# jsf - Richfaces inputNumberSpinner 值未设置

> ID：10300667
> 
> 赞同：0
> 
> 时间：2012-04-24T15:04:46.907
> 
> 标签：jsf, richfaces, spinner

我有一个微调器，用户必须在其中选择一年。加载页面时，微调器的默认值为`minValue`屏幕上的 ，但在 backing-bean 中该值为 null。

我需要在第一次加载页面时使用微调器的默认值 (minValue) 呈现一些信息。

怎么做？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T19:47:02.327

类似的东西

由于您知道页面首次加载时 spinnerValue 为 null ，因此您可以 `h:panelGroup`（例如）基于该条件进行渲染

```
<h:panelGroup id="renderMe" rendered="#{myBean.spinnerValue eq null}">
    some text...
</h:pamelGroup> 
```

?

# java - 在 Java 中生成和编码 PKCS7 消息

> ID：10300673
> 
> 赞同：0
> 
> 时间：2012-04-24T15:05:10.667
> 
> 标签：java, digital-signature, pkcs#7

我以前在这里看到过很多类似的问题，但我还没有找到合适的答案。

我得到了由 C# [SignedCms](http://msdn.microsoft.com/en-us/library/system.security.cryptography.pkcs.signedcms.aspx)生成和编码的签名。

我的目标是在 Java 中生成相同的签名。我设法创建了一个类似的签名，它具有相同的长度和大部分数据。但是从 120 到 133 位的位置并不相同，并且持续大约 250 位。

根据这个[PKCS#7 签名消息的解剖](http://www.jensign.com/JavaScience/sigview/index.html)。我有错误的签名和内容块。我已经尝试过 bouncycastle，但我没有设法生成正确的签名。我想使用`sun.*`类来生成和编码 PKCS#7 消息。

```
 X509Certificate x509 = siginingCert;
        PrivateKey priv = privateKeyFromPKCS12KeyStore;
        byte[] data = sha1HashOfDocument

        String digestAlgorithm = "MD5";
        String signingAlgorithm = "SHA1withRSA";

        AlgorithmId[] digestAlgorithmIds = new AlgorithmId[]{AlgorithmId.get(digestAlgorithm)};

        Signature sigSigner = Signature.getInstance(signingAlgorithm);
        sigSigner.initSign(priv);
        sigSigner.update(data);
        byte[] signedAttributes = sigSigner.sign();

        ContentInfo contentInfo = new ContentInfo(
                sun.security.pkcs.ContentInfo.DATA_OID,
                new DerValue(DerValue.tag_OctetString, data));

        X509Certificate[] certificates = {x509};

        BigInteger serial = x509.getSerialNumber();
        String issuerName = x509.getIssuerDN().getName();
        AlgorithmId dAlgId =  AlgorithmId.getAlgorithmId(digestAlgorithm);

        SignerInfo si = new SignerInfo(
                new X500Name(issuerName), serial, dAlgId, null,
                new AlgorithmId(AlgorithmId.RSAEncryption_oid),
                signedAttributes, null);

        SignerInfo[] signerInfos = {si};
        PKCS7 p7 = new PKCS7(digestAlgorithmIds, contentInfo, certificates, signerInfos);
        ByteArrayOutputStream bytes = new ByteArrayOutputStream();
        p7.encodeSignedData(bytes); 
```

我被困在这个问题上，我不知道我错过了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T12:28:41.037

```
byte[] signedData = signature.sign();

    SignerInfo si = new SignerInfo(
            new X500Name(issuerName), serial, dAlgId, null,
            new AlgorithmId(AlgorithmId.RSAEncryption_oid),
            signedAttributes,signedData  ); 
```

# tridion - “页面代理”组件的命名约定？

> ID：10300679
> 
> 赞同：3
> 
> 时间：2012-04-24T15:05:28.717
> 
> 标签：tridion

Tridion 命名约定很有趣，因为作者看到以下名称：

*   架构
*   模板
*   类别和关键字

我知道我们可以使用组件字段来存储与页面相关的内容`<meta name="keywords">`、、`description`和`<meta name="robots">`。这允许这些字段是可翻译的（相对于页面元数据）以及由不同的创作组管理。

我可能会命名这种类型的组件`SEO Info`或类似名称。

但我们也可以存储非 SEO 信息，例如可见页面标题 ( `<h1>This Heading</h1>`)、导航信息和其他与页面相关的设置/内容（例如特定于页面的免责声明）。

**对于这种“页面代理”组件，您是否有对作者友好的命名约定或方法？**

*   会`Page Meta`不会糊涂？
*   是不是`Page`太简单了？
*   `SEO`如果它包含非 SEO 信息，是不是用词不当？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T15:51:28.227

我认为命名约定总是很棘手，因为它们具有个人/主观的性质。

所以，对于你的问题，我认为没有一种正确的命名方式，但也许你和客户可以同意作为给定情况的最佳描述性名称。

无论如何，我有点赞成调用这些 Components `Page Info`，因为它们包含某种关于页面的元数据/信息。同时，`Page Meta`我认为这有点令人困惑，因为我们指的是一个组件，因此可能会与实际的页面元数据（在页面上定义）混淆。

我觉得名字`Page Proxy`也不错……或者`Page Data`……确实很主观

**编辑：** `Page SEO`如果组件不包含任何 SEO 信息，则可能是用词不当。但是，如果有一些 SEO 数据混合了一些`metadata`（例如标题、关键字等），我会说将它们全部放在同一个 SEO 组件中（这样您就不必创建太多不同的微型组件，这将使将页面放在一起变得更加困难）。

# python - 如何在模板中获取 ModelChoiceField 实例

> ID：10300685
> 
> 赞同：14
> 
> 时间：2012-04-24T15:05:42.007
> 
> 标签：python, django, django-forms

我有一个 ModelForm，其中包含一个使用 RadioSelect 小部件的 ModelChoiceField。

```
class MyAForm(forms.ModelForm):
    one_property = models.ModelChoiceField(
        widget=forms.RadioSelect,
        queryset=MyBModel.objects.filter(visible=True),
        empty_label=None)
    class Meta:
        model = MyAModel 
```

MyBModel 上有一些我想在单选按钮旁边显示的属性。我会覆盖`label_from_instance`ModelChoiceField 的子类，但这不允许我做我想做的事，因为我希望单选按钮出现在每个选择项都有一行的表中。

所以在我的模板中的某个地方我想要类似...

```
{% for field in form.visible_fields %}
    {% if field.name == "one_property" %}
    <table>
        {% for choice in field.choices %}
            <tr>
                <td><input value="{{choice.id}}" type="radio" name="one_property" />{{choice.description}}</td>
                <td><img src="{{choice.img_url}}" /></td>
            </tr>
        {% endfor %}
    </table>
    {% endif %}
{% endfor %} 
```

不幸的是 field.choices 返回对象的 id 和标签的元组，而不是查询集中的实例。

有没有一种简单的方法来获取要在模板中使用的 ModelChoiceField 的选择实例？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-24T15:36:26.983

在深入研究 ModelChoiceField 的 django 源代码后，我发现它有一个属性“queryset”。

我能够使用类似...

```
{% for field in form.visible_fields %}
    {% if field.name == "one_property" %}
    <table>
        {% for choice in field.queryset %}
            <tr>
                <td><input value="{{choice.id}}" type="radio" name="one_property" />{{choice.description}}</td>
                <td><img src="{{choice.img_url}}" /></td>
            </tr>
        {% endfor %}
    </table>
    {% endif %}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-13T15:03:48.720

我想做一些与 OP 的问题（表和所有）几乎相同的事情，同样对 Django 缺乏合作感到沮丧，并且同样最终钻研了源代码以提出我自己的实现。我想出的与接受的答案有点不同，我更喜欢它，因为我在我的模板中使用了一个简单`{{ form.as_table }}`的，并且不想在我的模板中`visible_fields`不必要地循环或硬编码一个单选按钮只是看起来类似于 Django 当前的实现（可能会改变）。这是我所做的：

# RadioInput 和 RadioFieldRenderer

Django 的`RadioSelect`小部件用于生成`RadioFieldRenderer`的[生成器](https://wiki.python.org/moin/Generators)，`RadioInputs`它执行渲染单选按钮的实际工作。`RadioSelect`似乎有一个未记录的功能，您可以将其传递给与此默认值不同的渲染器，因此您可以对这两者进行子类化以获得 OP 想要的。

```
from django import forms
from django.utils.safestring import mark_safe

class CustomTableRadioInput(forms.widgets.RadioInput):

    # We can override the render method to display our table rows
    def render(self, *args, **kwargs):
        # default_html will hold the normally rendered radio button
        # which we can then use somewhere in our table
        default_html = super(CustomTableRadioInput, self).render(*args, **kwargs)
        # Do whatever you want to the input, then return it, remembering to use
        # either django.utils.safestring.mark_safe or django.utils.html.format_html
        # ...
        return mark_safe(new_html)

class CustomTableFieldRenderer(forms.widget.RadioFieldRenderer):
    # Here we just need to override the two methods that yield RadioInputs
    # and make them yield our custom subclass instead
    def __iter__(self):
        for i, choice in enumerate(self.choices):
            yield CustomTableRadioInput(self.name, self.value,
                                          self.attrs.copy(), choice, i)

    def __getitem__(self, idx):
        choice = self.choices[idx] # Let the IndexError propogate
        return CustomTableRadioInput(self.name, self.value,
                                       self.attrs.copy(), choice, idx) 
```

完成后，我们只需要告诉`RadioSelect`小部件在表单代码中的某处调用它时使用我们的自定义渲染器：

```
...
radio = forms.ChoiceField(widget=forms.RadioSelect(renderer=CustomTableFieldRenderer),
                          choices=...)
... 
```

就是这样！

请注意，要在模板中使用它，您可能希望循环该字段而不是直接调用它，即：

```
<table>
  <tbody>
  {% for tr in form.radio %}
    <tr>{{ tr }}</tr>
  {% endfor %}
  </tbody>
</table> 
```

而不是这个：

```
<table>
  <tbody>{{ form.radio }}</tbody>
</table> 
```

如果您执行后者，它将尝试将您的表格元素包装在`<ul><li>...</li></ul>`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-30T14:14:03.113

通常你不需要实际的对象，而是它的再现。

考虑这段代码：

```
class LabelledHiddenWidget(forms.HiddenInput):

    def __init__(self, get_object, *args, **kwargs):
        super(LabelledHiddenWidget, self).__init__(*args, **kwargs)
        self.get_object = get_object

    def render(self, name, value, attrs=None):
        s = super(LabelledHiddenWidget, self).render(name, value, attrs)
        if value:
            s += SafeUnicode("<span>%s</span>" % self.get_object(value))
        return s 
```

然后你可以像这样使用它：

```
class SomeForm(forms.Form):
    object = forms.ModelChoiceField(
         SomeModel.objects.all(), 
         widget=LabelledHiddenWidget(get_object=lambda id: get_object_or_404(SomeModel, id=id))) 
```

然后在模板代码中，`{{ form.object }}`将输出一个带有对象 id 的隐藏字段，并与一些标签连接。当然，您的 SomeModel 应该实现`__unicode__`或返回一个漂亮的、人类可读的标签的其他方法。

# php - How can I add a time stamp to a file name uploaded with $_File before the file extension

> ID：10300690
> 
> 赞同：16
> 
> 时间：2012-04-24T15:05:59.677
> 
> 标签：php

I have the following code

```
$image_path = $_FILES["p_image"]["name"].time(); 
```

it names the file `image02.jpg1335279888`

but i want it to be named `image02_1335279888.jpg`

How can I achieve that?

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-24T15:10:12.393

```
$path_parts = pathinfo($_FILES["p_image"]["name"]);
$image_path = $path_parts['filename'].'_'.time().'.'.$path_parts['extension'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-20T07:37:02.187

你可以检查这个：

```
$file = $_FILES["p_image"]["name"];
$array = explode('.', $file);
$fileName=$array[0];
$fileExt=$array[1];
$newfile=$fileName."_".time().".".$fileExt; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-01T13:23:54.733

```
$image_path = $_FILES["p_image"]["name"];
$extension = pathinfo($image_path)['extension'];
$file = "image02_".time().".".$extension."";
echo $file; 
```

输出：

> *image02_1641041826.jpg*

# javascript - Scale divs to equal height, max-height needed

> ID：10300691
> 
> 赞同：0
> 
> 时间：2012-04-24T15:06:01.050
> 
> 标签：javascript, jquery, html, responsive-design

I'm in the process of building a responsive calendar for a site I'm working on. The calendar scales down fine using the following javascript to keep the divs set to the same height.

```
 $(function(){
    var equalHeight = function() {
        $(".calBody").each(function(){
            var maxHeight = 0;
            $(this).children(".calBlock")
                .each(function() { maxHeight = Math.max(maxHeight, $(this).height()); })
                .css('min-height',maxHeight);
        });
    }

    equalHeight();

    $(window).resize(function(){equalHeight()});
}); 
```

This keeps the columns nice and even from the start and as it gets scaled down, however when you start scaling back up it keeps the max height of the divs from when they were at their tallest.

Any ideas on getting them to scale to be only as tall as whats needed for the tallest div scaling both up and down?

Here is a jsfiddle of it in action: [jsfiddle.net/7n4VH/1](http://jsfiddle.net/7n4VH/1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:48:39.210

尝试获取 .calBlock 的孩子的 .height() 。就像是：

```
.each(function() { maxHeight = Math.max(maxHeight, $(this).children('.events:first').height()); })
.css('min-height',maxHeight+30); 
```

# wpf - 防止初始绑定时出现动画

> ID：10300694
> 
> 赞同：1
> 
> 时间：2012-04-24T15:06:14.410
> 
> 标签：wpf, animation, binding, expand, collapse

我有一个看起来像抽屉的第二个堆栈面板，如下所示

```
 ______               ______ _____
|      |             |      |     |
| main |     ->      | main | 2nd |
|______|             |______|_____|
                              --> 
```

我有抽屉的展开和折叠动画。它们绑定到我在代码中更新的布尔值。

一切正常，除了当我最初启动我的应用程序时，折叠动画被触发，因为初始值为 false。有没有办法绑定某些东西而不触发绑定？

这是我的 xaml 中的样子，我在其中使用绑定到我的代码中的布尔值的 DataTrigger：

```
 <StackPanel x:Name="expandMe" Width="0" Orientation="Vertical" >
            <StackPanel.Style>
                <Style>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding ExpandBoolean}" Value="False">
                            ....... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:21:03.990

我没有看到您的风格中的 Setter 以确保 StackPanel 加载已折叠。我认为那会做到的。

```
<StackPanel x:Name="expandMe" Width="0" Orientation="Vertical" >
        <StackPanel.Style>
            <Style>
                <Setter Property="StackPanel.Visibility" Value "Collapsed"/>
                <Style.Triggers>
                    <DataTrigger Binding="{Binding ExpandBoolean}" Value="False"> 
```

# android - Android Bluetooth Chat App

> ID：10300695
> 
> 赞同：0
> 
> 时间：2012-04-24T15:06:19.307
> 
> 标签：android, bluetooth, chat

im attempting to make a basic bluetooth chat app in eclipse, i have finished the code and none of it is underlined in red to suggest errors, but when i attempt to run the code the app stops unexpectedly, when i debug the code it says the source is not found. Ive added bluetooth permissions to the manifest so i dont think its that. Any help would be greatly appreciated. here is the code:

```
package com.blue;

import android.app.Activity;
import android.os.Bundle;
import java.io.IOException;
import java.io.OutputStream;
import java.util.ArrayList;
import java.util.UUID;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothSocket;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.util.Log;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class BlueActivity extends Activity {
/** Called when the activity is first created. */
public Button btn_Search, btn_Send, btn_Next;
UUID MY_UUID = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");
public BluetoothAdapter my_BT_Adapter=BluetoothAdapter.getDefaultAdapter();
public ArrayList<String>BT_Names=new ArrayList<String>();
public ArrayList<String>BT_Addresses=new ArrayList<String>();
public ArrayAdapter<String>aa;
public ArrayAdapter<String>bb;
public TextView txt_Display;
public EditText txt_Message;
public ListView lv_Devices;
public static String address;
public static String right_address;
public BluetoothDevice BT_Device;
public BluetoothSocket BT_Socket;
protected Context context;
Intent intent1 = new Intent();
public int selectedPosition;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    btn_Search = (Button)findViewById(R.id.btn_search);
    txt_Display = (TextView)findViewById(R.id.txt_display);
    lv_Devices = (ListView)findViewById(R.id.lw_Bluetooth_names);
    btn_Send = (Button)findViewById(R.id.btn_send);
    btn_Next = (Button)findViewById(R.id.btn_next);
    txt_Message = (EditText)findViewById(R.id.txt_message);
    aa = new ArrayAdapter<String>(this,android.R.layout.simple_gallery_item, BT_Names);
    bb = new ArrayAdapter<String>(this,android.R.layout.simple_gallery_item, BT_Addresses);
    btn_Send.setFocusable(true);
    btn_Next.setEnabled(false);
    btn_Search.setOnClickListener(SearchClickHandler);
    btn_Next.setOnClickListener(NextClickHandler);
    btn_Send.setOnClickListener(SendClickHandler);

    BT_Enable();

    BroadcastReceiver discoveryResult = new BroadcastReceiver(){

        @Override
        public void onReceive(Context context, Intent intent) {
            String action = intent.getAction();
            if(BluetoothDevice.ACTION_FOUND.equals(action)){
            String remoteDeviceName=intent.getStringExtra(BluetoothDevice.EXTRA_NAME);
            BluetoothDevice remoteDevice;
            remoteDevice=intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
            BT_Names.add(0, remoteDeviceName);
            BT_Addresses.add(0, remoteDevice.getAddress());
            aa.notifyDataSetChanged();
            bb.notifyDataSetChanged();
            }
            else if(BluetoothAdapter.ACTION_DISCOVERY_FINISHED.equals(action)){
            txt_Display.setText("");
            lv_Devices.setAdapter(aa);
            if(BT_Names.size()>0){
                btn_Search.setClickable(true);
                address=BT_Addresses.get(0);
                txt_Display.setText(BT_Names.get(0));
                btn_Next.setEnabled(true);
                lv_Devices.setItemChecked(0, true);

            }
            else
                btn_Search.setClickable(true);

            }

        }

        };
        IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
        this.registerReceiver(discoveryResult, filter);

        filter=new IntentFilter(BluetoothAdapter.ACTION_DISCOVERY_FINISHED);
        this.registerReceiver(discoveryResult, filter);
        BT_Device=intent1.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
    }
    public void BT_Enable(){
        if(!my_BT_Adapter.isEnabled()){
        Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
        startActivityForResult(enableBtIntent, CONTEXT_RESTRICTED);
        }
    }

    View.OnClickListener SearchClickHandler=new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            btn_Search.setClickable(true);
                BT_Names.clear();
                aa.notifyDataSetChanged();
                BT_Addresses.clear();
                bb.notifyDataSetChanged();
                selectedPosition=0;
                txt_Display.setText("Searching...");
                btn_Next.setEnabled(true);

                if(!my_BT_Adapter.isEnabled()){
                    try{

                        my_BT_Adapter.enable();
                        Toast.makeText(BlueActivity.this, "BT Adapter Enabled", Toast.LENGTH_SHORT).show();
                }
                    catch(Exception e)
                    {
                        Toast.makeText(BlueActivity.this, "BT Adapter Unavailable", Toast.LENGTH_SHORT).show();
                    }
                }

                if(!my_BT_Adapter.isDiscovering())
                my_BT_Adapter.startDiscovery();

        }
    };
    View.OnClickListener NextClickHandler=new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(BT_Names.size()>0){
            if(selectedPosition<BT_Names.size()){
                lv_Devices.setItemChecked(selectedPosition, true);
            right_address=BT_Addresses.get(selectedPosition);
            selectedPosition++;
            }
            else
            {
            selectedPosition=0;
            right_address=BT_Addresses.get(selectedPosition);
            lv_Devices.setItemChecked(selectedPosition, true);
            }
            }
            txt_Display.setText(BT_Names.get(lv_Devices.getCheckedItemPosition()));

        }
    };
    View.OnClickListener SendClickHandler=new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(my_BT_Adapter.isEnabled()&& right_address !="")
            {
                        Thread ConnectThread = new Thread(new Runnable(){
                                public void run(){
                                        BT_Device=my_BT_Adapter.getRemoteDevice(right_address);
                                        String TAG = null;
                                        Log.e(TAG, BT_Device.getName()+"connected");
                                try{
                                BT_Socket=BT_Device.createRfcommSocketToServiceRecord(MY_UUID);
                }
            catch(IOException e)
            {
                Log.e(TAG, "ON RESUME: Socket creation failed.", e);

            }
            Log.e(TAG, "TRYING TO CONNECT");
                    try{
                        btn_Send.setClickable(false);
                        btn_Search.setClickable(false);
                        btn_Next.setClickable(false);
                        BT_Socket.connect();
                        Log .e(TAG, "ON RESUME: BT connection established, data transfer link open.");
                    }
                    catch(IOException e)
                            {
                btn_Send.setClickable(true);
                        btn_Search.setClickable(true);
                        btn_Next.setClickable(true);
                            }
                        try{
                                Thread.sleep(1000);
                                OutputStream outStream;
                                outStream = BT_Socket.getOutputStream();
            byte[]byteArray=(txt_Message.getText().toString()).getBytes();
            outStream.write(byteArray);
            outStream.flush();
            Thread.sleep(1500);
            BT_Socket.close();
                btn_Send.setClickable(true);
                        btn_Search.setClickable(true);

        }
                    catch(Exception e)
        {
                txt_Display.setText("Unsuccessful");
        }
                }
                });

                ConnectThread.start();

    }
            else
            {
                Toast.makeText(BlueActivity.this, "Adapter off or bluetooth not selected", Toast.LENGTH_SHORT).show();
            }
        }
        };
} 
```

Thanks in advanced, Chris

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T15:16:04.407

您的一个 findViewById 调用可能返回了一个空值。我建议您在 findViewById 之后检查空值。

# java - wtf.is.going.on 中的抽象方法 foo(E) 无法直接访问 super.foo(e) 用 ANT 编译

> ID：10300696
> 
> 赞同：3
> 
> 时间：2012-04-24T15:06:19.433
> 
> 标签：java, android, eclipse, generics, ant

```
abstract method foo(E) in wtf.is.going.on cannot be accessed directly super.foo(e) 
```

使用`ANT`自动生成的`ANT`构建文件从`ANDROID`.

当我在 中编译同一个项目时`ECLIPSE`，我没有遇到任何问题。怎么了？

* * *

这是发生了什么：

```
package wtf.is.going.on;
public interface DAOMutator<E> {

    public void foo(E e);

} 
```

* * *

```
package wtf.is.going.on;
public class DAOBImpl<E extends DAO> implements DAOMutator<E> {

    @Override
    public void foo(DAO dao) {
        //do some stuff
    }

} 
```

* * *

```
package wtf.is.going.on.more;
public class VMBImpl <E extends someDao> extends DAOBImpl<E> {

    @Override
    public void foo(E e) {
    super.foo(e); // ERROR OCCURS HERE
    }

} 
```

* * *

确切的错误输出：

```
[javac] MYPATH\src\wtf\is\going\on\more\VMBImpl.java:6: abstract method foo(E) in wtf.is.going.on.DAOMutator cannot be accessed directly
[javac]             super.foo(e); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T15:23:03.283

如果你切换

```
public void foo(DAO dao) 
```

在 DAOBImpl 中

```
public void foo(E dao) 
```

它工作正常吗？

# c# - 通过 C++/CLI 将 C++ 编译为 C# 的先例

> ID：10300702
> 
> 赞同：0
> 
> 时间：2012-04-24T15:06:30.087
> 
> 标签：c#, c++, c++-cli

我们有一个 120 万行的旧版 Visual C++ 6 代码库，并且正在考虑以不同的方式对其进行现代化改造。一个想法是更改此代码以使其作为 C++/CLI 代码编译为 CIL，然后使用 Reflector 之类的工具将其反编译回 C#，然后继续维护该代码库。

有没有人做过这样的事情？听起来可行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T15:12:33.067

没有 CLI 或 Reflector 的直接经验，但我猜你想出的东西最终可能看起来像丑陋的 C#。

为什么不尝试转换少量有代表性的文件来看看会发生什么？

我的预感是，将代码升级到 VS10 并保持 C++ 会更好，而且可能更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T15:43:34.500

如果您只是通过`/clr`，您最终会在使用库函数的任何地方使用 C++ 互操作。Reflector 不知道如何处理这个问题。将 C++ 标准库的使用转换为 .NET 库没有捷径可走，没有 1:1 的相关性，而且架构设计也往往完全不同。

对于执行纯计算的函数，您可能会得到一些丑陋但有效的东西。

# ios - NSURL 连接 sendAsynchronousRequest 如何保存响应？

> ID：10300707
> 
> 赞同：2
> 
> 时间：2012-04-24T15:06:55.813
> 
> 标签：ios, objective-c, xcode, nsurlconnection, completionhandler

```
.h
@property (strong) NSString *reply; 
```

我有以下方法：

```
.m
@synthesize reply;

- (void)send
 {
 [NSURLConnection sendAsynchronousRequest:[self request] 
                 queue:[[NSOperationQueue alloc] init] 
                 completionHandler:
                        ^(NSURLResponse *response, NSData *data, NSError *error)       
                        {
                            if (error)
                            {
                                //NSLog(@"Error,%@", [error localizedDescription]);
                                [self setReply: [[NSString alloc] initWithString:[error localizedDescription]]];
                            }
                            else 
                            {
                                //NSLog(@"%@", [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding]);
                                [self setReply: [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding]];
                            } 
                        }];

} 
```

现在，我试图从块/处理程序返回一个值，但显然这是不可能的（或者我还没有弄清楚语法）。

我试图设置一个局部变量来获取回复（数据）的值，但它会产生错误。

不产生错误的唯一方法是使用类属性。但是当我尝试读取 [self reply] 的值时，它是 null，这让我认为它永远不会被设置。

我知道sendAsync函数是线程和异步的，所以[self reply]的值为null的原因是，当我使用sendSynchronousRequest时，我总是得到回复？？？

我在做什么错，如何从 completionHandler 中返回一个值？？？

编辑#1：在我看来，我做错了什么。我正在跟踪代码，当我使用同步发送时，一切正常。使用异步的，对 sendAsynchronousRequest 的实际调用从未执行过，这让我认为线程没有被调用，因此是空值。

编辑#2：我通过添加以下内容找到了解决此问题的方法：

```
[NSURLConnection sendAsynchronousRequest:[self request] 
                 queue:[NSOperationQueue alloc] init
                 completionHandler:
                        ^(NSURLResponse *response, NSData *data, NSError *error)       
                        {
                            if (error)
                            {
                                //NSLog(@"Error,%@", [error localizedDescription]);
                                [self setReply: [[NSString alloc] initWithString:[error localizedDescription]]];
                            }
                            else 
                            {
                                //NSLog(@"%@", [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding]);
                                [self setReply: [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding]];
                            } 
                        }];

[[NSRunLoop currentRunLoop] runUntilDate: [NSDate dateWithTimeIntervalSinceNow: 2]]; 
```

但是，我不完全确定我理解它是如何工作的。我想 RunLoop 告诉异步操作运行 2 秒（我可以验证，因为将日期间隔设置为低值时，由于使用实时服务器进行测试，我得到一个空响应）。我不明白的是，当我只是告诉 RunLoop 运行时，它会永远阻塞一切，就好像当前线程从未终止一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T19:25:14.100

摆脱那个 runUntilDate 并尝试使用 [NSOperationQueue mainQueue]，看看这是否会改变任何东西。

```
[NSURLConnection sendAsynchronousRequest:[self request] 
             queue:[NSOperationQueue mainQueue]
             completionHandler:
                    ^(NSURLResponse *response, NSData *data, NSError *error)... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T12:14:44.310

差不多一个月后，我找到了解决问题的方法：

```
 NSURLConnection* _connection = [[NSURLConnection alloc] initWithRequest:[self request] delegate:self startImmediately:NO];
    self.port = [NSPort port];                                                                                                       
    self.runloop = [NSRunLoop currentRunLoop];                                                                                       
    [self.runloop addPort:self.port forMode:NSDefaultRunLoopMode];
    [_connection scheduleInRunLoop:self.runloop forMode:NSDefaultRunLoopMode];
    [_connection start];
    while (self.finished != YES ) {
        [self.runloop runUntilDate:[NSDate dateWithTimeIntervalSinceNow: 0.1]];                                                                    
    }
    [self.runloop removePort:[self port] forMode:NSDefaultRunLoopMode];
    [_connection unscheduleFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode]; 
```

这对我有用。请记住，我必须正确实现 NSConnection 的委托方法（didReceiveResponse、didReceiveData、didFailWithError、connectionDidFinishLoading）。但是它现在异步工作，不会冻结 UI，并且有适当的错误报告。希望它可以帮助遇到同样问题的人

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T17:15:37.997

您应该尝试使用 __block 关键字来声明您的属性回复

```
@property (strong) __block NSString *reply; 
```

此关键字使您的属性可从块内写入。

**编辑**

关于阻塞主线程直到收到响应或直到请求超时的方法的建议：

```
//this block is used to define a waiting condition
typedef BOOL (^ CheckBlock)();

- (BOOL)waitUntilBlockTrue:(CheckBlock)theBlock orTimeout:(int)timeout {
    NSDate *waitingStartPoint = [NSDate date];
    BOOL stillNeedToWait = YES;
    while (stillNeedToWait && theBlock()) {
        stillNeedToWait = ([waitingStartPoint timeIntervalSinceNow]*(-1.0)) < timeout;
    }
    return stillNeedToWait;
} 
```

对于您的示例，您可以使用以下方法调用此方法：

```
[self waitUntilBlockTrue:^{
        //returns YES as long as the method should block
        return (BOOL)(self.reply == nil);
    } orTimeout:10]; 
```

# jquery - Jquery列表遍历和追加：需要能够在span中找到anchor，然后将anchor包裹在父元素内的span中

> ID：10300709
> 
> 赞同：0
> 
> 时间：2012-04-24T15:07:04.097
> 
> 标签：jquery, append, parent

我在将链接附加到父元素的 innerhtml 时遇到问题。链接的内容包含在元素中。我正在为内容管理的网站编写此代码，以便用户可以（并且可能会）添加随机段落标签。我试图使用 jquery 来制定我的解决方案，但我似乎遗漏了一些东西（可能非常明显）

继承人的html：

```
<ul class="publications">
    <li>
        <span class="pub-image"><img src="image1.jpg" alt="image1" /></span>
        <span class="description">
            <p><a title="Report1" href="report1.htm">Report1</a></p>
        </span>
    </li>
    <li>
        <span class="pub-image"><img src="image2.jpg" alt="image2" /></span>
        <span class="description">
            <p><a title="Report2" href="report2.htm">Report2</a></p>
        </span>
    </li>
    <li>
        <span class="pub-image"><img src="image3.jpg" alt="image3" /></span>
        <span class="description">
            <p><a title="Report3" href="report3.htm">Report3</a></p>
        </span>
    </li>
</ul> 
```

我试过这个 jquery 来找到跨度类描述中的链接并将它包裹在两个跨度元素周围

```
$(document).ready(function(){
    $('.description').each(function() {
        var itemhref = $(this).find('a').attr("href");
        $(this).parent.html("<a href='"+itemhref+"'>" + $(this).parent.html() + "</a>");

    });
}); 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T15:20:45.557

首先 $(this).parent 会抛出错误，因为 parent 不是函数，所以你应该像这样调用它

```
$(this).parent() 
```

其次，您是要添加新段落还是只是锚点？

如果您尝试附加锚点，您可以这样做：

```
$(document).ready(function() {
    $('.description').each(function() {
        var itemhref = $(this).find('a').clone(true).removeAttr('title');
        $(this).parent().append(itemhref);
    });
  }); 
```

# c++ - 添加两个 FBO (opengl) - 和闪电问题

> ID：10300710
> 
> 赞同：0
> 
> 时间：2012-04-24T15:07:17.497
> 
> 标签：c++, opengl

我想用opengl渲染一个有很多光源的场景。然而，在 opengl 中，最大光源为 8。我试图使用 FBO 来做到这一点。所以我会用 8 个灯渲染到 FBO1 场景，然后在 FBO2 = FBO2 + FBO1 （添加纹素组件）。所以FBO2会累积最终图像。（这就是想法）。但是我有“一些”编码问题:)这是我的代码：

渲染：

```
 glEnable(GL_TEXTURE_RECTANGLE_NV);
glPushAttrib(GL_VIEWPORT_BIT | GL_ENABLE_BIT); // Push our glEnable and glViewport states 
glViewport(0, 0, OPT.m_nWidth, OPT.m_nHeight);

glClear (GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); // Clear the depth and colour buffers 
glLoadIdentity();  // Reset the modelview matrix 

int iIndeks = 0, iLoopIndeks = 0, iLightsUsed = 0;
float *pM = scene3D->oCamera.SetMatrixs();
glLoadMatrixf(pM);
delete []pM;

int iAccumMult = xLightsToRender.size/MAX_OPENGL_LIGHTS;

while(iIndeks < xLightsToRender.size )
{       
    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, iFrameBufferAccumulation); 

    glShadeModel(GL_SMOOTH);
    float *pM = scene3D->oCamera.SetMatrixs();
    glLoadMatrixf(pM);
    delete []pM;

    glMatrixMode(GL_MODELVIEW);

    iLightsUsed = xLightsToRender.size > (iLoopIndeks+1) * MAX_OPENGL_LIGHTS ? MAX_OPENGL_LIGHTS : (xLightsToRender.size - iLoopIndeks * MAX_OPENGL_LIGHTS);

    iIndeks+=iLightsUsed;
    glPushMatrix();
    //initilise lights
    setLights( iLoopIndeks * MAX_OPENGL_LIGHTS,  iLightsUsed, xLightsToRender );
    for (int i=0;i<scene3D->data.m_nObjectCount;i++)
    {
        //glutSolidTeapot(1.0f); // Render a teapot 
        scene3D->RenderObjectWithOpenGL(i);
    }
    if( scene3D->data.bMovingObjectIni   )
    {
        scene3D->RenderObjectWithOpenGL( -1, true);
    }       

    glPopMatrix();

    iLoopIndeks++;
    //xShader.bind();

    //xShader.unbind();
    glPopAttrib(); // Restore our glEnable and glViewport states 
    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, 0); // Unbind our texture  
    //render to second buffer
    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, iFrameBuffer); 
    glBindTexture(GL_TEXTURE_RECTANGLE_NV, iTextureImgAccumulation); // Bind our frame buffer texture 
    glTranslatef(0.0f, 0.0f, -2.0f); 
    glBegin(GL_QUADS);
    glTexCoord2f(0,OPT.m_nHeight);
    glVertex3f(-1,-1,0);

    glTexCoord2f(OPT.m_nWidth,OPT.m_nHeight);
    glVertex3f(1,-1,0);

    glTexCoord2f(OPT.m_nWidth,0);
    glVertex3f(1,1,0);

    glTexCoord2f(0,0);
    glVertex3f(-1,1,0);

    glEnd();
    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, 0); // Unbind our texture  
} 
```

这是 FBO 的初始化：

```
 void OpenGlRenderer::initFrameBufferTexture(void) 
  {  
glGenTextures(1, &iTextureImg); // Generate one texture  

glEnable(GL_TEXTURE_RECTANGLE_NV);  
glBindTexture(GL_TEXTURE_RECTANGLE_NV, iTextureImg);

glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_ADD/*GL_DECAL*/);
glTexParameteri(GL_TEXTURE_RECTANGLE_NV, GL_TEXTURE_COMPARE_MODE, GL_NONE);
glTexParameteri(GL_TEXTURE_RECTANGLE_NV, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_RECTANGLE_NV, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_RECTANGLE_NV, GL_TEXTURE_WRAP_S, GL_CLAMP);
glTexParameteri(GL_TEXTURE_RECTANGLE_NV, GL_TEXTURE_WRAP_T, GL_CLAMP);
glTexImage2D(GL_TEXTURE_RECTANGLE_NV, 0, GL_RGB16F /*GL_FLOAT_R32_NV*/, OPT.m_nWidth, OPT.m_nHeight, 0, GL_RED, GL_FLOAT, NULL);

glGenTextures(1, &iTextureImgAccumulation); // Generate one texture  
glEnable(GL_TEXTURE_RECTANGLE_NV);  
glBindTexture(GL_TEXTURE_RECTANGLE_NV, iTextureImgAccumulation);

glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_ADD/*GL_DECAL*/);
glTexParameteri(GL_TEXTURE_RECTANGLE_NV, GL_TEXTURE_COMPARE_MODE, GL_NONE);
glTexParameteri(GL_TEXTURE_RECTANGLE_NV, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_RECTANGLE_NV, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_RECTANGLE_NV, GL_TEXTURE_WRAP_S, GL_CLAMP);
glTexParameteri(GL_TEXTURE_RECTANGLE_NV, GL_TEXTURE_WRAP_T, GL_CLAMP);
glTexImage2D(GL_TEXTURE_RECTANGLE_NV, 0, GL_RGB16F /*GL_FLOAT_R32_NV*/, OPT.m_nWidth, OPT.m_nHeight, 0, GL_RED, GL_FLOAT, NULL);

// Setup the basic texture parameters  

// Unbind the texture  
glBindTexture(GL_TEXTURE_RECTANGLE_NV, 0);  
    }

    void OpenGlRenderer::initFrameBufferDepthBuffer(void) 
    {  

    glGenRenderbuffersEXT(1, &iDepthBuffer); // Generate one render buffer and store the ID in iDepthBuffer  
glBindRenderbufferEXT(GL_RENDERBUFFER_EXT, iDepthBuffer); // Bind the iDepthBuffer render buffer  

    glRenderbufferStorageEXT(GL_RENDERBUFFER_EXT, GL_DEPTH_COMPONENT,  OPT.m_nWidth, OPT.m_nHeight); // Set the render buffer storage to be a depth component, with a width and height of the window  

    glFramebufferRenderbufferEXT(GL_FRAMEBUFFER_EXT, GL_DEPTH_ATTACHMENT_EXT, GL_RENDERBUFFER_EXT, iDepthBuffer); // Set the render buffer of this buffer to the depth buffer  

    glBindRenderbufferEXT(GL_RENDERBUFFER_EXT, 0); // Unbind the render buffer  
    }   

    void OpenGlRenderer::initFrameBuffer(void) 
    {  
   initFrameBufferDepthBuffer(); // Initialize our frame buffer depth buffer  

   initFrameBufferTexture(); // Initialize our frame buffer texture  

   glGenFramebuffersEXT(1, &iFrameBufferAccumulation); // Generate one frame buffer and store the ID in iFrameBufferAccumulation  
   glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, iFrameBufferAccumulation); // Bind our frame buffer  

   glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT, GL_TEXTURE_RECTANGLE_NV, iTextureImgAccumulation, 0); // Attach the texture fbo_texture to the color buffer in our frame buffer  

   glFramebufferRenderbufferEXT(GL_FRAMEBUFFER_EXT, GL_DEPTH_ATTACHMENT_EXT, GL_RENDERBUFFER_EXT, iDepthBuffer); // Attach the depth buffer iDepthBuffer to our frame buffer  

   glGenFramebuffersEXT(1, &iFrameBuffer); // Generate one frame buffer and store the ID in iFrameBufferAccumulation  
   glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, iFrameBuffer); // Bind our frame buffer  

   glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT1_EXT, GL_TEXTURE_RECTANGLE_NV, iTextureImg, 0); // Attach the texture fbo_texture to the color buffer in our frame buffer  

   glFramebufferRenderbufferEXT(GL_FRAMEBUFFER_EXT, GL_DEPTH_ATTACHMENT_EXT, GL_RENDERBUFFER_EXT, iDepthBuffer); // Attach the depth buffer iDepthBuffer to our frame buffer  

   GLenum status = glCheckFramebufferStatusEXT(GL_FRAMEBUFFER_EXT); // Check that status of our generated frame buffer  
   checkFramebufferStatus();  
   if (status != GL_FRAMEBUFFER_COMPLETE_EXT) // If the frame buffer does not report back as complete  
   {  
    std::cout << "Couldn't create frame buffer" << std::endl; // Output an error to the console  
    exit(0); // Exit the application  
   }  
  } 
```

所以基本上我想渲染到 iFrameBufferAccumulation 然后每次使用 glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_ADD); 哪个应该有效地添加这两个帧缓冲区？（或者我需要使用着色器）

另外我想问一下我是否可以将闪电强度设置为大于 1.0（atm 它在我的程序中的工作方式与 setLights 函数一样）并且它将向 FBO 呈现正确的结果？我使用 GL_RGB16F 纹理格式。可以吗，还是我需要使用 32 位纹理？如果我需要在渲染后使用着色器来显示 FBO？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:20:37.597

> 另外我想问一下我是否可以将闪电强度设置为大于 1.0（atm 它在我的程序中的工作方式与 setLights 函数一样）并且它将向 FBO 呈现正确的结果？我使用 GL_RGB16F 纹理格式。可以吗，还是我需要使用 32 位纹理？如果我需要在渲染后使用着色器来显示 FBO？

一般来说，没有。几乎所有固定功能操作都被钳制，无论是在纹理提取时，还是在将它们写入帧缓冲区时，或者其他时间。

如果你想做真正的浮点运算，那么你需要放弃固定功能，转而使用着色器。

# java - Spring AOP 异常多态性

> ID：10300712
> 
> 赞同：0
> 
> 时间：2012-04-24T15:07:20.120
> 
> 标签：java, spring, inheritance, aop, spring-aop

我有个问题。

即：我正在使用spring aop来处理异常。其中一些是我在外部供应商交付的数据损坏时抛出的异常。我在指向特定类型的方面处理它们。比如这个。

```
@AfterThrowing(
    pointcut =
      "execution(*myClass.myDataProcessingMethod(..))",
    throwing = "ex"
  )
public void myAspectMethod(MyException ex) {
...
} 
```

但是当我的数据处理工作中发生了一些不好的事情，并且不是错误的数据而是我的逻辑中的错误时，我想在实例上得到通知。所以我有第二个方面。

```
@AfterThrowing(
    pointcut =
      "execution(*myClass.myDataProcessingMethod(..))",
    throwing = "ex"
  )
public void myAspectMethod(Exception ex) {
  extraInformingService.informAdamAtOnce("shitjustgotreal");
} 
```

但是当 MyException 被抛出时，两个方面都会被触发，因为 MyException 是 Exception 的实例。

有没有办法只触发指向 MyException 的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:27:32.917

最简单但不是很优雅的版本是这样的：

```
@AfterThrowing(
    pointcut =
      "execution(*myClass.myDataProcessingMethod(..))",
    throwing = "ex"
  )
public void myAspectMethod(Exception ex) {
  if(!ex instanceof Myexception){
      extraInformingService.informAdamAtOnce("shitjustgotreal");
  }
} 
```

# javascript - 显示 LOADING 直到页面完全加载

> ID：10300717
> 
> 赞同：0
> 
> 时间：2012-04-24T15:07:35.283
> 
> 标签：javascript, ajax

我有这个 javascript：

```
function createRequestObject(){
    var req;
    if(window.XMLHttpRequest){
        //For Firefox, Safari, Opera
        req = new XMLHttpRequest();
    }
    else if(window.ActiveXObject){
        //For IE 5+
        req = new ActiveXObject("Microsoft.XMLHTTP");
    }
    else{
        //Error for an old browser
        alert('Your browser is not IE 5 or higher, or Firefox or Safari or Opera');
    }
    //alert (req);
    return req;
}

//Make the XMLHttpRequest Object
var http = createRequestObject();

function sendRequestTwo(method, url, head1){
    head = head1
    if(method == "get" || method == "GET"){
        http.open(method,url);
        http.onreadystatechange = handleResponseTwo;
        http.send(null);

    }
}

var head; //divs name

function handleResponseTwo(){
    if(http.readyState == 4 && http.status == 200){
        var response = http.responseText;
        if(response){  
            document.getElementById(head).innerHTML = response;
        }
    }      
} 
```

这部分

```
 document.getElementById(head).innerHTML = response; 
```

将结果粘贴回我的页面。如何在页面完全加载之前显示“正在加载”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T15:21:58.163

如何在正文中加载一个带有 Html 的 Div

```
<div id="loadingDiv" class="hiddenClass">Fancy rotating image goes here</div> 
```

有一个显示显示：无的 CSS 类；那么你可以在之前使用它

```
http.onreadystatechange = handleResponseTwo;
var myDiv = document.getElementById('loadingDiv');
myDiv.className = "showClass"; 
```

然后

```
document.getElementById(head).innerHTML = response; 
```

添加

```
var myDiv = document.getElementById('loadingDiv');
myDiv.className = "hiddenClass"; 
```

全部一起

```
function createRequestObject(){
    var req;
    if(window.XMLHttpRequest){
        //For Firefox, Safari, Opera
        req = new XMLHttpRequest();
    }
    else if(window.ActiveXObject){
        //For IE 5+
        req = new ActiveXObject("Microsoft.XMLHTTP");
    }
    else{
        //Error for an old browser
        alert('Your browser is not IE 5 or higher, or Firefox or Safari or Opera');
    }
    //alert (req);
    return req;
}

//Make the XMLHttpRequest Object
var http = createRequestObject();

function sendRequestTwo(method, url, head1){
    head = head1
    if(method == "get" || method == "GET"){
        var myDiv = document.getElementById('loadingDiv');
        myDiv.className = "showClass";

        http.open(method,url);
        http.onreadystatechange = handleResponseTwo;
        http.send(null);

    }
}

var head; //divs name

function handleResponseTwo(){
    if(http.readyState == 4 && http.status == 200){
        var response = http.responseText;
        if(response){  
            document.getElementById(head).innerHTML = response;
            var myDiv = document.getElementById('loadingDiv');
            myDiv.className = "hiddenClass";
        }
    }      
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T15:10:29.413

我不知道您的 HTML 的详细信息，但是您不能将 loading 放入带有 的标签中`id="head"`吗？

然后，当您更新 innerHTML 时，加载将自动被替换。如果您有更多要求，请描述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T15:13:19.777

您**可以**在`sendRequestTwo`

# javascript - iFrame 页面转换的 Javascript 控制

> ID：10300726
> 
> 赞同：0
> 
> 时间：2012-04-24T15:07:54.310
> 
> 标签：javascript, iframe

首先，我是一个完整的新手，所以请做出相应的回应......

我设法创建了一个 iframe，其中三个 html 页面每 1500 毫秒按顺序动态加载（www.online95.com/agency.html）

在加载到 iframe 中的每个 html 页面（/budget、html、volunteer.html 和 robust.html）上，我添加了一排圆圈（white=off 和 red=on），如果单击它们会将相应的页面加载到框架

问题是原始脚本未与单个 html 页面链接，因此无论您手动将哪个页面加载到 iframe 中或何时加载，原始序列都会继续每 1500 毫秒加载一次

我正在寻找一些脚本来在 /agency.html 上的原始 javascript 中保留变量，以便下一个动态页面加载将是页面手动加载后的页面，并将计时器休息到

我也希望能够添加一个暂停按钮

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:29:44.093

Before answering your question, I have to say this is a really bad practice, you can use [jQuery](http://jquery.com/) and a [jQuery Slider Plugin](http://basic-slider.com/), it will be more effective.

doing what you want is beeing more complicated with iframes, but you can do it. you should use iframe onload event for changing current page index(i),

here is how you can do,

```
<script type="text/javascript">

 var pages=new Array();
       pages[0]="/budget.html";
       pages[1]="/voluntary.html";
       pages[2]="/robust.html";

 var i=0;
 var time=4000; // this is set in milliseconds
 var timer = false;
 var timerSetter;

function pageChange() {
 document.getElementById("agencyframe").src=pages[i];
 i++;
 if(i==pages.length) {
   i=0;
 }
 timerSetter = setTimeout("pageChange()",time);
}

function contentChanged(e) {
    if (!timer)  { pageChange(); timer=true;}
    if (timerSetter) {
        clearTimeout(timerSetter);  
        timerSetter = setTimeout("pageChange()",time); 
    }
    var  newSrc = e.contentWindow.location.href;
    for (var j=0; j < pages.length; j++) {
         if (newSrc.match(pages[j])) {
            i = j+1;
            if(i==pages.length) {
               i=0;
            }
         } 
    }
}
</script> 
```

And don't forget to set onload attribute for iframe,

```
<iframe id="agencyframe" onload="contentChanged(this)" src="/budget.html">
</iframe> 
```

**UPDATE:**

As I understand you want to change iframe page when user click (page zero-page one-page two) [on this page.](http://www.online95.com/agency.html)

you can change location of a iframe like this,

```
document.getElementById("agencyframe").src = "/budget.html"; 
```

so change your function like this,

```
function pageZero() {
    document.getElementById("prin_div1").setAttribute("class", "prin_on");
    document.getElementById("prin_div2").setAttribute("class", "prin_off");
    document.getElementById("prin_div3").setAttribute("class", "prin_off");
    document.getElementById("agencyframe").src = pages[0];
}

function pageOne() {
    document.getElementById("prin_div1").setAttribute("class", "prin_off");
    document.getElementById("prin_div2").setAttribute("class", "prin_on");
    document.getElementById("prin_div3").setAttribute("class", "prin_off");
    document.getElementById("agencyframe").src = pages[1];
}

function pageTwo() {
    document.getElementById("prin_div1").setAttribute("class", "prin_off");
    document.getElementById("prin_div2").setAttribute("class", "prin_off");
    document.getElementById("prin_div3").setAttribute("class", "prin_on");
    document.getElementById("agencyframe").src = pages[2];
} 
```

**UPDATE -2:**

Change `contentChanged` function like this,

```
function contentChanged(e) {
    if (!timer)  { pageChange(); timer=true;}
    if (timerSetter) {
        clearTimeout(timerSetter);  
        timerSetter = setTimeout("pageChange()",time); 
    }
    var  newSrc = e.contentWindow.location.href;
    for (var j=0; j < pages.length; j++) {
         if (newSrc.match(pages[j])) {
            i = j+1;
            document.getElementById("prin_div"+i).setAttribute("class", "prin_on");
            if(i==pages.length) {
               i=0;
            }
         } else {
            document.getElementById("prin_div"+(j+1)).setAttribute("class", "prin_off");
         } 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:17:48.153

我的建议是，不要在加载的页面上设置控件。如您所见，不同加载页面之间的脚本编写可能非常复杂，并且不是脚本的真正用途。

我会将控件保留在父页面上。`position:absolute; z-index:2;`您可以通过使用和`top/bottom: XYZpx; left/right: ABCpx;`正确定位它们（​​以及父对象`position:relative`）和正确的背景设置，使它们看起来重叠。

然后您需要做的就是将计时器存储在一个变量中 ( `var timer = window.setTimeout(...)`) 并在用户单击其中一个控件时取消它 ( `controls.onclick = function(timer) { window.clearTimeout(timer); }`)

# android - 想在android中创建自定义标签栏

> ID：10300729
> 
> 赞同：0
> 
> 时间：2012-04-24T15:07:57.997
> 
> 标签：android, android-layout

嗨，我是 android 新手，我想创建一个底部有五个标签的自定义标签栏。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:30:50.193

这应该会有所帮助：[align-tabhost-at-bottom](http://envyandroid.com/archives/326/align-tabhost-at-bottom)

还要检查[这个](https://stackoverflow.com/questions/2395661/android-tabs-at-the-bottom)问题。它也可能会有所帮助。

# maven - 在 Maven 中查找可用处理器的数量（与平台无关）

> ID：10300732
> 
> 赞同：1
> 
> 时间：2012-04-24T15:08:07.390
> 
> 标签：maven, maven-3, maven-profiles

是否可以以独立于平台的方式检索 maven 中可用处理器的数量？我希望能够在`available_processors > 1`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:17:12.563

没有简单的方法可以做到这一点。您必须编写一个 Maven 扩展，将结果存储`Runtime.availableProcessors()`在系统属性中。您必须将该扩展名放入`$Maven_HOME/lib/ext`（请参阅[MNG-4984](http://jira.codehaus.org/browse/MNG-4984)）。编写一个 Maven 插件是不够的，插件解析发生在配置文件激活之后。我认为不可能编写 custom [`ProfileActivator`](http://maven.apache.org/ref/3.0.4/apidocs/org/apache/maven/profiles/activation/ProfileActivator.html)，主要是因为 pom.xml XSD 不允许它。

# ios - iOS 5.1 中的文件制作工具

> ID：10300733
> 
> 赞同：0
> 
> 时间：2012-04-24T15:08:09.880
> 
> 标签：ios

这是否可以将 Filemaker Pro DB 转换为 SQLite 或其他类型以在 iOS 5.1 应用程序中对其进行操作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T15:24:26.757

当然有可能！如何做到这一点是另一个网站的另一个故事。

# codeigniter - 在 codeigniter 中 ci_sessions 在哪里更新

> ID：10300740
> 
> 赞同：0
> 
> 时间：2012-04-24T15:08:39.350
> 
> 标签：codeigniter, session, tankauth

应用程序使用 codeigniter 和 tank_auth。我需要添加更多数据来添加`ci_sessions`表格。我找不到数据插入的位置`ci_sessions`。它在哪里，在哪个文件夹或控制器或库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T15:23:30.307

我找到了：它在 system/libraries/Session.php

但更改库 tank_auth.php 听起来比 Session.php

对于类似的问题：我改变了这个

```
$this->ci->session->set_userdata(array(
    'user_id'   => $user->id,
    'username'  => $user->username,
    'status'    => ($user->activated == 1) ? STATUS_ACTIVATED : STATUS_NOT_ACTIVATED,
                    )); 
```

对此：

```
$this->ci->session->set_userdata(array(
     'user_id'  => $user->id,
     'username' => $user->username,
     'status'   => ($user->activated == 1) ? STATUS_ACTIVATED : STATUS_NOT_ACTIVATED,
     'language'  => $user->language,
                    )); 
```

通过将列添加`$user->language`到数据库中的表中。`language``users`

数据仍然存储在`ci_sessions`表中，但在`user_data`列中。

# ubuntu - 在 Ubuntu 上进行 whois 通配符搜索

> ID：10300747
> 
> 赞同：0
> 
> 时间：2012-04-24T15:08:57.300
> 
> 标签：ubuntu, wildcard, whois

我正在尝试使用 Ubuntu 终端搜索所有以“marha”开头并以“.com”结尾的域。

这就是我正在尝试的：

> whois -H marha%.com

但是，这并没有给我任何结果。

是否有特定于 Ubuntu 的语法或我缺少的东西？我检查了文档，但没有成功找到它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:11:02.707

您在文档中没有找到任何内容，因为它不支持它。您需要一个外部工具来模拟它（在网上搜索，很多人都编写了脚本；这并不难）。请记住，它可以快速查询大量域，并且在某些系统上，您最终可能会因滥用而被阻止。

# postgresql - PostgreSQL server does not start

> ID：10300750
> 
> 赞同：1
> 
> 时间：2012-04-24T15:09:00.243
> 
> 标签：postgresql

I instal pg server and tools using standard package from official site( MacOs ).

Everything worked fine, until I changed a configure file - postgresql.conf.

```
shared_buffers = 32MB To shared_buffers = 128MB 
```

Then, when I restarted the system, server does not starts.

Why it's happens?

May be because file owner is changed? Was postgres - became 'root'. If Yes, how can I fix it?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T15:17:37.077

您可能需要[`adjust your kernel settings`](http://www.postgresql.org/docs/8.2/static/kernel-resources.html)匹配您要求的新尺寸。

# c# - 是否可以通过http将数据从客户端流式传输到服务器？

> ID：10300760
> 
> 赞同：5
> 
> 时间：2012-04-24T15:09:36.357
> 
> 标签：c#, asp.net, http, persistent-connection

我想将数据从客户端（桌面或移动）流式传输到托管服务器。这不是大量数据，每 1/10 秒 1 个字节 - 但数据需要立即流式传输（无缓冲），并且连接需要长时间保持活动状态（例如最多 10 分钟）。

因为服务器是托管的，所以我无法使用套接字——只有 http。

我知道在服务器端，如果我要连接到客户端，我可以使用持久连接并写入响应流来执行此操作。

但是有没有办法反过来做到这一点，即客户端与服务器建立持久连接并写入请求流？

澄清：我不必将此客户端->服务器通信作为持久http连接完成，我只是想知道是否可能，这样我就可以与我计划的服务器->客户端持久http连接对称。

从我听到的情况来看，听起来我应该能够做单独的 http 帖子并实现相同或相似的延迟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:53:56.070

我将继续为我自己的问题提供答案，这似乎是：

从客户端->服务器建立持久的http连接在技术上是*可行*的，但是还没有人实现它，因为使用创建单个http请求的正常方法似乎对每个人的目的来说都足够快。

所以这就是我最终要做的，简单地使用 WebRequest.Create 和 HttpWebRequest 类并相信框架正在处理 KeepAlive。在我的原型中，这似乎足够快，尽管实际性能仍有待观察。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-19T00:22:48.563

也许[WebSocket](https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API)会很有用。它允许您通过 HTTP 创建一个“套接字”，因此您可以使用它通过 HTTP 将数据从客户端发送到服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T15:26:00.110

AFAIK，当 WCF 托管在 IIS 中时，流式传输不起作用。

我发现[这篇 CodeProject 文章](http://www.codeproject.com/Articles/324010/What-s-new-in-WCF-4-5-Improved-streaming-in-IIS-ho)说它已在 WCF 4.5 中修复。

你能让客户每 1/10 秒拨打一次新电话吗？如果您使用的是 HTTP 1.1，则 TCP 连接应保持打开状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T15:30:24.400

我不确定这是否是一个好的用例，但[SignalR](https://github.com/SignalR/SignalR)可能对你有用。

# orchardcms - 访问果园 cms 中的图像列表或包括模块剃刀视图中的 mediapicker 字段

> ID：10300761
> 
> 赞同：0
> 
> 时间：2012-04-24T15:09:48.950
> 
> 标签：orchardcms

我正在为一个果园网站编写一个模块，其中包含用于将数据输入非果园数据库的表单。通过这个用户界面，我想通过 mediapicker 模块将图像保存在文件系统/果园数据库中，并将图像的 url 保存到“其他”数据库。

完成这项任务的最佳方法是什么？

似乎有两个主要选项：

1.将媒体选择器字段合并到我模块的视图中。

使用“食谱”？

1.  访问果园 cms 中的媒体对象列表（按文件夹）。然后我可以在我的模块的下拉列表中显示这些。（用户需要去 mediapicker 模块上传图片）

    使用命名空间 Orchard.Media.Services 来访问 MediaService 类？我无法找到此命名空间的 dll。

我正在使用 occhard 1.4 版

# sql - 将 Select 语句返回为格式化的 HTML (SQL 2005)

> ID：10300764
> 
> 赞同：-3
> 
> 时间：2012-04-24T15:09:56.560
> 
> 标签：sql, sql-server, sql-server-2005

我有一个看起来像这样的数据集：

```
 Gender | Age | Name
    Male  | 30  | Bill
  Female  | 27  | Jenny
  Female  | 27  | Debby 
   Male   | 44  | Frank 
```

我正在尝试将其显示为特殊格式的 HTML 代码：

```
 <ul>
      <li>Male
        <ul>
          <li>30
            <ul>
              <li>Bill</li>
            </ul>
          </li>
          <li>44
            <ul>
              <li>Frank</li>
            </ul>
          </li>
        </ul>  
      </li>
    </ul>

    <ul>
      <li>Female
        <ul>
          <li>27
            <ul>
              <li>Jenny</li>
              <li>Debby</li>
            </ul>
          </li>
        </ul>  
      </li>
    </ul> 
```

我尝试使用`FOR XML`，但这并没有给出我想要的结果。它没有删除返回的多个`Gender`和`Age`字段。正如您在此 HTML 中看到的那样，它将所有内容组合在一起，并且仅在结束节点处给出重复项。

Aaron Bertrand 在这里提供了一个很好的方法[Return Select Statement as formatted HTML](https://stackoverflow.com/questions/10289896/return-select-statement-as-formatted-html)，它似乎在 SQL 2008 中完美运行，但我一直在寻找在 2005 年也能正常工作的东西，除了一些小东西，比如`+=`运算符和设置默认 DECLARE 值，只是没有2005 年不显示。

在 SQL Server 2005 中如何实现这样的功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T15:33:42.070

```
declare @T table
(
  Gender varchar(10),
  Age int,
  Name varchar(10)
)

insert into @T values ('Male',   30,   'Bill')
insert into @T values ('Female', 27,   'Jenny')
insert into @T values ('Female', 27,   'Debby') 
insert into @T values ('Male',   44,   'Frank')

select Gender as 'li',
       (select T2.Age as 'li',
               (select T3.Name as 'li'
                from @T as T3
                where T2.Age = T3.Age and
                      T1.Gender = T3.Gender
                for xml path(''), root('ul'), type) as 'li'
        from @T as T2
        where T1.Gender = T2.Gender
        group by T2.Age
        for xml path(''), root('ul'), type) as 'li'
from @T as T1
group by Gender
for xml path('ul') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-24T15:13:41.317

这是 SQL Server 2005 的代码，它只需要[对我昨天给出的答案进行细微调整，该答案](https://stackoverflow.com/questions/10289896/return-select-statement-as-formatted-html/)是专门针对 SQL Server 2008 要求的：

```
DECLARE @x TABLE(Gender VARCHAR(6), Age INT, Name VARCHAR(32));

INSERT @x SELECT 'Male',   30, 'Bill'  UNION ALL SELECT 'Female', 27, 'Jenny'
UNION ALL SELECT 'Female', 27, 'Debby' UNION ALL SELECT 'Male',   44, 'Frank';

DECLARE @html NVARCHAR(MAX);
SET @html = N'';

;WITH x AS ( SELECT x.Age, x.Gender, x.Name,
    dr = DENSE_RANK() OVER (PARTITION BY x.Gender ORDER BY x.Age),
    gn = ROW_NUMBER() OVER (PARTITION BY x.Gender ORDER BY x.Age),
    rn = ROW_NUMBER() OVER (ORDER BY x.Gender DESC, x.Age)
  FROM @x AS x ) SELECT @html = @html + 
    CHAR(13) + CHAR(10) + CASE WHEN c1.gn = 1 THEN 
        CASE WHEN c1.rn > 1 THEN '</li></ul></li></ul>' ELSE '' END + '<ul><li>' 
        + c1.Gender ELSE '' END + CHAR(13) + CHAR(10) + CHAR(9) 
        + CASE WHEN c1.gn = 1 OR c1.Age <> c3.Age THEN 
        CASE WHEN c1.gn > 1 THEN '</li>' ELSE '<ul>' END + '<li>' 
        + CONVERT(VARCHAR(32), c1.Age) ELSE '' END + CHAR(13) + CHAR(10) + CHAR(9) 
        + CHAR(9) + CASE WHEN (c1.gn = 1 OR c1.Age <> c3.Age) THEN '<ul>' ELSE '' END 
        + '<li>' + c1.Name + '</li>' + CASE WHEN c1.Age <> c2.Age OR c1.dr <> c2.dr 
        THEN '</ul>' ELSE '' END
FROM x AS c1 
LEFT OUTER JOIN x AS c2
ON c1.rn = c2.rn - 1
LEFT OUTER JOIN x AS c3
ON c1.rn = c3.rn + 1
ORDER BY c1.Gender DESC, c1.Age;

SELECT @html = @html + '</ul></li></ul></li></ul>';

PRINT @html; -- note you will need to deal with this 
             -- in another way if the string is large 
```

这是它有效的证据：

![在此处输入图像描述](../Images/9fbcddf3eae83956b80b41ed0f4cce7a.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T18:34:56.757

```
SET ANSI_WARNINGS ON;

DECLARE @Test TABLE
(
    Gender  VARCHAR(10) NOT NULL,
    Age     INT NOT NULL,
    Name    VARCHAR(50) NOT NULL
);

INSERT  @Test (Gender, Age, Name)
SELECT  'Male'  ,30 ,'Bill'
UNION ALL
SELECT  'Female',27 ,'Jenny'
UNION ALL
SELECT  'Female',27 ,'Debby'
UNION ALL
SELECT  'Male'  ,44 ,'Frank';

DECLARE @x XML;
SET     @x = 
(
    SELECT  *
    FROM    @Test t
    FOR XML RAW, ROOT
);
SELECT @x AS [Source];
SELECT @x.query('
    for $g in distinct-values(//root/row/@Gender) (: or for $g in ("Male", "Female") :)
    return
    <ul>
        <li>
            {data($g)}
            <ul>
            {
                for $a in distinct-values(//root/row[@Gender=$g]/@Age)
                return <li>{data($a)}
                <ul>
                {
                    for $n in //root/row
                    where $n/@Gender=$g and $n/@Age = $a
                        return <li>{data($n/@Name)}</li>
                }</ul></li>
            }
            </ul> 
        </li>
    </ul>
') AS Result; 
```

参考：[SQL Server XQuery](http://msdn.microsoft.com/en-us/library/ms189075%28v=sql.90%29.aspx)

# jquery - jquery html() 回调函数

> ID：10300765
> 
> 赞同：30
> 
> 时间：2012-04-24T15:09:59.007
> 
> 标签：jquery, html, image

这个问题已被问过几次，但没有以可以帮助我解决具体问题的方式回答。从导航列表中，单击项目时，我正在使用该`.html()`函数将一些 HTML 内容加载到 div 中。没有ajax请求。HTML 内容包含图像。因此，加载可能需要一些时间。并且由于`.html()`是同步操作，下一行将立即执行。

一旦我使用 加载内容`.html()`，我就启用了一个名为 tinyscrollbar 的第三方自定义滚动条。如果加载的内容有图像，那么滚动条会在加载图像之前计算内容 div 的高度，从而导致滚动条不会一直滚动。

我不想使用`.setInterval()`. 有解决方案吗？jQuery 中是否还有其他函数与该`.html()`函数类似但具有某种回调功能？

谢谢你。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-08-04T05:53:24.050

```
$('#divId').html(someText).promise().done(function(){
    //your callback logic / code here
}); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-24T15:40:26.707

根据 Mike Robinson（和dystroy）的建议，我的问题的答案是：

```
$("#myContentDiv").html('HTML content comes here');
var contentImages = $("#myContentDiv img");
    var totalImages = contentImages.length;
    var loadedImages = 0;
    contentImages.each(function(){
        $(this).on('load', function(){
            loadedImages++;
            if(loadedImages == totalImages)
            {
                $("#myContentDiv").tinyscrollbar();
            }
        });
    }); 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-04-24T15:28:25.783

为了检查图像是否加载，您可以使用以下内容；

```
<img src="your_image_path" />

<script>
    $('img').load(function() {
        //call_your_function();
    });
</script> 
```

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2012-04-24T15:22:57.390

```
$(window).load(function() {
  // code here
})(); 
```

# facebook - ios5 facebook 应用程序 - 我真的需要 git hub 吗？

> ID：10300768
> 
> 赞同：0
> 
> 时间：2012-04-24T15:10:04.453
> 
> 标签：facebook, ios5, github

我一直在阅读有关创建我的第一个 Facebook 应用程序的信息。有些网站说我需要 git hub（但我在设置它时遇到了困难，所以宁愿不这样做），有些网站似乎没有说我需要它。我不需要将此提交给 iTunes，只需使用 facebook 在我的设备上进行测试即可。

在这个网站： [https](https://developers.facebook.com/docs/mobile/ios/build/) ://developers.facebook.com/docs/mobile/ios/build/ 似乎说我需要 git hub。我在设置我的 git 集线器时遇到问题。

然而，这个网站： [http](http://thinkdiff.net/facebook/how-to-develop-facebook-application-for-iphone/) ://thinkdiff.net/facebook/how-to-develop-facebook-application-for-iphone/ 似乎是从一个例子开始，不需要 git hub，除非他们错过了那一步。此外，他们引用的示例是 DemoApp，但我不知道如何找到它。我看到的是 hackbook，而不是 DemoApp。其他人看到 DemoApp 吗？我如何找到它...我需要点击什么才能找到它？

我还在这个网站上看到过： [Graph API and iOS](https://stackoverflow.com/questions/4006382/graph-api-and-ios) 指的是 Demo 应用程序。也许它被重新命名为hackbook？

我在这里看到了对第一个链接的另一个引用（说明 git hub 是需要的）： [Graph API and iOS](https://stackoverflow.com/questions/4006382/graph-api-and-ios) 但是我在遵循这个例子时遇到了麻烦。我认为它说明了将 facebook sdk 拖到我的项目中的一些内容，但没有说明如何或从哪里拖到/拖到哪里，而且我没有 git hub 工作。

所以我想现在有两个问题： 1\. 我是否需要 git hub 为我的 ios 设备（在我的情况下为 ipod touch）开发一个 facebook 应用程序。2\. 网站中提到的Demo应用程序在哪里？我只看到hackbook。

谢谢，密歇根

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T15:18:13.503

提到 Github 是因为 Facebook sdk 的代码在那里加载，您需要将其从 Github 获取到您的计算机。

[您可以按照文档](https://developers.facebook.com/docs/mobile/ios/build/#sdk)中的建议通过克隆存储库来做到这一点，或者您可以简单地从项目[页面](https://github.com/facebook/facebook-ios-sdk)将代码下载为 zip 文件。

至于演示应用程序，只有你提到的黑客书。

![在此处输入图像描述](../Images/c48d1d48217315fcc8357ff98030e4e6.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T15:23:27.887

问题一：Github 让您轻松控制源代码。如果你有 Mac，你可以下载 Github for Mac，这样会更容易。尽管任何项目都不需要它，但您确实需要从 Github 下载 SDK。

问题二：您引用的DemoApp文章发布于2010年8月20日，Facebook iOS SDK从那时起发生了很大的变化。

# r - 如何在 R 中自动加载包？

> ID：10300769
> 
> 赞同：67
> 
> 时间：2012-04-24T15:10:05.933
> 
> 标签：r, loading, r-package, r-faq, defaults

你能建议我一种在 R 中自动加载包的方法吗？我的意思是，我想在 R 中启动一个会话，而无需`library('package name')`多次使用。假设我下载了下次启动 R 时要使用的所有包。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-04-24T15:13:30.200

放入`library(foo)`您的`.Rprofile`文件或设置`R_DEFAULT_PACKAGES`：请参阅`?Rprofile`...

特别是（因为`?Rprofile`很长并且可能令人生畏）：

> 如果您在开始时想要一组与默认软件包不同的软件包，请在“.Rprofile”或“Rprofile.site”文件中插入对“options”的调用。例如，'options(defaultPackages = character())' 将在启动时不附加任何额外的包（仅 'base' 包）（或在运行 R 之前将 'R_DEFAULT_PACKAGES=NULL' 设置为环境变量）。使用 'options(defaultPackages = "")' 或 'R_DEFAULT_PACKAGES=""' 强制使用 R*系统*默认值。

由于您可能*确实*希望加载所有默认包，然后再添加额外的包（而不是不加载某些默认包），您可以将

```
library("mypackage1")
library("mypackage2")
[etc.] 
```

或使用`options(defaultPackages=...)`：

```
options(defaultPackages=c(getOption("defaultPackages"),
       "mypackage1","mypackage2", ... [etc.])) 
```

在您`.Rprofile`将所需的包*附加*到标准默认值。

**编辑**（从评论中复制）重新让它在[Rstudio](http://www.rstudio.org "工作室")中工作： [http](http://rstudio.org/docs/using/workspaces) ://rstudio.org/docs/using/workspaces 建议 Rstudio 执行`.Rprofile`然后“执行 R 启动中描述的其他操作 [ [http://stat.ethz .ch/R-manual/R-patched/library/base/html/Startup.html](http://stat.ethz.ch/R-manual/R-patched/library/base/html/Startup.html) ]"（与 相同`?Rprofile`）。看不看都是模棱两可的`Rprofile.site`。

**编辑#2**：根据下面的评论，它确实适用于最新版本的 Rstudio。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-24T15:15:15.643

有一个名为 .Rprofile 的文件，它只是一个脚本，每次启动 R 的新会话时都会运行。

你需要做的就是添加`library(package)`它。如果您使用的是 Unix，它可能作为隐藏文件位于您的主文件夹中。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-05T13:07:27.800

[关于自定义 R 启动的 Quick-R 页面](http://www.statmethods.net/interface/customizing.html)包含的信息与 Ben 和 Joao 的答案基本相同，但可能更清晰一些。`Rprofile.site`在您的主文件夹（Windows 上的文档）中创建具有所需更改的文件副本并调用它`.Rprofile`

**编辑：**我注意到 R 3.0.0 不再从 Documents 文件夹中查找，而是在 Windows 7 下使用用户的主目录（用户名）。但这可能是一个安装问题（即我碰巧“错误地”安装了 R之前）。但是，此答案中链接的 Quick-R 页面告诉了这样做的正确方法。如果其他人遇到这个问题，解决方案是复制`.Rprofile`到用户的主目录。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-02-22T23:31:27.327

快速的回答是，您应该按照每个人的建议将您的 R 包放入`.Rprofile`文件中。

但是请注意，R 将读取此文件，**然后加载 R 基础包**。从[?Startup](http://stat.ethz.ch/R-manual/R-patched/library/base/html/Startup.html)看：

> 请注意，当获取站点和用户配置文件时，仅加载基本包，

如果您要加载的包增强/覆盖某些 R 基本函数，这可能会导致问题。例如，请参见 tidyverse::filter：[https ://github.com/tidyverse/dplyr/issues/1611](https://github.com/tidyverse/dplyr/issues/1611)

到目前为止，我可以看到两种解决方案：

1.  `.First.sys()`在文件的第一行使用`.Rprofile`：这是通常在读取 .Rprofile 后运行的命令，用于加载 .Rprofile 中的包`getOption("defaultPackages")`。

2.  更新选项*defaultPackages*：不要`library()`在你的 .Rprofile 中使用，而是类似的东西。

    ```
    old <- getOption("defaultPackages")
    options(defaultPackages = c(old, "tidyverse")) 
    ```

# java - 在静态函数中调用“新”调用与在实例方法中调用“新”调用相比

> ID：10300770
> 
> 赞同：-1
> 
> 时间：2012-04-24T15:10:06.143
> 
> 标签：java, new-operator

是一样的吗？还是静态函数中的 new 分配方式与实例方法中的分配方式不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T15:12:59.057

不，效果是一样的。从静态和非静态方法范围分配没有区别。如果您正在考虑在堆栈上分配与在堆上分配（如在 C/C++ 中），那么这种差异在 Java 中并不那么突出，并且不受您从哪里调用`new`的影响。默认情况下，每次使用 时`new`，都会在堆上分配一个对象——在现代 JVM（Java6 及更高版本）中存在一些异常，这是由[*逃逸分析*](http://en.wikipedia.org/wiki/Escape_analysis)等优化引起的（如果它是线程和局部范围受限）。但是，局部原始变量和引用总是被压入堆栈。

# matlab - 如果行包含在矩阵 B 中，则从矩阵 A 中删除行

> ID：10300776
> 
> 赞同：1
> 
> 时间：2012-04-24T15:10:22.643
> 
> 标签：matlab, matrix

我有一个矩阵，比如说`A = perms([1 2 3 4])`。我有另一个矩阵，比如说`B = [1 2 3 4; 4 3 1 2; 2 4 3 1]`。如何从中删除行`[1 2 3 4]`，`[4 3 1 2]`和`[2 4 3 1]`（即行`B`）`A`？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:34:04.740

This solution maintains the row order:

```
A(find(ismember(A, B, 'rows')),:) = []; 
```

# sql - 使用通配符从不同表中选择同名列

> ID：10300783
> 
> 赞同：0
> 
> 时间：2012-04-24T15:10:36.323
> 
> 标签：sql, sql-server, sql-server-2005

我有多个表（名称略有不同），列名相同，我加入了许多其他唯一表。然后我使用 Case 从这些表中选择数据以省略空值：

例如`CASE WHEN x IS NULL THEN y ELSE x`等等等等。

但是我担心我的查询速度很慢，因为我必须包含大量的案例功能。每次我们的表单发生变化时，都会生成该表单表的新副本，对于历史报告，我必须查询每个副本以将相关数据获取到每个“组”列的单个列中。我还有一个存储所有表的名称（和 ID）的表，并且想知道是否可以使用通配符来查询该表以自动查询所有历史表。由于所有列标题都相同，我希望使用如下子查询：

```
SELECT x, y, x FROM (
    SELECT form_name FROM table_of_table_names
        WHERE form_name LIKE '%mytypeofform%' 
```

然后我可以正常加入这些数据，但显然上述方法不起作用。这也可以避免我在每次发生更改时都编辑我的查询。可能是我想要实现的并不比我的完整外部连接和多个案例函数快，但是每次我添加一个额外的案例函数时，报告的运行速度似乎要慢得多。我被告知我应该使用动态 SQL，但对此经验很少。谢谢！

附加信息：

```
SELECT DISTINCT 

FLODS_CASE_ENQUIRY_F00.CASE_ENQUIRY_ID AS 'Case ID', FLODS_CLASSIFICATION_D00.TYPE AS 'Type', 
CASE WHEN FLODS_101000385_SPECIAL_UP_C00.PAYMENTSTATUS IS NULL THEN (CASE WHEN FLODS_101000386_SPECIAL_UP_C00.PAYMENTSTATUS IS NULL 
                      THEN (CASE WHEN FLODS_101000488_SPECIAL_UP_C00.PAYMENTSTATUS IS NULL 
                      THEN (CASE WHEN FLODS_101000489_SPECIAL_UP_C00.PAYMENTSTATUS IS NULL 
                      THEN (CASE WHEN FLODS_101000508_SPECIAL_UP_C00.PAYMENTSTATUS IS NULL 
                      THEN (CASE WHEN FLODS_101000509_SPECIAL_UP_C00.PAYMENTSTATUS IS NULL 
                      THEN (CASE WHEN FLODS_101000511_SPECIAL_UP_C00.PAYMENTSTATUS IS NULL 
                      THEN (CASE WHEN FLODS_101000512_SPECIAL_UP_C00.PAYMENTSTATUS IS NULL 
                      THEN 'No Payment Status' ELSE FLODS_101000512_SPECIAL_UP_C00.PAYMENTSTATUS END) ELSE FLODS_101000511_SPECIAL_UP_C00.PAYMENTSTATUS END) 
                      ELSE FLODS_101000509_SPECIAL_UP_C00.PAYMENTSTATUS END) ELSE FLODS_101000508_SPECIAL_UP_C00.PAYMENTSTATUS END) 
                      ELSE FLODS_101000489_SPECIAL_UP_C00.PAYMENTSTATUS END) ELSE FLODS_101000488_SPECIAL_UP_C00.PAYMENTSTATUS END) 
                      ELSE FLODS_101000386_SPECIAL_UP_C00.PAYMENTSTATUS END) ELSE FLODS_101000385_SPECIAL_UP_C00.PAYMENTSTATUS END AS 'Payment Status', 
<more columns inc. a couple more columns using similar case functions> 

FROM   FLODS_101000489_SPECIAL_UP_C00 FULL OUTER JOIN
                      FLODS_101000488_SPECIAL_UP_C00 FULL OUTER JOIN
                      FLODS_101000509_SPECIAL_UP_C00 FULL OUTER JOIN
                      FLODS_101000511_SPECIAL_UP_C00 full outer JOIN
                      FLODS_CASE_ENQUIRY_F00 ON FLODS_101000511_SPECIAL_UP_C00.CASE_ENQUIRY_ID = FLODS_CASE_ENQUIRY_F00.CASE_ENQUIRY_ID full outer JOIN
                      FLODS_101000512_SPECIAL_UP_C00 ON 
                      FLODS_CASE_ENQUIRY_F00.CASE_ENQUIRY_ID = FLODS_101000512_SPECIAL_UP_C00.CASE_ENQUIRY_ID FULL OUTER JOIN 
```

等等等等

如果这有帮助，我可以从：INFORMATION_SCHEMA.COLUMNS 中选择表名和列名。我不维护这些表。干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T16:27:40.423

好的，我想我了解您在做什么以及为什么要这样做。这不是一个好的情况，无论你做什么，性能都会很差，但是由于你无法控制环境，我们必须弄清楚如何使用我们拥有的东西。

我有一些改进建议。第一个是使用[COALESCE](http://msdn.microsoft.com/en-us/library/ms190349%28v=sql.90%29.aspx)语句。这将返回第一个非空值。您可以用以下内容替换您的案例陈述：

```
COALESCE(value1, value2, value3, 'no value') 
```

这将返回第一个非空值。最后一个选项是作为最后手段返回的字符串。我相信您的字符串是“无付款状态”。

第二种选择是将此逻辑放入 UDF。然后，您可以调用 UDF 来获取您想要的值。这将所有这些逻辑抽象出来并使其更清晰。它本身不会更高效，但会更整洁。

第三个选项是创建某种临时表，您可以根据表中更改的数据对其进行更新。您可以将折叠的数据存储在一张大表中。我不确定这是否适合您，但它可能会通过执行一次而不是每次运行查询来提高性能。

# clickonce - 防止 clickonce 更新破坏现有的用户连接字符串

> ID：10300784
> 
> 赞同：1
> 
> 时间：2012-04-24T15:10:36.857
> 
> 标签：clickonce

我有一个当前问题，我的 clickonce 应用程序的更新弄乱了连接字符串。这主要发生在我对备份盒进行更新然后第一次在生产盒上运行它时（在备份盒测试之后）。我的 clickonce 应用程序看到从备份服务器托管的更新并将其拉下，在此过程中覆盖了良好的 IP。

对用户来说，一切仍在工作，但实际上他们正在查看测试数据库。

我正在阅读，看来如果我将连接字符串移动到“用户”设置，我可以让它保持现有值。这仅在我现有的值显然是非默认值时才有效。

因此，为了保留现有的用户连接字符串，我需要设置一个我无法在客户端计算机上使用的项目设置默认值，从而强制我在最初部署应用程序后对其进行修改？

通过这样做，我会通过更新过程的检查并保留我的用户配置值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T17:42:21.033

我认为您可以通过在用户应用程序数据文件夹中的配置文件中设置连接字符串来解决此问题。当应用程序启动时，检查资源是否存在。如果没有，请使用默认值创建它，然后通过您的应用程序设置更改。应用更改后，将其保存到资源中，每次用户启动他的应用程序时，它应该加载相同的资源。

要获取可安全单击一次的特定于用户的应用程序数据文件夹，请获取以下文件夹路径以保存配置资源文件。

```
string appDataPath = 
    Path.Combine(
        Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData,
        "[Company or App Name]")); 
```

这将为您提供一条可用于在最终用户机器上读取和写入数据的路径。此文件夹中的数据不会被每个部署覆盖，并且文件夹位置也不会像应用程序的部署文件夹那样被混淆。

如果这不能回答您的问题，请在评论中提出更多问题。我将更新此答案以反映您的需求的性质。

# pdf - PDF表格提取

> ID：10300786
> 
> 赞同：12
> 
> 时间：2012-04-24T15:10:40.370
> 
> 标签：pdf, pdfbox, extraction

我有（相同的）数据保存为 GIF 图像文件和 PDF 文件，我想将其解析为 HTML 或 XML。数据实际上是我大学食堂的菜单。这意味着每周都会解析一个新版本的文件！通常，这些文件包含一些页眉和页脚文本，以及一个充满其他数据的表格。我已经阅读了一些关于 stackoverflow 的帖子，并且我也开始尝试将表格数据解析为 HTML/XML：

PDF格式

*   PDFBox || iText (Java)
*   谷歌文档导入
*   PDF2HTML || PDF2表格

动图

*   正方体-OCR

我从使用 PDFBox 解析 PDF 文件中得到了最好的结果，但仍然（随着菜单每周更改），它还不够可靠。我收到的 HTML 有时包含更多，有时更少的“段落”（`<p>`），因此我无法足够精确地解析数据。

这就是为什么我想知道是否有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-29T14:50:05.550

[Tabula](http://tabula.nerdpower.org/)是 JRuby Web 界面上一个很好的开始，用于从任意 PDF 中提取 CSV/TSV 表。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-04-12T10:41:56.843

我已经实现了自己的算法（它的名字是`traprange`）来解析 pdf 文件中的表格数据。

以下是一些示例 pdf 文件和结果：

1.  输入文件：[sample-1.pdf](https://github.com/thoqbk/traprange/blob/master/_Docs/sample-1.pdf)，结果：[sample-1.html](http://htmlpreview.github.io/?https://github.com/thoqbk/traprange/blob/master/_Docs/result/sample-1.html)
2.  输入文件：[sample-4.pdf](https://github.com/thoqbk/traprange/blob/master/_Docs/sample-4.pdf)，结果：[sample-4.html](http://htmlpreview.github.io/?https://github.com/thoqbk/traprange/blob/master/_Docs/result/sample-4.html)

[在traprange](https://github.com/thoqbk/traprange)访问我的项目页面

或我在[traprange的文章](http://www.dzone.com/articles/traprange-method-extract-table)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-11-21T11:39:24.833

您可以使用 Camelot 从 PDF 中提取表格并将其导出为 HTML 文件。还支持 CSV、Excel 和 JSON。您可以在以下位置查看文档：[http](http://camelot-py.readthedocs.io) ://camelot-py.readthedocs.io 。与其他开源表格提取工具和库相比，它提供了更准确的结果。这是一个[比较](https://github.com/socialcopsdev/camelot/wiki/Comparison-with-other-PDF-Table-Extraction-libraries-and-tools)。

您可以使用以下代码片段继续您的任务：

```
>>> import camelot
>>> tables = camelot.read_pdf('file.pdf')
>>> type(tables[0].df)
<class 'pandas.core.frame.DataFrame'>
>>> tables[0].to_html('file.html') 
```

免责声明：我是图书馆的作者。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-02-24T12:06:42.843

如果您希望每周从表格中提取一次数据并且您使用的是 Windows，请查看此免费软件 pdf 实用程序，其中包括自动表格检测和表格到 CSV、XML 转换：[PDF 查看器实用程序](https://bytescout.com/products/enduser/misc/pdfviewer.html)。

该实用程序对于非开发人员的商业和非商业用途都是免费的（对于希望通过 API 自动化的开发人员，有单独的版本）。

*免责声明：我为 ByteScout 工作*

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-01T18:51:21.720

我已经尝试了许多 OCR 和文本转换器软件，尽管我相信曾经应该编写程序将 PDF 自我转换为文本，因为执行任务的人可以更好地理解图像。

我还尝试过使用谷歌和许多其他公司的在线（大约 900 个网站）和离线（大约 1000 个软件）产品。如果您想从任何方法中提取文本，例如 OCR 或 PDF 中的文本，那么我发现的最准确的程序是[PDFTOHTML](http://sourceforge.net/projects/pdftohtml)。[PDFTOHTML](http://sourceforge.net/projects/pdftohtml)的准确率约为 98%，Google Online 的准确率约为 94%。这是一个非常好的软件，它还为您提供正确的文本格式，即文本的粗体、斜体等。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-03-27T12:41:05.040

for major templates **Tabula** is the best option for open source while **Abbyy PDF** editor is a great solution for enterprise-level pdf data extraction and modification. Abbyy works on OCR.

Tabula have two option for auto table detection and another is manually by providing coordinates.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-03T09:41:58.120

桌子每次都在同一个地方吗？如果您可以找到每个框的尺寸，您可以使用工具将 PDF 拆分为多个文档，每个文档包含一个框，之后您可以使用任何您想要将每个较小的 PDF 转换为 HTML 的工具（例如其他答案中提到的工具）。随机谷歌搜索拉出了[PyPdf](http://pybrary.net/pyPdf/)，看起来它可能有一些有用的功能。

如果您无法对框的大小进行硬编码（或想将问题应用于不同格式的多个菜单），对我来说显而易见的方法（我说很明显，不容易）将是边缘检测以找到表格的边框将是，然后应用我之前谈到的拆分。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-13T15:41:11.347

我最近遇到了类似的问题。

我发现的另一种解决方案是在 Adob​​e 中打开 PDF 文档并将其导出为 xml。至少在我的 PDF 中，它保留了表格信息，然后我能够以编程方式使用 XML 生成表格文件，如 excel 等。

我遇到的另一个问题是 Adob​​e 一次只允许您导出一个文件，而我有很多文件。幸运的是，Adobe 也有合并功能。我最终将所有文件合并在一起，然后将它们导出为一个大的 XML 文件，并使用该文件生成我需要的文件。

# c# - 使用 C# 的 IE 的 Cookie 为空，但对于 Firefox 则不是

> ID：10300789
> 
> 赞同：0
> 
> 时间：2012-04-24T15:10:58.243
> 
> 标签：c#, asp.net, .net

有时我用 C# 和 ASP 编写了一个应用程序，现在我做了一个与 cookie 无关的小改动，它不是为 IE 创建 cookie，而是为 Firefox 创建它们。

从我的 login.aspx：

```
 HttpCookie cLevel = new HttpCookie("Level");
            cLevel.Value = consulta.retornarNivel(Login2.UserName, Login2.Password).ToString();
            cNivel.Expires = DateTime.Now.AddMinutes(30);
            cNivel.Domain = Request.Url.Host.ToString();
            HttpCookie cUser = new HttpCookie("User");
            cUser.Value = Login2.UserName;
            cUser.Expires = DateTime.Now.AddMinutes(30);
            cUser.Domain = Request.Url.Host.ToString();

            //create cookies..
            Response.Cookies.Add(cLevel);
            Response.Cookies.Add(cUser);

            //redirect to Services
            Response.Redirect("Services.aspx"); 
```

现在对于我的 Services.aspx，在我的 page_load 上我有这一行：

```
 lbWelcome.Text = "Welcome" + Server.HtmlEncode(Request.Cookies["User"].Value); 
```

IE 上的这一行给了我：对象引用未设置为对象的实例。在 Firefox 上，它可以完美解析。

什么可能会影响我的 FF 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:34:10.827

Seting the cookies with the server's time is the worst way. if client got the different time, What do you think it will happen.

# ios - 带有静态库的 iOS 应用程序总是在启动 Ad Hoc 存档构建时崩溃。无法在 Xcode 调试器中重现

> ID：10300800
> 
> 赞同：11
> 
> 时间：2012-04-24T15:11:48.243
> 
> 标签：ios, xcode, static-libraries

我们有一个使用静态库构建的应用程序，我们也在构建用于分发。App 和 Lib 在 Xcode 调试器中或通过 Xcode 调试会话加载到设备时运行良好。一旦我们将 Ad Hoc Archive 构建到设备上，应用程序总是会崩溃。控制台日志语句表明它在 Lib 代码中崩溃，但崩溃报告不代表 Lib 代码。

*   无法在 Xcode 模拟器中重现。
*   Guard malloc，Guard Edges 什么都不显示（但这些只在模拟器中运行）。
*   无泄漏
*   使用 Xcode 4.3.2
*   应用面向 4.3 或更高版本。
*   Lib 针对 3.0 或更高版本。
*   其他链接器标志 = -ObjC
*   Lib 在目标“将二进制文件与库链接”中设置为“可选”
*   拇指支持关闭（使用 LLVM）

在控制台上看到 2 个可能有用的异常，但到目前为止没有在网上打开任何对此有很大帮助的东西：

```
Application 'x' exited abnormally with signal 12: Bad system call: 12 (mostly)
Application 'x' exited abnormally with signal 12: Bad system call: 11 (rarely) 
```

我们在其他地方看到了带有递归的静态库有问题的评论。但是我们的 Lib 中没有任何递归。

难倒，需要更多的想法。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-24T16:26:38.520

**弄清楚了！！**在桌子上敲了 4 天之后。我们不确切知道它为什么起作用，但确实如此。如果它对其他人有帮助，这里是为我们解决它的设置。在静态库项目的构建设置的“部署”部分中设置这些：

```
SET "STRIP LINKED PRODUCT" (STRIP_INSTALLED_PRODUCT) = NO
SET "STRIP STYLE" = DEBUGGING SYMBOLS. 
```

我们通过反复试验发现了这一点，但现在注意到一些在线讨论重新设置用于构建 iOS 静态库的 Xcode 项目使用此设置。没有讨论为什么，但确实如此。

如果有人对为什么这些 lib 设置修复它有任何想法，您可能想在此处发表评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:24:09.417

我遇到了类似的问题并尝试更改项目构建设置，但它对我不起作用。最终通过更改版本的编译器优化级别设置解决了我的问题：

在构建设置中，转到 LLVM 编译器 4.2 - 代码生成部分，查找优化级别选项并将发布设置从最快、最小 [-Os] 更改为无 [-O0]。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T15:28:42.530

AdHoc (Release) 和 Debug 之间的构建设置不同的可能性非常高。您是否仔细检查了所有构建设置值？尤其是看看 ​​ARC（自动引用计数）设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T16:25:54.497

调试，通过使用 Xcode 调试器加载您的生产版本（可能设置为发布版本，其优化和代码生成设置与您当前正在测试的调试版本非常不同）。

# .net - 使用 c# 2005 加载电影时 Quicktime 出错

> ID：10300806
> 
> 赞同：1
> 
> 时间：2012-04-24T15:12:24.897
> 
> 标签：.net, quicktime

我有一个程序可以从队列中播放视频“.mov”。如果队列中没有视频，则重新加载“吸引循环”视频。我正在使用电影结束时触发的事件处理程序“qtEventMovieDidEnd”。此事件处理程序在触发时询问队列中是否有任何电影，如果没有，它会重新加载吸引循环文件并应该播放它。我的问题是，当事件在电影结束时触发时，它会尝试重新加载文件并抛出错误“System.Windows.Forms.dll 中发生'System.AccessViolationException'类型的未处理异常”。我可以删除事件处理程序并使用按钮单击事件手动加载任何电影并以这种方式加载它，当我这样做时它工作得很好。该错误将 Visual Studio .net 2005 发送到我的“program.cs”文件并退出。
为什么事件处理程序会抛出错误，但是当我手动加载电影时效果很好？
我的代码中的方法：

```
private void addMovieEventListeners(QTMovie myMovie)
{
    // Make sure a movie is loaded first
    if (myMovie == null)return;
    myMovie.EventListeners.Add(QTOLibrary.QTEventClassesEnum.qtEventClassStateChange,
        QTEventIDsEnum.qtEventMovieDidEnd, null, null);
}

public void PlayMovie(string movie)
{
    axQTControl1.URL = movie;
    addMovieEventListeners(axQTControl1.Movie);
    axQTControl1.Movie.Play(1.0);
    frm1.lblMoviePlaying.Text = axQTControl1.Movie.URL;
}

private void axQTControl1_QTEvent(object sender, _IQTControlEvents_QTEventEvent e)
{
    if (e.eventID == (int)QTEventIDsEnum.qtEventMovieDidEnd)
    {
        axQTControl1.Movie.EventListeners.RemoveAll();
        //MessageBox.Show("Movie Ended");
        PlayMovie(@"C:\AttractLoop\AttractLoop.mov");
    }
} 
```

# actionscript-3 - 扩展装载机

> ID：10300821
> 
> 赞同：1
> 
> 时间：2012-04-24T15:13:04.250
> 
> 标签：actionscript-3, extending-classes

我正在尝试扩展 Loader 类。

我想在上面存储一个变量。

例子：

```
package
{
import flash.display.Loader;

public class MyLoader extends Loader
{
    private var _typeOfGallery:String

    public function MyLoader()
    {
        super()
    }

    public function set typeOfGallery(value:String):void
    {
        _typeOfGallery = value
    }

    public function get typeOfGallery():String
    {
        return _typeOfGallery
    }
}

} 
```

然后我像这样使用：

```
var loader:MyLoader = new MyLoader()
loader.typeOfGallery = 'games'
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, loaded)

function loaded(e:Event):void{
trace(e.target.typeOfGallery)
} 
```

我收到此错误：

ReferenceError：错误 #1069：在 flash.display.LoaderInfo 中找不到属性 typeOfGallery 并且没有模式值。

（我已将错误消息从葡萄牙语翻译成英语）

如何扩展 Loader，以免收到此错误？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T15:15:47.497

`Loader`不分派`Event.COMPLETE`事件。你应该听

```
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, loaded) 
```

然后得到你`MyLoader`的

```
function loaded(e:Event):void{
   trace(((e.currentTarget as LoaderInfo).loader as MyLoader).typeOfGallery);
} 
```

在您的代码中，`e.target`是`LoaderInfo`因为`COMPLETE`事件冒泡到`Loader`自身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:50:21.300

```
loader.contentLoaderInfo.typeOfGallery = 'games' 
```

是错误的 - 你想去加载器而不是它的 contentLoaderInfo...

```
loader.typeOfGallery = 'games' 
```

trace(e.target.typeOfGallery) 应该可以工作，因为它是对加载器的引用！

# vsto - 别名类在 OpenXML Sdk 中不可用

> ID：10300822
> 
> 赞同：1
> 
> 时间：2012-04-24T15:13:04.563
> 
> 标签：vsto, openxml-sdk

我正在尝试 OpenXML 并从这里下载示例代码 [http://blogs.msdn.com/b/brian_jones/archive/2010/02/26/open-xml-sdk-office-services-better-together.aspx](http://blogs.msdn.com/b/brian_jones/archive/2010/02/26/open-xml-sdk-office-services-better-together.aspx)

代码不是为我构建的。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T15:15:05.657

使用[SdtAlias](http://msdn.microsoft.com/en-us/library/documentformat.openxml.wordprocessing.sdtalias.aspx)

# facebook - facebook 评论框，如何使其与 URL 重写一起正常工作？

> ID：10300824
> 
> 赞同：1
> 
> 时间：2012-04-24T15:13:16.700
> 
> 标签：facebook, url-rewriting, facebook-comments

我将 facebook 评论框添加到使用 url 重写的网站上的 php 产品页面。

每个产品页面都有不同的 url，例如：

```
www.mysite.com/product_info.php=product1
www.mysite.com/product_info.php=product2
www.mysite.com/product_info.php=product3 and so on 
```

添加到 product_info.php 的注释框代码为：

```
<div class="fb-comments"  data-href="<?php echo HTTP_SERVER . $_SERVER['REQUEST_URI']; ?>" data-num-posts="20" data-width="660" data-colorscheme="dark" style="padding-left:10px;"></div>

<?php echo HTTP_SERVER . $_SERVER['REQUEST_URI']; ?> 
```

确保将正确的 url 发布到 facebook 评论审核工具。

我在我的客户 facebook 业务页面上创建了一个 iframe 应用程序，并将评论插件放在那里。

如何在客户 Facebook 业务页面上显示从网站到 iframe 应用程序的评论？我不能使用静态网址，因为产品页面上的每个网址都不同。

# c# - 如何将gridview中的货币四舍五入为有效数字？

> ID：10300831
> 
> 赞同：2
> 
> 时间：2012-04-24T15:13:48.073
> 
> 标签：c#, jquery, asp.net, gridview, currency

我有一个从 SQL 表中提取的 gridview，它包含不同的美元数字。它们有数千、数百万或数十亿。我目前正在使用 {0:c0} 但我有兴趣将其缩小，以便仅显示三个有效数字。

例如，我希望 $3,411,216,512.07 显示为 $3.41B；而 1,066,555.54 美元将显示为 107 万美元。

在 ASP.NET 中是否有一种简单的方法可以做到这一点，或者我需要打破 jQuery 吗？或者，我应该在 C# OnRowDataBound 中执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T15:17:43.847

您可以将数字转换为字符串，获取前四个字符 - 假设是没有单位、逗号等的纯数字 - 将其转换回数字，将其四舍五入，然后计算原始字符串的长度以决定在哪里放置小数点以及标记它的内容，无论是 B、M、K 等。我建议在服务器端进行操作，除非您想在浏览器中进行操作，否则我认为没有意义它以某种方式交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:34:53.680

我会在 OnRowDataBound 中完成。检查你的数字是否大于 10 亿，除以 10 亿，string.format 末尾的“B”和前面的货币符号然后返回。检查数字是否大于一百万......等

您可能可以编写一个算法来动态处理它，但由于这是金钱，而且它可能仅限于数万亿美元，因此手动操作应该会快得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T15:40:04.003

```
 if(n>999999)
    {
    string number = Convert.ToString(n.slice[0,3]) + "M";
    ... 
//> (apply it to your datatable and then show it (in datagridview if that's
//> what you're using)
    }
   else if (n>...) 
```

对于超过十亿等的情况重复此操作，但仍然需要检查逗号的位置。我不知道该怎么做。这就是您可以根据需要获得前 3 个数字并应用“B”或“M”的方法。

# sockets - 插座建议

> ID：10300832
> 
> 赞同：0
> 
> 时间：2012-04-24T15:13:48.350
> 
> 标签：sockets, tcp, client-server, frontend

现在我正在设计一个架构，它有一个中间层为前端客户端提供服务。输入的数据并不复杂，可能是几行逗号分隔的数据。但是，我需要客户端每秒获取此数据。可以通过向中间层服务器发送一个简单的 tcp 消息来获取数据。

问题是我需要它在包括 IE 8 在内的所有浏览器中工作。有没有人对如何制作一个可以每秒获取这些数据并在现代浏览器中显示的轻量级前端有任何建议？我知道浏览器现在有网络套接字，但 IE 8 没有，所以那种把它们排除在外。我一直在研究 Comet、node.js/socket.io，或者可能是 Ruby/Rails 应用程序？我有点迷失在这里，所以任何建议都会很棒。谢谢

# c# - 在 MVC 中生成完整的 URL？

> ID：10300833
> 
> 赞同：9
> 
> 时间：2012-04-24T15:13:50.363
> 
> 标签：c#, asp.net-mvc

> **可能重复：**
> [如何在 ASP.NET MVC 中找到操作的绝对 url？](https://stackoverflow.com/questions/434604/how-to-i-find-the-absolute-url-of-an-action-in-asp-net-mvc)
> [Asp MVC Action 链接绝对网址](https://stackoverflow.com/questions/3864043/asp-mvc-action-link-absolute-url)

**你好，**

有没有一种简单的方法可以为特定操作生成完整的 URL？我试过这个：

```
urlHelper.Action("Action", "Controller") 
```

但这确实会生成一个“\”。

**最好的祝福**

**编辑1：**我试过这个：

```
urlHelper.Action("List", "Ad", null, "http"); 
```

但它只返回：localhost:16055。我期待像 localhost:16055/Ad/List 这样的东西？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-24T15:23:43.980

使用 Html.ActionLink("Link Title", "Action", "Controller")

要生成完整链接，请使用：

```
@Html.ActionLink("Link Title", "Action", "Controller", "http", "www.mysampledomain.com", 
                 "_blank", new {id = paramValue}, new { @class="someClass" }) 
```

那是具有您可以指定的所有参数的扩展重载。看看这篇 MSDN 文章[http://msdn.microsoft.com/en-us/library/dd492938.aspx](http://msdn.microsoft.com/en-us/library/dd492938.aspx)

要从 Controller 生成，请使用以下代码：

```
var url = UrlHelper.GenerateUrl(null, "MyAction", "MyController", "http", "www.mydomain.com", String.Empty, null, RouteTable.Routes, this.ControllerContext.RequestContext, false); 
```

url 变量将包含您的 URL 的字符串表示形式。您可以将其存储在 ViewBag 中，例如：

```
ViewBag.MyUrl = UrlHelper.GenerateUrl(null, "MyAction", "MyController", "http", "www.mydomain.com", String.Empty, null, RouteTable.Routes,
                                        this.ControllerContext.RequestContext, false); 
```

从视图将其称为：

```
@ViewBag.MyUrl 
```

应该是这样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:36:54.037

Url.action 生成一个相对的 url。要生成绝对 url，您可以查看以下内容：[如何在 ASP.NET MVC 中找到操作的绝对 url？](https://stackoverflow.com/questions/434604/how-to-i-find-the-absolute-url-of-an-action-in-asp-net-mvc#autocomment13256347)

# twitter - 如何在推特中找到与另一个人“相似”的人

> ID：10300834
> 
> 赞同：1
> 
> 时间：2012-04-24T15:13:51.973
> 
> 标签：twitter

如何在 twitter 中找到与某个已知人（在工作/公司/其他方面）相似的人，例如 twitter 给出了这个 [https://twitter.com/#!/similar_to/brianmadden](https://twitter.com/#!/similar_to/brianmadden)

谁能建议一些api来获得这个结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T15:19:58.683

我认为 Twitter 不会在他们的 API 中公开那些特定的功能。[您可以在 Twitter API 文档站点上](https://dev.twitter.com/docs/api)查看所有支持的方法。

# vim - 在 vim 中编辑时出现过多的 inotify 事件

> ID：10300835
> 
> 赞同：9
> 
> 时间：2012-04-24T15:13:52.587
> 
> 标签：vim, inotify

我正在尝试`inotifywait`用于监视特定文件夹并在需要时重新编译。问题是我大量使用 vim，当我在 vim 中编辑时，任何修改的文件实际上都会触发一些“冗余”事件，例如：

```
:w
sass/somefolder/ CREATE 4913
sass/somefolder/ CREATE some
sass/somefolder/ MODIFY some 
```

我花了一些时间才意识到实际上一切都很好`inotifywait`- 我已经尝试使用`nano`并且一切都按预期工作，只有“修改”被触发，而且只有一次。

我尝试编辑（仅出于测试目的，不要对我做出严厉的评判）Emacs 并且 Emacs 也存在问题 - 每次我按 Ctrl-X + Ctrl+S 修改触发器 3 次。

问题是如何解决 vim 中多余事件的问题？

顺便说一句，`directory`我`backupdir`不在`.vimrc`被监控的文件夹中。

UPD：[这个链接解释了](https://bugzilla.redhat.com/show_bug.cgi?id=427711)为什么事情实际上是这样发生的，但我仍然不知道如何解决这个问题。好吧，当然我可以忽略包含字符串的 4913，但是即使对于尝试使用 inotify 编译 SASS 的人来说，这也太笨拙了）））

UPD：VIM 版本是 7.3.429

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T15:17:08.540

如果您希望在编辑文件后触发一个操作（例如重新编译代码），您通常希望查看该`IN_CLOSE_WRITE`事件并忽略其他所有内容。

您绝对*不想*监视`IN_MODIFY`事件，因为正如您所发现的，在编辑文件时可能会多次触发它们。

所以：

```
inotifywait -e close_write ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T16:28:32.467

更好的编辑器这样做是为了强制执行原子性。换句话说，如果电源在错误的时刻停止，您将不会得到一个写一半的文件。

可能有帮助的一种选择是仅使用[autocmd BufWritePost](https://stackoverflow.com/questions/4627701/vim-how-to-execute-automatically-execute-a-shell-command-after-saving-a-file)进行重新编译。

但是，如果您在 vim 之外进行其他更改，您可能希望等待多个通知并在一段时间内没有发生任何通知后进行编译，比如半秒。例如，这将涵盖其他突发事件，例如进行源代码控制拉取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-27T21:38:09.930

大多数编辑器会在您提交和保存之前使用临时文件来写入撤消信息或文件编辑。此外，大多数编辑器需要写入临时文件才能与子 shell 和脚本对话。我怀疑 4913 文件可能是您的 vim 设置的一个因素，或者您的数字用户 ID 的函数，以使文件唯一化。

您可以使用 strace vim 来查看文件何时更新以及任何一方发生了什么，例如 fork + exec，或者触摸了另一个文件，这可能暗示哪个宏或工具导致了这种情况。

# iphone - 删除字符串后的uitextfield文本长度

> ID：10300836
> 
> 赞同：0
> 
> 时间：2012-04-24T15:13:57.087
> 
> 标签：iphone, uitextfield

我遇到了一个问题，我正在跟踪用户输入的字符并且它工作正常，但是当用户删除文本字段中的整个消息并且文本字段变为空时，它给出文本字段文本长度 = 1。它应该是 0 ，我我没有得到这一切。任何帮助

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

    if (textField ==  textfield1)
    {

        NSLog(@"%d",textfield1.text.length);
        NSInteger charleft = (100 - textfield1.text.length);
        NSLog(@"The Characters left are %d",charleft);
        while(!(charleft<0))
        {

            NSString *Charlength= [NSString stringWithFormat:@"%d",charleft];    
            Charcount.text= [ Charlength stringByAppendingFormat:@" Characters left"];
            return YES;

        }

        return NO;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:41:20.807

```
int maxChars = 100;
    int charsLeft = maxChars - [textField.text length];

    if(charsLeft == 0) {
        UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"No more characters"
                                                         message:[NSString stringWithFormat:@"You have reached the character limit of %d.",maxChars]
                                                        delegate:nil
                                               cancelButtonTitle:@"Ok"
                                               otherButtonTitles:nil];
        [alert show];
        [alert release];
    }
    NSString *chrstr = [NSString stringWithFormat:@"%d characters remaining.",charsLeft];
    Charcount.text=chrstr;//
 NSLog(@"%@",chrstr;
}, 
```

它解决了我的问题，我使用 editind changed 选项将我的 uitextfield 与此操作连接起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:51:13.463

您在`charleft`处理当前击键之前进行计算，因此 in 的值`Charlength.text`将是处理当前击键*之前*的值。如果要`Charlength`显示剩余字符，则需要在处理完击键后对其进行更新。

您应该在这里注意另一个副作用：您没有将退格与常规字符插入区分开来。一旦超过 100 个字符的阈值（现在真的是 101 个，因为我描述的错误），您将永远不会处理另一个字符，包括退格/删除。这意味着一旦您的用户超过阈值，他们就会被卡住，因为他们将无法删除角色。（试试看）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-24T18:36:39.727

您可能完全猜到了 \b 字符。

# doctrine - Doctrine 1.2 build-all-reload 销毁并只构建一个数据库

> ID：10300839
> 
> 赞同：1
> 
> 时间：2012-04-24T15:14:02.033
> 
> 标签：doctrine, command-line-interface, doctrine-1.2

我在我的项目中设置了两个不同的连接：第一个数据库用于新项目，第二个数据库用于获取旧数据并插入新数据库

我的应用程序.ini

```
; doctrine settings
doctrine.newdsn                = "mysql://user:password@localhost/newdb"
doctrine.olddsn           = "mysql://user:password@localhost/olddb"
doctrine.data_fixtures_path = APPLICATION_PATH "/../doctrine/data/fixtures/data.yml"
doctrine.sql_path           = APPLICATION_PATH "/../doctrine/data/sql"
doctrine.migrations_path    = APPLICATION_PATH "/../doctrine/migrations"
doctrine.yaml_schema_path   = APPLICATION_PATH "/../doctrine/schema"
doctrine.models_path        = APPLICATION_PATH "/models"
doctrine.generate_models_options.generateTableClasses = true
doctrine.generate_models_options.phpDocName = "My Name"
doctrine.generate_models_options.phpDocEmail = "myaddress@email.it" 
```

我的 Bootstrap.php

```
/**
 * initialize doctrine library
 * @return Doctrine_Connection
 */
protected function _initDoctrine()
{
    // retrieve options
    $doctrine = $this->getOption('doctrine');
    // push doctrine model autoloader
    $this->getApplication()->getAutoloader()->pushAutoloader(array('Doctrine_Core', 'autoload'));
    // push doctrine model autoloader
    $this->getApplication()->getAutoloader()->pushAutoloader(array('Doctrine_Core', 'modelsAutoload'));
    // setup doctrine attributes
    $manager = Doctrine_Manager::getInstance();
    $manager->setAttribute(Doctrine_Core::ATTR_AUTO_ACCESSOR_OVERRIDE, true);
    $manager->setAttribute(Doctrine_Core::ATTR_MODEL_LOADING, Doctrine_Core::MODEL_LOADING_CONSERVATIVE);
    $manager->setAttribute(Doctrine_Core::ATTR_AUTOLOAD_TABLE_CLASSES, true);
    $manager->setAttribute(Doctrine_Core::ATTR_QUOTE_IDENTIFIER, true);
    $manager->setAttribute(Doctrine_Core::ATTR_USE_NATIVE_ENUM, true);
    // set default encoding
    $manager->setCharset('utf8');
    $manager->setCollate('utf8_unicode_ci');
    // autoloading models
    Doctrine_Core::loadModels(APPLICATION_PATH . '/models');

    // creating connection
    $connOld = Doctrine_Manager::connection($doctrine['olddsn'], 'olddsn');
    Zend_Registry::set('olddsn', $connOld);
    $connNew = Doctrine_Manager::connection($doctrine['newdsn'], 'newdsn');
    Zend_Registry::set('newdsn', $connNew);

    return $connDoctrine;
} 
```

有了这些配置，就可以轻松地对两个数据库进行读写。我的问题在cli。如果我给出命令 build-all-reload，原则上不是破坏并重新创建新数据库的结构，它也会破坏我的旧数据库，这是我不想要的吗？

我该如何解决？

# android - Android的许多相对位置/堆栈的替代方案

> ID：10300842
> 
> 赞同：0
> 
> 时间：2012-04-24T15:14:26.993
> 
> 标签：android, layout

我必须将视图 A 放置在视图 B 的顶部，并将 B 放置在视图 C 的顶部。

在可见性更改（消失）或元素删除时必须表现得像堆栈。如果我删除 B，A 必须在 C 的顶部，如果我删除 C，B 到父级的底部，A 保持在 B 之上，如果我删除 B 和 C，A 到父级的底部。

![在此处输入图像描述](../Images/3fa040a33fad7f280205c34c3b75ec9e.png)

目前我有这个属性：

C：

```
android:id="@+id/C"
android:layout_alignParentBottom="true" 
```

乙：

```
android:id="@+id/B"
android:layout_above="@id/C"
android:layout_alignWithParentIfMissing="true" 
```

A：

```
android:layout_above="@id/B"
android:layout_alignWithParentIfMissing="true" 
```

但我需要类似“如果有 B，则在其上方对齐，如果没有，则在 C 的顶部对齐，如果不对齐父级的底部”。

有没有办法在没有嵌套布局的 XML 中解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:34:43.807

What you can do, instead of using RelativeLayout, is to use a LinearLayout with a fourth view with a layout_weight set to 1.

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <View
        android:id="@+id/spacer"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="#000000" />

    <View
        android:id="@+id/A"
        android:layout_width="fill_parent"
        android:layout_height="30dip"
        android:background="#FF0000" />

    <View
        android:id="@+id/B"
        android:layout_width="fill_parent"
        android:layout_height="30dip"
        android:background="#00FF00" />

    <View
        android:id="@+id/C"
        android:layout_width="fill_parent"
        android:layout_height="30dip"
        android:background="#0000FF" />

</LinearLayout> 
```

# objective-c - 如何将选定的表视图值发送回不同的视图？

> ID：10300843
> 
> 赞同：0
> 
> 时间：2012-04-24T15:14:31.677
> 
> 标签：objective-c, ios, cocoa-touch

我有一个按钮——按下时——加载一个表格视图。当用户选择一个表格视图单元格时，`didSelectRowAtIndexPath`将被调用。那时我希望表格视图关闭并且我之前打开的视图显示。我已经完成了所有这些。但是如何将选定的单元格文本获取到上一个视图的按钮标签？

目前我有一个单例数据存储（数据是静态的），它具有第一个视图控制器可以访问的“最后选择”值。didSelectRowAtIndexPath 设置得很好。但是之前的视图控制器是如何知道表格视图何时关闭的呢？而且，我怎样才能跟踪按下了哪个按钮，以便知道要更改哪个标签？

我有一种感觉，这甚至可能不是正确的方法 - 如果是这样，请指导我找到更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:22:56.787

当您将控制权返回给之前的视图控制器时，会调用 viewWillAppear 和 viewDidAppear。您可以使用其中一种方法来检查“最后选择”是否具有有效值。

作为一种替代方法，您可以让您的 didSelectRowAtIndexPath 捆绑前一个控制器所需的信息，并将其作为对象（或用户信息字典）发布一个 NSNotification。这样，您可以直接响应通知，而不必确定视图出现时是否有事可做。

编辑：刚刚阅读了您关于使用 addSubview 的评论，我想说，忘记我的 viewWillAppear/viewDidAppear 建议并使用 NSNotification。

# javascript - 是否可以在加载时轻推母版页中的 div？

> ID：10300845
> 
> 赞同：0
> 
> 时间：2012-04-24T15:14:43.033
> 
> 标签：javascript, jquery, asp.net, master-pages

我需要让一个页面获取母版页中的 div 并将其移到右侧 300px 处。这可能吗，怎么做？我认为它会是 javascript 或 jquery。TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T15:16:37.700

假设您可以获得 div （使用`document.getElementById()`or`getElementsByTagName()`甚至`document.querySelector()`），那么：

```
var elem = // some code to get the right div here
elem.style.position = "relative;
elem.style.left = "300px"; 
```

这会将元素移动到其原始位置右侧 300 像素，但是如果元素已经`position`有`static`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:37:34.663

在 jQuery 中，您可以为 div 设置动画以轻松移动：

```
$(document).ready(function () {
    var current_left = $("#myDiv").css('left');
    $("#myDiv").animate({
        "margin-left": "300px", // if #myDiv's position is relative
        "left": current_left + 300 + "px" // if #myDiv's position is absolute|fixed
    }, 400);
}); 
```

编辑：绝对假设使用 LEFT 而不是 RIGHT。权利将是：

```
"right": current_left - 300 + "px" 
```

# asp.net - 如何在 Asp.Net C# 中创建此表/视图

> ID：10300846
> 
> 赞同：0
> 
> 时间：2012-04-24T15:14:55.203
> 
> 标签：asp.net

![在此处输入图像描述](../Images/b72d97a0c7f5c7828d11850ff9ba3eda.png)[我需要根据下图创建一个表，我是 .Net 的新手。请告诉我应该使用哪个工具](https://i.stack.imgur.com/Kc5if.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T15:22:38.957

对我来说，这看起来像是一个手风琴，其中每个部分都包含一个包含特定日期数据的表格。在这种情况下，您可以做的是动态创建 DIV 对象（为您打算表示的每个数据）并在每个 div 中添加 GridView 或 DataGrid。然后，您将设置这些 div 的样式以获得所需的外观。另一方面，看看 jQuery UI Accordion。我了解您是新手，但 jQuery UI Accordion 可以帮助解决您的问题[http://jqueryui.com/demos/accordion/](http://jqueryui.com/demos/accordion/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T16:41:03.323

这不是一个简单的实现结构。

您可能希望从 a`ListView`或 a开始`Repeater`。中继器使用起来更简单，但有更多的限制。

然后，在您的每个`Item Template`or`Repeater`中`ListView`，您将需要一个`GridView`. 将`GridView`处理数据表和分页。

您可以处理`Selected`事件`ListView`以确定要扩展的行，并仅在服务器端填充该行，或者您可以填充所有行并使用客户端脚本来显示/隐藏行。根据您的数据，哪种方法最有效取决于您。

您需要进行两级数据绑定，首先将 绑定`ListView`到您的主要数据集，在这种情况下，它看起来像一个日期列表。然后，在 的`ItemDataBound`情况下`ListView`，绑定每个列表视图项的内部`GridView`。您可能只想对应显示的行执行此操作。

当然，有一些方法可以优化，每行都有一个自定义控件，等等，但这是基本思想。

# c# - 如何发布属性值？

> ID：10300847
> 
> 赞同：0
> 
> 时间：2012-04-24T15:14:55.437
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我有一个枚举：

```
public enum EffectType
{
    None,
    Positve,
    Negative
} 
```

我有三个div：

```
<div id="divNone"></div>
<div id="divPositive"></div>
<div id="divNegative"></div> 
```

用户单击这三个之一后，标记将是：

```
<div id="divNone"></div>
<div id="divPositive" class="selected"></div>
<div id="divNegative"></div> 
```

如何发布选定的 div 并标识`EffectType`控制器中的选定内容，以便将值保存到数据存储中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T15:17:46.030

我会将一些数据与单击事件发生时可以查找的元素相关联：

```
<div id="divNone" data-effect-type="0" class="effectType selected">

$('#someButton').click(function()
{
     var effectType = $('.effectType').find('.selected').data('effect-type');

     $.ajax({
         ...
     });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T15:19:38.650

您可以使用 Jquery post ，

```
$.post('controler/YourAction',{effectType:$('div.selected').attr('id')},function(data){

}); 
```

在你的行动中，

```
Public ActionResult YourAction(string effectType){
   return view();
} 
```

# c# - LINQ 动态查询

> ID：10300851
> 
> 赞同：4
> 
> 时间：2012-04-24T15:15:23.037
> 
> 标签：c#, linq

> **可能重复：**
> [基于组合框值构建动态 LINQ 查询](https://stackoverflow.com/questions/497121/building-dynamic-linq-queries-based-on-combobox-value)

我在 C# 中使用 LINQ 连接到 DBML 关系。目前，我所有的查询都是静态的（`from x in table select x.item`），但是现在我已经为我的客户构建了一个伪临时报告系统。客户可以从盒子中挑选一些物品并过滤。当用户提交过滤后的数据时，我将所有内容存储在自定义对象中。该对象包含表名称、表项名称、约束（>、<、+、包含等）以及要过滤的文本。我将所有这些属性收集到一个对象中，我需要能够查询它。例如，我过滤的对象可能会返回如下：

`tblCars, strCarType, =, "Ford"`

我的应用程序有一个中央表，它需要连接到过滤后进入的每个表，然后查询该数据以获取结果。使用联接动态构建 LINQ 查询的最佳方法是什么？

# spring - Spring @ManagerResource 的含义：persistPolicy、persistPeriod、persistLocation 和 currencyTimeLimit

> ID：10300856
> 
> 赞同：22
> 
> 时间：2012-04-24T15:15:36.187
> 
> 标签：spring, jmx, spring-annotations

`@ManagedResource`用于 JMX的 Spring 中的以下字段是什么意思？[Spring 文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/jmx.html)中没有 Javadoc 或相关描述。

```
1.字符串persistPolicy()默认""；
 2\. int persistPeriod() 默认-1；
 3.字符串persistLocation() 默认""；
 4\. int currencyTimeLimit() 默认-1；

```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-14T11:20:45.333

这些被传递到 JMX api - 您可以在[JMX java doc](http://docs.oracle.com/javase/6/docs/api/javax/management/modelmbean/ModelMBeanInfo.html#getMBeanDescriptor%28%29)中找到有关它的更多信息。在此处复制相关部分 -

```
 persistPolicy  : OnUpdate|OnTimer|NoMoreOftenThan|OnUnregister|Always|Never  
 persistLocation : The fully qualified directory name where the MBean should be persisted (if appropriate)
 persistFile    : File name into which the MBean should be persisted
 persistPeriod  : seconds - frequency of persist cycle for OnTime and NoMoreOftenThan PersistPolicy 
 currencyTimeLimit : how long value is valid, <0 never, =0 always, >0 seconds 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T16:13:21.763

我怀疑这些注释字段将不起作用 - 参见例如：[Java 5 忘记了 JMX MBean 持久性吗？](http://www.jroller.com/bogie14/entry/did_java_5_forget_jmx)

# java - 将对象转换为短

> ID：10300861
> 
> 赞同：0
> 
> 时间：2012-04-24T15:16:04.050
> 
> 标签：java, object, type-conversion, classcastexception

我想将对象转换为短。我的代码是这样的：

```
List<Batch> lsMaxBatch = em.createNativeQuery(sqlMaxBatch).getResultList();
Iterator iter = lsMaxBatch.iterator();
while (iter.hasNext()) {
    Short batchId = Short.valueOf(iter.next() + "");
    ls.add(batchId);
} 
```

**可以吗？**

因为如果我这样做转换：

```
Short batchId = (Short) iter.next(); 
```

我收到一个错误：

```
java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to java.lang.Short 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T15:18:48.753

像这样的无类型查询返回一个`List<Object[]>`. 异常消息提示：`[Ljava.lang.Object; cannot be cast...`.

要修复您的代码：

```
List<Object[]> lsMaxBatch = em.createNativeQuery(sqlMaxBatch).getResultList();
Iterator<Object[]> iter = lsMaxBatch.iterator();
while (iter.hasNext()) {
    Object[] row = iter.next();
    Short batchId = (Short) row[0];
    ls.add(batchId);
} 
```

是的，搞砸了`List<Object[]>`。为了改进这一点，请使用其中一种返回 a的[`EntityManager`查询创建方法](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#method_summary)`TypedQuery<T>`。

# utf-8 - 将 utf16 字符串中的 url 提供给 jsoup 的问题

> ID：10300864
> 
> 赞同：1
> 
> 时间：2012-04-24T15:16:14.513
> 
> 标签：utf-8, jsoup

我在 Jsoup 中的 URL 有一些问题。我一直在搜索有关它的一些信息，但我找不到如何解决它。我想解析一个用 UTF-8 编写的 html 代码。我在字符串中为 jsoup 提供了一个 URL，但它具有西班牙文字符“ñ”。Jsoup 将其解码为 UTF-8，但它不能很好地工作，因为它将其转换为不同的字符对。我能做些什么？

编辑：

我已经解决了这个问题（我的本地问题），像这样用 utf8（ñ = c3b1）中的代码替换“ñ”。搜索 = España -> Espa+"c3b1"a 。谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T15:27:26.083

你可以试试这样的东西，看看它是否有效？

```
Document doc = Jsoup.connect("blah").get();
doc.outputSettings().charset(Charset.forName("UTF-16")); 
```

编辑：

我认为您是说您正在使用 UTF-16 构建您的 URL，但 Jsoup 假设您提供的 URL 是 UTF-8。因此，您需要将字符串从 UTF-16 转换为 UTF-8，然后再将其提供给 Jsoup。我玩过一些代码，也许它会对你有所帮助，但我不确定。我不是说这是答案，但也许它会引导你找到答案。

```
//I believe this code takes a UTF-8 string, creates a new UTF-16 string.  
String url = new String("http://www.google.com/search=España".getBytes(Charset.forName("UTF-8")), Charset.forName("UTF-16")); 
```

您可能需要根据您的情况切换它。

# facebook - 评论缓存：如何使用 wordpress 预览帖子删除？

> ID：10300866
> 
> 赞同：-1
> 
> 时间：2012-04-24T15:16:22.503
> 
> 标签：facebook, wordpress, comments

在我的网站中，我使用 Facebook 评论插件，如果我想使用 WordPress 预览帖子，Facebook 运行缓存页面。这样，当帖子发布时，Facebook 缓存看不到帖子标题、描述、图像等，只有去这里才能修复：[https ://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

有没有办法防止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T16:23:02.910

是的，调试链接有效。[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

运行调试链接后，它指出了一些错误和缺少 og:description 数据。

然后，我将以下行添加到我的 wordpress 网站的标题中。瞧！再次运行调试，然后回到我的 Facebook 并发布我的链接 [http://petition.joelfrenette.com](http://petition.joelfrenette.com)，它现在可以正确获取缓存的值、img、标题、描述等......

感谢您的指导，乔尔

# c++ - 如何找到一种方法来检测这段代码中的内存泄漏？

> ID：10300867
> 
> 赞同：0
> 
> 时间：2012-04-24T15:16:23.483
> 
> 标签：c++, visual-studio

所有，有谁能告诉我一种好方法或工具来检测 Visual Studio 中这些代码的内存泄漏吗？我已经测试了 crt 调试，但是当我中止调试过程（shift+f5）时，内存泄漏报告不会出现在调试窗口中。

```
void fun1()
{
    int * pInt = new int;
    return;
}
void Execute(void)
{
    while(true)
    {
        cout<<"I will sleep for 1 second..."<<endl;
        ::Sleep(1000);
        fun1();
    }
    return;
}
int main()
{
    Execute();
    return 0;
} 
```

任何人都知道如何找到上述代码的内存吗？顺便说一句，如果我选择使用 shared_ptr，内存泄漏就不会再发生了，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:25:57.713

这里的问题相当简单：当你中止一个进程时，内存泄漏或多或少被认为是理所当然的——即使你的代码通常不会泄漏，用调试器中止它（运气不好）也会泄漏反正内存。因此，当您使用调试器中止程序时，大多数通常会报告内存泄漏的工具不会。

因此，要查看泄漏报告，您只需要编写在某些时候自行退出的代码，而不是要求您使用调试器将其终止。如果您将代码更改为以下内容：

```
void fun1()
{
    int * pInt = new int;
    return;
}
void Execute(void)
{
    for (int i=0; i<100000; i++)
    {
        //cout<<"I will sleep for 1 second..."<<endl;
        //::Sleep(2000);
        fun1();
    }
    return;
}
int main()
{
    Execute();
    return 0;
} 
```

顺便说一句，当您`2000`作为参数传递给 时`Sleep`，您应该期望它至少休眠 2 秒，而不仅仅是一秒。目前，我已经注释掉了`cout`and `Sleep`，所以它应该只是快速泄漏内存并生成泄漏报告。有很多输出和睡眠，它会做同样的事情，只是更慢更嘈杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:36:23.680

问题在于，当一个进程正在运行时，自动化进程很难判断出什么内存泄漏了。在跟踪对对象和内存块的引用的语言中，您可以随时执行此操作，您只需要找到没有引用的块。在 C/C++ 中没有这样的事情（除非您自己实现它），因此您无法真正判断内存块是否已泄漏。

在这种情况下，您可以做的一件事是触发在进程生命周期中您知道不应该有任何泄漏的时间点转储内存泄漏的函数。例如，假设您知道您的应用程序在 Execute() while 循环中的每次迭代结束时不应该有任何泄漏。然后你可以做这样的事情：

```
#include <crtdbg.h>

void fun1()
{
    int * pInt = new int;
    return;
}
void Execute(void)
{
    int i = 0;
    while(true)
    {
        cout<<"I will sleep for 1 second..."<<endl;
        ::Sleep(2000);
        fun1();

        #ifdef _DEBUG
        // dump any leaks every 100 iterations
        if (++i % 100 == 0)
            _CrtDumpMemoryLeaks();
        #endif
    }
    return;
}
int main()
{
    Execute();
    return 0;
} 
```

有关 _CrtDumpMemoryLeaks() 和 MSVC CRT 库的其他函数的信息，请参阅[此页面](http://msdn.microsoft.com/en-us/library/x98tx3cf.aspx)。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T15:18:49.120

将其添加到您的主要功能的顶部不起作用吗？

```
#if defined(DEBUG) | defined (_DEBUG)
    _CrtSetDbgFlag(_CRTDBG_ALLOC_MEM_DF | _CRTDBG_LEAK_CHECK_DF);
#endif 
```

您必须在调试模式下运行。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-24T15:19:36.587

我不知道 VS，在 Linux 上我会使用[valgrind](http://valgrind.org)。

# php - 安全地获取已定义和未定义索引的数组元素值

> ID：10300868
> 
> 赞同：34
> 
> 时间：2012-04-24T15:16:24.607
> 
> 标签：php, zend-framework

我已经厌倦了编写三元表达式来清理数据，例如：

```
$x = isset($array['idx']) ? $array['idx'] : null;
// and
$x = !empty($array['idx']) ? $array['idx'] : null; 
```

是否有**本机方式**或**ZF 访问器/过滤器**来获取某个给定数组的数组元素值，而无需：

*   禁用`error_reporting`
*   三元`isset`/`empty`检查
*   错误控制操作员`@`
*   创建我自己的全局函数或应用程序访问器/过滤器

就像是：

```
$x = get_if_set($array['idx']);
// or 
$x = Zend_XXX($array, 'idx') 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2016-06-18T08:17:21.590

PHP7 引入了[空合并运算符](https://wiki.php.net/rfc/isset_ternary) `??`。假设你很幸运能够运行它，你可以这样做

```
$x = $array['idx'] ?? null; 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-04-24T19:40:09.707

## 自 PHP 7.0 起

事情变得容易多了——感谢*Andrea Faulds*和*Nikita Popov*提供的[*Null Coalescing Operator* `??`^(*Docs*)](https://www.php.net/manual/en/language.operators.comparison.php#language.operators.comparison.coalesce)^(、[*Migration*](https://www.php.net/manual/en/migration70.new-features.php#migration70.new-features.null-coalesce-op)、[*RFC*](https://wiki.php.net/rfc/isset_ternary))：

> ```
> $x = $array['idx'] ?? NULL; 
> ```
> 
> 或带有`$default`：
> 
> ```
> $x = $array['idx'] ?? $default ?? NULL; 
> ```

Like `isset`or`empty`它**不给出警告**，并且表达式向右下降（如果未设置）。如果设置且不为 NULL，则取值。这也是`$default`前面示例中的工作方式，即使未定义，也始终如此。

* * *

## 自 PHP 7.4 起

感谢*Midori Kocak* - 是[*Null Coalescing Assignment Operator* `??=`^(*Docs*)](https://www.php.net/manual/en/language.operators.assignment.php#language.operators.assignment.other)^(，[*RFC*](https://wiki.php.net/rfc/null_coalesce_equal_operator))（这是我之后错过的事情之一`??`）允许直接分配默认值：

> ```
> $array['idx'] ??= null;
> $x = $array['idx']; 
> ```

我不经常使用它`??`，但了解它是件好事，尤其是在分解数据处理逻辑并希望尽早设置默认值的情况下。

* * *

## 原来的旧答案

* * *

只要您只需要 NULL 作为“默认”值，您就可以使用错误抑制运算符：

```
$x = @$array['idx']; 
```

> ***批评：***使用错误抑制运算符有一些缺点。首先它使用了[错误抑制操作符](http://php.net/language.operators.errorcontrol)，因此如果那部分代码有问题，您将无法轻松恢复问题。此外，如果未定义的标准错误情况确实会污染寻找尖叫声。您的代码没有尽可能精确地表达自己。另一个潜在的问题是使用*无效的索引*值，例如为索引注入对象等。这会被忽视。

它将防止警告。但是，如果您还希望允许其他默认值，则可以通过接口封装对数组偏移量的访问`ArrayAccess`：

```
class PigArray implements ArrayAccess
{
    private $array;
    private $default;

    public function __construct(array $array, $default = NULL)
    {
        $this->array   = $array;
        $this->default = $default;
    }

    public function offsetExists($offset)
    {
        return isset($this->array[$offset]);
    }

    public function offsetGet($offset)
    {
        return isset($this->array[$offset]) 
            ? $this->array[$offset] 
            : $this->default
            ;
    }

    public function offsetSet($offset, $value)
    {
        $this->array[$offset] = $value;
    }

    public function offsetUnset($offset)
    {
        unset($this->array[$offset]);
    }
} 
```

用法：

```
$array = array_fill_keys(range('A', 'C'), 'value');
$array = new PigArray($array, 'default');
$a     = $array['A'];   # string(13) "value"
$idx   = $array['IDX']; # NULL "default"

var_dump($a, $idx); 
```

演示：[https ://eval.in/80896](https://eval.in/80896)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-28T09:08:48.667

我想说，使用辅助函数与您的数组交互。

```
function getValue($key, $arr, $default=null) {
   $pieces = explode('.', $key);
   $array = $arr;

   foreach($pieces as $array_key) {

      if(!is_null($array) && is_array($array) && array_key_exists($array_key, $array)) { 
          $array = $array[$array_key];
      }
      else {
          $array = null;
          break;
      }
   }
   return is_null($array) ? $default : $array;
}

$testarr = [
    ['foobar' => 'baz'],
    ['active' => false]
];
$output = getValue('0.foobar',$testarr,'NOT FOUND');
var_dump($output);
$output = getValue('0',$testarr,'NOT FOUND');
var_dump($output);
$output = getValue('1.active',$testarr,'NOT FOUND');
var_dump($output);
$output = getValue('i.do.not.exist',$testarr,'NOT FOUND');
var_dump($output); 
```

通过这种方式，您可以根据自己的喜好提供默认值而不是 null，您不需要将数组恢复为另一个对象，并且您可以根据需要请求任何深度嵌套的值，而无需检查“父”数组。

[https://ideone.com/11jtzj](https://ideone.com/11jtzj)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T16:01:03.377

声明你的变量并给它们一些初始值。

```
$x = NULL;
$y = 'something other than NULL'; 
```

现在，如果您有一个具有 x 和 y 键的数组 $myArray，则提取函数将覆盖初始值（您也可以将其配置为不）

```
$myArray['x'] = 'newX';
extract($myArray);
//$x is now newX 
```

如果没有键，则保留变量的初始值。它还将其他数组键放入相应的变量中。

# javascript - jQuery 检查平板电脑？

> ID：10300875
> 
> 赞同：30
> 
> 时间：2012-04-24T15:16:56.837
> 
> 标签：javascript, jquery

我使用媒体查询加载样式表（如果设备是平板电脑）。

我只是想知道如果用户使用的是平板电脑，我如何检查我的 javascript，是否有检查，或者我应该只检查加载了哪些样式表？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-24T15:27:20.603

试着看看这是否能说明你的问题：

[在 jQuery 中检测移动设备的最佳方法是什么？](https://stackoverflow.com/questions/3514784/best-way-to-detect-handheld-device-in-jquery)

正如该线程的答案所说，我建议依靠“功能检测”而不是平板电脑与非平板电脑（因为它可能不像人们想象的那么简单）因此-> [http://modernizr.com /](http://modernizr.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T15:20:31.897

尝试将用户代理从服务器传递到页面，以便 JavaScript 确切知道正在报告的浏览器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T15:39:02.380

您可以使用 navigator.userAgent 并进行子字符串搜索以找出查看您网站的平板电脑。这是平板电脑用户代理的当前列表 [http://mojosunite.com/tablet-user-agent-strings](http://mojosunite.com/tablet-user-agent-strings)

# javascript - 形成隐藏字段替换

> ID：10300880
> 
> 赞同：0
> 
> 时间：2012-04-24T15:17:08.350
> 
> 标签：javascript, forms, expressionengine, hidden-field, safecracker

我正在使用 Expression Engine 的 Safecracker 模块构建一个表单。

必填字段之一是 Title，它成为 EE 频道条目的标题。

我想做的是将 Title 字段设置为组合的名字和姓氏字段。

我从这个开始：

```
<form method="POST" action="#">

<input id="student_first_name" type="text" size="30" name="student_first_name"> 
<br>
<input id="student_last_name" type="text" size="30" name="student_last_name"> 
<br><br>
<input type="text" name="title" value=""/> 

</form> 
```

然后添加了这个：

```
$(function() {
    $('#student_first_name').keyup(function() {
        var snamef = $(this);
    });
    $('#student_last_name').keyup(function() {
        var snamel = $(this);
    });
    $("input[name='title']").val(snamel + " " + snamef);
    return false;
});​ 
```

不过，我无法让它工作：http: [//jsfiddle.net/tylonius/CY5zJ/4/](http://jsfiddle.net/tylonius/CY5zJ/4/)

我错过了一步（还是完全做错了？）？

另外，是不是我工作太努力了，Safecracker 已经内置了这个功能；类似于它的直播 UrlTitle(); 功能？

任何帮助表示赞赏。

谢谢，

泰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T15:30:32.203

如果我理解正确你的问题试试这个：

首先在您想要的输入元素上设置一个 id，如下所示：

```
<input type="text" name="title" id="student_title" value=""/> 
```

接着 ：

```
$(function() {  
    changeFunction = function() {
        $('#student_title').val($('#student_first_name').val() + ' ' + $("#student_last_name").val());
    }

    $('#student_first_name').keyup(changeFunction)
    $('#student_last_name').keyup(changeFunction);   
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-24T16:26:40.850

更好的是，完全避免使用 javascript，而只使用 SafeCracker 的[**dynamic_title**参数](http://expressionengine.com/user_guide/modules/safecracker/index.html#dynamic-title)。

`dynamic_title="[student_first_name] [student_last_name]"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T15:39:50.090

user1236048 为您提供最佳解决方案，但以下是您的代码的工作版本

```
$(function() {

    var snamef;
    var snamel;

    $('#student_first_name').keyup(function() {
         snamef = $(this).val();
         $("input[name='title']").val(snamel + " " + snamef);
    });
    $('#student_last_name').keyup(function() {
         snamel = $(this).val();
         $("input[name='title']").val(snamel + " " + snamef);
    });
    return false;
}); 
```

[这](http://jsfiddle.net/CY5zJ/14/)是工作的jsfiddle

# java - Tomcat 在没有任何日志或任何堆栈的情况下停止

> ID：10300883
> 
> 赞同：18
> 
> 时间：2012-04-24T15:17:10.430
> 
> 标签：java, tomcat, crash, virtual-machine

我们的 Tomcat 5.5 在晚上停止在我们的生产服务器（Linux CentOS 4.8）上遇到问题，我们不知道它为什么停止...... catalina.out 中没有 Tomcat 的日志或任何应用程序的日志。

我们尝试了不同的方法来找出服务器停止的原因：

*   将 Tomcat 配置为能够生成核心转储
*   使用 javassist检测`System.exit()`方法以查找是否调用了该方法
*   向 JVM 添加关闭挂钩（使用`Runtime.getRuntime().addShutdownHook()`）

它们都不起作用，我们没有核心转储，没有调用 Exit 方法和关闭挂钩。我的结论是：

*   虚拟机未正确终止，但在没有任何日志的情况下崩溃。

有什么想法或日志可以阅读以找出 Tomcat 停止的原因吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-24T15:34:33.213

1) Make sure you know where stderr is redirected and check if anything got printed there.

2) Check the memory limits on Tomcat and how much free memory does the system have. Review the Linux system logs under /var/log to see if anything suspicious happened during the time. For example, kernel can randomly kill a process (almost) without a trace if the system is running low on memory.

We've ran 5.5 in production for years and never had any unexplained shutdowns, FWIW.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-09-18T14:19:29.807

这对我有用。

正如在其他答案中所建议的那样，检查了系统登录，`/var/log/messages`但我的权限被拒绝了。所以，我改用`dmesg`命令并在日志中得到了这个

“内存不足：杀死进程 14606 (java) 得分 106 或牺牲孩子”。

在输出中，我还注意到**Swap Memory free 0 K**。Ran`top`命令确认相同。所以，不知何故，内存使用率很高，导致操作系统杀死了我的 tomcat 进程。

花了几个小时终于找到了原因。

`ps -ef | grep tomcat`表明有多个 tomcat 进程在为同一个应用程序运行。看来，较早的tomcat关闭可能没有成功完成，并且由于某种原因，即使在关闭之后进程也没有被杀死，这导致了高内存使用。

因此，使用 . 杀死所有正在运行的 tomcat 进程`kill`。SWAP 内存被释放。

再次启动tomcat，工作正常。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T15:20:07.247

很可能存在堆栈溢出异常。这是 Tomcat 发生时的典型行为。例如，您尝试序列化为具有循环依赖关系的 JSON 或 XML bean（但不处理循环）。

每次我遇到这个问题（好几次）它总是这个问题。所有其他停止通常都会正确记录（如 OutOfMemory 等）。

这种类型的止损在任何地方都没有留下任何痕迹。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T15:29:58.250

Tomcat 7 在 catalina 中有一个选项来防止 System.exit 类调用或类似的东西： http: [//ci.apache.org/projects/tomcat/tomcat7/docs/security-manager-howto.html](http://ci.apache.org/projects/tomcat/tomcat7/docs/security-manager-howto.html)。

也许 5.5 版本也有类似的选项。尝试文档。

有一些选项可以将输出重定向到用于启动 Tomcat 的同一控制台。当您在基于 Unix 的系统上执行时，此信息将重定向到日志，在 Windows 上，如果未重定向，它将保留在控制台中。

# oop - 与返回 void 相比，从函数返回值有什么好处吗？

> ID：10300886
> 
> 赞同：1
> 
> 时间：2012-04-24T15:17:18.463
> 
> 标签：oop, function, coldfusion, return, return-value

我主要使用非编译语言 ColdFusion，但这是所有语言的普遍问题。

我正在使用 getter/setter 以及 CRUD 方法创建对象。这是一个示例：

```
<cffunction name="getPeriodStartDate" output="false" returntype="Numeric">
    <cfreturn VARIABLES.PeriodStartDate />
</cffunction>

<cffunction name="setPeriodStartDate" output="false" returntype="Void">
    <cfargument name="PeriodStartDate" type="Numeric" required="true" />

    <cfset VARIABLES.PeriodStartDate = ARGUMENTS.PeriodStartDate />
</cffunction>

<cffunction name="getDollarAmount" output="false" returntype="Numeric">
    <cfreturn VARIABLES.DollarAmount />
</cffunction>

<cffunction name="setDollarAmount" output="false" returntype="Void">
    <cfargument name="DollarAmount" type="Numeric" required="true" />

    <cfset VARIABLES.DollarAmount = ARGUMENTS.DollarAmount />
</cffunction>

<cffunction name="read" output="false" returntype="Query">
    <!---
    READ QUERY
    --->

    <cfreturn _qData />
</cffunction>

<cffunction name="create" output="false" returntype="Void">
    <!---
    INSERT QUERY
    --->
</cffunction>

<cffunction name="update" output="false" returntype="Void">
    <!---
    UPDATE QUERY
    --->
</cffunction>

<cffunction name="delete" output="false" returntype="Void">
    <!---
    DELETE QUERY
    --->
</cffunction> 
```

显然`get`方法和`read()`方法都会返回一个值。

但是，让其他方法返回一个值有什么好处——也许是布尔值？

我曾在 Flex/ActionScript 工作过，记得在大多数情况下，我需要从方法返回一些值并将变量设置为该结果，以防止处理下一行代码：

```
function myFunc() {
    x = getSomething();

    y = getSomethingElse(x);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T15:26:55.347

如果你返回`this`你的二传手，你可以链接二传手。我认为 CF10 访问器`this`默认返回启用链接。

我读到过`void`一段时间返回会更有效率，但我不确定这是否是真的。我怀疑差异会很明显。

# php - php apache (xampp) odbc 连接问题

> ID：10300890
> 
> 赞同：0
> 
> 时间：2012-04-24T11:58:33.483
> 
> 标签：php, apache, sql-server

当我将 apache（通过 xampp）作为独立服务器而不是作为服务运行时（在 Windows Server 2008 上）

使用以下连接代码一切正常（删除用户名和密码）

```
$server = "WMS";
$link  = odbc_connect($server,'','');

if (!$link) {
    die('Something went horribly wrong while connecting to MSSQL');
}else {echo('');} 
```

但是，如果我将 apache 更改为在 Windows 中作为服务运行，则连接中断并且我收到以下错误消息

```
 Warning: odbc_connect() [function.odbc-connect]: SQL error: [Microsoft][ODBC Driver Manager] 
Data source name not found and no default driver specified, SQL state IM002 in SQLConnect in 
C:\xampp\htdocs\Dev\well.php on line 30

     Something went wrong while connecting to MSSQL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:14:12.200

请阅读文档：[http ://uk.php.net/manual/en/function.odbc-connect.php](http://uk.php.net/manual/en/function.odbc-connect.php)

`$server = "WMS";`建议您使用该名称配置 ODBC 别名/数据源。错误消息清楚地表明未找到具有该名称 (WMS) 的数据源。在 Windows 7/Vista/XP/Server 上，您可以在“开始 -> 管理工具 -> 数据源 (ODBC)”中配置它们——*旧操作系统上的路径可能不同*。无论如何——寻找“Microsoft ODBC 数据源管理器”。

而不是使用别名，我会建议（我总是连接的方式）使用完整的 DSN 名称，例如

```
// Microsoft SQL Server using the SQL Native Client 10.0 ODBC Driver - allows connection to SQL 7, 2000, 2005 and 2008
$link = odbc_connect("Driver={SQL Server Native Client 10.0};Server=$server;Database=$database;", $user, $password); 
```

在这种情况下，一切都是脚本的一部分，没有外部依赖项。

顺便说一句——我建议不要使用 ODBC 函数，而是专门为 MS SQL Server使用**PDO和驱动程序：** **PDO_SQLSRV** —— [http](http://uk.php.net/manual/en/ref.pdo-sqlsrv.php) ://uk.php.net/manual/en/ref.pdo-sqlsrv.php （或**Microsoft SQL PHP 服务器驱动程序，**如果您喜欢旧的程序风格 - [http://uk.php.net/manual/en/book.sqlsrv.php](http://uk.php.net/manual/en/book.sqlsrv.php)）

# javascript - 在javascript中检测浏览器窗口

> ID：10300892
> 
> 赞同：0
> 
> 时间：2012-04-24T15:17:39.547
> 
> 标签：javascript, popup, window

我是 javascript 的新手，我必须执行以下操作：我有一个 asp .net 应用程序，它在新窗口浏览器中加载另一个内容。

通过javascript，我需要刷新之前打开的弹出窗口，但我不知道如何找到那个新窗口。

我尝试了一个简单的`window.location.reload(true);`方法，但这只会刷新启动弹出窗口的主浏览器窗口。相反，我的意图是只刷新弹出窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:20:19.753

如果你用 来打开窗口`window.open()`，获取它的返回值。这是对弹出窗口对象的引用。从那里你可以打电话`location.reload()`。例如，这将打开一个窗口，然后重新加载它：

```
var popup = window.open('/somepage');
popup.location.reload(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T15:20:38.933

当你打开窗口时，给它一个名字（或存储窗口的返回值）。然后，而不是`window.location.reload`，调用`name.location.reload`where`name`是您给窗口的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T15:20:40.460

存储对弹出窗口的引用，然后在`location.reload()`弹出窗口上调用它而不是在主窗口上调用该函数，如下所示：

```
var myNewWindow = window.open(...);
myNewWindow.location.reload(true); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T15:21:03.700

您是否使用 Javascript 创建新窗口？如果您正在使用`window.open()`，该函数将返回对新窗口的引用，因此您可以执行以下操作：

```
var newWin = window.open();
newWin.location.reload(true); 
```

# facebook - 将标准订阅按钮的宽度更改为小于 225

> ID：10300896
> 
> 赞同：0
> 
> 时间：2012-04-24T15:17:44.853
> 
> 标签：facebook, button, width, subscribe

有没有办法将 Facebook 的“标准布局，带有 facepile”[订阅按钮](https://developers.facebook.com/docs/reference/plugins/subscribe/)的宽度更改为小于 FB 规定的 225 像素最小宽度？（以便适应现有网站的设计。）上述参考页面上的 FB 文档说，

> **布局**- 有三个选项。 **标准**- 在按钮右侧显示社交文本，并在下方显示朋友的个人资料照片。**最小宽度：** 225*像素*等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T00:35:17.093

是 - 您可以通过修改 iframe CSS 来做到这一点

```
.fb-subscribe.fb_iframe_widget {
max-width: 150px !important;
overflow:hidden;
} 
```

但是，该方法将意味着标准文本可能会被遮挡。你可以[参考这篇文章](http://www.labnol.org/internet/facebook-like-css/20755/)，看看是否有可能进一步破解 css

# php - 如何使用 YUI Compressor PHP 端口

> ID：10300898
> 
> 赞同：2
> 
> 时间：2012-04-24T15:17:46.530
> 
> 标签：php, compression, yui

我无法让[https://github.com/gpbmike/PHP-YUI-Compressor](https://github.com/gpbmike/PHP-YUI-Compressor)工作：

在我的 /js 目录中，我有：

1.  yuicompressor-2.4.7.jar
2.  yui.php
3.  jQuery.js
4.  jsall.php
5.  “临时”文件夹设置为 777

在 jsall.php 中：

```
<?php 
// INCLUDE COMPRESSOR CLASS
include('yui.php');

// INVOKE CLASS
$yui = new YUICompressor('yuicompressor-2.4.7.jar', 'temp', $options);

// ADD FILES
$yui->addFile('jquery.js');

// COMPRESS
$code = $yui->compress();
?> 
```

回显 $code 给了我以下信息：

> 在 java.lang.ClassLoader.defineClass(libgcj.so.10) 在 java.lang.VMClassLoader.defineClass(libgcj.so.10) 在 java.security.SecureClassLoader.defineClass( libgcj.so.10) 在 java.net.URLClassLoader.findClass(libgcj.so.10) 在 java.lang.ClassLoader.loadClass(libgcj.so.10) 在 java.lang.ClassLoader.loadClass(libgcj.so.10) ) 在 gnu.java.lang.MainThread.run(libgcj.so.10)

我在这里做错了什么？

# asp.net - 实现 ITemplate 并访问控件属性

> ID：10300903
> 
> 赞同：0
> 
> 时间：2012-04-24T15:18:08.307
> 
> 标签：asp.net, custom-controls

我正在尝试使用属性O *​​penFormModal*和*ModalWindowWidth*以及*ModalWindowHeight*等开发自定义 GridView 控件。

从 CustomGridView 类我调用 CustomGVITemplate 的一个实例：

```
Protected Overrides Function CreateColumns(ByVal dataSource As PagedDataSource, ByVal useDataSource As Boolean) As ICollection
    Dim columnList As ICollection = MyBase.CreateColumns(dataSource, useDataSource)
    Dim cmdDel As New TemplateField
    cmdDel.ItemTemplate = New CustomGVITemplate(ListItemType.Item, "delete")
    'I CAN'T ASSING VALUE TO CUSTOM PROPERTIES HERE
    list.Add(cmdDel)
End Function 
```

问题是，我应该从CustomGVITemplate 类的*InstantiateIn*子中访问 CustomGridView 属性，我知道的唯一方法是通过这些参数

```
New CustomGVITemplate(ListItemType.Item, "delete", ALL-OTHER-PROPERTIES-HERE) 
```

我不喜欢这个解决方案，因为我被迫做很多可选参数，所以并非所有调用都使用所有属性，而且我找不到在 CustomGVITemplate 中定义属性并为它们分配值的方法。

其他可能的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:21:25.463

已解决：问题是我试图在 CreateColumns 事件中访问值和属性，当数据尚未绑定时，解决方案是在 CreateColumns 事件中创建 CommandButton（或 Button），然后在 RowCommand 或按钮中访问属性和 DataKeys OnClick 事件。

# android - 安卓文件读取

> ID：10300914
> 
> 赞同：1
> 
> 时间：2012-04-24T15:18:48.570
> 
> 标签：android, try-catch, android-file

```
package com.callout.project;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

import com.callout.project.Mylocation.LocationResult;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Intent;
import android.location.Location;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class WorksActivity extends Activity  {
/** Called when the activity is first created. */
Mylocation myLocation = new Mylocation();
TextView rtv;
String id;
String strloc;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.register);

    Bundle ext = getIntent().getExtras();
       id = (String) ext.get("registration_id");
      Log.w("rid", id);
    findCurrentLocation();
    rtv = (TextView)findViewById(R.id.rtv);
    rtv.setText("Thank you For Registering");
    String eol = System.getProperty("line.separator");
    BufferedReader input = null;
    try {
      input = new BufferedReader(new InputStreamReader(
        openFileInput("myfile")));
       String line;
      StringBuffer buffer = new StringBuffer();
      while ((line = input.readLine()) != null) {
        buffer.append(line + eol);
        Log.w("Hello","123"+line);
      }
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
    if (input != null) {
      try {
    input.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
      }
    }

//Log.w("file","msg"+line);

//  sendtoserver(id,strloc);
}

private void findCurrentLocation() {
    myLocation.getLocation(this, locationResult);
}
public LocationResult locationResult = new LocationResult() {

    @Override
    public void gotLocation(Location location) {
        // TODO Auto-generated method stub
        if (location != null) {
             strloc  = location.getLatitude() + ","
                    + location.getLongitude();
             Log.w("works",strloc);

    // TODO Auto-generated method stub
    AlertDialog malert = new AlertDialog.Builder(WorksActivity.this).create();
       malert.setTitle("here"+strloc);     
       Log.w("func","in func"+id);
     HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://www.funnystrippers.co.cc/test.php");

        try {
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(4);
            nameValuePairs.add(new BasicNameValuePair("Rid", "56"));
            nameValuePairs.add(new BasicNameValuePair("location","strloc"));
            nameValuePairs.add(new BasicNameValuePair("content", "hello frm android"));

            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

            HttpResponse response = httpclient.execute(httppost);
            Log.w("res",response.toString());

        } catch (ClientProtocolException e) {
        } catch (IOException e) {
        }

        malert.show();
}
        }
    }; 
```

}

我有以下处理 C2DM 的代码，它工作正常，但我想要 Log.w("Hello","123"+line); 的值 当我这样做时要在 try {} catch 块之外打印它会给我错误我应该在我的 LogCat 中打印值！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:22:20.860

`line`一旦你离开 try 块，它就会超出范围，因为它是在其中声明的。

要修复它，只需将声明移到`line`try 块之外，离开该块后它仍然可见。

```
String line;
try {
    input = new BufferedReader(new InputStreamReader(
    openFileInput("myfile")));
    StringBuffer buffer = new StringBuffer(); 
```

# c++ - 像素格式转换哪个更快？像素着色器或计算着色器，或者可能是 OpenCL？

> ID：10300923
> 
> 赞同：4
> 
> 时间：2012-04-24T15:19:15.310
> 
> 标签：c++, gpgpu, pixel-shader, format-conversion, compute-shader

我想即时将帧从 YUV420p 格式（或类似格式）转换为 ABGR 格式，并将结果帧作为纹理放入视频内存中。

我现在可以考虑两种方法：

1.  让每个通道成为一个源纹理，并渲染到另一个纹理。
2.  在计算着色器中“正常”执行。

我不太了解 GPU 中的规则。在我的卡片中，有 720 个着色器核心、36 个纹理单元和 16 个输出单元。这是否意味着在每个周期内，我最多可以采样 40 个纹理并输出 16 个像素，而我可以执行 720 个着色器操作？因此，如果我使用方法 1，即使我对每个像素只使用 2 或 3 个操作，我也会被限制为 16 个像素输出？如果我使用方法2，是否意味着只要我可以在45个周期内转换一个像素，它就会比使用方法1更快？

# xcode - Cocoa 应用程序找不到 dylib 头文件

> ID：10300925
> 
> 赞同：2
> 
> 时间：2012-04-24T15:19:23.967
> 
> 标签：xcode, macos, cocoa, dylib

我从 xcode 创建了一个可可 dylib 模板，并根据苹果文档添加了头文件

Person.h 有以下代码

```
#import <Cocoa/Cocoa.h>

@protocol Person

- (void)setName:(NSString*)name;

- (NSString*)name;

@end

@interface Person : NSObject <Person>{

@private

    NSString* _person_name;

} 
```

并且Titling.h 有以下代码

```
#import <Cocoa/Cocoa.h>

#import "Person.h"

@protocol Titling

- (void)setTitle:(NSString*)title;

@end

@interface Person (Titling) <Titling> {

}

@end 
```

这就是我在 dylib.and 编译的所有代码，没有错误构建成功。

在此之后，我创建了一个新的可可应用程序，将 dylib(cocoaLibrary.dylib) 拖到资源文件夹可可应用程序中。在 applicatiodidFinishLaunching 中添加了代码

```
#import "loadCocoaLibAppDelegate.h"

#import <dlfcn.h>

#import "Person.h"

#import "Titling.h"

@implementation loadCocoaLibAppDelegate

@synthesize window;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    // Insert code here to initialize your application 

    //NSAutoreleasePool* pool = [NSAutoreleasePool new];

    // Open the Person library.

    void* lib_handle = dlopen("./libPerson.dylib", RTLD_LOCAL);

    if (!lib_handle) {

        exit(EXIT_FAILURE);

    }

    // Get the Person class (required with runtime loaded libraries).

    Class Person_class = objc_getClass("Person");

    if (!Person_class) {

        exit(EXIT_FAILURE);

    }

    // Create an instance of Person.

    NSObject<Person,Titling>* person = [Person_class new];

    // Use person.

    [person setName:@"Perrine LeVan"];

    NSLog(@"[%s] main: [person name] = %@", __FILE__, [person name]);

    [person setTitle:@"Ms."];

    NSLog(@"[%s] main: [person name] = %@", __FILE__, [person name]);

    // Dispose of person.

    [person release];

    // Close the Person library.

    if (dlclose(lib_handle) != 0) {

        exit(EXIT_FAILURE);

    }

   // [pool release];

}

@end 
```

Person.h：没有这样的文件或目录

Titling.h：没有这样的文件或目录

真的我不知道如何解决这个问题。请帮忙。

# shell - 加载多个 FTP 文件的 Shell 脚本

> ID：10300926
> 
> 赞同：0
> 
> 时间：2012-04-24T15:19:28.133
> 
> 标签：shell, syntax-error, ftp-client

我正在尝试将多个文件从一个文件夹上传到一个 ftp 站点并编写了以下脚本：

```
#!/bin/bash
for i in '/dir/*'
do 
if [-f /dir/$i]; then
HOST='x.x.x.x'
USER='username'
PASSWD='password'
DIR=archives
File=$i

ftp -n $HOST << END_SCRIPT
quote USER $USER
quote PASS $PASSWD
ascii
put $FILE   
quit    
END_SCRIPT
fi 
```

当我尝试执行时，它给了我以下错误：

```
username@host:~/Documents/Python$ ./script.sh 
./script.sh: line 22: syntax error: unexpected end of file 
```

我似乎无法让它工作。任何帮助深表感谢。

谢谢，马扬克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:22:27.997

它在抱怨，因为您的`for`循环没有`done`标记来指示循环的结束。您还需要更多空间`if`：

```
if [ -f "$i" ]; then 
```

回想一下，这`[`实际上是一个命令，如果它不这样显示，它将无法被识别。

而且......如果你像这样单引号（在`for`）你的glob，它不会被扩展。那里没有引号，但使用`$i`. 您可能也不想`/dir/`在使用时包含该部分，`$i`因为它包含在您的 glob 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:28:16.553

如果我没记错的话，[`ncftp`](http://www.ncftp.com/ncftp/)可以采用通配符参数：

```
ncftpput -u username -p password x.x.x.x archives /dir/* 
```

如果您还没有安装它，它可能在您的操作系统的标准存储库中可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T15:35:22.497

First, the literal, fixing-your-script answer:

```
#!/bin/bash
# no reason to set variables that don't change inside the loop
host='x.x.x.x'
user='username'
password='password'
dir=archives
for i in /dir/*; do # no quotes if you want the wildcard to be expanded!
  if [ -f "$i" ]; then # need double quotes and whitespace here!
    file=$i
    ftp -n "$host" <<END_SCRIPT
quote USER $user
quote PASS $password
ascii
put $file $dir/$file
quit    
END_SCRIPT
  fi
done 
```

Next, the easy way:

```
lftp -e 'mput -a *.i' -u "$user,$password" "ftp://$host/" 
```

(yes, lftp expands the wildcard internally, rather than expecting this to be done by the outer shell).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T16:35:20.697

首先，我很抱歉没有让自己清楚地回答这个问题。我的实际任务是将文件从本地文件夹复制到 SFTP 站点，然后将文件移动到存档文件夹。由于 SFTP 由供应商托管，我无法使用密钥共享（供应商限制。此外，如果在 shell 脚本中使用 SCP 将需要输入密码，因此我必须使用 SSHPASS。SSHPASS 在 Ubuntu 存储库中，但是对于 CentOS，它需要[从这里](http://pkgs.org/centos-6-rhel-6/epel-x86_64/sshpass-1.05-1.el6.x86_64.rpm.html)安装

当前线程以及[如何使用 Bash 脚本中的密码运行 sftp 命令？](https://stackoverflow.com/questions/5386482/how-to-run-sftp-command-with-a-password-from-bash-script)确实让我更好地理解了如何编写脚本，我将在这里分享我的解决方案：

```
#!/bin/bash
#!/usr/bin

for i in /dir/*; do 
 if [ -f "$i" ]; then 
file=$i
    export SSHPASS=password
    sshpass -e sftp -oBatchMode=no -b - user@ftp.com << !
    cd foldername/foldername
    put $file
 bye
 !
mv $file /somedir/test
fi
done 
```

感谢大家的所有回复！——马扬克

# android - Android相机应用程序中的空指针异常

> ID：10300928
> 
> 赞同：0
> 
> 时间：2012-04-24T15:19:30.587
> 
> 标签：android, android-camera, android-contentprovider

我正在尝试将图片保存在 Android 应用程序中。这是我的回调函数：

```
ShutterCallback myShutterCallback = new ShutterCallback(){

    @Override
    public void onShutter() {
        Log.d(TAG, "shutter callback");

    }};

PictureCallback myPictureCallback_RAW = new PictureCallback(){

    @Override
    public void onPictureTaken(byte[] arg0, Camera arg1) {
        Log.d(TAG, "raw callback");

    }};

PictureCallback myPictureCallback_JPG = new PictureCallback(){

    @Override
    public void onPictureTaken(byte[] arg0, Camera arg1) {
        // TODO Auto-generated method stub
        Bitmap bitmapPicture 
            = BitmapFactory.decodeByteArray(arg0, 0, arg0.length);  

        ContentValues values = new ContentValues();
        values.put(Images.Media.TITLE, "title");
        values.put(Images.Media.BUCKET_ID, "test");
        values.put(Images.Media.DESCRIPTION, "test Image taken");
        values.put(Images.Media.MIME_TYPE, "image/jpeg");

        Uri uriTarget = getContentResolver().insert(Media.EXTERNAL_CONTENT_URI, values);

        OutputStream imageFileOS;
        try {
            imageFileOS = getContentResolver().openOutputStream(uriTarget);
            imageFileOS.write(arg0);
            imageFileOS.flush();
            imageFileOS.close();

            Toast.makeText(CameraView.this, 
                    "Image saved: " + uriTarget.toString(), 
                    Toast.LENGTH_LONG).show();

        } catch (FileNotFoundException e) {
            Log.d(TAG, "file not found " + e.getMessage());
            e.printStackTrace();
        } catch (IOException e) {
            Log.d(TAG, "io exception " + e.getMessage());
            e.printStackTrace();
        }

        //camera.startPreview();
        finish();
    }
}; 
```

问题是，对于几种不同类型的手机，我`NullPointerException`在这一行得到了一个：

```
imageFileOS = getContentResolver().openOutputStream(uriTarget); 
```

有没有人遇到过这个？

# 编辑 - 堆栈跟踪

```
04-24 11:52:03.979: E/AndroidRuntime(12695): FATAL EXCEPTION: main
04-24 11:52:03.979: E/AndroidRuntime(12695): java.lang.NullPointerException
04-24 11:52:03.979: E/AndroidRuntime(12695):    at android.content.ContentResolver.openAssetFileDescriptor(ContentResolver.java:465)
04-24 11:52:03.979: E/AndroidRuntime(12695):    at android.content.ContentResolver.openOutputStream(ContentResolver.java:361)
04-24 11:52:03.979: E/AndroidRuntime(12695):    at android.content.ContentResolver.openOutputStream(ContentResolver.java:337)
04-24 11:52:03.979: E/AndroidRuntime(12695):    at com.appfury.grafighters.CameraView$4.onPictureTaken(CameraView.java:234)
04-24 11:52:03.979: E/AndroidRuntime(12695):    at android.hardware.Camera$EventHandler.handleMessage(Camera.java:536)
04-24 11:52:03.979: E/AndroidRuntime(12695):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-24 11:52:03.979: E/AndroidRuntime(12695):    at android.os.Looper.loop(Looper.java:150)
04-24 11:52:03.979: E/AndroidRuntime(12695):    at android.app.ActivityThread.main(ActivityThread.java:4263)
04-24 11:52:03.979: E/AndroidRuntime(12695):    at java.lang.reflect.Method.invokeNative(Native Method)
04-24 11:52:03.979: E/AndroidRuntime(12695):    at java.lang.reflect.Method.invoke(Method.java:507)
04-24 11:52:03.979: E/AndroidRuntime(12695):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-24 11:52:03.979: E/AndroidRuntime(12695):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-24 11:52:03.979: E/AndroidRuntime(12695):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:44:24.923

它看起来类似于[这个](https://stackoverflow.com/questions/4344182/contentresolver-insert-returns-null)问题。如果媒体提供者抛出任何异常，请检查您的 logcat，并`uriTarget`在调用时使用调试器检查是否为 null `imageFileOS = getContentResolver().openOutputStream(uriTarget);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T19:07:01.243

事实证明，这个问题是特定于 HTC 设备的。我通过将图像文件保存在设备上的 DCIM 文件夹中解决了这个问题，但没有使用 getContentResolver 来获取路径。

# javascript - 使用 Javascript 验证巴西货币的正则表达式

> ID：10300930
> 
> 赞同：7
> 
> 时间：2012-04-24T15:19:35.200
> 
> 标签：javascript, regex, validation, currency

我需要使用 Javascript 验证一些包含巴西货币（其名称为“Real”）的表单文件。它具有以下格式：

```
 0,01
            0,12
            1,23
           12,34
          123,45
        1.234,56
       12.235,67
      123.456,78
    1.234.567,89
   12.345.678,90
  123.456.789,01
1.234.567.890,12 
```

我的正则表达式知识很薄弱，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-24T15:26:35.453

这是做你想做的吗？

```
^\d{1,3}(?:\.\d{3})*,\d{2}$ 
```

这就是说“1 到 3 位数字，可选地后跟任意数量的三位数组，前面是句点，后跟一个逗号和另外两个数字。” 如果您想允许示例中出现前导空格，请`\s*`在前面添加：

```
^\s*\d{1,3}(?:\.\d{3})*,\d{2}$ 
```

**编辑**：正如@ElRonnoco 指出的那样，上面的正则表达式接受前导零（例如010.100,00）。要禁止这些，您可以使用这个更长的版本：

```
^\s*(?:[1-9]\d{0,2}(?:\.\d{3})*|0),\d{2}$ 
```

**编辑 2**上面的正则表达式都匹配一个包含单个货币金额的字符串，没有别的。从问题中不清楚这是否是意图。

**编辑 3**要允许没有小数部分或只有一位小数的数字，请将其更改如下：

```
^\s*(?:[1-9]\d{0,2}(?:\.\d{3})*|0)(?:,\d{1,2})?$ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T15:24:36.053

我会试试这个正则表达式：

```
\d+(?:\.\d{3})*?,\d{2} 
```

它说的是：
- 匹配数字直到
a。找到一个点后跟 3 位数字（此步骤可以重复多次）
b. 或找到一个逗号后跟 2 位数字

编辑：
- 感谢您的评论，我忘记了第一个值
更新正则表达式的约束

```
\d{1,3}(?:\.\d{3})*?,\d{2} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-30T13:06:50.573

补充马克的回复：

谁需要 ”。” 在字符串中而不是“，”来计算美分。并且需要在文本中间找到值：

```
(?:[1-9]\d{0,2}(?:\,\d{3})*|0)(?:.\d{1,2})? 
```

[https://regexr.com/61166](https://regexr.com/61166)

# php - 从 PHP 中的多维数组回显选择性数据（行）

> ID：10300933
> 
> 赞同：0
> 
> 时间：2012-04-24T15:19:41.147
> 
> 标签：php, arrays, csv, selection

我有一个来自 .csv 文件的数组。这些来自一个房地产项目。在第二列中，我有单词 For Sale，在第三列中，For Rent 仅在相关行上显示。否则单元格为空。例如，我只想显示列表行 For Sale。当然，如果用户单击其中一行中的链接，则会显示相应的页面。我似乎无法定位列中的文本，也不允许在整个数组中使用 For Sale 字样，因为它们可能出现在另一列中（例如描述）。我试过这个，但无济于事。

```
/* The array is $arrCSV */
foreach($arrCSV as $book) {
    if($book[1] === For Sale) {
      echo '<div>';
    }
    echo '<div>';
    echo $book[0]. '<br>';
    echo $book[1]. '<br>';
    echo $book[2]. '<br>';
    echo $book[3]. '<br>';
    echo $book[6]. '<br><br><br>';
    echo '</div>';
} 
```

我也试过这个：

```
foreach($arrCSV as $key => $book) {
    if($book['1'] == 'For Sale') {
      echo '<div>';
    }
    echo '<div>';
    echo $book[0]. '<br>';
    echo $book[1]. '<br>';
    echo $book[2]. '<br>';
    echo $book[3]. '<br>';
    echo $book[6]. '<br><br><br>';
    echo '</div>';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T11:46:02.507

我在这里找到了一个解决方案： [PHP: Take Array (CSV) And Intelligently Returning Information](https://stackoverflow.com/questions/5463168/php-taking-array-csv-and-intelligently-returning-information)

```
$searchCity = 'For Sale'; //or whatever you are looking for
$file = file_get_contents('annonces.csv');
$results = array();
$lines = explode("\n",$file); 
//use any line delim as the 1st param,
//im deciding on \n but idk how your file is encoded

foreach($lines as $line){
//split the line
$col = explode(";",$line);
//and you know city is the 3rd element
if(trim($col[1]) == $searchCity){
     $results[] = $col;
}
} 
```

接着：

```
foreach($results as $Rockband)
{
echo "<tr>";
foreach($Rockband as $item)
{
echo "<td>$item</td>";
}
echo "</tr>";
} 
```

如您所见，我正在学习。事实证明，通过制定一个问题，就会显示一系列类似的帖子，这比使用google要快得多，也容易得多。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:25:16.053

你的意思是：

```
foreach($arrCSV as $key => $book) {
    if($book['1'] == 'For Sale') {
        echo '<div></div>';
    }else{
        echo '<div>';
        echo $book[0]. '<br>';
        echo $book[1]. '<br>';
        echo $book[2]. '<br>';
        echo $book[3]. '<br>';
        echo $book[6]. '<br><br><br>';
        echo '</div>';
    }
} 
```

# mono - MonoTouch - 编译接口文件失败

> ID：10300935
> 
> 赞同：1
> 
> 时间：2012-04-24T15:19:44.953
> 
> 标签：mono, touch

我有一台带有 Lion osx 的 mini mac，我从应用商店安装了 Xcode 4.3.2，然后我下载了 mono touch 试用软件。当我使用 mono develop 编译一个全新的项目时，出现以下错误：

```
Failed to compile interface file. 

Building: 12 (Debug|iPhoneSimulator)

Building Solution 12

Building: 12 (Debug|iPhoneSimulator)

Performing main compilation...
/Developer/MonoTouch/usr/bin/smcs /noconfig "/out:/Users/aegonaegon/Projects/12/12/bin/iPhoneSimulator/Debug/12.exe" "/r:/Developer/MonoTouch/usr/lib/mono/2.1/System.dll" "/r:/Developer/MonoTouch/usr/lib/mono/2.1/System.Xml.dll" "/r:/Developer/MonoTouch/usr/lib/mono/2.1/System.Core.dll" "/r:/Developer/MonoTouch/usr/lib/mono/2.1/monotouch.dll" /nologo /warn:4 /debug:+ /debug:full /optimize- /codepage:utf8 "/define:DEBUG"  /t:exe "/Users/aegonaegon/Projects/12/12/Main.cs" "/Users/aegonaegon/Projects/12/12/AppDelegate.cs" "/Users/aegonaegon/Projects/12/12/12ViewController.cs" "/Users/aegonaegon/Projects/12/12/12ViewController.designer.cs" 

Compiling interface definitions
/Developer/usr/bin/ibtool --errors --warnings --notices --output-format human-readable-text "/Users/aegonaegon/Projects/12/12/12ViewController.xib" --compile "/Users/aegonaegon/Projects/12/12/bin/iPhoneSimulator/Debug/12.app/12ViewController.nib" --sdk "/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator3.1.3.sdk"
/* com.apple.ibtool.errors */
Internal Error:
    Description: Illegal invocation. Try 'man ibtool' for more information.
ibtool exited with code 1
Build complete -- 1 error, 0 warnings

---------------------- Done ----------------------

Build: 1 error, 0 warnings 
```

我已经卸载了 xcode 4.32，单声道开发并重新安装但没有成功。关于这个问题的任何帮助都会有所帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T21:17:09.600

您可能在 /Developer 中有一个旧的 ibtool 来自以前的 Xcode 安装。显示什么`/Developer/usr/bin/ibtool --version`？

您可以通过执行以下操作确保您使用的是最新的 ibtool：

`sudo /usr/bin/xcode-select -switch /Applications/Xcode.app/Contents/Developer`

# xmpp - 如何计算/测量 xmpp 数据包/消息的大小？

> ID：10300936
> 
> 赞同：1
> 
> 时间：2012-04-24T15:19:47.980
> 
> 标签：xmpp, smack, xmppframework, whack

有没有办法计算/获取 xmpp 数据包/消息的大小？我试图找出在我的 openfire 服务器和使用 smack 和 xmppframework 的两个客户端之间发送的 xmpp 数据包的大小。我的总体目标是通过尝试不同的有效负载来优化我的网络性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:40:32.493

使用 Smack，您可以简单地注册一个 PacketListener 并通过计算 toXML() 方法的字节数来检查接收到的每个数据包的大小，并对所有传出数据包使用 PacketInterceptor。

我认为更好的方法是在网络上简单地使用某种数据包嗅探器，如[WireShark](http://www.wireshark.org/)。这能够过滤特定的协议。那时根本不需要了解实际端点的任何细节。Smack、XMPPFramework 和 Openfire 都变得无关紧要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T23:24:50.807

这实际上取决于您使用的库/框架。大多数将允许您将节对象转换为 XML 字符串，然后您只需计算该字符串的长度。

# android - Android SDK Manager，包的本地副本

> ID：10300938
> 
> 赞同：7
> 
> 时间：2012-04-24T01:05:22.413
> 
> 标签：android, sdk

在 Windows XP 上，有没有办法：

*   找到 Android SDK Manager 正在下载的包，
*   创建软件包的备份副本，

然后，在全新安装的 Windows XP 上：

*   安装 Android SDK 管理器，
*   将包的备份副本复制到“正确”位置，
*   并安装软件包？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T05:12:19.327

假设您使用的是最新的 Android SDK r18-

操作系统无关紧要，以下步骤也适用于 PC、Mac 或 Linux。

1.  下载所需平台的 SDK。
2.  安装所需的软件包，如 API 8、Google API 等。
3.  现在，安装所需的软件包后，您应该会在 SDK 安装目录中看到这些文件夹。( `platforms, extras, add-ons, system-images`)
4.  只需将它们复制到需要安装软件包的其他系统（先压缩，因为它们有数千个文件）。（事先安装SDK r18，解压zip或使用.exe，但不要运行SDK管理器更新）
5.  启动 SDK Manager，它应该会检测到包。

**或者**复制完整的 SDK 安装文件夹并将其复制到其他系统，但它只能在 Windows 到 Windows 和 Linux 到 Linux 或 Mac 到 Mac 上工作。

# java - 在 FragmentActivity 中向 ViewPager 添加一个新片段

> ID：10300945
> 
> 赞同：0
> 
> 时间：2012-04-24T15:20:13.357
> 
> 标签：java, android, android-fragments, android-fragmentactivity

我花了两天的大部分时间寻找解决我问题的答案，我发现很多接近但不特定于我需要的东西：

我想通过调用 FragmentPageAdapter 从当前的 FragmentActivity 内部向 viewPager 添加一个新的 FragmentActivity （或者至少，这是我认为我需要解决我的问题的方式）。

例如：在fragment 1中我想按一个按钮来更新并用新数据替换Fragment 2，然后将Fragment 2设置为当前查看的fragment。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:10:24.747

您可以做的是实现自定义 FragmentPagerAdapter 或 FragmentStatePagerAdapter （如果您有很多更复杂的片段）。

文档：http: [//developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)

适配器处理您的内容，因此您想对某个片段进行的任何调用或操作都可以从那里轻松完成。

您可以将适配器本身传递给其持有的每个片段，或者只实现侦听器接口，以便片段可以通过适配器触发更改。

如果它仍然是一个问题，我希望这可以帮助你！

# java - 搜索数组持有的新用户

> ID：10300947
> 
> 赞同：0
> 
> 时间：2012-04-24T15:20:25.817
> 
> 标签：java, android, arrays

我正在尝试搜索一个数组，如果两个字符串匹配，那么它将返回true，否则返回false，首先我想搜索该帐户是否已经存在，如果存在则搜索代码，如果两个exsis然后返回true

```
public boolean searchArray(String account, String code) {    
    for (Accounts a : bAccounts) {
        if (a.getAccount().equals(account)) {
            for (Accounts c : bAccounts) {
                if (c.getCode().equals(Code))
                    return true;
                }
            }
        }

    return false;
} 
```

认为我在这种搜索方法中有点迷失了，谁能帮我解决这个问题，谢谢。这一切都编译得很好，但似乎没有返回任何东西。我的 Accounts 类中有 get 方法，它具有 Account 和 Sort 的 get 和 set 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:26:04.583

```
public boolean searchArray(String account, String code) {    
    for (Accounts a : bAccounts) {
        if (a.getAccount().equals(account)
                  && a.getCode().equals(code)) {                
            return true;                    
        }
    }

    return false;
} 
```

内部 for 应该被移除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T16:06:22.400

您没有提到是否接受帐户和代码参数的空值。

如果可以/希望比较空值，这就是我的建议：

```
public boolean searchArray(String account, String code) {

    for (Account a : accounts) {
        if (account == null) {
            if (code == null) {
                if ((a.getAccount() == null) && (a.getCode() == null)) {
                    return true;
                }
            } else {
                if ((a.getAccount() == null) && code.equals(a.getCode())) {
                    return true;
                }
            }
        } else {
            if (code == null) {
                if (account.equals(a.getAccount()) && (a.getCode() == null)) {
                    return true;
                }
            } else {
                if (account.equals(a.getAccount()) && code.equals(a.getCode())) {
                    return true;
                }
            }
        }
    }

    return false;
} 
```

如果您不考虑帐户和代码参数的空值，我建议这样做：

```
public boolean searchArray(String account, String code) {
    // if you won't consider nulls then there's no need to search
    // when at least one of them is null
    if ((account == null) || (code == null)) {
        return false;
    }

    for (Account a : accounts) {
        if (account.equals(a.getAccount()) && code.equals(a.getCode())) {
            return true;
        }
    }

    return false;
} 
```

希望对你有帮助

# asp.net-mvc - 将数据从局部视图提交到控制器 MVC

> ID：10300955
> 
> 赞同：2
> 
> 时间：2012-04-24T15:20:41.367
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-partialview

我有一个就业记录列表，您也可以使用部分视图从同一页面添加就业记录。

这里的employment.cshtml 具有记录列表的部分视图和用于添加新记录的部分视图，该新记录出现在模式弹出窗口中。

```
<h2>Employment Records</h2>

  @{Html.RenderPartial("_employmentlist", Model);}                              

<p>
<a href="#regModal" class="btn btn_b" rel="fancyReg">Add New Record</a>
</p>

<div style="display:none">
    <div id="regModal"> 
              @{Html.RenderPartial("_AddEmployment", new ViewModelEmploymentRecord());}     

                        </div>
                    </div> 
```

这是部分视图_AddEmployment.cshtml

```
@using (Html.BeginForm("AddEmployment, Application"))
{                   
@Html.ValidationSummary(true)

<div class="formEl_a">

<fieldset>
    <legend></legend>

     <div class="sepH_b">

            <div class="editor-label">
                @Html.LabelFor(model => model.employerName)
            </div>

         etc....etc....

</fieldset>

</div>
  <p>
        <input type="submit" class="btn btn_d" value="Add New Record" />

    </p>

} 
```

这是我的应用程序控制器：

```
[HttpPost]
    public ActionResult AddEmployment(ViewModelEmploymentRecord model)
    {
        try
        {
            if (ModelState.IsValid)
            {

                Add Data.....
            }
        }
        catch
        {

        }

        return View(model);
    } 
```

为表单生成以下 html 时：

```
<form action="/Application/Employment?Length=26" method="post"> 
```

它带来了一个长度字符串？而是调用就业控制器？

希望一切都清楚......

**问题一：**当我从局部视图中单击提交按钮时，它不会转到指定的控制器以添加数据。谁能看到我哪里出错了？

**问题二：**当我开始工作时，我想用新记录更新就业清单……我这样做的方法是否正确？任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T15:27:17.973

答案 1：首先尝试这个，让我知道它是否会击中您的控制器。

```
 @using (Html.BeginForm("AddEmployment", "Application", FormMethod.Post)) 
```

回答 2：要更新就业列表，我假设您希望将模型保存到数据库中，然后将您的就业列表显示在同一页面或不同页面上，将数据库中的数据调用到列表或表格中显示。

**编辑：** 看起来好像您的表单属性没有被应用。对于您的employment.cshtml，我个人不会在我的@Html 语句周围使用{}。你不能做我上面所说的，因为你的错误只有在我写成时才会发生

```
 @using (Html.BeginForm("AddEmployment, Application", FormMethod.Post)) 
```

缺少那些结束引号是导致您的问题的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-23T00:40:38.570

我知道这是很老的问题它对你不起作用的原因是因为你的语法这是你的代码

```
@using (Html.BeginForm("AddEmployment, Application")) 
```

修复

```
@using (Html.BeginForm("AddEmployment", "Application")) 
```

问候

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-08T11:49:19.573

jQuery代码：

```
window.jQuery(document).ready(function () {
    $('#btnsave').click(function () {

        var frm = $("form");
        var data = new FormData($("form")[0]);
        debugger;
        $.ajax({
            url: '/Home/Update',
            type: "POST",
            processData: false,
            data: data,
            dataType: 'json',
            contentType: false,
            success: function (response) {
                alert(response);
            },
            error: function (er) { }
        });
        return false;
    });

}); 
```

控制器代码

```
[HttpPost]
    public JsonResult Update(Generation obj)
    {
        if (ModelState.IsValid)
        {
            return Json("done");
        }
        else
        {
            return Json("error create");
        }
    } 
```

使用这些代码，您可以使用 jquery 发布表单并在 jsonresult 中获得响应

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T16:00:24.960

你已经把这`@using (Html.BeginForm("AddEmployment, Application"))`试图做的是调用一个名为`"AddEmployment, Application"`我认为你的意思的动作`@using (Html.BeginForm("AddEmployment", "Application"))`

# linux - 这个 Cron 工作可能吗？

> ID：10300957
> 
> 赞同：-3
> 
> 时间：2012-04-24T15:20:49.533
> 
> 标签：linux, cron, crontab

我正在使用 Red Hat Linux 5 版本，我的应用程序是 Java EE Application 。

我们允许用户在我们的网站上上传图片。这些图片将存储在我们服务器的一个文件夹中。

现在我的问题是，每天在特定时间，我想从该文件夹中移动所有图像并移动到另一个文件夹，其中文件夹名称将是它被移动的那一天。

请让我知道这是否可能。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:26:10.453

```
man cron
man crontab 
```

编写一个小 bashscript，它具有您想要的行为。将它添加到您的 crontab 或如何在您的发行版中实现 cronjobs。（我使用的是arch linux，所以我不想给出具体说明，因为发行版之间存在差异......）

或者使用 java cron 实现并用 java 编写所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:58:16.333

为此，您必须创建一个 cron 作业以及一个 shell 脚本。

在 cron 中：

```
# The first minute of the first hour of day run the script
1 1 * * * /scripts/move_images 
```

* * *

在 /scripts/move_image

```
#!/bin/bash

# Pick date (YYYY-MM-DD)
date=`date +%Y-%m-%d`

# Create new dir
mkdir -p /local_of_new_folder/$date

# Move all images from old folder to new folder
mv /old_folder/* /local_of_new_folder/$date 
```

将脚本的模式更改为可执行文件

```
chmod +x /scripts/move_image 
```

对不起我的英语，我是巴西人:)

# c - 带有 Matlab 生成系数的滤波器的 C 实现

> ID：10300959
> 
> 赞同：2
> 
> 时间：2012-04-24T15:20:57.220
> 
> 标签：c, signal-processing

首先，这是对未来应用的一些研究。

我希望能够从 Matlab 滤波器设计和分析工具 (FDATool) 生成的 ac 头文件中提取系数。

[fdatool 设置 http://dl.dropbox.com/u/39710897/fdatool.png](http://dl.dropbox.com/u/39710897/fdatool.png)

我为 FDATool 使用了上述设置，然后生成了以下 C 头文件： [http ://dl.dropbox.com/u/39710897/fdacoefs.h](http://dl.dropbox.com/u/39710897/fdacoefs.h)

据我了解，我可以通过使用直接形式的差分方程来实现过滤器。我相信方程是 y(n) = b [0] x(n) + b [1] x(n–1) + b [2] x(n–2) – a [1] y(n–1) – a [2] y(n –2)

其中 b [0] -b [2]系数是零点，a [1]和 a [2]系数是极点。

这里的问题是我不完全确定头文件中的内容。这些信息似乎很难找到，这可能意味着我错过了一些非常明显的东西......

这是我认为我已经能够提取的信息：

*   过滤器由 3 个双二次（称为“双二次”）部分组成。
*   第 1 节的系数为：
    *   b0:0.129355475306511
    *   b1:-1.997004866600037
    *   b2:1.000000000000000
    *   a1:-1.995552659034729
    *   a2:0.996141731739044
*   第 2 节的系数为：
    *   b0:0.129355475306511
    *   b1:-1.999969959259033
    *   b2:1.000000000000000
    *   a1:-1.997882604598999
    *   a2:0.998035132884979
*   第 3 节的系数为：
    *   b0:0.011426069773734
    *   b1:0.000000000000000
    *   b2:-1.000000000000000
    *   a1:-1.993502736091614
    *   a2:0.993802070617676

问题：

1.  我的差分方程是否适合与头文件中的系数一起使用？
2.  我从头文件中提取的信息是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:23:24.793

查看屏幕截图，您似乎正在使用 Direct Form **II** biquad 部分（又名 Canonical Form） - 请参阅 Wikipedia 页面：[https](https://en.wikipedia.org/wiki/Digital_biquad_filter) ://en.wikipedia.org/wiki/Digital_biquad_filter并注意 Direct Form II 的差分方程（您似乎使用上面直接形式 I 的差分方程）。

![在此处输入图像描述](../Images/bb83c8b9b92c73752415519cf108b0c4.png)

![在此处输入图像描述](../Images/aa0cab05c22de7fbc154fd491aa8b12e.png)

请注意，维基百科页面上的图表上没有标记 w 术语，但它们是中间的延迟术语。

# android - 从多个类文件运行 junit 测试用例 (Robotium)

> ID：10300963
> 
> 赞同：3
> 
> 时间：2012-04-24T15:21:19.570
> 
> 标签：android, eclipse, junit, robotium

我实际上正在使用适用于 Android 的 Robotium 测试框架，但我相信它是基于 JUnit 的。我是 JUnit 和 TDD 的新手。

我想根据功能创建不同的测试类文件，例如“LoginTest.java”、“EditProfileTest.java”，每个文件都包含该功能的一些测试用例。

问题是，当我在 Eclipse 中单击 F11 运行它时，只会运行一个文件。我不想将所有测试用例放在一个文件中。有没有办法一次运行多个文件？或者其他解决这个问题的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T23:32:49.730

您可以创建一个 JUnit 测试套件，或者如果您只想在特定 java 包中的所有类中运行所有测试，您可以在 Eclipse 中通过右键单击包，选择 Run As 和 Android JUnit Test 来执行此操作。

# ms-access - 关闭 MS Access 应用程序时出错

> ID：10300964
> 
> 赞同：0
> 
> 时间：2012-04-24T15:21:29.037
> 
> 标签：ms-access

当我关闭 MS 访问应用程序 (application.mde) 时，我收到一个错误，看起来数据库已被刷新并正在获取其他一些记录。

错误消息：您作为事件属性设置输入的卸载表达式产生了错误：条件表达式中的数据类型不匹配。

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T15:31:09.690

/controls 表单的 OnFormat 属性可能设置为字符串“[Event Procedure]”以外的内容，或者可能未命名为有效宏。

# ios - 如何将 AudioFilePlayer AudioUnit 连接到 3DMixer？

> ID：10300965
> 
> 赞同：7
> 
> 时间：2012-04-24T15:21:31.977
> 
> 标签：ios, cocoa-touch, core-audio, audiounit

我正在尝试将 AudioFilePlayer AudioUnit 连接到 AU3DMixerEmbedded 音频单元，但没有成功。

这就是我正在做的事情：

1.  创建`AUGraph`一个`NewAUGraph()`

2.  打开图表

3.  初始化图表

4.  添加3个节点：

    *   输出节点：`kAudioUnitSubType_RemoteIO`
    *   混合器节点：`kAudioUnitSubType_AU3DMixerEmbedded`
    *   文件播放器节点：`kAudioUnitSubType_AudioFilePlayer`
5.  连接节点：

    *   文件播放器节点 -> 混合器节点
    *   混合器节点 -> 输出节点
6.  配置filePlayer Audio Unit播放需要的文件

7.  开始图表

这不起作用：它在 AUGraphInitialize 处出现错误 10868 (kAudioUnitErr_FormatNotSupported)。我认为问题是由于 filePlayer 和混音器之间的音频格式不匹配。我认为这是因为： - 如果我注释掉将 filePlayerNode 连接到 MixerNode ( `AUGraphConnectNodeInput(_graph, filePlayerNode, 0, mixerNode, 0)`) 并注释掉第 6 步，则不会报告任何错误。- 如果我将第 3 步替换为将 filePlayerNode 直接连接到 outputNode ( `AUGraphConnectNodeInput(_graph, filePlayerNode, 0, outputNode, 0)`)，则播放音频。

将filePlayerNode连接到mixerNode时我缺少哪些步骤？

这是完整的代码。它基于 Apple 的示例代码和我从互联网上找到的其他示例。（`AUGraphStart`称为后者）：

```
- (id)init
{
    self = [super init];
    if (self != nil)
    {
        {
            //create a new AUGraph
            CheckError(NewAUGraph(&_graph), "NewAUGraph failed");        
            // opening the graph opens all contained audio units but does not allocate any resources yet            
            CheckError(AUGraphOpen(_graph), "AUGraphOpen failed");                
            // now initialize the graph (causes resources to be allocated) 
            CheckError(AUGraphInitialize(_graph), "AUGraphInitialize failed");                    
        }

        AUNode outputNode;
        {
            AudioComponentDescription outputAudioDesc = {0};
            outputAudioDesc.componentManufacturer = kAudioUnitManufacturer_Apple;            
            outputAudioDesc.componentType = kAudioUnitType_Output;
            outputAudioDesc.componentSubType = kAudioUnitSubType_RemoteIO;
            // adds a node with above description to the graph
            CheckError(AUGraphAddNode(_graph, &outputAudioDesc, &outputNode), "AUGraphAddNode[kAudioUnitSubType_DefaultOutput] failed");
        }

        AUNode mixerNode;
        {
            AudioComponentDescription mixerAudioDesc = {0};
            mixerAudioDesc.componentManufacturer = kAudioUnitManufacturer_Apple;                                
            mixerAudioDesc.componentType = kAudioUnitType_Mixer;
            mixerAudioDesc.componentSubType = kAudioUnitSubType_AU3DMixerEmbedded;
            mixerAudioDesc.componentFlags = 0;
            mixerAudioDesc.componentFlagsMask = 0;
            // adds a node with above description to the graph
            CheckError(AUGraphAddNode(_graph, &mixerAudioDesc, &mixerNode), "AUGraphAddNode[kAudioUnitSubType_AU3DMixerEmbedded] failed");            
        }

        AUNode filePlayerNode;            
        {
            AudioComponentDescription fileplayerAudioDesc = {0};            
            fileplayerAudioDesc.componentType = kAudioUnitType_Generator;
            fileplayerAudioDesc.componentSubType = kAudioUnitSubType_AudioFilePlayer;
            fileplayerAudioDesc.componentManufacturer = kAudioUnitManufacturer_Apple;
            // adds a node with above description to the graph
            CheckError(AUGraphAddNode(_graph, &fileplayerAudioDesc, &filePlayerNode), "AUGraphAddNode[kAudioUnitSubType_AudioFilePlayer] failed");
        }

        //Connect the nodes
        {
            // connect the output source of the file player AU to the input source of the output node            
//            CheckError(AUGraphConnectNodeInput(_graph, filePlayerNode, 0, outputNode, 0), "AUGraphConnectNodeInput");                        

            CheckError(AUGraphConnectNodeInput(_graph, filePlayerNode, 0, mixerNode, 0), "AUGraphConnectNodeInput");
            CheckError(AUGraphConnectNodeInput(_graph, mixerNode, 0, outputNode, 0), "AUGraphConnectNodeInput");                                    
        }

        // configure the file player
        // tell the file player unit to load the file we want to play
        {
            //?????
            AudioStreamBasicDescription inputFormat; // input file's data stream description
            AudioFileID inputFile; // reference to your input file            

            // open the input audio file and store the AU ref in _player
            CFURLRef songURL = (__bridge CFURLRef)[[NSBundle mainBundle] URLForResource:@"monoVoice" withExtension:@"aif"];
            CheckError(AudioFileOpenURL(songURL, kAudioFileReadPermission, 0, &inputFile), "AudioFileOpenURL failed");

            //create an empty MyAUGraphPlayer struct
            AudioUnit fileAU;

            // get the reference to the AudioUnit object for the file player graph node
            CheckError(AUGraphNodeInfo(_graph, filePlayerNode, NULL, &fileAU), "AUGraphNodeInfo failed");

            // get and store the audio data format from the file
            UInt32 propSize = sizeof(inputFormat);
            CheckError(AudioFileGetProperty(inputFile, kAudioFilePropertyDataFormat, &propSize, &inputFormat), "couldn't get file's data format");            

            CheckError(AudioUnitSetProperty(fileAU, kAudioUnitProperty_ScheduledFileIDs, kAudioUnitScope_Global, 0, &(inputFile), sizeof((inputFile))), "AudioUnitSetProperty[kAudioUnitProperty_ScheduledFileIDs] failed");

            UInt64 nPackets;
            UInt32 propsize = sizeof(nPackets);
            CheckError(AudioFileGetProperty(inputFile, kAudioFilePropertyAudioDataPacketCount, &propsize, &nPackets), "AudioFileGetProperty[kAudioFilePropertyAudioDataPacketCount] failed");

            // tell the file player AU to play the entire file
            ScheduledAudioFileRegion rgn;
            memset (&rgn.mTimeStamp, 0, sizeof(rgn.mTimeStamp));
            rgn.mTimeStamp.mFlags = kAudioTimeStampSampleTimeValid;
            rgn.mTimeStamp.mSampleTime = 0;
            rgn.mCompletionProc = NULL;
            rgn.mCompletionProcUserData = NULL;
            rgn.mAudioFile = inputFile;
            rgn.mLoopCount = 1;
            rgn.mStartFrame = 0;
            rgn.mFramesToPlay = nPackets * inputFormat.mFramesPerPacket;

            CheckError(AudioUnitSetProperty(fileAU, kAudioUnitProperty_ScheduledFileRegion, kAudioUnitScope_Global, 0,&rgn, sizeof(rgn)), "AudioUnitSetProperty[kAudioUnitProperty_ScheduledFileRegion] failed");

            // prime the file player AU with default values
            UInt32 defaultVal = 0;
            CheckError(AudioUnitSetProperty(fileAU, kAudioUnitProperty_ScheduledFilePrime, kAudioUnitScope_Global, 0, &defaultVal, sizeof(defaultVal)), "AudioUnitSetProperty[kAudioUnitProperty_ScheduledFilePrime] failed");

            // tell the file player AU when to start playing (-1 sample time means next render cycle)
            AudioTimeStamp startTime;
            memset (&startTime, 0, sizeof(startTime));
            startTime.mFlags = kAudioTimeStampSampleTimeValid;
            startTime.mSampleTime = -1;
            CheckError(AudioUnitSetProperty(fileAU, kAudioUnitProperty_ScheduleStartTimeStamp, kAudioUnitScope_Global, 0, &startTime, sizeof(startTime)), "AudioUnitSetProperty[kAudioUnitProperty_ScheduleStartTimeStamp]");

            // file duration
            //double duration = (nPackets * _player.inputFormat.mFramesPerPacket) / _player.inputFormat.mSampleRate;
        }            

    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T18:52:22.997

我没有在您的代码中看到您为音频单元设置了适当的 kAudioUnitProperty_StreamFormat 。您还必须检查错误结果代码，以查看您选择的流格式设置是否真正被正在配置的音频单元支持。如果没有，请尝试其他格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T07:03:18.070

（AUGraphConnectNodeInput（_graph，filePlayerNode，0，mixerNode，0））（AUGraphConnectNodeInput（_graph，mixerNode，0，outputNode，0））

如果有帮助，请尝试这样做。仅在右侧节点中输入左侧节点的信息。所以在第一行中，播放器节点是混合器节点的输入，现在混合器节点包含播放器和混合器，因此将混合器节点添加到输出节点。

# c# - 通过 xaml.cs 告诉数据透视页面打开哪个页面

> ID：10300966
> 
> 赞同：0
> 
> 时间：2012-04-24T15:21:32.607
> 
> 标签：c#, windows-phone-7, xaml

我通过这样做导航到我的数据透视页面

```
this.NavigationService.Navigate(new Uri("/PivotScreen.xaml", UriKind.Relative)); 
```

有没有一种简单的方法来告诉它要在哪个页面上打开该枢轴上有 5 个页面？

非常感谢，-代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T15:27:57.333

一个简单的`thisPivot.SelectedIndex = 0;`应该做到这一点。

**编辑**

我将添加代码以澄清。

.xaml 文件

```
 <controls:Pivot Name="thisPivot" Title="MY APPLICATION">
        <!--Pivot item one-->
        <controls:PivotItem Header="first">
            <!--Double line list with text wrapping-->
            <ListBox x:Name="FirstListBox" Margin="0,0,-12,0" ItemsSource="{Binding Items}">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                      <StackPanel Margin="0,0,0,17" Width="432" Height="78">
                          <TextBlock Text="{Binding LineOne}" TextWrapping="Wrap" Style="{StaticResource PhoneTextExtraLargeStyle}"/>
                          <TextBlock Text="{Binding LineTwo}" TextWrapping="Wrap" Margin="12,-6,12,0" Style="{StaticResource PhoneTextSubtleStyle}"/>
                      </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </controls:PivotItem>

        <!--Pivot item two-->
        <controls:PivotItem Header="second"> 
            <!--Triple line list no text wrapping-->
                <ListBox x:Name="SecondListBox" Margin="0,0,-12,0" ItemsSource="{Binding Items}">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Margin="0,0,0,17">
                                <TextBlock Text="{Binding LineOne}" TextWrapping="NoWrap" Margin="12,0,0,0" Style="{StaticResource PhoneTextExtraLargeStyle}"/>
                                <TextBlock Text="{Binding LineThree}" TextWrapping="NoWrap" Margin="12,-6,0,0" Style="{StaticResource PhoneTextSubtleStyle}"/>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
        </controls:PivotItem>
    </controls:Pivot> 
```

背后的代码

```
// Constructor
    public MainPage()
    {
        InitializeComponent();

        // Set the data context of the listbox control to the sample data
        DataContext = App.ViewModel;
        this.Loaded += new RoutedEventHandler(MainPage_Loaded);
    }

    // Load data for the ViewModel Items
    private void MainPage_Loaded(object sender, RoutedEventArgs e)
    {
        thisPivot.SelectedIndex = 1;

        if (!App.ViewModel.IsDataLoaded)
        {
            App.ViewModel.LoadData();
        }
    } 
```

# asp.net - 显示已删除数据的 Gridview

> ID：10300970
> 
> 赞同：0
> 
> 时间：2012-04-24T15:21:51.313
> 
> 标签：asp.net

我只是在我的 GridView 中显示我上传的文件详细信息，因此我的 GridView 中只有一行 - 不允许多个文件。

当我删除该单行并尝试上传新文件时，它显示 2 行（新文件​​和已删除文件）。

我已经尝试过使用`GridView.DataSource = null`and `GridView.DataBind()`。

注意：我在删除后重新绑定了我的 GridView，但它仍然显示已删除的文件。

```
protected void DeleteLinkButton_Click(object sender, EventArgs e)
{
    if (Session["name"] != null)
    {
        string strPath = Session["filepath"].ToString();
        System.IO.File.Delete(strPath);

        GridView2.Rows[0].Visible = false;
        Label8.Text = "";
        Session["filename"] = null;
        Button3.Enabled = true;
    }

    GridView2.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T16:31:16.503

In some cases I've had to do something like this:

```
//page level variable
bool refreshRequired = false;

protected void DeleteLinkButton_Click(object sender, EventArgs e)
{
    if (Session["name"] != null)
    {
        string strPath = Session["filepath"].ToString();
        System.IO.File.Delete(strPath);

        GridView2.Rows[0].Visible = false;
        Label8.Text = "";
        Session["filename"] = null;
        Button3.Enabled = true;

        refreshRequired = true;
    }

}

protected void Page_PreRender(object sender, EventArgs e)
{
    if(refreshRequired)
    {
        //whatever you to to set your grids dataset, do it here
        //but be sure to get the NEW data
    }
} 
```

At the time of `Delete`, your grid is bound to the old data. When you change the data, you must rebind it to the new.

# java - 使用 log4j 记录大型 xml 文件

> ID：10300974
> 
> 赞同：0
> 
> 时间：2012-04-24T15:22:06.133
> 
> 标签：java, logging, log4j

我正在尝试使用 log4j 记录一个大的 xml 文件（大约 1mb），但我不断收到此错误：

log4j:ERROR 检测到溢出，中止直到解决。最后的日志请求：...

有没有人做过这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T16:01:00.537

这篇[文章](https://stackoverflow.com/questions/2141601/how-to-set-log4j-with-unlimited-max-file-size)描述了为 log4j 设置最大文件大小。你在使用 RollingFileAppender 吗？如果是这种情况，那么它的默认最大文件大小为 10 MB，如[api](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/RollingFileAppender.html)中所述。增加这个限制应该足以解决问题。

# python - Google App Engine 上的 Cookie 存储

> ID：10300976
> 
> 赞同：0
> 
> 时间：2012-04-24T15:22:11.300
> 
> 标签：python, google-app-engine, cookies, queue, task

极端新手，提前道歉，我不知道我在做什么 - 但我真的环顾四周。

我正在下载登录表单后面的几十页并在 GAE 上运行结果。我想将任务队列中的每个页面读取和数据库写入排入队列。当我切换到任务队列时，我意识到我在传递会话时遇到了问题。

我使用 urllib2 创建了一个开瓶器：

```
 cj = cookielib.CookieJar()
    session = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
    session.addheaders.append(('User-agent', 'Mozilla/4.0'))  
    login_data = urllib.urlencode({ 'username' : 'guest',
                                    'password' : 'guest',
                                    'Submit1'  : 'Submit'})  
    resp = session.open(self.login_page, login_data, timeout=20) 
    self.session = session 
```

以前我只在事物的前端实例化这个类一次，创建一个会话实例变量供所有人使用，然后传递我的实例以保持上下文。使用任务队列我不能传递对象，所以当我的请求处理程序被调用时，我不能给他对开启器或 cookie 的引用。

有没有办法存储或传递开瓶器或 cookie 信息，这样我就可以构建一个新的开瓶器而无需每次重新登录？我可以通过 headers 字典将 cookie 信息传递给每个处理程序吗？在内存缓存中填充一些东西？我到底需要传递什么才能将 cookie 重新放入有效的开瓶器中？

非常感谢所有参与上述内容的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:04:31.577

您可以通过[延迟库](https://developers.google.com/appengine/articles/deferred)而不是任务队列传递对象。

但出于可靠性原因，我建议您将对象存储在数据存储中，并且只在任务队列中传递引用。

# android - 如果图像相同，我应该为所有可绘制文件夹（ldpi-mdpi-hdpi）创建调整大小的图像吗？

> ID：10300979
> 
> 赞同：0
> 
> 时间：2012-04-24T15:22:23.597
> 
> 标签：android, image, hdpi, mdpi

如果图像相同但仅调整大小，我应该创建（调整大小）所有图像吗？还是让系统为我调整图像大小并只发布带有 hdpi 图像的应用程序？

对我来说，如果图像不同，则创建新图像是有意义的，例如，如果调整大小的图像不适合 ldpi 屏幕，则需要使用更少的信息创建另一个图像。

如果我只发布带有 hdpi 图像的应用程序，我会在小型设备上遇到内存问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:28:02.663

我认为您应该为每种类型的屏幕使用特定的可绘制对象。通过这样做，您可以确定每个屏幕中的 UI 都是相同的。

我不知道你是否已经读过这篇文章，但这里有一篇很好的文章，它解释了支持多屏幕的最佳方式[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# c++ - 使用目标和调用方法？

> ID：10300986
> 
> 赞同：1
> 
> 时间：2012-04-24T15:22:49.663
> 
> 标签：c++

我可能已经有点习惯 Java 并且发现这比它应该的更难。这就是我所拥有的。

```
myObject[0] = new item1(this);

class item1
{
private:
    int x;
    int y;

public:    
    item1( passedPointer* pOne )
    {
        x = 5;
        y = 5;
    }

    int returnX() { return x; }

    int returnY() { return y; }
} 
```

然后在另一种方法中，我想我可以说：

```
void check()
{
    int y = item1.returnY();
    int x = item1.returnX();            
} 
```

但我遇到了一个常见错误：非静态成员引用必须相对于特定对象。

这个类 item1 只有一个实例，最好的方法是什么？这只是我实际正在做的事情的简化片段，而不是实际代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T15:28:32.423

Item1 是一个类。您必须先创建它的实例，然后才能访问其非静态成员。尝试在[此处](http://www.cplusplus.com/doc/tutorial/classes/)查找一些基本信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T15:29:37.713

```
void check(){
   int y = item1.returnY;
   int x = item1.returnX;  
} 
```

这在 Java 中也是不正确的，因为静态`returnX`也不`returnY`是，你需要一个对象来应用操作，你还需要方法调用的括号：

```
void check() {
   item1 i;
   int y = i.returnY();
   int x = i.returnX();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-24T15:34:38.793

也许实现[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)不会对您造成伤害，因为您只需要一个对象实例。您也可以将对象声明为函数的全局或静态对象，然后获取值。

再一次，您也可以将函数声明为静态函数，并添加另一个函数来初始化这些方法需要返回的变量的静态值。根据您的情况，有很多解决方案无法通过您粘贴的少量代码完全掌握。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-24T15:36:19.637

您使用以下行创建了 item1 类的实例

```
myObject[0] = new item1(this); 
```

与 JAVA 不同，在 C++ 中有指针，new 返回指向对象的指针（因此 myObject[0] 是指向实例的指针），因此您需要 -> 运算符。要激活您应该编写的方法：

```
myObject[0]->returnX(); 
```

如果您希望只有一个实例而不是将类实现为单例。

# c++builder - 迭代 TVertScrollBox 的子级

> ID：10300990
> 
> 赞同：1
> 
> 时间：2012-04-24T15:23:02.893
> 
> 标签：c++builder, firemonkey, c++builder-xe2

我有一个单一`TForm`的`TVertScrollBox`。我已经添加了 6`TPanels`作为 this 的孩子`TVertScrollBox`。

我想遍历每个面板并检查每个面板的`Tag`属性，但我找不到正确的方法。

为了进行测试，我`OnClick`为其中一个面板添加了一个事件处理程序，其中包含以下代码：

```
void __fastcall TForm1::Panel1Click(TObject *Sender)
{
    int i;

    for (i = 0; i < this->VertScrollBox1->ChildrenCount; ++i)
    {
        ShowMessage("Child: " + this->VertScrollBox1->Children[i]->Name);
    }

    for (i = 0; i < this->VertScrollBox1->ComponentCount; ++i)
    {
        ShowMessage("Component: " + this->VertScrollBox1->Components[i]->Name);
    }
} 
```

似乎该`ChildrenCount`属性总是返回`2`，并且每个子项的`Name`显示 by`ShowMessage`是一个空字符串，即使每个面板都有一个唯一的`Name`属性。

该`ComponentCount`属性始终返回`1`，并且再次显示`Name`始终为空字符串。

有人能告诉我使用哪些属性或方法来迭代这些孩子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T20:16:47.403

Children & ChildrenCount 是要使用的正确属性，但听起来您的面板存储在滚动框中的容器中。（我已经在其他组件中看到了这一点，并且我不在我的开发机器上进行研究）。

检查两个孩子的班级名称，以及他们的孩子是什么。当您确定了哪个子项（由 ClassName 标识）是容器时，您将知道如何深入到您的面板。

# android - 带有动画的精美按钮

> ID：10300993
> 
> 赞同：-2
> 
> 时间：2012-04-24T15:23:08.713
> 
> 标签：android, animation

我想在双扭闹钟中创建一个 2 状态开关按钮（开/关）

-> [http://www.design-by-izo.com/wp-content/uploads/2012/03/Screenshot_2012-03-30-20-11-30.png](http://www.design-by-izo.com/wp-content/uploads/2012/03/Screenshot_2012-03-30-20-11-30.png)

按下按钮时，它会以花哨的滑入效果切换其标题。我已经知道 android 动画，但无论如何我没有在单个视图中完成这项工作。

编辑：在 ICS 之前有没有办法做到这一点？（不使用 ICS 的代码......）

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:32:58.737

您正在寻找一个[android 开关](http://developer.android.com/reference/android/widget/Switch.html)- 它已经为您完成了。您只需要为开关的样式提供自己的自定义图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:40:09.760

Android 上没有像 iPhone 上的幻灯片效果。然而，做一个两态的 btn 很容易。只需像这样创建一个xml文件并将drawables放在文件夹中：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<item android:drawable="@drawable/my_btn_pressed_bkgnd" android:state_pressed="true"/>
<item android:drawable="@drawable/my_btn_disabled_bkgnd" android:state_enabled="false"/>
<item android:drawable="@drawable/my_btn_unpressed_bkgnd" android:state_enabled="true"/> 
```

# windows - 安装到特定用户文件夹更改为安装到当前用户文件夹

> ID：10300994
> 
> 赞同：2
> 
> 时间：2012-04-24T15:23:19.680
> 
> 标签：windows, installation, inno-setup, desktop-shortcut

如果（使用 Inno Setup）我将 MyApp 安装到 C:\Users\User1\MyApp 并在公共桌面上创建一个快捷方式。这个快捷方式正确指向了User1桌面上的C:\Users\User1\MyApp\MyApp.exe，但是却指向了User2桌面上的C:\Users\User2\MyApp\MyApp.exe！

我知道在用户文件夹中创建机器安装会遇到问题，但我们遇到了许多过去完全这样做过的客户（当我们或多或少地为每个用户安装时）。那么如何为所有用户设置指向 Users\User1 文件夹的快捷方式呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T16:42:33.447

请参阅我在新闻组中的[冗长](http://news.jrsoftware.org/read/article.php?id=95841&group=jrsoftware.innosetup#95841) [回复。](http://news.jrsoftware.org/read/article.php?id=95842&group=jrsoftware.innosetup#95842)

总而言之，User2 无法可靠地访问 User1 的配置文件，并且似乎 Explorer 正在更改目标以适应。只有在 1）它无法访问该文件夹或 2）它在域上并假设漫游配置文件时，它才可能这样做，但由于它是未定义的行为，它可以做任何事情。

最好的办法是阻止它安装到 c:\users（或 O/S 等效项）下。

如果您有用户将从“每个用户”安装升级，您将需要使用不同的安装，`AppID`这样它就不会尝试升级现有安装。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T06:24:05.120

更好的方法是将您的应用程序安装在驱动器`c:\program files\{your app folder}\{appname}.exe`或任何位置，除了`{UserDesktop}`

然后使用 Inno Setup contants`{commondesktop}`而不是`{userdesktop}`，这会将您的快捷方式放置到`C:\Users\Public\Desktop`所有用户都可以看到的地方，即使是在安装之前创建的新用户也可以拥有它。

例子

```
[Files]
Source: MyApp.exe; DestDir: {app};

[Icons]
Name: **"{commondesktop}\[You app Folder]**"; Filename: MyApp.exe; Tasks: desktopicon; IconFilename: MyApp.exe 
```

或者，如果您仍然坚持，请使用以下代码

```
[Files]
Source: MyApp.exe; DestDir: {commondesktop}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T00:49:40.507

1.  我认为您必须创建新软件包，然后卸载以前的软件包，然后使用新软件包正确安装它。

2.  您必须手动将应用程序文件夹 [C:\Users\User1\MyApp] 移动到 C:\Users\Public\Desktop，并删除快捷方式，然后创建指向 C:\Users\Public\Desktop\MyApp\ 的新快捷方式我的应用程序

3.  或者最糟糕的是，将文件夹 [C:\Users\User1\MyApp] 或 User1 帐户的安全性更改为非私人...以便任何用户都可以访问该文件夹...这里是有关如何执行此操作的链接 a。[http://support.microsoft.com/kb/930987](http://support.microsoft.com/kb/930987) b. [http://www.scribd.com/doc/101389/Password-Protecting-and-Privatizing-Windows-XP-User-Accounts](http://www.scribd.com/doc/101389/Password-Protecting-and-Privatizing-Windows-XP-User-Accounts)

或使用谷歌或任何搜索引擎搜索如何删除 xp 中的私有化文件夹

# java - 在java中发出http请求的最简单方法

> ID：10300998
> 
> 赞同：0
> 
> 时间：2012-04-24T15:23:31.703
> 
> 标签：java, maven

我正在寻找一个 Maven 工件或一些预先存在的框架，它将把 http 请求变成一个 1 班轮。对于那些熟悉 Ruby 的人，我正在考虑一些支持 get、put、post 等的 Httparty 行。

前任：

```
Response response = SomeLibrary.get("https://api.google.com/maps")
int code = response.code
String body = response.body 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T15:26:29.720

我们使用 apache commons http

```
 <dependency>
        <groupId>commons-httpclient</groupId>
        <artifactId>commons-httpclient</artifactId>
        <version>3.1</version>
    </dependency> 
```

它非常简单并且支持许多功能，尽管它不是一个单一的衬里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T15:25:10.913

试试这个[Url.openConnection()](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html#openConnection%28%29)和[HttpUrlConnection](http://docs.oracle.com/javase/6/docs/api/java/net/HttpURLConnection.html)

# jquery - jQuery选项卡：能够更改选项卡但内容不加载

> ID：10300999
> 
> 赞同：0
> 
> 时间：2012-04-24T15:23:35.800
> 
> 标签：jquery, jquery-tabs

我正在尝试根据按钮单击更改选项卡，但不知何故它不起作用。它确实会更改选项卡，但不会加载内容，也不会调用 select 或 show 事件。这就是我的标记的样子：

```
<div id="content">
   <ul>
      <li><a id="tab1" href="Page1.aspx"><span>Tab 1</span></a></li>
      <li><a id="tab3" href="Page2.aspx"><span>Tab 2</span></a></li>
      <li><a id="tab4" href="Page3.aspx"><span>Tab 3</span></a></li>
      <li><a id="tab5" href="Page4.aspx"><span>Tab 4</span></a></li>
      <li><a id="tab7" href="Page5.aspx"><span>Tab 5</span></a></li>
   </ul>
</div>

<button id="Button1" onclick="JavaScript:return ChangeTab();">Go to next tab</button>

function ChangeTab()
    {
         var $tabs = $('#content').tabs();
         var selected = $tabs.tabs('option', 'selected');
         $tabs.tabs("option", "selected", selected + 1);
         //$tabs.tabs('select', selected + 1);
         return false;
    } 
```

这就是我初始化选项卡的方式：

```
$( "#content" ).tabs(); 
```

有人可以指出我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T15:29:11.737

您用于选择选项卡的代码似乎不正确。您正在进行的某些调用传递了太多（或不正确）的参数。你应该这样做：

```
$('#Button1').click(function()
{
    var currentTab = $('#content').tabs('option', 'selected');
    var newTab = parseInt(currentTab) + 1;

    $('#content').tabs('select', newTab);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:46:04.203

```
function ChangeTab(){
         var $tabs = $('#content');
         var selected = $tabs.tabs('option', 'selected');
         $tabs.tabs("option", "selected", selected + 1);
         $tabs.tabs('select', selected + 1);
}​ 
```

演示：http: [//jsfiddle.net/ZffYf/](http://jsfiddle.net/ZffYf/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T16:16:16.030

您的 HTML 或 Javascript 代码有问题。它应该可以工作：这是一个最小的工作演示[http://jsfiddle.net/pomeh/Csdf4/](http://jsfiddle.net/pomeh/Csdf4/)

HTML 代码

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">A</a></li>
        <li><a href="#tabs-2">B</a></li>
        <li><a href="#tabs-3">C</a></li>
        <li><a href="#tabs-4">D</a></li>
        <li><a href="#tabs-5">E</a></li>
    </ul>
    <div id="tabs-1">Content A</div>
    <div id="tabs-2">Content B</div>
    <div id="tabs-3">Content C</div>
    <div id="tabs-4">Content D</div>
    <div id="tabs-5">Content E</div>
</div>

<input type="button" value="Go next" onclick="goNext();" /> 
```

Javascript代码

```
var $tabs = $( "#tabs" );

// initialize once
$tabs.tabs({
    select: function(event, ui) {
        console.log( "select event" );
    },
    show: function(event, ui) {
        console.log( "show event" );
    }
});

function goNext() {
    // only "select" the next element in the handler
    var index = $tabs.tabs( "option", "selected" );
    $tabs.tabs( "select", index+1 );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T16:21:02.207

```
$(function() {
    $('#content').tabs();

    $("#content").tabs("option", "selected", 1);

    var index = $("#content").tabs("option", "selected");

    $("#button1").click(function() {
        $("#content").tabs("option", "selected", 1);
    });

    window.setInterval(yourfunction, 1000);

    function yourfunction() {
        var x = (index++) % 3;
        $("#content").tabs("option", "selected", x);
    }
}); 
```

在 Fiddler 中试试这个例子，抱歉我没有详细解释。

[JSFiddle](http://jsfiddle.net/U3kYS/)