# StackOverflow 问答 10317000-10317999

# java - 嵌套 if 语句。每次都遵循相同的条件

> ID：10317005
> 
> 赞同：1
> 
> 时间：2012-04-25T13:44:16.163
> 
> 标签：java, tic-tac-toe

我只得到了打印到小程序的错误条件。我假设我的嵌套 if 语句有问题？

ClickableBox.Java

```
public class ClickableBox extends MouseAdapter {

  private int x, y, width, height;
  private Color borderColor, backColor, oldColor;
  private boolean drawBorder, clicked, isX;
  private Container parent;
  TheGame game;

  public ClickableBox(int x, int y, int width, int height, Color borderColor,
      Color backColor, boolean drawBorder, TheGame parent) {

    this.x = x;
    this.y = y;
    this.width = width;
    this.height = height;
    this.borderColor = borderColor;
    this.backColor = backColor;
    this.drawBorder = drawBorder;
    this.parent = parent;

  }

  public void draw(Graphics g) {

    oldColor = g.getColor();
    g.setColor(backColor);
    g.fillRect(x, y, width, height);
    if (drawBorder) {
      g.setColor(borderColor);
      g.drawRect(x, y, width, height);
    }
    g.setColor(oldColor);
  }

  public void mouseReleased(MouseEvent e) {

    if (x < e.getX() && e.getX() < x + width && y < e.getY()
        && e.getY() < y + height) {
      clicked = true;
      setX(!isX);
      parent.repaint();

    }
  }

  public boolean isClicked() {
    return clicked;
  }

  public int getX() {
    return x;
  }

  public void setX(int x) {
    this.x = x;
  }

  public int getY() {
    return y;
  }

  public void setY(int y) {
    this.y = y;
  }

  public int getWidth() {
    return width;
  }

  public void setWidth(int width) {
    this.width = width;
  }

  public int getHeight() {
    return height;
  }

  public void setHeight(int height) {
    this.height = height;
  }

  public Color getBorderColor() {
    return borderColor;
  }

  public void setBorderColor(Color borderColor) {
    this.borderColor = borderColor;
  }

  public Color getBackColor() {
    return backColor;
  }

  public void setBackColor(Color backColor) {
    this.backColor = backColor;
  }

  public boolean isDrawBorder() {
    return drawBorder;
  }

  public void setDrawBorder(boolean drawBorder) {
    this.drawBorder = drawBorder;
  }

  public boolean isX() {
    return isX;
  }

  public void setX(boolean isX) {
    this.isX = isX;
  }

} 
```

TicTacToeBox.Java

```
 public class TicTacToeBox extends ClickableBox {

  Container parent;
  TheGame game;

  public TicTacToeBox(int x, int y, int width, int height, Color borderColor,
      Color backColor, boolean drawBorder, TheGame parent) {
    super(x, y, width, height, borderColor, backColor, drawBorder, parent);

    this.parent = parent;

  }

  public void draw(Graphics g) {

    if (isClicked()) {
      if (super.isX()) {
        g.drawLine(getX(), getY(), getX() + getWidth(), getY() + getHeight());
        g.drawLine(getX() + getWidth(), getY(), getX(), getY() + getHeight());
        if (isDrawBorder()) {
          g.drawRect(getX(), getY(), getWidth(), getHeight());
        }
      } else {
        g.drawOval(getX() + 3, getY() + 3, getWidth() - 6, getHeight() - 6);
        if (isDrawBorder()) {
          g.drawRect(getX(), getY(), getWidth(), getHeight());
        }
      }
    } else {
      g.drawRect(getX(), getY(), getWidth(), getHeight());
    }
  }

} 
```

这也是实际的小程序代码...... TheGame.java

```
public class TheGame extends Applet {

  private final int START_X = 20;
  private final int START_Y = 40;
  private final int ROWS = 3;
  private final int COLS = 3;
  private final int BOX_WIDTH = 70;
  private final int BOX_HEIGHT = 70;

  private TicTacToeBox boxes[][];

  private Button resetButton;
  private boolean isX;

  private boolean blank;

  public void init() {
    boxes = new TicTacToeBox[ROWS][COLS];

    resize(300, 300);
    buildBoxes();

    resetButton = new Button("Reset Game");
    resetButton.addActionListener(new ActionListener() {
      public void actionPerformed(ActionEvent e) {

        buildBoxes();
        repaint();
      }
    });
    add(resetButton);
  }

  public void paint(Graphics g) {
    // loop through the boxes rows

    setX(!isX);
    // System.out.println(isX());

    for (int row = 0; row < boxes.length; row++) {
      for (int col = 0; col < boxes[row].length; col++) {

        boxes[row][col].draw(g);

        if (boxes[row][col].isClicked()) {

        }
      }
    }

  }

  private void buildBoxes() {

    for (int row = 0; row < boxes.length; row++) {
      for (int col = 0; col < boxes[row].length; col++) {
        boxes[row][col] = new TicTacToeBox(START_X + col * BOX_WIDTH, START_Y
            + row * BOX_HEIGHT, BOX_WIDTH, BOX_HEIGHT, Color.black,
            Color.white, true, this);
        addMouseListener(boxes[row][col]);

      }
    }
  }

  public boolean isX() {
    return isX;
  }

  public void setX(boolean isX) {
    this.isX = isX;
  }

  public boolean isBlank() {
    return blank;
  }

  public void setBlank(boolean blank) {
    this.blank = blank;
  }

} 
```

任何关于我如何让条件从真到假交替并实际输出我对每个条件的输入的任何输入都将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T13:52:48.537

你不断地重新实例化 TheGame，这就是为什么你总是得到相同的 if 分支。`game`应该是你封闭类的成员而不是局部变量，你应该在你的构造函数中初始化它：

```
public class TicTacToeBox {
    private TheGame game;

    // I am guessing your constructor is something like this (but it is just guessing)
    public TicTacToeBox(int i, int j , int k , int l, Color c1, Color c2, boolean b, TheGame game) {
         ...
         this.game = game;
    }
    ...
    public void draw(Graphics g) {
        // TheGame game = new TheGame();
        ...
    } 
```

# xpath - XPath - 选择第一个子元素而不考虑父元素

> ID：10317009
> 
> 赞同：1
> 
> 时间：2012-04-25T13:44:26.747
> 
> 标签：xpath

我有两个 XML 文档

```
<documentA xmlns="namespaceA">
   <IsSuccess>true</IsSuccess>
</documentA>

<documentB xmlns="namespaceB">
   <IsSuccess>true</IsSuccess>
</documentB> 
```

无论父节点和命名空间是什么，我都想选择 IsSuccess 元素

类似 //IsSuccess?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:21:00.833

找到答案xpath： `//*[local-name()='IsSuccess']`

# javascript - 超过 15 个 KML 层在基于 Google Maps API 的页面上不可见

> ID：10317013
> 
> 赞同：2
> 
> 时间：2012-04-25T13:44:41.287
> 
> 标签：javascript, google-maps, google-maps-api-3, kml

我有这个奇怪的问题：我必须从单独的 KML 文件生成许多 KML 图层到单个地图窗口。金额在一对夫妇和不到五十个之间变化。目前，当我将 1、4 或 15 个 KML 文件（作为 URI）作为数组提供时，我的代码正在产生正确的行为。好的，所以基本上我知道我的代码可以正常工作并且我的 KML 文件足够有效。

这是我如何使用 23 个 KML URI 的数组调用地图初始化的示例：

`<body id="body" onload="initmap(new Array('https://CENCORED/kml/project64.kml', 'https://CENCORED/kml/project65.kml', 'https://CENCORED/kml/project66.kml', 'https://CENCORED/kml/project67.kml', 'https://CENCORED/kml/project69.kml', 'https://CENCORED/kml/project70.kml', 'https://CENCORED/kml/project71.kml', 'https://CENCORED/kml/project72.kml', 'https://CENCORED/kml/project75.kml', 'https://CENCORED/kml/project76.kml', 'https://CENCORED/kml/project80.kml', 'https://CENCORED/kml/project81.kml', 'https://CENCORED/kml/project82.kml', 'https://CENCORED/kml/project83.kml', 'https://CENCORED/kml/project84.kml', 'https://CENCORED/kml/project85.kml', 'https://CENCORED/kml/project86.kml', 'https://CENCORED/kml/project87.kml', 'https://CENCORED/kml/project88.kml', 'https://CENCORED/kml/project89.kml', 'https://CENCORED/kml/project90.kml', 'https://CENCORED/kml/project91.kml', 'https://CENCORED/kml/project92.kml'))">`

但是，当我为我的代码提供一个包含十六 (16) 个或更多 KML URI 的数组时，就会出现问题。然后这些 KML 文件将永远不会在地图画布上呈现。但是，任何地方都没有出现错误，而且：我知道 KML 文件在地图上“存在”。我怎么知道这个？正如您所看到的，我的代码为每个 KML 文件生成了一个 InfoWindow，并且因为我知道一些 KML 文件的位置，所以我可以点击它，即使它们不可见或尚未呈现，信息窗口出现。正如预期的那样。

这是我的 map_display.js 的完整内容，其中包含调用的函数 initmap()。

```
function initmap(urls){
    // Creating an option object for the map
    var myLatlng = new google.maps.LatLng(63.349501, 26.817627);
    var options = {
        zoom: 6,
        center: myLatlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    // Initializing the map
    var map = new google.maps.Map(document.getElementById('map_canvas'), options);

    if(urls != null) {
        for(var i=0;i<urls.length;i++) {
            var url = urls[i];
            url = url+"?dummy="+(new Date()).getTime();
            var ctaLayer = createKML(url);
            ctaLayer.setMap(map);
        }
    }

    function createKML(url){

        var ctaLayer = new google.maps.KmlLayer(url, {suppressInfoWindows: true, preserveViewport: true});

        // Creating a correct reference for project edit URL
        var editUrl = urls[i];
        var s1 = editUrl.indexOf("project");
        s1 = s1+7;
        var s2 = editUrl.indexOf(".kml");
        editUrl = editUrl.substring(s1, s2);

        var baseUrl = getbaseUrl();

        var infoItems = new Array();
        infoItems = getInfo(editUrl);

        editUrl = '<b>' + infoItems[1] + '</b><br />' + infoItems[0] + '<br /><br /><a href="' + baseUrl + '/frontend/viewproject/' + editUrl + '">Katso projektin tiedot</a>';
        // Creating an InfoWindow object
        var infowindow = new google.maps.InfoWindow({ content: editUrl });

        google.maps.event.addListener(ctaLayer, 'click', function(kmlEvent) {
            var clickPos = kmlEvent.latLng;
            var posX = new google.maps.LatLng(clickPos.lat(), clickPos.lng());

            infowindow.close();
            infowindow.setPosition(posX);
            infowindow.open(map);

        });

        return ctaLayer;
    }

    function getbaseUrl(){

        var baseUrl = "https://" + window.location.hostname;
        var firstpath = window.location.pathname;
        var first_slash = firstpath.indexOf("/", 1);
        firstpath = firstpath.substring(0, first_slash);
        baseUrl = baseUrl + firstpath;

        return baseUrl;
    }

    function getInfo(pid){

        var jsoninfo = new Array();

        var xmlhttp;
        if (window.XMLHttpRequest)
        {
            xmlhttp=new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }

        var json_location = getbaseUrl() + '/frontend/project_json/' + pid;

        xmlhttp.open("GET",json_location,false);
        xmlhttp.send();

        var json_answer = eval('(' + xmlhttp.responseText + ')');

        jsoninfo[0] = json_answer["projectName"];
        jsoninfo[1] = json_answer["builder"];

        return jsoninfo;
    }

} 
```

有人可以帮助我吗？抱歉，我无法提供实时系统作为参考，因为它是受密码保护等的较大页面的一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T17:30:05.510

我使用 Google 提供的默认 KML 层的成功有限。我建议尝试[GeoXML3](http://geoxml3.googlecode.com)或[geoxml-v3](http://code.google.com/p/geoxml-v3/)（不是同一个项目）。我将 GeoXML3 用于[校园地图](http://www.ecu.edu/campusmaps)，并为我自己的教育[在 Github 上创建了一个 hello world GeoXML3 地图](https://github.com/lightningwhelk/Geoxml3-Map)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T03:14:24.900

kml 层的工作方式是 thr kml 的 URL 包含在每个图块的 url 中。当您添加如此多的 kml 图层时，切片 url 的长度会超过 2048 个字符，这是 URL 的限制。您可以尝试缩短 kml 图层的 URL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-30T21:28:19.153

来自[谷歌文档](https://developers.google.com/kml/documentation/mapsSupport)：

> 可以在单个 Google 地图上显示的 KML 图层的数量是有限制的。如果超出此限制，则不会显示任何图层。该限制基于传递给 KMLLayer 类的所有 URL 的总长度，因此会因应用程序而异；平均而言，您应该能够加载 10 到 20 层而不会达到限制。

# asp.net - 测试 Web 方法（使用浏览器/Fiddler）

> ID：10317016
> 
> 赞同：4
> 
> 时间：2012-04-25T13:44:43.850
> 
> 标签：asp.net, testing, webmethod

我正在尝试通过 DevBridge（[http://www.devbridge.com/projects/autocomplete/jquery/](http://www.devbridge.com/projects/autocomplete/jquery/)）实现 Jquery 自动完成功能。这会进行 AJAX 调用，在他们的示例中它使用 .NET Web 服务。我打算使用网络方法。

我创建了一个名为 WebMethodTest.aspx 的页面，并向其中添加了一个简单的 Web 方法。代码如下：

```
using System;
using System.Web.Services;

public partial class WebMethodsTest : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e) { }

    [WebMethod]
    public static string Test()
    {
        return "blah blah blah";
    }
} 
```

我没有在 web.config 中添加任何内容或进行任何其他设置。

通过浏览器和提琴手 ( [http://myurl/WebMethodTest.aspx/Test](http://myurl/WebMethodTest.aspx/Test) ) 调用 URL 不会返回任何内容。

我假设我可以发出一个正常的 HTTP 请求，它会返回字符串“blah blah blah”。

请注意：我已经进行了广泛的搜索，看看是否有任何明显的我错过了。SO和其他地方有许多类似的问题，但许多都围绕格式错误的JSON等。我认为我的网络方法没有被调用。

所以：

1.  发出正常的 HTTP 请求是检查 Web 方法的有效方法吗？如果没有，怎么办？
2.  可以在没有客户端 AJAX 部分的情况下测试 Web 方法吗？

注意：我看到很多提到在 ScriptManager 中启用 Web 方法的“解决方案”——我认为这仅在使用 ASP.NET AJAX 时才相关（我不是）。

我剩下的头发越来越少了。欢迎所有建议:)

ta

**编辑** 我认为我正在测试的 URL（确实返回 JSON 字符串的第三方）可能不是 Web 方法。我认为我的也应该向浏览器返回响应——这是一个糟糕的假设。

正如@mgnoonan 所指出的，[是否可以使用 Fiddler 的请求生成器发出 JSON 请求？](https://stackoverflow.com/questions/2589174/is-it-possible-to-make-json-requests-using-fiddlers-request-builder), 具有使用 Fiddler 进行测试的正确语法。

我用的是：

```
POST http://xxx/WebMethods/WebMethodsTest.aspx/Test 
```

和

```
User-Agent: Fiddler
Host: xxx
Content-Type: application/json; charset=utf-8
Content-Length: 0 
```

这返回了预期的字符串。:)

PS有没有办法将评论标记为答案？

# javascript - javascript - 仅从 document.referrer 获取域

> ID：10317017
> 
> 赞同：16
> 
> 时间：2012-04-25T13:44:44.600
> 
> 标签：javascript, jquery

我只想从引荐来源网址获取域。我最常得到的引荐网址是`http://www.davidj.com/pages/flyer.asp`&`http://www.ronniej.com/linkdes.com/?adv=267&loc=897`

每当我得到像上面这样的引荐网址时，我只想获取域示例：[http ://www.davidj.com](http://www.davidj.com)

我曾尝试使用 .split 方法，但我无法使用它。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-25T13:50:27.483

```
var url = "http://www.ronniej.com/linkdes.com/?adv=267&loc=897"
var referrer =  url.match(/:\/\/(.[^/]+)/)[1]; 
```

[http://jsfiddle.net/hyjcD/](http://jsfiddle.net/hyjcD/)

```
if (document.referrer) {
   url = document.referrer; 
   ref = url.match(/:\/\/(.[^/]+)/)[1];
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-25T13:49:17.203

您可以在内部使用将 url 写入锚元素，然后从该元素中获取较小的部分

```
var anchor = document.createElement("a");
anchor.href = "http://www.davidj.com/pages/flyer.asp";

console.log(anchor.protocol + "//" + anchor.host); // "http://www.davidj.com" 
```

这要容易得多，因为您不必关心拆分或类似的事情……这很合乎逻辑……本机锚具有相同的属性`window.location`，至少在 URL 方面

编辑：IE 6-9 将默认端口添加到 anchor.host // "http://www.davidj.com:80

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-10-17T08:55:42.273

尝试使用 JS 原生 URL 接口来处理 URL 字符串：

```
let domain = (new URL(document.referrer)).hostname; 
```

参考：[https ://developer.mozilla.org/en-US/docs/Web/API/URL](https://developer.mozilla.org/en-US/docs/Web/API/URL)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-25T13:49:09.810

链式拆分、切片和连接：

```
document.referrer.split("/").slice(0,3).join("/") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T13:51:04.360

您可以使用正则表达式：

```
var matchHost = /^https?:\/\/.*\//;

var match = matchHost.exec('http://www.davidj.com/pages/flyer.asp');
if(match) {
    var host = match[0];
    console.log(host);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-02T11:42:12.663

```
if (document.referrer.split('/')[2] == "domain") {
    //................
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-29T20:08:08.983

从引用字符串获取协议 + 域的唯一答案是：

```
document.referrer.split("/").slice(0,3).join("/").split("?").slice(0,1).join("?")

```

如果存在，则需要第二次拆分以删除查询字符串：**[http ://www.example.com?s=search](http://www.example.com?s=search)**

它适用于：

1.  http://....
2.  https://....
3.  [http://www.example.com](http://www.example.com)
4.  [http://www.example.com/](http://www.example.com/)
5.  [http://www.example.com/aaa/bbb/ccc](http://www.example.com/aaa/bbb/ccc) ....
6.  [http://www.example.com?s=search&t=time](http://www.example.com?s=search&t=time)
7.  [http://www.example.com/?s=search&t=time](http://www.example.com/?s=search&t=time)

# asp.net - 我将如何适当地设计一个 ViewModel 来编辑具有不同出勤天数的不同课程的出勤率？

> ID：10317018
> 
> 赞同：0
> 
> 时间：2012-04-25T13:44:48.003
> 
> 标签：asp.net, asp.net-mvc-3, entity-framework, database-design, time-and-attendance

我有学生、课程、注册和出勤模型。每门课程都有不同的出勤天数，我需要能够编辑这些天的出勤率。

我使用以下模型：

```
public class Student
{
    public int StudentID { get; set; }
    public string LastName { get; set; }
    public string FirstMidName { get; set; }
    public virtual ICollection<Enrollment> Enrollments { get; set; } // To keep track of what classes in which the student is enrolled
}

public class Course
{
    public int CourseID { get; set; }
    public string Title { get; set; }
    public int InstructorID { get; set; }
    public virtual Instructor Instructor { get; set; }
    public int AttendingDays { get; set; } // Total number of days for attendance
    public virtual ICollection<Enrollment> Enrollments { get; set; }
}

public class Enrollment
{
    public int EnrollmentID { get; set; }
    public int CourseID { get; set; }
    public int StudentID { get; set; }
    public virtual Course Course { get; set; }
    public virtual Student Student { get; set; }
}

public class Attendance
{
    public int AttendanceID { get; set; }
    public int CourseID { get; set; }
    public int StudentID { get; set; }
    public int AttendanceDay { get; set; }
    public bool Present { get; set; }
    public virtual Course Course { get; set; }
    public virtual Student Student { get; set; }
} 
```

我将如何构建一个 ViewModel 来让我编辑出勤表，根据 Course 课程中的 AttendingDays int 适当地调整指定课程的出勤天数。

即，如果 X 班的 AttendingDays 值为 10，我需要 10 行出勤日期，我可以填写这些日期并为每个学生填写出席/缺席复选框 - 而 Y 班只有 3 个出席日期，等等。.

因此，出勤表中的示例行将显示为：ID 25：对于课程 X，第 3 天的学生 X 出席。ID26：对于课程 X，第 4 天的学生 X 缺席，等等。.

解决这个问题的最有效方法是什么？

更新：

现在我创建出勤数据库条目，其中学生被标记为 Present = false 一旦他们被添加到班级后，每个可能的出勤日。

既然我知道我将始终为每个学生创建适当的出勤天数，我的 ViewModel 将如何工作？

我需要生成一个页面，为课程中包含的每个学生显示一行（此信息包含在注册表中）。每个学生的行将包含每天出勤的复选框（因此屏幕上会出现一个复选框网格，左侧列出学生姓名，顶部显示出勤日期的数字）。

编辑：

这会是 jqGrid 有用的东西吗？

# java - Java API中的正确返回值？

> ID：10317020
> 
> 赞同：2
> 
> 时间：2012-04-25T13:45:04.663
> 
> 标签：java, api

我来自 C 世界，在那里我们使用“定义”来定义不同的返回值，从 C 函数返回的值，如下所示：

```
#define RETURN_SUCCESS 0
#define RETURN_ERROR -1

int myFunc()
{
    if(...) return(RETURN_SUCCESS);
    else if(...) return(RETURN_ERROR);            
} 
```

这是如何在 Java 中以正确的方式完成的？

假设我有：

```
public MyObject findMyObject()
{
     MyObject tempObject = search();

     if( tempObject.type == myType ) 
     { 
        return tempObject;
     }
     else
     {
        return null; 
     }
} 
```

可以退货`null`吗？

有没有更合适的方法呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T13:46:10.710

可以返回null。您会注意到在 Java API 中它[有时会返回 null](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Hashtable.html#get%28java.lang.Object%29) [或 -1 ，其中预期为 Int](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#indexOf%28int%29)。另一个经常使用的选项是在出现问题时简单地[抛出异常](http://docs.oracle.com/javase/tutorial/essential/exceptions/throwing.html)。

大多数人和你现在可能问自己的问题往往是“好吧，我什么时候抛出异常，什么时候只返回 null？” [这个问题在这里](https://stackoverflow.com/questions/175532/should-a-retrieval-method-return-null-or-throw-an-exception-when-it-cant-prod)得到了很好的回答。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T13:47:04.003

在 Java 中使用返回码来指示错误是一种反模式。您应该改用异常。

如果错误是由于编程错误（无效参数、不正确状态）引起的，则抛出未经检查的异常实例。

当错误是因为环境出现问题（无法连接到服务器，找不到所需文件）时，抛出检查异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T13:50:43.313

返回符合您定义的规范的东西总是可以的。因此，如果您在文档（javadoc 和测试）中定义哪些情况可能导致返回 null，那么您可以毫不费力地返回它。

您还必须了解，成为错误代码（如您的 C 代码）的人质并不是 Java 中的最佳策略。有些人甚至可能认为它是一种反模式。使用异常更为常见。鉴于您是 Java 新手，请考虑阅读[http://docs.oracle.com/javase/tutorial/essential/exceptions/](http://docs.oracle.com/javase/tutorial/essential/exceptions/)上的教程以获取更多信息。

# xamarin.android - MonoDroid LocationManager.RequestLocationUpdates 给出 Java.Lang.IllegalArgumentException 异常

> ID：10317025
> 
> 赞同：1
> 
> 时间：2012-04-25T13:45:14.530
> 
> 标签：xamarin.android, mvvmcross

我正在使用 MvvmCross 框架进行跨设备开发。当我在 Android 模拟器中测试我的应用程序时（我还不能在物理设备上测试它），在 LocationManager 上调用 RequestLocationUpdates 时出现 Java.Lang.IllegalArgumentException 异常。另外，我不知道它是否相关，但是当我将鼠标悬停在语句上时，我被告知 RequestLocationUpdates 是一个“未知方法”。无论是否发生异常，都会发生这种情况。

它似乎只在我第二次在我的应用程序中调用它时发生，但是在使用之间清除它的代码看起来应该可以工作

```
 protected override void PlatformSpecificStart(MvxGeoLocationOptions options)
    {
        if (_locationManager != null)
            throw new MvxException("You cannot start the MvxLocation service more than once");

        _locationManager = (LocationManager)Context.GetSystemService(Context.LocationService);
        var criteria = new Criteria() { Accuracy = options.EnableHighAccuracy ? Accuracy.Fine : Accuracy.Coarse };
        var bestProvider = _locationManager.GetBestProvider(criteria, true);

        _locationManager.RequestLocationUpdates(bestProvider, 5000, 2, this);
    }

    protected override void PlatformSpecificStop()
    {
        EnsureStopped();
    }

    private void EnsureStopped()
    {
        if (_locationManager != null)
        {
            _locationManager.RemoveUpdates(this);
            _locationManager = null;
        }
    } 
```

这个类继承自Java.Lang.Object，我已经验证了PlatformSpecificStart 和Stop 并在适当的时间调用（即Stop 肯定在第二次Start 之前调用）。谁能告诉我出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T21:24:45.703

我在教程中添加了一个课程，显示`IMvxGeoLocationWatcher`正在使用的界面。

[请参阅https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20Tutorial/Tutorial/Tutorial.Core/ViewModels/Lessons/LocationViewModel.cs](https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20Tutorial/Tutorial/Tutorial.Core/ViewModels/Lessons/LocationViewModel.cs)中的示例，代码如下：

```
 private void DoStartStop()
    {
        if (!IsStarted)
        {
            _watcher.Start(new MvxGeoLocationOptions() { EnableHighAccuracy = true }, OnNewLocation, OnError);
        }
        else
        {
            _watcher.Stop();
        }

        IsStarted = !IsStarted;
    }

    private void OnError(MvxLocationError error)
    {
        // TODO - shuold handle the error better than this really!
        LastError = error.Code.ToString();
    }

    private void OnNewLocation(MvxGeoLocation location)
    {
        if (location != null && location.Coordinates != null)
        {
            Lat = location.Coordinates.Latitude;
            Lng = location.Coordinates.Longitude;
        }
    } 
```

这似乎可以正常工作：

*   WP7 - [https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20Tutorial/Tutorial/Tutorial.UI.WindowsPhone/Views/Lessons/LocationView.xaml](https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20Tutorial/Tutorial/Tutorial.UI.WindowsPhone/Views/Lessons/LocationView.xaml)
*   机器人 - [https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20Tutorial/Tutorial/Tutorial.UI.Droid/Views/Lessons/LocationView.cs](https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20Tutorial/Tutorial/Tutorial.UI.Droid/Views/Lessons/LocationView.cs)
*   触摸 - [https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20Tutorial/Tutorial/Tutorial.UI.Touch/VIews/Lessons/LocationView.cs](https://github.com/slodge/MvvmCross/blob/master/Sample%20-%20Tutorial/Tutorial/Tutorial.UI.Touch/VIews/Lessons/LocationView.cs)

我还没有为 WinRT 编写代码...

* * *

可能导致您的错误的一件事是，如果您尝试 Dispose()`IMvxGeoLocationWatcher`实例 - 这样做可能会导致不可预测的结果。

在 WM6、iPhone、Bada、WP7 和 Android for RunSat/Navmi (http://www.navmi.com) 上处理 GPS 时，我经常遇到原生平台可能非常“不稳定”/“不可预测”的问题。该应用程序启动/停止多个位置侦听器 - 我认为这确实影响了我设计`IMvxGeoLocationWatcher`功能的方式。一般来说，如果您的应用程序使用，`IMvxGeoLocationWatcher`那么我认为最好将对该位置的访问包装在通过接口访问的某种单例中 - 这样做可以让您更轻松地控制位置功能，而不是拥有多个客户端单独尝试启动/停止位置管理器。

* * *

如果你发现它的功能`IMvxGeoLocationWatcher`不是你想要的，那么一定要创建你自己的接口和你自己的平台相关实现——它们可以很容易地注入到每个原生的 Setup 类中。

例如，您可能想尝试的一件事是使用可用于位置的 Mono 移动扩展的界面（以及用于联系人和越来越多的其他功能）

# sql - SQL表最高序号

> ID：10317027
> 
> 赞同：1
> 
> 时间：2012-04-25T13:45:21.497
> 
> 标签：sql, sql-server, sql-server-2008-r2, sequence

> **可能重复：**
> [通过嵌套连接选择最高 Seq 号](https://stackoverflow.com/questions/10320407/selecting-the-highest-seq-number-by-nested-joining)

您好，我要写一个查询，我想为每个客户 ID 取最大的序列号（大序列号将根据最高的银行账户余额计算）。

请考虑此表有 100000 条记录。

表格如下 -

桌子：

```

**ClID** **SeqNu** **Bal**  
1 1 30000  
1 2 26789  
1 3 23456  
1 4 12345  
1 5 21234  
2 3 12456  
2 4 45632  
2 1 23456  
2 9 99999  
3 4 12345  
3 5 21234  
3 3 12456  
3 4 45632

```

结果将是

```
**ClID** **SeqNu** **Bal**  
1 1 30000  
2 9 99999  
3 4 45632

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T13:49:58.170

```
select t.*
from (
    select CIID,
        MAX(Bal) as MaxBalance
    from table
    group by CIID
    ) sm
inner join table t on sm.CIID = t.CIID and sm.MaxBalance = t.Bal 
```

[SQL Fiddle 示例在这里](http://sqlfiddle.com/#!3/fa1b4/7)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T13:54:08.643

实现这一点的最佳方法可能会因您使用的 RDBMS 而异。如果您有窗口函数（例如，Oracle 9i+ 或 SQL Server 2012），以下应该可以工作：

```
select distinct ClId, 
                first_value(SeqNu) 
                    over (partition by ClId 
                          order by Bal desc) as SeqNu, 
                max(Bal) 
                    over (partition by ClId) as Bal
from your_table 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T13:47:24.447

您需要使用`GROUP BY`：

```
SELECT SeqNu, MAX(Bal)
FROM Table
GROUP BY SeqNu 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T13:49:29.387

你需要做两个嵌套`MAX`语句来匹配它：

```
SELECT a.ClID, MAX(b.SeqNu) as SeqNu, b.Balance
FROM Table a
JOIN (SELECT ClID, MAX(Balance) as Balance FROM Table GROUP BY ClID) b 
   ON a.ClID = b.ClID AND a.Balance = b.Balance 
GROUP BY a.ClID, b.SeqNu 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T19:10:52.647

```
SELECT b1.*
FROM balance b1
LEFT JOIN balance b2
ON (b1.clid = b2.clid AND b2.bal > b1.bal)
WHERE b2.clid IS NULL;

+------+-------+-------+
| clid | seqnu | bal   |
+------+-------+-------+
|    1 |     1 | 30000 |
|    2 |     9 | 99999 |
|    3 |     4 | 45632 |
+------+-------+-------+
3 rows in set (0.00 sec) 
```

# iphone - 查找可用的无线网络

> ID：10317028
> 
> 赞同：14
> 
> 时间：2012-04-25T13:45:22.463
> 
> 标签：iphone, objective-c, ios, ipad, wifi

如何查找并列出范围内的所有 wi-fi 网络？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-25T13:57:44.153

据我所知，您可以获得有关当前使用`CNCopySupportedInterfaces`和[CaptiveNetwork](http://developer.apple.com/library/ios/#documentation/SystemConfiguration/Reference/CaptiveNetworkRef/Reference/reference.html)`CNCopyCurrentNetworkInfo`连接的 Wi-Fi的信息。您可以参考：[如何使用 CaptiveNetwork 获取当前 WiFi 热点名称](https://stackoverflow.com/q/4712535/1241690)以获取更多信息。

根据[iPhone 获取所有没有私有库的 SSID 的列表](https://stackoverflow.com/q/9684341/1241690)：

> 如果不使用私有库 (Apple80211)，您只能获取设备当前连接的网络的 SSID。

如果您对 Apple80211 感兴趣，可以查看[iphone-wireless 项目。](http://code.google.com/p/iphone-wireless/)存在一个示例应用程序[“Stumber”](http://code.google.com/p/iphone-wireless/wiki/Stumbler)，它完全符合您的要求。但是如果你想发布到 App Store，你不能在你的应用程序中使用它，因为它使用私有 API。Apple 拒绝使用私有 API 的应用程序。

# java - Java RTF 导入、编辑和导出是否可行？

> ID：10317030
> 
> 赞同：4
> 
> 时间：2012-04-25T13:45:29.013
> 
> 标签：java, parsing, export, rtf, apache-tika

我使用 Apache Tika 解析 RTF 文件以获取纯文本作为字符串。现在我想从这个字符串中删除一些字符-> 好的。现在我想再次将结果另存为 RTF。（您可以将此过程视为通过删除段落来修改 RTF 文件。）这怎么可能？如何使用 Tika 将此字符串导出到 RTF？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:59:29.090

有一个编辑文档的解决方案，但它有点复杂。您可以使用 OpenOffice API 打开多种类型的文档并将其导出为其他格式。前段时间，我用它从数据库中读取数据并导出为 odt 和 xls 文件。

我从来没有用它来[编辑文档](http://www.openoffice.org/udk/common/man/tutorial/office_automation.html)，比如来自 Writer 或 MS Word 的文件，但是，通过[OpenOffice 文档](http://wiki.services.openoffice.org/wiki/Documentation/DevGuide/Text/Text_Documents)，我知道这是可以做到的。也许这可以是杀死苍蝇的大炮，但是如果您没有找到其他方法，可以解决您的问题。

该 API 适用于 Java、C++ 等。

# c# - 详细应用权限架构建议

> ID：10317033
> 
> 赞同：1
> 
> 时间：2012-04-25T13:45:38.650
> 
> 标签：c#, .net, architecture, permissions

我有一个应用程序需要对其权限系统进行大修。

此应用程序有两种需要保护的“实体”：

*   用户
*   公司

用户很简单，他们只是拥有可以访问应用程序区域的角色，不会更改任何数据。

公司可以是 3 种类型之一 - 管理（目前只是拥有产品的“主”公司）、合作伙伴（产品的经销商）和标准（仅使用产品的人）。

该产品还具有公司“集团”的概念，因为经销商可以以不同的名称销售产品，但需要能够一次看到所有数据。因此，每个公司始终属于一个集团，而每个集团又归一家公司所有。

在查询数据时，我有几个要求：

*   如果属于经销商公司A的用户查询数据，经销商拥有的所有组中的所有公司都需要出现
*   如果属于标准公司 B 的用户查询数据，他们应该只看到他们的信息
*   如果属于行政公司 C 的用户查询数据，他们应该会看到所有内容
*   最后，显示的实际数据需要按公司类型过滤 - 管理公司看到的数据比经销商多，经销商比标准公司看到的信息多

现在，当前系统实际上完成了大部分工作，但有很多：

```
List<int> groups;
if(CompanyType == CompanyType.Reseller){
  groups = [some list of groups]
}else{
  ....
} 
```

这是相当丑陋且容易出错的。

我们正在使用 SubSonic、WCF（整个系统采用 REST 接口设计）、PostSharp 和 C#，因此您知道可用的工具。

任何人都可以建议一种在框架级别使用这种详细程度（本质上是行和列）实现权限的好方法，以确保适当且自动地设置限制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:39:35.787

我研究了一个类似的问题。基本上，我的伪算法是：

```
IEnumerable<MyData> allDatas = DataAccessLayer.GetDatas();
IEnumerable<MyData> filteredDatas = RuleEngine.Filter(allDatas);
// filteredDatas contains only the datas that the user is authorized to view 
```

首先，我从数据库中获取所有产品。然后我用业务规则过滤它们。您可能需要向 RuleEngine.Filter 添加一些参数：当前用户，可能还有一些上下文信息。

为了获得二十种产品，您可以编写如下代码：

```
IDataReader reader = GetReader();
var products = new List<Product>();
while(reader.Read() && products.Count < 20)
{
    var product = BuildProduct(reader);
    if(RuleEngine.Filter(new Product[] { product }).Any())
        products.Add(product);
} 
```

# c# - 来自类型参数的泛型类

> ID：10317036
> 
> 赞同：6
> 
> 时间：2012-04-25T13:45:49.257
> 
> 标签：c#, generics, types

有没有办法从类型参数创建一个泛型类。

我有这样的事情：

```
public class SomeClass
{
    public Type TypeOfAnotherClass { get; set; }
}

public class OneMoreClass
{
}

public class GenericClass<T>
    where T : class
{
    public void DoNothing() {}
}

public class GenericClass
{
    public static GenericClass<T> GetInstance<T>(T ignored)
        where T : class
    {
        return new GenericClass<T>();
    }
} 
```

我想要的是从一个类型创建一个 GenericClass。前任：

```
var SC = new SomeClass();
SC.TypeOfAnotherClass = typeof(OneMoreClass);
var generic = GenericClass.GetInstance(SC.TypeOfAnotherClass);

Assert.AreEqual(typeof(GenericClass<OneMoreClass>), generic.GetType()); 
```

在这里我希望得到实例，`GenericClass<OneMoreClass>`但我得到`GenericClass<Type>`

我也尝试使用该类型的实例。前任：

```
var generic = GenericClass.GetInstance(Activator.CreateInstance(SC.TypeOfAnotherClass)); 
```

这次我得到`GenericClass<object>`

有没有办法完成这个任务？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-25T16:13:22.257

If you know the type you actually want (`OneMoreClass`) at build time, then you should just use it:

```
var generic = GenericClass.GetInstance<OneMoreClass>(); 
```

But I am assuming you don't know it at build time, and have to get the `type` at runtime. You can do it with reflection, but it isn't pretty, and is slow:

```
public class GenericClass
{
    public static object GetInstance(Type type)
    {
        var genericType = typeof(GenericClass<>).MakeGenericType(type);
        return Activator.CreateInstance(genericType);
    }
} 
```

Since you don't know the resulting type at build time, you can't return anything but `object` (or `dynamic`) from the method.

* * *

Here is how much slower (for 100,000 creates)

```
public class GenericClass
{
    public static object GetInstance(Type type)
    {
        var genericType = typeof(GenericClass<>).MakeGenericType(type);
        return Activator.CreateInstance(genericType);
    }

    public static GenericClass<T> GetInstance<T>()
        where T : class
    {
        return new GenericClass<T>();
    }
}

    [Test]
    public void CanMakeGenericViaReflection_ButItsSlow()
    {
        var timer = new Stopwatch();
        var SC = new SomeClass();
        SC.TypeOfAnotherClass = typeof(OneMoreClass);

        timer.Start();
        for (int x = 0; x < 100000; x++)
        {
            GenericClass.GetInstance(SC.TypeOfAnotherClass);
        }
        timer.Stop();
        Console.WriteLine("With Reflection: " + timer.ElapsedMilliseconds + "ms.");

        timer.Restart();
        for (int x = 0; x < 100000; x++)
        {
            GenericClass.GetInstance<OneMoreClass>();
        }
        timer.Stop();
        Console.WriteLine("Without Reflection: " + timer.ElapsedMilliseconds + "ms.");
    } 
```

Results:

```
With Reflection: 243ms.
Without Reflection: 2ms. 
```

So a little over 100x slower.

The real thing to note about generics is that the `<T>`s in generics are resolved at *build-time* by the C# compiler, and the real class names are inserted. When you have to defer that until run-time, you end up paying the performance price.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T16:07:25.317

我不确定你到底在问什么。如果我正确理解你，这就是你要找的：

```
public class GenericClass
{
    public static GenericClass<T> GetInstance<T>(T ignored)
        where T : class
    {
        return new GenericClass<T>();
    }

    public static GenericClass<T> GetInstance<T>()
        where T : class
    {
        return new GenericClass<T>();
    }
} 
```

用法：

```
 var generic1 = GenericClass.GetInstance<OneMoreClass>();
  var generic2 = GenericClass.GetInstance(new OneMoreClass()); 
```

断言：

```
Assert.AreEqual(typeof(GenericClass<OneMoreClass>), generic1.GetType());
Assert.AreEqual(typeof(GenericClass<OneMoreClass>), generic2.GetType()); 
```

# jquery - jQuery datepicker - 如何检测触发元素

> ID：10317038
> 
> 赞同：0
> 
> 时间：2012-04-25T13:45:50.323
> 
> 标签：jquery, datepicker

我的页面上有 4 个元素（`<input>`'s）触发 jQuery UI 日期选择器。

如何检测哪个元素触发了当前显示的日期选择器。

我想要做

```
$( ".selector" ).datepicker( "option", "defaultDate", +7 ); 
```

使用该`defaultDate`选项。但是我的函数无法告诉'.selector'使用什么

**有没有办法随时获取日期选择器当前实例的触发元素？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:47:54.243

是的，在回调函数内部，使用`$(this)`.

# jsf-2 - Richfaces 4.2.1.Final 不适用于码头 8

> ID：10317039
> 
> 赞同：0
> 
> 时间：2012-04-25T13:45:51.443
> 
> 标签：jsf-2, richfaces

Richfaces 4.2.1.Final 已经发布，我正在尝试将它与 jetty 8 一起使用，因为 richfaces 本身的文档说它与 jetty 8 兼容，但在部署时出现错误..

```
java.lang.IllegalStateException: Application was not properly initialized at startup, could not find Factory: javax.faces.context.FacesContextFactory
at javax.faces.FactoryFinder$FactoryManager.getFactory(FactoryFinder.java:951)
at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:316)
at javax.faces.webapp.FacesServlet.init(FacesServlet.java:302)
at org.eclipse.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:456)
at org.eclipse.jetty.servlet.ServletHolder.doStart(ServletHolder.java:276)
at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
at org.eclipse.jetty.servlet.ServletHandler.initialize(ServletHandler.java:779)
at org.eclipse.jetty.servlet.ServletHandler.updateMappings(ServletHandler.java:1229)
at org.eclipse.jetty.servlet.ServletHandler.setServletMappings(ServletHandler.java:1288)
at org.eclipse.jetty.servlet.ServletHandler.addServletMapping(ServletHandler.java:888)
at org.eclipse.jetty.servlet.ServletHolder$Registration.addMapping(ServletHolder.java:621)
at org.richfaces.webapp.ResourceServletContainerInitializer.registerServlet(ResourceServletContainerInitializer.java:67)
at org.richfaces.webapp.ResourceServletContainerInitializer.onStartup(ResourceServletContainerInitializer.java:57)
at org.richfaces.webapp.RichFacesServletsInitializer.onStartup(RichFacesServletsInitializer.java:63)
at org.eclipse.jetty.plus.annotation.ContainerInitializer.callStartup(ContainerInitializer.java:100)
at org.eclipse.jetty.annotations.ServletContainerInitializerListener.contextInitialized(ServletContainerInitializerListener.java:99)
at org.eclipse.jetty.server.handler.ContextHandler.callContextInitialized(ContextHandler.java:672)
at org.eclipse.jetty.servlet.ServletContextHandler.callContextInitialized(ServletContextHandler.java:403)
at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:664)
at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:239)
at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1212)
at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:610)
at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:453)
at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
at org.eclipse.jetty.deploy.bindings.StandardStarter.processBinding(StandardStarter.java:36)
at org.eclipse.jetty.deploy.AppLifeCycle.runBindings(AppLifeCycle.java:183)
at org.eclipse.jetty.deploy.DeploymentManager.requestAppGoal(DeploymentManager.java:485)
at org.eclipse.jetty.deploy.DeploymentManager.addApp(DeploymentManager.java:138)
at org.eclipse.jetty.deploy.providers.ScanningAppProvider.fileAdded(ScanningAppProvider.java:142)
at org.eclipse.jetty.deploy.providers.ScanningAppProvider$1.fileAdded(ScanningAppProvider.java:53)
at org.eclipse.jetty.util.Scanner.reportAddition(Scanner.java:604)
at org.eclipse.jetty.util.Scanner.reportDifferences(Scanner.java:535)
at org.eclipse.jetty.util.Scanner.scan(Scanner.java:398)
at org.eclipse.jetty.util.Scanner.doStart(Scanner.java:332)
at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
at org.eclipse.jetty.deploy.providers.ScanningAppProvider.doStart(ScanningAppProvider.java:118)
at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
at org.eclipse.jetty.deploy.DeploymentManager.startAppProvider(DeploymentManager.java:546)
at org.eclipse.jetty.deploy.DeploymentManager.doStart(DeploymentManager.java:221)
at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
at org.eclipse.jetty.util.component.AggregateLifeCycle.doStart(AggregateLifeCycle.java:45)
at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:53)
at org.eclipse.jetty.server.handler.HandlerWrapper.doStart(HandlerWrapper.java:90)
at org.eclipse.jetty.server.Server.doStart(Server.java:262)
at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:59)
at org.eclipse.jetty.xml.XmlConfiguration$1.run(XmlConfiguration.java:1203)
at java.security.AccessController.doPrivileged(Native Method)
at org.eclipse.jetty.xml.XmlConfiguration.main(XmlConfiguration.java:1126)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.eclipse.jetty.start.Main.invokeMain(Main.java:469)
at org.eclipse.jetty.start.Main.start(Main.java:612)
at org.eclipse.jetty.start.Main.parseCommandLine(Main.java:265)
at org.eclipse.jetty.start.Main.main(Main.java:79) 
```

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T03:20:49.530

请使用最新的 Jetty 8 版本。在我撰写本文时，最新版本是 8.1.3.v20120416。Jetty 8.0.x 也有类似的问题。升级 Jetty 后，它没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-03T09:33:51.113

> MyFaces 和 Mojarra 通过 JSF 核心 taglib 的 TLD 文件为启动配置注册一个 servlet 上下文侦听器。到目前为止，这在大多数容器上都没有问题，但它不再在 Jetty 8 上工作。原因是 Jetty 8 使用 Glassfish JSP 实现，它要求 TLD 文件位于容器的类路径中。如果应用程序是通过 Jetty Maven 插件启动并引发上述异常，则情况并非如此。

见这里：http: [//jsflive.wordpress.com/2012/08/19/jsf-2-on-jetty-8/](http://jsflive.wordpress.com/2012/08/19/jsf-2-on-jetty-8/)

# php - Codeigniter Multi Select 将值插入数据库

> ID：10317040
> 
> 赞同：0
> 
> 时间：2012-04-25T13:45:51.870
> 
> 标签：php, codeigniter, multi-select

我有一个使用多选的表单，因此您可以选择多个选项，我将如何制作它，以便如果您选择 2 个选项，它将它们都添加到数据库中

```
option1,option2,option3 
```

我对 PHP 还是很陌生，我知道我必须把它作为一个数组，我只是不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:51:08.153

在数据库表中使用 varchar 字段，然后将其插入。首先取一个 php 变量并将所有值分配给它应该用逗号分隔。然后在查询中使用此变量进行插入。当您通过选择使用explode 函数获取值时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:54:04.273

如果你想要一个数组，你可以使用 php`explode`函数：

```
$your_options = "option1,option2,option3";
$array = explode(",", $your_option); 
```

现在您可以使用`$array[0], $array[1]`等等...

# java - Thread.sleep 的异常处理和 Threads 的 wait() 方法

> ID：10317041
> 
> 赞同：6
> 
> 时间：2012-04-25T13:45:56.423
> 
> 标签：java, multithreading, exception-handling

我正在尝试编写生产者消费者模型（Java 中的生产者线程和消费者线程）

我想知道如何处理方法和类的方法`InterruptedException`抛出的问题`Thread.sleep``Object``wait()`

```
package producerconsumer;

import java.util.ArrayList;

public class Consumer implements Runnable {

    ArrayList<Integer> container;

    @Override
    public void run() {
        while(true){
        System.out.println("Consumer Thread Running");
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        if(null==container){
            System.out.println("container is null");
        }
        //Removing values from Arraylist
        synchronized (container) {
            if(container.size()==0){
                try {
                    container.wait();
                } catch (InterruptedException e) {
                    //How to tackle this exception
                    e.printStackTrace();
                }
            }
            Integer removedInteger = container.remove(container.size()-1);
            System.out.println("removedInteger..."+removedInteger);
        }
        }
    }

    public void setContainer(ArrayList<Integer> container) {
        this.container = container;
    }
} 
```

这是我举的一个例子，在这个例子中，可能不需要处理这些异常（我的假设）。

**但我想知道我们需要处理这个异常的不同场景可能是什么。**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T13:49:52.257

> 我想知道如何处理 Thread.sleep 方法和 Object Class 的 wait 方法抛出的中断异常

有两件重要的事情需要意识到`InterruptedException`。首先，当它被抛出时，中断标志`Thread`被清除。因此，您应该始终执行以下操作：

```
} catch (InterruptedException e) {
    // re-add back in the interrupt bit
    Thread.currentThread().interrupt();
    ...
} 
```

这是一个非常重要的模式，因为它允许其他可能调用你的代码来检测中断。

其次，就线程而言，如果它们被中断，它们很可能应该清理并退出。这当然取决于你，程序员，但一般行为是终止并退出正在执行的操作——通常是因为程序试图关闭。

```
} catch (InterruptedException e) {
    Thread.currentThread().interrupt();
    // we are being interrupted so we should stop running
    return;
} 
```

最后，对于任何异常处理，默认的 Eclipse 模板通常都是*错误*的。绝不是`e.printStackTrace();`例外。弄清楚你想用它做什么：将它作为另一个异常重新抛出，将它记录在更好的地方，或者退出线程/方法/应用程序。

# c# - 正则表达式从 html 标记中清除属性

> ID：10317042
> 
> 赞同：1
> 
> 时间：2012-04-25T13:46:01.620
> 
> 标签：c#, regex

我有一个非常简单的 reg ex 问题。我的 HTML 标记如下所示：

```
<body lang=EN-US link=blue vlink=purple> 
```

我想清除所有属性并返回`<body>`

还有许多其他 HTML 标记我想清除其属性，因此我希望重用该解决方案。如何用正则表达式做到这一点？谢谢，B。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T14:12:00.117

像这样使用[HtmlAgilityPack](http://html-agility-pack.net/?z=codeplex)：

```
 public string RemoveAllAttributesFromEveryNode(string html)
    {
        var htmlDocument = new HtmlAgilityPack.HtmlDocument();
        htmlDocument.LoadHtml(html);
        foreach (var eachNode in htmlDocument.DocumentNode.SelectNodes("//*"))
            eachNode.Attributes.RemoveAll();
        html = htmlDocument.DocumentNode.OuterHtml;
        return html;
    } 
```

调用此方法，传递要从中删除所有属性的 html。

[xpath](/questions/tagged/xpath "显示标记为“xpath”的问题")将在这方面为您提供很多帮助。

不要对可能包含脚本的 html 文件使用正则表达式，如在 Javascript 中，字符`<`不是`>`标记分隔符而是运算符。正则表达式可能会将这些运算符匹配为标签，这将完全弄乱文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T13:48:20.993

不要使用正则表达式来解析 HTML - 它[不是一个很好的工具](https://stackoverflow.com/a/1732454/1583)。如果您无法控制 HTML 的传入格式，则尤其如此。

为此请使用[HTML Agility Pack 。](http://htmlagilitypack.codeplex.com/)

> 它是一个 .NET 代码库，允许您解析“网络之外”的 HTML 文件。解析器对“真实世界”格式错误的 HTML 非常宽容。对象模型与 System.Xml 的提议非常相似，但用于 HTML 文档（或流）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T13:53:49.817

如果您的 HTML 没有被彻底破坏，并且属性不包含`>`符号，那么它很简单：

```
<body.+?> 
```

...如果您想防止 XSS 或其他东西，请忽略这一点。

* * *

如果您的属性可能包含其他符号，那么这是一个完整的示例：

```
string data = @"<body lang=""EN-US>"" link=blue vlink=purple>";
Regex re = new Regex(@"<(body).*?(""[^""]+""[^"">]+)*>");

Console.WriteLine(re.Replace(data, "<$1>")); // <body> 
```

请注意，HTML 仍然需要格式正确。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T16:50:49.260

一般来说，不建议使用正则表达式来解析 html，但如果你必须使用它，
对于你的问题，类似下面的东西会起作用。

在这个正则表达式中，'body' 与'span' 作为一个例子。另请注意，注释会被忽略，因为它们可能会隐藏 html。出于同样的原因考虑脚本。

我会留下评论部分。您必须知道脚本可以更改文档呈现并使用可以隐藏您可能想要处理的 html 的语言结构。当然，这不应该用正则表达式来完成。

如果您愿意，您可以删除“脚本”子表达式，以期修改包含您想要更改的内容的可能字符串常量。不过不推荐。

原始正则表达式（修饰符：扩展，“点包括换行符”）
在 C# 中，可以命名正则表达式捕获的缓冲区，以便每个 OR 的子表达式包含相同的名称。示例： `(?<begin> ..) .. (?<end> ..) | (?<begin> ..) .. (?<end> ..)`
所以替换只是 ["begin"] + ["end"]。这是 Perl 5.10 中的错误，所以我只使用捕获缓冲区编号，Dot Net 可能会正常工作。

搜索

```
 # (1,2)
   ( <!--.*?--> ) ()
|
 # (3,4)
   (
     (?:
        <script
          (?>
             (?:\s+(?:".*?"|'.*?'|[^>]*?)+)?
             \s*
        >
          )(?<!/> )
        .*?
        </script\s*>
      |
        </?script (?:\s+(?:".*?"|'.*?'|[^>]*?)+)? \s*/?>
     )
   ) ()
|
 # (5,6)
   ( <(?:body|span) ) (?!\s*/?>)
    \s+ (?:".*?"|'.*?'|[^>]*?)+ 
   ( /?> ) 
```

代替

```
$1$2$3$4$5$6 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-01T13:40:42.067

以下正则表达式清除给定字符串中所有 HTML/XML 节点的属性。

```
\<[a-z]+\b([^>]+?)\s?\/?\> 
```

作为 C# 函数，它看起来像这样：

```
public string RemoveAttributes(string value){
   var attributeClean = new System.Text.RegularExpressions.Regex(@"\<[a-z]+\b([^>]+?)\s?\/?\>", System.Text.RegularExpressions.RegexOptions.Multiline | System.Text.RegularExpressions.RegexOptions.IgnoreCase);

   while (attributeClean.IsMatch(value)) {
      var match = attributeClean.Match(value);
      value = value.Remove(match.Index, match.Length);
   }
   return value;
} 
```

如果只想清理特定元素，可以使用以下正则表达式

```
\<(?:li|body)([^>]+?)\s?\/?\> 
```

并将尽可能多的元素添加到由 a 分隔的第一个不匹配组中`|`。

# encryption - 识别密码学密码

> ID：10317056
> 
> 赞同：2
> 
> 时间：2012-04-25T13:46:46.523
> 
> 标签：encryption, assembly, cryptography

```
009327A0   /$  53                PUSH EBX
009327A1   |.  55                PUSH EBP
009327A2   |.  56                PUSH ESI
009327A3   |.  8BF0              MOV ESI,EAX
009327A5   |.  8B56 04           MOV EDX,DWORD PTR DS:[ESI+4]
009327A8   |.  8B4424 10         MOV EAX,DWORD PTR SS:[ESP+10]                                                       ;  yo3.009331A3
009327AC   |.  57                PUSH EDI
009327AD   |.  8B3E              MOV EDI,DWORD PTR DS:[ESI]
009327AF   |.  8B4F 44           MOV ECX,DWORD PTR DS:[EDI+44]
009327B2   |.  3308              XOR ECX,DWORD PTR DS:[EAX]
009327B4   |.  8BC1              MOV EAX,ECX
009327B6   |.  C1E8 10           SHR EAX,10
009327B9   |.  25 FF000000       AND EAX,0FF
009327BE   |.  8B8482 00040000   MOV EAX,DWORD PTR DS:[EDX+EAX*4+400]
009327C5   |.  8BD9              MOV EBX,ECX
009327C7   |.  C1EB 18           SHR EBX,18
009327CA   |.  03049A            ADD EAX,DWORD PTR DS:[EDX+EBX*4]
009327CD   |.  8BD9              MOV EBX,ECX
009327CF   |.  C1EB 08           SHR EBX,8
009327D2   |.  81E3 FF000000     AND EBX,0FF
009327D8   |.  33849A 00080000   XOR EAX,DWORD PTR DS:[EDX+EBX*4+800]
009327DF   |.  8BD9              MOV EBX,ECX
009327E1   |.  81E3 FF000000     AND EBX,0FF
009327E7   |.  03849A 000C0000   ADD EAX,DWORD PTR DS:[EDX+EBX*4+C00]
009327EE   |.  8B5C24 18         MOV EBX,DWORD PTR SS:[ESP+18]
009327F2   |.  3347 40           XOR EAX,DWORD PTR DS:[EDI+40]
009327F5   |.  3303              XOR EAX,DWORD PTR DS:[EBX]
009327F7   |.  8BD8              MOV EBX,EAX
009327F9   |.  C1EB 10           SHR EBX,10
009327FC   |.  81E3 FF000000     AND EBX,0FF
00932802   |.  8B9C9A 00040000   MOV EBX,DWORD PTR DS:[EDX+EBX*4+400]
00932809   |.  8BE8              MOV EBP,EAX
0093280B   |.  C1ED 18           SHR EBP,18
0093280E   |.  031CAA            ADD EBX,DWORD PTR DS:[EDX+EBP*4]
00932811   |.  8BE8              MOV EBP,EAX
00932813   |.  C1ED 08           SHR EBP,8
00932816   |.  81E5 FF000000     AND EBP,0FF
0093281C   |.  339CAA 00080000   XOR EBX,DWORD PTR DS:[EDX+EBP*4+800]
00932823   |.  8BE8              MOV EBP,EAX
00932825   |.  81E5 FF000000     AND EBP,0FF
0093282B   |.  039CAA 000C0000   ADD EBX,DWORD PTR DS:[EDX+EBP*4+C00]
00932832   |.  335F 3C           XOR EBX,DWORD PTR DS:[EDI+3C]
00932835   |.  33CB              XOR ECX,EBX
00932837   |.  8BD9              MOV EBX,ECX
00932839   |.  C1EB 10           SHR EBX,10
0093283C   |.  81E3 FF000000     AND EBX,0FF
00932842   |.  8B9C9A 00040000   MOV EBX,DWORD PTR DS:[EDX+EBX*4+400]
00932849   |.  8BE9              MOV EBP,ECX
0093284B   |.  C1ED 18           SHR EBP,18
0093284E   |.  031CAA            ADD EBX,DWORD PTR DS:[EDX+EBP*4]
00932851   |.  8BE9              MOV EBP,ECX
00932853   |.  C1ED 08           SHR EBP,8
00932856   |.  81E5 FF000000     AND EBP,0FF
0093285C   |.  339CAA 00080000   XOR EBX,DWORD PTR DS:[EDX+EBP*4+800]
00932863   |.  8BE9              MOV EBP,ECX
00932865   |.  81E5 FF000000     AND EBP,0FF
0093286B   |.  039CAA 000C0000   ADD EBX,DWORD PTR DS:[EDX+EBP*4+C00]
00932872   |.  335F 38           XOR EBX,DWORD PTR DS:[EDI+38]
00932875   |.  33C3              XOR EAX,EBX
00932877   |.  8BD8              MOV EBX,EAX
00932879   |.  C1EB 10           SHR EBX,10
0093287C   |.  81E3 FF000000     AND EBX,0FF
00932882   |.  8B9C9A 00040000   MOV EBX,DWORD PTR DS:[EDX+EBX*4+400]
00932889   |.  8BE8              MOV EBP,EAX
0093288B   |.  C1ED 18           SHR EBP,18
0093288E   |.  031CAA            ADD EBX,DWORD PTR DS:[EDX+EBP*4]
00932891   |.  8BE8              MOV EBP,EAX
00932893   |.  C1ED 08           SHR EBP,8
00932896   |.  81E5 FF000000     AND EBP,0FF
0093289C   |.  339CAA 00080000   XOR EBX,DWORD PTR DS:[EDX+EBP*4+800]
009328A3   |.  8BE8              MOV EBP,EAX
009328A5   |.  81E5 FF000000     AND EBP,0FF
009328AB   |.  039CAA 000C0000   ADD EBX,DWORD PTR DS:[EDX+EBP*4+C00]
009328B2   |.  335F 34           XOR EBX,DWORD PTR DS:[EDI+34]
009328B5   |.  33CB              XOR ECX,EBX
009328B7   |.  8BD9              MOV EBX,ECX
009328B9   |.  C1EB 10           SHR EBX,10
009328BC   |.  81E3 FF000000     AND EBX,0FF
009328C2   |.  8B9C9A 00040000   MOV EBX,DWORD PTR DS:[EDX+EBX*4+400]
009328C9   |.  8BE9              MOV EBP,ECX
009328CB   |.  C1ED 18           SHR EBP,18
009328CE   |.  031CAA            ADD EBX,DWORD PTR DS:[EDX+EBP*4]
009328D1   |.  8BE9              MOV EBP,ECX
009328D3   |.  C1ED 08           SHR EBP,8
009328D6   |.  81E5 FF000000     AND EBP,0FF
009328DC   |.  339CAA 00080000   XOR EBX,DWORD PTR DS:[EDX+EBP*4+800]
009328E3   |.  8BE9              MOV EBP,ECX
009328E5   |.  81E5 FF000000     AND EBP,0FF
009328EB   |.  039CAA 000C0000   ADD EBX,DWORD PTR DS:[EDX+EBP*4+C00]
009328F2   |.  8BF2              MOV ESI,EDX
009328F4   |.  335F 30           XOR EBX,DWORD PTR DS:[EDI+30]
009328F7   |.  33C3              XOR EAX,EBX
009328F9   |.  8BD8              MOV EBX,EAX
009328FB   |.  C1EB 10           SHR EBX,10
009328FE   |.  81E3 FF000000     AND EBX,0FF
00932904   |.  8B9C9A 00040000   MOV EBX,DWORD PTR DS:[EDX+EBX*4+400]
0093290B   |.  8BE8              MOV EBP,EAX
0093290D   |.  C1ED 18           SHR EBP,18
00932910   |.  031CAA            ADD EBX,DWORD PTR DS:[EDX+EBP*4]
00932913   |.  8BE8              MOV EBP,EAX
00932915   |.  C1ED 08           SHR EBP,8
00932918   |.  81E5 FF000000     AND EBP,0FF
0093291E   |.  339CAA 00080000   XOR EBX,DWORD PTR DS:[EDX+EBP*4+800]
00932925   |.  8BE8              MOV EBP,EAX
00932927   |.  81E5 FF000000     AND EBP,0FF
0093292D   |.  039CAA 000C0000   ADD EBX,DWORD PTR DS:[EDX+EBP*4+C00]
00932934   |.  335F 2C           XOR EBX,DWORD PTR DS:[EDI+2C]
00932937   |.  33CB              XOR ECX,EBX
00932939   |.  8BD9              MOV EBX,ECX
0093293B   |.  C1EB 10           SHR EBX,10
0093293E   |.  81E3 FF000000     AND EBX,0FF
00932944   |.  8B9C9A 00040000   MOV EBX,DWORD PTR DS:[EDX+EBX*4+400]
0093294B   |.  8BE9              MOV EBP,ECX
0093294D   |.  C1ED 18           SHR EBP,18
00932950   |.  031CAA            ADD EBX,DWORD PTR DS:[EDX+EBP*4]
00932953   |.  8BE9              MOV EBP,ECX
00932955   |.  C1ED 08           SHR EBP,8
00932958   |.  81E5 FF000000     AND EBP,0FF
0093295E   |.  339CAA 00080000   XOR EBX,DWORD PTR DS:[EDX+EBP*4+800]
00932965   |.  8BE9              MOV EBP,ECX
00932967   |.  81E5 FF000000     AND EBP,0FF
0093296D   |.  039CAA 000C0000   ADD EBX,DWORD PTR DS:[EDX+EBP*4+C00]
00932974   |.  335F 28           XOR EBX,DWORD PTR DS:[EDI+28]
00932977   |.  33C3              XOR EAX,EBX
00932979   |.  8BD8              MOV EBX,EAX
0093297B   |.  C1EB 10           SHR EBX,10
0093297E   |.  81E3 FF000000     AND EBX,0FF
00932984   |.  8B9C9A 00040000   MOV EBX,DWORD PTR DS:[EDX+EBX*4+400]
0093298B   |.  8BE8              MOV EBP,EAX
0093298D   |.  C1ED 18           SHR EBP,18
00932990   |.  031CAA            ADD EBX,DWORD PTR DS:[EDX+EBP*4]
00932993   |.  8BE8              MOV EBP,EAX
00932995   |.  C1ED 08           SHR EBP,8
00932998   |.  81E5 FF000000     AND EBP,0FF
0093299E   |.  339CAA 00080000   XOR EBX,DWORD PTR DS:[EDX+EBP*4+800]
009329A5   |.  8BE8              MOV EBP,EAX
009329A7   |.  81E5 FF000000     AND EBP,0FF
009329AD   |.  039CAA 000C0000   ADD EBX,DWORD PTR DS:[EDX+EBP*4+C00]
009329B4   |.  335F 24           XOR EBX,DWORD PTR DS:[EDI+24]
009329B7   |.  33CB              XOR ECX,EBX
009329B9   |.  8BD9              MOV EBX,ECX
009329BB   |.  C1EB 10           SHR EBX,10
009329BE   |.  81E3 FF000000     AND EBX,0FF
009329C4   |.  8B9C9A 00040000   MOV EBX,DWORD PTR DS:[EDX+EBX*4+400]
009329CB   |.  8BE9              MOV EBP,ECX
009329CD   |.  C1ED 18           SHR EBP,18
009329D0   |.  031CAA            ADD EBX,DWORD PTR DS:[EDX+EBP*4]
009329D3   |.  8BD1              MOV EDX,ECX
009329D5   |.  C1EA 08           SHR EDX,8
009329D8   |.  81E2 FF000000     AND EDX,0FF
009329DE   |.  339C96 00080000   XOR EBX,DWORD PTR DS:[ESI+EDX*4+800]
009329E5   |.  8BD1              MOV EDX,ECX
009329E7   |.  81E2 FF000000     AND EDX,0FF
009329ED   |.  039C96 000C0000   ADD EBX,DWORD PTR DS:[ESI+EDX*4+C00]
009329F4   |.  335F 20           XOR EBX,DWORD PTR DS:[EDI+20]
009329F7   |.  33C3              XOR EAX,EBX
009329F9   |.  8BD0              MOV EDX,EAX
009329FB   |.  C1EA 10           SHR EDX,10
009329FE   |.  81E2 FF000000     AND EDX,0FF
00932A04   |.  8B9496 00040000   MOV EDX,DWORD PTR DS:[ESI+EDX*4+400]
00932A0B   |.  8BD8              MOV EBX,EAX
00932A0D   |.  C1EB 18           SHR EBX,18
00932A10   |.  03149E            ADD EDX,DWORD PTR DS:[ESI+EBX*4]
00932A13   |.  8BD8              MOV EBX,EAX
00932A15   |.  C1EB 08           SHR EBX,8
00932A18   |.  81E3 FF000000     AND EBX,0FF
00932A1E   |.  33949E 00080000   XOR EDX,DWORD PTR DS:[ESI+EBX*4+800]
00932A25   |.  8BD8              MOV EBX,EAX
00932A27   |.  81E3 FF000000     AND EBX,0FF
00932A2D   |.  03949E 000C0000   ADD EDX,DWORD PTR DS:[ESI+EBX*4+C00]
00932A34   |.  3357 1C           XOR EDX,DWORD PTR DS:[EDI+1C]
00932A37   |.  33CA              XOR ECX,EDX
00932A39   |.  8BD1              MOV EDX,ECX
00932A3B   |.  C1EA 10           SHR EDX,10
00932A3E   |.  81E2 FF000000     AND EDX,0FF
00932A44   |.  8B9496 00040000   MOV EDX,DWORD PTR DS:[ESI+EDX*4+400]
00932A4B   |.  8BD9              MOV EBX,ECX
00932A4D   |.  C1EB 18           SHR EBX,18
00932A50   |.  03149E            ADD EDX,DWORD PTR DS:[ESI+EBX*4]
00932A53   |.  8BD9              MOV EBX,ECX
00932A55   |.  C1EB 08           SHR EBX,8
00932A58   |.  81E3 FF000000     AND EBX,0FF
00932A5E   |.  33949E 00080000   XOR EDX,DWORD PTR DS:[ESI+EBX*4+800]
00932A65   |.  8BD9              MOV EBX,ECX
00932A67   |.  81E3 FF000000     AND EBX,0FF
00932A6D   |.  03949E 000C0000   ADD EDX,DWORD PTR DS:[ESI+EBX*4+C00]
00932A74   |.  3357 18           XOR EDX,DWORD PTR DS:[EDI+18]
00932A77   |.  33C2              XOR EAX,EDX
00932A79   |.  8BD0              MOV EDX,EAX
00932A7B   |.  C1EA 10           SHR EDX,10
00932A7E   |.  81E2 FF000000     AND EDX,0FF
00932A84   |.  8B9496 00040000   MOV EDX,DWORD PTR DS:[ESI+EDX*4+400]
00932A8B   |.  8BD8              MOV EBX,EAX
00932A8D   |.  C1EB 18           SHR EBX,18
00932A90   |.  03149E            ADD EDX,DWORD PTR DS:[ESI+EBX*4]
00932A93   |.  8BD8              MOV EBX,EAX
00932A95   |.  C1EB 08           SHR EBX,8
00932A98   |.  81E3 FF000000     AND EBX,0FF
00932A9E   |.  33949E 00080000   XOR EDX,DWORD PTR DS:[ESI+EBX*4+800]
00932AA5   |.  8BD8              MOV EBX,EAX
00932AA7   |.  81E3 FF000000     AND EBX,0FF
00932AAD   |.  03949E 000C0000   ADD EDX,DWORD PTR DS:[ESI+EBX*4+C00]
00932AB4   |.  3357 14           XOR EDX,DWORD PTR DS:[EDI+14]
00932AB7   |.  33CA              XOR ECX,EDX
00932AB9   |.  8BD1              MOV EDX,ECX
00932ABB   |.  C1EA 10           SHR EDX,10
00932ABE   |.  81E2 FF000000     AND EDX,0FF
00932AC4   |.  8B9496 00040000   MOV EDX,DWORD PTR DS:[ESI+EDX*4+400]
00932ACB   |.  8BD9              MOV EBX,ECX
00932ACD   |.  C1EB 18           SHR EBX,18
00932AD0   |.  03149E            ADD EDX,DWORD PTR DS:[ESI+EBX*4]
00932AD3   |.  8BD9              MOV EBX,ECX
00932AD5   |.  C1EB 08           SHR EBX,8
00932AD8   |.  81E3 FF000000     AND EBX,0FF
00932ADE   |.  33949E 00080000   XOR EDX,DWORD PTR DS:[ESI+EBX*4+800]
00932AE5   |.  8BD9              MOV EBX,ECX
00932AE7   |.  81E3 FF000000     AND EBX,0FF
00932AED   |.  03949E 000C0000   ADD EDX,DWORD PTR DS:[ESI+EBX*4+C00]
00932AF4   |.  3357 10           XOR EDX,DWORD PTR DS:[EDI+10]
00932AF7   |.  33C2              XOR EAX,EDX
00932AF9   |.  8BD0              MOV EDX,EAX
00932AFB   |.  C1EA 10           SHR EDX,10
00932AFE   |.  81E2 FF000000     AND EDX,0FF
00932B04   |.  8B9496 00040000   MOV EDX,DWORD PTR DS:[ESI+EDX*4+400]
00932B0B   |.  8BD8              MOV EBX,EAX
00932B0D   |.  C1EB 18           SHR EBX,18
00932B10   |.  03149E            ADD EDX,DWORD PTR DS:[ESI+EBX*4]
00932B13   |.  8BD8              MOV EBX,EAX
00932B15   |.  C1EB 08           SHR EBX,8
00932B18   |.  81E3 FF000000     AND EBX,0FF
00932B1E   |.  33949E 00080000   XOR EDX,DWORD PTR DS:[ESI+EBX*4+800]
00932B25   |.  8BD8              MOV EBX,EAX
00932B27   |.  81E3 FF000000     AND EBX,0FF
00932B2D   |.  03949E 000C0000   ADD EDX,DWORD PTR DS:[ESI+EBX*4+C00]
00932B34   |.  3357 0C           XOR EDX,DWORD PTR DS:[EDI+C]
00932B37   |.  33CA              XOR ECX,EDX
00932B39   |.  8BD1              MOV EDX,ECX
00932B3B   |.  C1EA 10           SHR EDX,10
00932B3E   |.  81E2 FF000000     AND EDX,0FF
00932B44   |.  8B9496 00040000   MOV EDX,DWORD PTR DS:[ESI+EDX*4+400]
00932B4B   |.  8BD9              MOV EBX,ECX
00932B4D   |.  C1EB 18           SHR EBX,18
00932B50   |.  03149E            ADD EDX,DWORD PTR DS:[ESI+EBX*4]
00932B53   |.  8BD9              MOV EBX,ECX
00932B55   |.  C1EB 08           SHR EBX,8
00932B58   |.  81E3 FF000000     AND EBX,0FF
00932B5E   |.  33949E 00080000   XOR EDX,DWORD PTR DS:[ESI+EBX*4+800]
00932B65   |.  8BD9              MOV EBX,ECX
00932B67   |.  81E3 FF000000     AND EBX,0FF
00932B6D   |.  03949E 000C0000   ADD EDX,DWORD PTR DS:[ESI+EBX*4+C00]
00932B74   |.  3357 08           XOR EDX,DWORD PTR DS:[EDI+8]
00932B77   |.  33C2              XOR EAX,EDX
00932B79   |.  8BD0              MOV EDX,EAX
00932B7B   |.  C1EA 10           SHR EDX,10
00932B7E   |.  81E2 FF000000     AND EDX,0FF
00932B84   |.  8B9496 00040000   MOV EDX,DWORD PTR DS:[ESI+EDX*4+400]
00932B8B   |.  8BD8              MOV EBX,EAX
00932B8D   |.  C1EB 18           SHR EBX,18
00932B90   |.  03149E            ADD EDX,DWORD PTR DS:[ESI+EBX*4]
00932B93   |.  8BD8              MOV EBX,EAX
00932B95   |.  C1EB 08           SHR EBX,8
00932B98   |.  81E3 FF000000     AND EBX,0FF
00932B9E   |.  33949E 00080000   XOR EDX,DWORD PTR DS:[ESI+EBX*4+800]
00932BA5   |.  8BD8              MOV EBX,EAX
00932BA7   |.  81E3 FF000000     AND EBX,0FF
00932BAD   |.  03949E 000C0000   ADD EDX,DWORD PTR DS:[ESI+EBX*4+C00]
00932BB4   |.  3357 04           XOR EDX,DWORD PTR DS:[EDI+4]
00932BB7   |.  33CA              XOR ECX,EDX
00932BB9   |.  8B17              MOV EDX,DWORD PTR DS:[EDI]
00932BBB   |.  33D0              XOR EDX,EAX
00932BBD   |.  8B4424 14         MOV EAX,DWORD PTR SS:[ESP+14]
00932BC1   |.  5F                POP EDI                                                                             ;  14D70138
00932BC2   |.  5E                POP ESI                                                                             ;  14D70138
00932BC3   |.  8910              MOV DWORD PTR DS:[EAX],EDX
00932BC5   |.  8B5424 10         MOV EDX,DWORD PTR SS:[ESP+10]                                                       ;  yo3.009331A3
00932BC9   |.  5D                POP EBP                                                                             ;  14D70138
00932BCA   |.  890A              MOV DWORD PTR DS:[EDX],ECX
00932BCC   |.  5B                POP EBX                                                                             ;  14D70138
00932BCD   \.  C2 0800           RETN 8 
```

所以我发现使用 ollydbg ，首先我认为这个密码可以是`XTEA`但`XTEA`不能`AND`用于纯文本，所以我想我可以在这里发布这个密码，也许有人识别它并告诉我它是一个现有的密码或者这是一个习惯cipher，我需要根据这个 asm 代码编写它。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T18:51:16.253

这只是加密（或解密）轮，有助于查看初始化函数。但它闻起来像河豚。来自维基百科：

> Blowfish 的块大小为**64 位**[...] 该算法保留两个子密钥数组：**18 项 P 数组**和**四个 256 项**S 盒。S-box 接受 8 位输入并产生 32 位输出。每轮使用 P 数组的一个条目，并且在最后一轮之后，数据块的每一半与剩余的两个未使用的 P 条目之一进行异或。

以下是代码通过 Hex-Rays 反编译器运行并创建一些结构后的样子：

```
unsigned int *__userpurge sub_9327A0<eax>(ctx *context<eax>, unsigned int *a2, unsigned int *a3)
{
  xor_tbl1_t *sboxes; // edx@1
  unsigned int *parray; // edi@1
  unsigned int v6; // ecx@1
  unsigned int v7; // eax@1
  unsigned int v8; // ecx@1
  int v9; // eax@1
  int v10; // ecx@1
  int v11; // eax@1
  int v12; // ecx@1
  int v13; // eax@1
  int v14; // ecx@1
  int v15; // eax@1
  int v16; // ecx@1
  int v17; // eax@1
  int v18; // ecx@1
  int v19; // eax@1
  int v20; // ecx@1
  int v21; // eax@1
  int v22; // ecx@1
  int v23; // edx@1
  unsigned int *result; // eax@1

  sboxes = context->p_sboxes;
  parray = context->p_parray;
  v6 = *a2 ^ context->p_parray[17];
  v7 = *a3 ^ context->p_parray[16] ^ (sboxes->S3[(unsigned __int8)v6]
                                    + (sboxes->S2[(unsigned __int16)v6 >> 8] ^ (sboxes->S0[v6 >> 24]
                                                                              + sboxes->S1[((*a2 ^ context->p_parray[17]) >> 16) & 0xFF])));
  v8 = context->p_parray[15] ^ (sboxes->S3[(unsigned __int8)v7]
                              + (sboxes->S2[(unsigned __int16)v7 >> 8] ^ (sboxes->S0[v7 >> 24]
                                                                        + sboxes->S1[(v7 >> 16) & 0xFF]))) ^ v6;
  v9 = context->p_parray[14] ^ (sboxes->S3[(unsigned __int8)v8]
                              + (sboxes->S2[(unsigned __int16)v8 >> 8] ^ (sboxes->S0[v8 >> 24]
                                                                        + sboxes->S1[(v8 >> 16) & 0xFF]))) ^ v7;
  v10 = context->p_parray[13] ^ (sboxes->S3[(unsigned __int8)v9]
                               + (sboxes->S2[(unsigned __int16)v9 >> 8] ^ (sboxes->S0[(unsigned int)v9 >> 24]
                                                                         + sboxes->S1[((unsigned int)v9 >> 16) & 0xFF]))) ^ v8;
  v11 = parray[12] ^ (sboxes->S3[(unsigned __int8)v10]
                    + (sboxes->S2[(unsigned __int16)v10 >> 8] ^ (sboxes->S0[(unsigned int)v10 >> 24]
                                                               + sboxes->S1[((unsigned int)v10 >> 16) & 0xFF]))) ^ v9;
  v12 = parray[11] ^ (sboxes->S3[(unsigned __int8)v11]
                    + (sboxes->S2[(unsigned __int16)v11 >> 8] ^ (sboxes->S0[(unsigned int)v11 >> 24]
                                                               + sboxes->S1[((unsigned int)v11 >> 16) & 0xFF]))) ^ v10;
  v13 = parray[10] ^ (sboxes->S3[(unsigned __int8)v12]
                    + (sboxes->S2[(unsigned __int16)v12 >> 8] ^ (sboxes->S0[(unsigned int)v12 >> 24]
                                                               + sboxes->S1[((unsigned int)v12 >> 16) & 0xFF]))) ^ v11;
  v14 = parray[9] ^ (sboxes->S3[(unsigned __int8)v13]
                   + (sboxes->S2[(unsigned __int16)v13 >> 8] ^ (sboxes->S0[(unsigned int)v13 >> 24]
                                                              + sboxes->S1[((unsigned int)v13 >> 16) & 0xFF]))) ^ v12;
  v15 = parray[8] ^ (sboxes->S3[(unsigned __int8)v14]
                   + (sboxes->S2[(unsigned __int16)v14 >> 8] ^ (sboxes->S0[(unsigned int)v14 >> 24]
                                                              + sboxes->S1[((unsigned int)v14 >> 16) & 0xFF]))) ^ v13;
  v16 = parray[7] ^ (sboxes->S3[(unsigned __int8)v15]
                   + (sboxes->S2[(unsigned __int16)v15 >> 8] ^ (sboxes->S0[(unsigned int)v15 >> 24]
                                                              + sboxes->S1[((unsigned int)v15 >> 16) & 0xFF]))) ^ v14;
  v17 = parray[6] ^ (sboxes->S3[(unsigned __int8)v16]
                   + (sboxes->S2[(unsigned __int16)v16 >> 8] ^ (sboxes->S0[(unsigned int)v16 >> 24]
                                                              + sboxes->S1[((unsigned int)v16 >> 16) & 0xFF]))) ^ v15;
  v18 = parray[5] ^ (sboxes->S3[(unsigned __int8)v17]
                   + (sboxes->S2[(unsigned __int16)v17 >> 8] ^ (sboxes->S0[(unsigned int)v17 >> 24]
                                                              + sboxes->S1[((unsigned int)v17 >> 16) & 0xFF]))) ^ v16;
  v19 = parray[4] ^ (sboxes->S3[(unsigned __int8)v18]
                   + (sboxes->S2[(unsigned __int16)v18 >> 8] ^ (sboxes->S0[(unsigned int)v18 >> 24]
                                                              + sboxes->S1[((unsigned int)v18 >> 16) & 0xFF]))) ^ v17;
  v20 = parray[3] ^ (sboxes->S3[(unsigned __int8)v19]
                   + (sboxes->S2[(unsigned __int16)v19 >> 8] ^ (sboxes->S0[(unsigned int)v19 >> 24]
                                                              + sboxes->S1[((unsigned int)v19 >> 16) & 0xFF]))) ^ v18;
  v21 = parray[2] ^ (sboxes->S3[(unsigned __int8)v20]
                   + (sboxes->S2[(unsigned __int16)v20 >> 8] ^ (sboxes->S0[(unsigned int)v20 >> 24]
                                                              + sboxes->S1[((unsigned int)v20 >> 16) & 0xFF]))) ^ v19;
  v22 = parray[1] ^ (sboxes->S3[(unsigned __int8)v21]
                   + (sboxes->S2[(unsigned __int16)v21 >> 8] ^ (sboxes->S0[(unsigned int)v21 >> 24]
                                                              + sboxes->S1[((unsigned int)v21 >> 16) & 0xFF]))) ^ v20;
  v23 = v21 ^ *parray;
  result = a2;
  *a2 = v23;
  *a3 = v22;
  return result;
} 
```

看起来和我非常相似。

# visual-c++ - 如何在 MSVC++ 2008 Express 中构建 64 位应用程序？

> ID：10317066
> 
> 赞同：0
> 
> 时间：2012-04-25T13:47:25.773
> 
> 标签：visual-c++, x86, 64-bit, 32-bit

我正在运行 32 位 Windows，我想知道，是否可以在 MSVC++ 2008 Express Edition 中构建 64 位应用程序？如果是，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:58:30.287

一般来说，VS2008 能够构建 64 位应用程序。您可以通过以下方式做到这一点：

*   左键单击解决方案并选择“配置管理器”
*   点击“Active Solution Platform”组合框（应该选择“Win32”）并选择“new”
*   出现新对话框，因此只需选择目标平台 Itanium/x64
*   点击确定，完成:)

# iphone - 我可以使用 MPMusicPlayerController 播放 .caf 类型的录制音频文件吗？

> ID：10317074
> 
> 赞同：0
> 
> 时间：2012-04-25T13:47:56.253
> 
> 标签：iphone, audio-recording, mpmusicplayercontroller

我知道如何使用 MPMusicPlayerController 从库中播放音乐文件，但我想知道是否有办法使用 MPMusicPlayerController 播放录制的音频文件（.caf 格式）？我正在录制文件并将其保存到 NSDocuments 目录中。我用谷歌搜索但找不到方法？我可以使用 AVAudioPlayer 做同样的事情。但是想用 MPMusicPlayerController 来做。任何建议appriciated。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T22:17:46.973

这是与您所要求的类似的帖子。

[如何将 nsdata 转换为 MPMediaitem 歌曲 iOS Sdk](https://stackoverflow.com/questions/10276484/how-to-convert-nsdata-to-mpmediaitem-song-ios-sdk)

不幸的是 MPMusicPlayer 只能播放 iPod 库中的歌曲，第三方应用程序无法添加到库中。我建议使用它来播放它，`MPMoviePlayerController`因为它可以播放纯音频文件（正如另一个问题的答案所暗示的那样）。

例如：

```
NSURL *audioPathURL = [NSURL fileURLWithPath:videoFilepath];
MPMoviePlayerController *audio;
audio = [[MPMoviePlayerController alloc] initWithContentURL:audioPathURL];
[audio play]; 
```

# asp.net - 查看未正确转换为 LINQ

> ID：10317076
> 
> 赞同：0
> 
> 时间：2012-04-25T13:47:58.670
> 
> 标签：asp.net, .net, sql, sql-server, linq

使用 ASP .Net (MVC Unity Framework) 遇到一个真正奇怪的问题。我的观点如下（在这个例子中已经简化了）：

```
CREATE VIEW [dbo].[V_eSummary] AS
SELECT a.ID,
a.Domain
FROM [Table1] a
GROUP BY a.ID,
a.Domain 
```

基础表具有重复的值，因此分组以获得不同的值。

在 .Net 中，我有以下 LINQ 查询：

```
var eSummary = from s in ctx.V_eSummary
                              select s; 
```

而不是看到（如在 SQL 中运行视图时显示的那样）：

```
ID       Domain
206080   .hello.com
206080   .this.com
206080   www.hello.com
206080   .www.hello.com
206080   .hello.zettaneer.com 
```

我懂了：

```
ID       Domain
206080   .hello.com
206080   .hello.com
206080   .hello.com
206080   .hello.com
206080   .hello.com 
```

使用 SQL 探查器，似乎正在执行正确的查询。但是，无论出于何种原因，它都会在 .Net 中带来不正确的值。

任何建议都非常感谢。

* * *

根据要求，这是来自 SQL 分析器的代码。直接在服务器上运行它会产生正确的结果。:S

```
 SELECT 
 [Extent1].[ID] AS [ID], 
 [Extent1].[Domain] AS [Domain]
 FROM (SELECT 
     [V_eSummary].[ID] AS [ID], 
     [V_eSummary].[Domain] AS [Domain]
     FROM [dbo].[V_eSummary] AS [V_eSummary]) AS [Extent1] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:50:34.377

这不是 .NET 的问题。执行您在 SSMS 中捕获的确切查询。结果很可能是一样的。

请务必在正确的数据库上执行此操作。

# c# - 显示/隐藏正在运行线程的表单的最佳解决方案

> ID：10317077
> 
> 赞同：1
> 
> 时间：2012-04-25T13:48:00.137
> 
> 标签：c#, winforms, multithreading

我有一个主表格和一个分析表格。主窗体有一个名为“显示分析窗体”的按钮。分析表单将运行一个线程。它还有一个名为“后台工作”的按钮，可以隐藏分析表单。
线程处理完成后，应显示分析表单（无论是否单击“后台工作”按钮）并且应启用分析表单中的一些控件。
我有一些代码来描述我的努力，但它不能正常工作。
那么问题是什么，实现这一目标的最佳解决方案是什么？有没有关于这个的样本或文章讨论？

```
public partial class frmAnalyze : Form
{
    Form owner;

    public frmAnalyze(frmMain owner)
    {
        InitializeComponent();
        Owner = owner;
     }

    private void btnAnalyze_Click(object sender, EventArgs e)
    {
            btnBackgroundWork.Enabled = true;

            Analyzer analizer = new Analyzer();
            analizer.OnAnalyzeCallback += new AnalyzeCallbackHandler(analizer_OnAnalyzeCallback);
            analizer.OnAnalyzeProgress += new 
     }

    void analizer_OnAnalyzeCallback(object sender, EventArgs arg)
    {
        if (InvokeRequired)
            this.Invoke(new AnalyzeCallbackHandler(analizer_OnAnalyzeCallback), sender, arg);
        else
        {
            Owner.Invoke(new AnalyzeCallbackHandler(((frmMain)Owner).ShowfrmAnalyze), sender, arg);

            SomeControl.Enabled = true;
        }
    }
} 
```

这很奇怪，InvokeRequired 总是返回 false，这是主要形式

```
public partial class frmMain : Form
{
    private void biAnalyze_Click(object sender, EventArgs e)
    {
        frmAnalyze = new frmAnalyze(this);
        frmAnalyze.ShowDialog();
    }

    internal void ShowfrmAnalyze(object sender, EventArgs e)
    {
        frmAnalyze.Show();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T01:17:09.937

我猜你必须在 AnalyzerForm中使用[BackgroundWorker线程。](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)

您可以在主线程中执行[BackgroundWorker.OnRunWorkerCompleted](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.onrunworkercompleted%28v=vs.95%29.aspx)时显示 AnalyzerForm backk 。

# java - java/primefaces remoteCommand和commandButton变成compositeComponent

> ID：10317079
> 
> 赞同：1
> 
> 时间：2012-04-25T13:48:13.973
> 
> 标签：java

我正在尝试创建 dataTable 的compositeComponent，但我不能将remoteCommand 和commandButton 放在复合中。我的代码如下：

```
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:c="http://java.sun.com/jsp/jstl/core"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:composite="http://java.sun.com/jsf/composite"
xmlns:p="http://primefaces.org/ui">
<composite:interface>
<composite:attribute name="var" />
<composite:attribute name="value" />
<composite:attribute name="newLine" />
<composite:facet name="header" />
<composite:facet name="footer" />
    </composite:interface>
    <composite:implementation>
<h:outputScript name="js/helper.js" />
<p:dataTable value="#{cc.attrs.value}" rowIndexVar="row">
    <c:set target="#{component}" property="var" value="#{cc.attrs.var}" />
    <composite:insertFacet name="header" />
    <p:column>
        <h:outputText value="#{row + 1}" />
        <p:remoteCommand action="#{contatoController.crud.save}"
            name="ajax#{row}">
                <f:setPropertyActionListener                                          target="#{contatoController.crud.row}" value="#{contato}" />
        </p:remoteCommand>
    </p:column>
    <composite:insertChildren />
    <p:column>
        <p:commandButton ajax="false" title="Alterar" icon="ui-icon-trash"
            action="#{contatoController.crud.delete}" process="@this">
    <f:setPropertyActionListener target="#           {contatoController.crud.row}"
                value="#{cc.attrs.var}" />
        </p:commandButton>
    </p:column>
    <composite:insertFacet name="footer" />
</p:dataTable> 
```

当我单击 ManagedBean 中的值时，我在属性上传递了 var 字符串，但应该从 dataTable 行到达对象。有人能帮我吗？

# java - 需要排列组合

> ID：10317084
> 
> 赞同：2
> 
> 时间：2012-04-25T13:48:43.790
> 
> 标签：java, permutation, combinations

我正在尝试从黑莓的本机日历中读取“天”值，该值作为整数返回，该整数映射到一周中每一天的值。值如下：

*   星期一：32768
*   周二：16384
*   周三：8192
*   星期四：4096
*   周五：2048
*   坐：1024
*   太阳：65536

如果事件发生在一天内，我可以查看该值是否为周一/周二/周三/周四/周五/周六/周日

```
if (rule.MONDAY == rule.getInt(rule.DAY_IN_WEEK)) {
    System.out.println("occurs monday");
}
rule.getInt(rule.DAY_IN_WEEK) 
```

值也与星期一值相同。

现在的问题是，如果事件发生在两三天或更长时间内，那么

```
rule.getInt(rule.DAY_IN_WEEK) 
```

返回我选择的所有天数的总和。

示例：如果日期是：wed,sat，那么我得到的结果是 9216，wed+sat 的总和，由此我不知道事件发生的日期。

我如何对这些数字进行排列/组合并获得所选“n”天的确切结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T13:58:54.713

我假设这些日子只是数字中的位标志，因此您可能会更改支票：

```
if ( (rule.getInt(rule.DAY_IN_WEEK) & rule.MONDAY) != 0 ) {
   System.out.println("occurs monday");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T13:58:34.860

像这样使用二进制和运算符：

```
int day = rule.getInt(rule.DAY_IN_WEEK)
if(day & rule.MONDAY != 0) {
 System.out.println("occurs monday");
}
if(day & rule.WEDNESDAY != 0) {
 System.out.println("occurs wednesday");
} /* and so on */ 
```

请注意：

0000 0100 0000 0000 = 1024

0000 1000 0000 0000 = 2048

. . . 还要检查[位掩码](http://en.wikipedia.org/wiki/Mask_%28computing%29)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T14:02:02.713

要知道事件发生在一周中的哪几天，您需要执行以下操作：

```
boolean occursOnMonday = (rule.getInt(rule.DAY_IN_WEEK) & rule.MONDAY) != 0; 
```

其中 & 是按位与运算符。为什么会这样？

星期三是 8192，二进制是 10000000000000（2 乘以 13）

星期六是 1024，二进制是 00010000000000（2 乘以 9）

所以周三和周六发生的事件是 9216，即 10010000000000。

然后使用位运算，您可以知道 1 中的哪些位以及 0 中的哪些位，这样您就可以知道事件发生的日期。

# asp.net-mvc - 如何将我的 MVC4 部分视图返回为 json，这是一件好事吗？

> ID：10317085
> 
> 赞同：2
> 
> 时间：2012-04-25T13:48:47.693
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在尝试清理我的代码。我有一个网格屏幕，它会刷新以下内容：

```
 public ActionResult Details(string pk)
    {
        IEnumerable<ContentDetail> model = null;
        try
        {
            model = _content.Details(pk);
            if (model.Count() > 0)
            {
                return PartialView(getView(pk) + "Details", model);
            }
        }
        catch (Exception e)
        {
            log(e);
        }
        return Content("No records found");
    } 
```

我的所有其余代码都使用 json，我想返回如下内容：

```
public JsonResult JsonDetails(string pk) 
```

但是我应该如何处理 PartialView？我找不到有关如何执行此操作的任何信息。这样做有什么优点/缺点吗？我在想如果代码失败，那么我会返回新的 ASP MVC4 代码使用的类似以下内容：

```
return Json(new { errors = GetErrorsFromModelState() }); 
```

有人可以帮我弄这个吗？我正在寻找特别针对 MVC4 的任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T15:38:45.557

我以前使用过这个[答案](https://stackoverflow.com/a/3696353/950055)中概述的方法，这对我来说是成功的。

我想不出在 JSON 中返回 HTML 的任何缺点，尽管有效负载可能比单独返回数据要大得多。

另一种方法是将模型作为 JSON 返回，并使用模板库（例如[Handlebars.js](http://handlebarsjs.com/)）在客户端生成标记。这是单页应用程序中的常用方法。

你关于返回错误的想法很好。`GetErrorsFromModelState`仅在模型状态中存在验证错误的情况下使用 - 在上面的示例中，您没有执行任何需要您使用此方法的验证。所以你可能想在你的catch块中输出一些友好的信息，例如

```
try
{
    ...
}
catch (Exception e)
{
    log(e);
    return Json(new { errors = "An error occurred, please try again later" });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:55:04.557

我以前使用过[这个答案](https://stackoverflow.com/questions/1181849/asp-net-mvc-combine-json-result-with-viewresult)中的代码，对我来说效果很好，我没有尝试返回特定的错误，但可以访问`controller.ModelState`检查。

# c# - 为什么 .NET 中有 5 个版本的计时器类？

> ID：10317088
> 
> 赞同：94
> 
> 时间：2012-04-25T13:48:53.570
> 
> 标签：c#, .net, timer

为什么.Net框架中有五个定时器类，分别是：

1.  `System.Timers.Timer`
2.  `System.Threading.Timer`
3.  `System.Windows.Forms.Timer`
4.  `System.Web.UI.Timer`
5.  `System.Windows.Threading.DispatcherTimer`

为什么有多个版本的 Timer 类？它们之间有什么区别？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2019-08-30T18:00:58.240

以下是对主要计时器的描述以及我认为最值得注意的要点。

`Winforms.Timer`

*   UI线程上的滴答声不能保证在特定时间出票
*   滴答声延迟到 UI 线程空闲
*   如果 UI 线程忙，将跳过刻度

`DispatcherTimer`

*   在 UI 线程上调用
*   可以设置生成刻度所需的“空闲”级别的优先级
*   将跳过刻度

`Threading.Timer`

*   来自线程池的工作线程上的滴答声 - 没有指定线程的选项
*   滴答声总是按时触发
*   没有一个被跳过 - 当您仍在处理以前的刻度时，您必须防止新的刻度
*   *未处理的异常会使应用程序崩溃*

`Timers.Timer`

*   线程定时器的包装
*   从 CLR 线程池获取的工作线程上的滴答声
*   可以通过提供 SynchronizationObject 来强制在特定线程上打勾
*   滴答声总是按时触发
*   没有一个被跳过
*   默默吃例外

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-03-28T16:27:34.170

`Timers.Timer`在设定的时间间隔后生成事件，并可选择生成重复事件。[MSDN](https://msdn.microsoft.com/en-us/library/system.timers.timer(v=vs.110).aspx)

`Windows.Forms.Timer`是winforms的控件。

`Web.UI.Timer`以定义的时间间隔执行异步或同步网页回发。[MSDN](https://msdn.microsoft.com//en-us/library/system.web.ui.timer(v=vs.110).aspx)

`Threading.Timer`是回调的计时器。为工作创建一个新线程。由线程池线程提供服务。[MSDN](https://msdn.microsoft.com//en-us/library/system.threading.timer(v=vs.110).aspx)

因此，这些计时器有不同的用途，它们也由不同的工具提供服务。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-12-08T21:53:39.763

微软现在在 MSDN 文章中回答了这个问题`system.timers.timer`

[https://docs.microsoft.com/en-us/dotnet/api/system.timers.timer?view=net-5.0](https://docs.microsoft.com/en-us/dotnet/api/system.timers.timer?view=net-5.0)

> 小费
> 
> 请注意，.NET 包含四个名为 Timer 的类，每个类都提供不同的功能：

> `System.Timers.Timer`（本主题）：定期触发事件。该类旨在用作多线程环境中的基于服务器或服务组件；它没有用户界面，在运行时不可见。

> `System.Threading.Timer`：定期在线程池线程上执行单个回调方法。回调方法是在定时器实例化时定义的，不能更改。与 System.Timers.Timer 类一样，此类旨在用作多线程环境中的基于服务器或服务组件；它没有用户界面，在运行时不可见。

> `System.Windows.Forms.Timer`（仅限 .NET Framework）：定期触发事件的 Windows 窗体组件。该组件没有用户界面，设计用于单线程环境。

> `System.Web.UI.Timer`（仅限 .NET Framework）：一个 ASP.NET 组件，它定期执行异步或同步网页回发。

# github - 将 Bootstrap 自定义为 Less 格式

> ID：10317089
> 
> 赞同：1
> 
> 时间：2012-04-25T13:48:54.447
> 
> 标签：github, twitter-bootstrap, less, html5boilerplate

有没有办法下载自定义版本的 twitter boostrap（您可以在其中编辑颜色、网格宽度等），为您提供 .less 格式的 css？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T13:54:01.797

Bootstrap 在 Less 中：[https](https://github.com/twbs/bootstrap/tree/master/less) ://github.com/twbs/bootstrap/tree/master/less （截至 3.0.0）

这里有一个 SASS 版本：[https ://github.com/jlong​​/sass-twitter-bootstrap](https://github.com/jlong/sass-twitter-bootstrap)

编辑：您可以“分叉”其中一个版本，并向其中添加您自己的编辑。如果您不介意您的分叉是否可供其他人公开使用，您可以免费使用 GitHub。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T14:28:31.277

bootstrap 包已包含较少的工作表，因此您可以从 GitHub[下载](http://twitter.github.com/bootstrap/assets/bootstrap.zip)整个包并立即开始工作。您还可以通过在Bootstrap 文档页面上的自[定义](http://twitter.github.com/bootstrap/customize.html)部分自定义下载来修改引导程序上的大多数样式，这也将减少您所做的更改。

[这](http://twitter.github.com/bootstrap/extend.html)是无引导的文档。

# php - PHP搜索多个字段问题

> ID：10317095
> 
> 赞同：1
> 
> 时间：2012-04-25T13:49:07.763
> 
> 标签：php, mysql, full-text-search

我正在在线完成本教程：http: [//goo.gl/qnk6U](http://goo.gl/qnk6U)

数据库表：ajax_search

```
名字 | 姓氏 | 年龄 | 家乡 | 工作
------------------------------------------
乔 | 史密斯 | 35 | 博尔德 | 中央情报局   
史蒂夫 | 苹果 | 36 | 丹佛 | 联邦调查局
```

（类型都是 varchar，除了 age 是 int。）

我的问题。下面的 sql select 语句是否正确编写以查询“Joe 35”？出于某种原因，我只能查询“Joe”并且它可以工作，但不能组合搜索词。

```
$sql = "select * from ajax_search where FirstName like '%$rec%' or LastName like '%$rec%' or Age like '%$rec%' or Hometown like '%$rec%'"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:53:54.060

假设您的查询是“Joe 35”，那么没有。您的查询匹配四个字段中的任何一个包含“Joe 35”（在单个字段中）的任何行。要查询名为 Joe 且年龄为 35 岁的用户，您需要拆分搜索查询并执行以下操作：

```
WHERE Firstname LIKE "$firstname" AND Age LIKE "$age" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:59:56.683

您需要从搜索查询中拆分该刺痛：

```
$columns = array("Firstname", "Lastname", "Age", "Hometown", "Job");
$string = ""; // acquire query string
$split = explode(" ", $string);
$search_words = array();
foreach ($split as $word) {
   $search_words[] = $word;
} 
```

创建查询以搜索所有字段：

```
$first = true;
$sql = "select * from ajax_search where";
foreach ($search_words as $word) {
   foreach ($columns as $col) {
      $sql .= (($first) ? " " : " OR") . "`$col` LIKE \"%" . $word . "%\"";
      $first = false;
   }
} 
```

然后运行此查询。

另一个也是更好的解决方案是更复杂的基于词（标签）的索引，因为当与更多词一起使用时，这会产生**病态的查询。**

# php - Yii 设置虚拟属性

> ID：10317104
> 
> 赞同：1
> 
> 时间：2012-04-25T13:49:42.667
> 
> 标签：php, model, yii

大家好，我有一个小问题，希望您能提供帮助。我在我的模型中创建 4 个虚拟属性：

start_time_hr start_time_mn

end_time_hr end_time_mn

使用以下内容：

```
/**
     * Retrieves hour portion of start_time
     * @return string
     */
    public function getstart_time_hr(){
        $str = explode(':', $this->start_time);
        return $str[0];
    } 
```

这主要用于用户界面，因此用户可以通过一组下拉框设置开始和结束时间。这有效，问题是将选择写回数据库。

我目前在我的模型中有这个：

```
public function setstart_time_hr($value){
        $this->start_time_hr = $value;
    }
public function setstart_time_mn($value){
        $this->start_time_mn = $value;
    }

public function beforeSave(){
        if(!empty($this->start_time_hr)){
            $this->start_time = $this->start_time_hr.':'.$this->start_time_mn;
        }
        return parent::beforeSave();
    } 
```

我的保存表单操作是：

```
public function actionAdminChangeShift($calId){
          $model = CalShift::model()->findByPk($calId);
          $model->attributes = $_POST['CalShift'];
          $model->save();
          //$this->redirect(array('CalDialog','calID'=>$calId,'eventType'=>'click'));

      } 
```

我还尝试在 set 函数中重建 start_time 变量，但这也不起作用。我错过了什么？我是否必须从 from 手动组合变量并将其传递给模型？

```
$model->start_time = $_POST['CalShift']['start_time_hr'].':'.$_POST['CalShift']['start_time_mn']; 
```

这不是一个大问题，但我宁愿这种组合作为正常保存功能的一部分在模型中进行。

旁注：有时时间以它们存储在 DB '01:30' 中的格式传递，而不是作为单独的值，因此它确实需要对此做出响应。

再次感谢。

**编辑：**

我可以通过将 setstart_time_hr 函数更改为：

```
public function setstart_time_hr($value){
        $str = explode(':', $this->start_time);
        $this->start_time = $value.':'.$str[1];
    } 
```

但它不会使用

```
$model->attributes = $_POST['CalShifts'] 
```

我必须通过执行以下操作手动分配值：

```
$model->start_time_hr = $_POST['CalShift']['start_time_hr'];
$model->start_time_mn = $_POST['CalShift']['start_time_mn']; 
```

有谁知道让 $model->attributes 工作的解决方法？

再次感谢

**编辑#2**

我无法回答我自己的问题，所以这里是答案：

对此的修复是在模型中：

```
public function rules()
    {
        // NOTE: you should only define rules for those attributes that
        // will receive user inputs.
        return array(
            .......
            array('notice_sent_date, start_time_hr, start_time_mn', 'safe'),
            // The following rule is used by search().
            // Please remove those attributes that should not be searched.
            ....
        );
    }

public function setstart_time_hr($value){
    $str = explode(':', $this->start_time);
    $this->start_time = $value.':'.$str[1];
}
public function setstart_time_mn($value){
    $str = explode(':', $this->start_time);
    $this->start_time = $str[0].':'.$value;
} 
```

开始工作的关键`$model->attributes = $_POST['CalShifts']`是确保标记为安全的 2 个虚拟属性。

希望这对其他人有帮助..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T00:44:15.820

对此的修复是，在模型中添加：

```
public function rules()
    {
        // NOTE: you should only define rules for those attributes that
        // will receive user inputs.
        return array(
            .......
            array('notice_sent_date, start_time_hr, start_time_mn', 'safe'),
            // The following rule is used by search().
            // Please remove those attributes that should not be searched.
            ....
        );
    }

public function setstart_time_hr($value){
    $str = explode(':', $this->start_time);
    $this->start_time = $value.':'.$str[1];
}
public function setstart_time_mn($value){
    $str = explode(':', $this->start_time);
    $this->start_time = $str[0].':'.$value;
} 
```

开始工作的关键`$model->attributes = $_POST['CalShifts']`是确保标记为安全的 2 个虚拟属性。

希望这对其他人有帮助..

# python - Postgresql DROP TABLE 不起作用

> ID：10317114
> 
> 赞同：42
> 
> 时间：2012-04-25T13:50:04.030
> 
> 标签：python, database, django, postgresql

我正在尝试使用该`"DROP TABLE"`命令删除一些表，但由于未知原因，该程序只是“坐下”并且不会删除我希望它在数据库中的表。

我在数据库中有 3 个表：

Product、Bill 和 Bill_Products，用于在 bills 中引用产品。

我设法删除/删除产品，但我不能对账单和 Bill_Products 做同样的事情。我正在发出相同`"DROP TABLE Bill CASCADE;"`的命令，但命令行只是停止。我也使用了没有`CASCADE`选项的简单版本。

你知道为什么会这样吗？

**更新：**

我一直认为数据库有可能保留从产品到账单的一些引用，也许这就是它不会删除 Bill 表的原因。

所以，就此而言，我发布了一个简单的`SELECT * from Bill_Products`，并在几（10-15）秒后（奇怪的是，因为我认为当有一张空桌子时它持续这么长时间是不正常的）它打印出表格并它的内容，没有。（所以***显然***没有从 Products 到 Bill 的参考资料）。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-04-25T14:04:33.590

什么是输出

```
SELECT *
  FROM pg_locks l
  JOIN pg_class t ON l.relation = t.oid AND t.relkind = 'r'
 WHERE t.relname = 'Bill'; 
```

可能有其他会话并行使用您的表，您无法获得[访问独占](http://www.postgresql.org/docs/7.4/static/explicit-locking.html#LOCKING-TABLES)锁来删除它。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-10-29T13:32:53.010

做就是了

```
SELECT pid, relname
FROM pg_locks l
JOIN pg_class t ON l.relation = t.oid AND t.relkind = 'r'
WHERE t.relname = 'Bill'; 
```

然后杀死每个pid

```
kill 1234 
```

其中 1234 是查询结果中的实际 pid。

您可以像这样将它们全部连接在一起（因此您不必手动复制粘贴每个 pid）：

```
psql -c "SELECT pid FROM pg_locks l 
    JOIN pg_class t ON l.relation = t.oid AND t.relkind = 'r' 
    WHERE t.relname = 'Bill';" | tail -n +3 | head -n -2 | xargs kill 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-12-30T00:57:50.640

所以我用头撞墙了几个小时试图解决同样的问题，这是对我有用的解决方案：

检查 PostgreSQL 是否有一个从未提交或回滚的未决准备事务：

```
SELECT database, gid FROM pg_prepared_xacts; 
```

如果您得到结果，那么对于每个事务**gid** ，您必须从有问题的数据库执行**ROLLBACK ：**

```
ROLLBACK PREPARED 'the_gid'; 
```

如需更多信息，[请单击此处](http://doc.nuxeo.com/display/KB/I+can%27t+delete+my+PostgreSQL+database)。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2020-06-11T19:17:29.203

如果这是针对 AWS postgres 运行第一个语句以获取 PID（进程 ID），然后运行第二个查询以终止进程（这与执行 kill -9 非常相似，但因为这是在云中，这就是 AWS 推荐的)

```
-- gets you the PID
SELECT pid, relname FROM pg_locks l JOIN pg_class t ON l.relation = t.oid AND t.relkind = 'r' WHERE t.relname = 'YOUR_TABLE_NAME'

-- what actually kills the PID ...it is select statement but it kills the job!
SELECT pg_terminate_backend(YOUR_PID_FROM_PREVIOUS_QUERY); 
```

[来源](https://aws.amazon.com/premiumsupport/knowledge-center/rds-postgresql-running-queries/)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-09-28T22:52:09.063

有同样的问题。

桌子上没有任何锁。

重启有帮助。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-02-23T23:12:53.777

我今天遇到了这个问题，我正在发布：

`DROP TABLE TableNameHere`

并得到`ERROR: table "tablenamehere" does not exist`. 我意识到对于区分大小写的表（就像我的表一样），您需要引用表名：

`DROP TABLE "TableNameHere"`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-11-22T19:01:25.240

老问题，但遇到了类似的问题。无法重新启动数据库，所以测试了一些东西，直到这个序列工作：

*   截断表 foo；
*   同时删除索引 foo_something; 4-5 倍
*   更改表 foo 删除列whatever_foreign_key；3倍
*   alter table foo drop column id;
*   删除表 foo；

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-01T23:40:33.380

同样的事情也发生在我身上——只是因为我忘记了分号。*掌心*

# c# - linq to sql 使用 lambda 连接多个列

> ID：10317117
> 
> 赞同：29
> 
> 时间：2012-04-25T13:50:15.007
> 
> 标签：c#, sql, linq, lambda

有人可以帮我翻译这个吗

```
var query = from s in context.ShoppingMalls
join h in context.Houses
on
new { s.CouncilCode, s.PostCode }
equals
 new { h.CouncilCode, h.PostCode }
select s; 
```

进入 lambda 查询？

谢谢。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-04-25T13:53:28.787

```
var query = context.ShoppingMalls
                   .Join(
                       context.Houses,
                       s => new { s.CouncilCode, s.PostCode },
                       h => new { h.CouncilCode, h.PostCode },
                       (s, h) => s); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2018-04-30T23:25:31.887

尽管@Thomas Levesque 给出的示例和答案适用于匹配的列，但如果您有要加入的列但它们具有不同的名称，我也想提供答案。这是我在谷歌上搜索所需要的，这个问题让我很接近。

当然，不同之处在于将列显式声明为要识别的变量。

```
var query = context.MapKitsToResources
              .Join(
                     context.Resources, 
                     o => new { Id = o.ResourceId, Type = o.ResourceTypeId},
                     i => new { Id = i.Id, Type = TypeId},
                     (o, i) = new { rType : i }; 
```

# android - Android EditText 上的 logcat 错误

> ID：10317119
> 
> 赞同：1
> 
> 时间：2012-04-25T13:50:23.347
> 
> 标签：android

这是我的代码。我想将我的字符串保存到共享首选项中。

```
private String sla;
private String b;
private String c;
//EditText aa=(EditText)findViewById(R.id.et1);
EditText aa2=(EditText)findViewById(R.id.et2);
EditText aa3=(EditText)findViewById(R.id.et3);
SharedPreferences settings = getSharedPreferences ("PREF_DEMO", 0);

 /** Called when the activity is first created. */
      @Override
      public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.setup);

         RadioGroup rdg=(RadioGroup)findViewById(R.id.ragp);

         rdg.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {
                public void onCheckedChanged(RadioGroup group, final int checkedId) {
                    switch (checkedId) {
                        case R.id.radio0:
                            sla = "au";
                            Toast.makeText(group.getContext(), "Auto", Toast.LENGTH_LONG).show();
                            break;
                        case R.id.radio1:
                             sla = "ma";
                             Toast.makeText(group.getContext(), "Manual", Toast.LENGTH_LONG).show();
                            break;
                        }
                };
            });
         final Button set = (Button) findViewById(R.id.nn);
         set.setOnClickListener(new View.OnClickListener() {
             public void onClick(View v) {
                 // Perform action on click
                // a=aa.getText().toString();
                 b=aa2.getText().toString();
                 c=aa3.getText().toString();
                 SharedPreferences.Editor editor = settings.edit();

                 editor.putString("sp", b);
                 editor.putString("tp", c);
                 editor.putString("op", sla);
                 editor.commit();
                 Toast.makeText(v.getContext(), "saved", Toast.LENGTH_LONG).show();
             }
         }); 
```

所以，我在“EditText aa3=(EditText)findViewById(R.id.et3);”行的 logcat 中遇到了一个异常。这段代码没有解析错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:53:53.243

在 setContentView(R.layout.main) 之后添加这一行因为之前无法从布局 xml 文件中获得参考

```
 EditText aa2=(EditText)findViewById(R.id.et2); 
  EditText aa3=(EditText)findViewById(R.id.et3); 
```

添加喜欢....

```
 EditText aa2;
  EditText aa3;

 public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.setup);

         aa2=(EditText)findViewById(R.id.et2);
         aa3=(EditText)findViewById(R.id.et3); 
```

# c# - 如果用户关闭浏览器，WCF 服务是否工作

> ID：10317121
> 
> 赞同：0
> 
> 时间：2012-04-25T13:50:29.750
> 
> 标签：c#, wcf

我对 WCF 服务非常陌生，事实上我昨天才开始阅读它，我有一个将大文件上传到服务器的 Web 应用程序。我需要某种类型的工作程序来异步上传这些文件（在工作线程上），所以我在我的应用程序中创建了一个 WCF 服务。我想知道如果用户启动此任务，然后关闭浏览器，服务是否会完成创建的任务。调试时一切正常，但我想确保我正确执行并确保即使用户退出浏览器也能完成。谢谢你的帮助。

执行

```
var uploaderservice = new VideoUploader();
                    var tasks = Task.Factory.StartNew(() => uploaderservice.DoWork(stream, fileName, fileType, username, password, picasaalbumid, albumid)); 
```

这是我的 WCF

```
 [OperationContract]
        public void DoWork(Stream stream,string fileName,string fileType,string username,string password,string picasaalbumid,string albumid)
        {
           //Will Do all the work 

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:26:45.253

只要文件已完全传输，这将按预期工作。但是，如果在传输过程中关闭浏览器，文件传输将停止。

浏览器负责发送文件，如果关闭，则无法发送。

# xcode - 每当我单击“存档”选项卡时，Xcode 的 4.3.2 管理器都会冻结

> ID：10317125
> 
> 赞同：8
> 
> 时间：2012-04-25T13:50:40.883
> 
> 标签：xcode, archive, organizer

我试图存档一个项目以便将其上传到 TestFlight。但是，当我打开 Organizer 以将我的存档导出为 ipa 时，它会在我单击“存档”选项卡时立即冻结。

我试图创建另一个用户，同样的问题。

我也尝试删除档案文件夹的内容。

Xcode 现在完全没有响应，Activity Monitor 显示一个“bash”进程占用了大约 40% 的处理器。

任何的想法？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-30T18:17:34.463

这就是问题的答案！

从终端执行这个
xcode-select -switch /Applications/Xcode.app/Contents/Developer/

在另一个帖子上找到

[为什么归档时 xcode 4.3.2 会挂起？](https://stackoverflow.com/questions/10115551/why-does-xcode-4-3-2-hang-when-archiving)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-01T08:39:13.670

首先试试这个：[另一个堆栈溢出答案](https://stackoverflow.com/a/6247073/696717)。对我来说，它曾经帮助过一次。此外，如果您在 Xcode 挂起时运行系统监视器应用程序，您会看到几个 bash 进程占用了您所有的 CPU 时间。尝试杀死他们，直到组织者打开。

如果这对您也没有帮助，请迁移到 Android 或 Windows Phone。Visual Studio 和 Eclipse 都更加友好:)

# ios - 是否可以在 statusBarOrientation 更改时添加观察者或通知？

> ID：10317127
> 
> 赞同：1
> 
> 时间：2012-04-25T13:50:45.970
> 
> 标签：ios, uistatusbar, uideviceorientation

我有一个非常棘手的代码，因为有时我会设置一个新的方向。

```
[[UIDevice currentDevice] setOrientation:UIInterfaceOrientationPortrait]; 
```

是否可以在 statusBarOrientation 更改时添加观察者或通知？我想知道当前的方向是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:19:20.183

您使用的代码非常棘手。

您正在使用的属性声明如下：

```
@property (nonatomic, readonly) UIDeviceOrientation orientation 
```

因此，使用此私有方法时，您的应用程序将被拒绝。

如果要更改界面方向，则应查看`UIViewController`回调。

关于您的问题，您可以手动完成。设置新方向后发送自定义通知。然后随心所欲地捕捉该通知。但请注意我之前所说的。

有关更多信息，您可以在[method-uidevice-setorientation-is-it-still-denied](https://stackoverflow.com/questions/8257464/method-uidevice-setorientation-is-it-still-denied)上查看此 stackoverflow 主题。

希望能帮助到你。

# jquery - 如何使 div 内容可编辑和可拖动

> ID：10317128
> 
> 赞同：12
> 
> 时间：2012-04-25T13:50:52.753
> 
> 标签：jquery, jquery-ui

```
<div contenteditable="true" id="d">
<span>Text to edit</span>
</div>

$("#d").draggable(); 
```

我只能拖动这个 div 但我如何编辑它（比如双击可编辑属性变为活动状态，点击拖动变为活动状态）？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-25T14:13:08.747

```
$("#d").draggable()
  .click(function() {
    $(this).draggable({ disabled: false });
}).dblclick(function() {
    $(this).draggable({ disabled: true });
});
​​ 
```

[演示](http://jsfiddle.net/UH9UE/1)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-19T07:42:37.233

```
$("#d")
.draggable()
.click(function(){
    if ( $(this).is('.ui-draggable-dragging') ) {
        return;
    }
    $(this).draggable( "option", "disabled", true );
    $(this).attr('contenteditable','true');
})
.blur(function(){
    $(this).draggable( 'option', 'disabled', false);
    $(this).attr('contenteditable','false');
}); 
```

这是演示：http: [//jsfiddle.net/UH9UE/222/](http://jsfiddle.net/UH9UE/222/)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-31T16:25:27.967

另一种选择是传递 .draggable({ handle: "handleDiv" }) ，它允许您一直保持可拖动以及允许内容可编辑的编辑。只需在内部创建两个 div 的可拖动 div：句柄和 contenteditable div。

[API 文档](http://api.jqueryui.com/draggable/#option-handle)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-12T21:10:24.647

我发现跟随行为更加直观和流畅（无需双击）。

**版本 1**（最佳） [http://jsfiddle.net/k1d9ftyu/](http://jsfiddle.net/k1d9ftyu/)

```
d.onmousedown = e => {
    d.contentEditable = false
}

d.ondragstart = e => {
    e.dataTransfer.setData('text', "XXX");
}

d.ondragend = () => {
    d.contentEditable = true
}

d.onmouseup = e => {
    d.contentEditable = true
    if (document.caretRangeFromPoint)
        range = document.caretRangeFromPoint(e.clientX, e.clientY)
    else {   // firefox
        var sel = window.getSelection()
        sel.collapse(e.rangeParent, e.rangeOffset)
    }
}
```

```
#d {
    background-color: #cfc;
    width: 200px;
}

#d[contenteditable=false] {
    cursor: grab;
}
```

```
<div contenteditable=true>
The green child div is contenteditable by default (as well as the parent div). The caret can run through both divs.
<div id="d" draggable=true contenteditable=true>Mousedown sets contenteditable=false, the div can be dragged. If not dragged after click, it becomes again contenteditable.</div>
The caret is positioned according to the last click.
</div>
```

**版本 2**

与版本 1 类似，但`mouseenter`需要再次单击才能正确定位插入符号：http: [//jsfiddle.net/z8aojdg6](http://jsfiddle.net/z8aojdg6)

**版本 3**
默认为 原始版本`contenteditable=false`。由于`focus()`调用，插入符号被放置在行尾。因此，需要再次单击以重新定位插入符号（使用`selection`and可能会对其进行改进`range`）。

```
d.onmouseup = () => {
  d.contentEditable = true
  d.focus()
}

d.onblur = () => {
  d.contentEditable = false
}
```

```
#d {
    background-color: #ccc;
    width: 130px;
    height: 90px;
}
#d:focus {
    outline: 2px solid blue;
}
```

```
<div id="d" draggable=true contenteditable=false>
  Edit me when focussed. Drag me when inactive.</div>
```

演示：http: [//jsfiddle.net/rz28c0xe](http://jsfiddle.net/rz28c0xe)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-25T14:06:22.417

```
<div contenteditable="true" id="d">
<span>Text to edit</span>
</div>

$(function(){
$("#d").click(function() {
$("#d").draggable();      
});

$("#d").dblclick(function(){
see here for this functionality http://stackoverflow.com/questions/2441565/how-do-i-make-a-div-element-editable-like-a-textarea-when-i-click-it   
}); 
}); 
```

​</p>

# php - Joomla - 如何捕捉系统事件

> ID：10317130
> 
> 赞同：1
> 
> 时间：2012-04-25T13:50:55.047
> 
> 标签：php, events, joomla, components, joomla1.7

我正在编写一个作为组件（不是插件）的 joomla 扩展，但是我还需要能够检测文章何时发布。我已经发现我可以使用捕获系统事件 onContentChangeState 的插件来执行此操作，但是我无法弄清楚如何使用组件捕获事件。有任何想法吗？

我知道最简单的解决方案是将其作为两个扩展，一个插件和一个组件，但这是不可接受的。它必须是组件的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T22:24:48.750

1.  响应事件只能通过插件来完成，只有[插件才能充当](http://docs.joomla.org/Plugin_Developer_Overview)触发事件的观察者。（否则将需要对核心进行严重的黑客攻击）。
2.  [Joomla 组件](http://docs.joomla.org/Component)负责显示在页面（前端/后端）上的“主要内容” 。它不充当观察者（虽然过时的[组件流程仍然类似于此图](http://docs.joomla.org/Component_Program_Flow)）。
3.  常见的设计和实践是使用它自己的插件来发布一个组件，例如。[JCE](http://www.joomlacontenteditor.net/)、[Virtuemart](http://virtuemart.net/)、[Akeeba](https://www.akeebabackup.com/)等等……
4.  来自 Joomla！从 1.6 开始，单个[包](http://docs.joomla.org/Package)可以包含多个存档，每个存档都有自己的[清单](http://docs.joomla.org/Manifest_files)，即一个组件及其相关插件。

最终结果是您可以制作一个使用一个安装包的单个扩展，因为它的多个元素。

# php - PHP图像编辑（我做错了吗？）

> ID：10317133
> 
> 赞同：1
> 
> 时间：2012-04-25T13:51:05.453
> 
> 标签：php, imagemagick

我需要调整 7 张图像的大小并将其缝合在一起，因为我使用的是 ImageMagick，但它非常重并且需要很长时间才能执行。我可以使用其他更轻的库吗？或者也许我的代码是罪魁祸首：

```
<?php
header('Content-type: image/jpeg');

$thumb = new Imagick();
$thumb->newImage(128*7,128, 'black');
$thumb->borderImage( 'purple', 1, 1 );

$images = new Imagick(glob('*.jpg'));

$counter =0;
foreach($images as $image) {

    // Providing 0 forces thumbnailImage to maintain aspect ratio
    $image->thumbnailImage(128,128, true);
    $thumb->compositeImage($image,Imagick::COMPOSITE_DEFAULT, (128*$counter)+(64-$image->getImageWidth()/2),64-$image->getImageHeight()/2);//echo $image;

    $counter++;
}
$thumb->setImageFormat('jpeg');
echo $thumb;    

?> 
```

**更新：**
对于 iPhone 应用程序，我决定在 iPhone 本身上进行大小调整和拼接（然后将结果上传到服务器以供将来使用）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:42:19.597

我不使用imagick，而是使用带有php exec() 的Imagemagick 命令行，您可以使用define 作为“提示”来加快jpg 调整大小。我相信它只读取足够的输入图像来创建输出图像。

无论如何，几周前 Imagemagick 论坛上有一篇关于使用 Imagick 加快 jpg 调整大小的帖子，答案是：

```
$image = new Imagick();
$image->setOption('jpeg:size', '800x532');
$image->readImage('origional.jpg'); 
```

我不确定这在您的情况下如何工作，原始线程是： [http ://www.imagemagick.org/discourse-server/viewtopic.php?f=10&t=20586&hilit=speed](http://www.imagemagick.org/discourse-server/viewtopic.php?f=10&t=20586&hilit=speed)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T18:16:26.613

由于我正在编写一个 iPhone 应用程序并且我在服务器上的资源很少，我决定在 iphone 端做“艰苦”的工作。

丹尼尔

# c++ - WaitForSingleObject 超时太快

> ID：10317135
> 
> 赞同：4
> 
> 时间：2012-04-25T13:51:09.917
> 
> 标签：c++, winapi

我在辅助线程中有这段代码：

```
DWORD result = WaitForSingleObject(myhandle,10000);
if(result == WAIT_OBJECT_0){
    AfxMessageBox(_T(...));
}
else if(result  == WAIT_TIMEOUT){

    AfxMessageBox(_T("Timeout"));
} 
```

有时，并非总是如此，几乎只要调用 WaitForSingleObject 就会调用超时（甚至不是 1s 延迟）。

难道我做错了什么 ？对更稳定的替代品有什么建议吗？

* * *

编辑：

`myhandle`在类构造函数中创建为：

```
myhandle = CreateEvent(NULL,FALSE,FALSE,_T("myhandle")); 
```

它会被另一个函数调用：

```
SetEvent(myhandle); 
```

关键是它在我执行 SetEvent 时有效，问题是它有时会在调用 WaitForSingleObject 时立即超时，即使它应该等待 10 秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:20:17.037

`WaitForSingleObject`不会等待整个 10 秒。它将等待第一个：

1.  超时值已过
2.  事件发出信号
3.  句柄失效（在另一个线程中关闭）

如果在调用时设置了事件`WaitForSingleObject`，则条件 #2 从一开始就为真并`WaitForSingleObject`立即返回。

如果你想*总是*等待 10 秒，你应该使用这样的代码：

```
//Always wait 10 seconds
Sleep(10000); 

//Test the event without waiting
if(WaitForSingleObject(myhandle, 0) == WAIT_OBJECT_0) {
    AfxMessageBox(_T("Event was set in the last 10 secondes"));
} else {
    AfxMessageBox(_T("Timeout"));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:11:41.930

你真的需要/想要一个命名事件吗？通常这仅对进程间并发控制是必需的。

如果您有此类的多个实例，它们都将使用相同的事件 - 请参阅[CreateEvent 的文档，](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682396%28v=vs.85%29.aspx)了解调用已存在的命名对象。

您可能需要做的就是在此处删除名称。这允许每个类实例都有自己的`Event`对象，并且行为应该更可预测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T15:46:59.980

Took awhile but the problem actually was that the program sometimes did multiple calls to `WaitForSingleObject`. So it's a previous call that is timing out.

Solution is to use `WaitForMultipleObjects` and set a cancelling event in the case it is known that the first event won't be set, so the timer is cancelled before is it re-invoked.

# delphi - 如何创建自定义 MAPI dll 以捕获扩展的 MAPI api 调用

> ID：10317136
> 
> 赞同：0
> 
> 时间：2012-04-25T13:51:18.327
> 
> 标签：delphi, winapi, dll, mapi, fpc

我有一个遗留应用程序，它使用扩展的 MAPI 调用 Outlook 来发送电子邮件。Outlook 非常不稳定，不作为服务运行并且无法处理大量电子邮件，因此我正在寻找一种替换 Outlook 的方法。如果没有第三方解决方案，我想我将不得不弄清楚如何创建一个模拟 Outlook 的 MAPI dll 的 MAPI dll。我做了一些谷歌搜索，找到了导出 12 个简单 MAPI 函数的代码，但扩展 MAPI 的信息很少。尽可能地，我更喜欢使用 Delphi 或 Lazarus（支持 64 位？）来创建 dll。有什么方法可以用来捕获扩展的 MAPI 调用。同时，我在 WINE 文档上找到了一些信息 - [http://source.winehq.org/WineAPI/mapi32.html](http://source.winehq.org/WineAPI/mapi32.html)

将不胜感激任何指针。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:11:39.020

Don't do that: MAPI is not just a dll, it ia set of providers (PST, Exchange, etc.) that plug in. Have you looked into the standalone version of MAPI? [http://www.microsoft.com/download/en/details.aspx?DisplayLang=en&id=1004](http://www.microsoft.com/download/en/details.aspx?DisplayLang=en&id=1004) It can be used from a service just fine. Also, if you are using Extended MAPI only, why are you trying to run Outlook in a service? While it is indeed cannot be used in a service, the MAPI system that most versions of Outlook install can be used in a service just fine.

# java - 将图像序列化为android

> ID：10317137
> 
> 赞同：1
> 
> 时间：2012-04-25T13:51:21.533
> 
> 标签：java, android

论坛的好朋友，请看我的问题。

会发生什么，我花了几天时间寻找在 android 中序列化图像并获得带有序列化代码的字符串的结果。我已经搜索了很远，我发现的唯一东西是将其他对象转换为硬盘驱动器上的物理对象的方法......

请如果有人知道如何执行此程序，我将不胜感激:)

萨鲁2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:12:57.643

还没有测试过，但这应该可以工作（我可能是错的，没有时间测试对不起！！！）

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();  
bm.compress(Bitmap.CompressFormat.PNG, 100, baos); //bm is the bitmap object   
byte[] b = baos.toByteArray();  
String result = new String(b); 
```

# javascript - 功能处置 mootools.floor 不起作用

> ID：10317138
> 
> 赞同：0
> 
> 时间：2012-04-25T13:51:24.893
> 
> 标签：javascript, mootools, floor

我想使用这个验证表单

[http://mootools.floor.ch/en/download/](http://mootools.floor.ch/en/download/)

但不工作。

```
 <form name="niceform" id="third" action=""  class="niceform" method="post" enctype="multipart/form-data">
    <div class="titlu_form"> categoría: </div> 
     <div class="option_form"> 
     <select name="categorie" id="categorie" class="validate['required']">
      <option value=""> -- Elige categoría -- </option>
      <option value="1"> 1 </option>
      <option value="2"> 2 </option>
      <option value="3"> 3 </option>
     </select>
    </div>

   <div class="titlu_form"> provincia: </div> 
    <div class="option_form"> 
     <select name="provincia" class="validate['required']">
      <option value=""> -- Provincia -- </option>
      <option value="Castellon"> Castellon </option>
      <option value="Valencia"> Valencia </option>
     </select>    
    </div>`

   <div class="titlu_form"> marca: </div> 
    <div class="option_form"> 
     <select name="marca12" id="marca" class="validate['required']">
      <option value=""> -- Marca -- </option>
      <option value="jeans"> jeans </option>
      <option value="other"> other </option>
     </select>  
    </div>

   <input type="submit" name="Submit" />   
  </form> 
```

这是我用于验证的脚本

```
<script type="text/javascript" src="lightform/mootools.js"></script>
 <script type="text/javascript" src="lightform/formcheck.js"></script>
 <script type="text/javascript">
  //h
  window.addEvent('domready', function(){     
   formcheck = new FormCheck('third', {
     display : {
                 fadeDuration : 500,
                 errorsLocation : 1,
                 indicateErrors : 1,
                 showErrors : 1
             }
         })
   //$('marca').removeAttribute('class');
   formcheck.dispose($('marca'));
  });

  //and this is opcionaly for a select option 
   $('categorie').addEvent('change', function(event){
       var selection = document.getElementById('categorie').value;
       alert(selection);
       if(selection==1) { 
        alert(selection);
        formcheck.dispose($('marca'));
        $('marca').removeAttribute('class');
       }
 });

</script> 
```

导致此错误：

```
formcheck.dispose is not defined. 
```

我想在选择选项 2 或 3 时隐藏 div marca .. 那是.. 这个怎么样..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:32:38.943

好的，所以您说您在 moo 1.11 和 1.45 中尝试过

那是你的问题。它是为 1.2.x 编写的

不久前我将它移植到 1.4.x，使用下面的代码库，你的问题就会消失

[http://www.timwickstrom.com/client-side-code/mootools/moofloor-formcheck-for-mootools-1-4-x/](http://www.timwickstrom.com/client-side-code/mootools/moofloor-formcheck-for-mootools-1-4-x/)

# ajax - 使用 Ajax 将表单数据发布到 Controller 的操作

> ID：10317141
> 
> 赞同：7
> 
> 时间：2012-04-25T13:51:33.890
> 
> 标签：ajax, asp.net-mvc-3, jquery, asp.net-ajax

我在 MVC3 中有一个页面，带有一个链接（Ajax.ActionLink）。当用户单击它时，它会调用控制器的操作，并将结果插入到一个 div 中，并带有替换。

代码如下所示：

```
@Ajax.ImageActionLink("/Images/btn_share.png", "Share pool", "SharePool", new { poolKey = Model.Id, poolName = Model.Name },
    new AjaxOptions { 
        UpdateTargetId="popup", 
        HttpMethod="GET", 
        InsertionMode = InsertionMode.Replace,
        LoadingElementId="loading_dialog",
        OnSuccess = "ShowPopup('#popup_share', true, true)"
    } 
```

ImageLinkAction 是使用图像作为链接的自定义扩展方法，而 ShowPopup 是显示更新的 div 的 javascript 函数（使其看起来像弹出窗口）

现在，插入到创建弹出窗口的 div 中的标记代码包含如下表单

```
<div>
@using (Html.BeginForm()) {

    @Html.HiddenFor(model => model.ID)

    <div class="editor-label">
        @Html.LabelFor(model => model.EmailAddress)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.EmailAddress)
        @Html.ValidationMessageFor(model => model.EmailAddress)
    </div>

    // ... other fields

    @Html.ValidationSummary(true)
    <p>
        <button type ="submit">Share</button>       
    </p>
}
</div> 
```

问题在于表单的提交：提交按钮调用了正确的操作，但有一个回发，这会导致我的页面刷新。我需要的是用 ajax 发布数据，接收响应，这是另一个插入到

我试图用 Ajax.ActionLink 替换提交按钮，如下所示

```
 @Ajax.ActionLink("Share", "Share",
        new Models.MyModel 
            {
                ID = Model.ID,
                EmailAddress = Model.EmailAddress
            },
        new AjaxOptions
            {
                UpdateTargetId="popup", 
                HttpMethod="POST", 
                InsertionMode = InsertionMode.Replace,
                LoadingElementId="loading_dialog",
                OnSuccess = "ShowPopup('#popup_share', true, true)"
            } 
```

控制器的代码如下所示：

```
[HttpPost]
public ActionResult SharePool(MyModel model)
{
    // ...
    return PartialView("_MyPartialView", model)
} 
```

问题是，在呈现 Ajax ActionLink 的那一刻（加载表单时），Model.EmailAddress 中没有值，所以我在控制器中的 POST 操作只接收 ID 参数。

我该如何处理？理想情况下，我认为我应该添加

```
OnBegin = "PreparePostData()" 
```

但由于我基本上只知道 javascript，所以我不知道如何实现这一点。我认为这个 PreparePostData() 应该收集表单字段并准备对象 routeValues 参数，在调用 ajax 调用之前设置。

任何人都可以给我一些关于如何实现这一点的指示吗？

还是有其他更好的方法来解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-25T14:19:55.930

我建议只使用 jQuery 编写您自己的 AJAX 调用。无论如何，它比 MVC 的助手更灵活

```
@Html.ActionLink("Share", "Share", new { }, new { id = "share" }) 
```

然后是一个函数

```
$("#share").click(function (e) {
   e.preventDefault();
   //Show loading display here
   var form= $("#shareForm");
   $.ajax({
       url : '@Url.Action("Share")',
       data: form.serialize(),
       type: 'POST',
       success: function(data){
          //Show popup
          $("#popup").html(data);
       }
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-05T17:12:48.463

当您在同一页面上有多个表单时（想象一下您按需显示/隐藏的情况），您需要在 #Id 之前添加表单，如下所示：

```
$("#share").click(function (e) {
   e.preventDefault();
   //Show loading display here

// Need to add Form before #id 
   var form= $("Form#share");

   $.ajax({
       url : '@Url.Action("Share")',
       data: form.serialize(),
       type: 'POST',
       success: function(data){
          //Show popup
          $("#popup").html(data);
       }
   });
); 
```

# ios5 - 当 App 从后台状态返回时，tableView 不会更新它的数据源

> ID：10317143
> 
> 赞同：0
> 
> 时间：2012-04-25T13:51:43.893
> 
> 标签：ios5, uitableview

我使用 AppDelegate 的方法

```
-(BOOL)application:(UIApplication *)application 
           openURL:(NSURL *)url 
 sourceApplication:(NSString *)sourceApplication 
        annotation:(id)annotation { 
```

从邮件应用程序导入文件。此方法运行后，我的根 ViewController -`UITableViewController`出现，但`tableView`对方法没有反应`reloadData`（我检查了数据数组是否已成功更新）。

更新：所有委托都已设置，tableView 工作正常，但包含旧数据。

# c# - C# Winform在调用其他窗口时关闭打开的窗口

> ID：10317145
> 
> 赞同：0
> 
> 时间：2012-04-25T13:51:59.940
> 
> 标签：c#, wpf, winforms

调用新窗口时如何关闭打开的窗口？这意味着我当时只想要 1 个子窗口。我不允许多窗口。

```
public partial class Main_Usr : Form
    {
        public Main_Usr()
        {
            InitializeComponent();
            this.IsMdiContainer = true;

            if (Program.IsFA) barSubItem_Ordre.Visibility = DevExpress.XtraBars.BarItemVisibility.Never;

            Ordre_Liste f = new Ordre_Liste();
            f.MdiParent = this;
            f.Show();
   }

        private void barButtonItem_CreateOrdre_ItemClick(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            Program.AllerRetour = "Ordre Aller";
            Ordre_Fiche f = new Ordre_Fiche();
            f.MdiParent = this;
            f.Show();
        }

        private void barButtonItem_OrdreListe_ItemClick(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            Ordre_Liste f = new Ordre_Liste();
            f.MdiParent = this;
            f.Show();
        }

        private void barButtonItem_CreateOrdRet_ItemClick(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
        {
            Program.AllerRetour = "Ordre Retour";
            Ordre_Fiche f = new Ordre_Fiche();
            f.MdiParent = this;
            f.Show();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:56:35.810

在类级别上创建 Form 实例。然后您可以从事件或方法中访问它们。

```
 Form1 f1;
    Form2 f2;

void OpenForm1()
{
    f1 = new Form1()
    f1.Show();
}

void OpenForm2()
{
    f1.Dispose(); //or Hide if you want to show it again later
    f2 = new Form2();
    f2.Show();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:07:00.303

有不同的方法来实现伪母版页：

*   您可以创建具有所需布局的 BaseForm 表单。然后从这个 BaseForm 继承其他表单并提供自定义内容。
*   您可以创建具有所需布局的 MainForm 表单。然后将内容控件创建为 UserControls 并在面板中显示它们。
*   您可以创建具有所需布局的 MasterUserControl。然后通过从 MasterUserControl 继承来创建内容控件（它们将具有相同的布局）。然后使用您的主窗体作为浏览器来显示不同的内容控件，如页面。

例子：

1.  `Main_Usr`在表单上创建所需的布局。
2.  不要将其设置为 MdiContainer
3.  如果您想访问某些控件（例如，子窗体的页脚或页眉，请将`Modifiers`这些控件的属性设置为受保护）
4.  打开`Ordre_Liste`表单代码并将其更改为从`Main_Usr`表单继承，而不是`Form`
5.  将自定义内容添加到`Ordre_Liste`表单

瞧！你有“母版页”

更新（第三个选项）

1.  使用名称创建新的用户控件`MasterUserControl`
2.  在此控件上创建所需的布局，为自定义内容保留空间（顺便说一句，不要使用 TableLayoutPanels - 他们在设计器继承方面存在问题）。
3.  创建具有名称的新用户控件`HomeUserControl`并将其更改为从您的`MasterUserControl`.
4.  打开`HomeUserControl`设计器并添加自定义内容。您也可以修改具有`protected`修饰符的父控件。
5.  在您的主要表格位置`HomePageUserControl`

有不同的方法来实现控件（又名页面）之间的导航。最简单的方法 - 在主窗体上有菜单。其他方式 - 在主控件上定义事件“导航”，在主窗体上订阅该事件，并从“页面”中引发它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T14:02:16.447

像：

```
List<Form> openForms = new List<Form>();

foreach (Form f in Application.OpenForms)
    openForms.Add(f);

foreach (Form f in openForms)
{
    if (f.Name != "Menu")
        f.Close();
} 
```

请注意，不要直接关闭它们，因为如果您尝试在第一个 foreach 循环中关闭（或处置）它们，则会出现错误。这就是为什么您需要将它们放入列表并在那里关闭它们的原因。

# android - 如何在Android中编写后台服务？

> ID：10317148
> 
> 赞同：1
> 
> 时间：2012-04-25T13:52:10.143
> 
> 标签：android, linux

这里的“服务”不同于Android中的应用程序组件“服务”之一。我的意思是人们在启动器中看不到应用程序图标，并且在 Android 的程序管理器中看不到应用程序。最重要的是我不希望用户注意到应用程序的存在。那可能吗？它是Linux中的“服务”吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T14:01:27.090

没有ROM修改，就不能做linux服务。我会告诉你你能做什么。

一、您的要求

1.  **在启动器中看不到应用程序图标：**这可以通过简单地没有支持 ACTION.MAIN 和 CATEGORY.LAUNCHER 意图的活动来完成。
2.  **在程序管理器中看不到该应用程序：**对您来说不幸（但对所有用户来说幸运）您无法使用普通应用程序解决此问题。
3.  **让服务“一直”运行：**您可以在这里做的最好的事情是在设备启动时启动前台服务。这将导致通知出现在用户通知栏中，但这确实是您在库存手机上可以做的最好的事情。

# android - 控制相机的自动曝光

> ID：10317150
> 
> 赞同：8
> 
> 时间：2012-04-25T13:52:14.093
> 
> 标签：android, android-camera

我在 android 中编写了一个相机应用程序，并在两部 android 手机上对其进行了测试，在一部手机上，自动曝光在预览时效果很好，但在另一部手机上它根本不起作用。第一部电话仅在我调用 autoFocus() 方法时才有效。在后一部手机上，内置应用程序的自动曝光有效，但我的代码无效。有什么方法可以手动开始使用自动曝光吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-07T15:48:33.450

检查[相机](http://developer.android.com/reference/android/hardware/Camera.html)类

```
Camera.Parameters   getParameters() 
```

并在 Camera.Parameters 类中检查这两个方法

```
int getExposureCompensation() 
```

获取当前曝光补偿指数。

```
float   getExposureCompensationStep() 
```

获取曝光补偿步长。

在假设存在某些功能之前，您应该检查手机的相机功能

# javascript - 脚本 src=//example.com/file.js 有效吗？

> ID：10317151
> 
> 赞同：0
> 
> 时间：2012-04-25T13:52:20.290
> 
> 标签：javascript

这样做是否有效：

```
<script src="//example.com/file.js" /> 
```

代替

```
<script src="http://example.com/file.js" /> 
```

或者

```
<script src="https://example.com/file.js" /> 
```

第一个在 facebook 的文档中作为示例给出，我想知道它是否有效，如果有效，哪些浏览器支持它（全部，或仅最新等）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T13:53:00.803

这称为[相对协议 URL](http://paulirish.com/2010/the-protocol-relative-url/)。
它将变为 HTTP 或 HTTPS，具体取决于当前页面的协议。

它适用于所有浏览器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T13:54:27.443

是的，它是有效的，它也有效！这就是所谓**[的协议相对 URL](http://paulirish.com/2010/the-protocol-relative-url/)**，它将使用`http://`或`https://`基于当前页面协议。

# magento - 控制器未加载？

> ID：10317153
> 
> 赞同：0
> 
> 时间：2012-04-25T13:52:33.487
> 
> 标签：magento

我正在尝试编辑从此处生成的报告，`example.com/index.php/admin/sales_order/index/`. 我需要在右侧的下拉列表中添加一个新报告。

我通过 url 将此页面跟踪到它的控制器并转储了该类。 `app/code/core/Mage/Adminhtml/controllers/Sales/OrderController.php indexAction()`并得到了这个类`Ext4mage_Html2pdf_Sales_OrderController`，所以我知道它被模块覆盖了。在这种情况下，Ext4mage Html2pdf 模块。

该控制器仅使用以下方法覆盖 pdf 方法，

```
require_once BP.'/app/code/core/Mage/Adminhtml/controllers/Sales/OrderController.php';
class Ext4mage_Html2pdf_Sales_OrderController extends Mage_Adminhtml_Sales_OrderController{
//etc } 
```

所以我在本地创建了我的新模块，希望在社区中覆盖它。 `app/code/local/Daves/OrderModule/controllers/Sales/OrderController.php`并放在下面。

```
require_once 'Mage'.DS.'Adminhtml'.DS.'controllers'.DS.'Sales'.DS.'OrderController.php';
require_once BP.'/app/code/community/Ext4mage/Html2pdf/controllers/Sales/OrderController.php';

class Daves_OrderModule_Sales_OrderController extends Ext4mage_Html2pdf_Sales_OrderController{

    public function indexAction(){

        die();

        return parent::indexAction();
    }

} 
```

我预期的功能是在管理员中重新加载销售/订单页面时，我会得到一个空白页面，而我没有。这意味着我的控制器没有被加载。

我的 IDE 显示类正在扩展，并且将 a`die()`放入`indexAction()`Ext4mage_Html2pdf 控制器中的方法按预期工作。由于某种原因，它只是错过了我的控制器。

尝试使用直接在浏览器中点击控制器`example.com/admin/daves_ordermodule/sales_order/index`也会引发 404。

我应该尝试覆盖块吗？

我没有`<rewrite>`在我的配置中创建任何时髦的更新句柄，主要是因为我不确定我是否需要它们，或者它们会去哪里。我知道 Magento 从 Zend 那里获得了对 xml 的可怕使用，我将在此处粘贴我的配置。

* * *

`app/etc/modules/Daves_OrderModule.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <modules>
        <Daves_OrderModule>
            <active>true</active>
            <codePool>local</codePool>
            <depends> <!-- same as in the /app/etc/Mage_All.xml -->
                <Mage_Reports/>
                <Mage_Adminhtml/>
                <Ext4mage_Html2pdf/>
            </depends>
        </Daves_OrderModule>
    </modules>
</config> 
```

`app/code/local/Daves/OrderModule/etc/config.xml` 0.1

```
 <global>
        <blocks>
            <daves_ordermodule> <!-- this is the class group  and must be lowercase-->
                <class>Daves_OrderModule_Block</class> <!-- this is how you access it -->
            </daves_ordermodule>
        </blocks>
        <helpers>
            <daves_ordermodule>
                <class>Daves_OrderModule_Helper</class> <!-- Mage::helper('squaresphere_module/<helper>'); -->
            </daves_ordermodule>
        </helpers>
        <models>
            <daves_ordermodule>
                <class>Daves_OrderModule_Model</class> <!-- Mage::getModel('squaresphere_module/<model>'); -->
            </daves_ordermodule>
        </models>

    </global>

    <!-- How to get to the module from the browser -->
    <admin>
        <routers>
            <daves_ordermodule> <!-- My unique class group -->
                <use>admin</use> <!-- which router class? -->
                <args>
                    <module>Daves_OrderModule</module> <!-- assumes /controllers -->
                    <frontName>daves_ordermodule</frontName> <!-- what is on the url -->
                </args>
            </daves_ordermodule>
        </routers>
    </admin>

</config> 
```

* * *

`app/code/community/Ext4mage/Html2pdf/etc/config.xml`具体节点

```
<admin>
    <routers>
        <html2pdf>
            <use>admin</use>
            <args>
                <module>Ext4mage_Html2pdf</module>
                <frontName>html2pdf</frontName>
            </args>
        </html2pdf>
        <emailattachments>
            <args>
                <modules>
                    <Ext4mage_Html2pdf before="Fooman_EmailAttachments">Ext4mage_Html2pdf</Ext4mage_Html2pdf>
                </modules>
            </args>
        </emailattachments>
        <adminhtml>
            <args>
                <modules>
                    <Ext4mage_Html2pdf before="Mage_Adminhtml">Ext4mage_Html2pdf</Ext4mage_Html2pdf>
                </modules>
            </args>
        </adminhtml>
    </routers>
</admin> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T16:48:57.693

假设您没有前端控制器，请按如下方式调整配置：

```
<!-- How to get to the module from the browser -->
<admin>
    <routers>
        <adminhtml> <!-- My unique class group -->
            <args>
                <modules>
                    <Daves_Om before="Ext4mage_Html2pdf">Daves_OrderModule</Daves_Om>
                </modules>
            </args>
        </adminhtml>
    </routers>
</admin> 
```

这样做是在 Mage_Adminhtml 模块的名称下添加另一个控制器目录。from 的值`<Daves_Om>`本质上映射到文本节点 +“控制器”，所以`app/code/(configured codepool)/Daves/OrderModule/controllers/`- 然后应用典型的路由匹配。

# html - 有没有办法让复选框 html 控件显示更大，也许是 CSS？

> ID：10317155
> 
> 赞同：2
> 
> 时间：2012-04-25T13:51:33.403
> 
> 标签：html, css

> **可能重复：**
> [复选框大小](https://stackoverflow.com/questions/306924/checkbox-size)

我正在尝试使某些复选框在大多数现代浏览器（FF10、Chrome、IE9+）中显示得更大

我尝试设置宽度/高度，但这仅适用于 FF，不适用于 Chrome 或 IE。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T14:14:26.440

您可以将`transform`样式与`scale`函数一起使用。见[http://jsfiddle.net/kwEK6/](http://jsfiddle.net/kwEK6/)

这适用于许多浏览器，但当然，并非所有...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:48:10.740

或者您可以尝试：

```
height: 30px; 
line-height: 30px; //line-height is same with height make your text is middle.
font-size: 13px; // It's up to you
padding: 10px; // It's up to you 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T19:41:22.533

你可以这样做：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
  <style> 
    .ccs3fl input[type='checkbox'],.ccs3fl input[type='radio'] 
     { 
                filter: alpha(opacity=0); 
                -moz-opacity: 0; 
                -webkit-opacity: 0; 
                opacity: 0; 
                position:absolute; 
                cursor: hand; 
                cursor: pointer; 
     } 
    .ccs3fl input[type='checkbox']+::after,.ccs3fl input[type='radio']+::after 
     { 
                font-wight:bold; 
                border: solid 1px #D9D9D9; 
                border-radius: 3px; 
                vertical-align: middle; 
                content:'\2714'; 
                color:#FFFFFF; 
                background:#FFFFFF; 
     } 
    .ccs3fl input[type='checkbox']:checked+::after ,.ccs3fl input[type='radio']:checked+::after {color:#6599FF;} 
    .ccs3fl input[type='radio']+::after {content:'\25CF';padding:0 3px;} 
    </style></head><body> 

    <form class='ccs3fl'> 
    <input type=checkbox><b></b> My Custom Checkbox
    </form></body></html> 
```

注意：

```
<b></b> 
```

在复选框的末尾 - 应该在每个单选框/复选框之后放置一个空元素，以使其正常工作

# android - Android 不支持 Oracle、MS SQL Server、MySQL Server 的数据库驱动程序

> ID：10317163
> 
> 赞同：0
> 
> 时间：2012-04-25T13:53:06.057
> 
> 标签：android, database

我想从 android 客户端连接到 MySQL 服务器数据库。我读到在它们之间使用 Web 服务是最好的方法之一。

我还读到不可能（或者应该真的很难）从 Android 直接连接到数据库（MySql 服务器、MS SQL 服务器和 Oracle），因为 android 不支持数据库驱动程序。这样对吗？

我很感激任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:57:27.323

我认为您最接近“官方”的东西是这些数据库未列在[此处](http://developer.android.com/guide/topics/data/data-storage.html)官方列表中的数据存储选项下。

当然，没有什么能阻止以后对这些数据库的支持。您甚至可以在非官方来源找到库来执行此操作。

## 编辑

如果您愿意，您可以研究使用 JDBC 连接到这些数据库。这是一个关于此的问题。[Android中的JDBC连接](https://stackoverflow.com/questions/4447692/jdbc-connection-in-android)

# php - 在 preg_replace 中的正则表达式中转义 url

> ID：10317164
> 
> 赞同：0
> 
> 时间：2012-04-25T13:53:06.120
> 
> 标签：php, regex, preg-replace, urlencode

我正在尝试将一些标签重定向到另一个页面，将其 href 作为 url 参数传递。我正在使用的代码是这样的：

```
preg_replace(
    "/<a(\s[^>]*)href=[\"\']??([^\" >]*?)[\"\']??([^>]*)>(.*)<\/a>/siU", 
    "<a$1href=\"".WWW."go.php?to=".urlencode("$2")."\"$3>$4</a>", $text
); 
```

它是[此处](http://www.the-art-of-web.com/php/parse-links/)找到的正则表达式的修改版本。我在此块中使用此代码：

```
$text = "<...some other tags...><a target=\"_blank\" href=\"http://www.google.com\" style=\"...\" class=\"...\">Google</a></...some other tags...>"; 
```

它正确地被捕获，但是在使用时`urlencode("$2")`，它收到一个`"$2"`字符串，而不是存储在 preg 变量中的值（就像我一样）。它不仅限于 urlencode，还可以将其作为参数传递给任何其他函数。所以我不仅想对此进行编码（我总是可以多扩展一点正则表达式以接受 url），而且通常在方法中使用变量。

你知道任何解决方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T14:04:48.100

这是完全正常的，因为您的 url 编码字符串“$2”，然后使用 urlencoded 字符串进行替换，因此您最终得到与写入相同的内容

```
"<a$1href=\"".WWW."go.php?to=$2\"$3>$4</a>" 
```

作为第二个参数。如果要评估 urlencode，则必须使用 e（用于 eval）标志，如下所示：

```
preg_replace(
    "/<a(\s[^>]*)href=[\"\']??([^\" >]*?)[\"\']??([^>]*)>(.*)<\/a>/seiU", 
    "'<a$1href=\"'.WWW.'go.php?to=\"'.urlencode('$2').'\"$3>$4</a>'", $text
); 
```

另一个更好的解决方案可能是使用 preg_replace_callback 来避免依赖评估未知字符串

# c# - 访问 Active Directory 所需的权限？

> ID：10317166
> 
> 赞同：4
> 
> 时间：2012-04-25T13:53:21.710
> 
> 标签：c#, asp.net, active-directory

**你好，**

我在运行此代码的 IIS 中有一个托管服务：

```
DirectoryEntry objADAM = default(DirectoryEntry);
            // Binding object. 
            DirectoryEntry objGroupEntry = default(DirectoryEntry);
            // Group Results. 
            DirectorySearcher objSearchADAM = default(DirectorySearcher);
            // Search object. 
            SearchResultCollection objSearchResults = default(SearchResultCollection);
            // Binding path. 
            ActiveDirectory result = new ActiveDirectory();
            ActiveDirectoryItem treeNode;

            // Get the AD LDS object. 
            try
            {
                if (pathToAD.Length > 0)
                    objADAM = new DirectoryEntry(pathToAD);
                else
                    objADAM = new DirectoryEntry();
                objADAM.RefreshCache();
            }
            catch (Exception e)
            {
                throw e;
            }

            // Get search object, specify filter and scope, 
            // perform search. 
            try
            {
                objSearchADAM = new DirectorySearcher(objADAM);
                objSearchADAM.Filter = "(&(objectClass=group))";
                objSearchADAM.SearchScope = SearchScope.Subtree;
                objSearchResults = objSearchADAM.FindAll();
            }
            catch (Exception e)
            {
                throw e;
            }

            // Enumerate groups 
            try
            {
                if (objSearchResults.Count != 0)
                {
                    //SearchResult objResult = default(SearchResult);
                    foreach (SearchResult objResult in objSearchResults)
                    {
                        objGroupEntry = objResult.GetDirectoryEntry();
                        result.ActiveDirectoryTree.Add(new ActiveDirectoryItem() { Id = objGroupEntry.Guid, ParentId = objGroupEntry.Parent.Guid, AccountName = objGroupEntry.Name, Type = ActiveDirectoryType.Group, PickableNode = false });

                        foreach (object child in objGroupEntry.Properties["member"])
                        {
                            treeNode = new ActiveDirectoryItem();
                            var path = "LDAP://" + child.ToString().Replace("/", "\\/");
                            using (var memberEntry = new DirectoryEntry(path))
                            {

                                if (memberEntry.SchemaEntry.Name.CompareTo("group") != 0 && memberEntry.Properties.Contains("sAMAccountName") && memberEntry.Properties.Contains("objectSid"))
                                {
                                    treeNode.Id = Guid.NewGuid();
                                    treeNode.ParentId = objGroupEntry.Guid;
                                    treeNode.AccountName = memberEntry.Properties["sAMAccountName"][0].ToString();
                                    treeNode.Type = ActiveDirectoryType.User;
                                    treeNode.PickableNode = true;
                                    treeNode.FullName = memberEntry.Properties["Name"][0].ToString();

                                    byte[] sidBytes = (byte[])memberEntry.Properties["objectSid"][0];
                                    treeNode.ObjectSid = new System.Security.Principal.SecurityIdentifier(sidBytes, 0).ToString();

                                    result.ActiveDirectoryTree.Add(treeNode);
                                }
                            }
                        }
                    }
                }
                else
                {
                    throw new Exception("No groups found");
                }
            }
            catch (Exception e)
            {
                throw new Exception(e.Message);
            }

            return result; 
```

这在我的开发环境中运行良好，但在客户中我们得到了这个异常：

**指定的目录服务属性或值不存在**

我想这可能与 Active Directory 的权限有关？

**什么帐户需要 ActiveDirectory 以及需要什么级别的权限？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T06:54:51.277

运行线程的帐户需要对 AD 具有读取权限。所有域帐户都具有此权限。

长话短说，验证 的值`HttpContext.Current.User.Identity.Name`是域帐户。

如果 Web 应用程序配置为具有匿名访问权限，那么很可能不会。

# image - setContentMode：对于 HJManagedImageV 不适用于 iOS

> ID：10317169
> 
> 赞同：2
> 
> 时间：2012-04-25T13:53:35.967
> 
> 标签：image, asynchronous, loading, ios-4.2

我正在使用第三方库**HJCacheClasses**来异步加载图像。这是相同的代码。这非常简单：

```
NSMutableString *url = @"my url";
    HJManagedImageV *asyncImageView = [[HJManagedImageV alloc] initWithFrame:frame];
    [asyncImageView setBackgroundColor:[UIColor grayColor]];
    [asyncImageView showLoadingWheel];
    [asyncImageView setContentMode:UIViewContentModeScaleAspectFill];
    [asyncImageView.imageView setContentMode:UIViewContentModeScaleAspectFill];
    asyncImageView.url = [NSURL URLWithString:url];

    [self.imageManager manage:asyncImageView];
    [the_pScrollView addSubview:asyncImageView]; 
```

一切正常，除了图像居中并且它没有根据视图的大小（全屏大小）进行拉伸/拟合。我知道图像很小，但我需要使其适合视图以填充视图。但 setContentMode 都没有工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T14:08:06.453

如果您查看 HJManagedImageV 类的源代码，您会注意到作者将 HJManagedImageV 实例的 imageView 硬编码为始终适合宽高比。因此，默认情况下，您将永远无法使方面填充内容模式正常工作。

不过，有一种简单的方法可以实现这一点，在您设置托管图像视图的 url 属性后，还可以向您自己的类添加一个回调，如下所示：

```
myImageView.callbackOnSetImage = (id)self; 
```

并在回调函数中为 imageView 设置所需的 contentMode，就像这样。这是经过测试的，对我有用。祝你好运

```
-(void) managedImageSet:(HJManagedImageV*)mi
{
    mi.imageView.contentMode = UIViewContentModeScaleAspectFill;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T08:16:36.960

我自己找到了答案，我觉得它更简单明了。正如 Ican 所提到的，在 HJManagedImageV 类的源代码中，作者将 HJManagedImageV 实例的 imageView 硬编码为始终适合纵横比。所以我只是评论了该代码......对于喜欢做同样事情的人，请按照以下步骤操作

1.  转到 HJManagedImageV.m 文件
2.  搜索名为的方法

    ```
    -(void) setImage:(UIImage*)theImage 
    ```

3.  评论该行

    ```
    imageView.contentMode = ... 
    ```

    或为 imageView 设置您想要的内容模式。注意：这将为使用此类的所有图像视图设置内容模式。所以我更喜欢第一个选项。

4.  在您使用此类的代码中，设置 HJManagedImageV 的内容模式。

# c# - 如何使用 c# 连接到 Asana Rest API？

> ID：10317171
> 
> 赞同：2
> 
> 时间：2012-04-25T13:53:48.700
> 
> 标签：c#, .net, asana

有没有人有一段代码用于使用 c# 连接到 Asana API？

他们的网站上有一个 Hello World 应用程序，但不幸的是它是用 ruby​​ 编写的。

[https://asana.com/developers/documentation/examples-tutorials/hello-world](https://asana.com/developers/documentation/examples-tutorials/hello-world)

我将其作为一个快速的副项目来做，只能投入少量时间。任何帮助将不胜感激。

提前致谢！

* * *

跟进：

我尝试了多种访问/身份验证的方法，但我不断收到 401 Not Authorized 错误。

我的最新代码如下所示：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("https://app.asana.com/api/1.0/users/me");
request.Method = "GET";
request.Headers.Add("Authorization: Basic " + "*MyUniqueAPIKey*");

request.ContentType = "application/x-www-form-urlencoded";
request.Accept = "application/json";

WebResponse ws = request.GetResponse(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T18:13:04.043

试试这个代码。我能够得到一个用户列表：

```
const string apiKey = "whateverYourApiKeyIs";

public string GetUsers()
{
    var req = WebRequest.Create("https://app.asana.com/api/1.0/users");
    SetBasicAuthentication(req);
    return new StreamReader(req.GetResponse().GetResponseStream()).ReadToEnd();
}

void SetBasicAuthentication(WebRequest req)
{
    var authInfo = apiKey + ":";
    var encodedAuthInfo = Convert.ToBase64String(
        Encoding.Default.GetBytes(authInfo));
    req.Headers.Add("Authorization", "Basic " + encodedAuthInfo);
} 
```

这只是将数据作为字符串返回。解析 JSON 留给读者作为练习。;)

我从这里借用了`SetBasicAuthentication`方法：

[强制 HttpWebRequest 的基本 http 身份验证（在 .NET/C# 中）](http://blog.kowalczyk.info/article/Forcing-basic-http-authentication-for-HttpWebReq.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T20:40:29.983

您可以尝试使用我的图书馆 AsanaNet :)

[https://github.com/acron0/AsanaNet](https://github.com/acron0/AsanaNet)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T14:33:21.663

你需要做 HTTP 请求，有很多这样的教程 [http://msdn.microsoft.com/en-us/library/debx8sh9(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/debx8sh9(v=vs.80).aspx)

# openam - OpenAM：RESTFUL API - 加密/编码密码

> ID：10317180
> 
> 赞同：0
> 
> 时间：2012-04-25T13:54:03.683
> 
> 标签：openam

我们正在使用 Open AM Restful API 来执行身份验证。我们的 restful 调用格式如下：

[http://OpenAM_Host:Port/deploy_uri/identity/authenticate?username=scott&password=tiger](http://OpenAM_Host:Port/deploy_uri/identity/authenticate?username=scott&password=tiger)

我们如何以加密/编码格式发送密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:04:54.860

目前这不可能开箱即用，您需要实现自己的 DataStore（如果您使用 DataStore auth 模块）或身份验证模块，它将对提供的密码使用对称解密。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-29T17:09:00.283

您还可以在链上启用 HTTPBasic Auth 模块并发送 base64 编码的用户名/值对。未加密，但至少已编码（以及特殊字符支持）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T12:09:46.877

根据我的发现，OpenAM 并没有提供这种开箱即用的支持。根据 OpenAM 邮件列表中的信息，有两种选择：

选项 1\. SSL 和 POST 最常见的解决方案是使用 SSL 进行加密。

选项 2\. 自定义登录模块 如果您需要使用给定的算法加密您的密码，那么您将需要创建一个自定义登录模块。您将在进行 restful 调用之前加密密码，然后使用解密密码登录模块。在这种情况下，您不需要 SSL。

# ruby-on-rails - 参数数量错误（0 代表 4）我哪里出错了？

> ID：10317182
> 
> 赞同：0
> 
> 时间：2012-04-25T13:54:07.710
> 
> 标签：ruby-on-rails

我想列出一个表，其中包含从数据库到表的过滤参数。我为它们分配默认参数，但出现错误：参数数量错误（0 代表 4）

在我的模型中：

```
class Company < ActiveRecord::Base

scope :filtered, lambda {|count_min, count_max, city, company_status| where(:company_status => company_status, :ap_veh_count => count_min..count_max, :office_adress_city => city, )} 
```

在控制器中：

```
class LeadsController < ApplicationController

before_filter :confirm_logged_in

def list
        params[:sort] ||= "name"
        params[:direction] ||= "asc"
        params[:company_status] ||= "3" 
        params[:count_min] ||= "8"
        params[:count_max] ||= "20"
        params[:city] ||= "Rīga"
        @companies = Company.filtered.order(params[:sort] + " " + params[:direction])
end 
```

鉴于：

```
<% @companies.each_with_index do |company, i| %>
<tr>
    <td><%= i + 1 %></td>
    <td><%= company.ap_veh_count  %></td>
    <td><%= link_to company.name, {:action => 'view', :id => company.id} %></td>
    <td><%= company.office_adress_city %></td>
    <td><%= company.phone %></td>
    <td><%= company.company_field %></td>
    <td><%= company.email %></td>
    <td><%= 'taisīt' %></td>
    <td><%= link_to "Atlasīt", {}, :class => 'btn btn-success btn-mini' %></td>

</tr>
<% end %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T13:56:22.973

好吧，您必须将参数传递给您的过滤器方法

```
@companies = Company.filtered(params[:count_min], params[:count_max], etc.).order... 
```

您可能希望将您的范围定义为：

```
scope :filtered, lambda { |*args|
  count_min = args.shift || 8
  count_max = args.shift || 20
  city = args.shift || "Rīga"
  company_status = args.shift || 3

  where(
    :count_min = count_min,
    :count_max = count_max,
    :city = city,
    :company_status => company_status
  )
} 
```

为了为您的值设置默认值。但是您仍然必须传递参数（即使它们返回 nil），以便在它们为一组的情况下，它们将覆盖默认值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T13:55:52.337

```
@companies = Company.filtered( !!! ) 
```

你应该通过那里`count_min, count_max, city, company_status`

# php - createAbsoluteUrl 生成类似路径的URL，如何避免呢？

> ID：10317188
> 
> 赞同：4
> 
> 时间：2012-04-25T13:54:17.727
> 
> 标签：php, url, yii

我创建一个这样的 URL：

```
$app->createAbsoluteUrl('/', array(
     'param1' => 'val1',
     'param2' => 'var2',
); 
```

生成的网址是：

```
http://mysite.com/param1/var1/param2/var2 
```

但我期望这样的网址：

```
http://mysite.com/?param1=var1&param2=var2 
```

在功能[手册](http://www.yiiframework.com/doc/api/1.1/CController#createAbsoluteUrl-detail)中它说：

> $params 数组附加 GET 参数（名称=>值）。名称和值都将是 URL 编码的。

但它似乎不像那样工作。如何生成预期的 URL？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T15:34:13.973

您需要指定[`urlManager`](http://www.yiiframework.com/doc/api/1.1/CUrlManager)应用程序组件应该对其生成的 URL 使用“get”格式；默认是使用“路径”格式。Yii 指南[解释了](http://www.yiiframework.com/doc/guide/1.1/en/topics.url#creating-urls)如何在您的应用程序配置中执行此操作：

```
array(
    ......
    'components'=>array(
        ......
        'urlManager'=>array(
            'urlFormat'=>'get',
        ),
    ),
); 
```

**更新：**所以你`urlFormat`是“路径”，这是设计使然......替代方案呢？

如果您不介意扩展`CWebApplication`和使用您自己的派生类，那么您有几个选择，例如：

1.  `createUrlEx`在原来的基础上定义自己的方法`createUrl`。它可能看起来像这样：

    ```
    public function createUrlEx($format,$route,$params=array(),$ampersand='&')
    {
        $oldFormat = $this->getUrlManager()->getUrlFormat();
        $this->getUrlManager()->setUrlFormat($format);
        $url = $this->getUrlManager()->createUrl($route,$params,$ampersand);
        $this->getUrlManager()->setUrlFormat($oldFormat);
        return $url;
    } 
    ```

2.  覆盖[`registerCoreComponents`](http://www.yiiframework.com/doc/api/1.1/CWebApplication#registerCoreComponents-detail)，以便您可以拥有第二个 url 管理器：

    ```
    protected function registerCoreComponents()
    {
        parent::registerCoreComponents();

        $components=array(
            'specialUrlManager'=>array(
                'class'=>'CUrlManager',
                'urlFormat'=>'get',
            ),
        );

        $this->setComponents($components);
    } 
    ```

    您现在可以`Yii::app()->specialUrlManager->createUrl(...)`随时拨打电话。

您还可以通过其他方式解决问题：

1.  扩展`CUrlManager`和公开一种方法，允许您选择 url 的风格以在现场创建。

2.  如果你只需要在一两个地方“获取”url，你总是可以创建一个新`CUrlManager`对象，当场配置它，调用`createUrl`然后丢弃它。您还可以将这种丑陋隐藏在免费功能后面。本质上，这种（*当然不推荐*）方法是第一个解决方法的低技术版本，因为它具有不需要扩展的优点`CWebApplication`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T18:13:50.857

您应该能够使用类似的东西`Yii::app()->urlManager->createPathInfo`这将生成查询字符串为 ...&var=val&... 使用自定义`&`并且`=`如果您愿意。您可以使用它来按需创建 URL 的查询字符串版本：

```
$url = $this->createAbsoluteUrl('/').'index.php?'.Yii::app()->urlManager->createPathInfo($arrayOfStuff); 
```

或者你甚至可以这样做：

```
Yii::app()->urlManager->urlFormat = 'get';
$this->createAbsoluteUrl('My/Path');
Yii::app()->urlManager->urlFormat = 'path'; 
```

虽然我没有也不想测试第二种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T15:10:49.847

URL 路由的格式应为“ControllerID/ActionID”。[手动的](http://www.yiiframework.com/doc/api/1.1/CApplication#createAbsoluteUrl-detail)

您的手动链接适用于 CController，不适用于 CApplication。

# jquery - 设置超时按钮闪烁

> ID：10317189
> 
> 赞同：0
> 
> 时间：2012-04-25T13:54:18.067
> 
> 标签：jquery

在 jquery 中，我有一个具有淡入淡出效果的按钮：

```
function blinky() {
    $('#ButtonContent_btnSubmit').delay(100).fadeTo(100, 0.5).delay(100).fadeTo(100, 1, blinky);    
} 
```

这会产生很好的闪烁效果，但我只希望闪烁效果持续 10 秒。

我希望它只闪烁 10 秒...我可以申请`setTimeout()`吗？我尝试像这样应用 setTimeout：

```
function blinky() {
    setTimeout($('#ButtonContent_btnSubmit').delay(100).fadeTo(100, 0.5).delay(100).fadeTo(100, 1, blinky), 100);  
} 
```

但这似乎不起作用。

# 编辑

我是一个 jquery 菜鸟，所以我试图让它工作......让我们说我的文件准备好了：

```
$(document).ready(function () {
 if ($('#StatusContent_ddlStatus').val() == "Not Submitted" && $("#LineItemContent_gvLineItems tr").length > 0) {
              blink();
        }
});

var count = 0;

function blink() {
    if (++count < 10)
        $('#ButtonContent_btnSubmit').delay(100).fadeTo(100, 0.5).delay(100).fadeTo(100, 1, blink);
}​ 
```

在开发人员工具（chrome）中，它会引发某种异常......

## 编辑 2

如果我把它全部放在准备好的文件中：

```
 $(document).ready(function () {
     if ($('#StatusContent_ddlStatus').val() == "Not Submitted" && $("#LineItemContent_gvLineItems tr").length > 0) {
                  blink();
            }

 var count = 0;

    function blink() {
        if (++count < 10)
            $('#ButtonContent_btnSubmit').delay(100).fadeTo(100, 0.5).delay(100).fadeTo(100, 1, blink);
    }​

    }); 
```

然后在开发人员工具中显示未捕获的语法错误：意外令牌非法。

# 编辑 3

在调用它之前，我尝试将它放在顶部：

```
$(document).ready(function () {
        var count = 0; 
        var f = 0;

         function blink() { 
            if (++count < 10) 
                $('#ButtonContent_btnSubmit').delay(100).fadeTo(100, 0.5).delay(100).fadeTo(100, 1,        blink); 
            }

          if ($('#StatusContent_ddlStatus').val() == "Not Submitted" && $("#LineItemContent_gvLineItems tr").length > 0) {
            blink();
        }
}); 
```

同样的问题...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:58:15.360

它可以**简单很多**，只需保存对`blink`函数的调用次数：

```
var count = 0;

function blinky() {
    if (++count < 10)
        $('#ButtonContent_btnSubmit').delay(100).fadeTo(100, 0.5).delay(100).fadeTo(100, 1, blinky);
}​ 
```

或有时间限制：

```
var startDate = new Date().getTime();
function blinky() {
    if (new Date().getTime() - startDate < 10000)
        $('#ButtonContent_btnSubmit').delay(100).fadeTo(100, 0.5).delay(100).fadeTo(100, 1, blinky);
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T13:59:40.427

尝试标记时间并对其进行检查，例如：

```
var markTime = new Date().getTime();

function blinky() {
  $('#ButtonContent_btnSubmit').delay(100).fadeTo(100, 0.5).delay(100).fadeTo(100, 1, function() {
    if(new Date().getTime() < (markTime + 10000)) blinky();
  });    
}

blinky(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T14:09:49.217

这应该工作->

```
var stopT=false; 
```

var timerHdl=null; $(document).ready(function () { setTimeout(function(){stopT=true;}, 10000); blink();

}); 函数闪烁（）{
if（stopT===true）{clearTimeout（timerHdl）；return;} timerHdl = setTimeout(function(){$('#ButtonContent_btnSubmit').delay(100).fadeTo(100, 0.5).delay(100).fadeTo(100, 1, blink)}, 100); }

​</p>

# javascript - 让 Google Analytics 查看测试服务器

> ID：10317190
> 
> 赞同：2
> 
> 时间：2012-04-25T13:54:22.317
> 
> 标签：javascript, tomcat, google-analytics

我有一个涉及 Google Analytics 和 Tomcat 的概念上简单的问题，但我无法解决它。

我们为我们的生产机器设置了 Google Analytics，它运行良好。我想建立一个谷歌分析帐户来监控我们的测试系统，这样我就可以在不影响/污染我们的生产数据的情况下测试各种功能。我设置了一个测试系统和一个测试 Google Analytics 帐户。但是，测试 Google Analytics 帐户永远不会从测试系统接收数据。

根据我的调查，问题似乎在于我的测试系统被称为“localhost”而不是“test.mycompany.com”，因此 Javascript 使用的 document.domain 属性是“localhost”而不是“test” .mycompany.com”应该是的 URL。这导致 Google Analytics cookie 写入不正确（我认为），因此 Google Analytics Javascript 代码永远不会向我的 Google Analytics 帐户发送数据。

有没有办法在 Tomcat 6 中设置这个“document.domain”属性，以便这个系统认为它是“test.mycompany.com”而不是“localhost”？

我已经检查了 Tomcat 文档和 Google Analytics 文档，但它们都没有直接解决这一点。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:21:10.977

在测试服务器上打开你的防火墙，以便谷歌可以访问它并使用在代码片段中添加它

```
_gaq.push(['_setDomainName', 'none']); //has to be place before _trackPageview 
```

还为 ga 打开防火墙

```
https://ssl.google-analytics.com/__utm.gif
http://www.google-analytics.com/__utm.gif 
```

和

```
http://www.google-analytics.com/ga.js 
```

因此，端口 80 用于 HTTP，端口 443 用于 HTTPS 和站点：

```
ssl.google-analytics.com
www.google-analytics.com 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T16:16:35.193

请参阅[stackoverflow.com/questions/9738815/google-analytics-gif-request-not-sent/9741228](https://stackoverflow.com/questions/9738815/google-analytics-gif-request-not-sent/9741228)

Google Analytics 不会发送 localhost 的跟踪 GIF，除非

```
_gaq.push(['_setDomainName', 'none']); 
```

在之前添加`_trackPageview`

# c++ - DirectX 9、10、11 学习的代码差异

> ID：10317191
> 
> 赞同：1
> 
> 时间：2012-04-25T13:54:23.310
> 
> 标签：c++, graphics, directx

我想开始学习 DirectX，而且我对 C++ 的掌握非常好

不管怎样，我在网上搜索过，我看到人们建议我从 dx9 开始，然后再向上移动到其他 DX

现在我的问题是

如果我学习 dx9 并完全掌握它，然后继续学习 Dx10，然后再学习 Dx11 这​​会导致我在学习新的 DirectX 时因为类似的代码而在编程时感到困惑，或者它会帮助我理解语言吗？更好地使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:59:55.307

老实说，学习 DX10 并没有什么意义。如果你不需要硬件兼容性，直接去DX11。如果你这样做，那么坚持使用DX9。图形编程的难点与 API 几乎没有关系——大部分是可编程着色器和与您正在使用的 API 没有紧密联系的技术。

# magento - Magento 样式错误？

> ID：10317192
> 
> 赞同：0
> 
> 时间：2012-04-25T13:54:23.920
> 
> 标签：magento, styles, categories

我现在已经安装了 Magento 好几次，每次安装它并在其中放入一些（子）类别，它都可以正常工作！在我在前端检查后，一切似乎都很好。在此之后，我回到后端，当我想编辑类别时，我得到了这个：

![Magento 类别样式错误](../Images/e16b0748e16c386dde4563c9fd24b475.png)

因此我再次安装了 Magento 1.6.2。我得到了同样的结果。我在互联网上找到了一个修复程序，但它不起作用。我无法查看或编辑任何内容。所以我决定安装一个更新版本的 1.7.0 RC1。你猜怎么着？我又遇到了同样的问题:(

所有其他页面都可以正常工作，但是为什么类别页面的样式消失了？:S 有人对此错误有答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T22:57:19.630

检查`media and var`您的 magento 根文件夹中文件夹的权限。

# asp.net - 限制 DataList 呈现的行

> ID：10317204
> 
> 赞同：0
> 
> 时间：2012-04-25T13:54:53.157
> 
> 标签：asp.net, datalist

我在 ASPX 页面中使用 DataList，DataSource 是一个包含未知行数的 DataTable。我想在一个页面上一次显示 9 行。

如何告诉 DataList 取前 1 到 9 行或 19-27 行等，我们可以为 DataList 配置页码和页面大小吗？

# objective-c - 如何在目标 C 中调用 RefreshTableView 函数？

> ID：10317207
> 
> 赞同：0
> 
> 时间：2012-04-25T13:54:57.820
> 
> 标签：objective-c, ios, uitableview, reloaddata

我写了一个 Refresh 函数来用 UITableview 的参数重新加载 iPhone 应用程序中的 tableview。我的问题是如何调用或调用此刷新功能？

```
- (void)RefreshTableView:(UITableView *)tableView 
{
    if(tableView != nil){
       [tableView reloadData]; 
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:08:47.323

首先重命名您的方法，如下所示：

```
- (void)refreshTableView:(UITableView *)tableView 
```

然后，要调用该方法，您需要执行以下操作：

```
[self refreshTableView:yourTableview]; 
```

where`self`代表将接收消息的对象。在这种情况下`self`，是包含该方法的对象的一个​​实例。

现在，为什么还需要传递表格视图的实例？

如果您有该表视图的实例变量并且您已经合成了它（`@property/@synthesize`模式），您可以简单地执行以下操作：

```
- (void)refreshTableView
{
    [[self myTable] reloadData];
} 
```

然后调用该方法，如下所示：

```
[self refreshTableView]; 
```

**编辑**

正如**danh所**建议的，如果你有一个属性（或一个实例变量），你也可以直接调用

```
[[self myTable] reloadData]; // or [self.myTable reloadData]; 
```

不经过`refreshTableView`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:00:40.407

如果`- (void)RefreshTableView:(UITableView *)tableView`在同一个文件中，那么您可以调用它

`[self RefreshTableView:aTableView];`当你想打电话时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T14:01:28.510

从班级本身`[self RefreshTableView:yourTableView];`

课外形式`[yourClassInstance RefreshTableView:yourTableView];`

PS：您应该重构代码并重命名`RefreshTableView:`为`refreshTableView:`

# dojo - dojox.Standby 在调用 .hide() 之前不显示

> ID：10317209
> 
> 赞同：0
> 
> 时间：2012-04-25T13:55:12.013
> 
> 标签：dojo, standby

我正在尝试使用 dojox.widget.Standby。我希望在执行其他一些代码时显示备用，然后在完成后隐藏。然而，我的待机似乎只在我调用standby.hide() 时显示。下面的代码：

```
 standby = new dojox.widget.Standby({
    target : "map-id"
});

        <div id="map-id" class="centerPanel"
        data-dojo-type="dijit.layout.ContentPane"
        data-dojo-props="region: 'center', style: 'width: 1300px;'">
        <span id="toolbar"></span>
        <div id="co-ords" style="position:absolute; bottom:0px; z-index:1000; font-size:8; font-weight:bold; background-color: #FFFFFF"></div>
    </div> 
```

有谁知道发生了什么？我也在努力使用 dojo.connect 来捕捉 onShow 事件......

```
 dojo.connect(standby, "onShow", function(){
    console.log("standby onShow");
}) 
```

谢谢！

更新 - 调用 standby.hide() 在 FireFox 中显示我的小部件，但在 Chrome 中不显示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T12:49:02.850

包含在显示和隐藏调用之间的代码是否恰好是同步的 xhrget/xhrpost ajax 调用？当 sync=true 时，所有浏览器操作完全停止，因此待机动画只会在 ajax 调用完成后快速显示和隐藏，同时您正在调用 .hide()。如果是这样，并且您有多个调用需要同步执行，那么您可以将它们设为异步并将它们链接到它们的响应函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:02:14.283

我发现在创建备用小部件时总是需要添加以下行：

```
dojo.body().appendChild(standby.domNode); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-27T01:18:36.627

如果您确实需要同步呼叫，而不是使用待机，您可以尝试这样做......

```
dojo.byId('loading_status').innerHTML='Loading 0%...';
sync_ajax_call_1();
dojo.byId('loading_status').innerHTML='Loading 25%...';
sync_ajax_call_2();
dojo.byId('loading_status').innerHTML='Loading 50%...';
sync_ajax_call_3();
dojo.byId('loading_status').innerHTML='Loading 75%...';
sync_ajax_call_4();
dojo.byId('loading_status').innerHTML='Loading 100%...'; 
```

dojo.byId 也可以替换为 dom.byId 或 $（在 jquery 中）或 getElementById

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-11T09:12:32.263

还要确保在待机启动时 map-id 元素的高度也大于零。正常工作的待机很常见，但它位于没有高度或没有宽度或两者都没有的元素内，所以最终什么都没有出现。

# sql-server - 来自 CSV 的 BULK INSERT 不读取最后一行

> ID：10317210
> 
> 赞同：1
> 
> 时间：2012-04-25T13:55:14.997
> 
> 标签：sql-server, sql-server-2008, tsql, csv, bulkinsert

我有以下 T-SQL 语句：

```
BULK INSERT #TempTable
FROM "C:\csvfile.csv"
WITH ( FIELDTERMINATOR = ',', ROWTERMINATOR ='\n', FIRSTROW = 2, KEEPIDENTITY ) 
```

我正在测试在 3 行 csv 文件上运行它，其中第一行包含标题。所以有2个数据行。

但是，它只读取第 2 行，从不读取第 3 行。

知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:58:30.503

最后一行之后需要换行。啊。

# c# - 检查列表中项目的有效组合

> ID：10317211
> 
> 赞同：4
> 
> 时间：2012-04-25T13:55:22.310
> 
> 标签：c#

我有一个需要验证的项目列表。列表可以包含任意数量的 A、B 和 C 类型的项目，但在保存列表之前，必须确认以下规则：

1.  如果你有A，你需要B或C
2.  如果你有B，你需要A

我最终得到了以下代码（saudo 代码）：

```
bool IsListValid()
{
  var a = list.ContainsAny(A);
  var b = list.ContainsAny(B);
  var c = list.ContainsAny(C);

  if (!a && !b)
    return true;

  if (a && (b || c)
    return true;

  return false;
} 
```

我不喜欢这段代码。
1\. 连续三次使用 Any 可能会迭代列表三次
2\. if 对我来说看起来不太好。

当然，使用不同的变量名称并将测试提取到具有好名称的方法中会更好，但我认为有更好的方法可以完全解决这个问题。我只是不确定如何...

有小费吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T14:12:22.457

我会使用一个简单的循环，它既易于理解又高效。

```
bool containsA = false, containsB = false, containsC = false;
for (int i = 0; i < list.Count; i++)
{
    Type itemType = list[i].GetType();
    if (!containsA) containsA = itemType == typeof(A);
    if (!containsB) containsB = itemType == typeof(B);
    if (!containsC) containsC = itemType == typeof(C);
    if (containsA && (containsB || containsC)) return true;
}
return (!containsA && !containsB); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T14:08:35.620

如果它非常重要以至于您只浏览一次列表，您可以这样做：

```
bool a = false;
bool b = false;
bool c = false;
foreach(var x in list)
{
  if (x is A) a = true;
  if (x is B) b = true;
  if (x is C) c = true;
} 
```

但我会保持原样。如果稍后分析显示此代码正在成为瓶颈，那么您可以重新访问它。

至于`if's`，这对我来说看起来不错。只要正确命名 A、B 和 C（类似于`hasNotifyEmail`or `needsResponse`，解释您为什么希望它们使用指定规则的东西），那么其他人应该很容易理解。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-25T14:12:12.000

```
var hasA = list.Any(x => x.GetType() == typeof(A));
var hasB = list.Any(x => x.GetType() == typeof(B));
var hasC = list.Any(x => x.GetType() == typeof(C));

//If you have A, you need either B or C
// A AND (B xor C)
if (hasA && (hasB ^= hasC))
   return true;

//If you have B, you need A
if (hasB && hasA)
   return true;

   return false; 
```

# php - PHP - 将 MySQL 联系人与 Exchange 同步

> ID：10317212
> 
> 赞同：1
> 
> 时间：2012-04-25T13:55:25.743
> 
> 标签：php, mysql, exchange-server, sync

作为 PHP webapp 的一部分，我有 MySQL 联系人表。它集成在整个应用程序中，允许您添加联系人、编辑联系人或将联系人添加为与另一个表的关系。但是，目前它是独立的。该公司希望它与 Exchange 同步，以便添加到 Exchange 的联系人将显示在 webapp 上，而添加到 webapp 上的联系人将通过 Exchange 显示。

所以我有两个问题：1）与 Exchange 通信 2）与 Exchange 同步。

就基本通信而言，看起来这个库将能够管理它[https://github.com/jamesiarmes/php-ews](https://github.com/jamesiarmes/php-ews)。但是，我对如何管理同步很迷茫，不知道从哪里开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T06:55:57.607

同步项目的内置方法是通过名为`SyncFolderItems`. 基本上交换所有东西，包括联系人是一个文件夹，所以你只需在同步请求`CONTACTS`中传递`DistinguishedFolderId`。

同步通过以最多 512 个元素的批次卸载给定帐户的所有项目并在每批之后为您`SyncState`提供 Exchange 的参考点，以了解您停止的位置。因此，它使您能够进行增量同步。

现在，这当然是一种方式，意思是 Exchange -> Your DB。另一种方式是您应该执行原子更新/请求 - 当您从数据库更改/添加/删除项目时，您应该向 Exchange 服务器发出足够的请求以保持数据同步，否则它将在您的下一个`SyncFolderItems`.

您可以在[`SyncFolderItems`@MSDN上阅读更多内容](http://msdn.microsoft.com/en-us/library/ee693003%28v=exchg.80%29.aspx)

如果您想查看示例，`SyncFolderItems`可以查看[@python 版本的 EWSWrapper](http://ewswrapper.lafiel.net/functions/synchfolder/)，它是最近添加的。虽然是python，但你仍然可以了解如何构造请求/处理响应的基本概念。

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-04T13:21:29.713

我知道这个话题已经很老了。但是，为了将来参考，请在下面找到解决方案。它正在使用上述库 php-ews。

我也刚刚将此添加到官方 php-ews wiki：[https ://github.com/jamesiarmes/php-ews/wiki/Calendar:-Synchronization](https://github.com/jamesiarmes/php-ews/wiki/Calendar:-Synchronization)

```
// Define EWS
$ews = new ExchangeWebServices($host, $username, $password, $version);

// fill with string from last sync
$sync_state = null;

$request = new EWSType_SyncFolderItemsType;
$request->SyncState = $sync_state;
$request->MaxChangesReturned = 512;
$request->ItemShape = new EWSType_ItemResponseShapeType;
$request->ItemShape->BaseShape = EWSType_DefaultShapeNamesType::ALL_PROPERTIES;

$request->SyncFolderId = new EWSType_NonEmptyArrayOfBaseFolderIdsType;
$request->SyncFolderId->DistinguishedFolderId = new EWSType_DistinguishedFolderIdType;
$request->SyncFolderId->DistinguishedFolderId->Id = EWSType_DistinguishedFolderIdNameType::CALENDAR;

$response = $ews->SyncFolderItems($request);

$sync_state = $response->ResponseMessages->SyncFolderItemsResponseMessage->SyncState;
$changes = $response->ResponseMessages->SyncFolderItemsResponseMessage->Changes;

// created events
if(property_exists($changes, 'Create')) {
    foreach($changes->Create as $event) {
        $id = $event->CalendarItem->ItemId->Id;
        $change_key = $event->CalendarItem->ItemId->ChangeKey;
        $start = $event->CalendarItem->Start;
        $end = $event->CalendarItem->End;
        $subject = $event->CalendarItem->Subject;
    }
}

// updated events
if(property_exists($changes, 'Update')) {
    foreach($changes->Update as $event) {
        $id = $event->CalendarItem->ItemId->Id;
        $change_key = $event->CalendarItem->ItemId->ChangeKey;
        $start = $event->CalendarItem->Start;
        $end = $event->CalendarItem->End;
        $subject = $event->CalendarItem->Subject;
    }
}

// deleted events
if(property_exists($changes, 'Delete')) {
    foreach($changes->Delete as $event) {
        $id = $event->CalendarItem->ItemId->Id;
        $change_key = $event->CalendarItem->ItemId->ChangeKey;
        $start = $event->CalendarItem->Start;
        $end = $event->CalendarItem->End;
        $subject = $event->CalendarItem->Subject;
    }
} 
```

# ipad - iOS：使用 iTunes 同步 iPad .ipa 文件中的更改

> ID：10317213
> 
> 赞同：1
> 
> 时间：2012-04-25T13:55:26.123
> 
> 标签：ipad, sync, ipa, ios5.1, itunes-app

我已经使用 iTunes 成功安装了我的企业 iPad 应用程序。当我对应用程序进行一些更改时，将 iTunes 应用程序中的旧应用程序替换为更新的应用程序并将其与 iPad 同步，发现它没有同步最新版本！更改不会得到反映。我必须从 iPad 上删除旧的应用程序并重新安装它。有谁知道可能出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T16:07:14.207

确保`CFBundleVersion`为要通过 iTunes 安装的每个新版本更改 。

# database - Web2Py - 从用户输入创建表

> ID：10317214
> 
> 赞同：1
> 
> 时间：2012-04-25T13:55:28.633
> 
> 标签：database, model-view-controller, web2py

我正在尝试在 web2py 的数据库中创建一个表。我对此很陌生，并试图掌握 MVC 结构以及如何在两者之间调用。我所做的是在 /models/db.py 我创建了一个数据库：

```
TestDB = DAL("sqlite://storage.sqlite") 
```

然后在我的 /controllers/default.py 我有：

```
def index():
    form = FORM(INPUT(_name='name', requires=IS_NOT_EMPTY()),
              INPUT(_type='submit'))

    if form.process().accepted:
        TestDB().define_table(form.vars.name, Field('testField', unique=True))
        return dict(form=form)

    return dict(form=form) 
```

但这行不通。有人可以帮助我了解如何实现这一目标吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:55:32.320

首先，要定义表，它将是`TestDB.define_table(...)`，而不是`TestDB().define_table(...)`。

其次，表定义不会跨请求持久化（当然，数据库表本身会持久化，但 DAL 表定义不会）。因此，如果您在`index()`函数内部定义了一个表，那么它是唯一存在且可在您的应用程序中访问的位置。如果您想在应用程序的其他地方访问该表，您需要将有关表定义的元数据（在本例中，只是表名）存储在某处，可能在数据库或文件中。然后，您将在每个请求上检索该信息（并可能将其缓存以加快处理速度）并使用它来创建表定义。

另一种选择是生成表定义代码并将其附加到模型文件中，以便在每个请求上自动运行。这大致是“admin”应用程序中的新应用程序向导在生成新应用程序时的工作方式。

最后，您可以将表定义保留在`index()`函数中，然后在每个请求上创建数据库连接时，您可以使用[`auto_import`](http://web2py.com/books/default/chapter/29/6#Using-DAL-without-define-tables)：

```
TestDB = DAL("sqlite://storage.sqlite", auto_import=True) 
```

这将根据存储在应用程序的 /databases/*.table 文件中的元数据自动为 TestDB 中的所有表创建表定义。请注意，元数据仅包括特定于数据库的元数据，例如表和字段名称以及字段类型——它不包括特定于 web2py 的属性，例如验证器、默认值、计算函数等。因此，此选项是有限的用处。

当然，所有这些都具有安全隐患。如果您让用户定义表和字段，则特定提交可能会错误地或恶意地更改现有的数据库表。因此，在处理用户提交之前，您必须进行一些仔细检查。

# javascript - 如何获取 Google 数据图表选择处理程序的列索引

> ID：10317216
> 
> 赞同：2
> 
> 时间：2012-04-25T13:55:35.773
> 
> 标签：javascript, google-visualization

我采用以下示例将 google 数据图表与选择处理程序一起使用。但它说它无法返回列索引。它说应该有人能给我一些关于如何实现处理程序来选择列索引的提示吗？

```
// Note: This sample shows the select event.
// The select event is a generic select event,
// for selecting rows, columns, and cells.
// However, in this example, only rows are selected.
// Read more here: http://code.google.com/apis/visualization/documentation/gallery/table.html#Events

function drawVisualization() {
  visualization = new google.visualization.Table(document.getElementById('table'));
  visualization.draw(data, null);

  // Add our selection handler.
  google.visualization.events.addListener(visualization, 'select', selectHandler);
}

// The selection handler.
// Loop through all items in the selection and concatenate
// a single message from all of them.
function selectHandler() {
  var selection = visualization.getSelection();
  var message = '';
  for (var i = 0; i < selection.length; i++) {
    var item = selection[i];
    if (item.row != null && item.column != null) {
      var str = data.getFormattedValue(item.row, item.column);
      message += '{row:' + item.row + ',column:' + item.column + '} = ' + str + '\n';
    } else if (item.row != null) {
      var str = data.getFormattedValue(item.row, 0);
      message += '{row:' + item.row + ', (no column, showing first)} = ' + str + '\n';
    } else if (item.column != null) {
      var str = data.getFormattedValue(0, item.column);
      message += '{(no row, showing first), column:' + item.column + '} = ' + str + '\n';
    }
  }
  if (message == '') {
    message = 'nothing';
  }
  alert('You selected ' + message);
} 
```

# ios - 我的 sqlite 方法有些奇怪

> ID：10317218
> 
> 赞同：-2
> 
> 时间：2012-04-25T13:55:42.903
> 
> 标签：ios, xcode, sqlite

我想要做的是以下几点：

*   用户在我的数据库中看到一个填充了现有记录的表格视图；<-这里一切都好

*   用户触摸 + 按钮来添加一个条目，并获得另一个非常简单的视图，其中包含一个文本字段和一个按钮。

*   在我的按钮的 IBAction 方法中，我使用此代码向我的“DbOperations”类发送消息，其中插入应该发生：

    DbOperations *med = [[DbOperations alloc] init]; [med InsertMedicine:self.txtMedicina.text];

*   用户然后返回到 tableview 并可以立即看到新条目。但是......没有任何东西写入数据库！

这是将条目插入数据库的方法：

```
- (void)InsertMedicine:(NSString *) med {

//Check to see if the new medicine already exists
fileMgr = [NSFileManager defaultManager];
sqlite3_stmt *stmt=nil;
sqlite3 *dbase;

const char *sql = "SELECT * FROM listamedicine";

BOOL response= NO;

NSString *database = [self.GetDocumentDirectory stringByAppendingPathComponent:@"db.sqlite"];
sqlite3_open([database UTF8String], &dbase);
sqlite3_prepare_v2(dbase, sql, -1, &stmt, NULL);
while(sqlite3_step(stmt) == SQLITE_ROW) {
    if ([med caseInsensitiveCompare:[NSString stringWithUTF8String:(char *)sqlite3_column_text(stmt, 1)]] == NSOrderedSame) {
        response=YES;
    }
}
sqlite3_finalize(stmt);
if (!response) {
    //Insert the new medicine
    sqlite3_stmt *stmt=nil;
    NSString *stmsql = [NSString stringWithFormat:@"INSERT INTO listamedicine (nomemedicina) VALUES (\"%@\")", med];
    const char *sql2 = [stmsql UTF8String];

    sqlite3_prepare_v2(dbase, sql2, -1, &stmt, NULL);

    sqlite3_step(stmt);
} else {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Errore" 
                                                    message:@"La medicina che stai cercando di inserire esiste già." 
                                                   delegate:nil 
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles:nil];
    [alert show];
}
sqlite3_finalize(stmt);
sqlite3_close(dbase); 
```

}

这是我的表格视图用来填充单元格的代码：

```
- (NSMutableArray *)listMedicine {
fileMgr = [NSFileManager defaultManager];
sqlite3_stmt *stmt=nil;
sqlite3 *mybd=NULL;

const char *sql = "SELECT * FROM listamedicine";

NSMutableArray *listaMedicine = [[NSMutableArray alloc]init];

//Open db
NSString *database = [self.GetDocumentDirectory stringByAppendingPathComponent:@"db.sqlite"];
sqlite3_open([database UTF8String], &mybd);
sqlite3_prepare_v2(mybd, sql, -1, &stmt, NULL);
while(sqlite3_step(stmt) == SQLITE_ROW) {
    Medicina *myMedicine = [[Medicina alloc]init];
    myMedicine.dataId=[[NSNumber numberWithInt:(int)sqlite3_column_int(stmt, 0)] intValue];
    myMedicine.nome=[NSString stringWithUTF8String:(char *)sqlite3_column_text(stmt, 1)];

    [listaMedicine addObject:myMedicine];

}
sqlite3_finalize(stmt);
sqlite3_close(mybd); 
return listaMedicine; 
```

}

这位于我的“DbOperations”类中。tableview 中的 cellForRowAtIndexPath 方法如下所示：

```
static NSString *CellIdentifier = @"CellaMedicina";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"CellaMedicina"];
}

//Get the object from the array.
DbOperations *med = [[DbOperations alloc] init];
self.medicine = [med listMedicine];
Medicina *medicina = [self.medicine objectAtIndex:indexPath.row];

cell.textLabel.text = medicina.nome;

// Set up the cell

return cell; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:45:02.280

好的，我终于解决了问题...我有一种方法可以将 db 从捆绑包复制到文档文件夹，但我没有在任何地方调用它。

# mysql - 如何使用两个表的连接获得结果？

> ID：10317219
> 
> 赞同：-5
> 
> 时间：2012-04-25T13:55:43.050
> 
> 标签：mysql, sql

如何使用连接从两个表中获取结果，一个表中的一列和 MySQL 中另一表中的一列计数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T13:58:44.843

```
select t1.Column1, t2.Column2
from Table1 t1
inner join Table2 t2 on t1.ID = t2.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:57:43.230

`table1.something, table2.somethingelse from table1 join table2 on table1.id = table2.tb1id`

# sql - 访问 SQL 减去日期，不包括周末

> ID：10317220
> 
> 赞同：1
> 
> 时间：2012-04-25T13:55:44.963
> 
> 标签：sql, ms-access

我能够运行查询并从创建之日起更新天数。但是我想排除周末，只是周一到周五。

例子：

```
UPDATE [Table1] SET [Table1].Days = DATE() - [Table1].DateCreated WHERE [Table1].Password = True AND [Table1].Complete = FALSE; 
```

这会将天数更新为从创建日期到当前日期的值，即 1、2、3 等。但是我需要它来排除周末。我不经常运行查询，但我想创建这个查询。

请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T17:37:45.860

如果您将从 Access 会话中运行查询，则可以使用 VBA 用户定义函数来计算两个日期之间的工作日数。

例如，考虑`WorkingDays()`Access Web 中的函数：[计算工作日数](http://access.mvps.org/access/datetime/date0006.htm)。如果我正确理解您的查询，我认为这可能会满足您的要求：

```
UPDATE [Table1]
SET [Table1].Days = WorkingDays([Table1].DateCreated, DATE())
WHERE [Table1].Password = True AND [Table1].Complete = FALSE; 
```

在同一页面上，您可以找到一个`WorkingDays2()`功能，如果有用，您可以将假期从工作日计数中排除。不过，您需要为您的假期设置一张桌子。

如果您将在 Access 会话之外执行此操作，例如从经典 ASP 或 Dot.Net，您将无法在查询中使用用户定义的函数。

# java - java负载均衡器和队列管理（如PBS）

> ID：10317221
> 
> 赞同：2
> 
> 时间：2012-04-25T13:55:52.040
> 
> 标签：java, jakarta-ee

我们有一个简单的 java 应用程序，它在命令行上运行用户请求（命令）并输出结果。因此，举个例子，假设用户提交了一份工作，内容如下：

```
cmd.exe ping -10 google.com 
```

通常，我们有大约 100 个用户，提交 100 个要执行的请求。目前，Java 应用程序只是将作业排队并按顺序运行它们，而不是“民主”或“贪婪”。

我们想要做的是能够确定作业的优先级，以更“均匀”的方式运行作业（假设 2 个用户每个提交了 100 个作业，我们希望每个用户运行 1 个作业并来回切换）。

为此，我想知道是否有任何开源工具，例如 PBS：

[http://code.google.com/p/pbs4java/](http://code.google.com/p/pbs4java/)

可以与java集成。在谷歌上搜索并没有透露很多信息 - 任何意见或建议将不胜感激。

更新：我追求的最重要标准是：[1] 应该是开源的 [2] 应该能够与 Java 集成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:06:49.300

我建议看看[Akka Dispatch and priority features](http://doc.akka.io/docs/akka/2.0.1/java/dispatchers.html)。您应该管理如何将优先级分配给任务。因此，在您的情况下，随着用户提交更多任务，它可能会导致随着时间的推移降低优先级。指标应该由您的问题需求定义并注入到库中。

作为一个侧节点，Akka 使用[HawtDispatch 的](http://hawtdispatch.fusesource.org/)想法，所以如果它适合你，你也可以看看这个库。

# c# - ServiceStack 默认格式

> ID：10317225
> 
> 赞同：21
> 
> 时间：2012-04-25T13:55:58.990
> 
> 标签：c#, .net, servicestack

我想将 ServiceStack 的默认格式设置为 JSON，而不是从浏览器访问服务时通常返回的 HTML 格式响应。我知道这可以通过发送 ?format=json 参数或将 Accept 标头设置为 application/json 来在每个请求上指定。有没有办法改变这种情况而不必依赖请求中的这些提示？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-25T16:41:35.327

除了使用**?format=json**在 QueryString 上指定它之外，还可以[通过将格式](https://github.com/ServiceStack/ServiceStack/wiki/Routing#content-negotiation) **.ext**附加到路由的末尾，例如：[/rockstars.json](http://razor.servicestack.net/rockstars.json)，或者通过指定 HTTP 标头（在您的 HttpClient 中）：`Accept: application/json`。

否则，如果您的 HttpClient 不发送 Accept 标头，您可以将 JSON 指定为 AppHost 中的默认内容类型：

```
SetConfig(new HostConfig {
     DefaultContentType = MimeTypes.Json 
}); 
```

ServiceStack 中的所有配置选项都在这里设置。

从 Web 浏览器调用 Web 服务时的问题是，它们通常要求`Accept: text/html`而不是 JSON，根据合同 ServiceStack 的义务是在启用时返回 HTML。

为确保返回 JSON，您可能还需要禁用 HTML 功能：

```
SetConfig(new HostConfig {
    EnableFeatures = Feature.All.Remove(Feature.Html),
}); 
```

## 指定响应内容类型的不同方法

否则，如果您想覆盖 Accept 标头，您可以强制您的服务始终使用以下任何方式返回 json 来自[定义 HTTP 响应](https://github.com/ServiceStack/ServiceStack/wiki/Customize-HTTP-Responses)，例如：

使用过滤器（AddHeader 是内置的）：

```
[AddHeader(ContentType=MimeTypes.Json)]
public object Any(Request request) { ... } 
```

在服务中设置响应：

```
public object Any(Request request) 
{ 
    base.Response.ContentType = MimeTypes.Json;
    return dto;
} 
```

返回一个修饰的响应：

```
return new HttpResult(dto, MimeTypes.Json); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T05:12:11.383

我使用 PreRequestFilter 来强制 JSON 响应浏览器。您仍然会在查询字符串上看到 ?format=json，但如果您禁用了 html 和 xml，它会很有用。

```
this.PreRequestFilters.Add( (req, res) =>
    {
        const string queryString = "format=json"; 
        var jsonAccepted = req.AcceptTypes.Any(t => t.Equals(ContentType.Json, StringComparison.InvariantCultureIgnoreCase));
        var jsonSpecifiedOnQuerystring = !string.IsNullOrEmpty(req.QueryString["format"]) && req.QueryString["format"].Equals("json", StringComparison.InvariantCultureIgnoreCase);
        if (!jsonAccepted && !jsonSpecifiedOnQuerystring)
        {
            var sb = new StringBuilder(req.AbsoluteUri);
            sb.Append(req.AbsoluteUri.Contains("?") ? "&" : "?");
            sb.Append(queryString);
            res.RedirectToUrl(sb.ToString(), HttpStatusCode.SeeOther);
            res.Close();
        }
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-26T23:20:54.840

这个问题迟到了，但由于我在任何地方都找不到答案，我终于从 ServiceStack 的源代码中找到了答案:)

我发现从浏览器默认使用 Json 而不是 Html 的最简单方法是：

```
HttpRequestExtensions.PreferredContentTypes = new[] { MimeTypes.Json, MimeTypes.Xml }; 
```

在您的应用程序启动时调用它，它将覆盖默认的 ServiceStack mime 类型并以 json 开头（它将与您的浏览器的请求一起使用，因为*/*将匹配它）。

请注意，您仍应禁用 Html 并使 Json 成为默认的 mime 类型：

```
SetConfig(new HostConfig {
     DefaultContentType = MimeTypes.Json 
     EnableFeatures = Feature.All.Remove(Feature.Html),
}); 
```

* * *

*对于好奇的*：ServiceStack 在内部使用`HttpRequestExtensions.GetResponseContentType`（请参阅参考资料`HttpRequestExtensions.cs`），它循环通过首选的内容类型。因为它包含`MimeTypes.Html`，它将从浏览器 ( `text/html`) 中捕获第一个接受类型，并忽略后面的任何内容。通过覆盖它，`text/html`它不会被视为首选内容类型，然后它会跳转到`*/*`默认`json`为预期的内容类型。

# prolog - SWI-Prolog 寻找 X 的值

> ID：10317228
> 
> 赞同：0
> 
> 时间：2012-04-25T13:56:15.187
> 
> 标签：prolog, predicate

我在数据库中有类似的东西。

```
flight( tk1, ist, esb, 40 ).
flight( tk2, ist, mlx, 90 ). 
```

我写了一个谓词，叫做测试。

```
test([S], L1):-
    findall( C, (flight( _, S, C, _ )), L1 ). 
```

我写的时候的输出`test([ist], X).`是`X = [esb, mlx].`所以这是真的，但是当我写`test(X, [esb, mlx]).`的时候是`false`。为什么呢`false`？我应该为此写另一个谓词吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:12:43.643

好吧，正如您所看到[`findall/3`](http://www.swi-prolog.org/pldoc/doc_for?object=findall/3)的，不一定应该与绑定的最后一个参数一起使用，例如在 SWI-Prolog 中，在其描述中我们可以阅读：

```
findall( +Template, :Goal, -Bag ) 
```

这表明`Bag`调用时必须是空闲的。遗憾的是，有些谓词并非以所有可能的方式起作用！

不过，您可以轻松编写另一个谓词来测试它：

```
reverse_test( Cs, Ss ) :-
    findall( S, ( flight( _, S, C, _ ), member(C, Cs) ), Ss ). 
```

顺便说一句，由于您的关系显然不是`Ss`and之间的双射`Cs`，因此您不应该期望结果是相反的（`test(A, R), reverse_test(R, A2)`不会导致`A == A2`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:23:44.787

我在 SWI-Prolog 中进行了尝试，但正如预期的那样，它与您公开的事实相符：

```
?- test(X,[esb,mlx]).
X = [_G3627]. 
```

如果你单独尝试 findall，你应该得到

```
?- findall( C, (flight( _, S, C, _ )), L1 ).
L1 = [esb, mlx]. 
```

否则，例如，如果您有另一个没有 ist 的事实，它会失败：如果我添加

```
flight( tk2, xxx, mlx, 90 ). 
```

然后

```
?- test(X,[esb,mlx]).
false. 
```

# mysql - 将mysql连接到postgresql

> ID：10317229
> 
> 赞同：2
> 
> 时间：2012-04-25T13:56:16.090
> 
> 标签：mysql, postgresql, drupal

我正在使用drupal安装，它使用mysql创建一个新用户，必须创建他的电子邮件（它在mysql中的类型是varchar（64）），然后转到实际的网页，它适用于postgresql，用户必须再次输入他的电子邮件，然后保存。实际上，只要他输入电子邮件（主键），就会在 postgres 中创建新的用户表。

我想要的是一个函数，或者一旦在 mysql 中创建新用户，它就会自动连接到 postgres 以将电子邮件保存在那里。可能吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T12:31:36.557

您可能需要考虑“外部数据包装器”（FDW）。

[http://wiki.postgresql.org/wiki/Foreign_data_wrappers#mysql_fdw](http://wiki.postgresql.org/wiki/Foreign_data_wrappers#mysql_fdw)

[http://www.postgresql.org/docs/9.1/static/sql-createforeigndatawrapper.html](http://www.postgresql.org/docs/9.1/static/sql-createforeigndatawrapper.html)

# php - 使用 PHP 检查文件是否与给定目录中的通配符规范匹配

> ID：10317235
> 
> 赞同：0
> 
> 时间：2012-04-25T13:56:39.180
> 
> 标签：php

我有一个文件上传到的目录，如果文件存在，我希望能够显示下载链接。然而，该文件必须匹配特定的模式，因为这是上传文件的标识符。

该模式以 /ClientFiles/ 开头，然后它需要查找以用户 ID 开头的所有文件。例如：/ClientFiles/123-UploadData.xls

所以它需要查看 ClientFiles 目录并找到所有以 '123-' 开头的文件，无论后面是什么。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T14:04:18.270

要按特定模式查找文件，您可以使用[glob](http://co.php.net/glob)，然后使用 is_readable 检查您是否可以读取文件。

```
$files = array();    
foreach(glob($dirname . DIRECTORY_SEPARATOR . $clientId . '-*' as $file) {
    if(is_readable($file) {
        $files[] = $file;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T13:57:50.643

只需使用[file_exists()](http://php.net/manual/en/function.file-exists.php)函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T13:58:09.100

php 有一个函数 file_exists。使用它来制定一些关于是否显示链接的逻辑。

# java - Java 中的视频 - 声音 - 传感器捕获

> ID：10317237
> 
> 赞同：3
> 
> 时间：2012-04-25T13:56:50.937
> 
> 标签：java, video, sensors, jmf, javasound

我想开发一个应用程序，它能够从网络摄像头捕获视频，从麦克风捕获声音并在接近传感器可用的情况下捕获运动。

最初我希望它在 Windows 上运行，但如果可以的话，我可能想让它稍后在 android 上运行。

我正在寻找一些非常直接且易于理解的东西。我的研究将我引向了 Java Media Framework，但它太旧且被遗弃了。FMJ 似乎也老了。JavaCV 似乎没有可用的文档。

我的目标是制作一个家庭检测应用程序，它使用摄像头图像、麦克风声音和传感器来检测和分析家庭入侵。如果出现更简单的解决方案，我可能会飞跃并使用 .NET 或其他面向对象的编程语言来实现。我应该如何处理这个问题，你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T10:57:20.590

*   一种解决方案是使用 JavaCV。因此，您可以使用 java 开发您的桌面应用程序，以后可以通过较少的更改移植到 android。正如您所说，JavaCV 没有丰富的文档。但是 JavaCV 只是 OpenCV 的包装器。因此，您可以阅读 OpenCV 文档并找到相关的方法（函数）名称。JavaCV 中的方法与 OpenCV 的名称几乎相同。所以你可以在 JavaCV 中尝试这些方法。

*   下一个解决方案是使用 .NET 开发系统。在那里，您可以使用 [AForge.NET](http://www.aforgenet.com/)丰富的 .NET 库或[Emgu CV](http://www.emgu.com) .NET 包装器用于 OpenCV。但是您在创建 android 应用程序时会遇到问题。因为你必须从头开始构建它。

# wordpress - 如何让wordpress页面出现在谷歌搜索中

> ID：10317238
> 
> 赞同：-3
> 
> 时间：2012-04-25T13:56:55.903
> 
> 标签：wordpress, seo

我在 wordpress 网站中添加了一个新页面，并希望它显示在谷歌搜索结果中。我怎样才能做到这一点？

我在这里先向您的帮助表示感谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T13:59:01.597

您可以使用[XML 站点地图](http://sitemap.org)

另一个步骤是[Html Sitemap](http://www.ehow.com/sitemap-1112170.html)。

您可以使用[Google Webmaster Tool](https://www.google.com/webmasters/tools/)提交 XML Sitemap。

# c# - 使用 c# 的高级过滤器 excel

> ID：10317241
> 
> 赞同：3
> 
> 时间：2012-04-25T13:57:03.897
> 
> 标签：c#, excel

我需要在excel表中做一个过滤器，我想知道是否可以做一个这样的过滤器

```
 List<string> listFilter = new List<string>();
            listFilter.Add("3");
            listFilter.Add("4");

            object _missing = System.Reflection.Missing.Value;
            Microsoft.Office.Interop.Excel.Range oRng1 = xlWorkSheet.Range["A1", "A1048576"];
            oRng1.AutoFilter(1, listFilter, Microsoft.Office.Interop.Excel.XlAutoFilterOperator.xlAnd, _missing, true);
            oRng1.Borders.LineStyle = Microsoft.Office.Interop.Excel.XlLineStyle.xlContinuous; 
```

我知道这段代码不起作用，但我想在 filter 参数中做一个动态列表。有人能告诉我我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T04:57:19.217

我不确定传递列表，但你绝对可以传递数组：

```
string[] listfilter = new string[] { "2", "3", "4" };
xlWorksheet.get_Range("A1", "B50").AutoFilter(1, listfilter, Excel.XlAutoFilterOperator.xlFilterValues,
    Missing.Value, true); 
```

`XlAutoFilterOperator` [你可以在这里](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.xlautofilteroperator.aspx)找到不同的成员。

尝试在工作表中找到最后使用的行而不是为整个列设置过滤器也可能是一个想法，因为这可能会减慢速度：

```
int lastRow = xlWorksheet.Range["A:A"].Find("*", Missing.Value, Missing.Value, Missing.Value,
    Excel.XlSearchOrder.xlByRows, Excel.XlSearchDirection.xlPrevious, false, Missing.Value,
    Missing.Value).Row; 
```

# android - 如何在html div、img上获取相机回调的结果，

> ID：10317255
> 
> 赞同：0
> 
> 时间：2012-04-25T13:57:57.667
> 
> 标签：android, cordova, callback, camera

可以将相机结果回调数据放入 html div 或 img 或使用 Phonegap 的任何内容中吗？

例如，在 div 上查看相机所看到的内容。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T21:50:54.760

[是的，请参阅此处](http://docs.phonegap.com/en/1.6.1/cordova_camera_camera.md.html#Camera)的相机 API 文档。加载完整示例。Capture Photo 按钮在 div 中显示拍摄的照片。

# c# - MVC3：如何更改通用 [必需] 验证消息文本？

> ID：10317259
> 
> 赞同：8
> 
> 时间：2012-04-25T13:58:11.477
> 
> 标签：c#, asp.net-mvc-3, data-annotations

当您使用属性装饰模型对象的属性`Required`但未指定时`ErrorMessage` ，或者`ResourceType/Name`您收到“需要 {0} 字段”的插值形式的验证消息，其中参数 0 是该`DisplayName`属性的属性值。

我想将该默认字符串更改为其他内容，但我想保持它的通用性，即我不想为模型对象的每个属性指定`ErrorMessage`或`ResourceType/Name`。默认字符串存储在哪里以及如何更改它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T14:03:50.927

您是否尝试过创建 RequiredAttribute 的派生类并覆盖 FormatErrorMessage 方法？这应该有效：

```
public class MyRequiredAttribute : System.ComponentModel.DataAnnotations.RequiredAttribute
{
    public override string FormatErrorMessage(string name)
    {
        return base.FormatErrorMessage(string.Format("This is my error for {0}", name));
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-25T14:06:41.563

派生您自己的属性是一个公平的选择，并且可能具有最低的开始开销，但您需要返回并更改所有现有的`[Required]`. 您（和您团队中的任何其他人）还需要记住使用（并教新人使用）正确的人。

另一种方法是替换`ModelMetadataProviders`和`ModelValidatorProviders`从资源文件中返回字符串。这避免了上述缺点。它还为替换其他属性（例如`MaxLengthAttribute`）的消息和支持其他语言奠定了基础。

```
protected void Application_Start()
{
    var stringProvider = new ResourceStringProvider(Resources.LocalizedStrings.ResourceManager);
    ModelMetadataProviders.Current = new LocalizedModelMetadataProvider(stringProvider);
    ModelValidatorProviders.Providers.Clear();
    ModelValidatorProviders.Providers.Add(new LocalizedModelValidatorProvider(stringProvider));
} 
```

这是完整的[源代码](https://github.com/jgauffin/griffin.mvccontrib)、[文档](http://docs.griffinframework.net/mvccontrib/)和描述用法的[博客文章。](http://blog.gauffin.org/2011/09/easy-model-and-validation-localization-in-asp-net-mvc3/)

# java - 识别汇编代码中的变量

> ID：10317263
> 
> 赞同：0
> 
> 时间：2012-04-25T13:58:27.320
> 
> 标签：java, windows, linux

你怎么知道汇编代码中的变量是什么？谢谢你的帮助。NB

如果你也给我看一些代码。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:12:11.013

汇编有[寄存器](http://www.eecg.toronto.edu/~amza/www.mindsec.com/files/x86regs.html)，可以像变量一样使用，但有一些限制（大小等）。汇编将根据您为其编写的处理器类型而有所不同。查看 x86 的[维基百科文章](http://en.wikipedia.org/wiki/X86_assembly_language)。

# ruby-on-rails-3 - 有没有一种很好的方法来查找用户的所有标签？

> ID：10317266
> 
> 赞同：1
> 
> 时间：2012-04-25T13:58:33.763
> 
> 标签：ruby-on-rails-3, acts-as-taggable-on

我使用acts-as-taggable-on [https://github.com/mbleigh/acts-as-taggable-on](https://github.com/mbleigh/acts-as-taggable-on)来标记用户的帖子，我想找到一个用户的所有帖子'所有标签并列出它们，有没有高表现方法 ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T05:47:38.293

您需要添加`acts_as_tagger`到用户模型

参考[https://github.com/mbleigh/acts-as-taggable-on#tag-ownership](https://github.com/mbleigh/acts-as-taggable-on#tag-ownership)

那么您可以使用提供的方法。如果您从空白数据库开始，这应该可以工作，但可能需要运行一些重新分配循环才能使标记器关联工作。

假设您的数据是正确的，那么您将能够：

```
@some_user.owned_taggings
@some_user.owned_tags 
```

希望这可以帮助

# mysql - 联合后的codeigniter分页

> ID：10317270
> 
> 赞同：1
> 
> 时间：2012-04-25T13:58:41.477
> 
> 标签：mysql, codeigniter, pagination, union

我有一个脚本，可以`union`使用我的数据库的不同表。
我需要通过分页显示结果，以使其对用户更具可读性。

**这是我的代码：**

```
//Fetch
foreach($query_info->result() as $info){

//I'm going to create a query for each row i get from the db
$query [] = (' (
    SELECT 
        '.$info->slug.'_dog.`name`, 
        `age`,
        '.$info->slug.'_breed.`name` as breed, 
        `sex`, 
        `link`,
        `sterilized`, 
        \''.$info->slug.'\' as prefix 
    FROM 
        '.$info->slug.'_dog, 
        '.$info->slug.'_breed 
    WHERE 
        '.$info->slug.'_dog.breed = '.$info->slug.'_breed.id 
        AND 
        '.$info->slug.'_dog.type = '.$type.'
)';
}

//implode different UNION
$query_final = implode(" UNION ",$query); 
```

如您所见，查询可能非常大。我怎样才能分页？

我的第二个选择是使用表的所有结果制作一个完整的视图，大约 10-20 个表......哪个数据库更快？“大”联合还是视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T17:16:59.637

我不知道哪个更快，但要执行 UNION，您可以在分页的总查询末尾添加偏移量和限制。仅在第一个查询中，您可以在选择中添加 SQL_CALC_FOUND_ROWS。像这样：（注意 SQL_CALC_FOUND_ROWS 后面没有逗号）

> (SELECT SQL_CALC_FOUND_ROWS column1, column2 FROM etc...) UNION (SELECT column1, column2 FROM etc...) LIMIT 0,10

运行查询后，立即运行此查询：

> 选择 FOUND_ROWS();

它将返回总记录，就像您的查询没有限制一样。所以基本上你不必再次运行查询来计算结果。

要创建其余的分页，您可以使用 CI 它自己的分页库： [http ://codeigniter.com/user_guide/libraries/pagination.html](http://codeigniter.com/user_guide/libraries/pagination.html)

// 编辑：为了从模型返回数据，你可以使用这样的东西：

> $results['data'] = $this->db->query($sql)->result_array();
> 
> $total = $this->db->query('SELECT FOUND_ROWS() as total')->row_array();
> 
> $results['total'] = $total['total'];
> 
> 返回$结果；

它可能可以再优化一点。

# c# - 在 C# 中杀死 TCP 服务器的 TCP 客户端线程

> ID：10317272
> 
> 赞同：1
> 
> 时间：2012-04-25T13:58:46.510
> 
> 标签：c#, multithreading, tcpserver

我有一个 TCP 服务器软件。我为每个 TCP 客户端打开一个线程。（为什么我为每个 TCP 客户端打开一个线程并不重要。）我想随时踢一个 TCP 客户端并想杀死它的线程。如何找到我想踢出服务器的 TCP 客户端线程？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T16:15:10.070

您需要跟踪所有存在的 TcpClient。例如，使用列表来存储它们。这样您就可以访问它们。

# c# - Windows Server 2008 中 COM 对象的 InvalidCastException

> ID：10317274
> 
> 赞同：0
> 
> 时间：2012-04-25T13:58:48.957
> 
> 标签：c#, windows, iis, com

我有一个与部署在 Windows Server 2008（x64 版本）上的 IIS7 上的 C# 服务通信的站点出现问题。该服务正在尝试从第三方 dll 访问 COM 对象。什么时候这样做会引发以下形式的异常：

```
System.InvalidCastException: Unable to cast COM object of type 'MyClass' to interface type 'TheirInterface'. 
This operation failed because the QueryInterface call on the COM component for the interface with IID '{88B11E8A-0B27-459C-BC28-A4D4113FD4AE}' failed due 
to the following error: No such interface supported (Exception from HRESULT: 0x80004002 (E_NOINTERFACE)). 
```

我在许多其他运行 Windows 7 的机器上托管了相同的站点，所以我认为问题与操作系统（Windows Server 2008）有关。关于我在哪里可以搜索此异常的解决方案的任何建议，或者是否应该在 IIS 上进行任何配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:07:17.807

您需要将该网站作为 32 位网站运行，或者使用针对 x64 平台编译的 COM 对象。换句话说，您的 COM 对象无法加载，因为它只支持由 32 位进程加载。

# wcf - 针对异步 wcf 服务的 silverlight 自动完成功能

> ID：10317275
> 
> 赞同：0
> 
> 时间：2012-04-25T13:58:49.407
> 
> 标签：wcf, silverlight, asynchronous, autocomplete

我正在使用 Silverlight 5 并尝试编写一个自动完成文本框（我正在使用带有 radcombobox 的 Telerik radwatermarktextbox 控件来显示项目），其项目列表是从异步调用返回的机场列表到 WCF 服务.

我遇到的问题是，如果我在文本框中快速输入，则会启动多个异步调用以获取过滤后的项目列表（每个按键一个），并且它们不一定以与它们相同的顺序完成运行 - 特别是当返回的列表很大时。

所以如果我要快速输入 HPN，下面的调用就会开始

以 H 作为参数的异步调用（#1 - 将返回 231 行） 以 HP 作为参数的异步调用（#2 - 将返回 4 行） 以 HPN 作为参数的异步调用（#3 - 将返回 1 行）

有时我得到的结果是在其他人之后调用#1

我无法更改正在调用的 wcf 服务或向 WCF 服务添加同步方法。

Foxpro 有一个名为 CHRSAW 的函数，它可以告诉您输入缓冲区中是否有键等待（http://msdn.microsoft.com/en-us/library/5skwdb75(v=vs.80).aspx），它可能是用于防止调用#1 和#2。

是否有等效的 .NET 功能/特性可以让我这样做？

这是我正在使用的代码

```
private void ICAO_TextChanged(object sender, TextChangedEventArgs e)
    {
        TextBox txt = (TextBox)sender;

        if (txt.Text != String.Empty)
        {
                radBusyIndicator1.IsBusy = true;
                _ServiceClient.FindAirportByPartialICAOAsync(txt.Text.Trim().ToUpper());
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:07:01.890

比您在评论中发布的解决方案更简单的解决方案是将您发送的文本也作为参数作为用户状态发布。因此，在查找“H”时，您会将“H”作为用户状态传递。

当电话回来时，只使用用户状态=自动完成中的文本的那个。

# php - 分页 - 检查是否存在下一个/上一个记录

> ID：10317279
> 
> 赞同：1
> 
> 时间：2012-04-25T13:58:58.707
> 
> 标签：php, mysql, image, pagination, pdo

我必须做一个照片分页。

> << 上一页 [图片] 下一页 >>

假设实际页面是这样的：`www.myWebSite.com/photo.php?id=12`

如果我按`Next`，然后我会重定向到`www.myWebsite.com/photo.php?id=13`，但如果照片`id=13`从数据库中删除，我能做什么？

例如：

```
<?php

require_once '../classes/dataBaseManager/ImageDataBaseManagr.php';

if ( isset ( $_GET ['id'] ) ) {
  $id = $_GET ['id'];
  /**
  * Initialize my data base class.
  */
  try {
    $dataBase = ImageDataBaseManager::connect();
    $select = $dataBase->select( array ( 'id' => $id );
    $previous = (int)($select ['id'] - 1);
    $next = (int)($select ['id'] + 1);
    $photo = $select ['path'];
    echo '<a href="http://www.myWebSite.com/photo.php?id='.$previous.'">Previous</a>';
    echo '<img src="'.$path.'" />';
    echo '<a href="http://www.myWebSite.com/photo.php?id='.$next.'">Previous</a>';
  }
  catch ( PDOException $e ) {
    error_log( $e->getMessage );
    return;
  } 
}
?> 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:06:14.807

在我看来，这是实施的缺陷。我会推荐以下查询字符串（下一个）

```
 photo.php?currentid=1&action=next 
```

这样，您的选择调用将成为 castor 提到的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:15:50.040

这取决于您的网站的工作方式。你想让人们知道图像已被删除吗？还是默默跳过？如果您想跳过它，只需修改您的查询以获取请求的 ID 或下一个最高的 ID。事实上，如果你也将方向作为变量传递，你可以保留这个查询：

假设您要求`?ID=13&next`，将其作为我们的查询：

```
SELECT foo, bar FROM images WHERE id >= 13 ORDER BY id ASC LIMIT 1 
```

的方向`<`将由 URL 的存在`&next`或`&back`在 URL 中决定：

```
$direction = isset( $_GET['back'] ) ? '<' : '>' ; 
```

我们正在为我们的方向变量定义一个默认的搜索方向。如果`&back`URL 中存在，那么我们将尊重它并反转查询中的方向。否则，我们将始终期待等于或大于请求 ID 的图像。

`mysql_num_rows()`和往常一样，检查结果中是否存在数据的返回值。如果您的查询正在寻找下一张图片，但什么也没找到，您可能需要通知用户他们位于图库的末尾/开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T14:02:58.117

您有当前页面 ID，并且想要获取下一个现有 ID。所以构造查询，如：

```
SELECT id FROM `table` WHERE `id` > \"$current_id\" ORDER BY `id` ASC LIMIT 1 
```

这应该可以解决您的问题。

搜索上一张照片时，请使用此查询：

```
SELECT id FROM `table` WHERE `id` < \"$current_id\" ORDER BY `id` DESC LIMIT 1 
```

您还需要检查是否`mysql_num_rows()`大于0。如果是，则您有下一条记录。如果没有，你到达了最后一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T14:03:55.170

您需要获取数据库中的最大照片数量，如果达到最大值，请不要显示`next`链接。此外，您不应使用照片的 id 进行分页。检查`LIMIT`MySQL 的选项。

# html - 更改 Facebook 喜欢按钮的文本颜色

> ID：10317285
> 
> 赞同：2
> 
> 时间：2012-04-25T13:59:31.317
> 
> 标签：html, css, facebook-like

我在我的网站上添加了 Facebook 点赞按钮，但文本颜色太深且背景为黑色，因此很难阅读内容（“xyz people like this”）。谁能告诉我如何解决这个问题？可能定义一些额外的类？我什么都没想到。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T14:09:33.713

Facebook 按钮可以设置为深色或浅色背景

[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)

只需将配色方案更改为“深色”，它就会适合您的深色背景。

# centos - 无法启动 mysqld_safe 来重置 root 密码

> ID：10317286
> 
> 赞同：10
> 
> 时间：2012-04-25T13:59:35.480
> 
> 标签：centos, root, mysql

我安装了 MySQL，并且正在尝试让 Wordpress 连接到它的密码设置。在这样做时，我似乎已经对我的 root 密码进​​行了哈希处理，现在无法登录。

我正在尝试通过运行来重置密码

```
/etc/init.d/mysqld stop 
```

然后

```
mysqld_safe --skip-grant-tables 
```

哪个输出

```
Starting mysql daemon with databases from /var/lib/mysql 
```

但随后什么也不做。它既不成功也不失败。我没有任何数据库设置，所以我很乐意在必要时删除并重新安装 mysql，但我尝试了但无济于事。我怎样才能回来？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-25T17:11:40.697

`mysqld_safe`是启动mysql引擎的命令。在表示它已启动 mysql 的行之后，它不应该做或显示任何内容。运行`mysqld_safe`后，下一步就是运行`mysql`。因为您使用 mysqld 启动，`--skip-grant-tables`所以不需要指定用户名或密码。

然后，您可以发出命令来重置 root 的密码。有关如何设置密码的说明，请参阅[http://dev.mysql.com/doc/refman/5.0/en/set-password.html](http://dev.mysql.com/doc/refman/5.0/en/set-password.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T16:30:59.990

您是否尝试过“mysqld --skip-grant-tables”而不是 mysqld_safe？确保在启动 mysqld --skip-grant-tables 之前杀死所有未死的 mysqld 线程。对 mysql 执行 ps -ef 和 grep，kill -9 任何 mysql 进程，然后启动它 --skip-grants-tables。

# c# - C#“初始化程序从派生到基类运行”在 Unity 中很明显，但在其他情况下则不然

> ID：10317287
> 
> 赞同：0
> 
> 时间：2012-04-25T13:59:35.933
> 
> 标签：c#, .net, dependency-injection, unity-container, derived-class

我不确定这是否是一个统一错误，但谁能帮我解释为什么下面的程序在第三种情况下打印 150？

```
void Main()
{
// Test 1
Derived d = new Derived();
d.Height.Dump(); //Prints 10

// Test 2
IUnityContainer unityContainer = new UnityContainer();
unityContainer.Resolve(typeof(Derived)).Dump(); // Prints 10

// Test 3 
unityContainer.RegisterType<IPrintHeightService<Derived>, PrintHeightService<Derived>>();
var output = unityContainer.Resolve<IPrintHeightService<Derived>>();
output.Show(); //Prints 150
}

public interface IHasHeight
{
    Int32 Height {get; set;}
}

// Define other methods and classes here
public class Default : IHasHeight
{
    public Int32 Height {get; set;}

    public Default()
    {
        Height = 150;
    }
}

public class Derived : Default
{
    public new Int32 Height {get { return 10;}}
}

public interface IPrintHeightService<T> where T:IHasHeight, new() 
{
    void Show();
}

public class PrintHeightService<T> : IPrintHeightService<T> where T:IHasHeight, new()
{
    private IHasHeight objectWithHeight;
    public PrintHeightService(IUnityContainer unityContainer)
    {
        objectWithHeight = (T) unityContainer.Resolve(typeof(T));
    }

    public void Show()
    {
        Console.WriteLine(objectWithHeight.Height); // Prints 150
    }
} 
```

我怀疑这是因为初始化程序是从派生到基础运行的（http://blogs.msdn.com/b/ericlippert/archive/2008/02/18/why-do-initializers-run-in-the -opposite-order-as-constructors-part-two.aspx) 但为什么它在统一时很明显，而不是在其他方面？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T14:14:45.157

这是因为您将 Height 声明为`new`. 通过将其声明为`new`，派生不会覆盖高度，它只是隐藏它。这与初始化程序无关。

这意味着新实现与接口声明的虚拟属性没有任何关系，它恰好具有相同的名称，因此“隐藏”了它。通过调用 Height over `IHasHeight`（在您访问具有该类型的字段的`Show()`方法中），接口声明的属性被调用，该属性在. 如果您通过 type 的引用调用它，您只会得到。`PrintHeightService``Default``Derived.Height``Derived`

您可以自己查看：将`d`示例 1 中的变量类型更改为`Default`or `IHasHeight`，您将看到您也将得到 150。

如果你真的想覆盖`Height`in`Derived`

*   声明`Height`为`virtual`in`Default`然后
*   声明`Height`为`override`_`Derived`
*   并删除`new`修饰符。

# silverlight - Silverlight，使用 PagedCollectionView 添加然后删除实体时 Dataform 出现错误？

> ID：10317288
> 
> 赞同：0
> 
> 时间：2012-04-25T13:59:39.160
> 
> 标签：silverlight, ria, dataform, pagedcollectionview

我在具有 MVVM 模式（和“简单的 mvvm 工具包”）和 RIA 服务（以及服务器端的 EntityFramework）的视图上使用 silverlight 4 数据表单。

我的数据表单绑定到 viewModel 上的 PagedCollectionView。逻辑上下文是“一个 'Region' 有 * 'Territories' 并且一个 'Territory' 链接到一个 'Region'”（我在 Nothwind 数据库上重新创建了原始问题来解释它）。

```
 <toolkit:DataForm Name="DataForm"
                              ItemsSource="{Binding RegionTerritories}" 
                              CurrentItem="{Binding TerritorySelected, Mode=TwoWay}"
                              AutoGenerateFields="True" 
                              AutoEdit="True"
                              AutoCommit="False"
                              IsReadOnly="False"
                              Margin="0,10,0,0" EditEnded="DataForm_EditEnded" 
                              DeletingItem="DataForm_DeletingItem" AddingNewItem="DataForm_AddingNewItem"
                              CurrentItemChanged="DataForm_CurrentItemChanged" /> 
```

我的视图模型的代码在 pagedCollectionView 上加载实体：

```
this.RegionTerritories = new PagedCollectionView(this.CurrentRegion.Territories.ToList());                
            this.RegionTerritories.CollectionChanged += new System.Collections.Specialized.NotifyCollectionChangedEventHandler(RegionTerritories_CollectionChanged); 
```

我通过监听“CollectionChanged”事件来观察 PagedCollectionView 上的更改以更新我的 DomainContext（通过“serviceAgent”）：

```
private void RegionTerritories_CollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
    {
        switch (e.Action)
        {
            case NotifyCollectionChangedAction.Add:
                foreach (var item in e.NewItems)
                {
                    Territory territory = item as Territory;
                    if (territory != null)
                    {
                        this.regionServiceAgent.InitializeNewTerritoryAndAddToDomainContext((Territory)item);
                        territory.Region = this.CurrentRegion;
                        this.CurrentRegion.Territories.Add(territory);                            
                    }
                }
                break;
            case NotifyCollectionChangedAction.Remove:
                foreach (var item in e.OldItems)
                {
                    Territory territory = item as Territory;
                    if (territory != null)
                    {
                        if (this.CurrentRegion.Territories.Contains<Territory>(territory))
                        {
                            this.regionServiceAgent.MarkForDeleteTerritory(territory);
                            this.CurrentRegion.Territories.Remove(territory);                               

                        }
                    }
                }
                break;
            //case NotifyCollectionChangedAction.Replace:
            //    break;
            //case NotifyCollectionChangedAction.Reset:
            //    break;
        }
    } 
```

这是我的问题：如果“this.CurrentRegion.Territories”为空（不存在任何领土），并且如果我添加一个项目然后直接取消它，取消操作会让我按预期传递“case NotifyCollectionChangedAction.Remove:” . 一切正常，直到'this.CurrentRegion.Territories.Remove(territory);' 这行代码创建了一个“System.Windows.Controls.Data.DataForm.Toolkit 上发生'System.NullReferenceException'”。异常附加在 "this.RaiseDataMemberChanged("RegionID");" 上 当“领土”实体进行内部更新时：。

```
 /// <summary>
    /// Obtient ou définit la valeur « RegionID ».
    /// </summary>
    [DataMember()]
    [RoundtripOriginal()]
    public int RegionID
    {
        get
        {
            return this._regionID;
        }
        set
        {
            if ((this._regionID != value))
            {
                this.OnRegionIDChanging(value);
                this.RaiseDataMemberChanging("RegionID");
                this.ValidateProperty("RegionID", value);
                this._regionID = value;
                this.RaiseDataMemberChanged("RegionID"); // THIS CAUSE DATAFORM FAIL !!
                this.OnRegionIDChanged();
            }
        }
    } 
```

奇怪的是，如果“this.CurrentRegion.Territories”一开始不是空的，那么一切都可以正常工作......

我做错了什么？

代码详情解决方案下载链接：

[https://skydrive.live.com/redir.aspx?cid=e41cfc4c2d6196d4&resid=E41CFC4C2D6196D4!252&parid=E41CFC4C2D6196D4!215&authkey=!AALulK7qBi40vJk](https://skydrive.live.com/redir.aspx?cid=e41cfc4c2d6196d4&resid=E41CFC4C2D6196D4!252&parid=E41CFC4C2D6196D4!215&authkey=!AALulK7qBi40vJk)

启动解决方案，转到“区域”页面，然后单击列表中最后一项的按钮（区域等于 0）。然后单击数据窗体的子窗口上的取消。这应该会使错误出现。

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T07:38:16.160

这个答案帮助我解决了这个问题： [如何将过滤器应用于 PagedCollectionView 但防止 CollectionChanged 事件在编辑时触发？](https://stackoverflow.com/questions/6265792/how-to-apply-a-filter-to-a-pagedcollectionview-but-prevent-collectionchanged-eve)

解决方法是不监听PagedCollectionView的CollectionChanged事件，而是监听PagedCollectionView.SourceCollection的CollectionChanged事件。

所以代码变成：

```
ObservableCollection<Territory> territories = new ObservableCollection<Territory>(this.CurrentRegion.Territories);
this.RegionTerritories = new PagedCollectionView(territories);
territories.CollectionChanged += new System.Collections.Specialized.NotifyCollectionChangedEventHandler(RegionTerritories_CollectionChanged); 
```

感谢科比的帮助，感谢 Stackoverflow！

# sql - 是否可以检索 varchar(n) 列的最大声明大小？

> ID：10317293
> 
> 赞同：1
> 
> 时间：2012-04-25T13:59:52.160
> 
> 标签：sql, informix

假设你有一个这样的数据库表：

```
Table t
....
column_a     integer
column_b     varchar(255)
.... 
```

现在，我想存储一个由 t.column_b 上的名称列表组成的字符串，格式如下（用逗号分隔）：

```
Word A, Word B, Word C... 
```

问题是，字符串可能大于 255 个字符，在我的应用程序逻辑中，我不想盲目地修剪到 255，而是存储可能的最大单词数，消除最后一个超过尺寸。另外，我想以这样一种方式进行开发，即如果列改变大小，我不想改变我的应用程序。是否可以编写一个检索列的声明大小的 SQL 查询？或者，我应该使用另一种列类型？

如果相关，我正在使用 Informix。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:09:43.537

1.  除非您的数据库是 MODE ANSI，否则 Informix 会在限制处盲目截断。
2.  DBI 为列定义元数据属性，而 DBD::Informix 实现它们。

    对于语句句柄`$sth`，您可以使用：

    ```
    $sth->{PRECISION}->[0] 
    ```

    获取输出中第一列的精度（长度）。

请参阅`perldoc DBI`“语句句柄属性”下。

如果您需要知道某个列的类型信息，请编写一个 SELECT 语句，准备它，然后分析语句句柄。

因为这是由 DBI 定义的，所以任何驱动程序 (DBD::YourDBMS) 都会获得相同的行为。

# c# - 在 WPF 的 Image 容器中显示图像

> ID：10317298
> 
> 赞同：0
> 
> 时间：2012-04-25T14:00:04.283
> 
> 标签：c#, sql, wpf

我正在尝试在 WPF Image 容器中显示图像

```
string imageContent = ((DataRowView)dgQuestions.SelectedItem)["QuestionImage"].ToString();
if (imageContent.Length >= 5)
{
    byte[] data = (byte[])((DataRowView)dgQuestions.SelectedItem)["QuestionImage"];
    ImageSourceConverter imgConv = new ImageSourceConverter();
    imageSource = (ImageSource)imgConv.ConvertFromString(data.ToString());
} 
```

上述代码的最后一行产生以下错误

> 你调用的对象是空的

我不关心数据网格如何显示图像，因为用户永远不会看到它。

这就是我填充网格的方式：

```
SqlCommand cmd = new SqlCommand();
cmd.Connection = Con;
cmd.CommandText = "getQuizQuestions";
cmd.CommandType = CommandType.StoredProcedure;
cmd.Parameters.Add(new SqlParameter("@quizid", SqlDbType.Int)).Value = quizId;
cmd.ExecuteNonQuery();
SqlDataAdapter daSubject = new SqlDataAdapter(cmd);
DataSet dsSubject = new DataSet();
daSubject.Fill(dsSubject, "QuizSubject");
dgQuestions.ItemsSource = dsSubject.Tables[0].DefaultView; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:11:46.887

设置断点并验证数据不为空。另外，为什么不将图像源设置为 byte[] 而不是使用 ToString()：

```
public BitmapImage ImageFromBuffer(Byte[] bytes)
{
    MemoryStream stream = new MemoryStream(bytes);
    BitmapImage image = new BitmapImage();
    image.BeginInit();
    image.StreamSource = stream;
    image.EndInit();
    return image;
}

public Byte[] BufferFromImage(BitmapImage imageSource)
{
    Stream stream = imageSource.StreamSource;
    Byte[] buffer = null;
    if (stream != null && stream.Length > 0)
    {
        using (BinaryReader br = new BinaryReader(stream))
        {
            buffer = br.ReadBytes((Int32)stream.Length);
        }
    }

    return buffer;
} 
```

# html - 无法为移动设备获得响应式右对齐

> ID：10317299
> 
> 赞同：0
> 
> 时间：2012-04-25T14:00:20.170
> 
> 标签：html, css, mobile, twitter-bootstrap, responsive-design

为什么我的引导代码不能缩小到移动设备？

```
<div class="navbar navbar-fixed-bottom">
   <div class="navbar-inner">
        <div class="container">
            <form action="" class="navbar-search pull-right">
                <a href="#" class="btn btn-success">
                    <i class="icon-shopping-cart icon-white"></i> Checkout
                </a>
            </form>
        </div>
    </div>
</div>​ 
```

在我的电脑上，我必须向右滚动。

请参阅此处运行的代码：http: [//jsfiddle.net/nVw2V/](http://jsfiddle.net/nVw2V/)

**我怎样才能让它右对齐到移动设备？**

感谢所有信息

仅供参考：我通过调整浏览器窗口的大小并在 Android 模拟器中运行 [via PhoneGap] 进行了测试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:12:45.603

您需要将`bootstrap-responsive.css`样式表与引导样式表一起包含以涵盖移动设备。

只需在 bootstrap.css 样式表声明“之后”包含以下内容：

[http://twitter.github.com/bootstrap/assets/css/bootstrap-responsive.css](http://twitter.github.com/bootstrap/assets/css/bootstrap-responsive.css)

演示：http: [//jsfiddle.net/nVw2V/1/](http://jsfiddle.net/nVw2V/1/)

# php - 随机代码生成器 (Php) 的安全性如何？我的会被“黑”吗？

> ID：10317303
> 
> 赞同：0
> 
> 时间：2012-04-25T14:00:29.407
> 
> 标签：php, random, code-generation

我有一个系统设置来生成随机代码。它创造了成千上万的人：

```
function createRandomPassword() {
    $chars = "abcdefghijklmnopqrstuvwxyz0123456789";

    srand((double)microtime()*1000000);
    $i = 0;
    $pass = '' ;
    while ($i <= 7) {
        $num = rand() % 33;
        $tmp = substr($chars, $num, 1);
        $pass = $pass . $tmp;
        $i++;
    }
    return $pass;
} 
```

基本上这个函数用于循环并给我我想要的结果数量。但是，非常重要的是，没有人可以获取少量这些代码并想办法从给定的公式或其他东西中预测更多的代码。我目前的系统可以做到这一点吗？或者有没有办法让我当前的系统更安全，以防止人们预测更多的代码？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:17:22.520

我怀疑人们可以轻松预测生成更多这些代码的方法，除非他们当然有您的 php 代码。

您可以将有效代码存储在数据库中，并通过检查它是否存在于“valid_codes”表中来检查输入的代码是否是您生成的代码。

或者....

我可能会尝试在 $pass 代码中添加一个验证字符串，以便您可以在用户输入密码后检查该代码是否确实是有效代码（由您生成）。

例如，这将在 $pass 的末尾添加一个 6 字符的验证字符串：

```
function createRandomPassword() {
    $chars = "abcdefghijklmnopqrstuvwxyz0123456789";

    srand((double)microtime()*1000000);
    $i = 0;
    $pass = '' ;
    while ($i <= 7) {
        $num = rand() % 33;
        $tmp = substr($chars, $num, 1);
        $pass = $pass . $tmp;
        $i++;
    }

    // NEW STUFF HERE
    $salt = 'my_secret_salt';
    // generate an md5 of $pass + our salt
    $verification_md5 = md5($pass . $salt);
    // $verification_code = the first 6 characters of that md5
    $verification_code = substr($verification_md5, 0, 6);

    $pass = $pass . $verification_code;

    return $pass;
} 
```

然后，当有人输入您的代码时，您可以通过检查 md5() 的前 6 个字符 + 他们输入的代码的盐（当然减去最后 6 个字符）来检查这是否是“有效”代码。

# github - 如何从 GitHub 中删除分支？

> ID：10317304
> 
> 赞同：10
> 
> 时间：2012-04-25T14:00:30.287
> 
> 标签：github

我看到以前的帖子问过这个问题，但没有一个可以为我解决这个问题。我不通过命令行使用 Git，我使用它是因为它已集成到 Xcode 中。我创建了一个分支并推送到 GitHub，现在我想删除它。我在 Xcode 中删除了它，但它仍然在 GitHub 上。GitHub 的指示说只需转到 Admin 并删除 repo，但它说它将删除整个项目，而不仅仅是分支。那么我错过了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-25T14:07:28.843

你想删除github 上的一个*分支？*做就是了

```
$ git push origin :branch-name 
```

您必须`origin`用远程存储库`branch-name`的名称和要在 github 上删除的分支的名称替换。

**编辑：**注意分支名称前面的冒号，这很重要。

**编辑2：**更详细：

```
$ cd /path/to/local/git/checkout
$ git remote -v show 
```

从与要删除分支的 github URL 对应的第一列中选​​择远程名称。我这里叫它 `origin`。`branch-name`是要删除的分支的名称。删除它使用：

```
$ git push origin :branch-name 
```

**编辑 3：**如果你想了解 git，我可以推荐 Scott Chacon 的免费书籍。相关部分在[这里](http://progit.org/book/ch3-5.html#deleting_remote_branches)。

# asp.net-mvc - 模型绑定可编辑整数列表

> ID：10317310
> 
> 赞同：0
> 
> 时间：2012-04-25T14:00:46.990
> 
> 标签：asp.net-mvc, model-binding

我有一个看起来像这样的视图：

```
@model List<int>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

@using (Html.BeginForm())
{
<ul>
@{int counter = 0;}
@foreach (var i in Model)
{
    <li>@Html.TextBoxFor(m => m[counter])</li>
    counter++;
}
</ul>
} 
```

我的问题是生成的html看起来像这样......

```
 <li><input name="[0]" type="text" value="1" /></li>
etc.. etc... 
```

当我回发到控制器时，表单名称不会绑定到我的控制器。关于如何修复它的任何想法（可能是前缀或其他东西？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:37:06.627

前段时间我遇到了同样的问题，这是我的解决方案（解决方法？）

您可以在视图中使用此代码来生成表单：

```
@Html.TextBox("number[" + counter + "]", i) 
```

并在您的控制器中使用`List<int> number`参数定义操作

```
public ActionResult Index(List<int> number) { ... } 
```

我从来没有试图找出为什么简单的解决方案不起作用，但我想，模型绑定器需要一些属性名称才能使用。

# excel - 查找数字所属的范围

> ID：10317312
> 
> 赞同：1
> 
> 时间：2012-04-25T14:01:01.140
> 
> 标签：excel

我已经编写了一个函数来根据评分表计算学生获得的**MARK 。**为什么我的功能只适用于 A 标记？

这就是excel表的样子

```
COLUMN:    A      B      C      
        Student  SCORE  MARK
    1    adsf     90     A
    2    asgfd    89     FALSE     

    3     A       90    100
    4     B       81    89
    5     C       71    80
    6     D       61    70
    7     E        56   60
    8     Fx       0    55 
```

这是功能：

```
{=IF(B1>=$B$3:$B$8,IF(B1<=$C$3:$C$8,$A$3:$A$8))} 
```

我将 {} 括号用于数组函数。（CTRL SHIFT 回车）

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T14:29:07.563

您走在正确的轨道上，但您的公式返回的是一个数组而不是单个值。将结果包装在 LOOKUP 中应该会得到所需的结果：

```
=LOOKUP("Z",IF(B1>=$B$3:$B$8,IF(B1<=$C$3:$C$8,$A$3:$A$8)) 
```

这将返回最后匹配的成绩，因为“Z”大于范围内的任何其他文本值。

一个更简单的方法是：

```
=LOOKUP(-B1,-C$3:C$8,A$3:A$8) 
```

需要负号，以便查找值按升序排列。

# windows-mobile - 范围内设备的蓝牙通知 (Windows Mobile 6.5)

> ID：10317313
> 
> 赞同：0
> 
> 时间：2012-04-25T14:01:01.550
> 
> 标签：windows-mobile, bluetooth

我进行了广泛的搜索，找不到这样做的方法。不可能吗？

当蓝牙设备（在这种情况下是另一个 WM 设备）进入我的 Windows Mobile 6.5 设备的范围内时，我想收到通知。

我使用了 RequestBluetoothNotifications，它运行良好，但只有以下通知选项：

BTE_CLASS_CONNECTIONS (1)

BTE_CLASS_PAIRING (2)

BTE_CLASS_DEVICE (4)

BTE_CLASS_STACK (8)

范围内的设备没有选项。

看起来我唯一的选择是让后台线程扫描范围内的设备？这种方法确实不理想，因为间隔必须非常短才能有效（每分钟？），并且会耗尽设备的电池。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:29:23.353

我相信移动设备不会这样做，因为移动设备的电池寿命有限。

一直进行蓝牙无线电轮询会相对较快地耗尽电池电量。

# android - 如何将文本视图放在日期选择器之上

> ID：10317314
> 
> 赞同：0
> 
> 时间：2012-04-25T14:01:01.970
> 
> 标签：android, datepicker, textview, scrollview, android-linearlayout

我正在尝试构建一个带有文本视图和日期选择器的表单，例如：|日期：| |日期选择器在这里| 问题是我认为我的代码与开发人员指南“相同”，但它不起作用。它总是以这样的方式结束：|日期：datePickerHere|

继承人的代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/scrollView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

    <LinearLayout android:layout_width="fill_parent"
        android:layout_height="wrap_content">

        <TextView android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="15sp"
            android:text="@string/data_label"/>

        <DatePicker
            android:id="@+id/data"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
    </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:02:49.303

改变

```
 <LinearLayout android:layout_width="fill_parent"
        android:layout_height="wrap_content"> 
```

到

```
 <LinearLayout android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"> 
```

如果您不指定“android:orientation”标签，线性布局将默认为水平方向。您必须将其指定为垂直才能实现您想要的

# asp.net-mvc - ASP.NET MVC：Facebook C# SDK 5.4.1 注销

> ID：10317316
> 
> 赞同：0
> 
> 时间：2012-04-25T14:01:12.550
> 
> 标签：asp.net-mvc, facebook, asp.net-mvc-3, facebook-c#-sdk

我知道这似乎是关于该主题的另一个帖子，但其他帖子对我没有帮助。

我正在尝试通过 c# SDK（版本 5.4.1）从我的网站上注销我的 facebook 用户，但我找不到关于如何执行此操作的任何线索。我只发现如何使用以前的版本或 javascript 注销（我不想要）来做到这一点。我也看过这篇文章[Cannot Logout of Facebook with Facebook C# SDK](https://stackoverflow.com/questions/6394223/cannot-logout-of-facebook-with-facebook-c-sharp-sdk)但我不知道如何通过 C# SDK 获取访问令牌，我什至不知道这种方法是否确实有效。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T21:26:56.970

导航`https://www.facebook.com/logout.php?access_token=....&next=...`

确保您的下一个网址不是任何随机网址，而是作为网站网址一部分的网址。

# c# - 无法使用 sqlcommand 和参数进行更新

> ID：10317323
> 
> 赞同：0
> 
> 时间：2012-04-25T14:01:36.267
> 
> 标签：c#, asp.net, sql, sqldatasource

当我使用参数时，我在更新我的 sql server 2005 数据库时遇到了一些麻烦。在这里您可以看到通常必须工作的代码。我准确地说我已经进行了其他处理，例如插入，并且它运行良好。

```
myCommand.Parameters.AddWithValue("@Pk", this.pk);
myCommand.Parameters.AddWithValue("@Titre", this.titre);
myCommand.CommandText = "Update Action set titre=@Titre where pk=@Pk";

//Execute la commande
myCommand.ExecuteNonQuery(); 
```

编辑：当我使用硬代码时，例如：

```
myCommand.CommandText = "Update Action set titre='title' where pk=@Pk"; 
```

有用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:47:41.863

当您忘记包含“CommandType”参数时，我看到了奇怪的结果。由于您使用内联 SQL，因此应将其设置为“CommandType.Text”。

```
myCommand.Parameters.AddWithValue("@Pk", this.pk);
myCommand.Parameters.AddWithValue("@Titre", this.titre);
myCommand.CommandText = "Update Action set titre=@Titre where pk=@Pk";

// Added CommandType //
myCommand.CommandType = CommandType.Text;

//Execute la commande
myCommand.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T16:04:17.420

我不知道你哪里出错了这是我的工作代码

`string strCon = @"Data Source=SYSTEM19\SQLEXPRESS;Initial Catalog=TransactionDB;Integrated Security=True";`

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            SqlConnection cn = new SqlConnection(strCon);
            SqlCommand cmd = new SqlCommand("select * from tblTransaction1", cn);
            SqlDataAdapter da = new SqlDataAdapter();
            da.SelectCommand = cmd;
            DataSet ds = new DataSet();
            da.Fill(ds);
            for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
            {
                txtName.Text = ds.Tables[0].Rows[i]["FirstName"].ToString();
                txtName1.Text = ds.Tables[0].Rows[i]["LastName"].ToString();
            }
        }
    } 
```

按钮点击代码

```
protected void btnInsert_Click(object sender, EventArgs e)
{
    SqlConnection cn = new SqlConnection(strCon);
    obj1.FirstName = txtName.Text;
    obj1.LastName = txtName1.Text;
    if (obj1.upDate(cn))
    {

    }
} 
```

示例类代码文件

```
private bool m_flag = false;
        private string strFirstName;
        private string strLastName;

        public string FirstName
        {
            get { return strFirstName; }
            set { strFirstName = value; }
        }

        public string LastName
        {
            get { return strLastName; }
            set { strLastName = value; }
        }

public bool upDate(SqlConnection con)
    {
        SqlCommand cmd = new SqlCommand();
        cmd.Connection = con;
        if (con.State != ConnectionState.Open)
        {
            con.Open();
        }

        try
        {
            cmd.Parameters.AddWithValue("@Fname", FirstName);
            cmd.Parameters.AddWithValue("@Lname", LastName);
            cmd.CommandText = "Update tblTransaction1 set LastName=@Lname where FirstName=@Fname";
            if (cmd.ExecuteNonQuery() > 0)
            {
                m_flag = true;
            }
        }
        catch
        {

        }
        return m_flag;
    } 
```

示例图像

![使用来自 SQL 的数据的表单](../Images/155abe21c3770f6c734454b8c2a71711.png)

![更新前的数据库数据](../Images/05da927f8793eecb5222d44073d0d343.png)

![更改姓氏](../Images/8eb110279d3646d876d1f08dfee0b4c8.png)

![更新后](../Images/cd0eccc075d3894a910b195b213abf25.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-17T14:52:24.087

我注意到将整个代码复制到一个新项目中会有所帮助。我遇到过很多次我的代码可以工作，然后第二天就不行了，或者只为别人而不是我工作。通常这是由于在项目中添加和删除代码时项目的设计者造成的。仅仅因为您删除特定代码并不意味着程序可以更新整个类/项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T14:06:40.230

如果你这样做：

```
Int32 rowsAffected = command.ExecuteNonQuery();
Console.WriteLine("RowsAffected: {0}", rowsAffected); 
```

它说什么 ？

还尝试使用架构名称为您的 Action 表添加前缀，例如：

```
myCommand.CommandText = "Update MySchema.Action set titre=@Titre where pk=@Pk"; 
```

因为有时它可以依赖于模式和用户的权限来更新这个模式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T14:53:25.220

你可以试试这个：而不是像那样添加参数

```
myCommand.Parameters.AddWithValue("@Titre", this.titre); 
```

您应该使用数据类型添加它们。

```
myCommand.Parameters.Add(new SqlParameter("@Titre", SqlDbType.VarChar, 50));
myCommand.Parameters["@Titre"].Value = this.titre; 
```

这样，最终的 SQL 将`Update Action set titre='titre'`代替`Update Action set titre=title`. 看看第二个语句中的*滴度*不在引号''内。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-25T15:38:14.570

声明命令后尝试添加参数。

```
myCommand.CommandText = "Update Action set titre=@Titre where pk=@Pk";
myCommand.Parameters.AddWithValue("@Pk", this.pk);
myCommand.Parameters.AddWithValue("@Titre", this.titre);

//Execute la commande
myCommand.ExecuteNonQuery(); 
```

我在这里发现了*类似*（不完全相同）的东西： [http ://forums.asp.net/t/1249831.aspx/1](http://forums.asp.net/t/1249831.aspx/1)

# .net - 从另一个程序调用程序的函数

> ID：10317324
> 
> 赞同：0
> 
> 时间：2012-04-25T14:01:37.010
> 
> 标签：.net, messaging, sip

这个问题与[这个](https://stackoverflow.com/questions/10316660/access-audio-devices-from-wcf-service)有关，如果我没有做那里描述的。
是否可以从另一个程序运行一个程序并在启动后从该运行程序调用一些函数？例如，我可能想从 WCF 服务运行小 Windows 程序，该服务将在 sip 服务器上注册，并且当我需要从服务中询问它以启动对某些号码的呼叫时。那么是否有可能（不运行一些消息传递服务器）以及在哪里可以找到有关如何实现它的信息，如果是的话？
谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:55:02.463

以下是一些常见的方法来做到这一点。

1) 命令行参数。将命令行参数传递给解释这些参数、执行某些操作并退出的应用程序

2）进程间通信（IPC）。这指的是允许 2 个进程进行通信的任何技术。有很多方法可以做到这一点，但在 Windows 上使用命名管道是一种常见的方法。有关示例，请参见[http://www.codeguru.com/csharp/csharp/cs_misc/sampleprograms/article.php/c7259/InterProcess-Communication-in-NET-Using-Named-Pipes-Part-1.htm 。](http://www.codeguru.com/csharp/csharp/cs_misc/sampleprograms/article.php/c7259/InterProcess-Communication-in-NET-Using-Named-Pipes-Part-1.htm)

3) 将被调用的应用程序作为网络服务运行，该服务公开包含您要调用的函数的端点。该服务保持运行并接受网络请求，然后执行该请求并返回结果。

4）控制台标准输入和标准输出重定向（不确定是否有更好的名称）。这是 (1) 的变体，其中（仅控制台）应用程序仍在运行，但调用应用程序控制控制台应用程序的标准输入和标准输出，因此可以与之交互。（实际上，它可以在控制台中输入内容并读取写入控制台的内容）。

# wpf - 带有用户控件和打印的 WPF 内存使用情况

> ID：10317328
> 
> 赞同：0
> 
> 时间：2012-04-25T14:02:02.047
> 
> 标签：wpf, memory, user-controls

这是我必须在 WPF 中打印文档的代码片段。在高层次上，我实例化了一个 UserControl，然后将它发送到打印机。

```
 var printQueue = GetQueues().Where(t => t.Name == comboBox1.SelectedItem.ToString()).FirstOrDefault();
        var defaultPrintTicket = printQueue.DefaultPrintTicket.Clone();
        var newTicket = ModifyPrintTicket(defaultPrintTicket, "psk:JobInputBin",
                                          ((PrintTrays)listBox1.SelectedItem).ConfigValue);

        var xpsWriter = PrintQueue.CreateXpsDocumentWriter(printQueue);

        var controlToPrint = new PackingSlip();
        var fixedDoc = new FixedDocument();
        var pageContent = new PageContent();
        var fixedPage = new FixedPage();

        fixedPage.Children.Add(controlToPrint);
        ((System.Windows.Markup.IAddChild)pageContent).AddChild(fixedPage);
        fixedDoc.Pages.Add(pageContent);
        xpsWriter.Write(fixedDoc, newTicket); 
```

我想知道的是，随着时间的推移，我将创建数百个`controlToPrint`. 我会在这里遇到内存问题，还是会以某种方式自动处理掉它们？如果它们没有自动处理，我将如何释放该内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:12:28.590

假设 fixedDoc、fixedPage、pagecontent 和 controlToPrint 在方法结束时超出范围，它们将被自动处理。如果应用程序根持有对任何这些对象的任何引用，那么您将获得内存泄漏

# mysql - 如果“SELECT fieldname INTO var”返回 0 行，存储过程将停止

> ID：10317332
> 
> 赞同：2
> 
> 时间：2012-04-25T14:02:14.827
> 
> 标签：mysql, sql, stored-procedures, percona

我正在运行一个存储过程，并且遇到了以下行的问题：

```
SELECT photo_data_id 
  INTO gallery_rel_id_check 
  FROM photo_data 
 WHERE object_type = 4 
   AND data_id = 0 
   AND photo_id = row_photo_id LIMIT 1; 
```

在某些情况下，此查询将返回 0 行，因此 gallery_rel_id_check 不会获得分配给它的值。

出于某种奇怪的原因，这似乎停止了存储过程。我是否应该以不同的方式分配gallery_rel_id_check，因为我需要稍后在程序中使用它来检查它是否> 0

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:11:56.550

如果查询不返回任何行，您可以声明一个 continue 处理程序以将 gallery_rel_id_check 显式设置为适当的值。

例如：

```
DECLARE CONTINUE HANDLER FOR NOT FOUND SET gallery_rel_id_check = -1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:44:09.653

归功于@Paolo Bergantino

只需使用：

SET gallery_rel_id_check = (SELECT...);

# asp.net - 排除文件关于表单提交

> ID：10317333
> 
> 赞同：1
> 
> 时间：2012-04-25T14:02:15.070
> 
> 标签：asp.net, html, forms, post, action

我有一个网络表单应用程序。

有一个表单有一组文本框和一个上传者，一个**“上传按钮”**和一个“提交按钮”。

当用户使用上传器（type='file'）选择文件而没有点击“上传”或忘记点击时，他会提交表单。

服务器端会以某种方式将文件读取到某个地方。

我不希望提交包含所选文件。

除了在提交功能中添加“清理上传者”之外，我还能做些什么来让表单排除输入（类型=文件）控件？

谢谢

标签 [html][form][action][post]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:07:15.950

在表单上使用`input type="file"`时，您还必须`enctype="multipart/form-data"`在表单标签中包含以便处理文件。如果您不想将文件发送到服务器，只需删除`enctype="multipart/form-data"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:07:31.447

你可以`disable`输入，它不会被提交到服务器。

此外，您可以确保[表单没有设置 enctype="multipart/form-data"](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T12:28:07.647

回答我自己

表单中的提交按钮将提交文件。

不管服务器端代码。

有时用户可能会忘记“上传文件”或转到另一个选项，而上传程序处于活动状态并保存文件。

在这种情况下，我们应该清理或说“删除”上传器中的文件。

唯一的解决方案是使用 JavaScript（如果我错了，请告诉我）。

考虑到 html 上传器的特殊性，你无法控制“值”或“文本”

相反，我发现了以下两种方法：

[http://gusiev.com/2009/04/clear-upload-file-input-field/](http://gusiev.com/2009/04/clear-upload-file-input-field/)

[http://aspnetupload.com/Clear-HTML-File-Input.aspx](http://aspnetupload.com/Clear-HTML-File-Input.aspx)

测试两者都工作得很好。

# powershell - 使用 PowerShell 从拆分路径中获取文件的最低级目录名称

> ID：10317335
> 
> 赞同：47
> 
> 时间：2012-04-25T14:02:19.860
> 
> 标签：powershell

我只需要获取文件路径名的最后一部分。

例子：

```
c:\dir1\dir2\dir3\file.txt 
```

我需要`dir3`进入一个变量。

我一直在尝试`Split-Path`，但它给了我整条道路。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-04-25T14:58:43.867

这需要两次调用`Split-Path`AFAICT：

```
PS> Split-Path (Split-Path c:\dir1\dir2\dir3\file.txt -Parent) -Leaf
dir3 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-06-27T08:16:39.017

这个问题似乎专门要求拆分路径，但其他一些方法是：

如果文件存在，我发现这样做会更好：

```
(Get-Item c:\dir1\dir2\dir3\file.txt).Directory.Name 
```

如果文件不存在，这将不起作用。在这种情况下，另一种方法是使用 .NET API，例如：

```
$path = [System.IO.Path];
$path::GetFileName($path::GetDirectoryName("c:\dir1\dir2\dir3\file.txt")) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-25T15:56:15.280

如果您想保持简单并且路径将采用正常形式，您可以使用`String.Split()`：

```
"c:\dir1\dir2\dir3\file.txt".split("\")[-2] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-25T16:34:02.177

使用 System.Uri 的另一个选项：

```
PS> ([uri]"c:\dir1\dir2\dir3\file.txt").segments[-2].trim('/')
dir3 
```

如果文件存在于磁盘上：

```
PS> (dir c:\dir1\dir2\dir3\file.txt).directory.name 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-12-30T07:53:16.870

一般来说，如果你想要你所在目录的名称，我使用了这个（感谢 Shay Levi 的最初想法）：

PS> (dir).directory.name[0]

# php - mysqli multi_query 和 insert_id 让我的命令不同步；

> ID：10317336
> 
> 赞同：0
> 
> 时间：2012-04-25T14:02:20.363
> 
> 标签：php, mysqli, multi-query, insert-id

我知道有人问过类似的问题，我已经尝试了很多（包括 php 文档），但我似乎没有让它工作。

我有以下内容：

```
$query = "insert into page title values ('v1');insert into page title values ('v2');insert into page title values ('v3');"

$mysqlidb->multi_query($query);

$index = 0;
$insertId = $this->db->insert_id;
for($i = $insertId; $i < $insertId + sizeof($pages); $i++) {
    //store ids in some array
} 
```

如果我执行上面的代码，无论我接下来尝试在数据库上做什么，我都会收到“命令不同步；您现在无法运行此命令”错误。

我知道我必须关闭所有结果，问题是我不知道如何。

似乎有结果，因为`$mysqli->more_results()`返回 true 但是如果我然后调用 use_result() 或 store_result() 这些返回 null。我在调用 next_result() 之前和之后都尝试过这样做，它总是为空：

```
while($mysqli->more_results()) {
    //next line returns error, calling close() on null:
  $mysqli->use_result()->close();
  $mysqli->next_result();
} 
```

或者

```
while($mysqli->more_results()) {
  $mysqli->next_result();
  //next line returns error, calling close() on null:
  $mysqli->use_result()->close();

} 
```

请帮助，在执行 multi_query 插入和调用 insert_id 之后如何摆脱“命令不同步；您现在无法运行此命令”。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:25:43.113

```
$values = ('v1' => '','v2' => '','v3' => '');
foreach ($values as $key => $val) {
  $query = "insert into page title values ('$key')";
  $mysqlidb->query($query);
  $values[$key] = $mysqlidb->insert_id;
} 
```

# parsing - 如何将整数转换为文本以在文本字段 java-blackberry 中使用

> ID：10317338
> 
> 赞同：0
> 
> 时间：2012-04-25T14:02:26.060
> 
> 标签：parsing, blackberry

我想在 a 中使用整数值`TextField`。在下面的代码中，我将整数值从表中检索到`textfield3`. 当我使用`getInteger(2)`它时会出错。那么有什么替代方案。如果解析是解决方案（例如`.toString`）如何在这种方法中实现？

```
TextField3 = new TextField("Amount: ",r.getString(2));
add(TextField3); 
```

这正是我想要做的

```
try
{
    //Open or create the database
    Database db = DatabaseFactory.openOrCreate("database1.db");    

    //Retrieval
    Statement statement1 = db.createStatement("SELECT date,name,amount,narration FROM Bills where id='"+TextField00.getText()+"'");
    //This is one text field to accept id value
    statement1.prepare();
    statement1.execute();

    Cursor c = statement1.getCursor();
    Row r;

    while(c.next())
    {
        r = c.getRow();
        TextField5 = new TextField("Date: ",r.getString(0));
        add(TextField5); 

        TextField2 = new TextField("Customer Name: ",r.getString(1));
        add(TextField2);

        TextField3 = new TextField("Amount: ",r.getString(2));
        add(TextField3);

        TextField4 = new TextField("Narration: ",r.getString(3));
        add(TextField4);
    }

    //statement1.prepare();
    //statement1.execute();       
    statement1.close(); 
    db.close();
}
catch( Exception e ) 
{         
    System.out.println( e.getMessage() );
    e.printStackTrace();
} 
```

希望对您的理解有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T16:23:24.253

试试这条线

```
TextField3 = new TextField("Amount: ", r.getInteger(2) + ""); 
```

代替

```
TextField3 = new TextField("Amount: ",r.getString(2)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T22:08:23.497

您可以使用`java.lang.Integer.toString()`：

```
TextField3 = new TextField("Amount: ", Integer.toString(r.getInteger(2))); 
```

# java - Java ant jar 任务和类路径问题

> ID：10317339
> 
> 赞同：2
> 
> 时间：2012-04-25T14:02:26.433
> 
> 标签：java, ant, classpath

### - - - - -编辑 - - -

所以我现在意识到我的错误源于命令行启动，而不是通过单击它们来启动 jar。本质上，如果我从任何文件夹运行 jar，但它们实际驻留在的文件夹中，那么我的资源被错误地引用。如果我从同一个文件夹执行命令行，这个问题就会消失。所以问题变成了我可以做些什么来相对引用 jar 和资源，而不管从哪里调用执行？

### - - - - 编辑 - - -

我在尝试构建一个用于分发的项目时遇到了几个问题。项目结构是这样的，我有 6 个包。每个包分为两个子包 Gui 和 Engine。每个子包都有一个可运行的主类。“Common”包是其他包的包装器，并启动任何被选中的包。我的目标是将每个包打包成独立的，用于引擎方面。这用于引擎的命令行测试。“Common” jar 与所有资源放在一起并运行整个应用程序。

我的问题源于需要清理项目。所以重构和重新打包正在进行，但是目前用于构建和 jar 项目的方法是一个批处理脚本，它将类文件（考虑包/文件夹结构）复制到最终文件夹位置。从那里创建 jars 命令行，并在清单文件中概述类路径和主类。这工作得很好，罐子用正确的结构和类路径编译，一切运行正常。然而，保持 xcopy 命令正确是一件很痛苦的事情，因为它需要更改为包结构更改为的任何内容，以及取决于谁在构建项目的位置。

所以我的解决方案是为 netbeans 使用 build.xml 和大纲 ant 构建。这将尊重任何项目结构更改并将构建保留在 netbeans 内部。我遇到的确切问题是，无论使用哪种构建方法。（批处理/构建脚本）我使用任何一种方法都可以在 jar 中获得确切的文件夹结构，并且类路径完全相同。我的 common.jar 适用于该项目，但我的引擎测试 jar 遇到类路径或参考问题。我将包含大部分 ant 脚本、批处理文件和使用的清单文件。

批处理文件

```
xcopy /Y C:\Users\tfollansbee\Documents\NetBeansProjects\Emerson\branches\Merge\build\classes\Common  C:\Emerson\Common\
xcopy /Y C:\Users\tfollansbee\Documents\NetBeansProjects\Emerson\branches\Merge\build\classes\Common\gui C:\Emerson\Common\gui\
xcopy /Y C:\Users\tfollansbee\Documents\NetBeansProjects\Emerson\branches\Merge\build\classes\Common\Meg C:\Emerson\Common\Meg\

xcopy /Y C:\Users\tfollansbee\Documents\NetBeansProjects\Emerson\branches\Merge\build\classes\Pressu re C:\Emerson\Pressure\
xcopy /Y  C:\Users\tfollansbee\Documents\NetBeansProjects\Emerson\branches\Merge\build\classes\Pressure\Gui C:\Emerson\Pressure\Gui\
xcopy /Y  C:\Users\tfollansbee\Documents\NetBeansProjects\Emerson\branches\Merge\build\classes\Pressure\Meg C:\Emerson\Pressure\Meg\

xcopy /Y C:\Users\tfollansbee\Documents\NetBeansProjects\Emerson\branches\Merge\build\classes\PressureV2 C:\Emerson\PressureV2\
xcopy /Y C:\Users\tfollansbee\Documents\NetBeansProjects\Emerson\branches\Merge\build\classes\PressureV2\Gui C:\Emerson\PressureV2\Gui\
xcopy /Y C:\Users\tfollansbee\Documents\NetBeansProjects\Emerson\branches\Merge\build\classes\PressureV2\Gui\controller C:\Emerson\PressureV2\Gui\controller
xcopy /Y C:\Users\tfollansbee\Documents\NetBeansProjects\Emerson\branches\Merge\build\classes\PressureV2\Gui\models C:\Emerson\PressureV2\Gui\models
xcopy /Y C:\Users\tfollansbee\Documents\NetBeansProjects\Emerson\branches\Merge\build\classes\PressureV2\Gui\rules C:\Emerson\PressureV2\Gui\rules

xcopy /Y C:\Users\tfollansbee\Documents\NetBeansProjects\Emerson\branches\Merge\build\classes\Temp\Gui C:\Emerson\Temp\Gui\
xcopy /Y C:\Users\tfollansbee\Documents\NetBeansProjects\Emerson\branches\Merge\build\classes\Temp\Meg C:\Emerson\Temp\Meg\

xcopy /Y C:\Users\tfollansbee\Documents\NetBeansProjects\Emerson\branches\Merge\build\classes\rfdFlow\Gui C:\Emerson\rfdFlow\Gui\
xcopy /Y C:\Users\tfollansbee\Documents\NetBeansProjects\Emerson\branches\Merge\build\classes\rfdFlow\Meg C:\Emerson\rfdFlow\Meg\

xcopy /Y C:\Users\tfollansbee\Documents\NetBeansProjects\Emerson\branches\Merge\build\classes\utils C:\Emerson\utils\

"C:\Program Files\Java\jdk1.6.0_25\bin\jar" cvmf mainClass tempAsynch.jar Temp/*
"C:\Program Files\Java\jdk1.6.0_25\bin\jar" cvmf mainClass Common.jar Common/*
"C:\Program Files\Java\jdk1.6.0_25\bin\jar" cvmf pressureClass Pressure.jar Pressure/*
"C:\Program Files\Java\jdk1.6.0_25\bin\jar" cvmf pressureV2Class PressureV2.jar  PressureV2/*
"C:\Program Files\Java\jdk1.6.0_25\bin\jar" cvmf rfdClass rfdFlow.jar rfdFlow/*
"C:\Program Files\Java\jdk1.6.0_25\bin\jar" cvmf pressureV2Class utils.jar utils/*

rmdir /s /q C:\Emerson\Common
rmdir /s /q C:\Emerson\Pressure
rmdir /s /q C:\Emerson\PressureV2
rmdir /s /q C:\Emerson\Temp
rmdir /s /q C:\Emerson\rfdFlow
rmdir /s /q C:\Emerson\utils

xcopy /Y C:\Emerson\Common.jar C:\GCCDEV
xcopy /Y C:\Emerson\tempAsynch.jar C:\GCCDEV
xcopy /Y C:\Emerson\Pressure.jar C:\GCCDEV
xcopy /Y C:\Emerson\PressureV2.jar C:\GCCDEV
xcopy /Y C:\Emerson\rfdFlow.jar C:\GCCDEV
xcopy /Y C:\Emerson\utils.jar C:\GCCDEV 
```

构建脚本

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="Emerson" default="default" basedir=".">
<description>Builds, tests, and runs the project Emerson.</description>
<property environment="env"/>
<property name="baseDir" value="build/classes/" />
<property name="cp" value=" . utils.jar lib/pfcasync.jar lib/poi-3.7/poi-ooxml-schemas-3.7-20101029.jar lib/poi-3.7/poi-3.7-20101029.jar lib/poi-3.7/poi-ooxml-3.7-20101029.jar lib/poi-3.7/ooxml-lib/xmlbeans-2.3.0.jar lib/poi-3.7/ooxml-lib/dom4j-1.6.1.jar lib/xom/xom-1.2.7.jar lib/jgoodies/jgoodies-common-1.3.0.jar lib/jgoodies/jgoodies-binding-2.6.0.jar lib/resources/** Common.jar 
" />
<import file="nbproject/build-impl.xml"/>
<target name="-pre-jar">
    <echo message="-pre-jar" />
    <delete dir="${env.PTC_STD}/lib/" />
    <delete dir="${env.PTC_STD}/resources/" />
    <!--delete dir="${env.PTC_STD}/build/" /-->
    <echo message="aJar" />
    <jar destfile="${env.PTC_STD}/Common.jar" basedir="${baseDir}">
        <manifest>
            <attribute name="Class-Path" value="${cp}" />
            <attribute name="Main-Class" value="Common.gui.emersonWrapper" />
        </manifest>
    </jar>
    <jar destfile="${env.PTC_STD}/tempAsynch.jar" index="false" basedir="${baseDir}" includes="Temp/**">
        <manifest>
            <attribute name="Class-Path" value="${cp}" />
            <attribute name="Main-Class" value="Temp.Meg.tempasynch" />
        </manifest>
    </jar>
    <jar destfile="${env.PTC_STD}/Pressure.jar" index="false" basedir="${baseDir}" includes="Pressure/**">
        <manifest>
            <attribute name="Class-Path" value="${cp}" />
            <attribute name="Main-Class" value="Pressure.Meg.P3051STest" />
        </manifest>
    </jar>
    <jar destfile="${env.PTC_STD}/PressureV2.jar" index="false">
        <fileset dir="${baseDir}">
            <include name="PressureV2/**" />
            <include name="utils/**" />
        </fileset>
        <manifest>
            <attribute name="Class-Path" value="${cp}" />
            <attribute name="Main-Class" value="PressureV2.Gui.PressureV2Main" />
        </manifest>
    </jar>
    <jar destfile="${env.PTC_STD}/rfdFlow.jar" index="false" basedir="${baseDir}" includes="rfdFlow/**">
        <manifest>
            <attribute name="Main-Class" value="rfdFlow.Meg.main" />
            <attribute name="Class-Path" value="${cp}" />
        </manifest>
    </jar>
    <jar destfile="${env.PTC_STD}/utils.jar" index="false" basedir="build/classes/" includes="utils/**">
        <manifest>
            <attribute name="Class-Path" value="${cp}" />
            <attribute name="Main-Class" value="PressureV2.Gui.PressureV2Main" />
        </manifest>
    </jar>
    <copy todir="C:/Emerson/resources/">
        <fileset dir="resources/">
            <exclude name="**/*.svn"/>
        </fileset>
    </copy>
    <copy todir="C:/Emerson/lib/">
        <fileset dir="lib/">
            <include name="**/*.jar" />
            <include name="**/resources/**" />
        </fileset>
    </copy>
</target>
</project> 
```

常见的清单文件。包含的类路径在所有其他清单文件中完全相同

```
Main-Class: Common.gui.emersonWrapper
Class-Path: . utils.jar lib/pfcasync.jar lib/poi-3.7/poi-ooxml-schemas-3.7-20101029.jar lib/poi-3.7/poi-3.7-20101029.jar lib/poi-3.7/poi-ooxml-3.7-20101029.jar lib/poi-3.7/ooxml-lib/xmlbeans-2.3.0.jar lib/poi-3.7/ooxml-lib/dom4j-1.6.1.jar lib/xom/xom-1.2.7.jar lib/jgoodies/jgoodies-common-1.3.0.jar lib/jgoodies/jgoodies-binding-2.6.0.jar lib/resources/** Common.jar 
```

在运行时，jar 都存在于同一个文件夹中，以及一个包含所有引用库 jar 的“lib”文件夹。连同一些图像和一些 xml 数据。我在创建 jar 时注意到的一个区别是批处理文件没有创建索引。最初在我的 ant 脚本中，我有 index="true"，当运行例如 pressure.jar 时，我会得到一个 java.lang.NoClassDefFoundError。我设置了 index="false" 并且我的这些错误消失了，但是在 lib/resources/xml/a.xml 中找不到我的相对路径 xml 文件。所有这一切的真正关键是构建方法之间的差异。我花了两天时间研究了 jar 结构、文件夹结构和类路径。在 build.xml 中，我什至链接到批处理文件中使用的清单文件，但没有成功。一切都一样，所以为什么这些罐子在运行时的行为方式有所不同。我觉得我错过了一个小细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T17:42:21.607

不完全清楚你的问题是什么，所以这是我的观察：

# 管理 jar 类路径清单条目

以下答案演示了如何使用 ANT [manifestclasspath](http://ant.apache.org/manual/Tasks/manifestclasspath.html)任务在可执行 jar 清单中动态构建“Class-Path”属性：

[Ant - 如何在特定文件夹中获取所有文件的名称](https://stackoverflow.com/questions/3796824/ant-how-to-get-all-files-name-in-a-specific-folder/3797767#3797767)

# 管理第 3 方依赖项

如果您的构建管理大量开源 jar，请考虑使用[Apache ivy](http://ant.apache.org/ivy/)插件自动为您下载它们。

你可以做得更好，部署一个像[Nexus](http://www.sonatype.org/nexus/)这样的专用存储库管理器来托管你所有的构建依赖项。

# sonarqube - “复杂性”指标和“复杂性/方法”指标之间的区别

> ID：10317341
> 
> 赞同：10
> 
> 时间：2012-04-25T14:02:38.240
> 
> 标签：sonarqube, cyclomatic-complexity

在声纳中，对于特定的 Java 类，我看到：

```
Complexity:     830

Complexity /method:     8,1 
```

您如何解释这两个指标之间的区别？

“复杂性”是类复杂性吗？

一个类应该处于的最大复杂度是多少？我知道方法复杂度应该小于 10，但是一个类应该符合的最大类复杂度数是多少？

谢谢。

**编辑**

我还查看了文件中的 Cyclomatic-Complexity 规则违规。

对于许多方法，声纳用不同的复杂性数字（法语）说：

“La complexité cyclomatique de la classe est de 28 alors que le maximum autorisé est de 10。”

用英语 ：

“类圈复杂度为 28，但允许的最大值为 10”。

我不明白为什么它说“类圈复杂度”，因为它似乎是“方法圈复杂度”。

此外，所讨论的类不会出现在按平均复杂度/方法排序的最复杂类的顶部，因为声纳说它只有 8,1 平均方法复杂度。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T15:22:25.707

您可以查看我们的“Metric Definitions”Wiki 页面（更具体地说，在[“Complexity”部分](http://docs.sonarqube.org/display/SONAR/Metrics+-+Complexity)）了解更多关于 Sonar 中的指标含义的信息。

*   “复杂度”是资源的总复杂度（对于文件 => 文件中定义的每个类的复杂度之和）
*   “复杂度/方法”是“复杂度”除以文件中找到的方法数
*   ...等等其他指标。

# javascript - 通过 Javascript 以 JSON 格式获取 MongoDB ObjectId

> ID：10317342
> 
> 赞同：1
> 
> 时间：2012-04-25T14:02:39.697
> 
> 标签：javascript, json, mongodb

这是我来自 PHP 的 JSON：

```
{"data" :
    [
        {
            "_id" : {
                "$id" : "4f977259b1445dce24000000"
            },
            "headline" : "asdfasdf",
            "date" : {
                "sec" : 1333584000,
                "usec" : 0
            },
            "text":"asdfasdfas"
        }
    ]
} 
```

在 Javascript 中，我想使用这些值，它可以正常工作

```
obj = JSON.parse(request);
console.log(obj.data[i].headline); 
```

但是我如何获得 ObjectId？

它不像这样工作：

```
console.log(obj.data[i]._id.$id); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:06:18.640

当我尝试它时，它似乎按预期工作[http://jsfiddle.net/2CSWr/](http://jsfiddle.net/2CSWr/)

```
console.log(json.data[0]._id.$id);​ 
```

确实输出正确的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:07:50.967

这对我有用：

```
console.log(obj.data[0]._id['$id']); 
```

# android - 在gridview中显示sdcard子文件夹的图像，并在更改时更新

> ID：10317343
> 
> 赞同：0
> 
> 时间：2012-04-25T14:02:41.153
> 
> 标签：android, gridview, directory, sd-card

大家好，我搜索了很多我的问题，我发现了很多类似问题的帖子，但没有人给我正确的解决方案。我想要的是一个显示 sdcard 文件夹图像的网格视图。我还必须提供拍照的可能性，当返回到 gridview 时，用新图片更新它。

要拍照，我使用以下代码：

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
intent.putExtra(MediaStore.EXTRA_OUTPUT, getImageFileUri());
startActivityForResult(intent, TAKE_PICTURE_ACTIVITY); 
```

其中 getImageFileUri() 是一个函数，它给我一个带有时间戳的图片名称，使用 Environment.getExternalStorageDirectory() 获取 sdcard 路径，并检查文件夹是否存在（如果不存在则创建它）。

目前，我使用光标来获取我的图像：

```
private void displayGallery() {

    // Query params :
    Uri uri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;
    String[] projection = {MediaStore.Images.Media._ID};
    String selection = MediaStore.Images.Media.DATA + " like ? ";
    String[] selectionArgs = {"%Otiama%"};

    // Submit the query :
    mCursor = managedQuery(uri, projection, selection, selectionArgs, null);

    if (mCursor != null) {

        mGridView.setOnItemClickListener(this);
        mGridView.setAdapter(new ImageAdapter(this, mCursor));
    }

    else showToast("Gallery is empty : " + uri.toString());
} 
```

这是我的适配器的 getView ：

```
public View getView(int position, View convertView, ViewGroup parent) {

    ImageView imageView = new ImageView(mContext);

    // Move cursor to current position
    mCursor.moveToPosition(position);

    // Get the current value for the requested column
    int columnIndex = mCursor.getColumnIndexOrThrow(MediaStore.Images.Media._ID);
    int imageID = mCursor.getInt(columnIndex);

    // obtain the image URI
    Uri uri = Uri.withAppendedPath( MediaStore.Images.Media.EXTERNAL_CONTENT_URI, Integer.toString(imageID) );
    String url = uri.toString();

    // Set the content of the image based on the image URI
    int originalImageId = Integer.parseInt(url.substring(url.lastIndexOf("/") + 1, url.length()));
    Bitmap b = MediaStore.Images.Thumbnails.getThumbnail(mContext.getContentResolver(), originalImageId, MediaStore.Images.Thumbnails.MINI_KIND, null);
    imageView.setImageBitmap(b);

    return imageView;
} 
```

这段代码可以工作，但是很慢并且不会更新（不会创建新图片的缩略图），即使我在 onActivityResult() 中再次调用 displayGallery() 函数也是如此。好吧，即使我重新加载应用程序，它也不会更新 >< 。我必须从 Eclipse 再次运行它。

事实上，我想要的是与 ES File Explorer 相同的行为（当你打开一个文件夹时，图片都有一个预览图像，并且它们是异步加载的），我认为它不使用那些*** * 缩略图.

所以我尝试使用位图工厂将图片加载为位图，但即使有几张图片（1-2），我也会立即得到“java.lang.OutOfMemoryError：位图大小超出VM预算”......我想我有调整它们的大小，但如果我这样做，当我加载 20-30 张图片时我不会有同样的错误吗？或者问题是每张图片都超出了预算，所以如果我调整它们的大小，我会避免所有这些错误？

对不起，大帖子，如果有人可以帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:26:01.220

好吧，我回答自己：我以这种方式创建了自己的缩略图：

```
public static Bitmap resizedBitmap(Bitmap bitmap, int newWidth) {

    // Get the bitmap size :
    int width = bitmap.getWidth();
    int height = bitmap.getHeight();
    double ratio = (double)width / (double)height;

    // Compute the thumbnail size :
    int thumbnailHeight = newWidth;
    int thumbnailWidth = (int) ( (double)thumbnailHeight * ratio);

    // Create a scaled bitmap :
    Bitmap scaledBitmap = Bitmap.createScaledBitmap(bitmap, thumbnailWidth, thumbnailHeight, false);

    return scaledBitmap;
} 
```

我不再使用游标来加载我这样进行的缩略图（在 ImageAdapter 中）：

```
public void loadThumbnails() {

    // Init the ArrayList :
    _thumbnails = new ArrayList<ImageView>();
    _imagesNames = new ArrayList<String>();

    // Run through the thumbnails dir :
    File imagesThumbnailsDir = new File(_imagesThumbnailsDirUri.getPath());
    File[] imagesThumbnails = imagesThumbnailsDir.listFiles();
    Arrays.sort(imagesThumbnails);

    // For each thumbnail :
    for(File imageThumbnail : imagesThumbnails)
    {
        // Check if the image exists :
        File image = new File(_imagesDirUri.getPath() + File.separator + imageThumbnail.getName());
        if(image.exists()) {

            ImageView imageView = new ImageView(_context);
            imageView.setImageDrawable(Drawable.createFromPath(imageThumbnail.getAbsolutePath()));

            _thumbnails.add(imageView);
            _imagesNames.add(imageThumbnail.getName());
        }

        // If not, delete the thumbnail :
        else {

            ImageUtils.deleteFile(Uri.fromFile(imageThumbnail));
        }
    }
} 
```

所以我的 ImageAdapter 的 getView 函数听起来像这样：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

    ImageView imageView;
    if (convertView == null) {

        imageView = new ImageView(_context);
        imageView.setLayoutParams(new GridView.LayoutParams(80, 80));
        imageView.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
        imageView.setPadding(5, 5, 5, 5);

    } else {
        imageView = (ImageView) convertView;
    }

    imageView.setImageDrawable(_thumbnails.get(position).getDrawable());

    return imageView;
} 
```

希望能帮助到你..

# c# - 使用 Task Parallel 处理许多任务，多次

> ID：10317349
> 
> 赞同：0
> 
> 时间：2012-04-25T14:02:58.407
> 
> 标签：c#, multithreading, task-parallel-library

这可能不适合这里，如果适合，请随意移动、大喊或辱骂。

我们目前有一个控制台应用程序，它由另一个启动并传入“作业”的 ID，该作业将有多个需要处理的记录。对流程的简单解释是；

```
Starts 50 threads

Gets records to be processed.
if records > 0 see what threads are not still busy and send it some information.
if records = 0 update something else and exit.
Get more records.
Loop. 
```

现在，我希望将其转换为持续运行的“轮询”服务，当有新记录可用时，处理它们。拿我拥有的东西并转换它是相当简单的，但是线程的东西很旧并且可能已经过时了。

我希望重构大部分（如果不是全部）并使用 Task.Parallel 来处理项目。但是，我正在努力获得一个合适的轮询框架，然后处理这些项目，并正在寻找有关如何实现这一目标的建议。

我知道很模糊，但希望足以提供某种输入。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:12:07.603

根据我的经验和这个[msdn](http://msdn.microsoft.com/en-us/library/dd537609.aspx)报价：

> 更高效、更可扩展地使用系统资源。
> 
> 在幕后，任务排队到线程池，该线程池已通过算法（如爬山）进行了增强，该算法可确定并调整线程数以最大限度地提高吞吐量。这使得任务相对轻量级，您可以创建许多任务以启用细粒度并行性。为了补充这一点，采用了广为人知的工作窃取算法来提供负载平衡。

您根本不应该关心有多少任务是一个好数字，或者如何创建一个您对所涉及的线程进行负载平衡的系统。

只需使用：

```
Task.Factory.StartNew(() => DoSomeWork()); 
```

每次你想异步运行某些东西时，它都会在幕后完成所有聪明的工作。

现在，由于您可能会在循环中创建任务，请**格外小心，不要引入许多人（包括我）都有的关闭错误，您可以在****[此处](https://stackoverflow.com/questions/4684320/starting-tasks-in-foreach-loop-uses-value-of-last-item)**查找。

我有一个运行 1 到 500 个任务的 Windows 服务，从来没有遇到过麻烦。

希望这可以帮助，

呸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:21:53.860

如果您要轮询 DB 表中的新记录，更好的方法是在该表上安装一个 INSERT 触发器（也可能还有 UPDATE 和 DELETE 触发器），并在有新记录时向您的服务发送消息插入。

请参阅MSDN 上[的从 SQL Server 向 MSMQ 发布消息。](http://support.microsoft.com/kb/555070/en-us)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T14:21:31.283

“轮询服务”听起来像是一个可观察集合的好例子。有 Rx，一种处理它们的好方法 (http://rxwiki.wikidot.com/101samples)，我认为它使用了 TPL。

# php - php中的分页在多个页面上显示数据

> ID：10317350
> 
> 赞同：2
> 
> 时间：2012-04-25T14:03:11.050
> 
> 标签：php, mysql, pagination, paging

您好我正在尝试在页面上显示我的用户数据

这是我的代码：

```
//Run a query to select all the data from the users table
$perpage = 2;
$result = mysql_query("SELECT * FROM users LIMIT $perpage"); 
```

它确实每页仅显示两个，但我想知道您如何在底部获取链接到您的数据的页码

这是我更新的代码

```
 $result = mysql_query("SELECT * FROM users");  // Let's get the query    
 $nrResults=mysql_num_rows($result); // Count the results    
if (($nrResults%$limit)<>0) {       
 $pmax=floor($nrResults/$limit)+1;  // Divide to total result by the number of query 
// to display per page($limit) and create a Max page    
 } else {     
$pmax=floor($nrResults/$limit); 
}     
$result = mysql_query("SELECT * FROM users LIMIT 2 ".(($_GET["page"]-1)*$limit).", $limit");  
// generate query considering limit    
while($line = mysql_fetch_array( $result )) 
{   
?> 
```

错误

解析错误：语法错误，第 98 行 E:\xampp\htdocs\Admin.php 中的意外 $end

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T14:07:28.063

为了做到这一点，您还需要在 SQL 语句中使用偏移值，所以它是

```
SELECT * FROM users LIMIT $offset, $perpage 
```

例子：

```
SELECT * FROM tbl LIMIT 5,10;  # Retrieve rows 6-15 
```

然后，要将链接放在页面底部，您需要计算总数据，将总数除以每页值以计算出您将拥有多少页。

然后根据用户单击的页面设置偏移值。

希望有帮助！

更新：

意外结束很可能意味着您的代码中有一个额外的右括号 } 导致页面结束，并且后面还有更多代码。查看您的代码并匹配括号以解决该问题。您粘贴的代码示例中还有一些其他问题。

```
$result = mysql_query("SELECT * FROM users" ); //Note if you have a very large table you probably want to get the count instead of selecting all of the data... 
$nrResults = mysql_num_rows( $result ); 
if( $_GET['page'] ) {
  $page = $_GET['page']
} else {
  $page = 1;
}
$per_page = 2;
$offset = ($page - 1) * $per_page; //So that page 1 starts at 0, page 2 starts at 2 etc.
$result = mysql_query("SELECT * FROM users LIMIT $offset,$per_page");
while( $line = mysql_fetch_array( $result ) ) 
{
//Do whatever you want with each row in here
} 
```

希望有帮助

然后，您可以使用 nrResults 数字来确定您将拥有多少页......如果您有 10 条记录并且每页显示 2 条，那么您将有 5 页，因此您可以在每个页面上打印 5 个链接在 URL 中使用正确的页面 #...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:07:11.137

使用请求！[http://php.net/manual/en/reserved.variables.request.php](http://php.net/manual/en/reserved.variables.request.php)

```
if (((isset($_GET['page'])) AND (is_int($_GET['page']))) {
$perpage = $_GET['page'];
}
$result = mysql_query("SELECT * FROM users LIMIT $perpage"); 
```

...

链接[http://yourwebsite.com/userlistforexample.php](http://yourwebsite.com/userlistforexample.php)？**page=3**
或
[http://yourwebsite.com/userlistforexample.php?somethingishere=21&](http://yourwebsite.com/userlistforexample.php?somethingishere=21&) **page=3**

# java - 多页 Tiff 压缩

> ID：10317353
> 
> 赞同：4
> 
> 时间：2012-04-25T14:03:26.160
> 
> 标签：java, tiff

我见过一些关于多页 tiff 的问题和一些关于压缩的问题，但没有一个（我见过）将两者联系起来。[这个问题](https://stackoverflow.com/questions/9539057/convert-java-awt-image-to-tiff-byte-array-with-compression)与我所见过的一样接近，让我非常接近，所以我希望。我进入了提到的 Oracle 论坛主题（它正在谈论一个多页 PDF 到 TIFF 的压缩），我想我已经接近完成代码来执行此操作了。有人可以帮忙吗？我将删除 try/catch 以尝试将其缩短（基本上他们所做的只是在控制台中输出一条消息并返回 false）。

```
 public static boolean CompressedTiff(List<BufferedImage> images, File path)
 {
    if (!path.getParentFile().exists())
         path.getParentFile().mkdirs();
    path.createNewFile();
    ImageOutputStream ios;
         ios = ImageIO.createImageOutputStream(path);

    Iterator<ImageWriter> imageWriters = ImageIO.getImageWritersByFormatName("TIFF");
    ImageWriter writer = (ImageWriter)imageWriters.next();
    writer.setOutput(ios);
    TIFFImageWriteParam writeParam = (TIFFImageWriteParam)writer.getDefaultWriteParam();
    writeParam.setCompressionMode(2);
    writeParam.setCompressionType("LZW"); 
    writer.prepareWriteSequence(null);

    for(int i = 0; i < images.size(); i++)
    {
        ImageTypeSpecifier spec = ImageTypeSpecifier.createFromRenderedImage(images.get(i));
        javax.imageio.metadata.IIOMetadata metadata = writer.getDefaultImageMetadata(spec, writeParam);
        IIOImage iioImage = new IIOImage(images.get(i), null, metadata);
        writer.writeToSequence(iioImage, writeParam);
        images.get(i).flush();//modified after release.

        images.get(i).flush();
        writer.endWriteSequence();
        ios.flush();
        writer.dispose();
        ios.close();
    }
    return true;

} 
```

它在 writer.writeToSequence 的下一次传递中失败，说我需要调用 prepareWriteSequence。我把它改成

```
 writer.prepareWriteSequence(metadata);
 writer.writeToSequence(iioImage, writeParam); 
```

还删除了较早的 writer.prepareWriteSequence(null);

它似乎可以正确导航文件，但是，输出不是任何类型的可渲染 tif。多页或其他。

我已经安装了 JAI，所以如果可以以某种方式使用它来实现压缩图像，那就太好了。我正在使用的生成 TIFF 的代码正在使用它，但我还没有看到任何可以为页面添加压缩的东西。

编辑：我添加了一堆 ios.flush(); ios.close(); 调用 catch 块，它可以防止不可渲染的 TIFF 问题。但是，除了第一个页面之外，它没有添加任何页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T15:25:32.533

如果有帮助，这是我用来修改 TiffImageWriteParam 以设置压缩的代码：

```
try {
    jWriteParam.setCompressionMode(_compression != TiffCompression.NO_COMPRESSION 
                  ? ImageWriteParam.MODE_EXPLICIT : ImageWriteParam.MODE_DISABLED);

    if (_compression != TiffCompression.NO_COMPRESSION) {
        // this code corrects the compression if, say, the client code asked for
        // CCITT but the actual image pixel format was CMYK or some other non-1 bit
        // image type.
        TiffCompression mode = recastToValidCompression(_compression, pf);
        jWriteParam.setCompressionType(getCompressionType(mode));
        TIFFCompressor compressor = getTiffCompressor(mode, jWriteParam, shouldUsePredictor(pf));
        jWriteParam.setTIFFCompressor(compressor);
        if (_compression == TiffCompression.JPEG_COMPRESSION) {
            // Java supports setting to 1.0 (ie 100), but it will not actually do lossless (maybe)
            if (_jpegQuality == 100 && !jWriteParam.isCompressionLossless())
                continue;
            jWriteParam.setCompressionQuality(toJavaJpegQuality());
        }
    }
}
catch (UnsupportedOperationException e)
{
    // this shouldn't get here, but you should consider what to do if it does.
    // set a default? throw?
} 
```

这里是 getTiffCompressor()：

```
private TIFFCompressor getTiffCompressor (TiffCompression compression, TIFFImageWriteParam writeParam, boolean usePredictor)
{
    int predictor = usePredictor 
            ? BaselineTIFFTagSet.PREDICTOR_HORIZONTAL_DIFFERENCING 
            : BaselineTIFFTagSet.PREDICTOR_NONE;

    switch (compression) 
    {
    case GROUP_3_FAX_ENCODING:
        return new TIFFT4Compressor();
    case GROUP_4_FAX_ENCODING:
        return new TIFFT6Compressor();
    case JPEG_COMPRESSION:
        return new TIFFJPEGCompressor(writeParam);
    case MACINTOSH_PACKBITS:
        return new TIFFPackBitsCompressor();
    case DEFLATE:
        return new TIFFDeflateCompressor(writeParam, predictor);
    case LZW:
        return new TIFFLZWCompressor(predictor);
    case MODIFIED_HUFFMAN:
        return new TIFFRLECompressor();
    case NO_COMPRESSION:
    case DEFAULT:
    default:
        return null;
    }
} 
```

TiffCompression 是我自己的枚举，它模拟了我为 TIFF 文件提供的压缩。最后，这里是 getCompressionType()：

```
private String getCompressionType (TiffCompression compression)
{
    switch (compression)
    {
    case GROUP_3_FAX_ENCODING:
        return "CCITT T.4";
    case GROUP_4_FAX_ENCODING:
        return "CCITT T.6";
    case JPEG_COMPRESSION:
        return "JPEG";
    case MACINTOSH_PACKBITS:
        return "PackBits";
    case DEFLATE:
        return "Deflate";
    case LZW:
        return "LZW";
    case MODIFIED_HUFFMAN:
        return "CCITT RLE";
    case NO_COMPRESSION:
    case DEFAULT:
    default:
        return null;
    }
} 
```

现在，我无法向您展示所有内容，因为我的代码是为编码任意数量的图像而构建的，而您的不是，因此我们的代码结构差异很大。就我而言，我设置了编码器以使用具有更开放架构的序列编写器。我拉入一个图像，触发一个事件以选择性地更改默认压缩，创建写入器并写入参数，设置元数据/图像标签，触发进度事件然后写入序列。然后我必须进入并修补最后写入的 ifd，因为 tiff 编码器将它们写入损坏，因此需要修补它们。

# c# - 为什么 XNA 不能始终如一地从 CCV 获取 TUIO 数据？

> ID：10317355
> 
> 赞同：1
> 
> 时间：2012-04-25T14:03:40.067
> 
> 标签：c#, xna, vision

我正在使用 TUIO_Sharp，它是 C# 的 TUIO API。我已将 TUIO 程序集包含在我正在处理的 XNA 项目中。我制作了一个运行良好的表面界面（总成本约为 40 美元！），Community Core Vision（一种计算机视觉软件）与它一起工作很有名。我知道 CCV 正在正确传输数据，因为 TUIO Sharp 演示工作并接收数据并完成了它应该做的所有事情。

但是，当我创建 TUIO 客户端并按照文档中的描述执行所有必要的事情时，它不起作用。事实上，我所做的只是在触摸桌面时更改背景颜色。

```
using all_the_xna_stuff;
using TUIO;
  namespace Test
  {
    public class Game1 : Microsoft.Xna.Framework.Game, TuioListener
    {
        private int port;
    ...
    protected override void Initialize()
    {
        port = 3333;
        // TODO: Add your initialization logic here
        Client = new TuioClient(port);
        Client.addTuioListener(this);
        Client.connect();

        base.Initialize();

    }
    ...
    public void addTuioObject(TuioObject tobj)
    {
        if (backgroundColor.R < 240)
        {
            backgroundColor.R += 10;
        }
    }
}} 
```

# ruby-on-rails-3 - 列出同一模型拥有的记录？

> ID：10317358
> 
> 赞同：1
> 
> 时间：2012-04-25T14:03:49.643
> 
> 标签：ruby-on-rails-3, model, associations, relation

我有一个简单的 Rails 3 应用程序，它有许多模型。我遇到问题的模型的简单概述是：

**客户模型**

```
has_many :animals 
```

**动物模型**

```
belongs_to :client 
```

我能做的是显示同一客户拥有的其他动物的列表。

像这样的东西：

```
<% @client.animals.each do |animal| %>
  <%= animal.AnimalName %>
<% end %> 
```

因为这是在 Animal 控制器中，所以我的示例代码不起作用。任何指针将不胜感激。

**更新**

澄清一下，如果我有以下记录：

```
Danny (Client)
Cat (animal owned by Danny)
Dog (animal owned by Danny)
Rabbit (animal owned by Danny) 
```

然后我去了狗的记录的展示视图，我想要一个可以显示 Danny 拥有的所有动物的列表。例如

```
Cat
Dog
Rabbit 
```

理想情况下排除当前查看的动物（在本例中为狗）。

我尝试了以下方法，但似乎不起作用：

```
<% @client.animals.each do |client| %>
  <%= @client.animal.AnimalName %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:15:39.250

如果我理解正确，您拥有`@animal`并想要展示所有者拥有的所有动物`@animal`。这可以这样做：

```
<% @animal.client.animals.each do |animal| %>
  <%= animal.AnimalName %>
<% end %> 
```

* * *

更新：

您可以添加一个`.where`到`@animal.client.animals`：

```
@animal.client.animals.where('id != ?', @animal.id).each ... 
```

在视图中这样做并不是一个好主意。所以我会在我的 Animal 模型中添加一个实例方法：

```
def other_animals_with_same_owner
  client.animals.where('id != ?', id)
end 
```

有了这个，你可以这样做：

```
@animal.other_animals_with_same_owner.each ... 
```

# visual-c++ - Outlook插件自定义按钮添加到下拉列表中

> ID：10317361
> 
> 赞同：1
> 
> 时间：2012-04-25T14:03:53.110
> 
> 标签：visual-c++, outlook, vsto, add-in, outlook-2010

嗨，我正在尝试在 Outlook 的下拉菜单中添加**自定义按钮....**

如图所示..黑框被添加为自定义按钮![在此处输入图像描述](../Images/e619578b7132f74e8ecc47691cfa2cff.png)

一些帮助我如何自定义功能区来获得这个..

谢谢尼基尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T06:00:35.313

谢谢[http://msdn.microsoft.com/en-us/library/ee692172.aspx#OfficeOLExtendingUI_ContextMenuforaMailItem](http://msdn.microsoft.com/en-us/library/ee692172.aspx#OfficeOLExtendingUI_ContextMenuforaMailItem)

在我的 VC++ 代码功能区 xml 中从上面的链接添加 xml 后，我已经解决了上述问题。

# delphi - 如何在delphi 7的单个语句中在字符串列表中添加不同的字符串？

> ID：10317364
> 
> 赞同：1
> 
> 时间：2012-04-25T14:04:04.850
> 
> 标签：delphi

我想将 30 个不同的字符串添加到 stringList 中。我不想加`AList.Items.Add`30次。我也不想将字符串保存在数组中并运行循环。我在想也许我可以写一个`AList.Add`（而不是在循环中）要添加的字符串由 Delimiter 分隔。例如 `AList.Add('Data1' + <Delim> + 'Data2' ...)`

怎么做 ？请注意，我只是好奇是否可以这样做。如果没有，那也没关系，因为有更好的方法来实现这一点。（将字符串保存在数组中并使用循环添加数据是我的想法）

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T14:06:42.743

您可以编写一个执行此操作的过程：

```
procedure SLAddStrings(SL: TStrings; S: array of string);
var
  i: Integer;
begin
  SL.BeginUpdate;
  for i := low(S) to high(S) do
    SL.Add(S[i]);
  SL.EndUpdate;
end; 
```

试试看：

```
var
  SL: TStringList;
begin
  SL := TStringList.Create;
  SLAddStrings(SL, ['car', 'cat', 'dog']); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-26T01:02:34.913

创建一个临时对象`TStringList`，将字符串分配给它的`DelimitedText`属性，将临时对象传递给`AddStrings()`目标的方法`TStringList`，然后释放临时对象。

```
var
  Temp: TStringList;
begin
  Temp := TStringList.Create;
  try
    Temp.Delimiter := <Delim>;
    // if using a Delphi version that has StrictDelimiter available:
    // Temp.StrictDelimiter := True;
    Temp.DelimitedText := 'Data1' + <Delim> + 'Data2' ...;
    AList.AddStrings(Temp);
  finally
    Temp.Free;
  end;
end; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-25T14:13:37.717

只使用`DelimitedText`属性。例如，如果您的分隔符设置为`,`（TStringList 中的默认值），那么您可以编写以下代码：

```
AList.DelimitedText := 'Data1,Data2'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T14:16:31.837

您可以使用`TStringList.DelimitedText`属性添加文本，它使用您的`Delimiter`字符。`TStringList`将拆分您的文本，然后您可以使用`strings`属性分别访问每个字符串；

```
program Project3;
{$APPTYPE CONSOLE}
uses classes;

const DATA = 'one,two,three';

var sl : TStringList;
    s : string;
begin
    sl := TStringList.Create();
    try
        sl.Delimiter := ',';
        sl.DelimitedText := DATA;
        for s in sl do begin
            writeln(s);
        end;
        readln;
    finally
        sl.Free();
    end;
end. 
```

结果是

```
one
two
three 
```

# php - 调试电子邮件连接

> ID：10317365
> 
> 赞同：1
> 
> 时间：2012-04-25T14:04:06.353
> 
> 标签：php

我正在使用 XAMPP V 1.7.7；控制面板 3；Windows 7、Service Pack 1 和 Outlook

我正在尝试使用“sendmail”建立一个电子邮件连接——现在一切终于可以正常工作了——除了我现在在调试日志中得到一个条目：

```
12/04/23 21:10:55 ** From address not verified - see http://www.btyahoo.com/verify<EOL> 
```

这是到目前为止的代码和设置：

php.ini：

```
 [mail function]
; For Win32 only.
; http://php.net/smtp
SMTP = mail.btinternet.com
; http://php.net/smtp-port
smtp_port = 25

; For Win32 only.
; http://php.net/sendmail-from
sendmail_from = someone@btinternet.com

; For Unix only.  You may supply arguments as well (default: "sendmail -t -i").
; http://php.net/sendmail-path
sendmail_path = "\"C:\xampp\sendmail\sendmail.exe\" -t"

; Force the addition of the specified parameters to be passed as extra parameters
; to the sendmail binary. These parameters will always replace the value of
; the 5th parameter to mail(), even in safe mode.
;mail.force_extra_parameters =

; Add X-PHP-Originating-Script: that will include uid of the script followed by the filename
mail.add_x_header = Off

; Log all mail() calls including the full path of the script, line #, to address and headers
mail.log = "C:\xampp\php\logs\php_mail.log" 
```

发送邮件.ini

```
smtp_server=mail.btinternet.com

; smtp port (normally 25)

smtp_port=25

; SMTPS (SSL) support
;   auto = use SSL for port 465, otherwise try to use TLS
;   ssl  = alway use SSL
;   tls  = always use TLS
;   none = never try to use SSL

smtp_ssl=auto

; the default domain for this server will be read from the registry
; this will be appended to email addresses when one isn't provided
; if you want to override the value in the registry, uncomment and modify

; default_domain=localhost

; log smtp errors to error.log (defaults to same directory as sendmail.exe)
; uncomment to enable logging

error_logfile=error.log

; create debug log as debug.log (defaults to same directory as sendmail.exe)
; uncomment to enable debugging

debug_logfile=debug.log

; if your smtp server requires authentication, modify the following two lines

auth_username=someone@btinternet.com
auth_password=******

; if your smtp server uses pop3 before smtp authentication, modify the
; following three lines.  do not enable unless it is required.

;pop3_server=
;pop3_username=
;pop3_password=
; force the sender to always be the following email address
; this will only affect the "MAIL FROM" command, it won't modify
; the "From: " header of the message content

force_sender=someone@btinternt.com

; force the sender to always be the following email address
; this will only affect the "RCTP TO" command, it won't modify
; the "To: " header of the message content

force_recipient=

; sendmail will use your hostname and your default_domain in the ehlo/helo
; smtp greeting.  you can manually set the ehlo/helo name if required

hostname= 
```

php代码：

```
<?php   
$email_to = "someone@btinternet.com";
$name=$row['name'];
$email=$row['email'];
$phone=$row['mobtel'];
$email_from = 'someone@btinternet.com';
$email_subject = "Feedback from website";

$message=("Name:  ").$name. ("\r\n") . ("Email:  ") .$email . ("\r\n") . ("Phone:  ") .$phone;

$sent = mail($email_to, $email_subject, $message);

?> 
```

我问的问题是 - “发件人地址”是正确的，因为它是我自己的电子邮件地址。那么发生了什么？

我会很感激建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:09:06.307

我的猜测是，这是因为您的消息中没有`From`定义标头，而您的 SMTP 服务器正在期待一个标头。`MAIL FROM`SMTP 中的命令可能正在使用您的地址，但您的电子邮件也应该有一个`From`标题。 `mail()`接受标题块（由 分隔的行`\r\n`）作为其第四个参数。

```
$headers = "From: $your_email_address";
$sent = mail($email_to, $email_subject, $message, $headers); 
```

另一种可能性是您的 SMTP 服务器不接受您在 sendmail.ini 中指定的身份验证字符串

# php - 如何让 ajax 评论系统从不同的目录工作？

> ID：10317368
> 
> 赞同：1
> 
> 时间：2012-04-25T14:04:19.997
> 
> 标签：php, javascript, mysql, html, ajax

我有一个页面，我正在尝试向它添加一个 ajax 评论系统。当我将 /comment 目录中的所有代码放入根目录时，我的新页面可以实现脚本。但是，如果我创建另一个目录，比如 /books，然后链接到 /comment 目录中的页面，它就不会发布评论。我可以显示它们并访问 javascript 页面，但我不能不发表新评论。是什么导致它失败。我认为它在 javascript 文件中的某个位置...如果您需要查看其他内容，我不想包含这么多代码，请告诉我，我会发布它。我会将 php 文件和 javascript 文件包含在一个目录中，然后放入另一个目录中……任何提示都会很棒。这是我的页面：

```
<?php

// Error reporting:
error_reporting(E_ALL^E_NOTICE);

include('../comments/connect.php');
include($_SERVER['DOCUMENT_ROOT'] . '/comments/comment.class.php');

/*
/   Select all the comments and populate the $comments array with objects
*/

$comments = array();
$result = mysql_query("SELECT * FROM comments ORDER BY id ASC");

while($row = mysql_fetch_assoc($result))
{
    $comments[] = new Comment($row);
}

?>

<html>
<head>
<link rel="stylesheet" type="text/css" href="../style.css" />
</head>
<body>

<ul id="nav">
    <li class="current"><a href="index.html">Home</a></li>
    <li><a href="#"></a>
        <ul>
            <li><a href="#"></a></li>
</ul>
<div id="container">

    <div id="content">

<?php

/*
/   Output the comments one by one:
*/

foreach($comments as $c){
    echo $c->markup();
}

?>

<div id="addCommentContainer">
    <p>Add a Comment</p>
    <form id="addCommentForm" method="post" action="">
        <div>
            <label for="name">Your Name</label>
            <input type="text" name="name" id="name" />

            <label for="email">Your Email</label>
            <input type="text" name="email" id="email" />

            <label for="url">Website (not required)</label>
            <input type="text" name="url" id="url" />

            <label for="body">Comment Body</label>
            <textarea name="body" id="body" cols="20" rows="5"></textarea>

            <input type="submit" id="submit" value="Submit" />
        </div>
    </form>
</div>
</p>

    </div>
</div>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="../comments/script.js"></script>
</body>
</html> 
```

和JavaScript ...

```
$(document).ready(function(){
    /* The following code is executed once the DOM is loaded */

    /* This flag will prevent multiple comment submits: */
    var working = false;

    /* Listening for the submit event of the form: */
    $('#addCommentForm').submit(function(e){

        e.preventDefault();
        if(working) return false;

        working = true;
        $('#submit').val('Working..');
        $('span.error').remove();

        /* Sending the form fileds to submit.php: */
        $.post('submit.php',$(this).serialize(),function(msg){

            working = false;
            $('#submit').val('Submit');

            if(msg.status){

                /* 
                /   If the insert was successful, add the comment
                /   below the last one on the page with a slideDown effect
                /*/

                $(msg.html).hide().insertBefore('#addCommentContainer').slideDown();
                $('#body').val('');
            }
            else {

                /*
                /   If there were errors, loop through the
                /   msg.errors object and display them on the page 
                /*/

                $.each(msg.errors,function(k,v){
                    $('label[for='+k+']').append('<span class="error">'+v+'</span>');
                });
            }
        },'json');

    });

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T14:21:50.800

您通常会将您的评论脚本放在一个不会更改的 URL 上，即 www.domain.com/comments。然后，您可以使用 GET 请求获取页面的评论（通过查询字符串参数指定页面、URL 或其他唯一标识符），然后可以使用 POST 请求发布评论。

这样，您的评论模块与您的应用程序完全分离，如果您需要更改数据库详细信息或文件路径，则无需遍历其中包含的每个脚本。

最简单的是，您可以为评论脚本创建一个如下所示的 PHP 文件：

```
<?php

header('Content-Type: application/json');

switch (strtolower($_SERVER['REQUEST_METHOD'])) {
    case 'get':
        // return comments for page in JSON format
    break;
    case 'post':
        // post new comment; return result in JSON format
    break;
} 
```

然后在您的 HTML 视图文件中：

```
<!DOCTYPE html>
<html>
  <body>
    <div id="comments"></div>
    <form action="http://domain.com/comments.php" method="post" id="new-comment">
      <!--rest of your form here-->
    </form>
    <script src="jquery.js"></script>
    <script>
      $(document).ready(function() {
        $.getJSON('http://domain.com/comments.php?page_id=YOUR_PAGE_ID', function(comments) {
          $.each(comments, function(index, comment) {
            // add comment to #comments div
          });
        });

        $('#new-comment').submit(function() {
          $.post('http://domain.com/comments.php', $(this).serialize(), function(response) {
            // act on your form depending is response was success or not
          });
          return false;
        });
      });
    </script>
  </body>
</html> 
```

您也可以将上述内容包装在一个插件中，然后只需将您的评论小部件添加到您的页面中，即`$('#comments').nameOfYourCommentsPlugin();`.

希望这对您构建有效的解决方案有足够的帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T14:09:28.603

您似乎正在使用相对路径通过包含连接到您的数据库：

```
include('../comments/connect.php'); 
```

这将是首先要改变的，它可能是这样的：

```
include($_SERVER['DOCUMENT_ROOT'] . '/comments/connect.php'); 
```

通常，查找相对路径并查看是否可以将它们更改为绝对路径，相对于 php 文件的服务器根目录或相对于 javascript 文件的 web 根目录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T14:13:25.103

我认为问题出在 javascript 方面，您的帖子转到相对 url，您应该用绝对 url 替换它：

```
/* Sending the form fileds to submit.php: */
$.post('submit.php',$(this).serialize(),function(msg){//<- replace submit.php with absolute url
... 
```

# html - 为一行 DIV 中的最后一个 DIV 设置样式

> ID：10317370
> 
> 赞同：5
> 
> 时间：2012-04-25T14:04:25.020
> 
> 标签：html, css, css-selectors

我查看了这篇文章（[如何使用 CSS 或 jQuery 设置第一个和最后一个 li 的样式？](https://stackoverflow.com/questions/8896938/how-to-style-the-first-and-last-li-with-css-or-jquery)），但我仍在寻找合适的 IE8（和 IE8 之前）解决方案。

我有一排设置为具有填充权的 DIV，但为了使最后一个正确对齐，希望最终 DIV 具有零填充。我以前使用过 .css + .css 路由，但这似乎不适用于 IE8 及其之前的版本。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T14:08:27.557

假设有一个包含所有这些的包含 div，你应该能够做到这一点：

```
div.container {
    background-color: blue;
}
div.container .div-row {
    float: left;
    padding-right: 5px;
}
div.container .div-row:last-child {
    padding-right: 0px;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T14:05:30.820

你可以给最后一个 div 一个类，并让它在 IE 中与该类一起工作。

```
<div class="last"></div>

<style>
    .last
    {
        padding-right:0;
    }
</style> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T14:06:39.947

您可以使用类似以下 CSS 的内容：

```
.rowofdivs div:last-child {
    padding-right: 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T14:38:37.790

如果您无法按照其他答案中的建议手动添加“last”类，则必须依靠 JavaScript 来完成此操作。如果你有 jQuery，你可以这样做：

```
 $('#parentdiv div:last-child').addClass('last'); 
```

然后相应地调整您的样式表：

```
 .last { padding-right: 0 } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-25T14:06:44.220

您可以使用 css 伪类`:last-of-type`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-25T14:07:11.233

这是一个 CSS3 选择器，请参阅[quirks mode](http://www.quirksmode.org/css/contents.html)了解哪些浏览器可用的列表。

为什么不在代码中的最后一个 div 中添加一个 class="last"？

last-child 不适用于 IE8 及更低版本

# c# - 用c#进行Java RSA解密和加密

> ID：10317373
> 
> 赞同：3
> 
> 时间：2012-04-25T14:04:49.153
> 
> 标签：c#, java, encryption, rsa

我加密一条消息，然后解密它。这是要点：[https](https://gist.github.com/2489899) ://gist.github.com/2489899 。我必须将此密钥存储在 xml 方案中，因为消息也应该能够在 c# 中解密。（这只是我的程序与数据库等的“摘要”）。但我总是得到例外：

```
javax.crypto.BadPaddingException: Data must start with zero
at sun.security.rsa.RSAPadding.unpadV15(RSAPadding.java:308)
at sun.security.rsa.RSAPadding.unpad(RSAPadding.java:255)
at com.sun.crypto.provider.RSACipher.a(DashoA13*..)
at com.sun.crypto.provider.RSACipher.engineDoFinal(DashoA13*..)
at javax.crypto.Cipher.doFinal(DashoA13*..)
at Main.decrypt(Main.java:50)
at Main.main(Main.java:24) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:22:18.107

阅读[sun.security.rsa.RSAPadding](http://www.docjar.com/docs/api/sun/security/rsa/RSAPadding.html) 和[javax.crypto.BadPaddingException](http://docs.oracle.com/javase/1.4.2/docs/api/javax/crypto/BadPaddingException.html)的异常和 JavaDoc ，看起来您的 Java 代码需要 PKCS#1 v1.5 填充，但您的 C 代码没有使用相同的填充。您需要确保两边使用的填充算法相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T23:04:57.983

很简单，您的 RSAPrivateCrtKeySpec 构造函数调用使用了错误的参数顺序。

# ruby-on-rails-3 - Rails 3 通过 mongoid 适配器使用 MongoDB - 有没有办法在不使用单表继承的情况下共享属性规范？

> ID：10317376
> 
> 赞同：3
> 
> 时间：2012-04-25T14:04:59.147
> 
> 标签：ruby-on-rails-3, mongodb, mongoid, sti

可能是一个令人困惑的标题，但不知道该怎么说。示例应该更清楚。我有许多不同的模型，它们具有许多相同的属性。因此，在每个模型中，我必须指定那些相同的属性，然后指定特定于该特定模型的属性。

有什么方法可以创建一些列出这些基本属性的类，然后从该类继承而不使用单表继承？因为如果我将所有共享属性和 Mongoid 包含到单个模型中并从其他模型中的该基本模型继承，那么 STI 将被强制执行，并且我的所有模型都存储在单个 mongodb 集合中，由“_type”字段区分。

这就是我所拥有的：

```
class Model_1
  include Mongoid::Document

  field :uuid, :type => String
  field :process_date, :type => String
  ...
end

class Model_2
  include Mongoid::Document

  field :uuid, :type => String
  field :process_date, :type => String
  ...
end 
```

但这是我追求的功能：

```
class Base_model
  field :uuid, :type => String
  field :process_date, :type => String
end

class Model_1 < Base_model
  # To ensure STI is not enforced
  include Mongoid::Document

  # Attribute list inherited from Base_model
end 
```

问题是，如果 Base_model 中没有“include Mongoid::Document”，则该基本模型不知道“field ...”功能。但是，如果您确实将 mongoid 包含在基本模型中并从它继承，则会强制执行 STI。

我不能针对这种特殊情况进行 STI，但是拥有多个模型是一场编码噩梦，所有模型都一遍又一遍地指定相同的属性列表（模型数量越来越多，每个共享大约 15-20 个属性，所以任何时候我必须更改模型名称，到处更改它需要付出很多努力......）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T19:23:26.700

您可以在模块中定义公共属性并将其包含在内。

```
require 'mongoid'

module DefaultAttrs

  def self.included(klass)
    klass.instance_eval do
      field :uuid, :type => String
    end
  end

end

class Foo
  include Mongoid::Document
  include DefaultAttrs

  field :a, :type => String
end

class Bar
  include Mongoid::Document
  include DefaultAttrs

  field :b, :type => String
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T14:32:03.493

我有完全相同的问题，最初想采用 mixin 方法。然而，在与一些专家交谈后发现，使用 mongoids 单表继承（所有子元素的一个集合）可能是可行的方法，具体取决于您的用例。请在此处查看我的帖子： [单个集合与继承对象的单独集合](https://stackoverflow.com/questions/10704310/mongoid-store-in-produces-random-results/10739510#10739510)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-01T03:30:12.373

您可以将它们捆绑到一个新模块中，即

```
module Mongoid
  module Sunshine
    extend ActiveSupport::Concern

    included do
      include Mongoid::Document
      include Mongoid::Timestamps
      include Mongoid::TouchParentsRecursively
      include Mongoid::Paranoia
      include Mongoid::UUIDGenerator
    end
  end
end

class School
  include Mongoid::Sunshine
end 
```

# php - PHP中的安全图像上传

> ID：10317378
> 
> 赞同：1
> 
> 时间：2012-04-25T14:05:15.223
> 
> 标签：php, image, security, image-processing, file-upload

我知道这个问题被问了很多次，我已经阅读了这里的大部分问题和答案。
结果：如果操作正确，唯一的问题似乎是注释或 EXIF 数据中的嵌入代码。
问题：如果我使用雅虎的图像压缩引擎[smushit](http://www.smushit.com/)处理图像文件，那么它应该更安全，然后使用 GD 库对其进行转换，或者？

问候
尼尔斯

# c# - 为同一类的实例创建唯一的 id 和 counter

> ID：10317379
> 
> 赞同：1
> 
> 时间：2012-04-25T14:05:19.943
> 
> 标签：c#, .net

我正在创建一个小软件，可让您在运行时添加控件。

我所做的是从控件创建一个派生类，其中包括一个静态整数计数器，每次构造该类的实例时该计数器都会增加。这让我可以创建一个命名约定，这样名称就不会重复。例如我说

```
this.Name = "Label"+counter; 
```

当我想将其存储在一种自定义序列化中时，问题就来了。假设我创建了 3 个标签：*Label0、Label1、Label2*，然后我删除了*Label1*。这将导致拥有*Label0 和 Label2*。

如果我序列化当前状态，然后我加载该数据以重建状态，标签的创建将导致计数器的值为 1，即最后一个标签的名称*"Label2"*。这意味着如果现在我想创建另一个标签，将是*"Label(counter+1)"*，即*"Label2"*，导致重复。

我的问题是，这是创建一个计数器的最佳方法，它会产生一个如此简单的命名约定并跳过重复的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:17:56.953

使用其他控件序列化计数器，然后您可以加载现有控件并使用计数器值创建新控件。

# c# - svn 和 c#/visual studio 有什么限制吗？

> ID：10317380
> 
> 赞同：4
> 
> 时间：2012-04-25T14:05:29.060
> 
> 标签：c#, visual-studio, svn, version-control, smartsvn

在其他语言（例如 Objective c）中，您不能（或不应该）将某些文件置于版本控制之下，例如故事板和用户数据。

C# 和 Visual Studio 是否存在这些限制？

编辑：我们正在使用 Smart SVN。

编辑2：从您的评论看来，这些将是最佳的全局忽略： *.suo *.user *.ncb *.aps bin obj Debug Release temp debug release

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T09:34:52.993

如果您使用像[Agent SVN这样的](http://www.zeusedit.com/agent/)*MS-SCCI* Subversion 插件，那么 Visual Studio IDE 本身将控制哪些文件被添加到存储库中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T14:16:38.090

一年多来，我们一直在将 Visual Studio 与 Visual SVN（商业用途）结合使用，唯一的问题是项目模板中的某些文件有多个行尾，导致提交失败。只有在我们修复了行尾之后，我们才能提交这些文件。

我们使用的当前版本的另一个限制是，提交一个包含外部组件的解决方案并不像它应该的那样顺利。外部未提交和/或标记为无更改（实际上它们已更改）。

一种解决方法是使用在 Windows 资源管理器中而不是在 Visual Studio 本身中使用的 TortoiseSVN。使用这个程序从来没有任何问题

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T14:20:37.863

在我们公司，我们也在使用 VS2010 和 Subversion。到目前为止，我们从未遇到任何问题。我们使用[AnkhSVN](http://ankhsvn.open.collab.net/)和[TortoiseSVN](http://tortoisesvn.tigris.org/)作为客户端。
我们只在忽略列表中添加了一些文件，主要是 *.user 和 *.suo。这些文件保存仅对本地用户感兴趣的本地路径。无需将它们放在存储库中。如果你提交它们没问题，只是没有必要（至少从我个人的经验来看，不将它们添加到版本控制中可能会节省一些麻烦）。

编辑您的编辑：是的，可以忽略这些文件/文件夹。基本上是在需要时在客户端创建的任何东西。例如，通过这种方式，用户可以拥有自己的设置和工作环境，而不会与其他用户的路径布局发生冲突。

# image - 在 Delphi XE (Windows 7) 中创建浮动图像弹出窗口

> ID：10317382
> 
> 赞同：1
> 
> 时间：2012-04-25T14:05:39.700
> 
> 标签：image, delphi, pdf, delphi-xe, pascal

我在 Windows 7 64 位下运行 Delphi XE。

我加载了这些第三方组件： Virtual Trees 版本 4.8.7 TZip 版本 1.5 JVCL 3.45 Graphics32 1.9 Final GExperts 1.33 DWS DCP Crypt 版本 2.0 TeeChart Pro v2011

**当鼠标悬停在 TListBox Item 上时，我想创建 PDF 的弹出“预览”图像**。我想我会在我的窗口的 F​​ormCreate 中创建一个 TForm，然后隐藏它，直到我的 TfrmMain.ListBoxMouseMove 例程上的 (ListBox.ItemIndex > -1)。

现在，*我只是想掌握使用 JPEG 图像，而不是 PDF*。
我注意到使用 TImage 和 OnMouseOver 相当慢。 *有没有更快的方法来做到这一点*？也许使用 JEDI 组件？

```
unit MainUnit;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, PicUnit, jpeg, GraphUtil;

type
  TfrmMain = class(TForm)
    lst: TListBox;
    procedure FormCreate(Sender: TObject);
    procedure FormClose(Sender: TObject; var Action: TCloseAction);
    procedure lstClick(Sender: TObject);
    procedure lstMouseMove(Sender: TObject; Shift: TShiftState; 
      X, Y: Integer);
    procedure lstMouseLeave(Sender: TObject);
    public
      popPic: TfrmPic;
      ImagePaths: TStringList;
      LastHoover: Integer;
      procedure LoadImages(Item: Integer);
  end;

var
  frmMain: TfrmMain;

Implementation

{$R *.dfm}

procedure TfrmMain.FormCreate(Sender: TObject);
begin
  popPic := TfrmPic.Create(nil);
  ImagePaths := TStringList.Create;
  LastHoover := -1;
end;

procedure TfrmMain.FormClose(Sender: TObject; var Action: TCloseAction);
begin
  popPic.Free;
  ImagePaths.Free;
end;

procedure TfrmMain.lstClick(Sender: TObject);
begin
  if (lst.ItemIndex > -1) then
  begin
    popPic.Show;
  end { ItemIndex > -1 }
  else
    popPic.Hide;
end;

procedure TfrmMain.lstMouseLeave(Sender: TObject);
begin
  frmPic.Hide;
end;

procedure TfrmMain.lstMouseMove(Sender: TObject; Shift: TShiftState;
  X, Y: Integer);
var
  HooverItem : Integer;
begin
  { Returns -1 if the mouse is NOT over a item on the list }
  HooverItem := lst.ItemAtPos (Point (X, Y), True);

  if (HooverItem > -1) and (HooverItem <> LastHoover) then
  begin
    { Match the image onto the screen }
    frmPic.Left := frmMain.ClientToScreen(Point(X, Y)).X;
    frmPic.Top := frmMain.ClientToScreen(Point(X, Y)).Y;

    LoadImages(HooverItem);
    LastHoover := HooverItem;

    if (ImagePaths.Count > 0) then
    begin
      { TImage Method }
      frmPic.imgStd.Stretch := True;
      frmPic.imgStd.Picture.LoadFromFile (ImagePaths [0]);
      frmPic.Show;
      frmMain.SetFocus;
    end
    else
      frmPic.Hide;
  end
  else
  if (HooverItem = -1) then
    frmPic.Hide;
end;

procedure TfrmMain.LoadImages(Item: Integer);
begin
  { Clear off the existing list }
  ImagePaths.Clear;

  if (Item = 0) then
  begin
    ImagePaths.Add ('C:\Floating Image Demo\0.jpeg');
    ImagePaths.Add ('C:\Floating Image Demo\1.jpeg');
  end
  else
  if (Item = 1) then
  begin
    ImagePaths.Add ('C:\Floating Image Demo\1.jpeg');
    ImagePaths.Add ('C:\Floating Image Demo\0.jpeg');
  end;
end;

end. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:27:03.463

嗯...我发现 Adob​​e 的 Acrobat Control 组件正是我所需要的。它有点慢，但比 TImage 方法快得多。这是我修改后的解决方案：

```
Unit MainUnit;

Interface

Uses
  Windows,
  Messages,
  SysUtils,
  Variants,
  Classes,
  Graphics,
  Controls,
  Forms,
  Dialogs,
  StdCtrls,
  OleCtrls,
  AcroPDFLib_TLB;

Type
  TfrmMain = Class (TForm)
    lst : TListBox;

    Procedure FormCreate    (     Sender: TObject     );
    Procedure FormClose     (     Sender: TObject;
                              Var Action: TCloseAction);
    Procedure lstClick      (     Sender: TObject     );
    Procedure lstMouseMove  (     Sender: TObject;
                                   Shift: TShiftState;
                                       X,
                                       Y: Integer     );
    Procedure lstMouseLeave (     Sender: TObject     );

    Public
      frmPic     : TForm;
      Pdf        : TAcroPDF;
      ImagePaths : TStringList;
      LastHoover : Integer;

      Procedure LoadImages  (       Item: Integer     );

  End;

Var
  frmMain: TfrmMain;

Implementation

{$R *.dfm}

Procedure TfrmMain.FormCreate      (             Sender: TObject              );
Begin

  frmPic     := TForm.Create (Nil);
  ImagePaths := TStringList.Create;
  LastHoover := -1;

  { Create the "popup" form, and the PDF viewer object }
  frmPic.Height      := 160;
  frmPic.Width       := 200;
  frmPic.BorderStyle := bsNone;
  Pdf                := TAcroPDF.Create (frmPic);
  Pdf.Parent         := frmPic;
  Pdf.Name           := 'AcroPDF';
  Pdf.Align          := alClient;
  Pdf.setShowToolbar (False);

End;

Procedure TfrmMain.FormClose       (             Sender: TObject;
                                             Var Action: TCloseAction         );
Begin

  { Free the objects }
  Try
    FreeAndNil (Pdf);
    frmPic.Free;
    ImagePaths.Free;

  Finally
    { Stop ALL threads-If this is removed some fonts within the drawings cause Adobe a screw up and keep running, thus causing an AV }
    Application.Terminate;
  End;

End;

Procedure TfrmMain.lstClick        (             Sender: TObject              );
Var
  CurrentPos : TPoint;

Begin

  If (lst.ItemIndex > -1) Then Begin

    { Match the image onto the screen }
    Windows.GetCursorPos (CurrentPos);
    frmPic.Left := CurrentPos.X + 20;
    frmPic.Top  := CurrentPos.Y + 20;

    { Load the PDFs }
    LoadImages (lst.ItemIndex);

    If (ImagePaths.Count > 0) Then Begin
      { Adobe Acrobat Control ActiveX Component }
      PDF.LoadFile (WideString (ImagePaths [0]));
      PDF.setShowToolbar (False);
      PDF.gotoFirstPage;

      frmPic.Show;
      frmPic.SetFocus;
    End;

  End { ItemIndex > -1 }
  Else
    frmPic.Hide;

End;

Procedure TfrmMain.lstMouseLeave   (   Sender: TObject   );
Begin

  frmPic.Hide;

End;

Procedure TfrmMain.lstMouseMove (Sender: TObject; Shift: TShiftState; X, Y: Integer);
Var
  HooverItem : Integer;

Begin

  { Returns -1 if the mouse is NOT over a item on the list }
  HooverItem := lst.ItemAtPos (Point (X, Y), True);

  If (HooverItem > -1) Then Begin

    { Match the image onto the screen }
    frmPic.Left := frmMain.ClientToScreen (Point (X, Y)).X + 20;
    frmPic.Top  := frmMain.ClientToScreen (Point (X, Y)).Y + 20;

  End;

End;
{ ---------------------------------------------------------------------------- }

{ ---------------------------------------------------------------------------- }
{ --------------------------- PRIVATE METHODS -------------------------------- }
{ ---------------------------------------------------------------------------- }

Procedure TfrmMain.LoadImages                    (        Item: Integer       );
Begin

  { Clear off the existing list }
  ImagePaths.Clear;

  If (Item = 0) Then Begin
    ImagePaths.Add ('C:\Project_Files\SVN\Local\EXAMPLES, TEMPLATES, MISC\Floating Image Demo\0.pdf');
    ImagePaths.Add ('C:\Project_Files\SVN\Local\EXAMPLES, TEMPLATES, MISC\Floating Image Demo\1.pdf');
  End
  Else if (Item = 1) Then Begin
    ImagePaths.Add ('C:\Project_Files\SVN\Local\EXAMPLES, TEMPLATES, MISC\Floating Image Demo\1.pdf');
    ImagePaths.Add ('C:\Project_Files\SVN\Local\EXAMPLES, TEMPLATES, MISC\Floating Image Demo\0.pdf');
  End;

End; { LoadImages Procedure }
{ ---------------------------------------------------------------------------- }

End. 
```

# bash - 从路径中删除一个目录组件（字符串操作）

> ID：10317384
> 
> 赞同：2
> 
> 时间：2012-04-25T14:05:53.157
> 
> 标签：bash, tcsh

我正在寻找从路径中删除字段的最简单和最易读的方法。例如，我有 /this/is/my/complicated/path/here，我想使用 bash 命令从字符串中删除第 5 个字段（“/complicated”），使其变为 /this/is /我自己的路。我可以这样做

```
echo "/this/is/my/complicated/path/here" | cut -d/ -f-4
echo "/"
echo "/this/is/my/complicated/path/here" | cut -d/ -f6- 
```

但我希望只用一个简单的命令就可以完成这件事

```
echo "/this/is/my/complicated/path" | tee >(cut -d/ -f-4) >(cut -d/ -f6-) 
```

除了这不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T14:21:07.563

使用`cut`，您可以指定以逗号分隔的要打印的字段列表：

```
$ echo "/this/is/my/complicated/path/here" | cut -d/ -f-4,6-
/this/is/my/path/here 
```

因此，实际上没有必要使用两个命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:10:25.213

使用 sed 怎么样？

```
$ echo "/this/is/my/complicated/path/here" | sed -e "s%complicated/%%"
/this/is/my/path/here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T14:30:23.573

这将删除第 5 个路径元素

```
echo "/this/is/my/complicated/path/here" | 
  perl -F/ -lane 'splice @F,4,1; print join("/", @F)' 
```

只是猛击

```
IFS=/ read -a dirs <<< "/this/is/my/complicated/path/here"
newpath=$(IFS=/; echo "${dirs[*]:0:4} ${dirs[*]:5}") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T15:03:24.937

bash 脚本有什么问题吗？

```
#!/bin/bash        

if [ -z "$1" ]; then 
    us=$(echo $0 | sed "s/^\.\///") # Get rid of a starting ./
    echo "        "Usage: $us StringToParse [delimiterChar] [start] [end]
    echo StringToParse: string to remove something from. Required
    echo delimiterChar: Character to mark the columns "(default '/')"
    echo "        "start: starting column to cut "(default 5)"
    echo "          "end: last column to cut "(default 5)"
    exit
fi

# Parse the parameters
theString=$1
if [ -z "$2" ]; then
    delim=/
    start=4
    end=6
else
    delim=$2
    if [ -z "$3" ]; then
        start=4
        end=6
    else
        start=`expr $3 - 1`
        if [ -z "$4" ]; then
            end=6
        else
            end=`expr $4 + 1`
        fi
    fi
fi

result=`echo $theString | cut -d$delim -f-$start`
result=$result$delim
final=`echo $theString | cut -d$delim -f$end-`
result=$result$final
echo $result 
```

# liferay - 如何在 Liferay 中获取配色方案

> ID：10317385
> 
> 赞同：3
> 
> 时间：2012-04-25T14:05:59.933
> 
> 标签：liferay, liferay-theme

Liferay 是否有可能以编程方式获得主题的配色方案？

我必须根据当前的配色方案包含不同的图标。我知道可以通过使用 css 来做到这一点，但在我的问题中，最好在 java 代码中获取配色方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T14:27:29.803

如果您想获取当前页面的配色方案，请尝试以下代码

```
ColorScheme colorScheme = (ColorScheme )request.getAttribute(WebKeys.WebKeys.COLOR_SCHEME); 
```

# javascript - 弹出窗口 - 加载一次，使用 Javascript Cookie 后每 3 个月一次

> ID：10317386
> 
> 赞同：0
> 
> 时间：2012-04-25T14:06:00.893
> 
> 标签：javascript, cookies, popupwindow

我想知道是否有人可以提供帮助？

我设法创建了一个带有时间延迟的弹出窗口脚本。我需要它在第一次访问时打开，而不是在三个月内再次打开。

我完全迷失了，今天和昨天的大部分时间都在网上搜索。我是 Javascript 和 Cookie 的新手。

先感谢您。扫罗

这是弹出打开窗口的脚本。

```
<script type="text/javascript">
function start(theURL, winName,w,h) {
var left = (screen.width/2)-(w/2);
var top = (screen.height/2)-(h/2);
var targetWin = window.open (theURL, winName, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);
} 
setTimeout(start, 1*1000, 'pop_up.html', 'pop-up-title',200,100);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:25:06.380

只是我的方式，它非常粗糙，但是当页面加载时，我会查看是否存在 cookie，例如我的 cookie 称为 CookieDisplay。检查它：

```
 var mycookie= getCookie("CookieDisplay");
        if (mycookie== null ){

            start();
        }

function getCookie(c_name) {
    var i, x, y, ARRcookies = document.cookie.split(";");
    for (i = 0; i < ARRcookies.length; i++) {
        x = ARRcookies[i].substr(0, ARRcookies[i].indexOf("="));
        y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
        x = x.replace(/^\s+|\s+$/g, "");
        if (x == c_name) {
            return unescape(y);
        }
    }
} 
```

如果页面已加载并且 cookie 存在，则不要加载窗口。如果 cookie 不存在，则运行您的 start() 函数。在 start() 函数中的某处创建 cookieDisplay cookie，以便下一次往返，当页面加载时进行检查，找到 cookie 并且窗口未打开设置 cookie 示例在这里：

```
 function setCookie(c_name, value, exdays) {
    var exdate = new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value = escape(value) + ((exdays == null) ? "" : "; expires=" +                 exdate.toUTCString());
    document.cookie = c_name + "=" + c_value;
} 
```

如果您在欧盟，请注意新的 cookie 法。

# asp.net-mvc-3 - 实体框架更新在更新记录时显示 dbconcurrency？

> ID：10317387
> 
> 赞同：1
> 
> 时间：2012-04-25T14:06:07.003
> 
> 标签：asp.net-mvc-3, entity-framework

在我的代码中，更新发生在视图和控制器中。创建和更新的控制器和视图相同。创建配置文件工作正常。但是在更新它时会显示 DbConcurrency 异常消息。请帮我找。

更新记录时出现异常消息：存储更新、插入或删除语句影响了意外数量的行 (0)。自加载实体后，实体可能已被修改或删除。刷新 ObjectStateManager 条目。

我的更新个人资料页面有（Profile.cshtml）

```
@model Sitecss.Models.Profile
           @using Microsoft.Web.Helpers;
@{
    ViewBag.Title = "CreateProfile";
    Layout = "~/Views/Shared/_HomeLay.cshtml";
}

@{
    var GT = new SelectList(new[] {
        new {ID ="Team DeathMatch", Name="Team DeathMatch"},
        new {ID ="Search & Destroy", Name="Search & Destroy"},
        new {ID ="Flag Runner", Name="Flag Runner"},
        new {ID ="Domination", Name="Domination"},
        new {ID ="Kill Confirmed", Name="Kill Confirmed"}
    },"ID","Name");
    var Spec = new SelectList(new []{
        new {ID ="Assault", Name="Assault"},
        new {ID ="Tactical", Name="Tactical"},
        new {ID ="Long-Range Eliminations", Name="Long-Range Eliminations"},
        new {ID ="Noob", Name="Noob"}
    }, "ID", "Name");

}

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm("CreateProfile", "Home", FormMethod.Post, new { @encType = "multipart/form-data" }))
{

    <div id="content1">
    @Html.ValidationSummary(true)
<h4>Create a Profile</h4>

    <div>
    @Html.LabelFor(m => m.SteamName)
    </div>
    <div>
    @Html.TextBoxFor(m => m.SteamName, new { @class = "wide" })
    @Html.ValidationMessageFor(m => m.SteamName)
    </div>

    <div>
    @Html.LabelFor(m =>m.UserImg)
    </div>
    <div>

    <input type="file" name="image" class="image" /> <br />
    </div>

    <div>
    @Html.LabelFor(m => m.GameType)
    </div>
    <div>
    @Html.DropDownListFor(m => m.GameType, GT, new { @class = "wide" })
    @Html.ValidationMessageFor(m => m.GameType)
    </div>

    <div>
    @Html.LabelFor(m => m.Specialist)
    </div>
    <div>
    @Html.DropDownListFor(m => m.Specialist, Spec, new { @class = "wide" })
    @Html.ValidationMessageFor(m => m.Specialist)
    </div>

    <div>
    @Html.LabelFor(m => m.FavGun)
    </div>
    <div>
    @Html.TextBoxFor(m => m.FavGun, new { @class = "wide" })
    @Html.ValidationMessageFor(m => m.FavGun)
    </div>
    <p><input type="submit" class="button" value="Ok" /></p>
    </div>
} 
```

而我的控制器功能是

```
public ActionResult CreateProfile()
        {
            if (db.Profiles.Any(u => u.Username == User.Identity.Name))
            {
                Profile pro = (from usr in db.Profiles where usr.Username == User.Identity.Name select usr).Single();
                olf = pro.UserImg;
                Profile p = db.Profiles.Find(pro.Id);
                ViewBag.ProfilePic = olf;
                return View(p);
            }
            else
            {
                ViewBag.Name = User.Identity.Name;
                return View();
            }
        }

   [HttpPost]
        public ActionResult CreateProfile(Profile m)
        {
            WebImage photo = WebImage.GetImageFromRequest();

            string newFileName = "";
            string thumbs = "";
            if (photo != null)
            {
                string ext = Path.GetExtension(photo.FileName);
                newFileName = User.Identity.Name+ ext;
                thumbs = @"Images/" + newFileName;
                photo.Resize(width: 120, height: 120, preserveAspectRatio: true, preventEnlarge: true);
                photo.Save(@"~/"+thumbs);
                m.UserImg = newFileName;
            }

            if (ModelState.IsValid)
            {    
                if (db.Profiles.Any(u => u.Username == User.Identity.Name))
                {   

                    db.Entry(m).State = System.Data.EntityState.Modified;
                    db.SaveChanges();
                    return RedirectToAction("Index");

                }
                else
                {
                    m.Username = User.Identity.Name;
                    db.Profiles.Add(m);
                    db.SaveChanges();
                    return RedirectToAction("Index");
                }
            }
            return View(m);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:50:03.743

在我的编辑控制器中向更新语句添加断点时，我知道更新时主键 Id = 0 为了解决此问题，我在已修复 DbConcurrency 更新的视图中添加了隐藏字段

# css - Rails 3 和 CSS

> ID：10317388
> 
> 赞同：0
> 
> 时间：2012-04-25T14:06:11.597
> 
> 标签：css, ruby-on-rails-3

这只是一个提出来看看其他人在做什么的问题，我确信在 Rails 3.1 应用程序中构建我的文件时我可以做得更好。

目前，我所有的 CSS 都进入了样式表下的 application.css 文件，并且在我的布局下的 application.html.erb 文件中

```
<%= stylesheet_link_tag "application", media: "all" %> 
```

有没有更有效或 Rails 的方式来做这件事，或者我可以继续这样。？只是想养成使用 Rails 最佳实践的习惯

所有建议表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:19:08.127

有一个很好的方法来构建你的 CSS。看看这里（必须滚动一点）：

[3.1.3 使用 stylesheet_link_tag 链接到 CSS 文件](http://guides.rubyonrails.org/layouts_and_rendering.html)

所以我认为这是一种有效的轨道方式

# c# - 如何在 C# 中为类的静态默认属性分配默认值？

> ID：10317394
> 
> 赞同：2
> 
> 时间：2012-04-25T14:06:22.720
> 
> 标签：c#, .net, c#-4.0

> **可能重复：**
> [静态属性的默认值](https://stackoverflow.com/questions/2596344/default-value-for-a-static-property)

我可以为类的正常默认属性分配默认值。但我无法为类的静态默认属性分配默认值，如下所示：-

```
 public class AppInstance
{
    [DefaultValue(25)]
    public static int AppType { get; set; }
} 
```

当我调用 AppInstance.AppType 时，它​​总是返回 0 而不是 25。为什么？如何在不使用私有变量声明的情况下解决它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T14:10:35.097

`DefaultValueAttribute`唯一告诉`WinForms`设计者哪个值是窗体或控件属性的默认值。如果该属性有另一个值，该值将在属性窗口中以**粗体显示。**但它实际上不会设置值。

您必须在静态构造函数中为其赋值

```
static MyClass()
{
    AppType = 25;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T14:09:24.793

您可以使用静态构造函数。在创建第一个实例或引用任何静态成员之前自动调用它来初始化类。

```
public class AppInstance
{
    public static int AppType { get; set; }

    static AppInstance()
    {
        AppType = 25;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T14:11:47.817

`get; set;`我看不到在这种情况下使用创建静态成员的用途。也许别人可以？

所以，我可能会这样做：

```
public class AppInstance
{
    public static int AppType = 25;
} 
```

# javascript - Javascript：从给定的两个片段中引用“this”的可接受方式

> ID：10317405
> 
> 赞同：0
> 
> 时间：2012-04-25T14:06:51.983
> 
> 标签：javascript, jquery

```
var me = null;
var testFn = (function() {
    me = this;
    return {
        me1: me,
        fn1 : function() {
           me = this;
             return {   
                    me2 : me,
                    fn2 : function() {
                        me = this;
                        return {
                            me3: me
                        }
                    }
                }        
        }
    }
})(); 
```

**或者：**

```
var testFn = (function() {
    var me = this;
    return {
        me1: me,
        fn1 : function() {
           var me = this;
             return {   
                    me2 : me,
                    fn2 : function() {
                        var me = this;
                        return {
                            me3: me
                        }
                    }
                }        
        }
    }
})(); 
```

在上面给出的两个段之间，哪一个是引用的最佳方式`this`。有没有其他最好的方法，请指教。

谢谢.....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T14:08:17.517

我建议使用第二种方法，因为 me 是在闭包内声明的，因此 iot 不会污染不需要的上下文。我也属于哪个语境也更清楚了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:09:03.613

我更喜欢第二个，因为它在 is 时被销毁`this`，这更有意义（它们在同一范围内）。

不完全相关，但大多数人称变量为`that`：例如`var that = this;`

# email - 自编 gnupg mime-mail 显示为附件而不是内联

> ID：10317408
> 
> 赞同：0
> 
> 时间：2012-04-25T14:07:00.907
> 
> 标签：email, mime, gnupg

我有一个脚本可以对文本进行 gpg 加密并将其邮寄出去。

我使用 MacGPG / Apple Mail，它可以很好地解密它，但之后不显示文本而是显示附件。

这些是我构建的邮件，有什么问题？

```
...
Date: Wed, 25 Apr 2012 16:01:04 +0200
From: <deleted>
To: <deleted>
Message-ID: <deleted>
Subject: asdf
Mime-Version: 1.0
Content-Type: multipart/encrypted;
 boundary=4b5784e4-fc05-45bb-9a72-e9070a11423c;
 charset=UTF-8;
 protocol="application/pgp-encrypted"
Content-Transfer-Encoding: 7bit

--4b5784e4-fc05-45bb-9a72-e9070a11423c
Date: Wed, 25 Apr 2012 16:01:04 +0200
Mime-Version: 1.0
Content-Type: application/pgp-encrypted;
 charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-ID: <deleted>

Version: 1

--4b5784e4-fc05-45bb-9a72-e9070a11423c
Date: Wed, 25 Apr 2012 16:01:04 +0200
Mime-Version: 1.0
Content-Type: application/octet-stream;
 charset=UTF-8;
 name=msg.asc
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename=msg.asc
Content-ID: <deleted>

-----BEGIN PGP MESSAGE-----
Version: GnuPG v2.0.17 (GNU/Linux)

<PGPDATA>
-----END PGP MESSAGE-----

--4b5784e4-fc05-45bb-9a72-e9070a11423c-- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:49:54.717

我认为您的问题是，加密数据仅包含纯文本，不是完全符合 RFC822 的邮件消息。

正如 PGP/MIME RFC 3156 第 4 节所述，OpenPGP 加密数据

> 在 OpenPGP 加密之前，数据以 MIME 规范格式（正文和标头）写入。

以下是符合 RFC822 标准的邮件示例，应按预期进行处理和显示。

```
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
charset=us-ascii

This is only encrypted! 
```

# gwt - gwt 项目中的 404 错误 - servlet 在 web.xml 中正确定义，但仍然出现 404 错误

> ID：10317410
> 
> 赞同：0
> 
> 时间：2012-04-25T14:07:06.277
> 
> 标签：gwt, gwt2

我正在使用 GWT+Java 后端创建一个 Web 应用程序。主机页面是“App.html” 该应用程序也有一个 RPC，并且主机页面在最初加载时会进行 RPC 调用。

但是，这是我从 Google Chrome 浏览器中的 Javascript 控制台收到的消息-

```
POST http://app.sparkcrawler.com/com.arvindikchari.auth.App/AuthenticationService 404(Not Found) 
```

下面给出的是我的 web.xml 的内容——

```
<?xml version................................>
    <servlet>
    <servlet-name>AuthenticationService</servlet-name>
    <servlet-class>com.arvindikchari.auth.server.AuthenticationServiceImpl</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>AuthenticationService</servlet-name>
    <url-pattern>/com.arvindikchari.auth.App/AuthenticationService</url-pattern>
</servlet-mapping> 
```

我在这里做错了什么？如何解决此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:22:12.450

问题在于您的 servlet 映射。

基本上，您在 web.xml 中有两件事（关于 servlet）：

*   `<servlet>`标记，它定义了 servlet 的别名，以及它的完全限定名称（在你的例子中是 AuthenticationService 和 com.arvindikchari.auth.server.AuthenticationServiceImpl ）

    为`<servlet-mapping>`给定别名指定一个 url 模式（取自`<servlet>`定义）。

它应该像

```
<servlet-mapping>
    <servlet-name>AuthenticationService</servlet-name>
    <url-pattern>/authenticationService</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:13:59.177

我认为您的 servlet 映射 url 模式看起来不对。

通常在映射任何 servlet 时`<url-pattern>`都是这样的。

```
<`<url-pattern>/{app name}/{servlet name}</url-pattern>` 
```

这里的应用名称将与 gwt.xml 文件中的注册应用名称相同。

# c# - 如何使用 OpenPop 保存电子邮件附件

> ID：10317411
> 
> 赞同：12
> 
> 时间：2012-04-25T14:07:07.117
> 
> 标签：c#, email, save, attachment, openpop

我已经创建了一个 Web 电子邮件应用程序，如何**查看**和**保存**附件？

我使用的是第三方 dll **OpenPop ，我可以发送带附件的电子邮件，也可以阅读不带附件的电子邮件。**

这工作正常：

```
Pop3Client pop3Client = (Pop3Client)Session["Pop3Client"]; // Creating newPopClient 
int messageNumber = int.Parse(Request.QueryString["MessageNumber"]);
Message message = pop3Client.GetMessage(messageNumber);
MessagePart messagePart = message.MessagePart.MessageParts[1];
lblFrom.Text = message.Headers.From.Address; // Writeing message. 
lblSubject.Text = message.Headers.Subject;
lblBody.Text=messagePart.BodyEncoding.GetString(messagePart.Body); 
```

代码的第二部分显示附件的内容，但这仅在它是文本文件时才有用。我需要能够**保存**附件。此外，我在此处的代码的底部部分会覆盖我的邮件正文，因此如果我收到附件，我将无法查看我的邮件正文。

```
if (messagePart.IsAttachment == true) { 
    foreach (MessagePart attachment in message.FindAllAttachments()) { 
        if (attachment.FileName.Equals("blabla.pdf")) { // Save the raw bytes to a file
            File.WriteAllBytes(attachment.FileName, attachment.Body); //overwrites MessagePart.Body with attachment 
        } 
    } 
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-02-18T13:44:50.677

如果有人仍在寻找答案，这对我来说很好。

```
var client = new Pop3Client();
try
{            
    client.Connect("MailServerName", Port_Number, UseSSL); //UseSSL true or false
    client.Authenticate("UserID", "password");   

    var messageCount = client.GetMessageCount();
    var Messages = new List<Message>(messageCount);

    for (int i = 0;i < messageCount; i++)
    {
        Message getMessage = client.GetMessage(i + 1);
        Messages.Add(getMessage);
    }

    foreach (Message msg in Messages)
    {
        foreach (var attachment in msg.FindAllAttachments())
        {
            string filePath = Path.Combine(@"C:\Attachment", attachment.FileName);
            if(attachment.FileName.Equals("blabla.pdf"))
            {
                FileStream Stream = new FileStream(filePath, FileMode.Create);
                BinaryWriter BinaryStream = new BinaryWriter(Stream);
                BinaryStream.Write(attachment.Body);
                BinaryStream.Close();
            }
        }
    }
}
catch (Exception ex)
{
    Console.WriteLine("", ex.Message);
}
finally
{
    if (client.Connected)
        client.Dispose();
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-05T06:49:21.330

对于未来的读者来说，更新版本的 Pop3 有更简单的方法

```
using( OpenPop.Pop3.Pop3Client client = new Pop3Client())
        {
            client.Connect("in.mail.Your.Mailserver.com", 110, false);
            client.Authenticate("usernamePop3", "passwordPop3", AuthenticationMethod.UsernameAndPassword);
            if (client.Connected)
            {
                int messageCount = client.GetMessageCount();
                List<Message> allMessages = new List<Message>(messageCount);
                for (int i = messageCount; i > 0; i--)
                {
                    allMessages.Add(client.GetMessage(i));
                }
                foreach (Message msg in allMessages)
                {
                    var att = msg.FindAllAttachments();
                    foreach (var ado in att)
                    {
                        ado.Save(new System.IO.FileInfo(System.IO.Path.Combine("c:\\xlsx", ado.FileName)));
                    }
                }
            }
           } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-12T12:57:03.250

该类`OpenPop.Mime.Message`具有`ToMailMessage()`将 OpenPop 的 Message 转换为 的方法，`System.Net.Mail.MailMessage`该方法具有一个`Attachments`属性。尝试从那里提取附件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T16:24:10.530

我很久以前写过这个，但是看看我用来在 POP 服务器上的电子邮件消息中保存 XML 附件的这段代码：

```
OpenPOP.POP3.POPClient client = new POPClient("pop.yourserver.co.uk", 110, "your@email.co.uk", "password_goes_here", AuthenticationMethod.USERPASS); 
if (client.Connected) {
int msgCount = client.GetMessageCount();

/* Cycle through messages */
for (int x = 0; x < msgCount; x++)
    {
        OpenPOP.MIMEParser.Message msg = client.GetMessage(x, false);
        if (msg != null) {
            for (int y = 0; y < msg.AttachmentCount; y++)
            {
                Attachment attachment = (Attachment)msg.Attachments[y];

                if (string.Compare(attachment.ContentType, "text/xml") == 0)
                {
                    System.Xml.XmlDocument doc = new System.Xml.XmlDocument();

                    string xml = attachment.DecodeAsText();
                    doc.LoadXml(xml);
                    doc.Save(@"C:\POP3Temp\test.xml");
                }
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-07T05:12:28.730

```
 List<Message> lstMessages = FetchAllMessages("pop.mail-server.com", 995, true,"Your Email ID", "Your Password"); 
```

上面的代码行使用相应的弹出邮件服务器从您的电子邮件中获取所有消息的列表。

例如，要获取列表中最新（或第一封）电子邮件的附件，您可以编写以下代码。

```
 List<MessagePart> lstAttachments = lstMessages[0].FindAllAttachments();  //Gets all the attachments associated with latest (or first) email from the list.
 for (int attachment = 0; attachment < lstAttachments.Count; attachment++)
 {
         FileInfo file = new FileInfo("Some File Name");
         lstAttachments[attachment].Save(file);
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-25T19:37:54.140

```
 private KeyValuePair<byte[], FileInfo> parse(MessagePart part)
    {
        var _steam = new MemoryStream();
        part.Save(_steam);
        //...
        var _info = new FileInfo(part.FileName);
        return new KeyValuePair<byte[], FileInfo>(_steam.ToArray(), _info);
    }

    //... How to use
    var _attachments = message 
        .FindAllAttachments()
        .Select(a => parse(a))
    ; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-04-16T04:29:53.343

以防万一有人想要 VB.NET 的代码：

```
For Each emailAttachment In client.GetMessage(count).FindAllAttachments
    AttachmentName = emailAttachment.FileName
    '----// Write the file to the folder in the following format: <UniqueID> followed by two underscores followed by the <AttachmentName>
    Dim strmFile As New FileStream(Path.Combine("C:\Test\Attachments", EmailUniqueID & "__" & AttachmentName), FileMode.Create)
    Dim BinaryStream = New BinaryWriter(strmFile)
    BinaryStream.Write(emailAttachment.Body)
    BinaryStream.Close()
Next 
```

# c# - 将过滤后的数据从数据集获取到数据表

> ID：10317416
> 
> 赞同：6
> 
> 时间：2012-04-25T14:07:17.260
> 
> 标签：c#, ado.net, datatable, .net-2.0

如何将数据从数据集过滤到数据表？喜欢代码->

```
DataRow[] dr = DS.Tables[0]
    .Select("STAGENAME='Develop' AND DEVLAPSEDAYS IS NOT NULL"); 
```

我如何在这里使用数据表？

以下代码不反映更改->

```
DataTable FilteredDataD = DS.Tables[0];
if (FilteredDataD.Rows.Count > 0) {
    FilteredDataD.DefaultView.RowFilter = "STAGENAME='Develop' AND DEVLAPSEDAYS IS NOT NULL";
    FilteredDataD.DefaultView.ToTable();
} 
```

是否可以使用上述过滤器删除列，例如“STAGENAME='Develop' AND DEVLAPSEDAYS IS NOT NULL”+ FilteredDataD.column("col_name")...假设我有 5 列仅显示 4，我无法删除col_name 来自我的查询。有办法吗？

回复

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T14:10:34.483

尝试改用 LINQ：

```
var table = DS.Tables[0].AsEnumerable().Where(
    r => r.Field<string>("STAGENAME") == "Develop" && r.Field<int?>("DEVLAPSEDAYS").HasValue).AsDataView().ToTable(); 
```

**编辑**更改`AsDataView`为`AsDataView()`语法准确性。
**编辑**提供 .NET 2.0 兼容的解决方案

```
DataTable table = DS.Tables[0];
if (table.Rows.Count > 0)
{
    table.DefaultView.RowFilter = "STAGENAME = 'DEVELOP' AND DEVLAPSEDAYS IS NOT NULL";
    table = table.DefaultView.ToTable(); 
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-25T14:10:10.083

您可以编写一个扩展方法（使用 C# 3），如下所示：

```
public static DataTable Filter(this DataTable dataTable, string selectFilter)
{
    var filteredTable = dataTable.Clone();
    var rows = dataTable.Select(selectFilter).ToList();
    rows.ForEach(filteredTable.ImportRow);
    return filteredTable;
} 
```

然后像下面这样使用它：

```
DataTable dataTable = DS.Tables[0]
    .Filter("STAGENAME='Develop' AND DEVLAPSEDAYS IS NOT NULL"); 
```

* * *

**更新**，因为您说您使用的是 C# 2.0（因此扩展方法和 LINQ 不是一个选项），您可以使用它来代替：

```
public static DataTable GetFilteredTable(
    DataTable sourceTable, string selectFilter)
{
    var filteredTable = sourceTable.Clone();
    var rows = sourceTable.Select(selectFilter);
    foreach (DataRow row in rows)
    {
        filteredTable.ImportRow(row);
    }
    return filteredTable;
}

DataTable dataTable = GetFilteredTable(
    DS.Tables[0], "STAGENAME='Develop' AND DEVLAPSEDAYS IS NOT NULL"); 
```

# matlab - 在 Matlab 轴中，如何在保留所有轴属性的同时只更新数据？

> ID：10317423
> 
> 赞同：5
> 
> 时间：2012-04-25T14:07:37.767
> 
> 标签：matlab, matlab-figure, axis-labels

我需要制作一部电影。假设，我创建了一个轴并在其上绘制了一些非常定制的内容：

```
figure;
ax = plot(x, y, 'linewidth', 3, 'prop1', value1, 'prop2', value2, ...);
grid minor;
axis(ax, [xmin xmax ymin ymax]);
legend(ax, ...);
xlabel(ax, ...);
ylabel(ax, ...);
title(ax, ...); 
```

现在我运行一个循环，其中只有 的值`y`被更新。

```
for k = 1 : N
% y changes, update the axis
end 
```

用新的`y`（或`x`和`y`）更新轴，保持所有轴属性的最快和最简单的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T14:30:07.577

一种快速的方法是简单地更新您绘制的数据的 y 值：

```
%# note: plot returns the handle to the line, not the axes
%# ax = gca returns the handle to the axes
lineHandle = plot(x, y, 'linewidth', 3, 'prop1', value1, 'prop2', value2, ...);

%# in the loop
set(lineHandle,'ydata',newYdata) 
```

**编辑**如果有多行怎么办，即`lineHandle`是一个向量？您仍然可以一步更新；不过，您需要将数据转换为元胞数组。

```
%# make a plot with random data
lineHandle = plot(rand(12));

%# create new data
newYdata = randn(12);
newYcell = mat2cell(newYdata,12,ones(1,12));

%# set new y-data. Make sure that there is a row in 
%# newYcell for each element in lineH (i.e. that it is a n-by-1 vector
set(lineHandle,{'ydata'},newYcell(:) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:27:22.957

只需将轴句柄传回后续绘图命令

IE

```
plot(ax, ...) 
```

而不是

```
ax = plot(...) 
```

# asp.net-mvc - asp.net MVC 3中视图模型的范围

> ID：10317425
> 
> 赞同：6
> 
> 时间：2012-04-25T14:07:39.357
> 
> 标签：asp.net-mvc, model-view-controller

我在[网上读到](http://lostechies.com/jimmybogard/2009/06/30/how-we-do-mvc-view-models/)使用“厨房水槽”模型是不好的做法：

> 规则#3——视图决定了视图模型的设计。只有渲染视图所需的内容才会通过 ViewModel 传入。
> 
> 如果一个 Customer 对象有 50 个属性，但一个组件只显示它们的名称，那么我们创建一个只有这两个属性的自定义 ViewModel 类型。

然而，Jimmy Bogard 随后对这有多好的解释给我留下了一些疑问。让我的模型只包含客户列表非常容易，我什至可以使用我的 POCO。

*那么现在我可以为网站上的每个*页面创建*自定义*的小视图模型片段了吗？使用 Customer 属性的每个页面都会得到一个，但当然不能共享，因为某些信息是无关的，例如，如果一个页面使用 Age 而不是 Name。两个新的迷你视图模型类对吗？

 *这非常耗时，并且似乎会导致一百万个小自定义视图模型 - 有人可以详细说明这种方法的实用性以及为什么更简单的方法不好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T14:35:09.220

视图模型类不仅可以用于传递值，还可以定义数据类型（数据注释）、验证规则和与模型中使用的不同的关系。我现在想到的一些优点：

*   当您更改用户密码、更改其基本数据或订阅设置时，有不同的验证规则。在一个模型类中定义所有这些规则可能很复杂。当使用不同的视图模型时，它看起来更好更干净。
*   使用视图模型还可以为您带来性能优势。如果要显示用户列表，可以仅使用 id 和名称定义视图模型，并使用索引从数据库中检索它。如果您检索了整个对象并将其传递给视图，那么您从数据库中传输的数据将超出您的需要。
*   您可以为视图模型定义显示和编辑器模板，并使用 html 帮助器在不同页面上重用它们。当您为模型 POCO 定义模板时，它看起来更糟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T14:18:03.933

如果您将 POCO 对象用作视图模型，那么您实际上将显示您的私有对象并破坏封装。这反过来又会使您的模型很难在不更改相应视图的情况下进行更改。

您的数据对象可能包含仅适用于数据访问层的详细信息。如果您将这些东西暴露给视图，那么有人可能会更改您没想到会更改的那些值并导致错误。

许多与在 OO 语言中拥有私有成员相同的原因都适用于这种推理。话虽如此，它仍然经常被破坏，因为创建所有这些“一次性”模型需要大量额外的工作，而这些模型只能使用一次。存在用于创建这类模型的框架，尽管我不知道名称，它可以将对象联系在一起并挑选出有趣的属性，从而消除创建特定视图模型的一些苦差事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T15:35:57.873

您的视图模型告诉视图应如何显示数据。它表达了模型。我认为没有必要有两个视图模型，除非你有两种方法来表达你的模型。仅仅因为你有两个页面，并不意味着你将以任何不同的方式显示数据，所以当它可以在一个可重用的视图模型中时，我不会浪费时间制作两个迷你视图模型，想象一下如果以后你有一个页面需要姓名和年龄，您会创建另一个视图模型吗？这绝对是愚蠢的。但是，如果您有两个页面都显示“年龄”并且需要以不同的方式显示，那么我会创建另一个页面。*

# iphone - 我在哪里可以看到 testflightapp.com 上的 TFLog 输出？

> ID：10317426
> 
> 赞同：27
> 
> 时间：2012-04-25T14:07:43.403
> 
> 标签：iphone, logging, testflight

我`TFLog`在我的 iPhone 应用程序中使用，但我可以在[https://testflightapp.com](https://testflightapp.com)上的哪个位置查看输出？

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-04-27T17:52:43.897

我只是通过反复试验和在 TestFlight 网站上的大量点击发现了这一点。它被埋得如此之深，以至于我认为还没有办法在他们的网站上查看输出！

1.  单击 Builds，然后选择您感兴趣的应用程序的构建
2.  单击左侧边栏中的会话
3.  单击您感兴趣的用户的会话
4.  单击您感兴趣的单个会话右侧的“i”信息图形
5.  单击出现的窗口右侧的事件下拉菜单，然后选择日志
6.  显示 TFLog 输出。请注意，它与在该会话中通过的任何检查点混合在一起

# powershell - Powershell - 文件已存在时的另存为功能

> ID：10317427
> 
> 赞同：3
> 
> 时间：2012-04-25T14:07:43.403
> 
> 标签：powershell, save-as

我正在尝试运行一些代码来查找目录和子目录中的所有 .doc 和 .docx 文件，然后将每个文件转换为 PDF 格式。

下面的代码仅在这些目录中没有 pdf 的实例时才有效，即它仅在第一次时有效。以后每次它都会失败：

> 使用“2”参数调用“SaveAs”的异常：“命令失败”在 C:\convert\convertword.ps1:12 char:13 + $doc.saveas <<<< ($path, $wdFormatPDF) + CategoryInfo : NotSpecified: (:) [], MethodInvocationException + FullyQualifiedErrorId : ComMethodTargetInvocation

当我删除以前创建的 PDF 并重新运行 PS 时，它工作正常。因此，我只能假设我的`SaveAs`函数中缺少一个开关或参数，它以某种方式强制覆盖？

```
$wdFormatPDF = 17
$word = New-Object -ComObject word.application
$word.visible = $false
$folderpath = "c:\convert\*"
$fileTypes = "*.docx","*doc"
Get-ChildItem -path $folderpath -recurse -include $fileTypes |
foreach-object `
{
$path =  ($_.fullname).substring(0,($_.FullName).lastindexOf("."))
"Converting $path to pdf ..."
$doc = $word.documents.open($_.fullname)
$doc.saveas($path, $wdFormatPDF) 
$doc.close()
}
$word.Quit() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T09:47:24.107

好的，我终于认为我已经找到了问题所在。它是锁定文件的**Windows 资源管理器预览窗格。**我已经打开了正在创建和转换文件的目录的显示预览窗格，这一定是在 pdf 上创建了文件锁，因此脚本无法保存新的 pdf。我在我的 Windows 资源管理器中关闭了预览窗格，脚本现在可以重复运行！因此，Powershell 脚本没有任何问题，但感谢所有输入人员。这是我可以找到的关于该主题的最接近的 MS 知识库文章的链接[http://support.microsoft.com/kb/942146](http://support.microsoft.com/kb/942146)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T16:01:19.607

尝试这个：

```
$word.displayalerts = $false
$doc.saveas($path, $wdFormatPDF) # with Word2010 I've to use  $doc.saveas([ref]$path, [ref]$wdFormatPDF)
$word.displayalerts = $true 
```

没有出现错误，但我使用的是 Word2010 我无法用其他版本测试它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T15:24:05.330

根据[SaveAs](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word._document.saveas.aspx)和[SaveAs2](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word._document.saveas2.aspx)的文档，没有可以覆盖的标志。因此，您可以在保存之前将其删除，如下所示：

```
Remove-Item -Path $path -Force -ErrorAction SilentlyContinue
$doc.saveas ($path, $wdFormatPDF) 
```

# c++ - 使用带有向量作为成员变量的类的 boost 内存池

> ID：10317430
> 
> 赞同：1
> 
> 时间：2012-04-25T14:07:57.620
> 
> 标签：c++, memory-management

我正在尝试使用 boost::object_pool 将内存分配给包含向量作为成员变量的类型的对象。

```
class X{
std::vector<Type> v1;
std::vector<Type> v2;

int a;
double b;
..
};

void func()
{
      boost::object_pool<X> p;
      for (int i = 0; i < 10000; ++i)
      {
        X * const t = p.malloc();

      }
} 
```

现在 boost::object_pool 的构造函数使用 sizeof(X) 来查找 X 的大小，因此它无法确定成员变量 v1 和 v2 会在运行时增长。

1.  我猜测它可能会导致将对象复制到不同的位置，这将导致性能损失，而不是加速它，这是使用内存池的目的。我的猜测正确吗？如果不是，当 v1 和 v2 在运行时增长时还会发生什么？

2.  类型向量（或在运行时增长的任何其他类型）的成员变量是如何在内存中放置的？对象是否包含指向堆中向量的指针而不是向量本身？如何确保当向量增长时，它们使用池中的内存？

3.  我在运行时创建了很多 X 类型的对象。boost::object_pool 是在这种情况下使用的适当接口吗？如果不是，我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T14:11:53.753

sizeof(v1) 和 sizeof(v2) 在运行时不会增长。他们在内部使用指针和堆分配。

如果您需要分配大量相同类型的对象，并且能够一次快速删除它们，那么池是合适的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T14:14:39.523

你有一些不正确的假设。因为底层数组在`std::vector`堆上，所以`sizeof()`永远不会改变。中不应该有任何复制`boost::object_pool`。至于这是否适合您，这取决于您计划创建和销毁`X`对象的频率。

# java - 字节数组列表和以字节数组为值的哈希图之间的性能差异

> ID：10317434
> 
> 赞同：2
> 
> 时间：2012-04-25T14:08:19.767
> 
> 标签：java

我想根据性能建议哪个更好？

列表<字节[]>

或者

HashMap<String,byte[]>

对我来说，关键不重要。我将只在对象中存储 2 的列表大小。第一个代表一个常数，另一个代表另一个常数。

除了两种之外还有没有更好的解决方法也请建议我。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T14:11:13.933

您如何将列表与地图进行比较？它们是完全不同的东西。此外，这取决于您执行的操作。

最后，您将具体实现（哈希图）与抽象接口（列表）进行比较。这是没有意义的。

如果您不需要密钥，则不需要地图。至于不同列表实现的性能，它们记录在 javadoc 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:10:50.287

1.  如果您没有键值关系，请不要使用映射。
2.  不要将泛型与数组混合（例如`List<byte[]>`）。

如果两者不相关，则使用两个单独`byte[]`的变量，如果是，则使用`byte[][]`（假设您不能这样做`List<List<Byte>>`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T14:15:02.967

为什么不创建一个 pojo 类来保存这些值？

```
Class ConstantHolder {

  private final byte[] constant1;
  private final byte[] constant2;

  public Holder(byte[] constant1, byte[] constant2) {
    this.constant1 = constant1;
    this.constant2 = constant2;
  }

  getters for constants;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T14:25:35.410

列表：
在以下情况下，列表垂直工作更快：

1.  在开头和结尾添加一个新对象
2.  在以下情况下，在开头和结尾删除List 在垂直方向上的工作速度较慢：
3.  当它必须垂直搜索时，搜索会有点慢，因为对象是链接链表明智的。
4.  在中间添加和删除。

HashMap：是一个map，可以通过key进行纵横搜索：

1.  迭代器用于搜索并且添加速度很慢（如果适用于此检查唯一键）
2.  删除速度很快
3.  搜索速度很快

# javascript - 扩展 HTML 模板？

> ID：10317435
> 
> 赞同：2
> 
> 时间：2012-04-25T14:08:19.993
> 
> 标签：javascript, templates, underscore.js

我正在创建一个 Web 应用程序框架，供我部门的其他团队使用，以标准化我们的 Web 应用程序的 UI。它是通过 underscore.js 使用 HTML 模板用 javascript 编写的。然而，为了使应用程序完全可扩展，我希望他们能够在不修改源代码的情况下扩展他们认为合适的 HTML 模板。

* * *

**来源**

*模板.html*

```
...
<script type="text/template" id="fooTemplate">
  <div class="foo">
  </div>
</script>
<script type="text/template" id="barTemplate">
  <p>Bar!</p>
</script>
... 
```

**执行**

*新模板.html*

```
...
<!-- Only overwrite foo, not bar !-->
<script type="text/template" id="fooTemplate">
  <ul class="foo">
    <li class="bar">Blah!</li>
  </ul>
</script>
... 
```

* * *

有没有一种方法可以让用户直观地扩展 HTML 模板，而不会强制他们覆盖文件并复制/粘贴他们没有修改的模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T18:03:44.387

`id`如果没有一堆服务器端处理来处理唯一性问题，您将无法使用属性来识别您的模板。但是您可以使用类来识别您的模板。

如果您按覆盖顺序将所有模板 HTML 文件混合在一起（首先是“基本”模板，然后是“子模板”）并使用`class`属性来标识模板：

```
<!-- templates.html -->
<script type="text/template" id="fooTemplate">
  <div class="foo">
  </div>
</script>
<script type="text/template" id="barTemplate">
  <p>Bar!</p>
</script>
<!-- newTemplates.html -->
<script type="text/template" id="fooTemplate">
  <ul class="foo">
    <li class="bar">Blah!</li>
  </ul>
</script> 
```

然后你可以使用类似的东西

```
var foo = _.template($('.fooTemplate:last').html());
var bar = _.template($('.barTemplate:last').html()); 
```

访问您的模板。

演示：http: [//jsfiddle.net/ambiguous/gYHkF/](http://jsfiddle.net/ambiguous/gYHkF/)

* * *

您也可以坚持使用`id`s 并尝试从 first 加载模板，如果找不到则`newTemplates.html`回退到它。`templates.html`如果您将模板文件加载到两个单独的变量中，但**不将它们插入 DOM**：

```
var $base = $('stuff from templates.html');
var $subs = $('stuff from newTemplates.html'); 
```

`$subs`然后添加一个简单的函数来在before中查找模板`$base`：

```
function tmpl(id) {
    var $t = $subs.filter('#' + id);
    if($t.length)
        return _.template($t.html());
    return _.template($base.filter('#' + id).html());
} 
```

然后你可以这样做：

```
var foo = tmpl('fooTemplate');
var bar = tmpl('barTemplate'); 
```

正确的事情就会发生。

演示：http: [//jsfiddle.net/ambiguous/EhhsL/](http://jsfiddle.net/ambiguous/EhhsL/)

这种方法还可以轻松缓存已编译的模板，不仅可以避免重复查找，还可以避免一遍又一遍地编译相同的东西：

```
function tmpl(id) {
    if(tmpl.cache.hasOwnProperty(id))
        return tmpl.cache[id];
    var $t = $subs.filter('#' + id);
    if($t.length)
        return tmpl.cache[id] = _.template($t.html());
    return tmpl.cache[id] = _.template($base.filter('#' + id).html());
}
tmpl.cache = { }; 
```

演示：http: [//jsfiddle.net/ambiguous/YpcJu/](http://jsfiddle.net/ambiguous/YpcJu/)

# javascript - 覆盖 Salesforce 页面中的标准按钮

> ID：10317437
> 
> 赞同：0
> 
> 时间：2012-04-25T14:08:22.253
> 
> 标签：javascript, salesforce, apex-code, visualforce

我正在尝试覆盖 Salesforce 页面中的标准按钮（删除）。我用 Visualforce 页面覆盖了它，但我面临的问题是弹出窗口阻止程序。

覆盖按钮的目的是询问用户是否要删除文件并在第三方主机上进行删除。

有什么办法可以停止弹出窗口阻止程序或使用其他压倒一切的方法？我的 visualforce 页面包含一个 js 脚本，它将打开一个弹出窗口。我想知道我是否可以把这个js脚本放在不同的地方！

```
<apex:page standardController="" showheader="false" sidebar="false"> 
    <apex:includeScript value=""/>
    <apex:includeScript value=""/>
        <script language="javascript"> 
            var caseStatus = "{!s__c}";
            try{
                sforce.connection.sessionId = "{!$Api.Session_ID}";
                var isPortalUser = sforce.apex.execute('e','r',{}); 
            }catch(e) {
                alert(e)
            }

                if(caseStatus == "A"){
                window.open('{!$Label.FTP_Attachment_Pro_URL}/sforce/ftp/Delete.aspx?ID={!ENZ__FTPAttachment__c.Id}&OrgID={!$Organization.Id}&SFUrl={!$Label.API_URL}/{!$Organization.Id}&SFSessionID={!$Api.Session_ID}',500,600);
            window.location = '{!$Label.SF_Base_URL}/{!ENZ__FTPAttachment__c.Case__c}';

            }
               else{
                    window.location = '{!$La}';
                    window.alert("a"+ caseStatus);
                } 

    </script> 
</apex:page> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:25:57.710

不要使用 window.open ，因为它是一个弹出窗口，可能会被阻止。

如果您不想要花哨的确认框，可以使用 javascript 确认功能

```
if (confirm('are you sure you want to delete?')) {
  // delete
} else {
  // error
} 
```

如果您需要花哨的方式来询问它，请使用模态框，如[http://jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)上所见，网上有许多易于使用的可用库，可以与其他库一起使用，也可以不使用任何库（jqueryui 链接仅用于说明对话框。

这是一个很好的演示，作为确认模式框（页面上的最后一个演示）

[http://www.ericmmartin.com/projects/simplemodal-demos/](http://www.ericmmartin.com/projects/simplemodal-demos/)

# php - 如何从谷歌地图信息窗口中获取内容？

> ID：10317444
> 
> 赞同：0
> 
> 时间：2012-04-25T14:08:38.337
> 
> 标签：php, google-maps, curl

我正在使用 php 和 cURL 来获取各种网站的内容。

这是一个谷歌地图信息窗口：[https ://google-developers.appspot.com/maps/documentation/javascript/examples/infowindow-simple](https://google-developers.appspot.com/maps/documentation/javascript/examples/infowindow-simple)

现在，我想获取信息窗口中的内容。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T21:17:40.617

在这种特殊情况下，infowindow 中的数据嵌入在 html 本身的 script 标签中，因此从 URL 下载 html，然后创建一个正则表达式来提取 infowindow 的内容（在这种情况下名为 contentString 的变量) 很容易做到。

不过，有些网站并不简单，需要采用各种方法来收集信息。动态网站可以使用 ajax 调用填充信息窗口的内容，或者内容可能包含在单独的脚本或 json 文件中。如果您决定抓取这些网站中的每一个的内容，您可能需要为每个单独的网站进行一些自定义编码。

# php - PHP 服务器端 Google Map API v3 集成

> ID：10317445
> 
> 赞同：5
> 
> 时间：2012-04-25T14:08:40.033
> 
> 标签：php, google-maps-api-3, server-side

我正在尝试使用 Google Map API v3 而不是在客户端完成服务器端的两步任务，但没有找到太多关于如何完成此任务的文档。所以我想知道这里是否有人可以帮助或指导我朝着正确的方向前进。

第一步是使用 PHP 获取地址的地理编码位置。我想我已经弄清楚了，那就是通过 curl 调用[http://maps.google.com/maps/api/geocode/json?sensor=false&address=](http://maps.google.com/maps/api/geocode/json?sensor=false&address=)并处理 JSON 响应。获得地理代码后，我将它们存储在我的数据库中。

第二步是在第一步中的地址的特定半径中找到随机地址。这我似乎无法在服务器端找到如何做。

任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T15:59:59.013

1.  最简单的方法

    > ```
    > $url = 'http://maps.google.com/maps/api/geocode/json?sensor=false&address=' . urlencode($address);     
    > $data = json_decode(file_get_contents($url), true); // insert in the database 
    > ```

2.  使用给定的半径和中心点（lat、lng）搜索：[https ://developers.google.com/maps/articles/phpsqlsearch](https://developers.google.com/maps/articles/phpsqlsearch)

# ms-project - 如何在没有安装任何软件的情况下将 MPP 文件读入 ASP.NET (C#)

> ID：10317446
> 
> 赞同：0
> 
> 时间：2012-04-25T14:08:42.763
> 
> 标签：ms-project, mpxj

我的同事要求我将 .MPP 数据导入 SQL Server 数据库。

这里的转折是我没有安装任何用于管理 .MPP 文件的软件。

在谷歌上搜索了一段时间后，我发现 MPXJ 可以在一定程度上帮助我。因此，我尝试下载，但由于公司安全政策限制而无法下载。例如：我可以打开以下链接：http: [//sourceforge.net/projects/mpxj/files/](http://sourceforge.net/projects/mpxj/files/)

但是，由于该页面已被公司安全策略阻止，我无法单击链接下载该软件。

因此，任何人都可以建议是否无论如何将.MPP数据导入SQL Server数据库？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-30T03:49:22.690

我已将 mpp 文件读入 ASP.Net (C#)。最后，我使用了 MPXJ 库。MPXJ 是一个开源库，对所有人免费。

导入 mpp 文件的另一种方法是使用[oledb](http://webcache.googleusercontent.com/search?q=cache%3aptKf4qXhcOoJ%3awww.msproject.com/OLEDB.htm+microsoft+project+mpp+ole+db+provider&hl=en&ct=clnk&cd=3&gl=us)，但这并不容易。
我认为您应该尝试与您的 IT 部门讨论下载并使用它。

如果您需要任何帮助，请告诉我。

教程[http://www.codeproject.com/Tips/738026/Accessing-MPP-File-using-MPXJ-Lib-using-Csharp](http://www.codeproject.com/Tips/738026/Accessing-MPP-File-using-MPXJ-Lib-using-Csharp)

# php - 你在哪里为 php 中的 heroku facebook 应用程序设置依赖或相关的 php 文件？

> ID：10317449
> 
> 赞同：1
> 
> 时间：2012-04-25T14:08:48.753
> 
> 标签：php, facebook, heroku, database-connection

我听说过一种叫做 pear 或 phing 的东西来设置依赖项，我认为这是某种 php 模块。本质上，我想利用 Heroku 的 5mb 的 postgresql 数据库存储，并且我正在按照 node.js 教程设置 postgresql 数据库。

我不知道 php 中的 makefile，但我认为 php 可能有一个像 c++ 中需要依赖项的文件，但我不确定如何在这方面编写依赖项。我注意到几乎没有关于在任何地方的 facebook 中为 php 设置 postgres db 的信息。我有一种感觉，我应该在 php 文件本身中创建依赖项，来自：[你把你的依赖项放在哪里？](https://stackoverflow.com/questions/10157824/where-do-you-put-your-dependencies)

# asp.net - 如何提高asp.net网站的页面加载时间？

> ID：10317455
> 
> 赞同：2
> 
> 时间：2012-04-25T14:09:09.430
> 
> 标签：asp.net, visual-studio-2008, c#-3.0, performance-testing

大家好，我正在使用 vs2008 c# asp.net。我的项目中有页面，其中包含许多 gridviews 列表视图和文本框、图像上传控件。所有控件均来自带有 vs2008 的标准工具包。我想知道改善项目页面加载时间的可能方法。我听说过视图状态压缩。还有其他建议吗？请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:18:14.640

您应该做的第一件事是测量当前状态，有很多工具可以帮助您完成这项任务：

*   [谷歌页面速度](https://developers.google.com/pagespeed/)
*   [慢](http://yslow.org/)
*   [网页测试](http://www.webpagetest.org/)
*   [Pingdom 工具](http://tools.pingdom.com/fpt/)
*   [提琴手 2](http://fiddler2.com/fiddler2/)
*   [ViewState 大小](https://addons.mozilla.org/en-US/firefox/addon/viewstate-size/)- Firefox 分机。
*   [ViewState 查看器](https://addons.mozilla.org/en-US/firefox/addon/aspnet-viewstate-viewer/?src=api)- Firefox 分机。

你需要测量的东西

*   第一个字节的时间是多少，或者服务器生成页面所需的时间，它应该低于 0.5 秒。如果此时间大于此时间，请使用 Visual Studio 分析器定位瓶颈并优化关键部分
*   测量视图状态大小并分析内容，因为您使用了很多网格视图，这可能是问题所在，因此这里有几十个与该问题相关的[帖子](https://stackoverflow.com/questions/1102385/asp-net-gridviews-viewstates)
*   **了解**ViewState，以及它是如何工作的，[这里是优秀的帖子](http://weblogs.asp.net/infinitiesloop/archive/2006/08/03/Truly-Understanding-Viewstate.aspx)
*   你应该减少请求的数量，将 css 和 JavaScript 组合在一个文件中，有很多[免费工具可以做到这一点](https://www.google.com/#hl=en&output=search&sclient=psy-ab&q=combine+and+minify+&oq=combine+and+minify+&aq=f&aqi=g3&aql=&gs_nf=1&gs_l=hp.3..0l3.252.3002.0.3714.19.15.0.4.4.0.153.1751.4j11.19.0.aKxBz-wcA-I&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=8c7646f229469991&biw=1390&bih=909)
*   开启 IIS gzip 压缩
*   使用 fiddler 查看你的请求是如何在本地缓存的
*   使用[Css Image Sprites](http://www.w3schools.com/css/css_image_sprites.asp)处理小图像
*   使用 asp.net 缓存，它真的很好，它为许多使用场景提供了解决方案，特别是在流量增加是问题的情况下很有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:22:46.533

首先重点优化服务端。如果您有“许多网格视图”，则取决于它们的来源（例如数据库），您可以尝试改进数据访问的处理。搜索对您的应用程序有意义的适当优化技术。

您也可以尝试减少网格的数量。由于要求，这可能不是一个可能的选择。

您还可以查看[将 ViewState 从页面顶部移动到底部](http://www.hanselman.com/blog/MovingViewStateToTheBottomOfThePage.aspx)，以及其他标准客户端优化（减少资源调用的数量，将 css 放在文档头部，将脚本放在文档末尾，启用客户端-side 缓存等...）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T15:25:51.310

**ViewState 分块**

作为压缩的替代方法，您可以考虑对 ViewState 进行分块，这基本上是将 ViewState 划分为多个隐藏字段，而不仅仅是一个。这可以对整体页面性能产生适度的改进。

查看这篇文章：[大 ViewState 和 ViewState 分块](http://weblogs.asp.net/jhallal/archive/2011/07/09/large-viewstate-amp-viewstate-chunking-maxpagestatefieldlength.aspx)

**替代存储**

除了页面上的隐藏字段之外，还有其他几种方法可以存储 ViewState 信息。

查看这篇文章：[使用 ASP.NET 2.0 Provider Architecture 管理 ViewState](http://www.codeproject.com/Articles/18705/Manage-ViewState-Using-ASP-NET-2-0-Provider-Archit)

**视图状态压缩**

就个人而言，我发现压缩`ViewState`网络在性能方面的最大收益，所以如果有可能我肯定会探索它。Telerik 的[RadCompression](http://blogs.telerik.com/blogs/posts/09-02-27/optimization-tip-radcompression-for-viewstate.aspx)模块效果*很好*，但它不是免费的。你也可以自己实现它。

查看有关 ViewState 压缩的这些文章：

*   [在 ASP.NET 中压缩 ViewState](http://geekswithblogs.net/pabothu/archive/2011/10/16/compressing-viewstate-in-asp.net.aspx)
*   [视图状态压缩](http://www.codeproject.com/Articles/14733/ViewState-Compression)

最后，在不需要跟踪 ViewState 的地方，设置`EnableViewState`为 false。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-25T14:22:45.427

*   ViewState Mode 可以设置为 false

即使您使用的是重量级控件，它们也可能不需要“启用” ViewState。因此，请尝试确定您何时不需要它们并将 ViewStateMode 属性设置为 false ：

```
ViewStateMode="Disabled" 
```

这将减小 ViewState 的大小，从而提高性能

*   gzip 压缩

按照本[教程](http://www.codeproject.com/Articles/186233/Utilize-gzip-compression-in-IIS)，您可以设置 ViewState 压缩以减小其大小并提高网站性能

*   监控您的 ViewState 大小

通过使用这个 Mozilla[插件](https://addons.mozilla.org/en-US/firefox/addon/viewstate-size/)，您可以监控 ViewState 的大小并查看这是否是网站运行缓慢的实际原因，因为这也可能与 sql 查询或与 ViewState 不同的其他原因有关

# android - 在处理程序内创建警报对话框

> ID：10317456
> 
> 赞同：3
> 
> 时间：2012-04-25T14:09:11.660
> 
> 标签：android, multithreading

我想从一个处理程序创建一个警报对话框，当线程终止时会发出信号这是我的代码，它导致：

> android.view.WindowManager$BadTokenException: 无法添加窗口 -- 令牌 null 不适用于应用程序

```
Handler handler = new Handler() {
      @Override
      public void handleMessage(Message msg) {

        if (dialog != null)
        {
            dialog.dismiss();
            dialog = null;
        }

        switch (serverResponseCode)
        {
        case 200:
        {
            AlertDialog alertDialog;
            alertDialog = new AlertDialog.Builder(getApplicationContext()).create();
            alertDialog.setTitle("Super :)");
            alertDialog.setMessage("Poza a fost trimisa cu success.");
            alertDialog.setButton("Ok", new DialogInterface.OnClickListener() {

                  public void onClick(DialogInterface dialog, int id) {

                     finish();

                } }); 
            alertDialog.show();
            serverResponseCode = -1;

            break;
        }
        default:
        {
            AlertDialog alertDialog;
            alertDialog = new AlertDialog.Builder(getApplicationContext()).create();
            alertDialog.setTitle("Eroare :(");
            alertDialog.setMessage("Eroare la trimiterea pozei.");
            alertDialog.setButton("Ok", new DialogInterface.OnClickListener() {

                  public void onClick(DialogInterface dialog, int id) {

                     finish();

                } }); 
            alertDialog.show();

            break;
        }
        }

         }
     }; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T14:16:50.610

问题可能是 getApplicationContext() 不是你的活动上下文。

```
 alertDialog = new AlertDialog.Builder(getApplicationContext()).create();
    //should be change to
    alertDialog = new AlertDialog.Builder( YourActivity.this ).create(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T14:11:23.870

您不能使用应用程序上下文来创建对话框。请改用 Activity 上下文。

此外，这种创建对话框的方式必然会在以后产生问题，尤其是在活动因任何原因重新启动时。您应该使用对话框片段或托管对话框（活动的`showDialog()`方法）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T14:14:31.200

我确定您正在 Android 中执行 WebService 请求/响应，那么我建议您在 android 中实现称为[Painless Threading的](http://developer.android.com/resources/articles/painless-threading.html)[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html) ，因为您无需担心线程管理。

仅供参考，内部`doInBackground()`- 编写网络调用逻辑，内部`onPostExecute()`- 显示您要显示的警报对话框。

# hudson - Jenkins 支持集群吗？

> ID：10317459
> 
> 赞同：1
> 
> 时间：2012-04-25T14:09:23.230
> 
> 标签：hudson, jenkins

我是哈德森的用户。我最近搬到了詹金斯。我知道 hudson 不支持服务器集群。詹金斯是否提供了这一点。因为我是新手，所以还要详细说明一些事情。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T23:03:11.127

如果通过集群意味着拥有一个 Web 界面和许多工作人员，是的 Jenkins（就像 Jenkins 从中分叉的 Hudson）支持它，它被称为[Distributed Builds](https://wiki.jenkins-ci.org/display/JENKINS/Distributed+builds)。它允许您在称为奴隶的不同工人上运行作业。

请参阅[Jenkins Wiki 上的分布式构建页面](https://wiki.jenkins-ci.org/display/JENKINS/Distributed+builds)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T15:35:28.180

OS Jenkins 不支持集群。

Cloudbees Jenkins Enterprise 使用活动和备用 Jenkins 主服务器提供 HA 支持。

[http://jenkins-enterprise.cloudbees.com/docs/user-guide-bundle/ha.html](http://jenkins-enterprise.cloudbees.com/docs/user-guide-bundle/ha.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T22:03:20.410

Jenkins 在功能方面与 Hudson 相当接近。Jenkins 项目大约在 18 个月前从 Hudson 分叉出来，基本架构仍然相同。因此，即使不知道集群的确切含义，如果您说 Hudson 不支持集群，我相信 Jenkins 不支持集群。

我听说有传言说正在努力使 Jenkins 具有一些高可用性功能，但我只知道这些。不知道这到底意味着什么或如何实施。

# c# - 会话 cookie 是否足够安全以存储用户 ID？

> ID：10317462
> 
> 赞同：7
> 
> 时间：2012-04-25T14:09:31.440
> 
> 标签：c#, security, session

我正在使用会话 cookie（不是永久的）来保存用户 ID 以了解用户是否已登录。

基本上，用户登录，我们检查凭据，然后设置会话 cookie userID = 37（对于这个特定用户，另一个用户将有 73 或 69，等等......）

```
Session.Add("UserID", 37); 
```

**我的问题是，登录用户是否有可能以某种方式将此会话 cookie 从 37 更改为 73，从而使服务器误以为他实际上是用户 73？如果是，那么我做错了什么，如何处理这种情况？**输入会话用户 ID 和密码哈希并每次检查它们似乎很疯狂？

我们稍后也在查询中使用此用户 ID 值来限制它们。

如果这不是一个确切的代码问题，我很抱歉，但这与我的代码非常相关。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T14:10:39.223

会话 cookie 仅包含会话 ID。它用于识别用户。它只包含什么。此会话的实际信息存储在服务器上。所以这是安全的。用户永远无法更改已存储在服务器上的值。如果您将其存储在会话中，则用户无法更改其 ID。

话虽如此，在处理用户 ID 时，您可以考虑使用[表单身份验证](http://msdn.microsoft.com/en-us/library/ff647070.aspx)来跟踪经过身份验证的用户，而不是使用 Session 重新发明轮子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T14:19:53.057

与客户端状态管理技术相比，ASP.NET 会话状态提供了一个重要的安全优势，因为**实际状态存储在服务器端，而不是沿 HTTP 请求路径暴露在客户端和其他网络实体上**。但是，为了维护应用程序的安全性，需要考虑会话状态操作的几个重要方面。**安全最佳实践分为三大类：防止会话 ID 欺骗和注入、保护后端的状态存储以及确保专用或共享环境中的会话状态部署安全。**

阅读：[保护会话状态](http://msdn.microsoft.com/en-us/magazine/cc163730.aspx#S9)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T14:11:11.503

那不是 cookie，并且是完全安全的，因为它不能由用户更改。cookie 中唯一存储在服务器端的是会话 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T14:37:18.787

正如其他答案所指出的，实际值（示例中为 37）存储在服务器上，而不是客户端上，但这并不意味着您对潜在的攻击免疫。这种机制仍然容易受到跨站点脚本攻击。基本上，存储在客户端 cookie 上的是一些大而长的标识符。如果实际用户以外的其他人获得了该标识符，他们可以将其放入自己的 cookie 中，并且基本上假装是该用户。您可以自己研究更多跨站点脚本（我不是该主题的专家），以了解恶意用户尝试查看其他用户的 cookie 并尝试将其设置为自己的一些常见方式，以及防御此类攻击的方法（我确信浏览器和 ASP 会为您完成其中的一些）。

# java - JDBC 在纯 Java 中运行，但不在 Android 中

> ID：10317468
> 
> 赞同：2
> 
> 时间：2012-04-25T14:10:07.593
> 
> 标签：java, android

此代码在纯 Java 应用程序中**运行良好：**

```
 Connection conn = null;
    Statement inst;

    try {

        Class.forName ("com.microsoft.sqlserver.jdbc.SQLServerDriver").newInstance ();

        conn = DriverManager.getConnection("jdbc:sqlserver://192.168.1.100\\MSSQLSERVER:1433;DatabaseName=Prueba", "sa", "sa1234");
        inst = conn.createStatement();

        inst.executeUpdate("INSERT INTO TIENDAS(NOMBRE) VALUES ('ZZZZZZZ') ");

    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

但在 Android 项目中，我收到错误**'Socket closed'**。

我正在使用 Eclipse Helios。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T14:14:20.560

Android 不是 Java 的完整实现，因此该驱动程序（如果它是类型 4 驱动程序）可能正在使用 Java 中尚未移植到 Android 的某些功能。这首先是在不知道它是否真的会在 Android 上运行的情况下在 Android 中使用代码的问题。

现在更普遍地关心你在做什么。除非您正在为 android 开发 SQL 浏览器，否则我会非常关心您在做什么。为了让您的 Android 客户端看到数据库意味着它必须通过互联网公开。这是一个非常糟糕的主意。将您的数据库暴露给世界其他地方意味着他们不必使用您的应用程序来连接它。我可以启动任何旧的 SQL 浏览器并开始猜测密码、四处破解、尝试默认帐户。因此，如果您还没有锁定您的数据库，那么问题不是是否有人会破解它，而是何时。

如果不通过 Tomcat、Jetty 等 APP 服务器，您不应该直接从 Android 访问可远程访问的数据库。经验法则：如果您发现自己在防火墙上向所有人开放数据库端口以使您的解决方案正常工作. 你肯定做错了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:13:22.973

您是否拥有 Android 清单中定义的互联网权限？

# r - 用于从 ggplot2 中的表格对象绘制一条线的简单模拟

> ID：10317470
> 
> 赞同：2
> 
> 时间：2012-04-25T14:10:12.247
> 
> 标签：r, ggplot2

我一直无法找到一个简单的模拟来从 ggplot2 中的表格对象绘制折线图。鉴于包装的优雅和实用性，我觉得我一定遗漏了一些非常明显的东西。作为一个例子，考虑一个具有年度观察的数据框：

```
dat<-data.frame(year=sample(c("2001":"2010"),1000, replace=T)) 
```

以及以 R 为基础的快速时间序列图：

```
plot(table(dat$year), type="l") 
```

切换到 qplot，返回错误“尝试应用非函数”：

```
qplot(table(dat$year), geom="line") 
```

ggplot2 需要一个数据框。很公平。但这会返回相同的错误。

```
qplot(year, data=dat, geom="line") 
```

经过一番搜索和摆弄后，我放弃了`qplot`，并提出了以下方法，其中包括指定线几何、合并计数和删除最终值以避免绘制零。

```
ggplot(dat, aes(year) ) + geom_line(stat = "bin", binwidth=1, drop=TRUE) 
```

这似乎是一个相当长的步行街区。而且它仍然不能完全令人满意，因为这些箱与 x 轴上的年中值不完全一致。我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:15:52.307

也许比你想要的更复杂，但是：

```
qplot(Var1,Freq,data=as.data.frame(table(dat$year)),geom="line",group=1) 
```

（这`group=1`是必要的，因为 Year 变量 ( `Var1`) 作为因子返回...）

如果您不需要它作为单行，您可以`ytab <- as.data.frame(table(dat$year))`先使用它来提取表格并将其转换为数据框......

按照 Brian Diggs 的回答，如果你愿意建造更多的`fortify`机器，你可以把它浓缩一点：

如果可能，将一个因子转换为数值的实用函数：

```
conv2num <- function(x) {
    xn <- suppressWarnings(as.numeric(as.character(x)))
    if (!all(is.na(xn))) xn else x
} 
```

还有一种`fortify`方法将表格转换为数据框，然后尝试使列数字化：

```
fortify.table <- function(x,...) {
    z <- as.data.frame(x)
    facs <- sapply(z,is.factor)
    z[facs] <- lapply(z[facs],conv2num)
    z
} 
```

现在这几乎可以按照您的意愿工作：

```
qplot(Var1,Freq,data=table(dat$year),geom="line") 
```

（如果可以`table`选择保留交叉分类因子的数字性质，那会更好/更容易......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T20:28:42.057

扩展 Ben 的答案，“标准”方法是从表中创建数据框，此时您可以将年份转换回数字。

```
ytab <- as.data.frame(table(dat$year))
ytab$Var1 <- as.numeric(as.character(ytab$Var1)) 
```

以下任一方法将起作用：

```
ggplot(ytab, aes(Var1, Freq)) + geom_line()
qplot(Var1, Freq, data=ytab, geom="line") 
```

![在此处输入图像描述](../Images/95d09d851e4347c626dd669f74912b6f.png)

另一种方法是创建一个`fortify`函数，将表转换为数据框，并使用它。

```
fortify.table <- as.data.frame.table 
```

然后你可以直接传递表格而不是数据框。但`Var1`现在仍然是一个因素，因此您需要`group=1`跨年连接线路。

```
ggplot(table(dat$year), aes(Var1, Freq)) + geom_line(aes(group=1))
qplot(Var1, Freq, data=table(dat$year), geom="line", group=1) 
```

![在此处输入图像描述](../Images/98bcf4bdb4646b9d88df9cb6e433a6d7.png)

# html - 如何保留应用于输入框的文本转换格式？

> ID：10317476
> 
> 赞同：2
> 
> 时间：2012-04-25T14:10:33.220
> 
> 标签：html, css

我正在对网页文本框中的输入应用一些格式。

```
 <input style="text-transform: uppercase"
      type="text"
      class="textbox"
      id="code"
      name="code"
      D_LABEL="code"
      beanProperty="code"
      value=""
      D_MANDATORY="true"
      maxlength="10"/> 
```

这工作正常。我将值保存在数据库中。但是保存的值不是大写的。如何保存与捕获时文本框中显示的值相同的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T14:13:23.590

它不会是大写的，文本是小写的，或者取决于输入方式的大小写，CSS 只是操纵*可视*层，**而不是数据**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:24:10.783

以上答案为您指明了正确的方向。在将数据发送到服务器之前，您可以简单地将输入框文本在 javascript 中转换为大写。使用`<string>.toUpperCase()`方法实现转换

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T14:13:09.340

没有办法在客户端保证这一点。您需要在服务器端执行字符串操作。

PHP 示例：

```
$input = $_POST["code"];
$val = strtoupper($input); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T14:14:04.830

“价值”和“表现”是有区别的。该值保持原样 - 它仅由 CSS 以大写形式呈现。如果您需要大写值，则需要在传输到服务器后对其进行转换。

# java - 如何检查是否在十六进制字符串中设置了位？

> ID：10317477
> 
> 赞同：3
> 
> 时间：2012-04-25T14:10:33.487
> 
> 标签：java, hex, bit-manipulation

变速杆...

我必须做点什么，让我心烦意乱。

我得到一个十六进制值作为字符串（例如：“AFFE”）并且必须决定是否设置了字节一的第 5 位。

```
public boolean isBitSet(String hexValue) {
    //enter your code here
    return "no idea".equals("no idea")
} 
```

有什么提示吗？

问候，

博斯科普

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T14:13:47.410

最简单的方法是转换`String`为`int`，并使用位运算：

```
public boolean isBitSet(String hexValue, int bitNumber) {
    int val = Integer.valueOf(hexValue, 16);
    return (val & (1 << bitNumber)) != 0;
}               ^     ^--- int value with only the target bit set to one
                |--------- bit-wise "AND" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:27:23.430

假设字节一由最后两位数字表示，并且字符串的大小固定为 4 个字符，那么答案可能是：

```
return (int)hexValue[2] & 1 == 1; 
```

如您所见，您不需要将整个字符串转换为二进制来评估第 5 位，它确实是第 3 个字符的 LSB。

现在，如果十六进制字符串的大小是可变的，那么您将需要类似：

```
return (int)hexValue[hexValue.Length-2] & 1 == 1; 
```

但是由于字符串的长度可以小于 2，所以它会更安全：

```
return hexValue.Length < 2 ? 0 : (int)hexValue[hexValue.Length-2] & 1 == 1; 
```

正确答案可能会有所不同，具体取决于您认为是字节 1 和位 5 的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T14:14:03.667

这个怎么样？

```
 int x = Integer.parseInt(hexValue);
 String binaryValue = Integer.toBinaryString(x); 
```

然后您可以检查字符串以检查您关心的特定位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-28T21:37:35.020

使用 BigInteger 和它的 testBit 内置函数

```
static public boolean getBit(String hex, int bit) {
    BigInteger bigInteger = new BigInteger(hex, 16);
    return bigInteger.testBit(bit);
} 
```

# c# - 多国验证规则

> ID：10317481
> 
> 赞同：1
> 
> 时间：2012-04-25T14:10:43.173
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3, data-annotations

在我的多国站点中，我有一个用于创建地址的表格。我想按国家/地区自定义验证规则（例如：FR ZipCode 长度 8，美国：10...），并且我在许多解决方案之间犹豫不决：按国家/地区的一个 ViewModel、参数化注释、DataFilter...任何想法？

```
public class Address
{
    [Required]
    public string Name { get; set; }
    [StringLength(lengthByCountry)]
    public string ZipCode { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:33:38.673

您可以使用[`CustomValidationAttribute`](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.customvalidationattribute.aspx)编写自己的验证器，根据国家/地区对邮政编码进行特定国家/地区的验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T15:34:43.570

如果需要在同一个提交中指定国家和邮政编码，那么我建议让您的模型实现 IValidatableObject，它允许您基于值的组合进行验证。

```
public class Address : IValidatableObject
{
    [Required]
    public string Name { get; set; }

    public string Country { get; set; }

    public string ZipCode { get; set; }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {

        var results = new List<ValidationResult>();

        switch (Country)
        {
            case "France":
                if (ZipCode.Length < 8)
                    results.Add(
                        new ValidationResult("French zip codes must be at least 8 characters", new List<string> { "ZipCode" })
                    );
                break;

            case "U.S.":
                if (ZipCode.Length < 10)
                    results.Add(
                        new ValidationResult("American zip codes must be at least 10 characters", new List<string> { "ZipCode" })
                    );
                break;

            // Etc.
        }

        return results;

    }

} 
```

# java - 为什么在实体持续存在时设置属性？

> ID：10317482
> 
> 赞同：3
> 
> 时间：2012-04-25T14:10:48.777
> 
> 标签：java, spring, hibernate, jpa, persistence

当我通过 JPA-Hibernate 持久化新创建的实体时，会调用一些 setter 方法。为什么？Hibernate 必须读取所有属性，但是为什么将值（不是 ID）设置回实体？

## 代码

```
public void run(){
    System.out.println("Before transaction");
    loadInitialData();
    System.out.println("After transaction");
}

@Transactional(propagation = Propagation.REQUIRES_NEW, rollbackFor = Throwable.class)
private void loadInitialData() {
    Contract contract = new Contract();
    contract.setAmountMonth(new BigInteger("42"));
    System.out.println("Before persist");
    entityManager.persist(contract);
    System.out.println("After persist");
} 
```

## 输出

```
Before transaction
Contract.setAmountMonth null -> 42              ---- OK, my call
Before persist
Contract.getAmountMonth 42 -> 42
Contract.setAmountMonth 42 -> 42                !!!!!! WHY?
After persist
Contract.getAmountMonth 42 -> 42
Contract.getAmountMonth 42 -> 42
Contract.getAmountMonth 42 -> 42
After transaction 
```

## 弹簧配置

```
 <persistence-unit name="org.drools.persistence.jpa.local">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <non-jta-data-source>jdbc/dataSource</non-jta-data-source>
        <mapping-file>META-INF/orm.xml</mapping-file>
        <class>org.drools.persistence.info.SessionInfo</class>
        <properties>
            <property name="hibernate.hbm2ddl.auto" value="create-drop" />
            <property name="hibernate.show_sql" value="true" />
            <property name="hibernate.transaction.flush_before_completion" value="true" />
            <property name="hibernate.cache.provider_class" value="org.hibernate.cache.HashtableCacheProvider" />
        </properties>
    </persistence-unit> 
```

## 实体

```
public class Contract  {
    private volatile long ceresID;
    private volatile BigInteger amountMonth;

    public long getCeresID() {
        return ceresID;
    }
    public void setCeresID(long ceresContractID) {
        this.ceresID = ceresContractID;
    }

    public BigInteger getAmountMonth() {
        System.out.println("Contract.getAmountMonth " + this.amountMonth + " -> " + amountMonth);
        return amountMonth;
    }
    public void setAmountMonth(BigInteger amountMonth) {
        System.out.println("Contract.setAmountMonth " + this.amountMonth + " -> " + amountMonth);
        this.amountMonth = amountMonth;
    }
} 
```

## 实体映射

```
<entity-mappings version="2.0" xmlns="http://java.sun.com/xml/ns/persistence/orm" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm http://java.sun.com/xml/ns/persistence/orm_2_0.xsd">
    <entity class=".....Contract" access="PROPERTY">
        <attributes>
            <id name="ceresID" access="FIELD">
                <generated-value strategy="AUTO"/>
            </id>
        </attributes>
    </entity>
</entity-mappings> 
```

## 第二个 setAmountMonth 的堆栈跟踪

```
at Contract.setAmountMonth(Contract.java:83)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.hibernate.property.BasicPropertyAccessor$BasicSetter.set(BasicPropertyAccessor.java:66)
at org.hibernate.tuple.entity.AbstractEntityTuplizer.setPropertyValues(AbstractEntityTuplizer.java:583)
at org.hibernate.tuple.entity.PojoEntityTuplizer.setPropertyValues(PojoEntityTuplizer.java:229)
at org.hibernate.persister.entity.AbstractEntityPersister.setPropertyValues(AbstractEntityPersister.java:3822)
at org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:299)
at org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:203)
at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:129)
at org.hibernate.ejb.event.EJB3PersistEventListener.saveWithGeneratedId(EJB3PersistEventListener.java:69)
at org.hibernate.event.def.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:179)
at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:135)
at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:61)
at org.hibernate.impl.SessionImpl.firePersist(SessionImpl.java:808)
at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:782)
at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:786)
at org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:672)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240)
at $Proxy29.persist(Unknown Source)
at DBPersister.persistOrMerge(DBPersister.java:93) 
```

## 图书馆版本

*   java 1.6.0_29
*   休眠 3.6.0
*   春天 3.0.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T16:20:06.107

有了这个 stacktrace 答案可以很容易地在 Hibernate 源代码中找到。

为了保存一个对象，Hibernate 从中提取状态。可以在保存期间通过自定义更改提取的状态[`Interceptor`](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/Interceptor.html)或将值分配给版本字段。如果状态已更改，Hibernate 会将其写回对象（所有字段，它不会跟踪哪些字段已更改），这就是您所观察到的。

# jvm - Java 运行时多语言有什么用？

> ID：10317489
> 
> 赞同：1
> 
> 时间：2012-04-25T14:11:10.677
> 
> 标签：jvm, java

我正在与一个软件供应商打交道，他说，应用程序需要 JVM 多语言。但是我阅读了有关 java 语言环境和 java 6 支持几乎（如果不是）所有国家语言环境的信息。那么 jvm 多语言和 Oracle 站点上的 jre 安装程序有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:20:23.727

在过去，您可以下载 JRE 的美国英语版本和国际化版本。例如：[http ://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-javase11-419415.html#7452-jre-1.1.8_15-oth-JPR](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-javase11-419415.html#7452-jre-1.1.8_15-oth-JPR)

他们停止使用 Java 1.5 提供仅英语的 JRE 捆绑包。所以供应商的要求没有实际意义……除非您使用的是非常旧的 JVM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:28:19.317

JVM 多语言是指支持运行其他编程语言的代码，如 Ruby/JRuby、Groovy、Scala 等。Oracle JVM 就是其中之一。出于某种原因，您正在处理的软件可能需要对其他编程语言的支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T03:20:29.017

询问供应商他们的意思 - 他们是指国际化支持（即多种人类语言） - 还是他们的意思是供应商软件的某些组件是用非 ​​Java JVM 计算机语言编写的（例如 Scala、Jython、Clojure 等） ，并且您还需要那些非 Java 语言的运行时支持组件。

# java - 使用 java 访问 MS CryptoAPI

> ID：10317494
> 
> 赞同：8
> 
> 时间：2012-04-25T14:11:26.620
> 
> 标签：java, sha256, cryptoapi, mscapi

我试图充分利用[MS CAPI](http://en.wikipedia.org/wiki/Microsoft_CryptoAPI)，却陷入了极大的恶作剧......只有 SunMSCapi 提供者，嗯，由于缺乏更好的词，至少对于签名，提供以下算法：

*   带 RSA 的 MD2
*   带有 RSA 的 MD5
*   SHA1withRSA

而且我并不急于使用 BouncyCastle 使用的算法**`GOST3411withECGOST3410`**，或者**`RIPEMD128withRSA`**，但它会很好，并且在这种特殊情况下，如果不是必需的话，至少能够登录**`SHA256withRSA`**算法是非常重要的。 ..（512等和ECDSA加密，将是一个很大的优势，但我不期望那么多）。

我正在尝试寻找替代方案，但只找到[了这个 wrapper](http://pheox.com/products/jcapi/)，看起来不错，但我必须再挖掘一下。

有谁知道访问 mscapi (cryptoapi) 的另一种方式、包装器或提供程序？

* * *

有关的：

*   SunMSCapi 文档：
    [http ://docs.oracle.com/javase/6/docs/technotes/guides/security/SunProviders.html#SunMSCAPI](http://docs.oracle.com/javase/6/docs/technotes/guides/security/SunProviders.html#SunMSCAPI)

*   请求**`SHA256withRSA`**：
    [http ://bugs.sun.com/view_bug.do?bug_id=6753664](http://bugs.sun.com/view_bug.do?bug_id=6753664)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:45:25.917

看看支持 RSA 和 SHA-256的[RSA bsafe 共享。](https://community.emc.com/community/edn/rsashare)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T03:05:38.730

Java是跨平台的，如果你选择SunMSCapi，你只能在JDK 6+的windows上运行，如果要SHA256withRSA，你需要在JDK7+上运行，那里有。校验码[RSASignature.SHA256](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/sun/security/mscapi/RSASignature.java#RSASignature.SHA256)

# javascript - javascript中计数器变量的奇怪值

> ID：10317495
> 
> 赞同：3
> 
> 时间：2012-04-25T14:11:26.650
> 
> 标签：javascript

> **可能重复：**
> [Javascript臭名昭著的循环问题？](https://stackoverflow.com/questions/1451009/javascript-infamous-loop-problem)

出于某种原因，我在函数中为每个 div 元素得到“6”：

```
for(var i = 1; i <= 5; i++){
  $('<div class="e-' + i + '"></div>').appendTo(something).click(function(){
    alert(i);  // <-- it's 6\. wtf??
  });
} 
```

而不是 1、2、3 等。

另一方面，该类似乎已正确设置..

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T14:13:35.173

您的`for`循环正在页面加载时执行。只有在 for 循环完成后发生单击事件时才会触发警报。因此，现在的值`i`是 6。

1）页面加载，`for`循环做它的东西......

2) 稍后会触发点击事件。此时的值为`i`6，因为`for`循环已经完成。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-25T14:15:59.923

问题是您需要创建一个闭包来捕获绑定点击函数时的**值**。`i`

试试这个：

```
for(var i = 1; i <= 5; i++)
{
  $('<div class="e-' + i + '"></div>')
    .appendTo(something)
    .click(function(value)
    { 
      return function() { alert(value) };
    }(i));
} 
```

# wpf - WPF 内发光效果

> ID：10317496
> 
> 赞同：2
> 
> 时间：2012-04-25T14:11:39.797
> 
> 标签：wpf, .net-4.0

有谁知道如何在**不**使用表达式混合或不推荐使用的 BitmapEffects 的情况下在 WPF 中制作内发光效果？

示例图片：

![在此处输入图像描述](../Images/2ff812bcbd662c5dbcc2f72c8fa6da0b.png)

例如，这里是一个带有图像和一些文本的按钮的一些 xaml。我希望这个按钮有一个内发光（不是外发光）：

```
<Button Click="HandleDeleteRows" Style="{StaticResource ButtonCellStyle}">
    <DockPanel>
        <Image Style="{StaticResource DeleteButtonImage}" />
        <TextBlock Style="{StaticResource DeleteButtonCaption}" />
    </DockPanel>
</Button> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T12:44:30.247

虽然我上面的简化示例由 PompolutZ 的回答解决，但我无法覆盖我想在现实世界示例中应用样式的控件的控件模板 - 所以我开始按照说明定义自己的效果[在这里](http://windowsclient.net/wpf/wpf35/wpf-35sp1-more-effects.aspx)。

**第 1 步**- 编写一个 HLSL .FX 文件，以达到您想要的效果。我放弃了发光太复杂，因为它需要边缘检测。我决定使用一系列标准的颜色、亮度、伽马和饱和度调整，这些调整相当容易实现，并且可以让我创造一些很好的视觉提示。它们很容易使用常识和在线查找像素着色算法来实现。

`ColourAdjust.fx`：

```
sampler2D implicitInput : register(s0);
float saturation : register(c0);
float gamma : register(c1);
float brightness : register(c2);
float red_adjust : register(c3);
float green_adjust : register(c4);
float blue_adjust : register(c5);

static const float max_gamma = 100;

float4 main(float2 uv : TEXCOORD) : COLOR
{
    float4 color = tex2D(implicitInput, uv);
    float4 result;

    // Apply greyscale desaturation
    float gray = color.r * 0.3 + color.g * 0.59 + color.b *0.11; 
    result.r = (color.r - gray) * saturation + gray;
    result.g = (color.g - gray) * saturation + gray;
    result.b = (color.b - gray) * saturation + gray;

    // Apply Gamma Adjustment (if it's not approximately 0.5 - which means no adjustment)
    float gammafactor = gamma == 0 ? max_gamma : log(gamma) / log(0.5);
    result.r = pow(result.r, gammafactor);
    result.g = pow(result.g, gammafactor);
    result.b = pow(result.b, gammafactor);

    //Apply linear brightness adjustment
    result.r += brightness + red_adjust;
    result.g += brightness + green_adjust;
    result.b += brightness + blue_adjust;

    //Clamp brightness adjustment result to bounds 0 <= val <= 1
    result.r = (result.r > 1 ? 1 : (result.r < 0 ? 0 : result.r));
    result.g = (result.g > 1 ? 1 : (result.g < 0 ? 0 : result.g));
    result.b = (result.b > 1 ? 1 : (result.b < 0 ? 0 : result.b));

    result.a = color.a;
    return result;
} 
```

**第 2 步**- 我必须下载[DirectX SDK](http://msdn.microsoft.com/en-us/library/aa139765.aspx)的本地副本，以便我可以将上述 HLSL 代码编译成 PS 文件，这是 WPF 使用的文件 - 给我`ColourAdjust.ps`.

```
> > fxc.exe /T ps_2_0 /E PS /ColourAdjust.ps ColourAdjust.fx 
```

**第 3 步**- 编写一个 ShaderEffect 类，该类将通过 DependencyProperties 公开效果参数。这里是`ColourAdjustEffect.cs`：

```
using System;
using System.Reflection;
using System.Windows;
using System.Windows.Media;
using System.Windows.Media.Effects;

namespace WPF.Utilities.UI
{
    public class ColourAdjustEffect : ShaderEffect
    {
        private static PixelShader _pixelShader = new PixelShader() { UriSource = new Uri("pack://application:,,,/" + Assembly.GetExecutingAssembly() + ";component/Effects/ColourAdjust.ps") };
        public static readonly DependencyProperty InputProperty = ShaderEffect.RegisterPixelShaderSamplerProperty("Input", typeof(ColourAdjustEffect), 0);
        public static readonly DependencyProperty SaturationProperty = DependencyProperty.Register("Saturation", typeof(double), typeof(ColourAdjustEffect), new UIPropertyMetadata(1.0, PixelShaderConstantCallback(0), CoerceFactor));
        public static readonly DependencyProperty GammaProperty = DependencyProperty.Register("Gamma", typeof(double), typeof(ColourAdjustEffect), new UIPropertyMetadata(0.5, PixelShaderConstantCallback(1), CoerceFactor));
        public static readonly DependencyProperty BrightnessAdjustmentProperty = DependencyProperty.Register("BrightnessAdjustment", typeof(double), typeof(ColourAdjustEffect), new UIPropertyMetadata(0.0, PixelShaderConstantCallback(2), CoerceBrightnessAdjustment));
        public static readonly DependencyProperty RedAdjustmentProperty = DependencyProperty.Register("RedAdjustment", typeof(double), typeof(ColourAdjustEffect), new UIPropertyMetadata(0.0, PixelShaderConstantCallback(3), CoerceBrightnessAdjustment));
        public static readonly DependencyProperty GreenAdjustmentProperty = DependencyProperty.Register("GreenAdjustment", typeof(double), typeof(ColourAdjustEffect), new UIPropertyMetadata(0.0, PixelShaderConstantCallback(4), CoerceBrightnessAdjustment));
        public static readonly DependencyProperty BlueAdjustmentProperty = DependencyProperty.Register("BlueAdjustment", typeof(double), typeof(ColourAdjustEffect), new UIPropertyMetadata(0.0, PixelShaderConstantCallback(5), CoerceBrightnessAdjustment));

        public ColourAdjustEffect()
        {
            PixelShader = _pixelShader;

            UpdateShaderValue(InputProperty);
            UpdateShaderValue(SaturationProperty);
            UpdateShaderValue(GammaProperty);
            UpdateShaderValue(BrightnessAdjustmentProperty);
            UpdateShaderValue(RedAdjustmentProperty);
            UpdateShaderValue(GreenAdjustmentProperty);
            UpdateShaderValue(BlueAdjustmentProperty);
        }

        public Brush Input
        {
            get { return (Brush)GetValue(InputProperty); }
            set { SetValue(InputProperty, value); }
        }

        /// <summary>A value between 0 and 1 to alter the amount of colour left in the image. 0 is entirely greyscale, and 1 is unaffected. Default is 1.</summary>
        public double Saturation
        {
            get { return (double)GetValue(SaturationProperty); }
            set { SetValue(SaturationProperty, value); }
        }

        /// <summary>A value between 0 and 1 to alter the lightness of the greyscale without altering true black or true white. 
        /// 0 shifts shades closer to true black, and 1 shifts shades closer to true white. Default is 0.5.</summary>
        public double Gamma
        {
            get { return (double)GetValue(GammaProperty); }
            set { SetValue(GammaProperty, value); }
        }

        /// <summary>A value between -1 and 1 to linearly move the end result closer to true black or true white respectively.
        /// -1 will result in an entirely black image, +1 will result in an entirely white image. Default is 0.</summary>
        public double BrightnessAdjustment
        {
            get { return (double)GetValue(BrightnessAdjustmentProperty); }
            set { SetValue(BrightnessAdjustmentProperty, value); }
        }

        /// <summary>A value between -1 and 1 to linearly increase the Red component of the result.
        /// -1 will remove all Red from the image, +1 will maximize all Red in the image. Default is 0.</summary>
        public double RedAdjustment
        {
            get { return (double)GetValue(RedAdjustmentProperty); }
            set { SetValue(RedAdjustmentProperty, value); }
        }
        /// <summary>A value between -1 and 1 to linearly increase the Green component of the result.
        /// -1 will remove all Green from the image, +1 will maximize all Green in the image. Default is 0.</summary>
        public double GreenAdjustment
        {
            get { return (double)GetValue(GreenAdjustmentProperty); }
            set { SetValue(GreenAdjustmentProperty, value); }
        }
        /// <summary>A value between -1 and 1 to linearly increase the Blue component of the result.
        /// -1 will remove all Blue from the image, +1 will maximize all Blue in the image. Default is 0.</summary>
        public double BlueAdjustment
        {
            get { return (double)GetValue(BlueAdjustmentProperty); }
            set { SetValue(BlueAdjustmentProperty, value); }
        }

        private static object CoerceFactor(DependencyObject d, object value)
        {
            double newFactor = (double)value;

            if( newFactor < 0.0 ) return 0.0;
            if( newFactor > 1.0 ) return 1.0;
            return newFactor;
        }

        private static object CoerceBrightnessAdjustment(DependencyObject d, object value)
        {
            double newFactor = (double)value;

            if( newFactor < -1.0 ) return -1.0;
            if( newFactor > 1.0 ) return 1.0;
            return newFactor;
        }
    }
} 
```

**第 4 步**：在 xaml 中使用您的效果：

```
<Setter Property="Effect">
    <Setter.Value>
        <ui:ColourAdjustEffect Saturation="0" Gamma="0.6" 
                               BrightnessAdjustment="-0.2" RedAdjustment="0.04" />
    </Setter.Value>
</Setter> 
```

所以虽然我没有得到我的发光效果，但我有足够的参数来玩，我可以得到一个“突出显示”的视觉提示，这是我真正的目标。这是我能用它做的一些事情：

![在此处输入图像描述](../Images/3d4838210dbfc6a96cfb992226bf44c5.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:14:48.103

也许你可以尝试这样的事情（注意！这不是完成的解决方案只是一个想法）：

```
<Style x:Key="{x:Type Button}" TargetType="{x:Type Button}">
    <Style.Setters>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Grid>
                        <Border CornerRadius="10" BorderThickness="20">
                            <Border.BorderBrush>
                                <LinearGradientBrush StartPoint="0, 0.5" EndPoint="1, 0.5">
                                    <GradientStop Color="LightGreen" Offset="0.0" />
                                    <GradientStop Color="Transparent" Offset="0.15" />
                                </LinearGradientBrush>
                            </Border.BorderBrush>
                        </Border>
                        <Border CornerRadius="10" BorderThickness="20">
                            <Border.BorderBrush>
                                <LinearGradientBrush StartPoint="0, 0.5" EndPoint="1, 0.5">
                                    <GradientStop Color="LightGreen" Offset="1.0" />
                                    <GradientStop Color="Transparent" Offset="0.85" />
                                </LinearGradientBrush>
                            </Border.BorderBrush>
                        </Border>
                        <Border CornerRadius="10" BorderThickness="20">
                            <Border.BorderBrush>
                                <LinearGradientBrush StartPoint="0.5, 0" EndPoint="0.5, 1">
                                    <GradientStop Color="LightGreen" Offset="0.0" />
                                    <GradientStop Color="Transparent" Offset="0.15" />
                                </LinearGradientBrush>
                            </Border.BorderBrush>
                        </Border>
                        <Border CornerRadius="10" BorderThickness="20">
                            <Border.BorderBrush>
                                <LinearGradientBrush StartPoint="0.5 0" EndPoint="0.5, 1">
                                    <GradientStop Color="LightGreen" Offset="1.0" />
                                    <GradientStop Color="Transparent" Offset="0.85" />
                                </LinearGradientBrush>
                            </Border.BorderBrush>
                        </Border>
                        <Border BorderBrush="White" BorderThickness="2" CornerRadius="5" Margin="18"></Border>
                        <ContentPresenter HorizontalAlignment="Center"
                                            VerticalAlignment="Center"/>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style.Setters>
</Style> 
```

我们可以通过在 Grid 中的某些内容周围使用边框来制作“发光”效果。我觉得它当然不会像 InnerGlow BitmapEffect 那样灵活，但无论如何它已经过时了。

# actionscript-3 - 沿线递增点

> ID：10317510
> 
> 赞同：1
> 
> 时间：2012-04-25T14:12:21.137
> 
> 标签：actionscript-3

我正在使用以下代码计算从 A 点（右上角）到 B 点（左下角）的增量。但是随着我们越来越接近 B 点，我的增量越来越偏离预期的路径。图片中的绿线是白点的预期路径。

![差异](../Images/f04e29f39e8dab53ee18b0f42170ab91.png)

```
 public function get target():Point { return _target; }
    public function set target(p:Point):void
    {
        _target = p;
        var dist:Number = distanceTwoPoints(x, _target.x, y, _target.y); //find the linear distance
        //double the steps to get more accurate calculations. 2 steps are calculated each frame
        var _stepT:Number = 2 * (dist * _speed); //_speed is in frames/pixel (something like 0.2)

        if (_stepT < 1) //Make sure there's at least 1 step
            _stepT = 1;
        _stepTotal = int(_stepT); //ultimately, we cannot have half a step
        xInc = (_target.x - x) / _stepT; //calculate the xIncrement based on the number of steps (distance / time)
        yInc = (_target.y - y) / _stepT;
    }

    private function distanceTwoPoints(x1:Number, x2:Number, y1:Number, y2:Number):Number 
    {
        var dx:Number = x1-x2;
        var dy:Number = y1-y2;
        return Math.sqrt(dx * dx + dy * dy);
    } 
```

基本上，我没有想法。似乎让白点完全跟随绿线的唯一方法是调整目标的位置，如下所示：

```
distanceTwoPoints(x, _target.x + 2, y, _target.y + 1);
//...
xInc = (_target.x + 2 - x) / _stepT;
yInc = (_target.y + 1 - y) / _stepT; 
```

但是，这会影响点之间没有角度的模拟的其他部分，例如进入点 A（右上角）。这让我觉得两点之间的距离需要计算得比实际短。有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T14:20:33.303

Flash 有一个很棒的功能，非常方便。`Point.interpolate(pointA, pointB, number)`它返回点 A 和 B 之间的一个点。第三个输入（数字）是结果点应该离点 A 或点 B 多近，从 0 到 1。您必须计算它的值。

interpolate 所做的基本上是两个输入点的加权平均值，数字是对一个点的权重。如果数字是 0.5，您将在两个输入点之间得到一个点。1 返回 PointA，0 返回 PointB。

[flash.geom.Point.interpolate()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/Point.html#interpolate%28%29)了解详情。

对于其他语言或一般数学，您可以这样做，不需要 Trig: `point1`、起点和`point2`终点。是和`point3`之间的一个点。是从到的比率，表示要走多远。将是从到的四分之一。和。这甚至适用于 0-1 之外的值，例如连接线上的一个点，但不在它们之间。`point1``point2``loc``point1``point2``loc = .25``point1``point2``point3.x = point1.x * (1 - loc) + point2.x * loc``point3.y = point1.y * (1 - loc) + point2.y * loc``point1``point2`

# java - 如何更改 JTree 中空文件夹的图标？（FTP文件）

> ID：10317514
> 
> 赞同：1
> 
> 时间：2012-04-25T14:12:31.647
> 
> 标签：java, ftp, icons, jtree

我正在使用将 FTP 服务器的所有文件和文件夹显示到 JTree 中。但是我遇到了一个问题，即空文件夹显示为文件。但是如何将它们显示为文件夹图标？

这是我的代码：

```
public void buildTree(){

    try {
        ftpClient.connect("130.229.178.31");             
        ftpClient.login("admin", "123456");

        root = new DefaultMutableTreeNode("Welcome!");        
        for (int i = 0; i < 1; i++) {
            DefaultMutableTreeNode temp = new DefaultMutableTreeNode("FTP-Server");
            root.add(temp);
            bind(temp,"");
        }   
    } catch (IOException e1) {
        e1.printStackTrace();
        throw new RuntimeException("Client Error", e1);
    }
    try {
            ftpClient.disconnect();
    } catch (IOException e2) {
            e2.printStackTrace();
            throw new RuntimeException("Error when shutdown", e2);
    }
}   

// bind nod/subnode to the tree (recursive method)
public void bind(DefaultMutableTreeNode node,String path){
    try {

        Boolean defaultPath = true;
        while (defaultPath)
        {
            defaultPath = ftpClient.changeToParentDirectory();
        }

        ftpClient.changeWorkingDirectory(path);

        FTPFile[] files = ftpClient.listFiles();

        for(int i=0;files!=null && i<files.length;i++){
            FTPFile tempFile = files[i];
            if(tempFile.isDirectory()){

                DefaultMutableTreeNode tempNode = new DefaultMutableTreeNode(tempFile.getName());
                node.add(tempNode);

                bind(tempNode, path+"/"+tempFile.getName());
            }else{
                DefaultMutableTreeNode tempNode = new DefaultMutableTreeNode(tempFile.getName());
                node.add(tempNode);
            }
        }

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }   
} 
```

![FTP JTree](../Images/b06c7d7ab7e31c4a0629979d11ce08e3.png)

“sad”文件夹是一个空文件夹，但显示为文件图标。如何改变它？

非常感谢

PS：相同的方法不起作用，例如

```
FileSystemView fileSystemView = FileSystemView.getFileSystemView();
setIcont(fileSystemView.getSystemIcon(File file)); 
```

因为我们使用的是 FTP 文件而不是文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:09:42.533

你有两个选择：

*   将“虚拟文件”添加到空文件夹（可能称其为“[empty]”）或
*   使用您自己的[DefaultTreeCellRenderer](http://docs.oracle.com/javase/1.5.0/docs/api/javax/swing/tree/DefaultTreeCellRenderer.html)

我认为第二个 coice 更可取。我还建议使用您自己的 TreeModel 来指示树节点是文件还是文件夹。

# android - 使用来自 Android/Java 代码的数据填充 HTML5 列表

> ID：10317515
> 
> 赞同：0
> 
> 时间：2012-04-25T14:12:33.933
> 
> 标签：android, html, listview

我想用来自 Android 代码的数据（例如来自 ArrayList 的数据）填充 HTML5 文件中的列表（显示在 WebView 中）。谁能告诉我如何或是否可能。

提前感谢汤米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:17:45.753

使用 WebView，您可以简单地：

```
webview.loadUrl("javascript:YOURJAVASCRIPTCODE"); 
```

您的 javascript 代码可能类似于：

```
document.getElementById('txtField1').value = "test"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:18:22.763

读这个：

[http://developer.android.com/guide/webapps/webview.html#BindingJavaScript](http://developer.android.com/guide/webapps/webview.html#BindingJavaScript)

您可以从您的 Android 代码中公开任何内容。如果您返回一些 JSON（数组或对象），您可以使用一些 javascript 构建您的列表（或其他任何内容）。

# php - PHP：未在计划任务中创建 COM 对象（而是挂起）

> ID：10317519
> 
> 赞同：1
> 
> 时间：2012-04-25T14:12:47.747
> 
> 标签：php, com

我有一个 PHP 脚本，它运行一个进程以在 Windows 服务器上生成字母。该文件当前设置为计划任务。

在脚本中，COM 对象被实例化以使用适当的文件。当它作为计划任务运行时，用于实例化 COM 对象的行不执行任何操作并挂起脚本（而不是返回任何结果）。脚本永远不会终止。

```
$this->word = new COM("word.application"); 
```

我相信脚本本身没有问题，因为我可以直接运行批处理文件（没有问题）。这个问题似乎只有在我们尝试自动化时才会出现。

我认为存在一些权限问题，但我不完全确定。

谢谢你的帮助！

编辑：

有关系统的更多信息：

没有 HyperV 的 Windows 2008 Server Standard Microsoft Office Word 2007 PHP 5.3.10 尝试自动化

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T21:58:01.233

我找到了解决方案。这是个人资料问题。

在：

```
C:\Windows\SysWOW64\config\systemprofile 
```

检查`Desktop`文件夹是否存在。

如果没有，请创建它。

它有这个问题，因为它期待该文件夹，但在找不到它时挂起。

# batch-file - 在 UNIX PC 上为 SQL*Loader Start 转换 .bat 到 .sh

> ID：10317521
> 
> 赞同：0
> 
> 时间：2012-04-25T14:12:52.073
> 
> 标签：batch-file, converter, sh, sql-loader

我有一个简单的 .bat 文件

```
@echo; set nls_lang=russian_cis.ru8pc866  
@echo off

SET NLS_NUMERIC_CHARACTERS=. '

sqlldr.exe userid=PRB/0611@TSESTDB control=control_file.ctl LOG=fdb_log.log errors=100

cmd 
```

我需要转换为 .sh 文件才能在基于 UNIX 的 pc 上运行。我开始阅读《[BASH Programming - Introduction HOW-TO](http://www.tldp.org/HOWTO/Bash-Prog-Intro-HOWTO.html#toc3)》（它适合初学者吗？），但它是一个临时性的任务，而且死线来了。

有人可以帮我转换文件吗？非常感谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T18:48:47.627

重写你的脚本。

```
 #!/bin/bash

  # @echo; 
  # set nls_lang=russian_cis.ru8pc866 
  export NLS_LANG=russian_cis.ru8pc866

  # not needed @echo off

  # SET NLS_NUMERIC_CHARACTERS=. '
  export NLS_NUMERIC_CHARACTERS='.'

  PATH="/path/to/sqlDir/install:${PATH}"
  # sqlldr.exe userid=PRB/0611@TSESTDB control=control_file.ctl LOG=fdb_log.log errors=100
  sqlldr userid=PRB/0611@TSESTDB control=control_file.ctl LOG=fdb_log.log errors=100

  # ? cmd 
```

我已将您的代码留在其中，但已注释掉（使用 shell 注释字符“#”）。未注释的行是将 .bat 语法“翻译”成 Linux/Unix bash/shell 语法。

上面有一些你**可能**需要解决的问题：

1.  您必须在 PATH 的重置中包含正确的值，请注意该值严格用于说明问题。 `export`用于使当前 shell（shell 脚本）中设置的变量对从 shell 脚本运行的子进程可见，在这种情况下，重要的是`sqlldr`

2.  我不确定你真正需要分配什么值 `NLS_NUMERIC_CHARACTERS`。请注意，通过引用 shell 可用的单引号字符`'`，您应该得到您想要使用的值。如果使用 '*' 或其他正则表达式字符，这可能会导致问题。

3.  您可能会发现它`sqlldr.exe`有一个完全不同的名称。可执行命令的 linux/unix 约定不需要 `.exe`扩展名，所以我使用了`sqlldr`. 只需使用您在安装目录中找到的程序的全名即可。

带有的行`#!/bin/bash`必须是文件中的第一行，没有前导空格。

您还需要通知您的操作系统该脚本是可执行的。从 bash cmd 行，在包含此脚本的目录中，执行

```
 chmod 755 mySQLLDR_runningScript 
```

最后，不知道你为什么`cmd`在你的 .bat 文件的末尾，要打开一个新窗口？您需要在系统上进行试验以找到正确的 cmd 来执行此操作。也许`xterm`。

我希望这有帮助。

# rest - 如何在 Heroku 上使用 REST API 后端以最佳方式提供静态文件

> ID：10317522
> 
> 赞同：3
> 
> 时间：2012-04-25T14:12:52.580
> 
> 标签：rest, heroku, proxy, nginx

这个问题可能有点主观，但我认为会提供一些有价值的具体信息和解决方案来代理 Heroku 和调试延迟问题。

我有一个使用 Sinatra/Mongo 构建的应用程序，它在 api.example.com 上公开了一个 REST API。它在 Heroku Cedar 上。通常，我通过 www 的 nginx 提供静态文件，并将 /api 的请求代理到 api 子域，以避免跨域浏览器投诉。我有一个机架空间云实例，所以我将前端暂时放在 nginx 上并设置代理。现在代理时延迟很可怕，每 3 或 4 个请求需要超过 1 分钟，否则约 150 毫秒。直接访问 API（浏览器访问 api.example.com）时，平均延迟约为 40 毫秒。虽然我知道设置并不理想，但我没想到它会那么糟糕。

我认为这部分是由于从机架空间代理 - 服务器很可能在西海岸 - 到亚马逊 ec2 东部的 heroku。我目前的想法是获取一个亚马逊 ec2 实例并将其代理到我的 heroku 应用程序会缓解这个问题，但我想以某种方式验证这一点，而不是盲目猜测（它也更昂贵）。是否有任何合理的方法来确定长延迟的来源？此外，关于如何构建此应用程序的任何其他建议？我知道我可以在 Heroku 上提供静态文件，但我不喜欢我的 API 服务于我的前端的想法，我宁愿这些能够相互独立地扩展。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T20:23:42.120

由于您使用 Heroku 来运行您的 API，我建议将您的静态文件放入一个名为“myapp-static”的[Amazon S3](http://aws.amazon.com/s3/)存储桶中，然后使用[Amazon Cloudfront](http://aws.amazon.com/cloudfront/)通过 DNS CNAME 记录代理您的静态文件(static.myapp.com)。

在 Rackspace 上使用 S3 的好处在于：

*   您从 Heroku 上传文件会更快，因为您的应用程序和存储都在同一个网络 (AWS) 上。
*   S3 是为直接提供静态文件而构建的，无需运行您自己的服务器代理请求的开销。

使用 Cloudfront 的好处在于，它会根据需要缓存您的静态文件（减少多个 HTTP 请求），并从离用户最近的端点提供文件。EG：如果加利福尼亚的用户发出 API 请求并从您那里获取静态文件，则该文件将从 AWS 加利福尼亚服务器而不是您的东海岸 Heroku 实例从他们那里获得。

最后，您将在应用程序端做的是在您的 REST API 中向用户发送一个指向您的静态资产的链接（例如：[http](http://static.myapp.com/images/background.png) ://static.myapp.com/images/background.png ），这样客户端就是负责直接下载内容，并将能够尽快下载资产。

# oracle - ORA-01017 无效的用户名/密码 - 密码/用户名正确

> ID：10317536
> 
> 赞同：1
> 
> 时间：2012-04-25T14:13:40.733
> 
> 标签：oracle, oracle11g, ora-01017

我已经从 oracle 数据库 11g 快递版的 Application express 上创建了一个 oracle 数据库，现在尝试通过 toad for oracle（或 Visual Studio）连接到它时出现错误

```
ORA-01017: Invalid username/password;logon denied. 
```

我使用相同的用户名/密码连接到应用程序 express 并访问数据库。我不知道怎么了。

我改变了`tnsnames.ora`：

```
OFFICEMEMO =
    (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = (my host))(PORT = 1521))
    (CONNECT_DATA =
      (SERVICE_NAME = XE)
    )
  ) 
```

但我认为这不是问题，因为它已经说明了无效的用户名/密码。

# iphone - Facebook iOS SDK 不返回用户电子邮件

> ID：10317538
> 
> 赞同：7
> 
> 时间：2012-04-25T14:13:43.283
> 
> 标签：iphone, ios, facebook, email, sdk

我正在尝试访问某些用户的信息，包括电子邮件。为此，我使用 Graph API 来调用此方法：

```
[facebook requestWithGraphPath:@"me" andDelegate:self]; 
```

它返回用户信息，没有电子邮件信息（生日也丢失了）。我设置了所有权限并使用多个帐户（具有电子邮件和生日作为公共信息）进行了测试，并接受了所有对话的请求。

这是我的初始化：

```
if(!facebook) {
    facebook = [[Facebook alloc] initWithAppId:[self _APP_KEY] andDelegate:self];
    NSArray *array =  [NSArray arrayWithObjects: @"email", @"user_birthday", @"publish_stream", @"offline_access", nil];
    [self setPermissions:array];
}

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if ([defaults objectForKey:@"FBAccessTokenKey"] && [defaults objectForKey:@"FBExpirationDateKey"]) {
    facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
    facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
}

if (![facebook isSessionValid]) {
    [facebook authorize:permissions];
} 
else {
    [self getUserInfo];
} 
```

登录回调：

```
- (void)fbDidLogin {
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];
    [defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
    [defaults synchronize];

    [self getUserInfo];
} 
```

getUserInfo 方法：

```
- (void) getUserInfo {
    [facebook requestWithGraphPath:@"me" andDelegate:self];
} 
```

请求回调：

```
 - (void)request:(FBRequest *)request didLoad:(id)result {

    if ([result isKindOfClass:[NSDictionary class]]) {
        NSDictionary* json = result;
        NSLog(@"-> %@", json);
    }
} 
```

结果如下：

```
-> {
    "first_name" = EDITED (my name);
    gender = male;
    hometown =     {
        id = 111072692249998;
        name = "Porto Alegre";
    };
    id = 653099452;
    languages =     (
                {
            id = 104034306299811;
            name = "Brazilian Portuguese";
        },
                {
            id = 106059522759137;
            name = English;
        }
    );
    "last_name" = EDITED (my last name);
    link = EDITED (my profile);
    locale = "en_US";
    location =     {
        id = 112047398814697;
        name = "S\U00e3o Paulo, Brazil";
    };
    name = EDITED (my name);
    timezone = "-3";
    "updated_time" = "2012-04-25T13:36:51+0000";
    verified = 1;
} 
```

如您所见，没有关于用户电子邮件的信息。我错过了一些步骤吗？有什么想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T17:13:03.807

尝试使用它，它适用于我的情况

> facebook = [[Facebook alloc] initWithAppId:[self _APP_KEY] andDelegate:self]; [facebook 授权：[NSArray arrayWithObjects:@"email",nil]];

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T05:13:04.500

试试这个 **权限 = [[NSArray alloc] initWithObjects:@"offline_access",@"email",nil];**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T15:07:20.643

您可以像这样获取用户电子邮件..在触发 fbDidlogin 后调用此方法

```
- (void)fetchUserDetails {
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"SELECT uid, name, pic, email FROM user WHERE uid=me()", @"query",nil];

    [fb requestWithMethodName:@"fql.query"
                                     andParams:params
                                 andHttpMethod:@"POST"
                                   andDelegate:self];
} 
```

在`request:(FBRequest *)request didLoad`你会做这样的事情：

```
- (void)request:(FBRequest *)request didLoad:(id)result 
{

  if([request.url rangeOfString:@"fql.query"].location !=NSNotFound)
    {
        if ([result isKindOfClass:[NSArray class]] && [result count]>0) {
            result = [result objectAtIndex:0];
        }

        if ([result objectForKey:@"email"]) {

            NSLog(@"%@",[result objectForKey:@"email"]);
           }
      }
} 
```

享受 ：）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-05T13:52:59.413

**1）授予获取电子邮件和信息等的权限...**

```
// You must ALWAYS ask for public_profile permissions when opening a session
                [FBSession openActiveSessionWithReadPermissions:@[@"public_profile",@"user_videos",@"email"]
                                                   allowLoginUI:YES
                                              completionHandler:
                 ^(FBSession *session, FBSessionState state, NSError *error)
                 {
                     // Retrieve the app delegate
                     AppDelegate* appDelegate = [UIApplication sharedApplication].delegate;
                     // Call the app delegate's sessionStateChanged:state:error method to handle session state changes
                     [appDelegate sessionStateChanged:session state:state error:error];
                 }]; 
```

**2）在您想要的地方获取电子邮件......**

```
if (FBSession.activeSession.isOpen)
    {
        [[FBRequest requestForMe] startWithCompletionHandler:
         ^(FBRequestConnection *connection,
           NSDictionary<FBGraphUser> *user,
           NSError *error)
        {
             if (!error)
             {
                 NSString *userEmail = [user objectForKey:@"email"];
             }
            [tblSettingVw reloadData];
         }];
    } 
```

**注意：用户字典将返回以下**

```
{
    "first_name" =;
    gender =;
    id =;
    "last_name" =;
    link = "";
    locale = "";
    name = "";
    timezone = "";
    "updated_time" = "";
    verified = ;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-06T19:34:14.713

所有通过***电话号码***而不是电子邮件验证的 Facebook 帐户都将`NULL`获得`[user objectForKey:@"email"]`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-25T14:38:27.817

只有获得用户的授权，您才能访问用户的电子邮件。

公共图不提供此信息。

您应该阅读以下内容：[https ://developers.facebook.com/docs/guides/web/#login](https://developers.facebook.com/docs/guides/web/#login)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-10T14:26:46.800

您需要通过以下方式向用户请求许可以获取此信息：

```
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
NSArray *permissions = [[NSArray alloc] initWithObjects:
                        @"user_birthday",
                        nil];
return [FBSession openActiveSessionWithPermissions:permissions
                                      allowLoginUI:allowLoginUI
                                 completionHandler:^(FBSession *session,
                                                     FBSessionState state,
                                                     NSError *error) {
                                     [self sessionStateChanged:session
                                                         state:state
                                                         error:error];
                                 }]; 
```

}

这是您需要的所有信息，只需按照本教程进行操作

首先，这个：[Facebook登录](http://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)

然后，这个：[获取用户数据](https://developers.facebook.com/docs/howtos/user-data-ios-sdk/)

# c++ - PQexecParams 使用单引号失败

> ID：10317539
> 
> 赞同：2
> 
> 时间：2012-04-25T14:13:44.307
> 
> 标签：c++, sql, libpq

我正在尝试使用带有以下代码的 libpq 插入我的 SQL 数据库：

```
void func(PGconn *conn)
{
    const char * params[2] = { "1", "\'POINT(0 0)\'" };
    res = PQexecParams(conn,
        "INSERT INTO drive_test_point (id, geom) VALUES ($1, ST_GeomFromText($2, 900913));",
        2,
        NULL,
        paramValues,
        NULL,
        NULL,
        1);

    if (PQresultStatus(res) != PGRES_TUPLES_OK)
    {
            fprintf(stderr, "INSERT failed: %s\n", PQerrorMessage(conn));
            PQclear(res);
    }
} 
```

输出：

插入失败：错误：解析错误 - 无效几何提示：您必须指定有效的 OGC WKT 几何类型，例如 POINT、LINESTRING 或 POLYGON

我认为我在 POINT(0 0) 周围的单引号有些可疑。有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-03T02:25:51.547

您应该使用 ST_MakePoint 并将其参数作为坐标传递。以机智：

> const char * params[2] = { "1", "0", "0" };
> 
> res = PQexecParams(conn, "INSERT INTO drive_test_point (id, geom) VALUES ($1, ST_Point($2, $3))", NULL, 3, NULL, NULL, 0);

希望对您有所帮助，尽管晚了 7 年。

# javascript - 如何将 Backbone.js 与 Symfony 框架和/或 Apache Thrift 一起使用

> ID：10317541
> 
> 赞同：7
> 
> 时间：2012-04-25T14:13:50.557
> 
> 标签：javascript, symfony, backbone.js, thrift

我最近安装了一个使用`Symfony2`框架和`Apache Thrift`.

现在我想让主干在`Symfony2`框架中可用。

我的问题是关于`Backbone.sync`.

1.  如何覆盖/使用`Backbone.sync`以使用`Symfony2`框架和/或从 Web 应用程序中的服务器获取数据`Apache Thrift`？

2.  网络上有一些教程可以做到吗？我刚刚找到了这个[Symfony + Backbone.js for high-dynamic apps](http://sf.khepin.com/2011/11/symfony-backbone-js-for-highly-dynamic-apps/)，但它并没有说明如何从服务器获取数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T21:14:35.773

默认情况下，Backbone.js 及其同步方法无需任何修改即可使用 REST API。因此，如果您可以使用 Symfony2 创建一个可以处理 GET/POST/PUT/DELETE 并返回 JSON 的 Web 服务，那么您应该很高兴。

我对 Symfony 不是很熟悉，但是对于一个基本的 REST API，你需要定义你的 URL 路由（例如“www.yourdomain.com/api/items”），然后创建方法来执行基于这些的操作路由（例如以 JSON 编码格式返回记录）。

这是一个使用 Symfony2 创建 REST API 的快速教程：[Symfony2 REST](http://inchoo.net/tools-frameworks/symfony2-rest/)

另外，请查看[Backbone 教程](https://github.com/documentcloud/backbone/wiki/Tutorials,-blog-posts-and-example-sites)页面上的 Wine Cellar 教程。它使用 PHP Slim 框架，但骨干.js 的概念将完全相同，因为只要您使用基本的 REST API，骨干与后端无关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T21:44:13.187

检查此捆绑包[https://github.com/gigo6000/DevtimeRafflerBundle](https://github.com/gigo6000/DevtimeRafflerBundle)这是一个包含一些基本 REST 操作的小型简单应用程序。这是使用[https://github.com/gigo6000/DevtimeBackboneBundle创建的](https://github.com/gigo6000/DevtimeBackboneBundle)

# android - 将 SimpleCursorAdapter 更改为 XML 中的列表视图

> ID：10317546
> 
> 赞同：0
> 
> 时间：2012-04-25T14:14:09.760
> 
> 标签：android, sqlite

我的应用程序有一个 SQLite 数据库连接，我遵循了一个教程，该教程在 SimpleCursorAdapter 中显示了数据库，这对这个适配器进行了整个类，我的按钮不适合这个类。因此，我会减少这个适配器以适合我的按钮。或者有没有其他更好的解决方案？对我来说，SimpleCursorAdapter 将我所有的图片混合为他的适配器的按钮，我不知道，但我认为 SAdapter 将整个视图变成了列表视图，我不想要那样。我有四节课。DBAdapter, Produkter (View) Car 是 SimpleCursorAdapter ViewBinder 而 Bus 是 Bitmap get, class

```
enter code here
public class DBhelper {
public static final String KEY_ID = BaseColumns._ID;
public static final String KEY_NAME = "name";
public static final String KEY_KCAL = "kcal";
public static final String KEY_VC = "vitaminc";
public static final String KEY_IMG = "image";
private DatabaseHelper mDbHelper;
private SQLiteDatabase mDb;
 private static final String DATABASE_NAME = "FruitDB";
private static final int DATABASE_VERSION = 1;
public static final String FRUITS_TABLE = "fruits";
private static final String CREATE_FRUITS_TABLE = "create table "+FRUITS_TABLE+" ("
                                     +KEY_ID+" integer primary key autoincrement, "
                                     +KEY_IMG+" blob not null, "
                                     +KEY_NAME+" text not null unique, "
                                     +KEY_KCAL+" integer not null, "
                                     +KEY_VC+" integer not null);";
                                          private final Context mCtx;
private boolean opened = false;
private static class DatabaseHelper extends SQLiteOpenHelper {
    DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }
     public void onCreate(SQLiteDatabase db) {
        db.execSQL(CREATE_FRUITS_TABLE);
    }
   public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS "+FRUITS_TABLE);
        onCreate(db);
    }
}

public void Reset() {
    openDB();
    mDbHelper.onUpgrade(this.mDb, 1, 1);
    closeDB();
}
public DBhelper(Context ctx) {
    mCtx = ctx;
    mDbHelper = new DatabaseHelper(mCtx);
}  
private SQLiteDatabase openDB() {
    if(!opened)
        mDb = mDbHelper.getWritableDatabase();
    opened = true;
    return mDb;
}

public SQLiteDatabase getHandle() { return openDB(); } 
private void closeDB() {
    if(opened)
        mDbHelper.close();
    opened = false;
}

public void createFruitEntry(Bus fruit) {
    openDB();
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    fruit.getBitmap().compress(Bitmap.CompressFormat.PNG, 100, out);
    ContentValues cv = new ContentValues();
    cv.put(KEY_IMG, out.toByteArray());            
    cv.put(KEY_NAME, fruit.getName());
    cv.put(KEY_KCAL, fruit.getKcal());
    cv.put(KEY_VC, fruit.getVitaminC());
    mDb.insert(FRUITS_TABLE, null, cv);
    closeDB();
}
}    enter code here
public class produkter extends ListActivity {
    private DBhelper mDB;          
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);              
        mDB = new DBhelper(this);          
        mDB.Reset();           
        Bitmap img = BitmapFactory.decodeResource(getResources(),      

 R.drawable.ic_launcher);
                mDB.createFruitEntry(new Bus(img, "Banane",   92, 10));
        mDB.createFruitEntry(new Bus(img, "Kiwi",     56, 71));
        mDB.createFruitEntry(new Bus(img, "Pfirsich", 41, 10));
        mDB.createFruitEntry(new Bus(img, "Zitrone",  40, 51));        
        String[] columns = {mDB.KEY_ID, mDB.KEY_IMG, mDB.KEY_NAME, mDB.KEY_KCAL,   

 mDB.KEY_VC};
        String   table   = mDB.FRUITS_TABLE;           
        Cursor c = mDB.getHandle().query(table, columns, null, null, null, null,   

   null);    
        startManagingCursor(c);
                SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
                R.layout.produkterx,
                c,
                new String[] {mDB.KEY_IMG, mDB.KEY_NAME, mDB.KEY_KCAL, mDB.KEY_VC},
                new int[] {R.id.img, R.id.txt, R.id.rating});

        adapter.setViewBinder(new Car());
        setListAdapter(adapter);
enter code here
  public class Car implements SimpleCursorAdapter.ViewBinder {
    public boolean setViewValue(View view, Cursor cursor, int columnIndex) {

            if(view instanceof ImageView) {
                    ImageView iv = (ImageView) view;
                    byte[] img = cursor.getBlob(columnIndex);
                    iv.setImageBitmap(BitmapFactory.decodeByteArray(img, 0,      
 img.length));
                    return true;
            }

            if(view instanceof RatingBar) {
                    RatingBar rb = (RatingBar) view;
                    int kcal = cursor.getInt(cursor.getColumnIndex(DBhelper.KEY_KCAL));
                    int vitc = cursor.getInt(cursor.getColumnIndex(DBhelper.KEY_VC));
                    rb.setRating((float) (kcal * ((float) vitc/1000.0)));
                    return true;
            }
           return false;
    }
 }

enter code here
     public class Bus {
private Bitmap bmp;
private String name;
private int kcal;
private int vitaminc;

public Bus(Bitmap b, String n, int k, int v) {
    bmp = b;
    name = n;
    kcal = k;
    vitaminc = v;
}

public Bitmap getBitmap() { return bmp; }
public String getName() { return name; }
public int getKcal() { return kcal; }
public int getVitaminC() { return vitaminc; }
}

 enter code here` XML
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/Blue"
    android:orientation="vertical" >

     <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:layout_weight="1" >

    <Button
        android:id="@+id/btnE"
        android:layout_width="70dp"
        android:layout_height="70dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:text="E" />

    <ImageView
        android:id="@+id/image1"
        android:layout_width="wrap_content"
        android:layout_height="80dp"
        android:layout_marginTop="-7dp"
        android:contentDescription="@drawable/header2"
        android:src="@drawable/header2" />

    <Button
        android:id="@+id/btnkontakt"
        android:layout_width="70dp"
        android:layout_height="70dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:text="k" />

    <Button
        android:id="@+id/btnprodukter"
        android:layout_width="70dp"
        android:layout_height="70dp"
        android:layout_alignParentBottom="true"
        android:layout_toRightOf="@+id/btnE"
        android:text="p" />

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1" >
    </ListView>

    <Button
        android:id="@+id/btnSok"
        android:layout_width="70dp"
        android:layout_height="70dp"
        android:layout_alignParentBottom="true"
        android:layout_marginLeft="15dp"
        android:layout_toRightOf="@+id/btnprodukter"
        android:text="s" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="fill_parent"
        android:layout_height="80dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="-7dp"
        android:contentDescription="@drawable/sok"
        android:src="@drawable/produkter" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal" 
        android:layout_weight="1" >     

    <ImageView
   android:id = "@+id/img"
   android:layout_width = "wrap_content"
   android:layout_height = "wrap_content"
   android:layout_alignParentLeft = "true"
   >
</ImageView>

<TextView
   android:id = "@+id/txt"
   android:layout_width = "wrap_content"
   android:layout_height = "wrap_content"
   android:layout_centerVertical = "true"
   >
</TextView>

<RatingBar
   style="?android:attr/ratingBarStyleSmall"    
   android:id = "@+id/rating"
   android:numStars = "5"
   android:stepSize = "0.5"
   android:layout_width = "wrap_content"
   android:layout_height = "wrap_content"
   android:layout_alignParentRight = "true"
   android:layout_centerVertical = "true"
   android:layout_marginRight = "5px">
</RatingBar>

 </LinearLayout> 
</LinearLayout> 

 > Blockquote

       This XML is all in a simpelCA that i dont want!! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:17:20.467

我对这个问题有点困惑。您的简单光标适配器旨在将数据发送到列表视图以填充您的屏幕。

```
startManagingCursor(c);
        SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
        R.layout.produkterx,
        c,
        new String[] {mDB.KEY_IMG, mDB.KEY_NAME, mDB.KEY_KCAL, mDB.KEY_VC},
        new int[] {R.id.img, R.id.txt, R.id.rating}); 
```

您需要匹配 String[]/int[]。如果您不想显示某些内容，请不要将其包含在此处。

# java - 如何在 Json 树中按名称查找节点？

> ID：10317549
> 
> 赞同：6
> 
> 时间：2012-04-25T14:14:19.837
> 
> 标签：java, json, jackson

我正在使用谷歌地理编码 API 进行反向地理编码。

结果以 Json 格式返回，我以以下方式解析它 -

```
Map<String, Object> parsedJson = new ObjectMapper().readValue(
                    response.getEntity(String.class),
                    new TypeReference<Map<String, Object>>() {
                    });
List<Object> results = (List<Object>) parsedJson.get("results");
// From first result get geometry details
Map<String, Object> geometry = (Map<String, Object>) ((Map<String, Object>) results
                    .get(0)).get("geometry");

Map<String, Object> location = (Map<String, Object>) geometry
                    .get("location");

Map<String, Double> coordinates = new HashMap<String, Double>();
coordinates.put("latitude", (Double) location.get("lat"));
coordinates.put("longitude", (Double) location.get("lng")); 
```

其中 response 包含从服务器返回的 Json。

是否有可能在不经历所有这些的情况下直接引用位置节点？例如，有没有类似的东西 -

```
new ObjectMapper().readValue(json).findNodeByName("lat").getFloatValue(); 
```

我已经阅读了 Jackson Api 中关于 JsonNode 和 Tree 的文档，但似乎它们仅在您想遍历整个树时才有用。

仅获取特定节点的最简单方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T04:43:36.017

+1 迈克尔希克森指出地理编码库。

但是，在深入研究文档后，我终于找到了解决方案 -

```
ObjectMapper mapper = new ObjectMapper(); 

JsonNode rootNode = mapper.readTree(mapper.getJsonFactory()
                        .createJsonParser(response.getEntity(String.class)));

rootNode.findValue("lat").getDoubleValue(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T02:26:55.173

对于您的“如何按名称查找节点”问题，我没有答案，但如果您只是在寻找一种更简洁的方式来读取这些数据，那么我会推荐其中一种方法，按顺序：

**答：**为 Google 的地理编码 API 寻找预先存在的 Java 库。如果现在你在 Java 中对这些数据发出 HTTP 请求（使用 Apache HttpClient 或其他东西），然后用 Jackson 解析 JSON，那么之前可能有人已经完成了所有这些工作并将其打包到一个库中。快速搜索一下：[http](http://code.google.com/p/geocoder-java/) ://code.google.com/p/geocoder-java/ 。您可以像这样获得第一个纬度值：

```
GeocodeResponse response = ... // Look at the example code on that site.
BigDecimal latitude = response.getResults().get(0).getGeometry().getLocation().getLat() 
```

**B：**创建你自己的类层次结构来表示你需要的东西，然后给杰克逊 JSON 和你的根“响应”类。我很确定它可以从 JSON 构建任意类的实例。所以是这样的：

```
public class ResultSet {
  public List<Result> results;
}

public class Result {
  public Geometry geometry;
}

public class Geometry {
  public Location location;
}

public class Location {
  public double latitude;
  public double longitude;
}

String json = ... // The raw JSON you currently have.
Response response = new ObjectMapper().readValue(json, Response.class);
double latitude = response.results.get(0).geometry.location.latitude; 
```

# jquery - 复制 HTML 并保留事件

> ID：10317552
> 
> 赞同：1
> 
> 时间：2012-04-25T14:14:24.843
> 
> 标签：jquery

我希望克隆`innerhtml`一个元素 ( `#clone`) 并将其插入另一个元素 ( `#newLocation`)。

使用的问题`clone()`是我将首先删除当前在 中的元素（如果有的话）`#newLocation`，然后遍历每个元素`#clone`并将其附加到`#newLocation`. 这不是世界末日，但我希望有一种更简单的方法。

相反，我想我会使用`html()`. 由于这不会保留事件，我将不得不委托使用`ON`. 我原以为这会起作用，但是，它没有。

有什么建议我做错了吗？`clone()`另外，即使我可以使解决方案正常工作，是否认为使用该解决方案会更有效`html()`？

编辑：刚刚写了我的第一个插件：http: [//jsfiddle.net/Wnr65/](http://jsfiddle.net/Wnr65/)这似乎工作。好主意吗？当然可以写得更好。

```
$(document).ready(function(){
    $("#cloneIt").click(function(){$('#newLocation').cloneInnerHtml('clone').css('color', 'red');});
    $("#clone a").click(function(){alert("click");});
    $("#clone select").change(function(){alert("change");});
});

(function( $ ){
    $.fn.cloneInnerHtml = function( id ) {
        this.empty();
        var $t=this;
        $('#'+id).each(function() {$t.append($(this).clone(true));});
        return this;
    };
})( jQuery );

<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Clone INNERHTML</title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js" language="javascript"></script>
<script type="text/javascript">

$(document).ready(function(){
    $("#cloneIt").click(function(){$('#newLocation').html($('#clone').html());});

    //Only works on original clone
    $("#clone a").on("click", function(){alert("click");});
    $("#clone select").on("change", function(){alert("change");});

    //Doesn't work at all
    $("#newLocation a").on("click", function(){alert("click");});
    $("#newLocation select").on("change", function(){alert("change");});

});

</script>

</head>
<body>
<input type="button" value="Clone it" id="cloneIt" />

<p>Original clone is shown below</p>
<div id="clone">
<a href="#">Click Me</a>
<select><option>Hello</option><option>Goodby</option></select>
</div>
<hr />
<p>Insert new clones below.</p>
<div id="newLocation">
<p class="someOldElement">someOldElement</p>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:37:54.337

​您的代码没有按照您的意愿做出反应是正常的。当你这样做

```
$("#clone a").on("click", function() {
    alert("click");
}); 
```

它将`click`事件绑定到与选择器匹配的元素`#clone a`。这些要素是在执行时确定的。在您的情况下，此行将事件绑定到**page 中存在的第一个也是唯一的链接**。

相同的规则适用于代码

```
$("#newLocation a").on("click", function() {
    alert("click");
}); 
```

但这里的区别在于，在执行的那一刻，里面**没有`a`元素`#newLocation`**，所以选择是空的，处理程序根本没有绑定。

然后，当你这样做

```
$('#newLocation').html( $('#clone').html() ); 
```

它将从一个元素中获取 HTML 内容并将其复制到另一个元素中，但它只是关于 HTML 内容，因此事件绑定仍然与“复制操作”之前相同。

on 方法有不同的语法，只有一种允许事件委托：

```
// get all current "a" elements inside the "#clone"
// and bind the click event
$( "#clone a" ).on( "click", handler );

// get the "#clone" element, bind a click event to it
// BUT trigger the event only when the origin of the event is an "a" element
// here the event delegation is enabled
// it means that future "a" elements will trigger the handler
$( "#clone" ).on( "click", "a", handler );

// if you want it to work with your code
// you could do something like below
// this add a click handler to all present and future "a" elements
// which are inside "#clone" or "#newLocation"
// but this is not the recommended way to do this, check below the clone method
$("#clone, #newLocation").on("click", "a", handler); 
```

* * *

`clone`方法不会删除元素，这是一个工作演示[http://jsfiddle.net/pomeh/G34SE/](http://jsfiddle.net/pomeh/G34SE/)

HTML 代码

```
<div class="source">
    <a href="#">Some link</a>
</div>
<div class="target">
</div>​ 
```

CSS 代码

```
div {
    width: 100px;
    height: 25px;
}

.source {
    border: solid red 1px;
}
.target {
    border: solid blue 1px;
} 
```

Javascript代码

```
var $element = $("a"),
    $target = $(".target"),
    $clone;

$element.on("click", function( ev ) {
    ev.preventDefault();
    console.log("click");
});

$clone = $element.clone( true );

$clone.appendTo( $target );​ 
```

该方法还接收一个参数，指示是否应将事件处理程序与元素[http://api.jquery.com/clone/一起复制](http://api.jquery.com/clone/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:22:20.687

编辑：我让它与`.on`Here's a [fiddle](http://jsfiddle.net/wFNHx/2/)一起使用。另请查看[.on 的 jQuery API](http://api.jquery.com/on/)并查看“**直接和委托事件**”部分

```
$("#clone a").on("click", function(){alert("click");});
$("#clone select").on("change", function(){alert("change");});

$("#newLocation").on("click", "a", function(){alert("click");});
$("#newLocation").on("change", "select", function(){alert("change");}); 
```

# javascript - Internet Explorer 打开 Outlook 约会 javascript

> ID：10317556
> 
> 赞同：1
> 
> 时间：2012-04-25T14:14:33.760
> 
> 标签：javascript, html, internet-explorer

想想看，我遇到了 IE 问题，希望有人能提供帮助....他们选择的日历；选择是 gmail、yahoo 和 Outlook。gmail 和 yahoo 约会在所有浏览器中都按预期生成，但 Outlook 约会在除 IE 之外的所有浏览器中都有效。IE 不会抛出文件保存对话框，而是打开一个新窗口并尝试导航该 url。

我正在使用我修改了一点的 iCalendar jquery 库并在 javascript 中构建 ics 标记，就像这样

```
//build ics markup
var event = makeAppointment(settings);
//render ics markup as outlook appointment
window.open("data:text/calendar;charset=utf8," + escape(event));

function makeAppointment()
{
    return 'BEGIN:VCALENDAR\n' +
    'VERSION:2.0\n' +
    'PRODID:jquery.icalendar\n' +
    'METHOD:PUBLISH\n' +
    'BEGIN:VEVENT\n' +
    'UID:' + new Date().getTime() + '@' +
    (window.location.href.replace(/^[^\/]*\/\/([^\/]*)\/.*$/, '$1') || 'localhost')       + '\n' +
    'DTSTAMP:' + $.icalendar.formatDateTime(new Date()) + '\n' +
    (event.url ? limit75('URL:' + event.url) + '\n' : '') +
    (event.contact ? limit75('MAILTO:' + event.contact) + '\n' : '') +
    limit75('TITLE:' + event.title) + '\n' +
    'DTSTART:' + $.icalendar.formatDateTime(event.start) + '\n' +
    'DTEND:' + $.icalendar.formatDateTime(event.end) + '\n' +
    (event.summary ? limit75('SUMMARY:' + event.summary) + '\n' : '') +
    (event.description ? limit75('DESCRIPTION:' + event.description) + '\n' : '') +
    (event.location ? limit75('LOCATION:' + event.location) + '\n' : '') +
    (event.recurrence ? makeRecurrence(event.recurrence) + '\n' : '') +
    'END:VEVENT\n' +
    'END:VCALENDAR';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T17:40:52.457

您可以通过添加“Content-Disposition: attachment”响应标头来让文件保存对话框在 IE 中工作。但是，这必须发生在服务器上，而不能发生在客户端脚本中，因为 JavaScript 无法修改标头信息。

有关详细信息，请参阅[此答案](https://stackoverflow.com/questions/727144/browser-download-file-prompt-using-javascript)。

# javascript - 使用 JQuery/JavaScript 导致内存泄漏的常见方法有哪些？

> ID：10317557
> 
> 赞同：7
> 
> 时间：2012-04-25T14:14:38.193
> 
> 标签：javascript, jquery, memory-management, memory-leaks

我的问题假设您正在创建一个将显示“很长时间”的网页。我很好奇在这种情况下使用 JQuery/JavaScript 时会导致内存泄漏的一些常见问题是什么？例如，当您调用`$.remove()`元素集合时，内存方面会发生什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:54:37.180

> JavaScript 使用垃圾回收来回收不再使用的字符串、对象、数组和函数所占用的内存。这让程序员不必自己显式地释放内存，这是使 JavaScript 编程比 C 编程更容易的重要部分。

**参考资料：** [**检查此以获取更多信息**](http://docstore.mik.ua/orelly/webprog/jscript/ch11_03.htm)和[**关于 SO 的答案**](https://stackoverflow.com/questions/864516/what-is-javascript-garbage-collection)。

**事件注册机制中的内存问题[MDN](https://developer.mozilla.org/en/DOM/element.addEventListener)**

```
var i;  
var els = document.getElementsByTagName('*');  

// Case 1  
for(i=0 ; i<els.length ; i++){  
    els[i].addEventListener("click", function(e){/*do something*/}, false});  
}  

// Case 2  
function processEvent(e){  
    /*do something*/  
}  

for(i=0 ; i<els.length ; i++){  
  els[i].addEventListener("click", processEvent, false});  
} 
```

在第一种情况下，在每个循环转弯处创建一个新的（匿名）函数。在第二种情况下，相同的先前声明的函数用作事件处理程序。这导致更小的内存消耗。此外，在第一种情况下，由于没有保留对匿名函数的引用，因此无法调用 element.removeEventListener 因为我们没有对处理程序的引用，而在第二种情况下，可以这样做

```
myElement.removeEventListener("click", processEvent, false) 
```

# android - GeoTrust 是 Android => 2.3 中受信任的根证书之一吗？

> ID：10317562
> 
> 赞同：0
> 
> 时间：2012-04-25T14:14:58.353
> 
> 标签：android, ssl, certificate

我在网上搜索，但在 Android 上找不到受信任的根证书列表。

但是，似乎每个新版本的 Android 都会更新该列表。

我需要知道的是：GeoTrust 是 Android 中受信任的根证书吗？根据此站点：[http](http://www.andreabaccega.com/blog/2010/09/23/android-root-certification-authorities-list/) : //www.andreabaccega.com/blog/2010/09/23/android-root-certification-authorities-list/，Android 2.2 没有 GeoTrust 作为受信任的根证书。

但它在 Android =>2.3 中吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:26:04.050

Yes, for Android 2.3 and above. Yes with cross root intermediate certificate, for Android 2.2 and below.

Reference: [http://www.geocerts.com/ssl/browsers](http://www.geocerts.com/ssl/browsers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:32:54.920

grepping `/system/etc/security/cacerts`（或查看设置>安全）向我展示了我的 4.0.3 设备上的内容：

```
Subject: C=US, O=GeoTrust Inc., OU=(c) 2007 GeoTrust Inc. - For authorized use only, CN=GeoTrust Primary Certification Authority - G2
Subject: C=US, O=GeoTrust Inc., CN=GeoTrust Global CA 2
Subject: C=US, O=GeoTrust Inc., CN=GeoTrust Global CA
Subject: C=US, O=GeoTrust Inc., CN=GeoTrust Universal CA 2
Subject: C=US, O=GeoTrust Inc., CN=GeoTrust Primary Certification Authority
Subject: C=US, O=GeoTrust Inc., OU=(c) 2008 GeoTrust Inc. - For authorized use only, CN=GeoTrust Primary Certification Authority - G3
Subject: C=US, O=GeoTrust Inc., CN=GeoTrust Universal CA 
```

编辑：从我的 2.3.3 手机中输入字符串，`cacerts.bks`我得到了这些：

```
GeoTrust Inc.1
GeoTrust Global CA0
GeoTrust Inc.1
GeoTrust Global CA0
GeoTrust Inc.1
GeoTrust Global CA 20
GeoTrust Inc.1
GeoTrust Global CA 20
GeoTrust Inc.1
GeoTrust Universal CA0
GeoTrust Inc.1
GeoTrust Universal CA0
GeoTrust Inc.110/
(GeoTrust Primary Certification Authority0
GeoTrust Inc.110/
(GeoTrust Primary Certification Authority0
GeoTrust Inc.1 0
GeoTrust Universal CA 20
GeoTrust Inc.1 0
GeoTrust Universal CA 20 
```

# c# - 进入/调试接口实现者

> ID：10317565
> 
> 赞同：7
> 
> 时间：2012-04-25T14:15:21.033
> 
> 标签：c#, visual-studio-2010, debugging, interface, visual-studio-debugging

我的解决方案中有两个项目，`Bridge`并被`BridgeInterface`我的应用程序更新过程使用，当我尝试使用`Initialize()`Bridge 类中的方法运行时，它抛出了 FileLoadException。

问题是我无法单步执行这个方法，而且我的想法已经用完了，我需要看看代码的错误在哪里！

Bridge 项目最初不是解决方案的一部分，因此我添加了这两个项目并指向了它们的 PDB 符号文件。（.DLL 显示为模块窗口中加载的符号。）

我也未选中“仅我的代码”，并且解决方案中的所有项目都针对 .NET 4 Full Profile。

`DebuggerStepperBoundary`检查实施者是否正在使用`DebuggerStepThroughAttribute`这种运气。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:09:59.167

将主项目中的程序集引用更改为使用项目引用。

这样 VS 可以编译桥接项目的调试版本并正确跟踪正在发生的事情，以便您可以进入它。

# java - Hibernate QL中的否定一元运算符

> ID：10317566
> 
> 赞同：8
> 
> 时间：2012-04-25T14:15:24.590
> 
> 标签：java, hibernate, operators, unary-operator

我正在尝试使用以下 hql 切换布尔字段：

```
update Entity e set e.booleanField = not e.booleanField where e.id = ?1; 
```

不幸的是“QuerySyntaxException：意外令牌：不在附近......”被抛出。

我的问题是：是否有一些支持这种表达的休眠一元运算符？或者有什么众所周知的技巧？

sql 支持这样的查询（postgresql）：

```
update entity_table set booleanField = not(booleanField); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-21T16:32:09.250

要切换布尔属性，相当于`not`一元运算符，在 HQL/JPQL 下，使用：

```
UPDATE entity e SET e.booleanField = (e.booleanField=false) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T02:33:52.673

我会为此使用本机 SQL 查询。

# php - Magento 要求用户在访问网站之前接受 t&c's

> ID：10317567
> 
> 赞同：0
> 
> 时间：2012-04-25T14:15:25.260
> 
> 标签：php, magento, e-commerce

我被要求向 Magento 网站添加一个灯箱弹出窗口。它应该在用户第一次查看该网站时出现，因此他们必须先检查它，然后才能查看该网站或进行购买。

如果这不可能，则 JS 弹出窗口或至少只是需要单击以将其关闭的灯箱弹出窗口（但仍允许站点访问）。

我已经用谷歌搜索并查看了这里，但一切似乎都与结帐页面上的 t&cs 相关，这是不合适的。

我将不胜感激有关如何解决此问题的任何指导或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T10:55:35.483

也许考虑 AITOC Splash Page 扩展。它提供了您所描述的功能，并且似乎运行良好。我没有在 CE 站点上使用它，只在 Magento Pro 1.11.1.0 站点上使用过。尽管它们的扩展也可用于 CE 和 EE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:21:10.100

使用 cookie——也许[这个库可以帮助](http://code.google.com/p/cookies/)——保存对 T&C 批准的确认，并检查页面加载以检测用户是否已确认。

使用某种形式的[灯箱](https://www.google.com/#hl=en&output=search&q=lightbox&oq=lightbox)来显示您的消息和批准机制。

任何更准确的细节都会让任何人期待付款！:)

# windows - 使用自动热键捕获右键单击+左键单击；意外行为

> ID：10317568
> 
> 赞同：3
> 
> 时间：2012-04-25T10:41:33.923
> 
> 标签：windows, mouse, autohotkey

我想捕获关键事件“按下鼠标右键，然后按下鼠标左键”。自动热键没有问题。但是，我仍然无法让鼠标右键单独工作。

1）这有效：

```
RButton & LButton::
    Send X
Return 
```

按预期工作：

*   如果我按鼠标右键，然后按鼠标左键，“X”将发送到活动窗口
*   Authotkey 捕获右键单击事件：当我单独按下鼠标右键时，**不会出现上下文菜单。**这是预期的结果

* * *

2）这行得通

```
~RButton & LButton::
    Send Y
Return 
```

按预期工作：

*   如果我按下鼠标右键，然后按下鼠标左键，“Y”被发送到活动窗口
*   Authotkey 未捕获右键单击事件：当我单独按下鼠标右键或同时按下鼠标左键时，会出现**上下文菜单。**这是预期的结果

* * *

3）现在我想根据活动窗口做不同的事情。

这不起作用*（注意：这将禁用每个应用程序中的右键单击）*

```
#If WinActive("ahk_class MozillaWindowClass")

RButton & LButton::
    Send X
Return

#If !WinActive("ahk_class MozillaWindowClass")
~RButton & LButton::
    Send Y
Return 
```

没有按预期工作：

*   在 Firefox 中左右发送 X，在其他应用程序中左右发送 Y
*   **但是，在每个**应用程序中都禁用了右键单击

我在这里做错了什么？

* * *

编辑：

目标是这样的：我想要一个全局热键 Right+left-click with `RButton & LButton`。在我测试过兼容性的特定应用程序中，我希望右键单击以抑制发送右键单击，然后使用自动热键手动发送右键单击。但是，由于某些应用程序可能无法处理自动热键发送的鼠标事件，因此在所有未经测试的应用程序中，我想使用`~RButton & LButton`~ 来传递右键单击事件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T11:05:50.597

这是一个支持右键拖动的！

```
Hotkey, LButton, off

#IfWinActive ahk_class MozillaWindowClass
RButton & LButton::
    Send X
Return

RButton::return

#IfWinNotActive ahk_class MozillaWindowClass
~$RButton::
Hotkey, LButton, on
while GetKeyState("RButton", "P") {
    continue
    }
Hotkey, LButton, off
Return

LButton::Send Y
Return 
```

它`RButton`手动处理。按下时`RButton`，它会启用热键并在停用之前`LButton`等待释放。热键使用`RButton`，正常通过点击。`RButton``~`

`LButton`在开始时被顶部的行禁用。

另一种方法是`{RButton Down}`在热键的开头和`{RButton Up}`结尾发送。

作为对您的编辑的回应，唯一拒绝 Autohotkey 发送事件的程序应该是那些依赖低级挂钩的程序......底部方法的真正问题是它只发送一次单击，而不是处理按住按钮。这种方法，以及分别向下和向上发送，都应该正确地做到这一点。

此答案底部描述的带有活动窗口的错误仍然存​​在，但这是`#IfWin[Not]Active`.

* * *

### 老东西

请参阅与[符号上的文档](http://www.autohotkey.com/docs/Hotkeys.htm#combo)（强调我的）：

> 您可以通过在它们之间使用“&”来定义两个键（除了操纵杆按钮）的自定义组合。在下面的示例中，您将按住 Numpad0 然后按第二个键来触发热键：
> 
> ```
> Numpad0 & Numpad1::MsgBox You pressed Numpad1 while holding down Numpad0.
> Numpad0 & Numpad2::Run Notepad 
> ```
> 
> **在上面的例子中，Numpad0 成为前缀键；但这也会导致 Numpad0 在自己按下时失去其原始/原生功能。**为避免这种情况，脚本可能会配置 Numpad0 以执行新操作，例如以下操作之一：
> 
> ```
> Numpad0::WinMaximize A   ; Maximize the active/foreground window.
> Numpad0::Send {Numpad0}  ; Make the release of Numpad0 produce a Numpad0 keystroke. See comment below. 
> ```
> 
> 上述热键之一的存在会导致释放 Numpad0 以执行指示的操作，但前提是您在按住 Numpad0 时没有按下任何其他键。

所以，按照那个例子：

```
#If WinActive("ahk_class MozillaWindowClass")

RButton & LButton::
    Send X
Return

RButton::return

#If !WinActive("ahk_class MozillaWindowClass")
RButton & LButton::
    Send Y
Return

RButton::Send {RButton} 
```

注意`RButton`需要一个在 中什么都不做的变体，`WinActive`至少在我的测试中（见下文）：`RButton::return`

* * *

由于我使用的是 Autohotkey 标准，而不是 Autohotkey_L，所以我没有`#If`，并且以上内容未经测试。以下我*做了*测试，它的工作原理。

```
#IfWinActive ahk_class MozillaWindowClass
RButton & LButton::
    Send X
Return

RButton::return

#IfWinNotActive ahk_class MozillaWindowClass
RButton & LButton::
    Send Y
Return

RButton::Send {RButton} 
```

我注意到的一个有趣的错误是第二个（NotActive）变体偶尔适用于 Firefox：

1.  另一个窗口处于活动状态
2.  `RButton` *向下*发送
3.  Firefox 未激活，因此处理第二个变体
4.  <delay> （`RButton`被按住，尽管延迟可能是难以察觉的，以毫秒为单位，到无限）
5.  Firefox 激活
6.  <延迟>（仍然按住）
7.  `RButton` *up*被发送，它`RButton`根据文档发送。因为 Firefox 在活动窗口检查和发送时之间的延迟变为活动状态，所以`RButton`被`RButton`发送到 Firefox。

当 Firefox 和另一个窗口都可见时，会发生这种情况，而另一个窗口在单击时是活动窗口。

我试图通过`IfWinNotActive`在热键中添加一个额外的检查来修复这个错误`RButton`，但它似乎不起作用。

# python - 相同 Python 进程运行时间的巨大差异

> ID：10317570
> 
> 赞同：2
> 
> 时间：2012-04-25T14:15:26.950
> 
> 标签：python, multithreading, terminal, cpu, cpu-usage

我刚买了一台新机器来运行 python 脚本进行大规模建模。它有两个 CPU，每个 CPU 有 4 个内核（Xeon，2.8GhZ）。每个内核都为 4 个逻辑 CPU 内核启用了超线程。

现在解决问题：当我在 8 个单独的终端中运行相同的 python 进程时，`top`命令显示每个进程都占用了 100% 的 cpu。但是，终端 1 中的进程运行速度比终端 8 中的进程慢大约 4 倍。这对我来说似乎很奇怪......

我想知道它是否与如何在各种（逻辑？）核心上安排进程有关？有谁知道我如何才能以相同的速度运行？

编辑（回应 larsmans）：好点。该脚本是一个运行大约 10,000 次的 ginat 循环。每个循环读入一个文本文件（500 行）并对读入的数量进行一些基本计算。循环运行时，它使用大约 0.2% 的内存。循环期间没有写入磁盘。我可以理解读取访问可能是一个限制因素，但我很困惑这样一个事实，即如果是这种情况，它将是第一个最慢的进程。我原以为它会随着我启动更多进程而变慢......

`time`我使用终端中的命令对进程进行了几次计时。

EDIT2：我刚刚发现有时一个核心被指定来处理所有的读取和写入——所以多个进程（即使它们在不同的核心上运行）将使用一个单一的核心来处理所有的 I/O ......但这只会影响其中一个核心，不会导致所有核心具有不同的处理速度......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T20:53:32.677

造成这种情况的一个原因可能是使用了超线程。HT 逻辑 CPU 在操作系统看来是独立的 CPU，但实际上并非如此。因此，如果两个线程在不同逻辑 (HT) CPU 中的同一内核上运行，则性能将低于它们在不同内核上运行时的性能。

最简单的解决方案可能是禁用超线程。如果这不是一个选项，请使用处理器关联将每个 Python 进程固定到其单独的 CPU。

# javascript - CSS，Jquery - 绝对定位的 div 的宽度返回为 0

> ID：10317572
> 
> 赞同：1
> 
> 时间：2012-04-25T14:15:38.900
> 
> 标签：javascript, jquery, css

我正在尝试运行一些条件 javascript 来定位 div，这样，如果单击照片右侧的标记，则标记工具提示将位于标记的左侧，否则它将是标记的右侧。因此，如果标记在右侧，我会指示工具提示位于标记的 position().left 处，减去工具提示的宽度。然而，工具提示的宽度总是会改变，这取决于里面的文本，并且调用 jquery 的 width() 函数不会返回正确的宽度。有想法该怎么解决这个吗？这是示例：

[http://bit.ly/IkbWl6](http://bit.ly/IkbWl6)

这是我的代码：

```
var tagPos = $photo_tag.position();
if (isNarrow == true){
    var photoWidth = $('#photo_box').width();
    if (tagPos.left > photoWidth/2){
        var brandWidth = $('.brand_name').width(); //MH - NOT WORKING
        $brand_name_container.css({'left' : tagPos.left-brandWidth, 'top' : tagPos.top+brandAdjTop});
    } else {
        $brand_name_container.css({'left' : tagPos.left+brandAdjLeft, 'top' : tagPos.top+brandAdjTop});
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:22:13.350

以防万一，但是在您请求它的宽度时您的工具提示是否可见？工具提示必须可见才能被渲染引擎渲染，否则它不会有任何大小。

例如，您可能会做类似的事情

```
$('#mytooltip').show(0);
width = $('#mytooltip').width();
$('#mytooltip').hide(0); 
```

这足以进行渲染，但它没有时间真正向用户显示。

# jquery - 页面未加载时显示gif？

> ID：10317574
> 
> 赞同：-2
> 
> 时间：2012-04-25T14:15:45.187
> 
> 标签：jquery

我试图在页面未加载时显示微调器 .gif。然后，当页面加载时，微调器必须隐藏。我搜索，但一无所获。

有这方面的例子吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:18:07.517

将您的微调器添加为普通的 img 标签并给他一个 id 然后在 documentReady 上删除标签

在您的 html 中：

```
<img src="your;gif" id="spinner" /> 
```

然后在使用 jquery 的 javascript 代码中：

```
$(function(){ $('#spinner').remove(); }) 
```

# jquery - jQuery - 加载数据后执行函数

> ID：10317575
> 
> 赞同：0
> 
> 时间：2012-04-25T14:15:48.100
> 
> 标签：jquery, document-ready

我有一个将 HTML 导出为 PDF 的页面。页面中很少有使用 AJAX 请求加载数据的用户控件。加载数据后，我必须将生成的页面发送到第三方工具，该工具会将发送的 HTML 导出为 PDF，这是通过调用 JS 函数并将页面正文作为参数发送来完成的。

一切正常，除了我必须在 document.ready 事件中将数据发送到第三方工具的执行延迟 5 秒，否则它会发送空白页。如果我将间隔设置为 5 秒，它工作正常。

我想知道是否有任何我遗漏的事件可以通知我该页面已加载数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:21:15.270

setTimeout 将在一定的毫秒数到期时执行一个函数

```
$(document.ready(function() {
  function redirect()
  {
    // do redirection
  }

  setTimeout(redirect, 5000);
}); 
```

虽然..

```
$.ajax({
  url: 'something.pdf',
  dataType: 'application/pdf',
  success: function() {
    // though you are safer and better doing it when the ajax event has actually fired
  },
}); 
```

# parsing - 缺少#include 虚拟链接的处理程序

> ID：10317577
> 
> 赞同：0
> 
> 时间：2012-04-25T14:15:49.677
> 
> 标签：parsing, asp-classic, include

我们必须维护许多经典的 ASP 和 VB/ASP.Net 应用程序，这些应用程序链接到静态网站的许多不同部分。

母版页上充斥着各种

```
<!-- #include virtual="/site/footer.something" --> 
```

和类似的，其中 /site/ 可以是许多组合。

问题是，当您进行调试等时，当您尝试在本地运行这些站点之一时，您几乎肯定会遇到解析器错误。

我想要做的是提出一个通用处理程序，这样我就可以为任何不存在的#include 文件插入一个空白文件。我试图设置一个 URL 重写规则，该规则在浏览器中工作（只是重定向到一个空的 html 文件），但我猜 ASP 解析器不包含作为 webrequest，因为它仍然会生成解析器错误。

我不想每次打开新应用程序时都必须将静态内容复制到我的工作站，也不想编辑母版页以排除链接，因为有一天我会忘记并部署一些损坏的东西.

所以问题是，有没有办法为这些声明或其他方法提供默认文件？

编辑：考虑对这个问题进行不同的修复；有没有办法插入某种文件系统处理程序，可以在特定位置获取丢失文件的请求并返回预定义的内容？是的，我知道这是一个非常另类的方向，在实践中可能是一个非常糟糕的主意，但现在这在办公室是一个非常令人沮丧的问题。令人恼火的是，即使 IIS 禁用了 SSI，ASP 处理器仍然尊重#include 指令。有没有办法禁用它，或者有什么方法可以覆盖某种生成的类中的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:36:20.710

您将遇到的问题是在您的*任何*代码运行之前处理包含。服务器收集脚本中引用的所有资源，然后编译并运行您的代码。在您的代码运行时，缺少的包含已经引发了编译器错误。

此外，您所问的可能会遇到其他问题。通常包括包含其他脚本所依赖的代码（过程、常量、变量声明等）。因此，即使您要用空文件替换缺少的包含，如果包含脚本期望包含包含特定代码，您仍然可能会遇到其他解析器错误。

可能您最好的选择是制作一个控制台应用程序或类似的东西来解析您的文件以查找包含语句，根据您的目录结构解析相对路径并执行您想要的操作 - 如果它不存在则编写一个空文件。然后，您可以通过此解析器运行您的项目，并至少消除*该*问题。

此外，您提到可能会意外部署您为规避此问题而编辑的内容。我会假设，如果你要写出这些“虚拟”包含，你不可能不小心部署它们并覆盖好文件？

# android - 使用 Phonegap 创建一个 Android 杂志应用程序

> ID：10317579
> 
> 赞同：1
> 
> 时间：2012-04-25T14:15:50.430
> 
> 标签：android, cordova

我对 Android 非常陌生，甚至对应用程序创建也很陌生。现在，我的任务是为 Android 创建一个杂志应用程序。该杂志可能包含视频、音频、图像和其他 HTML5 元素。我被告知使用Phonegap 和HTML5 来完成这项工作。我已经完成了 HTML5 部分，但我被卡住了。如何使用 Phonegap 框架包装我的 HTML5？我浏览了基本的 Phonegap 应用程序及其网站，我只能找到非常基本的东西。如何使用幻灯片、捏合和其他功能创建我的杂志。

# c# - 时间：2019-05-10 标签：c#sql insert 有很多参数

> ID：10317584
> 
> 赞同：4
> 
> 时间：2012-04-25T14:16:01.103
> 
> 标签：c#, sql, winforms

有没有一种优雅的方式来编写一个有很多参数的插入语句？我有 20 个需要保存在数据库中的标志，以及其他需要插入的信息，以及这 20 个标志。为该插入编写一个包含 30 个参数的方法是浪费时间，但到目前为止我还没有想出其他可能可行的想法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T14:18:14.080

您可以将所有这些参数放在一个对象中并将该对象传递给该方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T14:18:47.720

一种标准方法是创建一个代表您的实体的类，然后传递该类的一个实例。

这使得传递给可能进行验证、演示等以及持久性的其他方法变得容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T14:27:39.533

同意 Sachin，将您需要的 SqlParameters 列表封装在一个类中，并

然后将实例传递给数据层以进一步处理 SQL 查询。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T14:27:47.917

您可以创建一个接口，该接口表示可以插入到数据库中的对象类型，例如 Iinsertable，它公开诸如 getFields 之类的方法。这样，您就可以创建实现此接口的实体。

使用这些实体，在您的数据库层中，您可以创建一个接受 Iinsertable 作为参数的通用方法，您可以在循环中使用 getFiels 方法查询要插入的所有字段。这将使您的代码可用于每种类型的实体，并且它将非常干净。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-17T09:09:18.283

使用我的 SqlBuilder 类。它使您可以编写参数化查询**，而不必担心创建参数或它们的名称。**

```
var bldr = new SqlBuilder( myCommand );
bldr.Append("SELECT * FROM CUSTOMERS WHERE ID = ").Value(myId, SqlDbType.Int);
//or
bldr.Append("SELECT * FROM CUSTOMERS NAME LIKE ").FuzzyValue(myName, SqlDbType.NVarChar); 
```

您可以拥有任意数量的标志。每次您想在查询中包含运行时值时，只需调用 Value() 即可。参数的创建是隐藏的，只剩下一个简洁的 SQL 查询。

SqlBuilder 类的代码在[这里](https://stackoverflow.com/questions/910465/avoiding-sql-injection-without-parameters/26421296#26421296)

# qt - 将自定义小部件添加到 QTableWidget 单元格

> ID：10317585
> 
> 赞同：5
> 
> 时间：2012-04-25T14:16:13.753
> 
> 标签：qt, qtablewidget, qtablewidgetitem

我有用 qt 设计器制作的自定义小部件，我想将它添加到 QTableWidget 单元格。但它不起作用。

这是代码：

```
int nRows =10;
for(int row = 0; row < nRows;row++;)

{
    QTableWidgetItem* item = new QTableWidgetItem();
    CustomWdg* wdg=new CustomWdg( );

    mTableWdg->insertRow( row );
    mTableWdg->setItem(row, 0, item);
    mTableWdg->setCellWidget( row, 0, wdg );

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-02-15T20:09:16.953

如果您想将自定义小部件添加到表格单元格中，您可以使用 QItemDelegate。

创建您自己的 Delegate 类并从 QItemDelegate 继承它。

```
class MyDelegate : public QItemDelegate
{
    public:
    CChoicePathDelegate (QObject *parent = 0);
    QWidget *createEditor(QWidget *parent, const QStyleOptionViewItem &option, const QModelIndex &index) const; //delegate editor (your custom widget)
    void setEditorData(QWidget *editor, const QModelIndex &index) const;
    void setModelData(QWidget *editor, QAbstractItemModel *model,
    const QModelIndex &index) const; //transfer editor data to model
    void updateEditorGeometry(QWidget *editor, const QStyleOptionViewItem &option,
    const QModelIndex &index) const;
}; 
```

然后使用您自己的方法为 Table 设置委托。

```
setItemDelegate(QAbstractItemDelegate *)
setItemDelegateForColumn(int, QAbstractItemDelegate *)
setItemDelegateForRow(int, QAbstractItemDelegate *) 
```

* * *

我试过这段代码：

```
#include "widget.h"
#include "ui_widget.h"
#include <QPushButton>
#include <QLabel>
#include <QHBoxLayout>

Widget::Widget(QWidget *parent) :
    QWidget(parent),
    ui(new Ui::Widget)
{
    ui->setupUi(this);
    QHBoxLayout *l = new QHBoxLayout();
    l->addWidget((new QPushButton("I`m in cell")));
    l->addWidget((new QLabel("Test label")));

    QWidget *w = new QWidget();

    w->setLayout(l);

    ui->tableWidget->setCellWidget(1,1, w);
}

Widget::~Widget()
{
    delete ui;
} 
```

结果是：

[![结果](../Images/c5ebc37066f3d36f4d37f765f2cb9b12.png)](https://i.stack.imgur.com/fMOO3.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-13T08:54:49.507

你的代码是正确的，所以我唯一想到的是你没有`setColumnCount(1)`在`for`循环之前。如果不是这种情况，您可以尝试在该`for`循环之前设置行数和列数，而不是在循环中逐行插入：

```
int nRows =10;
mTableWdg->setRowCount(nRows);
mTableWdg->setColumnCount(1);
for(int row = 0; row < nRows;row++;)

{
    //QTableWidgetItem* item = new QTableWidgetItem();// line one
    CustomWdg* wdg=new CustomWdg( );
    //mTableWdg->setItem(row, 0, item);// line three
    mTableWdg->setCellWidget( row, 0, wdg );

} 
```

如果你真的需要`item`（“第一行”和“第三行”），你应该像这样设置它：`QTableWidgetItem* item = new QTableWidgetItem("");`，否则你不需要那些行，你`CustomWdg`的设置正确`setCellWidget`

# java - 具有不同修复版本的 Quickfix 重复代码

> ID：10317586
> 
> 赞同：2
> 
> 时间：2012-04-25T14:16:14.090
> 
> 标签：java, code-duplication, quickfix

我正在编写一些处理许多不同修复版本（4.2、4.3、4.4）的代码。我遇到的问题是，在编写处理程序对象时，我被迫复制代码，因为每个修复版本都将使用不同的处理程序。例如

```
@Handler    
public void executionHandler(quickfix.fix42.ExecutionReport execution, SessionID sessionID)  {
    System.out.println(execution.getClOrdID().getValue());
}

@Handler    
public void executionHandler(quickfix.fix43.ExecutionReport execution, SessionID sessionID)  {
    System.out.println(execution.getClOrdID().getValue());
} 
```

我正在编写的实际代码要复杂得多（我正在检索几个字段并操作数据）。我想不出如何在不诉诸反思的情况下减少这种重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:08:57.323

具有讽刺意味的是，使 QuickFIX/J 更容易和更安全地使用的一些功能也会在您描述的情况下造成困难。处理程序方法和生成的消息类旨在支持类型安全，但您实际上需要更少的类型安全和更多的动态字段访问。生成的类是子类，`quickfix.Message`它是 的子类`quickfix.FieldMap`。FieldMap 类具有用于获取字段数据的公共访问器。类型安全的消息包装器使用这些来获取消息数据。

例如，

`double averagePrice = message.getDouble(AvgPx.FIELD);`

这适用于任何包含该字段的消息。所有生成的字段都有一个带有标签号的 FIELD 静态成员。该类`quickfix.MsgType`还具有消息类型的常量，这对于自定义动态消息调度很有用。

如果您正在访问像 MsgType 这样的消息头字段，请记住通过该`message.getHeader()`方法访问这些字段。

这是一个奖励提示。如果您不需要或不想要类型安全的消息包装器，您可以定义一个简单的自定义`quickfix.MessageFactory`来创建基本`quickfix.Message`对象。这将在处理传入消息时导致小的性能改进。

# c++ - Googletest - DeathTest 无法从 Qt 应用程序（例如 Q_ASSERT 等）捕获断言。

> ID：10317589
> 
> 赞同：2
> 
> 时间：2012-04-25T14:16:24.433
> 
> 标签：c++, qt, googletest, googlemock

我想用 gtest 测试一个断言。该方法如下所示：

```
void aMethod()
{
    Q_ASSERT( 1 == geode.getNumDrawables());

    DoSomeOtherStuff
} 
```

测试看起来像这样：

```
TEST_F(aTestClassDeathTest, aTestName)
{
    ::testing::FLAGS_gtest_death test_style = "threadsafe";
    ASSERT_DEATH({ aMethod;}, "1 == geode.getNumDrawables");
} 
```

这个测试适用于 linux 下的 gcc。

但是在windows下的visual studio 2010这个测试有问题。

当我运行测试时，会打开一个错误窗口。它显示断言失败。当我关闭窗口时，所有测试都完成了。没有测试失败。

我认为 gtests 启动了一个导致断言失败的新进程并评估进程输出。这有效并且测试通过。

但是当 Visual Studio 注意到新进程失败时，它会创建错误窗口。

如何抑制错误窗口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T18:15:15.500

弹出窗口是由于 Qt，而不是 gtest。`Q_ASSERT`宏正在调用 CRT 调试窗口。

您可以替换 your `Q_ASSERT`with`assert`或使用 a[`QtMsgHandler`](http://qt-project.org/doc/qt-4.8/qtglobal.html#qInstallMsgHandler)来抑制弹出窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:33:47.023

正如此线程中的其他用户（Fraser）所指出的，Googletest 不会捕获从 Qt for ex 抛出的断言。Q_ASSERT 或 Q_ASSERT_X。也就是说，用户需要对 Qt 应用程序显示的 UI 对话框执行操作。

[QtMsgHandler](http://qt-project.org/doc/qt-4.8/qtglobal.html#qInstallMsgHandler)来救援。这是您可以解决此问题的方法。

定义如下所示的函数：

```
void myMessageOutput(QtMsgType type, const char *msg)
 {
     switch (type) 
     {
         case QtDebugMsg:
             fprintf(stdout, "Debug: %s\n", msg); // you can also use stderr if you want
             break;
         case QtWarningMsg:
             fprintf(stdout, "Warning: %s\n", msg);
             break;
         case QtCriticalMsg:
             fprintf(stdout, "Critical: %s\n", msg);
             break;
         case QtFatalMsg:
             fprintf(stdout, "Fatal: %s\n", msg);
             abort();
     }
 } 
```

在您期望断言的 Googletest 应用程序中，以下列方式调用它：

```
// Redirect all messages generated from Qt to stdout
qInstallMsgHandler(myMessageOutput);
// Call death testcase
EXPECT_DEATH(call_causing_assertion(),"");
// Restore the default message handler
qInstallMsgHandler(0); 
```

您还可以通过以下方式进行调用，以抑制来自测试应用程序的所有 Qt 断言对话框：

```
int main(int argc, char **argv)
{
 qInstallMsgHandler(myMessageOutput);
 //QApplication app(argc, argv);

 testing::InitGoogleTest(&argc, argv);
 return RUN_ALL_TESTS();

 //...
 //return app.exec();
} 
```

# c# - 使用 IDataReader.Read() 的行为不一致

> ID：10317590
> 
> 赞同：0
> 
> 时间：2012-04-25T14:16:25.120
> 
> 标签：c#, idatareader

我遇到了一个令我难以置信的问题。我注意到 IDataReader.Read() 的行为不同，具体取决于 IDbCommand.CommandText 的设置方式。

在下面的代码中 - 如果设置了“AID”​​并将其传递给 EntAgencyId()，则 reader.Read() 返回 true，并且程序能够进入 while 循环。如果我只是在 EntAgencyId() 中使用我传递给函数的相同值 ('455') 设置“查询”，则程序永远无法进入 while 循环（从一个文本框.文本）。

```
public string EntAgencyId(string AID)
{
    cmd = uasConnection.CreateCommand();
    //query = "select * from EnterpriseAgencyTbl where AOCId = " + AID; //<--Works
    query = "select * from EnterpriseAgencyTbl where AOCId = 455";  //<--Causes issue

    cmd.CommandText = query;
    reader = cmd.ExecuteReader();

    while (reader.Read())
    {
        EntAgId = reader["Id"].ToString();
        AgencyName = reader["Name"].ToString();
    }

    reader.Close();
    return AgencyName;
} 
```

调试时，'query' 总是具有相同的值，那么为什么这与 .Read() 有所不同。

深思 - .Read() 如果有更多行则返回 true；否则为假。在这种情况下，我尝试使用 Item 属性和 GetValue() 仅读取第一行，两者都会导致“对象未设置为对象的实例”错误。

我已经完全没有想法了，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:29:45.160

如果`AID`可能来自不受信任的来源，那么您*真的*应该使用参数。

请改用以下代码：

```
query = "select * from EnterpriseAgencyTbl where AOCId = @AOCId";

cmd.CommandText = query;
cmd.Parameters.Add(new SqlParameter("@AOCId", SqlDbType.Int) { Value = int.Parse(AID) }); 
```

然后使用静态输入查看其行为是否相同，例如：

```
cmd.Parameters.Add(new SqlParameter("@AOCId", SqlDbType.Int) { Value = 455 }); 
```

注意：我根据名称中的“Id”假设 AOCId 是 int 类型。

# c++ - C++ System() 的替代方法，用于启动多个命令提示符。WINAPI（无 MFC）

> ID：10317591
> 
> 赞同：1
> 
> 时间：2012-04-25T14:16:25.673
> 
> 标签：c++, winapi, process, system

我正在编写一个用于启动不同命令行应用程序的程序。问题是当我运行 1 个应用程序时，命令提示符会控制该程序，并且不允许我访问我的 GUI 来启动另一个。我相信这是因为`System()`创建了一个新进程，然后一旦退出命令提示符，控制权就会交还给 GUI。

是否有任何替代方法可以让我一次启动多个命令行程序？例如在一个线程中。

对此的任何帮助将不胜感激。

：：担

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T14:21:27.127

使用[`CreateProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425(v=vs.85).aspx)功能；这会创建一个新进程，但不会等待它完成。[`WaitForSingleObject`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032(v=vs.85).aspx)相反，您可以使用该功能自己等待。

如果您正在启动多个进程，您可能需要考虑使用[`WaitForMultipleObjects`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687025(v=vs.85).aspx)它可以让您一次等待整个进程（和其他对象）列表。

有关如何等待进程完成的更多替代方法，请参阅MSDN 上[的等待函数列表。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686360(v=vs.85).aspx#wait_functions)

# php - Facebook 注册插件重定向

> ID：10317602
> 
> 赞同：0
> 
> 时间：2012-04-25T14:17:05.627
> 
> 标签：php, facebook, registration

我在粉丝页面上有 facebook 应用程序并使用连接到我的系统的注册插件，注册表格显示在 FB 的画布中，当用户 sibmited 他正在重定向到`redirect_uri`reg 插件中的参数的表单时，我应该把什么放到这个参数中，以显示我的在 fb 画布中重定向页面，而不是在我的网站中。

例如，我有`http:\\mysite.com\success_registration.php` 带有内容文本的重定向参数，我希望将`thanks for registartion`其显示在 fb 画布中......现在它像普通网站页面一样显示，但我不希望看到它。用户应留在 FB 应用画布中。

我该如何解决这样的问题？谢谢，安东。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T14:26:19.053

试试 app.facebook.com/[你的应用名称]/success_registration.php

确保 success_registration.php 位于服务器上应用程序设置中指定的文件夹中（通常与 index.php 一起）

# java - 在模式匹配器中使用变量

> ID：10317603
> 
> 赞同：11
> 
> 时间：2012-04-25T14:17:09.163
> 
> 标签：java, regex, matcher

我有以下内容：

```
if (mobile.matches("[0-9]{6,20}")) {
   ...
} 
```

但是想用变量值替换 {6,20}，因为它们在某些情况下是动态的。

IE

```
int minValue = 11;
int maxValue = 20

if (mobile.matches("[0-9]{minValue,maxValue}")) {
   ...
} 
```

如何在 Reg Exp 中包含变量？

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-25T14:17:30.193

使用 Java 的简单字符串连接，使用加号。

```
if (mobile.matches("[0-9]{" + minValue + "," + maxValue + "}")) { 
```

事实上，正如迈克尔建议的那样，如果你经常使用它，编译它会更好地提高性能。

```
Pattern pattern = Pattern.compile("[0-9]{" + minValue + "," + maxValue + "}"); 
```

然后在需要时使用它，如下所示：

```
Matcher m = pattern.matcher(mobile);
if (m.matches()) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-04-06T12:42:38.343

你也可以使用`String.format("[0-9]{%s,%s}", minValue, maxValue)`

# jquery - 如何将视频添加到 nivo 滑块？

> ID：10317604
> 
> 赞同：4
> 
> 时间：2012-04-25T14:17:10.137
> 
> 标签：jquery, video, embed, nivo-slider

我在主页中设置了 nivo 滑块。但是现在，我需要在该滑块中显示一个视频，但我发现当我添加视频时， **nivo 滑块会变得很糟糕：**

```
<object type="application/x-shockwave-flash" data="URL" width="470" height="344" title="#caption1">
                            <param name="movie" value="URL"></param>
                            <param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param>
                            <param name="wmode" value="transparent"></param>
                            <embed type="application/x-shockwave-flash" src="URL" width="470" height="344"></embed>
                        </object> 
```

**是否有人对nivo 核心**进行了更改以允许添加视频功能或处理类似问题？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T09:47:47.480

改用[任何滑块](http://css-tricks.com/examples/AnythingSlider/)。

来自官方网站：

> 特征：
> 
> 面板是 HTML 内容（可以是任何东西）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T18:06:31.797

您可以改用Nivo [Gallery](http://nivogallery.dev7studios.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-30T09:40:58.807

将[BxSlider](http://bxslider.com/examples/video)用于图像和视频

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T14:22:56.407

来自支持人员：

> 不幸的是，滑块目前仅适用于图像。

[http://support.dev7studios.com/discussions/general-discussion/246-using-nivo-slider-for-youtube-videos#comment_12795752](http://support.dev7studios.com/discussions/general-discussion/246-using-nivo-slider-for-youtube-videos#comment_12795752)

也许你有运气使用动画 gif。

# c++ - C++：由于#include 循环，无法将对象实例传递给另一个类

> ID：10317607
> 
> 赞同：1
> 
> 时间：2012-04-25T14:17:16.530
> 
> 标签：c++, class, include

假设我有 2 个课程：

```
// a.h
#ifndef A_H
#define A_H

#include "b.h"

class A {
  public: void a() {
    B* b = new B(this);
  }
}

#endif

// b.h
#ifndef B_H
#define B_H

#include "a.h"

class B {
  public: B(A* a) {
     // ...
  }
}

#endif 
```

此代码将引发错误`A has not been declared`，因为 A 类引用了 B 类，而 B 类又引用了尚未在 ah 中声明的 A 类。

那么如何将 A 的实例传递给 B 呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T14:20:35.913

你需要

1.  将`B`构造函数的传值参数改为指针或引用*
2.  将 的定义移动`B::B`到 cpp 文件（这消除了对 的定义的任何直接依赖`A`，并允许您
3.  *`A`在 Bh 中*前向声明：**

     *```
    // b.h
    #ifndef B_H
    #define B_H

    class A;

    class B {
      public: B(const A& a) {
         // ...
      }
    }

    #endif

    // b.cpp

    #include "b.h"
    #include "a.h"

    public B::B(const A& a) {
      // ...
    } 
    ```* 

 *请注意，我`const`为构造函数参数添加了一个限定符`A&`，因为我假设您不想`a`在`B`.

当然，你也可以反其道而行之，`A::a`把和对应的定义`#include "b.h"`移到 a.cpp 中。

*[无论如何，您很可能应该这样做，因为您不太可能希望在`A`那里按值传递对象。按值传递对象意味着隐式创建对象的副本并将其压入堆栈。哪一个]

*   [意味着对参数对象所做的更改不会影响原始对象，这通常不是您想要的，因此是错误的来源，]
*   [包括创建和销毁临时文件，]
*   [通常比引用/指针消耗更多的内存，]
*   [打开[对象切片](http://en.wikipedia.org/wiki/Object_slicing)错误的大门。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:18:51.543

您将实现移动到单独的文件中。这样你就不必包括`B.h`inside `A.h`：

```
// a.h
class A {
public: 
    void a();
};

// b.h
#include "a.h"
class B {
public: 
    B(A a) { }
};

// a.cpp
#include "a.h"
#include "b.h"
void A::a(){
    B* b = new B(*this); //B constructor doesn't take a pointer
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T14:21:11.870

您使用语法向前声明一个类

```
class A; 
```

在您的 bh 文件中，这足以告诉编译器您将引用一个名为 A 的类。它不允许您访问该类的内部（例如，您没有告诉它它有哪些成员，或者它有多大），但它足以用作指针或引用。

您可以做的另一件事是查看您的设计并尝试删除此类循环依赖项。*

# countdownlatch - CyclicBarrier 和 CountDownLatch？

> ID：10317609
> 
> 赞同：0
> 
> 时间：2012-04-25T14:17:23.273
> 
> 标签：countdownlatch, cyclicbarrier

CyclicBarrier 和 CountDownLatch 有什么区别？我觉得有细微的差别，因为两者看起来都一样。

如果我错了，请告诉我并解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T01:59:56.090

CountDownLatch 用于一次性同步。在使用 CountDownLatch 时，任何线程都可以调用 countDown() 任意次数。由于其他未阻塞线程对 countDown() 的调用，调用 await() 的线程将被阻塞，直到计数达到零。[CountDownLatch](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html)的javadoc状态：

> 由于调用了 countDown() 方法，等待方法一直阻塞，直到当前计数达到零，之后所有等待的线程都被释放，任何后续的 await 调用立即返回。...
> 
> 另一个典型的用法是将一个问题分成 N 个部分，用一个 Runnable 描述每个部分，该 Runnable 执行该部分并在锁存器上倒计时，并将所有 Runnables 排队到一个 Executor。当所有子部分都完成后，协调线程就可以通过await了。（当线程必须以这种方式重复倒计时时，请改用 CyclicBarrier。）

相反，循环屏障用于多个同步点，例如，如果一组线程正在运行循环/分阶段计算并且需要在开始下一个迭代/阶段之前进行同步。根据[CyclicBarrier 的 javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CyclicBarrier.html)：

> 屏障被称为循环的，因为它可以在等待线程被释放后重新使用。

与 CountDownLatch 不同，对 await() 的每次调用都属于某个阶段，并且会导致线程阻塞，直到属于该阶段的所有各方都调用了 await()。CyclicBarrier 不支持明确的 countDown() 操作。

# macos - DNS 服务器不传播子域

> ID：10317616
> 
> 赞同：0
> 
> 时间：2012-04-25T14:17:48.047
> 
> 标签：macos, dns

这很复杂，所以请多多包涵。我们是一家拥有内部 DNS 服务器的小公司。我们管理自己的 FTP 和邮件，但远程托管我们的网站 (Bluehost)。我们正在使用 Mac OSX 10.3 (Panther) Server 软件在我们的防火墙后面路由用户。我最近为我们网站的移动版本 (m.mysite.com) 创建了一个新的子域。它可以在远程或从代理服务器正常工作。它在我们防火墙后面的办公室不起作用。我的区域记录有问题吗？

这是我的本地区域记录：

```
Type  From              To
NS    mysite.com        ns.mysite.com
A     ns.mysite.com     10.0.0.100
A     ical.mysite.com   10.0.0.100
A     mail.mysite.com   10.0.0.101
A     ftp.mysite.com    10.0.0.103
A     mysite.com        74.220.195.50 (my remote webhost IP)
A     www.mysite.com    74.220.195.50
MX    mysite.com        mail.mysite.com
A     m.mysite.com      74.220.195.50 (does not work!) 
```

这是我的远程虚拟主机上的区域记录的一个 exerprt：

```
Type  From              To
A     @                 74.220.195.50
A     localhost         127.0.0.1
A     mail              17.149.160.49 (my office's IP)
A     ftp               17.149.160.49
A     m                 74.220.195.50
A     www.m             74.220.195.50 
```

我尝试转储本地缓存并重新启动所有本地机器。没有喜悦。除 m.mysite.com 外，一切正常。任何想法我做错了什么？顺便说一句，这些不是真正的远程 IP。我用这些来说明问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:24:46.370

如果您想拥有一台与 Internet 通信的 DNS 服务器，则需要另一台服务器。您的名为 primary 的 DNS 服务器必须在 Internet 上可见。您的第二个 DNS 服务器将在本地使用。

您的主服务器将通过 Internet 保存可路由的 IP 地址。

您的辅助服务器将通过以太网（您的 LAN）保存可路由的 IP 地址。

主服务器示例：

```
Type  From              To
NS    mysite.com        ns.mysite.com
A     ns.mysite.com     74.220.195.50
A     ical.mysite.com   74.220.195.50
A     mail.mysite.com   74.220.195.50
A     ftp.mysite.com    74.220.195.50
A     mysite.com        74.220.195.50
A     www.mysite.com    74.220.195.50
MX    mysite.com        mail.mysite.com
A     m.mysite.com      74.220.195.50 
```

辅助服务器示例：

```
Type  From              To
NS    mysite.com        ns.mysite.com
A     ns.mysite.com     10.0.0.100
A     ical.mysite.com   10.0.0.100
A     mail.mysite.com   10.0.0.101
A     ftp.mysite.com    10.0.0.103
A     mysite.com        10.0.0.100
A     www.mysite.com    10.0.0.100
MX    mysite.com        mail.mysite.com
A     m.mysite.com      10.0.0.100 
```

所以这背后的想法是

```
 Everyone
       |
      You
       |
     Router
    |      |
    A      B 
```

答：在 Internet 上可见 - DNS、Web 服务器，无论您想要什么（您将您的域路由到那里）

B ：本地 DNS 服务器，您将其用作局域网连接内的主要和辅助 DNS 服务器。

在办公室，你的电脑会询问 B，你会得到 A 的内部 IP 地址。所以你会看到服务器 A 的页面。

在 Internet 上，您会看到计算机 A 并询问服务器 A。

您的计算机将在转到 A 之前查看 B 的 DNS 解析内容，并且由于 B 应该保留您的分配，您的计算机将获得您服务器的内部 IP 地址。

# django - 如何使用现有数据库设置 PostGIS？

> ID：10317617
> 
> 赞同：1
> 
> 时间：2012-04-25T14:17:49.170
> 
> 标签：django, postgresql, postgis

我有一个数据库，它有一个表，学校。该表还具有 'float' 类型的纬度和经度列。我已经安装了 PostGIS。我使用 template_postgis_20 创建了一个 postgis 数据库。我，然后添加了一个数据类型几何的表。现在，如何将纬度和经度从另一个 Schools 表转移到该表？

我将它用于 Django 应用程序。我需要进行查询，例如查找学生当前位置（纬度和经度）5 英里范围内的学校。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:25:49.247

如果您在数据库中正确安装了 postgis，我建议您安装并使用[south](http://south.aeracode.org)进行迁移的几何函数，首先阅读[教程](http://south.aeracode.org/docs/tutorial/index.html)，然后进行[数据迁移](http://south.aeracode.org/docs/tutorial/part3.html#data-migrations)

# android - 如何在 OnDraw 中使用 canvas.drawText 更新文本？安卓

> ID：10317618
> 
> 赞同：1
> 
> 时间：2012-04-25T14:17:50.063
> 
> 标签：android, android-canvas

我的应用程序有一个自定义视图，并且每次调用 OnDraw 时我都会尝试更新文本。

（一些）我的代码如下所示：

```
@Override
protected void onDraw(Canvas canvas) {
    Log.e(TAG,"onDraw");
    drawBackground(canvas);

    float scale = (float) getWidth();       
    canvas.save(Canvas.MATRIX_SAVE_FLAG);
    canvas.scale(scale, scale);

    drawTitle(canvas);
    drawHand(canvas);

    canvas.restore();

    if (handNeedsToMove()) {
        moveHand();
    }
}

private void drawTitle(Canvas canvas) {

    String title = getTitle();
    Log.i("drawtitle",title);

    titlePaint = new Paint();
    titlePaint.setColor(0xffffffff);
    titlePaint.setAntiAlias(true);
    titlePaint.setTypeface(Typeface.MONOSPACE);
    titlePaint.setTextAlign(Paint.Align.CENTER);
    titlePaint.setTextSize(0.05f);
    titlePaint.setTextScaleX(0.8f);

    canvas.drawText(title, 0.45f, 0.95f, titlePaint);
}
@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    Log.d(TAG, "Size changed to " + w + "x" + h);

    regenerateBackground();
}
private void regenerateBackground() {
    if (background != null) {
        background.recycle();
    }

        //Some stuff here

    drawInstruments(backgroundCanvas);
    drawTitle(backgroundCanvas);

} 
```

文本在被 regenerateBackground 调用时得到更新，但在 OnDraw 上保持不变。为什么？怎么修？也许有比使用 canvas.drawText 更好的方法吗？我正在制作一个速度计，我只想打印“针”指向的值......

编辑：完整代码

公共最终类仪表板扩展视图 {

```
private static final String TAG = Dashboard.class.getSimpleName();

// drawing tools
private Paint dashPaint;
private static Bitmap dash;
private Matrix dashMatrix;
private float dashScalex;   
private float dashScaley;   

private Paint handPaint;
private Path handPath;
private Paint handScrewPaint;

private Paint backgroundPaint; 
// end drawing tools

private Bitmap background; // holds the cached static part

private Paint titlePaint;
private Path titlePath;

// scale configuration
private static final int totalNicks = 100;
private static final float degreesPerNick = 360.0f / totalNicks;    
private static final int centerDegree = 40; // the one in the top center (12 o'clock)
private static final int minDegrees = -30;
private static final int maxDegrees = 110;

// hand dynamics -- all are angular expressed in F degrees
private boolean handInitialized = true;
private float handPosition = centerDegree;
private float handTarget = centerDegree;
private float handVelocity = 0.0f;
private float handAcceleration = 0.0f;
private long lastHandMoveTime = -1L;

private static  float circlePosx = 0.5f;
private static  float circlePosy = 0.36f;
private static float circleRadius = 0.1f;

public Dashboard(Context context) {
    super(context);
    init();
}

public Dashboard(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
}

public Dashboard(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init();
}

@Override
protected void onRestoreInstanceState(Parcelable state) {
    Bundle bundle = (Bundle) state;
    Parcelable superState = bundle.getParcelable("superState");
    super.onRestoreInstanceState(superState);

    handInitialized = bundle.getBoolean("handInitialized");
    handPosition = bundle.getFloat("handPosition");
    handTarget = bundle.getFloat("handTarget");
    handVelocity = bundle.getFloat("handVelocity");
    handAcceleration = bundle.getFloat("handAcceleration");
    lastHandMoveTime = bundle.getLong("lastHandMoveTime");
}

@Override
protected Parcelable onSaveInstanceState() {
    Parcelable superState = super.onSaveInstanceState();

    Bundle state = new Bundle();
    state.putParcelable("superState", superState);
    state.putBoolean("handInitialized", handInitialized);
    state.putFloat("handPosition", handPosition);
    state.putFloat("handTarget", handTarget);
    state.putFloat("handVelocity", handVelocity);
    state.putFloat("handAcceleration", handAcceleration);
    state.putLong("lastHandMoveTime", lastHandMoveTime);
    return state;
}

public static float[] getCircle(){      
    float[] circle = {circlePosx,circlePosy,circleRadius};
    return circle;  
}

public static int[] getCanvasSize(){
    int[] size = {dash.getWidth(),dash.getHeight()};
    return size;
}

private void init() {
    initDrawingTools();
}

private void initDrawingTools() {

    /******/
    dashPaint = new Paint();
    dashPaint.setFilterBitmap(true);
    dash = BitmapFactory.decodeResource(getContext().getResources(), R.drawable.dashboard);
    dashMatrix = new Matrix();

    dashScaley = 1f/dash.getHeight();// * 0.3f;;
    dashScalex = 1f/dash.getWidth();
    dashMatrix.setScale(dashScalex, dashScaley);    

    Log.i("dash width", "= "+dash.getWidth()+" - "+getWidth());
    Log.i("dash height", "= "+dash.getHeight());
    Log.i("dash scale x ", "= "+1f/dash.getHeight());
    Log.i("dash scale y ", "= "+dashScaley);

    /******/

    handPaint = new Paint();
    handPaint.setAntiAlias(true);
    handPaint.setColor(0xffff0000);     
    handPaint.setShadowLayer(0.01f, -0.005f, -0.005f, 0x7f000000);
    handPaint.setStyle(Paint.Style.FILL);   

    handPath = new Path();
    handPath.moveTo(circlePosx-0.01f, circlePosy+0.06f);

    handPath.lineTo(circlePosx, circlePosy - 0.16f);
    handPath.lineTo(circlePosx+0.01f, circlePosy + 0.06f);
    handPath.addCircle(circlePosx, circlePosy, 0.025f, Path.Direction.CW);

    handScrewPaint = new Paint();
    handScrewPaint.setAntiAlias(true);
    handScrewPaint.setColor(0xf0000021);
    handScrewPaint.setStyle(Paint.Style.FILL);

    backgroundPaint = new Paint();
    backgroundPaint.setFilterBitmap(true);

    titlePaint = new Paint();
    titlePaint.setColor(0xffffffff);
    titlePaint.setAntiAlias(true);
    titlePaint.setTypeface(Typeface.DEFAULT_BOLD);
    titlePaint.setTextAlign(Paint.Align.CENTER);
    titlePaint.setTextSize(0.05f);
    titlePaint.setTextScaleX(0.8f);

    titlePath = new Path();
    titlePath.moveTo(0.5f, 0.8f);
    titlePath.lineTo(0.6f, 0.8f);
    //titlePath = new Path();
    //titlePath.addArc(new RectF(0.24f, 0.24f, 0.76f, 0.76f), -180.0f, -180.0f);        

}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    Log.d(TAG, "Width spec: " + MeasureSpec.toString(widthMeasureSpec));
    Log.d(TAG, "Height spec: " + MeasureSpec.toString(heightMeasureSpec));

    int widthMode = MeasureSpec.getMode(widthMeasureSpec);
    int widthSize = MeasureSpec.getSize(widthMeasureSpec);

    int heightMode = MeasureSpec.getMode(heightMeasureSpec);
    int heightSize = MeasureSpec.getSize(heightMeasureSpec);

    int chosenWidth = chooseDimension(widthMode, widthSize);
    int chosenHeight = chooseDimension(heightMode, heightSize);

    setMeasuredDimension(chosenWidth, chosenHeight);

    //int chosenDimension = Math.min(chosenWidth, chosenHeight);
    //setMeasuredDimension(chosenDimension, chosenDimension);
}

private int chooseDimension(int mode, int size) {
    if (mode == MeasureSpec.AT_MOST || mode == MeasureSpec.EXACTLY) {
        return size;
    } else { // (mode == MeasureSpec.UNSPECIFIED)
        return getPreferredSize();
    } 
}

// in case there is no size specified
private int getPreferredSize() {
    return 600;
}

private int nickToDegree(int nick) {
    int rawDegree = ((nick < totalNicks / 2) ? nick : (nick - totalNicks)) * 2;
    int shiftedDegree = rawDegree + centerDegree;
    return shiftedDegree;
}

private float degreeToAngle(float degree) {
    return (degree - centerDegree) / 2.0f * degreesPerNick;
}

private void drawInstruments(Canvas canvas){
    canvas.save(Canvas.MATRIX_SAVE_FLAG);

    canvas.translate(0.5f - dash.getWidth() * dashScalex / 2.0f, 
                     0.5f - dash.getHeight() * dashScaley / 2.0f);

    //canvas.drawBitmap(dash, 0, 0, dashPaint);
    canvas.drawBitmap(dash, dashMatrix, dashPaint);
    canvas.restore();           
}

private void drawHand(Canvas canvas) {
    Log.e(TAG, "drawHand");
    if (handInitialized) {

        float handAngle = degreeToAngle(handPosition);
        canvas.save(Canvas.MATRIX_SAVE_FLAG);
        canvas.rotate(handAngle, circlePosx, circlePosy);
        canvas.drawPath(handPath, handPaint);
        canvas.restore();

        canvas.drawCircle(0.5f, 0.36f, 0.01f, handScrewPaint);

    }
}
private String getTitle(){
    return String.valueOf(handPosition);
}
private void drawTitle(Canvas canvas) {

    String title = getTitle();
    //canvas.drawTextOnPath(title, titlePath, 0.0f,0.0f, titlePaint);   
    //canvas.drawPaint(titlePaint);

    Log.i("drawtitle",title);

    canvas.drawText(title, 0.45f, 0.95f, titlePaint);
    //invalidate();
}   

private void drawBackground(Canvas canvas) {
    if (background == null) {
        Log.w(TAG, "Background not created");
    } else {
        canvas.drawBitmap(background, 0, 0, backgroundPaint);
    }
}

@Override
protected void onDraw(Canvas canvas) {
    Log.e(TAG,"onDraw");
    drawBackground(canvas);

    float scale = (float) getWidth();       
    canvas.save(Canvas.MATRIX_SAVE_FLAG);
    canvas.scale(scale, scale);

    drawTitle(canvas);
    drawHand(canvas);

    canvas.restore();

    if (handNeedsToMove()) {
        moveHand();
    }
}

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    Log.d(TAG, "Size changed to " + w + "x" + h);

    regenerateBackground();
}

private void regenerateBackground() {
    // free the old bitmap
    if (background != null) {
        background.recycle();
    }

    Log.e("Width="+getWidth(), "Height="+getHeight());
    background = Bitmap.createBitmap(getWidth(), getHeight(), Bitmap.Config.ARGB_8888);
    Canvas backgroundCanvas = new Canvas(background);

    float scalex = (float) getWidth();  
    float scaley = (float) getHeight(); 
    backgroundCanvas.scale(scalex, scaley);

    drawInstruments(backgroundCanvas);

}

private boolean handNeedsToMove() {
    return Math.abs(handPosition - handTarget) > 0.01f;
}

private void moveHand() {
    Log.e(TAG, "moveHand!!");
    if (! handNeedsToMove()) {
        return;
    }

    if (lastHandMoveTime != -1L) {
        long currentTime = System.currentTimeMillis();
        float delta = (currentTime - lastHandMoveTime) / 1000.0f;

        float direction = Math.signum(handVelocity);
        if (Math.abs(handVelocity) < 90.0f) {
            handAcceleration = 5.0f * (handTarget - handPosition);
        } else {
            handAcceleration = 0.0f;
        }
        handPosition += handVelocity * delta;
        handVelocity += handAcceleration * delta;
        if ((handTarget - handPosition) * direction < 0.01f * direction) {
            handPosition = handTarget;
            handVelocity = 0.0f;
            handAcceleration = 0.0f;
            lastHandMoveTime = -1L;
        } else {
            lastHandMoveTime = System.currentTimeMillis();              
        }
        invalidate();
    } else {
        lastHandMoveTime = System.currentTimeMillis();
        moveHand();
    }
}

private float getRelativeTemperaturePosition() {
    if (handPosition < centerDegree) {
        return - (centerDegree - handPosition) / (float) (centerDegree - minDegrees);
    } else {
        return (handPosition - centerDegree) / (float) (maxDegrees - centerDegree);
    }
}

public void setHandTarget(float temperature) {
    Log.e(TAG, "setHandTarget!");
    if (temperature < minDegrees) {
        temperature = minDegrees;
    } else if (temperature > maxDegrees) {
        temperature = maxDegrees;
    }
    handTarget = temperature;
    Log.e(TAG, "handTarget="+handTarget);
    handInitialized = true;
    invalidate();
}

public float getHandTarget(){
    return handTarget;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:33:55.820

在您的 setTitle() 方法中删除对`drawTitle()`from`regenerateBackground()`和调用 invalidate 的调用。

# c# - 让相机在人像模式下正常工作

> ID：10317620
> 
> 赞同：3
> 
> 时间：2012-04-25T14:17:58.513
> 
> 标签：c#, windows-phone-7, xaml

我将相机添加到我的应用程序中，该应用程序全部处于人像模式，因此希望保持这种方式。

这是我在 .XAML 中使用的相关代码片段

```
SupportedOrientations="Portrait" Orientation="Portrait"
mc:Ignorable="d" d:DesignHeight="800" d:DesignWidth="480"

    <Canvas x:Name="viewfinderCanvas" Width="480" Height="800" >
        <!--Camera viewfinder -->
        <Canvas.Background>
            <VideoBrush x:Name="viewfinderBrush">
            </VideoBrush>
        </Canvas.Background>
    </Canvas> 
```

这是我来自 .XAML.CS 的设置代码

```
 protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
         if (PhotoCamera.IsCameraTypeSupported(CameraType.FrontFacing))
         {
            cam = new Microsoft.Devices.PhotoCamera(CameraType.FrontFacing);
         }
         else
         {
            cam = new Microsoft.Devices.PhotoCamera(CameraType.Primary);
         }

         cam.Initialized += new EventHandler<Microsoft.Devices.CameraOperationCompletedEventArgs>(cam_Initialized);
         cam.CaptureCompleted += new EventHandler<CameraOperationCompletedEventArgs>(cam_CaptureCompleted);
         cam.CaptureImageAvailable += new EventHandler<Microsoft.Devices.ContentReadyEventArgs>(cam_CaptureImageAvailable);
         cam.CaptureThumbnailAvailable += new EventHandler<ContentReadyEventArgs>(cam_CaptureThumbnailAvailable);
         viewfinderBrush.SetSource(cam);
    } 
```

问题是我将手机放在纵向并将手机指向一个人。屏幕在屏幕右侧显示人的头部，在屏幕左侧显示人的脚。当他们站在我面前时，头应该在屏幕顶部，脚应该在底部，因为这些人不是超人。

因此，来自相机的图像似乎在出现在屏幕上之前被旋转了 -90。

任何人都可以解释发生了什么问题以及我需要实施哪些示例代码来解决这个问题。

谢谢，-代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T14:26:32.457

您需要实现 VideoBrush.RelativeTransform，如下文所述：-

[http://msdn.microsoft.com/en-us/magazine/hh708750.aspx](http://msdn.microsoft.com/en-us/magazine/hh708750.aspx)

还包括以下内容：-

[Windows Phone 7 Mango PhotoCamera 的取景器方向](https://stackoverflow.com/questions/6612562/viewfinder-orientation-with-windows-phone-7-mango-photocamera)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-17T09:12:09.147

只需将此行添加到相机页面的 C# 代码中即可。它将正确转换和处理纵向模式下的相机视频流。

```
viewfinderTransform.Rotation = 90; 
```

# java - Java 模板化包装类，可让您修改对象一次

> ID：10317630
> 
> 赞同：1
> 
> 时间：2012-04-25T14:18:45.210
> 
> 标签：java, immutability

我可以自己写，但我猜这是非常标准的。是否有一个标准的java类可以做到这一点？我知道这必须是一个运行时功能，因为我的代码的各个部分可以在不知道彼此在做什么的情况下设置它 - 如果发生这种情况，我只是希望它大声失败。

```
public class MutableOnce<Type T> {
    private T _t;
    private boolean _isSet = false;
    public void set(T t) {
        if(_isSet) {
            //raise exception
        }
        _t = t;
    public T get() { return _t; }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T14:21:46.647

您不想简单地使对象不可变的任何原因？这将使该类更易于使用，尤其是在并发环境中（您示例中的类不是线程安全的）。

```
public class Immutable<T> {
    private final T _t;
    public void Immutable(T t) {
        _t = t;
    }
    public T get() { return _t; } //you may want to return a copy of _t if _t is mutable
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:23:01.897

快速搜索后：

1.  所有字段必须是私有的，最好是最终的
2.  确保类不能被覆盖 - 使类最终，或使用静态工厂并保持构造函数私有
3.  必须从构造函数/工厂填充字段
4.  不要为字段提供任何设置器
5.  注意收藏。使用 Collections.unmodifiable*。此外，集合应该只包含不可变对象
6.  所有 getter 必须提供不可变对象或使用防御性复制
7.  不要提供任何改变对象内部状态的方法。

资料来源：[使对象不可变的可能方法](https://stackoverflow.com/questions/1017140/possible-ways-of-making-an-object-immutable)

# c++ - 将业务逻辑迁移到服务：Thrift 的替代方案

> ID：10317632
> 
> 赞同：0
> 
> 时间：2012-04-25T14:18:47.957
> 
> 标签：c++, python, architecture, thrift

我正在构建一个应用程序，该应用程序在 C++/Qt 中具有基于应用程序的前端，在 Python（使用 Django）框架中具有基于 Web 的前端。我正在尝试将架构迁移到基于服务的架构，因为这两个前端都嵌入了业务逻辑，这使得它难以维护。

我正在考虑选择 Thrift 来编写 RPC 服务，这些服务可以被系统中的其他模块和 Python 代码使用。但是，看起来 Thrift 在 Windows 上不能很好地工作，所以我可以选择将 Thrift 输出转换为一些 C++ 结构，然后需要再次序列化/反序列化，以便服务可以由 Qt/C++ 使用。Python 代码可以轻松使用这些 Thrift 服务。

在这个过程中，我需要转换/序列化结构，首先根据 Thrift IDL，然后是一些自定义代码。任何改变架构的建议，以便

*   把事情简单化
*   适用于多种语言
*   快速实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:38:15.567

我已经使用omniORB 实现了类似的东西。它具有 python 和 C++ 的绑定。在 python 中它真的很容易并且性能非常好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T07:17:21.517

你可以考虑：

*   已经提到的 CORBA 解决方案：内置编组，紧凑的二进制协议
*   REST http 和基于 json 的服务器：简单，网络上有点啰嗦，你需要将你的数据序列化为 json
*   AMQP 消息传递 + json 或其他一些序列化器：您需要将数据序列化为 json 或其他类似 google 协议缓冲区的东西，此外，如果您需要更多服务器，扩展会更简单。

# silverlight - 将网格保存为字节

> ID：10317634
> 
> 赞同：0
> 
> 时间：2012-04-25T14:18:52.113
> 
> 标签：silverlight, silverlight-4.0, silverlight-3.0, silverlight-toolkit, silverlight-5.0

我想开发一个像 mspaint 这样的 Silverlight 项目。我找到了一个例子。但它有一个问题。我无法将 DrawingArea 网格保存为图像文件或字节。我不知道如何将 DrawingArea 网格保存为字节。请帮帮我

```
 <UserControl
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
            xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" x:Class="SilverlightPaintApplication.MainPage" 
            Width="805" Height="600" mc:Ignorable="d" BorderThickness="0,0,0,0" BorderBrush="{x:Null}">
            <Grid x:Name="LayoutRoot" Background="#FFFFFFFF" Width="Auto" >

                ...

            <Grid x:Name="DrawingArea" Margin="0,0,-5,8" MouseMove="DrawingArea_MouseMove" MouseLeftButtonDown="DrawingArea_MouseLeftButtonDown" MouseLeftButtonUp="DrawingArea_MouseLeftButtonUp" Background="#FFFFFFFF"/>

                ...

            </Grid>
        </UserControl> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T18:24:56.930

我相信解决方案是使用可[写位图](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap%28v=VS.95%29.aspx)并将其保存，[如此处所述](https://stackoverflow.com/a/1394466/10893)。

# asp.net-mvc - ASP.NET MVC - 使用自定义 JQuery 验证比使用模型注释更好吗？

> ID：10317636
> 
> 赞同：5
> 
> 时间：2012-04-25T14:19:01.180
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我刚刚开始使用带有 Razor 的 ASP.NET 的 MVC 模式，一切都很棒！用于验证的模型注释起初看起来很棒，但现在它变得非常烦人，因为似乎没有一种直接的方式来验证复选框，并且将您自己的 JQuery 验证与模型一起集成到表单中似乎很痛苦验证。似乎通过在模型中添加注释 asp.net 正在为您完成工作，这很好，但是当涉及到自定义站点时，我不需要预先完成任何事情。那么，最好使用 JQuery 进行自己的验证，还是坚持使用模型中的注释？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T14:29:43.110

从安全角度来看，仅客户端验证是一个*大错误。*绝对在服务器端验证；如果两者都做很痛苦，请放弃客户端验证。

模型验证在 MVC3 中已经取得了相当大的进展，并且可能比你想象的更灵活。

例如，您可以在模型上实现 IValidatableObject，这需要定义此方法：

```
public IEnumerable<ValidationResult> Validate(ValidationContext validationContext) 
```

您可以将各种验证规则放入其中，包括基于多个输入值组合的规则（例如 password 和 password_repeat 必须相等）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T14:52:07.243

最重要的是您有服务器端验证。您不必使用数据注释：您可以尝试使用另一种验证方法，例如实现 IValidatableObject，或集成另一个验证框架。

根据我的经验，数据注释（连同不显眼的验证库）提供了一种简单且可扩展的方式来将服务器端规则链接到客户端实现，而不是在不同的地方定义相同的规则。

如果您想显式控制客户端验证（但仍然喜欢数据注释在服务器上的操作方式），那么您可以禁用 javascript 适配器（这会根据输入字段上呈现的数据属性添加客户端验证规则），并且手动实施客户端规则。

但是很难理解为什么要这样做，因为适配器所做的只是将服务器端规则（可能是自定义的，可能不是）链接到其客户端等效规则。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T14:32:39.130

我也更喜欢模型注释。您可能拥有的任何 jQuery 验证，您还希望将其作为模型注释放置，以确保有人没有通过禁用 javascript 或黑客攻击来绕过您的任何 jQuery 验证......

我发现添加复选框验证以及任何其他自定义验证的最简单方法是使用 CustomValidationAttribute，如下所述：

[http://weblogs.asp.net/peterblum/archive/2009/12/07/the-customvalidationattribute.aspx](http://weblogs.asp.net/peterblum/archive/2009/12/07/the-customvalidationattribute.aspx)

例子：

```
[CustomValidation(typeof(Category), "FinalCheck")]
public partial class Category
{
   [CustomValidation(typeof(Category), "TestCategoryName")]
   public string CategoryName { get; set; }

   public bool Active { get; set; }

   public bool ShowOnHomepage { get; set; }

   public static ValidationResult FinalCheck(Category pCategory, ValidationContext pValidationContext)
   {
      if (!pCategory.Active && pCategory.ShowOnHomepage)
         return new ValidationResult("The category must be active in order to show it on the homepage.", new List<string> { "Active", "ShowOnHomepage" });
      return ValidationResult.Success;
   }

   public static ValidationResult TestCategoryName(string pNewName, ValidationContext pValidationContext)
   {
      if (Regex.IsMatch(pNewName, @"^\d"))
         return new ValidationResult("Cannot start with a digit", new List<string> { "CategoryName" });
      return ValidationResult.Success;
   }
} 
```

# google-api - 如何通过 API 向 Google Drive 添加/创建/插入文件？

> ID：10317638
> 
> 赞同：39
> 
> 时间：2012-04-25T14:19:08.963
> 
> 标签：google-api, google-drive-api, google-api-client

需要有关通过 api 将文件插入谷歌驱动器的帮助。用于此目的的 api 文档并没有明确说明如何通过 http post 请求发送文件的实际正文。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-04-25T20:54:10.767

[插入操作](https://developers.google.com/drive/v2/reference/files/insert)的文档已经包含了许多编程语言的示例，这里是如何使用基于 HTTP 的 Google Drive API 协议来完成的。

首先，将新文件元数据发布到 Drive 端点。它必须采用[文件资源 JSON 对象](https://developers.google.com/drive/v2/reference/files#resource)的形式：

```
POST /drive/v2/files HTTP/1.1
Host: www.googleapis.com
Authorization: Bearer <OAuth 2.0 access token here>
...

{
  "title": "file_name.extension",
  "mimeType": "mime/type",
  "description": "Stuff about the file"
} 
```

响应正文将是新创建的文件资源的 JSON 表示。它看起来像：

```
{
  "kind": "drive#file",
  "id": string,
  "etag": etag,
  "selfLink": string,
  "title": "file_name",
  "mimeType": "mime/type",
  "description": "Stuff about the file"
  ...
  "downloadUrl": string,
  ...
} 
```

这是对已创建文件条目的确认。现在您需要上传内容。为此，您需要获取上述响应中*id* JSON 属性给出的文件 ID，并使用 OAuth 2.0 授权请求将实际文件的内容发送到上传端点。它应该看起来像：

```
PUT /upload/drive/v2/files/{id}?uploadType=media HTTP/1.1
Host: www.googleapis.com
Authorization: Bearer <OAuth 2.0 access token here>
Content-Type: mime/type

<file content here> 
```

你完成了:)

还有一种方法可以在 1 个使用多部分请求的单个 POST 请求中执行此操作，您可以在该请求中将文件的元数据与内容同时发布。这是一个例子：

```
POST /upload/drive/v2/files HTTP/1.1
Host: www.googleapis.com
Authorization: Bearer <OAuth 2.0 access token here>
Content-Type: multipart/form-data; boundary=287032381131322
...

--287032381131322
Content-Type: application/json

{
  "title": "file_name.extension",
  "mimeType": "mime/type",
  "description": "Stuff about the file"
}
--287032381131322
Content-Type: mime/type

<file content here>
--287032381131322-- 
```

响应将包含新创建文件的元数据。您还可以在请求的子部分中使用**Content-Transfer-Encoding: base64**标头，以便能够将文件的数据作为 Base 64 编码传递。

最后还有一个[可恢复的上传协议](https://developers.google.com/drive/manage-uploads#resumable)，方便上传大文件，提供暂停/恢复功能和/或上传具有不稳定互联网连接的文件。

PS：其中大部分内容现在在[Drive 的文件上传文档](https://developers.google.com/drive/manage-uploads#resumable)中进行了描述。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-21T07:21:11.400

感谢您的解释！这让我花了好几个小时在蹩脚的谷歌 SDK 文档上兜圈子（对不起，我不得不吐槽）。

这是我制作的一个函数，它将更新一个文本文件（如您所见，我正在更新 html）：

```
 function gd_updateFile(fileId, folderId, text, callback) {

    const boundary = '-------314159265358979323846';
    const delimiter = "\r\n--" + boundary + "\r\n";
    const close_delim = "\r\n--" + boundary + "--";

    var contentType = "text/html";
    var metadata = {'mimeType': contentType,};

    var multipartRequestBody =
        delimiter +  'Content-Type: application/json\r\n\r\n' +
        JSON.stringify(metadata) +
        delimiter + 'Content-Type: ' + contentType + '\r\n' + '\r\n' +
        text +
        close_delim;

    if (!callback) { callback = function(file) { console.log("Update Complete ",file) }; }

    gapi.client.request({
        'path': '/upload/drive/v2/files/'+folderId+"?fileId="+fileId+"&uploadType=multipart",
        'method': 'PUT',
        'params': {'fileId': fileId, 'uploadType': 'multipart'},
        'headers': {'Content-Type': 'multipart/mixed; boundary="' + boundary + '"'},
        'body': multipartRequestBody,
        callback:callback,
    });
  } 
```

这是 google 示例的混搭（它使用来自上传的二进制文件），以及上面@Nivco 的精彩解释。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-01-11T21:42:31.073

4年后，这仍然很难弄清楚。我接受了@user1158023 的回答来支持上传图片。我正在使用 API v3 和 superagent.js 来帮助我（因为 gapi.client.request 正在将请求发送到 content.googleapis.com！？）。希望有人会发现这很有用。

```
function gd_uploadFile(name, contentType, data, callback) {
    const boundary = '-------314159265358979323846';
    const delimiter = "\r\n--" + boundary + "\r\n";
    const close_delim = "\r\n--" + boundary + "--";

    contentType = contentType || "text/html";
    var metadata = {
        name: name,
        'mimeType': contentType
    };

    var multipartRequestBody =
        delimiter +  'Content-Type: application/json\r\n\r\n' +
        JSON.stringify(metadata) +
        delimiter +
        'Content-Type: ' + contentType + '\r\n';

    //Transfer images as base64 string.
    if (contentType.indexOf('image/') === 0) {
        var pos = data.indexOf('base64,');
        multipartRequestBody += 'Content-Transfer-Encoding: base64\r\n' + '\r\n' +
            data.slice(pos < 0 ? 0 : (pos + 'base64,'.length));
    } else {
        multipartRequestBody +=  + '\r\n' + data;
    }
    multipartRequestBody += close_delim;

    if (!callback) { callback = function(file) { console.log("Update Complete ", file) }; }

    superagent.post('https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart').
        set('Content-Type', 'multipart/form-data;  boundary="' + boundary + '"').
        set('Authorization', 'Bearer ' + gapi.auth.getToken().access_token).
        send(multipartRequestBody).
        end(function () {
            console.log(arguments);
        });
}

//On upload
$('#file')[0].onchange = function () {
    var file = $('#file')[0].files[0];
    if (file && file.type === 'image/jpeg') {
        var reader = new FileReader();
        reader.onloadend = function () {
            var data = reader.result;
            gd_uploadFile('img.jpg', 'image/jpeg', data, function () {
                console.log(arguments);
            });
        }
        reader.readAsDataURL(file);
    }
}; 
```

索引.html

```
...
<form>
    <span>Upload: </span><input id="file" type="file" name="myFile">
</form>
... 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-05-02T20:09:56.923

我希望有更好的驱动器 gapis v3 示例...我花了一些时间才弄清楚如何将新内容上传到使用创建的现有文件中

```
gapi.client.drive.files.create({ "name" : "savefile.txt" }).execute(function(file) { console.log("Created file " + file.name + " id: " + file.id); }); 
```

但最终我尝试了将fileId添加到路径并将方法更改为PATCH的“幸运”组合

```
function uploadFile(id, text)                                                                                                                                                          
{
  var auth_token = gapi.auth.getToken().access_token;

  const boundary = '-------314159265358979323846';
  const delimiter = "\r\n--" + boundary + "\r\n";
  const close_delim = "\r\n--" + boundary + "--";

  var metadata = { 
      description : 'savefile for my game',
      'mimeType': 'application/json'
  };  

  var multipartRequestBody =
    delimiter +  'Content-Type: application/json\r\n\r\n' +
    JSON.stringify(metadata) +
    delimiter + 'Content-Type: application/json\r\n\r\n' +
    text +
    close_delim;

  gapi.client.request
    ( { 
     'path': '/upload/drive/v3/files/'+id,
     'method': 'PATCH',
     'params': {'fileId': id, 'uploadType': 'multipart'},
     'headers': { 'Content-Type': 'multipart/form-data; boundary="' + boundary + '"', 'Authorization': 'Bearer ' + auth_token, },
     'body': multipartRequestBody 
     }).execute(function(file) { console.log("Wrote to file " + file.name + " id: " + file.id); }); 
} 
```

但我想现在[https://developers.google.com/drive/v3/reference/files/update](https://developers.google.com/drive/v3/reference/files/update)上的整个文档对我来说开始有意义了:-)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-15T18:28:00.803

[Google Drive API](http://developers.google.com/drive)团队于2015 年底[发布了 v3](http://developers.google.com/drive/v3)，并在该版本中`insert()`更改了名称`create()`以更好地反映文件操作。文档也得到了改进：现在有一个[专门用于上传](http://developers.google.com/drive/v3/web/manage-uploads)（简单、多部分和可恢复）的特殊指南，附带 Java、Python、PHP、C#/.NET、Ruby、JavaScript/Node.js 和 iOS 中的示例代码/Obj-C 用于上传常规文件，另一个用于将 CSV 文件作为 Google 表格导入。

只是为了直截了当地显示，下面是另*一种*Python 解决方案（针对文档中的示例），用于不需要`apiclient.http.MediaFileUpload`该类的短文件（“简单上传”）。此代码段假定您的身份验证代码适用于您的服务端点所在`DRIVE`的最小身份验证范围为`https://www.googleapis.com/auth/drive.file`.

```
# filenames & MIMEtypes
DST_FILENAME = 'inventory'
SRC_FILENAME = DST_FILENAME + '.csv'
SHT_MIMETYPE = 'application/vnd.google-apps.spreadsheet'
CSV_MIMETYPE = 'text/csv'

# Import CSV file to Google Drive as a Google Sheets file
METADATA = {'name': DST_FILENAME, 'mimeType': SHT_MIMETYPE}
rsp = DRIVE.files().create(body=METADATA, media_body=SRC_FILENAME).execute()
if rsp:
    print('Imported %r to %r (as %s)' % (SRC_FILENAME, DST_FILENAME, rsp['mimeType'])) 
```

请注意，如果您正在编写 Android 应用程序，则有一个单独的[适用于 Android 的 Google Drive API](http://developers.google.com/drive/android)及其自己的一组文档。最后，如果您在 Google Apps Script 上使用 JavaScript，[Drive Service 原生对象](http://developers.google.com/apps-script/reference/drive)和[Drive Advanced Service](http://developers.google.com/apps-script/advanced/drive)仍在使用 API v2。

# jenkins - 詹金斯构建错误

> ID：10317641
> 
> 赞同：0
> 
> 时间：2012-04-25T14:19:23.503
> 
> 标签：jenkins

我有一个问题，我真的不知道如何解决它。我正在尝试使用 Jenkins 构建一个项目。我们构建机器上安装的 IDE 是 Embarcedero C++ Builder XE。这是在构建状态下配置的项目。\

MSBuildVersion：MSBuild 2.0 MSBuild 构建文件：testProject\Platforms\Common\AuthoringTool\FrontEnd\testProject.cbproj 命令行参数：/t:Clean;Make /p:Config=Release

更新：部分问题出在帐户上。我们将 Jenkins 更改为作为服务运行，但它的路径错误。这已得到修复，但现在我遇到了 postbuildevent 错误。

```
 Target PostBuildEvent:
cd c:\jenkins\workspace\testProject\testProject\Platforms\Common\AuthoringTool\Image\
implib testProject.lib vat.exe
'implib' is not recognized as an internal or external command,
operable program or batch file.
C:\Program Files\Embarcadero\RAD Studio\8.0\bin\CodeGear.Common.Targets(194,5): error MSB3073: The command "cd c:\jenkins\workspace\testProject\testProject\Platforms\Common\AuthoringTool\Image\
C:\Program Files\Embarcadero\RAD Studio\8.0\bin\CodeGear.Common.Targets(194,5): error MSB3073: implib testProject.lib testProject.exe" exited with code 9009\. 
```

在项目“testProject.cbproj”中完成构建目标“PostBuildEvent”——失败。

完成构建项目“testProject.cbproj”——失败。

当我尝试手动构建项目时，项目成功编译。我还检查了 Jenkins 工作区，所有文件都位于正确的位置。任何有关如何解决此问题的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T13:10:00.233

验证“imlib”是否在您的系统路径上。

这可以通过在 PostBuildEvent 中回显 %PATH% 来完成。如果它不在路径上，您可以将其添加到环境中，或使用 Jenkins 自动引用该位置。

另一种选择是显式执行命令，而不是假设它会在路径上......

即，将您的 PostBuildEvent 更新为...

```
cd c:\jenkins\workspace\testProject\testProject\Platforms\Common\AuthoringTool\Image\
C:\<path_to_implib_command>\implib testProject.lib vat.exe 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:22:10.657

我能够通过使用“将环境变量注入构建过程”以及 implib 的路径来解决它。我不知道为什么彼得解决方案不起作用。似乎应该有。

# javascript - 两个 jQuery DataTables - 尝试重新加载、显示/隐藏列等 - 其中一个 DataTables 失败，但另一个失败

> ID：10317643
> 
> 赞同：1
> 
> 时间：2012-04-25T14:19:36.613
> 
> 标签：javascript, jquery, ajax, datatables

我在一个页面上有两个[DataTables](http://datatables.net/)对象，我们称它们为 searchResultsTable 和 currentPortfolioTable。当我单击按钮时，我正在使用[fnReloadAjax插件按需重新加载 DataTables。](http://datatables.net/plug-ins/api#fnReloadAjax)但是，只有一个表加载了新数据 (currentPortfolioTable)，searchResultsTable 确实执行了对数据的 ajax 请求，但无法将新的（有效的）数据加载到表中。

我尝试破坏 DataTable 并创建一个新的，甚至重写 fnReloadAjax 插件的部分内容，看看是否可以产生不同的结果。

即使只为 currentPortfolioTable 调用 fnReloadAjax，它也拒绝显示加载的新数据。

使用 DataTable 的 aoColumns 属性的 bVisible 状态显示/隐藏列时，也会出现 searchResultsTable 无法加载新数据的问题。

示例代码：

```
var dataTableObjects = dataTableObjects || {
    "searchResultsTable": {},
    "currentPortfolioTable": {}
};

var _rankingsRootUrl = window.ROOT + 'rankings/';

var _defaultDataTableSettings = {
    "aoColumns": [
        {   "bSortable": false,
            "sTitle": "Add to Portfolio",
            "bVisible": true
        },
        {
            "bSortable": true,
            "sTitle": "Name of Investment",
            "bVisible": true
        },
        {   "bSortable": true,
            "sTitle": "Chart",
            "bVisible": true
        },
        {   "bSortable": true,
            "sTitle": "Rating",
            "bVisible": true
        },
        {   "bSortable": true,
            "sTitle": "Minimum",
            "bVisible": true
        },
        {   "bSortable": true,
            "sTitle": "ROR",
            "bVisible": false
        },
        {   "bSortable": true,
            "sTitle": "Max DD",
            "bVisible": false
        },
        {   "bSortable": true,
            "sTitle": "Sharpe",
            "bVisible": false
        },
        {   "bSortable": true,
            "sTitle": "Sterling",
            "bVisible": false
        }
    ],
    "aaSorting": [
    ],
    "sAjaxSource": _rankingsRootUrl + 'search_results/',
    "bServerSide": true,
    "bProcessing": true,
    "bPaginate": false,
    "bLengthChange": false,
    "sScrollY": 200,
    "sScrollX": "100%",
    "sScrollXInner": "100%",
    "bScrollCollapse": true,
    "fnServerData": function ( sSource, aoData, fnCallback ) {
        $.ajax( {
            "dataType": 'json',
            "type": "POST",
            "url": sSource,
            "data": aoData,
            "success": fnCallback
        } );
    },
    "fnServerParams": function ( aoData ) {
        aoData.push(
            {"name": "program_type", "value": $(':input#RankingProgramType').val()},
            {"name": "program_name", "value": $(':input#RankingProgramName').val()},
            {"name": "min_investment", "value": $(':input#RankingMinimumInvestment').val()},
            {"name": "rate_of_return", "value": $(':input#RankingRateOfReturn').val()},
            {"name": "max_dd", "value": $(':input#RankingMaxDd').val()},
            {"name": "time_span", "value": $(':input#RankingTimeSpan').val()},
            {"name": "flags", "value": $(':input#RankingFlags').val()},
            {"name": "strategies", "value": $(':input#RankingStrategies').val()},
            {"name": "recommended", "value": $(':input#RankingRecommended').val()},
            {"name": "portfolio_id", "value": (window.PORTFOLIO && window.PORTFOLIO.id) || ""}
        );
    }
};

var _defaultCurrentPortfolioTableSettings = {
    "aoColumns": [
        {
            "bSortable": true,
            "sTitle": "Name of Investment",
            "bVisible": true
        },
        {   "bSortable": true,
            "sTitle": "Chart",
            "bVisible": true
        },
        {   "bSortable": true,
            "sTitle": "Rating",
            "bVisible": true
        },
        {   "bSortable": true,
            "sTitle": "Minimum",
            "bVisible": true
        },
        {   "bSortable": true,
            "sTitle": "ROR",
            "bVisible": false
        },
        {   "bSortable": true,
            "sTitle": "Max DD",
            "bVisible": false
        },
        {   "bSortable": true,
            "sTitle": "Sharpe",
            "bVisible": false
        },
        {   "bSortable": true,
            "sTitle": "Sterling",
            "bVisible": false
        }
    ],
    "aaSorting": [
    ],
    "sAjaxSource": _rankingsRootUrl + 'current_portfolio/',
    "bServerSide": true,
    "bProcessing": true,
    "bPaginate": false,
    "bLengthChange": false,
    "sScrollY": 200,
    "sScrollX": "100%",
    "sScrollXInner": "100%",
    "bScrollCollapse": true,
    "fnServerData": function ( sSource, aoData, fnCallback ) {
        $.ajax( {
            "dataType": 'json',
            "type": "POST",
            "url": sSource,
            "data": aoData,
            "success": fnCallback
        } );
    },
    "fnServerParams": function ( aoData ) {
        aoData.push(
            {"name": "portfolio_id", "value": (window.PORTFOLIO && window.PORTFOLIO.id) || ""}
        );
    }
};

dataTableObjects.searchResultsTable = $('#search-results table').dataTable(_defaultDataTableSettings);
dataTableObjects.currentPortfolioTable = $('#currently-in-portfolio table').dataTable(_defaultCurrentPortfolioTableSettings);

$("#rankings").on("click", "a.add", function (e){
   dataTableObjects.searchResultsTable.fnReloadAjax('/datable1-url');
   dataTableObjects.currentPortfolioTable.fnReloadAjax('/datable2-url');
   e.preventDefault();
}); 
```

尝试修复：

*   使用 fnReloadAjax 的回调方法来触发 dataTable2 的数据重新加载
*   验证每个表的 id 是否唯一
*   验证 dataTableJSObjects 是页面的正确且唯一的表
*   控制台没有记录错误或问题
*   JShinted js 确保没有js错误或错误
*   关闭 fnReloadAjax dataTableObjects.searchResultsTable 和 dataTableObjects.currentPortfolioTable 仍然无法正确重新加载
*   使用 fnReloadAjax 替换为 fnDraw

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T16:59:34.743

感谢您发布额外的源代码详细信息。我想我可能已经找到了问题...

在`fnReloadAjax`插件的描述中，[Allan Jardine](http://www.sprymedia.co.uk/)添加了以下注释：

> 注意：要在使用服务器端处理时重新加载数据，只需使用内置 API 函数[fnDraw](http://datatables.net/api#fnDraw)而不是此插件。

现在，虽然我意识到您已经确认所请求的数据是正确的，并且第一个数据表在使用时甚至可以正确重新`/datable1-url`加载；但是，根据艾伦的说明，并且由于问题的神秘性质而缺乏更好的答案，我想说，您当前实施的问题很可能确实是由于不是适合该方式的解决方案你有你的表配置。`/datable2-url``fnReloadAjax``fnReloadAjax`

不过，我也意识到，`fnReloadAjax`由于现在已设置表格，因此仅更改为 fnDraw 并不能解决您的问题……是时候变得棘手了……

这是我的解决方案：

首先将这两行添加到脚本的顶部：

```
var isInitialLoadTable1 = true;
var isInitialLoadTable2 = true; 
```

接下来，在每个 dataTable 设置变量中，在回调之后添加以下附加`fnServerParams`回调：

```
"fnInitComplete": function( oSettings, json ) {
    isInitialLoadTable1 = false;
} 
```

确保在第二个表中更改`isInitialLoadTable1`为`initialLoadTable2`[并且不要忘记结束大括号后的逗号`fnServerParams`:-)]

现在对于技巧......在`fnServerData`回调中更改调用的`url`设置，`$.ajax`如下所示：

```
"url": (isInitialLoadTable1 ? sSource : '/datable1-url'), 
```

同样，请确保在此语句中为第二个 dataTable将*两个1 更改为 2*

最后，将您的点击事件更改为以下内容：

```
$("#rankings").on("click", "a.add", function (e) {
    dataTableObjects.searchResultsTable.fnDraw();
    dataTableObjects.currentPortfolioTable.fnDraw();
    e.preventDefault();
}); 
```

现在，我还没有对此进行测试，但真正的测试在于您的代码和数据。

希望这可以解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T20:06:17.613

一种想法是，在两个不同的表上连续调用 fnReloadAjax 可能会导致 dataTable2 发生冲突，如果它等待 dataTable 1 完成加载，则不会遇到这种冲突。

fnReloadAjax 函数接受一个可能有帮助的回调参数...

例如：

```
dataTableObjects.dataTable1 = $('#search-results table').dataTable();
dataTableObjects.dataTable2 = $('#currently-in-portfolio table').dataTable();

$("#rankings").on("click", "a.add", function (e){
    dataTableObjects.dataTable1.fnReloadAjax('/datable1-url', null, reloadDataTable2, false);
    e.preventDefault();
});

// outside of the "ready" block
var reloadDataTable2 = function () {
    dataTableObjects.dataTable2.fnReloadAjax('/datable2-url');
}; 
```

我还没有测试过这个，所以我不确定它是否会起作用。

但是，我在寻找自己的问题的解决方案时看到了这个问题，我想我会提出这个想法。希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T20:59:30.667

针对这个特定问题的解决方案是，为 dataTableObjects.currentPortfolioTable 返回的数据包含 DataTable 用于数据分页的值 sEcho，即这是哪一页数据。可以在[DataTables with Server Side Data 的示例用法中](http://www.datatables.net/release-datatables/examples/data_sources/server_side.html)看到 sEcho 。

dataTableObjects.currentPortfolioTable 的 sEcho 值始终设置为`1`，这显然导致 DataTables 始终认为数据仍然是原始数据集而不是新数据。将 sEcho 递增到在 AJAX 请求中传回的新数据的值修复了该问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T07:44:14.827

我刚刚将一个示例放在一起，表明它应该可以正常工作：http: [//live.datatables.net/aqazek/edit#javascript,html](http://live.datatables.net/aqazek/edit#javascript,html)。我对 fnReloadAjax 进行了微小的调整，因此您可以看到重新加载对我的静态数据源的影响（只需用计数器重写其中一个单元格），但除此之外 - DataTables 站点没有任何更改。

因此，我认为要提供任何进一步的帮助，我们需要看到它不起作用的示例。

# gwt - 如何让 gwt 的 RichTextArea 检测到内容粘贴和剪切事件？

> ID：10317644
> 
> 赞同：0
> 
> 时间：2012-04-25T14:19:37.657
> 
> 标签：gwt, copy-paste, cut, rich-text-editor, autogrow

以下代码可以根据 KeyUp 事件使 RichTextArea 垂直自动增长或收缩，问题是当用户粘贴或剪切内容时如何做同样的事情（Google plus 已经实现了这一点）。MouseUp 和 CONTEXTMENU 事件已经试过了，没有运气。有人可以给出解决方案吗？谢谢。

```
public AutoResizeTextArea()
{
    new Timer()
    {
        @Override
        public void run()
        {
            (doc = ((FrameElement) getElement().cast()).getContentDocument()).getBody()
                    .setAttribute("style", "word-wrap:break-word;overflow:hidden;");
        }
    }.schedule(100);
}

@Override
public void onBrowserEvent(Event event)
{
    switch (DOM.eventGetType(event))
    {
        case Event.ONKEYUP:
            adjustHeight();
            break;
    }
}

private void adjustHeight()
{
    if (doc.getDocumentElement()
            .getOffsetHeight() != doc.getClientHeight())
    {
        setHeight((doc.getDocumentElement()
                .getOffsetHeight() + 19) + "px");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T03:47:36.793

这对我有用。我假设您的 RichTextArea 小部件 = richTextArea 变量。

```
IFrameElement iFrame = IFrameElement.as(richTextArea.getElement());

//listen for paste event
addTextPasteHandler(iFrame);

/**
 * Add a listener for the paste event
 * @param iframe
 */
private native void addTextPasteHandler(IFrameElement iframe)
/*-{
    if(iframe == null)
        return;

    var _this = this;

    var pasteFunction = function(e)
    {
        _this.@com.yourpackagepath.YourClass::handlePaste()();
    }

    iframe.contentWindow.addEventListener('paste', pasteFunction, true);

}-*/;

public void handlePaste() {
    Window.alert("Paste!");
} 
```

# android - android.view.ViewConfiguration 处的 Android NullPointerException

> ID：10317648
> 
> 赞同：1
> 
> 时间：2012-04-25T14:20:02.977
> 
> 标签：android, sqlite, android-layout, android-imageview

我收到 NullPointerException：

```
public void llenardatos(SQLiteDatabase db, int pos) {

    ImgVector = new ImageView[50];
    String[] id = new String[] { String.valueOf(pos + 1) }; 

    EditText txttipo = (EditText) mContentView.findViewById(R.id.Txttipo);
    EditText spalto = (EditText) mContentView.findViewById(R.id.Txtalto);
    EditText splargo = (EditText) mContentView.findViewById(R.id.TxtLargo);
    EditText spancho = (EditText) mContentView.findViewById(R.id.Txtancho);
    EditText sobser = (EditText) mContentView
            .findViewById(R.id.txtobservaciones);
    EditText sphora = (EditText) mContentView.findViewById(R.id.Txthora);
    EditText txtfecha = (EditText) mContentView.findViewById(R.id.txtfecha);
    TextView txtlati = (TextView) mContentView
            .findViewById(R.id.txtlatitud);
    TextView txtlongi = (TextView) mContentView
            .findViewById(R.id.txtlongitud);

    Critico cr = new Critico();
    cr.seleccionar(db, id);
    txttipo.setText("" + cr.getTipo());
    spalto.setText("" + cr.getAlto());
    splargo.setText("" + cr.getLargo());
    spancho.setText("" + cr.getAncho());
    sobser.setText("" + cr.getObservaciones());
    sphora.setText(cr.getHora());
    txtfecha.setText("" + cr.getFecha());
    txtlati.setText("" + cr.getLatitud());
    txtlongi.setText("" + cr.getLongitud());

    FotoCritico fc = new FotoCritico();
    ArrayList<String> datos = fc.seleccionartodos(db, id);
    int i = datos.size();
    for (int contador = 0; contador < i; contador++) {
        String dato = datos.get(contador);
        Uri imgUri = Uri.parse(dato);

        LinearLayout.LayoutParams lparams4 = new LinearLayout.LayoutParams(
                500, 250, 1f);
        ImgVector[contador] = new ImageView(getActivity());
        ImgVector[contador].setLayoutParams(lparams4);
        ImgVector[contador].setImageResource(R.drawable.fotoandroid);
        ImgVector[contador].setId(contador);
        ImgVector[contador].setPadding(0, 10, 0, 10);
        lyn.addView(ImgVector[contador]);
        // personas++;
        ImgVector[contador].setImageURI(imgUri);
    }
} 
```

我收到 NullPointerException：

```
04-25 08:39:57.630: E/AndroidRuntime(3358): FATAL EXCEPTION: main
04-25 08:39:57.630: E/AndroidRuntime(3358): java.lang.NullPointerException
04-25 08:39:57.630: E/AndroidRuntime(3358):     at android.view.ViewConfiguration.get(ViewConfiguration.java:276) 
```

Eclipse 没有报告语法错误。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:38:08.193

当您尝试访问值为 null 的对象时，会发生 java.lang.NullPointerException。当您尝试使用变量“lyn”或“ImgVector[contador]”时，它的值为 null。

要找出哪个变量的值为 null，请在其中放入一些 if 语句：

```
if (lyn == null)
  Log.d("error", "lyn has null");

if (ImgVector[contador] == null)
  Log.d("error", "ImgVector[contador] has null"); 
```

将这些行放在整个代码中，if 语句的计算结果应该为 true，这将是您需要确保变量被实例化的地方。

# android - Android 从虚拟号码拨打电话

> ID：10317650
> 
> 赞同：5
> 
> 时间：2012-04-25T14:20:12.210
> 
> 标签：android, phone-call

是否可以通过 Android 的 SDK 隐藏您拨打的号码？考虑一下：您想拨打私人电话，但由于很多人屏蔽私人号码，您不想使用`*67`. 这是医生经常做的事情——他们用手机打电话，但不希望病人有他们的私人手机号码。

所以想象一下我们正在为医生构建一个应用程序。该应用程序提供了一个联系人列表，单击一个联系人并进行呼叫，但是以隐藏此电话的呼叫者ID的方式。例如，我有一个与我的真实手机号码不同的 Google Voice 号码，我可以通过这个号码接听电话。有没有办法通过 Google Voice 以编程方式拨打电话？

我还可以在通话中注册一些事件侦听器，以便在通话结束时应用程序知道它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:44:27.033

你可以检查[这个链接](http://androidapps.org.ua/i_sect18_d1e18123.html)，它使用`telephony api`这个。请查看第 15.1.3 节`Example: Determining the State of a Call`。

我也在此处粘贴示例代码：

```
private class ListenToPhoneState extends PhoneStateListener {

public void onCallStateChanged(int state, String incomingNumber) {
    Log.i("telephony-example", "State changed: " + stateName(state));
}

String stateName(int state) {
    switch (state) {
        case TelephonyManager.CALL_STATE_IDLE: return "Idle";
        case TelephonyManager.CALL_STATE_OFFHOOK: return "Off hook";
        case TelephonyManager.CALL_STATE_RINGING: return "Ringing";
    }
    return Integer.toString(state);
    }
} 
```

# asp.net - ASP.NET System.Data.EntityClient 连接字符串帮助（实体）

> ID：10317651
> 
> 赞同：0
> 
> 时间：2012-04-25T14:20:23.157
> 
> 标签：asp.net, vb.net, database-connection

我从另一个使用 entityClient 作为连接字符串的开发人员那里继承了一些代码。Web 配置条目如下所示：

```
<add name="my_TESTEntities" connectionString="metadata=res://*/TEST.csdl|res://*/TEST.ssdl|res://*/TEST.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=myServer;Initial Catalog=TEST2;User ID=user_gg;Password=Aasdfasfasf;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient"/> 
```

元数据文件是什么？我在给定代码的调试文件夹中找到了它们，我需要指向它们吗？我需要把它们搬到别的地方吗？请帮忙！

我得到的错误是：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Data.SqlClient.SqlException：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:23:22.417

元数据文件包含[Entity Framework](http://msdn.microsoft.com/en-us/data/aa937723)的表到对象映射配置。无需移动它们。该应用程序使用实体框架作为 ORM。您可能想检查链接并了解它是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:23:25.067

您的元数据文件是：TEST.csdl、TEST.ssdl 和 TEST.msl。

它们由实体框架 EDMX 填充。您可以通过将属性“Metadata Artificat Processing”的值从 Embed in Output Assembly 更改为 Copy to Output Directory 来查看这些文件。

正如我在您的 Web.Config 中看到的那样，所有内容都已正确设置，因此无需移动任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T15:52:42.613

在 Sql Server 配置管理器（开始 -> Sql Server -> 配置工具）中，您能否检查“TCP/IP”和“命名管道”是否已启用（在 Sql Server 网络配置中）。有时它也与此有关。

# java - mongodb使用java驱动比较两个不同的字段

> ID：10317653
> 
> 赞同：1
> 
> 时间：2012-04-25T14:20:26.247
> 
> 标签：java, mongodb, mapreduce

这是我插入的数据。

```
{"_id" : ObjectId("4f97ebb5429c822f0506d9d8"), "direction" : "out", "status" : "complete",  "inputfile" : "data",  "messageid" :"mid_1","previousmessageid" : "previd_1"}
{"_id" : ObjectId("4f97ebb5429c822f0506d9d8"), "direction" : "in", "status" : "complete",  "inputfile" : "data1",  "messageid" :"0","previousmessageid" : "mid_1"} 
```

现在我必须查询数据库并在第二条记录中找到与第一个记录中的 messageid 匹配的记录，方向为“in”，previousmessageid 方向为“out”。我有大量数据。请建议我获取记录的最佳方法。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:33:05.740

最简单的方法是进行两个查询：

1.  根据您要查找该记录的任何条件查询“第一条记录”。
2.  一旦你有了“第一条记录”，你就可以使用它`messageid`和`direction`“out”来查找第二组记录。

这是一个使用 MongoDB shell 的示例，尽管您可以将它相当简单地转换为任何语言：

```
> var firstRecord = db.collection.findOne({direction: "in", /* other criteria */})
> var cursor = db.collection.find({previousmessageid: firstRecord["messageid"], direction: "out"}) 
```

假设您有一个索引来服务第一个查询，并且在`{previousmessageid: 1, direction: 1}`.

**编辑：**由于您正在处理方向为“in”的多条记录，您可以稍微调整此技术以使其工作：

```
> var inRecords = db.collection.find({direction: "in", /* other critiera */})
> var messageIds = []
> inRecords.forEach(function (record) { messageIds[messageIds.length] = record.messageid })
> var cursor = db.collection.find({direction: "out", previousmessageid: {$in: messageIds}})
> cursor.sort({previousmessageid: 1})
> /* do something with cursor */ 
```

然后，您可以处理对应用程序中所有消息的完整回复。

# sql - SQL 从两个表中选择和计数

> ID：10317655
> 
> 赞同：0
> 
> 时间：2012-04-25T14:20:35.330
> 
> 标签：sql, sqlite

我有两个表，“用户”和“项目”

用户表：

id 用户名

* * *

1山姆

2 彼得

3 安迪

项目表：

id 标题 uid

* * *

1个pr1 0

2 公关 1

3 公关 3 2

4 公关 4 1

projects.uid 表示将执行该工作的用户 ID，0 表示该项目尚未分配给任何用户。

我想要一个查询来根据用户对项目进行计数和分组并返回如下内容：

uid 项目计数

* * *

0 1

1 2

2 1

3 0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:23:58.233

由于您没有返回`username`，因此您只需要该`projects`表：

```
select u.id, count(*) as project_count
from users u
left outer join projects p on u.id = p.uid 
group by u.id
order by u.id 
```

如果你也想要用户名，你可以这样做：

```
select u.id, u.username, count(*) as project_count
from users u
left outer join projects p on u.id = p.uid
group by u.id, u.username
order by u.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T09:35:33.970

非常感谢您的回答，但他们似乎都没有返回正确的行，

这是我新找到的答案：

```
SELECT users.id,(SELECT COUNT(1) FROM projects WHERE projects.user_id = users.id) as 'count' FROM users ORDER BY id 
```

我不太确定它的性能，但目前它可以工作......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T14:24:18.153

```
select u.id, count(p.uid)
from users u
inner join project p 
on u.id = p.uid
group by p.uid 
```

# java - 通过正则表达式找到没有外部`{}`的`{}`部分

> ID：10317660
> 
> 赞同：2
> 
> 时间：2012-04-25T14:21:01.357
> 
> 标签：java, regex

标题不清楚，所以我写了一些示例来解释。

有一个字符串，其中包含许多嵌套`{}`的s：

```
 /users/{<\w{2,4}\d{3}>id} 
```

你可以看到我`{}`用作路径变量的占位符，它里面可以有正则表达式，也可以有`{}`.

如何使用 java 编写正则表达式来解析路径模式，找到`{}`没有 outer 的部分`{}`。对于这个例子，它应该是`{<\w{2,4}\d{3}>id}`.

谢谢~

**更新**

给定的例子太简单了，可以是：

```
/users/{<\w{2,4}\d{3}>id}/{action}/{<\w{2,4}\d{3}>targetId} 
```

结果应该是：

```
{<\w{2,4}\d{3}>id}
{action}
{<\w{2,4}\d{3}>targetId} 
```

所以`\\{.*\\}`行不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:26:26.790

你会有这样的情况`/users/{regex1}/{regex2}`吗？

如果是，在这种情况下`"\\{.*\\}"`将返回`"{regex1}/{regex2}"`. :(

如果不够`"\\{(.*)\\}"`好，那么贪婪你会追求你所要求的整个表达方式。;)

编辑：

使用您编辑的问题，上面@aix 的评论是正确答案： [通过正则表达式查找没有外部“{}”的“{}”部分](https://stackoverflow.com/questions/10317660/find-the-part-which-doesnt-have-outer-by-regex/10317768#comment13281949_10317660)

他指出您的问题与那里解决的问题相似：[Regular Expression to match outer brackets](https://stackoverflow.com/questions/546433/regular-expression-to-match-outer-brackets)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T16:09:17.593

也许我误解了你的例子。但是，您的第二个示例是：

```
/users/{<\w{2,4}\d{3}>id}/{action}/{<\w{2,4}\d{3}>targetId} 
```

结果应该是：

```
{<\w{2,4}\d{3}>id}
{action}
{<\w{2,4}\d{3}>targetId} 
```

你`{}`想要的总是在一个分隔符里面`/`吗？`/`如果是这样，那么您可以通过拆分然后检查每个结果来轻松做到这一点：

```
String test = "/users/{<\\w{2,4}\\d{3}>id}/{action}/{<\\w{2,4}\\d{3}>targetId}";
String[] pieces = test.split("(?<!\\\\)/");
for (String piece : pieces) {
    if (piece.matches("^\\{.*")) {
        /* do whatever */
    }
} 
```

假设转义`/`符不是定界符，我在其中进行了复杂的拆分。

这是你要找的东西吗？

# java - 如果程序中断，如何保护程序不丢失数据？

> ID：10317662
> 
> 赞同：1
> 
> 时间：2012-04-25T14:21:06.800
> 
> 标签：java, multithreading, scheduling

> 块引用

我有一个需要定期运行的 Java 程序。但是，我希望能够关闭包装程序（如果您是 UNIX 人员，请在终端窗口或 SIGTERM 中使用 Ctrl+C），而不会中断包装程序将启动的主程序进程或线程。

起初我在想我应该让我的主程序在每轮处理后休眠一段时间。然后我想如果程序需要关闭并且被用户手动中断，它可能在处理数据时被中断，并且输出文件会被切断或损坏。

我认为最好的方法是编写一个调用主程序的包装程序（可能也在Java中）。如果某些东西关闭了包装器，我希望我的主程序的衍生线程或程序实例保持打开状态，直到它们准备好正确关闭。此外，任何时候最多只能运行一个主程序实例。

这是我希望我的包装器执行的操作（在伪代码中）：

每 n 分钟：如果主程序的实例正在运行，则不执行任何其他操作来生成主程序的实例。

On Close：如果主程序正在运行，则让主程序运行完成

我应该使用 Java Runtime 对象/库来运行我的主程序（有效地从命令行）还是应该更改我的主程序以实现 Runnable 并让包装程序产生运行我的主程序的线程？

编辑（可能的解决方案？）：

目前我正在考虑使用 Java Runtime 对象使用 exec 函数调用主程序（参见[http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html)和[http: //docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html)）。要确定主程序是否已经在运行，我可以使用 Process.exitValue() 函数。如果它抛出 IllegalThreadStateException 则主程序仍在运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:36:02.393

当您的应用程序获得 SIGINT (Control-C) 时，您可以使用关闭挂钩执行有序关闭：请参阅[`Runtime.addShutdownHook(...)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29).

然而，这并不涉及 SIGKILL、JVM 崩溃、操作系统崩溃和硬电源故障。实际上，在这种情况下，应用程序不可能完全关闭。为此，您需要设计您的应用程序以使用强大的持久性机制定期保持其状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:34:30.057

创建一个以静态方式设置某些标志的新线程。该线程将在主应用程序启动时运行，可以从中运行/加载。在程序的关闭操作上创建一个 java 事件侦听器，并在其中注册您的新线程。每当您的程序关闭时，这个新线程将启动其他线程来激活并最终节省资源以执行上述条件之一。您的新进程现在将一个接一个地杀死这些线程（只要每个都完成了工作），直到满足上述所有条件（标志）。当没有其他线程剩下时，这个新线程会杀死自己，程序结束。

# c# - c# 可能导致我的 SQL 查询停止工作的文本框字符

> ID：10317665
> 
> 赞同：0
> 
> 时间：2012-04-25T14:21:10.417
> 
> 标签：c#, sql, winforms

我的 WinForm 中有一个文本框。

用户键入文本（他们的键盘允许的任何内容）。当他们点击保存时，有时会出现一条错误消息

> 查询表达式中的语法错误（缺少运算符）

我知道像 ' 这样的某些字符正在破坏我的 SQL 查询

我有几个问题

1.  我有什么办法可以让我的查询不会中断并允许用户输入他们想要的任何内容？
2.  如果没有办法做#1，我如何扫描文本并删除所有会破坏我的查询的字符？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T14:25:59.607

尝试使用参数将文本框值传递给查询。这也将防止 SQL 注入攻击。

应该是这样的：

```
SqlCommand cmd = new SqlCommand();
cmd.Connection = conn;
cmd.CommandText = "SELECT * from TableName WHERE FieldA = @FieldValue";
cmd.CommandType = CommandType.Text;

//Define SqlParameter object and assign value to the parameter
cmd.Parameters.Add("@FieldValue", SqlDbType.VarChar, 50);
cmd.Parameters["@FieldValue"].Value = TextBox.Value; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T14:25:53.683

> 我知道像 ' 这样的某些字符正在破坏我的 SQL 查询

如果是这种情况，听起来您使用字符串连接来添加参数。

请改用 SQL 参数，这应该可以解决您的问题。

另外值得注意的是，使用字符串连接构建 SQL 查询很容易发生[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T14:29:16.100

1.  更好的方法是使用参数化查询。请参阅[向命令添加参数](http://www.csharp-station.com/Tutorial/AdoDotNet/lesson06)。这不仅可以解决您的不良性格问题，还可以消除[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)（维基百科）的危险。

2.  如果您仍然喜欢使用字符串连接，那么用两个单引号替换单引号应该足够安全。

```
string sql = "SELECT * FROM tbl WHERE Name = '" + name.Replace("'","''") + "'"; 
```

# c# - 在C#中计算两个日期之间的假期数？

> ID：10317668
> 
> 赞同：-5
> 
> 时间：2012-04-25T14:21:17.003
> 
> 标签：c#

我正在寻找一个优化的函数，它将返回 C# 中两个给定日期之间的公共假期和周末的数量

* * *

实际上需求是结合假期和周末为用户制定一个好的假期计划。我不需要担心国家和宗教，因为我有网络服务来照顾特定国家和宗教的假期

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T14:27:51.333

您的问题可以分为两个问题：

1.  如何计算假期？
2.  如何计算两个给定范围之间的假期数？

第一个问题有很多答案。你可以将它们输入数据库，从网站下载，寻找一个 C# 类来计算*你的文化/环境*的假期（有很多！）

然后，您必须遍历从开始日期到结束日期的日子。这可以很容易地完成：

```
DateTime startTime = new DateTime(2011, 4, 1);
DateTime endTime = new DateTime(2012, 4, 1);
int numberOfHolidays;

for (DateTime currentDate = startTime; currentDate <= endTime currentDate = currentDate.AddDays(1)) {
    if (isHoliday(currentDate) || isWeekendDay(currentDate))
      numberOfHolidays++;
} 
```

您必须自己实现这些方法`isHoliday`，`isWeekendDay`请参阅第一个问题部分的答案。

# c# - 将表达式树作为参数传递给 EntityDataModel 中的另一个表达式树

> ID：10317669
> 
> 赞同：0
> 
> 时间：2012-04-25T14:21:18.847
> 
> 标签：c#, linq, lambda

我有两个这样定义的表达式树：

```
Expression<Func<string, bool>> BoolExpression { get; } 
```

和

```
Expression<Func<Customer, string>> PropertyExpression { get; } 
```

我需要创建一个新的表达式树，结果相当于：

```
Customer c = null;
var expression = e1(e2(c)); 
```

我可以用 Compile()、Invoke() 来做到这一点：

```
Customers c = null;
var e3 = e1.Compile().Invoke(e2.Compile().Invoke(c)); 
```

但我不能使用 Compile 或 Invoke 方法，因为我使用的是 EntityDataModel。当我将“表达式”传递给 Where 方法时，它会转换为 SQL 查询并传递给数据库。

PS：我想使用 EntityDataModel 做某种查询生成器。有 n 个域和 m 个条件。我想为字段定义 n 表达式，为条件定义 m 表达式，然后将它们组合起来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T23:52:22.517

**选项1**

首先尝试一下 - 我刚刚使用 LINQ-to-SQL 进行了尝试，它可以工作，所以它应该可以在 EF 中工作。这不是你所拥有的一百万英里，只是说调用 e1 与调用 e2 的结果：

```
var e3 = Expression.Lambda<Func<Customer, bool>>(Expression.Invoke(e1, Expression.Invoke(e2, e2.Parameters)), e2.Parameters); 
```

**选项 2**

我原以为您需要遍历表达式树并替换 BoolExpression func 中 String 参数的用法，如下所示：

```
// replace parameter use anywhere in e1.Body with e2.Body
var remover = new ParameterReplaceVisitor(e2.Body);
var bb = remover.Visit(e1.Body);

// create a new lambda with our amended body but still with e2 parameters i.e. the Customer
var e3 = Expression.Lambda<Func<Customer, bool>>(bb, e2.Parameters);

public class ParameterReplaceVisitor : ExpressionVisitor
{
    Expression _replace;

    public ParameterReplaceVisitor(Expression replace)
    {
        _replace = replace;
    }

    protected override Expression VisitParameter(ParameterExpression node)
    {
        // when we encounter a parameter replace it
        return _replace;
    }
} 
```

显然，如果您在表达式中引入多个参数，事情会变得更加复杂。

# xml - Internet Explorer 以随机顺序显示 XML 属性

> ID：10317671
> 
> 赞同：7
> 
> 时间：2012-04-25T14:21:22.240
> 
> 标签：xml, internet-explorer, internet-explorer-10

我正在`xml`Internet Explorer（9，Windows 7 64 位）中打开一个文件。

Internet Explorer 喜欢以*随机顺序*显示元素属性，例如：

![在此处输入图像描述](../Images/83b9d869d33e9b5dc48f1f167eadeb08.png)

而不是按照声明的顺序：

```
<ApplicationVersion major="2" minor="2" release="12" build="687">2.2.12.687</ApplicationVersion> 
```

例如：

![在此处输入图像描述](../Images/a814ece9cd368a319efae941bba32b4f.png)

或者

![在此处输入图像描述](../Images/23c3929e17ba83286b8bdda6243ace32.png)

而不是：

![在此处输入图像描述](../Images/d9b88471a3d7d593e712b98cc5c020bb.png)

是否有元素、属性、xml-dtd、xml-schema、Internet Explorer 选项、Windows 选项指示 IE 以声明的方式显示 XML，而不是随机顺序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T14:26:35.437

属性按照 xml 标准的定义是无序的。

从标准：

```
Note that the order of attribute specifications in a start-tag or empty-element tag is not significant. 
```

[http://www.w3.org/TR/REC-xml/#sec-starttags](http://www.w3.org/TR/REC-xml/#sec-starttags)

如果您需要属性顺序，您将不得不更改您的标记。我建议如下：

```
<ApplicationVersion>
  <attribute name="major">2</attribute>
  <attribute name="minor">2</attribute>
  <attribute name="build">687</attribute>
</ApplicationVersion> 
```

链接：
[DOM 处理后的 XML 属性](https://stackoverflow.com/questions/726395/order-of-xml-attributes-after-dom-processing)
[顺序 我可以使用模式强制 XML 属性的顺序吗？](https://stackoverflow.com/questions/1682131/can-i-enforce-the-order-of-xml-attributes-using-a-schema)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-25T09:22:52.767

Internet Explorer 11 也有这种令人失望的 xml 显示失败。

改用 Chrome 来显示 xml，它还具有颜色语法突出显示。

# c# - 从 C# Linq 4.0 锁定一个数据库或一组表？

> ID：10317672
> 
> 赞同：1
> 
> 时间：2012-04-25T14:21:22.663
> 
> 标签：c#, linq

Linq 中是否有任何工具可以显式锁定数据库或一组表？我正在使用几个不同的数据库，我正在寻找一些透明的东西。令我惊讶的是，除了处理 Linq 如何处理并发问题的主题之外，我找不到太多关于该主题的内容，这超出了我的范围。

或者，任何其他锁定数据库的简单方法对我来说都会很有趣（尤其是 MsSql，Sybase）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T14:51:25.933

锁定数据库远远超出了 LINQ 的范围。唯一相关的锁定方面是特定提供者用来提供并发保证的锁定语义。如果您想要显式锁定超出事务处理自动应用的锁定，则需要进入较低级别。

要通过 Entity Framework[执行任意 SQL 命令](http://msdn.microsoft.com/en-us/library/ee358758.aspx)`ExecuteStoreCommand`，您可以在数据库上下文中使用该方法，该方法只需要一个 SQL 字符串即可执行。如果由于某种原因您使用的是较旧的 LINQ2SQL 提供程序，它具有类似的[`ExecuteCommand`](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.executecommand.aspx)方法来实现相同的目标。

确实没有“数据库锁”（至少是数据库术语）这样的东西，因为整个数据库可以快速切换到独占访问模式并退出。对于 Sybase（和 MSSQL），具有适当权限的人可以通过设置“单一用户”选项来完成此操作：

```
sp_dboption mydatabase, "single user", true 
```

这远没有锁定那么“简单”：这意味着一次只允许一个人连接到数据库，因此您需要确保在设置选项时已连接打开，并且没有其他人连接（他们将在没有警告的情况下启动），并且您在完成后将选项设置为***关闭***。

据我所知，在 MySql 中，除了更改每个人对目标数据库的权限之外，没有其他方法可以实现这一点。

锁定单个表要容易一些，因为大多数数据库服务器都有类似 SQL 的语法来执行此操作。在 MySql 中，您使用[`LOCK TABLES`](http://dev.mysql.com/doc/refman/5.0/en/lock-tables.html)带有`READ`or`WRITE`锁定的命令，但我强烈建议您阅读链接页面，因为 MySql 锁定工作（IMO）有点奇怪。Sybase 同样有一个[`LOCK TABLE`](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.commands/html/commands/commands66.htm)命令，在本例中称为`SHARED`and `EXCLUSIVE`。

您应该在[事务](http://msdn.microsoft.com/en-us/library/bb738523.aspx)的上下文中锁定表，因此您可能希望在`TransactionScope`执行任何锁定之前将代码包装在 a 中。

# git - git：更改克隆子模块的来源

> ID：10317676
> 
> 赞同：37
> 
> 时间：2012-04-25T14:21:31.730
> 
> 标签：git, github, git-submodules

我创建了一个项目`submodule`并将其放在 Github 上。

我创建了另一个项目，`supermodule`然后这样做：

```
cd supermodule
git init
mkdir lib
git clone git://github.com/tandu/submodule lib/submodule
git submodule add ./lib/submodule lib/submodule 
```

这很好用，但是在网站上，查看文件时找不到指向子模块的链接（实际上它只是永远说“加载提交数据”）。子模块文件夹本身具有正确的`origin`.

显然，我应该做的是

```
...
mkdir lib
git submodule add git://github.com/tandu/submodule lib 
```

……但现在为时已晚。我怎样才能让这个项目中的子模块正确指向`origin`？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-04-25T15:34:26.990

这显然在很大程度上取决于您使用的 git 版本。

1.  如果存在，请更改`url`条目中的`[submodule "<dirname>"]`文件部分中`.gitmodules`。
2.  如果存在，请更改`url`条目中的`[submodule "<dirname>"]`文件部分中`.git/config`。
3.  更改`url`子模块本身的配置。文件的位置`config`取决于版本。旧版本中有它`<dirname>/.git/config`，新版本在`.git/modules/<dirname>/config`. 但是，您始终可以使用以下命令：

```
cd <dirname>
git config remote.origin.url <new_url> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2021-02-06T01:22:30.837

在其他问题中，我找到[了更现代 Git 版本（2.25）的答案](https://stackoverflow.com/a/914135/8212196)

`git submodule [--quiet] set-url [--] <path> <newurl>`

假设您在 origin 的目录`external/foo-lib`中有子模块，`https://github.com/example-user/foo-lib.git`并且您想将其更改为您的 fork `https://github.com/your-account/foo-lib.git`，然后在 git 项目类型的根目录中：

`git submodule set-url external/foo-lib https://github.com/your-account/foo-lib.git`

# asp.net - Informix ODBC 查询在日期字段上附加时间

> ID：10317690
> 
> 赞同：1
> 
> 时间：2012-04-25T14:22:33.017
> 
> 标签：asp.net, ado.net, odbc, informix, radio-group

我有一个 .aspx 页面，其中包含对 informix 数据库的查询。此查询通过 odbc 连接完成并放入数据表中。然后将此数据表用作单选按钮组的数据源。

我的问题是，无论出于何种原因，时间都作为“12:00:00 AM”附加到单选按钮上。这很奇怪，因为informix 字段是不包括时间的日期字段。如果我要在网页之外运行查询，它会在没有时间的情况下返回它......“2012-06-15”

所以总而言之......我得到的是：“6/15/2012 12:00:00 AM”而我想要的是“06/15/2012”

查询如下：

```
"select DATE(attend_date) as attend_date from soar_major_table where major =? and active<>'N'" 
```

创建数据表的代码：

```
string connString;
            connString = ConfigurationManager.ConnectionStrings [ "ERP" ].ConnectionString;

            OdbcConnection conn = new OdbcConnection ( );
            conn.ConnectionString = connString;

           string sql = "select DATE(attend_date) as attend_date from soar_major_table where major =? and active<>'N' ";

OdbcCommand command = new OdbcCommand ( );
            command.CommandText = sql;
            command.Parameters.Add ( new OdbcParameter ( "major", major ) );
            command.Connection = conn;

            DataTable dt = new DataTable ( );

            OdbcDataAdapter dataAdapter = new OdbcDataAdapter ( );

            dataAdapter.SelectCommand = command;

            try
            {

                conn.Open ( );

                dataAdapter.Fill ( dt );
            }
            finally
            {
                if ( conn != null && conn.State == ConnectionState.Open )
                {

                    command.Dispose ( );
                    dataAdapter.Dispose ( );
                    conn.Close ( );
                }
            }

            return dt; 
```

最后是广播 btn 组的人口：

```
if ( dt.Rows.Count > 0 )
                {
                    rdoDate.DataSource = dt;

                    rdoDate.DataTextField = "attend_date";
                    rdoDate.DataValueField = "attend_date";
                    rdoDate.DataBind ( );

                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:41:16.203

我相信问题出在 Informix 数据服务器的上游。

当你执行：

```
SELECT DATE(attend_date) ... 
```

服务器将返回该值作为 4 字节整数，表示自 1899-12-31 以来的天数（因此 1900-01-01 是第 1 天），这是 Informix 中 DATE 的内部表示。

较高层中的某些东西将其视为“日期+时间”值，并假设午夜是时间，因为日期中没有时间分量，然后通过将其格式化为 am/pm 符号来在伤口上撒盐。

这将涉及对正在发生的事情进行客户端跟踪。我的怀疑（除了对 ODBC 驱动程序的有限了解之外没有任何依据）是问题发生在 .NET 层而不是 ODBC 驱动程序中。但是，一旦您在 ODBC 层之上，您就超出了我的专业领域（而且我并不声称在 ODBC 方面具有出色的专业知识）。

您可以通过`SQLIDEBUG=2:xyz`在环境中使用将问题隔离到客户端代码（您可能需要使用 SETNET32 for Windows 进行设置）。如果它在 Windows 上完全有效（它在 Unix 上有效），那么您最终会得到一个文件，其名称开头`xyz_`后跟各种数字和字母组。该文件可以被分析，`sqliprint`并将向您显示发送到 Informix 数据服务器并返回给您的客户端的内容。假设 SQL 在到达服务器的途中没有被黑客入侵，那么您会看到返回的日期是一个简单的日期，而问题肯定是客户端的。如果 SQL 在途中被黑客入侵，那么这也是客户端问题。

它至少为调试提供了一个起点。

非常仔细地查看您的代码使用的类型的数据类型。特别是，某些 DBMS 具有包含时间信息的 DATE 类型，您可能需要避免这种解释。SQL 标准有 DATE（无时间）、TIME（无日期）和 TIMESTAMP（日期和时间）类型。

# c# - 制作 Fortran dll 并从 C# 调用它

> ID：10317691
> 
> 赞同：10
> 
> 时间：2012-04-25T14:22:35.833
> 
> 标签：c#, dll, fortran

我在 Fortran 可执行文件中有一个函数，我需要将其设为 dll 文件，以便可以从 C# 程序调用它的函数

```
 FUNCTION TSAT11(P) 
C     ** IGNORE IMPLEMENTATION **
      TSAT11 = SX*TSAT2(X) + SXL1*TSAT3-273.15 
      RETURN 
      END 
```

P 是一个浮点数，函数返回一个浮点数

这里的事情我对fortran一无所知，也不从C#调用dll，所以请多解释一下。

我正在使用 Compaq Visual Fortran 和 C# 2008。

感谢您的时间。

（如果你喜欢你可以在[这里](http://www.mediafire.com/?r49g04w5qncqgr4)查看完整的代码[这是一个计算水和蒸汽特性的程序]）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T14:56:54.223

这是一个使用单精度浮点数的示例。

Fortran 库包含：

```
FUNCTION TSAT11(P) 
!DEC$ ATTRIBUTES ALIAS:'TSAT11' :: TSAT11
!DEC$ ATTRIBUTES DLLEXPORT :: TSAT11
!DEC$ ATTRIBUTES VALUE :: P
REAL, INTENT(IN) :: P   
REAL :: TSAT11
    ! Examle calculation
    TSAT11 = P - 273.15
RETURN 
END FUNCTION 
```

带调用功能

```
class Program
{
    [DllImport("calc.dll")]
    static extern float TSAT11(float P);

    static void Main(string[] args)
    {
        float p = 300f;
        float t = TSAT11(p);
        // returns 26.8500061
    } 
 } 
```

同样对于数组（必须声明大小）

```
FUNCTION TSAT12(P,N) 
!DEC$ ATTRIBUTES ALIAS:'TSAT12' :: TSAT12
!DEC$ ATTRIBUTES DLLEXPORT :: TSAT12
!DEC$ ATTRIBUTES VALUE :: N
INTEGER, INTENT(IN) :: N
REAL, INTENT(IN) :: P(N)
REAL :: TSAT12
    ! Examle calculation
    TSAT12 = SQRT( DOT_PRODUCT(P,P) )
RETURN 
END FUNCTION 
```

带调用`C#`代码

```
class Program
{
    [DllImport("calc.dll")]
    static extern float TSAT12(float[] P, int N);

    static void Main(string[] args)
    {
        float[] p2=new float[] { 0.5f, 1.5f, 3.5f };
        float t2=TSAT12(p2, p2.Length);
        //returns 3.84057283
    } 
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:26:59.123

您可以使用 P/Invoke。这[是一篇](http://software.intel.com/en-us/articles/calling-fortran-function-or-subroutine-in-dll-from-c-code/)提供示例的文章。至于将您的 Fortran 代码编译成非托管 DLL，您可以在 CVF 中[创建一个 DLL 项目。](http://protodesign-inc.com/doc/SansGUI/creating_dll_projects.htm)

# ios - 在 NSPredicate 中结合 'AND' 和 'OR' 条件

> ID：10317692
> 
> 赞同：49
> 
> 时间：2012-04-25T14:22:40.150
> 
> 标签：ios, core-data, nspredicate

再次返回需要更多帮助来构建我的 NSPredicates :(

```
Category
{
   name:string
   subs<-->>SubCategory
}

SubCategory
{
   name:string
   numbervalue:NSNumber
} 
```

我想知道如何使用**AND**和**OR**创建谓词。

例如，我想返回名称 ==“category_name”的每个类别，该类别也有一个数字值为“valueA”**或**“valueB”的子类别。

我已经尝试了所有可能的谓词构造函数组合，但我无法让它工作。

这是我迄今为止最好的尝试。

```
NSPredicate *predicate=[NSPredicate predicateWithFormat@"(name== %@) AND (ANY subs.numbervalue==%@ OR ANY subs.numbervalue==%@)", @"aname", value1, value2]; 
```

**编辑 1**

第二次尝试。对“数字值”的过滤仍然不起作用。

```
NSNumber valueA=[NSNumber numberWithInt:20];
NSNumber valueA=[NSNumber numberWithInt:90];
NSArray *arr=[NSArray arrayWithObject:valueA,valueB,nil];

predicate=[NSPredicate predicateWithFormat:@"(name==%@)AND(ANY subs.numbervalue IN %@)",@"aname",arr]; 
```

**编辑 2**

我尝试仅按 numberValue 过滤，并将名称全部省略。

1) 使用这个会导致返回整个集合，即使集合中只有一项具有该值。

```
predicate=[NSPredicate predicateWithFormat:@"(ANY subs.numbervalue IN %@)",arr]; 
```

2) 使用这个会导致同样的问题，即使只有一个匹配，集合中的每个项目都会被返回。

```
predicate=[NSPredicate predicateWithFormat:@"((SUBQUERY(subs, $x, $x.numbervalue == %@ or $x.numbervalue == %@).@count > 0)", value1, value2]; 
```

使用最简单的版本也会导致同样的问题......我之前没有注意到这一点。

```
NSPredicate *predicate=[NSPredicate predicateWithFormat@"(ANY subs.numbervalue==%@ ,valueA]; 
```

所以我想我的问题已经缩小了。

类别是一个实体。子类别是一个实体。

Category 与 SubCategory 具有一对多的关系，并表示为 SubCategory 的 NSSet。

每个 SubCategory 都有一个名为 numbervalue 的属性。

**编辑 3**

要测试我有 2 个类别。两个类别都有 10 个子项，每个子项的数值为 1 -10；

使用此代码将返回两个类别以及每个类别的所有 10 个子项。

预期结果是两个类别都返回，每个类别只有 2 个子项。

我已经追踪了我所有的对象并且数据是正确的。问题是我无法返回已过滤的子类别。

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSManagedObjectContext *context=[[DataSource sharedDataSource]managedObjectContext];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Category" inManagedObjectContext:context];
[fetchRequest setEntity:entity];

[fetchRequest setFetchBatchSize:20];

NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES];
NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptor, nil];

NSPredicate *predicate;
NSNumber *a=[NSNumber numberWithFloat:1];
NSNumber *b=[NSNumber numberWithFloat:2];
predicate=[NSPredicate predicateWithFormat:@"(SUBQUERY(subs,$x,$x.numbervalue==%@ or $x.numbervalue==%@).@count> 0)",a,b];

[fetchRequest setPredicate:predicate];
[fetchRequest setSortDescriptors:sortDescriptors];

NSError *error = nil;
[NSFetchedResultsContoller deleteCacheWithName:nil];

NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:context sectionNameKeyPath:@"name" cacheName:@"Master"];
aFetchedResultsController.delegate = self;

self.fetchedResultsController = aFetchedResultsController;

if (![self.fetchedResultsController performFetch:&error]) {

   NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
   abort();
} 
```

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2015-12-10T23:11:36.470

除了@Stuart 的回答，您还可以像这样使用 NSCompoundPredicate 进行 OR & AND 操作。

**对象-C - 或**

```
// OR Condition //

NSPredicate *predicate1 = [NSPredicate predicateWithFormat:@"X == 1"];
NSPredicate *predicate2 = [NSPredicate predicateWithFormat:@"X == 2"];
NSPredicate *predicate = [NSCompoundPredicate orPredicateWithSubpredicates:@[predicate1, predicate2]]; 
```

**对象-C - AND**

```
NSPredicate *predicate1 = [NSPredicate predicateWithFormat:@"X == 1"];
NSPredicate *predicate2 = [NSPredicate predicateWithFormat:@"X == 2"];
NSPredicate *predicate = [NSCompoundPredicate andPredicateWithSubpredicates:@[predicate1, predicate2]]; 
```

**斯威夫特 - 或**

```
let predicate1:NSPredicate = NSPredicate(format: "X == 1")
let predicate2:NSPredicate = NSPredicate(format: "Y == 2")
let predicate:NSPredicate  = NSCompoundPredicate(orPredicateWithSubpredicates: [predicate1,predicate2] ) 
```

**斯威夫特 - 和**

```
let predicate1:NSPredicate = NSPredicate(format: "X == 1")
let predicate2:NSPredicate = NSPredicate(format: "Y == 2")
let predicate:NSPredicate  = NSCompoundPredicate(andPredicateWithSubpredicates: [predicate1,predicate2] ) 
```

**斯威夫特 3 - 或**

```
 let predicate1 = NSPredicate(format: "X == 1")
    let predicate2 = NSPredicate(format: "Y == 2")
    let predicateCompound = NSCompoundPredicate.init(type: .or, subpredicates: [predicate1,predicate2]) 
```

**斯威夫特 3 - 和**

```
 let predicate1 = NSPredicate(format: "X == 1")
    let predicate2 = NSPredicate(format: "Y == 2")
    let predicateCompound = NSCompoundPredicate.init(type: .and, subpredicates: [predicate1,predicate2]) 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-04-25T14:47:15.417

我将使用`SUBQUERY`.

```
[NSPredicate predicateWithFormat@"(name == %@) AND (SUBQUERY(subs, $x, $x.numbervalue == %@ or $x.numbervalue == %@).@count > 0)", @"aname", value1, value2]; 
```

试试看，让我知道。

另一种解决方案可能是获取整个集合`subs`，然后使用谓词过滤检索到的集合，以检查元素是否与`value1`or匹配`value2`。

希望能帮助到你。

**编辑**

如果您遵循**Eimantas 的**建议，请确保创建正确的数组：

```
NSNumber valueA = [NSNumber numberWithInt:20];
NSNumber valueB = [NSNumber numberWithInt:90];
NSArray *arr = [NSArray arrayWithObjects:valueA, valueB, nil]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-10-31T13:56:08.520

对于 Swift，您可以这样做：

**SWIFT 4.x - 和**

```
 let p0 = NSPredicate(format: "X == 1")
        let p1 = NSPredicate(format: "Y == 2")
        fetchRequest.predicate = NSCompoundPredicate(andPredicateWithSubpredicates: [p0, p1]) 
```

**SWIFT 4.x - 或**

```
 let p0 = NSPredicate(format: "X == 1")
        let p1 = NSPredicate(format: "Y == 2")
        fetchRequest.predicate = NSCompoundPredicate(orPredicateWithSubpredicates: [p0, p1]) 
```

**SWIFT 4.x - 不是**

```
 let p0 = NSPredicate(format: "X == 1")
        let p1 = NSPredicate(format: "Y == 2")
        fetchRequest.predicate = NSCompoundPredicate(notPredicateWithSubpredicates: [p0, p1]) 
```

**例子**

这是我的一个代码示例，我在其中查找 uid 和同步：

```
 let p0 = NSPredicate(format: self.uid + " = '" + uid + "'")
        let p1 = NSPredicate(format: self.sync + " = %@", NSNumber(value: true as Bool))
        fetchRequest.predicate = NSCompoundPredicate(andPredicateWithSubpredicates: [p0, p1]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-19T23:16:07.563

另一种选择是使用 NSCompoundPredicate （注意 andPredicateWithSubpredicates 执行 AND 但有几个选项可以使用，这应该比执行 2 次搜索更有效）

[https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSCompoundPredicate_Class/index.html#//apple_ref/occ/clm/NSCompoundPredicate/andPredicateWithSubpredicates](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSCompoundPredicate_Class/index.html#//apple_ref/occ/clm/NSCompoundPredicate/andPredicateWithSubpredicates) :)

# wpf - Backgroundworker 中画笔的只读权限

> ID：10317693
> 
> 赞同：0
> 
> 时间：2012-04-25T14:22:41.807
> 
> 标签：wpf, multithreading, backgroundworker, invalidoperationexception, brush

我有一个对象列表，其中包含一个画笔（属性名称“颜色”）。

在 Backgroundworker 中，我想将这些对象的内容写入文件。一切正常，直到我尝试读取画笔属性的颜色。

```
//this works fine
var brush = myObject.Color;

//this fails with InvalidOperationException
var c= ((SolidColorBrush)myObject.Color).Color; 
```

似乎我的代码以某种方式修改了颜色，但我看不到哪里/如何。有没有办法只读访问画笔的颜色？

问候，

塔比纳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:32:23.790

我是否感觉到您正在访问未创建它们的线程上的 UI 对象。您不能从 BGW 线程访问 UI 对象。这是不要忘记使用 BGW 类的黄金法则

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:56:30.707

如果在将对象添加到该列表后不需要修改它们，您可以尝试在它们从不同线程访问之前[冻结它们。](http://msdn.microsoft.com/en-us/library/ms557735.aspx)

确保 Freeze 调用发生在您创建这些对象的 UI 线程中。您还可以通过事先调用[CanFreeze](http://msdn.microsoft.com/en-us/library/system.windows.freezable.canfreeze.aspx)来检查是否可以冻结。

# html - 谷歌浏览器字体优化

> ID：10317696
> 
> 赞同：6
> 
> 时间：2012-04-25T14:22:47.373
> 
> 标签：html, css, google-chrome, fonts

我大量使用谷歌字体和自定义字体，因为谷歌浏览器有一个不好的习惯来渲染它们，这很遗憾，因为谷歌浏览器的其他一切都很好，有什么方法可以（最好使用 css）渲染字体到“Apple Safari”标准？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T21:57:20.180

这是一个永远令人困惑的问题。（参见：[https](https://superuser.com/questions/354006/google-chrome-never-renders-fonts-properly-no-smoothing-etc) ://superuser.com/questions/354006/google-chrome-never-renders-fonts-properly-no-smoothing-etc 。另请参见：[http://productforums.google.com/forum/#！主题/铬/oXILHkVG75M](http://productforums.google.com/forum/#!topic/chrome/oXILHkVG75M)）

这是一个 Windows 7/Vista ClearType 问题。AFAIK Safari、FF 和 IE 以不同方式呈现文本或使用它们自己的文本呈现例程。基本上，过去你可以添加一个小阴影来设置内部 Chrome 渲染标志，文本看起来会更好，但看起来仍然很糟糕。那不再起作用了。据我所知，这是 Chrome 中的一个尚未修复的错误。

我仍在寻找自己的解决方法，但我认为我们很不走运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T07:49:03.067

你看过 -webkit-font-smoothing 吗？我经常使用 Google Fonts 和 @font-face 工具包，并且使用 'subpixel-antialiased' 和 'antialiased' 成功地使用了一些 ' *chunier* ' 字体：

```
-webkit-font-smoothing: subpixel-antialiased;

-webkit-font-smoothing: antialiased; 
```

也许尝试每一个，看看是否对你所看到的有影响？

MaxVoltar 上有一篇文章给出了合理的解释：

[http://maxvoltar.com/archive/-webkit-font-smoothing](http://maxvoltar.com/archive/-webkit-font-smoothing)

# xml - 使用 git 和 xml 数据的协作环境

> ID：10317697
> 
> 赞同：4
> 
> 时间：2012-04-25T14:22:48.467
> 
> 标签：xml, git, ios5, storyboard

我的团队开发 iOS 应用程序。我们正在考虑在我们的下一个项目中使用 Storyboard，但是，我们有点担心我们将不可避免地在 GIT（或任何其他源代码控制）中处理的合并冲突以及故事板中幕后自动生成的 xml 数据。

人们是如何处理这种情况的，或者有人可以为我们提供一些关于如何减轻痛苦的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-06T22:23:14.810

我们通过`.gitattributes`在项目的根目录中添加一个文件来处理这个问题，其中包含以下内容：

```
*.pbxproj binary merge=union 
```

我确信有建议的[更好的方法](https://stackoverflow.com/questions/1681762/how-to-handle-xml-html-in-git-feature-branch-workflow)，但这在紧要关头完成了。

# windows - 从 Windows 远程运行 Linux 脚本并获取执行结果代码

> ID：10317698
> 
> 赞同：2
> 
> 时间：2012-04-25T14:22:53.053
> 
> 标签：windows, linux, batch-file, errorlevel

我要处理当前的情况：我必须使用 ARCServe R15（安装在 Windows 2003R2SP2 上）安排我公司基于 Linux 的服务器（在 Suse Linux 下）的备份。我知道我的备份软件 (ARCServe) 能够将执行前/后执行脚本添加到我的备份作业中。如果脚本失败，将指定 ARCServe 不运行备份作业，如果成功，则指定运行。我对此没有任何问题。

问题是，我想制作一个 Windows 脚本（由 ARCServe 启动）以在集群上执行 Linux 脚本： - 如果这个 Linux 脚本失败，我希望我的 windows 脚本失败，所以我在 ARCServe 中的备份作业不会运行 - 如果 Linux 脚本成功，我希望我的 windows 脚本以错误代码 0 正常结束，因此我的 ARCServe 作业将正常运行。我试过创建这个批处理文件（我们称之为 HPC.bat）：

回声开启

开始 /wait "C:\Program Files\PUTTY\plink.exe" -v -l root -i "C:\IST\admin\scripts\HPC\pri.ppk" [cluster_name] /appli/admin/backup_admin

退出%errorlevel%

如果我通过双击这个 .bat 手动启动它，或者在 Windows 下的命令提示符下启动它，它会正常执行然后结束。如果我让它由 ARCServe 启动，脚本似乎永远不会结束。我的工作处于“等待”状态，似乎linux脚本的执行代码没有返回到我的批处理文件中，并且这个没有关闭。在我看来，发生的事情是 plink 只是打开与 Linux 的连接，发送 sript 执行信号，然后关闭连接，因此无法将执行代码返回给批处理。我对吗 ？

我想做的事情是可能的，还是我在尝试不可能做的事情？那么，我必须以不同的方式进行吗？我必须使用 PUTTY 或 CygWin 而不是 plink 吗？拜托，这让我头疼...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:09:47.197

如果你安装 Cygwin，你可以像在 Linux 到 Linux 上那样做，即远程运行命令`ssh someuser@remoteserver.com somecommand`

该命令将在调用客户端返回与在远程端退出的命令相同的返回码。如果您使用 SSH 共享密钥而不是密码进行身份验证，也可以编写脚本而无需用户交互。

# java - Java/ 使用 Junit 4 会产生编译错误

> ID：10317701
> 
> 赞同：0
> 
> 时间：2012-04-25T14:22:57.513
> 
> 标签：java, junit

我在属于 Junit 的包的项目中遇到编译错误（在 中`org.junit, org.junit.experimental.results, org.junit.internal, org.junit.internal.matchers, org.junit.matchers, org.junit.rules`）。

所有这些类都在我的项目中的 junit 包下，意思是：`Security/src/org.junit, Security/src/org.junit.experimental.results`，`Security`我的项目的名称在哪里。我编写的类在我定义的其他包下：`Security/src/myPackage/myClass`

在所有这些类中，它在导入行中给出了一个编译错误，例如：

```
import org.hamcrest.Description cannot be resolved
import org.hamcrest.Matcher cannot be resolved;
import static org.junit.matchers.JUnitMatchers.containsString cannot be resolved; 
```

检查一切正常（绿色/红色条显示，并给出正确的结果），但这个问题给了我所有项目的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T14:27:56.163

您的 JUnit 版本需要 Hamcrest。您应该将它包含在您的构建路径中或使用较旧的 JUnit 版本。

4.10 版有不同的 JUnit 包：

*   junit-4.10.jar：包括 Hamcrest，你应该使用它。
*   junit-dep-4.10.jar：不包括 Hamcrest，如果您的构建路径中已经有一个 hamcrest jar，请使用它。

# html - 如何防止空白的最后一页？

> ID：10317705
> 
> 赞同：6
> 
> 时间：2012-04-25T14:23:05.580
> 
> 标签：html, css-tables, page-break

我正在遍历对象列表。在每次迭代中，我都会构建并填充一个包含单个页面内容的表。

我正在使用 CSS 在每个表格后添加分页符。

```
table { page-break-after: always; } 
```

这很好用，除了我总是得到一个空白的最后一页。我认为这是由于最后一次表迭代应用了分页符。

我试过了。

```
table { page-break-after: always; }
table { page-break-after: auto; }
table { page-break-after: left; }
table { page-break-after: right; } 
```

但是，我总是得到空白的最后一页。

是否有另一种插入分页符的方法不会创建空白的最后一页？
或者也许有某种方法来检测是否是最后一次迭代而不插入最后一个分页符？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-25T14:29:52.393

你可以添加这个：

```
table:last-of-type {
    page-break-after: auto
} 
```

或许

```
body > *:last-child {
    page-break-after: auto
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-19T13:01:39.523

我正在使用 ruby​​ 创建页面。我创建了不同的css来打破和不打破。

```
#publication_no_break{
/* stuff here */
page-break-after: avoid;
}

#publication_break{
/* stuff here */
page-break-after: always;
} 
```

在代码上，我计算我需要打印的每一页

```
<% if page != total_pages %>
< .... .... id="publication_break" >
<% else %>
< .......... id="publication_no_break">
<% end %> 
```

你可以用你正在编码的任何语言尝试这样的事情。

# jquery - 使用 jQuery 将鼠标悬停在一个元素上并在另一个元素上应用效果

> ID：10317706
> 
> 赞同：2
> 
> 时间：2012-04-25T14:23:16.813
> 
> 标签：jquery

```
<div class="views-row">
<div>
    <h5 class="product-name">
        <a href="#">Dots</a>
    </h5>  
</div>  
<div class="views-field">       
    <div class="field-content">
        <a href="#">
            <img alt="" src="#" />
        </a>
    </div>  
</div> 
```

这是jQuery：

```
 $('.views-field').hover(function() {
    $('h5').css('text-decoration', 'underline');
}, function() {
    $('h5').css('text-decoration', 'none');
}); 
```

上面的代码产生的是对所有类项的悬停效果，而不仅仅是我悬停的项。我试图添加

```
$(this).parent('views-row').find('h5').css('text-dec', 'under') 
```

但那里没有豆子。

正如您可能猜到的那样，我是一个 jQuery 新手，并且非常感谢您朝着正确的方向前进……

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T14:26:24.613

尝试：

```
$('.views-field').hover(function() {
    $('h5', $(this).closest('.views-row')).css('text-decoration', 'underline');
}, function() {
    $('h5', $(this).closest('.views-row')).css('text-decoration', 'none');
}); 
```

您还可以使用:`$(this).parents('.views-row')`附加到该特定行，但`closest`只返回一个元素。

摆弄：http: [//jsfiddle.net/iambriansreed/Ct39b/](http://jsfiddle.net/iambriansreed/Ct39b/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:25:29.973

尝试`$(this).prev().find('h5').css('text-decoration', 'underline');`

如果包含 h5 的 div 始终高于 ，则上述内容应该有效`.views-field`。

```
$('.views-field').hover(function() {
    $(this).prev().find('h5').css('text-decoration', 'underline');
}, function() {
    $(this).prev().find('h5').css('text-decoration', 'none');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T14:36:04.617

我认为最简单的方法是将`h5`'s 限定为前一个元素

```
$('.views-field').hover(function() {
    $('h5',$(this).prev()).css('text-decoration', 'underline');
}, function() {
    $('h5',$(this).prev()).css('text-decoration', 'none');
}); 
```

这是一个 jsfiddle 演示：http: [//jsfiddle.net/v39UQ/](http://jsfiddle.net/v39UQ/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-25T14:39:20.270

[请参阅此处](http://jsfiddle.net/Mf64r/)的示例

这是代码：

```
<div class="views-row">
<div>
    <h5 class="product-name">
        <a href="#">Dots</a>
    </h5>  
</div>  
<div class="views-field">       
    <div class="field-content">
        <a href="#">
            <img alt="" src="#" />
        </a>
    </div>  
</div>​

$('.views-row h5').hover(function() {
        $(this).css('text-decoration', 'underline');
    }, function() {
        $(this).css('text-decoration', 'none');
    });​ 
```

只是您的信息，您可以使用纯 css 来完成上面的代码，请参见下面的代码：

```
.views-row h5:hover{
    text-decoration: underline;
} 
```

# visual-studio-2010 - VS2010 自带视频源安全吗？还是单独购买？

> ID：10317712
> 
> 赞同：-1
> 
> 时间：2012-04-25T14:23:47.267
> 
> 标签：visual-studio-2010, visual-sourcesafe

我们正在使用`Tortoise svn`，因为我们有一些问题要解决`VSS`。Visual source 是否安全随附`VS2010`或我们应该单独购买和安装。当我们打电话询问时，他们说`VSS`要从中选择`Tools->options->Sourcecontrol`。如果我这样做，我会收到一些错误![在此处输入图像描述](../Images/85822240ec3fa65a01c9e37c678ac43d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:05:16.850

正如有人已经在评论中回答的那样，VSS 没有随 VS2010 一起提供。

无论如何，我强烈建议不要使用 VSS 作为源代码控制。作为源代码控制系统，它已经是几代人的老技术了。

与现代竞争相比，它在整个开发过程中存在严重缺陷，应普遍避免。

我不知道您对 SVN 有什么问题，但我敢打赌，它们更多是组织方面的，而不是技术方面的。

从您的评论中，我可以推断出您希望 SVN 为您提供与 VSS 相同类型的悲观锁定工作流程，但是使用 SVN 和其他更现代的工具，您必须将您的期望和工作流程更改为更自然的并行开发。

在 SVN 中，您*不需要跟踪谁更改了什么*，因为每个人都可以检查和修改源代码树中的每个源文件，并且在大多数情况下，除非开发人员同时更改同一文件中的相同行，否则这些更改会合并在一起而无需任何人工干预。

您无需获取源文件的排他锁来修改它，而是在将其提交回存储库之前同步本地工作副本并在本地解决任何冲突。这样，没有人需要跟踪谁在做什么，只需记住在提交之前更新工作副本并解决任何奇怪的冲突。

视觉合并工具非常有用。一旦你转变了，你会爱上它，再也不想回去了。

如果 SVN 不适合您，[SourceGear](http://sourcegear.com/)的好人有一个名为[Vault](http://sourcegear.com/vault/)的商业工具，专门设计为 VSS 的替代品。

如果您对 VSS 感到特别冒险和自由，您也可以看看同样的人的[Veracity](http://sourcegear.com/veracity/) - 一个分布式版本管理工具，很像流行的*Git*和*Mercurial*。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-19T19:35:44.507

VSS 不随 VS2010 提供，但您仍可以将其用作源代码控制的一种形式……尽管强烈建议不要这样做。

# python - 在 python 中更改全局变量的存储

> ID：10317714
> 
> 赞同：-3
> 
> 时间：2012-04-25T14:23:51.987
> 
> 标签：python, globals

我想在 python 脚本中更改所有全局变量的存储，就好像我可以只写 use_this_dict_for_globals(some_dict)。

它们都以“g_”为前缀，所以如果我可以用“some_dict”替换“g_”。要更改所有这些变量访问，这也可以。我实际上更喜欢这种方式，但在 Python 中，我要么需要使用变量访问，比如 foo['bar'] 而不是 foo.bar，要么我需要一些我一无所知的 python 类的东西（？）。

有什么快速/可靠的方法吗？

**更新**：正如所有答案所述，您可以使用像字典这样的类实例，没有任何限制，foo.bar = 123。您不能将此表示法与字典一起使用（就像您可以在 Lua 中使用表格一样），这会导致我认为根本没有办法。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:32:40.067

我会将所有内容分解为模块，并远离全局。

拥有一个包含所有全局变量的模块，然后将其实例传递给需要它的其他模块。

```
class doSomeThing(object):
    def __init__(self, config):
        self.config = config

    def some_func(self):
        # something
        pass

class Global_Config(object):
    def __init__(self, params):
        # load global information

if __name__ == "__main__":
    # construct the config
    config = Global_Config(some params)
    one = doSomething(config)
    two = doSomethingTwo(config)
    # do stuff with do some work with one and two and config 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:39:59.653

如果您在全局命名空间中有名为`g_var1`and的变量`g_var2`（顺便说一句非常糟糕），您可以通过以下方式访问它们：

```
some_dict = {varname[2:]: var for varname, var in globals().iteritems() if varname.startswith('g_')} 
```

您将获得一个`some_dict`包含所有以`g_`. 您可以使用`some_dict['var1']`.

但除非绝对必要，否则不要这样做。使用类和模块/包。简单的例子：

```
class SomeClass(object):
    def __init__(self):
        self.var1 = 'whatever'
        self.var2 = 'whatever also'

c = SomeClass()
print c.var1, c.var2 
```

有关更多信息，请阅读类和模块（`import some_module`以及类似的东西）。

**结论：**

不要以`g_`全局变量为前缀，在全局命名空间中使用一个字典并从那里或你自己的类中访问它们。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T16:03:37.387

您可以使用这个“python 类的东西”来实现一个包含所有全局变量的对象。请注意，我认为这通常不是一个好方法，但它非常接近您打算做的事情。

在脚本的开头附近，定义一个类`MyGlobals`并获取它的一个实例：

```
class MyGlobals(object):
    pass
g = MyGlobals() 
```

`g`您可以在脚本中的任何位置访问该对象，如下所示：

```
g.foo = "foo"
print g.foo 
```

但正如评论中所说，尽量避免使用全局变量，看看是否可以更多地使用 OOP。

# php - 如何检测数据库结构是否发生了变化？（不满足！）

> ID：10317715
> 
> 赞同：2
> 
> 时间：2012-04-25T14:23:52.203
> 
> 标签：php, mysql

在我的`php`脚本中，我想检查数据库表的结构是否已更改。不会提供足够的`DESCRIBE TABLE`信息，因为它忽略了外键。`SHOW CREATE TABLE`太多了，因为这里也出现了自动增量值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T14:28:13.237

> SHOW CREATE TABLE 太多了，因为这里也出现了自动增量值。

只需使用正则表达式过滤掉自动增量值。

```
preg_replace('/ AUTO_INCREMENT=[0-9]+ /', ' ', $sql); 
```

# android - 触摸列表视图时Android删除软键盘

> ID：10317716
> 
> 赞同：9
> 
> 时间：2012-04-25T14:23:52.267
> 
> 标签：android, android-listview, android-edittext

在我的应用程序中，我有一个带有列表视图和搜索栏的视图，可以在列表视图中搜索。当您点击搜索栏时，它会获得焦点并且软键盘会出现。当我触摸列表视图时，键盘停留在列表视图的顶部，因此我看不到很多列表视图。

我的问题：我如何知道列表视图是否已被触摸/滚动/...以及如何删除软键盘并从编辑文本中删除焦点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-10T09:15:08.130

基于@androidnoob 的回答，我在这里（对于其他有此特定问题的人）发布所需的完整代码。

```
list.setOnScrollListener(new OnScrollListener() {
     public void onScrollStateChanged(AbsListView view, int scrollState) {
             //hide KB
             InputMethodManager imm =  (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE); 
             imm.hideSoftInputFromWindow(colleagueSearch.getWindowToken(), 0);
            }

            public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) { }
   }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T14:37:07.097

[看一下这个问题](https://stackoverflow.com/questions/1109022/how-to-close-hide-the-android-soft-keyboard)以了解如何关闭键盘，至于知道列表视图是否已滚动，您可以扩展列表视图类并覆盖 onScrollChanged() 方法，并在与滚动交互时做任何您想做的事情

编辑：实际上有一个[OnScrollListener](http://developer.android.com/reference/android/widget/AbsListView.OnScrollListener.html)来监听列表视图中的滚动变化

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-10T11:16:13.870

yourListView.setOnScrollListener(new AbsListView.OnScrollListener() {

```
 @Override
        public void onScrollStateChanged(AbsListView view, int scrollState) {
            if (scrollState != 0){

                InputMethodManager imm = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(yourEditText.getWindowToken(), 0);

            }
        }
        @Override
        public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {

        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-17T09:15:11.143

@Dr.Luiji 回答有效，但我认为最好在用户触摸listView 后立即隐藏软键。

```
 myListView.setOnFocusChangeListener(new OnFocusChangeListener() {
        @Override
        public void onFocusChange(View v, boolean hasFocus) {
            if (hasFocus) {
                InputMethodManager imm = (InputMethodManager) mContext.getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(((Activity) mContext).getCurrentFocus().getWindowToken(), 0);
            }
        }
    }); 
```

# magento - Magento 如何通过静态块/页面中的 id 链接到类别

> ID：10317719
> 
> 赞同：6
> 
> 时间：2012-04-25T14:24:04.880
> 
> 标签：magento, categories, static-block

我正在寻找使用`category id`. 有什么想法吗？

我已经完成了通常的搜索，但无济于事。

目前我可以做类似的事情`<a href="{{store url="category-i-want.html"}}">`，但这并不强大。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T14:31:29.003

使用类别链接小部件内联链接代码：

```
{{widget type="catalog/category_widget_link" anchor_text="Displayed Text" title="Title attribute text" template="catalog/category/widget/link/link_block.phtml" id_path="category/22"}} 
```

# css - 将 div 固定到某个位置（通过调整窗口大小保持固定）

> ID：10317725
> 
> 赞同：4
> 
> 时间：2012-04-25T14:24:24.913
> 
> 标签：css, html, positioning, absolute

请参考我的站点[Vault X](http://www.vault-x.com)

我一直在尝试使保险库旁边的电灯开关成为可点击的功能。

但是，我不能让我的 div 固定在这个位置上（调整窗口大小会导致它移动）。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T14:30:32.877

Doing `position:absolute`（或更恰当地在这里`position:fixed`）指定了一个元素在文档正常流程之外相对于第一个父级的位置，该父级的位置不是静态的（在这种情况下（并且总是带有`position:fixed`）浏览器窗口）。

因此，由于您指定了顶部和右侧位置，因此这些值是固定的。当您将右边框移入时，与浏览器视口的距离必须保持不变，因此元素会移动。

您可以尝试从左侧定位，但这只会防止从右侧调整大小（如果我将左角拖入，元素会移动）

或者，您应该将该元素静态放置在文档中，在您的`#wrapper`div 中，以便调整窗口大小对文档流没有影响。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T14:34:57.423

因为您的图形锚定在页面的水平中心，您可以使用相同的中心，然后偏移。

```
#switch {
  height:50px;
  width:50px;
  background: #F00; /* Just so we can see it */
  position: absolute;
  top: 150px;
  left: 50%;  /* Put the left edge on the horizontal center */
  margin-left: 148px; /* Move it 148px to the right of the horizontal center, placing it over the lightswitch */
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T14:41:15.680

您需要做的是，考虑您希望元素在哪里（固定将其粘贴在坐标位置 X/Y，绝对，将随文档移动，相对相对于它所在的位置非常清楚）。

话虽如此，我建议使用创建一个“锚点”

```
<div style="position: relative;" class="anchor-point">
   <div style="position: absolute; top: 100px; right: 50px;">
   <img href="" />
   </div>
</div> 
```

这`anchor-point`意味着您可以将此元素粘贴在页面的内部区域中，`position:absolute;`让您可以从锚点移动到您想要的任何位置（上/右/左/下），将其与`z-index`您的元素结合起来以您想要的方式分层它。

这将保证您的元素（即 pos:abs）将保持在您想要的位置。

# java - 如何检查 Wicket 文本字段中的空值？

> ID：10317731
> 
> 赞同：5
> 
> 时间：2012-04-25T14:24:42.027
> 
> 标签：java, wicket

我有一个包含整数值的 Wicket 文本字段

```
currentValueTextField = new TextField<IntParameter>("valueText", new PropertyModel<IntParameter>(model, "value")); 
```

我为此附加了一个自定义验证器，如下所示

```
currentValueTextField.add(new IntegerValidator()); 
```

验证器类是

```
class IntegerValidator extends AbstractValidator<IntParameter> {

private static final long serialVersionUID = 5899174401360212883L;

public IntegerValidator() {
}

@Override
public void onValidate(IValidatable<IntParameter> validatable) {
    ValidationError error = new ValidationError();
    if (model.getValue() == null) {
        AttributeAppender redOutline = new AttributeAppender("style", new Model<String>("border-style:solid; border-color:#f86b5c; border-width: 3px"), ";");
        currentValueTextField.add(redOutline);
        currentValueTextField.getParent().getParent().add(redOutline);
        validatable.error(error);
        }
    }
} 
```

但是，如果我在文本字段中不输入任何内容，`onValidate()`则不会调用我的方法。

在这种情况下，检查空值的推荐方法是什么？我还想对输入的值进行范围检查。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T14:44:54.840

打电话

```
currentValueTextField.setRequired(true); 
```

将字段标记为必填，并让 Wicket 自行处理空值。您可以轻松地为每个输入字段组合多个验证器。

任何特殊的错误处理，例如添加红色边框或显示错误消息，都可以在表单的方法中实现，或者通过在适当的字段中`onError`添加s 来实现。`FeedbackBorder`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T14:44:30.260

默认情况下覆盖`validateOnNullValue()`它`false`。

```
@Override
public boolean validateOnNullValue()
{
     return true;
} 
```

这是`validateOnNullValue()`方法的描述：

> 指示是否验证该值（如果是）`null`。如果值是 ，通常希望跳过验证`null`，除非我们想确保该值是真实的`null`（一个罕见的用例）。扩展此方法并希望确保值为 is 的验证器`null`应覆盖此方法并返回 `true`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-26T08:44:46.103

```
currentValueTextField.setRequired(true); 
```

现在您需要自定义错误消息。所以继承FeedbackPanel。

您可以在以下[链接中找到更多信息](https://cwiki.apache.org/WICKET/css-enabled-feedback-panel.html)

将此类添加到您的表单或组件中

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T18:41:10.353

一种更好（且可重用）的方法是覆盖`isEnabled(Component)`行为的方法：

```
public class HomePage extends WebPage {
    private Integer value;
    public HomePage() {
        add(new FeedbackPanel("feedback"));
        add(new Form("form", new CompoundPropertyModel(this))
            .add(new TextField("value")
                .setRequired(true)
                .add(new ErrorDecorationBehavior()))
            .add(new Button("submit") {
                @Override
                public void onSubmit() {
                    info(value.toString());
                }
            }));
    }
}

class ErrorDecorationBehavior extends AttributeAppender {
    public ErrorDecorationBehavior() {
        super("style", true, Model.of("border-style:solid; border-color:#f86b5c; border-width: 3px"), ",");
    }
    @Override
    public boolean isEnabled(Component component) {
        return super.isEnabled(component) && component.hasErrorMessage();
    }
} 
```

# mongodb - 为什么使用 Redis 而不是 MongoDb 进行缓存？

> ID：10317732
> 
> 赞同：19
> 
> 时间：2012-04-25T14:24:42.383
> 
> 标签：mongodb, memcached, redis, geospatial

我最近看到很多人使用 Redis 作为缓存，为什么不使用 Mongo？据我所知，Redis 可以在索引上设置过期日期，例如 memcache，但除此之外有什么理由不使用 Mongo 吗？

我问，因为我在 MySQL 中进行大型连接，然后在选择数据后更改数据。我已经在站点的其他部分使用了 memcache，但是将它保存在 Mongo 中可以让我对缓存的数据进行地理空间搜索。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-25T14:49:42.580

很多人确实将 MongoDB 用于中低级缓存，而且效果很好。

因为它通过临时可查询性提供了比简单的键值存储更多的功能，所以它不像 memcache 或 redis 那样纯粹是缓存层（插入和检索数据可能会更慢）。

可以获得极高的性能（工作集毕竟在 RAM 中），但数据模型更重。

然而，另一方面，与 Redis 不同，MongoDB 确实提供了一个持久层，这对于大多数开发人员来说更有意义（对大多数开发人员而言）对于以后最有可能需要的数据类型。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-26T02:57:11.233

MongoDB 和 Redis 最大的区别在于 Redis 通常将整个数据库存储在内存中。MongoDB 使用内存映射文件来假装所有内容都在内存中，并根据需要让操作系统页面位进出磁盘。如果操作系统可以将所有内容保存在内存中，则性能会有些相似。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-25T14:48:53.857

当我们说缓存时，会想到速度。这里的目标是尽可能快地设置和检索一些东西。从这个意义上说，redis 比 mongodb 快。但是，如果您发现 mongodb 适合对缓存数据进行地理空间搜索，则可以使用它。您当然可以投入一些时间并在 redis 中实现相同的功能，然后进行基准测试以查看您的收获。

# c++ - 以编程方式从在 QWS 帧缓冲区上运行的嵌入式 qt 应用程序更改为 tty？

> ID：10317737
> 
> 赞同：3
> 
> 时间：2012-04-25T14:25:01.010
> 
> 标签：c++, linux, qtembedded

我想知道如何以编程方式从嵌入式 Qt 应用程序更改为可用终端之一。

该应用程序通过 调用`application -qws`。从图形上看，它配置了 Linux 帧缓冲区（支持编译到内核中）并启用了 tty 驱动程序。

以编程方式执行此操作的原因是 Ctrl+Alt+FX 无法切换 ttys。

首先，我尝试了明显的作弊机制 -`keyPressEvent`我添加了覆盖`system("chvt 2");`不幸的是，这不起作用。

相反，我直接查看了`chvt.c`在busybox中的来源。从本质上讲，这归结为：

```
fd = open("/dev/console", O_RDRW);
ioctl(fd, VT_ACTIVATE, vt_num);
ioctl(fd, VT_WAITACTIVE, vt_num); 
```

忽略使用`xioctl`和检测正确的 tty - 我知道`/dev/console`存在，我可以得到一个 RW 文件句柄。

再次，没有运气。

因此，`chvt.c`我决定迭代所有存在的帧缓冲设备，直到找到一个正在接收键盘输入的设备。然后我跑了

```
fd = open("/dev/fb1", O_RDRW);
ioctl(fd, VT_ACTIVATE, vt_num);
ioctl(fd, VT_WAITACTIVE, vt_num); 
```

根据任何正常的 tty 更改，这都会导致黑屏，除了帧缓冲区设备随后返回，将我的应用程序带回来。

所以 - 我的问题 - 在不退出我的应用程序的情况下，我希望能够以编程方式切换到我选择的 tty，然后能够使用通常的 ctrl+alt+fX 机制切换回来。

环境：

*   Qt 4.7.4
*   Linux 3.3.3
*   构建根 2011.11
*   忙箱 1.19
*   uClibc 2.21

我怀疑但不确定，ctrl+alt+fX 最初不起作用的原因可能是 tty 更改无法按照 chvt 以编程方式工作的原因。

在这个阶段我应该指出，令人困惑的是，zap 键（ctrl+alt+backspace）确实按预期工作。

# javascript - javascript，数字舍入问题

> ID：10317743
> 
> 赞同：3
> 
> 时间：2012-04-25T14:25:18.683
> 
> 标签：javascript, decimal, rounding

我知道 javascript 可能有除法的舍入问题，但没有乘法。你如何解决这些问题？

```
var p = $('input[name="productsUS"]').val().replace(",", ".");
var t = $('input[name="productsWorld"]').val().replace(",", ".");

if (p >= 0 && t >= 1) {
    var r = p / t;
    r = Math.round(r * 10000) / 10000;
    var aff = (r * 100) + "%"; 
```

如果`p = 100`和`t = 57674`

`r = 0.0017`(ok) 和`aff = 0.16999999999999998%`(arg)

我怎么能得到`aff = 0.17`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:27:14.043

`("0.16999999999999998").tofixed(2)`给你`0.17`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:36:54.633

如果您想`aff`保留数字而不是转换为字符串，则可以使用`toFixed`来解决精度问题，然后使用一元运算符将其“转换”回数字，`+`如下所示：

```
var n = 0.16999999999999998;

n = +n.toFixed(10); // 0.17 
```

您可能希望使用比小数点后 2 位更高的精度来避免舍入问题，我在这里使用了 10。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T14:28:35.517

```
var aff = (r * 100).toFixed(2) + "%"; 
```

[**现场演示**](http://jsfiddle.net/LTnEU/)

`toFixed`在[MDN上](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number/toFixed)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T14:31:41.707

这是 JavaScript 中的一个错误（尽管它也影响了一些其他语言，例如 Python），因为它存储非整数的方式有点错误（二进制！）。解决它的唯一方法是将其四舍五入到小数点后两位。

# wcf - WCF IsOneWay = true 报告异常

> ID：10317748
> 
> 赞同：2
> 
> 时间：2012-04-25T14:25:29.107
> 
> 标签：wcf

```
[ServiceContract]
public interface Service
{
   [OperationContract(IsOneWay = true)]
   void ServiceMethod();
} 
```

我用 设置服务器的代码`IsOneWay = true`，因为客户端不关心服务器的结果，并且在某些情况下服务器的方法可能需要运行很长时间（例如30分钟）。

但我发现客户端仍在等待服务器的方法完成。服务器在 30 分钟内完成后，客户端再次请求，报告`CommunicationException`：

> “套接字连接已中止。这可能是由于处理您的消息时出错或远程主机超出接收超时，或底层网络资源问题。本地套接字超时为 '00:01:00'”。

我认为客户端仍然等待结果（默认`receiveTimeOut`为 10 分钟），然后导致超时。我使用 WCF 3.0。

你能帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:03:07.380

WCF 中的单向调用与异步调用不同。

即使进行单向调用的客户端不会收到来自服务的响应，如果服务没有可用的线程来调度或排队传入的客户端请求，那么客户端将挂起并最终超时，如果没有调度线程可用在超时期限内。

可用线程的数量和请求队列的大小由 WCF 管理，并由服务并发模式、会话模式以及服务是否配置了可靠消息传递等因素决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T21:11:08.017

[MSDN ServiceBehviorAttribute.concurrencyMode](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicebehaviorattribute.concurrencymode.aspx)状态：

> 将 ConcurrencyMode 设置为 Single 指示系统将服务实例一次限制为一个执行线程，从而使您无需处理线程问题。

这意味着服务器端对服务的所有调用都将进入一个唯一的线程。这很好，因为您不必担心多线程，但**也不是那么好，因为如果您使用长操作阻塞一个线程，那么来自您的客户端的其他调用在其处理将无法通过时发生**。因此例外。

ConcurrancyMode = Single 是默认设置。您可以尝试将并发模式设置为 Multiple - 这意味着现在将在随机线程池线程上进行调用，并且如果其中一个正忙于处理请求，则另一个可用于另一个请求。但是由于环境现在是多线程的，您将不得不保护服务器对象不被具有锁或其他同步机制的多线程访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T15:02:46.093

您是否尝试过重新生成服务客户端？可能客户端仍然有一个同步操作的引用，而服务器已经被重新定义为单向/异步。

# iphone - 以编程方式创建的视图中的后退按钮

> ID：10317750
> 
> 赞同：0
> 
> 时间：2012-04-25T14:25:30.860
> 
> 标签：iphone, objective-c, ios

我以编程方式绘制的屏幕很少，我想在我的 UINavigationBar 中添加一个后退按钮。所以我想到了类似的事情：我有一个继承自 UIViewController 的类 - myViewController。所以我创建了一个数组来存储我的视图（myViewController 类对象），并且后退按钮只是将当前屏幕内容从数组重新加载到前一个屏幕。这是这样做的好方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T14:28:16.750

这是`UINavigationController`为了什么。用那个。

还：

> 所以我创建了一个数组来存储我的视图（myViewController 类对象）

视图和视图控制器是完全不同的东西。如果你把它们混在一起，你会遇到很多问题。

# javascript - netbeans 折叠评论块

> ID：10317753
> 
> 赞同：2
> 
> 时间：2012-04-25T14:25:40.737
> 
> 标签：javascript, netbeans

我已经使用netbeans 1 周了，这是一个非常强大的环境，但我发现了一点漏洞。我正在使用 javascript 进行编码，但我无法折叠 scriptdoc 代码（或 nn 一般注释块）。它只适用于第一个评论块，然后只有功能可以折叠（见附图）

![在此处输入图像描述](../Images/b54c817efc06212b55f10aa41ae28464.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T11:53:28.973

在 Netbeans IDE 中，导航到`Tools`-> `Options`-> `Editor`。

在`General`选项卡下，该`Tags and Other Code Blocks`选项可让您折叠评论块。

![Netbeans 设置：折叠代码块](../Images/6e70c1b8b25ba853caafdc022b7e479b.png)

# c++ - c++ windows 服务是否比 .Net windows 服务更稳定？

> ID：10317755
> 
> 赞同：0
> 
> 时间：2012-04-25T14:25:43.193
> 
> 标签：c++, .net, windows-services

我只是想知道是否有任何技术/理论原因使 Windows NT 服务比使用 c++ 而不是 .Net 应用程序创建的更稳定，反之亦然。

实际上，我有两个 Nt 服务，一个是用 cpp 制作的，另一个是用 .Net 应用程序制作的。我观察到两者都在启动模式下显示，但我需要经常（平均每 2 天一次）重新启动由 .Net 创建的服务才能做出响应。当我试图了解 .Net 服务的这种奇怪行为时，我的一些朋友提出了与操作系统内部相关的答案，有人说 .Net 就是这样构建的。我完全不知道 .Net 平台，所以找到这个论坛的原因是我的尝试之一。

谢谢

阿尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:47:46.687

与使用 .NET 相比，使用 C++（如果它是本机的）可能会获得一些性能，但这只是在启动期间。一旦它们都启动并运行，应该没有太大区别。

然而，通过原生 C++（据我现在所记得的）创建服务真的很痛苦，而且花费了相当多的时间。使用 .NET，它更容易和更快。老实说，我从来不需要创建一些超级重要的高速服务。我在 .NET 中创建了很多服务，它们成功地完成了工作。在这些情况下，业务最终结果比实际绩效更重要。

这真的是关于你的需求，但正如评论中有人所说，服务将像程序员写的那样稳定。如果您更愿意在 .NET 中创建用于控制核反应堆的服务，请在 .NET 中进行。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-17T03:32:34.313

C++ 服务或任何 win32 可执行文件将继续在未来和过去的多个版本的窗口中工作。这使 win32 的寿命和几乎不受服务器更改的影响。您的 C++ 服务可能不会对服务器上安装的任何内容有太多或根本没有依赖项。这减少了故障点的数量。

.Net 应用程序非常脆弱，修复失败的 .net 应用程序可能需要花费大量资金。脆弱性来自应用程序对安装在服务器上的 .net 框架版本的挑剔。Microsoft 在 .net 版本上的生命周期很短。.Net 有很多依赖项会增加故障点，例如大量的程序集文件和敏感的配置文件。

总之，由于win32的稳定性和依赖更少，C++/Win32会更加稳定。

# api - 在共享服务器上使用 Twitter API - 即使我正在缓存响应，也超出了速率限制

> ID：10317764
> 
> 赞同：3
> 
> 时间：2012-04-25T14:26:02.577
> 
> 标签：api, twitter, oauth, limit, rate

我编写了一个 php 脚本，它通过为每个帐户提取一个 xml 并将其缓存在我的服务器上来获取 12 个不同 Twitter 帐户的最新状态更新。目前每 30 分钟运行一次。

不幸的是，我不断收到“超出速率限制。客户每小时发出的请求不得超过 150 个。” 错误事件虽然我只从我应该有的 150 个请求中发出 24 个请求。

我认为这是因为我的域位于共享服务器上，而 twitter 正在计算针对我的其他请求。

如何授权我的请求，使我不受标准 IP 限制的限制？

我没有 OAuth 的经验，所以如果可能的话需要逐步说明。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T14:03:59.810

好的，所以我设法在以前没有 API 等经验的情况下充分利用了这项工作。

这是我的分步指南：

**步骤 1.** 创建一个 Twitter 列表。

1.  转到：[https ://twitter.com/username/lists](https://twitter.com/username/lists)
2.  点击“创建列表”
3.  输入详细信息并保存。
4.  转到您希望添加到列表中的 Twitter 用户，然后单击齿轮下拉菜单并选择“从列表中添加或删除”。勾选列表旁边的复选框。

**第 2 步。** 通过以下方式创建 Twitter 应用程序：[https ://dev.twitter.com/apps/new](https://dev.twitter.com/apps/new)

1.  使用您的 Twitter 凭据登录。
2.  为您的应用命名、描述等。
3.  转到设置选项卡并将访问类型更改为读取和写入，然后单击“更新此 Twitter 应用程序的设置”。
4.  单击页面底部的“创建我的访问令牌”。

您现在将拥有消费者密钥、消费者密码、访问令牌和访问令牌密码。记下这些。

**步骤 3.**创建 API 令牌。

1.  [从https://github.com/abraham/twitteroauth](https://github.com/abraham/twitteroauth)下载 Abraham Twitter oAuth 库并将其安装到您的服务器上（我将使用一个名为“twitter”的文件夹）。

2.  创建一个新文件，在 oAuth 文件夹中将其命名为 authorise.php 并将以下代码放入其中（使用生成的密钥代替命名文本）。（将代码放在 < ? PHP 和 ?> 括号之间）。

    ```
    // Create our twitter API object
    require_once("twitteroauth/twitteroauth.php");
    $oauth = new TwitterOAuth('Put-Consumer-Key-here', 'Put-Consumer-secret-here', 
    'Put-Access-Token-here', 'Put-Access-token-secret-here');
    // Send an API request to verify credentials
    $credentials = $oauth->get("account/verify_credentials");
    echo "Connected as @" . $credentials->screen_name;
    // Post our new "hello world" status
    $oauth->post('statuses/update', array('status' => "hello world")); 
    ```

3.  现在，这已授权您的 twitter 应用程序使用 API，并在您的 twitter 帐户上发布了“hello world”状态。

注意：我们之前所做的读/写访问更改允许代码发布状态更新，实际上不需要从 API 中提取列表，但我这样做是为了确保它工作正常。（您可以通过返回“设置”再次关闭此功能）。

**第 4 步** 。创建 PHP 文件以提取您的列表并缓存文件。

1.  创建一个 XML 文件 (YOUR-FILE-NAME.xml) 并将其保存在 oAuth 文件夹中。
2.  创建一个 PHP 文件 (YOUR-PHP-FILE.php) 并将其保存在 oAuth 文件夹中
3.  使用您的 twitter API 密钥、文件名和 twitter 列表详细信息编辑以下代码，并将其保存在您的 PHP 文件中。（将代码放在 < ? PHP 和 ?> 括号内）。

    ```
    /* Twitter keys & secrets here */
    $consumer_key = 'INSERT HERE';
    $consumer_secret = 'INSERT HERE';
    $access_token = 'INSERT HERE';
    $access_token_secret = 'INSERT HERE';

    // Create Twitter API object
    require_once('twitteroauth/twitteroauth.php');
    // get access token and secret from Twitter
    $oauth = new TwitterOAuth($consumer_key, $consumer_secret, $access_token,                 $access_token_secret);
    // fake a user agent to have higher rate limit
    $oauth->useragent = 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.9) Gecko/20071025 Firefox/2.0.0.9';

    // Send an API request to verify credentials
    $credentials = $oauth->get('account/verify_credentials');
    echo 'Connected as @' . $credentials->screen_name . '\n';

    // Show API hits remaining
    $remaining = $oauth->get('account/rate_limit_status');
    echo "Current API hits remaining: {$remaining->remaining_hits}.\n";

    $ch = curl_init();
    $file = fopen("YOUR-FILE-NAME.xml", "w+");
    curl_setopt($ch, CURLOPT_URL,'https://api.twitter.com/1/lists/statuses.xml?slug=INSERT-LIST-NAME&owner_screen_name=INSERT-YOUR-TWITTER-USERNAME-HERE&include_entities=true');
    curl_setopt($ch, CURLOPT_FILE, $file);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_exec($ch);
    curl_close($ch);
    fclose($file);?> 
    ```

4.  将文件路径复制到浏览器中并进行测试。（例如[http://www.yourwebsite.com/twitter/YOUR-PHP-FILE.php](http://www.yourwebsite.com/twitter/YOUR-PHP-FILE.php)）

这应该联系 twitter，将列表作为 XML 文件拉取，并将其保存到 YOUR-FILE-NAME.xml 中。通过打开 XML 文件对其进行测试，它应该具有来自 Twitter 列表中用户的最新状态。

**第 5 步：** 通过 Cron 作业自动运行 PHP 脚本，使其尽可能频繁地运行（每小时最多 350 次）。

1.  打开您的 Cpanel 并单击“Cron 作业”（通常在“高级”下）。
2.  您可以使用常用设置选择脚本的规律性。
3.  在命令字段中添加以下代码：

    **php /home/CPANEL-USERNAME/public_html/WEBSITE/twitter/YOUR-PHP-FILE.php >/dev/null 2>&1**

您的脚本现在将按照您选择的频率运行，从 twitter 中提取列表并将其保存到 YOUR-FILE-NAME.xml 中。

**第 6 步。** 您现在可以从缓存的 XML 文件中提取状态，这意味着您的访问者不会对 API 进行不必要的调用。

如果有人可以提供帮助，我还没有弄清楚如何定位特定的屏幕名称？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T07:31:14.400

a) 不要检查 12 个不同的帐户，创建一个 [public] 列表`https://twitter.com/lists` 并仅检查它 => 减少 12 倍的请求

b) 使用这个很棒的 oAuth 库：`https://github.com/abraham/twitteroauth`并使用 oAuth 请求而不是 unsigned => 你将收到 350 个请求，它们不会受到 IP 限制的影响

# flash - 将所有内容导出为 swf？

> ID：10317767
> 
> 赞同：1
> 
> 时间：2012-04-25T14:26:26.253
> 
> 标签：flash, audio, actionscript, export, embed

我已使用此操作脚本将音乐链接到我的 .fla：

```
public var chpt1Theme:Sound = new Sound(new URLRequest('Interlude1.mp3'));

public var chpt1ThemeSC:SoundChannel; 
```

如何将音乐打包到 swf 中，使 swf 完全独立？当我导出 -> 电影时，声音不包括在内？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:06:50.837

如果您希望将声音文件包含在 SWF 文件中，则需要将其导入/嵌入到 FLA 的库中并引用该声音的类名。以下示例取自我在下面发布的第一个资源：

```
var drum:DrumSound = new DrumSound(); 
var channel:SoundChannel = drum.play(); 
```

以下是一些进一步的资源：

[使用嵌入的声音](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7d24.html)

[使用 Flash Professional - 声音](http://help.adobe.com/en_US/flash/cs/using/WSd60f23110762d6b883b18f10cb1fe1af6-7ce9a.html)

# oracle - oracle db中的条件唯一约束

> ID：10317774
> 
> 赞同：18
> 
> 时间：2012-04-25T14:26:43.373
> 
> 标签：oracle, constraints, unique

我有一种情况，我需要根据另一个列值对列 [属性] 强制执行唯一约束。

例如，我有一个像 Table(ID, EID, Name, ISDeleted) 这样的表

ISDeleted 只能有一个值 null 或 'y'（活动或已删除），我想在 EID 上创建一个唯一约束，仅当 ISDeleted = null 时 ISDeleted，因为我不在乎是否有多个具有相同 id 的已删除记录。请注意，EID 可以有空值。

我为此使用 Oracle DB。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-25T14:29:17.790

您不能创建约束。但是您可以创建一个唯一的基于函数的索引。这利用了 Oracle 不索引 NULL 值这一事实——任何不包含在索引中的行，`isDeleted`因此`NOT NULL`唯一约束将不适用于它们。

```
CREATE UNIQUE INDEX one_not_deleted
    ON table_name( (CASE WHEN isDeleted IS NULL
                         THEN eid
                         ELSE null
                      END) ); 
```

# java - 哪种分析技术最适合分析程序行为

> ID：10317778
> 
> 赞同：3
> 
> 时间：2012-04-25T14:26:48.183
> 
> 标签：java, profiling, behavior

我想通过软件分析来分析应用程序的**运行时**行为。据我所知，有两种基本类型的分析技术。首先是基于样本的分析，其次是仪器。**有人可以告诉我应该使用哪一个吗？**我想分析单个（**java**）应用程序的行为，而不是一个应用程序与另一个应用程序的行为。我不关心性能相关的问题，如 cpu 周期时间、内存分配等。**请推荐一些对我有帮助的工具。**

我非常感谢您对此的任何帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:56:10.987

如果您对控制流感兴趣，那么采样是不合适的（这对于发现性能瓶颈非常有用）。只有仪表才能为控制流提供数据。

为应用程序记录方法级别的时间数据将产生大量数据，除非您仔细定义应该检测哪些类。

[JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html)有一个可能适合您的目的的呼叫跟踪器视图，另请参阅[此问题](https://stackoverflow.com/questions/9881510/multi-threaded-time-based-call-hierarchy)。

免责声明：我公司开发 JProfiler。

# python - 如何对两个多项式求和？在蟒蛇

> ID：10317779
> 
> 赞同：-1
> 
> 时间：2012-04-25T14:26:55.983
> 
> 标签：python

我必须制作一个可以从用户那里获取两个多项式（字符串）来计算结果的程序。问题是在多项式中，程序必须对具有相同幂的系数求和。我必须使用类。我是python的初学者。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T14:43:53.443

你真的想从字符串中解析多项式吗？因为您始终可以将多项式表示为每个项的系数列表。例如

```
[3 0 2 1] 
```

将表示多项式

```
3 + 2*x^2 + x^3 == 0 
```

一旦你有了那个表示，对多项式求和就很简单了。

如果你想接受字符串作为输入，你应该首先从字符串中提取系数并建立一个系数向量，然后继续。

**编辑：**反转多项式的表示，使其在元素*i表示**x^i*的系数的意义上更自然。

# java - 用于注册产品的 Java 客户端-服务器通信

> ID：10317780
> 
> 赞同：0
> 
> 时间：2012-04-25T14:26:58.633
> 
> 标签：java, client, user-registration

我正在寻找有关创建一些产品注册通信的最简单方法的一些建议。我有一个需要每年更新的 Java 桌面应用程序。当用户下载并安装此应用程序（通过 JNLP）时，他们将获得有限的演示版本。客户端上有代码可以“注册”产品并解锁所有功能。

我的下一步是构建服务器端组件。将有一个数据库，其中包含客户 ID 号和有关客户的其他信息。当用户点击注册时，一些联系信息以及一些产品注册ID将被发送到服务器。服务器将根据数据库对此进行检查，然后让客户端确定解锁功能，否则将通知用户注册 ID 无效。这似乎是一件非常标准的事情。那么标准的做法是什么？

我有自己的 VPS 并且正在运行 Tomcat，所以我真的可以自由选择任何方式来实现它。我正计划构建一些 Web 服务，但我以前从未使用过 REST。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T09:37:33.967

使用 REST；REST 只不过是“更好”地使用纯 HTTP。由于您已经在使用 HTTP，因此您已经在进行类似 REST 的调用，并且将这些调用转移到成熟的 REST 将很容易。

实现 REST 调用很容易。你有两种方法：

*   低端：在客户端上使用 URLConnection 对象，在服务器上使用 servlet 并遵循一些关于使用 HTTP 方法和“干净”URL 的 REST 约定（参见[此处](http://en.wikipedia.org/wiki/Clean_URL)）。优点是您不需要 3rd 方库并最大限度地减少占用空间。维护和进化虽然更难。
*   高端：类似 JAX-RS 的框架和规范。使用[Restlet](http://www.restlet.org/)，您可以在几个小时内运行 REST 服务器，而无需部署 servlet 容器。

不要使用 SOAP。您想要使用 SOAP 的唯一原因是您想要使用 WSDL 将您公开的内容进行合同化（您可以对 REST 做同样的事情，例如，请参阅 Amazon 文档）。相信我，SOAP 对于您想要做的事情来说太沉重和混乱了。

# php - 为下拉框选项创建不同的默认值

> ID：10317787
> 
> 赞同：1
> 
> 时间：2012-04-25T14:27:19.513
> 
> 标签：php, javascript, html

我似乎在任何地方都找不到这个。如果它很简单，我很抱歉。

我正在尝试在 html 中制作简单的下拉框，以显示许多留言簿条目。我正在使用 php 来处理数据库请求等。我对这一切都很好。我只是希望能够根据选择的条目数更改选择框上的默认选项。

是否有捷径可寻？我感觉它与一个简单的 javascript 调用有关，但我对这一切还是很陌生。

这是html：

```
<form id="displayform" action="guestbook.php" method="POST" >
Currently Displaying  <select name="display" id="display" onchange="document.getElementById('displayform').submit()">
<option value="10" > 10 </option>
<option value="25" > 25 </option>
<option value="50"> 50 </option>
<option value="ALL"> ALL </option>      
</select>   results per page
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:33:38.573

不需要 javascript，这可以通过 PHP 处理。甚至还可以重构！

```
<?php
  $options = array(10, 25, 50, 'ALL');
  $selOpt = in_array($_POST['display'], $options) ? $_POST['display'] : $options[0];
?>
<form id="displayform" action="guestbook.php" method="POST">
  Currently Displaying
  <select name="display" id="display" onchange="document.getElementById('displayform').submit();">
    <?php foreach ($options as $option){ ?>
    <option value="<?=$option;?>"<?=($selOpt==$option?' select="selected"':'');?>>
      <?=$option;?>
    </option>
    <?php } ?>
  </select>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:32:05.247

您需要`LIMIT`在 SQL 语句中使用该子句来限制查询返回的项目数。

```
<?php
    $limit = (int) $_POST['display'];
    $sql = 'SELECT * FROM guestbook ORDER BY date_enterred LIMIT ' . $limit;
?> 
```

这是分页的一部分。有很多关于如何使用 PHP 执行此操作的好教程，可以通过快速 Google 搜索找到。

# python - 实现顺序尝试例外的pythonic方法是什么？

> ID：10317790
> 
> 赞同：6
> 
> 时间：2012-04-25T14:27:24.240
> 
> 标签：python, nested, try-catch, factory-pattern, sequential

我必须从没有共同逻辑的文件名中解析一些数字。我想使用python的“尝试，你会被原谅”的方式，或者try-except结构。现在我必须添加两个以上的案例。这样做的正确方法是什么？我现在正在考虑嵌套尝试或尝试除通，尝试除通，...哪个更好还是别的什么？工厂方法也许（如何？）？

这必须在未来很容易扩展，因为会有更多的案例。

以下是我想要的（不起作用，因为每次尝试只能存在一个例外）：

```
try:
    # first try
    imNo = int(imBN.split('S0001')[-1].replace('.tif',''))
except:
    # second try
    imNo = int(imBN.split('S0001')[-1].replace('.tiff',''))
except:
    # final try
    imNo = int(imBN.split('_0_')[-1].replace('.tif','')) 
```

**编辑**：

哇，感谢您的回答，但请不要进行模式匹配。我的错，把“一些共同的逻辑”放在开头（现在改为“没有共同的逻辑”，对此感到抱歉）。在上述情况下，模式非常相似......让我添加一些完全不同的东西来说明这一点。

```
except:
    if imBN.find('first') > 0: imNo = 1
    if imBN.find('second') > 0: imNo = 2
    if imBN.find('third') > 0: imNo = 3
    ... 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-25T14:36:03.503

您可以提取通用结构并列出可能的参数：

```
tries = [
    ('S0001', '.tif'),
    ('S0001', '.tiff'),
    ('_0_', '.tif'),
]

for sep, subst in tries:
    num = imBN.split(sep)[-1].replace(subst, '')
    try:
        imNo = int(num)
        break
    except ValueError:
        pass
else:
    raise ValueError, "String doesn't match any of the possible patterns" 
```

### 更新以回应问题编辑

通过使用 lambda，这种技术可以很容易地适应任意表达式：

```
def custom_func(imBN):
    if 'first' in imBN: return 1
    if 'second' in imBN: return 2

tries = [
    lambda: int(imBN.split('S0001')[-1].replace('.tif','')),
    lambda: int(imBN.split('S0001')[-1].replace('.tiff','')),
    lambda: int(imBN.split('_0_')[-1].replace('.tif','')),
    lambda: custom_func(imBN),
]

for expr in tries:
    try:
        result = expr()
        break
    except:
        pass
else:
    # error 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T14:55:11.903

在您的特定情况下，正则表达式将无需执行这些 try-except 块。这样的事情可能会抓住你的情况：

```
>>> import re
>>> re.match('.*(S0001|_0_)([0-9]+)\..*$', 'something_0_1234.tiff').groups()
('_0_', '1234')
>>> re.match('.*(S0001|_0_)([0-9]+)\..*$', 'somethingS00011234.tif').groups()
('S0001', '1234')
>>> re.match('.*(S0001|_0_)([0-9]+)\..*$', 'somethingS00011234.tiff').groups()
('S0001', '1234') 
```

对于您关于串行 try-except 块的问题，Niklas B. 的答案显然是一个很好的答案。

**编辑：** 您正在做的事情称为模式匹配，那么为什么不使用模式匹配库呢？如果正则表达式字符串困扰您，有更简洁的方法可以做到：

```
import re
matchers = []
sep = ['S0001', '_0_']
matchers.append(re.compile('^.*(' + '|'.join(sep) + ')(\d+)\..*$'))
matchers.append(some_other_regex_for_other_cases)

for matcher in matchers:
    match = matcher.match(yourstring)
    if match:
        print match.groups()[-1] 
```

另一种更通用的方式与自定义函数兼容：

```
import re
matchers = []
simple_sep = ['S0001', '_0_']
simple_re = re.compile('^.*(' + '|'.join(sep) + ')(\d+)\..*$')
def simple_matcher(s):
    m = simple_re.match(s)
    if m:
        return m.groups()[-1]

def other_matcher(s):
    if s[3:].isdigit():
        return s[3:]

matchers.append(simple_matcher)
matchers.append(other_matcher)

for matcher in matchers:
    match = matcher('yourstring')
    if match:
        print int(match) 
```

# javascript - jquery ajax调用jsp页面输入未定义

> ID：10317800
> 
> 赞同：0
> 
> 时间：2012-04-25T14:27:59.393
> 
> 标签：javascript, jquery, html, jsp

我正在通过处理下载文件的 jQuery 调用 JSP 页面。

```
$("#download").click(function(e){
    $.get("download.jsp", {filename:"file.txt"},doUpdate());
}); 
```

我的 doUpdate() 是

```
function doUpdate(response){
    console.log('done with jsp ' + response);
} 
```

响应未定义

我知道 JSP 页面正在工作，因为如果我对文件名进行硬编码，页面将正确执行。

在jsp中，我使用以下方法获取文件名：

```
String filename = request.getParameter("filename"); 
```

我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:29:11.723

是的，您没有将数据传递给函数，请尝试：

```
$.get("download.jsp", {filename:"file.txt"}, doUpdate); 
```

或者

```
$.get("download.jsp", {filename:"file.txt"}, function(data) {
  doUpdate(data);
  // more stuff
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:29:33.963

您严重引用处理程序函数

```
$.get("download.jsp", {filename:"file.txt"},doUpdate()); 
```

应该

```
$.get("download.jsp", {filename:"file.txt"},doUpdate); 
```

如果你离开 () 你正在执行函数，它是作为参数传递给 get 方法的返回值

# jquery - 根据选择值jQuery追加输入

> ID：10317804
> 
> 赞同：1
> 
> 时间：2012-04-25T14:28:10.617
> 
> 标签：jquery, input, append

我有一个表单，其中包含 2`<select>`个从 0 到 10 的字段。

我正在尝试根据两个字段值的数量`.append <input>`来字段`#myDiv``<select>`

我已经有了这个：

```
jQuery(function($){
        $('select[name="nb_adultes"], select[name="nb_enfants"]').change(function() {
            var nb = $(this).val(); //the value of select
        });
}); 
```

例如，用户从第一个中选择“2”，`<select>`从第二个中选择“4”，`<select>`因此它将附加：4+2：“6”输入字段到`"#myDiv"`

重要提示：如果可能，附加输入的数量不能高于“10”

希望我清楚，谢谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:45:10.650

一个相当直接的方法：

```
/* Cache selectors, and set limitation variables */
var adults = $("#adults"),
    infant = $("#infants"),
    msgDiv = $("#mydiv"),
    vLimit = 10;

/* Bind to adults and infants some onChange logic */
$(adults).add(infant).on("change", function(){
  /* Determine values, addition, and results */
  var aValue = parseInt( adults.val(), 10 ),
      iValue = parseInt( infant.val(), 10 ),
      result = aValue + iValue,
      differ = result - vLimit;

  /* If the user selected too many, inform them */
  if ( differ > 0 ) {
    /* Invalid amount: x too many. */
    msgDiv.html("Invalid amount: %d too many.".replace( /%d/, differ ));
    return;
  }

  /* Clear msgDiv, fill it with x input elements */
  var i = 0; msgDiv.empty(); 
  while ( i++ < result ) $("<input/>", { id: 'element'+i }).appendTo(msgDiv);
}); 
```

演示：http: [//jsbin.com/etawas/8/edit](http://jsbin.com/etawas/8/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:34:12.980

假设选择框的 id 是：'nb_adultes' 和 'nb_enfants'

```
jQuery(function($){
        $('#nb_adultes, #nb_enfants').change(function() {
            var nb = $('#nb_adultes').val() + $('#nb_enfants').val(); //the value of select
            if(nb >10)
              alert("Sum should not be greater then 10");

        });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T14:47:08.060

```
jQuery(function($) {
    $('select[name="nb_adultes"], select[name="nb_enfants"]').change(function() {
        var total = parseInt($('select[name="nb_adultes"]').val()) + 
                    parseInt($('select[name="nb_enfants"]').val());
        if (total > 10) {
            alert("it cannot be higher than 10");
        } else {
            $("div").empty();
            for(var j=0; j < total; j++) 
              $("div").append('<input type="text" value="'+j+'"/><br />');
        }
        });
    });​ 
```

[演示](http://jsfiddle.net/ZZ3fR/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T14:47:59.203

将这两个值作为数字获取，如果不是数字则重置输入，并且仅在总数小于 10 时更新。

```
jQuery(function($){
  $('select[name="nb_adultes"], select[name="nb_enfants"]').change(function() {

    // the value of select option
    var nb = parseInt($(this).val());

    // the input
    var totalInput = $('#total');

    // if the input is user editable make sure they didn't put a non-numer in there
    if(isNaN(totalInput.val())) totalInput.val('');

    // get the total of the input
    var total = parseInt($('#total').val());

    // add the selected option if its less than 10
    if(total + nb <= 10) totalInput.val(total + nb);

    // do whatever you like or nothing if there are more than 10
    else { alert('more than 10);
  });
}); 
```

# php - php序列化函数解析错误

> ID：10317816
> 
> 赞同：0
> 
> 时间：2012-04-25T14:28:55.593
> 
> 标签：php, notorm

我有这个数组

```
$x = array(
    1 => 16,
    2 => 8
); 
```

和

```
$y = serialize($x); 
```

我正在使用[notorm](http://www.notorm.com/)，现在这个查询

```
$db->table()->update(array('config' => $y)); 
```

查询

```
update table set config = 'a:2:{i:1;i:16;i:2;i:8;}' 
```

但在表中

```
a?:{i?;s?:"16";i?;s?:"8";} 
```

现在的问题是序列化发生了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:37:14.460

确保在您的数据库中，保存数据的字段设置为`utf8_general_ci`（首选）或`latin1_general_ci`

# javascript - 在 2 行之间选择表格行

> ID：10317824
> 
> 赞同：0
> 
> 时间：2012-04-25T14:29:19.373
> 
> 标签：javascript, jquery

快速 js\jquery 问题。

我有一张这样的桌子：

```
<table id="test">
<tr class="divider"><td>Set 1</td></tr>
<tr><td>Row 1</td></tr>
<tr><td>Row 2</td></tr>
<tr><td>Row 3</td></tr>
<tr class="divider"><td>Set 2</td></tr>
<tr><td>Row 4</td></tr>
<tr><td>Row 5</td></tr>
<tr><td>Row 6</td></tr>
<tr class="divider"><td>Set 3</td></tr>
<tr><td>Row 7</td></tr>
<tr><td>Row 8</td></tr>
<tr><td>Row 9</td></tr>
</table> 
```

我只想选择具有“分隔符”类的行之间的 3 行。

我在这里开始了一个jsfiddle：http: [//jsfiddle.net/ZQhBP/1/](http://jsfiddle.net/ZQhBP/1/)

我正在使用 nextUntil 但它似乎无法正常工作

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:41:47.867

`nextUntil()`绝对有效：

```
var pull = $('.divider:first').nextUntil('.divider');
console.log(pull); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ZQhBP/17/)。

并在第一个之后移动这些行并插入到新的表格元素：

```
var pull = $('.divider:first').nextUntil('.divider');
console.log(pull);

$('<table />').insertAfter('table:first').append('<tbody />').html(pull); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ZQhBP/21/)。

而且，如果您想复制/克隆到新表：

```
var pull = $('.divider:first').nextUntil('.divider');
console.log(pull);

$('<table />').insertAfter('table:first').append('<tbody />').html(pull.clone(true,true)); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ZQhBP/27/)。

参考：

*   [`append()`](http://api.jquery.com/append/).
*   [`clone()`](http://api.jquery.com/clone/).
*   [`:first`选择器](http://api.jquery.com/first-selector/)。
*   [`html()`](http://api.jquery.com/html/).
*   [`insertAfter()`](http://api.jquery.com/insertAfter/).
*   [`nextUntil()`](http://api.jquery.com/nextUntil/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:34:55.497

[http://jsfiddle.net/ZQhBP/4/](http://jsfiddle.net/ZQhBP/4/)

`$('#test tr').not('.divider');`

# vba - 在 Excel 2003 vba 中插入新行非常慢

> ID：10317825
> 
> 赞同：4
> 
> 时间：2012-04-25T14:29:21.440
> 
> 标签：vba, excel, excel-2003

我是 vba 的新手——我实际上只做了 3 天。

无论如何，我有一些表格可以从用户那里获取一些数据，然后我将它们写入单独的“日志”表的第一行。我正在使用这个：

```
With Worksheets("Log")
    .Unprotect
    .Range("A2").EntireRow.Insert Shift:=xlDown
    .Range("A2") = varToken
    .Range("B2") = varAction
    .Range("C2") = varLocation
    .Range("D2") = varTracking
    .Range("E2") = Date
    .Range("F2") = Time
    .Range("G2") = varPerson
    .Range("H2") = varOverride
    .Protect
End With 
```

问题是，它会在日志表上滑动半秒钟，然后需要很长时间才能写入。

我将它写入日志的第一行的原因是，我使用 varToken 的 100 个 vlookup（有 100 个不同的令牌要查找）在前面板上汇总了数据，这些数据找到了第一个（即顶部）条目在日志表中。

如果更快的话，我可以写到日志表的底部，但是我需要一个代码来替换 100 个 vlookup，这些 vlookup 将在可能成千上万行中查找最后提到的令牌，并且运行速度很快！

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-25T14:32:03.243

我相信您`Vlookups`正在减慢该过程，因为每次您写入单元格时都会重新计算它们。试试这个

```
With Application
    .ScreenUpdating = False
    .Calculation = xlCalculationManual
End With

With Worksheets("Log")
    .Unprotect
    .Range("A2").EntireRow.Insert Shift:=xlDown
    .Range("A2") = varToken
    .Range("B2") = varAction
    .Range("C2") = varLocation
    .Range("D2") = varTracking
    .Range("E2") = Date
    .Range("F2") = Time
    .Range("G2") = varPerson
    .Range("H2") = varOverride
    .Protect
End With

With Application
    .ScreenUpdating = True
    .Calculation = xlCalculationAutomatic
End With 
```

# mongodb - @DbRef 不会在 spring data mongodb 中自动保存子对象

> ID：10317828
> 
> 赞同：6
> 
> 时间：2012-04-25T14:29:35.327
> 
> 标签：mongodb, spring-data, dbref

我目前正在使用 Spring Data MongoDB 框架的 GA 版本，@DbRef 不会在 spring data mongodb 中自动保存子对象。你能告诉我怎样才能让它工作吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T17:15:11.827

保存子对象不是 Spring Data MongoDB 内置的，因此您必须手动完成，或者您可以扩展[AbstractMongoEventListener](https://docs.spring.io/spring-data/data-mongo/docs/2.0.1.RELEASE/api/org/springframework/data/mongodb/core/mapping/event/AbstractMongoEventListener.html)，正如我在我的文章中描述的那样：[Spring Data MongoDB cascade save on DBRef objects](https://www.javacodegeeks.com/2013/11/spring-data-mongodb-cascade-save-on-dbref-objects.html)

# javascript - jQuery 数量（输入 val）+ / - 按钮在 IE7 上不起作用

> ID：10317829
> 
> 赞同：1
> 
> 时间：2012-04-25T14:29:37.587
> 
> 标签：javascript, jquery, jquery-selectors, internet-explorer-7

这是我的代码：http: [//jsfiddle.net/9Vvpj/4/](http://jsfiddle.net/9Vvpj/4/)

请帮我弄清楚为什么这在 IE7 以外的所有东西中都能正常工作！

它看起来像我的变量：

```
var quantity = quantity_input.val(); 
```

未定义

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T14:31:39.427

您不能在单个文档上拥有多个 ID - 这就是您的代码无法正常工作的原因....

试试这个：

```
 var this_id = jQuery(this).data('input'); 
```

这使用该[`data()`函数](http://api.jquery.com/data/)来获取 HTML 中的“数据输入”属性。我也更新了 HTML，而不是

```
<div id="CartProduct-118" class="quantityDown">-</div> 
```

做

```
<div data-input="CartProduct-118" class="quantityDown">-</div> 
```

[工作示例](http://jsfiddle.net/9Vvpj/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:35:28.910

不要对不同的元素使用相同的 ID。即使在支持它的浏览器中，这也不是 DOM 应该如何工作的。

如果您使用此代码查找您的输入，您甚至不需要 ID：

```
var quantity_input = $(this).parent().siblings(".quantity") 
```

明确指定您正在使用数字也是一个好主意：

```
var quantity = parseInt(quantity_input.val()); 
```

请注意，此方法在使用开发者工具切换到 IE7 时有效：http: [//jsfiddle.net/9Vvpj/5/](http://jsfiddle.net/9Vvpj/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T14:42:23.490

我建议你切换到这个组件：http: [//view.jqueryui.com/master/demos/spinner/default.html](http://view.jqueryui.com/master/demos/spinner/default.html)

要使其在 webkit 浏览器中工作，您必须将其添加到 css：

```
 input[type=number]::-webkit-inner-spin-button,
                input[type=number]::-webkit-outer-spin-button
                {
                    -webkit-appearance: none;
                    margin: 0;
                } 
```

# asp.net-mvc - Response.Flush with MVC 结果不起作用

> ID：10317832
> 
> 赞同：8
> 
> 时间：2012-04-25T14:29:46.403
> 
> 标签：asp.net-mvc, download

我们正在实施长时间运行的过程，以使用 asp.net 3 将数据库内容下载为 xml。

总文档生成时间约为 3-5 分钟，我们希望尽快回复第一个字节。我们已经覆盖`System.Web.Mvc.FileResult`并正在尝试执行以下操作：

```
protected override void WriteFile(HttpResponseBase response)
{
   Stream outputStream = response.OutputStream;
   byte[] header = xmlExportService.XmlHeader();
   response.Flush();
   outputStream.Write(header, 0, header.Length);
   response.Flush();
   //// some long running generation here
} 
```

在 Windows 7 下的本地 iis 上，我正在浏览器中打开保存文件对话框。在生产中，windows server 2008 R2 在生成整个文件之前没有对话框。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T22:12:44.100

不确定这是否对任何人都有帮助，但如果您启用了 HTTP 压缩，则 Response.Flush 将无法“工作”。我们在我们的服务器上启用了动态压缩，对 Response.Flush 的调用就会挂起。经过一些研究，这与服务器正在等待所有输出的事实有关，因此它可以“压缩并发送它”。

由于我们使用的是 MVC，我正在考虑使用一个属性来动态控制是否为非静态页面启用压缩。现在，我们刚刚摆脱了视图中的 Response.Flush 调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T15:26:52.073

你看过这个帖子吗？同样的问题，接受的答案，可能会有所帮助？

*   [MVC 3 Response.Flush 不起作用](https://stackoverflow.com/questions/7007896/mvc-3-response-flush-does-not-work)
*   [Response.Flush 不工作 ASP.NET](https://stackoverflow.com/questions/344430/response-flush-not-working-asp-net)

# java - 使用多个数据库目录对 Hibernate 进行单元测试

> ID：10317834
> 
> 赞同：4
> 
> 时间：2012-04-25T14:29:55.030
> 
> 标签：java, hibernate, testing, schema, dbunit

我在测试查询多个目录/模式的 Hibernate 应用程序时遇到问题。

生产数据库是 Sybase，除了映射到默认目录/模式的实体之外，还有两个映射如下的实体。因此，总共有三个目录。

```
@Table(catalog = "corp_ref_db", schema = "dbo", name = "WORKFORCE_V2")
public class EmployeeRecord implements Serializable {
}

@Table(catalog = "reference", schema = "dbo", name="cntry")
public class Country implements Serializable {
} 
```

这一切都在应用程序中正常工作，没有任何问题。但是，当进行单元测试时，我通常的策略是使用 HSQL，并将 hibernate 的 ddl 标志设置为 auto 并让 dbunit 填充表。

当表都在同一个模式中时，这一切都很好。

然而，由于添加了这些额外的表，测试被破坏了，因为 DDL 不会运行，因为 HSQL 只支持一个目录。

```
create table corp_ref_db.dbo.WORKFORCE_V2
user lacks privilege or object not found: CORP_REF_DB 
```

如果只有两个目录，那么我认为可以通过将 HSQL 数据库中的默认目录和模式更改为明确定义的目录和模式来解决这个问题：

是否有任何其他可能适用的内存数据库，或者是否有任何策略可以让测试在 HSQL 中运行。

我曾想过提供一个 orm.xml 文件，该文件指定默认目录和模式（覆盖任何注释并在默认目录/模式中创建所有定义的表）但是在执行 DDL 时似乎没有观察到这些覆盖，即我得到与上面相同的错误。

本质上，然后我想运行我现有的测试，或者以某种方式创建在映射中定义的表，或者以某种方式覆盖实体级别的目录/模式定义。

我想不出任何方法来达到这两种结果。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:39:28.810

我相信[H2](http://www.h2database.com/html/main.html)支持目录。我自己没有在其中使用过它们，但是[Information Schema](http://www.h2database.com/html/grammar.html#information_schema)中有一个 CATALOGS 表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-12T12:30:02.103

我设法通过[IGNORE_CATALOGS](https://h2database.com/html/commands.html#set_ignore_catalogs)属性和版本 1.4.200在 H2 中实现了类似的功能

但是，他们文档中的 url 示例似乎对我不起作用，因此我在 schema.xml 中添加了一条语句： `SET IGNORE_CATALOGS = true;`

# c++ - 在各种帧中使用 this=0x0 的 C++ 回溯

> ID：10317840
> 
> 赞同：3
> 
> 时间：2012-04-25T14:30:27.383
> 
> 标签：c++, mips

我在 mips 多核系统中有一个程序，我从核心得到一个回溯真的很难弄清楚（至少对我来说），我想也许其他核心之一写入内存，但并不是所有的堆栈都被破坏是什么造成的对我来说更困惑。

在第 2 帧中，这是 NULL，在第 0 帧中，这也是 NULL（核心转储的原因）。

这是（部分）回溯：

```
#0 E::m (this=0x0, string=0x562f148 "", size=202) at E.cc:315
#1 0x00000000105c773c 在 P::e (this=0x361ecd00, string=0x562f148 "", size=202, offset=28) at P.cc:137
#2 0x00000000105c8c5c in M::e (this=0x0, id=7 '\a', r=2, string=0x562f148 "", size=202, oneClass=0x562f148 "", secondClass=0x14eff439 "",
偏移量=28) 在 M.cc:75                                         
#3 0x0000000010596354 in m::find (this=0x4431fd70, string=0x562f148 "", size=202, oneClass=0x14eff438 "", secondClass=0x14eff439 "",
                   up=false) 在 A.cc:458                    
#4 0x0000000010597364 在 A::trigger (this=0x4431fd70, triggerType=ONE, string=0x562f148 "", size=0, up=true) at A.cc:2084
#5 0x000000001059bcf0 在 A::findOne (this=0x4431fd70, index=2, budget=0x562f148 "", size=202, up=true) at A.cc:1155
#6 0x000000001059c934 in A::shouldpathNow (this=0x4431fd70, index=2, budget=0x562f148 "", size=202, up=false, startAt=0x0, short=)
   在 A.cc:783    
#7 0x00000000105a385c 在 A::shouldpath (this=0x4431fd70, index=2, rbudget=, rsize=, up=false,
                   直接=) 在 A.cc:1104

```

关于 m::find 函数

```
    第442章
    第443章
    第444章  
    445   
    446                                                                            
    第447章
    448                                                            
    449 unsigned int const offset = value - engine_->getData();  
    450 451 int ret=未知；            
    452 米*p；                    
    第453章
    454 ret == 未知 && 匹配！= NULL;                                                 
    第455章
    456 p = (M*) 匹配；   
    第457章            
    第458章

```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T15:10:35.873

`this=0x0`实际上很容易发生。例如：

```
E *instance = NULL;
instance->method(); 
```

`this`内将为 NULL `method`。

无需假设内存已损坏或堆栈已被覆盖。事实上，如果堆栈的其余内容似乎有意义（并且您似乎认为它们确实如此），那么堆栈可能没问题。

不必寻找内存损坏，而是检查您的逻辑以查看是否有未初始化的 (NULL) 指针或引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:34:45.473

无法查看所有代码，很难想象发生了什么。您是否还可以添加 M::e() 和 P::e() 的代码，或者至少添加重要部分。

可以解决所有问题的方法是在 m::find() 中添加一个 NULL 检查，如下所示：

```
456     p = (M*)match;   
        if(!p) { return; /* or do whatever */ }
457     if(p->needMore()){            
458       ret = p->e(id_, getIndex(), value, len, hClass, fHClass, offset); 
```

如果`p`为 NULL，我预计它会崩溃调用`p->needMore()`，但根据该方法的作用，它可能不会崩溃。

# html - 在为 iBooks 构建 epub 时，如何使用无序列表 (UL)、有序列表 (OL) 和列表项 (LI)？

> ID：10317841
> 
> 赞同：0
> 
> 时间：2012-04-25T14:30:27.650
> 
> 标签：html, css, epub, ibooks

我不明白 iBooks 的行为...

```
<p class="myClass"> ... </p>
<ul>
    <li class="myClass"> ... </li>
</ul> 
```

请记住，`myClass`在`font-family : Verdana, sans-serif`任何浏览器（或我测试过的 epub 阅读器）中，文本中的文本`p`与 中的文本匹配`li`，但在 iBooks 中则不匹配。iBooks 似乎以某种方式覆盖了 CSS：按`p`原样格式化，但`li`具有不同的`font-family`.

这也适用于有序列表。

有人有什么想法吗？

谢谢。

# iphone - 爆发出多个循环

> ID：10317844
> 
> 赞同：1
> 
> 时间：2012-04-25T14:30:32.617
> 
> 标签：iphone, objective-c, ios, cocoa, avaudioplayer

在我的项目中，我有多个从 iPhone 麦克风录制的录音，我用这段代码循环播放

```
-(IBAction)loop1{ 
NSError *error;
audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:temporaryRecFile error:&error];
    audioPlayer.numberOfLoops = 100; 

[audioPlayer play];

} 
```

并停止此代码

```
-(IBAction)loopstop1{ 

audioPlayer.numberOfLoops = 0; 

[audioPlayer stop];

} 
```

当不止一个录音循环但是这个停止方法只停止设置为循环的最后一个录音时，我想知道是否有办法打破所有音频循环，或者打破这些特定的循环，因为我只是设法停止我循环的最后一个录音。

感谢您的任何帮助或建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:34:51.107

**我会做什么：**

1.  创建一个`NSMutableArray`来保存`audioPlayer`s
2.  将`AVAudioPlayer`对象添加到数组

    ```
    AVAudioPlayer* newLoop = [[AVAudioPlayer alloc] initWithContentsOfURL:temporaryRecFile 
                                                                    error:&error];
    newLoop.numberOfLoops = 100; 

    [loopsArray addObject:newLoop]; 
    ```

3.  将索引传递给每个启动/停止函数，以知道`audioPlayer`要启动/停止哪个。

* * *

***提示：**要停止所有这些，只需`stop`在每个循环存储中调用该方法`loopsArray`*

# c++ - qplaintextedit 行距

> ID：10317845
> 
> 赞同：4
> 
> 时间：2012-04-25T14:30:35.430
> 
> 标签：c++, qt

是否可以编辑 qplaintextedit 中每行之间的间距/边距？

我曾尝试使用普通的 html/css 标签（行高）编辑样式表，但似乎没有什么不同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T07:02:38.903

几天前，我的一位同事试图用 Qt 4.7.4 解决类似的问题。他发现我们可以使用类[QTextBlockFormat](https://doc.qt.io/qt-5/qtextblockformat.html)设置行距：

> 行间距由 setLineHeight() 设置，并通过 lineHeight() 和 lineHeightType() 检索。可用的行距类型在 LineHeightTypes 枚举中。

不幸的是，这个功能是在 Qt 4.8 中引入的。

因此，如果您可以使用 Qt 4.8、QTextBlockFormat、QTextDocument 和 QTextEdit 而不是 QPlainTextEdit，您可以设置行距。

# json - 泽西岛和 JSON

> ID：10317847
> 
> 赞同：2
> 
> 时间：2012-04-25T14:30:49.590
> 
> 标签：json, rest, jaxb, jersey

我已经使用 jersey 在 JAVA 中构建了一个 REST Web 服务。一切正常，直到我将 MediaType 从 application_xml 切换到 application_json。

如果我使用 XML，那么一切正常：

**客户端：**

```
public static CoResponse rO = new CoResponse();

rO = service.path("check-in").accept(MediaType.APPLICATION_XML).put(CoResponse.class,  rO); 
```

**服务器端：**

```
@PUT
@Consumes(MediaType.APPLICATION_XML)
public CoResponse newCheckin(JAXBElement<CoResponse> obj){
    CoResponse newObj = obj.getValue();
    //DO SOMETHING....
    return newObj
} 
```

当我将 MediaType 更改为 Application_JSON 时，我收到 415 unsupported type 错误：

**客户端：**

```
public static CoResponse rO = new CoResponse();
rO = service.path("check-in").accept(MediaType.APPLICATION_JSON).put(CoResponse.class,  rO); 
```

**服务器端：**

```
@PUT
@Consumes(MediaType.APPLICATION_JSON)
public CoResponse newCheckin(JAXBElement<CoResponse> obj){
    CoResponse newObj = obj.getValue();
    //DO SOMETHING....
    return newObj
} 
```

使用 JSON 时还有其他事情要做吗？谢谢你。

* * *

**我使用的类如下：**

共同响应对象：

```
@XmlRootElement
public class CoResponse {

    private int code;
    private String errorMessage;

    //Datastore
    public CoDataList<CoDataMap<String, String>> data = new CoDataList<CoDataMap<String, String>>();
} 
```

CoDataList 对象：

```
public class CoDataList <V> implements Map<Integer, V>{
    int nextIndex;

    public Map<Integer, V> data = new HashMap<Integer,V>();

} 
```

CoDataMap 对象：

```
public class CoDataMap <K, V> implements Map<K, V>{ 
    public Map<K, V> data = new HashMap<K,V>();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T09:32:32.830

我已经设法通过在响应调用中调用以下方法来解决我的问题：

```
.type(MediaType.APPLICATION_JSON_TYPE) 
```

正如 Spencer-Kormos 建议的那样，我更改的所有内容都是 web.xml 和客户端中的 init-params，并将上述行添加到调用中。

现在客户端看起来如下：

```
rO = service.path("check-in")
                .type(MediaType.APPLICATION_JSON_TYPE)
                .accept(MediaType.APPLICATION_JSON)
                .put(CoResponse.class, rO); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:08:27.057

我相信您需要将 JSON POJO 支持的 init-param 添加到 Jersey 的 web.xml 配置中：

[http://jersey.java.net/nonav/documentation/latest/json.html#json.pojo.approach.section](http://jersey.java.net/nonav/documentation/latest/json.html#json.pojo.approach.section)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T16:20:13.393

你可以这样做，添加 @Produces 注释：

```
@PUT
@Consumes(MediaType.APPLICATION_JSON)
@Produces(MediaType.APPLICATION_JSON)
public CoResponse newCheckin(JAXBElement<CoResponse> obj){
} 
```

# ruby-on-rails - ActiveRecord to_json：有条件地包含关联

> ID：10317849
> 
> 赞同：5
> 
> 时间：2012-04-25T14:30:53.017
> 
> 标签：ruby-on-rails

当我在模型上使用 .to_json 时，我试图找到一种有条件地包含关联模型的方法。

在一个简化的例子中，假设有以下两个模型：

```
class Foo < ActiveRecord::Base
  has_many :bars
end

class Bar < ActiveRecord::Base
  belongs_to :foo
  attr_accessible :bar_type
end 
```

我目前有：

```
f = Foo.find "3"
j = f.to_json(:include => { :bars => {:some, :attributes}} 
```

这有效。我需要找到一种方法只包含具有 bar_type == 'what?' 的 bar 实例

我希望有一种方法可以有条件地拉入 bar 实例，或者甚至使用范围来限制 json 输出中包含的 bar。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T16:03:47.580

如果条件没有改变，你可以这样做：

```
class Foo < ActiveRecord::Base
  has_many :bars
  has_many :what_bars, :class_name=>"Bar", 
                       :foreign_key=>:foo_id, 
                       :conditions=>"bars.bar_type = 'what'"
end

f = Foo.find "3"
j = f.to_json(:include => :what_bars) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:58:39.747

也许通过使用类似 json_builder [https://github.com/dewski/json_builder](https://github.com/dewski/json_builder)

# django - 如何在 django orm 中使用 where > date？

> ID：10317850
> 
> 赞同：0
> 
> 时间：2012-04-25T14:31:01.877
> 
> 标签：django

如何在 django orm 中使用 where > date ？

这是工作：

```
 res = Prog.objects.filter(end = datetime.now()).order_by('-start') 
```

但这不起作用：

```
 res = Prog.objects.filter(end > datetime.now()).order_by('-start') 
```

为什么 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T14:33:47.300

阅读[`documentation`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#gt)：

### gt

比...更棒。

例子：

```
Entry.objects.filter(id__gt=4) 
```

SQL 等价物：

```
SELECT ... WHERE id > 4; 
```

在您的情况下，它将是：

```
res = Prog.objects.filter(end__gt=datetime.now()).order_by('-start') 
```

# javascript - 如何让用户每个帖子只投票一次？

> ID：10317853
> 
> 赞同：-1
> 
> 时间：2012-04-25T14:31:17.330
> 
> 标签：javascript, post, button, limit, vote

我怎样才能只允许用户对帖子投赞成票或反对票一次。这是主题文件夹中的 vote.tpl。我需要改变什么？

```
<script type="text/javascript">
   $('.unlove').click(function () {
      var id = $(this).attr('entryId');
      if ($(this).hasClass('unloved')) {
         $(this).removeClass('unloved');
         ulikedeg($(this).attr('entryId'), 0, -1);
      } else {
         $(this).addClass('unloved');
         if ($('#post_love_' + id).hasClass('loved')) {
            ulikedeg($(this).attr('entryId'), -1, 1);
            $('#post_love_' + id).removeClass('loved');
         } else {
            ulikedeg($(this).attr('entryId'), 0, 1);
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:34:47.650

您必须在您的数据库（或存储“投票”的任何位置）中跟踪该用户是否对某事进行了投票。

在每一代页面上，您都需要检查用户投票的内容，并用适当的值标记按钮。在按钮上设置一个“已经投票”的类，这将禁用它的输入，或者其他一些方法。

# sql-server-2008-r2 - 数据库未显示在 Management Studio 中，但数据文件存在于 DATA 目录中

> ID：10317856
> 
> 赞同：1
> 
> 时间：2012-04-25T14:31:27.893
> 
> 标签：sql-server-2008-r2

TL;DR 一些在我的本地 MSSql Express DATA 目录中有数据文件的数据库停止出现在 Management Studio 中。

我在工作时在我的桌面上继承了一个开发环境，其中包括一个 MSSql Express 2008 实例。现在，我知道我可能已经对配置做了一些事情，但是对于我的一生来说，我不记得做过任何可能产生我所看到的效果的事情。

我早上上班，发现一个应用程序出现一堆错误，说它无法连接到它的数据库。当我启动 Management Studio 检查发生了什么时，我再也看不到列出的数据库了。检查数据库的 DATA 目录、mdb 文件和日志文件是否都存在。

这是在 Windows 7 工作站上安装的 SQL Server Express 2008 r2 上的。

有人知道我可以做些什么来恢复数据库吗？（是的，我对 MSSql 一无所知）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T14:36:54.087

右键单击“数据库”->“附加...”，然后选择您的 *.mdf 文件，您的数据库应该会再次出现在您的工作室中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-06T04:28:23.193

这可能是权限问题；最好在除 c:\（比如 d:\DBFiles）之外的任何驱动器中创建一个文件夹。

右键单击文件夹 --> 属性 --> 安全 --> 并给予完全控制。

运行此脚本。

创建数据库 MyAdventureWorks

```
ON (FILENAME = ' D:\DBFiles\AdventureWorks2012_Data.mdf'), 

(FILENAME = ' D:\DBFiles\AdventureWorks2012_Log.ldf')     FOR ATTACH; 
```

# xcode - iOS UIAutomation Simulator 5.0：目标应用程序似乎已经死亡

> ID：10317858
> 
> 赞同：19
> 
> 时间：2012-04-25T14:31:33.483
> 
> 标签：xcode, instruments, ios-ui-automation

我正在尝试使用`UIAutomation`仅适用于 Simulator 5.0 的记录功能。
在 Simulator 4.3 上使用`UIAutomation`时，它运行完美。在 Simulator 5.0 上从 Xcode 运行我的应用程序时，它运行完美。这排除了应用程序本身崩溃的可能性。

我尝试通过`Reset Content and Settings`. 我尝试从我的应用程序的“派生数据”文件夹或模拟器应用程序文件夹中选择目标，但没有任何效果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-11T07:05:45.650

有时会发生旧代码仍然存在的情况。

1.  尝试通过单击`menu Product --> Clean`或清理您的项目`Command-Option-Shift-K`
2.  `close x-code` 和`clean data from ~/Library/Developer/Xcode/DerivedData`手动。

# javascript - 无法通过 JavaScript 单击隐藏按钮

> ID：10317862
> 
> 赞同：0
> 
> 时间：2012-04-25T14:31:50.730
> 
> 标签：javascript, jsf, richfaces, ajax4jsf, jsf-1.2

```
function openEditDialog(){
    window.showModalDialog('/atmew/pages/asset/searchInclude/assetEdit.mew');
    document.getElementById('reData').click();
    alert('after rerender');
} 
```

然后有一个按钮：

```
<a4j:commandLink id="edit" action="#{searchController.openAssetEdit}" 
    oncomplete="openEditDialog()" immediate="true" ajaxSingle="true">
    <h:graphicImage url="/images/edit_icon.png" </h:graphicImage>
    <f:param name="arId" id="arId" value="#{vo.assetReceiving.id}"/>
</a4j:commandLink> 
```

其他按钮

```
<a4j:commandButton id="reData" reRender="data_grid" style="visibility: hidden;" onclick="javascript:alert('rerender clicked');"></a4j:commandButton> 
```

reData 按钮没有被点击。IE 的控制台不显示任何消息。这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T14:34:24.803

您需要使用 JSF 生成的 HTML 元素 ID，而不是 JSF 组件 ID。

在浏览器中打开页面，右键单击并*查看源代码*并在 HTML 源代码中找到 JSF 生成的 HTML`<input type="submit">`元素`<a4j:commandButton>`。它看起来像这样：

```
<input type="submit" id="someFormId:reData" ... /> 
```

您需要在 JavaScript 中准确使用该 ID，因为 JavaScript 在 HTML DOM 树上工作，而不是在 JSF 组件树上工作。

```
document.getElementById('someFormId:reData').click(); 
```

此外，您最好使用`<a4j:commandLink>`而不是`<a4j:commandButton>`为了开始`click()`工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T14:42:13.043

是否可以通过 onclick 调用`document.getElementById("my-id").click()`？至少在 Chrome 中这样做会向我显示错误“没有方法‘点击’”。或者在使用 jsf 时这可能吗？（编辑：对不起，可能是一个愚蠢的问题，但我从未使用过 jsf）

我认为在本机节点上人为地创建点击事件的唯一可靠方法是通过浏览器机制来实现：

```
function doEvent(element, eventType, event) {
  // modern browsers
  if (document.createEvent) {
    event = document.createEvent("MouseEvents");
    event.initMouseEvent(eventType, true, true, element.ownerDocument.defaultView,
                0, 0, 0, 0, 0, false, false, false, false, 0, null);
    element.dispatchEvent(event);

  // older browsers (IE6/7 for exmaple)
  } else if (element.fireEvent) {
    element.fireEvent("on"+eventType);
  }
}

doEvent(document.getElementById("my-id"), "click"); 
```

关于 ID 考虑[BalusC的回答](https://stackoverflow.com/users/157882/balusc)

# mysql - 在mysql中将一列从一个表复制到另一个（两个不同的数据库）

> ID：10317863
> 
> 赞同：0
> 
> 时间：2012-04-25T14:31:57.087
> 
> 标签：mysql, copy

我试图将一列从一个表复制到另一个表（在两个不同的数据库中）

我尝试了以下查询：

```
update des_db.mytable as des 
set col=  (select col from src_db.mytable as src where src.id = db.id) 
```

并加入这两个表。
在这两种解决方案中，我都收到错误“锁的总数超过锁表大小”。
我将“innodb_log_buffer_size”增加到 32M，但它不起作用。

我想知道是否有任何解决方案可以做到这一点。

重要提示：源表实际上是我的备份，它的行数与另一个表的行数相同。（666,666 条记录）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T16:03:49.903

这样它应该可以工作：

```
UPDATE
des_db.mytable 
INNER JOIN src_db.mytable ON des_db.mytable.id = src_db.mytable.id
SET
des_db.mytable.col = src_db.mytable.col; 
```

不幸的是，我现在无法对其进行测试，但我很确定这是可行的。别名也应该起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-09T09:10:50.977

```
UPDATE database1.table1, database2.table1
SET database1.table1.columnA = database2.table1.columnA
WHERE database1.table1.id = database2.table1.id; 
```

# autofac - 未调用 Autofac OnRelease()

> ID：10317868
> 
> 赞同：2
> 
> 时间：2012-04-25T14:32:11.413
> 
> 标签：autofac

我有一个类 Foo，它用于配置容器并充当另一个类 Bar 的工厂，该类用作 Windows 服务的入口点。

Bar 类被注入了一个 Baz 实例，该实例打开了一个套接字连接。

在 Foo 中，IBaz 配置了一个 OnActivated() 来打开连接和一个 OnRelease() 来关闭连接。

验收测试使用 Foo 创建 Bar 并验证一些预期结果。问题是测试永远不会完成，因为 Baz 连接永远不会关闭。这是由于 OnRelease() 从未被调用。

我的理解是，一旦 Foo 超出范围并被垃圾收集，容器应该调用 OnRelease() 委托。

为什么这不会发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:22:29.463

您需要使用生命周期范围来控制组件的发布。Autofac 中的生命周期管理始终是明确的，并且不依赖于 GC。

在这种情况下，可能是容器本身扮演了这个角色——处理容器会导致`OnRelease`方法被调用。读起来有点长，[但这](http://nblumhardt.com/2011/01/an-autofac-lifetime-primer)涵盖了细节。

# data-mining - 决策树与朴素贝叶斯分类器

> ID：10317885
> 
> 赞同：52
> 
> 时间：2012-04-25T14:33:17.050
> 
> 标签：data-mining, decision-tree, bayesian-networks

我正在对不同的数据挖掘技术进行一些研究，并遇到了一些我无法弄清楚的事情。如果有人有任何想法，那就太好了。

在哪些情况下使用决策树更好，而在其他情况下使用朴素贝叶斯分类器更好？

为什么在某些情况下使用其中之一？而另一个在不同的情况下？（通过查看其功能，而不是算法）

有人对此有一些解释或参考吗？

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-04-25T15:20:26.113

决策树非常灵活、易于理解且易于调试。他们将处理分类问题和回归问题。因此，如果您尝试预测（红色、绿色、向上、向下）之类的分类值，或者您尝试预测 2.9、3.4 等连续值，决策树将处理这两个问题。决策树最酷的事情之一可能是它们只需要一个数据表，并且他们将直接从该数据构建一个分类器，而无需进行任何前期设计工作。在某种程度上，无关紧要的属性不会被选为拆分，最终会被修剪，因此它非常容忍废话。开始它设置它并忘记它。

然而，不利的一面。简单的决策树更倾向于过度拟合训练数据，因此其他技术意味着您通常必须进行树修剪并调整修剪过程。您没有任何前期设计成本，但您将在调整树木性能时收回成本。此外，简单的决策树将数据划分为正方形，因此围绕事物构建集群意味着它必须拆分很多以包含数据集群。拆分很多会导致复杂的树并增加您过度拟合的可能性。高大的树会被修剪掉，因此虽然您可以围绕数据中的某些特征构建集群，但它可能无法在修剪过程中存活下来。还有其他技术，例如**代理拆分**这让您可以一次沿多个变量拆分，从而在空间中创建既不是水平也不是垂直的拆分（ 0 < slope < infinity ）。很酷，但是你的树开始变得更难理解，而且实现这些算法也很复杂。提升和随机森林决策树等其他技术可以表现得很好，有些人认为这些技术对于从决策树中获得最佳性能至关重要。这又增加了更多的东西来理解和使用来调整树，因此还有更多的东西需要实现。最后，我们向算法添加的越多，使用它的障碍就越高。

朴素贝叶斯要求您手动构建分类。没有办法只是扔一堆表格数据并让它选择它将用于分类的最佳特征。选择重要的功能取决于您。决策树将从表格数据中为您选择最佳特征。如果朴素贝叶斯有办法选择特征，那么您将接近使用使决策树像那样工作的相同技术。给出这个事实意味着您可能需要将朴素贝叶斯与其他统计技术相结合，以帮助指导您找到最适合分类的特征以及可能使用决策树的特征。朴素贝叶斯将作为连续分类器回答。有一些技术可以使其适应分类预测，但是它们会根据概率来回答，例如 (A 90%, B 5%, C 2.5% D 2\. 5%）贝叶斯可以很好地执行，并且它几乎没有过度拟合，因此不需要修剪或处理网络。这使得它们更容易实现算法。然而，它们更难调试和理解，因为所有的概率都会乘以 1000 倍，所以你必须小心测试它是否符合你的预期。当训练数据不包含所有可能性时，朴素贝叶斯表现得非常好，因此它可以在数据量少的情况下非常好。与朴素贝叶斯相比，决策树在处理大量数据时效果更好。s 次，因此您必须小心测试它是否符合您的预期。当训练数据不包含所有可能性时，朴素贝叶斯表现得非常好，因此它可以在数据量少的情况下非常好。与朴素贝叶斯相比，决策树在处理大量数据时效果更好。s 次，因此您必须小心测试它是否符合您的预期。当训练数据不包含所有可能性时，朴素贝叶斯表现得非常好，因此它可以在数据量少的情况下非常好。与朴素贝叶斯相比，决策树在处理大量数据时效果更好。

朴素贝叶斯在机器人技术和计算机视觉中被大量使用，并且在这些任务上做得很好。在这些情况下，决策树的表现非常糟糕。通过查看数百万张扑克牌来教决策树识别扑克牌的效果非常糟糕，因为皇家同花顺和四边形的出现非常少，以至于经常被删掉。如果它被从生成的树中剪除，它将错误地分类那些重要的手（回想上面对高大树的讨论）。现在想想如果你想用这个来诊断癌症。癌症不会大量发生在人群中，并且更有可能被修剪掉。好消息是这可以通过使用权重来处理，因此我们将获胜的手或患有癌症的权重高于失败的手或没有癌症，这会将其提升到树上，因此它不会被修剪掉。

决策树很简洁，因为它们告诉您哪些输入是输出的最佳预测因子，因此决策树通常可以指导您查找给定输入与输出之间是否存在统计关系以及该关系的强度。生成的决策树通常不如它所描述的关系重要。因此，当您了解数据时，可以使用决策树作为研究工具，这样您就可以构建其他分类器。

如果您在使用决策树和朴素贝叶斯解决问题之间犹豫不决，通常最好测试每一个。构建一个决策树并构建一个朴素贝叶斯分类器，然后使用您拥有的训练和验证数据进行测试。哪一个表现最好将更有可能在该领域表现更好。并且将其中的每一个与 K 近邻 (KNN) 预测器相结合总是一个好主意，因为在某些情况下，k-nearest 已被证明优于它们，而且 KNN 是一种易于实现和使用的简单算法。如果 KNN 的性能比其他两个好，那就去吧。

一些资料来源：

基于 CART 的决策树手册。这本书涵盖了 CART 算法，还讨论了决策树、权重、缺失值、代理拆分、提升等。 [http://www.amazon.com/Classification-Regression-Wadsworth-Statistics-Probability/dp/0412048418](https://rads.stackoverflow.com/amzn/click/com/0412048418)

对 CART 的更温和介绍 [https://www.youtube.com/watch?v=p17C9q2M00Q](https://www.youtube.com/watch?v=p17C9q2M00Q)

算法比较 - 请注意，KNN、决策树、C4.5 和 SVM 在大多数测试中都做得很好。 [http://www4.ncsu.edu/~arezaei2/paper/JCIT4-184028_Camera%20Ready.pdf](http://www4.ncsu.edu/~arezaei2/paper/JCIT4-184028_Camera%20Ready.pdf)

算法的另一个比较 - Boosted Decision Trees 和 random 以 KNN 居中榜首： [http ://www.cs.cornell.edu/~caruana/ctp/ct.papers/caruana.icml06.pdf](http://www.cs.cornell.edu/~caruana/ctp/ct.papers/caruana.icml06.pdf)

各种技术的另一个很好的总结： [http ://www.quora.com/What-are-the-advantages-of-different-classification-algorithms](http://www.quora.com/What-are-the-advantages-of-different-classification-algorithms)

# wordpress - 更改 Wordpress 图库结构

> ID：10317889
> 
> 赞同：0
> 
> 时间：2012-04-25T14:33:24.057
> 
> 标签：wordpress, gallery, structure

我已经阅读了许多关于样式化 Wordpress 画廊的帖子和文章，但我想改变结构。下面是一个普通画廊代码的例子。我想删除`<dl> <dt> <br>`并用我自己的元素替换它们。知道我可以在 Wordpress 文件结构中的哪里执行此操作吗？

```
<div id="gallery-1" class="gallery galleryid-1 gallery-columns-1 gallery-size-thumbnail">
<dl class="gallery-item">
<dt class="gallery-icon">
    <a href="http://mydomain.com/2012/01/hello-world/dsc_0003/" title="DSC_0003"><img width="376" height="250" src="http://mydomain.com/wp-content/uploads/2012/01/DSC_0003-376x250.jpg" class="attachment-thumbnail" alt="DSC_0003" title="DSC_0003"></a>
</dt>
</dl>
<br style="clear: both">
<dl class="gallery-item">
<dt class="gallery-icon">
    <a href="http://mydomain.com/2012/01/hello-world/dsc_0003/" title="DSC_0003"><img width="376" height="250" src="http://mydomain.com/wp-content/uploads/2012/01/DSC_0003-376x250.jpg" class="attachment-thumbnail" alt="DSC_0003" title="DSC_0003"></a>
</dt>
</dl>
<br style="clear: both">
</div> 
```

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:39:21.293

如果确实想进一步自定义默认帖子库，您可以向 post_gallery 添加[过滤器](http://codex.wordpress.org/Function_Reference/add_filter)以生成您自己的输出。如果 post_gallery 过滤器返回任何内容，则默认画廊输出将被忽略。作为起点，请查看位于 /wp-includes/media.php 中的画廊短代码功能。它使用[get_posts](http://codex.wordpress.org/Template_Tags/get_posts#Show_attachments_for_the_current_post)获取附件并输出它们。您可以将该函数完全复制到您的 functions.php 文件中并更改名称并将其用作过滤器。

# android - 从 phonegap 拨打电话后重新关注主要活动

> ID：10317890
> 
> 赞同：4
> 
> 时间：2012-04-25T14:33:33.707
> 
> 标签：android, cordova

我正在构建一个基于 PhoneGAP 的应用程序，我需要在其中拨打电话，然后在 5 秒后返回我的应用程序。

关于拨打电话的部分工作正常。为了让 Android 通过呼叫而不只是拨号盘打开，拨打电话的代码放在 com.phonegap.api.Plugin 中，看起来像

```
private void callNumber(String phoneNumber){
    Uri calling = Uri.parse("tel:" + phoneNumber);
    Intent callIntent = new Intent(Intent.ACTION_CALL, calling);
    this.ctx.startActivity(callIntent);
} 
```

要重新启动应用程序，我`AsyncTask`在调用 RestartTask 之前启动了一个。因为这段代码存在于插件中，所以我必须使用`Activity.runOnUiThread`来启动 RestartTask，但除此之外没有什么特别的。

在 RestartTask 中，只`doInBackground`实现了方法，它所做的只是休眠 5 秒，然后运行以下意图：

```
Intent restartIntent = new Intent(DialerPlugin.this.ctx.getBaseContext(), MainActivity.class);
restartIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
DialerPlugin.this.ctx.startActivity(restartIntent); 
```

这`MainActivity`是从 PhoneGAP 派生的主类，它扩展了`DroidGap`.

设置 FLAG_ACTIVITY_CLEAR_TOP 和 FLAG_ACTIVITY_SINGLE_TOP 正是人们所说的[这里](http://groups.google.com/group/android-developers/browse_thread/thread/5eb400434e2c35f4?pli=1)和[这里](https://stackoverflow.com/questions/3410578/android-how-to-give-focus-to-a-background-activity-belonging-to-a-different-tas)应该设置，如果要“重新激活”活动，这意味着使用当前实例化活动的任务而不是创建新任务，并且活动与它的运行状态一起重用，而不是创建一个新的活动实例。`onNewIntent`当操作系统传递意图时，会调用“旧”活动。

但是，当电话呼叫处于活动状态并且似乎意图未传递给 时，没有任何反应`MainActivity`，直到我挂断其中一部电话。奇怪的。

如果我将标志更改为 include `FLAG_ACTIVITY_CLEAR_TOP`，则会重新启动应用程序任务或主要活动。但是由于这是PhoneGAP，两者都对应于重新启动应用程序，这不是我想要的。我还可以让 Android 在另一个任务中启动我的应用程序的一个全新实例，该任务被赋予焦点。

但是，我不能让 Android 将焦点重新放在我的主要活动上。我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T13:04:41.130

经过数小时的黑客攻击，我设法解决了这个问题。似乎，一旦一个新的 android 任务获得控制权，这就是使用内置拨号器拨打电话时发生的情况，从拨打电话的任务开始的后台任务也失去了启动新活动的特权，除非它正在启动新任务中的活动。

这意味着，AsyncTask 在进行调用之前从 Activity 启动，然后稍微休眠以确保拨号器任务/Activity 处于打开状态，它必须启动一个新任务才能重新获得焦点。再次启动 Cordova 活动不是一个选项，因为这将有效地重新启动整个应用程序，因此解决方案是进行精简重启任务，该任务立即完成。

在 Cordova 插件中，可以放置以下内部类：

```
protected class RestartTask extends AsyncTask<Void, Void, Void>{
    protected RestartTask() { }

    @Override
    protected Void doInBackground(Void... unused){
        try {
            // pass time so the built-in dialer app can make the call
            Thread.sleep(MyPlugin.restartDelay);
        }
        catch (InterruptedException localInterruptedException)
        {
            Log.d("MyPlugin", "RestartTask received an InterruptedException");
        }

        return null;
    }

    @Override
    protected void onPostExecute(Void justEyeCandy){
        super.onPostExecute(justEyeCandy);

        // Start the RestartActivity in a new task. This will snap the phone out of the built-in dialer app, which
        // has started in it's own task at this point in time. The RestartActivity gains control and finishes
        // immediately, leading control back to the activity at the top of the stack in the
        // app (where the user came from when making the call).
        Intent restartIntent = new Intent(MyPlugin.this.ctx.getApplicationContext(), RestartActivity.class);
        restartIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        MyPlugin.this.ctx.getApplicationContext().startActivity(restartIntent);
    }
} 
```

这`AsyncTask`可以通过调用在插件中触发：

```
this.ctx.runOnUiThread(new Runnable(){
    public void run(){
        try {
            RestartTask restartTask = new RestartTask();
            restartTask.execute();
        }
        catch (Exception e) {
            Log.d("MyPlugin", "Exploded when trying to start background task: " + e.getMessage());
        }
    }
}); 
```

AsyncTask 在新任务中启动的类是：

```
public class RestartActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // the prototype RestartActivity there is a possibility that this will be the root activity of the app.
        // If that is the case, this activity will boot the main activity of the app in a new task, before signing off.
        // However, this is not the case for this app, as restarts are only used once a call diversion has taken place,
        // form within the app.
        if (isTaskRoot())
        {
            // Start the app before finishing
            String packageName = this.getBaseContext().getPackageName();
            Intent startAppIntent = this.getBaseContext().getPackageManager().getLaunchIntentForPackage(packageName);
            startAppIntent.addFlags(Intent.FLAG_ACTIVITY_PREVIOUS_IS_TOP);
            startActivity(startAppIntent);
        }

        // Now finish, which will drop the user in to the activity that was at the top of the task stack
        finish();
    }
} 
```

# java - jndi + spring 教程

> ID：10317893
> 
> 赞同：0
> 
> 时间：2012-04-25T14:33:44.717
> 
> 标签：java, spring-mvc, jdbc, jndi

我是新手`JNDI`，`Spring MVC`是否有任何教程或博客链接可以帮助我了解如何使用 spring 配置 jndi 以连接 mysql。

我需要使用 jndi 全局资源连接我的 spring 应用程序，但我不明白如何使用 spring 配置它？

我指的是[JNDI 资源 HOW-TO](http://tomcat.apache.org/tomcat-7.0-doc/jndi-resources-howto.html#JDBC_Data_Sources)。

有什么教程可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:42:39.510

假设您对 Spring 有足够的了解，可以在没有 JNDI 的情况下设置 Spring MVC 应用程序，那么我将向您介绍[参考文档](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/xsd-config.html)，第 C.2.3 节。jee 模式将帮助您将 bean 连接到 JNDI 资源。

# ssas - 在 MDX 中对 IIF 求和

> ID：10317908
> 
> 赞同：1
> 
> 时间：2012-04-25T14:34:42.080
> 
> 标签：ssas, mdx

是否可以在 MDX 中汇总 IIF 语句？

这是我正在尝试做的一个例子：

```
With
Member [dim something].[group].[Summed] as
Sum(
iif( [dim something].[date one] = [dim date].[specific date],1,0)
   )

Select  [dim something].[group].[summed] on 0,
        [dim date].[specific date].members on 1

From    [Cube] 
```

我知道这不起作用，只是想展示我正在尝试做的事情。我想评估一个条件并根据该条件返回 1 或零。然后求和或计算它返回的次数为 1

MDX 相当新，来自 SQL 背景，它非常不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:48:45.600

如果`[dim something].[date one]`您的查询只有一个日期，那么它将类似于以下内容

```
SELECT [Measures].[Some count] on 0
FROM [CUBE]
WHERE [dim date].[specific date] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T16:20:30.970

很难知道您真正想要什么，但是 SSAS 上有 mdx 函数可以根据日期对值进行求和。

主要的是年初至今：

```
Sum(YTD([Dimension].[Calendar].CurrentMember),[Measures].[summed]) 
```

# php - 不刷新/离开页面更新记录

> ID：10317912
> 
> 赞同：1
> 
> 时间：2012-04-25T14:34:55.093
> 
> 标签：php, jquery, mysql, ajax

我有一个 PHP 页面，里面有一个表格。

该表填充了来自 MySQL 数据库的记录。表（房屋）的一个字段可以包含两个值：`0`和`1`。

当学生是`housed`该字段的值时，该字段的值为 1，否则为 0。在表中，我想使用带有 O/I的**JQUERY UI 按钮（如开关）。**

单击按钮时，需要更新 MySQL 表中的值，并且应该`("checked")`在 JQUERY UI 按钮的右侧显示一个图标，如果值为 1，则该图标应该消失。

我假设我需要 ajax 来做到这一点？
谁能告诉我这是否可以做到？也许怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T14:37:28.593

是的，可以做到

这里有一个例子[http://openenergymonitor.org/emon/node/107](http://openenergymonitor.org/emon/node/107)

它说

> 1.  在您的服务器上创建一个名为 api.php 的 php 脚本
> 2.  复制并粘贴以下示例并保存：

```
<?php 

  //--------------------------------------------------------------------------
  // Example php script for fetching data from mysql database
  //--------------------------------------------------------------------------
  $host = "localhost";
  $user = "root";
  $pass = "root";

  $databaseName = "ajax01";
  $tableName = "variables";

  //--------------------------------------------------------------------------
  // 1) Connect to mysql database
  //--------------------------------------------------------------------------
  include 'DB.php';
  $con = mysql_connect($host,$user,$pass);
  $dbs = mysql_select_db($databaseName, $con);

  //--------------------------------------------------------------------------
  // 2) Query database for data
  //--------------------------------------------------------------------------
  $result = mysql_query("SELECT * FROM $tableName");          //query
  $array = mysql_fetch_row($result);                          //fetch result    

  //--------------------------------------------------------------------------
  // 3) echo result as json 
  //--------------------------------------------------------------------------
  echo json_encode($array);

?> 
```

然后

> 1.  在同一目录中创建一个名为 client.php 的 html 脚本，其中包含以下内容：

```
<!---------------------------------------------------------------------------
Example client script for JQUERY:AJAX -> PHP:MYSQL example
---------------------------------------------------------------------------->

<html>
  <head>
    <script language="javascript" type="text/javascript" src="jquery.js"></script>
  </head>
  <body>

  <!-------------------------------------------------------------------------
  1) Create some html content that can be accessed by jquery
  -------------------------------------------------------------------------->
  <h2> Client example </h2>
  <h3>Output: </h3>
  <div id="output">this element will be accessed by jquery and this text replaced</div>

  <script id="source" language="javascript" type="text/javascript">

  $(function () 
  {
    //-----------------------------------------------------------------------
    // 2) Send a http request with AJAX http://api.jquery.com/jQuery.ajax/
    //-----------------------------------------------------------------------
    $.ajax({                                      
      url: 'api.php',                  //the script to call to get data          
      data: "",                        //you can insert url argumnets here to pass to api.php
                                       //for example "id=5&parent=6"
      dataType: 'json',                //data format      
      success: function(data)          //on recieve of reply
      {
        var id = data[0];              //get id
        var vname = data[1];           //get name
        //--------------------------------------------------------------------
        // 3) Update html content
        //--------------------------------------------------------------------
        $('#output').html("<b>id: </b>"+id+"<b> name: </b>"+vname); //Set output element html
        //recommend reading up on jquery selectors they are awesome 
        // http://api.jquery.com/category/selectors/
      } 
    });
  }); 

  </script>
  </body>
</html> 
```

# air - Adobe 在一个安装程序中播放多个应用程序

> ID：10317920
> 
> 赞同：5
> 
> 时间：2012-04-25T14:35:27.713
> 
> 标签：air, installation

有没有办法使用单个安装程序安装多个空气应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-13T06:34:27.967

您可以使用像 InstallShield 这样的 3rd 方工具，我认为这会对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-12T11:45:40.877

`.airinstall.cfg`通过将 AIR 应用程序条目放在一行中，用逗号分隔等，在其中定义多个条目将不起作用。安装程序无法启动，至少在 Mac OS X 上是这样。

# ajax - 在调用 actionListener 之前 Ajax 组件更新？

> ID：10317922
> 
> 赞同：0
> 
> 时间：2012-04-25T14:35:32.110
> 
> 标签：ajax, jsf, primefaces, actionlistener

我正在使用 PrimeFaces`<p:dialog>`启动弹出 html 页面并`<p:commandButton>`关闭它：

这是按下确定按钮时我所做的：

```
<p:commandButton id="submitButton" 
    value="OK" 
    actionListener="#{MultiFileSelectMgmtBean.actionOk}" 
    update=":formID:fileTreeID" 
    oncomplete="dlg1.hide();"/> 
```

问题是`fileTreeID`在动作监听器完成之前更新。我如何强制`actionOk()`先被调用，然后再`fileTreeID`被更新？

**编辑**：

问题是弹出页面 B ( `BackingBeanB`) 需要计算并保存父页面 A 在其`BackingBeanA::BackingBeanA`构造函数中加载和使用的一些值。发生的情况是父页面 A 是在子页面 B 调用它*之前*`BackingBeanB::actionOk()`构建的。需要更新的组件`fileTreeID`在页面 A 中，并且依赖于页面 A 构造函数中计算的值，因此它使用旧值进行更新，而不是使用要计算的新值进行更新`BackingBeanB::actionOk()`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:18:35.080

您的 bean 显然在请求范围内。而是将 bean 放在视图范围内。

```
@ManagedBean
@ViewScoped
public class BeanA {} 
```

```
@ManagedBean
@ViewScoped
public class BeanB {} 
```

这样，只要您与同一个视图交互并且不会在每个 HTTP 请求上重建，bean 就会一直存在。

在调用操作*之前*`update`绝对不会执行。支持 bean 的可能构造不一定只在呈现响应期间执行。它可能已经在恢复视图阶段发生。

# jquery - 使用 jQuery 右对齐货币文本

> ID：10317923
> 
> 赞同：0
> 
> 时间：2012-04-25T14:35:33.417
> 
> 标签：jquery

我一直在寻找无济于事的解决方案。虽然我找到了类似的解决方案，但我没有遇到任何符合我要求的东西。

我想使用一点 Jquery 来右对齐包含 $ 符号的 td 标记中的任何文本。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:38:33.117

```
$("table tr td:contains($)").css("text-align", "right"); 
```

[**-- 看演示 --**](http://jsfiddle.net/Curt/S5dJ3/)

# android - 我们可以用一个 Activity 管理多个屏幕吗

> ID：10317926
> 
> 赞同：0
> 
> 时间：2012-04-25T14:35:38.453
> 
> 标签：android, android-activity, screen

我只是想知道我们如何使用单个活动来管理多个屏幕，或者我们是否需要为每个屏幕创建不同的活动。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:45:49.063

您可以`setContentsView()`使用同一活动的不同布局进行调用，因此您甚至可以动态更改布局。您可以在活动的启动意图中传递一个额外的值，然后根据该额外值在 onCreate() 中选择一个布局。但是对于不同的屏幕可能更好的不同活动，除非对 UI 和逻辑的更改很小

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:44:18.997

如果是全屏视图，您应该为每个屏幕创建不同的活动。这很好，因为它分解了功能并使您的代码更加模块化。如果您真的想拥有一个由它控制的多个屏幕的活动，那么您有三个选项。

1.  如果您正在使用[兼容性库](http://developer.android.com/sdk/compatibility-library.html)，请使用[片段](http://developer.android.com/reference/android/app/Fragment.html)和[片段活动](http://developer.android.com/reference/android/support/v4/app/FragmentActivity.html)，或者如果您的目标是 3.0 或更高版本，则使用常规活动来管理多个片段。
2.  拥有一个具有多个视图的活动，当您想要切换屏幕时只需更改视图。
3.  使用[ActivityGroup](http://developer.android.com/reference/android/app/ActivityGroup.html)（已弃用）来启动由单个活动控制的多个活动。

# javascript - javascript 正则表达式 - 我非常简单的正则表达式有什么问题？

> ID：10317927
> 
> 赞同：2
> 
> 时间：2012-04-25T14:35:40.093
> 
> 标签：javascript, regex

我想以 html 形式验证电子邮件地址。我对正则表达式知之甚少。

验证很简单，只是为了匹配`any_symbols@any_symbols.two_to_eight_symbols`模式。

这是我正在尝试使用的正则表达式`^.+@.+\..{2,8}$`。然而它不起作用，它验证了 pattern `any_symbols@four_symbols`。

注意：不要担心这种简单的验证，在服务器端我正在做`filter_var`（php）并将令牌发送到该电子邮件。当输入的电子邮件地址符合一些理智的模式时，只需要在表单上启用按钮 :)

**编辑**我在问题中提到的那些模式“any_symbols ...”只是我试图输入的文本表示。这不是我在输入字段中输入的内容 :) 通常我输入“test@test.com”或“blabla@hehe.haha”等 :)

**EDIT2**实际代码：

```
 var email_regex = new RegExp("^.+@.+\..{2,8}$");
if ($target.val().match(email_regex) !== null){
    $button.removeAttr('disabled').removeClass('disabled');
}
else{
    $button.attr('disabled', 'disabled').addClass('disabled');
} 
```

**EDIT3** **发现问题！** 这不是正则表达式本身，而是我将正则表达式传递给正则表达式函数的方式......应该是

```
 new RegExp(/^.+@.+\..{2,8}$/); 
```

不是

```
new RegExp("^.+@.+\..{2,8}$"); 
```

正如我所说，这整个正则表达式对我来说很新:))

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:48:23.763

不是 Javascript 专家，但根据您的定义，`any_symbols@any_symbols.two_to_eight_symbols`我认为这可能有效：

```
^[^@]+@[^.]+\..{2,8}$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:54:14.620

假设真实电子邮件地址的正则表达式并不简单，因为它应该符合 RFC 标准。

但是，如果这对您有用，我使用它没有问题：

```
// The regex: /^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/

// To test it:
var regex = new RegExp(/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/);

if( regex.test( your_string ) ){ ... } // returns true if valid 
```

如果你真的需要接受任何符号，你可以使用 Birei 发布的正则表达式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T15:02:10.603

您需要转义斜线：

```
'any_symbols@four_symbols'.match('^.+@.+\\..{2,8}$');
                                        ^^ 
```

否则，JavaScript 将读取`\.`为未知的转义序列并[忽略斜杠](https://developer.mozilla.org/en/JavaScript/Guide/Values,_Variables,_and_Literals#Escaping_characters)：

> 对于未列出的字符 [...]，前面的反斜杠将被忽略，但这种用法已被弃用，应避免使用。

（该死的，这很难发现......）

# java - Java客户端-服务器/一线程多客户端

> ID：10317928
> 
> 赞同：2
> 
> 时间：2012-04-25T14:35:41.157
> 
> 标签：java, multithreading, client

首先，我不太确定如何解释这一点而不会让人感到困惑，所以我会尽量让它简单。作为两人游戏的一部分，我有一个服务器应用程序将两个客户端“配对”在一起。发生的方式是，当第一个客户端连接到服务器时，接受套接字连接，使用该客户端创建一个新的 ClientProtocol 线程但未启动。当另一个客户端连接到服务器时，他被添加到前一个线程中，然后启动该线程。线程知道两个输入流和两个输出流，每个客户端一个。但是，当我尝试从客户端或服务器端读取时，什么都没有发生。这适用于单个线程中的单个客户端。这是一些代码：

服务器端（主线程）

```
public static Queue<ContestProtocol> contesters;

public static void main(String[] args) throws IOException {
    ServerSocket serverSocket = null;
    contesters = new LinkedList<ContestProtocol>();

    try {
        serverSocket = new ServerSocket(4444);
    } catch (IOException e) {
        System.err.println("Could not listen on port: 4444.");
        System.exit(-1);
    }

    while (true) {
        Socket socket = serverSocket.accept();

        ObjectInputStream ois;
        ObjectOutputStream oos;

        try {
            ois = new ObjectInputStream(socket.getInputStream());
            oos = new ObjectOutputStream(socket.getOutputStream());

            synchronized (contesters) {
                if (contesters.size() == 0) {
                    Contester contester1 = new contester(ois, oos);
                    contesters.add(new ContestProtocol(contester1));
                } else {
                    Contester contester2 = new Contester(ois, oos);
                    contesters.poll().hook(contester2).start();
                }
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

服务器端（竞赛协议）

```
private Contester contester1, contester2;

public ContestProtocol(Contester contester1) {
    super("ContestProtocol");
}

public ContestProtocol hook(Contester contester2) {
    this.contester2 = contester2;
    return this;
}

public void run() {
    try {
        contester1.getOOS().writeInt(-1);
        contester2.getOOS().writeInt(-2);
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

服务器端（竞赛者）：

```
public Contester(ObjectInputStream ois, ObjectOutputStream oos) {
    this.ois = ois;
    this.oos = oos;
}

public ObjectInputStream getOIS() {
    return ois;
}

public ObjectOutputStream getOOS() {
    return oos;
} 
```

客户端：

```
try {
            socket = new Socket(serverAddr, 4444);
            oos = new ObjectOutputStream(socket.getOutputStream());
            ois = new ObjectInputStream(socket.getInputStream());
            int selectedChampion = ois.readInt();
} catch (Exception e) {
                e.printStackTrace();
} 
```

ContestProtocol 线程没有问题地完成执行，但两个客户端都挂在 readInt() 上。我不明白为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:42:48.570

您应该循环您的客户端输入流。

```
while(true){
if(ois.avaible() > 0)
ois.readInt();
} 
```

提示：使用 netty 研究异步网络以获得更好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:02:18.920

这在访问资源时必须执行互斥锁或信号量问题：您正在使用的流（在这种情况下是输出流和输入流）正在读取和写入相同的资源。因为所有这些进程都发生在一个继续的线程上，所以它们的线程相互中断，并在另一个线程上创建等待进程。
一种解决方案是，您在流对象上注册事件监听器，以便每当一个完成时，另一个只会启动。

# jquery - Jquery CSS 如何使用边距：0 自动

> ID：10317929
> 
> 赞同：3
> 
> 时间：2012-04-25T14:35:44.573
> 
> 标签：jquery, css

我是 Jquery 的新手。我想知道我们如何使用 margin: 0 auto; jquery 脚本中的 CSS 代码。有人可以帮我吗？这是代码：

```
<style>
#fixed-bar {
    padding: 0;
    background-color: black;
    z-index: 100;
}
</style>
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js'></script>

<script>
$(function () {
  $("#fixed-bar")
    .css({
        "position": "fixed",
        "width": "960px",
        "margin": "0 auto",
        "top": "0px",

})
    .hide();
  $(window).scroll(function () {
    if ($(this).scrollTop() > 400) {
      $('#fixed-bar').fadeIn(200);
    } else {
      $('#fixed-bar').fadeOut(200);
    }
  });
});
</script>
<div id='fixed-bar'>
  Hello
</div> 
```

其实我想居中的酒吧。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:43:47.740

你设置的一切都是正确的。但是您不能`margin: auto`将具有以下内容的元素居中`position: fixed`：

[居中位置：固定元素](https://stackoverflow.com/questions/2005954/margin-to-center-with-position-fixed)

你也可以用 jQuery 做到这一点：

[使用 jQuery 使 DIV 在屏幕上居中](https://stackoverflow.com/questions/210717/using-jquery-to-center-a-div-on-the-screen)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:47:02.100

您不能在 jQuery 中使用速记 CSS，您必须分别设置每个边距。

```
css({
    "marginTop": "0",
    "marginRight": "auto",
    "marginBottom": "0",
    "marginLeft": "auto"
}) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-25T14:54:51.423

你可以试试这个：

**HTML：**

```
<div id="fixed-bar">
    <p>Test</p>
</div> 
```

**CSS：**

```
body {
    position : relative;
}

#fixed-bar {
    padding: 0;
    background-color: black;
    z-index: 100;
    width: 960px;
} 
```

**JavaScript：**

```
$("#fixed-bar").css({
                "position" : "absolute",
                "left" : (($(window).width() - $("#fixed-bar").outerWidth()) / 2) + $(window).scrollLeft() + "px" })
               .hide();

$(window).scroll(function () {
    if ($(this).scrollTop() > 400) {
        $('#fixed-bar').fadeIn(200);
    } else {
        $('#fixed-bar').fadeOut(200);
    }
}); 
```

这样，无论屏幕大小如何，您的元素都将水平居中。不要忘记在您的 HTML 中包含 jQuery。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-25T14:44:59.823

有更好的方法使用 jQuery 将 div 居中，例如将其设置为绝对位置并找到其宽度、视口宽度以及根据这些数字设置偏移量：

```
$('.mydiv').css("left", (($(window).width() - this.outerWidth()) / 2) + $(window).scrollLeft() + "px"); 
```

# c++ - x64 性能与 x86 相比

> ID：10317932
> 
> 赞同：4
> 
> 时间：2012-04-25T14:35:52.643
> 
> 标签：c++, performance, windows-7, x86, 64-bit

我用 C++ 编写了这个小程序来检查 CPU 负载情况。

```
#include <math.h>
#include <stdio.h>
#include <stdlib.h>
#include <windows.h>
#include <time.h>
int main()
{

    double x = 1;
    int t1 = GetTickCount();
    srand(10000);

    for (unsigned long i = 0; i < 10000000; i++)
    {
        int r = rand();
        double l = sqrt((double)r);
        x *= log(l/3) * pow(x, r);
    }

    int t2 = GetTickCount();
    printf("Time: %d\r\n", t2-t1);
    getchar();
} 
```

我在 win7 x64 上为 x86 和 x64 编译了它。
出于某种原因，当我运行 x64 版本时，它在大约 3 秒内完成运行，
但是当我尝试使用 x86 版本时，它花了 48 (!!!) 秒。
我尝试了很多次，总是得到类似的结果。
什么可能导致这种差异？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-25T14:52:04.133

查看带有`/Ox`（最大优化）的汇编器输出，x86 和 x64 构建之间的速度差异是显而易见的：

```
; cl /Ox /Fa tick.cpp
; x86 Line 17: x *= log(l/3) * pow(x, r)
fld     QWORD PTR _x$[esp+32]
mov     eax, esi
test    esi, esi
; ... 
```

我们看到 x87 指令正在用于此计算。将此与 x64 构建进行比较：

```
; cl /Ox /Fa tick.cpp
; x64 Line 17: x *= log(l/3) * pow(x, r)
movapd  xmm1, xmm8
mov     ecx, ebx
movapd  xmm5, xmm0
test    ebx, ebx
; ... 
```

现在我们看到使用了 SSE 指令。

您可以通过`/arch:SSE2`尝试和*按摩*Visual Studio 2010 来生成类似的指令，但看起来 64 位编译器只是为您手头的任务生成~~更好更快的汇编。~~

最后，如果您放宽浮点模型，x86 和 x64 的性能几乎相同。

计时，不科学的 3 最佳：

*   x86, `/Ox`: 22704 滴答声
*   x64, `/Ox`: 822 滴答声
*   x86, `/Ox /arch:SSE2`: 3432 滴答声
*   x64, `/Ox /favor:INTEL64`: 1014 滴答声
*   x86, `/Ox /arch:SSE2 /fp:fast`: 834 滴答

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-25T14:57:35.823

原因确实与SSE有关。`/arch:SSE2`VS 中的 64 位发行版默认生成 SSE2 指令，但您必须使用switch显式启用它以进行 32 位构建。当您这样做时，您将获得 32 位和 64 位构建的可比运行时间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-25T14:43:12.950

这里的许多可能性与 x86 与 x64 几乎没有关系。一种明显的可能性是大多数（全部？）编译器使用 SSE 进行浮点运算，其中大多数通常在 x86 模式下使用 8087 样式的指令。由于您的代码在浮点上很重，这可能会产生重大影响。

另一种可能性是，在为 x64 编写或重写的过程中，他们注意到/修复了代码生成器中的一些问题，这些问题至少在某些情况下可以生成更好的代码。

虽然它看起来在这里并不适用，但一些代码也从增加的大小和/或 64 位模式下可用的寄存器数量中受益匪浅。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-09T16:57:47.103

Part of it is definitely the SSE, but there's a huge reason why x64 uses SSE mode: all AMD64 CPUs are required to have SSE2\. Another part could also be the increased register count

# java - 将一种格式的记录映射到另一种格式的最佳方法是什么？

> ID：10317933
> 
> 赞同：0
> 
> 时间：2012-04-25T14:35:54.370
> 
> 标签：java, data-structures, mapping

我的记录由纯文本表示。例如：-

```
//Record in format A
Header|meta.1|meta.2|...
body|data.1|data.2|...

//Now I want to convert it to record in format B
Meta=[meta.1, meta.2]
Content=[data.1, data.2]
Summary=[{meta.1, data.1}, {meta.2, data.2}]
//condition is possible
type=if meta.1==TYPE1 then T1 
```

上述格式仅作为示例。我正在询问有关在不同格式之间转换记录的一般想法。

我知道我可以首先以第一种格式解析记录并将结果存储在某处，然后以 Java 中的第二种格式填充记录。

但我正在寻找一种更易于维护、更可扩展和更健壮的更好方法。是否可以在配置/模板文件中编写所有映射规则，当我使用它时，只需将数据放入并获得结果。当映射发生变化时，我唯一需要做的就是修改相应的配置/模板文件。

欢迎任何想法。谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:56:10.567

听起来像我的翻译。

[http://www.eaipatterns.com/MessageTranslator.html](http://www.eaipatterns.com/MessageTranslator.html)

# maven - 为什么 maven 不将发布视为最新快照？

> ID：10317934
> 
> 赞同：1
> 
> 时间：2012-04-25T14:35:54.233
> 
> 标签：maven, dependencies, release, snapshot

我有一个依赖于项目 B 的项目 A。项目 B 的版本号为 1.0.0-SNAPSHOT 已经有一段时间了。在我们发布版本号为 1.0.0 的项目 B 后，我们从存储库中删除了所有旧快照，因为它占用了服务器上的大量空间来保留 836 个旧快照。但是，项目 A 现在失败了，因为它再也找不到项目 B 的 1.0.0-SNAPSHOT 版本。

**问题：**为什么 maven 不认为 1.0.0 版本与快照同样有用，而只是采用它呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:44:07.333

好吧，因为这就是它的工作方式和设计方式。实际上，1.0.0 版本是 1.0.0-SNAPSHOT 版本但发布并不是那么明显，因为对此没有强烈的要求。可能有一些 SNAPSHOT 版本从未发布，或者最终版本的工件没有 SNAPSHOT（因为它们没有被部署）。

这些实际上是 2 个不同的版本，因此未经您的许可不应自动切换它们。事实上，Maven 很聪明，可以猜测 1.0.0 可能是 1.0.0-SNAPSHOT 的最终版本，并在发布过程中提出这一建议（by `maven-release-plugin`），但只要您开发您的代码，它就完全符合您的要求，并且你想要 1.0.0-SNAPSHOT 版本，正如你在 POM 中需要的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:44:49.390

发布只是不等同于快照 :( 快照本质上是“开发”构建，因此 Maven 不会尝试并聪明地知道要获取哪个。您要么必须将快照放回存储库，要么更改您的项目取决于发布版本，特别是 1.0.0。

# ios - 移除 iOS 模拟器插件

> ID：10317935
> 
> 赞同：3
> 
> 时间：2012-04-25T14:35:56.197
> 
> 标签：ios, xcode, ios-simulator

当我在模拟器中运行我的 iPhone 应用程序时，我想停止接收此错误消息：

> iOS Simulator 5.0 (v272) 尚未使用插件 iPhone Simulator Capture 1.1.2 (v1) 进行测试。作为预防措施，它尚未加载。请联系插件开发人员以获取更多信息。

我`iPhone Simulator Capture`很久以前就安装了插件。现在我不需要或想要这个插件。

`create-plugins-directory.sh`我从[github 项目](https://github.com/davbeck/iPhone-Simulator-Capture/tree/master/Installer)中阅读了安装脚本，以获取有关插件可能位于何处的线索。但是，此脚本创建的目录是空的。也许在 iOS 模拟器使用的一些 plist 中引用了该插件。**如何卸载此插件并停止接收警告消息？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:43:41.943

您是否同时检查了`/Library/Application Support/SIMBL/Plugins`所有用户和`~/Library/Application Support/SIMBL/Plugins`您的活跃用户？

**更新 1（不再适用，请参阅更新 2）**

还有另一种潜在的方法可以解决您的问题。从 GitHub 下载代码，并将`Info.plist`键值修改`SIMBLTargetApplications/MaxBundleVersion`为您的模拟器的实际版本（每个问题 272）。自己构建插件并将其放在上面的路径之一中（无论您现有的插件在哪个路径中）。

**更新 2**

通过查看插件的最新源代码，似乎不再有模拟器版本的上限。`Info.plist`在[9 个月前的提交](https://github.com/davbeck/iPhone-Simulator-Capture/commit/cd78c97018526410d4161872a1f79497d6232ad7)中查看更改历史记录。所以我认为如果你想继续使用它，你可以下载最新的源代码，构建和替换现有的插件。

# jquery - Ajax 和 jQuery .Load() 函数的 500 内部错误，直接访问 url 工作正常。1and1 服务器

> ID：10317940
> 
> 赞同：1
> 
> 时间：2012-04-25T14:36:09.027
> 
> 标签：jquery, ajax, cakephp

所以我使用 jQuery .load() 调用在 CakePHP Web 应用程序中实现无限分页。

这是Javascript代码：

```
$("#post_container").append('<div class="batch row" style="display:none;"></div>'); //append a container to hold ajax content
        var url = $("a#next").attr("href"); //extract the URL from the "next" link
        $(".paging").remove(); // remove the old pagination links because new ones will be loaded via ajax
        if(url === undefined)
        {
            $("#ajax_pagination_text").html("<strong>Turtles all the way down. No more posts :(</strong>");
        }

        $("div.batch").load(url, function(response, status, xhr) {
            if (status == "error") {
              var msg = "Sorry but there was an error: ";
              alert(msg + xhr.status + " " + xhr.statusText);
            }
            else {
                $(this).attr("class","loaded row"); //change the class name so it will not be confused with the next batch
                $(".paging").hide(); //hide the new paging links
                $(this).fadeIn();

            }
        }); 
```

这里重要的部分是 $.load() ，它试图加载一个 url (http://www.MYWEBSITE.com/posts/index/page:2)。当 jQuery 发出请求时，服务器返回 500 内部服务器错误 如果我使用 jQuery.ajax(url); 也是一样的。如果我直接访问该网址，它会加载，没问题。

ajax 调用在我的本地开发服务器上也可以正常工作。所以这一定与我的主机 1and1 上的设置有关。这里发生了什么？我已经不得不处理这台主机的几个 500 个服务器错误。

我已按如下方式更改了我的 .htaccess 文件以修复之前的 500 个错误：

CakePHP 根目录中的 .htaccess：

```
<IfModule mod_rewrite.c>
   AddType x-mapp-php5 .php
   SetEnv PHP_VER

   RewriteEngine ON
   RewriteBase /
   RewriteRule    ^$ app/webroot/    [L]
   RewriteRule    (.*) app/webroot/$1 [L]
</IfModule> 
```

CakePHP 应用程序/中的 .htaccess：

```
<IfModule mod_rewrite.c>
   AddType x-mapp-php5 .php

    RewriteEngine ON
    RewriteBase /
    RewriteRule    ^$    webroot/    [L]
    RewriteRule    (.*) webroot/$1    [L]
 </IfModule> 
```

CakePHP 应用程序/webroot/ 中的 .htaccess：

```
<IfModule mod_rewrite.c>
   AddType x-mapp-php5 .php
   AddHandler x-mapp-php5 .php

    RewriteEngine ON
    RewriteBase /
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ /index.php?q=$1 [QSA,L]
</IfModule> 
```

非常感谢任何帮助或见解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:39:36.633

安装 Wireshark 并确定浏览器在导航到页面时发出的请求与使用 AJAX 发出请求时的区别。

[http://www.wireshark.org/](http://www.wireshark.org/)

只有这样，您才能更好地了解问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T14:41:24.410

尝试改用 $post 吗？当我的参数大于一时，我使用 $.post 或 get, $.ajax 仅作为一个参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T12:08:32.990

所以事实证明这是我根据调用是否为 AJAX 来更改 Cake 呈现哪个视图的方式的问题。

最初我有这个，以更改呈现的视图：

```
if ($this->RequestHandler->isAjax()) {  
   $this->render('/posts/ajax_paging');  // Special view for ajax pagination
} 
```

这在我的本地开发服务器上完美运行。但是一旦上传，就会出现问题。服务器说它找不到视图。

将其更改为以下解决了该问题：

```
if ($this->RequestHandler->isAjax()) {  
  $this->render('ajax_paging');  // Render a special view for ajax pagination
} 
```

我猜这与实际文件夹“Posts”有一个大写字母 P 并且我的 Windows 服务器不区分大小写因此“/posts”解析为“/Posts”但一旦我把它放在 linux 服务器上的事实有关在第 1 和第 1 案例成为一个问题。在阅读 CakePHP 文档后，我意识到我什至不需要目录，因为视图来自同一个控制器。因此生成的代码。

# ruby-on-rails - 为什么 Rails 3.2.2 新应用程序不在资产路径中包含 lib/assets？

> ID：10317941
> 
> 赞同：7
> 
> 时间：2012-04-25T14:36:10.567
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我最近写了一篇关于[资产管道](http://coderberry.me/blog/2012/04/24/asset-pipeline-for-dummies/)的博客文章，并了解到该文件夹`lib/assets`​​应该包含在资产路径列表中。如果我使用 3.2.2 创建一个全新的 Rails 应用程序，请运行控制台，然后运行`y Rails.application.config.assets.paths`我没有看到 lib/assets 的命令。默认情况下不应该包含这个吗？

这是我到达那里的方式：

```
$ rails new example
$ cd example
$ rails c
>> y Rails.application.config.assets.paths
---
- /Users/eberry/Playground/example/app/assets/images
- /Users/eberry/Playground/example/app/assets/javascripts
- /Users/eberry/Playground/example/app/assets/stylesheets
- /Users/eberry/Playground/example/vendor/assets/javascripts
- /Users/eberry/Playground/example/vendor/assets/stylesheets
- /Users/eberry/.rvm/gems/ruby-1.9.2-p290/gems/jquery-rails-2.0.2/vendor/assets/javascripts
- /Users/eberry/.rvm/gems/ruby-1.9.2-p290/gems/coffee-rails-3.2.2/lib/assets/javascripts
=> nil
>> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T06:52:36.007

我没有在这台计算机上安装 Rails，但从源参考来看，它看起来`lib/assets`永远不会被包含在内，但任何子路径都会。

尝试创建`lib/assets/javascripts`并查看是否自动包含在内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-12T17:07:18.463

我有同样的问题。

至少放入一个文件，例如 in `lib/assets/javascripts`，然后重新启动您的应用程序。

现在`rails c`，`Rails.application.config.assets.paths`应该包含`lib/assets/javascripts`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T04:06:44.487

您在任何 lib 文件夹中有任何内容吗？我的 lib/assets/javascripts 文件夹中有一个 js 文件，当我检查资产路径时，只显示一个路径，即 lib/assets/javascripts/，但没有显示 lib/assets/images 或 lib/assets/stylesheets ，因为我没有创建这些文件夹。

我在 Rails 3.2.3 上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T21:21:09.310

您在 lib/assets 下创建的任何子文件夹（不仅仅是 stylesheets/images/javascripts）都将添加到加载路径中。

使用 rails 3.2.11 测试。

使用“rails c”并输入“y Rails.application.config.assets.paths”来验证资产路径。

我想它与供应商/资产和应用程序/资产也是一样的，但我还没有证实这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T17:33:21.457

我在 rails 3.2 上遇到了同样的问题，您必须将脚本放入文件夹“assets/javascripts”中，它们将被包含在内，否则不会。

# stream - 通过流访问 WCF 服务文件

> ID：10317944
> 
> 赞同：0
> 
> 时间：2012-04-25T14:36:27.760
> 
> 标签：stream, wcf-data-services

我目前正在开发一个需要通过 wcf 服务访问文件的项目。我想知道是否可以将流对象获取到远程文件？我想象它的工作方式是服务器打开文件并将流对象返回给客户端。然后客户端可以像访问任何其他流对象一样访问它，但一切都是通过网络完成的。有这样的地方吗？

我看到一些看起来你可以做到这一点的东西，但我找不到太多。我尝试返回一个 Stream，但似乎客户端获得了一个字节 []。在这种情况下，它似乎只会读取并返回对我不起作用的整个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:46:06.333

据我了解，WCF 在 HTTP 协议上运行，因此无法流式传输文件，至少以真正的客户端/服务器设置可能的方式。

# java - 尝试在 Java 程序中播放音乐

> ID：10317945
> 
> 赞同：1
> 
> 时间：2012-04-25T14:36:28.023
> 
> 标签：java, url, applet

我正在尝试让一个测试程序运行，它可以从我的硬盘驱动器中播放声音文件，但我继续得到`NullPointerException`. 这是到目前为止的代码，我主要从[代码中的梦想中](http://www.dreamincode.net/forums/topic/14083-incredibly-easy-way-to-play-sounds/)提取出来：

```
package ForSelf;

import java.applet.*;
import java.awt.Color;
import java.awt.Container;
import java.awt.Graphics;
import java.awt.event.ActionEvent;

import javax.swing.*;
import java.net.*;

public class AudioTest extends JApplet{
JPanel playerPanel;
JButton playSound, stopSound;
public class Sound // Holds one audio file
{
  private AudioClip song; // Sound player
  private URL songPath; // Sound path

  Sound(String filename){
     try
     {
        songPath = new URL(getCodeBase(),filename); // Get the Sound URL
        song = Applet.newAudioClip(songPath); // Load the Sound
     }catch(Exception e){
         e.printStackTrace();
         //e.getMessage();
     } // Satisfy the catch
  }

  public void playSound(){
     song.loop(); // Play 
  }
  public void stopSound(){
     song.stop(); // Stop
  }
  public void playSoundOnce(){
     song.play(); // Play only once
  }
}

public void init(){
  Sound testsong = new Sound("C:\\Users\\MyName\\Music\\PuzzleSolutionGet.wav");
  Container c = getContentPane();

  c.setBackground(Color.white);
  c.setLayout(null);

  playerPanel = new JPanel();
  playSound = new JButton("Play");
  stopSound = new JButton("Stop");

  playerPanel.add(playSound);
  playerPanel.add(stopSound);
  c.add(playerPanel);

  testsong.playSound();
}

public void paint(Graphics g){
    super.paint(g);
    playerPanel.setLocation(0, 0);
    playerPanel.setSize(300, 300);
}

public void actionPerformed(ActionEvent e){

}
} 
```

JComponents 将在稍后实现以播放和停止歌曲文件，我不确定它是否只是我的文件路径或什么，所以任何帮助将不胜感激。

更新后的代码如下：

```
package ForSelf;

import java.applet.*;
import java.awt.Color;
import java.awt.Container;
import java.awt.Graphics;
import java.awt.event.ActionEvent;

import javax.swing.*;
import java.net.*;

public class AudioTest extends JApplet{
JPanel playerPanel;
JButton playSound, stopSound;
public class Sound // Holds one audio file
{
  private AudioClip song; // Sound player
  private URL songPath; // Sound path

  Sound(String filename){
     try
     {
        songPath = new URL(getCodeBase(),filename); // Get the Sound URL
        song = Applet.newAudioClip(songPath); // Load the Sound
     }catch(Exception e){
         e.printStackTrace();
         //e.getMessage();
     } // Satisfy the catch
  }

  public void playSound(){
     song.loop(); // Play 
  }
  public void stopSound(){
     song.stop(); // Stop
  }
  public void playSoundOnce(){
     song.play(); // Play only once
  }
}

public void init(){
    **String directory = System.getProperty("user.dir") + System.getProperty("file.separator");
    String puzzleSolutionGet = directory + "PuzzleSolutionGet";
    Sound testsong = new Sound(puzzleSolutionGet);**

  //Sound testsong = new Sound("C:/Users/MyName/Music/PuzzleSolutionGet.wav");

  Container c = getContentPane();

  c.setBackground(Color.white);
  c.setLayout(null);

  playerPanel = new JPanel();
  playSound = new JButton("Play");
  stopSound = new JButton("Stop");

  playerPanel.add(playSound);
  playerPanel.add(stopSound);
  c.add(playerPanel);

  testsong.playSound();
}

public void paint(Graphics g){
    super.paint(g);
    playerPanel.setLocation(0, 0);
    playerPanel.setSize(300, 300);
}

public void actionPerformed(ActionEvent e){

}
} 
```

但是，当我运行它时，我遇到了以下异常：

```
java.net.MalformedURLException: unknown protocol: c
    at java.net.URL.<init>(URL.java:574)
    at java.net.URL.<init>(URL.java:464)
    at ForSelf.AudioTest$Sound.<init>(AudioTest.java:23)
    at ForSelf.AudioTest.init(AudioTest.java:45)
    at sun.applet.AppletPanel.run(AppletPanel.java:424)
    at java.lang.Thread.run(Thread.java:662)
java.lang.NullPointerException
    at ForSelf.AudioTest$Sound.playSound(AudioTest.java:32)
    at ForSelf.AudioTest.init(AudioTest.java:62)
    at sun.applet.AppletPanel.run(AppletPanel.java:424)
    at java.lang.Thread.run(Thread.java:662) 
```

这可能比以前提供更多信息。我什至将文件移动到我的桌面以便更快地访问，但我确定位置不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T15:12:58.270

您需要使用正斜杠而不是反斜杠。我使用 linux 路径名（“/home/username/song.wav”）在我的 linux 机器上运行了你的代码，它没有抛出任何异常（只是一个警告）。

我很确定您需要使用：

```
Sound testsong = new Sound("C:/Users/MyName/Music/PuzzleSolutionGet.wav"); 
```

请记住，Windows 接受正斜杠和反斜杠作为目录分隔符。

但是，如果这对您不起作用，请尝试使用 System.getProperty("user.dir") 和 System.getProperty("file.separator") 方法创建当前目录的字符串，然后您只需要最后连接您的文件名：

```
String directory = System.getProperty("user.dir") + System.getProperty("file.separator");
String puzzleSolutionGet = directory + "PuzzleSolutionGet";
Sound testsong = new Sound(puzzleSolutionGet); 
```

这样您的代码将在任何操作系统上运行。

它还将为您节省大量时间来切换您认为抛出异常的行并尝试调试代码，单步执行每一行，直到您看到抛出的异常。如果您还没有使用过调试器，这里是 IBM 提供的一个很酷的链接，它解释了基础知识：

[http://www.ibm.com/developerworks/library/os-ecbug/](http://www.ibm.com/developerworks/library/os-ecbug/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T14:46:59.883

```
Sound testsong = new Sound("C:\\Users\\MyName\\Music\\PuzzleSolutionGet.wav");
...
Sound(String filename){
     try
     {
        songPath = new URL(getCodeBase(),filename); // Get the Sound URL 
```

路径需要相对于`codebase`, 并使用正斜杠`/`。EG 如果`codebase`指向：

```
"C:\\Users\\MyName\\lib" 
```

构造函数应该看起来更像：

```
Sound testsong = new Sound("../Music/PuzzleSolutionGet.wav"); 
```

# iphone - 在 iOS 5 中下拉 UIView

> ID：10317951
> 
> 赞同：4
> 
> 时间：2012-04-25T14:36:55.157
> 
> 标签：iphone, objective-c, cocoa-touch, ios5, uigesturerecognizer

我在我的 iPhone 应用程序中看到状态栏上有一个可以访问通知中心的手势。如何在我的应用程序中实现这种转换？我认为这是通过滑动手势识别器完成的，但是如何包含从上到下的滑动手势（如何将通知中心拖动到其完整过渡）？是否有任何示例代码或可以帮助我做到这一点的东西？提前谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T15:09:33.530

应该很容易做到。假设您有一个`UIView`( `mainView`) ，您想从中触发下拉事件。

1.  将子视图 ( `pulldownView`) 放在可见区域的顶部外部的 mainView 上。
2.  实施`touchesBegan`并`mainView`检查触摸是否在前 30 个像素（或点）中。
3.  实施`touchesMoved`您检查的位置，如果移动方向向下`pulldownView`且不可见，则将`pulldownView`向下拖动到主视图的可见区域或检查移动方向是否向上且`pulldownView`可见，如果是向上推出可见区域。
4.  通过检查移动的方向来实现`touchesEnd`您结束拖动或推动移动的`pulldownView`位置。

编辑：

这是一些示例代码。未经测试，可能包含拼写错误，可能无法编译，但应该包含所需的基本部分。

```
//... inside mainView impl:
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
  UITouch *touch = (UITouch *)[touches anyObject];
  start = [touch locationInView:self.superview].y;
  if(start > 30 && pulldownView.center.y < 0)//touch was not in upper area of view AND pulldownView not visible
  {
    start = -1; //start is a CGFloat member of this view
  }
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
  if(start < 0)
  {
    return;
  }
  UITouch *touch = (UITouch *)[touches anyObject];
  CGFloat now = [touch locationInView:self.superview].y;
  CGFloat diff = now - start;
  directionUp = diff < 0;//directionUp is a BOOL member of this view
  float nuCenterY = pulldownView.center.y + diff;
  pulldownView.center = CGPointMake(pulldownView.center.x, nuCenterY);
  start = now;
}

-(void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
  if (directionUp)
  {
    //animate pulldownView out of visibel area
    [UIView animateWithDuration:.3 animations:^{pulldownView.center = CGPointMake(pulldownView.center.x, -roundf(pulldownView.bounds.size.height/2.));}];
  }
  else if(start>=0)
  {
    //animate pulldownView with top to mainviews top
    [UIView animateWithDuration:.3 animations:^{pulldownView.center = CGPointMake(pulldownView.center.x, roundf(pulldownView.bounds.size.height/2.));}];
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T15:00:02.333

您可以实现 UISwipeGestureRecognizer 来处理应用程序中的滑动手势，并指定要检测为 UISwipeGestureRecognizerDirectionDown 的滑动方向。

这里有一个[Apple 示例](https://developer.apple.com/library/ios/#samplecode/SimpleGestureRecognizers/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009460)。还有一些[WWDC10 会议](https://developer.apple.com/videos/wwdc/2010/)值得一看。我建议从[该页面](https://developer.apple.com/videos/wwdc/2010/)“使用手势识别器简化触摸事件处理”和“高级手势识别” 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T10:07:23.847

`UIView`我通过使用全尺寸的子类解决了这个问题`UIScrollView`。`UIView`如果用户触摸不可“拖动”的点，则将触摸事件传递给其底层视图。

```
@implementation MyCustomUIView

- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event
{
    // Check whether we are on the overlay
    if
    (
        point.y < 460.0f
        // Maybe some more restrictions here
    )
    {
        // Block the event, pass to parent
        return NO;
    }

    // Everything okay
    return YES;
}

@end 
```

此代码`UIScrollView`仅响应 460 像素以下的触摸。例如，如果您`UIScrollView`的高度为 800 像素，您可以将其从 460 像素触摸到 800 像素。足以打开、关闭和使用它。因此，如果您有一个全尺寸的`UIScrollView`，您可以将其向上拖动以打开它，同时您可以“触摸”底层视图。这种方法的好处是所有动画都依赖于默认行为，您不必自己实现它。

# c# - 检查字符串是否包含数值

> ID：10317953
> 
> 赞同：4
> 
> 时间：2012-04-25T14:37:01.450
> 
> 标签：c#, string, int

我正在尝试检查字符串是否包含数值，如果它不返回标签，那么我想显示主窗口。如何才能做到这一点？

```
If (mystring = a numeric value)
            //do this:
            var newWindow = new MainWindow();
            newWindow.Show();
If (mystring = non numeric)
            //display mystring in a label
            label1.Text = mystring;

else return error to message box 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T14:38:37.300

使用 TryParse。

```
double val;
if (double.TryParse(mystring, out val)) {
    ..
} else { 
    ..
} 
```

这适用于直接转换为数字的字符串。如果您还需要担心 $ 和 之类的东西，那么您需要做更多的工作来首先清理它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-25T14:39:23.237

```
Int32 intValue;
if (Int32.TryParse(mystring, out intValue)){
  // mystring is an integer
} 
```

或者，如果它是十进制数：

```
Double dblValue;
if (Double.TryParse(mystring, out dblValue)){
  // mystring has a decimal number
} 
```

一些例子，顺便说一句，可以在[这里找到](http://ideone.com/nOAbu)。

```
Testing foo:
Testing 123:
    It's an integer! (123)
    It's a decimal! (123.00)
Testing 1.23:
    It's a decimal! (1.23)
Testing $1.23:
    It's a decimal! (1.23)
Testing 1,234:
    It's a decimal! (1234.00)
Testing 1,234.56:
    It's a decimal! (1234.56) 
```

我测试过的还有几个：

```
Testing $ 1,234:                      // Note that the space makes it fail
Testing $1,234:
    It's a decimal! (1234.00)
Testing $1,234.56:
    It's a decimal! (1234.56)
Testing -1,234:
    It's a decimal! (-1234.00)
Testing -123:
    It's an integer! (-123)
    It's a decimal! (-123.00)
Testing $-1,234:                     // negative currency also fails
Testing $-1,234.56: 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T14:40:04.807

```
double value;
if (double.tryParse(mystring, out value))
{
        var newWindow = new MainWindow();
        newWindow.Show();
}
else
{
    label1.Text = mystring;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T14:39:48.083

您可以简单地引用 Microsoft.VisualBasic.dll，然后执行以下操作：

```
if (Microsoft.VisualBasic.Information.IsNumeric(mystring))
{
    var newWindow = new MainWindow();
    newWindow.Show();
}
else
{
    label1.Text = mystring;
} 
```

*VB 实际上表现更好，因为它不会为每次失败的转换抛出异常。*

请参阅：[探索 C# 的 IsNumeric](http://www.hanselman.com/blog/ExploringIsNumericForC.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T14:42:25.230

您可以使用布尔值来判断字符串是否包含数字字符。

```
public bool GetNumberFromStr(string str)
    {
        string ss = "";
        foreach (char s in str)
        {
            int a = 0;
            if (int.TryParse(Convert.ToString(s), out a))
                ss += a;
        }
        if ss.Length >0
           return true;
        else
           return false;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-25T14:43:19.853

尝试将标签的标题转换为字符串并使用 `Int.TryParse()`方法来确定文本是整数还是字符串。如果是，该方法将返回 true，否则将返回 false。代码如下：

```
if (Int.TryParse(<string> , out Num) == True)
{
   // is numeric
}
else
{
   //is string
} 
```

如果转换成功，其中 Num 将包含您的整数值

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-25T14:47:32.497

可以在以下位置找到一个很好的方法示例：http: [//msdn.microsoft.com/en-us/library/f02979c7.aspx](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)

甚至有一些代码在做几乎完全符合您要求的事情。如果您期望整数值，则可以使用 Int32.TryParse(string) 。如果您预计双打，请使用 Double.TryParse(string)。

# android - 正在寻找详细解释AndroidCamera 和SurfaceView 的教程或书籍？

> ID：10317954
> 
> 赞同：-1
> 
> 时间：2012-04-25T14:37:05.270
> 
> 标签：android, android-camera, surfaceview

我正在找一本好书或教程详细解释如何处理和处理AndroidCamera和SurfaceView界面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T14:50:51.510

Busy Coder 高级 Android 开发指南。有一章专门介绍相机，这是一本好书。Mark L Murphy 由 CommonsWare 出版。[http://commonsware.com/AdvAndroid/](http://commonsware.com/AdvAndroid/)

# json - 使用 Jackson 反序列化受保护的构造函数

> ID：10317955
> 
> 赞同：2
> 
> 时间：2012-04-25T14:37:06.283
> 
> 标签：json, serialization, jackson

您好我正在尝试使用杰克逊序列化和反序列化具有受保护构造函数的类（SimpleExpression）。当我使用 gson 时，我对此没有任何问题，但杰克逊似乎无法处理受保护的构造函数。我尝试使用 mixin-annotations 但没有奏效。序列化工作没有任何问题。杰克逊投掷：

```
com.fasterxml.jackson.databind.JsonMappingException: No suitable constructor found for type 
```

有什么帮助吗？我的代码：

```
private static SimpleExpression create(String json) throws JsonParseException, JsonMappingException, IOException
{
    ObjectMapper mapper = new ObjectMapper().setVisibility(PropertyAccessor.ALL, Visibility.ANY);
    SimpleExpression sp = null;
    sp = mapper.readValue(json, SimpleExpression.class);
    return sp;
} 
```

SimpleExpression 类，我省略了 getter 和 setter。

```
public class SimpleExpression implements Criterion
{
private static final long serialVersionUID = 1L;

private final String propertyName;

private final Object value;

private boolean ignoreCase;

private final String op;

private final String type;

protected SimpleExpression(String propertyName, Object value, String op)
{
    this.propertyName = propertyName;
    this.value = value;
    this.op = op;
    this.type = value.getClass().getName();
}

protected SimpleExpression(String propertyName, Object value, String op, boolean ignoreCase)
{
    this.propertyName = propertyName;
    this.value = value;
    this.ignoreCase = ignoreCase;
    this.op = op;
    this.type = value.getClass().getName();
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T21:13:50.053

受保护的部分应该没有问题（发现它们没问题），但构造函数可能需要参数。要指示要使用的非默认构造函数，请使用`@JsonCreator`; 但除此之外，它取决于使用哪种构造函数（或静态工厂方法）。

但要了解细节，需要类定义。另一种可能性是您正在尝试处理非静态内部类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-20T19:42:26.420

只要有任何1 来到线程。我遇到了同样的问题。我只是添加一个构造函数

```
protected SimpleExpression(){} 
```

它工作得很好

# c# - 复制和粘贴命令提示符会导致冻结的控制台应用程序继续运行

> ID：10317962
> 
> 赞同：0
> 
> 时间：2012-04-25T14:37:17.630
> 
> 标签：c#, multithreading, visual-studio, console, console-application

我正在使用 Visual Studio 和 C# 编写控制台应用程序。我不断将调试信息打印到控制台窗口。

该程序相当简单，它只是多次查询多个数据库并将值存储在我的中央数据库中。它总共执行了 900 多次。在查询数据库时，它偶尔会（随机）停在控制台窗口上，并停止打印调试信息或在程序中继续执行任何操作。奇怪的是，当我突出显示窗口并右键单击（复制）时，这似乎使程序恢复了生机，它又开始工作了！

有谁知道这可能是什么原因造成的？这是我以前在程序中见过的最奇特的行为！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:41:08.403

如果用户不小心点击了黑色控制台窗口，光标将变为填充的白色矩形，并且应用程序挂起，直到再次单击。

当启用“快速编辑模式”时，它是控制台窗口的通用功能。

为了禁用该功能，您应该在运行时取消选中应用程序控制台窗口的“快速编辑模式”选项。

或以编程方式禁用它：

```
// http://msdn.microsoft.com/en-us/library/ms686033(VS.85).aspx
    [DllImport("kernel32.dll")]
    public static extern bool SetConsoleMode(IntPtr hConsoleHandle, uint dwMode);

    private const uint ENABLE_EXTENDED_FLAGS = 0x0080;

    static void Main(string[] args)
    {
         IntPtr handle = Process.GetCurrentProcess().MainWindowHandle;
         SetConsoleMode(handle, ENABLE_EXTENDED_FLAGS); 
```

# spring - Java EE 服务器上 Spring 应用程序的良好分析方法

> ID：10317966
> 
> 赞同：1
> 
> 时间：2012-04-25T14:37:27.133
> 
> 标签：spring, jakarta-ee, profiling, websphere

我对在 Java EE 服务器中部署的 Spring 应用程序中进行（非侵入式）性能分析的方法很感兴趣。在我的例子中，我使用 WebSphere Application Server 7、WebSphere MQ 7 和 OpenJPA/IBM DB2。

我只需要简要概述潜在的瓶颈等。我总是可以记录时间戳并进行一些分析，但是如果你们有任何最佳实践，我正在倾听！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T14:42:14.917

我推荐**VisualVM 分析器**。它随现代 Sun/Oracle JDK ( `bin/jvisualvm.exe`) 一起提供，并且能够连接到正在运行的 java 实例。

更多信息可以在这里找到：http: [//visualvm.java.net/profiler.html](http://visualvm.java.net/profiler.html)

# html - toDataURL does not work for html5 canvas with an SVG image

> ID：10317970
> 
> 赞同：2
> 
> 时间：2012-04-25T14:37:33.417
> 
> 标签：html, node.js, canvas, webkit, svg

I believe the answer to my problem can be found in [Is there an equivalent of canvas's toDataURL method for SVG?](https://stackoverflow.com/questions/3173048/is-there-an-equivalent-of-canvass-todataurl-method-for-svg). Can someone confirm or give me a pointer in the right direction.

I cannot get canvas.toDataURL() to produce a correct image if the canvas contains an SVG on Chrome and/or Safari. The code below illustrates the problem.

```
<!DOCTYPE html>
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
  <script>
  $(document).ready(function () {
        var __readLocalXml = function(file)
        {
            xmlHttp = new XMLHttpRequest();
            xmlHttp.open("GET",file,false);
            xmlHttp.send();
            return xmlHttp.responseXML;
        };

        var __drawSVG = function(context, sourceSVG, x, y){
            var svg_xml = (new XMLSerializer()).serializeToString(sourceSVG);

            var img = new Image();
            img.src="";
            var myFunction = function() {
                context.drawImage(img, x, y);
            }
            img.addEventListener('load', myFunction, false);
            img.src = "data:image/svg+xml;base64,"+btoa(svg_xml);

        };

        var settings = {
            //White King
            //Chess_klt45.svg
            //<http://en.wikipedia.org/wiki/File:Chess_klt45.svg>
            'whiteKingSVG'      : function() { return __readLocalXml("svg/Chess_klt45.svg") }
        }

        var canvas = document.createElement('canvas');
        var cw = canvas.width = 45;
        var ch = canvas.height = 45;

        var context = canvas.getContext('2d');

        context.fillStyle = '#FFFFCC';
        context.fillRect(0,
                         0,
                        ch,
                        cw);
        __drawSVG(context, settings.whiteKingSVG(),0,0);

        $('#withCanvas').after(canvas);
        $('#withToDataUrl').after('<img src="' + canvas.toDataURL() + '" />');
  });
  </script>
</head>
<body>
    <h1>Works</h1>
    <div id="withCanvas"></div>
    <hr>
    <h1>Does not Work</h1>
    <div id="withToDataUrl"></div>
</body>
</html> 
```

I even wrote an equivalent program using node 0.4.2 and node-canvas using the cairo library and I got the same result when using canvas.toDataURL() with an SVG image. When using node-canvas the img.onload event was not triggered for some reason and if I tried to draw the image without waiting for the onload event I got an error saying that the image had not completed loading. The node program can also be found below.

```
var Canvas = require('canvas');

var __readFileNodeSync=function(file){
   var fs = require('fs');

   try {
      return fs.readFileSync(file, 'ascii');
   } catch (err) {
      console.error("There was an error opening the file:");
      console.log(err);
   }
}

var __loadXml_xmldom=function(file){
   var DOMParser = require("xmldom").DOMParser;
   var xml=__readFileNodeSync(file)
   return new DOMParser().parseFromString(xml)
}

var __drawSVG = function(context, sourceSVG, x, y){
   var btoa = require('btoa');
   var XMLSerializer = require("xmldom").XMLSerializer;
   var svg_xml = new XMLSerializer().serializeToString(sourceSVG);
   var img = new Canvas.Image;
   img.onload = function(){
      context.drawImage(img, x, y);
   }
   img.src = "data:image/svg+xml;base64,"+btoa(svg_xml);
};

var settings = {
   //White King
   //Chess_klt45.svg
   //<http://en.wikipedia.org/wiki/File:Chess_klt45.svg>
   'whiteKingSVG'      : function() { return __loadXml_xmldom("../svg/Chess_klt45.svg") }
}

   var canvas = new Canvas();
   var cw = canvas.width = 45;
   var ch = canvas.height = 45;

   var context = canvas.getContext('2d');

   context.fillStyle = '#FFFFCC';
   context.fillRect(0,
                    0,
                   ch,
                   cw);
   __drawSVG(context, settings.whiteKingSVG(),0,0);

   console.log("<html>");
   console.log("<head>");
   console.log("</head>");
   console.log("<body>");
   console.log('<img src="'+canvas.toDataURL() + '" />');
   console.log("</body>");
   console.log("</html>"); 
```

**Edit** I was able to solve my issue thanks to @Phrogz's comment
Below is the code with the problem solved

```
<!DOCTYPE html>
<html>
<head>
  <script type="text/javascript" src="http://canvg.googlecode.com/svn/trunk/rgbcolor.js"></script> 
  <script type="text/javascript" src="http://canvg.googlecode.com/svn/trunk/canvg.js"></script>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
  <script>
  $(document).ready(function () {

        var settings = {
            //White King
            //Chess_klt45.svg
            //<http://en.wikipedia.org/wiki/File:Chess_klt45.svg>
            'whiteKingSVG'      : "svg/Chess_klt45.svg" 
        }

        var canvas = document.createElement('canvas');

        var cw = canvas.width = 45;
        var ch = canvas.height = 45;
        var context = canvas.getContext('2d');

        context.fillStyle = '#FFFFCC';
        context.fillRect(0,
                     0,
                    ch,
                    cw);

        canvg(canvas, settings.whiteKingSVG, { 
                ignoreMouse: true, 
                ignoreAnimation: true, 
                ignoreDimensions: true, 
                ignoreClear: true, 
                offsetX: 0, 
                offsetY: 0
        });
        $('#withCanvas').after(canvas);
        $('#withToDataUrl').after('<img alt="whiteKing.png" src="' + canvas.toDataURL("image/png") + '" />');
  });
  </script>
</head>
<body>
    <h1>Works</h1>
    <div id="withCanvas"></div>
    <hr>
    <h1>Works! (using canvg)</h1>
    <div id="withToDataUrl"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T22:27:50.160

> Webkit currently taints the canvas when you draw an SVG to it (due to difficult-to-track security concerns). Until FF v12 this was also the case with Firefox, but it is now fixed. You will need to use an SVG parser like CanVG for now if you need the data URL.

# r - ggplot2的百分位图/y和yend的条形图？

> ID：10317972
> 
> 赞同：1
> 
> 时间：2012-04-25T14:37:38.633
> 
> 标签：r, plot, ggplot2, percentile

我想只考虑我的data.frame中的百分位数来制作[这样的图。](http://i.stack.imgur.com/uaQn4.png)所以我的 data.frame 中的一行会是这样的：

```
Name; q0.05; q0.25; q0.45; q0.55; q0.75; q0.95
Italy;   76;    88;    95;   109;   112;   123 
```

这就是我直接想转化为情节的内容。任何帮助或建议表示赞赏！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T15:03:10.010

一个完整的可重现的例子（就像你可以提供的......）：

```
dat <- data.frame(Name = factor(sample(letters[1:5],1000,replace = TRUE)),
                    val = runif(1000))

datSum <- ddply(dat,.(Name),summarise,q05 = quantile(val,0.05),
                                    q25 = quantile(val,0.25),
                                    q45 = quantile(val,0.45),
                                    q55 = quantile(val,0.55),
                                    q75 = quantile(val,0.75),
                                    q95 = quantile(val,0.95))
datSum$NameAlt <- 1:5 
```

和情节：

```
ggplot(datSum,aes(ymin = NameAlt - 0.2,ymax = NameAlt + 0.2)) + 
    geom_rect(aes(xmin = q05,xmax = q95),fill = "white",colour = "black") + 
    geom_rect(aes(xmin = q25,xmax = q75),fill = 'lightblue',colour = "black") +
    geom_rect(aes(xmin = q45,xmax = q55),fill = 'blue',colour = "black") +
    scale_y_continuous(breaks = 1:5,labels = datSum$Name) 
```

![在此处输入图像描述](../Images/735b98adebdb033e89e0021fe2090422.png)

# php - manage_pages 权限

> ID：10317973
> 
> 赞同：1
> 
> 时间：2012-04-25T14:37:39.670
> 
> 标签：php, facebook, graph

我写了一个应用程序来管理粉丝页面。它有一个简单的形式来撰写新帖子并将其发布到粉丝专页。在打开新帖子的表单之前，我检查用户是否允许我的应用程序：

```
$loginUrl = $facebook->getLoginUrl(array('scope'=>'manage_pages,publish_stream')); 
```

但是在重定向到 Facebook 后，我必须允许我的所有页面。是否可以仅将“manage_pages”权限授予一页？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T16:32:51.540

如果可以，那就太好了，但不，这是全有或全无。

# php - MySQL/PHP 错误：[2002] 每个套接字地址（协议/网络地址/端口）通常只允许使用一次

> ID：10317974
> 
> 赞同：9
> 
> 时间：2012-04-25T14:37:47.853
> 
> 标签：php, mysql, apache, xampp

我已经在 stackoverflow 上找不到解决方案，大多数其他相关主题都与 Apache 没有先启动并出现此错误有关。我的问题是，在 apache 运行后，一些连接到我们的 php/mysql 网站的用户将收到此错误：

```
PHP Warning:  mysql_connect() [function.mysql-connect]:
[2002] Only one usage of each socket address (protocol/network address/port)
is normally permitted. 
```

这似乎是完全随机的，当我监控 Apache 的工作线程时，通常有很多空闲的工作人员可以接受新的连接/请求。

我的网站在 Windows XP SP3、Xampp 1.7.7、四核、4gigs 内存、1TB HD、php/mysql 规格上运行：

Apache/2.2.21 (Win32) mod_ssl/2.2.21 OpenSSL/1.0.0e PHP/5.3.8 mod_perl/2.0.4 Perl/v5.10.1

任何有关我应该在我的任何配置中更改以使其消失的帮助将不胜感激。我在谷歌甚至 Xampp 论坛上看过，但大多数人在启动 Apache 之前都会遇到这个问题，但是当用户遇到这个错误时，Apache 对我来说运行良好。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2018-07-18T07:24:16.657

你可以修改窗口`REGISTRY`来解决这个问题，

首先在 regedit 中打开此路径：

HKLM\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters

并创建 4 个新`DWORD`的键和值：

```
TcpTimedWaitDelay
REG_DWORD: 0000001e (hex)

MaxUserPort
REG_DWORD: 0000fffe (hex)

TcpNumConnections
REG_DWORD: 00fffffe (hex)

TcpMaxDataRetransmissions
REG_DWORD: 00000005 (hex) 
```

就像这个屏幕截图：

[![在此处输入图像描述](../Images/ec399ff33dd1525b850d1a265152ad0f.png)](https://i.stack.imgur.com/diJfQ.png)

[参考](https://deploymentresearch.com/research/post/532/fix-for-windows-10-exhausted-pool-of-tcp-ip-ports)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-24T19:12:36.767

该错误实际上不是来自 MySQL，而是[来自 Windows 本身](http://blogs.msdn.com/b/dgorti/archive/2005/09/18/470766.aspx)：

> 当连接关闭时，在关闭连接的一侧，5 元组 { Protocol, Local IP, Local Port, Remote IP, Remote Port} 默认进入 TIME_WAIT 状态 240 秒。
> 
> 在这种情况下，协议是固定的——TCP
> 
> 本地 IP、远程 IP 和远程 PORT 通常也是固定的。所以变量是本地端口。
> 
> 发生的情况是，当您不绑定使用 1024-5000 范围内的端口时。所以大致你有4000个端口。如果您在 4 分钟内使用所有这些端口——这意味着您在 4 分钟内每秒进行 16 次 Web 服务调用，您将耗尽所有端口。这就是这个异常的原因。

换句话说，您已经用完了动态范围内的端口。那可能不应该发生。您在这里处理多少并发用户？

链接的博客有解决方法：

1.  通过注册表编辑增加动态端口范围。
2.  `TIME_WAIT`通过注册表编辑减少系统希望连接花费的时间。
3.  运行一些代码以在没有 regedit 的情况下进行上述注册表编辑。

各种各样的解决方法！

另请参阅[Visual Studio 论坛上的这个问题](http://social.msdn.microsoft.com/Forums/en-US/netfxnetcom/thread/a595c417-10dc-4b06-b4c2-490c8abe776d)，其中解释了：

> 该端口将被锁定一两分钟，以捕获可能在应用程序终止之前已发送但尚未到达的所有数据包。在 Winsock API 中，您可以设置套接字选项 SO_REUSEADDR 来解决此问题（也可以在 .NET Socket 类中设置此选项），但 TcpListener 级别太高，不允许您设置此选项。

连接到 MySQL 的底层代码或在 Apache 中处理连接的代码很可能没有尝试使用`SO_REUSEADDR`.

我敢打赌，您更改保活超时在这里会产生直接影响。尽管*理论上*减少它可以释放套接字，但 Windows 不同意并保留套接字。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-01-23T14:37:16.027

这是[Doldurma](https://stackoverflow.com/users/1830228/doldurma)的答案，但对于懒惰的人，您只需将其放在 .reg 文件中，然后单击它（在我的情况下不需要重新启动）

文件内容：

```
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters]

"TcpTimedWaitDelay"=dword:0000001e
"MaxUserPort"=dword:0000fffe
"TcpNumConnections"=dword:00fffffe
"TcpMaxDataRetransmissions"=dword:00000005 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-07-27T11:58:15.240

在开发我的 Laravel 项目时发生在我身上。出于开发目的，这没什么大不了的，尤其是在您使用 Windows 系统时。但是对于生产，我只是在 Linux 上运行并解决了问题。此外，如果可能，将 MySQL 连接从“localhost”更改为“127.0.0.1”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-18T06:21:08.540

有一个简单的解决方法。

下载 CurrPorts [http://www.nirsoft.net/utils/cports.html](http://www.nirsoft.net/utils/cports.html) - 一个独立的免费软件工具，列出程序和服务正在使用哪些端口。当然，您可以使用 netstat、Windows 管理工具和任务管理器自己解决这个问题，但 CurrPorts 会为您完成这一切。

以管理员身份运行 Currports >> 选择通过运行到同一端口来创建问题的服务/应用程序 >> 停止服务。停止服务 -

1.  直接来自 Currports 应用程序。
2.  开始>>运行>>service.msc>>（从列表中选择）。
3.  任务管理器。

希望你通过投票来鼓舞我。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-07-23T12:44:39.130

FWIW，我在类似的设置（Windows XP）上遇到了同样的问题。相同的代码在 Mac (OS X) 上没有这个问题。

我通过在 MySQLi 类中使用持久连接解决了这个问题。

有关更多信息，请参见此处：http: [//php.net/mysqli.persistconns](http://php.net/mysqli.persistconns)

确保您了解与使用持久连接相关的所有问题/注意事项。

# android - 数据中的网页：text/html 不适用于某些 WebView 文本/html 内容字符串

> ID：10317977
> 
> 赞同：3
> 
> 时间：2012-04-25T14:37:58.687
> 
> 标签：android, character-encoding, android-webview

我正在使用以下 Java 代码创建一些用于显示内容的 HTML。

```
public String htmlFromArrayList(ArrayList<TSI> a) {

    StringBuilder returnStringBuilder = new StringBuilder();

    for (TSI i : a) {
        returnStringBuilder.append("<h3>");
        returnStringBuilder.append(i.itemTitle);
        returnStringBuilder.append("</h3><p>");
        returnStringBuilder.append(i.itemText);
        returnStringBuilder.append("</p>");
    }

    return returnStringBuilder.toString();
} 
```

加载我使用的字符串

```
mWebView.loadData(htmlFromArrayList(mSummaryItemArrayList), "text/html", null); 
```

现在这适用于我大约 60% 到 70%`ArrayList<TSI>`的`TSI`.

`The web page at data:text/html;null,%3Cp%E.......p%3E might be temporarily down or it may have moved...`

我假设这与字符集中的奇怪字符有关。错误信息是什么意思？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T14:45:01.437

您的 i.itemText 或 i.itemTitle 中是否有奇怪的字符，例如百分号、反斜杠或其他非字母字符？如果这样做，将导致“找不到网页”问题。

[http://code.google.com/p/android/issues/detail?id=4401](http://code.google.com/p/android/issues/detail?id=4401)

此外，您没有传入编码，请尝试传入“UTF-8”而不是 null。

```
mWebView.loadData(htmlFromArrayList(mSummaryItemArrayList), "text/html", "utf-8"); 
```

可以通过将所有 % 符号替换为 HTML 实体（与号磅 37）：（%）来解决此问题。

有报道称，如果将任何汉字输入到您的 webView 中，即使您处理百分号，仍然会出现“找不到页面”的问题。所以解决方法是试试这个：

**这适用于一切加上汉字：**

```
mWebView.loadData(URLEncoder.encode(html,"utf-8").replaceAll("\\+"," "), "text/html", "utf-8"); 
```

**来源** [http://code.google.com/p/android-rss/issues/detail?id=15](http://code.google.com/p/android-rss/issues/detail?id=15)

# ruby-on-rails-3.1 - Rails 3 - 避免资产的最佳方法不是生产中的预编译错误？

> ID：10317987
> 
> 赞同：0
> 
> 时间：2012-04-25T14:38:38.143
> 
> 标签：ruby-on-rails-3.1, asset-pipeline

> **可能重复：**
> [Rails 3.1 资产预编译](https://stackoverflow.com/questions/7278029/rails-3-1-asset-precompilation)

我最近一直在为使用 Rails 3.1 和 Ruby 1.9.2 构建的应用程序而苦苦挣扎。

我的问题是，有时我将特定的 JS 文件添加到系统中，但是当我将其推送到 Heroku 时，我会看到“yourfile.js 未预编译”错误。

`config.assets.precompile`我通过将我的文件添加到我的文件中来解决这个问题`application.rb`。但是有没有办法使这个过程自动化？我目前有很多js文件，可能会添加更多。有没有可用的宝石？也许我缺少一些配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T20:29:42.460

您应该将这些文件添加到 application.js 并包含在每个页面上。

在某些页面上是否不需要它并不重要；如果服务器设置正确，则 application.js 文件将被浏览器缓存，并且不会在用户浏览站点时再次下载。第二个优点是你的 js 文件可以被透明代理缓存在某处，从而降低带宽成本，并加快代理另一端的人的响应时间。

如果您只想根据需要包含文件，则必须将它们包含在预编译数组中 - 这是预编译任务知道使它们在生产清单中可用的唯一方法。

在实践中，您可以在 application.js 中包含许多页面共有的 js，如果一页有大量 js，则仅将其放在该一页上。

# android-fragments - Android Fragment 表格展示

> ID：10317989
> 
> 赞同：1
> 
> 时间：2012-04-25T14:38:45.207
> 
> 标签：android-fragments

我有一个应用程序，我在其中使用片段在右窗格中显示动态生成的表。如果我注释掉表格的代码以便布局文件中的 ststic 代码显示在右侧窗格中，则此方法有效，但是当我包含表格时，它会将自身插入左侧面板 - 它应该位于右侧的文本下方窗格。从布局文件和插入表格的代码中提取的附件（不能以新用户的身份上传屏幕截图）。我尝试了许多解决方案，并假设表格代码有问题，无论是在布局中还是在 Java 中。

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:padding="50dip"
  android:background="@color/background_color"
  >

<TextView 
    android:id="@+id/display_readings_title"
    style="@style/textstyle.Heading"
    android:layout_below="@+id/logout" 
    android:text="@string/display_readings_title" 
    android:layout_gravity="center"
    android:layout_marginTop="30dip"
    android:layout_marginBottom="10dip"
    android:layout_centerHorizontal="true"
    />

<TextView 
    android:id="@+id/patient_id_text"
    style="@style/textstyle"
    android:text="@string/patient_id_text" 
    android:layout_marginTop="20dip"
    android:layout_marginLeft="10dip"
    android:layout_below="@id/display_readings_title"
    />

    <TextView 
    android:id="@+id/patient_id"
    style="@style/textstyle"
    android:text="" 
    android:layout_marginLeft="10dip"
    android:layout_below="@id/display_readings_title"
    android:layout_toRightOf="@id/patient_id_text"
    android:layout_alignTop="@id/patient_id_text"
        />

     <TextView 
    android:id="@+id/patient_name_text"
    style="@style/textstyle"
    android:text="@string/patient_name_text" 
    android:layout_marginTop="5dip"
    android:layout_marginLeft="10dip"
    android:layout_below="@id/patient_id_text"
    />

    <TextView 
    android:id="@+id/patient_name"
    style="@style/textstyle"
    android:text="" 
    android:layout_marginLeft="10dip"
    android:layout_below="@id/patient_id_text"
    android:layout_toRightOf="@id/patient_name_text"
    android:layout_alignTop="@id/patient_name_text"
        />

<ScrollView android:id="@+id/ScrollPatientReadings"
    android:layout_width="wrap_content" 
    android:fillViewport="true" 
    android:layout_height="wrap_content"
    android:layout_below="@+id/patient_name_text"
    android:layout_marginTop="20dip"

    >   

<TableLayout 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    android:stretchColumns="0,1,2,3" 
    android:id="@+id/patient_table"
    android:layout_marginLeft="10dip"
    >
</TableLayout>

</ScrollView>
</RelativeLayout> 
```

从 Java 代码中提取

```
patient_table = (TableLayout) getActivity().findViewById(
                R.id.patient_table);

        // get patient's readings from the database

                db.open();
                createTableTitle();
                Cursor c = db.getPatientReadings(idtext);
                extractValues(c);
                db.close();
            }

    // create title row

        private void createTableTitle() {
            TableRow titlerow;
            TextView tl1, tl2, tl3, tl4;
            titlerow = new TableRow(getActivity());
            titlerow.setPadding(10, 10, 0, 10);

            tl1 = new TextView(getActivity());
            tl1.setTextColor(getActivity().getResources().getColor(R.color.text_color));
            tl1.setTextSize(20);
            tl2 = new TextView(getActivity());
            tl2.setTextColor(getActivity().getResources().getColor(R.color.text_color));
            tl2.setTextSize(20);

            tl3 = new TextView(getActivity());
            tl3.setTextColor(getActivity().getResources().getColor(R.color.text_color));
            tl3.setTextSize(20);

            tl4 = new TextView(getActivity());
            tl4.setTextColor(getActivity().getResources().getColor(R.color.text_color));
            tl4.setTextSize(20);

            tl1.setText("INR");
            tl2.setText("Surface Bleeding");
            tl3.setText("Internal Bleeding");
            tl4.setText("Date");

            titlerow.addView(tl1);
            titlerow.addView(tl2);
            titlerow.addView(tl3);
            titlerow.addView(tl4);

            patient_table.addView(titlerow);

        }

        private void extractValues(Cursor c) {
            if (c.moveToFirst()) {
                do {
                    String inrReading = c.getString(2);
                    String surface_bleeds = c.getString(3);
                    String internal_bleeding = c.getString(4);
                    String currentDateTimeString = c.getString(5);

                    fillPatientTable(inrReading, surface_bleeds, internal_bleeding,
                            currentDateTimeString);
                } while (c.moveToNext());
            }
        }

        // Display in table

        private void fillPatientTable(String inrReading, String surface_bleeds,
                String internal_bleeding, String currentDateTimeString) {

            TableRow row;
            TextView t1, t2, t3, t4;
            row = new TableRow(getActivity());
            row.setPadding(10, 0, 0, 0);

            t1 = new TextView(getActivity());
            t1.setTextColor(getActivity().getResources().getColor(R.color.text_color));
            t1.setTextSize(18);
            t2 = new TextView(getActivity());
            t2.setTextColor(getActivity().getResources().getColor(R.color.text_color));
            t2.setTextSize(18);
            t3 = new TextView(getActivity());
            t3.setTextColor(getActivity().getResources().getColor(R.color.text_color));
            t3.setTextSize(18);
            t4 = new TextView(getActivity());
            t4.setTextColor(getActivity().getResources().getColor(R.color.text_color));
            t4.setTextSize(18);

            t1.setText(inrReading);
            t2.setText(surface_bleeds);
            t3.setText(internal_bleeding);
            t4.setText(currentDateTimeString);

            row.addView(t1);
            row.addView(t2);
            row.addView(t3);
            row.addView(t4);

            patient_table.addView(row); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:40:42.237

经过大量搜索并创建了一个并行应用程序后，我发现问题是由于一个愚蠢的错误造成的。将要放入动态数据的视图“患者表”也被另一个片段引用，该片段创建了一个列表以单击触发该表。

# java - 作为我项目的一部分运行axis2

> ID：10317996
> 
> 赞同：0
> 
> 时间：2012-04-25T14:39:12.120
> 
> 标签：java, web-services, wsdl, integration, axis2

情况：

现在，我可以根据我的 wsld 文件创建 .aar 文件。如果我将此 .aar 文件放入特定文件夹 (%AXIS2_HOME%/repository/services)，我可以通过 Web 浏览器调用骨架文件（由 wsdl2java 生成）的方法。（在他们的入门指南中有解释）

但是，我有一个自定义框架，并且一切都作为该框架的一部分工作。因此，我想将axis2作为这个框架的一部分来启动。是否可以？换句话说，我想让它成为我的框架和外部世界之间的桥梁。

如果不可能，我如何在我的框架和骨架之间建立连接？

注意：我是软件开发概念的新手，这可能是一个非常微不足道的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T13:22:38.960

经过一段时间的努力，我找到了解决方案。实际上这非常容易。

只需在您的项目下包含所需的axis2 库。并根据您自己的喜好修改 SimpleAxis2Server.java... :D 就是这样。

我喜欢 apache 软件基金会..