# StackOverflow 问答 12220000-12220999

# fonts - Java JRE 呈现字体的方式与 Java JDK 不同，两者版本相同

> ID：12220002
> 
> 赞同：2
> 
> 时间：2012-08-31T17:28:49.863
> 
> 标签：fonts, java

这与：[Eclipse 与 JNLP 中相同的 Java 字体略有不同](https://stackoverflow.com/questions/12219104/same-java-fonts-slightly-different-in-eclipse-vs-jnlp)

当我通过 JDK 1.6.0_24 运行我的应用程序时，字体会以我真正喜欢的特定方式呈现。但是，当我通过 JRE 1.6.0_24 运行我的应用程序时，它们会以我不喜欢的方式呈现。

区别如下：（JDK 渲染在顶部，JRE 渲染在底部）

![在此处输入图像描述](../Images/fa842509feb8d421810cc53fdb14833d.png)

那么，如何使 JRE 渲染字体与 JDK 相同？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:00:47.003

所以，我认为这可能是 Java 6 某些版本中的一个“错误”。我刚刚更新到 Java 6 Update 35，JDK 和 JRE 都正确地呈现字体，正如我所期望的那样。所以你有它。

# css - 改变wordpress主题的背景

> ID：12220007
> 
> 赞同：0
> 
> 时间：2012-08-31T17:29:02.393
> 
> 标签：css, wordpress

我一直在尝试更改 wordpress 主题的背景图片，但无法更改。

我试过了：

```
body {
background : url('images/squad.jpg');
} 
```

我将此代码放在自定义 css 样式中的设计设置下。但我没有看到任何变化

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:10:04.337

您的 css 文件是否在单独的文件夹中？

尝试这个

```
body {background : url('../images/squad.jpg');} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:34:32.890

在 wordperss 样式表文件中，搜索`body`和`html`选择器并检查是否有任何背景应用于它们。在`html`选择器中添加此属性：

```
backbround: #fff url(imagePath) no-repaet top left; 
```

您可以更改`#fff`为与背景图像更相关的颜色。这不是必需的，但这是最佳实践。如果您的背景图像是一个图案，并且您希望它被重复，那么更改`no-repeat`为`repeat`这个应该可以。

# jquery - jquery 等到方法执行完成

> ID：12220011
> 
> 赞同：1
> 
> 时间：2012-08-31T17:29:16.507
> 
> 标签：jquery, methods, wait

我有一个按钮，单击该按钮时我需要：

*   执行一个方法
*   需要显示一个弹出窗口。

代码是：

```
$('.dwnSingleImageLink').live('click', function(event){
    $('html, body').animate({scrollTop : 0}, 'slow');
    singleFileDownload = true;

    var renditions = getRenditionResultset($(this).attr('data-id'), $(this).attr('data-docname'));

    for(var i = 0; i < renditions.length; i++){
        var name = renditions[i].name;
        if(name == 'Web' || name == 'Thumbnail' || name == 'Preview' || name == 'Native File'){
            var info = {
                name: renditions[i].name,
                fileSize: renditions[i].fileSize,
                width: renditions[i].width,
                height: renditions[i].height,
                label: ''
            };
            renditionInfos.push(info);
        }
    }

    $('#downloadModal').find('input:hidden').attr({
            'data-id': $(this).attr('data-id'), 
            'data-docname': $(this).attr('data-docname'),
            'data-title': $(this).attr('data-title')
    }).after(function(){            
        $('#downloadModal').modal('show').css({
            width: '380px',
            'margin-left': function () {
                return - ($(this).width() / 2);
            }
        });
    });
});

var getRenditionResultset = function(dID, dDocName){
    var submitData = { 
        IdcService: 'RENDITION_INFO',
        dID: dID,
        dDocName: dDocName
    }; 

    var renditions = new Array();
    var fields = new Array();

    $.ucm.executeServiceIsJson(submitData, function(ucmResponse) {
        var resultSet = ucmResponse.ResultSets['manifest'];
        alert('jym');                                   

        for (var fieldIndex = 0; fieldIndex < resultSet.fields.length; fieldIndex++) {
            var field = new RenditionField();
            field.name = resultSet.fields[fieldIndex].name;
            field.index = fieldIndex;

            fields.push(field);
        }

        for(var rowIndex = 0; rowIndex < resultSet.rows.length; rowIndex++) {
            var rendition = new Rendition();

            for(var i = 0; i < fields.length; i++){
                var value = resultSet.rows[rowIndex][fields[i].index];                  

                switch(fields[i].name){
                    case 'extRenditionName' : 
                        rendition.name = value;
                        break;
                    case 'extRenditionDescription' :
                        rendition.description = value;
                        break;
                    case 'extRenditionPath' :
                        rendition.path = value;
                        break;
                    case 'extRenditionOriginalName' :
                        rendition.originalName = value;
                        break;
                    case 'extRenditionParams' :
                        rendition.params = value;
                        break;
                    case 'extRenditionType' :
                        rendition.type = value;
                        break;
                    case 'extRenditionFileSize' :
                        rendition.fileSize = value;
                        break;
                    case 'extRenditionWidth' :
                        rendition.width = value;
                        break;
                    case 'extRenditionHeight' :
                        rendition.height = value;
                        break;
                    case 'extRenditionFileType' :
                        rendition.fileType = value;
                        break;
                    case 'extRenditionPixelsPerInchVertical' :
                        rendition.pixelsPerInchVertical = value;
                        break;
                    case 'extRenditionPixelsPerInchHorizontal' :
                        rendition.pixelsPerInchHorizontal = value;
                        break;
                    case 'extRenditionColours' :
                        rendition.colours = value;
                        break;          

                }                   
            }

            renditions.push(rendition);
        }
    });

    return renditions;
}

function RenditionField() {
    this.name = '';
    this.index = -1;
}

function Rendition() {
    this.name = '';
    this.description = '';
    this.path = '';
    this.originalName = '';
    this.params = '';
    this.type = '';
    this.fileSize = '';
    this.width = '';
    this.height = '';
    this.fileType = '';
    this.pixelsPerInchVertical = '';
    this.pixelsPerInchHorizontal = '';
    this.colours = '';
}

Rendition.prototype.toString = function() {
    return '[object Rendition: name=' + this.name + ';description=' + this.description + ';path=' + this.path + ';originalName=' + this.originalName +
    ';params=' + this.params + ';type=' + this.type + ';fileSize=' + this.fileSize + ';width=' + this.width + ';height=' + this.height + ';fileType=' + 
    this.fileType + ';pixelsPerInchVertical=' + this.pixelsPerInchVertical + ';pixelsPerInchHorizontal=' + this.pixelsPerInchHorizontal + ';colours=' +
    this.colours + ']';
} 
```

这是一个大代码。它的作用是发送一个 ajax 请求并接收响应。然后它处理响应并创建一个数组。这些是方法的工作`getRenditionResultset()`。但是在我的应用程序中，在生成数组之前，调用此方法下方的 for 循环也会执行 show modal 块。如何等待`getRenditionResultset()`方法结束，然后执行`click`处理程序的 for 和其余代码？`$.when()`在这种情况下有什么方法可以使用吗？问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:35:18.303

再接受一个回调作为`getRenditionResultset`方法的参数。

```
var getRenditionResultset = function(dID, dDocName, onComplete){ 

  $.ucm.executeServiceIsJson(submitData, function(ucmResponse) {
    //after creating the array with the reponse

    if(typeof onComplete === function){
       onComplete()
    }

  }
} 
```

在调用点，做

```
$('.dwnSingleImageLink').on('click', function(event){
 .
 .
     var renditions = getRenditionResultset(blah, blah, function(){
        //code to execute after request has completed.
     }
 .
 .
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:35:34.487

AJAX 调用往往是异步的。因此，在执行进一步的代码之前必须等待它们完成。幸运的是，jQuery 为此类任务提供了便利：它的 AJAX 方法采用一些可选的回调参数。例如，以下代码在等待请求完成后执行：

```
$.ajax({
    "url": "http://example.com/ajax.php",
    "type": "post",
    "dataType": "json",
    "success": function(data) {
        // data is a json-decoded object.
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T17:35:40.707

您应该在 中使用 AJAX 成功回调`getRenditionResultSet`来执行显示模式的调用后代码。

# ssas - SSAS mdx 查找员工的每月保留率

> ID：12220012
> 
> 赞同：0
> 
> 时间：2012-08-31T17:29:28.230
> 
> 标签：ssas, mdx

这是我的场景。我有一个立方体，用于跟踪求职者的招聘过程。因此，他们从申请到聘用，有时甚至终止。

我想找到在特定月份雇用的员工数量，并查看之后每个月仍有多少相同的员工。

所以 2012 年 7 月雇佣了 10 名员工，我想获得 2012 年 8 月尚未终止的人数，依此类推。

2012 年 7 月 录用 2012 年 8 月 2012 年 9 月 10 9 剩余 7 剩余

我的措施是[雇用数量]和[终止数量]。我有日期的角色扮演维度：[雇用日期] 和 [终止日期]。

我在想我需要将雇用月份作为一组，然后在终止日期维度之后减去每个月的终止数量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T06:16:43.367

我认为您的设计可能不是解决此问题的最佳选择。在过去的学生保留中，我使用了一个**转换矩阵**“模式”，如下所述：[多对多革命 2.0](http://www.sqlbi.com/articles/many2many/)

如果您在查看解决方案后需要更多详细信息，请告诉我。

要使用您当前的模型求解，可能需要过于复杂且性能不佳的 MDX 计算

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T09:07:49.317

您可以使用此表达式创建度量：

```
Sum(NonEmpty('employees set', ([Measures].[Hired Qty], 'a hire date')),
    ([Measures].[Termination Qty], 'a termination date')) 
```

Sum 的第一个参数将返回在您选择的日期雇用的员工。

# testing - 如何使用 GUI 应用程序执行自动测试？

> ID：12220017
> 
> 赞同：0
> 
> 时间：2012-08-31T17:29:50.297
> 
> 标签：testing, automated-tests

刚接触软件测试...

关于测试，我认为 GUI 应用程序很难自动化。一些测试涉及以特定顺序交互特定的 GUI 对象（例如，单击按钮）。界面经常从一个窗口切换到另一个窗口。时间和同步有时也会造成问题（例如，记录鼠标点击和回放可能会搞砸）。

有没有什么解决方案可以用更少的人力来测试这些应用程序？感谢您分享您的经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T00:57:37.240

是的，GUI 应用程序确实很难自动化。无论应用程序的技术（Swing、Web、WPF、iOS）如何，您首先必须专注于自动化高价值测试。此外，测试自动化不应该只是 GUI 级别，它还应该是单元、集成和功能 (GUI) 测试的混合。

您正在开发网络应用程序吗？如果是这样，请查看像 Watir 或 WebDriver 这样的优秀开源工具。（我还将向您[介绍 Telerik 的 Test Studio](http://www.telerik.com/automated-testing-tools/software-testing-tools.aspx)；但是，为了全面披露，我是他们对该工具的宣传员。）

桌面应用程序（或移动）给自动化带来了很多挑战，这完全取决于您使用的平台。Test Studio 支持 WPF，但您也可以查看其他商业工具和一些免费工具。我不知道任何用于 Swing 应用程序的工具，但缺乏知识是由于我已经离开该领域多年。（也许我太不喜欢它了，以至于 Swing 甚至都不是普通的 Java GUI 工具集......）

iOS 和 Android 很难找到可靠的自动化工具。我知道 Frank 框架/API 可以在 iOS 上运行（Test Studio 在 App Store 中有一个免费的记录器），但我不知道有任何其他工具能够可靠地支持非凡的 Droid 硬件和操作系统版本矩阵。

无论您的平台和工具集如何，您都需要学习处理 GUI 测试的基本方法：专注于高价值测试，学习通过页面对象模式等方法避免重复，学习如何处理特定应用程序中的同步/时序问题.

这是一个漫长的过程，但如果你仔细工作，那是完全值得的。

（IMO 也很有趣。）

# java - 在java中解析在线xml

> ID：12220018
> 
> 赞同：2
> 
> 时间：2012-08-31T17:29:52.240
> 
> 标签：java, xml, parsing

我正在尝试从

[http://free.worldweatheronline.com/feed/weather.ashx?key=14d7241962022903123108&q=匹兹堡，宾夕法尼亚](http://free.worldweatheronline.com/feed/weather.ashx?key=14d7241962022903123108&q=Pittsburgh,pa)

我只需要标签“weatherDesc”中的一串天气描述

我试过了

```
 URL url = new URL("http://free.worldweatheronline.com/feed/weather.ashx?key=14d7241962022903123108&q=Pittsburgh,pa.xml");
    URLConnection conn = url.openConnection();

    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = factory.newDocumentBuilder();
    Document doc = builder.parse(conn.getInputStream()); 
```

我需要添加什么来挑选weatherDesc？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:35:41.293

为此使用`SAX`解析器或`DOM`解析器.......

我给你一个**SAX 解析器的工作示例**，用于**XML 形式**`parsing`的天气信息

 ****主要活动：**

```
public class WhetherXMLParsingAppActivity extends Activity {

    EditText editCity;
    EditText editState;
    TextView textCurrW;
    Button showButt;
    HandlingXmlStuff doingWork;

    final String baseURL ="http://www.google.com/ig/api?weather=";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        editCity = (EditText)findViewById(R.id.edit_City);
        editState = (EditText)findViewById(R.id.edit_State);
        textCurrW = (TextView)findViewById(R.id.text_CurrWhether);
        showButt = (Button)findViewById(R.id.button_Show);

        showButt.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                 String c = editCity.getText().toString();
                 String s = editCity.getText().toString();

                 StringBuilder URL = new StringBuilder(baseURL);
                 URL.append( c + "," + s);

                 String fullURL = URL.toString();

                 try {
                    URL website = new URL(fullURL);
                     SAXParserFactory spf = SAXParserFactory.newInstance();
                     SAXParser sp = spf.newSAXParser();
                     XMLReader xr = sp.getXMLReader();
                     doingWork = new HandlingXmlStuff();
                     xr.setContentHandler(doingWork);
                     xr.parse(new InputSource(website.openStream()));

                     String endResult = doingWork.getInfo();

                     textCurrW.setText(endResult);
                } catch (Exception e) {
                         textCurrW.setText("Error");
                } 

            }
        });

    }
} 
```

**XML 处理类：**

```
public class HandlingXmlStuff extends DefaultHandler{

    XmlDataCollected xdc = new XmlDataCollected();
    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {
        // TODO Auto-generated method stub
        super.startElement(uri, localName, qName, attributes);

        if (localName.equals("city")) {
        String city = attributes.getValue("data");
        xdc.setCity(city);

        }else if (localName.equals("temp_f")) {

            String t = attributes.getValue("data");
            int temp = Integer.parseInt(t);
            xdc.setTemp(temp);

        }

    }
    public String getInfo() {

        return xdc.dataToString();
    }

} 
```

**数据处理类：**

```
public class XmlDataCollected {

    private int temp;
    private String city;

    public void setTemp(int temp) {

        this.temp = temp;

    }

    public void setCity(String city) {

        this.city = city;
    }

    public String dataToString() {

        return "In " + city + " the Temperature in Farenheit is " + temp + " degress ";

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T19:58:34.893

如果您只想要单个元素的值，我建议使用`javax.xml.xpath`JDK/JRE 中包含的 API。有关示例，请参见：

*   [如何使用 StaX 获取特定 XML 标记的值](https://stackoverflow.com/questions/12062255/how-to-get-the-value-of-a-specific-xml-tag-using-stax/12063224#12063224)**

# ruby-on-rails - 使用 Process.spawn 作为 Process.fork 的替代品

> ID：12220024
> 
> 赞同：15
> 
> 时间：2012-08-31T17:30:22.640
> 
> 标签：ruby-on-rails, ruby, windows, fork

我的开发环境是一台运行 ruby​​ 1.9.3p125 (RubyInstaller) 和 rails 3.2.8 的 Windows 机器。

在使用第三方 gems 时，一个又一次出现的问题是 Windows 上缺少 fork()。这最近阻碍了我使用几乎任何分布式测试运行 gem（如[这些](https://www.ruby-toolbox.com/categories/distributed_testing)）的能力，因为它们依赖于 fork。

StackOverflow 上的一些旧问题试图找到解决同样问题的方法，但要么是在将 Process.spawn 添加到 ruby​​ 之前，要么是由于其他原因被迫使用旧版本的 Ruby。

建议的解决方案之一是使用 Cygwin 获得 fork() 支持，这根本不可能 - 我想我更愿意在此之前完全切换到 Linux。

另一个建议的解决方案是使用[win32-process gem](https://github.com/djberg96/win32-process)来获得 fork() 支持。Fork 支持已从最新版本 (0.7.0) 中删除，并且使用下一个最旧的版本 (0.6.6)，它确实（某种）支持 fork 似乎不起作用，至少对于运行任何分布式测试我尝试过的宝石（Spork、Parallel tests、Hydra、Specjour，几乎所有这些）。有趣的是，gem 的作者在自述文件中提到 Process.spawn 是 Process.fork 的一种可接受的解决方法。

我看到很多信息要么暗示，要么[直接陈述](http://ujihisa.blogspot.com/2010/03/how-to-run-external-command.html)在 Ruby 1.9 上，该 spawn 可以在 Windows 上用作 fork 的替代品。我花了相当多的时间玩这个，基本上试图在几个引用的 gem 中用 Process.spawn 替换 Process.fork ，但没有成功。在我看来，也许行为是相似的，但并不完全相同。例如，不清楚 spawn 是否真的以与 fork 相同的方式复制整个进程，或者只是使用提供的参数创建一个新进程。还不清楚 spawn 方法是否接受另一个 ruby​​ 方法作为参数，或者只接受系统命令。文档似乎暗示它只是一个命令，但一种方法似乎有效（有点），但我可能做错了事。我认为对于某些事情，fork 只是用来创建一个“廉价线程”，在以前不支持线程的 ruby​​ 版本中。但是，这些分布式测试 gem 似乎可以合法地依赖 fork() 的全部功能，以维护项目状态，并且不为每个测试加载整个 ruby​​ 环境。这有点超出了我正常的编程职责和经验，所以我可能会做出一些不正确的假设。

所以，我的问题是，是否可以相对简单地使用 Process.spawn 来实现与 Process.fork 相同的结果，在所有情况下？我开始怀疑不是，但如果是这样，有人可以发布一个如何进行转型的例子吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-07T13:45:57.037

**编辑**：有一个常见的用例`fork()`可以替换为`spawn()`-- `fork()`--`exec()`组合。许多旧的（和现代的）UNIX 应用程序，当他们想要生成另一个进程时，会首先派生，然后进行`exec`调用（`exec`用另一个替换当前进程）。这实际上并不需要`fork()`，这就是为什么它可以替换为`spawn()`. 所以这：

```
if(!fork())
  exec("dir")
end 
```

可以替换为：

```
Process.spawn("dir") 
```

如果任何宝石都`fork()`像这样使用，修复很容易。否则，几乎是不可能的。

* * *

**编辑**： win32-process 的实现`fork()`不起作用的原因是（据我从文档中可以看出），它基本上*是* `spawn()`，根本不是`fork()`。

* * *

不，我不认为它可以做到。您会看到，`Process.spawn`使用默认的空白状态和本机代码创建一个新进程。所以，虽然我可以做一些事情，比如`Process.spawn('dir')`将启动一个*新*的*空白*进程运行`dir`，但它不会克隆*任何*当前进程的状态。它与您的程序的唯一连接是父子连接。

你看，`fork()`这是一个非常低级的调用。例如，在 Linux 上，`fork()`基本上是这样的：首先，创建一个具有*完全*克隆的寄存器状态的新进程。然后，Linux 对所有父进程的页面进行写时复制引用。然后 Linux 会克隆一些其他进程标志。显然，所有这些操作都只能由内核完成，而 Windows 内核没有这样做的工具（也无法修补）。

从技术上讲，只有本机程序需要操作系统来获得某种类似的`fork()`支持。任何一层代码都需要它上面的层的合作才能完成类似`fork()`. 所以原生C代码需要内核的配合来fork，而Ruby理论上只需要解释器的配合来做fork。但是，Ruby 解释器没有快照/恢复功能，这将是实现分叉所必需的。正因为如此，普通的 Ruby 分叉是通过分叉解释器本身来实现的，而不是 Ruby 程序。

因此，如果您可以修补 Ruby 解释器以添加停止/启动和快照/恢复功能，那么您可以做到，但除此之外呢？我不这么认为。

那么你有什么选择呢？这是我能想到的：

*   修补 Ruby 解释器
*   修补`fork()`用于可能使用线程或生成的代码
*   获得一个 UNIX（我建议这个）
*   使用 Cygwin

编辑1：我不建议使用Cygwin的fork，因为它涉及特殊的Cygwin进程表，**没有**写时复制，这使得它非常低效。此外，它涉及很多来回跳跃和大量复制。尽可能避免它。此外，由于 Windows 不提供复制地址空间的功能，因此分叉很可能会失败，而且在很多时候都会失败（请参阅[此处](http://cygwin.com/cygwin-ug-net/highlights.html)）。

# iphone - 使用公共只读 getter 发布 iVar

> ID：12220025
> 
> 赞同：1
> 
> 时间：2012-08-31T17:30:23.173
> 
> 标签：iphone, objective-c, ios, memory-management

如何使用公共只读属性通过 ARC 释放内存？假设我有以下代码：

```
SomeClass.h:

@interface SomeClass : NSObject
@property (readonly, nonatomic, strong) NSArray* someArray;
@end

SomeClass.m:

#import "SomeClass.h"
@implmentation SomeClass
@synthesize someArray = _someArray;

- (void)dealloc {
    self.someArray = nil;  //causes compiler error because of public readonly
    _someArray = nil;  //does this correctly release the object?
}

@end 
```

据我了解，您在 ARC 中解除分配的方式是使用 getter 方法将所有强属性设置为 nil。由于该变量被公开声明为“只读”，因此编译器将不允许使用 getter 方法。根据我对 ARC 的了解，将 iVar 设置为 nil 确实会在底层代码中调用 release。这个对吗？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T17:36:00.790

当您将其设置为 nil 时，您是在告诉编译器您没有进一步引用它，它将为您添加版本。它只读的事实只是意味着外部类无法访问它，但它仍然是一个强引用，因此您需要摆脱该引用才能正确释放它。您无法使用 self.someArray 访问它，因为使用 self 是通过属性名称而不是成员变量访问它。

# css - CSS Sibling / Tilde 作为按钮“动画”

> ID：12220032
> 
> 赞同：0
> 
> 时间：2012-08-31T17:31:06.023
> 
> 标签：css, css-selectors

这样的事情可能吗？

```
<style>  
a,
a:active~a.active {
    color:#000;
    background:#fff;
}
a.active,
a:active {
    background:#000;
    color:#fff; 
}
</style> 
```

此 CSS 代码已应用，但被 a.active 本身覆盖。我试过了！important，但这也会覆盖 a.active ！

演示：http: [//jsfiddle.net/77eP4/](http://jsfiddle.net/77eP4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:05:49.660

`a:active~a.active`仅适用于`a.active`元素*之后*的`a:active`元素。之前没有选择器将样式应用于`a.active`元素`a:active`。你不能用`!important`任何一个来解决这个问题；你需要JavaScript。

# java - 运行远程应用程序但不是整个桌面

> ID：12220043
> 
> 赞同：2
> 
> 时间：2012-08-31T17:31:29.047
> 
> 标签：java

在我工作的公司中，我们有一个用 Java 制作的应用程序在两个地方（比如说 Merida 和 Coatza）上运行，并且都有不同的数据库。Merida 的用户只是偶尔使用该程序来获取一些信息或捕捉东西。现在公司老板决定控制 Merida 的几乎所有东西，但由于运营逻辑，我们无法合并数据库。

问题是，当应用程序使用持久性单元连接coatza 时，它的速度非常慢，因为该应用程序不准备使用远程数据库（至少不具备高性能）。

我想到了类似teamviewer的东西来远程运行应用程序而不是数据库，但是我不想运行完整的桌面，只运行应用程序。或者在 JCurses 上开发程序的一部分，以便可以从 coatza 运行它，但是没有足够的文档，我们使用了很多表模型。

有什么我可以做的吗？

该应用程序是一个桌面应用程序。我们使用 Jboss 5 作为服务器。休眠和 JPA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:49:17.627

我有类似的情况，我们需要在不同的位置使用相同的应用程序，因为许可证太贵了。我在 Windows Server 2008 上使用了一个名为 RemoteApp 的功能。最好的部分是您可以为远程计算机上的任何应用程序提供桌面快捷方式，您需要做的就是打开它并登录，并且只有特定的应用程序开始运行，而不是整个桌面。remoteapp 还有一个 Web 界面，因此您可以简单地登录并选择要运行的任何应用程序。有关更多详细信息，请查看[http://www.techotopia.com/index.php/Configuring_RemoteApps_on_Windows_Server_2008](http://www.techotopia.com/index.php/Configuring_RemoteApps_on_Windows_Server_2008)

# jquery - jQuery Ajax 在实时服务器上返回 500 内部服务器错误，在 localhost 上正常

> ID：12220049
> 
> 赞同：0
> 
> 时间：2012-08-31T17:32:05.333
> 
> 标签：jquery, ajax

我有一个从数据库填充的表。用户可以通过单击旁边的删除按钮来删除一行。单击后，该行消失。这适用于我的本地主机，但在实时服务器上我收到 500 内部服务器错误。

奇怪的是，有一个非常相似的函数与另一个元素相关联并且工作正常。我只是复制了不是我写的原始的。我只是想知道为什么在实时服务器上原始的作品和我相同的代码没有。

这是我的代码：

```
$K2('.deleteNakladyButton').click(function(event){
  event.preventDefault();
  if (confirm(K2Language[3])) {
    var element = $K2(this).parent().parent();
    var url = $K2(this).attr('href');
    $K2.ajax({
     url: url,
     type: 'get',
     success: function(){
       $K2(element).fadeOut('fast', function(){
         $K2(element).remove();
       });
     }
   });
 }
}); 
```

原始的在它所触发的类的名称上是不同的。原文说`.deleteAttachmentsButton`。

这个功能对网站来说并不重要，但它会为我的客户增加一点舒适感。

谢谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:41:38.930

在我看来，这有（至少）两个可能的原因。如前所述，500 internal server error 表示调用服务器成功，但服务器不知道如何处理请求。

1.  看到服务器上的代码知道对ajax发送的参数做什么了。
2.  检查 var 'url' 是否包含正确的 url。

# java - 关于读取文件和优化性能

> ID：12220052
> 
> 赞同：0
> 
> 时间：2012-08-31T17:32:30.483
> 
> 标签：java, io

我正在对 IO 进行一些研究，并阅读了以下有关缓冲技术的文章。为了最大限度地减少底层操作系统的磁盘访问和工作，缓冲技术使用临时缓冲区以分块方式读取数据，而不是在每次读取操作时直接从磁盘读取数据。

给出了没有和有缓冲的例子。

无缓冲：

```
try 
{ 
  File f = new File("Test.txt");
  FileInputStream fis = new FileInputStream(f);
  int b; int ctr = 0; 

  while((b = fis.read()) != -1) 
  { 
    if((char)b== '\t') 
    { 
      ctr++; 
    } 
  } 
  fs.close();
 // not the ideal way
 } catch(Exception e)
 {} 
```

带缓冲：

```
try
{
  File f = new File("Test.txt");
  FileInputStream fis = new FileInputStream(f);
  BufferedInputStream bs = new BufferedInputStream(fis);
  int b;
  int ctr = 0;
  while((b =bs.read()) != -1)
  {
    if((char)b== '\t')
    {
      ctr++;
    }
  }
  fs.close(); // not the ideal way
}
catch(Exception e){} 
```

结论是：

```
Test.txt was a 3.5MB  file 
Scenario 1 executed between 5200 to 5950 milliseconds for 10 test runs 
Scenario 2 executed between 40 to 62 milliseconds for 10 test runs. 
```

在Java中还有其他更好的方法吗？或任何其他方法/技术来提供更好的性能？请指教..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:38:17.750

您的代码的问题是您正在按字节读取文件（每个请求一个字节）。将其逐块读取到数组中 - 使用 Buffer 时性能将等于 1。

您可能还想尝试 NIO 和内存映射文件，请参阅[http://www.linuxtopia.org/online_books/programming_books/thinking_in_java/TIJ314_029.htm](http://www.linuxtopia.org/online_books/programming_books/thinking_in_java/TIJ314_029.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T18:22:47.763

> 在Java中还有其他更好的方法吗？或任何其他提供更好性能的方法/技术？

就 IO 性能而言，如果没有很多其他代码，这可能是最好的。无论如何，您很可能会受到 IO 限制。

> 而((b =bs.read()) != -1)

逐字节读取是非常低效的。如果您正在阅读文本文件，那么您应该使用 a`BufferedReader`代替。这会将字节数组转换为`String`.

```
BufferedReader reader = new BufferedReader(new InputStreamReader(fis));
...
while ((String line = reader.readLine()) != null) {
   ...
} 
```

此外，对于任何 IO，您应该始终在 try/finally 块中执行它以确保您关闭它：

```
FileInputStream fis = new FileInputStream(f);
BufferedReader reader;
try {
    reader = new BufferedReader(new InputStreamReader(fis));
    // once we wrap the fis in a reader, we just close the reader
} finally {
    if (reader != null) {
       reader.close();
    }
    if (fis != null) {
       fis.close();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T19:13:37.543

您可以一次读取数据块，这仍然比使用缓冲输入更快。

```
FileInputStream fis = new FileInputStream(new File("Test.txt"));
int len, ctr = 0;
byte[] bytes = new byte[8192];

while ((len = fis.read(bytes)) > 0)
    for (int i = 0; i < len; i++)
        if (bytes[len] == '\t')
            ctr++;
fis.close(); 
```

您也可以尝试内存映射。

```
FileChannel fc = new FileInputStream(new File("Test.txt")).getChannel();
ByteBuffer bb = fc.map(FileChannel.MapMode.READ_ONLY, 0, fc.size());
int ctr = 0;
for (int i = 0; i < bb.limit(); i++)
    if (bb.get(i) == '\t')
        ctr++;
fc.close(); 
```

我希望这两个选项的速度都快两倍。

# php - 使用 PHP 获取种子的当前种子 IP 地址

> ID：12220054
> 
> 赞同：-5
> 
> 时间：2012-08-31T17:32:37.963
> 
> 标签：php, p2p, bittorrent

我正在研究类似 BitTorrent 的东西。如何以在 BitTorrent 客户端中显示的方式显示当前播种机的 IP 地址和他们的国家标志？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:01:24.820

有两个很大程度上独立的部分 - 查询种子跟踪器的种子 IP，以及对 IP 地址进行反向地理编码以确定国家/地区。

反向地理编码部分很常见，而且很容易完成。[这个问题](https://stackoverflow.com/questions/1033/ip-to-country)列出了几个选项，[这一个是类似的，但专门针对 PHP](https://stackoverflow.com/questions/3650006/get-country-of-ip-address-with-php)

由于各种类型的种子跟踪器，torrent-tracker-querying 部分有点复杂。[这个问题](https://stackoverflow.com/questions/5140300/sending-scrape-request-for-getting-torrents-seeds-and-peers)解释了你需要做什么

# perl - 在 Perl 中读取用户输入时，如何让 Perl 不显示“Terminating on signal SIGINT(2)”？

> ID：12220055
> 
> 赞同：2
> 
> 时间：2012-08-31T17:32:37.850
> 
> 标签：perl, input, io

我对 Perl 很陌生，目前我正在使用 ActiveState Perl 在 Windows 7 上学习它。这是我的程序。

```
chomp(my @lines = <STDIN>);

foreach (sort @lines) {
    print $_;
} 
```

运行程序时，我输入几行字符串，然后按`Ctrl`+`c`告诉程序我已经完成输入。但是，在我得到结果（从 生成`print $_;`）之后，我也收到了这条消息：**Terminating on signal SIGINT(2)**。如何禁用此消息？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T17:35:20.470

对于 Windows，表示行尾，`Ctrl + Z`然后按`Enter`

按下`Ctrl + C`会将中断信号发送到您的程序，这是`Terminating on SIGINT`您看到的消息的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T17:35:40.407

在 Linux 中，按`ctrl`+ `D`(EOF) 而不是`ctrl`+`C`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T17:51:13.780

你可以处理这样的信号：

```
$SIG{INT} = sub { print("Caught SIGINT but continue!\n"); }; 
```

用于键盘中断。这是一个例子。

# sql - 需要使用 sp_MSforeachtable 将包含表名的约束添加到 sql 表

> ID：12220057
> 
> 赞同：0
> 
> 时间：2012-08-31T17:32:42.267
> 
> 标签：sql, sql-server, sp-msforeachtable

我正在尝试使用 sp_MSforeachtable 向我的所有具有命名约束的表添加一个新列。

到目前为止，我已经这样做了：

```
USE [MYTable]
GO
exec sp_MSforeachtable 'ALTER TABLE ? ADD ChangedBy nvarchar(100) DEFAULT (suser_name()) NOT NULL' 
```

除了约束名称出现类似：DF_TableName_Change_51EF2864 我希望它被命名为 DF_TableName_ChangedBy

我玩过，发现 PARSENAME(''?'',1) 会给我表格的名称。反正有没有使用这个动态构建约束名称？

```
Example: ... CONSTRAINT ''DF_''+PARSENAME(''?'',1)+''_CreatedBy'' DEFAULT ... 
```

（这似乎行不通，但我将其包括在内是为了让您了解我希望可以完成的事情。）

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:49:48.527

这有点麻烦，但您可以通过将列添加为可为空、添加约束、决定要为预先存在的行存储什么值、然后使列不为空来做到这一点。我也会回避不受支持的、未记录的存储过程。我发现[sp_MSforeachdb 存在问题](https://sqlblog.org/2020/01/31/reliable-flexible-replacement-sp_msforeachdb)（[这里有一个解决方法](https://www.mssqltips.com/sqlservertip/5694/execute-a-command-in-the-context-of-each-database-in-sql-server-part-2/?utm_source=AaronBertrand)），这也可能在这里表现出来。这就是我将如何做到这一点：

```
DECLARE @sql NVARCHAR(MAX);
SET @sql = N'';

SELECT @sql = @sql + CHAR(13) + CHAR(10) + N'ALTER TABLE '
  + QUOTENAME(SCHEMA_NAME([schema_id])) + '.'
  + QUOTENAME(name) 
  + ' ADD ChangedBy NVARCHAR(100) NOT NULL;
ALTER TABLE '  + QUOTENAME(SCHEMA_NAME([schema_id])) + '.'
  + QUOTENAME(name) + ' ADD CONSTRAINT DF_' + name 
  + '_ChangedBy DEFAULT (SUSER_SNAME()) FOR ChangedBy;
  UPDATE ' + QUOTENAME(SCHEMA_NAME([schema_id])) + '.'
  + QUOTENAME(name) + ' SET ChangedBy = N''pre-existing'';
  ALTER TABLE ' + QUOTENAME(SCHEMA_NAME([schema_id])) + '.'
  + QUOTENAME(name) + ' ALTER COLUMN ChangedBy NVARCHAR(100) NOT NULL;'
  FROM sys.tables WHERE is_ms_shipped = 0;

PRINT @sql;
--EXEC sys.sp_executesql @sql; 
```

（当您相信它正在执行您期望的操作时更改注释。请注意，您可能不会在 PRINT 输出中看到整个命令；根据您拥有的表的数量，它可能会被截断。您可以使用 TOP 1 或一个针对 sys.tables 的附加 WHERE 子句，以查看单个表的命令集是什么样的。）

您也可以在之后简单地重命名约束：

```
DECLARE @sql NVARCHAR(MAX);
SET @sql = N'';

SELECT @sql = @sql + CHAR(13) + CHAR(10) 
+ N'EXEC sp_rename N''' + c.name + ''',N''DF_' + t.name
+ '_ChangedBy'', N''OBJECT'';'
FROM sys.default_constraints AS c
INNER JOIN sys.tables AS t
ON c.parent_object_id = t.[object_id]
WHERE c.name LIKE 'DF[_]%[_]Change[_]%'
AND LOWER(c.[definition]) LIKE '%suser%';

PRINT @sql;
--EXEC sys.sp_executesql @sql; 
```

*这些脚本都假设您没有愚蠢的对象名称，例如`1 of My Friend's Cool High % Table!`.*

# javascript - 单击 Oracle APEX 导航栏项时的条件操作

> ID：12220058
> 
> 赞同：0
> 
> 时间：2012-08-31T17:32:49.847
> 
> 标签：javascript, oracle-apex

该应用程序在导航栏中有一个 Home 项（该项在所有页面中）。我希望当单击主页项目时，根据页码向用户显示一个警告框，警告他们，所有未保存的工作都将丢失。如果用户按下是，他或她将被带到应用程序主页并且不会保存任何内容。如果他们按否，他或她将留在页面上。

目前，此对话框显示在每个页面中。在 Oracle Application Express 中`shared components > navigation bar > target area`，这些是我的设置：

目标类型 =`url`

网址目标 =

```
javascript:if(confirm('All unsaved work will be lost?')) 
{window.location.href ='f?p=&APP_ID.:1:&SESSION.:&APP_PAGE_ID.';} 
```

我希望这种行为只发生在选定数量的页面中。当用户单击未包含在此列表中的页面时，不应显示警告框，并将用户带到应用程序主页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:50:37.823

What you'd want is a dynamic action which targets the navigation bar entries. However, there is simply no easy way to selectively enable or disable this action on select items save for testing the text of the anchor tag. That would mean you'd be hardcoding values in your dynamic action to test the links, which i will not recommend. There are no classes that can be assigned, and no onclick events.
You could use the code you posted, and have a javascript function which takes a page id as input parameter and then checks the page id against a list of pages which allow the action, but again complicated. It could be made dynamic with some ajax, but since you're unfamiliar with javascript it's better to first get accustomed with it before tackling that.
So, instead of inventing something like this, take a look at this [save before exit plugin](http://apex-plugin.com/oracle-apex-plugins/dynamic-action-plugin/skillbuilders-save-before-exit_43.html). It will check for unsaved changes, and you can add this just to the pages you want it on.

# c# - 使用普通滚动动画滚动到 Scrollviewer 中的某个位置

> ID：12220064
> 
> 赞同：2
> 
> 时间：2012-08-31T17:33:16.040
> 
> 标签：c#, xaml, windows-8, microsoft-metro, scrollview

我有一个带有滚动查看器的 Metro 风格应用程序。现在我想在用户单击按钮时滚动到某个位置。我试过了：

```
 MainScrollViewer.ScrollToHorizontalOffset(x); 
```

但随后它很快“跳”在那里。我想要一个平滑的动画直到 x。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:48:05.547

没有开箱即用的 API 可以让您做到这一点。也没有可以用动画定位的属性。您需要使用基于帧的动画（基本上确定您在时间轴中的位置以及每个 CompositionTarget.Rendering 事件的位置 - 更新偏移量）或创建一个附加的依赖属性，该属性在其值更改时调用 ScrollToHorizo​​ntalOffset 并将该属性定位为动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:51:10.987

您可以创建一个运行异步的方法并具有一个递增 ScrollToHorizo​​ntalOffset(int x) 的计时器。

说每 500 毫秒它增加 10 像素。

# javascript - 根据屏幕分辨率显示自定义背景图像

> ID：12220065
> 
> 赞同：1
> 
> 时间：2012-08-31T17:33:15.490
> 
> 标签：javascript, css, security, background-image, screen-resolution

对于一个站点，我需要能够根据用户的屏幕分辨率动态显示背景图像。

即当页面开始加载时，在`<head>`一个小的 javascript 加载中，通过 css 将页面的背景设置为类似于`http://example.com/backgrounds/beach_800x600`800 和 600 是通过 javascript 确定的屏幕分辨率。

我正在为最常见的屏幕分辨率创建各种调整大小的图像，这样对于大多数人来说，他们的屏幕分辨率将与现有图像完全匹配。如果没有完全匹配，例如，如果用户的屏幕分辨率`AxB`没有现有图像，则将动态创建图像并调整其大小`AxB`，并将其提供。从那时起，任何具有该分辨率的人都`AxB`将获得该图像。

我的问题是：

1）这是一种安全的方法吗？即，我不希望为自定义屏幕分辨率创建超过 50 个自定义大小的图像。我可以用这种方法留在那个球场吗？使用这种方法是否还有其他安全风险我应该注意？

2）我应该给它一个误差范围是 50 还是 100 像素，所以如果有人的分辨率是 700x900，而我没有，但我有 600x800 或者我有 800x1000，那么我会提供这些现有图像而不是创建新图像那些？如果是这样，我应该将边距设置为 100 像素还是有更好的数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:37:07.500

您可能不想为每个屏幕分辨率创建一个图像，并且您可能希望基于浏览器窗口大小而不是屏幕分辨率。鉴于窗口几乎可以是*任何*大小，您可能需要重新考虑这一点。

这也可以使用 CSS3 媒体选择器轻松完成，而不是 JavaScript（尽管也可以使用 JavaScript 完成）。

有关媒体查询的一些信息，请参见此处[http://webdesignerwall.com/tutorials/css3-media-queries](http://webdesignerwall.com/tutorials/css3-media-queries)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T17:38:21.900

通过使用 CSS3 媒体查询和`background-size`属性，除了与过时的浏览器兼容之外，几乎不需要 JS。

[**这是一个链接**](http://www.dochub.io/#css/background-size)，其中包含有关`background-size`. 此属性允许您以各种方式缩放图像，而不管用户分辨率如何。有时这可能并不理想。

[**所以我们有 CSS3 媒体查询**](http://css-tricks.com/css-media-queries/)。有了这些，您可以针对某些分辨率（或大于和小于某些分辨率）并告诉浏览器您想相应地显示哪个图像（甚至如何显示它，有或没有`background-size`）。

# vb.net - 编辑 DataGrid 行重定向到另一个页面并在相应字段中保存数据？

> ID：12220066
> 
> 赞同：0
> 
> 时间：2012-08-31T17:33:26.103
> 
> 标签：vb.net, datagridview

我在 VB.Net 中有一个包含以下列的数据网格视图

学生姓名、地址、电话等，并编辑超链接字段。当我单击行上的编辑链接时，它应该将我重定向到 studentdetails 页面并将行值传送到相应的控件，如 Nametext 、 addresstext 、 phonetext 控件等。

我是 vb.net 和 datagridview 的新手。谁能让我知道这是如何工作的？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:00:55.463

在超链接字段的单击事件中放置代码以打开新表单/页面。要访问同一行的其他信息，您可以使用

`DataGridViewName.CurrentRow.Cells(studentName).value`

或者

```
DataGridViewName.Rows(e.rowIndex).Cells(studentName).value 
```

然后，您获取当前行的这些值并将它们传递给启动新页面的任何方法，或设置为编辑表单上的属性。

# ruby-on-rails - Active Record 通过父外键查找

> ID：12220069
> 
> 赞同：0
> 
> 时间：2012-08-31T17:33:40.300
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, activemodel

让我展示所需模型的草图：

1）我有一个 Unit 模型，它连接到 Type 模型（有一个外键）。has_many :人

2)Type - 这是一个简单的模型，一个字符串'name' - 比如('first','second'等)

3）人模型——只是一个人。

我需要做的输出：每种类型都有所有单位，每种类型都有这个单位的所有人

**或者** 我如何通过人员记录访问单位类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T17:45:06.353

所以，我已经解决了这个问题。查询是这样的：

```
Person.includes(units: [:type]).
order(Units.title).group_by {|p| p.unit.type}.
map {|type, v| { type=> v.group_by{|p| p.unit} 
```

对不起，如果我没有正确描述这个问题。

# objective-c - 从 SuperView 中删除对象但仍分配内存？（弧）

> ID：12220072
> 
> 赞同：0
> 
> 时间：2012-08-31T17:34:14.023
> 
> 标签：objective-c, macos, automatic-ref-counting

我的应用程序的内存管理存在一些问题。我分配了一个 NSView 类并将其放在我的一个 Windows 上。一段时间后，我从超级视图中删除了该对象，然后将另一个对象放在它的位置。我遇到的问题是当我删除它时没有释放内存。它继续保持与以前一样多的内存，如果我添加更多该类，它会继续堆积在内存中。我的问题是，即使在对象被删除之后，删除该对象是否会删除该类所持有的所有对象，或者是否保留了一些指针？如有必要，我可以发布代码。

谢谢！

编辑：这是我用来分配它的代码

```
MyClass *theClass1 = [[MyClass alloc] initWithFrame:frameRect];
[self.window.contentView addSubview:theClass1]; 
```

这是我用来释放它的代码

```
[[self.window.contentView subviews] makeObjectsPerformSelector:@selector(removeFromSuperview)]; 
```

我在计时器上创建它，每分钟更新一次。我没有在其他任何地方引用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:58:40.763

每个对象的内存应该为类的每个实例单独处理。删除一个实例不应影响其他实例的分配（除非您有一些自定义代码在寻找该类的其他实例）。

至于 NSView 的删除，`removeFromSuperview`确实会释放接收器（被删除的视图），这就是为什么 Apple 文档`NSView`会告诉`retain`它，如果以后仍然需要它。

在声明、实例化、添加然后删除的地方发布代码将有助于获得更具体的答案。

# ruby-on-rails - Rails g黄瓜安装 - 找不到activesupport-3.1.3

> ID：12220073
> 
> 赞同：0
> 
> 时间：2012-08-31T17:34:21.237
> 
> 标签：ruby-on-rails, cucumber, bundler

我正在使用 RoR，并且正在尝试使用从“Rails 3 in Action”一书中学习的 Cucumber 框架。但是，当我输入

```
rails g cucumber:install 
```

我收到以下错误。

```
Could not find activesupport-3.1.3 in any of the sources
Run `bundle install` to install missing gems. 
```

但是，当我执行“捆绑安装”时，我得到以下输出显示已安装 activesupport-3.1.3

```
...
Using rake (0.9.2.2) 
Using multi_json (1.3.6) 
Using activesupport (3.1.3) 
Using builder (3.0.0) 
Using i18n (0.6.0) 
Using activemodel (3.1.3) 
Using erubis (2.7.0)
... 
```

我的 Gem 文件可以在这里找到，在这里[输入链接描述](http://pastebin.com/bDAQbxaE "Gemfile Pastebin")。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:31:55.513

试试`bundle exec rails ...`也许其他版本的 Rails 可以使用？

env 变量`BUNDLE_GEMFILE`也设置为其他 Gemfile？

# c# - 将 HtmlTextWriter 与 string.Format 一起使用的最佳实践

> ID：12220074
> 
> 赞同：0
> 
> 时间：2012-08-31T17:34:32.077
> 
> 标签：c#, asp.net, .net, resharper

Resharping 正在抱怨 HtmlTextWriter 中的 string.Format。

![在此处输入图像描述](../Images/c37b2e07cd90dcb8416fe9f8eab68ae4.png)

将 HtmlTextWriter 与 string.format 一起使用的最佳实践是什么？

预先感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:40:34.643

关键是您不需要使用 string.Format。你可以这样做：

```
writer.Write("{0}",1); 
```

请参阅：http: [//msdn.microsoft.com/en-us/library/acsz4w2k.aspx](http://msdn.microsoft.com/en-us/library/acsz4w2k.aspx)

**HtmlTextWriter.Write 方法（字符串，对象 []）**

> 将包含对象数组的文本表示形式的格式化字符串以及任何挂起的制表符间距写入输出流。此方法使用与 String.Format 方法相同的语义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T17:40:20.760

所有这些类的`Write`and`WriteLine`方法也可以采用格式参数：

```
writer.Write("{0} {1}", x, y); 
```

# javascript - javascript 文本验证不起作用。警报消息不显示

> ID：12220078
> 
> 赞同：0
> 
> 时间：2012-08-31T17:35:03.450
> 
> 标签：javascript, forms, validation

我有一个简单的表单验证脚本：

```
<script language=”javascript”&gt;
    function return validate_form(register)
 {      
if (""==document.forms.register.FNAME.value){
    alert("This field is required!");
    document.forms.register.FNAME.focus();
    return false;
}    
if (""==document.forms.register.LNAME.value){
    alert("This field is required!");
    document.forms.register.LNAME.focus();
    return false;
}
if (EMAIL.value.search( /^[a-zA-Z]+([_\.-]?[a-zA-Z0-9]+)*@[a-zA-Z0-9]+([\.-]?[a-zA-Z0-9]+)*(\.[a-zA-Z]{2,4})+$/ ) == -1){
    alert(“Wrong email”);
    return false;
}       
if('0'==document.forms.register.GENDER.value){
    alert("You must select an option!");
    document.forms.register.GENDER.focus();
    return false;
}
if (""==document.forms.register.ADDRESS.value){
    alert("This field is required!");
    document.forms.register.ADDRESS.focus();
    return false;
}
if (""==document.forms.register.CONTACTNO.value){
    alert("This field is required!");
    document.forms.register.CONTACTNO.focus();
    return false;
}
}
</script> 
```

使用 onSubmit 处理程序调用该函数，但单击提交时没有任何反应。它直接进入 PHP 脚本，而不是 javascript '拦截'它。有什么想法吗？

表单 HTML：

```
 <form name="register" action="register.php" method="POST" onsubmit="return validate_form(register);">
<table width="100%" border="0">
<tr>
  <td width="46%" height="24" align="right">First Name:</td>
  <td width="54%"><input name="FNAME" type="text" size"20" /></td>
</tr>
<tr>
  <td height="24" align="right">Last Name:</td>
  <td><input name="LNAME" type="text" size"20" /></td>
</tr>
<tr>
  <td height="24" align="right">Email Address</td>
  <td><input name="EMAIL" type="text" size"20" /></td>
</tr>
<tr>
  <td height="24" align="right">Gender:</td>
  <td><select name="GENDER">
      <option value="" selected="selected">- Select One -</option>
      <option value="Male">Male</option>
      <option value="Female">Female</option></select></td>
</tr>
<tr>
  <td height="24" align="right">Address:</td>
  <td><input name="ADDRESS" type="text" size"20" /></td>
</tr>
    <tr>
  <td height="24" align="right">Contact No.:</td>
  <td><input name="CONTACTNO" type="text" size"20" /></td>
</tr>
<tr>
  <td height="24" align="right">Password</td>
  <td><input name="PASSWORD" type="password" size"20" /></td>
</tr>
 <tr>
  <td height="24" align="right">Re-type Password</td>
  <td><input name="PASSWORD2" type="password" size"20" /></td>
</tr>
<tr>
<td>&nbsp;</td>
<td><input name="submit" type="submit" value="Register" /></td>
</tr>
</table>

</form> 
```

警报消息不显示？怎么了？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T17:50:23.613

好吧，我对您的代码进行了一些重构，以使其更有意义和可维护性

html变化：

```
<form name="register" action="register.php" method="POST" onsubmit="return validate_form();"> 
```

示例 JS：

```
function validate_form() {
    var frm = document.forms.register;
    function focus_and_false(el) {
        el.focus();
        return false;
    }
    if( frm.FNAME.value === "" ) { /* repeat this for all form elements you want to validate */
        alert("This field is required!");
        return focus_and_false(frm.FNAME); /* this is not the best, but i'm showing you how you can reduce overall code by not rewriting the same things. */
    }
    return true;
}​ 
```

[这是一个示例](http://jsfiddle.net/rlemon/GV7WL/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T17:40:04.877

您的 javascript 中有一个巨大的语法错误...

```
function return validate_form(register) 
```

应该

```
function validate_form(register) 
```

也许你可以从那个开始:)

并在函数启动后添加一个警报，以便您知道当您调用它时，它实际上会执行或至少尝试执行。

另一个语法错误：

```
<script language=”javascript”&gt; 
```

应该

```
<script type="text/javascript"> 
```

最后我将函数名称更改为

```
function validateForm(register) 
```

让我知道它是否有效:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T17:43:09.150

您的代码中有花引号

```
alert(“Wrong email”);  <---bad quotes 
```

你不应该只使用一个名字

```
onsubmit="return validate_form(register);" 
```

传入 this 指向当前范围，即表单元素。

```
onsubmit="return validate_form(this);" 
```

什么是电子邮件？

```
EMAIL.value 
```

不要只引用元素名称。

# javascript - Firefox中的Javascript事件范围问题？

> ID：12220080
> 
> 赞同：-1
> 
> 时间：2012-08-31T17:35:05.650
> 
> 标签：javascript, events, firefox

在我们的应用程序中，我们试图通过变量作用域来捕获所有 ajax 调用的 e（事件）。例如：

```
function whatever (e) {
        stuff();
}

function stuff() {
        thingy();
} 

function thingy() {
        // I have access to e
} 
```

如果不将 e thru 作为参数传递，子函数应该可以访问其父事件。它在 chrome 和 IE 中工作，但在 firefox 中不工作，e 在 firefox 中始终未定义。我们不想在我们的应用程序中通过数百个 ajax 调用并将 e 作为参数传递到每个位置以使其工作。还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:38:01.140

不可以。该参数`e`仅适用于直接定义在内部的代码`whatever()`或您传递引用的任何函数。它不适用于从内部调用的函数，`whatever()`除非您将其传递给它们。

这是您问题中在所有浏览器中都失败的代码的确切实现：http: [//jsfiddle.net/jfriend00/ReNKU/](http://jsfiddle.net/jfriend00/ReNKU/)

至于解决方案，您可以使用本地函数，然后`e`像这样对其他两个函数可用，因为它们是在以下范围内定义的`whatever()`：

```
function whatever (e) {
    function stuff() {
        // e is available here
        thingy();
    } 

    function thingy() {
        // e is available here
    }

    // e is available here
    stuff();
} 
```

或者，您可以将它作为参数传递给您的每个原始函数：

```
function whatever (e) {
        stuff(e);
}

function stuff(e) {
        thingy(e);
} 

function thingy(e) {
} 
```

这个关于函数参数可用的问题与 Firefox 无关，因为这是一个 JavaScript 实现选择，在任何地方都是一样的。

如果您的特定代码恰好在其他一些浏览器中工作，那么显然有一个名为的全局变量`e`或`e`在它正在拾取的其他父上下文中，并且恰好在其中具有正确的值，但事实并非`e`如此来自你的`whatever(e)`声明。无论如何，依赖这种隐含的行为是不好的。

如果您希望参数 e 可用于其他两个函数，那么您有两个不错的选择：

1.  将其作为参数传递给他们。
2.  在范围内定义这些函数，`whatever(e)`以便他们可以直接看到参数。

* * *

如果您真正想做的是访问在事件处理程序中发生的事件，那么您真的只需要知道这一点：

如果您使用`.addEventListener()`，则事件数据结构将作为第一个参数传递给事件处理程序。`.addEventListener()`在包括 IE9 在内的所有支持的浏览器中都是如此。如果您`.attachEvent()`在旧版本的 IE 中使用，则事件数据结构在全局变量中`window.event`，您可以在那里访问它。在您的事件处理程序启动时，如果您想让此数据结构可用于您调用的其他函数，您应该将其作为参数传递给它们。然后，他们的行为将完全是浏览器安全的。

这是一个快速的跨浏览器事件注册函数，它也处理事件差异：

```
// add event cross browser
function addEvent(elem, event, fn) {
    if (elem.addEventListener) {
        elem.addEventListener(event, fn, false);
    } else {
        elem.attachEvent("on" + event, function() {
            // set the this pointer same as addEventListener when fn is called
            // and get the event data structure from the global variable and
            // pass it to the event handler
            return(fn.call(elem, window.event));   
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T19:17:03.687

jfriend00 关于它不是 Firefox 并不是 100% 正确的。它实际上与Firefox有关。在 chrome 和 IE 中，事件可以通过名称全局访问（只要您知道事件的名称）。但是，firefox 处理事件的方式与 ie/chrome 不同。除了通过函数链将事件作为参数传递之外，我不知道还有其他解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T19:21:21.717

jsfiddle.net/LU4yT/2 这个 jsfiddle 链接显然有不同的结果，具体取决于您使用的浏览器所以，我想说这个问题是特定于浏览器的......虽然我可能不得不同意 jfriend00 虽然你可以访问全局事件将事件作为参数传递会更好（尽管会占用更多内存）。

# qt - 如何在 Qt 中创建自定义多进度条

> ID：12220083
> 
> 赞同：0
> 
> 时间：2012-08-31T17:35:11.967
> 
> 标签：qt

我正在开发一个多段下载管理器。我想显示分割过程。QGraphicsScene 工作正常，但不幸的是它减慢了下载速度。除了使用 QProgressBars 之外，还有没有更好的选择。我正在使用 QNetworkAccessManager 下载文件。如果我将 QNetworkManager 对象的 downloadProgress 信号连接到利用 QGraphicsView 绘制的 Main Gui Thread 的插槽，在某些情况下下载速度甚至会下降 10 倍

```
 // a custom progress bar
void Download::showGProgress(int num, float prgrss)                                 //slot
{
    prgrss=prgrss/100;
    x_coord=(ui->graphicsView_2->width()-3)*prgrss;                              
    for(float b=0;b<=x_coord;b=b+0.5)
    {
        progress.addRect(0,0,x_coord,y_coord);

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:45:02.520

创建自己的小部件来做你想做的事

这比听起来容易。

创建一个从 QWidget 子类化的类。在这个小部件中制作一个包含 100 个 Qlabels 的 Horizo​​ntal Sizer（将 QLabels 存储在一个向量中）。通过将每个 QLabel 的背景颜色设置为不同的颜色，给它插槽以“更新”当前进度。这应该很容易逐步完成，这意味着您将当前的“百分比”存储为成员变量，然后只调整获得所需百分比所需的字段（如果您是每次都从头开始）。

添加将大小调整器切换到垂直大小而不是水平大小的功能，以使其更加可定制。

这使您可以对进度条执行的操作发挥创意，因为每个元素可以是不同的图片、不同的颜色或任何您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T23:41:45.570

`QNetworkAccessManager`没有螺纹。它是异步的，使用当前线程事件循环。它创建的 HTTP 请求是线程方面。

这可以解释为什么您在主线程中所做的任何事情理论上都会减慢下载操作。虽然不一定是底层线程下载本身，而是信号响应时间，可以让您快速获得有关它的反馈。

您可能应该做的是创建自己的 QThread 子类，并`QNetworkAccessManager`在 run() 方法中创建。[`QEventLoop`](http://qt-project.org/doc/qt-4.8/qeventloop.html)然后在线程中创建一个并调用`exec()`

简而言之，您需要创建自己的 Threaded QNetworkAccessManager。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T17:47:33.220

你试过 QProgressBar 吗？也许您可以编写它的子类来处理您自己的属性。

# php - 在博客控制器中加载 Ion auth 控制器

> ID：12220090
> 
> 赞同：0
> 
> 时间：2012-08-31T17:35:34.690
> 
> 标签：php, codeigniter

我正在构建一个博客应用程序。我有一个主要的博客控制器。在边栏中，我从视图中加载了“Ion Auth Library”登录模板。但它返回这个：

```
 Fatal error: Call to undefined function form_open() in C:\xampp\htdocs    \code\application   \views\auth\login.php on line 9 
```

那么，如何在 blog.php 控制器中加载 auth.php 控制器？我应该在博客控制器中复制和粘贴身份验证控制器，还是有其他方法可以做到这一点？

多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:43:50.663

看起来您还没有加载表单助手。在博客控制器的构造函数中输入：

```
$this->load->helper('form'); 
```

您可以在此处阅读函数 form_open() 和表单助手的工作原理：http: [//codeigniter.com/user_guide/helpers/form_helper.html](http://codeigniter.com/user_guide/helpers/form_helper.html)

# c# - 找不到类型或命名空间名称“OracleConnection”

> ID：12220095
> 
> 赞同：4
> 
> 时间：2012-08-31T17:35:53.200
> 
> 标签：c#, asp.net, namespaces, oracleclient, system.data.oracleclient

每次尝试调试程序时都会出现此错误：

> CS0246：找不到类型或命名空间名称“OracleConnection”（您是否缺少 using 指令或程序集引用？）

这发生在声明`private readonly OracleConnection oracleConnection;`中（以及其他一些地方）

我一直在尝试一些建议的解决方案，但到目前为止都没有奏效：

*   我添加了对`System.Data.OracleClient.dll`
*   我的目标框架设置为`.NET Framework 4`
*   我已经尝试过包括`using System.Data.OracleClient`和手动写出`System.Data.OracleClient.OracleConnection`

**编辑：**我使用的代码如下：

```
using System;
using System.Data.SqlClient;
using System.Data.SqlTypes;
using System.Collections.Generic;
using System.Data.OleDb;
using System.Linq;
using System.Web;
using System.Data;
using System.Configuration;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;

namespace Foo
{
    public class DBHandler
    {
        private readonly OracleConnection oracleConnection;
        private readonly OracleCommand oracleCommand;
        private readonly OracleDataAdapter oracleAdapter; 
```

到目前为止没有任何工作，所以任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T17:43:37.510

首先，对于 Oracle，System.Data.OracleClient 已被弃用，因此现在不推荐使用。有关详细信息，请访问[ADO.NET 团队博客文章](http://blogs.msdn.com/b/adonet/archive/2009/06/15/system-data-oracleclient-update.aspx)

推荐使用甲骨文公司发布的甲骨文客户端。[从Oracle .NET 开发人员中心](http://www.oracle.com/technetwork/topics/dotnet/index.html)下载 Oracle 数据访问组件

然后以同样的方式，您可以通过添加对 Oracle.Client dll 的引用来使用 OracleConnection、OracleCommand 等。

**进一步请注意，此库不适用于 .NET 4 客户端配置文件。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T18:06:46.830

我认为 using 指令已被删除。

```
using System;
using System.Data.SqlClient;
using System.Data.SqlTypes;
using System.Data.OracleClient; //Add This
using System.Collections.Generic;
using System.Data.OleDb;
using System.Linq;
using System.Web;
using System.Data;
using System.Configuration;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;

namespace Foo {

public class DBHandler
    {

        private readonly OracleConnection oracleConnection;
        private readonly OracleCommand oracleCommand;
        private readonly OracleDataAdapter oracleAdapter; 
```

您是否可能单独尝试每个步骤，然后在它们不起作用时将它们重新设置？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T16:45:15.160

我设法解决了这个问题，尽管我不知道我所做的更改如何影响任何事情。DBHandler.cs 文件位于名为“App_Code”的文件夹中。将文件上移一级（进入主项目文件夹）似乎已经解决了错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-20T04:52:10.083

Project->Add reference->Oracle.DataAccess
这里有两个版本——2.something 和 4.something。当我选择版本 4 时，它没有解析命名空间，但是当我选择版本 2 时，它解决了！！

# actionscript-3 - 如何将任何类型的数据库（例如 MySQL）连接到用 Adob e Flash cs5.5 开发的应用程序

> ID：12220097
> 
> 赞同：1
> 
> 时间：2012-08-31T17:35:59.590
> 
> 标签：actionscript-3, flash, actionscript, database-connection, flash-cs5

我正在用 Adob​​e Flash cs5.5 开发一个测验软件。因此，该软件可以使用数据库来显示问题和记录分数。我计划将其开发为可以检索问题和更新分数的普通应用程序（类似 Visual Basic）。

我到处寻找，但我找不到。我只能看到使用 PHP 和 MYSQL 连接到服务器端数据库。我的应用程序是一个独立的应用程序。我认为有一些方法可以使用 ActionScript 3.0 连接数据库。那么如何使用任何类型的数据库连接到 flash cs5.5 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T20:27:13.760

我建议您使用 XML 而不是 SGDB。它似乎是一个简单的应用程序，任何人都可以管理编写良好的 XML 文件。

如果您真的需要在这些数据上使用一些内容管理器，您可以构建与数据库集成的东西并根据您的数据库生成 XML。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T21:42:29.157

有几种方法可以访问本地数据（或数据库）。

1.  使用 Adob​​e AIR。这使您可以访问文件系统，以便您可以读取和写入文件。它不会让您连接到服务器数据库，但您可以读取/写入 xml（或任何）数据，包括像 sqlite 这样的数据库文件，并使用 AS3 类来解析所述文件。[http://www.flex-blog.com/adobe-air-sqlite-example/](http://www.flex-blog.com/adobe-air-sqlite-example/)

    还有像[http://code.google.com/p/assql/](http://code.google.com/p/assql/)这样的 AIR 库，用于帮助数据库连接

2.  使用 MDM Zinc（或类似产品）。 [http://www.multidmedia.com/software/zinc/](http://www.multidmedia.com/software/zinc/) Mdm 锌在 AS3 中为您提供了大量额外的 API，包括数据库支持。

3.  使用`FileReference`该类让用户浏览他们的计算机以查找数据库文件（最好是.xml），然后`FileReference`再次使用让用户将该文件保存在他们想要的任何位置。

4.  使用远程数据库并创建服务器端页面/服务来提供您需要的数据，并`URLLoader`像使用任何 flash 文件一样使用普通类。似乎您不想使用此方法。

# c# - 在数据库中递归查询标志

> ID：12220102
> 
> 赞同：0
> 
> 时间：2012-08-31T17:36:19.817
> 
> 标签：c#, sql

我有一个层次结构`Article`，每个`Article`都有一个属性`IsCommentable`。这可以采用 true、false 或 NULL 值。如果为 NULL，则表示它继承了基于其父级的值。文章可以递归嵌套，“深度”没有限制。

现在，我需要进行查询，从数据库中获取所有可评论的文章。有什么方法可以通过 SQL 查询加载这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:44:37.453

假设您使用的是 SQL Server，您可以使用[递归 CTE](http://msdn.microsoft.com/en-us/library/ms186243%28v=SQL.105%29.aspx)来完成。

```
WITH cte (id, iscommentable) AS (
  SELECT id, iscommentable FROM Article WHERE iscommentable IS NOT NULL
  UNION ALL
  SELECT a1.id, a2.iscommentable FROM Article a1
  INNER JOIN cte a2 ON a1.parent=a2.id
  WHERE a1.iscommentable IS NULL
)
SELECT * FROM cte 
```

SQL 小提琴[示例](http://sqlfiddle.com/#!3/0475f/2/0)。

# javascript - 使用 jquery 附加时，onclick 不会触发提交输入

> ID：12220105
> 
> 赞同：0
> 
> 时间：2012-08-31T17:36:22.453
> 
> 标签：javascript, jquery, html

html:

```
<input id="save "type="submit" value="Create" class="btn btn-primary"/> 
```

注册onclick的javascript（IsValid是一个在提交前验证的函数，返回true或false）

```
$('#save').click(function () {  
 return IsValid();
}); 
```

请注意，如果我写，这个完全相同的代码可以工作：

```
 <input id="save "type="submit" value="Create" class="btn btn-primary" onclick='javascript: IsValid();'/> 
```

这是另一个不修改标记的选项（createForm 是表单）

```
$('#createForm').submit(function () {   
 return IsValid();
}); 
```

为什么 $('').click 没有注册我的事件处理程序？

表格如下所示：

```
 <form method="post" id="createForm" class="well" action="/ScheduleWorkDay/Create" novalidate="novalidate"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:41:50.727

您的事件处理程序没有注册，因为表单上没有带有 id 的处理程序`save`，但是有一个`save`（带有空格）。删除空间。

```
<input id="save" type="submit" value="Create" class="btn btn-primary"/>

$('#save').click(function () {  
   return IsValid();
}); 
```

应该可以正常工作。

[一个 jsFiddle 显示它工作](http://jsfiddle.net/NBqYm/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:45:53.440

可能你的 id 有空格或者你没有使用 document.ready()

这是工作演示

```
<input id="save" type="submit" value="Create" class="btn btn-primary"/>
$(document).ready(function(){
$('#save').click(function () {  
 alert("invalid");
 });
}); 
```

[演示](http://jsfiddle.net/NS8xy/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T18:07:11.667

奥布莱恩先生是对的。问题是

```
 <input id="save " 
```

id 名称中有一个额外的空格。谢谢！

# winapi - 是否可以使用 Windows Api (win7) 来批量重命名文件？

> ID：12220110
> 
> 赞同：2
> 
> 时间：2012-08-31T17:36:36.400
> 
> 标签：winapi

在包含大量文件的文件夹中，可以选择许多文件并仅重命名一个文件。这个将获得名称`NewName (1)`，其余的将依此`NewName (2)`类推。

有没有办法使用这个算法？

一般来说，我最感兴趣的是使用 WinApi 方法。很容易实现这个特定的算法。我不知道如何深入研究`explorer.exe`并查看它使用什么方法，但它可能是可重用的。

我主要使用`c#`，但任何语言示例都会被接受。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:10:48.197

不是一个函数调用，不。`SHFileOperation()`但是您可以使用标志一次循环一个`FOF_RENAMEONCOLLISION`文件，将每个文件重命名为相同的目标文件名，以便 Windows 生成自己的唯一文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T13:27:51.503

正如我所指出的那样，`Remy Lebeau`我想出了官方的方法。

```
IFileOperation::RenameItems
Declares a set of items that are to be given a new display name.
All items are given the same name.
...
If more than one of the items in the collection at pUnkItems is
in the same folder, the renamed files are appended with a number in
parentheses to differentiate them, for instance newfile(1).txt,
newfile(2).txt, and newfile(3).txt. 
```

[这](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775797%28v=vs.85%29.aspx)是引用的链接。

这也回答了我关于从哪里开始使用 windows shell api 来做事的问题。答案就[在这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ff521731%28v=vs.85%29.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-17T20:31:36.660

是的，可以在这里查看[http://blog.gadodia.net/stupid-windows-trick-mass-renaming/](http://blog.gadodia.net/stupid-windows-trick-mass-renaming/)我用它来组织和编号文件

# android - 为没有 Flash 的 Android 未来做准备

> ID：12220115
> 
> 赞同：0
> 
> 时间：2012-08-31T17:36:57.343
> 
> 标签：android, flash, html

我的应用目前使用 OpenYoutubeActivity API 来启动浏览器并播放 youtube 视频。我想确保从现在起几年后，当 Android 上不再看到 Flash 时，此功能仍然有效。

我的问题是，无论是使用 Flash 还是 HTML5，Android 浏览器是否总是能够播放 youtube 视频，或者我应该做些什么来确保使用 HTML5 播放视频？即网址末尾的“？html5 = 1”。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T20:11:05.237

youtube 视频，可以在 Youtube 应用中打开视频，如果没有安装 youtube 应用，可以在浏览器中打开链接 youtube

```
if(isAppInstalled("com.google.android.youtube", getApplicationContext())) {
    Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("vnd.youtube://" + "WvYsIGYsgJQ"));
    intent.setClassName("com.google.android.youtube", "com.google.android.youtube.WatchActivity"); 
    startActivity(intent);
}
else {
    startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.youtube.com/watch?v=WvYsIGYsgJQ")));
}

public static boolean isAppInstalled(String uri, Context context) {
    PackageManager pm = context.getPackageManager();
    boolean installed = false;
    try {
        pm.getPackageInfo(uri, PackageManager.GET_ACTIVITIES);
        installed = true;
    } catch (PackageManager.NameNotFoundException e) {
        installed = false;
    }
    return installed;
} 
```

# .net - 依赖注入未能为第二个服务合同注入

> ID：12220118
> 
> 赞同：0
> 
> 时间：2012-08-31T17:37:21.010
> 
> 标签：.net, wcf, dependency-injection, spring.net

当我们添加第二个服务合同时，我们遇到了 Spring.Net 依赖注入的问题。

这是设置：

一个带有两个服务合同（SVC 文件）Service1 和 Service2 的 WCF 项目

这是Web.config

```
 <services>
  <service behaviorConfiguration="DefaultBehavior" name="CrestService">
    <endpoint address="https://localhost/Service1.svc" binding="basicHttpBinding" bindingConfiguration="BasicHttpEndpointBinding" name="BasicHttpEndpoint" contract="WCF.IService1" />
  </service>
  <service behaviorConfiguration="DefaultBehavior" name="CrestClientService">
    <endpoint address="https://localhost/Service2.svc" binding="basicHttpBinding" bindingConfiguration="BasicHttpEndpointBinding" name="BasicHttpEndpoint" contract="WCF.IService2" />
  </service>
</services> 
```

这是 Spring.Config

```
<object id="Service1" type="WCF.Service1, WCF" singleton="false">
    <property name="ObjectA" ref="ClassA"/>
</object>
<object id="Service2" type="WCF.Service2, WCF" singleton="false">
    <property name="ObjectA" ref="ClassA"/>
</object> 
```

这是 Service1.svc 标记

```
<%@ ServiceHost Language="C#" Debug="true" Service="Service1" Factory="Spring.ServiceModel.Activation.ServiceHostFactory" %> 
```

这是 Service2.svc 标记

```
<%@ ServiceHost Language="C#" Debug="true" Service="Service2" Factory="Spring.ServiceModel.Activation.ServiceHostFactory" %> 
```

这是我们遇到的问题。

通过上面的设置显示，我们可以让 Service1 正常工作，并且也可以正常进行依赖注入。但是对于 Service2，我们得到一个运行时错误：

> 找不到类型“Service2”，作为 ServiceHost 指令中的服务属性值提供，或在配置元素 system.serviceModel/serviceHostingEnvironment/serviceActivations 中提供。

我尝试在 Spring.config、Web.config 和 SVC Mark-up 中将服务名称声明为 WCF.Service1 和 WCF.Service2 的完全限定名称。通过这样做，我能够让两个 Web 服务正常运行，但是依赖注入无法将对象注入到 Web 服务中。

我相信这是因为对象 id 不接受 spring 配置中的完整限定名。

有没有人知道这里可能存在什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:42:12.857

更新到最新版本的 Spring .NET 1.3.2 似乎解决了这个问题。下载的文件可能是错误的参考或问题。

# ranking - RANK的标准实现

> ID：12220121
> 
> 赞同：1
> 
> 时间：2012-05-07T14:33:27.447
> 
> 标签：ranking

我想实现一个函数，它可以在给定的整数样本上均匀地分布一定数量的等级。例如对于 [1,3,20,30,50,60] 和 3 个类，它将分配数字

*   1 -> 1
*   3 -> 1
*   20 -> 2
*   30 -> 2
*   50 -> 3
*   60 -> 3

你知道这个方法的标准实现吗？我想在没有额外库的情况下实现它。理想情况下，它应该类似于 SAS“RANK”的行为，但任何公认的实现都可以。

我已经尝试过了，但是有许多特殊情况需要考虑（比样本数据更多的类，许多相等的样本数据整数，......）。我不确定如何在一种实现中明智地解决所有异常情况。

编辑：评论指出我实际上想“将数据分成分位数”。输入是一些可能重复的可订购数字列表。我想将 bin 类 1 统一分配给 [maxbin]。我将在 Python 中实现它，但任何关于伪代码或算法或规则的建议都可以。我主要关心的是异常情况，不清楚如何平均分配所有垃圾箱。

这是我在 Python 中的尝试（如果类多于示例数据，则会失败）：

```
import bisect
import math

class QuantileClass:
    def __init__(self, classes, data, fallback=None):
        if not data:
            self.cutoffs=[]
            return

        self.bisect=bisect.bisect_left
        self.fallback=fallback

        s=sorted(data)
        num=len(s)
        cutoff_ranks=[math.ceil((num+1)/classes*c)-1 for c in range(1, classes)]
        self.cutoffs=[s[i-1] for i in cutoff_ranks]

    def __call__(self, value):
        if self.cutoffs:
            return self.bisect(self.cutoffs, value)
        else:
            return self.fallback 
```

# html - Rails simple_format 和“阅读更多”链接的显示与文本内联

> ID：12220123
> 
> 赞同：1
> 
> 时间：2012-08-31T17:38:12.400
> 
> 标签：html, css, ruby-on-rails

应该很容易，但不知何故无法让它工作。我想在我的博客主页上显示截断的文本，并带有一个与文本内联显示的“阅读更多”链接，即

*Lorem ipsum dolor sit amet, consectetur adipiscing elit。Mauris ac tortor et felis aliquet vestibulum sed in sem。Aliquam pharetra ultricies nunc，非 pellentesque ...**阅读更多***

由于我对文本使用 simple_format，因此文本中的所有中断都包含在

标签，我在下面的单独一行中获得阅读更多内容

*Lorem ipsum dolor sit amet, consectetur adipiscing elit。Mauris ac tortor et felis aliquet vestibulum sed in sem。Aliquam pharetra ultricies nunc，非 pellentesque ...*

***阅读更多***

如何将它内嵌在 < p > 标记之后。猜猜这更像是一个 CSS 问题而不是 Rails 问题。同样，我觉得这应该非常简单。我忘记了什么？

这是视图中的代码片段

```
<%= simple_format truncate(h(feed.description), length: 400, separator: ' ') %><%= link_to "Read More", feed_path(feed)%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T02:22:10.383

我怀疑您可以将链接放在 simple_format 内容参数链接中：

```
<%= simple_format truncate((h(feed.description) + link_to("Read More", feed_path(feed))), length: 400, separator: ' ') %> 
```

（注：未测试）

# r - R中更快的矩阵分配的原因

> ID：12220128
> 
> 赞同：3
> 
> 时间：2012-08-31T17:38:26.237
> 
> 标签：r, matrix

发布[在 R、NULL 和 NA 中分配矩阵的最佳方法？](https://stackoverflow.com/questions/1745622/best-way-to-allocate-matrix-in-r-null-vs-na)表明在 R 中编写自己的矩阵分配函数可以比使用 R 的内置 matrix() 函数预分配大矩阵快 8 到 10 倍。

有谁知道为什么手工制作的功能要快得多？R 在如此慢的 matrix() 内部做了什么？谢谢。

这是我系统上的代码：

```
create.matrix <- function( nrow, ncol ) {
x<-matrix()
length(x) <- nrow*ncol
dim(x) <- c(nrow,ncol)
x
}

system.time( x <- matrix(nrow=10000, ncol=9999) )
user  system elapsed 
1.989   0.136   2.127 

system.time( y <- create.matrix( 10000, 9999 ) )
user  system elapsed 
0.192   0.141   0.332 
identical(x,y)
[1] TRUE 
```

我向那些评论认为用户定义的函数速度较慢的人道歉，因为上面链接的答案中发布的内容不一致。我正在查看用户时间，在上面的链接中大约快 8 倍，而在我的系统上，用户定义的与内置的大约快 10 倍。

回应 Joshua 的会话信息请求：

```
> sessionInfo()
R version 2.12.1 (2010-12-16)
Platform: x86_64-unknown-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    
 [5] LC_MONETARY=C              LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 
 [9] LC_ADDRESS=C               LC_TELEPHONE=C            
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

loaded via a namespace (and not attached):
[1] tools_2.12.1 
```

此外，我尝试运行 Simon 的三个示例，而 Simon 给出的第三个示例最快，对我来说却是最慢的：

```
> system.time(matrix(NA, nrow=10000, ncol=9999)) 
   user  system elapsed 
  2.011   0.159   2.171 
> system.time({x=NA; length(x)=99990000; dim(x)=c(10000,9999); x}) 
   user  system elapsed 
  0.194   0.137   0.330 
> system.time(matrix(logical(0), nrow=10000, ncol=9999)) 
   user  system elapsed 
  4.180   0.200   4.385 
```

然而，我仍然认为 Simon 的想法可能是正确的，即`matrix()`最初分配一个 1x1 矩阵然后复制它。有人知道关于 R 内部的任何好的文档吗？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T03:06:52.683

问题是你的`matrix`电话比你想象的要复杂一些。比较以下版本：

```
# copy NA matrix
> system.time(matrix(NA, nrow=10000, ncol=9999))
   user  system elapsed 
  1.272   0.224   1.496 

# replicate NA vector (faster version of what you used)
> system.time({x=NA; length(x)=99990000; dim(x)=c(10000,9999); x})
   user  system elapsed 
  0.292   0.260   0.552 

# fastest - just allocate a matrix filled with NAs 
> system.time(matrix(logical(0), nrow=10000, ncol=9999))
   user  system elapsed 
  0.184   0.308   0.495 
```

因此，在您的示例中，您实际上是在创建一个 1 x 1 NA 矩阵，该矩阵被复制到您指定的大小 - 最慢的方法。对向量执行相同操作会更快（因为它不需要对列使用模）-您以一种有点复杂的方式进行操作（通过创建矩阵，将其转换为向量，然后再转换回矩阵），但是这个想法是一样的。最后，如果你只使用一个空向量，那么矩阵将简单地用`NA`你想要的东西填充，因此不需要额外的工作（最快）。

**编辑**一个重要的说明，虽然：马修的建议是正确的，虽然它没有涉及（因为他引用的代码是`logical(0)`案例，而不是`NA`案例）。无意中我在上述时间运行了 R-devel，所以发布的 R 中的时间会有所不同。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T19:00:14.787

我将对这些评论提出异议，尽管我确实理解其中的大部分内容。问题在于，引用的帖子的答案存在内部矛盾，评论者一直依赖而没有检查。用户和系统的时间没有按应有的方式正确加起来。

```
 create.matrix <- function(size) {
  x <- matrix()
  length(x) <- size^2
  dim(x) <- c(size,size)
  x
  }
  system.time(x <- matrix(data=NA,nrow=10000,ncol=10000))
#   user  system elapsed 
#  0.464   0.226   0.688 
 system.time(y <- create.matrix(size=10000))
#   user  system elapsed 
#  0.177   0.239   0.414 
```

我怀疑效率实际上是通过用户定义的函数只能创建方阵和“矩阵”需要对更一般情况下参数的有效性进行检查这一事实来实现的。

编辑：我看到你已经反驳了我的一个假设（关于方阵限制），我还会注意到我的另一个假设，即这是由于惰性评估导致的，我的测试也失败了。这种差异确实没有意义，因为用户代码使用了该`matrix`功能。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-03T01:11:09.510

不确定这是不是原因（可能是不同的低效率），但`do_matrix`在 src/array.c 中有一个类型开关，其中包含：

```
case LGLSXP :
    for (i = 0; i < nr; i++)
    for (j = 0; j < nc; j++)
        LOGICAL(ans)[i + j * NR] = NA_LOGICAL; 
```

这看起来是页面效率低下。认为应该是：

```
case LGLSXP :
    for (j = 0; j < nc; j++)
    for (i = 0; i < nr; i++)
        LOGICAL(ans)[i + j * NR] = NA_LOGICAL; 
```

或更简单地说：

```
case LGLSXP :
    for (i = 0; i < nc*nr; i++)
        LOGICAL(ans)[i] = NA_LOGICAL; 
```

（需要一些微调，因为is `NR`type `R_xlen_t`while`i`和are type ）。`nc``nr``int`

* * *

更新：

发布到 r-devel 后：

[array.c 中的 do_matrix 中可能的页面效率低下](http://r.789695.n4.nabble.com/Possible-page-inefficiency-in-do-matrix-in-array-c-tp4642034.html)

Simon Urbanek 现在已经承诺对 R 进行更改。它现在使用上面的单一索引方法：

[array.c 的最新实时版本](https://svn.r-project.org/R/trunk/src/main/array.c)

但正如西蒙所说，我在上面介绍了自己，这似乎并不能解决问题提出的特定问题。第二个，不同的，低效率也需要被发现和修复。

* * *

这可能是后续修复的内容。这结合了新代码的页面效率（现在在 R 中），但是，切换到使用时`matrix(data=NA)`（R 的默认值）。通过避免这种情况，这避免了`copyMatrix`西蒙在他的回答中提到的模数。`copyMatrix``NA`

目前，array.c 中的 do_matrix 具有：

```
if(lendat) {
    if (isVector(vals))
        copyMatrix(ans, vals, byrow);
    else
        copyListMatrix(ans, vals, byrow);
} else if (isVector(vals)) { 
    // fill with NAs in the new page efficient way that Simon already committed.
} 
```

可能如下。我不知道`ISNA()`C 级别的函数需要`SEXP`输入，所以已经编写了那个长手（西蒙，有更好的方法吗？）：

```
if(lendat && // but not a single NA, basically :
             !(lendat==1 &&
                  ((isLogical(vals) && LOGICAL(vals)[0] == NA_LOGICAL) ||
                   (isReal(vals) && ISNA(REAL(vals)[0])) ||
                   (isInteger(vals) && INTEGER(vals)[0] == NA_INTEGER)))) {
    if (isVector(vals))
        copyMatrix(ans, vals, byrow);
    else
        copyListMatrix(ans, vals, byrow);
} else if (isVector(vals)) { 
    // fill with NAs in the new page efficient way that Simon already committed.
    // this branch will now run when dat is a single NA, too
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T21:17:54.223

唔。是的，这很奇怪。...而且这仍然稍微快一点 - 尽管它更像 matrix() ，因为它允许单个数据参数（但它必须是标量）：

```
create.matrix2 <- function(data=NA, nrow, ncol) {
  x <- rep.int(data[[1]], nrow*ncol)
  dim(x) <- c(nrow, ncol)
  x
}
system.time( x <- matrix(nrow=10000, ncol=9999) ) # 0.387 secs
system.time( y <- create.matrix(nrow=10000, ncol=9999) )  # 0.199 secs
system.time( z <- create.matrix2(nrow=10000, ncol=9999) ) # 0.173 secs
identical(x,z) # TRUE 
```

...我猜用于创建矩阵的内部代码会浪费一些东西（或者可能有用，但我想不出那会是什么）...

哦，因为它处理`data`任何长度，它最终可能会得到类似于`rep(data, length.out=nrow*ncol)`相当慢的东西：

```
system.time( rep(NA, length.out=10000*9999) ) # 1.5 secs! 
```

无论如何，绝对有改进的余地！

# mysql - 表不为空时返回记录

> ID：12220129
> 
> 赞同：2
> 
> 时间：2012-08-31T17:38:31.023
> 
> 标签：mysql, sql, date, between

我是 SQL 的新手，只能做最基本的 SQL 查询，并感谢任何有关此问题的帮助。

MySQL 数据库包含一个 CUSTOMER 表和一个 PURCHASES 表。如果客户进行了购买，那么 PURCHASES 表中将有一个或多个序列号和购买日期。

我想知道如何返回在两个日期之间购买的每个客户的客户姓名、序列号和购买日期。

以下是表的说明：

采购

*   客户ID
*   序列号
*   购买日期

顾客

*   客户ID
*   顾客姓名
*   客户地址

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T17:47:47.277

这里是：

```
select c.customer_name, p.serial_number, p.purchase
from purchases p, customers c
where p.customer_id = c.customer_id and
p.purchase between '2012-08-27' and '2012-08-31' 
```

SQL Fiddle 在这里，您可以使用它：[http ://sqlfiddle.com/#!2/e8002/3](http://sqlfiddle.com/#!2/e8002/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T17:53:39.540

你需要`JOIN`两张表；有关连接概念，请参阅 MySQL 文档。

您需要限制两个日期之间的购买查询：

```
WHERE purchase BETWEEN 'date1' AND 'date2' 
```

这将告诉您客户 ID。有了这个，你选择到客户表中，所以：

```
SELECT customer.customer_name,
       purchases.serial_number,
       purchases.purchase
    FROM customer
    JOIN purchases ON (customer.customer_id = purchases.purchase_id)
    WHERE purchases.purchase BETWEEN '2012-01-01' AND '2012-08-01'; 
```

# java - 从 sqlback 格式文件中提取数据以转换为 CSV

> ID：12220131
> 
> 赞同：0
> 
> 时间：2012-08-31T17:38:36.303
> 
> 标签：java, android, sqlite, csv

我有一个代表 sqlite db 文件的 sqback 文件。我想从这个 sqback 文件中提取数据，即表名和内容，并将其转换为 csv 文件格式。我想使用 Java 来做到这一点。

** sqback 文件在处理之前已经从 android 设备上传到 pc。所以我需要一个适合服务器端的解决方案。

有没有人对如何执行这样的任务有任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:44:45.903

如果使用 Android，您可以利用内置的 SQLiteDatabase 和 SQLiteOpenHelper。你会[在这里找到你需要的](http://www.vogella.com/articles/AndroidSQLite/article.html)**所有**信息。

解析完所有内容后，您可以使用[File](http://developer.android.com/reference/java/io/File.html)以您想要的方式导出到 CSV 。

**编辑：**所以基本上你需要做的是通过读取它们来解析字节，这样就可以访问内容。在某些情况下，您甚至不需要将它们转换为字符串，因为您可能只需要字节的值。（即：偏移量：44 长度：4 描述：模式格式编号。支持的模式格式为 1、2、3 和 4。）。您始终可以使用任何 HEX 编辑器检查您的值是否正确，即使使用任何类型的文本编辑器打开 sqlite 文件也会有所帮助。

让我们从头开始。首先，读取文件。两种方法

*   一种。读取整个文件并在之后解析它
*   湾。以块的形式读取和解析整个文件（推荐，特别是对于更大的文件）

这两种方法都将共享以下大部分代码：

```
File file = new File("YOUR FILE ROUTE");
int len = 1024 * 512; //512KB

try {
    fis = new FileInputStream(file);
} catch (FileNotFoundException e1) {
    fis = null;
    e1.printStackTrace();
}
byte[] b = new byte[len];
int bread;

try {

    while((bread = fis.read(b, 0, len))!=-1)
    {
        if(parseBlock(b, bread)==1)
            return;
}

    fis.close();

} catch (IOException e) {
    e.printStackTrace();
} 
```

区别在于获取部分块并动态解析它们（我猜这对你有用）和获取整个内容将只是放：

```
fis.read(b, 0, fis.available); 
```

而不是while循环。

最终，您的方法是正确的，这就是将字节转换为字符串的方法。（新字符串（b））。此外，第一个字符可能代表奇怪的符号，如果您查看 SQL 的文件格式，这些是用于存储一些元数据的保留字节。使用任何文本编辑器打开 sqlite 文件并检查您在其中看到的内容是否与您的代码中的内容匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T17:47:41.620

该网站指出要使用哪些额外的库，并提供如何与 sqlite 文件交互的示例 (http://www.xerial.org/trac/Xerial/wiki/SQLiteJDBC#Usage)

需要注意的重要事项：

1) 确保包括使用当前类加载器加载 sqlite-JDBC 驱动程序。这是用线完成的

2) sqlite 文件是一个数据库，即使它不在某处的服务器上。因此，您仍然必须创建与文件的连接才能与之交互。您还必须打开连接并关闭连接。 `Connection connection = null; connection = DriverManager.getConnection("jdbc:sqlite:" + path); // path is a String to the sqlite file (sqlite or sqback) connection.close(); // after you are done with the file`

3）使用sql代码查询文件可以提取信息。这将返回一个 ResultSet 类型的可处理对象，该对象保存与查询有关的数据

```
 Statement statement = connection.createStatement();
  statement.setQueryTimeout(30);
  ResultSet rs = statement.executeQuery("SELECT * FROM " + tblName); 
```

4) 从 ResultsSet 中，您可以使用带有列索引或列标题键的 get 命令获取数据 `rs.getString("qo")`

希望对遇到和我一样问题的人有所帮助

# solr - 反向查询匹配 solr

> ID：12220133
> 
> 赞同：5
> 
> 时间：2012-08-31T17:38:46.427
> 
> 标签：solr, elasticsearch, categorization

我有一个用户查询列表，可以从一个网站（数千个）解决。我的要求是返回给定列表中对文档有效的所有查询。我知道我可以索引该文档并遍历 100000 个查询列表以查看是否返回了文档，但有没有更快的方法？

例如。：

1.  车型=宝马和颜色=红色
2.  车型=福特和门=4
3.  车型=福特和颜色=绿色

    `document: <cartype>FORD</cartype> <colour>GREEN</colour> <doors>4</doors>`

所以这个有问题的文档将返回查询 2 和 3。

理想情况下，我想做某种反向搜索。索引搜索查询并发送文档内容以返回匹配项。有谁知道我会怎么做或者以前试过吗？

非常感谢任何输入。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T18:46:08.710

您可以考虑切换到[elasticsearch](http://www.elasticsearch.org/)吗？抱歉，这个用例看起来非常适合[Percolate API](http://www.elasticsearch.org/guide/reference/api/percolate.html)，这是 elasticsearch 提供的一个非常有用的功能。

您将索引您的查询而不是文档，给它们一个唯一的 id。然后，您可以一一发送您的文档并取回与它们匹配的查询，甚至无需为文档编制索引。一探究竟！

# mysql - MySQL 的结果集不一致

> ID：12220135
> 
> 赞同：1
> 
> 时间：2012-08-31T17:38:55.333
> 
> 标签：mysql

**不知道如何删除它，但这已经解决了。谢谢！**

**编辑：根据要求，完整存储的过程代码位于底部**

在我正在编写的这个存储过程中，我遇到了一个非常奇怪的问题，即来自 mysql 的结果集不一致。我已经包含了我正在使用的调试语句及其输出：

语句（这些都在连续的行中/完全按照书面形式出现在代码中）：

```
SELECT 'SELECT * FROM event_task';
SELECT * from event_task;
SELECT 'SELECT event_id FROM event_task';
SELECT event_id FROM event_task;
SELECT 'SELECT * FROM event_task WHERE event_id = 1';
SELECT * FROM event_task WHERE event_id = 1;
SELECT 'end select'; 
```

我得到的结果是：

```
mysql> call get_user_events(1);
+--------------------------+
| SELECT * FROM event_task |
+--------------------------+
| SELECT * FROM event_task |
+--------------------------+
1 row in set (0.01 sec)

+----+----------+---------+--------+----------+---------------------+---------------------+
| id | event_id | user_id | task   | complete | created_at          | updated_at          |
+----+----------+---------+--------+----------+---------------------+---------------------+
|  1 |        1 |       1 | stuff  |        0 | 2012-08-30 00:00:00 | 2012-08-30 00:00:00 |
|  2 |        1 |       2 | stuff2 |        1 | 2012-08-30 00:00:00 | 2012-08-30 00:00:00 |
+----+----------+---------+--------+----------+---------------------+---------------------+
2 rows in set (0.01 sec)

+---------------------------------+
| SELECT event_id FROM event_task |
+---------------------------------+
| SELECT event_id FROM event_task |
+---------------------------------+
1 row in set (0.01 sec)

+----------+
| event_id |
+----------+
|     NULL |
|     NULL |
+----------+
2 rows in set (0.01 sec)

+---------------------------------------------+
| SELECT * FROM event_task WHERE event_id = 1 |
+---------------------------------------------+
| SELECT * FROM event_task WHERE event_id = 1 |
+---------------------------------------------+
1 row in set (0.01 sec)

Empty set (0.01 sec)

+------------+
| end select |
+------------+
| end select |
+------------+
1 row in set (0.01 sec) 
```

基本上，即使当我从 event_task 中选择 * 时我可以看到 event_ids 为 1，但当我重新查询 event_task 的 event_id 作为特定列时，我得到 NULL 值。

编辑：刚刚选择了以下用户ID：

```
SELECT 'SELECT user_id';
SELECT user_id; 
```

结果是：

```
mysql> call get_user_events(1);
+----------------+
| SELECT user_id |
+----------------+
| SELECT user_id |
+----------------+
1 row in set (0.00 sec)

+---------+
| user_id |
+---------+
|       1 |
+---------+
1 row in set (0.00 sec) 
```

根据要求：完整的存储过程代码

```
DELIMITER $$
DROP PROCEDURE IF EXISTS get_user_events$$
CREATE PROCEDURE get_user_events (IN user_id int) 
/*
gets the user's events for the default page
grabs: image location, event title, date, location, number of tasks completed / total, and updates
*/
BEGIN
    DECLARE done TINYINT(1) DEFAULT FALSE;
    DECLARE loop_cnt INT DEFAULT 0;
    DECLARE num_rows INT DEFAULT 0;
    DECLARE event_id INT;

    DECLARE update_cur CURSOR FOR
        SELECT DISTINCT id FROM aggregate;

    DECLARE CONTINUE HANDLER FOR NOT FOUND
        SET done = TRUE;

    DROP TABLE IF EXISTS tasks;
    DROP TABLE IF EXISTS aggregate;
    DROP TABLE IF EXISTS updates;
    CREATE TEMPORARY TABLE tasks (id int, event_id int, complete tinyint(1));
    CREATE TEMPORARY TABLE aggregate (id int, picture_location varchar(255), name varchar(255), date timestamp, 
        place varchar(255), num_tasks int, tasks_complete int, status_update varchar(5000));
    CREATE TEMPORARY TABLE updates (event_id int, status_update varchar(255));

    /*get basic event information*/
    INSERT INTO aggregate (id, picture_location, name, date, place)
    SELECT e.id,
           e.picture_location, 
           e.name, 
           ed.date,
           ep.place
    FROM event e INNER JOIN event_user_map eum ON e.id = eum.event_id
                 LEFT JOIN event_place ep ON e.id = ep.event_id AND ep.vote_final = 1
                 LEFT JOIN event_date ed ON e.id = ed.event_id AND ed.vote_final = 1
    WHERE eum.user_id = user_id;

    /*grab the list of tasks so we can work with a small subset*/
    INSERT INTO tasks 
        SELECT id, event_id, complete 
        FROM event_task 
        WHERE event_id IN (SELECT DISTINCT id FROM aggregate);

    SELECT 'SELECT * FROM event_task';
    SELECT * from event_task;
    SELECT 'SELECT event_id FROM event_task';
    SELECT event_id FROM event_task;
    SELECT 'SELECT * FROM event_task WHERE event_id = 1';
    SELECT * FROM event_task WHERE event_id = 1;
    SELECT 'SELECT event_id FROM (SELECT * FROM event_task) as A';
    SELECT event_id FROM (SELECT * FROM event_task) as A;
    SELECT 'end select';

    /*gets tasks*/
    UPDATE aggregate SET num_tasks = (SELECT COUNT(*) FROM tasks WHERE event_id = id);
    UPDATE aggregate SET tasks_complete = (SELECT COUNT(*) FROM tasks WHERE event_id = id AND complete = 1);

    /*get updates*/
    OPEN update_cur;

    read_loop: LOOP
        FETCH update_cur INTO event_id;
        IF done THEN
            LEAVE read_loop;
        END IF;

        INSERT INTO updates
            SELECT event_id, status_update FROM event_update ORDER BY updated_at limit 3;
    END LOOP;

    UPDATE aggregate SET status_update = (SELECT group_concat(status_update) FROM updates u WHERE u.event_id = id);

    SELECT * FROM aggregate;

END$$
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:57:34.303

发表我的评论作为答案：

更改`DECLARE event_id INT;`为`DECLARE event_id_var INT;`并运行您的存储过程

# android - 未找到处理意图的活动{act=com.google.zxing.client.android.SCAN cat=

> ID：12220140
> 
> 赞同：0
> 
> 时间：2012-08-31T17:39:32.820
> 
> 标签：android, barcode, zxing

我得到： android.content.ActivityNotFoundException: 没有找到处理意图的活动{ act=com.google.zxing.client.android.SCAN cat=[android.intent.category.DEFAULT] flg=0x4080000 pkg=com.google.zxing .client.android} 当我运行我自己的与 zxing 条码扫描仪集成的应用程序时。没有logcat。

首先，我从 zxing 下载源代码并将其构建到应用程序中并运行良好，然后将其转换为我的应用程序的库并运行我的应用程序，然后出现上述错误。以下是如何将 zxing 条码扫描器转换为我的应用程序的库：

一、在myapp的AndroidManifest.xml中，添加

```
<activity android:name="com.google.zxing.client.android.CaptureActivity"
      android:screenOrientation="landscape"
      android:clearTaskOnLaunch="true"
      android:stateNotNeeded="true"
      android:configChanges="orientation|keyboardHidden"
      android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
      android:windowSoftInputMode="stateAlwaysHidden">
        <intent-filter>
        <action android:name="com.google.zxing.client.android.SCAN"/>
        <category android:name="android.intent.category.DEFAULT"/>
    </intent-filter>
</activity> 
```

二、在 myapp 的 MainActivity.java 上，我有这段代码：

```
 String package_name="com.google.zxing.client.android";

      Intent iScan = new Intent(package_name+".SCAN");

      iScan.setPackage(package_name);

      iScan.addCategory(Intent.CATEGORY_DEFAULT);

      iScan.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

      iScan.addFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);

      iScan.putExtra("SCAN_WIDTH", 420);

      iScan.putExtra("SCAN_HEIGHT", 420);

      iScan.putExtra("RESULT_DISPLAY_DURATION_MS", 3000L);

      iScan.putExtra("SCAN_MODE", "QR_CODE_MODE");

      iScan.putExtra("PROMPT_MESSAGE", "Scan the Contact");

           startActivityForResult(iScan, 0); 
```

三、在我的项目属性-> Android 上，

```
add  com.google.xing.client.android as lib and copy 
```

com.google.xing.client.android.captureactivity.jar core.jar 到我的应用程序的 libs 目录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:08:19.673

如果您通过 Intent 进行集成，您不会添加`android/`，甚至不会添加到您的项目中。`core/`事实上，这是非常不鼓励的，主要是因为您在上面发布的内容：您的应用程序说它可以处理 Barcode Scanner 应该处理的 Intent。这不行——你可能会拦截对我们应用程序的调用。

由于您已经通过 Intent 进行集成，因此请不要为此烦恼。您所需要的只是`android-integration/`. 请参阅[http://code.google.com/p/zxing/wiki/ScanningViaIntent](http://code.google.com/p/zxing/wiki/ScanningViaIntent)

如果您`IntentIntegrator`按照那里的描述使用，它将处理安装应用程序，这样您就不会绊倒`ActivityNotFoundException`上面显示的内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-04-23T01:50:34.013

您可以通过在手机中安装 Google Goggles 或任何类型的支持条码扫描应用程序（Zxing Barcode Scanner）来解决此错误。当您尝试启动 Activity 时，它将通过此​​应用程序打开并将数据输入您的 android 应用程序。

这对我有用:)

# java - 在 java 上运行跛脚：错误控制台日志

> ID：12220145
> 
> 赞同：0
> 
> 时间：2012-08-31T17:39:46.360
> 
> 标签：java, ubuntu, mp3, wav, lame

我正在运行 lame 以转换 MP3 中的 WAV 声音，作为控制台应用程序执行：

```
ProcessBuilder pb = new ProcessBuilder(new String[]{"lame", "in.wav", "out.mp3", "-b", "128"});
Process p = pb.start();
try {
    p.waitFor();
} catch (InterruptedException ie) {
    logger.error("Error calling lame", ie);
} 
```

当我阅读输出时，“正常”输出是空的，但`err`有值。这是一个执行错误，或者la脚将所有输出都输出为`err`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:53:00.317

见自己。在终端中运行该命令并将 stdout 和 stderr 重定向到不同的文件。然后你就会知道它的去向：

```
lame in.wav out.mp3 -b 128 1>stdout 2>stderr 
```

# php - 在 php 中检查或验证 csv 文件的标题字段

> ID：12220146
> 
> 赞同：0
> 
> 时间：2012-08-31T17:39:48.523
> 
> 标签：php, mysql, csv

我导入了 csv 文件数据并成功存储在 php mysql 中，没有标题，当我在 csv 中包含标题时，它将它作为数据，而不是标题，我想在任何用户导入 csv 文件时添加检查，脚本必须检查标题字段必须与 mysql 表相同，否则退出或停止进一步处理，我只是验证必须与我的 db 表中相同的头字段，提前感谢，脚本如下。

```
$file_handle = fopen("myfile.csv","r")or die("can't open file");

while (($data = fgetcsv($file_handle, 1024, ",")) !== FALSE)
     {

 $data[0];
 $data[1];
$data[2];
  $data[3];
 $data[4];
$data[5];
$data[6];
$data[7];

$import="INSERT into customer(a_code,c_name,first_name,cell,email,phone,date,group_name) values('$data[0]','$data[1]','$data[2]','$data[3]','$data[4]','$data[5]','$data[6]','$data[7]')";

   mysql_query($import) or die(mysql_error());*/

 }
 fclose($handle); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:49:30.117

您可以 mysql_query('DESC customer') 获取表中的列列表，然后将其与 CSV 标头进行比较以查看它们是否匹配

也尝试 array_combine($header_line_array, $current_line_array) 得到一个键控数组，然后你可以让你的 CSV 列与 DB 列的顺序不同

# sbt - 为什么 SBT 不下载我自己的 libraryDependencies？

> ID：12220147
> 
> 赞同：12
> 
> 时间：2012-08-31T17:39:51.683
> 
> 标签：sbt

我正在使用 SBT 为我的第一个 Scala 项目设置依赖项。

这是我的`build.sbt`文件：

```
name := "MyProj"

version := "1.0"

scalaVersion := "2.9.2"

libraryDependencies += "org.eclipse.jgit" % "org.eclipse.jgit" % "2.0.0.201206130900-r" 
```

当我`update`在交互模式下运行时，它会更新一些东西，`org.scala-lang...`但它从不下载我的依赖项。如何让它安装/下载依赖项？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-31T17:48:08.650

一些公共存储库[已经预定义](https://github.com/harrah/xsbt/wiki/Resolvers)，但看起来您的库不在其中，因此您必须将 Eclipse 存储库添加到解析器列表（将此行添加到`build.sbt`）：

```
resolvers += "jgit-repository" at "http://download.eclipse.org/jgit/maven" 
```

就像你在 Maven 中一样（有`<repository>...</repository>`记录）

不要忘记到`reload`您的 sbt 控制台，然后`update`获取依赖项或重新启动 sbt。

# knockout.js - 淘汰赛映射

> ID：12220148
> 
> 赞同：1
> 
> 时间：2012-08-31T17:39:55.860
> 
> 标签：knockout.js, knockout-mapping-plugin

**编辑**看起来我现在从服务器加载它。如果有人看到这方面的任何问题，很想听听他们的消息。

在使淘汰赛映射插件正常工作时遇到一些问题。我可以毫无问题地使用静态数据，请参阅[http://jsfiddle.net/RH9wQ/](http://jsfiddle.net/RH9wQ/)

但是，当我尝试从服务器加载数据时，它似乎不起作用。下面是我正在使用的基本代码。jsfiddle 中的数据是从我的服务器返回的确切数据。我错过了一些完全明显的东西吗？

我正在做的是根据单击的 alpha 按钮加载不同的药物。所以点击“y”得到一个以y开头的药物列表，点击“z”得到一个以z开头的药物列表。单击按钮/加载数据时，我想用来自服务器的数据替换我的 viewModel 数据。

另外，请注意 jsfiddle 页面上的控制台，数据看起来很好（8 个数组元素和 count=8），但请注意 viewModel 的控制台，preferredDrugs 和 count 不同，有人知道这是为什么吗？

```
$(function() {
    $('.load').click(function() {
        var $letter = $(this).attr('value');

        //show spinner
        $('#loading').show();

        //load in drug list data
        $.getJSON('/PreferredDrugList/service/preferredDrugs/' + $letter, function(data) {
            //hide spinner
            $('#loading').hide();

            console.log(data);
            //create observable properties for each of the properties on data
            ko.mapping.fromJS(data, viewModel);
            console.log(viewModel);

        });
    });

});//end ondomready

//default data
var data = {
    preferredDrugs: [],
    count: 0
};

var viewModel = ko.mapping.fromJS(data);

ko.applyBindings(viewModel); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T18:12:56.123

使用更新现有视图模型时，`ko.mapping`您还可以尝试：

```
ko.mapping.fromJS(data, {}, viewModel); 
```

..代替..

```
ko.mapping.fromJS(data, viewModel); 
```

> 另外，请注意 jsfiddle 页面上的控制台，数据看起来很好（8 个数组元素和 count=8），但请注意 viewModel 的控制台，preferredDrugs 和 count 不同，有人知道这是为什么吗？

是的，原来的首选药物是一个正常的数组，而新的首选药物是一个**可观察**的数组。**如果您尝试直接访问可观察数组，它将看起来像一个空数组**。然而，observables 是函数，需要这样对待。

所以...

```
console.log(myViewModel.preferredDrugs); 
```

...返回一个空数组，而...

```
console.log(myViewModel.preferredDrugs()); 
```

...返回实际的数组。

# php - 如何在 MySQL 中获取两个日期值的差异，结果是按月计算的？

> ID：12220150
> 
> 赞同：0
> 
> 时间：2012-08-31T17:40:04.757
> 
> 标签：php, mysql

在这里，我有两个日期，如下所示

```
2012-08-12 to 2012-10-20 
```

我需要如下输出：

```
month[08]=19
month[09]=30
month[10]=20 
```

你可以通过 PHP，MYSQL 解决它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:47:55.307

用于[`PERIOD_DIFF(P1,P2)`](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_period-diff)获取两个日期之间的月数。

> 返回周期 P1 和 P2 之间的月数。P1 和 P2 的格式应为 YYMM 或 YYYYMM。请注意，句点参数 P1 和 P2 不是日期值。
> 
> ```
> mysql> SELECT PERIOD_DIFF(200802,200703);
>         -> 11 
> ```

在您的情况下，您将使用：

```
SELECT PERIOD_DIFF(DATE_FORMAT('2012-10-20', '%Y%m'), DATE_FORMAT('2012-08-12', '%Y%m')) 
```

根据[这篇文章](https://stackoverflow.com/a/5159675/679449)，使用`EXTRACT`可能会更快：

> ```
> SELECT
>     PERIOD_DIFF(
>         EXTRACT(YEAR_MONTH FROM '2012-10-20'), 
>         EXTRACT(YEAR_MONTH FROM '2012-08-12')) AS months 
> FROM your_table; 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:52:22.250

如果您想在 MySQL 中构建一个包含您感兴趣的日期范围内所有可能的日期值的表，您可以通过查询相对容易地做到这一点。

该表只需要有一个像

```
dates
----------
2012-01-01
2012-01-02
...
2050-12-31 
```

然后你可以像这样查询表：

```
SELECT YEAR(`dates`) as `years`, MONTH(`dates`) as `months`, COUNT(`dates`) as `days`
FROM date_table
WHERE `dates` BETWEEN 'YYYY-MM-DD' AND 'YYYY-MM-DD'
GROUP BY `years`, `months`
ORDER BY `years` ASC, `months` ASC 
```

这种拥有日期表的方法通常用于 BI/数据仓库应用程序中，但我认为它可以在这里为您工作。

请注意，我还在那里添加了一个“年”值，因为我想这也是您需要处理的事情，除非您从未计划过可以跨越多年的日期范围。

# java - Java获取空指针异常

> ID：12220152
> 
> 赞同：3
> 
> 时间：2012-08-31T17:40:09.653
> 
> 标签：java, nullpointerexception

主方法.java

```
public class mainMethod{
    public animalsData[] animals;

    public mainMethod(){
        animals[this.animals.length + 1] = new animalsData("CAT", "4");

    }

    public static void main(String[] args) {
        mainMethod run = new mainMethod();
    }
} 
```

动物数据.java

```
public class animalsData{
    String name, l;

    public animalsData(String name, String l) {
        super();
        this.name= name;
        this.l= l;
    }
} 
```

我有这个问题：**线程“主”java.lang.NullPointerException中的异常**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T17:42:22.680

你永远不会在你的班级中初始化你的`animals`数组。`mainMethod`

在你的`public mainMethod()`方法中，你需要做`animals = new animalsData[INITIAL SIZE];`

如果你想让它自动增长，你应该使用`List`. 即使那样你也不会使用`this.animals.length + 1`它作为它的索引。你会做`List.add()`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T17:42:52.287

```
public List<animalsData> animals = new ArrayList<animalsData>()

public mainMethod(){
    animals.add(new animalsData("CAT", "4"));
} 
```

了解有关 Java 中列表的更多信息，默认情况下数组不可扩展。如果您在数组的最后一项之后添加一项，则不能超出其维度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T17:49:25.530

**1.** `Array` **必须**在其`declared`.

**例如：**

```
public animalsData[] animals; 

    public static void main(String[] args) {
        mainMethod run = new mainMethod();
        System.out.println(run.animals.length);
    } 
```

上面的代码给出了一个`NullPointerException`，因为`animals`它`Object Reference Array Variable`是**Null**并且没有在堆上**分配**`Array Object`。

```
public animalsData[] animals = new animalsData[10]; 

        public static void main(String[] args) {
            mainMethod run = new mainMethod();
            System.out.println(run.animals.length);
        } 
```

**上面的代码工作正常......因为数组现在已初始化。**

我建议您使用`java.util.Collections`而不是数组，它们非常灵活。

`List<animalsData> animals = new ArrayList<animalsData>();`

# php - 在 mysql 数据库检索中需要帮助（无法检索当前值）

> ID：12220157
> 
> 赞同：-1
> 
> 时间：2012-08-31T17:40:24.863
> 
> 标签：php, mysql

我有一个大约 20 列的 mysql 表，我想做的是从数据库中检索值并将这些值发送到网页。

因此，通过使用，`mysql_fetch_array()`我可以获得输入数据库的第一个值，通过使用`while(mysql_fetch_array())`，我能够检索数据库表中的所有值，通过使用`fwrite()`，我什至可以将值发送到文件。

但问题是，如果我使用`while(mysql_fetch_array())`，所有值都会被检索；我只希望将数据库中输入的当前（最新）值发送到另一个页面。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:45:20.183

只需过滤您的查询以仅获得所需的结果。因此，例如，假设您在数据库中有一个时间戳，请执行以下操作：

```
SELECT * FROM table ORDER BY `timestamp_field` DESC LIMIT 1 
```

显然，如果您想要更早的日期，您可以使用 ASC 而不是 DESC。同样的逻辑也适用于您可能想要排序的其他列类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:46:34.610

首先，如果您尝试将 LATEST 值发送到另一个页面，为什么要运行一个接收所有值而不仅仅是您需要的值的查询？是否可以使用新字段做某事并检查最新的“date_created”值？所以你会得到类似的东西：

```
 SELECT * FROM table ORDER BY date_created DESC LIMIT 1 
```

现在您将只获得数据库中输入的最新值。当然，您必须创建列： date_created ;)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T18:32:05.600

我们必须记住，从服务器获取许多数据然后从接收到的数据中排序或获取我们想要的数据是带宽加上时间消耗。在这种情况下，我们必须优化我们的 sql 查询来解决带宽和时间的问题。

**我接受MIKE 编写**的 sql 查询。在我看来，针对您所面临的问题进行了优化。

`SELECT * FROM table ORDER BY`时间戳字段`DESC LIMIT 1`

因此，在从上述查询中获取数据后，您只需输出数据，这将帮助您减少从服务器获取数据的带宽和时间[这是一个严重的问题，因为 5 到 10 行无关紧要，但如果有 100000000000 那么它非常重要]。

感谢您的重要时间。

# oauth-2.0 - oAuth 2.0：是否可以与不同的应用程序共享 access_token？

> ID：12220159
> 
> 赞同：0
> 
> 时间：2012-08-31T17:40:41.247
> 
> 标签：oauth-2.0

是否可以与不同的应用程序共享 access_token？我认为这是完全可能的。授予令牌后，仅通过传递 access_token 发出请求。没有机制可以验证发出请求的应用程序。

因此，如果一个服务对每个应用程序设置了 100 个令牌的限制，那么注册两个应用程序并共享 access_tokens 来为每个应用程序保存 200 个令牌就足够了。

我错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:46:10.023

oAuth 令牌保证您可以代表身份 (IdP) 与服务提供商 (SP) 交互。因此，如果您在多个应用程序之间共享一个令牌，您就是在向服务提供商表明这些都是您的应用程序（这是完全可以接受的），但是您不能将 Facebook 的 oAuth 令牌提供给 Twitter，或者使用您自己的 LinkedIn 令牌来修改您以外的其他人的帐户。

# java - 从 Java 访问 MySQL 的问题

> ID：12220161
> 
> 赞同：0
> 
> 时间：2012-08-31T17:40:51.443
> 
> 标签：java, mysql, database

我第一次尝试在 Java 中使用 MySQL。我已经按照本[教程](http://www.youtube.com/watch?v=E30_-pQGQXs)进行操作，并且能够编写一些代码，但我不明白我哪里出错了。我收到以下消息：

```
terminated docsconnectionpropshelper java application 
```

该程序甚至没有到达放置调试停止点的主类。

我的代码是：

```
public class CDaoAccess implements IDaoAccess {

  public static Connection connect = null;
  private Statement statement = null;
  private PreparedStatement preparedStatement = null;
  private ResultSet resultSet = null;

  @Override
  public void connectDatabase(String _database) throws Exception {  

    // This will load the MySQL driver, each DB has its own driver
    Class.forName("com.mysql.jdbc.Driver");      
    connect = DriverManager.getConnection(
        "jdbc:mysql://localhost:3306/DAH-MS-DB","root","root");

    statement = connect.createStatement();      
    resultSet =statement.executeQuery("select * from DAH-MS-DB.Patient");      
    close();
  }

  @Override
  public void close() throws SQLException {
    // TODO Auto-generated method stub
    try {
      if (resultSet != null) {
        resultSet.close();
      }

      if (statement != null) {
        statement.close();
      }

      if (connect != null) {
        connect.close();
      }
    } catch (Exception e) {

    }
  }
} 
```

日志：

```
 <ConnectionProperties>
 <PropertyCategory name="Connection/Authentication">
  <Property name="user" required="No" default="" sortOrder="-2147483647" since="all versions">
    The user to connect as
  </Property>
  <Property name="password" required="No" default="" sortOrder="-2147483646" since="all versions">
    The password to use when connecting
  </Property>
  <Property name="socketFactory" required="No" default="com.mysql.jdbc.StandardSocketFactory" sortOrder="4" since="3.0.3">
    The name of the class that the driver should use for creating socket connections to the server. This class must implement the interface 'com.mysql.jdbc.SocketFactory' and have public no-args constructor.
  </Property>
  <Property name="connectTimeout" required="No" default="0" sortOrder="9" since="3.0.1">
    Timeout for socket connect (in milliseconds), with 0 being no timeout. Only works on JDK-1.4 or newer. Defaults to '0'.
  </Property>
  <Property name="socketTimeout" required="No" default="0" sortOrder="10" since="3.0.1">
    Timeout on network socket operations (0, the default means no timeout).
  </Property>
  <Property name="connectionLifecycleInterceptors" required="No" default="" sortOrder="2147483647" since="5.1.4">
    A comma-delimited list of classes that implement "com.mysql.jdbc.ConnectionLifecycleInterceptor" that should notified of connection lifecycle events (creation, destruction, commit, rollback, setCatalog and setAutoCommit) and potentially alter the execution of these commands. ConnectionLifecycleInterceptors are "stackable", more than one interceptor may be specified via the configuration property as a comma-delimited list, with the interceptors executed in order from left to right.
  </Property>
  <Property name="useConfigs" required="No" default="" sortOrder="2147483647" since="3.1.5">
    Load the comma-delimited list of configuration properties before parsing the URL or applying user-specified properties. These configurations are explained in the 'Configurations' of the documentation.
  </Property>
  <Property name="authenticationPlugins" required="No" default="" sortOrder="alpha" since="5.1.19">
    Comma-delimited list of classes that implement com.mysql.jdbc.AuthenticationPlugin and which will be used for authentication unless disabled by "disabledAuthenticationPlugins" property.
  </Property>
  <Property name="defaultAuthenticationPlugin" required="No" default="com.mysql.jdbc.authentication.MysqlNativePasswordPlugin" sortOrder="alpha" since="5.1.19">
    Name of a class implementing com.mysql.jdbc.AuthenticationPlugin which will be used as the default authentication plugin (see below). It is an error to use a class which is not listed in "authenticationPlugins" nor it is one of the built-in plugins. It is an error to set as default a plugin which was disabled with "disabledAuthenticationPlugins" property. It is an error to set this value to null or the empty string (i.e. there must be at least a valid default authentication plugin specified for the connection, meeting all constraints listed above).
  </Property>
  <Property name="disabledAuthenticationPlugins" required="No" default="" sortOrder="alpha" since="5.1.19">
    Comma-delimited list of classes implementing com.mysql.jdbc.AuthenticationPlugin or mechanisms, i.e. "mysql_native_password". The authentication plugins or mechanisms listed will not be used for authentication which will fail if it requires one of them. It is an error to disable the default authentication plugin (either the one named by "defaultAuthenticationPlugin" property or the hard-coded one if "defaultAuthenticationPlugin" propery is not set).
  </Property>
  <Property name="interactiveClient" required="No" default="false" sortOrder="alpha" since="3.1.0">
    Set the CLIENT_INTERACTIVE flag, which tells MySQL to timeout connections based on INTERACTIVE_TIMEOUT instead of WAIT_TIMEOUT
  </Property>
  <Property name="localSocketAddress" required="No" default="" sortOrder="alpha" since="5.0.5">
    Hostname or IP address given to explicitly configure the interface that the driver will bind the client side of the TCP/IP connection to when connecting.
  </Property>
  <Property name="propertiesTransform" required="No" default="" sortOrder="alpha" since="3.1.4">
    An implementation of com.mysql.jdbc.ConnectionPropertiesTransform that the driver will use to modify URL properties passed to the driver before attempting a connection
  </Property>
  <Property name="useCompression" required="No" default="false" sortOrder="alpha" since="3.0.17">
    Use zlib compression when communicating with the server (true/false)? Defaults to 'false'.
  </Property>
 </PropertyCategory>
 <PropertyCategory name="Networking">
  <Property name="maxAllowedPacket" required="No" default="-1" sortOrder="alpha" since="5.1.8">
    Maximum allowed packet size to send to server. If not set, the value of system variable 'max_allowed_packet' will be used to initialize this upon connecting. This value will not take effect if set larger than the value of 'max_allowed_packet'.
  </Property>
  <Property name="tcpKeepAlive" required="No" default="true" sortOrder="alpha" since="5.0.7">
    If connecting using TCP/IP, should the driver set SO_KEEPALIVE?
  </Property>
  <Property name="tcpNoDelay" required="No" default="true" sortOrder="alpha" since="5.0.7">
    If connecting using TCP/IP, should the driver set SO_TCP_NODELAY (disabling the Nagle Algorithm)?
  </Property>
  <Property name="tcpRcvBuf" required="No" default="0" sortOrder="alpha" since="5.0.7">
    If connecting using TCP/IP, should the driver set SO_RCV_BUF to the given value? The default value of '0', means use the platform default value for this property)
  </Property>
  <Property name="tcpSndBuf" required="No" default="0" sortOrder="alpha" since="5.0.7">
    If connecting using TCP/IP, should the driver set SO_SND_BUF to the given value? The default value of '0', means use the platform default value for this property)
  </Property>
  <Property name="tcpTrafficClass" required="No" default="0" sortOrder="alpha" since="5.0.7">
    If connecting using TCP/IP, should the driver set traffic class or type-of-service fields ?See the documentation for java.net.Socket.setTrafficClass() for more information.
  </Property>
 </PropertyCategory>
 <PropertyCategory name="High Availability and Clustering">
  <Property name="autoReconnect" required="No" default="false" sortOrder="0" since="1.1">
    Should the driver try to re-establish stale and/or dead connections? If enabled the driver will throw an exception for a queries issued on a stale or dead connection, which belong to the current transaction, but will attempt reconnect before the next query issued on the connection in a new transaction. The use of this feature is not recommended, because it has side effects related to session state and data consistency when applications don't handle SQLExceptions properly, and is only designed to be used when you are unable to configure your application to handle SQLExceptions resulting from dead and stale connections properly. Alternatively, as a last option, investigate setting the MySQL server variable "wait_timeout" to a high value, rather than the default of 8 hours.
  </Property>
  <Property name="autoReconnectForPools" required="No" default="false" sortOrder="1" since="3.1.3">
    Use a reconnection strategy appropriate for connection pools (defaults to 'false')
  </Property>
  <Property name="failOverReadOnly" required="No" default="true" sortOrder="2" since="3.0.12">
    When failing over in autoReconnect mode, should the connection be set to 'read-only'?
  </Property>
  <Property name="maxReconnects" required="No" default="3" sortOrder="4" since="1.1">
    Maximum number of reconnects to attempt if autoReconnect is true, default is '3'.
  </Property>
  <Property name="reconnectAtTxEnd" required="No" default="false" sortOrder="4" since="3.0.10">
    If autoReconnect is set to true, should the driver attempt reconnections at the end of every transaction?
  </Property>
  <Property name="retriesAllDown" required="No" default="120" sortOrder="4" since="5.1.6">
    When using loadbalancing, the number of times the driver should cycle through available hosts, attempting to connect.  Between cycles, the driver will pause for 250ms if no servers are available.
  </Property>
  <Property name="initialTimeout" required="No" default="2" sortOrder="5" since="1.1">
    If autoReconnect is enabled, the initial time to wait between re-connect attempts (in seconds, defaults to '2').
  </Property>
  <Property name="roundRobinLoadBalance" required="No" default="false" sortOrder="5" since="3.1.2">
    When autoReconnect is enabled, and failoverReadonly is false, should we pick hosts to connect to on a round-robin basis?
  </Property>
  <Property name="queriesBeforeRetryMaster" required="No" default="50" sortOrder="7" since="3.0.2">
    Number of queries to issue before falling back to master when failed over (when using multi-host failover). Whichever condition is met first, 'queriesBeforeRetryMaster' or 'secondsBeforeRetryMaster' will cause an attempt to be made to reconnect to the master. Defaults to 50.
  </Property>
  <Property name="secondsBeforeRetryMaster" required="No" default="30" sortOrder="8" since="3.0.2">
    How long should the driver wait, when failed over, before attempting 
  </Property>
  <Property name="selfDestructOnPingMaxOperations" required="No" default="0" sortOrder="2147483647" since="5.1.6">
    =If set to a non-zero value, the driver will report close the connection and report failure when Connection.ping() or Connection.isValid(int) is called if the connnection's count of commands sent to the server exceeds this value.
  </Property>
  <Property name="selfDestructOnPingSecondsLifetime" required="No" default="0" sortOrder="2147483647" since="5.1.6">
    If set to a non-zero value, the driver will report close the connection and report failure when Connection.ping() or Connection.isValid(int) is called if the connnection's lifetime exceeds this value.
  </Property>
  <Property name="resourceId" required="No" default="" sortOrder="alpha" since="5.0.1">
    A globally unique name that identifies the resource that this datasource or connection is connected to, used for XAResource.isSameRM() when the driver can't determine this value based on hostnames used in the URL
  </Property>
 </PropertyCategory>
 <PropertyCategory name="Security">
  <Property name="allowMultiQueries" required="No" default="false" sortOrder="1" since="3.1.1">
    Allow the use of ';' to delimit multiple queries during one statement (true/false), defaults to 'false', and does not affect the addBatch() and executeBatch() methods, which instead rely on rewriteBatchStatements.
  </Property>
  <Property name="useSSL" required="No" default="false" sortOrder="2" since="3.0.2">
    Use SSL when communicating with the server (true/false), defaults to 'false'
  </Property>
  <Property name="requireSSL" required="No" default="false" sortOrder="3" since="3.1.0">
    Require SSL connection if useSSL=true? (defaults to 'false').
  </Property>
  <Property name="verifyServerCertificate" required="No" default="true" sortOrder="4" since="5.1.6">
    If "useSSL" is set to "true", should the driver verify the server's certificate? When using this feature, the keystore parameters should be specified by the "clientCertificateKeyStore*" properties, rather than system properties.
  </Property>
  <Property name="clientCertificateKeyStoreUrl" required="No" default="" sortOrder="5" since="5.1.0">
    URL to the client certificate KeyStore (if not specified, use defaults)
  </Property>
  <Property name="clientCertificateKeyStoreType" required="No" default="JKS" sortOrder="6" since="5.1.0">
    KeyStore type for client certificates (NULL or empty means use the default, which is "JKS". Standard keystore types supported by the JVM are "JKS" and "PKCS12", your environment may have more available depending on what security products are installed and available to the JVM.
  </Property>
  <Property name="clientCertificateKeyStorePassword" required="No" default="" sortOrder="7" since="5.1.0">
    Password for the client certificates KeyStore
  </Property>
  <Property name="trustCertificateKeyStoreUrl" required="No" default="" sortOrder="8" since="5.1.0">
    URL to the trusted root certificate KeyStore (if not specified, use defaults)
  </Property>
  <Property name="trustCertificateKeyStoreType" required="No" default="JKS" sortOrder="9" since="5.1.0">
    KeyStore type for trusted root certificates (NULL or empty means use the default, which is "JKS". Standard keystore types supported by the JVM are "JKS" and "PKCS12", your environment may have more available depending on what security products are installed and available to the JVM.
  </Property>
  <Property name="trustCertificateKeyStorePassword" required="No" default="" sortOrder="10" since="5.1.0">
    Password for the trusted root certificates KeyStore
  </Property>
  <Property name="allowLoadLocalInfile" required="No" default="true" sortOrder="2147483647" since="3.0.3">
    Should the driver allow use of 'LOAD DATA LOCAL INFILE...' (defaults to 'true').
  </Property>
  <Property name="allowUrlInLocalInfile" required="No" default="false" sortOrder="2147483647" since="3.1.4">
    Should the driver allow URLs in 'LOAD DATA LOCAL INFILE' statements?
  </Property>
  <Property name="paranoid" required="No" default="false" sortOrder="alpha" since="3.0.1">
    Take measures to prevent exposure sensitive information in error messages and clear data structures holding sensitive data when possible? (defaults to 'false')
  </Property>
  <Property name="passwordCharacterEncoding" required="No" default="" sortOrder="alpha" since="5.1.7">
    What character encoding is used for passwords? Leaving this set to the default value (null), uses the platform character set, which works for ISO8859_1 (i.e. "latin1") passwords. For passwords in other character encodings, the encoding will have to be specified with this property, as it's not possible for the driver to auto-detect this.
  </Property>
 </PropertyCategory>
 <PropertyCategory name="Performance Extensions">
  <Property name="callableStmtCacheSize" required="No" default="100" sortOrder="5" since="3.1.2">
    If 'cacheCallableStmts' is enabled, how many callable statements should be cached?
  </Property>
  <Property name="metadataCacheSize" required="No" default="50" sortOrder="5" since="3.1.1">
    The number of queries to cache ResultSetMetadata for if cacheResultSetMetaData is set to 'true' (default 50)
  </Property>
  <Property name="useLocalSessionState" required="No" default="false" sortOrder="5" since="3.1.7">
    Should the driver refer to the internal values of autocommit and transaction isolation that are set by Connection.setAutoCommit() and Connection.setTransactionIsolation() and transaction state as maintained by the protocol, rather than querying the database or blindly sending commands to the database for commit() or rollback() method calls?
  </Property>
  <Property name="useLocalTransactionState" required="No" default="false" sortOrder="6" since="5.1.7">
    Should the driver use the in-transaction state provided by the MySQL protocol to determine if a commit() or rollback() should actually be sent to the database?
  </Property>
  <Property name="prepStmtCacheSize" required="No" default="25" sortOrder="10" since="3.0.10">
    If prepared statement caching is enabled, how many prepared statements should be cached?
  </Property>
  <Property name="prepStmtCacheSqlLimit" required="No" default="256" sortOrder="11" since="3.0.10">
    If prepared statement caching is enabled, what's the largest SQL the driver will cache the parsing for?
  </Property>
  <Property name="parseInfoCacheFactory" required="No" default="com.mysql.jdbc.PerConnectionLRUFactory" sortOrder="12" since="5.1.1">
    Name of a class implementing com.mysql.jdbc.CacheAdapterFactory, which will be used to create caches for the parsed representation of client-side prepared statements.
  </Property>
  <Property name="alwaysSendSetIsolation" required="No" default="true" sortOrder="2147483647" since="3.1.7">
    Should the driver always communicate with the database when Connection.setTransactionIsolation() is called? If set to false, the driver will only communicate with the database when the requested transaction isolation is different than the whichever is newer, the last value that was set via Connection.setTransactionIsolation(), or the value that was read from the server when the connection was established.  Note that useLocalSessionState=true will force the same behavior as alwaysSendSetIsolation=false, regardless of how alwaysSendSetIsolation is set.
  </Property>
  <Property name="maintainTimeStats" required="No" default="true" sortOrder="2147483647" since="3.1.9">
    Should the driver maintain various internal timers to enable idle time calculations as well as more verbose error messages when the connection to the server fails? Setting this property to false removes at least two calls to System.getCurrentTimeMillis() per query.
  </Property>
  <Property name="useCursorFetch" required="No" default="false" sortOrder="2147483647" since="5.0.0">
    If connected to MySQL > 5.0.2, and setFetchSize() > 0 on a statement, should that statement use cursor-based fetching to retrieve rows?
  </Property>
  <Property name="blobSendChunkSize" required="No" default="1048576" sortOrder="alpha" since="3.1.9">
    Chunk to use when sending BLOB/CLOBs via ServerPreparedStatements
  </Property>
  <Property name="cacheCallableStmts" required="No" default="false" sortOrder="alpha" since="3.1.2">
    Should the driver cache the parsing stage of CallableStatements
  </Property>
  <Property name="cachePrepStmts" required="No" default="false" sortOrder="alpha" since="3.0.10">
    Should the driver cache the parsing stage of PreparedStatements of client-side prepared statements, the "check" for suitability of server-side prepared and server-side prepared statements themselves?
  </Property>
  <Property name="cacheResultSetMetadata" required="No" default="false" sortOrder="alpha" since="3.1.1">
    Should the driver cache ResultSetMetaData for Statements and PreparedStatements? (Req. JDK-1.4+, true/false, default 'false')
  </Property>
  <Property name="cacheServerConfiguration" required="No" default="false" sortOrder="alpha" since="3.1.5">
    Should the driver cache the results of 'SHOW VARIABLES' and 'SHOW COLLATION' on a per-URL basis?
  </Property>
  <Property name="defaultFetchSize" required="No" default="0" sortOrder="alpha" since="3.1.9">
    The driver will call setFetchSize(n) with this value on all newly-created Statements 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-29T06:31:28.657

运行试图通过 JDBC 作为应用程序连接到 MySQL 的 java 文件。

1）右键单击java文件

2）继续运行

3）选择java应用程序。

它为我解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T19:17:59.417

嗯，我真的不知道到底发生了什么，我按照“新 Java 项目”中的教程中的相同步骤，现在它正在工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T18:17:43.140

检查这个例子：

```
package stack;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

public class Test {
    public void connectDatabase(){
        Connection conn = null;
        Statement st = null;
        ResultSet rs = null;
        try{
            Class.forName("com.mysql.jdbc.Driver");
            conn = DriverManager.getConnection(
                "jdbc:mysql://localhost:3306/DAH-MS-DB","root","root");
            st = conn.createStatement();
            rs = st.executeQuery("select * from DAH-MS-DB.Patient");
            while(rs.next()){
                //Use datas
            }
        }catch(Exception e){
            e.printStackTrace();
        }finally{
            try {
                rs.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
            try {
                st.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
            try {
                conn.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T17:56:43.573

> 味精和程序甚至没有进入放置调试停止点的主类。

这意味着您运行它的方式有其他问题。如果您使用 Maven 进行构建，您可以轻松地在 NetBeans 中打开该项目，因为 NetBeans 原生支持将 Maven pom 作为项目文件格式。如果您可以以这种方式很好地运行代码，我会切换到 NetBeans。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-30T17:01:31.893

我刚才遇到了这个问题。我的问题是 Eclipse，它使用的是 mysql.jar，它是主要的。我右键单击该项目，选择运行方式，运行配置。[![在此处输入图像描述](../Images/ff8782f63bb349fac8f7f0449dd9cad4.png)](https://i.stack.imgur.com/ufMtn.png)确保您调用的主要课程是您的主要课程。

# .net - 在不循环的情况下在 dotnet 中搜索列表集合

> ID：12220165
> 
> 赞同：0
> 
> 时间：2012-08-31T17:41:21.507
> 
> 标签：.net

给定以下类和声明，假设我已经使用 CellValue 的实例弹出 myValues，是否有一种简单的方法可以从 myValues 返回 RowID=1 和 ColumnID=3 的 cellValue

```
Class CellValue
    Public RowID, ColumnID As Integer
    Public Value As Object
End Class

Public myValues As List(Of CellValue) 
```

不是循环遍历 myValues 中的每个元素，而是有一种方法可以执行以下操作：

暗淡 x 作为 CellValue = myValues.???(RowID=1, ColumnID=3)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T17:45:34.657

好吧，*有些东西*必须循环，但您可以使用 LINQ[`First`](http://msdn.microsoft.com/en-us/library/bb535050)方法或[`List(Of T).Find`](http://msdn.microsoft.com/en-us/library/x0b5b5bc.aspx)指定谓词。

例如：

```
Dim x = myValues.Find(Function(cell) cell.RowID = 1 AndAlso cell.ColumnId = 3) 
```

请注意，如果找不到这样的单元格，您应该考虑您想要发生的情况。在这种情况下，将返回（大概）`Find`的默认值，并且行为方式相同；会抛出异常。`T``Nothing``FirstOrDefault``First`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T17:48:37.090

您可以使用 LinQ 完成此操作：

```
 Module Module1
        Public myValues As List(Of CellValue)
        Sub Main()
            myValues = New List(Of CellValue)

            myValues.Add(New CellValue With {.RowID = 1, .ColumnID = 1, .Value = "Hello 1"})
            myValues.Add(New CellValue With {.RowID = 2, .ColumnID = 2, .Value = "Hello 2"})
            myValues.Add(New CellValue With {.RowID = 3, .ColumnID = 3, .Value = "Hello 3"})
            myValues.Add(New CellValue With {.RowID = 4, .ColumnID = 4, .Value = "Hello 4"})
            myValues.Add(New CellValue With {.RowID = 5, .ColumnID = 5, .Value = "Hello 5"})

            Dim x As CellValue = (From val As CellValue In myValues Where val.RowID = 1 Select val).FirstOrDefault()

        End Sub

    End Module
    Class CellValue
        Public RowID, ColumnID As Integer
        Public Value As Object
    End Class 
```

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T17:48:42.217

只要您有一个没有特定顺序的对象数组，任何解决方案都将涉及循环查找所需的值。即使您使用 LINQ 之类的东西，编译器生成器代码仍会设置循环构造。这只是一个*O(n)*操作。有几种方法可以改进这一点：

**一：对你的价值观进行排序**

如果你让你的数组按排序顺序排列，你可以使用[二分搜索](http://en.wikipedia.org/wiki/Binary_search)来找到你想要的值。这增加了必须对数组进行排序（并保持排序）的成本，但它可以为查找带来回报。

**二：使用哈希**

您的`CellValue`类可以覆盖[GetHashCode](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)并返回不同的哈希（例如`RowID ^ ColumnID`）。然后，您可以使用一个类来存储每个值，并在*O(1)*`Dictionary<CellValue, CellValue>`中查找某个单元格（前提是没有哈希冲突）。

# ruby-on-rails - 重试几次后重新尝试执行“最终”功能

> ID：12220171
> 
> 赞同：1
> 
> 时间：2012-08-31T17:41:45.970
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, resque

我有一个应该调用第三方 API 的 resque 工作。我希望这种执行方法至少重试 3 次。如果它在第三次尝试时仍然没有通过，我希望它向我发送一封电子邮件，说出现问题并且无法调用 API。

有没有办法使用 resque-retry 来做到这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T02:08:22.703

您可以使用[自定义重试条件](https://github.com/lantins/resque-retry#custom-retry-criteria-check-callbacks)来检查 resque-retry 为您重试了多少次，如果数量太大，请执行不同的操作。像这样的东西：

```
class APIWorker
  extend Resque::Plugins::Retry
  @queue = :api_worker_queue

  retry_criteria_check do |exception, *args|
    if retry_attempt > 3
      send_email

      false # don't retry anymore
    else
      true # continue retrying
    end
  end

  def self.perform(job_id)
    do_api_stuff
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T15:11:25.690

需要在 retry_criteria_check de 之前添加 @retry_exceptions = []

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-11T10:00:43.600

如果您将[ActiveJob 与 Resque 一起](https://stackoverflow.com/a/48551550/2771889)使用，则可以使用[ActiveJob 的`retry_on`功能](https://edgeapi.rubyonrails.org/classes/ActiveJob/Exceptions/ClassMethods.html#method-i-retry_on)。

```
class RemoteServiceJob < ActiveJob::Base
  retry_on(SomeError) do |job, error|
    # your custom logic
  end
end 
```

# java - 在整数中查找数字的值（以十六进制定义）

> ID：12220175
> 
> 赞同：3
> 
> 时间：2012-08-31T17:41:56.750
> 
> 标签：java

我有一个以十六进制定义的整数，例如：

```
int number = 0x000500000; 
```

是否有可能获得一个数字的值？例如，我想知道第 5 位的值（从右到左阅读，尽管任何一个方向都对我有用）。就像是：

```
public int valueOfDigit(int value, int position) {
    return value at position'th digit of value;
} 
```

我怎样才能做到这一点？（不确定这里的数字是否正确，如有错误请纠正我），

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T17:43:33.657

嗯，一个十六进制数字是 4 位，所以基本上它只是移位和屏蔽的一种情况：

```
public static int valueOfDigit(int value, int position) {
    return (value >> (position * 4)) & 0xf;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T17:46:18.307

您可以使用 Integer 类：

```
Integer.toHexString(number).charAt(position) 
```

其中位置是您要读取的数字

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T17:44:36.407

```
int digitMask = 0XF * 16 ^ (position - 1);
return (value & digitMask) / (16 ^ (position -1)) 
```

# git - 我如何向非程序员解释源代码控制（特别是 Mercurial/Tortoise）？

> ID：12220178
> 
> 赞同：5
> 
> 时间：2012-08-31T17:42:28.043
> 
> 标签：git, svn, version-control, mercurial

我们公司使用 Mercurial 对 Java Web 应用程序进行源代码控制。它工作得很好，我们开始对一堆内容（PDF 文件）使用源代码控制。对于我们的部署模型，这非常有效，幸运的是，我们当时的图形设计师曾经是一名 Web 开发人员并且已经了解源代码控制。

现在我们已经用两个严格的平面图形设计师替换了那个家伙。他们的工作令人惊叹，但每次我们要求他们使用源代码控制时，他们看起来都很害怕和困惑。作为参考，我们使用 Tortoise，因为我们发现它是非程序员的最佳选择，因为它的用户界面。

Hginit.com 是程序员学习 Mercurial 的好方法，那么对于非程序员来说，一个网站怎么样？

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T20:05:36.387

我会向他们解释，这就像在整个过程中制作你的艺术项目的复印件。在绘图期间，您可以丢弃已完成的操作并从前一个时间点继续。如果您从与您制作的其中一张照片不同的方向开始，您还可以看到会发生什么。你也可以给朋友一份副本，告诉他们可以完成背景中的树木和天空的绘制。稍后，您可以合并您的两种努力，看看它是什么样子。您的朋友也可以在天空和树木上工作时间歇性地拍照。想想可能性！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T20:10:03.673

您可以返回之前的“保存”，并检查您的“保存”版本之间的差异。每次“保存”时，您还可以发表评论，例如“初稿”或“会计要求的实施变更”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T18:09:59.457

尽管我们在项目中使用 Git，但我刚刚与一些非开发人员进行了确切的对话。这总结了我如何与他们一起探讨这个话题：

1.  说明版本控制不仅仅是“备份”。
2.  概括地说，当涉及多个文件和/或人员时，它就像一个大的“撤消”按钮。
3.  说明这允许您“标记”进度（生产、公开发布、后续版本）并充满信心地继续前进，因为您知道如果需要，您可以将项目回滚到“最后一次已知的良好”状态。
4.  决定源代码控制工作流程和理念，并告诉**每个人都**坚持下去！（即，何时分支、标记、合并等，以及提交的次数/频率）
5.  在您选择的源代码控制 GUI 中学习它们。

**例子：**

就像亚当说的那样，这就像拍摄一个艺术项目的快照，但我在涉及多个文件的音乐作品中也成功地使用了它：

*   DAW 项目文件（Logic Pro 等）
*   项目设置
*   音频插件及其设置
*   歌词注释
*   最初的粗略录音
*   多次拍摄
*   多次混音、制作或母带处理

有时我会创建并检查一个新的实验分支，在歌曲的创作和/或制作中尝试完全不同的方法。这通常会影响上面列表中的多个项目，但我可以放心地继续前进，因为我知道如果某些事情不能正常工作，我总是可以切换到项目的“稳定”版本。

版本控制不再只是针对“源”。它非常适合任何大规模的创意数字项目！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T18:01:44.283

好吧，我不认为你需要一个教程来让那些平面设计师参与进来。如果您了解存储库和源代码控制，您可以简单地指导他们......

这只是让`trunk`每个人都可以使用功能副本的一种方式；在某个时候，您可能有`branch`一个特定版本的工作副本，并且每个版本都将代码标记为`tag`供参考。

现在剩下的唯一部分是`check-in`将您的工作放在存储库中，`update`- 下载其他人的工作`checkout`- 将存储库下载到您的本地计算机上。

这只是我用来带上我们有时间的新鲜人的一个班轮。

# .htaccess - htaccess Apache 到 Litespeed

> ID：12220181
> 
> 赞同：1
> 
> 时间：2012-08-31T17:42:36.063
> 
> 标签：.htaccess, litespeed

我在我的开发环境（Apache 2）上使用了以下重写，它工作正常，我上传到我的实时环境（LiteSpeed），它不再工作了:(

任何想法为什么给出以下内容？

我正在使用我的主机不支持的“P”指令“mod_proxy”。我怎样才能解决这个问题？

```
<IfModule mod_rewrite.c>
  Options +FollowSymLinks
  RewriteEngine On

  RewriteBase /

  RewriteCond $1 !\.(gif|jpe?g|png)$ [NC]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{HTTP_HOST} !^www\. [NC]
  RewriteCond %{HTTP_HOST} ^([^.]+)\.example\.com
  RewriteRule ^(.*)$ http://example.com/folder/%1/$1 [QSA,NC,P]

  # Removes index.php
  RewriteCond $1 !\.(gif|jpe?g|png)$ [NC]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ index.php?/$1 [L]

</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T16:01:06.737

我对这个问题采取了不同的方法。显然 mod_proxy 方法效率低，所以我在 PHP 中使用一些简单的代码来解决它来确定子域并应用条件来检查 $subdomain 不是空字符串。

```
$url_parts = explode('.', str_replace('.example.com', '', $_SERVER['HTTP_HOST']));
$subdomain = ($url_parts[0] !== '') ? $url_parts[0] : ''; 
```

一旦我知道有一个子域，我就会重定向到正确的页面。

# css - Chrome 的 display-inline 问题 tags I am having an issue where I cannot get the same bit of CSS to render the same across Firefox and Chrome. Instead of a vertical select box of 24 values, they all appear in a line next to each other in Firef

> ID：12220184
> 
> 赞同：30
> 
> 时间：2012-08-31T17:43:09.103
> 
> 标签：css, html, google-chrome

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T18:16:20.390

我认为您不应该（可以？）`<option>`像这样使元素内联。尝试改用复选框。像[这样](http://jsfiddle.net/WVNww/)的东西：

```
<!DOCTYPE html>
<html>
 <head>
     <title>Inline Options</title>
     <style>
         ul {
             list-style:none;overflow:hidden;
         }
         ul li {
             lit-style:none;
             float:left;
             position:relative;
         }
         ul li input[type="checkbox"] {
             position:absolute;
             top:0;
             right:0;
             bottom:0;
             left:0;
             width:100%;
             height:100%;
             opacity:0;
         }
         ul li input:checked + label {
             background:blue;
         }
     </style>
 </head>
 <body>
     <form action="#" method="get">
         <ul>
             <li>
                 <input type="checkbox" name="aryHours[]" id="checkbox1" />
                 <label for="checkbox1" class="">Option 1</label>
             </li>
             <li>
                 <input type="checkbox" name="aryHours[]" id="checkbox2" />
                 <label for="checkbox2" class="">Option 2</label>
             </li>
             <li>
                 <input type="checkbox" name="aryHours[]" id="checkbox3" />
                 <label for="checkbox3" class="">Option 3</label>
             </li>
         </ul>
     </form>
 </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-17T22:22:42.087

Firefox 行为可能是由于错误

[https://bugzilla.mozilla.org/show_bug.cgi?id=1271482](https://bugzilla.mozilla.org/show_bug.cgi?id=1271482)

如前所述，尽量避免使用 inline on 选项

# ruby-on-rails - 为什么 faker::lorem 的输出会在字符串的开头产生破折号？

> ID：12220189
> 
> 赞同：3
> 
> 时间：2012-08-31T17:43:33.737
> 
> 标签：ruby-on-rails, faker, lorem-ipsum

使用带有 rails 的 faker gem 来生成一些假数据。当我使用 faker::lorem 时，输出包括字符串前面的破折号。

```
namespace :db do
  desc "Fill database with sample data"
  task populate: :environment do
    7.times do |l|
      line = Line.create!(sentence: Faker::Lorem.sentences(2))
    end
  end
end 
```

像：

```
---
- Odit consectetur perspiciatis delectus sunt quo est.
- Tempore excepturi soluta aliquam perferendis. 
```

知道为什么这个函数返回带有破折号的 Lorem 吗？最简单的方法将它们剥离？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-02T01:42:28.263

正如 Kevin 和 Deefour 在评论中提到的，Faker::Lorem 返回一个数组。

由于我们要求 Ruby 将其存储在字符串中，因此 Ruby 根据[YAML](http://en.wikipedia.org/wiki/YAML)的指南对其进行解释，这是一种在文本中表示数据结构的方式。

如果您遇到这个问题，最简单的解决方法是使用 Ruby 内置的数组到字符串转换方法`.join(x)`，该方法将字符串 x 作为分隔符添加。

# node.js - 来自 teplate 的 Node.js 异步调用

> ID：12220191
> 
> 赞同：1
> 
> 时间：2012-08-31T17:43:41.897
> 
> 标签：node.js, asynchronous

我刚从 node.js 开始，这个问题肯定有一个明显的答案，但我无法解决。

让我们有一个`club`用这个单一方法调用的模型：

```
club.getStaff = function(callback) {
    client.sinter('club-staff:'+club.id, callback);
}; 
```

到目前为止，我通过回调管理应用程序流，但现在我被困在模板中。我将如何呈现异步调用？我想遍历`staff`并打印它。

我想我可以在渲染之前调用这个方法，实际上在它的回调中渲染。这感觉有些不对劲。如果不需要调用该方法（因为模板中的 if），则会浪费资源。此外，*渲染包装器*会随着引入的每个新（异步）变量而增长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:57:31.680

对于大多数模板引擎，您无法从模板中调用异步函数。

相反，您必须从控制器调用异步函数，当它返回时，将数据传递给模板。

假设快递：

```
app.get('/route/', function(req, res) {
    club.getStaff(function(data) {
        res.render('template', data);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-22T18:13:36.503

在节点中，您可以将[nai](https://github.com/Ournet/nai)用于异步模板。

# symfony - 将 Doctrine 2 Entity 与不同的数据库一起使用

> ID：12220198
> 
> 赞同：1
> 
> 时间：2012-08-31T17:44:21.787
> 
> 标签：symfony, doctrine-orm

在我的 Symfony2 浏览器游戏中，我有一个使用 Doctrine 2 ORM 的用户实体。游戏有经典和极速两个实例，主要是相互独立，都使用自己的数据库（结构相同）。唯一的问题是用户可以连接他们的帐户，所以要显示连接帐户的一些基本用户信息。为此，我有一个 classic_id 和 speed_id 作为连接到另一个用户实体的属性。但这将是一个跨数据库连接，据我所知，这在 Doctrine 2 中是不可能的。我还发现可以有多个具有自己连接的实体管理器，但我认为它们只能应用于完整的捆绑包，对吗？

所以在这里我需要一些解决这个问题的方法，最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T10:56:06.123

实际上有可能进行跨数据库连接，但这与其说是一种功能，不如说是一种技巧，我不建议使用它。

要将实体从不同实体管理器之间的一个包中分离出来，您可以使用指向托管实体的“dir”属性。例如：

```
doctrine:
    orm:
        default_entity_manager:   default
        entity_managers:
            default:
                connection:       default
                mappings:
                    AppBundle:
                        dir:      Path/To/EntityFolder1
            anotherone:
                connection:       anotherconnection
                mappings:
                    AppBundle:
                        dir:      Path/To/EntityFolder2 
```

还有记录不佳的“前缀”选项，但我还没弄清楚它是什么（你可以自己试验:)）

问候！

# java - Android模拟器准确性和预测运行时间

> ID：12220202
> 
> 赞同：0
> 
> 时间：2012-08-31T17:44:50.213
> 
> 标签：java, android, computation

就应用在物理 Android 设备上的运行方式而言，Android 模拟器的准确度如何？我是一名业余 Android 开发人员，但由于情况原因，我自己没有 Android 设备。应用程序在模拟器上加载/运行所需的时间是否准确（即在实际设备上会更快还是更慢）？有什么方法可以查看它在不同类型的设备上的功能？此外，我不断收到此错误：

```
Skipped 60 frames!  The application may be doing too much work on its main thread. 
```

这是否意味着我正在努力计算？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:49:47.420

通常它要慢得多。幸运的是，最近添加了一些系统映像以在系统上启动一对模拟器`x86`。这大大加快了体验。有图像可供下载`2.3.3`和`4.0.3`。

要利用它们，只需打开 Android SDK Manager（来自 Eclipse，有一个指向底部的箭头图标，或者来自 SDK）。在那里，您只需要下载 和 的系统`x86`映像。`2.3.3``4.0.3`

之后，在这些新操作系统版本之一上创建新模拟器时，您将能够选择 CPU 系统。还有其他一些细微的调整可以稍微提高性能，但我个人并没有感觉到差异。

试一试，让我知道它是否适合你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T18:04:52.230

**1.** Android Emulator 有点不可预测。

**我经历过一些小问题：**

**-**下面检查互联网连接的代码不适用于模拟器。

```
private boolean checkConnection(){
boolean connected = false;
ConnectivityManager cm = 
(ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);

if (cm != null) {
NetworkInfo[] netInfo = cm.getAllNetworkInfo();

for (NetworkInfo ni : netInfo) {
if ((ni.getTypeName().equalsIgnoreCase("WIFI")
|| ni.getTypeName().equalsIgnoreCase("MOBILE"))
& ni.isConnected() & ni.isAvailable()) {
connected = true;
    }

  }
 }

return connected;

} 
```

不知何故，上面的代码对我来说毫无用处，因为有时连接到无线路由器但没有互联网连接，当时它给出了错误的结果。

好吧，我创建了自己的代码，在应用程序启动时，我的代码将检查 WAN 或数据包连接，然后通过在端口 37 向 TimeServer 发送请求以获取二进制形式的时间来检查 Internet 连接。 ..在此我决定结果。

**-** `Camera`，这是另一个问题，我需要使用物理设备。

**-** 有时它会给出奇怪的错误，然后我清理项目并关闭我的 Eclipse、模拟器，然后再次启动它们。

# python - Windows的最佳python模块管理器

> ID：12220203
> 
> 赞同：1
> 
> 时间：2012-08-31T17:44:51.460
> 
> 标签：python, windows, module, pip, module-management

我总是必须在谷歌上搜索一些 EXE 或 MSI 才能在 Windows 上的 python 中安装模块有时有预编译模块仅适用于 win32 而不是 amd64

我正在讨论使用 ActiveState Python 或安装一些模块管理器。

你能建议最好的解决方案。特别是如果你自己使用它。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:47:34.390

这些天我知道的最流行的一种是[`pip`](http://pypi.python.org/pypi/pip/)，通常与沙箱一起[`virtualenv`](http://pypi.python.org/pypi/pip/)用于开发环境。

有很多文章介绍了两者的组合：

*   [http://guide.python-distribute.org/pip.html](http://guide.python-distribute.org/pip.html)
*   [http://jontourage.com/2011/02/09/virtualenv-pip-basics/](http://jontourage.com/2011/02/09/virtualenv-pip-basics/)
*   [http://rubayeet.com/2011/03/04/getting-started-with-pipvirtualenv/](http://rubayeet.com/2011/03/04/getting-started-with-pipvirtualenv/)

# twitter-bootstrap - Bootstrap nav-collapse 隐藏在单页应用程序中

> ID：12220206
> 
> 赞同：1
> 
> 时间：2012-08-31T17:45:16.080
> 
> 标签：twitter-bootstrap

我目前正在为我的单页应用程序使用 2.x Bootstrap 版本。

在桌面上，它工作正常。

但是在我的 ipad 和手机上，它显示了一个很好的导航按钮。但是，当我单击显示的下拉项目中的项目时，它不会自动关闭。

由于它是一个单页应用程序，我觉得再次单击它以隐藏以查看内容很烦人。

当在 nav-collapse 元素上单击 li 时，我尝试了 collapse('hide') ，但它隐藏了下拉菜单中的其他 li 元素。

$('.nav-collapse > li').click(function(e)
$(this).collapse('hide')

单击链接时隐藏的最佳方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:53:35.113

我也遇到了同样的问题，并通过向导航项链接本身添加数据属性（修改为仅折叠打开的 .nav-collapse）来解决它。

请注意，链接上的数据目标是“.nav-collapse.in”，它只选择展开的导航，因此仅作为关闭。

例如：

```
<a class="btn btn-navbar collapsed" data-toggle="collapse" data-target=".nav-collapse">
    <!-- Collapse icon goes here -->
</a>

<div class="nav-collapse">
    <ul class="nav">
        <li>
            <a href="#" data-toggle="collapse" data-target=".nav-collapse.in">Link</a>
        </li>
    </ul>
</div> 
```

这仅在 Mac OSX Chrome 上的 Bootstrap 2.2.1 中进行了测试。尽管它是重复的并且不是 DRY，但它确实将折叠声明保留到 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-02T04:55:50.057

在 Bootrap 3.3.4 中，您可以将以下内容添加到锚标签以自动关闭导航。

数据切换=“折叠”数据目标=“#navbar”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T17:50:06.093

Twitter Bootstrap 的 Dropdown 插件（参见[问题 #4497](https://github.com/twitter/bootstrap/issues/4497)）中存在一个错误，该错误是在 2.1.0 中引入的，它会无意中阻止下拉菜单项上的点击事件。它应该在 2.1.1 中修复。

如果您正在使用 CDN 或者只是不想编辑/重新编译**bootstrap-dropdown.js**，您可以将以下解决方法添加到您的页面，在引导后加载它：

```
$('body')
  .off('click.dropdown touchstart.dropdown.data-api', '.dropdown')
  .on('click.dropdown touchstart.dropdown.data-api'
    , '.dropdown form'
    , function (e) { e.stopPropagation() }) 
```

如果您托管自己的代码，并且可以轻松构建**bootstrap.min.js**，那么您可以在**第 145 行对****bootstrap-dropdown.js**进行以下编辑：

 **```
'.dropdown' 
```

应该改为

```
'.dropdown form' 
```**

# python - tweepy unbound method_call 错误

> ID：12220210
> 
> 赞同：0
> 
> 时间：2012-08-31T17:45:26.763
> 
> 标签：python, twitter, tweepy

我正在尝试使用 tweepy 进行简单请求，以获取有关特定用户屏幕名称的信息。我这样做了：

```
import tweepy
api = tweepy.API
api.get_user('name') 
```

我得到错误：

```
unbound method _call() must be called with API instance as first argument (got str instance instead) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:49:27.183

您需要创建 API 的一个实例：

```
api = tweepy.API()
api.get_user('name') 
```

演示总是更有启发性：

```
>>> import tweepy
>>> api = tweepy.API()
>>> api.get_user('zopatista')
<tweepy.models.User object at 0x10ffcd910> 
```

# xcode - 有没有一种有效的方法可以在 xcode 中的 UIImageView 中进行图像转换？

> ID：12220214
> 
> 赞同：1
> 
> 时间：2012-08-31T17:45:37.793
> 
> 标签：xcode, image, animation, transitions

我学习了如何使用“UIViewAnimationTransitionCurlUp”在视图之间创建平滑过渡，如下所示。

是否有类似的方法可以在视图中的单个 UIImageView 中切换的图像之间进行转换？

```
[UIView beginAnimations:@"Animation" context:nil];
[UIView setAnimationDuration:0.75];
[UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:self.window    cache:YES];
[view1 removeFromSuperview];
[window addSubview:view2];
[UIView commitAnimations]; 
```

这是我目前用来切换图像的代码：

```
[lblSwipe setText:@"Left Swiped."];
     currentImageIndex++;
     if (currentImageIndex == [imagesArray count]) {
         currentImageIndex = 0;
     }

     [imageView setImage:[UIImage imageNamed:[imagesArray     objectAtIndex:currentImageIndex]]];
} 
```

我将如何根据我的特定情况调整代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:15:16.990

我们在评论中谈到了这一点，但我会发布一个官方答案：

您可以使用相同的代码为对象之间的过渡`UIView`设置动画以在对象​​之间设置动画，`UIImageView`因为`UIImageView`它是`UIView`.

# iphone - 为使用 OpenMP 的 iOS 编译静态库

> ID：12220215
> 
> 赞同：7
> 
> 时间：2012-08-31T17:45:39.667
> 
> 标签：iphone, ios, c, openmp, static-linking

我正在编写一个使用 OpenMP 的简单跨平台库，但我不知道如何在 iPhone 应用程序中对其进行测试。
我正在运行**OS X**，使用**GCC 4.7**，我将它编译为静态库，我还设法将它链接在一起`libgomp.a`并将其添加到我在 Xcode 中的测试应用程序中。应用程序构建时没有任何错误或警告，但是当我在 iPhone 模拟器中运行它时，我得到的只是这个错误消息：

```
dyld: lazy symbol binding failed: Symbol not found: ___emutls_get_address
  Referenced from: /opt/local/lib/gcc47/i386/libgomp.1.dylib
  Expected in: /usr/lib/libSystem.B.dylib

dyld: Symbol not found: ___emutls_get_address
  Referenced from: /opt/local/lib/gcc47/i386/libgomp.1.dylib
  Expected in: /usr/lib/libSystem.B.dylib 
```

我读到在以前版本的 GCC 中存在一个错误`___emutls_get_address`，但现在应该修复它。你知道可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-24T22:29:49.443

它正在寻找一个不存在的动态库。由于您不能在实际设备上使用动态库，因此它将在设备上失败，但在构建期间不会。您应该尝试手动将库重建为 .a 文件，并确保使用任何 -l 参数。那是我给你最好的。假设这不是越狱（可能是真的），您只需手动链接它。您总是可以将库代码文件添加到您的项目中。

希望这可以帮助。

# struts2 - JSP/Struts2中如何使用OGNL表达式

> ID：12220216
> 
> 赞同：0
> 
> 时间：2012-08-31T17:45:47.607
> 
> 标签：struts2, expression, ognl

像[EL](http://docs.oracle.com/javaee/6/tutorial/doc/gjddd.html)一样，是否可以在常规 HTML中使用[s: 标记](https://struts.apache.org/docs/tag-reference.html)之外的任何[OGNL 表达式？](https://commons.apache.org/proper/commons-ognl/language-guide.html)

例如，如果我想在 EL 中获取某个 bean 的值，我会 `<div>${beanName.propertyName}`在`DIV`块内做一些事情。

如何使用 OGNL 做到这一点。我有一个代码块：

```
 <s:iterator value="parentBean.qna" var="questionAndAnswers"
                status="qIndex">
      <li>
        <s:label theme="simple"
                 value="Question %{#qIndex.index+1} - %{#questionAndAnswers.question}"/>

        <ul>
        <s:iterator value="%{#questionAndAnswers.answers}" var="answer" status="answersStat">
        <li>            
        <input  type="radio" name="parentBean.answerMap['%{qIndex}']" />'
        value='<s:property value="%{#answersStat.index}"/>'><s:property value="%{#answer}" /></input>
        </li>
        </s:iterator>
        </ul>
        <br/>
      </li>
    </s:iterator> 
```

它说`input type="radio" name="parentBean.answerMap['%{qIndex}']" ...` 我希望`qIndex`用当前索引动态替换的值，以便可以将值设置为后面的相应键。因此，如果是`parentBean.answerMap[1]`，我假设 Action 处的地图将具有`key=1`输入的 and 值。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T22:46:01.713

不使用 OGNL 语法，不；JSP 对 OGNL 一无所知。

S2 的请求包装器将*允许*使用 JSP EL 语法（`${}`

当然，您不需要*在*标签的属性中使用`<s:property value="#qIndex.index"/>`，就像对`value`属性所做的那样。

# c# - 制作 Windows 窗体/应用程序的更小屏幕分辨率版本的最简单方法？

> ID：12220230
> 
> 赞同：1
> 
> 时间：2012-08-31T17:46:31.427
> 
> 标签：c#, visual-studio-2010, screen-resolution

我编写了一个为 1280x1024 屏幕设计的 C# windows 窗体应用程序。它完全充满了控制。我需要为 1024x600 屏幕制作一个“轻量级”版本，该版本使用相同的代码库在上网本上使用。我能想到的最简单的方法是#ifdef 设计文件并定义一些变量以在构建时选择并进行多个构建，但我希望在我的解决方案中有第二个项目继承第一个表单的所有内容和使用设计器重新排列各种列表框、文本框等，也许制作几个选项卡来保存不太相关的信息。在 Visual Studio 2010 中执行此操作的最简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T17:49:54.733

这就是[`Control.Anchor`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.anchor.aspx)财产的用途。您需要为要调整大小的控件设置它。

来自 MSDN：

> 使用该`Anchor`属性来定义控件在调整其父控件大小时如何自动调整大小。将控件锚定到其父控件可确保在调整父控件的大小时，锚定的边缘相对于父控件的边缘保持在相同的位置。
> 
> 您可以将控件锚定到其容器的一个或多个边缘。例如，如果您有 a `Form`，`Button`其`Anchor`属性值设置为`Top`and `Bottom`，则随着 的增加，将`Button`拉伸以保持到 的顶部和底部边缘的锚定距离。`Form``Height``Form`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T18:05:18.853

对您而言，坏消息是确实没有快速简便的解决方案。当您使用较小的外形尺寸（如上网本或平板电脑）时，您需要注意一些特定的用户体验元素，这些元素在两种环境之间的转换效果并不好。

话虽如此，如果您创建一个包含所有逻辑的基本表单，您可以为每个屏幕尺寸从它继承，并分别设计这两个表单。

如果您遵循此路径，则在将事件处理程序连接到设计器中的事件时，Visual Studio 中会出现错误 - 它不允许您连接到位于父类中的事件处理程序。设计师会崩溃。要解决此问题，请手动连接您的事件处理程序，如下所示：

```
 this.MyButton.Click += new System.EventHandler(this.MyClickEventHandler); 
```

祝你好运！

# entity-framework - 在当前范围或上下文中无法解析“表名”

> ID：12220231
> 
> 赞同：0
> 
> 时间：2012-08-31T17:46:32.413
> 
> 标签：entity-framework, dapper

我看到了一个与此类似的问题，但它涉及字段名称，而不是我遇到的表名问题。

我试图从我的一张桌子上做一个简单的拉动，但我遇到了一个我无法弄清楚的错误。

错误消息指出：

> 在当前范围或上下文中无法解析“StudentBilingual”。确保所有引用的变量都在范围内，加载了所需的模式，并且正确地引用了命名空间。

```
 using (CEDARSEntity entity = CEDARSEntity.CreateInstance())
            {
                entity.Connection.Open();

                var result = entity.Connection.Query<StudentBilingual>(
                                        @"select [schoolYear]
                                                ,[districtOrganizationId]
                                                ,[schoolOrganizationId]
                                                ,[locationid]
                                                ,[ssid]
                                                ,[startDate]
                                                ,[recStartDate]
                                                ,[keyHash]
                                                ,[dataHash]
                                                ,[programId]
                                                ,[districtStudentCode]
                                                ,[instructionalModelId]
                                                ,[exitDate]
                                                ,[programExitReasonId]
                                                ,[placementTestScaleScore]
                                                ,[placementTestLevelId]
                                                ,[placementTestDate]
                                                ,[initialWAPlacementDate]
                                                ,[initialUSPlacementDate]
                                                ,[numMonthsUSAttendance]
                                                ,[numMonthsNonUSEducation]
                                                ,[recEndDate]
                                                ,[programdesignation]
                                                ,[placementTestCodeId]
                                                ,[gradeLevelAtPlacementId]
                                        from StudentBilingual 
                                        Where schoolYear=2011");
                entity.Connection.Close();
            } 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:58:26.613

StudentBilingual 是数据库还是表？

# postgresql - 使用 ORMLite 对几何点建模

> ID：12220234
> 
> 赞同：3
> 
> 时间：2012-08-31T17:46:47.433
> 
> 标签：postgresql, geometry, point, ormlite

我使用 PostgreSQL 作为我的应用程序的数据库。我也使用 ORMLite 作为映射。

在数据库表中，我使用点作为数据类型来存储目标的位置 (x,y)。

所以我的问题是：如何在 ORMLite 中映射 PostgreSQL 中的类型点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:38:36.760

```
@DatabaseTable(tableName = "point")
public class Point {
     @DatabaseField(generatedId = true, index=true)
     public Long id;

     @DatabaseField()
     public Integer x;

     @DatabaseField()
     public Integer y;

} 
```

但是，是的，请让你的问题更清楚

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-07T22:09:17.913

这是一个老问题，但我也一直在寻找解决方案，但没有找到。

这里有一个ormlite补丁的建议

[https://github.com/j256/ormlite-core/issues/68](https://github.com/j256/ormlite-core/issues/68)

# javascript - 浏览器支持 popstate 事件中的状态对象？

> ID：12220236
> 
> 赞同：2
> 
> 时间：2012-08-31T17:46:55.170
> 
> 标签：javascript, dom-events, html5-history, popstate

我可以找到对该方法的浏览器支持，`pushState`但我知道并非所有版本的浏览器实际上都会在`popstate`事件中传递状态对象。如果浏览器支持，我可以指望使用它`pushState`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:49:09.073

我建议使用[History.js](https://github.com/balupton/History.js/)，它可以跨浏览器[规范](https://github.com/balupton/History.js/#notes-on-compatibility)History API，甚至为不原生支持 API 的旧浏览器提供回退机制。

# android - 在 Android 中重复任务

> ID：12220239
> 
> 赞同：1
> 
> 时间：2012-08-31T17:47:20.133
> 
> 标签：android

我尝试定期（1s）切换屏幕亮度低和高，我认为这段代码应该可以工作：

```
SystemClock.sleep(1000);
params.screenBrightness = 0;
getWindow().setAttributes(params);

SystemClock.sleep(1000);
params.screenBrightness = 1;
getWindow().setAttributes(params); 
```

我已经尝试过这些代码，但它只完成了第二个（或者如果我扩展代码，则为最后一个）（即亮度 = 1）。由于我对此表示怀疑，所以我在每个睡眠函数之后放置了一个变量 int i = 0，然后是 i++，它毕竟向我显示 i = 2（通过显示字符串）。我认为 Android 做了总和，但我的屏幕只对最后一个设置做出反应，而不是对中间命令作出反应。您知道为什么会这样吗？如何切换屏幕亮度？

我也尝试使用“for”循环，但没有运气。

希望尽快收到您的意见。

干杯，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T17:51:02.377

我不知道你为什么要每隔一秒使屏幕变亮和变暗......但是如果你想在时间延迟上运行代码，请考虑使用 Handler 和 Runnable：

```
import android.view.WindowManager.LayoutParams;
public class Example extends Activity {
    private LayoutParams mAttributes;
    private Handler mHandler = new Handler();
    private Window mWindow;

    private Runnable onEverySecond = new Runnable() {
        public void run() {
            if(mAttributes.screenBrightness != LayoutParams.BRIGHTNESS_OVERRIDE_FULL)
                mAttributes.screenBrightness = LayoutParams.BRIGHTNESS_OVERRIDE_FULL;
            else
                mAttributes.screenBrightness = LayoutParams.BRIGHTNESS_OVERRIDE_OFF;

            mWindow.setAttributes(mAttributes);
            mHandler.postDelayed(onEverySecond, 1000);
        }
    };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mWindow = getWindow();
        mAttributes = mWindow.getAttributes();

        mHandler.post(onEverySecond);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:53:25.003

您可以使用[Handler 并在可运行文件中向其发布延迟任务](https://stackoverflow.com/questions/4597690/android-timer-how)，或者[使用计时器](http://steve.odyfamily.com/?p=12)来解决这个问题。我会选择第二种方法，因为您需要的是重复任务而不是按顺序执行任务。

# java - Ubuntu 中的 jssc SerialPortList

> ID：12220240
> 
> 赞同：1
> 
> 时间：2012-08-31T17:47:17.770
> 
> 标签：java, ubuntu-12.04

我正在使用 Eclipse IDE。使用 jssc-0.9.0 版本，我已将 jssc.jar 正确添加到引用库中。但是当我运行它时，它总是终止。说“Main[Java Application]/usr/lib/jvm/java-6-openjdk-i386/bin/java”这是我的代码

```
import jssc.SerialPortList;
public class Main {

    public static void main(String[] args) {
        String[] portNames = SerialPortList.getPortNames();
        for(int i = 0; i < portNames.length; i++){
            System.out.println(portNames[i]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-03-17T10:28:07.480

我遇到了同样的问题，以我的拙见，答案是不正确的 - 至少不是 jssc 的 2.8.0 版本。

在我的例子中，端口列表是空的，因为 Linux（在我的例子中是 Ubuntu 12.04）不允许任何用户使用串行端口——这就是列表为空的原因。所以我执行以下命令将我的用户添加到允许使用串行端口的用户组：

```
sudo usermod -a -G dialout tim 
```

我需要注销并再次登录系统才能被系统识别为该组的成员 - 但之后我在执行上面的代码段时得到以下行：

```
/dev/ttyACM0 
```

它现在包含我的用户由于权限而被允许查看的唯一已配置串行端口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T00:22:48.007

我遇到了类似的问题，所以我检查了 jssc 代码，发现在 linux 中，SerialPortList.getPortNames() 解析 dmesg 输出以查找以“ttyS”或“ttyUSB”开头的端口名称——但我唯一的串行设备在 ttyACM0 和当然 getPortNames 函数找不到它...您还可以检查 jssc 的 linux 本机库（libjSSC-0.9_x86.so）是否从 jssc.jar 提取到 ~/.jssc/linux/ 当你运行你的代码...

# objective-c - 跨脚本传递变量

> ID：12220245
> 
> 赞同：0
> 
> 时间：2012-08-31T17:47:37.620
> 
> 标签：objective-c, ios5

我正在尝试从另一个脚本导入变量！在脚本 blabla2.m 我有`[listaDiOggetti addObject:strResult];`

问题是`"Use of undeclared identifier 'strResult'"`

但在 blabla2.h 我正在导入`#import "blabla1.h"`

在 blabla1.h 我有：`@property (retain, nonatomic) NSString *strResult;`

为什么blabla2看不到blabla1的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:56:39.947

由于 Objective-C 是一种面向对象的语言，您可能需要阅读 Objective-C 中的类和属性：[声明的属性](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)

A`@property`不是变量。它是一个帮助封装类变量的属性。

```
//blabla1.h

@interface Blabla1 : NSObject {
    NSString *_strResult; //Class variable
}

@property (strong) NSString *strResult; //Property
@end

//blabla1.m
@implementation Blabla1

//setup Getter/Setter as strResult using _strResult
@synthesize strResult = _strResult; 

@end 
```

因此，一旦定义了类变量，`blabla1.h`就可以在创建如下实例后使用属性访问它`blabla1`：

```
Blabla1 *myBlabla1Obj = [Blabla1 alloc] init];
...
NSString *someString = [myBlabla1Obj strResult]; 
```

# javascript - js image.onload 在父节点上调用方法

> ID：12220247
> 
> 赞同：0
> 
> 时间：2012-08-31T17:47:43.620
> 
> 标签：javascript, kineticjs

我正在制作一个网络应用程序，在这里我从网络加载图像并显示它们。我正在使用 KineticJS。我所做的是首先进行预加载，在其中加载“加载”图像，直到实际图像被加载并准备好显示。

所以，这是我的代码：

```
function CardObject(cardName)
{
this.name = cardName;

this.tapped = false;

// Create kinetic image with loading image
this.image = new Kinetic.Image({
        x: 10,
        y: 10,
        image: CardLoadingImage,
        width: CardWidth,
        height: CardHeight
    });

// Add actual image, and when loaded change it
this.imageObj = new Image();
this.imageObj.onload = function() //Problem here
{
    this.image.setImage(this.imageObj);
}
this.imageObj.src = "testImage.jpg";

// Add it to the stage
this.layer = new Kinetic.Layer();
this.layer.add(this.image);
Stage.add(this.layer);
} 
```

不过，我的 imageObj 的 onload 函数有问题。我收到错误：未捕获的类型错误：无法调用未定义的方法“setImage”

当我查看调试器时，函数中的“this”是那个图像对象，而不是我的卡……这不是我所期望的，也不是我需要的。我该如何解决？

所以它要做的是，首先用我的 loadingImage 制作一个 Kinetic Image。然后在加载实际图像时，将图像更改为该新图像。

谢谢！-巴勃罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:51:03.780

将自定义变量分配给`this`然后使用该自定义变量或使用[jquery 代理](http://api.jquery.com/jQuery.proxy/)

```
function CardObject(cardName)
    {
    this.name = cardName;

    this.tapped = false;
    var that = this;//assigning custom variable

    // Create kinetic image with loading image
    this.image = new Kinetic.Image({
            x: 10,
            y: 10,
            image: CardLoadingImage,
            width: CardWidth,
            height: CardHeight
        });

    // Add actual image, and when loaded change it
    this.imageObj = new Image();
    this.imageObj.onload = function() //Problem here
    {
        that.image.setImage(this);//edited
    }
    this.imageObj.src = "testImage.jpg";

    // Add it to the stage
    this.layer = new Kinetic.Layer();
    this.layer.add(this.image);
    Stage.add(this.layer);
    } 
```

# php - 如何使用 SOAP 和 PHP 更新 Web 表单中的字段？

> ID：12220249
> 
> 赞同：0
> 
> 时间：2012-08-31T17:47:47.323
> 
> 标签：php, xml, web-services, soap

我的任务是创建一个像计算器一样运行的 Web 表单，因为用户需要输入一些数字，然后该表单应该检索特定的销售税率，将其应用于输入的数字，然后提供结果数字。我得到了一个 XML 文档来检索格式化为 SOAP 信封的销售税号。我以前从未使用过 SOAP。我肯定在我的头上。

首先，这可能吗？

其次，我知道这可能是相当复杂的猜测我所要求的只是一些指向我需要研究的特定类型的技术或一些好的教程学习如何做到这一点......？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:37:05.367

您需要向您的提供商询问 WSDL 地址，然后进行肥皂调用[SoapClient::__soapCall](http://www.php.net/manual/fr/soapclient.soapcall.php)

您可能还需要使用[SoapUI](http://www.soapui.org/)来测试 Web 服务。

# javascript - 如何在没有样式化所有其他选项的情况下使用 CSS 样式选择选项？

> ID：12220253
> 
> 赞同：1
> 
> 时间：2012-08-31T17:48:15.543
> 
> 标签：javascript, jquery, css, select, option

如何仅将 CSS 背景颜色应用于所选选项？如果我将一个类应用于选择对象，它会设置所有选项的样式。如果我将所需的类应用于选项，则在展开选择框时，我可以看到所有选项的样式都很好。但是，当“选择”框折叠时，所选选项的样式消失。我在最新版本的 Chrome 和 Firefox 中观察到这种行为。

这是一些超级基本的示例代码。如果没有 jQuery，所选选项始终显示为无样式。使用 jQuery，一旦选择了“已修改”选项，所有选项的样式都将被设置为“已修改”。我一直无法找到解决这个问题的方法......有什么想法吗？

我不想更改选项的样式。只有在选择任何给定选项时才能看到其样式，而不会覆盖其他选项的样式。

```
<style>
  select.modified,
  option.modified{
    background-color: red;
  }
</style>

<select id="example">
  <option value="bird" class="modified">bird</option>
  <option value="cat">cat</option>
  <option value="dog" class="modified">dog</option>
</select>

<script>
  $('#example').on('change',function(){
    $(this).prop('class',$(this).find('option:selected').prop('class'));  
  });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T17:50:24.843

```
select option.modified { color: red; /*something*/ } 
```

* * *

```
$('#example').on('change', function(){
    $(this).find('option').removeClass('modified');
    $(this).find('option:selected').addClass('modified');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T17:54:33.037

试试这个：

```
$('#example').on('change',function(){
   $(':selected', this).addClass('modified').siblings().removeClass('modified')
}); 
```

```
option.modified{
   background-color: red;
} 
```

[小提琴](http://jsfiddle.net/Qu5Xa/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T17:49:56.137

您的事件在整个`selected#example`列表中，因此它的所有选项自然会得到背景，因为它们位于选择中。尝试将您的事件与选项标签联系起来。

此外，您的第二条规则将颜色应用于所有选项标签和虚构`modified`标签。通过用`,`a替换，`.`你会做你的意思 - 只有那些选项与`modified`类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T18:22:40.110

好吧，在阅读了评论之后，我认为您真的想要这些方面的东西。

```
$('#example').on('change', function() {
    console.log(this.options[this.selectedIndex].style);
});​ 
```

或者没有 jQuery

```
document.getElementById('example').onchange = function() {
    console.log(this.options[this.selectedIndex].style);
}; 
```

这将为您提供`CSSStyleDeclaration`所有当前规则。请记住，十六进制值以 rgb 形式返回。

演示：http:
[//jsfiddle.net/rlemon/Qu5Xa/1/](http://jsfiddle.net/rlemon/Qu5Xa/1/)

或者另一种选择是返回 className....

```
document.getElementById('example').onchange = function() {
    console.log(this.options[this.selectedIndex].className);
}; 
```

或 jQuery

```
$('#example').on('change', function() {
    $(this.options[this.selectedIndex]).attr('class'); // however I would still not even bother wrapping this up in jQuery and just use this.options[this.selectedIndex].className
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T20:16:04.547

我找到了解决这个问题的最佳方法。基本上我必须从选定的焦点选项中删除任何类，并将其添加回模糊的那些类。这似乎很好地解决了这个问题。

```
<script>
  $('#example').on('change',function(){
    // do whatever needs to be done
    $(this).blur();
  }).on('focus',function(){
    $(this).removeClass($(this).find('option:selected').prop('class'));
  }).on('blur',function(){
    $(this).addClass($(this).find('option:selected').prop('class'));
  });
</script> 
```

# optimization - 在不使用额外内存的情况下反转嵌套循环的顺序

> ID：12220254
> 
> 赞同：0
> 
> 时间：2012-08-31T17:48:17.217
> 
> 标签：optimization, loops, for-loop, nested, algebra

我不确定这是数学（代数）问题还是编程问题。

我有一个嵌套循环（在着色器程序中），它做这样的事情（L 和 B 是只读的）：

```
for each L in (L1, L2)
  Q=L
  for each B in (B1, B2, B3)
    Q *= B
  result += Q 
```

所以这个循环的结果是：

```
result += L1*B1*B2*B3 + L2*B1*B2*B3 
```

这是正确的结果，**但是 B 的访问速度很慢，而 L 的访问速度很快**。因此，在内部循环中迭代 B 比在内部循环中迭代 L 慢得多（我在上面读取了每个 B*两次*，每个 L 一次）。

如果我们天真地反转内/外循环，

```
for each B in (B1, B2, B3)
  Q=B
  for each L in (L1, L2)
    Q *= L
  result += Q 
```

当然这个结果变成

```
result += B1*L1*L2 + B2*L1*L2 + B3*L1*L2 
```

我在这里读过每个 B 一次，但这个结果是错误的。我需要形式的产品`L1*B1*B2*B3`。我知道我可以创建一个数组`Q[2]`并执行以下操作：

```
对于每个 L
  Q[i] = L i // 存入数组

```

然后迭代B：

```
for each B in (B1, B2, B3)
  for i = 1..2
    Q[i] *= B

result += Q[i] 
```

这使

```
result += Q[1]*B1*B2*B3 + Q[2]*B1*B2*B3 
```

这是正确的，但是如果`L`很大（确实如此），它会“有点*”浪费内存。我想知道我是否可以在没有中间`L[]`数组的情况下以代数方式做到这一点。

[* 双关语意]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:08:41.707

一种没有嵌套循环的方式：

```
result = 0
for each L in (L1, L2)
  result += L
for each B in (B1, B2, B3)
  result *= B 
```

因为

`L1*B1*B2*B3 + L2*B1*B2*B3`

减少到

`B1*B2*B3*(L1+L2)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T18:09:28.360

我可能把问题弄错了，但不`L1*B1*B2*B3 + L2*B1*B2*B3`等于`(L1+L2)*B1*B2*B3`？

# css - 为什么 CSS 选择器 :parent 不起作用？

> ID：12220255
> 
> 赞同：0
> 
> 时间：2012-08-31T17:48:25.123
> 
> 标签：css, css-selectors

我有一个一开始是空的列表，然后用 JavaScript 动态填充。现在我希望列表只有在不为空时才有边框，但`:empty`和`parent`选择器不匹配。

在`html.erb`文件中，列表声明如下：

```
<ul id="cepage_list" /> 
```

它在用户以上面的表单输入时填充（添加`li`s），这工作正常。
现在我在 CSS 中有这个：

```
ul#cepage_list
{
  list-style-type: none;
  margin: 0px;
  padding-left:0px;
  background-color: white;     
}
ul#cepage_list:parent
{
  border: 1px dotted blue;
}
ul#cepage_list:empty
{
  border: 1px dotted red;
} 
```

默认样式正确应用，但带有伪类选择器的样式应用很奇怪。这是行为：

*   在页面加载时，应用红色边框，没关系
*   在添加`li`'s 时，什么都没有（希望`:parent`选择器适用）
*   清除列表（`.empty()`使用 jQuery），好的。

但是为什么列表下`:parent`有child时伪类不识别呢？`li`

（在 Chrome 和 Firefox 14 上测试）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T17:49:25.623

`<ul>`不是自闭合标签。将其更改为：

```
<ul id="cepage_list"></ul> 
```

而且，`:parent`不是真正的伪类。你的意思是`:not(:empty)`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T18:01:32.610

没有关于`:parent`您将其称为的选择器。

这是[有关父选择器的更多信息](http://css-tricks.com/parent-selectors-in-css/)的链接。

# sql-server-2008 - 如何进行数据库大小调整？

> ID：12220256
> 
> 赞同：0
> 
> 时间：2012-08-31T17:48:24.687
> 
> 标签：sql-server-2008

有谁知道如何为 SQL Server 2008 R2 调整数据库大小？是否有任何书籍或示例 excel 模板可供我参考以用于数据库大小估算？说5年增长率等要考虑哪些因素

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:20:33.210

[这是一篇博文](http://sqlserverdiaries.com/blog/index.php/2011/05/estimating-the-size-of-an-sql-server-database/)，其中包含指向 SQL Server 2005 和 SQL Server 2008 的 Excel 工作表的链接。

# jquery - jQuery 仅在悬停时向此嵌套元素添加类

> ID：12220263
> 
> 赞同：2
> 
> 时间：2012-08-31T17:49:00.630
> 
> 标签：jquery, this

当鼠标悬停在 li 标签上时，我正在使用这个 jQuery 将一个类添加到跨度中。它用于导航菜单，此代码将 blackfont 类添加到所有菜单跨度。如何使用`this()`to 将 blackfont 类仅应用于鼠标所在的 li ？

```
<script type="text/javascript">
 jQuery(document).ready(function() {
        jQuery("#second-menu ul li").hover(
          function () {
            jQuery("ul#secondary-menu li a span.sub").addClass("blackfont");
          },
          function () {
            jQuery("ul#secondary-menu li a span.sub").removeClass("blackfont");
          }
        );
    });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T17:53:41.490

```
<script type="text/javascript">
 jQuery(document).ready(function() {
        jQuery("#second-menu ul li").hover(
          function () {
            jQuery("span.sub", this).addClass("blackfont");
          },
          function () {
            jQuery("span.sub", this).removeClass("blackfont");
          }
    });
</script> 
```

只需选择跨度内部`this`元素，这是您悬停的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T17:52:42.943

```
<script type="text/javascript">
 jQuery(document).ready(function() {
        jQuery("#second-menu ul li").hover(function () {
            jQuery(this).find('span.sub').addClass("blackfont");
          },
          function () {
            jQuery(this).find('span.sub').removeClass("blackfont");
          }
        );
    });
</script> 
```

# linux - tsocks 不隧道到 ssh

> ID：12220264
> 
> 赞同：3
> 
> 时间：2012-08-31T17:49:06.950
> 
> 标签：linux, ssh, socks, tunnel, ssh-tunnel

我的网络是这样设置的

S1 -> 交换机 <- S2 -> 互联网

S2 正在运行我想通过隧道传输所有流量的 SSH 服务。

我`tsocks`在 S1 上安装并像这样设置`tsocks.config`文件：

```
server = 127.0.0.1
server_port = 1234
server_type = 5 
```

然后在 S1 上我运行了这个命令：

```
ssh -D 1234 S2 
```

然后在 S1 上，在一个新的终端窗口中，我运行

```
tsocks wget google.com 
```

并得到“无法解析主机地址”错误。

如果有人可以帮助我，我将不胜感激！！（PS 我在两台机器上都运行 CentOS）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:51:16.510

问题不在于 tsocks - 而在于 DNS 服务器

请参阅手册页：[http](http://linux.die.net/man/8/tsocks) ://linux.die.net/man/8/tsocks：tsocks 通常无法通过 SOCKS 服务器发送 DNS 查询，因为 SOCKS V4 在 TCP 上工作，而 DNS 通常使用 UDP。然而，1.5 及更高版本确实提供了一种强制 DNS 查找使用 TCP 的方法，这使得它们可以代理。此选项只能在编译时启用，请查阅 INSTALL 文件以获取更多信息。

# java - 使用 Java ScriptEngine (Groovy)，如何提高性能？

> ID：12220267
> 
> 赞同：12
> 
> 时间：2012-08-31T17:49:16.593
> 
> 标签：java, groovy, scriptengine

我在我的应用程序中使用 ScriptEngine 来评估我的应用程序中的一些客户端代码。问题是它的性能不够，我需要采取措施来改善执行时间。目前，评估一个非常简单的脚本可能需要长达 1463 毫秒（平均约为 300 毫秒），该脚本基本上是 URL 中的参数替换。

我正在寻找简单的策略来提高这种性能而不会失去脚本能力。

我首先想到的是池化 ScriptEngine 对象并重用它。我在规范中看到它应该被重用，但我还没有找到任何人实际这样做的例子。

有任何想法吗？这是我的代码：

```
ScriptEngineManager factory = new ScriptEngineManager();
GroovyScriptEngineImpl engine = (GroovyScriptEngineImpl)factory.getEngineByName("groovy");
engine.put("state", state;
engine.put("zipcode", zip);
engine.put("url", locationAwareAd.getLocationData().getGeneratedUrl());
url = (String) engine.eval(urlGeneratorScript); 
```

对于任何反馈，我们都表示感谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-31T20:02:15.273

最有可能的问题是引擎实际上每次调用 eval() 时都会评估脚本。[相反，您可以通过Compilable](http://docs.oracle.com/javase/6/docs/api/javax/script/Compilable.html)接口重新使用预编译的脚本。

```
 // move this into initialization part so that you do not call this every time.
    ScriptEngineManager manager = new ScriptEngineManager();
    ScriptEngine engine  = manager.getEngineByName("groovy");
    CompiledScript script = ((Compilable) engine).compile(urlGeneratorScript);

    //the code below will use the precompiled script code
    Bindings bindings = new Bindings();
    bindings.put("state", state;
    bindings.put("zipcode", zip);
    bindings.put("url", locationAwareAd.getLocationData().getGeneratedUrl());
    url = script.eval(bindings); 
```

FWIW，您还可以实现文件时间戳检查，如果脚本被更改，请再次调用 compile(..)。

# java - Python矩阵乘法

> ID：12220269
> 
> 赞同：1
> 
> 时间：2012-08-31T17:49:18.447
> 
> 标签：java, python, matrix

我很难理解这个 python 脚本。任何 python 大师都愿意翻译几行吗？我主要说最后两个。这两行似乎包含了很多内容。我的主要动机是将这个算法转换成 Java。

```
u=matrix( [[1,2,2], [-2,-1,-2], [2,2,3]] )
a=matrix( [[1,2,2], [2,1,2], [2,2,3]] )
d=matrix( [[-1,-2,-2], [2,1,2], [2,2,3]] )
m=[ array([3,4,5]) ]
while m:
  for i in m:
    yield i
  g=( (i*j).getA1() for i in m for j in (u,a,d) )
  m=[ i for i in g if max is None or sum(i)<=max ] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T22:48:58.593

这应该更容易转换为 Java：

```
while len(m) != 0:
      for arr in m:
          queue.put(arr) # yield arr
      newm = []
      for arr in m:
          for mat in (u,a,d):
              i = multiply_array_matrix(arr, mat).getA1()
              if max_ is None or sum(i) <= max_:
                 newm.append(i)
      m = newm 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T20:26:11.840

感谢 JF Sebastian 和对 Python 的更多调查（但主要是对 JF），我能够将其转换为 Java。我更改名称不仅是为了保护无辜者，而且是为了让它更加自我记录。

用队列替换收益功能是让我走上正轨的火花。由于 Java 不能做“mat in (u, a, d)”的事情，我不得不把它分成三个非常相似的行。我已经为这篇文章删减了一些东西，但是在我完成的代码中，我在这三行中调用了一个方法，其中包括“<= max”检查。

它的运行速度比我预期的要快得多！

```
ArrayList<int[]> resultList = new ArrayList<int[]>();
ArrayList<int[]> workingList = new ArrayList<int[]>();
workingList.add(new int[]{3, 4, 5}); // add the base triple

while(workingList.size() > 0)
{
    for (int[] triple: workingList)
        addTriple(resultList, triple);

    ArrayList<int[]> additions = new ArrayList<int[]>();
    for (int[] triple: workingList)
    {
        additions.add(multiply(triple, u));
        additions.add(multiply(triple, a));
        additions.add(multiply(triple, d));
    }
    workingList = additions;
} 
```

# scala - 什么是生成 RSS 提要的好 scala 库？

> ID：12220275
> 
> 赞同：13
> 
> 时间：2012-08-31T17:49:46.230
> 
> 标签：scala, rss, playframework-2.0

是否有任何 scala 库可用于使用案例类等惯用功能生成 RSS 提要？如果它提供了与 Play 框架一起使用的助手，那就更好了。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-06T21:03:36.240

嗯，嵌入式 XML DSL 是一个惯用的（如果有点被抨击的话）特性，所以我不明白你为什么需要任何库支持。只需要一点 RSS XML，它是有效的 Scala，并放入一些可变内容：

```
val myRss = 
  <rss version="2.0">

  <channel>
  <title>An example RSS feed</title>
  <description>La dee daah</description>
  <link>http://www.example.com/rss</link>
  <lastBuildDate>Mon, 05 Oct 2012 11:12:55 =0100 </lastBuildDate>
  <pubDate>Tue, 06 Oct 2012 09:00:00 +0100</pubDate>

  {
    for (itemTitle <- List("foo", "bar", "baz")) yield {
      <item>
        <title>{itemTitle}</title>
        <description>This is an example of an Item</description>
        <link>http://www.example.com/item</link>
        <guid isPermaLink="false">123</guid>
        <pubDate>Tue, 06 Oct 2012 13:00:00 +0100</pubDate>
      </item>
    }
  }

</channel>
</rss> 
```

# php - 将 Doctrine2 集成到 Lithium w/li3_doctrine2 模块时找不到 pdo_mysql 适配器

> ID：12220283
> 
> 赞同：1
> 
> 时间：2012-08-31T17:50:09.397
> 
> 标签：php, doctrine-orm, lithium

** 更新：这在某种程度上与我使用 li3_doctrine2 模块的锂副本不兼容有关。从[锂框架回购](https://github.com/UnionOfRAD/framework)中提取并将教义模块添加为子模块后，它似乎工作正常。而且我知道我错误地设置了下面的示例模型和控制器。

我一直在尝试使用[li3_doctrine2 模块](https://github.com/mariano/li3_doctrine2)将 Doctrine2 与 li3 一起使用。我一直按照模块的 github 页面上的说明进行操作，但一直遇到错误：

```
Could not find adapter `pdo_mysql` in class `lithium\\data\\Connections' 
```

我检查了 phpinfo 并确认 pdo_mysql 正在加载。现在，我正在使用扩展 \li3_doctrine2\models\BaseEntity 的基本模型：

```
namespace app\models;

use Doctrine\ORM\Mapping\Column;
use Doctrine\ORM\Mapping\Entity;
use Doctrine\ORM\Mapping\GeneratedValue;
use Doctrine\ORM\Mapping\Id;
use Doctrine\ORM\Mapping\Table;

/**
 * @Entity
 * @Table(name="cn_blog_entries")
 */
class BlogEntries extends \li3_doctrine2\models\BaseEntity {

    /**
     * @Id
     * @GeneratedValue
     * @Column(type="integer")
     */
    protected $id;

    /**
     * @Id
     * @GeneratedValue
     * @Column(type="integer")
     */
    protected $user_id;

    /**
     * @Id
     * @GeneratedValue
     * @Column(type="string")
     */
    protected $title;

            /**
     * @Id
     * @GeneratedValue
     * @Column(type="string")
     */
    protected $uristub;

    /**
     * @Id
     * @GeneratedValue
     * @Column(type="text")
     */
    protected $content;

            /**
     * @Id
     * @GeneratedValue
     * @Column(type="datetime")
     */
    protected $date_publish;

    /**
     * @Id
     * @GeneratedValue
     * @Column(type="integer")
     */
    protected $active;

            /**
     * @Id
     * @GeneratedValue
     * @Column(type="datetime")
     */
    protected $timestamp_created;

    /**
     * @Id
     * @GeneratedValue
     * @Column(type="datetime")
     */
    protected $timestamp_updated;

} 
```

在我的控制器中，我将其保持为非常基本的测试：

```
<?php
namespace app\controllers;

use app\models\BlogEntries;
// use app\models\BlogEntryTags;

class BlogController extends \lithium\action\Controller {

    public function index() {
        $entries = BlogEntries::getRepository()->findBy();
        var_dump($entries);
    }
} 
```

我已经回到这个问题好几个星期了。如果我无法弄清楚，我想这对我来说意味着锂中没有 Doctrine2。祝锂电的ORM有更好的关系支持！

# ruby - 在 Ruby 中，是否有必要记住一个返回常量值/对象的方法？

> ID：12220284
> 
> 赞同：2
> 
> 时间：2012-08-31T17:50:11.317
> 
> 标签：ruby, performance

给定以下方法：

```
def some_hash
  {
    :one => 1,
    :two => 2,
  }
end 
```

记忆散列是否有任何性能优势？

```
def some_hash
  @some_hash ||= {
    :one => 1,
    :two => 2,
  }
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T18:13:34.813

似乎记忆的变体快了大约 7.5 倍：

```
def hash1
  {
    :one => 1,
    :two => 2,
  }
end

def hash2
  @some_hash ||= {
    :one => 1,
    :two => 2,
  }
end

require 'benchmark'

Benchmark.bmbm do |b|
  b.report do
    1_000_000.times{ hash1 }
  end
end

Benchmark.bmbm do |b|
  b.report do
    1_000_000.times{ hash2 }
  end
end 
```

```
Rehearsal ------------------------------------
   1.470000   0.030000   1.500000 (  1.499750)
--------------------------- total: 1.500000sec

       user     system      total        real
   1.570000   0.030000   1.600000 (  1.739230)
Rehearsal ------------------------------------
   0.210000   0.000000   0.210000 (  0.231601)
--------------------------- total: 0.210000sec

       user     system      total        real
   0.210000   0.010000   0.220000 (  0.234898) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T01:53:48.497

编译器/解释器*不能*自动将第一种形式转换为第二种形式，因为两者*不*等价：

```
a1, b1 = hash1, hash1
a1[:one] = 'ONE'

a2, b2 = hash2, hash2
a2[:one] = 'ONE'

p b1[:one], b2[:one]
# 1
# 'ONE' 
```

再一次，共享可变状态出现了丑陋的一面。不，孩子们，这不仅仅是关于并发！

# macos - mac 上通过 VPN 进行远程桌面连接

> ID：12220285
> 
> 赞同：1
> 
> 时间：2012-08-31T17:50:19.463
> 
> 标签：macos, networking, vpn, remote-desktop

我正在尝试使用远程桌面连接通过 VPN 连接连接到 Windows 计算机。我在 mac 上打开了网络并创建了一个新连接。

接口：VPN。VPN类型：PPTP。

我填写了服务器地址、帐户名、密码的输入并应用。我连接了VPN，它连接了。我打开远程桌面连接并输入我想连接的机器的IP，但它没有连接，出现一个问题，说机器可能被关闭等等。但是在Windows机器中我可以连接那里并且机器启动并且跑步。在我的 Mac 上，我 ping 到想要连接的 IP 地址，但没有任何响应。

我认为 vpn 有问题，有没有办法让我证明我在 vpn 网络上？这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T21:35:16.100

今天刚碰到这个。看起来当您在 OSX 中配置 VPN 时，如果您尝试将流量发送到与您的 vpn 连接的子网不同的子网，它会将其发送到您的正常接口而不是隧道。要缓解这种情况，请前往您的 VPN 设置，单击高级并确保选中“通过 vpn 发送所有流量”。

如果选中此选项，则可能是防火墙配置和您的 SOL，直到您可以进入并修改它们。

# php - 从乌尔都语 URL 生成对 SEO 友好的 URL Slug

> ID：12220290
> 
> 赞同：0
> 
> 时间：2012-08-31T17:50:40.670
> 
> 标签：php, seo

嗨，我有一个网站，它的所有 url 都在 seo 中，现在我将我的网站转移到 urdu 语言，但是因为 url 是 urdu 语言，所以它不显示正确的 url 是否有人有我可以使用的 seo 功能。

我的网站网址现在像这个 domain.com/123// 它应该像这个 domain.com/123/ع وأنا لا أعرف من أين أستطيع أن أراك/

这是我目前拥有的代码。

```
function seoUrl($input)
    {
    /** 
    * Return URL-Friendly string slug
    * @param string $input 
    * @return string 
    */
        $input = remove_accent( $input );
        $input = str_replace("&nbsp;", " ", $input);
        $input = str_replace(array("'", "-"), "", $input); //remove single quote and dash
        $input = mb_convert_case($input, MB_CASE_LOWER, "UTF-8"); //convert to lowercase
        $input = preg_replace("#[^a-zA-Z]+#", "-", $input); //replace everything non an with dashes
        $input = preg_replace("#(-){2,}#", "$1", $input); //replace multiple dashes with one
        $input = trim($input, "-"); //trim dashes from beginning and end of string if any
        return $input;
    }

    function remove_accent( $str )
    {
        $a = array('À', 'Á', 'Â', 'Ã', 'Ä', 'Å', 'Æ', 'Ç', 'È', 'É', 'Ê', 'Ë', 'Ì', 'Í', 'Î', 'Ï', 'Ð', 'Ñ', 'Ò', 'Ó', 'Ô', 'Õ', 'Ö', 
                    'Ø', 'Ù', 'Ú', 'Û', 'Ü', 'Ý', 'ß', 'à', 'á', 'â', 'ã', 'ä', 'å', 'æ', 'ç', 'è', 'é', 'ê', 'ë', 'ì', 'í', 'î', 'ï', 
                    'ñ', 'ò', 'ó', 'ô', 'õ', 'ö', 'ø', 'ù', 'ú', 'û', 'ü', 'ý', 'ÿ', 'A', 'a', 'A', 'a', 'A', 'a', 'C', 'c', 'C', 'c', 
                    'C', 'c', 'C', 'c', 'D', 'd', 'Ð', 'd', 'E', 'e', 'E', 'e', 'E', 'e', 'E', 'e', 'E', 'e', 'G', 'g', 'G', 'g', 'G', 
                    'g', 'G', 'g', 'H', 'h', 'H', 'h', 'I', 'i', 'I', 'i', 'I', 'i', 'I', 'i', 'I', 'i', '?', '?', 'J', 'j', 'K', 'k', 
                    'L', 'l', 'L', 'l', 'L', 'l', '?', '?', 'L', 'l', 'N', 'n', 'N', 'n', 'N', 'n', '?', 'O', 'o', 'O', 'o', 'O', 'o', 
                    'Œ', 'œ', 'R', 'r', 'R', 'r', 'R', 'r', 'S', 's', 'S', 's', 'S', 's', 'Š', 'š', 'T', 't', 'T', 't', 'T', 't', 'U', 
                    'u', 'U', 'u', 'U', 'u', 'U', 'u', 'U', 'u', 'U', 'u', 'W', 'w', 'Y', 'y', 'Ÿ', 'Z', 'z', 'Z', 'z', 'Ž', 'ž', '?', 
                    'ƒ', 'O', 'o', 'U', 'u', 'A', 'a', 'I', 'i', 'O', 'o', 'U', 'u', 'U', 'u', 'U', 'u', 'U', 'u', 'U', 'u', '?', '?', 
                    '?', '?', '?', '?');

        $b = array('A', 'A', 'A', 'A', 'A', 'A', 'AE', 'C', 'E', 'E', 'E', 'E', 'I', 'I', 'I', 'I', 'D', 'N', 'O', 'O', 'O', 'O', 'O', 
                   'O', 'U', 'U', 'U', 'U', 'Y', 's', 'a', 'a', 'a', 'a', 'a', 'a', 'ae', 'c', 'e', 'e', 'e', 'e', 'i', 'i', 'i', 'i', 'n', 
                   'o', 'o', 'o', 'o', 'o', 'o', 'u', 'u', 'u', 'u', 'y', 'y', 'A', 'a', 'A', 'a', 'A', 'a', 'C', 'c', 'C', 'c', 'C', 'c', 
                   'C', 'c', 'D', 'd', 'D', 'd', 'E', 'e', 'E', 'e', 'E', 'e', 'E', 'e', 'E', 'e', 'G', 'g', 'G', 'g', 'G', 'g', 'G', 'g', 
                   'H', 'h', 'H', 'h', 'I', 'i', 'I', 'i', 'I', 'i', 'I', 'i', 'I', 'i', 'IJ', 'ij', 'J', 'j', 'K', 'k', 'L', 'l', 'L', 'l', 
                   'L', 'l', 'L', 'l', 'l', 'l', 'N', 'n', 'N', 'n', 'N', 'n', 'n', 'O', 'o', 'O', 'o', 'O', 'o', 'OE', 'oe', 'R', 'r', 'R', 
                   'r', 'R', 'r', 'S', 's', 'S', 's', 'S', 's', 'S', 's', 'T', 't', 'T', 't', 'T', 't', 'U', 'u', 'U', 'u', 'U', 'u', 'U', 
                   'u', 'U', 'u', 'U', 'u', 'W', 'w', 'Y', 'y', 'Y', 'Z', 'z', 'Z', 'z', 'Z', 'z', 's', 'f', 'O', 'o', 'U', 'u', 'A', 'a', 
                   'I', 'i', 'O', 'o', 'U', 'u', 'U', 'u', 'U', 'u', 'U', 'u', 'U', 'u', 'A', 'a', 'AE', 'ae', 'O', 'o');

        return str_replace($a, $b, $str);
    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-31T19:39:25.520

问题是@deceze 指出的。网址只能包含拉丁字母（实际上是英文字母）中的字符，因此在您的网址中使用乌尔都语的唯一方法是使用英文字母的最佳方法。

例如，我说加泰罗尼亚语，并且由于口音的一部分，我们得到了这个字母：**ç**。它几乎是一个*c*，但它听起来像一个*s*，所以当用 ç （例如，Març ）敲击文本时，我会选择 Marc （字符相似性）或 Mars （语音相似性）。你可以遵循这个模式。否则，我认为您无能为力。

**编辑：** 在 url 编码的快速课程之后，你们都应该阅读这个答案下面的评论。

我转向完全阅读您的功能，我想我碰巧了解“幕后”发生的事情：

你得到你的乌尔都语字符串，说你之前放的那个：`ع وأنا لا أعرف من أين أستطيع أن أراك`

1.  你把它传给`remove_accent()`. 它不包含任何要替换为其他没有重音符号的乌尔都语字符，因此它返回相同的字符串：`ع وأنا لا أعرف من أين أستطيع أن أراك`。
2.  您可以通过替换它们来确保没有奇怪的符号。在这种情况下，字符串将保持原样`ع وأنا لا أعرف من أين أستطيع أن أراك`。
3.  您将所有字符转换为小写。我不知道乌尔都语，所以我不确定这里是否会发生任何事情，所以我将保持原样：`ع وأنا لا أعرف من أين أستطيع أن أراك`。 **问题来了**
4.  您将与拉丁字母**不同的任何内容替换为破折号。**在这种情况下，它看起来像这样`------------------------------------`：
5.  您用一个破折号替换任何 2 个或更多破折号组：`-`。
6.  你，最后，修剪那条破折号。*`(empty)`*.

因此，您遇到的主要问题是第一个正则表达式函数。我不知道如何解决这个问题。可能有一个技巧将所有这些字符转换为 ASCII，然后创建一个正则表达式来尝试解决这个问题。但是，我会采取以下步骤：

1.  从符号中清除字符串 like`_., !'?&`并将它们转换为`-`.
2.  删除重复的项目。
3.  小写字符串
4.  将字符串转换为浏览器可读的内容（`utf8_decode()`可能就足够了，但我还没有尝试过）

# ruby-on-rails - 如何使用带有rails的咖啡脚本进行开发

> ID：12220291
> 
> 赞同：3
> 
> 时间：2012-08-31T17:50:45.753
> 
> 标签：ruby-on-rails, debugging, coffeescript, asset-pipeline

[我最近一直在考虑 CoffeeScript，我刚刚按照本指南](http://railscasts.com/episodes/282-upgrading-to-rails-3-1)将我一直在从事的 Rails 项目升级到 Rails 3.2.8（从没有资产管道的 Rails 3.0.9）。

我不得不做一些骇人听闻的事情才能让事情正常工作。我正在测试一个新页面“/pages/game”，因此它在资产目录中有一些示例 CoffeeScript。

(app/assets/javascripts/page.js.coffee)

```
class MyObject
  constructor: ->
  hello: -> alert 'hello world of coffeescript!'

a = new MyObject

a.hello() 
```

然后我在我的生产环境中添加了一行：（config/environments/production.rb）

```
config.assets.precompile += %w( pages.js )    # this is needed to precompile coffee script files... it is difficult to understand how manifest files work... 
```

然后输入

```
$  bundle exec rake assets:precompile 
```

编译page.js 唯一的问题是我用CoffeeScript 创建的类并没有像我预期的那样工作。因此，我在 FireFox 中打开了我的开发者控制台并尝试手动实例化该类，但它的行为就像没有名为 MyClass 的对象一样。

那么我哪里出错了？假设我可以手动实例化我用 CoffeeScript 编写的类是不是冒昧的？我将 pages.js 添加到预编译数组的骇人听闻的方法不合适吗？如果您是 CoffeeScript 专业人士，您将如何测试您的课程等？

**更新：** 我的部分问题是咖啡脚本类中固有的“可变隐私”。这种隐私可以在标准 javascript 中实现，并且在涉足咖啡脚本之前应该理解。 [http://benalman.com/news/2010/11/immediately-invoked-function-expression/](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)

也就是说，咖啡脚本类需要附加到窗口对象以使其全局可访问，如下所示：

**已更正**

```
class MyObject
  constructor: ->
  hello: -> alert 'hello world of coffeescript!'

window.MyObject = MyObject; 
```

一旦在这个庄园中发布了类（通过将其作为全局附加到窗口），它可以通过实例化`a = new MyObject()`，然后正常调用其函数以向屏幕发出警报`a.hello()`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T19:02:39.487

`MyObject`**如果您将`pages.js`'s 内容包含到您的页面**中，则绝对存在。您可能需要添加

```
<%= javascript_include_tag "pages" %> 
```

到您的 HTML**或未**设置

```
config.assets.precompile += %w( pages.js ) 
```

而是将以下内容添加到`app/assets/javascripts/application.js.coffee`

```
//= require pages 
```

并确保`application.js`包含在您的`app/views/layouts/application.html.erb`with

```
<%= javascript_include_tag "application" %> 
```

资产管道上的**[Rails 指南](http://guides.rubyonrails.org/asset_pipeline.html)**非常有帮助。不过，在这里提供一些解释......

`application.js`Rails 希望您（默认情况下）在部署到生产环境时将所有 javascript 打包到一个文件中。Sprockets 可让您添加像上面这样的 require 指令来查找、包含和编译文件中列出的`application.js`文件。

默认情况下，Rails只会编译`application.js`,`application.css`和. 这意味着，除非您为文件添加指令，否则Rails 将忽略它。`.js/.css``app/assets``lib/assets``vendor/assets``//= require``pages.js``application.js`

这就是为什么您尝试添加`pages.js`到文件列表以使用`config.assets.precompile`. 这告诉 Rails 显式编译该文件，使其可以通过 javascript include 像

```
<%= javascript_include_tag "pages" %> 
```

我假设您没有将其放入您的 HTML 中。由于几个原因，您通常不会选择这条路线，其中一个原因是您这样做是在对 Rails 试图为您提供资产管道`//= require`线的帮助说“不，谢谢”。

因此，任何一种方法都是可行的；您还没有完成所有必要的步骤来获取`pages.js`包含在您的页面中的内容，这就是为什么`MyObject`不存在的原因。

# php - PHP - mod_rewrite 干净的 url 和查询字符串

> ID：12220295
> 
> 赞同：0
> 
> 时间：2012-08-31T17:51:06.437
> 
> 标签：php, .htaccess, mod-rewrite

```
RewriteEngine On

RewriteCond %{HTTP_HOST} ^www\.(.+)
RewriteCond %{HTTPS}s/%1 ^(on(s)|offs)/(.+)
RewriteRule ^ http%2://%3%{REQUEST_URI}/site1 [L,R=301]

RewriteRule ^/site1/catalogue/(\w+)/([0-9]+)$ catalogue.php?category=$1&product_id=$2 [QSA,L] 
```

我遇到了一些 mod_rewrites 的问题。我正在尝试完成三件事：

1）删除www。来自网址

2) 删除 .php 扩展名

3）有涉及 $_GET 变量（查询字符串？）

例如，我想要这个网址：

[http://www.domain.com/site1/catalogue.php?category=kitchen&product_id=2](http://www.domain.com/site1/catalogue.php?category=kitchen&product_id=2)

变成了这样：

[http://www.domain.com/site1/catalogue/kitchen/2](http://www.domain.com/site1/catalogue/kitchen/2)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:08:59.780

> 是的，我的 .htaccess 文件位于 site1 文件夹/目录中。输入清理后的 url 似乎没有正确重定向我。我得到404。我假设问题是我对查询字符串的最后一个重写规则。

将最后一条规则更改为：

```
RewriteRule ^catalogue/(\w+)/([0-9]+)$ catalogue.php?category=$1&product_id=$2 [QSA,L] 
```

`/site1/`从正则表达式匹配中删除。还要在后面添加这个`RewriteEngine On`：

```
RewriteBase /site1/ 
```

# cvs - 如何让“cvs update”忽略 CVS 管理的一些文件夹？

> ID：12220296
> 
> 赞同：0
> 
> 时间：2012-08-31T17:51:06.120
> 
> 标签：cvs

我有一个使用 CVS 的系统。构建需要很长时间，部分原因是“CVS 更新”需要很长时间。有几个文件夹包含很多很少更改的文件，如果有的话。我想让“CVS 更新”忽略这些文件夹（即甚至不看它们）。我已经尝试过 .cvsignore 和 -I 选项，但它们没有做我想要的。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:30:09.033

这个答案附带一个警告。你真的不是“应该”做这样的事情。

```
mv folder_to_ignore/CVS folder_to_ignore/CVS_ignored 
```

这将不起作用，`cvs update -d`因为此操作会诱使 CVS 认为您有部分结帐，并且`cvs update -d`尝试结帐丢失的东西。

要将文件夹恢复为 CVS 控制，请重命名：

```
folder_to_ignore/CVS_ignored 
```

回到：

```
folder_to_ignore/CVS 
```

# java - 如何在不按下提交按钮的情况下获取 textField 的值

> ID：12220299
> 
> 赞同：0
> 
> 时间：2012-08-31T17:51:10.743
> 
> 标签：java, wicket

我有一个表格：

```
private Class TestForm extends Form<TestString>{

  public TestForm(TestString testString){
    super("testForm", new CompoundPropertyModel<TestString>(testString));
    final TextField<String> test = new TextField<String>("test"));
    add(test);
    ... //submit button
  } 
```

该类`TestString`仅包含一个字段：`test`.

除了按下提交按钮之外，是否可以获取字符串的值？是行为还是其他？

我试图`AjaxEventBehavior`在这种行为内部添加和调用方法`text.getValue()`，`testString.getTest()`但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:57:38.923

您必须以某种方式提交表格。您可以使用 AjaxFormSubmitBehavior 通过 setDefaultProcessing(false) 将默认表单行为设置为 false。这样做会跳过表单验证，并且可以使用 text.getValue() 读取文本值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T15:26:59.670

如前所述，您可以使用**AjaxFormComponentUpdatingBehaviour**并使用**onchange**事件（或**OnChangeAjaxBehaviour**），这当然意味着任何时候调用您的**onUpdate(AjaxRequestTarget target)**函数不一定是用户最终预期的输入。例如：假设您输入“test”，您的更新函数将被调用 4 次，但只有最终调用是用户希望提交的最终单词。

我想为您的场景提到的一件重要事情是，您不能简单地查找**onblur**事件，因为（在您的示例中）用户可能会模糊**TextField**的唯一时间是他们试图单击提交按钮，此时担心AJAX有点晚了，因为它正在提交......

也许如果你提供更多关于为什么你需要字符串的值而不按下提交按钮的细节，那么有人可以想出一个更好的主意（当然它可能是 onchange 事件对你来说很好，在这种情况下很好！）。但是，如果（在黑暗中猛烈抨击）您需要它在用户提交表单之前验证输入，那么您实际上可以在提交后执行此操作：

*   [http://www.mkyong.com/wicket/create-custom-validator-in-wicket/](http://www.mkyong.com/wicket/create-custom-validator-in-wicket/)
*   [http://www.wicket-library.com/wicket-examples/compref/wicket/bookmarkable/org.apache.wicket.examples.compref.FormPage](http://www.wicket-library.com/wicket-examples/compref/wicket/bookmarkable/org.apache.wicket.examples.compref.FormPage) （实际上是提交后的示例，但如果您的**TextField**有验证器，那么表格不会提交）。

# javascript - 获取 div 的高度，全部在隐藏的 div 中

> ID：12220304
> 
> 赞同：1
> 
> 时间：2012-08-31T17:51:17.420
> 
> 标签：javascript, styles, height

寻找一个 JavaScript 解决方案（jQuery 会很好）来获取一些 div 的高度，这些 div 都驻留在父 div 中，显示设置为无。

伪代码：

```
<div id="hiddenParent" style="display:none">
  <div class="childDiv">child div 1</div>
  <div class="childDiv">child div 2</div>
  <div class="childDiv">child div 3</div>
</div> 
```

假设类 ChildDiv 没有指定高度，也没有在任何地方设置任何 childDiv 元素的高度。

当“hiddenParent”设置为 display:none 时，关于如何获得身高的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:55:17.647

```
var clone = $("#hiddenParent").clone().css("display","block").css("position","absolute").css("left","-9999px");
$("#hiddenParent").after(clone);

alert(clone.outerHeight());
clone.remove();
​ 
```

使用 jQuery。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-17T23:16:39.063

派对迟到了，但无论如何我都会对此发表看法。以下解决方案是用 Vanilla Javascript 编写的，但同样的逻辑显然适用于 jQuery。

元素**不一定需要**是可见的才能被测量，它们只是**不需要**`display: none;`。Display:none 表示计算样式中的高度为 0，因此我们必须找到一种解决方法。

`display:none`我们可以通过两个简单的步骤来模拟 a ：

1.  我们设置`visibility:hidden`（所以元素不可见）
2.  我们设置`position:absolute`（所以元素不占用空间）

然后我们将其设置`display`为`block`（或空字符串，只要不是 就没有关系`none`）。然后我们将有一个不可见的 div，它不会在文档中占用空间，但会保留其自己的原始尺寸。这样，即使之前没有在 css 中设置维度，它也可以通过 JavaScript 完全访问。

在一个循环中，我们将`getComputedStyle`针对我们需要的每个 div 运行，寻找它的高度。

```
 // start loop

 getComputedStyle(el).getPropertyValue('height');

 // end loop 
```

如果您仍然需要在循环结束时将显示设置为无，您可以恢复它。该脚本实际上并不复杂，并且运行时没有任何闪烁。

这是一个[演示](http://jsfiddle.net/gleezer/mD3q7/)。

```
var par = document.getElementById('hiddenParent'),
    cd = par.querySelectorAll('.childDiv'),
    len,
    heights = [],
    i;

function getHeight(){
    len = cd.length;
  // 1.we hide the parent
    par.style.visibility = 'hidden';
  // 2\. we set its position to absolute, so it does not 
  // take space inside the window
    par.style.position = 'absolute';
  // 3\. we set its display to block so it will gain back its natural height
    par.style.display = 'block';   

  // 4\. we start looping over its children
    while(len--){
  // we get the height of each children... here we're just storing them in array,
  // which we will alert later
      heights[len] = window.getComputedStyle( cd[len] ).getPropertyValue('height');
    }
  // 5\. Job is done, we can bring back everything to normal (if needed)
    par.cssText = 'display: none';   
}

document.getElementById('starter').addEventListener('click',function(){
   getHeight();
   alert(heights);
});
```

```
#hiddenParent, .another-div{
    background: teal;
    width: 40%;
    padding: 20px;
    text-align: center;
    color: white;
    font-family: Arial;
    text-transform: uppercase;
    color: #ccc;
}
.childDiv{
    background: purple;
    padding: 10px;
    margin-bottom: 10px;
}

.another-div{
    background: orange;
    color: #1F9091;
}
```

```
<button id="starter"> Calculate heights </button>

<!-- hiddenParent is between two other divs but takes no space in the document as it's display:none -->
<div id="hiddenParent" style="display: none;">
  <div class="childDiv">child div 1</div>
  <div class="childDiv">child div 2</div>
  <div class="childDiv">child div 3</div>
</div>

<div class="another-div">
    here's another div
</div>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T17:55:15.110

试试看一下[jQuery：Get height of hidden element in jQuery](https://stackoverflow.com/questions/2345784/jquery-get-height-of-hidden-element-in-jquery)

关于这个问题有很多好帖子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T17:57:47.177

`div`您可以在 jQuery 获取元素的高度之后隐藏。

HTML（减号样式）

```
<div id="hiddenParent">
  <div class="childDiv">child div 1</div>
  <div class="childDiv">child div 2</div>
  <div class="childDiv">child div 3</div>
</div>​ 
```

江青

```
var height = $(".childDiv").height();
$("#hiddenParent").hide();
alert(height);​ 
```

[http://jsfiddle.net/charlescarver/2Ndte/](http://jsfiddle.net/charlescarver/2Ndte/)

[注意：此代码只是一个示例，只会获取第一个子元素的高度，但您将了解如何获取隐藏元素的高度的要点。]

# magento - Magento 管理员导入产品 CSV

> ID：12220305
> 
> 赞同：-1
> 
> 时间：2012-08-31T17:51:27.413
> 
> 标签：magento

在 Magento 管理员中，我导入产品 CSV 文件并运行配置文件

1 产品数量为 5

2 更新后的产品 csv 数量为 10

3 然后那个产品的数量应该变成 15

默认情况下，Magento 覆盖并更新为 10

注意：我使用默认的 Magento 导入/导出没有扩展名。我怎样才能做到这一点以使当前产品数量添加而不是覆盖。

如果必须进行核心更改，我发现该文件可能是 \app\code\core\Mage\ImportExport\controllers\Adminhtml\ImportController.php`startAction()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:49:43.517

使用其他一些更新脚本，例如：

[http://www.sonassi.com/knowledge-base/magento-kb/mass-update-stock-levels-in-magento-fast/](http://www.sonassi.com/knowledge-base/magento-kb/mass-update-stock-levels-in-magento-fast/)

在循环检查`if ($field == 'qty')`中，如果是这种情况

```
$stockItem->setData($stockItem->getData('qty') + $value; 
```

然后，您应该能够比您迄今为止尝试的方式更快地增加您的数量。

# telerik - Telerik 报告 HtmlTextBox 编辑向导和字体大小

> ID：12220306
> 
> 赞同：1
> 
> 时间：2012-08-31T17:51:36.883
> 
> 标签：telerik, reporting

HtmlTextBox 的 GUI 编辑器的字体大小功能是否损坏或未实现？生成的 html 标记仅显示包装在 SPAN 标记中的文本选择，并且在运行时不会发生大小变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T17:56:58.893

不确定您使用的是哪个版本，一个带有字体大小的文本值被翻译为以下示例并且可以正常工作：

```
<span style="font-size: 12pt">Test</span> 
```

我测试的控件基于“Telerik.Reporting.HtmlTextBox”

希望有帮助

# ruby - 您可以通过站点棱镜或仅通过 css 选择器按 id、标题、链接等查找元素吗？

> ID：12220310
> 
> 赞同：2
> 
> 时间：2012-08-31T17:51:51.080
> 
> 标签：ruby, cucumber, capybara, pageobjects, site-prism

通过使用 site-prism gem 进行集成测试，我可以通过引用 id 或 title 或 link 或 xpath 找到页面元素，还是只能通过 css 搜索它们

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T19:27:00.780

**更新**：从 SitePrism 2.1 开始，可以使用 XPath 表达式来查找元素和部分，以及 CSS 选择器。

====

你只能使用 CSS 选择器，但使用 CSS 你仍然可以通过 id、class、name、title 等来查找元素。

如果要通过 id 查找元素：

`#the_id`

如果要按类查找元素：

`.the_class`

如果要按标题查找元素：

`div[title='the_title']`

所以，不完全是你想要的，但你可以接近。

关于 XPath，请参见此处：[Does site_prism allow using other selectors than CSS?](https://stackoverflow.com/questions/11293386/does-site-prism-allow-using-other-selectors-than-css)

**更新**

要查找名称属性为“bob”的链接：

`a[name='bob']`

要查找 id 为“fred”的按钮：

`button#fred`

# arrays - perl 如何将数组元素从一个数组放入另一个数组？

> ID：12220313
> 
> 赞同：0
> 
> 时间：2012-08-31T17:52:15.987
> 
> 标签：arrays, perl, foreach, while-loop, two-columns

如果我有`@array`一行：

```
row 1: a   b

row 2: b   c

row 3: c   d 
```

我如何获得`@array2`一列中所有元素的新元素，所以`@array2 = a b b c c d`？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:38:14.357

您的问题措辞有些含糊，这可能是因为您是 perl 新手。您没有以 perl 语法提供您的输入或预期输出，但根据您对先前答案的回复，我会猜测一下：

```
##  three rows of data, with items separated by spaces
my @input = ( 'a b', 'b c', 'c d' );

## six rows, one column of expected output
my @expected_output = ( 'a', 'b', 'b', 'c', 'c', 'd' ); 
```

将此作为您预期的输入和输出，编码转换的一种方法是：

```
##  create an array to store the output of the transformation
my @output;

##  loop over each row of input, separating each item by a single space character
foreach my $line ( @input ) {
    my @items = split m/ /, $line; 
    push @output, @items;
}

##  print the contents of the output array
##    with surrounding bracket characters
foreach my $item ( @output ) {
    print "<$item>\n";
} 
```

[有关split](http://perldoc.perl.org/functions/split.html)和[push](http://perldoc.perl.org/functions/push.html)的更多信息，请参见 perldoc 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T21:50:38.240

对初始数据的另一种可能解释是您有一个数组引用数组。这个“看起来”像一个二维数组，因此你会谈论“行”。如果是这种情况，那么试试这个

```
 #!/usr/bin/env perl

use warnings;
use strict;

my @array1 = (
  ['a', 'b'],
  ['b', 'c'],
  ['c', 'd'],
);

# "flatten" the nested data structure by one level
my @array2 = map { @$_ } @array1;

# see that the result is correct
use Data::Dumper;
print Dumper \@array2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T21:19:44.850

这是另一种选择：

```
use Modern::Perl;

my @array = ( 'a b', 'b c', 'c d' );
my @array2 = map /\S+/g, @array;

say for @array2; 
```

输出：

```
a
b
b
c
c
d 
```

`map`对您的列表进行操作`@array`，将正则表达式（匹配非空白字符）应用于其中的每个元素以生成一个新列表，该列表放置在`@array2`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T17:53:18.833

```
my @array_one = (1, 3, 5, 7);
my @array_two = (2, 4, 6, 8);

my @new_array = (@array_one, @array_two); 
```

# c# - 按用户管理位置查询和排序文档的最佳解决方案？

> ID：12220319
> 
> 赞同：2
> 
> 时间：2012-08-31T17:52:53.420
> 
> 标签：c#, .net, algorithm, sorting, lucene.net

A`User`拥有一个或多个文档子集 ( `Posts`)。这个想法（UX）是让`User`管理（**可选**`Posts`）在一个子集中出现的顺序。

默认情况下，`Posts`按 排序`CreatedOn`。最终，`User`将**拖放** `Posts`来管理他们的订单。这将允许`User`推广**和组织**其`Posts`.

一个简单的`Int32`领域`Position`会引发很多问题。例如：

*   你允许一个位置是负面的吗？
*   你如何处理职位相同的帖子？
*   您是否引入间隙以减少碰撞？
*   每次职位更改时，您都会更新所有帖子吗？
*   ETC..

..最后是我的观点：

**按用户管理的位置对 Lucene 文档进行排序的最佳解决方案是什么？**也许是一个`Int32`领域？`Position`

**编辑**（有价值的信息）：

*   帖子位于**数据库和 Lucene 索引**中。
*   帖子是**分页**的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T18:02:52.350

我认为最简单的是模拟链表。为每个文档添加一个指向下一个文档的指针。如果您不能直接执行此操作（您实际上没有地址，因为它们在数据库中或其他任何地方），您可以为每个文档使用 ID 和 nextID。只要确保ID不同。当用户拖放时，只需重新连接列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T23:02:01.193

看这个问题：[重新排序有序列表](https://stackoverflow.com/questions/3379414/reordering-an-ordered-list)

可悲的是，这个问题没有完美的解决方案;-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T20:31:55.450

我认为`CustomScoreQuery`可以解决这个问题

```
public class MyScoreQuery : Lucene.Net.Search.Function.CustomScoreQuery
{
    public MyScoreQuery (Query q) : base(q)
    {
    }
    public override float CustomScore(int doc, float subQueryScore, float valSrcScore)
    {
        //read the doc if you need "indexReader.Document(doc)"
        //and apply your custom logic returning a float
    }
} 
```

用法可能是

```
Query realQuery =  ........
Query q = new MyScoreQuery (realQuery); 
```

# ios - ios - xcode 接收线程 1 EXEC_BAD_ACCESS 错误

> ID：12220320
> 
> 赞同：1
> 
> 时间：2012-08-31T17:52:54.393
> 
> 标签：ios, xcode, ios5

我不断收到错误“线程 1 EXEC_BAD_ACCESS (code=EXC_ARM_DA_ALIGN, address=0xf286)”我的项目[在这个 zip](http://scramblr.us/Scrambler.zip)

**我不知道错误是什么，有人可以告诉我吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:13:57.843

您的错误在这里： NSArray *masterWordList = [NSArray arrayWithObjects:@"well", ...]; 有 "floss" 确定为 char*而不是 NSString，所以你忘记了 "@"，你应该写 @"floss"。

你最好使用一些资源文件来存储很多字符串常量......

# c# - 发送 http post 请求返回部分结果

> ID：12220321
> 
> 赞同：2
> 
> 时间：2012-08-31T17:52:58.963
> 
> 标签：c#, http-post

我正在编写一个简单的服务器端应用程序，它将请求发送到远程休息服务。当我使用此代码示例通过我的代码发送它时：

```
// Create a request using a URL that can receive a post. 
WebRequest request = WebRequest.Create(url);
// Set the Method property of the request to POST.
request.Method = "POST";

// Create POST data and convert it to a byte array.
var paramsBuilder = new StringBuilder();
foreach (var param in parameters)
{
    paramsBuilder.AppendFormat("&{0}={1}", param.Key, param.Value);
}
paramsBuilder.Length--;

byte[] byteArray = Encoding.UTF8.GetBytes(paramsBuilder.ToString());
// Set the ContentType property of the WebRequest.
request.ContentType = "application/x-www-form-urlencoded";
// Set the ContentLength property of the WebRequest.
request.ContentLength = byteArray.Length;
// Get the request stream.
Stream dataStream = request.GetRequestStream();
// Write the data to the request stream.
dataStream.Write(byteArray, 0, byteArray.Length);
// Close the Stream object.
dataStream.Close();
// Get the response.
WebResponse response = request.GetResponse();
// Get the stream containing content returned by the server.
dataStream = response.GetResponseStream();
// Open the stream using a StreamReader for easy access.
StreamReader reader = new StreamReader(dataStream);
// Read the content.
string responseFromServer = reader.ReadToEnd();
// Display the content.
Console.WriteLine(responseFromServer);
// Clean up the streams.
reader.Close();
dataStream.Close();
response.Close();
return responseFromServer; 
```

我得到了部分结果。内容没有被修剪，只是部分内容。当我通过类似[hurl.it](http://hurl.it)的服务发送相同的请求时，我得到了完整的响应。

可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:00:32.310

这可能是因为服务器在响应中使用的编码

从 httpwebresponse检查这个问题[部分页面源](https://stackoverflow.com/questions/1557034/partial-page-source-from-httpwebresponse)

链接到[http://blogs.msdn.com/b/feroze_daud/archive/2004/03/30/104440.aspx](http://blogs.msdn.com/b/feroze_daud/archive/2004/03/30/104440.aspx)

它解释说“StreamReader 使用默认编码 (UTF8)，它可能与您正在读入 StreamReader 的字节的编码不匹配。”

# java - 将列表作为可变参数传递

> ID：12220324
> 
> 赞同：68
> 
> 时间：2012-08-31T17:53:05.110
> 
> 标签：java, android, list, variadic-functions

我有一个`List<Thing>`并且我想将它传递给一个声明的方法`doIt(final Thing... things)`。有没有办法做到这一点？

代码看起来*像*这样：

```
public doIt(final Thing... things)
{
    // things get done here
}

List<Thing> things = /* initialized with all my things */;

doIt(things); 
```

该代码显然不起作用，`doIt()`因为`Thing`不需要`List<Thing>`.

有没有办法将列表作为可变参数传递？

**这是在 Android 应用程序中，但我不明白为什么该解决方案不适用于任何 Java**

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-08-31T17:55:31.283

只是通过`things.toArray(new Thing[things.size()])`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T17:57:37.187

可变参数在内部被解释为一个数组。因此，您应该事先将其转换为数组。同样在您的`doIt`方法中，您应该使用数组索引访问 things-s 元素。

# asp.net - 在 ASP.NET/VB.NET 中填充数据绑定 ListView

> ID：12220329
> 
> 赞同：0
> 
> 时间：2012-08-31T17:53:19.007
> 
> 标签：asp.net, vb.net, listview

我已经对此进行了很长时间的搜索，但没有提出任何建议，所以是时候寻求 SO 的帮助了。

我有一个搜索功能，可以同时在两个表中搜索一个值，只显示最新的记录。其中一个表将来自一组四个表，用户必须从下拉列表中选择这些表。对于相似的数据，所有这四个表都有不同的列名，所以我必须根据该下拉选择决定在 Eval() 中放入什么。

下面是在 ListView 中填充一个单元格的代码：

```
<%# If(CheckOverrides(Eval("MemUniqID"), "txtFirstName") <> Nothing,
       CheckOverrides(Eval("MemUniqID"), "txtFirstName"),
       Eval(FindDBField("txtFirstName"))
    )
 %> 
```

基本上，我必须将唯一标识符和另一个参数传递给函数以查找最新记录（位于覆盖表中）。如果函数不返回任何内容，则将显示原始数据（位于四个表之一中）。从 FindDBField 函数返回表的正确列名。

这样做的问题是，如果搜索结果太多，数据库连接就会退出并自行关闭。我一直在尝试找到一种更好的方法来解决这个问题，这将减少对数据库的调用（每次调用 CheckOverrides() 和 FindDBFields() 都会查询数据库一次，我有大约 8 个字段拉入每行的 ListView，因此每行返回 16 个查询），但我似乎无法正确处理代码。

有什么建议么？谢谢！

# msdeploy - MsDeploy runCommand 提供程序 - 未经授权的错误

> ID：12220330
> 
> 赞同：3
> 
> 时间：2012-08-31T17:53:21.987
> 
> 标签：msdeploy, webdeploy

作为我们自定义安装程序过程的一部分，我正在测试 msdeploy 以运行远程命令，但无论我如何配置它，我都无法让它允许我与普通用户一起使用 runCommand。

我正在使用的电话是（为清楚起见包装）：

```
"C:\program Files\IIS\Microsoft Web Deploy\msdeploy.exe" 
    -verb:sync 
    -source:runCommand="testcommand.bat" 
    -dest:auto,wmsvc="https://server:8172/msdeploy.axd?site=Default Web Site",authType=basic,userName=server\username,password=xxxxxx 
    -allowUntrusted 
```

该用户是服务器上的本地用户，并且已添加到“默认网站”的“IIS 管理器权限”中。testcommand.bat 只是一个包含“dir”的普通批处理文件。

我已经在管理服务委派下设置了 runCommand 提供程序（操作 =“*”，路径类型 =“路径前缀”，路径 =“{userScope}”，身份类型 =“特定用户”）

如果我将用户添加到本地管理员组，它工作正常。

由于已启用某些日志记录，我在事件日志中得到以下信息：

```
Tracing deployment agent exception. Request ID '97beb70b-33da-4445-b3be-d3cf3e6db8b7'. 
Request Timestamp: '08/31/2012 18:05:25'. 
Error Details:
    Microsoft.Web.Deployment.DeploymentUnauthorizedAccessException: Attempted to perform an unauthorized operation. runCommand http://go.microsoft.com/fwlink/?LinkId=178034
    at Microsoft.Web.Deployment.DelegationHelper.ImpersonateForOperation(String deploymentAction, String deploymentProvider, String deploymentPath, DelegationContextCache cache)
    at Microsoft.Web.Deployment.DelegationHelper.ImpersonateForOperation(String deploymentAction, DeploymentObject deploymentObject)/>
    at Microsoft.Web.Deployment.DeploymentAgent.HandleRequest(DeploymentAgentAsyncData asyncData) 
```

我已经尝试过[http://technet.microsoft.com/en-us/library/ee619740(WS.10).aspx](http://technet.microsoft.com/en-us/library/ee619740(WS.10).aspx)中的两个基于权限的修复程序，但它们没有任何区别。

真的很感激任何建议——我差点把头发扯掉了！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T07:49:32.147

在同一件事上花了两天时间。如果您启用“Web 管理服务失败请求跟踪”，您将看到如下消息：

> Uri="/msdeploy.axd", eventData="未授权。详细信息：未找到可以授权用户 'WebDeploy'、提供程序 'runCommand'、操作 'Read'、路径 'echo HI!' 的规则。"

如您所见，msdeploy 使用命令作为匹配规则的路径，因此您只需`Path = "{userScope}"`在委派规则中替换为`Path = "testcommand.bat"`

不确定，为什么在网络上的任何文章中都没有指定，也许这是 WebDeployV3 的新内容。

# c++ - 模板的数据类型

> ID：12220332
> 
> 赞同：0
> 
> 时间：2012-08-31T17:53:25.277
> 
> 标签：c++, templates

我有一个名为 的模板类`Variable`，它有一个专门的 char* 构造函数，其定义如下：

```
template<>
Variable<char*>::Variable(char * const &arg_value)
{
    value = new char[strlen(arg_value) + 1];
    strncpy(value, arg_value, strlen(arg_value));
    value[strlen(arg_value)] = '\0';
} 
```

现在，我有这个声明，声明一个`Variable<char*>`：

`Variable<char*> stringVar = const_cast<char*>("Hi");`

在我的`Variable`定义中，我从未向 const char* 声明或定义复制构造函数。但是，该语句工作得很好。为什么是这样？我非常肯定它`stringVar`的数据类型为`Variable<char*>`，但这仍然有效。这个任务从哪里来？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T18:00:51.557

采用一个参数的构造函数允许*隐式转换*。这是您的情况的一个更简单的示例：

```
struct Foo { Foo(int, double = 0.5, char = 'a') { } };

void bar(Foo);

Foo x = 1; // OK!
bar(2);    // also OK 
```

要禁止这种隐式转换，请说`explicit`：

```
struct Eew { explicit Eew(int) { } };

// Eew e = 3;    // error
Eew e2 = Eew(3); // OK but weird
Eew e3(3);       // correct 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T17:56:33.480

```
Variable<char*> stringVar = const_cast<char*>("Hi"); 
```

调用 class 的隐式 c-tor `Variable<char*>`。它等于

```
Variable<char*> stringVar = Variable<char*>(const_cast<char*>("Hi")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T17:56:38.550

您正在调用默认的复制构造函数。声明一个隐藏在您的变量<> 模板中并观察编译中断。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T18:03:32.117

```
char hi[] = "Hi";
Variable<char*> stringVar = hi; 
```

上面的第二行在*语义上*等价于：

```
Variable<char*> stringVar( implicit_cast<Variable<char*>>(hi) ); 
```

假设`implicit_cast`当且仅当存在可用的隐式转换时，才会执行到目标类型的类型转换。在您的情况下，构造函数：

```
Variable<T>::Variable( T const & ) 
```

提供隐式转换：`Variable<char*>::Variable( char * const & )`可用于从 转换`char*`为`Variable<char*>`.

请注意，虽然在语义上会发生这种情况，但实际上副本将被省略，代码将被编译为等效的：

```
Variable<char*> stringVar(hi); 
```

That is, after all checks have been performed: an implicit conversion from `hi` to the type is available, and the copy constructor can be called implicitly.

# c# - C# WebBrowser 控件删除脚本标签（停止 javascript 执行）

> ID：12220333
> 
> 赞同：3
> 
> 时间：2012-08-31T17:53:31.690
> 
> 标签：c#, winforms, webbrowser-control

我有一个使用 Webbrowser 控件的 winforms 应用程序。

当我访问一个页面时，该页面的代码如下：

```
(document).ready(function(){
window.print();
} 
```

但我不希望在此页面上执行 javascript。

在 webBrowser1_DocumentCompleted 事件中，我试图从文档文本中删除脚本元素，但找不到合适的事件、函数等。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T18:05:37.080

如果您在弹出弹出窗口时遇到问题，我已经为您提供了一个解决方案，并且如果您想在客户端计算机上禁用/启用 javascript（或者甚至只是读取/查询它是否已启用/禁用），我已包含该答案对你来说，我们开始吧：

您要禁用哪个弹出消息？如果是警报消息，试试这个，显然解决窗口或框架对象以满足您的特定需求，我只是假设顶级文档，但如果您需要 iframe，您可以使用 window.frames(0) 访问它。对于第一帧等等...（关于 JavaScript 部分）...这里有一些代码，假设 WB 是您的网络浏览器控件...

```
WB.Document.parentWindow.execScript "window.alert = function () { };", "JScript" 
```

但是，在您的情况下，由于您想禁用打印，只需`.alert`换成`.print`.

您必须在整个页面加载完成后才运行上述代码，我知道这很难做到（并且尚未发布完整证明版本）但是我已经这样做了一段时间（完整证明）现在，如果您阅读我之前标记为“webbrowser”和“webbrowser-control”的一些答案，您可以收集有关如何准确执行此操作的提示，但如果您想取消 .confirm JavaScript，请回到手头的问题消息，只需将 window.alert 替换为 window.confirm （当然，使用正确的对象限定您的 window.object 以到达您正在使用的文档层次结构）。您还可以使用上述技术禁用 .print 方法以及新的 IE9 .prompt 方法。

这是一个常量字符串（在 VB 中声明），它将摆脱 4 个弹出窗口，包括新的 IE9 弹出窗口。此外，它将摆脱 onbeforeunload 事件，并且它将在其运行的每个页面上执行所有这些操作。如果你有框架，你也不需要在框架中运行它们，只在父文档中运行就足够了。在这里（在 VB6 中声明）， _ 只是为了便于阅读，我放置在此处的行延续，& 用于字符串连接，而 ; 在 javascript 中只是意味着将下面的内容视为另一行代码。这样，您可以在一个物理行中运行多行代码（我认为是 5 行）。

```
Public Const DEFAULT_JS_TO_RUN_AFTER_EACH_PAGE_LOAD As String = _
& "window.alert = function () { }; window.confirm = function () { }; " _
& "window.prompt = function () { }; window.print = function () { }; " _
& "window.onbeforeunload = function () { };" 
```

如果要完全禁用 JavaScript，可以使用注册表来执行此操作，并且必须在 webbrowser 控件加载到内存之前更改注册表，并且每次更改它（打开和关闭）都必须重新加载 webbrowser 控件并进入内存（或只是重新启动您的应用程序）。

> 注册表项是 \HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings\Zones\ - 键名是 1400，禁用它的值是 3，启用它是 0。

当然，因为 Zones 键下有 5 个区域，所以您需要为活动区域或所有区域更改它以确保。但是，如果您只想抑制 js 对话框弹出消息，那么您真的不需要这样做。

让我知道你的情况，如果我能提供进一步的帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T05:25:25.743

当你初始化 WebBrowser 时使用这个

```
webBrowser1.ScriptErrorsSuppressed = true;
webBrowser1.Navigate(url); 
```

希望这对你有用。

# asp.net - 用于动态生成的 DataGrid 表（ASP 和 C#）的 ButtonColumn 事件处理程序

> ID：12220336
> 
> 赞同：0
> 
> 时间：2012-08-31T17:53:48.253
> 
> 标签：asp.net, c#-4.0

我有一个页面，用户从几个字段中进行选择，然后对数据库进行查询以生成行数可变的表。我想在该表的左侧创建一个列，每个单元格中都有一个“编辑”按钮，以便用户可以编辑他们单击的编辑按钮所在的行。我可以生成表格和按钮，但我不知道如何处理点击事件。如果可能的话，我希望一切都用 ASP 和背后的代码来处理。

这是填充表格的 ASPX 代码：

```
<asp:DataGrid ID="tblResults" runat="server" OnItemCommand="btnEdit_Click"></asp:DataGrid> 
```

要添加包含编辑按钮的列，我使用以下 C# 代码，其中 dt 是包含数据库查询结果的数据表：

```
tblResults.DataSource = dt;
AddBtnCol(tblResults);
tblResults.DataBind();

public void AddBtnCol(DataGrid dt)
{
    var btnCol = new ButtonColumn();
    btnCol.CommandName = "btnEdit_Click";
    btnCol.Text = "Edit";
    btnCol.ButtonType = ButtonColumnType.PushButton;

    tblResults.Columns.Add(btnCol);
}

protected void btnEdit_Click(object sender, EventArgs e)
{
   // Don't know what to do
} 
```

我不确定如何使用事件处理程序，任何建议将不胜感激！

# php - php水印并保存图片

> ID：12220343
> 
> 赞同：1
> 
> 时间：2012-08-31T17:54:30.750
> 
> 标签：php

我正在尝试向图像添加水印，然后使用 php.ini 将图像保存到另一个文件中。这是我到目前为止的代码，但由于某种原因，水印没有出现在新目录中的图像上。原始图像保存在路径中`$old_path`，我想`$new_path`在应用水印后将其保存到。

```
 $old_path = "images_upload/".$name.".".$type;
    $new_path = "images_main/".$name.".".$type;
    ////////////////////water mark
$main_image = imagecreatefromstring(file_get_contents($old_path));

// Load the logo image
$logoImage = imagecreatefrompng("assets/watermark.png");
imagealphablending($logoImage, true);

// Get dimensions
$imageWidth=imagesx($main_image);
$imageHeight=imagesy($main_image);

$logoWidth=imagesx($logoImage);
$logoHeight=imagesy($logoImage); 

// Paste the logo
imagecopy(
   // source
   $main_image,
   // destination
   $logoImage,
   // destination x and y
   $imageWidth-$logoWidth, $imageHeight-$logoHeight,
   // source x and y
   0, 0,
   // width and height of the area of the source to copy
   $logoWidth, $logoHeight);
    ////////////////////////

    rename($old_path, $new_path);// save image 
```

请告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T18:01:50.090

您永远不会将`imagecopy`结果写到任何文件中，您只需将旧图像重命名为新路径 - 改用[imagejpeg](http://php.net/manual/en/function.imagejpeg.php)：

```
 imagejpeg($logoImage, $new_path); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T18:00:49.310

您不会在任何地方输出图像。你需要输出它。您现在所做的就是将旧文件重命名为新文件。

尝试`imagepng()`或等效为您的格式。 [http://php.net/manual/en/function.imagepng.php](http://php.net/manual/en/function.imagepng.php)

# javascript - 如何在 javascript 或 jquery 中比较两个 url

> ID：12220345
> 
> 赞同：-3
> 
> 时间：2012-08-31T17:54:34.033
> 
> 标签：javascript, jquery, html, url

> **可能重复：**
> [使用 Javascript 解析 URL](https://stackoverflow.com/questions/4140324/parse-url-with-javascript)

我想比较 URL 的基本部分。如果我输入`www.websitename.com`了它应该说如果我输入重复

```
http://www.websitename.com
https://www.websitename.com
websitename.com
http://www.websitename.com/filename
subdomain.websitename.com etc.. 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:04:30.837

如果您只想比较两个 URL 是否具有相同的域，您可以使用正则表达式轻松地对其进行编码。

javascript 没有办法知道这一点，`http://www.websitename.com/`并且`http://subdomain.websitename.com/`在没有实际获取内容并进行比较的情况下，是否解析到相同的主机或内容，因为它完全取决于主机实现，它可以以任何一种方式设置，而不是javascript可以知道。

这是一个从 URL 获取域的函数：

```
function getDomain(url) {
    var prefix = /^https?:\/\//i;
    var domain = /^[^\/:]+/;
    // remove any prefix
    url = url.replace(prefix, "");
    // assume any URL that starts with a / is on the current page's domain
    if (url.charAt(0) === "/") {
        url = window.location.hostname + url;
    }
    // now extract just the domain
    var match = url.match(domain);
    if (match) {
        return(match[0]);
    }
    return(null);
} 
```

您可以在此处查看每个 URL 的返回值：http: [//jsfiddle.net/jfriend00/6YNgp/](http://jsfiddle.net/jfriend00/6YNgp/)

# java - 特定单词的正则表达式

> ID：12220350
> 
> 赞同：0
> 
> 时间：2012-08-31T17:55:06.997
> 
> 标签：java, regex

我试图为“[开始词] [特定词] [结束词]”编写一个正则表达式，并使其不区分大小写。但由于某种原因，它似乎不起作用。

我在java中做，因此额外的“\”。

例如，如果我想匹配“crazy”这个词，我的正则表达式将是：

```
/\\bcrazy\\b/i 
```

我在其中调用不匹配任何内容的正则表达式的 java 代码是：

```
textToMakeHarder = textToMakeHarder.replaceAll("/\\bcrazy\\b/i", "super crazy"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T18:01:55.363

试试这个：

```
 String textToMakeHarder = "I am a crazy person and he is also a crazy person. Are you crazycrazy too?";
  Pattern re = Pattern.compile("\\bcrazy\\b",Pattern.CASE_INSENSITIVE);
  Matcher m = re.matcher(textToMakeHarder);
  textToMakeHarder = m.replaceAll("super crazy"); 
```

结果：

> 我是一个超级疯狂的人，他也是一个超级疯狂的人。你也疯了吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T18:04:28.173

去掉`/`and `/i`，并使用 a`Pattern`来区分大小写：

```
Pattern pattern = Pattern.compile("\\bcrazy\\b",Pattern.CASE_INSENSITIVE);
Matcher match = pattern.matcher(textToMakeHarder);

textToMakeHarder = match.replaceAll("super crazy"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T17:59:45.587

```
Pattern pat = Pattern("\\bcrazy\\b",Pattern.CASE_INSENSITIVE);
Matcher mat = pat.matcher("Your_Input");

while(mat.find()){

   mat.replaceAll("super crazy");

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T18:27:47.183

你想试试这个更简单的版本：

```
String textToMakeHarder = "foo bar is CraZY tonight".replaceAll("(?i)\\bcrazy\\b", "super crazy"); 
```

输出是：

```
foo bar is super crazy tonight 
```

使用短修饰符 (?i) 进行不区分大小写的搜索。

[参考](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#CASE_INSENSITIVE)关于模式的官方 Java 7 文档

# objective-c - 使用 NSFetchedResultsController 从核心数据模型中获取谓词到各个部分

> ID：12220353
> 
> 赞同：0
> 
> 时间：2012-08-31T17:55:16.700
> 
> 标签：objective-c, ios, uitableview, core-data, nsfetchedresultscontroller

我一直在解决这个问题[这里](https://stackoverflow.com/questions/1599204/core-data-backed-uitableview-with-indexing/1603428#1603428)

并尝试实施我自己的解决方案。不知何故，我没有得到任何部分。只有行。

在这种情况下为 3 行......但没有部分。至少应该有2个部分。2个月。我知道这一点，因为我检查了模型并且它们在那里。

我的**核心数据模型**有一个实体**Year**，包含许多个月（实体**Month**）。而且 Month 也有很多天（Entity **Day**）

**分别代表实体Year**、**Month**和**Day**的属性分别是 year_、month_ 和 day_ 。

我想要做的是**在给定的月份**和**给定的年份**中对所有天的**获取请求，**这样我可以让我的部分代表一个月，而行代表天。

 ****有人可以帮我吗？

编辑：更新的代码

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];

NSEntityDescription *entity = [NSEntityDescription entityForName:@"Day" inManagedObjectContext:managedObjectContext];
[fetchRequest setEntity:entity];

NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"day_" ascending:YES];
NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];

[fetchRequest setSortDescriptors:sortDescriptors];

[fetchRequest setFetchBatchSize:20];

NSFetchedResultsController *theFetchedResultsController =
[[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                    managedObjectContext:managedObjectContext
                                      sectionNameKeyPath:@"month.month_"
                                               cacheName:@"Root"]; 
```

我的模型看起来像这样，

![在此处输入图像描述](../Images/5ec8c9cf29f587ef8679997bc587db76.png)

任何帮助是极大的赞赏。

谢谢！

努诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:58:06.153

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
[fetchRequest setPredicate: [NSPredicate predicateWithFormat:@"";

NSEntityDescription *entity = [NSEntityDescription entityForName:@"Day" inManagedObjectContext:managedObjectContext];
[fetchRequest setEntity:entity];

NSSortDescriptor *sort = [[NSSortDescriptor alloc] initWithKey:@"Month.month_" ascending:NO];
NSSortDescriptor *sort2 = [[NSSortDescriptor alloc] initWithKey:@"day_" ascending:NO];
[fetchRequest setSortDescriptors:[NSArray arrayWithObjects:sort,sort2]];

[fetchRequest setFetchBatchSize:20];

NSFetchedResultsController *theFetchedResultsController =
[[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                    managedObjectContext:managedObjectContext sectionNameKeyPath:"month.month_"
                                               cacheName:@"Root"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:04:44.047

一次获取所有内容，并在返回后使用数组字典对其进行排序。因此，您遍历结果并为每个部分创建一个数组，并将其存储在为每个部分索引的字典中。你的字典看起来像

```
{ 
 {'January", "1,2,6,19,23,nil"},
 {'February", "2,7,18,19,28,nil"},
 {'March", "5,6,7,9,29,31,nil"},
 etc.
} 
```

[icodeblog](http://www.icodeblog.com/2010/12/10/implementing-uitableview-sections-from-an-nsarray-of-nsdictionary-objects/)上有一个很好的代码教程，其中提供了执行此操作所需的详细信息的示例。****

# svn - 在 SVN 中，你如何知道一个修订被签入了哪个分支？

> ID：12220354
> 
> 赞同：1
> 
> 时间：2012-08-31T17:55:22.863
> 
> 标签：svn

这是我们遇到的问题：

开发人员将在他的沙箱中检出主干。我们创建了一个切换脚本来将某些文件切换到正在进行更改的分支。有时切换脚本似乎失败了，开发人员检查了他的更改。这些更改显示在修订日志中，但我们无法确定它们是否被签入分支或主干。他们似乎迷失在开发者的盒子上。这会导致很多来回切换，并且通常当它是一个很小的变化时，它就会被重新编码。

所以我的问题是，我们如何才能知道修订被签入了哪个分支？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T19:09:47.367

使用 Tortoise，我提取了我修改过的程序的日志。

![记录消息](../Images/af532e0ba7f026f71f48ff47a6b14a5d.png)

我强调了行动和路径。路径向我准确显示了在哪个分支上修改了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T19:16:01.670

如果你没有使用 TortoiseSVN，你可以得到一个详细的 svn 日志：

```
svn log --verbose -r HEAD 
```

这将显示提交中所有文件的 svn 位置（就像@Gilbert Le Blanc 的回答一样）。下面的示例输出。`HEAD`如果您需要不同的内容，请更改为特定版本。

```
------------------------------------------------------------------------
r556 | USER | 2012-08-30 13:37:35 -0500 (Thu, 30 Aug 2012) | 1 line
Changed paths:
   M /trunk/Path/File.cs

Commit Comment
------------------------------------------------------------------------ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T19:38:46.253

修订是每棵树，所以首先你需要获得修订的“更改”

```
svn diff -r <start revision>:<end revision> --summarize <root svn URL> 
```

这可能会产生输出，例如

```
A       file:///home/xxx/svn/yyy/trunk/src/main/java/com/proj/App.java
A       file:///home/xxx/svn/yyy/trunk/src/main/java/com/proj
A       file:///home/xxx/svn/yyy/trunk/src/main/java/com
A       file:///home/xx/svn/yyy/trunk/src/main/java
A       file:///home/xxx/svn/yyy/trunk/src/main
A       file:///home/xxx/svn/yyy/trunk/src
A       file:///home/xxx/svn/yyy/trunk/pom.xml
 M      file:///home/xxx/svn/yyy/trunk 
```

分支在 SVN 中被实现为目录，因此您需要确定项目的根目录，以及哪些直接子目录被视为（按照惯例）“分支”

在上面的例子中

```
file:///home/xxx/svn/yyy/ 
```

被认为是项目的“根”url，所以从

```
file:///home/xxx/svn/yyy/trunk 
```

告诉我它签入的“分支”是

```
trunk 
```

请注意，其他项目已签入

```
trunk/src/main/java/com 
```

但按照*我的*惯例，这*不是*一个分支。由于决定什么是分支是*传统*的，因此最后确定哪些分支受到影响将需要了解您的特定 SVN 设置。就我而言

 **```
branches/branchA 
```

我自己认为是一个分支（对于我的项目），但是

```
branches/branchA/src 
```

不被视为分支。**

# android - 如何参考 xml 将列动态添加到已构建的行中

> ID：12220358
> 
> 赞同：2
> 
> 时间：2012-08-31T17:55:48.887
> 
> 标签：android, dynamic, tablelayout, multiple-columns

几天以来我一直在努力解决这个问题，现在已经搜索了很多论坛，但现在我感到沮丧。:(

我正在尝试通过代码动态构建表格。我成功地能够使用 for 循环从代码中添加新列新行。

我通过以下代码成功地做到了：

```
 TableLayout tl = (TableLayout) findViewById(R.id.tblCosts);
    for (int hi = 0; hi < 4; hi++ ) {       
            tr = new TableRow(this);
            tr.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                    LayoutParams.WRAP_CONTENT));

            // Create a text view to be the row-content.
            for (int i = 0; i < 10; i++) {
                TextView tv = new TextView(this);
                tv.setText("Dummy data" + i);
                tv.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                        LayoutParams.WRAP_CONTENT));
                tv.setBackgroundResource(R.drawable.shape);
                tv.setPadding(5, 5, 5, 5);
                // Add text View to row.
                tr.addView(tv);

        }

        // Add row to TableLayout.
        tl.addView(tr, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
    } 
```

这为我提供了完美的 4X10 表到 xml 中已构建的表，其中包含一些标题行。

但是，当我尝试将几个视图动态添加到从 xml 引用的已构建行时，我的代码抛出错误“java.lang.IllegalStateException：指定的孩子已经有父母。您必须在孩子的父母上调用 removeView()第一的。 ”

下面是我正在使用的代码

```
 TableLayout tl = (TableLayout) findViewById(R.id.tblCosts);

    // Create a new rows to be added.
    TableRow tr = (TableRow) findViewById(R.id.tRheadercost2);
            for (int hi = 0; hi < 4; hi++) {
                TextView tvname = new TextView(this);
                tvname.setText("Name"+hi);
                tvname.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
                        LayoutParams.WRAP_CONTENT));
                tvname.setLayoutParams(new LayoutParams(5+hi));
                tvname.setBackgroundResource(R.drawable.shapegreywithborder);
                tvname.setPadding(5, 5, 5, 5);
                // Add text view to row.
                tr.addView(tvname);
            }
    tl.addView(tr, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT)); 
```

在这里，我已经在 xml 中构建了一行 R.id.tRheadercost2，layout_span 为 4（5 列）。我希望我的代码在第 5 列之后的同一行中动态添加更多列。

这是java xml的片段：

```
 <TableRow android:id="@+id/tRheadercost2"
            android:layout_width="match_parent" android:layout_height="wrap_content">
            <TextView android:textColor="#000" android:background="@drawable/shapegreywithborder"
                android:layout_height="match_parent" android:padding="5dp"
                android:text="" android:layout_width="match_parent" android:layout_column="0" android:layout_span="4"></TextView>
        </TableRow> 
```

# php - 对所有用户使用相同的 MySQL 链接？

> ID：12220359
> 
> 赞同：1
> 
> 时间：2012-08-31T17:55:55.327
> 
> 标签：php, mysql, sql-server, database, optimization

我的共享服务器限制了从 PHP 到 MySQL 的并发连接数。有时当我收到更多流量并且每个人都需要访问数据库时，他们会因此而被拒绝`max connection limitation`。我希望这`mysqlp_connect`能解决问题，但显然持久连接不会为所有用户而是为每个用户保持一个连接。

无论如何，是否总是在服务器上打开**一个 MySQL**链接，并且让每个用户只使用该链接而不是为每个用户创建一个新链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:00:02.887

我只是从这篇文章中引用一段话，但我建议你阅读这篇文章。
就我而言，我会创建一个连接并在每次操作完成后将其丢弃，因为开销非常小，不会影响我的任何系统。
在您的情况下，您将不得不查看您的代码并判断这将花费多少开销；通常你会对此进行基准测试。

* * *

” 这里的答案非常简单——效率。如果创建到 SQL 服务器的链接的开销很高，则**持久连接**很好。这种开销是否真的很高取决于许多因素。比如，它是什么类型的数据库, 无论它是否位于您的 Web 服务器所在的同一台计算机上, SQL 服务器所在的计算机的负载程度等等.
底线是, 如果连接开销很高, 持久连接对您有很大帮助. 他们导致子进程在其整个生命周期内仅连接一次，而不是每次处理需要连接到 SQL 服务器的页面时。这意味着对于打开持久连接的每个子进程都将拥有自己的打开持久连接到服务器。
例如，如果您有 20 个不同的子进程运行一个与您的 SQL 服务器建立持久连接的脚本，那么您将有 20 个与 SQL 服务器的不同连接，每个子进程一个。"

来源： http: [//php.net/manual/en/features.persistent-connections.php](http://php.net/manual/en/features.persistent-connections.php)

我希望这对你有帮助！

# android - 使用 ExpandableListView 而不扩展 ExpandableListActivity

> ID：12220371
> 
> 赞同：1
> 
> 时间：2012-08-31T17:57:05.337
> 
> 标签：android, android-activity, expandablelistview

我已经扩展了 SherlockMapActivity，这是一个兼容库，允许在更高版本的 android 中找到类似选项卡的界面。问题是我有两个选项卡。Mapview 选项卡和 ListView 选项卡。MapView 工作正常，但列表视图没有。我想要一种方法来实现可扩展列表视图而不扩展可扩展列表活动。扩展列表视图应出现在列表视图选项卡下。现在的问题是 setListAdapter 方法在我的 Code..pls 帮助中未定义。

```
public class MainActivity extends SherlockMapActivity implements LocationListener,ActionBar.TabListener {

private MapController mapController;
private MapView mapView;    
private LocationManager locationManager;
private GeoPoint currentPoint;
private Location currentLocation = null;
private PlaceOverlay currPos;
private ViewSwitcher tswitcher;

public boolean showMiniHelp = true;

TableLayout tlayout;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
    setContentView(R.layout.activity_main);

    tswitcher = (ViewSwitcher)findViewById(R.id.viewSwitcher1);

    getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    ActionBar.Tab tab1 = getSupportActionBar().newTab();
    tab1.setText("Map View");
    tab1.setTabListener(this);
    getSupportActionBar().addTab(tab1);

    ActionBar.Tab tab2 = getSupportActionBar().newTab();
    tab2.setText("List View");
    tab2.setTabListener(this);
    getSupportActionBar().addTab(tab2);

    mapView = (MapView)findViewById(R.id.mapView);
    mapView.setBuiltInZoomControls(true);
    mapView.setSatellite(false);      
    mapController = mapView.getController();
    mapController.setZoom(17);
    getLastLocation();
    drawCurrPositionOverlay();
    drawStores();
    drawSportLocations();
    animateToCurrentLocation();

    //ListViewSetup

     // Construct Expandable List
    final String NAME = "name";
    final String IMAGE = "image";
    final String DATA = "data";
    final LayoutInflater layoutInflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    final ArrayList<HashMap<String, String>> headerData = new ArrayList<HashMap<String, String>>();

    final HashMap<String, String> group1 = new HashMap<String, String>();
    group1.put(NAME, "Group 1");
    headerData.add( group1 );

    final HashMap<String, String> group2 = new HashMap<String, String>();
    group2.put(NAME, "Group 2");
    headerData.add( group2);

    final HashMap<String, String> group3 = new HashMap<String, String>();
    group3.put(NAME, "Group 3");
    headerData.add( group3);

    final ArrayList<ArrayList<HashMap<String, Object>>> childData = new ArrayList<ArrayList<HashMap<String, Object>>>();

    final ArrayList<HashMap<String, Object>> group1data = new ArrayList<HashMap<String, Object>>();
    childData.add(group1data);

    final ArrayList<HashMap<String, Object>> group2data = new ArrayList<HashMap<String, Object>>();
    childData.add(group2data);

    final ArrayList<HashMap<String, Object>> group3data = new ArrayList<HashMap<String, Object>>();
    childData.add(group3data);

    // Set up some sample data in both groups
    for( int i=0; i<10; ++i) {
        final HashMap<String, Object> map = new HashMap<String,Object>();
        map.put(NAME, "Child " + i );
        map.put(DATA, "Data " + i);
        map.put(IMAGE, getResources().getDrawable((i%3==0? R.drawable.basketball : R.drawable.supermarket)));
        ( i%2==0 ? group1data : group2data ).add(map);
    }
    final HashMap<String, Object> map = new HashMap<String,Object>();
    map.put(NAME, "Child x");
    map.put(DATA, "Data x");
    map.put(IMAGE, getResources().getDrawable(R.drawable.tennis));
    group3data.add(map);

    setListAdapter( new SimpleExpandableListAdapter(
            this,
            headerData,
            R.layout.group_row,
            new String[] { NAME, DATA },    // the names of the data
            new int[] { R.id.groupname },   // the text field to populate with the field data
            childData,
            0,
            null,
            new int[] {}
        ) {
            @Override
            public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
                final View v = super.getChildView(groupPosition, childPosition, isLastChild, convertView, parent);

                // Populate your custom view here
                ((TextView)v.findViewById(R.id.name)).setText( (String) ((Map<String,Object>)getChild(groupPosition, childPosition)).get(NAME) );
                ((TextView)v.findViewById(R.id.data)).setText( (String) ((Map<String,Object>)getChild(groupPosition, childPosition)).get(DATA) );
                ((ImageView)v.findViewById(R.id.image)).setImageDrawable( (Drawable) ((Map<String,Object>)getChild(groupPosition, childPosition)).get(IMAGE) );

                return v;
            }

            @Override
            public View newChildView(boolean isLastChild, ViewGroup parent) {
                 return layoutInflater.inflate(R.layout.expandable_list_item_with_image, null, false);
            }
        }
    );
    ExpandableListView list = (ExpandableListView) findViewById(android.R.id.list);
    list.setOnChildClickListener(new OnChildClickListener(){
        public boolean onChildClick(ExpandableListView parent, View v,
                int groupPosition, int childPosition, long id) {
            System.out.println("Group:"+groupPosition+", Child: "+childPosition);
            return true;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:27:45.387

绝对是！甚至我也有[类似的问题。](https://stackoverflow.com/questions/10880108/android-expandablelistactivity-and-tabactivity-in-same-class)

扩展 ExpandableListActivity 只是通过直接为您提供适配器和东西来帮助您。

但是您也可以在布局中定义 ExpandableListView 并手动声明它的所有适配器。

本[教程](http://en.wikicode.org/index.php/Custom_ExpandableListView)将为您提供帮助。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T18:20:31.517

是的，我猜它可能！您将不得不使用自定义适配器。您必须创建一个自定义类来扩展 baseadapter 或任何其他适配器类。我不确定你能不能试一试。

如果我在这方面找到一些东西，我会更新你。

# c++ - 在进行静态链接时提升 boost_program_options-gcc41-mt-1_39.a 未定义符号错误

> ID：12220372
> 
> 赞同：0
> 
> 时间：2012-08-31T17:57:06.490
> 
> 标签：c++, boost, g++, boost-program-options

尝试在我的代码中静态链接 boost 程序选项库时，我在链接器尝试链接它时遇到错误。

```
gmake[1]: Leaving directory `tools'
g++ -rdynamic -g  -o test test.o -Lboost_1_39_0/lib/Linux64//libboost_program_options-gcc41-mt-1_39.a … (other dependent libs)
test.o: In function `basic_config_file_iterator':
 boost_1_39_0/include/Linux64/boost-1_39/boost/program_options/detail/config_file.hpp:147: undefined reference to `boost::program_options::detail::common_config_file_iterator::common_config_file_iterator(std::set<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > const&, bool)'
 boost_1_39_0/include/Linux64/boost-1_39/boost/program_options/detail/config_file.hpp:150: undefined reference to `boost::program_options::detail::common_config_file_iterator::get()'
test.o: In function `boost::eof_iterator<boost::program_options::detail::common_config_file_iterator, boost::program_options::basic_option<char> >::increment()':
 boost_1_39_0/include/Linux64/boost-1_39/boost/program_options/eof_iterator.hpp:75: undefined reference to `boost::program_options::detail::common_config_file_iterator::get()'
test.o: In function `boost::program_options::detail::basic_config_file_iterator<char>::getline(std::basic_string<char, std::char_traits<char>, std::allocator<char> >&)':
 boost_1_39_0/include/Linux64/boost-1_39/boost/program_options/detail/config_file.hpp:163: undefined reference to `boost::program_options::to_internal(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
collect2: ld returned 1 exit status
gmake: *** [test] Error 1 
```

另外，当我对这些函数的 libboost_program_options-gcc41-mt-1_39.a 进行 NM 时，我得到低于输出

```
$ nm -goC libboost_program_options-gcc41-mt-1_39.a | grep -i common_config_file_iterator
libboost_program_options-gcc41-mt-1_39.a:config_file.o:00000000000002e0 T boost::program_options::detail::common_config_file_iterator::add_option(char const*)
libboost_program_options-gcc41-mt-1_39.a:config_file.o:0000000000000eb0 T boost::program_options::detail::common_config_file_iterator::get()
libboost_program_options-gcc41-mt-1_39.a:config_file.o:0000000000000000 W boost::program_options::detail::common_config_file_iterator::getline(std::string&)
libboost_program_options-gcc41-mt-1_39.a:config_file.o:00000000000007f0 T boost::program_options::detail::common_config_file_iterator::common_config_file_iterator(std::set<std::string, std::less<std::string>, std::allocator<std::string> > const&, bool)
libboost_program_options-gcc41-mt-1_39.a:config_file.o:0000000000000b80 T boost::program_options::detail::common_config_file_iterator::common_config_file_iterator(std::set<std::string, std::less<std::string>, std::allocator<std::string> > const&, bool)
libboost_program_options-gcc41-mt-1_39.a:config_file.o:0000000000000000 W boost::program_options::detail::common_config_file_iterator::~common_config_file_iterator()
libboost_program_options-gcc41-mt-1_39.a:config_file.o:0000000000000000 W boost::program_options::detail::common_config_file_iterator::~common_config_file_iterator()
libboost_program_options-gcc41-mt-1_39.a:config_file.o:0000000000000060 T boost::program_options::detail::common_config_file_iterator::allowed_option(std::string const&) const
libboost_program_options-gcc41-mt-1_39.a:config_file.o:0000000000000000 V typeinfo for boost::eof_iterator<boost::program_options::detail::common_config_file_iterator, boost::program_options::basic_option<char> >
libboost_program_options-gcc41-mt-1_39.a:config_file.o:0000000000000000 V typeinfo for boost::iterator_facade<boost::program_options::detail::common_config_file_iterator, boost::program_options::basic_option<char> const, boost::forward_traversal_tag, boost::program_options::basic_option<char> const&, long>
libboost_program_options-gcc41-mt-1_39.a:config_file.o:0000000000000000 V typeinfo for boost::program_options::detail::common_config_file_iterator
libboost_program_options-gcc41-mt-1_39.a:config_file.o:0000000000000000 V typeinfo name for boost::eof_iterator<boost::program_options::detail::common_config_file_iterator, boost::program_options::basic_option<char> >
libboost_program_options-gcc41-mt-1_39.a:config_file.o:0000000000000000 V typeinfo name for boost::iterator_facade<boost::program_options::detail::common_config_file_iterator, boost::program_options::basic_option<char> const, boost::forward_traversal_tag, boost::program_options::basic_option<char> const&, long>
libboost_program_options-gcc41-mt-1_39.a:config_file.o:0000000000000000 V typeinfo name for boost::program_options::detail::common_config_file_iterator
libboost_program_options-gcc41-mt-1_39.a:config_file.o:0000000000000000 V vtable for boost::program_options::detail::common_config_file_iterator
libboost_program_options-gcc41-mt-1_39.a:parsers.o:                 U boost::program_options::detail::common_config_file_iterator::get()
libboost_program_options-gcc41-mt-1_39.a:parsers.o:0000000000000000 W boost::program_options::detail::common_config_file_iterator::getline(std::string&)
libboost_program_options-gcc41-mt-1_39.a:parsers.o:                 U boost::program_options::detail::common_config_file_iterator::common_config_file_iterator(std::set<std::string, std::less<std::string>, std::allocator<std::string> > const&, bool)
libboost_program_options-gcc41-mt-1_39.a:parsers.o:0000000000000000 W boost::program_options::detail::common_config_file_iterator::~common_config_file_iterator()
libboost_program_options-gcc41-mt-1_39.a:parsers.o:0000000000000000 W boost::program_options::detail::common_config_file_iterator::~common_config_file_iterator()
libboost_program_options-gcc41-mt-1_39.a:parsers.o:0000000000000000 W boost::program_options::detail::common_config_file_iterator::~common_config_file_iterator()
libboost_program_options-gcc41-mt-1_39.a:parsers.o:0000000000000000 V typeinfo for boost::eof_iterator<boost::program_options::detail::common_config_file_iterator, boost::program_options::basic_option<char> >
libboost_program_options-gcc41-mt-1_39.a:parsers.o:0000000000000000 V typeinfo for boost::iterator_facade<boost::program_options::detail::common_config_file_iterator, boost::program_options::basic_option<char> const, boost::forward_traversal_tag, boost::program_options::basic_option<char> const&, long>
libboost_program_options-gcc41-mt-1_39.a:parsers.o:0000000000000000 V typeinfo for boost::program_options::detail::common_config_file_iterator
libboost_program_options-gcc41-mt-1_39.a:parsers.o:0000000000000000 V typeinfo name for boost::eof_iterator<boost::program_options::detail::common_config_file_iterator, boost::program_options::basic_option<char> >
libboost_program_options-gcc41-mt-1_39.a:parsers.o:0000000000000000 V typeinfo name for boost::iterator_facade<boost::program_options::detail::common_config_file_iterator, boost::program_options::basic_option<char> const, boost::forward_traversal_tag, boost::program_options::basic_option<char> const&, long>
libboost_program_options-gcc41-mt-1_39.a:parsers.o:0000000000000000 V typeinfo name for boost::program_options::detail::common_config_file_iterator
libboost_program_options-gcc41-mt-1_39.a:parsers.o:0000000000000000 V vtable for boost::program_options::detail::common_config_file_iterator 
```

我不希望在我的测试程序中使用动态绑定，因此如果我在进行链接时缺少要包含的任何库，则需要任何指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:03:17.717

问题是我链接到我的程序的方式。我正在做如下

```
g++ -g test.cxx -o test -L/<path>/boost_1_39_0/lib/Linux64//libboost_program_options-gcc41-mt-1_39.a 
```

而我们需要做如下

```
g++ -g test.cxx -o test /<path>/boost_1_39_0/lib/Linux64//libboost_program_options-gcc41-mt-1_39.a 
```

这将解决问题。

-阿比纳夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T18:32:28.517

您正在使用编译器开关**-L**错误。在 gcc **-L**中用于指定要搜索库的目录。但是，这意味着如果您没有在附加标志**-l**之后指定库名称，它将无法链接该库以形成您想要的可执行文件。

因此，在这种情况下，您将执行以下操作：

```
g++ -g test.cxx -o test -L/<path>/boost_1_39_0/lib/Linux64/ -lboost_program_options-gcc41-mt-1_39 
```

# python - webkit：是否可以将 cookie 存储到文件中并再次使用它？

> ID：12220373
> 
> 赞同：3
> 
> 时间：2012-08-31T17:57:22.507
> 
> 标签：python, webkit, gtk

是否可以在您使用 webkit 时将 cookie 存储到文件中，并在下次运行我的应用程序时再次使用它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T23:45:52.830

我知道它的老问题，并且一直在寻找答案。经过一些试验和错误后，我终于自己提出来了。希望这对其他人有帮助。

```
from gi.repository import Soup
cookiejar = Soup.CookieJarText.new("<Your cookie path>", False)
cookiejar.set_accept_policy(Soup.CookieJarAcceptPolicy.ALWAYS)
session = WebKit.get_default_session()
session.add_feature(cookiejar) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-14T18:08:29.147

对于那些使用 WebKit 和 Gtk 的人，将第一行从：

```
from gi.repository import Soup 
```

到：

```
from gi.repository import Gtk, WebKit, Soup 
```

避免静态和动态冲突。

# codeigniter - 语言的 Codeigniter 代码提示

> ID：12220374
> 
> 赞同：0
> 
> 时间：2012-08-31T17:57:25.620
> 
> 标签：codeigniter, netbeans

我是否一直在 Netbeans 中构建我的 codeigniter 应用程序，并且我想到了一个非常有用的想法。我不认为这是可能的，但我想我会问。

因此，当我使用语言助手功能`lang('');`时，在我的和 lang 文件之间来回切换`views/controllers`以确保我有正确的键是很烦人的。

如果该函数上的代码提示会列出所有键及其值，那就太好了。有谁知道实现这一目标的方法？它知道这可能是不可能的，但我想我会问任何一种方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:15:33.890

有可能你只需要开发它！您可以使用此处提供的代码完成 API：http: [//platform.netbeans.org/tutorials/nbm-code-completion.html](http://platform.netbeans.org/tutorials/nbm-code-completion.html)

我不确定是否已经存在一个，但快速的谷歌搜索并没有返回你所追求的。仅仅为这个应用程序自己开发它可能需要付出很少的努力而获得很少的回报。

# php - 如何从 php webservice 获取许多 vars 到 iPhone 应用程序？

> ID：12220378
> 
> 赞同：0
> 
> 时间：2012-08-31T17:57:40.093
> 
> 标签：php, mysql, ios, web-services

我正在通过一个 PHP 脚本将我的应用程序与 MySQL 数据库链接，该脚本用于从我的 iPhone 应用程序发送和获取数据。

如果它只是一个变量，我可以通过 PHP 的响应字符串获取数据，但是如果你想从数据库中的表中获取许多元素，例如，你会怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T17:59:31.177

您可以使用由您确定的自定义格式，也可以使用主要的传输表示形式之一：JSON、XML 等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T18:02:31.213

从 PHP 脚本中获取所需的所有变量并将它们编码为 JSON 将是有效地将其引入 iPhone 应用程序的最佳解决方案。在 PHP 中，您将创建一个像这样的元素数组（您希望应用程序访问的所有变量）：

```
$array = array('var1' => 'value1', 'var2' => 'value2', 'var3' => 'value3'); 
```

然后我们将数组转换为 JSON：

```
$json = json_encode($array); 
```

然后我们可以通过您的 PHP 脚本返回该 $json 变量。将其引入您的 iOS 应用程序中，我建议您研究 JSONKit，因为它是您可用于此类任务的性能最佳的 JSON 第三方工具之一：

[https://github.com/johnezang/JSONKit](https://github.com/johnezang/JSONKit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T18:07:26.880

使一个变量包含大量数据，而不仅仅是一个简单的整数或字符串。返回到您的应用程序的任何内容都将以字符串的形式出现。HTTP 对该字符串的大小没有实际限制，因此请尽可能多地打包。

# nhibernate - 如何集成 ComponentMapping 与顺从映射？

> ID：12220382
> 
> 赞同：2
> 
> 时间：2012-08-31T17:57:49.173
> 
> 标签：nhibernate, mapping-by-code

我正在使用顺从映射开始一个新项目。我有一组常见的字段被拉到组件映射中，如下所示：

```
public class AuditTrailMap : ComponentMapping<AuditTrail>
{
    public AuditTrailMap()
    {
        Property(x => x.Created, xm => xm.NotNullable(true));
        Property(x => x.Updated, xm => xm.NotNullable(true));
        Property(x => x.UpdatedBy, xm => { xm.NotNullable(true); xm.Length(128); });
        Property(x => x.UpdatedBySID, xm => { xm.NotNullable(true); xm.Length(128); });
        Property(x => x.OnBehalfOf, xm => { xm.NotNullable(true); xm.Length(128); });
        Property(x => x.OnBehalfOfSID, xm => { xm.NotNullable(true); xm.Length(128); });
    }
} 
```

但是，在我的类映射中，似乎没有任何 Component 方法的重载可以接受其中之一，也没有神奇地被拾取。如何使用此映射？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:15:15.683

我将创建一个有助于映射组件的扩展方法：

```
public static class AuditTrailMapingExtensions
{
    public static void AuditTrailComponent<TEntity>(
        this PropertyContainerCustomizer<TEntity> container,
        Func<TEntity, AuditTrail> property)
    {
        container.Component(
            property,
            comp => 
            {
                    comp.Property(x => x.Created, xm => xm.NotNullable(true));
                    comp.Property(x => x.Updated, xm => xm.NotNullable(true));
                    comp.Property(x => x.UpdatedBy, xm => { xm.NotNullable(true); xm.Length(128); });
                    comp.Property(x => x.UpdatedBySID, xm => { xm.NotNullable(true); xm.Length(128); });
                    comp.Property(x => x.OnBehalfOf, xm => { xm.NotNullable(true); xm.Length(128); });
                    comp.Property(x => x.OnBehalfOfSID, xm => { xm.NotNullable(true); xm.Length(128); });
            });
    } 
```

然后像这样使用它：

```
class MyEntityDbMapping : ClassMapping<MyEntity>
{
    public MyEntityDbMapping ()
    {
        // ...
        this.AuditTrailComponent(x => x.AuditTrail);
    }
} 
```

这种帮助方法有一个很大的优势：您可以添加其他参数，例如有条件地设置非空约束。

# xml - 使用不是序列化的 xml 文件进行反序列化

> ID：12220383
> 
> 赞同：0
> 
> 时间：2012-08-31T17:57:50.020
> 
> 标签：xml, xml-serialization, linq-to-xml

我可以使用反序列化从不是由序列化生成的 xml 生成对象吗？

说，如果我有这样的 xml 文件

```
<Person>
  <Cop name ="n1" />
  <Cop name ="n2" />
</Person> 
```

我可以将其反序列化为具有 IEnumberable 的对象人员吗？还是我需要使用 IEnumerable 属性序列化 Object Person 然后反序列化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T09:50:15.803

当然你可以反序列化没有通过序列化生成的 XML，你只需要确保你生成或编写了正确的类结构，并带有合适的属性来匹配 XML 结构。而且我不确定 an`IEnumerable`是否可行，但可以使用`List<T>`or `T[]`。以下是带有 的示例`List<T>`：

```
 string xml = @"<Person>
  <Cop name =""n1"" />
  <Cop name =""n2"" />
</Person>";

            XmlSerializer ser = new XmlSerializer(typeof(Person));

            Person p1 = (Person)ser.Deserialize(new StringReader(xml));

            foreach (Cop cop in p1.Cops)
            {
                Console.WriteLine(cop.Name);
            }
        }
    }

    public class Person
    {
        [XmlElement(ElementName="Cop")]
        public List<Cop> Cops { get; set; }
    }

    public class Cop
    {
        [XmlAttribute(AttributeName="name")]
        public string Name { get; set; }
    } 
```

那输出

```
n1
n2 
```

# android - SoundPool 停止功能未停止

> ID：12220384
> 
> 赞同：3
> 
> 时间：2012-08-31T17:58:02.383
> 
> 标签：android, soundpool

我正在制作一个应用程序，您可以在其中选择 1 到 4 种不同的声音并同时播放它们。一切正常，直到我想停止声音，停止功能只能同时用于一种声音，这是代码（仅适用于声音池）

```
sound = new SoundPool(1, AudioManager.STREAM_MUSIC, 0);
        s1 = sound.load(Main.this, R.raw.mosq1, 1);
        s2 = sound.load(Main.this, R.raw.mosq2, 1);
        s3 = sound.load(Main.this, R.raw.mosq3, 1);
        s4 = sound.load(Main.this, R.raw.mosq4, 1);
.
.
.
.
        case R.id.play:
            if (l1==true){sound.play(s1, 1, 1, 0, rep, 1); if(vib==true) wibracja.vibrate(4500);}
            if (l2==true){sound.play(s2, 1, 1, 0, rep, 1); if(vib==true) wibracja.vibrate(6500);}
            if (l3==true){sound.play(s3, 1, 1, 0, rep, 1); if(vib==true) wibracja.vibrate(2500);}
            if (l4==true){sound.play(s4, 1, 1, 0, rep, 1); if(vib==true) wibracja.vibrate(4500);}
            break;
        case R.id.stop:
            sound.stop(s1);
            sound.stop(s2);
            sound.stop(s3);
            sound.stop(s4);
            wibracja.cancel();
            break; 
```

如何正确使用停止功能？感谢帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T20:21:06.013

对于第一次使用 soundpool 的人来说，这是一个常见问题。如果您仔细查看 soundpool 的文档，play 使用参数“soundID”，而 stop 使用参数“streamID”。很容易忽略这一点，并使用从 load 函数返回的 soundID 用于这两个命令，就像您的代码一样。我什至见过 android 教程示例弄错了。而是使用这些命令：

```
s1 = sound.load(Main.this, R.raw.mosq1, 1);  
if (l1==true){p1=sound.play(s1, 1, 1, 0, rep, 1);     
sound.stop(p1);// NOT s1 
```

# c# - 无法更改字段值

> ID：12220385
> 
> 赞同：0
> 
> 时间：2012-08-31T17:58:02.710
> 
> 标签：c#, xna, field

编辑：找到了。播放器构造函数中存在错误。我更改了我的游戏系统，所以它使用实体和图块的 ID。在此之前，我必须为所有事情做新的实例。我忘记将库存初始化从构造函数放到 PostInitialize() 所以它使用了不存在实体的空世界。谢谢你们。

* * *

我有个问题。我正在做一个 XNA 游戏，我需要更改实体的地图，以便它可以做到这一点，但我遇到了问题。方法接收不为空的参数映射，我将 entity.currentMap 设置为参数，但 currentMap 仍然为空。

```
public Entity getCopy(Vector2 po, Map.Map map)
    {
        Entity t = (Entity)this.MemberwiseClone();
        t.currentMap = map;
        t.Position = po;
        t.LoadTextures();
        t.PostInitialize();
        return t;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:05:41.810

首先，您说传入`map`时*肯定*不为null。因此，有两种可能性。

**一：** setter for`currentMap`不工作。要么发布与 setter 关联的代码，要么通过单步执行来确保它实际上正确地存储了值。确保在下一行，该值仍然存在。

**二：**该值在方法的其他地方丢失了。您确定`LoadTextures`和/或`PostInitialize`不清除`currentMap`变量吗？

# groovy - Jira Groovy Runner 要求用户输入

> ID：12220387
> 
> 赞同：1
> 
> 时间：2012-08-31T17:58:07.237
> 
> 标签：groovy, input, jira

我想知道是否有办法让 Jira Script Runner 允许某种形式的用户输入，无论是在输入文件位置然后添加输入时，即“C:/fakepath/myScript.groovy -my input”甚至最好让它创建一个输入框。

我问是因为我想创建一个脚本来根据用户输入创建一堆 jira 问题。我意识到我可以只创建一个字符串而不是用户输入，然后每次使用它时只需编辑代码，但如果我不必这样做会更有效率。如果 jira 中的 groovy 可以做这样的事情，那就太好了。

我尝试使用以下内容：

```
BufferedReader br = new BufferedReader(new InputStreamReader(System.in))
print "Input:"
def userInput = br.readLine()
println "You entered: $userInput" 
```

但它只是不断运行等待用户输入，但没有弹出窗口可以输入它。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T11:32:01.520

以下代码有效

```
println "Input:"

BufferedReader br = new BufferedReader(new InputStreamReader(System.in))
def userInput = br.readLine()
println "You entered: $userInput" 
```

我的猜测是您的程序正在等待输入，但由于缓冲，它没有打印消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-21T14:46:22.897

[http://www.emoticcode.net/groovy/console-input-read-in-groovy.html](http://www.emoticode.net/groovy/console-input-read-in-groovy.html)

```
System.in.withReader {
  println "Test: "
  carrier = it.readLine()
} 
```

# r - 将字符串值绘制到时间序列中

> ID：12220391
> 
> 赞同：0
> 
> 时间：2012-08-31T17:58:25.920
> 
> 标签：r

我只有一个包含日期、时间和字符串作为值的文件，我想在时间序列中绘制两个值 AOSL/AOSR。我想在图中看到值变化的不同时间。有什么办法吗？

```
2012/07/02 06:35:49.551 AOSL
2012/07/02 06:35:50.048 AOSR
2012/01/26 01:37:27.691 AOSR
2012/01/26 01:37:27.847 AOSL
2012/01/10 08:32:49.578 AOSR
2012/01/10 08:32:49.832 AOSL
2012/01/14 00:02:00.480 AOSL
2012/01/14 00:02:02.507 AOSL
2012/01/14 00:02:04.565 AOSL
2012/01/14 00:02:07.605 AOSL
2012/01/14 00:02:12.641 AOSL
2012/01/14 00:02:55.001 AOSR
2012/01/14 00:02:57.026 AOSR
2012/01/14 00:02:59.062 AOSR 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:21:45.950

1.  将您的数据扫描到数据框中（这是最繁琐的步骤）

    您可能希望使用 perl 或 sed 将其转换为 csv。

    `perl magic`

    `mydata=read.csv("mydata.csv")`

2.  将日期列转换为`as.POSIXct`

    `mydata$date=as.POSIXct(mydata$date)`

3.  绘制数据，使用 plot （或 ggplot 如下）

    `qplot(data=mydata,,color=type,x=date,y=type)`

顺便说一句，我绘制了它，它看起来很无聊 - 什么是 AOSL - 文件名或内容？

![在此处输入图像描述](../Images/4b0e34bd19811e918828aadc2ef7d7fc.png)

# java - 空指针异常错误ANDROID

> ID：12220398
> 
> 赞同：2
> 
> 时间：2012-08-31T17:58:45.580
> 
> 标签：java, android, oop

我为过滤器搜索栏创建了一个 onDestroy 方法，但遇到了一个小问题。

这是我的日志：

```
09-01 01:55:40.147: E/AndroidRuntime(1014): FATAL EXCEPTION: main
09-01 01:55:40.147: E/AndroidRuntime(1014): java.lang.RuntimeException: Unable to destroy activity {com.stts.sparetimetradingsystem/com.stts.sparetimetradingsystem.employer.HomepageEmployerActivity}: java.lang.NullPointerException
09-01 01:55:40.147: E/AndroidRuntime(1014):     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3655)
09-01 01:55:40.147: E/AndroidRuntime(1014):     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3673)
09-01 01:55:40.147: E/AndroidRuntime(1014):     at android.app.ActivityThread.access$2900(ActivityThread.java:125)
09-01 01:55:40.147: E/AndroidRuntime(1014):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2066)
09-01 01:55:40.147: E/AndroidRuntime(1014):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-01 01:55:40.147: E/AndroidRuntime(1014):     at android.os.Looper.loop(Looper.java:123)
09-01 01:55:40.147: E/AndroidRuntime(1014):     at android.app.ActivityThread.main(ActivityThread.java:4627)
09-01 01:55:40.147: E/AndroidRuntime(1014):     at java.lang.reflect.Method.invokeNative(Native Method)
09-01 01:55:40.147: E/AndroidRuntime(1014):     at java.lang.reflect.Method.invoke(Method.java:521)
09-01 01:55:40.147: E/AndroidRuntime(1014):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-01 01:55:40.147: E/AndroidRuntime(1014):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-01 01:55:40.147: E/AndroidRuntime(1014):     at dalvik.system.NativeStart.main(Native Method)
09-01 01:55:40.147: E/AndroidRuntime(1014): Caused by: java.lang.NullPointerException
09-01 01:55:40.147: E/AndroidRuntime(1014):     at com.stts.sparetimetradingsystem.employer.HomepageEmployerActivity.onDestroy(HomepageEmployerActivity.java:340)
09-01 01:55:40.147: E/AndroidRuntime(1014):     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3642)
09-01 01:55:40.147: E/AndroidRuntime(1014):     ... 11 more 
```

这是我的代码：

```
@Override
protected void onDestroy() {
    super.onDestroy();
    searchBarEmployer.removeTextChangedListener(filterTextWatcher); <--- LINE 340
} 
```

*** *编辑这是我的登录代码 在用户输入正确的凭据后将切换到主页。

```
public class LoginEmployerActivity extends Activity {
Button btnLoginEmployer;
Button btnLinkToEmployerRegisterScreen;
EditText inputEmail;
EditText inputPassword;
TextView loginErrorMsg;
TextView forgotPassword;

// JSON Response node names
private static String KEY_SUCCESS = "success";
private static String KEY_ERROR = "error";
private static String KEY_ERROR_MSG = "error_msg";
private static String KEY_UID = "uid";
private static String KEY_NAME = "name";
private static String KEY_CNAME = "cname";
private static String KEY_EMAIL = "email";
private static String KEY_CREATED_AT = "created_at";
private ProgressDialog pDialog;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login_employer);

    // Importing all assets like buttons, text fields
    inputEmail = (EditText) findViewById(R.id.loginEmployerEmail);
    inputPassword = (EditText) findViewById(R.id.loginEmployerPassword);
    btnLoginEmployer = (Button) findViewById(R.id.btnLoginEmployer);
    btnLinkToEmployerRegisterScreen = (Button) findViewById(R.id.btnLinkToEmployerRegisterScreen);
    loginErrorMsg = (TextView) findViewById(R.id.login_error);
    forgotPassword = (TextView) findViewById(R.id.link_to_forgetPassword);

    // Login button Click Event
    btnLoginEmployer.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            // Checking for server respond
                new LoginEmployer().execute();
            }
        }
    });

    // Link to Register Screen
    btnLinkToEmployerRegisterScreen
            .setOnClickListener(new View.OnClickListener() {

                public void onClick(View view) {
                    Intent i = new Intent(getApplicationContext(),
                            RegisterEmployerActivity.class);
                    startActivity(i);
                    finish();
                }
            });

    // Link to forgot password link
    forgotPassword.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            // Switching to forgot password screen
            Intent i = new Intent(getApplicationContext(),
                    ForgotPasswordEmployerActivity.class);
            startActivity(i);
        }
    });
}

// Background ASYNC Task to login by making HTTP Request
class LoginEmployer extends AsyncTask<String, String, String> {

    // Before starting background thread Show Progress Dialog
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(LoginEmployerActivity.this);
        pDialog.setMessage("Authenticating...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    // Checking login in background
    protected String doInBackground(String... params) {
        runOnUiThread(new Runnable() {
            public void run() {

                String email = inputEmail.getText().toString();
                String password = inputPassword.getText().toString();
                EmployerFunctions employerFunctions = new EmployerFunctions();
                JSONObject json = employerFunctions.loginUser(email,
                        password);

                // check for login response
                try {
                    if (json.getString(KEY_SUCCESS) != null) {
                        loginErrorMsg.setText("");
                        String res = json.getString(KEY_SUCCESS);
                        if (Integer.parseInt(res) == 1) {
                            // user successfully logged in
                            // Store user details in SQLite Database
                            DatabaseHandlerEmployer dbe = new DatabaseHandlerEmployer(
                                    getApplicationContext());
                            JSONObject json_user = json
                                    .getJSONObject("user");

                            // Clear all previous data in database
                            employerFunctions
                                    .logoutUser(getApplicationContext());
                            dbe.addUser(
                                    json_user.getString(KEY_NAME),
                                    //json_user.getString(KEY_CNAME),
                                    json_user.getString(KEY_EMAIL),
                                    json.getString(KEY_UID),
                                    json_user.getString(KEY_CREATED_AT));
                            // Launch Employer homePage Screen
                            Intent homepage = new Intent(
                                    getApplicationContext(),
                                    HomepageEmployerActivity.class);

                            // Close all views before launching Employer
                            // homePage
                            homepage.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                            startActivity(homepage);

                            // Close Login Screen
                            finish();
                        } else {
                            // Error in login
                            loginErrorMsg
                                    .setText("Invalid username/password");
                        }
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
        });
        return null;
    }

    // After completing background task Dismiss the progress dialog
    protected void onPostExecute(String file_url) {
        // dismiss the dialog once done
        pDialog.dismiss();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:05:19.340

确保您`searchBarEmployer`已正确初始化和引用。

```
EditText searchBarEmployer ; // outside onCreate, global to class 
```

在 onCreate() 内部，

```
searchBarEmployer = (EditText)findViewById(R.id.editTextIdInXML); 
```

还，

```
@Override
protected void onDestroy() {
    searchBarEmployer.removeTextChangedListener(filterTextWatcher);
    super.onDestroy();

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T18:02:34.627

你做错了。如果你重写`onCreate()`（或者一般来说，构造函数类似的方法），那么经验法则是调用`super.onCreate()` **FIRST**（初始化所有 stull 超类可能需要等）然后做你的事情。但是，如果您覆盖`onDestroy()`（或一般的析构函数类似方法），那么经验法则是按照您在`onCreate()`. 首先清除自己的东西，然后`super.onDestroy()`作为**最后**一件事调用。否则（就像您所做的那样）可能会导致许多问题，因为超类可以简单地清理许多东西（如内部变量、引用等），并且您的代码将简单地崩溃。像这样重新排列你的`onDestroy()`：

```
@Override
protected void onDestroy() {
    searchBarEmployer.removeTextChangedListener(filterTextWatcher);
    super.onDestroy();
} 
```

还有一个选项你`searchBarEmployer`只是空，所以这可能更安全：

```
@Override
protected void onDestroy() {
    if( searchBarEmployer != null ) {
      searchBarEmployer.removeTextChangedListener(filterTextWatcher);
    }
    super.onDestroy();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T18:04:38.073

请放置一个调试点并确保它`searchBarEmployer`不为空。

如果是`null`由于之前执行的某些步骤，请在此语句之前放置一个空检查。

```
if( searchBarEmployer != null ) {
// Place operation here...
} 
```

你也应该搬家

```
super.onDestroy(); 
```

作为方法的最后一个语句。

**编辑** 我的意思是...

```
@Override
protected void onDestroy() {
    if( searchBarEmployer != null ) {    // <---- PLACE NULL CHECK
      searchBarEmployer.removeTextChangedListener(filterTextWatcher);
    }
    super.onDestroy();  // <--- LAST STATEMENT
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T18:08:54.100

如有必要，请初始化 searchBarEmployer。就像如果 searchBarEmployer 是一个文本视图，将其声明为顶部，然后执行 searchBarEmployer=(TextView)findViewById(R.id....); 等等然后使用它。

避免使用 TextView searchBarEmployer=null; 种方法。

# java - 尝试在 JAVA 中创建 ZipFile 时出现 java.util.zip.ZipException？

> ID：12220400
> 
> 赞同：0
> 
> 时间：2012-08-31T17:59:22.827
> 
> 标签：java, zip, zipfile

我收到此错误：

```
java.util.zip.ZipException: invalid CEN header (bad signature) 
```

而且我不太确定是什么问题，当我在谷歌搜索`CEN`标题时没有找到任何有用的东西。

任何帮助表示赞赏，谢谢。

这是代码，它在最后一行失败：

```
ZipFile resourceZip = null;
if (pir.getSource().endsWith("Resources.zip")) 
{
    File temp = new File( "C:\\Users\\nbonnet\\Desktop\\new\\Resources1.zip");
    byte[] bytesFromClob = ClobHelper.bytesFromClob(pir.getContents(),"latin1");
    FileOutputStream out = new FileOutputStream(temp);
    out.write(bytesFromClob);
    out.flush();
    out.close();
    resourceZip = new ZipFile(temp);  // <-- Code fails here
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T18:33:48.627

您正在将文件作为常规（非 ZIP）文件写入，然后尝试将其作为 ZIP 文件读回。那是行不通的。你需要用`ZipOutputStream`.

看看[这个例子](http://www.exampledepot.com/egs/java.util.zip/CreateZip.html)或[这个](http://www.java-tips.org/java-se-tips/java.util.zip/how-to-write-zip-file.html)。

# css - 展开一列以填充没有固定宽度的空内容？

> ID：12220410
> 
> 赞同：1
> 
> 时间：2012-08-31T18:00:14.147
> 
> 标签：css

我有一个场景，我一直试图通过任何可能的方式来弄清楚，无论是 html 表/浮点数/显示：表。我有一个 3 列行，我希望外列将内容包裹在里面，中间列展开以填充所有空白空间。

但是我正在寻找一个没有固定宽度的解决方案，因为这个对象将被嵌套多次，在这种情况下整体宽度会缩小。在三列中，我总是知道最右边一列的宽度，如果这很重要的话。

这是我想要做的事情的小提琴：

[http://jsfiddle.net/gHUxy/2/](http://jsfiddle.net/gHUxy/2/)

我知道 flexbox 看起来像是为这些东西而制作的，但它还不够广泛，我无法使用它。甚至可能吗？

编辑 - 我不需要支持 ie6/7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:31:55.247

您可以尝试将`width`不是“中间”列的**列**设置为`1px`. 这将迫使他们只扩展直到他们适合他们的内容。这是一个示例，HTML：

```
<table class = "main">
    <tr><td class = "notmid">Glee Glee Glee Glee Glee Glee</td><td>is</td><td class = "notmid">awesome!</td></tr>
</table> 
```

CSS：

```
html, body {
    width: 100%;
}
.main {
    width: 100%;
}
.main .notmid {
    width: 1px;
    white-space: nowrap;
} 
```

还有一个小演示：[小链接](http://jsfiddle.net/glee/KJKeF/1/)。

希望以任何方式有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T18:37:40.213

您可以使用 jQuery 来实现它。请包含最新的 jQuery 库。

```
<html>
<head>
  <style type="text/css">
    section {
      display:table;
      width: 100%;
      border:1px solid red;
    }

    div {
      display: table-cell;         
    }

    .leader {
      background: grey;
    }

    .right{
      float: right;   
    }
    .left {
      float:left;
    }
  </style>
  <script type="text/javascript">
    $(document).ready(function() {
      $(".leader").width($("section").width() - ($(".left").width() +$(".right").width()));
    });
  </script>
</head>
<body>
<section>
    <div class="left">
         Variable wrappable content
    </div>            
    <div class="leader">
        <!--empty space-->
    </div>            
    <div class="right">
        <!--fixed length-->
       Date
    </div>
</section>
</body>
</html> 
```

# java - JTable中多行单元格的背景

> ID：12220413
> 
> 赞同：1
> 
> 时间：2012-08-31T18:00:24.557
> 
> 标签：java, swing, jtable, nimbus

我用多行单元格制作了一个表格，效果很好，但是我想在制作特定的列多行单元格后更改单行的颜色，而不是整个列的颜色。我怎样才能做到这一点？

这是制作第 2 列多行单元格后的图像，但整个列变成白色 ![在此处输入图像描述](../Images/cc15834d1ac0742eac44d5c6236250e5.png)

这就是我所做的：

```
jTable1.getColumnModel().getColumn(1).setCellRenderer( new TextAreaRenderer2()); 

String test = "sunday \n monday ";

jTable1.getModel().setValueAt(test, 0, 3);
jTable1.getModel().setValueAt(test, 0, 1);
jTable1.getModel().setValueAt(test, 0, 2); 
```

这是 TextAreaRenderer2 类：

```
public class TextAreaRenderer2 extends JTextArea
     implements TableCellRenderer {

     public TextAreaRenderer2() {

         Font font = new Font("Aparajita", Font.BOLD + Font.ITALIC, 16);

         setLineWrap(true);
         setWrapStyleWord(true);
         setBackground(Color.yellow);
         setBorder(BorderFactory.createEmptyBorder());
         setFont(font);

     } 

     @Override
     public Component getTableCellRendererComponent(JTable jTable,
          Object obj, boolean isSelected, boolean hasFocus, int row,
          int column) {

         setText((String)obj);
         setBackground(Color.WHITE);

         return this;
     }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:05:33.360

在您的`TableAreaRenderer2`课程中，`getTableCellRendererComponent`您应该在方法中根据行设置背景颜色。像这样的东西：

```
if (row % 6 < 3) {
  setBackground(Color.LIGHT_GRAY);
} else {
  setBackground(Color.WHITE);
} 
```

上面的代码将使 3 行浅灰色变成下 3 行白色，并重复相同的模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T15:13:41.530

这原来是这些**问题**之一：

*   认为这是一个很好的问题来演示如何在自定义渲染器中获得正确的依赖于状态的视觉属性
*   实施和测试一个简单的例子
*   没有按预期工作
*   启动调试会话

... 几个小时后 .. 对某些 Nimbus 的特殊性感到厌恶。

从正确的事情开始：在您的自定义渲染器（任何类型）中，引用表格的默认渲染器并使用默认属性配置自定义渲染组件。这样，您将自定义渲染组件看起来与默认组件（已选择、条带化、焦点...）相同，但您希望显式不同的状态除外

```
public static class TextAreaRenderer2 extends JTextArea implements
        TableCellRenderer {

    private TableCellRenderer delegate;

    public TextAreaRenderer2(TableCellRenderer delegate) {
        this.delegate = delegate;
        // initial config
        Font font = new Font("Aparajita", Font.BOLD + Font.ITALIC, 16);
        setFont(font);
        setLineWrap(true);
        setWrapStyleWord(true);
    }

    @Override
    public Component getTableCellRendererComponent(JTable table,
            Object value, boolean isSelected, boolean hasFocus, int row,
            int column) {
        // configure content
        setText((String) value);
        // get a configured component from the delegate
        Component comp = delegate.getTableCellRendererComponent(table, 
                value, isSelected, hasFocus, row, column);
        // configure myself as appropriate
        setBackground(comp.getBackground());
        setForeground(comp.getForeground());
        setBorder(((JComponent) comp).getBorder());
        return this;
    }
} 
```

这在每个核心 LAF 中看起来都不错……除了 Nimbus：我们在行中的区域周围有一个小的白色边框，带有备用颜色。乍一看似乎是一个不透明度缺陷，哦，是的 - 忘记明确将不透明度设置为 true

```
// initial config
...
setOpaque = true; 
```

现在我们在正常颜色的行中的区域周围有一个小的黑色边框。奇怪的是，黑暗是*视口*的颜色- ？

在一天结束时（跳过几个小时:-) 事实证明 Nimbus 中的 textArea 有一个特殊的 ui 状态 NOTINSCROLLPANE。在那种状态下，TextAreaPainter 填充了一个减少了大约 2px 插图的区域（不知道为什么）。当不用于渲染时，将 opacity 设置为 true 足以使其填充整个区域。当用于渲染时，除了...将其添加到 JViewport（从而伪造状态）并将视口作为渲染组件返回（不知道为什么会有这种差异）之外，没有任何帮助。

```
public static class TextAreaRenderer2 extends JTextArea implements
        TableCellRenderer {

    private TableCellRenderer delegate;
    JComponent parent;
    public TextAreaRenderer2(TableCellRenderer delegate) {
        this.delegate = delegate;
        // initial config
        Font font = new Font("Aparajita", Font.BOLD + Font.ITALIC, 16);
        setFont(font);
        setLineWrap(true);
        setWrapStyleWord(true);
        parent = new JViewport();
        parent.add(this);
    }

    @Override
    public Component getTableCellRendererComponent(JTable table,
            Object value, boolean isSelected, boolean hasFocus, int row,
            int column) {
        // configure content
        setText((String) value);
        // get a configured component from the delegate
        Component comp = delegate.getTableCellRendererComponent(table, 
                value, isSelected, hasFocus, row, column);
        // configure myself as appropriate
        setBackground(comp.getBackground());
        setForeground(comp.getForeground());
        setBorder(((JComponent) comp).getBorder());
        // return the viewport we are added to
        return parent;
    }
} 
```

# c# - 在 if 语句条件中使用 new 运算符是个坏主意？

> ID：12220414
> 
> 赞同：2
> 
> 时间：2012-08-31T18:00:25.753
> 
> 标签：c#

```
if (!someList.Contains(new listItem(arg1, args2)))
{
    // Do some stuff
} 
```

对于上面的代码段，`someList`是一个结构体列表，`listItem`是结构体。

在这种情况下使用 new 运算符会导致内存泄漏吗？或者这是一般不良做法的一个例子？我在 SO 和 Google 上进行了搜索，但找不到专门解决此问题的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T18:10:53.357

您必须非常努力地在 C# 中创建内存泄漏。这是*可能*的，但它意外发生的情况并不多（除了与没有如此简单的内存管理的其他语言进行互操作时）。不过，我不会在这里讨论边缘情况。

以下是该对象的内存外观：

*   将在保存您显示的代码的任何方法中创建一个局部变量。由于您没有将新结构显式设置为局部变量，因此它将具有一些无法在代码中引用的名称。
*   它将通过堆栈传递给您调用的方法。（它将按值传递，因此此时将有两个具有相同结构的变量）。
*   当`Contains`返回它的调用堆栈上的参数将被“释放”，所以我们现在回到只有一个变量。
*   当您当前使用的方法完成时（或者可能更早一点，如果编译器想要优化它，知道它不再使用），结构的堆栈空间将被“释放”

即使`new`使用了关键字，也不会在堆上创建结构。它仍然在堆栈上创建。在 C#`new`中显式调用任何构造函数时使用（禁止反射）并且不指示堆上的分配（它在 C++ 中的方式）。

还值得一提的是，即使这是一个类而不是结构，也不会导致任何内存泄漏。该对象最终会在堆上，但垃圾收集器会在不再需要它之后的某个时候清理它。您在这里没有做任何会导致在不需要对象时保留对对象的引用的事情（而且我知道这`Contains`不会做任何会阻止它被收集的恶作剧；如果它是一些未知的功能，它就是可能但不太可能他们会做一些有意义的事情）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T18:18:37.540

这与结构有关并不少见。例如，在使用`DateTime`s 时，说起来更易读：

```
if (fooDate == new DateTime(2000, 1, 30, 11, 30, 0)) 
```

比

```
if (fooDate.Year = 2000 && fooDate.Month = 1 && fooDate.Day = 30 && ...) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T18:05:12.053

这不是内存泄漏，我也没有必要称之为坏风格（它在 MSDN[示例用法](http://msdn.microsoft.com/en-us/library/bhkz42b3)中使用）

但可能不是我会这样做 - 我会做类似的事情：

```
if (!someList.Any(o => o.Arg1 == arg1 && o.Arg2 == arg2)) 
{ 
    // Do some stuff 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T18:02:30.257

这是可读性的问题。我发现像你展示的那样完成后更难阅读我更喜欢单独声明列表

性能或内存泄漏没有差异

此外，当您单独声明一个列表时，您可以给您的列表一个有意义的名称

例如 var listOfDays = 新列表.....

# ruby - Ruby中的循环函数可以多次编写

> ID：12220425
> 
> 赞同：1
> 
> 时间：2012-08-31T18:00:54.233
> 
> 标签：ruby, loops

我的任务是创建一个服务器监视器，以标准时间间隔测试系统，如果超出某个级别，程序将向用户发送一封电子邮件。除了发送电子邮件外，它还将创建一个文件，该文件将显示每 60 秒的负载平均值。我似乎无法让循环每次都写入新行，它只是一遍又一遍地覆盖第一行。我错过了什么？

```
require 'fileutils'

def LoadAvg()
  return `cat /proc/loadavg | awk '{print $1" "$2" "$3}'`
end

def Timer()
  servername = `uname -n`.strip
  t = Time.now
  taber = t.strftime("%m-%d-%Y-%T")
  filename = "#{servername}_Systemcheck_#{taber}.txt"
  FileUtils.touch(filename)

while(true)
  File.open(filename, 'w') { |x|
    x.puts "#{t.strftime("%I:%M:%S %p")} - #{LoadAvg()}"
    puts LoadAvg()
    sleep(60)
  }
 end
end

Timer() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T18:06:21.550

如果你想追加到文件使用`a`而不是`w`.

无关：使用 Monit、God 或 Bluepill！

# java - SWT - 表格/组合框

> ID：12220427
> 
> 赞同：2
> 
> 时间：2012-08-31T18:01:03.763
> 
> 标签：java, swt

如何将组合框添加到表中的特定列？
我希望我的最后一列有一个包含 3 个选项（是、否、两者）的组合框。我将包含我的表格代码，以便您更好地向我展示新代码的运行方式和方式。

```
 //////////////////////////////////////////////////////////////////////////
//                         createTableViewer()                          //
//////////////////////////////////////////////////////////////////////////
private TableViewer createTableViewer(Composite parent) {
  viewer = new TableViewer(parent, SWT.MULTI | SWT.H_SCROLL | SWT.V_SCROLL | SWT.FULL_SELECTION | SWT.BORDER);
  createColumns(parent, viewer);
  Table table = viewer.getTable();
  table.setHeaderVisible(true);
  table.setLinesVisible(true);

  // Layout the viewer
  GridData gridData = new GridData(SWT.FILL, SWT.FILL, true, true);
  viewer.setContentProvider(new ArrayContentProvider());
  viewer.setInput(AplotDataModel.getInstance().getArrayData());
  viewer.getControl().setLayoutData(gridData);
  return viewer;
}

//////////////////////////////////////////////////////////////////////////
//                         createColumns()                              //
//////////////////////////////////////////////////////////////////////////
private void createColumns(final Composite parent, final TableViewer viewer) {
  String[] titles = { "ItemId", "RevId", "PRL", "Dataset Name", "EC Markup" };
  int[] bounds = { 150, 150, 100, 150, 100 };

  TableViewerColumn col = createTableViewerColumn(titles[0], bounds[0], 0);
  col.setLabelProvider(new ColumnLabelProvider() {
     @Override
     public String getText(Object element) {
        AplotDatasetData item = (AplotDatasetData) element;
        return item.getDataset().toString();
     }
  });

  col = createTableViewerColumn(titles[1], bounds[1], 1);
  col.setLabelProvider(new ColumnLabelProvider() {
     @Override
     public String getText(Object element) {
        AplotDatasetData item = (AplotDatasetData) element;
        return item.getRev().toString();
     }
  });

  col = createTableViewerColumn(titles[2], bounds[2], 2);
  col.setLabelProvider(new ColumnLabelProvider() {
     @Override
     public String getText(Object element) {
        AplotDatasetData item = (AplotDatasetData) element;
        return item.getPRLValue();
     }
  });

  col = createTableViewerColumn(titles[3], bounds[3], 3);
  col.setLabelProvider(new ColumnLabelProvider() {
     @Override
     public String getText(Object element) {
        AplotDatasetData item = (AplotDatasetData) element;
        return item.getDatasetName();
     }
  });

  col = createTableViewerColumn(titles[4], bounds[4], 4);
  col.setLabelProvider(new ColumnLabelProvider() {
     @Override
     public String getText(Object element) {
        AplotDatasetData item = (AplotDatasetData) element;
        return item.getECMarkupValue();
     }
  });
}

//////////////////////////////////////////////////////////////////////////
//                       createTableViewerColumn()                      //
//////////////////////////////////////////////////////////////////////////
private TableViewerColumn createTableViewerColumn(String title, int bound, final int colNumber) {
  final TableViewerColumn viewerColumn = new TableViewerColumn(viewer, SWT.NONE);
  final TableColumn column = viewerColumn.getColumn();
  column.setText(title);
  column.setWidth(bound);
  column.setResizable(true);
  column.setMoveable(true);
  return viewerColumn;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T19:13:36.657

[这里](http://www.vogella.com/articles/EclipseJFaceTableAdvanced/article.html)和[这里](http://www.subshell.com/en/subshell/blog/Eclipse-RCP-Comboboxes-inside-a-JFace-TableViewer100.html)都有很好的例子。

两者都`ComboBoxViewerCellEditor`在 中使用`EditingSupport`以将`Combo`框提供为表内编辑。

# android - 将我的 ActionBar 放在底部

> ID：12220428
> 
> 赞同：7
> 
> 时间：2012-08-31T18:01:04.230
> 
> 标签：android, xml, android-actionbar

我遵循了有关在我的应用程序中获取操作栏的教程。但即使我放入`android:uiOptions="splitActionBarWhenNarrow"`我的清单文件，它仍然保持在顶部。有人对如何处理此代码有任何想法吗？

**XML:**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:orientation="vertical"
android:background="#f0f0f0" 
android:baselineAligned="false">

<LinearLayout 
    android:id="@+id/myFragments"
    android:layout_width="match_parent"
    android:layout_height="0dp">

</LinearLayout>

</LinearLayout> 
```

**清单文件：**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.alotoftesting"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" 
        android:uiOptions="splitActionBarWhenNarrow">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-12-31T12:32:17.543

根据此评论：

> ActionBar 中有多少个菜单项？如果您的菜单项不适合顶部，则 splitActionBarWhenNarrow 选项基本上允许溢出到底部的第二个“拆分”操作栏。如果您的所有菜单项都位于顶部，您将看不到拆分布局。

如果您想要自定义底部工具栏，请查看我对这个问题的回答（在下面添加）：

> # 创建自定义底部工具栏
> 
> 我已经创建了一个简单的应用程序，它应该向您展示如何开始
> 
> ![](../Images/47a4f0dbc2b929bda5fe6d8382666c38.png) ![](../Images/d3c7f6d8e6616ff71b253d40d056922b.png)
> 
> ### 创建自定义视图组
> 
> 这是我的`activity_main.xml`布局文件：
> 
> ```
> <?xml version="1.0" encoding="utf-8"?>
> <RelativeLayout
>     xmlns:android="http://schemas.android.com/apk/res/android"
>     xmlns:tools="http://schemas.android.com/tools"
>     android:layout_width="match_parent"
>     android:layout_height="match_parent"
>     android:padding="0dp"
>     tools:context="com.example.piotr.myapplication.MainActivity">
> 
>     <LinearLayout
>         android:id="@+id/show_pdf"
>         android:layout_width="match_parent"
>         android:layout_height="40dp"
>         android:layout_alignParentBottom="true"
>         android:layout_centerHorizontal="true"
>         android:background="@color/primary_material_light"
>         android:orientation="horizontal">
> 
>         <ImageButton
>             android:layout_width="wrap_content"
>             android:layout_height="wrap_content"
>             android:layout_weight="1"
>             android:src="@drawable/abc_ic_menu_cut_mtrl_alpha"/>
> 
>         <ImageButton
>             android:layout_width="wrap_content"
>             android:layout_height="wrap_content"
>             android:layout_weight="1"
>             android:src="@drawable/abc_ic_menu_copy_mtrl_am_alpha"/>
> 
>         <ImageButton
>             android:layout_width="wrap_content"
>             android:layout_height="wrap_content"
>             android:layout_weight="1"
>             android:src="@drawable/abc_ic_menu_selectall_mtrl_alpha"/>
> 
>         <ImageButton
>             android:layout_width="wrap_content"
>             android:layout_height="wrap_content"
>             android:layout_weight="1"
>             android:src="@drawable/abc_ic_menu_paste_mtrl_am_alpha"/>
> 
>         <ImageButton
>             android:layout_width="wrap_content"
>             android:layout_height="wrap_content"
>             android:layout_weight="1"
>             android:src="@drawable/abc_ic_menu_share_mtrl_alpha"/>
> 
>         <ImageButton
>             android:layout_width="wrap_content"
>             android:layout_height="wrap_content"
>             android:layout_weight="1"
>             android:src="@drawable/abc_ic_menu_selectall_mtrl_alpha"/>
> 
>         <ImageButton
>             android:layout_width="wrap_content"
>             android:layout_height="wrap_content"
>             android:layout_weight="1"
>             android:src="@drawable/abc_ic_menu_moreoverflow_mtrl_alpha"/>
>     </LinearLayout>
> 
>     <EditText
>         android:id="@+id/editText"
>         android:layout_width="wrap_content"
>         android:layout_height="wrap_content"
>         android:layout_alignParentTop="true"
>         android:layout_centerHorizontal="true"
>         android:layout_marginTop="75dp"
>         android:ems="10"
>         android:inputType="textPersonName"
>         android:text="Name"/>
> </RelativeLayout> 
> ```
> 
> 如您所见，我的父母`ViewGroup`是`RelativeLayout`，它只允许我在屏幕底部创建一个视图。
> 
> 请注意，我将布局填充设置为零（我认为：这里没有必要将布局边距设置为零，效果相同）。如果您更改它，工具栏将不会使用全宽，也不会粘在屏幕底部。
> 
> 然后我添加了一个带有硬编码高度的线性布局，即：
> 
> ```
>  android:layout_height="40dp" 
> ```
> 
> 我想要它，我的底部工具栏将占用完整的可用宽度，因此我将其设置为`match_parent`.
> 
> 接下来，我添加了一些`ImageButton`带有来自 Android 库的图像的视图。
> 
> 你有两种可能：
> 
> *   如果您真的想要像上面示例中那样的工具栏，只需在每个`ImageButton`视图中删除此行：
>     
>     
>     
>     ```
>      android:layout_weight="1" 
>     ```
>     
>     
> 
> 删除权重和一些按钮后，您将获得与预期非常相似的视图：
> 
> ![](../Images/6e859c6ce4e3dbd0b6f8bbe0b534bda2.png)
> 
> *   如果您想获取整个宽度并使每个按钮在您的项目中使用相同大小，`weight`就像在这个我的示例中一样。
> 
> 现在让我们转到我的**AndroidManifest.xml**
> 
> ```
> <?xml version="1.0" encoding="utf-8"?>
> <manifest package="com.example.piotr.myapplication"
>           xmlns:android="http://schemas.android.com/apk/res/android">
> 
>     <application
>         android:allowBackup="true"
>         android:icon="@mipmap/ic_launcher"
>         android:label="@string/app_name"
>         android:supportsRtl="true"
>         android:theme="@style/AppTheme">
>         <activity
>             android:name=".MainActivity"
>             android:windowSoftInputMode="stateVisible|adjustResize">
>             <intent-filter>
>                 <action android:name="android.intent.action.MAIN"/>
> 
>                 <category android:name="android.intent.category.LAUNCHER"/>
>             </intent-filter>
>         </activity>
>     </application>
> </manifest> 
> ```
> 
> 在我添加的那个文件中，你只能看到一行：
> 
> ```
>  android:windowSoftInputMode="stateVisible|adjustResize"> 
> ```
> 
> 确保设备键盘不会隐藏我的自定义底部工具栏。
> 
> 来自：[如何将底部菜单添加到 Android 活动](https://stackoverflow.com/questions/34311601/how-to-add-a-bottom-menu-to-android-activity/34422850#34422850)

我认为如果需要，您也可以通过这种方式将标签放在底部。

如果您有任何问题，请随时提问。

希望有帮助

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T18:37:47.433

谷歌默认操作栏无论如何都不会出现在底部。正如其他人所提到的，当设备很窄时，`splitActionBarWhenNarrow`只将您的一部分`ActionBar`（如标签等）放在屏幕底部。不幸的是，如果你想在屏幕底部实现一个类似 ActionBar 的界面，你必须自己实现它（[快速搜索找到这个例子](http://android-ed.blogspot.com/2011/12/using-actionbar-at-bottom-of-screen.html)），因为我还没有看到任何图书馆为你做这件事。

不过，总而言之，我建议不要这样做，因为它违反了设计文档中的[无缝设计原则](http://developer.android.com/guide/practices/seamlessness.html)，因为它打破了用户对 ActionBar 类型控件的位置的期望——理想情况下，Android 用户习惯于以某种方式做事，你会需要一个非常有说服力的理由来打破这种期望。

# wso2 - 使用 wso2 stratos 作为 openid 消费者时出错

> ID：12220431
> 
> 赞同：0
> 
> 时间：2012-08-31T18:01:12.197
> 
> 标签：wso2, wso2carbon

我正在尝试在我的本地实例中使用 openid 登录 wso2 stratos 1.5.1 Identity Server

cloud-test.wso2.com:9443/carbon/relyingparty/index.jsp

无论我输入的 openid url 是什么，我都会收到以下错误：

```
Error! Relying Party initialization failed 
```

**更新：**

使用 wso2 Identity server 3.2.3 的独立实例，我可以通过 openid ../carbon/relyingparty/index.jsp 完成登录过程

另请注意，双向身份验证也不适用于身份服务器的 Stratos 版本。

斯特拉托斯怎么了？导致这两个服务失败的区别是什么？

这里可能是什么问题？

**第二次更新：**

我发现了一个可能相关但不确定的 jira 问题，位于

[https://wso2.org/jira/browse/CARBON-11757?page=com.atlassian.streams.streams-jira-plugin%3Aactivity-stream-issue-tab](https://wso2.org/jira/browse/CARBON-11757?page=com.atlassian.streams.streams-jira-plugin%3aactivity-stream-issue-tab)

这告诉我，也许stratos坏了，不会被修复？

**在尝试让消费者与提供者合作（两个 wso2 独立身份服务器）的过程中，我尝试了以下操作：**

我现在运行第二个独立身份服务器，而不是 Stratos IS。我可以使用 /carbon/relyingparty/index.jsp 来访问诸如 yahoo openid 和 myopenid url 之类的地方。但是，当我尝试连接到 Identity Server 的提供者实例时，出现以下错误：

```
Invalid openid2.provider URL 
```

有人知道为什么会发生此错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T17:18:31.303

我能够进行更多实验并在以下位置提出另一个问题

[wso2 身份服务器多因素身份验证错误](https://stackoverflow.com/questions/13143776/wso2-identity-server-multifactor-authentication-error)

得出一个解决方案。

问题是用于向 gtalk 进行身份验证的默认凭据不正确。用你自己的更新来完成这项工作。

# .htaccess - Zend 没有 virtualHost（重定向规则）

> ID：12220434
> 
> 赞同：0
> 
> 时间：2012-08-31T18:01:38.000
> 
> 标签：.htaccess, zend-framework, redirect, virtualhost, woff

对于我使用的每个测试环境，我已经阅读了几个尝试直接从 htdocs（不创建虚拟服务器）使用 ZendFramework 的地方。这是一个开发环境，所以我不关心安全问题，也不想每次都修改hosts文件。我使用 xampp 1.7.3 在 Windows 上工作

我重新创建了 zend 结构，但在 htdocs 的文件夹中。比方说：C:\xampp\htdocs\project

到目前为止，我在项目根目录中找到了使用以下 .htaccess 的解决方案

```
RewriteEngine On
RewriteRule ^(.*)$ public/$1?%{QUERY_STRING} [QSA,L] 
```

在 C:\xampp\htdocs\project\public 我使用默认的 Zend .htaccess

```
SetEnv APPLICATION_ENV development
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

在我的布局中，我添加了`base`标签来重定向 img、css 和 js 链接。当我尝试将 css 字体包含到我的项目（woff 文件）中时，我的问题出现了，该字体已被重定向到 htaccess 规则中的任何位置，导致 400 错误代码。

所以我的问题是：这里有什么问题？如何重定向每个控制器（php文件）但没有任何其他现有文件

顺便说一句......我无法找到让我自己工作的 htaccess 文件的方法。我总是发现自己在寻求帮助:(

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:16:51.810

解决您的问题的最简单方法是像这样构造您的文件：

*   将`public/`文件夹（index.php、.htaccess）的内容放入`C:\xampp\htdocs\project`. 您将*没有*公用文件夹。对于此应用程序的目的，`project/` *是*您的公用文件夹。
*   将`application/`文件夹放入`C:\xampp\htdocs`.
*   为了额外的安全性，添加一个`.htaccess`包含`Deny from all`在`application/`文件夹中的文件，因为它不在文档根目录之外。

这应该允许您使用现有的 ZF .htaccess 规则，并且不需要您使用任何 RewriteBase 或基本 URL 来加载您的 CSS/JS 文件。

只需确保您想要在布局或视图中引用 URL 的任何地方都可以使用`baseUrl`帮助程序（例如`<img src="<?php echo $this->baseUrl('images/foo.png') ?>" />`）

# python - 已创建 Django 数据库表但无法从中导入模型

> ID：12220437
> 
> 赞同：0
> 
> 时间：2012-08-31T18:01:49.153
> 
> 标签：python, django, apache

我在 CentOS 上配置 django。我用命令做了一个项目 `django-admin.py startproject mysite`

然后我使用 commad 制作了一个应用程序

```
python manage.py startapp polls 
```

在模型中，我有两个类，下面给出了代码，我取自 dajgo 的官方网站

```
from django.db import models

class Poll(models.Model):
    question = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')

class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    choice_text = models.CharField(max_length=200)
    votes = models.IntegerField() 
```

我将 django.wsgi 放在 /var/www 文件夹中。它的代码是

```
import os, sys
sys.path.append('/var/www/')
os.environ['DJANGO_SETTINGS_MODULE'] = 'mysite.settings'
import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

我还将 mysite 目录放在 /var/www/ 文件夹中，但无济于事

现在当我尝试在 python 中导入模型时

```
from polls import Poll, Choice 
```

它给出错误，例如

```
 File "<stdin>", line 1, in <module>
    File "polls/models.py", line 1, in <module>
    from django.db import models 
```

有谁知道是什么问题？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:06:32.673

1.编辑您的导入语句，如下所示：

```
from polls.models import Poll, Choice 
```

2.开心。

# django - 如何通过 POST 到 Amazon S3 绕过 CRFMIDDLEWARE 错误？

> ID：12220439
> 
> 赞同：0
> 
> 时间：2012-08-31T18:01:50.943
> 
> 标签：django, upload, amazon-s3, amazon-web-services, csrf

我在使用 POST 执行直接上传到 S3 时遇到问题（使用 csrf）。

这是代码：

```
<form action="https://mymediaurl/" method="post" enctype="multipart/form-data">
    <input type="hidden" name="key" value="uploads/${filename}">
    <input type="hidden" name="AWSAccessKeyId" value="{{ access_key }}">
    <input type="hidden" name="acl" value="private">
    <input type="hidden" name="success_action_redirect" value="http://localhost/">
    <input type="hidden" name="policy" value="{{ policy }}">
    <input type="hidden" name="signature" value="{{ signature }}">
    <input type="hidden" name="Content-Type" value="image/jpeg">
    <!-- Include any additional input fields here -->

    File to upload to S3:
    <input name="file" type="file">
    <br>
    <input type="submit" value="Upload File to S3">
</form> 
```

这是错误：

```
<Code>AccessDenied</Code>
<Message>
    Invalid according to Policy: Extra input fields: csrfmiddlewaretoken
</Message> 
```

包含 csfr 的源代码：

```
<form action="https://mymediaurl/" method="post" enctype="multipart/form-data">
    <div style='display:none;'><input type='hidden' id='csrfmiddlewaretoken' name='csrfmiddlewaretoken' value='123412341234' /></div>
    <div style='display:none;'><input type='hidden' id='csrfmiddlewaretoken' name='csrfmiddlewaretoken' value='123412341234' /></div>
    <input type="hidden" name="key" value="uploads/${filename}">
    <input type="hidden" name="AWSAccessKeyId" value="ASFDFDSF">
    <input type="hidden" name="acl" value="private">
    <input type="hidden" name="success_action_redirect" value="http://localhost/">
    <input type="hidden" name="policy" value="asdhfkajewhlfawe">
    <input type="hidden" name="signature" value="asdfasdfasdf">
    <input type="hidden" name="Content-Type" value="image/jpeg">
    <!-- Include any additional input fields here -->

    File to upload to S3:
    <input name="file" type="file">
    <br>
    <input type="submit" value="Upload File to S3">
</form> 
```

我尝试将 csrfmiddlewaretoken 添加到我的策略文档中，但这不起作用。有没有人遇到过这个问题并找到了解决方案？我搜索了高低，但似乎无法找到这个特定问题的答案。

如果重要的话，为这个项目运行 Django 1.3.1..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:16:45.170

在克里斯托弗的评论的帮助下回答我自己的问题。

这是我的政策文件：

```
{"expiration": "2014-01-01T00:00:00Z",
"conditions": [
    {"bucket": "media.somehost.com"},
    ["starts-with", "$key", "uploads/"],
    ["starts-with", "$csrfmiddlewaretoken", ""],
    {"acl": "private"},
    {"success_action_redirect": "http://localhost/"},
    ["starts-with", "$Content-Type", ""],
    ["content-length-range", 0, 1048576]
] 
```

我只需要以`csrfmiddlewaretoken`正确的格式将其添加到我的策略中。

# python - 使用 Python 的 subprocess 模块和 ffmpeg 运行 2-pass 视频转换

> ID：12220446
> 
> 赞同：1
> 
> 时间：2012-08-31T18:02:34.330
> 
> 标签：python, ffmpeg, subprocess

我正在尝试将一堆视频转换为在我的 iPad 上播放。我正在使用 subprocess 模块，据我了解，它在与我的脚本不同的进程中启动二进制文件。我不确定如何处理要求第一个进程在第二个进程开始之前终止的 2-pass 编码。

这是我的代码：

```
def convert(filename):
  extension = filename[-3:]

  destination_filename_720 = filename[-4:] + '-a720p' + '.mp4'
  destination_filename_1080 = filename[-4:] + '-a1080p' + '.mp4'

  p = subprocess.Popen(['ffmpeg','-i', str(filename) ,
                        '-acodec' , 'aac' ,
                        '-ab' , '160k' ,
                        '-ac' , '2' ,
                        '-vcodec' , 'libx264' ,
                        '-strict' , '-2' ,
                        '-vpre' , 'ipod640' ,
                        '-threads' , '8' ,
                        '-s' , '1280x720' ,
                        '-b:v' , '2000k' ,
                        '-pass' , '1' ,
                        '-y' ,
                        destination_filename_720])

  p = subprocess.Popen(['ffmpeg','-i', str(filename) ,
                        '-acodec' , 'aac' ,
                        '-ab' , '160k' ,
                        '-ac' , '2' ,
                        '-vcodec' , 'libx264' ,
                        '-strict' , '-2' ,
                        '-vpre' , 'ipod640' ,
                        '-threads' , '8' ,
                        '-s' , '1280x720' ,
                        '-b:v' , '2000k' ,
                        '-pass' , '2' ,
                        '-y' ,
                        destination_filename_720]) 
```

一旦调用了 convert() 函数，两个进程都会立即生成。

第二个过程失败，因为第一个过程尚未完成。

我怎样才能解决这个问题？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T22:59:53.300

只需将 p.wait() 添加到您的 supprocess 中，直到您的第一次通过完成后它才会继续。

```
p = subprocess.Popen(['ffmpeg','-i' ...etc])
p.wait() 
```

出于可读性的目的，像在终端中那样编写命令可能更容易，然后只需使用 split() 将其放入字符串数组中。例子：

```
p = subprocess.Popen(
   'ffmpeg -i blah.mov -s 128x72 blah.jpg'.split())
p.wait() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T21:02:00.963

*（没有找到“评论”链接，如“回答”：）*

最后一行应该有1080，而不是720？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T22:30:39.263

你最好使用 pexpect 因为 ffmpeg 通常不会刷新输出

# shell - 如何在 solaris 下使用 spawn 和 sftp 捕获期望输出

> ID：12220447
> 
> 赞同：0
> 
> 时间：2012-08-31T18:02:36.897
> 
> 标签：shell, unix, solaris, expect

我正在使用 expect 来生成一个 sftp 会话，如下所示：

（为了清楚起见，剪掉了很多代码，是的，我理解风险......）

```
#!/opt/csw/bin/expect -f

<snip>

spawn sftp $user@$host 

set rez [connect $passw]
if { $rez == 0 } {
  send "cd $location\r"
  set timeout -1
  send "ls -l\r" 
  send "quit\r"
  expect eof
  exit 0
}
puts "\nError connecting to server: $host, user: $user and password: $passw!\n"
exit 1 
```

这工作得很好。

我的具体问题是如何在文件中捕获**发送“ls -l\r”**命令的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T21:14:36.683

在你之后`send "ls\r"`你应该`expect`做点什么。在`expect`语句之后，变量`$expect_out(0,string)`将包含您想要的输出。您必须解析出实际的命令字符串和随后的提示。您可以在[http://docs.activestate.com/activetcl/8.5/expect4win/找到一些示例](http://docs.activestate.com/activetcl/8.5/expect4win/)

# sql - 我只希望对不同 id 的第一个值求和 sql server

> ID：12220450
> 
> 赞同：0
> 
> 时间：2012-08-31T18:03:10.900
> 
> 标签：sql, sql-server

我有这样的数据库：

```
weekid    overage    type    type2
504       400        x       y
504       400        z       y
503       200        x       z
502       100        x       x
502       100        x       y 
```

我想要的是让来自 weekid 504 的 400 与 weekid 503 的 200 和来自 weekid 502 的 100 相加，我不希望它与来自 weekid 504 或 502 的其他 400 相加

所以输出应该是 sum(overage) = 700

基本上我想要的是像这样执行 vbscript 循环的东西

```
do until rs9.eof
    if weekid<>rs.fields("weekid") then
        weekid=rs.fields("weekid")
        overage=overage+rs.fields("overage")
    end if
rs.movenext
loop 
```

但是它需要在查询中执行此操作，执行此操作的最简单的 sql 查询是什么？

我的 sql server 版本似乎也不支持 row_number

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:44:22.587

试试这个;

如果相同weekids 的值总是相同，则使用a)。
对于相同的 weekid 具有不同的 overage 值的情况：

a）如果您需要将相同值的不同值包含在总和中：

```
SELECT  SUM([Overage])
FROM    ( SELECT DISTINCT
                    [WeekId] ,
                    [Overage]
          FROM      [dbo].[OverageTable]
        ) tmp 
```

a）如果您只需要将相同值的最大不同值包含在总和中：

```
SELECT  SUM([Overage])
FROM    ( SELECT    [WeekId] ,
                    MAX([Overage]) AS [Overage]
          FROM      [dbo].[OverageTable]
          GROUP BY  [WeekId]
        ) tmp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T18:06:40.927

这取决于你所说的第一行的意思——数据没有内在的顺序。`order by`当您决定如何订购时，您可以调整下面的子句。

```
select sum(overage)
from
    (Select overage, row_number() over (partition by weekid order by type, type2) rn
     from yourtable
    ) v
where rn=1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T18:07:12.633

您可以随机选择一个值：

```
select sum(overage)
from (select t.*,
             row_number() over (partition by weekid order by newwid()) as seqnum
      from t
     ) t
where seqnum = 1 
```

如果您知道所有值都相同，您可能更喜欢聚合：

```
select sum(overage)
from (select weekid, max(overage) as overage
      from t
      group by weekid
     ) t 
```

不要执行以下操作：

```
select sum(distinct overage) 
```

尽管这是有效的 SQL，但您将失去具有相同值的周数。

# ffmpeg - 使用 ffmpeg 和 drawtext 过滤器时输出质量差

> ID：12220451
> 
> 赞同：0
> 
> 时间：2012-08-31T18:03:16.547
> 
> 标签：ffmpeg

我有 vps 服务器，我成功设置了 ffmpeg。我下载了 720p 高清视频。我只需要在视频上添加文字。我添加成功，但添加后视频质量非常低。我使用这个命令

```
ffmpeg -i a.mp4 -vf "drawtext=fontsize=30:box=1:fontfile=/usr/share/fonts/a.ttf:text='Stack Overflow':x=(w-text_w)/2:y=(h-text_h-line_h)/2" -strict -2 c.mp4 
```

我不知道 -strict -2 命令。我尝试 ffmpeg 错误说 add -strict -2 然后我添加。现在我只需要添加文本，而不是更改视频质量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T06:34:54.193

您没有指定任何比特率。因此，它将采用 200kbps 的默认比特率，如果您声称的尺寸为 720p，这将给您带来不好的输出。请将比特率指定为合理的值。

# c++ - 获取重载静态函数的地址

> ID：12220452
> 
> 赞同：6
> 
> 时间：2012-08-31T18:03:25.313
> 
> 标签：c++

> **可能重复：**
> [如何指定指向重载函数的指针？](https://stackoverflow.com/questions/2942426/how-to-specify-a-pointer-to-an-overloaded-function)

我有一个库，其类定义为：

```
struct ClassA
{
    static ClassA foo(long);
    static ClassA foo(double);
} 
```

我需要获取这两个函数的地址。我目前正在尝试的代码给出错误 C2440: cannot convert from 'overloaded-function' to '...'

```
ns::ClassA (ns::ClassA::*ClassA_foo1)(long) = &ns::ClassA::foo;
ns::ClassA (ns::ClassA::*ClassA_foo2)(double) = &ns::ClassA::foo; 
```

我认为这可能是因为它们是静态的，但是在返回类型之前或之后放置静态会产生相同的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T18:55:47.350

函数重载的事实并不真正相关。这里真正的问题是函数指针和成员函数指针之间的区别。我将在不重载的情况下运行一些示例。

解决方案：要么删除`static`, 以便将它们定义为成员函数。否则替换`ns::ClassA::*ClassA_foo1`为`*ClassA_foo1`. 我想你想要后者。（但我实际上建议您使用`typedef`，正如其他人已经建议的那样）。

考虑这两个：

```
namespace ns {
struct ClassA
{
    static ClassA foo(long);
};
} 
```

和

```
namespace ns {
struct ClassA
{
    ClassA foo(long);
};
} 
```

在前一种情况下， foo 是`static`并且因此是一个典型的函数，并且可以存储在函数指针中：

```
ns::ClassA (ClassA_foo1)(long) = &ns::ClassA::foo; 
```

如果删除`static`，则它*不再*是函数，而是成员函数。指向成员函数的指针与指向函数的指针不同，它们必须使用一个对象来执行，该对象将`this`是调用该方法的对象。

函数指针的类型包括返回值的类型和参数的类型。但是指向成员函数的指针的类型还必须包括`this`对象的类型——您不会期望能够从 a`Circle`类型的对象上运行方法`BankAccount`。

声明一个指向函数的指针：

```
 ReturnType (*variable_name) (PARAM1, PARAM2) 
```

声明一个指向成员函数的指针：

```
 ReturnType (ThisObjectType::*variable_name) (PARAM1, PARAM2) 
```

最后一行很有趣。乍一看，您可能会认为它`R (A::*v) (P1,P2)`声明了一个普通的函数指针并将结果变量`v`放入`A`作用域。但事实并非如此。相反，它定义了一个指向成员函数的指针，该函数对类型的对象进行操作`A`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T19:05:13.640

The problem that you are observing has absolutely nothing to do with the fact that the function is overloaded. You'd get the same error for a non-overloaded function.

Static member functions have *ordinary* function type. Meanwhile, you are trying to interpret them as functions of *member-function* type. This leads to pointer type mismatch reported to you by the compiler. Here's a simple example that will fail to compile for the very same reason

```
struct S {
  static void foo();
};
...
void (S::*p)() = &S::foo; // ERROR, pointer type mismatch 
```

In other words, your pointers are declared as pointers of *pointer-to-member-function* type. Such pointers cannot hold the address of a *static* member function. A static member function and a non-static member function are beasts of completely different nature. The corresponding pointer types are not compatible and not convertible to each other. That's the reason for your error.

This is how it was probably supposed to look

```
ns::ClassA (*ClassA_foo1)(long) = &ns::ClassA::foo;
ns::ClassA (*ClassA_foo2)(double) = &ns::ClassA::foo; 
```

i.e. the pointers on the left-hand side should be declared as *ordinary* function pointers, not as member function pointers.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T18:29:58.833

```
ns::ClassA (ns::ClassA::*ClassA_foo1)(long) = &ns::ClassA::foo;
ns::ClassA (ns::ClassA::*ClassA_foo2)(double) = &ns::ClassA::foo; 
```

看起来您正在尝试在文件范围内`ClassA_foo1`设置这对静态成员。`ClassA_foo2`如果是这样，这不是有效的语法。定义静态成员的语法是

```
SomeType ClassName::member = initializer; 
```

最好使用 typedef 来声明和定义`ClassA_foo1`and `ClassA_foo2`：

```
struct ClassA {
   typedef ClassA (*ClassALongGenerator) (long);
   typedef ClassA (*ClassADoubleGenerator) (double);

   static ClassALongGenerator ClassA_foo1;
   static ClassADoubleGenerator ClassA_foo2;
}; 
```

然后在某个源文件的文件范围内

```
ns::ClassALongGenerator ClassA_foo1 = ns::ClassA::foo;
ns::ClassADoubleGenerator ClassA_foo2 = ns::ClassA::foo; 
```

# php - MySQL插入列一半插入

> ID：12220453
> 
> 赞同：1
> 
> 时间：2012-08-31T18:03:26.923
> 
> 标签：php, mysql

这确实有点奇怪，可能是我没有正确完成的事情，但是由于某种原因，当我在 MySQL 中插入或更新（使用 PHP 类创建）时，由于某种原因插入的文本（一个在这种情况下，电子邮件的 HTML 副本）只插入了一半......当它看到“-”时它会一直中断

我不认为这是一个标准的连字符，因为它在浏览器栏中看起来略有不同，即使在这个文本区域中，我的连字符“-”也比“-”窄。我已经尝试过 HTML 实体，但不会转换，所以在处理这个麻烦的字符时有什么建议吗？

虽然我可能应该说，如果我使用 PHP My Admin 直接插入 HTML 正文（完全相同的格式，所有内容都会被插入。我什至尝试`str_replace`删除它但没有运气。我还用更多的词替换了单词话但有效（但在那个角色出​​现之前它仍然被切断......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:06:27.563

您使用的是“[破折号](http://en.wikipedia.org/wiki/Dash)”，不要与连字符混淆。看看区别：--

破折号有很多种：

```
figure dash    (‒)  U+2012              
en dash        (–)  U+2013
em dash        (—)  U+2014  
horizontal bar (―)  U+2015
swung dash     (⁓)  U+2053 
```

您可以在执行查询之前尝试`str_replace("–", "-", $query);`每种类型，看看是否能解决您的问题，但实际上您应该考虑是否可能执行[utf8_encode()](http://php.net/manual/en/function.utf8-encode.php)，然后将数据库字段设置为使用 UTF8。

# javascript - IE 无法正常打开窗口

> ID：12220458
> 
> 赞同：0
> 
> 时间：2012-08-31T18:03:56.730
> 
> 标签：javascript, jquery, internet-explorer, events, window

所以我做了

```
 $('a.class').click(function(e){
    newWindow = window.open(link.attr('href'), 'name', "height=600,width=1000");
    e.preventDefault();
  }); 
```

但是在 IE 中它没有打开一个新窗口，它使用同一个窗口，它跟随同一个窗口中的链接，而不是在窗口中什么都不做，然后在新窗口中打开链接......

我应该怎么做才能在 IE 的新窗口中打开链接（在 Firefox、chrome 中工作）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:13:26.070

尝试将此添加到您的链接

```
target="_blank" 
```

您也可以使用 Jquery 添加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T21:01:57.117

不确定，但我认为`link.attr('href')`没有按预期工作，用`jQuery(this).attr('href')`关键字替换。

```
newWindow = window.open(jQuery(this).attr('href'), 'name', "height=600,width=1000"); 
```

# java - 向两台服务器提交 GET 请求

> ID：12220461
> 
> 赞同：0
> 
> 时间：2012-08-31T18:04:08.657
> 
> 标签：java, jquery, jsp

我有一个带有两台服务器的生产环境。我有一个用户提交数据的页面，然后单击保存，数据库将使用提交的信息进行更新。发生这种情况后，我需要向两台服务器发送一个 GET 请求。这些请求基本上运行方法来获取更新的数据，并将其保存到内存中。我一直在使用 jQuery 来调用这样的 URL：

```
$.ajax({<br />
    type : "GET",<br />
    url : 'http://IP_ADDRESS1/contextRoot1/servlet1?param=value&param2=value2'<br />
});

$.ajax({<br />
    type : "GET",<br />
    url : 'http://IP_ADDRESS1/contextRoot2/servlet1?param=value&param2=value2'<br />
});

$.ajax({<br />
    type : "GET",<br />
    url : 'http://IP_ADDRESS1/contextRoot3/servlet1?param=value&param2=value2'<br />
});

$.ajax({<br />
    type : "GET",<br />
    url : 'http://IP_ADDRESS2/contextRoot1/servlet1?param=value&param2=value2'<br />
});

$.ajax({<br />
    type : "GET",<br />
    url : 'http://IP_ADDRESS2/contextRoot2/servlet1?param=value&param2=value2'<br />
});

$.ajax({<br />
    type : "GET",<br />
    url : 'http://IP_ADDRESS2/contextRoot3/servlet1?param=value&param2=value2'<br />
}); 
```

我需要使用机器的 IP 地址，因为我有一个负载均衡器，当他收到对域的请求时，它会将请求转发到使用最少的机器。我也很确定 jQuery 不会执行 6 个 ajax 请求。我也遇到了 jQuery 和跨域约束的问题。我尝试使用 jQuery-xdomain-ajax.js，但它是一块垃圾（它对我不起作用）。我有一个解决方案，但我只是想知道是否有更好的解决方案。我现在的解决方案是打开一个弹出窗口，并将其他三个 ajax 请求提交到另一台服务器。我不能让外部进程每隔一段时间调用一次请求。

两台应用服务器是 JBoss，Web 服务器是 Apache
一台数据库服务器是 MySQL
操作系统是应用服务器和数据库服务器上的 linux

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:22:07.323

如果您需要将一些数据放在内存存储中，您应该使用 Infinispan 分布式缓存包，JBoss 为 7。

在本文档中，您可以找到如何创建容器以及如何通过注入访问 Inifinspan 缓存。

通过使用 Inifinspan，每个 JBoss 节点都可以访问相同的共享缓存，您将获得可扩展且高度可用的解决方案。

# android - 如何将 android 活动更改与 adb getevent 命令链接？

> ID：12220463
> 
> 赞同：2
> 
> 时间：2012-08-31T18:04:20.583
> 
> 标签：android, android-ndk, android-activity, adb

对于我的项目，我需要做以下事情，

1.  从 adb getevent 命令获取设备触摸事件。
2.  同时我需要找到一些收集应用程序活动调用信息的东西。

我的目标是找出每个触摸信息，如果特定应用程序中的活动发生变化，检测该活动。

因此，每当在 (x,y) 位置发生触摸时，getevent 都会报告说，现在如果该位置上有一个按钮，它可能会调用应用程序中的活动更改，因此我需要检测对新活动的更改。

如何做到这一点？任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T09:26:52.160

您可以在 python 脚本中尝试：

```
from subprocess import call

from com.android.monkeyrunner import MonkeyRunner, MonkeyDevice
device = MonkeyRunner.waitForConnection()

# These show the package name of the currently running package and 
# the current activity's action. 
device.getProperty('am.current.package')
device.getProperty('am.current.action') 
```

使用 monkeyrunner，您还可以使用 (x,y) 坐标单击/按下按钮。

另一种方法是在 logcat 输出中查看活动更改。它应该如下所示： 显示 com.android.gallery3d/.app.MovieActivity 为什么从画廊播放视频文件。

后期编辑：

您可以使用 'am.current.package' 和 'am.current.action' 来查看活动的变化。您可以使用：

```
call('adb getevent', shell = True) 
```

捕捉点击/触摸事件。都在同一个脚本中。

# python - 在 Python 中将 Colorbar 和 Contour Map 添加到 PyPlot 表面 imshow

> ID：12220470
> 
> 赞同：0
> 
> 时间：2012-08-31T18:04:59.163
> 
> 标签：python, matplotlib

我正在使用一位前雇员编写的代码。在此代码中，该人使用 Qt 在 Python 上执行绘图。我正在尝试添加颜色条和等高线图，但无济于事。这是相关的代码的一部分。

```
#IMPORTS
from matplotlib.figure import Figure
from matplotlib.backends.backend_qt4agg import FigureCanvasQTAgg as FigureCanvas

#SETUP
fig = Figure()
axes = fig.add_subplot(111)
canvas = FigureCanvas(fig)

#DRAWING
axes.clear()
axes.imshow(data_and_extents, interpolation='bilinear')
axes.autoscale(False)
canvas.draw()

#TODO: Add colorbar and contour maps with some values 
```

我试过`axes.colorbar()`无济于事。如何将颜色条和等高线图添加到这样设置的曲面图中？

感谢 SOCommunity！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:36:11.230

第一个错误在第一行：

```
from matplotlib.figure import Figure 
```

是正确的。下一个： 而`axes.colorbar`不是`fig.corbar`. 使用您的变量名称，您应该能够创建一个颜色条：

```
cbar = fig.colorbar(axes) 
```

有关更多信息，请参阅[此示例](http://matplotlib.sourceforge.net/examples/pylab_examples/colorbar_tick_labelling_demo.html)。

# javascript - Javascript：如何获取被点击按钮的 ClientID？

> ID：12220475
> 
> 赞同：0
> 
> 时间：2012-08-31T18:05:18.407
> 
> 标签：javascript, asp.net

这是按钮。

```
<asp:Button ID="_btnSearch" Text="Search" onclientclick="return CheckForEmptySearchBox(this.ClientID)" /> 
```

这是Javascript函数

```
<script type = "text/javascript">
        function CheckForEmptySearchBox(id) {
           alert("The ID of the button is: " + id)

           return false;
        }
</script> 
```

我收到一个警告框，上面写着“按钮的 ID 是：**未定义**”

感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T18:08:33.500

它不是ClientId，那是使用this.id 的服务器端属性。

```
<asp:Button ID="_btnSearch" Text="Search" onclientclick="return CheckForEmptySearchBox(this.id)" /> 
```

ClientId 用于获取由 ASP.Net 生成的客户端 id 并在服务器端使用它。

# android - 单个容器有两个片段，如何替换两个片段中的一个？

> ID：12220477
> 
> 赞同：0
> 
> 时间：2012-08-31T18:05:37.003
> 
> 标签：android, android-layout, android-ui

我在 main.xml 中有一个容器根目录。在那个容器中，我添加了两个片段“交易”和“余额”。基本上在添加交易余额后应该更新并且“交易”片段应该替换为“统计”片段。

目前我正在使用替换：

```
FragmentTransaction ft = fm.beginTransaction();
ft.replace(R.id.root, BalFrag).commit(); 
```

但是上面的代码删除了“余额”片段并在“交易”片段之后添加了新的片段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T18:14:14.320

在一个容器中使用 2 个片段对我来说听起来是个坏主意，但我认为你应该能够使用类似的东西只替换一个片段

```
FragmentManager fm = getFragmentManager();
Fragment oldFragment = fm.findFragmentByTag("transaction"); // or keep a reference to it.
Fragment newFragment = getNewFragment() // whatever you do to get a fragment instance

FragmentTransaction ft = fm.beginTransaction();
ft.remove(oldFragment);
ft.add(R.id.root, newFragment, "Stats");
ft.commit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-24T04:52:45.677

例如，我有 fFirst 和 fSecond 片段

```
if (fFirst != null && fFirst.isVisible()) {
    getSupportFragmentManager().beginTransaction().replace(R.id.container, fSecond);
} else {
    getSupportFragmentManager().beginTransaction().replace(R.id.container, fFirst);
} 
```

# performance - 临时表与物理表上的数据流任务

> ID：12220479
> 
> 赞同：0
> 
> 时间：2012-08-31T18:05:40.810
> 
> 标签：performance, ssis, dataflowtask, temp-tables

这是场景

我有一个用于 csv 文件的临时表，这是我的源文件我正在将其加载到物理临时表中我将在包的后面部分对此临时表数据进行转换我需要新数据（因为它来自源）

我应该在临时表中进行转换还是应该再次使用数据流任务来重新加载临时表

数据不多 [微笑] 只是不到一百万而已

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T14:38:06.303

有一个标准模式。

1.  提取数据（从 CSV 到您的临时区域）
2.  转换数据（清理、转换、格式化、加入其他内容、使其与新系统兼容）
3.  加载数据（更新/插入/删除到您的活动表）

这就是 ETL 的首字母缩写词的来源 - [http://en.wikipedia.org/wiki/Extract,_transform,_load](http://en.wikipedia.org/wiki/Extract,_transform,_load)

您拥有的主要优势是，在第 1 点您只有 1 个线程/用户加载数据，因此可以快速提取数据，然后在第 2 阶段您正在操作数据而不会导致其他表上的任何锁定。最后，一旦数据准备就绪，您就可以以最快的方式将其加载到您的实时表中。

您最关心的两个（通常是相互竞争的）问题是简单性和速度。简单性很棒，因为它涉及的代码更少，需要的调试更少，并且让您更加确信您的数据是干净的。但是，有时您必须为了速度而牺牲简单性。

在您的情况下，由于您只加载了几百万行，我建议您每次都重新加载临时表，以便每次加载都使用相同的 ETL 过程。这使您的 ETL 机制易于编码、维护和解释。

仅供参考 - 如果您使用的是 SQL Server，请查看 SSIS。

# ruby-on-rails - Ruby：截断另一个字符串中包含的长字符串

> ID：12220481
> 
> 赞同：0
> 
> 时间：2012-08-31T18:05:41.743
> 
> 标签：ruby-on-rails, ruby, truncate

让`string_a = "I'm a string but this aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa is long."`

如何检测`aaaa...aaa`（没有空格的部分很长）部分并将其截断以使结果看起来像（字符串的其余部分应该看起来相同）：

```
puts string_a # => "I'm a string but this aaa....aaa is long." 
```

我使用这种方法截断：

```
 def truncate_string(string_x)
    splits = string_x.scan(/(.{0,9})(.*?)(.{0,9}$)/)[0]
    splits[1] = "..." if splits[1].length > 3
    splits.join
  end 
```

所以运行：

```
puts truncate_string("I'm a very long long long string") # => "I'm a ver...ng string" 
```

问题是检测`'aaaa...aaaa'`并应用`truncate_string`到它。

解决方案的第一部分？使用正则表达式检测比 N 长的字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:14:03.507

怎么样的东西

```
string.gsub(/\S{10,}/) { |x| "#{x[0..3]}...#{x[-3..-1]}" } 
```

哪里 10 是一个单词的最大长度？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T18:13:53.667

你喜欢这个吗？

```
s = "I'm a string but this aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa is long."
s.gsub(/(.* \w{3})\w{5,}(\w{3}.*)/, '\1...\2')
 => "I'm a string but this aaa...aaa is long." 
```

# ruby-on-rails - 每当我尝试在 Aptana Studios 中发出“rails s”命令时，都会出现错误消息

> ID：12220482
> 
> 赞同：0
> 
> 时间：2012-08-31T18:05:45.937
> 
> 标签：ruby-on-rails, ruby, command-line, aptana

当我在 Aptana Studio 的内置命令行中发出命令`$ rails s`时，它会出现此错误，我不知道如何修复该项目可以在[https://github.com/nathandunn97/sample_app找到](https://github.com/nathandunn97/sample_app)

```
=> Booting WEBrick
=> Rails 3.2.8 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
/var/lib/gems/1.8/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:245:in `load': /home/nathan/Documents/Aptana Studio 3 Workspace/sample
_application/config/initializers/session_store.rb:3: syntax error, unexpected ':', expecting $end (SyntaxError)
...sion_store :cookie_store, key: '_sample_application_session'
                              ^
        from /var/lib/gems/1.8/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:245:in `load'
        from /var/lib/gems/1.8/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
        from /var/lib/gems/1.8/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:245:in `load'
        from /var/lib/gems/1.8/gems/railties-3.2.8/lib/rails/engine.rb:588
        from /var/lib/gems/1.8/gems/railties-3.2.8/lib/rails/engine.rb:587:in `each'
        from /var/lib/gems/1.8/gems/railties-3.2.8/lib/rails/engine.rb:587
        from /var/lib/gems/1.8/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `instance_exec'
        from /var/lib/gems/1.8/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `run'
        from /var/lib/gems/1.8/gems/railties-3.2.8/lib/rails/initializable.rb:55:in `run_initializers'
        from /var/lib/gems/1.8/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `each'
        from /var/lib/gems/1.8/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `run_initializers'
        from /var/lib/gems/1.8/gems/railties-3.2.8/lib/rails/application.rb:136:in `initialize!'
        from /var/lib/gems/1.8/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `send'
        from /var/lib/gems/1.8/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
        from /home/nathan/Documents/Aptana Studio 3 Workspace/sample_application/config/environment.rb:5
        from /home/nathan/Documents/Aptana Studio 3 Workspace/sample_application/config.ru:4:in `require'
        from /home/nathan/Documents/Aptana Studio 3 Workspace/sample_application/config.ru:4
        from /var/lib/gems/1.8/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
        from /var/lib/gems/1.8/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
        from /home/nathan/Documents/Aptana Studio 3 Workspace/sample_application/config.ru:1:in `new'
        from /home/nathan/Documents/Aptana Studio 3 Workspace/sample_application/config.ru:1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:37:31.493

新的 ruby​​ 哈希语法 ( `key:`) 仅适用于 ruby​​ 1.9 及更高版本。从您的日志中我们可以看出您使用的是 1.8 版本。

# java - 如何将struts2中的字符集更改为utf-8

> ID：12220483
> 
> 赞同：8
> 
> 时间：2012-08-31T18:05:51.443
> 
> 标签：java, jsp, struts2, servlet-filters

嗨，我有一个测试字段，我不想用英语（例如俄语）进行测试，但在我的动作课中，我得到的不是纯文本`?????????`。我试图编写简单的过滤器来描述 [struts2 中的参数字符集转换](https://stackoverflow.com/questions/2381891/parameters-charset-conversion-in-struts2)

但它仍然不起作用..有人可以帮助我吗

**更新** 我有这个 ![在此处输入图像描述](../Images/b598247319ab011498f325fffe649e86.png)

```
<s:textfield key="index.login" name="login" /> 
```

我想用俄语对其进行测试，然后将其发送到我的操作中。但是在我的操作类中，我得到的不仅仅是文本`?????????`。要解决这个问题，我需要将字符集更改为 utf8 而不是 win1251。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-31T18:15:00.373

创建过滤器：

```
import java.io.IOException;

import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;

public class CharacterEncodingFilter implements Filter {

    @Override
    public void init(FilterConfig filterConfig)
            throws ServletException {
    }

    @Override
    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)
            throws IOException, ServletException {
        servletRequest.setCharacterEncoding("UTF-8");
        servletResponse.setContentType("text/html; charset=UTF-8");
        filterChain.doFilter(servletRequest, servletResponse);
    }

    @Override
    public void destroy() {

    }
} 
```

将其声明到您的 web.xml 中：

```
<filter>
    <filter-name>CharacterEncodingFilter</filter-name>
    <filter-class>your.package.filter.CharacterEncodingFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>CharacterEncodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

你可以走了。还要确保您的每一`JSP`页都包含：`<%@ page contentType="text/html;charset=UTF-8" language="java" %>`. 如果您的应用程序在 tomcat 上运行，请确保将`URIEncoding="UTF-8"`属性添加到您的`Connector`元素。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T08:01:35.020

如果需要强制 jsp 为 UTF-8，可以在 web.xml 中编写以下内容：

```
<jsp-config>
    <jsp-property-group > 
        <url-pattern>*.jsp</url-pattern>
        <page-encoding>UTF-8</page-encoding>
    </jsp-property-group>
</jsp-config> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-07T09:35:25.597

（无法评论之前的回复）

```
<jsp-config>
<jsp-property-group> 
    <url-pattern>*.jsp</url-pattern>
    <page-encoding>UTF-8</page-encoding>
</jsp-property-group> 
```

好的 web.xml > 2.3

我不确定在 2012 年它是否还不存在，但请注意此元素仅适用于 web.xml > 2.4（该元素在 2.3 [http://java.sun.com/dtd中不存在/web-app_2_3.dtd](http://java.sun.com/dtd/web-app_2_3.dtd)）。

# c++ - QTreeView 不显示数据

> ID：12220489
> 
> 赞同：3
> 
> 时间：2012-08-31T18:06:18.433
> 
> 标签：c++, qt, qabstractitemmodel

我从 QAbstractItemModel 派生来编码我自己的数据树，但 QTreeView 没有显示。

由于错误的变量寿命，我看到的大多数类似问题的答案都得到了解决，所以这是我分配模型的代码：

```
ui.tvHierarchy->setModel(
    new MetaHierarchyModel(
        cutOffExtension(
            fileName.toStdString()
        )
    )
); 
```

在构建模型时，它的根节点会填充数据，稍后将根据需要加载更多数据（通过`fetchMore`）。

我开始输出每个被调用的函数。这是调用序列的日志：

```
columnCount( QModelIndex(-1,-1,0x0,QObject(0x0) ) ) 
    return  1 
columnCount( QModelIndex(-1,-1,0x0,QObject(0x0) ) ) 
    return  1 
columnCount( QModelIndex(-1,-1,0x0,QObject(0x0) ) ) 
    return  1 
hasChildren( QModelIndex(-1,-1,0x0,QObject(0x0) ) ) 
    return  true 
hasChildren( QModelIndex(-1,-1,0x0,QObject(0x0) ) ) 
    return  true 
canFetchMore( QModelIndex(-1,-1,0x0,QObject(0x0) ) )) 
    return  false 
rowCount( QModelIndex(-1,-1,0x0,QObject(0x0) ) ) 
    return  1 
index( 0 ,  0 ,  QModelIndex(-1,-1,0x0,QObject(0x0) ) ) 
    return  QModelIndex(0,0,0x987aa0,MetaHierarchyModel(0xa16970) )  
hasChildren( QModelIndex(0,0,0x987aa0,MetaHierarchyModel(0xa16970) )  ) 
    return  true 
columnCount( QModelIndex(-1,-1,0x0,QObject(0x0) ) ) 
    return  1 
parent( QModelIndex(0,0,0x987aa0,MetaHierarchyModel(0xa16970) )  ) 
    return  QModelIndex(-1,-1,0x0,QObject(0x0) ) 
index( 0 ,  0 ,  QModelIndex(-1,-1,0x0,QObject(0x0) ) ) 
    return  QModelIndex(0,0,0x987aa0,MetaHierarchyModel(0xa16970) )  
data( QModelIndex(0,0,0x987aa0,MetaHierarchyModel(0xa16970) )  ,  13 ) 
    return  "Metaparticle 1" 
columnCount( QModelIndex(-1,-1,0x0,QObject(0x0) ) ) 
    return  1 
parent( QModelIndex(0,0,0x987aa0,MetaHierarchyModel(0xa16970) )  ) 
    return  QModelIndex(-1,-1,0x0,QObject(0x0) ) 
index( 0 ,  0 ,  QModelIndex(-1,-1,0x0,QObject(0x0) ) ) 
    return  QModelIndex(0,0,0x987aa0,MetaHierarchyModel(0xa16970) )  
data( QModelIndex(0,0,0x987aa0,MetaHierarchyModel(0xa16970) )  ,  13 ) 
    return  "Metaparticle 1" 
```

输出`roleNames()`：

```
QHash((0, "display")(1, "decoration")(2, "edit")(3, "toolTip")(4, "statusTip")(5, "whatsThis")) 
```

最后四行然后永远重复（或至少直到我失去耐心）。对我来说，看起来根数据已被获取，但它们从未显示出来。奇怪的是，`data`-的最后一个参数是`int role`13，它没有被定义为任何角色（我仍然无条件地返回有效字符串）。

实施此操作时我错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T19:56:11.220

[QAbstractItemModel::data](https://qt-project.org/doc/qt-4.8/qabstractitemmodel.html#data)函数应该尽可能地吝啬它返回的数据。[确保仅在显示角色](https://qt-project.org/doc/qt-4.8/qt.html#ItemDataRole-enum)和列号完全匹配时才返回数据。在所有其他情况下，只需返回一个无效的[QVariant](https://qt-project.org/doc/qt-4.8/qvariant.html)（只需调用默认构造函数），您的视图小部件将使用合理的默认值填充这些缺失值。

# regex - 正则表达式中井号 (#) 的含义

> ID：12220492
> 
> 赞同：15
> 
> 时间：2012-08-31T18:06:31.973
> 
> 标签：regex

我有一个带有磅`#`修饰符的正则表达式。

`\#`正则表达式中的含义是什么？`#`正则表达式中的含义是什么？Java是否有可能只是忽略了这些无效的修饰符？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-31T18:11:42.280

`\#`不是有效的正则表达式修饰符。从技术上讲，这将是一种转义`#`字符的方法，如果这`#`意味着 Java 正则表达式中的任何重要内容。因为它没有，Java 只是忽略这种无效性并将其读取为 a`#`而不是向您抛出错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-07T03:40:11.523

我刚遇到同样的问题。事实证明，之前的程序员在将所有“旧代码”从 更改为时“错过了” `#`，`|`这是一个简单的错误。我通过检查应用程序中的所有其他代码发现了这一点，没有发现其他`#`符号，但`|`包含许多类似的代码区域。就在这段代码的`|`旁边。`#`所以有人将旧的正则表达式换成新的正则表达式并“错过”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T18:21:52.303

正如您所怀疑的，这只是一个错误。

可以肯定的是，我跑了：

```
String quote = Pattern.quote("_#_"); 
```

输出是：

```
"\Q_#_\E" 
```

因此，很明显，井号（“#”）不是 java 正则表达式的特殊字符。

请参阅：[Pattern.quote()](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)

# shell - 根据 var shell 脚本填写密码

> ID：12220494
> 
> 赞同：0
> 
> 时间：2012-08-31T18:06:34.890
> 
> 标签：shell

我正在研究一个shell脚本，它压缩一个文件，然后将它上传到我拥有的服务器。

到目前为止，我拥有它，因此它会询问服务器密码，然后保留该变量。在它完成之后，脚本会压缩一个包含一堆文件的文件夹。然后它执行“scp”命令将其发送到我的服务器。

现在，这就是我需要帮助的地方......我希望它填写脚本之前在请求服务器密码时提供的密码。我确定您会问“为什么在“scp”命令要求时不输入密码。原因是我拥有的文件会很大，我不想坐在那里看它拉上拉链。这就是为什么我早早提供密码的原因。

## 以下是步骤：

1）用户提供服务器密码，该密码保存为变量“密码”

2）脚本压缩文件

3）脚本将文件发送到服务器（当我在脚本中运行这部分时，它会要求输入密码。我必须在此处输入密码变量。）

关于如何做到这一点的任何想法？非常感谢，会，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:13:14.187

步骤 1 存在缺陷，原因有几个，包括安全相关和技术原因。

您应该做的是在后台创建一个“空”SSH 会话以生成主连接（请参阅手册页中的`ControlPath`和`ControlMaster`选项`ssh_config(5)`）。为后续的 SCP 操作使用相同的控制设置将使用此连接，而无需询问密码。脚本完成后不要忘记终止空会话。

# android-ndk - 如何从 Android 4.1 中的视频缓冲区访问相机捕获的帧

> ID：12220497
> 
> 赞同：0
> 
> 时间：2012-08-31T18:06:52.940
> 
> 标签：android-ndk

我想知道我是否可以在 Android 空间中做到这一点。

我使用的版本是Android 4.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T17:24:57.697

一般来说，我认为您可以使用 JNI，如果您知道要使用哪些类，您可以获得所需的缓冲区。

尝试咀嚼 2 个链接：[这里](http://video.linux.com/videos/exposing-the-android-camera-stack)和[这里](http://marakana.com/static/courseware/android/Aptina-Android-Camera-Internals.pdf)

请注意，在 ICS 之前，堆栈与这两个链接中呈现的内容非常不同。因此，您为 ICS 提出的建议不适用于 2.3.3 或 3.xx

# sql - 无法将“足球”插入其值为 NULL 的列中

> ID：12220498
> 
> 赞同：0
> 
> 时间：2012-08-31T18:06:55.960
> 
> 标签：sql, sql-server, null, sql-update

如果它的值为 NULL，我无法将文本添加到列。它说（1 行受影响）但它仍然说 NULL。但是如果已经存在值，它可以将文本插入列中。前任。'任何事物'

ProductGroup_Keywords(varchar(max), null)

我在下面尝试了这两条路线

```
`Update [dbo].[Category]
 SET ProductGroup_Keywords = ProductGroup_Keywords + 'football'
 WHERE Category_ID = 101`

'Update [dbo].[Category]
 SET ProductGroup_Keywords = convert(nvarchar(max),ProductGroup_Keywords) + 'football'
 WHERE Category_ID = 101' 
```

然后我尝试像下面那样设置它，但它仍然说 NULL

```
'Update [dbo].[Category]
 SET ProductGroup_Keywords = 'football'
 WHERE ProductGroup_Keywords = 101' 
```

请帮忙！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T18:09:46.387

```
 Update [dbo].[Category] 
 SET ProductGroup_Keywords = coalesce( ProductGroup_Keywords, '')  + 'football' 
 WHERE Category_ID = 101' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T18:53:08.903

另一种方法是使用 CASE 语句：

```
 Update [dbo].[Category] 
 SET ProductGroup_Keywords = CASE 
                                WHEN ProductGroup_Keywords IS NULL THEN 'football'
                                ELSE ProductGroup_Keywords + 'football'
                             END  
 WHERE Category_ID = 101' 
```

或 ISNULL 而不是 COALESCE ......

```
 Update [dbo].[Category] 
 SET ProductGroup_Keywords = ISNULL( ProductGroup_Keywords, '')  + 'football' 
 WHERE Category_ID = 101' 
```

重要的是@JoeStefanelli 所说的：`x + NULL = NULL`

# python - python - numpy 从多个文件创建数组

> ID：12220499
> 
> 赞同：1
> 
> 时间：2012-08-31T18:07:00.903
> 
> 标签：python, arrays, numpy

我有 50 名研究对象，他们提供了六项任务的反应时间数据。我将每个主题对任务的平均反应时间存储为 .npy 文件（50 个主题 * 6 个任务 = 300 个文件），并且我希望获得每个任务的组平均值。理想情况下，这将导致该组有六个文件。

换句话说，我想用单独的 .npy 文件填充一个 numpy 数组，但是我对最好的方法有点迷失了。我的想法是为每个任务初始化一个空数组，用主题值填充它，然后得到平均值。

```
subjects=range(1,51)
tasks=['a','b','c','d','e','f']
datalist=[]

for subject in subjects:
    for task in tasks:

        array=np.array(datalist)
        f=np.load('%d/%s.npy' % (subject,event))
        result=np.append(array,f)
        mu=np.mean(result)
        sav=np.save('%s' %(task),mu) 
```

此代码的结果是该系列中的最后一个值，表明该数组未正确填充。任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T18:15:29.843

您每次都在重新创建一个新数组，因为它位于 for 循环内。实际上，您正在`array`为每个主题和每个任务创建、附加一个数组、取平均值，然后保存。您应该像这样组织它：

```
for task in tasks:
    result=np.array([])
    for subject in subjects:
        f=np.load('%d/%s.npy' % (subject,event))
        result=np.append(result,f)
    mu=np.mean(result)
    sav=np.save('%s' %(task),mu) 
```

ETA：顺便说一句，存储这些数据的方法比存储在 300 个单独的 .npy 文件中要好得多*。*每个任务的每个主题是否只有一个值？在那种情况下，为什么不直接表示这个 50 x 6 的 numpy 矩阵呢？

# ios - 不同版本的回合制游戏中心游戏看不到对方的比赛

> ID：12220500
> 
> 赞同：2
> 
> 时间：2012-08-31T18:07:07.603
> 
> 标签：ios, game-center, gamekit

每次我向测试人员部署新版本时，旧版本中的游戏都不再可用。作为测试，我在一台设备上安装了 build 63（编号为`agvtool`），在另一台设备上安装了 64。我从 64 邀请。63 什么也没看到（游戏中心邀请，或使用时`GKTurnBasedMatchmakerViewController`）。所以我安装了 64，邀请就出现了。

我正在使用脚本进行构建（`xcodebuild`用于制作存档，然后压缩 .ipa），尽管每次都是相同的脚本。

我还没有看到任何提到这一点的文档，这让我担心一旦游戏在 App Store 中进行更新。

如果两个设备具有相同的构建，则一切都很好。（如果我从 Xcode 构建并将其复制到连接的设备，这似乎不是同样的问题——尽管这些不是存档构建。）这让我认为这不是配置问题（因为相同的配置文件一直使用）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T21:08:14.333

看起来问题是因为我正在更改 CFBundleVersion。这显然是 Game Center 的一个未记录的兼容性指标：[https ://devforums.apple.com/message/690974](https://devforums.apple.com/message/690974)

# c++ - Gtk 在它的回调上隐藏窗口

> ID：12220508
> 
> 赞同：0
> 
> 时间：2012-08-31T18:07:34.230
> 
> 标签：c++, gtk

我有一个我想在按下按钮时隐藏的功能。我读过我可以在一个信号上定义多个回调，它们将按照定义的顺序被调用。所以我想在按钮按下时执行两个功能，我希望其中一个隐藏包含这个按钮的窗口。我试着这样做：

```
g_signal_connect(btn_confirm, "clicked", G_CALLBACK(function_that_does_stuff), NULL);
g_signal_connect(btn_confirm, "clicked", G_CALLBACK(kill_window), add_conn_win);
...
void kill_window ( GtkWidget* wdgt, GtkWidget* win )
{
  gtk_widget_hide_all(win);
} 
```

但这行不通。窗户还在。有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T14:36:07.280

首先，请查看文档中有关[gtk_widget_hide_all()](http://developer.gnome.org/gtk/stable/GtkWidget.html#gtk-widget-hide-all)的内容：

> gtk_widget_hide_all 自 2.24 版以来已被弃用，不应在新编写的代码中使用

相反，您应该使用[gtk_widget_hide ()](http://developer.gnome.org/gtk/stable/GtkWidget.html#gtk-widget-hide)。规范说它

> 反转 gtk_widget_show() 的效果，导致小部件被隐藏（对用户不可见）。

正如评论所说，确保您的回调被触发。然后尝试

`gtk_widget_hide (win);`

我认为这应该做的工作，让我知道它是否有帮助！

# wso2 - AXIS2：名称 ConnectionFactory 的 JNDI 查找返回了 org.jboss.mq.SpyConnectionFactory，而预期接口 javax.jms.ConnectionFactory

> ID：12220511
> 
> 赞同：3
> 
> 时间：2012-08-31T18:07:56.643
> 
> 标签：wso2, wso2esb, jbossmq

我安装了一个新的 WSO2 ESB 版本 4.2.3（到现在为止的最后一个稳定版本），并在`axis2.xml`文件中配置了 JMS 传输，如下所示：

```
<!-- Configuration for JBoss 4.2.2 GA MQ -->
<transportReceiver name="jms" class="org.apache.axis2.transport.jms.JMSListener">
    <parameter name="SMSOUTQueueConnectionFactory" locked="false">
            <parameter name="java.naming.factory.initial" locked="false">org.jnp.interfaces.NamingContextFactory</parameter>
            <parameter name="java.naming.factory.url.pkgs" locked="false">org.jboss.naming:org.jnp.interfaces</parameter>
            <parameter name="java.naming.provider.url" locked="false">jnp://192.168.10.125:1100</parameter>
            <parameter name="transport.jms.ConnectionFactoryJNDIName" locked="false">ConnectionFactory</parameter>
            <parameter name="transport.jms.ConnectionFactoryType" locked="false">queue</parameter>
            <parameter name="transport.jms.Destination" locked="true">queue/SMSOUTQueue</parameter>
    </parameter>
</transportReceiver> 
```

紧接着，在启动过程中发现了一个错误：

```
15:09:16,585 INFO  [STDOUT] 15:09:16,585 ERROR [BaseUtils] JNDI lookup of name ConnectionFactory returned a org.jboss.mq.SpyConnectionFactory while a interface javax.jms.ConnectionFactory was expected
15:09:16,587 INFO  [STDOUT] 15:09:16,585 ERROR [ListenerManager] Couldn't initialize the jmstransport listener
org.apache.axis2.transport.base.BaseTransportException: JNDI lookup of name ConnectionFactory returned a org.jboss.mq.SpyConnectionFactory while a interface javax.jms.ConnectionFactory was expected
        at org.apache.axis2.transport.base.BaseUtils.handleException(BaseUtils.java:167)
        at org.apache.axis2.transport.jms.JMSUtils.lookup(JMSUtils.java:522)
        at org.apache.axis2.transport.jms.JMSConnectionFactory.<init>(JMSConnectionFactory.java:92)
        at org.apache.axis2.transport.jms.JMSConnectionFactoryManager.loadConnectionFactoryDefinitions(JMSConnectionFactoryManager.java:58)
        at org.apache.axis2.transport.jms.JMSConnectionFactoryManager.<init>(JMSConnectionFactoryManager.java:45)
        at org.apache.axis2.transport.jms.JMSListener.doInit(JMSListener.java:58)
        at org.apache.axis2.transport.base.AbstractTransportListenerEx.init(AbstractTransportListenerEx.java:62)
        at org.apache.axis2.engine.ListenerManager.init(ListenerManager.java:84)
        at org.wso2.carbon.core.init.CarbonServerManager.initializeCarbon(CarbonServerManager.java:386)
        at org.wso2.carbon.core.init.CarbonServerManager.removePendingItem(CarbonServerManager.java:273)
        at org.wso2.carbon.core.init.PreAxis2ConfigItemListener.bundleChanged(PreAxis2ConfigItemListener.java:117)
        at org.eclipse.osgi.framework.internal.core.BundleContextImpl.dispatchEvent(BundleContextImpl.java:916)
        at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:220)
        at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:330) 
```

我发现很多帖子，人们说要删除`...WEB-INF/lib/geronimo-jms_1.1_spec-1.1.0.wso2v1.jar`，因为否则 synapse 不适用于任何外部 JMS 代理（我也为 Mule ESB 找到了相同的答案），但对我来说，这个解决方案不起作用。

[问题与此链接](http://rajikak.blogspot.it/2011/04/jms-error-jndi-lookup-of-name.html)非常相​​似。

非常感谢任何帮助。提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T00:55:32.690

这个回复有点晚了。但我也遇到了同样的错误并且能够修复。当尝试从 WSO2 ESB 4.6.0 连接到部署在 JBoss 服务器中的 JMS 队列时，即使删除了 jar geronimo-jms_1.1_spec-1.1.0.wso2v1.jar，你提到的问题没有解决。

原因是，在您添加到 ESB/repository/components/lib 的 jboss 相关 jar 中，还有一些其他 jar，公开了 javax.jms 的实现。*. 例如，在我的例子中，有两个名为 jboss-j2ee.jar 和 jbossall-client.jar 的 jar 暴露了 javax.jms。*. 我所做的是我打开了两个 jar 并从两者中删除了 javax.jms.* 的暴露包部分。然后问题得到了解决。

谢谢;

# android - 如何为android启用从一个字符串到另一个字符串的触摸滑动？

> ID：12220515
> 
> 赞同：0
> 
> 时间：2012-08-31T18:08:40.460
> 
> 标签：android, eclipse, mobile

好的，所以我希望能够在我的应用程序中启用触摸幻灯片。它基本上显示了一个 xml 屏幕，该屏幕具有一个文本视图，每次有人转到下一个提示时都会更改。这是一个关系提示应用程序，我希望他们能够触摸并滑动到下一个提示，而不仅仅是按下下一个和上一个。

```
public class RelationshipTipsActivity extends Activity implements
    OnClickListener {
private static final int SWIPE_MIN_DISTANCE = 120;
private static final int SWIPE_MAX_OFF_PATH = 250;
private static final int SWIPE_THRESHOLD_VELOCITY = 200;
private GestureDetector gestureDetector;

View.OnTouchListener gestureListener;

String facts[] = {"Coming soon",
        "Coming soon", };

TextView display, display1;
TextView counter;
Button begin;
Button next;
Button previous;
Button random;
Random myRandom;

int index = facts.length;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(starting.rt.R.layout.relationship);

    AdView ad = (AdView) findViewById(R.id.ad);
    ad.loadAd(new AdRequest());

    display1 = (TextView) findViewById(starting.rt.R.id.Begin);
    display = (TextView) findViewById(starting.rt.R.id.tvResults);
    counter = (TextView) findViewById(starting.rt.R.id.tvCounter);
    next = (Button) findViewById(starting.rt.R.id.Next);
    previous = (Button) findViewById(starting.rt.R.id.Previous);
    random = (Button) findViewById(starting.rt.R.id.Random);

    next.setOnClickListener(this);
    previous.setOnClickListener(this);
    random.setOnClickListener(this);
    // display.setOnTouchListener(this.gestureListener);
    myRandom = new Random();

    // gestureDetector = new GestureDetector(new MyGestureDetector());
    // gestureListener = new View.OnTouchListener() {
    // public boolean onTouch(View v, MotionEvent event) {
    // return gestureDetector.onTouchEvent(event);
    // }

    // };
}

private void showDisplay() {
    display.setText(facts[index]);
    counter.setText(String.valueOf(index + 1) + "/"
            + String.valueOf(facts.length));
}

public void onClick(View arg0) {
    // TODO Auto-generated method stub
    switch (arg0.getId()) {
    case starting.rt.R.id.Next:
        index++;
        if (index > facts.length - 1) {
            index = 0;
        }
        showDisplay();

        break;

    case starting.rt.R.id.Previous:
        index--;
        if (index < 0) {
            index = facts.length - 1;
        }
        showDisplay();
        break;

    case starting.rt.R.id.Random:
        index = (myRandom.nextInt(facts.length) - 1);
        if (index < 0) {
            index = facts.length - 1;
        }
        showDisplay();
        break;

    }

} 
```

}

# php - 将数组值转换为变量数组 PHP

> ID：12220516
> 
> 赞同：1
> 
> 时间：2012-08-31T18:08:42.707
> 
> 标签：php, arrays, variable-names

FROM**没有键**的数组：

```
$array = array('apple','bee','carrot','dragon','elephant') 
```

到

```
$newarray = ($apple,$bee,$carrot,$dragon,$elephant) 
```

* * *

为什么：我想创建灵活的函数来从 mysql 数据库中获取字段，如下所示：

```
<?php
$query = "SELECT ".$array." FROM table";
$result = mysql_query($query);
while($row = mysql_fetch_array($result)){
        extract($row);
        echo $newarray;
}
?> 
```

所以，我可以：

*   选择苹果、蜜蜂、胡萝卜和回声 $apple、$bee 和 $carrot
*   选择蜜蜂、胡萝卜、大象和回声 $bee、$carrot 和 $elephant
*   管他呢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T18:13:05.867

为什么不从数据库中获取关联数组，然后使用关联数组中的键，如下所示：

```
// assume field names are 'apple', 'bee', 'carrot', etc.
while($row = mysql_fetch_assoc($result)){    
    foreach($row as $key => $value) {
        // this will set variables as $apple, $bee, $carrot, etc.
        $$key = $value;
    }
} 
```

当然，如果您在结果集中获得多于一行，这并不是那么实用，因为变量只会被覆盖。

您想要做的关键是使用变量变量（`$$key`在这种情况下）

哦，是的，您也不应该使用 mysql_* 函数，而应该使用 mysqli_* 或 PDO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T18:47:37.367

```
foreach($array as $value){
    $newarray[] = ${$value};
    //Edited: maybe you'll need to reset the array after use it
    unset($newarray);
} 
```

知道了！

谢谢大家！

# git - 根据 git 分支选择 maven 配置文件

> ID：12220517
> 
> 赞同：4
> 
> 时间：2012-08-31T18:08:46.807
> 
> 标签：git, maven, mavanagaiata

是否可以根据当前的 git 分支选择配置文件？

例如，如果您在主分支中，它会选择“生产”配置文件。如果是开发分支，它会选择“开发”配置文件。

我找到了提供该属性的[mavanagaiata](https://github.com/koraktor/mavanagaiata)`mvngit.branch`插件，但它不能在该`<profiles>`部分中使用。

这样的事情可能吗？还是有更好的方法？我想要一种简单的方法来根据正在构建的分支自动选择正确的配置文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-05-21T19:26:28.190

1.  使用与您的 git 分支相同的配置文件 ID。
2.  使用相应的配置文件运行 maven：

    > mvn clean deploy -P $(git rev-parse --abbrev-ref HEAD)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T20:18:26.747

通过文件激活配置文件。然后只在对应的分支中创建文件，这样切换分支时文件会出现或消失，会影响配置文件的激活。

但是，我觉得基于 git 分支选择 maven 配置文件是个坏主意。

# mongodb - 如何决定配置服务器和 mongos 服务器的数量，同时对在 Mongo DB 中不断增长的现有数据库进行分片

> ID：12220518
> 
> 赞同：1
> 
> 时间：2012-08-31T18:08:52.770
> 
> 标签：mongodb, sharding

如果我有一个巨大的 mongo db 数据库，它有大约 4000 个正在无缝增长的集合，如果我决定实施分片。如何决定配置服务器和 mongos 服务器以及分片服务器的数量。我现在对分片非常熟悉，我只需要建议来决定服务器的数量。

提前感谢您提供的任何建议

# html - 的用法 用于格式化

> ID：12220520
> 
> 赞同：0
> 
> 时间：2012-08-31T18:08:53.843
> 
> 标签：html, css, layout, position, html-lists

我倾向于一直使用`<li>`来格式化和定位文本。这是可行的，我只是不想以错误的方式创建网站。我是新手，我想学习正确的方法。

*我是否以正确的方式使用无序列表？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:11:31.613

CSS 应该用于格式化和定位文本和元素。无序列表 ( `<ul>`) 仅用于语义；任何 HTML 元素也是如此。此外，虽然浏览器确实为某些元素应用了默认格式和样式，但不应严重依赖这些特定于浏览器的默认样式。

使用`<ul>`和/或`<ol>`因为你想显示一个或多个列表，不要使用它，因为浏览器会应用自动缩进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T18:12:19.363

一个列表就是一个列表。如果您的整个网站由列表内容组成，那么您应该使用列表。但如果不是，您应该记住，HTML 有更多的标签，而不仅仅是`UL`和`LI`。选择那些与内容语义相匹配的标签。例如`P`，文本段落甚至新的 HTML5 标签都喜欢`ARTICLE`包含整个帖子。

除了真实的列表内容，比如公司网站上的员工，我主要在两种情况下使用列表：A）作为导航菜单和 B）格式化表单（其中每个`LI`是表单行，包含 a`LABEL`和一些输入）。

# javascript - AngularJS - 如何处理控制器/服务中所需数据的长时间运行请求

> ID：12220521
> 
> 赞同：1
> 
> 时间：2012-08-31T18:08:56.003
> 
> 标签：javascript, asynchronous, angularjs

当我的 Angular 应用程序第一次加载时，我需要对一些相当大的数据提出几个请求。然后在控制器和服务中使用此数据来确定如何显示页面。我收到各种 JavaScript 错误，因为控制器和服务在请求返回之前尝试访问这些数据。

我知道在 HTML 页面中，您可以绑定到这个异步数据，当请求返回时，Angular 会为您填充它。但是，基于这些数据，我的控制器和服务中发生了一些非常复杂的逻辑。所以，我想我有两个问题。

1.  无论如何，有没有办法在控制器和服务中处理异步数据？
2.  有没有办法防止 Angular 在数据返回之前尝试渲染页面？这基本上使数据请求同步，我可以接受。这只会在初始的完整 HTML 页面加载时发生。

我在 jsFiddle 上的尝试可以在这里找到：http: [//jsfiddle.net/sES9T/](http://jsfiddle.net/sES9T/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T18:11:30.677

基本流程应该是这样的：在你的控制器函数中，发出 $http 请求，并在 success() 回调中，根据需要设置你的 $scope 变量。您的流程与此不同吗？

此外，使用**ng-show**指令隐藏您的 DOM 元素，直到范围具有您需要的数据。

您的控制器将如下所示：

```
MyCtrl = ( $scope, $http ) ->
  promise = $http.get "/url"
  promise.success ( data ) ->
    $scope.foo = data 
```

您的视图将如下所示：

```
div(ng-show="foo")
  p Here is my data, and some other stuff
  p {{ foo }} 
```

**编辑**

我在这里修改了你的jsfiddle：

[http://jsfiddle.net/sES9T/4/](http://jsfiddle.net/sES9T/4/)

它按预期工作，问题是您试图访问未定义变量的属性，这会引发错误。此外，在第三次测试中，变量命名错误，但命名正确时仍需要检查。

我建议使用 coffeescript，因为这些 if 语句可以使用存在 (?) 运算符变得更加简洁，如下所示：

```
myLargeData?.data 
```

该代码将在尝试访问它的属性之前检查 myLargeData 是否已定义且非空，就像我在上面手动完成的那样。如果它是 undefined 或 null，它将返回 undefined，而不是导致错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-27T16:08:25.717

我建议您使用路由器`resolve`来加载和处理所有必需的数据。只有当所有的解析都被真正解决时，控制器才会被执行。因此，在您的请求完成并处理数据之前，根本不会呈现视图。我确实相信这是一种更优雅和推荐的方法。

此外，您应该将所有数据加载和处理逻辑提取到一个单独的服务中，并将工作从解析中继到您的服务。您的服务应返回一个承诺对象，该对象将在所有处理完成后得到解决。

请参阅[$routeProvider 的文档](https://docs.angularjs.org/api/ngRoute/provider/$routeProvider)（“resolve”属性）。

# python - Python 以 mysql 结尾

> ID：12220523
> 
> 赞同：3
> 
> 时间：2012-08-31T18:09:09.923
> 
> 标签：python, mysql, encoding

我在 Python 代码中使用名为[Storm](http://code.activestate.com/recipes/496905-an-activerecord-like-orm-object-relation-mapper-un/)的 Active Record 来检索 MySQL 数据库中的一些记录。

问题是：我的表在'utf8_unicode_ci'中，但是当我检索对象时我得到'latin-1'属性，所以我需要做object.attr.decode('latin-1').encode('utf- 8') 这并不总是有效 - 抛出一些异常。

我的问题：这是python行为吗？MySQL的行为？与风暴有关的东西？

编码：

```
Storm.conn(user=db_user,db=db_name, passwd=db_passwd)
events = Event.select('*',status='=2',date_end='>=NOW()')
for event in events:
    now = datetime.datetime.now().strftime("%Y-%m-%d %H:%M")
    try:
        #here we need only utf-8 strings
        conn.index({"title": event.get_title(), "local": event.get_local(), "url": event.getUrl(), "description": event.get_description(), "artists": event.get_artists(), "tags": event.get_tags(), "picture": event.get_Picture(), "type": event.get_type(), 'date_begin': event.get_date_begin(), 'date_end': event.get_date_end(), '_ttl': event.get_ttl()}, "wf", "event", event.id)
        print 'Indexed - '+now+': '+str(event.id)
    except Exception,error:
        print 'Error - '+now+': '+str(event.id)+" - "+str(error) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T21:22:43.107

不知道堆栈的细节，但是对于 MySQL，您需要将连接的编码与表的编码分开设置。我有一些 unicode 表，我花了很长时间才意识到连接设置为 latin-1，所以我的 unicode 数据被解释为 Latin-1 字节并在远端“转换”为无意义的 unicode。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T18:31:35.053

也许这个答案看起来很愚蠢，但是尝试在解释器路径之后将其打印在 py 文件的顶部

```
#!/usr/bin/env python
# -*- coding: utf-8 -*- 
```

# javascript - 无法使网站工作。如何正确组装此代码？

> ID：12220524
> 
> 赞同：-4
> 
> 时间：2012-08-31T18:09:09.077
> 
> 标签：javascript, html, css

[http://jsfiddle.net/GxuqQ/](http://jsfiddle.net/GxuqQ/)

如果您单击上面的链接，您将看到我想要创建的示例。但现在我正试图采用这个例子。但它不起作用。

我创建了一个 HTML 文档、一个 CSS 文档和一个 JavaScript 文档。我将示例中的代码复制到正确的文档中。一切都应该工作。但事实并非如此。

我究竟做错了什么？

泡沫不起作用。它只是没有出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T19:17:47.987

就像我说的，您必须将其放在包含您在 JavaScript 中提到的 id 的 HTML 下方

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Test</title>
<style>
.pw-hint{
    display:none;
    position: absolute;
    border: 1px solid #999;
    -webkit-border-radius: 5px;
    background-color:#EEE;
    color:black;
    max-width:300px;
    font-size: 14px;
    padding:5px;
    margin-top:22px;
}

.pw-hint:after {
    /*http://css-tricks.com/speech-bubble-arrows-that-inherit-parent-color/*/
   content: "";
   position: absolute;
   top: -20px;
   left: 10px;
   border-bottom: 20px solid black;
   border-bottom-color: #EEE;
   border-left: 20px solid transparent;
   border-right: 20px solid transparent;
}

.pw-hint h2{
    font-size:20px;
    color:#D31515;
}
</style>    
</head>
<body>

<a href="#" id="link">click here</a>
<div class='pw-hint' id="hint"><h2>Warning!</h2> Lorem ipsum bla bla</div>
<script>
    document.getElementById("link").addEventListener("click", clicked);
      function clicked(){
       document.getElementById("hint").style.display = "block";
      }
</script>
</body>
</html> 
```

# c# - 通过 White 访问 DataGridView 单元格

> ID：12220527
> 
> 赞同：7
> 
> 时间：2012-08-31T18:09:30.833
> 
> 标签：c#, forms, datagridview, automation, white-framework

所以我正在用 White 进行一些 C# 自动化/UI 测试，但遇到了一些问题。我在应用程序中有一个 DataGridView，我根据应用程序状态设置了不同的背景单元格颜色。我想在使用白色的测试期间检查这些颜色，但这样做有困难。

这就是我想要做的工作。我可以获得网格视图，但只能作为表格。然后，我后来遇到了问题，因为我最终得到了普通的 TableCells 而不是 DataGridViewCells。

```
var Table = MainWindow.Window.Get<Table>("DataGridViewName");
var Row = Table.Rows[0];
var Cell = Row.Cells[0];
//invalid
//var Color = Cell.Style.BackColor; 
```

有没有人遇到过这个问题或有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T03:45:30.117

你确定背景色是通过 UI 自动化暴露的吗？从我完成的低级 UI 自动化编码中，我从未见过这样的属性。我刚刚打开 Inspect（类似于 UISpy）并将其指向 C# WinForms 应用程序中的 DataGridView，并且没有公开此类属性。

因此，由于它似乎没有暴露，因此无法通过自动化来解决它，除非捕获图像并将其与具有某个阈值的某个基线进行比较（听起来像一团糟）。

除非您可以以某种方式将信息嵌入到其他一些自动化属性中（这将需要更改被测应用程序），否则我看不到任何方法可以做到这一点。:(

# sql-server-2008 - SQL 检查两个日期和时间之间的记录

> ID：12220529
> 
> 赞同：1
> 
> 时间：2012-08-31T18:09:40.107
> 
> 标签：sql-server-2008

我有桌子，即**BookingDetails**。BookingDetails 包含以下字段。

> 客户ID
> 
> 日期从
> 
> 日期至
> 
> 时间从
> 
> 时间到

**BookingDetails**包含 n 条记录。

```
CustomerID    DateFrom     DateTo       TimeFrom    TimeTo
11137         2012-08-14   2012-08-16   00:33:46    03:33:46
11138         2012-08-15   2012-08-17   08:00:00    00:31:03
11139         2012-08-16   2012-08-17   22:46:25    00:46:25 
```

我想在给定信息**DateFrom**、**DateTo**、**TimeFrom**、**TimeTo**之间选择记录。

我有以下查询

```
declare @fDate date
set @fDate = '2012-08-14' 

declare @tDate date
set @tDate = '2012-08-16'

declare @fTime time
set @fTime ='12:33:46 AM'

declare @tTime time
set @tTime='12:31:03 AM'

SELECT BookingDetails.CustomerID
FROM BookingDetails 
WHERE  (DateFrom between @fDate and @tDate) And (BookingDetails.DateFrom >= @fDate     and BookingDetails.DateTo<=@tDate)
and(TimeFrom between CONVERT(varchar(15),cast(@fTime as time) , 108) and CONVERT(varchar(15),cast(@tTime as time) , 108))
and (TimeFrom >=CONVERT(varchar(15),cast(@fTime as time) , 108) and TimeTo <=CONVERT(varchar(15),cast(@tTime as time) , 108)) 
```

数据库中的时间保存为 24 小时格式。查询中使用的时间是 12 小时格式，这就是我在查询中将其转换为 24 小时格式的原因。

这个查询是正确的还是我必须改变它？

此查询不返回任何值。我想在**@fDate**、**@tDate**、**@fTime**、**@tTime之间选择记录**

我期望前两个 customerID 的结果，即 11137,11138

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:34:32.407

为什么不将开始和结束作为 DATETIME 而不是作为单独的值传递？事实上，为什么要单独存储 DATE 和 TIME ，因为很明显这些是时间点，而且这两个值在一起比分开更重要？无论如何，鉴于当前架构，您需要停止转换为字符串。尝试这个：

```
DECLARE @b TABLE (  
   CustomerID INT,
   DateFrom DATE,
   DateTo DATE,
   TimeFrom TIME,
   TimeTo TIME 
);

INSERT @b VALUES (11137,'2012-08-14','2012-08-16','00:33:46','03:33:46'),
                 (11138,'2012-08-15','2012-08-17','08:00:00','00:31:03'),
                 (11139,'2012-08-16','2012-08-17','22:46:25','00:46:25');

declare @fDate date
set @fDate = '2012-08-14' 

declare @tDate date
set @tDate = '2012-08-16'

declare @fTime time
set @fTime ='12:33:46 AM'

declare @tTime time
set @tTime='12:31:03 AM'

;WITH x AS 
(
  SELECT 
    CustomerID, DateFrom, TimeFrom, DateTo, TimeTo,
    [Start] = DATEADD(SECOND, DATEDIFF(SECOND,'00:00',TimeFrom), 
              CONVERT(DATETIME, DateFrom)),
    [End]   = DATEADD(SECOND, DATEDIFF(SECOND,'00:00',TimeTo),   
              CONVERT(DATETIME, DateTo))
  FROM @b
)
SELECT * FROM x WHERE [Start] 
  BETWEEN     CONVERT(DATETIME, @fDate) + CONVERT(DATETIME, @fTime)
          AND CONVERT(DATETIME, @tDate) + CONVERT(DATETIME, @tTime); 
```

# sql - DacPac 错误太大 - 但我的文件只有 406kb

> ID：12220530
> 
> 赞同：3
> 
> 时间：2012-08-31T18:09:43.173
> 
> 标签：sql, azure

我正在尝试将我的数据库上传到 SQL Azure。我已经创建了 DCA 包并开始了上传过程。但是，我立即收到以下错误：指定的 DacPac 太大。允许的最大 DacPac 大小为“5242880”字节。

我不明白为什么上传文件为 406KB 时出现此错误。

# php - 在文本区域外打印的值

> ID：12220540
> 
> 赞同：1
> 
> 时间：2012-08-31T18:10:26.680
> 
> 标签：php, textarea

我有这样的功能：

```
 function textarea(array $attributes){

         if(isset($attributes['name'])){
             $this->name = 'name="'.$attributes['name'].'"';
         }

         if(isset($attributes['id'])){
             $this->id = 'id="'.$attributes['id'].'"';
         }

         if(isset($attributes['class'])){
             $this->class = 'class="'.$attributes['class'].'"';
         }else{
             $this->class = 'class="aisisTextElement"';
         }

         if(isset($attributes['rows'])){
             $this->rows = 'rows="'.$attributes['rows'].'"';
         }

         if(isset($attributes['cols'])){
             $this->cols = 'cols="'.$attributes['cols'].'"';
         }

         if(isset($attributes['value'])){
             $this->value = $attributes['value'];
         }

         if(isset($attributes['style'])){
             $this->style = 'style="'.$attributes['style'].'"';
         }

         $build_aisis_element = "<textarea {$this->id} {$this->class} {$this->name} {$this->disabled}>{$this->value}</textarea>";                   
         echo $build_aisis_element;
     } 
```

并且每次我渲染它时，例如如果值是 Bob 我会得到类似的东西：

```
bob
<textarea></textarea> 
```

有什么想法吗？

我已经打开了所有 JavaScript，所以我可以 100% 准确地说它不是 js 这样做。

**按照要求.....**

创建文本区域的位置

```
function aisis_custom_text(){
    $option = get_option('aisis_core');
    $aisis_form = new AisisForm();

    $aisis_form->create_aisis_form_element('label', array('value'=>'Remove the Mini   Feed(s) from the site?'));
    $aisis_form->create_aisis_form_element('textarea', array(
        'rows'=>50,
        'cols'=>50,
        'name'=>'aisis_core[404_message]',
        'value'=>get_value('404_message')
    ));
} 
```

该值只是通过一种方法获得的

基本上，如果放入 test 然后返回 test 并且文本区域填充有 test

呈现出来的html：

```
 test<textarea class="aisisTextElement"name="aisis_core[404_message]"rows="50"cols="50"></textarea> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:07:29.147

最可能的问题是该值包含需要转义的字符。

您可以使用以下方法解决该问题：

```
 if(isset($attributes['value'])){
         $this->value = htmlspecialchars($attributes['value']);
     } 
```

您输出到 html 并且不应该包含 html（标签）的所有字符串都需要以这种方式进行转义。

# database-design - 一个字段包含多个值或多个字段

> ID：12220541
> 
> 赞同：0
> 
> 时间：2012-08-31T18:10:42.120
> 
> 标签：database-design

我正在建立CCG卡的数据库。每张卡都有关键字，例如“闪电”或“水”，每张卡可以有多个关键字。

所以问题是“将每个关键字放在自己的字段中并保存是否更好，或者将所有关键字保存在一个字段中并将它们解析出来或搜索功能是否更好？”

卡牌游戏未来可能会添加更多关键字，并且卡牌的多个方面都遵循与关键字相同的原则（即在一个字段中有很多选项。）

我有点担心有一个超过 50 列的表。提前感谢所有帮助和答案。如果我需要澄清，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T18:12:09.103

两者都不。

您应该有一个表格，每个卡片关键字组合有一行。

IE

```
CardID   Keyword
1        lightning
1        water
2        lightning
3        mountain 
```

如果要重复关键字，您可能需要添加一个关键字表，并将 ID 放在此联结表中。

```
CardID   KeywordID
1        1
1        2
2        1
3        3 
```

关键词

```
KeywordID Keyword
1         Lightning
2         Water
3         Mountain 
```

这称为“[标准化](http://en.wikipedia.org/wiki/Database_normalization)”。意见各不相同，但恕我直言，总的来说，您至少应该瞄准“[第三范式](http://en.wikipedia.org/wiki/Third_normal_form)”，最好是更高。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T18:49:02.643

如果您分别访问关键字，但将它们一起存储在同一字段中，则**违反了[原子性](http://en.wikipedia.org/wiki/1NF#Atomicity)**原则，因此违反了第一范式。

这是不好的！最糟糕的是，您将无法有效地搜索数据¹，最坏的情况是，您的数据库将无法抵御无效数据²。

因此，请务必将每个关键字保留在其单独的字段中，但这并不一定意味着这些字段应该位于不同的列中。如果有不同*类型*的关键字应该以某种方式进行不同的处理，那么为每种类型设置一个列是有意义的。此外，如果每张卡的关键字仅限于少数，则单独的列*可能是合理的。*³

但是，在您的情况下，我怀疑所有关键字都被平等对待，并且您不需要对它们的数量进行任何限制，从而导致经典的一对多关系，正如[podiluska 已经解释](https://stackoverflow.com/a/12220559/533120)的那样。

* * *

*¹索引不适用于“部分”字段。*

*²例如，如果用于分隔同一字段中的关键字的字符作为关键字本身的一部分给出，无论是因为错误还是故意？您是否需要任何长度限制、大写/小写限制？等等，等等……理论上所有这些都可以在应用程序级别强制执行，但是有[很好的理由说明](https://stackoverflow.com/a/7439632/533120)为什么在数据库级别强制执行它们更可取。*

*³尽管可以说有更好的解决方案来施加这样的限制。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T10:46:18.503

我只想在这里补充一点，非规范化（包括非第一范式设计，如字段中的许多值）是高级的东西，有很多潜在的问题。有时它们是需要的，但到目前为止，您还没有向我们展示任何原因。此外，当您使用这样的东西时，您真的想确保自己知道自己在做什么，并且可以在需要时将数据分解为规范化的形式。

所以从规范化的形式开始。如果您在这里询问，请阅读规范化并学习使用它。然后仅在您需要的地方（通常是为了表达数据约束）将非规范化到必要的程度。如果您要问哪个更好，并且没有充分的理由在一个字段中使用许多值，那么您最好按照其他评论者的建议将其拆分到另一个表中。

# c++ - 快速排序优化

> ID：12220546
> 
> 赞同：3
> 
> 时间：2012-08-31T18:11:09.980
> 
> 标签：c++, algorithm, sorting, optimization, quicksort

我正在学习排序算法，下一步，我试图让我的实现接近`std::sort()`. 到目前为止，我还很远.. :-)

我有 3 个快速排序的实现：

*   标准快速排序（使用临时数组）。
*   具有以下优化的快速排序：
    *   中位数3用于选择中位数
    *   尾递归
    *   快速排序仅适用于小于 16 的分区大小。对于较小的分区，使用插入排序。
    *   插入排序一次应用于整个数组，而不是应用于每个分区，快速排序未排序。
*   具有上面列出的所有优化 + 就地分区（无临时数组）的快速排序。

我希望性能最好是自下而上，但最好是自上而下！

我的实施有什么问题？鉴于性能之间的巨大差异，我认为这是完全错误的。

一些数字可以让您了解情况有多糟糕（N = 数组中的元素数，数字是每个算法所花费的时间，以微秒为单位）：排序`vector<int>`并且每个算法都给出完全相同的数字序列。

```
N           quick       mixed       mixed_inplace
8           0           0           0
16          0           1           1
32          1           2           2
64          1           3           3
128         1           8           8
256         3           16          17
512         6           34          41
1,024       16          84          87
2,048       28.3        177.1       233.2
4,096       48.5        366.6       410.1
8,192       146.5       833.5       1,012.6
16,384      408.4       1,855.6     1,964.2
32,768      1,343.5     3,895.0     4,241.7
65,536      2,661.1     7,927.5     8,757.8 
```

* * *

**使用 Visual Studio Express 2010。**

代码：

```
// ------------ QUICK SORT ------------------
template<typename T, typename key_compare>
void quicksort( T first, T last, const size_t pivot_index, key_compare comp ) {
    T saved_first = first;
    size_t N = last - first;
    if (N > 1) {
        // create a temp new array, which contains all items less than pivot
        // on left and greater on right. With pivot value in between.
        // vector<typename decltype(*T)> temp(N);
        typename iterator_traits<T>::pointer temp = (typename iterator_traits<T>::pointer) malloc(sizeof(T)*N);
        size_t left_index = 0, right_index = N - 1 ;
        iterator_traits<T>::value_type pivot_val = *(first + pivot_index);
        for(; first < saved_first + pivot_index; first++) {
            if( !comp(*first, pivot_val) )
                temp[right_index--] = *first;
            else
                temp[left_index++] = *first;
        }
        // skip the pivot value
        // TODO: swap the pivot to end so we can have a single loop instead.
        ++first;
        // do the rest
        for(; first < last; first++) {
            if( !comp(*first, pivot_val) )
                temp[right_index--] = *first;
            else
                temp[left_index++] = *first;
        }
        if( right_index == left_index )
            temp[left_index] = pivot_val;
        else
            temp[left_index+1] = pivot_val;
        // recurse for left and right..
        quicksort(temp, temp+left_index, left_index/2, comp);
        quicksort(temp+left_index+1, temp+N, (N-right_index)/2, comp);

        // return a concat'd array..
        for(size_t i = 0; i < N; i++)
            *saved_first++ = temp[i];

        free(temp);
    }
}
/*
** best, average, worst: n log n, n log n, n^2
** space: log n
*/
template<typename T, typename key_compare >
void quicksort( T first, T last, key_compare comp ) {
    size_t pivot_index = (last - first) / 2;
    quicksort( first, last, pivot_index, comp);
} 
```

* * *

```
// ------------ QUICK with optimizations ------------------
/*
quicksort partition on range [first, last[ using predicate function as the comparator.
"mid" is in-out param, function uses mid as mid, and updates it before returning it with
current/new mid position after partitioning.
*/
template<typename T, typename key_compare >
void _partial_quicksort_partition( T first, T last, T& mid, key_compare comp ) {
    T savedFirst = first;
    typedef typename iterator_traits<T>::value_type _val_type;
    size_t N = last - first;
    _val_type *temp = (_val_type *) malloc((N*sizeof(_val_type)));

    // move pivot to the end..
    _val_type pivot_val = *mid;
    std::swap(*mid, *(last - 1));
    size_t left_index = 0, right_index = N - 1;

    for( ; first != last - 1; first++ ) {
        if( !comp(*first, pivot_val) )
            temp[right_index--] = *first;
        else
            temp[left_index++] = *first;
    }

    assert( right_index == left_index );

    temp[left_index] = pivot_val;

    std::copy(temp, temp+N, savedFirst);
    free(temp);
    mid = savedFirst + left_index;
}

template<typename T, typename key_compare >
void _partial_quicksort( T first, T last, key_compare comp ) {
    size_t s = last - first;
    // sort only if the list is smaller than our limit.. else it's too small for
    // us to bother.. caller would take care of it using some other stupid algo..
    if( 16 > s ) {
        // only one call to insertion_sort(), after whole array is partially sorted
        // using quicksort().
        // my_insertion_sort::insertion_sort(first, last, pred);
        return ;
    }

    // select pivot.. use median 3
    T mid = my_mixed_inplace_quicksort::median3(first, last - 1, s, comp);
    // partition
    _partial_quicksort_partition(first, last, mid, comp);
    // recurse..
    _partial_quicksort(first, mid, comp);
    // tail recurse..
    // TODO: tail recurse on longer partition..
    _partial_quicksort(mid+1, last, comp);
}

template<typename T, typename key_compare >
void mixed_quicksort( T first, T last, key_compare pred ) {
    _partial_quicksort(first, last, pred );
    my_insertion_sort::insertion_sort(first, last, pred);
} 
```

* * *

```
// ------------ "in place" QUICK with optimizations ------------------
/*
in place quicksort partition on range [first, last[ using predicate function as the comparator.
"mid" is in-out param, function uses mid as mid, and updates it before returning it with
current/new mid position after partitioning.
*/
template<typename T, typename key_compare >
void _partial_inplace_quicksort_partition( T first, T last, T& mid, key_compare comp ) {
    typename iterator_traits<T>::value_type midVal = *mid;
    // move pivot to end..
    std::swap(*mid, *(last - 1));
    mid = first;
    // in-place quick sort:
    for( ; first < last - 1; first++ ) {
        if( comp(*first, midVal) ) {
            std::swap(*first, *mid);
            mid++;
        }
    }
    // bring pivot to the mid..
    std::swap(*mid, *(last - 1));
}

// brings best median to middle and returns it..
// works on array as [first, last] NOT [first, last[
template<typename T, typename key_compare >
T median3(T first, T last, size_t size, key_compare comp ) {
    T mid = first + size/2;
    if (comp(*mid, *first)) {
        std::swap(*mid, *first);
    }
    if (comp(*last, *mid)) {
        std::swap(*last, *mid);
    }
    if (comp(*mid, *first)) {
        std::swap(*mid, *first);
    }
    return mid;
}

template<typename T, typename key_compare >
void _partial_inplace_quicksort( T first, T last, key_compare comp ) {
    size_t s = last - first;
    // sort only if the list is smaller than our limit.. else it's too small for
    // us to bother.. caller would take care of it using some other stupid algo..
    if( 16 > s ) {
        // only one call to insertion_sort(), after whole array is partially sorted
        // using quicksort().
        // my_insertion_sort::insertion_sort(first, last, pred);
        return ;
    }

    // select pivot.. use median 3
    T mid = median3(first, last - 1, s, comp);
    // partition
    _partial_inplace_quicksort_partition(first, last, mid, comp);
    // recurse..
    _partial_inplace_quicksort(first, mid, comp);
    // tail recurse..
    _partial_inplace_quicksort(mid+1, last, comp);
    // print_array(first, last, "_partial_inplace_quicksort(exit2)" );
}

// in-place quick sort
// tail recurse
// median
// final insertion sort..
template<typename T, typename key_compare >
void mixedsort_inplace( T first, T last, key_compare pred ) {
    _partial_inplace_quicksort(first, last, pred );
    my_insertion_sort::insertion_sort(first, last, pred);
} 
```

* * *

```
// ---------------- INSERTION SORT used above ----------------
namespace my_insertion_sort {
    template<typename T, typename key_compare>
    void insertion_sort( T first, T last, key_compare comp ) {
        // for each element in the array [first+1, last[
        for( T j = first+1; j < last; j++) {
            iterator_traits<T>::value_type curr = *j;
            T hole = j;
            // keep moving all the elements comp(hole.e. > or <) hole to right
            while( hole > first && comp(curr, *(hole-1)) ) {
                *hole = *(hole-1);
                --hole;
            }
            // insert curr at the correct position.
            *hole = curr;
        }
    }
} 
```

* * *

用于测试的代码：

```
#include <ctime>
#ifdef _WIN32
#include <Windows.h>
#include <WinBase.h>
#endif // _WIN32

template<typename T, typename key_compare = std::less<T>> class MySortAlgoTester;

template <typename T>
void print_array( T begin, T end, string prefix = "" ) {
    cout << prefix.c_str();
    for_each(begin, end, []( typename std::iterator_traits<T>::reference it) { cout << it << ','; } );
    cout << endl;
}

int main () {
    srand(123456789L);
    size_t numElements = 4;
    vector<char*> algoNames;
    map<double, vector<double>> results;
    int numTests = 0;
    while( (numElements *= 2) <= 4096*16 ) {
        MySortAlgoTester<int> tester(numElements);
        results[numElements] = vector<double>();
        algoNames.push_back("mixedsort_inplace");
        results[numElements].push_back(tester.test(my_mixed_inplace_quicksort::mixedsort_inplace, "mixedsort_inplace"));
        tester.reset();
        algoNames.push_back("quick");
        results[numElements].push_back(tester.test(my_quicksort::quicksort, "quicksort"));
        tester.reset();
        algoNames.push_back("mixed_quicksort");
        results[numElements].push_back(tester.test(my_mixed_quicksort::mixed_quicksort, "mixed_quicksort"));
    }
    // --- print the results...
    cout << std::setprecision(2) << std::fixed << endl << "N";
    for_each(algoNames.begin(), algoNames.begin()+(algoNames.size()/numTests), [](char* s){cout << ',' << s ;} );

    typedef std::pair<double,vector<double>> result_iter;
    BOOST_FOREACH(result_iter it, results) {
        cout << endl << it.first << ',';
    BOOST_FOREACH( double d, it.second ) {
        cout << d << ',' ;
    }
}

template<typename T, typename key_compare = std::less<T>>
class MySortAlgoTester {
    key_compare comp;
    vector<T> vec;
    typedef typename vector<T>::iterator vecIter;
    vector<T> vec_copy;
    size_t m_numElements;
    bool is_sorted(vecIter first, vecIter last) {
        vecIter sFirst = first;
        for(vecIter next = first+1; next != last;)
            // '>' associativity: left to right
            // ++ has precedence over >
            if( !comp(*(first++), *(next++)) ) {
                if(*(next-1) == *(first-1))
                    continue;
                print_array(sFirst, last, "is_sorted() returning false: ");
                cout << "comp(" << *(first-1) << ", " << *(next-1) << ") = false && "
                    << *(next-1) << " != " << *(first-1) << endl ;
                return false;
            }

            return true;
    }

public:
    MySortAlgoTester(size_t numElements) : m_numElements(numElements) {
        srand(123456789L);
        vec.resize(m_numElements);
        vec_copy.resize(m_numElements);
        //      std::generate(vec.begin(), vec.end(), rand);
        for(size_t i = 0; i < vec.size(); i++) {
            vec[i] = rand() % (m_numElements * 2);
            vec_copy[i] = vec[i];
        }
    }
    ~MySortAlgoTester() {
    }

    void reset() {
        // copy the data back so next algo can be tested with same array.
        std::copy(vec_copy.begin(), vec_copy.end(), vec.begin());
        for(size_t i = 0; i < vec_copy.size(); i++) {
            vec[i] = vec_copy[i];
        }
        // std::copy(vec_copy.begin(), vec_copy.end(),  vec);
    }

    double m___start_time_asdfsa = 0;
    double getTimeInMicroSecs() {
    #ifdef _WIN32
        LARGE_INTEGER li;
        if(!QueryPerformanceFrequency(&li))
            cout << "getTimeInMicroSecs(): QueryPerformanceFrequency() failed!" << endl;

        QueryPerformanceCounter(&li);
        return double(li.QuadPart)/1000.0;

    #else // _WIN32
        struct timeval tv;
        gettimeofday(&tv, NULL);
        return tv.tv_usec + 10e6 * tv.tv_sec;
    }
    #endif // _WIN32

    inline void printClock( const char* msg ) {
        cout << msg << (long)(getTimeInMicroSecs() - m___start_time_asdfsa) << " micro seconds" << endl;
    }
    inline double getClock() {
        return (getTimeInMicroSecs() - m___start_time_asdfsa);
    }
    inline void startClock() {
        m___start_time_asdfsa = getTimeInMicroSecs();
    }

    double test( void (*sort_func)(typename vector<T>::iterator first, typename vector<T>::iterator last, typename key_compare pred), const char* name ) {
        cout << "START Testing: " << name << ". With --- " << m_numElements << " elements." << endl;
        startClock();

        sort_func(vec.begin(), vec.end(), comp);
        double ms = getClock();
        if(!MySortAlgoTester::is_sorted(vec.begin(), vec.end())) {
            cout << name << " did not sort the array." << endl;
            // throw string(name) + " did not sort the array.";
        }
        cout << "DONE Testing: " << name << ". Time taken (ms): " << ms << endl;
        return ms;
    }

    double test( void (*sort_func)(typename vector<T>::iterator first, typename vector<T>::iterator last), const char* name ) {
        cout << "START Testing: " << name << ". With --- " << m_numElements << " elements." << endl;
        startClock();

        sort_func(vec.begin(), vec.end());
        double ms = getClock();
        if(!MySortAlgoTester::is_sorted(vec.begin(), vec.end())) {
            cout << name << " did not sort the array." << endl;
            // throw string(name) + " did not sort the array.";
        }
        cout << "DONE Testing: " << name << ". Time taken (ms): " << ms << endl;
        return ms;
    }
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T18:14:00.843

您的算法本身存在错误。例如，这里有未定义的行为：

插入排序可能会在标记的以下行中读取越界：

```
*(hole--) = *(hole-1); 
```

它在第一个元素之前读取。我建议你的意思是

```
*hole = *(hole-1);
--hole; 
```

**在 64 位 Linux 上使用 GNU g++ 4.6.1 快速**更新。**我将时间重新安排为总计，因此我不必重新实现时钟功能（我很懒）。**

 **改编代码：http: **[//ideone.com/LgAgs](http://ideone.com/LgAgs)**

内置

```
g++ -std=c++0x -g -O3 test.cpp -o test 
```

结果如下：插入排序似乎比其他**排序慢约 60-100 倍**。

```
START Testing: insertion_sort. With --- 8 elements.
START Testing: insertion_sort. With --- 16 elements.
START Testing: insertion_sort. With --- 32 elements.
START Testing: insertion_sort. With --- 64 elements.
START Testing: insertion_sort. With --- 128 elements.
START Testing: insertion_sort. With --- 256 elements.
START Testing: insertion_sort. With --- 512 elements.
START Testing: insertion_sort. With --- 1024 elements.
START Testing: insertion_sort. With --- 2048 elements.
START Testing: insertion_sort. With --- 4096 elements.
START Testing: insertion_sort. With --- 8192 elements.
START Testing: insertion_sort. With --- 16384 elements.
START Testing: insertion_sort. With --- 32768 elements.
START Testing: insertion_sort. With --- 65536 elements.

real    0m1.532s
user    0m1.524s
sys 0m0.004s
START Testing: quicksort. With --- 8 elements.
START Testing: quicksort. With --- 16 elements.
START Testing: quicksort. With --- 32 elements.
START Testing: quicksort. With --- 64 elements.
START Testing: quicksort. With --- 128 elements.
START Testing: quicksort. With --- 256 elements.
START Testing: quicksort. With --- 512 elements.
START Testing: quicksort. With --- 1024 elements.
START Testing: quicksort. With --- 2048 elements.
START Testing: quicksort. With --- 4096 elements.
START Testing: quicksort. With --- 8192 elements.
START Testing: quicksort. With --- 16384 elements.
START Testing: quicksort. With --- 32768 elements.
START Testing: quicksort. With --- 65536 elements.

real    0m0.025s
user    0m0.016s
sys 0m0.008s
START Testing: mixed_quicksort. With --- 8 elements.
START Testing: mixed_quicksort. With --- 16 elements.
START Testing: mixed_quicksort. With --- 32 elements.
START Testing: mixed_quicksort. With --- 64 elements.
START Testing: mixed_quicksort. With --- 128 elements.
START Testing: mixed_quicksort. With --- 256 elements.
START Testing: mixed_quicksort. With --- 512 elements.
START Testing: mixed_quicksort. With --- 1024 elements.
START Testing: mixed_quicksort. With --- 2048 elements.
START Testing: mixed_quicksort. With --- 4096 elements.
START Testing: mixed_quicksort. With --- 8192 elements.
START Testing: mixed_quicksort. With --- 16384 elements.
START Testing: mixed_quicksort. With --- 32768 elements.
START Testing: mixed_quicksort. With --- 65536 elements.

real    0m0.016s
user    0m0.004s
sys 0m0.008s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T16:35:09.940

所以最后我想我至少找出了部分问题所在。

**感谢sehe的提示。**

*   使用`-O3`（在 GCC 或`/Ox`MSVC 上）编译时，`mixed_inplace`速度最快且非常接近`std::sort()`
    *   我想这意味着在较低优化级别进行编译时，编译器至少没有应用一些预期的优化（尾递归）。
*   构建应该是发布构建（`-g`在 GCC 上没有）。
*   @sehe：插入排序性能无关紧要。
*   `std::sort()`GCC 和 MSVC 上的实现是不同的，因此比较两者并不正确。

以下是在 Windows 和 linux 上使用和不使用优化选项的结果：

带有 MSVC 的 Windows： ![带有 MSVC 的 Windows](../Images/9dc77387ba80de0cbf4e2cea8386fbe4.png)

带有 GCC 的 Windows： ![在此处输入图像描述](../Images/5f70f1b4acc4db11ba85f2212dc25bbc.png)

带有 GCC 的 RedHat Linux： ![带有 GCC 的 RHEL](../Images/9bda84c63111ba7ea3627ae53ff9b8b1.png)**

# c# - 将空行缩短为一行 c# Regex

> ID：12220547
> 
> 赞同：1
> 
> 时间：2012-08-31T18:11:20.413
> 
> 标签：c#, regex

我有一些文字

```
This is a line

This is other line

This is another line 
```

**如何摆脱那些多空行？**

我想要的是

```
This is a line

This is other line

This is another line 
```

**\s**表示匹配任何空白字符（空格、制表符、换行符），但我无法弄清楚如何将多个空行变为一个空行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T18:16:53.790

```
Regex.Replace(input, @"(\r?\n\s*){2,}", Environment.NewLine + Environment.NewLine); 
```

`\r`作为可选的，它可以与 Unix 风格的行终止符一起使用。不过，输出将具有 Windows 样式的终止符。

`\s*`允许它匹配包含空格的行。（我最初放在`?`这里是为了使匹配不贪婪，但这实际上不是必需的，在这种情况下可能是有害的。在 .NET 正则表达式中，`\s`不要`.`将换行符与默认的. 匹配`RegexOptions`。）

`{2,}`确保它只匹配两个仅由空格分隔的连续换行符。

# android - 在 Android ICS 中通过 Web 浏览器下载 PDF 文件

> ID：12220554
> 
> 赞同：2
> 
> 时间：2012-08-31T18:11:45.060
> 
> 标签：android, pdf, browser

我需要在移动浏览器中显示 PDF 文档，而不询问用户是否要下载它。使用 Safari (iOs) 我可以完美地做到这一点，但是当我尝试使用 Android 的（版本 ICS）本机浏览器（称为“Internet”）做同样的事情时，文件被下载，甚至下载似乎也不起作用.. 下载完成后，文件显示为*Download unsuccessful*，我无法使用PDF文件阅读器打开它。

对于所有其他非移动浏览器，相同的链接下载工作正常。我相信问题出在我需要添加到响应中的一些标题中。

我将**Content-Type**设置为**application/pdf**并将**Content-Disposition**设置为**inline;filename="report.PDF"**

有没有人有同样的问题？谁知道解决方案？:)

谢谢！

卢卡斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T20:05:44.150

android 浏览器没有默认的内置 PDF 支持，因此无法轻松做到这一点。

但是，您可以做两件事。

1）从Play商店下载并安装adobe reader，然后尝试以下代码

首先，您在设备内存上创建一个文件，然后将 pdf 数据读入其中。“theurl”是 pdf 所在的 url

```
InputStream in = null;
File dst = new File(Environment.getExternalStorageDirectory()+"/myPDF.pdf");
    try {
        in = theurl.openStream();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }               
    OutputStream out = null;
try {
    out = new FileOutputStream(dst);
} catch (FileNotFoundException e) {

    // TODO Auto-generated catch block
}
     // Transfer bytes from in to out
     try {
        byte[] buf = new byte[100000];
        int len;
    while ((len = in.read(buf)) > 0) {
      out.write(buf, 0, len);
     }
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
     try {
    in.close();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
     try {
    out.close();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
    Intent intent = new Intent();
    Uri path = Uri.fromFile(dst);
    intent.setDataAndType(path, "application/pdf");
    startActivity(intent); 
```

这将下载pdf，在您的设备内存中创建它，然后意图将使用您设备上的adove阅读器通过您的应用程序打开它。

另一种选择是

2）去**http://jaspreetchahal.org/android-how-to-open-pdf-file-within-the-browser/**看看那个人是怎么做到的

# php - Socialengine 4 - 使用 PHP 设置模块标题

> ID：12220555
> 
> 赞同：3
> 
> 时间：2012-08-31T18:11:55.610
> 
> 标签：php, module, socialengine

我正在为 Socialengine 4 编写一个小模块，但找不到使用 php 为模块设置页面标题（标签）的可能性。

这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:48:10.057

使用 Zend 框架的[HeadTitle Helper](http://framework.zend.com/manual/1.12/en/zend.view.helpers.html#zend.view.helpers.initial.headtitle)。

# grid - 渲染 ZK 后的网格滚动

> ID：12220557
> 
> 赞同：0
> 
> 时间：2012-08-31T18:12:01.903
> 
> 标签：grid, zk

在设置模型后，我试图向下滚动到网格的底部。

1）我设置模型：

```
myGrid.setModel(new ListModelList<Object>(myList)); 
```

2）我覆盖了行渲染器

```
myGrid.setRowRenderer(new RowRenderer<Object>() {
        @Override
        public synchronized void render(Row row,final Object data, int index) throws Exception {                    
            row.setStyle("commonCellPadding");
                            .
                            .
                            .

            row.appendChild(htmlMessage);
        }           
    }); 
```

3）最后，如果用于设置模型的列表太大（.zul 中的网格具有固定高度）我想显示最后的结果（在这种情况下是最近的）。我需要在渲染后自动向下滚动。我怎样才能做到这一点？

我尝试过的事情

a) 在渲染后调用 javascript 函数，这不起作用，因为 gridEle.scrollHeight 属性返回 zul 中设置的网格的固定高度（如果不是，则返回 0）而不是模型之后的网格高度被设置。

```
myGrid.addEventListener(ZulEvents.ON_AFTER_RENDER, new EventListener<Event>() {
        public void onEvent(Event event) throws Exception
        {

            Clients.evalJavaScript("var gridEle = document.getElementById('"+myGrid.getUuid()+"-body"+"'); gridEle.scrollTop = gridEle.scrollHeight;alert(gridEle.scrollHeight);");             
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:51:40.373

为什么不首先对 myList 进行降序排序以使最后一行成为第一行而不是控制滚动条？
在我看来，它会更容易并匹配用户体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T07:39:59.850

只需`Clients.scrollIntoView(rows.getLastChild());`在设置模型和行渲染器后调用（提供`rows`的是 Rows 组件 ID，并且已经自动连接到您的控制器）。[在此处](http://zkfiddle.org/direct/22h1jqu/4/v6.0.1-scroll-grid-to-last-row-after-render?run=25man96)查看 zkfiddle 上的现场演示和[来源](http://zkfiddle.org/sample/22h1jqu/4-scroll-grid-to-last-row-after-render)

**更新**：`Clients.scrollIntoView(Component)`如果您使用的是[按需渲染](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/Performance_Tips/Listbox,_Grid_and_Tree_for_Huge_Data/Turn_on_Render_on_Demand)功能，则无法正常工作，因为如果您要滚动到的行自然不会在初始页面加载时加载。

# java - ItemListener 类的包

> ID：12220563
> 
> 赞同：0
> 
> 时间：2012-08-31T18:12:31.973
> 
> 标签：java, swing, checkbox, itemlistener

我正在从 Dive Log 教程中学习 java swing。一个对象被声明如下：

```
ItemListener handler = new CheckBoxHandler(); 
```

上面会产生一个编译错误，说缺少 ItemListener 类。已进行的进口如下：

```
import java.awt.*;
import javax.swing.*; 
```

请告诉我哪个导入可以解决问题。ps 我认为这些信息可能无关紧要，但我仍然使用的是 NetBeans IDE。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:16:22.263

Oracle 非常乐意为此目的[发布文档；）](http://docs.oracle.com/javase/7/docs/api/)

中`ItemListener`定义`java.awt.event.ItemListener`。
因此，您需要这样做，`import java.awt.event.*;`因为 java 不会自动导入子命名空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T18:16:41.497

包是`java.awt.event`.

```
import java.awt.event.ItemListener; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T18:19:10.863

**接口** `ItemListener`在下面的包中...

包裹是`java.awt.event`

# ios - 转换为节点/世界空间

> ID：12220564
> 
> 赞同：0
> 
> 时间：2012-08-31T18:12:34.140
> 
> 标签：ios, cocos2d-iphone, coordinates, coordinate-transformation

我在 cocos2d 中有一个 CCLayer，我正在尝试放置一个 CCSprite 来填充背景。在我的场景中有这个 CCLayer 的两个实例，其中一个，背景显示在正确的位置，有一点偏移，但另一个我无法让图层显示。我有一种感觉，这归结为没有使用 self/self.parent/self.parent.parent 和 convertTo/Node/World/AR/Space 的正确组合。

这是我的代码，适用于该层的一个实例：

```
CGPoint offsetPos = [self convertToWorldSpace:self.position];
if(UIDeviceOrientationIsLandscape([UIApplication sharedApplication].statusBarOrientation)){
    bgSprite.position = ccp(offsetPos.x+60, offsetPos.y);
} else {
    bgSprite.position = ccp(offsetPos.x-65, offsetPos.y);
} 
```

为了尝试查看另一层的绊脚石（由`isThumbnail`属性确定，我添加了一些日志记录：

```
if(self.isThumbnail){
        NSLog(@"--: %.0f,%.0f", self.bgSprite.position.x, self.bgSprite.position.x);
        NSLog(@"A: %.0f,%.0f", [self.parent convertToWorldSpace:self.bgSprite.position].x, [self.parent convertToWorldSpace:self.bgSprite.position].y);
        NSLog(@"B: %.0f,%.0f", [self convertToWorldSpace:self.bgSprite.position].x, [self convertToWorldSpace:self.bgSprite.position].y);
        NSLog(@"C: %.0f,%.0f", [self.parent convertToNodeSpace:self.bgSprite.position].x, [self.parent convertToNodeSpace:self.bgSprite.position].y);
        NSLog(@"D: %.0f,%.0f", [self convertToNodeSpace:self.bgSprite.position].x, [self convertToNodeSpace:self.bgSprite.position].y);
        NSLog(@"E: %.0f,%.0f", [self.parent convertToWorldSpaceAR:self.bgSprite.position].x, [self.parent convertToWorldSpaceAR:self.bgSprite.position].y);
        NSLog(@"F: %.0f,%.0f", [self convertToWorldSpaceAR:self.bgSprite.position].x, [self convertToWorldSpaceAR:self.bgSprite.position].y);

        NSLog(@"--: %.0f,%.0f", self.position.x, self.position.x);
        NSLog(@"G: %.0f,%.0f", [self.parent convertToWorldSpace:self.position].x, [self.parent convertToWorldSpace:self.position].y);
        NSLog(@"H: %.0f,%.0f", [self convertToWorldSpace:self.position].x, [self convertToWorldSpace:self.position].y);
        NSLog(@"I: %.0f,%.0f", [self.parent convertToNodeSpace:self.position].x, [self.parent convertToNodeSpace:self.position].y);
        NSLog(@"J: %.0f,%.0f", [self convertToNodeSpace:self.position].x, [self convertToNodeSpace:self.position].y);
        NSLog(@"K: %.0f,%.0f", [self.parent convertToWorldSpaceAR:self.position].x, [self.parent convertToWorldSpaceAR:self.position].y);
        NSLog(@"L: %.0f,%.0f", [self convertToWorldSpaceAR:self.position].x, [self convertToWorldSpaceAR:self.position].y);

        NSLog(@"--: %.0f,%.0f", self.bgSprite.position.x, self.bgSprite.position.x);
        NSLog(@"M: %.0f,%.0f", [self.parent.parent convertToWorldSpace:self.bgSprite.position].x, [self.parent.parent convertToWorldSpace:self.bgSprite.position].y);
        NSLog(@"N: %.0f,%.0f", [self.parent.parent convertToNodeSpace:self.bgSprite.position].x, [self.parent.parent convertToNodeSpace:self.bgSprite.position].y);
        NSLog(@"O: %.0f,%.0f", [self.parent.parent convertToWorldSpaceAR:self.bgSprite.position].x, [self.parent.parent convertToWorldSpaceAR:self.bgSprite.position].y); 
```

导致：

```
ReadMeAStory[3853:c07] --: -55,-55
ReadMeAStory[3853:c07] A: -55,587
ReadMeAStory[3853:c07] B: -45,1074
ReadMeAStory[3853:c07] C: -55,487
ReadMeAStory[3853:c07] D: -65,0
ReadMeAStory[3853:c07] E: -55,587
ReadMeAStory[3853:c07] F: -45,1074
ReadMeAStory[3853:c07] --: 10,10
ReadMeAStory[3853:c07] G: 10,537
ReadMeAStory[3853:c07] H: 20,1024
ReadMeAStory[3853:c07] I: 10,437
ReadMeAStory[3853:c07] J: 0,-50
ReadMeAStory[3853:c07] K: 10,537
ReadMeAStory[3853:c07] L: 20,1024
ReadMeAStory[3853:c07] --: -55,-55
ReadMeAStory[3853:c07] M: -55,537
ReadMeAStory[3853:c07] N: -55,537
ReadMeAStory[3853:c07] O: 309,954 
```

有人可以解释在这种情况下需要哪一个，也许怎么知道？

编辑：背景精灵被添加到层次结构中：

```
 UIImage *bgImage = [Utils backgroundWithName:currentScene.background];
    bgSprite = [CCSprite spriteWithCGImage:bgImage.CGImage key:currentScene.background];
    bgSprite.contentSize = self.contentSize;
    [self updateBackground];
    [self addChild:bgSprite z:0]; 
```

层次结构看起来像这样（括号显示添加元素的顺序）

```
-Scene
--Main layer (1) - background in correct position
--Other layers container (2)
---Other layer A (3)
----Background sprite (7)
---Other layer B (4)
----Background sprite (8)
---Other layer C (5)
----Background sprite (9)
---Other layer D (6)
----Background sprite (10) 
```

# monit - 在监视器中延迟重新启动进程

> ID：12220566
> 
> 赞同：0
> 
> 时间：2012-08-31T18:12:40.657
> 
> 标签：monit

我可以修改 montrc 使其不会立即重新启动进程。在触发重新启动之前，该过程必须关闭一个完整的周期。这样我就可以保留现有的 capistrano 部署。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-26T05:43:00.877

你可以使用类似的东西：

```
check process x with pidfile /var/run/x.pid
   every y cycles 
```

或者

```
start program = "/etc/init.d/x start" with timeout 90 seconds 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T05:52:37.150

如果您仅监视 PID 文件，我认为目前无法做到这一点。但是，如果您还通过侦听端口来监视服务，则可以添加一个`if failed port 8080 X times within Y cycles then restart`子句。然后，Monit 将在每个周期卷曲该端口，并且当故障计数在 Y 个周期内达到 X 时，它将尝试重新启动服务。

请记住，这只影响端口监视器。如果 monit 发现 PID 文件消失了，它会立即尝试重新启动它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-30T15:03:27.683

尝试

```
check process x with pidfile /var/run/x.pid
  if does not exist for 2 cycles then start 
```

这将在重新启动死进程之前等待至少 1 个完整周期。

# javascript - 如何遍历这个 Javascript 对象？

> ID：12220568
> 
> 赞同：0
> 
> 时间：2012-08-31T18:12:47.473
> 
> 标签：javascript, json, node.js

> **可能重复：**
> [如何枚举 javascript 对象的属性？](https://stackoverflow.com/questions/85992/how-do-i-enumerate-the-properties-of-a-javascript-object)

```
{ 
       347655082: {
                    album:{
                            title: "A",
                            genre: "Pop",
                          }
        },

        347655083: {

                    album:{
                            title: "B",
                            genre: "Rock", 
                          }
        }
} 
```

通常“外部”键是相同的，因此我可以轻松定位嵌套对象。在这种情况下，“外部”键是可变的，可以是任何东西。

```
albums = JSON.parse(json); //parse json storing it in albums 
```

我不能在专辑上运行 foreach，说“专辑没有方法 foreach”。

```
albums.forEach(function(album, i){

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T18:20:18.763

您只能`.forEach()`在数组上使用。你的`albums`实体是一个`Object`所以你应该使用`for ... in ...)`

```
for (var key in albums) {
    if (albums.hasOwnProperty(key)) {
        // do something with albums[key]
        ...
    }
} 
```

对于以 node.js 或任何其他 ES5 实现为目标的代码，您可能会省略该`if`子句 - 只有在您的代码中添加了不安全的内容时才需要它`Object.prototype`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T19:23:25.627

ES5 有一个很好的迭代对象自身可枚举属性的方法—— [Object.keys(obj)](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)。我更喜欢以下迭代方法：

```
Object.keys(albums).forEach(function (key) {
   console.log(albums[key]);
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-31T18:16:06.363

那不是有效的 json 有效的 json 是：-

```
 {
    "347655082": {
        "album": {
            "genre": "Pop", 
            "title": "A"
        }
    }, 
    "347655083": {
        "album": {
            "genre": "Rock", 
            "title": "B"
        }
    }
} 
```

json 中的键需要双引号，如图所示。

验证 json 结帐 jsonlint.com

# construct-2 - 用角度调整construct2音量

> ID：12220570
> 
> 赞同：0
> 
> 时间：2012-08-31T18:13:01.517
> 
> 标签：construct-2

刚开始构建，需要一些帮助来获得一个旋钮来设置音轨的音量。我如何知道保持在角度范围内并相应地调整附加音频的音量。图像具有我想要保持的当前角度。

![在此处输入图像描述](../Images/f6a93aacde7e05e5a422e56ad4e9570f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T13:49:39.320

您需要在此处使用“顺时针方向”条件，因为您无法使用“大于”或“小于”来比较角度，因为它们没有考虑到 360 度以上的角度回绕回 0 的事实。否定“是顺时针方向的”表示“逆时针方向的”。

例如：

[否定] 135度顺时针：设置角度为135度

顺时针为 45 度：设置角度为 45 度

# iphone - 如何在我自己的 ios 应用中实现非续订订阅

> ID：12220573
> 
> 赞同：0
> 
> 时间：2012-08-31T18:13:08.627
> 
> 标签：iphone, ios, in-app-purchase

我在我的应用中使用 mkstorekit 4 来实现应用内功能。在各种消耗品、非消耗品和自动更新订阅方面似乎都不错。但是今天我尝试使用 mkstorekit 4 实现非续订订阅。但我无法做到这一点。这里有谁知道如何实现不续订订阅以及如何在mkstorekit 4 plist中配置产品id，那么请告诉我。

谢谢，洛甘纳森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:00:40.290

在第一次运行时，应用程序会向您的服务器注册并取回一个 unique_token。将其存储在服务器端和客户端。
每次购买时，向您的服务器提交 unique_token 并存储 unique_token 和购买的产品之间的关联。如果用户向您的服务注册（登录并通过），还请发送 unique_token 并将产品 ID 直接关联到用户。

在设计数据库时请记住，用户可以在 2 台不同的设备上购买 2 种不同的产品，在其中一台设备上注册，然后在另一台设备上登录。

# ruby-on-rails - time_ago_in_words

> ID：12220577
> 
> 赞同：1
> 
> 时间：2012-08-31T18:13:26.040
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

前段时间用文字返回给我一个堆栈错误太深的错误。我怎么称呼它。

```
<%= link_to time_ago_in_words(f.created_at), f %> 
```

在这里我做了什么，在article.helper

```
def time_ago_in_words(time_str)
    time = time_str.to_time + (-Time.zone_offset(Time.now.zone))
    "happened #{time_ago_in_words(time)} ago"
end 
```

我不能重新定义 time_ago_in_words 吗？因为我也尝试了以下操作，它给了我同样的错误

```
<%= link_to ctime_ago_in_words(f.created_at), f %>

def ctime_ago_in_words(time_str)
    time = time_str.to_time + (-Time.zone_offset(Time.now.zone))
    "happened #{ctime_ago_in_words(time)} ago"
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T18:15:48.860

原来的：

```
def ctime_ago_in_words(time_str)
    time = time_str.to_time + (-Time.zone_offset(Time.now.zone))
    "happened #{ctime_ago_in_words(time)} ago"
end 
```

您仍然有一个反复调用自身的函数。我认为您的意思是最后一行：

```
"happened #{time_ago_in_words(time)} ago" 
```

# android - AmazingListView 适配器未下载？

> ID：12220579
> 
> 赞同：1
> 
> 时间：2012-08-31T18:13:38.720
> 
> 标签：android, android-layout, android-widget, android-listview, android-adapter

我需要在 Android ListView 上工作。我想[从这里下载此代码](http://code.google.com/p/android-amazing-listview/source/checkout)。我无法下载此代码。但它给了我这个信息

```
 # Non-members may check out a read-only working copy anonymously over HTTP.
    svn checkout http://android-amazing-listview.googlecode.com/svn/trunk/ android-   
    amazing-listview-read-only 
```

如何下载此代码？如果有人给我这个的其他链接或可以邮寄给我，那将是很大的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T18:17:13.250

你需要从这里下载这个**Tortoise svn** [http://tortoisesvn.net/downloads.html](http://tortoisesvn.net/downloads.html)

然后**创建新文件夹并右键单击该文件夹-> SVN 结帐->**在 URL 存储库中粘贴您的 url

例如：[http ://android-amazing-listview.googlecode.com/svn/trunk/](http://android-amazing-listview.googlecode.com/svn/trunk/)

# php - MySQL / PHP 存储公式

> ID：12220580
> 
> 赞同：6
> 
> 时间：2012-08-31T18:13:38.097
> 
> 标签：php, mysql, eval

困境：

我有需要存储定价数据的选项。

每个选项都可以有不同的公式来确定其成本。

例如，一个选项的总成本将是成本 * 平方英尺，但另一个选项将是成本 * 周长英尺，而另一个选项仍然只是固定成本。

我公司拥有的几个站点正在从数据库中提取这些选项。

这些网站中的每一个都需要能够以完全相同的方式计算期权定价。

我们目前在每个站点上都有 PHP 代码从数据库中提取数据，然后确定如何计算它。

这种方法的问题在于，我们有时会更改价格的计算方式，当发生这种情况时，我们必须编辑定价模块存储库，然后将其更新到托管这些站点之一的每台服务器。

我正在寻找更好的解决方案。

我正在考虑将公式存储在数据库的选项记录中的想法，然后每个站点只需要调用选项，将数据应用于存储在那里的公式，然后运行公式。

现在，这可以用 来完成`eval()`，但我真的不想那样做。

评估示例让您更清楚地了解我正在尝试做什么：

```
$product->width = 3;
$product->length = 4;
$formula = $option->cost_formula; // $product->width * $product->length * $option->cost
eval($formula); 
```

还有其他人有其他解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T18:19:01.713

使用[函数](http://dev.mysql.com/doc/refman/5.0/en/create-function-udf.html)。

伪代码：

```
CREATE FUNCTION calculation1 (@cost decimal(6,2), @feet int)
RETURNS decimal(7,2)
AS
BEGIN
    --Other formula calculations
    RETURN @cost * @feet
END 
```

然后，您将从查询中调用该函数：`SELECT calculation1('1.50', 15)...`

这样，您可以更新对函数的任何更改，并且使用该函数的查询将产生相同的结果。

# jquery - 是否有用于屏蔽/正则表达式输入的好的 jquery 插件？

> ID：12220581
> 
> 赞同：1
> 
> 时间：2012-08-31T18:13:38.643
> 
> 标签：jquery, maskedinput

我的需求很简单 - 我想让用户以理智的方式输入货币值，这意味着：

1.  粘贴一个整数产生一个整数，即粘贴`12345`给出`12345`而不是`123.45`
2.  粘贴小数值会产生相同的值，即粘贴`1234.5`yield`1234.5`而不是`123.45`。粘贴`1234.0`应该产生`1234`or `1234.0`or `1234.00`- any 是有效的，但我想中间的应该是最简单的。
3.  分数分隔符`.`必须是显式且可选的。即用户可以键入`12345`或用户可以键入`123.45`。这两个输入产生不同的值 - 请参阅前两项。
4.  输入不是固定大小。即`123`and`1234`和`12345`and`12.3`都是有效的输入。
5.  应该阻止粘贴错误的输入。最好是通过简单地删除有问题的字符。
6.  键入错误的输入也应该被阻止。这意味着有效输入的任何前缀也应该是有效的。`123.`因此，允许键入/粘贴。
7.  作为奖励，开发人员应该能够指定整数部分显示为`,`除以千、百万等...即`1234567.8`显示为`1,234,567.8`

这种输入的正则表达式（省略逗号）将是`/^[1-9]\d*(\.\d{0,2})?$/`（注意`.`允许作为最后一个字符）。

现在，我尝试了几个 jQuery 插件，它们似乎是网络上最流行的。不幸的是，没有一个符合要求：

*   [http://www.meiocodigo.com/projects/meiomask/](http://www.meiocodigo.com/projects/meiomask/)

    不知道如何执行 1,2 和 3：http: [//jsfiddle.net/mark69_fnd/gKuaH/](http://jsfiddle.net/mark69_fnd/gKuaH/)

*   [http://digitalbush.com/projects/masked-input-plugin/](http://digitalbush.com/projects/masked-input-plugin/)

    不知道如何强制执行 1,2,3 和 4。粘贴行为很奇怪。[http://jsfiddle.net/mark69_fnd/jF86D/](http://jsfiddle.net/mark69_fnd/jF86D/)

*   [http://akzhan.github.com/jquery-keyfilter/](http://akzhan.github.com/jquery-keyfilter/)

    根本不适合这个特定任务，因为正则表达式似乎应用于每个字符，而不是整个输入：http: [//jsfiddle.net/mark69_fnd/uj9ZK/](http://jsfiddle.net/mark69_fnd/uj9ZK/)

我的限制有那么特别吗？我不这么认为。任何人都可以提出一个可以满足所有约束的已检查插件的替代方案吗？

谢谢。

**编辑**

Robin Herbots 的一个实现 - [https://github.com/RobinHerbots/jquery.inputmask](https://github.com/RobinHerbots/jquery.inputmask)。看起来很有趣，看起来除了奖金之外的所有东西都支持。仍在检查 - [http://jsfiddle.net/mark69_fnd/KW4qn/](http://jsfiddle.net/mark69_fnd/KW4qn/)

**编辑2**

不幸的是，[https://github.com/RobinHerbots/jquery.inputmask](https://github.com/RobinHerbots/jquery.inputmask)有自己的问题。例如，它在扩展文件中定义了几个有用的输入掩码，但我就是无法理解它是如何工作的（但我可能只是愚蠢）。但是，它似乎也弄乱了我的造型。由我的 css 声明为中心对齐的数字字段变为右对齐。据我了解，这是不可接受的。简而言之，没有爱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:59:09.313

您可以像这样禁用对齐。

```
$('#test').inputmask('decimal', { rightAlignNumerics: false }); 
```

;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T19:25:15.163

请参阅此 plnkr。

[http://plnkr.co/edit/OE6PGTuCvQa380S7b8Zg?p=preview](http://plnkr.co/edit/OE6PGTuCvQa380S7b8Zg?p=preview)

它通过 jquery.simulate 验证每个按键上的正则表达式

我不知道如何为您的需要构建正则表达式，但掩码工具和模拟是您所追求的。

# javascript - 创建一个带有已定义/未定义变量的 JS “If”语句

> ID：12220582
> 
> 赞同：1
> 
> 时间：2012-08-31T18:13:48.237
> 
> 标签：javascript, if-statement

我一直在试图解决这个问题。我正在尝试创建一个 IF 语句。这是示例：

```
if (vectorLayer.features.length == 0 || typeof vectorLayer =='undefined') {DO STUFF} 
```

但是，如果 vectorLayer 不存在，我会收到错误消息，无法读取语句的第一部分。如果对象不存在或者它存在但不包含任何功能，我会尝试执行此操作。我在这里想念什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:15:42.043

这将起作用，首先检查未定义，因此如果未定义 vectorLayer，它将不会执行其余条件。

```
if (vectorLayer == undefined || vectorLayer.features.length == 0) {DO STUFF} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T18:16:02.197

翻转条件语句。如果左侧为真，则不会计算右侧`||`的值，因为如果左侧为真，则右侧的值对整个表达式的真实性没有影响。这称为[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)。

```
if (typeof vectorLayer =='undefined' || vectorLayer.features.length == 0) {
    // DO STUFF...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T18:16:42.197

```
if (!vectorLayer || !vectorLayer.features.length) {DO STUFF} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T18:17:13.140

你可以做：

```
if (typeof vectorLayer !== 'undefined' && vectorLayer.features.length == 0) {
    // DO STUFF
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T18:18:16.040

`||`好吧，首先评估OR 运算符 ( ) 的左侧。因此，通过切换两个条件的位置，`typeof`检查将在 JavaScript 尝试检索对象的某些属性之前捕获未定义的变量。

```
if (typeof vectorLayer === 'undefined' || vectorLayer.features.length === 0 ) {
    // DO STUFF
} 
```

`typeof`但是，您可以更轻松地检查变量是否正在`udefined`使用，而不是使用运算符`===`：

```
vectorLayer === undefined 
```

# git - Git - 在 repo 中添加所有新文件

> ID：12220588
> 
> 赞同：27
> 
> 时间：2012-08-31T18:14:02.213
> 
> 标签：git

我正在尝试自动化更新过程。该过程基本上是：

1.  查看回购 A
2.  查看回购 B
3.  在 repo B 中运行一个更新/创建一堆文件的进程
4.  将文件复制到 repo A
5.  编译 repo A 并确保它不会失败
6.  将更改提交到 repo A 和 repo B
7.  将更改推送到远程服务器。

除第 6 步外，一切都按预期工作。我可以提交更改，但如何提交任何新文件？我尝试过`git add .`在其他地方阅读过，但这并没有捕获所有子目录中的所有新文件。有没有一种简单的方法来执行“添加所有新文件”？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-31T20:01:31.557

```
git add -A 
```

将对工作树进行所有修改。添加真正的意思是“包含在索引中”或“添加对索引的更改”。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-08-31T18:21:31.663

看看[这里](http://www.kernel.org/pub/software/scm/git/docs/git-add.html)。也许您对`git add -u`或感兴趣`git add -A`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-01-14T10:22:07.380

您可以使用`git add -A`如前所述或长子命令`git add --all`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-27T19:23:12.897

我知道我在这里聚会迟到了，但你也可以`git -a -m "commit message here"`。这负责添加文件以及在一个命令中提交它们。我非常频繁地使用这个命令。

# android - ViewPager 中的 ScrollView

> ID：12220591
> 
> 赞同：1
> 
> 时间：2012-08-31T18:14:11.577
> 
> 标签：android, scrollview, android-viewpager

所以我有 a`ScrollView`作为第一个视图 a `ViewPager`。以下代码正确呈现，但它根本不滚动。

阴影显示.java

```
public class ShadeDisplay extends SherlockFragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle ParthMehrotra) {
        if (container == null) {
            return null;
        }

        ScrollView sv = new ScrollView(getSherlockActivity());
        sv.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
        LayoutParams.FILL_PARENT));
        sv.setFillViewport(true);
        sv.setBackgroundColor(Color.BLACK);

        LinearLayout ll = new LinearLayout(getSherlockActivity());
        ll.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
        LayoutParams.WRAP_CONTENT));
        ll.setOrientation(LinearLayout.VERTICAL);

        ImageView iv = new ImageView(getSherlockActivity());
        iv.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
        LayoutParams.WRAP_CONTENT));
        iv.setImageResource(R.drawable.banner);
        ll.addView(iv);

        Pattern patern1 = new Pattern(getSherlockActivity());
        patern1.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

        Pattern patern2 = new Pattern(getSherlockActivity());
        patern2.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

        ll.addView(patern1);
        ll.addView(patern2);

        sv.addView(ll);
        return sv;
    }

} 
```

模式.java

```
public class Pattern extends View {

    Paint[] shade = new Paint[5];

    public Pattern(Context context) {
        super(context);

        for (int i = 0; i < shade.length; i++) {
            shade[i] = new Paint();
        }

        shade[0].setColor(Color.RED);
        shade[1].setColor(Color.BLUE);
        shade[2].setColor(Color.GREEN);
        shade[3].setColor(Color.YELLOW);
        shade[4].setColor(Color.CYAN);
    }

    @Override
    public void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        canvas.drawRect(0, 0, getWidth(), getWidth() / 3, shade[0]);
        canvas.drawRect(((getWidth() / 3) * 2), 0, getWidth(), getWidth(),
                shade[1]); 
        canvas.drawRect(0, ((getWidth() / 3) * 2), getWidth(), getWidth(),
                shade[2]);
        canvas.drawRect(0, (getWidth() / 3), getWidth()/3, getWidth(), 
                shade[3]);
        canvas.drawRect(getWidth() / 3, getWidth() / 3, ((getWidth() / 3) * 2),
                ((getWidth() / 3) * 2), shade[4]);

    }
} 
```

我知道我必须忽略一些非常愚蠢的事情，但我无法在任何地方找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:23:37.463

问题似乎与您`Pattern`的 s. 由于它们只是 a 的包装器`Canvas`，因此它们没有任何内容来赋予它们高度。给他们固定的高度将确保显示他们的所有内容，并允许`ScrollView`他们考虑这一点，并允许您正确滚动。

# jquery - 将 jquery 样式应用于动态创建的按钮

> ID：12220594
> 
> 赞同：2
> 
> 时间：2012-08-31T18:14:44.227
> 
> 标签：jquery, jquery-ui, jqgrid

我是 uI 编程的新手。我在我的应用程序中使用 Jqgrid。我有一列在每一行中显示按钮，使用格式化程序选项创建。在格式化程序选项中描述的功能中，我为按钮绑定了一个单击事件。下面是代码

```
 { label: 'Depatment Name', name: 'deptName', width: 100,
              formatter:actionButtonFormatter
        },

      function actionButtonFormatter ( cellvalue, options, rowObject )
       {
          var element ='<div id="deptNmBtn"><button onClick=getDepartMentNm("' + rowObject.empName+'")> <span>Add</span></button></div>';
          $("button, input:submit, input:button", this).button();
          return element;
       } 
```

我在这里面临两个问题。

1) Jquery 主题未应用于按钮，在使用格式化程序选项添加的部门名称列中。我只希望此按钮与 Jquery 主题一起应用，所以我尝试了

```
 $("button, input:submit, input:button", this).button();
         $("button, input:submit, input:button", jqgrid_table_id).button();  
         $("button, input:submit, input:button", deptNmBtn).button(); //div id 
```

但是它们都不起作用，并且列中的按钮没有与 Jquery 主题一起应用。

2) 在 onclick 中，我传递了一个employeeName 参数，它是行的值。如果员工姓名不包含任何空格，则效果很好。如果员工姓名包含空格，它会抛出我

```
 SyntaxError: unterminated string literal 
```

取自萤火虫。有没有人遇到过这些问题。请帮帮我。还请帮助了解两者之间的区别

```
 var element = '<div> ....' 
```

和

```
 var element = $('<div> ....') 
```

我知道第二个是 jquery 语法，但确切的区别是什么。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:23:12.273

不确定我可以在这里涵盖所有基础...

1) 我不记得添加样式的 jQuery UI 方法。但无论如何我从不这样做。找出哪些类需要成为元素的一部分，并在按钮创建期间添加它们。因此，与其制作一个按钮然后在其上调用 .button() ，不如将其设置为`"<button class="someclass otherclass">Button</button>"`在类中填充 jQuery 主题所需的那些。

2）无论如何，您可能不应该使用 onclick inline，但这是另一个讨论。同时，这很简单：第一个是字符串，最终可能会被某些 JavaScript 方法（在 jQuery 中，例如`.append()`）用来将新节点附加到 DOM。第二个创建节点对象，但它仍然需要附加到 DOM 与...类似的东西`.append()`。;-) 在引擎盖下，有区别。但对于大多数目的来说，这并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T18:19:30.760

添加这些类

```
ui-button ui-widget ui-state-default ui-corner-all 
```

在悬停时添加`ui-state-highlight`.

# ios - 自定义 ViewController 适用于除一个之外的所有子视图。为什么是这样？

> ID：12220599
> 
> 赞同：0
> 
> 时间：2012-08-31T18:15:23.783
> 
> 标签：ios, inheritance, uiviewcontroller, utility

虽然我不能发布确切的代码 (NDA)，但我可以花时间解释它在设计和实现方面的工作原理。

首先，我目前所做的只是通过生成静态页面和编写要触发的事件来做前端工作。

我写的很多页面都有非常相似的属性。这些包括：

*   相同的背景效果和图像。
*   带有背景的导航栏，以及提醒用户当前所在页面的导航栏标题。
*   用于自定义目的的附加视图。

正因为如此，我决定编写自己的自定义 ViewController，我觉得我编写的页面可以继承自它。对于我写的**前两**页，一切都按计划进行：我所要做的就是继承类，指定我的设置，父 ViewController 将负责渲染所需模板方面的所有其他事情；后退按钮将准确显示它应该在的位置，当我按下它时，它会从 ViewController 堆栈中弹出并返回主页。

它的工作原理是这样的：

*   父类拥有一个`NSMutableDictionary*`（称为`_additionalViews`，即`@protected`），并在页面创建开始时通过 - 进行初始化，它具有父类及其每个子类的`[super initWithNibName]`重载附加参数。`withNavTitle:(NSString*)navTitle`
*   `_additionalViews`子类通过在初始化时将它们添加到相关键中来简单地指定要创建的视图。一旦调用该方法，所有内容都会通过按键`viewDidLoad`迭代和调用来加载`_additionalViews``[self.view addSubview:[_additionalViews objectForKey:key]]`
*   当按下后退按钮时，对象从 viewController 堆栈中弹出的事件由**父**类而不是子类管理和触发。

我相信你可以看到，这个想法减少了很多代码膨胀并保持了可重用性。我用这种方法编写的前两页基本上是静态信息页面，后退按钮与它们完美配合（以及网页链接和我扔给它们的各种其他事件）。

然而，现在，当我创建这个新页面时，一切都被**渲染了**，但没有任何功能。我正在以与前两页相同的方式做所有事情。为什么会这样——这怎么可能？

我能做的是提供一些我为按钮和链接等编写的实用功能。如果有人在其中看到*任何*可能不是一个好主意的东西，我将非常感谢您的反馈。他们肯定会渲染并为前两页工作。只是不是最后一个。

我很感激你的帮助（我现在只用 Objective-C 写了 1.5 个月，所以我还是个新手——不过我确实有不错的 C++ 背景）。

**代码 - 标头和源代码相结合**

```
#import <UIKit/UIKit.h>

typedef struct __TextAttributes__ {
    UIColor* textColor;
    bool isBold;
    CGFloat fontSize;
    NSString* text;

} TextAttributes;

typedef struct __ButtonAttributes__ {

    UIControlState  controlState;
    UIControlEvents controlEvents;
    NSString*       imgPath;
    id              target;
    SEL             selector;
} ButtonAttributes;

UITextView* UITextView_Make_NoEdit(NSString* displayText, CGFloat fontSize, bool useBoldFont, CGRect frameDims, UIColor* color, id delegate);

UIButton* Link_Make(NSString* linkText, CGFloat fontSize, bool useBoldFont, 
                    SEL actionSelector, id target, CGRect frameDims);

UIButton* Button_Make_Custom(TextAttributes* ta, ButtonAttributes* attr, CGRect frameDims, bool freeBtnAttr, bool freeTextAttr);

ButtonAttributes* ButtonAttributes_Make(NSString*imgName, NSString* imgType, UIControlState controlState, UIControlEvents controlEvents, id target, SEL selector);

void ButtonAttributes_Free(ButtonAttributes* attr);

TextAttributes* TextAttributes_Make(NSString* text, UIColor* textColor, CGFloat fontSize, bool isBold);

void TextAttributes_Free(TextAttributes* attr);

//-------------------
// Global Functions  
//-------------------

//----------------------------------------
static const float TextFont_Alpha = 0.75;
//----------------------------------------

typedef enum __MemoryType__ {
    MemoryTypeTextAttributes,
    MemoryTypeButtonAttributes
} MemoryType;

static void CheckMemAndThrow(void* mem, MemoryType mt )
{
    if (mem)
        return;

    NSString *memTypeAndFunc, *msg;

    switch (mt) {
        case MemoryTypeButtonAttributes:
            memTypeAndFunc = @"ButtonAttributes in ButtonAttributes_Make(...)";
            break;
        case MemoryTypeTextAttributes:
            memTypeAndFunc = @"TextAttributes in TextAttributes_Make(...)";
            break;
    }

    msg = [NSString stringWithFormat:@"Memory allocation error for %@", [memTypeAndFunc autorelease]];

    @throw [[NSException alloc] initWithName:@"MemoryAllocException" reason:msg userInfo:nil];
}

UITextView* UITextView_Make_NoEdit(NSString* displayText, CGFloat fontSize, bool useBoldFont, CGRect frameDims, UIColor* color, id delegate) 
{
    UITextView* view = [[UITextView alloc] initWithFrame:frameDims];

    [view setText:displayText];

    UIFont* font;

    if (useBoldFont)
    {
        font = [UIFont boldSystemFontOfSize:fontSize];
    }
    else 
    {
        font = [UIFont systemFontOfSize:fontSize];
    }

    [view setTextColor:color];
    [view setDelegate:delegate];
    [view setEditable:NO];
    [view setScrollEnabled:NO];
    [view setBackgroundColor:[UIColor clearColor]];
    [view setFont:font];
    [font release]; 

    return view;
}

static const CGFloat Default_Link_Red   = 1.0f / 255.0f;
static const CGFloat Default_Link_Green = 184.0f / 255.0f;
static const CGFloat Default_Link_Blue  = 252.0f / 255.0f;
static const CGFloat Default_Link_Alpha = 1.0f;

UIButton* Link_Make(NSString* linkText, 
                    CGFloat fontSize, 
                    bool useBoldFont, 
                    SEL actionSelector, id target, 
                    CGRect frameDims) 
{
    UIButton* linkButton = [UIButton buttonWithType:UIButtonTypeCustom]; 

    [linkButton setFrame:frameDims];

    [linkButton setTitleColor:[UIColor colorWithRed:Default_Link_Red 
                                              green:Default_Link_Green 
                                               blue:Default_Link_Blue 
                                              alpha:Default_Link_Alpha] 

                     forState:UIControlStateNormal];

    [linkButton setTitle:linkText forState:UIControlStateNormal];

    UIFont* font;

    if (useBoldFont) 
    {
        font = [UIFont boldSystemFontOfSize:fontSize];
    } 
    else 
    {
        font = [UIFont systemFontOfSize:fontSize];
    }

    [linkButton.titleLabel setFont:[font retain]];

    [linkButton addTarget:target action:actionSelector forControlEvents:UIControlEventTouchDown];

    [font release];

    return linkButton;
}

UIButton* Button_Make_Custom(TextAttributes* attr, ButtonAttributes* buttonAttr, CGRect frameDims, bool freeBtnAttr, bool freeTextAttr)
{

    UIButton* btn = [UIButton buttonWithType:UIButtonTypeCustom];

    [btn setTitle:attr->text forState:buttonAttr->controlState];
    [btn setTitleColor:attr->textColor forState:buttonAttr->controlState];
    [btn setBackgroundColor:[UIColor clearColor]];

     if (attr->isBold) 
     {
         [btn.titleLabel setFont:[UIFont boldSystemFontOfSize:attr->fontSize]];
     } 
     else 
     {
         [btn.titleLabel setFont:[UIFont systemFontOfSize:attr->fontSize]];
     }

    [btn setFrame:frameDims];

    [btn setBackgroundImage:[UIImage imageWithContentsOfFile:[buttonAttr->imgPath retain]] forState:buttonAttr->controlState];

    [btn addTarget:buttonAttr->target 
            action:buttonAttr->selector 
  forControlEvents:buttonAttr->controlEvents];

    if (freeTextAttr)
        TextAttributes_Free(attr);

    if (freeBtnAttr)
        ButtonAttributes_Free(buttonAttr);

    if (![btn isEnabled])
        [btn setEnabled:YES];

    return btn;
}

ButtonAttributes* ButtonAttributes_Make(NSString* imgName, NSString* imgType, UIControlState controlState, UIControlEvents controlEvents, id target, SEL selector) 
{
    ButtonAttributes* btnAttr = (ButtonAttributes *)calloc(1, sizeof(ButtonAttributes));

    CheckMemAndThrow((void*)btnAttr, MemoryTypeButtonAttributes);

    btnAttr->imgPath       = [[NSBundle mainBundle] pathForResource:imgName ofType:imgType];
    btnAttr->controlState  = controlState; 
    btnAttr->controlEvents = controlEvents;
    btnAttr->target        = target;
    btnAttr->selector      = selector;

    return btnAttr;
}

void ButtonAttributes_Free(ButtonAttributes* attr)
{
    if (!attr)
        return; 

    if (attr->imgPath)
        [attr->imgPath release];

    free(attr);
}

TextAttributes* TextAttributes_Make(NSString* text, UIColor* textColor, CGFloat fontSize, bool isBold)
{
    TextAttributes* textAttributes = (TextAttributes *)calloc(1, sizeof(TextAttributes));

    CheckMemAndThrow((void*)textAttributes, MemoryTypeTextAttributes);

    textAttributes->text      = text;
    textAttributes->textColor = textColor;
    textAttributes->fontSize  = fontSize;
    textAttributes->isBold    = isBold;

    return textAttributes;
}

void TextAttributes_Free(TextAttributes* attr)
{
    if (!attr)
        return;

    if (attr->text) {
        [attr->text release];
    }

    if (attr->textColor) {
        [attr->textColor release];
    }

    free(attr);
} 
```

# eclipse-plugin - 如何更改由 Eclipse 插件提供的菜单项的名称

> ID：12220607
> 
> 赞同：1
> 
> 时间：2012-08-31T18:15:43.630
> 
> 标签：eclipse-plugin, eclipse-rcp, eclipse-marketplace

我正在开发一个 RCP 应用程序。在我们的应用程序中，我们使用的是 Eclipse Packing Project 的 Eclipse Marketplace。

有一个用于显示 Eclipse Marketplace 的命令。使用插件spy，发现它的ID是org.eclipse.epp.mpc.ui.command.showMarketplaceWizard。

菜单上的显示名称是“Eclipse Marketplace”。产品经理不喜欢这样，希望它只说“市场”。

有没有办法更改此菜单项的名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T06:41:54.000

您可以将[Equinox Transforms](http://wiki.eclipse.org/Equinox_Transforms)项目与它的 xslt 捆绑包一起使用。这使您可以在平台加载此菜单之前对提供此菜单的 plugin.xml 执行 xslt 转换，而无需修改任何平台捆绑包。还要检查[错误 276638](https://bugs.eclipse.org/bugs/show_bug.cgi?id=276638)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:11:34.537

首先，我会问经理这个问题是否真的那么重要，要花时间解决它，如果你不知道该怎么做，至少要花一天的时间......

我不知道该怎么做，但这是我要开始检查的内容。

将源代码下载到具有该菜单项的插件。如果你很幸运，我想你可能会，那么那段菜单文本是可以翻译的。您可以通过在包含该字符串的正确包中查找 *.properties 文件来验证这一点。

然后，解决方案是在您正在使用的语言环境中提供新的翻译，其中该字符串已更改：

*   您首先需要创建一个[插件片段](http://wiki.eclipse.org/FAQ_What_is_a_plug-in_fragment?)
*   [然后在此处](http://www.eclipse.org/articles/Article-Internationalization/how2I18n.html)阅读有关如何国际化插件的更多信息并提供此字符串的新翻译。

只要字符串的键不变，该解决方案将向前/向后兼容，并且它是一个非常简单的解决方案，不违反任何核心 Eclipse 原则。好吧，至少没有*那么多。*

当然，这要求字符串是可翻译的。

其他选择：

更改 Eclipse 插件中的代码，重新编译和分发这个插件而不是原来的。但这意味着您需要记住，每次升级到较新版本的 Eclipse 时，都会以特殊方式处理此插件。而且很丑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-12T09:30:26.303

*使用Equinox Transform*真的很容易。不会花很多时间。作为参考，您可以查看我的博客[**Equinox Transform Revealed**](http://eclipse-api-inside-story.blogspot.de/2014/09/equinox-transform-revealed.html)。您只需要为 Plugin.xml 编写一个 xslt。

# php - Twig 中是否有与 PHP 提取等效的函数？

> ID：12220608
> 
> 赞同：4
> 
> 时间：2012-08-31T18:15:45.287
> 
> 标签：php, twig

我正在将几个网站从原始 PHP 模板系统转换为 Twig。我遇到的一个问题是如何转换使用 PHP 提取函数的模板。关于如何处理这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T20:36:26.447

将您本来会调用的数组传递`extract()`给 twig 的渲染函数，最后它的行为将完全符合您的需要 - 数组的键作为变量名。

# linux - 如何在 linux 上启动 bonjour 服务

> ID：12220611
> 
> 赞同：1
> 
> 时间：2012-08-31T18:15:52.293
> 
> 标签：linux, bonjour, mdns

我已经在我的 linux 电脑上安装了 bonjour mDNSResponder，并且能够运行 mdns 守护进程。

我已经在连接到 wifi 路由器的 PC (192.168.1.111) 上发布了我的网络服务器。现在我需要使用 bonjour 发布此服务。

谁能帮我做同样的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T18:18:52.067

Linux 上的 Zeroconf 服务（IPv4LL 除外）由[**Avahi**](http://avahi.org/)提供。使用发行版的正常服务机制来启动 Avahi 守护进程。为了宣布在 Web 服务器上运行的服务，您需要使用类似[mod_dnssd](http://0pointer.de/lennart/projects/mod_dnssd/)的东西与之对话。

# eclipse - 无法连接到远程虚拟机。连接被拒绝。

> ID：12220614
> 
> 赞同：1
> 
> 时间：2012-08-31T18:16:06.720
> 
> 标签：eclipse, tomcat

我试图启动我的 Eclipse 调试（用于服务器端代码）我收到以下错误无法连接到远程 VM。连接被拒绝。

我做了下面帖子的所有配置，但仍然失败。我还能做些什么来调试服务器端？

[Eclipse：无法连接到远程 VM。连接被拒绝。](https://stackoverflow.com/questions/9620723/eclipse-failed-to-connect-to-remote-vm-connection-refused)

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T11:48:47.150

假设端口和 url 是正确的，您可能需要检查防火墙（在您的本地计算机或远程主机上）是否不会干扰调试。尝试使用主机的 IP 而不是它的名称（以检查与 dns 相关的问题）。您还可以尝试捕获主机上的 tcp 数据包（Wireshark 是一个很好的工具），以确保数据包到达主机。如果是，那就是远程jvm的配置有问题，否则重新检查本地配置。

# matlab - 如何在 Matlab 中使用 .idx3 文件？

> ID：12220615
> 
> 赞同：1
> 
> 时间：2012-08-31T18:16:13.430
> 
> 标签：matlab

我使用 Matlab 进行 OCR 项目，我发现有一个名为 MNIST 手写数字数据库的字符示例数据库。我下载了一个名为`train-images.idx3-ubyte` 但我不知道如何使用它的文件，有人知道如何使用这个文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-12T12:10:09.893

您可以使用斯坦福的[mnistHelper 函数](http://ufldl.stanford.edu/wiki/index.php/Using_the_MNIST_Dataset)。

> 作为如何使用这些功能的示例，您可以使用以下代码检查图像和标签：

```
% Change the filenames if you have saved the files under different names
% On some platforms, the files might be saved as 
% train-images.idx3-ubyte / train-labels.idx1-ubyte

images = loadMNISTImages('train-images-idx3-ubyte');
labels = loadMNISTLabels('train-labels-idx1-ubyte');

% We are using display_network from the autoencoder code

display_network(images(:,1:100)); % Show the first 100 images
disp(labels(1:10)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T19:36:17.513

您从 MNIST 数据库下载的那些文件是二进制文件。您可以在 MNIST 网站上找到它们的格式：http: [//yann.lecun.com/exdb/mnist/](http://yann.lecun.com/exdb/mnist/)

在 MATLAB 中使用[fopen](http://www.mathworks.com/help/techdoc/ref/fopen.html)、[fclose](http://www.mathworks.com/help/techdoc/ref/fclose.html)、[fread](http://www.mathworks.com/help/techdoc/ref/fread.html)、[fseek等](http://www.mathworks.com/help/techdoc/ref/fseek.html)[低级文件 I/O](http://www.mathworks.com/help/techdoc/ref/f16-5702.html#f16-14516)函数按照其格式读取文件。

您也可以尝试使用[FileExchange](http://www.mathworks.com/matlabcentral/fileexchange/27675-read-digits-and-labels-from-mnist-database)中的 readMNIST 函数。我对它没有任何经验，一些用户似乎对它有一些问题，但你可以看到代码并调试它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-01T05:00:40.110

```
You Can read MNISTImages like this-

trlblid = fopen('train-labels.idx1-ubyte');    
trimgid = fopen('train-images.idx3-ubyte');    
tslblid = fopen('t10k-labels.idx1-ubyte');    
tsimgid = fopen('t10k-images.idx3-ubyte');    

% read train labels    
fread(trlblid, 4);    
numtrlbls = toint(fread(trlblid, 4));    
trainlabels = fread(trlblid, numtrlbls);    

% read train data    
fread(trimgid, 4);    
numtrimg = toint(fread(trimgid, 4));    
trimgh = toint(fread(trimgid, 4));    
trimgw = toint(fread(trimgid, 4));    
trainimages = permute(reshape(fread(trimgid,trimgh*trimgw*numtrimg),trimgh,trimgw,numtrimg), [2 1 3]);    

% read test labels    
fread(tslblid, 4);    
numtslbls = toint(fread(tslblid, 4));    
testlabels = fread(tslblid, numtslbls);    

% read test data    
fread(tsimgid, 4);    
numtsimg = toint(fread(tsimgid, 4));    
tsimgh = toint(fread(tsimgid, 4));    
tsimgw = toint(fread(tsimgid, 4));    
testimages = permute(reshape(fread(tsimgid, tsimgh*tsimgw*numtsimg),tsimgh,tsimgw,numtsimg), [2 1 3]); 
```

# actionscript-3 - 在 Flash (AS3) 中加载 RTL（从右到左的语言文本）XML

> ID：12220616
> 
> 赞同：2
> 
> 时间：2012-08-31T18:16:14.613
> 
> 标签：actionscript-3, flash, right-to-left

我是 flash 新手，想在 flash as3 和 Flash player 10 中加载 xml 文件。我不想使用 TLF！(TextLayoutFramework) 因为它在编译时会引发错误当
我以 utf-8 编码加载我的 XML 时，单词的顺序是从左到右而不是从右到左 - 每个单词都写在最后一个单词之前而不是之后。

任何想法如何解决这个问题？

这是我的 XML 加载器代码：

```
var css_file:String = "gstyle.css";
var fa_item_list = new Array();
var fa_item_group:MovieClip = new MovieClip();
var item_width:Number = fa_mask.width;
var item_height:Number = 0;
var item_spacing:Number = 15;
var item_padding:Number = 0;
var i:Number;
var total:Number;

var fa_xml:XML = new XML();
var fa_style:StyleSheet = new StyleSheet();
var css_loader:URLLoader = new URLLoader();

function push_array(e:Event):void 
{
    fa_xml = XML(e.target.data);
    total = fa_xml.item.length();
    for( i = 0; i < total; i++ )
    {
        fa_item_list.push( { content: fa_xml.item[i].content.toString() } );
    }
    load_css();
}

function load_xml(xml_file:String):void
{
    var xml_loader:URLLoader = new URLLoader();
    xml_loader.load( new URLRequest( xml_file ) );
    xml_loader.addEventListener(Event.COMPLETE, push_array);
}

function load_css():void
{
    css_loader.load( new URLRequest(css_file) );
    css_loader.addEventListener(Event.COMPLETE, css_complete);
}

function css_complete(e:Event):void 
{
    var css_format:TextFormat = new TextFormat();
    fa_style.parseCSS(css_loader.data);
    create_item_list();
}

function create_item_list():void
{
    for( i = 0; i < total; i++ )
    {
        var fa_item = new MovieClip();
        fa_item.addChild( create_item_desc( fa_item_list[i].content ) );
        fa_item.addChildAt( create_item_bg( fa_item.height, i ), 0 );
        fa_item.y = item_height;
        item_height += fa_item.height + item_spacing;
        fa_item_group.addChild( fa_item );
    }

    this.addChild( fa_item_group );
    fa_item_group.mask = fa_mask; 
    fa_sb.scrolling("fa_item_group", "fa_mask", 0.50);  // ScrollBar Added
}

function create_item_bg( h:Number, item_no:Number )
{
    var fm_rect:Shape = new Shape();
    fm_rect.graphics.beginFill(0xDED9D1, 0);    // ITEM BACKGROUND COLOR
    fm_rect.graphics.drawRoundRect(0, 0, item_width, h + item_padding * 2, 0);
    fm_rect.graphics.endFill();
    return fm_rect;
}

function create_item_desc( item_desc:String )
{
    var fm_text = new TextField();
    fm_text.x = item_padding;
    fm_text.y = item_padding;
    fm_text.width = item_width - item_padding * 2;
    fm_text.styleSheet = fa_style;
    fm_text.htmlText = item_desc;
    fm_text.multiline = true;
    fm_text.wordWrap = true;
    fm_text.selectable = false;
    fm_text.autoSize = TextFieldAutoSize.LEFT;
    return fm_text;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T10:22:37.560

只有 TLF 文本字段可以正确处理从右到左的文本。

```
import fl.text.TLFTextField;
import flashx.textLayout.formats.Direction;

var tlf:TLFTextField = new TLFTextField();
    tlf.direction = Direction.RTL; 
```

如果你想使用一个`TextField`对象，这个库可以帮助你（不是免费的）：[http ://www.arabicode.com/flarabyas3/main](http://www.arabicode.com/flarabyas3/main)

# c# - 如何在字符串中找到所有出现的特定句子？

> ID：12220617
> 
> 赞同：4
> 
> 时间：2012-08-31T18:16:18.083
> 
> 标签：c#, regex, linq, substring

假设我有一个这样的字符串：

```
string source = "Today is friday! I'm am having trouble programming this. Today is friday! Tomorrow is saturday. Today is friday!" 
```

我想搜索这个字符串，抓住所有说“今天是星期五！”的句子，然后用我刚刚找到的句子创建一个新字符串。

上述字符串的预期结果是：

```
string output = "Today is friday!Today is friday!Today is friday!" 
```

编辑：LINQ 不是强制性的。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T18:41:17.297

这是一种非 LINQ 方法：

```
string str = "Today is friday! I'm am having trouble programming this. Today is friday! Tomorrow is saturday. Today is friday!";

StringBuilder sb = new StringBuilder();
int index = 0;
do
{
    index = str.IndexOf("Today is friday!", index);
    if (index != -1)
    {
        sb.Append("Today is friday!");
        index++;
    }
} while (index != -1);

string repeats = sb.ToString(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T18:34:21.813

实际上没有必要找到匹配项。由于您正在根据您的搜索模式创建一个新字符串，因此如果您只需**计算**搜索字符串的出现次数就足够了。如果您愿意，可以用更快的子字符串计数算法替换正则表达式。

```
string source = "Today is friday! I'm am having trouble programming this. Today is friday! Tomorrow is saturday. Today is friday!";
string searchPattern = "Today is friday!";
int count = Regex.Matches(source, searchPattern).Count;
string result = string.Concat(Enumerable.Repeat(searchPattern, count)); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-31T21:02:45.003

## 正则表达式

寻找：

```
.*?(Today is friday).*?(?=\1|$) 
```

代替：

```
$1 
```

## 解释

```
.*?                 # match everything before an occurrence of the sentence
(Today is friday!)  # match the sentence
.*?                 # match everything after the sentence...
(?=\1|$)            # ...up to the next occurrence or end of the string 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-31T18:23:01.207

好的，你需要做的第一件事就是把你的一个字符串变成多个字符串。String.Split() 应该在这里工作，不需要正则表达式：

```
var sentences = inputString.Split('.','!'); 
```

一旦你有了单独的句子，你只需要寻找符合条件的句子：

```
var todayIsFridaySentences = sentences.Where(s=>s.Contains("Today is friday")); 
```

...然后最后将它们重新组合在一起；如果您绝对必须为此使用 Linq：

```
var ouputString = todayIsFridaySentences
                     .Aggregate(new StringBuilder(), (s,b) => b.Append(s))
                     .ToString(); 
```

# php - 如何在不使用 API 密钥的情况下获取所有谷歌字体的列表？

> ID：12220620
> 
> 赞同：2
> 
> 时间：2012-08-31T18:16:28.103
> 
> 标签：php, wordpress, google-font-api

我正在制作一个 wordpress 主题，该主题具有允许用户从 Google 选择自己的字体的功能。显然，因为这是一个 wordpress 主题，所以无法为每次安装创建一个新的 API 密钥。

我需要的只是按字母顺序排列的字体列表。

如果有人给我一种按类别对它们进行分组的方法，则可以加分！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T18:19:27.237

查看[开发人员 API](https://developers.google.com/webfonts/docs/developer_api)。您可以查询它以获取字体列表。我不确定它是否对它们进行了分类，但你确实得到了很多细节。

**更新：**

您只需要一个超出使用限制的 API 密钥，因此根据您进行的调用次数，您只需[解析这个 JSON](https://www.googleapis.com/webfonts/v1/webfonts)即可。

**进一步更新：**

似乎您现在确实需要一个 API 密钥来调用开发人员 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-04-23T21:12:14.130

我会用我需要的最小值构建我的列表并将其存储在本地。您可以将其作为 json 字符串存储在您的页面上。

例如在浏览器中打开： [https ://www.googleapis.com/webfonts/v1/webfonts?key=YOUR-API-KEY](https://www.googleapis.com/webfonts/v1/webfonts?key=YOUR-API-KEY)

```
var allGoogleFonsts = JSON.parse(JSON_RESULT);

var fontFamilyWithCategory = allGoogleFonsts.items.map(fontItem => {
    return {
        family: fontItem.family,
        category: fontItem.category,
    };
});

var groupBy = function(xs, key, value) {
  return xs.reduce(function(rv, x) {
    (rv[x[key]] = rv[x[key]] || []).push(x[value]);
    return rv;
  }, {});
};

var fontFamilyByCategory = groupBy(fontFamilyWithCategory, 'category', 'family'); 
```

现在您可以在没有 api 调用的情况下存储和使用它：

```
console.log(JSON.stringify(fontFamilyByCategory)); 
```

# node.js - Node.js：无法返回 Mongoose 查找结果

> ID：12220621
> 
> 赞同：4
> 
> 时间：2012-08-31T18:16:35.077
> 
> 标签：node.js, mongodb, express, mongoose

我是 Node.JS 的新手，找不到解决方案。我正在构建一个宁静的服务来从 mongo 检索数据。

应用程序.js

```
var database = require('./database.js');
...

app.get('/metadata', function(req, res) {
    console.log("GET: metadata");
    res.send(database.getMetadata(null));
});

app.get('/metadata/:id', function(req, res) {
    console.log("GET: metadata");
    res.send(database.getMetadata(req.params.id));
});
... 
```

数据库.js

```
exports.getMetadata = function (id) {
    console.log('getting metada...')
    if (id == null) {
        return FolderInfo.find({}, null, null, function (err, metadatas) {
            if (!err) {
                console.log(metadatas);
                return metadatas;
            } else {
                return console.log(err);
            }
        });
    }
    else {
        return FolderInfo.findById(id, function (err, metadatas) {
            if (!err) {
                return metadatas;
            } else {
                return console.log(err);
            }
        });
    }
} 
```

我尝试了许多不同的方法。但总是得到这个结果：

```
{
    options: {
        populate: { }
    },
    _conditions: { },
    _updateArg: { },
    op: "find"
} 
```

但我的*console.log(metadatas);* 行正在将结果打印到控制台。我正在使用所有最新的软件包。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T18:47:50.603

您不能真正将 同步`return`s 与诸如 之类的异步函数混合使用`findById`，因为它违背了异步操作的基本性质：“*现在退出，稍后完成*”。

您必须调整以接受*稍后完成*`getMetadata`时可以调用的回调`findById`函数：

 *```
exports.getMetadata = function (id, callback) {
   // ...
}; 
```

而且，而不是`metadatas`仅在没有时返回`err`：

```
if (!err) {
    return metadatas;
} else {
   // ...
} 
```

`callback`无论哪种情况，您都需要调用：

```
callback(err, err ? null : metadatas); 
```

在上下文中，这可能是：

```
FolderInfo.find({}, null, null, function (err, metadatas) {
    if (err) {
        console.log(err);
    } else {
        console.log(metadatas);
    }

    callback(err, err ? null : metadatas);
}); 
```

或者可能只是：

```
FolderInfo.find({}, null, null, callback); 
```

然后传递`getMetadata`一个回调函数，在调用时处理响应：

```
app.get('/metadata', function(req, res) {
    console.log("GET: metadata");
    database.getMetadata(null, function (err, data) {
        res.send(data);
    });
}); 
```*

# linux - 在linux上检索eth0 ipv6地址

> ID：12220622
> 
> 赞同：2
> 
> 时间：2012-08-31T18:16:35.193
> 
> 标签：linux, scripting, ip-address, ipv6, ifconfig

我希望在我的一个 shell 脚本中使用我的 eth0 ipv6 地址。我可以使用 ifconfig 和 grep 来检索它，但我确信它一定在某个我没有看到的文本文件中，这最终会使检索变得更容易。有人知道我应该去哪里看吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T18:25:27.867

```
ip addr show eth0 | awk '/inet6/ {print $2}' 
```

# apache - 使用 FilesMatch 指令匹配文件名的一部分

> ID：12220628
> 
> 赞同：3
> 
> 时间：2012-08-31T18:16:55.920
> 
> 标签：apache, apache2, webserver

如何使用 FilesMatch 指令匹配文件名的一部分？例如，如果我想匹配“utilitiesForCurrentPage.js”或customWithOtherCharacters.css，我将如何完成？我目前正在使用下面的指令。假设“utilitiesForCurrentPage.js”包含在文件夹中。

```
<Directory "/share/apache/files">
   ...
   ...
   <FilesMatch "^(custom*|utilities*)\.(css|gif|jpg|jpeg|js)$">
     Header set Cache-Control "public, max-age=1440, must-revalidate"
   </FilesMatch>
</Directory> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:23:33.730

您`.`的表达式中缺少 （`.`= 匹配除换行符以外的任何内容）：

```
# need dot here -----v   and ----v
<FilesMatch "^(custom.*|utilities.*)\.(css|gif|jpg|jpeg|js)$"> 
```

# javascript - 如何禁用 HTML 代码中的脚本并仍然显示它们？

> ID：12220630
> 
> 赞同：2
> 
> 时间：2012-08-31T18:17:03.057
> 
> 标签：javascript, html, tags

有哪些方法可以用来显示 [in html] 涉及脚本标签的代码段，同时防止浏览器执行该脚本代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T18:19:36.833

编码所有的`<`和`>`字符，所以你最终得到

```
<div>
   <h2>Here's some JS code</h2>

   <pre>
      &lt;script type="text/javascript"&gt;
         var x = 7;
         var y = 10;
         if (x &lt; y) {
            alert('this alert will not fire!');
         }
      &lt;/script&gt;
    </pre>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T18:26:17.167

您将需要像这样转义与 html 相关的特殊字符：

```
 <body>
    <p>&lt;script type="text/javascript" &gt;</p>
    <p>alert("hello world!");</p>
    <p>&lt;/script&gt;<br />
    </p>
  </body> 
```

完整列表见：[http ://www.theukwebdesigncompany.com/articles/entity-escape-characters.php](http://www.theukwebdesigncompany.com/articles/entity-escape-characters.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T18:30:02.200

编码所有 HTML 实体（ < 、 > 、 & 等）并将所有内容包装在 pre 标记中以保持您的格式。

```
<pre>
  &lt;script type="text/javascript"&gt;
    alert('test');
  &lt;/script&gt;
</pre> 
```

一个方便的转换器： [http ://www.rishida.net/tools/conversion/](http://www.rishida.net/tools/conversion/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T18:43:58.587

早在 HTML2 时代，就有了`<xmp>`和`<listing>`元素，这正是：你可以做到。例如

```
<xmp>Because this is HTML2, there isn't a <script> tag to worry about anyway.</xmp> 
```

`</xmp>`它会将标签显示为内容，而不是将它们解释为元素的开始和结束（但由于显而易见的原因，你不能这样做）。

然而，对于浏览器作者和网络作者来说，拥有这种能力实际上带来的问题远远多于他们所帮助的问题。因此，它们在 HTML3.2 中被弃用（或者可以说是 HTML3，但这不是 HTML3 的唯一参数 - 另一个就是上面带有“HTML3”的文档才是重要的......），并用 HTML4 删除。

因此，唯一要做的就是逃避它。

`<pre>`有助于格式化，虽然我经常只是做一个查找替换来用不间断的空间交换每个空间。

完成后，您可以比以往任何时候都更漂亮地渲染它，`<xmp>` 并且`<listing>`有诸如[beautyOfCode](http://startbigthinksmall.wordpress.com/2008/10/30/beautyofcode-jquery-plugin-for-syntax-highlighting/)和[google-code-prettify](http://code.google.com/p/google-code-prettify/)之类的库可以为您完成繁重的工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T18:58:28.077

老实说，我不确定这是否是一个很好的方法，所以如果不是，我希望有人能告诉我。

如果您不想通过转换器运行代码，可以使用此 jQuery 函数将`.html`元素的`.text`. 包裹在`<pre>`标签内，你有格式化的代码。

```
var pre = $("pre").html();
$("pre").text(pre);​ 
```

[http://jsfiddle.net/charlescarver/hqh8q/1/](http://jsfiddle.net/charlescarver/hqh8q/1/)

# webview - 使用 WebView.loadUrl(string) 加载存储在 zip 扩展文件中的 png 文件

> ID：12220639
> 
> 赞同：2
> 
> 时间：2012-08-31T18:17:50.250
> 
> 标签：webview, zip, png, apk-expansion-files

我正在尝试使用 WebView.loadUrl(string) 显示 png 文件，其中 png 文件存储在 Android 的 zip APK 扩展文件中。扩展文件的路径是：

```
Environment.getExternalStorageDirectory()+"/Android/obb/com.example.myapp/main.1.com.example.myapp.obb"; 
```

所以我使用以下内容来显示文件 mypicture.png

```
String url = "jar:file:/" + Environment.getExternalStorageDirectory()+"/Android/obb/com.example.myapp/main.1.com.example.myapp.obb!/mypicture.png";

WebView wv;
... // code to setup the webview
wv.loadUrl(url); 
```

我收到错误网页在链接中**不可用**

jar:file://storage/sdcard0/Android/obb/com.example.myapp/main.1.com.example.myapp.obb!/mypicture.png

我知道我的扩展文件在那里并且包含 png 文件，因为我有一些测试代码可以从扩展文件中提取 png 文件。当我指向**外部**提取的 png 文件时， wv.loadUrl(extracted_png_location) 正确显示 png 。我只是无法让它显示zip 扩展文件中的 png 文件**。**

那么zip文件里面的png文件的路径一定是错误的吧？或者甚至可以直接在 zip 中的文件上使用 loadUrl() 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-05T16:01:33.913

[使用JOBB](http://developer.android.com/tools/help/jobb.html)工具打包扩展文件并使用[StorageManager](http://developer.android.com/reference/android/os/storage/StorageManager.html)挂载是一个不错的选择。之后，扩展文件中的文件应该可以作为文件系统中的常规文件访问。这种情况下不需要解压扩展文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T09:36:23.190

我也有完全一样的问题。我的 webview 内容太大而无法在应用程序中交付，但是无法通过 webview 访问来自扩展下载的 zip，因为它需要直接路径。

使用 google 的 Zip Lib 是没有选择的，因为它只返回流，而 webview 不适用于流。

从路径加载数据的方法似乎是本机实现的，不可能覆盖任何东西。

解压缩不是选项，因为您无法删除 zip 文件。该应用程序会注意到它并开始重新下载它，因此您无论如何都需要保留它。

唯一的解决方案是编写自己的更新程序，直接下载内容并解压缩

# android - ImageView onClick 期间未调用方法

> ID：12220640
> 
> 赞同：0
> 
> 时间：2012-08-31T18:18:03.340
> 
> 标签：android, xml, imageview

我正在尝试开发该功能，用户可以在其中单击图像以选择要在单击的同一视图上上传的图像。我将 ImageView 定义如下

```
 <ImageView
     style = "@style/DefaultButton"
     android:id="@+id/choose_img"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_centerHorizontal="true"
     android:layout_marginTop="46dp"
     android:clickable="True"
     android:adjustViewBounds="true"
     android:onClick="chooseImg"
     android:contentDescription="@string/description_logo"
     android:src="@drawable/user2" /> 
```

方法chooseImg如下

```
 public void chooseImg(View view){
        Toast.makeText(this, "Choose Image from Gallery", Toast.LENGTH_SHORT).show();
        Intent chimg = new Intent(Intent.ACTION_GET_CONTENT);
        chimg.setType("image/*");
        startActivityForResult(chimg,CHOOSE_IMAGE_REQUEST_CODE);
    } 
```

该方法没有被调用。请帮我知道原因。谢谢 ：）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:25:54.757

被调用的`android:onClick`方法必须与您要执行的方法相匹配......但是您在 onClick 上的方法是`captureImg`并且您在活动中的方法名称是`chooseImg`。将它们更改为相同的方法名称，它应该可以解决您的问题。另见我的评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T18:29:19.357

卡斯帕是正确的。我要补充一点，您可以让 Activity 本身实现 View.OnClickListener 接口

onClick(View v) { if (v.getId() == (Id for ImageView)) { captureImg(); }

}

或者作为一个匿名的内部类。

# javascript - 跳过缺少的元素

> ID：12220642
> 
> 赞同：1
> 
> 时间：2012-08-31T18:18:05.397
> 
> 标签：javascript, html

我用来显示图像，通过迭代，说通过 i。但是对于某些条目，图像实际上可能丢失了。有没有办法避免显示断开的链接图标？（即如果找不到图像，则跳过该元素）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:27:33.967

当然......你可以做几件事：

**保持损坏的图像大小**
如果您知道假定图像的大小，您可以使用 css 强制它。

```
.img-broken {
   width: 250px;
   height: 250px;
   display: block;
} 
```

**进行图像替换**
您想用更好的东西替换占位符。

```
<img src="..." onerror="this.src='/img/broken_img_error.jpg';"> 
```

**完全擦除图像**
请参阅@Slave 答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T18:29:03.477

试试这个：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<script>
    function removeElement(elem) {
        var div = document.getElementById("mainDiv");
        div.removeChild(elem);
    }
</script>
    <title></title>
</head>
<body>
    <div id="mainDiv">
        <img  onerror='removeElement(this);' src="icon.png" />
    </div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T18:30:35.133

我不认为 javascript 是这里最好的方法。

如果您无法修复或依赖始终实际存在的图像（我知道它确实发生了），防止损坏图像的最简单方法是`.htaccess`在图像文件夹中放置一个文件（或等效文件，取决于您的托管环境）。

这种方法的好处是不用担心浏览器支持。这发生在服务器上，因此用户可能正在使用一些禁用 javascript 的古老专有 AOL 4.0 浏览器，这仍然可以工作；您根本不必处理用户代理差异或禁用 javascript。

我将这个用于我的用户图像。图像路径在数据库中，有时由于各种原因，数据库中指定的图像实际上不在文件夹中。这是`.htaccess`位于的文件的内容`images/users/`

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ images/users/default.png [R=301,L] 
```

这样做是静默地将任何对不存在文件的请求转发到 file `default.png`，这是我的“无可用照片”图像。现在，如果请求`images/users/this-does-not-exist.png`进入，文件`default.png`将被提供。没有损坏的图像！

**文档**

*   `.htaccess`对于 Apache - [http://httpd.apache.org/docs/2.2/howto/htaccess.html](http://httpd.apache.org/docs/2.2/howto/htaccess.html)
*   *MSDN 上*的 ASP.NET 中的 URL 重写-* [http://msdn.microsoft.com/en-us/library/ms972974.aspx](http://msdn.microsoft.com/en-us/library/ms972974.aspx)*
**   Helicon Ape - IIS 的 shim .htaccess 支持 - [http://www.helicontech.com/ape/](http://www.helicontech.com/ape/)*

 ** * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T18:51:46.213

我假设你有一些这样的代码：

```
var imgs = document.getElementsByTagName('img'); 
```

用一些图像填充变量。您可以设置`onerror`图像标签的方法（如其他答案中所述）来处理您想要的丢失图像。

这将删除`<img>`其图像不加载的标签：

```
for (var i in imgs)
{
    imgs[i].onerror = function() {
        this.style.display = 'none';
    }
} 
```

如果你想加载`missing_image.jpg`而不是让标签消失（小心这个，因为浏览器可能不会检测到你可以进入的无限循环如果`missing_image.jpg`不存在......）：

```
for (var i in imgs)
{
    imgs[i].onerror = function() {
        this.src = 'missing_image.jpg`;
    }
} 
```

**资料来源**：

1.  Javascript 图像对象：[http ://www.w3schools.com/jsref/dom_obj_image.asp](http://www.w3schools.com/jsref/dom_obj_image.asp)
2.  html标签：[http ://www.w3schools.com/tags/tag_img.asp](http://www.w3schools.com/tags/tag_img.asp)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-31T18:20:57.703

除了对图像位置进行 AJAX 调用以验证您获得 200 结果然后相应地显示/隐藏之外，我想不出一个好方法。

为什么不直接修复损坏的图片链接？*

# facebook - IE 中的 Facebook Connect 问题。已请求 SS 组件 DNB63，不应多次加载

> ID：12220643
> 
> 赞同：2
> 
> 时间：2012-08-31T18:18:13.647
> 
> 标签：facebook

它发生在从 facebook 连接触发的 facebook 登录窗口中验证凭据之后。

它说保存设备，然后抛出以下错误。

用户代理：Mozilla/4.0（兼容；MSIE 8.0；Windows NT 6.1；WOW64；Trident/4.0；SLCC2；.NET CLR 2.0.50727；.NET CLR 3.5.30729；.NET CLR 3.0.30729；InfoPath.3）时间戳: 2012 年 8 月 31 日星期五 17:47:39 UTC

消息：CSS 组件 DNB63 已被请求，不应多次加载。行：32 字符：1635 代码：0 URI：[https ://s-static.ak.fbcdn.net/rsrc.php/v2/yC/r/wn8vcRmqLA6.js](https://s-static.ak.fbcdn.net/rsrc.php/v2/yC/r/wn8vcRmqLA6.js)

之前有人遇到过这个问题吗？

# svn - Windows 7、Netbeans 和 svn

> ID：12220646
> 
> 赞同：1
> 
> 时间：2012-08-31T18:18:17.580
> 
> 标签：svn, netbeans

我曾经使用 Eclipse 作为 Java 编程的 IDE。由于我所有的 Java 项目都位于 SVN 服务器上，因此我使用“Subclipse”插件来访问我的代码。我工作正常。最近我决定改用 Netbeans（更快、更敏捷、更简洁的界面）。它具有对 SVN 的内置支持，但是...当我输入我的 svn 凭据（相同的链接、相同的用户名并通过 Subclipse 传递）时，我无法签出任何项目！我收到此错误消息：

```
org.tigris.subversion.javahl.ClientException: RA layer request failed OPTIONS of 'https://XXXXX': could not connect to server (https://XXXX) 
```

为什么？我的“Netbeans”配置为使用“系统”代理配置（我根本没有任何代理）。当我告诉 netbeans 不要使用代理时，也会显示相同的错误。这个问题肯定与代理无关，否则“Subclipse”也不起作用，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T10:23:09.460

我已经关闭了防火墙，重新启动了我的电脑，它工作了！奇怪...无论如何，谢谢！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T19:06:30.300

*   你用的是什么版本的NB？
*   使舒尔 SVN 客户端（NB 7.2 中的 1.7）和服务器具有相同的版本。
*   你的链接正确吗？也许它包含一些特殊字符，例如`%20`如果您使用普通 HTTP，这行得通吗？
*   检查 NB 的 svn 配置（默认情况下：`C:\Users\[you]\AppData\Roaming\NetBeans\7.2\config\svn\config`对于 NB 7.2）
*   看看 NB 日志 ( `..\AppData\Roaming\NetBeans\7.2\var\log`)
*   `Tools -> Options -> Miscellaneous -> Versioning -> Subversion`那里的客户设置是什么？
*   您是否在结帐窗口中设置了证书？有关证书问题，请参阅[此处](http://www.toedter.com/blog/?p=9)和[此处的解决方法](http://wiki.netbeans.org/FaqSslUserCert)

# winforms - 在devexpress gridView（xtragrid）中隐藏过滤器的复选框

> ID：12220647
> 
> 赞同：0
> 
> 时间：2012-08-31T18:18:36.643
> 
> 标签：winforms, checkbox, grid, devexpress, xtragrid

我有一个 DevExpress XtraGrid 控制一些列和一个 unbounds 列作为布尔值（因此出现复选框）供用户选择行/项目。我也应用了过滤器。在过滤器行中带有复选框的列上，运行时会出现一个复选框。我不希望此复选框出现在过滤器行中。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T05:02:08.013

当一个 RepositoryItemCheckEdit 分配给 Column 的 ColumnEdit 时，AutoFilterRow 中也会显示一个复选框。要将其替换为另一个编辑器，请处理[GridView.CustomRowCellEdit](http://documentation.devexpress.com/WindowsForms/DevExpressXtraGridViewsGridGridView_CustomRowCellEdittopic.aspx)事件，检查 e.RowHandle 参数是否等于**GridControl.AutoFilterRowHandle静态属性并向****e.RepositoryItem**属性提供所需的 RepositoryItem

相关链接：
1.[为单个单元格分配编辑器](http://documentation.devexpress.com/#WindowsForms/CustomDocument747)
2.[自动过滤行](http://documentation.devexpress.com/#WindowsForms/CustomDocument7097)

# compiler-construction - 如何强制数组溢出？

> ID：12220650
> 
> 赞同：1
> 
> 时间：2012-08-31T18:18:44.137
> 
> 标签：compiler-construction, fortran90, pgf

我有一个与 Portland Group FORTRAN 90 编译器有关的非常奇怪的问题。我正在尝试运行*依赖*于数组溢出才能正常工作的代码。*这段代码不是我写的！*发起者必须使用标志“-tp=piii”对其进行编译，以强制编译器避免进行破坏数组溢出的优化。我猜这个想法是为旧 P3 编写的编译器太原始而无法做这种事情。现在，当我尝试做同样的事情时，我收到消息“此安装不支持 pgf90-Fatal --tp piii”。所以我不能做同样的事情。

那么： pgf90 在其默认操作中是否会破坏代码所需的那种数组溢出？与我一起工作的人显然认为确实如此。而且，如果确实如此，是否可以使用其他一些标志来从“-tp = piii”标志中获取我需要的东西？

打赌你从来没有想过你会收到这样的问题！想想*我*的感受。是的，一旦我能说服我的饲养员让我这样做，我就会重写它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T20:29:00.080

我不再熟悉 PGI 编译器，也没有手头的文档，因此无法直接引导您使用所需的编译器选项，但它会在*数组边界*或*边界检查*之类的东西下被索引。

在 Fortran 90 之前，编写忽略或不知道数组边界的代码是常见的做法。以这种方式编写的大部分代码仍然在野外，我（像大多数 Fortran 程序员一样）经常遇到它。可悲的是（这是有争议的），这是一种可以接受的编写代码方式的态度。如果我在野外遇到这种态度，我会以极端的偏见终止它。

咆哮……这是至少一些目前广泛使用的 Fortran 编译器的默认行为，它不会自动生成在运行时当程序超出数组边界时会发脾气的代码。但是，它们都可以选择生成包含运行时边界检查的代码。

在运行时不检查数组边界通常意味着更快的代码，大多数 Fortran 用户对更快的代码非常感兴趣，这在某种程度上解释了编译器的默认行为。

因此，总而言之，重现您继承的代码的所需行为应该不会有太多麻烦。如果 PGI 编译器没有默认不检查数组边界，我会感到有点惊讶。但它肯定可以选择打开或关闭该功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T00:19:59.127

以防万一有人遇到与“piii”标志相同的问题，最近的 PGI 编译器确实支持此标志....如果您安装了 32 位库。而且，事实证明，我没有。

# objective-c - super respondsToSelector：返回 true，但实际上调用 super（选择器）会给出“发送到实例的无法识别的选择器”

> ID：12220652
> 
> 赞同：21
> 
> 时间：2012-08-31T18:18:56.667
> 
> 标签：objective-c, delegates, uigesturerecognizer, super, respondstoselector

好吧，我有点困惑。

我有一个 UIScrollView 的子类，这是我尝试像 UI 元素一样水平滚动的“表格视图”。UIScrollView 本身设置了它在内部使用的 UIGestureRecognizers，并且它似乎将自己设置为那些 UIGestureRecognizers 的委托。我的水平表格元素/单元格上也有我自己的 UIGestureRecognizer 设置，我自己的类设置为我自己的 UIGestureRecognizer 的委托。由于我的类是 UIScrollView 的子类，因此在运行时，UIGestureRecognizer 委托调用会针对 UIScrollView 内置 UIGestureRecognizers 和我自己的 UIGestureRecognizers 进入我的类。有点像 PITA，但我们可以通过传递我们不关心的那些来解决这个问题。

```
-(BOOL) gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer 
{ 
   if ([gestureRecognizer isKindOfClass:[UITapGestureRecognizer class]])
      return NO; 
      else
      {  
        if ([super respondsToSelector:@selector(gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:)])
           return [super gestureRecognizer:gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:otherGestureRecognizer];
           else 
           return NO;
        }
} 
```

问题是检查`[super respondsToSelector:@selector()]`返回YES，但是当我实际调用它时，`return [super gestureRecognizer:gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:otherGestureRecognizer];`我得到以下异常

> 2012-08-31 12:02:06.156 MyApp[35875:707]-[MyAppHorizo​​ntalImageScrollergestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:]: 无法识别的选择器发送到实例 0x21dd50

我原以为它应该显示

> -[UIScrollView 手势识别器：shouldRecognizeSimultaneouslyWithGestureRecognizer：]

但这可能没问题。但问题是它说它响应然后没有。

其他两个 UIGestureRecognizer 委托例程使用此代码（显然不同的选择器）。

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-31T18:24:04.280

除非您在类中覆盖对选择器的响应，否则您将在调用 super 时使用默认实现，该实现将检查当前实例。如果您想查看某类对象的实例是否响应选择器，请使用`+(BOOL)instancesRespondToSelector:(SEL)aSelector;`

这将检查对象及其父对象。因此，在您的情况下，您需要以下内容：

```
[UIScrollView instancesRespondToSelector:@selector(gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:)] 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-31T18:38:32.160

`[super respondsToSelector:@selector(frobnosticate:)]`不按你的想法做。

它转到超类，获取那里的实现`respondsToSelector:`，然后*在当前对象上*运行它。换句话说，`super`表示与 相同的对象`self`，它只是开始在继承树中更高一级的方法查找。

所以你`respondsToSelector:`在这个子类上运行，它回答“是”，但后来试图`gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:`从没有它的超类中获取。

要检查直接超类的实例，您可以使用`instancesRespondToSelector:`jjburka 推荐的方法，但我建议将`[self superclass]`其作为主题，如下所示：

```
[[self superclass] instancesRespondToSelector:@selector(gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:)]; 
```

这避免了硬编码类名。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-07-25T17:34:03.157

在查看其他答案后，最好的解决方案是使用`[[MapControllerSublcass1 superclass] instancesRespondToSelector:_cmd]`. 如果您使用上面推荐的方法，例如`[BaseClass instancesRespondToSelector:_cmd]`，您会遇到更改类层次结构的问题，并且不小心忘记更改`BaseClass`为新的超类或子类。

`[[self superclass] instancesRespondToSelector:...]`正如上面在评论中所解释的那样是不正确的，它实际上在[Apple 的文档中是这样说的（参见 respondsToSelector: in NSObjct）](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/respondsToSelector)。它仅在您具有 1 级子类化时才有效，因此它给您一种***错觉***，即它是一个实际的解决方案。我爱上了它。

并且`[[super class] instancesRespondToSelector:...]`不起作用，这是这个 SO 问题的重点。

例如，我有一个`BaseMapController`实现了 中的一些方法`MKMapViewDelegate`，但它没有实现`mapView:regionWillChangeAnimated:`. `MapControllerSublcass1`继承自`BaseMapController`。并`MapControllerSubclass2`继承自`MapControllerSublcass1`.

在我的代码中，我有类似的东西，它工作正常。

***MapControllerSublcas1.m***：

```
- (void)mapView:(MKMapView *)mapView regionWillChangeAnimated:(BOOL)animated {
  if ([[MapControllerSublcass1 superclass] instancesRespondToSelector:_cmd]) {
    [super mapView:mapView regionWillChangeAnimated:animated];
  }
} 
```

***MapControllerSubclass2.m***：

```
- (void)mapView:(MKMapView *)mapView regionWillChangeAnimated:(BOOL)animated {
  if ([[MapControllerSubclass2 superclass] instancesRespondToSelector:_cmd]) {
    [super mapView:mapView regionWillChangeAnimated:animated];
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-05T00:27:54.690

作为一个有相同情况的人的总结，原来的问题有两个问题：

1.  检查超类是否响应该选择器，正如@jjburka 建议的那样，最好使用`instancesRespondToSelector:`.
2.  实际上在超类上调用该方法而编译器不会抱怨，即使它是在私有头文件中声明的。这可以通过在一个类别中重新声明它来巧妙地实现（参见[这个问题](https://stackoverflow.com/questions/16678463)）。

把它放在一起给出：

```
// … In subclass implementation file
@interface UIScrollView () <UIGestureRecognizerDelegate> @end

// … In gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:
if ([UIScrollView instancesRespondToSelector:@selector(gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:)]) {
    return [super gestureRecognizer:gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:otherGestureRecognizer];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T18:36:07.213

你打电话时

```
[super respondsToSelector:@selector(gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:)] 
```

这将转到超类并运行其实现`respondsToSelector`。这会查看实例（在本例中是您的自定义滚动视图）并确定它是否响应该选择器。

你打电话时

```
[super gestureRecognizer:gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:otherGestureRecognizer]; 
```

您尝试使用该方法的超类实现发送消息，在这种情况下该方法不存在，从而导致崩溃。

看起来 jjburka 先到了 - 你需要打电话

```
[UIScrollView instancesRespondToSelector:@selector(gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:)] 
```

此外，如果您使用来自无法识别的选择器，它也不会崩溃`-[super performSelector:]`- 执行选择器获取选择器的实例实现。它将因无限递归而崩溃。

# python - 获取 NDB 查询长度 - 在 Google App Engine 上使用 Python

> ID：12220653
> 
> 赞同：5
> 
> 时间：2012-08-31T18:18:56.940
> 
> 标签：python, google-app-engine, app-engine-ndb

**在谷歌应用引擎上使用 NDB 时获取查询结果数量的好方法是什么？**

尝试了这个：

```
query = NDB_Model.query(NDB_Model.some_property == some_value)
if len(query) > 0:    # <-- this throws and exception
    entity = query[0] 
```

很抱歉，这可能是一个非常简单的问题，但从[文档](https://developers.google.com/appengine/docs/python/ndb/queries)中我并不清楚。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-31T18:26:27.250

您似乎只想从查询中获取第一个实体。这[`query.get()`](https://developers.google.com/appengine/docs/python/ndb/queryclass#Query_get)就是为了。

```
query = NDB_Model.query(NDB_Model.some_property == some_value)

entity = query.get()
if entity is not None:
    # Do stuff 
```

从文档：

> 返回第一个查询结果（如果有）（否则为无）。这类似于调用 q.fetch(1) 并返回结果列表的第一项。

在更一般的形式中，要获取的最大实体数`query.fetch(n)`在哪里。`n`它返回一个列表，因此您可以轻松地检查`len()`它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-20T18:48:57.610

要获取 ndb 查询的结果计数，您可以简单地使用[`count()`](https://developers.google.com/appengine/docs/python/ndb/queryclass#Query_count)：

```
query = NDB_Model.query(NDB_Model.some_property == some_value)
if query.count() > 0:
    entity = query[0] 
```

# .net - 添加程序集引用时的端点？

> ID：12220659
> 
> 赞同：0
> 
> 时间：2012-08-31T18:19:23.950
> 
> 标签：.net, wcf

我有一个使用对类库的引用的 WCF 服务。该库中的类执行与数据库交互之类的操作。我正在通过浏览器使用 restful 调用测试我的服务（编译时没有错误），它只显示一个页面，上面只显示“找不到端点。”。我假设这与库引用连接字符串和应用程序设置等（我通常必须包含在使用该库的应用程序中）的事实有关。所以我很难找到的是如何正确配置 wcf 服务以使用这个库。我尝试简单地将连接字符串和应用程序设置添加到 wcf web.config，但这似乎没有帮助。我觉得这只是通过服务的端点部分添加对库的引用。但我迷路了。任何帮助表示赞赏。谢谢

```
<system.serviceModel>
    <services>
      <service name="RestService.RestServiceImpl" behaviorConfiguration="ServiceBehavior">
        <endpoint address="" binding="webHttpBinding" contract="RestService.IRestServiceImpl" behaviorConfiguration="web">

        </endpoint>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name ="ServiceBehavior">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel> 
```

更新：运行跟踪，这是抛出异常的堆栈跟踪：

System.ServiceModel.Dispatcher.HttpUnhandledOperationInvoker.Invoke（对象实例，对象 [] 输入，对象 []& 输出） System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin（MessageRpc& rpc） System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5（MessageRpc& rpc） System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage41(MessageRpc& rpc) System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc& rpc) System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc) System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc& rpc) System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc& rpc) System.ServiceModel.Dispatcher.ImmutableDispatchRuntime。ProcessMessage11(MessageRpc& rpc) System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc) System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet) System.ServiceModel.Dispatcher.ChannelHandler.DispatchAndReleasePump(RequestContext request, Boolean cleanThread, OperationContext currentOperationContext) System.ServiceModel.Dispatcher.ChannelHandler.HandleRequest(RequestContext request, OperationContext currentOperationContext) System.ServiceModel.Dispatcher.ChannelHandler.AsyncMessagePump(IAsyncResult 结果) System.ServiceModel.Dispatcher.ChannelHandler.OnAsyncReceiveComplete(IAsyncResult 结果) System.Runtime.Fx.AsyncThunk。 UnhandledExceptionFrame（IAsyncResult 结果） System.Runtime.AsyncResult.Complete（布尔完成同步） System.Runtime.InputQueueServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc) System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet) System.ServiceModel.Dispatcher.ChannelHandler.DispatchAndReleasePump(RequestContext request, Boolean cleanThread, OperationContext currentOperationContext) System.ServiceModel.Dispatcher.ChannelHandler .HandleRequest(RequestContext request, OperationContext currentOperationContext) System.ServiceModel.Dispatcher.ChannelHandler.AsyncMessagePump(IAsyncResult 结果) System.ServiceModel.Dispatcher.ChannelHandler.OnAsyncReceiveComplete(IAsyncResult 结果) System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame(IAsyncResult 结果) 系统。 Runtime.AsyncResult.Complete(Boolean completedSynchronously) System.Runtime.InputQueueServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc) System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet) System.ServiceModel.Dispatcher.ChannelHandler.DispatchAndReleasePump(RequestContext request, Boolean cleanThread, OperationContext currentOperationContext) System.ServiceModel.Dispatcher.ChannelHandler .HandleRequest(RequestContext request, OperationContext currentOperationContext) System.ServiceModel.Dispatcher.ChannelHandler.AsyncMessagePump(IAsyncResult 结果) System.ServiceModel.Dispatcher.ChannelHandler.OnAsyncReceiveComplete(IAsyncResult 结果) System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame(IAsyncResult 结果) 系统。 Runtime.AsyncResult.Complete(Boolean completedSynchronously) System.Runtime.InputQueuerpc) System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet) System.ServiceModel.Dispatcher.ChannelHandler.DispatchAndReleasePump(RequestContext request, Boolean cleanThread, OperationContext currentOperationContext) System.ServiceModel.Dispatcher.ChannelHandler.HandleRequest(RequestContext request, OperationContext currentOperationContext) System.ServiceModel.Dispatcher.ChannelHandler.AsyncMessagePump（IAsyncResult 结果） System.ServiceModel.Dispatcher.ChannelHandler.OnAsyncReceiveComplete（IAsyncResult 结果） System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame（IAsyncResult 结果） System.Runtime.AsyncResult.Complete（布尔完成同步） System.Runtime.InputQueuerpc) System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet) System.ServiceModel.Dispatcher.ChannelHandler.DispatchAndReleasePump(RequestContext request, Boolean cleanThread, OperationContext currentOperationContext) System.ServiceModel.Dispatcher.ChannelHandler.HandleRequest(RequestContext request, OperationContext currentOperationContext) System.ServiceModel.Dispatcher.ChannelHandler.AsyncMessagePump（IAsyncResult 结果） System.ServiceModel.Dispatcher.ChannelHandler.OnAsyncReceiveComplete（IAsyncResult 结果） System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame（IAsyncResult 结果） System.Runtime.AsyncResult.Complete（布尔完成同步） System.Runtime.InputQueueDispatchAndReleasePump(RequestContext request, Boolean cleanThread, OperationContext currentOperationContext) System.ServiceModel.Dispatcher.ChannelHandler.HandleRequest(RequestContext request, OperationContext currentOperationContext) System.ServiceModel.Dispatcher.ChannelHandler.AsyncMessagePump(IAsyncResult 结果) System.ServiceModel.Dispatcher.ChannelHandler.OnAsyncReceiveComplete( IAsyncResult 结果） System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame（IAsyncResult 结果） System.Runtime.AsyncResult.Complete（布尔完成同步） System.Runtime.InputQueueDispatchAndReleasePump(RequestContext request, Boolean cleanThread, OperationContext currentOperationContext) System.ServiceModel.Dispatcher.ChannelHandler.HandleRequest(RequestContext request, OperationContext currentOperationContext) System.ServiceModel.Dispatcher.ChannelHandler.AsyncMessagePump(IAsyncResult 结果) System.ServiceModel.Dispatcher.ChannelHandler.OnAsyncReceiveComplete( IAsyncResult 结果） System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame（IAsyncResult 结果） System.Runtime.AsyncResult.Complete（布尔完成同步） System.Runtime.InputQueueAsyncMessagePump（IAsyncResult 结果） System.ServiceModel.Dispatcher.ChannelHandler.OnAsyncReceiveComplete（IAsyncResult 结果） System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame（IAsyncResult 结果） System.Runtime.AsyncResult.Complete（布尔完成同步） System.Runtime.InputQueueAsyncMessagePump（IAsyncResult 结果） System.ServiceModel.Dispatcher.ChannelHandler.OnAsyncReceiveComplete（IAsyncResult 结果） System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame（IAsyncResult 结果） System.Runtime.AsyncResult.Complete（布尔完成同步） System.Runtime.InputQueue`1.AsyncQueueReader.Set(Item item) System.Runtime.InputQueue`1.EnqueueAndDispatch(Ite​​m item, Boolean canDispatchOnThisThread) System.Runtime.InputQueue`1.EnqueueAndDispatch(T item, Action dequeuedCallback, Boolean canDispatchOnThisThread) System.ServiceModel.Channels.SingletonChannelAcceptor`3.Enqueue(QueueItemType item, Action dequeuedCallback, Boolean canDispatchOnThisThread) System.ServiceModel.Channels.HttpChannelListener.HttpContextReceived(HttpRequestContext context, Action回调) System.ServiceModel.Activation.HostedHttpTransportManager.HttpContextReceived(HostedHttpRequestAsyncResult结果) System.ServiceModel.Activation.HostedHttpRequestAsyncResult。 HandleRequest() System.ServiceModel.Activation.HostedHttpRequestAsyncResult.BeginRequest() System.ServiceModel.Activation.HostedHttpRequestAsyncResult.OnBeginRequest(对象状态) System.Runtime.IOThreadScheduler.ScheduledOverlapped.IOCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* nativeOverlapped) System.Runtime .Fx.IOCompletionThunk.UnhandledExceptionFrame（UInt32 错误，UInt32 bytesRead，NativeOverlapped* nativeOverlapped） System.Threading._IOCompletionCallback。PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:43:32.157

好的，所以我让它工作了。似乎是主机地址的问题。我将项目重新创建为服务库而不是服务应用程序，我注意到默认配置中有几个新字段。其中之一是给主人的。当我设置基地址时，一切都开始工作了。这是配置：

```
<system.serviceModel>
<services>
  <service name="ServiceWithLibraryTest.UtiService">
    <endpoint address="" binding="webHttpBinding" contract="ServiceWithLibraryTest.IUtiService" behaviorConfiguration="web" />        
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:8732/ServiceWithLibraryTest/UtiService/"/>
      </baseAddresses>
    </host>
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="ServiceBehavior">
      <serviceMetadata httpGetEnabled="True"/>
      <serviceDebug includeExceptionDetailInFaults="False"/>
    </behavior>
  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="web">
      <webHttp/>
    </behavior>
  </endpointBehaviors>
</behaviors> 
```

我对 WCF 有点陌生，据我了解，配置经常令人头疼是臭名昭著的。我仍在努力研究端点，但我开始更好地理解端点如何只是暴露服务和行为的方式，即它们是如何通信的。然后，当然，休息服务为其添加了一个全新的层。我很欣赏这些想法:)

# java - window.parseJSON 正在截断大量数字

> ID：12220663
> 
> 赞同：4
> 
> 时间：2012-08-31T18:19:34.623
> 
> 标签：java, javascript, numbers, long-integer, truncation

> **可能重复：**
> [在 Javascript 中错误地舍入大数字](https://stackoverflow.com/questions/1379934/large-numbers-erroneously-rounded-in-javascript)

我正在使用 jQuery.parseJSON() 来获取一个 json 字符串并使其成为一个对象。json 字符串由我们的服务器放置在带有初始标记的脚本标记中。json 字符串包含引用我们网站上不同资源的值。

这个在开发中被忽视的问题在实现中存在，现在开始抬头。我们的服务器是基于java的。数值大部分表示为 Long。所以 json 字符串会有类似“...'id': 25783071737028608...”的内容。这是一个问题，因为这个值超过了 JS Number 类型的最大值 10 的两个整数幂。在这种情况下，数字会向上取整：25783071737028610，这会导致各种数据不一致问题。

这种类型的模式在我们的网站上无处不在，这些值代表我们数据库中的值。我想避免对数据库进行大规模重构。我还想避免仅将内容作为字符串传递给浏览器（“...'id':”25783071737028608“...”，因为查找 long 传递给 javascript 的每个实例都需要对我们的数据库进行大规模重构。

无论如何在 JavaScript 中表示 Java 长类型？如果没有（我相信是这种情况），是否有任何创造性的解决方法可以用来解决类似问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T18:36:39.307

正如您已经提到的，您的值超过了 JavaScript 中的最大整数值，因此除了将值作为字符串传递或编写自己的 JavaScript JSON 解析器（或修改 jQuery 解析器）并将长整数值解析为字符串之外，您无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T18:24:54.303

您必须在服务器上将数字编码为字符串，或者在 JavaScript 中编写自己的 JSON 解析器来处理太大的数字常量。

（关于 SO 至少还有一个与此几乎相同的问题。）

*编辑*-抱歉，我错过了您说无法更改编码的部分。~~好消息是您应该能够获取 JSON2 解析器源并对其进行修改，也许可以将所有数字常量解释为字符串，或者长度超过一定位数的字符串。~~

糟糕，json2.js“解析器”只是一个确保调用`eval()`不会导致问题的消毒剂。好吧，我认为这种方法是您唯一的选择。如果您的 JSON 表达式的结构足够规则且足够简单，您可能可以使用正则表达式“修复”它们预解析，但如果不是，那么它就是 JavaScript 中的 JSON 解析器。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-31T18:37:49.447

JavaScript 中的数字是双精度浮点数，这意味着它们具有大约 15 位的精度。超过 15 位的数字以相同的方式近似`1/3`。

即使您可以将其更改为字符串，您也无法以任何方式操作该数字。老实说，我想不出任何理由为什么你的身份证号码会在千万亿...

# tfs - 无法连接到我的家庭网络之外的 Team Foundation Server

> ID：12220667
> 
> 赞同：0
> 
> 时间：2012-08-31T18:19:54.197
> 
> 标签：tfs

> **可能重复：**
> [远程访问 Team Foundation Server 2010](https://stackoverflow.com/questions/6412549/remote-access-to-team-foundation-server-2010)

我和我的一个朋友正在尝试连接到我设置的团队基础服务器。

我正在使用 Win 7、Microsoft MySQL 2008 Express 和 VS2010 以及 VS Team Foundation。

当我在家时，我可以将我的另一台计算机 (2) 连接到我的“笔记本电脑服务器 (1)”。问题是，当我的一个朋友试图在我的家庭网络之外连接到我的“笔记本电脑服务器（1）时，他得到了错误：”TF31002\. 无法连接到此网络”。

但是，如果我将笔记本电脑搬到他的位置并使用他的网络，他可以连接到我。

我能做些什么来解决这个问题？

最好的问候托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:22:52.457

您需要将家庭路由器设置为将用于 TFS（8080？）的端口从外部 IP 地址转发到托管 TFS 的 PC。

您的朋友需要连接到您的 TFS 服务器，就好像它在您的路由器的外部 IP 地址上一样。

# jquery - 替换嵌套的html标签

> ID：12220668
> 
> 赞同：1
> 
> 时间：2012-08-31T18:19:55.980
> 
> 标签：jquery

我使用这个脚本用 span 标签替换嵌套的字体标签：

```
$(document).ready(function(e) {
    var content = $('div').first();

    $('#input font').each(function(index, value){
        var span = document.createElement('span');
        span.style.color = $(this).attr('color');
        span.innerHTML = $(this).html();
        $(content).children('font').first().replaceWith(span);  
    });
    $('#output').html($(content).html());
}); 
```

这是带有我要替换的字体标签的html

```
<div id="input">
    At vero eos et accusam et justo duo dolores et ea rebum. <font color="#00FF99"><font color="#ff0000">Stet clita</font> kasd gubergren</font>, no sea takimata sanctus est Lorem ipsum dolor sit amet. 
</div>
<div id="output"></div> 
```

我的脚本不会替换内部字体标签 ( `<font color="#ff0000">Stet clita</font>`)。知道为什么吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:34:09.443

你可以使用`replaceWith`方法。

```
$('#input font').each(function(){
    var $this = $(this);
    var $span = $('<span/>', {
                   text: $this.text(),
                   style: "color:" + $this.css('color')
                })
    $this.replaceWith($span)
}); 
```

[小提琴](http://jsfiddle.net/Ek24R/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T18:26:14.483

我猜想`font`首先将外部标签替换为新的`span`. `font`该操作实际上从 DOM中删除了初始内部元素，因此第二次迭代`each()`将失败。被替换的 new`font`不受原始`each()`调用的约束，因此不会对其执行任何操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T18:51:28.857

略有不同的方法：[**工作演示**](http://jsfiddle.net/NN9Sn/1/)

请注意，与您的版本不同，更改仅在 中进行`#output`，而不是在`#input`; 我怀疑这是您的意图，基于名称（因此使用`.clone()`）。

```
$(document).ready(function(e) {
    var content = $('div').first().clone();
    var fnt = content.find('font');
    while( fnt.length > 0 ) {
        var current = fnt.first();
        var span = $('<span />')
            .css('color', current.attr('color') )
            .html( current.html() );
        current.replaceWith(span);
    }
    $('#output').html( $(content).html() );
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T18:28:10.783

尝试将线路更改为：

```
span.innerHTML = $(this).text(); 
```

而不是

```
span.innerHTML = $(this).html(); 
```

如果您确定`<font>`标签中只有文本，请执行此操作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T18:43:52.050

试试这种深度优先的方法：

[http://jsfiddle.net/C8euR/1/](http://jsfiddle.net/C8euR/1/)

```
function replace(el) {
    if (el.length == 0) return;
    replace($(el).children('font'));   
    if ($(el).is('font')) {
        var span = document.createElement('span');
        span.style.color = $(el).attr('color');
        span.innerHTML = $(el).html();     
        $(el).replaceWith(span);    
    }
}

$(function(e) {
    var content = $('div').first();
    replace(content);
}); 
```

# php - 将 cakePHP 与谷歌联系人 api 一起使用

> ID：12220680
> 
> 赞同：1
> 
> 时间：2012-08-31T18:20:50.870
> 
> 标签：php, cakephp

因此，我能够在我的应用程序中实现 google 分发的示例代码。这意味着我能够从我的应用程序中获得所需的授权。一旦我单击允许以允许我的应用程序访问我的帐户并显示我的联系人等，重定向回我的应用程序将不起作用。

例如目的：

`localhost/intranet/` --> 显示“连接我”以接收令牌并允许访问信息。

允许后的重定向使我回到：

```
https://localhost/intranet?code=4/ECNNFvZpVf_iUpYdsdfsdfXL5R2GBP.oiG-xuYwCAcduJJVnL49Cc9cH8D7cgI 
```

我的 cakePHP 应用程序无法识别。这是我可以修复的应用程序设置吗？或者我会在哪里解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T04:28:09.693

需要在google api的api访问中定义具体的redirect uri。 `https`并`http`有所作为。

# debugging - 如何使 Xcode 4.4 调试控制台使用弹出窗口进行自动完成？

> ID：12220682
> 
> 赞同：4
> 
> 时间：2012-08-31T18:20:55.290
> 
> 标签：debugging, autocomplete, xcode4.4, codesense

我在 OSX Mountain Lion 10.8.1 上使用 Xcode 版本 4.4.1 (4F1003)

* * *

假设您在 Xcode 中进行调试，然后在断点处停止。

然后您转到调试控制台提示符并开始输入`po loc`...

对我来说，会发生以下两种情况之一：

1.) 控制台将显示一个带有选项的弹出窗口（与主文本编辑窗口中的自动完成工作方式相同）

![自动完成弹出窗口](../Images/989c0677ba62f0ffba9dd65f9ecf5b56.png)

或者

2.) 控制台会简单地自动完成它找到的第一件事。例如`po localeconv()`. 即使我要打字`po locationForAPI`。

* * *

据我所知，Xcode 何时表现为 1 以及何时表现为 2 是随机的。

事实证明 2 根本不是很有用（[这里有人试图关闭此功能](https://stackoverflow.com/q/7195691/888507)）。

* * *

但是，行为 1 非常有用！

因此，我的问题是： **有谁知道如何强制 Xcode 使用行为 1 而不是行为 2？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:58:08.373

解决方案：重新启动 Xcode
Xcode 总是以良好的行为开始，然后在某个时候切换到不良行为。

（经典的“删除派生数据”在这种情况下不起作用）

# c - 需要一个能够打印屏幕的winapi函数

> ID：12220691
> 
> 赞同：-1
> 
> 时间：2012-08-31T18:22:04.637
> 
> 标签：c, winapi, colors, screenshot, printscreen

我想创建一个小实用程序“ColorPic”，下面是它的图片。

事实上，我可以得到光标所在像素的 RGB。

但我想创建一个窗口，将屏幕的一部分（光标附近）“打印”到这个窗口中。

最重要的是我需要一个放大和缩小的选项，这意味着我可以用 4x4、8x8、16x16 或 32x32 矩形来表示一个像素...

我知道有一个 SetPixel 函数，但这不是我想要的。

是否有一个非常有效的功能来做到这一点，比如“PrintScreen”（并且可以指定一个矩形作为参数）？非常高效，我的意思是当一个鼠标移动时，该功能可以非常快速地刷新窗口并且不会占用太多系统资源。

![在此处输入图像描述](../Images/211e7484460c176b61dd67979fb7936e.png)s

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T18:37:01.347

我发现了这个：

```
 HBITMAP MakePrintScreen()
    {
          HWND hWindow = GetDesktopWindow();
          HDC hdcScreen = GetDC(hWindow);
          RECT rect;
          HBITMAP hbmC;

          GetClientRect(hWindow,&rect);

          if((hbmC = CreateCompatibleBitmap(hdcScreen,rect.right,rect.bottom)) != NULL)
          {
                HDC hdcC;
                if((hdcC = CreateCompatibleDC(hdcScreen)) != NULL)
                {
                      HBITMAP hbmOld = (HBITMAP)SelectObject(hdcC,hbmC);

                      BitBlt(hdcC,0,0,rect.right,rect.bottom,hdcScreen,0,0,SRCCOPY);

                      SelectObject(hdcC,hbmOld);
                      DeleteDC(hdcC);
                }
          }

          ReleaseDC(hWindow,hdcScreen);

          return hbmC;
    } 
```

从：

[http://forum.4programmers.net/C_i_C++/149036-WINAPI_Print_screen_przyslonietego_okna](http://forum.4programmers.net/C_i_C++/149036-WINAPI_Print_screen_przyslonietego_okna)

# php - 将 jQuery 值发送 到 PHP

> ID：12220692
> 
> 赞同：0
> 
> 时间：2012-08-31T18:22:06.070
> 
> 标签：php, jquery, mysql

我正在尝试将“值”传递给“prova.php”页面，以便动态地进行 mysql 查询。但这不起作用..我应该添加什么？php open 标记下的所有内容都必须是动态的：没有页面加载。这是我的 prova.php 文件的代码：

```
 <!DOCTYPE html>
    <html>
    <head>
      <script src="http://code.jquery.com/jquery-latest.js"></script>
    </head>
    <body>

      <div id="single">
        <input type="text" value="test test"/><br /> 
    </div>
    <p></p>

    <div id="fo">focusout fire</div>
    <div id="b">blur fire</div>

    <script>

    var fo = 0, b = 0;
    $("#single").focusout(function(e) {
      fo++;
      $("#fo")
        .text("focusout fired: " + fo + "x");
        var value = (e.target.value );
        alert( value );

    $.ajax({
      type: "POST",
      url: "prova.php",
      data: { temp: value }
    })
     /*$.ajax({
            url: 'prova.php',
            type: 'POST',
            data : "temp = 100",
            success: function(data) {
            alert('Load was performed.');
             }  
        });*/
    })

    </script>
    <?php
    $link = mysql_connect('localhost', 'root', '');
    if (!$link) {
        die('Could not connect: ' . mysql_error());
    }
    echo 'Connected successfully';
    mysql_select_db("test");
    //if(isset($_POST['id']))
    $value=$_POST['temp'];
    echo $_POST['temp'];
    $sql=mysql_query("SELECT * FROM articles WHERE id='$value'");
    if(!$sql)
    echo"ERROR: Invalid Query!";
    $row=mysql_fetch_array($sql);
    $articleText=$row["text"];
    echo$articleText;

    ?>
    </body>
    </html> 
```

我已经使用 jquery 的 get 和 post api 搜索了它，但没有结果。我认为我应该在 ajax 下添加更多东西，但我不知道是什么！我认为应该在 ajax 下执行 php 代码，但我对 ajax 和 jquery 不是很保密：我是第一次使用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:30:05.460

首先你发送的参数是错误的。您必须发送 javascript 对象格式（键：值对）：

```
 $.post("prova.php" ,{
    temp: 100
},function(data){   
 //data "echo"-ed from script                       
}); 
```

服务器端：

```
$data=$_POST['temp'];
//do your stuff
echo 'done'; 
```

# spring - 保存、更新和删除在 Hibernate 和 Spring 中不起作用

> ID：12220695
> 
> 赞同：0
> 
> 时间：2012-08-31T18:22:21.443
> 
> 标签：spring, hibernate, service, dao, sessionfactory

这是我的应用程序上下文、Dao 实现类和服务类。如果我尝试获取任何记录，作为响应，我的对象中有所有记录，但是当我尝试保存或更新或尝试从数据库中删除对象时，没有任何异常发生。

```
<?xml version="1.0" encoding="UTF-8"?>

    <context:annotation-config />

    <context:component-scan base-package="org.prosigns.adminity.model.layers" />

    <mvc:annotation-driven />

    <tx:annotation-driven transaction-manager="transactionManager" />

    <context:property-placeholder location="classpath:hibernate.properties" />

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource"
          p:driverClassName="${jdbc.driverClassName}" 
          p:url="${jdbc.url}"
          p:username="${jdbc.username}" 
          p:password="${jdbc.password}"/>

    <bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource" 
          p:basename="Messages" />

    <bean id="sessionFactory" class="org.prosigns.adminity.model.common.annotation.ScanningAnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="annotatedPackages">
            <list>
                <value>org.prosigns.adminity.model.layers.domain.**.*</value>
                <value>org.prosigns.adminity.model.layers.dao.**.*</value>
                <value>org.prosigns.adminity.model.layers.services.**.*</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${hibernate.dialect}</prop>
                <prop key="hibernate.connection.autocommit">false</prop>
                <prop key="org.hibernate.transaction">false</prop>
                <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
                <prop key="hibernate.format_sql">${hibernate.format_sql}</prop>
                <prop key="hibernate.use_sql_comments">${hibernate.use_sql_comments}</prop>
                <prop key="hibernate.max_fetch_depth">${hibernate.fetch_depth}</prop>
                <prop key="hibernate.current_session_context_class">${hibernate.current_session_context_class}</prop>
                <prop key="hibernate.transaction.factory_class">${hibernate.transaction_factory_class}</prop>
                <prop key="hibernate.bytecode.use_reflection_optimizer">${hibernate.use_reflection_optimizer}</prop>
                <prop key="hibernate.connection.release_mode">${hibernate.connection_release_mode}</prop>
                <prop key="hibernate.jdbc.batch_size">${hibernate.jdbc_batch_size}</prop>
                <prop key="hibernate.cache.use_second_level_cache">${hibernate.cache_use_second_level_cache}</prop>
                <prop key="hibernate.cache.provider_class">net.sf.ehcache.hibernate.SingletonEhCacheProvider</prop>
            </props>
        </property>
    </bean>

<bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>    

</beans>

@Repository
public class PersistenceDaoImpl<T, PK extends Serializable> implements PersistenceDao<T, PK> {

    /** Class type. */
    Class<T> type;

    /**
     * Gets the current session in use (creates one if necessary).
     * @return Session object 
     */
    public Session getSession() throws DatabaseException{
        return SessionManager.getSessionFactory().openSession();
    }

    /**
     * Default bean constructor for spring.
     */
    public PersistenceDaoImpl() {
        // default constructor for spring
    }

    /**
     * Constructor.
     * @param type class type
     */
    public PersistenceDaoImpl(Class<T> type) {
        this.type = type;
    }

    /** Helper functions.
     * @return the currently set class
     */
    public Class<T> getPersistentClass() {
        return this.type;
    }

    /**
     * Delete persistentObject from DB.
     * @param persistentObject object to delete.
     */
    public void delete(T persistentObject) throws DatabaseException{
        getSession().delete(persistentObject);

    }

    /** Deletes an object of a given Id. Will load the object internally so consider using delete (T obj) directly
     * @param id Delete key
     */
    public void delete(PK id) throws DatabaseException{
        getSession().delete(load(id));
    }

    /**
     * Loads the given Object.
     * @param id to load
     * @return T Loaded object
     */
    @SuppressWarnings("unchecked")
    public T load(PK id) throws DatabaseException{
        T t = (T) getSession().load(this.type, id);
        if (t == null){
            return (T) new Object();
        }
        return t;
    }

    /**
     * Loads the given Object.
     * @param id Id to load
     * @return An object of type T
     */
    @SuppressWarnings("unchecked")
    public T get(PK id) throws DatabaseException{
        return (T) getSession().get(this.type, id);
    }

    /**
     * Item to save.
     * @param o object to save
     * @return PK
     */
    @SuppressWarnings("unchecked")
    public PK save(T o) throws DatabaseException{
        return (PK) getSession().save(o);
    }

   /**
     * Item to refresh.
     * @param o object to refresh
     */
    public void refresh(T o) throws DatabaseException{
        getSession().refresh(o);
    }

    /**
     * Item to saveOrUpdate.
     * @param o item to save.
     */
    public void saveOrUpdate(T o) throws DatabaseException{
        getSession().saveOrUpdate(o);
    }

    /**
     * Update object.
     * @param o object to update
     */
    public void update(T o) throws DatabaseException{
        getSession().update(o);
    }

    /**
     * Get query.
     * @param s Query to execute.
     * @return Query object
     */
    public Query getQuery(String s) throws DatabaseException{
        return getSession().createQuery(s);
    }

    /** Delete object.
     * @param persistentObject to delete
     * @param session to use
     * 
     */
    public void delete(T persistentObject, Session session) throws DatabaseException{
        getSession().delete(persistentObject);
    }

    /** Deletes an object of a given Id. Will load the object internally so consider using delete (T obj) directly.
     * @param id to delete 
     * @param session to use
     */
    public void delete(PK id, Session session) throws DatabaseException{
        getSession().delete(load(id));
    }

    /**
     * Loads the given Object.
     * @param id to load
     * @param session to use
     * @return  an object of type T
     */
    @SuppressWarnings("unchecked")
    public T load(PK id, Session session) throws DatabaseException{
        return (T) session.load(this.type, id);
    }

    /**
     * Loads the given Object.
     * @param id Id to load
     * @param session Session to use
     * @return An object of type T
     */
    @SuppressWarnings("unchecked")
    public T get(PK id, Session session) throws DatabaseException{
        return (T) session.get(this.type, id);
    }

    /** Save object.
     * @param o to save 
     * @param session to use
     * @return the id of the saved object
     * 
     */
    @SuppressWarnings("unchecked")
    public PK save(T o, Session session) throws DatabaseException{
        return (PK) session.save(o);
    }

    /** Save Or Update object.
     * @param o to save
     * @param session to use.
     * 
     */
    public void saveOrUpdate(T o, Session session) throws DatabaseException{
        session.saveOrUpdate(o);
    }

    /** Update record.
     * @param o to update
     * @param session to use
     * 
     */
    public void update(T o, Session session) throws DatabaseException{
        session.update(o);
    }

    /**
     * GetQuery.
     * @param s to return
     * @param session  to use
     * @return Query object
     */
    public Query getQuery(String s, Session session) throws DatabaseException{
        return session.createQuery(s);
    }

    /** Wrapper around hibernate functions.
     * @param criterion to use
     * @return A list of matching objects
     */
    @SuppressWarnings("unchecked")
    public List<T> findByCriteria(Criterion... criterion) throws DatabaseException{
        Criteria criteria =  getSession().createCriteria(getPersistentClass());

        for (Criterion c : criterion) {
            criteria.add(c);
        }
        return criteria.list();
    }

    /** FindAll.
     * @return A list of all the objects
     */
    public List<T> findAll() throws DatabaseException{
        return findByCriteria();
    }

    /** Flushes the cache of the currently-used session.
     * @throws DatabaseException 
     * @throws HibernateException 
     * 
     */
    public void flush() throws DatabaseException {
        getSession().flush();
    }

    /** Object to evict from cache.
     * @param obj Object to evict
     */
    public void evict(Object obj) throws DatabaseException{
        getSession().evict(obj);
    }

    /** FindByExample.
     * @param exampleInstance to use
     * @param excludeProperty to use
     * @return List of matching objects
     */
    @SuppressWarnings("unchecked")
    public List<T> findByExample(T exampleInstance, String... excludeProperty) throws DatabaseException{
        Criteria criteria = getSession().createCriteria(getPersistentClass());
        Example example = Example.create(exampleInstance);
        for (String exclude : excludeProperty) {
            example.excludeProperty(exclude);
        }
        criteria.add(example);
        return criteria.list();
    }
}

@Service("crmAuthenticationService")
@Transactional(propagation = Propagation.SUPPORTS, readOnly = true)
public class CrmAuthenticationServiceImpl implements CrmAuthenticationService{

    @Transactional (readOnly = false, propagation = Propagation.REQUIRED)
    public void saveUpdate(CrmAuthenticationVO vo) throws GenericException {
        if (vo.isForUpdate()){
            vo.setUpdatedBy(WebUtils.getLoggedUserId());
            vo.setUpdatedDate(CommonUtils.getCurrentDate());
        }else {
            vo.setAddedBy(WebUtils.getLoggedUserId());
            vo.setAddedDate(CommonUtils.getCurrentDate());
        }
        CrmAuthentication domain = new CrmAuthentication();
        domain.setValueObject(vo.getValueObject());
        DaoManager.getInstance().getCrmAuthenticationDao().update(domain);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:33:31.987

您需要在事务中进行保存、更新和删除调用。

尝试将`@Transactional`注释添加到您的 DAO。Spring 将创建一个事务感知代理来包装你的 DAO。当事务完成时，它将导致 Hibernate 刷新并提交。

# wpf - UI 线程、工作线程以及它们之间的通信

> ID：12220699
> 
> 赞同：-1
> 
> 时间：2012-08-31T18:22:49.303
> 
> 标签：wpf, multithreading, mvvm

我的应用程序使用 UI 线程和另一个线程在后台执行操作，并使用这些操作的结果更新 UI。

这一切都很好。但是，在一项操作中，我需要要求用户输入一些值。顺序：

*   UI线程运行
*   命令-> 启动的第二个线程（我们称之为工作线程）在后台工作
*   工作线程在按顺序执行操作时向 UI 发送状态信息
*   在一个特定操作期间，工作线程被停止
*   发送一条消息，必须显示视图，以便用户选择一个选项
*   UI 线程订阅了这种类型的消息，所以它显示了一个视图
*   用户完成选择，并关闭视图
*   工作线程接收用户选择，并继续执行
*   工作线程完成

开始新主题的代码：

```
Thread thread = new Thread(Convert);
thread.SetApartmentState(ApartmentState.STA); // avoid "The calling thread must be STA" exception
thread.Start(); 
```

将状态信息从工作线程发送到 UI 线程的代码：

```
Application.Current.Dispatcher.BeginInvoke(
    System.Windows.Threading.DispatcherPriority.Normal,
    (Action<OperationStatus>)delegate(OperationStatus operation)
        {
            OperationList.Add(operation);
        }, status); 
```

要求用户确认的代码：

在 MainViewModel 中，工作线程执行期间：

```
// create ViewModel, that will be used as DataContext for dialog view
var vm = new SelectOptionViewModel(OptionList);
// subscribe to Close event, to get user selection
vm.Close += (s, e) =>
{
    _option = vm.SelectedOption;
};

AppMessages.DialogScreen.Send(vm); 
```

在 MainView 中，在工作线程执行期间：

```
AppMessages.DialogScreen.Register(this, vm =>
    {
        SelectOptionView view = new SelectOptionView();
        view.DataContext = vm;
        // view.Owner = this; // raises exeption about cross-threading
        view.WindowStartupLocation = System.Windows.WindowStartupLocation.CenterOwner;
        view.ShowDialog();
    }); 
```

问题是如何将对话框视图设置为在父视图（MainView）中居中显示？无法将 view.Owner 设置为“this”，因为“this”是在 UI 线程上创建的。

我应该在此处更改什么以在我的应用程序中居中对话框视图，同时保留定义的序列顺序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:26:12.097

您是否考虑过使用[后台工作人员](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T06:49:11.703

哪个线程在创建对话框的地方执行注册的 labda？

它必须是 UI 线程。

如果您想在 UI 上下文中执行一些代码并将结果返回到工作线程，您可以使用 SynchronizationContext 和 Task

See the example [here](http://www.albahari.com/threading/part5.aspx#_Task_Schedulers_and_UIs), please.

# c - restrict keyword - optimization and aliasing implications

> ID：12220706
> 
> 赞同：5
> 
> 时间：2012-08-31T18:23:13.690
> 
> 标签：c, compiler-optimization, restrict-qualifier

I came across these two sections in C11 standard referring to the `restrict` qualifier:

**1#**

> 6.7.3-8
> 
> An object that is accessed through a restrict-qualified pointer has a special association with that pointer. This association, defined in 6.7.3.1 below, requires that all accesses to that object use, directly or indirectly, the value of that particular pointer.135) The intended use of the restrict qualifier (like the register storage class) is to promote optimization, *and deleting all instances of the qualifier from all preprocessing translation units composing a conforming program does not change its meaning (i.e., observable behavior)*.

Can you explain me the meaning of the cursive fragment? In my interpretation, since it doesn't change its meaning, it looks like that the using of `restrict` is just pointless...

**2#**

> 6.7.3.1-6
> 
> A translator is free to ignore any or all aliasing implications of uses of restrict.

What might these aliasing implications be? Can you show me some examples?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T20:41:35.943

Restrict is not pointless, it allows the compiler to make optimizations that would not otherwise be allowed if pointer aliasing is a possibility. For example, the following function:

```
int foo(int *a, int *b)
{
    *a = 5;
    *b = 6;
    return (*a + *b);
} 
```

What does this function return? If you said `11`, you're only partly right. It returns `11` unless `a == b`, in which case it returns `12`, or worse, a partially overlaps with b which could be one of several values. To make sure that it behaves correctly, the compiler has to emit code that

```
1) stores 5 to a
2) stores 6 to b
3) loads a into a temporary register
4) adds the temp and 6
5) returns the sum 
```

If you as a programmer know `a == b` is never going to happen, you can tell the compiler that you don't want it to worry about this case using the restrict keyword.

```
int foo(int * restrict a, int * restrict b) 
```

The code that will be generated for this function will be:

```
1) store 5 to a
2) store 6 to b
3) return 11 
```

The compiler was able to do the optimization because you promised it there will be no aliasing issues. And, according to the standard, if the compiler just chose to ignore the restrict keyword, the code it would generate would just be the conforming (unoptimized) code in the first case which would still work the same way for all instances you care about.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-31T18:39:18.850

The cursive statement in the first quote basically said:

*   You may define away the restrict keyword by for example putting a `#define restrict` line into your code without changing any meaning of your c-code. You code may become a bit slower due to missed optimization, but you will in all cases get the same, deterministic results as if you would have used the restrict keyword.

Second paragraph means that the compiler is free to ignore the restrict keyword. Easy as that.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T18:33:14.717

Both paragraphs say that ‛restrict‛ is just a hint for optimizations and that the implementation is free to ignore it.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-31T20:09:07.600

> *and deleting all instances of the qualifier from all preprocessing translation units composing a conforming program does not change its meaning (i.e., observable behavior)*.

It means that in a conforming program, all uses of the `restrict` keyword respect the rules, so that removing it will not change the result of the program.

Specifically, *in a conforming program* no parameters passed as `restrict` pointers will alias other `restrict` pointers. Otherwise, removing the keyword might change the meaning of the program.

# java - 用于 3 层应用的 java SE 或 java EE

> ID：12220708
> 
> 赞同：-2
> 
> 时间：2012-08-31T18:23:28.217
> 
> 标签：java, jakarta-ee, 3-tier

我想为 EHS（电子健康记录）或 EMS（电子病历）建立一个 3 层系统，但由于我没有太多时间 '10 天'，我想采取最简单最快的完整路线，所以平台使用？

*   java SE：我最熟悉它，我确实开发了几个桌面应用程序。“我的最佳选择”
*   java EE：我觉得短时间内很难掌握。“我真的不想走这条路”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:52:38.727

我会尝试像在实际项目中一样回答您，因为我认为您需要答案，让我们忘记时间限制，让我们尝试提供帮助：

首先尝试检查有关层或层的含义

[“层”和“层”有什么区别？](https://stackoverflow.com/questions/120438/whats-the-difference-between-layers-and-tiers)

这些配置在 Java 中可用于组织您的 3 层，我将仅讨论标准生态系统：

*   胖客户端：SWING - EJB - DB
*   富客户端：FX - EJB - DB
*   Web 客户端：JSF - EJB - DB

这些配置中的每一个都将有一个层，但是请注意，要拥有超过 2 层，您需要在中间有一个应用程序服务器来管理业务逻辑。这让你有更少的选择，至少使用一个应用服务器。它们都使用 EJB，它是 Java EE 规范的一部分。

也许您还对认为 Web 编程是您的应用程序中的必需品感到困惑。您必须知道您可以将 Swing 客户端连接到 EJB。这样您就可以在 JSE（我猜是 Swing）中使用您的技能，但使用 Java EE 规范 (EJB) 的一小部分。

还有一个最后的考虑，你可以在每个显示的层中有几个层，例如，你可以在你的 EJB 层中有一个外观层和一个服务层。[您可以在这本很棒的书Real World Java EE Patterns Rethinking Best Practices](http://press.adam-bien.com/real-world-java-ee-patterns-rethinking-best-practices.htm)中检查组织它的逻辑方式：

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T18:55:45.040

由于您有时间限制并且您不了解 Java EE，因此最好继续使用 Java SE。您可以使用 Swing 构建 UI 和 JDBC 以实现数据库连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T18:27:46.550

您必须确定您要构建的应用程序是一个`StandAlone desktop`应用程序，还是一个`Application`可以在`Browser`.

如果您正在为一个 10 到 20 人的小型组织开发它，他们希望在他们的场所内使用它，那么使用 Java SE 就很好，但是如果您希望这个系统可以方便地访问外部世界这将在没有在客户端机器上安装 appln 客户端的问题的情况下工作，然后使用 Java EE

# ios - UIBarButtonItem 在切换方向时重置

> ID：12220714
> 
> 赞同：0
> 
> 时间：2012-08-31T18:23:42.770
> 
> 标签：ios, storyboard, uibarbuttonitem, uiactivityindicatorview

当我从纵向转到横向时，我的 uibarbuttonitem 重置为故事板中的按钮。在情节提要上，我将其设置为刷新按钮，但在代码执行期间，我将其设置为活动指示器。切换方向时如何保留活动指示器？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:34:49.500

仅在代码执行结束时保留一个设置为 TRUE 的标志。在方向更改时检查此标志是否为 TRUE 并相应地设置图像。如需进一步帮助，请参阅[此问题](https://stackoverflow.com/questions/7041261/how-to-display-uiactivityindicatorview-before-rotation-begins)

# linux - 命令以状态 1 退出：寻呼机 -s

> ID：12220715
> 
> 赞同：0
> 
> 时间：2012-08-31T18:23:50.610
> 
> 标签：linux, bash, command-line, pager, manpage

我在 Android 上运行 Ubuntu。一切都很好，现在我遇到了问题，我想我弄坏了一些东西..但我不知道它可能是什么。

`$ man something`当我尝试类似的事情时，`man grep`我得到一个错误

```
man: command exited with status 1: pager -s 
```

并且手册页在第一页之后停止。

我发现`$ less filename`它不再起作用了，它应该只显示第一页，不再可以导航。

`vim`并且`more`工作正常...

欢迎任何想法。

```
# type pager
pager is hashed (/usr/bin/pager) 
```

重新安装没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:36:58.007

尝试删除并重新安装`less`.

```
apt-get remove less
apt-get install less 
```

# javascript - 如何模拟浏览器的时区？

> ID：12220717
> 
> 赞同：14
> 
> 时间：2012-08-31T18:23:50.737
> 
> 标签：javascript, google-chrome, browser, mocking, timezone

我想测试网站中的位置功能，要进行此测试，我需要尝试不同的时区。我使用 javascript 代码获取时区，调用以下函数：

```
var offset = new Date().getTimezoneOffset(); 
```

现在这个函数返回给我 180 因为我在阿根廷，我需要使用不同的时区进行测试。有人知道怎么做吗？非常感谢！！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2015-07-13T09:03:13.560

接受的答案并没有真正模拟该`Date.getTimezoneOffset`方法，而是希望您使用具有相同名称的不同方法。

它不适用于 Date 对象本身，正如 Carl Meyer 指出的那样，它不适用于 MomentJS 之类的库。

一个更好的方法是覆盖原型`getTimezoneOffset`上的方法`Date`，让所有的实例`Date`都有被覆盖的方法。

```
d = new Date(); // Mon Jul 13 2015 10:58:12 GMT+0200 (CEST)
alert(d.getTimezoneOffset()); // -120, My local "real" timezone.

// Save the original method.
var getTimezoneOffset = Date.prototype.getTimezoneOffset;

Date.prototype.getTimezoneOffset = function () {
    return 160;
}
// Now Date objects will have the mocked timezone offset
alert(d.getTimezoneOffset()); // 160, The mocked timezone.

// Now restore the method to its original version
Date.prototype.getTimezoneOffset = getTimezoneOffset;
alert(d.getTimezoneOffset()); // -120 
```

* * *

## 回答 #2

> 赞同：-8
> 
> 时间：2012-08-31T18:26:57.173

你可以为此使用一个函数。

```
function getTimezoneOffset() {
  if (DEBUG) {
    return 600; // for Australian Eastern Standard Time
  }

  return new Date().getTimezoneOffset();
} 
```

之前设置的变量在哪里`DEBUG`确定您是否正在测试。

然后在整个代码中使用该函数，而不是 Date 对象上的方法。

# ruby-on-rails - 我需要在这个测试中创建每个对象吗？

> ID：12220719
> 
> 赞同：0
> 
> 时间：2012-08-31T18:23:59.913
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing, ruby-on-rails-3.2

我的测试如下所示：

```
def setup
    @period_registration= FactoryGirl.create(:period_registration)
  end

 test "should post save_period" do
    sign_in(FactoryGirl.create(:user))
     assert_difference('PeriodRegistration.count') do
      post :save_period, period_registration: FactoryGirl.attributes_for(:period_registration)
    end
    assert_not_nil assigns(:period_registration)

  end 
```

但是当我运行它时，我得到了这个错误：

```
 1) Error:
test_should_post_save_period(PeriodRegistrationsControllerTest):
NoMethodError: undefined method `event' for nil:NilClass 
```

这是我的控制器：

```
 def save_period
    @period_registration = PeriodRegistration.new(params[:registration])
    @period_registration.save
    flash[:success] = "Successfully Registered for Session."
    redirect_to event_url(@period_registration.period.event)
  end 
```

我的工厂是这样的：

```
factory :event do
    name 'First Event'
    street '123 street'
    city 'Chicago'
    state 'Iowa'
    date Date.today
  end

  factory :period do
    name 'First Period'
    description 'This is a description'
    start_time Time.now + 10.days
    end_time Time.now + 10.days + 2.hours
    event
    product
  end

factory :period_registration do
    user
    period
  end 
```

我需要创建一个周期对象和一个事件对象吗？如果有怎么办？我认为这不是问题，因为我相信在各个工厂中通过“周期”、“产品”和“事件”自动创建这些。

关于从这里看哪里的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T01:28:24.287

简短的回答 - 是的，您确实创建了对象。

长答案：

1.  在控制器中：

    ```
    @period_registration.period.event 
    ```

    这行代码违反[了得墨忒耳法则](http://en.wikipedia.org/wiki/Law_of_Demeter)。这不是好的设计。这行代码应如下所示：

    ```
    @period_registration.event 
    ```

    但是您必须在 PeriodRegistration 模型中创建新方法。最简单的方法变体可以是：

    ```
    def event
      period.event
    end 
    ```

2.  在控制器中：您不检查 PeriodRegistration 模型是否已保存。

3.  据我了解，PeriodRegistration 模型有 2 个关联，当您使用 FactoryGirl.attributes_for 时，工厂不会创建关联对象，它只是为您提供 PeriodRegistration 的一组属性。要通过此测试，您应该在调用控制器之前创建这两个对象。此外，最佳实践是 - 测试应该只有一个断言。例如：

    ```
    def setup
      @user = FactoryGirl.create(:user)
      @period = FactoryGirl.create(:period)
    end

    test "should post save_period" do
      sign_in(@user)
      assert_difference('PeriodRegistration.count') do
        post :save_period, period_registration: FactoryGirl.attributes_for(:period_registration, user: @user, period: @period)
      end
    end

    test "should assings @period_registration" do
      sign_in(@user)
      post :save_period, period_registration: FactoryGirl.attributes_for(:period_registration, user: @user, period: @period)
      assert_not_nil assigns(:period_registration)
    end 
    ```

4.  测试控制器时，您可以使用模拟对象而不是真实模型。

# java - glTranslate 和 glRotate 没有按预期工作

> ID：12220721
> 
> 赞同：0
> 
> 时间：2012-08-31T18:24:05.403
> 
> 标签：java, c++, opengl, lwjgl

我正在使用 glRotate 和 glTranslate 函数围绕自身旋转模型。但是，当我运行我的程序时，我的模型围绕它旁边的一个点旋转。这是我的模型定义：

```
private static final float[] mesh = {
    -0.5f, 0.5f,-0f, 
    -0.5f, -0.5f, -0, 
    0.5f, -0.5f, 0f, 
    0.5f, 0.5f, 0f,
    -0.5f, 0.5f,-1f, 
    -0.5f, -0.5f, -1f, 
    0.5f, -0.5f, -1f, 
    0.5f, 0.5f, -1f,

    };
    private static final byte[] indices = {
        0, 2, 1,
        0, 3, 2,

        1,2,6,
        6,5,1,

        4,5,6,
        6,7,4,

        2,3,6,
        6,3,7,

        0,7,3,
        0,4,7,

        0,1,5,
        0,5,4
    }; 
```

这是我旋转模型的功能：

```
glRotatef(rotation.x,1,0,0);
glRotatef(rotation.y,0,1,0);
glRotatef(rotation.z,0,0,1);` 
```

我正在使用 LWJGL，但我可以很好地阅读 C++。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T18:50:18.707

由于您的代码不完整，我不得不猜测一下，但我怀疑您做了以下事情。

您在 z 方向上进行了 0.5 的平移，以使您的对象以原点为中心，然后应用旋转。期望它绕过现在位于对象内的原点。有道理，但不幸的是这不是 OpenGL 的工作方式。

当您平移对象时，整个坐标系都会随之平移。因此，当您围绕原点旋转时，原点仍然是对象旁边的一个点。

您将不得不颠倒顺序。因此，您首先旋转对象，然后平移对象。请注意，当您旋转对象时，坐标系也会随之旋转，因此无论您旋转对象多少，您需要平移的量和方向在 z 方向上仍然是 0.5。

# windows-8 - 检测 Windows 8 设备中的移动或晃动

> ID：12220723
> 
> 赞同：2
> 
> 时间：2012-08-31T18:24:16.417
> 
> 标签：windows-8, windows-store-apps, accelerometer, tablet

在 Windows 8 Metro 中 - 鉴于它旨在用于平板电脑，是否可以检测设备是否被摇晃或移动？

[这篇](http://msdn.microsoft.com/en-us/library/windows/apps/hh700412.aspx)文章似乎没有涵盖设备移动。

如果这是可能的，那么是否有任何可用的在线教程或代码片段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T18:26:50.310

我认为您正在寻找[加速器](http://msdn.microsoft.com/en-us/library/windows/apps/br225687.aspx)。 [例子](http://code.msdn.microsoft.com/windowsapps/Accelerometer-Sensor-Sample-22982671)。

```
using Windows.UI.Core;
using Windows.Devices.Sensors;

namespace AccelerometerCS
{

    partial class BlankPage
    {
        // Sensor and dispatcher variables
        private Accelerometer _accelerometer;

        // This event handler writes the current accelerometer reading to 
        // the three acceleration text blocks on the app's main page.

        private void ReadingChanged(object sender, AccelerometerReadingChangedEventArgs e)
        {
            Dispatcher.InvokeAsync(CoreDispatcherPriority.Normal, (s, a) =>
            {
                AccelerometerReading reading = (a.Context as AccelerometerReadingChangedEventArgs).Reading;
                txtXAxis.Text = String.Format("{0,5:0.00}", reading.AccelerationX);
                txtYAxis.Text = String.Format("{0,5:0.00}", reading.AccelerationY);
                txtZAxis.Text = String.Format("{0,5:0.00}", reading.AccelerationZ);

            }, this, e);
        }

        public BlankPage()
        {
            InitializeComponent();
            _accelerometer = Accelerometer.GetDefault();

            if (_accelerometer != null)
            {
                // Establish the report interval
                uint minReportInterval = _accelerometer.MinimumReportInterval;
                uint reportInterval = minReportInterval > 16 ? minReportInterval : 16;
                _accelerometer.ReportInterval = reportInterval;

                // Assign an event handler for the reading-changed event
                _accelerometer.ReadingChanged += new TypedEventHandler<Accelerometer, AccelerometerReadingChangedEventArgs>(ReadingChanged);
            }

        }
    }
} 
```

# regex - 如何计算 emacs 区域中的非空白字符？

> ID：12220728
> 
> 赞同：3
> 
> 时间：2012-08-31T18:25:13.330
> 
> 标签：regex, emacs, elisp

我有兴趣了解 emacs 选定区域中非空白字符的数量。怎么做？我没有找到任何“内置”功能。我想我需要实现我自己的 elisp 函数。我不知道该怎么做。任何帮助或材料表示赞赏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-31T18:50:28.053

无需编写自己的代码；已经有功能`how-many`可以满足您的需求。选择区域后，只需键入`M-x``how-many``RET`，然后输入`\S-`要匹配的正则表达式。

# javascript - jQuery 鼠标输出调用 CSS3 动画

> ID：12220735
> 
> 赞同：0
> 
> 时间：2012-08-31T18:26:07.320
> 
> 标签：javascript, jquery, css

我目前有一个鼠标悬停事件的 CSS3 动画，见下文：

```
#topo .menu-header ul li:hover a {
    -webkit-animation: menuanimate 0.3s linear 0s both;
    -moz-animation: menuanimate 0.3s linear 0s both;
    -o-animation: menuanimate 0.3s linear 0s both;
    -ms-animation: menuanimate 0.3s linear 0s both;
    animation: menuanimate 0.3s linear 0s both;
}
@-webkit-keyframes menuanimate{
    50% {
        transform: rotateY(90deg);
        -webkit-transform: rotateY(90deg); /* Safari and Chrome */
        -moz-transform: rotateY(90deg); /* Firefox */
        color: #353535; 
        background: url(images/bullets.png) no-repeat;
        background-position: 3px 18px;
    }
    51% {
        transform: rotateY(270deg);
        -webkit-transform: rotateY(270deg); /* Safari and Chrome */
        -moz-transform: rotateY(270deg); /* Firefox */
        color: #fff;
        background: #f15a25;
    }
    100% { 
        color: #fff; background: #f15a25;
        transform: rotateY(360deg);
        -webkit-transform: rotateY(360deg); /* Safari and Chrome */
        -moz-transform: rotateY(360deg); /* Firefox */
    }
} 
```

问题是：当用户将鼠标从按钮上移开时，没有动画。在 CSS 中没有鼠标移出事件，那么，有没有办法像在 jQuery 中那样调用鼠标移出的动画？

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T02:37:32.260

你不能用 jQuery 来调用它，比如：

```
$('element').hover(function(e)
{
     $(this).css({"rollover animation css in here..."});
},function(e)
{
     $(this).css({"rolloff animation css in here..."});
}); 
```

或者甚至只有 2 个类“.over”和“.out”，然后使用 $(this).addClass("over") & 相同的滚降？

# jquery - jQuery计算

> ID：12220739
> 
> 赞同：0
> 
> 时间：2012-08-31T18:26:17.400
> 
> 标签：jquery

```
var res_available= parseInt($("#cur_lumber").val()) + parseInt($("#cur_clay").val()) + parseInt($("#cur_iron").val()) + parseInt($("#cur_crop").val());
var res_reserved= parseInt($("#reserve_lumber").val()) + parseInt($("#reserve_clay").val()) + parseInt($("#reserve_iron").val()) + parseInt($("#reserve_crop").val());
res_availabe= res_available-res_reserved;
alert(res_available); 
```

警报未显示正确答案。在我从中减去 res_reserved 之前，它显示了 res_available 的值。

我无法找到我出错的地方，我错过了错误。请有人帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T18:31:44.047

`res_available`您在代码中拼写错误：

```
res_availabe= res_available-res_reserved; 
```

应该

```
res_available -= res_reserved; 
```

# elasticsearch - 如何通过值数组查询/过滤弹性搜索索引？

> ID：12220741
> 
> 赞同：2
> 
> 时间：2012-08-31T18:26:19.927
> 
> 标签：elasticsearch

我有一个带有数字类别 ID 的弹性搜索索引，如下所示：

```
{
  "id": "50958",
  "name": "product name",
  "description": "product description",
  "upc": "00302590602108",
  "**categories**": [
    "26",
    "39"
  ],
  "price": "15.95"
} 
```

我希望能够传递一个类别 id 的数组（例如，一个包含所有子项的父 id）并只返回与其中一个类别匹配的结果。我一直试图让它与术语查询一起使用，但还没有运气。

另外，作为弹性搜索的新用户，我想知道是否应该为此使用过滤器/构面...

回答！我最终使用了术语查询（而不是术语）。我仍然想知道使用过滤器或构面是否有好处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T16:33:09.480

正如您已经发现的那样，一个 termQuery 可以工作。不过，我建议使用[termFilter](http://www.elasticsearch.org/guide/reference/query-dsl/term-filter.html)，因为过滤器更快，并且可以缓存。

方面不会限制结果，但它们是极好的工具。它们计算特定术语的总结果中的命中，并用于[分面导航。](http://www.elasticsearch.org/guide/reference/api/search/facets/index.html)

# python - 电影时间的 MySQL 数据类型

> ID：12220749
> 
> 赞同：0
> 
> 时间：2012-08-31T18:27:05.903
> 
> 标签：python, mysql

我有 HH:MM:SS 形式的章节时间。我正在从文档中解析它们，并且我将有时间作为“00:12:14”格式的字符串。我将如何将其存储在 mysql 列中，然后以所需的格式检索它以便能够：

*   1）按时间排序；
*   2) 转换为上述格式的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:32:09.250

使用[`TIME`](http://dev.mysql.com/doc/refman/5.0/en/time.html)类型。

它允许“时间值以多种格式表示，例如带引号的字符串或数字，具体取决于值的确切类型和其他因素。” 此外，您可以执行[各种功能](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html)来操纵时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T18:29:36.027

我建议你看一下 MySQL 时间类型。它将允许您根据需要进行排序和格式化。

[http://dev.mysql.com/doc/refman/5.0/en/time.html](http://dev.mysql.com/doc/refman/5.0/en/time.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T18:39:27.043

如果我有这么简单的任务，我会选择一个简单的解决方案：我会选择 python[模块](http://dev.mysql.com/doc/refman/5.0/en/time.html)`datetime.time`（参见：[datetime.time](http://docs.python.org/library/datetime.html#time-objects)）并使用.`strftime`

重新加载它有点痛苦，因为您必须拆分字符串，`:`然后将值传递给`time`构造函数。例子：

```
def load(timestr):
    hours,minutes,seconds = timestr.split(":")
    return datetime.time(hours,minutes,seconds) 
```

希望这可以帮助。

# c# - 在 Windows 8 Metro-App 中打开 extern SQLite-Database？

> ID：12220751
> 
> 赞同：0
> 
> 时间：2012-08-31T18:27:13.570
> 
> 标签：c#, c++, sqlite, windows-8, microsoft-metro

我使用“Sqlite for Windows Runtime”和 sqlite-net（正如[http://timheuer.com/blog/archive/2012/08/07/updated-how-to-using-sqlite-from-windows所述store-apps.aspx](http://timheuer.com/blog/archive/2012/08/07/updated-how-to-using-sqlite-from-windows-store-apps.aspx) ) 来开发 Windows 8 Metro-App，只需 . 如果我想在 Program-Directory 中打开一个数据库是没有问题的：

```
var dbPath = Path.Combine(Windows.Storage.ApplicationData.Current.LocalFolder.Path, "db.sqlite");
using (var db = new SQLite.SQLiteConnection(dbPath)) {
  ...
} 
```

但是当我想使用这样的外部路径时：

```
var dbPath = "C:\\Users\\xxxxxx\\db.sqlite"; 
```

然后出现“无法打开数据库文件”错误。为什么？这里我使用的是 C#，通常我使用 C++，但是对于这个问题，我相信这并不重要；）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T18:35:46.763

您不能选择文件系统上的任意文件。有关详细信息，请参见[此处](http://msdn.microsoft.com/en-us/library/windows/apps/hh967755.aspx)。

默认情况下，您可以访问以下位置：

*   应用安装目录
*   应用程序数据位置
*   用户的下载文件夹

和

> 此外，默认情况下，您的应用可以访问连接设备上的某些文件。如果您的应用程序使用[自动播放设备扩展程序](http://msdn.microsoft.com/en-us/library/windows/apps/hh464906.aspx#autoplay)在用户将设备（如相机或 USB 拇指驱动器）连接到他们的系统时自动启动，则这是一个选项。您的应用可以访问的文件仅限于通过应用清单中的文件类型关联声明指定的特定文件类型。当然，您还可以通过调用文件选择器（使用[FileOpenPicker](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.pickers.fileopenpicker.aspx)和[FolderPicker](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.pickers.folderpicker.aspx)）并让用户选择文件和文件夹供您的应用访问，从而访问可移动设备上的文件和文件夹。在快速入门中了解如何使用文件选择器[：使用文件选择器访问文件。](http://msdn.microsoft.com/en-us/library/windows/apps/hh771180.aspx)

如果您声明了正确的功能，您还可以访问：

*   [文档库](http://msdn.microsoft.com/en-us/library/windows/apps/hh464936.aspx#DocumentsLibrary)
*   [曲库](http://msdn.microsoft.com/en-us/library/windows/apps/hh464936.aspx#MusicLibrary)
*   [图片库](http://msdn.microsoft.com/en-us/library/windows/apps/hh464936.aspx#PicturesLibrary)
*   [视频库](http://msdn.microsoft.com/en-us/library/windows/apps/hh464936.aspx#VideosLibrary)
*   [家庭组图书馆](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.knownfolders.homegroup.aspx)
*   [可拆卸设备](http://msdn.microsoft.com/en-us/library/windows/apps/hh464936.aspx#RemovableDevices)
*   [媒体服务器设备 (DLNA)](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.knownfolders.mediaserverdevices.aspx)
*   通用命名约定 (UNC) 文件夹

> 需要以下功能的组合。家庭和工作网络功能：
> 
> [私有网络客户端服务器](http://msdn.microsoft.com/en-us/library/windows/apps/hh464936.aspx#home_and_work_networks)
> 
> 以及至少一项互联网和公共网络功能：
> 
> [InternetClient InternetClientServer](http://msdn.microsoft.com/en-us/library/windows/apps/hh464936.aspx#internet_and_public_networks)
> 
> 并且，如果适用，域凭据功能：
> 
> [企业认证](http://msdn.microsoft.com/en-us/library/windows/apps/hh464936.aspx#domain_credentials)
> 
> 注意您必须将文件类型关联添加到您的应用清单，以声明您的应用可以在此位置访问的特定文件类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T11:11:57.607

在 Windows Metro 应用程序中...它仅支持应用程序的沙盒属性。

所以你不能使用

```
var dbPath = "C:\\Users\\xxxxxx\\db.sqlite"; 
```

U 只能将数据存储在本地存储或应用程序安装目录中。

请避免使用任何其他路径。不起作用 。

# java - 无法容纳物品

> ID：12220752
> 
> 赞同：0
> 
> 时间：2012-08-31T18:27:26.743
> 
> 标签：java, nullpointerexception

我有这个项目类

```
public class Item {

    private String id; 
    private int count;
    private String  name;

    public int getcount() {
        return this.count; 
    }

    public Item(String name) {
        this.name=name;
        this.id = "";
    }

    public Item(String id, String name) {
        this.name=name;
        this.id=id;
    }

    public Item(int count) {
        this.count=count;
    }

    public String getItemName() {
        return this.name;
    }

    public String getItemId() {
        return this.id;
    }

} 
```

然后我有 ItemSet 类，它将包含项目列表

```
public  class ItemSet  extends ArrayList<Item> {

    private List<Item> hold;

    ItemSet(Item item) {
        this.hold.add(item);
    }

    ItemSet() {
        //throw new UnsupportedOperationException("Not yet implemented");
    }

    public List<Item> getItemSet() {
        return this.hold;
    }
} 
```

我有将包含 ItemSets 列表的事务类：

```
public class Transaction extends ArrayList<ItemSet> {

    // ArrayList<String> l;
    public ItemSet getUniqueItem() {
        ResultSet rs;
        Database d=new Database();
        ItemSet unique=new ItemSet();
        unique.clear();
        String query="Select id,name from item";
        rs=d.sendQuery(query);
        try{  
            while(rs.next()) {
                //System.out.println(rs.getString(1)+"\t"+rs.getString(2));
                Item item=new Item(rs.getString(1),rs.getString(2));
                unique.add(item);        
            } 
        }catch(Exception e){
            System.out.print(e.getMessage());
        }

        for(Item item:unique) {
            // System.out.println(item.getItemId()+": "+item.getItemName());
        }
        return unique;
    }

    public int countItems(ItemSet itemset) {
        ResultSet rs;
        Database d=new Database();
        String query="";
        int count=0;
        for(Item i:itemset) {
            String id=i.getItemId();
            query="SELECT count(*) FROM `item_transaction` where item_id="+i;
            rs=d.sendQuery(query);
            try {
                while(rs.next()) {
                    //System.out.print(rs.getString(1));
                    count=Integer.parseInt(rs.getString(1));
                    System.out.print(count+"\t");
                }
            }catch(Exception e){ }
        }

        return count;
    }

} 
```

这是主要课程

```
public class Ap {

    public static void main(String args[]) {
        Transaction t=new Transaction();
        Transaction Ci=new Transaction();
        Transaction Li=new Transaction();

        ItemSet I=t.getUniqueItem();
        for(Item i:I) {
            System.out.println(i);
            ItemSet itemSet=new ItemSet(i);
            Ci.add(itemSet);
        }

        for(ItemSet itemSet:Ci) {
            int x=t.countItems(itemSet);
            System.out.print(x+"\t");
        }

        /* Iterator iter=Li.iterator();
           while(iter.hasNext()) {
               // System.out.print(iter.next()+"\t");
           }
        */

    }
} 
```

问题是我越来越

```
Exception in thread "main" java.lang.NullPointerException
at ItemSet.<init>(ItemSet.java:25)
at Ap.main(Ap.java:30) 
```

在哪里

`ItemSet.java:25`指`this.hold.add(item);`

和在哪里

`Ap.java:30`指`ItemSet itemSet=new ItemSet(i); // creating new ItemSet`

请帮我找出我的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T18:28:50.840

```
this.hold.add(item); 
```

`hold (List)`默认`null`是因为实例变量。您需要在添加项目之前实例化。您对`null`结果执行的任何操作`NullPointerException`

例子：

```
ItemSet(Item item)
{
   hold = new ArrayList<Item>();
   this.hold.add(item);

} 
```

任何延期的具体理由`ArrayList()?`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T18:29:18.593

尝试这个：

```
private List<Item> hold = new ArrayList<Item>(); 
```

课堂内`ItemList`。

到目前为止你所写的只是一个私有字段定义——你没有实例化`hold`对象（即你没有创建一个列表）所以`hold`是空的，因此是 NPE。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T18:33:52.647

在使用它之前，您还**没有初始化**, `hold List`...

使用下面的代码`ItemSet`来初始化`hold`.

`private List<Item> hold = new ArrayList<Item>();`

# c# - 在自动刷新网页时搜索单词

> ID：12220759
> 
> 赞同：-4
> 
> 时间：2012-08-31T18:28:04.397
> 
> 标签：c#, javascript, asp.net, html

由于要求，我正在尝试编写脚本/代码的解决方案，以帮助我每 15 秒左右自动刷新一次网页。并且还使用循环来连续搜索一个单词（或一串单词）。当它找到单词时，提醒用户该单词已经出现也很有帮助！以某种方式向手机发送短信。

这可以在.NET 中完成吗？

在股票账户中，晚上 9 点到早上 6 点之后，证券交易所的状态将从 CLOSED 更改为 AFTER_HOURS。我正在尝试一种方法来找到相同的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:36:29.903

[一个自动引用](http://en.wikipedia.org/wiki/Meta_refresh)网页的简单代码是在标题上添加一个元标记：

```
<meta http-equiv="refresh" content="60" > 
```

该参数以秒为单位，您还可以添加并且没有缓存以确保将其重新加载为：

```
<head>
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="refresh" content="60" >
</head> 
```

之后，更好的方法是使用 ajax 时间读取数据并显示给用户的 javascript 计时器...

以及[如何在浏览器上播放一些声音](https://stackoverflow.com/a/10648724/159270)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T18:47:30.860

好吧，让我们拆分问题，我将尝试为您提供每个问题的提示：

## 自动刷新

将此添加到该部分： 您的刷新率在`<META HTTP-EQUIV="Refresh" CONTENT="5">`哪里，以*秒*为单位。`CONTENT`

 *## 循环搜索词

您可能对此功能感兴趣：

```
setInterval(yourFunction, delay) 
```

哪里`yourFunction`是搜索字符串的函数，以及`delay`重复该函数的时间（以毫秒为单位）。

## 听起来不错

使用 Jquery，我在[**这里**](http://en.wikicode.org/index.php/Play_sound_when_on_hover_a_text_JQuery)找到了一个可能对您有所帮助的示例，修改以适合您的场景：

HTML：

```
<html>
 <head>
    <script type='text/javascript' src='jquery.js'></script>
    <script type='text/javascript' src='script.js'></script>
 </head>
 <body>
    <div id="sound" class="hover">Hover here</div>
 </body>
</html> 
```

JS：

```
$(function(){
    $('#sound.hover').mouseover(function(){
        $('embed').remove();
        $('body').append('<embed src="sound.wav" autostart="true" hidden="true" loop="false">');     
    }); 
}); 
```

## 发送短信到手机

试试[**这个**](http://www.zeepmobile.com/developers/)。这是使用 winforms 的 ac# 示例。**[此处](http://www.c-sharpcorner.com/UploadFile/scottlysle/TextMsgToCellPhone12112006002339AM/TextMsgToCellPhone.aspx)**使用外部服务的其他选项。*

# jquery - HTML & jQuery - 点击打开 div

> ID：12220764
> 
> 赞同：0
> 
> 时间：2012-08-31T18:28:22.390
> 
> 标签：jquery, html

我试图实现这个 jquery 示例：[http ://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_slide_toggle](http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_slide_toggle)

但它只适用于一个 div。当我点击它们时，如何让它打开其他 div。这就是我所拥有的：

```
<script type="text/javascript"> 
$(document).ready(function(){
$(".flip").click(function(){
$(".panel").slideToggle("slow");
  });
});
</script>
<style type="text/css">
div.panel, p.flip {
margin: 0px;
padding: 5px;
text-align: center;
background: #333;
border: 1px solid #2C2C2C
}
div.panel {
display: none;
}
</style>

    <div id="content">
  <h2>Creating the scenario</h2>
  <p>sample text sample text. <br />
  </p>
  <p class="flip">[+] Code Hint #1</p>
  <div class="panel" style="line-height:1.5px;">
    <p>Some hint related to code segment</p>
  </div>
</div>
<br />
<br />
<div id="content">
  <h2>Adding the hero</h2>
  <p>sample text sample text. <br />
  </p>
  <p class="flip">[+] Code Hint #1</p>
  <div class="panel" style="line-height:1.5px;">
    <p>Some hint related to code segment</p>
  </div>
</div>
<br />
<br />
<div id="content">
  <h2>Moving with keyboard commands</h2>
  <p>sample text sample text. <br />
  </p>
  <p class="flip">[+] Code Hint #1</p>
  <div id="panel1" class="panel" style="line-height:1.5px;">
    <p>Some hint related to code segment</p>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T18:32:16.503

尝试

```
$(".flip").click(function() {
    $(this).next(".panel").slideToggle("slow");
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/59FFs/)**

# javascript - 我的 CSS/Javascript 下拉菜单测试代码有什么问题？

> ID：12220771
> 
> 赞同：-1
> 
> 时间：2012-08-31T18:29:01.180
> 
> 标签：javascript, css, debugging, menu

我正在尝试结合使用 CSS 和 JS 来创建导航菜单。应该发生的是，当鼠标悬停在一个主要主题（菜单级别 0）上时，会出现一个子主题列表，一旦您将鼠标悬停在另一个主题上，它们就会消失。我尝试的方法是让 JS 函数在“无”和“块”之间更改包含子主题列表的元素的“显示”属性。子主题列表位于嵌套在包含主主题的 div 块中的 div 块中。

为了弄清楚发生了什么，我在不同的元素类型周围设置了不同颜色的边框。问题似乎是嵌套的子主题 div 块并不是真正嵌套的，而是呈现在主顶部 div 块下方，如图所示，围绕子主题块的绿色边框在围绕主题块的蓝色边框外部. 我正在使用 Chrome 和 Firefox 进行测试，并且行为是相同的，所以一定有一些我不理解并且做错了的事情。

我看到有很多关于下拉菜单的问题，我很高兴有人指出一种更好的方法来实现我想要的。但我也想了解我在示例中做错了什么，以进一步了解 CSS 和 JS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:15:43.387

这是一个菜单的[小提琴](http://jsfiddle.net/jcurran/5P4Kd/)，子菜单仅使用 css 完成。这并不完全是你想要完成的事情，但它应该让你走上正确的道路。

从这里垂直对齐它们、在页面加载时显示一个 div 或其他任何东西都不是一件容易的事。

我对 css 进行了评论，因此您可以看到基本实现真正需要多少代码。

**编辑** [这是](http://jsfiddle.net/5P4Kd/5/)一个更新的小提琴，我认为它可以满足您的需要。在悬停时打开子菜单时，它会向下滑动内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T00:27:23.287

事实证明，可以**有**一个纯 CSS 的解决方案，它完全符合我的目标，即一个列表，当鼠标悬停在一个条目上时，它会使用一个子列表扩展该条目。我最糟糕的问题是我包含了“位置：绝对；” 在样式中，这会阻止包含元素扩展以容纳新显示的子列表。以下是一个完整的代码示例，已在 Chrome 和 Firefox 中测试并由 validome.org 验证：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<!-- DropDownExpandMenuExample2\TestWEMenus.html - 2012-09-01 -->

<head>
<title>Test of menu styles</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
<meta name="author" content=" Bruce Bon "></meta>
<style type="text/css">

div.navcontainer{
    font:           10pt/14pt 'Lucida Grande', Verdana, Helvetica, sans-serif;
    background:     transparent;
    width:          220px;
    margin-left:    0px;
    /* position:      absolute; top: 210px; left: 660px;*/
    position:       absolute; top: 20px; left: 660px;
    padding-left:   10px;
    padding-bottom: 20px;
    color:          #22657F;
    z-index:        10;        /* make sure in front */
    border-left:    2px solid #BB77FF;
    }

/* main topic styles */
ul#navmaintopiclist {
    margin:     0;
    margin-top: 15px;
    padding:    0;
    }
ul#navmaintopiclist li {
    font-size:        14px;
    padding-top:      5px;
    padding-bottom:   5px;
    font-weight:      bold;
    list-style:       none;
    }
ul#navmaintopiclist li a {
    display:         block;
    text-decoration: none;
    }

/* Add the link and hover effects */
ul#navmaintopiclist li:link    {
    color: #333388; text-decoration:none; }
ul#navmaintopiclist li:visited {
    color: #6633AA; text-decoration:none; }
ul#navmaintopiclist li:hover   {
    color: #5555BB;
    text-decoration: none;
    }

ul#navmaintopiclist li:hover ul {
    display: block;
    }

/* Hide the subtopics, set subtopic size, etc */
ul.subtopiclist {
    display:          none; 
    background-color: #BBFFBB;
    width:            180px;        /* Width to help Opera out */
    position:         relative;
    left:             0px;
    }

ul#navmaintopiclist li ul li {
    background:       transparent;
    list-style-type:  none;
    font-family:      'Lucida Grande', Verdana, Helvetica, sans-serif;
    font-size:        14px;
    letter-spacing:   -1px;
    font-weight:      bold;
    margin-left:      -20px;
    }

</style>

</head>

<body>

<div class="navcontainer">

  <ul id='navmaintopiclist'>

    <li><a href="index.html">Home</a></li>

    <li><a href="index.html">Healthy Mind</a>
      <ul class='subtopiclist'>
        <li>Stress and Anxiety</li>
        <li>Emotional Freedom</li>
        <li>Self-Hypnosiss</li>
      </ul>
    </li>

    <li><a href="index.html">Healthy Body</a>
      <ul class='subtopiclist'>
        <li>SubOne</li>
        <li>SubOne</li>
        <li>SubOne</li>
      </ul>
    </li>

</ul>

</div>

</body>

</html> 
```

# javascript - 在列表中查找离某个县最近的县

> ID：12220777
> 
> 赞同：0
> 
> 时间：2012-08-31T18:29:21.143
> 
> 标签：javascript, jquery, google-maps

我一直在解决一些反向地理编码问题。

在用户搜索位置后，我从地理编码结果中提取县。

```
for (var i = 0; i < results[0].address_components.length; i++) {
    var component = results[0].address_components[i];
    if (component.types[0] == "administrative_area_level_2") {
        var county = component.long_name;            
    }
countySearch(county);
} 
```

接下来，我有一个县的 JSON，我想使用一个称为countySearch 的函数来搜索它。

```
function countySearch(county){  
    $.each(countyJSON, function(i){     
        if(countyJSON[i].county==county)
        {           
            console.log('math at row' + i);
        }
        else if(i==chapters.length-1 && chapters[i].ZIP!=zipCode)
        {
            console.log('no match in JSON');
            findNearestCounty(county);
        }       
    });         
} 
```

如果 JSON 中没有匹配项，那么我想找出下一个最接近的县。我会使用一个名为 findNearestCounty 的函数来执行此操作。关于如何在 JSON 中找到下一个最近的县的任何建议？我想我可以在 JSON 中添加一个 lat/lng 字段并以这种方式进行，但想看看是否有人有更好的主意。

谢谢，

j

# mongodb - 需要说明 mongoDB 如何处理选择查询

> ID：12220785
> 
> 赞同：1
> 
> 时间：2012-08-31T18:30:01.567
> 
> 标签：mongodb, sharding

在分片环境中，我在 mongoS 上运行选择查询没有问题，但我的问题是：

如果有 2 个分片服务器设置并`find`通过应用层运行查询，分片环境的哪个部分负责执行查询？

我无法在任何实例的控制台中看到任何更改，也没有创建新进程。`find`我通过在本地实现的分片设置上执行 3000 个查询来测试这一点。

任何人都可以解释我在哪里理解错了，或者发现语句不会给服务器带来负担。

mongoDB如何处理select或read操作？

我很不理解这一点。提前感谢您的回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:07:54.370

当您通过 shell (mongo) 连接到 mongoD 或 mongoS 服务器时，您将无法查看该服务器上发生的查询。Shell 主要用于执行查询、配置数据库并检查其状态。

`MongoS`只是来自应用程序的查询的路由器。

要查看单个查询，您需要根据您的[配置](http://www.mongodb.org/display/DOCS/File+Based+Configuration)检查位于每台服务器上的日志文件。

默认情况下，只会记录慢查询（低于 100 毫秒）。因此需要启用[Profiler](http://www.mongodb.org/display/DOCS/Database+Profiler#DatabaseProfiler-EnablingProfiling)来记录所有查询。

您可以阅读此[文档](http://docs.mongodb.org/manual/faq/sharding/#how-does-mongodb-distribute-queries-among-shards) [页面](http://docs.mongodb.org/manual/faq/sharding/#how-does-mongodb-distribute-queries-among-shards)以获取有关分片的更多信息。

# c# - 在这些 foreach 循环中，如何从一个列表中删除？

> ID：12220786
> 
> 赞同：1
> 
> 时间：2012-08-31T18:30:02.640
> 
> 标签：c#

假设我有以下代码：

```
List<Category> categories = getCategories();
List<Category> unusedCategories = categories;
    foreach (var category in categories)
        foreach (var imageCategory in image.Categories)
            if (category.CategoryID == imageCategory.CategoryID)
                unusedCategories.Remove(category); 
```

我收到一个错误，即在循环期间修改了一个集合。果然，当我单步调试调试器时，如果使用了 remove(category)，“categories”列表比以前短了一个元素！为什么从“unusedCategories”中删除会影响“categories”？它们应该是两个不同的列表，而不是引用同一事物。.Remove() 函数按值传递，对吗？那么这是怎么发生的呢？

注意：我知道我在上面所做的事情有程序化的替代方案，而且我已经采用了一种。我只是好奇为什么会这样。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T18:31:46.517

> 它们应该是两个不同的列表，而不是引用相同的东西

这不是真的。当您分配`categories`给 时`unusedCategories`，您是*通过引用*分配。

如果你想要一个副本，你需要显式地制作一个列表的副本：

```
List<Category> unusedCategories = new List<Category>(categories); 
```

* * *

对于更有效的替代方案，您可以考虑以下内容：

```
HashSet<int> usedCategoryIds = new HashSet<int>(image.Categories.Select(c => c.CategoryID));

List<Category> categories = getCategories();
List<Cagegory> unusedCategories = categories.Where(c => !usedCategoryIds.Contains(c => c.CategoryID)).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T18:35:27.323

您可以使用 来执行此操作`LINQ`，例如：

```
var removables = from category in categories
                        join imageCategory in image.Categories 
                              on category.CategoryID equals 
                                 imageCategory.CategoryID  select category; 
```

并在删除后

```
 unusedCategories.RemoveAll(removables ); 
```

或者您可以使用`for`循环以避免遇到异常。

或遵循@Reed 描述的路径：通过分离两个集合的引用依赖关系。

# iphone - iPhone App 统计 - 记录随机数

> ID：12220790
> 
> 赞同：1
> 
> 时间：2012-08-31T18:30:10.893
> 
> 标签：iphone, analytics

有什么方法可以从使用我的应用程序的用户那里收集特定信息？

例如，如果我生成了一个介于 0 到 1,000 之间的随机数，我怎样才能找到最常见的生成数？

我会为此使用 Flurry Analytics 吗？如果是这样，也许我不太了解他们的网站界面以及如何记录事件。有人可以帮忙解释一下吗？

编辑：更准确的标题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T18:42:16.420

下面的代码是如何记录（例如）应用程序中生成的随机数的示例。基本上，您向班级发送`logEvent:withParameters:`消息。`FlurryAPI`logEvent 参数是您为事件指定的任意名称，参数是您要跟踪事件的名称/值对的 NSDictionary。然后，您可以在 Flurry 分析报告中查看记录的事件和数据。

```
int rnd = arc4random() % 1000;

// use Flurry Analytics to record random number generated event 
NSDictionary* dictionary = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithInt:rnd], @"RandomNumber", nil];
[FlurryAPI logEvent:@"RandomNumberGenerated" withParameters:dictionary]; 
```

[您可以在他们的入门页面](http://support.flurry.com/index.php?title=Analytics/GettingStarted/Events)中找到有关使用 Flurry Analytics 跟踪事件的更多信息。

# asp.net-mvc-3 - 对调用 WebService 的 MVC 控制器的 AJAX 调用

> ID：12220791
> 
> 赞同：1
> 
> 时间：2012-08-31T18:30:17.180
> 
> 标签：asp.net-mvc-3, web-services, jquery, controller, windows-authentication

我们正在开发一个纯粹使用 Windows 身份验证的内部 MVC3 应用程序。有一个视图对控制器操作执行 AJAX 调用，该操作在调用 Web 服务之前执行一些处理。我们遇到的问题是，如果匿名访问被关闭（如 Windows 身份验证打开），从控制器操作调用服务会导致 401：未经授权的错误。

我们遇到了双跳问题，在服务中调用服务时凭据没有正确地从服务器传递到服务器。我想知道 AJAX 调用是否在某种程度上模仿了相同的行为，并且没有将正确的 Windows 凭据传输到控制器，然后控制器不会将正确的凭据传递给 Web 服务。

我看过一些帖子，展示了如何在 jQuery 调用中传递用户名和密码，但没有提及，这是一种有效的方法，可以带来 Windows 身份验证。

有没有人遇到过类似的问题？我们宁愿不要在 Web 服务上留下匿名访问，因为它是我们希望控制访问的敏感数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:37:55.213

一位同事在周末做了一些研究，并确定这可能与服务器上的 Kerberos 身份验证设置以及 jQuery 调用有关。为了解决这个问题，我们只是将 Web 服务重构为应用程序刚刚引用的库。我们最初将其设为 Web 服务，因为我们认为将来需要从其他应用程序访问这些数据。遇到这个问题，我们很可能会把它做成一个 NuGet 包。

感谢您的评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T18:35:57.797

您是否按照此问题中的描述打开了身份模拟：

[在 asp.net 中身份 impersonate="true" 时如何获取 Windows 用户名？](https://stackoverflow.com/questions/1267071/how-to-get-windows-user-name-when-identity-impersonate-true-in-asp-net)

# c# - 在一组现有坐标之间生成没有重复的随机坐标 C#

> ID：12220794
> 
> 赞同：-2
> 
> 时间：2012-08-31T18:30:34.833
> 
> 标签：c#, random, coordinates

我需要生成一组唯一坐标 (A1, B1) 和 (A2, B2)，它们的值介于 0 和 1 之间。这组唯一坐标不能位于现有坐标集 ([x1], [y1] ) 和 ([x2], [y2]) 由 sql 查询返回。如何使用 C# 编写一个脚本，该脚本生成的坐标是 1) 不在查询返回的值之间且 2) 不等于查询返回的值？

这里的逻辑基本上是用来在一个页面上绘制一组框。我需要绘制具有唯一坐标的新框，但这些新框不能重叠或位于现有框内。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:06:52.880

Assuming the existence of a Random, named randomizer for convenience, you could do...

```
do
{
A1 = randomizer.NextDouble();
B1 = randomizer.NextDouble();
} while(!((A1>=X1&&A1<=X2&&B1>=Y1&&B1<=Y2)||(A1>=X2&&A1<=X1&&B1>=Y2&&B1<=Y1)) //not inside other rectangle

do
{
A2 = randomizer.NextDouble();
B2 = randomizer.NextDouble();
}
while(!((A1==A2&&B1==B2)||  //not equal to other random coordinate
(A2>=X1&&A2<=X2&&B2>=Y1&&B2<=Y2)||
(A2>=X2&&A2<=X1&&B2>=Y2&&B2<=Y1)|| //not inside other rectangle
(A1<=X1&&A2>=X2&&B1<=Y1&&B2>=Y2)||
(A1<=X2&&A2>=X1&&B1<=Y2&&B2>=Y1)||
(A2<=X1&&A1>=X2&&B2<=Y1&&B1>=Y2)||
(A2<=X2&&A1>=X1&&B2<=Y2&&B1>=Y1)||)) //not containing other rectangle 
```

It's a bit(read: very very) cludgy (I'm kinda embarassed about it actually), but it should work, and generate all possible random rectangles... eventually.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T18:43:30.330

这适用于大约 99.99% 左右......

```
 void GenerateTest()
    {
        float x1, y1;
        float x2, y2;
         // fill x1,y1,x2,y2

        var r = new Random();
        Func<float> next = () => (float)r.NextDouble();

        var NotMatchingRect = RectangleF.FromLTRB(x1,y1,x2,y2);
        var Coordinates = Enumerable.Range(0, 1000).Select(i => new PointF(next(), next())).Where(p => !NotMatchingRect.Contains(p)).Distinct().Take(2).ToArray();
        if (Coordinates.Length != 2)
            throw new IndexOutOfRangeException();
    } 
```

# python - 使用 Python CSV DictReader 创建多级嵌套字典

> ID：12220796
> 
> 赞同：3
> 
> 时间：2012-08-31T18:30:53.007
> 
> 标签：python, python-2.7, csv, dictionary

这里的总 Python 菜鸟，可能缺少一些明显的东西。我到处搜索，还没有找到解决方案，所以我想我会寻求帮助。

我正在尝试编写一个函数，该函数将从一个大型 csv 文件构建一个嵌套字典。输入文件格式如下：

```
Product,Price,Cost,Brand,
blue widget,5,4,sony,
red widget,6,5,sony,
green widget,7,5,microsoft,
purple widget,7,6,microsoft, 
```

ETC...

我需要的输出字典如下所示：

```
projects = { `<Brand>`: { `<Product>`: { 'Price': `<Price>`, 'Cost': `<Cost>` },},} 
```

但显然有很多不同的品牌包含不同的产品。在输入文件中，数据按品牌名称的字母顺序排列，但我知道一旦执行 DictReader，它就会变得无序，所以我肯定需要一种更好的方法来处理重复项。所写的 if 语句是多余且不必要的。

这是我到目前为止的非工作，无用的代码：

```
def build_dict(source_file):
  projects = {}
  headers = ['Product', 'Price', 'Cost', 'Brand']
  reader = csv.DictReader(open(source_file), fieldnames = headers, dialect = 'excel')
  current_brand = 'None'
  for row in reader:
    if Brand != current_brand:
      current_brand = Brand
    projects[Brand] = {Product: {'Price': Price, 'Cost': Cost}}
  return projects

source_file = 'merged.csv'
print build_dict(source_file) 
```

我当然已经在文件顶部导入了 csv 模块。

最好的方法是什么？我觉得我偏离了方向，但是关于从 CSV 创建嵌套 dicts 的信息很少，而且那里的示例非常具体，往往不会详细说明解决方案实际有效的原因，所以作为 Python 新手，很难得出结论。

此外，输入的 csv 文件通常没有标题，但为了尝试获得此函数的工作版本，我手动插入了标题行。理想情况下，会有一些代码分配标题。

非常感谢任何帮助/方向/建议，谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T18:46:31.307

```
import csv
from collections import defaultdict

def build_dict(source_file):
    projects = defaultdict(dict)
    headers = ['Product', 'Price', 'Cost', 'Brand']
    with open(source_file, 'rb') as fp:
        reader = csv.DictReader(fp, fieldnames=headers, dialect='excel',
                                skipinitialspace=True)
        for rowdict in reader:
            if None in rowdict:
                del rowdict[None]
            brand = rowdict.pop("Brand")
            product = rowdict.pop("Product")
            projects[brand][product] = rowdict
    return dict(projects)

source_file = 'merged.csv'
print build_dict(source_file) 
```

生产

```
{'microsoft': {'green widget': {'Cost': '5', 'Price': '7'},
               'purple widget': {'Cost': '6', 'Price': '7'}},
 'sony': {'blue widget': {'Cost': '4', 'Price': '5'},
          'red widget': {'Cost': '5', 'Price': '6'}}} 
```

来自您的输入数据（`merged.csv`没有标题，只有数据。）

我在`defaultdict`这里使用了 a ，它就像一个字典，但是当您引用一个不存在的键而不是引发异常时，它只会创建一个默认值，在这种情况下是 a `dict`。然后我出去 - 并删除 -`Brand`和`Product`，并存储剩余部分。

我认为剩下的就是将成本和价格变成数字而不是字符串。

[修改为`DictReader`直接使用而不是`reader`]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-16T04:29:58.820

在这里，我提供另一种方式来满足您的要求（不同于 DSM）首先，这是我的代码：

```
import csv

new_dict={}
with open('merged.csv','rb')as csv_file:
    data=csv.DictReader(csv_file,delimiter=",")
    for row in data:
        dict_brand=new_dict.get(row['Brand'],dict())
        dict_brand[row['Product']]={k:row[k] for k in ('Cost','Price')}
        new_dict[row['Brand']]=dict_brand
print new_dict 
```

简而言之，要解决的要点是弄清楚您的需求中的**键值对是什么。**根据您的要求，它可以称为*3-level-dict*，这里第一级的键是`Brand`int 原始字典的值，所以我从原始 csv 文件中提取它为

```
dict_brand=new_dict.get(row['Brand'],dict()) 
```

这将判断我们的新dict中是否存在`Brand`与原始dict相同的值，如果是，它只是插入，如果不是，它创建，那么可能最复杂的部分是第二级或中间级，这里你设置原始dict的值`Product`作为key的新dict的`Brand`值，并且该值也是以原始dict为值`Product`的第三级dict的key，在这里我将它们提取为：`Price``Cost`

```
dict_brand[row['Product']]={k:row[k] for k in ('Cost','Price')} 
```

最后，我们需要做的只是将创建的“中间字典”设置为我们的新字典的值，该字典`Brand`作为键。最后，输出是

```
{'sony': {'blue widget': {'Price': '5', 'Cost': '4'}, 
'red widget': {'Price': '6', 'Cost': '5'}}, 
'microsoft': {'purple widget': {'Price': '7', 'Cost': '6'}, 
'green widget': {'Price': '7', 'Cost': '5'}}} 
```

就是这样。

# ajaxform - .ajaxForm VS .ajaxForm(.....).submit()

> ID：12220799
> 
> 赞同：1
> 
> 时间：2012-08-31T18:31:06.603
> 
> 标签：ajaxform

我正在尝试调试 .ajaxForm。我安装了 jquery-1.7.1.js 和 jquery-ui-1.8.17.custom.js 库 jquery.form.js。当我使用 .ajaxForm(....).submit() 时，表单被提交，但是当使用 .ajaxForm(.....) WITHOUT submit() 时，表单不会提交。更令人沮丧的是，即使有 .submit()，我也无法在 .ajaxForm(....) 中执行，无论我做什么。看来我不是很明白这一点。我在网上看了一下，ajaxForm 的 API 描述和一个示例非常简单，但是，出了点问题。请帮忙！这是我正在尝试做的事情：

```
 $('#lookUpFrm').ajaxForm(function(result) {                 
                    alert("AJAX:"+result)
                    success: function() {
                        $("#lookUpFrm")[0].reset();                         
                        return false;
                    },
                    error: function (error, status, code){
                        $('#error_dialog').showErrorDialog();                       
                    }

                });//.submit() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:59:32.647

此链接可能会有所帮助：[ajaxForm 问题](https://stackoverflow.com/questions/15601335/trouble-with-ajaxform)

这是我前几天问的一个问题，今天早些时候回答了。我的逻辑有点错误（如您所见），并试图以与您看起来相同的方式使用插件。我发布了我必须做的事情才能让它工作，现在它工作得很好。我希望这有帮助！

# c++ - boost::regex_search 拒绝接受我的论点

> ID：12220800
> 
> 赞同：0
> 
> 时间：2012-08-31T18:31:08.333
> 
> 标签：c++, boost

我在这方面苦苦挣扎，我已经到了没有取得任何进展的地步，是时候寻求帮助了。我对 boost 库的熟悉程度仅略好于肤浅。我正在尝试通过一个相当大的字符串进行逐行扫描。事实上，它是读入 std::string 对象的文件的全部内容（文件不会那么大，它是命令行程序的输出）。

这个程序的输出 pnputil 是重复的。我正在寻找某些模式以找到我想要的“oemNNN.inf”文件。本质上，我的算法是找到第一个“oemNNN.inf”，搜索该文件的识别特征。如果这不是我想要的，请继续下一个。

在代码中，它类似于：

```
std::string filesContents;
std::string::size_type index(filesContents.find_first_of("oem"));
std::string::iterator start(filesContents.begin() + index);
boost::match_results<std::string::const_iterator> matches;
while(!found) {
    if(boost::regex_search(start, filesContents.end(), matches, re))
    {
        // do important stuff with the matches
        found = true; // found is used outside of loop too
        break;
    }

    index = filesContents.find_first_of("oem", index + 1);
    if(std::string::npos == index) break;
    start = filesContents.being() + index;
} 
```

我正在使用1.47（我正在使用的版本）的 boost 库文档中的[这个示例](http://www.boost.org/doc/libs/1_47_0/libs/regex/doc/html/boost_regex/ref/regex_search.html)。有人请向我解释我的用法与此示例有何不同（除了我没有将内容存储到地图等中）。

据我所知，我使用的是与示例相同类型的迭代器。然而，当我编译代码时，微软的编译器告诉我：没有重载函数 boost::regex_search 的实例与参数列表匹配。然而，智能感知用我正在使用的参数显示这个函数，尽管迭代器被命名为 BidiIterator。我不知道这有什么意义，但是举个例子，我假设无论 BidiIterator 是什么，它都需要一个 std::string::iterator 来构造（也许是一个错误的假设，但考虑到例子）。该示例确实显示了第五个参数 match_flags，但该参数默认为值：boost::match_default。因此，它应该是不必要的。然而，只是为了好玩儿，我已经添加了第五个论点，但它仍然没有 不工作。我如何滥用这些论点？特别是在考虑这个例子时。

下面是一个简单的程序，它演示了没有循环算法的问题。

```
#include <iostream>
#include <string>

#include <boost/regex.hpp>

int main() {
std::string haystack("This is a string which contains stuff I want to find");
boost::regex needle("stuff");

boost::match_results<std::string::const_iterator> what;
if(boost::regex_search(haystack.begin(), haystack.end(), what, needle, boost::match_default)) {
    std::cout << "Found some matches" << std::endl;
    std::cout << what[0].first << std::endl;
}

return 0;
} 
```

如果您决定编译，我将针对 1.47 的 boost 库进行编译和链接。我正在使用的项目广泛使用此版本并且更新不是由我决定的。

谢谢你的帮助。这是最令人沮丧的。

安迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:39:48.203

一般来说，迭代器的类型是不同的。

```
std::string haystack("This is a string which contains stuff I want to find"); 
```

从`begin()`和`end()`将返回值`std::string::iterator`。但你的匹配类型是

```
boost::match_results<std::string::const_iterator> what; 
```

`std::string::iterator`并且`std::string::const_iterator`是不同的类型。所以变种很少

1.  将字符串声明为 const（即`const std::string haystack;`）
2.  将迭代器声明为 const_iterators（即`std::string::const_iterator begin = haystack.begin(), end = haystack.end();`）并将它们传递给`regex_search`.
3.  利用`boost::match_results<std::string::iterator> what;`
4.  如果你有 C++11，你可以使用`haystack.cbegin()`和`haystack.cend()`

[工作示例](http://liveworkspace.org/code/ac06ec90704ebfdd789f789d4afda81a)

# windows-phone-7 - 来自 Windows Phone 的 Json POST HTTP

> ID：12220803
> 
> 赞同：0
> 
> 时间：2012-08-31T18:31:36.510
> 
> 标签：windows-phone-7, http, post

我正在尝试从我的 Windows Phone 应用程序中执行一个简单的 POST JSON，但我一直坚持如何去做。你能帮忙吗，如果可能的话，提供示例代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T07:15:34.663

你可以试试这个“ [Windows Phone POST 客户端](http://postclient.codeplex.com/releases/view/66457)”。但我建议你深入了解这个客户端并了解 Windows Phone 中的 POST 操作过程会更好。

# javascript - 将焦点移至页面元素

> ID：12220806
> 
> 赞同：1
> 
> 时间：2012-08-31T18:31:53.807
> 
> 标签：javascript, focus

> **可能重复：**
> [将焦点移至特定字段](https://stackoverflow.com/questions/3374914/move-focus-to-a-particular-field)

这应该是一件容易的事。我正在尝试将焦点 onclick 设置为`<p>`我页面上的一个元素。

我的 javascript 看起来像这样：

```
function loadSubmit() {
    if (document.getElementById('uploaded_file').value == "") {
        this.setFocus("name");
    } else {
        var ProgressImage = document.getElementById('progress_image');
        document.getElementById("progress").style.visibility = "visible";
      //document.getElementById("progress").focus(); ?
        setTimeout(function () {
            ProgressImage.src = ProgressImage.src
        }, 100);
    }
} 
```

我想将页面的焦点转移到“progress_image”关于如何实现这一点的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T19:51:20.150

感谢@rlemon 为我指明了正确的方向。对于那些遇到这篇文章寻求与我相同答案的人；我的解决方案如下。

如果您需要使用 onclick 事件将焦点设置到页面上的元素，您可以通过使用 tabindex 和 ID 定义元素来实现。

例如我有：

```
<div id="whatever">sometext or whatever</div> 
```

我希望通过提交按钮或类似按钮来关注那个 div。我们已经知道这可以通过使用其他海报建议的输入字段来完成：

```
document.getElementById("whatever").focus(); 
```

像这样对您的 div 进行简单的更改：

```
<div id="whatever" tabindex="-1">sometext or whatever</div> 
```

您的 div 将通过您的 onclick 事件进入页面的焦点。现在知道了这一点，只需在页面上放置一个空的 div、锚点或其他任何东西，以达到您想要的结果以设置适当的焦点。

我希望这对其他人有所帮助，并再次感谢其他帮助我解决此问题的海报，包括： [http ://snook.ca/archives/accessibility_and_usability/elements_focusable_with_tabindex/](http://snook.ca/archives/accessibility_and_usability/elements_focusable_with_tabindex/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T18:33:33.423

您可以在此处查看有关该`focus`功能的更多信息：[https ://developer.mozilla.org/en-US/docs/DOM/element.focus](https://developer.mozilla.org/en-US/docs/DOM/element.focus)

```
document.getElementById('fieldId').focus(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T18:33:57.533

```
document.getElementById('progress_image').focus(); 
```

# osx-lion - Xcode (10.7) -- clGetProgramBinaries 结果不可读

> ID：12220809
> 
> 赞同：0
> 
> 时间：2012-08-31T18:31:59.537
> 
> 标签：osx-lion, opencl

我有一个运行良好的 OpenCL 内核，但我想查看中间代码。我使用 getprograminfo 提取二进制文件并将其保存到文本文件中。我已经在 nVidia、AMD、i7 和 Xeon 上试过了。

在所有这些情况下，二进制文件都是不可读的。

我知道在 OS X 上返回的数据块实际上是一个二进制 plist。我找到了使用 plutil 将其转换为 xml 的说明，它们可以工作。

它仍然不可读......虽然我已经在网上看到说明，这是你可以找到 PTX 代码的地方（在我的 AMD 5870 的情况下）。有预期的 clBinaryData 键，但该键下的数据仍然是一大块东西，不是文本形式的可读 IL 指令。

我真的很想检查中间语言，以评估我使用 gpu 的低效率。这在 Xcode 下根本不可能吗？或者，我做错了什么？

感谢您提供任何信息！...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T10:42:14.327

如果您使用以下环境变量集运行程序，您应该会在您的目录中看到 .IL 和 .ISA 文件。

```
$ GPU_DUMP_DEVICE_KERNEL=3 ./my-program 
```

另一种方法是使用[AMD APP Kernel Analyzer](http://developer.amd.com/sdks/AMDAPPSDK/downloads/Pages/default.aspx)（与 AMD APP SDK 一起提供）查看中间文件，即 IL 和 ISA。（我不确定 AMD APP SDK 是否可用于 MAC）。

根据APP SDK文档的另一种选择，将以下内容放入您的主机代码中。

```
putenv("GPU_DUMP_DEVICE_KERNEL=3"); 
```

参考

1.  [AMD OpenCL 编程指南](http://www.ljll.math.upmc.fr/groupes/gpgpu/tutorial/ATI_Stream_SDK_OpenCL_Programming_Guide.pdf)
2.  [AMD Devgurus 论坛](http://devgurus.amd.com/thread/138267)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T21:21:19.147

（将此作为顶级答案，以便我可以进行一些格式化。）

ocluser 的回答非常有帮助，因为它很有启发性并引起了很好的学习，尽管它并没有解决问题。

我已经验证了所描述的环境变量*正在*设置，并且在从 xcode 中运行时可供我的应用程序使用。但是，它没有（在 OSX 下）在 Linux 下具有的非常理想的效果。

但是，我现在知道如何以 8 种不同方式中的 7 种方式设置环境变量。我还设置了“tracer” envars 来告诉我哪些方法在我的应用程序范围内有效。从下面，您可以看到添加参数的“编辑方案”方法都有效，ocluser 建议的“putenv”也是如此。什么没有在那个范围内设置它：~/.MACOS/environment.plist，特定于应用程序的 plist，.profile，并添加一个构建阶段来运行自定义脚本（我在 xcode 中找到了至少一种其他方式来设置一个但忘记了我所说的示踪剂，现在找不到；也许它在另一台机器上....）

GPU_DUMP_DEVICE_KERNEL 为 3

GPU_DUMP_TRK_ENVPLIST 为（空）

GPU_DUMP_TRK_APPPLIST 为（空）

GPU_DUMP_TRK_DOTPROFILE 为（空）

GPU_DUMP_TRK_RUNSCRIPT 为（空）

GPU_DUMP_TRK_SCHARGS 为 1

GPU_DUMP_TRK_PUTENV 为 1

...所以，不，这并不能真正*回答*问题，而是对其进行了一些扩展。对不起，如果形式不佳。谢谢！

没有放弃，如果我找到一个，将提供一个实际的问题解决者。

# javascript - 在Rails中不刷新浏览器AJAX请求看不到效果

> ID：12220816
> 
> 赞同：0
> 
> 时间：2012-08-31T18:32:49.277
> 
> 标签：javascript, html, ruby-on-rails, ruby

我和这个人遇到了[同样的问题](https://stackoverflow.com/questions/10148134/rails-3-2-2-not-executing-rjs)

我和他一样把 rjs 改成 js.erb。而且我们都使用`<%= button_to 'Add to Cart',line_items_path(:product_id => product) ,:remote=>true %>`向控制器发送 AJAX 请求。`format.js`罚款并执行create.js.erb。但是购物车没有添加任何东西。

日志结果：

`Rendered line_items/_line_item.html.erb (4.3ms) Rendered carts/_cart.html.erb (8.0ms) Rendered line_items/create.js.erb (8.8ms)`

那就是我们发送 AJAX 请求的 index.html.erb

```
<% if notice %>
<p id="notice"><%= notice %></p>
<% end %>
<h1>Your Pragmatic Catalog</h1>

<% @products.each do |product| %>
<div class="entry">
<%= link_to image_tag(product.image_url), line_items_path(:product_id => product), html_options = {:method => :post} %>
    <h3><%= product.title %></h3>
    <%=sanitize product.description %>
    <div class="price_line">
      <span class="price"><%= number_to_currency(product.price,:precision=>3) %></span>
      <%= button_to 'Add to Cart',line_items_path(:product_id => product) ,:remote=>true %>
    </div>
  </div>
<% end %> 
```

那就是处理请求的 line_items 控制器函数

```
 # POST /line_items
  # POST /line_items.json
  def create
     # for exercise only
    session[:counter] = nil

    @cart = current_cart
    product = Product.find(params[:product_id])
    @line_item = @cart.add_product(product.id)

    respond_to do |format|
      if @line_item.save
        format.html { redirect_to store_index_path }
        format.js
        format.json { render json: @line_item, status: :created, location: @line_item }
      else
        format.html { render action: "new" }
        format.json { render json: @line_item.errors, status: :unprocessable_entity }
      end
    end

  end 
```

创建.js.erb

```
$('#cart').html("<%= escape_javascript(render(@cart)) %>"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T01:30:20.813

我解决了这个问题。感谢[这篇精彩的文章](http://www.alfajango.com/blog/rails-js-erb-remote-response-not-executing/comment-page-1/#comment-4374)，它告诉我萤火虫能够查看 AJAX 请求的响应来源。JSLint帮助我[检查](http://www.jslint.com)javascript 语法。最后，我要感谢 Firebug，它是一个非常棒的工具。

**问题是如果有任何语法错误，则不会执行 javascript。**

**在我的问题中：**

我应该使用单引号而不是双引号来包装渲染结果。渲染结果带有许多带有“”的 HTML，而将它们包装起来的“”会导致 javascript 中的语法错误。（双引号中的双引号是不允许的）

所以我只是`$('#cart').html("<%= escape_javascript(render(@cart)) %>");`改为 `$('#cart').html('<%= escape_javascript(render(@cart))%>');`

**我希望这个答案能帮助其他同样遭受这个噩梦的员工。如果可能的话，帮助我提高提问率:)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-04T15:17:35.597

让我们使用 j() 辅助方法： $('#cart').html("<%=j render(@cart) %>");

# java - Hibernate org.hibernate.MappingException：无效配置

> ID：12220819
> 
> 赞同：0
> 
> 时间：2012-08-31T18:33:00.770
> 
> 标签：java, hibernate, orm

我开始学习休眠。但是当我尝试使用时，`hibernate.cfg.xml.`我在控制台上看到：

```
Exception in thread "main" org.hibernate.MappingException: invalid configuration
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:2014)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1931)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1910)
    at testHibernate.HibernateStart.main(HibernateStart.java:28)
Caused by: org.xml.sax.SAXParseException; lineNumber: 32; columnNumber: 49; Attribute "class" must be declared for element type "mapping".
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:198)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:134)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:437)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:368)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:325)
    at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.addDTDDefaultAttrsAndValidate(XMLDTDValidator.java:1253)
    at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.handleStartElement(XMLDTDValidator.java:1917)
    at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.emptyElement(XMLDTDValidator.java:763)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:353)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2715)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:607)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:835)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:764)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1210)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:568)
    at org.dom4j.io.SAXReader.read(SAXReader.java:465)
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:2011)
    ... 3 more 
```

并`hibernate.cfg.xml`归档。

```
> <?xml version='1.0' encoding='utf-8'?> <!DOCTYPE
> hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration
> DTD 2.0//EN"
> "http://hibernate.sourceforge.net/hibernate-configuration-2.0.dtd"> 
> 
> <hibernate-configuration
>         xmlns="http://www.hibernate.org/xsd/hibernate-configuration"
>         xsi:schemaLocation="http://www.hibernate.org/xsd/hibernate-configuration
> hibernate-configuration-4.0.xsd"
>         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">   <session-factory>
>     <!-- Database connection settings -->
>     <property name="connection.driver_class">org.apache.derby.jdbc.EmbeddedDriver</property>
>     <property name="connection.url">jdbc:derby:/home/user/DataBase/db;create=true</property>
>     <property name="connection.username"></property>
>     <property name="connection.password"></property>
>     
>     <!-- JDBC connection pool (use the built-in) -->
>     <property name="connection.pool_size">1</property>
> 
>     <!-- SQL dialect -->
>     <property name="dialect">org.hibernate.dialect.DerbyDialect</property>
> 
>     <!-- Enable Hibernate's automatic session context management -->
>     <property name="current_session_context_class">thread</property>
> 
>     <!-- Disable the second-level cache  -->
>     <property name="cache.provider_class">org.hibernate.cache.internal.NoCacheProvider</property>
>     
>     <!-- Echo all executed SQL to stdout -->
>     <property name="show_sql">true</property>
> 
>     <!-- Drop and re-create the database schema on startup -->
>     <property name="hbm2ddl.auto">update</property>
>     <mapping class="testHibernate.UserDetails"/>   </session-factory> </hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:37:20.963

我解决了我的问题，文件应该看起来像：

```
?xml version='1.0' encoding='utf-8'?> 
```

```
<session-factory>

    <!-- Database connection settings -->
    <property name="connection.driver_class">org.apache.derby.jdbc.EmbeddedDriver</property>
     <property name="connection.url">jdbc:derby:/home/user/DataBase/db;create=true</property>
     <property name="connection.username"></property>
      <property name="connection.password"></property>

    <!-- JDBC connection pool (use the built-in) -->
    <property name="connection.pool_size">1</property>

    <!-- SQL dialect -->
    <property name="dialect">org.hibernate.dialect.DerbyDialect</property>

    <!-- Disable the second-level cache  -->
    <property name="cache.provider_class">org.hibernate.cache.internal.NoCacheProvider</property>

    <!-- Echo all executed SQL to stdout -->
    <property name="show_sql">true</property>

    <!-- Drop and re-create the database schema on startup -->
    <property name="hbm2ddl.auto">create</property>

    <mapping class="testHibernate.UserDetails"/>

</session-factory> 
```

# solr - 如何让 solr 返回所有指标的结果？

> ID：12220825
> 
> 赞同：0
> 
> 时间：2012-08-31T18:33:21.820
> 
> 标签：solr, solrj

我开始与 Solr 集成，并且遇到了我认为的问题。我使用 java API 上传了一个简单的电子表格（这是一个尝试：

```
 - Document, id,          value
 - Excel3,   name,        steelers
 - Excel3,   subject,     pirates
 - Excel3,   description, penguins
 - Excel3,   comments,    panthers
 - Excel3,   author,      panthers 
```

)

使用它，我使用第一列作为“文档名称”，第二列作为文档中要索引的字段，第三列作为索引数据。所有这些字段都已存在于 schema.xml 中，但它们的设置方式如下：

```
<field name="id" type="string" indexed="true" stored="true" required="true" />
<field name="name" type="text_general" indexed="true" stored="true"/>
<field name="subject" type="text_general" indexed="true" stored="true"/>
<field name="description" type="text_general" indexed="true" stored="true"/>
<field name="comments" type="text_general" indexed="true" stored="true"/>
<field name="author" type="text_general" indexed="true" stored="true"/> 
```

现在这是我的问题发挥作用的地方。我搜索了钢人队，结果很好，但如果我寻找企鹅或许多其他领域，它不会拉回任何结果。但是，如果我做描述：企鹅，结果会按预期拉回。

谁能帮我理解为什么某些字段需要 : 之前的部分，而其他字段则不需要？

搜索示例：solr/select?indent=on&q=penguins&wt=xml ----不返回任何结果

```
<response>
    <lst name="responseHeader">
        <int name="status">0</int>
        <int name="QTime">0</int>
        <lst name="params">
            <str name="indent">on</str>
            <str name="q">penguins</str>
            <str name="wt">xml</str>
        </lst>
    </lst>
    <result name="response" numFound="0" start="0"/>
</response> 
```

solr/select?indent=on&q=description:penguins&wt=xml

```
<response>
    <lst name="responseHeader">
        <int name="status">0</int>
        <int name="QTime">18</int>
        <lst name="params">
            <str name="indent">on</str>
            <str name="q">description:penguins</str>
            <str name="wt">xml</str>
        </lst>
    </lst>
    <result name="response" numFound="1" start="0">
        <doc>
            <str name="author">panthers</str>
            <str name="comments">panthers</str>
            <str name="description">penguins</str>
            <str name="id">Excel3</str>
            <str name="name">steelers</str>
            <str name="subject">pirates</str>
        </doc>
    </result>
</response> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:52:04.733

默认查询解析器将查询默认字段，可以在*schema.xml*中指定，如下所示：[http ://wiki.apache.org/solr/SchemaXml#The_Default_Search_Field](http://wiki.apache.org/solr/SchemaXml#The_Default_Search_Field)

我认为@Frank Famer 关于使用 DisMax 解析器的评论是这个问题的真正解决方案。也就是说，这是我在实践中看到的两种解决方法：

1.创建一个附加的copyField，它是索引的，而不是存储的，它包含您要搜索的所有字段的值，然后将该字段指定为默认值。*它在您的schema.xml*文件中看起来像这样。

```
<field name="myhugedefaultfield" type="text" indexed="true" stored="false" multiValued="true"/>

<copyField source="name" dest="myhugedefaultfield"/>
<copyField source="subject" dest="myhugedefaultfield"/>
<copyField source="description" dest="myhugedefaultfield"/>

<defaultSearchField>myhugedefaultfield</defaultSearchField> 
```

2.更改用户编辑的语法，将查询**企鹅**变成查询**(name:penguins) OR (subject:penguins) OR (description:penguins)**。

# macos - Mac：加载 Mass Storage Driver Kext 进行测试

> ID：12220828
> 
> 赞同：2
> 
> 时间：2012-08-31T18:33:33.583
> 
> 标签：macos, driver, device-driver, iokit, kernel-extension

我正在为 Mac 编写一个定制的海量存储内核扩展，从`IOSCSIPeripheralDeviceType05`逻辑单元驱动程序子类化。我已经编译了一个 .kext 文件，它通过了`kextutil -n -t ...`，但我无法加载它进行测试。

`IOKitDebug`我在 .plist 中有一个非零字段，`GetDeviceConfiguration`看起来像这样：

```
IOReturn
com_MyCompany_driver_MyDriver::GetDeviceConfiguration( void )
{
    IOLog( "MyDriver overriding GetConfiguration\n" );

    return super::GetDeviceConfiguration();
} 
```

但是，当我将它复制到`/System/Library/Extensions/`并使用它执行时`kextutil /System/Library/Extension/MyDriver.kext`，什么也没有发生，并且`/var/log/system.log`.

如何加载此 .kext 以便能够对其进行调试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T10:09:08.327

首先，不要在开发时将扩展放在 /SLE 中。这是自找麻烦，因为它会导致扩展程序自动加载。这可能会导致系统无法启动。只需复制到，例如`/tmp/`并使用`kextutil`从那里加载它。

其次，放入一些调试输出，`com_MyCompany_driver_MyDriver::init()`因为这是第一个被调用的东西。

第三，您的问题可能是设备匹配。如果在加载您的 kext 时该设备已与现有驱动程序匹配，则不会考虑您的设备。如果您无法热插拔设备并且在加载您的驱动程序之前无法卸载现有驱动程序，您可能需要在 SLE 中安装 kext 以便在启动时加载。如果您仍然遇到匹配问题，请发布您尝试匹配的设备的一些详细信息（ioreg/IORegistryExplorer 输出）和 info.plist 中的匹配字典。

# windows - 在真机虚拟机下运行的windows 7可以使用管理员权限吗

> ID：12220830
> 
> 赞同：0
> 
> 时间：2012-08-31T18:33:41.487
> 
> 标签：windows, vmware

我只是想知道是否有任何方法可以让我在 windows7 的虚拟机中使用本地管理员的权限它自己

例如，我可以安装一个需要管理员凭据的新软件，使用虚拟机中的管理员用户，知道虚拟机与它自己的主机相同，Windows 7

注意，我使用的是 Vmware Workstation 7.x

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:44:51.157

机器是否是虚拟的与您的个人凭据或权限无关。从安全的角度来看，每台“机器”都是不同的，这意味着仅仅因为您是“主机”机器上的管理员，并不意味着您是该主机上运行的任何来宾虚拟机的管理员，即使它们正在运行相同的操作系统。它仍然是授予用于访问每台机器的登录身份的权限问题。

我希望我已经正确理解了你的问题。

# variables - 如何在 Haskell 中分割线？

> ID：12220836
> 
> 赞同：5
> 
> 时间：2012-08-31T18:34:00.443
> 
> 标签：variables, haskell, split, line

我制作了一个程序，它以 1000 位数字作为输入。它是固定的，所以我将此输入放入代码文件本身。我显然会将它存储为整数类型，但我该怎么做呢？

我已经通过在同一行中有 1000 个数字来尝试该程序。我知道这是最糟糕的代码格式！但它有效。

如何为变量分配这个数字，并拆分它的行。我在某处读到了一些关于 eos 的东西？鲁比，什么结束了？

我在想可以在这里使用类似于评论的东西。

帮助将不胜感激。

基本思想是使这项工作：

```
a=3847981438917489137897491412341234
983745893289572395725258923745897232 
```

而不是这样的：

```
a=3847981438917489137897491412341234983745893289572395725258923745897232 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-31T18:46:24.093

Haskell 没有办法将（非`String`）文字拆分为多行。由于`String`s 是一个例外，我们可以通过解析 multiline 来插入其他文字`String`：

```
v = read
    "32456\
    \23857\
    \23545" :: Integer 
```

或者，如果您认为它更漂亮，您可以使用列表语法：

```
v = read . concat $
    ["32456"
    ,"24357"
    ,"23476"
    ] :: Integer 
```

您为此付出的代价是一些工作将在运行时完成（一次），即解析（例如`read`）。

# windows - 在 Windows 服务器上跟踪每个用户打开的文件

> ID：12220838
> 
> 赞同：0
> 
> 时间：2012-08-31T18:34:15.617
> 
> 标签：windows, file, wmi

如何检查/跟踪服务器上每个用户（机器名）打开的文件的特定文件名和位置。因为很多时候，当其他用户无法访问时，用户会打开文件？无论如何使用WMI来跟踪这个。我想使用任何语言以编程方式进行。反正有没有关联`net session`和`net files`命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T23:18:49.887

以下将检查当前系统是否有任何打开的文件并将结果输出到 CSV 文件：

```
wmic /output:"C:\Temp\wmic_CIM_LogicalFile.csv" /namespace:\\root\cimv2 path CIM_LogicalFile where InUseCount>'0' get /all /format:csv 
```

或远程检查打开的文件：

```
wmic /node:<server_ip> /output:"C:\Temp\wmic_CIM_LogicalFile.csv" /namespace:\\root\cimv2 path CIM_LogicalFile where InUseCount>'0' get /all /format:csv

Note: May require '/implevel:impersonate' &/or '/authlevel:pktPrivacy'. 
```

在此处在线参考 CIM_LogicalFile 类：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa387893 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa387893(v=vs.85).aspx)

# wcf - WCF 生成的代理崩溃 Monodroid 和 Monotouch

> ID：12220841
> 
> 赞同：1
> 
> 时间：2012-08-31T18:34:31.067
> 
> 标签：wcf, xamarin.ios, xamarin.android

我已经通过 slsvcutil.exe 为我的 WCF RIA 服务类生成了一个代理客户端，如 Xamarin“Web 服务简介”文档中所述，但是当我尝试调用其中一种异步方法时，我的“完成”事件处理程序永远不会被调用——几分钟后，应用程序只是从 Android 模拟器中终止（它在 Monotouch 中也做同样的事情）。

经过几天的故障排除，我终于找到了崩溃的根源，但不知道如何修复它。我怀疑这是某个地方的 Mono 中的错误，但不知道如何进一步排除故障。

我生成的代理有一个这样定义的类：

```
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Runtime.Serialization", "4.0.0.0")]
[System.Runtime.Serialization.DataContractAttribute(Name = "ChangeSetEntry", Namespace = "DomainServices")]
[System.Runtime.Serialization.KnownTypeAttribute(typeof(SL5Proxy.ChangeSetEntry[]))]
public partial class ChangeSetEntry : object
{
...
} 
```

（上面的代码被大大简化了——大约有十几`KnownTypeAttribute()`行，但我已经确定上面显示的那一行是问题的根源。重要的是要注意该`ChangeSetEntry`对象没有对`ChangeSetEntry[]`数组的任何引用。）

我发现如果我简单地注释掉

```
[System.Runtime.Serialization.KnownTypeAttribute(typeof(SL5Proxy.ChangeSetEntry[]))] 
```

从代理代码行，一切工作 100% 正确，我的异步“完成”处理程序完全按预期调用。我不知道为什么 slsvcutil.exe 会生成有问题的 KnownTypeAttribute() 行，但确实如此。

`ChangeSetEntry`我的猜测是，当类告诉运行时序列化程序是已知类型时，会创建某种无限递归`ChangeSetEntry[]`——运行时尝试解析已知类型，然后返回`ChangeSetEntry`并再次执行所有操作。

所以我很好奇是否有其他人看到过这个问题，这是否是一个已知问题以及是否有解决方法——也许是某种方式来抑制`KnownTypeAttribute()`从 slsvcutil.exe 生成行

# sqlite - 支持 WAL 的 SQLite Manager 的替代品？

> ID：12220844
> 
> 赞同：0
> 
> 时间：2012-08-31T18:34:53.053
> 
> 标签：sqlite

有哪些应用程序客户端可以连接具有预写日志 (WAL) 的 SQLite3 数据库？我今天没有用我的 google foo 找到一个，我有 SQLite Manager Firefox 扩展。再次，我没有找到它说它支持它的地方吗？有人可以指出我正确的方向吗？

如果我在哪里猜，我会说只要客户端可以用wal打开SQLite3文件，客户端就支持wal。然而，这只是我的猜测。

### 编辑 2012 年 8 月 31 日

尽管我不喜欢回答自己的问题：p 所以我把它变成了一个“有什么选择”的问题

是的，有一个连接 SQLite3 数据库的客户端应用程序，它是一个名为 SQLite Manager 的 FireFox 扩展。根据他们的问题跟踪器，他们显然在[2011 年 4 月 24 日（或某个时候）增加了对它的支持。](https://code.google.com/p/sqlite-manager/issues/detail?id=602&can=1&q=WAL)对于那些想知道的人，有答案。我需要这个来工作，在不知不觉中使用了经理，并认为我会花时间做更多的研究。我仍然没有找到任何其他独立于 IDE 的 SQLite db 客户端。

*   [SQLite 管理器 - FireFox 扩展](https://addons.mozilla.org/en-US/firefox/addon/sqlite-manager/)
*   [SQLite 管理器 - 项目页面](https://code.google.com/p/sqlite-manager/)
*   [SQLite 管理器 - 问题 602](https://code.google.com/p/sqlite-manager/issues/detail?id=602&can=1&q=WAL)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T19:23:15.040

如果您有任何带有**单独**的sqlite3.dll 的 SQLite 客户端，您可以轻松地将该文件与支持 WAL 的最新文件交换。

考虑到这一点，您可以在那里找到更多 SQLite 管理器。

# android - 异步任务结束后启动意图

> ID：12220848
> 
> 赞同：1
> 
> 时间：2012-08-31T18:35:27.413
> 
> 标签：android, android-intent, android-asynctask

我为我的 Android 应用创建了一个登录活动。用户输入正确的凭据后，登录活动将切换到主页，但我不知道为什么我的代码不会切换，并且我的 logcat 中没有显示错误。清单也被正确定义。

这是我的登录活动：

```
public class LoginEmployerActivity extends Activity { 
Button btnLoginEmployer; 
Button btnLinkToEmployerRegisterScreen; 
EditText inputEmail; 
EditText inputPassword; 
TextView loginErrorMsg; 
TextView forgotPassword; 

// JSON Response node names 
private static String KEY_SUCCESS = "success"; 
private static String KEY_ERROR = "error"; 
private static String KEY_ERROR_MSG = "error_msg"; 
private static String KEY_UID = "uid"; 
private static String KEY_NAME = "name"; 
private static String KEY_CNAME = "cname"; 
private static String KEY_EMAIL = "email"; 
private static String KEY_CREATED_AT = "created_at"; 
private ProgressDialog pDialog; 

@Override 
public void onCreate(Bundle savedInstanceState) { 
super.onCreate(savedInstanceState); 
setContentView(R.layout.login_employer); 

// Importing all assets like buttons, text fields 
inputEmail = (EditText) findViewById(R.id.loginEmployerEmail); 
inputPassword = (EditText) findViewById(R.id.loginEmployerPassword); 
btnLoginEmployer = (Button) findViewById(R.id.btnLoginEmployer); 
btnLinkToEmployerRegisterScreen = (Button) findViewById(R.id.btnLinkToEmployerRegisterScreen); 
loginErrorMsg = (TextView) findViewById(R.id.login_error); 
forgotPassword = (TextView) findViewById(R.id.link_to_forgetPassword); 

// Login button Click Event 
btnLoginEmployer.setOnClickListener(new View.OnClickListener() { 

    public void onClick(View view) { 
        // Checking for server respond 
            new LoginEmployer().execute(); 
        } 
    } 
}); 

// Link to Register Screen 
btnLinkToEmployerRegisterScreen 
        .setOnClickListener(new View.OnClickListener() { 

            public void onClick(View view) { 
                Intent i = new Intent(getApplicationContext(), 
                        RegisterEmployerActivity.class); 
                startActivity(i); 
                finish(); 
            } 
        }); 

// Link to forgot password link 
forgotPassword.setOnClickListener(new View.OnClickListener() { 
    public void onClick(View view) { 
        // Switching to forgot password screen 
        Intent i = new Intent(getApplicationContext(), 
                ForgotPasswordEmployerActivity.class); 
        startActivity(i); 
    } 
}); 
} 

// Background ASYNC Task to login by making HTTP Request 
class LoginEmployer extends AsyncTask<String, String, String> { 

// Before starting background thread Show Progress Dialog 
@Override 
protected void onPreExecute() { 
    super.onPreExecute(); 
    pDialog = new ProgressDialog(LoginEmployerActivity.this); 
    pDialog.setMessage("Authenticating..."); 
    pDialog.setIndeterminate(false); 
    pDialog.setCancelable(false); 
    pDialog.show(); 
} 

// Checking login in background 
protected String doInBackground(String... params) { 
    runOnUiThread(new Runnable() { 
        public void run() { 

            String email = inputEmail.getText().toString(); 
            String password = inputPassword.getText().toString(); 
            EmployerFunctions employerFunctions = new EmployerFunctions(); 
            JSONObject json = employerFunctions.loginUser(email, 
                    password); 

            // check for login response 
            try { 
                if (json.getString(KEY_SUCCESS) != null) { 
                    loginErrorMsg.setText(""); 
                    String res = json.getString(KEY_SUCCESS); 
                    if (Integer.parseInt(res) == 1) { 
                        // user successfully logged in 
                        // Store user details in SQLite Database 
                        DatabaseHandlerEmployer dbe = new DatabaseHandlerEmployer( 
                                getApplicationContext()); 
                        JSONObject json_user = json 
                                .getJSONObject("user"); 

                        // Clear all previous data in database 
                        employerFunctions 
                                .logoutUser(getApplicationContext()); 
                        dbe.addUser( 
                                json_user.getString(KEY_NAME), 
                                //json_user.getString(KEY_CNAME), 
                                json_user.getString(KEY_EMAIL), 
                                json.getString(KEY_UID), 
                                json_user.getString(KEY_CREATED_AT)); 
                        // Launch Employer homePage Screen 
                        Intent homepage = new Intent( 
                                getApplicationContext(), 
                                HomepageEmployerActivity.class); 

                        // Close all views before launching Employer 
                        // homePage 
                        homepage.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
                        startActivity(homepage); 

                        // Close Login Screen 
                        finish(); 
                    } else { 
                        // Error in login 
                        loginErrorMsg 
                                .setText("Invalid username/password"); 
                    } 
                } 
            } catch (JSONException e) { 
                e.printStackTrace(); 
            } 
        } 
    }); 
    return null; 
} 

// After completing background task Dismiss the progress dialog 
protected void onPostExecute(String file_url) { 
    // dismiss the dialog once done 
    pDialog.dismiss(); 
} 
} 
} 
```

将意图声明移至 onPostExecute 方法后编辑的代码

```
public class LoginEmployerActivity extends Activity {
Button btnLoginEmployer;
Button btnLinkToEmployerRegisterScreen;
EditText inputEmail;
EditText inputPassword;
TextView loginErrorMsg;
TextView forgotPassword;

// JSON Response node names
private static String KEY_SUCCESS = "success";
private static String KEY_ERROR = "error";
private static String KEY_ERROR_MSG = "error_msg";
private static String KEY_UID = "uid";
private static String KEY_NAME = "name";
private static String KEY_CNAME = "cname";
private static String KEY_EMAIL = "email";
private static String KEY_CREATED_AT = "created_at";
private ProgressDialog pDialog;

boolean loginVerify= false;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login_employer);

    // Importing all assets like buttons, text fields
    inputEmail = (EditText) findViewById(R.id.loginEmployerEmail);
    inputPassword = (EditText) findViewById(R.id.loginEmployerPassword);
    btnLoginEmployer = (Button) findViewById(R.id.btnLoginEmployer);
    btnLinkToEmployerRegisterScreen = (Button) findViewById(R.id.btnLinkToEmployerRegisterScreen);
    loginErrorMsg = (TextView) findViewById(R.id.login_error);
    forgotPassword = (TextView) findViewById(R.id.link_to_forgetPassword);

    // Login button Click Event
    btnLoginEmployer.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            // Checking for server respond
                new LoginEmployer().execute();
            }
        }
    });

    // Link to Register Screen
    btnLinkToEmployerRegisterScreen
            .setOnClickListener(new View.OnClickListener() {

                public void onClick(View view) {
                    Intent i = new Intent(getApplicationContext(),
                            RegisterEmployerActivity.class);
                    startActivity(i);
                    finish();
                }
            });

    // Link to forgot password link
    forgotPassword.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            // Switching to forgot password screen
            Intent i = new Intent(getApplicationContext(),
                    ForgotPasswordEmployerActivity.class);
            startActivity(i);
        }
    });
}

// Background ASYNC Task to login by making HTTP Request
class LoginEmployer extends AsyncTask<String, String, String> {

    // Before starting background thread Show Progress Dialog
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(LoginEmployerActivity.this);
        pDialog.setMessage("Authenticating...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    // Checking login in background
    protected String doInBackground(String... params) {
        runOnUiThread(new Runnable() {
            public void run() {

                String email = inputEmail.getText().toString();
                String password = inputPassword.getText().toString();
                EmployerFunctions employerFunctions = new EmployerFunctions();
                JSONObject json = employerFunctions.loginUser(email,
                        password);

                // check for login response
                try {
                    if (json.getString(KEY_SUCCESS) != null) {
                        loginErrorMsg.setText("");
                        String res = json.getString(KEY_SUCCESS);
                        if (Integer.parseInt(res) == 1) {
                            loginVerify = true;
                            // user successfully logged in
                            // Store user details in SQLite Database
                            DatabaseHandlerEmployer dbe = new DatabaseHandlerEmployer(
                                    getApplicationContext());
                            JSONObject json_user = json
                                    .getJSONObject("user");

                            // Clear all previous data in database
                            employerFunctions
                                    .logoutUser(getApplicationContext());
                            dbe.addUser(
                                    json_user.getString(KEY_NAME),
                                    json_user.getString(KEY_CNAME),
                                    json_user.getString(KEY_EMAIL),
                                    json.getString(KEY_UID),
                                    json_user.getString(KEY_CREATED_AT));

                        } else {
                            // Error in login
                            loginErrorMsg
                                    .setText("Invalid username/password");
                        }
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
        });
        return null;
    }

    // After completing background task Dismiss the progress dialog
    protected void onPostExecute(String file_url) {
        // dismiss the dialog once done
        pDialog.dismiss();
        if ( loginVerify == true ) 
        {
        // Launch Employer homePage Screen
        Intent homepage = new Intent(getApplicationContext(),
                HomepageEmployerActivity.class);

        // Close all views before launching Employer
        // homePage
        homepage.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(homepage);

        // Close Login Screen
        finish();
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T18:42:38.143

您正在调用意图在 doInBackgorund() 内启动一个新活动，该活动在非 UI 线程上运行，并且 Activity 需要在 UI 线程上运行。这就是为什么您的登录活动永远不会停止的原因。

将代码放入**onPostExecute()**或**onProgressUpdate()**中的新活动。

这是您可以做的事情。声明一个全局变量`loginVerfied = false;`

当你的 doInBackground 验证用户的真实性时， make `loginVerified = true`，否则 keep it `false`。

然后在里面`onPostExecute()`

```
if(loginVerifed == true)
{
       Intent homepage = new Intent(getApplicationContext(),HomepageEmployerActivity.class                               
       homepage.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
       startActivity(homepage);
       finish();
} 
```

***编辑 ：***

此外，您已经声明`class LoginEmployer extends AsyncTask<String, String, String>`了 ，因此您需要使用它来调用它**`new LoginEmployer.execute("");`**（您缺少双引号并且没有将任何字符串传递给 Task ，因此它与它的参数不匹配）。**AsyncTask 定义中的第一个参数是调用execute()**函数时传递给它的值的数据类型。第二个参数是与后台线程运行期间显示进度相关的数据类型。第三个参数指定结果的返回值。

更多关于 AsyncTask[在这里](http://developer.android.com/reference/android/os/AsyncTask.html)。

所以，这就是你现在需要做的。

像这样声明异步任务。

**`class LoginEmployer extends AsyncTask<String, Void, String>`**并使用**`new LoginEmployer.execute("")`**. 确保**`return null`**从您的**doInBackground() 开始**。

希望这现在可以解决您的问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T18:50:11.000

**向您的 AsyncTask 添加检查器，例如**

```
// Background ASYNC Task to login by making HTTP Request 
class LoginEmployer extends AsyncTask<String, String, String> { 

boolean validUser = false; 
```

**然后，一旦在您的后台任务中验证了用户，请将值设置为 true**

```
 if (Integer.parseInt(res) == 1) { 
      // user successfully logged in 
      // Store user details in SQLite Database 

     validUser = true;  //set valid to true 
```

**现在在 postExecute 检查用户是否有效**

```
protected void onPostExecute(String file_url) { 
    // dismiss the dialog once done 
    pDialog.dismiss(); 
    if ( validUser )
    {
        Intent homepage = new Intent( LoginEmployerActivity.this, 
        HomepageEmployerActivity.class); 

        // Close all views before launching Employer 
        // homePage 
         homepage.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
         startActivity(homepage); 
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T18:41:14.860

我认为您没有在此处添加可以帮助您切换到另一个 Activity 的**代码**`Intent`。

```
protected void onPostExecute(String file_url) { 

    // dismiss the dialog once done             // Intent Code Missing.

    pDialog.dismiss(); 
```

你应该**在 UI 线程中做 UI 工作，在 Non-UI 线程中**做非 UI 工作，这是从 HoneyComb 版本的 android 到来的规则。

您已在 中添加了以下代码`doInBackground()`，应该在`onPostExcute()`

```
Intent homepage = new Intent( getApplicationContext(), HomepageEmployerActivity.class); 
homepage.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
startActivity(homepage); 
```

# android - Nexus S 可以作为 Arduino NFC shield 的标签吗？

> ID：12220849
> 
> 赞同：0
> 
> 时间：2012-08-31T18:35:37.110
> 
> 标签：android, arduino, nfc, nexus-s

我目前正在做我最后一年的项目，我需要让一部 Android 手机 ( [Nexus S](http://en.wikipedia.org/wiki/Nexus_S) ) 与[Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno)通信，这样手机就是一个[NFC](http://en.wikipedia.org/wiki/Near_field_communication)标签。

我发现 NFC 防护罩可能是他们交流的一种方式。但是，在我四处搜索之后，我不知道如何开始编写代码。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:48:13.443

所以简而言之：不，除非你愿意投入几个月的研发，否则你不能这样做。

从技术上讲，Nexus 中的 NFC 芯片能够做到这一点，但公共 Android API 并未公开此功能，启用/实现此功能并非易事。

# python - 如何让 Python 使用 raw_input 值作为定点数？

> ID：12220850
> 
> 赞同：3
> 
> 时间：2012-08-31T18:35:41.833
> 
> 标签：python, python-2.7

我正在制作一个单位转换器只是为了练习。目前，我已经定义了一个函数来确定要进行哪种类型的转换（距离、时间、质量等）。

然后它调用该类型的正确转换器，询问您要转换的内容、要转换的内容以及转换的值是什么。

```
def mass_converter():
    convert_from = raw_input('What unit are you converting from? ')
    convert_to = raw_input('What unit are you converting to? ')
    value = raw_input('How many of those do you have? ')

    if convert_from == "pounds" and convert_to == "kilograms":
        answer = float(value) * 0.453592
        print "That many pounds is %d kilograms." % answer
    elif convert_from == "kilograms" and convert_to == "pounds":
        answer = float(value) * 2.20462
        print "That many kilograms is %d pounds." % answer
    else:
        print "You have not selected a valid unit; please try again."
        mass_converter() 
```

目前，如果我将 10 磅换算成公斤，它会告诉我答案是 4 公斤。它似乎正在砍掉我的小数点。显然 int(value) 会做同样的事情。我可以使用什么来保持用户输入的准确值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T18:37:41.303

这里的问题是您`%d`在字符串格式中使用了格式修饰符，它将您的答案转换为整数。改用`%f`（或什至`%s`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T18:37:58.120

您可以使用 %f 代替 %d。%d 不是将数字格式化为浮点数，而是将其格式化为整数。或者你可以使用

```
 print "That many kilograms is {} pounds.".format(answer) 
```

# android - 给定的 SOAPAction 与操作不匹配

> ID：12220851
> 
> 赞同：8
> 
> 时间：2012-08-31T18:35:43.880
> 
> 标签：android, jax-ws, ksoap2

我是使用 jax-ws 的 Web 服务的新手。我开始根据网络上的某种教程来实现它。此外，我试图通过我的 android 客户端访问该服务，所以我正在调用它。

```
private static final String SOAP_ACTION =  "http://service.my/sayHello";
    androidHttpTransport.call(SOAP_ACTION, envelope); 
```

但是当我尝试打印堆栈跟踪时出现此错误。

```
WARNING: Interceptor for {http://service.my/}HelloServiceImplService#{http://service.my/}sayHello has thrown exception, unwinding now
org.apache.cxf.interceptor.Fault: The given SOAPAction http://service.my/sayHello does not match an operation.
    at org.apache.cxf.binding.soap.interceptor.SoapActionInInterceptor$SoapActionInAttemptTwoInterceptor.handleMessage(SoapActionInInterceptor.java:188)
    at org.apache.cxf.binding.soap.interceptor.SoapActionInInterceptor$SoapActionInAttemptTwoInterceptor.handleMessage(SoapActionInInterceptor.java:162)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
    at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121)
    at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:207)
    at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:209)
    at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:191)
    at org.apache.cxf.transport.servlet.CXFNonSpringServlet.invoke(CXFNonSpringServlet.java:114)
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:185)
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:108)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:164)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

顺便说一下，这是我的 WSDL：

```
<wsdl:definitions xmlns:ns1="http://schemas.xmlsoap.org/soap/http" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://service.my/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" name="HelloServiceImplService" targetNamespace="http://service.my/">
<wsdl:types>
<xs:schema xmlns:tns="http://service.my/" xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="unqualified" targetNamespace="http://service.my/" version="1.0">
<xs:element name="sayHello" type="tns:sayHello"/>
<xs:element name="sayHelloResponse" type="tns:sayHelloResponse"/>
<xs:complexType name="sayHello">
<xs:sequence>
<xs:element minOccurs="0" name="arg0" type="xs:string"/>
</xs:sequence>
</xs:complexType>
<xs:complexType name="sayHelloResponse">
<xs:sequence>
<xs:element minOccurs="0" name="return" type="xs:string"/>
</xs:sequence>
</xs:complexType>
</xs:schema>
</wsdl:types>
<wsdl:message name="sayHelloResponse">
<wsdl:part element="tns:sayHelloResponse" name="parameters"></wsdl:part>
</wsdl:message>
<wsdl:message name="sayHello">
<wsdl:part element="tns:sayHello" name="parameters"></wsdl:part>
</wsdl:message>
<wsdl:portType name="HelloService">
<wsdl:operation name="sayHello">
<wsdl:input message="tns:sayHello" name="sayHello"></wsdl:input>
<wsdl:output message="tns:sayHelloResponse" name="sayHelloResponse"></wsdl:output>
</wsdl:operation>
</wsdl:portType>
<wsdl:binding name="HelloServiceImplServiceSoapBinding" type="tns:HelloService">
<soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
<wsdl:operation name="sayHello">
<soap:operation soapAction="" style="document"/>
<wsdl:input name="sayHello">
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output name="sayHelloResponse">
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
</wsdl:binding>
<wsdl:service name="HelloServiceImplService">
<wsdl:port binding="tns:HelloServiceImplServiceSoapBinding" name="HelloServiceImplPort">
<soap:address location="http://192.168.0.102:8080/TestWS/myService"/>
</wsdl:port>
</wsdl:service>
</wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-11T16:15:34.023

根据您的 WSDL：

```
<soap:operation soapAction="" style="document"/> 
```

SOAPAction 应该是一个空字符串，而不是“http://service.my/sayHello”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T08:58:44.820

你的`SOAP`动作应该是这样的：`{http://service.my/}sayHello`如果你这样指定它：`http://service.my/sayHello` `CXF`不理解这是一个动作，这看起来更像是一个名称空间，而不是一个动作。

改变这个：

```
private static final String SOAP_ACTION =  "http://service.my/sayHello"; 
```

进入这个：

```
private static final String SOAP_ACTION =  "{http://service.my/}sayHello"; 
```

它应该工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T07:33:49.543

在使用 CXF JAX-WS 时，我遇到了类似的问题，例如“给定的 SOAPAction ... 与操作不匹配”。如果您使用 JAX-WS 代理，如下所示

```
JaxWsProxyFactoryBean factory = new JaxWsProxyFactoryBean();
factory.setAddress(endpointAddress);
XXXServicePortType port = factory.create(XXXServicePortType.class);
// (set HTTP header here)
port.someMethod() 
```

它是由 HTTP 标头“SOAPAction”未设置为“”引起的。您可以通过以下代码进行设置：place to (set HTTP header here)

```
org.apache.cxf.endpoint.Client proxy = ClientProxy.getClient(port);
Map<String, List<String>> headers = new HashMap<String, List<String>>();
headers.put("SOAPAction", Arrays.asList(""));
proxy.getRequestContext().put(Message.PROTOCOL_HEADERS, headers); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-24T13:05:40.013

我在使用 System.Net.WebClient 时收到此消息。SoapAction 是在标头中发送的，我在处理之前重用了客户端进行 2 次操作，所以在第二次调用时它发送了 2 次操作... Clear() 在每次调用之前解决了问题。

# java - 如何使JPanel的背景渐变

> ID：12220853
> 
> 赞同：6
> 
> 时间：2012-08-31T18:35:50.030
> 
> 标签：java, swing, jpanel, gradient, paintcomponent

我想知道如何制作另一个 JPanel 中的背景渐变。在互联网上找到了许多文章，但它们都演示了如何覆盖 JPanel 的paintComponent()，而不是如何覆盖其中的 jPanel。
我使用 Netbeans IDE。我创建了一个新的 JPanel 类并且可以覆盖它的paintComponent()。我有另一个 jpanel（拖放到父 JPanel）。我想让它的背景渐变。

这是我为父母尝试的方法。有效。我怎样才能为孩子 jpanel 覆盖这个？

```
public void paintComponent(Graphics g) {
        Graphics2D g2d = (Graphics2D) g;
        Color color1 = getBackground();
        Color color2 = color1.darker();
        int w = getWidth();
        int h = getHeight(); 
        GradientPaint gp = new GradientPaint(
                0, 0, color1,
                0, h, color2);

        g2d.setPaint(gp);
        g2d.fillRect(0, 0, w, h);
        } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-31T20:26:14.230

如果你小心调用`super.paintComponent(g)`，你可以直接将渐变添加到面板中，如下所示。

为了可用性，我会抵制尝试使各个组件透明的诱惑。另请注意，[不透明度](http://java.sun.com/products/jfc/tsc/articles/painting/index.html#props)由外观控制。

![渐变面板](../Images/750d724350b4d420ed644fed4e851505.png)

```
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.GradientPaint;
import java.awt.Graphics;
import java.awt.Graphics2D;
import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;

/**
* @see http://stackoverflow.com/q/12220853/230513
*/
public class GradientPanel extends JPanel {

    private static final int N = 32;

    public GradientPanel() {
        this.setBorder(BorderFactory.createEmptyBorder(N, N, N, N));
        this.add(new JLabel("Test:", JLabel.CENTER));
        this.add(new JTextField("This is a test."));
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;
        Color color1 = getBackground();
        Color color2 = color1.darker();
        int w = getWidth();
        int h = getHeight();
        GradientPaint gp = new GradientPaint(
            0, 0, color1, 0, h, color2);
        g2d.setPaint(gp);
        g2d.fillRect(0, 0, w, h);
    }

    private void display() {
        JFrame f = new JFrame("GradientPanel");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new GradientPanel().display();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-10-27T19:51:03.540

我想这就是你想要做的

```
jPanel1 = new JPanel() {
            @Override
            protected void paintComponent(Graphics g) {
                super.paintComponent(g);
                Graphics2D g2d = (Graphics2D) g;
                g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
                int w = getWidth();
                int h = getHeight();
                Color color1 = new Color(81,80,106);
                Color color2 = new Color(165,164,241);
                GradientPaint gp = new GradientPaint(0, 0, color1, 0, h, color2);
                g2d.setPaint(gp);
                g2d.fillRect(0, 0, w, h);
            }
        }; 
```

# java - 如何从 JSP 中的 URL 中检索 jsessionid？

> ID：12220856
> 
> 赞同：6
> 
> 时间：2012-08-31T18:35:54.520
> 
> 标签：java, jsp, session, sessionid, jsessionid

我知道如何将 jsessionid 传递给 URL。我对 url 进行编码，如下所示：

> mysite.com;jsessionid=0123456789ABCDEF (http)

是否存在使用 Java 从 URL 中检索 jsessionid 的内置方法？[我在javadocs](http://docs.oracle.com/javaee/1.2.1/api/javax/servlet/http/HttpServletRequest.html#isRequestedSessionIdFromURL%28%29) isRequestedSessionIdFromURL中找到了这个方法，但它并不能帮助我实际检索值。我必须建立自己的检索方法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T18:44:41.277

JSP 有一个隐含的`session`对象，类似于`request`对象。它是 的实例`java.servlet.http.HttpSession`，具有方法`getId()`。

所以，你应该可以`session.getId()`在你的 JSP 页面中做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T03:50:08.933

无 Cookie 会话是在 Java 中通过将格式字符串附加`;jsessionid=SESSION_IDENTIFIER`到 URL 末尾来实现的。为此，您的网站发出的所有链接都需要通过 HttpServletRequest.encodeURL() 直接或通过 JSTL 标记等机制传递。即使是单个链接也不这样做可能会导致您的用户永远失去他们的会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-12T10:16:08.480

session.getId() 应该能够为您获取会话 ID。一旦 WLS 识别出会话 ID 未存储在 cookie 或隐藏表单字段中，WLS 将执行 UR1 的实际解析以检索会话 ID。顺序通常是 Cookie - URL - 隐藏表单字段。

# jpa - JPA (EclipseLink) 连接超时

> ID：12220860
> 
> 赞同：1
> 
> 时间：2012-08-31T18:35:59.780
> 
> 标签：jpa, netbeans, glassfish, connection, eclipselink

我将 JPA 2.0 与 EclipseLink、Glassfish 和 NetBeans 一起使用。在长时间不活动后，我遇到了连接超时问题。我一直在努力寻找两种方法：

（1）检查JPA的连接，如果断开则重新建立连接

(2) 尽可能保持 JPA 的连接活跃

但是，我真的找不到解决方案。我能找到的最接近的是这篇文章：[如何修改 Eclipselink JPA 2.0 连接重试行为](https://stackoverflow.com/questions/5289075/how-to-modify-eclipselink-jpa-2-0-connection-retry-behavior)。

如果有办法直接使用 JPA 的连接，那会很好，但它被埋在图书馆里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:27:00.867

您所说的您要查找的内容通常由数据源提供，在这种情况下，它可以在 Glassfish 中进行配置，如下所述： [https ://blogs.oracle.com/JagadishPrasath/entry/connection_validation_in_glassfish_jdbc](https://blogs.oracle.com/JagadishPrasath/entry/connection_validation_in_glassfish_jdbc)

如果您想在没有数据源的情况下执行此操作，例如通过将 URL 传递给提供程序并让它处理连接，它将是 EclipseLink 特定的。EclipseLink 确实具有在尝试重新连接和重试查询时可以配置的选项，例如可以在 DatabaseLogin 或DatabasePlatform 类通过定制器。

# c# - Windows.Navigation.NavigationMode Windows Phone 7

> ID：12220861
> 
> 赞同：2
> 
> 时间：2012-08-31T18:36:00.170
> 
> 标签：c#, visual-studio-2010, windows-phone-7

[我一直在关注http://goo.gl/ct7ui](http://goo.gl/ct7ui)上关于“如何：为 Windows Phone 保留和恢复页面状态”的本教程，其中一行代码是这样的：

```
protected override void OnNavigatedFrom(System.Windows.Navigation.NavigationEventArgs e)
{
    // If this is a back navigation, the page will be discarded, so there
    // is no need to save state.
if (e.NavigationMode != System.Windows.Navigation.NavigationMode.Back)
{
    // Save the ViewModel variable in the page's State dictionary.
    State["ViewModel"] = _viewModel;
}
} 
```

但是，Visual Studio 似乎不喜欢这段代码，给我以下错误：

```
'System.Windows.Navigation.NavigationEventArgs' does not contain a definition for 'NavigationMode' and no extension method 'NavigationMode' accepting a first argument of type 'System.Windows.Navigation.NavigationEventArgs' could be found (are you missing a using directive or an assembly reference?) 
```

关于我在这里搞砸的任何想法。现在考虑 'e' 是 System.Windows.Navigation.NavigationEventArgs 并且 if 语句之后的位显示 System.Windows.Navigation.NavigationMode.Back，我一辈子都不会看到这是如何给出错误的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T20:19:15.563

NavigationMode 是 System.Windows.Navigation 中的枚举。尝试添加

```
using System.Windows.Navigation; 
```

# c# - 使用 C# 连接到本地 SQL Server 数据库

> ID：12220865
> 
> 赞同：14
> 
> 时间：2012-08-31T18:36:23.040
> 
> 标签：c#, sql-server

假设我在 Visual Studio`Database1.mdf`的`App_Data`文件夹中创建了一个名为 SQL Server 的数据库，其中的表名为`Names`.

如何建立连接以使用 C# 读取表值？

到目前为止，我已经尝试过这样的事情：

```
SqlConnection conn = new SqlConnection("Server=localhost;Database=Database1;");

conn.Open();

// create a SqlCommand object for this connection
SqlCommand command = conn.CreateCommand();
command.CommandText = "Select * from Names"; 
```

但我收到一个错误：

> *找不到数据库/连接到数据库时出错*

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-31T18:40:30.410

在`Data Source`（在 Visual Studio 的左侧）中，右键单击数据库，然后`Configure Data Source With Wizard`. 将出现一个新窗口，展开连接字符串，您可以在其中找到连接字符串

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-31T23:08:19.280

如果您使用**SQL 身份验证**，请使用以下命令：

```
using System.Data.SqlClient;

SqlConnection conn = new SqlConnection();
conn.ConnectionString = 
     "Data Source=.\SQLExpress;" + 
     "User Instance=true;" + 
     "User Id=UserName;" + 
     "Password=Secret;" + 
     "AttachDbFilename=|DataDirectory|Database1.mdf;"
conn.Open(); 
```

如果您使用**Windows 身份验证**，请使用以下命令：

```
using System.Data.SqlClient;
SqlConnection conn = new SqlConnection();
conn.ConnectionString = 
     "Data Source=.\SQLExpress;" + 
     "User Instance=true;" + 
     "Integrated Security=true;" + 
     "AttachDbFilename=|DataDirectory|Database1.mdf;"
conn.Open(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-31T18:40:30.300

如果您使用的是 SQL Server express，请更改

```
SqlConnection conn = new SqlConnection("Server=localhost;" 
       + "Database=Database1;"); 
```

到

```
SqlConnection conn = new SqlConnection("Server=localhost\SQLExpress;" 
       + "Database=Database1;"); 
```

可以在[http://www.connectionstrings.com/找到数百个连接字符串](http://www.connectionstrings.com/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-11T18:18:25.250

```
SqlConnection c = new SqlConnection(@"Data Source=localhost; 
                           Initial Catalog=Northwind; Integrated Security=True"); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-31T18:38:53.983

您尝试使用此字符串连接

```
Server=.\SQLExpress;AttachDbFilename=|DataDirectory|Database1.mdf;Database=dbname; Trusted_Connection=Yes; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-31T18:43:17.010

我喜欢使用[此处](http://msdn.microsoft.com/en-us/library/e38h511e%28v=vs.71%29.aspx)概述的便捷过程来使用 .udl 文件构建连接字符串。这允许您从 udl 文件中测试它们，以确保您可以在运行任何代码之前进行连接。

希望有帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-08-25T09:46:26.127

**Visual Studio 2019（可能还有几个以前的版本）。**

*   查看 -> SQL Server 对象资源管理器
*   树的顶部是“SQL Server”
*   在“SQL Server”下，有几个“（localdb）......”
*   展开*(localdb)... -> 数据库* ，直到找到您的数据库。
*   *数据库名称（例如 Database1）* -> 右键单击​​ -> 属性，然后滚动许多属性（例如“ANSI NULL Default”）。找到“连接字符串”属性，将值复制到您的代码中，然后您就可以运行了。

# c# - 自定义 DataGrid 使用复选框列选择要输入表的行

> ID：12220866
> 
> 赞同：0
> 
> 时间：2012-08-31T18:36:24.233
> 
> 标签：c#, silverlight, datagrid, foreach, ria

我使用 ria 和 MVVM 构建了一个 Silverlight 应用程序。我创建了一个承载数据网格的 ChildWindow。此数据网格当前加载我的`<Book>`表。我自定义了数据网格以仅带回书名，并添加了一个复选框列来选择特定的书。仅当用户想要多选书籍时才会弹出。

我的目标是让用户选择他们想要的所有书籍，然后点击保存按钮，将这些书籍名称和 ID 添加到与我的书籍表有关系的另一个表中。book 表保存书籍列表和书籍 ID，第二个表`<JM>`应该保存自己的 ID 和用户选择的所有书籍。这样以后，当用户想要搜索他们的书籍时，他们可以调用书籍或多本书选择，它会返回他们选择的所有书籍。容易的东西。

但是，我目前无法将多本书添加到表中。由于我的选定项目代码，只输入了一本书。

```
JobMarket jm = new JobMarket();
foreach (Book b in dataGrid1.SelectedItems)
{
    dataGrid1.SelectedItems.Add(b);
    jm.BookID = b.BookID;
    jm.Book = b.Book1;
}
_context.JobMarkets.Add(jm);
SubmitOperation s = _context.SubmitChanges();

this.DialogResult = true; 
```

我这样尝试是因为我认为 selectedItems 会返回所有 selectedItems，但它目前只是最后一个选定的项目。由于我的复选框控件嵌套在数据网格中，因此我无法通过代码隐藏访问它。我知道有办法，只是不知道怎么做。我以为 foreach 会遍历并找到选中的框，但事实并非如此。

所以我正在寻找一种方法来解决这个问题并在这个单击事件中执行所有操作。是否有一种简单的方法可以在代码后面使用类似于我自己的代码（我的理解水平）来执行此操作这里也是 xaml 数据网格。

```
<sdk:DataGrid AutoGenerateColumns="False" Height="532" HorizontalAlignment="Left" Name="dataGrid1" VerticalAlignment="Top" >
    <sdk:DataGrid.Columns>
        <sdk:DataGridTemplateColumn Header="Add Book">
            <sdk:DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <CheckBox HorizontalAlignment="Center" VerticalAlignment="Center" x:Name="chkAddBook" IsChecked="{Binding Book1, Mode=TwoWay}" />
                </DataTemplate>
            </sdk:DataGridTemplateColumn.CellTemplate>
        </sdk:DataGridTemplateColumn>
        <sdk:DataGridTemplateColumn Header="Book">
            <sdk:DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Book1}" HorizontalAlignment="Center" VerticalAlignment="Center" Padding="12,3"  />
                </DataTemplate>
            </sdk:DataGridTemplateColumn.CellTemplate>
        </sdk:DataGridTemplateColumn>
    </sdk:DataGrid.Columns>
</sdk:DataGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:35:20.243

如果我对您的理解正确，您希望获得用户检查过的所有书籍。

您可以将 bool 属性 IsChecked 添加到 Book 类，并在 Datagridcheckboxcolumn 中创建两种方式绑定到它。因此，稍后您可以选择已检查的书籍。

如果您不想使用此属性扩展 Book 类，您可以为具有所需属性的书创建一个包装器，创建这些包装器的集合并将其绑定到 DataGrid。

```
<DataGrid ItemsSource="{Binding MyBooksCollection}">
    <DataGrid.Columns>
        <DataGridCheckBoxColumn Binding="{Binding Path=IsChecked, Mode=TwoWay}" />
    </DataGrid.Columns>
</DataGrid> 
```

MyBooks 集合应包含具有 IsChecked 属性的对象。

# ajax - Authorize 属性让 ActionResult 代码执行

> ID：12220873
> 
> 赞同：1
> 
> 时间：2012-08-31T18:37:07.090
> 
> 标签：ajax, asp.net-mvc, authorization, actionresult

我有一个用于 Ajax 请求的自定义属性，以防止发生默认的 FormsAuthentication 工作流（因为它对 Ajax 请求没有意义）。

这是自定义授权属性：

```
public class AjaxAuthorize : AuthorizeAttribute {
    protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext) {
        UrlHelper urlHelper;

        if (filterContext.HttpContext.Request.IsAjaxRequest()) {
            urlHelper = new UrlHelper(filterContext.RequestContext);

            filterContext.HttpContext.Response.StatusCode = 401;
            //Don't let IIS7 be mean.
            filterContext.HttpContext.Response.TrySkipIisCustomErrors = true;
            //Return JSON which tells the client where the login page exists if the user wants to authenticate.
            filterContext.HttpContext.Response.Write(new JavaScriptSerializer().Serialize(
                new {
                    LoginUrl = string.Format("{0}?ReturnURL={1}", FormsAuthentication.LoginUrl, urlHelper.Encode(filterContext.HttpContext.Request.Url.PathAndQuery))
                }
            ));
            filterContext.HttpContext.Response.End();
        } else {
            base.HandleUnauthorizedRequest(filterContext);
        }
    }
} 
```

我的 ActionResult 装饰有自定义授权属性，如下所示：

```
[HttpPut]
[ValidateInput(false)]
[AjaxAuthorize]
public ActionResult Comment(string id, string comment) {
    //stuff happens here.
} 
```

我的操作结果中引发了异常，因为我尝试访问有关用户的信息，该信息仅在您登录时才存在。但是，我不明白为什么甚至要执行此代码，因为我有我的授权属性来保护行动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:45:23.740

我最终返回了一个 HTTP 418（我一直想使用它一段时间），以便表单身份验证模块不会拦截请求。然后在我的脚本中查找该状态代码并将其作为未经授权的请求处理并进行正确的重定向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T18:55:53.227

```
protected virtual void HandleUnauthorizedRequest(AuthorizationContext filterContext) 
{
    // Returns HTTP 401 - see comment in HttpUnauthorizedResult.cs. 
    filterContext.Result = new HttpUnauthorizedResult();
} 
```

这是 HandleUnauthorizedRequest 的默认实现。可能您需要分配包含所需 JSON 和有效状态代码的自定义 ActionResult。我不确定从 HTTP 上下文直接处理请求对象是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T18:54:15.190

尝试`base.HandleUnauthorizedRequest(filterContext);`在 IF 块内调用。或者只是删除 ELSE 块并始终调用`base.HandleUnauthorizedRequest(filterContext);`.

# jpa - 带有嵌入式 Derby 的 Ubuntu 上的 Netbeans 平台应用程序中 JPA 调用 createEntityManager() 的问题

> ID：12220881
> 
> 赞同：0
> 
> 时间：2012-08-31T18:37:48.947
> 
> 标签：jpa, derby, ubuntu-12.04, netbeans-platform, javadb

**更新 2：**在 VMWare 播放器上的 Ubuntu 12.04 虚拟机上对此进行了测试，因此问题可能出在我的 Ubuntu 工作站上。

**更新 1：** 我在 Windows 7 上对此进行了测试，并且安装的版本在那里工作，所以我将此作为错误报告提交给 netbeans。 [http://netbeans.org/bugzilla/show_bug.cgi?id=217699](http://netbeans.org/bugzilla/show_bug.cgi?id=217699)

**原始问题**

我的使用 JPA 和嵌入式 Derby 的[NetBeans 平台应用程序](http://netbeans.org/features/platform/)在我从 NetBeans 7.2 IDE 启动它时可以工作，但是当我为 Ubuntu 12.04 创建 linux 安装程序并安装时，安装的应用程序不会在我的 derby 主目录中创建我的数据库设置为`System.getProperty("user.home")`.

基本上，它在 IDE 中运行良好，但在启动 nb 平台部署版本时，我无法获取实体管理器。我尝试使用默认为 /usr/local/myapp 的 sudo 进行安装，并且还将数据库的权限临时更改为安装目录的 777，但这没有帮助。似乎没有任何日志目录可以查看可能失败的内容。我担心 Netbeans 平台正在吃掉异常或错误消息。

希望 NetBeans 平台或嵌入式 derby 人员可以分享一些解决此问题的建议。

这是我的persistance.xml，它是我的netbeans平台应用程序中的一个包装jar

```
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="VmCfgLibPU" transaction-type="RESOURCE_LOCAL">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <class>mycompany.jpa.Vmcfg</class>
    <properties>
      <property name="javax.persistence.jdbc.url" value="jdbc:derby:myDB;create=true"/>
      <property name="javax.persistence.jdbc.password" value="app"/>
      <property name="javax.persistence.jdbc.driver" value="org.apache.derby.jdbc.EmbeddedDriver"/>
      <property name="javax.persistence.jdbc.user" value="app"/>
      <property name="eclipselink.ddl-generation" value="create-tables"/>
    </properties>
  </persistence-unit>
</persistence> 
```

这是我用来获取实体管理器的 Utils 类。后面的`em = emf.createEntityManager();`行不执行，也不会抛出异常。

```
public class Util {

    static public EntityManager getEm() {
        return getEntityManager();
    }

    static public EntityManager em;

    static public EntityManager getEntityManager() {
        if (em == null || em.isOpen() == false) {
            try {
                File homeDir = new File(System.getProperty("user.home")+"/.simdriver");
                homeDir.mkdirs();
                Msg.info("home dir is: "+homeDir.getAbsolutePath());
                System.setProperty("derby.system.home", homeDir.getAbsolutePath());
                EntityManagerFactory emf 
                      = Persistence.createEntityManagerFactory("VmCfgLibPU");
                Msg.info("Check B2");
                System.out.println("Check B2");

                // .createEntityManager() does not execute when formally installed
                // works when running in IDE
                em = emf.createEntityManager();
                Msg.info("Check C2");
                System.out.println("Check C2");
            } catch (Exception e) {
                Exceptions.printStackTrace(e);
                Msg.err("Error while getting entity manager");
            }
        }
        return em;
    }
} 
```

# ruby - 在 Internet Explorer 上发布期间 Sinatra 会话丢失

> ID：12220882
> 
> 赞同：2
> 
> 时间：2012-08-31T18:37:52.690
> 
> 标签：ruby, internet-explorer, session, sinatra

当我发帖时，其中一个会话变量在 IE 中丢失了。

这个 web 应用程序在 Chrome 和 Firefox 中完美运行。

这是错误：

```
NoMethodError at / 

undefined method `include?' for nil:NilClass
file: welcometo.rb
location: xml_file_to_use 
line: 19 
```

这是错误的方法：

```
def xml_file_to_use
   groups = allowed_groups
   #Which xml file should I write to
   if (session[:location_group].include? allowed_groups[0] ) <----Line 19
    ......
end 
```

这是一个解释和我的代码：

当用户登录时，会设置会话变量：

```
#Check to see if the user is authorized
auth_token = Adauth.authenticate(params[:user], params[:password])
if auth_token 
    session[:user] = params[:user]
    session[:first_name] = auth_token.first_name.tr('/"[]', '') 
    session[:location_group] = (auth_token.groups & allowed_groups)
    redirect '/'
else 
    redirect '/login'
end 
```

接下来我根据这些会话值设置变量：

```
get '/' do
  if session["user"] != nil
     @first_name = session[:first_name]
     @groups = session[:groups]
     @xml_file = xml_file_to_use 
     @location = location
     erb :form
  else 
    redirect '/login'
  end

end 
```

这部分工作得很好。我可以说是因为我在我的视图中使用了@location 变量。

下面是定位方法：

```
#Setup Location Variable
def location
  if (session[:location_group].include? allowed_groups[0] ) <-- This same code errors during a post in IE
     return 'Eagan'
   else
     return 'Chicago'
   end  
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:30:37.000

Konstantin Haase 是正确的，这一定是一个错误。

从他发布的链接中，我发现将其放在 welcome.rb 文件的顶部可以解决问题：

```
set :protection, except: :session_hijacking 
```

# operating-system - 计算机如何防止程序相互干扰？

> ID：12220885
> 
> 赞同：5
> 
> 时间：2012-08-31T18:38:15.807
> 
> 标签：operating-system

例如，我在课堂上听说全局变量只是放在内存中的特定位置。什么是防止两个程序意外地为不同的变量使用相同的内存位置？

另外，两个程序是否使用相同的堆栈作为参数和局部变量？如果是这样，如何防止变量相互交错并弄乱索引？

只是好奇。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T18:44:16.297

大多数现代处理器都有一个内存管理单元 (MMU)，它使操作系统能够为每个进程创建受保护的单独内存部分，包括为每个进程创建一个单独的堆栈。在 MMU 的帮助下，处理器可以限制每个进程只修改/访问已分配给它的内存。这可以防止一个进程写入另一个进程的内存空间。

大多数现代操作系统将使用 MMU 的功能为每个进程提供保护。

以下是一些有用的链接：
[内存管理单元](http://en.wikipedia.org/wiki/Memory_management_unit)
[虚拟内存](http://en.wikipedia.org/wiki/Virtual_memory)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T18:43:25.530

这是现代操作系统通过将每个进程加载到单独的虚拟地址空间中来完成的。多个进程可能会引用同一个[*虚拟地址*](http://en.wikipedia.org/wiki/Virtual_memory)，但在现代硬件的帮助下，操作系统会将每个进程映射到一个单独的物理地址，并确保一个进程无法访问分配给另一个进程的物理内存¹。

* * *

¹调试器是一个明显的例外：操作系统通常为调试器提供特殊机制，以连接到其他进程并检查它们的内存空间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T18:48:00.283

您的问题的简短回答是操作系统处理这些问题。它们是非常严重的问题，操作系统工作的很大一部分是将所有内容保存在单独的空间中。操作系统运行的程序跟踪所有其他程序并确保它们每个都使用一个空间。这也使堆栈保持分离。每个程序都在运行由操作系统分配的自己的堆栈。操作系统如何进行这种分配实际上是一项复杂的任务。

# enterprise-web-library - 如何启动 EWL 项目？

> ID：12220890
> 
> 赞同：1
> 
> 时间：2012-08-31T18:38:35.763
> 
> 标签：enterprise-web-library

是否有创建全新 EWL 项目的流程或解决方案模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:17:46.640

以下是官方流程： [https ://enduracode.fogbugz.com/default.asp?W23](https://enduracode.fogbugz.com/default.asp?W23)

# css - 如果我删除 css 文件，jQuery Mobile 将停止工作

> ID：12220891
> 
> 赞同：-2
> 
> 时间：2012-08-31T18:38:36.480
> 
> 标签：css, jquery-mobile

我正在使用 jQuery mobile 创建一个列表菜单。

我使用“幻灯片”效果，当您单击

*   元素来显示下一页。

    我使用的 CSS 样式表有太多的设计元素。所以我继续删除了样式表，而是在 html 文档中添加了所需的样式。

    但是现在如果我单击幻灯片效果将不起作用

    *   元素。

    如果我包含 css 样式表，那么它会再次开始工作。

    这是[http://jsfiddle.net/r24XY/](http://jsfiddle.net/r24XY/)代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:46:05.253

你看到那些看起来很酷的动画的全部原因是因为那个 CSS 文件。您必须同时拥有 JQuery Mobile .js 和 .css 库文件才能移动。

从库 CSS 文件中提取某些元素只是为了构建自己的元素是一个坏主意，非常糟糕的主意。如果你错过了什么？即使你不..如果他们明天发布更新怎么办？您将不得不维护大量代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T18:49:32.647

CSS 动画（或过渡/变换）用于 jQuery Mobile 和其他移动 Web 框架，因为它们在某些设备（即 iOS）上是硬件加速的。因此，删除 CSS 文件当然会删除动画。

# css - CSS 选择器。我一定没有正确理解这一点

> ID：12220892
> 
> 赞同：0
> 
> 时间：2012-08-31T18:38:40.587
> 
> 标签：css, css-selectors

我无法定位这第五个锚标记。我只是想在视觉上将最终锚与列表的其余部分分开，但我仍然希望它分组（显然是由 ul）

任何帮助表示赞赏！

```
ul>
    <li>PORTFOLIO:</li>
    <li><a href="index.html">layout</a></li>
    <li><a href="logo.html">logo design</a></li>
    <li><a href="print.html">print design</a></li>
    <li><a href="mailto:blahblahblah&#64;yahoo.com">Contact Me</a></li>
</ul>

#mainNav a {
    color:#428896;
    text-decoration: underline;
}

#mainNav ul>:first-child {
    letter-spacing: 2px;
    text-decoration: none;
}

#mainNav ul li:nth-child(5) {  
  padding-left: 50px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:42:05.480

如果你想要最后一个锚，为什么不使用：

```
ul li:last-child a{
    letter-spacing: 2px;
    text-decoration: none;
    color:red;
}​ 
```

[http://jsfiddle.net/4fs2s/](http://jsfiddle.net/4fs2s/)

在你的例子中 ul 没有#mainNav id

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T18:43:58.293

你的选择器很好。左侧填充的属性是`padding-left`, not `padding:left`。

看到这个小提琴> [http://jsfiddle.net/QL7ds/](http://jsfiddle.net/QL7ds/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T18:40:35.547

`li`你的最后一个没有关闭是一个错字吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T18:42:49.550

你的 CSS 是错误的。`padding:left: 50px;`应该`padding-left: 50px;`

```
ul li:nth-child(5) {  
  padding-left: 50px;
}​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/jHv7L/)**

# flash - 如何在 ActionScript 中创建变量变量

> ID：12220895
> 
> 赞同：1
> 
> 时间：2012-08-31T18:38:57.610
> 
> 标签：flash, actionscript, actionscript-2

我正在做这个

```
mcomp7d101.onRelease = function() {
    getURL("javascript:Compartir("+id7d101+");");
}

mcomp7d102.onRelease = function() {
    getURL("javascript:Compartir("+id7d101+");");
}

mcomp7d103.onRelease = function() {
    getURL("javascript:Compartir("+id7d101+");");
}

mcomp7d150.onRelease = function() {
    getURL("javascript:Compartir("+id7d101+");");
} 
```

你明白了:)

如何使用 for 循环执行以下操作：

```
for(ii = 101; ii < 150; ii++)
{
    mcomp7d+ii.onRelease = function() {
    getURL("javascript:Compartir("+id7d+ii);");
    }
} 
```

我收到语法错误。看来我无法在编译语言中创建变量变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T21:11:31.167

您可以使用以下语法：

```
for(ii = 101; ii < 150; ii++) 
{ 
    this["mcomp7d" + ii].onRelease = function() 
    { 
        getURL("javascript:Compartir(" + this['id7d' + ii] + ");"); 
    } 
} 
```

# ios - ios sharekit 2.0 共享图像时不显示图像预览

> ID：12220896
> 
> 赞同：0
> 
> 时间：2012-08-31T18:39:06.480
> 
> 标签：ios, facebook, image, preview, sharekit

我正在使用 Sharekit2.0 将图像分享到 facebook 和 twitter。

这是用于在 facebook 中共享图像的代码。

SHKItem *sharerItem = [SHKItem 图片：图片标题：@""];

```
SHKTwitter *sharer = [[SHKTwitter alloc] init];
[sharer setItem:sharerItem];
[sharer share]; 
```

但这在共享时没有显示任何图像预览（如 twitter 显示）。只是一个文本视图来输入图像的标题。

我的问题是：分享到 facebook 时是否可以显示图像预览？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T15:42:39.963

尝试：

```
SHKItem * sharerItem = [SHKItem image:image title:@"P"];
[SHKTwitter shareItem:sharerItem]; 
```

# ruby-on-rails - 使用带有 Rails / Spork / RSpec 的 database_cleaner 时出现 SQLite3::SQLException

> ID：12220901
> 
> 赞同：7
> 
> 时间：2012-08-31T18:39:40.243
> 
> 标签：ruby-on-rails, sqlite, rspec, spork

尝试在 database_cleaner 的[GitHub 页面](https://github.com/bmabey/database_cleaner#rspec-example)上执行示例时，我遇到了来自 RSpec 的以下错误：

```
 ActiveRecord::StatementInvalid:
   SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction 
```

spec_helper.rb 中使用的配置是：

```
require 'spork'
require 'database_cleaner'

Spork.prefork do
 # .. snip
  RSpec.configure do |config|
   # .. snip
    config.before(:suite) do
      DatabaseCleaner.strategy = :transaction
      DatabaseCleaner.clean_with(:truncation)
    end

    config.before(:each) do
      DatabaseCleaner.start
    end

    config.after(:each) do
      DatabaseCleaner.clean
    end
  end
end

Spork.each_run do

end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-03T20:44:15.250

接受的答案通过在每个测试之后截断，使所有测试变慢（当不需要时）。

只需添加

```
config.use_transactional_fixtures = false 
```

使用 database_cleaner 时。

如果您同时拥有两者`config.use_transactional_fixtures = true`，并且`DatabaseCleaner.strategy = :transaction`您将在另一个事务中启动事务，那么这是不允许的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-31T18:39:40.243

我发现解决方案是将整个策略更改为`:truncation`. 更新了 spec_helper：

```
require 'spork'
require 'database_cleaner'

Spork.prefork do

  RSpec.configure do |config|
    config.use_transactional_fixtures = false

    config.before(:suite) do
      DatabaseCleaner.strategy = :truncation
    end

    config.before(:each) do
      DatabaseCleaner.start
    end

    config.after(:each) do
      DatabaseCleaner.clean
    end

  end
end

Spork.each_run do

end 
```

# iphone - NSJSON 循环组

> ID：12220905
> 
> 赞同：0
> 
> 时间：2012-08-31T18:40:20.477
> 
> 标签：iphone, xcode, ios5, nslog, nsjsonserialization

我正在获取我的数据，但似乎每次发现我的“可保留”=1 时，数据都会在 NSLog 中发布；我认为这应该只发布一次，当我在表格视图单元格中显示它时，它会发布多次吗？这是我的 NSLog：

```
2012-08-31 11:35:39.682 GBSB[2168:15b03] These are the times avail: (
)
2012-08-31 11:35:39.683 GBSB[2168:15b03] These are the times avail: (
    "2012-08-31 08:00:00 America/Los_Angeles"
)
2012-08-31 11:35:39.683 GBSB[2168:15b03] These are the times avail: (
    "2012-08-31 08:00:00 America/Los_Angeles",
    "2012-08-31 08:15:00 America/Los_Angeles"
)
2012-08-31 11:35:39.683 GBSB[2168:15b03] These are the times avail: (
    "2012-08-31 08:00:00 America/Los_Angeles",
    "2012-08-31 08:15:00 America/Los_Angeles",
    "2012-08-31 08:30:00 America/Los_Angeles"
)
2012-08-31 11:35:39.684 GBSB[2168:15b03] These are the times avail: (
    "2012-08-31 08:00:00 America/Los_Angeles",
    "2012-08-31 08:15:00 America/Los_Angeles",
    "2012-08-31 08:30:00 America/Los_Angeles",
    "2012-08-31 08:45:00 America/Los_Angeles"
)
2012-08-31 11:35:39.684 GBSB[2168:15b03] These are the times avail: (
    "2012-08-31 08:00:00 America/Los_Angeles",
    "2012-08-31 08:15:00 America/Los_Angeles",
    "2012-08-31 08:30:00 America/Los_Angeles",
    "2012-08-31 08:45:00 America/Los_Angeles",
    "2012-08-31 09:00:00 America/Los_Angeles"
)
2012-08-31 11:35:39.684 GBSB[2168:15b03] These are the times avail: (
    "2012-08-31 08:00:00 America/Los_Angeles",
    "2012-08-31 08:15:00 America/Los_Angeles",
    "2012-08-31 08:30:00 America/Los_Angeles",
    "2012-08-31 08:45:00 America/Los_Angeles",
    "2012-08-31 09:00:00 America/Los_Angeles",
    "2012-08-31 09:15:00 America/Los_Angeles"
) 
```

这是我正在使用的代码。

```
- (void)fetchedData:(NSData *)responseData {
    //parse out the json data

    NSError* error;

    NSDictionary *json = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableContainers error:&error];

    NSDictionary* myslots =[json objectForKey:@"slots"];
    for (NSString *slotKey in myslots.allKeys) {
    NSDictionary *slot = [myslots valueForKey:slotKey];
        NSArray *tests = [myslots objectForKey:slotKey];
        NSMutableArray *timesArray = [[NSMutableArray alloc] init];
    for (NSDictionary *myDays in tests){

        if ([[myDays objectForKey:@"isReservable"] isEqualToNumber:[NSNumber numberWithInt:1]])
          [timesArray addObject:[myDays objectForKey:@"begin"]];

       NSLog(@"These are the times avail: %@", timesArray);

    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:01:00.170

看起来你忘记了你的`if`陈述的括号：

```
for (NSDictionary *myDays in tests){
    if ([[myDays objectForKey:@"isReservable"] isEqualToNumber:[NSNumber numberWithInt:1]]) {
        [timesArray addObject:[myDays objectForKey:@"begin"]];
        NSLog(@"These are the times avail: %@", timesArray);
    }
} 
```

这能解决吗？测试一下，让我知道。

# xpath - youtube 条目搜索结果的 xpath

> ID：12220906
> 
> 赞同：0
> 
> 时间：2012-08-31T18:40:20.540
> 
> 标签：xpath, vb6, youtube-api

我需要有关 xpath 查询的帮助，以提取以下 rss 结果中每个**条目的标题文本和****缩略图 url**

 **```
<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns='http://www.w3.org/2005/Atom' xmlns:media='http://search.yahoo.com/mrss/'>
<entry>
<title>LiveFit Augusta - "Gym Time"</title>
<media:group>
<media:thumbnail url='http://i.ytimg.com/vi/Ig7CcLCR2n4/default.jpg'/>
<media:thumbnail url='http://i.ytimg.com/vi/Ig7CcLCR2n4/mqdefault.jpg'/>
<media:thumbnail url='http://i.ytimg.com/vi/Ig7CcLCR2n4/hqdefault.jpg'/>
<media:thumbnail url='http://i.ytimg.com/vi/Ig7CcLCR2n4/1.jpg'/>
<media:thumbnail url='http://i.ytimg.com/vi/Ig7CcLCR2n4/2.jpg'/>
<media:thumbnail url='http://i.ytimg.com/vi/Ig7CcLCR2n4/3.jpg'/>
</media:group>
</entry>
<entry>
<title>LiveFit Augusta - "Everyday Joes &amp; Janes"</title>
<media:group>
<media:thumbnail url='http://i.ytimg.com/vi/REhn9jjjV7Q/default.jpg'/>
<media:thumbnail url='http://i.ytimg.com/vi/REhn9jjjV7Q/mqdefault.jpg'/>
<media:thumbnail url='http://i.ytimg.com/vi/REhn9jjjV7Q/hqdefault.jpg'/>
<media:thumbnail url='http://i.ytimg.com/vi/REhn9jjjV7Q/1.jpg'/>
<media:thumbnail url='http://i.ytimg.com/vi/REhn9jjjV7Q/2.jpg'/>
<media:thumbnail url='http://i.ytimg.com/vi/REhn9jjjV7Q/3.jpg'/>
</media:group>
</entry>
</feed> 
```

**标题**

<title type='text'>舞蹈的演变</title>

或者

<media:title type='plain'>舞蹈的演变</media:title>

**缩略图**

```
<media:thumbnail 
      url='http://img.youtube.com/vi/dMH0bHeiRNg/1.jpg' height='97' width='130' 
      time='00:01:30'/> 
```

**编辑**

这是我正在使用的代码

```
Dim xmlDoc As MSXML2.DOMDocument30
Dim xmlNode As MSXML2.IXMLDOMNode
Dim xmlEntryNodes As IXMLDOMNodeList
Dim ns As String
Set xmlDoc = New DOMDocument30
ns = "xmlns:x='http://www.w3.org/2005/Atom' xmlns:media='http://search.yahoo.com/mrss/'"
    xmlDoc.setProperty "SelectionLanguage", "XPath"
    xmlDoc.setProperty "SelectionNamespaces", ns

If xmlDoc.loadXML(xmlText) = False Then
  Exit Function
End If

Set xmlEntryNodes = xmlDoc.documentElement.selectNodes("/feed/entry") 
```

debug.print xmlEntryNodes.Length 返回 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T22:50:20.823

**使用**：

ns = "xmlns:x='http://www.w3.org/2005/Atom' xmlns:media='http://search.yahoo.com/mrss/'"

doc.SetProperty("SelectionNamespaces", ns)

**然后使用这样的 XPath 表达式**：

```
/*/x:entry/x:title[. = 'Evolution of Dance'] 
```

**这**：

```
/*/x:entry/media:group/media:thumbnail[@url='http://img.youtube.com/vi/dMH0bHeiRNg/1.jpg'] 
```

**在此处了解有关该`SetProperty()`功能**的更多信息：

**[http://msdn.microsoft.com/en-us/library/windows/desktop/ms756048(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms756048%28v=vs.85%29.aspx)**

**或者，如果您不想注册命名空间，您可以使用****这样**的可读性较差的表达式：

```
/*/*[name()='entry']/*[name()='title'][. = 'Evolution of Dance'] 
```

**这**：

```
/*/*[name()='entry']
       /*[name()='media:group']
           /*[name()='media:thumbnail']
                 [@url='http://img.youtube.com/vi/dMH0bHeiRNg/1.jpg'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T19:00:46.970

这是你想要的？

**标题**

```
/feed/entry/title 
```

**媒体：标题**

```
/feed/entry/media:group/media:title 
```

**缩略图**

```
/feed/entry/media:group/media:thumbnail 
```**

# winforms - VS2008 的工具箱中缺少 Windows.Forms.DataGrid

> ID：12220907
> 
> 赞同：0
> 
> 时间：2012-08-31T18:40:25.473
> 
> 标签：winforms, datagrid, .net-3.5

我正在尝试将 DataGrid 添加到我的 Windows 窗体应用程序中，但工具箱中似乎缺少它。只有 DataGridView 可用。

PS：我能够手动将其添加到设计器代码中。但是我很好奇为什么它不包含在工具箱中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T18:51:10.810

我怀疑它`DataGrid`从来没有在工具箱中开始。根据[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagrid.aspx)，`DataGrid`

> 在可滚动网格中显示 ADO.NET 数据。DataGridView 控件替换 DataGrid 控件并向其添加功能；但是，如果您选择，则保留 DataGrid 控件以供向后兼容和将来使用。

此外，您应该注意 Visual Studio 允许您自定义工具箱中的项目。您可以右键单击工具箱，选择“选择项目”，然后选择`DataGrid`它，然后它将出现在您的工具箱中。

# magento - 关于 $collection->removeItemByKey 之后的 Magento 分页

> ID：12220913
> 
> 赞同：0
> 
> 时间：2012-08-31T18:40:59.447
> 
> 标签：magento, collections, pagination, product

我关注这个博客，它非常可靠，我找到了很好的解决方案.. 然而，这一次，我没有找到解决我的问题的方法，所以我决定发布我遇到的 magento 问题：我必须应用过滤器list.php中的产品集合，代码如下：

foreach ($collection as $key => $product){

```
 $ _regularPrice = $ _taxHelper-> getPrice ($ product, $ product-> getPrice (), $ _simplePricesTax);
             $ _finalPrice = $ _taxHelper-> getPrice ($ product, $ product-> getFinalPrice ());
             $ discount = floor (($ _regularPrice - $ _finalPrice) / $ _regularPrice * 100);

             if ($ discount <50) {
                 $ collection-> removeItemByKey ($ key);
             } 
```

}

搞定了，我有自己的产品集合要展示，现在仍然是这些结果的分页问题，​​所以你现在怎么样，第一页给我显示了大约300个产品，分页器的链接显示关于8 页，我怎样才能拥有与默认情况下向其列表提供 magento 的相同功能？感谢所有卢克的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:53:56.307

由于您在其中进行了一些数学运算，因此我认为您无法在集合的代码中执行此操作。您可以做的是迭代集合并将所有匹配的 id 放在一个巨大的数组中。然后从这些 id 加载另一个集合对象。这应该是可分页的。

请参阅关于合并集合的 SO Q/A，了解如何组装 id 并使用它们加载集合。

[Magento：如何将两个产品集合合并为一个？](https://stackoverflow.com/questions/5434996/magento-how-to-merge-two-product-collections-into-one)

# java - 64 位 Java 无法通过 ODBC 访问 32 位 MS Access 数据库

> ID：12220914
> 
> 赞同：7
> 
> 时间：2012-08-31T18:41:12.457
> 
> 标签：java, ms-access, odbc, 64-bit

我有一台新的 64 位笔记本电脑，并安装了 STS 64 位和 Java 64 位。我正在尝试创建到 32 位 Microsoft 数据库的 ODBC 连接；但是默认的管理工具不提供访问驱动程序。谷歌搜索后，我发现在 C:\Windows\SysWOW64\odbcad32.exe 中有一个用于创建 32 位驱动程序的管理工具。但是，从该连接创建的 ODBC 连接会在我运行程序时给我一条错误消息，指示架构不匹配：

“[Microsoft][ODBC Driver Manager] 指定的 DSN 包含驱动程序和应用程序之间的体系结构不匹配”

我认为这是因为 64 位 Java 正在尝试使用 32 位驱动程序。为了解决这个问题，我尝试将参数“-D32”放在 VM 参数中，但得到了相同的结果。

我正在考虑卸载 STS 和 Java 并用 32 位版本替换它们。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T18:47:02.570

要加载 32 位本机库，您需要有 32 位 JVM。

您无需卸载 Java，您可以安装任意多个版本。

您可以使用 64 位 JVM 与加载驱动程序的 32 位 JVM 通信，但这可能比您需要的更复杂。

# ruby-on-rails - Rails 3 和 rspec 和 i18n - 控制器的正确测试不起作用（失败）

> ID：12220917
> 
> 赞同：1
> 
> 时间：2012-08-31T18:41:32.623
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec

我有这样的**控制器**：

```
class StatsController < ApplicationController
  def users_in_system
    @users = User.all
  end
end 
```

**路线**：

```
 scope ":locale", locale: /#{I18n.available_locales.join("|")}/ do
    devise_for :users, :skip => [:registrations]                                          
    as :user do
      get 'users/edit' => 'devise/registrations#edit', :as => 'edit_user_registration'    
      put 'users' => 'devise/registrations#update', :as => 'user_registration'            
      get '/users/sign_out' => 'devise/sessions#destroy'                                  
    end

    match '/users_list', :to => 'stats#users_in_system'
    match '/about', :to => 'pages#about'
    root :to => 'pages#home'
  end

  match '*path', to: redirect("/#{I18n.default_locale}/%{path}"), constraints: lambda { |req| !req.path.starts_with? "/#{I18n.default_locale}/" }
  match '', to: redirect("/#{I18n.default_locale}") 
```

`Rake routes`：

```
 new_user_session GET    /:locale/users/sign_in(.:format)       devise/sessions#new {:locale=>/en|ru/}
          user_session POST   /:locale/users/sign_in(.:format)       devise/sessions#create {:locale=>/en|ru/}
  destroy_user_session DELETE /:locale/users/sign_out(.:format)      devise/sessions#destroy {:locale=>/en|ru/}
         user_password POST   /:locale/users/password(.:format)      devise/passwords#create {:locale=>/en|ru/}
     new_user_password GET    /:locale/users/password/new(.:format)  devise/passwords#new {:locale=>/en|ru/}
    edit_user_password GET    /:locale/users/password/edit(.:format) devise/passwords#edit {:locale=>/en|ru/}
                       PUT    /:locale/users/password(.:format)      devise/passwords#update {:locale=>/en|ru/}
edit_user_registration GET    /:locale/users/edit(.:format)          devise/registrations#edit {:locale=>/en|ru/}
     user_registration PUT    /:locale/users(.:format)               devise/registrations#update {:locale=>/en|ru/}
        users_sign_out GET    /:locale/users/sign_out(.:format)      devise/sessions#destroy {:locale=>/en|ru/}
            users_list        /:locale/users_list(.:format)          stats#users_in_system {:locale=>/en|ru/}
                 about        /:locale/about(.:format)               pages#about {:locale=>/en|ru/}
                  root        /:locale(.:format)                     pages#home {:locale=>/en|ru/}
                              /*path(.:format)                       :controller#:action
                              /                                      :controller#:action 
```

我想为控制器编写测试。所以我尝试了这个**规范**：

```
require 'spec_helper'

describe StatsController do
  render_views

  before(:each){ @user = FactoryGirl.create( :user ) }

  describe "GET 'users_in_system'" do
    describe "for non-signed users" do
      it "should deny access" do
        get :users_in_system
        #...
      end
    end
  end
end 
```

它失败了：

```
1) StatsController GET 'users_in_system' for non-signed users should deny access
     Failure/Error: get :users_in_system
     ActionController::RoutingError:
       No route matches {:controller=>"stats", :action=>"users_in_system"}
     # ./spec/controllers/stats_controller_spec.rb:11:in `block (4 levels) in <top (required)>' 
```

在浏览器中，此页面打开，一切正常。rspec 怎么会产生这样的错误？！

UPD1：我想，路由中的 i18n 集成可能会破坏我的测试。

UPD2：

我的**application.rb**：

```
require File.expand_path('../boot', __FILE__)
require 'rails/all'

if defined?(Bundler)
  # If you precompile assets before deploying to production, use this line
  Bundler.require(*Rails.groups(:assets => %w(development test)))
  # If you want your assets lazily compiled in production, use this line
  # Bundler.require(:default, :assets, Rails.env)
end

module MyApp
  class Application < Rails::Application
    config.i18n.default_locale = :ru
    config.encoding = "utf-8"
    config.filter_parameters += [:password]
    config.active_support.escape_html_entities_in_json = true
    config.active_record.whitelist_attributes = true
    config.assets.enabled = true
    config.assets.version = '1.0'
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T21:53:07.900

我怀疑问题是`I18n.default_locale`在 rspec 中没有正确设置，这会破坏你的路由。

我建议的第一件事是看看是否`I18n.default_locale`真的在你的测试中设置。

几个问题开始：

*   如果更改`get :users_in_system`为`get :users_in_system, :locale => :en`测试是否通过？
*   尝试用`I18n.default_locale`它的显式值替换 routes.rb ，比如`:en`，看看是否有任何改变。

# javascript - 使用 JavaScript 而不使用数据库的动态下拉菜单

> ID：12220923
> 
> 赞同：0
> 
> 时间：2012-08-31T18:42:05.590
> 
> 标签：javascript, ajax, drop-down-menu, dynamic-data

是否有一种快速而肮脏的技术可以在不使用数据库后端的情况下创建动态下拉菜单？将有三个级别的下拉菜单，其中有很多项目，因此又快又脏！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:47:15.203

您选择从数据库加载项目的事实与下拉菜单本身几乎无关。您始终可以读取 JSON、.csv 或 xml 文件。根据实现的不同，您甚至可以将项目直接加载到 HTML 页面中（但如果您有很多项目，这将非常缓慢，因此不推荐）。

通过 AJAX 加载包含您的项目的文件（最好是 JSON），对其进行解析并动态创建标记。

很难提供细节，因为内容的来源不应该那么重要。如果您打算使用经典`<select>`标签，只需创建该元素。jQuery 是你快速和肮脏的朋友。

使用 JSON.parse() 将返回结构化对象，您可以使用该对象循环遍历元素并将子节点添加到`<select>`节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T18:49:23.427

你的问题有点模糊，所以我会给你一个“一般”的答案。

有像 jQuery 和 knockoutJS 这样的工具。您可以使用 knockoutJS 来表示客户端视图模型并使用它（可能与 jQuery 结合使用）用您的数据填充视图。

我认为你应该看看 knockoutJS，尤其是 observables、observable 数组、`options`绑定及其对 AJAX 请求的支持——这听起来是一个合理的起点。

可以在这里找到 knockoutJS 文档：http: [//knockoutjs.com/documentation/introduction.html](http://knockoutjs.com/documentation/introduction.html)

# php - 可扩展的网络应用程序

> ID：12220926
> 
> 赞同：0
> 
> 时间：2012-08-31T18:42:26.433
> 
> 标签：php, mysql, amazon-rds, amazon-dynamodb

我们正在使用 PHP（Zend 框架）、MySQL、运行 Apache 的服务器构建一个社交网站。

有一个要求，应用程序将在仪表板中获取不同事件的数据（大约有 12 个事件），用户的仪表板将在这些事件上更新。我们预计用户总数将在 50 万到 70 万左右。而在某个时候，平均大约 20% 的用户会在线（在高峰期，我们预计 50% 的用户会在线）。

所以问题是我们当前设计的事件数据将被放置在 MySQL 数据库中。我认为即使我们使用 Amazon RDS，在 MySQL 上同时运行几十万个查询也不是一个好主意。因此，我们正在考虑将 DynamoDB（或 Redis 或任何 NoSQL 数据库选项）与 MySQL 一起使用。

所以问题是：在 MySQL 和任何 NoSQL 数据库中都有数据会给我们带来好处，让我们的 Web 应用程序具有这种可扩展性的能力吗？或者我们应该考虑任何其他解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:59:01.090

您不需要复制数据。一种选择是使用亚马逊提供的 ElastiCache 为您自己提供内存缓存。这将摆脱您的数据库调用并在某种意义上消除该瓶颈，但这可能非常昂贵。如果您可以牺牲相关时间更新，那么您只需减慢请求或为用户在本地缓存数据即可逃脱。比如说，如果可能的话，在浏览器上缓存接下来的 N 个事件并显示它们，而不是向服务器发出另一个请求。

如果它必须是实时的，那么查看 ElastiCache，然后调整处理估计流量所需的数量。复制数据没有意义。如果将其保留在单个数据库中有意义，则将其保存在单个数据库中，即您有一些您需要的关系信息，然后还有一个可变模式系统，那么您可以使用这两个数据库，但不能将它们一起负载平衡。

我还将开始考虑您的架构中的一些瓶颈，并考虑在您达到估计数字的情况下您的应用程序将/可以扩展的程度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T15:58:43.720

我同意@sean，没有必要复制数据库。您是否考虑过具有自动可扩展性的东西，例如[Xeround](http://xeround.com/)。像这样的解决方案可以在您遇到吞吐量高峰时自动横向扩展多个节点，然后再缩减，因此您不必仅仅因为季节性高峰而承诺使用更大、更广泛的实例。

此外，如果我理解正确，这种自动可扩展性不需要更改代码。所以，我想说，除非你需要在 MySQL 和 NoSQL DB 上复制数据，而不是因为与可伸缩性相关的问题，否则请选择具有自动伸缩功能的单个数据库。

# php - Mysql 相同的查询

> ID：12220930
> 
> 赞同：1
> 
> 时间：2012-08-31T18:42:36.767
> 
> 标签：php, mysql

我有一个 SELECT 查询，您可以在其中搜索车主。每个车主都可以拥有不止一辆汽车。有**随机**生成的汽车列表，我们必须找到它们的所有者。

```
...

$owners[] = $dbaseowners["ownerid"] // owner ID's fetched from database

$owners = implode (',',$owners);

SELECT carname FROM cars WHERE ownerid IN ($owners); 
```

我的问题是当一个所有者被多次使用时，例如： IN (1,1,4,1) - mysql 只获取该所有者数据的一个“副本”。

因为我有一个随机生成的汽车列表，所以无论车主是否相同，我都必须为每辆车设置车主行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:45:40.650

我相信你必须修改你的设计并有一个连接表来将车主与汽车联系起来。在表格的一行中有 1,1,4,1 不符合第一个范式，您应该避免使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T19:05:18.617

尝试使用`array_unique`从数组中删除重复值：

```
...

$owners[] = $dbaseowners["ownerid"] // owner ID's fetched from database

$owners = implode (',', array_unique($owners));

SELECT carname FROM cars WHERE ownerid IN ($owners); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T19:11:51.677

试试这个：

```
$sql = mysql_query("SELECT `ownerid`, `carname` FROM `cars` WHERE `ownerid` IN (".array_unique($owners).")");
$ret = Array();
while($row = mysql_fetch_assoc($sql)) $ret[$row['ownerid']] = $row['carname'];
foreach($owners as $owner) {
    echo $owner.": ".$ret[$owner]."<br />\n";
} 
```

# haskell - 多参数类没有实例错误

> ID：12220932
> 
> 赞同：5
> 
> 时间：2012-08-31T18:42:46.587
> 
> 标签：haskell, functional-programming

我正在尝试使用 Haskell 编写一个基本的词法分析器。为了实现 DFA 和 NFA，我决定将一些常用函数放入 FA 和 FAState 类中。

```
-- |A class for defining the common functionality of all finite automatons.
class FA a b where
    mutateId :: a -> Int -> a               -- ^Returns a new FA by changing the sId of the input FA.
    mutateType :: a -> StateType -> a       -- ^Returns a new FA by changing the stateType of the input FA.
    addTransition :: a -> (b, a) -> a       -- ^Returns a new FA by adding a new transition to the input FA.

-- |A class for defining the common functionality of all finite automaton states.
class FA a b => FAState a b where
    sId :: a -> Int                         -- ^An unique identifier for the state(hence the prefix s).
    sType :: a -> StateType                 -- ^The type of the state.
    sTransitions :: a -> Transitions b a    -- ^The transitions that occur from this state. 
```

在哪里，

```
-- |A type which identifies different types of a FA state.
data StateType = Start | Normal | Final
    deriving (Show, Read, Eq)

-- |A type which represents a list of transitions on input a to b.
-- Eg. [(Char, DFA)] represents the transition on a Char input.
type Transitions a b = [(a, b)] 
```

因此，b 表示发生转换的数据类型。对于 DFA，b = Char，而对于 NFA，b = Symbol。

```
data Symbol = Alphabet Char | Epsilon
    deriving (Show, Read, Eq) 
```

DFA和NFA分别定义为：

```
data DFA = DState Int StateType (Transitions Char DFA)
    deriving (Show, Read)
data NFA = NState Int StateType (Transitions Symbol NFA)
    deriving (Show, Read) 
```

我对 FA 和 FAState 的实例定义有疑问：

```
instance FA DFA Char where
    mutateId (DState i ty ts) new_i = DState new_i ty ts
    mutateType (DState i ty ts) new_ty = DState i new_ty ts
    addTransition (DState i ty ts) state = DState i ty (state:ts)

instance FAState DFA Char where
    sId (DState i t ts) = i
    sType (DState i t ts) = t
    sTransitions (DState i t ts) = ts

instance FA NFA Symbol where
    mutateId (NState i ty ts) new_i = NState new_i ty ts
    mutateType (NState i ty ts) new_ty = NState i new_ty ts
    addTransition (NState i ty ts) state = NState i ty (state:ts)

instance FAState NFA Symbol where
    sId (NState i t ts) = i
    sType (NState i t ts) = t
    sTransitions (NState i t ts) = ts 
```

在尝试运行任何函数时，我得到一个无实例错误：

```
>>sId egNFA

<interactive>:15:1:
    No instance for (FAState NFA b0)
      arising from a use of `sId'
    Possible fix: add an instance declaration for (FAState NFA b0)
    In the expression: sId egNFA
    In an equation for `it': it = sId egNFA 
```

我不明白这里发生了什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T19:03:25.613

您的问题的根源是：实例调度*永远不会*使推断的类型更具体，即使这将允许它选择一个实例。这个设计决策与所谓的“开放世界”类模型有关：目标是代码的行为（包括“是否编译”）永远不应该仅仅通过添加类型类的实例而改变。

现在，记住这个原则，想想你要求编译器做什么：你已经给出了一个 的实例`FAState NFA Symbol`，并编写了一个类型类多态的表达式，并且*只将第一个类型固定*为`NFA`; 另一个完全打开。编译器*可以*选择范围内的单个实例（其中另一个变量被单`Symbol`态`FAState NFA Widget`为可编译的代码。所以编译器保守地拒绝编译甚至只有一个实例在范围内的版本。

有一些标准修复：

1.  给出一个类型签名来修复其他类型，告诉编译器选择哪个实例。不幸的是，这个解决方案对你不起作用：你的 typeclass-polymorphic 值`sId :: FAState a b => a -> Int`没有提到类型变量`a`和`b`它的类型。由于你永远不能使用这个值，我认为现代 GHC 会更早地拒绝这个类型类（在你编写任何实例或尝试调用类方法之前），尽管我目前还没有一个可以测试.

    只是举一个这个解决方案的例子，考虑`sTransitions`而不是`sId`：这里的类型签名确实提到了这两个变量，所以你可以把 non-compiling`sTransitions nfa`变成 yes-compiling `sTransitions nfa :: Transitions Symbol NFA`。（更原则性、可泛化的转换仅在方法上给出类型签名；例如，您可以轻松地泛化从`sTransitions nfa`到的转换`(sTransitions :: NFA -> Transitions Symbol NFA) dfa`。）

2.  使用函数依赖项。这里的想法是状态的类型完全由自动机的类型决定，所以从道德上讲，只需修复类中的第一个类型变量就足够了。告诉 GHC 这个事实的语法如下所示：

    ```
    class FAState a b | a -> b where
        {- ...same as before -}
    -- instance declarations look the same as before, too 
    ```

    这做了两件事：第一，它告诉 GHC 如果它知道，即使它还不知道`a`，它也可以使用它来选择一个实例`b`，第二，它告诉 GHC 仔细检查类的实例对违反功能约束，即没有两个实例具有相同`a`但不同的`b`。

3.  使用（关联的）类型族。这与前面的想法相同，但可能以更熟悉的范式表达。这个语法看起来像这样：

    ```
    class FAState a where
        type State a
        sId :: a -> Int
        sType :: a -> StateType
        sTransitions :: a -> Transitions (State a) a

    instance FAState NFA where
        type State NFA = Symbol
        -- methods are the same as before 
    ```

    这引入了一个名为的新类型构造函数`State`（您可以在类型签名等中使用它）。您可以将其视为类型级别的函数，该函数将作为类实例的类型作为输入，`FAState`并输出与该类型自动机相关的状态类型。

4.  使您的实例声明更具多态性。如果 GHC 抱怨它对第二个变量知之甚少，那么……您总是可以告诉它第二个变量的所有实例都同样好（直到某些等式约束）。例如：

    ```
    -- class definition same as before
    instance b ~ Symbol => FAState NFA b where
        -- methods same as before 
    ```

    这`~`是 GHC 的类型级别相等表示法。它的工作方式非常狡猾，并且在其他地方有很好的描述（如果你真的想要它们，我会挖掘一些链接），但解释的简短版本是这告诉 GHC 如果它知道足够的知识来选择`NFA`第一个变量，然后它可以立即提交给这个实例，并且只有在它提交之后，它才会仔细检查第二个参数实际上是`Symbol`.

享受！

# actionscript-3 - Actionscript OOP 多方法调用架构问题

> ID：12220935
> 
> 赞同：0
> 
> 时间：2012-08-31T18:42:55.843
> 
> 标签：actionscript-3, apache-flex, oop, events, actionscript

我有一个类：DatabaseService.as 这个类创建一个本地 sqlite 连接并在它们不存在时创建表。连接链接将被其他几个类使用。一些类将在启动时调用其他类在用户交互时。“DatabaseService”类在打开数据库连接时调度事件。其他类初始化“DatabaseService”类并等待“DatabaseReadyEvent”。这很好用，但是当我需要多次调用同一个类的函数/方法时，我该怎么办？

例子：

我在 mxml 组件中创建了一个“PrefService”类的实例。“PrefService”在其构造函数中创建一个新的“DatabaseService”类。然后它等待“DatabaseReadyEvent”并执行 sql 查询（这工作正常）。但随后我还需要在“PrefService”类中调用“addDir”方法（以及其他一些方法），并且尚未设置 sqlConnection 属性导致错误。我该如何处理？我是 OOP 的新手，所以我可能遗漏了一些非常简单的东西......

我尝试过的/我的想法：

1.  我可以检查“PrefService”类中是否存在 sqlConnection，但我认为这是不好的做法，仍然需要某种延迟机制。

2.  我还可以为每个方法创建一个“DatabaseService”类的新实例并添加一个新的事件侦听器，但这对于每个方法调用的 2 个函数来说非常麻烦，更不用说事件了。

在这种情况下，最好的选择是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T15:11:42.143

对 Singleton 的仇恨是[当之无愧的](http://misko.hevery.com/2008/11/21/clean-code-talks-global-state-and-singletons/)。我建议永远不要养成使用它的习惯，所以当你发现维持它是多么可怕时，你不必打破这个习惯。

您最大的错误是让您的视图创建和执行您的服务。不幸的是，FB 服务生成代码的工作方式鼓励了这一点。相反，您想要的更像是类似于 Robotlegs 等框架所鼓励的类型的 MVCS（模型-视图-控制-服务）。

要了解如何从紧耦合架构转变为松耦合架构，请从[这个示例](http://flexdiary.blogspot.com/2009/01/lazy-loading-tree-example-file-posted.html)开始。请注意，Service 是一个静态类，就鼓励紧密耦合而言，它几乎具有作为 Singleton 的所有问题。即使只有一个类使用该服务，想象一下如果您有一个大型项目，其中有数十或数百个类引用它会发生什么。现在想象有些事情需要改变。伊克。

现在查看项目，[重构](http://www.developria.com/2010/05/refactoring-with-mate.html)后视图只是生成一个导致调用服务的事件。该服务仍然是静态的，但在这种情况下，只有一件事知道它（Mate），所以如果你想让它不是静态的或者有时使用不同的服务，你现在可以轻松做到。

事实上，你可以很容易地改变事情，[这就是项目](http://www.developria.com/2010/06/robotlegs-for-framework-beginn.html)，重构为使用 Robotlegs。您不必像我那样使用框架——您可以看到核心类中涉及的基本结构并不关心事件是如何被处理的或数据是如何进入视图的。如果您不习惯使用框架，请按照自己的方式处理。但是框架已经存在了一段时间，它们已经解决了很多你还没有想到的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T23:38:34.047

在没有看到任何代码的情况下提出建议很棘手，但可能值得考虑将`DatabaseService`类设为[Singleton](http://en.wikipedia.org/wiki/Singleton_pattern)并在启动例程中初始化它（和数据库连接）一次（即在实例化使用它的类之前） . 这将确保使用`DatabaseService`all 的类共享到数据库的单个连接链接，并且当他们使用它时该链接可用。

ActionScript 中的单例引起了相当多的争论，因为在其他语言中，该模式依赖于将类构造函数的访问修饰符设置为私有的能力（在 ActionScript 3.0 中不能这样做）。但是，您可以从[此处](http://gskinner.com/blog/archives/2006/07/as3_singletons.html)详述的几种方法中进行选择。

此外，Singletons 通常会引起[相当多的争论](https://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons)，在你愤怒地使用 Singletons 之前可能值得理解（因为你说你是 OOP 的新手，我假设你以前没有这样做过）。

# java - 使用数据网格源的挂毯

> ID：12220936
> 
> 赞同：0
> 
> 时间：2012-08-31T18:42:56.417
> 
> 标签：java, datagrid, tapestry

我正在尝试从[挂毯教程](http://www.packtpub.com/article/tapestry-5-advanced-components)中学习挂毯，但是其中一部分已经过时了。

使用 GridDataSource 代码是：

```
package com.packtpub.celebrities.util;
import com.packtpub.celebrities.data.IDataSource;
import com.packtpub.celebrities.model.Celebrity;
import java.util.List;
import org.apache.tapestry.beaneditor.PropertyModel;
import org.apache.tapestry.grid.GridDataSource;

public class CelebritySource implements GridDataSource {
  private IDataSource dataSource;
  private List<Celebrity> selection;
  private int indexFrom;

  public CelebritySource(IDataSource ds) {
    this.dataSource = ds;
  }

  public int getAvailableRows() {
    return dataSource.getAllCelebrities().size();
  }

  public void prepare(int indexFrom, int indexTo, PropertyModel propertyModel, boolean ascending) {
    String propertyName = propertyModel == null ? null : propertyModel.getPropertyName();

    System.out.println("Preparing selection.");
    System.out.println("Index from " + indexFrom + " to " + indexTo);        
    System.out.println("Property name is: " + propertyName);
    System.out.println("Sorting order ascending: " + ascending);

    this.selection = dataSource.getRange(indexFrom, indexTo);
    this.indexFrom = indexFrom;
  }

  public Object getRowValue(int i) {
    System.out.println("Getting value for row " + i);
    return selection.get(i - this.indexFrom);
  }

  public Class getRowType() {
    return Celebrity.class;
  }
} 
```

方法实现 prepare 现在看起来像

```
public void prepare(int startIndex, int endIndex, List<SortConstraint> sortConstraints) {} 
```

google.com 上显示新方法实现的少数[示例之一是：](http://www.jarvana.com/jarvana/view/org/apache/tapestry/tapestry-core/5.0.11/tapestry-core-5.0.11-sources.jar!/org/apache/tapestry/internal/grid/CollectionGridDataSource.java?format=ok)

```
public void prepare(int startIndex, int endIndex, List<SortConstraint> sortConstraints) {
  for (SortConstraint constraint : sortConstraints) {
    final ColumnSort sort = constraint.getColumnSort();

    if (sort == ColumnSort.UNSORTED) continue;

    final PropertyConduit conduit = constraint.getPropertyModel().getConduit();

    final Comparator valueComparator = new Comparator<Comparable>() {
      public int compare(Comparable o1, Comparable o2) {
        // Simplify comparison, and handle case where both are nulls.
        if (o1 == o2) return 0;
        if (o2 == null) return 1;
        if (o1 == null) return -1;
        return o1.compareTo(o2);
      }
    };

    final Comparator rowComparator = new Comparator() {
      public int compare(Object row1, Object row2) {
        Comparable value1 = (Comparable) conduit.get(row1);
        Comparable value2 = (Comparable) conduit.get(row2);
        return valueComparator.compare(value1, value2);
      }
    };

    final Comparator reverseComparator = new Comparator() {
      public int compare(Object o1, Object o2) {
        int modifier = sort == ColumnSort.ASCENDING ? 1 : -1;
        return modifier * rowComparator.compare(o1, o2);
      }
    };

    // We can freely sort this list because its just a copy.
    Collections.sort(_list, reverseComparator);
  }
} 
```

有没有办法像现在一样使用 prepare 方法创建旧代码工作的功能？

```
public void prepare(int startIndex, int endIndex, List<SortConstraint> sortConstraints) {} 
```

也将不胜感激这个问题的任何其他解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T11:16:11.430

看起来旧`prepare()`方法只能让您根据一个标准进行排序，而新`prepare()`方法可以让您根据多个标准进行排序。（即您可以指定二级排序。）

和`propertyModel`一个升序/降序枚举现在保存在`SortConstraint`对象中，但是查看代码，没有使用任何一个！因此，要使示例正常工作，请尝试以下操作：

```
public void prepare(int startIndex, int endIndex, List<SortConstraint> sortConstraints) {
  this.selection = dataSource.getRange(startIndex, endIndex);
  this.indexFrom = startIndex;
} 
```

如果您需要`properyModel`（用于调试）它应该可以从以下位置访问：

```
PropertyModel propertyModel = sortConstraints.get(0).getPropertyModel(); 
```

# c# - 如何打开特定目录对话框？

> ID：12220942
> 
> 赞同：1
> 
> 时间：2012-08-31T18:43:29.830
> 
> 标签：c#, winforms

我正在用 c# 开发一个程序，我遇到了这个问题。

我想显示引用特定目录的对话框。

我知道有 OpenDialogFolder 和 SaveDialog，但我不想保存或打开任何文件，我想要的只是打开一个特定的目录对话框。

像这个截图：

![在此处输入图像描述](../Images/4b032d12517ed5ea7c18381856f11aa9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T18:58:42.827

您似乎只想打开 Windows 资源管理器的副本。您可以通过简单地调用 Process.Start() 并仅指定一个没有文件名的文件夹路径来做到这一点：

```
Process.Start(@"C:\Temp\"); 
```

Windows shell 的默认行为是，在命令行上给出这样的命令（或快捷方式或运行命令）是打开 Windows 资源管理器以显示指定路径的内容。

现在，Windows 资源管理器是一个外部进程，您正在启动它，然后让它做它的事情。因此，它的行为与模态对话框不同，例如防止对话框失去焦点到另一个窗口。但是，您可以通过将 Process.Start (a Process) 的结果分配给变量，然后在不带参数的情况下调用该 Process 的 WaitForExit() 方法来模仿对话框的“不能对应用程序执行任何其他操作”行为. 这将阻塞应用程序的主线程，直到用户关闭您打开的资源管理器窗口。它并不完美；通过阻塞线程，应用程序将不会响应任何绘制自身的请求或执行任何其他基本操作，即使对话中断的窗口仍会执行，您仍然可以在技术上“激活” 用于启动 Windows 资源管理器的窗口，它将把它带到 Windows 资源管理器的前面。资源管理器窗口也可以被最小化（一些对话框通常不允许），你可以做很多事情来阻止它。

# jquery - 根据内容设置div的高度

> ID：12220944
> 
> 赞同：1
> 
> 时间：2012-08-31T18:43:35.700
> 
> 标签：jquery

我有一个由 php 循环动态生成的事件列表的 div。我希望 div 有一个初始高度，只显示三个事件。然后，当您单击一个链接时，它会扩展为全宽以显示所有事件。说：

```
<div id = "container">
  <div class="events-wrap">
  <!-- php loop that generates the events -->
  </div>
  <a href="#" class="showall">Show All</a>
</div> 
```

因此，我希望在单击 .showall 时将高度动画降低到 div 的完整高度，以便显示所有事件。我最初试图让 div 动画的尝试是失败的。

```
$(document).ready(function() { 
    $('.events-wrap').css('height','30%');
    $('.showall').click(function(e) {
         e.preventDefault();
          $('.events-wrap').animate({
                height: '100%'
              }, 500, function() {
                // Animation complete.
           });
     )};
}); 
```

当再次单击链接时，我还想让它动画回到它的初始高度。有人？？？谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:52:15.693

尝试这个：

[http://jsfiddle.net/hmartiro/yd7Kq/30/](http://jsfiddle.net/hmartiro/yd7Kq/30/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T19:58:05.690

我稍微扩展了@hayk 的答案以提供滑动动画。jQuery 在动画百分比高度方面存在问题：

```
$(document).ready(function() { 
    $('.events-wrap').data('fullHeight', $('.events-wrap').height());
    $('.events-wrap').css('height','100px').css('overflow','hidden');
    $('.events-wrap').data('minimizedHeight', $('.events-wrap').height());
    $('.showall').click(function(e) {
        e.preventDefault();
        clickShowAll();
    });
});

function clickShowAll() {
    var eventWrap = $('.events-wrap');
    var h;
    if(eventWrap.height() != eventWrap.data('fullHeight')) {
        h = eventWrap.data('fullHeight');
    }
    else
    {
        h = eventWrap.data('minimizedHeight');
    }

    eventWrap.animate({
        height: h
            }, 500, 'swing', function() {
                //Animation complete...
            }
       );
} 
```

加载文档时，在设置 .events-wrap 的高度之前，使用 jQuery 数据存储其完整高度，以便稍后检索它。然后将其设置为最小高度。然后使用 .data 存储它。

为 .showall 创建 click 事件并让它调用一个函数来检查 .events-wrap 的高度并确定要设置动画的高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T19:09:48.660

尝试这个 ：

```
$(document).ready(function() {
$('.events-wrap').css('height','100px').css('overflow','hidden');
$('.showall').click(function(e) {
     e.preventDefault();
   r = $('.events-wrap');
   h = r.children('ul').outerHeight();
    t=$(this);
   if(r.data('state')!='all')       
      r.animate({
            height: h
          }, 500, function() {
              t.text('show less');
              r.data('state','all');
       });
    else
        r.animate({
            height: '100px'
          }, 500, function() {
                t.text('show all');
              r.data('state','less');
       });

});
}); 
```

[在 jsfiddle 上](http://jsfiddle.net/dariushvb2010/8wKnZ/1/)

# django - 在 Django 应用中实现 Facebook 登录的简单且最新的方法

> ID：12220952
> 
> 赞同：2
> 
> 时间：2012-08-31T18:44:13.920
> 
> 标签：django, facebook, facebook-javascript-sdk, django-socialauth, django-allauth

这个问题在stackoverflow中很常见，关于它有很多不同的问题和答案，但我找不到我真正需要的东西。

首先，我想准确定义我需要什么：让用户使用他们的 Facebook 凭据登录我的应用程序的选项。该应用程序将保存一个匹配的经典 Django 用户。我只需要使用用户的个人资料图片并确保每次相同的 Facebook 用户都与匹配的 Django 用户相关。

不幸的是，由于以下原因，我发现实施起来真的很令人沮丧：

1.  到现在为止，在阅读了很多之后，我找不到这个任务的最佳包是什么。
2.  有些人推荐 django-social-auth 并称赞它的功能和文档。就个人而言，我不明白为什么，因为它不是专门针对 Facebook 的，也没有关于客户端的解释，即 Facebook 登录按钮以及整个流程是如何工作的。
3.  当您访问 Facebook 开发人员时，您会突然发现自己正在阅读一些神奇的 javascript sdk，以及您所需要的承诺。然后您再次感到沮丧，并且无法理解客户端相关的 sdk 如何让用户注册您的应用程序。

我知道开发人员以某种方式在他们的应用程序中实现了 Facebook auth 包，但我就是不知道该怎么做。

如果有人能告诉我：在这个时间点，将 Facebook 身份验证添加到我的 Django 应用程序的最佳方式是什么？我还需要详细的文档/教程来解释如何登录 Facebook 用户，从设置和配置级别到注册到 Django 应用程序和客户端代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T11:25:56.610

有多种方法可以解决这个问题，什么是“最好”的方法真的很主观。

主观上，你可以选择`django-allauth`。以下是一些可帮助您入门的提示：

*   如果您想保持注册简单，请设置`SOCIALACCOUNT_AUTO_SIGNUP`为`True`以实现“无问题”登录。用户只需批准 FB 对话框，他们就会立即登录您的网站。

*   在模板中添加登录按钮仅仅是：

    `<a href="{% provider_login_url "facebook" %}">Sign In</a>`

*   该应用程序支持 JS SDK 登录（亲：用户习惯于出现的典型 FB 弹出窗口），或者您可以使用自己的 OAuth 流程。随便你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T03:57:40.347

了解 FB 的 Oauth 2.0 流程的最快方法是使用 FB 的 Javascript SDK。一旦你掌握了窍门，FB 的 PHP 库就是类似的。此外，其他 OAuth 网站（如 Google、Twitter 或 Dropbox）也有几乎相同的实现。

在婴儿步骤中：

1.  了解如何将[FB Javascript SDK](https://developers.facebook.com/docs/reference/javascript/)安装到一个简单的页面上

2.  使用[FB.login](https://developers.facebook.com/docs/reference/javascript/FB.login/)确定登录状态并获取登录 url。

3.  最后，使用[FB.Event.Subscribe](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)并订阅 auth.statusChange 来检测登录/注销更改。

此外，很高兴查看[https://developers.facebook.com/roadmap/](https://developers.facebook.com/roadmap/)即将推出的功能或将要删除的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T00:16:27.957

django-social-auth 不仅适用于 Facebook，但这并不意味着您应该使用所有可用的后端。

项目文档位于[http://django-social-auth.readthedocs.org/en/latest/index.html，Facebook](http://django-social-auth.readthedocs.org/en/latest/index.html)后端详细信息位于[http://django-social-auth.readthedocs.org/en/latest/backends/ facebook.html](http://django-social-auth.readthedocs.org/en/latest/backends/facebook.html)。

# .net - 枚举作为实体框架5中的键在多对多连接上抛出错误

> ID：12220956
> 
> 赞同：25
> 
> 时间：2012-08-31T18:44:40.773
> 
> 标签：.net, entity-framework, enums, .net-4.5, entity-framework-5

好的，这有点冗长/晦涩，但是在我使用枚举作为表键并尝试查询表同时包含多个多对多相关实体的特定情况下，我遇到了一个奇怪的错误。

下面的示例代码中的错误是：

```
The type of the key field 'DietIs' is expected to be 'MvcApplication8.Models.DietIs', but the value provided is actually of type 'System.Int32'. 
```

在 .net 4.5 web 项目中，我有以下实体配置：

```
public enum DietIs {
    None,
    Kosher,
    Paleo,
    Vegetarian
}

public class Diet {

    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.None)]
    public DietIs DietIs { get; set; }

    public string Description { get; set; }
    public virtual ICollection<Recipe> Recipes { get; set; }
    public virtual ICollection<Menu> Menus { get; set; }
}

public class Recipe {
    public int Id { get; set; }
    public string Name { get; set; }
    public virtual ICollection<Diet> Diets { get; set; }
}

public class Menu {
    public int Id { get; set; }
    public string Name { get; set; }
    public virtual ICollection<Diet> Diets { get; set; }
}

public class EnumTestContextInit : DropCreateDatabaseAlways<EnumTestContext> {}

public class EnumTestContext : DbContext {
    public DbSet<Diet> Diets { get; set; }
    public DbSet<Menu> Menus { get; set; }
    public DbSet<Recipe> Recipes { get; set; }

    public EnumTestContext() : base("EnumTestContext") {
        Configuration.LazyLoadingEnabled = false;
        Configuration.ProxyCreationEnabled = false;
    }
} 
```

在 Global.asax.cs 文件中，我初始化数据库：

```
 Database.SetInitializer(new EnumTestContextInit());
        using (var context = new EnumTestContext()) {

            var noDiet = new Diet { DietIs = DietIs.None, Description = "Whatever you want" };
            var paleoDiet = new Diet { DietIs = DietIs.Paleo, Description = "Like paleolithic peoples" };
            var vegDiet = new Diet { DietIs = DietIs.Vegetarian, Description = "No meat" };

            context.Menus.Add(new Menu { Name = "Cheese burger with Fries Menu", Diets = new List<Diet> { noDiet } });
            context.Menus.Add(new Menu { Name = "Mammoth Steak Tartar with Nuts Menu", Diets = new List<Diet> { paleoDiet, noDiet } });
            context.Menus.Add(new Menu { Name = "Soy Cheese Pizza Menu", Diets = new List<Diet> { vegDiet, noDiet } });

            context.Recipes.Add(new Recipe {Name = "Cheese burger", Diets = new List<Diet> {noDiet}});
            context.Recipes.Add(new Recipe { Name = "Mammoth Steak Tartar", Diets = new List<Diet> { paleoDiet, noDiet} });
            context.Recipes.Add(new Recipe { Name = "Cheese Pizza", Diets = new List<Diet> { vegDiet, noDiet } });

            context.SaveChanges();
        } 
```

然后，我尝试查询数据库：

```
var context = new EnumTestContext();

        var dietsWithMenusAndRecipes = context.Diets
                  .Include(e => e.Menus)
                  .Include(e => e.Recipes)
                  .ToList(); 
```

我使用单个的其他查询包括加载预期数据而不会出现问题。上面的查询，有两个包含抛出上面的错误。在数据库中，我看到自动生成的连接表（MenuDiets 和 RecipeDiets），所有数据看起来都是正确的。同样，如上面的示例所示，我可以查询数据，但不能包含多个相关实体而不会引发错误。

如果我将最后一个查询更改为仅使用一个包含，我可以毫无问题地加载另一个表：

```
 var dietsWithMenusAndRecipes = context.Diets
                 .Include(e => e.Menus).ToList();

        foreach (var item in dietsWithMenusAndRecipes) {
            context.Entry(item).Collection(e => e.Recipes).Load();
            var rec = item.Recipes;
        } 
```

此外——尽管这不能满足我的用例，因为我想将表限制为枚举值，并且 EF 不支持唯一约束——如果我将 Diet 实体类更改为使用单独的标识键，这将起作用，而不是比枚举键：

```
 public int Id { get; set; }
    public DietIs DietIs { get; set; } 
```

我探索的另一个可能的解决方案是显式创建连接表（MenuDiets 和 RecipeDiets），以便将连接属性键键入为 Enum，但这仍然返回上述错误。

确实似乎是导致它窒息的多个包含。关于我是否在模型设置中做错了什么有什么想法吗？查询本身？实体框架中的错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T19:45:49.233

问题似乎在于`enum`.NET 中是一个类类型。根据[此页面](http://msdn.microsoft.com/en-us/library/system.enum.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-2)上的定义：

> 提供枚举的基类。

而这句话：

> 枚举是一组命名常量，其基础类型是任何整数类型。如果没有显式声明基础类型，则使用 Int32。Enum 是 .NET Framework 中所有枚举的基类。

是的，它定义了一组常量，其类型是整数类型，但是当您声明您的键时：

```
public DietIs DietIs { get; set; } 
```

您的键实际上是类类型而不是整数类型；在比较或分配整数类型的值时，您可能必须强制转换它。该页面提供了有关转换的示例：

> 您可以使用强制转换（在 C# 中）或转换（在 Visual Basic 中）运算符在枚举成员及其基础类型之间进行转换。下面的示例使用大小写或转换运算符执行从整数到枚举值以及从枚举值到整数的转换。

```
public enum ArrivalStatus { Late=-1, OnTime=0, Early=1 };

int value3 = 2;
ArrivalStatus status3 = (ArrivalStatus) value3;
int value4 = (int) status3; 
```

# sql-server - 带有子查询的 SQL 持久计算列

> ID：12220959
> 
> 赞同：0
> 
> 时间：2012-08-31T18:44:55.037
> 
> 标签：sql-server

我有三张桌子

表 1：**项目**

```
ItemID | DaysLastSold 
```

表2：**列表**

```
ItemID | ListingID 
```

表 3：**销售额**

```
ListingID | DateItemClosed 
```

我得到了这个查询：

```
SELECT min(DATEDIFF(day, DateItemClosed, getdate())) as DaysLastSold 
    from Sales 
    where QtySold > 0 
        and ListingID in (SELECT ListingID from Listings where ItemID = 8101 ) 
```

我要做的基本上是将此查询放入 Items 表中的 DaysLastSold 列中。因此，无论何时选择该列，它都会使用相邻列中的 ItemID 重新计算 DaysLastSold。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:35:30.290

如果您想保留该信息，您*可以*创建一个由计算值和 ItemID 组成的索引视图。显然，这不会是您原始表格中的一列。然后，您可以在需要信息时加入此视图。

就我个人而言，我可能会在你需要的时候内联。如果您担心性能，请在此处发布执行计划，我们也许可以提出一些建议。

# django - 在保存Django期间将参 数从部分表单传递给模型

> ID：12220961
> 
> 赞同：5
> 
> 时间：2012-08-31T18:45:25.450
> 
> 标签：django, django-models, django-forms

我有一个包含许多字段的模型，为此我创建了两个部分表单

```
#model
class Line_Settings(models.Model):
....
    line = models.ForeignKey(Line)
    All = models.BooleanField(default=False)
    Busy = models.BooleanField(default=False)
    MOH = models.CharField(max_length=100, blank=True, null=True)
    PLAR = models.CharField(max_length=100, blank=True, null=True)
....

    def save(self, commit = True, *args, **kwargs):
       ....
#Partial model form1
class General(ModelForm):
    class Meta:
        model = Line_Settings
        fields = ('MOH','PLAR')
#Partial model form2        
class Common(ModelForm):
    class Meta:
        model = Line_Settings
        fields = ('All','Busy') 
```

我已经覆盖了 Line_Settings 模型的保存以执行其他逻辑。

我需要能够将一些参数传递给覆盖的保存方法以在我的逻辑中使用。

在我看来，我用发布数据填写了两个部分表单，并且可以调用 save。

```
call_forwards = Common(request.POST, instance=line_settings)
general = General(request.POST, instance=line_settings) 
```

我需要像这样将参数传递给保存：

```
call_forwards.save(parameter="value")
general.save(parameter="value") 
```

我已经提到[将参数传递给自定义 save() 方法](https://stackoverflow.com/questions/2535435/passing-an-argument-to-a-custom-save-method)

如果我覆盖我的部分表单上的保存，我可以访问该参数。

```
# overwritten save of partial form
def save(self, parameter, commit=True):
     print("In save overwrite Partial form Common "+str(parameter))
     #how Can I pass this parameter to the model save overwirite?
     super(Common, self).save(commit) 
```

从部分形式，如何使参数达到我的原始模型（Line_Settings）保存覆盖？

这可以做到吗？提前感谢您的阅读！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T14:38:59.107

我能够通过在我的原始模型`__init__`方法中定义一个参数来实现这一点

```
def __init__(self, *args, **kwargs):
    self.parameter= None
    super(Line_Settings, self).__init__(*args, **kwargs) 
```

然后在部分形式中，我可以访问此参数并将其设置为保存期间传递的值

```
 def save(self, *args, **kwargs):
     self.instance.parameter = kwargs.pop('parameter', None)
     super(Common, self).save(*args, **kwargs) 
```

在我看来，我将保存称为：

```
common = Common(request.POST, instance=line_settings)
common.save(parameter="something") 
```

# ember.js - 为什么我的嵌入式 hasMany 关系未定义？

> ID：12220962
> 
> 赞同：4
> 
> 时间：2012-08-31T18:45:26.510
> 
> 标签：ember.js, ember-data

我正在使用 ember-data 的设备适配器加载 App.Structure 对象。这些对象嵌入了 App.Overlay 对象作为`hasMany`关系，如下所示：

```
App.Structure = DS.Model.extend({
  name: DS.attr('string'),
  // hash of overlay paths
  overlays: DS.hasMany('App.Overlay', { embedded: true }),
});

App.Overlay = DS.Model.extend({
  view: DS.attr('string'),
  path: DS.attr('string')
});

App.Overlay.FIXTURES = [];

App.Structure.FIXTURES = [{
  "id": 0,
  "name": "Test Structure",
  "overlays": [{
    "view": "Isometric",
    "path": "[elided to save space]"
  }],
}]; 
```

（请注意，空的固定装置数组是为了解决[这个问题](https://stackoverflow.com/q/12112279/306084)。）

现在我可以加载`App.Structure`，但我无法从中得到任何东西。看到[这个jsfiddle](http://jsfiddle.net/pjmorse/hA6VH/)；可以访问结构，并且它能够迭代`overlays`数组，但数组中的对象是空壳，其中没有任何内容。

这是一个控制台会话：

```
> currStructure = App.fixtureStore.findAll(App.Structure).get('firstObject');
Class
> currStructure.get('name');
"Test Structure"
> currStructure.get('overlays').get('length');
1
> var overlay = currStructure.get('overlays').get('firstObject');
undefined
> overlay instanceof App.Overlay;
true
> overlay.get('view');
null
> overlay.get('path');
null 
```

为什么这不起作用？

ETA：在@Kristaps 的回复之后，我更新了小提琴。现在第一个叠加层仍然只是一个空壳，但任何后续叠加层都不是。嗯？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T12:51:18.860

我猜这是因为您没有在覆盖对象中设置结构 ID 和在覆盖对象中的 belongsTo 关系。见小提琴 [http://jsfiddle.net/kristaps_petersons/REtNV/](http://jsfiddle.net/kristaps_petersons/REtNV/)

```
App.Structure = DS.Model.extend({
    id: DS.attr('number'),
    name: DS.attr('string'),
    overlays: DS.hasMany('App.Overlay', {embedded: true})
});

App.Overlay = DS.Model.extend({
    id: DS.attr('number'),
    vi: DS.attr('string'),
    pa: DS.attr('string'),
    structure: DS.belongsTo('App.Structure'),    
}); 
```

和固定装置：

```
App.Overlay.FIXTURES = [];

App.Structure.FIXTURES = [
    {
    "id": 0,
    "name": "Test Structure 0",
    "overlays": [{
        "id": 0,
        "structure_id": 0,
        "vi": "Overlay view 0.0",
        "pa": "Overlay path 0.0"},
    {
        "id": 1,
        "structure_id": 0,
        "vi": "Overlay view 0.1",
        "pa": "Overlay path 0.1"},
    {
        "id": 2,
        "structure_id": 0,                    
        "vi": "Overlay view 0.2",
        "pa": "Overlay path 0.2"}
                        ]},
{
    "id": 1,
    "name": "Test Structure 1",
    "overlays": [{
        "id": 3,        
        "structure_id": 1,
        "vi": "Overlay view 1.0",
        "pa": "Overlay path 1.0"},
    {
        "id": 4,
        "structure_id": 0,
        "vi": "Overlay view 1.1",
        "pa": "Overlay path 1.1"},
    {
        "id": 5,
        "structure_id": 0,                    
        "vi": "Overlay view 1.2",
        "pa": "Overlay path 1.2"}
                        ]},
{
    "id": 2,
    "name": "Test Structure 2"}
]; 
```

# php - PHP json_encode 问题

> ID：12220968
> 
> 赞同：0
> 
> 时间：2012-08-31T18:45:41.550
> 
> 标签：php, javascript, json, parse-platform

我有一堆值和一个 PHP 数组，我需要将其转换为 JSON 值，以便通过 CURL 发布到 parse.com

问题是 PHP 数组被转换为 JSON 对象（字符串作为键和值，而字符串只是值）

我最终得到

```
{"showtime":{"Parkne":"1348109940"}} 
```

而不是

```
{"showtime":{Parkne:"1348109940"}} 
```

并且 parse 抱怨这是一个对象而不是数组，因此不会接受它。

作为

```
{"showtime":{"Parkne":"1348109940"}} 
```

是一个 JSON 对象 ( `key = a string`)

有没有办法做到这一点`json_encode`？或者有什么解决办法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T18:47:57.577

这就是 JSON 规范：必须引用对象键。虽然您的第一个未引用版本是有效的 Javascript，但引用版本也是如此，并且两者在任何 Javascript 引擎中的解析方式相同。但在 JSON 中，必须引用键。[http://json.org](http://json.org)

* * *

跟进：

展示你如何定义你的数组，除非你上面的样本是你的数组。这一切都取决于您如何定义您正在编码的 PHP 结构。

```
// plain array with implicit numeric keying
php > $arr = array('hello', 'there');
php > echo json_encode($arr);
["hello","there"]   <--- array

// array with string keys, aka 'object' in json/javascript
php > $arr2 = array('hello' => 'there');
php > echo json_encode($arr2);
{"hello":"there"} <-- object

// array with explicit numeric keying
php > $arr3 = array(0 => 'hello', 1 => 'there');
php > echo json_encode($arr3);
["hello","there"]  <-- array

// array with mixed implicit/explicit numeric keying
php > $arr4 = array('hello', 1 => 'there');
php > echo json_encode($arr4);
["hello","there"] <-- array

// array with mixed numeric/string keying
php > $arr5 = array('hello' => 'there', 1 => 'foo');
php > echo json_encode($arr5);
{"hello":"there","1":"foo"}   <--object 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T18:56:13.387

盲目射击...我的印象是您的 PHP 数据结构不是您想要开始的。你可能有这个：

```
$data = array(
    'showtime' => array(
        'Parkne' => '1348109940'
    )
); 
```

...实际上需要这个：

```
$data = array(
    array(
        'showtime' => array(
            'Parkne' => '1348109940'
        )
    )
); 
```

随意编辑问题并提供预期输出的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T19:00:32.620

听起来您需要获取单个对象并将其包装在数组中。

尝试这个：

```
// Generate this however you normally would
$vals  = array('showtime' => array("Parkne" => "1348109940"));

$o = array(); // Wrap it up ...
$o[] = $vals; // ... in a regular array

$post_me = json_encode($o); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T18:56:26.503

您可以使用 json_encode 将数组转换为 JSON，假设您的数组不为空，您可以这样做

```
 $array=();
 $json = json_encode($array);
 echo $json; 
```

# twitter-bootstrap - Twitter Bootstrap，如何让折叠插件关闭打开的项目并在点击时打开新的项目

> ID：12220969
> 
> 赞同：4
> 
> 时间：2012-08-31T18:45:55.340
> 
> 标签：twitter-bootstrap, collapse

我在页面左侧有一个我认为是简单的 twtter 引导折叠项设置：http: [//papershare.ravennainteractive.com/single-item.html](http://papershare.ravennainteractive.com/single-item.html)

当您单击一个手风琴标题时，它会打开，但是当您单击另一个时，它也会打开那个手风琴标题，而不是关闭第一个并打开第二个。

我已将该站点升级到最新的引导 js 和 css。

如何让它在打开另一个时关闭打开的一个？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T18:58:19.747

结构需要（在伪代码中）

```
< class="accordion" id="myAccordion">
    < class="accordion-group">
        < class="accordion-header">
            <a data-parent="#myAccordion">
        < class="accordion-body">

    < class="accordion-group">
        < class="accordion-header">
            <a data-parent="#myAccordion">
        < class="accordion-body"> 
```

其中`accordion-group`代表将单独折叠的单独部分。切换手风琴组的链接中的`data-parent`类用于确定应关闭同一父级中的其他手风琴组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-28T09:58:00.510

如果您根据[引导折叠文档](http://getbootstrap.com/2.3.2/javascript.html#collapse)制作了 HTML 标记，则可以使用此复制/粘贴简单的 jquery 代码来实现此目的。

```
$(document).on('click', '.accordion-toggle', function(e) {
            event.preventDefault();

            $('#accordion').find('.accordion-body').collapse('hide');
            $(this).parent().next().collapse('show');
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-11T08:37:52.203

我被困在一个类似的问题上，但 data-parent 选项起初不起作用。

我的问题是我的页面上有两个面板组引用相同的 ID #accordion。解决方案是给每个组一个唯一的 id

```
<!-- Accordion 1 -->
< class="accordion" id="myAccordion">
    < class="accordion-group">
        < class="accordion-header">
            <a data-parent="#myAccordion">
        < class="accordion-body">

    < class="accordion-group">
        < class="accordion-header">
            <a data-parent="#myAccordion">
        < class="accordion-body">

<!-- Accordion 2 -->
< class="accordion" id="myAccordion-2">
    < class="accordion-group">
        < class="accordion-header">
            <a data-parent="#myAccordion-2">
        < class="accordion-body">

    < class="accordion-group">
        < class="accordion-header">
            <a data-parent="#myAccordion-2">
        < class="accordion-body"> 
```

回想起来很明显;-)

# python - Python：从 python 命名空间/包中导入所有内容

> ID：12220977
> 
> 赞同：2
> 
> 时间：2012-08-31T18:46:26.853
> 
> 标签：python, namespaces, package

全部。

我认为这可以很容易地回答，但事实并非如此。只要我一直在寻找答案，我就会一直认为我忽略了一些简单的事情。

我有一个具有以下包结构的 python 工作区：

```
 MyTestProject
        /src
           /TestProjectNamespace
              __init__.py
              Module_A.py
              Module_B.py

    SecondTestProject
        /src
           /SecondTestProjectNamespace
              __init__.py
              Module_1.py
              Module_2.py
              ...
              Module_10.py 
```

请注意，MyTestProjectNamespace 引用了 SecondTestProjectNamespace。

在 MyTestProjectNamespace 中，我需要导入 SecondTestProjectNamespace 中的所有内容。我可以使用以下语句一次导入一个模块：

```
 from SecondTestProjectNamespace.Module_A import *
    from SecondTestProjectNamespace.Module_B import * 
```

...但是如果 SecondTestProject 中有 50 个模块，则这是不切实际的。

Python 是否支持在命名空间/包中导入所有内容的方法？任何帮助，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:56:21.560

不可以。可以将 SecondTestProject 设置为自动导入其子模块中的所有内容，方法是放入代码`__init__.py`来执行`from ... import *`您提到的操作。`__import__`也可以使用函数和/或`imp`模块在某种程度上自动化。但是没有快速简便的方法来获取*未*以这种方式设置的包并使其以这种方式工作。

无论如何，这可能不是一个好主意。如果您有 50 个模块，将所有模块中的所有内容导入全局命名空间将导致名称激增，并且这些名称之间很可能会发生冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T19:01:12.223

是的，您可以使用 pkgutil 滚动它。

下面是一个示例，列出了 twisted 下的所有包（测试除外）并导入它们：

```
# -*- Mode: Python -*-
# vi:si:et:sw=4:sts=4:ts=4

import pkgutil
import twisted

for importer, modname, ispkg in pkgutil.walk_packages(
    path=twisted.__path__,
    prefix=twisted.__name__+'.',
    onerror=lambda x: None):
        # skip tests
        if modname.find('test') > -1: 
            continue
        print(modname)
        # gloss over import errors
        try:
            __import__(modname)
        except:
            print 'Failed importing', modname
            pass

# show that we actually imported all these, by showing one subpackage is imported
print twisted.python 
```

我不得不同意其他海报的明星进口是个坏主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T19:14:52.667

正如其他人所说 - 这可能不是一个好主意。但是有一些方法可以保留您的命名空间，从而避免命名冲突 - 并通过一次导入让包用户可以使用模块中的所有模块/子包。

假设我有一个名为“pack”的包，其中一个名为“a.py”的模块定义了一些“b”变量。我想做的就是：

```
>>> import pack
>>> pack.a.b
1 
```

做到这一点的一种方法是写`pack/__init__.py`一行 `import a`- 因此在您的情况下，您需要五十行这样的行，并保持它们是最新的。

没那么糟。

但是，[http](http://docs.python.org/tutorial/modules.html#importing-from-a-package) ://docs.python.org/tutorial/modules.html#importing-from-a-package 上的文档说，如果您的文件中有一个字符串列表`__all__`，则`__init__.py`所有模块/子包名称都在该列表是在一个时导入的`from pack import *`

仅此一项就可以完成一半 - 但需要您的包的用户执行不推荐的“从 x 导入 *”表单。

`__init__.py`但是——在定义变量之后，你可以在自己内部执行“... import *” `__all__`——所以你所要做的就是保持`__all__`最新：

像`TestProjectNamespace/__init__.py`这样：

```
__all__ = ["Module_A", "Module_B", ...]
from TestProjectNamespace import * 
```

您的用户将在导入 TestProjectNamespace 时获得 TestProjectNamespace.Module_A （和其他）。

而且，当然 - 你可以自动创建`__all__`- 毕竟它只是一个变量 - 但我不建议这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T18:54:03.600

> Python 是否支持在命名空间/包中导入所有内容的方法？

不，包不是超级模块——它是组合在一起的模块的集合。

* * *

至少部分原因是确定文件夹中“所有内容”的含义并非易事：存在网络驱动器、软链接、硬链接等问题......

# java - 是否可以将 jUnit 测试配置为仅在联机时运行？

> ID：12220978
> 
> 赞同：4
> 
> 时间：2012-08-31T18:46:30.067
> 
> 标签：java, junit

当我不在网络上访问共享资源时，运行某些测试毫无意义。离线运行这些测试将导致测试失败和异常。

是否可以将给定的测试设置为仅在满足某些条件时才运行，例如，当有网络连接时？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T02:57:55.293

这听起来像是一个[假设](http://junit.sourceforge.net/javadoc/org/junit/Assume.html)的工作。

```
@Test public void someTestThatNeedsNetworkConnectivity() {
    assumeTrue(thereIsNetworkConnectivity());

    // ...
} 
```

# java - VLC (J) 音频音高控制

> ID：12220980
> 
> 赞同：1
> 
> 时间：2012-08-31T18:46:32.353
> 
> 标签：java, swing, audio, pitch, vlcj

我目前正在使用 VLCJ 开发简单的视频播放器。谁能给我一些关于用它改变音频音高的线索？可能吗？

我已经搜索但找不到正确的关键字，我需要的是 vlcj（或任何）的一些控制（方法/功能）来增加声音，使它听起来像孩子的声音，或者降低声音，像一个非常老人的声音.

提前致谢。

注意：仍在寻找谷歌，但没有发现任何关于 vlc 的信息。我想要的是关于[http://www.screamingbee.com/support/morphdoc/MorphDocPitchTimbre.aspx中解释的“音色”](http://www.screamingbee.com/support/morphdoc/MorphDocPitchTimbre.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-04T19:44:20.797

如果您只对播放音频感兴趣（您不关心同时显示任何视频），那么 vlcj 2.4.0 及更高版本提供了一个所谓的“直接”音频播放器组件。

使用此组件，您的 Java 应用程序可以直接访问本机音频样本缓冲区。您可以在这些样本上运行任何您想要的算法，然后通过 JavaSound 或其他一些 API 播放修改后的样本。

vlcj 发行版中包含一个示例，展示了如何使用此组件通过 JavaSound 播放：

[https://github.com/caprica/vlcj/tree/vlcj-2.4.1/src/test/java/uk/co/caprica/vlcj/test/directaudio](https://github.com/caprica/vlcj/tree/vlcj-2.4.1/src/test/java/uk/co/caprica/vlcj/test/directaudio)

该示例没有展示如何更改音频的音高，但它确实展示了如何使用直接音频播放器。

# javascript - jquery noconflict 用于电子邮件垃圾邮件保护

> ID：12220981
> 
> 赞同：0
> 
> 时间：2012-08-31T18:46:41.057
> 
> 标签：javascript, jquery

就在多个函数上运行 jquery noconflict 设置而言，我遇到了一些冲突，因此我决定通过针对我正在测试的函数之一测试 noconflict 来隔离问题。

我在放置 s$ 的位置上尝试了多种变体，但似乎没有一个配置有效。我可以完成这项工作的唯一方法是将变量保留为-> var $，并将所有因变量保留为此设置，但是我需要找出如何使用唯一变量来使其工作？

也许我的语法也有问题？

```
var s$ = jQuery.noConflict();

s$.fn.emailSpamProtection = function(className) {

return s$(this).find("." + className).each(function() {
var $email = s$(this);
var address = $email.text()
.replace(/\s*\[at\]\s*/, '@')
.replace(/\s*\[dot\]\s*/g, '.');
$email.html('<a href="mailto:' + address + '">'+ address +'</a>');
    });
}; 
```

这是我尝试过的修改后的脚本。

```
jQuery.noConflict();

(function($){
$.fn.emailSpamProtection = function(className) {
 return this.find("." + className).each(function() {
        var $email = this;
        var address = $email.text()
        .replace(/\s*\[at\]\s*/, '@')
        .replace(/\s*\[dot\]\s*/g, '.');
        $email.html('<a href="mailto:' + address + '">'+ address +'</a>');
    });
};
})(jQuery); 
```

我把它放到了我的 .html 主页中

```
jQuery(function($){

    //Note, you can use $(...) because you are wrapping everything within a jQuery function
    $("body").emailSpamProtection("email");

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:00:04.507

我认为您没有正确使用 noConflict 属性。这就是我将如何使用它：

```
//Establish jQuery noConflict mode.
jQuery.noConflict();

//Define your jQuery plugins/functions
(function($){
$.fn.emailSpamProtection = function(className) {
 return this.find("." + className).each(function() {
        var $email = this;
        var address = $email.text()
        .replace(/\s*\[at\]\s*/, '@')
        .replace(/\s*\[dot\]\s*/g, '.');
        $email.html('<a href="mailto:' + address + '">'+ address +'</a>');
    });
};
})(jQuery);

// Use jQuery with $(...)
jQuery(function($){

    //Note, you can use $(...) because you are wrapping everything within a jQuery function
    $('#myElement').emailSpamProtection();

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T04:57:12.240

弄清楚了。在做了一些试验和错误之后，我能够通过将变量翻转`$j`为而不是`j$`. 这是我的最终结果。

```
//JQuery Section

var $j=jQuery.noConflict();

  //Hiding other scripts that were included in this application.js file//

//email spam protection - Example Markup: <span class="email">name[at]domain[dot]com</span>
$j.fn.emailSpamProtection = function(className) {

return $j(this).find("." + className).each(function() {
var email = $j(this);
var address = email.text()
.replace(/\s*\[at\]\s*/, '@')
.replace(/\s*\[dot\]\s*/g, '.');
email.html('<a href="mailto:' + address + '">'+ address +'</a>');
    });
};

});

//Script added to the presentation page (html,php,whatever)

<script>
$j(function() {

  $j("body").emailSpamProtection("email"); 

});
</script> 
```

# iphone - “由于一般错误，此时无法处理应用程序 Info.plist 验证”

> ID：12220983
> 
> 赞同：2
> 
> 时间：2012-08-31T18:46:49.623
> 
> 标签：iphone, xcode, ios5

> **可能重复：**
> [由于一般错误 (1095)，此时无法处理应用程序 info.plist 验证](https://stackoverflow.com/questions/8353049/unable-to-process-application-info-plist-validation-at-this-time-due-to-a-genera)

对于应用程序加载器和/或 Xcode 验证，是否还有人遇到“由于一般错误，此时无法处理应用程序 Info.plist 验证”？

# django - django + nginx + fastcgi - 如何保持网络服务器正常运行？

> ID：12220984
> 
> 赞同：0
> 
> 时间：2012-08-31T18:46:54.987
> 
> 标签：django, nginx, fastcgi

我正在运行 nginx 作为 django 的 fastcgi 的反向代理。我正在使用以下命令（稍后将切换到使用套接字以避免 tcp 开销）：

```
python /home/ubuntu/system/sites/manage.py runfcgi host=127.0.0.1 port=8080 pidfile=/home/ubuntu/system/logs/fastcgi.pid maxspare=2 
```

我对 django 不太熟悉，但是如何在进行更改后重新加载我的项目？我对views.py 文件进行了一些更改，但是网站并没有根据这些更改进行更新，所以我认为正在进行一些缓存。

# iphone - AFNetworking - 如何设置在超时时重试的请求？

> ID：12220986
> 
> 赞同：23
> 
> 时间：2012-08-31T18:47:02.017
> 
> 标签：iphone, ios, ipad, asihttprequest, afnetworking

我最近从 ASIHTTPRequest 迁移到了 AFNetworking，这很棒。但是，我正在连接的服务器存在一些问题，有时会导致我的请求超时。使用 ASIHTTPRequest 时，可以使用以下选择器在超时的情况下设置请求的重试计数

```
-setNumberOfTimesToRetryOnTimeout: 
```

这可以在这篇文章中进一步引用，[可以重试 ASIHTTPRequest 吗？](https://stackoverflow.com/questions/6062178/can-an-asihttprequest-be-retried)

如果您不熟悉，这是 AFNetworking [https://github.com/AFNetworking/AFNetworking#readme](https://github.com/AFNetworking/AFNetworking#readme)

**我在 AFNetworking 中找不到等效的 api，有没有人找到在使用 AFNetworking 超时的情况下重试网络请求的解决方案？**

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-09-06T23:26:49.540

AFNetworking 的开发人员 Matt Thompson 很友好地为我回答了这个问题。下面是解释解决方案的 github 链接。

[https://github.com/AFNetworking/AFNetworking/issues/393](https://github.com/AFNetworking/AFNetworking/issues/393)

基本上，AFNetworking 不支持此功能。由开发人员根据具体情况实施，如下所示（取自 Matt Thompson 在 github 上的回答）

```
- (void)downloadFileRetryingNumberOfTimes:(NSUInteger)ntimes 
                              success:(void (^)(id responseObject))success 
                              failure:(void (^)(NSError *error))failure
{
    if (ntimes <= 0) {
        if (failure) {
            NSError *error = ...;
            failure(error);
        }
    } else {
        [self getPath:@"/path/to/file" parameters:nil success:^(AFHTTPRequestOperation *operation, id responseObject) {
            if (success) {
                success(...);
            }
        } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
            [self downloadFileRetryingNumberOfTimes:ntimes - 1 success:success failure:failure];
        }];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-07T08:53:17.453

我在我的 ApiClient 类中实现了私有方法：

```
- (void)sendRequest:(NSURLRequest *)request successBlock:(void (^)(AFHTTPRequestOperation *operation, id responseObject))successBlock failureBlock:(void (^)(AFHTTPRequestOperation *operation, NSError *error))failureBlock
{
    __block NSUInteger numberOfRetries = 3;
    __block __weak void (^weakSendRequestBlock)(void);
    void (^sendRequestBlock)(void);
    weakSendRequestBlock = sendRequestBlock = ^{
        __strong typeof (weakSendRequestBlock)strongSendRequestBlock = weakSendRequestBlock;
        numberOfRetries--;

        AFHTTPRequestOperation *operation = [self.httpManager HTTPRequestOperationWithRequest:request success:successBlock failure:^(AFHTTPRequestOperation *operation, NSError *error) {
            NSInteger statusCode = [[[error userInfo] objectForKey:AFNetworkingOperationFailingURLResponseErrorKey] statusCode];

            if (numberOfRetries > 0 && (statusCode == 500 || statusCode == 502 || statusCode == 503 || statusCode == 0)) {
                dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 2 * NSEC_PER_SEC), dispatch_get_main_queue(), ^{
                    strongSendRequestBlock();
                });
            } else {
                if (failureBlock) {
                    failureBlock(operation, error);
                }
            }
        }];

        [self.httpManager.operationQueue addOperation:operation];
    };

    sendRequestBlock();
} 
```

使用示例：

```
- (void)getSomeDetails:(DictionaryResultBlock)block
    {
        if (!block) {
            return;
        }

        NSString *urlString = @"your url string";
        NSMutableURLRequest *request = [self.httpManager.requestSerializer requestWithMethod:@"POST" URLString:[[NSURL URLWithString:urlString relativeToURL:self.defaultUrl] absoluteString] parameters:nil error:nil];

        // Configure you request here
       [request setValue:version forHTTPHeaderField:@"client-version"];

        NSMutableDictionary *bodyParams = @{};   
        [request setHTTPBody:[NSJSONSerialization dataWithJSONObject:bodyParams options:0 error:nil]];

        [self sendRequest:request successBlock:^(AFHTTPRequestOperation *operation, id responseObject) {
            id response = [NSJSONSerialization JSONObjectWithData:responseObject options:0 error:nil];
            block(response, nil);
        } failureBlock:^(AFHTTPRequestOperation *operation, NSError *error) {
            block(nil, error);
        }];
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-26T23:34:17.257

就我而言，我经常需要重试功能，所以我想出了这个**重试策略**类别，它可以帮助你使用**[AFNetworking+RetryPolicy](https://github.com/kubatru/AFNetworking-RetryPolicy)**

对于**AFNetworking 3.0**，它可以很好地发挥作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-07T10:04:27.037

根据您的回答，您可以通过使用将块作为参数的块来做一些更通用（和棘手）的事情：

```
typedef void (^CallbackBlock)(NSError* error, NSObject* response);
- (void) performBlock:(void (^)(CallbackBlock callback)) blockToExecute retryingNumberOfTimes:(NSUInteger)ntimes onCompletion:(void (^)(NSError* error, NSObject* response)) onCompletion {
    blockToExecute(^(NSError* error, NSObject* response){
        if (error == nil) {
            onCompletion(nil, response);
        } else {
            if (ntimes <= 0) {
                if (onCompletion) {
                    onCompletion(error, nil);
                }
            } else {
                [self performBlock:blockToExecute retryingNumberOfTimes:(ntimes - 1) onCompletion:onCompletion];
            }
        };
    });
} 
```

然后围绕您的异步 HTTP 请求，如下所示：

```
[self performBlock:^(CallbackBlock callback) {

        [...]
        AFHTTPRequestOperationManager *manager = [WSManager getHTTPRequestOperationManager];
        [manager POST:base parameters:parameters success:^(AFHTTPRequestOperation *operation, id responseObject) {

            dispatch_async(dispatch_get_main_queue(), ^(void){
                    if (callback) {
                        callback(nil, responseObject);
                    }
                });

            } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                if (callback) {
                    NSError* errorCode = [[NSError alloc] initWithDomain:AppErrorDomain code:[operation.response statusCode] userInfo:@{ NSLocalizedDescriptionKey :error.localizedDescription}];
                    callback(errorCode, nil);
                }
            }];

    } retryingNumberOfTimes:5 onCompletion:^(NSError *error,  NSObject* response) {
        //everything done
    }]; 
```

这样，重试等待 HTTP 请求完成，您不必在每个请求方法中实现重试循环。

# c++ - 来自同一类的 C++ 方法调用

> ID：12220987
> 
> 赞同：-5
> 
> 时间：2012-08-31T18:47:05.157
> 
> 标签：c++

在 C++ 中，我希望能够在不创建整个类的对象的情况下调用同一个类中的方法。这个类很大，我不想为一个对象创建一个巨大的内存位置。我习惯用 C# 编程。

在 C# 中我可以做到这一点

```
class test()
{
 private void A()
 {
    B();
 }

 private void B()
 {
    doSomething;
 }
} 
```

在 C++ 中，我觉得我必须这样做。

```
class test()
{
  public:
         static void A();
         void B();
};

 void test::A()
 {
    test t;
    t.B();
 }

 void test::B()
 {
    doSomething;
 }
} 
```

我不想让 B() 成为静态的，也不想创建测试对象，因为实际上我的类比这大得多，并且创建类的对象会使用我不想使用的内存。

有没有办法可以在 C++ 中完成我在 C# 中可以完成的任务？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T18:50:16.310

不，如果 B 需要一个对象，你必须给它一个对象。如果 B 不需要对象，请声明它`static`。C# 也不例外——在您的示例中，`A`它不是静态的，因此对象已经存在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T18:50:09.487

```
 static void A();
     void B(); 
```

您根本不能使用`static`函数来调用非静态函数。

**解决方案**：也标记`B`为`static`（如果它不依赖于当前对象），因此您不必创建新对象。否则我认为`A`应该是非静态的。

# c# - 你如何将模型从编辑器传递到控制器中？（使用 asp.net）

> ID：12220989
> 
> 赞同：0
> 
> 时间：2012-08-31T18:47:12.913
> 
> 标签：c#, .net, asp.net-mvc, editorfor

```
@model mymodelsnamespace

    @using (Html.BeginForm("MyMethodName", "MyContollerName", FormMethod.Post)) 
    {
         @Html.EditorFor(m => Model, "Submit", new { multiple = true }) 
        <input type="submit" value="Submit" />
    } 
```

我知道我要编写的代码将接近上面的内容

我如何将更新后的模型传递给 MyMethodName 我可以继续在我的控制器中操作它吗？

请提供 MyMethodName 的签名和 cshtml 以将模型提供给控制器中的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:49:23.233

如果将此代码添加到控制器，它应该可以工作。

```
[HttpPost]
public ActionResult MyMethodName (YourModel model)
{
    ... some code here.

} 
```

您可能会发现 Model-View-ViewModel 模式很有趣。

# google-chrome - 即使使用 HTTP 无缓存标头，Chrome 也会进行缓存

> ID：12220998
> 
> 赞同：6
> 
> 时间：2012-08-31T18:47:44.003
> 
> 标签：google-chrome, browser-cache, cache-control

我正在尝试提供配置了 HTTP 标头的 PHP 文件输出，因此不会从 Chrome 中的缓存中提供内容。

如果我去开发工具（在 Chrome 中），并标记“禁用缓存”选项，那么它就可以工作。

但我不想依赖它，我希望我可以设置 HTTP 标头，以便我可以强制 Chrome 每次都重新加载页面。

这是我当前尝试的屏幕截图，请注意红色标记。

![HTTP 标头](../Images/54166bb20a9565806f4246dd9eff0fcd.png)

您能否提供好的文档或我必须为此声明哪些标题？

提前致谢。

### 编辑

所以我也找到了另一个回复：[Chrome 缓存就像一个疯狂的浏览器](https://stackoverflow.com/questions/6576468/chrome-caching-like-a-mad-browser)，但我记得有人告诉我 Chrome 需要特殊的标题`Cache-Control`，所以我会保留这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T20:13:03.590

Web 浏览器可以缓存具有相同请求参数的 AJAX 请求。为了变通解决此问题，请使用更改的查询字符串。一个示例是使用以秒为单位的日期作为查询参数。

# mobile - 移动视口不起作用？

> ID：12220999
> 
> 赞同：0
> 
> 时间：2012-08-31T18:47:45.650
> 
> 标签：mobile, viewport

这是我的整个 HTML 文件：

```
<!DOCTYPE html>
<html>
<head>
    <title>Test</title>
    <meta name="viewport" content="width=232, user-scalable=no" />
    <style>
        body {margin:0;width:200px;border:1px solid black;padding:15px;background:#ccff99;color:#004000;font-family:sans-serif;font-size:6pt}
    </style>
</head>
<body>
    <h1>Test page</h1>
</body>
</html> 
```

如果我理解正确，body 应该是视口 ( `200+(1+15)*2 = 232`) 的全宽，那么为什么页面以 360 的视口宽度呈现呢？我期望的是`device-width`，不是绝对的`232`...