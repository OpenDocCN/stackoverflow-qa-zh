# StackOverflow 问答 11296000-11296999

# javascript - 允许从 javascript 跨源到 glassfish 上的肥皂网络服务

> ID：11296000
> 
> 赞同：0
> 
> 时间：2012-07-02T14:47:03.693
> 
> 标签：javascript, soap, glassfish, xmlhttprequest, xss

我正在尝试使用来自 javascript 的 SOAP-webservice。服务器和客户端都在同一个局域网中，我控制两者。

当我尝试发送请求时，我得到：

```
XMLHttpRequest cannot load . 
Origin  is not allowed by Access-Control-Allow-Origin. 
```

这可能是因为跨域脚本？我想在服务器端解决这个问题。这意味着：在传出消息上添加额外的标题：Access-Control-Allow-Origin：*

如何添加这些响应标头？我正在使用 Netbeans 管理 Glassfish 中的 Web 服务

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:41:55.193

错误信息中有提示。在不同主机上运行的服务器需要返回 Access-contol-allow-origin 标头，可能还需要返回 Access-control-include-credential。请注意，这仅适用于较新的浏览器，因此如果您的网络中有较旧的浏览器，您可能需要查看代理或使用 eadyXDM 之类的东西。

顺便说一句，使用“跨源”而不是跨站点脚本”。跨站点脚本是一个漏洞，使用这个术语会使问题有点混乱。

# apache - 与重写规则作斗争

> ID：11296001
> 
> 赞同：0
> 
> 时间：2012-07-02T14:47:06.483
> 
> 标签：apache, mod-rewrite, url-rewriting

我正在为 apache 的特定重写规则而苦苦挣扎。更准确地说，我正在努力理解它有什么问题。

我需要像这样重写网址：

```
http://www.mysite.com/section/venue_info/123/name
or
http://www.mysite.com/section/venue_info/123/
or
http://www.mysite.com/section/venue_info/123

         |
         V

http://www.mysite.com/section/venue_info.php?id=123 
```

请注意，这`section`是等式中的一个变量。在实时站点中，它可以是多个值之一，因此无论提供什么部分，我都需要使用该部分。我在我的 apache 配置中有这个：

```
DocumentRoot /var/www/site/trunk/publish
<Directory /var/www/site/publish/trunk/>
    Options -Indexes +FollowSymLinks 
    AllowOverride None
    Order allow,deny
    Allow from all

    RewriteEngine on
    RewriteBase /
    RewriteRule ^\/(\w+)\/venue_info\/(\d+)(\/.+|\/?)$ $1/venue_info.php?id=$2
</Directory> 
```

然而这不匹配。我尝试了各种变化，但没有运气。这里是什么`RewriteRule`地方？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:59:05.087

好的，想通了！

显然，指令在元素`mod_rewrite`内部不起作用。`<Directory>`一旦我将它们放入`<Location>`块中，一切正常。所以现在我的 apache 配置看起来像这样：

```
DocumentRoot /var/www/site/trunk/publish
<Directory /var/www/site/publish/trunk/>
    Options -Indexes +FollowSymLinks 
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory>

<Location "/">
    RewriteEngine on
    RewriteBase /
    RewriteRule ^\/(\w+)\/venue_info\/(\d+)(\/.+|\/?)$ $1/venue_info.php?id=$2
</Location> 
```

一切正常。

# ruby-on-rails - Accept_nested_attributes_for 具有复杂的关联

> ID：11296006
> 
> 赞同：-1
> 
> 时间：2012-07-02T14:47:23.213
> 
> 标签：ruby-on-rails

我在我的一个 Rails 应用程序中使用了accepts_nested_attributes_for。我有三个模型 :album has_many :photo 和每个 :photo has_and_belongs_to_many :tag。用户可以使用回形针和 jquery.multifile.js 在相册中添加更多照片。一切正常，但主要问题是未正确创建哈希。

```
album => {:name => "", :body => "", :photos_attributes => {"tags_attributes" => {:name => "abc"}, "photo" => {"file" => "tempfile"}}} 
```

但是我需要。

```
album => {:name => "", :body => "", :photos_attributes => "photo" => {"file" => "tempfile", "tags_attributes" => {:name => "abc"}}}} 
```

我的观点是：请考虑图库 => 相册和附件 => 照片

```
<%= form_for(@gallery, :html => {:multipart => true}) do |f| %>
    <div id = "gallery_name_formField">
        <%= f.label "Gallery Name:" %><br />
        <%= f.text_field :name, :name => "gallery[name]" %><br />
    </div>
    <div id = "gallery_body_formField">
        <%= f.label "Gallery Description:" %><br />
        <%= f.text_area :body, :name => "gallery[body]" %><br />
    </div>
    <%= f.fields_for :attachments do |af| %>
        <div id = "gallery_file_formField">
            <%= af.label "Select The Attachment:" %><br />
            <%= af.file_field(:attachment, :name => "gallery[attachments_attributes][][attachment]")%>
        </div>
        <div id="tags">
            <%= af.fields_for :tags do |tf| %>
                <%= tf.label :name, "Tag:" %><br />
                <%= tf.text_field :name, :id => "mySingleField_0", :name => "gallery[attachments_attributes][][tags_attributes][][name]" %>
            <% end %>
        </div>
    <% end %>

    <div class="attachment_submit_formField">
        <%= f.submit(:id => "create_gallery") %>
    </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T01:11:11.040

您是否尝试过使用嵌套形式的 gem？[试试看](https://github.com/ryanb/nested_form/)

拥有多个嵌套表单的非常简单的方法。

这个对我有用。

# python - 按声明顺序遍历类成员

> ID：11296010
> 
> 赞同：14
> 
> 时间：2012-07-02T14:47:34.360
> 
> 标签：python

我在编写一个将类映射到简单表视图的小 GUI 库时遇到了这个问题。某种类型的每个类成员 = 列，列的顺序很重要。但...

```
class Person(object):

    name = None
    date_of_birth = None
    nationality = None
    gender = None
    address = None
    comment = None

for member in Person.__dict__.iteritems():
    if not member[1]:
        print member[0] 
```

输出：

```
comment
date_of_birth
name
address
gender
nationality
... 
```

呃，奥德都搞混了……期望的输出：

```
name
date_of_birth
nationality
gender
address
comment 
```

有没有办法在不维护额外`OrderedDict()`列的情况下做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T15:20:49.053

在 Python3 中，通过使用[PEP3115](http://www.python.org/dev/peps/pep-3115/)是可能的，它允许您在构建类时覆盖元类中的 dict 类型（例如，使用跟踪插入顺序的 OrderedDict）。这是这种方法的一个实现：

```
class OrderedMeta(type):
    @classmethod
    def __prepare__(metacls, name, bases): 
        return OrderedDict()

    def __new__(cls, name, bases, clsdict):
        c = type.__new__(cls, name, bases, clsdict)
        c._orderedKeys = clsdict.keys()
        return c

class Person(metaclass=OrderedMeta):
    name = None
    date_of_birth = None
    nationality = None
    gender = None
    address = None
    comment = None

for member in Person._orderedKeys:
    if not getattr(Person, member):
        print(member) 
```

在 Python2 中，这要复杂得多。这将是可以通过一些相当 hacky 的东西来实现的，比如自省源代码，并从 AST 中计算出定义顺序，但这可能比它的价值要麻烦得多。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T14:55:55.683

如果您只需要变量的集合，也许您应该使用 a[`namedtuple`](http://docs.python.org/library/collections.html#collections.namedtuple)来代替。它还维护字段的顺序（因为它是一个元组）。

```
from collections import namedtuple
Person = namedtuple('Person', ('name',
                               'data_of_birth',
                               'nationality',
                               'gender',
                               'address',
                               'comment'))
print Person._fields 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T19:19:11.117

好的，这本身不是答案，而是仅在原始问题的上下文中有效的解决方法（“**特定类型**的每个类成员 [这是一个实例] = 列，并且列的顺序很重要”）。`_count`解决方案是在类中引入一个类变量`CertainType`，并在每次实例化时递增它。之后，CertainType 的所有类成员都被打包到一个列表中，该列表使用排序`key=attrgetter('_count')`

P.S. Omitting that "which is an instance" part was a mistake on my part and it has limited range of solutions considerably. Sorry for that.

# php - 选择了哪个复选框并分配了一个值

> ID：11296011
> 
> 赞同：0
> 
> 时间：2012-07-02T14:47:35.487
> 
> 标签：php

我正在尝试创建逻辑以查看选择了哪个复选框（在 5 个可能的复选框中），如果选中，则为其分配值 0。如果未选择，我将为其分配值 1。正在进行的代码片段突出显示这但是在我的 else 语句中引发了解析错误，我无法弄清楚原因。//检查哪个复选框被标记为正确答案

```
//Correct answer variables
$chkBox1 = 'unchecked';
$chkBox2 = 'unchecked';
$chkBox3 = 'unchecked';
$chkBox4 = 'unchecked';
$chkBox5 = 'unchecked';

if (isset($_POST['chkBox1'])) {

if ($chkBox1 == 'chkBox1Selected') {
$chkBox1 = '0';
                }
else{
$chkBox1 = '1';
}
}//End of chkBox1Selected logic 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:57:09.903

您不了解复选框的工作原理。如果在发布前取消选中复选框，则*不会*在发布时设置它。

因此，您的代码中唯一存在的条件*是*每个值都将显示为`1`，因为它们不能被覆盖。

拿这个片段试试看。它动态循环您需要的变量数量，并根据提交的值分配值。

```
$_POST['chkBox4'] = 'test';

for( $i = 1; $i <= 5; $i++ )
{
    $name = 'chkBox' . $i;
    $$name = !isset( $_POST[$name] ) ? 0 : $_POST[$name];
}

print $chkBox2 . ' // '. $chkBox4; 
```

[http://codepad.org/51RotnCf](http://codepad.org/51RotnCf)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-02T16:30:50.447

好的，我从语法的角度来看它可以工作，但是现在无论选择什么，它仍然为所有复选框分配值 1，而不是将选定的复选框更改为值 0。这是正确的新代码从语法的角度来看，但无论如何默认为 1：

//检查哪个复选框被标记为正确答案

```
//Correct answer variables
$chkBox1 = '1';
$chkBox2 = '1';
$chkBox3 = '1';
$chkBox4 = '1';
$chkBox5 = '1';

if (isset($_POST['chkBox1'])) {

if ($chkBox1 == 'chkBox1Selected') {
$chkBox1 = '0';
}

}//End of chkBox1Selected logic

if (isset($_POST['chkBox2'])) {

if ($chkBox2 == 'chkBox2Selected') {
$chkBox2 = '0';
}

}//End of chkBox2Selected logic

if (isset($_POST['chkBox3'])) {

if ($chkBox3 == 'chkBox3Selected') {
$chkBox3 = '0';
}

}//End of chkBox3Selected logic

if (isset($_POST['chkBox4'])) {

if ($chkBox4 == 'chkBox4Selected') {
$chkBox4 = '0';
}

}//End of chkBox4Selected logic

if (isset($_POST['chkBox5'])) {

if ($chkBox5 == 'chkBox5Selected') {
$chkBox5 = '0';
}

}//End of chkBox5Selected logic 
```

# php - 显示数据库中的用户信息

> ID：11296014
> 
> 赞同：0
> 
> 时间：2012-07-02T14:47:43.517
> 
> 标签：php, mysql

我正在尝试创建一种方法来从数据库中调用信息以供用户查看。例如他们登录并查看他们的注册信息。我有这个

```
session_start();
if($_SESSION['id'])
$result = mysql_query("SELECT * FROM User WHERE `id` = $_SESSION[id]")
or die(mysql_error());  

 while($row = mysql_fetch_array( $result )) {
 echo '<b>First Name:</b>' .$row['fname'];
 echo '<br>';
 echo '<b>Last Name:</b>' .$row['lname'];
 } 
```

但什么也没有出现。我的数据库名称是 megan，表是用户，我想要显示的字段是名字 (fname) 和姓氏 (lname)。有人可以指出我正确的方向。先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:50:23.970

错误的数组索引。

```
$result = mysql_query("SELECT * FROM User WHERE `id` = " . $_SESSION['id']) 
```

您应该打开 PHP 错误显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:51:08.463

先改这个，

```
if(isset($_SESSION['id'])) 
```

因为您必须检查会话是否设置正确然后进行查询，

然后sql改成这个，

```
$result = mysql_query("SELECT * FROM User WHERE `id` = ".$_SESSION['id']) 
```

# sql-server - 检测并手动设置复制

> ID：11296015
> 
> 赞同：1
> 
> 时间：2012-07-02T14:47:51.123
> 
> 标签：sql-server, replication

最近我们为一个客户端安装了一个新的 Sql Server 2008 服务器，我们不得不为他们移动所有的数据库。显然，他们忘记了一个使用本地 Sql 2000 Desktop Edition 实例进行复制的应用程序。现在我们正试图让复制再次运行。

目前我们收到错误：服务器“...”未配置为分发服务器。

2个问题：

1.  有没有办法通过查看数据库模式来检测使用的复制类型？
2.  我猜我们不需要再次运行复制向导，因为这会更改应该已经可以的数据库模式。我们需要做什么来手动连接所有东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T19:08:04.133

显然，您进行了全新的 SQL Server 安装，而不是升级，这本来是推荐的方法。

看来您现在可以使用两种主要类型的复制：合并复制和事务复制（请参阅[本文](http://technet.microsoft.com/en-us/library/ms143241%28v=sql.100%29.aspx)）

**由于您有全新安装，因此必须**从头开始创建出版物。我建议在设置复制时遵循通常的步骤：

1.  如果您的订阅者还需要进行架构或数据修改，请选择**合并复制**。如果您的订阅者是只读的，或者您不需要在那里更改架构/数据，请选择**事务复制**。
2.  在 SQL Server 2008 中创建您的发布。分发者也应该是此实例（因为不同版本的 SQL Server 之间的复制规则 - 分发者必须不早于发布者）。选择您的文章、快照代理计划、安全设置。
3.  初始化快照。
4.  重新创建您的 MSDE 2000 订阅。请注意，所有代理都应在分发服务器上运行。

您必须弄清楚您的安全设置。尤其是您的订阅者如何连接到发布者（如果在域中，SQL 凭据或集成安全性）。

因此，重新创建您的出版物应该不会很难。

如果您之前有合并复制设置，那么真正的问题可能是订阅者处的数据尚未上传到当时的发布者。所以你有一堆订阅者都有自己的修改。在这种情况下，您要么丢弃数据，要么手动备份每个订阅者并在订阅初始化后对其进行同步。

# google-api - 在 Google 电子钱包中生成 jwt

> ID：11296018
> 
> 赞同：0
> 
> 时间：2012-07-02T14:47:59.430
> 
> 标签：google-api, android-pay

我不明白他们如何在[教程 #1](https://developers.google.com/in-app-payments/docs/tutorial#1)中生成 jwt 。

它是对 JavaScript 函数的调用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-18T05:51:05.150

老实说，图书馆链接对我来说也没有完全联系起来。尤其是当您从需要 10 分钟设置的 Google Checkout 转到需要 JSon/JWT 知识的 Google Wallet 时。

因此，我转而访问 Samples 链接，并根据他们的演示找到了代码中对“Cake”的所有引用。链接到[示例代码](https://developers.google.com/wallet/digital/docs/samples#iap-php)。

-------- 数字商品示例应用程序 (PHP) ---------

我正在使用 PHP，所以我在此[链接](https://code.google.com/p/iap-php/source/browse)下载了 iap-php 源代码。并单击下载 .zip 链接。这在页面上不是很明显，窗口会显示一条消息，上面写着“所选目录中没有文件。选择一个子目录，如果存在，或者从左侧的树中选择另一个目录。” 不用担心; 只需在“源”选项卡中找到那个小下载：.zip 链接。

当我打开文件时，我看到了Seller **-info.php**以输入我的特定 issuerID（也称为您的商家 ID）和密码。用您的信息替换该红色文本。

**generate-token.php**是您将红色文本更改为有关您的产品的信息的地方。

**index.php**是您更改用户第一次看到的页面上显示的相同产品信息的地方。当你把它放在另一个页面上时，在你的实时网站内，一定要包含所有的脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T21:07:20.577

教程说它正在生成 JWT 服务器端，并有一个[链接到可以为您生成的服务器库](https://developers.google.com/in-app-payments/docs/libraries)（多种语言）。

# java - GC从作用域返回后收集引用的对象

> ID：11296019
> 
> 赞同：1
> 
> 时间：2012-07-02T14:48:06.703
> 
> 标签：java, garbage-collection

我有一个关于 GC 如何在 Java 中工作的问题。考虑以下代码：

```
class C1 {
    ArrayList<int> myList = new ArrayList<int>();

    public void setList(ArrayList<int> l) {
         myList = l;
    }
}

func(C1 C) {
    ArrayList<int> l1 = new ArrayList<int>();
    l1.add(1);
    C.setList(l1);
}

main() {
    C1 C = new C1();
    func(C);
    ...
} 
```

我的问题是：GC 是否在`func()`返回后释放“l1”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T14:51:02.660

不，它没有，因为有一个根引用（堆栈变量），它对new`C`有一个强引用 ( ) 。返回后，和是可收集的，因为根引用消失了。`myList``ArrayList``main()``C1``ArrayList`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T15:23:31.453

实际上，HotSpot 的 JIT 做了一个优化，即检测本地 var 将不再被访问的点并在那个时刻清除它。因此，您问题的完整答案是“可能，但不能保证”。最近我玩了一些代码并测量了一个大型数组占用的内存。直到我真正`array.hashCode()`在方法的末尾插入，我观察到它是更早发布的。

# java - 在 tomcat 类路径中包含 web-inf/lib 内的目录

> ID：11296020
> 
> 赞同：3
> 
> 时间：2012-07-02T14:48:10.903
> 
> 标签：java, tomcat, classpath, tomcat6

在我的网络应用程序中；WEB-INF/lib 默认添加到类路径中，这很好。现在，我想在我的 tomcat 的类路径中添加 spring jar 文件。如果我将所有 jar 文件放在 WEB-INF/lib 中；它工作正常。但是如果我想添加一个目录 WEB-INF/lib/spring 并将所有 jar 文件放在 spring 目录中；它不起作用。如何在类路径中包含 WEB-INF/lib/spring。

我更愿意在 web.xml 中进行更改，因为它非常适合我的 webapp。当然，我不想在 catalina.properties 中进行更改，因为所有 jar 文件都加载到 JVM 中（不仅仅是添加到类路径中）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T15:09:22.620

你不应该关心 jar 文件是如何被隔离到 war 文件中的：它只被容器使用。隔离 jar 文件在您的源项目中可能很有用。但是你只需要一个构建过程（使用 ant、gradle 等）将所有子目录中的所有 jar 文件复制到`WEB-INF/lib`. 使用蚂蚁：

```
<copy todir="web/WEB-INF/lib" flatten="true">
    <fileset dir="lib">
        <include name="**/*.jar"/>
    </fileset>
</copy> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-01T21:44:49.907

由于事情不关心 JAR 命名，另一种选择是简单地将前缀附加到 JAR（即“spring-OLD JAR NAME.jar”）以保持相关 JAR 分组而不使用文件夹。

# jquery-ui - 我们可以在页面内部更改 jquery 小部件和插件的 css 样式吗？

> ID：11296021
> 
> 赞同：-1
> 
> 时间：2012-07-02T14:48:21.123
> 
> 标签：jquery-ui, jquery-plugins

任何人都可以告诉我如何在不更改 jquery 中的 custom.css 文件的情况下在内部更改 css 样式属性..以便内部属性可以影响网页..就像更改小部件和 jquery-ui 的属性（例如：按钮、日期选择器等） ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:08:45.197

您可以在自己的样式表中覆盖 jquery 样式表中定义的样式。CSS 代表层叠样式表。Cascading 部分意味着一种样式可以覆盖另一种样式。您只需将其放在评估链的更下方（或使其更具体，或任何其他方式）。

您只需创建自己的样式表。确保它位于页面中的 jquery-ui 样式表之后，并重新定义样式。

# sql - Oracle 错误：字符串缓冲区太小

> ID：11296023
> 
> 赞同：0
> 
> 时间：2012-07-02T14:48:33.237
> 
> 标签：sql, oracle, coldfusion, coldfusion-8

我正在运行一个基于基本条件子句检索行的基本查询，并不复杂。这工作正常：

```
<cfquery name="courses" datasource="banner">
        SELECT *
        FROM tjucatalog
        WHERE (course_status = 'Active')
            AND CONCAT(subject,course_no) IN (#PreserveSingleQuotes(courselist)#)
            AND term IN ('Fall 2012')
            AND ((end_date > #now()#) OR (course_meeting_info IS NOT NULL))
        ORDER BY TYear, TSort, DayNum, start_date, time, title
</cfquery> 
```

但是，当我从查询中删除“AND term IN”行时，它会失败。

```
<cfquery name="courses" datasource="banner">
        SELECT *
        FROM tjucatalog
        WHERE (course_status = 'Active')
            AND CONCAT(subject,course_no) IN (#PreserveSingleQuotes(courselist)#)
            AND ((end_date > #now()#) OR (course_meeting_info IS NOT NULL))
        ORDER BY TYear, TSort, DayNum, start_date, time, title
</cfquery> 
```

我得到的错误是：**ORA-06502: PL/SQL: numeric or value error: string buffer too small ORA-06512: at "BANINST1.TJUCATALOG_PACK", line 519**

这可能是一个需要包含字段“术语”的视图，还是我完全不知道这里还有其他东西在起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T16:26:40.043

这似乎是在后台调用的包中的一个错误，可能从一个视图来看。您正在查询`tjucatalog`，并且返回的列之一实际上是函数调用的视图似乎是合理的。

问题不一定是`term`列。通过删除该条件，将返回更多行，并且针对条件存在时不存在的行中的列值调用该函数。但它可以是那些现在可见的行之一中的任何列。

作为可能发生的事情的一个简单而人为的例子：

```
create table t42 (id number, foo varchar2(20));

insert into t42 (id, foo) values (1, 'Short');
insert into t42 (id, foo) values (2, 'More than 10');

create package p42 as
function func(p_id in number) return varchar2;
end p42;
/

create package body p42 as
function func(p_id in number) return varchar2 is
    l_bar varchar2(10);
begin
    select foo into l_bar from t42 where id = p_id;
    return l_bar;
end func;
end p42;
/

create view v42 as select id, p42.func(id) as bar from t42; 
```

所以我们有一个有两行的表，一个`foo`少于 10 个字符，另一个超过 10 个字符。我们有一个（愚蠢的）包函数，它接受一个`id`值，查找`foo`并返回它。以及使用该功能的视图。

这有效：

```
select * from v42 where id = 1;

        ID BAR
---------- --------------------
         1 Short 
```

但是删除条件会导致它失败：

```
select * from v42;

ERROR:
ORA-06502: PL/SQL: numeric or value error: character string buffer too small
ORA-06512: at "SCOTT.P42", line 5 
```

我的包体的第 5 行是`select foo into l_bar from t42 where id = p_id;`，问题是我声明`l_bar`为，这对于 . 的值`varchar2(10)`来说太小了。我应该宣布它为，甚至更好。`foo``id=2``varchar2(20)``t42.foo%TYPE`

要查看有问题的函数在做什么，请查看源代码，如果您没有可用的数据库，您可以从数据库中获取（如果它没有被包装）：

```
select line, text from all_source
where owner = 'BANINST1'
    and name = 'TJUCATALOG_PACK'
    and type = 'PACKAGE BODY'
order by line; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T13:32:51.237

我们的 Oracle 专家返回并告诉我们他们必须将字段类型从 varchar2 (4000) 更改为 CLOB。缺少作为过滤子句的**术语**字段是一个红鲱鱼错误。我不知道查询中具体的哪个字段需要增加允许的长度，但它有效，所以我很高兴。

# objective-c - 在另一个平台上创建目标 c 程序的方法？

> ID：11296026
> 
> 赞同：-3
> 
> 时间：2012-07-02T14:48:34.500
> 
> 标签：objective-c, ios, ios4

> **可能重复：**
> [Objective C for Windows](https://stackoverflow.com/questions/56708/objective-c-for-windows)
> [iPhone development on Windows](https://stackoverflow.com/questions/113547/iphone-development-on-windows)

有没有办法在 Windows 7 上构建目标 c 或 iPhone 程序？

或任何其他与 Xcode 相同的软件。

我不想为了学习目的而部署，想要构建和测试。

我不想使用 VMware 安装 Mac OSx。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:50:25.843

你可以在你的windows上得到objective c编译器，但我不认为你能得到cocoa框架，所以你可以学习objective c语言而不是cocao和cocoa touch

一些资源

*   [用于 Windows 的目标 C](https://stackoverflow.com/questions/56708/objective-c-for-windows)
*   [http://www.roseindia.net/iphone/objectivec/objective-c-windows.shtml](http://www.roseindia.net/iphone/objectivec/objective-c-windows.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:51:29.570

是的，有几种解决方案，但首先想到的是[RareWire](http://rarewire.com)。虽然您无法在 Objective-c 中进行设计，但您可以在任何具有网络浏览器的平台上创建 iPhone 应用程序并将它们发送到您的设备。

不幸的是，目前 RareWire 仅限邀请，因此您必须请求邀请才能进入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T14:56:51.697

如果它只是用于学习 Objective-C 语言本身的目的，这意味着你不需要 Cocoa API，那么 gcc 有一个完美的 Objective-C 编译器。自己看：http: [//ideone.com/395tl](http://ideone.com/395tl)

# google-chrome - 为什么rotateY（flip）css3动画在Chrome中闪烁？

> ID：11296028
> 
> 赞同：6
> 
> 时间：2012-07-02T14:48:42.420
> 
> 标签：google-chrome, css, webkit, css-transitions, vendor-prefix

我做了一个 jsFiddle：http: [//jsfiddle.net/Grezzo/JR2Lu/](http://jsfiddle.net/Grezzo/JR2Lu/)

当您按下键盘上的 i 键时，图片会翻转以显示一些文本，但在翻转动画期间，当您在 Chrome 中查看时，它会闪烁（尤其是文本闪烁）。

（请注意，我使用的是无前缀的 JS 库，因此我不必使用浏览器特定的 CSS 属性作为前缀。）

为什么会闪烁，我该如何阻止它？

更新：在 XP 上运行的 Chrome 20.0.1132.47 m 上闪烁很明显，无论 OS X 10.7.4 Lion 的最新版本是什么（我现在不在我的 Mac 附近检查）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T15:10:38.690

嗯，这有点奇怪。通过删除`background-color`from `.card`，它可以正常工作：http: [//jsfiddle.net/JR2Lu/3/](http://jsfiddle.net/JR2Lu/3/)

似乎样式`.card`是问题，可能是因为您通常看不到该 div。

# css - 以 div 为中心的流体动态图像 - 立即使用 div 调整大小

> ID：11296030
> 
> 赞同：1
> 
> 时间：2012-07-02T14:48:52.513
> 
> 标签：css, image, resize, centering, fluid-layout

所以，我有一个完全流畅的网页。有一个宽度为 100% 的父 DIV，并且在一个带有样式的 IMAGE 内：

```
<div>
     <img src="image.png" alt="" />
</div>

<style>
    div{ width:100% }
    img{
      display: block;
      margin: auto;
      max-width: 100%;
    }
</style> 
```

图像以 div 为中心。我不知道图像的大小，但它总是比父 DIV 小，所以从 img 边框到 div 边框都有空白。现在，当您调整浏览器大小时，图像不会调整大小，直到父 DIV 到达图像的边界。

如果图像的样式宽度为：100%，那么它将超出实际尺寸...

我希望在调整浏览器窗口大小时立即使用 div 缩放此图像。如果图像画布是父 div 的 100%，则行为就像我想要的那样（图像会立即调整大小，因为图像将是 100% od div 的宽度）。但我不能让图像像那样......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T10:57:10.253

我认为纯 CSS 不可能，但你可以使用一些 jQuery - [http://jsfiddle.net/UcV7y/](http://jsfiddle.net/UcV7y/)

```
var ratio = $("img").parent().width() / $("img").width();

$(window).resize(function() {
    $("img").width( $("img").parent().width() / ratio + "px" );
});
​ 
```

# soap - 如何修改标头 wso2

> ID：11296031
> 
> 赞同：0
> 
> 时间：2012-07-02T14:49:01.880
> 
> 标签：soap, wso2, wso2esb

我正在创建一个 POC 。我正在尝试将“授权：承载”发送到网络服务代理。我如何使用 WSO2ESB 中的类调解来做到这一点。

还有我如何通过添加新的有效负载来修改旧的有效负载......在类中介

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T06:42:42.153

请尝试以下方法：

```
<property name="Authorization" value="Bearer" scope="transport"/> 
```

可以通过多种方式更改有效负载，更改整个有效负载的一种方法是使用有效负载工厂。

```
<payloadFactory>
    <format>
        <m:getquote xmlns:m="http://services.samples">
            <m:request>
                <m:symbol>$1</m:symbol>
            </m:request>
        </m:getquote>
    </format>
    <args>
        <arg expression="//m0:Code" xmlns:m0="http://services.samples"/>
    </args>
</payloadFactory> 
```

或者使用丰富的中介也可以达到同样的效果：

```
<enrich>
    <source type="inline" clone="false">
        <m:getquote xmlns:m="http://services.samples">
            <m:request>
                <m:symbol>$1</m:symbol>
            </m:request>
        </m:getquote>
    </source>
    <target type="body" action="replace" />
</enrich>
<enrich>
    <source type="property" clone="true" property="PATIENTS"/>
    <target xmlns:m="http://services.samples" xpath="//m:symbol"/>
</enrich> 
```

希望这可以帮助

问候，尼德基尔

# asp.net - 302 无限循环

> ID：11296032
> 
> 赞同：6
> 
> 时间：2012-07-02T14:49:02.380
> 
> 标签：asp.net, iis-7, infinite-loop, http-status-code-302

我有一个陷入无限循环的 Web 应用程序，我不知道下一步该往哪里看。这是一个 Intranet 站点，所以没有可以分享的链接，但我在下面列出了我能想到的尽可能多的详细信息。我将不胜感激任何想法或建议。谁都有。

细节：

*   IIS 7
*   .Net 4.0
*   视窗 2008
*   默认文件是 Login.aspx
*   IIS 中的应用程序或 Login.aspx 上未设置 HTTP 重定向
*   Fiddler 使用状态码 302 显示 Login.aspx 并重定向到 Login.aspx

如果我打开我的网站，它会指向 Login.aspx 并陷入 302 循环。如果我打开站点但指向 register.aspx，Fiddler 会显示 register.aspx 转到 Login.aspx，这当然会重定向到 Login.aspx。

我做了什么：

*   从 Visual Studio 运行 webapp——一切正常
*   检查 web.config 中的重定向命令——没有
*   检查 IIS 是否有重定向命令——没有
*   在 Fiddler 中查看循环中的另一个页面——没有，只有 Login.aspx 到 Login.aspx
*   检查 Login.aspx 的重定向命令——没有
*   检查 Login.aspx 代码后面的重定向命令——没有
*   使用服务器上的 web.config 在我的机器上运行应用程序——一切正常
*   检查 Login.aspx 的重定向命令——没有
*   已清除缓存 - 问题仍然存在
*   重新发布 - 问题仍然存在
*   重新发布并清除缓存 - 问题仍然存在
*   在 IIS 中禁用默认文档

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T14:55:55.730

将分享这个以防万一它是一个答案，因为这听起来像我们遇到的问题。

1.  ASP.net MVC 站点`[RequiresHttps]`在我们的登录操作上具有属性。

2.  在进行 SSL 加速的负载均衡器后面（导致实际命中服务器端代码的请求已经解码并在 http 下有效）。

3.  服务器代码认为这是一个问题，并使用 https 重定向回自身。

4.  冲洗并重复。

* * *

自从回答这个问题以来已经有很长时间了，我在下面关于“不使用 RequireHttps”的评论可能有点过时了。

任何看到这个答案并认为它回答了他们的问题的人都可能会被建议考虑配置他们的负载均衡器以使用 X-Forwarded-Proto 标头：

[https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Forwarded-Proto](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Forwarded-Proto)

然后设置他们的 MVC 站点，以便能够阅读这些内容，并且仍然认为它们在环境边界的 HTTPS 下：

[https://docs.microsoft.com/en-us/aspnet/core/host-and-deploy/proxy-load-balancer?view=aspnetcore-6.0](https://docs.microsoft.com/en-us/aspnet/core/host-and-deploy/proxy-load-balancer?view=aspnetcore-6.0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T15:27:54.307

发现了问题。在 MasterPage 中找到了这个逻辑：

```
Dim strPage As String = Request.Url.AbsolutePath.Replace("/", "")
    'Check that user is logged in
    If Not strPage = "Login.aspx" And Not strPage = "Register.aspx" Then
        If Session("intUserId") Is Nothing Then
            Response.Redirect("~/Login.aspx", True)
        End If
    End If 
```

显然，当浏览到服务器上的 Login.aspx 时，strPage 不等于 Login.aspx。

当我调查它时，我应该咳嗽一下。感谢罗斯的评论，它帮助我找到了这个！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-30T22:42:01.237

我遇到过类似的错误。但我的错字有两个 *Response.Redirect*背靠背。

```
If (conditon1){
    Response.Redirect("Page1.aspx");
}
If (conditon2){
    Response.Redirect("Page2.aspx");
} 
```

解决方法是简单地将另一个*if*放在*else*块中。

# javascript - Chrome 不处理 jquery ajax 查询

> ID：11296036
> 
> 赞同：11
> 
> 时间：2012-07-02T14:49:25.423
> 
> 标签：javascript, jquery, google-chrome

我在 jquery 中有以下查询。它正在读取使用 Nginx 的长轮询模块设置的 Nginx 订阅/发布对的“发布”地址。

```
function requestNextBroadcast() {
        // never stops - every reply triggers next. 
        // and silent errors restart via long timeout. 
        getxhr = $.ajax({
            url: "/activity",
            // dataType: 'json',
            data: "id="+channel,
            timeout: 46000, // must be longer than max heartbeat to only trigger after silent error. 
            error: function(jqXHR, textStatus, errorThrown) {
                alert("Background failed "+textStatus);  // should never happen 
                getxhr.abort(); 
                requestNextBroadcast();  // try again
            },
            success: function(reply, textStatus, jqXHR) {
                handleRequest(reply);   // this is the normal result. 
                requestNextBroadcast(); 
            }
        });
    } 
```

该代码是聊天室的一部分。发送的每条消息都会以空 rply（带有 200/OK）回复进行回复，但会发布数据。这是在数据返回时读取订阅地址的代码。

使用超时，聊天室中的所有人每 30 到 40 秒发送一条简单的消息，即使他们没有输入任何内容，因此该代码有大量数据可供读取 - 每 40 秒至少有 2 条甚至更多消息.

该代码在 EI 和 Firefox 中是 100% 坚如磐石的。但是大约 5 次阅读中的一篇在 Chrome 中失败了。

当 Chrome 失败时，超时时间为 46 秒。

日志显示在任何时候有一个 /activity 网络请求未完成。

我已经在这段代码上爬了 3 天了，尝试了各种想法。每次 IE 和 Firefox 工作正常而 Chrome 失败。

我看到的一个建议是使调用同步-但这显然是不可能的，因为它会锁定用户界面太久。

编辑 - 我有一个部分解决方案：代码现在是这个

```
function requestNextBroadcast() {
    // never stops - every reply triggers next. 
    // and silent errors restart via long timeout. 
    getxhr = jQuery.ajax({
        url: "/activity",
        // dataType: 'json',
        data: "id="+channel,
        timeout: <?php echo $delay; ?>,
        error: function(jqXHR, textStatus, errorThrown) {
            window.status="GET error "+textStatus;
            setTimeout(requestNextBroadcast,20);  // try again
        },
        success: function(reply, textStatus, jqXHR) {
            handleRequest(reply);   // this is the normal result. 
            setTimeout(requestNextBroadcast,20); 
        }
    });
} 
```

结果有时会延迟回复，直到 $delay (15000) 发生，然后排队的消息到达太快而无法跟进。使用这种新安排，我无法让它丢弃消息（仅在关闭 netwrok optomisation 的情况下进行测试）。

我非常怀疑延迟是由于网络问题 - 所有机器都是我一台真实机器中的虚拟机，并且我的本地 LAN 没有其他用户。

编辑 2（英国夏令时星期五 2:30） - 将代码更改为使用承诺 - 动作的 POST 开始显示相同的症状，但接收方开始正常工作！（？？？？？？！！！？？？）。这是 POST 例程 - 它正在处理一系列请求，以确保一次只有一个未完成。

```
function issuePostNow() {
    // reset heartbeat to dropout to send setTyping(false) in 30 to 40 seconds. 
    clearTimeout(dropoutat);
    dropoutat = setTimeout(function() {sendTyping(false);},  
                           30000 + 10000*Math.random()); 
    // and do send 
    var url = "handlechat.php?";
    if (postQueue.length > 0) {
        postData = postQueue[0];
        var postxhr = jQuery.ajax({ 
            type: 'POST',
            url: url,
            data: postData,
            timeout: 5000
        })
        postxhr.done(function(txt){
            postQueue.shift();  // remove this task
            if ((txt != null) && (txt.length > 0)) {
                alert("Error: unexpected post reply of: "+txt)
            }
            issuePostNow();
        });
        postxhr.fail(function(){
            alert(window.status="POST error "+postxhr.statusText);
            issuePostNow();
        });
    }
} 
```

大约 8 中的一个操作对 handlechat.php 的调用将超时并出现警报。一旦警报被确定，所有排队的消息都会到达。

而且我还注意到，handlechat 呼叫在写入其他人会看到的消息之前就停止了。我想知道它是否可能是 php 对会话数据的一些奇怪处理。我知道它会小心地将调用排队，以免会话数据损坏，所以我一直小心使用不同的浏览器或不同的机器。只有 2 个 php 工作线程，但是 php 不用于处理 /activity 或提供静态内容。

我还认为这可能是 nginx 工作人员或 php 处理器的短缺，所以我提出了这些。现在让事情失败变得更加困难——但仍然有可能。我的猜测是 /activity 调用现在失败了 30 次，并且根本不会丢弃消息。

并感谢你们的意见。

* * *

调查结果摘要。

1) 这是 Chrome 中的一个错误，已经在代码中出现了一段时间。
2) 如果运气好，该错误可以显示为未发送的 POST，并且当它超时时，它会使 Chrome 处于重复 POST 将成功的状态。
3) 用于存储 $.ajax() 返回的变量可以是本地的或全局的。新的（promises）和旧的格式调用都触发了这个错误。
4）我还没有找到解决这个问题的方法或方法。

伊恩

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-06T21:05:08.870

我对 Chrome 有一个非常相似的问题。我正在进行 Ajax 调用，以便每秒从服务器获取时间。显然，Ajax 调用必须是异步的，因为如果不是，它将在超时时冻结接口。但是一旦 Ajax 调用中的一个失败，随后的每个调用也是如此。我首先尝试将超时设置为 100 毫秒，这在 IE 和 FF 中运行良好，但在 Chrome 中却不行。我最好的解决方案是将类型设置为 POST 并为我解决了 chrome 的错误：

```
 setInterval(function(){ 
      $.ajax({
         url: 'getTime.php',
         type: 'POST',
         async: true,
         timeout: 100,
         success: function() { console.log("success"); },
         error: function() { console.log("error"); }
       });
   }, 1000); 
```

**更新：** 我相信这里实际的潜在问题是 Chrome 的缓存方式。似乎当一个请求失败时，该失败会被缓存，因此永远不会发出后续请求，因为 Chrome 会在启动后续请求之前获取缓存的失败。如果您转到 Chrome 的开发人员工具并转到“网络”选项卡并检查正在发出的每个请求，就可以看到这一点。在失败之前，每秒钟都会向 getTime.php 发出 ajax 请求，但在 1 次失败之后，永远不会发起后续请求。因此，以下解决方案对我有用：

```
 setInterval(function(){ 
      $.ajax({
         url: 'getTime.php',
         cache: false,
         async: true,
         timeout: 100,
         success: function() { console.log("success"); },
         error: function() { console.log("error"); }
       });
   }, 1000); 
```

这里的变化是我禁用了对这个 Ajax 查询的缓存，但是为了这样做，类型选项必须是 GET 或 HEAD，这就是我删除 ' `type: 'POST'`' 的原因（GET 是默认值）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T21:19:17.293

尝试将您的轮询功能移动到网络工作者中，以防止在 chrome 中冻结。否则，您可以尝试使用 jquery 对象的 ajax .done() 。那个总是在 chrome 中为我工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T20:56:49.110

评论不会格式化代码，因此作为第二个答案重新发布：

我认为 Michael Dibbets 正在处理 $.ajax.done 的问题——延迟模式将处理推到事件循环的下一轮，我认为这是这里需要的行为。请参阅： http: [//www.bitstorm.org/weblog/2012-1/Deferred_and_promise_in_jQuery.html](http://www.bitstorm.org/weblog/2012-1/Deferred_and_promise_in_jQuery.html)或[http://joseoncode.com/2011/09/26/a-walkthrough-jquery-deferred-and-promise/](http://joseoncode.com/2011/09/26/a-walkthrough-jquery-deferred-and-promise/)

我会尝试类似的东西：

```
function requestNextBroadcast() { 
  // never stops - every reply triggers next.
  // and silent errors restart via long timeout.

  getxhr = jQuery.ajax({
    url: "/activity",
    // dataType: 'json',
    data: "id="+channel,
    timeout: <?php echo $delay; ?> 
  });

  getxhr.done(function(reply){
    handleRequest(reply);
  });

  getxhr.fail(function(e){
    window.status="GET error " + e;
  });

  getxhr.always(function(){
    requestNextBroadcast();
  }); 
```

注意：我很难找到有关 Promise.done 和 Promise.fail 的回调参数的文档 :(

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T22:48:54.063

我觉得 getxhr 应该以“var”为前缀。您不想每次都需要一个完全独立的新请求，而不是在成功/失败处理过程中覆盖旧请求吗？可以解释为什么添加 setTimeout 时行为会“改善”。我也可能遗漏了一些东西；）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T16:23:06.757

也许可以通过更改推送模块设置（有一些）来解决 - 你能发布这些吗？

从我的头顶：

*   将其设置为间隔轮询，会有点丑陋地解决它
*   并发设置可能会产生一些影响
*   消息存储可用于避免丢失数据

我还会使用[Charles](http://www.charlesproxy.com/)之类的东西来查看网络/应用程序层到底发生了什么

# objective-c - wglMakeCurrent 或 glXMakeCurrent 的 Cocoa/OSX 等价物是什么？

> ID：11296038
> 
> 赞同：3
> 
> 时间：2012-07-02T14:49:40.680
> 
> 标签：objective-c, c, cocoa, opengl

我了解 Cocoa 要求在主线程上创建/管理窗口。所以，我希望有两个或三个具有独特上下文的窗口，但我真的更喜欢从单独的线程中为每个窗口绘制。另外，一点点谷歌搜索似乎表明在一个线程上快速进行上下文切换非常昂贵/缓慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:06:51.483

您可能想查看用于快速上下文切换的[CGL](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGL_OpenGL/Reference/reference.html)`CGLSetCurrentContext`接口，特别是： . 但是，在 Cocoa 应用程序中使用[NSOpenGLContext](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSOpenGLContext_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40004074)`makeCurrentContext`的方法可能更一致。

# eclipse-cdt - Eclipse C++ 配置错误

> ID：11296043
> 
> 赞同：2
> 
> 时间：2012-07-02T14:49:52.787
> 
> 标签：eclipse-cdt

当我尝试在 Eclipse 中创建一个简单的 helloWorld C++ 项目时出现以下错误。请注意，我已经正确设置了 MinGW、msys 和环境变量。我使用的是 Windows 7 和 32 位 Eclipse Juno。

错误：

运行 autoreconf HelloWorld -1 配置问题时发生错误 127

一旦我创建项目，错误就会发生。我的机器上有另一个 c++ 编译器（DevC++），并认为这可能会导致问题，所以我删除了它。但是我仍然遇到同样的错误。请帮忙

谢谢

# ruby-on-rails-3 - 在 rails 3.x 的 youtube 上上传带标题的视频

> ID：11296048
> 
> 赞同：3
> 
> 时间：2012-07-02T14:50:05.040
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, rubygems, ruby-on-rails-3.2

我正在使用 youtube_it gem 在 youtube 上上传视频。我想在 youtube 上上传带有字幕文件的视频。我在这个 gem 中找不到任何上传带有字幕的视频的方法。在带有 ruby​​ 版本 1.9.x 的 rails 3.x 中有没有更好的 gem 或任何其他解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T05:49:19.530

有人在 fork 中添加了此功能。

[https://github.com/nazarhussain/youtube_it](https://github.com/nazarhussain/youtube_it)

# php - 从复选框和隐藏字段中检索多个值

> ID：11296059
> 
> 赞同：0
> 
> 时间：2012-07-02T14:50:27.183
> 
> 标签：php

我的代码按预期工作，但发生了一个小问题，我尝试从具有相同名称的复选框和具有相同名称的隐藏字段中检索值，它可以工作，但即使未选中复选框，其中一个隐藏字段仍会继续返回第一个值。这是我的代码

```
while($row=mysql_fetch_array($res1)){
?> 
    <tr><td class='bold'><?php echo $sn;?><input type="hidden" name="snum[]" value="<?php echo $sn; ?>" /></td>
    <td><?php echo $row['subLocationName']; ?>
    <input type="hidden" name="location[]" value="<?php echo $row['dllink_id']; ?>"/></td>
    <td><input type="checkbox" name="available[]" value="<?php echo $row['subLocationName']; ?>"/></td>
    <input type="hidden" name="locationID[]" value="<?php echo $row['locationName']; ?>"/>
    <input type="hidden" name="sublocation[]" value="<?php echo $row['subLocationName']; ?>"/>
    <input type="hidden" name="device[]" value="<?php echo $row['deviceName']; ?>"/>
    <td></td><td></td></tr>
<?php
        $sn++;
    } 
```

这些值来自我的数据库。检索代码是这样的

```
if(isset($_POST['submit_btn'])){

        $serial_num = $_POST['snum'];
        $locationDeviceLink = $_POST['location'];
        $linkAvailable =$_POST['available'];
        $location = $_POST['locationID'];
        $subLocation = $_POST['sublocation'];
        $device = $_POST['device']; 
        $measure_date = date("Y-m-d");
        $sn = count($linkAvailable);
            for ($i=0; $i<$sn; $i++ ){
                if(!empty($linkAvailable[$i])){
                    echo "serial number:".$serial_num[$i]."  location:".$locationDeviceLink[$i]."  available:".$linkAvailable[$i]."  Location:".$location[$i]."  subLocation:".$subLocation[$i]."  Device:".$device[$i]."  Date:".$measure_date."<br/>";

                }

            }

    } 
```

问题是 subLocation 值，它会继续返回第一个值，然后返回第二个值，即使未选中关联的复选框并且选中了另一个复选框，请任何人都可以帮助我，想不出更多。在此先感谢约瑟夫 O

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:04:55.830

而不是测试`!empty`尝试使用php的函数`isset`。

```
for ($i=0; $i<$sn; $i++ ){
  if(isset($linkAvailable[$i])) {
    echo "serial number:".$serial_num[$i]."  location:".$locationDeviceLink[$i]."  available:".$linkAvailable[$i]."  Location:".$location[$i]."  subLocation:".$subLocation[$i]."  Device:".$device[$i]."  Date:".$measure_date."<br/>";
  }
} 
```

# c# - 发送邮件时出现 C# 错误：在已连接的套接字上发出了连接请求

> ID：11296065
> 
> 赞同：1
> 
> 时间：2012-07-02T14:50:46.803
> 
> 标签：c#, email, socketexception

我见过很多从 c# 代码发送电子邮件的例子，我正在遵循最流行的使用方法`System.Net.Mail.SmtpClient`。我能够第一次发送邮件，但之后它给出了一个错误，说**A connect request was made on an already connected socket**。

我正在使用以下代码发送邮件：

```
using (MailMessage mail = new MailMessage())
{
    using (SmtpClient mailer = new SmtpClient("smtp.server.com"))
    {
        Console.Write("Sending mails...");
        mail.From = new MailAddress("from@mail.com");
        mail.To.Add("myaddress@mail.com");
        mail.Subject = "test-subject";
        mail.Body = "test-body";
        mailer.Port = 25;
        mailer.Credentials = new System.Net.NetworkCredential("from@mail.com", "from-password");
        mailer.EnableSsl = true;
        try
        {
            mailer.Send(mail);
            Console.WriteLine("Mail sent");
        }
        catch (Exception e)
        {
            Console.ForegroundColor = ConsoleColor.Red;
            Console.WriteLine("\rCannot send mail, an error occured : {0}", e);
            Console.ResetColor();
        }
    }
} 
```

错误信息是：

```
Cannot send mail, an error occured : System.Net.Mail.SmtpException: Failure sending mail. ---> System.Net.WebException: Unable to connect to the remote server ---> System.Net.Sockets.SocketException: A connect request was made on an already connected socket 200.200.200.200:25
   at System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, Socket s4, Socket s6, Socket& socket, IPAddress& address, ConnectSocketState state, IAsyncResult asyncResult, Int32 timeout, Exception& exception)
   --- End of inner exception stack trace ---
   at System.Net.ServicePoint.GetConnection(PooledStream PooledStream, Object owner, Boolean async, IPAddress& address, Socket& abortSocket, Socket& abortSocket6, Int32 timeout)
   at System.Net.PooledStream.Activate(Object owningObject, Boolean async, Int32 timeout, GeneralAsyncDelegate asyncCallback)
   at System.Net.PooledStream.Activate(Object owningObject, GeneralAsyncDelegate asyncCallback)
   at System.Net.ConnectionPool.GetConnection(Object owningObject, GeneralAsyncDelegate asyncCallback, Int32 creationTimeout)
   at System.Net.Mail.SmtpConnection.GetConnection(ServicePoint servicePoint)
   at System.Net.Mail.SmtpTransport.GetConnection(ServicePoint servicePoint)
   at System.Net.Mail.SmtpClient.GetConnection()
   at System.Net.Mail.SmtpClient.Send(MailMessage message)
   --- End of inner exception stack trace ---
   at System.Net.Mail.SmtpClient.Send(MailMessage message)
   at TestApp.Program.Main(String[] args) in D:\Desktop\TestApp\TestApp\Program.cs:line 290 
```

如您所见，我保留了 both`MailMessage`和`SmptClient`inside`using`子句的实例，这样如果发生任何错误，连接将自动关闭。但是它在正确启动后第一次发送邮件，之后所有其他尝试都失败了。

SMTP 服务器位于代理后面，防火墙客户端正在我的系统上运行。据我所知，代理不是问题。

代码中是否有任何错误？我怎样才能让它工作？

我曾尝试使用 Outlook API，但这需要用户在发送每封邮件之前进行身份验证。我不想要这种行为。

PS：我已经删除了一些在这种情况下无关的细节，如 IP 地址和服务器名称。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:05:28.887

可能您应该升级到 NET 4.0。[Microsoft Connect 上的这个问题](http://connect.microsoft.com/VisualStudio/feedback/details/146711/smtp-never-sends-the-quit-command)解释了 SMTPClient 没有正确关闭连接，并且这个问题已在 4.0 中得到修复

有人使用属性**MaxIdleTime**设置为 1 取得了一些成功，但无论如何，当连接数超过邮件服务器允许的数量时，问题似乎只是向前发展。

# java - Spring MVC：如何通过控制器方法获取 URL 的片段

> ID：11296066
> 
> 赞同：4
> 
> 时间：2012-07-02T14:50:48.800
> 
> 标签：java, spring, url, spring-mvc

考虑以下 URL：

[http://www.iamsomeweiredurl.fromsomewhere/andIwant#thisfragment](http://www.iamsomeweiredurl.fromsomewhere/andIwant#thisfragment)

有没有机会得到“thisfragment”之类的`@RequestMapping`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T15:01:53.857

不，您必须使用 JavaScript 来获取锚点。

# c# - 可空对象必须有一个值

> ID：11296072
> 
> 赞同：0
> 
> 时间：2012-07-02T14:51:19.843
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

这是我的模型课

```
 [HiddenInput(DisplayValue = false)]
    public long ProductId { get; set; }

    [Display(Name="Alarm Point")]
    public short AlarmPoint { get; set; }

    [Required]
    public long? MeasurementId { get; set; }

    [Display(Name="Measurement Id")]
    public IList<SelectListItem> Measurement { get; set; }

    [Display(Name="Length")]
    public decimal Length { get; set; }

    [Display(Name="Breadth")]
    public decimal Breadth { get; set; }

    [Display(Name="Height")]
    public decimal Height { get; set; }

    [Display(Name="Weight")]
    public decimal Weight { get; set; }

    [Display(Name="Is Active")]
    public bool IsActive { get; set; }

    [Display(Name="Is Sellable")]
    public bool IsSellable { get; set; } 
```

在我的控制器的索引页面中，我只是通过 Json 传递一个值。

```
 [GridAction]
    public ActionResult ProductList()
    {
        var collection = _productService.GetAllProduct().Select(x =>
            new ProductModel()
            {
                ProductId = x.ProductId,
                Title = x.Title,
                CategoryId = x.CategoryId,
                Description = x.Description,
                Barcode = x.Barcode,
                AlarmPoint = x.AlarmPoint.Value,
                MeasurementId = x.MeasurementId,
                Length = x.Length.Value,
                Breadth = x.Breadth.Value,
                Height = x.Height.Value,
                Weight = x.Weight.Value,
                IsActive = x.IsActive.Value,
                IsSellable = x.IsSellable.Value,
                IsPurchasable = x.IsPurchasable.Value
            });
        return Json(collection, JsonRequestBehavior.AllowGet);
    } 
```

这是我的索引视图

```
 <h1 style="font-size: 25px ">View</h1>
           <br />
            @(Html.Telerik().Grid<CommerceSuite.Web.Models.Product.ProductModel>()
                           .Name("Product")
           .DataBinding(databinding =>
           {
               databinding.Ajax().Select("ProductList", "Product");
           })
           .Columns(columns =>
           {
               columns.Bound(p => p.ProductId)
               .ClientTemplate("<input type='checkbox' name='checkedRecords' value='<#= ProductId #>' />")
               .Title("")
               .Width(20)
               .HtmlAttributes(new { style = "text-align:center" });
               columns.Bound(p => p.Title).Width(200);
               columns.Bound(p => p.ProductId).Width(200);
               columns.Bound(p => p.CategoryId).Width(200);
               columns.Bound(p => p.Barcode).Width(200);
               columns.Bound(p => p.ProductId)
               .ClientTemplate("<input type='button' name='<#=ProductId #>' onclick='csPopupOpen(\"Edit BillOf Material\",\"" + @Url.Action("Edit") + "\",<#=ProductId #>,\"" + @Url.Action("Index") + "\")' value='Edit' > <input type='button' name='<#=ProductId #>' onclick='csPopupOpen(\"Delete BillOf Material\",\"" + @Url.Action("Delete") + "\",<#=ProductId #>)' value='Delete' > ").Width(210);
           })
           .Pageable()
           .Scrollable()
           .Sortable()
     ) 
```

当我朗读这段代码并单击一个链接时，我在索引视图上得到一个内部服务器 500 错误，它说可以为空的对象必须有一个值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T14:59:02.017

您的问题出在某处：

```
var collection = _productService.GetAllProduct().Select(x =>
            new ProductModel()
            {
                ProductId = x.ProductId,
                Title = x.Title,
                CategoryId = x.CategoryId,
                Description = x.Description,
                Barcode = x.Barcode,
                AlarmPoint = x.AlarmPoint.Value,
                MeasurementId = x.MeasurementId,
                Length = x.Length.Value,
                Breadth = x.Breadth.Value,
                Height = x.Height.Value,
                Weight = x.Weight.Value,
                IsActive = x.IsActive.Value,
                IsSellable = x.IsSellable.Value,
                IsPurchasable = x.IsPurchasable.Value
            }); 
```

在您执行 a 的所有地方`.Value`，您可能需要先检查是否有值，或者使用 null 合并运算符，例如：

```
...
Length = x.Length ?? 0,
... 
```

# javascript - Javascript，jQuery - 在页面加载时旋转 div

> ID：11296085
> 
> 赞同：1
> 
> 时间：2012-07-02T14:52:08.253
> 
> 标签：javascript, jquery, html

我是 Javascript 初学者，遇到了一个小问题。我试图让我的五个 div 在页面加载后立即旋转可见性。现在，它们只有在我将鼠标悬停在每个图像按钮上后才开始旋转。谢谢！

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">

<!--

function toggleDiv(id,flagit) {

if (flagit=="1"){

if (document.layers) document.layers[''+id+''].visibility = "show"

else if (document.all) document.all[''+id+''].style.visibility = "visible"

else if (document.getElementById) document.getElementById(''+id+'').style.visibility = "visible"

}

}

</script>

</head>

<body>

<script type="text/javascript">

if (document.all || document.getElementById){ //if IE4 or NS6+
document.write('<style type="text/css">\n')
document.write('.dyncontent{width: 250px; height: 60px;}\n')
document.write('</style>')
}

var curcontentindex=0
var messages=new Array()

function rotatecontent(){
curcontentindex=(curcontentindex<messages.length-1)? curcontentindex+1 : 0
prevcontentindex=(curcontentindex==0)? messages.length-1 : curcontentindex-1
messages[prevcontentindex].style.display="none" 
messages[curcontentindex].style.display="block" 
}

window.onload=function(){
if (document.all || document.getElementById){
getElementByClass("dyncontent")
setInterval("rotatecontent()", 1000)
}
}

</script>

<a href="#" onMouseOver="toggleDiv('div1',1)" onMouseOut="toggleDiv('div1',0)" ><img     src="Images/BAB.com_web_link_10.jpg" width="250" height="100"     STYLE="position:absolute; TOP:0px; LEFT:400px;"></a>
<a href="#" onMouseOver="toggleDiv('div2',1)" onMouseOut="toggleDiv('div2',0)"><img     src="Images/SLU_on_the_Road.jpg" width="250"     height="100" STYLE="position:absolute; TOP:100px; LEFT:400px;"></a>
<a href="#" onMouseOver="toggleDiv('div3',1)" onMouseOut="toggleDiv('div3',0)"><img     src="Images/Billiken_Blogs.jpg" width="250"     height="100" STYLE="position:absolute; TOP:200px; LEFT:400px;"></a>
<a href="#" onMouseOver="toggleDiv('div4',1)" onMouseOut="toggleDiv('div4',0)"><img     src="Images/SLU_Chat.jpg" width="250"     height="100" STYLE="position:absolute; TOP:300px; LEFT:400px;"></a>
<a href="#" onMouseOver="toggleDiv('div5',1)" onMouseOut="toggleDiv('div5',0)"><img     src="Images/Viewbook_Button_2011.jpg"     width="250" height="100" STYLE="position:absolute; TOP:400px; LEFT:400px;"></a>
<p class="desc">

<div class="dyncontent"><div id="div1">Div 1/div></div>

<div class="dyncontent"><div id="div2">Div 2</div></div>

<div class="dyncontent"><div id="div3">Div 3</div></div>

<div class="dyncontent"><div id="div4">Div 4</div></div>

<div class="dyncontent"><div id="div5">Div 5</div></div>

</p>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:56:40.733

大多数 JavaScript 都需要在行尾使用分号。通过类似 JSLint 的 linter 运行它以查找任何其他错误。另外，尝试使用`window.addEventListener('load',rotateContent,false);`而不是`window.onload=rotateContent`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T14:53:59.027

```
$(document).ready(function() {

  // code within ready() will execute
  // after page load

  rotatecontent();

}); 
```

# ruby-on-rails - heroku pg 密码认证失败错误

> ID：11296089
> 
> 赞同：0
> 
> 时间：2012-07-02T14:52:26.003
> 
> 标签：ruby-on-rails, heroku, cedar

我是一个彻头彻尾的heroku noob，所以请多多包涵。昨晚我将一个应用程序部署到heroku cedar，将'gem'pg''放入我的gemfile的生产组中，并将sqlite3留在我的开发和测试组中。

昨晚一切正常，今天我去炫耀它并得到了500错误。我的本地开发环境非常好。我查看了我的日志，发现它是“PG::Error Authentication Failed”。heroku 生产控制台上的同样问题。我假设正在为 heroku 生成的 pg 用户的身份验证失败。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:17:00.823

搞砸了，我刚刚销毁了应用程序并创建了一个新应用程序。我认为 Heroku 这个周末遇到的所有问题，可能只是与此有关。重新部署，它的工作到目前为止......

# wcf - WCF 自签名证书在客户端上不受信任

> ID：11296092
> 
> 赞同：10
> 
> 时间：2012-07-02T14:52:30.903
> 
> 标签：wcf, ssl, iis-7, ssl-certificate, self-signed

我有一个 WCF 服务，它只在两台服务器机器之间使用。它永远不会被公开使用。

我希望我可以将 SSL 与自签名证书一起使用以确保安全。

我使用 IIS7 创建了一个证书，使用 IE 和 MMC（Personal、TrustedRoot、Third-Party & TrustedPeople）将其安装在客户端计算机上。

我仍然无法通过代码或通过 IE8 访问该服务，但它不会质疑证书。

从 IE 中，我得到通常的“此网站的安全证书存在问题”。

从代码中我得到错误：“无法为具有权限的 SSL/TLS 安全通道建立信任关系”

为什么这不起作用？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-02T15:13:41.347

您确定您的自签名证书位于将访问您的 WCF 服务的客户端计算机上的**受信任的根证书颁发机构证书存储中吗？**请参阅下面我的一台 Windows Vista 机器信任的自签名证书的屏幕截图。

您是否还确定您的证书是自签名证书。请参阅我的一个自签名证书末尾的屏幕截图。

![在此处输入图像描述](../Images/c5a97925fb74e12e4270798ee09fb761.png)

![在此处输入图像描述](../Images/cc4ad99d119ab5ddaaf8942db28fe781.png)

![在此处输入图像描述](../Images/425433a1cefb419fc4f42fcaf61e9a6d.png)

**更新信息：**

查看[此](http://geekswithblogs.net/renewieldraaijer/archive/2011/05/11/self-signed-san-certificates.aspx)帖子以了解有关如何使用名为 SelfSSL7 的实用程序来创建包含多个主机名的自签名证书的信息。

这是另一个[链接](http://blogs.iis.net/thomad/archive/2010/04/16/setting-up-ssl-made-easy.aspx)，其中包含有关 SelfSSL7.exe 和下载信息的良好信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-12T16:57:38.297

我今天有这个 - 但使用 IIS7。如果您使用 IIS 生成证书（inetmgr-> 选择主节点，然后选择服务器证书，使用右侧菜单选项创建自认证证书。“颁发给”属性使用您机器的 FQDN 设置 - 例如“ mymachine.myintranet.copp.net' 或其他。

只要您为从服务连接的 url 提供 FQDN - 例如“mymachine.myintranet.copp.net/myservice/service.svc”，就会出现错误。

如果您使用的是替代 URL，例如 IP 地址或 localhost，则会发生错误。因此，上面的机器在他的网络中显然被称为 johnma，然后它就可以工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T15:05:24.107

它不起作用的原因是 IE 检测到证书不是从有效的 CA（证书颁发机构）创建的。自签名证书比其他任何东西都更适合测试。如果您没有收到有关 SSL 的警告，那么 SSL 就没有多大意义。

# sql-server - 尝试从 informix 数据库获取表时出现 Oracle 错误消息

> ID：11296094
> 
> 赞同：1
> 
> 时间：2012-07-02T14:52:47.753
> 
> 标签：sql-server, sql-server-2008, ssis, database-connection, informix

我创建了新的数据源以通过 odbc 数据提供程序（informix 3.33；32 位）访问 informix 数据库。测试此连接成功，因此我创建了一个新的连接管理器（来自数据源的新连接）以将其用于我的 ADO NET 目标任务。当我尝试选择目标表时，大约需要 10 秒的处理时间才能得到以下错误：

> ====================================
> 
> 无法检索连接管理器“测试”的表信息。无法为提供程序不变名称“Oracle.DataAccess.Client”创建 DbProviderFactory 类。验证此提供程序是否已正确安装在此计算机上。（微软视觉工作室）
> 
> ====================================
> 
> 无法为提供程序不变名称“Oracle.DataAccess.Client”创建 DbProviderFactory 类。验证此提供程序是否已正确安装在此计算机上。(Microsoft.DataTransformationServices.Design)
> 
> ------------------ 如需帮助，请点击：http: [//go.microsoft.com/fwlink ?ProdName=Microsoft %u00ae+Visual+Studio%u00ae+2008&ProdVer=9.0.30729.1&EvtSrc=Microsoft.DataTransformationServices.Design.SR&EvtID=CouldNotGetFactory&LinkId=20476](http://go.microsoft.com/fwlink?ProdName=Microsoft%u00ae+Visual+Studio%u00ae+2008&ProdVer=9.0.30729.1&EvtSrc=Microsoft.DataTransformationServices.Design.SR&EvtID=CouldNotGetFactory&LinkId=20476)
> 
> ------------------------------ 节目地点：
> 
> 在 Microsoft.DataTransformationServices.Design.PipelineUtils.GetActiveConnection(ConnectionManager connectionManager, IServiceProvider serviceProvider) 的 Microsoft.DataTransformationServices.Design.ConnectionManagerUtils.GetInvariantNameFromConnectionType(String connectionType) 的 Microsoft.DataTransformationServices.Design.ConnectionManagerUtils.GetConnectionTypeFromInvariantName(String providerInvariantName)。 Design.ComboBoxWithTables.FillTableOrViewComboBox()
> 
> ====================================
> 
> 调用的目标已引发异常。(mscorlib)
> 
> ------------------------------ 节目地点：
> 
> 在 System.Reflection.RtFieldInfo.InternalGetValue(Object obj, Boolean doVisibilityCheck, Boolean doCheckConsistency) 在 System.Reflection.RtFieldInfo.GetValue(Object obj) 在 System.RuntimeFieldHandle.GetValue(Object instance, RuntimeTypeHandle fieldType, RuntimeTypeHandle declaringType, Boolean & domainInitialized) 在System.Data.Common.DbProviderFactories.GetFactory(DataRow providerRow) 在 System.Data.Common.DbProviderFactories.GetFactory(String providerInvariantName) 在 Microsoft.DataTransformationServices.Design.ConnectionManagerUtils.GetConnectionTypeFromInvariantName(String providerInvariantName)
> 
> ====================================
> 
> 'Oracle.DataAccess.Client.OracleClientFactory' 的类型初始化程序引发了异常。
> 
> ====================================
> 
> Der Provider ist mit der Version des Oracle-Clients nicht kompatibel (Oracle Data Provider for .NET)
> 
> ------------------------------ 节目地点：
> 
> 在 Oracle.DataAccess.Client.OracleInit.Initialize() 在 Oracle.DataAccess.Client.OracleClientFactory..cctor()

这很奇怪，因为错误输出显示了问题，`Oracle Data Provider for .NET`并且我使用了一个 informix 驱动程序，而我的目的地也是一个 informix。

**我正在使用 Windows 7 64 位、Visual Studio 2008、Informix 7.31C4**

由于某种原因，该软件包使用了 oracle 驱动程序。

有什么建议么？

-

我刚刚将 informix 驱动程序更新到 3.5 版并创建了新的 ODBC 连接。即使在那之后，错误仍然保持不变。这很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T16:04:39.147

确保您使用的是正确的位级驱动程序。如果调用应用程序是 64 位，则需要使用 64 位驱动程序，如果是 32 位，则需要使用 32 位驱动程序。我怀疑你有一个 32 位驱动程序和一个 64 位应用程序，因此为什么它找不到驱动程序，因为它们不是相同的位级别。安装 64 位驱动程序，或将应用程序重新编译为 32 位可执行文件。

# c++ - 是否可以在 ruby 和 C++ 之间共享内存

> ID：11296096
> 
> 赞同：4
> 
> 时间：2012-07-02T14:52:53.143
> 
> 标签：c++, ruby, memory-management, object-model

我有一台 linux 机器，上面托管了一个 ruby​​ web 服务器和一个 c++ 进程。这两个组件都在同一个数据库上工作。

为了避免重复的数据库请求，我想制作和维护一个对象模型。

是否可以制作一个对象模型并在 ruby​​ 服务器和 c++ 进程之间共享它。如果是，有什么优点和缺点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T15:11:44.697

简而言之; 您无法读取单独的任意进程的内存。如果您能够重新编译这两个程序，则可以使用[ptrace](http://linux.die.net/man/2/ptrace)实现内存共享/IPC 。

但是，我建议您查看[memcached](http://memcached.org/)。它作为守护进程运行（如果您愿意，可以在本地运行）并提供一个非常快速的名称-值缓存，您可以将其用于任何事情。我们使用它来缓存 Rails 系统上昂贵计算的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T15:45:27.287

如果您真的想在进程之间共享内存，请在 POSIX 程序员手册中查找共享内存 ( `man shm.h`) 和信号量 ( )。`man sem.h`它允许您在 C++ 和 Ruby 之间共享*原始内存。*这不是最简单的方法 - 您需要将 FFI 写入Ruby`shm.h`并`sem.h`在 Ruby 中编写，并在共享内存缓冲区上实现适当的协议（使用信号量进行同步）。

您还可以使用其他一些 IPC 工具，如管道、套接字、RPC、MQ 甚至 DB，但它是复制而不是共享。

# java - 关于列表的性能提示

> ID：11296103
> 
> 赞同：3
> 
> 时间：2012-07-02T14:53:04.757
> 
> 标签：java

> **可能重复：**
> [list.clear() vs list = new ArrayList<int>();](https://stackoverflow.com/questions/6961356/list-clear-vs-list-new-arraylistint)

我有一个清单：

```
List<Integer> l1  = new ArrayList<Integer>(); 
```

并在该列表中添加了一些整数变量。经过一些操作后，我需要重用该列表，因此我将其设置为`null`.

哪个更好，设置`null`或使用`.clear()`？还是有其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:58:20.240

1.  `l1 = null`将破坏对列表对象的引用，并将被垃圾收集（假设没有其他对 的引用`List`）。

2.  `l1.clear()`将迭代整个列表并清除其所有值（即将每个索引处的对象设置为`null`）。

第一个不需要遍历整个列表，因此通常更快。如果出于某种原因需要重用该`List`对象，则应使用`l1.clear()`从列表中删除对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T15:00:14.090

`l1 = null;`将 null 分配给`l1`变量。如果该列表之前已存储在另一个对象中，则该另一个对象仍然具有对该列表的引用，因此仍然可以访问存储在该列表中的所有元素。如果之前引用的 List 对象对象`l1`不再可访问，它将被垃圾回收。它的元素也是如此：如果它们不再可访问，它们将被垃圾收集。

`l1.clear();`非常不同：它从列表中删除所有元素。如果该列表之前已存储在另一个对象中，则此另一个对象具有对您刚刚清除的列表的引用，因此无法再访问存储在列表中的元素（因为您删除了它们）。如果之前存储在列表中的元素不再可访问，它们将被垃圾回收。该列表不会出现，因为您保留了对它的引用 ( `l1`)。

因此，`l1 = null`如果要重用*变量*，但要保持 List*对象*原样，则应使用 , 。`l1.clear()`如果要从列表中删除所有元素，则应使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T14:56:03.503

您是要清除列表的内容，还是从新维度、新数组重新开始？只是垃圾收集数组并调用 l1 = new Array(); 并且您将生成一个具有空值的新数组，而不是遍历并尝试清除整个列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T14:57:05.670

如果您使用的是`LinkedList`,`clear()`将会非常快并且迭代也非常快。但是单次访问会慢一些。您的选择取决于用例...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T14:59:56.613

如果将其设置为`null`，则必须在使用前再次对其进行初始化。所以我会这样做：

```
l1  = new ArrayList<Integer>(); 
```

我认为这会比打电话更快`.clear()`

# php - 使用 html 表单将记录添加到 mysql 数据库后显示弹出消息

> ID：11296104
> 
> 赞同：0
> 
> 时间：2012-07-02T14:53:04.703
> 
> 标签：php, mysql

我有以下html表单：

```
<html>
<body>
<form action="insert.php" method="post">
Firstname: <input type="text" name="firstname" />
Lastname: <input type="text" name="lastname" />
Age: <input type="text" name="age" />
<input type="submit" />
</form>
</body>
</html> 
```

这是 .php 文件：

```
<?php
$con = mysql_connect("localhost","peter","abc123");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("my_db", $con);

$sql="INSERT INTO Persons (FirstName, LastName, Age)
VALUES
('$_POST[firstname]','$_POST[lastname]','$_POST[age]')";

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
echo "1 record added";

mysql_close($con);
?> 
```

如何在提交记录后显示 2 秒的弹出消息，例如“已添加记录”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:03:53.287

您正在寻找的内容与 PHP 无关，因为它是客户端......

有两种方法可以做到这一点：

*   在您提交渲染弹出窗口并在 x 次后使用 javascript 将其删除...
*   使用 ajax (javascript) 提交表单并解析结果，并在 javascript 中添加弹出窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T15:18:30.590

试试下面的。你也可以增强它。

在您的表单页面上添加用于弹出窗口的 css

```
//adduser.php
#popup {
    visibility: hidden; 
    background-color: red; 
    position: absolute;
    top: 10px;
    z-index: 100; 
    height: 100px;
    width: 300px
} 
```

和你的弹出 div

```
//still adduser.php
<div id="popup">
    Record added successfully
</div> 
```

成功后用 PHP 输出

```
//still adduser.php - probably at the bottom of the page
<?php
    $recordAdded = false;

    if(isset($_GET['status'] && $_GET['status'] == 1)
       $recordAdded = true;

    if($recordAdded)
    {
     echo '
       <script type="text/javascript">
         function hideMsg()
         {
            document.getElementById("popup").style.visibility = "hidden";
         }

         document.getElementById("popup").style.visibility = "visible";
         window.setTimeout("hideMsg()", 2000);
       </script>';
    }
?> 
```

脚本取消隐藏弹出窗口以显示消息，然后在 2 秒后将其隐藏

您可以使用 jQuery 和 CSS 增强 div 动画

**更新：**

This assumes you will change your `.html` that contains the form file to `.php`

```
//insert.php
if (!mysql_query($sql,$con))
{
  //die('Error: ' . mysql_error());
}
else
{
  // 1 record added
  //if number of rows affected > 0
  header("Location: backtoform.php?status=1"); //redirects back to form with status=1
} 
```

Also try out the suggested jQuery/Ajax method mentioned in the comments

# jquery - 如何获得可扩展和可折叠的 div 的高度

> ID：11296105
> 
> 赞同：1
> 
> 时间：2012-07-02T14:53:08.097
> 
> 标签：jquery

希望能得到一些帮助，我不是 jQuery 方面的专家，所以请多多包涵。

我有 2 个 expandable/collapsible`<div>`包含动态搜索优化链接，默认折叠状态显示前 12 个链接，并带有一个“显示更多”切换按钮，单击该按钮会展开`<div>`以显示完整的链接集。

我需要知道这些的高度`<div>`，我可以这样得到：

```
var heightRefLinks = $('.search-refine').outerHeight(true); 
```

但这仅在单击“显示更多”切换按钮之前捕获折叠高度，我如何也获得展开高度？

我需要这样做的原因是因为我有一个工具栏元素，一旦你滚动到它，它就会“粘”到视口的顶部，工具栏只需要“粘”到视口，而搜索结果列表是在视图中，一旦它们不在视图中，工具栏就会从视口中“脱离”。为了“不粘”，我必须为插件选项设置一个 px 值：`bottomBound`这是从视口底部到列表底部的 px 高度。我在列表下方有一些元素，它们都有静态高度，所以让“不粘”行为起作用并不麻烦，但随后出现了前面提到的可扩展/可折叠`<div>`的。

**编辑：**包括使用此插件的 jQuery：http: [//themousepotatowebsite.co.za/introducing-the-stick-to-top-plugin/](http://themousepotatowebsite.co.za/introducing-the-stick-to-top-plugin/)

```
// get the heights of various elements
var heightToolbar = $('.sticky-panel-toolbar').outerHeight(true);
var heightContentMeta = $('.property-listing-meta').outerHeight(true);
var heightLastPropItem = $('.property-listing:last-child > .property-tile:last-   child').outerHeight(true);
var heightFooter = $('.footer').outerHeight(true); 
// set bottom gaps
var bottomGap = heightFooter + 32;
var bottomGapToolbar = heightToolbar + heightFooter + heightContentMeta +    heightLastPropItem;

// 'Toolbar - Search Results' version
$('.sticky-panel-toolbar-search').stickToTop({
bottomBound: bottomGapToolbar,
onStick: function() {
    $(this).addClass('stuck');
},
onDetach: function() {
    $(this).removeClass('stuck');
}
}); 
```

`heightContentMeta`是我正在努力解决的问题，因为这是`<div>`搜索结果列表之后的所有内容的容器，其中包含`<div>`2 个可扩展/可折叠`<div>`的。我还在`<iframe>`那里注入了一个 Google Adwords，我也无法获得高度，但我想首先关注可扩展/可折叠`<div>`的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T14:57:35.013

这应该给你元素内容的高度。

```
$(".search-refine")[0].scrollHeight 
```

[**演示**](http://jsfiddle.net/JpGUM/)

# asp.net - 覆盖自定义 CheckBox 中的 Enabled 属性

> ID：11296106
> 
> 赞同：1
> 
> 时间：2012-07-02T14:53:18.283
> 
> 标签：asp.net, checkbox, controls

我有一个自定义 CheckBox 类。我已经覆盖了 Enabled 和 Visible 属性的 getter（我需要一些复杂的行为）。

当我运行应用程序并调试它时，我发现我的 Enabled 的 getter 根本没有被调用。同时该`Visible`属性被正确调用，我得到了想要的结果。

```
public class CustomCheckBox : CheckBox
{
    public override bool Visible
    {
        get
        {
            bool result;

            //Do something

            return result;
        }
        set
        {
            base.Visible = value;
        }
    }
    public override bool  Enabled
    {
        get
        {
            bool result;

            //Do something

            return result;
        }
        set
        {
            base.Enabled = value;
        }
    }
} 
```

我对此有些怀疑。也许在渲染阶段 CheckBox 不会调用 Enabled 属性，而是在 InputAttribute 集合中查找所需的属性。我不确定，也不知道如何确定。

# java - Memcache getItemCount() 计算过期键？

> ID：11296110
> 
> 赞同：1
> 
> 时间：2012-07-02T14:53:34.983
> 
> 标签：java, google-app-engine, memcached

我想在任何给定时间获取“活动”键的数量。现在根据 API 文档 getItemCount() 意味着返回这个。

然而事实并非如此。过期键不会减少 getItemCount() 的值。为什么是这样？如何准确计算所有未过期的“活动”或“活动”密钥？

这是我的放置代码；syncCache.put(uid, cachedUID, Expiration.byDeltaSeconds(3), SetPolicy.SET_ALWAYS);

现在应该在 3 秒后过期密钥。它使它们过期，但 getItemCount() 不反映键的真实计数。

更新：似乎 memcache 可能不是我应该使用的，所以这就是我想要做的。

我希望编写一个 google-app 引擎服务器/应用程序，作为桌面应用程序的“在线用户”功能。桌面应用程序使用唯一 ID 作为参数向应用程序发出 http 请求。应用程序将此 UID 与时间戳一起存储。这是每 3 分钟完成一次。

每 5 分钟删除时间戳超出 5 分钟窗口的任何条目。然后你计算你有多少条目，这就是有多少用户“在线”。

过期功能似乎很完美，因为那时我什至不需要担心时间戳或清除过期条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:02:09.603

这可能是文档中的一个问题，python 没有提到任何关于活着的。这在 python 中也是可重现的。

另请参阅此相关帖子[memcached 中的延迟过期机制如何运作？](https://stackoverflow.com/questions/5986867/how-does-the-lazy-expiration-mechanism-in-memcached-operate).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T16:56:13.350

getItemCount() 可能会返回过期的键，因为它是 memcache 和许多其他缓存的工作方式。

Memcache 可以帮助您做您描述的事情，但不是您尝试做的方式。考虑完全相反的情况：您将在线用户放在 memcache 中，然后 appengine 由于缺少可用内存而将其从 memcache 中清除。缓存不会为您提供任何保证您的项目将在任何特定时期存储。因此，memcache 可以让您减少对数据存储的请求数量和延迟。

其中一种方法是：维护存储在数据存储中（或者如果您不需要非常精确，则在内存缓存中）的排序映射（用户 ID、上次登录刷新）条目。在每次登录/刷新时，您都会通过特定键更新值，并从定期 cron-job 中删除地图中的旧用户。因此地图的大小将是特定时刻登录使用的数量。

确保 map 适合 1 Mb，这是 memcache 或数据存储的限制。

# php - 修改代码以更改站点地图中的时间戳时区

> ID：11296111
> 
> 赞同：0
> 
> 时间：2012-07-02T14:53:36.327
> 
> 标签：php, timezone, timestamp, sitemap, last-modified

下面是我用于站点地图的插件的代码。

1.  我想知道是否有办法在所有日期变量和其中的函数上“强制”使用不同的时区。

2.  如果没有，如何修改代码以更改时间戳以反映不同的时区？例如，到`America/New_York`时区。

请查找`date`以快速获取相应的代码块。[**Pastebin 上的代码**](http://pastebin.com/GsRqqT2m)。

```
<?php
/**
 * @package XML_Sitemaps
 */

class WPSEO_Sitemaps {

.....

    /**
     * Build the root sitemap -- example.com/sitemap_index.xml -- which lists sub-sitemaps
     * for other content types.
     *
     * @todo lastmod for sitemaps?
     */

    function build_root_map() {
        global $wpdb;

        $options = get_wpseo_options();

        $this->sitemap = '<sitemapindex xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">' . "\n";
        $base          = $GLOBALS['wp_rewrite']->using_index_permalinks() ? 'index.php/' : '';

        // reference post type specific sitemaps
        foreach ( get_post_types( array( 'public' => true ) ) as $post_type ) {
            if ( $post_type == 'attachment' )
                continue;

            if ( isset( $options['post_types-' . $post_type . '-not_in_sitemap'] ) && $options['post_types-' . $post_type . '-not_in_sitemap'] )
                continue;

            $count = $wpdb->get_var( $wpdb->prepare( "SELECT COUNT(ID) FROM $wpdb->posts WHERE post_type = %s AND post_status = 'publish' LIMIT 1", $post_type ) );
            // don't include post types with no posts
            if ( !$count )
                continue;

            $n = ( $count > 1000 ) ? (int) ceil( $count / 1000 ) : 1;
            for ( $i = 0; $i < $n; $i++ ) {
                $count = ( $n > 1 ) ? $i + 1 : '';

                if ( empty( $count ) || $count == $n ) {
                    $date = $this->get_last_modified( $post_type );
                } else {
                    $date = $wpdb->get_var( $wpdb->prepare( "SELECT post_modified_gmt FROM $wpdb->posts WHERE post_status = 'publish' AND post_type = %s ORDER BY post_modified_gmt ASC LIMIT 1 OFFSET %d", $post_type, $i * 1000 + 999 ) );
                    $date = date( 'c', strtotime( $date ) );
                }

                $this->sitemap .= '<sitemap>' . "\n";
                $this->sitemap .= '<loc>' . home_url( $base . $post_type . '-sitemap' . $count . '.xml' ) . '</loc>' . "\n";
                $this->sitemap .= '<lastmod>' . htmlspecialchars( $date ) . '</lastmod>' . "\n";
                $this->sitemap .= '</sitemap>' . "\n";
            }
        }

        // reference taxonomy specific sitemaps
        foreach ( get_taxonomies( array( 'public' => true ) ) as $tax ) {
            if ( in_array( $tax, array( 'link_category', 'nav_menu', 'post_format' ) ) )
                continue;

            if ( isset( $options['taxonomies-' . $tax . '-not_in_sitemap'] ) && $options['taxonomies-' . $tax . '-not_in_sitemap'] )
                continue;
            // don't include taxonomies with no terms
            if ( !$wpdb->get_var( $wpdb->prepare( "SELECT term_id FROM $wpdb->term_taxonomy WHERE taxonomy = %s AND count != 0 LIMIT 1", $tax ) ) )
                continue;

            // Retrieve the post_types that are registered to this taxonomy and then retrieve last modified date for all of those combined.
            $taxobj = get_taxonomy( $tax );
            $date   = $this->get_last_modified( $taxobj->object_type );

            $this->sitemap .= '<sitemap>' . "\n";
            $this->sitemap .= '<loc>' . home_url( $base . $tax . '-sitemap.xml' ) . '</loc>' . "\n";
            $this->sitemap .= '<lastmod>' . htmlspecialchars( $date ) . '</lastmod>' . "\n";
            $this->sitemap .= '</sitemap>' . "\n";
        }

        // allow other plugins to add their sitemaps to the index
        $this->sitemap .= apply_filters( 'wpseo_sitemap_index', '' );
        $this->sitemap .= '</sitemapindex>';

    }

    /**
     * Build a sub-sitemap for a specific post type -- example.com/post_type-sitemap.xml
     *
     * @param string $post_type Registered post type's slug
     */
    function build_post_type_map( $post_type ) {
        $options = get_wpseo_options();

        ............

        // We grab post_date, post_name, post_author and post_status too so we can throw these objects into get_permalink, which saves a get_post call for each permalink.
        while ( $total > $offset ) {

            $join_filter  = apply_filters( 'wpseo_posts_join', '', $post_type );
            $where_filter = apply_filters( 'wpseo_posts_where', '', $post_type );

            // Optimized query per this thread: http://wordpress.org/support/topic/plugin-wordpress-seo-by-yoast-performance-suggestion
            // Also see http://explainextended.com/2009/10/23/mysql-order-by-limit-performance-late-row-lookups/

            $posts = $wpdb->get_results( "SELECT l.ID, post_content, post_name, post_author, post_parent, post_modified_gmt, post_date, post_date_gmt
            FROM ( 
                SELECT ID FROM $wpdb->posts {$join_filter}
                        WHERE post_status = 'publish'
                        AND post_password = ''
                        AND post_type = '$post_type'
                        {$where_filter}
                        ORDER BY post_modified ASC
                        LIMIT $steps OFFSET $offset ) o
            JOIN $wpdb->posts l
                ON l.ID = o.ID
                ORDER BY l.ID" );

            /*          $posts = $wpdb->get_results("SELECT ID, post_content, post_name, post_author, post_parent, post_modified_gmt, post_date, post_date_gmt
                FROM $wpdb->posts {$join_filter}
                WHERE post_status = 'publish'
                AND post_password = ''
                AND post_type = '$post_type'
                {$where_filter}
                ORDER BY post_modified ASC
                LIMIT $steps OFFSET $offset"); */

            $offset = $offset + $steps;

            foreach ( $posts as $p ) {
                $p->post_type   = $post_type;
                $p->post_status = 'publish';
                $p->filter      = 'sample';

                if ( wpseo_get_value( 'meta-robots-noindex', $p->ID ) && wpseo_get_value( 'sitemap-include', $p->ID ) != 'always' )
                    continue;
                if ( wpseo_get_value( 'sitemap-include', $p->ID ) == 'never' )
                    continue;
                if ( wpseo_get_value( 'redirect', $p->ID ) && strlen( wpseo_get_value( 'redirect', $p->ID ) ) > 0 )
                    continue;

                $url = array();

                $url['mod'] = ( isset( $p->post_modified_gmt ) && $p->post_modified_gmt != '0000-00-00 00:00:00' ) ? $p->post_modified_gmt : $p->post_date_gmt;
                $url['chf'] = 'weekly';
                $url['loc'] = get_permalink( $p );

.............

    }

    /**
     * Build a sub-sitemap for a specific taxonomy -- example.com/tax-sitemap.xml
     *
     * @param string $taxonomy Registered taxonomy's slug
     */
    function build_tax_map( $taxonomy ) {
        $options = get_wpseo_options();

..........

            // Grab last modified date
            $sql        = "SELECT MAX(p.post_date) AS lastmod
                    FROM    $wpdb->posts AS p
                    INNER JOIN $wpdb->term_relationships AS term_rel
                    ON      term_rel.object_id = p.ID
                    INNER JOIN $wpdb->term_taxonomy AS term_tax
                    ON      term_tax.term_taxonomy_id = term_rel.term_taxonomy_id
                    AND     term_tax.taxonomy = '$c->taxonomy'
                    AND     term_tax.term_id = $c->term_id
                    WHERE   p.post_status = 'publish'
                    AND     p.post_password = ''";
            $url['mod'] = $wpdb->get_var( $sql );
            $url['chf'] = 'weekly';
            $output .= $this->sitemap_url( $url );
        }

    }

    /**
     * Build the <url> tag for a given URL.
     *
     * @param array $url Array of parts that make up this entry
     * @return string
     */
    function sitemap_url( $url ) {
        if ( isset( $url['mod'] ) )
            $date = mysql2date( "Y-m-d\TH:i:s+00:00", $url['mod'] );
        else
            $date = date( 'c' );
        $output = "\t<url>\n";
        $output .= "\t\t<loc>" . $url['loc'] . "</loc>\n";
        $output .= "\t\t<lastmod>" . $date . "</lastmod>\n";
        $output .= "\t\t<changefreq>" . $url['chf'] . "</changefreq>\n";
        $output .= "\t\t<priority>" . str_replace( ',', '.', $url['pri'] ) . "</priority>\n";
        if ( isset( $url['images'] ) && count( $url['images'] ) > 0 ) {
            foreach ( $url['images'] as $img ) {
                $output .= "\t\t<image:image>\n";
                $output .= "\t\t\t<image:loc>" . esc_html( $img['src'] ) . "</image:loc>\n";
                if ( isset( $img['title'] ) )
                    $output .= "\t\t\t<image:title>" . _wp_specialchars( html_entity_decode( $img['title'], ENT_QUOTES, get_bloginfo('charset') ) ) . "</image:title>\n";
                if ( isset( $img['alt'] ) )
                    $output .= "\t\t\t<image:caption>" . _wp_specialchars( html_entity_decode( $img['alt'], ENT_QUOTES, get_bloginfo('charset') ) ) . "</image:caption>\n";
                $output .= "\t\t</image:image>\n";
            }
        }
        $output .= "\t</url>\n";
        return $output;
    }

    /**
     * Get the modification date for the last modified post in the post type:
     *
     * @param array $post_types Post types to get the last modification date for
     * @return string
     */
    function get_last_modified( $post_types ) {
        global $wpdb;
        if ( !is_array( $post_types ) )
            $post_types = array( $post_types );

        $result = 0;
        foreach ( $post_types as $post_type ) {
            $key  = 'lastpostmodified:gmt:' . $post_type;
            $date = wp_cache_get( $key, 'timeinfo' );
            if ( !$date ) {
                $date = $wpdb->get_var( $wpdb->prepare( "SELECT post_modified_gmt FROM $wpdb->posts WHERE post_status = 'publish' AND post_type = %s ORDER BY post_modified_gmt DESC LIMIT 1", $post_type ) );
                if ( $date )
                    wp_cache_set( $key, $date, 'timeinfo' );
            }
            if ( strtotime( $date ) > $result )
                $result = strtotime( $date );
        }

        // Transform to W3C Date format.
        $result = date( 'c', $result );
        return $result;
    }
}

global $wpseo_sitemaps;
$wpseo_sitemaps = new WPSEO_Sitemaps(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:57:37.733

我相信您正在寻找该[`date_default_timezone_set()`](http://php.net/date_default_timezone_set)功能，它将强制所有日期功能，包括`date()`，使用指定的时区。

```
date_default_timezone_set( 'America/New_York'); 
```

对于您的特定情况，仅将更改应用于插件，您应该使用 保存当前时区[`date_default_timezone_get()`](http://php.net/date_default_timezone_get)，然后设置您自己的时区，并在完成后恢复它。所以，你可以这样做：

```
class WPSEO_Sitemaps {

    private $old_timezone = '';
    private $new_timezone = 'America/New_York';

    function setTimezone() {
        $this->old_timezone = date_default_timezone_get();
        date_default_timezone_set( $this->new_timezone);
    }

    function revertTimezone() {
        date_default_timezone_set( $this->old_timezone);
    }

    function foo() {
        $this->setTimezone();
        date();
        $tihs->revertTimezone();
    }
} 
```

# android - Android 水平仪 (SENSOR_ACCELEROMETER)

> ID：11296112
> 
> 赞同：1
> 
> 时间：2012-07-02T14:53:38.637
> 
> 标签：android, accelerometer, android-sensors

我正在尝试在 android 中创建一个矫直机，但我真的不知道如何正确地做到这一点。加速度计的返回值在 10 到 -10 之间，我不知道如何为视图设置动画，所以我看起来像一个真正的水平仪。有没有人有一些我可以查看的示例代码？

我搜索了整个互联网，但找不到任何矫直机的例子。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:09:57.617

您可以在这里使用气泡级别的示例代码吗？

[http://code.google.com/p/androgames-sample/](http://code.google.com/p/androgames-sample/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T15:08:00.967

可以在[这里](http://code.google.com/p/androgames-sample/source/browse/#svn/Market-apps/Level/trunk)找到一个示例源。

# php - 如何在php服务器上获取httppost文件名

> ID：11296116
> 
> 赞同：0
> 
> 时间：2012-07-02T14:54:04.467
> 
> 标签：php

我使用 FileEntity httppost 将文件发布到 php apache 服务器，但我不想更改文件名。

如何使用 php 从服务器获取文件名？我已经拿到文件了： $filename='test.zip';//自定义的名字 file_get_contents('php://input'); file_put_contents($filename,$data);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T14:59:09.710

HTML (test.html):

```
<!-- Make sure you have enctype and a name on your file input -->
<form method="post" action="test.php" enctype="multipart/form-data">
    <input type="file" name="test" />
    <button>Submit</button>
</form> 
```

PHP (test.php):

```
// Since we've set our file input to name 'test' and 
// we've posted form-data, we can use $_FILES

print_r( $_FILES['test'] ); 
```

* * *

只需使用[`$_FILES`](http://php.net/manual/en/reserved.variables.files.php).

```
Array
(
    [name] => test.jpg
    [type] => image/jpeg
    [tmp_name] => /tmp/pasd41l3FmFr
    [error] => 0
    [size] => 15476
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:04:02.023

[glob](http://php.net/manual/en/function.glob.php) — 查找匹配模式的路径名

```
foreach (glob("*.*") as $filename) {
    print $filename. "\n";
} 
```

# javascript - 创建在许多页面中可见的全局 javascript 或 jQuery 变量

> ID：11296117
> 
> 赞同：0
> 
> 时间：2012-07-02T14:54:10.083
> 
> 标签：javascript, jquery

我有一个带有许多函数的 js 变量，我想在其中一个中创建一个全局变量，该变量在另一个加载 js 文件的 php 文件中可见。

我怎样才能做到这一点 ？

感谢帮助。

谢谢帮助：这是一个编辑：

该变量具有动态值，并且是`on event.keyCode`在我的 js 文件中尝试过生成的： `window.selected_sku = null;`在 js 文件的顶部

并在适当的功能中：

```
window.selected_sku =  v; 
```

在我的 php 中的 javascript 代码中，我有：

```
 if(window.selected_sku!=null){
        alert(window.selected_sku);
    } 
```

但我没有得到任何警报！

帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:57:46.723

将其分配给窗口

```
window.variable = "this is a variable". 
```

当您包含 js 文件时，您可以访问任何文件中的变量。

# java - 如何在 Eclipse RCP 应用程序中禁用快速访问文本字段

> ID：11296122
> 
> 赞同：2
> 
> 时间：2012-07-02T14:54:33.133
> 
> 标签：java, eclipse, plugins, rcp

今天我将 Eclipse IDE 从 3.7 更改为 4.2，并且我的插件项目在 UI 的状态栏中有一个名为 QuickAccess 的新功能。但我不需要它，所以我怎么能禁用这个功能，因为我的按钮栏的位置已经改变了......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T12:12:31.347

对于所有有同样问题的人，似乎这个新功能是硬编码的，不能被禁用：/ [https://bugs.eclipse.org/bugs/show_bug.cgi?id=362420](https://bugs.eclipse.org/bugs/show_bug.cgi?id=362420)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-08T04:20:39.933

转到帮助-> 安装新软件 [https://raw.github.com/atlanto/eclipse-4.x-filler/master/pdt_tools.eclipse-4.x-filler.update/](https://raw.github.com/atlanto/eclipse-4.x-filler/master/pdt_tools.eclipse-4.x-filler.update/)

安装该插件并重新启动 Eclipse。快速访问自动隐藏。否则您可以选择隐藏窗口 --> 隐藏快速访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-01T02:59:19.033

[这是一篇文章](http://andydunkel.net/eclipse/java/2013/08/20/eclipse-rcp-remove-quick-access-from-toolbar.html)，展示了一种使用 CSS 隐藏它的方法。使用 Eclipse 4.3 验证

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-20T22:00:42.740

[Lars Vogel](http://blog.vogella.com/author/vogella/)刚刚在他的博客文章“[将 Eclipse 3.x RCP 应用程序移植到 Eclipse 4.4 – 现在没有 QuickAccess 框](http://blog.vogella.com/2014/01/20/porting-eclipse-3-x-rcp-application-to-eclipse-4-4-now-without-quickaccess-box/)”中报告了：

[错误 411821（[ ]通过片段或其他方式`QuickAccess`贡献`SearchField`](https://bugs.eclipse.org/bugs/show_bug.cgi?id=411821)） 现已解决。
感谢 René Brandstetter：

> 如果 RCP 应用程序未在其模型中提供 QuickAccess 元素，则它将不可见。所以默认是没有 QuickAcces，够简单吗？:)

有关更多详细信息，请参阅[提交 839ee2](http://git.eclipse.org/c/platform/eclipse.platform.ui.git/commit/?id=839ee2d7fec814e08fdd1d5461d1779684e44aea)

> 通过“ `QuickAccess`”内的 e4 应用程序模型片段提供“ `org.eclipse.ui.ide.application`”。
> 这会从每个“无”中删除“ `QuickAccess`”搜索字段`org.eclipse.ui.ide.application`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-09T07:03:46.150

您也可以隐藏它并使其工作方式与它在 Eclipse3.7 中的工作方式相当：当用户按下 ctrl+3 时，快速访问功能会弹出（在 Eclipse4.3 中，ctrl+3 快捷方式仍然可用）。

您可以添加到 WorkbenchWindowAdvisor 实现中的代码示例（适用于 Eclipse4.3 rcp 应用程序）

```
private IHandlerActivation quickAccessHandlerActivation;

@Override
public void postWindowOpen() {
    hideQuickAccess();
}

private void hideQuickAccess() {
    IWorkbenchWindow window = PlatformUI.getWorkbench().getActiveWorkbenchWindow();
    setQuickAccessVisible(window, false);

    final IHandlerService service = (IHandlerService) window.getService(IHandlerService.class);
    quickAccessHandlerActivation = service.activateHandler(QUICK_ACCESS_COMMAND_ID, new CustomQuickAccessHandler());
}

private void setQuickAccessVisible(IWorkbenchWindow window, boolean visible) {
    if (window instanceof WorkbenchWindow) {
        MTrimBar topTrim = ((WorkbenchWindow) window).getTopTrim();

        for (MTrimElement element : topTrim.getChildren()) {
            if (QUICK_ACCESS_ELEMENT_ID.equals(element.getElementId())) {
                element.setVisible(visible);
                if (visible) {
                    Composite control = (Composite) element.getWidget();
                    control.getChildren()[0].addFocusListener(new QuickAccessFocusListener());
                }
                break;
            }
        }
    }
}

private class QuickAccessFocusListener implements FocusListener {

    @Override
    public void focusGained(FocusEvent e) {
        //not interested
    }

    @Override
    public void focusLost(FocusEvent e) {
        ((Control) e.widget).removeFocusListener(this);
        hideQuickAccess();
    }

}

private class CustomQuickAccessHandler extends AbstractHandler {
    @Override
    public Object execute(ExecutionEvent event) throws ExecutionException {
        IWorkbenchWindow window = PlatformUI.getWorkbench().getActiveWorkbenchWindow();
        final IHandlerService service = (IHandlerService) window.getService(IHandlerService.class);
        setQuickAccessVisible(window, true);
        if (quickAccessHandlerActivation != null) {
            service.deactivateHandler(quickAccessHandlerActivation);

            try {
                return service.executeCommand(QUICK_ACCESS_COMMAND_ID, null);
            } catch (NotDefinedException e) {

            } catch (NotEnabledException e) {

            } catch (NotHandledException e) {

            }
        }

        return null;
    }

} 
```

# c# - 如何计算除法的无限值？

> ID：11296125
> 
> 赞同：4
> 
> 时间：2012-07-02T14:54:49.447
> 
> 标签：c#, algorithm, oop

> **可能重复：**
> [如何知道分数中的重复小数？](https://stackoverflow.com/questions/8946310/how-to-know-the-repeating-decimal-in-a-fraction)

1/3 与 3/10 不同。0.33333 != 0.3

所以 1/3 将是 0.3（第三行上方有一行）

1/12 = 0.833333 = 0.083（三号上方有一行）

1/13 = 0.076923076923 = 0.|076923|

这些线代表重复部分。

我计划在课堂上使用这个模型。我对这种情况有点迷茫。我只需要一些想法来确定重复值。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T14:59:47.697

[循环检测算法](http://en.wikipedia.org/wiki/Cycle_detection)就是答案。您可以使用[Floyd 的循环检测算法](http://en.wikipedia.org/wiki/Cycle_detection#Tortoise_and_hare)或[Brent 的循环检测算法](http://en.wikipedia.org/wiki/Cycle_detection#Brent.27s_algorithm)。

插入这些算法的函数是产生商的下一个数字的函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-02T14:59:38.273

在每一步，除法，取数，取余数，乘以十，重复直到得到相同的数字。

例如，对于 1/81：

```
1/81 = 0 with remainder 1       0
10/81 = 0 with remainder 10     0.0
100/81 = 1 with remainder 19    0.01
190/81 = 2 with remainder 28    0.012
280/81 = 3 with remainder 37    0.0123
...
10/81 = 0 with remainder 10; saw this already.
0.|012345679| 
```

这是一个示例实现：

```
private static string GetRepeatingPart(int n, int d) {
    var seen = new HashSet<int>();
    var result = new StringBuilder();

    n = (n % d) * 10;

    while(true) {
        int p = n / d;
        n = (n % d) * 10;

        if(seen.Contains(n)) {
            return result.ToString();
        }

        result.Append(p);
        seen.Add(n);
    }
} 
```

# firefox-addon-sdk - FF Addon-sdk：避免服务器脚本的简单方法

> ID：11296134
> 
> 赞同：0
> 
> 时间：2012-07-02T14:55:31.510
> 
> 标签：firefox-addon-sdk

我正在尝试，给定一个目标网站，避免所有的服务器脚本。为此，我首先下载了该页面的内容，然后创建了一个检测 URL 的 pagemod。问题是，然后，我想加载存储的内容，但我不知道如何轻松地做到这一点。例如，我尝试过：

```
 new PageMod({
      include: /(http:\/\/)?(www.google)(.([a-z]){2,3}){1,2}(\/)?/,
      contentURL: data.url('google.html'),
      contentScriptWhen: 'end',
      contentScriptFile: [data.url('contentScripts/jquery.js'), 
                          data.url('contentScripts/handleQuery.js')],
      contentScript: 'alert("' + data.load('contentScripts/google.html') + '");',          
      onAttach: function getQuery(worker) { ... } 
```

其中 google.html 是 Google 的主页。但它给了我很多错误......

有人知道更好的解决方案吗？

**编辑**：目标是以某种方式避免在您访问网站时服务器可以执行的脚本（PHP、C# 等）。我认为如果我下载该页面，我只会获得客户端代码（html、css、javascript 等），因此，如果我在本地加载该页面，我可以这样做。问题是我不知道如何使用 Firefox addon-sdk 加载存储在数据文件夹中的本地页面。我希望这个解释能澄清一点。

# html - HTML中的双缓冲SVG

> ID：11296137
> 
> 赞同：3
> 
> 时间：2012-07-02T14:55:52.143
> 
> 标签：html, svg, jquery-svg

我想知道为一些*可能很复杂*的SVG*模拟*双缓冲的更好方法是什么。我经常重新加载修改后的 SVG，我想摆脱加载延迟。我正在考虑使用两个重叠的 DIV 并在 onLoad 之后切换可见性。有更好的选择吗？

 ***编辑**

现在我已经在 DIV 中实现了两个 SVG 实例重叠，样式显示切换（块/无）。它几乎在 FF 中工作（漂亮、平滑的变形，只是初始显示导致面积减少），但 Chrome 拒绝为我提供同步形状位置所需的 ScreenCTM 变换。我猜这些问题（FF 中的部分区域渲染，Chrome 中没有渲染）是相关的。现在我正在尝试使用可见性：隐藏。

**编辑**

切换可见性给出可接受的结果。感谢大家到目前为止的帮助。

**编辑**

我发现了一个问题，这让我再次在这里寻求帮助：我正在将 Boostrap 用于非 SVG 相关的 UI，并且工具栏的行为非常奇怪：当我在 2^ DIV（最初隐藏）上切换可见性时，没有事件到达工具栏。再次切换到 1^，事件正常。

我发现使用 position:absolute 或 position:fixed 是一样的（当然，对于事件问题），而 top:0 是“罪魁祸首”。使用任何大于 0 的值让事件流动，但 DIV 不可见。所以最初的问题是有道理的：有比切换可见性更好的方法吗？或关于html结构的提示？目前我的 HTML 看起来像

```
<div class="row-fluid" style="height:800px;background-color:cyan">
<div id="flowchart" style="visibility:visible;width:100%;height:100%"></div>
<div id="flowchart_x" style="visibility:hidden;width:100%;height:100%;position:absolute;top:0"></div>
</div> 
```*

# android - Android 应用程序 (ndk) 中本机 cpp 函数的 UnsatisfiedLinkError

> ID：11296141
> 
> 赞同：1
> 
> 时间：2012-07-02T14:55:59.320
> 
> 标签：android, c++, android-ndk

我正在尝试在 cpp 中运行一个简单的 Android ndk 应用程序，但我收到 Generate() 函数的 UnsatisfiedLink 错误。

任何帮助，将不胜感激。我精通 c++，但我的 java 有点生疏。我一直在尝试来自网络的很多关于命名的技巧，但到目前为止还没有运气。这是我的文件：

本机.cpp：

```
#include <string.h>
#include <jni.h>

jstring Java_com_optimuse_app_OptimuseAppActivity_generate(JNIEnv* env, jobject thiz){
    return env->NewStringUTF("Hello from JNI !");
} 
```

安卓.mk：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := native
LOCAL_SRC_FILES := native.cpp

include $(BUILD_SHARED_LIBRARY) 
```

我用 ndk-build 编译它，一切顺利，它为我提供了一个 libnative.so，它位于项目目录中。剩下的我用eclipse。

OptimuseAppActivity.java：

```
package com.optimuse.app;
import android.app.Activity;
import android.widget.TextView;
import android.os.Bundle;

public class OptimuseAppActivity extends Activity 
{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        TextView  tv = new TextView(this);
        tv.setText( generate() );
        setContentView(tv);
    }

    public native String generate();

    static {
        System.loadLibrary("native");
    }
} 
```

以及自动生成的AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.optimuse.app"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" android:hasCode="true">
        <activity
            android:name="com.optimuse.app.OptimuseAppActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

感谢您的任何建议，现在已经搜索了几个小时！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T16:46:21.220

您很可能会遇到 C++ 名称修改。例如，当我构建 hello-jni.c 时，库中的 objdump -T 给出了以下内容：

```
00000c28 g DF .text 0000002c Java_com_example_hellojni_HelloJni_stringFromJNI 
```

如果我按照您的方式翻译成 C++，这就是我得到的结果：

```
00000c94 g DF .text 00000024 _Z48Java_com_example_hellojni_HelloJni_stringFromJNIP7_JNIEnvP8_jobject 
```

为了防止损坏并使它们对 jni 可见，请在 extern "C" {} 块中声明您的本机函数，即

```
#include <string.h>
#include <jni.h>

extern "C" {
    jstring Java_com_optimuse_app_OptimuseAppActivity_generate(JNIEnv* env, 
                                                               jobject thiz);
}

jstring Java_com_optimuse_app_OptimuseAppActivity_generate(JNIEnv* env, 
                                                           jobject thiz){
    return env->NewStringUTF("Hello from JNI !");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:19:10.417

您可能已经尝试过这些，但无论如何它看起来与您的问题非常相似，我认为它可能会有所帮助：

[如何解决 Android NDK 中的 java.lang.UnsatisfiedLinkError？](https://stackoverflow.com/questions/3262440/how-to-resolve-the-java-lang-unsatisfiedlinkerror-in-ndk-in-android)

[android ndk UnsatisfiedLinkError 使用预建共享库时](https://stackoverflow.com/questions/5299802/android-ndk-unsatisfiedlinkerror-when-using-a-prebuilt-shared-library)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:57:02.663

优秀的！它是这样工作的：

```
extern "C" {
    JNIEXPORT jstring JNICALL Java_com_optimuse_app_OptimuseAppActivity_generate(JNIEnv* env, jobject thiz) {

        return env->NewStringUTF("Hello from JNI cpp!");
        //return (*env)->NewStringUTF(env, "Hello from JNI cpp!");

    }
} 
```

# php - MYSQL查询的问题（效率）

> ID：11296143
> 
> 赞同：0
> 
> 时间：2012-07-02T14:56:11.770
> 
> 标签：php, mysql

我的 Mysql 语句遇到了真正的问题，我需要将几个表连接在一起，查询它们并按另一个表的平均值排序。这就是我所拥有的...

```
 SELECT
    ROUND(avg(re.rating), 1)AS avg_rating,
         s.staff_id, s.full_name, s.mobile, s.telephone, s.email, s.drive
    FROM staff s

    INNER JOIN staff_homes sh 
     ON s.staff_id=sh.staff_id
    INNER JOIN staff_positions sp 
     ON s.staff_id=sp.staff_id
    INNER JOIN reliability re 
     ON s.staff_id=re.staff_id
    INNER JOIN availability ua 
     ON s.staff_id=ua.staff_id 

    GROUP BY staff_id
    ORDER BY avg_rating DESC 
```

现在我相信这可行，尽管我收到此错误“SELECT 将检查超过 MAX_JOIN_SIZE 行；检查您的 WHERE 并使用 SET SQL_BIG_SELECTS=1 或 SET SQL_MAX_JOIN_SIZE=# 如果 SELECT 没问题”。

我认为这意味着我有太多的连接，因为它是共享主机，所以我不知道它不允许运行大型查询。

我想知道错误的确切含义（我已经用谷歌搜索了它，但我不明白答案）以及如何通过提高查询效率来解决它？

任何帮助，将不胜感激。谢谢

编辑：

我需要连接的原因是我可以根据这样的搜索功能查询表......

```
 SELECT
 ROUND(avg(re.rating), 1)AS avg_rating

 ,  s.staff_id, s.full_name, s.mobile, s.telephone, s.email, s.drive
FROM staff s

 INNER JOIN staff_homes sh 
 ON s.staff_id=sh.staff_id
 INNER JOIN staff_positions sp 
 ON s.staff_id=sp.staff_id
 INNER JOIN reliability re 
 ON s.staff_id=re.staff_id
 INNER JOIN availability ua 
 ON s.staff_id=ua.staff_id

WHERE s.full_name LIKE '%'
AND s.drive = '1'
AND sh.home_id = '3'
AND sh.can_work = '1'
AND sp.position_id = '3'
AND sp.can_work = '1'

GROUP BY staff_id
ORDER BY avg_rating DESC 
```

编辑 2

这是我解释的结果。另外我对 MYSQL 不是很好，我将如何设置外键？

**id select_type table type possible_keys key key_len ref rows Extra**

1 SIMPLE ua ALL NULL NULL NULL NULL 14 使用临时；使用文件排序

1 SIMPLE re ALL NULL NULL NULL NULL 50 使用 where；使用连接缓冲区

1 SIMPLE sp ALL NULL NULL NULL NULL 84 使用 where；使用连接缓冲区

1 SIMPLE sh ALL NULL NULL NULL NULL 126 使用 where；使用连接缓冲区

1 SIMPLE s eq_ref PRIMARY PRIMARY 4 web106-prestwick.ua.staff_id 1

编辑 3：谢谢 lc，这是我的外键，它们没有正确设置。问题排序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:09:28.163

也许您应该在表上使用更多和/或更好的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:28:58.443

根据您使用的数据库，优化可能更快，也可能不使用子查询。

您的查询可能存在 2 个瓶颈：

*   尝试删除查询的平均功能。如果您的查询速度加快，请尝试用子查询替换它，看看会发生什么。

*   多个连接通常会降低性能，除了修改数据库模式之外，您无能为力。最简单的解决方案是拥有一个预先计算数据并减少数据库引擎工作的表。该表可以通过修改隐含表上的数据时触发的存储过程来实现，或者您也可以从 php 应用程序中修改表值。

# javascript - 在 polymaps 上显示 svg-circle

> ID：11296147
> 
> 赞同：1
> 
> 时间：2012-07-02T14:56:29.107
> 
> 标签：javascript, svg, bing-maps, geojson

我正在使用带有[此代码](http://vantoegevoegdewaarde.nl/maps.txt)的 polymap 显示一个 bing-map 。这是一个从 polymaps 网站上的 bing-example 派生的简单脚本。

我现在想在某些坐标上显示一个标记，一个 svg 圆。我尝试使用`po.geojson("load", load)`加载geojson 特征集合并显示特征集合中的点。结构[看起来像这样](http://vantoegevoegdewaarde.nl/punt.txt)（当然它应该是一个 JSON 字符串，但这更容易阅读。）但是脚本不显示标记。

使用此代码：

```
[...]

map.add(po.geoJson()
.url("http://link/to/current.php")
.on("load", load));

[...]

function load(e) {
  for (var i = 0; i < e.features.length; i++) {
    var feature = e.features[i];
    feature.element.setAttribute("class", "punt");
  }
} 
```

CSS：

```
.punt {
     fill: cyan;
     fill-opacity: 1;
     stroke: #012;
} 
```

不会在地图上显示蓝点。

**有没有办法在 polymaps 地图上显示 svg-circle？这样我就可以定期调用`function`这个圆圈的构造来更新 svg 圆圈的位置？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:16:10.927

您是否尝试在加载功能中自己添加圆圈？[这个例子](http://polymaps.org/ex/shadow.html)展示了如何在兴趣点上添加一个大圆圈。

# python - Python 多重赋值：想要 (tokens.append(),tokens.append(), remaining) = remaining.partition(blank)

> ID：11296148
> 
> 赞同：0
> 
> 时间：2012-07-02T14:56:29.217
> 
> 标签：python, variable-assignment

我想要做：

```
 (tokens.append(),tokens.append(), remaining) = remaining.partition(blank) 
```

但这不是有效的语法。相反，我这样做：

```
 (t1, t2, remaining) = remaining.partition(blank) 
    tokens.append(t1) 
    tokens.append(t2) 
```

有没有更清洁的方法？顺便说一句，我相信我必须使用 .partition，因为我不能将多个空白合并为一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T14:59:34.717

尝试这个：

```
tokens.extend(remaining.partition(blank))
remaining = tokens.pop() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T15:08:18.600

在 Python 3 中，您可以通过[扩展的可迭代解包](http://www.python.org/dev/peps/pep-3132/)来完成此操作：

```
*tokens[len(tokens):], remaining = remaining.partition(' ') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T02:46:13.613

# 我的目标是让每个{结果的单个元素}作为方法的参数或赋值的值传递。

剩余 = 'abc def ghi jkl' 令牌=[]

# 从概念上讲，我想

# (tokens.append(),tokens.append(), 剩余的) = 剩余的.partition(空白)

# 备选方案 1：这就是我所做的：

（t1，t2，剩余）=剩余。分区（空白）

令牌.append(t1)

令牌.append(t2)

# 备选方案 2：非常难看，因为“繁重”的不必要的重复处理，在这种情况下，就是分区：

[(tokens.append(t1), tokens.append(t2), remaining) for t1 in (remaining.partition(' ')[0],) for t2 in (remaining.partition(' ')[1],)留在 (remaining.partition(' ')[2],) ]

# 备选方案 3：仍然丑陋，但在概念上更接近：

t=remaining.partition('')

[(tokens.append(t1), tokens.append(t2), remaining) for t1 in (t[0],) for t2 in (t[1],) for remaining in (t[2],) ]

# 这里的技巧是在“for”之前使用方法调用，在“in”之前使用单个项目列表。单项列表中的逗号，例如 (t[0],) 必须跟在唯一项之后。逗号不能放在它前面。

# javascript - 在 JavaScript 中获取页面加载开始的时间

> ID：11296150
> 
> 赞同：5
> 
> 时间：2012-07-02T14:56:31.183
> 
> 标签：javascript, http, date, header, request

在 JavaScript 中，可以使用等待`onLoad`来指定页面加载完成的时间。

每个 HTTP 响应都与`Date:`包含服务器发送响应的时间的标头一起发送。

JavaScript中有没有办法获取页面开始加载的时间？类似于响应`Date:`头的东西。

这对于在一些延迟后将 JavaScript 注入页面的情况很有用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T15:00:48.227

[`new Date(performance.timing.connectStart)`](https://developer.mozilla.org/en/Navigation_timing)在 chrome、firefox、IE9 等（[caniuse](https://caniuse.com/#feat=mdn-api_performance)）中

[演示](http://jsfiddle.net/xNUTB/)

```
console.log(new Date(performance.timing.connectStart));
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T15:01:50.823

尝试存储一个值`var d= new Date(); var requested = d.getTime();`并在页面加载时执行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T15:08:32.277

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript">
        var loadDate;
    </script>
</head>
<body onload="loadDate=new Date();">
    <button onclick="alert(loadDate);">show load Date</button>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-02T15:06:27.897

我只需通过 cookie 或内联 JS 将时间戳从服务器端脚本传递到浏览器。例如在 PHP 中：

```
<script>
var timestamp = new Date(<?php echo time(); ?>);
</script> 
```

# jquery - jQuery Moblie：传递参数并动态加载页面内容

> ID：11296156
> 
> 赞同：0
> 
> 时间：2012-07-02T14:56:52.783
> 
> 标签：jquery, jquery-mobile, parameters

我知道这是一个基本问题，但我找不到适合我情况的任何东西。

我有一个带有元素列表的 jQuery Mobile 页面。元素引用第二个页面，该页面的内容取决于选择的元素（例如文章列表和选择应该显示相关文本的文章）。基本上我必须在页面之间传递一个参数。

我尝试使用 AJAX 来做到这一点：

```
$.ajax({
    url : "index.html#page2",
    data : "id="+id,    
    dataType : 'json'
    type: "GET"
}); 
```

但是我无法在第二页中获得结果。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:05:35.003

从您的网址看：`index.html#page2`. 您正在尝试导航到一个内部页面（一个已经在 DOM 中的页面）。如果是这种情况，则将 JavaSCript 中的逻辑设置为 on `#page2`，当您链接到 时`#page2`，将值保存在 JavaScript on可以访问`id`的变量中。`#page2`

就像是：

```
<ul data-role="listview" id="myList">
    <li>
        <a href="#page2" data-id="987">This is some fake text... Click for More</a>
    </li>
</ul>
<script>
$(document).delegate('#page1', 'pageinit', function () {

    //bind to click event for all links in the `#myList` UL
    $(this).find('#myList').find('a').bind('click', function () {

        //save the ID of this list-item to a global variable so it can be used later
        window.myId = $(this).attr('data-id');
    });
});
$(document).delegate('#page2', 'pageshow', function () {

    //get the ID saved as a global variable
    var currentId = window.myId;

    //now do logic for second page
});
</script> 
```

这是一个演示：http: [//jsfiddle.net/jasper/wFdet/](http://jsfiddle.net/jasper/wFdet/)

# haskell - Haskell 发生了怎样的变化？

> ID：11296157
> 
> 赞同：31
> 
> 时间：2012-07-02T14:57:04.560
> 
> 标签：haskell

当我第一次学习 Haskell 时，Haskell '98 是官方发布的语言规范。今天，该规范是 Haskell 2010。（我不得不承认，我真的很难记住这些差异到底是什么。）

现在 Haskell 已经存在*很长时间*了。（嗯，在计算方面它已经很长时间了。）所以我想知道的是......在 Haskell 的历史上，该语言是否有任何重大的设计变化？还是所有的变化都相对较小？有没有什么地方我可以找到这些列表，而无需坐下来阅读每个版本的 Haskell 报告试图找出差异？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-02T15:07:40.517

该语言的历史，包括主要里程碑和设计决策，在

*   [Haskell 的历史：懒惰与类](http://research.microsoft.com/en-us/um/people/simonpj/papers/history-of-haskell/history.pdf)。

> ```
> @INPROCEEDINGS{Hudak07ahistory,
>     author = {Paul Hudak and John Hughes and Simon Peyton Jones and Philip Wadler},
>     title = {A history of Haskell: Being lazy with class},
>     booktitle = {In Proceedings of the 3rd ACM SIGPLAN Conference on History of Programming Languages (HOPL-III},
>     year = {2007},
>     pages = {1--55},
>     publisher = {ACM Press}
> } 
> ```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-02T16:10:29.333

Dons 给出的参考资料非常出色且具有权威性，直至其结束。这是我脑海中的一些东西——包括规范中的内容以及规范中未正式包含但我认为其他编译器也经常针对的 GHC 的非实验部分的内容提供。这还包括类型类和我们现在认为是标准的其他功能，但并非总是如此，但它们可以纯粹作为库存在。

*   分层模块
*   单子
*   IO 单子
*   做符号
*   外部函数接口
*   多参数类型类
*   不精确的例外
*   可键入和数据
*   可扩展异常
*   功能依赖
*   类型函数
*   并发 Haskell
*   STM
*   GADT
*   大单态性灾难（即失去单子理解，映射专门用于列表等）
*   适用性和可遍历性
*   箭头/箭头符号
*   单子修复

# c++-cli - C++/CLI 数据成员应该是句柄还是值？

> ID：11296162
> 
> 赞同：0
> 
> 时间：2012-07-02T14:57:31.317
> 
> 标签：c++-cli

我是 C++/CLI 的新手，我想知道关于托管类型数据成员的“最佳实践”是什么。声明为句柄：

```
public ref class A {
public:
    A() : myList(gcnew List<int>()) {}
private:
    List<int>^ myList;
}; 
```

或作为一个值：

```
public ref class B {
private:
    List<int> myList;
}; 
```

似乎无法找到关于此的明确建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:04:04.217

就个人而言，我会使用第二种形式。我这样说是因为我使用由其他团队编写的框架，他们使用这种形式。

我相信这是因为它更干净，使用更少的空间，并且对于非作者来说更容易阅读。我尽量记住，最简洁的代码，同时仍然可以被对项目了解最少的人阅读是最好的。

此外，我没有遇到后一个示例在跨头文件、方法、类或数据文件等的可读性方面的任何问题。

尽管我与这方面的专家**相差甚远**，但这就是我更喜欢的。对我来说更有意义。

```
class AlgoCompSelector : public TSelector {
   public :
   AlgoCompSelector( TTree *tree = 0 );
   virtual ~AlgoCompSelector(){ /* */ };
   virtual void    Init(TTree *tree);
   virtual void    SlaveBegin(TTree *tree);
   virtual Bool_t  Process(Long64_t entry);
   virtual void    Terminate();
   virtual Int_t   Version() const { return 1; }

   void setAlgo( Int_t idx, const Char_t *name, TTree* part2, TTree* part3 );
   void setPTthres( Float_t val );
   void setEthres( Float_t val );                                                                                                                   

   private:
   std::string mAlgoName[2];                  // use this for the axis labels and/or          legend labels.                                         
   TTree *mPart1;
   TTree *mPart2[2], *mPart3[2];     // pointers to TTrees of the various parts                                                              
   TBranch *mPhotonBranch[2];                 // Used branches                                                                               
   TClonesArray *mPhotonArray[2];             // To point to the array in the tree 
```

例如

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T15:06:19.173

这一切都取决于寿命。当您有一个与所属类完全一样的私有成员时，第二种形式更可取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T23:31:44.007

在编写托管 C++ 代码时，我赞成遵循其他托管语言使用的约定。因此，我将使用类级别数据成员的句柄，并且仅在您使用`using`C# 中的语句的地方使用值（堆栈语义）。

如果您的类成员是一个值，那么完全替换该对象意味着该对象需要定义一个复制构造函数，而 .NET 类并不多。此外，如果要将对象传递给另一个方法，则需要使用`%`运算符将​​ from 转换`List<int>`为`List<int>^`. （打字没什么大不了`%`，但很容易忘记，编译器错误只是说它不能转换`List<int>`为`List<int>^`。）

```
//Example of the `%` operator
void CSharpMethodThatDoesSomethingWithAList(List<int>^ list) { }

List<int> valueList;
CSharpMethodThatDoesSomethingWithAList(%valueList);

List<int>^ handleList = gcnew List<int>();
CSharpMethodThatDoesSomethingWithAList(handleList); 
```

# jquery - jQuery自动完成选择忽略自定义数据字段

> ID：11296167
> 
> 赞同：1
> 
> 时间：2012-07-02T14:57:49.197
> 
> 标签：jquery, ruby-on-rails, autocomplete, jquery-autocomplete

我的控制器返回一个 json 对象，其中包含字段“id”、“value”和一个附加字段“result_type”。不幸的是，我无法在 select 方法中访问这个“result_type”字段。

我将 Rails 3.2.6 与`jquery-rails`and `coffeescript`gems 一起使用。在`application.js`我需要`jquery-ui`.

```
$('#q').autocomplete
  source: (request, response) ->
  ...
  select: (event,ui) ->
    alert ui.item.value  (works)
    alert ui.item.result_type  (does not work)
  ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T11:00:39.587

在该`source:`部分中，我需要在此处为​​ result_type 添加一行：

```
source: (request, response) ->
  $.get .............
  response $.map data, (request_data) ->
  {
    label: request_data.value.replace(regex, "<strong>$1</strong>"),
    value: if request_data.id == "" then $('#q').val() else request_data.value,
    id: request_data.id
    result_type: request_data.resulttype
  } 
```

# ruby-on-rails-3 - Compass Rails 3.0 与“指南针手表”一起使用，但并非没有

> ID：11296169
> 
> 赞同：1
> 
> 时间：2012-07-02T14:58:02.237
> 
> 标签：ruby-on-rails-3, compass-sass

我正在尝试使用 Rails 3.0.7 的 Compass，只是想开始。使用 gem 指南针导轨。如果我将我的 sass 文件放入 app/assets/stylesheets 并运行“compass watch”，一切正常：编译后的 css 被放入 public/stylesheets。

但是，如果我停止“观察”并依靠 Rails 进行编译，它就不起作用。相反，程序会查看 public/stylesheets/sass 文件夹中的输入。此外，如果该文件夹中的文件具有 '@include "compass"' 指令，我会收到找不到该文件的错误消息。如何强制 Rails 查找正确的位置——应用程序/资产/样式表？

# android - 应用程序 vs 服务 vs 意图

> ID：11296170
> 
> 赞同：0
> 
> 时间：2012-07-02T14:58:10.223
> 
> 标签：android, service, android-intent, bluetooth

我正在创建一个连接到嵌入式蓝牙芯片的项目。目前我已经用一个单独的应用程序类来控制所有的蓝牙功能。

我的程序使用有 9 个按钮的主菜单初始化。在主屏幕中，我创建了与蓝牙设备的连接。每个按钮都将我带到一个单独的活动。每个活动都需要从蓝牙芯片接收不同的数据。

我的问题是，我使用服务而不是应用程序有意义吗？根据我对服务的理解，使用它是因为后台总是有一些东西在运行。但是在这种情况下，不需要在后台运行任何东西（除非保持与蓝牙设备的连接很重要），数据仅在 Activity 请求时发送/接收。

或者，我是否完全偏离轨道并且不应该使用？只是一个简单的类来充当我可以通过意图传递的数据容器？我知道这会起作用，但我对 Android 还是很陌生，而且意图似乎有点混乱。如果没有必要，我宁愿不使用意图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:03:40.643

我还在建立一个蓝牙连接，我将整个通信内容放在一个服务中，并与需要使用该连接的每个活动绑定到该服务。这对我来说效果很好。您可能也想选择这种方式。

实际上，我早些时候意识到了一种在应用程序中保持连接的方式，但现在我更喜欢服务方式，因为我正在将应用程序用于全局状态。

使用服务还可以将意图的需求减少到非常小的数量:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T15:05:15.227

在您的情况下，蓝牙连接的静态属性将是最实用的解决方案

# python - 还是关于python文件操作

> ID：11296172
> 
> 赞同：1
> 
> 时间：2012-07-02T14:58:16.747
> 
> 标签：python, file-io

我正在使用 Windows 7 和 Python 2.7.3。

```
PS C:\Python27\LearnPythonTheHardWay> python
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win
32
Type "help", "copyright", "credits" or "license" for more information.
>>> input = open('file_operation_sample.txt', 'a+')
>>> print input.tell()  # first 'tell()'
0
>>> input.write(u'add')
>>> print input.tell()
12
>>> input.seek(0)
>>> print input.read()
123456789add
>>> input.close()
>>> 
```

我很困惑为什么第一次`tell()`打印`0`（我认为它会输出`9`）？'a+' 是追加模式，文件指针应该在 EOF。而且我更疑惑的是，字符串'abc'最后被附加到'123456789'上？

另一个问题，

```
PS C:\Python27\LearnPythonTheHardWay> python
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win
32
Type "help", "copyright", "credits" or "license" for more information.
>>> from io import open
>>> input = open('file_operation_sample.txt', 'a+')
>>> print input.tell()
9
>>> input.write(u'add')
3L
>>> print input.tell()
12
>>> input.seek(2)
2
>>> input.seek(2, 1)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IOError: can't do nonzero cur-relative seeks
>>> 
```

有什么问题？如果我注释掉`from io import open`，就可以了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:36:38.433

Python 的行为`tell()`与 C 相同`ftell()`。这里的[文档](http://msdn.microsoft.com/en-us/library/0ys3hc0b%28v=vs.71%29.aspx)说明：

> 请注意，当打开文件以追加数据时，当前文件位置由最后一次 I/O 操作确定，而不是由下一次写入发生的位置确定。

这可以解释为什么你的第一个告诉是`0`- 你还没有完成任何文件 I/O。

* * *

这是一个插图。首先，我们将 5 个字符写入文件。正如我们所料，写入开始于我们完成时`0`文件指针位于。`5`

```
>>> with open('test.txt', 'w') as fh:
    fh.write('12345')
    fh.tell()

5L 
```

现在我们打开它进行追加。我们从`0`你发现的开始。但是现在我们`read()`从文件中执行了一个操作，这并不奇怪，我们从`0`. 读取后，文件指针已移动到`5`.

```
>>> with open('test.txt', 'a+') as fh:
    fh.tell()
    fh.read()
    fh.tell()

0L
'12345'
5L 
```

好的，所以让我们打开文件以进行追加并这次进行写入。正如文档所述，在写入之前，文件指针被移动到文件末尾。所以我们在旧字节之后得到新字节，即使文件指针`0`在写入之前。

```
>>> with open('test.txt', 'a+') as fh:
    fh.tell()
    fh.write('abc')
    fh.tell()
    fh.seek(0)
    fh.read()

0L
8L
'12345abc' 
```

Python 的文档`seek()`也暗示了这种行为：

> 请注意，如果打开文件进行追加（模式 'a' 或 'a+'），任何 seek() 操作都将在下一次写入时撤消。

# python - Python比较字符串

> ID：11296174
> 
> 赞同：0
> 
> 时间：2012-07-02T14:58:22.170
> 
> 标签：python, string

我有一个代码，我首先将 .csv 文件转换为多个列表，然后我必须创建原始文件的子集，其中仅包含文件第 5 列中具有特定单词的那些。

我正在尝试使用以下代码来执行此操作，但它给了我 if 语句的语法错误。谁能告诉我如何解决这个问题？

```
import csv
with open('/Users/jadhav/Documents/Hubble files/m4_hubble_1.csv') as f:
    bl = [[],[],[],[],[]]
    reader = csv.reader(f)
    for r in reader:
        for c in range(5):
            bl[c].append(r[c])

    print "The files have now been sorted into lists"
    name = 'HST_10775_64_ACS_WFC_F814W_F606W'
    for c in xrange(0,1):
        if bl[4][c]!='HST_10775_64_ACS_WFC_F814W_F606W' 
            print bl[0][c] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:00:34.437

在 if 测试之后需要一个冒号，并且需要缩进 if take 子句：

```
if bl[4][c]!='HST_10775_64_ACS_WFC_F814W_F606W':
    print bl[0][c] 
```

# java - 来自 FIFO 缓冲区的高性能条形图

> ID：11296175
> 
> 赞同：1
> 
> 时间：2012-07-02T14:58:29.617
> 
> 标签：java, performance, swing, bufferedimage

我有疑问如何创建一个高性能的摇摆组件。

该组件应该绘制某种条形图。组件的数据存储在单独的 FIFO 缓冲区类中。每次更新缓冲区时都会通知组件。

目前，每次数据更改时组件都会绘制一个 BufferedImage 。然后条形图组件的paintComponent方法绘制创建的BufferedImage。

由于我的应用程序中有很多数据更改，我正在考虑改进 BufferedImage 的绘制。大多数条形图保持不变。它只是向右移动，最新的数据更改添加到条形图的左侧。

目前，整个 BufferedImage 是根据存储在缓冲区中的数据重新创建的。我能想到的是使用 AffineTransformation 移动旧的 BufferedImage 并只添加最近添加的数据。这将极大地减少 BufferedImage 上的绘图操作量。

但我不知道这是否会加快应用程序。BufferedImage 上的 AffineTransformation 有多贵？

欢迎任何意见。还有一些其他提示如何创建高性能的摇摆应用程序。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:09:06.247

如果没有某种基线，就很难衡量改进。一开始，您可以使用 比较[此处](https://stackoverflow.com/q/5048852/230513)显示的两种方法[`JFreeChart`](https://stackoverflow.com/tags/jfreechart/info)。面包频率为`DynamicTimeSeriesCollection`10Hz；我没有仔细检查过另一个，但它看起来很灵活。

# asp.net - 文本框从右到左输入，但 dir="rtl" 不完整

> ID：11296181
> 
> 赞同：0
> 
> 时间：2012-07-02T14:59:10.443
> 
> 标签：asp.net, textbox, hebrew, right-to-left

我需要一个从右到左输入的文本框。在 ASP.NET 中，您可以使用 dir="rtl" 执行此操作，但它不会产生所需的效果。

例子：

下面的文本框有 dir="rtl" 标签。

![在此处输入图像描述](../Images/cf604820dd2236c08e8f3909cee5efd8.png)

当我现在按'a'时，你会得到：

![在此处输入图像描述](../Images/5e45bb94fcfe4f383ef16d8c159106ba.png)

但显然在希伯来语中，你应该得到这个：

![在此处输入图像描述](../Images/dc9f581881f2b85d56bb2ae034a5673c.png)

ASP.NET 中是否有一些内置功能？我似乎找不到它，无论我在哪里搜索，他们都说这是 dir="rtl" 标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:42:50.133

山姆泰森在评论中回答。

# sql - Rails 3 有多个参数

> ID：11296182
> 
> 赞同：2
> 
> 时间：2012-07-02T14:59:11.823
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, where, params

我需要用 2 个传入参数构建一个动态 sql 队列。定义两个参数时很容易。

```
MyClass.where(:column1 => param[:first], :column2 => params[:second]) 
```

但是，例如，当`param[:first] = 0`我想为此列选择所有（非空）字段时（因此，当两个参数都 = 0 时，它将等于`select * from tablename`）。试过这个语法：

```
MyClass.where(:column1 => param[:first], :column2 => !nil) 
```

但它给了我错误的输出。有什么建议可以优雅地解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:16:44.467

您可以在`?:`内部使用运算符`where`：

```
MyClass.where(params[:first] ? {:column1 => params[:first]} : "column1 IS NOT NULL")
       .where(params[:second] ? {:column2 => params[:second]} : "column2 IS NOT NULL") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T15:09:08.033

怎么样`MyClass.where('column1 IS NOT NULL AND column2 IS NOT NULL').where({:column1 => params[:first], :column2 => params[:second]}.delete_if{|k,v| v.nil?})`？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T15:09:24.200

我认为这可能适用于我的发现。它似乎在 rails 控制台中工作，并考虑到活动记录允许活动链接：

```
MyClass.where(:column1 => params[:first], :column2 => params[:second]).where("column1 is NOT NULL").where("column2 is NOT NULL") 
```

# actionscript-3 - AS3：两个加载器的内存泄漏

> ID：11296183
> 
> 赞同：0
> 
> 时间：2012-07-02T14:59:19.490
> 
> 标签：actionscript-3, loader

我有一个只有一帧的 AS3 文件。这是代码：

```
stop();
trace("Debut du code.");
var chargeur:Loader = new Loader();
var chargeur2:Loader = new Loader();
var adress:URLRequest = new URLRequest("img/idle.swf");

chargeur.load(adress);
addChild(chargeur);

chargeur.contentLoaderInfo.addEventListener(Event.COMPLETE,isLoaded)

function isLoaded (evt:Event) {
trace("Loading complete");
var adress2:URLRequest = new URLRequest("img/oldcoucou.swf");

chargeur2.load(adress2);
addChild(chargeur2);
} 
```

问题是：存在内存泄漏，例如 3mo/s ......我不知道为什么以及我做错了什么。有什么线索吗？

谢谢。

编辑：只有一个加载器，我没有内存泄漏。如果我加载两个，然后隐藏一个（chargeur.visible=false 或chargeur.y=1200），也没有内存泄漏。仅当同时有 2 个可见时才会出现此问题。这听起来很疯狂，我知道......我希望这是一个已知的错误或代码中的错误......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:47:30.957

假设加载的 .swf 不包含任何内存泄漏，则以下代码应该是无泄漏的。

```
stop();
trace("Debut du code.");
var chargeur:Loader = new Loader();
var chargeur2:Loader = new Loader();
var adress:URLRequest = new URLRequest("img/idle.swf");
var adress2:URLRequest = new URLRequest("img/oldcoucou.swf");

chargeur.contentLoaderInfo.addEventListener(Event.COMPLETE,isLoaded, false, 0, true);
chargeur.load(adress);

function isLoaded (evt:Event):void {

chargeur.contentLoaderInfo.removeEventListener(Event.COMPLETE,isLoaded);
adress = null;
trace("Loading1 complete");
addChild(chargeur);

chargeur2.contentLoaderInfo.addEventListener(Event.COMPLETE,isLoaded2, false, 0, true);
chargeur2.load(adress2);

}

function isLoaded2 (evt:Event):void {

chargeur2.contentLoaderInfo.removeEventListener(Event.COMPLETE,isLoaded2);
adress2 = null;
trace("Loading2 complete");
addChild(chargeur2);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T15:43:35.087

我认为这是不可能的。我猜swf一个被加载到你的程序中，它会立即运行自己的程序，它是加载其他swf，swf A加载swf B，swf B加载swf A .... \n。这就像一个导致堆栈溢出的无限递归函数。

# mysql - Mysql，查询最新条目并删除超过 2 个月的条目

> ID：11296186
> 
> 赞同：0
> 
> 时间：2012-07-02T14:59:44.093
> 
> 标签：mysql

我有一个存储大约 5000 个产品的 mysql 表。

然后我查询表格并列出我网站上的所有产品。

1.  为了首先查询最新添加的产品，我应该使用什么“ORDER BY”或其他 mysql 命令？

    SELECT * FROM table WHERE my mysql rules ORDER BY latest???

2.  为了保持产品数据库相当低（有 5000 个产品意味着 5000 个页面，我认为这对于我的分片托管来说太多了）我想删除旧的产品条目，比如说超过 2 个月。任何想法如何做到这一点？我的表中是否需要一个 dat 字段？

3.  您认为我的数据库中的 5000 行和 5000 页可以通过正常的 wordpress 安装来处理吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:06:35.367

您需要在表中添加一个 DateTime 列，该列将记录产品在数据库中记录的那一刻的时间。使用此 DateTime 列，您可以使用最新的选择子句排序，并删除旧的。

要按日期排序您的 select 子句（最新的在前），您可以放置​​此子句

```
SELECT * FROM table WHERE rules ORDER BY datefield DESC 
```

要在表中插入新列，请使用以下语句

```
ALTER TABLE table
ADD column DateTime 
```

要删除旧产品（2 个月），您可以编辑以下语句

```
 DELETE FROM table WHERE datecolumn < (SELECT DATEADD(mm,-2,DATEADD(mm,DATEDIFF(mm,0,GETDATE()),0))) 
```

# visual-studio-2010 - VS2010 Unresolved External Symbol boost::asio::detail::winsock_init_base::throw_on_error 将 boost-system 与使用 libtorrent 的项目链接时

> ID：11296189
> 
> 赞同：5
> 
> 时间：2012-07-02T14:59:49.040
> 
> 标签：visual-studio-2010, boost, boost-asio, lnk2019, libtorrent

我正在尝试使用 Rasterbar 的 libtorrent 构建一个小型命令行 BitTorrent 客户端，该客户端依赖于 Boost。我已经使用各自的方向构建了 Boost 库和 libtorrent 库，但是当我尝试构建我的项目时，出现以下链接错误

```
1>------ Build started: Project: MiniBT, Configuration: Debug Win32 ------
1>MiniBT.obj : error LNK2019: unresolved external symbol "protected: static void __cdecl boost::asio::detail::winsock_init_base::throw_on_error(struct boost::asio::detail::winsock_init_base::data &)" (?throw_on_error@winsock_init_base@detail@asio@boost@@KAXAAUdata@1234@@Z) referenced in function "public: __thiscall boost::asio::detail::winsock_init<2,0>::winsock_init<2,0>(bool)" (??0?$winsock_init@$01$0A@@detail@asio@boost@@QAE@_N@Z)
1>MiniBT.obj : error LNK2019: unresolved external symbol "protected: static void __cdecl boost::asio::detail::winsock_init_base::startup(struct boost::asio::detail::winsock_init_base::data &,unsigned char,unsigned char)" (?startup@winsock_init_base@detail@asio@boost@@KAXAAUdata@1234@EE@Z) referenced in function "public: __thiscall boost::asio::detail::winsock_init<2,0>::winsock_init<2,0>(bool)" (??0?$winsock_init@$01$0A@@detail@asio@boost@@QAE@_N@Z)
1>MiniBT.obj : error LNK2019: unresolved external symbol "class boost::system::error_category const & __cdecl boost::asio::error::get_misc_category(void)" (?get_misc_category@error@asio@boost@@YAABVerror_category@system@3@XZ) referenced in function "void __cdecl boost::asio::error::`dynamic initializer for 'misc_category''(void)" (??__Emisc_category@error@asio@boost@@YAXXZ)
1>MiniBT.obj : error LNK2019: unresolved external symbol "unsigned long __cdecl boost::asio::detail::win_tss_ptr_create(void)" (?win_tss_ptr_create@detail@asio@boost@@YAKXZ) referenced in function "public: __thiscall boost::asio::detail::win_tss_ptr<class boost::asio::detail::call_stack<class boost::asio::detail::win_iocp_io_service,unsigned char>::context>::win_tss_ptr<class boost::asio::detail::call_stack<class boost::asio::detail::win_iocp_io_service,unsigned char>::context>(void)" (??0?$win_tss_ptr@Vcontext@?$call_stack@Vwin_iocp_io_service@detail@asio@boost@@E@detail@asio@boost@@@detail@asio@boost@@QAE@XZ)
1>MiniBT.obj : error LNK2019: unresolved external symbol "protected: static void __cdecl boost::asio::detail::winsock_init_base::cleanup(struct boost::asio::detail::winsock_init_base::data &)" (?cleanup@winsock_init_base@detail@asio@boost@@KAXAAUdata@1234@@Z) referenced in function "public: __thiscall boost::asio::detail::winsock_init<2,0>::~winsock_init<2,0>(void)" (??1?$winsock_init@$01$0A@@detail@asio@boost@@QAE@XZ) 
```

似乎表明 asio::detail 命名空间没有包含在 boost-system 库中，因为它似乎只有这 5 个符号有问题，并且它链接到 boost-system 库就好了，否则. 我正在尝试在 64 位系统上构建 32 位应用程序，但我检查过的所有内容似乎都为此正确配置了。

我知道我错过了一些东西，但我似乎无法弄清楚是什么。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T15:23:09.720

定义了 BOOST_ASIO_SEPARATE_COMPILATION 后，除了 #include "boost/asio/ssl/impl/src.hpp" 之外，您还必须在其中一个 cpp 文件中 #include "boost/asio/impl/src.hpp"。

# emacs - (preceding-sexp) 的对面

> ID：11296191
> 
> 赞同：3
> 
> 时间：2012-07-02T14:59:55.577
> 
> 标签：emacs

愚蠢的一个，但我自己无法弄清楚 - 我如何获得下一个性别？就像`preceding-sexp`，但向前。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T15:06:03.343

调查`forward-sexp`。[你在这里](http://sachachua.com/blog/2009/12/behind-the-scenes-livin-la-vida-emacs/)有一个很好的例子。

好的，根据您的评论，您不仅想要运动，还想要评估性本身。Sacha在那里所做的是：

```
 (setq start (point))
    (forward-sexp)
    (setq sexp (buffer-substring (point) start)) 
```

然后`(eval (read sexp))`评估它。我将使用`buffer-substring-no-properties`，但我不确定这在临时缓冲区中是否重要。

# angularjs - AngularJS - ng-bind-html-unsafe 和 ng-model 问题

> ID：11296193
> 
> 赞同：8
> 
> 时间：2012-07-02T15:00:00.003
> 
> 标签：angularjs

我的 html 中有以下行：

`<div ng-bind-html-unsafe="departmentConfig" class="control-group"></div>`

我使用`$resource`get 检索 HTML，将 HTML 分配给`$scope.departmentConfig`，然后视图完美更新。分配给的 HTML`$scope.departmentConfig`包含表单元素，其中包含`ng-model`属性，但是当我更改这些输入元素中的值时，它们根本不会更新`$scope`模型。

这是我根据许多其他互联网帖子尝试过的方法，但它不起作用：

```
$resource('resources/sources/departments/:mappedName', {
        mappedName:departmentKey
    }).get(function(departmentConfig) {
        // This will call another function that will build a chunk of HTML
        $scope.departmentConfig = $scope.buildDepartmentConfigHtml(departmentConfig);
        // This is my feeble attempt to access the element, and bootstrap it to include the items in the $scope model.
        var $departmentConfigContainer = $('#departmentConfig');
        angular.bootstrap($departmentConfigContainer, ['sourcemanager']); 
```

我什至看过一些 jsFiddle 示例，这些示例似乎可以正常工作，但我的却不行。我是否过早调用引导程序？我也试过这样`$watch`穿`$scope.departmentConfig`：

```
$scope.$watch('departmentConfig', function() {
    var $departmentConfigContainer = $('#departmentConfig');
    angular.bootstrap($departmentConfigContainer);
}); 
```

但它也没有用。我敢打赌，对此有一个简单的解释，我似乎无法获得`ng-model`在页面编译后加载的输入元素以绑定到模型。任何帮助表示赞赏，这是我需要在我的页面上工作的最后一个功能。如果您还需要有关我的配置的更多信息，请告诉我。

所以，简单地说，我知道 DOM 的一部分已经加载后，如何强制它重新编译？

**更新**

这是一个 jsfiddle，概述了我想做的事情：http: [//jsfiddle.net/j_snyder/ctyfg/](http://jsfiddle.net/j_snyder/ctyfg/)。您会注意到属性 2 和 3 不会更新模型，并且我在外部 div 上调用引导程序，希望这将包括模型绑定中的那些。这是我第一次发布到 jsfiddle，如果您看不到示例，请告诉我。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-03T15:38:39.237

ng-bind-html 是为常规 HTML 制作的，而不是编译新的 angular 元素。

您将使用[$compile 服务](http://docs.angularjs.org/api/ng.%24compile)。

以下是您将如何编辑当前示例以使其工作：http: [//jsfiddle.net/andytjoslin/ctyfg/21/](http://jsfiddle.net/andytjoslin/ctyfg/21/)。但这种方式最终很糟糕，因为您必须在控制器中进行 DOM 操作。

您只需要创建一个指令，该指令基本上会执行您希望 ng-bind-html 执行的操作：http: [//jsfiddle.net/andytjoslin/ctyfg/22/](http://jsfiddle.net/andytjoslin/ctyfg/22/)

# c# - 在中继器控件中隐藏一列

> ID：11296197
> 
> 赞同：0
> 
> 时间：2012-07-02T15:00:20.067
> 
> 标签：c#, asp.net, repeater

如何隐藏 Asp Repeater 中的特定列？在这种情况下我想隐藏 Powner ！

```
<ItemTemplate>
    <tr>
        <td>
            <%#Eval("Priority") %>
        </td>
        <td>
            <%#Eval("ProjectName") %>
        </td>
        <td>
            <asp:Label ID="Label1" runat="server" Text='<%# Eval("POwner") %>'></asp:Label>
    </tr>
</ItemTemplate> 
```

在后面的代码中添加它会产生错误：s

```
public void Repeater1_ItemDatabound(Object Sender, RepeaterItemEventArgs e)
{
    Repeater a =(Repeater)e.Item.FindControl("Label1");
    a.Visible = false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:04:01.173

`Label1`是`Label`控件而不是控件`Repeater`，这就是您收到错误的原因

您还需要添加一个`if`条件，以便您只获得`Label1`项目而不是页眉或页脚。

试试这个

```
if (e.Item.ItemType == ListItemType.Item || 
    e.Item.ItemType == ListItemType.AlternatingItem)
{
    Label label = (Label)e.Item.FindControl("Label1");
    label.Visible = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:04:47.287

您应该将 Label1 转换为 Label 而不是转发器试试这个：

```
Label a =(Label)e.Item.FindControl("Label1");
a.Visible = false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T15:07:57.293

我想这是不可能的。但我可能弄错了

也许您可以尝试在您的项目模板中使用以下内容：

```
<tr>
<td runat="server" visible='<%# expression %'>
......
</td>
<td>
....
</tr> 
```

或使用 ListView 控件代替 Repeater

# python - ffmpeg eclipse python mac

> ID：11296198
> 
> 赞同：2
> 
> 时间：2012-07-02T15:00:23.250
> 
> 标签：python, eclipse, macos, ffmpeg

有人可以帮我解决这个问题。我在eclipse下做一些python，我需要使用ffmpeg处理音频文件的python库。当我在 ipython 控制台中使用这个库时，一切正常，但是当我在 eclipse 中使用相同的代码时，我的程序无法对音频文件进行编码。我猜这个问题来自ffmpeg，但我不知道如何解决这个问题。

有关信息：当我直接从命令行调用 ffmpeg 时，它可以正确运行。

谢谢

# android - 单击从 android 的 spalsh 屏幕启动的主屏幕上的快捷方式

> ID：11296203
> 
> 赞同：1
> 
> 时间：2012-07-02T15:00:44.780
> 
> 标签：android, shortcut

我在 mainfest 文件中编写了如下配置

快捷方式是在主屏幕上创建的，但问题是当我点击它时它没有正确保留状态，它是从启动屏幕开始的。当我从所有应用程序启动应用程序时，它会正确保留状态。

Myapp-->splashscreen-->Activity1-->Activity2-->点击home-->点击shortcuticon-->splashscreen

Myapp-->splashscreen-->Activity1-->Activity2-->点击home-->-->点击menu-->所有应用-->点击shortcuticon-->Activity2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:07:31.697

我将假设您最初（第一次）从 IDE（如 Eclipse 或 IntelliJ）或使用安装程序（从市场或浏览器或在文件浏览器中单击 APK）安装它之后启动应用程序。如果是这样，这是 Android 中的一个已知错误（请参阅[http://code.google.com/p/android/issues/detail?id=26658](http://code.google.com/p/android/issues/detail?id=26658)）。许多人已经为这个问题苦苦挣扎了好几天:-(

可以在[http://code.google.com/p/android/issues/detail?id=2373#c21找到针对此问题的简单解决方法](http://code.google.com/p/android/issues/detail?id=2373#c21)

要验证这是您的问题，请不要从 IDE 或安装程序启动它。只需安装该应用程序，然后从可用应用程序列表中启动它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-25T08:56:25.227

如果快捷方式是以编程方式创建的，那么您的应用程序将不会恢复，因为您已为快捷方式意图指定了一个活动，

要解决此问题，请在[此处查看答案](https://stackoverflow.com/questions/17058617/how-create-homescreen-shortcut-to-resume-top-activity/21348528#21348528)

# c# - 在 ItemsControl 项模板上设置 VisualState

> ID：11296206
> 
> 赞同：0
> 
> 时间：2012-07-02T15:00:56.393
> 
> 标签：c#, wpf, itemscontrol

我有一个 ItemsControl 和一个绑定到数据项的 ItemTemplate。ItemTemplate 相当复杂，我添加了一些视觉状态，以便我可以更改它的外观。

我希望能够在 ItemsControl 之外发生的事件上将所有项目 VisualState 切换到我选择的另一个状态。

我该怎么做呢？我试过使用 VisualStateManager.SetState，但这依赖于一个控件，而不是一个模板，这似乎是我可以通过 WaveItems.ItemContainerGenerator.ContainerFromIndex(i) 获得的全部。

问候

特里斯坦

编辑：

这是我的各个项目的数据模板。如果您注意到我设置的触发器，它会处理模板本身的 MouseEnter / MouseLeave。我想将这些连接到 ItemsControl MouseEnter / MouseLeave，而无需编写任何代码。有没有办法做到这一点？

```
 <DataTemplate x:Key="LineTemplate">
    <Grid x:Name="LineGrid" HorizontalAlignment="Left" Height="500" VerticalAlignment="Center" Width="3">

        <VisualStateManager.CustomVisualStateManager>
            <ei:ExtendedVisualStateManager/>
        </VisualStateManager.CustomVisualStateManager>

        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="VisualStateGroup">
                <VisualStateGroup.Transitions>
                    <VisualTransition GeneratedDuration="0"/>
                </VisualStateGroup.Transitions>
                <VisualState x:Name="Expanded">
                    <Storyboard>
                        <DoubleAnimation Duration="0:0:1" By="-100" Storyboard.TargetProperty="(Line.Y2)" Storyboard.TargetName="lineTop"/>
                        <DoubleAnimation Duration="0:0:1" By="100" Storyboard.TargetProperty="(Line.Y2)" Storyboard.TargetName="lineBottom"/>
                        <DoubleAnimation Duration="0:0:1" To="0.5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="lineTop" d:IsOptimized="True"/>
                        <DoubleAnimation Duration="0:0:1" To="0.25" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="lineBottom" d:IsOptimized="True"/>
                    </Storyboard>
                </VisualState>
                <VisualState x:Name="Normal">
                    <Storyboard>
                        <DoubleAnimation Duration="0:0:1" To="0" Storyboard.TargetProperty="(Line.Y2)" Storyboard.TargetName="lineTop" d:IsOptimized="True"/>
                        <DoubleAnimation Duration="0:0:1" To="{Binding BottomValue}" Storyboard.TargetProperty="(Line.Y2)" Storyboard.TargetName="lineBottom" d:IsOptimized="True"/>
                        <DoubleAnimation Duration="0:0:1" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="lineTop" d:IsOptimized="True"/>
                        <DoubleAnimation Duration="0:0:1" To="0.495" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="lineBottom" d:IsOptimized="True"/>
                    </Storyboard>
                </VisualState>
                <VisualState x:Name="ExpandedHighlight"/>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>

        <i:Interaction.Triggers>
            <i:EventTrigger EventName="MouseEnter" >
                <ei:GoToStateAction x:Name="Expand" StateName="Expanded"/>
            </i:EventTrigger>
            <i:EventTrigger EventName="MouseLeave">
                <ei:GoToStateAction x:Name="Collapse" StateName="Normal"/>
            </i:EventTrigger>
        </i:Interaction.Triggers>

        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>

        <Line Grid.Row="0" x:Name="lineTop" VerticalAlignment="Bottom" StrokeThickness="3" Stroke="{Binding Brush}" Y1="{Binding TopValue}" Y2="0" RenderTransformOrigin="0.5,0.5">
            <Line.RenderTransform>
                <CompositeTransform ScaleY="1"/>
            </Line.RenderTransform>
        </Line>

        <Line Grid.Row="1" x:Name="lineBottom" VerticalAlignment="Top" StrokeThickness="3" Stroke="{Binding Brush}" Y1="0" Y2="{Binding BottomValue}" RenderTransformOrigin="0.5,0.5" Opacity="0.5">
            <Line.RenderTransform>
                <CompositeTransform ScaleY="1"/>
            </Line.RenderTransform>
        </Line>
    </Grid>
</DataTemplate> 
```

我还尝试使用以下绑定： SourceObject="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}}"

但这会显示一条消息：“silverlight 项目中不支持类型”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:27:44.130

固定的：

```
 <i:Interaction.Triggers>
            <i:EventTrigger
                SourceObject="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=ItemsControl}}"
                EventName="MouseEnter">
                <ei:GoToStateAction x:Name="Expand" StateName="Expanded"/>
            </i:EventTrigger>
            <i:EventTrigger 
                SourceObject="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=ItemsControl}}"
                EventName="MouseLeave">
                <ei:GoToStateAction x:Name="Collapse" StateName="Normal"/>
            </i:EventTrigger>
        </i:Interaction.Triggers> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:04:50.007

在[Thomas Danemar 的博客](http://tdanemar.wordpress.com/2009/11/15/using-the-visualstatemanager-with-the-model-view-viewmodel-pattern-in-wpf-or-silverlight/)中，有一个 class to hold 和 switch 的示例`VisualState`。它是通过绑定`VisualState`到 ViewModel 中的附加属性来实现的，他们只需将其设置为期望值。*您甚至可以绑定它`TwoWay`模式。*

# java - 截取屏幕截图并与社交媒体分享

> ID：11296211
> 
> 赞同：0
> 
> 时间：2012-07-02T15:01:36.010
> 
> 标签：java, android, android-intent, screenshot, share

这是代码的摘录。我可以编译它，但程序在手机/模拟器上崩溃。

```
 Bitmap bitmap;
    View v1 = MyView.getRootView();
    v1.setDrawingCacheEnabled(true);
    bitmap = Bitmap.createBitmap(v1.getDrawingCache());
    v1.setDrawingCacheEnabled(false);

    String path = Images.Media.insertImage(getContentResolver(), bitmap,
            "title", null);
    Uri screenshotUri = Uri.parse(path);

    final Intent socialIntent = new Intent(Intent.ACTION_SEND);
    socialIntent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);

    socialIntent.putExtra(Intent.EXTRA_STREAM, screenshotUri);
    socialIntent.setType("image/png"); 
```

有人知道该怎么做吗？我想截取屏幕截图并让用户分享，如果他/她喜欢的话。其他一切正常，这只是我无法获得的屏幕截图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:20:52.657

The only way a screenshot can be obtained is by having direct access to the frame-buffer which is at the kernel level, this in turn requires rooted access to accomplish this and to pull in the data from there to make up the graphics that is the screen itself.

This requires either a modded ROM for this purpose or having root privilege to do so. Sony, I know, do it, they have that facility in place to do so without root as the ROM is modified, in the power menu, there is an option 'Take Screenshot'. CM is another that requires root.

There is a facility available in ICS that has the programmatic API available to do this, see this [answer](https://stackoverflow.com/questions/10820587/android-ics-screen-capture-using-native-apis), but with earlier versions, you're out of luck.

# c# - MVVM DynamicObject + 实体框架 STE 实体 + 属性更改行为

> ID：11296213
> 
> 赞同：2
> 
> 时间：2012-07-02T15:01:37.623
> 
> 标签：c#, wpf, entity-framework, mvvm, dynamicobject

我正在为我的 WPF 项目创建一个 BaseViewModel，它派生自 DynamicObject，我不确定如何处理与主实体“相关”的实体的属性更改（主实体的导航属性）视图模型）。

例如：

虚拟机：

```
 public class CustomerCRUDViewModel: BaseEntityViewModel<Customer>
    {
        ...
    } 
```

例如，这将是 Customer CRUD 的 VM。例如，客户实体有一个称为地址的导航属性（地址类型的实体）。

现在，问题是，当将视图绑定到 Address 内的属性时，更改不会报告给 VM，而是直接报告给实体，因此不会触发 VM 级别中定义的任何行为。

我知道解释可能不够清楚，我只是不知道如何用我糟糕的英语更好地解释自己。

我的问题是：通用的基于 DynamicObject 的 VM 如何处理我需要为不属于主实体的属性定义行为的场景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:32:16.050

我最终通过在 System.Dynamic.DynamicObject.TryGetMember 'getter' 方法中使用缓存的 BaseViewModels 实例包装导航属性来解决这个问题。虽然不确定它是否是性能最高的解决方案，但我总是可以在派生的实体视图模型中强烈键入我的“导航视图模型”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:00:18.797

如果您的模型（在本例中为客户）实现了`INotifyPropertyChanged`接口，则 viewMoodle 可以注册到模型`PropertyChanged`事件。通过这种方式，ViewModel 可以了解发生的任何属性更改，并可以做出相应的反应。

# python - 如何根据python中的输入循环基于文本的游戏

> ID：11296216
> 
> 赞同：0
> 
> 时间：2012-07-02T15:01:41.050
> 
> 标签：python, loops, text

到目前为止我有这个：

```
print('a skeleton comes into view, the hiker must have been dehydrated.')
print ('he was wearing a Yankees HAT, to the right of his body he set his BACKPACK         and WOODEN WALKING STICK next to the wall')
input2 = raw_input ("You may SEARCH____(object),PICK UP____, USE____ ON_____, or GO ON: ")
if input2 == 'PICK UP HAT':
    print 'taken'
    hat = hat+1
    input2 = raw_input ("You may SEARCH____(object),PICK UP____, USE____ ON_____, or GO ON: ")
#
#
#

if input2 == 'SEARCH BACKPACK':
    print ("there are OLD CLOTHES in here as well as a TARP")
    input2 = raw_input ("You may SEARCH____(object),PICK UP____, USE____ ON_____, or GO ON: ")

elif input2 == 'PICK UP CLOTHES':
    print ("tsken")
    input2 = raw_input ("You may SEARCH____(object),PICK UP____, USE____ ON_____, or GO ON: ")

elif input2 == 'PICK UP TARP':
    print ("taken")
    input2 = raw_input ("You may SEARCH____(object),PICK UP____, USE____ ON_____, or GO ON: ")

elif input2 == 'PICK UP BONE':
    print ("taken")
    input2 = raw_input ("You may SEARCH____(object),PICK UP____, USE____ ON_____, or GO ON: ")

elif input2 == 'PICK UP WOODEN WALKING STICK':
    print "Taken"
    input2 = raw_input ("You may SEARCH____(object),PICK UP____, USE____ ON_____, or GO ON: ")

elif input2 == 'GO ON':
    input3 = raw_input ("left or right: ")
    if input3 == 'left':
        import module3
    elif input3 == 'right':
        import module4 
```

我无法理解是否应该在这里创建一个 while 或 for 语句。

例如：我如何做到让玩游戏的人在不搜索背包的情况下不能两次拿起帽子或拿起防水布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:16:55.210

部分问题的解决方案是使用调度程序：

```
def pick_up_hat():
  return True # do stuff

def search_backpack():
  return False # do stuff

actions = {
  'PICK UP HAT': pick_up_hat,
  'SEARCH BACKPACK': search_backpack,
  # ...
}

go = True
while go:
  cmd = raw_input().strip()
  go = actions[cmd]() 
```

请注意，您的设计还有一些其他问题需要修复，例如管理状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:10:54.627

我建议使用 cmd 模块，它是标准库的一部分。它为实现基于终端的命令解析、菜单等提供了方便的基础设施。这是一个很好的基础教程：

[http://www.doughellmann.com/PyMOTW/cmd/index.html](http://www.doughellmann.com/PyMOTW/cmd/index.html)

还有一个名为 cmd2 的替代第三方模块，它的工作方式相同，但具有更多功能：

[http://pypi.python.org/pypi/cmd2](http://pypi.python.org/pypi/cmd2)

# mysql - 拆分行字段mysql创建新列

> ID：11296218
> 
> 赞同：0
> 
> 时间：2012-07-02T15:01:45.123
> 
> 标签：mysql, stored-procedures, split

我有一个包含多个字段的 MySQL 表；像这样：

```
id  name  ton           dyr
1   moo   FRET_GTR_HYU  ra
2   maa   DER_GY_TR_DB  fe
3   tee   SAME_IQ       tete
... 
```

**问题是ton**列的每一行的内容是独立的，但它们用符号“_”连接。

我想修改表格，拆分字段**ton**以最终在其他字段中保留所有相同的条目，但在**ton**字段中每行只有一个条目，就像这样......

```
id  name  ton      dyr
1   moo   FRET     ra
1   moo   GTR      ra
1   moo   HYU      ra
2   maa   DER      fe
2   maa   GY       fe
2   maa   TR       fe
2   maa   DB       fe
3   tee   SAME     tete
3   tee   IQ       tete

... 
```

我试图修改此[页面](http://www.marcogoncalves.com/2011/03/mysql-split-column-string-into-rows/)中给出的代码来执行这项工作，但由于我不是 MySQL 专家，我无法让它以我的方式工作。在上面的链接中，给出的代码适合重写给定的两列，而不是任何其他字段。

有关如何修改代码或以其他方式进行的任何帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:31:51.453

您应该使用[SUBSTRING_INDEX](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring-index) MySQL 字符串函数。以下内容应返回您所要求的内容：

```
INSERT INTO table2
SELECT id, name, SUBSTRING_INDEX(ton, '_', 1), dyr FROM table1
UNION
SELECT id, name, SUBSTRING_INDEX(ton, '_', -1), dyr FROM table1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T00:43:50.783

1）将table1结构复制到table2

2) 将 2 个存储过程添加到您的数据库中。

```
CREATE PROCEDURE peixe()
BEGIN
  DECLARE done BOOLEAN DEFAULT 0;
  DECLARE i INT;
  DECLARE cursor_id CURSOR FOR SELECT id FROM table1 WHERE ton LIKE '%_%';
  DECLARE CONTINUE HANDLER FOR SQLSTATE '02000' SET done=1;
  OPEN cursor_id;
  FETCH cursor_id INTO i;
  REPEAT
    CALL split_ton(i);
    FETCH cursor_id INTO i;
  UNTIL done END REPEAT;
  CLOSE cursor_id;
END

CREATE PROCEDURE split_ton(i INT)
BEGIN
  DECLARE str_name VARCHAR(50);
  DECLARE str_ton VARCHAR(50);
  DECLARE str_ton_el VARCHAR(50);
  DECLARE str_dyr VARCHAR(50);
  DECLARE ton_size INT;

  SELECT name, ton, dyr
  INTO str_name, str_ton, str_dyr
  FROM table1 WHERE id=i;

  SET ton_size = LENGTH(str_ton) - LENGTH(REPLACE(str_ton, '_', '')) + 1;

  WHILE ton_size > 0 DO
    SET str_ton_el = SUBSTRING_INDEX(str_ton, '_', -1);
    SET str_ton = SUBSTRING_INDEX(str_ton, '_', ton_size - 1);
    INSERT INTO table2 (id, name, ton, dyr) VALUES (i, str_name, str_ton_el, str_dyr);
    SET ton_size = ton_size - 1;
  END WHILE;
END 
```

3) 最后，执行以下语句：

```
CALL peixe 
```

我想，你已经完成了:-)

# mysql - 包含来自其他表中列的两个总和的 Mysql 查询

> ID：11296226
> 
> 赞同：0
> 
> 时间：2012-07-02T15:02:02.580
> 
> 标签：mysql, left-join

从不同的表中得到一个运行总和的查询，它运行良好（并且也从这个论坛获得）：

```
SELECT
    R.REP_ID as repid, R.REP_DESBREV as repdesc, 
    IFNULL(SUM(RD.REPDATA_CANT), 0) as cant
FROM 
    REPUESTOS R 
LEFT JOIN 
    REP_DATA RD, ON RD.REPDATA_REPID = R.REP_ID 
GROUP BY 
    RD.REPDATA_REPID 
```

现在，问题是我想添加一个额外的列来获取总库存（类似于

```
IFNULL(SUM(I.INV_CANT), 0) as inv) 
FROM table INVENTARIO I
WHERE I.INV_REPID = R.REP_ID 
```

这个值可以通过 JOIN 获得，就像我们得到第一个有效的语句一样，但我还没有找到在一个查询中包含 BOTH SUMS 的方法。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:08:03.767

试试这个查询示例

```
select 
t1.id,
ifnull(sum(t1.my_column),0) as Sum1,
ifnull(other.sum,0) as Sum2
from table as t1
left join (select id , sum(other_table_column) from other_table group by id) as other
on t1.id = other.id
group by t1.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T14:13:50.170

我刚刚实现了以下语句：

```
SELECT
    R.REP_PARNUM as parnum,
    R.REP_ID as repid,
    R.REP_DESBREV as repdesc,
    IFNULL(SUM(RD.REPDATA_CANT),0) as cant,
    IFNULL(SUM(I.INV_CANT),0) as intt
FROM REPUESTOS R
LEFT JOIN REP_DATA RD ON RD.REPDATA_REPID = R.REP_ID
LEFT JOIN INVENTARIO I ON I.INV_REPID = R.REP_ID
GROUP BY R.REP_PARNUM 
```

它实际上运行，但问题是它给了我一些奇怪的值。例如，第一个总和列 ( `REPDATA_CANT`) 中的某些值显示为 -3，即如果实际结果为 20，则显示为 17，依此类推。在第二个总和列`INV_CANT`（

# c# - 将 XML 数据放入组合框

> ID：11296228
> 
> 赞同：1
> 
> 时间：2012-07-02T15:02:10.730
> 
> 标签：c#, xml, combobox

我有一个带有 3 个组合框和一个 XML 文件的 Windows 窗体，如下所示

```
<?xml version="1.0"?>
<shrtcutkeys>
    <Keysmain>
        <keychars>
            <key1>
                Ctrl
            </key1>
            <key1>
                Alt
            </key1>
            <key1>
                Shift
            </key1>
        </keychars>
    </Keysmain>
    <Seckeys>
        <keychars>
            <key2>
                Ctrl
            </key2>
            <key2>
                Alt
            </key2>
            <key2>
                Shift
            </key2>
        </keychars>
    </Seckeys>
    <Alphas>
        <keychars>
            <key3>
                a
            </key3>
            <key3>
                b
            </key3>
            <key3>
                c
            </key3>
        </keychars>
    </Alphas>
</shrtcutkeys> 
```

所以我想在combobox1中显示所有key1，在combox2中显示所有key2等等..尝试这样做但没有真正工作

```
DataSet dsSet = new DataSet();
            dsSet.ReadXml("C:\\Users\\jackandjill\\Documents\\Visual Studio 2010\\Projects\\highlite\\highlite\\keys.xml");
            comboBox1.DataSource = dsSet.Tables["keys"];
            comboBox1.DisplayMember = "key1"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T15:15:49.547

我更喜欢使用 Linq2XML：

将数据加载到[`XDocument`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)：
从文件加载：

```
var xmlDocument = XDocument.Load(fileName); 
```

或从字符串加载

```
var xmlDocument = XDocument.Parse( @"<?xml version=""1.0""?>
<shrtcutkeys>
    <Keysmain>
        <keychars>
            <key1>
                Ctrl
            </key1>
            <key1>
                Alt
            </key1>
            <key1>
                Shift
            </key1>
        </keychars>
    </Keysmain>
    <Seckeys>
        <keychars>
            <key2>
                Ctrl
            </key2>
            <key2>
                Alt
            </key2>
            <key2>
                Shift
            </key2>
        </keychars>
    </Seckeys>
    <Alphas>
        <keychars>
            <key3>
                a
            </key3>
            <key3>
                b
            </key3>
            <key3>
                c
            </key3>
        </keychars>
    </Alphas>
</shrtcutkeys>"); 
```

然后您可以选择所需的项目

```
var mainItems = from key in xmlDocument.Descendants("key1")
                select key.Value;
var secKeyItems = from key in xmlDocument.Descendants("key2")
                select key.Value;
var alphaItems = from key in xmlDocument.Descendants("key3")
                select key.Value; 
```

您现在可以将每个组合绑定到选定的结果，如下所示：

```
comboBox1.DataSource = mainItems.ToList(); 
```

您可能想要清洗您的 XML（删除换行符和空格）

```
var mainItems = from key in xmlDocument.Descendants("key1")
                select key.Value.Trim();
var secKeyItems = from key in xmlDocument.Descendants("key2")
                select key.Value.Trim();
var alphaItems = from key in xmlDocument.Descendants("key3")
                select key.Value.Trim(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T15:19:15.807

使用 LINQ 到 XML：

```
var xml = XElement.Parse(
                @"<shrtcutkeys>
                        <Keysmain>
                            <keychars>
                                <key1>
                                    Ctrl
                                </key1>
                                <key1>
                                    Alt
                                </key1>
                                <key1>
                                    Shift
                                </key1>
                            </keychars>
                        </Keysmain>
                        <Seckeys>
                            <keychars>
                                <key2>
                                    Ctrl
                                </key2>
                                <key2>
                                    Alt
                                </key2>
                                <key2>
                                    Shift
                                </key2>
                            </keychars>
                        </Seckeys>
                        <Alphas>
                            <keychars>
                                <key3>
                                    a
                                </key3>
                                <key3>
                                    b
                                </key3>
                                <key3>
                                    c
                                </key3>
                            </keychars>
                        </Alphas>
                    </shrtcutkeys>");

var key1 = xml.Descendants("key1");

foreach (var key in key1)
    comboBox1.Items.Add(key.Value.Trim());

var key2 = xml.Descendants("key2");

foreach (var key in key2)
    comboBox2.Items.Add(key.Value.Trim());

//Do the same for other keys... 
```

# google-maps-api-3 - Google Maps API V3 关闭信息框

> ID：11296235
> 
> 赞同：3
> 
> 时间：2012-07-02T15:03:03.810
> 
> 标签：google-maps-api-3

我有一个谷歌地图版本 3，我无法按我的意愿工作。当地图打开时，页面上有几个标记，单击或悬停在标记上会打开一个带有酒店名称的小信息框。单击另一个标记会关闭第一个信息框并在新标记上打开一个新信息框。问题在于关闭最后一个信息框。

如果我在选项中允许 closeBox，则在关闭 InfoBox 的其余部分时，closeBox（正方形中的小十字）会留在屏幕上。这只发生在信息框因打开另一个信息框而关闭时。由于找不到解决方案，我打算取消 closeBox 并让用户单击地图的空白区域以摆脱最终的 InfoBox。但是，目前，这也行不通。

可以在[http://www.littlehotels-testdomain.co.uk/spain/abadia.php](http://www.littlehotels-testdomain.co.uk/spain/abadia.php)看到问题页面（点击照片右侧的“查看这家酒店的位置图”）。

应该使这项工作的代码是：

```
 google.maps.event.addListener(hotelmarker, 'mouseover', function() {
    var ib = new InfoBox(ibOptions);
    boxText.innerHTML = hotelname;
    ib.open(map, hotelmarker);
    });
  google.maps.event.addListener(map, 'click', function() {
    ib.close(map, hotelmarker);
    }); 
```

我缺少第二个事件侦听器中的某些内容吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T15:27:14.797

您需要使您的 ib（信息框参考）全球化。把它放在你的 Listener 函数之外。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-25T11:14:27.360

Andy 的 JavaScript 编程第 47 条规则：永远不要使用全局变量来完成使用 jQuery 只需一行代码就能完成的事情：

```
$(".infoBox").hide(); 
```

# facebook - 用户退出 Facebook 时未调用 FB.getLoginStatus() 回调

> ID：11296236
> 
> 赞同：2
> 
> 时间：2012-07-02T15:03:05.807
> 
> 标签：facebook, authorization, facebook-javascript-sdk, facebook-login

如果用户登录到 Facebook，FB.getLoginStatus() 工作正常。但是，如果用户没有登录到 facebook，则不会调用 FB.getLoginStatus() 回调，并且我无法在我的代码中处理这种情况，因为我没有收到回调。我不在沙盒模式下。

我还添加了 'true' 来强制回调，例如）`FB.getLoginStatus(function(response){}, true)`。它没有帮助。这是一个错误吗？还修好了吗？

如果没有，请在用户退出 Facebook 时解决。我现在在这个问题上坚持了一周。

```
function GetFBLoginStatus() {
    FB.getLoginStatus(function(response) {
        alert("inside call back function"); 
        if (response.status === 'connected') {
            var uid = response.authResponse.userID;
            var accessToken = response.authResponse.accessToken; 
            alert("Connected FBID = " + uid);
        } else if (response.status === 'not_authorized') { 
            alert("not_authorized"); 
        } else {
            alert("Not Logged into facebook");
        }
        return true;
    }, true)
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T16:22:32.040

您可以创建一个`auth.logout`事件：

```
FB.Event.subscribe('auth.logout', function(response) {
    alert('logged out!');
}); 
```

或者更好的解决方案，创建一个`auth.authResponseChange`事件：

```
FB.Event.subscribe('auth.authResponseChange', function(response) {
    console.log('The status of the session changed to: '+response.status);
    alert(response.status);
}); 
```

**更新：**

```
<div id="fb-root"></div>
<script>
window.fbAsyncInit = function() {
    FB.init({
        appId  : 'APP_ID',
        status : true,
        cookie : true,
        xfbml  : true,
    });

    FB.Event.subscribe('auth.login', function(response) {
        alert('logged in');
    });

    FB.Event.subscribe('auth.logout', function(response) {
        alert('logged out');
    });     
};

function GetFBLoginStatus() {
    FB.getLoginStatus( function(response) {
        console.log(response);
        if (response.status === 'connected') {
            var accessToken = response.authResponse.accessToken;
            alert(accessToken);
        } else if (response.status === 'not_authorized') {
            //login function
            alert('login first');
        } else {
            //login function
            alert('login first');
        }
    }, true);
}

//Load the SDK Asynchronous
(function(d) {
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
} (document));
</script>

<div>
<a href="#" onclick="GetFBLoginStatus()"><img src="../FacebookSmall.bmp" />ddd</a>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:06:58.087

回应菲利普的评论：我在退出facebook后尝试刷新页面。这是我的代码：我在单击链接时调用 javascript 函数 GetFBLoginStatus()。当我登录 Facebook 时，一切正常。当我没有登录 facebook 时，我没有收到任何警报。

```
<div id="fb-root">
</div>

<!-- pull down Facebook's Javascript SDK -->
<script src="http://connect.facebook.net/en_US/all.js"></script>

<script>
    // initialize the library with your Facebook API key
    FB.init({ apiKey: 'XXXXXXXXXXXXX' });
</script>

<div>
<a href="#" onclick="GetFBLoginStatus()"><img src="../FacebookSmall.bmp" /></a>
</div>

<script type="text/javascript" language="javascript">
    function GetFBLoginStatus() 
{
          FB.Event.subscribe('auth.authResponseChange', function(response){                 
        alert(response.status);
        });

        FB.getLoginStatus(function(response) 
{
         alert("inside call back function");

        if (response.status === 'connected')                     
        {   
    var uid = response.authResponse.userID;
           var accessToken = response.authResponse.accessToken;                
           alert("Connected FBID = " + uid);
        } 
        else if (response.status === 'not_authorized') 
 { 
   alert("not_authorized"); 
 } 
       else 
{
  alert("Not Logged into facebook");    
}

     }, true) ;      
  } 
```

# php - Foreach 循环的奇怪行为

> ID：11296238
> 
> 赞同：0
> 
> 时间：2012-07-02T15:03:24.373
> 
> 标签：php, loops, foreach

我在以下 foreach 循环中遇到了一些奇怪的行为。我在 PHP 5.3.0 上运行它。

```
print_r($this->form_spec['fields']);
foreach($this->form_spec['fields'] as $f=>$field) {
     print_r($this->form_spec['fields']);                      
} 
```

第一个 print_r 打印以下内容（注意：我排除了一堆键以使我的观点更清楚）：

```
Array
(      
    [0] => Array
    (
       [field_name] => d_first_name
    )

    [1] => Array
        (
            [field_name] => d_last_name
        )
) 
```

第二个`print_r`打印：

```
Array
(
    [0] => Array
        (
            [field_name] => d_first_name
        )

    [1] => Array
        (
            [field_name] => d_first_name
        )
) 
```

$this->form_spec['fields'] 在到达 for each 循环之前已经有了它的值。第一个 print_r 显示正确的值。然后第二个 print_r 显示值已更改。这些之间没有其他代码。

这可能是 5.3.0 中的错误吗？

我可以解决这个问题的唯一方法是使用 for 循环，但是 Foreach 应该工作，它以前总是这样做的。有人可以启发我吗？

[编辑] 澄清一下，错误是 $this->form_spec['fields'] 的内容发生了变化，而不是我无法正确打印的事实。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:06:31.810

您正在打印`$this->form_spec['fields']`而不是迭代的结果`$field`。

**编辑**

现在我明白你的意思了。看起来您正在更改对象的内容，同时在循环中的某处对其进行迭代。能否请您发布相关代码？

我 99% 确定在迭代时会触及更多代码，这些代码会改变你所拥有的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T15:10:11.193

你应该这样做：-

```
print_r($this->form_spec['fields']);
foreach($this->form_spec['fields'] as $f=>$field) {
     print_r($field);                      
} 
```

我已经在你的代码上运行了这个测试：-

```
for($i = 0; $i < 10; $i++){
    $form_spec['fields'][] = array('field_name' => 'field_' . $i);
}
print_r($form_spec['fields']);
foreach($form_spec['fields'] as $f => $field) {
    print_r($form_spec['fields']);
} 
```

(PHP_VERSION = 5.3.0)

并得到了我期望的输出，所以你必须在某个地方改变那个数组。您需要非常仔细地检查您的代码。

输出：-

```
Array
(
    [0] => Array
        (
            [field_name] => field_0
        )

    [1] => Array
        (
            [field_name] => field_1
        )

    [2] => Array
        (
            [field_name] => field_2
        )

    [3] => Array
        (
            [field_name] => field_3
        )

    [4] => Array
        (
            [field_name] => field_4
        )

    [5] => Array
        (
            [field_name] => field_5
        )

    [6] => Array
        (
            [field_name] => field_6
        )

    [7] => Array
        (
            [field_name] => field_7
        )

    [8] => Array
        (
            [field_name] => field_8
        )

    [9] => Array
        (
            [field_name] => field_9
        )

) 
```

重复10次。

# javascript - Javascript未提供所需的输出

> ID：11296239
> 
> 赞同：1
> 
> 时间：2012-07-02T15:03:24.643
> 
> 标签：javascript, split

`split(' ')`和same有什么区别`split(" ")`.. ie8 中是否支持第二种拆分方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:10:06.380

没有区别，`" "`并且`' '`是编写相同字符串文字的两种不同方式，并且该函数应该无法发现使用了哪一种。

你能重现他们行为不同的情况吗？你能在[jsfiddle](http://jsfiddle.net)上发布一个最小的片段吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:34:15.250

嵌套引号可能会出现差异，例如在 onlick 分配中。规则是双引号可以包含单引号，反之亦然。

```
<button onlick="parts=s.split(' ');">split</button> 
```

或者

```
<button onlick='parts=s.split(" ");'>split</button> 
```

# javascript - 如何在 jQuery 中对随机 div 顺序进行排序？

> ID：11296247
> 
> 赞同：0
> 
> 时间：2012-07-02T15:03:40.633
> 
> 标签：javascript, jquery, sorting, random

在页面加载时，我使用以下代码随机化子 div 的顺序：

```
function reorder() {
   var grp = $("#team-posts").children();
   var cnt = grp.length;

   var temp, x;
   for (var i = 0; i < cnt; i++) {
       temp = grp[i];
       x = Math.floor(Math.random() * cnt);
       grp[i] = grp[x];
       grp[x] = temp;
   }
   $(grp).remove();
   $("#team-posts").append($(grp));
} 
```

我似乎无法弄清楚如何以原始顺序恢复帖子。这是我当前代码的演示[http://jsfiddle.net/JsJs2/](http://jsfiddle.net/JsJs2/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T15:10:48.540

`reorder()`在调用函数之前保留如下的原始副本，并在以后使用它进行重新排序。

```
var orig = $("#team-posts").children();

$("#undo").click(function() {
    orderPosts();
});

function orderPosts() {
   $("#team-posts").html( orig )  ;
} 
```

**[工作演示](http://jsfiddle.net/JsJs2/9/)**

## ***完整代码***

```
var orig = $("#team-posts").children(); ///caching original

reorder();

$("#undo").click(function(e) {
    e.preventDefault();
    orderPosts();
});

function reorder() {
    var grp = $("#team-posts").children();
    var cnt = grp.length;

    var temp, x;
    for (var i = 0; i < cnt; i++) {
        temp = grp[i];
        x = Math.floor(Math.random() * cnt);
        grp[i] = grp[x];
        grp[x] = temp;
    }
    $(grp).remove();
    $("#team-posts").append($(grp));
}

function orderPosts() {
    // set original order
    $("#team-posts").html(orig);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:10:24.843

只需给每个项目一个具有相应顺序的类，然后获取每个 div 的类名并将其保存到变量中

```
$("#team-posts div").each(function() {
    var parseIntedClassname = parseInt($(this).attr("class");
    arrayName[parseIntedClassname] = $("#team-posts div." + parseIntedClassname).html()
}); 
```

您可以通过将它们的 html 按顺序保存到数组中来重新排序它们

```
$("#team-posts").html();
for(var i=0;i<arrayName.length;i++){
    $("#team-posts").append('<div class="'+i+'">'+arrayName[i]+'</div>');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T15:11:18.423

假设它适用，[“撤消”插件](http://docs.jquery.com/Plugins/Undo)怎么样？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T15:18:33.770

保存原始订单的解决方案可能是最好的，但如果你必须动态排序，你可以使用这个：

[http://www.w3schools.com/jsref/jsref_sort.asp](http://www.w3schools.com/jsref/jsref_sort.asp)

```
function orderPosts() {
    var $grp = $("#team-posts"),
        ordered = $grp.children().toArray().sort(function(a, b) {
            return parseInt($(a).text()) > parseInt($(b).text());
        });
    $grp.empty().append(ordered);
} 
```

# php - 重复的 javascript 代码 -

> ID：11296249
> 
> 赞同：0
> 
> 时间：2012-07-02T15:03:47.743
> 
> 标签：php, javascript, mysql

我有一个从网上下载的 javascript。这很好用。我的问题是我现在需要在页面上的三个实例上使用相同的脚本？我如何复制或编辑此 javascript 代码以实现此目的。

为了给你一个背景，我有一个下拉列表，onchange 调用下面的函数来填充一个带有 mysql 数据的表而不刷新页面。该脚本显示来自另一个页面 getpersonsformedical.php 的信息。

我现在有两个其他页面，我想使用相同的 javascript 在同一页面上显示。即getjobsformedical.php 和getrisksformedical.php。

任何帮助，将不胜感激。（抱歉我的 javascript 不是很好）。

我可以在另一个脚本标签中复制代码吗？但是然后我如何为单个标签 onclick 调用多个 onchange 事件。所有这三个页面都必须从单个 onclick 中调用。

我知道还有其他方法可以做到这一点，但如果我们能坚持这种方法，我们将不胜感激。

为了澄清，我需要一个 onchage 事件来显示三个单独的 php 页面（带有 mysql 数据）在三个单独的 .

**更新答案**

感谢dystroy，完整的工作脚本是：

```
<script> 
function showUser(userNumber, str, target, page) {  
  if (str=="")  {  
       document.getElementById(target + userNumber).innerHTML=''; 
     return;  
    }    
    var xmlhttp=new XMLHttpRequest(); 
    xmlhttp.onreadystatechange=function()  {  
      if (xmlhttp.readyState==4 && xmlhttp.status==200)   {  
        document.getElementById(target).innerHTML = xmlhttp.responseText;  
      }  
    }  
    xmlhttp.open("GET",page+"?q="+str,true);  
    xmlhttp.send();  
  }  

    function showThreeSections(userNumber, str) { 
    showUser(userNumber, str, 'a', 'getpersonsformedical.php'); 
    showUser(userNumber, str, 'b', 'getjobsformedical.php'); 
    showUser(userNumber, str, 'c', 'getrisksformedical.php'); 
    }
</script> 
```

输出到div：

```
<div align="left" id="a"><font color=gray>Person Assignment will be shown here</font></div>
<div align="left" id="b"><font color=gray>Person Jobs will be shown here</font></div>
<div align="left" id="c"><font color=gray>Person Risks will be shown here</font></div> 
```

谢谢和问候， 瑞安

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T15:13:49.560

您应该在 HTML 页面的 HEAD 元素中包含脚本，只有一次，但需要另一个参数：页面名称。

第二个函数可以用不同的参数调用第一个函数三次。

像这样的东西：

```
<HEAD>
 ... other things

<script>
function showUser(userNumber, str, page) { 
  if (str=="")  { 
      return; 
    }   
    var xmlhttp=new XMLHttpRequest(); 
    xmlhttp.onreadystatechange=function()  { 
      if (xmlhttp.readyState==4 && xmlhttp.status==200)   { 
        document.getElementById("txtHint" + userNumber).innerHTML += xmlhttp.responseText; 
      } 
    } 
    xmlhttp.open("GET",page+"?q="+str,true); 
    xmlhttp.send(); 
  } 

  function showThreeSections(userNumber, str) {
      document.getElementById("txtHint" + userNumber).innerHTML='';
      showUser(userNumber, str, 'getpersonsformedical.php');
      showUser(userNumber, str, 'page2.php');
      showUser(userNumber, str, 'page3.php');
  }
</script> 
```

请注意，大函数**添加**到 innerHTML 而不是清理它。

然后你可以有这个选择：

```
<SELECT NAME=medcondition3 id=medcondition3 onchange="showThreeSections(1, this.value)"> 
```

但是这个解决方案可能很糟糕：你可能应该有不同的目标 div 来填充，而不是只有一个。如果不重新设计（或至少研究）整个页面，很难说。

* * *

编辑 ：

如果你想定位不同的 div，你应该：

1）有三个div。例如

```
<div id=a1></div>
<div id=b1></div>
<div id=c1></div> 
```

2）修改代码例如这样：

```
<script>
function showUser(userNumber, str, target, page) { 
  if (str=="")  { 
       document.getElementById(target + userNumber).innerHTML='';
     return; 
    }   
    var xmlhttp=new XMLHttpRequest(); 
    xmlhttp.onreadystatechange=function()  { 
      if (xmlhttp.readyState==4 && xmlhttp.status==200)   { 
        document.getElementById(target + userNumber).innerHTML = xmlhttp.responseText; 
      } 
    } 
    xmlhttp.open("GET",page+"?q="+str,true); 
    xmlhttp.send(); 
  } 

  function showThreeSections(userNumber, str) {
      showUser(userNumber, str, 'a', 'getpersonsformedical.php');
      showUser(userNumber, str, 'b', 'page2.php');
      showUser(userNumber, str, 'c', 'page3.php');
  }
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T15:13:40.967

在`xmlhttp.open`制作这样的 if 函数之前，

```
if(str == str){
    var page = "getjobsformedical.php?q="+str;
}
else{
    var page = "getrisksformedical.php?q="+str;
} 
```

进而，

```
xmlhttp.open("GET",page,true); 
```

**更新：**

```
if (xmlhttp.readyState==4 && xmlhttp.status==200)   {
    if(str == 'getjobsformedical.php'){
        document.getElementById("txtHint1").innerHTML += xmlhttp.responseText; 
    }
    elseif(str == 'getrisksformedical.php'){
        document.getElementById("txtHint2").innerHTML += xmlhttp.responseText; 
    }
    elseif(str == 'page3.php'){
        document.getElementById("txtHint3").innerHTML += xmlhttp.responseText; 
    }
 } 
```

# c# - 在指定时间引发事件

> ID：11296251
> 
> 赞同：2
> 
> 时间：2012-07-02T15:03:47.180
> 
> 标签：c#, .net, timer, schedule

有人可以给我一个代码，如何在指定时间过后引发事件。

例如我有这个时间：

```
08:00 12:00 20:30 23:00 
```

我如何订阅在这些时间引发的事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T15:08:46.210

尝试以下方法：

```
DateTime target = ...
int interval = (int)(target - DateTime.Now).TotalMilliseconds;
var timer = new System.Timers.Timer(interval);
timer.Elapsed += new ElapsedEventHandler(timer_Elapsed);
timer.Enabled = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:46:23.477

使用 System.Timers.Timer

可以在[MSDN](http://msdn.microsoft.com/en-us/magazine/cc164015.aspx)上找到有关这方面的详细信息。

当事件结束时，引发事件并重新编程计时器以再次为您的下一个事件关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T15:15:16.290

试试[石英网](http://quartznet.sourceforge.net/)。
它可以在指定的时间内运行您需要的任何东西，其中之一是触发事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T15:10:41.670

我用于应用程序的方法是制作一个每隔几分钟触发一次的计时器。当它越来越接近目标时间（例如当前时间+间隔>目标时间）时，间隔变小。

对于那个特定的应用程序，精确的精度并不那么重要，所以我没有让间隔小于 500 毫秒。

最后，当你认为你已经足够接近时，你就去做你当时需要做的任务。

# linkedin - 从用户 ID 派生 LinkedIn 个人资料 URL？

> ID：11296262
> 
> 赞同：21
> 
> 时间：2012-07-02T15:04:16.477
> 
> 标签：linkedin

是否可以从用户 ID 派生出linkedin 个人资料网址（公共或私有）？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-02T15:06:59.720

您可以`ID`在此 URL 中使用，这将为您提供指向用户配置文件的链接`http://www.linkedin.com/profile/view?id=YourID`

更新：显然，这个解决方案不再有效。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-05-22T16:35:55.150

您需要`r_basicprofile`从用户那里获得权限，然后`public-profile-url`从响应中获取该字段。

[在https://developer.linkedin.com/docs/fields/basic-profile](https://developer.linkedin.com/docs/fields/basic-profile)阅读更多内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-30T13:26:46.170

我想这些年来LinkedIn API 发生了一些变化。

这是对我有用的解决方案：

```
http://www.linkedin.com/in/USERNAME 
```

在我的网站中将其用作链接以链接到用户的 LinkedIn 个人资料页面，并且效果很好。

# magento - Magento 错误 - 在 JS.php 中的非对象上调用成员函数 options()

> ID：11296264
> 
> 赞同：1
> 
> 时间：2012-07-02T15:04:24.153
> 
> 标签：magento, nginx, timeout

我在我的 PHP 错误日志中看到了这个错误：

```
2012/07/02 15:40:34 [error] 9963#0: *140 FastCGI sent in stderr: "PHP Fatal error:  Call to a member function options() on a non-object in "/htdocs/app/code/local/Mana/Core/Helper/Js.php on line 35" while reading response header from upstream, client: xx.xxx.x.xxx, server: xxx.xxx.xxx.x, request: "GET /category/subcategory?___SID=U HTTP/1.1", upstream: "fastcgi://unix:/var/run/php-fcgi-xxxxxxx.com.sock:", host: "xxx.xxx.xxx.x", referrer: "http://xxx.xxx.xxx.x/category/subcategory" 
```

我从未编辑过 JS.php 文件，所以不明白为什么会发生这种情况。将商品添加到购物车时会发生错误。一切似乎实际上都在工作，但页面需要 60 秒才能加载（太长了），我猜这是脚本超时时间。一旦商品进入购物车，网站上的每个页面都需要 60 秒才能加载，从而使整个网站无法使用。

有人有什么建议吗？我非常感谢您的帮助，因为该网站无法像这样使用，而且我无法在任何地方找到原因。

# solr - Solr：将多值字段复制到单值字段

> ID：11296268
> 
> 赞同：1
> 
> 时间：2012-07-02T15:04:34.067
> 
> 标签：solr, textfield, multivalue

我正在与 Solr 合作进行预测搜索。我有一个包含产品特性的多值字段（即：“蓝色”、“250 GB 硬盘”、“12 厘米宽”等）

我需要将它们全部放在一个由空格分隔的字段中：“蓝色 250 GB 硬盘 12 厘米宽”

复制字段可以吗？

如果答案是否定的，我该怎么办？？

谢谢你！！！

# windows - Windows 批处理脚本 - 在哪里放置 .bat 以便可以从任何地方调用它？

> ID：11296273
> 
> 赞同：0
> 
> 时间：2012-07-02T15:04:45.690
> 
> 标签：windows, command-line, batch-file

我知道如何使用 *n*x 上的 bash 脚本来做到这一点——将它放在 /usr/bin 或 /usr/local/bin 中。

我应该在 Windows (7) 文件系统的哪个位置放置一个**.bat**以便可以从命令行中的任何目录调用它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:05:34.953

在您的`PATH`环境变量中提到的某个目录中。实际上，这与类 Unix 系统中的情况完全相同。

请注意，为它创建一个目录并将其添加到其中可能`PATH`比将它们扔到它们不属于的随机位置（例如`system32`）更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:16:43.390

您需要将其放在`PATH`变量中的某个位置或在那里创建一个新位置。

您可以在 Windows（Vista 及更高版本，在 XP 中可能类似）中通过右键单击来执行此操作`Computer => Properties => Advanced System Settings => Advanced => Environment Variables`。

找到该`PATH`变量，然后将您的批处理文件添加到其中的路径，或者添加您选择的新路径，用分号与其他路径分隔`;`。

# java - 使用 setProperty 方法修改 oracle.security.idm.RoleProfile 的身份

> ID：11296275
> 
> 赞同：0
> 
> 时间：2012-07-02T15:04:47.473
> 
> 标签：java, oracle-fusion-middleware

在[Oracle® Fusion Middleware Security Guide](http://docs.oracle.com/cd/E12839_01/core.1111/e10043/devuserole.htm)的修改身份部分下，它是这样写的：

> 为了修改身份，您需要对该身份的引用。User、UserProfile、Role 和 RoleProfile 类提供以下 API 以方便修改身份：
> 
> user.setProperty(ModProperty 道具); user.setProperties(ModProperty [] 道具);
> 
> ModProperty 结构包括：
> 
> ```
> the field name
> 
> its new value(s)
> 
> the modifying operator 
> ```
> 
> 有效的运算符是：
> 
> ModProperty.ADD ModProperty.REMOVE ModProperty.REPLACE
> 
> 在此示例中，显示名称被替换：
> 
> 用户配置文件 usrprofile = usr.getUserProfile(); ModProperty mprop = new ModProperty(UserProfile.DISPLAY_NAME, "修改后的显示名称", ModProperty.REPLACE); usrprofile.setProperty(mprop);

但是没有为[oracle.security.idm.RoleProfile](http://docs.oracle.com/cd/E15523_01/apirefs.1111/e14658/oracle/security/idm/RoleProfile.html)提供示例。此接口也没有`setProperty(ModProperty mprop)`类似[oracle.security.idm.UserProfile](http://docs.oracle.com/cd/E15523_01/apirefs.1111/e14658/oracle/security/idm/UserProfile.html#setProperty_oracle_security_idm_ModProperty_)。那么我们如何改变这个类的属性呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:04:47.960

要使用该`setProperty(ModProperty mprop)`方法，您需要`RoleProfile`使用类强制转换实例`oracle.security.idm.providers.stdldap.LDRole`（我没有找到它的文档或 javadoc）。事实上，接口`oracle.security.idm.RoleProfile`扩展`oracle.security.idm.Role`，抽象类`oracle.security.idm.spi.AbstractRoleProfile`实现它，而抽象类又通过以下三个类进行扩展：

1.  `oracle.security.idm.providers.stdldap.LDRole`,
2.  `oracle.security.idm.providers.libovd.LibOVDRole`和
3.  `oracle.security.idm.util.RoleProfileValueObject`

他们都有`setProperty(ModProperty modProp)`自己定义的方法。其中，该类从方法中`oracle.security.idm.util.RoleProfileValueObject`抛出，它不做任何事情。`oracle.security.idm.OperationNotSupportedException``setProperty(ModProperty modProp)`

所以解决方案是：

```
RoleProfile roleprofile = role.getRoleProfile();
ModProperty mprop = new ModProperty("someprop", "modified display name", ModProperty.ADD);
((LDRole)roleprofile).setProperty(mprop); 
```

这就是所有人。:)

# coldfusion - 您将如何使用 ColdFusion 9 或更高版本的语法对 jwt 进行编码？

> ID：11296281
> 
> 赞同：0
> 
> 时间：2012-07-02T15:04:56.057
> 
> 标签：coldfusion, android-pay

[他们的 Python 示例](https://developers.google.com/in-app-payments/docs/tutorial#1)似乎是最简单的，尽管我不同意使用名为 cakeToken 的变量，因为这让我对所购买的项目名称感到困惑：

```
cakeToken = jwt.encode(
  {
    "iss" : sellerIdentifier,
    "aud" : "Google",
    "typ" : "google/payments/inapp/item/v1",
    "exp" : int(time.time() + 3600),
    "iat" : int(time.time()),
    "request" :{
      "name" : "Piece of Cake",
      "description" : "Virtual chocolate cake to fill your virtual tummy",
      "price" : "10.50",
      "currencyCode" : "USD",
      "sellerData" : "user_id:1224245,offer_code:3098576987,affiliate:aksdfbovu9j"
    }
  },
  SELLER_SECRET) 
```

问：他们从哪里获得 jwt，或者这是一个正在创建的变量？

我想 SELLER_SECRET 是一个变量，从[沙盒设置页面](https://sandbox.google.com/checkout/customer/gadget/inapp/settings.html)填充。

我想我们会使用 dateadd('s',3600,now()) 而不是 time.time()+3600。

他们还建议使用 Google OpenID 而不是滚动您自己的登录名，但这似乎相当复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:05:36.920

python 示例使用[pyjwt 库](https://github.com/progrium/pyjwt)。Java 版本（我想可以在 ColdFusion 中轻松完成）使用[jsontoken 库](http://code.google.com/p/jsontoken/)。我没有看到该库的 jar 下载，但它包含一个 Maven 构建文件，您可以使用它自己构建一个。此处列出了 Google 建议的所有库：[https ://developers.google.com/in-app-payments/docs/libraries](https://developers.google.com/in-app-payments/docs/libraries)

# javafx-2 - JavaFX 2.2 会在 Linux 中支持 GPU 加速吗？

> ID：11296284
> 
> 赞同：1
> 
> 时间：2012-07-02T15:05:04.760
> 
> 标签：javafx-2

我一直在试验 JavaFX，我发现从 2.2.0.b15 开始，它使用 GPU 来提供改进的字体渲染。这对我来说有很大的不同。我打算将它用于可视化和动画 UI 功能，所以我想知道 Linux 中是否会提供 GPU 支持。

我遇到过许多声明，如果 JavaFX 受支持，它将使用我的 GPU，而且确实如此，但仅限于 Windows 下。我还没有看到任何关于 Linux 下图形硬件加速的信息，所以我很好奇，我可以期待 2.2 版本有这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:38:41.963

[我相信 JavaFX for Linux 已经支持基于JavaFX 2.1 Linux Develop Preview Release Notes](http://docs.oracle.com/javafx/2/release_notes_linux/jfxpub-release_notes_linux.htm)中的此声明的某些功能的硬件加速：

> Nvidia 卡支持 3D 功能（仅限专有驱动程序）。

不完全确定，因为它没有明确提到硬件加速，但我认为如果您安装了适当的 Nvidia 卡和驱动程序，则可能会使用硬件加速。随着时间的推移，可能会在 Linux 下为其他硬件和驱动程序配置添加硬件加速支持。

# spring - 类型化/通用方面值得付出努力吗？

> ID：11296285
> 
> 赞同：3
> 
> 时间：2012-07-02T15:05:08.897
> 
> 标签：spring, aop, aspectj, postsharp

我对类型/通用方面做了一些研究。关于方面的一个重要事实是遗忘。因此，方面的关注点应该与领域关注点正交。尽管如此，还是有一些调查使 AspectJ 类型安全（StrongAspectJ）/使用泛型引入每个类型的方面。一篇论文提到了享元模式的实现作为一个方面。现在我想知道是否有更多通用方面的用例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T09:55:04.450

PostSharp 是弱类型的，即建议将参数和返回值视为“对象”。PostSharp 中对泛型方面有一些支持（方面可以是泛型类），但它不是很有用，因为建议是弱类型的。

请注意，在封面后面，PostSharp 生成的胶水代码是强类型的。但是当暴露于方面代码时，一切都被向下转换为一个对象。

我正在考虑在 PostSharp 的下一个版本中实现强类型建议，可能支持泛型参数。原因是运行时性能，因为将值类型装箱到对象中会带来相当大的性能开销。请注意，泛型在 .NET 中的实现方式与在 Java 中的实现方式不同，因此这点可能需要在两个平台上进行不同的讨论。

如果您的论文需要任何帮助，请随时与我联系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T15:16:37.437

另一个用例是自动生成一些样板文件以[使类可通过 RMI 调用。](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.95.2146&rep=rep1&type=pdf)该示例为一堆方法实现了一些围绕建议。

```
pointcut callsToServer(Type T):
    call(public T Server.*(..)) && this(Client)
T around(Type T): callsToServer(T) {
    T obj = null;
    try {
        obj = proceed();
    } catch (java.rmi.RemoteException ex) {}
    return obj;
} 
```

泛型允许您说“我们将返回与方法签名所述类型相同的对象”。当然，如果我们只是返回对象，这是正确的。我们也许可以用“抛出后”建议做类似的事情，但我们不能操纵返回值来将 RemoteException 转换为空返回值。

# c# - 如何在页面加载时在更新面板中运行 RegisterStartupScript

> ID：11296288
> 
> 赞同：1
> 
> 时间：2012-07-02T15:05:15.883
> 
> 标签：c#, asp.net, updatepanel, scriptmanager, registerstartupscript

嗨，我正在尝试在处理异常后让 RegisterStartupScript 出现。但是当我处理异常时，它会更新整个页面而不是页面的一部分。

有什么方法可以让它只更新页面的一部分。

我知道你可以使用更新面板来实现这一点，但我只能让它在按钮点击时工作，有没有办法让它在页面加载时工作？

代码：

```
ScriptManager.RegisterStartupScript(this, this.GetType(), "alert", "alert('Login Again');window.location ='Login.aspx';", true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T09:25:51.473

整个页面正在重新加载，正如我在您的示例中看到的那样，您正在指示浏览器再次请求登录页面（而不是执行回发到当前页面）。

如果您需要重定向到此页面，您可以在查询字符串或会话等中包含一个值。然后您可以检查 Page_Load 方法（但这仍然会重新加载整个页面）。

# ftp - 为特定 FTP 帐户配置 Inetd 设置

> ID：11296295
> 
> 赞同：0
> 
> 时间：2012-07-02T15:05:45.790
> 
> 标签：ftp, freebsd, inetd

目前在 Inetd 中，特定协议的协议设置对于使用它连接到系统的所有用户来说都是相同的。像 FTP 左右。

有没有办法将 inetd 配置为仅针对特定用户具有不同的设置？

例如，inetd 中的当前：

> ftp 流 tcp nowait/100/40/20 /usr/libexec/ftpd ftpd -l -r -W

有什么办法可以配置新参数（ nowait/300/50/40 仅适用于特定的 FTP 用户）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:50:39.870

好吧，inetd.conf 行用于在需要时启用 FTP，并且它始终使用该设置。这是一个全局设置。

所以答案是否定的。

# soap - 来自请求的 Datapower Soap 信封标头值

> ID：11296301
> 
> 赞同：0
> 
> 时间：2012-07-02T15:06:06.820
> 
> 标签：soap, soapheader, ibm-datapower

我在 Datapower 中有一个 WS 代理。客户端和后端都是 HTTP 。我的请求包含一个soap标头，其值如下： wsa:Action wsa:MessageID wsa:ReplyTo timestamp

后端不需要所有这些值，因此在向后端发送 cnverted 请求之前将它们剥离，显然这些在我从后端返回的响应中不存在。现在，当我从 Datapower 向客户端发送回响应时，我需要将所有这些值返回到响应 soap 标头中。一个

新创建的时间戳在 5 分钟后过期。操作 MessageID 回复

有什么办法可以把它们放回去。我不想从 xslt 执行此操作，因为我相信 Datapower 提供了一些内置支持来处理此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-16T12:44:44.260

请在下面找到代码 tp remove header 并将其移至上下文变量。此外，您可以使用该上下文变量值将其放回原处。

XSl1：将用户名和密码保存到上下文变量中

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
xmlns:dp="http://www.datapower.com/extensions"
xmlns:dpconfig="http://www.datapower.com/param/config" 
extension-element-prefixes="dp date dpconfig" exclude-result-prefixes=" dp dpconfig ">
<xsl:template match="/">
 <xsl:variable name = "User">
 <xsl:value-of select="/*[local-name()='Envelope']/*[local-name()='Header']/*[local-name()='Security']/*[local-name()='UsernameToken']/*[local-name()='Username']/text()"/>

</xsl:variable>
<xsl:variable name = "PWD">
<xsl:value-of select="/*[local-name()='Envelope']/*[local-name()='Header']/*[local-name()='Security']/*[local-name()='UsernameToken']/*[local-name()='Password']/text()"/>
</xsl:variable> 
<xsl:message dp:priority="debug">
  User name : <xsl:value-of select="$User"/>
 <xsl:message dp:priority="debug">
  Password : <xsl:value-of select="$PWD"/>
 </xsl:message>
<dp:set-variable name="'var://context/Test/User'" value ="string($User)"/>
 <dp:set-variable name="'var://context/Test/Pws'" value ="string($PWD)"/>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" >
<soapenv:Header>
</soapenv:Header>           
    <soapenv:Body>
<xsl:copy-of select="/*[local-name()='Envelope']/*[local-name()='Body']/*" />
</soapenv:Body>
</soapenv:Envelope>
 </xsl:template>
</xsl:stylesheet> 
```

XSl2：将用户名和密码重新添加到 SOAP 中。

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:dp="http://www.datapower.com/extensions"
xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd"
xmlns:dpconfig="http://www.datapower.com/param/config" 
extension-element-prefixes="dp dpconfig soapenv" exclude-result-prefixes="dp dpconfig">
    <xsl:template match="@*|node()">
<xsl:copy>
 <xsl:apply-templates select="@*|node()"/>
</xsl:copy>  
</xsl:template>
  <xsl:template match = "*[local-name() = 'Header']">

<soapenv:Header xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
<soap:appid xmlns:soap="http://na.az.com/soaplatform">?</soap:appid>
<wsse:Security soapenv:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
<wsse:UsernameToken>
<wsse:Username>
<xsl:value-of select="dp:variable('var://context/Test/User')"/>
</wsse:Username>
<wsse:Password>
<xsl:value-of select="dp:variable('var://context/Test/Pws')"/>
</wsse:Password>
    </wsse:UsernameToken>
</wsse:Security>
</soapenv:Header>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:22:54.780

我只是将整个 SOAP-header 节点集存储在上下文变量中，然后在响应规则中替换它。当然，除非后端添加或修改特定值。在这种情况下，您可以选择要恢复的内容。

# android - 如何在 Eclipse 中安装旧版 Android SDK

> ID：11296302
> 
> 赞同：4
> 
> 时间：2012-07-02T15:06:12.903
> 
> 标签：android, eclipse, api, sdk

我目前正在 Eclipse 中为 android 开发一个简单的应用程序。只是接收和发送数据，以及使用相机 API。

我将 minSDKversion 设置为 8，因为我认为它拥有最广泛的用户群。但在项目开始时，eclipse 询问我将使用哪个目标 SDK 版本，因为我只安装了一个（最新的 4.0.3），所以我接受了这个。

现在我问我安装较低的 SDK 是否更明智，比如 Android 2.2，因为它不会那么大（与 4.0.3 相比）而且我的应用程序不会包含所有花哨的新功能，没有以任何方式使用？！或者我在这里说的这完全是胡说八道，应该拿我的 4.0.3 SDK？如果没有，我该如何安装较低版本？`Help -> SDK Manager`没有显示旧的 SDK...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T15:12:53.827

这是一个非常有用的链接，可能会回答您的问题：http: [//developer.android.com/sdk/installing/adding-packages.html](http://developer.android.com/sdk/installing/adding-packages.html)

基本上，打开 Android SDK 管理器，它应该会给你一个可以安装的包列表！从那里您可以选择旧的 SDK！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T05:21:08.617

嘿，由于此错误，我通常在更新时遇到与您相同的问题，它无法获取较旧的 SDK 无法获取 URL [https://dl-ssl.google.com/android/repository/addons_list.xml](https://dl-ssl.google.com/android/repository/addons_list.xml)，原因：文件未找到

这是您可以解决的方法：1）转到窗口> AndroidSDK管理器2）选择工具>选项3）设置代理（如果你坐在代理后面）4）在复选框中检查过时选项（在Android SDK管理器中）5）去到 Packages > reload（在 Android SDK Manager 中）

这对我有用如果您使用的是 windows7 。转到 Android SDK Manager 位置 > 右键单击​​ > 以管理员身份运行

最好的问候， 阿什瓦尼库马尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T22:14:27.590

我也遇到了这个问题。我在这里尝试了其他答案中列出的所有内容，但没有任何效果。我进入工具/选项（在 Android SDK 管理器中）并选中“强制使用 http:// 获取 https:// 源”并重新加载，旧的 API 神奇地出现了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-24T06:39:07.983

如果你想要 minSDKversion 从它的 maxSDKversion 1.select maxSDKversion 并删除所有旧包。2\. 完成后 sdk manager 将显示其所有旧版本。3\. 选择需要的版本并重新安装所有的包。:) :) 它对我有用.. 试试吧。

# windows-phone-7 - 为什么 Windows Phone 7 相机选择器任务中的视频按钮显示为灰色？

> ID：11296305
> 
> 赞同：0
> 
> 时间：2012-07-02T15:06:25.983
> 
> 标签：windows-phone-7, camera

我想知道为什么在同时使用 the`Camera Capture Task`和`Photo Chooser Task`with时视频捕获按钮总是灰显（禁用） `ShowCamera = true;`？

![在此处输入图像描述](../Images/2fa075e9f6684a90532031572156dfa4.png)

我试图找到启用它的方法，但没有任何成功。

我正在为 Windows Phone 7.5 开发。

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:08:20.440

它是灰色的，因为相机捕捉和照片选择器都只支持单个图像，不支持视频。

如果您要捕获视频，请在此处查看 MSDN：http: [//msdn.microsoft.com/en-us/library/hh394041 (v=VS.92).aspx](http://msdn.microsoft.com/en-us/library/hh394041(v=VS.92).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T20:23:42.217

Actually you can :). Here is the tutorial for that: [http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394041(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394041(v=vs.105).aspx)

And to download complete sample click here [http://code.msdn.microsoft.com/wpapps/Video-Recorder-Sample-5e800bbf](http://code.msdn.microsoft.com/wpapps/Video-Recorder-Sample-5e800bbf)

# asp.net - LINQ to SQL - 更新记录

> ID：11296313
> 
> 赞同：7
> 
> 时间：2012-07-02T15:06:58.197
> 
> 标签：asp.net, sql, linq

通过 C# 使用 asp.net 4。

在我的数据访问层中，我有保存和更新记录的方法。保存很容易，但更新很乏味。

我以前使用过 SubSonic，它非常棒，因为它有活动记录，并且知道如果我加载了一条记录，更改了一些条目然后再次保存它，它会将其识别为更新，并且不会尝试在数据库中保存新条目.

我不知道如何在 LINQ 中做同样的事情。结果我的工作流程是这样的：

1.  网页从数据库中获取“记录 A”
2.  其中的一些值由用户更改。
3.  “记录 A”被传回数据访问层
4.  我现在需要再次加载记录 A，将其称为“SavedRecord A”，使用传递的“记录 A”中的值更新此对象中的所有值，然后更新/保存“SavedRecord A”！

如果我只是保存“记录 A”，我最终会在数据库中获得一个新条目。

显然，通过 Record A 并执行以下操作会更好：

```
RecordA.Update(); 
```

我假设我在这里遗漏了一些东西，但我无法在网上找到一个简单的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:13:34.013

您可以使用实例上的[`Attach`方法](http://msdn.microsoft.com/en-us/library/bb548978.aspx)完成您想要的，并通过.`Table``SubmitChanges()``DataContext`

这个过程可能不像我们希望的那样简单，但您可以阅读 David DeWinter 的[LINQ to SQL：更新实体](http://davedewinter.com/2009/04/07/linq-to-sql-updating-entities/)以获得更深入的解释/教程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T15:23:26.670

假设您有一个产品类 OR DB，那么您将不得不这样做。

```
 DbContext _db = new DbContext();

    var _product = ( from p in _db.Products
                                    where p.Id == 1  // suppose you getting the first product
                                    select p).First();  // this will fetch the first record.

     _product.ProductName = "New Product";

     _db.SaveChanges();

      // this is for EF LINQ to Objects
     _db.Entry(_product).State = EntityState.Modified;  
     _db.SaveChanges();

-------------------------------------------------------------------------------------
this is another example using Attach
-------------------------------------------------------------------------------------

public static void Update(IEnumerable<Sample> samples , DataClassesDataContext db)
{
    db.Samples.AttachAll(samples);
    db.Refresh(RefreshMode.KeepCurrentValues, samples)
    db.SubmitChanges();
} 
```

如果您将实体附加到上下文，然后刷新（选择 KeepCurrentValues），Linq to SQL 将从服务器获取这些实体，比较它们，并将不同的实体标记为更新

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T15:32:29.287

当 LINQ-to-SQL 更新数据库中的记录时，它需要确切知道哪些字段已更改，以便仅更新这些字段。你基本上有三个选择：

*   当更新的数据回传到 Web 服务器时，从数据库加载现有数据，将所有属性分配给加载的对象并调用`SubmitChanges()`. 任何分配了现有值的属性都不会更新。
*   跟踪对象的未修改状态，并使用`Attach`未修改和修改的值。
*   使用乐观并发检查所需的所有状态初始化一个新对象（如果启用，默认情况下）。然后附加对象，最后在附加*后*更新任何更改的属性，以使 DataContext 更改跟踪器知道这些更新。

我通常使用第一个选项，因为它最简单。两次数据库调用会降低性能，但除非您进行大量更新，否则这无关紧要。

# login - 无法登录到我的 Prestashop 网站管理员

> ID：11296316
> 
> 赞同：0
> 
> 时间：2012-07-02T15:07:09.627
> 
> 标签：login, phpmyadmin, prestashop

我正在尝试登录我的 Prestashop 管理员。

1.  当使用忘记密码链接时，它说 =>employee 不存在
2.  我尝试在更改后更改 phpMyAdmin ps_employee 表，当我再次尝试登录时给出错误 => 1.employee 不存在，或密码错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T14:07:11.687

您可以将下一个查询的结果保存在 ps_employee 表的 passwd 字段中：

```
SELECT MD5(CONCAT("your cookie key","your new pass")) 
```

cookie 键值在 'config\settings.inc.php' 中定义

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T19:53:12.273

在 linux 下更改密码的另一种方法：从您的 prestashop 文件夹生成新的 md5 哈希：

```
echo -ne `cat config/settings.inc.php | grep _COOKIE_KEY | cut -d "'" -f 4`password | md5sum 
```

将生成的哈希复制到与您的用户相关`passwd`的`ps_employee`(`ps_`是您在安装期间设置的前缀，它可以是不同的)列

# matlab - 如何在 MATLAB 中生成 ANFIS 输出？

> ID：11296320
> 
> 赞同：0
> 
> 时间：2012-07-02T15:07:24.807
> 
> 标签：matlab, fuzzy-logic

我在工作中使用 ANFIS，并学习了使用MATLAB使用[ANFIS 。](http://www.mathworks.com/help/toolbox/fuzzy/fp715dup12.html)但是，我在图表中得到了最终的 FIS 输出。我无法以数组形式获得输出。

您能帮我了解如何以数组形式获得最终输出吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T23:29:30.043

[http://www.mathworks.com/help/toolbox/fuzzy/fp715dup12.html#FP43334](http://www.mathworks.com/help/toolbox/fuzzy/fp715dup12.html#FP43334)：

```
The command anfis takes at least two and at most six input arguments. The general format is

[fismat1,trnError,ss,fismat2,chkError] = ...
anfis(trnData,fismat,trnOpt,dispOpt,chkData,method);

where trnOpt (training options), dispOpt (display options), chkData (checking data), and method (training method), are optional. 
```

然后，您可以例如绘制输出：

```
figure(3)
subplot(2,2,1)
plotmf(fismat2, 'input', 1)
subplot(2,2,2)
plotmf(fismat2, 'input', 2)
subplot(2,2,3)
plotmf(fismat2, 'input', 3)
subplot(2,2,4)
plotmf(fismat2, 'input', 4) 
```

下图显示了结果示例：

![在此处输入图像描述](../Images/4ae32805f003352dfc62a70a087f3ea3.png)

# php - 使用 POST 将 javascript 数组发送到外部 php 文件

> ID：11296323
> 
> 赞同：0
> 
> 时间：2012-07-02T15:07:41.077
> 
> 标签：php, ajax, arrays, post

我正在尝试将 javascript 数组发送到外部 php 页面，但 php 页面唯一接收到的是我正在发送数组，而不是数组中的实际数据。

javascript -

```
var newArray = [1, 2, 3, 4, 5]; 

        $.ajax({
            type: 'POST',
            url: 'array.php', 
            data: {'something': newArray}, 
            success: function(){
                alert("sent");
            }
        }); 
```

外部 PHP 页面 -

```
<?php 
    echo($_POST['something'])); 
?> 
```

我知道以前有人问过这个问题，但由于某种原因，这对我不起作用。在过去的几天里，我也试图弄清楚这一点。有人可以指出我正确的方向。

当前输出（来自 php 页面） - 数组（即所有页面输出）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T15:09:33.480

您应该使用`var_dump`而不是`echo`.

Echo**仅**用于字符串、整数、浮点数，如果布尔值为 TRUE，它将打印 1，而数组则打印 Array。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T15:12:01.200

您也可以使用`print_r()`它更具可读性。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-02T15:17:46.940

你不将数组转换为带有一些特殊字符作为分隔符的字符串并将其分解为php吗？

# python - 读取 csv 文件的状态栏

> ID：11296325
> 
> 赞同：1
> 
> 时间：2012-07-02T15:07:42.607
> 
> 标签：python, csv, tkinter, python-2.7

**编辑：**答案如下。 `self.progress.update_idletasks()`是更新进度条的秘密握手。谢谢麦吉尔森。

我目前正在处理一些较大的 csv 文件（有时高达 700Mb），这需要一段时间（从网络驱动器中提取）。我希望能够给用户一些反馈作为过程的状态。这导致我进入 ttk 状态栏。我查看了尽可能多的示例，然后尝试将它们应用到我的程序中，但没有成功。我认为我的问题是我正在使用`for`循环来读取我的 csv 文件，但这可能不是问题。我不知道。下面是我的代码如何工作的示例。

```
import csv
import Tkinter as tk
import ttk

class MAIN(tk.Frame):
    def __init__(self, master, *args, **kwargs):
        n=0
        self.filename = 'some.csv'
        tk.Frame.__init__(self, *args, **kwargs)
        frame=tk.Frame(master, **kwargs)
        frame.grid()
        getdata = tk.Button(frame, text='Get Data', command=self.csvget)
        getdata.grid(row=n)
        n+=1
        self.progress = ttk.Progressbar(frame, orient='horizontal',
                                        length =200, mode='determinate')
        self.progress.grid(row=n)
    def prog(self):
        self.progress['value']=0
        try: f=open(self.filename, 'rb')
        except: return
        read = csv.reader(f, delimiter=',')
        self.maxrows=0
        for row in read: self.maxrows+=1
        self.progress['maximum']=self.maxrows
    def csvget(self):
        try: f=open(self.filename, 'rb')
        except: return
        read = csv.reader(f, delimiter=',')
        q=0
        for row in read:
            if q%100==0: self.progress['value']=q
            elif q==self.maxrows: self.progress['value']=q
            ... do some stuff (read into lists etc.)...

root=tk.Tk()
app=MAIN(root)
app.mainloop() 
```

好吧，结果比我预期的要长。我知道我正在阅读该文件两次。（我无法弄清楚如何以任何其他方式获取 csv 文件的长度，如果您对此有解决方案，我会全力以赴。）但我的问题的主要重点仍然是如何获得进度条工作。在其当前配置中，一旦文件完成读取，它就会立即从零变为满。建议？

**编辑：**在 mgilson 的帮助下，我的代码变得更好了。但是我的状态栏在文件时仍然没有更新。我尝试了以下方法：

```
self.completed = tk.IntVar()
self.completed.set(0)
self.progress = ttk.Progressbar(self.frame, orient='horizontal', length=200,
                   mode='determinate', maximum=100, variable=self.completed)
#in the function now
fsize = os.path.getsize(self.filename)
for r,row in enumerate(read):
    q=float(f.tell())/float(fsize)*100 
    if r%100 ==0:
        self.completed.set(q) 
```

另外，我不只是调用，`self.completed`而是将 a`def`作为`q`输入，然后将其放入`self.completed`. 另外，`self.completed`我没有使用`variable`kwarg in `self.progress`，而是直接和通过`def`. 也尝试`self.progress.configure(value = q)`过，它的行为与其他人一样。

所有这些尝试仅在文件完成后刷新栏。

`for`如果我在读取数据的循环之前修改栏的状态，但在读取`def`文件完成之前，栏不会更新。（我尝试将其设置为 50 作为实验，文件完成后它从无变为 100%。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:20:21.487

你想要类似的东西：

```
if q%100==0: 
    self.progress['value']=float(q)/100
    self.progress.update_idletasks() 
```

也许：

```
self.progress.configure(value=q)
self.progress.update_idletasks() 
```

在之前的版本中，只要你读到 100 行，进度条就会被填满。

另请注意，只有在程序控制返回主循环后，进度条才会更新，除非您明确告知它（使用`update_idletasks()`）。

只要不两次读取文件，您**就**可以使用`file.tell`它（不保证 - 如果它不起作用，请告诉我，我将删除此建议）：

```
fsize=os.path.getsize(filename)
...
q=f.tell()/fsize 
```

如果这可行，您可以将构造函数更改为：

```
self.progress = ttk.Progressbar(frame, orient='horizontal',
                                length =200, mode='determinate',maximum=1.) 
```

和你的循环：

```
for i,row in enumerate(read):
    q=f.tell()/fsize
    if i%100==0: 
        self.progress['value']=q
        self.progress.update_idletasks()
    #do stuff
else:
    self.progress['value']=q
    self.progress.update_idletasks() 
```

另一个侧面说明，有一个简单的`try/except`条款通常不是一个好主意。你通常想要：

```
try:
   #something
except SomeError: #IOError?  OSError? some combination of the two of them?
   #something else. 
```

仅捕获您知道如何处理的异常。

# ios - 两个 UILabel 在视网膜和非视网膜 iPhone 显示器中呈现不同

> ID：11296326
> 
> 赞同：2
> 
> 时间：2012-07-02T15:07:47.083
> 
> 标签：ios, uilabel, retina-display

我在具有两个 UILabel 的 NIB 中设计了一个界面。标签非常接近，以用不同的颜色突出显示一个特定的单词。

问题是在非视网膜显示器上，两个标签按需要呈现。见图1：

![在此处输入图像描述](../Images/632ff74ceb2488685d46c67c177fdb04.png)

然而，在视网膜显示器上，白色文本的标签与一些蓝色文本重叠。见图2：

![在此处输入图像描述](../Images/5525cc87007481955e95800335fad557.png)

请注意，白色文本标签的框架似乎没有移动，而问题似乎是蓝色文本标签上的自动换行。

有没有人见过这个并想出一种快速/无痛的治疗方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:09:59.800

根据要求发布作为答案：

这看起来像是标签尺寸较大的可能错误或边缘情况。如果将其扩大一个点，它可能会在两个设备上正确包裹。可能值得将此作为错误报告，因为对象在视网膜和非视网膜设备上的行为应该相同。

无论如何，这在 iOS 6 中对您来说不是问题 :)

# django - 将 sqlite 数据库转换为 postgres 产生 DatabaseError: value too long for type character varying(50)

> ID：11296328
> 
> 赞同：0
> 
> 时间：2012-07-02T15:07:50.943
> 
> 标签：django, sqlite, postgresql, heroku

我正在使用`db:push`将我的数据库从 sqlite 转换为 postgres 将我的 Django 应用程序的数据库上传到 Heroku。

但是，在此过程中我收到错误：

`Taps Server Error: PGError: ERROR: integer out of range`

当我尝试使用在 Heroku 的服务器上创建一个干净的数据库时`python manage.py syncdb`，我收到了类似的消息：

```
Installing index for django_openid.UserOpenidAssociation model
Installing json fixture 'initial_data' from '/app/.heroku/venv/lib/python2.7/site-    packages/oembed/fixtures'.
Installing json fixture 'initial_data' from '/app/.heroku/venv/lib/python2.7/site-   packages/pinax/apps/photos/fixtures'.
Installing json fixture 'initial_data' from '/app/store/fixtures'.
Problem installing fixture '/app/store/fixtures/initial_data.json': Traceback (most recent call last):
File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/commands/loaddata.py", line 169, in handle
obj.save(using=using)
File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/serializers/base.py", line 165, in save
models.Model.save_base(self.object, using=using, raw=True)
File "/app/.heroku/venv/lib/python2.7/site-packages/django/db/models/base.py", line 501, in save_base
rows = manager.using(using).filter(pk=pk_val)._update(values)
File "/app/.heroku/venv/lib/python2.7/site-packages/django/db/models/query.py", line 491, in _update
return query.get_compiler(self.db).execute_sql(None)
File "/app/.heroku/venv/lib/python2.7/site-packages/django/db/models/sql/compiler.py", line 861, in execute_sql
cursor = super(SQLUpdateCompiler, self).execute_sql(result_type)
File "/app/.heroku/venv/lib/python2.7/site-packages/django/db/models/sql/compiler.py", line 727, in execute_sql
cursor.execute(sql, params)
File "/app/.heroku/venv/lib/python2.7/site-packages/django/db/backends/util.py", line 15, in execute
return self.cursor.execute(sql, params)
File "/app/.heroku/venv/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py", line 44, in execute
return self.cursor.execute(query, args)
DatabaseError: value too long for type character varying(50) 
```

在我看来，问题在于初始数据，但并不完全确定。我在这里发现了一篇文章，说这可能是字段编码的问题，但即使我要调查，也不完全确定如何阅读错误消息以找出导致问题的确切原因并查明哪个表/column 可能会导致问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:27:50.340

`DatabaseError: value too long for type character varying(50)`表示您正在尝试将超过 50 个字符的字符串存储到 VARCHAR(50) 类型中。您可以通过查看模型中的`CharField`s`max_length=50`或`SlugField`s（默认为`max_length=50`）来筛选潜在候选人。然后，查看您的`initial_data.json`固定装置，看看您是否注意到为这些字段中的任何一个存储了明显很长的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-20T08:26:06.003

正如@ChrisPratt 所说，我遇到了同样的问题，但无法找出问题所在。我的项目中只有一个应用程序，我删除了应用程序迁移文件夹中的 *py 文件（除了**init** .py 文件）并清除了我的 sqlite3 db 中的所有表（当时我没有任何重要数据）然后运行迁移命令。有效！。

# spring - 如何在 Grails 电子邮件服务中自定义“发件人地址”

> ID：11296333
> 
> 赞同：3
> 
> 时间：2012-07-02T15:08:02.387
> 
> 标签：spring, grails, groovy, sendmail

我对电子邮件服务“发件人”地址有疑问。我想显示一个名字说 XYZ 而不是 XYZ@abc.com。我试图让它有一个字符串“XYZ”，但我收到了一个邮件发送异常。

```
mailService.sendMail{
                from "XYZ"
                to "abc@123.com"
                subject "HI"
                body "How ru?"
            } 
```

例外是：

```
org.springframework.mail.MailSendException:
  Failed messages: com.sun.mail.smtp.SMTPSendFailedException: 
    553 5.5.4 <XYZ>... Domain name required for sender address XYZ. 
```

有没有办法在邮件的发件人栏中使用别名而不是发件人地址？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T15:14:58.687

完全猜测，但如果你这样做，它是否有效：

```
mailService.sendMail{
  from "XYZ <XYZ@abc.com>"
  to "abc@123.com"
  subject "HI"
  body "How ru?"
} 
```

# java - 通过另一个数组对数组进行二进制搜索的最佳方法是什么？

> ID：11296335
> 
> 赞同：3
> 
> 时间：2012-07-02T15:08:05.187
> 
> 标签：java, arrays, string, algorithm, binary-search

在您可以*通过间接*访问实际访问的数组中进行二进制搜索的最佳方法是什么？
这意味着我有一个`Integer[]`存储 a 的索引，该索引`String[]`表示`String[]`
Eg的排序版本，`Integer[] idxes= {5, 4, 0, 3 , 1, 2}`这意味着`String[5]`or`String[idxes[0]]`是字典顺序上最低的字符串。
我希望描述清楚。如果它是 的一部分，那么
通过`idexes`for a进行二进制搜索的最佳方法是什么？`String``String[] words`

我所做的是以下内容：

```
int pos = Arrays.binarySearch(idexes, -1, new Comparator<Integer>(){

    @Override
    public int compare(Integer o1, Integer o2) {

    if(o1 == -1){
        return k.compareTo(words[o2]);
    }
    else{
        return words[o1].compareTo(k);
      }         
    }
}); 
```

`k`搜索词在哪里，`words[]`是`String[]`我前面提到的。
这行得通，但我不喜欢我在api`-1`中传递的内容。 有没有更好的方法来解决这个问题？ `binarySearch`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:19:14.397

```
class SortedListView extends AbstractList<String> implements RandomAccess {
  // stringArray, idxes should be fields, initialized in a constructor
  public int size() {
    return stringArray.length;
  }
  public String get(int index) {
    return stringArray[idxes[index]];
  }
}; 
```

然后你可以使用`Collections.binarySearch`它`List`。

# teamcity - 显示自上次构建以来所有已解决的问题

> ID：11296341
> 
> 赞同：2
> 
> 时间：2012-07-02T15:08:34.033
> 
> 标签：teamcity, teamcity-7.0

我有两个构建配置——一个开发配置（在每次签入时构建）和一个 QA 配置（在发布 qa 版本时按需构建。我们不进行持续部署（目前））。

当 QA 版本发布时，我希望能够知道自上一个版本以来解决了哪些问题。（格式不重要-报告/图表/文本...），
含义-我想知道自此配置中的最后一次构建日期以来已更改为“已解决”的所有问题。

我正在使用[tfs teamcity 问题跟踪器](http://tfsteamcity.codeplex.com/)。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T02:54:50.183

您可能已经知道 TC 具有“Fixed in Build”值？我发现它使用起来很棘手，因为如果我们经常单击“构建”一次，已解决问题的列表就会变得一团糟。

因此，我也有兴趣扩展我刚刚发布的功能； [http://devnet.jetbrains.net/thread/438721](http://devnet.jetbrains.net/thread/438721) API 访问“Fixed in Build”值？

# sql - 如何使用 Ssmse 错误 208 连接到 SqlAzure

> ID：11296342
> 
> 赞同：-1
> 
> 时间：2012-07-02T15:08:38.270
> 
> 标签：sql, sql-server

我在 SqlAzure 上有一个数据库，我也可以在我的项目中使用它。但我想控制 ssmse 中的数据库。我有这个 208 错误。我有连接字符串和用户名以及登录密码，但它们不起作用。

[http://c1207.hizliresim.com/z/2/9554j.jpg](http://c1207.hizliresim.com/z/2/9554j.jpg) -- 错误！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:13:15.943

我怀疑您使用的是 2008 或 2008 R2 的 Management Studio Express。

您可能希望尝试更新的版本（例如[SQL Server 2012](http://www.microsoft.com/en-us/download/details.aspx?id=29062)）。您想要的文件是 SQLManagementStudio_x64_ENU.exe（假设为 64 位，否则将 x64 替换为 x86）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:15:03.890

使用`SSMS 2008 R2 SP1`，我也遇到了同样的问题，使用sp1后解决了

# python - 在 MAMP 上使用 Python

> ID：11296347
> 
> 赞同：5
> 
> 时间：2012-07-02T15:09:07.787
> 
> 标签：python, mamp, wsgi

我正在慢慢地从 PHP 迁移到 Python。特别是，当我在 webdev/webdesign 工作时，我想使用 Python 显示一个基本的 HTML 页面，使用以下代码：

```
#!/usr/bin/python

print('<html><head></head><body>This is a test</body></html>') 
```

在我的主机上在线发送文件`index.cgi`，我在显示文件内容时没有问题。

当我尝试在[MAMP](https://en.wikipedia.org/wiki/MAMP)上安装 WSGI 模块时，问题就开始了，或者只是为了让 Python 与它一起工作。

当它转到`localhost/index.cgi`文件的内容时，会显示而不是其结果。

我已经遵循了六个教程，但似乎没有一个有效，我总是在某个时候遇到问题。这似乎是因为 MAMP 附带的 Apache 不是以允许您向其中添加模块的方式构建的（例如 wsgi）。

这也是因为我找不到任何关于如何在 MAMP 上安装 Python 的**最新**文章，它们都可以追溯到 2008 年或 2009 年，带有旧版本的 MAMP、Python 和 Macports。

有人可以指出我目前的程序来完成这项工作吗？

**编辑：**好的，找到[这篇文章](http://calhouncreations.com/blog/2010/09/17/how-to-use-cgi-in-mamp/)后，我收集了 MAMP 默认情况下不处理 MAMP/ 中的 cgi-bin/ 文件夹之外的 CGI 脚本。所以我按照解释修改了 Apache conf 文件，它现在显然读取了 .cgi 文件，但抛出了错误 500，内容如上所示。代码是罪魁祸首还是 MAMP 的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:04:32.067

让它工作，问题是在 cgi-bin/ 文件夹之外缺少 MAMP 的 CGI 解释（参见原始帖子）和缺少的标题：

`print 'Content-type: text/html\n\n'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T15:20:43.787

这只是标准的 CGI，这里没什么特别的，不需要 WSGI。您确实需要安装 Python。只要你的脚本能找到它，你就可以将它安装在任何你喜欢的地方。你看到这条线：

```
#! /usr/bin/python 
```

那是脚本将尝试查找 Python 的地方，因此请将其更改为您的 Python 安装，或者将您的 Python 安装修复到那里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-23T00:45:55.070

我刚刚使用 Mamp V5.5 在 OSX Catalina 上完成了这个过程

对我来说，我必须遵循以下步骤：

1.  确保您的文件有第一行：

```
#!/usr/bin/python 
```

或任何有效 Python 安装或环境的路径。确保你的 python 工作正常。

2.  该文件必须具有扩展名 cgi 例如

```
blah.cgi  (not .py) 
```

然后它将在任何文件夹中工作。

3.  该文件必须具有执行权限。在终端：

```
chmod 755 blah.cgi 
```

4.  该文件必须在开头附近发送一个内容类型（Python 版本 < 3 没有括号）：

```
print('Content-type: text/html \n\n') 
```

5.  我建议的另一个步骤是在页面的开头添加这个：

```
import sys
sys.stderr = open("err.log",'w') 
```

这会将所有错误消息路由到同一目录中的文件 err.log，这对于调试非常有用。如果您的页面返回 500 Internal Server Error，您应该会在 err.log 文件中看到一些错误（除非问题出在此语句之前的初始导入中）。

您可以进行其他配置更改以保留 .py 扩展名，但我不会在这里讨论。

# c# - GeoCoordinate System.FormatException

> ID：11296360
> 
> 赞同：1
> 
> 时间：2012-07-02T15:09:48.483
> 
> 标签：c#, windows-phone-7, exception-handling, coordinates, tombstone

我有一个视图模型，其中包含一个标记为 [DataMember] 的 System.Device.Location.GeoCoordinate 属性，如下所示：

```
[DataMember]
public GeoCoordinate Location
{
    get
    {
        return _location;
    }
    set
    {
        if (_location != value)
        {
            _location = value;
            NotifyPropertyChanged("Location");
        }
    }
} 
```

我有一个这个视图模型的集合，对于我得到的集合的每个项目：

> mscorlib.dll 中出现了“System.FormatException”类型的第一次机会异常

有趣的是，这只发生在我向后导航时，但在 OnNavigatedTo 事件触发之前的某个地方。

这是一个已知的问题？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:16:44.743

你确定`GeoCoordinate`是可序列化的`DataContractSerializer`？

尝试构建一个自定义`GeoCoordinate`类型：编写一个具有两个双纬度/经度属性的简单类，一个`BuildFromGeoCoordinate()`和一个`ToGeoCoordinate()`从/到转换的方法`GeoCoordinate`，并检查错误是否仍然发生。

# sql - 如何在 Oracle 上使用 AUTO_INCREMENT 创建 id？

> ID：11296361
> 
> 赞同：476
> 
> 时间：2012-07-02T15:09:48.663
> 
> 标签：sql, oracle, auto-increment

在 Oracle 中似乎没有 AUTO_INCREMENT 的概念，直到并包括版本 11g。

如何在 Oracle 11g 中创建一个行为类似于自动增量的列？

* * *

## 回答 #1

> 赞同：692
> 
> 时间：2012-07-02T15:16:05.433

*从 Oracle 11g 开始，* Oracle 中没有“auto_increment”或“identity”列这样的东西。但是，您可以使用序列和触发器轻松建模：

表定义：

```
CREATE TABLE departments (
  ID           NUMBER(10)    NOT NULL,
  DESCRIPTION  VARCHAR2(50)  NOT NULL);

ALTER TABLE departments ADD (
  CONSTRAINT dept_pk PRIMARY KEY (ID));

CREATE SEQUENCE dept_seq START WITH 1; 
```

触发器定义：

```
CREATE OR REPLACE TRIGGER dept_bir 
BEFORE INSERT ON departments 
FOR EACH ROW

BEGIN
  SELECT dept_seq.NEXTVAL
  INTO   :new.id
  FROM   dual;
END;
/ 
```

### 更新：

[`IDENTITY`](http://docs.oracle.com/database/121/DRDAA/migr_tools_feat.htm#DRDAA109)列现在在 Oracle 12c 上可用：

```
create table t1 (
    c1 NUMBER GENERATED by default on null as IDENTITY,
    c2 VARCHAR2(10)
    ); 
```

或指定起始值和增量值，同时防止任何插入标识列 ( `GENERATED ALWAYS`)（同样，仅限 Oracle 12c+）

```
create table t1 (
    c1 NUMBER GENERATED ALWAYS as IDENTITY(START with 1 INCREMENT by 1),
    c2 VARCHAR2(10)
    ); 
```

或者，Oracle 12 还允许使用序列作为默认值：

```
CREATE SEQUENCE dept_seq START WITH 1;

CREATE TABLE departments (
  ID           NUMBER(10)    DEFAULT dept_seq.nextval NOT NULL,
  DESCRIPTION  VARCHAR2(50)  NOT NULL);

ALTER TABLE departments ADD (
  CONSTRAINT dept_pk PRIMARY KEY (ID)); 
```

* * *

## 回答 #2

> 赞同：99
> 
> 时间：2012-07-02T15:16:08.433

`SYS_GUID`返回一个 GUID——一个全局唯一的 ID。A[`SYS_GUID`](http://docs.oracle.com/cd/B12037_01/server.101/b10759/functions153.htm)是一个`RAW(16)`。它不会生成递增的数值。

如果要创建递增数字键，则需要创建一个序列。

```
CREATE SEQUENCE name_of_sequence
  START WITH 1
  INCREMENT BY 1
  CACHE 100; 
```

`INSERT`然后，您可以在语句中使用该序列

```
INSERT INTO name_of_table( primary_key_column, <<other columns>> )
  VALUES( name_of_sequence.nextval, <<other values>> ); 
```

或者您可以定义一个触发器，使用序列自动填充主键值

```
CREATE OR REPLACE TRIGGER trigger_name
  BEFORE INSERT ON table_name
  FOR EACH ROW
BEGIN
  SELECT name_of_sequence.nextval
    INTO :new.primary_key_column
    FROM dual;
END; 
```

如果您使用的是 Oracle 11.1 或更高版本，您可以稍微简化一下触发器

```
CREATE OR REPLACE TRIGGER trigger_name
  BEFORE INSERT ON table_name
  FOR EACH ROW
BEGIN
  :new.primary_key_column := name_of_sequence.nextval;
END; 
```

如果你真的想使用`SYS_GUID`

```
CREATE TABLE table_name (
  primary_key_column raw(16) default sys_guid() primary key,
  <<other columns>>
) 
```

* * *

## 回答 #3

> 赞同：58
> 
> 时间：2014-06-14T18:10:38.520

在 Oracle 12c 以后，您可以执行以下操作，

```
CREATE TABLE MAPS
(
  MAP_ID INTEGER GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1) NOT NULL,
  MAP_NAME VARCHAR(24) NOT NULL,
  UNIQUE (MAP_ID, MAP_NAME)
); 
```

* * *

在甲骨文（Pre 12c）中。

```
-- create table
CREATE TABLE MAPS
(
  MAP_ID INTEGER NOT NULL ,
  MAP_NAME VARCHAR(24) NOT NULL,
  UNIQUE (MAP_ID, MAP_NAME)
);

-- create sequence
CREATE SEQUENCE MAPS_SEQ;

-- create tigger using the sequence
CREATE OR REPLACE TRIGGER MAPS_TRG 
BEFORE INSERT ON MAPS 
FOR EACH ROW
WHEN (new.MAP_ID IS NULL)
BEGIN
  SELECT MAPS_SEQ.NEXTVAL
  INTO   :new.MAP_ID
  FROM   dual;
END;
/ 
```

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2010-01-12T23:44:52.850

以下是三种口味：

1.  **数字**。简单递增的数值，例如 1,2,3,....
2.  **图形用户界面**。全局通用标识符，作为`RAW`数据类型。
3.  **GUID（字符串）**。与上面相同，但作为在某些语言中可能更容易处理的字符串。

`x`是标识列。`FOO`在每个示例中替换为您的表名。

```
-- numerical identity, e.g. 1,2,3...
create table FOO (
    x number primary key
);
create sequence  FOO_seq;

create or replace trigger FOO_trg
before insert on FOO
for each row
begin
  select FOO_seq.nextval into :new.x from dual;
end;
/

-- GUID identity, e.g. 7CFF0C304187716EE040488AA1F9749A
-- use the commented out lines if you prefer RAW over VARCHAR2.
create table FOO (
    x varchar(32) primary key        -- string version
    -- x raw(32) primary key         -- raw version
);

create or replace trigger FOO_trg
before insert on FOO
for each row
begin
  select cast(sys_guid() as varchar2(32)) into :new.x from dual;  -- string version
  -- select sys_guid() into :new.x from dual;                     -- raw version
end;
/ 
```

更新：

Oracle 12c 引入了这两种不依赖触发器的变体：

```
create table mytable(id number default mysequence.nextval);
create table mytable(id number generated as identity); 
```

第一个以传统方式使用序列；第二个在内部管理价值。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2010-01-12T23:44:50.773

假设您的意思是像 SQL Server 标识列这样的列？

在 Oracle 中，您使用 SEQUENCE 来实现相同的功能。我会看看我是否能找到一个好的链接并在这里发布。

更新：看起来你自己找到了。无论如何，这是链接： [http ://www.techonthenet.com/oracle/sequences.php](http://www.techonthenet.com/oracle/sequences.php)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-10-10T14:47:03.557

Oracle Database 12c 引入了 Identity，这是一个自动增量（系统生成）的列。在以前的数据库版本（直到 11g）中，您通常通过创建序列和触发器来实现身份。从 12c 开始，您可以创建自己的表并将必须生成的列定义为身份。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-01-18T06:08:37.970

`Trigger`并且`Sequence`可以在您想要任何人都可以轻松阅读/记住/理解的序列号时使用。但是如果你不想通过这种方式管理 ID 列（如 emp_id），并且该列的值不是很大，你可以`SYS_GUID()`在创建表时使用这样的自动增量。

```
CREATE TABLE <table_name> 
(emp_id RAW(16) DEFAULT SYS_GUID() PRIMARY KEY,
name VARCHAR2(30)); 
```

现在您的`emp_id`列将接受“全局唯一标识符值”。您可以通过忽略这样的 emp_id 列在表中插入值。

```
INSERT INTO <table_name> (name) VALUES ('name value'); 
```

因此，它将向您的`emp_id`列插入唯一值。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2017-03-10T12:44:26.760

它被调用`Identity Columns`并且它**仅在 oracle Oracle 12c中可用**

```
CREATE TABLE identity_test_tab
(
   id            NUMBER GENERATED ALWAYS AS IDENTITY,
   description   VARCHAR2 (30)
); 
```

插入示例`Identity Columns`如下

```
INSERT INTO identity_test_tab (description) VALUES ('Just DESCRIPTION'); 
```

> 创建了 1 行。

你不能像下面这样插入

```
INSERT INTO identity_test_tab (id, description) VALUES (NULL, 'ID=NULL and DESCRIPTION'); 
```

> 第 1 行出现错误：ORA-32795：无法插入生成的始终标识列

```
INSERT INTO identity_test_tab (id, description) VALUES (999, 'ID=999 and DESCRIPTION'); 
```

> 第 1 行出现错误：ORA-32795：无法插入生成的始终标识列

[有用的链接](https://oracle-base.com/articles/12c/identity-columns-in-oracle-12cr1)

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2016-02-24T15:53:29.067

从 Oracle 12c 开始，可以通过以下两种方式之一支持 Identity 列：

1.  *序列 + 表*- 在此解决方案中，您仍然像往常一样创建序列，然后使用以下 DDL：

    CREATE TABLE MyTable (ID NUMBER **DEFAULT MyTable_Seq.NEXTVAL** , ...)

2.  *仅限表格*- 在此解决方案中，没有明确指定任何顺序。您将使用以下 DDL：

    CREATE TABLE MyTable (ID NUMBER **GENERATED AS IDENTITY** , ...)

如果你使用第一种方式，它向后兼容现有的做事方式。第二个更简单一些，并且更符合其他 RDMS 系统。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-02-17T11:12:47.247

这是针对自动增量的异常/错误处理的完整解决方案，此解决方案向后兼容，适用于 11g 和 12c，特别是在应用程序处于生产状态时。

请将“TABLE_NAME”替换为您适当的表名

```
--checking if table already exisits
BEGIN
    EXECUTE IMMEDIATE 'DROP TABLE TABLE_NAME';
    EXCEPTION WHEN OTHERS THEN NULL;
END;
/

--creating table
CREATE TABLE TABLE_NAME (
       ID NUMBER(10) PRIMARY KEY NOT NULL,
       .
       .
       .
);

--checking if sequence already exists
BEGIN
    EXECUTE IMMEDIATE 'DROP SEQUENCE TABLE_NAME_SEQ';
    EXCEPTION WHEN OTHERS THEN NULL;
END;

--creating sequence
/
CREATE SEQUENCE TABLE_NAME_SEQ START WITH 1 INCREMENT BY 1 MINVALUE 1 NOMAXVALUE NOCYCLE CACHE 2;

--granting rights as per required user group
/
GRANT SELECT, INSERT, UPDATE, DELETE ON TABLE_NAME TO USER_GROUP;

-- creating trigger
/
CREATE OR REPLACE TRIGGER TABLE_NAME_TS BEFORE INSERT OR UPDATE ON TABLE_NAME FOR EACH ROW
BEGIN    
    -- auto increment column
    SELECT TABLE_NAME_SEQ.NextVal INTO :New.ID FROM dual;

    -- You can also put some other required default data as per need of your columns, for example
    SELECT SYS_CONTEXT('USERENV', 'SESSIONID') INTO :New.SessionID FROM dual;
    SELECT SYS_CONTEXT('USERENV','SERVER_HOST') INTO :New.HostName FROM dual;
    SELECT SYS_CONTEXT('USERENV','OS_USER') INTO :New.LoginID FROM dual;    
    .
    .
    .
END;
/ 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-08-02T11:22:07.583

```
FUNCTION GETUNIQUEID_2 RETURN VARCHAR2
AS
v_curr_id NUMBER;
v_inc NUMBER;
v_next_val NUMBER;
pragma autonomous_transaction;
begin 
CREATE SEQUENCE sequnce
START WITH YYMMDD0000000001
INCREMENT BY 1
NOCACHE
select sequence.nextval into v_curr_id from dual;
if(substr(v_curr_id,0,6)= to_char(sysdate,'yymmdd')) then
v_next_val := to_number(to_char(SYSDATE+1, 'yymmdd') || '0000000000');
v_inc := v_next_val - v_curr_id;
execute immediate ' alter sequence sequence increment by ' || v_inc ;
select sequence.nextval into v_curr_id from dual;
execute immediate ' alter sequence sequence increment by 1';
else
dbms_output.put_line('exception : file not found');
end if;
RETURN 'ID'||v_curr_id;
END; 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-01-18T23:06:13.573

这就是我在现有表和列（名为 id）上执行此操作的方式：

```
UPDATE table SET id=ROWNUM;
DECLARE
  maxval NUMBER;
BEGIN
  SELECT MAX(id) INTO maxval FROM table;
  EXECUTE IMMEDIATE 'DROP SEQUENCE table_seq';
  EXECUTE IMMEDIATE 'CREATE SEQUENCE table_seq START WITH '|| TO_CHAR(TO_NUMBER(maxval)+1) ||' INCREMENT BY 1 NOMAXVALUE';
END;
CREATE TRIGGER table_trigger
  BEFORE INSERT ON table
  FOR EACH ROW
BEGIN
  :new.id := table_seq.NEXTVAL;
END; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-10-12T11:02:17.623

查询以在 oracle 中创建自动增量。在下面的查询中，每当插入新行时，列值将自动递增

```
CREATE TABLE table1(
id RAW(16) NOT NULL ENABLE,
incrmnt NUMBER(10,0) GENERATED ALWAYS AS IDENTITY
MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 1 NOORDER NOCYCLE NOT NULL ENABLE,
CONSTRAINT PK_table1 PRIMARY KEY (id) ENABLE); 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2017-08-02T11:25:31.100

```
FUNCTION UNIQUE2(
 seq IN NUMBER
) RETURN VARCHAR2
AS
 i NUMBER := seq;
 s VARCHAR2(9);
 r NUMBER(2,0);
BEGIN
  WHILE i > 0 LOOP
    r := MOD( i, 36 );
    i := ( i - r ) / 36;
    IF ( r < 10 ) THEN
      s := TO_CHAR(r) || s;
    ELSE
      s := CHR( 55 + r ) || s;
    END IF;
  END LOOP;
  RETURN 'ID'||LPAD( s, 14, '0' );
END; 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2015-09-21T06:46:21.753

```
 create trigger t1_trigger
  before insert on AUDITLOGS
  for each row
   begin
     select t1_seq.nextval into :new.id from dual;
   end; 
```

只有我必须用你的表名和 new.id 用 new.column_name 改变表名（AUDITLOGS）

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2013-08-27T21:41:45.260

oracle 在 12c 中有序列和身份列

[http://www.oracle-base.com/articles/12c/identity-columns-in-oracle-12cr1.php#identity-columns](http://www.oracle-base.com/articles/12c/identity-columns-in-oracle-12cr1.php#identity-columns)

我发现了这个但不确定 rdb 7 是什么 [http://www.oracle.com/technetwork/products/rdb/0307-identity-columns-128126.pdf](http://www.oracle.com/technetwork/products/rdb/0307-identity-columns-128126.pdf)

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2015-09-02T09:24:22.690

也许试试这个简单的脚本：

[http://www.hlavaj.sk/ai.php](http://www.hlavaj.sk/ai.php)

结果是：

```
CREATE SEQUENCE TABLE_PK_SEQ; 
CREATE OR REPLACE TRIGGER TR_SEQ_TABLE BEFORE INSERT ON TABLE FOR EACH ROW 

BEGIN
SELECT TABLE_PK_SEQ.NEXTVAL
INTO :new.PK
FROM dual;
END; 
```

# c# - 是否可以在 T4 模板内的 COM 对象上使用后期绑定？

> ID：11296362
> 
> 赞同：1
> 
> 时间：2012-07-02T15:09:49.570
> 
> 标签：c#, .net, c#-4.0, t4

我的 T4 模板实例化了一个 Excel COM 对象以读取一些单元格值并从中创建 C# 类。我首先用常规 C# 编写了 Excel 读取逻辑，效果很好。我在此测试中使用的代码片段是：

```
Worksheet xlWorkSheet;
string cellContents = xlWorkSheet.Cells.Item[1, 1].Value; 
```

但是，将测试代码移植到 T4 模板中是行不通的。显示以下错误：

> `Error 1: Compiling transformation: 'object' does not contain a definition for 'Value' and no extension method 'Value' accepting a first argument of type 'object' could be found (are you missing a using directive or an assembly reference?)`

我解决这个问题的唯一方法是添加一些手动转换：

```
string cellContents = (xlWorkSheet.Cells.Item[1, 1] as Range).Value as string; 
```

我的印象是 T4 使用“常规”C# 编译器，因此能够像常规代码一样处理动态绑定。但显然，存在差异。在这种情况下，我可以解决我的问题，因为我能够猜测要转换为哪种类型。但总的来说，情况并非如此。有没有办法让这种后期绑定在 T4 模板中工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T03:25:19.833

T4 和 C# 都可以使用 'dynamic' 关键字处理动态绑定。没有这个关键字，两者都无法推断出来。

但是，在常规 IDE 中，可以在程序集引用上设置标志“嵌入互操作类型”。此功能将引用的互操作类型直接复制到使用程序集中，并且动态将“对象”引用转换为“动态” '。

因此，问题中的示例代码在 IDE 中以普通 C# 编译，因为“项目”集合被转换为返回“动态”。

T4 的“程序集”指令没有等效标志，因此您必须手动将表达式声明为动态的。为此，您还必须`assembly`在模板中包含以下指令：

```
<#@ assembly name="System.Core" #>
<#@ assembly name="Microsoft.CSharp" #> 
```

# jquery - FancyBox v2 - 登录框

> ID：11296373
> 
> 赞同：1
> 
> 时间：2012-07-02T15:10:32.727
> 
> 标签：jquery, fancybox

我已经阅读并浏览了以下所有示例：- [http://fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)

没有什么可以帮助我制作弹出式登录框。

我检查了旧版本的 Fancybox 1.3.x，其中有一个登录框示例，但该方法在新的 Fancybox v2 上并不适用。

如果有人可以帮助我，我会很高兴。

到目前为止，我有这个代码，它是半工作的：

```
$("#top-login-button").click(function() {
        $.fancybox.open({
            href : "#login_form",
            padding : 0,
            onClosed : function() {
                    $("#login_error").hide();
            }
        });
    });

    $("#login_form_ajax").bind("submit", function() {

        if ($("#login_name").val().length < 1 || $("#login_pass").val().length < 1) {
            $("#login_error").show();
            return false;
        }

        $.fancybox.showActivity();

        $.ajax({
            type        : "POST",
            cache   : false,
            url     : "/login.php",
            data        : $(this).serializeArray(),
            success: function(data) {
                $.fancybox(data);
            }
        });

        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T18:56:28.377

对于 v2.x，这将起作用（请注意，我注释掉了哪些选项已更改）

```
$(document).ready(function() {
 $("#top-login-button").click(function() {
  $.fancybox({
   href : "#login_form",
   padding : 0,
   // it was onClosed for v1.3.4
   afterClose : function(){
    $("#login_error").hide();
   }
  }); // fancybox
 }); //click

 $("#login_form_ajax").bind("submit", function() {
  if ($("#login_name").val().length < 1 || $("#login_pass").val().length < 1) {
   $("#login_error").show();
   $.fancybox.update(); // it was $.fancybox.resize(); for v1.3.4
   return false;
  }
  $.fancybox.showLoading(); // it was $.fancybox.showActivity(); for v1.3.4
  $.ajax({
   type   : "POST",
   cache  : false,
   url    : "/login.php",
   data   : $(this).serializeArray(),
   success: function(data) {
    $.fancybox(data);
   }
  });
  return false;
 }); // bind
}); // ready 
```

**更新**（2012 年 8 月 10 日）：为怀疑者添加了一个[演示](http://www.picssel.com/playground/jquery/loginFormV2_02jul12.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-17T10:58:30.863

在您的代码中，您需要更改`href : "#login_form"`为`href : "#login_form_ajax"`.

# sql - 无法将 INSERT INTO SELECT 插入具有标识列的表中

> ID：11296383
> 
> 赞同：-1
> 
> 时间：2012-07-02T15:10:49.887
> 
> 标签：sql, sql-server, tsql, error-handling, identity-column

在 SQL Server 中，我使用了一个表变量，完成操作后，我想将它的值插入到一个真实的表中，该表有一个标识列，该列也是 PK。

我正在制作的表变量有两列；物理表有四个，第一个是标识列，一个整数IK。我要插入的列的数据类型与目标列的数据类型相同。

```
 INSERT INTO [dbo].[Message] ([Name], [Type])
 SELECT DISTINCT [Code],[MessageType] 
 FROM @TempTableVariable 
```

这失败了：

> 无法在具有唯一索引“IX_Message_Id”的对象“dbo.Message”中插入重复的键行。重复键值为 (ApplicationSelection)。

但是当尝试仅插入 Values (...) 时，它可以正常工作。

我怎样才能正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:16:16.900

似乎数据“ApplicationSelection”已经在数据库中。您需要编写选择以排除数据库中已有的记录。您可以使用 where not exists 子句或左连接来做到这一点。查找索引以查看除了身份之外哪些字段是唯一的。这将告诉您需要检查哪些字段以查看当前是否存在记录。

# java - 对选定内容的建议框操作

> ID：11296386
> 
> 赞同：0
> 
> 时间：2012-07-02T15:10:56.167
> 
> 标签：java, autocomplete, richfaces, seam, autosuggest

我以下列方式使用richfaces:suggestionBox：

```
<h:inputText
    value="#{myBean.data}">
    <rich:suggestionbox width="100" ajaxSingle="true"
        selfRendered="true" var="result"
        suggestionAction="#{autoBean.autocomplete}"
        >
        <h:column>
            <h:outputText value="#{result.getValue('txtsugg')}" />
        </h:column>
    </rich:suggestionbox> 
```

一切顺利，但现在我需要拦截用户选择，因为当用户选择特定值时，我需要在服务器上执行操作并刷新页面后。

例如：
1) 用户写 'ala'
建议框建议他 'ala1' 'ala2' 'ala3' ...
2) 用户选择 'ala2' （按回车键，单击它或更改焦点）
必须调用服务器操作并刷新一个页面。

希望我能解释我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:26:37.517

试试这是否有效。

```
<h:inputText
    value="#{myBean.data}"/>
   <a:support event="onblur" reRender="xxx"/>
</h:inputText>
<rich:suggestionbox width="100" ajaxSingle="true" selfRendered="true" var="result" suggestionAction="#{autoBean.autocomplete}">
        <h:column>
            <h:outputText value="#{result.getValue('txtsugg')}" />
        </h:column>
        <a:support event="onselect" reRender="xxxx">
           <f:setPropertyActionListener value="#{result.getValue('txtsugg')}"
                                    target="#{myBean.data}" />
        </a:support>
</rich:suggestionbox> 
```

# javascript - 如何调整 div 元素的大小小于其内容？

> ID：11296388
> 
> 赞同：0
> 
> 时间：2012-07-02T15:11:03.323
> 
> 标签：javascript, jquery, html

我有一个表格，并且单元格中有一个 TreeView。这是我的代码：

```
 <style>
        #leftPanel
        {
            width:60px;
            height:'100%';
            border:1px solid red;
            background:yellow;
        }  
    <style>

        <table>
         <tr>
          <td> 
           <div id="leftPanel">
             <asp:PlaceHolder runat="server" ID="TreeView" />
             <%-- Here is a TreeView --%>
           </div>
          </td>
         </tr>
          <%-- other code --%>
        <table>

 $(function () {
         $('#leftPanel').resizable(
         {
             handles: 'e, w'
         });
     }); 
```

我不能将 div 的大小减小到小于 TreeView 的大小。我需要编写什么代码来允许 leftPanel 小于 TreeView 的大小？如果 TreeView 节点的文本太长，则必须这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:13:05.490

您可以[`overflow`](http://www.w3schools.com/cssref/pr_pos_overflow.asp)在 CSS 中设置 div 的属性。

将其设置为`overflow: auto;`

[**演示**](http://jsfiddle.net/yApg9/)

# c++ - Sun Studio 12 中的模板编译错误

> ID：11296389
> 
> 赞同：6
> 
> 时间：2012-07-02T15:11:04.920
> 
> 标签：c++, templates, overload-resolution, partial-specialization, sunstudio

我们正在迁移到 Sun Studio 12.1 和新的编译器 [CC: Sun C++ 5.10 SunOS_sparc 2009/06/03]。我在编译使用早期版本的 Sun 编译器 [CC: Sun WorkShop 6 update 2 C++ 5.3 2001/05/15] 编译良好的代码时遇到编译错误。

这是我得到的编译错误。

> “Sample.cc”：错误：找不到 main() 中所需的 LoopThrough(int[2]) 的匹配项。1 检测到错误。*** 错误代码 1。

**代码：**

```
#include <iostream> 

#define PRINT_TRACE(STR) \
std::cout << __FILE__ << ":" << __LINE__ << ":" << STR << "\n";

template<size_t SZ>
void LoopThrough(const int(&Item)[SZ])
{
    PRINT_TRACE("Specialized version");
    for (size_t index = 0; index < SZ; ++index)
    {
        std::cout << Item[index] << "\n";
    }
}

/*     
    template<typename Type, size_t SZ>
    void LoopThrough(const Type(&Item)[SZ])
    {
        PRINT_TRACE("Generic version");        
    }
 */  

int main()
{
    {
       int arr[] = { 1, 2 };
       LoopThrough(arr);    
    }
} 
```

如果我用通用版本取消注释代码，代码编译得很好并且通用版本被调用。[在禁用扩展的 MSVC 2010 和这里](http://ideone.com/opX6g)的 ideone 情况下，我没有看到这个问题。调用该函数的专用版本。现在的问题是，这是 Sun Compiler 中的错误吗？

如果是，我们如何提交错误报告？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T21:06:42.767

在这种情况下，编译器没有遵循标准并且有问题。让我们回顾一下相关部分。

首先从 13.3/3 我们有：

> ...
> 
> — 首先，候选函数的子集——具有适当数量的参数并满足某些其他条件的函数——被选择以形成一组可行的函数（13.3.2）。
> 
> — 然后根据将每个参数与每个可行函数的相应参数匹配所需的隐式转换序列 (13.3.3.1) 选择最佳可行函数。

因此，这两个函数具有相同数量的参数，并被视为候选函数。现在我们必须找到最好的可行函数，在

13.3.3：

> 令 ICSi(F) 表示将列表中的第 i 个参数转换为可行函数 F 的第 i 个参数的类型的隐式转换序列。13.3.3.1 定义了隐式转换序列，13.3.3.2 定义了一次隐式转换的含义序列是比另一个更好的转换序列或更差的转换序列

然后我们有

> 鉴于这些定义，如果对于所有参数 i，ICSi(F1) 不是比 ICSi(F2) 更差的转换序列，则可行函数 F1 被定义为比另一个可行函数 F2 更好的函数，然后
> 
> — 对于某些参数 j，ICSj(F1) 是比 ICSj(F2) 更好的转换序列，或者，如果不是，
> 
> — F1 是非模板函数，F2 是模板函数特化，或者，如果不是，
> 
> — F1 和 F2 是模板函数，根据 14.5.5.2 中描述的偏序规则，F1 的函数模板比​​ F2 的模板更专业，或者，如果不是，

对于第一条规则，这两个函数是相等的（添加 const），而第二条规则不适用（都是模板）。所以我们转向第三条规则。从 14.5.5.2（如果需要，我会引用）我们了解到`const int`函数的版本比`const Item`版本更专业，因此最好的匹配是`const int`重载，然后应该调用它。

您最好的临时修复可能是第二次重载：

```
template<size_t SZ>
void LoopThrough(int (&Item)[SZ])
{
    LoopThrough(static_cast<const int (&)[SZ]>(Item));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T16:48:43.860

你的编译器有问题。两种重载都推导出了它们的模板参数，重载决议应该选择最专业的一个。所以除了获得一个新的编译器，你还能做什么？

首先，认识到 - 即使使用符合标准的编译器 - 使用不同的函数模板重载通常也不是一个好主意，这很有帮助。例如，参见Herb Sutter 和 Andrei Alexandrescu的[C++ 编码标准：101 条规则、指南和最佳实践](https://rads.stackoverflow.com/amzn/click/com/0321113586)的第 66 条。

幸运的是，该项目还提出了一个可能的解决方案。您所要做的就是定义一个函数模板，并让该函数模板将工作委托给类模板函数对象。然后，您可以将此类模板部分专门化为`ints`.

```
#include <iostream> 

#define PRINT_TRACE(STR) \
std::cout << __FILE__ << ":" << __LINE__ << ":" << STR << "\n";

namespace detail {    

// primary template
template<typename Type, size_t SZ>
class LoopThroughHelper
{
public:
    void operator()(const Type(&Item)[SZ]) 
    {
        PRINT_TRACE("Generic version");        
    }
}; 

// partial specialization for int arrays
template<size_t SZ>
class LoopThroughHelper<int, SZ>
{
public:
    void operator()(const int(&Item)[SZ]) 
    {
        PRINT_TRACE("Specialized version");
        for (size_t index = 0; index < SZ; ++index)
        {
            std::cout << Item[index] << "\n";
        }
    }
}; 

} // namespace detail

// one function template to rule them all
template<typename Type, size_t SZ>
void LoopThrough(const Type(&Item)[SZ])
{
     detail::LoopThroughHelper<Type, SZ>()(Item);        
}

int main()
{
    {
       int arr[] = { 1, 2 };
       LoopThrough(arr);    
    }
} 
```

最有可能的是，编译器将内联对函数对象的调用并完全优化掉临时对象。希望您的编译器也将正确实现类模板的部分特化。

在[Ideone上输出](http://ideone.com/Dqcph)

# bash - Bash 脚本通过了语法检查，但由于缺少 ']' 而出错

> ID：11296396
> 
> 赞同：0
> 
> 时间：2012-07-02T15:11:38.053
> 
> 标签：bash, if-statement

我正在整理一个简单的备份脚本，它将压缩文件夹的内容，然后将该文件移动到备份服务器。该脚本在移动之前确保 tar 文件存在并且不是零字节。

问题是脚本在 IF 行之一上死了

```
if [ -f /www/archives/pdf/pdf_201207021048.tar && 11294720 -gt 0 ]; then
    echo "tar file exists and is greater than 0 bytes."
else
    echo "tar file does not exist or is zero bytes"
fi 
```

控制台中的错误是：

```
./backup_pdf.sh: line 49: [: missing `]' 
```

第 49 行是上面的 if 语句。

该脚本已成功验证

```
bash -n backup.sh 
```

bash 看到丢失的 ']' 有什么问题，但它通过了语法检查？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T15:15:51.093

&& 运算符分隔命令，因此您的`[`和您`]`的不是同一命令的一部分，这是必需的。要么使用两组括号，它们之间有一个 &&，要么使用`-a`运算符。如今，大多数人更喜欢第一种选择。

# database - 使用 Jenkins 和 Symfony2 进行登录测试

> ID：11296401
> 
> 赞同：0
> 
> 时间：2012-07-02T15:11:50.443
> 
> 标签：database, testing, symfony, jenkins

我配置了 jenkins 以便为我的项目自动化测试。单元测试运行良好。现在我想用我的数据库做一些测试。例如登录测试：输入用户名、密码（提交表单）。你知道如何做到这一点吗？谢谢你。

这是我想做但不起作用的测试：获取主页，测试链接FAQ是否存在两次，点击第一个FAQ链接，测试链接RMK是否存在，点击登录，测试是否忘记密码链接是否存在，输入我的用户名和密码提交表单，获取个人资料页面，测试我的个人资料链接是否存在。

```
 <?php

namespace RMK\SocialBundle\Tests\FunctionalTests\Controller\Website;

use RMK\SocialBundle\Controller\Website;
use Symfony\Component\DomCrawler\Crawler;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Bundle\FrameworkBundle\Test\WebTestCase;
use Symfony\Component\Security\Core\Authentication\Token\UsernamePasswordToken;
use Symfony\Component\HttpFoundation\ParameterBag;
use Symfony\Bundle\FrameworkBundle\Controller\RedirectController;
use Symfony\Bundle\FrameworkBundle\Tests\TestCase;
use Symfony\Bundle\FrameworkBundle\Controller\ControllerNameParser;

class HomeControllerTest extends WebTestCase
{    
    public function testViewFAQ(){
        $client = static::createClient();
        $crawler = $client->request('GET', '/home');
        $this->assertEquals(2, $crawler->filter('a:contains("FAQ")')->count());
        $this->assertEquals(2, $crawler->filter('a:contains("FAQ")')->count());
        $faqlink = $crawler->filter('a:contains("FAQ")')->eq(0)->link();
        $crawler = $client->click($faqlink);
        $this->assertEquals(1, $crawler->filter('a:contains("RMK")')->count());

        $loginLink = $crawler->filter('a:contains("Login")')->eq(0)->link();
        $crawler = $client->click($loginLink);
        $this->assertEquals(1, $crawler->filter('a:contains("Forgot Password?")')->count());

        $form = $crawler->selectButton('_submit')->form();
        $form['_username'] = 'username';
        $form['_password'] = 'test';

        $crawler = $client->submit($form);
        $crawler = $client->followRedirect();
        $crawler = $client->request('GET', '/profile');
        $this->assertEquals(1, $crawler->filter('a:contains("My Profile")')->count());
    }
}
?> 
```

最后一个断言失败了：断言 0 匹配预期失败 1\. 当我放 var_dump(print_r($client->getResponse()->getContent())); 就在最后一个断言之前，我得到了这个：

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta http-equiv="refresh" content="1;url=/home" />

        <title>Redirecting to /home</title>
    </head>
    <body>
        Redirecting to <a href="/home">/home</a>.
    </body>
</html>bool(true) 
```

我确定我错过了一些东西，但我不知道是什么。你有想法吗？谢谢。PS：我在 Ubuntu 12.04 上。

# c - 适用于 Visual Studio C 的 POSIX 兼容正则表达式库

> ID：11296404
> 
> 赞同：6
> 
> 时间：2012-07-02T15:11:59.703
> 
> 标签：c, regex, visual-studio-2010, visual-studio, posix

我正在开发一个将在 Linux 和 Visual Studio 2010 中运行的 C 程序，我正在寻找一个正则表达式库。GNU 带有与 POSIX 兼容的正则表达式库，但 Visual Studio 尽管有 C++ std::regex，但没有与 C 兼容的库。GNU 有其库的 Windows 版本 (http://gnuwin32.sourceforge.net/packages/regex.htm)，但 DLL 仅为 32 位，源代码无法在 Visual Studio 中编译（约 500 个错误！ ）。我唯一的要求是最终用户不必安装任何额外的东西，并且应该在两个平台上获得相同的行为。我对它是 POSIX 风格、Perl 风格还是其他风格并不挑剔。我该怎么办？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T22:54:52.193

我发现的一个基本不费力编译并且也是最小的库是：[https](https://code.google.com/p/slre/) ://code.google.com/p/slre/ 。这是非常基本的，但对于我的目的来说已经足够了。不过，感谢您的帮助。

# jquery - 将两张图片绑定在一起进行拖动

> ID：11296406
> 
> 赞同：5
> 
> 时间：2012-07-02T15:12:10.203
> 
> 标签：jquery, drag-and-drop

我正在寻找一些关于一次将两个图像拖到一起的脚本的帮助。我目前有一个脚本，允许我将缩略图图像拖到收藏箱中以便以后保存。但是，我的一些缩略图顶部有一个图像，以将这些缩略图表示为“未知”植物。我想知道是否有人可以指出我将如何将这两个图像绑定在一起以进行拖动的正确方向。这是我的代码：

```
$(document).ready(function() {
var limit = 16;
var counter = 0;
$("#mainBin1, #mainBin2, #mainBin3, #mainBin4, #mainBin5, #bin_One_Hd, #bin_Two_Hd, #bin_Three_Hd, #bin_Four_Hd, #bin_Five_Hd").droppable({
    accept: ".selector, .plant_Unknown",
    drop: function(event, ui) {
                counter++;  
        if (counter == limit) {
            $(this).droppable("disable");

        }

            $(this).append($(ui.draggable).clone());

            $("#cbOptions").show();
            $(".item").draggable({
                    containment: "parent",
                    grid: [72,72],
            });
    }
});
$(".selector").draggable({
   helper: "clone",
    revert: "invalid",
    revertDuration: 700,
    opacity: 0.75,
});

 $(".plant_Unknown").draggable({
   helper: "clone",
    revert: "invalid",
    revertDuration: 700,
    opacity: 0.75,
}); 
```

});

任何帮助将不胜感激。谢谢。

编辑：[网站](http://www.plantcombos.com/html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:53:00.190

您可以用一个可拖动的容器包围当前的可拖动元素，而不是以前的可拖动元素。

```
<div class=".container">
    <div class=".selector">...</div>
    <div class=".plant_Unknown">...</div>
</div> 
```

然后，将您的可拖动调用替换为：

```
$(".container").draggable({
   helper: "clone",
    revert: "invalid",
    revertDuration: 700,
    opacity: 0.75,
}); 
```

PS：看到网站后，您也可以考虑将您的链接标签作为建议的容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T17:41:30.990

您可以创建一个包含这两个元素的对象（函数或变量），然后拖动该对象。

# spring - 将 Spring JPA DAO 单元测试迁移到谷歌应用引擎

> ID：11296409
> 
> 赞同：2
> 
> 时间：2012-07-02T15:12:21.680
> 
> 标签：spring, unit-testing, google-app-engine, maven, jpa

我正在尝试构建一个简单的环境，让 Spring、Maven、JPA、Google App Engine 和 DAO 单元测试一起愉快地工作。

目标是能够运行一个简单的 DAO 单元测试来创建一个实体，然后通过一个简单的 find 再次加载它以检查它是否已正确创建——所有这些都来自我的 maven 构建。

我的 dao 正在使用 JPA 实体管理器（query()、persist() 等）

我已经让它与 hsqldb 和数据源等一起工作没有问题，但我正在努力让它与 appengine 一起工作。

我的问题是：

1）我正在使用实体管理器，如下注入我的持久性单元。可以吗？是否需要数据源或特殊的东西？我没想过，但如果我错了，请纠正我。

应用程序上下文.xml

```
 <bean id='entityManagerFactory' class='org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean'>
     <property name="persistenceUnitName" value="transactions-optional" />
    </bean> 
```

持久性.xml

```
 <persistence-unit name="transactions-optional">
    <provider>org.datanucleus.store.appengine.jpa.DatastorePersistenceProvider</provider>
    <properties>
        <property name="datanucleus.NontransactionalRead" value="true"/>
        <property name="datanucleus.NontransactionalWrite" value="true"/>
        <property name="datanucleus.ConnectionURL" value="appengine"/>
    </properties>
   </persistence-unit> 
```

2) 为了能够使用 entityManager 运行单元测试，我需要将哪些依赖项添加到我的 pom 文件中？版本呢？我发现了很多关于 appengine-api-labs/stubs/testing 的东西，但没有一个能正常工作，即我在使用 JPA 时缺少 jdo 依赖项......当我尝试添加一些时，我也会遇到很多冲突罐子（数据核和东西）。

到目前为止，我正在尝试 appengine-api-1.0-sdk v1.7.0 -> ASM-all v3.3 -> datanucleus core/api-jpa/enhancer v3.1.0 -> datanucleus-appengine v2.0.1.1 和所有gae 测试罐 v1.7.0

3）我需要添加什么到我的surefire插件（测试运行器）以确保它获取所有依赖项？当 DatastorePersistenceProvider 在我的类路径中时，我在 DatastorePersistenceProvider 上遇到了一个令人筋疲力尽的 ClassNotFound（我检查了 jars 和 mvn 依赖项：tree）

我看过这个，但它似乎根本不起作用：[http ://www.vertigrated.com/blog/2011/02/working-maven-3-google-app-engine-plugin-with- gwt-支持/](http://www.vertigrated.com/blog/2011/02/working-maven-3-google-app-engine-plugin-with-gwt-support/)

4) 我是否需要使用任何 localhelper 来测试我的 DAO？理想情况下，我想用实体管理器“按原样”测试我的 dao 层......你的意见是什么？有没有人设法在谷歌应用引擎上使用 JPA 运行单元测试？

5) 我需要在我的 pom 文件中的某处设置任何类型的 gae.home 吗？有人会使用它（插件或其他东西）吗？

6）如果我不使用 gwt，gwt-maven 插件是否有帮助 - 我正在编写一个使用 appengine 的简单 Web 服务，而不是 GWT 应用程序......

任何帮助将不胜感激，因为我现在已经挣扎了 2 天......

干杯，V。

# android - FragmentStatePagerAdapter 非法状态异常： 目前不在 FragmentManager 中

> ID：11296411
> 
> 赞同：28
> 
> 时间：2012-07-02T15:12:30.547
> 
> 标签：android, fragment

在 onResume() 的某些情况下，我在使用 FragmentStatePagerAdapter 的活动中得到了这个。使用设备的后退按钮时。不总是。不可重现。

我正在使用支持包 v4，最新版本 (8)。

已经用谷歌搜索，没有成功找到有用的答案。

查看源代码，它被扔在这里：FragmentManager.java

```
@Override
public void putFragment(Bundle bundle, String key, Fragment fragment) {
    if (fragment.mIndex < 0) {
        throw new IllegalStateException("Fragment " + fragment
                + " is not currently in the FragmentManager");
    }
    bundle.putInt(key, fragment.mIndex);
} 
```

但是为什么fragment < 0的索引在那里？

实例化片段的代码：

```
@Override
public Fragment getItem(int position) {
    Fragment fragment = null;

    switch(position) {
        case 0:
            fragment = MyFragment.newInstance(param1);
            break;
        case 1:
            fragment = MyFragment2.newInstance(param2, param3);
            break;
    }
    return fragment;
}

@Override
public int getCount() {
    return 2;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-02-03T18:20:27.793

如果您的 ViewPager 布局在片段内（不是活动）：

mViewPager.setAdapter(new MyFragmentStatePagerAdapter(get **Child** FragmentManager()));

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-12-22T21:04:00.807

我在这里遇到了同样的错误，但出于另一个原因。

就我而言，我在 FragmentStatePagerAdapter 中覆盖了 getItemPosition。我的想法是返回位置，如果项目存在，或者 POSITION_NONE，如果它不再存在。

好吧，我的问题是，当我的收藏为空时，我返回了 POSITION_NONE。这打破了一切。

我的解决方法是在我有一个空集合时返回 POSITION_UNCHANGED。

希望它可以帮助别人。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-02T15:24:40.800

理解这个错误的两个关键点是：

1.  它*有时会*发生。
2.  它发生在`onResume()`.

鉴于此信息，很可能`ViewPager`没有保留您`Fragment`的 s 的状态。如果您`Fragment`直接从 s 操作 s `Activity`，则可能是页面外`Fragment`被破坏并且您`Activity`正在尝试操作`null`片段。`Fragment`即使它不在当前屏幕中也要保留它的状态，修复非常简单：

```
private static final int NUM_ITEMS = 2;

ViewPager mPager = /** instantiate viewpager **/;
mPager.setOffscreenPageLimit(NUM_ITEMS-1); 
```

* * *

你可以在这里读到它：

[ViewPager 片段随着时间的推移而被破坏？](https://stackoverflow.com/q/9857420/844882)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-02T15:30:06.730

明白了，原因是我每次都在 onResume() 中实例化适配器。

如果我只实例化一次适配器，在活动的生命周期中，就不会再发生这种情况了。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-11-02T20:59:17.830

此异常意味着您正在尝试将片段附加到不再是正确状态以附加片段的活动。这意味着，每当我们尝试附加片段（**尤其是通过异步调用**）时，很有可能有人按下了后退按钮，并且在附加片段时活动正在合并中被破坏。这并不总是可重现的，因为它只是一个竞争条件，并且可能并不总是发生..

有两种方法可以解决此问题：

1）当您调用活动的 onSaveInstanceState 并将其发布到您尝试附加片段时，就会发生这种情况，因为 android 现在无法保存片段的状态，它将引发异常。为了克服这个问题，如果您没有保存片段的状态，请尝试使用

**commitAllowingStateLoss()**，同时提交事务。

2）为了非常安全，在附加片段之前检查您的活动是否处于正确状态，在onPause中使用以下代码：

```
 boolean isInCorrectState;

    public void onCreate{
    super.onCreate();
    isInCorrectState = true;
    }

    public void onPause() {
    super.onPause();
      if(isFinishing()){
        isInCorrectState = false;
       }
    } 
```

现在使用此标志在附加片段之前检查您的活动是否处于正确状态。. 意味着附加片段 iff **isInCorrectState == true**。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-06-24T16:48:28.027

对我来说，原因是别的。

在我的`Loader.onLoaderReset()`我清除了适配器中的数据。当我离开应用程序时，onDestroy() 导致加载程序重置，从而清除了`FragmentStatePagerAdapter`. 我认为它导致适配器清除对其片段的所有引用，但不知何故，`FragmentManager`没有注意到并抛出异常。对我来说似乎不太合乎逻辑。

请注意，对我来说它发生了`Activity.onDestroy()`。

希望它可以帮助某人。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-20T12:42:04.497

ViewPager 中的 Fragment 是固定的，而不是尝试替换适配器中的 Fragment，而是尝试给不同的 Fragment 集并更改 notifyDataSet，或者利用 FrameLayout 在视图分页器选项卡的当前 Fragment 上显示另一个 Fragment。

有我的解决方案有效：

[在 Fragment 级别与 ViewPager 一起应用的滑动手势，默认滑动禁用](https://stackoverflow.com/questions/18821775/swipe-gesture-applied-at-fragment-level-along-with-viewpager-with-its-default-s/19020100#19020100)

# mathjax - 如何左对齐 Mathjax 元素

> ID：11296415
> 
> 赞同：29
> 
> 时间：2012-07-02T15:12:49.833
> 
> 标签：mathjax

Mathjax 元素默认居中对齐。

如何使 Mathjax 元素左对齐？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-02T15:12:50.690

```
MathJax.Hub.Config({
    jax: ["input/TeX","output/HTML-CSS"],
    displayAlign: "left"
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-24T09:10:20.550

或者我的 CSS 解决方案：

```
.MathJax_Display {
  text-align: left !important;
} 
```

它对我有用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-06-29T06:30:14.903

*我通过在第一行末尾添加 \hspace{10cm}* [ [MathJax and left align](https://www.math.uwaterloo.ca/%7Epkates/MathJax/left-align.html) ].code找到了一个只有在 MathJax 语义中的技巧，如下所示：

```
$$
\begin{align}
x & = 1+1 \hspace{100cm} \\
& = 2
\end{align}
$$ 
```

例如我的代码是：

```
$$
\begin{aligned}
\sqrt{37} & = \sqrt{\frac{73^2-1}{12^2}} \\
 & = \sqrt{\frac{73^2}{12^2}\cdot\frac{73^2-1}{73^2}} \\ 
 & = \sqrt{\frac{73^2}{12^2}}\sqrt{\frac{73^2-1}{73^2}} \\
 & = \frac{73}{12}\sqrt{1 - \frac{1}{73^2}} \\ 
 & \approx \frac{73}{12}\left(1 - \frac{1}{2\cdot73^2}\right)
\end{aligned}
$$ 
```

和这样的效果：

[![对齐](../Images/e2748a0ffc36a5a8322dca422da58374.png)](https://i.stack.imgur.com/CExaa.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-24T11:45:19.583

编辑到以前的答案，这对我来说非常有用

```
.MathJax_Display { 
    text-align: left !important;
    display: inline !important;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-05-27T12:12:15.603

其他答案对我不起作用 - 但起作用的是修改 MathJax 正在显示的 MathML（我知道其他输入格式有等价物）。我试图正确缩进，但概念是一样的。

对于 MathML，我必须添加`indentalign="right"`到`<math ...>`标签中，例如：

`<math indentalign="right" xmlns="http://www.w3.org/1998/Math/MathML">...</math>`

之后 MathJax 正确地右对齐了我的内容。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-24T07:46:24.277

在具有标准配置 TeX-MML-AM_CHTML 的当前版本的 MathJax (2.7.5) 中， text-align 属性设置在具有类 mjx-chtml 和 MJXc-display 的元素上。因此，基于 MathJax_Display 构建的解决方案将不再适用。

为了获得更大的灵活性，您可以将父级添加`<div class="math-left-align">`到您的数学内容中，这样您就可以选择如何逐个调整您的数学。

你的 HTML 看起来像

```
<div class="math-left-align">
    $$ a + b = c $$
</div> 
```

以及对应的CSS

```
.math-left-align .mjx-chtml.MJXc-display{
    text-align: left !important;
 } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-04-29T13:51:28.897

[根据 MathJax 3.0 文档](http://docs.mathjax.org/en/v3.0-latest/options/output/index.html#options-common-to-all-output-processors)，您需要`displayAlign`通过将以下内容添加到 HTML 文件中来选择该选项：

```
<script>
    MathJax = {
        chtml: { displayAlign: 'left' }
    };
</script> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-29T04:15:35.197

我发现可以通过将 MathJax 方程包装在 0 宽度左对齐中来左对齐`div`

例如，虽然这在文档中间给出了一个“居中”的方程：

```
<body>
$$ f(x) = x^2 $$
</body> 
```

这将给出一个左对齐的方程：

```
<body>
    <div style="width:0; float:left;">
        $$ f(x) = x^2 $$
    </div>
</body> 
```

[jsbin](https://jsbin.com/jocabujado/1/edit?html,output)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-08-19T06:30:38.027

这似乎适用于 MathJax 3.0，

```
MathJax = {
  tex: {
    inlineMath: [
      ['$', '$'],
      ['\\(', '\\)']
    ]
  }
};
```

```
.left {
  display: flex;
  justify-content: flex-start;
}

.right {
  display: flex;
  justify-content: flex-end;
}
```

```
 <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
  </script>

<div class="right">
  $$\text{ex1: } \frac{1}{2}
</div>

<br>

<div class="right">
  $$\text{ex2: } \frac{12}{6}
</div>
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-09-02T08:11:51.243

截至 2021 年，我必须使用

```
mjx-container {
    text-align: left !important;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-01-21T01:50:01.557

以下代码对我有用。

```
<script>
MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    tags: 'ams'
  },
  svg: {
    fontCache: 'global',
    displayAlign: 'left',
    displayIndent: '1.5em'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script> 
```

# winapi - 为什么边框的不同边有不同的颜色？

> ID：11296418
> 
> 赞同：0
> 
> 时间：2012-07-02T15:12:57.057
> 
> 标签：winapi, colors, border

当我使用WS_EX_STATICEDGE时，我发现左右边框颜色为灰色（160、160、160），而上下边框颜色为白色。

我们可以将整个边缘设置为灰色吗？（使用纯winapi）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T15:19:57.953

The border is painted by operating system and there are no implications as for the edge to be painted with solid color. Instead it is current theme, which is applied and being used for painting.

Answering your question directly, yes you can make it. You can take over non-client area painting in your window and handle `WM_NCPAINT` yourself. It is however something you are not supposed to do unless you are doing some very specific customization.

# wcf - ACS 是否支持通过 WS-Trust/ActAs 进行身份委托？

> ID：11296421
> 
> 赞同：1
> 
> 时间：2012-07-02T15:13:14.060
> 
> 标签：wcf, claims-based-identity, acs, ws-trust, identity-delegation

我刚刚开始使用基于声明的安全性，并且有一个与身份委托相关的问题。我设法设置了一个本地虚拟 STS 和几个依赖它进行身份验证的 WCF 服务。*Web 应用程序通过 STS 对用户进行身份验证，并代表用户*调用服务 A （使用[`ChannelFactory.CreateChannelActingAs`](http://msdn.microsoft.com/en-us/library/ee766397)）。这工作正常。

现在我想使用 Azure 访问控制服务 (ACS) 作为联合提供程序，并使用 Google 帐户（或其他）登录，完全摆脱虚拟 STS。我能够对 Web 应用程序进行身份验证，但在尝试调用 Web 服务时收到“错误请求”响应。

我意识到有很多事情可能是问题所在，但是我还没有真正检查过 ACS 是否支持这个 ActAs 的 WS-Trust 概念。我发现[一个论坛帖子](http://social.msdn.microsoft.com/Forums/en-US/windowsazuresecurity/thread/bace0edf-391b-4fa4-b0b1-ca5a97815a27#97fa7970-296e-41f2-8acf-0b23f7f631fb)表明不支持 ActAs，但它大约有六个月的历史。

**谁能确认 ACS 是否支持 ActAs？**如果没有，是否有任何其他聪明的方式来实现支持的身份*委托*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:03:10.520

不，ACS 尚不支持 ActAs。您将不得不使用另一个 STS（例如您自己的、ADFS 等）

# excel - 如何跨多个列进行 VLOOKUP？

> ID：11296424
> 
> 赞同：0
> 
> 时间：2012-07-02T15:13:31.207
> 
> 标签：excel

我已经在谷歌上搜索了一段时间，我找到了一些关于这方面的信息，但我似乎无法将它们与我在这里所做的事情联系起来。基本上我有一个大型数据集，在 A 列中，有一个唯一 ID 标签列表（字母和数字的组合，每个引用一个基因，每列是一个细菌菌株）。该表有 24 列，用于 24 种不同的菌株。

如果来自不同菌株（即不是菌株 A）的基因与某个菌株中的 A 列中的基因足够相似，则该基因的 ID 代码将与其相似的基因放在同一行中列中的菌株 A，无论它来自什么细菌菌株。

现在这是棘手的部分，并非 A 列中的每个基因在另一个菌株中都有相应的基因。如果没有对应的基因，则值为#N/A（这是我之前使用vlookup函数时由excel自动生成的）

我必须找到一种方法来从 A 列中挑选出有基因的行，这些基因在菌株 C、D、E 和 F 中具有相应的基因，并且只有那些菌株，没有其他菌株

是否可以为此使用 VLOOKUP？或者可能的索引和匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:26:32.797

你试过过滤吗？过滤这些列中的每一列并排除#N/A值，你应该只剩下所有4个中都具有非#N/A值的行.....或者使用辅助列，例如在第25列中这个公式在第 2 行向下复制

`=IF(A2="","",IF(COUNTIF(C2:F2,"<>#N/A")=COLUMNS(C2:F2),"x",""))`

这将在 C 到 F 列都填充有非 #N/A 值的行中为您提供“x”。然后，您可以单独过滤该列

# python - 在预期交互方面几乎不需要帮助

> ID：11296426
> 
> 赞同：1
> 
> 时间：2012-07-02T15:13:35.667
> 
> 标签：python, pexpect

使此代码与 pexpect 模块一起工作几乎不需要帮助。

此代码通过登录服务器执行 git pull，然后下载最新代码（如果升级可用），或者只是发送一条消息说“已经是最新的”。

该代码实际上识别了密码屏幕，但没有识别文本“已经是最新的”

不知道我是否在这里遗漏了什么。

代码片段是：

```
 p = pexpect.spawn('git pull',cwd = comp_dir,maxread = 10000, timeout = 100)
        i = p.expect(['password:','Already up-to-date.',pexpect.EOF])
        if i == 0:
            output_lines = p.before
            output_line_list = output_lines.split('\r\n')
            for line in output_line_list: print line
            count = 0
            p.sendline(pwd)
            while count < 3:  **# The server in case of unsuccessful login asks for password thrice so this check...  (not sure if there is a better way of achieving this)**
                try:
                    output = p.expect('Permission denied')
                    count+=1
                    p.sendline(pwd)
                    p.logfile = sys.stdout
                except:
                    print 'Successful Login !!!! ------'
                    p.expect('Already up-to-date',timeout=None)
                    count = 3
        if i == 1:
            output_lines = p.before
            output_line_list = output_lines.split('\r\n')
            for line in output_line_list: print line
            p.expect(pexpect.EOF) 
```

任何帮助是极大的赞赏。

谢谢，-维杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:06:47.900

这个逻辑似乎有点不对。

起初：你期待一组提示

```
i = p.expect(['password:','Already up-to-date.',pexpect.EOF]) 
```

哪个可以正常工作，因为首先要发送密码提示。然后，即使您收到提示 - “已经是最新的”。

您已更改 pexpect 以检查“密码被拒绝”

```
output = p.expect('Permission denied') 
```

我相信任何一点都只有一条期望线是活动的。此外，您不能在出现提示后设置期望值。

您必须更改脚本以按顺序检查预期的行

```
i = p.expect(['password:','Already up-to-date.','Permission denied', pexpect.EOF])
if i == 0:
   .... send password
   i = p.expect(['password:','Already up-to-date.','Permission denied', pexpect.EOF])
if i == 2:
   .... send password
   i = p.expect(['password:','Already up-to-date.','Permission denied', pexpect.EOF])
if i == 1:
   .... print "already updated"
   i = p.expect(['password:','Already up-to-date.','Permission denied', pexpect.EOF])
if i == 3:
   .... print output 
```

基本上，您在任何时候都只有一个活动的期望命令处于活动状态。如果您期待一行“xyz”并且它收到“123”。它只会超时等待“xyz”。

# php - Mysql UPDATE错误，为什么

> ID：11296431
> 
> 赞同：0
> 
> 时间：2012-07-02T15:13:50.340
> 
> 标签：php, mysql

我有这部分代码：

```
$result = mysql_query("SELECT * FROM posts WHERE id = '$id'") or die (mysql_error());
$rec = mysql_fetch_array($result) or die (mysql_error());
$like = $rec['like'];
$like += 1;
mysql_query("UPDATE posts SET like = '$like' WHERE id = '$id'") or die (mysql_error()); 
```

并返回此错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“like = '1' WHERE id = '43'' 附近使用正确的语法”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T15:16:22.707

`LIKE`是一个保留的 MySQL 关键字。引用您的列名以避免将它们误认为是关键字：

```
... SET `like` = ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T15:16:04.243

您正在使用保留关键字`LIKE`

试试这样：

```
"UPDATE `posts` SET `like` = '$like' WHERE `id` = '$id'" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T15:18:01.067

Your problem is that like is a mysql keyword, either change the column name in your database or surround with backticks.

Also dont use mysql_ functions use mysqli or PDO as what you have is not safe and outmoded

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T15:20:53.787

"like" is a [reserved word](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html), it is not recommended to use it to name columns. If it is not possible for you to rename the column, modify your UPDATE statement by escaping it with [backticks](https://stackoverflow.com/questions/261455/using-backticks-around-field-names) :

```
`like` 
```

# performance - 复制图表并打印非常慢的 VBA

> ID：11296434
> 
> 赞同：1
> 
> 时间：2012-07-02T15:14:04.167
> 
> 标签：performance, vba, excel

我有性能问题，谷歌没有帮助我。这个人有同样的问题： [http ://excel.bigresource.com/Copy-Chart-Print-Very-Slow-1eeSa883.html](http://excel.bigresource.com/Copy-Chart-Print-Very-Slow-1eeSa883.html)

当我用 VBA 复制一个 excel 图表时：这太慢了。

```
 Dim myChart As ChartObject
    For Each myChart In consoPDC.ChartObjects
        myChart.Copy
        ...
    Next 
```

任何让它更快的想法？有关信息，目标是将它们粘贴到 powerpoint 中。

奇怪的是，手动制作一点也不慢

谢谢。尼科。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T08:55:59.650

因为您正在将副本复制到 PowerPoint 中，所以我建议您尝试以下代码：

```
myChart.CopyPicture Appearance:=xlScreen, Format:=xlBitmap 
```

在 MS-Help 和[这里找到这个](http://www.office-loesung.de/ftopic530015_0_0_asc.php&sid=d36eb45190414fb290626179987c7034)

[也在这里](http://www.pcreview.co.uk/forums/chartobject-copy-very-slow-t3475789.html)找到了一个很好的提示，根据，下面的代码应该更快

```
myChart.ChartArea.Copy 
```

Testet 在一个小规模的演示中，很高兴听到大规模的结果:) 当你尝试这个时，在几秒钟内进行一些比较会很高兴。

**编辑：**另一件需要注意的事情 - 内存泄漏

如果您对剪贴板进行大量复制，则应注意事后清理，否则您可能会很快填满内存；）这也可能导致性能下降，因为许多系统可能会将数据移动到页面文件，从而减慢访问速度。

**编辑：**如果你应该进入最后一秒并且你有很多图表要复制

using`For each`比使用简洁的循环遍历对象要慢。但是，代码看起来不像 using 那样整洁`for each`，但是如果有任何 sec/millisec 计数，则应该将它们相互比较。

我在一本专门的 Micheal Schwimmer 书中发现了这一点，对其进行了测试并感到惊讶。不确定在哪种情况下，但在更大范围内进行了测试并确认。

# javascript - 如何从另一个范围内的函数调用事件监听器？

> ID：11296435
> 
> 赞同：1
> 
> 时间：2012-07-02T15:14:06.487
> 
> 标签：javascript, google-maps, google-maps-api-3, onclick, dom-events

我想调用一个如下所示的 Google 事件监听器：

```
google.maps.event.addListener(trucks[data.results[i].id], 'click', function() 
{
// Do the magic :)
} 
```

来自未在同一范围内定义的函数：

函数是这样的：

```
function checkData(){} 
```

我怎样才能做到这一点？我可以以某种方式发送该值，使其与点击值相同吗？我的意思是它需要处理点击事件，但我也想正常调用它。

编辑：让我更具体一点：

我们有类似的东西：

```
function initialize()
{
google.maps.event.addListener(trucks[data.results[i].id], 'click', function() {};
} 
```

在我们拥有的不同范围内

```
function checkData()
{
   for (var i = 0; i < window.data.results.length; i++) 
   {
     if(window.data.results[i].driver_id==selectedIndex) 
     {
       // I want to sent the founded object to the event handler in this particular time

     }
   }

} 
```

我需要在 checkData 中放入什么才能在特定时间将其称为事件处理程序？如何将值传递给它？还是我需要将值传递给它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:20:29.690

修改后的答案：

`google.maps.event`命名空间包含一个[`trigger`](https://developers.google.com/maps/documentation/javascript/reference#event)方法。您可以使用此方法*模拟*（例如）对象上的单击事件。您确实需要对该对象的引用。

[演示在这里](http://jsfiddle.net/salman/xRMJM/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T15:21:56.820

嗯，这很容易。根据您声明函数的范围/上下文：

在全局对象内：`google.maps.event.addListener(trucks[data.results[i].id], 'click', checkData);`. 所有这一切都是传递对回调的引用。如果在当前范围内没有找到，JS 会引用全局对象。

其他一些对象：

```
google.maps.event.addListener(trucks[data.results[i].id], 'click', function(e)
{
    someObj.checkData.apply(this,[e]);
}); 
```

在最后一种情况下，事件对象 e 将作为参数传递。函数内部`this`将引用附加侦听器的单击元素/元素。

*编辑*

您正在寻找关闭，AFAIK：

```
google.maps.event.addListener(trucks[data.result[i].id],'click',function(e)
{
    //this function will be called on each click, e is the event object:
    checkData.apply(this,[e]);//more arguments? change [e] with: [e,arg2,arg3,...]
}); 
```

但是，如果您需要从本地范围传递参数，关闭程序开始变得更有意义：

```
var insideAfunction ='This string is local';
var anotherOne = {foo:'bar',so:'is this object'};
google.maps.event.addListener(trucks[data.result[i].id],'click',(function(local1,local2)
{
    function(e)
    {
        checkData.apply(this,[e,insideAfunction,anotherOne]);
    }
})(insideAfunction,anotherOne)); 
```

在最后一种情况下，事件处理程序是一个匿名函数，即自调用函数的返回值。这个自调用函数接收到当前作用域的两个参数。
闭包的好处在于，这些变量与回调函数相关联。它们不是垃圾收集的，因此匿名回调函数可以访问它们，甚至将它们传递给`checkData`函数。

想想闭包，至少在这里使用它们的方式，作为当前范围的快照，它的变量和它们各自的值。冻结在创建闭包时的状态。一开始有点难以理解，但 Douglas Crockford 在 youtube 上有几个视频，他谈到了关闭。我建议看他们。你会惊讶于你可以用闭包做什么，一般来说 JS。

*更新2*

我刚刚阅读了您的评论，您所追求的（我假设）将如下所示：

```
google.maps.event.addListener(trucks[data.results[i].id],'click',(function(mapObj)
{
    //mapObj === trucks[data.results[i].id]
    function(e)
    {
        checkData.apply(this,[mapObj]);
    }
})(trucks[data.results[i].id])); 
```

现在，在`checkData`函数中：

```
function checkData()
{
    //your snippet leads me to believe it usually doesn't get arguments passed
    //as a callback, however, we're passing a google map object, access it like so:"
    var passedObject = arguments[0];// === mapObj === trucks[data.results[i].id]
    //safer, even:
    var passedObject = arguments[0] || undefined;
    if (passedObject instanceof Object)
    {
        alert('Called from event');
    }
    else
    {
        alert('called as a regular function');
    }
} 
```

# iphone - FMDB：iPhone 模拟器在哪里存储桌面 SQL 文件？

> ID：11296438
> 
> 赞同：0
> 
> 时间：2012-07-02T15:14:19.613
> 
> 标签：iphone, fmdb

我正在尝试使用我的开发计算机桌面上的 FMDB 连接到 SQL 数据库。我可以从终端从 sqlite3 打开它，它里面有数据。

当我尝试使用 Cocoa 中的此代码时，我收到“错误打开！：14”

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDesktopDirectory, NSUserDomainMask, YES);
NSString *docsPath = [paths objectAtIndex:0];
NSString *path = [docsPath stringByAppendingPathComponent:@"database.sqlite"];
FMDatabase *database = [FMDatabase databaseWithPath:path]; 
```

我需要做什么来解决这个问题，存储数据的首选位置在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:58:18.687

尝试添加

`NSLog(@"Path: %@",path);`,

然后转到控制台将为您提供的路径并尝试查看是否可以打开文件。

存储数据的首选位置是 Documents 文件夹。但首先你必须从包中加载它，然后将它复制到 Documents 以允许写入\编辑。

# performance - LINQ 比简单循环慢得多吗？

> ID：11296439
> 
> 赞同：6
> 
> 时间：2012-07-02T15:14:21.340
> 
> 标签：performance, linq

> **可能重复：**
> [是否应该避免使用 LINQ，因为它很慢？](https://stackoverflow.com/questions/3769989/should-linq-be-avoided-because-its-slow)

我喜欢 LINQ。正如我今天在另一篇文章中读到的“这是自切片面包以来最好的事情”，我完全同意。但是在我工作的公司里，其他人似乎都讨厌 LINQ。

几周前，我第一次使用 ReSharper，在编写代码时，ReSharper 突然告诉我，我的 foreach 循环可以转换为 LINQ 表达式。这对我来说就像魔术一样，我向我的同事展示了。令我惊讶的是，他说：“我希望它可以反过来工作并将 LINQ 变成循环。这样会快很多！”

那么LINQ-to-Objects真的那么慢吗？我自己试了一下。当我运行以下示例几次时，我得到大约 350 的 Elapsed Ticks。

```
 Stopwatch sw = new Stopwatch();

        List<Person> personList = new List<Person>();
        for (int i = 0; i < 5000; i++)
        {
            Person p = new Person() {ID = i};
            personList.Add(p);
        }

        sw.Start();

        Person searchPerson = null;

        foreach (Person person in personList)
        {
            if (person.ID == 4321)
            {
                searchPerson = person;
                break;
            }
        }

        sw.Stop();

        Console.WriteLine(sw.ElapsedTicks); 
```

如果我将循环更改为 LINQ 查询（Resharper 将为我执行此操作），我会得到大约 900 的 ElapsedTicks。是循环的两倍多。

```
Person searchPerson = personList.FirstOrDefault(person => person.ID == 4321); 
```

看起来 LINQ 确实更慢，如果你经常使用它，这可能是个问题。在我们公司，我们拥有大量数据。那么，避免 LINQ 是正确的决定还是我们做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-02T15:19:35.857

Yes, it's slower. However, a portion of that delay is a one-time initialisation delay, rather than a per-iteration delay. The percentage difference is quite a bit lower on a 100k iteration loop.

The point to take away is that developer time is *significantly* more expensive than a small performance loss in your code, unless the customer is calling you up to complain about performance problems. Writing readable and maintainable code is **much** more important than micro-optimising your code.

As Eric Lippert pointed out so perfectly, [LINQ should only be avoided if it's not fast enough](https://stackoverflow.com/questions/3769989/should-linq-be-avoided-because-its-slow).

# c# - 避免 app.config 中 configSection 中的版本特定信息

> ID：11296441
> 
> 赞同：12
> 
> 时间：2012-07-02T15:14:29.687
> 
> 标签：c#, .net, configuration, app-config, config

我制作了一个小的 GUI 来管理 app.config 文件中的一些设置。GUI 作为我产品的一部分发布，可以更改 app.config 文件中的值，而无需在文本编辑器中打开它。

这些属性在自定义 configSection 中实现，使其在代码中具有强类型。我的问题是，当 app.config 文件更新时（当我从 GUI 保存时），我的程序集的完全限定名称写在 configSection 中，如下所示：

```
<section name="ConfigurationSettings" type="PerformanceDude.MSBuildShellExtension.Common.ConfigurationSettings, Common, Version=2.2.1.0, Culture=neutral, PublicKeyToken=1ab1b15115e63xxx" /> 
```

当我将此程序集升级到新版本号时，GUI 代码程序集版本不再与 app.config 中的程序集引用匹配。

这是我加载设置的方式：

```
var config = ConfigurationManager.OpenMappedExeConfiguration(new ExeConfigurationFileMap() { ExeConfigFilename = ConfigFilePath }, ConfigurationUserLevel.None);
var settings = Config.GetSection("ConfigurationSettings") as ConfigurationSettings; 
```

这就是我保存设置的方式：

```
config.Save(ConfigurationSaveMode.Minimal, true); 
```

我不想在每次更新时编写升级脚本来更改版本。有谁知道这个问题的一个很好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T19:40:59.433

我以前不得不做类似的事情。我最终将配置文件加载为 xml，将相关部分反序列化为对象，然后将它们放回 xml。以这种方式避免使用 .net 配置 API 可以避免版本问题。

另一种方法是将旧版本的程序集重定向到新版本。如果您的程序集在 GAC 中，您可以使用策略文件来执行此操作，并在部署新版本时部署它们；那么配置中的版本号将无关紧要。

# sharepoint-2010 - 如何使用客户端对象模型在 sharepoint 2010 中创建文档库

> ID：11296442
> 
> 赞同：0
> 
> 时间：2012-07-02T15:14:42.980
> 
> 标签：sharepoint-2010, sharepoint-clientobject

我正在努力使用 sharepoint 客户端对象模型在站点中创建文档库。

主要思想是创建文档库，然后在每个文档库下创建子文档。

请告诉我..

谢谢卡哈尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:11:00.503

```
 ClientContext clientContext = new ClientContext("your Site goes here");
  Web rootWeb = clientContext.Web;
  //Get List
  var query = clientContext.LoadQuery(rootWeb.Lists.Where(p => p.Title == "SharedFolder"));
  clientContext.ExecuteQuery();
  List list = query.FirstOrDefault();
  string[] namesArray = new string[] {  "Folder1","Folder2"};
  foreach (string name in namesArray)
   {
    //Add Folder
    var folders = list.RootFolder.Folders;
    clientContext.Load(folders);
    clientContext.ExecuteQuery();
    var newFolder = folders.Add(name);
    Console.WriteLine(name);
  }
  //Execute request
  clientContext.ExecuteQuery(); 
```

# php - AJAX 和获取最近的数据库条目

> ID：11296443
> 
> 赞同：4
> 
> 时间：2012-07-02T15:14:57.117
> 
> 标签：php, mysql, ajax

我正在开发一个 Web 应用程序，它将查询数据库中的消息并将它们显示给浏览器。我首先在访问该站点时检索服务器端的消息列表，然后显示那里的消息。但后来我想使用 AJAX 再次定期检查消息并使用新消息更新 DOM。

但是，我不想刷新整个列表。只需将最新消息注入表中即可。我正在使用 MySQL、PHP 和 mootools，我真的只是想听听关于如何实现这一点的最佳实践的想法。通过 AJAX 在屏幕上发送每个消息 ID 的数组，然后将其与数据库中的内容进行比较是我当前的解决方案，但这似乎非常肮脏。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T15:28:20.327

也许不是从数据库中检索整个消息表，而是使用时间戳进行查询，以仅获取自上次检查以来的最新消息。您所要做的就是在每次运行 ajax 检查新消息时存储时间戳，并在数据库中查询消息 > 时间戳。然后不需要检查，您可以将查询返回的任何内容添加到浏览器列表中。

# sql-server - 在 SQL Server 中更改视图是否需要几秒钟以上

> ID：11296444
> 
> 赞同：-1
> 
> 时间：2012-07-02T15:14:57.697
> 
> 标签：sql-server, views

我正在尝试更改一个视图，它只是一个表格加上一个额外的计算字段，现在距离我点击 EXECUTE 已经五分钟了。这是正常的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T15:20:20.693

检查阻塞`sys.dm_exec_requests`。在您对视图运行更改的窗口上，您应该在选项卡或状态栏中看到一个 spid（如 57 或 65）。运行这个查询（假设你的 spid 是 57）：

```
SELECT last_wait_type,blocking_session_id 
  FROM sys.dm_exec_requests
  WHERE session_id = 57; 
```

机会是，`blocking_session_id`不会是 NULL。如果会话来自那里，您可以通过以下方式快速查看他们运行的内容（假设它返回 62）：

```
DBCC INPUTBUFFER(62); 
```

或者您可能有一个广泛的阻塞链，因此您可能必须不断地将新的阻塞 spid 插入到顶部查询中以追踪主要的阻塞器。

找到主要阻止者后，您可以确定要做什么。你可以让它完成，或者你可以尝试杀死它。同样，假设主要阻止者是 session_id 62：

```
KILL 62; 
```

但在大多数情况下，您可能希望让它完成。

# java - 序列化到磁盘并通过网络发送时的 Java 大小差异

> ID：11296454
> 
> 赞同：0
> 
> 时间：2012-07-02T15:15:19.593
> 
> 标签：java, networking, serialization

我正在尝试测量我的程序用于通过网络发送 Java 对象的带宽量。我以为我可以简单地将对象序列化到磁盘并使用文件大小作为指示，但情况似乎并非如此。我所做的是将对象序列化为文件，同时使用 tcpdump 捕获网络使用情况：

```
sudo tcpdump -l -i lo port 54544 | tee test_112_512 
```

然后为了确定使用的总流量，我使用了以下命令：

```
cat test_112_512 | grep '54544 >' | awk '{N = N + $NF + 20} END {print N}' 
```

20 个字节用于说明 tcpdump 在报告长度时不考虑的 TCP 标头（约 250 个数据包）。grep 部分是忽略任何返回的流量，因为我对此不感兴趣。

使用这种方法，我发现总网络流量比磁盘上的文件大小少 10%。而且由于磁盘上的文件没有 TCP 标头，这是一个意外的结果。难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:19:17.213

无论目的地如何，Java 序列化始终是相同的大小。可以减少发送量的一件事是您之前在同一流上发送的内容。例如，如果您将对象写入现有流，则它可能比您单独将其写入文件时要小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T02:32:11.640

显然，您还没有考虑所有 TCP 开销。例如，TCP 标头可以长到 20 个字节，它们是可变长度的，也许您还没有考虑连接和关闭握手、ACK 等。

# magento - Magento 1.7.0.1 在使用自定义选项时将价格重置为 0

> ID：11296457
> 
> 赞同：5
> 
> 时间：2012-07-02T15:15:30.597
> 
> 标签：magento, magento-1.7

我正在使用`Magento 1.7.0.1`最近从`1.6.2.0`. 我有 SCP 扩展以及 MageWorx 高级自定义选项。

我有一个可配置的产品，其中关联的简单产品具有自定义选项。

如果您在以下组合中选择下拉菜单，您将看到带有可用自定义选项的多选弹出窗口。就在自定义选项框弹出之前，它将从 99.99 英镑（正确）切换到 0.00 英镑。奇怪的是，如果您单击自定义选项，然后单击“添加到购物车”，它会识别出这一点并将其添加到带有自定义选项和正确定价的购物车中！

组合如下：

1.  A6
2.  5000
3.  300gsm 光泽
4.  24 小时

您会看到它短暂地切换到 99.99 英镑，然后恢复到 0.00 英镑。这就是问题所在。如果有人可以提供一些帮助，那就太好了。我已经尝试了明显的修复，例如在 options.phtml 中编辑价格 += 浮动（无论如何都不存在！）并确保我的主题文件夹中有一个 options.phtml。我还修改了 price_clone，因为据报道它也可以解决这个问题，但在我的情况下没有。

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T07:23:11.773

试试这个，这对我有用......

在`app/design/frontend/base/default/template/catalog/product/view/options.phtml`

改变

```
price += parseFloat(config[optionId][element.getValue()]); 
```

到

```
price += parseFloat(config[optionId][element.getValue()].price); 
```

有关更多详细信息，请参阅

[http://k2xl.com/wordpress/custom-options-broken-in-magento-1-7-heres-the-fix/](http://k2xl.com/wordpress/custom-options-broken-in-magento-1-7-heres-the-fix/)

或者

[http://www.magentocommerce.com/boards/viewthread/280283/P0/](http://www.magentocommerce.com/boards/viewthread/280283/P0/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-01T11:54:03.820

我将此修复程序用于 magento 1.9

[https://github.com/lejoko/magento-configurable-simple/blob/2d70ea083a44bf1608af95f1ba6f07754729f334/app/design/frontend/base/default/template/catalog/product/view/scpoptions.phtml](https://github.com/lejoko/magento-configurable-simple/blob/2d70ea083a44bf1608af95f1ba6f07754729f334/app/design/frontend/base/default/template/catalog/product/view/scpoptions.phtml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-05T04:53:08.813

在 app\design\frontend\base\default\template\catalog\product\view\options.phtml

找到代码，

```
Product.Options = Class.create();
    Product.Options.prototype = {

       //Don't change this code,
    } 
```

在此之后添加以下代码，

```
price += parseFloat(config[optionId][element.getValue()].price); 
```

# security - 如果已知加密字符串，DES 加密的强度？

> ID：11296460
> 
> 赞同：2
> 
> 时间：2012-07-02T15:15:46.613
> 
> 标签：security, encryption

我正在使用 DES 加密一些字符串。使用这个例子：

[http://exampledepot.com/egs/javax.crypto/PassKey.html](http://exampledepot.com/egs/javax.crypto/PassKey.html)

假设攻击者发现我的加密字符串的解密值之一是什么。例如，他们不知何故发现我加密的单词是“狗”。现在它们具有加密和解密的值。那么弄清楚如何解密我的所有其余数据是微不足道的吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:28:19.640

您要问的问题是“DES 是否有任何已知的[明文攻击](http://en.wikipedia.org/wiki/Known-plaintext_attack)漏洞？”。就目前情况而言，答案是不（据我所知），尽管此类攻击已针对降低强度的版本发布。

由于 DES 的密钥长度实际上只有 56 位，因此如果您真的想要安全性，它对于当前使用来说还不够强大 - 这在当今的蛮力攻击范围内很好，特别是如果您只有一个块加密（如您的“狗”示例）。

# entity-framework - 实体框架 InvalidCastException

> ID：11296466
> 
> 赞同：-1
> 
> 时间：2012-07-02T15:16:01.887
> 
> 标签：entity-framework

此代码编译但会生成运行时错误。本质上，我只是在实体框架中执行存储过程并尝试返回单个对象。关于 w 的任何想法

代码：

```
 public static TowingCustomerVehicle GetTowingCustomerVehicle(int vehicleID)
        {
            using (ProductServiceEntities context = new ProductServiceEntities())
            {
                TowingCustomerVehicle vehicle = (TowingCustomerVehicle)context.Vehicles
                      .Where(v => v.VehiclePK == vehicleID)
                      .Select(v => new TowingService2._0.Model.Towing.TowingCustomerVehicle
                      {
                            CurbWeight = (int)v.CurbWeight,
                            HitchSystemRating = (int)v.TowingCapacityMaximum,
                            FuelType = v.FuelType,
                            TopType = v.TopType,
                            TongueLoadRating = (v.TowingCapacityMaximum ?? 0),
                            IsCVT = v.IsAutoTransCVT ?? false,
                            DriveType = v.Driveline,
                            EPAClass = v.EPAClass,
                            Make = v.Make,
                            Model = v.Model
                      });

                vehicle.AttachedWiring = context.IsAttachedWiring(vehicleID).Count() > 0 ? true : false;

                return vehicle;
            }
        } 
```

错误：无法将“System.Data.Objects.ObjectQuery`1[TowingService2._0.Model.Towing.TowingCustomerVehicle]”类型的对象转换为“TowingService2._0.Model.Towing.TowingCustomerVehicle”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:21:50.890

选择返回一个`IEnumerable<TowingCustomerVehicle>`. 您需要添加`.First()`到 select 调用的末尾。

```
TowingCustomerVehicle vehicle = context.Vehicles
                  .Where(v => v.VehiclePK == vehicleID)
                  .Select(v => new TowingService2._0.Model.Towing.TowingCustomerVehicle
                  {
                        CurbWeight = (int)v.CurbWeight,
                        HitchSystemRating = (int)v.TowingCapacityMaximum,
                        FuelType = v.FuelType,
                        TopType = v.TopType,
                        TongueLoadRating = (v.TowingCapacityMaximum ?? 0),
                        IsCVT = v.IsAutoTransCVT ?? false,
                        DriveType = v.Driveline,
                        EPAClass = v.EPAClass,
                        Make = v.Make,
                        Model = v.Model
                  }).First(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:23:28.253

据我所知，结果是 type `ObjectQuery<TowingCustomerVehicle>`，您需要该查询中的一项 type `TowingCustomerVehicle`。`First()`在末尾添加或`FirstOrDefault()`. 之后你就不需要演员表了。

还没有在 VS 中尝试过这个，看看它是否可以编译，但它应该可以正常工作。

希望能帮助到你。

# ios - iOS 检查 JSON 返回是否有 Key

> ID：11296470
> 
> 赞同：2
> 
> 时间：2012-07-02T15:16:05.837
> 
> 标签：ios, crash, nsjsonserialization

我在 POST 之后使用 NSJsonSerialization 来取回 json 返回。我要么取回正确的回报，要么得到：

```
{
"status":"false"
} 
```

在我尝试解析它之前，我需要检查我是否取回了我的回报（因为如果我要求的密钥不存在，它会崩溃）但是如果我检查

```
[whatever objectForKey:@"status"] == nil 
```

当它为零时没关系，但是如果它不存在它会崩溃（因为我取回了我的另一个回报）

我得到的崩溃是这个，似乎 NSJSONSerialzation 正在返回一个 NSArray 作为 NSdictionary？：

```
2012-07-02 11:03:40.426 [9412:10703] -[__NSArrayM objectForKey:]: unrecognized selector sent to instance 0x75f03f0
2012-07-02 11:03:40.429 [9412:10703] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSArrayM objectForKey:]: unrecognized selector sent to instance 0x75f03f0' 
```

我需要想办法知道我得到了哪些回报，这样我才能采取相应的行动。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T15:22:34.707

你可以检查`whatever`变量的类型

```
if([whatever isKindOfClass:[NSDictionary class]])
    //then check for nil
else
    //Then its not a dictionary then in your case its empty 
```

# sql - Oracle TIMESTAMP 错误：日期时间/间隔精度超出范围

> ID：11296475
> 
> 赞同：0
> 
> 时间：2012-07-02T15:16:23.647
> 
> 标签：sql, oracle, oracle10g

我在 Oracle 10g 中使用 TIMESTAMP(9) 创建了一个表。然后我尝试在该列中插入 CURRENT_TIMESTAMP 值，但不幸的是收到错误消息：该列的值太大：（实际：35，最大值：25）

然后我尝试了这个查询：

从对偶中选择长度（current_timestamp）；

计数是 35。

但是 Oracle 不允许我在创建表结构时定义 TIMESTAMP(35)。

在这种情况下，如何在创建表时定义 Timestamp 列，如何在 Timestamp 列中插入 Current Timestamp 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:28:28.640

你能发布你的表定义和你用来插入的确切的 SQL 语句`CURRENT_TIMESTAMP`吗？如果您实际上是在插入 a `TIMESTAMP`，则不应出现该错误

```
SQL> create table foo ( col1 timestamp(9) );

Table created.

SQL> insert into foo values( current_timestamp );

1 row created. 
```

`length(current_timestamp)`将时间戳隐式转换为字符串并确定该字符串的长度。您得到的错误似乎暗示当您尝试将数据插入表时发生了类似的转换。

# linkedin - 从 API 用户令牌派生 LinkedIn 个人资料 URL？

> ID：11296484
> 
> 赞同：11
> 
> 时间：2012-07-02T15:16:48.743
> 
> 标签：linkedin

LinkedIn API 通过字母数字成员令牌而不是数字 ID 来引用用户。

是否可以从用户令牌中派生出linkedin 个人资料网址（公共或私有）？

（信息：[https](https://developer.linkedin.com/comment/4173#comment-4173) ://developer.linkedin.com/comment/4173#comment-4173 ）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T15:22:45.837

既然您已经在使用 API 来拉取[`id`字段](https://developer.linkedin.com/documents/profile-fields#profile)，为什么不直接拉取`public-profile-url`呢？

根据会员 ID 的十六进制性质，这些字符串是在每个应用程序的基础上唯一生成的，因此无法将它们直接映射到 LinkedIn.com 上使用的相应 ID 号。

# c++ - 使用 boost::named_condition 的错误

> ID：11296485
> 
> 赞同：1
> 
> 时间：2012-07-02T15:16:49.420
> 
> 标签：c++, boost

我无法编译这个简单的示例（在 VS 2008 上）：

```
#include <boost/interprocess/sync/named_condition.hpp>
#include <boost/thread/mutex.hpp>
#include <string>

int main(int argc, const char* argv)
{
    boost::interprocess::named_condition cond(boost::interprocess::create_only, "somd.notify");
    boost::mutex the_mutex;
    while (true)
    {
        const boost::system_time timeout = boost::get_system_time() + boost::posix_time::milliseconds(500);
        boost::mutex::scoped_lock lock(the_mutex);
        if (cond.timed_wait(lock, timeout))
        {
            // Do something useful
        }
    }

    return 0;
} 
```

我得到的编译错误是（boost v1.38.0）：

```
1>....\boost/interprocess/sync/named_condition.hpp(326) : error C2273: 'function-style cast' : illegal as right side of '->' operator
1>        ..\src\main.cpp(13) : see reference to function template instantiation 'bool boost::interprocess::named_condition::timed_wait<boost::mutex::scoped_lock>(L &,const boost::posix_time::ptime &)' being compiled
1>        with
1>        [
1>            L=boost::mutex::scoped_lock
1>        ] 
```

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:25:44.173

我猜你必须使用不同的互斥锁类型：例如 boost::interprocess::interprocess_mutex 。

最好的后卫

托尔斯滕

# html - 从 xml rss feed cakephp 渲染 html

> ID：11296486
> 
> 赞同：1
> 
> 时间：2012-07-02T15:16:52.773
> 
> 标签：html, xml, cakephp, rss

我正在尝试在 cakephp 中做一个 RSS 提要。我在视图中得到了 xml。到目前为止，一切都很好。我不知道如何呈现 html，所以它看起来像[http://rss.cnn.com/rss/edition_europe.rss](http://rss.cnn.com/rss/edition_europe.rss)，例如。

正如书中所说，我有我的控制器、默认布局和视图，但在这里我被卡住了。我在描述中有 html，但正如我所说，它被输出为 xml。

非常感谢任何帮助，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:52:42.477

我在这里可能有点离题，但您可能想阅读 XSL - XML 样式表 - 看看这是否可以解决问题：

[http://www.w3schools.com/xsl/](http://www.w3schools.com/xsl/)

[http://www.brainbell.com/tutorials/XML/Your_First_XSLT_Style_Sheet.htm](http://www.brainbell.com/tutorials/XML/Your_First_XSLT_Style_Sheet.htm)

基本上，您创建另一个文件来“转换”和设置 XML 文档的样式（您在 CakePHP 中创建的 RSS 提要），以使浏览器以不同的方式呈现它。

如果您查看 CNN 示例的源代码，您可以看到以下行：

```
<?xml-stylesheet type="text/xsl" media="screen" href="/~d/styles/rss2full.xsl"?>
<?xml-stylesheet type="text/css" media="screen" href="http://rss.cnn.com/~d/styles/itemcontent.css"?> 
```

这段代码使浏览器知道 XML/RSS 文档有一个样式表，以便更好地阅读。

# java - Apache tomcat 中的 java.lang.OutOfMemory:PermGen 异常

> ID：11296488
> 
> 赞同：1
> 
> 时间：2012-07-02T15:16:56.313
> 
> 标签：java, apache

几天前，我注意到`java.lang.OutOfMemory: PermGen`当我的 Java 网站在 Tomcat 下运行时，我偶尔会看到异常。

我在线阅读了此错误并了解为什么会发生此异常。我按照教程来增加我的`MaxPermSize`，并编辑`catalina.sh`为包含以下内容：

```
 JAVA_OPTS="-Djava.awt.headless=true -Dfile.encoding=UTF-8 
    -server -Xms1536m -Xmx1536m
    -XX:NewSize=256m -XX:MaxNewSize=256m -XX:PermSize=256m 
    -XX:MaxPermSize=256m -XX:+DisableExplicitGC" 
```

但是，我想更多地了解我的 PermGen 功能：

1.  谁能告诉我如何理解我的服务器功能以提供适当的新大小？

2.  此外，有谁知道我如何在 Apache Tomcat 上进行内存测量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:28:07.023

这是一个普遍的问题，没有好的解决方案。

当您对正在运行的 Tomcat 实例进行热重新部署时，Permgen 问题通常是由存储泄漏引起的。它通常是在某些东西保留对某个对象的引用时引起的，该对象是您重新部署的类之一的实例。这会导致旧的类加载器和它加载的所有类泄漏......

有三种方法可以解决这个问题：

*   追踪并修复 Permgen 内存泄漏。
*   定期重新启动 Tomcat。
*   不要进行热重新部署。

增加 Permgen 并不能解决问题。它只是把它推迟......这样你的 Tomcat 就不会经常死掉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T15:30:08.053

您可以尝试使用 JConsole 来监控内存使用情况：

[http://java.sun.com/developer/technicalArticles/J2SE/jconsole.html](http://java.sun.com/developer/technicalArticles/J2SE/jconsole.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T15:30:49.707

PermGen 是不由垃圾收集器管理的内存空间。它包含加载的类、它们的方法、静态、字符串等...

使用 1536Mo 的 Xmx，您可以尝试将 MaxPermSize 设置为 384M。如果该值太高，JVM 将不会启动，因此很容易找到最大大小。

但真正的问题是为什么你的 PermGen 这么满。你加载了很多课程吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T15:27:47.713

内存不足的发生是因为您的[JVM 没有分配足够的内存](http://wiki.cloudbees.com/bin/view/RUN/JVM+PermGen+Space)。

为了更好地了解正在发生的事情，尝试使用探查器可能是有意义的。我以前用过[lambda 探针](http://www.lambdaprobe.org/)和[New Relic](http://newrelic.com/)（现在免费赠送一件衬衫供试用），但还有很多其他的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T15:32:30.103

为了跟踪垃圾收集器的性能并观察堆大小，我建议打开 GC 日志记录。

-Xloggc: -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCTimeStamps

这将生成日志文件，您将能够获得更适合调整堆大小的设置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-02T15:58:15.407

1) PermGen 存储类定义等元数据。因此它的大小与应用程序的大小直接相关。主要是班级的数量和班级的规模。要调整和监控 permgen 的大小，您可以使用随 JDK 一起分发的可视化 vm。它位于 bin 目录中，并且是非常强大的应用程序。2）您可以使用Visual VM来监控JVM的每个内存区域。您甚至可以在单个班级级别进行监控。

# java - 将 Hashmap 分配给 Hashmap

> ID：11296490
> 
> 赞同：17
> 
> 时间：2012-07-02T15:17:00.253
> 
> 标签：java

我有一个哈希图，我想复制它以供其他用途。但每当我复制它并重复使用它时，它也会改变原来的那个。这是为什么？

```
 do {
            Map<Integer, Map<String, Object>> map1 = originalMap; 
            //at the second iteration originalMap is the same as map1 of the last iteration, 
            //eventhough the change was nog accepted;
            //do something with map1 (change value);
            if(change is accepted) {
               originalMap = map1;
            }
        } while(iteration < 10); 
```

提前致谢

```
 public static <Integer,String, Schedule>Map<Integer, Map<String, Schedule>> deepCopy(Map<Integer, Map<String, Schedule>> original) {
    Map<Integer, Map<String, Schedule>> copy = new HashMap<Integer, Map<String, Schedule>>();

    for (Map.Entry<Integer, Map<String, Schedule>> entry : original.entrySet()) {
        copy.put(entry.getKey(), deepCopy2(entry.getValue()));
    }
    return copy;
}

public static <String, Schedule>Map<String, Schedule> deepCopy2(Map<String, Schedule> original) {
    Map<String, Schedule> copy = new HashMap<String, Schedule>();
    for (Map.Entry<String, Schedule> entry : original.entrySet()) {
        copy.put(entry.getKey(), entry.getValue());
    }

    return copy;
} 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-07-02T15:18:41.057

What you did was not to create a copy of the map, but of the reference to it. when two references point to the same object, changes to one will reflect in the other.

Solution 1: If this was a Map from some simple type to another, you would do this instead:

```
Map<SomeType, OtherType> map1 = new HashMap<SomeType, OtherType>(original); 
```

This is called a [Copy Constructor](http://www.javapractices.com/topic/TopicAction.do?Id=12). Almost All standard Collection and Map implementations have one, and it's usually the simplest way to clone a simple structure. This will work fine as long as `SomeType` and `OtherType` are [immutable](http://en.wikipedia.org/wiki/Immutable_object) (e.g. `Integer` and other `Number` types, `Boolean`, `String`, but not Collections, Dates, Maps, Arrays etc.)

If not, as other answerers and commenters have pointed out, you also need to copy the map values.

Solution 2: Here's a quick and dirty version that should be safe:

```
Map<Integer, Map<String, Object>> original=new HashMap<Integer, Map<String,Object>>();
Map<Integer, Map<String, Object>> copy = 
        new HashMap<Integer, Map<String, Object>>();
for(Entry<Integer, Map<String, Object>> entry : original.entrySet()){
    copy.put(entry.getKey(), new HashMap<String, Object>(entry.getValue()));
} 
```

But actually, I like Hunter's idea of providing a deep copy method. So here's Solution 3: my own version using generic parameters:

```
public static <K1, K2, V> Map<K1, Map<K2, V>> deepCopy(
    Map<K1, Map<K2, V>> original){

    Map<K1, Map<K2, V>> copy = new HashMap<K1, Map<K2, V>>();
    for(Entry<K1, Map<K2, V>> entry : original.entrySet()){
        copy.put(entry.getKey(), new HashMap<K2, V>(entry.getValue()));
    }
    return copy;
} 
```

You can call it like this:

```
Map<Integer, Map<String, Object>> original=new HashMap<Integer, Map<String,Object>>();
// do stuff here
Map<Integer, Map<String, Object>> copy = deepCopy(original); 
```

* * *

**Update**

I've hacked together a class that performs deep cloning for Maps, Collections and Arrays (primitive and otherwise). Usage:

```
Something clone = DeepClone.deepClone(original); 
```

Here it is:

```
public final class DeepClone {

    private DeepClone(){}

    public static <X> X deepClone(final X input) {
        if (input == null) {
            return input;
        } else if (input instanceof Map<?, ?>) {
            return (X) deepCloneMap((Map<?, ?>) input);
        } else if (input instanceof Collection<?>) {
            return (X) deepCloneCollection((Collection<?>) input);
        } else if (input instanceof Object[]) {
            return (X) deepCloneObjectArray((Object[]) input);
        } else if (input.getClass().isArray()) {
            return (X) clonePrimitiveArray((Object) input);
        }

        return input;
    }

    private static Object clonePrimitiveArray(final Object input) {
        final int length = Array.getLength(input);
        final Object copy = Array.newInstance(input.getClass().getComponentType(), length);
        // deep clone not necessary, primitives are immutable
        System.arraycopy(input, 0, copy, 0, length);
        return copy;
    }

    private static <E> E[] deepCloneObjectArray(final E[] input) {
        final E[] clone = (E[]) Array.newInstance(input.getClass().getComponentType(), input.length);
        for (int i = 0; i < input.length; i++) {
            clone[i] = deepClone(input[i]);
        }

        return clone;
    }

    private static <E> Collection<E> deepCloneCollection(final Collection<E> input) {
        Collection<E> clone;
        // this is of course far from comprehensive. extend this as needed
        if (input instanceof LinkedList<?>) {
            clone = new LinkedList<E>();
        } else if (input instanceof SortedSet<?>) {
            clone = new TreeSet<E>();
        } else if (input instanceof Set) {
            clone = new HashSet<E>();
        } else {
            clone = new ArrayList<E>();
        }

        for (E item : input) {
            clone.add(deepClone(item));
        }

        return clone;
    }

    private static <K, V> Map<K, V> deepCloneMap(final Map<K, V> map) {
        Map<K, V> clone;
        // this is of course far from comprehensive. extend this as needed
        if (map instanceof LinkedHashMap<?, ?>) {
            clone = new LinkedHashMap<K, V>();
        } else if (map instanceof TreeMap<?, ?>) {
            clone = new TreeMap<K, V>();
        } else {
            clone = new HashMap<K, V>();
        }

        for (Entry<K, V> entry : map.entrySet()) {
            clone.put(deepClone(entry.getKey()), deepClone(entry.getValue()));
        }

        return clone;
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-02T15:20:18.487

By doing this:

```
Map<Integer, Map<String, Object>> copy = originalMap; 
```

... you're *not* copying the map, only creating a new variable which refers to the exact same map, and clearly the changes you make using this variable will be reflected in the original map - they're pointing to the same object in memory. Better copy the original map using the [constructor](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html#HashMap%28java.util.Map%29) that receives another map as a parameter:

```
Map<Integer, Map<String, Object>> copy;
copy = new HashMap<Integer, Map<String, Object>>(originalMap); 
```

The above code will create a *shallow copy* of the original map, meaning: if you change the *value* of the elements inside one map, the changes will be reflected in the other, but you can add/remove freely the elements from either map and the other won't be affected. If that's not good enough, you'll need to perform a *deep copy* of the elements in the map at the time of copying it.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T15:25:35.840

一个简单直接的解决方案是遍历 Map 中的值并将它们复制到 Map 中：

```
Map<Integer, Map<String, Object>> map1;

//iterate over the map copying values into new map
for(Map.Entry entry : originalMap.entrySet())
{
   map1.put(entry.getKey(), new HashMap<String, Object>(entry.getValue()));
} 
```

更好的解决方案是将其包装在一个方法中：

```
public static <K,J,V> Map<K, Map<J, V>> deepCopy(Map<K, Map<J, V>> original)
{
    Map<K, Map<J, V>> copy;

    //iterate over the map copying values into new map
    for(Map.Entry<K, Map<J, V>> entry : original.entrySet())
    {
       copy.put(entry.getKey(), new HashMap<J, V>(entry.getValue()));
    }

    return copy;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T19:04:53.103

这可能来得有点晚，但另一个简单的解决方案是将地图序列化为输出流并将其反序列化为新的地图对象。这也是打破单例模式的最简单方法之一。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T15:31:12.097

在您的代码中，`originalMap`只是对`map1`. 现在，它们都指向相同的键和值。请记住，这是 Java，其中对象引用上的“=”只是一个引用分配（不是深拷贝或浅拷贝）。

`clone`Java 集合通常通过或支持某种形式的浅拷贝`putAll`。在映射的情况下，假设`map1`和`map2`的类型为`HashMap<KeyType,ValueType>`，如果您希望一个映射是另一个映射的浅表副本（意思是一个不同的 HashMap 对象，但具有共享的键和值），您可以这样做：

```
HashMap<KeyType,ValueType> map1();
HashMap<KeyType,ValueType> map2();

map2.put(x1,v1); // map2 = {{x1,v1}}

map1.put(x2,v2); // map1 = {{x2,v2}}

map1 = map2.clone(); // map1 = {{x1,v1}}, with x2 and v2 gone

map2.clear();
map2.put(x3,v3); // map2 = {{x3,v3}}
map2.put(x4,v4); // map2 = {{x3,v3},{x4,v4}}

map1.put(x4,v5); // map1 = {{x1,v1}, {x4,v5}}

// add all of map2 into map1, replacing any mappings with shared keys
map1.putAll(map2); // map1 = {{x1,v1},{x3,v3},{x4,v4}}, notice how v5 is gone 
```

临别之际，您需要养成查看 Java API 的习惯。这会对你有很大帮助。

[http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)

# windows - 在 Windows 中更改符号链接的目标

> ID：11296491
> 
> 赞同：6
> 
> 时间：2012-07-02T15:17:00.450
> 
> 标签：windows, filesystems, symlink

如何更改现有符号链接的目标。任何解决方案都可以工作：控制台、powershell 等。

重要的想法是原子地进行此更改，因此删除链接然后创建新链接的解决方案对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:38:50.007

您可以使用事务性 NTFS。请参阅以下功能：

*   [创建交易](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366011%28v=vs.85%29.aspx)
*   [DeleteFileTransacted](http://msdn.microsoft.com/en-us/library/aa363916.aspx)
*   [CreateSymbolicLinkTransacted](http://msdn.microsoft.com/en-us/library/aa363867%28v=vs.85%29)
*   [提交事务](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366001%28v=vs.85%29.aspx)

缺点是 MS 正在弃用对事务的支持。特别是在 Windows Server 2012 中引入的新文件系统中不提供事务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T15:27:42.727

使用[控制代码的](http://msdn.microsoft.com/en-us/library/windows/hardware/ff545568%28v=vs.85%29.aspx)[`ZwFsControlFile`功能](http://msdn.microsoft.com/en-us/library/windows/hardware/ff566462%28v=vs.85%29.aspx)似乎可以做到这一点。至少这是我从 Far Manager 如何通过 Process Monitor 收集到的。[`FSCTL_SET_REPARSE_POINT`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff545568%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T15:29:54.023

您可以尝试创建一个新的符号链接，然后重命名新链接以覆盖旧链接。

这里提到了一些可能性：

[Windows 上是否可以进行原子文件重命名（带覆盖）？](https://stackoverflow.com/questions/167414/is-an-atomic-file-rename-with-overwrite-possible-on-windows)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-13T12:14:46.383

在 Windows 7 CMD 控制台中对 LSemi 的方法稍作修改对我有用

```
mklink TempLink NewTarget

copy /l /y TempLink OldLink

del TempLink 
```

我有一个每秒多次读取 OldLink 的过程，通过这种方法，我可以不断地将 OldLink 更新到新目标，而不会导致读取错误。严格来说，这可能不是原子的，但影响符号链接副本所花费的时间必须非常小，以至于不会干扰。

# jquery - 页面重新加载时的 Ajax 状态代码 0

> ID：11296493
> 
> 赞同：3
> 
> 时间：2012-07-02T15:17:09.483
> 
> 标签：jquery, ajax, response, http-status-codes, pageload

**我有一个应用程序，它通过页面加载**时的 $.ajax 调用检索一些页面数据（没有其他绑定，如“点击”等）。在一个场景中，当用户在响应到达之前重新加载页面（或导航到另一个页面）时，应用程序返回一个错误（错误事件[ajaxError()](http://api.jquery.com/ajaxError/)被触发），状态码为 0。

当我做作业并阅读 SO（以及许多其他地方）时，我遇到了人们通过执行以下操作简单地忽略此类错误的帖子：

```
$(document).ajaxError(function(e, jqxhr, settings, exception) {  
  if (jqxhr.readyState == 0 || jqxhr.status == 0) {  
    return; //Skip this error  
  }  
}); 
```

假设只有这种错误会被忽略，是否安全？是否会出现任何需要“特别注意”的负面情况？

还：

我发现了一些对类似问题的回复，指出“return false;” 或“preventDefault”解决了他们的问题。但在我的情况下，一切都发生在页面加载时，所以我不能“挂钩”任何提到的事件......或者我可以吗？

**编辑：**这里的另一个问题是：是否有任何其他方式来处理这些情况（ajax 请求被页面重新加载中断）？问题是我在一般 ajaxError 事件上绑定了错误报告，我想过滤掉这样的消息（或者甚至可能一开始就阻止它们发生）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:03:55.170

针对您的问题“它是否安全”，我的回答是，是的，它是安全的。过去几个月我一直在使用它，它对我很有用。

但是，下面的 api 文档隐藏了有关错误对象的更多信息。我还没有迁移到 jQuery 1.9*，但它仍然很好。

更多信息： [http ://api.jquery.com/jQuery.ajax/#jqXHR](http://api.jquery.com/jQuery.ajax/#jqXHR)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:05:20.107

这将忽略从 ajax 调用返回的所有错误。这是安全的：用户永远不会注意到发生了错误。很难在任何具体示例之外说，但是您的应用程序在执行失败的 AJAX 调用时可能会中断，除非每个处理程序都相应地处理错误。

# asp.net-mvc - Jquery post和MVC出现401未经授权的错误

> ID：11296496
> 
> 赞同：3
> 
> 时间：2012-07-02T15:17:37.027
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery

我正在构建一个使用 Windows 身份验证的 MVC 应用程序。我想通过使用 Jquery 发布到服务器来处理下拉列表更改事件。

下面是我要调用的 Controller 方法：

```
[HttpPost]
public JsonResult UpdateConversion(int conversionId, int? conversionStandardId)
{
    // Some statements here
} 
```

下面是处理下拉列表的 onchange 事件的 javascript 函数：

```
function onConversionValueChange() {
    var input = $(this);
    var conversionId = input.attr('id').replace('ConversionFor', '');
    var selectedValue = input.val();

    if (selectedValue == '') {
        $.post(Conversions._UpdateConversionURL, { conversionId: conversionId }, onConversionValueChanged);
    }
    else {
        $.post(Conversions._UpdateConversionURL, { conversionId: conversionId, conversionStandardId: selectedValue }, onConversionValueChanged);
    }
} 
```

我不认为这些方法有什么问题，因为当我最初加载页面并进行更改时，post 调用会工作多次。但过了一段时间，它在一个事件中调用了 3 次帖子，并在所有事件上返回 401 未经授权的错误。尽管第三次调用似乎成功了。

![通话后错误](../Images/4db26d75f1bad7a5ac4bc935409401ba.png)

任何人都可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T16:31:03.213

这正是 Windows 身份验证 (NTLM) 的工作原理。这是一种质询/响应身份验证方案，客户端发送请求，服务器通过生成随机数来质询客户端以证明他具有正确的凭据，然后客户端进行身份验证。你可以在这里阅读更多：http: [//www.innovation.ch/personal/ronald/ntlm.html](http://www.innovation.ch/personal/ronald/ntlm.html)

通常，一旦通过身份验证，用户代理不需要经历后续请求的所有阶段，并且应该能够直接发送身份验证凭据。

# c# - 法语和德语字符的 XML 编码

> ID：11296498
> 
> 赞同：4
> 
> 时间：2012-07-02T15:17:42.913
> 
> 标签：c#, xml, encoding

我正在尝试将一些文本复制到 xml 文件。问题是所有特殊字符都被转换为符号。我用谷歌搜索并测试了大量代码，但到目前为止没有任何帮助

我想复制一个包含以下行的文本文件

```
<data path="Procédures de support/Achat" name="Gestion dös achats et dés magasins" type="Main Process"  /> 
```

但是，如果我对文本文件使用编码，它可以工作，但是如果我想创建 xml，那么它不会

这是我的代码：

```
string tempFile = Path.GetTempFileName();

            using (var sr = new StreamReader(filePath,Encoding.Default)) // I also tested Encoding.UTF8
            {
                XmlWriterSettings settings = new XmlWriterSettings();
                settings.Encoding = Encoding.Default;
                using (XmlWriter writer = XmlWriter.Create(fileOutput,settings))
                {
                    writer.WriteStartDocument(false);
                    writer.WriteStartElement(startRoot);

                    string line;
                    while ((line = sr.ReadLine()) != null)
                    {
                        writer.WriteRaw(line);
                    }

                    writer.WriteEndElement();
                    writer.WriteEndDocument();
                }
            } 
```

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T08:42:31.613

当我将编码更改为

```
encoding="Windows-1252" 
```

# javascript - 防止分散的图像超出容器 div

> ID：11296499
> 
> 赞同：1
> 
> 时间：2012-07-02T15:17:45.500
> 
> 标签：javascript, html

希望有人可以提供帮助。我最近完成了计算学位，其中一个模块是创建网站。我决定为我朋友的父母创建一个网站，这样一旦课程结束，我就会有一些我可以使用的东西。

无论如何，其中一页是画廊。它使用 javascript 在页面上随机散布图像。问题是我需要保留包含的图像，以便它们不会出现在我页面上的其他项目上（例如标题）。

我们没有在课程中学习 javascript，因为该模块已被替换，所以任何代码都是我在互联网上找到的......

HTML：

```
<div id="imageBlock" style="height:1300px; width:1000px;">
        <a href="img/DUDLEY.jpg" title="Dudley aged ??"><img src="img/DUDLEY.jpg" /></a>
<a href="img/puppies6.jpg"><img src="img/puppies6.jpg" alt="" /></a>
<a href="img/Ruben.jpg" title="Ruben aged ???"><img src="img/Ruben.jpg" /></a>
<a href="img/wendy.jpg" title="Wendy aged ??"><img src="img/wendy.jpg" /></a>
<a href="img/puppies4.jpg"><img src="img/puppies4.jpg" alt="" /></a>
<a href="img/puppies7.jpg"><img src="img/puppies7.jpg" alt="" /></a>
<a href="img/puppies2.jpg"><img src="img/puppies2.jpg" alt="" /></a>
<a href="img/brutus.jpg" title="Brutus aged ??"><img src="img/brutus.jpg" /></a>
<a href="img/puppies3.jpg"><img src="img/puppies3.jpg" alt="" /></a>
<a href="img/puppies5.jpg"><img src="img/puppies5.jpg" alt="" /></a>    
</div> 
```

Javascript：

```
$(document).ready(function(){
    var zindexnr = 1;
    var container = $('#imageBlock');
    $("img").draggable({
        containment: container,
        start: function(event, ui) {
            zindexnr++;
            var cssObj = { 'z-index' : zindexnr };
            $(this).css(cssObj);
        }
    });

$(function() {
        $('#imageBlock a').lightBox();
    });

//Report the X & Y co-ords
$('#imageBlock img').hover(function()
{
    thisX = $(this).css('left')
    thisY = $(this).css('top')

    $('#currentX span').text(thisX);
    $('#currentY span').text(thisY);

})

//Initialise everything
var screenX = 1000, screenY = 750;
var xPos = 0, yPos = 0;

var xCounter=0, yCounter = 0;

var incrementalDelay = 0;

var origImageWidth = 0, origImageHeight = 0
var newImageWidth = 0, newImageHeight = 0

var numImages = $('#imageBlock img').length;  //20

xDivAmount = screenX / numImages;  // 1000/20 = 50
yDivAmount = screenY / numImages;  // 800/20 = 40

//create the position arrays
var posXArray = new Array;
var posYArray = new Array;

//Pre-populate the array
for (i=0; i<numImages; i++) //20 loops
{
    posXArray[i] = xCounter;  //0 on 1st run
    xCounter += xDivAmount;   //+50

    posYArray[i] = yCounter;  //0 on 1st run
    yCounter += yDivAmount;   //+40
}

$('#imageBlock img').each(function(index)
{
    origImageWidth = $(this).width();  //get the full width and height of each image
    origImageHeight = $(this).height();

    percentMultiply = (Math.floor(Math.random()*4)+1)/10  //random percentage multiplier (up to 40%)

    //newImageWidth = Math.floor(origImageWidth * percentMultiply);   //calculate new sizes
    //newImageHeight = Math.floor(origImageHeight * percentMultiply);

    newImageWidth = Math.floor(origImageWidth * 0.6);   //hard code new sizes
    newImageHeight = Math.floor(origImageHeight * 0.6);

    $(this).css({'width':newImageWidth, 'height':newImageHeight})  //apply new calculated sizes

    rotation = Math.floor(Math.random()*30)-15+'deg'; //random rotation
    $(this).css('-webkit-transform' , 'rotate('+rotation+')'); //apply rotation
    $(this).css('-moz-transform' , 'rotate('+rotation+')');

    randX = Math.floor(Math.random()*posXArray.length)  //Create random num 1 - array length
    randY = Math.floor(Math.random()*posYArray.length)

    //Output the content of the array - purely for DEV reasons
    for (i=0; i<posXArray.length; i++)
    {
        xOut=posXArray[i]
        yOut=posYArray[i]
        console.log('X:['+i+'] '+xOut+' Y:['+i+'] '+yOut)
    }

    console.log('Array pos for X: '+randX)
    console.log('Array pos for Y: '+randY)

    xPos = posXArray[randX]; //position = value at random location
    yPos = posYArray[randY];

    console.log('X: '+xPos)
    console.log('Y: '+yPos)

    console.log('')

    //remove the array values for chosen position
    posXArray.splice(randX, 1)
    posYArray.splice(randY, 1)

    //animate to position
    $(this).delay(incrementalDelay).animate({'left':xPos,'top':yPos}, 2000)
    //$(this).animate({'left':xPos,'top':yPos}, 1200)

    incrementalDelay +=80  //increment time delay for each loop

})

});

$(window).load(function ()
{

}); 
```

# web - 在美国人的 SEO 结果中，.com 域名是否会比 .be 域名更具优势

> ID：11296502
> 
> 赞同：1
> 
> 时间：2012-07-02T15:17:50.200
> 
> 标签：web, seo

我要问的问题是，当美国人浏览互联网时，.com 域名是否会比 .be 域名或任何其他域名更具优势，即使该网站完全是用英文编写的。在我的国家比利时，当我在网上搜索时，荷兰语页面会首先弹出，即使有时我会用英语搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:29:54.343

简短的回答：是的，它会影响您的搜索引擎优化。

[这是](http://www.youtube.com/watch?feature=player_embedded&v=GY65Mlgw124)直接来自马特·卡茨本人的视频。

# sql - 转储所有模式和触发器并将它们导入另一个 Oracle 数据库

> ID：11296503
> 
> 赞同：0
> 
> 时间：2012-07-02T15:17:52.073
> 
> 标签：sql, database, oracle, testing, timesten

有没有办法从 oracle 数据库中获取模式和触发器并将它们导入另一个 oracle 数据库（准确地说是 Oracle TimesTen inmemory db）？我正在尝试设置一个内存数据库以用于测试目的，并且需要复制生产模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:32:24.810

看看 Oracle 数据泵。[Oracle 文档在这里](http://docs.oracle.com/cd/B19306_01/server.102/b14215/dp_export.htm)。[蒂姆霍尔在这里](http://www.oracle-base.com/articles/10g/oracle-data-pump-10g.php)有一篇文章。您也可以考虑使用网络导入功能，[如此处所述](http://www.orafaq.com/wiki/Datapump#Network_import)。

# asp.net - Web development in .NET - Which techniques to use to build and consume your own API?

> ID：11296506
> 
> 赞同：2
> 
> 时间：2012-07-02T15:18:08.003
> 
> 标签：asp.net, asp.net-mvc, webforms, asp.net-web-api

We are trying to make up our minds where to start with a new project of upgrading our website. As we have upgraded our old back-end system in .NET we really want to keep working in C# for many reasons like (but not limited to) TFS integration, the development environment, and testing, Azure integration, integrated security, proper documentation, etc.

What we also know we want to accomplish is to start with a web based API and consume our own services, first on a regular website, later also on mobile devices. We have been playing around with WCF (OData enabled) Data services and the new Web API which comes with MVC4\.

My personal preference is working with the Data Services, as more of the OData standard is implemented, like the $select option, which makes the API we would create very simple and extremely useful, and we can ensure we only request the data we use from the client, in JSON, XML, and probably other formats we will not immediately use.

Now as our first project will be to implement a website that consumes either the Data service, or the Web API, which frameworks should we look at to consume the services from the client side. Ideally we would like to serve the website from another machine and have the client to connect to the API using Ajax (or JSONP) to read from the service (in a later stage also the CUD actions).

For creating the new website we want to buy a set of tools, and we have evaluated Telerik, DevExpress and Ext.NET, but none of these seem as compatible with either of these services as they claim on their site (but perhaps I am missing something). We want to try to stay away of creating our own javascript.

I guess my questions are the following:

*   Which of the techniques for the API is better and why? DataService seems to be quite old - will it still be supported in the future? Is there a third option I should evaluate?
*   Did someone choose to take on a similar project and can you share your experiences?
*   Which of the frameworks of Telerik, DevExpress, Ext.NET or any other is more useful to consume any of these APIs from the client side?
*   Should we use WebForms or MVC and why?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:48:59.217

对于我们最近做的一个项目，我们完全避免使用商业第三方库 - 出于各种原因：我们对它们与开源库的比较没有留下深刻印象（出于明显的原因不是 GPL，但主要是 BSD/Apache），但也因为我们尝试做的很多事情都非常简单，构建我们自己的平台与学习现有平台然后花时间让它做我们想做的事情一样快。

对于我们的后端 API，我们使用了针对 WCF 编写的完全 RESTful 服务。它使用我们自己的 POCO 数据合约对象返回纯粹而简单的 XML——这意味着我们可以非常快速轻松地以多种语言（包括 .NET、PHP 和使用 jQuery 的 Javascript）开发我们自己的客户端。避免像瘟疫一样使用 SOAP。然而，我们花了很长时间才让 WCF 以适当的 RESTful 方式工作 - 如果我们从一开始就做这个项目，那么我们可能会编写自己的 RESTful Web 服务器，它位于 HTTP.SYS 之上，而不是像这样插入 IIS它有时会不必要地使事情复杂化（例如，我们的服务使用 HTTP 基本身份验证进行访问控制，这是 IIS 喜欢介于两者之间的东西）。然后还有 IIS 和 WCF 将其解决的“基本 URL”问题。IIS 中的 WCF 需要在用户友好性方面开展工作。

对于客户端，我们可以选择允许 Javascript 直接连接到服务，但我们没有看到真正的性能提升，最后我们决定让脚本通过网站自己的 AJAX 接口完成所有工作。此外，暴露后端数据源或 API 会暴露实现细节，并不是好的软件工程。

由于我上面给出的原因，我们避开了客户端框架。如果您擅长 XHTML/CSS，那么您可以轻松编写自己的基于 Web 的小部件，并确保它们是为您的应用程序构建的。我见过太多的应用程序只是将 Telerik/DevExpress/etc 控件洒在一个页面上，结果是由于所有导入的客户端脚本文件和资源而导致缓慢、繁琐的混乱。

WebForms 已死，而 ASP.NET MVC 是未来。您将针对它编写的代码将更加清晰、有条理和连贯。删除“控件”、生命周期、视图状态都简化了事情并消除了许多 ASP.NET 的巫术（例如在 Page_Load 之后添加的控件会发生什么）。我再也不想在我的生活中看到 WebResource.axd（它使在旅途中调试和自定义客户端脚本变得非常困难）。

坏消息是，如果您或您的团队没有太多以“正确方式”做事的经验（即不使用 HTML 的可视化设计器，做过多的 DataBinding，或者只是`<asp:DataGrid>`在页面上乱搞），那么您将遇到困难在你改掉坏习惯时挣扎。

HTH。

# google-maps - Google Maps API v 3：热图创建问题

> ID：11296510
> 
> 赞同：4
> 
> 时间：2012-07-02T15:18:29.020
> 
> 标签：google-maps, google-maps-api-3, heatmap

我正在尝试使用 google.maps.visualization 库。我已经在我的代码中包含了这个库，而且大部分似乎都在工作，但是当我开始创建热图时，我收到一个关于“位置 96677 的值无效：[object Object]”的错误. 我不确定这个问题是什么，但错误报告包含一行 Google API 代码：

```
var c;
M(b,function(b,e){
    try{
        a(b)||(c="Invalid value at position "+(e+(": "+b)))
    }catch(f){
        c="Error in element at position "+(e+(": ("+(f[Pb]+")")))}});c&&aa(ja(c));return j
    }
} 
```

我稍微浏览了 API 代码，但很难在其中找到任何有用的东西。我用来创建热图图层的代码如下：

```
$.ajax({
    url: "../Yield/getYieldData.php",
    success: function(text) {
        var data;
//      var yieldPoints = new google.maps.MVCArray();
        var yieldPoints = [];

        try{
            data = $.parseJSON(text);
        } catch (e) {
            alert("ERROR: " + e);
        }

        for(i=0; i < data.points.length; i++) {
//          yieldPoints.push({ location: new google.maps.LatLng(data.points[i].lat, data.points[i].lon), weight: data.points[i].yield });
            yieldPoints[i] = { location: new google.maps.LatLng(data.points[i].lat, data.points[i].lon), weight: data.points[i].yield };
        }
        var heatMap = new google.maps.visualization.HeatmapLayer({ data: yieldPoints });
        heatMap.setMap(map);
    }
}); 
```

我不确定问题出在哪里，但我使用 Google API 文档作为模板，如[https://developers.google.com/maps/documentation/javascript/layers#JSHeatMaps](https://developers.google.com/maps/documentation/javascript/layers#JSHeatMaps)（大约三分之一在页面下方，在“添加加权数据点”标题下）。如您所见，我还尝试将数组创建为 MVCArray，如该文档中所述，但这并没有改变任何内容。如果相关，这里是从“getYieldData.php”调用接收的 JSON 数据的简短示例：

`{"points":[{"lat":"38.1513366000","lon":"-97.4341659000","yield":"0"},{"lat":"38.1513748000","lon":"-97.4341125000","yield":"0"},{"lat":"38.1513938000","lon":"-97.4341125000","yield":"0"},{"lat":"38.1493263000","lon":"-97.4339447000","yield":"0"},{"lat":"38.1493339000","lon":"-97.4339447000","yield":"0"},{"lat":"38.1493377000","lon":"-97.4339447000","yield":"0"},{"lat":"38.1483650000","lon":"-97.4358291000","yield":"0"},{"lat":"38.1484031000","lon":"-97.4358062000","yield":"0"},`

希望这是足以让某人看到问题所在的信息 - 任何帮助都将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T18:15:28.323

`weight`应该是一个`Number`，不是一个`String`。所以你有2个选择：

*   避免 JSON 中的引号：

    ```
    {"lat":"38.1513366000","lon":"-97.4341659000","yield":0}
                  //no quote wraps    'yield' ------------^ 
    ```

*   投射`yield`到`Number`：

    ```
    yieldPoints[i] = { 
               location: new google.maps.LatLng(data.points[i].lat, data.points[i].lon),
               weight: +data.points[i].yield };
    };                 ^----- plus('+') is the fastest way for converting string to number 
    ```

# objective-c - 如何让横向启动图像在启动时实际出现？

> ID：11296515
> 
> 赞同：1
> 
> 时间：2012-07-02T15:18:38.407
> 
> 标签：objective-c, ios, ipad

我已经阅读并实践[了这里](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html#//apple_ref/doc/uid/TP40007072-CH6-SW12)的所有内容，一个关于启动图像的 Apple 文档。

我的应用程序支持自动旋转，根据上面的文档，如果您为 iPad 指定横向启动图像，它将在应用程序以横向模式启动时使用。

但我从未见过这在实践中真正发生过。iPad 可以面向横向，但始终显示纵向启动图像。这是我在 iOS 4 和 5 以及几个不同应用程序上的经验。

要让横向启动图像实际出现需要什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:28:39.780

在您的目标设置上，查看 iPad 部署信息。确保您选择了支持的设备方向，包括横向。然后在启动图像下，您是否将图像拖到该字段中？如果没有，请这样做。我从来没有遇到过问题。

# jquery - Jquery Mobile List View on Blackberry torch

> ID：11296518
> 
> 赞同：0
> 
> 时间：2012-07-02T15:18:41.307
> 
> 标签：jquery, blackberry

For some reason my Blackberry Torch (OS 6.0 Bundle 2647) DOES NOT render listview in Jquery Mobile 1.1.1

Blackberry Bold works fine.

Any ideas if Listview and Persistent headers are supported in Blackberry Torch ?

Thanks

RG

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:08:14.813

你是如何创建列表视图的？你在使用列表字段吗？9800 处于 OS 6 级别，9900 处于 OS 7 级别，所以我怀疑 Jquery 使用的是 OS 7 上可用的 API，而不是 OS 6 上的 API。

谢谢

纳文 M

# vba - 使用索引/项目编号循环遍历 Scripting.Dictionary

> ID：11296522
> 
> 赞同：41
> 
> 时间：2012-07-02T15:18:55.910
> 
> 标签：vba, dictionary

与[此问题](https://stackoverflow.com/a/9836919/698590)类似，在 VBA 中使用`Scripting.Dictionary`对象时，以下代码的结果是意外的。

```
Option Explicit

Sub test()

    Dim d As Variant
    Dim i As Integer
    Dim s As String
    Set d = CreateObject("Scripting.Dictionary")

    d.Add "a", "a"
    Debug.Print d.Count ' Prints '1' as expected

    For i = 1 To d.Count
        s = d.Item(i)
        Debug.Print s ' Prints ' ' (null) instead of 'a'
    Next i

    Debug.Print d.Count ' Prints '2' instead of '1'

End Sub 
```

使用从零开始的索引，可以实现相同的结果：

```
For i = 0 To d.Count - 1
    s = d.Item(i)
    Debug.Print s
Next i 
```

观察对象，我实际上可以看到它有两个项目，新添加的键是`1`，添加 from `i`。如果我将此循环增加到更高的数字，则字典中的项目数会增加，每个循环一次。

*我已经在 Office/VBA 2003、2010 和 2013 中对此进行了测试。它们都表现出相同的行为，我希望其他版本 (2007) 也会如此。*

**我可以使用其他循环方法来解决这个问题，但是当我尝试存储对象并且在线上遇到对象预期错误**时，这让我措手不及`s = d.Item(i)`。

为了记录，我知道我可以做这样的事情：

```
For Each v In d.Keys
    Set o = d.item(v)
Next v 
```

但我更好奇为什么我似乎无法按数字遍历项目。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-02T15:31:26.977

根据[该`Item`物业](http://msdn.microsoft.com/en-us/library/84k9x471%28v=vs.84%29.aspx)的文件：

> 设置或返回 Dictionary 对象中指定键的项。

在你的情况下，你没有一个项目的关键是`1`这样做：

```
s = d.Item(i) 
```

实际上在您的字典中创建了一个新的键/值对，并且该值是空的，因为您没有使用可选`newItem`参数。

Dictionary 还具有允许循环遍历索引的[`Items`方法：](http://msdn.microsoft.com/en-us/library/8aet97f2%28v=vs.84%29)

```
a = d.Items
For i = 0 To d.Count - 1
    s = a(i)
Next i 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-12-05T03:37:12.100

添加到 assylias 的答案 - assylias 向我们展示了 D.ITEMS 是一种返回数组的方法。知道了这一点，我们就不需要变体数组 a(i) [参见下面的警告]。我们只需要使用正确的数组语法。

```
For i = 0 To d.Count - 1
    s = d.Items()(i)
    Debug.Print s
Next i() 
```

KEYS 的工作方式相同

```
For i = 0 To d.Count - 1
    Debug.Print d.Keys()(i), d.Items()(i)
Next i 
```

此语法对于 SPLIT 函数也很有用，这可能有助于使这一点更清晰。SPLIT 还返回一个下界为 0 的数组。因此，以下打印“C”。

```
Debug.Print Split("A,B,C,D", ",")(2) 
```

SPLIT 是一个函数。它的参数在第一组括号中。方法和函数总是使用第一组括号作为参数，即使不需要参数。在示例中，SPLIT 返回数组 {"A","B","C","D"}。由于它返回一个数组，我们可以使用第二组括号来标识返回数组中的一个元素，就像我们使用任何数组一样。

**警告**：这种较短的语法在遍历整个字典时可能不如使用变体数组 a() 有效，因为较短的语法在每次迭代时都会调用字典的 Items 方法。较短的语法最适合从字典中按数字提取单个项目。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-12T10:41:34.990

使用`d.Keys()(i)`方法是一个非常糟糕的主意，因为在每次调用时它都会重新创建一个新数组（您将显着降低速度）。

这是`Scripting.Dictionary`来自@TheTrick 的称为“哈希表”类的类似物，它支持这样的枚举器：[http ://www.cyberforum.ru/blogs/354370/blog2905.html](http://www.cyberforum.ru/blogs/354370/blog2905.html)

```
Dim oDict As clsTrickHashTable

Sub aaa()
    Set oDict = New clsTrickHashTable

    oDict.Add "a", "aaa"
    oDict.Add "b", "bbb"

    For i = 0 To oDict.Count - 1
        Debug.Print oDict.Keys(i) & " - " & oDict.Items(i)
    Next
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-07T04:04:14.053

我尝试了 Craig Hatmaker 的代码，通过遍历索引 i 来更改字典 d 中的值。`d.Items(i) = s`不工作。但`d.Item(d.Keys(i)) = s`奏效了。换句话说：您需要通过索引获取密钥并使用密钥来访问该项目。请注意，我先尝试了带有 s 的 Items()，然后尝试了没有 s 的 Item(Keys)。不确定这是否是好的编程并且在每种情况下都有效，但也许它可以帮助某人。

# python - 如何从当前列中减去前一行列并使用 numpy 在数组中创建一个具有此值的新维度？

> ID：11296523
> 
> 赞同：1
> 
> 时间：2012-07-02T15:19:07.503
> 
> 标签：python, arrays, numpy

我想要做的是获取我当前的数组并从当前行列值中减去前一行列值。我还想获取结果并将其作为新维度添加到数组中。

示例数组：

```
[[1,2,4,7,9,15], [3, 4,3,5,10,2], [5,6,56,7,20,1]] 
```

假设我想对第 4 列执行此操作，因此我希望输出是一个如下所示的数组：

```
[[1,2,4,7,9,15,0], [3, 4,3,5,10,2,-2], [5,6,56,7,20,1,2]] 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:46:35.210

您可以使用`np.diff`, 和`concatenate`选项的组合来执行此操作，如下所示：

```
import numpy as np
myarray = np.array([[1,2,4,7,9,15], [3, 4,3,5,10,2], [5,6,56,7,20,1]])
#your differences appears to be wraparound, so we repeat the last row at the top:
myarray_wrap = np.vstack((myarray[-1],myarray))
#this gets the diffs for all columns:
column_diffs = np.diff(myarray_wrap, axis=0)
#now we add in only the the column_diff that we want, at the end:
print np.hstack((myarray, column_diffs[:,3].reshape(-1,1)))
#Output:
[[ 1  2  4  7  9 15  0]
 [ 3  4  3  5 10  2 -2]
 [ 5  6 56  7 20  1  2]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:27:15.600

这个 Python 代码应该可以解决您的问题。

```
previous = None
for row in rows:
 current = row[4]
 row.append( 0 if previous == None else current - previous )
 previous = current 
```

# java - Java JComboBox.setSelectedItem() 不更新下拉列表

> ID：11296529
> 
> 赞同：-1
> 
> 时间：2012-07-02T15:19:25.690
> 
> 标签：java, swing, jcombobox, selecteditem

我想让功能更新当前项目`JComboBox`：

```
@Override
public void updateId(String id) {
    boolean old = notify;
    notify = false;
    comboBox.setEditable(true);
    comboBox.setSelectedItem(id);
    comboBox.setEditable(false);
    notify = old;
} 
```

结果是这样的：

![图片](../Images/5d65e1c6ff6d5fb7bb87ca6c15df3b77.png)

1.  ComboBox 绑定到文本框，
2.  我更改了文本框值，它正在调用 updateId()，
3.  扩展组合框，
4.  选择已更改的项目，

组合的下拉列表不反映对所选项目所做的更改；在给定的示例中，下拉列表底部应该有“xxx”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T23:43:11.040

我误解了`JComboBox.setSelectedItem()`。

当组合框可编辑时，听起来它应该覆盖位于模型的选定索引下的项目，但它只是覆盖显示的值并且不触及模型。

这个做的工作：

```
 @Override
    public void updateId(String id) {
        boolean old = notify;
        notify = false;
        comboBox.setEditable(true);

        DefaultComboBoxModel<String> model = (DefaultComboBoxModel<String>) comboBox.getModel();
        int selectedIndex = comboBox.getSelectedIndex();
        model.removeElementAt(selectedIndex);
        model.insertElementAt(id, selectedIndex);
        comboBox.setSelectedIndex(selectedIndex);

        comboBox.setEditable(false);
        notify = old;
    } 
```

# jquery - jQuery .on('click') 与 .click() 和 .delegate('click')

> ID：11296530
> 
> 赞同：17
> 
> 时间：2012-07-02T15:19:34.790
> 
> 标签：jquery

我习惯使用`.click()`and `delegate('click')`，所以当我读到这两个都在最新版本的 jQuery 中被弃用时，我以为我已经阅读了它，但我有点摸不着头脑。

[这里](http://api.jquery.com/on/)的文档似乎表明这是[.live()](http://api.jquery.com/live/)和[.delegate()](http://api.jquery.com/delegate/)的替代品，但是.click( [)](http://api.jquery.com/click/)和[.bind()](http://api.jquery.com/bind/)具有不同的行为，即绑定到当前存在的对象，而其他对象在 DOM 的整个生命周期中，绑定到与选择器模式匹配的任何对象。

在大多数情况下，这不会有很大的不同，但是当动态地将元素添加到 DOM 时，这是一个重要的区别。与旧模式匹配的新对象*不会*使用 绑定到`click`事件的侦听器`.click()`，但*会*使用`.delegate()`.

我的问题是，如何使用该`.on()`方法来复制预先存在的`.delegate()`和的行为`.bind()`？还是未来的一切都朝着`.delegate()`风格发展？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-02T15:26:25.927

仍然支持这两种模式。

以下调用`bind()`：

```
$(".foo").bind("click", function() {
    // ...
}); 
```

可以直接转换成如下调用`on()`：

```
$(".foo").on("click", function() {
    // ...
}); 
```

以及以下调用`delegate()`：

```
$("#ancestor").delegate(".foo", "click", function() {
    // ...
}); 
```

可以转换为以下调用`on()`：

```
$("#ancestor").on("click", ".foo", function() {
    // ...
}); 
```

为了完整起见，以下调用`live()`：

```
$(".foo").live("click", function() {
    // ...
}); 
```

可以转换为以下调用`on()`：

```
$(document).on("click", ".foo", function() {
    // ...
}); 
```

* * *

## 更新：

除了`on`event，其余的事件在不同的 jQuery 版本中被弃用。

*   `bind`- 不推荐使用的版本：3.0
*   `live`- 不推荐使用的版本：1.7，删除：1.9
*   `delegate`- 不推荐使用的版本：3.0

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T15:27:40.350

该`on`方法可以替换两者`bind`，`delegate`具体取决于它的使用方式（也`click`可以`bind`替换它）：

```
.click(handler) == .on('click', handler)

.bind('click', handler) ==  .on('click', handler)

.delegate('click', '#id', handler) == .on('click', '#id', handler) 
```

`click`,`delegate`或`bind`方法都没有进入已[弃用的页面](http://api.jquery.com/category/deprecated/)。我怀疑这种`click`方法永远不会。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T15:23:17.093

您可以从源代码中推断出别名的用法。

```
console.log($.fn.delegate);
function (a, b, c, d) {
    return this.on(b, a, c, d);
}

console.log($.fn.bind);
function (a, b, c) {
    return this.on(a, null, b, c);
} 
```

该[文档](http://api.jquery.com/delegate/)还提供了使用示例：

```
$(elements).delegate(selector, events, data, handler);  // jQuery 1.4.3+
$(elements).on(events, selector, data, handler);        // jQuery 1.7+ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-02T15:23:30.593

[`.delegate()`](https://github.com/jquery/jquery/blob/master/src/event.js#L954)并[`.bind()`](https://github.com/jquery/jquery/blob/master/src/event.js#L970)使用`on`方法。也是`.click()`一个[捷径](https://github.com/jquery/jquery/blob/master/src/event.js#L1020)。_`.on()`

# oracle - Oracle PL/SQL 如何找到这个语法错误？

> ID：11296535
> 
> 赞同：0
> 
> 时间：2012-07-02T15:20:02.437
> 
> 标签：oracle, plsql

在 Oracle PL/SQL 中，我有这个编码，它给了我编译器错误。我不知道为什么，看起来我拥有一切......

请帮忙。

谢谢

```
 ORA-06550: line 6, column 5:
PLS-00103: Encountered the symbol "CREATE" when expecting one of the following:

   ( begin case declare end exit for goto if loop mod null
   pragma raise return select update while with <an identifier>
   <a double-quoted delimited-identifier> <a bind variable> <<
   continue close current delete fetch lock insert open rollback
   savepoint set sql execute commit forall merge pipe purge
06550\. 00000 -  "line %s, column %s:\n%s"
*Cause:    Usually a PL/SQL compilation error.
*Action: 
```

代码是

```
begin
  for c in (select id from tmp_A)
  loop
    dbms_output.put_line(c.id);

    create table tmp_c as 
    select B.name from tmp_B B where B.id = c.id;   

    drop table tmp_c;
  end loop;
end;
/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T15:25:34.963

您不能直接在 PL/SQL 中调用 ddl 语句（CREATE、DROP、ALTER 等）。但是，您可以使用执行立即语句：

```
begin
  EXECUTE IMMEDIATE 'CREATE TABLE MYTABLE(DT DATE)';
end; 
```

看：

```
http://www.orafaq.com/wiki/PL/SQL_FAQ#Can_one_call_DDL_statements_from_PL.2FSQL.3F 
```

# php - 时间验证的正则表达式

> ID：11296536
> 
> 赞同：11
> 
> 时间：2012-07-02T15:20:05.847
> 
> 标签：php, regex, time

我想用正则表达式验证时间。我创建了以下表达式：

```
'#^([01][0-9])|(2[0-4])(:[0-5][0-9]){1,2}$#' 
```

这是问题所在：

```
<?php
var_dump(preg_match('#^([01][0-9])|(2[0-4])(:[0-5][0-9]){1,2}$#', '14:25'));
// Returns 1 (OK)

var_dump(preg_match('#^([01][0-9])|(2[0-4])(:[0-5][0-9]){1,2}$#', '25:25'));
// Returns 0 (OK)

var_dump(preg_match('#^([01][0-9])|(2[0-4])(:[0-5][0-9]){1,2}$#', '14:2555'));
// Returns 1 (instead of 0 as I would like to get)
?> 
```

有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-02T15:30:46.513

24 小时格式正则表达式模式中的时间：

```
([01]?[0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])? 
```

24 小时时钟格式是从 0-23 或 00-23 开始，然后是分号 (:)，然后是 00-59（可选的是分号 (:)，然后是 00-59）。

描述 ：

```
(                  # start of group #1
  [01]?[0-9]       # start with 0-9,1-9,00-09,10-19
  |                # or
  2[0-3]           # start with 20-23
)                  # end of group #1
:                  # follow by a semi colon (:)
[0-5][0-9]         # follow by 0..5 and 0..9, which means 00 to 59
(                  # start of group #2
  :                # follow by a semi colon (:)
  [0-5][0-9]       # follow by 0..5 and 0..9, which means 00 to 59
)                  # end of group #2
?                  # optional third part 
```

匹配时间格式：

```
01:00, 02:00, 13:00,
 1:00,  2:00, 13:01,
23:59, 15:00,
00:00,  0:00,
14:34:43, 01:00:00 
```

不匹配时间格式：

```
 24:00             # hour is out of range [0-23]
 12:60             # minute is out of range [00-59]
  0:0              # invalid format for minute, at least 2 digits
 13:1              # invalid format for minute, at least 2 digits
  0:00:0           # invalid format for seconds, at least 2 digits
101:00             # hour is out of range [0-23] 
```

例子 ：

```
var_dump(preg_match('#^[01]?[0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?$#', '14:25'));    // OK
var_dump(preg_match('#^[01]?[0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?$#', '25:25'));    // KO
var_dump(preg_match('#^[01]?[0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?$#', '25:30'));    // KO
var_dump(preg_match('#^[01]?[0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?$#', '14:2555'));  // KO
var_dump(preg_match('#^[01]?[0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?$#', '14:65'));    // KO
var_dump(preg_match('#^[01]?[0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?$#', '14:59'));    // OK
var_dump(preg_match('#^[01]?[0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?$#', '14:34:43')); // OK 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-02T15:35:33.270

```
^(([0-1][0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?)$ 
```

这将从 00:00 到 23:59 和 00:00:00 到 23:59:59。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-02T15:36:04.007

Alternation 是一个低优先级运算符，因此将其包装在一个非捕获组中：

```
 #^(?:([01][0-9])|(2[0-3]))(:[0-5][0-9]){1,2}$#
      +++                    + 
```

[在此处](http://regexpal.com/?flags=gm&regex=%5E%28?%3a%28%5B01%5D%5B0-9%5D%29%7C%282%5B0-4%5D%29%29%28%3a%5B0-5%5D%5B0-9%5D%29%7B1,2%7D%24&input=14:25%0D%0A25:25%0D%0A14:2555%0D%0A14:25:55)查看演示。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-27T13:15:39.503

```
/(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?/ 
```

这也将允许 00:00 或 00:00:00，这里的其他一些不允许。

它还将时间限制为 00:00:00 到 23:59:59 或 23:59，其他一些允许 24:00 或 25:00 等。

# javascript - Moving cursor position in contentEditable div

> ID：11296537
> 
> 赞同：2
> 
> 时间：2012-07-02T15:20:08.800
> 
> 标签：javascript, jquery

I'm trying to move the cursor of a content editable div to the end of the line. By default, it goes to the beginning of the line.

I'm using:

```
var r = $("#mydiv").createTextRange(); 
r.moveStart("character", l); 
r.moveEnd("character", l);      
r.select(); 
```

The error I get:

```
Uncaught TypeError: Object [object Object] has no method 'createTextRange' 
```

I've seen this question posted around, but I still can't seem to perform createTextRange(). Any suggestions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:25:07.550

[http://help.dottoro.com/ljouisvm.php](http://help.dottoro.com/ljouisvm.php)

大多数浏览器不再支持 createTextRange() 方法。

您可以用样式化的 textarea 替换该 div 或在 div 内放置一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:59:05.427

这是一个 jQuery 插件，您可以尝试一下。

一个小型跨浏览器 JavaScript 库，用于获取和操作 HTML 元素中的选择。

[http://code.google.com/p/rangyinputs/](http://code.google.com/p/rangyinputs/)

# java - Java：如何从二维双精度数组中获取指定坐标的整数 (x,y)

> ID：11296542
> 
> 赞同：2
> 
> 时间：2012-07-02T15:20:24.823
> 
> 标签：java

我有一个二维双数据数组，比如 [100][100]。其中大部分都填充了“0.0”，而内部某处有一块“1.0”。我做了一个循环，能够找到“1.0”，但不知道如何从中提取 x 和 y（不是“1.0”的值）。

我花了几个小时寻找解决方案。甚至尝试过 Arrays.binarySearch 方法，但一直给我错误。下面是我循环遍历数组的代码。

```
int findX() {
  for (int i = 0; i < data.length; i++) {
    for (int j = 0; j < data[i].length; j++) {
      if (data[i][j] == 1.0) {
        int x = i;
      }
      break; // stop search once I found the first '1.0'
             // as there are a couple of them
    }
  }
  return x; 
```

请帮助，非常感谢任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:30:15.363

您可以定义自己的类型`Pair`：

```
public class Pair {
    private int x;
    private int y;

    public Pair(int x, int y) {
        this.x = x;
        this.y = y;
    }

    public int getX() {
        return x;
    }

    public int getY() {
        return y;
    }
} 
```

如果您想将其用于其他类型，您也可以将其设为通用。

然后从您的搜索方法中返回此类型的对象：

```
public Pair search(double[][] data) {
    int x = -1;
    int y = -1;
    for (int i = 0; i < data.length; i++) {
        for (int j = 0; j < data[i].length; j++) {
            if (data[i][j] == 1.0) {
                x = i;
                y = j;              
                break;
            }

        }
    }
    return new Pair(x, y);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:23:02.637

使用类似这样的东西，它会返回一个[Point](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Point.html)对象：

```
public Point getPoint( double[][] data) {
    for (int i = 0; i < data.length; i++) {
        for (int j = 0; j < data[i].length; j++) {
            if (data[i][j] == 1.0) {
                return new Point(i, j); // Once we found the value, return
            }
        }
    }
    return null;
} 
```

这会遍历数据（就像您一样），除非它在找到第一个`1.0`. 当找到该值时，它会停止。然后，返回一个表示坐标的对象，否则返回 null。如果您愿意，可以返回一个整数数组。

现在，当您调用它时，您检查它是否返回`null`，如果返回，则没有`data`任何`1.0`地方。否则，从对象中获取 X 和 Y 坐标。

```
Point p = obj.getPoint( data);
if( p != null)
    System.out.println( p.getX() . ', ' . p.getY()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T15:24:53.677

所以当你考虑这个循环时，外部或内部循环是 x 坐标，另一个循环是 Y 坐标。

00100 00100 00100

```
 int yCord;
 int xCord;
 for int y=0;y<3;y++
 {// this loop goes up and down so its the y
       for (int x=0;x<5;x++)
       {// this loop goes left and right so its the x value
            yCord=y;
            xCord=x;
       }
  } 
```

下面的旁注是如何将 double 转换为 int。

```
 double myDouble = 420.5;
    //Type cast double to int
    int i = (int)myDouble;

    // to go from int to double below
    int j=5;
    double output;
    output=(double)j; 
```

所以你的位置在 yCord 和 xCord 中，有意义吗？

# c - 具有多个文件的程序的 C 资源

> ID：11296545
> 
> 赞同：1
> 
> 时间：2012-07-02T15:20:35.023
> 
> 标签：c, typedef, header-files

我正在开发一个相当简单的 C 程序，其中包含一个主文件 vector.c、vector.h，但我遇到了这些问题：

*   如果在两个 c 文件中都需要它提供的声明，我应该将 .h 文件的包含放在哪里？
*   我应该把所有 3 个文件中需要的 typedefs 放在哪里？

无论我做什么，似乎 gcc 都会抱怨。

任何人都可以回答这些问题，或者指向我可以阅读的资源吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:23:04.060

> 如果在两个 c 文件中都需要它提供的声明，我应该将 .h 文件的包含放在哪里？

将`include`语句放入需要标头定义的每个 C 文件中，在您的情况下，在*main.c* **和** *vector.c*中。使用[*包含保护*](https://stackoverflow.com/questions/10990488/how-to-include-header-files-more-clearly-in-c/10990521#10990521)总是一个好主意，如果编译器抱怨符号已经定义或多次定义，则需要使用。

> 我应该把所有 3 个文件中需要的 typedefs 放在哪里？

这取决于：

*   如果这些`typedefs`对于您的矢量 API 是必需的或特定于您的，则将它们放在*vector.h*中。
*   如果它们与您的矢量接口无关，即它们特定于*main.c*，那么它们可能属于那里。
*   但是您提到所有 3 个文件都需要它们，因此如果它们`typedefs` *不是*矢量接口的一部分，那么它们可能属于第三个头文件，例如*common.h 之*类的文件，也可能包含在其他所有文件中文件中的项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T15:24:06.243

很自然：

*   您包括需要它的任何 C 文件的标头。
*   `typedef`s 是声明，所以它们非常适合放在头文件中。

有时，如果您的标头包含标头，您可能需要防止多重包含，但对于您的情况，这不是必需的。请记住，每个 C 文件都是自行编译的。当然，永远不要`#include`与 C 文件一起使用。

# coldfusion - Cfparam for structure keys not working

> ID：11296546
> 
> 赞同：1
> 
> 时间：2012-07-02T15:20:39.657
> 
> 标签：coldfusion, structure

```
<cfparam name="airInfo.leaving"     type="struct" default="#structNew()#">
<cfparam name="flightInfo.depart"   type="string" default="departing">
<cfparam name="flightInfo.arrive"   type="string" default="arriving">

<cfset flightInfo   = airInfo.leaving>
<cfset fromInfo     = flightInfo.depart>
<cfset arriveInfo   = flightInfo.arrive>

<cfdump var="#flightInfo#"> 
```

This should work... I think, but I keep getting an error saying depart is undefined in flightInfo. I know I could use if structKeyExists() but this is just a snippet of a larger application. I can't be checking all the variables in that mannor, and really need to use cfparam. What am I missing from this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T15:39:37.413

也许第二个和第三个 cfparams 应该设置 airInfo.depart 和 airInfo.arrive 而不是 flighInfo.depart 和 flightInfo.arrive。

编辑：我应该提到您的 flightInfo 变量被您在第一个 cfparam 中创建的空结构覆盖，这就是您收到未定义错误的原因。

如果您的意图是使用离开和到达的默认航班信息，您应该在 airInfo.leaving 中设置这些变量，就像在 airInfo.leaving.depart 和 airInfo.leaving.arrive 中一样，然后将 airInfo.leaving 分配给 flightInfo。

# javascript - Redirect after clicking Share Button on Facebook

> ID：11296548
> 
> 赞同：1
> 
> 时间：2012-07-02T15:20:48.140
> 
> 标签：javascript, facebook, button, share

I'm trying to figure out how to redirect users to a different page in a Page Tab Application similar to [this one](https://www.facebook.com/cawineclub?sk=app_260001524093453)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:35:16.360

您可以使用[Feed Dialog](https://developers.facebook.com/docs/reference/dialogs/feed/)并设置`redirect_uri`参数 – `The URL to redirect to after the user clicks a button on the dialog.`。

使用以下 Javascript 代码，您可以做到这一点：

```
 FB.init({appId: "YOUR_APP_ID", status: true, cookie: true});

    function postToFeed() {

      // calling the API ...
      var obj = {
        method: 'feed',
        link: 'URL_TO_SHARE',
        picture: 'SHARING_PICTURE',
        name: 'SHARING_TITLE',
        caption: 'SHARING_CAPTION',
        description: 'SHARING_DESCRIPTION',
        redirect_uri: 'URL_TO_REDIRECT_AFTER_ACTION'
      };

      function callback(response) {
        // Some callback action ...
      }

      FB.ui(obj, callback);
    } 
```

然后将`postToFeed`函数绑定到按钮或链接的单击事件。

# objective-c - 使用 [self setVariable:value] vs variable = value

> ID：11296554
> 
> 赞同：2
> 
> 时间：2012-07-02T15:20:55.223
> 
> 标签：objective-c

在Objective C中，我想使用什么场景`[self setVariable:value];`而不是`variable = value;`

似乎做一个自我设置我为自己节省了几行代码，但还有什么其他优点呢？另外，我什么时候不想做自我设定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T15:30:46.850

**编辑**：我应该澄清一下，我在下面引用的内容严格涉及作为属性的变量。`self.variable = value`如果一个变量只是一个 ivar，那么or之间没有区别，除了如果它只是一个 ivar 甚至不会编译`variable = value`的事实，在这种情况下你需要使用`self.variable = value``self->variable = value`

打电话

```
[self setVariable:value]; 
```

和调用一样

```
self.variable = value; 
```

然而，**这**与

```
variable = value; 
```

前两种情况使用综合`setVariable`方法（或您自己定义的方法）。您想要使用它的原因是确保您对对象保持正确的保留计数。

例如，一个简单的属性，例如：

```
@property (retain) NSString *myString; 
```

获取一个自动生成的 set 函数，如下所示：

```
-(void) setMyString:(NSString*)other
{
    myString = [other retain];
} 
```

如果你只是打电话

```
myString = otherString; 
```

代码中的其他地方，则`myString`没有正确保留，因此如果`otherString`被释放，则指向该对象的指针不再有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T15:28:51.013

使用setter而不是给变量赋值的主要原因是为了实现封装。

一些好处是 -

1.  获取或设置属性的封装允许以后更容易地添加附加功能（如验证）。
2.  隐藏实例变量。
3.  有效的内存管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T15:28:39.250

在持有需要保留和释放的对象时，您肯定需要使用它以符合 Objective-C 内存管理模型。例如：

我的对象.h：

```
@interface MyObject : NSObject
{
    NSString *_name;
}
@property (retain, nonatomic, readwrite) NSString *name;

@end 
```

我的对象.m：

```
@implementation MyObject

@synthesize name = _name;

- (id)init
{
    self = [super init];
    if (self != nil)
    {
        self.name = [NSString stringWithFormat:@"name:%d", 12];
    }
    return self;
}

- (void)dealloc
{
    self.name = nil;
    [super dealloc];
}

@end 
```

对于, 等不需要内存管理的数据类型`int`，您可以不使用 setter/getter 方法而摆脱困境，但是始终使用它们是一种好习惯。`float`

# python - 在正则表达式搜索中循环

> ID：11296559
> 
> 赞同：0
> 
> 时间：2012-07-02T15:21:04.810
> 
> 标签：python, regex

想知道是否可以通过此处显示的一些代码获得一些帮助：

```
if re.search(r"\b2ProcessorsRequested\b", output):                  
    corelist.append("2")                                        
elif re.search(r"\b4ProcessorsRequested\b", output):
     corelist.append("4")
elif re.search(r"\b8ProcessorsRequested\b", output):
     corelist.append("8")
elif re.search(r"\b16ProcessorsRequested\b", output):
     corelist.append("16")
elif re.search(r"\b32ProcessorsRequested\b", output):
     corelist.append("32")
elif re.search(r"\b64ProcessorsRequested\b", output):
     corelist.append("64")
elif re.search(r"\b128ProcessorsRequested\b", output):
     corelist.append("128")
elif re.search(r"\b256ProcessorsRequested\b", output):
     corelist.append("256")
elif re.search(r"\b512ProcessorsRequested\b", output):
     corelist.append("512")
elif re.search(r"\b1024ProcessorsRequested\b", output):
     corelist.append("1024")
else:
     corelist.append("1") 
```

这段代码的问题显然是很多重复，这也意味着我只能搜索一组核心列表（1、2、4 等）。我该如何转换这段代码，使它只是从 1-1024 循环？我认为它会是这样的：

```
x=0
while x < 1025:
  if re.search(r"\b", x, "ProcessorsRequested\b", output):                  
      corelist.append(x)
      break()
x+=1 
```

但我认为语法是错误的，因为它说（不记得确切的措辞）我不能在正则表达式部分传递超过 3 个参数。任何帮助都会很棒！我希望我说得通，如果您需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:25:30.943

修正你的正则表达式来搜索所有这些，并告诉你数字：

```
corelist = [m.group(1) for m in
            re.finditer(r"\b([0-9]+)ProcessorsRequested\b", output)] 
```

# c# - Using Regex to find values after a specific string of variable length and drop into array

> ID：11296560
> 
> 赞同：0
> 
> 时间：2012-07-02T15:21:08.757
> 
> 标签：c#, arrays

I'm trying to parse through text files that contain several pieces of data that I need to drop into a growing array.I need to find and store in an array measurements happening after a string that reads "P1".

The values can be either positive or negative (and i need the positive or negative information to be kept with the values), so I can't just set the regex to find blank number of characters after a string because it may vary. Also, the section named "Error" may contain more lines depending on the text file...

Mind you, I have never used regex for anything other than finding certain specific text and returning a true or false value...so I'm very new at this/don't know how to. I was thinking that something could be done to find and store text occurring after "P1:", but I don't know how to do express it.

Any help would be great...I am lost and learning...but it's not happening as fast as I want it to and I'm a little stuck.

Thanks! I appreciate the help.

Elle

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:24:06.067

这取决于机器生成什么形式。如果它是统一的，您可能只需要找到这条线`^[^\S\n}*P1:`。它可以扩展为使用地标，例如它周围的文本。这进一步消除了其位置的歧义。

要使用的修饰符：no-dotall('.' 匹配除换行符以外的所有内容)、多行('^' 行首、'$' 行尾)。

这假设您将整个文件读入一个字符串。没有必要不使用现代内存来执行此操作。如果您想逐行执行此操作，只需将正则表达式拆分为交替，其中每个匹配项都是最终导致有效行的级别... Centration: (level1), E0: (level2), P1: (level3)，如果level1 && level2 && level3，则有效。管他呢。

压缩

```
^[^\S\n]*Centration:.*\n+^[^\S\n]*E0:.*\n+^[^\S\n]*P1:[^\S\n]*[+-]?[\d.]+[^\S\n]*,[^\S\n]*([+-]?[\d.]+)[^\S\n]*,[^\S\n]*([+-]?[\d.]+)[^\S\n]*$ 
```

展开

```
^ [^\S\n]*  Centration: .* \n+
^ [^\S\n]*  E0: .* \n+
^ [^\S\n]*  P1: [^\S\n]*  [+-]?[\d.]+  [^\S\n]* ,   # distance
                [^\S\n]* ([+-]?[\d.]+) [^\S\n]* ,   # x  - capture grp 1
                [^\S\n]* ([+-]?[\d.]+) [^\S\n]* $   # y  - capture grp 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:32:36.820

这与`P1`捕获三个数值的行匹配：

```
P1: (-?\d+\.\d+), (-?\d+\.\d+), (-?\d+\.\d+) 
```

*   `(`…<code>) 是一个捕获组
*   `-?`匹配一个可选的`-`
*   `\d+`匹配一位或多位数字 (0-9)
*   `\.`匹配文字`.`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T15:55:32.620

这是您的正则表达式：`^\s*P1:\s+[\-\d\.]+,\s+([\-\d\.]+,\s+[\-\d\.]+)\s*$`

让我们分解它，这样你就可以从这个例子中学习：

`^`表示行首

`\s*`代表任何前导空白字符，您想忽略它们，但它们可能存在（只是一个好习惯）

`P1:`是你要找的

`\s+`允许在 P1 和以下数字之间有任意数量的空格（至少一个）

`[\-\d\.]+`是检测您的号码的最简单方法。我假设这里提供的输入是正确的，否则我会让它变得更复杂一些，比如`\-?\d+(\.\d+)?`（这将匹配像 12、-1、12.01、-11.21 和 -0 这样的数字）

`,\s+`第一个数字后跟一个或多个空格的逗号

`([\-\d\.]+,\s+[\-\d\.]+)`第二个和第三个数字是您要查找的数字，它们用逗号和一些空格分隔。

如果您确定那里总是只有一个空格，您可能不需要 \s+ 。改为使用空间，如下所示：`([\-\d\.]+, [\-\d\.]+)`

`\s*`帮助您忽略任何尾随空格。

`$`代表行尾

这是您的代码（Perl）：

```
while (<>)
{
    chomp;
    s/^\s+|\s+$//g;
    print "$1\n" if ($_ =~ m/^\s*P1:\s+[\-\d\.]+,\s+([\-\d\.]+,\s+[\-\d\.]+)\s*$/);
} 
```

为了让它更通用一点，做`P1`一个参数；

```
my $pattern="P1"; # or $pattern = shift;

while (<>)
{
    chomp;
    print "$1\n" if ($_ =~ m/^\s*$pattern\:\s+[\-\d\.]+,\s+([\-\d\.]+,\s+[\-\d\.]+)\s*$/);
} 
```

享受！

# asp.net-mvc - ASP.NET MVC 路由失败并显示“未找到与名为 'Product' 的控制器匹配的类型。”

> ID：11296562
> 
> 赞同：3
> 
> 时间：2012-07-02T15:21:21.787
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

这是快速的情况......

我正在尝试使以下网址正常工作...

```
http://localhost:57732/Power-Drills/DeWalt 
```

我定义了以下控制器...

```
namespace MvcApplication1.Controllers
{
    public class ProductController : Controller
    {    
        public ActionResult PowerDrills(string brandName)
        {
           ...
        }

        public ActionResult ProductLine(Int64 id)
        {
           ...
        }

    }
} 
```

在 global.asax 中，我定义了以下路线...

```
public static void RegisterRoutes(RouteCollection routes)
{

    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        name: "PowerDrill",
        url: "Power-Drills/{brandName}",
        defaults: new { controller = "Product", action = "PowerDrills", brandName= "RYOBI" },
        namespaces: new[] { "MvcApplication1.Controllers" }
    );

    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    ); 
```

}

我收到以下错误...“*找不到与名为”“产品”的控制器匹配的类型。*"

所以它似乎表明它找不到 Product 控制器，但是......*这个*url 工作得很好（使用默认路由）并且*由*Product 控制器处理......

```
http://localhost:57732/Product/ProductLine/4 
```

我已经阅读了路由并理解（至少我认为我知道）url 段，它们如何映射到控制器和操作以及 global.asax 中的顺序如何重要；我已经为其他人看到并阅读了有关此问题的几篇以前的帖子，但他们的解决方案没有奏效或不适用于我的情况（很多 Ruby for Rails 帖子）。

**[这篇](https://stackoverflow.com/questions/638362/asp-net-mvc-mapping-urls-different-to-controller-action-with-areas?rq=1)**文章指出，Controller 类需要继承自“Controller”而不是“ApiController”，正如您所看到的，我的已经这样做了。

所以我不确定发生了什么，并欢迎任何指导！

谢谢你，

-G

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:29:40.180

我认为您最好从中删除名称空间，并可能像这样格式化您的路线：

```
routes.MapRoute(
        "PowerDrill",
        "Power-Drills/{brandName}",
        new { controller = "Product", action = "PowerDrills", brandName = UrlParameter.Optional }
); 
```

虽然我不太熟悉您如何格式化路由（使用命名空间等），但这是我在 MVC 3 中所做的。

尝试用`PowerDrill`它替换您的路线。

就像 Robert Harvey[所说](https://stackoverflow.com/questions/11296562/asp-net-mvc-route-fails-with-no-type-was-found-that-matches-the-controller-name/11296692#comment14861840_11296562)的那样，Phil Haack 的路线测试仪就是一切都失败了的东西。

# c# - 使用 UserPrincipal 检查本地管理员是否

> ID：11296569
> 
> 赞同：4
> 
> 时间：2012-07-02T15:22:02.887
> 
> 标签：c#, active-directory, admin, active-directory-group, userprincipal

我正在尝试使用一种方法来接收用户名，如果该用户是本地管理员（不是在整个域上，只是在本地机器上），则返回 true，否则返回 false。我试图改变[In .NET/C# test if process has administrator permissions](https://stackoverflow.com/questions/1089046/in-net-c-test-if-user-is-an-administrative-user) to work 中发现的技术，但它没有。我曾尝试使用 NetUserGetInfo 方式，但无法使其正常工作。现在我正在尝试使用 UserPrincipal。下面的代码就是我所拥有的...主要只是测试基础知识是否有效并且它们确实有效。

```
PrincipalContext ctx = new PrincipalContext(ContextType.Machine);
UserPrincipal usr = UserPrincipal.FindByIdentity(ctx, IdentityType.SamAccountName, userId);

if(usr == null)
{
    Console.WriteLine("usr is null");
}
else
{
    Console.WriteLine(usr.Enabled);
    Console.WriteLine(usr.IsAccountLockedOut());

    foreach (Principal p in usr.GetAuthorizationGroups())
    {
        Console.WriteLine(p.ToString());   
    }
} 
```

看起来我应该可以使用 isMemberOf 方法，但是如何为本地管理员创建一个组？还是有比 isMemberOf 方法更好的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T15:42:08.930

好吧，实际上我能够检查从 GetAuthorizationGroups()) 返回的委托人之一是否等于“管理员”。

```
foreach (Principal p in usr.GetAuthorizationGroups())
{
    if (p.ToString() == "Administrators")
    {
        result = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-21T15:27:35.267

另一种可能。如果您从 UserPrincipal 对象获取 WindowsIdentity。您可以使用 IsInRole(groupname) 方法。

您可以通过执行获得 WindowsIdentity

```
var identity = new WindowsIdentity(string sUserPrincipalName);

// then use this method to check the Identity against any Active Directory group.
public static bool UserIsInRole(WindowsIdentity identity, string group)
{
    try
    {
        return new WindowsPrincipal(identity).IsInRole(group);
    }
    catch (Exception ex)
    {
        //Error checking role membership
        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-01T12:28:26.827

这会做

```
 static bool IsAdmin()
    {
        // net localgroup administrators

        var proc = new Process
        {
            StartInfo = new ProcessStartInfo
            {
                FileName = "net",
                Arguments = "localgroup administrators",
                UseShellExecute = false,
                RedirectStandardOutput = true,
                CreateNoWindow = true
            }
        };

        proc.Start();

        var computer = new PrincipalContext(ContextType.Machine).ConnectedServer;
        var isAdmin = proc.StandardOutput.ReadToEnd().Contains(computer);

        return isAdmin;
    } 
```

# android - 共享图书馆项目活动的单一实例？

> ID：11296572
> 
> 赞同：3
> 
> 时间：2012-07-02T15:22:32.147
> 
> 标签：android, singleton, android-manifest, android-activity

[此答案](https://stackoverflow.com/a/6706810/869501)建议使用 AndroidManifest`android:launchMode="singleTask"`将活动限制为单个实例。

这对于所有活动都是项目一部分的应用程序非常有用，但是当我有几个应用程序使用一个[库项目](http://developer.android.com/tools/projects/index.html#LibraryProjects)，其中定义了应用程序的主要活动时，库项目的 AndroidManifest**被忽略**，所以我不能`android:launchMode="singleTask"`在那里真正使用该属性.

如果我`android:launchMode="singleTask"`在应用程序的 AndroidManifest.xml 中使用它，那么每个活动都有不同的名称，并且此属性将限制为单个实例仅*相同的应用程序*，而不是使用此共享活动（用作库项目）的不同应用程序。

我真正想要的是在任何给定时刻，只有一个应用程序（在使用该共享库项目活动的*不同应用程序中）可以运行。*

使用该`android:launchMode="singleTask"`属性是否可行？

如果这是不可能的，还有什么其他方法推荐？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T02:40:23.083

尝试使用`Intent.FLAG_ACTIVITY_REORDER_TO_FRONT`. 每当您启动一个 Activity 时，如果该 Activity 的一个实例存在，它就会被带到堆栈的前面，并且不会第二次创建。这确保了在任何给定时刻只有一个 Activity 保留在堆栈上。

另一种方法是使用[静态变量](https://stackoverflow.com/a/6884822/1088880)。不确定这有多可靠。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T15:38:02.170

图书馆项目只是你用来重用代码的东西。编译应用程序时，生成的`.apk`文件不知道帮助创建它的库项目。也就是说，不应该`.apk`通过操纵图书馆项目的`AndroidManifest.xml`文件来强制执行单例属性（跨不同的）。

您可以通过子类化来强制执行此行为`Application`。[**您可以在此处**](http://www.stackoverflow.com/a/5862048/844882)阅读有关此内容的更多信息。

# asp.net-mvc - 通过 jQuery Ajax 处理从同一个 MVC 方法返回的不同部分视图

> ID：11296575
> 
> 赞同：1
> 
> 时间：2012-07-02T15:22:44.893
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery

设置：ASP.NET MVC3、jQuery、C#

有没有人有一个干净的解决方案来处理从同一操作方法返回的不同部分视图？一个用于下一阶段，一个用于再次返回带有验证错误的视图，另一个用于显示未处理的异常。

我有一个**控制器方法**，它执行以下操作：

```
public ActionResult SomeMethod(MyModel model)
{

    if(_service.Validate(model))
    {

    if(_service.Update(model))
    {
        // return next view once success
                return PartialView("EverythingIsGood"); // This should be pushed into #somediv  
    }else{
        throw new HardException("Tell the client something bad has happened");
    }
    }
    else
    {
    // Return the same view to highlight the validation errors
        HttpContext.Response.StatusCode = 500;
    return PartialView("SomeMethod", model); // This should be pushed into #anotherdiv  
    }

} 
```

**客户端脚本**

```
 $.ajax({
        url: baseUrl + "Home/SomeMethod",
        type: "GET",
        success: function (data) {
            $("#somediv").html(data);
        },
        error: function (data) {
            handleError(data);
        }
    }); 
```

我想我需要类似**softerror 的**东西：

```
 $.ajax({
        url: baseUrl + "Home/SomeMethod",
        type: "GET",
        success: function (data) {
            $("#somediv").html(data);
        },
        softerror: function (data) {
            $("#anotherdiv").html(data);
        },
        error: function (data) {
            handleError(data);
        }
    }); 
```

我正在考虑可能为软验证错误返回不同的状态代码，但这感觉很糟糕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T08:29:29.570

您可以在响应中再传递一个变量，并通过 js 在客户端检查它的值。像这样的东西：控制器：

```
if(_service.Update(model))
{
return Json(new {
        IsEverythingGood=true;
                htmlToShow=PartialView("EverythingIsGood"); // This should be pushed into #somediv
    });
} 
```

...

```
else
    {
          return return Json(new {
            IsEverythingGood=false;
                    htmlToShow=PartialView("SomeMethod", model); // This should be pushed into #anotherdiv  
    } 
```

在你的 javascript 中：

```
success: function (data) {
    if(data.IsEverythingGood==true){
        $("#somediv").html(data.htmlToShow);
    }
    else if(data.IsEverythingGood==false){
        $("#anotherdiv").html(data.htmlToShow);

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T12:42:09.067

您可以执行以下操作。

看法

```
 $.get("Home/Index", { random: '@DateTime.Now.Ticks' }, function (response,textData,jqXHR) {
    // Based on **jqXHR.status** value you can fill value of div
    $("#DivName").html(response);
 }); 
```

控制器

```
public ActionResult Index(MyModel model)
{
   if(_service.Validate(model))
    {

    if(_service.Update(model))
    {
        // return next view once success
                return PartialView("EverythingIsGood"); // This should be pushed into #somediv  
    }else{
        throw new HardException("Tell the client something bad has happened");
    }
    }
    else
    {
    // Return the same view to highlight the validation errors
        HttpContext.Response.StatusCode = 500;
    return PartialView("SomeMethod", model); // This should be pushed into #anotherdiv  
    }
} 
```

# python - “python”仅以管理员身份从命令提示符运行

> ID：11296583
> 
> 赞同：1
> 
> 时间：2012-07-02T15:23:16.923
> 
> 标签：python, cmd

我在 Windows 7 上，如果我作为普通用户在命令提示符下键入“python”，我会得到旧的“'python' 不被识别为内部或外部命令、可运行程序或批处理文件”。但是如果我以管理员身份打开提示，python 会像它应该的那样启动。

我做的第一件事是通过控制面板编辑 PATH 变量，这似乎添加了环境变量，但是这样做与 cmd 识别我已经完成它之间存在脱节。

我已经更改了 Python27 文件夹的权限以允许对所有用户进行完全访问，我尝试添加一个 pythonexe 变量并将其添加到 PATH，正如另一个 StackOverflow 问题所建议的那样。

当我以普通用户的身份在 cmd 中键入 PATH = C:\Python27 时，这也不起作用。

如果我输入 set PATH, "C:\Python27;" 在返回的行中。

我相当肯定这是一个许可问题，这是我重新发布我自己版本的这个古老问题的唯一原因。鉴于此错误和这些情况，我该如何运行 Python？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:37:39.103

要将路径附加到 python 目录：`path=%PATH$;c:\Python27` 以普通用户身份运行。

您还应该仔细检查是否`c:\python27\python.exe`确实存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-03T17:09:36.727

所以，当我遇到这个问题时，我注意到的一件事是 USERNAME 环境变量仅设置为 system ，它是管理员环境变量。我只是在常规命令提示符中查找用户名，使用 echo %USERNAME% 并将分号和用户名附加到 %USERNAME& 环境变量。这解决了这个问题。您可以在管理员中执行的所有操作现在也可以在常规用户命令行中完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-15T12:12:35.263

我过去遇到过类似的问题，发现检查环境/系统变量中值的顺序也很重要。

# java - 当实例变量没有“this”时如何将 Intellij 设置为警报

> ID：11296591
> 
> 赞同：3
> 
> 时间：2012-07-02T15:23:37.677
> 
> 标签：java, intellij-idea

正如标题所说，我如何设置 IntelliJ 在访问实例变量时没有 this 时警告我。

我知道在 Eclipse 中你可以设置它，但我不确定如何在 IntelliJ 中做到这一点。

例如

私有字符串字段1

field1 << 我应该是 this.field1 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T15:36:53.947

要启用有关访问 IntelliJ 中未限定的字段和方法的警告`this`，请启用以下代码检查：

1.  在主菜单上，选择**文件 | 设置**，或按**Ctrl+Alt+S**
2.  在设置对话框中，选择**项目设置 | 检查**
3.  检查以下一项或两项：
    *   **实例字段访问不符合“this”**
    *   **实例方法调用不使用“this”限定**

# php - namedValuePairs 没有被传递，而是空的

> ID：11296598
> 
> 赞同：0
> 
> 时间：2012-07-02T15:24:15.120
> 
> 标签：php, android, post, get

我正在尝试使用 PHP 为一个 android 项目编写一个基本的帐户创建。我将脚本发布为电子邮件、密码和昵称，它会查询数据库中的重复项，如果找不到则插入信息。如果我只是运行 php 脚本，它可以正常工作，但当我尝试从 android 发布内容时却不行。这是代码：

```
public String createUser(String email, String pass, String nick) {

    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("email", email));
    nameValuePairs.add(new BasicNameValuePair("password", pass));
    nameValuePairs.add(new BasicNameValuePair("nick", nick));

    InputStream is = null;
    String reply = null;
    try {
        HttpClient httpclient = new DefaultHttpClient();

        // must store something locally to define this url
        // if the url ever changes, gotta make sure droids know without
        // requiring an update
        HttpPost httppost = new HttpPost(STR_PHP_USER);
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();

        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);

        reply = reader.readLine();
        Log.e("createUser", "php response is "+reply);
        is.close();

    } catch (Exception e) {
        Log.e("log_tag", "Error in http connection " + e.toString() + " getCreateUserResult_HTTPPost");
    }

    return reply;

} 
```

该脚本应返回 0 表示双重失败，1 表示电子邮件失败，2 表示昵称失败，3 表示成功。从android项目我总是得到0，因为数据库中已经有一个用户名和昵称为空。

此外，`print_r($_GET, true));`结果：

```
Array
(
) 
```

当我运行 android 项目时，我得到

```
Array
(
    [email] => Random@someplace.org
    [password] => somepassword
    [nick] => RandoTheMagnificent
) 
```

如果我从浏览器中执行此操作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:31:41.447

在您的 Android 应用程序中，您使用 POST 而不是 GET 发送参数。

您应该使用 GET 而不是修改脚本以使用 POST。

PS您也可以通过添加来检查它`print_r($_POST)`。

# forms - HTML 表单“占位符”在 IE 8 中不起作用

> ID：11296602
> 
> 赞同：3
> 
> 时间：2012-07-02T15:24:24.280
> 
> 标签：forms, html, internet-explorer, placeholder

嗨，我在我的网站上创建了一个表格。我正在使用`placeholder="Full Name"`，但在 IE8（可能还有其他 IE 版本）中查看时，表单中没有显示任何内容

我试过使用`value="" onfocus="if (this.value == 'Full Name') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Full Name';}"`，但表格仍然是空的。出于某种原因，当您单击表单时会显示“全名”，然后将其关闭。

我正在开发的网站是 [usspcatalystcentre.org.uk][1]，你可以明白我的意思。前两种形式（标题和全名）是我尝试使用的地方

```
value="" onfocus="if (this.value == 'Full Name') {this.value = '';}" onblur="if (this.value == '') {this.value = 'Full Name';}" 
```

表格的其余部分是我刚刚使用的地方`placeholder`

这是我正在处理的实际代码

```
<form action="contact.php" method="post">

                <input id=title name=title type=text value="" onfocus="if(this.value=='Username') this.value='';" onblur="if(this.value=='') this.value='Username';" required class="top-formfields" value='<?php print $_SESSION['title']?>'>  <br /><br />
                <input id=fullname name=fullname type=text value="" onfocus="if(this.value=='Full Name') this.value='';" onblur="if(this.value=='') this.value='Full Name';" required  class="top-formfields" value='<?php print $_SESSION['fullname']?>'> <br /><br />
                <input id=companyname name=companyname type=text placeholder="Company Name" required  class="top-formfields" value='<?php print $_SESSION['companyname']?>'>    <br /><br />
                <input id=companynumber name=companynumber type=text placeholder="Company Registered Number" required  class="top-formfields" value='<?php print $_SESSION['companynumber']?>'> <br /><br />
                <textarea id=address name=address rows=5 placeholder="Address" required class="top-textarea"><?php print $_SESSION['address']?></textarea> <br /><br />
                <input id=postcode name=postcode type=text placeholder="Post Code" required  class="top-formfields" value='<?php print $_SESSION['postcode']?>'>    <br /><br />
                <input id=phonenumber name=phonenumber type=text placeholder="Phone Number" required  class="top-formfields" value='<?php print $_SESSION['phonenumber']?>'>    <br /><br />
                <input id=email name=email type=text placeholder="Email" required  class="top-formfields" value='<?php print $_SESSION['email']?>'> <br /><br />
                <input id=mobile name=mobile type=text placeholder="Mobile" required  class="top-formfields" value='<?php print $_SESSION['mobile']?>'> <br /><br />
                <input id=website name=website type=text placeholder="Website URL" required  class="top-formfields" value='<?php print $_SESSION['website']?>'> <br /><br /> 
```

在此先感谢，汤姆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T15:32:37.250

该`placeholder`属性是一个新的 HTML5 改进。较旧的 IE-s 不支持它 - [http://diveintohtml5.info/forms.html](http://diveintohtml5.info/forms.html)

要跨浏览器模仿它，您可能需要使用 jQuery -[示例](http://www.hagenburger.net/BLOG/HTML5-Input-Placeholder-Fix-With-jQuery.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T05:16:59.513

IE-9 不支持占位符，所以我想到的第一个解决方案就是这个。

祝你好运！

```
<script type="text/javascript"> 
    if(navigator.userAgent.indexOf("MSIE") > 0 )
    {
        $(function()
        {
            var input = document.createElement("input");
            if(('placeholder' in input) == false)
            {
                $('[placeholder]').focus(function()
                {
                    var i = $(this);
                    if(i.val() == i.attr('placeholder'))
                    {
                        i.val('').removeClass('placeholder');
                        if(i.hasClass('password'))
                        {
                            i.removeClass('password'); this.type='password';
                        }
                    }
                }).blur(function()
                {
                    var i = $(this);
                    if(i.val() == '' || i.val() == i.attr('placeholder'))
                    {
                        if(this.type=='password')
                        {
                            i.addClass('password'); this.type='text';
                        }
                        i.addClass('placeholder').val(i.attr('placeholder'));
                    }
                }).blur().parents('form').submit(function()
                {
                    $(this).find('[placeholder]').each(function()
                    {
                        var i = $(this);
                        if(i.val() == i.attr('placeholder')) i.val('');
                    });
                });
            }
        });
    }

    </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-05T18:40:54.710

```
if (!('placeholder' in $('<input>')[0])) { // Create a dummy element for feature detection
    $('input[placeholder], textarea[placeholder]').blur(add).focus(remove).each(add); // Select the elements that have a placeholder attribute
    $('form').submit(function(){$(this).find('input[placeholder], textarea[placeholder]').each(remove);}); // Remove the placeholder text before the form is submitted
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-25T23:17:18.530

如果您使用的是 jQuery 1.9+，请确保添加浏览器检测。您可以使用此命令从终端安装它 npm install jquery.browser

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-21T12:30:00.947

将以下代码另存为`.js`并确保更改输入类型

```
$(document).ready(function () {
    if ($.browser.msie) { //this is for only ie condition ( microsoft internet explore )
        $('input[type="text"][placeholder], textarea[placeholder]').each(function () {
            var obj = $(this);
            if (obj.attr('placeholder') != '') {
                obj.addClass('IePlaceHolder');

                if ($.trim(obj.val()) == '' && obj.attr('type') != 'password') {
                    obj.val(obj.attr('placeholder'));
                }
            }
        });

        $('.IePlaceHolder').focus(function () {
            var obj = $(this);
            if (obj.val() == obj.attr('placeholder')) {
                obj.val('');
            }
        });

        $('.IePlaceHolder').blur(function () {
            var obj = $(this);
            if ($.trim(obj.val()) == '') {
                obj.val(obj.attr('placeholder'));
            }
        });
    }
}); 
```

[http://jsfiddle.net/wbcTm/79/](http://jsfiddle.net/wbcTm/79/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-01T00:04:46.320

汤姆，占位符不是 IE8 支持的属性。

我认为这将帮助您确定前进的方向：

使用“全名”预填充该字段。提前给它 value="Full Name" 作为默认值。

```
onfocus= "if (this.value=='Full Name'){this.select();this.value='';this.style.color='#999999';}else{this.style.color='#000000';}"  

onclick= "if (this.value=='Full Name'){this.select();this.value='';this.style.color='#999999';}else{this.style.color='#000000';}" 

onblur=  "if (this.value==''||this.value=='Full Name'){this.value='Full Name';this.style.color='#999999';}else{this.style.color='#000000';}" 

onkeyup= "if (this.value=='Full Name'){this.select();this.style.color='#999999';}else{this.style.color='#000000';}" 

onchange="if (this.value=='Full Name'){this.style.color='#999999';}else{this.style.color='#000000';}" 
```

# java - Java JDBC：日期持续两天

> ID：11296606
> 
> 赞同：26
> 
> 时间：2012-07-02T15:24:36.443
> 
> 标签：java, sql-server, date, jdbc

我正在使用 Java JDBC 将日期写入 SQL Server 2008，然后将其读回。
回读的日期始终比实际写入的日期早两天。

我正在使用准备好的语句插入包含日期字段的行。日期值由以下提供：

```
java.sql.Date todaysDate = new java.sql.Date(System.currentTimeMillis()) ;
System.out.println(todaysDate.toString()) // -> 2012-07-02
ps.setDate(8, todaysDate); 
```

将日期写入数据库后，如果我运行，SQL 服务器会显示正确的日期：

```
select date from table_name where date!=null // ->2012-07-02 
```

如果我通过 JDBC 运行相同的查询，则使用从结果集中检索日期值

```
java.sql.Date sqlDate = rs.getDate("date") ;
sqlDate.toString() // ->2012-06-30 
```

插入的行是表中唯一具有非空日期的行，因此这似乎不是读取错误记录的情况。

我认为这将是一个众所周知的问题，但我可以通过谷歌搜索“两天假”问题找到的唯一参考没有明确的答案。

有任何想法吗？

beeky（生活在过去）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-12T13:11:47.680

# 错误的 JDBC 驱动程序

原来问题出在 MS JDBC 驱动程序上。我尝试了日期类型和日期转换的所有可能组合，但没有任何效果。经过大量搜索（应该先这样做！）我看到一个对[旧 SO 条目](https://stackoverflow.com/questions/7724258/date-columns-in-sql-server-mssql-jdbc-3-0-running-under-java-1-7-0-retrieved-a)的评论，暗示问题是来自 Microsoft 的版本 3 JDBC 驱动程序。我得到了最新的驱动程序，版本 4.something，问题就消失了。

感谢所有试图提供帮助的人。特别感谢迈克花时间发布解决方案。

-=笨拙

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-07-27T15:44:08.810

对于那些使用 maven 的人，将其用于 java 8：

```
 <dependency>
    <groupId>com.microsoft.sqlserver</groupId>
    <artifactId>mssql-jdbc</artifactId>
    <version>6.2.1.jre8</version>
 </dependency> 
```

如前所述，如果您使用旧版本，您可能会遇到这个问题，并且不容易调试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-11T12:41:47.980

我最近遇到过几次这个问题，并且在记住如果字段的类型为 date 时会发生这种情况，将字段类型切换为 datetime 类型可以解决问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-11T15:24:13.233

就像user903724所说的那样，更改为可以修复的版本4，但在我的情况下，当我使用sqljdbc4-3.0.jar时，这个问题仍然存在，但我将其更改为sqljdbc42.jar，这个问题得到了修复。希望我的经验会有所帮助。从[sqljdbc42.jar下载](https://www.microsoft.com/en-us/download/confirmation.aspx?id=11774)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-10-12T06:09:36.883

如果您使用的是 MSSQL 2015，请使用此[Sqljdbc41](https://mvnrepository.com/artifact/com.microsoft.sqlserver/sqljdbc41/6.0.8112)修复此问题

```
 <!-- https://mvnrepository.com/artifact/com.microsoft.sqlserver/sqljdbc41 -->
<dependency>
    <groupId>com.microsoft.sqlserver</groupId>
    <artifactId>sqljdbc41</artifactId>
    <version>6.0.8112</version>
</dependency> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-04-12T12:39:44.600

当我们在 Microsoft sql 中使用日期数据类型时，就会出现这个问题。我已修复此问题以将日期更改为日期时间。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-27T10:06:02.303

我有完全相同的问题。一旦我使用 java 6 运行时环境而不是 java 7 运行时环境，2 天的偏移就消失了。

因此，JDBC 4.1 版本与 JDBC 3 驱动程序的向后兼容性也可能存在差异。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-02T15:40:30.937

您的问题是时区值（“GMT”）。
您需要在`JDBC`获取方法中引入此操作，如下所示：

```
Calendar gmt = Calendar.getInstance(TimeZone.getTimeZone("GMT"));
PreparedStatement stmt = connection.prepareStatement(sql);
stmt.setDate(1, new Date(0)); // I assume this is always GMT
ResultSet rs = stmt.executeQuery();
rs.next();

//This will output 0 as expected
System.out.println(rs.getDate(1, gmt).getTime()); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-04-05T06:28:07.280

即使将 sqljdbc4 与 Java 8 一起使用，我也遇到了同样的问题。

一旦我不需要这个字段在应用程序中进行任何类型的比较，我就通过在我的查询中转换字段来解决这个问题，如下所示`CAST(dbo.tblPwActividadeParticipanteDetalhe.Data AS VARCHAR(10))`：

# php - 如何从 php 网页执行程序？

> ID：11296609
> 
> 赞同：0
> 
> 时间：2012-07-02T15:24:58.500
> 
> 标签：php, ssh, exec, sudo

## 概括

我在安装了某个程序的 Linux 机器上运行 apache。我想从 php 页面调用程序并获取输出。

## 特殊约束

该程序需要某些环境变量才能运行，例如带有库路径的 LD_LIBRARY_PATH 以及额外的变量。该环境是为机器上的非*apache用户的用户**X*定义的。

 *## 提议的选项

到目前为止，我已经想到了以下选项（并不意味着它们都是智能或安全的）：

1.  允许用户*apache*以用户*X*的身份运行程序（以允许拥有完整环境的方式）。食谱 ？
2.  修改用户*apache*的环境。我不明白怎么做，因为 apache 是*nologin*用户。
3.  以具有适当环境的用户身份通过​​ SSH 连接到另一台计算机。这意味着在 Web 服务器和本机之间没有密码（公钥/私钥）连接。危险吗 ？

## 问题

*   我是否忽略了更简单或更好的选择？
*   你会使用什么选项，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:40:24.010

如果您知道需要设置的环境变量（的值），您可以简单地将它们添加到您的 exec

```
exec('LD_LIBRARY_PATH="/you/paths"; OTHER_VAR="baz"; /your/bin'); 
```

它将`/your/bin`使用给定的 ENV 变量集执行，但作为 apache 用户，而不是用户*X*。如果程序需要以特定用户身份运行，SSH 似乎不是一个坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:44:05.733

你能完全控制这个平台吗？

您可以查看[suexec](http://httpd.apache.org/docs/2.0/suexec.html)或[mpm-iTK](http://mpm-itk.sesse.net)

您可以在虚拟主机中配置上述内容，并将运行设置为可以访问您的二进制文件的用户或组。

在您当前的设置中，您可以创建一个新组，将 apache 用户/组分配给该组，将组应用到您要以读/写或读/执行权限执行的二进制文件，并让好时光发挥作用。*

# templates - 在 VBulletin 的全局模板中包含模板

> ID：11296610
> 
> 赞同：0
> 
> 时间：2012-07-02T15:24:59.717
> 
> 标签：templates, include, vbulletin

我需要在 VBulletin 中做这样的事情。应该有几个模板（我通过 admincp 添加它们），应该“包含”在名为**“footer”**的全局模板中。实际上，根据某些条件，应该只包括其中一个。所以在这个**页脚**我有

```
<vb:if condition="$my_variable == 1">
    <p>CASE_1</p>
<vb:elseif condition="$my_variable == 2" />
    <p>CASE_2</p>
<vb:else />
    <p>CASE_3</p>
</vb:if> 
```

因此，在这种情况下，我需要使用代码更改 CASE-s 以包含其他模板（即“footer1”、“footer2”、“footer3”）。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:42:11.017

好的，我通过创建一个模板，将变量传递给它，渲染它并在页脚模板中预先注册，就像这样（class_bootstrap.php）：

```
$templater = vB_Template::create('footer_'.$extension);
$templater->register('admincpdir', $admincpdir);
...

$includable_footer = $templater->render();
vB_Template::preRegister('footer',array('included_footer ' => $includable_footer));

$templater = vB_Template::create('footer');
$templater->register('included_footer', $includable_footer);
$footer = $templater->render(); 
```

在页脚模板中插入了这一行：

```
{vb:raw included_footer} 
```

# c++ - 虚拟大小导致程序内存不足

> ID：11296612
> 
> 赞同：4
> 
> 时间：2012-07-02T15:25:05.713
> 
> 标签：c++, windows, memory

当虚拟大小达到大约 2GB（32 位应用程序，启用大地址感知）时，我正在使用 Windows 上的 C++ 构建的服务器应用程序内存不足。但是，我注意到 Private Bytes 要小得多。目前的统计数据是：

虚拟大小：2.6GB 私有字节：1.6GB

这两个数字的差异是 1GB。所以我的问题是：

1.  这个 1GB 的差异代表什么？
2.  我的应用程序是否由于虚拟大小或私有字节而耗尽内存？

我还通过 VMMap 实用程序运行了我的应用程序，我注意到“私有数据”通常比提交的大小高一个数量级。换句话说，私有数据的总大小可能是 200MB，但提交的大小只有 20MB。我不太确定私有数据是什么，但根据我目前的研究，它似乎表明它只是堆的一部分。

编辑：

我已经使用 Purify 寻找内存泄漏，但我并没有真正找到任何有用的东西。没有指针的内存形式的内存泄漏似乎不是问题，但是内存被占用太久的内存泄漏可能是一个问题，我还没有研究过。但是，关键是要了解虚拟大小导致内存不足问题的原因。问题 #1 对我来说是理解这一点最重要的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T15:45:24.787

这需要一点解释，所以请在这里坚持。

首先，这个话题是一个令人困惑的矛盾术语的泥潭，所以请抛弃你对“虚拟内存”与磁盘有关的所有概念。

*   **物理内存**是存储在物理设备上的内存。这*通常*是指系统 RAM，但也可以是磁盘缓冲区、网卡缓冲区、显卡 VRAM 等。
*   **虚拟内存**是一组映射到用户模式（虚拟）地址范围的物理地址范围，以便可以以安全和分隔的方式访问内存。

关于我们*为什么*这样做的快速说明：如果我们给进程直接内存地址，我们只能（可能）有一个内存存储。这很不方便并且不利于性能。当虚拟地址转换为系统内存 (RAM) 范围之外的物理地址时，处理器会发出页面错误。这向操作系统中的中断处理程序发出信号，然后可以将内存访问操作委托给不同的设备。有用！

在 32 位 Windows 系统上，进程*在任一时间点*可以寻址的最大虚拟内存量为 2GB。这可以使用 AWE 增加到 3GB，或者使用 AWE 增加到 4GB `/4GT`。这并不意味着一个进程只能分配 2GB（或 3GB / 4GB，取决于前面讨论的设置）的内存。这只是意味着它不能同时访问更多内容。

例如，如果您打开一个 1GB 大小的内存映射文件，您的虚拟内存使用量将增加 1GB。您没有触及 RAM，也没有触及磁盘，但您已经为您的进程分配了一块虚拟地址空间。如果您想在此内存映射文件可用的同时分配 1.1GB 的 RAM，则不能。您必须首先从您的进程中取消映射文件。请记住，内存仍然可以保持分配状态并充满数据，但实际上并未映射到您的进程中。如果您的机器上有 8GB 的​​ RAM，您可以用数据填充其中的 6GB，并将其中的 2GB 映射到您的进程中。当您需要使用该内存的不同部分时，您必须取消映射现有块并映射其他部分。

因此，关于您所看到的差异：

1.  Private bytes 告诉您进程映射了多少字节的虚拟设备内存，不包括与其他进程共享的虚拟内存（例如映射文件、全局堆等）。

2.  工作集告诉你你正在使用多少字节的物理内存。这包括物理内存、设备缓冲区和映射文件。这是一个非常奇怪的数字，因为它等同于触摸的物理内存 + 映射的虚拟非系统内存。一般来说，你应该完全忽略这个数字。它实际上对调试内存泄漏毫无用处。

3.  虚拟字节是您已映射的虚拟内存总量。

不同之处在于您已将共享虚拟内存（例如一堆 DLL 文件或一块全局堆）映射到您的进程中。差异表明这些共享映射的总大小大约为 1GB。

请记住，*这些*都与*交换*无关，交换是将系统内存页面传输到磁盘（所谓的“页面文件”）以增加快速系统资源 (RAM) 的可用性。该文件的命名在 Windows 的这一领域造成了无穷无尽的混乱，当微软最终决定将其称为“交换”而不是“虚拟内存”或“页面文件”时，我会很高兴。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T15:31:35.247

1.  Virtual Size vs Private Bytes 解释：[什么是私有字节、虚拟字节、工作集？](https://stackoverflow.com/questions/1984186/what-is-private-bytes-virtual-bytes-working-set)（见下面的报价）
2.  您的应用程序可能会达到 2 GB 的虚拟大小限制，尤其是。因为您自己也看到了这种行为
3.  `/LARGEADDRESSAWARE`仅当系统本身在启用[/3GB AKA 4GT](http://msdn.microsoft.com/en-us/library/windows/desktop/bb613473%28v=vs.85%29.aspx)`Win32`的情况下启动时，才扩展操作系统中应用程序的虚拟大小限制

> Virtual Bytes 是整个进程占用的总虚拟地址空间。这就像工作集，从某种意义上说，它包括内存映射文件（共享 DLL），但它还包括备用列表中的数据和已经被分页并位于磁盘某处的页面文件中的数据。在重负载下，系统上每个进程使用的总虚拟字节数加起来会比机器实际拥有的内存多得多。
> 
> 所以关系是：
> 
> *   Private Bytes 是您的应用实际分配的，但包括页面文件的使用；
> *   工作集是非分页私有字节加上内存映射文件；
> *   虚拟字节是工作集加上分页的私有字节和备用列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-07T16:07:17.953

我在我的机器上遇到了类似的问题，其中 C/C++/.NET win32 应用程序内存不足。它消耗了所有 2GB 的虚拟地址。它看起来像虚拟地址耗尽，因为 Process Explorer 显示应用程序只占用了大约 900MB 内存。VMMap 显示了 1.6GB 的私有数据和大约 700MB 的未提交内存。

原因很简单。配置为测试应用程序的应用程序验证程序 (C:\Windows\SysWOW64\appverif.exe)（标记为基本测试 - vfbasics.dll）。从应用程序验证器中删除应用程序后，它工作正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T15:49:21.203

只是一个评论：启用大地址感知仅向操作系统发出信号，它可以安全地划分进程的虚拟地址空间，从该特定可执行文件创建，以 3:1 方式而不是通常的 2:2 方式。应用程序应该明确指出它支持 3:1 除法的原因有很多，但最明显的一个原因是在 2:2 模式下，可以使用探测虚拟地址的 MSB 来测试该地址是否属于内核部分的虚拟地址空间或用户部分。在 3:1 中，该测试不再有效，因为 MSB 也是`1`占虚拟地址空间用户部分的 1/3。这要求该应用程序可能调用的驱动程序也应该知道可能的 3:1 除法，并且应该使用另一种方法来测试给定的虚拟地址是否属于非用户空间。

正如 Roman R. 所指出的，您仍然必须明确告诉内核启用对 3:1 VA 空间划分的支持。

# perl - 在 perl 项目中使用 maven

> ID：11296614
> 
> 赞同：5
> 
> 时间：2012-07-02T15:25:11.080
> 
> 标签：perl, maven, maven-plugin

我们已经看到 Maven 在我们基于 Java 的项目中表现得非常好。我从[这个问题](https://stackoverflow.com/questions/1168960/maven-for-other-languages)中看到，非 java 项目也可以作为 maven 模块进行改造，尽管它们只会将 maven-exec-plugin 用于不同的目标。在谷歌搜索中，我看到了[maven-perl-plugin](http://code.google.com/p/maven-perl-plugin)，但它仍然是一个 1.0-SNAPSHOT，有零星的更新，但肯定看起来很有希望。有没有人使用过这个或任何其他竞争对手，可以让我免于编写无趣的 pom 样板？

编辑：实际上，该项目的主要部分是 n 层 Java 模块，并且有一个非常小的 perl/python 组件（用于后端解析），我正在寻找一个适合这个生态系统的地方。我获得了一些优势，比如使用 maven-release-plugin 进行标签/分支创建和发布过程，并将它作为同一代码库的一部分给了我版本号的一致性。因此，虽然我不打算对 perl 模块使用 maven 的依赖项检索手段（对不起，我没有对 maven-perl-plugin boy 进行足够的研究），但我想知道什么时候要牢记做这样的事情（或者如果这样的事情没有意义）例如模块名称应该是什么（*topLevelModuleName*-perl?) 以及 src/main/perl 和 src/test/perl 下的结构。我知道我可能会走下一个滑坡，试图将一件事硬塞到另一件事上，但问一下也无妨：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:18:41.673

太疯狂了。使用像 Module::Build 之类的健全的东西，对于依赖项使用 CPAN（或 cpanm）。说真的，对于任何不是 Java 的东西，您都必须为加载疯狂的插件编写 XML 负载。使用 Module::Build （或任何脚本），您可以对构建进行编程，并且可以使用任何可用于该语言的库（您只需要在之前使用 cpanm 获取它们）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:20:48.277

在这一点上，我倾向于不使用 maven-perl-plugin 作为它的依赖特性，因为它似乎与 Dist::Zilla 和 Module::Build 等许多成熟的同行重叠。由于没有人真正评论编辑，我只剩下维护现有的项目结构，如

```
<perl-module-name>
    -lib
    -etc
    -bin 
```

除了添加一个带有被创建为输出工件的 tarball 的 pom 文件之外，并没有真正改变任何东西。

随意发布任何其他建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T00:44:34.670

我已经快速浏览了这个插件，我没有看到引入 Java 和 XML 等依赖项来管理您的项目的意义。

实际上我认为我们已经有了更好的东西**：** Dist [::Zilla](https://github.com/rjbs/dist-zilla/)。设置您的项目就像`dzil new My::Project`- 并`Dist::Zilla`处理其他所有事情一样简单。

没有更多的 Makefiles、READMEs、MANIFESTs... 只需键入`dzil build/test/install/release`，一切都会根据您的个人资料和`dist.ini`.

如果您缺少 CPAN 的一些依赖项，请将其添加到您的配置中，[cpanminus](https://metacpan.org/module/App%3a%3acpanminus)可以顺利集成到您的新工作流程中。

```
[alias]
    instdeps = install --install-command "cpanm ." 
```

# sql - 使用 COUNT 的 SQL JOIN

> ID：11296621
> 
> 赞同：0
> 
> 时间：2012-07-02T15:25:40.227
> 
> 标签：sql

我想以`JOIN`一种`COUNT`使用sql`COUNT`作为`JOIN`.

例如

```
SELECT * FROM tbl1
  INNER JOIN (SELECT * FROM tbl2) t2
  ON (SELECT COUNT(*) FROM tbl1) > 0 
```

这是可能的还是有人可以告诉我另一种方式？

PS-我遇到的真正问题是我有两个表 A 和 B，我需要从创建日期大于某个值的 A 中选择 id。同时，我想确保表 B 在表 A 中没有该 id。这工作正常，但是当表 B 中没有数据时，查询没有结果。

```
SELECT a.user_id from (SELECT * FROM A WHERE DATEDIFF(event_date,'certain_value') >=another_value) a INNER JOIN B b ON a.user_id != b.user_id 
```

我尝试像这样使用计数但失败了

```
SELECT a.user_id from (SELECT * FROM A WHERE DATEDIFF(event_date,'certain_value') >=another_value) a INNER JOIN B b ON count(B.user_id) = 0 OR a.user_id != b.user_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:52:58.957

编写查询的方式，条件 in`ON`什么都不做，相当于`ON (1=1)`（如果 tbl1 中没有记录，`select * from tbl1 inner join tbl2 on [any condition]`将始终返回空结果集）。

从您更新的问题中，我认为您需要：

```
SELECT
    a.user_id
FROM
    (SELECT *
     FROM   A
     WHERE  DATEDIFF(A.event_date, 'certain_value') >= another_value) AS a
WHERE
    NOT EXISTS (SELECT 1
                FROM   b
                WHERE  b.user_id = a.user_id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:35:46.017

尝试这个：

```
SELECT A.user_id
FROM A
WHERE DATEDIFF(A.event_date,'certain_value') >= another_value)
  AND NOT EXISTS (SELECT B.user_id FROM B Where A.user_id = B.user_id) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T17:15:31.903

“仅当两个表中至少有一行与连接条件匹配时，内部连接才会返回行。” 您想要的是一个 OUTER JOIN，这样即使 B 中没有数据，您也可以获得结果。请参阅：http: [//msdn.microsoft.com/en-us/library/aa213228%28v=SQL.80%29。 aspx](http://msdn.microsoft.com/en-us/library/aa213228%28v=SQL.80%29.aspx)

如果我正确理解您的问题，但您可能想使用：

```
WHERE a.user_id NOT IN (SELECT user_id FROM B) 
```

适合您的情况，而不是在表上进行连接，因为您根本没有从 B 中选择任何数据

# javascript - 将 URL 作为 JavaScript 中的锚标记？

> ID：11296624
> 
> 赞同：-1
> 
> 时间：2012-07-02T15:25:49.987
> 
> 标签：javascript

我得到一个 URL 作为输入，我想将它分配给一个锚标记。

假设网址是

```
var url = "http://www.google.com"; 
```

我想把这个网址像这样

```
<a href="http://www.google.com">http://www.google.com</a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T15:27:50.327

[文档.createElement](https://developer.mozilla.org/en/DOM/document.createElement)

```
var a = document.createElement('a');
a.href = "http://google.com";
a.textContent = a.href 
```

# c# - 您如何确保网页等待上传完成？

> ID：11296629
> 
> 赞同：2
> 
> 时间：2012-07-02T15:26:28.033
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2

我有以下代码用于将大文件（~6MB）上传到 ASP .NET MVC2 应用程序。文件上传后，控制器可能需要 5 分钟才能返回响应。

在此期间，IE9 不会显示任何处理尚未完成的迹象，即用户可以选择其他文件并重新发布。

您如何通知用户操作未完成并禁用提交按钮，直到旧文件处理完成？

```
<% using (Html.BeginForm("InvoiceImport", "Grid", 
               FormMethod.Post, new { enctype = "multipart/form-data" }))
{%>
<input name="uploadFile" type="file" />
<input type="submit" name='invoice' value='Read'/>
<%} %> 
```

控制器：

```
[AcceptVerbs(HttpVerbs.Post)]
[Authorize]
ActionResult ImportFromFile(HttpPostedFileBase uploadFile)
{
    Server.ScriptTimeout = 30 * 60;
    var res = ImportFromFile(uploadFile.InputStream); // takes lot of time
    TempData["Message"] = uploadFile.FileName + " Readed records " + res;
    return RedirectToAction("Complete");
} 
```

**更新**

我看起来最重要的问题是防止重复提交。我尝试了下面的代码来防止重复提交，但由于未知原因，如果第二次按下提交按钮，则 Session["Upload"] 为空。如何防止重复提交？

```
View added

 <% if (TempData["Message"]!=null) { %>
   setTimeout( function() {
     showMessage ( '<%= TempData["Message"] as string %>');
    }, 300 );
    <% } %>

Controller

ActionResult ImportFromFile(HttpPostedFileBase uploadFile)
    {

        if (Session["Upload"] != null)
        {
            // todo: why this point is never reached ?
            TempData["Message"] = Session["Upload"] + " Please wait file is being processed";
            return View();
        }

        Session.Add("Upload", uploadFile.FileName);
        Server.ScriptTimeout = 30 * 60;
        ImportFromFile(uploadFile.InputStream);
        TempData["Message"] = uploadFile.FileName + " completed";
        Session.Remove("Upload");
        return RedirectToAction("Complete");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:46:24.777

在使用异步调用时，向用户显示调用正在进行中。查看[此](http://blogs.claritycon.com/blog/2011/04/roll-your-own-mvc-3-long-polling-chat-site/)博客文章以了解长轮询，这将允许您进行在进程完成时返回的调用。

1.  向用户显示他们已提交表单并禁用提交按钮。
2.  进行 Ajax 调用以实际进行调用并进行上传。
3.  当它完成时通知用户作业已经完成。

如果您担心他们会刷新页面并因此能够再次提交，您需要在后端跟踪他们的提交状态。某种锁定，因此您会知道用户正在运行上传，并且他们应该无法再次上传。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T15:58:43.050

解决问题的最简单方法是使用 javascript 禁用按钮和字段。在我们的页面中是否有像 jQuery 这样的 javascript 库？

```
$('form').submit(function(){
   $(this).find('input').prop('disabled', true)
}); 
```

类似 jQuery 的东西。如果您有多个表单，您可能希望在表单中添加一个 id 以仅针对该表单。

更新：

由于重新提交的问题没有简单的解决方案：

避免F5问题。确保在 POST 之后重定向。你这样做，但我想如果需要很长时间，他们可能会同时按 F5。

针对这个问题，我想到了一些解决方案。

*   （如果您使用 SQL）生成一个 guid，您将其放置在表单页面上的隐藏字段中。将此列为数据库中的唯一列，并将其与其余信息一起插入。如果他们尝试重新提交 SQL 将通过抛出您可以处理的异常来保护您。

*   有上述技术的替代方案。也许您将这些 guid 存储在一个单独的表中并对其进行检查，或者可能存储在 XML 或缓存或其他任何东西中。

*   当您提交表单时，请使用 javascript 添加时间戳。您在服务器上做的第一件事是确保您在单击按钮后的 x 秒内。

*   提交时（第一次提交后），您可以使用 javascript 添加警告。

    window.onbeforeunload = function(){ return '已经保存！请按否'; };

最后一个解决方案一点也不安全，但很容易添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T15:33:25.073

您应该考虑使用 Asyncronus 控制器。

这样，它将在单独的线程中运行上传，并且页面将不再锁定。

查看以下链接：

[使用异步控制器](http://msdn.microsoft.com/en-us/library/ee728598.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T15:47:07.117

考虑使用一些**ajaxified**上传解决方案，您可以在其中向用户显示过程的进度，直到完成。

[这个](https://stackoverflow.com/a/7912918/40521)SO 答案给出了使用[Valums](http://valums.com/ajax-upload/) ajax 上传的详细示例。个人[达林](https://stackoverflow.com/users/29407/darin-dimitrov)喜欢这个解决方案。所以应该是不错的。

# objective-c - 如何在没有菜单快捷方式的情况下关闭 Cmd+W 上的 NSWindow？

> ID：11296630
> 
> 赞同：4
> 
> 时间：2012-07-02T15:26:28.097
> 
> 标签：objective-c, xcode, keyboard-shortcuts, nswindow, keydown

我正在将 Windows 应用程序移植到 Mac OS X Cocoa，它必须尽可能相似，因此我的菜单中没有带有绑定快捷方式的“关闭窗口”菜单项。

但我仍然希望能够通过`Cmd`+ `W`Shortcut 关闭它们，有没有办法在不处理 keyDown 事件的情况下做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T15:59:05.310

最终，我在我的*主菜单中实现了**关闭* ，它发送到并具有+快捷方式。`menu item`*`performClose``First Responder``Cmd``W`*

# c# - 将一个简单的字符串从控制器传递到视图 MVC3

> ID：11296634
> 
> 赞同：47
> 
> 时间：2012-07-02T15:26:44.017
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, viewbag

我知道这看起来很基本，而且应该是，但我不知道我哪里出错了。（我已经阅读了其他类似标题的文章，以及网络上的其他资源，但仍然无法弄清楚），所以任何帮助将不胜感激。

我有一个控制器，我在其中设置了一个字符串变量。现在我不介意这是否采用属性、ActionResult 或直接方法的形式。我只想要一个可以在控制器中使用的简单字符串，并将其返回给视图。

基本上我要做的是列出给定文件夹中的文件。所以我的逻辑是这样的：

1.  找到当前文件夹（部分成功）
2.  将路径附加到您要定位的文件所在的位置。即，如果我当前的文件夹是 Web\，那么如果我想列出所有 CSS 文件，我将附加类似“Content\CSS”的内容。（我这样做是因为我希望允许用户通过选择要应用的 css 来动态更改站点）。所以它看起来像：

    CurrentPath += "内容\CSS"

3.  我想将文件名加载到数组或列表中

4.  我想将此列表传递给我的视图以在组合框中（位于我的 _Layout.cshtml 上）中呈现。

重要的是要知道我正在尝试查看 _Layout.cshtml 上的字符串，因为我不能为它构建另一个视图。（除非我错了，在这种情况下，我会感谢任何帮助）。

目前我仍在努力将一个简单的字符串传递给我的视图，我可以像在步骤 2 中那样自由地操作它。

我从一个单独的静态类和一个全局变量开始：

```
public static class MyTheme
{
    public static string CurrentPath = HostingEnvironment.MapPath("~");
} 
```

在我看来，我有：@Html.Label(MyProject.Web.Controllers.MyTheme.CurrentPath);

这行得通，但是当我尝试使用 if 语句来确定字符串是空还是空时，我得到了错误。所以我接下来的尝试都失败了。

接下来我决定把它带入一个控制器（在本例中是我的 BaseController），这就是我开始遇到问题的时候。下面的代码：

BaseController 类内部

```
 public ActionResult ThemePath()
    {
        string currentPath = Server.MapPath("~");

        if (string.IsNullOrEmpty(currentPath))
        {
            currentPath = "Error!";
        }
        else
        {
            currentPath = "Our Path Is: " + currentPath;
        }

        return View(currentPath);
    } 
```

我不知道如何从我的 _Layout.cshtml 视图中访问和运行它

所以接下来我在 BaseController 中尝试了一个标准方法：

```
 public string ThemePath()
    {
        string currentPath = Server.MapPath("~");

        if (string.IsNullOrEmpty(currentPath))
        {
            currentPath = "Error!";
        }
        else
        {
            currentPath = "Our Path Is: " + currentPath;
        }

        return currentPath;
    } 
```

同样我不知道如何在视图中访问它

最后我尝试使用 ViewBag 和 ViewData，现在我简直要疯了！所以在我的基本控制器中，我有：

```
 public string ThemePath()
    {
        ViewBag.currentPath = Server.MapPath("~");

        if (string.IsNullOrEmpty(ViewBag.currentPath))
        {
            ViewBag.currentPath = "Error!";
        }
        else
        {
            ViewBag.currentPath = "Our Path Is: " + ViewBag.currentPath;
        }

        return ViewBag.currentPath;
    } 
```

在我看来我有

```
 @Html.Label(ViewBag.CurrentPath); 
```

甚至

```
 @Html.Label(ViewBag.CurrentPath.ToString()); 
```

带有以下友好的小错误消息：

CS1973：“System.Web.Mvc.HtmlHelper”没有名为“Label”的适用方法，但似乎具有该名称的扩展方法。扩展方法不能动态调度。考虑强制转换动态参数或在没有扩展方法语法的情况下调用扩展方法。

最后我在基础中尝试了 ViewData 如下： public string ThemePath() { ViewData["currentPath"] = Server.MapPath("~");

```
 if (string.IsNullOrEmpty(ViewData["currentPath)"].ToString()))
        {
            ViewData["currentPath"] = "Error!";
        }
        else
        {
            ViewData["currentPath"] = "Our Path Is: " + ViewData["currentPath"];
        }

        return ViewData["currentPath"].ToString();
    } 
```

并相应地在我尝试的 _Layout.cshtml 中：

```
 @Html.Label(ViewData["CurrentPath"].ToString()); 
```

没有 .ToString() 我得到上述错误：

使用 .ToString() 我得到一个空引用执行错误。

所以我现在有点迷路了，真的不知道我哪里出错了。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-07-02T15:31:03.037

要将字符串作为模型传递给视图，您可以执行以下操作：

```
public ActionResult Index()
{
    string myString = "This is my string";
    return View((object)myString);
} 
```

您必须将其转换为对象，以便 MVC 不会尝试将字符串作为视图名称加载，而是将其作为模型传递。你也可以写：

```
return View("Index", myString); 
```

..这有点冗长。

然后在您的视图中，只需将其键入为字符串：

```
@model string

<p>Value: @Model</p> 
```

然后你可以随心所欲地操纵模型。

要从布局页面访问它，最好为此创建一个 HtmlExtension：

```
public static string GetThemePath(this HtmlHelper helper)
{
    return "/path-to-theme";
} 
```

然后在您的布局页面中：

```
<p>Value: @Html.GetThemePath()</p> 
```

希望您可以将其应用到您自己的场景中。

编辑：显式 HtmlHelper 代码：

```
namespace <root app namespace>
{
    public static class Helpers
    {
        public static string GetThemePath(this HtmlHelper helper)
        {
            return System.Web.Hosting.HostingEnvironment.MapPath("~") + "/path-to-theme";
        }
    }
} 
```

那么在你看来：

```
@{
    var path = Html.GetThemePath();
    // .. do stuff
} 
```

或者： `<p>Path: @Html.GetThemePath()</p>`

编辑2：

如前所述，如果您`@using`在视图顶部添加一条语句，并且名称空间指向您的助手所在的名称，则助手将起作用。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-08-07T08:08:11.613

使用**ViewBag**

```
ViewBag.MyString = "some string";
return View(); 
```

在你看来

```
<h1>@ViewBag.MyString</h1> 
```

我知道这不能回答你的问题（它已经得到了回答），但是你的问题的标题非常广泛，可以让任何人在这个页面上搜索一个查询以将一个简单的字符串从 Controller 传递给 View。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-02T16:48:25.473

为什么不使用简单的字符串参数创建一个视图模型，然后将其传递给视图？它具有可扩展性的好处（即，您可以添加任何其他您可能想要在控制器中设置的东西）而且它相当简单。

```
public class MyViewModel
{
    public string YourString { get; set; }
} 
```

在视图中

```
@model MyViewModel
@Html.Label(model => model.YourString) 
```

在控制器中

```
public ActionResult Index() 
{
     myViewModel = new MyViewModel();
     myViewModel.YourString = "However you are setting this."
     return View(myViewModel)
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-02T15:35:21.047

@Steve Hobbs 的答案可能是最好的，但您的其他一些解决方案*可能*会奏效。例如， `@Html.Label(ViewBag.CurrentPath);`可能会使用显式强制转换，例如`@Html.Label((string)ViewBag.CurrentPath);`. 此外，您对`currentPath`in的引用`@Html.Label(ViewData["CurrentPath"].ToString());`是大写的，而您的其他代码不是，这可能就是您得到空引用异常的原因。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-02T15:35:48.357

只需像这样定义您的操作方法

```
public string ThemePath() 
```

并简单地返回字符串本身。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-09-20T17:42:09.477

如果您试图简单地将字符串返回到视图，请尝试以下操作：

```
public string Test()
{
     return "test";
} 
```

这将返回一个包含单词 test 的视图。您可以在字符串中插入一些 html。

你也可以试试这个：

```
public ActionResult Index()
{
    return Content("<html><b>test</b></html>");
} 
```

# sql - 排序后按字母顺序排列结果

> ID：11296636
> 
> 赞同：0
> 
> 时间：2012-07-02T15:26:54.167
> 
> 标签：sql, list, sorting, sql-order-by

我正在尝试编写一个查询，将表的结果排序为 3 个部分，并且我希望每个部分在完成后按字母顺序排列。这是我写的查询：

```
SELECT * FROM 
(SELECT TOP 100 PERCENT * FROM Hospital WHERE Status = 1 Order By HospitalShortName ) 
As Result Order BY CASE HospitalType 
WHEN 'HOS' THEN 1 WHEN 'NH' THEN 2 ELSE 3 END 
```

所以我的预期结果是这样的：

*   医院A
*   医院B
*   医院C
*   疗养院甲
*   等等

但是，此查询返回分为正确组但不按 HospitalShortName 字母顺序的列表。我理解为什么上面的查询不起作用，但我不知道从这里去哪里。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T15:29:33.210

不需要子查询。只需将第二列添加到您的外部 ORDER BY 子句中。

```
SELECT * 
    FROM Hospital 
    WHERE Status = 1 
    ORDER BY CASE HospitalType 
                 WHEN 'HOS' THEN 1 
                 WHEN 'NH' THEN 2 
                 ELSE 3 
              END, 
              HospitalShortName 
```

# ios - AVAssetWriter 如何创建没有压缩的 mov 视频？

> ID：11296642
> 
> 赞同：4
> 
> 时间：2012-07-02T15:27:15.967
> 
> 标签：ios, compression, avfoundation, avassetwriter

我正在从一组图像创建一个视频。我工作的目的是创建一个没有压缩的 .mov 视频。我在开发人员库中看到它存在一个键“AVVideoCompressionPropertiesKey”，但我不知道如何使用此键指定不压缩。

请问你能帮帮我吗？

这是我的示例代码：

```
NSDictionary *videoCleanApertureSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                            [NSNumber numberWithInt:320], AVVideoCleanApertureWidthKey,
                                            [NSNumber numberWithInt:480], AVVideoCleanApertureHeightKey,
                                            [NSNumber numberWithInt:10], AVVideoCleanApertureHorizontalOffsetKey,
                                            [NSNumber numberWithInt:10], AVVideoCleanApertureVerticalOffsetKey,
                                            nil];

NSDictionary *codecSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                               [NSNumber numberWithInt:960000], AVVideoAverageBitRateKey,
                               [NSNumber numberWithInt:1],AVVideoMaxKeyFrameIntervalKey,
                               videoCleanApertureSettings, AVVideoCleanApertureKey,
                               nil];

NSDictionary *videoOutputSettings = [NSDictionary dictionaryWithObjectsAndKeys:AVVideoCodecH264, AVVideoCodecKey,codecSettings,AVVideoCompressionPropertiesKey, [NSNumber numberWithInt:size.width], AVVideoWidthKey,
                                     [NSNumber numberWithInt:size.height], AVVideoHeightKey, nil];

self.videoWriterInput = [AVAssetWriterInput assetWriterInputWithMediaType:AVMediaTypeVideo outputSettings:videoOutputSettings]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T23:51:58.203

尝试使用 AVVideoCodecJPEG 并将 AVVideoQualityKey 值设置为 NSNumber 1.0。另一种方法是指定 H264，将比特率设置为非常高的值，并将关键帧间隔指定为 1（即所有关键帧）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T15:14:54.697

该键不是用于禁用压缩，而是为某些编解码器指定特定的压缩值，例如 jpg 或 h264 .Ie

```
 [videoSettings addEntriesFromDictionary:[NSDictionary dictionaryWithObjectsAndKeys:
                                                 AVVideoCodecH264, AVVideoCodecKey,
                                                 nil]];

        NSMutableDictionary* videoCompressionSettings = [NSMutableDictionary dictionary];

        if ([[Preferences instance] recordingH264Keyframes] > 0) {
            [videoCompressionSettings addEntriesFromDictionary:[NSDictionary dictionaryWithObjectsAndKeys:
                                                     [NSNumber numberWithInt:[[Preferences instance] recordingH264Keyframes]], AVVideoMaxKeyFrameIntervalKey,
                                                     nil]];
        }

        if ([[Preferences instance] recordingH264Bitrate] > 0) {
            [videoCompressionSettings addEntriesFromDictionary:[NSDictionary dictionaryWithObjectsAndKeys:
                                                     [NSNumber numberWithInt:[[Preferences instance] recordingH264Bitrate]*1000], AVVideoAverageBitRateKey,
                                                     nil]];
        }

        if ([videoCompressionSettings count]) {
            [videoSettings addEntriesFromDictionary:[NSDictionary dictionaryWithObjectsAndKeys:videoCompressionSettings,AVVideoCompressionPropertiesKey,nil]];
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-01T13:37:14.277

ProRes4444 视频编解码器是 Apple 提供的最接近未压缩编解码器的产品。此编解码器不适用于 iOS 上仅用于编写视频内容的 OS X。

在 iOS 上无法导出未压缩的视频内容。

# android - 扩展 LinearLayout 空引用

> ID：11296647
> 
> 赞同：1
> 
> 时间：2012-07-02T15:27:35.047
> 
> 标签：android, xamarin.android

我希望能够基于 xml 中定义的布局实例化一个新的自定义 LinearLayout 类。无论我做什么，在运行时，LinearLayout 和我所有的 TextViews 都会抛出一个空引用异常。

传输列表行.axml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_margin="5dp"
android:padding="5dp">
<TextView
    android:id="@+id/transferSerial"
    android:layout_width="0dp"
    android:layout_weight=".30"
    android:layout_height="wrap_content"
    android:layout_margin="5dp"
    android:padding="5dp"
    android:gravity="center" />
<TextView
    android:id="@+id/transferModel"
    android:layout_width="0dp"
    android:layout_weight=".30"
    android:layout_height="wrap_content"
    android:layout_margin="5dp"
    android:padding="5dp"
    android:gravity="center" />
<TextView
    android:id="@+id/transferSite"
    android:layout_width="0dp"
    android:layout_weight=".30"
    android:layout_height="wrap_content"
    android:layout_margin="5dp"
    android:padding="5dp"
    android:gravity="center" />
<Button
    android:id="@+id/transferDelete"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="5dp"
    android:padding="5dp"
    android:gravity="center"
    android:src="@drawable/delete" /> 
```

TransferListRow.cs 尝试 1：

```
 sealed class TransferListRow : LinearLayout
 {
    private readonly Context _context;

    public TransferListRow(Context context, string serial, string model, string site)
        :base(context)
    {
        _context = context;

        LayoutInflator inflator = (LayoutInflator) _context.GetSystemService(Context.LayoutInflaterService);
        inflator.Inflate(Resource.Layout.transferListRow, null);

        TextView s = (TextView) FindViewById(Resource.Id.transferSerial);
        s.Text = serial;

        TextView m = (TextView) FindViewById(Resource.Id.transferModel);
        m.Text = model;

        TextView st = (TextView) FindViewById(Resource.Id.transferSite);
        st.Text = site;
    }
} 
```

TransferListRow.cs 尝试 2：

```
sealed class TransferListRow : LinearLayout
{
    private readonly Context _context;

    public TransferListRow(Context context, string serial, string model, string site)
        :base(context)
    {
        _context = context;

        LinearLayout layout = (LinearLayout) FindViewById(Resource.Layout.transferListRow);

        TextView s = (TextView) layout.FindViewById(Resource.Id.transferSerial);
        s.Text = serial;

        TextView m = (TextView) layout.FindViewById(Resource.Id.transferModel);
        m.Text = model;

        TextView st = (TextView) layout.FindViewById(Resource.Id.transferSite);
        st.Text = site;

        AddView(s);
        AddView(m);
        AddView(st);
    }
} 
```

最终目标是从我的主要活动中能够在按钮单击事件中执行以下操作：

```
 mainLayout.AddView(new TransferListRow(this, "serial", "model", "site")); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T15:37:43.570

1) 因为您正在扩展 LinearLayout，所以在 XML 中定义的布局不需要具有 LinearLayout 包装器。而是使用`<merge> ... </merge>`.

2）在您的构造函数中，您必须调用`inflator.Inflate(Resource.Layout.transferListRow, this);`. 请注意**此**参数。这会将 XML 中定义的所有元素作为子元素膨胀到 LinearLayout 中。

3）当inflating完成时，框架会通知你，`onFinishInflate()`并且可以找到视图`findViewById()`。因此，`onFinishInflate()`您可以将您的 TextViews 分配给您的成员变量。

就是这样 ：）

# google-apps-script - 无法让 DocumentBodySection.appendImage(InlineImage) 正常工作？

> ID：11296648
> 
> 赞同：1
> 
> 时间：2012-07-02T15:27:36.947
> 
> 标签：google-apps-script, google-docs

[https://developers.google.com/apps-script/class_documentbodysection#appendImage](https://developers.google.com/apps-script/class_documentbodysection#appendImage)

我基本上打开一个文档并获取它的 DocumentBodySection，然后遍历元素，复制它们 (Element.copy()) 以获得深度分离副本，然后将元素附加到另一个文档。

这适用于段落和其他元素类型，但是当涉及内联图像时，我在生成的文档中得到一个断开的链接。

有人让它工作吗？

这是一个片段

```
function appendSection(doc, section) {
  for (i=0; i<section.getNumChildren(); i++) {
    var el = section.getChild(i);
    if (el.getType() == DocumentApp.ElementType.PARAGRAPH)
    {
      if (el.getNumChildren() != 0) {
        var el_child = el.getChild(0);
        if (el_child.getType() == DocumentApp.ElementType.INLINE_IMAGE)
        {
          doc.appendImage(el_child.asInlineImage().copy());
          Logger.log("Image");
        }
      }
      doc.appendParagraph(el.copy());
      Logger.log("Paragraph");
    }
  }     
  return doc
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:49:11.100

我让 appendImage 在不一样但类似的情况下为我工作。

希望它也对你有用，请告诉我

根据您的代码进行调整，只需添加/更改 Blob 行以避免重复的内联图像

```
 if (el_child.getType() == DocumentApp.ElementType.INLINE_IMAGE)
  {
    var blob = el_child.asInlineImage().getBlob();
    doc.appendImage(blob);
  } 
```

编辑 1：如下所述，当循环遍历 bodySection 时，任何 INLINE_IMAGE 都将嵌入到 PARAGRAPH 中。下面的代码适用于任何未用文本包装的 INLINE_IMAGE。如果是这种情况，您需要更深入地挖掘。

```
for (var elem = 0; elem < bodySection.getNumChildren(); elem++) {
          var theElem = bodySection.getChild(elem).copy();
          if (theElem.getType() == DocumentApp.ElementType.PARAGRAPH) {
            if (theElem.asParagraph().getNumChildren() != 0 && theElem.asParagraph().getChild(0).getType() == DocumentApp.ElementType.INLINE_IMAGE) {
              var blob = theElem.asParagraph().getChild(0).asInlineImage().getBlob();
              targetDoc.appendImage(blob);
            }
            else targetDoc.appendParagraph(theElem.asParagraph());
          }
          if (theElem.getType() == DocumentApp.ElementType.LIST_ITEM) targetDoc.appendListItem(theElem.asListItem().copy());
          if (theElem.getType() == DocumentApp.ElementType.TABLE) targetDoc.appendTable(theElem.asTable());
        } 
```

# windows-7 - Win 7 任务计划程序交互模式

> ID：11296662
> 
> 赞同：0
> 
> 时间：2012-07-02T15:28:10.703
> 
> 标签：windows-7, batch-file, windows-task-scheduler

我想每天在 Win7 机器上运行一个预定的 bat 文件。该文件需要以交互方式启动 IE 并爬取网页列表以生成网络流量。我可以使用 wget 实现这一点，它会生成流量，但我需要 IE 以交互方式运行，以便它通过跟踪访问的 url 的 IE 插件启动并生成流量。互动式

需要在用户登录和/或每天早上 5 点重复 12 小时未登录时以交互方式运行 问题是 IE 无法启动。

bat 文件看起来像这样

开始 /d iexplore.exe [http://www.google.com](http://www.google.com)

ping 1.1.1.1 -w 5000 >NUL

开始 /d iexplore.exe [http://www.yahoo.com](http://www.yahoo.com)

taskkill /im iexplore.exe

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:56:13.347

我认为你需要这样的路径，或者它需要引号“”

“C:\Program Files (x86)\Internet Explorer\iexplore.exe” [http://www.google.com](http://www.google.com)

# jquery - 计算由 Jquery 3D 旋转插件创建的新形状的高度

> ID：11296663
> 
> 赞同：0
> 
> 时间：2012-07-02T15:28:11.610
> 
> 标签：jquery, math, 3d, shape

我正在使用[这个 jquery 插件](http://www.zachstronaut.com/projects/rotate3di/#demos)来旋转一个 div。我想知道计算新形状高度的数学方程。“新高度”是指形状最顶部到形状最底部的高度，但从上到下是一条直线。我想更改容器 DIV 高度以匹配形状的新高度.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:50:42.667

该插件通过在 Y 方向上倾斜一定程度，并在 X 方向上按一定比例缩放来工作。

倾斜度从 0 线性移动到 360。缩放从 100% 线性移动到 0%，然后回到 100%。变换的定义是：

```
Skew((x,y),degreeX,degreeY) -> (x + tan(degreeX)*y, y + tan(degreeY)*x)

Scale((x,y),scaleX,scaleY) -> (x*scaleX, y*scaleY)

Scale(Skew((x,y),0,deg),scale,0) = (x*scale, y + tan(deg)*x) 
```

转换大小`W × H`为 的 div ，该 div 的最大高度为 89°：

```
2*Scale(Skew((W/2,H/2),0,89),1/180,0) = (W*(1/180), H + tan(89°)*W)

New width = W*(1/180) = W/180
New height = H + tan(89°)*W ≈ H + 57.29*W 
```

这可能比你想象的要高很多。

* * *

`atan(0.5)*sin(deg)`您可以通过按度倾斜和按 0.0 倍缩放来实现更逼真的旋转`cos(deg)`。这将给出`H + W/2`90° 的最大高度。

# php - 如何使用未索引的字段值搜索索引中的所有内容，例如使用 zend_search_lucene 索引的 URL？

> ID：11296668
> 
> 赞同：1
> 
> 时间：2012-07-02T15:28:28.027
> 
> 标签：php, lucene, full-text-search, zend-search-lucene

我正在使用 zend_search_Lucene 来索引文件及其内容。

下面是我正在使用的代码：

```
 $index=$index = new Zend_Search_Lucene('/home/project/news4u/data/search_file/lucene.customer.index', new);
    $doc = new Zend_Search_Lucene_Document();
    $doc->addField(Zend_Search_Lucene_Field::unIndexed('URL', $file1_path));
    $doc->addField(Zend_Search_Lucene_Field::text('contents',$content));
    $index->addDocument($doc); 
```

现在我想查看索引文件中的所有 URL：字段名称 URL 的类型为“unIndexed”，我可以通过将 $file1_path 传递给搜索查询来显示内容。请帮忙

# colors - 彩色列表视图

> ID：11296671
> 
> 赞同：0
> 
> 时间：2012-07-02T15:28:39.123
> 
> 标签：colors, android-listview

是否可以为（动态）ListView 中的不同行设置不同的颜色？

我知道我可以设置背景颜色，例如在项目单击事件侦听器上，但我想知道有没有办法在向适配器添加项目时动态设置颜色？

# 不好吗？

```
itemAdapter = new ArrayAdapter<Bundle>(this, android.R.layout.simple_list_item_1, itemArray) {
         @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                View row;
                LayoutInflater inflater = (LayoutInflater)getSystemService
                  (Context.LAYOUT_INFLATER_SERVICE);

                if (null == convertView) {
                    row = inflater.inflate(android.R.layout.simple_list_item_1, null);
                } else {
                    row = convertView;
                }

                row.setBackgroundColor(getItem(position).getInt("color"));
                TextView tv = (TextView) row.findViewById(android.R.id.text1);
                tv.setText(getItem(position).getString("text"));

                return row;
            }
     }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:43:43.373

您必须编写自己的自定义 ListAdapter。如果您的数据是数组或 ArrayList，您可以简单地扩展 ArrayAdapter，并覆盖该`getView()`方法。编写实现有很多答案`getView()`，但您的特定问题的基本答案是您需要添加一些逻辑：

```
public View getView(int pos, View convertView, ViewGroup parent) {

    //do initialization work with the convertView

    if(/*some logic determining whether the view should be colored*/) {
        convertView.setBackgroundColor(myColor);
    } else convertView.setBackgroundColor(defaultColor);
} 
```

要记住的重要一点是，如果它不符合逻辑标准，则将其设置回另一种颜色，因为视图会被回收和重用，否则可能会处于意外状态。

# java-me - 使 lwuit 应用程序非触摸，简单的步骤？

> ID：11296675
> 
> 赞同：2
> 
> 时间：2012-07-02T15:28:48.187
> 
> 标签：java-me, lwuit, nokia

我们已经有一个功能齐全的 lwuit 应用程序，现在正试图使其轻松支持非触摸设备。是否有任何快速步骤使其支持它？任何代码片段或示例都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T06:41:31.513

通常它“正常工作”，如果您有具体问题，您应该将它们改进为对您不起作用的内容。

确保您具有特定组件的选定 UIID 的样式，否则它们将难以区分。

# iphone - 设置导航栏的标题？

> ID：11296676
> 
> 赞同：-1
> 
> 时间：2012-07-02T15:28:48.693
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, uinavigationbar

我已经尝试了我能想到的一切。

```
self.navigationBar = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
self.navigationBar.autoresizingMask = UIViewAutoresizingFlexibleWidth;
    self.navigationBar.topItem.title = @"Title";
    self.navigationItem.title = @"Title";
    self.title = @"Title";
    self.navigationBar.topItem.titleView.backgroundColor = [UIColor blueColor];
    self.navigationController.navigationBar.topItem.title = @"Title";
[self.view addSubview:self.navigationBar]; 
```

我已经尝试了所有这些，希望其中一个可以工作，但没有一个可以。如何更改此导航栏的标题？这是在 UIViewController 的 init 方法中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:34:58.043

您需要设置自定义 NavigationBar 的 items 数组。您应该传入一个数组，其中包含一个具有您指定标题的项目：

```
UINavigationBar *bar = [[[UINavigationBar alloc] init] autorelease];

UINavigationItem *navItem = [[[UINavigationItem alloc] initWithTitle:@"Title"] autorelease];
bar.items = [NSArray arrayWithObject:navItem]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T18:32:29.450

这总是对我有用：

```
self.navigationItem.title = @"Title"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T15:47:43.513

我不完全知道你为什么要把它放在init中，通常我宁愿把这段代码放在viewDidLoad中。

但是，您的代码存在问题的是，当您初始化 UINavigationBar 时，它的 items 数组中没有任何项目。因此，您实际上是在向 nil 发送消息，这不会使您的程序崩溃，但不会做任何事情。

这就是我要做的。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UINavigationBar *navigationBar = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    navigationBar.autoresizingMask = UIViewAutoresizingFlexibleWidth;
    [navigationBar setItems:[NSArray arrayWithObject:[[UINavigationItem alloc]initWithTitle:@"Title"]]];
    navigationBar.topItem.titleView.backgroundColor = [UIColor blueColor];
    [self.view addSubview:navigationBar];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-30T12:50:33.543

如果您使用的是导航控制器，那么

```
self.title = @"My Title"; 
```

应该在 iOS 7 中进行。

# unattended-processing - SysPrep 后从 SetupComplete.cmd 执行的 RunOnce 命令不起作用，而它在 Windows 中运行良好

> ID：11296679
> 
> 赞同：3
> 
> 时间：2012-07-02T15:28:53.570
> 
> 标签：unattended-processing

操作系统：Windows 7 Embedded 64 位（使用的模板：应用程序兼容性）

在 SetupComplete.cmd 运行并且计算机重新启动后，我正在尝试运行另一个脚本 (SetupComplete2.cmd)。

我在 SetupComplete.cmd 中添加了这一行：

```
REG ADD "HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\RunOnce" /v Setup /t REG_SZ /d "cmd.exe /C C:\Windows\Setup\Scripts\SetupComplete2.cmd" /f 
```

此命令在 Windows 上运行良好，我对其进行了多次测试，但由于某种原因从 SetupComplete.cmd 运行时它不起作用...

谁能告诉我我错过了什么？

或者，这里的任何人都可以建议在初始设置重新启动后只运行一次另一个脚本的方法吗？

我需要运行另一个脚本，因为我在 SetupComplete.cmd 脚本中重命名计算机，并且我在 SetupComplete2.cmd 中自动安装依赖于新计算机名称的应用程序，我无法重命名计算机并在之后立即安装应用程序，由于计算机重命名直到重新启动后才完全生效，我错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-07T15:44:58.690

几个链接似乎暗示它不仅仅是命令中的一个字符串。看看这个： [http ://technet.microsoft.com/en-us/library/dd346765.aspx](http://technet.microsoft.com/en-us/library/dd346765.aspx)

还要考虑上下文。HKLM 条目将在 Local\System 帐户的上下文中运行。HKCU 条目将在用户的上下文中运行。你需要哪个？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T19:49:39.250

根据 TechNet 文章“<a href="http://technet.microsoft.com/en-us/library/cc766314%28v=ws.10%29.aspx" rel="nofollow">添加自定义脚本到Windows Setup', “Setupcomplete.cmd 文件中的命令以本地系统权限执行。

肯特英格兰在他的回答中对如何解决这个问题提出了很好的建议。我要补充一点，您不需要创建本地管理员帐户，您只需[激活内置管理员帐户](http://technet.microsoft.com/en-us/library/dd744293%28v=ws.10%29.aspx)并将其用于自动登录。

您还应该考虑使用[Microsoft 部署工具包](http://www.microsoft.com/en-us/download/details.aspx?id=25175)(MDT) 来部署 Windows。使用 MDT 的一些好处包括在使用“安装后”任务序列部署 Windows 之后安装软件，包括检查 WSUS 或 Windows 更新以获取最新更新。它还可以管理设备驱动程序和程序包，并且可以与 Windows 部署服务 (WDS) 一起使用，以允许 PXE 引导来交付您的映像。Windows Embedded PoSReady 7 是支持部署的操作系统之一。

希望这可以帮助，

编辑：我只是注意到 OP 很旧......我没有故意拖出旧帖子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:38:35.403

我正在尝试做同样的事情并遇到同样的问题。我已经在 HKLM 和 HKCU 上尝试过 RunOnce 和 RunOnce/Setup，但似乎没有任何效果。我不明白这个问题。

作为一种解决方法，我刚刚将我的第二个脚本添加到 Run 键

```
REG ADD HKLM\Software\Microsoft\Windows\CurrentVersion\Run /v Setup /t REG_SZ /d "cmd.exe /C C:\Windows\Setup\Scripts\SetupComplete2.cmd" /f 
```

然后在第二个脚本中包含一个命令删除自身（必须是本地管理员，而不是具有管理员权限的另一个帐户，否则您会遇到 UAC 问题）

```
REG DELETE HKLM\Software\Microsoft\Windows\CurrentVersion\Run /v Setup /f 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-25T01:40:53.937

在通用化您的系统之前，创建一个本地管理员帐户（例如，sysadmin）并在其 HKCU 中放置一个 RunOnce 密钥以运行您想要的任何 .cmd 或 .bat 文件。然后在您的 unattend.xml 文件中，您在 OOBE 阶段包含“Microsoft-Windows-Shell-Setup”部分，并使用“AutoLogon”组件，您可以在其中指定系统管理员、密码和自动登录的次数（通常只有一次）。我假设您已经有一个 unattend.xml 并且知道如何修改它。

您还应该跳过机器和用户 OOBE 体验，以便初始化将在没有输入的情况下运行，直到它自动登录到系统管理员并向用户提供脚本。当然，您必须 sysprep /generalize 并捕获您的 .wim 文件等。这是我在 OOBE 期间找到的交互式输入的唯一方法。

您可能会发现您的脚本需要提升权限。我认为 RunOnce 在没有管理员权限的情况下运行命令，因此用户至少需要响应提升提示，并且您的脚本必须自动提升。提升批处理文件和命令脚本是另一个主题，您可能已经知道如何执行此操作。

# ruby-on-rails - Capybara & rspec组合不能一起用，挂了2天

> ID：11296682
> 
> 赞同：1
> 
> 时间：2012-07-02T15:29:03.030
> 
> 标签：ruby-on-rails, rspec, capybara

我是 capybara & rspec 的新手，我写了一个简单的测试（在 spec/requests 下）来测试我的根路径：

```
# encoding: utf-8
require 'spec_helper'

describe "select a course" do
  before { visit root_path }

  it "should render main page well" do
    puts page.html
    page.should have_xpath("//ul[@class='thumbnails']/li[1]")
  end
end 
```

根页面包含静态和动态内容，这些内容确实包含上述​​通过 firefinder 验证的 xpath 语句。但是测试失败了。原因是“访问根路径”之后，结果（page.html）只包含整个根的静态部分。我不知道为什么。

然后我尝试了没有 rails & rspec 的独立 capybara，它工作正常。spec_helper.rb：

```
 # This file is copied to spec/ when you run 'rails generate rspec:install'     
ENV["RAILS_ENV"] ||= 'test'                                                    
require File.expand_path("../../config/environment", __FILE__)                 
require 'rspec/rails'                                                          
require 'rspec/autorun'                                                        
require 'capybara/rspec'                                                       
require 'capybara/rails'                                                       

# Requires supporting ruby files with custom matchers and macros, etc,         
# in spec/support/ and its subdirectories.                                     
Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}              

RSpec.configure do |config|                                                    
  # ## Mock Framework                                                          
  #                                                                            
  # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:
  #                                                                            
  # config.mock_with :mocha                                                    
  # config.mock_with :flexmock                                                 
  # config.mock_with :rr                                                       

  # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures 
  config.fixture_path = "#{::Rails.root}/spec/fixtures"                        

  # If you're not using ActiveRecord, or you'd prefer not to run each of your  
  # examples within a transaction, remove the following line or assign false   
  # instead of true.                                                           
  config.use_transactional_fixtures = true                                     

  # If true, the base class of anonymous controllers will be inferred          
  # automatically. This will be the default behavior in future versions of     
  # rspec-rails.                                                               
  config.infer_base_class_for_anonymous_controllers = false                    
end 
```

根页面：

```
<div class="row">
  <%= render partial: 'shared/courses_category', object: @big_categories, as: 'courses_big_categories' %>
  <div class="span9 courses">
    <ul class="thumbnails"> 
      <% @courses.each do |course| %>
        <%= render(partial: 'shared/course', object: course) %>
      <% end %>
    </ul>
  </div>
</div> 
```

它应该看起来像：

```
<ul class="thumbnails">
<li class="span3">
<div class="thumbnail">
  <a href="/courses/2"><img src="http://placehold.it/260x180" alt="掌握ruby"></a>
  <div class="caption">
    <h5>掌握ruby</h5>
    <p class="course-summary">够fashin够cool的动态语言，应用广泛，简洁直观，让你一生受用&lt;/p>
    <a class="btn btn-primary" href="/select_courses/buy/2">购买</a>&nbsp;
    <a class="btn" href="/select_courses/store/2">收藏</a>
    <span class="course-price">¥200</span>
  </div>
</div> 
```

但结果（不包括页眉和页脚）如下：

```
<div class="row">                           
  <div class="span3 courses-category-panel">
    <h2>课程分类</h2>                       
  </div>                                    

  **<div class="span9 courses">               
    <ul class="thumbnails"></ul>            
  </div>**                                    
</div> 
```

我们可以看到没有生成以下动态部分：

```
<%= render partial: 'shared/courses_category', object: @big_categories, as: 'courses_big_categories' %>

<% @courses.each do |course| %>
    <%= render(partial: 'shared/course', object: course) %>
<% end %> 
```

任何人都可以看到这个问题或帮助它吗？

添加更多信息：root_path 与 Welcome#index 匹配，其定义如下：

```
def index
    @big_categories = BigCategory.all
    @courses = Course.all
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:52:07.063

这是你的整个测试文件吗？

```
# encoding: utf-8
require 'spec_helper'

describe "select a course" do
  before { visit root_path }

  it "should render main page well" do
    puts page.html
    page.should have_xpath("//ul[@class='thumbnails']/li[1]")
  end
end 
```

似乎您的*主题*未在 rspec 文件中定义。

你应该有`subject { page }`可能之后`require 'spec_helper'`。

# c# - WCF 和 Apache 配置

> ID：11296683
> 
> 赞同：0
> 
> 时间：2012-07-02T15:29:06.403
> 
> 标签：c#, wcf, apache

我正在使用 WCF 服务。基本上我希望它从我的 C# 方法中获取信息，它们执行 SQL 存储过程。该过程的最后一部分是让一些 PHP 使用 WCF。

所以，我是 PHP/apache 的新手，以及我在网上找到的所有信息和示例，当涉及到端点时，我们必须为 SSIS 配置 web.config。

我想问你的问题是：在 Apache 中配置 WCF 应该考虑什么？

# c# - DirectoryInfo.Name 的意外行为

> ID：11296684
> 
> 赞同：1
> 
> 时间：2012-07-02T15:29:07.290
> 
> 标签：c#, visual-studio-2010, directory

我正在经历一些奇怪的事情。

每当我尝试在我的代码中创建一个[DirectoryInfo](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.aspx)对象并将其传递给根驱动器 ( `C:`) 时，该对象的 Name 属性设置为“Debug”，并且 Parent 设置为该`{bin}`文件夹。

我不经常尝试复制 Windows Explorer，所以我不知道这是否常见。

我在家里的开发 PC 上得到了这个，现在它正在工作中。

有其他人得到这个还是只有我一个？

![代码窗口](../Images/ba5658d836ae45cb1c595b2db3d59120.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T15:31:08.320

您应该将初始路径设置为`"C:\\"`or `@"C:\"`，而不是`"C:"`。

`DirectoryInfo`只是默认为当前目录，即`bin\Debug`.

# jquery - 知道 jquery 队列何时完成

> ID：11296685
> 
> 赞同：1
> 
> 时间：2012-07-02T15:29:13.513
> 
> 标签：jquery, queue

我正在使用两个 jQuery 队列，我希望其中一个在另一个完成后出列。我怎么知道第一个是否完成？我应该使用第三个队列吗？？！

这是我所拥有的：

```
var $q = $({});    
$q.queue('firstQ', function (next) {
    // blah blah
    next();
});

$q.queue('secondQ', function (next) {
    // blah blah
    next();
});

$q.dequeue("firstQ");
$q.dequeue("secondQ"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T15:31:30.010

您可以使用：

```
.queue().length 
```

检测`.queue()`长度，如果队列结束则返回`0`；

# r - R - 使用来自 gtools 的混合顺序

> ID：11296686
> 
> 赞同：0
> 
> 时间：2012-07-02T15:29:26.730
> 
> 标签：r

有人可以帮忙吗？

这是两行 R 代码，我想将它们合并为一行

```
smplA_Bacillus = subset(smplA, select = c(lab_id, Bacillus_C))
smplA_Bacillus = smplA_Bacillus[mixedorder(smplA_Bacillus$Bacillus_C),] 
```

混合顺序来自 gtools 但我不确定这两个命令是否可以一起使用。

当我尝试以下操作时，我收到一条错误消息

```
smplA_Bacillus = subset(smplA, select = c(lab_id, Bacillus_C))
smplA_Bacillus = smplA_Bacillus[mixedorder(subset(smplA, select = c(lab_id, Bacillus_C)$Bacillus_C),]) 
```

> 错误：“smplA_Bacillus = smplA_Bacillus[mixedorder(subset(smplA, select = c(lab_id, Bacillus_C)$Bacillus_C),]”中的意外 ']'

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:51:58.463

其中任何一个都应该这样做：

```
smplA_Bacillus = subset(smplA, select = c(lab_id, Bacillus_C) 
                               # select columns with subset
                                                      )[       #ordering with "["
                                               mixedorder(smplA_Bacillus$Bacillus_C), ]

 smplA_Bacillus = smplA[ mixedorder(smplA_Bacillus$Bacillus_C),
                                #ordering with the 'i' argument to"["
                                           c("lab_id", "Bacillus_C") ]
                                #selecting columns  with the j argument to "[" 
```

# visual-studio-2010 - Visual Studio 2010 和 TFS 不需要的签出

> ID：11296687
> 
> 赞同：5
> 
> 时间：2012-07-02T15:29:29.483
> 
> 标签：visual-studio-2010, tfs

我将 Visual Studio 2010 SP1 与 Team Foundation Server 2010 一起使用。每当我打开一个项目时，Visual Studio 会自动检查项目文件 (.csproj)（但不是任何子文件）和相应的 .csproj.vspscc 文件.

每当我比较 Pending Changes 列表中的项目文件时，它都会显示 .csproj 文件和 .csproj.vspscc 文件的文件相同——我们只需将它们重新签入或撤消更改。

有人可以解释它为什么这样做以及如何修复它，以便每次打开项目时都不会检查 .csproj 和 .vspscc 文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:11:02.207

我的团队也遇到过同样的问题。问题是该项目的一个引用指向我们团队成员工作区之一的不同（错误）目录。pantelif 的解决方案朝着正确的方向发展，但是将 csproj-Files 与 TFS 进行比较无济于事。出于任何原因，它说文件是相同的，但如果我手动查看它们，我意识到它们不是。您可以轻松检查：

*   右键单击项目
*   选择“卸载项目”
*   再次右键单击
*   选择“编辑 xxx.csproj”

现在更深入地了解“ProjectReference”-Tags。在我的情况下，“包含”-属性并不相同。希望它也能帮助你。

为避免此类问题，只需查看[TFSGuide](https://tfsguide.codeplex.com/)，尤其是第 3 章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-16T00:18:59.343

我可以回答这个问题的一部分。为什么显示的文件相同？

其原因（据我所知）是当它自动检出文件并进行更改时，它并没有保存此更改。因此，当您立即比较文件时，它不会发现任何差异。如果您改为构建项目，或手动调用这些修改过的文件的保存，那么更改将显示出来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T17:37:41.847

目前尚不清楚您为使问题发生而采取的具体步骤，但我认为您的意思是，当您打开解决方案时，解决方案中的所有项目文件都会自动全部签出。

这不是正常行为，因此您可能有一个第 3 方实用程序正在对您的项目文件执行操作；也许它会编辑它们，然后以相同的方式将它们放回去。检查并禁用任何加载项（工具菜单 -> 加载项管理器），您还可以使用扩展管理器检查您可能安装的其他扩展（也在工具菜单中）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T07:16:57.247

VS 可能正在解决链接问题，通常是针对引用的程序集。
为了检查发生了什么，只需打开您的解决方案并在 VS 签出 *.csproj 后，“全部保存”（Ctrl+Shift+S）。

导航到“Pending Changes”窗口并比较 *.csproj 应该会发现问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-22T09:55:17.533

我的解决方案也曾经发生过同样的问题，后来我发现，我在本地配置的 IIS 具有不同的 VD 名称，而在 TFS 服务器中，分配并签入了不同的 VD 名称。所以当我打开我的解决方案时，它会自动检出 .sln 文件。因为我的本地 VD 与我的本地不同。

# javascript - 将 xml（从 exe）渲染到新窗口

> ID：11296691
> 
> 赞同：0
> 
> 时间：2012-07-02T15:29:37.203
> 
> 标签：javascript, xml, xslt

我正在尝试呈现（在客户端）从 EXE（在服务器端）检索到的一些 XML 数据。我无法在 XML 数据中添加任何指向 XSLT 样式表的链接，因此我正在寻找一个可以通过我的 XSLT（可以存储在服务器上）转换 XML 的 javascript 函数。

目前，我的网页使用以下方式打开 XML：

```
onclick="openWindow('Exe/the_url_and_args')" 
```

我在创建 XSLT 时没有问题，但我不知道如何使用 javascript 调用该文件！找不到任何相关的谷歌搜索:(非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:13:07.687

Sarissa API 通常用作可移植的跨浏览器 API，用于从 Javascript 调用 XSLT 1.0 转换。

如今，您还可以使用 Saxon-CE 在浏览器中使用 XSLT 2.0，这里描述了其 Javascript API：

[http://www.saxonica.com/ce/doc/api/intro.xml](http://www.saxonica.com/ce/doc/api/intro.xml)

在许多情况下，Saxon-CE 会为您完成整个工作，因此您根本不需要编写任何 Javascript。

# jquery - jQuery id 过滤器在 MSIE 中工作

> ID：11296693
> 
> 赞同：0
> 
> 时间：2012-07-02T15:29:44.147
> 
> 标签：jquery, internet-explorer, firefox, google-chrome, opera

我正在尝试在身体负载上使用 JQuery 的 .each() 函数将功能分配给图像映射中的不同区域。它在 MSIE 中运行良好，但在任何其他浏览器中完全失败。如果我对 javascript 函数进行硬编码并使用以下命令调用它：

```
href="javascript:cInfo(mapHeadG)" 
```

作为每个区域的属性，它适用于所有浏览器，所以我知道它不是代码本身。我猜它必须是我正在使用的过滤器。任何的意见都将会有帮助！

这是图像映射元素：

```
<map id="mMap1" name="mMap1">
    <area coords="44, 13, 116, 14, 123, 21, 36, 21" 
          shape="poly" alt="" id="mapHeadG" class="mLink" />
    <area coords="37, 66, 113, 65, 117, 73, 34, 76" 
          shape="poly" alt="" id="mapNeckG" />
    <area coords="8, 83, 141, 79, 144, 88, 126, 97, 9, 96, 2, 92" 
          shape="poly" alt="" id="mapShoulderG" />
</map> 
```

这是我用来分配功能的 JQuery：

```
 $(document).ready(function () {
        $('*[id*=map]:visible').each(function () {
            var sec = $(this).attr('id');
            alert(sec);
            $(this).hover(function () {
                //Do something here.
            }, function () {
                //Do something here.
            });
            $(this).click(function () {
                //Do something else here
            })
        });
    }); 
```

*（ sec 变量只是一个测试，看看我是否得到任何信息，这会在 MSIE 中触发，但不会在其他浏览器中触发）*

您将`alert(sec)`在 javascript 中看到该行，这就是我如何知道该函数在 MSIE 中工作但在其他人中不工作的方式，以及当我单击 MSIE 中的映射区域时这工作但在其他人中失败的事实。

就像我之前说的，我几乎肯定它与过滤器本身有关，但我似乎找不到它。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:33:38.777

似乎是一种奇怪且劳动密集型的定位方式。你有没有试过这个：

```
$('#mMap1 area:visible').each(function () { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T15:15:08.493

感谢你们两位的建议（包括消失的那个），他们实际上帮助我解决了这个问题。是 :visible 停止了其他浏览器。使用以下内容：

```
$('#Map1' area).each() 
```

或者就我而言，因为我有不止一张地图

```
$(*[id*=mMap] area).each() 
```

允许将功能分配给每个图像映射区域。

感谢您的提示，再次感谢。

# java-me - 两部手机可以有相同的蓝牙地址吗？

> ID：11296695
> 
> 赞同：1
> 
> 时间：2012-07-02T15:29:51.563
> 
> 标签：java-me, bluetooth

我正在编写一个代码，它可以显示附近的蓝牙设备（电话）已打开的朋友。我的代码使用用户的设备地址来跟踪他们的存在，但我需要知道这个数字是否唯一。如果不是，我如何为每部手机生成一个唯一的 ID，例如地址 + 友好名称（不幸的是，这不是唯一的）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:13:33.537

因此，由于mac地址的分配方式，两部手机不能具有相同的蓝牙地址。蓝牙地址使用相同的 MAC-48 标识符格式。阅读[此页面](http://en.wikipedia.org/wiki/MAC_address)了解详情。

# iis - 了解 IIS 7 日志文件

> ID：11296698
> 
> 赞同：49
> 
> 时间：2012-07-02T15:29:55.337
> 
> 标签：iis, logging

我正在尝试使用 jQuery AJAX 帖子调试 ASP.NET 4.0 网站中发生的 405 错误，并且我从 IIS 日志文件中获得了以下信息。

`2012-07-02 15:15:37 XXX.XX.XX.XXX POST /AjaxWebMethods.aspx/TestWebMethod - 443 - XXX.XX.XX.XX Mozilla/5.0+(Windows+NT+5.1;+rv:13.0)+Gecko/20100101+Firefox/13.0.1 405 0 0 218`

**我的问题：**`405 0 0 218`日志末尾的意思是什么？我假设 405 部分是客户端错误号，但剩下的 3 个数字是多少？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-07-02T17:19:47.163

查看日志文件的顶部，您会看到如下内容：

```
#软件：Microsoft Internet 信息服务 7.5
#版本：1.0
#日期：2011-04-13 19:02:34
#Fields: date time s-ip cs-method cs-uri-stem cs-uri-query s-port cs-username c-ip cs(User-Agent) sc-status sc-substatus sc-win32-status time-taken

```

该`#Fields`行将告诉您每个值代表什么。在您的情况下，并假设您使用默认日志设置运行，值将是：

```
sc-status sc-substatus sc-win32status 耗时
==================================================== ==
405 0 0 218

```

*   `sc-status`- 是 HTTP 状态码的主要部分
*   `sc-substatus`- 是子状态，例如对于`503.19`HTTP 状态，它将是`19`一部分
*   `sc-win32status`- 是[Windows 系统错误代码](http://msdn.microsoft.com/en-us/library/ms681382.aspx)
*   `time-taken`- 是发送响应所需的时间，以毫秒为单位

如果你得到非零值，`sc-win32status`你可以使用：

`NET HELPMSG <sc-win32status value>`

...找出该状态代码映射到的位置。

如果日志文件中的字段没有值，则缺失值显示为连字符`-`。

# ios5 - iOS一次上传多个文件

> ID：11296699
> 
> 赞同：0
> 
> 时间：2012-07-02T15:30:05.217
> 
> 标签：ios5, file-upload, nsmutableurlrequest

是否可以仅在一个请求中上传两个（或更多）文件？

我一直在尝试使用 NSMutableURLRequest 和 NSURLConnection 这样做，但到目前为止没有成功，而且我在网上找不到令人信服的答案。

上传单个文件（使用[此处](https://stackoverflow.com/questions/8042360/nsdata-and-uploading-images-via-post-in-ios)的代码）很容易，但[HTML 规范](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2)提到，在上传多个文件时，您必须在 multipart/form-data 中嵌入一个 multipart/mixed 标头，以及要在其中上传的文件多部分/混合标题。

上面链接的代码的问题是，正在上传的一个文件的 Content-Disposition 设置为“form-data”（我猜这意味着单个文件是表单数据的“全部”？）我认为留下“没有空间”附加另一个文件。如果我错了，请纠正我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:54:20.057

编辑：

您上传的文件数据应使用 Base64 编码；您可以通过[NSData+Base64](http://projectswithlove.com/projects/NSData_Base64.zip)做到这一点，然后使用：

```
[body appendData:[imageData1 base64EncodedString]; 
```

发送文件数据，我假设它`imageData1`被定义为：

```
NSData* imageData = UIImagePNGRepresentation(image); 
```

并且`image`是一个`UIImage`。

旧答案：

这是来自[HTML 4.0.1 标准](http://www.w3.org/TR/html401/interact/forms.html)的示例（文档的最后）：

```
Content-Type: multipart/form-data; boundary=AaB03x

--AaB03x
Content-Disposition: form-data; name="submit-name"

Larry
--AaB03x
Content-Disposition: form-data; name="files"
Content-Type: multipart/mixed; boundary=BbC04y

--BbC04y
Content-Disposition: file; filename="file1.txt"
Content-Type: text/plain

... contents of file1.txt ...
--BbC04y
Content-Disposition: file; filename="file2.gif"
Content-Type: image/gif
Content-Transfer-Encoding: binary

...contents of file2.gif...
--BbC04y--
--AaB03x-- 
```

请注意，文件在多部分/混合列表中一起列出。

因此，您可以尝试使用以下代码：

```
//-- new part in multipart/form-data
[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Disposition: form-data; name=\"files\" dataUsingEncoding:NSUTF8StringEncoding]];

//-- new multipart/mixed
[body appendData:[[NSString stringWithFormat:@"multipart/mixed; boundary=%@", mixedBoundary] dataUsingEncoding:NSUTF8StringEncoding]];

[body appendData:[[NSString stringWithFormat:@"Content-Disposition: file; filename=\"%@\"\r\n", FileParamConstant1] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithString:@"Content-Type: image/jpeg\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:imageData1];
[body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

[body appendData:[[NSString stringWithFormat:@"--%@\r\n", mixedBoundary] dataUsingEncoding:NSUTF8StringEncoding]];

[body appendData:[[NSString stringWithFormat:@"Content-Disposition: file; filename=\"%@\"\r\n", FileParamConstant2] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithString:@"Content-Type: image/jpeg\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:imageData2];
[body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]]; 
```

注意更改`filename`和`name`属性，它应该可以工作。

# java - Java中的“内联”

> ID：11296704
> 
> 赞同：3
> 
> 时间：2012-07-02T15:30:40.330
> 
> 标签：java, inline

> **可能重复：**
> [java中有内联函数吗？](https://stackoverflow.com/questions/2096361/are-there-inline-functions-in-java)

我来自 C++，我会在那里写

```
for (int i = 0; i < numNonZero(); ++i) 
```

知道 numNonZero() 非常小并且“内联”会简单地从编译的代码中消失。在Java中怎么样？我是否应该在我的课堂上有一个 int _numNonZero 并写

```
for (int i = 0; i < _numNonZero; ++i) 
```

最大速度？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-02T15:33:31.617

而是专注于编写最易读的代码，并让[HotSpot Java 虚拟机](http://en.wikipedia.org/wiki/HotSpot)在运行时对其进行优化。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-02T15:33:56.513

不要紧。Java 代码在运行时由 Java 虚拟机转换为可执行代码。Hotspot 或其他现代 jvm 具有非常先进的内联功能。为了获得最佳性能，我建议您使用 -server 标志，它将执行积极的优化。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-02T15:34:40.083

就像其他人说的那样，您首先应该担心可读代码。但是，要回答您的问题，尽管编译器`javac`没有内联，但 Hotspot（JVM 优化器）[会在可能的情况下为您内联](http://java.sun.com/developer/technicalArticles/Networking/HotSpot/inlining.html)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-02T15:53:29.860

`javac`几乎没有优化。相反，优化是在运行时执行的。您可以查看方法是否已在运行时内联`-XX:+PrintCompilation`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-02T15:48:13.367

Joshua Bloch 在 for(;;){;} 中推荐：

```
for (int i = 0, n = numNonZero() ; i < n; ++i) { .. 
```

如果 numNonZero() 更改（并返回 String.length()，或进行了一些计算），您的代码仍然正确。

# windows-8 - Windows 8 Metro 风格应用示例

> ID：11296705
> 
> 赞同：1
> 
> 时间：2012-07-02T15:30:41.537
> 
> 标签：windows-8, microsoft-metro, visual-studio-2012

在编译 Microsoft 提供的任何 Win 8 Metro 风格应用程序示例（VS 2012 RC）时，我遇到了这种错误：

> 错误 1 ​​源文件“C:\Users\me\Desktop\Windows 8 Release Preview Metro 风格应用示例 - C#、VB.NET、C++、JavaScript\XAML 图像示例\C#\obj\Release\App.gics”不能找到 C:\Users\me\Desktop\Windows 8 Release Preview Metro 风格应用示例 - C%23%2c VB.NET%2c C%2b%2b%2c JavaScript\XAML 图像示例\C#\CSC 图像
> 
> 错误 2 源文件“C:\Users\me\Desktop\Windows 8 Release Preview Metro 风格应用示例 - C#、VB.NET、C++、JavaScript\XAML 图像示例\C#\obj\Release\App.g.cs”可以未找到 C:\Users\me\Desktop\Windows 8 Release Preview Metro 风格应用示例 - C%23%2c VB.NET%2c C%2b%2b%2c JavaScript\XAML 图像示例\C#\CSC 图像

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T21:51:19.487

我相信它与您为示例选择的文件夹名称有关 - 我怀疑 # 字符会导致各种工具出现问题。您可以尝试使用 CS 而不是 C#。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T05:05:07.487

将文件夹重命名为长度较短且没有特殊字符的简单名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-08T16:39:22.497

从文件夹名称中删除连字符 (-) 和其他特殊字符。

# android - 在 where 子句中带有 AND 的光标

> ID：11296708
> 
> 赞同：0
> 
> 时间：2012-07-02T15:30:48.147
> 
> 标签：android, android-cursor, android-sqlite

如何在 Android 中`AND`向我的`WHERE`子句添加一个`Cursor`？

* * *

例如：

```
 Cursor cursor = data.query(
            Banana.URI, 
            new String[]{BananaColumns._ID}, 
            BananaColumns.NAME + "=? AND " + BananaColumns.COLLECTION + "=?", 
            new String[]{bananaData.getName(), bananaData.getCategory()}, 
            null); 
```

这将返回一个空的`Cursor`. 但是`Table`包含该查询应该找到的数据。我的格式错了吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:52:07.950

如果您愿意，该查询对我来说看起来不错：`SELECT _id FROM BananaTable WHERE name=<bananaData.getName()> AND collection=<bananaData.getCategory()>`。（我对名称做了一些假设。）仔细检查bananaData 方法是否返回您所期望的。

# java - 为什么实现类不能将覆盖方法定义为静态？

> ID：11296714
> 
> 赞同：3
> 
> 时间：2012-07-02T15:30:57.657
> 
> 标签：java, inheritance, interface, static, static-methods

我很困惑为什么不允许以下内容：

```
public interface MyInterface {
  MyInterface getInstance(String name);
}

public class MyImplementation implements MyInterface {
  public MyImplementation(String name) {
  }
  @Override
  public static MyInterface getInstance(String name) { // static is not allowed here
    return new MyImplementation(name)
  }
} 
```

我明白为什么接口中的方法不能是静态的，但为什么覆盖方法不能是？

我希望所有类都实现该`getInstance(String name)`方法，但我目前仅限于在对象已经被实例化的情况下才能调用该方法，哪种方式违背了目的......

* * *

*****更新：*****感谢您的回答，我现在更好地理解了。基本上我不应该试图让一个实用程序类（或一个工厂类）实现一个接口（或者至少不是以这种方式）......**

 *** * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-02T15:34:14.970

在 Java 中调用静态方法需要您指定确切的类型。不可能多态地调用静态方法，因此不需要`@Override`.

请注意，这种方法并非在所有语言中都通用：例如，您可以覆盖Objective-C 中的*类方法*，Apple 的可可框架很好地利用了这种机制来自定义它们的“工厂”类。但是，在 Java、C++ 和 C# 中，类方法不支持多态行为。

从理论上讲，Java 设计人员可以让您通过`static`方法提供接口方法实现，以防实现不需要从实例访问状态。但是使用简单的包装器很容易实现相同的行为：

```
public class MyImplementation implements MyInterface {
    public MyImplementation(String name) {
    }
    @Override
    public MyInterface getInstance() { // static is not allowed here
        return getInstanceImpl();
    }
    public static getInstanceImpl() {
        return new MyImplementation(name)
    }
} 
```

Java 编译器可以代表你做同样的事情，但是看到一个静态方法实现一个实例方法既不寻常又令人困惑，所以我的猜测是 Java 设计者决定不提供这个“魔法”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T15:41:13.777

静态方法不能受到多态行为的影响。那没有多大意义。想象一下这个用例，假设你想要什么是可能的：

```
public void foo(MyInterface i) {
    i.getInstance("abc");
} 
```

现在我想用`MyInterface`(class `A`) 的实现来调用这个方法，但是由于我不能传递类本身，所以我需要传递一个对象：

```
A a = new A();
foo(a); 
```

现在在类`foo`的实例上调用`static`覆盖的内部。所以现在我坚持创建一个对象只是为了调用一个静态方法。`getInstance``A`

我的观点是，在大多数多态性用例中，您仍然会被限制创建对象，因为在您的原始接口中，该方法是一个实例方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T15:34:23.740

因为实现接口使实现者成为接口的**类型**。这意味着**实例**需要具有由类型定义的方法，而不是实例的类。

换一种方式，

`public void mymethod`

和

`public static void mymethod`

不是相同的方法声明。它们是完全不同的。如果`mymethod`在接口上定义，则具有第二个定义根本不满足实现接口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T15:39:55.013

答案归结为实现接口意味着什么。当一个类实现一个接口时，这是一个承诺，即该类的每个实例都将响应接口中的每个方法。当您将方法实现为静态时，您可以在*没有*类实例的情况下调用该方法 - 但这并不能满足继承实现的承诺，即该方法可以在类的每个实例上调用。**

# javascript - 使用 JavaScript 编码 PNG

> ID：11296730
> 
> 赞同：10
> 
> 时间：2012-07-02T15:31:44.333
> 
> 标签：javascript, encoding, png, appcelerator, titanium-mobile

我有一些想要保存为 PNG 的任意像素数据。如何使用 JavaScript 对 PNG 进行编码以实现此目的？

数据是我想用来创建二维码的一系列 1 和 0。这是二维码任意数据

我没有使用 DOM，所以 jQuery 和 createElement 都出来了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:42:16.633

[http://www.xarg.org/2010/03/generate-client-side-png-files-using-javascript/](http://www.xarg.org/2010/03/generate-client-side-png-files-using-javascript/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-25T10:50:38.547

或者使用纯 JavaScript 将其直接编码为 PNG（不需要画布）：

[https://github.com/IjzerenHein/pnglib-es6](https://github.com/IjzerenHein/pnglib-es6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T16:00:10.447

编辑：作为其他答案状态和链接，有一个 PNG 格式的 javascript 解释。万岁！

如果您想创建 PNG 格式的图像文件，您的问题基本上是在问，“PNG 的文件格式是什么？我如何将 QR 码网格转换为 QR 码图像的图像，因为我可以定义由 1 和 0 组成的 QR 码。”

如果要使用 PNG，则需要考虑 LZW 压缩。为什么不查看未压缩的 GIF 或位图？使用 Titanium 创建文件，为您选择的图像格式硬编码标题，然后使用适当的编码以编程方式创建图像。

但是，如果您只是想在屏幕上显示二维码，为什么不使用 Titanium Webview 画布呢？或者如果您担心它太慢（它不会用于绘制黑框），请使用适用于 iOS 的 Titan+plus Paint。

一个“hack”可能是使用具有绝对定位的 UI 元素通过使用 UI 元素绘制它来构建您的 QR 码图像。很酷的黑客。

或者你可以只在 webview 中使用 SVG 格式。就我个人而言，如果你需要一个文件，我认为最简单的方法是使用上面所说的带有硬编码标题的位图，或者如果你不能使用位图，则使用 GIF。

如果您只需要图像，我会尝试使用 Appcelerator 绘图方法之一。

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T16:23:32.307

如果我理解正确，您可以使用此库生成 qrcode：

[http://www.onlineqrlab.com/js_doc.php](http://www.onlineqrlab.com/js_doc.php)

没有尝试过，但它似乎有据可查

**编辑：**这是一个非常古老的答案（9 岁以上！哦），所以上面的链接现在返回 404。请参阅 web.archive.org：https://web.archive.org/web/20201029134734/http://onlineqrlab [。 com/js_doc.php](https://web.archive.org/web/20201029134734/http://onlineqrlab.com/js_doc.php)

另请参阅[`qrcoder`](https://www.npmjs.com/package/qrcoder)用于生成 QR 码的 npm 包。

# perl - 我可以安全地要求 Perl 的 DBI 而不是使用它吗？

> ID：11296732
> 
> 赞同：2
> 
> 时间：2012-07-02T15:31:51.270
> 
> 标签：perl, dbi

我有一个尚未连接数据库的大型脚本。我需要一个用于一个微小的新功能。在我需要的地方添加一个裸块是否安全，`require DBI`或者我需要导入一些东西？

```
# Lots of no-database code here...
my $obj;
{
  require DBI;
  my $dbh = DBI->connect('dsn');
  $obj = ModuleThatNeedsDBH->new(dbh => $dbh);
}
$obj->fancyStuff();
# More no-database code... 
```

`$dbh`该块当然是对程序的其余部分保持隐藏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T15:41:04.790

默认情况下，`DBI`模块不会将任何内容导入到调用包中，所以是的，理论上你可以使用`require`而不是`use`.

但是你希望从中获得什么？在这种情况下`use DBI`相当于`BEGIN { require DBI }`，如果您省略该`BEGIN`块，您将在运行时强加加载包的冗长过程，这是不可取的。

请注意，您还必须处理连接到数据库的任何失败。

```
my $dbh = DBI->connect('dsn', 'user', 'pass')
            or die $DBI::errstr; 
```

虽然在你的情况下死亡可能有点极端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T20:51:10.540

尽管默认情况下 DBI 不导入任何内容，但这并不意味着在您使用它时它不会进行任何内部处理或设置。除非模块的文档另有说明，否则您应该使用完整的过程来确保应该发生的所有事情都实际发生。您可能想了解[如何在不使用 eval 的情况下动态包含 Perl 模块？](https://stackoverflow.com/questions/1917261/how-can-i-dynamically-include-perl-modules-without-using-eval).

`ModuleThatNeedsDBH`另外，如果它没有出现在它的参数列表中，我会考虑自动制作一个。依赖注入很好，但这并不意味着您需要强制更高级别来创建您需要的东西。

# javascript - jQuery .focus() 在每个浏览器中的工作方式不同。如何防止这种情况？

> ID：11296735
> 
> 赞同：5
> 
> 时间：2012-07-02T15:31:55.817
> 
> 标签：javascript, jquery, focus

当我尝试这样做时，`.focus()`我希望将焦点设置在输入元素上并在值的最后一个字符之后看到光标。我在 IE 中看到它。

在 safari/chrome 中输入获得焦点并选择所有文本。在 firefox/opera 中，输入获得焦点，但光标位于开头。

我能做些什么来防止这种情况并为所有浏览器获得正确的行为？

一个例子在这里：http: [//jsbin.com/ozojol/edit#javascript,html](http://jsbin.com/ozojol/edit#javascript,html)

PS。`focus().val('').val(value)`方法在 IE 中不起作用...还有哪些其他解决方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T15:51:31.913

您可以在大多数浏览器中使用输入`selectionStart`和`selectionEnd`属性，在 IE < 9 中使用一些讨厌的`TextRange`东西。这里有一些代码改编自[类似问题的答案](https://stackoverflow.com/a/4716021/96100)。

演示：http: [//jsbin.com/azapuy](http://jsbin.com/azapuy)

代码：

```
function moveCaretToEnd(el) {
    if (typeof el.selectionStart == "number") {
        el.selectionStart = el.selectionEnd = el.value.length;
    } else if (typeof el.createTextRange != "undefined") {
        var range = el.createTextRange();
        range.collapse(false);
        range.select();
    }
}

var input = $('#i')[0];
input.focus();
moveCaretToEnd(input); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T15:42:41.793

有一个很棒的轻量级插件可以将插入符号移动到元素内内容的末尾。**[jQuery 插入符号](https://github.com/DrPheltRight/jquery-caret)**

**[现场演示](http://jsfiddle.net/uksXG/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T15:56:01.093

唯一常见的行为是`select()`, 在所有主要浏览器中选择输入文本（无法确认它是否适用于所有浏览器）。

# ruby-on-rails - Ruby：“gem install bundler”没有安装 bundler

> ID：11296737
> 
> 赞同：3
> 
> 时间：2012-07-02T15:32:05.410
> 
> 标签：ruby-on-rails, ruby, linux, ruby-on-rails-3, rvm

我是 Rails 新手，正在尝试启动并运行演示应用程序。我的 linux 系统（lubuntu，主要是全新安装）让“捆绑安装”运行时遇到问题。即使它确实如此，如果我关闭我的终端并启动另一个终端，它也无法再次运行。循环看起来像这样：

```
sandbox@75bf7f3:~/railsstuff/sample_app_2nd_ed$ bundle install
ERROR: Gem bundler is not installed, run `gem install bundler` first.

sandbox@75bf7f3:~/railsstuff/sample_app_2nd_ed$ gem install bundler
Successfully installed bundler-1.1.4
1 gem installed

sandbox@75bf7f3:~/railsstuff/sample_app_2nd_ed$ bundle install
ERROR: Gem bundler is not installed, run `gem install bundler` first. 
```

据我所知，我使用的是最新版本的 Ruby，而且 rvm 似乎工作正常。

谁能解释这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T04:31:31.413

我可以确认这是在 Linux Mint 的全新 rvm 安装中发生的。我正在使用 gnome-terminal，并且我已经应用了“将命令作为登录 shell 运行”解决方法。我正在使用 ruby​​ 1.9.3 并且没有对 gemsets 做任何事情。当我输入“gem list”时，我会看到我安装的所有 rubies（安装 rvm 的第一个小时，我在安装一些项目，它似乎处于完美的工作状态）。

看起来像添加

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" 
```

to ~/.bashrc 清除了不一致的问题。奇怪的是，它最初没有它就可以正常工作......而且它应该只采购 .bash_login 放在首位......

# svn - Maven SVN 结帐

> ID：11296738
> 
> 赞同：5
> 
> 时间：2012-07-02T15:32:08.790
> 
> 标签：svn, maven

谁能告诉我如何使用 Maven 从 SVN 进行结帐和进一步更新？我阅读了 maven.apache.org 上的文档，但似乎我对此太愚蠢了，因为我无法理解如何使用 scm:checkout 和 scm:update 而不在命令行中传递参数。我的意思是当我跑的时候：

```
mvn scm:checkout (or scm:update) clean install 
```

maven 将源签出到 /target/checkout，然后将其删除，当然它没有要编译的内容，因此它会生成空 jar。所以我必须写这样的东西：

```
mvn scm:checkout -DconnectionUrl=scm:svn:http://svn.my.dev/scm/repo/trunk/myProject -DcheckoutDirectory=src clean install 
```

但我不想！如何在 pom.xml 中设置这些参数？以及如何将当前目录设置为 checkoutDirectory？（如果在 pom.xml 中设置它可能不会有问题，因为我可以将它设置为 ${project.basedir}，但谁知道）我的 pom.xml 包括以下几行：

```
...
  <scm>
    <connection>scm:svn:http://svn.my.dev/scm/repo/trunk/myProject</connection>
    <developerConnection>scm:svn:http://svn.my.dev/scm/repo/trunk/myProject</developerConnection>
  </scm>
...
  <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-scm-plugin</artifactId>
        <version>1.7</version>
        <configuration>
      <username>username</username>
          <password>password</password>
        </configuration>
      </plugin>
... 
```

顺便说一句，connection 和 developerConnection 有什么区别。Maven 文档只说 developerConnection 是...“开发人员的 SCM 连接 URL”。这对我来说非常令人惊讶，因为我认为这是松鼠的某种联系，或者可能是兔子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T20:18:10.233

您可以将`checkoutDirectory`选项直接添加到 maven-scm-plugin 的配置中。签出文件后，您可以使用`scm:update`该`workingDirectory`选项（也可以在插件配置中进行配置）

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-scm-plugin</artifactId>
  <version>1.7</version>
  <configuration>
    <username>username</username>
    <password>password</password>
    <checkoutDirectory>${project.basedir}/src</checkoutDirectory>
    <workingDirectory>${project.basedir}/src</workingDirectory>
  </configuration>
</plugin> 
```

# sql - ',' 附近的语法不正确

> ID：11296739
> 
> 赞同：5
> 
> 时间：2012-07-02T15:32:15.370
> 
> 标签：sql, tsql, sql-server-2005

```
INSERT INTO [Temp].[dbo].[Student]
    ([Fname], [Lname], [Gender])
    VALUES 
    (N'Aname', N'Alname', N'Male')
    GO 
```

此代码工作正常，但是当我尝试添加多个值时，它给了我一个错误

> 错误：',' 附近的语法不正确。

```
USE TEMP
GO

INSERT INTO [Temp].[dbo].[Student]
([Fname], [Lname], [Gender])
VALUES 
(N'Aname', N'Alname', N'Male'),
(N'Bname', N'Blname', N'Male')
GO 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-02T15:44:08.047

为了使用多行`VALUES(),()`语法，您需要运行 SQL Server 2008（或更高版本）。

由于您运行的是 SQL Server 2005，因此您需要运行单独的插入语句、使用 UNION/UNION ALL 或升级实例（与 Management Studio 分开，后者只是一个客户端工具，用于连接到运行任意数量的实例的实例SQL Server 版本）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-02T15:40:00.050

你可以这样做：

```
insert into [Temp].[dbo].[Student]
select 'Aname', 'Alname', 'AMale'
union all
select 'Bname', 'BAlname', 'BMale' 
```

等等等等

谢谢

保罗。

# php - 使用 JavaScript 显示和隐藏 PHP 回显的 XML 数据

> ID：11296741
> 
> 赞同：2
> 
> 时间：2012-07-02T15:32:18.527
> 
> 标签：php, javascript, jquery, xml

我正在使用 PHP 从 XML 文件中回显 50 个视频 ID。我使用视频 ID 将 50 个 YouTube 视频嵌入到我的网站中。这很好用，但我需要一次隔离两个视频。我不希望用户一次看到所有 50 个视频。我希望他们看到两个，然后单击下一步，再查看两个，然后可能单击返回，等等。

这是我到目前为止所拥有的：

```
$url = "http://www.theURLofmyXML.blah";
$xml = simplexml_load_file($url);
$i = 0;

while ($i < 49) {

$title = (string) $xml->query->results->item[$i]->title;
$videoid = (string) $xml->query->results->item[$i]->id;
$explanation = (string) $xml->query->results->item[$i]->explanation;

$i = $i + 1;

echo $title."<br />";
echo '<iframe width="400" height="225" src="http://www.youtube.com/embed/'.$videoid.'?rel=0&amp;autohide=1&amp;showinfo=0" frameborder="0" allowfullscreen></iframe><br/>';
echo $explanation."<br /><br />";

} 
```

所以我认为最好的办法是将所有 50 个项目回显到标有 0 到 49 的 div 内的页面......然后使用 JavaScript 隐藏除 0 和 1 之外的所有 div，直到您单击下一步按钮并切换到隐藏除 2 之外的所有内容和 3……等等……

但我不确定如何在 JavaScript/jQuery 中做到这一点。我认为使用 .show() 和 .hide() 会起作用，但我不确定语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:48:48.130

您可以使用以下 HTML 结构：

```
 <a href="#" class="prev-video-row">Previous videos</a>
    <div class="video-row active">
      <!-- First couple videos -->
    </div>
    <!-- Loop through all videos, writing the other rows -->
    <div class="video-row">
      <!-- Last couple videos -->
    </div>
    <a href="#" class="next-video-row">Next videos</a> 
```

**注意**：`active`仅在第一个视频行中使用该类，默认情况下在页面加载时显示它们。

使用 CSS，隐藏所有`.video-row`（使用：）`display:none;`并仅显示`.video-row.active`（使用：）`display:block;`。

最后，使用以下 Javascript（需要 jQuery）在视频行之间导航：

```
 jQuery('.prev-video-row').click(function (event)
    {
      event.preventDefault();
      var prev = jQuery('.video-row.active').prev();
      if (prev.length)
      {
        jQuery('.video-row').removeClass('active');
        prev.addClass('active');
      }
    });
    jQuery('.next-video-row').click(function (event)
    {
      event.preventDefault();
      var next = jQuery('.video-row.active').next();
      if (next.length)
      {
        jQuery('.video-row').removeClass('active');
        next.addClass('active');
      }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T16:11:27.257

老实说，我认为在一个页面中嵌入 50 个视频并不好——不管可见性与否；仅仅是因为它们将被浏览器处理，尽管它们不可见。（如果我错了，请随时纠正我，但浏览器会看到并处理整个 DOM - 并且只需将样式应用于“隐藏”位。）

Gustavo Straube 给出了一个非常好的答案，如果你想在 DOM 中拥有 50 个元素，尽管它可能对浏览器和带宽都有影响。

我可能会更倾向于解析 XML，将所有数据存储为 JSON，然后使用模板框架（如 Mustache.js）提供的 HTML 中的 jQuery 动态更新 DOM。

```
/* Generate JSON */
$url = "http://www.theURLofmyXML.blah";
$xml = simplexml_load_file($url);
$i = 0;
$json = array();

while ($i < 49) {

$arr['title'] = (string) $xml->query->results->item[$i]->title;
$arr['videoid'] = (string) $xml->query->results->item[$i]->id;
$arr['explanation'] = (string) $xml->query->results->item[$i]->explanation;

$json[] = $arr;
}

echo json_encode($json); 
```

然后，在您的标记中有类似下面的内容，只是为了初始化您的第一个 x 视频 - 在本例中为 10..

```
$(document).ready(function(){
    var template = '{{$title}}<br /><iframe width="400" height="225"'
       + 'src="http://www.youtube.com/embed/{{$videoid}}?rel=0&amp;autohide=1&amp;showinfo=0" frameborder="0" allowfullscreen></iframe><br/>'
       + '{{explanation}}<br /><br />';
    var html = '';
    var i=0;

    for(; i<10; i++){
        var item = json[i];
        html += Mustache.to_html(template, item);
    }
    $('#videos').html(html); //where #videos is a div to contain your videos 
```

接下来有一个锚点（在本例中为#next）来获取接下来的 10 个视频。

```
 $('#next').click(function(){
        /* template, i and json are still in scope! */
        var j = i+10;
        for(; i<j; i++){
            var item = json[i];
            html += Mustache.to_html(template, item);
        }
        $('#videos').html(html); //where #videos is a div to contain your videos
    }); 
```

这样做的好处是也很容易做一个以前的anchor...

```
 $('#prev').click(function(){
        /* template, i and json are still in scope! */
        var j = i -10;
        i -= 20; //10 for the current page, 10 for the start of the previous page
        for(; i<j; i++){  //rebuild div content of previous page
            var item = json[i];
            html += Mustache.to_html(template, item);
        }
        $('#videos').html(html);
    }); 
```

重申一下，这是一个**替代解决方案**- 我建议使用 JSON 比 XML 更轻量级和更灵活，并且它还消除了拥有 50 个未使用的 DOM 元素的要求一度。您选择您拥有的实现可能是有原因的，但如果我遇到这个问题，这不是我会采用的实现！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T15:43:53.187

对于像这样的html：

```
<div id="section0"></div> 
```

你的 jquery 看起来像：

```
$(document).ready(function() {
    $('#section0').show();
    $('#section1').show();

    $('#nextButton').click(function(e){        
        e.preventDefault();
        $('#section0').hide();
        $('#section1').hide();
        $('#section2').show();
        $('#section3').show();
        return false;
    }
}); 
```

等等...

# php - 使用 preg_split 时主题字符串中的 $1

> ID：11296749
> 
> 赞同：2
> 
> 时间：2012-07-02T15:32:45.400
> 
> 标签：php, special-characters, preg-split

我想将文本拆分为一个数组，其中分隔符是一个或多个“\n”，然后将数组的内容作为元素放入无序的 html 列表中。当我在主题字符串中有 $1 时使用 preg_split 执行此操作时，我会得到一个奇怪的结果。只需查看拆分结果产生的数组就可以了，$1 似乎没有引起任何问题，但是当我遍历数组并将其放入 html 列表时，它会产生与预期不同的结果（参见下面的示例）

就像这是主题字符串一样：

“第一行

第二行 $1

第三行”

它应该变成：

*   第一行
*   第二行 $1
*   第三行

但它变成：

*   第一行
*   第二行第一行 第二行 $1 第三行
*   第三行

有谁知道为什么会这样？$1 是某种具有保留含义的特殊 html 或 php 字符吗？

这是我写的代码：

```
 $listElements = preg_split('/[\n]+/',$subject);
        $output = '<ul>';
        foreach ( $listElements as $val ) {
          $output .= '<li>' . $val . '</li>';
        }
        $output .= '</ul>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:36:34.907

在 PHP 字符串中使用美元符号对那些不熟悉它的人来说有一种奇怪的效果。

```
$foo = "BAR";
$example = "Hello, World! $foo $foo black sheep";
echo $example; 
```

上面的例子呼应了：`Hello, World! BAR BAR black sheep`. 这是因为变量*在*字符串中展开。

停止这种行为的一个简单方法是使用单引号： 将上面的示例更改为`'Hello, World! $foo $foo black sheep';`将回显 this: `Hello, World! $foo $foo black sheep`，并且美元将留在原地。

另一种阻止变量在双引号字符串中扩展的方法是用反斜杠转义它们：

```
$example = "Hello, World! \$foo \$foo black sheep"; 
```

将回显：

`Hello, World! $foo $foo black sheep`

* * *

在您的示例中，我假设其中`$val`有一个美元符号，需要转义。

# c# - 访问视图中的导航属性

> ID：11296750
> 
> 赞同：0
> 
> 时间：2012-07-02T15:32:45.487
> 
> 标签：c#, asp.net-mvc-3, entity-framework, razor

我有一个控制器操作接收 2 个 URL 参数，它们是数据模型的外键：

```
 public ActionResult Create(SurveyResponseModel surveyresponsemodel, int MemberId, int ProgramId)
        {
            surveyresponsemodel.MemberId = MemberId;
            surveyresponsemodel.ProgramId = ProgramId;
            return View(surveyresponsemodel);
        } 
```

这是数据模型：

```
public class SurveyResponseModel
    {
        [Key]
        public int ResponseId { get; set; }

        public int MemberId { get; set; }

        public int ProgramId { get; set; }

        // "If yes, what changes did you make? Mark all that apply."

        [DisplayName("Did you make any changes in your practice, research, or administration activities as a result of participating in this CME activity?")]
        public string CmeChanges { get; set; }

        [DisplayName("Better patient follow-up")]
        public bool PatientFollowUp { get; set; }

        public virtual SurveyProgramModel SurveyProgramModel { get; set; }

        public virtual PersonModel PersonModel { get; set; } 
```

以及“SurveyProgramType”的数据模型

```
 public class SurveyProgramModel
    {

        [Key]
        public int ProgramId { get; set; }

        public int ProgramYear { get; set; }

        public int ProgramStatusId { get; set; }

        public string ProgramTitle { get; set; }

        public int ProgramTypeId { get; set; }

        public virtual SurveyProgramTypeModel ProgramType { get; set; }

        public virtual ProgramStatusModel ProgramStatusModel { get; set; }

    } 
```

在我看来，我希望能够`ProgramTitle`通过为`ProgramId`. 所以视图看起来像：

```
<div class="editor-label">
            @Model.SurveyProgramModel.ProgramTitle
        </div> 
```

但是，@Model.SurveyProgramModel.ProgramTitle 抛出异常，因为它为空。我在想我的导航属性设置不正确。知道那是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:35:48.667

您不应该将视图模型返回到视图吗？

```
public ActionResult Create(
    SurveyResponseModel surveyresponsemodel) //, int MemberId, int ProgramId)
{
    // MemberId and ProgramId arguments do not need to be defined
    // They will be picked up my MVC model binder, since there are properties
    // with the same name in SurveyResponseModel class
    //surveyresponsemodel.MemberId = MemberId;
    //surveyresponsemodel.ProgramId = ProgramId;
    surveyresponsemodel.SurveyProgramModel = new SurveyProgramModel(); // new line
    return View(surveyresponsemodel); // <- return your view model here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:46:22.840

如果不将模型传递给视图，则无法在视图中访问模型的属性。这就是错误的可能原因。

```
 public ~ActionResult PassModel(DemoModel _model, int id)
             {
              // your code goes here....

             return View(_model);   // pass the model to view ..so you can work on your model 
              } 
```

# c# - 如何在包含绑定项的列表框中添加固定值

> ID：11296758
> 
> 赞同：0
> 
> 时间：2012-07-02T15:33:35.680
> 
> 标签：c#, binding, listbox

我有一个提供变量数据集的可枚举值。这些值是在用户运行时生成的。

这些值绑定到 ListBox 的 ItemsSource

```
public IEnumerable<string> Items
{
  get { return list; } // list is here a dummy; it does not actually exists
}

listbox.SetBinding(ListBox.ItemsSourceProperty, new Binding { Source = Items }); 
```

现在我想在开头添加一个固定项目。但是例如`lb.Items.Add("abc");`会破坏运行时。插入方法也一样。

```
// listbox.Items.Add("abc");
// listbox.Items.Insert(0, "abc"); 
```

如何在开头添加固定项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T07:21:47.970

`Concat`如果你绑定到一个，你可以使用`IEnumerable<string>`

```
listbox.SetBinding(ListBox.ItemsSourceProperty, 
  new Binding { Source = new[] { "abc" }.Concat(Items) }); 
```

同样，如果它是`List<string>`您要绑定的 - 用于`Insert`在构建后将固定项目添加到头部。

# fonts - OTF 版本的 DejaVu 字体

> ID：11296765
> 
> 赞同：0
> 
> 时间：2012-07-02T15:34:01.830
> 
> 标签：fonts

我需要将 DejaVu 字体与仅支持 OTF 格式字体的应用程序一起使用。我已经尝试过免费的在线字体转换器，例如 www.freefontconverter.com/ 和[https://onlinefontconverter.com](https://onlinefontconverter.com)，虽然它们返回的是 OTF 文件，但它似乎无效。

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:44:52.633

只是一个更新：我们最终使用了[FontGear](http://www.fontgear.net/)的字体工具，但我还在 DejaVu 邮件列表上收到了 Jim Cloos 的出色回复，其中详细说明了如何使用 FontForge 进行转换：

> 我建议直接从 sfd 文件在 fontforge 中构建 OTF（又名 SFNT/CFF）版本的面孔。
> 
> 它应该是可编写脚本的，但在 GUI 中选择 Element -> Font Info，然后在该对话框中选择图层。在那里，单击所有层三次。或者，在同一个对话框中，转到 General 并将 Em 大小设置为 1000。
> 
> 我建议执行编辑-> 选择-> 全选和元素-> 正确方向，以及元素-> 简化和元素-> 圆形。
> 
> 如果您想要 CFF 提示，请使用 Edit -> Select -> Select All do Hints -> AutoHint。
> 
> 然后您可以使用 File -> Generate Fonts 并指定 OpenType(CFF)。
> 
> 在“生成”对话框中，“选项”按钮会弹出另一个对话框，您可以在其中调整生成。

# .net - 服务器修改 SSL 证书“颁发者”

> ID：11296767
> 
> 赞同：1
> 
> 时间：2012-07-02T15:34:03.877
> 
> 标签：.net, ssl, certificate

我们有一个 .Net 应用程序，它连接到我们托管的服务器上的 Web 服务，并且我们在这些服务器上绑定到 https/443 的 SSL 证书。有时这些 SSL 证书是自签名的，因此我们并不完全依赖 X509Certificate2.Verify() 方法和我们为 ServicePointManager.ServerCertificateValidationCallback 编程的方法中的 SslPolicyErrors.None 枚举，因为我们的证书并不总是有效的。

我们有一个第二步，检查哈希字符串的签名 (X509Certificate.GetCertHashString()) 并将其与“已批准”证书列表进行比较。这样，如果它是一个已知的证书，我们可以为回调返回一个 true。

在我们的一个安装站点中，当连接到完全相同的 Web 服务器时，我们会得到一个不同的哈希字符串。在将 X509Certificate 对象上的每个属性打印到日志文件后，我发现它们连接时的“颁发者”值不同。从他们用户的工作站到他们的网络硬件，再到我们的服务器，一路上都有一些东西正在修改证书。当我们的应用程序验证证书时，首先它不再是受信任的机构，其次当它检查哈希字符串时，它不在批准列表中（更改颁发者似乎会更改哈希）。

任何人都可以提供有关他们如何做到这一点的任何想法吗？此外，任何想法如何在.Net中以编程方式做到这一点？

谢谢，丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T21:21:08.180

有问题的连接是否有可能被处于 SSL 会话中间的企业代理（如[bluecoat](http://www.bluecoat.com/)或[websense ）拦截？](http://www.websense.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:39:44.177

更改证书会破坏其签名，并且当您的验证表明某些内容会更改证书时，您应该查看*更改*证书的内容，而不是“如何”完成。

更改很简单 - 由于证书是自签名的，因此某人可以使用自己的密钥对创建另一个自签名证书，并将不同的主题或颁发者放入证书。没有大碍。目标显然是通过安装中间人代理来捕获和解码流量。

# command-line - 如何从 Windows 上的命令提示符运行 python 程序？

> ID：11296768
> 
> 赞同：1
> 
> 时间：2012-07-02T15:34:07.963
> 
> 标签：command-line, python-2.7, command-prompt

好的，所以我让 python 在命令提示符下运行，我只是无法弄清楚从中调用脚本的语法。所以我的文件在 c:\python\script 所以我一直这样打电话；

```
"C:\Python\Script" 
```

但它什么也没做并返回

```
""File<stdin>", line 1" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:39:29.350

再会，

```
python script.py  arg1 arg2 argN 
```

如果 python interpeter 不在 PATH 变量中，您可以设置它： [从 Windows 批处理文件设置系统环境变量？](https://stackoverflow.com/questions/3803581/setting-a-system-environment-variable-from-a-windows-batch-file)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T15:40:05.157

如果你的路径中有 Python 可执行文件，你可以这样调用你的脚本：

```
python C:\Python\Script.py 
```

# javascript - 从 location.href 支持时，页面未正确初始化

> ID：11296772
> 
> 赞同：0
> 
> 时间：2012-07-02T15:34:12.267
> 
> 标签：javascript, back, window.location, initializing

我刚刚完成了相当大量的 Javascript 的编写（除了最相关的部分之外，我会为您省去所有内容），我只剩下一个问题。

在某一时刻，我需要使用`location.href`前进到文章页面。如果用户从文章页面单击浏览器的后退按钮，他们会返回主页（良好），但页面仍处于最初离开时的状态（不良）。

Javascript 根本没有意识到页面已经改变，更令人惊讶的是，HTML 也没有（有几个地方我使用 Javascript 来修改常设的 HTML）。

少量披露：这是一个移动网站。我正在使用触摸事件监听一个元素的短按（而不是长时间的拖动）。我尝试过的任何类型的非 Javascript 链接都会弄乱拖动位，因为它都不在乎手指按下了多长时间，并且如果您在拖动时尝试移动手指，通常会吓坏。

我想不出任何其他在这里会非常有用的代码，但我很乐意发布任何需要的代码。

谢谢！

-S

* * *

根据要求，以下是一些相关代码：

```
function t_end(e)
{
    var touch = e.changedTouches[0]; // Get the information for finger #1

    // we only really care if we've been dragging already,
    // and the finger that's been lifted is the same (first)
    // finger from the initial touch.
    if(dragging && !change_ready && touch.identifier == touchID)

    {
        var spd = (100.0 * touch.pageX / $(document).width() - last_touch[0].x)/(new Date() - drag_time);

        // if the finger has been down for a very short time,
        // and is not moving quickly when removed, this will
        // count as a click, and not a drag.
        if(new Date() - start_time < 50 && spd < .2 && spd > -.2)
        {
            debugText("leaving for page @ " + roll_data[current_story].link);
            location.href = roll_data[current_story].link;
        }else{

            var dir, new_story;

            // at higher speeds we will swap stories.
            // at lower speeds will will just return.
            if(spd > .2 || spd < -.2)
            {
                if(spd < 0)
                {
                    new_story = (current_story > 0 ? current_story - 1 : story_count - 1);
                    dir = "r2l";
                }else{
                    new_story = (current_story < story_count - 1 ? current_story + 1 : 0);
                    dir = "l2r";
                }
            }else{
                new_story = current_story;

                // nx: new x.  The point to which the
                // finger has dragged the current story
                var nx = 100.0 * touch.pageX / $(document).width() - anchor_point.x;
                if(nx < 0)
                {
                    current_story = (current_story > 0 ? current_story - 1 : story_count - 1);
                    dir = "l2r";
                }else{
                    current_story = (current_story < story_count - 1 ? current_story + 1 : 0);
                    dir = "r2l";
                }
            }

            change_ready = true;
            dragging = false;

            toStory(new_story, dir, "no", 100);
        }
    }
} 
```

*   此代码来自故事滚轮，用于移动网站。通过从屏幕一侧滚动并从另一侧滚动，故事会通过列表发生变化。
*   这个函数是触摸端监听器指向的。每当手指（*任何*手指）从屏幕上移开时，它就会被触发。可以在[这里](http://backtothecode.blogspot.it/2009/10/javascript-touch-and-gesture-events.html)找到触摸事件的一个很好的简单细分。
*   `roll_data`是一个`Array`具有多个属性的对象，包括`link`（一个 url）。
*   `toStory()`是一个滑动到选定故事的功能，给定要滑动到的故事，方向（从左到右或从右到左，由`"l2r"`and给出`"r2l"`）是否重置当前故事的位置（由`"yes"`or给出`"no"`）和时间动画变化。除第一个参数外，所有参数都是可选的。
*   `debugText()`是一个简单的函数，它设置`.innerHTML`（或者更确切地说，`.html()`通过 jQuery）如果布尔值 ( `debugging`) 为真。

当页面被退回时，问题的最直接迹象是调试文本仍然存在（并且设置为它设置的最后一个东西，在这种情况下是“离开页面@ [url]”）。Javascript 也停止了（需要告诉几个变量，因为有人点击了页面，它们并没有完成页面）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:55:01.753

可以检测何时离开页面并将其设置为所需状态。

```
<!DOCTYPE html>
<html>
<head>
    <title>unload demo</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript">
        function resetPage() {
            // alert("unload");
            // reset page here
        }
    </script>
</head>
<body onunload="resetPage();">
    hello world
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:38:03.267

您可以改用 history.pushState 方法，只需确保首先支持它

```
if (history.pushState)
    history.pushState("", "", url);
else
    window.location = url; 
```

# python - 从 JS+Python 调用时 PyQt 对话框焦点

> ID：11296773
> 
> 赞同：1
> 
> 时间：2012-07-02T15:34:13.003
> 
> 标签：python, html, dialog, focus, pyqt

我有一个带有按钮的 HTML 窗口，该按钮调用加载 PyQT 对话框的 python 函数。我的问题是：我的漂亮对话框出现在 HTML 窗口后面，用户必须移动 HTML 窗口才能使用 PyQT GUI。我应该在哪里定义，以及如何将 Dialog (PyQt) 定义为 HTML 窗口上方？谢谢！

更多信息：

我的 python 文件导入：从 PyQt4 导入 QtCore、QtGui

我的 HTML 按钮使用 JSON 调用 python 函数。python函数打开我的对话框：

```
app = QtGui.QApplication(sys.argv)
Dialog = QtGui.QDialog()
ui = Ui_Dialog()
ui.setupUi(Dialog)
Dialog.setModal(True)       
Dialog.show()
Dialog.raise_()
app.exec_() 
```

单击位于我的 HTML 页面中的 HTML 按钮，打开我的 DIALOG，但 DIALOG 出现在 HTML 页面的后面。

请让我知道我应该添加到我的 Q 中的缺失信息是什么。谢谢 :) Dolphinet

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:41:45.153

[`raise_()`](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qwidget.html#raise)把窗户放在上面。

或用于`exec_()`将其显示为[模态对话框](http://qt-project.org/doc/qdialog.html#modal-dialogs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T17:40:55.367

尝试调用`.raise()_`你的 PyQt 窗口。

# html - 防止 iFrame 采用父 CSS

> ID：11296779
> 
> 赞同：1
> 
> 时间：2012-07-02T15:34:36.507
> 
> 标签：html, css, iframe

如何防止 iFrame 对象从主页中获取 css 属性。（或者我认为这就是它正在做的事情）

具体来说：

我正在我的主类中创建一个 iframe 对象，并且我试图在显示 iFrame 时更改主页的不透明度，但由于某种原因，它也改变了 iFrame 的不透明度。我试图把代码，但它看起来很难看......

基本上，我正在尝试做类似 Facebook（或其他网站）查看图像的方式。背景变暗（ish）并弹出一个页面，您可以浏览它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-02T15:37:25.900

> 如何防止 iFrame 对象从主页中获取 css 属性。

没做什么。iframe 包含独立的文档，CSS 不会级联到它们中。

> 我试图在显示 iFrame 时更改主页的不透明度，但由于某种原因，它也改变了 iFrame 的不透明度

`opacity`更改其应用的元素的呈现内容，而不是该元素的每个单独的后代。

不要把`iframe`你要设置的元素放在里面`opacity`。您可能必须使用绝对定位来获得所需的布局。

# javascript - ajax 请求后执行 Google AdWords 转换跟踪代码

> ID：11296781
> 
> 赞同：1
> 
> 时间：2012-07-02T15:34:39.633
> 
> 标签：javascript, jquery, ajax, google-ads-api

当 ajax 请求成功完成时，执行 google tracking javascript 的最佳方式是什么？

ajax 请求：

```
$('#form').ajaxSubmit({
    url:'process.php', 
    success:function(response) {
        if(response == 'success')
        {
            // trigger analytics code
        }
    }
}); 
```

谷歌广告代码：

```
<script type="text/javascript">
/* <![CDATA[ */
var google_conversion_id = xxxxxxx;
/* ]]> */
</script>
<script type="text/javascript" src="http://www.googleadservices.com/pagead/conversion.js">
</script>
<noscript>
<div style="display:inline;">
<img height="1" width="1" style="border-style:none;" alt="" src="http://www.googleadservices.com/"/>
</div>
</noscript> 
```

我是否需要将分析代码添加到单独的 js 文件中，然后使用[http://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)？

或者我可以在成功回调中[附加](http://api.jquery.com/append/) `<img height="1" width="1" style="border-style:none;" alt="" src="http://www.googleadservices.com/"/>`到页面吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T09:36:38.233

最后，我发现添加 img 是最简单的解决方案：

```
$('#form').ajaxSubmit({
    url:'process.php', 
    success:function(response) {
        if(response == 'success')
        {
            // trigger adwords code
            $('#holder').append('<img height="1" width="1" style="border-style:none;" alt="" src="http://www.googleadservices.com/"/>');
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T15:42:43.940

有几种方法可以做到这一点。可能最简单的方法是将所有 Google Analytics 代码包含在其自己的 div 中，然后使用您的 AJAX 请求的成功条件来加载图像和脚本源。这是一个例子：

```
<div id="GAcode">
    <script type="text/javascript">
    /* <![CDATA[ */
        var google_conversion_id = xxxxxxx;
    /* ]]> */
    </script>
    <script id="conversionScript" type="text/javascript" src="">
    </script>
    <noscript>
    <div style="display:inline;">
    <img height="1" width="1" style="border-style:none;" alt="" src=""/>
    </div>
</div>
<script type="text/javascript">
    $('#form').ajaxSubmit({
        url:'process.php', 
        success:function(response) {
            if(response == 'success')
            {
                $("#conversionScript").src("http://www.googleadservices.com/pagead/conversion.js");
                $("#GACode img").src("http://www.googleadservices.com/");
            }
        }
    });
</script> 
```

这样做可以确保在您的 AJAX 请求返回成功响应之前，不会识别任何 Google 特定代码。

编辑删除图像的来源。忘了这样做，对不起。

# batch-file - 从 setup.exe 文件调用 .bat

> ID：11296784
> 
> 赞同：0
> 
> 时间：2012-07-02T15:34:45.617
> 
> 标签：batch-file, exe

我正在使用 7zip 创建一个软件安装包。一切正常，除了我需要停止并重新启动服务。我可以使用 .bat 文件使用 net stop / start 命令操作服务，但我希望自动调用此文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:12:18.383

请记住，7z 可以选择**安装程序配置**文件 - 您可以使用以下命令将其添加到安装程序中：

> 复制 /b 7zS.sfx + config.txt + archive.7z archive.exe

您可以使用的示例配置文件：

> ;!@Install@!UTF-8!
> Title="MyInstallation"
> BeginPrompt="准备安装？"
> ExecuteFile="cmd.exe"
> ExecuteParameters="/c MyCommand.bat"
> ;!@InstallEnd@!

查看*Command Line Version* > *Switches* > *-sfx (Create SFX archive)*下的帮助文件以获取有关配置文件的更多详细信息

# java - 接口和抽象类中的相同方法

> ID：11296789
> 
> 赞同：20
> 
> 时间：2012-07-02T15:34:55.353
> 
> 标签：java

我来到了情况：

```
public interface Intr {
    public void m1();
}

public abstract class Abs {
    public void m1() {
        System.out.println("Abs.m1()");
    }
    // public abstract void m1();
}

public class A extends Abs implements Intr {

    @Override
    public void m1() {
        // which method am I overriding, well it is Abs.m1() but why?
        // if method implemented is Abs.m1(), then why I am not getting error for Intr.m1() not implemented.
    }

} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-02T15:37:41.320

你同时满足这两个条件；IE。一种实现同时满足抽象类要求和接口要求。

请注意，除非您`Intr`在另一个继承链中使用它，否则您不需要它。`implements Intr`此外，向上移动到抽象类定义可能是有意义的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T15:38:54.897

您只能覆盖在另一个类中定义的方法。

在接口中声明的方法只是被实现。Java中存在这种区别是为了解决多继承问题。一个类只能扩展一个父类，因此任何对的调用都`super`将毫无歧义地解决。然而，类可以实现多个接口，它们都可以声明相同的方法。最好将接口视为“必须具有”的列表：要符合资格，`Comparable`您的 clus 必须有一个`compareTo()`方法，但它来自哪里或其他接口需要相同的方法并不重要。

因此，从技术上讲，您可以一举覆盖`Abs.m1()`并实施。`Intr.m1()`

请注意，这也可以：

```
public class B extends Abs implements Intr {

    //m1() is inherited from Abs, so there's no need to override it to satisfy the interface
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-11T11:46:15.317

这里接口和抽象类都有相同的方法。

你有一个类名是 hello 和 exteds 抽象类并实现接口它的 true 并且你在 hello 类上覆盖 meth1 方法它很好并且它编译正确并且没有给出任何错误但是你无法识别哪个类方法被覆盖像抽象类或界面。

这是运行时多态性，你不能创建抽象类和接口的对象，但你可以创建它的引用变量。这里的解决方案是您无法在编译时识别出它在运行时的实际覆盖。

```
interface hi
{
    public void meth1();
}
abstract class Hullo
{
    public abstract void meth1();
}
public class Hello extends Hullo implements hi
{
    public void meth1(){
        System.out.println("hello");
    }
        hi h= new Hello();
        h.meth1();//its means interface method is override. and its decide when we call method.
        hullo hu= new Hello();
        hu.meth1();//its means abstract class method is override.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T15:39:42.593

`@Override`确保您覆盖没有区别接口或抽象超类的方法。所以覆盖没有错误。

另一方面，接口方法也在超类中实现，这对于接口合同来说已经足够了。

# php - Question2Answer 使用的编码类型

> ID：11296791
> 
> 赞同：0
> 
> 时间：2012-07-02T15:34:58.943
> 
> 标签：php, function, question2answer

我在一个网站上工作，我想添加某种问答系统，比如 Stackoverflow。

我下载了question2answer，它运行良好，但是当我查看它的编码方式时，我完全不明白，它纯粹是具有很多功能的php，我没有遇到任何HTML。看它是怎么写的，我觉得很有趣。我想更多地了解它是如何工作的，但我不知道它叫什么（如果它有名字的话）。有谁知道一个教程，我可以在其中了解更多信息。

我不指望在我的网站上使用 question2answer，我只是用它来了解系统的工作原理，最后我想自己制作这个系统。

如果可以提供帮助，代码看起来像这样：

```
require_once QA_INCLUDE_DIR.'qa-db-selects.php';
require_once QA_INCLUDE_DIR.'qa-app-format.php';
require_once QA_INCLUDE_DIR.'qa-app-updates.php';

//  Determine whether path begins with qa or not (question and answer listing can be accessed either way)

$requestparts=explode('/', qa_request());
$explicitqa=(strtolower($requestparts[0])=='qa');

if ($explicitqa)
    $slugs=array_slice($requestparts, 1);
elseif (strlen($requestparts[0]))
    $slugs=$requestparts;
else
    $slugs=array();

$countslugs=count($slugs);

//  Get list of questions, other bits of information that might be useful

$userid=qa_get_logged_in_userid();

@list($questions1, $questions2, $categories, $categoryid, $favorite, $custompage)=qa_db_select_with_pending(
    qa_db_qs_selectspec($userid, 'created', 0, $slugs, null, false, false, qa_opt_if_loaded('page_size_activity')),
    qa_db_recent_a_qs_selectspec($userid, 0, $slugs),
    qa_db_category_nav_selectspec($slugs, false, false, true),
    $countslugs ? qa_db_slugs_to_category_id_selectspec($slugs) : null,
    ($countslugs && isset($userid)) ? qa_db_is_favorite_selectspec($userid, QA_ENTITY_CATEGORY, $slugs) : null,
    (($countslugs==1) && !$explicitqa) ? qa_db_page_full_selectspec($slugs[0], false) : null
); 
```

我的网站有点像一个社交网站，主要用于极限运动，主要用于分享媒体（图片和视频）并提出问题等。您认为以与 question2answer 相同的格式重写我的所有网站是个好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T16:59:46.723

我曾与 Q2A 合作过，我可以告诉你架构实际上并不算太糟糕。它很好地遵循 MVC（将程序逻辑与数据逻辑与输出控制分离）。

如果你想给它起个名字，我会称之为“过程风格”，而不是面向对象的风格。使用了一些类（例如 HTML 输出类），但它主要是一堆函数，分成不同的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:59:06.270

不，您应该使用适当的体系结构和可读代码编写它，而您发布的内容是混乱的。尝试 9000 多个免费提供的 PHP 框架中的任何一个，例如[Symfony2](http://symfony.com)或[Yii](http://www.yiiframework.com/)。

# eclipse - 安装 TestNG 时出错

> ID：11296793
> 
> 赞同：-1
> 
> 时间：2012-07-02T15:35:11.293
> 
> 标签：eclipse, testng

我曾尝试在面向 Web 开发人员的 Eclipse Java EE IDE 中安装 TestNG。

版本：Juno 发布版本 ID：20120614-1722

在安装过程中，我发现了以下错误并且我的安装已停止。

```
An error occurred while collecting items to be installed
session context was:(profile=epp.package.jee, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
No repository found containing: osgi.bundle,org.testng.eclipse,6.5.2.20120616_1545
No repository found containing: org.eclipse.update.feature,org.testng.eclipse,6.5.2.20120616_1545 
```

任何想法来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T13:45:26.413

尝试当前版本的 TestNG：**6.7.0.20120825_1316**。
我刚刚在 Juno 中安装并使用它没有问题。

# android - 为什么 layout 和 layout-normal-mdpi 的存在不会产生编译时错误？

> ID：11296794
> 
> 赞同：2
> 
> 时间：2012-07-02T15:35:12.167
> 
> 标签：android, android-layout

根据文档， Android OS的裸`layout`资源目录解释为。`layout, normal, mdpi`如果我创建一个新项目并制作这样的布局结构：

```
/res/
    /layout/
    /layout-normal/ 
```

或者

```
/res/
    /layout/
    /layout-normal-mdpi/ 
```

我没有错误。为什么？

如果没有错误，那么我可以得出结论，裸`layout`目录**不是** `normal, mdpi`，但它适用于所有未明确设置的布局，对吧？！所以它的目的总是可变的？！

在示例 2\. 中，如果我在`normal, mdpi`移动屏幕上加载内容，它会从裸目录还是显式目录加载？

提前感谢任何花时间为我澄清这一点的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T15:39:29.863

该应用程序可能在`/layout-normal-mdpi`不考虑资源的设备上运行。然后它将依赖`/layout`. 换句话说，其中的资源`/layout`将用作没有更多特定资源可用的任何配置的默认值。

谈论drawables更有意义。系统会将可绘制对象从`/drawable`默认值缩放`mdpi`到实际配置的密度。`/drawable-mdpi`另一方面，这些资源将专门用于`mdpi`配置。

# .net - 检查 DEFLATED 数据的有效性

> ID：11296801
> 
> 赞同：0
> 
> 时间：2012-07-02T15:35:24.950
> 
> 标签：.net, inflate, deflate

我有一些通过 DEFLATE 算法传递的数据。如果我运行命令`perl -MCompress::Zlib -e 'undef $/; print uncompress(<>)' < deflated_data.gz` 打印正确的输出。但是，如果我对相同的数据使用以下代码，我会`InvalidDataException`在尝试对数据进行膨胀时收到一个。是否有任何 INFLATE 实现可以告诉我数据不正确的地方？

```
 public byte[] Inflate(byte[] inputData)
    {
        using (Stream input = new DeflateStream(new MemoryStream(inputData),
                                                CompressionMode.Decompress))
        {
            using (MemoryStream output = new MemoryStream())
            {
                input.CopyTo(output);
                return output.ToArray();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T17:46:05.887

这不是兼容性问题，而是您的格式理解问题。这里提到了三种格式：deflate（原始压缩数据）、zlib（压缩在 zlib 标头和尾部中的数据）和 gzip（压缩在 gzip 标头和尾部中的数据）。它们分别记录在[RFC 1951](https://www.rfc-editor.org/rfc/rfc1951)、[RFC 1950](https://www.rfc-editor.org/rfc/rfc1950)和[RFC 1952](https://www.rfc-editor.org/rfc/rfc1952)中。

Compress::Zlib uncompress() 函数已[正确记录](http://perldoc.perl.org/Compress/Zlib.html)并声明 uncompress() 需要一个 zlib (RFC 1950) 流。.NET DeflateStream 类也有[正确的文档记录](http://msdn.microsoft.com/en-us/library/system.io.compression.deflatestream.aspx)，并且需要一个原始的 deflate 流（RFC 1951）。

当你说你“有一些数据已经通过 DEFLATE 算法”时，你真正的意思是你已经压缩成 zlib (RFC 1950) 格式，而不是 deflate 格式。

# charts - 谷歌图表作为图像

> ID：11296804
> 
> 赞同：12
> 
> 时间：2012-07-02T15:35:40.003
> 
> 标签：charts, google-visualization

我正在尝试使用 Google 图表在电子邮件中嵌入图表图像。所以每个用户都会有一个独特的图表。

我们是否可以使用 API 并嵌入一个唯一的 URL，该 URL 将呈现图表并将图像发送到电子邮件客户端。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-04T14:10:48.380

您可以使用`chart.getImageURI()`以下方法获取图表的 PNG 版本：

需要在图表绘制好之后，所以在`ready`事件中！

```
var my_div = document.getElementById('my_div');
var my_chart = new google.visualization.ChartType(chart_div);

google.visualization.events.addListener(my_chart, 'ready', function () {
  my_div.innerHTML = '<img src="' + chart.getImageURI() + '">';
});

my_chart.draw(data); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T21:35:29.240

[可以使用Google Chart Wizard](https://developers.google.com/chart/image/docs/chart_wizard)生成将呈现图表图像的 url 。但是，该服务最近（我相信是 4 月）因为已弃用。它仍然可以正常工作，但是对于长期解决方案，您可能必须想出另一种方法。

**编辑**

另一种方法是在发送电子邮件之前生成图像并将其保存到您的服务器。您可以通过在服务器上设置一个页面来专门通过解析给定的 slug 来生成图表，并在加载图表时发送带有图像数据的 POST 请求。您可以使用隐藏的画布（需要 HTML5）和[canvg](http://code.google.com/p/canvg/) javascript 插件来访问数据 URI：

```
chart_area = document.getElementById("chart_div").getElementsByTagName('iframe')[0].contentDocument.getElementById("chartArea");
svg = chart_area.innerHTML;
canvas = document.getElementById("hidden_canvas");
canvas.setAttribute('width', chart_area.offsetWidth);
canvas.setAttribute('height', chart_area.offsetHeight);

canvg(canvas, svg);
image_data_uri = canvas.toDataURL("image/png"); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-09-14T10:12:51.917

不久前我遇到了同样的问题，并在 SA 上找到了您的问题。由于 Google Image Charts 自 2012 年起被弃用，我构建了**[https://image-charts.com](https://image-charts.com)**来替代 Google Image Charts，以便将图表和图形嵌入到电子邮件中（右键单击下面的图像并查看 URL）：

[![](../Images/0ff521b0310705e766c18999b3d60821.png)](https://image-charts.com/chart?chs=700x300&chxt=x,y&chl=2018|2017|2015&chd=t:60,40,20&cht=pa&chdl=Image|Charts|Rocks&chf=ps0-0,lg,45,ffeb3b,0.2,f443367C,1|ps0-1,lg,45,8bc34a,0.2,0096887C,1|ps0-2,lg,45,EA469E,0.2,03A9F47C,1&chan)

```
https://image-charts.com/chart?chs=700x300&chxt=x,y&chl=2018|2017|2015&chd=t:60,40,20&cht=pa&chdl=Image|Charts|Rocks&chf=ps0-0,lg,45,ffeb3b,0.2,f443367C,1|ps0-1,lg,45,8bc34a,0.2,0096887C,1|ps0-2,lg,45,EA469E,0.2,03A9F47C,1&chan 
```

[![](../Images/52480c29c59630aded5b684f85c66898.png)](https://image-charts.com/chart?cht=lc&chs=700x300&chd=t:10,25,30,40,12,48,100,20,47,29,84,30,27,50,70&chxt=x,y&chxl=0:%7CJun%7CJul%7CAug%7CSep%7COct%7CNov%7CDec%7CJan%7C1:%7C%7C50%7C100&chm=B,FCECF4,0,0,0&chco=E4061C&chdl=Coffee%20consumed&chma=0,0,20,10&chl=%7C%7C%7C%7C%7C%7Csuch%20a%20very%20%20%20big%20project!)

```
https://image-charts.com/chart?cht=lc&chs=700x300&chd=t:10,25,30,40,12,48,100,20,47,29,84,30,27,50,70&chxt=x,y&chxl=0:|Jun|Jul|Aug|Sep|Oct|Nov|Dec|Jan|1:||50|100&chm=B,FCECF4,0,0,0&chco=E4061C&chdl=Coffee consumed&chma=0,0,20,10&chl=||||||such a very   big project! 
```

[![](../Images/c4e1adde3956286a2a621776d61128b5.png)](https://image-charts.com/chart?chs=700x300&cht=gv&chl=digraph%20%7Ba%20-%3E%20b%5Blabel=%220.2%22,weight=%220.2%22%5D;a%20-%3E%20c%5Blabel=%220.4%22,weight=%220.4%22%5D;c%20-%3E%20b%5Blabel=%220.6%22,weight=%220.6%22%5D;c%20-%3E%20e%5Blabel=%220.6%22,weight=%220.6%22%5D;e%20-%3E%20e%5Blabel=%220.1%22,weight=%220.1%22%5D;e%20-%3E%20b%5Blabel=%220.7%22,weight=%220.7%22%5D;%7D)

```
https://image-charts.com/chart?chs=700x300&cht=gv&chl=digraph {a -> b[label="0.2",weight="0.2"];a -> c[label="0.4",weight="0.4"];c -> b[label="0.6",weight="0.6"];c -> e[label="0.6",weight="0.6"];e -> e[label="0.1",weight="0.1"];e -> b[label="0.7",weight="0.7"];} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-12T16:05:48.653

聚会有点晚了，但我们刚刚为这个确切的需求构建了[https://ChartURL.com](https://ChartURL.com)，因为尽管这个问题已经有将近 3.5 年的历史了，但在 ChartURL 之前最好的解决方案是已弃用的 Google Image Charts API :)

希望这可以帮助某人！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-24T21:50:55.277

要将 Google Charts 呈现为图像，您可以使用[Google Charts Node](https://quickchart.io/documentation/google-charts-image-server/)，这是一个使用 Puppeteer 呈现图表的开源项目。

[google-charts-node](https://www.npmjs.com/package/google-charts-node)可作为 NPM 库使用，可以像这样使用：

```
const GoogleChartsNode = require('google-charts-node');

function drawChart() {
  const data = google.visualization.arrayToDataTable([
    ['City', '2010 Population',],
    ['New York City, NY', 8175000],
    ['Los Angeles, CA', 3792000],
    ['Chicago, IL', 2695000],
    ['Houston, TX', 2099000],
    ['Philadelphia, PA', 1526000]
  ]);

  const options = {
    title: 'Population of Largest U.S. Cities',
    chartArea: {width: '50%'},
    hAxis: {
      title: 'Total Population',
      minValue: 0
    },
    vAxis: {
      title: 'City'
    }
  };

  const chart = new google.visualization.BarChart(container);
  chart.draw(data, options);
}

// Render the chart to image
const image = await GoogleChartsNode.render(drawChart); 
```

现在您可以将`image`缓冲区保存为文件或将其作为 HTTP 响应返回等。它看起来像这样：

[![谷歌图表作为图像](../Images/39188282bfb0ac6008dc403fc2bf5b2d.png)](https://i.stack.imgur.com/VnLad.png)

Google Charts 节点渲染器也可用作 Web 服务，如此处所述[，](https://quickchart.io/documentation/google-charts-image-server/)因此您可以在除 JS 之外的任何语言中使用它。

如果您对使用更通用的开源图表格式感兴趣，您还可以使用[QuickChart](https://quickchart.io/)，这是一个 Chart.js 渲染 API。

# php - 如何使用 php exec 避免“ls: write error: Broken pipe”

> ID：11296809
> 
> 赞同：1
> 
> 时间：2012-07-02T15:35:57.440
> 
> 标签：php

在 PHP 中，我正在运行以下命令：

```
exec ("ls -U ".$folder." |head -1000", $ls_u); 
```

此命令位于 PHP 文件中，由 PHP 在控制台上直接运行并引发此错误：

```
ls: write error: Broken pipe 
```

是什么导致了这个错误？或者在 PHP exec 中使用管道不是一个好主意？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-29T17:42:43.960

**在终端上使用 PHP 的 Linux 中，您可以使用以下代码重现此错误：**

主.php：

```
<?php
  $process = popen("ls", "r");
  pclose($process);
?> 
```

**然后在终端上像这样运行它：**

```
eric@dev ~ $ php main.php
ls: write error: Broken pipe 
```

发生错误是因为您正在运行一个返回数据的命令并且您没有捕获它，因此它抱怨管道损坏。

**我能够像这样修复它：**

```
<?php
  $handle = popen('ls', 'r');
  $read = fread($handle, 2096);
  pclose($handle);
  echo $read;
?> 
```

**然后它工作，打印：**

```
eric@dev ~ $ php main.php
main.php
anotherfile.txt 
```

请注意，`fread(...)`如果您想从 ls 获取所有输出，则必须将其放入循环中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-02T15:39:25.453

我相信控制台命令中存在语法错误，并建议使用[`escapeshellarg()`](http://php.net/escapeshellarg).

```
exec('ls -U '.escapeshellarg($folder).' | head -1000', $ls_u); 
```

# c# - 如何实现 IEnumerable

> ID：11296810
> 
> 赞同：147
> 
> 时间：2012-07-02T15:35:59.157
> 
> 标签：c#, .net, generics

我知道如何实现非通用 IEnumerable，如下所示：

```
using System;
using System.Collections;

namespace ConsoleApplication33
{
    class Program
    {
        static void Main(string[] args)
        {
            MyObjects myObjects = new MyObjects();
            myObjects[0] = new MyObject() { Foo = "Hello", Bar = 1 };
            myObjects[1] = new MyObject() { Foo = "World", Bar = 2 };

            foreach (MyObject x in myObjects)
            {
                Console.WriteLine(x.Foo);
                Console.WriteLine(x.Bar);
            }

            Console.ReadLine();
        }
    }

    class MyObject
    {
        public string Foo { get; set; }
        public int Bar { get; set; }
    }

    class MyObjects : IEnumerable
    {
        ArrayList mylist = new ArrayList();

        public MyObject this[int index]
        {
            get { return (MyObject)mylist[index]; }
            set { mylist.Insert(index, value); }
        }

        IEnumerator IEnumerable.GetEnumerator()
        {
            return mylist.GetEnumerator();
        }
    }
} 
```

但是我也注意到 IEnumerable 有一个通用版本，`IEnumerable<T>`但我不知道如何实现它。

如果我添加`using System.Collections.Generic;`到我的 using 指令，然后更改：

```
class MyObjects : IEnumerable 
```

到：

```
class MyObjects : IEnumerable<MyObject> 
```

然后右键单击`IEnumerable<MyObject>`并选择`Implement Interface => Implement Interface`，Visual Studio 会帮助添加以下代码块：

```
IEnumerator<MyObject> IEnumerable<MyObject>.GetEnumerator()
{
    throw new NotImplementedException();
} 
```

这次从方法中返回非泛型 IEnumerable 对象`GetEnumerator();`不起作用，那么我在这里放什么呢？当 CLI 在 foreach 循环期间尝试枚举我的数组时，它现在会忽略非泛型实现并直接使用泛型版本。

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2012-07-02T15:45:53.823

如果您选择使用泛型集合，例如`List<MyObject>`代替`ArrayList`，您会发现`List<MyObject>`将提供可以使用的泛型和非泛型枚举数。

```
using System.Collections;

class MyObjects : IEnumerable<MyObject>
{
    List<MyObject> mylist = new List<MyObject>();

    public MyObject this[int index]  
    {  
        get { return mylist[index]; }  
        set { mylist.Insert(index, value); }  
    } 

    public IEnumerator<MyObject> GetEnumerator()
    {
        return mylist.GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return this.GetEnumerator();
    }
} 
```

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2012-07-02T15:41:23.267

您可能不希望*显式*实现`IEnumerable<T>`（这就是您所展示的）。

通常的模式是在 的显式实现中使用`IEnumerable<T>`'s ：`GetEnumerator``IEnumerable`

```
class FooCollection : IEnumerable<Foo>, IEnumerable
{
    SomeCollection<Foo> foos;

    // Explicit for IEnumerable because weakly typed collections are Bad
    System.Collections.IEnumerator IEnumerable.GetEnumerator()
    {
        // uses the strongly typed IEnumerable<T> implementation
        return this.GetEnumerator();
    }

    // Normal implementation for IEnumerable<T>
    IEnumerator<Foo> GetEnumerator()
    {
        foreach (Foo foo in this.foos)
        {
            yield return foo;
            //nb: if SomeCollection is not strongly-typed use a cast:
            // yield return (Foo)foo;
            // Or better yet, switch to an internal collection which is
            // strongly-typed. Such as List<T> or T[], your choice.
        }

        // or, as pointed out: return this.foos.GetEnumerator();
    }
} 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-07-02T15:37:40.223

你为什么要手动做？[`yield return`](http://msdn.microsoft.com/en-us/library/9k7k7cf0.aspx)自动化处理迭代器的整个过程。[（我也在我的博客上](http://coding.abel.nu/2011/12/return-ienumerable-with-yield-return/)写过，包括查看编译器生成的代码）。

如果你真的想自己做，你也必须返回一个通用枚举器。您将无法再使用 a ，`ArrayList`因为那是非通用的。改为a `List<MyObject>`。这当然假设您的集合中只有类型`MyObject`（或派生类型）的对象。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-02T15:42:15.283

如果您使用泛型，请使用 List 而不是 ArrayList。List 正是您需要的 GetEnumerator 方法。

```
List<MyObject> myList = new List<MyObject>(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-02T15:40:12.627

将 mylist 变成`List<MyObject>`, 是一种选择

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-27T20:11:18.573

请注意，`IEnumerable<T>`allready 已由另一种方法实现是从作为基类（[文档](https://docs.microsoft.com/en-us/dotnet/api/system.collections.objectmodel.collection-1?view=netframework-4.7.2)`System.Collections`）派生您的类：`MyObjects``System.Collections`

> System.Collections：提供泛型集合的基类。

稍后我们可以自己实现来覆盖虚拟`System.Collections`方法以提供自定义行为（仅适用于`ClearItems`, `InsertItem`, `RemoveItem`, 以及`SetItem`,`Equals`和`GetHashCode`from `ToString`）`Object`。不像`List<T>`which 不是为了易于扩展而设计的。

例子：

```
public class FooCollection : System.Collections<Foo>
{
    //...
    protected override void InsertItem(int index, Foo newItem)
    {
        base.InsertItem(index, newItem);     
        Console.Write("An item was successfully inserted to MyCollection!");
    }
}

public static void Main()
{
    FooCollection fooCollection = new FooCollection();
    fooCollection.Add(new Foo()); //OUTPUT: An item was successfully inserted to FooCollection!
} 
```

请注意，`collection`仅在需要自定义收集行为的情况下才推荐使用，这种情况很少发生。见[用法](https://stackoverflow.com/a/47679777/6844481)。

# c# - 从未引用的库中附加事件

> ID：11296813
> 
> 赞同：0
> 
> 时间：2012-07-02T15:36:11.630
> 
> 标签：c#, circular-dependency

当在库 a 中调用方法时，我需要在库 b 中触发一个方法。

例如，是否有可能`library b`附加到`testEvent`库 a 中的事件？

**库 a - 不能引用库 b（因为循环依赖）**

```
public event testEvent = null;
pubic class alpha{
   public void main(){//application entry point       
   }
} 
```

**图书馆 b - 参考`library a`**

```
public class beta{
  public void hello(){
  }
} 
```

如果做不到这一点，我想我将不得不创建第三个库 ，`library c`它具有对 的引用`library b`，并被`library a`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T18:52:29.363

最简单的解决方案之一是在 a 中定义接口，在 b 中实现实现。然后，在 a 中，您使用反射解析对接口实例的引用：

B.dll：

```
 public class beta : ibeta {
    public void hello() {
    }
 } 
```

A.dll：

```
 public interface ibeta {
    void hello();
 }

 ..

 public static void Main()
 {
     // resolve type by its fully qualified name
     ibeta b = (ibeta)Activator.CreateInstance( Type.GetType( "beta, B" ) );
     b.hello(); 
 } 
```

# c# - Couchbase .Net 客户端库 GetView 缓存问题

> ID：11296815
> 
> 赞同：2
> 
> 时间：2012-07-02T15:36:28.000
> 
> 标签：c#, .net, couchbase

我正在运行 couchbase server 2.0（开发预览版 4）并使用 .net 客户端库版本 1.2。

当我将一些文档（json）添加到我的数据库中，然后在几秒钟内（少于 10 秒）我尝试通过 GetView 通过 .net 客户端库获取此文档，它总是在第一次查询时返回旧值。只有在第二个查询它返回实际值。

当我通过 REST api 执行相同的查询时，它返回实际值。

任何人都可以提供一些有关此的信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T15:59:25.277

Couchbase 中视图的默认行为是增量更新视图的索引。它正在请求一个实际触发增量更新的视图。换句话说，当你第一次请求视图时，你触发了服务器上的索引更新（只有新文档需要索引）。因此，在您第二次调用 GetVew 时，新文档已被编入索引。

这样，Couchbase 视图最终是一致的。如果陈旧的读取不适合或不适合您的情况，您可以在请求视图并修改默认行为时使用 Stale fluent 方法。

因此，要在获得结果之前强制更新视图：

```
var view = client.GetView("beers", "by_name").Stale(StaleMode.False); 
```

更多信息可在[http://www.couchbase.com/docs/couchbase-sdk-net-1.2/api-reference-view.html](http://www.couchbase.com/docs/couchbase-sdk-net-1.2/api-reference-view.html)获得。

- 约翰

# algorithm - 给定码字时如何找到生成矩阵

> ID：11296816
> 
> 赞同：0
> 
> 时间：2012-07-02T15:36:29.603
> 
> 标签：algorithm

```
Code = { 000, 011 , 101, 110 }

generator matrix = {011, 101} 
```

这里给出了代码矩阵，我应该找到生成矩阵。但我对确定生成矩阵一无所知。有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:33:49.047

我不完全确定在这种特定情况下您所说的“生成器矩阵”是什么意思，但似乎您正在寻找代码向量的（最小？）子集 B，以便每个代码字可以表示为向量的线性组合在 B.

我建议您执行以下操作：将代码向量放入矩阵 A 中，使得每个代码向量都是 A 的一列。然后使用[高斯消元](http://en.wikipedia.org/wiki/Gaussian_elimination)将 A 置于上三角形式。前几个向量（准确地说是第一列（A）列）构成了我相信你所说的生成器。

编辑：让我澄清一下。如果您的代码存在于 GF(2) 中，那么您当然必须对 GF(2) 执行高斯消除。

# c# - 使用指定的用户名和密码运行 mstsc.exe

> ID：11296819
> 
> 赞同：33
> 
> 时间：2012-07-02T15:36:34.110
> 
> 标签：c#, rdp

我意识到在 Windows 7 中，不可能为同一主机保存不同的凭据，但我需要一些解决方法。

我可以在代码中手动提供用户名和密码吗？将它们存储在临时 .rdp 文件中？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-02T19:41:14.897

```
Process rdcProcess = new Process();
rdcProcess.StartInfo.FileName = Environment.ExpandEnvironmentVariables(@"%SystemRoot%\system32\cmdkey.exe");
rdcProcess.StartInfo.Arguments = "/generic:TERMSRV/192.168.0.217 /user:" + "username" +  " /pass:" + "password";
rdcProcess.Start();

rdcProcess.StartInfo.FileName = Environment.ExpandEnvironmentVariables(@"%SystemRoot%\system32\mstsc.exe");
rdcProcess.StartInfo.Arguments = "/v " + "192.168.0.217"; // ip or name of computer to connect
rdcProcess.Start(); 
```

上面的代码启动了与 .217 的连接，并且没有提示我提供密码。感谢帮助。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-08-03T11:48:35.750

如果要使用 powershell，可以使用添加凭据

```
cmdkey /generic:DOMAIN/"computername or IP" /user:"username" /pass:"password" 
```

然后使用调用 RDP 连接

```
Start-Process -FilePath "$env:windir\system32\mstsc.exe" -ArgumentList "/v:computer name/IP" -Wait 
```

如果要删除凭据，请运行

```
cmdkey /delete:DOMAIN/"Computer name or IP" 
```

记得去掉“”

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-12-16T19:33:58.340

这是 Krzysiek 帖子的更新版本。

```
var rdcProcess = new Process
    {
        StartInfo =
            {
                FileName = Environment.ExpandEnvironmentVariables(@"%SystemRoot%\system32\cmdkey.exe"),
                Arguments = String.Format(@"/generic:TERMSRV/{0} /user:{1} /pass:{2}", 
                            fp.ipAddress,
                            (String.IsNullOrEmpty(fp.accountDomain)) ? fp.accountUserName : fp.accountDomain + "\\" + fp.accountUserName,
                            fp.accountPassword),
                            WindowStyle = ProcessWindowStyle.Hidden                                
            }
    };
rdcProcess.Start();
rdcProcess.StartInfo.FileName = Environment.ExpandEnvironmentVariables(@"%SystemRoot%\system32\mstsc.exe");
rdcProcess.StartInfo.WindowStyle = ProcessWindowStyle.Normal;
rdcProcess.StartInfo.Arguments = String.Format("/f /v {0}", fp.ipAddress); // ip or name of computer to connect
rdcProcess.Start(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T09:17:56.073

在试图弄清楚如何允许用户进入我们的网络，而不给他们城堡的钥匙时，我为我的团队中的一些成员启用了远程桌面访问。想到这里，我很快想起了几年前在国防部工作时的一个项目。该项目要求我们“锁定”仅对必要人员的访问权限，并限制对服务器上程序的访问权限。在 Microsoft 的知识库上花费了一些时间后，我们意识到我们可以为那些建立 RDP 连接、登录并限制他们访问该服务器上特定应用程序的员工创建桌面“快捷方式”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-12T14:21:34.830

```
@echo off

cmdkey /generic:TERMSRV/"*IP or Server Name*" /user:%username%

start mstsc /v:*IP or Server Name*

cmdkey /delete:TERMSRV/"*IP or Server Name*"

quit 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-08-18T20:17:22.823

接受的答案解决了问题，但具有将凭据留在用户凭据存储中的副作用。我最终创建了一个 IDisposable，因此我可以在 using 语句中使用凭据。

```
using (new RDPCredentials(Host, UserPrincipalName, Password))
{
    /*Do the RDP work here*/
} 
```

* * *

```
internal class RDPCredentials : IDisposable
{
    private string Host { get; }

    public RDPCredentials(string Host, string UserName, string Password)
    {
        var cmdkey = new Process
        {
            StartInfo =
            {
                FileName = Environment.ExpandEnvironmentVariables(@"%SystemRoot%\system32\cmdkey.exe"),
                Arguments = $@"/list",
                WindowStyle = ProcessWindowStyle.Hidden,
                UseShellExecute = false,
                RedirectStandardOutput = true
            }
        };
        cmdkey.Start();
        cmdkey.WaitForExit();
        if (!cmdkey.StandardOutput.ReadToEnd().Contains($@"TERMSRV/{Host}"))
        {
            this.Host = Host;
            cmdkey = new Process
            {
                StartInfo =
            {
                FileName = Environment.ExpandEnvironmentVariables(@"%SystemRoot%\system32\cmdkey.exe"),
                Arguments = $@"/generic:TERMSRV/{Host} /user:{UserName} /pass:{Password}",
                WindowStyle = ProcessWindowStyle.Hidden
            }
            };
            cmdkey.Start();
        }
    }

    public void Dispose()
    {
        if (Host != null)
        {
            var cmdkey = new Process
            {
                StartInfo =
            {
                FileName = Environment.ExpandEnvironmentVariables(@"%SystemRoot%\system32\cmdkey.exe"),
                Arguments = $@"/delete:TERMSRV/{Host}",
                WindowStyle = ProcessWindowStyle.Hidden
            }
            };
            cmdkey.Start();
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-09-30T07:19:25.557

大多数答案都不正确，它仍然要求密码，这是因为在同一个流程实例上执行不同的流程。

使用命令行完美地工作：

```
 string command = "/c cmdkey.exe /generic:" + ip 
        + " /user:" + user + " /pass:" + password + " & mstsc.exe /v " + ip;

        ProcessStartInfo info = new ProcessStartInfo("cmd.exe", command);
        info.WindowStyle = ProcessWindowStyle.Hidden;
        info.CreateNoWindow = true;

        Process proc = new Process();
        proc.StartInfo = info;
        proc.Start(); 
```

# wpf - 为 listboxitem 模板化绑定设置值

> ID：11296824
> 
> 赞同：0
> 
> 时间：2012-07-02T15:36:54.077
> 
> 标签：wpf, listbox, listboxitem, templatebinding, itemcontainerstyle

我有这种风格：

```
<Style x:Key="SelectableListBoxItemStyle" TargetType="{x:Type ListBoxItem}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ListBoxItem}">

                <Border Background="Transparent"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        CornerRadius="4"
                        BorderThickness="2"
                        x:Name="IconBorder"
                        Margin="4,2,4,2">
                    <ContentPresenter/>
                </Border>

                <ControlTemplate.Triggers>
                    <Trigger Property="IsSelected" Value="true">
                        <Setter TargetName="IconBorder" 
                                Property="BorderBrush" 
                                Value="Blue" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

我的问题是我不知道在使用我的样式时要在 ListBox 上设置哪个属性，以便它的 ListBoxItems 的边框最终具有所需的边框画笔。我也想让这项工作适用于我风格的其他边框画笔。

我希望能够有两个具有相同样式但边框颜色不同的列表框。我有一个列表框：

```
 <ListBox 
        ItemsSource="{Binding SelectedProduct.Pictures}"
        SelectedItem="{Binding SelectedSet, Mode=TwoWay}"
        ItemContainerStyle="{StaticResource ResourceKey= SelectableListBoxItemStyle}">
    </ListBox> 
```

更新..我试过这个：

```
 <ListBox 
        ItemsSource="{Binding SelectedProduct.Pictures}"
        SelectedItem="{Binding SelectedSet, Mode=TwoWay}">

            <ListBox.ItemContainerStyle>
                <Style TargetType="{x:Type ListBoxItem}" BasedOn="{StaticResource SelectableListBoxItemStyle}">
                    <Setter TargetName="IconBorder" Property="BorderBrush" Value="Green" />
                </Style>
            </ListBox.ItemContainerStyle>

        </ListBox> 
```

但是，我得到：错误 8 TargetName 属性不能在样式设置器上设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:53:48.910

而不是使用 a`TemplateBinding`您应该尝试使用相对源绑定。

```
BorderBrush="{Binding RelativeSource={RelativeSource FindAncestor, 
                                      AncestorType={x:Type Listbox}}, 
                                      Path=BorderBrush}" 
```

如果您想拥有与为 定义的边框不同的边框，`ListBox`那么您需要向您添加一个画笔资源`ResourceDictionary`并应用它：

```
<Listbox.Resources>
    <SolidColorBrush x:Key="MyListBoxItemBorderBrush" Color="Red"/>
<Listbox.Resources> 
```

然后在您的模板中：

```
BorderBrush="{StaticResource MyListBoxItemBorderBrush}" 
```

如果您需要某些项目具有不同的边框，那么您需要查看[StyleSelector](http://msdn.microsoft.com/en-us/library/system.windows.controls.styleselector.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:47:43.617

我不是 100% 确定，但我认为您可能需要一个自定义控件。至少我知道您可以使用自定义控件来做到这一点！

如果您创建一个从 ListBox 扩展的自定义控件，其中包含您创建的这种样式，那么您可以在其中创建一个附加属性（类似于 ItemBorderColor），您可以将其绑定到边框的 BorderColor（实际上，对于选择效果，您可能希望在 ControlTemplate () 上创建一个触发器，该触发器基于“IsSelected”属性将该“ItemBorderColor”值应用于边框的 BorderColor）。

可能有一种纯粹的 XAML 方法可以做到这一点，但我不知道......

# javascript - xml getElementsByTagName 按变量

> ID：11296836
> 
> 赞同：0
> 
> 时间：2012-07-02T15:37:47.127
> 
> 标签：javascript, xml

我希望在 XML 文件中获取数据，其中 Tag 是一个变量。我的 XML 如下所示：

```
<b0>123</b0>
<b1>111</b1> 
```

代码：

```
var y = Math.round(d / 11);
var zzz = xmlDoc.getElementsByTagName("y")[0].childNodes[0].nodeValue; 
```

使用上面的代码，它将在 XML“y”标签中搜索，但我想搜索“y”变量的结果，并且由于 XML 之前有“b”，所以标签中的搜索应该是这样的“b（y )”。我已经确认“y”变量的结果总是整数。

我怎样才能完成这个？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:46:10.857

```
var zzz = xmlDoc.getElementsByTagName("b" + y)[0].childNodes[0].nodeValue; 
```

# javascript - setInterval 函数的执行机制是什么

> ID：11296841
> 
> 赞同：0
> 
> 时间：2012-07-02T15:38:04.090
> 
> 标签：javascript, setinterval

我想知道，它是如何工作的`setInterval`功能。

**首先：**我有一个简单的例子（[现场演示](http://jsfiddle.net/gGYKV/4/)）
还有下面的代码。

**HTML：**

```
<div id="elem"></div>
<div id="count"></div>
<div id="Timer"></div> 
```

**Javascript：**

```
var s = 10;
var count = 0;
if (s == 20) alert("S= 20");
var timer = setInterval(function () {
    if (count < 50) {
        count++;
        document.getElementById('count').innerHTML = "Counter: " + count;
    }
    else {
        clearInterval(timer);
        document.getElementById('count').innerHTML = "Counter: End Of Count";
    }
}, 50);
s = 20;
document.getElementById('elem').innerHTML = "variable 's': " + s;
document.getElementById('Timer').innerHTML = "Timer value: " + timer;
if (s == 20) alert("S= 20"); 
```

我想要的只是它的功能如何工作。
执行完函数代码后，是返回首页的代码开头，还是返回执行函数代码，直到使用clearInterval函数。

请任何人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:50:01.343

setInterval 不断重复调用封闭的函数，直到调用 clearinterval。延迟可以以秒为单位 1000 = 1 秒，因为您已经给出了 50 的小延迟，所以该函数会快速连续重复调用，直到达到 50 限制

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:23:34.363

在您的代码中，您向`setTimeout`.

提供给的匿名函数被**异步**[`setInterval`](https://developer.mozilla.org/en/window.setInterval)调用 。在当前函数完成之前，匿名函数不能第一次运行。调用是*注册*您的匿名函数以每 50 毫秒执行一次；它不会*立即*执行。**`setInterval(function() {...})`**

 ****你的程序流程是这样运行的：

```
set initial variables
check if s == 20
register (not execute) the anonymous function with setInterval
set s = 20
print results
check if s == 20
end of your code blcok
...
50ms later, the first call to your anonymous setTimeout function finally happens
Repeatedly call the anonymous function every 50ms 
```

**要点：**如果您需要在匿名函数完成后进行某些操作，请将这些操作放在匿名函数本身中。在您的代码中，我怀疑您想要一些当前在`setTimeout`调用之后出现的行并将它们放在`else`匿名函数的块内。****

# sql - 以下 7 个更新查询的 SQL 优化。同一张桌子。合二为一？

> ID：11296842
> 
> 赞同：1
> 
> 时间：2012-07-02T15:38:19.713
> 
> 标签：sql, delphi, delphi-2009, advantage-database-server, sql-optimization

以下查询像 7 次一样更新同一个表。我希望您能帮助我通过将它放入一个查询中来优化它，以便它只通过表一次而不是 7 次。这确实会降低性能大数据集..

谢谢。

PS我不知道它是否仍然有效，但每个查询字符串都取决于它之前的查询来准确计算。所以如果我们需要将它们分开以保持准确，那么我可以使用一些帮助来优化每个字符串（查询）单独。

以下 SQL 查询是在 Delphi 2009 中进行的，因此格式可能会有所不同，但您仍然应该能够很容易地阅读查询..

```
Str1 :=
'update user set amount = ' +
  '(select round(sum(bill.amount),2) from bill where ' +
  'bill.user = user.code); ' +
'update user set pay = ' +
  '(select round(sum(bill.pay),2) from bill where ' +
  'bill.user = user.code); ' +
'update user set balance = round(amount + pay,2);';

//execute query

 Str1 :=
'update user set group_amt = ' +
  '(select sum(bill.amount) from bill where ' +
  'bill.client = user.client); ' +
'update user set group_pay = ' +
  '(select sum(bill.pay) from bill where ' +
  'bill.client = user.client); ' +
'update user set group_bal = round(group_amt + group_pay,2);';

 //execute query

Str1 :=
'update user set bal_flag = true ' +
'where abs(balance) > 0.001 and bal_flag = false;'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T15:54:58.860

我怀疑您可以将 6 个更新合并为 2 个更新...

```
UPDATE
  user
SET
  amount   = bill.amount,
  pay      = bill.pay,
  balance  = bill.pay + bill.amount
FROM
(
  SELECT
    user,
    round(sum(bill.amount),2)   AS amount,
    round(sum(bill.pay)   ,2)   AS pay
  FROM
    bill
  GROUP BY
    user
)
  AS bill
WHERE
  bill.user = user.code 
```

而且几乎一样...

```
UPDATE
  user
SET
  group_amt = bill.amount,
  group_pay = bill.pay,
  group_bal = bill.pay + bill.amount
FROM
(
  SELECT
    client,
    round(sum(bill.amount),2)   AS amount,
    round(sum(bill.pay)   ,2)   AS pay
  FROM
    bill
  GROUP BY
    client
)
  AS bill
WHERE
  bill.client = user.client 
```

# javascript - 使用 javascript 使表单元素消失

> ID：11296843
> 
> 赞同：1
> 
> 时间：2012-07-02T15:38:24.630
> 
> 标签：javascript, python, html, forms

我对javascript有点陌生。我有一堆用于 html 表单的复选框。复选框是从 python 脚本动态生成的。我拥有的最后一个复选框名为“N/A”，我想这样做，以便如果选中任何其他复选框，“N/A”复选框会自动消失。如果选中 N/A 复选框，其他复选框将消失。当然，如果我取消选中这些框，则会发生相反的情况。我知道我需要为不同的输入字段分配不同的 id，以便 javascript 可以识别它们，但我不确定如何编写 javascript 以使实际消失的动作发生。谢谢你。

编辑;; 一些动态的python代码：

```
print "<blockquote><strong>Labels:</strong><br/>"
for elem in output_list:
    if elem not in non_delete_list:
        print "<input type=\"checkbox\" name=\"remove_cd\" value=\"" + elem + "\" />" + elem + "<br/>"
print "<input type=\"checkbox\" name=\"remove_cd\" value=\"r_on\" />N/A:"
print_reason_list()
print "<font color=\"#cc0000\">Reason Required</font><hr/>" 
```

所以基本上，任何带有 value=elem 部分的东西都是动态的，最后的复选框是 N/A (value="r_on")。

编辑2：

因此，感谢@Ankit（使用 document....style.display=“none”），我能够让这些框消失。我遇到的问题是，一旦选中一个框，相应的 id 就会永久隐藏。为了解决这个问题，我做了一个隐藏和取消隐藏功能，我的 onclick 看起来像：

```
"onclick=if(this.checked){hide("NA")}else{unhide("NA")}" 
```

这使我可以取消选中这些框并导致相应的标签重新出现。但是，我遇到了一个新问题。使用 value elem 的复选框。如果我选中两个框，然后取消选中其中一个框，“NA”会再次出现。只要选中了一个“elem”框，我就希望它保持隐藏状态。基本上，我需要重新扫描所有复选框以查看它们的当前状态（我认为）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:53:57.007

您可以通过 javascript 启用/禁用 html 元素：

```
document.getElementById('<the id of your checkbox here>').disabled = true; 
```

对于您的情况，只需在动态复选框周围放置一个 div 标签，然后根据您的需要添加/删除该 div。

例子：-

```
print "<blockquote><strong>Labels:</strong><br/>"

for elem in output_list:
    if elem not in non_delete_list:
        print "<div id=\"listBox\" >"
        print "<input type=\"checkbox\" name=\"remove_cd\" value=\"" + elem + "\" onclick=\"if(this.checked){myFunction("upperChkBoxes")}\" />" + elem + "<br/>"
        print "</div>"
print "<input type=\"checkbox\" name=\"remove_cd\" value=\"r_on\"  onclick=\"if(this.checked){myFunction("NA")}\"  />N/A:"
print_reason_list()
print "<font color=\"#cc0000\">Reason Required</font><hr/>"

function myFunction(par){
// put your logic of add/remove here based on par value as "upperChkBoxes" or "NA"
} 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T15:59:30.540

您可以使用 css 属性显示或隐藏 html 元素 display none

让它消失

```
document.getElementById('<the id of your checkbox here>').style.display = "none"; 
```

或显示回来

```
document.getElementById('<the id of your checkbox here>').style.display = "block"; 
```

如果您使用的是 jquery，您可以轻松地使用它来完成相同的操作

```
$('#id of the checkbox').hide() or $('#id of the checkbox').show() 
```

# windows - windows ce 5.0 bat 复制权限

> ID：11296844
> 
> 赞同：0
> 
> 时间：2012-07-02T15:38:26.107
> 
> 标签：windows, batch-file, copy, cmd, windows-ce

我正在尝试创建一个 bat 文件来复制一个 dll 以粘贴到 Windows 文件夹中，该文件已经存在于 Windows 中，但我想打印自己的。

我的代码是：

```
DIR \Windows\shdoclc.dll
icacls \Windows\shdoclc.dll
ATTRIB -R -S -H \Windows\shdoclc.dll
COPY \Temp\shdoclc.dll \Windows\shdoclc.dll
pause 
```

我可以从 windows ce、everywan 或 activesync 手动复制/粘贴它，但是由于文件位置，命令终端不起作用，文件是隐藏/只读/和系统文件，属性命令不起作用.

并且每次涉及 \windows\shdolc.dll 时都会给我一个错误，但是如果我更改文件名或位置，则副本可以正常工作。

我认为这是命令提示符权限的问题，但不知道如何更改它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:52:07.133

出于某种原因，复制命令不允许您复制系统文件。属性命令不允许您更改系统文件属性，但移动命令允许您替换系统文件，所以我的代码最终是：

```
复制 \Application\shdoclc.dll \Temp\shdoclc.dll
移动 \Temp\shdoclc.dll \Windows\shdoclc.dll
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T17:39:46.000

Windows 将该文件作为[受保护的文件](http://support.microsoft.com/kb/Q222193)，因此只要更改它就会恢复它。
这是解决这个问题的秘籍*（不幸的是，我没有**ce**可以测试，只有 XP）*

```
COPY \Temp\shdoclc.dll %systemroot%\system32\dllcache
DEL %systemroot%\shdoclc.dll 
```

这会将您的版本复制到缓存中，当实际文件被删除时，Windows 会恢复它在 dllcache 中备份的版本。

# android - 方向更改时未加载可绘制景观

> ID：11296847
> 
> 赞同：0
> 
> 时间：2012-07-02T15:38:46.090
> 
> 标签：android

当我将方向从纵向更改为横向时，我想防止我的活动重新启动，所以我在清单上的相应活动上调用它：

```
android:configChanges="orientation|screenSize" 
```

我的活动不再重新启动，但不幸的是，我为横向活动所拥有的可绘制对象和布局没有加载。

当我删除上面的行时，可绘制对象和布局已正确加载，但随后活动重新启动。

有什么方法可以防止在景观资源仍然正确加载时重新启动活动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:46:47.927

最好的解决方案是在旋转发生之前保存状态，让系统正常重新加载您的活动，然后用之前保存的状态重新填充它。您可以覆盖 onSaveInstanceState(Bundle savedInstanceState) 方法。

但是如果你想自己管理方向变化，你可以阅读这个类似的问题：[How to refresh an Android RelativeLayout whenorientation changes without restarting Activity?](https://stackoverflow.com/questions/2987049/how-to-refresh-an-android-relativelayout-when-orientation-changes-without-restar?rq=1)

# sql - 使用 SQL 语句聚合行时遇到问题

> ID：11296852
> 
> 赞同：-1
> 
> 时间：2012-07-02T15:39:05.213
> 
> 标签：sql, pivot, case, sql-server-2012

我正在尝试从`Vendor`该表中的列中提取一些数据，为我的每个供应商创建新列。理想情况下，每个 1 行`ContractDate`，然后是 2 个值。但是，我最终得到了 2 行不同的`ContractDate`.

我相信我可能需要某种临时表查询来执行此操作……但我不确定。

```
SELECT [ContractDate], 
       CASE WHEN Vendor = 'AirDat' 
            THEN (sum(wf.Temppop) / sum(wf.Population)) END as 'AirDat',
       CASE WHEN Vendor = 'CWG' 
            THEN (sum(wf.Temppop) / sum(wf.Population)) END as 'CWG'
FROM [ECPDB].[dbo].[weather.forecast] as wf 
INNER JOIN ecpdb.[lookup].[newWeatherStation] as ws
ON wf.[Station_ID] = ws.[Station ID]
INNER JOIN ecpdb.[lookup].[CountyNew] as c
ON ws.[County FIPS] = c.[County FIPS]
WHERE tradedate = '7/2/2012'
AND [BENTEK Cell] = 'Northeast'
GROUP BY [ContractDate], vendor 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:46:24.110

您可以使用子查询来执行此操作；

```
Select ContractDate, 
     max(case when Vendor = 'AirDat' THEN Vendor_Average End) as AirDAT,  
     max(case when Vendor = 'CWG' THEN Vendor_Average End) as CWG
  from (
  SELECT [ContractDate] , Vendor, (sum(wf.Temppop) / sum(wf.Population)) as Vendor_Average
  FROM [ECPDB].[dbo].[weather.forecast] as wf 
  inner join ecpdb.[lookup].[newWeatherStation] as ws
     on wf.[Station_ID] = ws.[Station ID]
  inner join ecpdb.[lookup].[CountyNew] as c
     on ws.[County FIPS] = c.[County FIPS]
  where tradedate = '7/2/2012' and [BENTEK Cell] = 'Northeast' 
group by ContractDate, Vendor
) as Subquery
     group by Contractdate 
```

这样，查询就会运行并找到您需要的值，然后您无需分组即可选择所需的行。

# c++ - C/C++ 数学运算顺序

> ID：11296854
> 
> 赞同：5
> 
> 时间：2012-07-02T15:39:16.260
> 
> 标签：c++, c, math, operator-precedence

所以我知道 C++ 有一个运算符优先级，并且

```
int x = ++i + i++; 
```

是未定义的，因为 pre++ 和 post++ 处于同一级别，因此无法判断哪个将首先计算。但我想知道的是，如果

```
int i = 1/2/3; 
```

未定义。我问的原因是因为有多种方法可以查看 (1/2)/3 OR 1/(2/3)。我的猜测是这是一种未定义的行为，但我想确认一下。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-02T15:43:03.143

如果您查看 C++[运算符优先级和*关联性*](http://en.cppreference.com/w/cpp/language/operator_precedence)，您会看到除法运算符是从左到右关联的，这意味着这将被评估为`(1/2)/3`，因为：

> 同一单元格中的运算符（一个单元格中可能列出了几行运算符）在给定方向上以相同的优先级进行评估。例如，表达式 a=b=c 被解析为 a=(b=c)，而不是 (a=b)=c，因为从右到左的关联性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-02T16:40:25.077

在您的示例中，编译器可以自由地以它喜欢的任何顺序评估“1”“2”和“3”，然后从左到右应用除法。

i++ + i++ 示例也是如此。它可以以任何顺序评估 i++，这就是问题所在。

不是没有定义函数的优先级，而是它的参数的评估顺序是。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-02T15:43:50.697

第一个代码片段是未定义的行为，因为变量`i`在序列点之间被多次修改。

第二个代码片段是定义的行为，相当于：

```
int i = (1 / 2) / 3; 
```

as 运算符`/`具有从左到右的关联性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-02T15:45:11.587

它被定义，它从左到右：

```
#include <iostream>

using namespace std;

int main (int argc, char *argv[]) {
    int i = 16/2/2/2;
    cout<<i<<endl;
    return 0;
} 
```

打印“2”而不是 1 或 16。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T01:34:33.960

可能会说它是未定义的，因为您选择了一个 int，它是整数的集合。尝试包含分数的双精度或浮点数。

# php - PHP：从另一个函数调用一个函数（超出范围？）

> ID：11296856
> 
> 赞同：0
> 
> 时间：2012-07-02T15:39:21.007
> 
> 标签：php, oop, function, scope, nusoap

我在通过 nuSOAP 创建 Web 服务时遇到问题（尽管我相信我的问题与它无关）

我正在尝试做的事情：

```
function loadActiveItems() {
    $list = Item::loadActive();
    $ret = array();
    foreach ($list as $val){
        //two tests to check if i really have an object and if the toDTO method is callable
        echo var_dump($val);
        echo is_callable(array($val, 'toDTO'));
        array_push($ret, $val->toDTO());
    }
    unset($val);
    return $ret;
} 
```

我收到以下错误：

```
Call to a member function toDTO() on a non-object 
```

并且两者`var_dump($val)`都`is_callable`返回了我在网上看到的预期（分别是对象和真），看来我有一个超出范围的问题......但由于某种原因，我似乎没有理解它：P

提前致谢

编辑：好吧，只要检查一下，显然我也不理解 is_callable 因为我总是得到 1 作为结果... EDIT2：如果这有任何帮助，我正在使用 php-activerecord

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:51:58.780

`toDTO()`可能在您的课程中未定义`Item`。

另一个原因可能是该方法不是公共的，或者如@Grep 所说的那样是静态的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:02:55.203

此错误永远不会发生在定义该方法的对象上，但它是静态或受保护/私有的：

```
Call to a member function toDTO() on a non-object 
```

仅当`$val`不是对象时才会发生该错误。通常是 NULL、FALSE 或其他标量。

当对象为`db_fetch()`函数而来但在它之前的获取或查询失败时，通常为 FALSE。

当您有一个可能包含 NULL 的数组时，它通常是 NULL。

`var_dump($list)` 看看里面有什么，是否有空值。还将您的 foreach 更改为具有 $key 并`var_dump($key)`查看在发出错误之前最后转储了哪个密钥。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T11:33:52.633

好的，所以我发现了问题...感谢所有帮助！我在 toDTO 中调用另一个对象的 toDTO ...问题是该对象可能为空！所以一个简单的 if(object==null) 解决了这个问题！

再次感谢！

# javascript - 滚动条在 jquery 选项卡中不可见

> ID：11296864
> 
> 赞同：1
> 
> 时间：2012-07-02T15:39:32.720
> 
> 标签：javascript, jquery-ui, scrollbar, jquery-ui-tabs

首先，我知道这个问题可能被问了好几次，但每个人的布局都不一样！

我有一个地图应用程序和一个左侧工具栏。这个工具栏有 jquery 选项卡。我无法在这些选项卡上获得滚动条。即使在超载之后`.ui-tabs-panel`。我知道只需在`height:somepx`此处添加一个滚动条即可，但这不是我想要的。我希望高度一直一直到下降。我已经尝试了几件事，但没有任何效果:(

我怀疑这是因为我的其他布局属性可以保持布局流畅（使地图调整到屏幕尺寸并保持左侧栏不变）。

这是 Jsbin 中的精简版本：

[http://jsbin.com/exeguw/edit#source](http://jsbin.com/exeguw/edit#source)

有人可以帮我获得垂直滚动条吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:57:33.157

如果在创建选项卡后将选项卡 div 设置为 #map div 的高度（针对选项卡标题进行了调整），则溢出将启动并使内容可滚动：

javascript:

```
function ResizeTabs() { 
   $("div.scroll-tab").height($("#map").height() - 80);
}

$(function() {
   $(window).resize(ResizeTabs);
   $('#tabs').tabs({
     create: ResizeTabs
   });
}); 
```

更新[了 jsBin](http://jsbin.com/exeguw/15/edit)。

编辑：现在也处理窗口大小调整！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T07:23:14.043

试试这个 [http://jsbin.com/exeguw/9/edit#javascript,html,live](http://jsbin.com/exeguw/9/edit#javascript,html,live)

# c# - 在 Page_Init 方法中为用户控件注册点击事件

> ID：11296871
> 
> 赞同：0
> 
> 时间：2012-07-02T15:40:01.250
> 
> 标签：c#, asp.net, events

我的动态添加的用户控件有点麻烦。

用户控件只是一个简单的文本框、复选框和按钮。它们在 Page_Init 方法中被添加到页面中，但是按钮 Click 事件没有触发，我假设我需要单独订阅它。

这个对吗？如果是这样，我该怎么做？

我当前的 Page_Init 方法如下。提前致谢！

```
protected void Page_Init(object sender, EventArgs e)
    {
        PropertyList = new List<Control>();
        PropertyList = Session["propertyList"] as List<Control>;
        if (PropertyList != null)
        {
            foreach (AddProperty prop in PropertyList)
            {
                this.propPlaceholder.Controls.Add(prop);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:10:19.033

您需要使用控件注册点击事件

# php - cURL 与 AWS Ec2 终端

> ID：11296876
> 
> 赞同：0
> 
> 时间：2012-07-02T15:40:26.423
> 
> 标签：php, curl, amazon-web-services

因此，我刚刚从一些托管运行一些返回 JSON 的 php 文件的网络解决方案切换。当我对新服务器运行相同的 curl 终端命令时，它不会像以前那样响应 php 错误。我需要做什么才能启用它，以便它使用 curl 在终端中返回错误？

**更新**它似乎返回了 HTTP 错误 500。我怎样才能显示错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:58:18.530

我想通了，我编辑`/etc/php.ini`为`display_errors = On;`

# javascript - Http 内容导致 Https 内容错误

> ID：11296880
> 
> 赞同：1
> 
> 时间：2012-07-02T15:40:59.953
> 
> 标签：javascript, http, https

我有一个 Https 页面，我正在使用 Google ATOM API 提取一些 rss 提要。我收到有关不安全数据的错误。有没有办法在不导致错误的情况下获取 rss 提要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:43:30.833

您报告的问题是由于混合了安全上下文。避免此消息的唯一方法是确保两个来源都是安全的`https://`或公正`http://`的。

# php - 如何将数据从填充的下拉 php 数据库发布到另一个脚本？

> ID：11296892
> 
> 赞同：0
> 
> 时间：2012-07-02T15:41:37.507
> 
> 标签：php, mysql, forms, post, drop-down-menu

我创建了一个从 MySql 数据库填充的 PHP Drop Down 并且工作得很好，当我想在另一个脚本中发布所选内容时会出现问题。问题是如何将数据发布到其他脚本？这是实现下拉菜单的脚本的源代码。请帮忙！！！！

```
<?php
$conn = mysql_connect("localhost", "admin", "admin");

if (!$conn) {
    echo "Unable to connect to DB: " . mysql_error();
    exit;
}

if (!mysql_select_db("ekupuvac")) {
    echo "Unable to select EKupuvac: " . mysql_error();
    exit;
}

$query = "SELECT ImeK, KupuvacID FROM kupuvac ORDER BY Saldo DESC";
$result = mysql_query($query) or die(mysql_error());

if (!$result) {
    echo "Could not successfully run query ($query) from DB: " . mysql_error();
    exit;
}

if (mysql_num_rows($result) == 0) {
    echo "No rows found, nothing to print so I am exiting";
    exit;
}

$dropdown = "<select name='ImeK'>";
while($row = mysql_fetch_assoc($result)) {
$dropdown.= "\r\n<option value='{$row['KupuvacID']}'>{$row['ImeK']}</option>";
}
$dropdown .= "\r\n</select>";

echo"Izberi Kupuvac:";
echo $dropdown;

// Second Combo

$conn = mysql_connect("localhost", "admin", "admin");

if (!$conn) {
    echo "Unable to connect to DB: " . mysql_error();
    exit;
}

if (!mysql_select_db("ekupuvac")) {
    echo "Unable to select EKupuvac: " . mysql_error();
    exit;
}

$query2 = "SELECT ImeP, ProzivodID FROM proizvod ORDER BY ImeP";
$result2 = mysql_query($query2) or die(mysql_error());

if (!$result2) {
    echo "Could not successfully run query ($query2) from DB: " . mysql_error();
    exit;
}

if (mysql_num_rows($result2) == 0) {
    echo "No rows found, nothing to print so I am exiting";
    exit;
}

$dropdown2 = "<select name='ImeP'>";
while($row = mysql_fetch_assoc($result2)) {
$dropdown2.= "\r\n<option value='{$row['ProzivodID']}'>{$row['ImeP']}</option>";
}
$dropdown2.= "\r\n</select>";

echo"<br> Izberi Proizvod:";
echo $dropdown2;
echo"<br>";

mysql_free_result($result);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:54:18.590

一个`<select>`盒子是不够的，你需要把它附在一个表格里

```
?>
<form method="post" action="somescript.php">
<?
//your controls go here
?>
</form> 
```

然后创建 somescript.php 并使用访问您的表单变量`$_POST`

也使用[PDO](http://php.net/manual/en/book.pdo.php)而不是 mysql_ 函数，因为这些不是安全的

# c# - 每隔几秒重复一个功能

> ID：11296897
> 
> 赞同：56
> 
> 时间：2012-07-02T15:41:52.810
> 
> 标签：c#, .net, loops

我想从程序打开的那一刻起重复一个功能，直到它每隔几秒钟关闭一次。在 C# 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-07-02T15:43:35.510

使用计时器。有 3 种基本类型，每种都适用于不同的目的。

*   [System.Windows.Forms.Timer](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)

仅在 Windows 窗体应用程序中使用。此计时器作为消息循环的一部分进行处理，因此可以在高负载下冻结计时器。

*   [System.Timers.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)

当你需要同步时，使用这个。这意味着滴答事件将在启动计时器的线程上运行，让您可以毫不费力地执行 GUI 操作。

*   [System.Threading.Timer](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)

这是最强大的计时器，它在后台线程上触发滴答声。这使您可以在后台执行操作而无需冻结 GUI 或主线程。

对于大多数情况，我推荐 System.Timers.Timer。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-07-02T16:15:40.313

为此，`System.Timers.Timer`效果最好

```
// Create a timer
myTimer = new System.Timers.Timer();
// Tell the timer what to do when it elapses
myTimer.Elapsed += new ElapsedEventHandler(myEvent);
// Set it to go off every five seconds
myTimer.Interval = 5000;
// And start it        
myTimer.Enabled = true;

// Implement a call with the right signature for events going off
private void myEvent(object source, ElapsedEventArgs e) { } 
```

有关详细信息，请参阅[计时器类（.NET 4.6 和 4.5）](http://msdn.microsoft.com/en-us/library/0tcs6ww8)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-02T15:43:15.820

使用[计时器](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)。请记住，.NET 带有许多不同的计时器。[本文](https://web.archive.org/web/20150329101415/https://msdn.microsoft.com/en-us/magazine/cc164015.aspx)介绍了这些差异。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-12-04T14:46:27.880

.NET BCL 中有很多不同的计时器：

*   [System.Timers.Timer](https://docs.microsoft.com/en-us/dotnet/api/system.timers.timer?view=net-5.0)
*   [System.Threading.Timer](https://docs.microsoft.com/en-us/dotnet/api/system.threading.timer?view=net-5.0)
*   [System.Windows.Forms.Timer](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.timer?view=net-5.0)
*   [System.Web.UI.Timer](https://docs.microsoft.com/en-us/dotnet/api/system.web.ui.timer?view=net-5.0)
*   [System.Windows.Threading.DispatcherTimer](https://docs.microsoft.com/en-us/dotnet/api/system.windows.threading.dispatchertimer?view=net-5.0)

什么时候用哪个？

*   `System.Timers.Timer`，它触发一个事件并定期在一个或多个事件接收器中执行代码。该类旨在用作多线程环境中的基于服务器或服务组件；它没有用户界面，在运行时不可见。
*   `System.Threading.Timer`，它定期在线程池线程上执行单个回调方法。回调方法是在定时器实例化时定义的，不能更改。与 System.Timers.Timer 类一样，此类旨在用作多线程环境中的基于服务器或服务组件；它没有用户界面，在运行时不可见。
*   `System.Windows.Forms.Timer`（仅限 .NET Framework），一种 Windows 窗体组件，它触发一个事件并定期在一个或多个事件接收器中执行代码。该组件没有用户界面，设计用于单线程环境；它在 UI 线程上执行。
*   `System.Web.UI.Timer`（仅限 .NET Framework），一个 ASP.NET 组件，它定期执行异步或同步网页回发。
*   `System.Windows.Threading.DispatcherTimer`，一个集成到 Dispatcher 队列中的计时器。该计时器以指定的时间间隔以指定的优先级进行处理。

[来源](https://docs.microsoft.com/en-us/dotnet/api/system.threading.timer?view=net-5.0#remarks)

* * *

其中一些需要显式`Start`调用才能开始计时（例如`System.Timers`, `System.Windows.Forms`）。并明确`Stop`完成滴答。

```
using TimersTimer = System.Timers.Timer;

static void Main(string[] args)
{
    var timer = new TimersTimer(1000);
    timer.Elapsed += (s, e) => Console.WriteLine("Beep");
    Thread.Sleep(1000); //1 second delay
    timer.Start();
    Console.ReadLine();
    timer.Stop();

} 
```

另一方面，有一些计时器（例如：）`System.Threading`，您不需要显式`Start`和`Stop`调用。（提供的委托将运行一个后台线程。）您的计时器将计时，直到您或运行时处理它。

因此，以下两个版本将以相同的方式工作：

```
using ThreadingTimer = System.Threading.Timer;

static void Main(string[] args)
{
    var timer = new ThreadingTimer(_ => Console.WriteLine("Beep"), null, TimeSpan.FromSeconds(1), TimeSpan.FromSeconds(1));
    Console.ReadLine();
} 
```

```
using ThreadingTimer = System.Threading.Timer;
static void Main(string[] args)
{
    StartTimer();
    Console.ReadLine();
}

static void StartTimer()
{
    var timer = new ThreadingTimer(_ => Console.WriteLine("Beep"), null, TimeSpan.FromSeconds(1), TimeSpan.FromSeconds(1));
} 
```

但是，如果您`timer`处置，那么它显然会停止滴答作响。

```
using ThreadingTimer = System.Threading.Timer; 

static void Main(string[] args)
{
    StartTimer();
    GC.Collect(0);
    Console.ReadLine();
}

static void StartTimer()
{
    var timer = new ThreadingTimer(_ => Console.WriteLine("Beep"), null, TimeSpan.FromSeconds(1), TimeSpan.FromSeconds(1));
} 
```

# iphone - 如何在运行时从 UITableView 中删除单元格？

> ID：11296899
> 
> 赞同：1
> 
> 时间：2012-07-02T15:42:14.760
> 
> 标签：iphone, uitableview

我想从 UITableView 中删除特定单元格

我发现`deleteRowsAtIndexPaths:withRowAnimation:`

我试图将 cell.frame 更改为`0,0,0,0`

我试过`.hidden = YES`了

没有什么对我有用。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:48:56.410

尝试添加开始和结束调用进行编辑：

```
[tableView beginUpdates];
[tableView deleteRowsAtIndexPaths:deletePaths withRowAnimation:UITableViewRowAnimationFade];
[tableView endUpdates]; 
```

或者，如果您正在使用基础数据源，请从数据源中删除对象并调用`[tableView reloadData];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:46:56.917

使用此方法从表格视图中删除单元格，并手动从数组中删除相同的对象，通过这些对象在表格视图中显示数据。

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {

   if (editingStyle == UITableViewCellEditingStyleDelete) {
// Delete the row from the data source

        [yourArray removeObjectAtIndex:indexPath.row];
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:YES];

       } 
       [tableView reloadData];
} 
```

希望对你有帮助..

# c++ - openTK 迁移到 Windows 7 错误的图形

> ID：11296901
> 
> 赞同：-2
> 
> 时间：2012-07-02T15:42:15.983
> 
> 标签：c++, opengl, windows-7, opentk

我不是 100% 确定问题是否出在 openTK 上，但这是最有可能的事情。

我在一台装有 Windows XP (x32)、带有 Windows fomrs 和 OpenTK 和 OpenGL 的 MVS 08 的计算机上做了一个项目，一切都运行良好。但对于其他问题，我需要格式化计算机并安装 Windows 7 (x32)。在安装了开发项目所需的所有库后，我运行它并且计算机无法打开 OpenTK。编译中有 1000 个警告。在不同目录中安装和卸载 OpenTK 之后，我终于设法使其工作，但是在执行应用程序时，图形部分无法正常工作。

我有 3 个 OpenGLController，我画了一些不同的图，所以它们并不总是工作，它们并不总是完全绘制，有时它只是崩溃！我已经更新了我的驱动程序，寻找更新版本的所有内容，但没有任何变化。

自 XP 以来，编译器警告是相同的（我有一些警告，但与项目的图形部分无关）

有时当崩溃时我有以下异常：'System.AccessViolationException（请注意，它并不总是崩溃也不总是给出异常）

有 3 个 GL 控制器，只有一个正常工作。什么时候画另一个不起作用或者它只是坏了

似乎一次只能正确绘制 1 个 GLcontroller

这是 Windows 7 中的 openTK 发生的事情。这个问题在 Windows 7 中激活 Aero 主题时很常见，但我将其禁用并且问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:37:26.943

碰巧 OpenTK 和 Windows 7 存在几个问题。通常只是禁用 aero 主题来解决问题，但在我的情况下，需要的不仅仅是这些。我将计算机的 GPU 从 intel Q33 更改为 nvidia Gforce 430（更好的一个），现在它运行良好（甚至比以前更好）。

如果有人遇到问题，请不要忘记检查 GPU 的最新驱动程序，有时它只是更新。

# linq - EF 查询以选择可用的关联实体

> ID：11296903
> 
> 赞同：0
> 
> 时间：2012-07-02T15:42:24.360
> 
> 标签：linq, entity-framework, tsql, entity-framework-4, linq-to-entities

如果我知道要搜索什么，我相信我可以用谷歌搜索，如果这有意义的话。我正在尝试掌握实体框架，并考虑如何在其中实现一些真实场景。

想象一个简单的数据模型，其中包含一个 Person 实体、一个 Color 实体和一个名为 ColorsLiked 的关联。

我想使用 Color 有点像枚举；只会定义 3 个（红色、绿色、蓝色）。

我想要一个下拉菜单，允许用户将颜色添加到他们喜欢的颜色列表中——这很容易。但是，我可以使用什么查询来仅选择该人不喜欢的颜色？也就是说，当他们选择一种颜色时，它不再可供在列表中选择。

在 SQL 中，它是一个带有左外连接的简单查询。但我不明白如何在 EF 中做这样的事情。

任何指导将不胜感激

滑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:44:43.593

假设您想要该人尚未喜欢的所有颜色，这是执行此操作的 LINQ 表达式。

```
var unlikedColors = allColors.Except(person.ColorsLiked); 
```

# sql - 在 switch case 语句中使用 DatePart

> ID：11296904
> 
> 赞同：0
> 
> 时间：2012-07-02T15:42:26.960
> 
> 标签：sql, switch-statement, datepart

我是 SQL 的初学者，我创建了一个存储过程，目标是采用指定的时间范围和间隔，并返回按间隔分组的该时间范围内的数据。例如，两周时间范围和 2 天间隔的输入将给出 7 个性能数据点。

为了进行分组，我使用间隔单元和日期部分的开关盒来提取它进行分组。但是，我的程序不会编译。这是我的代码：

```
declare @interval int
declare @unit varchar(6)

set @interval=1
set @unit='year'

select
    case @unit
        when 'year' then datepart(year, CreateDate)/@interval*@interval
        when 'month' then datepart(month, CreateDate)/@interval*@interval
        when 'week' then datepart(week, CreateDate)/@interval*@interval
        when 'day' then datepart(day, CreateDate)/@interval*@interval
        when 'hour' then datepart(hour, CreateDate)/@interval*@interval
        when 'minute' then datepart(minute, CreateDate)/@interval*@interval
        when 'second' then datepart(second, CreateDate)/@interval*@interval
    end
from OrderInfoCustom
group by
    case @unit
        when 'year' then datepart(year, CreateDate)/@interval
        when 'month' then datepart(month, CreateDate)/@interval
        when 'week' then datepart(week, CreateDate)/@interval
        when 'day' then datepart(day, CreateDate)/@interval
        when 'hour' then datepart(hour, CreateDate)/@interval
        when 'minute' then datepart(minute, CreateDate)/@interval
        when 'second' then datepart(second, CreateDate)/@interval
    end 
```

这拒绝编译，给出这个错误（多次）：

> 消息 8120，级别 16，状态 1，第 7 行列“OrderInfoCustom.CreateDate”在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中。

似乎编译器不承认 CreateDate 是聚合函数的一部分，因为它在 switch-case 中？我不确定。

编辑：我应该包括我在 Microsoft SQL Server 2005 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:51:51.230

是的，您正在按表达式分组，因此您不能在选择中使用该表达式的一部分。

如果您使用完全相同的表达式，它应该可以工作：

```
select
  case @unit
    when 'year' then datepart(year, CreateDate)/@interval
    when 'month' then datepart(month, CreateDate)/@interval
    when 'week' then datepart(week, CreateDate)/@interval
    when 'day' then datepart(day, CreateDate)/@interval
    when 'hour' then datepart(hour, CreateDate)/@interval
    when 'minute' then datepart(minute, CreateDate)/@interval
    when 'second' then datepart(second, CreateDate)/@interval
  end * @interval
from OrderInfoCustom
group by
  case @unit
    when 'year' then datepart(year, CreateDate)/@interval
    when 'month' then datepart(month, CreateDate)/@interval
    when 'week' then datepart(week, CreateDate)/@interval
    when 'day' then datepart(day, CreateDate)/@interval
    when 'hour' then datepart(hour, CreateDate)/@interval
    when 'minute' then datepart(minute, CreateDate)/@interval
    when 'second' then datepart(second, CreateDate)/@interval
  end 
```

您还可以使用子查询：

```
select y * @interval
from (
  select
    case @unit
      when 'year' then datepart(year, CreateDate)/@interval
      when 'month' then datepart(month, CreateDate)/@interval
      when 'week' then datepart(week, CreateDate)/@interval
      when 'day' then datepart(day, CreateDate)/@interval
      when 'hour' then datepart(hour, CreateDate)/@interval
      when 'minute' then datepart(minute, CreateDate)/@interval
      when 'second' then datepart(second, CreateDate)/@interval
    end as y
  from OrderInfoCustom
) x
group by y 
```

# jsf - jsf - primefaces - 将参数传递给 primefaces 自动完成

> ID：11296906
> 
> 赞同：0
> 
> 时间：2012-07-02T15:42:32.753
> 
> 标签：jsf, jsf-2, primefaces

我试图遵循[f:param 或 f:attribute 对 primefaces 自动完成的支持中的解决方案？](https://stackoverflow.com/questions/6567002/fparam-or-fattribute-support-on-primefaces-autocomplete)将参数传递给 primefaces 3.3.1 自动完成组件但没有成功。如果我在 UIComponent.getCurrentComponent().getAttributes 返回的 Map 中进行迭代，它不包含我在 .xhtml 文件中设置的属性名称，因此当我尝试获取该属性时会得到一个空指针。在上述解决方案之后，primefaces 的实现是否有任何变化？

我将 Eclipse Indigo 与 Glassfish 3.1.2 和 Mojarra 2.0.9 一起使用。

我的部分代码

html:

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:pe="http://primefaces.org/ui/extensions"
    template="WEB-INF/template.xhtml">

...

<p:autoComplete 
   id="sourceSubMemberLookup" value="#{transactionTransferBacking.sourceSubMember}"
   size="64"
   completeMethod="#{transactionTransferBacking.completeSourceOpSubMember}"
   var="smb" itemLabel="#{smb.displayText}" itemValue="#{smb}"
   converter="opSubMemberConverter"
   forceSelection="true" dropdown="true"
   required="true" rendered="#{loggedInUser.subMemberType eq 1}" >
       <f:attribute name="attrSourceMemberId" value="#{transactionTransferBacking.sourceMember.Id">
</p:autoComplete>

...

</ui:composition> 
```

爪哇：

```
package com.mysoft.backing;

import java.io.Serializable;
import javax.faces.context.FacesContext;
import javax.faces.context.Flash;
import javax.servlet.http.HttpServletRequest;
import javax.enterprise.context.RequestScoped;

@Named
@ManagedBean
@RequestScoped
public class TransactionTransferBacking implements Serializable {

...

public List<OpSubMember> completeSourceOpSubMember(String query) {
    List<OpSubMember> members=null;

    //Retrieve list of submembers based on partial user input (autocomplete)
    //Based on loggedInUser own member's memberId

    FacesContext context = FacesContext.getCurrentInstance();

    if (context==null) this.getLogger().debug("completeSourceOpSubMeber: faces is null");

    UIComponent current = UIComponent.getCurrentComponent(context);

    this.getLogger().debug("completeSourceOpSubMember: currentComponent="+current.getId());

    //Map<Object, Object> attrMap = context.getAttributes();
    Map<String, Object> attrMap = current.getAttributes();

    for (Map.Entry entry : attrMap.entrySet()) {
        this.getLogger().debug("completeSourceOpSubMember: attrMap.Key="+entry.getKey());
    }

    int memberId = (int) attrMap.get("attrSourceMemberId");

    this.getLogger().debug("completeSourceOpSubMember: MemberId from attribute = "+memberId);

            ...

    return members;
}
} 
```

日志正确地将当前组件名称打印为所需的 AutoComplete，但问题是“attrSourceMemberId”不在“attrMap”映射中，如日志中打印的那样。

感谢你们。

# java - 关闭 Spring Source Tool Suite 后无法停止服务器

> ID：11296908
> 
> 赞同：0
> 
> 时间：2012-07-02T15:42:43.527
> 
> 标签：java, spring, sts-springsourcetoolsuite

我在 vmware vfabric tc server developer edition 仍在运行时关闭了 STS，现在我无法从 STS 停止服务器。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:11:07.870

只需转到服务器安装目录并停止服务器（可能应该是shutdown.sh）..然后尝试从sts工具重新启动它应该可以正常工作..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:32:10.200

尝试删除并再次添加服务器，它可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-05T10:07:30.087

这个解决方案对我有用：

```
sudo lsof -i tcp:8080
kill -15 PID 
```

其中 pid 是您使用第一个命令获得的进程的 pid。

[https://stackoverflow.com/a/49542432/3793165](https://stackoverflow.com/a/49542432/3793165)

# ruby-on-rails - 在 Rails 中，如何仅在创建模型时使用 validates_inclusion_of，而不是每次更新时使用？

> ID：11296911
> 
> 赞同：1
> 
> 时间：2012-07-02T15:42:46.367
> 
> 标签：ruby-on-rails

我有一个名为 Account 的对象，并且每个帐户都有一个活动来源。目前，如果帐户已更新，并且没有活动来源，则必须更新活动来源（其可能的值在选择列表中）。

我知道 validates_presence_of 有一个 :on 选项，它允许您指定 :create、:update 或 :save，但很遗憾，validates_inclusion_of 没有这个选项。我怎样才能解决这个问题？谢谢。

这是我的代码：

```
class Account < ActiveRecord::Base
  validates_inclusion_of :campaign_source, :in => CampaignSource.list, :message => "^Please let us know how you heard about us" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T15:58:58.580

尝试

```
validates :campaign_source, :inclusion => { :in => CampaignSource.list },
                            :message => "^Please let us know how you heard about us",
                            :on => :create 
```

# c# - Vector3非浮点数？

> ID：11296914
> 
> 赞同：1
> 
> 时间：2012-07-02T15:42:50.907
> 
> 标签：c#, vector, struct

出于性能原因，是否可以将 C# 的内置 Vector3 结构更改为不使用浮点 Singles 而使用整数或字节？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T15:44:07.447

您需要`Vector3`根据整数或字节操作创建自己的结构。这是完全可能的，因为没有单一的“内置” `Vector3`（框架中有多种 3D 矢量实现）。

但是，如果您计划在框架 API 调用中使用它，则需要转换为框架版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T15:45:28.313

您可以制作自己的 Vector3，或使用[Tuple](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)。

但是，如果您调用期望 a 的东西`Vector3`，他们将*不会*期望您的类型。`Vector3`在这种情况下，您必须使用标准。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T15:54:44.473

正如已经指出的那样，您不能更改任何现有类型（包括 Vector3d）以对其成员使用不同的类型（除非它是通用的并且旨在这样做）。您需要创建自己的（确保了解创建时间`class`和创建时间之间的差异`struct`）。

如果您需要考虑性能，您需要尝试并仔细衡量您的特定情况——目前还不清楚这种变化是否会带来显着的节省。

将 float 更改为 int 不会为您节省空间并且可能会使计算复杂化（即 1.5*1.5 在 float 中很容易，而如果您使用缩放的 int 则需要额外的操作 15*15/100，并且用于旋转的 sin/cos 可能也不太好用）。

将 float 更改为 byte 将为您节省空间，但数学将更加复杂，并且总是强制转换为 int 以进行所有操作。

# php - PHP将mysql中的日期与sendmail进行比较

> ID：11296915
> 
> 赞同：0
> 
> 时间：2012-07-02T15:43:02.840
> 
> 标签：php, sendmail

我对 php 和 mysql 还很陌生，但是我创建了一个小站点，用户可以登录并创建要在某些日子发送到指定电子邮件的任务

日期存储在数据库中，如星期一，星期三等。

该脚本将在手动执行脚本时将信息发送到数据库中的所有电子邮件。

使用 cron 作业，我将安排脚本每天运行两次，以将每个用户的数据发送到他们的电子邮件。

但我不知道如何告诉脚本将用户在数据库中指定的日期与当天进行比较，以查看是否需要将电子邮件发送到当天的用户电子邮件

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:56:44.083

将用户输入的日期映射为整数...

然后使用这样的查询...

从`mailinglist`where `daytosend`= dayofweek(now())中选择

仅供参考.. dayofweek() 返回一个 1-7 的整数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:02:06.770

正如 ChrisG 所说，我还建议使用整数来映射日期。

但是您也可以将 date() 函数与字符串“D”一起使用。 [http://se2.php.net/manual/en/function.date.php](http://se2.php.net/manual/en/function.date.php)

然后将当前日期与用户在数据库中的任何内容进行比较。

# node.js - 如何在 node.js 中捕获异常？

> ID：11296920
> 
> 赞同：0
> 
> 时间：2012-07-02T15:43:16.367
> 
> 标签：node.js

我有一个简单的脚本和只读数据库redis。

```
var redis = require('redis'),
client = redis.createClient(), multi

client.on('error', function(error) {
    console.log('error')
})

tasks = []
tasks.push(['set', 'a', 1 ])
tasks.push(['set', 'b', 1 ])

client.multi(this.tasks).exec(function (err, replies) {
   console.log(err)
   tasks = []
   tasks.push(['set', 'a', 1 ])
   client.multi(tasks).exec(function (err, replies) {
   console.log(err)
   })
}) 
```

此脚本的结果：

```
null
null

/usr/local/lstat/lstat/node_modules/redis/index.js:468
                throw callback_err;
                  ^
Error: Error: Error: READONLY You can't write against a read only slave. 
```

如何捕捉这个异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T09:07:51.013

node.js 使用的语言称为 Javascript，在 Javascript 中捕获异常几乎就是您所期望的：[如何在 javascript 中捕获异常？](https://stackoverflow.com/questions/545181/how-to-catch-exceptions-in-javascript)

# wso2 - 从 ESB 发送自定义响应

> ID：11296928
> 
> 赞同：0
> 
> 时间：2012-07-02T15:43:53.057
> 
> 标签：wso2, wso2esb

我在 inSequence 的自定义中介中有一个字符串。我希望这个字符串成为 esb 的最终响应。我想将此字符串作为响应发送回客户端。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:29:43.523

在自定义中介中添加任何字符串后，您可以使用以下配置将当前有效负载发送回客户端。

```
 <header name="To" action="remove"/>
 <property name="RESPONSE" value="true"/>
 <send/> 
```

# asp.net - 应用程序池回收后偶尔丢失 web.config 设置

> ID：11296933
> 
> 赞同：1
> 
> 时间：2012-07-02T15:44:05.410
> 
> 标签：asp.net, web-services, iis-7, web-config

我们在 IIS7 上有一个 asp.net 应用程序，其服务目录包含以下内容`web.config`：

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <webServices>
      <protocols>
        <add name="HttpGet" />
        <add name="HttpPost" />
      </protocols>
    </webServices>
  </system.web>
</configuration> 
```

这允许该目录中的 Web 服务正常运行。每天晚上，我们都会回收所有网络服务器上的应用程序池。有时（过去 10 天内 3 次）当应用程序池完成回收并且对该网络服务器上该目录中的网络服务的调用失败时，网络服务器会丢失此配置。回收应用程序池可解决此问题。

有没有人见过这种行为？我意识到一种可能的解决方案是停止回收池，但我想找出根本问题。提前致谢...

# c# - 如何在下面的查询中传递变量

> ID：11296938
> 
> 赞同：0
> 
> 时间：2012-07-02T15:44:19.580
> 
> 标签：c#, linq

我有 linq 请求。我需要`item.Title`选择。这是怎么做的？

```
var list = (from item in answer.SubItems.OfType<TItemView>()
            where item.SubItems != null
            from ty in item.SubItems
            select ty as TDealRequestView
                into request
                select new
                {
                    itemTitle = item.Title,//item not visible 
                    Title = request.Title,

                }).ToList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:48:48.450

你可以使用关键字：让

```
in order to initialize your value request.Title

let request = your treatment... (request is local variable of your query) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T15:49:27.693

现在无法检查，但请尝试：

```
String title;

var list = (from item in answer.SubItems.OfType<TItemView>()
        where item.SubItems != null
        let title=item.title 
        ...

        //now use title 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T15:49:36.500

代替：

```
select ty as TDealRequestView
            into request 
```

和：

```
let request = ty as TDealRequestView 
```

# vb.net - （通过 VB.NET 从已关闭的 excel 工作表中访问名称。）这有什么问题？

> ID：11296939
> 
> 赞同：0
> 
> 时间：2012-07-02T15:44:31.557
> 
> 标签：vb.net, excel

a) 我使用 excel 2007 中的名称管理器功能为 A3 到 G3 范围分配了一个名称“abc”

b) 我想从 VB.NET 访问此名称以在循环中分配值

这该怎么做？我是 VB.NET 的新手

Excel 工作簿将无法打开

我使用通常的 VBA 之类的代码进行了尝试。

```
For i = 1 To k

costs("abc").RefersToRange.Cells(3, i).value = "Cost" & i 
```

错误：

1) 'Microsoft.Office.Interop.Excel.Names' 不能被索引，因为它没有默认属性。

2) 循环控制变量不能是属性或后期绑定索引数组。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:56:56.600

如果您使用 Excel 2007 或更高版本，则无需使用[OpenXML SDK](http://www.microsoft.com/en-us/download/details.aspx?id=5124)打开 Excel 即可创建和编辑 Excel 工作簿。SDK 不使用 Interop 访问 Excel，而是针对“原始”Excel 文件工作。我没有专门使用命名范围，但是有一个使用它们的[示例，应该可以帮助您入门。](http://msdn.microsoft.com/en-us/library/hh298533)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T20:27:45.123

您可以按如下方式访问该范围。这会从excel 文件的第一个工作表中`abc`定义的命名范围中查找所有值：`A3:G3`

```
 'initialise the objects and open the file
    Dim xlApp As New Excel.Application
    Dim xlWorkBook As Excel.Workbook = xlApp.Workbooks.Open("C:\foo\book1.xlsx")
    Dim xlSheet As Excel.Worksheet = xlWorkBook.Worksheets(1)

    For i As Integer = 1 To 7
        xlSheet.Range("abc").Cells(1, i).value = "Cost" & i.ToString
    Next

    'save file
    xlWorkBook.Save()
    'close objects and clean up
    xlWorkBook.Close()
    xlApp.Quit()
    xlSheet = Nothing
    xlWorkBook = Nothing
    xlApp = Nothing 
```

# javascript - 如何在 Linux/Mac 的 Firefox 扩展中获取当前布局语言？

> ID：11296942
> 
> 赞同：0
> 
> 时间：2012-07-02T15:44:56.777
> 
> 标签：javascript, firefox-addon, xpcom

这可以通过 Windows 上的 user32.dll 来完成。但是我怎样才能在 Mac/Linux 上获得它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T15:57:26.407

您应该为此使用[nsILocaleService.getSystemLocale()](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsILocaleService#getSystemLocale%28%29)：

```
var localeService = Components.classes["@mozilla.org/intl/nslocaleservice;1"]
                        .getService(Components.interfaces.nsILocaleService);
var sysLocale = localeService.getSystemLocale()
alert(sysLocale.getCategory("NSILOCALE_MESSAGES")); 
```

无论操作系统如何，这都应该有效。

# ember.js - 对自创视图的操作

> ID：11296944
> 
> 赞同：0
> 
> 时间：2012-07-02T15:44:59.630
> 
> 标签：ember.js

如果我有一个带有操作的按钮的简单模板，并使用此模板创建一个灰烬视图，我怎样才能让操作针对视图上的功能。

示例：http: [//jsfiddle.net/Krutius/DxsXz/](http://jsfiddle.net/Krutius/DxsXz/)

**车把/HTML**：

```
<div id="content">
    <div id="main"></div>
</div>

<script type="text/x-handlebars" data-template-name="test">
    <button class="btn btn-primary" {{action go}}>Suchen</button>
</script>​ 
```

**JavaScript**：

```
$(function() {
    App = Em.Application.create({
        rootElement: "#content"
    });

    Em.View.create({
        templateName: 'test',
        go: function() {
            alert: "go";
        }
    }).append("#main");
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:23:29.280

问题是您的`append`电话：`Ember.View#append`不接受任何参数，请参阅[代码](https://github.com/emberjs/ember.js/blob/541d085ae039a190d24213d1476de53029355bf9/packages/ember-views/lib/views/view.js#L1191-1204)。

我不知道最终的应用程序/html 应该是什么样子，所以有几个答案可以解决你的问题。最简单的方法是将按钮内联到应用程序的模板中，请参阅[http://jsfiddle.net/pangratz666/vY9PE/](http://jsfiddle.net/pangratz666/vY9PE/)：

**车把**：

```
<script type="text/x-handlebars" data-template-name="test">
    <div id="content">
        <div id="main">
            <button class="btn btn-primary" {{action go}}>Suchen</button>
        </div>
    </div>
</script>​ 
```

**JavaScript**：

```
App = Em.Application.create({});

Em.View.create({
    templateName: 'test',
    go: function(evt) {
        console.log('go', evt);
    }
}).append();​ 
```

* * *

Ember.js 虽然能够在特定位置插入元素，但这应该只对应用程序的主视图是必需的**。**所以你可以使用`Ember.View#appendTo(target)`. 但同样，这只应在极少数情况下使用。

# java - 如何在 Web 应用程序后面运行 Java 程序，让 Web 应用程序访问它的对象？

> ID：11296945
> 
> 赞同：1
> 
> 时间：2012-07-02T15:45:01.920
> 
> 标签：java, jsp, tomcat, jstl, real-time

我目前正在 netbeans 中构建一个 java web 应用程序。我已经到了现在卡住的地步。我有一个正在建立的体育网站的申请草稿。草案能够让联盟中的每个用户都访问它，但我需要为所有用户同步它。

我想运行一个 java 程序或方法，它将在指定的日期和时间创建草稿，然后有一个集中的变量和一个计时器，每个用户在访问网页时都可以访问它们。

因此，我希望每个用户在打开草稿时都能看到相同的内容，无论他们在什么时间点打开草稿。本质上，无论是否有人真正打开它，这个草稿都需要运行。

我正在为如何做到这一点而苦苦挣扎，我正在考虑线程或 cron 作业，但我不知道如何使用 JSTL 或 jsp:useBean 之类的东西访问我从 Web 应用程序运行的程序。

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T20:12:14.600

因为实时一致性对您的应用程序很重要。

一种简单的方法是将草稿信息存储在数据库中。

设置数据库中所有记录的排序顺序、开始时间和结束时间。由于您事先知道此信息，因此您可以通过管理脚本执行此操作。只需手动或在预设时间运行管理脚本即可更新数据库。

现在，客户可以请求在给定当前时间时应该显示的记录。

此过程的另一个优点是您的客户端 (JSP) 可以检索具有开始时间和结束时间的用户并显示它们。

您不必每 20 秒进行一次 AJAX 类型的调用。

# perl - 使用 Perl 模块 Text::CSV::Slurp 缺少标题

> ID：11296946
> 
> 赞同：1
> 
> 时间：2012-07-02T15:45:07.160
> 
> 标签：perl, csv

我正在使用[`Text::CSV::Slurp`](https://metacpan.org/module/Text%3a%3aCSV%3a%3aSlurp)从散列数组创建 CSV 文件。除了缺少一些标题外，它工作得很好。

```
hash1    
    header1 header2
    1          2

hash2
    header1 header2 header3
    11        22       33 
```

我希望最终输出为 CSV 文件：

```
header1 header2 header3
1          2
11         22      33 
```

不是啜饮输出

```
header1 header2
1          2
11         22 
```

有什么建议么？

代码：

```
sub entry_capture_csv {
my ($stores_folder, $cmdstr, $header_field, $entrycmdstr, $entryfilename) = @_;

print "\t\tOSSI-" . $cmdstr . " for " . $entryfilename . " entry detail\n";
$node->pbx_command($cmdstr);
if ( $node->last_command_succeeded() ) {
    my @ossi_output = $node->get_ossi_objects();
    my $i = 0;
    my @ext_array;
    foreach my $hash_ref(@ossi_output) {
        $i++;
        #print "output result $i\n";
        for my $field ( sort keys %$hash_ref ) {
            my $value = $hash_ref->{$field};
            #print "\t$field => $value\n";
        }
        my $entryNumber = trim($hash_ref->{$header_field});
        unless( defined $entryNumber ) { $entryNumber = '' };
        if ($entryNumber eq "") {
            #empty string
        } else {
            push(@ext_array, $entryNumber);
        }
    }

    # Issue = failed sometimes there is extra header
    #
    my @result_array;

    foreach (@ext_array) {
        my $entrycmd =  $entrycmdstr . " " . $_;
        $node->pbx_command($entrycmd);

        if ( $node->last_command_succeeded() ) {
            print "\t\t\t" . $entrycmd . "\n";

            my @ossi_output = $node->get_ossi_objects();
            push(@result_array, @ossi_output);

            #my $csv = Text::CSV::Slurp->create( input => \@ossi_output );
            #open (OUTFILE, ">$stores_folder/$store-" . $entryfilename . "-" . "$_" . ".csv") || die "Can't open output file.\n";
            #print OUTFILE $csv;
            #close(OUTFILE);

        } else {
            print "Failed\t\t\t" . $entrycmd . "\n";
        }
    }

    my $csv = Text::CSV::Slurp->create( input => \@result_array );
    open (OUTFILE, ">$stores_folder/$store-" . $entryfilename . ".csv") || die "Can't open output file.\n";
    print OUTFILE $csv;
    close(OUTFILE);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:21:19.827

[`Text::CSV::Slurp->create`](https://metacpan.org/module/Text%3a%3aCSV%3a%3aSlurp#create)构造方法采用一个选项，该`field_order`选项定义要使用的散列元素的键及其在 CSV 记录中的顺序。

看看这段代码，我认为它是不言自明的。

```
use strict;
use warnings;

use Text::CSV::Slurp;

my @data = (
  {
    header1 => 1,
    header2 => 2,
  },
  {
    header1 => 11,
    header2 => 22,
    header3 => 33,
  },
);

my $csv = Text::CSV::Slurp->create(
    input => \@data,
    field_order => [qw/ header1 header2 header3 /]);

print $csv; 
```

**输出**

```
header1,header2,header3
1,2,
11,22,33 
```

* * *

**更新**

要自动从数据中获取标题列表，您可以编写类似这样的内容。输出与前一个程序的输出相同。

请注意，没有办法知道如何最好地对标题列表进行排序，因此我使用了简单的词法排序。它用这些微不足道的数据产生了预期的效果。

```
use strict;
use warnings;

use Text::CSV::Slurp;

my @data = (
  {
    header1 => 1,
    header2 => 2,
  },
  {
    header1 => 11,
    header2 => 22,
    header3 => 33,
  },
);

my @headers = do {
  my %headers;
  $headers{$_}++ for map { keys %$_ } @data;
  sort keys %headers;
};

my $csv = Text::CSV::Slurp->create(
    input => \@data,
    field_order => \@headers);

print $csv; 
```

# objective-c - Google Drive/Dropbox 的 Xcode Git 问题

> ID：11296947
> 
> 赞同：3
> 
> 时间：2012-07-02T15:45:11.420
> 
> 标签：objective-c, ios, xcode, git

显然 XCode 应该自动识别 git repo，但是在执行 git init 和我的初始提交之后，XCode 没有看到 repo。我在 Google Drive 中有我的整个项目和 git repo，我怀疑这会导致一些问题？我需要做什么才能让 XCode 读取 Google Drive 中的 .git 文件？

**编辑**

我尝试执行 git init，添加并提交到本地驱动器中的项目，但 XCode 仍然无法识别 git 存储，因此这可能不是 G Drive/Dropbox 问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-02T16:00:32.660

不要将 Git 存储库放在 Dropbox 或 Google Drive 上。这很糟糕。Dropbox 在同步时可以打乱所有 git 的内部文件，并把它搞砸你的整个存储库。

相反，请使用 Git 服务。对于私人的东西，我推荐[BitBucket](http://bitbucket.org)。

举例：

想象一下，您将主存储库放在 Dropbox 上。您在另一台计算机上同步您的保管箱并推送到它。连接从该计算机断开。您转到另一台计算机，进行另一次提交并推送到主存储库。一切顺利。

Dropbox 开始在这台计算机中同步。同时，另一台计算机也开始同步。但在内部，回购中有很多不同的文件。Dropbox 如何知道如何保存和组织这些文件？

简单的答案：它没有。它会损坏您的存储库，而您对此无能为力。这不是某种“它几乎永远不会发生”。它会发生，很快。

关于真正的问题：

我从未使用过 Xcode，但我在 Eclipse 上遇到过类似的问题。不过很简单：Xcode 不知道 repo，因为你没有告诉他那是一个 repo。要了解如何在 Xcode 上执行此操作，您可以[在此处查看](http://support.beanstalkapp.com/customer/portal/articles/95580-setting-up-git-with-xcode-4)。

# java - 创建的文件没有父级？

> ID：11296949
> 
> 赞同：16
> 
> 时间：2012-07-02T15:45:11.893
> 
> 标签：java, file, directory, nullpointerexception, parent

在一个java程序中，我创建了一个文件

```
File temp = new File("temp");
temp.createNewFile(); 
```

然后由于某种原因，当我写

```
File pDir = temp.getParentFile(); 
```

pDir 为空。我其实很想写

```
File pDir = temp.getParentFile().getParentFile(); 
```

但这会引发空指针异常。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-02T15:51:33.247

您需要一个带有路径的文件，请尝试 getAbsoluteFile。

```
File pDir = temp.getAbsoluteFile().getParentFile(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:52:16.693

您正在创建一个名为 temp 的文件，但它没有路径，因此不会有父路径。如果要将文件放在当前目录中：

```
File temp = new File(System.getProperty("user.dir")+"/temp");
File parent = temp.getParentFile(); 
```

# android - 翻译动画在使用 XML 定义时完美运行，并且仅通过代码完美运行一次 - Android

> ID：11296950
> 
> 赞同：9
> 
> 时间：2012-07-02T15:45:12.307
> 
> 标签：android, android-layout, android-animation

我遇到了这个奇怪的问题。基本上我正在用翻译动画制作一个视图。（通过 2 个不同的事件翻译到屏幕并输出）我的翻译动画代码是：

```
 final Animation  animtopOut = new TranslateAnimation(0, 0, 0, -mainHeaderlayout.getMeasuredHeight());
                    animtopOut.setDuration(500);
                    animtopOut.setFillAfter(true);
mainHeaderlayout.setAnimation(animtopOut); 
```

xml代码是：

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:fillAfter="true"
    android:interpolator="@android:anim/accelerate_interpolator" >

<translate 
    android:fromYDelta="0%p"
    android:toYDelta="-99%p"
    android:duration="600"
    android:fillAfter="true">

</translate>
</set> 
```

使用代码设置它：

```
final Animation animtopOut = AnimationUtils.loadAnimation(mContext, R.anim.header_animate_out); 
```

当我触发动画时，如果我使用 xml 动画属性，它可以正常工作。**问题是当我通过代码使用它时。这就是我想要的。它仅第一次与翻译动画一起运行。**第二次，当它被触发时，视图在屏幕内，没有动画。如果我缺少任何属性，请有人帮助我。谢谢。

* * *

**编辑：（额外信息）**

实际上有两个不同的动画通过两个不同的事件在同一个视图上触发。我实际上已经发布了一个动画属性。另一个几乎一样。只是价值观不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T16:47:20.157

你试过这样的动画配置吗

```
animtopOut.setRepeatCount(Animation.INFINITE);

animtopOut.setRepeatMode(Animation.RESTART);

animtopOut.setInterpolator(new LinearInterpolator()); 
```

?

# google-bigquery - 来自 POST 的“无效上传请求”

> ID：11296953
> 
> 赞同：1
> 
> 时间：2012-07-02T15:45:27.113
> 
> 标签：google-bigquery

我正在尝试使用 Java Apache HttpClient 发送多部分 POST 请求以将一些测试数据导入 BigQuery 表，但我不断收到 HTTP 400 错误消息“无效上传请求”。我很确定我已经很好地遵循了 BigQuery 教程来重现所需的内容，但它不起作用。有人可以看看这个请求，看看它有什么问题吗？

```
 String rawInput = "--xxx\n";
    rawInput += "Content-Type: application/json; charset=UTF-8\n";
    rawInput += "{\n";
    rawInput += "'configuration': {\n"; 
    rawInput += "'load': {\n";
    rawInput += "'schema': {\n";
    rawInput += "'fields': [\n";
    rawInput += "{'name':'field1', 'type':'STRING'},\n";
    rawInput += "{'name':'field2', 'type':'STRING'},\n";
    rawInput += "{'name':'field3', 'type':'STRING'},\n";
    rawInput += "{'name':'field4', 'type':'STRING'},\n";
    rawInput += "]\n";
    rawInput += "},\n";
    rawInput += "'destinationTable': {\n";
    rawInput += "'projectId': 'xxxxxxxxxxx [redacted]',\n";
    rawInput += "'datasetId': 'test',\n";
    rawInput += "'tableId': 'test'\n";
    rawInput += "}\n";
    rawInput += "createDisposition = CREATE_IF_NEEDED\n";           
    rawInput += "}\n";
    rawInput += "}\n";
    rawInput += "}\n";
    rawInput += "--xxx\n";
    rawInput += "Content-Type: application/octet-stream\n";
    rawInput += "\n";
    rawInput += "1,1234,11111111,1\n";
    rawInput += "2,5678,11111111,1\n";
    rawInput += "3,9101,11111111,1\n";
    rawInput += "4,6543,11111111,1\n";
    rawInput += "--xxx--"; 
```

然后像这样执行请求：

```
 postRequest.addHeader("Content-Type", "multipart/related; boundary=xxx;");
    postRequest.addHeader("Authorization", "OAuth " + credential.getAccessToken());
    StringEntity input = new StringEntity(rawInput);
    postRequest.setEntity(input);
    HttpResponse response = httpClient.execute(postRequest); 
```

此外，如果我将 addHeader("Content-Type"...) 更改为 addHeader("Content-Type:"...)，则错误更改为“不支持媒体类型 'text/plain'。有效的媒体类型：[应用程序/八位字节流]”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:49:44.393

在 Content-Type 标头之后应该有一个额外的换行符。

```
rawInput += "Content-Type: application/json; charset=UTF-8\n\n"; 
```

# php - $_SESSION 多维数组问题

> ID：11296956
> 
> 赞同：1
> 
> 时间：2012-07-02T15:45:32.097
> 
> 标签：php

请我需要帮助，下面的代码在我的本地主机 php5.3+ 上运行良好，但在服务器上运行不正常。5.2

```
 $_SESSION['myinv_id'] = $setinvid;
    $_SESSION['prod_name'][$i] = $prod_name;    
    $_SESSION['qty'][$i] = $clean_qty;
    $_SESSION['price'][$i] = $clean_price;
    $_SESSION['total'][$i] = $clean_total;
    $_SESSION['desc'][$i] = $desc; 
```

当我做了一个 var_dump

第一次添加内容时，我有这些。

```
 array(5) { 
     ["prod_name"]=> array(1) {[0]=> string(4) "SDFD" }
     ["qty"]=> array(1) {[0]=> string(2) "43"} 
     ["price"]=> array(1) { [0]=> string(2) "43" } 
     ["total"]=> array(1) { [0]=> string(4) "1849" } 
     ["desc"]=> array(1) { [0]=> string(6) "dsfsdf" } } 
```

工作正常......因为数组被返回但试图添加第二个值......我得到这些错误......说致命错误[]不是字符串预期的......当我做了一个var_dump......我有了这些……在这种情况下，['prod_name'] & ['desc'] 不可避免地从数组变为字符串，并且无法将数组值推入桩中。

```
 array(5) { 
     **["prod_name"]=> &string(5) "dddsd"** 
      ["qty"]=> &array(2) { 
        [0]=> string(2) "43" 
       [2]=> string(2) "45" }
       ["price"]=> &array(2) { 
  [0]=> string(2) "43" 
     [2]=> string(1) "3" } 
     ["total"]=> &array(2) { 
[0]=> string(4) "1849" 
        [2]=> string(3) "135" } 
      **["desc"]=> &string(7) "dsddadd"** } 
```

请问问题的根源是什么，我什至尝试在使用它们之前将这个会话变量声明为一个空数组，但无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:55:11.057

您的问题似乎是为什么我的会话数组神秘地被自己修改了？

如果 php 配置已`register_globals`启用，那么，`$var`并`$_SESSION['var']`成为相同的变量（通过引用）。这可能导致一些真实的代码wtf，因为分配一个值`$var`也会将值分配给`$_SESSION['var']`

我不记得了，但是这两个变量之间的引用可能只有在调用 session_start 时才能建立。另外，我想这只会发生在全球范围内。

# javascript - 解析 textarea 以从内容中返回 URL

> ID：11296957
> 
> 赞同：0
> 
> 时间：2012-07-02T15:45:36.583
> 
> 标签：javascript

我`textarea`包含一个或多个 URL 以及其他文本内容。我想要一个 JavaScript 函数来返回文本内容以及带有锚标记的正确格式的 URL。

示例内容：

```
abcd http://stackoverflow.com xyz 
```

我希望函数返回：

```
 abcd <a href="http://stackoverflow.com">http://stackoverflow.com</a> xyz 
```

执行此请求需要哪些步骤？

将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T15:48:25.333

```
"abcd http://stackoverflow.com xyz".replace( /https?:\/\/[^ ]+/g, '<a href="$&">$&</a>')
//"abcd <a href="http://stackoverflow.com">http://stackoverflow.com</a> xyz" 
```

# python - 无法让 pygobject 使用绘图区域

> ID：11296962
> 
> 赞同：3
> 
> 时间：2012-07-02T15:45:57.423
> 
> 标签：python, pygobject

一般来说，我已经成功地使用了 Gtk3 系统：Windows、盒子、网格、信号处理程序等。但是，无论我尝试什么，我都无法让 DrawingArea 小部件工作。我怀疑我的设置有问题，但不知道如何检查。这是一个真正应该工作的简单示例：

```
#!/usr/bin/env python3 

from gi.repository import Gtk, Gdk
class MyExample(object): 
  def __init__(self, user_data=None): 
    window = Gtk.Window() 
    window.connect("destroy", Gtk.main_quit) 
    drawing_area = Gtk.DrawingArea() 
    drawing_area.set_size_request(300,300) 
    drawing_area.connect('draw',self.expose) 
    window.add(drawing_area) 
    window.show_all()  
  def expose(self,widget,cr,data): 
    print ("self_exposed") 
# === 
if __name__ == "__main__": 
    app = MyExample() 
    Gtk.main() 
```

当我运行它时，我收到此错误：

```
Exception TypeError: TypeError("Couldn't find conversion for foreign struct
'cairo.Context'",) in <module 'threading' from '/usr/lib/python3.2/threading.py'>
ignored 
```

我正在使用 Ubuntu 12.04 和 Python 3.2。我怀疑我的安装有问题，但是什么？我尝试重新安装 python-gi-cairo。

感谢您的任何想法，

麦克风

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-02T20:19:57.093

在这里检查我的答案：

[在 PyGobject (python3) 中绘图](https://stackoverflow.com/questions/10270795/drawing-in-pygobject-python3/10541984#10541984)

您需要安装**python3-gi-cairo**包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:44:33.933

使用 Gtk+ 3 和 Python 3 时，似乎永远不会发送“绘制”信号。我无法弄清楚，但它确实阻碍了我的项目并且非常令人沮丧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-03T03:49:33.450

我遇到了类似的问题，尝试了 python3-cairo 包但没有积极的结果。

但是，安装**python3-gi-cairo**包为我解决了这个问题。

在我的情况下，在 Ubuntu 12.04 下，终端中的***$ sudo apt-get install python3-gi-cairo*** 可以解决问题，让我摆脱了烦人的“找不到外国结构 'cairo.Context' 的转换”消息。

它可能也适用于其他 Ubuntu 版本，也许也适用于 Debian ......

其他发行版可能有类似的软件包，但我对此无法提供太多帮助。

希望我有所帮助。

# c# - 如何在 Nhibernate 中使用 QueryOver Projections.SqlFunction 用于没有参数的 mysql 函数？

> ID：11296971
> 
> 赞同：0
> 
> 时间：2012-07-02T15:46:40.203
> 
> 标签：c#, nhibernate, queryover

我现在已经准备好如何使用任何带有参数的 mysql 函数，例如：我成功地使用函数 Date(dateTimeValue) 来仅获取 Date 部分。

但现在我需要以这种方式使用函数 Date() 或 CurDate() 目标是获取 de MySql 服务器当前日期时间。但是 Projections.SqlFunction("Date", NHibernateUtil.Date,Params coma separate) 没有使用无参数函数的重载。

所以我的问题是，我怎样才能做到这一点？Projections.SqlFunction("日期", NHibernateUtil.Date)

提前感谢您的时间。

我使用 C# 和 Nhibernate QueryOver

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:33:20.353

```
Projections.SqlFunction("Date", NHibernateUtil.Date) 
```

这相当于

```
Projections.SqlFunction("Date", NHibernateUtil.Date, new object[0]) 
```

**更新：**要创建无参数函数，您需要创建自己的方言

```
class MyDialect : NHibernate.Dialect.MySQLDialect
{
    public MyDialect()
    {
        RegisterFunction("curdate", new NoArgSQLFunction("CurDate", NHibernateUtil.DateTime));
    }
} 
```

# if-statement - 将 .txt 的所有行替换为格式为 xx:xx:xx 的前 8 个字符，其中 x 是批处理文件中的整数

> ID：11296972
> 
> 赞同：0
> 
> 时间：2012-07-02T15:46:45.057
> 
> 标签：if-statement, batch-file, for-loop, replace

我正在将根目录中的每个 properties.log 文件：c:\executionsdktest_10.2.2 与参考文件进行比较。xx:xx:xx 格式的执行时间打印在 ref 和 properties.log 文件的 28 行的前 8 个字符中，因为时间会不同且无关紧要我想跳过包含的任何行的前 8 个字符一次。我怎样才能做到这一点？

```
 REM assume <refLog>.txt exists
<!logPath! (
For /F "tokens=*" %%R in (!refLogPath!) DO (
    set logLine=
        set /p logLine=
    set refLogLine=%%R

    REM Check line by line of log against refLog

    REM if corresponding lines mismatch: skip xx:xx:xx
    if NOT "!logLine!"=="!refLogLine!" (
        Echo.
        Echo line below is Incorrect:
        set lnCorrect=false
        REM output to command line: can be put into .log/.txt later
        REM output ANY and ALL incorrect line in log file
            ECHO !logLine!
                           )
                       )    
    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:51:39.720

您可以使用变量的子字符串

```
!logLine:~8! 
```

这将从该行中删除前 8 个字符。`refLogLine`当然，对于也是如此。

# c# - 通用委托重复定义 - 为什么？

> ID：11296982
> 
> 赞同：4
> 
> 时间：2012-07-02T15:47:24.740
> 
> 标签：c#, generics, delegates

我有两个通用委托，我试图定义编译器抱怨它们是重复的，但在我看来是完全不同的。我在做什么/理解错误？

```
delegate TReturn foo<TParameter, out TReturn>(TParameter parameter, IItem item); 
```

和

```
delegate TReturn foo<TParameter, out TReturn>(TParameter parameter, int field, IItem item); 
```

如果我向第二个委托添加一个新的通用参数，一切正常。

```
delegate TReturn foo<TParameter, TField, out TReturn>(TParameter parameter, TField field, IItem item) where TField struct 
```

但这似乎不正确。我将始终为字段传递一个 int - 它不应该是通用的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T16:01:17.027

代表不是方法。他们知道如何调用方法，但他们本身不是方法（委托是一个`object`），因此不能像方法一样被重载。

请参阅[这篇文章](https://stackoverflow.com/questions/3747948/c-sharp-how-can-i-overload-a-delegate)，了解为什么它不可能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-02T16:04:08.773

使用`delegate`关键字时，幕后发生的是编译器根据其定义生成一个类。因此，当您像这样定义委托时：

```
delegate TReturn foo<TParameter, out TReturn>(TParameter parameter, IItem item); 
```

从中生成以下类：

```
class foo<TParameter, out TReturn> : MulticastDelegate
{
    public void Invoke(TParameter parameter, IItem item) { ... }
    ....
} 
```

如您所见，当您有两个具有相同名称和相同泛型参数的委托时，会导致生成两个相同的类，这当然是不可接受的。

我推荐 Jeffrey Richter 的一本通过 C# 编写的优秀书籍[CLR](https://books.google.com/books/about/CLR_Via_C.html?id=7yb-QQAACAAJ)，它更清楚地揭示了像这样的幕后东西——等等。

# php - 使用自定义分类的 query_posts

> ID：11296994
> 
> 赞同：2
> 
> 时间：2012-07-02T15:47:49.153
> 
> 标签：php, wordpress, wordpress-theming, taxonomy, custom-post-type

这是我关于堆栈溢出的第一篇文章！

我是一名 WordPress 初学者，几乎已经完成了我第一个涉及使用基本属性列表的主题的开发。

我已经尝试通过检查here来解决这个问题..

*   [http://codex.wordpress.org/Function_Reference/register_taxonomy](http://codex.wordpress.org/Function_Reference/register_taxonomy)
*   [http://codex.wordpress.org/Function_Reference/query_posts](http://codex.wordpress.org/Function_Reference/query_posts)

..以及许多谷歌搜索。而且我似乎找不到任何可以帮助我的东西。

我无法按照我需要它们出现的顺序显示来自名为“tfg-properties”的自定义帖子类型的帖子。

**自定义分类法 - 'featured-properties' - functions.php**

```
register_taxonomy('featured-properties', 'tfg-properties', array(
        "hierarchical" => true,
        "label" => "Featured Properties",
        'update_count_callback' => '_update_post_term_count',
        'query_var' => true,
        'rewrite' => array( 
            'slug' => 'featured-property',
            'with_front' => false ),
        'public' => true,
        'show_ui' => true,
        'show_tagcloud' => true,
        '_builtin' => false,
        'show_in_nav_menus' => false)
    ); 
```

我为此帖子类型创建了一个自定义分类法，称为“特色属性”，我想做的是让分类法中的帖子 - “特色属性”显示在其他帖子之前。

我可以使用类别来实现这一点，但由于我还合并了一个博客，所以这不起作用..

这是我查询帖子的方式..

**按类别 id 查询帖子 - page.php**

```
// Get all posts from featured properties
    $catId = get_cat_ID('Featured Property');

    query_posts('post_type=tfg-properties&cat=' . $catId);

// begin the loop
while( have_posts() ): the_post(); ?>
    <li class="single-prop">
        ...
    </li>
<?php endwhile; ?> 
```

```
// Get all posts from featured properties

    query_posts('post_type=tfg-properties&cat=-' . $catId);

// begin the loop
while( have_posts() ): the_post(); ?>
    <li class="single-prop">
        ...
    </li>
<?php endwhile; ?> 
```

有什么办法可以将自定义帖子与自定义税排序以显示在其他帖子之前？

提前致谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-16T02:47:34.473

您可以使用两个循环 - 第一个循环只显示分类 - 然后第二个显示所有其他循环，不包括分类。

```
<?php 
$catId = get_cat_ID('Featured Property');
global $post; 

rewind_posts();
$query = new WP_Query(array(
 'cat' => $catId, 
 'post_type' => 'tfg-properties',
));
while ($query->have_posts()) : $query->the_post(); 
?>

<li class="single-prop"></li>

<?php 
endwhile; 
wp_reset_postdata();
?>

<?php 
rewind_posts();
$query = new WP_Query(array(
 'cat' => '-' . $catId, 
 'post_type' => 'tfg-properties',
));
while ($query->have_posts()) : $query->the_post(); 
?>

<li class="single-prop"></li>

<?php 
endwhile; 
wp_reset_postdata();
?> 
```

# r - 将未知长度的序列拆分为R中的一定数量的集合

> ID：11296995
> 
> 赞同：5
> 
> 时间：2012-07-02T15:47:51.743
> 
> 标签：r

我有一个长度不同的序列，例如：

```
items <- 1:4 
```

我想把它分成每组可能的组合`n`。所以说`n`是两个，我想返回：

```
Set A    Set B
-----    -----
1        2 3 4
1 2      3 4
1 2 3    4
1 3      2 4 
```

等等。集合内的排列并不重要，即集合 { `1`, `2`, `3`} 与 { `2`, `1`, `3`} 相同。集合不能为空。

我能想到的最好的（使用`permn`包中的`combinat`）是：

```
n <- 2
r <- 1:length(items)
arrangements <- NULL
for (i in 1:(n-1)) {
  A <- r[(1:i)]
  B <- r[-(1:i)]
  arrangements <- c(arrangements, apply(do.call(rbind, permn(1:length(items))), 1, function(z) list(z[A], z[B])))
} 
```

这是相当无用的，因为它返回相等的集合，即 { `1`, `2`, `3`} 和 { `2`, `1`, `3`} 并且不够灵活以处理`n`. 有人知道我该怎么做吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T16:26:33.740

有一个“套”包：

```
require(sets)
power_set(1:4)
sapply( set_power(1:4) , function(x) set_complement(x ,as.set(1:4)) )
list( Set_A = as.list(set_power(1:4)), 
      Set_B = sapply( set_power(1:4) , function(x) set_complement(x ,as.set(1:4)) ) ) 
```

它包括像 ( {1,2,3,4}, {} ) 这样的配对，从集合论的角度来看这是正确的，但您可能希望将它们消除为“退化”。（现在通过递归处理 Set_B 结果将其推广到更大的 N 的方法很清楚。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T16:36:04.530

这是另一种方式，可能会对您有所帮助：

```
# Params
n <- 2
items <- 1:4

# Sample
l <- lapply(items, function(x) combn(items, x, simplify=F))
l <-unlist(l, recursive=F)

# devide into sets
tmp <- 1:length(l)
tmp <- split(tmp, sample(1:n, length(l), replace=T))

sets <- lapply(tmp, function(x) l[x]) 
```

# android - Android 应用程序发生 OutOfMemory 异常

> ID：11296997
> 
> 赞同：0
> 
> 时间：2012-07-02T15:47:54.057
> 
> 标签：android

我有一个问题，我从 JSON 响应中接收数据，数据中也有很多图像。有大量数据超过 100。因此，当我尝试在 LazyAdapter 中加载它或尝试调用 LazyAdapter 的 NotifydatasetChanged 方法时，它会返回 OutOfmemory 异常。请提出任何解决方案。

**代码：**

```
final ProgressDialog dialog = ProgressDialog.show(
                    ResearchList.this, "Research List       ",
                    "Please wait...   ", true);

            final Handler handler = new Handler() {

                public void handleMessage(Message msg) {

                    // System.out.println("The id after Save:"+id.get(0).toString());

                    // catagory.addAll(keyword_vector1);
                    linear_Category_Child.setVisibility(View.GONE);
                    linear_Category_Child_Child.setVisibility(View.VISIBLE);
                    //tv_Child_Header.setText("Volvo");
                    tv_CategoryChildHeader.setText(from);
                    setHeaderImage(tv_CategoryChildHeader.getText().toString());

                    if(coll.getDisplayNames().size()!=0)
                    {
                        adapter = new CategoryListLazyAdapter(
                                ResearchList.this);
                        lvCategory.setAdapter(adapter);
                        Utility util = new Utility();
                        util.setListViewHeightBasedOnChildren(lvCategory);

                    }
                    else
                    {
                        /*lvCategory.invalidate();
                        lvCategory.setAdapter(null);*/
                        AlertDialog.Builder builder = new Builder(ResearchList.this);
                        builder.setTitle("Attention!");
                        builder.setMessage("No Data Available for the Particular Search.");
                        builder.setPositiveButton("OK",
                                new DialogInterface.OnClickListener() {

                                    @Override
                                    public void onClick(DialogInterface dialog, int which) {
                                        // TODO Auto-generated method stub

                                    }
                                });

                        builder.create().show();
                    }
                    /*Utility util = new Utility();
                    util.setListViewHeightBasedOnChildren(lvCategory);*/
                    dialog.dismiss();
                }
            };

            final Thread checkUpdate = new Thread() {

                public void run() {
                    try {
                        String sortEncode = URLEncoder.encode("mpg");
                        String filterEncode = URLEncoder.encode(filter);
                        String clientEncode = URLEncoder.encode("10030812");
                        String fromEncode = URLEncoder.encode(from);
                        String toEncode = URLEncoder.encode(to);
                        String catUrl = "/v1/vehicles/get-make-models.json?sort="
                                + sortEncode
                                + "&filter="
                                + filterEncode
                                + "&client-id="
                                + clientEncode
                                + "&from="
                                + fromEncode;
                        genSig = new GetSignature(catUrl, "acura");
                        try {
                            signature = genSig.getUrlFromString();
                        } catch (InvalidKeyException e1) {
                            // TODO Auto-generated catch block
                            e1.printStackTrace();
                        } catch (NoSuchAlgorithmException e1) {
                            // TODO Auto-generated catch block
                            e1.printStackTrace();
                        }
                        // jsonString =
                        // getJsonSring("http://api.highgearmedia.com/v1/vehicles/get-models.json?make=acura&client-id=10030812&signature=LWQbdAlJVxlXZ1VO2mfqAA==");
                        // String signatureEncode =
                        // URLEncoder.encode(signature);
                        String urlEncode = URLEncoder.encode(catUrl
                                + "&signature=" + signature);
                        jsonString = getJsonSring("http://apibeta.highgearmedia.com"
                                + catUrl + "&signature=" + signature);
                        System.out.println("The json category:===>"
                                + jsonString);
                    } catch (ClientProtocolException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (URISyntaxException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    JsonParse json = new JsonParse(jsonString);
                    json.parseCat();
                    LIST_SIZE = coll.getDisplayNames().size();
                    for (int i = 0; i <= BATCH_SIZE; i++) {
                        // countriesSub.add(COUNTRIES[i]);
                        countriesSubCat.add(coll.getDisplayNames().get(i));
                        imagesSubCat.add(coll.getImages().get(i));
                        YearSubCat1.add(coll.getYears().get(i));
                        YearSubCat2.add(coll.getYears().get(i + 1));
                        mpgSubCat1.add(coll.getMpg().get(i));
                        mpgSubCat2.add(coll.getMpg().get(i + 1));
                        priceSubCat1.add(coll.getPrice().get(i));
                        priceSubCat2.add(coll.getPrice().get(i + 1));
                        ratingSubCat1.add(coll.getRating().get(i));
                        ratingSubCat2.add(coll.getRating().get(i + 1));
                    }
                    setLastOffset(BATCH_SIZE);
                    handler.sendEmptyMessage(0);

                }

            };
            checkUpdate.start(); 
```

**GetJSonString 方法（错误位置）：**

```
public String getJsonSring(String api_url) throws URISyntaxException,
            ClientProtocolException, IOException {
        try {
            HttpClient client = new DefaultHttpClient();
            HttpGet request = new HttpGet();
            URL url = new URL(api_url);
            URI uri = new URI(url.getProtocol(), url.getHost(), url.getPath(),
                    url.getQuery(), null);
            request.setURI(uri);

            HttpResponse response = client.execute(request);
            InputStream ips = response.getEntity().getContent();
            BufferedReader buf = new BufferedReader(new InputStreamReader(ips, "UTF-8"));

            StringBuilder sb = new StringBuilder();
            String s;
            while (true) {
                s = buf.readLine();
                if (s == null || s.length() == 0)
                    break;
                sb.append(s);

            }
            buf.close();
            ips.close();
            return sb.toString();

        }

        finally {
            // any cleanup code...
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T17:30:40.247

问题是您一次解析整个 JSON 提要，它太大而无法保存在内存中。使用 JSON**流**解析器，例如[Jackson](http://jackson.codehaus.org/)（它也非常快），它允许您在从服务器提取提要时解析 JSON 对象。

当您解析图像时，将它们转储到磁盘以释放内存并在您认为合适的时候再次加载它们。

# java - JavaFX 和 FXML。何时将组件的引用加载到控制器类中？

> ID：11296998
> 
> 赞同：1
> 
> 时间：2012-07-02T15:48:04.473
> 
> 标签：java, javafx, fxml

我有一个非常简单的 fxml 文件，带有一个复选框：

```
...
<AnchorPane id="AnchorPane" xmlns:fx="http://javafx.com/fxml" fx:controller="jfx01.T01">
...
<CheckBox fx:id="checkBox1" text="CheckBox" />
... 
```

非常简单的控制器类如下：

```
public class T01 extends Application {

    @FXML protected CheckBox checkBox1;

    @Override
    public void start(Stage primaryStage) throws IOException {
         Parent root = FXMLLoader.load(getClass().getResource("t01.fxml"));   
         primaryStage.setScene(new Scene(root));
         primaryStage.show();

         //here, here is the problem!
         System.out.println("checkBox1==null? "+ (checkBox1==null?"yes":"no"));

    }
} 
```

### 这个基本应用程序的输出是：

```
checkBox1==null? yes 
```

在“start”方法中，组件显然已经创建，但尚未分配给控制器类的@FXML 字段。作为没有其他错误的测试，我添加了一个按钮和一个事件。那里分配了checkBox1！

```
 @FXML protected void handleButton1Action(ActionEvent event) {
        System.out.println("button pressed");
        checkBox1.setSelected(!checkBox1.isSelected());
    } 
```

### 问题

如果我因为 init 尚未完成而无法使用 start 方法，那么在 init 完成且组件可用的情况下，第一个可用的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T16:23:47.907

控制器应该实现`javafx.fxml.Initializable`和覆盖`initialize(URL arg0, ResourceBundle res)`方法。`CheckBox checkBox1`将由 FXMLLoader 为您初始化并在该方法`initialize`中可用。方便的方法是将 Controller 和 Main（扩展 Application）类分开，因此应用程序的起始/入口点和 FXML 文件控制器应该是 2 个不同的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T16:11:52.610

您可以通过以下方式在 Controller 中访问主 Stage：

```
Node source = (Node) event.getSource();
Stage stage = (Stage) source.getScene().getWindow(); 
```