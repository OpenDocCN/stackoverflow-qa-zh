# StackOverflow 问答 10077000-10077999

# php - 如何使用限制子句对记录进行排序

> ID：10077003
> 
> 赞同：1
> 
> 时间：2012-04-09T17:18:40.623
> 
> 标签：php, mysql, sorting, limit

我必须选择前 5 条记录并按输入日期升序显示它们。

以下是我的查询：

```
select id,name,entry_date from users order by entry_date desc limit 0,5 
```

它给了我最新输入的 5 个用户。但我希望它们按入境日期递增。

如何使用相同的查询按升序排列它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T17:20:39.443

这将按需要工作

```
 SELECT  * FROM 
    ( 
        select id,name,entry_date from users order by entry_date desc limit 0,5
    ) as a ORDER BY a.entry_date asc 
```

# objective-c - 需要将表视图的内容保存为 txt 文件并稍后重新加载

> ID：10077005
> 
> 赞同：0
> 
> 时间：2012-04-09T17:18:49.773
> 
> 标签：objective-c, xcode, macos, reload, save

我需要能够将 NSMutableArray 给定数据的表格视图的内容保存到 txt 文件中，然后需要在包含表格视图的窗口时自动重新打开该文件。我正在为 mac 制作应用程序，
谢谢这是数据源的代码：

```
#import "tableViewData.h"
#import "Customer.h"
@implementation tableViewData
-(id) init
{
self = [super init];
if (self) {
    list = nil;
    filepath = @"/Users/Gautambir/Desktop/CustomerNames.txt";
    if ([[NSFileManager defaultManager]fileExistsAtPath:filepath]) {
        list = [[NSMutableArray alloc] initWithContentsOfFile:filepath];
    }
    else
    list = [[NSMutableArray alloc]initWithObjects:name,memberNumber ,nil];
        [list writeToFile:filepath atomically:YES];
}
return self;
}

-(NSInteger)numberOfRowsInTableView:(NSTableView *)tableView{
return [list count];
}

-(id)tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn     *)tableColumn row:(NSInteger)row{
Customer *Customer = [list objectAtIndex:row];
NSString *identifier = [tableColumn identifier];
return [Customer valueForKey:identifier];
}

-(void)tableView:(NSTableView *)tableView setObjectValue:(id)object forTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row{
Customer *Customer = [list objectAtIndex:row];
NSString *identifier = [tableColumn identifier];
[Customer setValue:object forKey:identifier];
}

-(void)save{
[list writeToFile:filepath atomically:YES];
}
-(IBAction)add:(id)sender{
[list addObject:[[Customer alloc]init]];
[tableView reloadData];

NSLog (@"array:%@",list);

}

-(IBAction)remove:(id)sender{
NSInteger row = [tableView selectedRow];
if (row != -1) {
    [list removeObjectAtIndex:row];
}

[tableView reloadData];

}

-(void)dealloc
{
[super dealloc];
}

@end 
```

这是客户对象类的 .m 文件：

```
#import "Customer.h"

@implementation Customer

@synthesize name;
@synthesize memberNumber;

-(id) init
{
self = [super init];
if(self) {
    name = @"Test";
    int i = arc4random()%1000000000000000000;
    if (i<0) {
        memberNumber = i*-1;
    }
    else
        memberNumber = i;
}
return self;

}

-(void)dealloc
{
[name release];
[super dealloc];
}

-(id)initWithCoder:(NSCoder *)aDecoder
{
self = [super init];
if (self)
{
    name = [[aDecoder decodeObjectForKey:@"name"]retain];
    memberNumber = [aDecoder decodeIntForKey:@"memberNumeber"];
}
return self;

}

-(void)encodeWithCoder:(NSCoder *)aCoder
{
[aCoder encodeObject:name forKey:@"name"];
[aCoder encodeInt:memberNumber forKey:@"memberNumber"];
}

@end 
```

**强文本**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T22:08:00.603

很抱歉发布另一个答案 - 我误读了标签，我的第一个答案是依赖 iOS。这是在 OSX 中执行此操作的方法：

**保存**

```
NSMutableArray *array = ...  //your array

[array addObject:...]; 
[array addObject:...];
[array addObject:...];
...

// then use an NSData to store the array
NSData *data = [NSKeyedArchiver archivedDataWithRootObject:array];
NSString *path = @"/Users/User/path...";
[data writeToFile:path options:NSDataWritingAtomic error:nil]; 
```

**检索**

```
NSMutableArray *archive = [NSKeyedUnarchiver unarchiveObjectWithFile:path]; 
```

塞巴斯蒂安

# c - 为 n 维超立方体生成距离矩阵

> ID：10077008
> 
> 赞同：0
> 
> 时间：2012-04-09T17:19:18.277
> 
> 标签：c, matlab, multidimensional-array

是否有任何算法或方法可以为任何维度的超立方体生成邻接矩阵？说你的输入是 5 它会创建一个 5 维超立方体

我只能找到来自 [维基的资源](http://en.wikipedia.org/wiki/Hypercube "维基百科")

和 [wolfram](http://mathworld.wolfram.com/Hypercube.html "钨")

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T17:25:54.093

如果要生成一个ND单位超立方体的顶点，基本上可以制作一个N值真值表。这是我使用的一些代码：

```
function output = ttable(values)

  output = feval(@(y)feval(@(x)mod(ceil(repmat((1:x(1))', 1, numel(x) - 1) ./ repmat(x(2:end), x(1), 1)) - 1, repmat(fliplr(y), x(1), 1)) + 1, fliplr([1 cumprod(y)])), fliplr(values));
end 
```

要获得 5-D 超立方体的顶点，您可以这样称呼它：

```
vertices = ttable(ones(1, 5) * 2) - 1; 
```

从这里您可以通过查找所有仅相差一位的顶点来计算邻接矩阵，即：

```
adj_list = zeros(2^5, 5);
adj_mat = zeros(2^5, 2^5);
for v=1:2^5
  L1_dists = sum(abs(vertices - repmat(vertices(v, :), 2^5, 1)), 2);
  adj_list(v, :) = find(L1_dists == 1);
  adj_mat(v, find(L1_dists == 1)) = 1;
end 
```

# jakarta-ee - 将 proguard 与 dwr 一起使用的最佳方法

> ID：10077012
> 
> 赞同：1
> 
> 时间：2012-04-09T17:19:42.970
> 
> 标签：jakarta-ee, obfuscation, dwr

我打算使用 Proguard 来混淆 Java EE Web 应用程序，但我想知道是否有办法混淆对 Java 类的 DWR 调用，因为类方法不会保持相同的名称，这肯定会影响我的前端依赖后端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:46:04.240

DWR 调用者代码不能被混淆，因为它是由内部 DWR 类自动生成的。使用[Proguard 的 keep 选项跳过](http://proguard.sourceforge.net/index.html#manual/usage.html)`<create>`您和`<include>`DWR.xml中的 DWR 类/方法的混淆。要尝试手动混淆，您可以为 Javascript 调用程序文件和 Java 类文件使用不同的名称，例如：

```
<create creator="new" scope="request" javascript="AAA">
  <param name="class" value="my.package.BBB">
</create> 
```

通常，AAA 和 BBB 会被类似地命名（为了代码可追溯性和代码可读性），但在上面它们被故意命名不同。

另一种看待这个问题的方法是，您应该混淆包含您的专有逻辑的类，并且不混淆管道类，这也有助于故障排除。

# php - 处于维护模式时出错

> ID：10077013
> 
> 赞同：0
> 
> 时间：2012-04-09T17:19:48.253
> 
> 标签：php, drupal, drupal-7

当我将基本的 drupal 7 网站置于维护模式时，它显示错误。

```
Catchable fatal error: Object of class stdClass could not be converted to string in /www/public_html/includes/theme.inc on line 2440 
```

我没有更改 theme.inc 文件，并且当站点未处于维护模式时，我没有收到此错误。正如错误所述，其中一个数组元素似乎是一个对象，而预期的是一个字符串。

任何调试的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-28T08:59:26.217

如果您使用的是 omega，请检查您是否有一个名为“user”的自定义区域。似乎维护模式将“用户”对象添加到变量数组中，如果您有一个“用户”区域，则无法正常工作。

删除或重命名“用户”区域，它应该可以再次工作。查看[tauno](https://www.drupal.org/u/tauno)评论 #1 了解更多信息：[https ://www.drupal.org/node/1936480#comment-7268482](https://www.drupal.org/node/1936480#comment-7268482)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T21:50:36.803

您最好的选择可能是`var_dump`您在该行 (2440) 上找到的对象。您可能需要`exit;`在那之后确保您可以看到输出。一旦你发现哪个对象是错误的类型（即 stdClass 应该是一个字符串，反之亦然），你可以向上追踪并找到它的设置位置。

如果您可以告诉我们您正在使用的确切 Drupal 版本或粘贴整个功能块，我们或许也可以缩小问题范围。

# tsql - TSQL top 1 参数赋值问题

> ID：10077016
> 
> 赞同：5
> 
> 时间：2012-04-09T17:20:02.307
> 
> 标签：tsql, subquery, user-defined-functions, mode

我正在尝试获取一组邮政编码（特定上传集中具有大多数条目的邮政编码）的 MODE 平均值。我想让它成为一个标量函数，而不是一个存储过程。

为什么会这样：

```
Select Top 1 LocationZip
from UploadSetZipCodeCount
where WorkOrderSet = 31
Order by ZipCount desc 
```

但不是这个：

```
Select @setbasezip= Top 1 LocationZip
from UploadSetZipCodeCount
where WorkOrderSet = 31
Order by ZipCount desc 
```

我的声明类型对于 LocationZip 字段是正确的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T17:23:24.447

只是一个语法问题......`select top 1`应该在变量赋值之前：

```
Select Top 1 @setbasezip = LocationZip
from UploadSetZipCodeCount
where WorkOrderSet = 31
Order by ZipCount desc 
```

# xcode4 - Xcode 上的 PhoneGap + JqueryMobile

> ID：10077017
> 
> 赞同：0
> 
> 时间：2012-04-09T17:20:07.487
> 
> 标签：xcode4, jquery-mobile, cordova

尝试初学者教程。

我脑子里有以下几点：

```
<script type="text/javascript" charset="utf-8" src="cordova-1.5.0.js"></script>
<linkrel="stylesheet"href="http://code.jquery.com/mobile/1.0.1/jquery.mobile1.0.1.min.css" />
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script> 
```

我的结果只是文本，没有 Jquery 移动样式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T17:26:03.530

你的移动css没有应用吗？该 CSS 链接无效。您在链接中缺少连字符 (-)：

这是正确的网址： [http ://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css](http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css)

# c++ - C++ 中包含保护的#ifndef 语法

> ID：10077025
> 
> 赞同：9
> 
> 时间：2012-04-09T17:20:47.260
> 
> 标签：c++, include-guards

我目前正在准备 CS 课程的期末考试，我遇到了一个关于 C++ #ifndef 语法的小问题（也许是大问题？）。

在将 #infndef 用作 #include 保护时，我已经查看了它的语法，并且网络上的大多数似乎都说：

```
#ifndef HEADER_H
#define "header.h"
...
#endif 
```

但是我班的教程幻灯片显示的示例如下：

```
#ifndef __HEADER_H__
#define "header.h"
...
#endif 
```

我想知道两者之间的区别是什么（如果有的话）。考试很可能会要求我写一个#include 守卫，我知道传统的智慧就是按照教授/导师所说的去做，但是如果在编译过程中存在差异，我想知道。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-09T17:21:36.477

通常的做法是两者都不做，并将包含保护**放在**头文件中，因为它减少了重复。例如：

**头文件.h**

```
#ifndef HEADER_H
#define HEADER_H

// Rest of header file contents go here

#endif 
```

确切地说，您用作宏名称的内容取决于您的特定编码标准。^(但是，C 和 C++ 标准中有各种微妙的规则阻止您使用以下划线1)开头的标识符，因此您应该避免使用`__HEADER_H__`，只是为了安全起见。

还值得一提的是，您应该选择不太可能与代码库中的任何其他内容发生冲突的内容。例如，如果您碰巧有一个`HEADER_H`在其他地方调用的变量（我意识到这不太可能），那么您最终会遇到一些令人愤怒的错误。

* * *

[1\. 参见例如 C99 标准的第 7.1.3 节。]

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-09T17:25:58.347

以双下划线开头的名称是为实现保留的，所以我建议不要`__SOMETHING`在你的包含保护中使用。此外，尝试选择不太可能发生冲突的名称。所以看来你们班的教程至少在两个方面是错误的。例如，请参阅这篇[幽默文章](http://punchlet.wordpress.com/2009/12/01/letter-the-second/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T17:23:20.950

如果您不在其他任何地方的变量名中使用下划线，则没有区别，这只是一种命名约定。

你只需要放一些独特的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T17:35:47.057

将包含保护放在包含头文件的文件中而不是头文件本身的一个论点是，如果文件已经被包含，则编译器（特别是预处理器）不必再次打开并读取包含文件.

这是一个软弱的论点。在实践中，节省的时间是微不足道的，而且出错的可能性很大。

在您的示例中：

```
#ifndef HEADER_H
#include "header.h"
...
#endif 
```

你没有向我们展示`#define HEADER_H`. 它在某处`header.h`吗？如果是这样，你怎么知道作者`header.h`选择使用`HEADER_H`作为包含保护宏的名称？如果它稍后更改为其他内容怎么办？

*如果*您决定将包含保护放在包含文件中，您也应该在其中定义宏：

```
#ifndef HEADER_H
#include "header.h"
#define HEADER_H
#endif 
```

但是，正如其他答案已经说过的那样，将守卫放在标题本身要好得多：

**标头.h：**

```
#ifndef HEADER_H
#define HEADER_H
/* contents of header.h */
#endif 
```

然后包含简单地有：

```
#include "header.h" 
```

并且少了一条需要担心的信息。

# css - 与其余文本很好地定位

> ID：10077029
> 
> 赞同：0
> 
> 时间：2012-04-09T17:21:02.093
> 
> 标签：css

我想将一个`<img>`标签与我的其余文本很好地放在一个`<h1>`标签中。

我不知道该怎么做。填充移动文本和图像。

[http://jsfiddle.net/vUCr9/](http://jsfiddle.net/vUCr9/)这就是我所拥有的，我希望文本与图像很好地居中。

有人有什么好的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T17:23:36.930

指定`vertical-align`图像的 -ment：

```
h1 {
    font:35px 'Russo One', sans-serif;
}
​h1 img {
    vertical-align: middle;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/vUCr9/1/)。

参考：

*   [`vertical-align`](https://developer.mozilla.org/en/CSS/vertical-align).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T17:23:09.143

使用`position:relative`on`img`然后定位它`left: Xpx; top:Xpx`或其他，像这样：

```
img{
  position: relative;
  top: 6px;
  left: 4px;
} 
```

这是[jsFiddle](http://jsfiddle.net/kstsV/7/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T17:23:38.957

尝试：

```
h1 img{
    vertical-align:middle;
}
​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/vUCr9/2/)**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T17:26:20.610

```
<h1>HTML<img style="vertical-align:middle;" 
src="https://si0.twimg.com/profile_images/1730750300/HTML5_Badge_128_normal.png" 
alt="5" /> LOGO</h1> 
```

这是您可以使用内联样式修复它的方法

[jsfiddle.net/JZGAF](http://jsfiddle.net/JZGAF/)

# html - 用剪辑重复背景？

> ID：10077030
> 
> 赞同：0
> 
> 时间：2012-04-09T17:21:03.533
> 
> 标签：html, css, webkit

我有一个用于部分的背景，它以顶部雕刻的小箭头开始：

![在此处输入图像描述](../Images/db8b0abebfaa383faf960d93ec0ff49a.png)

但是，当它重复剪切顶部箭头部分时，我试图得到它，只是将纹理留在中间部分。我想知道是否可以使用 webkit 之类的东西来做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T17:41:29.107

You can't. You need to come up with another method of doing so. There are a number of ways to do this. Personally, I would use only the arrow, but use inner box-shadow for the shadows on everything else. This way you have smaller image being used, and it will always fit the size of the container.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T18:04:57.923

从指针分解背景图像并制作两个单独的精灵。您可以使用指针变得棘手，让它指向同一图像中的所有 4 个方向。这将允许您从源头向各个方向弹出气泡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T18:09:02.743

您不能在可用的精灵上同时重复 x 和 y。

我的项目中最多有三个精灵。

一个用于非重复元素，另一个用于重复-x，另一个用于重复-y。

我觉得这个`clip`属性几乎没用。

# php - PHP中如何区分两个多维数组？

> ID：10077031
> 
> 赞同：1
> 
> 时间：2012-04-09T17:21:06.390
> 
> 标签：php, arrays, loops, checkbox

我正在编写一个编辑表单，但我无法让您检查之前选中的复选框的部分正常运行。

例如，我在数据库中有一个包含五个项目的列表，我之前检查了其中两个并保存了表单。当我在表单上按编辑时，我需要再次获取：

```
[ ] Item 1
[X] Item 2
[ ] Item 3
[X] Item 4
[ ] Item 5 
```

我有两个数组：

*   `$amenities`数据库中的所有项目都在这里。

*   `$related`所有之前检查的项目都在这里。（在这种情况下，其中两个）

我如何遍历两个数组来比较它们，所以如果在`$related`中找到一个项目`$amenities`，它将打印选中的框，如果没有，它将打印未选中的框。这是我与该部分相关的代码。

**$amenities (print_r)**

```
 Array
(
    [0] => Array
        (
            [itemID] => 3
            [itemName] => Crema Chantilly
        )

    [1] => Array
        (
            [itemID] => 4
            [itemName] => Caribe Cooler
        )

    [2] => Array
        (
            [itemID] => 5
            [itemName] => Cacahuates Japoneses
        )

    [3] => Array
        (
            [itemID] => 6
            [itemName] => Cerveza Sol (lata)
        )

    [4] => Array
        (
            [itemID] => 7
            [itemName] => Chocolate derretido
        )

) 
```

**$相关（print_r）**

```
 Array
(
    [0] => Array
        (
            [itemID] => 3
            [itemName] => Crema Chantilly
        )

    [1] => Array
        (
            [itemID] => 4
            [itemName] => Caribe Cooler
        )

) 
```

如您所见，其中有两个项目`$related`匹配 中的两个项目`$amenities`。

我在这里尝试的是这样的：

```
<?php foreach ($related as $single) : ?>

    <?php foreach ($amenities as $amenity) : ?>

      <?php if ( $single === $amenity) : ?>

        <input type="checkbox" class="left" checked="yes" name="amenities[]" value="<?=$amenity['itemID']?>">
        <label class="checkbox"><?=$amenity['itemName']?></label>

       <?php else : ?>

        <input type="checkbox" class="left" name="amenities[]" value="<?=$amenity['itemID']?>">
        <label class="checkbox"><?=$amenity['itemName']?></label>

      <?php endif ?>

    <?php endforeach;?>

<?php endforeach;?> 
```

但是，对于完整的选项列表，结果是重复的。我得到这个：

```
[X] Item 1
[ ] Item 2
[ ] Item 3
[ ] Item 4
[ ] Item 5
[ ] Item 1
[ ] Item 2
[X] Item 3
[ ] Item 4
[ ] Item 5 
```

我需要得到

```
[X] Item 1
[ ] Item 2
[X] Item 3
[ ] Item 4
[ ] Item 5 
```

也许这很容易做到，但我不知道如何完成。也许我对两者采取了错误的方法`foreach`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T17:28:59.967

而不是在每个循环中写入检查它的存在并将其状态设置为已检查

```
<?php foreach ($amenities as $single) : ?>
<?php $strChecked = '';?>
    <?php foreach ($related as $amenity) : ?>

      <?php if ( $single === $amenity) : ?>
          <?php $strChecked = ' checked="checked"';break;?>

      <?php endif ?>

    <?php endforeach;?>

        <input type="checkbox" class="left" <?php echo $strChecked;?> name="amenities[]" value="<?=$amenity['itemID']?>">
        <label class="checkbox"><?=$amenity['itemName']?></label>
<?php endforeach;?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T01:35:16.547

如果你使用，你实际上可以用一个`foreach`循环来做到这一点[`in_array`](http://us2.php.net/manual/en/function.in-array.php)

```
<?php
    foreach ($amenities as $amenity) {
        $id = $amenity['itemID'];
        $name = $amenity['itemName'];
        $checked = in_array($amenity, $related) ? ' checked="checked"' : '';
        echo <<<HTML
        <input type="checkbox" class="left"$checked name="amenities[]" value="$id">
        <label class="checkbox">$name</label>
        <br>
HTML;
    }
?> 
```

如您所见，我还将`$amenity['itemID']`和的值存储`$amenity['itemName']`在变量中，以使 HTML 代码更易于阅读。

您还可以使用稍微复杂但更灵活的方法：

```
function filter_array_to_ids ($a) {
    return $a['itemID'];
}

// Get an array that contains the id of each item in the
// $related array
$checked_ids = array_map(filter_array_to_ids, $related);

foreach ($amenities as $amenity) {
    $id = $amenity['itemID'];
    $name = $amenity['itemName'];
    $checked = in_array($id, $checked_ids) ? ' checked="checked"' : '';
    echo 'checked = ' . $checked . '<br>';
    echo 'amenity = ' ; print_r($amenity); echo '<br>';
    echo <<<HTML
    <input type="checkbox" class="left"$checked name="amenities[]" value="$id">
    <label class="checkbox">$name</label>
    <br>
HTML;
} 
```

This code uses [`array_map`](http://us2.php.net/manual/en/function.array-map.php) to create an array that contains only the `itemID`s of items in the `$related` array and then searches for the current amenity's id in that array. This will allow you to find matching ids even if item in `$amenities` and the item in `$related` are not exactly the same (if one has extra members, etc).

# android - 使用 WCF REST 将数据从服务器推送到 android 应用程序

> ID：10077032
> 
> 赞同：1
> 
> 时间：2012-04-09T17:21:14.360
> 
> 标签：android, wcf, rest, push-notification

我需要开发一个 ANDROID 客户端，它将与运行 WCF REST 服务的服务器进行通信。

由于我在这方面的经验有限，我正在寻找解决方案：

*   将数据推送到安卓设备（客户端需要服务器不断更新）
*   在服务器上调用方法（反射）

欢迎任何想法/提示/样品！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T17:57:48.370

对于推送通知，请查看 Google 的[C2DM](http://code.google.com/android/c2dm/)框架（云到设备消息传递）。它适用于 Android 2.2 及更高版本。

基本上，手机将与谷歌的服务器保持一个开放的套接字，当你想将数据推送到设备时，你从你的网络应用程序向谷歌发布一个请求（你可能会使用来自 .NET 的[System.Net.WebRequest](http://msdn.microsoft.com/en-us/library/debx8sh9.aspx) ，例如例如），其余的由他们处理。

有关从您的 Android 应用程序进行设置的更多信息，请参阅[本教程](http://blog.mediarain.com/2011/03/simple-google-android-c2dm-tutorial-push-notifications-for-android/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T17:50:09.510

WCF 没有任何推送通知 API，除了带有回调通道的双工消息传递，但这不适用于 WCF 4 中的 REST 服务。在 WCF 中，通过 HTTP 的任何类型的客户端通知都基于轮询 - 您可以使用[类似 Comet 的方法](http://www.codeproject.com/Articles/186723/Push-Messages-in-RESTful-WCF-Web-Application-with)进行长轮询间隔。

在 WCF 4.5 中，您将能够通过 HTTP 使用 WebSockets 和回调通道，但对[REST 的支持再次取决于您](http://blogs.microsoft.co.il/blogs/idof/archive/2012/03/06/what-s-new-in-wcf-4-5-websocket-support-part-2-of-2.aspx)。

# python - 防止 MySQL-Python 在数据库名称参数周围插入引号

> ID：10077046
> 
> 赞同：6
> 
> 时间：2012-04-09T17:22:18.693
> 
> 标签：python, mysql, django, mysql-python

我正在做一个项目，该项目需要我从 django 应用程序以编程方式创建 MySQL 用户。我可以很好地创建用户：

```
from django.db import connection, transaction
cursor = connection.cursor()
cursor.execute("CREATE USER %s@'%'", 'username')
cursor.execute("SET PASSWORD FOR %s@'%' = PASSWORD(%s)", ('username', 'pass')) 
```

这完美无缺。问题是当我尝试授予权限时。数据库名称也以编程方式确定：

```
cursor.execute("GRANT SELECT ON %s.* TO %s@'%'", ('dbname', 'username')) 
```

这会导致 mysql 错误，因为当它进行字符串替换时，它会在数据库名称周围放置单引号，这在语法上是不正确的：

> DatabaseError: (1064, "您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便在第 1 行的 ''dbname'.* 到 'username'@'%'' 附近使用")

如何防止在`%s`for 数据库名称周围添加单引号？我知道我可以简单地在 Python 中进行字符串替换并修复这个问题，但这可能会导致 SQL 注入漏洞。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T17:30:40.020

有时占位符不起作用（正如您发现的那样），因此您必须使用字符串连接。小心 - 验证字符串，确保它仅由您期望的字符组成（不要只查找您不期望的字符），并且您应该没问题。还要让另一位开发人员检查您的代码，并对其进行注释以确保没有其他人认为您应该使用占位符。

# c - 在 linux 中从 tar.gz 创建 exe 文件

> ID：10077051
> 
> 赞同：0
> 
> 时间：2012-04-09T17:22:49.143
> 
> 标签：c, ubuntu, gtk

我设法从源程序 tar.gz 创建了一个 .deb 文件

我怎样才能创建一个 exe 文件，以便该应用程序也可以在 Windows 上运行？我搜索了很多，但没有设法找到任何资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T17:43:30.527

如果要在 Windows 下运行程序，则需要使用 Windows 编译器从源代码重新编译它。如何准确地重新编译它会因程序而异。检查程序的文档以获取详细信息或询问其维护者。“.deb”文件以及与 Linux 包管理器相关的任何其他文件在 Windows 中没有任何意义，因此您需要从源 .deb 中提取源代码或从适当的源代码库中提取它。

请注意，仅通过简单的重新编译，许多 Linux 程序不会为 Windows 构建。如果他们使用任何外部库，那么这些库也需要可用于 Windows。Cygwin 环境在这里可能会有所帮助。如果还没有在 Windows 下构建该特定程序的官方程序，那么您可能必须自己进行移植工作（这是一项足够大的任务，远远超出了这个问题的范围）。

# android - make -jN 的“N”与 CPU 内核之间的关系？

> ID：10077053
> 
> 赞同：1
> 
> 时间：2012-04-09T17:23:09.193
> 
> 标签：android, makefile, android-build

对于 Android 源代码构建（或任何其他 Linux 内核源代码）的最佳构建时间，CPU 架构（双核、四核）如何负责。是否有任何公式？这取决于处理的线程数每个核心？对于具有**n 个**cpu 的机器，每个核心都有**m**个核心，每个核心都具有处理**w**个线程的能力？**n,m**和**w**？与 make -jN 的“N”的任何关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T17:31:20.277

我通常遵循的经验法则（我并不是说这是正确的或最适合所有目的）是使用核心数 + 1 作为 -j 的参数（假设有足够的内存）。因此，在您的示例中，这将导致 n 和 m 加 1 的乘积：

```
make -j$(($n * $m + 1)) 
```

# node.js - nodejs - 依赖项（非常基本的一个） - express - > 它是 nodejs 或插件的一部分

> ID：10077058
> 
> 赞同：1
> 
> 时间：2012-04-09T17:23:16.337
> 
> 标签：node.js

我对学习 node.js 和 now.js 非常感兴趣。在尝试学习 node.js 时，我发现了这个[http://expressjs.com](http://expressjs.com)。这是我应该学习的 node.js 的一部分还是类似于插件的东西？我们可以简单地使用这个创建服务器：

```
 var http = require('http');
      http.createServer(function (req, res) {
        res.writeHead(200, {'Content-Type': 'text/plain'});
        res.end('Hello World\n');
       }).listen(1337, '127.0.0.1');
      console.log('Server running at http://127.0.0.1:1337/'); 
```

那么有些人用那个快递？有什么区别 ？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T17:34:47.830

Express 用于 Web 开发，而 Node.js 用于任何服务器端 javascript。

您可以查看 Express.js 指南，它会告诉您更多信息： [http ://expressjs.com/guide.html](http://expressjs.com/guide.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T20:40:47.733

Express JS 再次成为 Node JS 路由请求的糖层或实用模块。截至目前，它不是可安装的节点的一部分。但除此之外，它还有一些其他功能，例如（根据网站）-

*   > 强大的路由 重定向助手 动态视图助手 应用程序
    > 级视图选项 内容协商 应用程序安装 专注于
    > 高性能 视图渲染和部分支持 基于环境
    > 的配置 基于会话的闪存通知 建立在
    > Connect 可执行以快速生成应用程序 高测试
    > 覆盖率

[http://expressjs.com/](http://expressjs.com/)

# opencv - 在 mac os X 10.6.8 上安装 openCV 2.3.0 / 2.3.1 时出错

> ID：10077064
> 
> 赞同：0
> 
> 时间：2012-04-09T17:23:27.773
> 
> 标签：opencv, osx-snow-leopard

两天以来，我一直在尝试在我的 mac 10.6.8 雪豹上安装 OpenCV 2.3.0 或 2.3.1。我按照以下命令

```
$ cd /Users/ateendra/Desktop/OpenCV-2.3.0/  
$ mkdir build  
$ cd build/  
$ cmake -D CMAKE_OSX_ARCHITECTURES=i386 -D CMAKE_C/CXX_FLAGS=-m32 ..  
$ ccmake .  
$ make -j8  
$ sudo make install 
```

现在我收到以下错误

```
 /Users/ateendra/Desktop/OpenCV-2.3.0/modules/highgui/src/grfmt_exr.hpp:83: error: reference to ‘PixelType’ is ambiguous  
/System/Library/Frameworks/ApplicationServices.framework/Frameworks/QD.framework/Headers         /QuickdrawTypes.h:193: error: candidates are: typedef SInt8 PixelType  
/opt/local/include/OpenEXR/ImfPixelType.h:49: error: enum Imf::PixelType  
/Users/ateendra/Desktop/OpenCV-2.3.0/modules/highgui/src/grfmt_exr.hpp:83: error: ‘PixelType’ does not name a type  
make[2]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/src/loadsave.o] Error 1  
make[1]: *** [modules/highgui/CMakeFiles/opencv_highgui.dir/all] Error 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T21:40:39.127

好吧，这是在mac os下编译opencv的一个常见问题，尽管通常可以通过稍微修改opencv源来解决。（我两次遇到这个问题，而且我总是稍微更改源代码以使所有内容都可以编译）。

但是，我上次安装 opencv 时，我刚刚使用了 brew：

```
brew install opencv 
```

没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T18:30:17.803

我已经设法在 OSX 10.6.8 上安装了 OpenCV 2.3.1，但我已经使用[MacPorts](http://www.macports.org/)完成了它，（我推荐它，因为它为你处理依赖项和构建）：

1.  确保您已安装 Apple 开发人员工具（或至少安装了带有命令行工具的 XCode）
2.  安装 MacPorts（如果您还没有这样做的话）
3.  通过 MacPorts 安装 OpenCV：

    须藤端口安装opencv

有关更多详细信息，请参阅[wiki 上的通过 MacPorts 构建](http://opencv.willowgarage.com/wiki/Mac_OS_X_OpenCV_Port)。

我还必须提到我确实遇到了[一个错误](https://trac.macports.org/ticket/32493)，但那是因为以前存在的 dylib 在错误的位置。

# iphone - 当新的推送通知到达时重新加载 UIWebView

> ID：10077065
> 
> 赞同：0
> 
> 时间：2012-04-09T17:23:30.063
> 
> 标签：iphone, objective-c, xcode

我对 Objective-C 编程相当陌生，但很努力:-)。我正在开发一个有 2 个 UIWebViews 的小应用程序（通过 2 个工具栏按钮访问）。

我已经实现了推送通知服务，一切正常......

我现在想做的是在收到新的推送通知时重新加载 UIWebView。我猜它应该在我的 AppDelegate.m 中：

```
- (void) application:(UIApplication *) application didReceiveRemoteNotification:(NSDictionary *) userInfo { 
```

我想做类似的事情：

```
[FirstUIWebView reload]; 
```

但我不知道如何从 appdelegate 控制视图..

您的帮助将不胜感激..

罗曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T17:32:39.343

您可以`UIViewController*`在 appDelegate 类中拥有一个属性，该属性引用包含`UIWebView*`视图对象的控制器。控制器将公开`IBOutlet UIWebView*`引用视图的属性。

然后您可以从 appDelegate 方法调用 reload ，`UIWebView`例如：

```
[webViewController.webView reload] 
```

# iphone - iPhone 表格视图列表文件名？

> ID：10077071
> 
> 赞同：0
> 
> 时间：2012-04-09T17:24:02.387
> 
> 标签：iphone, xcode, nsstring, nsarray, tableview

我的应用程序中有一个名为“文件”的文件夹。我想在表格视图中显示所有这些 TXT 文件，然后能够单击每个文件以在不同的控制器中打开它。我有它所有的功能，但问题在于表视图上列出的名称。它给出了 TXT 文件的整个工作路径，而我只需要文件名。我知道 NSString 可以使用 lastComponentPath 代码行来返回它，但单元格文本不能来自 NSString。那么，如何让它返回文件名，并在表格视图中正确列出呢？这是我当前的代码：

```
NSBundle *bundle = [NSBundle mainBundle];
self.files  = [bundle pathsForResourcesOfType:@"txt" inDirectory:@"Files"];
NSString *documentsDirectoryPath = [self.files objectAtIndex:thepath.row];
self.title = @"My Files";
self.filenames = [[documentsDirectoryPath lastPathComponent] stringByDeletingPathExtension]; 
```

对于单元格内容，它是：

```
cell.textLabel.text = [self.files objectAtIndex:indexPath.row]; 
```

因此，我尝试输入 self.filenames 但 NSString 不会响应 indexPath.row。那么，如何从 self.files 数组加载文件，但从 self.filenames 字符串中显示名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:44:55.310

您应该在`cellForRowAtIndexpath:`方法中转换文件名。

```
NSString *filename = [[[self.files objectAtIndex:indexPath.row] lastPathComponent] stringByDeletingPathExtension];
cell.textLabel.text = filename; 
```

这样，每次渲染单元格时，它都会访问数组中的正确对象并根据您的需要操作值。

# javascript - 将 div 附加到网页 - 使用 ajax 发布数据

> ID：10077074
> 
> 赞同：2
> 
> 时间：2012-04-09T17:24:33.750
> 
> 标签：javascript, jquery, html, ajax

用户从下拉字段中选择一个州，然后 ajax 将该值发布到数据库，以检索位于该州的高中列表。

我还有其他字段询问他们的姓名和电子邮件地址。一旦用户选择了州，它就会检索相应的高中并显示一个包含这些高中的新下拉列表，这就是我遇到问题的地方，它复制了其他字段：姓名和电子邮件。

html

```
<form>
<div id="inquiry-form">
  name:
  email:
  state drop-down field
</div>

<div id="high-schools">
  high school drop-down field
</div>

submit button
</form> 
```

js

```
$(document).ready(function() {

  $('#state').bind('change', function() {
    var form_data = {
      state : $('#state').val(),
      ajax : '1'
    };

    $.ajax({
      url: '/recruiter-card/index.php/inquiry/index',
      type: "POST",
      data: form_data,
      success: function(msg) {
        $("#high-schools").html(msg);
      }
    });
    return false;
  });

}); 
```

我没有 jsfiddle ，这是选择状态后的屏幕截图，它复制了所有字段。

![在此处输入图像描述](../Images/8a53b59b36367e6237ae2b6a7bb713fc.png)

显示高中下拉列表并保持所有其他字段完整而不重复的最佳方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T17:31:23.730

我怀疑，ajax 返回包含的不仅仅是选择。尝试以下操作：

```
...
  success: function(msg) {
    $("#high-schools").html($(msg).find('#high-schools').html());
  }
});
... 
```

另请参阅[此示例](http://jsfiddle.net/yeRHS/2/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T17:32:31.347

有几种方法可以解决此问题。首先，您可以简单地更改后端代码以仅返回您不为其发送数据的表单部分。所以如果你发送一个状态，只返回状态之后的字段。您还可以使其依赖于额外的参数，例如`ajax=1`，因此您可以多种方式使用相同的后端脚本。

另一种方法是使用 jQuery 去除您想要/不想要的字段部分：

```
$(document).ready(function() {

  $('#state').bind('change', function() {
    var form_data = {
      state : $('#state').val(),
      ajax : '1'
    };

    $.ajax({
      url: '/recruiter-card/index.php/inquiry/index',
      type: "POST",
      data: form_data,
      success: function(msg) {
        $("#high-schools").html($(msg).filter("#high-schools").html());
      }
    });
    return false;
  });

}); 
```

# spring - 弹簧非单例控制器

> ID：10077076
> 
> 赞同：0
> 
> 时间：2012-04-09T17:24:37.507
> 
> 标签：spring

我正在构建一个基于 Spring 的应用程序，用于处理移动游戏应用程序的服务器端游戏管理。堆栈是 Spring/Hibernate/Jersey。我希望客户端（移动）调用 REST API 来更新/检索游戏状态。

我创建了一个`TournamentController`类，其职责是使用一些业务逻辑来更新锦标赛状态。此类旨在在每次需要对锦标赛进行操作时实例化，然后丢弃。

```
public class TournamentController {

    @Autowired
    private TournamentDAO tournamentDAO;

    private final Tournament tournament;

    public TournamentController( Tournament tournament ) {
        this.tournament = tournament;
    }

    public void startTournament() {
        if ( tournament.getState() != TournamentState.SETUP ) {
            throw new TournamentAlreadyStartedException();
        }

        tournament.setState( TournamentState.IN_PROGRESS );

        //... some other logic and calls to other DAOs

        tournamentDAO.save( tournament );
    }

} 
```

我还创建了一个`TournamentResource`类，它是锦标赛的 REST 前端。它的职责是做一些基本的验证（用户安全，...）和异常翻译。

```
@Path( "/tournament" )
@Component
@Scope( "prototype" )
public class TournamentResource {

    private static final Log log = LogFactory.getLog( TournamentResource.class );

    @Autowired
    private TournamentDAO tournamentDAO;

    @GET
    @Path( "{tournamentId}/start" )
    @Produces( MediaType.APPLICATION_JSON )
    @Transactional
    public TournamentDTO startTournament( @PathParam( "tournamentId" ) long tournamentId ) {
        Tournament tournament = tournamentDAO.getTournament( tournamentId, LockMode.PESSIMISTIC_WRITE );
        if ( tournament == null ) {
            throw new WebApplicationException( Status.NOT_FOUND );
        }

        try {
            TournamentController controller = new TournamentController( tournament );
            controller.startTournament();

        } catch ( TournamentAlreadyStartedException e ) {
            log.warn( "Could not start tournament " + tournamentId + " since it is already started." );
            throw new RestException( Status.BAD_REQUEST, "Tournament already started" );
        }

        return DTOConverterUtil.getTournament( tournament );
    }

} 
```

我正在使用 AspectJ 的加载时间编织。这是我的背景：

```
 <context:annotation-config />

   <!-- Make spring aware ANY pojo with the @Configurable annotation -->
   <context:spring-configured />

   <!-- Scan all classes in com.mdarveau for annotations -->
   <context:component-scan base-package="so.question" />

   <!-- Load Time Weaver -->
   <context:load-time-weaver weaver-class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver" aspectj-weaving="on" />

   <!-- DB config -->
   <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
      ...
   </bean>

   <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
      <property name="dataSource" ref="dataSource" />
      <property name="packagesToScan" value="com.mdarveau.fnp.model" />
      <property name="hibernateProperties">
         <value>
            hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect
         </value>
      </property>
   </bean>

   <bean id="txManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
      <property name="sessionFactory" ref="sessionFactory" />
   </bean>

   <!-- enable @Transactional -->
   <tx:annotation-driven transaction-manager="txManager" mode="aspectj" /> 
```

我的`TournamentResource`班级在设计上是一个单身人士，并且运作良好。

我的问题是，当它实例化`TournamentController`使用`new`而不是弹簧时，它的`@Autowired`属性似乎没有正确连接。我试图在上面添加`@Component`注释但没有成功。

我应该制作`TournamentResource` `ApplicationContextAware`和创造`TournamentController`贯穿弹簧吗？

这一定是一个相当普遍的问题。我看到很多后端是单例的示例，但我想避免将 传递`Tournament`给每个方法调用`TournamentController`（然后传递给 中的所有私有方法`TournamentController`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T17:31:50.860

由于您已经有加载时编织和`<context:spring-configured />`，您可以将您的声明`TournamentController`为`@Configurable`.

它将为`TournamentController`创建的实例启用自动装配`new`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T17:34:30.953

是的，您创建的任何东西`new`都不受 Spring bean 工厂的控制。打电话`new`意味着你独自一人。

我不确定您为什么`TournamentController`需要对`Tournament`. 你说这是一个 REST 前端。如果我理解正确的话，REST 是基于 HTTP 的，它是一种无状态协议。

我不确定您认为该`Tournament`实例来自何处。如果 Spring 将其实例化`TournamentController`，那么您应该在注释或 XML 配置中连接对相关锦标赛的引用。

我建议您将其设置为已连接的 Spring 资源，或者重新考虑您的设计以将其从 Controller 中删除。

# svg - 在 Raphael 2.1 中缩放 svg 路径

> ID：10077081
> 
> 赞同：3
> 
> 时间：2012-04-09T17:25:23.510
> 
> 标签：svg, raphael, transform, scale

我正在使用来自美国 wikimedia commons 地图的 SVG 路径。我已经挑出了宾夕法尼亚州及其县。我正在从数据库中输入路径并使用 Raphael 2.1 将它们放在页面上。

因为在原始地图中，宾夕法尼亚州是如此之小并且有一个角度，所以我想放大路径并旋转 Pa. 使其不在一个角度上。

当我尝试使用拉斐尔的变换方法时，所有的县看起来都很奇怪并且重叠。

当我听说它不适用于所有浏览器时，我放弃了设置 viewBox。

有人有想法么？

这是我的代码：

```
$(document).ready(function() {
    var $paths = []; //array of paths
    var $thisPath; //variable to hold whichever path we're drawing
    $.post('getmapdata.php', 
      function(data){
        var objData = jQuery.parseJSON(data);

        for (var i=0; i<objData.length; i++) {
             $paths.push(objData[i].path);
             //$counties.push(objData[i].name);
        }//end for
        drawMap($paths);
    })

   function drawMap(data) {
      // var map = new Raphael(document.getElementById('map_div_id'),0, 0);
      var map = new Raphael(0, 0, 520, 320);
       //map.setViewBox(0,0,500,309, true);

       for (var i = 0; i < data.length; i++) {
         var thisPath = map.path(data[i]);
        thisPath.transform(s2);
        thisPath.attr({stroke:"#FFFFFF", fill:"#CBCBCB","stroke-width":"0.5"});

    } //end cycling through i 

    }//end drawMap

});//end program 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:55:06.727

您可能想尝试[这里](https://github.com/DmitryBaranovskiy/raphael/issues/376)提到的 setViewBox 解决方法（适用于 IE8 和更早版本）。所有其他浏览器都应该完全能够处理 setViewBox。

# vba - VBA：删除具有特定值的行

> ID：10077084
> 
> 赞同：4
> 
> 时间：2012-04-09T17:25:45.263
> 
> 标签：vba, excel, delete-row

我正在尝试编写一个宏来删除A列中所有具有“True”的行。

这是我到目前为止所拥有的：

```
Sub deleteBlankRows3()
Dim lastrow as Long
Dim x as Long

lastrow = 4650
For x=8 to x=lastrow
    If (Range("A1").Offset(x,0) = True) Then
    Range("A1").Offset(x,0).EntireRow.Delete
    x = x + 1
End if
Next x

End Sub 
```

我说不出有什么问题！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T18:33:27.343

I know you have already got what you were looking for. However, still here is another method using `Autofilter`. This is much faster than looping through each row and checking for the value.

```
Sub Sample()
    Dim lastRow As Long

    With Sheets("Sheet1")

        lastRow = .Range("A" & Rows.Count).End(xlUp).Row

        '~~> Remove any filters
        .AutoFilterMode = False

        '~~> Filter, offset(to exclude headers) and delete visible rows
        With .Range("A1:A" & lastRow)
            .AutoFilter Field:=1, Criteria1:="TRUE"
            .Offset(1, 0).SpecialCells(xlCellTypeVisible).EntireRow.Delete
        End With

        '~~> Remove any filters
        .AutoFilterMode = False
    End With
End Sub 
```

HTH

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T17:28:51.223

这里可能有三件事在起作用。

首先，如果您正在测试基础值的等价性，您应该明确查看单元格的值：

```
If (Range("A1").Offset(x,0).Value = True) Then 
```

不用说.Value，我认为默认情况下单元格返回它的 Text 属性，用于针对非范围属性的等价测试。

其次，您的单元格可能包含字符串“True”，而不是值`True`，因此请尝试使用

```
If (Range("A1").Offset(x,0).Value = "True") Then 
```

最后，如果你真的找到了一行，然后删除了它，那么你实际上会跳过一行，因为被删除的行之后的所有行都会向下移动（第 5 行变成第 4 行，等等），但你**也**只是增加了 x，因此您将在删除每一行之后立即跳过该行。要解决此问题，请按降序循环：

```
For x=lastrow to 8 step -1 
```

或者如果您刚刚删除了一行，则不要增加 x：

```
If (Range("A1").Offset(x,0).Value = "True") Then
    Range("A1").Offset(x,0).EntireRow.Delete
Else
    x = x + 1
EndIf 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T17:29:24.073

如果没有测试，你最好这样：

```
 For x=lastrow to 8 step -1
        If (Range("A1").Offset(x,0) = True) Then 
           Range("A1").Offset(x,0).EntireRow.Delete 
        End if 
   Next 
```

Counting up has an issue that if you delete one row all rows after it move up as well causing your loop not to look at all rows. And since you add 1 to the x in those cases you made it even worse. -1 would have been better except that then you still check 4650+number_of_deleted_rows in total which might lead to other problems. By starting at the end and move towards the start you prevent both those issues.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T18:02:00.533

The problem is that the algorithm is incorrect. Classic case for the corrupted loop variable. The problem is that the variable that the loop is dependent on gets modified, as such it is wrong.

The correct way to do it is this way.

```
Dim x as integer
x = 8
do
   if (Range("a1").Offset(x, 0) = True) Then
       Range("a1").Offset(x, 0).EntireRow.Delete
   Else
       x = x + 1 'We only increase the row number in the loop when we encounter a row that is false for containing true in cell a1 and their offsets
   End If
Loop Until (x > 4650) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-16T18:08:48.040

I had hidden lines and didn't want to unhide them which the filtering method does. Also didn't want to loop through every line so here's my 10c.....

```
Sub DelError()
    Dim i As Integer
    Dim rngErrRange As Range
    With ActiveSheet
        Do
            Set rngErrRange = .Columns("A:A").Find(What:="#REF!", _
                After:=.Cells(1), LookIn:=xlFormulas, _
                LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                MatchCase:=False, SearchFormat:=False)
                If Not rngErrRange Is Nothing Then
                    rngErrRange.EntireRow.Delete
                Else
                    End
                End If
        Loop
    End With
End Sub 
```

# javascript - 更改表单中所有输入的 DIV 背景颜色

> ID：10077087
> 
> 赞同：0
> 
> 时间：2012-04-09T17:25:48.817
> 
> 标签：javascript, jquery, input, keyup

我有一个包含 20 个输入字段的表单。每个输入字段都在一个 DIV 内。我有一个脚本，它通过 keyup 函数以及其他两个 DIV 标签更改 DIV 的背景颜色。

不是为每个 DIV 和输入复制脚本 20 次，是否可以重新编写脚本来执行所有 DIV 及其输入？

```
$(document).ready(function(){
    $("#id").keyup(function() {
       if($("#id").val().length > 0) $("#in1, #nu1, #lw1, #id").css("background-color","#2F2F2F").css("color", "#FFF");
       else {
 if($("#id").val().length == 0) $("#in1, #nu1, #lw1, #id").css("background-color","#E8E8E8").css("color", "#000");
       }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T17:46:16.457

如果您希望所有 div 一次更改颜色，这里的其他答案是正确的，但我不知道这就是您所要求的。

我的假设是你有多个这样的代码：

```
<div>
   <input>
</div> 
```

而当输入长于 0 时，你希望容器 div 改变颜色。如果是这样，您可以这样做：

首先，给 div 一个通用类，例如`input-div`：

```
<div class="input-div">
   <input>
</div> 
```

创建 CSS 类：

```
.input-div {
    color: #000;
    background-color: #E8E8E8
}
.highlight {
    color: #FFF;
    background-color: #2F2F2F
} 
```

然后，使用 jQuery 调用为每个案例应用/删除突出显示类：

```
$(".input-div input").keyup(function() {
   // Get parent div
   var myParent = $(this).parent('.input-div');

   // If input length is > 0, highlight the parent
   if($(this).val().length > 0) {
       myParent.addClass('highlight');
   } else {
       myParent.removeClass('highlight');
   }
}); 
```

你不需要额外的`if`，因为如果长度不是`> 0`，它就是`== 0`。如果你想让其他 div 也改变颜色，你需要给它们一个 class/id，或者知道它们相对于`input-div`. 如果没有看到您的 html，我无法帮助您。

演示：http: [//jsfiddle.net/QB52B/](http://jsfiddle.net/QB52B/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T17:41:14.963

## Normal jQuery Approach

Here are my suggestions for a normal jQuery approach. We can clean up the code a whole bunch using these basic ideas.

1.  Use @Adil's solution to add a class to reference all of your inputs at once or even just `$("input[type=text]")` or whatever.
2.  Use a `.toggleClass()` to handle the styling!

Example JS:

```
var $inputs = $("input[type=text]"); // or replace with className
$inputs.keyup(function() {
   var $this = $(this);
   $this.toggleClass("isEmpty", $this.val().length > 0)
}); 
```

Example CSS:

```
input[type=text] { /* or replace with className */
  color: black;
  background: gray;
}

.isEmpty {
   color: gray;
   background: black;
} 
```

This keeps your styling in your stylesheet where they belong. `toggleClass` also keeps your code cleaner.

## Pure CSS Approach

If you ever get to drop older browsers and want to use pure CSS styling it shouldn't be much a stretch as it seems you're doing something like this. Check out this [article on css-tricks about styling placeholder text](http://css-tricks.com/snippets/css/style-placeholder-text/):

```
::-webkit-input-placeholder {
   color: gray;
   background: black;
}

:-moz-placeholder {
   color: gray;
   background: black;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T17:30:23.760

向输入添加一个类并将#id 替换为.classname。这些方面的东西：

```
$(".classname").keyup(function() {
if($(this).val().length > 0) $(this).parent().css("background-color",
 "#2F2F2F").css("color", "#FFF");
 else {
 if($(".classname").val().length == 0) $(this).parent().css("background-color",
 "#E8E8E8").css("color", "#000");
}

}); 
```

# android - 多行多样式按钮

> ID：10077089
> 
> 赞同：0
> 
> 时间：2012-04-09T17:25:53.990
> 
> 标签：android, button

您好我正在尝试重新创建此按钮样式，更具体地说是“查看篮子”按钮。[waitrose 应用程序](http://pictures.recombu.com/news/M15358/1317397518_w670.jpg)按钮需要有多行文本，每行具有不同的文本大小和字体颜色等。

这是到目前为止的代码。我已经创建了按钮并正确显示，但是当您单击它时，按下的状态不起作用。我哪里错了。提前致谢。

xml按钮文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" 

    android:state_pressed="true"
    android:state_focused="true"
    android:background="@drawable/button_bg" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Some Text"

    android:state_pressed="false"
    android:state_focused="false"
        android:textColor="#ffffff" />

     <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Some Text"

    android:state_pressed="false"
    android:state_focused="false"
        android:textColor="#ffffff" />

</LinearLayout>

java file code:

    package com.buttons2;

    import com.buttons2.R;

    import android.app.Activity;
    import android.os.Bundle;
    import android.widget.Button;

    public class Buttons2Activity extends Activity {
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            Button button = (Button) findViewById(R.id.button1);
            setContentView(R.layout.button);

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T19:04:12.287

我认为您可能需要编写一些代码来处理对文本和图像的点击，并使用它来专门设置主容器视图的选择/未选择状态（它显示正确的按下按钮状态）。

# hibernate - org.hibernate.annotations.Entity 没有被 Hibernate 3.6 拾取

> ID：10077091
> 
> 赞同：0
> 
> 时间：2012-04-09T17:25:54.597
> 
> 标签：hibernate, orm, jpa-2.0, hibernate-annotations

我正在使用休眠 3.6.7

我正在使用带注释的类。我的课程使用 org.hibernate.annotations.Entity 进行了注释。

使用 configuration.addAnnotatedClass() 方法将类添加到配置中。

Hibernate 似乎没有接受它。

如果我使用标准的 jpa Entity 注释，东西就可以正常工作。

我错过了什么？我知道随着更新注释的出现，这些类在 Hibernate 4.x 版本中已被弃用，以配置动态插入和动态更新等内容。

我没有使用任何 XML 配置文件。我正在使用属性文件设置配置并使用 java api。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T17:47:16.217

`@org.hibernate.annotation.Entity`旨在为带有注释的实体提供附加属性`@javax.persistence.Entity`。它不会自行将类变成带注释的实体。

# iphone - 如何将我的 Pickerview 选择转移到第二个视图控制器上的输出标签？

> ID：10077096
> 
> 赞同：0
> 
> 时间：2012-04-09T17:26:13.887
> 
> 标签：iphone, ios, xcode, uipickerview

我有 2 个视图控制器，第一个带有一个按钮（带我到 pickerview 视图控制器）和一个输出标签，第二个带有一个 pickerview（我使用 NSMutableArray 填充了选择）和一个​​完成按钮。一旦我在选择器视图中进行了选择并单击了完成按钮，我如何获得在第一个视图控制器的输出标签中显示的选项？希望这是有道理的，我对此很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T17:31:41.640

如果我理解正确，听起来您单击 View1 上的按钮并使用pickerview 进入 View2。然后，您希望在 View1 的标签中显示选取器视图中的选择。

如果是这样，您应该使用委托。制作 View1 View2 的委托，然后在点击完成后让 View2 与委托进行通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T17:38:46.450

[http://www.techotopia.com/index.php/An_iOS_4_iPhone_UIPickerView_Example](http://www.techotopia.com/index.php/An_iOS_4_iPhone_UIPickerView_Example)

# iphone - 升级 iPhone 应用程序

> ID：10077097
> 
> 赞同：0
> 
> 时间：2012-04-09T17:26:18.737
> 
> 标签：iphone, new-operator

我目前在 App Store 上有我的 iPhone 应用程序的第一个版本 (1.xx)。我之前更新过，从来没出过问题。但是，我即将将它更新到版本 2，并且因为我从头开始重新编写它，所以我在一个新的 Xcode 项目中启动它。

第 2 版在我的手机上运行良好，但是当我从 App Store 下载第 1 版，然后在此基础上安装第 2 版时，它在启动时立即崩溃。我的意思是立即，电话永远不会离开 Springboard。

我做了一点挖掘，有人建议在 iPhone 模拟器中尝试一下。它实际上在模拟器中运行良好。我只想 100% 确定这不会成为人们升级的问题。

以前有人遇到过这个问题吗？如果是这样，当您将其发布到 App Store 时是否还好？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T17:37:49.220

你在使用 CoreData 吗？如果您没有对数据模型使用某种版本控制，并且自版本 1 起对其进行了更改，您的应用程序将会崩溃。最好的办法是将旧模型复制到新项目中并创建一个新版本。这将帮助 CoreData 将信息从旧数据模型迁移到新数据模型中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T21:15:01.390

只是为了跟进，一旦它被批准并在 App Store 上可用，它就可以正常安装了。

# java - 使用类方法而不是构造函数为 JInternalFrame 创建 GUI

> ID：10077098
> 
> 赞同：0
> 
> 时间：2012-04-09T17:26:20.063
> 
> 标签：java, jinternalframe, jdesktoppane

字幕可以吗？“使用类方法而不是构造函数为 JInternalFrame 创建 GUI。”

我在 DesktopPane 中有一个带有各种 JButton 的 JInternalFrame。根据用户操作，将执行来自另一个类的方法。每种方法都有自己的 GUI 和其他 JButton。我试图找出一种在我的 DesktopPane 中启动方法的方法。

谢谢

# android - 从多个 HTTP 消息更新/创建 ListView

> ID：10077100
> 
> 赞同：0
> 
> 时间：2012-04-09T17:26:22.420
> 
> 标签：android, http, android-listview, android-asynctask

我有一个使用 WCF REST 服务的 Android 移动应用程序，该服务发送回任意大量数据。服务以块的形式发送这些数据。在块的末尾有一个指示符，表明还有更多，如果该指示符被传递回服务，则发送下一个块。

该数据被放入应用程序的 ListView 中。我想要做的是调用服务循环并使用处理程序在数据到来时更新列表视图。

我有几个问题：

我需要循环 AsyncTask 还是在 AsyncTask 中循环？

和

最好在数据进入时更新 ListView 还是获取所有数据然后用所有数据更新 ListView？

对这些问题的任何答案或对此过程的见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T17:32:32.467

-AsyncTask 更适用于快速的一次性操作。将一些记录插入数据库，发送查询，触发简短的 HTTP 请求（例如，ping 服务器）。它并不真正适用于较长的过程，例如从服务器下载大量数据。在这种特殊情况下，我会跳过 AsyncTask 并创建一个后台工作线程。当有工作要做时向线程发送一个唤醒呼叫，让它在其余时间休眠。

- 最好是增量更新还是一次性更新列表视图会因应用程序的类型而异，但通常增量更新会带来更好的体验，因此用户会有一定的进步感。

# ruby-on-rails-3 - Rails 3 中的单点登录，无需对用户部分进行任何额外工作？

> ID：10077104
> 
> 赞同：1
> 
> 时间：2012-04-09T17:26:37.787
> 
> 标签：ruby-on-rails-3, omniauth, single-sign-on

我有一个内置在 rails 3 中的应用程序，目前正在使用 authlogic 进行身份验证。我有另一个用 php 构建的站点，我可以从 php 应用程序中访问我的 rails 3 应用程序，就像在 iframe 中一样。

我想知道我是否可以允许用户登录我的 php 应用程序，当他们在 iframe 中导航到我的 rails 3 应用程序时，他们会自动登录到我的 rails 3 应用程序？

我已经研究过使用 OmniAuth，但是我看到的所有示例都涉及第三方服务，例如它对其进行身份验证的 twitter，并且用户需要单击一系列按钮来建立身​​份验证关系。我想要的是 php 应用程序在尝试访问 iframe 中的 rails 3 应用程序并使用它来创建用户或登录现有用户时基本上发送 uid 和秘密或类似性质的东西。这听起来是否合理？有没有更简单的方法可以在不通过第三方服务进行身份验证的情况下进行单点登录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T17:30:46.850

将 OmniAuth 与 Identity 策略一起使用：

[https://github.com/intridea/omniauth-identity](https://github.com/intridea/omniauth-identity)

# javascript - 模拟内容可编辑 div 中的光标键（左、右、下、上箭头）？

> ID：10077106
> 
> 赞同：3
> 
> 时间：2012-04-09T17:26:42.997
> 
> 标签：javascript, cursor, contenteditable, caret, rangy

是否可以模拟内容可编辑 div 上的箭头键？我试图触发“按键”事件，但似乎 contenteditable 忽略了它们。（我只需要一个 webkit/safari 解决方案）

我只需要像箭头键一样在 div 内移动插入符号，但是以编程方式。

也许 Tim Down 的 Rangy 库可以提供帮助？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T23:47:15.270

这很棘手，因为通常不可能完全模拟关键事件。具体来说，在大多数浏览器中，在没有发生实际击键的情况下，不可能触发键事件的默认浏览器操作。

在这种情况下，您必须手动完成，这很复杂。箭头键作用于页面上的可见文本，这意味着您需要考虑折叠空格、隐含的换行符`<br>`和块元素、通过 CSS`display`属性隐藏的元素以及许多其他细微之处。此外，模拟向上和向下箭头键依赖于获取页面上任意字符的精确像素坐标，这在大多数浏览器中并非易事。

我正在研究一种在 Rangy 页面上浏览可见文本的方法，这将有助于模拟左右箭头键，但 Rangy 无法使用向上和向下箭头键。

# html - Google Chrome 错误的 Flash 对象大小

> ID：10077107
> 
> 赞同：0
> 
> 时间：2012-04-09T17:26:44.830
> 
> 标签：html, flash, google-chrome

你好吗？

因此，多年来该网站（它是一种 CMS）一直运行良好，但大约 3 天前，整个网站中的所有 flash 对象都是 300px X 150px。但它只发生在谷歌浏览器中，在所有其他浏览器中它都可以正常工作！

它将如何修复？看一下对象的代码：

```
<object >

                <param name='wmode' value='transparent' />

                <param name='movie' value='topo.swf'/>

                <param name='quality' value='high'/>

                <param name='FlashVars' value=''/>

                <embed src='topo.swf' width='970' height='21' wmode='transparent'>

                </embed>

            </object> 
```

抱歉英语不好，再次感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T18:34:58.070

您是否尝试将宽度和高度添加到对象标签？像这样

```
<object width='970' height='21'>
<param name='wmode' value='transparent' />
                <param name='movie' value='topo.swf'/>
                <param name='quality' value='high'/>
                <param name='FlashVars' value=''/>
                <embed src='topo.swf' width='970' height='21' wmode='transparent'>
                </embed>
</object> 
```

# wpf - 模板化 wpf 控件中的内容对齐和定位

> ID：10077110
> 
> 赞同：4
> 
> 时间：2012-04-09T17:27:14.143
> 
> 标签：wpf, templates, location

我是一名专业的 VB.NET 和 C# 与 Windows 窗体的 Windows 应用程序开发人员，现在非常高兴能够涉足 WPF 开发。这是我无法通过搜索解决的第一个问题：

我编写了以下模板来完全改变按钮的外观：

```
 <ControlTemplate TargetType="{x:Type Button}" x:Key="ImageButtonTemplate">
        <Grid>
            <Image Name="img" Source="/PSPlayer;component/Images/Buttons/ButtonNormal_normal.png"/>
            <ContentPresenter Stylus.IsTapFeedbackEnabled="False" Stylus.IsTouchFeedbackEnabled="False" Stylus.IsPressAndHoldEnabled="False" Stylus.IsFlicksEnabled="False" Width="98" Height="61"/>
        </Grid>

        <ControlTemplate.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter TargetName="img" Property="Source" Value="/PSPlayer;component/Images/Buttons/ButtonNormal_MouseOver.png"/>
            </Trigger>
            <Trigger Property="IsPressed" Value="True">
                <Setter TargetName="img" Property="Source" Value="/PSPlayer;component/Images/Buttons/ButtonNormal_MouseDown.png"/>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate> 
```

这里有一个按钮定义：

```
 <Button Content="SomeText" Height="61" Margin="0,0,0,7" Name="button7" Width="98" Click="button7_Click" Template="{StaticResource ImageButtonTemplate}"/> 
```

问题是，文本“SomeText”出现在按钮的左上角，我无法更改该位置。按钮的属性 Horizo​​ntalContentAlignment 和 VerticalContentAlignment 没有显示效果（我想知道为什么）。

另外，有时我想将文本定位到某个位置，例如 x=70，当背景图像中有一个符号时，它位于左侧，直到 x=60。

我在按钮内嵌入了一个标签，我可以定位但认为必须有一个更清洁的解决方案。

希望我说清楚了。顺便说一句，WPF rulez - 以及这个网站，我通过这里的帖子（来自谷歌）解决了我的大部分问题：）

提前致谢，

朱利安

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T17:51:39.730

这里正在发生一些事情。您的第一个问题是您为 ContentPresenter 设置了绝对大小（通常，在 WPF 中，您避免控件的绝对大小和绝对位置，但是当您来自 WinForms 时，这是一个很难改掉的习惯）。如果您删除它，它将可以通过设置 ContentPresenter 本身的 VerticalAlignment 和 Horizo​​ntalAlignment 来正确对齐。在按钮本身上设置 VerticalAlignment 和 Horizo​​ntalAlignment 不起作用的原因是您没有在模板中的任何地方使用这些属性。理想情况下，你会做这样的事情：

```
<ContentPresenter VerticalAlignment="{TemplateBinding VerticalAlignment}" Content="{TemplateBinding Content}" HorizontalAlignment="{TemplateBinding HorizontalAlignment}"/> 
```

现在您可以在使用此模板的按钮上设置对齐方式。当然，如果你总是希望这个模板居中，你可以硬编码它而不是使用 TemplateBinding。

通常，替换模板时要记住的是，您未在模板中显式绑定的控件的任何属性在呈现控件时都将被 WPF 忽略。如果你不告诉它如何处理这些属性，它就不会猜测。一个罕见的例外是您的示例中的 content 属性，您可以通过不显式绑定来摆脱它，因为 WPF 会假定您打算将它放在 ContentPresenter 中！但是所有其他按钮属性都将被忽略。例如，如果您尝试更改模板化按钮的 Background 属性，它将被忽略，因为 WPF 不知道将该背景放在哪里。它应该是整个控制吗？它应该是你的网格吗？只是您的 ContentPresenter？你必须告诉它。

# ruby-on-rails - ActionMailer - 根据 Rails 中的日期条件发送电子邮件

> ID：10077112
> 
> 赞同：1
> 
> 时间：2012-04-09T17:27:21.733
> 
> 标签：ruby-on-rails

我有一个 Rails 项目，我想为其设置电子邮件通知。例如，如果记录 X 将在 5 天后过期，请向所有者发送电子邮件。我在新用户注册时设置了电子邮件通知，但不知道如何根据条件发送电子邮件（如果 x = y，则发送电子邮件）。请帮忙！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T17:38:04.830

您可以为此使用 rake 任务。将其设置在 cron 中以每天执行一次。

您可以修改和使用的示例 rake 任务代码：

```
task :send_reminds => :environment do
  Record.all.each do |remind|
    UserMailer.remind_email(record).deliver if record.expires_in(5.days)
  end
end 
```

制作新的 bash 脚本，把它放在你想要的任何地方：

```
#!/bin/bash
cd /your/path/to/rails/app
rake send_reminds 
```

用于`crontab -e`将您的任务添加到 crontab。添加这一行：

```
0 0 * * * /your/path/to/bash/script 
```

它将在每天午夜执行。

请记住将 chmod +x 设置为脚本！

# c# - 如何调用 XML POST API

> ID：10077114
> 
> 赞同：1
> 
> 时间：2012-04-09T17:27:40.063
> 
> 标签：c#, .net, winforms

我需要使用 POST 参数调用 API，例如：

*   URL = [http://localhost/myAPI/](http://localhost/myAPI/)
*   ARGS = 选项=蓝色&类型=汽车

我看过 XDocument 但不确定如何在请求中发送参数。我也不确定我将如何异步调用，即使我应该或者在另一个线程中运行是否更好/更容易。

我将从基于 Windows 的 C# 应用程序中调用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T17:32:17.893

您可以使用[WebClient的](http://msdn.microsoft.com/en-us/library/tt0f69eh.aspx)[上传方法](http://msdn.microsoft.com/en-us/library/system.net.webclient.uploadstring.aspx)之一。

```
WebClient client = new WebClient();
string response = client.UploadString(
                  "http://localhost/myAPI/?options=blue&type=car", 
                  "POST data"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T17:38:31.567

从哪里调用？Javascript？如果是这样，您可以使用 JQuery：

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

```
$.post('http://localhost/myAPI/', { options: "blue", type="car"}, function(data) {
  $('.result').html(data);
}); 
```

data 将包含您的帖子的结果。

如果从服务器端，您可以使用 HttpWebRequest 并使用您的参数写入它的流。

```
// Create a request using a URL that can receive a post. 
        WebRequest request = WebRequest.Create ("http://localhost/myAPI/");
        // Set the Method property of the request to POST.
        request.Method = "POST";
        // Create POST data and convert it to a byte array.
        string postData = "options=blue&type=car";
        byte[] byteArray = Encoding.UTF8.GetBytes (postData);
        // Set the ContentType property of the WebRequest.
        request.ContentType = "application/x-www-form-urlencoded";
        // Set the ContentLength property of the WebRequest.
        request.ContentLength = byteArray.Length;
        // Get the request stream.
        Stream dataStream = request.GetRequestStream ();
        // Write the data to the request stream.
        dataStream.Write (byteArray, 0, byteArray.Length);
        // Close the Stream object.
        dataStream.Close ();
        // Get the response.
        WebResponse response = request.GetResponse ();
        // Display the status.
        Console.WriteLine (((HttpWebResponse)response).StatusDescription);
        // Get the stream containing content returned by the server.
        dataStream = response.GetResponseStream ();
        // Open the stream using a StreamReader for easy access.
        StreamReader reader = new StreamReader (dataStream);
        // Read the content.
        string responseFromServer = reader.ReadToEnd ();
        // Display the content.
        Console.WriteLine (responseFromServer);
        // Clean up the streams.
        reader.Close ();
        dataStream.Close ();
        response.Close (); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T18:11:07.077

要将另一个选项放入环中，您可能需要考虑使用 .NET 4.5 中的`PostAsync`方法`HttpClient`。一个公认的未经测试的刺：

```
 HttpClient client = new HttpClient();
        var task = client.PostAsync(string.Format("{0}{1}", "http://localhost/myAPI", "?options=blue&type=car"), null);
        Car car = task.ContinueWith(
            t =>
            {
                return t.Result.Content.ReadAsAsync<Car>();
            }).Unwrap().Result; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-15T12:15:10.463

# 在 asp .NET 中

```
var client = new RestClient("www.api.url");
client.Timeout = -1;
var request = new RestRequest(Method.POST);
request.AddHeader("id", "givenid");
request.AddHeader("HASH", "generatedHash");
request.AddParameter("text/plain", "fullxml or body",  ParameterType.RequestBody);
IRestResponse response = client.Execute(request);
Console.WriteLine(response.Content); 
```

# 在 HTTP 中

```
POST /api/somename/1.1
Host: google.com
id: merchantid
HASH: generatedshah
<node1><element>Individual</element></node1> 
```

# Phython - http.client

```
import http.client
import mimetypes
conn = http.client.HTTPSConnection("url")
payload = "<Node><Element>Individual</Element></Node>"
headers = {
  'id': 'givenid',
  'HASH': 'generatedhash'
}
conn.request("POST", "/api/blacklist/verify", payload, headers)
res = conn.getresponse()
data = res.read()
print(data.decode("utf-8")) 
```

# extjs3 - EXTjs 面板折叠和展开方法

> ID：10077117
> 
> 赞同：4
> 
> 时间：2012-04-09T17:27:53.353
> 
> 标签：extjs3

在 EXT.Panel 中，有两种方法可以折叠/展开面板。

```
collapse(Boolean animate) 
```

和`expand (Boolean animate)`

打电话给我想要的结果`collapse(true)`。但是我希望通过调用collapse(false)`expand(true)`来达到结果。`expand(true)`但`collapse(false)`什么都不做。为什么是这样？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-09T18:24:20.350

因为`collapse()`和`expand()`函数不检查面板当前是否处于展开或折叠模式，所以如果您调用`expand()`已经展开的面板，它将默默地忽略函数调用，您可以`toggleCollapse()`根据面板的当前状态使用折叠/展开

```
panel.toggleCollapse(true); 
```

**额外的：**

折叠/展开函数中使用的参数`animate`只是指定过渡是否动画，它没有指定面板的状态，所以`collpase(false)`只是意味着面板将在没有任何动画的情况下折叠，但如果面板已经折叠则函数只会默默地返回而不做任何处理，所以简而言之`collapse(false)`不等于`expand(true)`

# ios - 让所有 UI 元素触发其初始值的聪明方法？

> ID：10077118
> 
> 赞同：1
> 
> 时间：2012-04-09T17:28:02.027
> 
> 标签：ios, user-interface, triggers

我正在设计带有（有时是巨大的）UI 填充 UISlider 和 UISwitch 的声音应用程序。我只在 UI 元素中存储值，因为我的声音部分不需要自己存储它（这样更简单、更轻）所以，我想知道是否有一种智能的触发方式视图的所有 UI 元素，以便在 viewDidLoad 时轻松初始化某些值。

最好的，朱

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T22:02:03.237

使您的所有 UI 元素 IBOutlet @properties 成为您的视图控制器。如果您正在使用故事板，请从 UI 元素拖动到视图控制器的 .h 文件，然后选择“出口”

然后在您的 viewDidLoad 方法中，您可以获得每个元素的值。例如，您可以通过以下方式获取 UISlider 的值：

```
slider.value 
```

# linux - 在哪里添加 printk.time ？

> ID：10077120
> 
> 赞同：0
> 
> 时间：2012-04-09T17:28:07.310
> 
> 标签：linux, printk

这是一个非常简单的问题，但我对 Linux 知之甚少并开始构建它。

我正在尝试使用 printk 时间调试内核。我正在关注这个网站：[http](http://elinux.org/Printk_Times) ://elinux.org/Printk_Times，中间它说要使用它：“启动内核时，添加选项“printk.time=1”（或旧内核的“时间”）在内核命令行上“

内核命令行在哪里？我要在 grub 中添加这一行并更新 grub 吗？

请告知我应该在哪里添加这个命令，

非常感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T17:30:48.000

是的，它适用于 menu.lst。

```
title Desktop -- openSUSE 12.1
    root (hd0,0)
    kernel /vmlinuz-3.3.1 printk.time=1
    initrd /initrd-3.3.1 
```

# c# - 数据合同异常。无法序列化

> ID：10077121
> 
> 赞同：59
> 
> 时间：2012-04-09T17:28:12.987
> 
> 标签：c#, .net, wcf

我有以下 WCF 数据合同：

```
[DataContract]
public class Occupant
{
    private string _Name;
    private string _Email;
    private string _Organization;
    private string _Badge;

    public Occupant(string name, string badge, string organization)
    {
        Name = name;
        Badge = badge;
        Organization = organization;
    }

    public Occupant(string name, string badge)
    {
        Value = name;
        Key = badge;
    }

    [DataMember]
    public string Key
    {
        get { return _Name; }
        set { _Name = value; }
    }

    [DataMember]
    public string Value
    {
        get { return _Badge; }
        set { _Badge = value; }
    }

    [DataMember]
    public string Name
    {
        get { return _Name; }
        set { _Name = value; }
    }

    [DataMember]
    public string Email
    {
        get { return _Email; }
        set { _Email = value; }
    }

    [DataMember]
    public string Organization
    {
        get { return _Organization; }
        set { _Organization = value; }
    }

    [DataMember]
    public string Badge
    {
        get { return _Badge; }
        set { _Badge = value; }
    }
} 
```

当我尝试通过 Web 浏览器访问此服务（它托管在 IIS 上）时，我收到此错误：

> System.Runtime.Serialization.InvalidDataContractException：无法序列化类型“MyNamespace.Occupant”。考虑使用 DataContractAttribute 属性对其进行标记，并使用 DataMemberAttribute 属性标记您想要序列化的所有成员。如果该类型是一个集合，请考虑使用 CollectionDataContractAttribute 对其进行标记。

我的一种方法是返回一个`List`type `Occupant`。这会导致它吗？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-04-09T17:35:39.540

因为您已经提供了一个或多个初始化构造函数，所以您还需要添加一个无参数（默认）构造函数。

即您需要添加：

```
[DataContract]
public class Occupant
{
    // *** Needed only for Serialization
    public Occupant() {}
    ... 
```

这是因为当您添加显式构造函数时，[默认构造函数会消失。](https://stackoverflow.com/questions/11792207/why-does-the-default-parameterless-constructor-go-away-when-you-create-one-with)

[问题不在于方法返回`List<Occupant>`，因为方法没有序列化）。]

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-09T17:36:18.490

尝试添加一个空的构造函数。通常这会触发序列化程序。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-10-14T21:52:32.650

您需要一个默认的无参数构造函数。我不打算实际使用我的，所以我为 IntelliSense 添加了一个摘要并抛出一个运行时异常以防止它被使用。

```
/// <summary>
/// parameterless default constructor only for serialization
/// </summary>
public MyClass() { throw new NotImplementedException("parameterless default constructor only for serialization"); } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-09T17:45:51.020

您应该向数据合同类添加一个空参数构造函数

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-09T12:40:44.610

默认情况下，如果您没有设置器，请执行以下步骤：

1.  添加无参数构造函数；
2.  并至少添加*私人集。*

这对我有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-09T17:36:23.963

我的猜测是因为`_Email`没有初始化。您可以设置[`EmitDefaultValue`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datamemberattribute.emitdefaultvalue.aspx)并`false`查看是否有帮助：

```
[DataMember(EmitDefaultValue = false)]
public string Email
{ 
```

# html - ie 的 html/css div 定位问题

> ID：10077122
> 
> 赞同：1
> 
> 时间：2012-04-09T17:28:21.383
> 
> 标签：html, css

试图为此找到解决方案，但无法真正想出任何办法。这是我想做的基础知识。

想让我的布局在 3 个 div 中，第 1 部分是标题（徽标），第 2 部分是水平菜单，第 3 部分是根据您的菜单选择更改的菜单特定内容。我希望没有浏览器滚动条，并且始终显示第 1 节和第 2 节，第 3 节延伸到浏览器窗口的底部，并且始终可见 scollbar。我会把我的代码放在最后，但它在 FF 中运行良好，但在 IE8 中运行良好。我读过你不能在同一个 div 中使用 top 和 bottom，但为什么不呢？它在 FF 中按预期工作就好了。我尝试设置顶部并使用高度 100%，但由于我将顶部设置为 163，它会将底部置于窗口下方 163 像素处。我希望第 3 部分随着窗口垂直扩展或收缩而增长和收缩。这是我大大简化的代码。我' 我们使用内联样式来最大程度地减少对多个文件的处理并在测试时轻松。index.css 在这种情况下是无关紧要的。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta content="text/html; charset=ISO-8859-1"
      http-equiv="Content-Type">
    <title>Test Junk</title>
    <link rel="stylesheet" type="text/css" href="index.css">
  </head>

  <body>
<div style="background-color:#cccea2; text-align:center;height:136">
    section 1
</div>
<div style="background-color:#ccace2; text-align:center;height:27">
    section 2
</div>
<div style="background-color:#225522;     text-align:center;position:absolute;top:163;bottom:0;width:100%;overflow-y:scroll;overflow-x:hidden;">
section 3    
</div>
</body>
</html> 
```

更新：我使用 xhtml doctype 取得了一些成功，正在寻找一个好的解决方案。但我在另一个例子中发现了这一点，同时继续我长期寻找解决方案。我仍然真的不明白为什么你不应该在同一个 div 上使用 TOP 和 BOTTOM，它们是两个非常不同的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T17:49:45.890

使用顶部和底部是不合适的。仅仅因为它在 FF 中有效并不能使它正确。你有没有尝试过：

```
padding-bottom: 1000em;
margin-bottom: -1000em; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T02:14:50.050

您使用了错误的文档类型并且处于怪癖模式。改用这个：`<!DOCTYPE html>`

您说您开始使用 XHTML 文档类型，这就是为什么它对您更好，因为它让您摆脱了怪癖。但是，您不应该使用那个，因为我确定您没有提供 XHTML 标记。

此外，您还没有在 CSS 中提供单位。对于提供的任何值，您必须包括 px 或 em 或 percent。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T22:19:04.833

我有一个使用不同文档类型的示例解决方案。我仍然不明白为什么人们说我不应该在同一个 div 上使用 TOP 和 BOTTOM。对我来说，这与说不要在同一个 div 上使用 margin-top 和 margin-bottom 是一样的。我不明白。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" >

  <head>
    <meta content="text/html; charset=ISO-8859-1"
      http-equiv="Content-Type">
    <title>Test Junk</title>
  </head>
<style>
body {
    background-color:#99cc99;
    margin:0;
    padding:0;
    font-family: Arial, Tahoma, Times;
    font: Times;
    font-size: 10pt;
    overflow:hidden;
    width:100%;
    height:100%;
}
</style>
  <body>
<div style="background-color:#cccea2;width:100%;text-align:center;height:136px;">
    section 1
</div>
<div style="background-color:#ccace2; position:absolute;top:136px;width:100%;text-align:center;height:27px;">
    section 2
</div>
<div style="background-color:#225522; text-align:center;position:absolute;top:163px;bottom:0px;width:100%;overflow-y:scroll;overflow-x:hidden;">
section 3a <br>   
section 3b <br>   
section 3c <br>   
section 3d <br>   
section 3e <br>   
section 3f <br>   
section 3g <br>   
section 3h <br>   
section 3i <br>   
section 3j <br>   
section 3k <br>   
section 3l <br>   
section 3m <br>   
section 3n <br>   
section 3o <br>   
section 3p <br>   
section 3q <br>   
section 3r <br>  
section 3s <br>   
section 3t <br>   
section 3u <br>   
section 3v <br> 
section 3w <br>   
section 3x <br>   
section 3y <br>   
section 3z <br>   
section 3aa <br>   
section 3ab <br>   
section 3ac <br>   
section 3ad <br>  
section 3ae <br>   
section 3af <br>   
section 3ag <br>   
section 3ah <br>   
section 3ai <br>   
section 3aj <br>   
section 3ak <br>   
section 3al <br>   
section 3am <br>   
section 3 <br>   
section 3 <br>   
section 3 <br>   
section 3 <br>   
section 3 <br>   
section 3 <br>   
section 3 <br>   
section 3 <br>   
</div>
  </body>
</html> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-09T19:13:14.593

尝试这个

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
    <html>
      <head>
        <meta content="text/html; charset=ISO-8859-1"
          http-equiv="Content-Type">
        <title>Test Junk</title>
        <link rel="stylesheet" type="text/css" href="index.css">
      </head>

      <body>
    <div style="background-color:#cccea2; text-align:center;height:136">
        section 1
    </div>
    <div style="background-color:#ccace2; text-align:center;height:27">
        section 2
    </div>
    <div style="background-color:#225522;text-align:center;bottom:0;width:100%;overflow-y:scroll;overflow-x:hidden; height:100%;">
    section 3    
    </div>
    </body>
    </html> 
```

# ruby-on-rails - 访问多部分json的参数

> ID：10077124
> 
> 赞同：0
> 
> 时间：2012-04-09T17:28:49.177
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个对 Rails JSON API 服务器的发布请求，如下所示：

```
POST /api/posts.json HTTP/1.1
Accepts: application/json
X-API-KEY: 7d867d16a5e25337b6d7857965f812bee73b76ac
Content-Length: 288
Content-Type: multipart/form-data; boundary=syoYQUQsGwI2XqShQimFdv2QSe-_GYbjVx40T1kS
Host: 10.0.2.2:3000
Connection: Keep-Alive
User-Agent: Apache-HttpClient/UNAVAILABLE (java 1.4)

--syoYQUQsGwI2XqShQimFdv2QSe-_GYbjVx40T1kS
Content-Disposition: form-data; name="DATA"
Content-Type: application/json; charset=UTF-8
Content-Transfer-Encoding: 8bit

{"tags":["dffdff"],"location_id":3,"post":{"content":"test #dffdff"}}
--syoYQUQsGwI2XqShQimFdv2QSe-_GYbjVx40T1kS-- 
```

如何访问 JSON 参数？

如果我将 params[:DATA] 写入日志，我会看到属性，但嵌套的所有内容都是空的（例如 params[:DATA][:post] 或 params[:DATA][:tags]

更新：

当我想做的时候

```
Rails.logger.debug(params[:DATA]) 
```

我明白了

```
{"tags":["dffdff"],"location_id":3,"post":{"content":"test #dffdff"}} 
```

但是当我尝试

```
Rails.logger.debug(params[:DATA][:post]) 
```

我明白了

```
TypeError (can't convert Symbol into Integer):
  app/controllers/api/posts_controller.rb:19:in `[]'
  app/controllers/api/posts_controller.rb:19:in `create' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T10:37:22.043

您的问题是这`params[:DATA]`是一个字符串，但您将它视为哈希。

您需要将 JSON 字符串解析为 Ruby 哈希，如下所示：

```
 data = JSON.parse(params[:DATA])
     puts data['post'] 
```

如果你想在哈希中使用符号，即`[:post]`，那么你可以这样做：

```
 data = data.with_indifferent_access
     puts data[:post] 
```

注意。如果您想在 ruby​​ 控制台中对此进行测试，而不是使用`params[:DATA]`，您可以在第一行使用以下命令初始化数据：

```
 data = JSON.parse('{"tags":["dffdff"],"location_id":3,"post":{"content":"test #dffdff"}} ') 
```

# http - poco库中的HttpRequest PUT内容

> ID：10077126
> 
> 赞同：7
> 
> 时间：2012-04-09T17:28:56.703
> 
> 标签：http, networking, stream, poco-libraries

我想使用 HTTP PUT 请求将一些数据从 C++ 应用程序发送到服务器。我在我的应用程序中使用[poco](http://pocoproject.org)库进行网络连接。

我正在使用这个代码片段：

```
HTTPClientSession session(_uri.getHost(), _uri.getPort());
HTTPRequest req(HTTPRequest::HTTP_PUT, path, HTTPMessage::HTTP_1_1); 
```

发送请求时在哪里设置内容（文件）流？谁能给我看一个使用这个库的例子？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T16:48:09.250

引用在线[文档](http://pocoproject.org/docs/Poco.Net.HTTPClientSession.html)：`HTTPClientSession`

*sendRequest() 将返回可用于发送请求正文的输出流。发送完请求正文后，创建一个 HTTPResponse 对象并将其传递给 receiveResponse()。*

以下代码段显示了使用输出流读取文件的一种方法：

```
try {
    Poco::Net::HTTPClientSession session("www.example.com");
    Poco::Net::HTTPRequest request(Poco::Net::HTTPRequest::HTTP_PUT, "/foo");

    std::ostream& os = session.sendRequest(request);

    std::ifstream ifs("thefile.txt"); // missing: error handling
    Poco::StreamCopier::copyStream(ifs, os); // that's it :-)

    Poco::Net::HTTPResponse response;
    std::istream& rs = session.receiveResponse(response);
    // Do something with rs...

} catch (Poco::Exception& e) {
    std::cout << e.displayText() << std::endl;
} 
```

另外，请查看[POCO 网络编程的幻灯片](http://pocoproject.org/slides/200-Network.pdf)。它们展示了如何使用`HTTPClientSession`.

POCO 文档简洁明了；值得一读。

# php - PHP_SELF 与同一页面的 url

> ID：10077127
> 
> 赞同：0
> 
> 时间：2012-04-09T17:28:59.957
> 
> 标签：php, javascript, mysql

我正在尝试使用 php 的 include 函数使我的代码更清晰。我在我的三个页面中使用相同部分的代码，但其中一个页面与我在执行这部分代码时调用的页面相同。所以我可以代替

```
action="<?=$_SERVER['PHP_SELF']?>" 
```

使用此页面的链接（action="thispage.php"）？另外为了使用包含代码必须完全相同？我的意思是我的部分代码几乎相同，只是一些小事情发生了变化。例如，在每个页面中，我都有一个在所选链接中应用的 CSS 样式。有什么办法可以更改包含的代码的某些内容吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T17:35:36.607

当然，你可以。虽然更简单的方法是`action=""`在表单上使用。空字符串告诉浏览器将表单提交到您当前所在的页面。

当您包含一个文件时，它实际上包含在您的代码中，因此它“继承”了当前范围内的所有变量。您可以在文件中定义一个变量，然后在另一个文件的条件中使用该变量来确定它应该做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T17:35:06.280

好吧，您可以创建一个可以将许多参数传递给的函数：

```
function include_partial($path, $options = array()) {
    extract($options); // import array keys as local variables
    include($file);
}

// usage
include_partial('/path/to/file', array('action' => $_SERVER['PHP_SELF']); 
```

当然，您可以在没有函数 jsut 的情况下做同样的事情，在您包含的文件中设置变量：

```
$action = $_SERVER['PHP_SELF'];
include('/path/to/file'); 
```

我喜欢这个函数的地方是它允许你定义变量的范围，这样你就不会不断地使用全局范围。

# design-patterns - Couchbase：单独检索列表对象还是每个对象更好？

> ID：10077131
> 
> 赞同：0
> 
> 时间：2012-04-09T17:29:52.107
> 
> 标签：design-patterns, memcached, distributed-caching, couchbase

我目前正在使用 couchbase 来快速和分布式地访问数据。我有**社区**对象由键“comm-{index}”存储，其中 {index} 是给定社区对象的键索引（即 comm-1 存储对象 1，comm-2 存储对象 2 等等）。

我需要检索一个包含所有**Community**对象的列表，我想知道：将每个对象一个一个地执行 GET 并将其添加到列表中会更好（更快），还是存储一个由标识的 List 对象？一个键，并在一个 GET 中检索整个列表对象？

我不确定是否由于 couchbase 的分布式特性和对象的有限大小，单独检索每个对象会更快或同样快（例如许多 couchbase 示例所做的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T11:51:18.477

Couchbase 2.0 将支持 Map/Reduce 驱动的视图，它允许您编写映射函数，该函数将过滤掉您需要的所有键，然后构建增量索引

# testing - 使用 PHPUnit 进行集成测试（检查数据库值）

> ID：10077137
> 
> 赞同：1
> 
> 时间：2012-04-09T17:30:05.370
> 
> 标签：testing, phpunit

我正在尝试对带有一些遗留代码的应用程序进行一些集成测试。我要测试的是在应用程序中发生的某些事件链（由用户在前端触发，例如下订单、支付订单）之后，存在某些数据库条目。

目前，我建立了一个空数据库，然后为事件放入应用程序逻辑，然后查看 db.

有一个更好的方法吗？维护起来似乎很痛苦。

这是一些伪代码：

```
class someTests extends PHPUnit_Framework_TestCase {
function setupScenario1(){
    //create a new database, put in initial values
}

//test that an order is created properly
function testScenario1(){
    $this->setupScenario1();
    $this->loadOtherConfigs();

    //now do some application logic
    //setup an object to pass into a factory
    $OrderInfo->ID = 5;
    $OrderInfo->ProductID = 1;

    $Order = new OrderFactory->Create($OrderInfo);
    $PostOrderProcessor = new $PostOrderProcessor();
    $PostOrderProcessor->Process($Order);

    //assert that certain database entries were made
}

//test that an order is created properly, and then the payment is processed properly
function testScenario12(){
    $this->testScenario1();

    //hard coded from testScenario1
    $OrderID = 5;

    //setup payment stuff
    $PaymentInfoObj->Amount = 500;
    $PaymentInfoObj->Type = PaymentType::CREDIT_CARD;

    //now do some application logic
    $MockPaymentResult->Status = PaymentResult::APPROVED;
    $MockPaymentProcessor = $this->getMockBuilder('PaymentProcessor')->disableOriginalConstructor()->getMock();
    $MockPaymentProcessor->expects($this->once())
                        ->method('process')
                        ->will($this->returnValue($MockPaymentResult));

    $PaymentProcessingWrapper = new PaymentProcessingWrapper($AppraisalsDAO,$MockPaymentProcessor);
    $Result = $PaymentProcessingWrapper->TryToProcessPayment($OrderID,$PaymentInfoObj);

    //assert that certain database entries were made
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:44:03.617

[Codeception](http://codeception.com)测试框架解决了大多数关于数据库断言的问题。它是 PHPUnit 之上的一个可靠的包装器。签出它的[Db 模块](http://codeception.com/docs/modules/)。

它还与流行的 ORM 和不同的 DBMS 集成。

唯一的限制是使用 DB 模块需要以特殊格式编写测试。[这里](http://codeception.com/02-15-2012/unit-testing.html)简要介绍一下。

# android - 是否可以在 ListFragment 中设置自定义 ListView？

> ID：10077142
> 
> 赞同：3
> 
> 时间：2012-04-09T17:30:41.433
> 
> 标签：android, android-fragments

我设计了一个 ListView 子类，但我不知道从 Fragment 扩展并返回我的自定义 ListView`onCreateView`或（如果可能）让 ListFragment 处理它是否更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:06:35.853

从[Android SDK 中提取的信息：Using Custom View In XML Based Layout](http://permadi.com/blog/2010/03/android-sdk-using-custom-view-in-xml-based-layout/)，很容易回答您的问题：

在您的 xml 布局文件中，而不是使用“ListView”，只需将名称（带有包）放在 xml 文件中。一个例子：

**前：**

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
         android:orientation="vertical"
         android:layout_width="match_parent"
         android:layout_height="match_parent">

     <ListView android:id="@id/android:list"
               android:layout_width="match_parent"
               android:layout_height="0dp"
               android:background="@color/list_background"
               android:layout_weight="1" />

     <TextView android:id="@id/android:empty"
               android:layout_width="match_parent"
               android:layout_height="match_parent"
               android:background="@color/no_data_list_background"
               android:text="No data" />
 </LinearLayout> 
```

**后：**

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
         android:orientation="vertical"
         android:layout_width="match_parent"
         android:layout_height="match_parent">

     <com.mycompany.BounceListView android:id="@id/android:list"
               android:layout_width="match_parent"
               android:layout_height="0dp"
               android:background="@color/list_background"
               android:layout_weight="1" />

     <TextView android:id="@id/android:empty"
               android:layout_width="match_parent"
               android:layout_height="match_parent"
               android:background="@color/no_data_list_background"
               android:text="No data" />
 </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T17:55:43.643

覆盖 onCreateView 将是这样做的方法。

也就是说： -
如果您提供自己的自定义 ListView，为什么要使用 ListFragment？
- 您在 ListView 中包含哪些自定义项？通常默认的 ListView 可以工作，并且自定义进入 ListAdapter。

# python - 从 Python 中的字符串中提取一个数字

> ID：10077146
> 
> 赞同：-4
> 
> 时间：2012-04-09T17:30:57.710
> 
> 标签：python, regex, string

假设我有一个这种形式的字符串

```
this is a sentence 234225, and some 857307 other stuff, Time=72625, other stuff 
```

在 Python 中推断数字 72625 的最快方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T17:34:36.107

使用[`re.findall`](http://docs.python.org/library/re.html#re.findall)为您提供最简单的输出，并且适用于任意数量的匹配项。

```
sent = "this is a sentence 234225, and some 857307 other stuff, Time=72625, other stuff"

import re

print re.findall("Time=(\d+)", sent)
# ['72625'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T17:42:01.063

If

```
>>> st="this is a sentence 234225, and some 857307 other stuff, Time=72625, other stuff" 
```

another way of doing it without regex is

```
>>> st.split("Time=")[-1].split()[0]
'72625'
>>> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T17:35:54.403

```
import re
input = "this is a sentence 234225, and some 857307 other stuff, Time=72625, other stuff"
print re.search('Time=(\d+)', input).group(1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T17:35:53.993

```
>>> import re
>>> x = 'this is a sentence 234225, and some 857307 other stuff, Time=72625, other stuff'
>>> re.search('(?<=Time=)\d+',x).group()
'72625' 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-09T17:33:58.037

使用[正则表达式](http://docs.python.org/library/re.html)

# vim - 开始使用 github - 跳出 VIM 窗口

> ID：10077147
> 
> 赞同：1
> 
> 时间：2012-04-09T17:30:59.567
> 
> 标签：vim, batch-file, github

我从 github 开始。在命令 $ git commit -m （没有“消息”）之后，我到达了一个![虚拟机](../Images/0f1e9b739c37e9685246486ecd8cb1f8.png)窗口。我在顶部添加了一些文本来解释提交......但我被困在那里，如何逃生？

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T17:33:09.097

快速回答：点击escape退出Vim中的正常模式，然后`:wq`，`:x`或`ZZ`写入并退出（`:q!`退出Vim，这将取消你的提交）。

您还可以在 Git 中更改编辑器设置，这样您就不必使用 Vim。

例如，您可以使用以下命令将编辑器设置为 emacs：

```
git config --global core.editor emacs 
```

Git 使用 Vim 是因为那是你系统的默认编辑器。另一种方法是更改​​系统编辑器。要更改为 pico（一个功能很少的简单编辑器）：

```
export EDITOR=/usr/bin/pico 
```

*编辑*：糟糕，我刚刚注意到您使用的是 Windows。前面的 bash 命令不适用于您，但我将把它留在这里作为一般提示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T17:33:20.403

以您在 vim 中通常执行的方式提交、保存和退出。`:x`, `:wq`,`:w`后跟`:q`, `ZZ`, 等等。

要中止，您可以使用`:cq`.

如果您宁愿使用 vim 以外的其他东西（不清楚您的问题是您不了解 vim 还是只是对 git 将您放入 vim 感到困惑）您可以更改`$EDITOR`为您喜欢的任何编辑器。有关`git help commit`更多详细信息，请参阅。

# eclipse - Eclipse：缺少 Web 服务选项

> ID：10077151
> 
> 赞同：6
> 
> 时间：2012-04-09T17:31:07.253
> 
> 标签：eclipse

这不是一个编程问题，但大多数使用 Eclipse 的程序员应该有我想要的答案。

我正在运行 eclipse Indigo (v 3.7)。但我找不到创建 Web 服务客户端的选项。

到目前为止，我的谷歌搜索建议我应该执行以下操作：

File -> New Project-> Other 在“选择向导”弹出窗口下，选择“Web Services”选项。

因此，就我而言，我根本看不到“Web 服务”。

这个版本在 Windows 上运行，所以我在我的 ubuntu 机器上安装了 Eclipse，但我仍然看不到那里的“Web 服务”选项。

我想我错过了一些东西。

你能帮我解决这个问题吗？我最近开始学习 Eclipse。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T17:36:21.313

您使用什么“类型”的 Eclipse。我想它必须是这样的：http: [//www.eclipse.org/webtools/](http://www.eclipse.org/webtools/) 或者你必须安装适当的插件才能开发与 web 相关的项目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T18:14:47.590

首先，永远不要从像 apt 这样的 Linux 包管理器安装 Eclipse；始终直接从 www.eclipse.org 下载 第二，要获得 Web 服务功能，您可能需要下载**Eclipse IDE for Java EE Developers**包。该软件包包括 Web Tools Project 插件，这些插件为 Eclipse 提供了 Web 服务功能（以及其他功能）。

# ios - 如何在键盘上添加完成按钮？

> ID：10077155
> 
> 赞同：60
> 
> 时间：2012-04-09T17:31:21.170
> 
> 标签：ios, iphone, objective-c, xcode, programmatically-created

更新：

我还尝试实现 UITextViewDelegate 委托，然后在我的控制器中执行：

```
- (BOOL)textViewShouldEndEditing:(UITextView *)textView
{
    [textView resignFirstResponder];
    return YES;
} 
```

我还将文本视图的委托设置为 self（控制器视图实例）。

单击完成按钮仍然只插入一个新行:(

* * *

更新：

到目前为止我所做的。我已经通过我的视图控制器实现了 UITextFieldDelegate。

我已经通过插座将文本视图连接到视图控制器。

然后我做了：

* * *

```
self.myTextView.delegate = self; 
```

和：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder];
    return YES;
} 
```

但是当我点击完成按钮时，它只是添加了一个新行。

所以我的场景中有一个 UITextView 元素，当用户点击它时，会出现键盘并且可以对其进行编辑。

但是，我不能关闭键盘。

如何将完成按钮添加到键盘以便将其关闭？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-04-09T17:33:05.303

那很简单:)

```
[textField setReturnKeyType:UIReturnKeyDone]; 
```

为了解除键盘`<UITextFieldDelegate>`在你的类中实现协议，设置

```
textfield.delegate = self; 
```

并使用

```
- (void)textFieldDidEndEditing:(UITextField *)textField {
    [textField resignFirstResponder];
} 
```

或者

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    [textField resignFirstResponder];
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-09T17:38:52.383

Go into your storyboard, select your text field and under the Attributes Inspector there is an option that says "return key"...select "Done".

Then go into your ViewController and add:

```
- (IBAction)dismissKeyboard:(id)sender;
{
    [textField becomeFirstResponder];
    [textField resignFirstResponder];
} 
```

Then go back to your text field, click outlets and link "Did end on exit" to dismissKeyboard action.

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-08-19T11:44:20.743

**将 UIToolBar 添加为自定义视图，其中将完成按钮作为 UIBarButtonItem。**

*这是将完成按钮添加到任何类型的键盘的更安全和更清洁的方式。创建 UIToolBar 并向其添加完成按钮并设置任何 UITextField 或 UITextView 的 inputAccessoryView。*

```
UIToolbar *ViewForDoneButtonOnKeyboard = [[UIToolbar alloc] init];
[ViewForDoneButtonOnKeyboard sizeToFit];
UIBarButtonItem *btnDoneOnKeyboard = [[UIBarButtonItem alloc] initWithTitle:@"Done"
                                                               style:UIBarButtonItemStyleBordered target:self
                                                              action:@selector(doneBtnFromKeyboardClicked:)];
[ViewForDoneButtonOnKeyboard setItems:[NSArray arrayWithObjects:btnDoneOnKeyboard, nil]];

myTextField.inputAccessoryView = ViewForDoneButtonOnKeyboard; 
```

**IBAction 完成按钮**

```
 - (IBAction)doneBtnFromKeyboardClicked:(id)sender
  {
      NSLog(@"Done Button Clicked.");

      //Hide Keyboard by endEditing or Anything you want.
      [self.view endEditing:YES];
  } 
```

**斯威夫特 3**

```
var ViewForDoneButtonOnKeyboard = UIToolbar()
ViewForDoneButtonOnKeyboard.sizeToFit()
var btnDoneOnKeyboard = UIBarButtonItem(title: "Done", style: .bordered, target: self, action: #selector(self.doneBtnFromKeyboardClicked))
ViewForDoneButtonOnKeyboard.items = [btnDoneOnKeyboard]
myTextField.inputAccessoryView = ViewForDoneButtonOnKeyboard 
```

*功能*

```
 @IBAction func doneBtnFromKeyboardClicked (sender: Any) {
     print("Done Button Clicked.")
    //Hide Keyboard by endEditing or Anything you want.
    self.view.endEditing(true)
  } 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-10-06T20:43:27.150

Swift version:

In Your ViewController:

```
textField.returnKeyType = UIReturnKeyType.Done
textField.delegate = self 
```

After your ViewController

```
extension MyViewController: UITextFieldDelegate {        
    func textFieldShouldReturn(textField: UITextField) -> Bool {
        textField.resignFirstResponder()
        return true
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-30T00:59:19.073

好的，所以我也一直在努力解决这个问题。目前我正在访问 UITableViewCell 中的 UITextView （通过标签）。因为我使用的是原型单元，所以我不能像每个人建议的那样使用 IBActions 或 IBOutlets。相反，我正在使用；

> -(BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)范围替换Text:(NSString *)text

然后，每次用户点击按钮时，这将为我提供文本。我当时的解决方案是获取换行符的 ascii 字符；“/n”。如果这是输入的文本，我会辞去第一响应者的职务。例如;

> ```
> // If the text length is 0 then the user is deleting something, so only check the ascii character if there is text to check
> if (text.length != 0) {
>     // Get the Ascii character
>     int asciiCode = [text characterAtIndex:0];
>     // If the ascii code is /n or new line, then resign first responder
>     if (asciiCode == 10) {
>         [alertTextView resignFirstResponder];
>         [DeviceTextView resignFirstResponder];
>     }
> } 
> ```

不确定其他人是否需要这个 hacky 解决方案，但我想我会把它放在那里以防有人需要它！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-04T11:40:16.717

在检查器中为您的文本字段设置`'Return Key'`选项下的选项。`text field`然后右键单击文本字段并按住`CTRL`选择`'Did End On Exit'`并将其拖动到您的`view controllers`文件中。这将创建一个`IBAction`方法。为方法命名，然后输入以下值：

```
[textField becomeFirstResponder];
[textField resignFirstResponder]; 
```

您的方法应如下所示：

```
- (IBAction)methodName:(id)sender;
{
    [sender becomeFirstResponder];
    [sender resignFirstResponder];
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-25T06:28:30.983

以下是我的方法，在`Swift 3`. 当`doneBtn`点击时，让它发送`.editingDidEndOnExit`事件。我使用此事件来处理多个文本字段之间的焦点问题。

```
// My customized UITextField
class MyTextField: UITextField {

    override func awakeFromNib() {
        super.awakeFromNib()

        // Add toolBar when keyboardType in this set. 
        let set : [UIKeyboardType] = [.numberPad, .phonePad]
        if (set.contains(self.keyboardType) ) {
            self.addDoneToolbar()
        }
    }

    // Add a toolbar with a `Done` button
    func addDoneToolbar() {

        let toolbar = UIToolbar()
        let space = UIBarButtonItem(barButtonSystemItem: .flexibleSpace, target: self, action: nil)
        let doneBtn = UIBarButtonItem(barButtonSystemItem: .done, target: self, action: #selector(onToolBarDone))

        toolbar.items = [space, doneBtn]
        toolbar.sizeToFit()

        self.inputAccessoryView = toolbar
    }

    @objc func onToolBarDone() {
        // I use `editingDidEndOnExit` to simulate the `Done` behavior 
        // on the original keyboard.
        self.sendActions(for: .editingDidEndOnExit)
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-04T12:47:35.550

这是在键盘上添加完成按钮的最佳方式

```
textField.returnKeyType = UIReturnKeyDone; 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-04-09T17:36:15.393

在 TextView 属性的 Interface Builder 中，您可以将返回按钮类型设置为 Done。

然后您需要检查何时按下 Return 按钮

```
 - (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text 
```

检查 text == "/n" 是否然后通过在您的 textView 上退出第一响应者来关闭键盘。

# php - 使 use_trans_sid 工作（将会话 ID 附加到 URL）

> ID：10077159
> 
> 赞同：0
> 
> 时间：2012-04-09T17:31:31.950
> 
> 标签：php

我为此脱发。我想要的只是将会话 ID 附加到 URL。解释为什么我接受安全风险：该网站是为移动使用而设计的。某些移动浏览器不接受 cookie（其中通常存储会话 ID）。所以我别无选择，只能通过 URL 解析会话 ID。

“所以，”我想，“这很简单。只要在每一页的开头使用这个：”

```
ini_set('session.use_trans_sid', 1);
session_start(); 
```

真可惜。没用。好的。然后我在我的子目录中创建了一个 .htaccess（移动站点位于主站点的子目录中），其中包含以下内容：

```
php_flag session.use_trans_sid on
php_value session.use_trans_sid 1 
```

没有效果。生气了。

接下来我尝试更改 php.ini 本身的设置来测试它（不是一个选项，因为在网络服务器上运行的其他网站不得使用“URL-Session-ID”）。所以我确保设置了这个条目：

```
session.use_trans_sid = 1 
```

然后我重新启动了网络服务器......令我惊讶但并不惊讶：没有效果！

在每种情况下，我都添加了 phpinfo(); 在我的页面末尾查看我的设置是否生效。在每种情况下，我都确认 session.use_trans_sid = 1（根据 phpinfo()）。

这意味着我必须忽略一些事情。有人知道吗？我现在能做的就是手动将会话 ID 添加到代码中的每个链接。请帮我避免这种情况... :)

你有什么想法吗？;)

围兜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T17:36:36.160

您是否在普通浏览器中对此进行测试，因为如果浏览器支持 cookie，则不会添加 url？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T21:34:07.807

好吧……确实是这样。[奥利拉夫](https://stackoverflow.com/users/547210/olirav)发现了这个问题。

当在某处进行重定向时，整个系统将无法工作。对于每个表单和每个链接，我都调用同一个页面，通过一个中央文件运行它，我在其中执行操作，然后相应地重定向。这有效地杀死了 use_trans_sid。这意味着在该中心文件中，我必须手动添加 sid。像这样的东西：

```
header("Location: " . $url . "index.php?sid=" . session_id()); 
```

我希望这可以帮助遇到同样问题的人。:)

谢谢奥利拉夫！[_](https://stackoverflow.com/users/547210/olirav)

# forms - Selenium Library / Selenium RC 是否可以用于向缺乏人工身份验证测试的在线表单发送垃圾邮件？

> ID：10077163
> 
> 赞同：0
> 
> 时间：2012-04-09T17:31:51.290
> 
> 标签：forms, selenium-rc, selenium-webdriver, spam, bots

我一直在使用带有 Robot Framework 的 Selenium 库来为 Web 应用程序编写自动化测试，我知道大多数浏览器对自动化脚本都有一定程度的保护，但是是否有可能制作垃圾邮件机器人，特别是对于缺少验证码或其他人类用户的垃圾邮件在线表单验证检查？

PS：只是好奇......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:54:35.467

这些将非常无效（缓慢且重量级），但是是的，Selenium 可能以这种方式使用。使用内存中的 HtmlUnitDriver（它不会打开浏览器窗口），它也可以运行多年未被检测到的地方。

# php - 为什么要修复 E_NOTICE 错误？优点和缺点

> ID：10077164
> 
> 赞同：2
> 
> 时间：2012-04-09T17:31:54.497
> 
> 标签：php

我应该在实时服务器上启用 E_NOTICE 吗？

正如我在[为什么要修复 E_NOTICE 错误中看到的那样？](https://stackoverflow.com/questions/5073642/why-should-i-fix-e-notice-errors) 每个人都再次使用`isset()`忽略通知。我读过专业人士，但代码可读性如何？

让我们检查一些代码：

```
if ($this->_oldattributes['category_id'] != $tattr['category_id']
    || $this->_oldattributes['deal_id'] != $tattr['deal_id']
) { 
```

清楚地了解我在这里想要什么，对吧？

让我们添加`isset()`省略通知：

```
$old_cat_id = isset($this->_oldattributes['category_id']) ? $this->_oldattributes['category_id'] : null;
$new_cat_id = isset($tattr['category_id']) ? $tattr['category_id'] : null;
$old_deal_id = isset($this->_oldattributes['deal_id']) ? $this->_oldattributes['deal_id'] : null;
$new_deal_id = isset($tattr['deal_id']) ? $tattr['deal_id'] : null;
if ($old_cat_id != $new_cat_id || $old_deal_id != $new_deal_id) { 
```

不错，但现在我需要更多时间来了解这里发生了什么。

关于调试的一些信息——我从来没有浪费一天的时间来调试由未初始化变量引起的错误。是的，也许浪费了半个小时来滑入类/函数，但与失去代码可读性恕我直言相比，这不是什么大浪费？

关于性能的一些信息 - [http://seanmonstar.com/post/909029460/php-error-suppression-performance](http://seanmonstar.com/post/909029460/php-error-suppression-performance)

> 不同之处在于，只要先检查它是否存在，抑制通知就需要 100%” 对 1000000 个抑制执行了测试。其中有多少出现在你的代码中，即使你使用 Zend+Doctrine+其他东西？还有多少与数据库连接等相比需要时间吗？

也许我只是不习惯编写正确的代码（现在只使用 PHP 很长时间）。

对于上下文，我们已将项目移至显示 E_NOTICE 的服务器，这就是我问这个的原因。我不知道为什么关闭它们是一个大问题？

另一个例子：

```
class Item extends CActiveRecord {
    private $_oldattributes = array();

public function afterFind()
{
    // Save old values
    $this->_oldattributes = $this->getAttributes();
    $this->_oldcategory = $this->category;
    $this->_olddeal = $this->deal;
} 
```

所以如果旧属性不存在，我将有 null 并且：

```
$tattr = $this->getAttributes();
$this->_oldattributes['category_id'] != $tattr['category_id'] 
```

这会给我我需要的东西，并且没有错误，对吗？

与非对象错误相同，在 Yii 中，当我设置关系时，某些对象可能未初始化，是的，有一种错误，因为在这种情况下具有空值且未初始化有时是真正的错误：

```
$this->deal->item->id != $this->_olddeal->item->id 
```

这可能会触发通知，但会按预期工作，因此您忽略该通知：

```
if ($_GET['foo']) ... 
```

问题是我不能忽略这一点，因为它仍然会引起注意，每次我使用它时我都必须写：

```
if (isset($_GET['foo']) && $_GET['foo']) ... 
```

或者：

```
if (@$_GET['foo']) ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T17:44:46.937

例如，当我查看您的代码时

```
$this->_oldattributes['category_id'] 
```

我的第一个想法是，这可能应该是一个类。

```
class Attributes {
  public $categoryId;
  // and so on
} 
```

现在的区别是，不需要再使用`isset()`了，因为现在属性存在（可能是`null`）或者它绝对是一个错误（“未定义的属性”）并且应该修复。我认为您“修复”的大多数情况`isset()`都是这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-21T21:47:50.367

在调试代码时，如果未定义应定义的变量，则最好有未定义的变量消息。我认为在使用之前定义变量是一种很好的做法，据我所知，其他语言在这方面比 PHP 更严格。

# wpf - 如何在设计视图 WPF 中源为 TemplateBinding 的模板中显示图像？

> ID：10077167
> 
> 赞同：3
> 
> 时间：2012-04-09T17:32:00.473
> 
> 标签：wpf, expression-blend

我有`ImageTextRadioButton`一个类似按钮的 RadioButton 的以下模板，其中包含文本和图像：

```
<ControlTemplate TargetType="RadioButton" x:Key="ImageTextRadioButton">
  <Border  Background="{TemplateBinding Background}" BorderBrush="Black" CornerRadius="8" BorderThickness="2">
    <Grid>
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width=".5*" />
        <ColumnDefinition Width="1*" />
      </Grid.ColumnDefinitions>
        <Image x:Name="ButtonImage" Grid.Column="0" Source="{TemplateBinding Content}" Stretch="None" />
        <TextBlock Grid.Column="1" VerticalAlignment="Center" Text="{TemplateBinding Content}" />
    </Grid>
  </Border>
</ControlTemplate> 
```

（注意 TemplateBindings 中的 Content 只是一个包含图像文件的路径+文件名的字符串）。

这在运行模式下按预期工作，但在设计模式下它不显示图像。文本块显示正确的文本，如果我用`Image.Source`硬编码值替换，图像也会正确显示。但是图像在源代码的设计模式下无法正确显示`TemplateBinding`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T15:23:04.300

啊，我将 .png 文件作为嵌入式资源，因此转换器需要报告文件名`"/MyProject;component/images/" + value + ".png"`而不是`"../images/" + value + ".png"` 一旦我对转换器进行了更改，一切正常。

# jira - JIRA：将项目与团队相关联

> ID：10077170
> 
> 赞同：0
> 
> 时间：2012-04-09T17:32:19.097
> 
> 标签：jira

我想知道如何将用户分配给 JIRA 中的项目。我接手了一个由其他人建立的项目，并注意到所有受让人都是来自不同团队的人。如何添加我的团队？

这里有一个全新的问题。感谢您提供任何有用的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T15:40:49.420

JIRA 项目有一个权限方案。该方案具有可分配用户权限。确保您希望分配的用户列表与此处定义的内容相匹配。

# xpages - SSJS 脚本库中的全局变量未按预期工作

> ID：10077178
> 
> 赞同：3
> 
> 时间：2012-04-09T17:33:21.180
> 
> 标签：xpages

使用 8.5.3 UP1。我在用于“隐藏/何时”或更确切地说在 xpages“显示/ifs”中使用的 SSJS 脚本库存在问题。无论如何，全局变量似乎采用了我上次保存脚本库的值。他们似乎没有根据文档的当前值进行计算。这是一个已知的事情（显然我不知道。）。这是一个示例页面和脚本库来演示该问题：

示例 XPage：

```
<xp:this.resources>
    <xp:script src="/ssjsVisTest.jss" clientSide="false"></xp:script>
</xp:this.resources>
<xp:inputText id="inputText1" value="#{document1.StatusTX}"></xp:inputText>
<xp:br></xp:br>
<xp:br></xp:br>
<xp:br></xp:br>
<xp:button value="Save" id="SaveBtn">
    <xp:eventHandler event="onclick" submit="true"
        refreshMode="complete">
        <xp:this.action>
            <xp:saveDocument var="document1"></xp:saveDocument>
        </xp:this.action>
    </xp:eventHandler>
</xp:button>
<xp:br></xp:br>
<xp:br></xp:br>
<xp:label id="label1" value="Status is Draft"
    rendered="#{javascript:statusVisibleDraft()}">
</xp:label>
<xp:br></xp:br>
<xp:br></xp:br>
<xp:label id="label2" value="Status is Pending"
    rendered="#{javascript:statusVisiblePending()}">
</xp:label>
<xp:br></xp:br>
<xp:br></xp:br>
</xp:view> 
```

示例 SSJS 脚本库：

```
var status = document1.getItemValueString('StatusTX');

function statusVisibleDraft() {

x = (status == "Draft") ? 1 : 0;

if(x > 0) {
    return true;
} else {
    return false;
}
}

function statusVisiblePending() {

x = (status == "Pending") ? 1 : 0;

if(x > 0) {
    return true;
} else {
    return false;
}
} 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T01:13:55.810

脚本库中的变量本质上是瞬态的。根据系统负载，库可能会在调用之间被卸载。全局变量的正确位置是作用域（这就是它们的用途）。在您的示例中，视图范围似乎是合适的。Sven 关于计算也是正确的。此外，最好不要有附带依赖关系。如果您添加另一个名称不同的数据源，您将无法重用您的 ssjs 库。您可以将数据源作为参数移交，例如 beforeRenderResult: setstatusDraftVisible(document1,'Status','draft') 在这样的函数中，您检查字段（第二个参数）是否存在并且具有第三个参数的值，然后设置：viewScope.statusDraftVisible=true；// 或假

然后你渲染了="#{JavaScript:viewscope.statusDraftVisible}"

当您的应用程序更复杂并且您有很多这些检查时，您可能会考虑使用 viewScope 'backing bean' aka managed bean。这可以减少渲染为渲染=“#{beanName.statusDraftVisible}”

哪个更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T20:13:25.750

我相信这是因为在每次调用 statusVisibleDraft() 和 statusVisiblePending() 函数时都没有设置状态变量，因为它在函数之外。

在每个函数内移动状态变量的赋值：

```
var statusVisibleDraft = function() {

  var status = document1.getItemValueString('StatusTX');

  x = (status == "Draft") ? 1 : 0;

  if(x > 0) {
      return true;
  } else {
      return false;
  }
}

var statusVisiblePending = function() {

  var status = document1.getItemValueString('StatusTX');

  x = (status == "Pending") ? 1 : 0;

  if(x > 0) {
      return true;
  } else {
      return false;
 }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T20:18:00.960

SSJS 库中的代码只有在加载库时才会执行。domino 服务器在内部缓存该库。仅当您保存 SSJS 库或嵌入 XPage 时，该库才会重新加载并再次执行。

如果您在浏览器中重新加载 XPage，SSJS 库将不会重新加载或再次执行。即使您关闭浏览器并重新打开 XPage，domino 也不会刷新它们。

只需将一些打印语句添加到您的 SSJS 库中，您就可以在服务器控制台上看到该行为。

也许这就是您正在寻找的答案。

希望这有助于斯文

**编辑：** 这意味着您的全局变量*状态*将仅在第一次加载 SSJS 库时计算。

# windows-phone-7 - WP7 SystemTray 文本

> ID：10077184
> 
> 赞同：4
> 
> 时间：2012-04-09T17:34:20.853
> 
> 标签：windows-phone-7

Windows Phone 7 中的各种本机应用程序（Hotmail、Gmail 等）似乎能够使用 SystemTray 来显示自定义文本。例如，当您第一次打开 Hotmail 应用程序时，您会看到一条消息，例如“X 分钟前上次更新”。文本平滑地滚入和滚出，并且在显示文本时，其他标准 SystemTray 图标也仍然存在（当前时间等）。

是否也可以在您自己的应用程序中执行此操作？似乎没有任何方法可以设置 SystemTray 的文本。我能想到的唯一解决方案是伪造它并隐藏 SystemTray 并在同一位置短暂显示一个 TextBlock，但获得与本机应用程序完全相同类型的 SystemTray 行为（其他图标仍然存在，文本动画进出）似乎很难/不可能。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T17:59:08.223

您不能做同样的事情，但您可以使用 ProgressIndicator 做类似的事情。您可以将其 Text 属性设置为任何文本并显示它。它将一起显示宽度进度点，但您可以调整，将值设置为 0。

```
ProgressIndicator prog = new ProgressIndicator();
prog.IsIndeterminate = false;
prog.Text = "Your text";
prog.IsVisible = true;
SystemTray.SetProgressIndicator(this, prog); 
```

# backbone.js - Backbone.js - 嵌套视图应该保持相互引用吗？

> ID：10077185
> 
> 赞同：21
> 
> 时间：2012-04-09T17:34:23.447
> 
> 标签：backbone.js

如果 Backbone View 在其 render() 方法中创建了新的 View，这些 View 是否应该作为数据成员来维护？典型的渲染方法如下所示：

```
render: function() {
  var myView = new MyView({ model: values });
  $('div#value', this.el).append(myView.render().el);
} 
```

这种渲染方法的链接意味着嵌套视图实际上只是被创建，因此它也可以链接任何渲染方法并返回一个构造良好的元素。我假设视图留给垃圾收集？

如果要修改嵌套视图......也许很重，应该只是（重新）创建它，还是应该通过数据成员引用修改它？

我遇到的问题是嵌套视图接收事件，要求它们修改自己的嵌套视图，有时还需要修改它们的父视图。

我真的不希望 top 开始到处乱扔听众。并且传入对父视图的引用并从子视图调用 render() 会导致内存泄漏，因为父视图创建了一个新的子视图，而原始子视图维护了对其父视图的引用！

目前它还不是很像框架。有没有人有任何资源可以帮助我以类似框架的方式解决这个问题？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-06-08T01:22:50.380

（警告：我的回答变成了 tl;dr 论文）

我很早就遇到了一些同样的问题，并且为了构建一些非常复杂的应用程序做了功课，所以我将提供我的观点。

学习骨干的最大挑战是它是如此的无主见，并且可以（并且正在）以多种不同的方式使用，以至于很难弄清楚如何“正确”地做某事，或者至少在开始时以一种好的方式做事出去。使用主干的方法不止一种，但它的灵活性使它成为几乎所有应用程序的绝佳结构，希望我能提供一些指导。（我可能会在此处的每个句子中附加“IMO”）。

**一、我对主干观点的理解**

在主干应用程序中，有很多有用的方法来使用视图。我通常会在我的应用程序中看到一些重叠类型的视图：

我通常有一个或多个“根级”视图。根级视图通常是初始化、呈现和保留对处理页面特定部分的子视图的引用的地方。根`el`级视图通常是“正文”或正文中的另一个高级元素。在某些情况下，根级视图有自己的 HTML 来观察和/或呈现。在其他情况下，根级视图可能根本没有`el`，只管理子视图。我在全局“app”命名空间对象中保留对每个根级视图（通常只有一个）的引用。

除了“根级”视图之外，通常还有“子视图”。子视图由“父”视图初始化和渲染，该视图可以是根级视图或另一个子视图。父视图负责根据应用程序的需要初始化、渲染、隐藏、显示和/或销毁其子视图。有时，父视图可能会跟踪可变数量的子视图实例（例如，一个播放列表视图有 N 个歌曲视图）。通常，父母会保留对孩子的引用，但有时这是不必要的（更多内容见下文）。

除了“根级/父级/子级”范式之外，我倾向于将视图归为以下两类之一：(1) 静态：意味着一旦视图被初始化，视图和它的`el`存在，即使有东西里面的变化；(2) 动态的，根据各种事件来来去去。通常，我的根级视图始终是静态的。它们通常还对应于现有的 DOM 元素，例如“body”或“#my-div”。子视图通常是动态的，但也可能是静态的。（提示：在声明静态视图时`el: '#element-id'`使用现有的 DOM 元素`el`。动态视图通常不指定现有的`el`；它们使用`tagName` `id`and`className`来描述动态视图将生成的元素。）

视图本质上具有 3 个功能：（1）当父母告知或响应事件时（或者在根级视图的情况下，当由路由器或“主”函数初始化时）呈现自己和他们的孩子等），（2）通过更新模型或集合或触发自定义 Backbone 事件来响应来自 DOM 元素内`el`（但不在`el`任何子视图内）的 UI 事件，以及（3）观察和响应 Backbone（模型，集合等）需要在其 el 中呈现或更改某些内容的事件（但不在任何子视图的 el 中）。有时有用的一个技巧是子视图可以触发自己的事件（`this.trigger('customEvent')`）父视图可以观察到( `childView.on('customEvent', this.handler, this)`)。

有关主干视图模式的其他有趣观点，请参阅：[this](https://stackoverflow.com/questions/9337927/how-to-handle-initializing-and-rendering-subviews-in-backbone-js)和[this](http://ricostacruz.com/backbone-patterns/#view_patterns)。

现在在这种情况下，关于问题

**1) 对垃圾收集、范围和内存泄漏的恐惧**

如果您在父级的渲染（或其他）方法中将子视图实例化为本地变量并渲染它，然后函数超出范围，我可以理解您对垃圾收集的恐惧或视图将无法做它需要做的事情。不需要害怕垃圾收集器，只需要僵尸。如果您的视图有任何事件处理程序，无论是在“事件”声明中声明的 UI 事件处理程序，还是绑定到其他 Backbone 对象的事件，或其他基于 DOM 的事件侦听器，即使您没有，您的视图也不会被垃圾回收。不再有对它的引用——它仍将存在于内存中并响应事件。另一方面，如果一个视图没有任何事件处理程序，那么它唯一的工作就是渲染一个元素，所以谁在乎呈现它的 javascript 对象是否存在——它可能会被垃圾收集，因为它应该是。看[this](http://lostechies.com/derickbailey/2012/03/19/backbone-js-and-javascript-garbage-collection/)，以便更好地理解 js 垃圾收集的一般情况以及它与 Backbone.js 的关系。

更大的担忧是[僵尸视图](http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/)。如果要从 DOM 中删除视图并在您的应用程序中的某个时间点将其丢弃，请确保它们完全删除自己，或者父视图应保留对它们的引用并删除它们。并且不要重新创建和替换已经创建但未正确删除的视图。移除是通过在视图上调用 .remove() 来完成的，并取消绑定之前使用`on(...)` using绑定的任何外部 Backbone 事件`off(...)`。Backbone 的最新版本（1.0+）通过将[“listenTo”和“stopListening”方法](http://backbonejs.org/#Events-listenTo)添加到 View 原型使这个问题更容易解决。如果您要动态地将视图添加到 DOM 或从 DOM 中添加视图，请理解并使用这些方法而不是开/关。 *提示：设置一个[像这样的 hacky jquery "remove" 事件](https://stackoverflow.com/a/10172676/652693)可以很容易地使视图在从 DOM 中删除时自动删除和清理它们`el`（如果您的应用程序流中没有事件可以达到同样的目的）。*

**2) 子视图是否应该作为父视图的数据成员来维护？**

这取决于。我不认为父母观点出于有限目的而意识到他们的孩子观点违反了 MVC 的任何黄金原则。有时，如果/当您需要时，具有对特定子视图实例的成员引用的父级是管理子视图的好方法。正如我所指出的，有时父视图会响应需要它们渲染、重新渲染、隐藏或删除其子视图的事件。有时他们可能想监听子视图自己触发的事件。然而，父母不应该过多地介入他们孩子观点中的任何事情`el`。

也就是说，不要过度使用这些类型的引用。很多时候，您不需要使用对子视图的引用，因为子视图可​​以照顾自己。正如我所提到的，视图一旦被渲染，应该只 A) 在它们的 el 中监视 UI 事件（但通常不在任何子视图的 el 中）并更新模型或集合或触发事件以响应这些 UI 事件，或者 B) 监视来自其他主干对象（通常是模型或集合或其他视图）的事件并采取行动（例如，更新他们自己的 UI 元素）作为响应。在许多情况下，视图可以自行处理甚至删除自己。如果另一个 View 或其他 Backbone 对象关心您的视图中发生的 UI 事件，请更新模型或触发视图上的事件并让他们观察它。同样地，如果您视图之外的某些内容需要在您的视图中更新渲染，请侦听模型的更改或等待相应的自定义事件。作为一般原则，观点应该是幸福的，不知道彼此，除了父母在有意义的时候照顾他们的孩子。

**3）子视图是否应该保持对父视图的引用？**

没有永不。我想不出一个场景，您需要通过对父级的引用来完成某些事情，而这无法通过更改父级正在观察的模型或触发事件来完成（例如，自定义事件说“嘿，X发生了”）在子视图本身或另一个基于“事件”的主干对象上。在 Backbone 中，我使用模型来表示我的数据和我的状态。因此，如果某个视图中发生的事情改变了我的应用程序的状态，那么我会更改模型的相应状态属性，并让其他视图（包括父视图）在他们关心时监听自动“更改”事件。我还使用一个全局“vent”类总线对象（只是一个扩展 Backbone.Events 的基本 javascript 对象）来触发和侦听整个应用程序中的事件，有时我会触发 View 本身的事件，让父对象知道发生了什么事。任何可行的方法，同时保持你的架构尽可能的清晰。

**4）我真的不希望 top 开始到处扔听众。**

好吧，我想关于主干的一件好事是您不必这样做，但要意识到观察者模式（即事件和侦听器）和松散耦合是主干 MVC 风格的核心（请注意，每个 Backbone 类都扩展了事件?)，并且大多数人都相应地使用它。

**参考？**

我强烈推荐[PeepCode 教程](https://peepcode.com/products/backbone-js)，除非你觉得你已经处于相当高级的水平。12块钱一件，但你需要从第一个开始，否则第二个和第三个不会很有用。

另外，[这里有一个很好的概述](http://aaronhardy.com/javascript/javascript-architecture-backbone-js-views/)。

**结束**

# sql - SQL Developer 为每个 ID 选择最大记录和整行

> ID：10077186
> 
> 赞同：0
> 
> 时间：2012-04-09T17:34:24.017
> 
> 标签：sql, oracle

我对使用 SQL 非常陌生，而且我之前找不到任何似乎可以回答我的问题的帖子。我需要一份声明，该声明将为我提供数据库中每个客户的最新批准提交以及与该提交相关的所有数据行/列。每个提交都分配有一个唯一的 ID 号，并位于名为 ASMT_ID 的列中。唯一的客户 ID 号是名为 PRTPT_ID 的列。

因此，对于数据库 T_FINANCIAL_ITEM 中的每个 PRTPT_ID，我想找到每个客户的 MAX ASMT_ID 并显示与每个 PRTPT_ID 关联的所有数据列和行，但前提是 STTS_NAME 等于“已批准”。

简单来说，我正在尝试做的事情：

```
select * from T_FINANCIAL_ITEM
For each PRTPT_ID SELECT MAX ASMT_ID
WHERE STTS_NAME = 'Approved'
GROUP by PRTPT_ID 
```

****更新**** 我需要分析同一个表 FYE_DT 和 SUBM_TYPE 中的另外两个字段，而不是使用 asmt_id。

标准是：

1.  stts_name 为“已批准”的最新 FYE_DT（即 2010 年之前的 2011 年）。
2.  在最近的 fye_dt 中，审计的 subm_type
3.  在最近的 fye_dt 中，如果他们是 no audited subm_type，则 unaudied subm_type
4.  它将提取与提交符合条件的所有数据行

例如：

```
PRTPT_ID    ASMT_ID FYE_DT                       SUBM_TYPE_NAME  
8493000000  18016   30-JUN-09 12.00.00.000000000 AM Unaudited/A-133  
8493000000  19574   30-JUN-09 12.00.00.000000000 AM Audited/A-133  
8493000000  28039   30-JUN-10 12.00.00.000000000 AM Unaudited/A-133  
8493000000  33620   30-JUN-10 12.00.00.000000000 AM Audited/A-133  
9481000000  38049   31-DEC-10 12.00.00.000000000 AM Unaudited/Non-A133  
9481000000  58020   31-DEC-09 12.00.00.000000000 AM Audited/Non-A-133  
9481000000  48139   31-DEC-11 12.00.00.000000000 AM Unaudited/Non-A-133 
```

结果：

```
PRTPT_ID    ASMT_ID FYE_DT                       SUBM_TYPE_NAME  
8493000000  33620   30-JUN-10 12.00.00.000000000 AM Audited/A-133  
9481000000  48139   31-DEC-11 12.00.00.000000000 AM Unaudited/Non-A-133 
```

注意：可以有与这些结果相关联的多行数据。我需要拥有所有的数据行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T18:38:19.927

一种相对标准的方法是使用分析函数。如果我了解您的更新，听起来您希望该`ORDER BY`子句类似于

```
select *
  from (select t.*,
               rank() over (partition by prtpt_id
                                      order by fye_dt desc,
                                               (case when subm_type_name like 'Audited%'
                                                     then 2
                                                     when subm_type_name like 'Unaudited%'
                                                     then 1
                                                     else 0
                                                  end) desc) rnk
          from t_financial_item t
         where stts_name = 'Approved')
 where rnk = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T17:38:15.103

你的表结构是什么？这似乎是您正在寻找的：

```
select MAX(ASMT_ID),PRTPT_ID from PRTPT_ID_TABLE p
   INNER JOIN ASMT_ID_TABLE a on p.PRTPT_ID = a.PRTPT_ID
   WHERE STTS_NAME = 'Approved' 
   GROUP by PRTPT_ID 
```

但我没有看到任何桌子。T_FINANCIAL_ITEM 是表名还是数据库名？

# ios - 在 iOS 中相邻放置不规则形状的图像

> ID：10077190
> 
> 赞同：0
> 
> 时间：2012-04-09T17:34:41.117
> 
> 标签：ios, objective-c, uiimageview

我使用遮罩将矩形图像分成两部分，如下所示。

```
|--------------\-------------------------
|               \                       |
|       1        \                      |
|                 \             2       |
|                /                      |       
|               /                       |
|--------------/------------------------- 
```

现在我必须使用两个 UIImageView 将它们放在 UIView 中。我怎么知道第二张图像的相对中心或原点是什么。如果第一张图像位于原点 0,0，则第二张图像原点不能位于 (1stimage width, 0)，因为它的形状不规则。任何建议将不胜感激。如果我无法澄清，请告诉我。我会尝试上传一些图片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T17:57:05.933

您需要放置两个`UIImageView`s 以使它们重叠。重叠量由图像本身决定。您无法在代码中轻松解决此问题。您（或您的艺术家）需要通过检查图像来确定重叠量。您需要将重叠量存储在某处 - 作为代码中的常量，或者在图像文件旁边的数据文件中 - 并使用它来计算第二个`UIImageView`.

# jquery - 删除不活动的课程项目

> ID：10077197
> 
> 赞同：0
> 
> 时间：2012-04-09T17:35:29.317
> 
> 标签：jquery, ajax, class, pagination

我正在尝试`pagination`通过上传图像并将它们添加到容器中，方法是通过使用新创建新`div`并`id's`提供第一页来制作`class`如下所示的内容。`current`

如果我更改到新页面，则将活动类删除到当前页面并将其添加到所选页面。

我想知道如何删除所有`inactive`没有“当前”类的页面

这是我的代码：

```
<script type="text/javascript">
var imagesPerPage = 4, pageNumber = 1;

function onAjaxSucceded(data) {
    var pagesContainer = $('#pagesContainer'),
        imagesInPage = 0,
        divPage = $("#p1");

    $.each(data.result, function(index, file) {
        if (imagesInPage >= imagesPerPage) {
            imagesInPage = 1;
            pageNumber += 1;
            divPage = $('<div/>', {id : "p" + pageNumber}).addClass('pagedemo').hide().appendTo(pagesContainer);
        } else {
            imagesInPage += 1;
        }
        var src = 'Uploads/' + file.name;
        $('<img>', {src: src, href: src, "class": 'LoadclickImage', align: 'left'}).appendTo(divPage);
    });

    $("#demo5").paginate({
        count: pageNumber,
        start: 1,
        display: Math.min(7, pageNumber),
        border: true,
        border_color: '#fff',
        text_color: '#fff',
        background_color: 'black',
        border_hover_color: '#ccc',
        text_hover_color: '#000',
        background_hover_color: '#fff',
        images: false,
        mouse: 'press',
        onChange: function(page) {
            $('#paginationdemo ._current').removeClass('_current').hide();
            $('#p' + page).addClass('_current').show();
        }
    });
}

var fakeAjaxData = {
    result: [
        {name: '../../../img/keys.png'},
        {name: '../../../img/logo.png'},
        {name: '../../../img/input-button-bg.png'},
        {name: '../../../img/remove-resources.png'},
        {name: '../../../img/logo.png'},
        {name: '../../../img/input-button-bg.png'},
        {name: '../../../img/remove-resources.png'},
        {name: '../../../img/keys.png'},
        {name: '../../../img/keys.png'},
        {name: '../../../img/input-button-bg.png'},
        {name: '../../../img/logo.png'},
        {name: '../../../img/remove-resources.png'},
        {name: '../../../img/keys.png'},
        {name: '../../../img/keys.png'},
        {name: '../../../img/input-button-bg.png'},
        {name: '../../../img/logo.png'},
        {name: '../../../img/remove-resources.png'},
        {name: '../../../img/input-button-bg.png'},
        {name: '../../../img/logo.png'},
    ]
};

$(function() {
    onAjaxSucceded(fakeAjaxData);
});
</script> 
```

这是我的[演示](http://jsfiddle.net/gbzsR/24/)

**编辑**：

任何人都可以代替`removing` `inactive`课堂说我如何删除所有页面，如果我再次添加，我需要从`1st page.`现在开始添加图像如果我删除它从它添加的最后一页添加的页面。

对不起，如果我的标签是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T17:39:38.163

像这样的东西：

```
$("#pagesContainer > :not(._current)").remove() 
```

# jquery - 用 jQuery 复制表格的一部分

> ID：10077200
> 
> 赞同：0
> 
> 时间：2012-04-09T17:35:41.597
> 
> 标签：jquery

我有一个包含数据的大表。

该表有一个标题。

我需要将该表的标题从`<thead>`to准确复制`</thead>`到同一文档中的另一个部分。我怎样才能做到这一点？

```
<table id="myTbl">
<thead>
<tr>
    <th></th>
    ...
</tr>
</thead>
<tbody>
...
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T17:39:37.337

Try using `.clone` and `prependTo` the desired table

```
$('#myTbl thead').clone().prependTo('<Destination Table>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T17:38:12.680

您可以使用 复制元素[`.clone()`](http://api.jquery.com/clone/)。

> 如 .append() 的讨论中所示，通常当一个元素插入 DOM 中的某个位置时，它会从其旧位置移动。所以，给定代码：
> 
> ```
> $('.hello').appendTo('.goodbye'); 
> ```
> 
> 生成的 DOM 结构将是：
> 
> ```
> <div class="container">
>   <div class="goodbye">
>     Goodbye
>     <div class="hello">Hello</div>
>   </div>
> </div> 
> ```
> 
> 为了防止这种情况，而是创建元素的副本，您可以编写以下内容：
> 
> ```
> $('.hello').clone().appendTo('.goodbye'); 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T17:44:23.177

这将从具有 id 的表中复制标题`tbl1`并将其放入另一个具有 id 的表中`tbl2`

```
 var copy=$("#tbl1").find('th').clone();
    $("#tbl2").prepend(copy); 
```

这是示例[http://jsfiddle.net/hmrNN/7/](http://jsfiddle.net/hmrNN/7/)

# mysql - 获取 3000 条数据记录时出现内存不足错误

> ID：10077201
> 
> 赞同：0
> 
> 时间：2012-04-09T17:35:42.660
> 
> 标签：mysql, yii

我正在尝试在控制台命令中使用 zend lucene 索引包含超过 3000 条记录的表

这是我的代码

```
public function run($args) {
    set_time_limit(0);      
    Yii::import('application.vendors.*');
    require_once 'Zend/Search/Lucene.php';

    Zend_Search_Lucene_Search_QueryParser::setDefaultEncoding('utf-8');
    Zend_Search_Lucene_Analysis_Analyzer::setDefault(
            new Zend_Search_Lucene_Analysis_Analyzer_Common_Utf8_CaseInsensitive ()
    );

    $searchPath = Yii::app()->runtimePath.'/search';
    $index = Zend_Search_Lucene::create($searchPath);
    /*
     * fecth data to index
     */ 
    $sql = 'select id, title, content, succinct, create_time from `news` where status="published"';
    $query = Yii::app()->db->createCommand($sql);
    $result = $query->queryAll();

    foreach ($result as $data) {
        $doc = new Zend_Search_Lucene_Document();
        $doc->addField(Zend_Search_Lucene_Field::Text('title',
            CHtml::encode($data['title']), 'UTF-8')
        );
        $doc->addField(Zend_Search_Lucene_Field::Text('succinct',
                strip_tags($data['succinct']), 'UTF-8')
        );          
        $doc->addField(Zend_Search_Lucene_Field::UnStored('content',
                strip_tags($data['content']), 'UTF-8')
        );
        $doc->addField(Zend_Search_Lucene_Field::UnIndexed('newsId',
                $data['id'], 'UTF-8')
        );
        $doc->addField(Zend_Search_Lucene_Field::UnIndexed('create_time',
                $data['create_time'], 'UTF-8')
        );
        $index->addDocument($doc);          
    }
    $index->commit();
    $index->optimize(); 
}

} 
```

但我得到这个错误

> 内存不足（需要 228480 字节）
> 异常“CDbException”和消息“CDbCommand 无法执行 SQL 语句：SQLSTATE[HY000]：一般错误：2008 MySQL 客户端内存不足。执行的SQL语句为：select id, title, content, succinct, create_time from `news`where status="published"' in /home/user/public_html/v2/lib/framework/db/CDbCommand.php:528

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:05:07.660

不久前我遇到了类似的错误。我可以通过增加数据库缓存来修复它。您还可以尝试增加 php 解释器在执行期间获得的内存量（客户端内存不足）。它也可以帮助你。

# c# - WCF 中消息的最大限制是多少？

> ID：10077205
> 
> 赞同：1
> 
> 时间：2012-04-09T17:35:54.800
> 
> 标签：c#, wcf

我试图通过 WCF 服务插入更大的图像，但我没有成功。它抱怨发送消息太大。我发送了较小的图像，效果很好，但较大的图像我遇到了更多麻烦。我已经尝试（没有成功）在 web.config 中进行更改：

```
<bindings>
      <basicHttpBinding>
        <!-- binding configuration with a name -->
        <binding name="ExtendedMaxSize" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647000000" />
      </basicHttpBinding>
    </bindings> 
```

*远程服务器返回意外响应：(413) 请求实体太大。*

也许通过 wcf 发送这么大的图像是不可能的？我真的不知道所以我问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T17:52:13.820

这是 MSDN 文章，可能对您有用：[WFC 大数据和流式](http://msdn.microsoft.com/en-us/library/ms733742.aspx)处理。

此外，如果您使用的是 IIS 6，您可能会遇到此[问题](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/7e0d74d3-ca01-4d36-8ac7-6b2ca03fd383.mspx?mfr=true)。

# c++ - 修改函数中的指针值

> ID：10077206
> 
> 赞同：0
> 
> 时间：2012-04-09T17:35:54.870
> 
> 标签：c++, pointers

任何人都可以指出为什么以下代码在修改函数中需要 char** 指针。如果我只是传递 char* 并在函数调用返回 k 后修改值，则 k 具有垃圾值。有人可以证明这一点吗？

```
char* call()
{
    return "fg";
}
void modify(char** i)
{
    *i = call();
}

int main()
{
    char* k= new char[3];
    modify(k);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T17:37:14.113

当您将某些内容传递给函数时，您通过**value**传递它。这意味着该函数对该事物的**副本进行操作。**

这也适用于指针。如果您传递 a `char *`，则会生成该指针的副本；原始指针没有被修改。如果要修改原始指针本身，则需要通过`char **`参数传递其地址。

* * *

**笔记：**

*1\. 还值得指出的是您的代码包含内存泄漏。您动态分配一些内存，然后丢失指向它的指针，这意味着您永远无法获得`delete`它。*

*2\. 在 C++ 中，您通常应该避免像这样传递原始指针，因为它会导致痛苦和混乱。您应该研究智能指针。*

# r - ddply 用于转换数据

> ID：10077207
> 
> 赞同：1
> 
> 时间：2012-04-09T17:36:02.327
> 
> 标签：r, plyr

我有以下测试数据框。

```
id1 val
A 1  
A 1  
A 1  
A 1  
B 2  
B 2  
B 2  
B 2 
```

我想将其转换为如下所示的数据框。

```
id1 val
A 1  
A 1  
A 2  
A 2  
B 3  
B 3  
B 4  
B 4 
```

我所做的是首先找到 A & B 发生次数的计数，在这种情况下 = 4，将其拆分为 2，然后更新第二列，使其相应地递增。所以四个 1 变成了 1,2，四个 2 变成了 3,4，以此类推。我知道这符合 SAC 范式，但想知道如何使用 ddply 来做到这一点。请问有什么建议吗？非常感谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:02:22.247

首先，让我们获取您的示例对象：

```
d <- data.frame( id1= c(rep("A",4), rep("B",4)),  val=c(rep("1",4), rep("2",4)) ) 
```

做你想做的事的一种方便的方法就是：

```
> d$val <- rep( 1:(nrow(d)/2), each=2)
> d
  id1 val
1   A   1
2   A   1
3   A   2
4   A   2
5   B   3
6   B   3
7   B   4
8   B   4 
```

就是这样。

例如，使用 split-apply-combine 方法的一个原因是有一个具体取决于列值组合的编号。您可以根据and`ddply`拆分行，并获得不同类型的编号：`id1``val`

```
f <- function(x){ rep(1:(length(x)/2), each=2) }
ddply(d, .(id1), transform, val = f(val) )

   id1 val
1   A   1
2   A   1
3   A   2
4   A   2
5   B   1
6   B   1
7   B   2
8   B   2 
```

研究定义`f`并进行算术运算肯定会导致您找到解决方案，但如果以下假设描述了您想要的内容：

*   每 2 行增加 +1
*   A 和 B 总是以偶数出现

那么我不明白这一点......申请`rep(x, each=2)`做`d`这份工作！

# sql - SQL Join - 总是从第一个表返回第二个表中每一行的数据

> ID：10077210
> 
> 赞同：0
> 
> 时间：2012-04-09T17:36:16.897
> 
> 标签：sql, join

我有两个表 tblSettingsLookup 和 tblFirm。我在查找表中有 5 个设置，基本上用于动态渲染设置名称。例如，如果有 5 个设置，那么每个公司可以在某个页面上看到 5 个设置。如果我添加一个新设置，现在所有公司都会看到 6 个设置。

我有一个从 tblSettingsLookup 获取所有设置的页面，用户可以通过复选框从我的应用程序的网页中选择这些设置并将其保存到数据库中。这些用户设置保存在另一个表 tblusersettingsforfirms

tblusersettingsforfirm 有 settingIDFK、firmIDFK 和其他一些列 tblSettingsLookup 有 settingID，设置名称 tblFirm 有 FirmID

我真正需要做的是我想要一个查询，它返回来自 tblSettingsLookup 的所有记录以及基于公司 ID 的公司的所有用户设置。

我试过左外连接但没有希望。我不需要交叉连接

结果应该如下所示：

```
firmid settingname      
1      add user
1      delete user
1      save user
2      add user
2      save user
2      delete user 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T17:59:24.000

你想要的是一个交叉连接和一个左连接：

```
select f.FirmID, l.settingname, u.settingIDFK
from
  tblFirm as f
  cross join tblSettingsLookup as l
  left join tblusersettingsforfirms u
    on u.settingIDFK = l.settingID and u.firmIDFK = f.FirmID 
```

`u.settingIDFK`如果没有用户设置，则返回的值为null。您可能希望从那里的该表中返回一些其他值。

示例结果：

```
firmID  settingname  settingIDFK
1       add user     42
1       delete user  null
1       save user    76
2       add user     14
2       save user    null
2       delete user  null 
```

要过滤掉特定公司的数据，您只需添加一个`where`子句。例子：

```
select f.FirmID, l.settingname, u.settingIDFK
from
  tblFirm as f
  cross join tblSettingsLookup as l
  left join tblusersettingsforfirms u
    on u.settingIDFK = l.settingID and u.firmIDFK = f.FirmID
where f.firmID = 15 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T17:42:12.227

你在寻找这样的东西吗？

```
 SELECT `tblFirm`.`firmid`, `tblusersettingsforfirm`.`settingname`  
    FROM `tblFirm`, `tblusersettingsforfirm`
    WHERE (`tblFirm`.`firmid` =  
    `tblusersettingsforfirm`.`firmIDFK`) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T17:49:52.893

虽然您的描述不是那么清楚（这将有助于显示您想要加入的两个表中的数据以及预期的输出），但*在*我看来，您想简单地显示每个公司的每个设置记录的一个实例。也就是说，实际上，交叉连接（或笛卡尔积）：

```
 SELECT tblFirm.FirmID, tblSettingsLookup.setting_name
   FROM tblFirm, tblSettingsLookup 
```

# c# - 无法在 Image 类中找到 FromStream

> ID：10077219
> 
> 赞同：23
> 
> 时间：2012-04-09T17:37:19.967
> 
> 标签：c#, httpresponse, http-request

我有以下代码：

```
Image tmpimg = null;
HttpWebRequest httpWebRequest = (HttpWebRequest)HttpWebRequest.Create(url);
HttpWebResponse httpWebReponse = (HttpWebResponse)httpWebRequest.GetResponse();
Stream stream = httpWebReponse.GetResponseStream();
return Image.FromStream(stream); 
```

在我输入时的最后一行`Image.`，`FromStream`不在列表中。我能做些什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-10-05T13:29:26.910

更详细的使用示例和所需的命名空间。

```
using System.Net;
using System.IO;
using System.Drawing;

public static Image GetImageFromUrl(string url)
    {
        HttpWebRequest httpWebRequest = (HttpWebRequest)HttpWebRequest.Create(url);

            using (HttpWebResponse httpWebReponse = (HttpWebResponse)httpWebRequest.GetResponse())
            {
                using (Stream stream = httpWebReponse.GetResponseStream())
                {
                    return Image.FromStream(stream);
                }
            }
    } 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-04-05T10:26:05.043

试试这个：

```
 using System.Drawing;
    using System.IO;
    using System.Net;

    public static Image GetImageFromUrl(string url)
    {
        using (var webClient = new WebClient())
        {
            return ByteArrayToImage(webClient.DownloadData(url));
        }
    }

    public static Image ByteArrayToImage(byte[] fileBytes)
    {
        using (var stream = new MemoryStream(fileBytes))
        {
            return Image.FromStream(stream);
        }
    } 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-09T17:39:37.760

你可能需要`using System.Drawing;`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-01T23:24:25.907

顺便说一句，您还需要添加对 System.Drawing.dll 的引用，仅添加 using System.Drawing 是不够的。

# sql - 在具有聚合函数的简单查询中使用 DISTINCT 是多余的吗

> ID：10077222
> 
> 赞同：3
> 
> 时间：2012-04-09T17:37:55.593
> 
> 标签：sql, sql-server, oracle

具有聚合函数的简单查询中的 DISTINCT 是否有任何效果？

```
select DISTINCT salesperson, SUM(sales_amt) from sales GROUP BY salesperson 
```

我意识到有更复杂的查询 DISTINCT*可能*会产生影响，例如：

```
select salesperson, SUM(DISTINCT sales_amt) from sales GROUP BY salesperson 
```

（平台对该语法的支持可能会有所不同）

但我想确认在简单查询示例中，DISTINCT 是多余的。

编辑：修复缺少的 GROUP BY 销售人员

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T17:39:37.077

假设您丢失了`GROUP BY salesperson`（如果您省略 group by，它在 SQL Server 中无效），`DISTINCT`则在您的第一个查询中是多余的。通过聚合`GROUP BY`有效地执行 a 。`DISTINCT``salesperson`

```
select DISTINCT salesperson, SUM(sales_amt) from sales GROUP BY salesperson 
```

正如您所指出的，您是正确的，聚合`DISTINCT` *内部*`SUM()`的放置可能会产生不同的行集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T17:41:48.653

`SELECT DISTINCT [Col1], [Col2], ..., [ColN] FROM [Table]`

是相同的：

`SELECT [Col1], [Col2], ..., [ColN] FROM [Table] GROUP BY [Col1], [Col2], ..., [ColN]`

`DISTINCT`之后`SELECT`是“我想要`GROUP BY`我`SELECT`的 .

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T17:42:34.597

您编写的任何查询都不会执行，因为您需要通过 group by 才能返回聚合 (SUM())。你需要这样的东西：

```
SELECT SalesPerson
, SUM(Sales_AMT) AS SalesAmount
FROM Sales 
GROUP BY SalesPerson 
```

# c++ - 如何使用 mongo C++ API 创建 mongo::BSONObjBuilder 地图？

> ID：10077224
> 
> 赞同：0
> 
> 时间：2012-04-09T17:38:07.843
> 
> 标签：c++, mongodb

我想做这样的事情

```
std::map<int, mongo::BSONObjBuilder> items;

for (i = 0; i <= 10; i++) {
  items[i].append("description", "Car")
          .append("type", "vehicle")
          .append("color", "green");
} 
```

我试过这个，但它会产生编译时错误。这可能吗？如果不是，实现这样的事情的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:23:31.170

问题是 std::map 要求值是可复制的，但 BSONObjBuilder 被明确定义为不可复制：[https](https://github.com/mongodb/mongo/blob/r2.0.4/bson/bsonobjbuilder.h#L86) ://github.com/mongodb/mongo/blob/r2.0.4/bson/bsonobjbuilder.h#L86 。

（请注意，这也发布到我们的邮件列表[https://groups.google.com/forum/?fromgroups#!topic/mongodb-user/ZVdJG64Uqic](https://groups.google.com/forum/?fromgroups#!topic/mongodb-user/ZVdJG64Uqic)。可能会有后续讨论。）

# php - 教义：从名称表中获取随机名称

> ID：10077229
> 
> 赞同：0
> 
> 时间：2012-04-09T17:38:24.853
> 
> 标签：php, doctrine-orm

我有一个只有两列的 SQL 表：“nameid”和“name”。我想从数据库中获取一个随机名称。

在我这样做之前：

```
 $result = mysql_query("SELECT * FROM nametable",$db);
    $number = mysql_num_rows($result);
    $random = rand(1,$number);
    list($name) = mysql_fetch_row(mysql_query("SELECT name FROM nametable WHERE nameid=$random",$db)); 
```

我怎样才能对 Doctrine 做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T17:39:55.173

MySQL 具有生成随机浮点值的功能[`RAND()`](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_rand)。按此排序时，名称将随机排序。在此之后，您只需选择第一个随机排序的名称。

```
SELECT name FROM nametable ORDER BY RAND() LIMIT 1 
```

使用 Doctrine，可以使用

```
$name = Doctrine::getTable('nametable')
  ->createQuery()
  ->select('name')
  ->orderBy('RAND()')
  ->fetchOne(); 
```

# scrum - 什么时候进行冲刺计划？

> ID：10077232
> 
> 赞同：0
> 
> 时间：2012-04-09T17:38:37.630
> 
> 标签：scrum, sprint

迭代 2 的 scrum 计划是在迭代 1 的 sprint 审查（演示/回顾）之后还是之前？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T17:40:47.393

通常，sprint 审查会在 sprint 完成后立即进行，下一次迭代的计划会在此之后的某个时间进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T16:08:36.463

sprint 的正常顺序是这样的：

1.  冲刺计划
2.  开发（与每日 Scrums）
3.  冲刺回顾
4.  冲刺回顾

重复直到项目完成

因此，为了回答您的问题，迭代 2 的 Sprint 计划将在 Sprint 审查和 Sprint 1 的 Sprint 回顾之后进行。

希望有帮助。

# php - 在字符串中同时使用 " 和 ' 的 PHP 回显？

> ID：10077236
> 
> 赞同：1
> 
> 时间：2012-04-09T17:38:55.030
> 
> 标签：php, javascript, html, string

一个字符串如下所示：

```
<form id="unban" method="post" action="unban.php?uid=<? echo $uID; ?>">
                <input type="hidden" name="name" value="" /> 
                <a onclick="document.getElementById('unban').submit();">UnBan</a>
                </form> 
```

而且我需要用大量其他变量来回显它（因为有 if 语句，所以我不能把它放在 php 标签之外）但是我找不到将它存储在变量中并在回显中使用它的方法。我的回声看起来像：

```
echo "<tr><td>" . $row['username'] . "</td><td>" . $banBool . "</td><td>". $status ."</td><td>" . $row['full_name'] . "</td></tr>"; 
```

`$status`根据 if 语句，上面的表格在哪里。

有没有办法将它作为字符串保存并且仍然这样做？

此外，只是为了澄清 javascript 语法需要“目标”并且不允许“目标”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T17:42:17.010

您可以在 PHP if-block 中编写普通 HTML - 只需关闭并重新打开 PHP 标记：

```
<?php
if($something == $somethingelse) {
    ?>
    <form id="unban" method="post" action="unban.php?uid=<?php echo $uID; ?>">
    ...
    </form>
    <?php
} 
```

如果您真的需要将它保存在一个字符串中，只需确保通过**在每个引号之前添加一个反斜杠**来转义包含该字符串的任何类型的引号：

```
$status = '<form id="unban" method="post" action="unban.php?uid='.$uID.'">
            <input type="hidden" name="name" value="" /> 
            <a onclick="document.getElementById(\'unban\').submit();">UnBan</a>
            </form> 
```

（另请注意，您不能在变量中执行回显 - 只需将字符串与变量连接）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T17:45:35.593

每当您输出更复杂的内容或需要两种类型的引号时，您都应该使用[`HEREDOC`](http://php.net/HEREDOC)字符串：

```
echo <<<HTML

    <tr><td> $row[username] </td><td>
    $banBool </td><td> $status </td><td>  $row[full_name] 
    </td></tr>

HTML; 
```

请注意如何避免在此处引用数组键（表现得像双引号字符串）。

如果您需要为 Javascript 使用准备一个字符串，那么另外[`json_encode()`](http://php.net/json_encode)可能是明智的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T17:42:31.710

我喜欢用字符串中的变量回显的最干净的方式是这样的：

```
echo "This is a string with a {$variables["variable"]} in it. If I have to use another double-quote within this string I'll escape it with a \"backslash\"."; 
```

我通常完全避免混合使用单引号和双引号（除非有必要，比如你的 JavaScript 函数，以帮助减少混淆。

你的 HTML 可以这样写：

```
echo "<form id=\"unban\" method=\"post\" action=\"unban.php?uid={$uID}\">
    <input type=\"hidden\" name=\"name\" value=\"\" /> 
    <a onclick=\"document.getElementById('unban').submit();\">UnBan</a>
</form>\n"; 
```

回显的结果字符串将具有自然字符并具有适当的空格格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T17:43:47.140

使用反斜杠转义引号：\'

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T17:57:06.633

你为什么不逃避引号？

```
echo "\"", '\''; // "' 
```

如果这不可能，请查看 PHP 的[heredoc 和 nowdoc](http://www.php.net/manual/de/language.types.string.php)语法。第三种方法是在 IF 语句中间关闭 PHP 块并直接输出 HTML。

哦，你也可以使用[输出缓冲](http://php.net/manual/de/ref.outcontrol.php):-)

# c# - 未发送 HttpClient 身份验证标头

> ID：10077237
> 
> 赞同：25
> 
> 时间：2012-04-09T17:38:57.217
> 
> 标签：c#, .net-4.5, wcf-web-api, dotnet-httpclient

我正在尝试将`HttpClient`用于需要基本 HTTP 身份验证的第三方服务。我正在使用`AuthenticationHeaderValue`. 到目前为止，这是我想出的：

```
HttpRequestMessage<RequestType> request = 
    new HttpRequestMessage<RequestType>(
        new RequestType("third-party-vendor-action"),
        MediaTypeHeaderValue.Parse("application/xml"));
request.Headers.Authorization = new AuthenticationHeaderValue(
    "Basic", Convert.ToBase64String(System.Text.ASCIIEncoding.ASCII.GetBytes(
        string.Format("{0}:{1}", "username", "password"))));

var task = client.PostAsync(Uri, request.Content);
ResponseType response = task.ContinueWith(
    t =>
    {
        return t.Result.Content.ReadAsAsync<ResponseType>();
    }).Unwrap().Result; 
```

看起来 POST 操作工作正常，但我没有取回我期望的数据。通过一些试验和错误，最终使用 Fiddler 嗅探原始流量，我发现授权标头没有被发送。

我见过[这个](https://stackoverflow.com/questions/9772810/headers-disappearing-when-using-httpselfhostserver)，但我认为我已经将身份验证方案指定为`AuthenticationHeaderValue`构造函数的一部分。

有什么我错过的吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-16T20:54:51.933

您的代码看起来应该可以工作 - 我记得在设置授权标头时遇到了类似的问题，并通过执行 Headers.Add() 而不是设置它来解决：

```
request.Headers.Add("Authorization", "Basic " + Convert.ToBase64String(System.Text.ASCIIEncoding.ASCII.GetBytes(string.Format("{0}:{1}", "username", "password")))); 
```

**更新：** 看起来当您执行 request.Content 时，并非所有标头都反映在内容对象中。您可以通过检查 request.Headers 与 request.Content.Headers 来看到这一点。您可能想尝试的一件事是使用 SendAsync 而不是 PostAsync。例如：

```
HttpRequestMessage<RequestType> request = 
     new HttpRequestMessage<RequestType>(
         new RequestType("third-party-vendor-action"),
         MediaTypeHeaderValue.Parse("application/xml"));

request.Headers.Authorization = 
    new AuthenticationHeaderValue(
        "Basic", 
        Convert.ToBase64String(
            System.Text.ASCIIEncoding.ASCII.GetBytes(
                string.Format("{0}:{1}", "username", "password"))));

 request.Method = HttpMethod.Post;
 request.RequestUri = Uri;
 var task = client.SendAsync(request);

 ResponseType response = task.ContinueWith(
     t => 
         { return t.Result.Content.ReadAsAsync<ResponseType>(); })
         .Unwrap().Result; 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-03-14T13:36:05.573

这也可以工作，您不必处理 base64 字符串转换：

```
var handler = new HttpClientHandler();
handler.Credentials = new System.Net.NetworkCredential("username", "password");
var client = new HttpClient(handler);
... 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-05-17T01:58:58.510

尝试在客户端设置标题：

```
DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("Basic", Convert.ToBase64String(Encoding.ASCII.GetBytes(String.Format("{0}:{1}", userName, password)))); 
```

这对我有用。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-03-06T12:30:05.743

实际上你的问题是`PostAsync`- 你应该使用`SendAsync`. 在您的代码中 -`client.PostAsync(Uri, request.Content);`仅发送不包含请求消息标头的内容。正确的方法是：

```
HttpRequestMessage message = new HttpRequestMessage(HttpMethod.Post, url)
{
    Content = content
};
message.Headers.Authorization = new AuthenticationHeaderValue("Basic", credentials);
httpClient.SendAsync(message); 
```

# jquery - CSS/Jquery Layout: make two columns same height

> ID：10077238
> 
> 赞同：0
> 
> 时间：2012-04-09T17:38:59.480
> 
> 标签：jquery, asp.net, css

To be honest, I am not strong on CSS layout. My question is to make the left sidebar having the same height with the right context part. My web code structure:

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true"
CodeBehind="Default.aspx.cs" Inherits="WebTest.Default" %>

<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
<link href="Styles/StyleSheet1.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
<div id="wrap">
    <div id="header">
        <h1>
            TEST</h1>
    </div>
    <div id="nav">
        <asp:Button ID="Lookup" runat="server" Text="Lookup" CssClass="nav_buttons" ClientIDMode="Static"/>

    </div>
    <div id="sidebar">
        <asp:Button ID="Button1" runat="server" Text="Button1" ClientIDMode="Static" CssClass="sidebar_buttons"
            OnClick="Button1_Click" />
        <asp:Button ID="Button2" runat="server" Text="Button2" CssClass="sidebar_buttons" />
    </div>

        <div id="gridview">

        </div>
        <div id="btnSave">
            <asp:Button ID="Edit" runat="server"   Text="Edit" OnClientClick="javascript:Edit_Click();return false;"  CssClass="btnEdit"/>
            <asp:Button ID="Cancel" runat="server" Text="Cancel" CssClass="btnEdit" OnClientClick="javascript:Cancel_Click();return false;" />
        </div>

    <script>
        $(document).ready(function () {
            var divwrap = $("#wrap").height();
            var divgridview = $("#gridview").height();
            var divheader = $("#header").height();
            var divnav = $("#nav").height();
            var divbtn = $("#btnSave").height();
            $("#sidebar").height(divbtn);

        });

        $('.sidebar_buttons').click(function (event) {
            $("#<%=Edit.ClientID %>").show();
            $("#<%=Cancel.ClientID %>").show();
        }); 
    </script>
</div> 
```

The web page snapshot: ![Test page](../Images/a2e96cb821bcf1604b33de3de3bc8205.png) The sidebar is a little higher then the right. Not sure which variable should be used in jquery. When I debugged into the code, I found divbtn is a big number, why? CSS:

```
#wrap
{
width: 800px;
background-color: #99c;
}
#header
{
border-style: solid;
border-width: 1px;
background-color: #ddd;
width: 800px;
padding-top: 30px;
padding-bottom: 30px;
}
#nav
{
background-color: #c99;
padding-top: 30px;
padding-bottom: 30px;
width: 800px;
border-style: solid;
border-width: 1px;
}
#sidebar
{
float: left;
width: 125px;
padding-top: 10px;
background-color: #C0C0C0;
}
#gridview
{
float: right;
overflow: scroll;
width: 675px;
}

.sidebar_buttons
{
 margin-top: 10px;
 margin-left: 2px;
 width: 120px;
}

h1
{
margin-left: 50px;
}
.nav_buttons
{
 margin-left: 50px;
 width: 120px;
}

.btnEdit
{
 width: 60px;
 margin-left: 75px;
 margin-top: 50px;
 }

#btnSave
{
margin-left: 30px;
} 
```

Thanks for help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T21:08:19.283

它们的高度相同。唯一的区别是，侧边栏顶部的边框较窄，而内容部分的顶部边框较粗。

我会尝试这个解决方案。使侧边栏的边框（具有按钮 1 和按钮 2 的部分）的边框更粗，或使右侧的顶部边框更窄。

```
// this is one solution
#sidebar{
    border-top-width:2px; <-- set 2px to what ever is right
}

// this is another
#gridview{
    border-top-width:2px; <-- set 2px to what ever is right
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-09T17:45:38.030

我会使用一个水平列表，而不是 2 个 div 作为列，但这只是我。

# drupal-7 - Why images not displayed in Drupal7?

> ID：10077240
> 
> 赞同：0
> 
> 时间：2012-04-09T17:39:32.860
> 
> 标签：drupal-7

I am using drupal7.12 cms. I have created menu. Menu have sub categories and i have inserted some stories. Issue is that, Images are displayed only on front page of site not on inner pages for that all stories. If i set any of article to front page image will display for that article on front page. But when i want to read whole story it not showing image. Also when i click on any category then also it only shows text and alternative text for images. I have stored all images in following folder "/sites/all/images/" Please help.... Thanks. I am using JD Events template from [http://www.joomlart.com/](http://www.joomlart.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T22:25:13.003

您可能需要针对您的内容类型调整显示。假设您使用的是文章内容类型，请访问[http://yoursite.com/admin/structure/types/manage/article/display](http://yoursite.com/admin/structure/types/manage/article/display)并检查图像字段的设置。

# c++ - 在类中声明结构

> ID：10077248
> 
> 赞同：1
> 
> 时间：2012-04-09T17:39:53.113
> 
> 标签：c++, class, struct

我正在阅读游戏的框架，它的`Door` `struct`内部`Room` `class`内容如下：

```
#include <vector>

class Room{
public:
    struct Door{
        unsigned name;
        unsigned orientation;
        Room* room1;
        Room* room2;
    };
    std::vector<Door*> adjacent;
}; 
```

在类中定义结构的目的是什么？而且，定义结构的访问修饰符是否有所不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T17:43:10.400

> 在类中定义结构的目的是什么？

它只是一个嵌套类型。

> 而且，定义结构的访问修饰符是否有所不同？

如果`Door`已声明`private`，则尝试在此类`Room::Door`之外声明类型的变量将出错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T17:45:43.253

目的是创建一个类型，不仅该类型的*实例*由周围类拥有，而且该类型本身也由周围类拥有。

举一个明显的例子，大多数容器类型都会将该容器的类型定义`iterator`为嵌套类（或结构）。尽管`vector<T>::iterator`并`deque<T>::iterator`表示相似的概念，但每个概念仍归其关联的容器类型所有，并且特定于其关联的容器类型。

就访问说明符而言，它们遵循通常的规则——如果你定义了一个结构/类定义`private`，它只会对同一个类中的其他代码可见。如果是`protected`，则该类及其后代可以看到它。如果它是公开的，那么每个人都可以看到它。

举一个更具体的例子，对于企业中的职位，您可能有：

```
class secretary  {};

class executive {
   class secretary {};
}; 
```

在这种情况下，a`::secretary`是“普通”秘书，an`executive::secretary`是执行秘书——尽管显然相似，但执行秘书通常具有与非执行秘书至少有些不同的职位描述。执行副总裁可能有一个执行秘书和两个“普通”秘书，但较低级别的经理可能只被授权拥有一名普通秘书，而不是执行秘书。

在实际的编程中，你经常有私有的嵌套类——不像执行秘书与普通秘书不同，其中一些是世界其他地方甚至根本不知道它们存在的东西（至少除非它们看起来当然在标题的私人部分）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T17:51:44.720

> 在类中定义结构的目的是什么？而且，定义结构的访问修饰符是否有所不同？

关于目的，没有两个人会给你相同的答案，但是我们可以告诉你效果是什么：

*   在 Room 的范围内，您可以将类称为 Door。

*   在 Room 范围之外，您必须将类称为 Room::Door

*   是的，类型的可见性与任何类成员相同，并受私有、受保护和公共的影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T17:42:29.527

简短的回答：除了默认访问之外，在 C++ 中的`struct`意思`class`完全相同*。*Door 只是一个嵌套类。换句话说：

```
struct Door{
    ... 
```

是相同的：

```
class Door{
    public:
    ... 
```

嵌套类对于组织和文档的原因很有用。它类似于命名空间，但早`namespace`于 C++。

# python - Printing Lists in python

> ID：10077251
> 
> 赞同：1
> 
> 时间：2012-04-09T17:40:02.393
> 
> 标签：python, list, printing

I am having issues trying to print a list in python. I want to print out all of the items in a list with the following code, specifically the last two lines.

```
def primefind(n):
  mylist = []
  x = 3
  while (x < n/2):
    if ((n % x) == 0):
      mylist.append(x)
      x = x + 2
  for item in mylist:
    print item 
```

I am getting a syntax error when I run this. It highlights "item" in the last line. As far as I can tell it's syntactically correct so I am confused! Even this site shows the same syntax as I've used [http://effbot.org/zone/python-list.htm#looping](http://effbot.org/zone/python-list.htm#looping)

Any ideas where I've gone wrong?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-09T17:41:26.303

You are using Python 2.x syntax with a 3.x interpreter. `print` is a function in Python 3.x, so you should use

```
print(item) 
```

instead.

# python - Google Docs python gdata 2.0.16 upload file to existing collection

> ID：10077253
> 
> 赞同：2
> 
> 时间：2012-04-09T17:40:09.673
> 
> 标签：python, collections, upload, gdata, google-docs

I have managed to create a simple app which deletes (bypassing the recycle bin) any files I want to. It can also upload files. The problem I am having is that I cannot specify which collection the new file should be uploaded to.

```
def UploadFile(folder, filename, local_file, client):
    print "Upload Resource"
    doc = gdata.docs.data.Resource(type='document', title=filename)
    path = _GetDataFilePath(local_file)
    media = gdata.data.MediaSource()
    media.SetFileHandle(path, 'application/octet-stream')
    create_uri = gdata.docs.client.RESOURCE_UPLOAD_URI + '?convert=false'
    collection_resource = folder
    upload_doc = client.CreateResource(doc, create_uri=create_uri, collection=collection_resource, media=media)
    print 'Created, and uploaded:', upload_doc.title, doc.resource_id 
```

From what I understand the function CreateResources requires a resource object representing the collection. How do I get this object? The variable folder is currently just a string which says 'daily' which is the name of the collection, it is this variable which I need to replace with the collection resource.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T04:12:59.477

从各种来源，片段和一般的东西，我设法解决了这个问题。您需要将 uri 传递给 FindAllResources 函数（我在 gdata 的示例代码中没有提到该函数）。

我已经更详细地写了我是如何设法上传、删除（绕过垃圾箱）、搜索文件并将其移动到集合中的

[这里](http://shadowbadger.wordpress.com/2012/04/11/uploading-deleting-bypassing-the-bin-and-searching-for-documents-on-google-docs-with-python-gdata/)

# pki - What to use for public key certificate validation, Certificate Depository via LDAP or an OCSP responder?

> ID：10077255
> 
> 赞同：1
> 
> 时间：2012-04-09T17:40:28.123
> 
> 标签：pki

So i was sniffing through the pages of PKI's Overview by Joel Weise (http://highsecu.free.fr/db/outils_de_securite/cryptographie/pki/publickey.pdf) and one thing i didn't quite get is, when to use an OCSP responder over LDAP for checking up the validity of a given certificate ? Say some CA exposes both - when to use the OCSP service, when to use the Certificate Depositories LDAP servers ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T11:07:52.693

以这种方式思考可能会有所帮助。

证书颁发机构生成证书吊销列表 (CRL)。（您可以直接查询 CA，但这是一个坏主意，因为有暴露私钥（秘密）的风险）。

然后可以通过 LDAP 或 HTTP 使 CRL 可用。（如果你有一个小部署，你可能会在这里停下来）

OCSP 服务器（或验证机构，取决于当地语言）也可以使用 CRL。一旦这样做，它就可以处理验证（证书状态）请求。（如果您有更大的部署并且处理 CRL 很麻烦，您可能会考虑使用此选项）

有一些选项（第 3 方，例如不是 Microsoft）可以让分布式 OCSP 响应者预先签署响应，然后转发和存储（而不是多个 OCSP 服务器）。（考虑您是否仍然有一个相对较大的部署，并且您有网络可用性、规模、加载问题作为另一种选择）。

最后确保您不仅要检查证书状态，还要检查证书信任。在联合环境中，您可能需要考虑将服务器证书验证协议 (SCVP) 作为上述内容的补充。

# c++ - 如何在 C++ 中调试双重删除？

> ID：10077256
> 
> 赞同：12
> 
> 时间：2012-04-09T17:40:40.817
> 
> 标签：c++, debugging, memory-management

我正在维护一个用 C++ 编写的遗留应用程序。它时不时地崩溃，Valgrind 告诉我它对某个对象的双重删除。

在您不完全理解并且太大而无法重写的应用程序中找到导致双重删除的错误的最佳方法是什么？

请分享您的最佳提示和技巧！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T18:00:34.360

以下是一些在这种情况下对我有帮助的一般性建议：

1.  如果您使用的是记录器，请将您的日志记录级别提高到完全调试。在输出中寻找可疑的东西。如果您的应用程序没有记录指针分配和可疑对象/类的删除，那么是时候`cout << "class Foo constructed, ptr= " << this << endl;`在您的代码中插入一些语句（以及相应的`delete`/destructor 打印）。
2.  使用 --db-attach=yes 运行 valgrind。我发现这非常方便，虽然有点乏味。Valgrind 会在每次检测到显着的内存错误或事件时向您显示堆栈跟踪，然后询问您是否要调试它。如果您的应用程序很大，您可能会发现自己多次反复按“n”，但请继续寻找第一次（和第二次）删除相关对象的代码行。
3.  只需搜索代码。寻找相关对象的构造/删除。可悲的是，有时它最终会出现在第 3 方库中:-(。
4.  **更新**：最近才发现：显然 gcc 4.8 及更高版本（如果您可以在系统上使用 GCC）具有一些用于检测内存错误的新内置功能，即“[地址清理](http://www.phoronix.com/scan.php?page=news_item&px=MTIzOTU)程序”。也可用于[LLVM 编译器系统](http://llvm.org/Features.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T17:53:17.643

是的。@OliCharlesworth 说了什么。没有万无一失的方法来测试指针以查看它是否指向已分配的内存，因为它实际上只是内存位置本身。

您的问题暗示的最大问题是缺乏可重复性。考虑到这一点，您将无法将简单的“删除”结构更改为`delete foo;foo = NULL;`.

即使那样，最好的情况也是“它似乎发生得更少”，直到你真正把它压下来。

我还想问 Valgrind 有什么证据表明这是一个双重删除问题。可能是一个更好的线索在那里徘徊。

这是更简单的真正令人讨厌的问题之一。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T18:54:05.137

这可能适合您，也可能不适合您。

很久以前，我正在开发 1M+ 行的程序，当时只有 15 岁。面临完全相同的问题 - 使用庞大的数据集进行双重删除。有了这样的数据，任何开箱即用的“内存分析器”都是不行的。

我身边的事情：

1.  这是非常可重现的——我们有宏语言并运行相同的脚本，每次都以完全相同的方式重现它
2.  在项目历史的某个时候，有人认为“#define malloc my_malloc”和“#define free my_free”有一些用处。这些只是调用内置的 malloc() 和 free() 并没有做更多的事情，但是项目已经编译并以这种方式工作。

现在的技巧/想法：

```
my_malloc(int size)
{
   static int allocation_num = 0;  // it was single threaded

   void* p = builtin_malloc(size+16);

   *(int*)p = ++allocation_num;
   *((char*)p+sizeof(int)) = 0; // not freed

   return (char*)p+16;  // check for NULL in order here
}

my_free(void* p)
{
    if (*((char*)p+sizeof(int)))
    {
        // this is double free, check allocation_number
        // then rerun app with this in my_alloc
        //    if (alloc_num == XXX) debug_break();
    }

    *((char*)p+sizeof(int)) = 1; // freed

    //built_in_free((char*)p-16);  // do not do this until problem is figured out
} 
```

使用 new/delete 可能会更棘手，但仍然使用 LD_PRELOAD 您可以替换 malloc/free，甚至无需重新编译您的应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T18:30:38.363

您可能是从一个处理 delete 的版本与新版本不同的版本升级。

可能以前的版本所做的是在`delete`被调用时进行静态检查`if (X != NULL){ delete X; X = NULL;}`，然后在新版本中它只是执行`delete`操作。

您可能需要检查指针分配，并从构造到删除跟踪对象名称的引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T20:31:45.983

我发现这很有用：[backtrace() on linux](http://www.kernel.org/doc/man-pages/online/pages/man3/backtrace.3.html)。（您必须使用 -rdynamic 进行编译。）这可以让您通过在所有内存操作（新/删除）周围放置一个 try/catch 块然后在 catch 块中打印出您的堆栈跟踪来找出双重释放的来源。

这样，您可以比运行 valgrind 更快地缩小嫌疑人范围。

我将 backtrace 包装在一个方便的小类中，这样我就可以说：

```
try {
  ...
} catch (...) {
  StackTrace trace;
  std::cerr << "Double free!!!\n" << trace << std::endl;
  throw;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T16:47:29.777

在 Windows 上，假设应用程序是使用 MSVC++ 构建的，您可以利用标准库调试版本中内置的大量[堆调试工具。](http://msdn.microsoft.com/en-us/library/974tc9t1%28v=vs.100%29.aspx)

同样在 Windows 上，您可以使用[Application Verifier](http://msdn.microsoft.com/en-us/library/dd371695%28v=vs.85%29.aspx)。如果我没记错的话，它有一种模式可以将每个分配强制到一个单独的页面上，中间有受保护的保护页面。它在查找缓冲区溢出方面非常有效，但我怀疑它对于双重释放情况也很有用。

您可以（在任何平台上）做的另一件事是制作已转换的源的副本（可能使用宏），以便每个实例：

```
delete foo; 
```

替换为：

```
{ delete foo; foo = nullptr; } 
```

（大括号在许多情况下都有帮助，尽管它并不完美。）这会将许多 double-free 实例转换为空指针引用，从而更容易检测到。它并不能捕获所有内容。您可能有一个过时指针的副本，但它可以帮助压缩许多常见的删除后使用场景。

# c# - Auto complete property in asp.net c#

> ID：10077259
> 
> 赞同：1
> 
> 时间：2012-04-09T17:40:51.673
> 
> 标签：c#, asp.net, keyboard-shortcuts

I have noticed many times developers use like a quick key to generate properties but I can not find what that key is. Is there a list i can look at with all the short keys?. what i am referring to is like when you do

`Highlight method + F12` takes you to the reference (for example), there is one specifically that would help me a lot, the property auto complete it usually puts something like

`public int something`, and the color shows as green or something. Any help would be much appreciated.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T17:44:40.183

这是通过片段完成的。可以通过键入`prop`然后按 TAB 来扩展默认代码段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T17:59:13.270

我认为您看到的是[CodeRush](http://www.devexpress.com/Products/Visual_Studio_Add-in/Coding_Assistance/)。如果这个视觉是你所指的绿色，那就是 CodeRush：

![在此处输入图像描述](../Images/2e423598219b728103734a66faea1a57.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T17:49:35.453

此外，如果智能永远“不存在”，只需按 control + space。在 Netbeans 和 Visual Studio 中工作

# html - SVG 内容是否应该在嵌入的外部可见 by default?

> ID：10077264
> 
> 赞同：9
> 
> 时间：2012-04-09T17:41:22.447
> 
> 标签：html, css, svg, w3c, html5boilerplate

过去，我回答了一个关于 SVG 图像`overflow: hidden`在 IE9 中没有被“裁剪”（答案就[在这里](https://stackoverflow.com/a/5971504/191837)。

今天，在再次查看 HTML5 Boilerplate 时，我注意到他们声称他们[“[正确]溢出没有隐藏在 IE9 中”](http://html5boilerplate.com/html5boilerplate-site/built/en_US/docs/css/#embedded-content)，并使用以下代码：

```
svg:not(:root) { overflow: hidden; } 
```

我正在寻找某人通过指出 HTML5 或 SVG 规范中的其他注释来确认或否认我的原始研究。我找不到任何东西，但我想确保我没有遗漏任何东西。

我能找到的最好的是他们正在尝试在[此处](http://www.w3.org/TR/SVG/masking.html#InitialClippingPath)应用规则 7 ，但这应该仅适用于 SVG 文档，例如通过`img`标签或直接加载时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T18:18:07.633

[使用您指定的理由（特别是规范](http://www.w3.org/TR/SVG/masking.html#InitialClippingPath)的第五和第七点），您的原始答案对我来说似乎是合理的。

IE 是正确的而 Webkit 和 Firefox 不是正确的似乎极不可能。但是，您怀疑第七个要点*是*差异化因素。

如果您在 Chrome 中加载[此测试用例](http://jsfiddle.net/HRsvX/)并使用开发者工具检查 SVG，您将看到：

> **`(user agent stylesheet)`**
> 
> ```
> svg:not(:root), symbol, image, marker, pattern, foreignObject {
>   overflow: hidden;
> } 
> ```

如果您在 Firebug 中启用“显示用户代理 CSS”，您会在 Firefox 中看到以下规则：

> **`svg.css (line 49) <System>`**
> 
> ```
> svg:not(:root), symbol, image, marker, pattern, foreignObject {
>   overflow: hidden;
> } 
> ```

最后，如果您编辑要添加的测试用例，`svg { overflow:hidden }`则 IE 在视觉上与其他浏览器匹配。

因此，在我看来，所有三种浏览器的行为都符合规范，但 Chrome/Safari/FF 都具有更符合大多数用户期望的 UA 规则。

*如果我可以独自离开，这就是我要停止回答的地方。*

但是，如果您[编辑测试用例添加`svg { overflow:visible }`](http://jsfiddle.net/HRsvX/1/)，Chrome 和 Firefox 都不会“正确”显示溢出的内容。我不确定如何用这个答案的其余部分来解决这个数据点。：/

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T18:52:18.540

SVG 规范有这样的说法：[http ://www.w3.org/TR/SVG/styling.html#UAStyleSheet](http://www.w3.org/TR/SVG/styling.html#UAStyleSheet)

似乎类似于 Firefox 和 Chrome 不做的事情？

# sockets - Erlang accepting SSL connection is really slow (comparing to C++)

> ID：10077269
> 
> 赞同：11
> 
> 时间：2012-04-09T17:41:37.223
> 
> 标签：sockets, ssl, erlang

I'm currently testing extreme condition on a piece of code written with Erlang.

I have implemented [learnyousomeerlang.com](http://learnyousomeerlang.com/buckets-of-sockets#sockserv-revisited)'s technique of supervisor to have multiple accept capability.

Here the code slightly modified to handle SSL connections of the supervisor:

```
-module(mymodule).

-behaviour(supervisor).

-export([start/0, start_socket/0]).
-define(SSL_OPTIONS, [{active, true},
              {mode, list},
              {reuseaddr, true},
              {cacertfile, "./ssl_key/server/gd_bundle.crt"},
              {certfile, "./ssl_key/server/cert.pem"},
              {keyfile, "./ssl_key/server/key.pem"},
              {password, "********"}
             ]).

-export([init/1]).

start_link() ->
    application:start(crypto),
    crypto:start(),
    application:start(public_key),
    application:start(ssl),
    supervisor:start_link({local, ?MODULE}, ?MODULE, []).

init([]) ->
    {ok, LSocket} = ssl:listen(4242, ?SSL_OPTIONS),
    spawn_link(fun empty_listeners/0),
    {ok, {{simple_one_for_one, 60, 3600},
      [{socket,
        {mymodule_serv, start_link, [LSocket]}, % pass the socket!
        temporary, 1000, worker, [mymodule_serv]}
      ]}}.

empty_listeners() ->
    [start_socket() || _ <- lists:seq(1,100)],
    ok.

start_socket() ->
    supervisor:start_child(?MODULE, []). 
```

Here's the code for gen_server which will represent every client connecting :

```
-module(mymodule_serv).
-behaviour(gen_server).

-export([start_link/1]).
-export([init/1, handle_call/3, handle_cast/2, terminate/2, code_change/3, handle_info/2]).

start_link(Socket) ->
    gen_server:start_link(?MODULE, Socket, []).

init(Socket) ->
    gen_server:cast(self(), accept),
    {ok, #client{socket=Socket, pid=self()}}.

handle_call(_E, _From, Client) ->
    {noreply, Client}.

handle_cast(accept, C = #client{socket=ListenSocket}) ->
    {ok, AcceptSocket} = ssl:transport_accept(ListenSocket),
    mymodule:start_socket(),
    ssl:ssl_accept(AcceptSocket),
    ssl:setopts(AcceptSocket, [{active, true}, {mode, list}]),
    {noreply, C#client{socket=AcceptSocket, state=connecting}}.

[...] 
```

I have the ability to launch close to 10.000 connections at once from multiple server. While it will take 10 second to a ssl accepting bit of C++ code to accept all of them (which don't even have multiple accept pending), in Erlang this is quite different. It will accept at most 20 connections a second (according to netstat info, whilst C++ accept more like 1K connection per seconds)

While the 10K connections are awaiting for acceptance, I'm manually trying to connect as well.

```
openssl s_client -ssl3 -ign_eof -connect myserver.com:4242 
```

3 cases happen when I do :

*   Connection simply timeout
*   Connection will connect after waiting for it 30 sec. at least
*   Connection will occur almost directly

When I try connecting manually with 2 consoles, the first done handshaking will not always be the first which tried to connect... Which I found particular.

The server configuration is :

*   2 x Intel® Xeon® E5620
*   8x 2.4GHz
*   24 Go RAM

I'm starting the Erlang shell with :

```
$erl +S 8:8 
```

**EDIT 1:**

I have even tried to accept the connection with gen_tcp, and upgrading afterwards the connection to a SSL one. Still the same issue, it won't accept more than 10 connections a second... Is ssl:ssl_accept is doing this ? does it lock anything that would prevent Erlang to scale this ?

**EDIT 2:**

After looking around on other SSL server created in erlang, it seems that they use some kind of driver for SSL/TLS connection, my examples are RabbitMQ and EjabberD. Nowhere there is ssl:ssl_accept in their Erlang code, I haven't investigate a lot, but it seems they have created their own driver in order to upgrade the TCP Socket to a SSL/TLS one. Is that because there is an issue with Erlang's module SSL ? Does anyone know why they are using custom driver for SSL/TLS ?

Any thoughts on this ?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T15:26:58.137

实际上，减缓整个过程的并不是 SSL 接受或握手。

我们在 erlang 问题列表中发现它是 backlog。

默认情况下，积压设置为 5。我已将其设置为 SOMAXCONN，现在一切正常！

# c - 如何编写一个根据命令行参数将字母转换为大写或小写的程序？

> ID：10077274
> 
> 赞同：0
> 
> 时间：2012-04-09T17:42:12.873
> 
> 标签：c

我正在为一个 C 程序编写这段代码，该程序在调用时将字母转换为小写：

```
./arg lower 
```

并在调用时将它们转换为大写：

```
./arg upper 
```

这是我写的代码，请帮助我：

```
#include<stdio.h>
#include<ctype.h>
main(int argc,char *argv[])
{
    int i;
    char c;
    for(i=1;i<argc;++i)
    {

        if(*(argv+i)=="lower")
        {
             while((c=getchar())!=EOF)
                 {
                      c=tolower(c);
                      putchar(c);
                 }
        }
        if(*(argv+i)=="upper")
        {
            while((c=getchar())!=EOF)
                 {
                      c=toupper(c);
                      putchar(c);
                 }                    
        }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T17:44:13.557

你不能像在 C 中那样做字符串比较，你需要使用`strcmp(3)`.

更好的是，使用`strncmp(3)`并指定缓冲区的大小。

最后，对于数组访问，您可以使用`argv[i]`代替`*(argv+i)`. 含义相同，但第一个版本更具可读性。

所以，你会想要这样的东西：

```
if (0 == strncmp(argv[i], "lower", 6)) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-09T17:44:02.893

您必须使用该`strcmp()`函数来比较字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T17:45:13.053

这样做时，`*(argv+i)=="lower"`您实际上是在将指针与此类 c 字符串进行比较。您需要使用`strcmp`来查看此类字符串的内容是否相等，在这种情况下`strcmp` 返回零。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T18:05:20.363

`fgetc`返回一个 int，而不是一个 char。如果你截断它，这次你会没事的，但是在处理二进制数据时会遭受可怕的折磨。

# jquery - Using Jquery eq() to get specific DIV?

> ID：10077276
> 
> 赞同：0
> 
> 时间：2012-04-09T17:42:17.570
> 
> 标签：jquery

I have a block of code below that I am using when the next button on my quiz is clicked to go to the next question. There are 4 possible answers(input radio buttons) inside each .questionContainer div, of which there are 5 for the 5 questions.

I want to allow the user to click on a specific question number and go right to that question. The .next() line of code is working correctly to advance to the next question and possible answeres, but the line that I have commented out does not work. What am I doing wrong??? Thanks

```
$('.btnNext').click(function(){
    $(this).parents('.questionContainer').fadeOut(500, function(){
        $(this).next().fadeIn(500);
    //$(this).eq(1).fadeIn(500);
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T17:47:31.863

我建议使用：

```
$('.questionContainer').eq($(this).index()).fadeIn(500); 
```

这假设您正在单击一个`a`（或其他元素），该元素的兄弟姐妹对应于`.questionContainer`每个应该显示的元素，类似于：

```
<div id="wrapper">
    <div class="questionContainer">
        <!-- question one -->
    </div>
    <div class="questionContainer">
        <!-- question two -->
    </div>
    <div class="questionContainer">
        <!-- question three -->
    </div>
    <div class="questionContainer">
        <!-- question four -->
    </div>
    <div class="questionContainer">
        <!-- question five -->
    </div>
</div>

<div id="buttons">
    <a href="#">Question 1</a>
    <a href="#">Question 2</a>
    <a href="#">Question 3</a>
    <a href="#">Question 4</a>
    <a href="#">Question 5</a>
</div> 
```

如果您单击的元素不是同级元素，则可以将选择器传递给该`index()`方法以查找正确的索引。这可以是任何 CSS 类型的选择器，基于类名、元素类型、父级...等。

您的第一段代码没有而且*不能*工作的原因是`$(this)`(and `this`) 一次只能引用一个元素/DOM 节点，因此`this`(and `$(this)`) 总是有一个隐式索引`0`(是第一个，也是唯一一个元素集合中的元素）。

参考：

*   [`index()`](http://api.jquery.com/index/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T18:11:02.257

您可能还想尝试使用通配符“$”，它告诉 jQuery 匹配任何以 $ 结尾的 id；并设置问题的 div ids = "q1" 到 "q5"：

```
 var q_nbr = 1 //create a variable in the global scope for the question number
  $(function() {
    $("#btnNext").click(
      function() {
        $("[id$=" + q_nbr + "]").fadeOut(500); // you may wish to omit this
        q_nbr++
        $("[id$=" + q_nbr + "]").fadeIn(500);
      }
    );
  }); 
```

# php - 我的图像需要永远加载

> ID：10077281
> 
> 赞同：2
> 
> 时间：2012-04-09T17:42:28.590
> 
> 标签：php, jquery, html

我有我正在处理的网站，图像需要永远加载，它们来自服务器，并且正在使用 php 上传上传，正在上传的图像 ar 1212x2564 或类似

这是我正在使用的 html img 属性

```
<img src="upload/<?php echo $array['image'] ?>" width="500" /> 
```

我的网站是[http://www.willruppelglass.com/](http://www.willruppelglass.com/)

为什么我的图像加载需要很长时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T17:44:35.950

这些图像非常庞大，并且正在以其原始分辨率下载。作为 HTML 参数或使用 CSS 为图像提供特定宽度只会拉伸/缩小原始图像，它**不会**为您更改分辨率或文件大小。

为了加快加载速度，您应该创建图像的缩略图版本，其实际分辨率为 500 像素。

如果您让我们知道您使用的是什么操作系统，我们可以推荐用于创建缩略图的工具。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T17:44:48.283

这些图像很大，如果您希望它们在合理的时间内加载，则需要大幅减小它们的大小。

您可以免费使用[WebResizer](http://www.webresizer.com/)来帮助您解决这个问题，或者使用您最喜欢的图形编辑程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T17:52:18.273

如果您对这些东西不熟悉，有时值得使用 wordpress 之类的东西，因为它包含自动图像调整大小。您可以定义要在某些区域使用的图像大小，即使您上传原始全尺寸图像，wp 也会创建正确站点的图像。显然这需要一些配置，但它可能比尝试使用 php 从头开始​​构建图像调整器更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T17:49:01.807

您需要使用服务器端图像处理将它们缩小到 Web 可接受的大小。

[http://www.zeronese.net/knowledge-base/articles/article-1060.html](http://www.zeronese.net/knowledge-base/articles/article-1060.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T19:22:22.053

你的图片太大了。我的意思是，它们不仅有点大，而且太大了。我从不推荐任何大于 1600 像素的东西。

# .net - WCF 激活异常 - 未提供服务的基地址

> ID：10077293
> 
> 赞同：0
> 
> 时间：2012-04-09T17:43:20.613
> 
> 标签：.net, wcf, workflow-foundation, endpoint

ServiceActivationException：服务'//Service.svc'由于编译过程中的异常而无法激活。异常消息是：未提供服务的基地址。提供至少一个基地址。

我在 web.config 中提供了基地址

```
<system.serviceModel>
<services>
  <service name="WFService.Service1" behaviorConfiguration="WFService.Service1Behavior">
    <endpoint name="json" address="http://localhost:3003/WFServiceHost/Service.svc/json" binding="webHttpBinding" bindingConfiguration="webHttpBindingConfig" contract="WFService.IService" behaviorConfiguration="WFServiceJsonEndpointBehavior"/>
    <host>
      **<baseAddresses>
        <add baseAddress="http://localhost:3003/WFServiceHost/Service.svc"/>
      </baseAddresses>**
    </host>
  </service>
</services> 
```

在 service.svc - 我有 Factory="System.ServiceModel.Activation.WorkflowServiceHostFactory"

任何想法，它的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:09:47.533

baseAddress 不应包含 Service.svc

```
 <system.serviceModel>
    <services>
      <service name="WFService.Service1" behaviorConfiguration="WFService.Service1Behavior">
        <endpoint name="json" address="json" binding="webHttpBinding" bindingConfiguration="webHttpBindingConfig" contract="WFService.IService" behaviorConfiguration="WFServiceJsonEndpointBehavior"/>
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:3003/WFServiceHost/"/>
          </baseAddresses>
        </host>
      </service>
    </services> 
```

# scala - x = y =1 在 Scala 中？

> ID：10077294
> 
> 赞同：14
> 
> 时间：2012-04-09T17:43:26.897
> 
> 标签：scala, return-value, variable-assignment, return-type

在阅读[Scala for the Impatient](https://rads.stackoverflow.com/amzn/click/com/0321774094)一书时，我遇到了这个问题：

> 想出一种情况，即赋值 x = y = 1 在 Scala 中有效。（提示：为 x 选择合适的类型。）

我不确定作者这个问题到底是什么意思。赋值不返回值，所以`var x = y = 1`应该返回 Unit() 作为 x 的值。有人可以指出我在这里可能缺少什么吗？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-09T17:49:37.700

其实`x`就是`Unit`在这种情况下：

```
var y = 2
var x = y = 1 
```

可以读作：

```
var y = 2
var x = (y = 1) 
```

最后：

```
var x: Unit = () 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-09T17:49:47.877

您可以`x=y=1`在没有错误的情况下输入 REPL shell：

```
var x:Unit = {}
var y = 0
x = y = 1 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-09T21:28:49.087

这是另一种鲜为人知的情况，其中 setter 方法返回其参数。请注意，类型`x`实际上`Int`在这里：

```
object AssignY {
  private var _y: Int = _
  def y = _y
  def y_=(i: Int) = { _y = i; i }
}

import AssignY._

var x = y = 1 
```

*（此功能在 XScalaWT 库中使用，并在[该问题](https://stackoverflow.com/questions/4967492/about-scalas-assignments-and-setter-methods)中进行了讨论。）*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T16:03:11.870

顺便说一句，如果仍然需要为两个变量分配相同的值，则使用：

```
scala> var x@y = 1
x: 整数 = 1
y: 整数 = 1

```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-15T10:16:56.110

这是有效的，但不明智，这会造成混乱。

```
scala> var x=y=1
x: Unit = ()

scala> y
res60: Int = 1

scala> var x@y = 1
x: Int = 1
y: Int = 1 
```

# android - 如何在listview android中存储选中的列表状态？

> ID：10077295
> 
> 赞同：0
> 
> 时间：2012-04-09T17:43:27.603
> 
> 标签：android, checkbox, simplecursoradapter, listadapter, onitemclicklistener

我正在使用列表视图来显示三个文本视图（这些文本视图的值来自数据库）和一个复选框。我想在用户单击复选框时存储复选框状态并在他们回来时显示它。但是，我是 android 开发的新手，我不知道该怎么做。我尝试将复选框添加到列表视图，但 onitemclick 已禁用。以下是代码，

这是从数据库中检索值并在列表视图中列出的游标，

```
Cursor yearcursor = db.paymentall(this); 
 String[] yearfrom = new String[]  
{ PaymentAppDataBase.REQUESTEDDATE,PaymentAppDataBase.PAYMENTNAME,PaymentAppDataBase.AMOUNT };
 int[] yearto = new int[] { R.id.Date,R.id.Name,R.id.Amount };

            SimpleCursorAdapter yearadapter =

 new SimpleCursorAdapter(this, R.layout.listview, yearcursor, yearfrom, yearto);

setListAdapter(yearadapter);

 amount.setOnItemClickListener(new OnItemClickListener() {

@Override

public void onItemClick(AdapterView<?> parent, View view, int position,

 long id) {

 Cursor cursor = (Cursor) parent.getItemAtPosition(position);

 String toaddressreview = cursor.getString(4);

 String subjectreview = cursor.getString(5);

 String emailbodyreview = cursor.getString(6);

 Intent todayreview = new Intent(ReviewPayment.this,ReviewandResend.class);

todayreview.putExtra("toadd", toaddressreview);

 todayreview.putExtra("subjectreveiew", subjectreview);

 todayreview.putExtra("emailbody", emailbodyreview);

 startActivity(todayreview);

 }

}); 
```

**MT.xml 文件：**

```
<?xml version="1.0" encoding="utf-8"?> 
<RelativeLayout

xmlns:android="http://schemas.android.com/apk/res/android"

android:paddingTop="4dip"

android:paddingBottom="6dip"

 android:layout_width="fill_parent"

android:layout_height="wrap_content"

android:orientation="horizontal">

 <TextView android:id="@+id/Date"

 android:layout_width="100dip"

 android:layout_height="wrap_content"

 android:textSize="14sp"/>

<TextView android:id="@+id/Name"

 android:layout_width="120dip"

android:layout_height="wrap_content" 

android:layout_weight="2" 

 android:scrollbarAlwaysDrawHorizontalTrack="true"

 android:layout_toRightOf="@+id/Date"/>

<TextView android:id="@+id/Amount"

 android:layout_width="50dip"

android:layout_height="20dip"  

 android:scrollbarAlwaysDrawHorizontalTrack="true" 

 android:layout_weight="2"

 android:layout_toRightOf="@+id/Name"/>

<CheckBox

 android:id="@+id/checkBox1"

 android:layout_width="wrap_content"

 android:layout_height="50dip"

 android:layout_alignBottom="@+id/Amount"

 android:layout_alignParentRight="true"

 android:layout_toRightOf="@+id/Amount" />

</RelativeLayout> 
```

如果我能得到两个问题的答案，那就太好了，

**1.**如何保存复选框的状态？

**2.**使用复选框时如何启用onitemclicklistener？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:09:25.470

1.  没有简单的方法，只能保持一个布尔数组等于列表项的数量并存储状态。您需要使其成为您从 SimpleCursorAdapter 派生的自定义适配器的成员变量。

2.  同样，它需要成为您的自定义适配器的一部分。在适配器的 getView() 函数中，您需要为复选框实现 onCheckedChangeListener() [现在不记得确切的名称]，并在拥有列表视图的主 Activity 中，将 onItemClickListener() 设置为列表显示。

如果这没有意义，只需在stackoverflow中进行一些操作。这个问题已经被处理过无数次了。

# google-app-engine - NDB 中的一对多示例

> ID：10077300
> 
> 赞同：7
> 
> 时间：2012-04-09T17:43:44.803
> 
> 标签：google-app-engine, app-engine-ndb

我正在尝试创建像学生和科目这样的 ndb.Model 类

```
class Subject(ndb.Model):
     name = ndb.StringProperty()

class Student(ndb.Model):
    name = ndb.StringProperty()
    subject = ndb.KeyProperty(kind=Subject) 
```

一个学生可以有多个科目。如何在这个模型中添加和存储这些。我找不到任何例子。对于字符串属性 .. 有字段属性，即 repeat=true

如何实现这一点，网络上是否有任何工作示例。抱歉，如果这是重复的问题，但我尝试用我有限的技能来搜索这个论坛。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-20T13:40:24.393

当我需要 1 到多个时，我会使用重复的 keyProperties。代码：

```
class Subject(ndb.Model):
     name = ndb.StringProperty()

class Student(ndb.Model):
    name = ndb.StringProperty()
    subjects = ndb.KeyProperty(kind='Subject', repeated=True) 
```

模板：

```
{% for subject in student.subjects %}
  {{subject.get().name}}
{% endfor %} 
```

ndb 是 nosql，因此您不会在子项中找到对父项的引用。但是，您可以像这样添加它。创建新学科时不要忘记设置学生键值。

```
class Subject(ndb.Model):
     name = ndb.StringProperty()
     student = ndb.KeyProperty(kind='Student')

class Student(ndb.Model):
    name = ndb.StringProperty()
    subjects = ndb.KeyProperty(kind='Subject', repeated=True) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T17:55:02.630

使用主题作为关键。

```
me = Student(key_name='KurzedMetal')
programming = Subject(key_name='Programming')
programming.put()
me.subject = programming.key()
me.put() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-03T21:47:50.000

定义：

```
class Subject(ndb.Model):
     name = ndb.StringProperty()

class Student(ndb.Model):
    name = ndb.StringProperty()
    subject = ndb.KeyProperty(kind=Subject,repeated=True) 
```

用法：

```
subject1 = Subject()
subject1.put()
subject2 = Subject()
subject2.put()
student = Student()
student.subject.append(subject1.key)
student.subject.append(subject2.key)
student.put() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T17:34:59.630

这看起来像一个老问题。如果其他人目前需要这个，您应该查看 `Structured Properties` [https://developers.google.com/appengine/docs/python/ndb/properties#structured](https://developers.google.com/appengine/docs/python/ndb/properties#structured)。该示例非常清晰且易于理解。

# winsock - winsock 套接字作为文件句柄

> ID：10077305
> 
> 赞同：5
> 
> 时间：2012-04-09T17:44:06.907
> 
> 标签：winsock, filehandle

几个小时以来，我一直在摸不着头脑，一直在寻找答案。基本上我所做的是打开一个到其他机器的套接字并从中读取数据。这个套接字通过 fdopen 调用“转换”为文件句柄，传入代表套接字的 int。然后将生成的文件句柄传递给野牛解析器，该解析器直接解析通过套接字接收的数据。所有这些在 linux 上都可以正常工作。现在我试图将此代码移植到 Windows，但我惨败。代码看起来像这样：

```
 FILE* fileHandle;
        #if defined WINCE || defined WIN32
        int fd = _open_osfhandle(socket, _O_RDONLY);
        if (fileHandle = fdopen(fd, "r")) {
        #else
        if (fileHandle = fdopen(socket, "r")) {
        #endif
           ... // code to call my parser with fileHandle as argument 
```

由于文件句柄似乎指向一个空的流/文件，bison/flex 解析器在 Windows 版本中失败。任何人都可以指出解释这些东西的综合资源或暗示替代解决方案吗？

谢谢和最好的问候，

安德烈

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T18:43:00.353

在 Windows 中，套接字句柄不是文件句柄，您不能在 C API 中这样对待它。在 Linux 中，您可以。但是，在 Windows 中，可以将套接字句柄传递给`ReadFile/Ex()`和 WriteFile/Ex() 函数，它们支持多种句柄类型，而不仅仅是文件，尽管它们的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-07T18:00:40.627

你需要假装一点，但这对我有用 - nSocketFd 是 socket() 返回的文件描述符

```
 FILE* fpSocket = NULL;

#ifdef WIN32
    fpSocket = new FILE;
    fpSocket->_file = nSocketFd;
    fpSocket->_cnt = 0;
    fpSocket->_ptr = NULL;
    fpSocket->_base = NULL;
    fpSocket->_flag = 0;
#else
    // build the file pointer from the file descriptor
    fpSocket = fdopen (nSocketFd, "rb+");
#endif 
```

# algorithm - 找到涵盖所有组合可能性的最小集合组

> ID：10077306
> 
> 赞同：5
> 
> 时间：2012-04-09T17:44:12.887
> 
> 标签：algorithm, math

我正在对组合算法进行一些练习，并试图弄清楚如何解决以下问题：

给定一组 25 位，设置（选择）15（不可置换和顺序 NON 很重要）：

```
n!/(k!(n-k)!) = 3.268.760 
```

现在，对于这些可能性中的每一种，构建一个矩阵，在该矩阵中，我将每个唯一的 25 位成员与所有其他 25 位成员交叉，其中在它之间的关系中必须至少有 11 个公共设置位（只有一个，而不是零）。

让我尝试将其表示为二进制数据，因此第一个成员将是：

```
0000000000111111111111111 (10 zeros and 15 ones) or (15 bits set on 25 bits)
0000000001011111111111111 second member
0000000001101111111111111 third member
0000000001110111111111111 and so on....
...
1111111111111110000000000 up to here. The 3.268.760 member. 
```

现在将这些值交叉在 1 x 1 的矩阵上，我必须有 15 位公共。由于结果 >= 11，因此它是一个“有用”的结果。

对于 1 x 2，我们有 14 位公共，因此也是一个有效的结果。

最后，为所有成员这样做，跨越 1 x 3.268.760 应该会导致 5 位通用，因此因为它 < 11 它不是“有用的”。

我需要的是（通过数学或算法）找出覆盖所有具有 11 位常见可能性的最小成员数。

换句话说，如果对所有其他成员进行测试，一组 N 个成员可能在整个 3.268.760 x 3.268.760 宇宙中至少有 11 个共同位。

使用蛮力算法，我发现使用 81 个 25 位成员可以实现这一点。但我猜这个数字应该更小（接近 12）。

我试图使用蛮力算法在 3.268.760 上对 12 个成员进行所有可能的变化，但可能性的数量是如此之大，以至于需要一百多年的时间来计算（3,156x10e69 组合）。

我已经用谷歌搜索过组合学，但有很多领域我不知道这些问题应该适合什么。

因此，非常感谢有关组合学领域的任何方向，或针对这些问题的任何算法。

PS：仅供参考。两个成员的“相似度”使用以下公式计算：

```
(Not(a xor b)) and a 
```

之后，有一个小的递归循环来计算给定公共位数的位数。

**编辑：**正如所承诺的（@btilly）在下面的评论中，这里是关系的“分形”图像![分形关系矩阵](../Images/feaa41a980e34361c6543757aef4d3cd.png)或[图像链接](http://universeconquer.webcindario.com/LF.g.s.2012.04.07_025145.png)

对于小于 10 位的值，色标范围从红色（15 位匹配）到绿色（11 位匹配）再到黑色。

此图像只是 4096 第一组的样本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T22:44:56.297

tl;dr：你想解决一个大的、极其对称的图上的[支配集。](http://en.wikipedia.org/wiki/Dominating_set_problem)btilly 是对的，您不应该期待一个确切的答案。如果这是我的问题，我会从贪婪的解决方案开始尝试本地搜索。选择一组并尝试通过更改其他组来摆脱它。这需要数据结构来跟踪哪些集合只被覆盖一次。

编辑：好的，这是下限的更好主意。对于从 1 到最优解的值的每 k 个，都有一个 [25 选择 15] * k / [k 个集合的最大联合覆盖范围] 的下限。您的 12 界限（实际上是 10，因为您忘记了一些邻居）对应于 k = 1。证明草图：用 m 个集合修复任意解决方案，并考虑 m 中的 k 个可以获得的最大覆盖率。构建一个分数解决方案，其中所选 k 的所有对称性被平均在一起并缩放，以便每个元素都被覆盖一次。该解决方案的成本是 [25 选择 15] * k / [那些 k 集合的最大联合覆盖范围]，这至少与我们所追求的下限一样大。然而，它仍然至少与原始 m 集解决方案一样小，因为每组的边际收益都在减少。

计算最大覆盖率通常很难，但是有一个因子 (e/(e-1))-近似 (≈ 1.58) 算法：贪婪，听起来好像你可以快速实现（注意：你需要选择每次覆盖最未被发现的其他集合）。通过将贪心解乘以 e/(e-1)，我们获得了 k 个元素的最大覆盖范围的上限，这足以支持上一段中描述的下限。

警告：如果这个上限大于 [25 选择 15]，那么 k 太大了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T20:02:10.677

这种类型的问题非常难，你不应该期望能够找到确切的答案。

贪婪的解决方案应该产生“相当不错”的答案。但是..如何贪婪？

我们的想法是始终选择下一个元素来匹配当前无法匹配的尽可能多的可能性。不幸的是，有超过 300 万个可能的成员，您必须尝试与数百万个不匹配的成员进行匹配（注意，您最好的下一个猜测可能已经与您的候选集中的另一个成员匹配......），即使选择下一个元素也可能不可行。

所以我们必须贪婪地选择下一个元素。我们将选择每一位来最大化最终匹配所有当前未匹配元素的概率之和。

为此，我们将需要一个二维查找表`P`，即如果第一个成员中为 1 的第一位在第二个成员中为 1，`P(n, m)`则两个随机成员至少有 11 个共同位的概率. 应该预先计算这个包含 225 个概率的表。`m``n`

可以使用以下规则轻松计算此表：

1.  `P(15, m)`为 0 `m < 11`，否则为 1。
2.  对于`n < 15`：

    ```
    P(n, m) = P(n+1, m+1) * (15-m) / (25-n) + P(n+1, m) * (10-n+m) / (25-n) 
    ```

现在让我们从彼此“非常远”的几个成员开始。我的建议是：

1.  前 15 位为 1，其余为 0。
2.  前 10 位为 0，其余为 1。
3.  前 8 位为 1，后 7 位为 1，其余为 0。
4.  位 1-4、9-12、16-23 为 1，其余为 0。

现在从您的（25 个选择 15 个）成员的宇宙开始，消除所有与您的初始集合中的元素之一匹配的成员。

接下来我们进入算法的核心。

```
While there are unmatched members:
    Find the bit that appears in the most unmatched members (break ties randomly)
    Make that the first set bit of our candidate member for the group.
    While the candidate member has less than 15 set bits:
        Let p_best = 0, bit_best = 0;
        For each unset bit:
            Let p = 0
            For each unmatched member:
                p += P(n, m) where m = number of bits in common between
                             candidate member+this bit and the unmatched member
                             and n = bits in candidate member + 1
            If p_best < p:
                p_best = p
                bit_best = this unset bit
        Set bit_best as the next bit in our candidate member.
    Add the candidate member to our collection
    Remove all unmatched members that match this from unmatched members
The list of candidate members is our answer 
```

我没有编写代码，因此我不知道这个算法会产生多好的答案。但是假设它没有比你现在的更好，对于 77 个候选成员（我们作弊并从 4 个开始），你必须通过你的无与伦比的候选人进行 271 次传递（25 次找到第一位，24 次找到第二位，等等直到11 查找第 15 个，再查找 1 个以删除匹配的成员）。那是 20867 次通行证。如果你平均有 100 万不匹配的成员，那大约是 200 亿次操作。

这不会很快。但它应该在计算上是可行的。

# macos - OSX/Cocoa：在 Dock 上添加对象

> ID：10077307
> 
> 赞同：0
> 
> 时间：2012-04-09T17:44:12.967
> 
> 标签：macos, cocoa, dock

对于我的一个软件，我可能需要添加一些对象，这些对象可能与已经存在的任何对象（应用程序/堆栈等）具有相同的行为，并具有上下文菜单。

有没有可能？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T17:52:22.767

不可能。那是由用户配置的应用程序、文件和文件夹的域。但是，您可以将菜单添加到您自己的应用程序，该应用程序的图标显示在 Dock 中。

您可能会考虑额外的菜单，但这些都有自己的问题。特别是当菜单栏中的空间变得紧张时，操作系统会使它们消失。

# windows-phone-7 - Windows Phone 应用程序方向如何工作？

> ID：10077316
> 
> 赞同：0
> 
> 时间：2012-04-09T17:44:45.077
> 
> 标签：windows-phone-7, xna, orientation

我正在尝试使用 XNA 制作我的第一个应用程序，但我在方向和坐标方面遇到了一些问题。

默认情况下，我的手机模拟器是竖屏模式，但是右上角是(0,0)，X和Y好像是切换的。从我对它们的期望（x 上升，y 跨越）

在我的代码中，我尝试更改方向类似于

```
SupportedOrientations = SupportedPageOrientation.Portrait;
SupportedOrientations.FullScreen = true; 
```

当我这样做时，它解决了我遇到的坐标问题，但是屏幕变成了一个小正方形。

任何想法如何解决这一问题？这就是它应该的样子吗？

另外，方向会自动改变，还是我需要明确添加

```
private void PhoneApplicationPage_OrientationChanging
   (object sender,OrientationChangedEventArgs e) 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:38:39.730

除了规定有效的方向外，您还应该适当地设置 PreferredBackBufferWidth 和 PreferredBackBufferHeight（对于当前的 WP7，分别为 480 和 800）。这些都可以在`graphics`主 Game 类的成员中找到。您无需手动设置方向。

# c# - 如何从 CDATA 中删除 href 标签

> ID：10077320
> 
> 赞同：3
> 
> 时间：2012-04-09T17:44:50.087
> 
> 标签：c#, xml, xmldocument

我在 xml 文档中有以下 CDATA：

```
<![CDATA[ <p xmlns="">Refer to the below: <br/>
</p>
<table xmlns:abc="http://google.com pic.xsd" cellspacing="1" class="c" type="custom" width="100%">
    <tbody>
        <tr xmlns="">            
            <th style="text-align: left">Basic offers...</th>
        </tr>
        <tr xmlns="">
            <td style="text-align: left">Faster network</td>
            <td style="text-align: left">
            <ul>                
                <li>Session</li>
            </ul>
            </td>
        </tr>
        <tr xmlns="">
            <td style="text-align: left">capabilities</td>
            <td style="text-align: left">
            <ul>                
                <li>Navigation,</li>
                <li>message, and</li>
                <li>contacts</li>
            </ul>
            </td>
        </tr>
        <tr xmlns="">
            <td style="text-align: left">Data</td>
            <td style="text-align: left">
            <p>Here visit google for more info <a href="http://www.google.com" target="_blank"><font color="#0033cc">www.google.com</font></a>.</p>
            <p>Remove this href tag <a href="/abc/def/{T}/t/1" target="_blank">Information</a> remove the tag.</p>
            </td>
        </tr>
    </tbody>
</table>
<p xmlns=""><br/>
</p>
  ]]> 
```

我想了解如何扫描 href="/abc/def 并删除以 abc/def 开头的 href 标签。在​​上面的示例中，删除 href 标签并在标签内留下“信息”文本。CDATA 可以有多个带有“abc/def ...”的href标签。我在这个应用程序中使用 C#。有人可以帮助我并告诉我如何做到这一点吗？我应该使用正则表达式还是有办法用 xml 本身来做？

这是我正在尝试的正则表达式：

```
"<a href=\"/abc/def/.*></a>" 
```

我想保留 a href 标签的内部文本，只需删除标签。但是上面的正则表达式不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T18:28:30.160

使用[HtmlAgilityPack](http://html-agility-pack.net/?z=codeplex)

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);

var nodes = doc.DocumentNode
    .Descendants("a")
    .Where(n => n.Attributes.Any(a => a.Name == "href" && a.Value.StartsWith("/abc/def")))
    .ToArray();

foreach(var node in nodes)
{
    node.ParentNode.RemoveChild(node,true);
}

var newHtml = doc.DocumentNode.InnerHtml; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T18:32:30.447

我会使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)来完成这项任务。任务本身非常简单：使用 xpath 选择节点，然后删除它们。剩下的就是得到结果 HTML：

> 它是一个 .NET 代码库，允许您解析“网络之外”的 HTML 文件。解析器对“真实世界”格式错误的 HTML 非常宽容。对象模型与 System.Xml 的提议非常相似，但用于 HTML 文档（或流）。

```
var doc = new HtmlDocument();
doc.LoadHtml(xml);

var anchors = doc.DocumentNode.SelectNodes("//a[starts-with(@href, '/abc/def')]");
foreach (var anchor in anchors.ToList())
    anchor.Remove();

var result= doc.DocumentNode.OuterHtml; 
```

这会让你得到你想要的。

**编辑：**

如果您只想删除该`href`属性，请将此行更改`anchor.Remove()`为这一行`anchor.Attributes["href"].Remove();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T17:58:40.970

如果 HTML 是格式良好的 XML（一目了然），您可以将 cdata 节点的文本加载到新的 XML 文档中，根据需要修改 XML，然后将原始 cdata 节点的文本替换为 XML修改文档的文本。

由于根据定义，原始 XML 文档中没有解析 cdata，这就是为什么您需要第二个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T17:54:16.483

**注意：我不建议在整个 XML 字符串上运行此 Regex - 因为大多数人都认为这是不好的。以下正则表达式可以并且应该在正确遍历期间在文档的各个节点上运行。**该解决方案被发布为整个 xmlString 上的单个正则表达式替换，因为这是用户要求的，并且他们在将正则表达式语句调整到他们的特定情况时遇到了麻烦 - 我逐个字符地编写代码以匹配他们打算如何使用它尽可能地接近。

* * *

`href`要去除url 以 开头的所有标签，`/abc/def/`最好使用正则表达式：

```
result = Regex.Replace(xmlString, @"<a href=\"/abc/def/.*>(.*)</a>", "$1"); 
```

* * *

**跟进以下评论**

根据[MSDN](http://msdn.microsoft.com/en-us/library/e7f5w83z.aspx)：

> 在指定的输入字符串中，用指定的替换字符串替换与指定正则表达式匹配的所有字符串。

这种替换将发生在所有实例上，而不仅仅是第一个实例。如果其余的都不起作用，那是因为它们的某些不同之处与正则表达式不匹配。

例如，如果在某些情况下 a 和 href 之间有额外的空格，或者在 href 字段之前指定了目标字段，则需要使用不太具体的替换：

```
result = Regex.Replace(str, @"<a.*href=\"/OST/OSTdisplay/.*>(.*)</a>", "$1"); 
```

# windows - 如何获得 FB Like 以显示消息

> ID：10077322
> 
> 赞同：0
> 
> 时间：2012-04-09T17:44:59.010
> 
> 标签：windows, facebook, facebook-like

[我已使用此处](http://developers.facebook.com/docs/reference/plugins/like/)描述的过程将 FB Like 按钮添加到网页。该按钮呈现正常，但我希望它呈现*成为您的第一个朋友喜欢此页面*消息，但事实并非如此。我玩过不同的布局样式、发送按钮和显示面孔选项，甚至不同的浏览器（IE8、FF、Chrome），但似乎没有任何效果。如果我希望该消息在页面尚未被点赞时显示在页面上，我需要做什么？消息是否仅在 iFrame 版本的 FB API 中显示？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T01:46:01.243

我一定是第一次错误地复制了生成的标签，因为我能够在重新复制后得到要呈现的消息。还想提一下，您必须登录 FB 才能获得*成为您的朋友中第一个喜欢此页面*消息的人。如果您未登录，则会显示不同的消息。

# iphone - 如何检查数组中的值是否不为NULL？

> ID：10077324
> 
> 赞同：3
> 
> 时间：2012-04-09T17:45:14.797
> 
> 标签：iphone, objective-c, ios, xcode

所以我正在解析一个推特时间线。JSON 响应中有一个名为“following”的字段。它应该是真或假。

但有时该字段丢失。

当我做：

```
NSLog(@"%@", [[[timeline objectAtIndex:i] objectForKey:@"user"] objectForKey:@"following"]); 
```

这是输出：

```
1
1
0
0
1
<null>
1
1 
```

那么如何检查这些值呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-09T17:48:59.463

`NSArray`并且其他集合不能`nil`作为值，因为 nil 是集合结束时的“哨兵值”。您可以使用以下方法查找对象是否为空：

```
if (myObject == [NSNull null]) {
    // do something because the object is null
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T17:50:24.437

如果该字段缺失，NSDictionary -objectForKey: 将返回一个 nil 指针。您可以像这样测试 nil 指针：

```
NSNumber *following = [[[timeline objectAtIndex:i] objectForKey:@"user"] objectForKey:@"following"];

if (following)
{
    NSLog(@"%@", following);
}
else
{
    // handle no following field
    NSLog(@"No following field");
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-09T18:07:41.683

不是时间轴元素为空。它要么是“用户”字典，要么是为空的“关注”对象。我建议创建一个用户模型类来封装一些 json/字典的混乱。事实上，我敢打赌，你可以找到适用于 iOS 的开源 Twitter API。

无论哪种方式，您的代码都将更具可读性，例如：

```
TwitterResponse *response = [[TwitterResponse alloc] initWithDictionary:[timeline objectAtIndex:i]];
NSLog(@"%@", response.user.following); 
```

`TwitterResponse`上面将实现一个只读属性`TwitterUser *user`，该属性又将实现`NSNumber *following`. 使用`NSNumber`是因为它允许空值（JSON 响应中的空字符串）。

希望这可以帮助您走上正轨。祝你好运！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-26T06:38:05.130

要检查数组是否包含空值，请使用此代码。

```
if ([array objectAtIndex:0] == [NSNull null])
{
//do something
}
else
{
} 
```

# iphone - 加载不同的子视图

> ID：10077325
> 
> 赞同：1
> 
> 时间：2012-04-09T17:45:25.203
> 
> 标签：iphone, objective-c, ios

我有以下 ios 应用程序设计：

我在导航栏有分段控制。当我在不同的段上按下时，不同的子视图（具有不同的控制器）应该出现在主视图的位置。它就像标签栏控制器，但使用分段控件而不是标签。

实现这一点的最佳方法是什么（我使用故事板，所以如果它可以在 ot 的帮助下完成，那将是完美的）？

我的应用程序只支持 iOS 5，所以我不需要与旧版本兼容。

谢谢指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T19:50:04.153

如果您只是想交换视图，您可以通过创建 UIView 的子类、使用 segmentControl 将视图拖到 viewController 中，然后将视图设置为适当的子类来完成此操作。为最初不想显示的视图选中“隐藏”。

然后，在您的 viewController 中，为 customViews 创建属性并创建如下操作：

```
- (IBAction)segmentChanged:(id)sender {
  if (self.segmentControl.selectedSegmentIndex == 0){
    self.firstView.hidden = NO;
    self.secondView.hidden = YES;
  }else if (self.segmentControl.selectedSegmentIndex == 1){
    self.firstView.hidden = YES;
    self.secondView.hidden = NO;
  }
} 
```

当您单击第一个或第二个时，这将交换视图。那是你想要做的吗？

# google-app-engine - GAE GWT JDO 持久列表 无法正确保存/加载

> ID：10077326
> 
> 赞同：-1
> 
> 时间：2012-04-09T17:45:28.567
> 
> 标签：google-app-engine, gwt, jdo

我担心 GAE（Google App Engine）中的 JDO。（GWT 2.4 和 GAE 1.6.3 SDK 和 JDO 2.3）

我有一个“用户”类，它应该在列表中保存“用户”的集合，但它不起作用。

当我保存我的用户类时，它会在数据库中创建“用户”-对象，并在列表用户中创建用户对象。但是当我从数据库加载用户对象时，列表用户是空的......我必须自己加载列表吗？我想当我加载用户对象时，JDO 应该直接加载列表。

我需要你的帮助！感谢之前的！

我在抽象类 PersistentUser 和 PersistentUsers 中创建密钥会是一个问题吗？链表会是问题吗？

我的代码：

```
@PersistenceCapable(identityType = IdentityType.APPLICATION, detachable = "true")
@Version(strategy=VersionStrategy.VERSION_NUMBER)
public class Users extends PersistentUsers implements Serializable{

/**
 * 
 */
private static final long serialVersionUID = -21666269538993247L;

/**
 * Mapped from Operator X
 */
@Persistent
private String operatorId;

@Persistent(mappedBy="userlist")
@Element(dependent = "true")
private List<User> users;

 /**
 * 
 * List of Ids of Users
 * 
 */
@Persistent(serialized = "true")
@Element(dependent = "true")
private List<String> userIds;

/**
 * @return the users
 */
public List<User> getUsers() {
    return users;
}
/**
 * @param users the users to set
 */
public void setUsers(List<User> users) {
    this.users = users;
}
...
} 
```

用户类：

```
@PersistenceCapable(identityType = IdentityType.APPLICATION, detachable = "true")
@Version(strategy=VersionStrategy.VERSION_NUMBER)
public class User extends PersistentUser implements Serializable{

/**
 * 
 */
private static final long serialVersionUID = 6899284258473985914L;

@Persistent
private String emailAddress;

@Persistent
private UserRole role;

/**
 * 
 * Mapped from Userlist X from Operator Y
 */
@Persistent
private Users userlist;

public User(String email, UserRole role){
    this.emailAddress = email;
    this.role = role;
}

public String getEmailAddress() {
    return emailAddress;
}
public void setEmailAddress(String emailAddress) {
    this.emailAddress = emailAddress;
}
public UserRole getRole() {
    return role;
}
public void setRole(UserRole role) {
    this.role = role;
}

/**
 * @return the userlist
 */
public Users getUserlist() {
    return userlist;
}

/**
 * @param userlist the userlist to set
 */
public void setUserlist(Users userlist) {
    this.userlist = userlist;
}

} 
```

PersistentUser 和 PersistentUsers 类是相同的内容（但是因为 JDO-AppEngine 继承问题两个单独的类：

```
@PersistenceCapable(identityType = IdentityType.APPLICATION, detachable = "true")
@Inheritance(strategy = InheritanceStrategy.SUBCLASS_TABLE)
@Version(strategy=VersionStrategy.VERSION_NUMBER)
public abstract class PersistentUsers implements IPersitentObject {

 /**
 * Id
 *
 * Autogenerated String id of the Database
 * 
 */
@PrimaryKey
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
protected Key encodedKey;

@Persistent
protected String username;

@Override
public String getId() {
    if(encodedKey == null) return null;
    return KeyFactory.keyToString(encodedKey);
}
/*public void setId(String id) {

    this.encodedKey = id;
}*/

/**
 * Helper function - get Version from DB
 */
@Override
public Long getVersion(){
    ...
}

/**
 * Helper function - will save this instance in DB
 */
public void persist(){

    ...
}

/**
 * Helper function - will remove this instance from DB
 */
public void delete(){
    ...
}

@Override
public final boolean checkUsername() {

    ...

}

} 
```

创建用户代码： ... if(RequestFactoryServlet.getThreadLocalRequest().getUserPrincipal() != null){

```
 //Create New User
        String email =     RequestFactoryServlet.getThreadLocalRequest().getUserPrincipal().getName();
        User u = UserFactory.getUser(email, UserRole.ADMINISTRATOR);
        //u.persist();

        //Create New Userlist
        Users users = UserFactory.getUsers();

        //Get Uids (normally empty)
        LinkedList<String> uids =  (LinkedList<String>) users.getUserIds();
        if(uids==null){
            uids = new LinkedList<String>();
        }
        uids.add(u.getId());

        //Get DB-Userlist of current User-List
        LinkedList<User> userlist =  (LinkedList<User>) users.getUsers();
        if(userlist==null){
            userlist = new LinkedList<User>();
        }
        userlist.add(u);
        users.setUserIds(uids);
        users.setUsers(userlist);

        u.setUserlist(users);
        //Persit Userlist and Persist User
        users.persist();

        this.userlistId = users.getId();

}
... 
```

持久性代码：

```
public static void persist(IPersitentObject o){

        PersistenceManager pm = Pmf.get().getPersistenceManager();

        try{
            pm.makePersistent(o);

        } catch (Exception e) {
            e.printStackTrace();
        }finally {

            pm.close();
        }

} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-10T08:46:42.337

我找到了问题/解决方案

这是我愚蠢的大脑认为我可以在调试时获取它。

我的代码是正确的，但调试时信息不在对象中！

在 TestCase 中对其进行测试表明，它可以工作。

```
public class UsersTest {

private PersistenceManager pm;
private final LocalServiceTestHelper helper =
            new LocalServiceTestHelper(new LocalDatastoreServiceTestConfig());
private String userlistId;
private String userId;

@Before
public void setUp() throws Exception {
    helper.setUp();

    pm = ch.zhaw.ams.server.core.persistance.Pmf.get().getPersistenceManager();

}

@After
public void tearDown() throws Exception {
}

@Test
public void testNewUsers() {

    //New UserList

        //Create New Userlist
        Users users = UserFactory.getUsers();

        //Create New User
        String email = "ss";
        User u = UserFactory.getUser(email, UserRole.ADMINISTRATOR);

        users.getUsers().add(u);

        users.persist();
        this.userlistId = users.getId();
        this.userId = users.getUsers().get(0).getId();

    //Test Users
    pm = ch.zhaw.ams.server.core.persistance.Pmf.get().getPersistenceManager();
    Users ul=   pm.getObjectById(Users.class, this.userlistId);
    assertNotNull(ul);
    assertNotNull(ul.getUsers().get(0));
    assertTrue(ul.getUsers().get(0).getId().equals(this.userId));
    pm.close();
}

} 
```

# .net - 类型提供程序不适用于 .net 2.0/3.x？

> ID：10077328
> 
> 赞同：2
> 
> 时间：2012-04-09T17:45:37.717
> 
> 标签：.net, f#, type-providers

当我尝试为 .net 2.0 或 .net 3.5 创建项目时，我无法使用与类型提供程序相关的任何类型。根据参考资料，VS 将 F# 3.0 用于 .NET 2.0。那么类型提供程序不适用于 .net 2.0/3.x 吗？它仅在 .net 4.0 及更高版本下可用？

PS BTW FSharp.Core.dll for .net 2.0（位于`C:\Program Files (x86)\Reference Assemblies\Microsoft\FSharp\3.0\Runtime\v2.0\FSharp.Core.dll`）不包含与类型提供程序相关的类型。

实际上，我一直认为 F# 团队使 F# 2.0 和 F# 3.0 的所有功能都可用于 .NET 2.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T00:17:22.187

如果您正在创作类型提供程序，它必须使用 .Net 4 - 请记住，类型提供程序参与设计时，这意味着它们被加载到 Visual Studio 进程中（它已经在运行 .Net 4.5）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T18:30:23.910

不，只有 .Net 4.5+（目前只有 4.5）。

# java - java XML响应设计改进

> ID：10077333
> 
> 赞同：0
> 
> 时间：2012-04-09T17:45:56.653
> 
> 标签：java, xml, freemarker

我需要将 xml 响应发送到前端应用程序 (.NET)。xml 响应将包含太多的数据标签。基本上，我需要发送从一个非常大的表（如十万行或更大）中检索到的数据。xml（例如）是这样的，

```
<Values>
   <value>
      <value1></value1>
      <value2></value2>
      .
      .
      <valuen></valuen>
   </value>
   .
   .
<Values> 
```

我很好奇性能问题。我应该使用其他替代方法来提高速度吗？我正在使用 Freemarker API 进行 xml 响应。

PS。请注意，Value1、Value2 只是示例标签。实际上，它们是一张表中的字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T11:44:06.230

您可以做的事情很少，但是从问题和您的评论来看，我不清楚您在哪里有回旋的余地。一些选项：

1.  如果您不需要，请不要使用 XML。XML 生成和解析相对较慢。如果你拥有你的生产者和消费者，请使用一些快速的东西，比如[协议缓冲区](https://stackoverflow.com/questions/549128/fast-and-compact-object-serialization-in-net)。

2.  尝试[使用 Freemarker 的一些替代方法](https://stackoverflow.com/questions/284324/what-is-the-best-way-to-build-xml-in-c-sharp-code)来创建您的 XML。

我不相信会加快你的速度，但它会让事情变得更清洁 - 不要将数字放在 value 元素中。如果您根本不需要订购/标识您的元素，那么您的 XML 应该如下所示：

```
<values>
   <value>...</value>
   <value>...</value>
   <value>...</value>
<values> 
```

但如果他们确实需要某种 ID，我建议改为：

```
<values>
    <value id="1">...</value>
    <value id="2">...</value>
    <value id="3">...</value>
</values> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:52:05.607

我可以建议 2 个替代方案：

1.  像这样缩短 XML 中的标签名称：

    ```
     <Vs>

      <v>

      <v1></value1>

      <v2></value2>

      <vn></valuen>

      </v>       

      <Vs> 
    ```

2.  使用 JSON 而不是 XML，因此您可以完全保存标签名称。

# android - 如何从数组（或其他形式）的数据中自动创建和填充 android 中的 sqlite 数据库

> ID：10077338
> 
> 赞同：1
> 
> 时间：2012-04-09T17:46:54.300
> 
> 标签：android, sqlite

似乎有很多不必要的工作需要为每个要存储在数据库中的对象手动编码一个类文件，以及手动输入一个包含所有必要方法的整个 DatabaseHelper 类等。

我一直在尝试通过提供最少的数据（数据库所需的结构）来找到一种自动生成这一切的方法。这应该只需要在一个位置输入一次。我试过把它放在 xml 中，在数组中声明它，也在对象类的代码注释中，但我还没有找到适合我的解决方案。

作为我想要实现的大致目标的一个示例，我可以提供如下数组来描述我的数据库所需的结构。带有后缀“Cols”的 NB 数组描述了该表中所需的列，后缀“Opts”描述了这些列所需的 sqlite 约束。

```
static final String[] tables = {"Processes", "Machines", "Suppliers","machinesSuppliersLink"};

static final String[] processesCols = {  // tables[0]
    "ProcessID" ,
    "FullName" ,
    "ShortName" ,
    "Machines"};
static final String[] processesOpts = {
    "INTEGER PRIMARY KEY AUTOINCREMENT" , 
    "TEXT" , 
    "TEXT" , 
    "INTEGER, FOREIGN KEY(Machines) REFERENCES Machines (MachinesID)"};
static final String[][] processes = { processesCols , processesOpts };

static final String[] machinesCols = {  // tables[1]
    "MachinesID" , 
    "Manufacturer" , 
    "MachinesName",
    "Process"
};
static final String[] machinesOpts = {
    "INTEGER PRIMARY KEY AUTOINCREMENT",
    "TEXT",
    "TEXT",
    "INTEGER, FOREIGN KEY(Process) REFERENCES Processes (ProcessID)"
};
static final String[][] machines = { machinesCols , machinesOpts };

static final String[] suppliersCols = {  // tables[2]
    "SuppliersID",
    "SuppliersName",
    "SuppliersPhone",
    "SuppliersWebsite",
    "SuppliersAddress",
};
static final String[] suppliersOpts = {
    "INTEGER PRIMARY KEY AUTOINCREMENT",
    "TEXT",
    "INTEGER",
    "TEXT",
    "TEXT",
};
static final String[][] suppliers = { suppliersCols , suppliersOpts };

static final String[] machinesSuppliersLinkCols = {  // tables[3]
    "machinesSuppliersLinkID",
    "MachinesID",
    "SuppliersID"       
};
static final String[] machinesSuppliersLinkOpts = {
    "INTEGER PRIMARY KEY AUTOINCREMENT",
    "INTEGER, FOREIGN KEY(MachinesID) REFERENCES Machines (MachinesID)",
    "INTEGER, FOREIGN KEY(SuppliersID) REFERENCES Suppliers (SuppliersID)",
};
static final String[][] machinesSuppliersLink = { machinesSuppliersLinkCols , machinesSuppliersLinkOpts };

public static final String[][][] schema = { processes , machines , suppliers ,  machinesSuppliersLink}; 
```

有人可以通过概述自动生成必要的 DatabaseHelper、类等的步骤来帮助我吗？

非常感谢。

PS 我有一种感觉，通过为每个表创建一个类来输入上述数据会是一个更好的起点，但我觉得这样可以更清楚地说明这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T19:15:25.880

我最近遇到了一个名为 android-activerecord 的项目。它从简单的 java 类生成所有 sql foo。您可以实例化不同的类并简单地在实例上调用 save() 。

[http://code.google.com/p/android-active-record/](http://code.google.com/p/android-active-record/)

# jsf - 渲染验证消息 RichFaces

> ID：10077340
> 
> 赞同：0
> 
> 时间：2012-04-09T17:47:03.080
> 
> 标签：jsf, richfaces, validation, mojarra

我有一个表格，`rich:select`无论他们选择选项 A 还是选项 B`h:inputText`都会呈现。最初`h:inputText`呈现与选项 A 相对应的选项，如果我将其留空，`requiredMessage`则会出现并且一切正常。现在，当我选择 for 选项 B 的第二个选项时，将`rich:select`呈现`h:inputText`但如果我将其留空，`requiredMessage`则不会出现。

我错过了什么？

我的xhtml代码如下：

```
 <h:panelGrid columns="3">
                    <h:outputLabel for="tipoPersona">Tipo de persona</h:outputLabel>
                    <rich:select id="tipoPersona"
                                 required="true" value="#{userInformationController.tipoPersona}"
                                 requiredMessage="Seleccione el tipo de persona"
                                 defaultLabel="Seleccione una opción">
                        <f:selectItems value="#{userInformationController.tipoPersonaOpciones}"/>
                        <f:ajax event="blur" render="tipoPersonaMessage"/>
                        <f:ajax event="selectitem"
                                render="outputLabelCURP inputTextCURP messageCURP outputLabelRFC inputTextRFC messageRFC"
                                listener="#{userInformationController.doRenderCURP}"/>
                    </rich:select>
                    <rich:message id="tipoPersonaMessage" ajaxRendered="true"
                                  for="tipoPersona"/>

                    <a4j:outputPanel id="outputLabelCURP">
                        <h:outputLabel for="CURP" value="CURP"
                                       rendered="#{userInformationController.curpRendered}"/>
                    </a4j:outputPanel>                        
                    <a4j:outputPanel id="inputTextCURP">
                        <h:inputText id="CURP" required="true"
                                     requiredMessage="Introduzca el CURP"
                                     rendered="#{userInformationController.curpRendered}">
                            <f:ajax event="blur" render="curpMessage"/>
                        </h:inputText>
                    </a4j:outputPanel>
                    <a4j:outputPanel id="messageCURP">
                        <rich:message id="curpMessage" ajaxRendered="true"
                                      for="CURP"
                                      rendered="#{userInformationController.curpRendered}"/>
                    </a4j:outputPanel>

                    <a4j:outputPanel id="outputLabelRFC">
                        <h:outputLabel for="RFC" value="RFC"
                                       rendered="#{not userInformationController.curpRendered}"/>
                    </a4j:outputPanel>
                    <a4j:outputPanel id="inputTextRFC">
                        <h:inputText id="RFC" required="true"
                                     requiredMessage="Introduzca el RFC"
                                     rendered="#{not userInformationController.curpRendered}">
                            <f:ajax event="blur" render="rfcMessage"/>
                        </h:inputText>
                    </a4j:outputPanel>
                    <a4j:outputPanel id="messageRFC">
                        <rich:message id="rfcMessage" ajaxRendered="true"
                                      for="RFC"
                                      rendered="#{not userInformationController.curpRendered}"/>
                    </a4j:outputPanel>
                </h:panelGrid> 
```

**更新**

我在 UI 上做了一些更改，现在我有了这个

```
 <fieldset>
                <legend>Datos SURI</legend>
                <h:panelGrid columns="3">
                    <h:outputLabel for="tipoPersona">Tipo de persona</h:outputLabel>
                    <rich:select id="tipoPersona"
                                 required="true" value="#{userInformationController.tipoPersona}"
                                 requiredMessage="Seleccione el tipo de persona"
                                 defaultLabel="Seleccione una opción">
                        <f:selectItems value="#{userInformationController.tipoPersonaOpciones}"/>
                        <f:ajax event="blur" render="tipoPersonaMessage"/>
                        <f:ajax event="selectitem"
                                render="outputLabelCURP inputTextCURP messageCURP 
                                        outputLabelRFC inputTextRFC messageRFC
                                        datosPersonaFisica datosPersonaMoral"
                                listener="#{userInformationController.doRenderTipoPersona}"/>
                    </rich:select>
                    <rich:message id="tipoPersonaMessage" ajaxRendered="true"
                                  for="tipoPersona"/>

                    <a4j:outputPanel id="outputLabelCURP">
                        <h:outputLabel for="CURP" value="CURP"
                                       rendered="#{userInformationController.personaFisicaRendered}"/>
                    </a4j:outputPanel>                        
                    <a4j:outputPanel id="inputTextCURP">
                        <h:inputText id="CURP" required="true"
                                     requiredMessage="Introduzca el CURP"
                                     value="#{userInformationController.curp}"
                                     rendered="#{userInformationController.personaFisicaRendered}">
                            <f:ajax event="blur" render="curpMessage identificadorSURI"
                                    listener="#{userInformationController.doSearchIdSURI}"/>
                        </h:inputText>
                    </a4j:outputPanel>
                    <a4j:outputPanel id="messageCURP">
                        <rich:message id="curpMessage" ajaxRendered="true" for="CURP"
                                      rendered="#{userInformationController.personaFisicaRendered}"/>
                    </a4j:outputPanel>

                    <a4j:outputPanel id="outputLabelRFC">
                        <h:outputLabel for="RFC" value="RFC"
                                       rendered="#{userInformationController.personaMoralRendered}"/>
                    </a4j:outputPanel>
                    <a4j:outputPanel id="inputTextRFC">
                        <h:inputText id="RFC" required="true"
                                     requiredMessage="Introduzca el RFC"
                                     value="#{userInformationController.rfc}"
                                     rendered="#{userInformationController.personaMoralRendered}">
                            <f:ajax event="blur" render="rfcMessage identificadorSURI"
                                    listener="#{userInformationController.doSearchIdSURI}"/>
                        </h:inputText>
                    </a4j:outputPanel>
                    <a4j:outputPanel id="messageRFC">
                        <rich:message id="rfcMessage" ajaxRendered="true" for="RFC"
                                      rendered="#{userInformationController.personaMoralRendered}"/>
                    </a4j:outputPanel>

                    <h:outputLabel for="identificadorSURI">Identificador SURI</h:outputLabel>
                    <h:inputText id="identificadorSURI" disabled="true"
                                 value="#{userInformationController.identificadorSuri}"/>

                </h:panelGrid>
            </fieldset> 
```

但是，我发现将我的 Bean 放入**RequestScope**不会触发`h:inputText`（id='CURP' 和 id='RFC'）上的侦听器，而如果我将 bean 放入**ViewScope**，侦听器会被触发并正确处理.

我需要的是在 RequestScope 中实际拥有 Bean，因为无论用户是否更改`rich:select`. 如果我将范围保留在 ViewScope 中，则所有数据都保留在 Bean 中，然后当用户更改选择的值时，我将不得不删除这些字段。

有人可以向我解释为什么会这样吗？我不知道有什么诀窍！

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:34:13.390

请求范围的 bean 会在每个请求上重新创建，也在每个 ajax 请求上重新创建。因此，当您通过 ajax 将属性更改为默认值以外的新值（例如，负责`rendered`属性的值）时，此更改将不会保留在后续请求中。因此，该`rendered`属性有效地评估为`false`，并且组件及其所有子项在提交期间将不再被处理。

视图范围旨在解决这个问题。只要您通过 ajax 请求与同一个视图交互，bean 就会一直存在，直到您导航到不同的视图或重新创建视图。至于在改变的时候重新创建表单的功能需求`<rich:select>`，就在方法里面去做`doRenderTipoPersona()`。

如果您确实需要坚持请求范围，那么您需要根据 (post) 构造函数中的请求参数映射手动保留 bean 的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T22:13:02.510

您可以使用单个 ajax 函数，而不是使用事件函数

```
<rich:select id="tipoPersona"
                                 required="true" value="#{userInformationController.tipoPersona}"
                                 requiredMessage="Seleccione el tipo de persona"
                                 defaultLabel="Seleccione una opción">
                        <f:selectItems value="#{userInformationController.tipoPersonaOpciones}"/>
                       <f:ajax event="valueChange"
                                render="tipoPersonaMessage outputLabelCURP inputTextCURP messageCURP outputLabelRFC inputTextRFC messageRFC"
                                listener="#{userInformationController.doRenderCURP}"/>
                    </rich:select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T10:57:14.947

好吧，这是一个解决方案。

```
<a4j:jsFunction name="onBlurRFC" execute="RFC" render = "rfcMessage identificadorSURI" 
    action="#{userInformationController.doSearchIdSURI}" />     

    <h:inputText id="RFC" required="true"
                                             requiredMessage="Introduzca el RFC"
                                             value="#{userInformationController.rfc}"
                                             rendered="#{userInformationController.personaMoralRendered}" onblur="onBlurRFC()">
                                </h:inputText> 
```

# ruby-on-rails - 您如何在 Rails 中获得一个关注按钮以显示“关注 <@username>”？

> ID：10077342
> 
> 赞同：0
> 
> 时间：2012-04-09T17:47:24.647
> 
> 标签：ruby-on-rails

如果我想显示“关注按钮”，“关注+用户名”（用户名是每个不同用户的实例变量），有什么好方法可以做到这一点？

```
 <div class="actions"><%= f.submit "Follow, <%= @user.name %>" %></div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T17:51:15.983

```
<div class="actions"><%= f.submit "Follow, #{@user.name}" %></div> 
```

这是 Ruby 中的普通字符串插值。如果你喜欢使用 I18n，你可以这样做：

```
<div class="actions"><%= f.submit t(:follow, :name => @user.name) %></div> 
```

在您的语言环境中 en.yml：

```
en:
  follow: "Follow, %{name}" 
```

/ 卡斯滕

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T17:52:08.260

您可以使用*字符串插值*，它将变量替换为其值。

`<div class="actions"><%= f.submit "Follow #{@user.name}" %></div>`

有用的链接：[http ://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Literals#Interpolation](http://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Literals#Interpolation)

# jquery - 遍历json，制作多维数组

> ID：10077349
> 
> 赞同：1
> 
> 时间：2012-04-09T17:48:14.037
> 
> 标签：jquery, json

我有一些像这样的json

```
[{
  "merchantcontract":"Kevin\u0027s Radiator and Auto Repair 1916.01",
  "merchantcontractid":"60dccd9d-1114-e111-8a4f-00155d010302",
  "smi_transactiondate":"\/Date(1332918000000)\/",
  "smi_glamount2":2.1800,
  "smi_transactionclass":180870001,
  "smi_transactionclassname":"Residual Agent Commission",
  "smi_contractprodcutidname":"Traditional",
  "smi_agentid":"1d3f44ee-afc3-e011-addf-a4badb1ddef5",
  "smi_primaryagentid":"1d3f44ee-afc3-e011-addf-a4badb1ddef5"
 },{
  "merchantcontract":"Kevin\u0027s Radiator and Auto Repair 1916.01",
  "merchantcontractid":"60dccd9d-1114-e111-8a4f-00155d010302",
  "smi_transactiondate":"\/Date(1333004400000)\/",
  "smi_glamount2":0.9700,
  "smi_transactionclass":180870001,
  "smi_transactionclassname":"Commercial Agent Commission",
  "smi_contractprodcutidname":"Traditional",
  "smi_agentid":"1d3f44ee-afc3-e011-addf-a4badb1ddef5",
  "smi_primaryagentid":"1d3f44ee-afc3-e011-addf-a4badb1ddef5"
 },{
  "merchantcontract":"Kevin\u0027s Radiator and Auto Repair 1916.01",
  "merchantcontractid":"60dccd9d-1114-e111-8a4f-00155d010302",
  "smi_transactiondate":"\/Date(1333090800000)\/",
  "smi_glamount2":1.6200,
  "smi_transactionclass":180870001,
  "smi_transactionclassname":"Residual Agent Commission",
  "smi_contractprodcutidname":"Traditional",
  "smi_agentid":"1d3f44ee-afc3-e011-addf-a4badb1ddef5",
  "smi_primaryagentid":"1d3f44ee-afc3-e011-addf-a4badb1ddef5"
}] 
```

如何制作一个看起来像这样的多维数组。我需要将 Residual Agent Commission 的第一个和第三个 smi_glamount2 添加在一起并添加到数组中

```
merchantcontractarray[Kevin\u0027s Radiator and Auto Repair 1916.01][merchantcontract]
merchantcontractarray[Kevin\u0027s Radiator and Auto Repair 1916.01][Residual Agent Commission]
merchantcontractarray[Kevin\u0027s Radiator and Auto Repair 1916.01][Residual Agent Commission][smi_glamount2 + smi_glamount2]
merchantcontractarray[Kevin\u0027s Radiator and Auto Repair 1916.01][Commercial Agent Commission][[0.9700] 
```

我试过用这个

```
$.each(data, function(i, field) {
    if (currentid == field.merchantcontract) {
        if (currentclassname == field.smi_transactionclass) {
            if (field.smi_transactionclass == '180870001') {
                residual = residual + field.smi_glamount2;
            } else if (field.smi_transactionclass == '180870000') {
                upfront = upfront + field.smi_glamount2;
            }
        } else {
            currentclassname = field.smi_transactionclass;
            if ($.inArray(currentclassname, smi_transactionclass) == -1) {
                smi_transactionclass[i].push(currentclassname);
            }
        }
    } else {
        currentid = field.merchantcontract;
        if ($.inArray(currentid, merchantcontract[1]) == -1) {
            merchantcontract[i].push(currentid);
        }
        //console.log(currentid);
    }
});​ 
```

没有这样的运气

任何帮助表示赞赏，我做了一个 jsfiddle，我真的只需要在 console.log 中查看数组。

[http://jsfiddle.net/qs2nR/](http://jsfiddle.net/qs2nR/)

# java - removeAllViews() 不删除 TableLayout 中的 TableRow 子项

> ID：10077352
> 
> 赞同：1
> 
> 时间：2012-04-09T17:48:24.173
> 
> 标签：java, android, user-interface, tablelayout, tablerow

一些背景知识：我的程序的一部分存在问题，我正在构建“编辑数据库”视图，然后再次删除行。每次显示时，“编辑数据库”视图将显示的字段都不同。编辑数据库视图是一个表格布局，数据库中的每一行都是表格布局中的一行。当用户退出编辑视图时，该视图应该在下一次被释放或擦除行。

我的问题是，无论我尝试什么，我都无法删除 tablelayout 中的行。以下是相关的代码片段：

获取xml文件中tablelayout的句柄

```
setContentView(R.layout.database_entry);
TableLayout editorLayout = (TableLayout)findViewById(R.id.DatabaseLayout); 
```

布局被传递给另一个类，在那里它们被添加到布局中，如下所示：

```
//layout is the tablelayout from earler, passed into this function
TableRow row = new TableRow(contex);
row .setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
//stuff added to the row....
//...
//...
layout.addView(row); 
```

当我尝试擦除 Tablelayout 时，我运行此代码

```
TableLayout editorLayout = (TableLayout)findViewById(R.id.DatabaseLayout);
editorLayout.removeAllViews(); 
```

无论我做什么，下次我点击按钮编辑代码时，它都会显示以前的行，以及添加的新行。它们不会从表中删除。我没有收到任何错误消息或任何有用的调试信息，它只是无法正常工作。

我已经为此苦苦挣扎了一段时间。尝试动态创建表格布局（无 xml 文件），尝试使用其索引删除每一行（或仅一行）。我已经使用 Hierarchy Viewer 来检查以确保所有内容都是该 tablelayout 的子项（它是）。如果有人有任何见解，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T19:36:45.250

I was able to figure out the issue. First of all, the comment above was a little bit wrong, the mChildren array did not contain any pointers to the views I had deleted. They were nulled out, just as they should have been.

The reason why none of my rows were deleted is because right after I called `removeAllViews()` I switched content views `setContentView(R.layout.main);`. when I commented this line out, the remove children code worked as expected. I assume some android back-end optimization code decided that the `removeAllViews()` didn't need to be run, or updated somewhere in memory. And all the changes made while inside this function didn't apply.

I will be putting all of this code in a new activity (where it really belonged in the beginning). But I wanted to provide an explanation in case someone else is having the same issue.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T20:03:06.170

删除行后尝试将可见性设置为 GONE 并再次返回可见，这应该可以修复删除行故障。

# php - 数据POST到PHP脚本时的怪异

> ID：10077354
> 
> 赞同：0
> 
> 时间：2012-04-09T17:48:38.703
> 
> 标签：php, android, mysql, post, httpclient

我正在使用以下代码将数据从 android 应用程序发布到 PHP 脚本：

```
public class Upload extends Activity implements OnClickListener {
EditText joke;
Button upload = (Button) findViewById(R.id.bUpload);
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.upload);
    upload.setOnClickListener(this);
}
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.bUpload:
        uploadJoke();
        break;
    }

}
private void uploadJoke() {
    // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://xxxx/telejoke.php");

    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("username", "test"));
        nameValuePairs.add(new BasicNameValuePair("joke", joke.getText().toString()));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);

    } catch (ClientProtocolException e) {
    } catch (IOException e) {
    }
} 
```

此代码将数据发送到 PHP 脚本，然后将其发送到 SQL 数据库。此数据显示在 SQL 数据库中，但如果我尝试类似的操作，当我转到[http://xxxx/telejoke.php](http://xxxx/telejoke.php)`echo $username`时它不会显示用户名。

PHP 脚本：

```
<?php
  include 'DBConnect.php';
  include 'JokeValidate.php';

  $username = $_POST['username'];
  $joke = $_POST['joke'];
  $dbname = 'Telejoke';
  mysql_select_db($dbname);

  echo $username. " " . $joke;

  if (validate()){
    $query = "INSERT INTO jokes (username, joke) VALUES ('$username','$joke')";
    mysql_query($query) or die('Error, insert query failed');
  }
  mysql_close($conn);
?> 
```

请帮忙。除了将其发送到数据库之外，我还想用 PHP 对发布的数据进行处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T18:00:27.460

我猜 register_globals 已经关闭（这很好）！！！

您必须通过 $_POST['username'] （当然在 telepost.php 中）来处理用户名。

好的（在你发布你的 php 脚本之后，我想我明白了）。您说“访问[http://xxx/telejoke.php](http://xxx/telejoke.php)后我看不到我的用户名，但数据已正确上传”。

--> 是的，这种行为是正确的。您没有将任何 POST 参数传递给您的 php 脚本，因此 $_POST['username'] 为空。

--> 但是，如果您通过应用程序调用脚本，您会将所需的 POST 参数（用户名、笑话等）传递给脚本。所以它可以在你的数据库中正确地写入你的数据。

此外，您应该优化您的 SQL/脚本以防止 SQL 注入。不良用户可能会对您的网站造成损害（例如删除所有笑话等...）

# asp.net - 如何获取绑定到用户控件实例的数据

> ID：10077356
> 
> 赞同：1
> 
> 时间：2012-04-09T17:48:50.803
> 
> 标签：asp.net, user-controls

各位高手大家好......

我的名字是 elli，我正在为学校做一些项目，我将非常感谢你的建议。

我的 aspx 页面中有许多用户控件实例。我从数据列表中获得的用户控件中的数据。

在控件里面我有一个按钮。我想做的是这样的：

当用户单击按钮时，我想找出数据列表中的哪一行显示在此特定控件中，并将其存储在会话中。

我现在的问题是当我单击按钮时，什么也没有发生，我试图在后面的代码中的 onButton_click 中放置一个简单的 Response.Redirect ...

我已经工作了 2 天，我有点迷路了。

这是用户控件的部分代码，我想相关的东西是图像按钮......就在顶部

这是用户控件 ascx

```
 <div id="video play button icon" style="height: 27px; width: 121px;
                    float: left"><asp:ImageButton ID="PlayButton" runat="server" ImageUrl="~/Search_Results_Images/search_Play_Button_Icon.png" onclick="PlayButton_Click" />
                </div>
                <div style="height: 27px; width: 22px; float: left">
                </div>
            </div>
            <div style="height: 15px; width: 434px; background-color: transparent; float: left">
            </div>

        </div>
    </div>

</ItemTemplate>
<SeparatorTemplate>
<div style="width:84px"></div>
</SeparatorTemplate> 
```

这是用户控制的代码

```
public partial class SearchBullet : System.Web.UI.UserControl
{

protected void Page_Load(object sender, EventArgs e)
{
    String tmpcmd;
    tmpcmd = (String)(Session["mainSearchQRY"]);
    SqlDataSource1.SelectCommand = "";
    SqlDataSource1.SelectCommand = tmpcmd;

}
protected void btnClick_Click(object sender, EventArgs e)
{
    Response.Redirect("Default2.aspx");
}

} 
```

非常感谢，埃利佩尔佐夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T10:21:32.280

在您所说的标记中，您的点击事件未正确连接`onclick="PlayButton_Click"`，但在您的代码隐藏中，您的方法被调用`btnClick_Click`

# fortran - Fortran：可能的价值变化

> ID：10077361
> 
> 赞同：3
> 
> 时间：2012-04-09T17:49:15.363
> 
> 标签：fortran, gfortran

我有一个在 gfortran 中编译的 fortran 代码（几千行，所以我会尝试发布重要的行），它给了我：

```
nrev(isat)=dint((t_ref-t_in)/zper)+1
           1
Warning:Possible change of value in conversion from REAL(8) to INTEGER(4) at (1) 
```

它们被初始化为：

```
integer*4  nrev(nmaxsat)
integer*4  isat
real*8     t_ref
real*8     t_in
real*8     zper 
```

有想法该怎么解决这个吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T18:49:05.620

摆脱所有警告，即使是次要的警告是一个绝妙的主意——即使只是这样当你确实遇到更重要的问题时，你会看到它们，而不是让输出被小事淹没。

在这种情况下，警告信息相当清楚；您正在为整数分配双精度。内在截断，`dint`但它不转换类型；所以你要分配一个双精度值，它的值被截断为整数。您可以正确地注意到内在函数的名称令人困惑，但是...

如果要进行转换以及截断，则`idint`实际上转换为整数。

所以例如这个程序

```
program foo

    integer :: nrev
    double precision :: t_ref

    t_ref  = 1.

    nrev = dint(t_ref)

end program foo 
```

创建相同的警告：

```
$ gfortran -o foo foo.f90 -Wall -std=f95
foo.f90:8.11:

    nrev = dint(t_ref)
           1
Warning: Possible change of value in conversion from REAL(8) to INTEGER(4) at (1) 
```

但是这个很好：

```
program foo

    integer :: nrev
    double precision :: t_ref

    t_ref  = 1.

    nrev = idint(t_ref)

end program foo 
```

如我们所见：

```
$ gfortran -o foo foo.f90 -Wall -std=f95
$ 
```

# javascript - Javascript中的不间断断点（跟踪点）？

> ID：10077362
> 
> 赞同：6
> 
> 时间：2012-04-09T17:49:26.800
> 
> 标签：javascript, debugging, google-chrome, trace, google-chrome-devtools

这是一个相当复杂的问题，用目前可用的东西可能根本不可能，但如果有一种简单的方法来做到这一点，那将是巨大的。

我正在 Chrome 中调试一些 JavaScript，因为它是非常受事件驱动的，所以我更喜欢获取代码的跟踪报告（调用了什么等）而不是断点。因此，无论我在哪里留下断点，我都希望看到本地函数名称和参数。

我能得到的最接近的方法是在其中放置一个条件断点，如下所示：

![样品跟踪](../Images/e5f16d1dd9b8b2ce3430ef0d9b2837d2.png)

这种方法有两个大问题：

1.  将其粘贴到每个断点中太麻烦了。如果可以选择它作为每个断点的默认操作，人们将更有可能使用它。
2.  在 Google Chrome 中，日志调用会被触发两次。

关于克服这些问题的任何想法？[我认为在 IE中使用 VS](http://blogs.msdn.com/b/ms_joc/archive/2004/07/02/171960.aspx)可能是可行的，但那里的 UI 似乎同样繁琐。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-25T21:32:02.373

IE11 现在具有独立于 Visual Studio 的“跟踪点”。他们完全按照你三年前的要求去做。我还没有在 Chrome 或任何其他浏览器中看到它们，但希望它们很快就会流行起来！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:04:20.880

我发现的最佳选择是在 Chrome 的 Javascript 面板中编辑 javascript 代码，添加一个 console.log。

它仅在页面加载后才能工作（除非您可以在刷新后放置一个断点然后添加日志行）并且（更糟糕的是）您每次重新加载页面时都必须这样做。

祝您搜索顺利！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T23:11:49.380

我找不到可以做到这一点的东西，所以我[写了自己的](https://github.com/christopherliu/trace-js).

现在，我不再不断地插入和删除 console.log 调用，而是保持登录状态，只在必要时观看。

**警告：下面的特定代码未经测试。**

```
var debug = TraceJS.GetLogger("debug", "mousemove");
$('div').mousemove(function(evt) {
     debug(this.id, evt);
}); 
```

每次鼠标移动到 DIV 上时，它都会生成一个标记为 ["mousemove", {id of that element}] 的日志事件

有趣的部分是能够有*选择地观看*事件。如果您只想查看元素 #a 的 mousemove 事件，请在控制台中调用以下命令：

```
TraceJS('a'); 
```

当我想查看所有 mousemove 事件时，您可以调用：

```
TraceJS('mousemove'); 
```

仅显示与您的过滤器匹配的事件。如果您调用 TraceJS（无参数），则日志调用将停止显示。

# knockout.js - 如何在使用敲除数据绑定渲染模板后均衡一组 DOM 元素高度？

> ID：10077363
> 
> 赞同：3
> 
> 时间：2012-04-09T17:49:28.650
> 
> 标签：knockout.js, twitter-bootstrap

我目前正在使用带有淘汰赛的 twitter 引导程序，并且在使用从计算的 observable 返回的数组上的 foreach 循环渲染模板后，我正在尝试调整渲染 DOM 中一组元素的高度。我最初通过使用 afterRender 事件解决了这个问题，但我还没有设法获得函数来进行我需要的更改。

我有一个我想要实现的静态案例，所以我真的很感激使用 foreach 绑定在渲染计算的 observable 后动态调整高度的一些帮助。

这是静态案例的小提琴。[http://jsfiddle.net/lset/rr3ja/1/](http://jsfiddle.net/lset/rr3ja/1/)

请注意底部的查询更改了 .caption1 元素的高度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:18:59.440

显然你不能真正使用 afterRender 事件，因为它会在每个单独的项目被渲染后被调用，但是你需要在*所有*项目都被渲染后设置大小。您可以这样做的一种方法是在最后一项上具有一些属性，以便您可以在 afterRender 事件中知道这是最后一项（或者您可能只是将其与列表中的最后一项进行比较）。然后，您可以使用此测试来触发您调整所有元素的大小。过去，我只是比较了最后一项的索引，因为无论如何我通常都会通过可观察数组向 all 添加索引属性。

# iqueryable - ASP.NET Web API 方法返回 IQueryable 是否有意义 ?

> ID：10077364
> 
> 赞同：5
> 
> 时间：2012-04-09T17:49:29.837
> 
> 标签：iqueryable, asp.net-web-api, deferred-execution

我正在开发一个使用新 Web API 的项目，我注意到有人正在从 Get 方法返回一个 IQueryable<T>。

我的理解是 IQueryable 对于提高性能（延迟执行）很有用，但我认为 HTTP 连接另一端的客户端无法利用这一点。

我的直觉告诉我这应该是 IEnumberable<T> 而不是。我是对的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T19:56:35.987

`IQueryable<T>`可以通过在查询字符串（$top、$skip、$filter、$orderby）中传递一些类似 odata 的参数来“查询”对返回方法的响应。例如，如果您的资源可以在 .../api/People 中找到，您可以发送这些请求，这将导致服务器返回不同的数据：

```
.../api/People?$top=10                    ==> return only the first 10 elements
.../api/People?$skip=10&$top=5            ==> return the 11th to 15th elements
.../api/People?$filter=Name%20eq%20'John' ==> Only return people named "John"
.../api/People?$orderby=Name&$top=10      ==> return the first 10 elements, ordered by name 
```

请注意，在 beta 版本中，任何`IQueryable<T>`自动返回的操作都添加了这种“查询”支持。在最新的位（来自 codeplex）上，您需要手动将`[Queryable]`属性添加到操作以启用此行为。

如果您不想要那种查询行为，那么是的，返回`IEnumerable<T>`就可以了。

# php - 记录在导出的 RTF 文档中不循环

> ID：10077368
> 
> 赞同：1
> 
> 时间：2012-04-09T17:49:35.827
> 
> 标签：php, export, rtf

我正在通过 PHP 将内容从 MySQL 数据库导出到 Word 模板 (RTF)。

有一个部分，“附录 B”，它应该显示为记录找到的所有首字母缩略词。本节最少出现 90 条记录（即，这些是每条记录的标准首字母缩略词 (tblAcronyms)）；但是最大记录未知，因为用户可以添加到此列表（tblAppendixB）。

Word（即RTF）文档应该显示找到的所有记录，但是，它只显示第一条记录。

这是我迄今为止所拥有的：

```
<?php
....

#Retrieve Appendix B records
$qry_get_AppB = "SELECT vAcronym, vAcronymDesc FROM tblAcronyms
                   UNION SELECT vAcronym, vAcronymDesc FROM tblAppendixB
                     WHERE fkID = ". $i_fk_id . " ORDER BY vAcronym ASC";
$qry_appb_result = mysql_query($qry_get_AppB);
$qryAppBno_rows = mysql_num_rows($qry_appb_result);    

//Generate the headers to help a browser choose the correct location
header('Content-Type: application/msword');
header('Content-Disposition: inline; filename="'.$vProgramName.'_rec.rtf");

//Open the template file
$tfilename = 'Appb_Template.rtf';
$fp = fopen($tfilename, 'r');

//Read the template into a variable
$toutput = fread($fp, filesize($tfilename));

fclose($fp);

//Replace the place holders in the template with data
if($qryAppBno_rows > 0)
{
  while($rowAppB = mysql_fetch_array($qry_appb_result)) 
  {
     $vAppB = $rowAppB['vAcronym'] . '-' . $rowAppB['vAcronymDesc'] . "\r\n";
     $toutput = str_replace('<<vAppB>>', $vAppB, $toutput);
  }
}

//Send the generated document to the browser
echo $toutput;

?> 
```

我已经搜索了这个论坛和其他人，但还没有找到解决方案。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T17:56:53.343

好的，我不太确定您的模板是什么样的，但我想，您只有 1 个名为`<<vAppB>>`. 在您的第一次迭代中（如果有任何可用数据），您将那个占位符替换为您的第一个数据条目。在这一事实中，仅显示了一个占位符。

可能会将您的代码重写为与此类似的内容

```
... //do your stuff
$newLine = "\r\n";
$appendix = "";
while($rowAppB = mysql_fetch_array($qry_appb_result)) {
    $appendix .= $rowAppB['vAcronym'] . '-' . $rowAppB['vAcronymDesc'] . $newLine;
}
$toutput = str_replace('<<vAppB>>', $appendix, $toutput);
...//do some other stuff 
```

只是简单的原型设计，因此您可能需要做一些额外的工作。

诀窍是`collect`你得到的所有条目，而不是用你的占位符替换它:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:56:32.467

我解决了问题；我必须使用 "\par" 而不是 "\r\n" 让 MS Word (RTF) 将其识别为段落标记。这是现在可以使用的修改后的代码：

```
<?php
....

$t_newline = "\par";

#Retrieve Appendix B records
$qry_get_AppB = "SELECT vAcronym, vAcronymDesc FROM tblAcronyms
               UNION SELECT vAcronym, vAcronymDesc FROM tblAppendixB
                 WHERE fkID = ". $i_fk_id . " ORDER BY vAcronym ASC";
$qry_appb_result = mysql_query($qry_get_AppB);
$qryAppBno_rows = mysql_num_rows($qry_appb_result);    

//Generate the headers to help a browser choose the correct location
header('Content-Type: application/msword');
header('Content-Disposition: inline; filename="'.$vProgramName.'_rec.rtf");

//Open the template file
$tfilename = 'Appb_Template.rtf';
$fp = fopen($tfilename, 'r');

//Read the template into a variable
$toutput = fread($fp, filesize($tfilename));

fclose($fp);

//Replace the place holders in the template with data
if($qryAppBno_rows > 0)
{
   while($rowAppB = mysql_fetch_array($qry_appb_result)) 
   {
       $vAppendixB[] = $rowAppB['vAcronym'] . '-' . $rowAppB['vAcronymDesc'] . $t_newline;
       $vAppB = implode(" ", $vAppendixB);
   }
}

$toutput = str_replace('<<vAppB>>', $vAppB, $toutput);

//Send the generated document to the browser
echo $toutput;

?> 
```

希望这会对其他人有所帮助。:-)

# javascript - 如何向隐藏 JavaScript 函数添加 1 秒延迟

> ID：10077379
> 
> 赞同：0
> 
> 时间：2012-04-09T17:50:18.540
> 
> 标签：javascript, jquery, function, hide, delay

这是我为一个简单的导航栏准备的一些 JavaScript，但是我遇到了下拉菜单在您单击它们之前消失的问题，所以我想在鼠标离开导航栏后添加延迟，然后再隐藏。

我该怎么做？

```
<script type="text/javascript">
    $(document).ready(function () {
        // Navigation bar drop-down
        $("nav ul li").hover(function () {
            $(this).addClass("active");
            $(this).find("ul").show().animate({ opacity: 1 }, 400);
        }, function () {
            // Delay on hiding should go here
            $(this).find("ul").hide().animate({ opacity: 0 }, 200);
            $(this).removeClass("active");
        });
        $('nav ul li ul li:first-child').prepend('<li class="arrow"></li>');
        $('nav ul li:first-child').addClass('first');
        $('nav ul li:last-child').addClass('last');
        $('nav ul li ul').parent().append('<span class="dropdown"></span>').addClass('drop');
    });
</script> 
```

提前感谢任何可以提供帮助的人

PS 这可能很明显，但我对 JavaScript 知之甚少。:L

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T18:14:14.620

> 我有一个简单的导航栏

那就不要使用 JavaScript。这可以而且应该使用 CSS 来完成。CSS 过渡和选择器允许准确定义您想要的内容。

另请参阅[延迟：CSS3 中的悬停？](https://stackoverflow.com/q/8566090/1048572)以及那里的[优秀例子](http://jsfiddle.net/aEgV3/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T17:58:50.043

不要使用巨大的功能，例如`delay()`. 只需使用`setTimeout()`.

```
var that = this
setTimeout(function() {
    $(that).hide() // Do your stuff, just don't forget that "this" has changed
}, 1000) // Define your delay in milliseconds here 
```

内部的函数`setTimeout`将在指定为第二个参数的延迟之后执行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T18:00:49.777

你可以这样做。您使用该`delay()`方法设置延迟，并`.stop(true)`在两个悬停功能上使用，以防用户在延迟期间外出和回来。将`.stop(true)`清除所有排队的动画。我还将代码切换到`fadeIn()`and`fadeOut()`因为它们会根据需要自动执行`show()`and `hide()`。

```
<script type="text/javascript">
    $(document).ready(function () {
        // Navigation bar drop-down
        $("nav ul li").hover(function () {
            $(this).addClass("active");
            $(this).find("ul").stop(true).fadeIn(400);
        }, function () {
            // Delay on hiding should go here
            var self = $(this);
            self.find("ul").stop(true).delay(1500).fadeOut(400, function() {
                self.removeClass("active");
            });
        });
        $('nav ul li ul li:first-child').prepend('<li class="arrow"></li>');
        $('nav ul li:first-child').addClass('first');
        $('nav ul li:last-child').addClass('last');
        $('nav ul li ul').parent().append('<span class="dropdown"></span>').addClass('drop');
    });
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T22:49:52.077

很有意思。没有任何东西可以隐藏，直到您将鼠标悬停。 [小提琴](http://jsfiddle.net/FCert/2/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-09T17:54:09.547

我认为你可以这样做：

```
<script type="text/javascript">
    $(document).ready(function () {
        // Navigation bar drop-down
        $("nav ul li").hover(function () {
            $(this).addClass("active");
            $(this).find("ul").show().animate({ opacity: 1 }, 400);
        }, function () {
            // Delay on hiding should go here
            $(this).find("ul").hide().delay(1000).animate({ opacity: 0 }, 200, function() {
                $(this).removeClass("active");
            });  
        });
        $('nav ul li ul li:first-child').prepend('<li class="arrow"></li>');
        $('nav ul li:first-child').addClass('first');
        $('nav ul li:last-child').addClass('last');
        $('nav ul li ul').parent().append('<span class="dropdown"></span>').addClass('drop');
    });
</script> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-09T18:04:31.373

你可以使用延迟（）。

```
<script type="text/javascript">
    $(document).ready(function () {
        // Navigation bar drop-down
        $("nav ul li").hover(function () {
            $(this).addClass("active");
            $(this).find("ul").show().animate({ opacity: 1 }, 400);
        }, function () {
            // Delay on hiding should go here
        $(this).find("ul").delay(5000).fadeOut();
            $(this).removeClass("active");
        });
        $('nav ul li ul li:first-child').prepend('<li class="arrow"></li>');
        $('nav ul li:first-child').addClass('first');
        $('nav ul li:last-child').addClass('last');
        $('nav ul li ul').parent().append('<span class="dropdown"></span>').addClass('drop');
    });

</script> 
```

# facebook-graph-api - 只找女性或男性朋友

> ID：10077384
> 
> 赞同：1
> 
> 时间：2012-04-09T17:50:29.590
> 
> 标签：facebook-graph-api

我正在开发一个 Facebook 应用程序。在这个应用程序中，我使用图形 api 获得用户的朋友。例如：

```
$facebook->api("/{$user_id}/friends?fields=id,name,gender"); 
```

这很好用，但我想过滤以获得男性或女性朋友。我通过获取用户的所有朋友然后选择男性或女性来做到这一点，但我想知道是否有办法在 api 调用时过滤它。有人能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T19:31:59.237

尝试使用`FQL`：

```
/fql?q=select uid, name, sex from user where uid in(select uid2 from friend where uid1 = me()) and sex = "female" 
```

[FB 开发资源管理器示例](https://developers.facebook.com/tools/explorer/?method=GET&path=fql?q=select%20uid,%20name,%20sex%20from%20user%20where%20uid%20in%28select%20uid2%20from%20friend%20where%20uid1%20=%20me%28%29%29%20and%20sex%20=%20%22female%22)

# mysql - sqlite3 能否优雅地处理 30 个并发更新请求？

> ID：10077385
> 
> 赞同：1
> 
> 时间：2012-04-09T17:50:34.523
> 
> 标签：mysql, sqlite

我们喜欢 sqlite3 的简单性，但担心它优雅地处理并发更新的能力。我们的网络应用程序适用于大约 30 个有权更新的用户（最多 50 个用户）和一些只能阅读该页面的网络用户（比如说 500 个网络用户）。这 30 (50) 个用户可能不会同时进行更新。对数据库的每日更新应不超过 1000 次更新（考虑将一个数据库记录作为 ONE 更新保存到表中）。更新活动最有可能发生在上午 9 点至下午 5 点的工作时间内。

由于 sqlite3 锁定整个数据库以进行更新（不确定它是否锁定读取请求），我们的问题是 sqlite3 是否足够强大，可以在我们的情况下优雅地处理并发更新而不会显示异常错误。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T18:00:03.103

我认为您已经掌握了有关 SQLite 工作原理的足够信息。所以你的问题的答案是“是的”它可以处理。但真正的问题是性能如何？这取决于更新/插入数据库的频率。更新将锁定并保持读取等待。

假设性能可以接受并且您使用它。如果您的数据库损坏了怎么办？即使是最先进的 DBMS 系统也可能包含损坏的数据。从服务器关闭到错误可能有很多原因。如果您的 SQLite 损坏，据我所知，恢复数据库文件会更加困难。

我强烈建议不要冒险使用非嵌入式 DBMS。

# html - 如何在元素外显示:after内容

> ID：10077386
> 
> 赞同：18
> 
> 时间：2012-04-09T17:50:38.737
> 
> 标签：html, css

在以下情况下，如何使生成的文本`:after`位于跨度框之外？（它目前在内部渲染，即它使`span`元素更宽）

HTML

```
<span class="my">Boxtext</span> 
```

CSS

```
span.my {
    padding:            4px 8px;
    background-color:   red;
    display:            inline-block;
    border-radius:      10px;
    margin-left:        20px;
    }   
span.my:after {
    content:            " text that is supposed to come after the box";
    } 
```

我想这有点类似于列表样式位置，您可以在其中选择内部或外部......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T18:00:13.763

我相信 CSS 内容被认为是渲染它的对象的一部分。您可以提出`:after`应该命名的论点`:append`。

对于您的情况，您可以尝试在其中添加一个额外的元素`span.my`：

```
<span class="my"><span>Boxtext</span></span>
span.my span { ... }
span.my:after { ... } 
```

或者专门设置内容的样式。

```
span.my:after { 
    content:            " text that is supposed to come after the box";
    background-color:   white;
    position:           absolute;
    margin-left:        10px;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-09T18:08:58.093

只需`position: absolute`在`::after {}`伪元素的 css 中使用：

```
span.my:after {
    content: " text that is supposed to come after the box";
    position: absolute;
    left: 100%;
}​ 
```

当然，请记住在父元素上使用`position: relative;`（或任何其他`position`值） 。`span.my`

[JS 小提琴演示](http://jsfiddle.net/davidThomas/PMFst/)。

还要记住，由于`::after`（和`::before`）伪元素继承自它“附加”到的跨度，它将继承`width`，因此可能需要在 CSS 中为那个/那些元素显式覆盖。

# php - 在mysql数据库表单元格中插入链接

> ID：10077387
> 
> 赞同：1
> 
> 时间：2012-04-09T17:50:39.430
> 
> 标签：php, mysql

我的网站上有一个通知系统，用户将收到某个事件的通知。通知消息将存储在 MySQL 数据库中。

当我在消息中插入链接时，它会返回一个 MySQL 错误，指出它无法插入链接。

我怎样才能做到这一点？我正在使用 php。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:04:12.573

几乎所有链接都包含将由 sql 数据库以奇怪的方式解释的字符，从而导致基于不同输入的不可预测的结果。您应该确保正确转义这些字符：

```
$some_input = getInputFromWebPage();
$safe_input = mysql_real_escape_string($someInput);
insertIntoDB($safe_input); 
```

这只是一个示例，显然不是有效的代码，但希望它能够引导您朝着正确的方向前进。有几个函数可以为您将转义字符添加到字符串中。

# java - Java 中范围和包的问题

> ID：10077389
> 
> 赞同：1
> 
> 时间：2012-04-09T17:51:11.113
> 
> 标签：java, oop

我正在尝试编写一组模拟旅行卡的类。我在从另一个班级访问一个班级的成员时遇到问题。WmBusPass 类目前无法编译并给出错误消息“找不到符号 - 构造函数 Journey(int,int,java.lang.String,int)”。更一般地说，我不确定组织课程的最佳方法。让 Journey 类成为 WmBusPass 的内部类有意义吗？此外，我试图通过将类放入包中来解决我的组织问题，但是，我并不完全了解包的动态，它只会让我更加困惑。

**WmBusPass.java**

```
package buscard; 
import java.util.ArrayList;
public class WmBusPass implements BusPass{
    private String ID;
    private String Name;
    private String Address;
    private double Balance;
    public static ArrayList<Payment> payArray;
    public static ArrayList<Journey> jArray;
    public static int weekOfYear = 0;
    public static int monthOfYear = 0;
    public static int dayOfYear = 0;

    public WmBusPass(String ID,String Name, String Address, ArrayList<Payment> payArray, ArrayList<Journey> jArray){                                                                                                                                                  
        this.ID = ID;
        this.Name = Name;
        this.Address = Address;
        Balance = 0;
        this.payArray = payArray;
        this.jArray = jArray;
    }   
    public static void main(String [ ] args){

    }       
    public String getID(){
        return ID;
    }    
    public String getName(){
        return Name;
    }
    public void setName(String Name){
        this.Name = Name;
    }
    public String getAddress(){
        return Address;
    }
    public void setAddress(String Address){
        this.Address = Address;
    }
    public double getBalance(){
        return Balance;
    } 
    public static ArrayList<Journey> getjArray(){
        return jArray;
    }

    public void payment(int date1, double amount1){
        Payment thisPay = new Payment(date1, amount1);
        Balance = Balance + amount1;
        payArray.add(thisPay);
    }

    public int getLastPaymentDate(){
        Payment lastOne = payArray.get(payArray.size()-1);
        return lastOne.date;
    }
    public boolean journey(int date, int time, String busNumber, int journeyType){
        Journey thisJourney = new Journey(date, time, busNumber, journeyType);

        if (thisJourney.isInSequence(date, time) == false)
        {
            return false;            
        }
        else
        {
            Journey.updateCurrentCharges(date);

            thisJourney.costOfJourney = journeyCost(thisJourney);
            Journey.dayCharge = Journey.dayCharge + thisJourney.costOfJourney;
            Journey.weekCharge = Journey.weekCharge + thisJourney.costOfJourney;
            Journey.monthCharge = Journey.monthCharge + thisJourney.costOfJourney;

            Balance = Balance - thisJourney.costOfJourney;

        }

    }   
    public boolean isInSequence(int date, int time){
        Journey prevJourney = jArray.get(jArray.size()-1);
        return((prevJourney.date < date)||(prevJourney.date = date && prevJourney.time < time));                       
    } 
} 
```

**Journey.java**

```
package buscard; 
import java.util.ArrayList;
class Journey
{
    public int date;
    public double time;
    public int busNumber;
    public int journeyType;
    public static double dayCharge = 0;
    public static final double maxDayCharge = 3.50;
    public static double weekCharge = 0;
    public static final double maxWeekCharge = 15;
    public static double monthCharge = 0;
    public static final double maxMonthCharge = 48;
    private int journeyNumber;
    private static int numberOfJourneys = 0;
    private double costOfJourney; 

    public Journey(int date, double time, int busNumber, int journeyType)
    {
        this.date = date;
        this.time = time;
        this.busNumber = busNumber;
        this.journeyType = journeyType;      
        journeyNumber = ++numberOfJourneys;
    }
    public int getDate(){
        return date;
    }  
    public double getTime(){
        return time;
    }
    public int getBusNumber(){
        return busNumber;
    }
    public boolean isInSequence(int date, int time){
        ArrayList<Journey> jArray = WmBusPass.getjArray();
        Journey prevJourney = jArray.get(jArray.size()-1);
        return((prevJourney.date < date)||(prevJourney.date == date && prevJourney.time < time));                       
    }           

    public static double returnLeast(){
        double d = maxDayCharge - dayCharge;
        double m = maxMonthCharge - monthCharge;
        double w = maxWeekCharge - weekCharge; 
        double least = 0;
        if (d <= w && d <= m)
        {
             least = d;
        }
        else if(w <= d && w <= m)
        {
             least = w;
        }
        else if(m <= d && m <= w)
        {
             least = m;
        }

        return least;
    }
        public double journeyCost(Journey reqJourney){                   
        if (journeyType == 1){                                 
            if (dayCharge <= 2.50 && weekCharge <= 14 && monthCharge <= 47)
            {
                costOfJourney = 1;
            }
            else 
            {
                costOfJourney = returnLeast();
            }

        }
        else if (journeyType == 2)
        {
            if (dayCharge <= 1.80 && weekCharge <= 13.30 && monthCharge <= 46.30)
            {
                costOfJourney = 1.70;
            }
            else 
            {
                costOfJourney = returnLeast();
            }
        }
        else if (journeyType == 3)
        {
            if (dayCharge <= 1.60 && weekCharge <= 13.10 && monthCharge <= 46.10)
            {
                costOfJourney = 1.90;
            }
            else 
            {
                costOfJourney = returnLeast();
            }

        }          
        return costOfJourney;    
    }
    public void updateCurrentCharges(int date){
        int newDayOfYear = DateFunctions.getYearDay(date);
        int newWeekOfYear = DateFunctions.getYearWeek(date);
        int newMonthOfYear = DateFunctions.getYearMonth(date);

        if (newDayOfYear > WmBusPass.dayOfYear)
        {
            WmBusPass.dayOfYear = newDayOfYear;
            dayCharge = 0;
        }
        if (newWeekOfYear > WmBusPass.weekOfYear)
        {
            WmBusPass.weekOfYear = newWeekOfYear;
            weekCharge = 0;
        }
        if (newMonthOfYear > WmBusPass.monthOfYear)
        {
            WmBusPass.monthOfYear = newMonthOfYear;
            monthCharge = 0;
        }
    }  
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T17:54:40.487

您只定义了一个构造函数`Journey`：

```
public Journey(int date, double time, int busNumber, int journeyType) 
```

但你这样称呼它：

```
public boolean journey(int date, int time, String busNumber, int journeyType){
        Journey thisJourney = new Journey(date, time, busNumber, journeyType); 
```

哪里`busNumber`是 a `String`，而不是`int`。你有三个选择：

1.  修改构造函数以采用`String`.
2.  添加另一个采用`String`.
3.  在调用构造函数之前转换`busNumber`为一个。`int`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T17:54:40.293

这是因为您正在创建`Journey`对象

```
Journey thisJourney = new Journey(date, time, busNumber, journeyType); 
```

但你没有它的构造函数。Journey 仅包含构造函数：

```
public Journey(int date, double time, int busNumber, int journeyType) 
```

所以将构造函数添加到`Journey`...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T17:55:28.480

相信编译器。

它说没有带有您提供的参数的 Journey 构造函数。

看看你编码的内容：

```
 Journey thisJourney = new Journey(date, time, busNumber, journeyType); 
```

`busNumber`在您的电话中是 a `String`，但`int`在您的 ctor 中是：

```
public Journey(int date, double time, int busNumber, int journeyType) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T18:06:16.427

针对您的包裹混淆：

使用[Eclipse 之](http://www.eclipse.org/downloads/)类的 IDE（集成开发环境） 。这将使您的生活与包装和编码的几乎所有方面变得容易。

要定义一个包，它是提供访问保护和名称空间管理的代码的逻辑分组。包可以有子包，例如`com.transport`是父包，子包是`com.transport.vehicle`or`com.transport.billing`等​​。

[您可以在此处](http://docs.oracle.com/javase/tutorial/java/package/index.html)找到有关软件包的更多信息。

# jquery - 如何将div锁定在页面顶部

> ID：10077399
> 
> 赞同：0
> 
> 时间：2012-04-09T17:52:18.413
> 
> 标签：jquery, css, backbone.js, haml

我正在使用 haml 来构建我的网络应用程序。在我的页面中，我有 2 个部分，标题和头像缩略图。我想将标题部分锁定在页面顶部，但页面的其余部分可滚动。我怎样才能做到这一点？

```
.standalone_thread_wrapper
  //I WANT TO FIX THIS SECTION AT TOP OF PAGE
  .page_section.header
    .text
      %h4
    .action
      %input.btn.primary.add_muse{type: "submit", value: "Add Muse"}
    .clear
  .page_section.avatar_thumbnails
    %a{href: "#", rel: "tooltip", title: "See all muses", nickname: "All"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T17:54:57.533

您可以将固定位置 CSS 用于`.page_section.header`. 见下文，

```
.page_section.header {
    position: fixed;
    top: 0px; 
} 
```

# php - 使用 --process-isolation 时出现致命错误后 PHPUnit 无法继续测试

> ID：10077400
> 
> 赞同：6
> 
> 时间：2012-04-09T17:52:19.603
> 
> 标签：php, unit-testing, error-handling, continuous-integration, phpunit

我有一个 PHPUnit 测试套件，由于未找到类定义，该套件当前导致致命错误。归根结底，这是测试代码本身的失败，以及开发人员在提交代码之前未能证明测试本身的正确性。

然而，这样的事情确实时有发生，如果发生致命错误（无论谁最终负责），测试只是被标记为失败，而测试套件的其余部分仍然是执行。

我已经阅读了有关`--process-isolation`开关的信息，据我所知，它*应该*解决这个问题。由于每个测试都在单独的进程中运行，如果子进程因致命错误而死亡，父进程仍然可以继续运行。事实上，这在对类似问题的回答中明确说明：[https](https://stackoverflow.com/a/5340151/84762) ://stackoverflow.com/a/5340151/84762 ，它显示了我希望自己看到的确切输出类型。

但是，无论我是否使用该`--process-isolation`标志，我似乎都得到了完全相同的输出：

***没有*进程隔离**

```
[kogi@phagocyte ~]$ /usr/bin/phpunit --colors --verbose --coverage-html "target/coverage" ~/app/zend/tests/application/

PHP Fatal error:  Class 'Rmd_Database_OldObject' not found in /home/kogi/app/zend/private/models/translate/Poll.php on line 9
PHP Stack trace:
PHP   1\. {main}() /usr/bin/phpunit:0
PHP   2\. PHPUnit_TextUI_Command::main() /usr/bin/phpunit:46
PHP   3\. PHPUnit_TextUI_Command->run() /usr/share/pear/PHPUnit/TextUI/Command.php:130
PHP   4\. PHPUnit_Runner_BaseTestRunner->getTest() /usr/share/pear/PHPUnit/TextUI/Command.php:150
PHP   5\. PHPUnit_Framework_TestSuite->addTestFiles() /usr/share/pear/PHPUnit/Runner/BaseTestRunner.php:96
PHP   6\. PHPUnit_Framework_TestSuite->addTestFile() /usr/share/pear/PHPUnit/Framework/TestSuite.php:419
PHP   7\. PHPUnit_Util_Fileloader::checkAndLoad() /usr/share/pear/PHPUnit/Framework/TestSuite.php:358
PHP   8\. PHPUnit_Util_Fileloader::load() /usr/share/pear/PHPUnit/Util/Fileloader.php:79
PHP   9\. include_once() /usr/share/pear/PHPUnit/Util/Fileloader.php:95
PHP  10\. require_once() /home/kogi/app/zend/tests/application/translate/PollTest.php:11

Fatal error: Class 'Rmd_Database_OldObject' not found in /home/kogi/app/zend/private/models/translate/Poll.php on line 9

Call Stack:
    0.0003      91584   1\. {main}() /usr/bin/phpunit:0
    0.0076     612672   2\. PHPUnit_TextUI_Command::main() /usr/bin/phpunit:46
    0.0076     613744   3\. PHPUnit_TextUI_Command->run() /usr/share/pear/PHPUnit/TextUI/Command.php:130
    0.0246    1249464   4\. PHPUnit_Runner_BaseTestRunner->getTest() /usr/share/pear/PHPUnit/TextUI/Command.php:150
    0.0706    1626680   5\. PHPUnit_Framework_TestSuite->addTestFiles() /usr/share/pear/PHPUnit/Runner/BaseTestRunner.php:96
    0.1691    8053584   6\. PHPUnit_Framework_TestSuite->addTestFile() /usr/share/pear/PHPUnit/Framework/TestSuite.php:419
    0.1693    8057320   7\. PHPUnit_Util_Fileloader::checkAndLoad() /usr/share/pear/PHPUnit/Framework/TestSuite.php:358
    0.1694    8057664   8\. PHPUnit_Util_Fileloader::load() /usr/share/pear/PHPUnit/Util/Fileloader.php:79
    0.1711    8240600   9\. include_once('/home/kogi/app/zend/tests/application/translate/PollTest.php') /usr/share/pear/PHPUnit/Util/Fileloader.php:95
    0.1805    9187768  10\. require_once('/home/kogi/app/zend/private/models/translate/Poll.php') /home/kogi/app/zend/tests/application/translate/PollTest.php:11 
```

***WITH*进程隔离**

```
[kogi@phagocyte ~]$ /usr/bin/phpunit --colors --verbose --coverage-html "target/coverage" --process-isolation ~/app/zend/tests/application/
PHP Fatal error:  Class 'Rmd_Database_OldObject' not found in /home/kogi/app/zend/private/models/translate/Poll.php on line 9
PHP Stack trace:
PHP   1\. {main}() /usr/bin/phpunit:0
PHP   2\. PHPUnit_TextUI_Command::main() /usr/bin/phpunit:46
PHP   3\. PHPUnit_TextUI_Command->run() /usr/share/pear/PHPUnit/TextUI/Command.php:130
PHP   4\. PHPUnit_Runner_BaseTestRunner->getTest() /usr/share/pear/PHPUnit/TextUI/Command.php:150
PHP   5\. PHPUnit_Framework_TestSuite->addTestFiles() /usr/share/pear/PHPUnit/Runner/BaseTestRunner.php:96
PHP   6\. PHPUnit_Framework_TestSuite->addTestFile() /usr/share/pear/PHPUnit/Framework/TestSuite.php:419
PHP   7\. PHPUnit_Util_Fileloader::checkAndLoad() /usr/share/pear/PHPUnit/Framework/TestSuite.php:358
PHP   8\. PHPUnit_Util_Fileloader::load() /usr/share/pear/PHPUnit/Util/Fileloader.php:79
PHP   9\. include_once() /usr/share/pear/PHPUnit/Util/Fileloader.php:95
PHP  10\. require_once() /home/kogi/app/zend/tests/application/translate/PollTest.php:11

Fatal error: Class 'Rmd_Database_OldObject' not found in /home/kogi/app/zend/private/models/translate/Poll.php on line 9

Call Stack:
    0.0003      91752   1\. {main}() /usr/bin/phpunit:0
    0.0076     612824   2\. PHPUnit_TextUI_Command::main() /usr/bin/phpunit:46
    0.0076     613896   3\. PHPUnit_TextUI_Command->run() /usr/share/pear/PHPUnit/TextUI/Command.php:130
    0.0246    1250360   4\. PHPUnit_Runner_BaseTestRunner->getTest() /usr/share/pear/PHPUnit/TextUI/Command.php:150
    0.0708    1627528   5\. PHPUnit_Framework_TestSuite->addTestFiles() /usr/share/pear/PHPUnit/Runner/BaseTestRunner.php:96
    0.1688    8054296   6\. PHPUnit_Framework_TestSuite->addTestFile() /usr/share/pear/PHPUnit/Framework/TestSuite.php:419
    0.1690    8057992   7\. PHPUnit_Util_Fileloader::checkAndLoad() /usr/share/pear/PHPUnit/Framework/TestSuite.php:358
    0.1691    8058336   8\. PHPUnit_Util_Fileloader::load() /usr/share/pear/PHPUnit/Util/Fileloader.php:79
    0.1707    8241296   9\. include_once('/home/kogi/app/zend/tests/application/translate/PollTest.php') /usr/share/pear/PHPUnit/Util/Fileloader.php:95
    0.1801    9188464  10\. require_once('/home/kogi/app/zend/private/models/translate/Poll.php') /home/kogi/app/zend/tests/application/translate/PollTest.php:11 
```

对于我们这些无法在头脑中有效区分的人来说，这两个输出实际上是相同的（除了执行时间和内存使用量几乎可以忽略不计）。

在这两种情况下，致命错误都会杀死整个测试套件。在这种特殊情况下，这发生在第三个测试中，其余 150 个测试（在其他几个文件/套件中）永远不会执行。

我在这里做错了什么？是否有其他方法可以在一个测试中出现致命错误（将测试标记为失败）并仍然执行剩余的测试？

* * *

**编辑**

我正在使用 PHPUnit 3.6.10

**编辑**

对这个问题的答案的评论激发了 PHPUnit 的 GitHub 页面上的一张新票：[https ://github.com/sebastianbergmann/phpunit/issues/545](https://github.com/sebastianbergmann/phpunit/issues/545)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T20:42:03.493

PHPUnit 在运行任何测试之前加载将要运行的每个测试文件。这会导致 PHP 解析这些文件并执行它们的顶级代码。如果加载了任何类，例如，扩展了一个不存在的类，您将收到致命错误。

I don't see any way around this without enhancing PHPUnit to parse the files without executing their code during the scanning process.

# mysql - 如何使用 SQL 选择静态值/字符串？

> ID：10077403
> 
> 赞同：1
> 
> 时间：2012-04-09T17:52:28.423
> 
> 标签：mysql, sql

我总是忘记 -

我正在使用终端 MySQL 服务器操作选择输出文件 - 我需要在 SELECT 集之间创建一个分隔符。如何插入“---”？

```
SELECT "---"; 
```

显然不起作用。

还有一种方法可以格式化 MySQL 命令的输出吗？

我的看起来很乱：

```
track_id    track_title track_num   album   genre   artist  length  track_rating
1   Siberia 1   1   1   1   00:04:29    5
2   Where the Fence is Low  2   1   1   1   00:03:24    5
3   Toes    3   1   1   1   00:03:19    5
4   Banner  4   1   1   1   00:03:37    5
5   Everybody Breaks a Glass    5   1   1   1   00:03:55    5
6   Heavy Rope  6   1   1   1   00:03:59    5
7   Timing Is Everything    7   1   1   1   00:03:16    5
8   Peace Sign  8   1   1   1   00:03:20    5
9   Flux and Flow   9   1   1   1   00:03:17    5
10  Fourth Dimension    10  1   1   1   00:03:27    5
11  Hollywood   1   2   3   3   00:04:13    5
12  In This Moment  2   2   3   3   00:04:31    5
13  Some Kind of Wonderful  3   2   3   3   00:03:04    5
14  End of May  4   2   3   3   00:03:53    5
15  Me and Mrs. Jones   5   2   3   3   00:03:43    5
16  Have not met you yet    6   2   3   3   00:05:20    5
17  Heartache Tonight   7   2   3   3   00:03:47    5
18  Best of Me  8   2   3   3   00:04:33    5
19  Swimming in Miami   1   4   1   4   00:04:56    5
20  Captains and Cruise Ships   2   4   1   4   00:03:29    5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T17:56:48.497

您所说的“显然不起作用”的命令在 MySQL 中应该可以正常工作。

如果您觉得需要在 SQL 语句中包含 FROM 子句，文档说明您可以将`FROM DUAL`其用作“虚拟”表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T18:02:44.323

它是

```
select '---' ... 
```

注意单引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T18:07:25.567

> 我需要在 SELECT 集之间创建一个分隔符。如何插入“---”？

因此，您有多个查询，并且您希望输出中有一行带有`---`. 国际海事组织：可怕:)

你必须这样做：

```
select field1, field2, field3, etc... from yourTable
union all
select '---', null, null, etc...
union all
select field1, field2, field3, etc... from anotherTable 
```

# eclipse - 使用 ANT 构建 Flash 项目

> ID：10077404
> 
> 赞同：1
> 
> 时间：2012-04-09T17:52:37.497
> 
> 标签：eclipse, actionscript-3, apache-flex, ant, fla

目前我们有一个在 Flash 和 AS3 中创建的大型项目。我知道你不能真正用 ANT 编译或构建 fla。我已经看到了 ANT 的所有弹性功能。所以让我解释一下我们尝试这样做的原因和原因，希望有人能就如何解决这个问题提出建议。

*   我们想定制我们的最终产品，以便我们可以在命令行上交换图像和配色方案（也包括其他东西）。
*   我们希望使用 ANT 来构建我们的项目并控制命令行。
*   基本上是最终产品，用户只需告诉它图像在哪里，只需要几分钟。

我们是否必须将我们的项目转换为 Flex 才能做到这一点？任何能让我开始的事情都会很棒。我从来没有使用过 ANT，所以我试图在完成这个过程中学习这一点。

ps 我目前在 Eclipse 中使用 ANT。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T00:43:42.843

蚂蚁并不是真的必要。我能想到两个直接的解决方案：

*   使用 JSFL 提示输入图像目录，并根据需要更改代码或 DOM（[旧的 tut，但](http://active.tutsplus.com/tutorials/workflow/create-new-features-for-flash-with-jsfl/)可以，还有[JSFL 参考](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CC8QFjAB&url=http://help.adobe.com/en_US/flash/cs/extend/flash_cs5_extending.pdf&ei=woGDT4anNo2G8QSc6MnSBw&usg=AFQjCNHSRUtg54hM5TlKmDbqNiuFwU_S_A&sig2=FqogqB1HI-FCVKSdRPFvJQ)。）
*   使用条件编译常量（[Adobe 链接](http://help.adobe.com/en_US/Flash/10.0_UsingFlash/WS3e7c64e37a1d85e1e229110db38dec34-7fa4a.html#WS7D94A7C3-8F91-421a-936C-F076374C470F)）。

条件编译常量允许您在 Actionscript 文件中看到和编辑所有内容，这似乎更易于管理。

# php - apache 2.2上的Android php服务连接-一些成功连接后index.php没有响应

> ID：10077407
> 
> 赞同：1
> 
> 时间：2012-04-09T17:52:51.850
> 
> 标签：php, android, apache, database-connection

我开始开发一个 android 应用程序，它将通过 php 服务使用数据库连接。

我成功安装了 apache 2.2 服务器和 php 5 并配置了它们。我的项目中没有连接问题，但问题是：1）应用程序连接到php服务，执行查询并获取结果，2）但是在一些查询运行后，服务开始没有响应，我只是无法解决它2天。

当服务开始无响应时，我通过在资源管理器中输入 http:/localhost:8888/android_api/（android_api 是包含 php 服务功能的文件夹）来检查它，结果显示为无响应。当我刷新页面时，它开始再次响应。

我的 php 代码（本地主机上的 index.php：8888/android_api）：

```
<?php
/**
 * File to handle all API requests
 * Accepts GET and POST
 *
 * Each request will be identified by TAG
 * Response will be JSON data

/**
 * check for POST request
 */
if (isset($_POST['tag']) && $_POST['tag'] != '') {
    // get tag
    $tag = $_POST['tag'];

    // include db handler
    require_once 'include/DB_Functions.php';
    $db = new DB_Functions();

    // response Array
    $response = array("tag" => $tag, "success" => 0, "error" => 0);

    // check for tag type
    if ($tag == 'insert') {
        // Request type is check Login
        $icao = $_POST['icao'];
        $name = $_POST['name'];
        $latitude = $_POST['latitude'];
        $longitude = $_POST['longitude'];

        // check for user
        $result = $db->insertAirport($icao, $name, $latitude, $longitude);
        if ($result) {
            $response["success"] = 1;
        } else {
            $response["error"] = 1;
        }
        echo json_encode($response);
    } else if ($tag == 'getall') {
        $result = $db->getAllAirports();
        $no_of_rows = mysql_num_rows($result);
        if($no_of_rows > 0) {
            $response["success"] = 1;
            while($r = mysql_fetch_assoc($result)) {
                $response[$result["icao"]] = $r;
            }
        } else {
            $response["error"] = 1;
        }
        echo json_encode($response);
    } else {
        echo "Invalid Request";
    }
} else {
    echo "Access Denied";
}
?> 
```

处理连接的android代码：

```
 try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        httpPost.setEntity(new UrlEncodedFormEntity(params));

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

url 和 params 变量包含正确的数据。任何帮助都是神一样的。

# silverlight - Silverlight中是否有类似Expression Design的骨架笔画？

> ID：10077409
> 
> 赞同：1
> 
> 时间：2012-04-09T17:53:04.610
> 
> 标签：silverlight

表情设计有一个称为骨架笔划的功能，它允许您使用任意矢量/位图作为笔划。

[http://msdn.microsoft.com/en-us/library/cc294949(v=expression.30).aspx](http://msdn.microsoft.com/en-us/library/cc294949(v=expression.30).aspx) http://msdn.microsoft.com/en-us/library/cc294775(v=expression.30) .aspx

笔画被视为骨架，画笔在笔画之后绘制。在 silverlight 中使用 ImageBrush 似乎没有相同的效果。相反，它只是渲染 ImageBrush，就好像它会渲染填充但填充部分被切掉一样。

顺便说一句，我正在使用 Silverlight 5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T19:04:38.523

Silverlight 不支持此功能。至少不是开箱即用。

# algorithm - 在要求事先解决编程挑战时，期望什么状态？

> ID：10077410
> 
> 赞同：3
> 
> 时间：2012-04-09T17:53:14.220
> 
> 标签：algorithm, oop, coding-style, startup

我已经申请了几家初创公司，他们中的大多数都要求在开始面试候选人之前解决编程挑战。我已经提交了几个解决方案，但在最初的筛选中一直被拒绝。现在我想的是，他们会看到我用来解决问题的编码风格、算法和 OOD 概念。你们能否输入更多信息，以考虑其他细节以及如何改进我的编码以便被选中。顺便说一句，我在 Java/Perl 中完成了所有编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:01:31.640

好问题，我也是一名新毕业生......我注意到一件事：当你在家做练习时，他们希望你使用最好的算法。在我看来，代码模块化，即使是一个小功能也是关键。在代码中投入大量精力，因为他们不仅在评判你，还在将你与其他候选人进行比较。似乎付出更多努力的人获胜。

ps：在programmers.stackexchange上问这个问题，你会在那里得到一些很好的输入。

# javascript - 我可以使用 Jquery UI datepicker 更改键盘输入日期的格式吗？

> ID：10077412
> 
> 赞同：2
> 
> 时间：2012-04-09T17:53:20.130
> 
> 标签：javascript, jquery, user-interface, keyboard, datepicker

挪威日期格式为 dd.mm.yyyy。我已将 datepicker 日期格式更改为此，没问题。但是，如果用户决定通过键盘输入日期，他们可能会输入 3.4.12，甚至只输入 3.4。我希望 datepicker 在模糊时正确格式化日期，即使日期是通过键盘输入的，而不是从 datepicker 中选择的。我尝试了以下方法，但没有奏效：

```
$('.dp').datepicker({
   onClose: function(dateText, inst) {
      $(this).val(dateText)
   }
}) 
```

输入没有任何反应，因为返回的 dateText 与输入的值相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:59:46.373

[这](http://jsfiddle.net/zero21xxx/jbXNP/)应该让你朝着正确的方向前进。它已经在 Chrome 中进行了测试，并且可以按您的预期工作。

# asp.net-mvc-3 - 在布局页面 mvc3 中隐藏元素

> ID：10077413
> 
> 赞同：1
> 
> 时间：2012-04-09T17:53:20.490
> 
> 标签：asp.net-mvc-3, cookies, razor, hide, elements

好的，所以我很难隐藏一些布局部分（我的布局页面中的 div 和我使用 mvc3）。

我有这个 js 片段，它基本上是主要逻辑：

```
$('.contentExpand').bind('click', function () {
            $.cookie('right_container_visible', "false");
        });

        //Cookies Functions========================================================
        //Cookie for showing the right container
        if ($.cookie('right_container_visible') === 'false') {
            if ($('#RightContainer:visible')) {
                $('#RightContainer').hide();
            }
            $.cookie('right_container_visible', null);
        } else {
            if ($('#RightContainer:hidden')) {
                $('#RightContainer').show();
            }
        } 
```

如您所见，每当我点击某些具有特定 CSS 的链接时，我都会隐藏容器。这似乎适用于简单的测试。但是当我开始测试它时

.contentExpand click --> detail button click --> .contentExpand click --> [这里出现意外问题： $.cookie('right_container_visible', null); 已读取，但它没有将值设置为 null，就好像它忽略它一样]

我试图了解实现这一点的正确逻辑。任何人都知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T20:25:51.543

最简单的解决方案是在绑定委托之外创建变量。例如：

```
var rightContVisibility = $.cookie('right_container_visible');
$('.contentExpand').bind('click', function () {
             $.cookie('right_container_visible', "false");
             rightContVisibility = "false";
        });

if (rightContVisibility === 'false') {
...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T23:15:04.543

对我来说最好的事情是创建一个可以捕捉元素大小的事件。我从另一个帖子中得到这个，但我不记得是哪一个。无论如何，这里是事件的代码：

```
//Event to catch rezising============================================================================
(function () {
var interval;
jQuery.event.special.contentchange = {
    setup: function () {
        var self = this,
        $this = $(this),
        $originalContent = $this.text();
        interval = setInterval(function () {
            if ($originalContent != $this.text()) {
                $originalContent = $this.text();
                jQuery.event.handle.call(self, { type: 'contentchange' });
            }
        }, 100);
    },
    teardown: function () {
        clearInterval(interval);
    }
};
})();
//=========================================================================================

//Function  to resize the right container============================================================
(function ($) {
$.fn.fixRightContainer = function () {

    this.each(function () {

        var width = $(this).width();
        var parentWidth = $(this).offsetParent().width();
        var percent = Math.round(100 * width / parentWidth);
        if (percent > 62) {
            $('#RightContainer').remove();
        }
    });
};
})(jQuery);
//=================================================================================================== 
```

# junit - 如何在 IBM J9 JVM 上将 JMockit 与 Gradle 一起使用？

> ID：10077414
> 
> 赞同：4
> 
> 时间：2012-04-09T17:53:23.547
> 
> 标签：junit, gradle, jmockit

我正在使用 Gradle (Milestone 8a) 使用 IBM J9 JVM 在我的项目上运行 JUnit 测试，根据“[使用 JMockit 运行测试](http://jmockit.googlecode.com/svn/trunk/www/tutorial/RunningTests.html)”要求我将参数传递`-javaagent:jmockit.jar`给 JVM。但是，JMockit 没有注入模拟参数，这导致我的测试失败，并显示“方法（foo）应该没有参数）”。测试在 HotSpot JVM 上的 Eclipse 中运行良好。

我已扩展`test`任务以查找 JAR 并将参数添加到`jvmArgs`如下所示：

```
test {
   doFirst {
     // Don't do this until the task is actually being executed, because 
     // as soon as we call testCompile.find the configuration is resolved and 
     // can't be modified anymore.
     jMockit = project.configurations.testCompile.find {
       it.name.startsWith("jmockit-")
     }
     jvmArgs "-javaagent:${jMockit}"
   }
} 
```

我还在`testCompile`配置中添加了 JMockit 和 JUnit，确保首先使用 JMockit，并通过运行验证这一点`gradle dependencies`：

```
dependencies {
  testCompile 'com.googlecode.jmockit:jmockit:0.999.13'
  testCompile 'junit:junit:4.10'
} 
```

的输出`gradle check --debug`确认`-javaagent`正在使用该参数：

```
12:44:14.788 [DEBUG] [org.gradle.process.internal.ProcessBuilderFactory] creating process builder for Gradle Worker 1
12:44:14.788 [DEBUG] [org.gradle.process.internal.ProcessBuilderFactory] in directory /home/bbobby/webapp
12:44:14.788 [DEBUG] [org.gradle.process.internal.ProcessBuilderFactory] with argument#0 = -javaagent:/home/bbobby/.gradle/caches/artifacts-8/filestore/com.googlecode.jmockit/jmockit/0.999.13/jar/a6
ba457e09361f37e386edea176c5ce4fa9ee110/jmockit-0.999.13.jar
12:44:14.789 [DEBUG] [org.gradle.process.internal.ProcessBuilderFactory] with argument#1 = -ea
12:44:14.789 [DEBUG] [org.gradle.process.internal.ProcessBuilderFactory] with argument#2 = -cp
12:44:14.789 [DEBUG] [org.gradle.process.internal.ProcessBuilderFactory] with argument#3 = /home/bbobby/.gradle/caches/1.0-milestone-8a/workerMain/classes
12:44:14.789 [DEBUG] [org.gradle.process.internal.ProcessBuilderFactory] with argument#4 = org.gradle.process.internal.launcher.GradleWorkerMain
12:44:14.816 [DEBUG] [org.gradle.process.internal.DefaultExecHandle] Started Gradle Worker 1. 
```

我很确定我已经做了我应该做的一切。为什么我的测试无法运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T19:12:40.957

这是[http://issues.gradle.org/browse/GRADLE-2189](http://issues.gradle.org/browse/GRADLE-2189)，已经为即将到来的 1.0-rc-1 修复了。您可以立即试用[发布候选版](http://www.gradle.org/release-candidate)。

# r - 用最接近的值替换 R 中的 NA

> ID：10077415
> 
> 赞同：30
> 
> 时间：2012-04-09T17:53:30.213
> 
> 标签：r, na, missing-data

我正在寻找类似于包`na.locf()`中的东西`zoo`，但不是总是使用*以前*的非`NA`值，而是我想使用*最接近的*非`NA`值。一些示例数据：

```
dat <- c(1, 3, NA, NA, 5, 7) 
```

替换`NA`为`na.locf`(3 结转):

```
library(zoo)
na.locf(dat)
# 1 3 3 3 5 7 
```

并`na.locf`设置`fromLast`为`TRUE`（5 向后进行）：

```
na.locf(dat, fromLast = TRUE)
# 1 3 5 5 5 7 
```

但我希望使用*最接近的*非`NA`值。在我的示例中，这意味着 3 应该向前结转到第一个`NA`，而 5 应该倒退到第二个`NA`：

```
1 3 3 5 5 7 
```

我编写了一个解决方案，但想确保我没有重新发明轮子。有什么东西已经漂浮了吗？

仅供参考，我当前的代码如下。也许如果不出意外，有人可以建议如何提高效率。我觉得我缺少一种明显的改进方法：

```
 na.pos <- which(is.na(dat))
  if (length(na.pos) == length(dat)) {
    return(dat)
  }
  non.na.pos <- setdiff(seq_along(dat), na.pos)
  nearest.non.na.pos <- sapply(na.pos, function(x) {
    return(which.min(abs(non.na.pos - x)))
  })
  dat[na.pos] <- dat[non.na.pos[nearest.non.na.pos]] 
```

要回答以下 smci 的问题：

1.  不，任何条目都可以是 NA
2.  如果都是 NA，请保持原样
3.  不，我当前的解决方案默认为左手最近的值，但这没关系
4.  这些行通常是几十万个元素，所以理论上上限是几十万。实际上，这里和那里不会超过几个，通常是一个。

**更新**所以事实证明，我们完全朝着不同的方向前进，但这仍然是一个有趣的讨论。谢谢大家！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-10T01:30:04.857

Here is a very fast one. It uses [`findInterval`](http://stat.ethz.ch/R-manual/R-devel/library/base/html/findInterval.html) to find what two positions should be considered for each `NA` in your original data:

```
f1 <- function(dat) {
  N <- length(dat)
  na.pos <- which(is.na(dat))
  if (length(na.pos) %in% c(0, N)) {
    return(dat)
  }
  non.na.pos <- which(!is.na(dat))
  intervals  <- findInterval(na.pos, non.na.pos,
                             all.inside = TRUE)
  left.pos   <- non.na.pos[pmax(1, intervals)]
  right.pos  <- non.na.pos[pmin(N, intervals+1)]
  left.dist  <- na.pos - left.pos
  right.dist <- right.pos - na.pos

  dat[na.pos] <- ifelse(left.dist <= right.dist,
                        dat[left.pos], dat[right.pos])
  return(dat)
} 
```

And here I test it:

```
# sample data, suggested by @JeffAllen
dat <- as.integer(runif(50000, min=0, max=10))
dat[dat==0] <- NA

# computation times
system.time(r0 <- f0(dat))    # your function
# user  system elapsed 
# 5.52    0.00    5.52
system.time(r1 <- f1(dat))    # this function
# user  system elapsed 
# 0.01    0.00    0.03
identical(r0, r1)
# [1] TRUE 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-09T19:37:06.987

Code below. The initial question was not totally well-defined, I had asked for these clarifications:

1.  Is it guaranteed that at least the first and/or last entries are non-NA? **[No]**
2.  What to do if all entries in a row are NA? **[Leave as-is]**
3.  Do you care how ties are split i.e. how to treat the middle NA in `1 3 NA NA NA 5 7`? **[Don't-care/ left]**
4.  Do you have an upper-bound (S) on the longest contiguous span of NAs in a row? (I'm thinking a recursive solution if S is small. Or a dataframe solution with *`ifelse`* if S is large and number of rows and cols is large.) **[worst-case S could be pathologically large, hence recursion should not be used]**

geoffjentry, re your solution your bottlenecks will be the serial calculation of *`nearest.non.na.pos`* and the serial assignment *`dat[na.pos] <- dat[non.na.pos[nearest.non.na.pos]]`* For a large gap of length G all we really need to compute is that the first (G/2, round up) items fill-from-left, the rest from right. (I could post an answer using *`ifelse`* but it would look similar.) Are your criteria **runtime**, big-O efficiency, temp memory usage, or code legibility?

Coupla possible tweaks:

*   only need to compute *`N <- length(dat)`* once
*   common-case speed enhance: *`if (length(na.pos) == 0)`* skip row, since it has no NAs
*   *`if (length(na.pos) == length(dat)-1)`* the (rare) case where there is only one non-NA entry hence we fill entire row with it

Outline solution:

Sadly na.locf does not work on an entire dataframe, you must use sapply, row-wise:

```
na.fill_from_nn <- function(x) {
  row.na <- is.na(x)
  fillFromLeft <- na.locf(x, na.rm=FALSE) 
  fillFromRight <- na.locf(x, fromLast=TRUE, na.rm=FALSE)

  disagree <- rle(fillFromLeft!=fillFromRight)
  for (loc in (disagree)) { ...  resolve conflicts, row-wise }
}

sapply(dat, na.fill_from_nn) 
```

Alternatively, since as you say contiguous NAs are rare, do a fast-and-dumb *`ifelse`* to fill isolated NAs from left. This will operate data-frame wise => makes the common-case fast. Then handle all the other cases with a row-wise for-loop. (This will affect the tiebreak on middle elements in a long span of NAs, but you say you don't care.)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-09T21:52:56.300

I can't think of an obvious simple solution, but, having looked at the suggestions (particularly [smci](https://stackoverflow.com/users/202229/smci)'s suggestion of using `rle`) I came up with a complicated function that appears to be more efficient.

This is the code, I'll explain below:

```
# Your function
your.func = function(dat) {
  na.pos <- which(is.na(dat))
  if (length(na.pos) == length(dat)) {
    return(dat)
  }
  non.na.pos <- setdiff(seq_along(dat), na.pos)
  nearest.non.na.pos <- sapply(na.pos, function(x) which.min(abs(non.na.pos - x)))
  dat[na.pos] <- dat[non.na.pos[nearest.non.na.pos]]
  dat
}

# My function
my.func = function(dat) {
    nas=is.na(dat)
    if (!any(!nas)) return (dat)
    t=rle(nas)
    f=sapply(t$lengths[t$values],seq)
    a=unlist(f)
    b=unlist(lapply(f,rev))
    x=which(nas)
    l=length(dat)
    dat[nas]=ifelse(a>b,dat[ ifelse((x+b)>l,x-a,x+b) ],dat[ifelse((x-a)<1,x+b,x-a)])
    dat
}

# Test
n = 100000
test.vec = 1:n
set.seed(1)
test.vec[sample(test.vec,n/4)]=NA

system.time(t1<-my.func(test.vec))
system.time(t2<-your.func(test.vec)) # 10 times speed improvement on my machine

# Verify
any(t1!=t2) 
```

My function relies on `rle`. I am reading the comments above but it looks to me like `rle` works just fine for `NA`. It is easiest to explain with a small example.

If I start with a vector:

```
dat=c(1,2,3,4,NA,NA,NA,8,NA,10,11,12,NA,NA,NA,NA,NA,18) 
```

I then get the positions of all the NAs:

```
x=c(5,6,7,8,13,14,15,16,17) 
```

Then, for every "run" of NAs I create a sequence from 1 to the length of the run:

```
a=c(1,2,3,1,1,2,3,4,5) 
```

Then I do it again, but I reverse the sequence:

```
b=c(3,2,1,1,5,4,3,2,1) 
```

Now, I can just compare vectors a and b: If a<=b then look back and grab the value at x-a. If a>b then look ahead and grab the value at x+b. The rest is just handling the corner cases when you have all NAs or NA runs at the end or the start of the vector.

There is probably a better, simpler, solution, but I hope this gets you started.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-04-13T09:11:51.333

I like all the rigorous solutions. Though not directly what was asked, I found this post looking for a solution to filling NA values with an interpolation. After reviewing this post I discovered na.fill on a `zoo` object(vector, factor, or matrix):

```
z <- c(1,2,3,4,5,6,NA,NA,NA,2,3,4,5,6,NA,NA,4,6,7,NA)
z1 <- zoo::na.fill(z, "extend") 
```

Note the smooth transition across the NA values

```
round(z1, 0)
#>  [1] 1 2 3 4 5 6 5 4 3 2 3 4 5 6 5 5 4 6 7 7 
```

Perhaps this could help

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-10T00:10:51.543

Here's my stab at it. I never like to see a for loop in R, but in the case of a sparsely-NA vector, it looks like it will actually be more efficient (performance metrics below). The gist of the code is below.

```
 #get the index of all NA values
  nas <- which(is.na(dat))

  #get the Boolean map of which are NAs, used later to determine which values can be used as a replacement, and which are just filled-in NA values
  namask <- is.na(dat)

  #calculate the maximum size of a run of NAs
  length <- getLengthNAs(dat);

  #the furthest away an NA value could be is half of the length of the maximum NA run
  windowSize <- ceiling(length/2)

  #loop through all NAs
  for (thisIndex in nas){
    #extract the neighborhood of this NA
    neighborhood <- dat[(thisIndex-windowSize):(thisIndex+windowSize)]
    #any already-filled-in values which were NA can be replaced with NAs
    neighborhood[namask[(thisIndex-windowSize):(thisIndex+windowSize)]] <- NA

    #the center of this neighborhood
    center <- windowSize + 1

    #compute the difference within this neighborhood to find the nearest non-NA value
    delta <- center - which(!is.na(neighborhood))

    #find the closest replacement
    replacement <- delta[abs(delta) == min(abs(delta))]
    #in case length > 1, just pick the first
    replacement <- replacement[1]

    #replace with the nearest non-NA value.
    dat[thisIndex] <- dat[(thisIndex - (replacement))]
  } 
```

I liked the code you proposed, but I noticed that we were calculating the delta between every NA value and every other non-NA index in the matrix. I think this was the biggest performance hog. Instead, I just extract the minimum-sized neighborhood or window around each NA and find the nearest non-NA value within that window.

So the performance scales linearly on the number of NAs and the window size -- where the window size is (the ceiling of) half the length of the maximum run of NAs. To calculate the length of the maximum run of NAs, you can use the following function:

```
getLengthNAs <- function(dat){
  nas <- which(is.na(dat))
  spacing <- diff(nas)
  length <- 1;
  while (any(spacing == 1)){        
    length <- length + 1;
    spacing <- diff(which(spacing == 1))
  }
    length
} 
```

## Performance Comparison

```
#create a test vector with 10% NAs and length 50,000.
dat <- as.integer(runif(50000, min=0, max=10))
dat[dat==0] <- NA

#the a() function is the code posted in the question
a <- function(dat){
  na.pos <- which(is.na(dat))
    if (length(na.pos) == length(dat)) {
        return(dat)
    }
    non.na.pos <- setdiff(seq_along(dat), na.pos)
    nearest.non.na.pos <- sapply(na.pos, function(x) {
        return(which.min(abs(non.na.pos - x)))
    })
    dat[na.pos] <- dat[non.na.pos[nearest.non.na.pos]]
    dat
}

#my code
b <- function(dat){
    #the same code posted above, but with some additional helper code to sanitize the input
    if(is.null(dat)){
      return(NULL);
    }

    if (all(is.na(dat))){
      stop("Can't impute NAs if there are no non-NA values.")
    }

    if (!any(is.na(dat))){
      return(dat);
    }

    #starts with an NA (or multiple), handle these
    if (is.na(dat[1])){
      firstNonNA <- which(!is.na(dat))[1]
      dat[1:(firstNonNA-1)] <- dat[firstNonNA]
    }

    #ends with an NA (or multiple), handle these
    if (is.na(dat[length(dat)])){
      lastNonNA <- which(!is.na(dat))
      lastNonNA <- lastNonNA[length(lastNonNA)]
      dat[(lastNonNA+1):length(dat)] <- dat[lastNonNA]
    }

    #get the index of all NA values
    nas <- which(is.na(dat))

    #get the Boolean map of which are NAs, used later to determine which values can be used as a replacement, and which are just filled-in NA values
    namask <- is.na(dat)

    #calculate the maximum size of a run of NAs
    length <- getLengthNAs(dat);

    #the furthest away an NA value could be is half of the length of the maximum NA run
    #if there's a run at the beginning or end, then the nearest non-NA value could possibly be `length` away, so we need to keep the window large for that case.
    windowSize <- ceiling(length/2)

    #loop through all NAs
    for (thisIndex in nas){
      #extract the neighborhood of this NA
      neighborhood <- dat[(thisIndex-windowSize):(thisIndex+windowSize)]
      #any already-filled-in values which were NA can be replaced with NAs
      neighborhood[namask[(thisIndex-windowSize):(thisIndex+windowSize)]] <- NA

      #the center of this neighborhood
      center <- windowSize + 1

      #compute the difference within this neighborhood to find the nearest non-NA value
      delta <- center - which(!is.na(neighborhood))

      #find the closest replacement
      replacement <- delta[abs(delta) == min(abs(delta))]
      #in case length > 1, just pick the first
      replacement <- replacement[1]

      #replace with the nearest non-NA value.
      dat[thisIndex] <- dat[(thisIndex - (replacement))]
    }
    dat
}

#nograpes' answer on this question
c <- function(dat){
  nas=is.na(dat)
  if (!any(!nas)) return (dat)
  t=rle(nas)
  f=sapply(t$lengths[t$values],seq)
  a=unlist(f)
  b=unlist(lapply(f,rev))
  x=which(nas)
  l=length(dat)
  dat[nas]=ifelse(a>b,dat[ ifelse((x+b)>l,x-a,x+b) ],dat[ifelse((x-a)<1,x+b,x-a)])
  dat
}

#run 10 times each to get average performance.
sum <- 0; for (i in 1:10){ sum <- sum + system.time(a(dat))["elapsed"];}; cat ("A: ", sum/10)
A:  5.059
sum <- 0; for (i in 1:10){ sum <- sum + system.time(b(dat))["elapsed"];}; cat ("B: ", sum/10)
B:  0.126
sum <- 0; for (i in 1:10){ sum <- sum + system.time(c(dat))["elapsed"];}; cat ("C: ", sum/10)
C:  0.287 
```

So it looks like this code (at least under these conditions), offers about a 40X speedup from the original code posted in the question, and a 2.2X speedup over @nograpes' answer below (though I imagine an `rle` solution would certainly be faster in some situations -- including a more NA-rich vector).

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-05T05:09:32.053

Speed is about 3-4x slower than that of the chosen answer. Mine is pretty simple though. It's a rare while loop too.

```
f2 <- function(x){

  # check if all are NA to skip loop
  if(!all(is.na(x))){

    # replace NA's until they are gone
    while(anyNA(x)){

      # replace from the left
      x[is.na(x)] <- c(NA,x[1:(length(x)-1)])[is.na(x)]

      # replace from the right
      x[is.na(x)] <- c(x[-1],NA)[is.na(x)]
    }
  }

  # return original or fixed x
  x
} 
```

# jquery - 调整图像大小后触发图像延迟加载

> ID：10077416
> 
> 赞同：5
> 
> 时间：2012-04-09T17:53:30.960
> 
> 标签：jquery, lazy-loading

我正在处理一个同时显示数百张图像的页面。我正在使用[延迟加载插件](http://www.appelsiini.net/projects/lazyload)来让页面快速加载。一切正常，但是我添加了一个 jQuery UI 滑块，允许用户通过拖动手柄来放大/缩小图像。如果用户缩小图像，那么以前在首屏下方的图像现在可能已被移动到可见区域。由于未发生滚动，因此未加载图像。

我添加了一个事件来在拖动调整大小手柄时触发加载，但这会导致加载所有图像，而不仅仅是那些进入可视区域的图像。

代码非常简单：

这是连接插件的代码。

```
$("#pplImages.lazy").lazyload({event : "LoadVisibleImages"});

function LoadVisibleImages() {
    $("#pplImages.lazy").trigger("LoadVisibleImages");
} 
```

这是触发从 Slider 加载的代码

```
$( "#slider" ).slider({
    min: 25,
    max: 125,
    value: 100,
    slide: function( event, ui ) {
    ResizeImages(ui.value);
}
}).slider().bind({
    slidestop   : function(event,ui) {LoadVisibleImages();}
}); 
```

我正在寻找的是一种仅加载现在可见的图像而不是页面上的所有图像的方法。

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:16:56.193

这可能是插件的问题。互联网上有很多关于这个插件在现代浏览器中不起作用的讨论。

看看[JavaScript Asynchronous Image Loader (JAIL)](http://www.sebastianoarmelibattana.com/projects/jail)。作者写它作为对这个问题的直接回应：[我写插件 Jquery Asynchronous Image Loader (JAIL) 的原因](http://blog.sebarmeli.com/2011/01/04/reasons-why-i-wrote-the-plugin-jquery-asynchronous-image-loader-jail/)。

[这个例子](http://www.sebastianoarmelibattana.com/projects/jail/example2)显示了一个 li 触发图像加载。你可能可以修改你的代码来做同样的事情。

试试这个：

1.  使用 ID“触发器”向您的页面添加一个隐藏的 div
2.  设置你的 ResizeImages 函数来模拟点击触发 DOM 对象
3.  更改您的延迟加载代码以使用 JAIL 插件，并将其设置为在单击触发器对象时加载图像。

您的代码可能如下所示：

**JavaScript**

```
$("#pplImages.lazy").jail({
    selector:'#trigger', 
    event: 'click'
});

$( "#slider" ).slider({
    min: 25,
    max: 125,
    value: 100,
    slide: function( event, ui ) {
    ResizeImages(ui.value);
}
}).slider().bind({
    slidestop   : function(event,ui) { 
        $('#trigger').click(); //Notice this simulated click event
    }
}); 
```

**HTML**（只需将其添加到您的页面）

```
<div id="trigger" class="hidden"></div> 
```

您必须四处修补才能使这项工作完美地为您服务，但以上内容应该可以帮助您入门。

# javascript - jQuery 定位和动画

> ID：10077417
> 
> 赞同：1
> 
> 时间：2012-04-09T17:53:31.460
> 
> 标签：javascript, jquery

所以我有一段代码：

```
jQuery.fn.center = function(parent) {
parent = this.parent();
this.css({
"position": "absolute",
"top": ((($(parent).height() - this.outerHeight()) / 2) + $(parent).scrollTop() + "px"),
"left": ((($(parent).width() - this.outerWidth()) / 2) + $(parent).scrollLeft() + "px")
});
return this;
} 
```

此代码抓取一个元素并将其移动到父元素的中心。效果很好。除了它正在做的事情之外，我还希望它做几件事。

1.  我需要它漂浮在该父级中的所有其他元素之上。z 索引或多或少。我尝试应用 z-index，但它似乎不起作用。我不知道我是否做错了，或者是否有更好的方法。

2.  我需要它移回它所在的位置。它的工作方式是将块定位在页面上（通过 CSS），当用户单击时，它会将其移动到页面的中心，如代码已经在做。有什么方法可以让用户点击退出按钮，我可以对按钮进行编程以将其移回原来的位置？我不知道我是否可以在 jQuery 中传递变量。

3.  这个选项更多的是为了美观，我认为没有必要，但如果你有一点额外的时间，我会喜欢它。我希望块从它的位置滑动到页面的中心，然后返回，而不是仅仅弹出那里。正如我所说，这只是美学，我真的不需要发生这种情况。

非常感谢任何可以帮助我的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T18:35:32.630

我尝试实现类似的要求，但它应该具有您正在寻找的所有功能。尝试[**演示**](http://jsfiddle.net/skram/Y2XUW/1/)

> 我需要它漂浮在该父级中的所有其他元素之上。z 索引或多或少。我尝试应用 z-index，但它似乎不起作用。我不知道我是否做错了，或者是否有更好的方法。

对于这种情况，我总是使用 1001 或更大范围内的 z-index。即使在演示中，它也可以正常工作。试试这个，如果你仍然不为你工作，请告诉我们。

> 我需要它移回它所在的位置。它的工作方式是将块定位在页面上（通过 CSS），当用户单击时，它会将其移动到页面的中心，如代码已经在做。有什么方法可以让用户点击退出按钮，我可以对按钮进行编程以将其移回原来的位置？我不知道我是否可以在 jQuery 中传递变量。

我使用 API 存储了元素的原始位置，`.data`并在单击关闭（退出）按钮时将其恢复到原始位置。

> 这个选项更多的是为了美观，我认为没有必要，但如果你有一点额外的时间，我会喜欢它。我希望块从它的位置滑动到页面的中心，然后返回，而不是仅仅弹出那里。正如我所说，这只是美学，我真的不需要发生这种情况。

您可以使用`.animate`CSS 代替 CSS，它将在指定时间内将元素从原始位置超越到目标位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T18:34:20.810

为了让它漂浮在所有其他元素之上，你是对的，你需要为此使用 z-index，但你需要确保每个元素都已定位并且每个元素都有一个`z-index`开始的值与，包括父母。还需要定位父级。

为了恢复到原来的位置，你必须抓住它们的当前`left`和`top`偏移量。在您的`click`事件侦听器中，将元素移回其旧位置。

```
jQuery.fn.center = function(parent) {
  var oldTop = this.css('top');
  var oldLeft = this.css('left');
  parent = this.parent();
  this.css({
    "position": "absolute",
    "top": ((($(parent).height() - this.outerHeight()) / 2) + $(parent).scrollTop() + "px"),
    "left": ((($(parent).width() - this.outerWidth()) / 2) + $(parent).scrollLeft() + "px")
  });
  this.click(function(e) {
    this.css('top', oldTop);
    this.css('left', oldLeft);
  });
  return this;
} 
```

为了制作动画（而不仅仅是跳到该位置），您可以使用 jQuery为`left`和值设置动画。`top`

```
this.animate({
  'top': ((($(parent).height() - this.outerHeight()) / 2) + $(parent).scrollTop() + "px"),
  'left': ((($(parent).width() - this.outerWidth()) / 2) + $(parent).scrollLeft() + "px")
}); 
```

**编辑**您可能要考虑使用`this.offset()`. 这将返回一个包含方法`left`和的对象`top`。

```
var offset = this.offset();
var oldTop = offset.top;
var oldLeft = offset.left; 
```

# jquery - 如何在jQuery中从不同的值制作数组

> ID：10077418
> 
> 赞同：1
> 
> 时间：2012-04-09T17:53:41.647
> 
> 标签：jquery, arrays, elements

我将`<select id="country" ...>`根据它们的价值过滤一些国家。我在 jQuery 中尝试过 grep 和 filter 但没有成功。仅对于一个元素它工作正常。我不知道如何在 jQuery 中制作正确的数组。

```
 jQuery.noConflict();
 function change_country(seldd) {     
    var look_for_id=''; var opt_id=[];
 jQuery('#countries').html("");
 jQuery("#countries").append("<option value='0'>-Country-</option>");
    if(seldd.value=='0') { look_for_id='N'; }   
    if(seldd.value=='1'){ look_for_id='Y';  opt_id=jQuery.filter($("#country option").val(["1,   2, 3, 4"])); }  
    if(seldd.value=='2'){ look_for_id='Y';  opt_id=jQuery.grep(['5', '6', '7', '8']); }  
    if(look_for_id=='Y') {
 jQuery("#country option[value='"+opt_id+"']").each(function() {
 jQuery("#countries").append("<option   value='"+jQuery(this).val()+"'>"+jQuery(this).text()+"</option>");
  });
 } else {
 jQuery("#country option").each(function() {
 jQuery("#countries").append("<option  value='"+jQuery(this).val()+"'>"+jQuery(this).text()+"</option>");
    });
  }  
 }

 <div>      
<select id="region" id="srv_type" onchange="change_fruit(this)" >
  <option value="0" selected="selected">Регион</option>
  <option value="1">Asia</option>
  <option value="2">Europe</option>
</select>  </div> 

<div style="display:none;" >   
<select id="country" name="country" class="inputbox">
   <option value="" selected="selected">Страна</option>
   <option value="1" >Indonesia</option>
   <option value="2">Thailand</option>
   <option value="3">Singapore</option>
   <option value="4">Malaysia</option>
   <option value="5">Greece</option>
   <option value="6">Italy</option>
   <option value="7">Monaco</option>
   <option value="8">Spain</option>
</select>
</div>
<select name="countries" id="countries">
   <option value="0">-Country-</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T17:58:12.693

也许是这样的？

```
var a = [];

$("#country option").each(function() {
  if($(this).attr('value') > 5){
  a.push($(this).text());
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T18:10:11.417

我认为您只想根据您选择的区域对国家/地区进行子选择。试试这个：

```
<select id="region" name="region">
  <option value="0" selected="selected">Регион</option>
  <option value="country_as">Asia</option>
  <option value="country_eu">Europe</option>
</select>
<select id="country" name="country">
   <option value="" selected="selected">Страна</option>
   <option value="1" class="country_as" >Indonesia</option>
   <option value="2" class="country_as">Thailand</option>
   <option value="3" class="country_as">Singapore</option>
   <option value="4" class="country_as">Malaysia</option>
   <option value="5" class="country_eu">Greece</option>
   <option value="6" class="country_eu">Italy</option>
   <option value="7" class="country_eu">Monaco</option>
   <option value="8" class="country_eu">Spain</option>
</select> 
```

使用 jQuery：

```
$(function() {
    $("#region").change(function() {
        var v = $(this).val();
        $("#country > option ").each(function(){ $(this).hide();});
        $("."+v).each(function(){ $(this).show();});
    });
});​ 
```

你可以[在 js fiddle 上测试这个](http://jsfiddle.net/hsGwK/)

**编辑**

[这个 DEMO](http://jsfiddle.net/hsGwK/2/)是一个更好的版本，带有以下 jQuery 代码：

```
$(function() {
    $("#region").change(function() {
        $("[class^=country_]").each(function(){ $(this).hide();});
        $("."+$(this).val()).each(function(){ $(this).show();});
    });
});​ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-09T18:04:30.403

jquery 数组与 javascript array.eg 相同

```
thing = []; 
```

或者

```
thing = new Array(); 
```

如果你将东西添加到你的数组中，例如

```
countries = ['UK','USA','etc']; 
```

您可以使用 jquery .each 或 for 循环来循环它们。你也可以有一个数组数组，例如

```
thing = [['UK','Europe'],['USA','North America']]; 
```

然后遍历主数组并通过它们的索引访问其他元素。

thing[0][0] 将输出英国。

刚刚做了一个快速的谷歌，这可能会帮助你：

[http://www.hunlock.com/blogs/Mastering_Javascript_Arrays](http://www.hunlock.com/blogs/Mastering_Javascript_Arrays)

它显示了您可以使用数组执行的其他一些操作

# asp.net - 在 ASP.NET 中运行应用程序的多个实例

> ID：10077419
> 
> 赞同：1
> 
> 时间：2012-04-09T17:53:56.123
> 
> 标签：asp.net, multiple-instances

嗨，我有一个应用程序，当我运行它时它对数据库做了一些事情。我想运行该应用程序的多个实例当尝试再次运行该应用程序时，它给了我类似“由于端口无法启动 ASP.NET 开发服务器”之类的错误正在使用中'。对此有什么解决方案？

# f# - 用 FsUnit 断言一些

> ID：10077421
> 
> 赞同：4
> 
> 时间：2012-04-09T17:54:00.723
> 
> 标签：f#, fsunit

我正在尝试检查我的函数是否返回`Some(x)`

```
testedFunc() |> should be (sameAs Some)
testedFunc() |> should be Some
testedFunc() |> should equal Some 
```

都行不通。我宁愿不使用：

```
match testedFunc() with
    | Some -> Pass()
    | None -> Fail() 
```

有人知道这样做的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T18:29:06.643

我还没有真正使用过 FsUnit，但是这样的东西应该可以工作......

```
testedFunc() |> Option.isSome |> should equal true 
```

或者因为 Option 已经具有 IsSome 属性，您可以这样做，但要注意大小写 - 它与`Option.isSome`函数不同。

```
testedFunc().IsSome |> should equal true 
```

第三种方法是将您正在测试的函数组合在一起`Option.isSome`以获得直接返回布尔值的函数。这在此示例中不是很有用，但是如果您需要使用各种输入多次测试 Option-returning 函数，这种方法可以帮助减少重复代码。

```
let testedFunc = testedFunc >> Option.isSome
testedFunc() |> should equal true 
```

# java - 无法加载 DevAppEngineWebAppContext (App Engine)

> ID：10077424
> 
> 赞同：2
> 
> 时间：2012-04-09T17:54:09.833
> 
> 标签：java, google-app-engine, gwt

我不确定此错误是否是导致我的 gwt-app 引擎应用程序`HTTP Error 503`在调试模式下访问时无法加载和获取的错误：

```
WARNING: Failed startup of context 
com.google.appengine.tools.development.DevAppEngineWebAppContext 
```

如果这是原因，那么我可以通过什么方式解决这个问题？

# c# - 使用 System.Windows.Forms.DataVisualization.Charting 和自定义 ScaleView/Zoom

> ID：10077429
> 
> 赞同：1
> 
> 时间：2012-04-09T17:54:43.890
> 
> 标签：c#, .net-3.5

我有一个 C# 应用程序，它使用 System.Windows.Forms.DataVisualization.Charting 库来显示来自测试的实时数据输入。我需要定位图表，使 x 轴跨越 0 到 10，并且按下页面按钮，它需要滚动到 5 到 15、10 到 20、15 到 25；等等。设置 ScaleView 和/或 Zoom 已经成功了，但是当我开始向图表添加数据时，它会自动开始调整大小。我可以使用 ScaleView.Position = int NewPosition 浏览图表，但是，我需要弄清楚如何防止视图自动缩放。

这可以做到吗？

编辑：发现问题！事实证明，只要您有一个点大致遵循比例的系列，ScaleView 就会很好地缩放。例如：如果您使用点 0、10 和点 10、10（甚至 5、10）添加一条线作为参考，并且您的比例为 1，那么图形将自动调整以适应这个更大的比例。要解决此问题，您必须使用点 0,0 和 0,1 和 0,2 等或任何其他足够靠近的点放置一条线，以确保比例保持您需要的方式。

希望这能澄清并感谢任何看过的人。

# css - 使文本和右浮动 div 出现在其灵活容器内的一行上——无需更多 HTML

> ID：10077433
> 
> 赞同：1
> 
> 时间：2012-04-09T17:54:55.263
> 
> 标签：css, css-float

仅使用 CSS，我试图强制右浮动元素在不给父容器宽度的情况下不清除其左对齐的兄弟文本。父级是块级，但浮动。基本上，容器需要始终是最小宽度以适合文本节点和`<div>`一行，并且它们需要实际*呈现*在一行上。

比如这里浮动的右边`div`总是会跳到文本节点下面的那一行：

```
#demo {float:left;border:solid 1px blue;}       
#demo div {float:right;border:solid 1px green;}   

<div id="demo">
  Text Node!
  <div>right-floated</div>
</div> 
```

最大的限制是我根本无法更改 HTML——我无法`<span>`在文本节点周围添加标签，也无法切换顺序以使文本节点排在第二位。换个顺序就可以解决问题了。

另一件事是我不想为包含元素指定宽度，因为内容宽度会变化很大。仅使用 CSS 可能无法做到这一点，但我只是想看看是否有人有绝妙的技巧。

# file - MATLAB：在文件中写入字符串和变量数

> ID：10077436
> 
> 赞同：2
> 
> 时间：2012-04-09T17:54:58.403
> 
> 标签：file, matlab, cell

我有以下数据：

```
a=[3 1 6]';
b=[2 5 2]';
c={'ab' 'bc' 'cd'}'; 
```

我现在想制作一个看起来像这样的文件（分隔符是制表符）：

```
ab    3    2
bc    1    5 
cd    6    2 
```

我的解决方案（带循环）是：

```
a=[3 1 6]';
b=[2 5 2]';
c={'ab' 'bc' 'cd'}';
c=cell2mat(c);
fid=fopen('filename','w');
for i=1:numel(b)

    fprintf(fid,'%s\t%u\t%u\n',c(i,:),a(i),b(i));

end

fclose(fid); 
```

是否有可能没有循环和/或直接在文件中写入元胞数组的可能性？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T18:37:55.530

这个怎么样：

```
%A cell array holding all data
%    (Note transpose)
data = cat(2, c, num2cell(a), num2cell(b))'; 
```

将数据写入文件

```
fid = fopen('example.txt', 'w');
fprintf(fid, '%s\t%u\t%u\n', data{:});
fclose(fid); 
```

如果您的数据集变大，这将浪费内存（最好将其保留为单独的变量和循环），但似乎有效。

# php - 无法使用 mPDF 打印超过 20 条记录（超时/内存问题？）

> ID：10077437
> 
> 赞同：1
> 
> 时间：2012-04-09T17:54:58.480
> 
> 标签：php, mpdf

我正在尝试将一系列考勤卡（最多 150 张）打印为 pdf。它适用于一条记录，但失败超过 20 条。

以下是示例记录的代码

```
<div class='container'><h3>Timecard</h3><table style='table-layout: fixed;width:100%;text-align:left;'><tr><td class='infoItem' width='265px'><span class='fieldID'>Employee Name:</span>  Gomez Addams</td><td class='infoItem'><span class='fieldID'>EE#:</span>  9502</td></tr><tr><td class='infoItem'><span class='fieldID'>Dept:</span>  County Board</td><td colspan=2 align='left' class='infoItem'><h4><span class='fieldID'>JobID:</span> 13 <em class='fieldID grey'>(full-time non-exempt Sheriff Union contract with holiday)</em></h4></td></tr><tr><td class='infoItem'><span class='fieldID'>Payperiod:</span> 100 <em class='fieldID grey'>(Mar 10 to Mar 23 2012)</em></td><td class='infoItem'><span class='fieldID'>Pay Date:</span>  Mar 30 2012</td></tr></table><hr />
<table  class='timecard' width='658px'><tr><th class='timeHdr'>day</th><th class='timeHdr'>date</th><th class='timeHdr'>1000<br/>reg<br/>hrs</th><th class='timeHdr'>1004<br/>OT<br/>1x</th><th class='timeHdr'>1005<br/>OT<br/>1.5x</th><th class='timeHdr'>1035<br/>PTO<br/>used</th><th class='timeHdr'>1045<br/>comp<br/>used</th><th class='timeHdr'>1066<br/>comp<br/>1x</th><th class='timeHdr'>1067<br/>comp<br/>1.5x</th><th class='timeHdr'>other<br/>hrs</th><th class='timeHdr'>total<br/>hrs</th><th class='timeHdr'>1003<br/>hol<br/>prem</th><th class='timeHdr'>1007<br/>shift<br/>diff</th><th class='timeHdr'>1010<br/>out of<br/>class</th></tr>
<tr class='even'><td class='timeHdr'>sat</td><td align='center' class='timeHdr'>3/10</td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='rowTot'><div id='row0'></div></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td></tr>
<tr class='odd'><td class='timeHdr'>sun</td><td align='center' class='timeHdr'>3/11</td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='rowTot'><div id='row1'></div></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td></tr>
<tr class='even'><td class='timeHdr'>mon</td><td align='center' class='timeHdr'>3/12</td><td class='timeView'>8</td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='rowTot'><div id='row2'>8</div></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td></tr>
<tr class='odd'><td class='timeHdr'>tue</td><td align='center' class='timeHdr'>3/13</td><td class='timeView'>8</td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='rowTot'><div id='row3'>8</div></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td></tr>
<tr class='even'><td class='timeHdr'>wed</td><td align='center' class='timeHdr'>3/14</td><td class='timeView'>8</td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='rowTot'><div id='row4'>8</div></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td></tr>
<tr class='odd'><td class='timeHdr'>thu</td><td align='center' class='timeHdr'>3/15</td><td class='timeView'>8</td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='rowTot'><div id='row5'>8</div></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td></tr>
<tr class='even'><td class='timeHdr'>fri</td><td align='center' class='timeHdr'>3/16</td><td class='timeView'>8</td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='rowTot'><div id='row6'>8</div></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td></tr>
<tr class='odd'><td class='timeHdr'>sat</td><td align='center' class='timeHdr'>3/17</td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='rowTot'><div id='row7'></div></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td></tr>
<tr class='even'><td class='timeHdr'>sun</td><td align='center' class='timeHdr'>3/18</td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='rowTot'><div id='row8'></div></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td></tr>
<tr class='odd'><td class='timeHdr'>mon</td><td align='center' class='timeHdr'>3/19</td><td class='timeView'>8</td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='rowTot'><div id='row9'>8</div></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td></tr>
<tr class='even'><td class='timeHdr'>tue</td><td align='center' class='timeHdr'>3/20</td><td class='timeView'>4</td><td class='timeView'></td><td class='timeView'></td><td class='timeView'>4</td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='rowTot'><div id='row10'>8</div></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td></tr>
<tr class='odd'><td class='timeHdr'>wed</td><td align='center' class='timeHdr'>3/21</td><td class='timeView'>3.5</td><td class='timeView'></td><td class='timeView'></td><td class='timeView'>4.5</td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='rowTot'><div id='row11'>8</div></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td></tr>
<tr class='even'><td class='timeHdr'>thu</td><td align='center' class='timeHdr'>3/22</td><td class='timeView'>8</td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='rowTot'><div id='row12'>8</div></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td></tr>
<tr class='odd'><td class='timeHdr'>fri</td><td align='center' class='timeHdr'>3/23</td><td class='timeView'>8</td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td><td class='rowTot'><div id='row13'>8</div></td><td class='timeView'></td><td class='timeView'></td><td class='timeView'></td></tr>
<tr><td colspan=2 style='background: #e6f4ff;' class='timeHdr'>totals</td><td align='center' class='colTot'><div id='col0'>71.5</div></td><td align='center' class='colTot'><div id='col1'></div></td><td align='center' class='colTot'><div id='col2'></div></td><td align='center' class='colTot'><div id='col3'>8.5</div></td><td align='center' class='colTot'><div id='col4'></div></td><td align='center' class='colTot'><div id='col5'></div></td><td align='center' class='colTot'><div id='col6'></div></td><td align='center' class='colTot'><div id='col7'></div></td><td align='center' class='totTot'>80</td><td align='center' class='colTot'><div id='col9'></div></td><td align='center' class='colTot'><div id='col10'></div></td><td align='center' class='colTot'><div id='col11'></div></td></tr>
<tr><td colspan=2 class='timeHdr' style='vertical-align: top;'>comments</td><td colspan=14 class='comment'> </td></tr>
</table><hr /><table style='table-layout: fixed;width:100%;text-align:left;'><td colspan=2 ><em class='grey'>This form is due in the Auditor/Treasurer's Office by 9:00am on Monday after the end of the pay period.  No overtime without authorization is allowed.&nbsp; I affirm that the information contained herein is true and correct to the best of my knowledge.</em></td></tr><tr><td colspan=2>&nbsp;</td></tr><tr><td class='infoItem' valign='top'><span class='fieldID'>Employee:</span>  Gomez Addams</td><td class='infoItem'><span class='fieldID'>Supervisor:</span>   </td></tr><tr><td class='infoItem'><span class='fieldID'>Employee Approved:</span>  </td><td class='infoItem'><span class='fieldID'>Supervisor Approved:</span>  </td></tr></table><br /></table>

<h4>Payroll Notes:</h4><p>note 4</p></div> 
```

换行符与打印的内容相同，我认为这很重要......

所以基于此，我有这个：

```
ini_set("memory_limit", "256M"); 
$stylesheet = file_get_contents('../css/timecardPDF.css');
$mpdf=new mPDF();
$mpdf->WriteHTML($stylesheet,1);
<loop>$html=above code;$mpdf->WriteHTML($html,2);</end loop> 
$mpdf->Output('../timecards/file.pdf','F');
exit; 
```

所以在我尝试循环超过 20 次之前，一切都完全正常。我该怎么做才能让套件和 kaboodle（150 条记录）打印到 pdf 文档？

感谢您的善意考虑！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-15T16:22:02.747

对于遇到类似问题的任何人：原来它只是超时，所以延长了 php 超时（set_time_limit（#ms））并且它有效（只是需要很长时间！）

# vim - 在命令行模式下按 Tab 完成单词会切换到 Vim 中的搜索模式

> ID：10077439
> 
> 赞同：3
> 
> 时间：2012-04-09T17:55:01.627
> 
> 标签：vim

加载文件时，我们调用它`foobar.txt`，如下所示：

```
:b foo<tab> 
```

我在哪里`<tab>`按 Tab 键，**有时**我会从命令行 ( `:`) 重定向到搜索提示 ( `/`)，但有时它可以正常工作。我无法重新创建确切的情况，但我知道我至少在以下三个命令中遇到了同样的问题：

1.  `:badd`
2.  `:b`
3.  `:vsplit`

谁能告诉我为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:42:01.177

我猜这与您的 termcap 有关（当您处于正常/插入模式时，选项卡会做任何奇怪的事情吗？），但如果它与与文件系统的交互特别相关，它可能是其他的东西。您是否尝试过不同的 termcap 和/或使用 gui 版本而不是控制台版本来查看问题是否可重现？

# postgresql - 在 PL/pgSQL 函数中检测到死锁

> ID：10077441
> 
> 赞同：18
> 
> 时间：2012-04-09T17:55:11.537
> 
> 标签：postgresql, concurrency, deadlock, plpgsql

我的 PostgreSQL 数据库中的 PL/pgSQL 函数面临死锁问题。请在代码块中找到 SQL 语句（只是示例）：

```
BEGIN
UPDATE accounts SET balance = 0 WHERE acct_name like 'A%';
UPDATE accounts SET balance = balance + 100 WHERE acct_name like '%A';
EXCEPTION WHEN OTHERS THEN RAISE NOTICE SQLERRM;
END; 
```

我发现在这条语句运行期间发生了死锁。但我不确定是否有其他语句试图同时更新此表（因为我在日志系统中没有找到任何语句）。

那么，这个语句中是否有可能发生死锁？据我所知，如果我们用`BEGIN`/阻止了整个语句`END`。会有相同的事务，不应该被自己锁定。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-09T18:08:58.327

肯定**有其他进程**在竞争相同的资源。这就是僵局的本质。像您显示的函数永远不会死锁。请参阅[下面@kgrittn 的评论](https://stackoverflow.com/questions/10077441/postgresql-deadlock-detected/10077634#comment12902733_10077634)，他是 PostgreSQL 并发方面的专家。

缺少您的 PostgreSQL 版本。现代版本会引发**详细的错误消息**。竞争资源的两个进程都使用标准日志记录设置详细列出。检查您的数据库日志。

您发现错误的事实可能会阻止 Postgres 向您提供完整的详细信息。如果您没有在 db 日志中获得信息，请从您的 plpgsql 函数中删除**EXCEPTION块，然后重试。**

为了缓解死锁，您可以做很多事情。如果您的所有客户端都以同步的顺序访问资源，则不会发生死锁。[该手册在有关死锁](http://www.postgresql.org/docs/current/interactive/explicit-locking.html#LOCKING-DEADLOCKS)的章节中提供了解决大多数情况的基本策略。

* * *

至于**8.3 版**：考虑升级到更新的版本。特别是 8.4 版的改进对您来说应该很有趣（[引用发行说明](http://www.postgresql.org/docs/current/interactive/release-8-4.html)）：

> 报告死锁时，将所有涉及死锁的查询的文本报告到服务器日志（板垣孝弘）

此外，8.3 版将于[2013 年 2 月结束生命周期](http://www.postgresql.org/support/versioning/)。您应该开始考虑升级。

涉及的死锁情况`VACUUM`应该已[在 8.3.1 中修复](http://www.postgresql.org/docs/current/interactive/release-8-3-1.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-17T05:14:34.640

如果添加*commit*来释放独占锁，就不会出现死锁问题。

```
BEGIN
UPDATE accounts SET balance = 0 WHERE acct_name like 'A%';
COMMIT;  
UPDATE accounts SET balance = balance + 100 WHERE acct_name like '%A';
EXCEPTION WHEN OTHERS THEN RAISE NOTICE SQLERRM;
END; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-17T05:04:26.700

在 PostgreSQL 中，开始意味着您开始批量事务。

您的第一次更新将锁定帐户`WHERE acct_name like 'A%';` 的行 这些行在第一次更新后被独占锁定。

第二次更新尝试打开与第一次更新完全相同的行，更新失败，因为第一次更新尚未提交。

因此第二次更新命中死锁是回滚。

# jquery - 替换 html 内容 - 保留一个元素

> ID：10077442
> 
> 赞同：2
> 
> 时间：2012-04-09T17:55:16.170
> 
> 标签：jquery, ajax

如果我有这个代码：

```
<div class="lists">
     <a href="#new_list">New list</a>
</div> 
```

和

```
 $.ajax({
     url: 'xxx.php',
     type: 'POST',
     data: {
         id_user:<?php echo $id;?>
     },
     dataType: 'html',
     success: function (data) {
         $(".lists").html(data); //here
     }
 }); 
```

`.lists>a`替换内容时可以忽略吗？我的意思是：添加新内容`data`但也要保留原始内容`.lists>a`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T18:01:32.177

备份`a`里面`lists`和`append/prepend`他们以后，

```
var $a = $(".lists a").clone();
$(".lists").html(data).append($a); 
```

如果您希望链接位于数据 html 上方，请使用`.prepend`insted`.append`

**笔记：**

1.  假设`a`标签始终位于`.lists`.
2.  .lists 中有很多其他元素要替换为数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T17:57:32.940

我相信这就是你的要求？

只需附加 html() ，然后附加数据。

干杯。

```
$.ajax({
     url: 'xxx.php',
     type: 'POST',
     data: {
         id_user:<?php echo $id;?>
     },
     dataType: 'html',
     success: function (data) {
         $(".lists").html( $(".lists").html() + data); //here
     }
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T17:57:11.903

试试这个

```
 $(".lists a").html(data); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T18:00:17.363

改为使用`.append()`。看看 jQuery[附加](http://api.jquery.com/append/)文档。

# java - 0x2d7a30 上的失败 1（靠近“NULLenergy_rates”：语法错误）

> ID：10077443
> 
> 赞同：-1
> 
> 时间：2012-04-09T17:55:23.587
> 
> 标签：java, eclipse, sqlite

我正在为我正在创建的应用程序创建一个数据库，但是每当我运行我的应用程序并尝试将一些信息输入到我的数据库中时，什么都没有发生，并且 LogCat 中会显示一条错误消息。完整的错误信息是：

“04-09 17:22:18.208: E/Database(484): 在 0x2d7a30 准备‘CREATE TABLE ApplianceDetails (_id INTEGER PRIMARY KEY, appliance_name TEXT NOT NULL, appliance_wattage TEXT NOT NULLenergy_rates TEXT NOT NULL);'。

它与此代码相关联：

```
public class Database {

public static final String KEY_ROWID = "_id";
public static final String KEY_NAME = "appliance_name";
public static final String KEY_WATTAGE = "appliance_wattage";
public static final String KEY_ENERGY = "energy_rates";

private static final String DATABASE_NAME = "TheApplianceKeeperdb";
private static final String DATABASE_TABLE = "ApplianceDetails";
private static final int DATABASE_VERSION = 1;

private DbHelper ourHelper;
private final Context ourContext;
private SQLiteDatabase ourDatabase;

private static class DbHelper extends SQLiteOpenHelper{

    public DbHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" +
                KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                KEY_NAME + " TEXT NOT NULL, " +
                KEY_WATTAGE + " TEXT NOT NULL" +
                KEY_ENERGY + " TEXT NOT NULL);"                                 
        );      
    } 
```

任何有关如何解决此错误的帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:00:57.573

添加逗号和空格改变

`KEY_WATTAGE + " TEXT NOT NULL" +`到 `KEY_WATTAGE + " TEXT NOT NULL, " +`

# html - 如何从网站上的 3 个部分制作背景

> ID：10077447
> 
> 赞同：0
> 
> 时间：2012-04-09T17:55:40.127
> 
> 标签：html, css

所以我想为右边有一个图像的页面制作一个背景，左边有一个不同的图像，中间有一个重复的黑色条带。我怎么能做这个。因此，如果用户有一个更大的监视器图像，右侧的图像将保留在右侧，左侧的图像将保留在左侧，但在中心，黑色将根据需要重复多次

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:46:07.793

身体背景图像可能无法做到这一点，但您可以使用 2 个固定 div 作为侧面背景，使用 1 个身体背景作为中心。看看这个链接[http://jsfiddle.net/k2FPz/1/](http://jsfiddle.net/k2FPz/1/)

# iterator - 当键是 zip_iterator 使用自定义比较谓词处理的元组时，CUDA Thrust sort_by_key

> ID：10077449
> 
> 赞同：5
> 
> 时间：2012-04-09T17:55:49.870
> 
> 标签：iterator, cuda, operator-overloading, tuples, thrust

我在这里查看了很多类似的问题，并且有很多问题，尽管有一个微小的变化。我正在尝试使用 zip_iterator 作为复合键对值进行排序。

具体来说，我有以下功能：

```
无效推力排序（
    无符号整数 * 主键，
    浮动 * 次要键，
    无符号整数 * 值，
    unsigned int numberOfPoints)
{
    推力::device_ptr dev_ptr_pkey = 推力::device_pointer_cast(primaryKey);
    推力::device_ptr dev_ptr_skey = 推力::device_pointer_cast(secondaryKey);
    推力::device_ptr dev_ptr_values = 推力::device_pointer_cast(values);

    推力::元组，推力::device_ptr> keytup_begin =
        推力::make_tuple,推力::device_ptr>(dev_ptr_pkey, dev_ptr_skey);

    推力::zip_iterator, 推力::device_ptr > > first =
        推力::make_zip_iterator, 推力::device_ptr > >(keytup_begin);

    推力::sort_by_key(first, first + numberOfPoints, dev_ptr_values, ZipComparator());    
}

```

和这个自定义谓词：

```
typedef thrust::device_ptr<unsigned int> tdp_uint ;
typedef thrust::device_ptr<float> tdp_float ;
typedef thrust::tuple<tdp_uint, tdp_float> tdp_uif_tuple ;

struct ZipComparator
{
    __host__ __device__
    inline bool operator() (const tdp_uif_tuple &a, const tdp_uif_tuple &b)
    {
        if(a.head < b.head) return true;
        if(a.head == b.head) return a.tail < b.tail;
        return false;

    }
}; 
```

我得到的错误是：

```
错误 1 ​​错误：没有构造函数实例“thrust::device_ptr::device_ptr [with T=unsigned int]”匹配参数列表 C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.0\include\thrust\detail \元组.inl 309 1 ---
错误 2 错误：没有构造函数实例“thrust::device_ptr::device_ptr [with T=float]”匹配参数列表 C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.0\include\thrust\detail\元组.inl 401 1 ---

```

有什么想法可能导致这种情况/我如何编写一个确实有效的谓词？

提前致谢， 内森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T00:40:59.887

比较器接受类型为 的参数`const thrust::tuple<unsigned int, float>&`。您定义的`const tdp_uif_tuple&`类型扩展为`const thrust::tuple<thrust::device_ptr<unsigned int>, thrust:device_ptr<float> >&`

下面的代码为我编译：

```
struct ZipComparator
{
    __host__ __device__
    inline bool operator() (const thrust::tuple<unsigned int, float> &a, const thrust::tuple<unsigned int, float> &b)
    {
        if(a.head < b.head) return true;
        if(a.head == b.head) return a.tail < b.tail;
        return false;

    }
}; 
```

希望它也适合你:)

[http://code.google.com/p/thrust/wiki/QuickStartGuide#zip_iterator](http://code.google.com/p/thrust/wiki/QuickStartGuide#zip_iterator)有更多关于 zip 迭代器的细节。

不是必需的，但如果您希望清理这些模板的长度，您可以这样做：

```
void thrustSort(
    unsigned int * primaryKey,
    float * secondaryKey,
    unsigned int * values,
    unsigned int numberOfPoints)
{
    tdp_uint dev_ptr_pkey(primaryKey);
    tdp_float dev_ptr_skey(secondaryKey);   
    tdp_uint dev_ptr_values(values);

    thrust::tuple<tdp_uint, tdp_float> keytup_begin = thrust::make_tuple(dev_ptr_pkey, dev_ptr_skey);

    thrust::zip_iterator<thrust::tuple<tdp_uint, tdp_float> > first =
    thrust::make_zip_iterator(keytup_begin);

    thrust::sort_by_key(first, first + numberOfPoints, dev_ptr_values, ZipComparator());    
} 
```

许多模板参数可以从参数中推断出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-24T09:05:35.430

这是一个完整的示例，说明如何在由's 和自定义比较运算符处理`sort_by_key`键时使用。`tuple``zip_iterator`

```
#include <thrust/device_vector.h>
#include <thrust/sort.h>

#include "Utilities.cuh"

// --- Defining tuple type
typedef thrust::tuple<int, int> Tuple;

/**************************/
/* TUPLE ORDERING FUNCTOR */
/**************************/
struct TupleComp
{
    __host__ __device__ bool operator()(const Tuple& t1, const Tuple& t2)
    {
        if (t1.get<0>() < t2.get<0>())
            return true;
        if (t1.get<0>() > t2.get<0>())
            return false;
        return t1.get<1>() < t2.get<1>();
    }
};

/********/
/* MAIN */
/********/
int main()
{
    const int N = 8;

    // --- Keys and values on the host: allocation and definition
    int h_keys1[N]      = { 1, 3, 3, 3, 2, 3, 2, 1 };                                         
    int h_keys2[N]      = { 1, 5, 3, 8, 2, 8, 1, 1 };                                         
    float h_values[N]   = { 0.3, 5.1, 3.2, -0.08, 2.1, 5.2, 1.1, 0.01};

    printf("\n\n");
    printf("Original\n");
    for (int i = 0; i < N; i++) {
        printf("%i %i %f\n", h_keys1[i], h_keys2[i], h_values[i]);
    }

    // --- Keys and values on the device: allocation
    int *d_keys1;       gpuErrchk(cudaMalloc(&d_keys1, N * sizeof(int)));
    int *d_keys2;       gpuErrchk(cudaMalloc(&d_keys2, N * sizeof(int)));
    float *d_values;    gpuErrchk(cudaMalloc(&d_values, N * sizeof(float)));

    // --- Keys and values: host -> device
    gpuErrchk(cudaMemcpy(d_keys1, h_keys1, N * sizeof(int), cudaMemcpyHostToDevice));
    gpuErrchk(cudaMemcpy(d_keys2, h_keys2, N * sizeof(int), cudaMemcpyHostToDevice));
    gpuErrchk(cudaMemcpy(d_values, h_values, N * sizeof(float), cudaMemcpyHostToDevice));

    // --- From raw pointers to device_ptr
    thrust::device_ptr<int> dev_ptr_keys1 = thrust::device_pointer_cast(d_keys1);
    thrust::device_ptr<int> dev_ptr_keys2 = thrust::device_pointer_cast(d_keys2);
    thrust::device_ptr<float> dev_ptr_values = thrust::device_pointer_cast(d_values);

    // --- Declare outputs
    thrust::device_vector<float> d_values_output(N);
    thrust::device_vector<Tuple> d_keys_output(N);

    auto begin_keys = thrust::make_zip_iterator(thrust::make_tuple(dev_ptr_keys1, dev_ptr_keys2));
    auto end_keys = thrust::make_zip_iterator(thrust::make_tuple(dev_ptr_keys1 + N, dev_ptr_keys2 + N));

    thrust::sort_by_key(begin_keys, end_keys, dev_ptr_values, TupleComp());

    int *h_keys1_output = (int *)malloc(N * sizeof(int));
    int *h_keys2_output = (int *)malloc(N * sizeof(int));
    float *h_values_output = (float *)malloc(N * sizeof(float));

    gpuErrchk(cudaMemcpy(h_keys1_output, d_keys1, N * sizeof(int), cudaMemcpyDeviceToHost));
    gpuErrchk(cudaMemcpy(h_keys2_output, d_keys2, N * sizeof(int), cudaMemcpyDeviceToHost));
    gpuErrchk(cudaMemcpy(h_values_output, d_values, N * sizeof(float), cudaMemcpyDeviceToHost));

    printf("\n\n");
    printf("Ordered\n");
    for (int i = 0; i < N; i++) {
        printf("%i %i %f\n", h_keys1_output[i], h_keys2_output[i], h_values_output[i]);
    }

} 
```

# objective-c - 如何使用带有 RestKit 的 postObject 自定义 json 发送？

> ID：10077450
> 
> 赞同：2
> 
> 时间：2012-04-09T17:55:54.423
> 
> 标签：objective-c, restkit

我正在使用 restkit 将创建操作从 mu ipad 应用程序发布到我的 rails 应用程序。我为属性创建映射：

```
- (void) initCustomerMapping
{
    RKObjectMapping *customerSerializationMapping = [RKObjectMapping mappingForClass:[NSMutableDictionary class]]; 
    [customerSerializationMapping mapKeyPath:@"id" toAttribute:@"id"]; 
    [customerSerializationMapping mapKeyPath:@"lastname" toAttribute:@"lastname"]; 
    [customerSerializationMapping mapKeyPath:@"firstname" toAttribute:@"firstname"]; 
    [customerSerializationMapping mapKeyPath:@"house_name" toAttribute:@"house_name"]; 
    [customerSerializationMapping mapKeyPath:@"sci" toAttribute:@"sci"]; 
    [customerSerializationMapping mapKeyPath:@"water_used" toAttribute:@"water_used"]; 
    [customerSerializationMapping mapKeyPath:@"address_line_1" toAttribute:@"address_line_1"]; 
    [customerSerializationMapping mapKeyPath:@"address_line_1" toAttribute:@"address_line_2"]; 
    [customerSerializationMapping mapKeyPath:@"postal_code" toAttribute:@"postal_code"]; 
    [customerSerializationMapping mapKeyPath:@"city" toAttribute:@"city"];

    [[RKObjectManager sharedManager].mappingProvider setSerializationMapping:customerSerializationMapping forClass:[Customer class]]; 
} 
```

我发送请求：

```
 Customer* customer = [[Customer alloc] init]; 
    customer.lastname = lastname.text;
    customer.firstname = firstname.text;
    customer.house_name = house_name.text;
    customer.sci = sci.text;
    customer.water_used = water_used.text;
    customer.address_line_1 = address_line_1.text;
    customer.address_line_2 = address_line_2.text;
    customer.postal_code = postal_code.text;
    customer.city = city.text;

    [[RKObjectManager sharedManager] postObject:customer delegate:self]; 
```

但是 json 发送看起来像：

```
 {"water_used"=>"710", "house_name"=>"test", "address_line_1"=>"test", "city"=>"test", "sci"=>"546", "firstname"=>"test", "lastname"=>"test", "address_line_2"=>"test", "postal_code"=>"75896"} 
```

我想得到：

```
 { "customer" => 
       {"water_used"=>"710", "house_name"=>"test", "address_line_1"=>"test", "city"=>"test", "sci"=>"546", "firstname"=>"test", "lastname"=>"test", "address_line_2"=>"test", "postal_code"=>"75896"}
    } 
```

我该如何配置？我尝试使用**forKey**但我失败了

**编辑**

您还可以使用：

```
[[RKObjectManager sharedManager].mappingProvider registerMapping:customerSerializationMapping withRootKeyPath:@"customer"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T08:55:39.960

我找到了另一个解决方案。在 toAttribute 的字符串中，我把它写成一个数组：

```
- (void) initCustomerMapping
{
    RKObjectMapping *customerSerializationMapping = [RKObjectMapping mappingForClass:[NSMutableDictionary class]]; 
    [customerSerializationMapping mapKeyPath:@"id" toAttribute:@"customer[id]"]; 
    [customerSerializationMapping mapKeyPath:@"lastname" toAttribute:@"customer[lastname]"]; 
    [customerSerializationMapping mapKeyPath:@"firstname" toAttribute:@"customer[firstname]"]; 
    [customerSerializationMapping mapKeyPath:@"house_name" toAttribute:@"customer[house_name]"]; 
    [customerSerializationMapping mapKeyPath:@"sci" toAttribute:@"customer[sci]"]; 
    [customerSerializationMapping mapKeyPath:@"water_used" toAttribute:@"customer[water_used]"]; 
    [customerSerializationMapping mapKeyPath:@"address_line_1" toAttribute:@"customer[address_line_1]"]; 
    [customerSerializationMapping mapKeyPath:@"address_line_1" toAttribute:@"customer[address_line_2]"]; 
    [customerSerializationMapping mapKeyPath:@"postal_code" toAttribute:@"customer[postal_code]"]; 
    [customerSerializationMapping mapKeyPath:@"city" toAttribute:@"customer[city]"];

    [[RKObjectManager sharedManager].mappingProvider setSerializationMapping:customerSerializationMapping forClass:[Customer class]]; 
} 
```

它给了我我的 json ：

```
 { "customer" => 
       {"water_used"=>"710", "house_name"=>"test", "address_line_1"=>"test", "city"=>"test", "sci"=>"546", "firstname"=>"test", "lastname"=>"test", "address_line_2"=>"test", "postal_code"=>"75896"}
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T19:16:29.320

您当然应该再添加一个包含 Customer 属性的对象。

举个例子 ：

```
#import "Customer.h"

@interface SOCustomer : NSObject
@property (nonatomic, retain) Customer* customer;
@end 
```

在此之后，您必须更改序列化。也许像这样：

```
RKObjectMapping *customerSerializationMapping = [RKObjectMapping mappingForClass:[NSMutableDictionary class]]; 
[customerSerializationMapping mapKeyPath:@"id" toAttribute:@"id"]; 
[customerSerializationMapping mapKeyPath:@"lastname" toAttribute:@"lastname"]; 
[customerSerializationMapping mapKeyPath:@"firstname" toAttribute:@"firstname"]; 
[customerSerializationMapping mapKeyPath:@"house_name" toAttribute:@"house_name"]; 
[customerSerializationMapping mapKeyPath:@"sci" toAttribute:@"sci"]; 
[customerSerializationMapping mapKeyPath:@"water_used" toAttribute:@"water_used"]; 
[customerSerializationMapping mapKeyPath:@"address_line_1" toAttribute:@"address_line_1"]; 
[customerSerializationMapping mapKeyPath:@"address_line_1" toAttribute:@"address_line_2"]; 
[customerSerializationMapping mapKeyPath:@"postal_code" toAttribute:@"postal_code"]; 
[customerSerializationMapping mapKeyPath:@"city" toAttribute:@"city"];

[[RKObjectManager sharedManager].mappingProvider setSerializationMapping:customerSerializationMapping forClass:[Customer class]];

// added
RKObjectMapping *vocustomerSerializationMapping = [RKObjectMapping mappingForClass:[NSMutableDictionary class]];
[vocustomerSerializationMapping mapKeyPath:@"customer" toRelationship:@"customer" withMapping:customerSerializationMapping ];
[[RKObjectManager sharedManager].mappingProvider setSerializationMapping:vocustomerSerializationMapping  forClass:[Customer class]]; 
```

我无法测试这段代码，但我认为这是正确的方法。只需找到如何正确序列化。

希望这可以帮到你。

# jquery - 从数据库加载时匈牙利字符消失

> ID：10077451
> 
> 赞同：1
> 
> 时间：2012-04-09T17:55:59.633
> 
> 标签：jquery, ajax, character-encoding

我正在提取数据库数据宽度 jquery 来构建网站内容。问题是：我的匈牙利字符在从服务器到客户端的过程中丢失了。例如：“kosárlabda”变成“Kosárlabda”等等……

使用 php 设置响应标头没有帮助（ISO-8859-2 和 UTF-8 也没有）。我`<?php header('charset=ISO-8859-2'); ?>`在调用文件的顶部。

这是我用来加载数据的方法：

```
function load(type,values) {
    $.get(type+".php", function(data) {
        $("#data").html(data);
    });
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:54:25.970

我解决了我的问题：

我只需要：

*   放入所有`mysql_query("SET NAMES UTF-8");`php`mysql_query("SET CHARACTER SET 'utf8'");`文件
*   `AddDefaultCharset UTF-8`在 .htaccess 文件中添加一个。

# html - Jquery Mobile 链接停止为页面工作

> ID：10077453
> 
> 赞同：2
> 
> 时间：2012-04-09T17:56:02.290
> 
> 标签：html, mobile, jquery-mobile, hyperlink, anchor

我在[http://www.ab-mobile-apps.com/app/fcs/index.html有一个 jquery 移动网站正在开发中](http://www.ab-mobile-apps.com/app/fcs/index.html)

问题是主菜单中的链接最近停止工作。浏览器可以识别它们，但是单击链接后，除了服务链接之外，什么也没有发生。我正在使用 JQMobileRC 1.1，就像在其他网站上一样，没有任何问题。

如果有人有任何意见，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-21T18:15:08.673

我遇到了同样的问题（在此回复时，最新的 jqm 版本是 1.4.2），到目前为止这为我解决了这个问题：

1) 指向域/应用程序中不同页面的链接：data-ajax="false"

```
<a href="map.html" data-ajax="false"> ... </a> 
```

2) 指向不同域的链接：rel="external"

```
<a href="http://www.abcd.xyz/thing.html" rel="external"> ... </a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T21:21:06.980

你可能会遇到这个[问题](https://github.com/jquery/jquery-mobile/issues/3723)。如果是这样，您需要备份到版本 1.0.1 或前进到最新的前沿。

# c# - NetFx40_PInvokeStackResilience 似乎不起作用

> ID：10077459
> 
> 赞同：1
> 
> 时间：2012-04-09T17:56:46.920
> 
> 标签：c#, debugging, .net-4.0, pinvoke, app-config

我有一个库，我试图在 C# 中与 Dot Net 4 App 一起使用。这是一个二进制运行时，所以我无权访问库源。我收到错误

> 对 PInvoke 函数 'XXXXXXXXXXX.WinAPI::GetDCEx' 的调用使堆栈失衡。这可能是因为托管 PInvoke 签名与非托管目标签名不匹配。检查 PInvoke 签名的调用约定和参数是否与目标非托管签名匹配。

如果我禁用 PInvokeStackImbalance MDA，应用程序将运行，因为它不再被调试器抛出。虽然这解决了应用程序未运行的问题，但显然存在问题。

我最近阅读了有关 NetFx40_PInvokeStackResilience 的内容，您可以在 app.config 中放置一个元素，它告诉运行时使用编组层来检测和修复不正确的平台调用声明（就像以前的 .Net 版本一样）。

```
<configuration>
  <runtime>
    <NetFx40_PInvokeStackResilience enabled="1" />
  </runtime>
  .....
</configuration> 
```

问题是这似乎对调试器没有任何作用，调试器仍然调用错误。

我的问题是我是否还必须禁用 PInvokeStackImbalance MDA？

我怎么知道 NetFx40_PInvokeStackResilience 已经工作并且封送层正在完成它的工作？

PS 我正在使用 Visual Studio 2010 Express

PPS 我已经写信给图书馆的所有者，并提供了修改他的 DllImports 等的可能解决方案。虽然封送层应该解决这个问题，但可能会降低性能。加上它的混乱和不理想。但是，与此同时，在库更新之前，我仍然需要一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T01:03:26.000

不平衡的堆栈是一种令人讨厌的运行时问题。您倾向于在 Debug 构建中避开它，因为方法设置和拆除堆栈帧的方式可以隐藏堆栈指针值不正确的问题。堆栈指针在方法退出时恢复。在发布版本中，您获得这种运气的几率会更低。特别是由于方法内联，它删除了堆栈设置/拆卸代码。

.NET 4 中需要 NetFx40_PInvokeStackResilience 元素，因为它们优化了 pinvoke 编组器。这可能会破坏在早期版本中工作的错误代码，添加元素会禁用该优化。它对整个程序具有全局影响。这*并不是*要禁用 MDA，那将隐藏一个非常现实的问题。它只是为 IT 人员提供了一种解决兼容性问题的方法。

您可以通过将 pinvoke 调用放入一个单独的方法中来降低风险，该方法除了调用之外什么都不做。你必须用 [MethodImpl(MethodImplOptions.NoInlining)] 来装饰它，这样优化器就不能内联它。该辅助方法不能有任何*out*或*ref*参数，并且不能返回结构类型的值，并且在调用之后不应该有任何附加代码。

显然，您将希望投入尽可能多的时间来真正解决这个问题。有人可以帮助您处理原始 C 声明，但是我们无法帮助您找到他。不发布 pinvoke 声明也消除了有人猜测它的可能性。

# python - 使用多处理运行进程并使用 django 服务其状态

> ID：10077467
> 
> 赞同：1
> 
> 时间：2012-04-09T17:57:12.393
> 
> 标签：python, django, python-multithreading

我想用 django 提供一个页面，但我希望内容随着时间的推移而发展，无论该页面是否被请求。

我最初的计划是`views.py`启动一个多处理进程，它将无限循环并更新内容。我想它需要与启动过程有一些共享状态，以便 django 可以获取内容以将其提供给客户端。

我发布这个问题是为了看看人们是否可以发现我的方法有一些明显的错误，或者提出一个明显更好的方法。

# java - 如何使用 IO Codenameone 发布图片/图像

> ID：10077470
> 
> 赞同：3
> 
> 时间：2012-04-09T17:57:33.413
> 
> 标签：java, image, post, lwuit, codenameone

因为codenameone不能使用外部库（HttpConnection）所以我必须使用内部库/API提供的Codenameone，只是我已经设法通过使用ConnectionRequest将数据发布为格式化文本/字符串，我想知道有没有使用 ConnectionRequest 以图像形式发布数据的方法？感谢您的帮助

我正在使用的片段连接请求：

```
ConnectionRequest myrequest = new ConnectionRequest();
                                        myrequest.setUrl("http://www.xxxx.com/mobile/login/");
                                        myrequest.setPost(true);
                                        myrequest.addArgument("email", "info@xxx.net");
                                        myrequest.addArgument("password", "xxx");
                                        myrequest.setPriority(ConnectionRequest.PRIORITY_CRITICAL);
                                        NetworkManager.getInstance().addToQueue(myrequest);
                                        myrequest.addResponseListener(new ActionListener() {

                            @Override
                            public void actionPerformed(ActionEvent evt) {
                                NetworkEvent n = (NetworkEvent)evt;

                                // gets the data from the server as a byte array...
                                byte[] data = (byte[])n.getMetaData();
                                String response = new String(data);
                            }
                        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T09:36:49.570

感谢您的回答 Shai，我在存储库中看到已添加 Codenameone MultipartRequest 功能（Codenameone 团队做得很好）

只是如果我使用Write.flush函数（），那么程序我总是得到一个Stream Closed Exception，但是如果我注释了这个命令，我的程序又变得正常了，按照我编辑的代码稍微Codenameone适合我的需要：

```
/**
* A multipart post request allows a developer to submit large binary data 
*  files to the server in a post request
*
* @author Shai Almog
*/
public class MultipartRequest extends ConnectionRequest {
private String boundary;
private Hashtable args = new Hashtable();
private Hashtable mimeTypes = new Hashtable();
private static final String CRLF = "\r\n"; 

protected void readResponse(InputStream input) throws IOException {
    // TODO Auto-generated method stub

        StringBuffer stringBuffer = new StringBuffer();
          int ch;
          while ((ch = input.read()) != -1) {
             stringBuffer.append((char) ch);
          }

        fireResponseListener(new NetworkEvent(this, stringBuffer.toString()));
}

/**
 * Initialize variables
 */
public MultipartRequest() {
    setPost(true);
    setWriteRequest(true);

    // Just generate some unique random value.
    boundary = Long.toString(System.currentTimeMillis(), 16); 

    // Line separator required by multipart/form-data.
    setContentType("multipart/form-data; boundary=" + boundary);
}

/**
 * Adds a binary argument to the arguments
 * @param name the name of the data
 * @param data the data as bytes
 * @param mimeType the mime type for the content
 */
public void addData(String name, byte[] data, String mimeType) {
    args.put(name, data);
    mimeTypes.put(name, mimeType);
}

/**
 * Adds a binary argument to the arguments, notice the input stream will be read only during submission
 * @param name the name of the data
 * @param data the data stream
 * @param mimeType the mime type for the content
 */
public void addData(String name, InputStream data, String mimeType) {
    args.put(name, data);
    mimeTypes.put(name, mimeType);
}

/**
 * @inheritDoc
 */
public void addArgument(String name, String value) {
    args.put(name, value);
}

/**
 * @inheritDoc
 */
protected void buildRequestBody(OutputStream os) throws IOException {
    Writer writer = null;
    writer = new OutputStreamWriter(os, "UTF-8"); 
    Enumeration e = args.keys();
    while(e.hasMoreElements()) {
        String key = (String)e.nextElement();
        Object value = args.get(key);

        writer.write("--" + boundary);
        writer.write(CRLF);
        if(value instanceof String) {
            writer.write("Content-Disposition: form-data; name=\"" + key + "\"");
            writer.write(CRLF);
            writer.write("Content-Type: text/plain; charset=UTF-8");
            writer.write(CRLF);
            writer.write(CRLF);
         //   writer.flush(); // always error if I use this??
            writer.write(Util.encodeBody((String)value));
            writer.write(CRLF); // always error if I use this??
           // writer.flush();
        } else {
            writer.write("Content-Disposition: form-data; name=\"" + key + "\"; filename=\"" + key +"\"");
            writer.write(CRLF);
            writer.write("Content-Type: ");
            writer.write((String)mimeTypes.get(key));
            writer.write(CRLF);
            writer.write("Content-Transfer-Encoding: binary");
            writer.write(CRLF);
            writer.write(CRLF);
            if(value instanceof InputStream) {
                InputStream i = (InputStream)value;
                byte[] buffer = new byte[8192];
                int s = i.read(buffer);
                while(s > -1) {
                    os.write(buffer, 0, s);
                    s = i.read(buffer);
                }
            } else {
                os.write((byte[])value);
            }
            writer.write(CRLF);
           // writer.flush();
        }
        writer.write(CRLF);
        //writer.flush();
    }

    writer.write("--" + boundary + "--");
    writer.write(CRLF);
    writer.close();
} 
```

如何使用的例子：

```
 public class FormTest extends Form implements ActionListener{
private Button btnUpload;
private Button btnBrowse;
public  FormTest(){

    NetworkManager.getInstance().start();

    setLayout(new BoxLayout(BoxLayout.Y_AXIS));

    btnBrowse = new Button("Browse");
    btnUpload = new Button("Upload");

    addComponent(btnBrowse);
    addComponent(btnUpload);

    btnBrowse.addActionListener(this);
    btnUpload.addActionListener(this);

}
private MultipartRequest request;
public void actionPerformed(ActionEvent evt) {
    // TODO Auto-generated method stub
    if (evt.getSource().equals(btnBrowse)){
        //browse here

        btnBrowse.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent evt) {
                // TODO Auto-generated method stub
                Utility.pathfile = "";
                Utility.main.getFile();
                new Thread(new Runnable() {

                    public void run() {
                        // TODO Auto-generated method stub
                        while (Utility.pathfile.equals("")) {

                        }

                    }
                }).start();

            }
        });

    }

    if (evt.getSource().equals(btnUpload)){
        //upload here
        request = new MultipartRequest();
        request.setUrl("http://10.151.xx.xx/testuploadinfo.php");

        request.addArgument("Parameter1","Value1");
                    //add the data image
        request.addData("file", getTheImageByte("Your Url to Image here"),"image/png");

        request.setPriority(ConnectionRequest.PRIORITY_CRITICAL);
        request.addResponseListener(FormTest.this);
        NetworkManager.getInstance().addToQueue(request);
        //Dialog.show("Test","ok", "","");

    }
     if (evt instanceof NetworkEvent) {
         NetworkEvent ne = (NetworkEvent)evt;
         Dialog.show("Result:", ne.getMetaData().toString(), "","");

     }

}

private byte[] getTheImageByte(String url) {
    Bitmap bitmap = null, scaleBitmap = null;
    byte[] data = null;
    InputStream inputStream = null;
    FileConnection fileConnection = null;
    try {
        fileConnection = (FileConnection) Connector
                .open(url);
        if (fileConnection.exists()) {
            inputStream = fileConnection.openInputStream();
            data = new byte[(int) fileConnection.fileSize()];
            data = IOUtilities.streamToBytes(inputStream);

        }
    } catch (Exception e) {
        try {
            if (inputStream != null) {
                inputStream.close();
            }
            if (fileConnection != null) {
                fileConnection.close();
            }
        } catch (Exception exp) {

        }

    }
    return data;// return the scale Bitmap not the original bitmap;
} 
```

}

和简单的 PHP 代码：

```
 <?php

print_r($_FILES);
$new_image_name = "image.jpg";
move_uploaded_file($_FILES["file"]["tmp_name"], "sia/".$new_image_name); 
```

?>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T18:33:00.007

当然，您可以将图像数据作为参数添加到请求中，但您需要对其进行编码。或者，您可以覆盖该方法：

```
protected void buildRequestBody(OutputStream os) throws IOException 
```

并将您需要的任何任意数据写入后输出流。

# python - 从不可变对象读取时使用 multiprocessing.pool 映射的错误

> ID：10077471
> 
> 赞同：1
> 
> 时间：2012-04-09T17:57:41.243
> 
> 标签：python, python-3.x, multiprocessing, immutability

我正在尝试使用多处理池类将纯函数映射到一些不可变对象上。但是，当我尝试运行它时，我会在终端中看到大量错误（有时会持续几分钟），而且 python 通常“必须以不寻常的方式终止”。我在 Windows (XP) 上运行，使用 python 3.2.2。

```
import multiprocessing

def do_stuff(v):
    return v.x + v.y

class Vector:
    __slots__ = ['x', 'y']

    def __setattr__(self, name, value):
        raise AttributeError("Cannot assign values to object {0} of type {1}".format(self, type(self)))

    def __init__(self, x, y = None):
        """Initialize an immutable x, y Vector"""
        object.__setattr__(self, 'x', x)
        object.__setattr__(self, 'y', y)

if __name__ == "__main__":
    todo = [Vector(1, 2), Vector(3, 4), Vector(-1, 12), Vector(16, 32), Vector(16, 32)]
    pool = multiprocessing.Pool(4)
    results = list(pool.map(do_stuff, todo))
    print(results) 
```

预期输出：

```
[3, 7, 11, 48, 48] 
```

错误的数量非常多，但似乎归结为 pool.map 中的某些内容试图在 Vector 上设置属性：

```
Process PoolWorker-1:
Traceback (most recent call last):
  File "c:\Python32\lib\multiprocessing\process.py", line 267, in _bootstrap
Process PoolWorker-2:
Traceback (most recent call last):
  File "c:\Python32\lib\multiprocessing\process.py", line 267, in _bootstrap
    self.run()
  File "c:\Python32\lib\multiprocessing\process.py", line 116, in run
    self._target(*self._args, **self._kwargs)
  File "c:\Python32\lib\multiprocessing\pool.py", line 102, in worker
    task = get()
  File "c:\Python32\lib\multiprocessing\queues.py", line 378, in get
    return recv()
  File "d:\Documents and Settings\Userdir\Scripts\temp\test.py", line 11, in __s
etattr__
    raise AttributeError("Cannot assign values to object {0} of type {1}".format
(self, type(self)))
AttributeError: Cannot assign values to object <__main__.Vector object at 0x00C2
BBB0> of type <class '__main__.Vector'> 
```

我可以注释掉以`__slots__`(strange?) 开头的行，使用常规`map`，或者我可以使 Vector 类可变（注释掉`__setattr__`），其中任何一个本身都会使其正常工作。

**当我所做的只是从对象中读取时，为什么还要尝试在我的对象上设置属性？**

**为什么`__slots__`从对象中删除会导致它正常工作？**

编辑：

我将`__slots__`其用作节省内存/空间的一种方式，因为我的程序中通常有大量向量。因此，我无法从元组派生 Vector：[`__slots__`不适用于从“可变长度”内置类型（如 long、str 和 tuple）派生的类](http://docs.python.org/release/2.5.2/ref/slots.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T19:22:00.847

`__slots__`导致 unpickling 问题`multiprocessing`，请参见例如[python 多处理 pickle 协议](https://stackoverflow.com/questions/7920601/python-multiprocessing-pickle-protocol)

由于您不需要它来实现不变性（您`__setattr__`的所有实际用途都足够了），我建议您将其删除。

如果你真的需要它来节省空间，那么实施[`__getstate__`](http://docs.python.org/library/pickle.html#object.__getstate__)它[`__setstate__`](http://docs.python.org/library/pickle.html#object.__setstate__)可以解决 unpickling 问题。

# html - 可以将 id/class 添加到 标签吗？

> ID：10077475
> 
> 赞同：35
> 
> 时间：2012-04-09T17:58:02.330
> 
> 标签：html

这样做可以吗？

```
<link rel="stylesheet" href="css/mobile/load.css" id="stylesheet_mobile" /> 
```

所以我可以使用 JavaScript 来动态禁用样式表？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-09T18:01:01.953

根据[HTML 4.01 Transitional](http://www.w3.org/TR/html401/struct/links.html#edef-LINK)，`id`，`class`是文档范围的选择器，因此可以将它们放在`link`元素中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-09T18:01:54.707

是的你可以。元素上允许使用核心属性`<link>`，包括`style`、`class`、`id`和`title`。虽然，由于它不是一个渲染元素，类和样式不会有任何影响。

```
<!ENTITY % coreattrs
 "id          ID             #IMPLIED  -- document-wide unique id --
  class       CDATA          #IMPLIED  -- space-separated list of classes --
  style       %StyleSheet;   #IMPLIED  -- associated style info --
  title       %Text;         #IMPLIED  -- advisory title --"
  > 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T18:06:56.413

是的。可以在每个 html 元素上指定某些属性。`id`并且`class`在其中。

有关 html5 规范中的完整列表：http: [//developers.whatwg.org/elements.html#global-attributes](http://developers.whatwg.org/elements.html#global-attributes)

链接元素的规范：http: [//developers.whatwg.org/semantics.html#the-link-element](http://developers.whatwg.org/semantics.html#the-link-element)

在 html4.1 中：[http ://www.w3.org/TR/html401/struct/links.html#h-12.3](http://www.w3.org/TR/html401/struct/links.html#h-12.3)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T18:00:23.787

是的，是的。但不建议这样做，因为这意味着加载多个文件（多个 HTTP 请求）而不是加载一个更大的文件（但仅一个 HTTP 请求）。

# c - 需要对 program.in 输出的解释

> ID：10077481
> 
> 赞同：1
> 
> 时间：2012-04-09T17:58:31.243
> 
> 标签：c

在查看 C 中的一些概念性问题时，我在一本书中遇到了这个问题。以下程序的输出是什么？

```
#include<stdio.h>
#include<string.h>
int main()
{
    static char s[25]="The cocaine man";
    int i=0;
    char ch;
    ch=s[++i];
    printf("%c",ch);
    ch=s[i++];
    printf("%c",ch);
    ch=i++[s];
    printf("%c",ch);
    ch= ++i[s];
    printf("%c\n",ch);
    return 0;
} 
```

回答 ：

```
 hhe! 
```

谁能解释一下这个输出是怎么来的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T18:10:17.267

从第一个任务开始

`ch=s[++i];`

递增 i(i=1) 并分配`ch`的索引 (i=1) 处的字符`s`。

`ch=s[i++];`

分配`ch`索引 (i=1) 处的字符，`s`然后递增 i(i=2)。

`ch=i++[s];`

分配`ch`索引 (i=2) 处的字符，`s`然后递增 i(i=3)。关键：`s[i] == i[s]`。

`ch= ++i[s];`

递增索引 (i=3) of 处的 ASCII 值`s`并将其分配给 ch。Key :`[]`优先级高于前缀`++`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T18:00:20.047

理解这一点的关键是，在 C 中，以下是等价的：

```
x[y]
*(x+y) 
```

而且该前缀`++`的[优先级](http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Operator_precedence)低于`[]`.

[ASCII 字符集表](http://www.asciitable.com/)也将派上用场。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-06T07:10:52.270

*   首先`i=0`，现在对于`s[++i]`, i=1 并且`s[1]`将给出 h。

*   现在对于`s[i++]`，它将给出`s[1]`is`h`并且 i 的值为 2。

*   因为`i++[s]`，我们必须知道`i[s]==s[i]`。现在它将给出i=3 的`s[2]`is`e`和值。

*   现在对于最重要的部分`++i[s]`，我们可以认为它是`++(i[s])`因为 `[ ]`运算符的优先级高于`++`. 由于`i[s]`是 char 值，`++`因此运算符将处理其 ASCII 值，`s[3]`即 ie（空格）的 ASCII 值，即 32 [http://www.asciitable.com/](http://www.asciitable.com/)。32 加 1 变为 33，即 ! 的 ASCII 值。

# jquery - 使用 jquery 将另一个 html 加载到 div 中

> ID：10077485
> 
> 赞同：0
> 
> 时间：2012-04-09T17:58:45.653
> 
> 标签：jquery

谁能告诉我我做错了什么？演示页面，只有：“你好”字，不能在里面显示`#container`

```
<div id="galeria_oculta">
    <div id="container">

    </div>
</div>

<div id="wrapper">
    <a href="#" id="exibe_galeria">click here</a>
</div> 
```

这里的jQuery代码：

```
$(document).ready(function() {

    $('#galeria_oculta').hide();

    $('#exibe_galeria').click(function(e) {
        $('#galeria_oculta').show();
        $('#container').load('demo.html');
        e.preventDefault;
        return false;
    });

    $('#close_galeria').click(function(e) {
        $('#galeria_oculta').hide();
        e.preventDefault;
        return false;
    }); 

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:06:40.673

```
e.preventDefault; 
```

是错的，正确的是：

```
e.preventDefault(); 
```

也许你调用了 jQuery 库的 2 倍 :)))))))))))))))))

# zend-framework - 在zend php中提交时显示确认消息

> ID：10077492
> 
> 赞同：1
> 
> 时间：2012-04-09T17:59:23.993
> 
> 标签：zend-framework, zend-form

嗨，我创建了一个 zend_form_element_submit。现在我想在有人点击提交时显示确认消息。当用户选择是或确定时，应该提交表单。我阅读了有关 javascript confirm() 函数的信息，但想知道 zend 是否提供了任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:13:17.653

您可以使用 Zend Framework 来完成，但在我看来，我认为使用 javascript 来处理这种事情更加用户友好。

例如，一旦用户单击提交按钮，您将触发一个 jQuery 对话框（模式确认）。[更多关于 jQuery 对话框的信息在这里](http://jqueryui.com/demos/dialog/#modal-confirmation)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T18:53:02.960

为此，您应该为您的`Zend_Form`子类分配一个标识符，并为该表单分配一个 javascript 提交处理程序。

要为表单分配 id，请在函数中使用 setAttrib()`Zend_Form::init()`函数：

```
/**
 * init the form
 */
public function init()
{
    $this->setAttrib('id', 'search-form');  
    .....
 } 
```

然后您可以使用此事件处理代码来覆盖表单的提交功能：

```
// submit search form
$('form#search-form').submit(function() {
        if (confirm("....")) {
           return true;
        }
       return false;
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T05:32:12.813

在这种情况下，您需要 FlashMessenger 组件。您可以选择通过直接 HTML 或通过 JavaScript 呈现消息。

[FlashMessenger 动作助手](http://framework.zend.com/manual/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.flashmessenger)

**仅供参考**：您可以构建一个局部视图模板，该模板仅在有 >0 条消息时才会呈现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-09T19:50:36.193

在按钮上，您可以设置一个属性：

```
$button->setAttribute('onclick', 'if (confirm("Are you sure?")) { document.form.submit(); } return false;'); 
```

# android - Android 自定义标记图标

> ID：10077494
> 
> 赞同：23
> 
> 时间：2012-04-09T17:59:32.907
> 
> 标签：android, marker

我正在使用谷歌地图开发应用程序，所以我想为每个自定义地点定义一个自定义标记，例如（加油站-酒店-医院..）！我有一个包含许多地方的纬度和经度的覆盖类，我想知道如何提供自定义图标！

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-12-05T14:27:15.553

With the new Maps Api Setting the Icon for a [Marker](https://developers.google.com/maps/documentation/android/marker) is done with the following Code:

```
MarkerOptions markerOptions = new MarkerOptions().icon(BitmapDescriptorFactory.fromResource(R.drawable.icon_location)); 
```

The icon can not be changed after a Marker was created. To change an icon remove the marker and readd it with a new image.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-23T21:37:45.800

使用 APi v2，您可以`(markerObject).setIcon(BitmapDescriptor)`更改/设置标记图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T18:02:22.970

[`OverlayItem.setMarker`](http://code.google.com/android/add-ons/google-apis/reference/com/google/android/maps/OverlayItem.html#setMarker(android.graphics.drawable.Drawable))似乎是您正在寻找的方法。

请注意，您需要注意（或曾经有）[一个陷阱；](http://developmentality.wordpress.com/2009/10/16/android-overlayitemsetmarkerdrawable-icon/)您首先需要使用`Drawable.setBounds`设置可绘制对象的可见边界，然后才能正确渲染它。可能需要一些摆弄才能使其居中；看到[这个答案](https://stackoverflow.com/questions/6173388/googlemaps-custom-itemizedoverlay-and-overlayitem-the-correct-way-to-show-diff)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-06T03:57:42.590

要更改地图图标的颜色：

```
mMap.addMarker(new MarkerOptions().position(baitulMosque).title("Baitul Mosque").icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_CYAN))); 
```

# mysql - 使用 memachined 减少数据库写入

> ID：10077495
> 
> 赞同：0
> 
> 时间：2012-04-09T17:59:36.163
> 
> 标签：mysql, memcached

我想将我的统计跟踪系统转换为不直接写入数据库，因为我们遇到了瓶颈。

我们目前在站点的某些方面使用 memcached，我想用它来存储统计信息并定期将它们提交到 mysql DB。

然而，问题在于项目的数量（以百万计），这些项目可能会在 cronjob 运行之间收集到将它们提交到数据库中的统计信息。除了运行 a`SELECT * FROM data`并检查每个 memcache 键是否存在，然后更新表....还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:41:32.337

（我不是说下面是福音，这只是我的直觉。如后所述，我不知道你的系统的细节：）显然没有冒犯的意思等等：））

我建议不要为此使用 memcached。Memcached 用于快速检索您之前获得的值，而不是存储值。最大的区别是您的缓存已满，您将丢失数据。

通常，您的缓存中没有数据，然后从源中重新收集数据，在这种情况下这是不可能的。仅此一项就是我试图劝阻你的理由。

现在您说主要问题是您遇到的mysql连接限制。如果你做一些简单的事情（就像我们在评论中谈到的那样：the `insert delayed`），这只是增加限制的一个例子。您可能应该有足够的能力让您的脚本/用户访问数据库一次并说“最终应该添加”，然后离开。如果您的用户甚至无法为此打开 1 个连接，那么您可能无法通过添加额外的缓存层来解决严重的资源问题？

显然很难说没有任何系统、软件和硬件规格，但我的建议是看看你是否可以通过增加限制来让他们打开连接，并稍微调整一下服务器变量，而不是猴子补丁通过使用 memcached 作为中间层来构建您的系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T06:31:17.683

我对统计数据也有类似的问题。但请不要使用 memcached。您不能确定您的所有项目都将移至数据库。您可以丢失数据和/或双重处理数据。

您应该根据正在写入/读取的数据量以及需要多少连接来分析瓶颈。而不是切换到可扩展的东西，如 Hadoop、Cassandra、Scripe 和其他系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T08:38:13.280

1.  您需要提供有关您正在运行的平台的其他信息：操作系统、数据库（版本）、存储引擎、RAM、CPU（如果可能）？

2.  您是插入一个表还是多个表？

3.  您能否禁用要插入的表上的索引，因为这会减慢插入功能。

4.  您是否在插入原始数据时运行任何触发器或存储过程来计算值？

# javascript - 非常基本的 JS 编码和 SoundManager2 与否？

> ID：10077496
> 
> 赞同：2
> 
> 时间：2012-04-09T17:59:46.210
> 
> 标签：javascript, html, audio-streaming

我想在我的网站上包含一个具有以下属性的音频/可能的视频播放器：

*   必须可以通过`<div>`;
*   通过 CSS 样式化；
*   可以读取所有 ID3 信息；
*   可以从数据库中拉取文件（可能是 GoDaddy 的 Easy Database）；
*   没有闪光灯；
*   可转移到智能手机等

我被赶到了似乎符合要求的 SoundManager2，但我似乎在制作可点击的图像开始播放我的 mp3 时遇到了真正的麻烦。我的 JS 技能为零，所以我从愚蠢的基础开始慢慢建立起来。我想我有两个问题：

1.  还有其他更适合的媒体播放器吗？
2.  到目前为止，我无法创建 Fiddle，但这是非常简单的 HTML - 出了什么问题？：

    ```
    <html>
    <head>

    <script src="script/soundmanager2.js"></script>

    <script>

    // Path to Flash Files
    soundManager.url = 'swf/';
    soundManager.onload(function(){
      // SM2 is ready to Play Audio

    // Create "mySound"
    soundManager.createSound({
    id:"mySound",
    url:"audiofiles/my.mp3",
    onfinish:function(){window.location.href='index.html}});
    };

    // Play File
    //soundManager.play('mySound','my.mp3');});
    </script>

    </head>

    <body>
    <img src="image.jpg" alt="Previous" border="0" width="400" height="400" onclick="soundManager.play('mySound',{volume:100})";>
    </body>
    </html> 
    ```

我从[另一个网站](http://en.wikiaudio.org/SoundManager2%3aHow_to_play_and_trigger_sound)复制了这段代码，但我偷偷怀疑代码不完整，所以任何帮助都会......错误......有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:52:14.813

我操作你说你从中获取代码的网站。我更新了它，它应该可以工作。确保您完成**了教程中的两个部分**。第二部分假设您使用与第一部分相同的文件结构。现在应该可以正常工作了：

[http://en.wikiaudio.org/SoundManager2:How_to_play_and_trigger_sound](http://en.wikiaudio.org/SoundManager2:How_to_play_and_trigger_sound)

# c# - 在 WPF 中显示 Drawing.Image

> ID：10077498
> 
> 赞同：25
> 
> 时间：2012-04-09T17:59:56.947
> 
> 标签：c#, wpf, image

我有一个 System.Drawing.Image 的实例。

如何在我的 WPF 应用程序中显示这个？

我试过了，`img.Source`但这不起作用。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-26T14:20:25.133

我有同样的问题并通过结合几个答案来解决它。

```
System.Drawing.Bitmap bmp;
Image image;
...
using (var ms = new MemoryStream())
{
    bmp.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
    ms.Position = 0;

    var bi = new BitmapImage();
    bi.BeginInit();
    bi.CacheOption = BitmapCacheOption.OnLoad;
    bi.StreamSource = ms;
    bi.EndInit();
}

image.Source = bi;
//bmp.Dispose(); //if bmp is not used further. Thanks @Peter 
```

从[这个问题和答案](https://stackoverflow.com/questions/94456/load-a-wpf-bitmapimage-from-a-system-drawing-bitmap)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-09T18:22:50.217

要将图像加载到 WPF 图像控件中，您将需要 System.Windows.Media.ImageSource。

您需要将您的 Drawing.Image 对象转换为 ImageSource 对象：

```
 public static BitmapSource GetImageStream(Image myImage)
    {
        var bitmap = new Bitmap(myImage);
        IntPtr bmpPt = bitmap.GetHbitmap();
        BitmapSource bitmapSource =
         System.Windows.Interop.Imaging.CreateBitmapSourceFromHBitmap(
               bmpPt,
               IntPtr.Zero,
               Int32Rect.Empty,
               BitmapSizeOptions.FromEmptyOptions());

        //freeze bitmapSource and clear memory to avoid memory leaks
        bitmapSource.Freeze();
        DeleteObject(bmpPt);

        return bitmapSource;
    } 
```

DeleteObject 方法的声明。

```
[DllImport("gdi32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
internal static extern bool DeleteObject(IntPtr value); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-03-03T23:14:50.043

如果您使用转换器，您实际上可以绑定到`Image`对象。您只需要创建一个`IValueConverter`将 转换`Image`为`BitmapSource`.

我在转换器中使用了 AlexDrenea 的示例代码来完成实际工作。

```
[ValueConversion(typeof(Image), typeof(BitmapSource))]
public class ImageToBitmapSourceConverter : IValueConverter
{
    [DllImport("gdi32.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    internal static extern bool DeleteObject(IntPtr value);

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value is null || !(value is Image myImage))
        {//ensure provided value is valid image.
            return null;
        }

        if (myImage.Height > Int16.MaxValue || myImage.Width > Int16.MaxValue)
        {//GetHbitmap will fail if either dimension is larger than max short value.
            //Throwing here to reduce cpu and resource usage when error can be detected early.
            throw new ArgumentException($"Cannot convert System.Drawing.Image with either dimension greater than {Int16.MaxValue} to BitmapImage.\nProvided image's dimensions: {myImage.Width}x{myImage.Height}", nameof(value));
        }

        using Bitmap bitmap = new Bitmap(myImage); //ensure Bitmap is disposed of after usefulness is fulfilled.
        IntPtr bmpPt = bitmap.GetHbitmap();
        try
        {
            BitmapSource bitmapSource =
             System.Windows.Interop.Imaging.CreateBitmapSourceFromHBitmap(
                   bmpPt,
                   IntPtr.Zero,
                   Int32Rect.Empty,
                   BitmapSizeOptions.FromEmptyOptions());

            //freeze bitmapSource and clear memory to avoid memory leaks
            bitmapSource.Freeze();
            return bitmapSource;
        }
        finally
        { //done in a finally block to ensure this memory is not leaked regardless of exceptions.
            DeleteObject(bmpPt);
        }
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

在您的 XAML 中，您需要添加转换器。

```
<utils:ImageToBitmapSourceConverter x:Key="ImageConverter"/>

<Image Source="{Binding ThumbSmall, Converter={StaticResource ImageConverter}}"
                   Stretch="None"/> 
```

# c# - Visual Studio 中的文件资源管理器工具？

> ID：10077505
> 
> 赞同：7
> 
> 时间：2012-04-09T18:00:25.197
> 
> 标签：c#, winforms, visual-studio

我有一个使用 Windows 窗体的 C# 项目。我需要让用户输入文本文件的位置，因此他们需要某种方式来浏览文件和文件夹，即打开文件资源管理器的按钮。这将是 Visual Studio 2010 中的什么工具（在工具箱中）？我尝试了 DirectoryEntry 和 DirectorySearcher 但这只是在底部添加了一些东西，如下所示：

![在此处输入图像描述](../Images/37a86d11736a6ee34c50af14f15e8103.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T18:05:27.533

那并没那么简单。您希望文件打开对话框。您必须添加一个按钮，然后在该按钮的处理程序中打开对话框。

```
OpenFileDialog fdlg = new OpenFileDialog();
if(fdlg.ShowDialog() == DialogResult.OK)
{
// do something here with fdlg.FileName ;
} 
```

[来源](http://www.c-sharpcorner.com/UploadFile/mahesh/BrowseorOpenaFile12012005010624AM/BrowseorOpenaFile.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T18:04:34.380

这是对话框部分。寻找 OpenFileDialog 或其他之一（根据您的需要）

![在此处输入图像描述](../Images/28da30d22c3a64e36c4ea33348dfb102.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T18:05:40.030

您也可以使用 OpenFileDialog 组件[http://msdn.microsoft.com/en-us/library/61097ykx.aspx](http://msdn.microsoft.com/en-us/library/61097ykx.aspx)

# php - MySQL PDO 错误：为 BIT 列传递布尔参数时出现“列的数据太长”

> ID：10077508
> 
> 赞同：5
> 
> 时间：2012-04-09T18:00:40.730
> 
> 标签：php, mysql, pdo

我发现的唯一类似问题是：[Insert php boolean into mysql bit column with Zend_Db](https://stackoverflow.com/questions/8752915/insert-php-boolean-into-mysql-bit-column-with-zend-db)但这没有答案。

请看下面的简化测试：

“允许”列类型为 BIT。
'roleID' 列类型是 INT。
“permID”列类型为 INT。

```
$dbo = new PDO("mysql:dbname=database;host=127.0.0.1", "phpuser", "pass");

$query = $dbo->prepare("INSERT INTO ws_role_perms (allow, roleID, permID)
                            VALUES (:allow, :roleID, :permID)");

$query->bindValue("allow", true, PDO::PARAM_BOOL);
$query->bindValue("roleID", 1, PDO::PARAM_STR);
$query->bindValue("permID", 2, PDO::PARAM_STR);

if ($query->execute() == false) {
    throw new Exception(print_r($query->errorInfo(), true));
} 
```

我收到的错误信息是：

```
Array (
    [0] => 22001
    [1] => 1406
    [2] => Data too long for column 'allow' at row 1
) 
```

如果我尝试将等效查询直接放入 MySQL，即通过运行查询：`INSERT INTO ws_role_perms (allow, roleID, permID) VALUES (true, 1, 2)` 我没有问题。

这是 MySQL PDO 驱动程序中的错误，还是只是我？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T18:08:16.220

似乎 PHP 没有将“真”解释为布尔值。[PHP.NET](http://php.net/manual/en/pdo.constants.php)表明 PDO::PARAM_BOOL 是一个整数。[MySQL 对数据类型为 'bit'](http://www.xaprb.com/blog/2006/04/11/bit-values-in-mysql/)的列的解释 在 5.0 版之后发生了变化。这意味着 PHP 可能试图将一个完整的整数（32 位）插入到具有不可预测位数（1-64）的列中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T14:13:32.347

使用 Cast 功能：

```
Values ( CAST( :allow AS UNSIGNED), :roleID, :permID) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-07-05T02:03:43.307

```
$query = $dbConnection->prepare("UPDATE roles SET isTrue= b? WHERE itemID = ?;");
$result = $query->execute(array(true, $productID_GET)); 
```

在变量前使用“b”将任何值转换为位。

就我而言，我也有一个位列，我遇到了同样的错误。我就是这样解决的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-16T14:39:46.733

我启用了`ANSI`和`TRADITIONAL`模式，我必须使用以下构造：

```
IFNULL(IF(?,TRUE,FALSE),NULL) 
```

如果您提供 PHP 'null'，它将将该列设置为 NULL。否则 MySQL 将评估提供的变量。如果它为零，则该列将设置为 FALSE，如果它不为零，则该列将设置为 TRUE。

我希望这有帮助。

# recursion - 查找强连接组件 - 无递归

> ID：10077512
> 
> 赞同：2
> 
> 时间：2012-04-09T18:00:50.003
> 
> 标签：recursion, graph, components

我需要找到有向图的强连通分量。我决定使用 Tarjan 的算法。到目前为止，一切都很好。但是，我需要我的程序操作的数据集是巨大的，并且我得到了 stackoverflow 异常。我无法增加堆栈大小，所以我需要找到另一个解决方案。

我可以将递归算法更改为迭代，但我想知道是否有“更清洁的解决方案”。

我猜不是，但我想在开始实施迭代版本之前确定。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:10:41.150

已知的查找 SCC 的算法都是基于 DFS，它本质上是递归的，所以你基本上有这些选项：

*   与递归共存。不是一个真正的选择，每个节点的递归将很快填满堆栈
*   用迭代重写递归，为 DFS 提供你自己的堆栈。不难，推荐这个
*   发明一种非递归算法。在这种情况下祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-03T16:40:01.780

我也遇到了这个问题，我发现两个解决这个问题的最好方法是将所有代码转移到一个新线程，如下所示：

```
public class Class implements Runnable {
    @Override
    public void run() {
        ...
    }
} 
```

在你的主课中你这样做：

```
public class Main {
    public static void main(String[] args) {
        Thread th = new Thread(null, new Class(), "solution", 32 << 20);
        th.start();
    }
} 

Thread(ThreadGroup group, Runnable target, String name, long stackSize) 
```

第一个参数为null，第二个参数是你想在这个线程上运行的类，第三个参数只是一个名字，它不是很重要，最后一个参数是你想分配给这个线程的堆栈大小，我认为在这个示例堆栈大小为 2^32 字节（我不确定！）

在这里您可以找到更多关于`Thread`Java 的信息：[https ://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html](https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html)

这些例子是用 Java 编写的；您可以在任何其他面向对象的语言中做同样的事情。

# .net - 为什么`Table`成员不能实现底层接口`ITable`成员？

> ID：10077516
> 
> 赞同：1
> 
> 时间：2012-04-09T18:01:05.133
> 
> 标签：.net, linq-to-sql, inheritance, mocking, repository

我正在试验以下可模拟的存储库模式：

```
public interface IEmployeeRepository
{
    ITable<Employee> Employees { get; }
} 
```

这表示一个能够返回一个对象`ITable`的容器。`Employee`我希望能够基于存储库创建一个模拟对象，并让我的 Linq-to-Sql`DataContext`实现存储库接口。所以我想我可以只使用部分类来声明我的`DataContext`类型来实现`IEmployeeRepository`，因为它已经有一个自动生成`Employees`的类型成员`Table<Employee>`：

```
public partial class MyDataContext : IEmployeeRepository { } 
```

结果，我收到以下错误消息：

> “MyDataContext”未实现接口成员“IEmployeeRepository.Employees”。“MyDataContext.Employees”无法实现“IEmployeeRepository.Employees”，因为它没有“System.Data.Linq.ITable”的匹配返回类型。

但是`Table<Employee>`继承`ITable<Employee>`，那么它不应该是一个合适的返回类型来实现接口吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T18:03:57.007

实现类的类型必须与接口类型完全匹配。如果你不能改变接口，你可以显式地实现它：

```
class EmployeeRepository : IEmployeeRepository
{
    // existing property
    public Table<Employee> Employees { get; }

    // explicit IEmployeeRepository property
    ITable<Employee> IEmployeeRepository.Employees { get { return Employees; } }
} 
```

# java - 设置为 Android 4.0 时 Eclipse 无法识别 numberPassword？

> ID：10077518
> 
> 赞同：3
> 
> 时间：2012-04-09T18:01:21.967
> 
> 标签：java, android, xml, eclipse, textview

当我将其设置为“numberPassword”时，Eclipse 编辑器无法识别字段上的 inputType，代码如下：

```
<EditText
    android:id="@+id/pin_field"
    android:layout_width="236dp"
    android:layout_height="wrap_content"
    android:inputType="numberPassword">

    <requestFocus />
</EditText> 
```

这是我在“android:inputType”行中遇到的错误：

```
"error: Error: String types not allowed (at 'inputType' with value 'numberPassword')." 
```

在顶部的“图形布局”选项卡中，我已将版本从 2.3.3 更改为 Android 4.0，我读过它可能会修复它，但它似乎没有用。我可能遗漏了一些明显的东西，但无法弄清楚。

这是 inputType 和“numberPassword”的 Android 文档：http: [//developer.android.com/reference/android/R.attr.html#inputType](http://developer.android.com/reference/android/R.attr.html#inputType)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T04:32:59.990

```
<EditText
    android:id="@+id/pin_field"
    android:layout_width="236dp"
    android:layout_height="wrap_content"
    android:inputType="number"
    android:password="true"
    <requestFocus />
</EditText> 
```

试试上面的代码而不是你的代码

或者您可以通过如下代码动态设置

```
editText.setInputType( InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_VARIATION_PASSWORD); 
```

更新：：通过如下代码集 InputFilter 只接受字母或数字或两者

```
edittext.setFilters(new InputFilter[] {
    new InputFilter() {
        public CharSequence filter(CharSequence src, int start,
                int end, Spanned dst, int dstart, int dend) {
            if(src.equals("")){ // for backspace
                return src;
            }
            if(src.toString().matches("[a-zA-Z0-9 ]+")){
                return src;
            }
            return "";
        }
    }
}); 
```

请彻底测试！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-21T14:32:36.810

Dispake 的评论给了我我需要的线索

> “项目的 Android 构建目标设置为 4.0？”

我在 Manifest 文件中将 minSdk 作为 API 级别 14，它是 4.0 并且正确，这让我无法找到真正的问题。我在 Eclipse 中将项目的构建目标设置为 2.3.3，需要将其更改为 4.0。

# python - 在一个文件中运行 Jython 和 Python

> ID：10077519
> 
> 赞同：6
> 
> 时间：2012-04-09T18:01:25.867
> 
> 标签：python, jython

我使用python开发了一个项目。现在我需要该项目的 gui。所以我选择 jython 作为 gui(java swing)。我还将主题集成到一个代码中（现有项目 + gui(jython) 代码）。当我使用以下命令运行文件时，它会显示语法错误

```
jython project.py 
```

错误：

```
File "project.py", line 33
SyntaxError: 'with' will become a reserved keyword in Python 2.6 
```

第 33 行：

```
32 def _finished_loading(self, view, frame):
33        with open(self._file, 'w') as f: 
```

当我使用 python 命令运行现有项目时，它运行正常。这意味着项目没有问题。我向你保证 gui(jython) 代码和集成也很好。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T18:17:35.947

因为`with`2.5才刚刚出现，所以需要一个`from __future__`import：

```
from __future__ import with_statement 
```

然后你可以使用你的`with`陈述。但是，它不会解决您评论中出现的其他问题...

# html - HTML表单提交——基本前提

> ID：10077523
> 
> 赞同：0
> 
> 时间：2012-04-09T18:01:39.283
> 
> 标签：html, forms

假设我在`http://www.domain.com/page.html`.

我想提交这个表格：

```
<FORM METHOD="post" ACTION="https://DifferentSite.com/processForm.aspx">
....
</FORM> 
```

服务器是否`www.domain.com`真的在任何时候看到了表单中的任何信息？或者，这是否直接来自客户端`DifferentSite.com`？

我问的原因，例如如上所示，表单提交调用了 HTTPS，而我所在的站点只有 HTTP（没有 SSL）。如果 domain.com 服务器确实看到并传输表单信息（即使已加密），它也具有 PCI 合规性影响。

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:05:36.503

发送表单 HTML (www.domain.com) 的服务器将看不到提交的数据。这直接发送到 DifferentSite.com，并使用 DifferentSite.com 的公钥加密，因此 www.domain.com 即使收到数据也无法检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T18:08:37.873

> www.domain.com 上的服务器是否真的在任何时候看到了表单中的任何信息？

本质上不是，但它可以在提交之前用 JavaScript 嗅探它（或更改 URL，因为它是由该站点设置的）。

> 或者，这是否直接从客户直接发送到 DifferentSite.com？

是的

> 我问的原因，例如如上所示，表单提交调用了 HTTPS，而我所在的站点只有 HTTP（没有 SSL）。

中间人攻击可以重写表单以将数据发送到其他地方（或将其复制到其他地方并让提交继续到预期的站点）。

# iphone - 如何更新字典中的所有项目？苹果手机

> ID：10077526
> 
> 赞同：0
> 
> 时间：2012-04-09T18:01:54.743
> 
> 标签：iphone, objective-c, ios, uipickerview

我有一个 uipickerview，它有一个字典作为数据源。
我希望能够更新此选择器视图的每一行，并在最后添加一个数字，我首先尝试更新每一行，但它似乎不起作用。

我向字典中添加一个项目，如下所示：

```
[[dataBundleDictFinal objectForKey:@"BundleDisplayNames"] addObject:@"New row!"]; 
```

“新一排！” 是出现在pickerview中的文本

然后我尝试更新每一行，说“你好”，我尝试这样的事情：

```
for(NSInteger i; i < numofrows; i++) {
    [[dataBundleDictFinal objectForKey:@"BundleDisplayNames"] setObject:@"hello" atIndex:(NSUInteger)i];
} 
```

但这不会改变pickerview，即使我之后重新加载它。更新字典时我做错了什么，还是pickerview有其他问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:38:25.853

看起来循环初始化丢失了：

```
for(NSInteger i=0; i < numofrows; i++) 
```

# php - 使用和使用有什么区别

> ID：10077528
> 
> 赞同：-1
> 
> 时间：2012-04-09T18:01:55.727
> 
> 标签：php

> **可能重复：**
> [PHP 开放标签“<?=”和“<?php”/“<?”有什么区别？](https://stackoverflow.com/questions/3019696/what-is-the-difference-between-the-php-open-tags-and-php)

使用时有什么区别吗

```
<?php
    something;
    something2;
?> 
```

和

```
<?
    something;
    something2;
?> 
```

我看到`<?php ... ?>`的所有地方都在使用。它有什么优点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T18:05:25.710

**不要使用** `<? ... ?>`，你永远不会有问题。

谷歌`php shorthand`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T18:04:18.673

`<?`要求在服务器上启用短标签。它与其他一些指令（例如`<?xml`）冲突。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T18:05:58.557

第二个选项仅在`short_open_tag`启用时才有效。

此外，如果它被启用，那么你就不能在 XML 中使用 php，`<?xml ...>`有时会用到。

# objective-c - 线程顺序执行的问题

> ID：10077531
> 
> 赞同：0
> 
> 时间：2012-04-09T18:02:09.173
> 
> 标签：objective-c, nsthread

我正在使用线程开发应用程序，并且发生了一些奇怪的事情。

我有这些方法：

```
-(void)loadSelectedTest:(int)idTest mustBeSolved:(BOOL)mustBeSolved
{
    NSThread *thread2 = [[NSThread alloc] initWithTarget:self selector:@selector(loadTestAnimation) object:nil];

    [thread2 start];

    [respuestas loadTestQuestions:idTest testWillBeSolved:mustBeSolved];

    [thread2 cancel];
    [thread2 release];

    sleep([progressAnimation animationDelayForAnimationId:lastSelectedAnimationId]);

    [progressAnimation removeFromSuperview];
}
-(void)loadTestAnimation
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    progressAnimation = [[OTTestProgressAnimation alloc] init];    
    progressAnimation.frame = respuestas.view.frame;

    [self.view addSubview:progressAnimation];

    [progressAnimation loadWithAnimationWithId:lastSelectedAnimationId title:lastSelectedTestTitle subtitle:lastSelectedTestSubtitle];

    [progressAnimation release];

    [pool release];

}

-(void)loadSavedTest:(int)idTest mustBeSolved:(BOOL)mustBeSolved
{
    NSThread *thread = [[NSThread alloc] initWithTarget:self selector:@selector(loadTestAnimation) object:nil];

    [thread start];

    [respuestas loadSavedTestQuestions:lastSelectedTestId testWillBeSolved:YES];

    [thread cancel];
    [thread release];

    sleep([progressAnimation animationDelayForAnimationId:lastSelectedAnimationId]);

    [progressAnimation removeFromSuperview];

} 
```

loadSelectedTest 和 loadSavedTest 遵循以下逻辑：

在主线程加载所选项目时打开一个加载进度操作屏幕的线程。

当调用方法 loadSelectedTest 时，一切正常，出现等待屏幕，当测试加载并且睡眠时间结束时，进度屏幕被卸载并且所选测试出现在屏幕中。

但是当调用 loadSavedTest 方法时，首先执行加载并显示测试，然后显示进度屏幕。

为什么在第一种情况下线程顺序正确执行而在第二种情况下没有？

我失去了什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T18:14:46.693

危险！危险！

这根本不是做线程的方法。一点也不。您需要丢弃此代码并重新开始。

首先，您不应该使用`sleep()`“同步”。

其次，您不能`UIKit`从辅助线程中弄脏；你的线程看起来像是在捣乱显示器。您可以执行的操作非常有限。

最后，您几乎再也不想使用`NSThread`了。使用 GCD 队列或 NSOperationQueue。

# c++ - 为 C++ 安装大整数库？

> ID：10077532
> 
> 赞同：-2
> 
> 时间：2012-04-09T18:02:10.857
> 
> 标签：c++

我尝试安装[https://mattmccutchen.net/bigint/](https://mattmccutchen.net/bigint/)，即使我包含所有 .hh 文件，使用 BigIntegers 也会引发未定义的引用错误。

```
[Linker error] undefined reference to `BigInteger::BigInteger(int)'
[Linker error] undefined reference to BigInteger::divideWithRemainder(BigInteger const&, BigInteger&) 
```

我正在使用 DevCPP 并且不想从这里切换（除了 DevCPP 工作之外，其他任何东西都令人头疼）。我也尝试过 GMP，但那是不必要的混乱，我也无法让它发挥作用。

当我尝试编译`.cc`它附带的文件时，我得到了所有相同的链接器错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T18:11:16.413

我不知道 DevCPP 是如何工作的，但您需要做的是从 Matt 的库中复制文件并将它们放在与您的代码 ( ?) 文件`.c`相同的文件夹中。`.cpp`然后你必须编译这些文件，就像编译所有代码一样。那应该可以解决这个问题。这样做的方法是特定于编译器的，但我在这里找到了 DevCPP 的说明：[http](http://www.uniqueness-template.com/devcpp/) ://www.uniqueness-template.com/devcpp/ 显然你需要创建一个“项目”，然后添加你的代码和他的代码给它。这就是您使用多个源文件编写程序的方式，这对于编写几乎任何程序都是绝对必要的知识。

您提到您的演示测试代码有错误的答案，并且代码是

```
BigInteger num = 123456789*123456789*123456789; 
```

这是因为你有整数`123456789`，乘以整数`123456789`（溢出），然后乘以整数`123456789`（再次溢出），*然后*将该结果转换为`BigInteger`. 显然，这是不对的。您的代码应该如下所示：

```
BigInteger first = 123456789; //yes, you can convert from int to BigInteger
BigInteger second = 123456789;
BigInteger third = 123456789;
BigInteger num = first *second *third; 
```

由于您想从 转换`int64_t`为`BigInteger`，因此您必须跳过一个小圈，因为`BigInteger`设计时并未`int64_t`考虑到这一点。所以这里有一个转换函数。

```
BigInteger int64_to_BigInt(int64_t v)
{ return BigInteger(int(v/INT_MAX))*INT_MAX+int(v%INT_MAX);}

int64_t BigInt_to_int64(BigInteger v)
{
    BigInteger bottom;
    v.divideWithRemainder(INT_MAX, bottom);
    return int64_t(v.toInt())*INT_MAX + bottom.toUnsignedInt();
} 
```

# php - PHP：目录之间的会话不一致

> ID：10077533
> 
> 赞同：1
> 
> 时间：2012-04-09T18:02:14.467
> 
> 标签：php, session

编辑：我在另一台服务器上进行了测试，符合我的期望：目录之间的会话。这是 PHP 或 Apache 配置问题。

我还查看了 php.net。有一些方法可以影响 setcookie() 的路径，但我没有看到与 session_start() 类似的东西。

```
****Original Post**** 
```

文件 1：public_html/one_up/session_test.php

```
<?php
session_start();
$_SESSION['testing'] = 'Yup';
print_r($_SESSION); 
```

输出：

```
Array ( [testing] => Yup ) 
```

文件 2：public_html/session_test.php

```
<?php
session_start();
print_r($_SESSION); 
```

输出：

```
Array () 
```

有我不知道的配置吗？据我所知，这是在具有默认配置的专用服务器上。我是唯一一个改变了一切的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T19:24:49.003

[您可以在此处](http://www.php.net/manual/en/session.configuration.php)找到会话配置指令。尝试`phpinfo()`在不同的文件夹中进行调试。

使用函数调用`ini_set('session.save_path', '/tmp/eggs');`来覆盖指令。

# matlab - 在 MATLAB 中生成高斯数据集

> ID：10077535
> 
> 赞同：3
> 
> 时间：2012-04-09T18:02:22.580
> 
> 标签：matlab, dataset

我想生成一个高斯数据集。该数据集包括从四个二维高斯类中随机抽取的总共 800 个样本，分布如下： ![在此处输入图像描述](../Images/1a36fc6e58b31f16834870c44f29602e.png)

我怎么能用 MATLAB 做到这一点。我不是MATLAB专家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T12:13:08.227

以下需要统计工具箱：

```
% The means of the Gaussians
mu    = [-3,0;0,0;3,0;6,0]; 

% The covariance matrix
sigma = [0.5,0.05;0.05,0.5]; 

% The mixing proportions of the Gaussians
p     = [0.25,0.25,0.25,0.25]; 

% Make a Gaussian mixture distribution
myMixtureDistribution = gmdistribution(mu,sigma,p); 

% Draw random samples from the distribution
myDataSample = myMixtureDistribution.random(800); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T18:04:02.103

开始[`randn()`](http://www.mathworks.co.uk/help/techdoc/ref/randn.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T03:48:10.127

我找到了如下答案：（谢谢大家）

```
Sigma=[0.5 0.05; 0.05 0.5];
z=mvnrnd([-3 0],Sigma,200);
x=mvnrnd([0 0],Sigma,200);
c=mvnrnd([3 0 ],Sigma,200);
v=mvnrnd([6 0 ],Sigma,200);
samples=[z; x; c; v];
plot(samples(:,1),samples(:,2),'*'); 
```

# java - 尝试在安卓游戏中添加 AdView

> ID：10077537
> 
> 赞同：0
> 
> 时间：2012-04-09T18:02:25.160
> 
> 标签：java, android, ads, adview

我正在制作一个我想在上面放广告的安卓游戏（免费版本，而不是付费版本），但我无法让它正常工作，它显示一个看起来像广告的矩形，上面写着红色：你必须有 AdActivity使用 configChanges 在 AndroidManifest.xml 中声明。但我明白了。请帮助我，并提前非常感谢！看看我的代码：

AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.mysoftwaremobileapps.ParachuteHunterLite"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="3" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:label="@string/app_name"
        android:name=".ParachutehunterActivity" android:screenOrientation="portrait" android:configChanges="orientation">

        <intent-filter >
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:label="@string/app_name" android:name=".GameScreenActivity" android:screenOrientation="portrait" android:configChanges="orientation"></activity>
    <activity android:name=".playerLostMessageActivity" android:label="@string/app_name" android:screenOrientation="portrait" android:configChanges="orientation"></activity>
    <activity android:name="com.mysoftwaremobileapps.ParachuteHunterLite.SubmitScoreActivity" android:label="@string/app_name" android:screenOrientation="portrait" android:configChanges="orientation"></activity><activity android:name="com.google.ads.AdActivity" android:configChanges="orientation"></activity>
    <activity android:configChanges="keyboard|keyboardHidden|orientation" android:label="@string/app_name" android:name=".AdActivity" android:screenOrientation="portrait"></activity>

    <activity android:configChanges="keyboard|keyboardHidden|orientation" android:name="com.google.ads.AdActivity"><meta-data android:value="Number" android:name="ADMOB_PUBLISHER_ID" /></activity>

</application>

</manifest> 
```

添加 AdView 的代码：

```
 LinearLayout parent = (LinearLayout) findViewById(R.id.MainLayout3);
    AdView ad = new AdView(this, AdSize.BANNER, "a14d91b10f12454");
    parent.addView(ad);
    AdRequest r = new AdRequest();
    ad.loadAd(r); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:16:48.880

对于名称，请尝试

```
android:name="com.google.ads.AddActivity" 
```

如果这不起作用，这里有另一个关于 AdsActivity 的问题可能会有所帮助（这是我得到上述行的地方）：

[让 AdView 真正出现](https://stackoverflow.com/questions/5462937/getting-adview-to-actually-show-up)

# mysql - WEEKOFYEAR() 不是有效的分区函数

> ID：10077538
> 
> 赞同：1
> 
> 时间：2012-04-09T18:02:36.710
> 
> 标签：mysql

我需要按一年中的哪一周对 MySQL 表进行分区。但是，当我使用**weekofyear()**作为分区表达式运行分区查询时，我得到以下信息：

```
ERROR 1564 (HY000): This partition function is not allowed 
```

我查阅了文档，并且 weekofyear() 自 MySQL5.1 以来是一个有效的分区函数。任何帮助或想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-23T18:14:53.750

`weekofyear()`结果取决于 default_week_format 系统变量，因此将其用作分区函数并不安全。自 5.5.9`weekofyear()`以来，已从允许分区的函数中删除。

# django-templates - Django CMS 页面标题不呈现

> ID：10077543
> 
> 赞同：9
> 
> 时间：2012-04-09T18:03:02.747
> 
> 标签：django-templates, django-registration, django-cms

我目前正在开发一个使用 django-registration 和 Django CMS 的项目。当显示实现 django-registration 的页面时，我的页面标题不会呈现。

目前`<title>{% page_attribute page_title %}</title>`在我的所有模板继承的 base.html 中。

在不使用 django-registration 的页面中，标题显示得很好，但 django-registration 显示为`<title></title>`

我的页面都是在 CMS 中创建的，其他一切都正确呈现。如果我在模板中明确设置标题，标题将呈现，但我宁愿在 CMS 中设置它。

registration_form.html 的相关部分如下：

```
{% extends "base.html" %}
{% load cms_tags %}
{% load i18n %}
{% block "html_headers" %}
   <!-- conditional stuff here -->
  <link href="/media/css/forms.css" rel="stylesheet" type="text/css" />
{% endblock %} 
```

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-10T11:34:16.803

`{% page_attribute %}`模板标签仅适用于 CMS 页面。当在由 django-registration 控制的视图中时，它们将不起作用，而是返回一个空字符串（因为 Django 的模板语言不应该在运行时引发异常）。在 django-registration 使用的模板中，需要覆盖 title 标签。

因此，我建议您`<title>{% block title %}{% page_attribute page_title %}{% endblock %}</title>`在基本模板中使用。然后在注册模板中做类似`{% block title %}Registration{% endblock %}`.

# android - 从自定义视图接收日语键盘输入

> ID：10077544
> 
> 赞同：1
> 
> 时间：2012-04-09T18:03:05.227
> 
> 标签：android, unicode, localization

我目前正在开发一种日语语法测验程序，您可以在其中看到一个带有一个或多个空格的日语句子，然后使用日语 IME 输入答案。

例如，会出现这样的问题：彼は勉强＿＿＿＿スポーツ＿よくできる。</p>

然后你会这样填空：彼は勉强もちろんスポーツもよくできる。</p>

因为我想以特殊方式为屏幕上的文本设置动画，所以我放弃了使用简单的 edittext。问题中的每个空白/下划线字符都有自己单独的图像视图，输入光标移动到单击的位置。当按下其中一个图像视图时，它应该会调出带有预测文本的日文罗马字键盘，以便用户可以在必要时输入汉字。

我怎样才能做到这一点，以便当单击图像视图时，它会弹出带有预测文本的日文罗马字键盘？如何捕获用户的按键（在硬键盘或软键盘上）。另外，如果用户没有安装日文罗马字键盘怎么办？（这是绝对必要的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T02:28:25.947

您不能真正强迫用户使用特定的键盘。您可以打开软键盘，如果它碰巧设置为希腊语，这就是用户将看到的。如果他们没有或没有选择日文 IME，他们将无法使用您的应用程序，因此请告诉他们 :)

# c# - C# & SQL Server 2008：如何先使用代码？

> ID：10077550
> 
> 赞同：-3
> 
> 时间：2012-04-09T18:03:16.113
> 
> 标签：c#, sql-server-2008, code-first

我试图在 C# 中实现一个代码优先项目，有人尝试过吗？

谁能举个例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T18:05:09.240

我会建议：

[教程：使用 EF 4.1 编写代码优先](http://codefirst.codeplex.com/)

# java - xml中的聊天布局

> ID：10077553
> 
> 赞同：2
> 
> 时间：2012-04-09T18:03:42.510
> 
> 标签：java, android, xml, chat

如下图 + xml 代码所示，我在 chatting.xml 中创建了这个设计，然后我通过 9-Patch 创建了 2 个气泡图像，但我的问题是：

如何将这些气泡图像作为此 chatting.xml 中聊天文本的背景以及如何添加 ListView 是否重要？

聊天.xml

![聊天](../Images/4bb51b154549b3dadfc5bc295dc38605.png)

聊天.xml

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/frameLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/MidnightBlue"
    android:padding="5dp" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <ScrollView
            android:layout_width="fill_parent"
            android:layout_height="30dip"
            android:layout_weight=".99"
            android:background="@color/LightGray" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:text="TextView" />
        </ScrollView>

        <LinearLayout
            android:id="@+id/linearLayout1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:baselineAligned="true"
            android:orientation="horizontal"
            android:paddingBottom="0dp"
            android:paddingLeft="4dp"
            android:paddingRight="1dp" >

            <EditText
                android:id="@+id/textInput"
                android:layout_width="0dip"
                android:layout_height="40dp"
                android:layout_weight="1" />

            <Button
                android:id="@+id/btnSend"
                android:layout_width="80dp"
                android:layout_height="45dp"
                android:textColor="@color/MidnightBlue" 
                android:text="Send"
                />
        </LinearLayout>
    </LinearLayout>

</FrameLayout> 
```

气泡图：

![在此处输入图像描述](../Images/d0650973332ec1361a3ba12d2ecd2433.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:16:26.537

在 chatting.xml 中为气泡创建一个新的图像视图。将其焦点设置为 false， `android:focusable="false"`您只希望在收到文本时显示气泡。至于列表视图，是的，您需要一个，因为您希望能够格式化对话，为每条消息说一个新行。在 chatting.xml 中创建一个列表视图。列表视图应自动滚动，因此您不需要滚动视图。

# ruby-on-rails - 试图定义一个 select_tag

> ID：10077559
> 
> 赞同：0
> 
> 时间：2012-04-09T18:04:10.000
> 
> 标签：ruby-on-rails

我试图在我的视图中定义一个选择标签。我的观点是这样的：

```
 <div class="field">
<%= f.label :analyst %><br />
<%= select_tag :sub_category_analyst, options_for_select(analyst_names, :selected =>      @sub_category.analyst || 0) %> 
```

我的模型看起来像这样：

```
@@analyst_names = ["", "foo", "bar"]

belongs_to :category
has_many :products

 def analyst_name
    @@analyst_names[analyst.to_i || 0]
  end

 def self.analyst_names
    @@analyst_names
  end 
```

尝试加载页面时的错误是：未定义的局部变量或方法`analyst_names'

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:41:35.037

我不知道你的模型叫什么，所以我`MyModel`现在就叫它。

在您的视图中，您将要替换`analyst_names`为`MyModel.analyst_names`，否则它会认为`analyst_names`是视图中的局部变量，然后找不到该变量。

您可能会从阅读有关范围的信息中受益（有关它的一些链接在[此处](http://www.techotopia.com/index.php/Ruby_Variable_Scope)和[此处](http://marakana.com/bookshelf/ruby_tutorial/scope.html "这里")）。

# c# - 为防止由于添加事件句柄而导致内存泄漏而采取的预防措施

> ID：10077560
> 
> 赞同：8
> 
> 时间：2012-04-09T18:04:10.673
> 
> 标签：c#, events, memory, memory-leaks

我将制作一个 GUI，该 GUI 将动态创建一组控件，并为其分配事件。我需要在运行时添加和删除这些控件。它看起来像这样：

```
FlowLayoutPanel.Controls.Clear();
<< add new controls, assigning Click events with += >> 
```

我听说使用 += 分配事件处理程序会导致内存泄漏（更具体地说，在应用程序退出之前不会释放内存）。我想避免这种情况。我知道我可以编写一些函数，例如[如何从控件中删除所有事件处理程序](https://stackoverflow.com/questions/91778/how-to-remove-all-event-handlers-from-a-control)以查找所有事件处理程序并删除它们，但它看起来非常复杂。

还有其他方法吗？调用 Dispose 是否有助于删除这些事件处理程序？您可以像在 C/C++ 中那样销毁对象以强制释放它们的内存吗？

谢谢！

PS：问题是，我不知道要分离什么事件。我将创建许多标签并向它们添加不同类型的 onclick 事件。当需要清理流布局面板时，无法知道哪个事件处理程序附加到哪个标签。

这是示例代码（_flowLP 是一个 FlowLayoutPanel） - 此 Refresh() 函数在应用程序退出之前运行多次。

```
 private void Refresh()
    {
        Label l;
        Random rnd = new Random();

        // What code should i add here to prevent memory leaks
        _flowLP.Controls.Clear();

        l = new Label();
        l.Text = "1";
        if (rnd.Next(3) == 0) l.Click += Method1;
        if (rnd.Next(3) == 0) l.Click += Method2;
        if (rnd.Next(3) == 0) l.Click += Method3;
        _flowLP.Controls.Add(l);

        l = new Label();
        l.Text = "2";
        if (rnd.Next(3) == 0) l.Click += Method1;
        if (rnd.Next(3) == 0) l.Click += Method2;
        if (rnd.Next(3) == 0) l.Click += Method3;
        _flowLP.Controls.Add(l);

        l = new Label();
        l.Text = "3";
        if (rnd.Next(3) == 0) l.Click += Method1;
        if (rnd.Next(3) == 0) l.Click += Method2;
        if (rnd.Next(3) == 0) l.Click += Method3;
        _flowLP.Controls.Add(l);

        l = new Label();
        l.Text = "4";
        if (rnd.Next(3) == 0) l.Click += Method1;
        if (rnd.Next(3) == 0) l.Click += Method2;
        if (rnd.Next(3) == 0) l.Click += Method3;
        _flowLP.Controls.Add(l);

        l = new Label();
        l.Text = "5";
        if (rnd.Next(3) == 0) l.Click += Method1;
        if (rnd.Next(3) == 0) l.Click += Method2;
        if (rnd.Next(3) == 0) l.Click += Method3;
        _flowLP.Controls.Add(l);

        l = new Label();
        l.Text = "6";
        if (rnd.Next(3) == 0) l.Click += Method1;
        if (rnd.Next(3) == 0) l.Click += Method2;
        if (rnd.Next(3) == 0) l.Click += Method3;
        _flowLP.Controls.Add(l);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T18:06:34.943

当您将寿命较短的事件消费者附加到寿命较长的事件生产者时，这主要是一个问题。如果他们有相似的生活或与我描述的相反，这不是问题。

如果您确实担心这一点，只需使用 -= 从事件中分离。这将删除附件创建的引用，并有助于避免此类内存问题。

编辑：由于评论有点长，我会在这里发布一些跟进。当你附加到一个事件时，你所做的就是在事件提供者上挂一个对你自己的引用。因此，例如，如果您有一个带有 StrikesMidnight 事件的 Clock 类，并且您从一个名为 Bedtime 的类中订阅该事件，那么 Bedtime 的实际机制`clock.StrikesMidnight += this.HandleMidnight;`就是您正在为自己分配时钟引用。就好像时钟有一个对象属性，你说`clock.ObjectProperty = this;`

因此，在 Bedtime 类的生命周期很短并且超出范围的情况下，Bedtime 会出现，在 Clock 上挂起对自身的引用，然后超出范围。问题是，时钟仍然有它的引用，所以即使它超出范围，垃圾收集器也不会收集就寝时间。

……

这就是背景。在您的情况下，您正在创建一个标签并将对您自己的引用附加到它（通过您的“MethodX”处理程序）。调用刷新时，您会清除标签列表（意味着它们超出范围）。它们超出了范围，并且通过 MethodX 处理程序引用了您的类，但那又如何呢？他们有引用并不能阻止他们被 GC'ed。没有人在您的代码中持有对它们的引用，因此 GC 将对它们进行处理并且您不会泄漏内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T19:02:37.367

只要您处理包含表单，垃圾收集器就应该清理所有控件。

订阅控件上的事件不会使控件保持活动状态，因为控件具有对处理委托的引用；委托没有对控件的引用。

事件订阅会阻止控件被清理的情况是，控件中的某些代码订阅了它所包含的表单实例之外的事件。例如，如果自定义组合框订阅了一个事件在静态类上让控件知道何时应更新其选项列表。如果自定义控件没有取消连接此事件，它将在应用程序期间被静态类事件寄存器引用。由于控件将引用其容器（等等），因此整个表单可能会保留在内存中。在这种情况下，控件应在其 Dispose 方法中取消连接事件。订阅静态类或长寿命实例类上的事件应始终引发危险信号，并在不再需要时显式取消连接。

在表单中，只要您的所有事件都连接到表单类或范围由表单实例控制的对象上的实例方法，那么当表单根的对象图退出时，控件将被清理范围。请注意，外部类在不再需要表单后不会保留对表单的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T20:06:15.650

我的第一个建议是不要预先优化。在尝试解决它之前，请确保这是一个问题。

关于 Dispose()：Dispose**只能**用于在对象被垃圾回收之前释放非托管资源。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/system.idisposable.aspx](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)。

为了防止事件处理程序保留对控件的引用，您需要让控件取消订阅它们在创建时订阅的所有事件处理程序。提示：如果您通过 GUI 添加事件处理程序，请调查自动生成的代码以查看在调用之前需要取消订阅的内容`FlowLayoutPanel.Controls.Clear()`。一种干净（-er？）的方法是创建您自己的控件，该控件继承自所需控件并添加一个“Cleanup（）”方法，该方法取消订阅任何已订阅的事件处理程序（您应该知道哪个事件处理程序已被订阅 - 因为您编写了代码或者它是为您生成的）。

# c# - 实体框架、WCF、客户端和对象上下文问题

> ID：10077561
> 
> 赞同：2
> 
> 时间：2012-04-09T18:04:10.840
> 
> 标签：c#, wcf, entity-framework, self-tracking-entities, objectcontext

**应用程序目的：**
我正在创建的应用程序将负责许多流程，但我目前正在构建一个价格馈送器，一种保存这些价格的方法，以及将这些价格发送到客户端应用程序的功能（作为概念证明）。这些价格将映射到称为“安全分析”和“安全价格日志”的实体。这两个实体具有相同的属性，但日志会记录收到的每个价格，其中分析只是保存每种证券的最新数据。

我目前正在尝试确定完成此任务的最有效和最稳定的方式。这方面的要求/要求是：

*   价格出现非常频繁（有时每秒会收到多个价格）
*   客户需要实时数据
*   价格每次进来都需要持久化到数据库

**架构：**
我相信这个应用程序适合 n 层架构。我正在考虑包括的层是（请原谅我对这些的命名）：

*   **实体层：**构建模型的地方
*   **“工厂”：**这将包含我的提要（大约有 10 个）、处理数据的逻辑、将数据转换为实体，并允许向客户公开数据
*   **客户端层：**我想给工厂暴露数据合约，让客户端可以消费工厂内的实时数据。我做了一些研究，我将使用 Pub-Sub 设计模式通过 WCF Web 服务完成这项工作

因此，有了所有这些背景信息和漫无边际的是我的问题：

*   拥有长时间运行的对象上下文有什么缺点？（我一直在读到我不应该这样做，但没有人明确说明原因或给出对我有用的替代方案）
*   如果我不断创建新的上下文，我提取到先前上下文中的数据在新上下文中是否可用？我担心当我向客户推送数据并处理许多新价格时，我会过于频繁地从数据库中提取数据。
*   我目前正在使用自我跟踪实体，并认为它们是此应用程序的正确选择，但如果有人有任何问题或智慧可以提供，我将不胜感激。
*   最后，创建我的“工厂”的最佳项目类型是什么？它将在 IIS 服务器上运行，我希望它接受我的所有数据馈送，并让客户端接受不同的复合（来自多个馈送）数据。我倾向于 WCF 服务应用程序，因为它可以让我轻松派生服务合同，但我不确定这是否是正确的选择。

感谢您对此提供的任何帮助。另外，我为这篇文章的长度道歉，我对实体框架的工作方式以及我应该从哪里开始感到非常迷茫。谢谢！

编辑：感谢大家的回复。我现在必须转移到别的东西上，但我会在本周晚些时候有机会时回顾这些。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T18:56:51.213

你的问题太复杂了。这类问题通常没有令人满意的答案，因为它太开放了，而且还需要对您的需求进行更深入的分析。

关于您的子问题的一些想法：

*   长时间运行的上下文可能是一个重大问题。它有[很多缺点](https://stackoverflow.com/questions/3653009/entity-framework-and-connection-pooling/3653392#3653392)（每个上下文单个共享实例，每个上下文单个共享工作单元，不是线程安全的）所以请确保在您真正选择使用它之前考虑所有这些。如果您将长时间运行的上下文用作单个工作单元，则仍然可以使用它 - 这通常发生在胖客户端中，您的上下文与您的 UI 窗口一样长。
*   不可以。从一个上下文中提取的数据必须手动附加到另一个上下文或再次从数据库加载。它们不会被新的上下文实例自动跟踪，但由于您的下一个问题，尚不清楚您为什么对此感到担忧。
*   STE 有其[优点和缺点](https://stackoverflow.com/questions/6642390/is-it-recommended-to-use-self-tracking-entities-with-wcf-services)。它们可以[解决相当复杂的问题](https://stackoverflow.com/questions/3635071/update-relationships-when-saving-changes-of-ef4-poco-objects/3635326#3635326)，但同时它们将您的客户和服务紧密结合在一起。当您传输对​​象图时，它们还可以显着增加传输的数据量，因为假设的场景是获取对象图并将该图返回服务，即使您只更改了单个关系。[我不是 STEs 的忠实粉丝](https://stackoverflow.com/questions/3814706/self-tracking-entities-vs-poco-entities/3815968#3815968)。
*   Pub-Sub 模式和您的实时数据要求：这是应该使用一些更合适的技术的地方。我以前使用过 JMS（在 .NET 中不直接可用，除非您使用来自某些 JMS 提供商（如 IBM XMS 或 Apache NMS）的 API）/Tibco EMS 和 Tibco Randezvous，如果我将 WCF 中可用的 Pub-Sub 模式与真正的 Pub-Sub 基础架构进行比较， WCF 实现就像一个坏笑话。太复杂、太慢并且有很多陷阱，因为它缺少消息中间件。如果您的应用程序对业务至关重要，您有良好的预算（或使用某些消息传递解决方案的现有企业基础设施）并且您的实时数据要求很严格，您应该研究这些可能性。我还没有尝试过，但 RabbitMQ 也应该提供 Pub-Sub 基础设施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T18:38:40.560

您使用发布/订阅模型的想法很好。但是，您不需要不断提取数据。

您的所有客户都成为听众。新价格出现时的推送事件包括事件参数模型中的价格变化。不确定您是否需要“工厂”模型。

对于实体框架，短命的上下文总是最好的选择。虽然您可以在短时间内创建许多，但框架会从连接池中检索它们。

每个上下文都拥有与数据库的连接，该连接始终被视为稀有资源。您应该在最短的时间内挖掘稀有资源。

当您创建一个新的上下文并传递给您一个对象时，您只需发出一个 Attach 以将该对象重新绑定到上下文。它实际上绑定到对象所在的适当表。

您的 WCF 服务是最好和最高效的方法。但是，您基本上是在编写服务而不是工厂。

对于您的客户：在启动时调用 serviceContext.GetInitialPrices，您将获得当时的所有价格。订阅以获取价格变化

为您的服务：每当价格变化的来源击中您时：创建上下文附加每个价格记录调用 SaveChanges 上下文

```
 Publish changes of the array of prices that have changed. 
```

那么你更大的问题是决定你将使用什么来发布/订阅。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T18:39:42.457

听起来很直截了当，如果您担心进行过多的数据库调用，您将不得不考虑在中间层缓存数据，也可能在客户端缓存数据。

如果您正在考虑使用实体框架，那听起来是个好主意。在我工作的商店里，我们并没有使用微软所有最新的 .net 玩具。一旦我接触到实体框架，我简直不敢相信我的数据层变得多么简单。它将为您自动完成数小时的繁琐、容易出错的数据层编程。

# liferay - Liferay：如何在 Liferay 中使用 RequestDispatcher 重定向到公共页面

> ID：10077564
> 
> 赞同：1
> 
> 时间：2012-04-09T18:04:14.927
> 
> 标签：liferay, liferay-6

我已经定义了一个由我的六个 Portlet 组成的页面，并在`portal-ext.properties`文件中将其配置为我的默认 Lnding 页面。

我有一个用于联系我的数据库的自定义登录页面，一旦用户有效，我将使用 /user/test/home 将他重定向到此页面，并尝试使用`http://localhost:8086/user/test/home`

但这没有用，我继续得到

```
public void doView(RenderRequest request, RenderResponse response)
            throws PortletException, IOException {

        response.setContentType("text/html");

        System.out.println("Inside the doView Method");
        PortletRequestDispatcher dispatcher = null;
        if (this.name.isEmpty()) {
            dispatcher = getPortletContext().getRequestDispatcher(
                    "/WEB-INF/jsp/AllInOne_view.jsp");
        } else {
            request.setAttribute("name", this.name);
            dispatcher = getPortletContext().getRequestDispatcher(
                    "http://localhost:8086/user/test/home");
        }
        this.name = "";
        this.action = "";
        dispatcher.include(request, response);
    }

17:53:47,765 ERROR [render_portlet_jsp:154] java.lang.NullPointerException
    at org.ravi.learning.AllInOne.doView(AllInOne.java:57)
    at javax.portlet.GenericPortlet.doDispatch(GenericPortlet.java:328)
    at javax.portlet.GenericPortlet.render(GenericPortlet.java:233)
    at com.liferay.portlet.FilterChainImpl.doFilter(FilterChainImpl.java:100)
    at com.liferay.portal.kernel.portlet.PortletFilterUtil.doFilter(PortletFilterUtil.java:64)
    at com.liferay.portal.kernel.servlet.PortletServlet.service(PortletServlet.java:93)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304) 
```

AllinOne.java 是我的自定义 GenericPortlet 类 AllInOne.java:57 是

```
 dispatcher.include(request, response); 
```

**此处更新部分**

这是java类

```
package org.ravi.learning;

import java.io.IOException;

import javax.portlet.ActionRequest;
import javax.portlet.ActionResponse;
import javax.portlet.GenericPortlet;
import javax.portlet.PortletException;
import javax.portlet.PortletRequestDispatcher;
import javax.portlet.RenderRequest;
import javax.portlet.RenderResponse;

public class AllInOne extends GenericPortlet {
    String action = "";
    String name = "";

    public void processAction(ActionRequest request, ActionResponse response)
            throws PortletException, IOException {

        System.out.println("Inside the Process Action Method new");

        this.action = request.getParameter("myAction");

        if (this.action.equals("formAction")) {
            this.name = request.getParameter("personName");

        }
        String urlpaths = "http://localhost:8086/user/test/home";
        response.sendRedirect(urlpaths);

    }

    public void doView(RenderRequest request, RenderResponse response)
            throws PortletException, IOException {

        response.setContentType("text/html");

    }

} 
```

作为一个新用户，我不能发布图片，所以请参考此外部链接获取图片

[http://tinypic.com/view.php?pic=a43nlv&s=5](http://tinypic.com/view.php?pic=a43nlv&s=5)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:02:21.073

根据 PortletContext.getRequestDispatcher() 的 jsr168 和 jsr286 文档，

> 路径名必须以斜杠 ( / ) 开头，并被解释为相对于当前上下文根。

所以使用`"http://localhost:8086/user/test/home"`as 参数是错误的。

您可能想要做的是重定向。在 portlet 环境中，您只能在操作请求中使用`ActionResponse.sendRedirect(String)`

# php - Date.parse 的 php 中的日期格式

> ID：10077573
> 
> 赞同：0
> 
> 时间：2012-04-09T18:04:41.590
> 
> 标签：php, jquery

我使用一个名为[Datatables](http://datatables.net)的自定义 jquery 表。它可以自动为您排序列。显然它可以按日期排序，只要它是 Date.parse 可以处理的。

我无法确定 Date.parse 可以处理的格式。目前我用 php 生成一个带有时区偏移的日期：

```
$mydate=date('Y-m-d g:i A',strtotime($utc)+$timezone_offset*60*60); 
```

这将产生如下所示的输出：`2012-04-07 9:58 AM`. 数据表不能很好地排序。Date.parse 可以采用什么格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T02:25:29.790

这种格式似乎得到了正确排序：

```
$mydate = date('d M Y H:i:s',strtotime($utc)+$timezone_offset*60*60); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T18:46:08.827

您可以`U`在日期函数中使用标识符来获取 unix 时间戳（自 Unix 纪元以来的秒数（1970 年 1 月 1 日 00:00:00 GMT））

```
$mydate = date('U', strtotime($utc) + $timezone_offset * 60 * 60); 
```

在 javascript 中，如果您想使用此时间戳，则只需将其乘以 1000，因为 javascript 日期函数需要毫秒格式的 unix 时间戳，而 PHP 使用秒格式的 unix 时间戳

```
new Date(unixtimestamp * 1000); 
```

# sbt - 类型安全堆栈 sbt 试图在 Windows 上下载 scala-compiler.jar

> ID：10077582
> 
> 赞同：1
> 
> 时间：2012-04-09T18:05:34.037
> 
> 标签：sbt, typesafe-stack

我安装了类型安全堆栈。然后打开 cmd（我在 windows 7 64bit 上）输入 sbt sbt-version 就像他们在说明中说的那样

它启动但挂起尝试从 maven 下载编译器。这是它的样子：

C:\Users\nir>sbt sbt-version Getting Scala 2.9.1 (for sbt)... 下载[http://repo1.maven.org/maven2/org/scala-lang/scala-compiler/2.9.1/ scala-compiler-2.9.1.jar](http://repo1.maven.org/maven2/org/scala-lang/scala-compiler/2.9.1/scala-compiler-2.9.1.jar) ...

很长一段时间后，它会返回有关下载失败的错误以及有关代理配置不正确的错误。如果我尝试从浏览器下载文件，它下载就好了。

在任何地方都找不到解决方案。已经用 typesafe 开了一张票。有人知道如何解决这个问题吗？tnx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:40:52.937

好的，我得到了 typesafe 人员的一些支持。某些东西阻止了 java.exe 访问互联网。通过关闭防火墙和防病毒解决。运行编译一次后，您可以将 target\staged 目录复制到一边，然后在其他项目中使用它来离线运行 sbt。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T22:44:54.233

以供参考。

我也有同样的问题。

**简单的解决方案：**

*   如果您有 AVG，请禁用它！如果您安装并运行了 AVG，它就不起作用！
*   禁用 Windows 防火墙（开始 -> 控制面板 -> Windows 防火墙）并禁用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-10T13:10:17.083

我在 SBT 下载 scala-compiler 时遇到了同样的问题，关闭防病毒和防火墙解决了这个问题。

# java - 在 View 中保留 Controller 的引用或使用侦听器

> ID：10077584
> 
> 赞同：0
> 
> 时间：2012-04-09T18:05:38.190
> 
> 标签：java, model-view-controller, design-patterns

我正在阅读一篇关于使用 Java 的 Model-View-Controller (MVC) 的开创性文章（这里的很多人在讨论 MVC 时已经提到过它）。

[http://www.oracle.com/technetwork/articles/javase/mvc-136693.html](http://www.oracle.com/technetwork/articles/javase/mvc-136693.html)

基本上，它呈现了一个修改后的 MVC 流程，模型向控制器发送通知（而不是视图，如传统方式）。然后控制器将通知传递给 View 以进行界面更新，或者解释用户交互的命令并发送回 Model。

我对控制器和视图协同工作的方式有疑问。在这篇文章中，作者在他的两个View中都保留了对Controller的引用，并在这些View中直接调用了Controller的方法。我想知道它背后的理性。为什么他没有在Controller中实现一些ActionListeners，让Views中的交互widgets向这些监听器发送信号呢？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T19:29:14.857

这是一个耦合问题。

如果您的视图引用了它的控制器，则它与控制器耦合。如果您不希望您的视图使用不同的控制器，您会这样做。通过直接访问，可以更轻松地遵循各种代码路径。

如果你实现了一个动作监听器模式，你就是在解耦视图和控制器。视图和控制器可以独立存在，您可能会为同一个视图使用不同的控制器。

# android - 扩展的 GridViewAdapter

> ID：10077588
> 
> 赞同：0
> 
> 时间：2012-04-09T18:05:57.550
> 
> 标签：android, android-layout

我已经覆盖了我的自定义 BaseAdapter 的方法 getView 来填充 Gridview：

```
public View getView(int position, View convertView, ViewGroup parent) {
    RelativeLayout relativeLayout;

    if(convertView == null){            
        relativeLayout = (RelativeLayout)getItem(position);
    } else{
        relativeLayout = (RelativeLayout)convertView;
    }

    return relativeLayout;
} 
```

但是一直以来，我都得到了这个异常，但我不明白为什么会得到它... getItem(position) 应该返回一个 Rectangle，它是一个自定义的 RelativeLayout。你能帮我么？

```
java.lang.ClassCastException: android.widget.RelativeLayout$LayoutParams 
```

编辑：

我已经有一个自定义的 RelativeLayout，如下所示：

在我的getView中，我得到了我在arraylist中的这些矩形之一。这不是吗？

```
public class Rectangle extends RelativeLayout{

public Rectangle(Context context, int dnd_drag_button_while_dragging, String text) {
    super(context);
    this.context = context;

    LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);        

    this.setLayoutParams(params);

    ImageView image = new ImageView(context);
    image.setBackgroundResource(dnd_drag_button_while_dragging);
    image.setLayoutParams(params);

    img = dnd_drag_button_while_dragging;
    LayoutParams tParams = new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
    tParams.addRule(RelativeLayout.CENTER_IN_PARENT, RelativeLayout.TRUE);

    TextView textView = new TextView(context);
    textView.setText(text); 
    textView.setLayoutParams(tParams);

    this.addView(image);
    this.addView(textView);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T19:33:29.767

不要调用 getItem() 来创建您的 RelativeLayout。相反，您应该扩展 XML 布局或以编程方式创建 RelativeLayout。有关如何以编程方式在 getView() 中创建视图的示例，请参阅[GridView 教程。](http://developer.android.com/resources/tutorials/views/hello-gridview.html)这个[stackoverflow答案](https://stackoverflow.com/a/9481202/268156)有一个在getView()中膨胀资源的例子。

# javascript - 使用 jquery 或 JS 填充 Html.DropDownList

> ID：10077596
> 
> 赞同：1
> 
> 时间：2012-04-09T18:06:29.733
> 
> 标签：javascript, jquery

这是我所拥有的：

```
for (i = 0; i < data.length; i++) {
                $("#myDropDownLisTId").find('tbody')  
                .append($('<option>').attr('value', data[i].id).attr('name', data[i].name)
                );               
            } 
```

但下拉列表始终保持不变。为什么这不起作用？数据变量具有漂亮的值。另外，我想在for循环之前清空下拉列表/怎么做？

这是我在视图中的下拉列表：

```
<%= Html.DropDownList("myDropDownLisTId")%> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T18:23:29.797

尽管其他答案将完成您希望做的事情，但我建议您将选项 HTML 写入字符串变量并在循环完成后附加它，而不是在循环中附加。当您的列表变长时，这可能会带来一些明显的性能优势。Using`.html()`还将负责每次清空列表。

```
 var tempList = '';
        for (i = 0; i < data.length; i++) {  
            tempList += '<option value="' + data[i].id + '" name="' + data[i].name +'">' + data[i].text + '</option>';            
        }
        $("#myDropDownLisTId").html(tempList); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T18:11:23.507

试试这个。

```
$.each(data, function() {
   $("#myDropDownLisTId").append($("<option />").val(this.id).text(this.Text));
 }); 
```

查看我的[这个答案](https://stackoverflow.com/a/10073255/40521)以获取有关如何从 MVC 操作获取数据以加载下拉列表的更多详细信息

**编辑：**根据评论删除现有数据

```
$("#myDropDownLisTId").empty()
$.each(data, function() {
   $("#myDropDownLisTId").append($("<option />").val(this.id).text(this.Text));
 }); 
```

**编辑 2：**  [Idrumsgood](https://stackoverflow.com/users/142929/idrumgood)的回答有一个很好的观点。而不是每次在循环内调用 append 方法，只需将值保存在变量中并仅调用 html 方法一次。

[http://www.learningjquery.com/2009/03/43439-reasons-to-use-append-correctly](http://www.learningjquery.com/2009/03/43439-reasons-to-use-append-correctly)

```
var items=""
$.each(data, function() {
   items+="<option value='" + this.id + "'>" + this.Text + "</option>";
 });
$("#myDropDownLisTId").html(items); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T18:16:02.293

这似乎有效：http: [//jsfiddle.net/ykFJd/2/](http://jsfiddle.net/ykFJd/2/)

JS

```
var data = [
    {id:'0', name:'test 0'},  
    {id:'1', name:'test 1'},
    {id:'2', name:'test 2'},
    {id:'3', name:'test 3'},
    {id:'4', name:'test 4'},    
];

for (var i = 0; i < data.length; i++) {
    $("#myDropDownLisTId").append(
        $('<option />', {
            'value': data[i].id,
            'name': data[i].name,
            'text': data[i].name
        })
    );               
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T18:19:03.547

我编写了一个很好的函数来将 js 哈希绑定到选择列表。[在使用 JQuery / Json 填充选择列表的最佳方式中](https://stackoverflow.com/questions/9995017/best-way-to-populate-select-list-with-jquery-json/9995132#9995132)查看我的答案？

示例用法：

```
// you can easily pass in response.d from an AJAX call if it's JSON formatted
var users = [ {id: 1, name: 'Alice'}, {id: 2, name: 'Bob'}, {id: 3, name: 'Cindy'} ]
setSelectOptions($('#selectList'), users, 'id', 'name'); 
```

# facebook - 如何将照片发布到 Facebook 群组？

> ID：10077598
> 
> 赞同：0
> 
> 时间：2012-04-09T18:06:35.930
> 
> 标签：facebook, facebook-graph-api, facebook-c#-sdk, facebook-opengraph

我需要将图片发布到群组，并且我希望图片仅对群组中的人可见？

看起来有错误或其他东西，不可能只发布到组照片： [http ://bugs.developers.facebook.net/show_bug.cgi?id=19157](http://bugs.developers.facebook.net/show_bug.cgi?id=19157)

有解决方法吗？如果我不能上传“到群”，我该如何模拟它，以便只有群里的人才能看到我发布的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T06:33:34.173

嘎。弄清楚了。

将照片上传到相册或用户照片时起作用的 no_story 标志会导致在发布到群组时调用失败。上帝。我讨厌 FB 文档...

解决方案：发布到 /group_id/photos （这是无证的.. yey）和 W/Othe no_story 标志。

# powershell - 通过Powershell PSSession调用invoke-wmimethod而不是远程机器上的管理员？

> ID：10077602
> 
> 赞同：1
> 
> 时间：2012-04-09T18:06:51.870
> 
> 标签：powershell, admin

我需要在远程机器上执行批处理文件，其中正在执行的批处理文件驻留在远程文件共享上。假设我的 ID 在远程计算机上是管理员，我已经能够在 Powershell 中使用 CredSSP 身份验证来执行此操作，但是一旦我删除了管理员访问权限，我就会得到以下信息：

*拒绝访问
+ CategoryInfo : InvalidOperation: (:) [Invoke-WmiMethod], ManagementException
+ FullyQualifiedErrorId : InvokeWMIManagementException,Microsoft.PowerShell.Commands.InvokeWmiMethod*

我已尝试按照此处的建议启用我的 ID 对 Microsoft.Powershell 的完全控制权，但没有运气：http: [//blogs.msdn.com/b/powershell/archive/2009/11/23/you-don-t-必须成为管理员才能运行远程 powershell-commands.aspx](http://blogs.msdn.com/b/powershell/archive/2009/11/23/you-don-t-have-to-be-an-administrator-to-run-remote-powershell-commands.aspx)

我正在运行的命令：

```
$s = New-PSSession -computerName $remoteMachine -Credential $cred -Authentication CredSSP

Invoke-Command -Session $s -Scriptblock {param($remoteBatchFile) invoke-wmimethod -path win32_process -name create -argumentlist $remoteBatchFile} -ArgumentList $remoteBatchFile

Remove-PSSession $s 
```

有关如何解决安全错误的任何建议？我确实有要求从网络位置运行批处理文件，并且 ID 在任何一台机器上都不是管理员。任何建议将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T20:07:37.340

您正面临可怕的第二跳问题。在 PowerShell 远程会话中，如果不重新进行身份验证，您将无法跳转或轻松引用其他网络资源。使用 CredSSP 是解决此问题的一种方法。我使用的另一种方法是在您的远程会话中添加一个 NET USE 命令来临时将驱动器映射到远程计算机，并指定用户名和密码。

# ruby-on-rails - Rails 3.2 在开发模式下具有许多样式表资产 => IE HTC 行为错误

> ID：10077605
> 
> 赞同：2
> 
> 时间：2012-04-09T18:07:07.673
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, asset-pipeline

我正在 Rails 3.2 中开发一个新的 Web 应用程序。我已经到了尝试使 IE 中的所有内容看起来像 Firefox/Chrome 等一样好的地步。

为此，我正在使用 CSS3 PIE [http://css3pie.com/](http://css3pie.com/)

然而：由于样式表被分割成许多小文件，我现在有 64 个样式表文件要在开发模式下加载。当 css3pie.htc 尝试动态创建新的 styleshhet 时，这会在 IE 中产生问题。IE 仅支持 31 个并发样式表。

有没有办法让 Rails 总是将所有样式表连接到 application.css 中？开发中。

**更新 2012-04-11：**我试图在我的开发机器上调用“rake assets:precompile”。但是仍然没有使用预编译的样式表。似乎我需要更改一些配置值，但我不知道是哪个。

卡斯滕

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:06:41.350

听起来您的资产管道处于调试模式，因此您需要将其关闭。您应该有一个`<AppDir>/config/environments/development.rb`文件。在该文件中，尝试找到以下行。

```
ServerPrototype::Application.configure do
    ...
    config.assets.debug = true
    ...
end 
```

尝试将该值设置为`false`（如果该行不在文件中，请继续添加它的值`false`）。这将导致资产管道将所有资产编译到**每个清单的单个文件中**

如果这不能解决问题，您可能需要重组清单文件。我已经通读了关于[资产管道的这一部分：清单和指令](http://guides.rubyonrails.org/asset_pipeline.html#manifest-files-and-directives)，以了解清单是如何使用和编译的。

如果需要，您还可以通过将以下设置添加/更改为 true 来打开压缩：

```
config.assets.compress = true 
```

请注意，如果您使用自定义压缩器，您还需要添加这些定义：

```
config.assets.css_compressor = :foo_compressor
config.assets.css_compressor = :bar_compressor 
```

资产管道配置选项的完整列表可以在 Rails[指南文档中找到关于配置 Rails 应用程序：配置](http://guides.rubyonrails.org/configuring.html#configuring-assets)资产。

> `config.assets.compress`启用压缩已编译资产的标志。它在 中明确设置为 true `config/production.rb`。
> 
> `config.assets.debug`禁用资产的串联和压缩。中默认设置为 false `config/development.rb`。

# javascript - 检查是否允许地理定位并获取 Lat Lon

> ID：10077606
> 
> 赞同：17
> 
> 时间：2012-04-09T18:07:12.853
> 
> 标签：javascript, w3c-geolocation

我正在构建一个小脚本，客户将安装在他们的页面上。地理定位对它来说不是必需的，但是如果它存在，那就太好了。有没有办法让我检查客户页面是否已请求地理位置信息，以及用户是否选择允许在不创建另一个提示的情况下获取纬度和经度？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2016-02-25T13:22:13.567

使用地理定位 API 是不可能的，但是使用新的权限 API 是可能的

如果您想尝试接收坐标但不想通过提示对话框打扰用户，则此代码很有用，因为坐标并不那么重要，不妨回退到 geoIP

```
function getCoords() {
  return new Promise((resolve, reject) =>
    navigator.permissions ?

      // Permission API is implemented
      navigator.permissions.query({
        name: 'geolocation'
      }).then(permission =>
        // is geolocation granted?
        permission.state === "granted"
          ? navigator.geolocation.getCurrentPosition(pos => resolve(pos.coords)) 
          : resolve(null)
      ) :

    // Permission API was not implemented
    reject(new Error("Permission API is not supported"))
  )
}

getCoords().then(coords => console.log(coords))
```

如果未授予权限，这将解析为 null，如果浏览器不支持某些 JavaScript 代码，则抛出错误，如果已被授予，则解析为坐标

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-09T18:10:44.000

您可以通过检查窗口对象来检测该功能是否存在。

```
if ('geolocation' in navigator) {
     navigator.geolocation.getCurrentPosition(...);
} 
```

这将导致出现单个用户提示，询问用户是否希望与您的页面共享其位置。

如果地理定位在浏览器中不可用，则根本不会运行。

* * *

**编辑** 如果您已经在此 *页面加载* 上提示用户允许地理定位访问，它不会再次提示您。如果用户离开并返回此页面，它将重新提示他们。

在该页面会话期间，您可以在不提示的情况下对 API 进行后续调用。

参考：[MDN Geolocation -- 查看当前位置](https://developer.mozilla.org/En/Using_geolocation)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-05-03T09:43:01.607

我也遇到了同样的问题。而且，经过我的搜索和实验，我终于找到了答案。

您可以添加此 JS 代码：

```
navigator.permissions.query({name:'geolocation'}).then(function(result) {
  // Will return ['granted', 'prompt', 'denied']
  console.log(result.state);
}); 
```

然后，您可以根据需要使用您的自定义代码。

来源：[https ://developer.mozilla.org/en-US/docs/Web/API/Navigator/permissions](https://developer.mozilla.org/en-US/docs/Web/API/Navigator/permissions)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-09T18:16:31.093

~~根据[API](http://www.w3.org/TR/geolocation-API/)，不可能找出用户已经允许当前站点检索用户的位置，而不会在他没有提示的情况下得到提示。~~看到无尽的[答案](https://stackoverflow.com/a/35628523/1008999)

我建议您在嵌入脚本时允许用户传递一个参数，告诉它是否应该使用地理定位功能。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-03T23:11:53.367

是否提示您似乎取决于浏览器以及它的“隐私”设置。Safari 6 有 3 种设置：每个站点提示一次、每天每个站点提示一次和拒绝。Chrome 23 有 3 种设置：全部允许、询问和全部拒绝。如果有一种方法可以在不打扰用户的情况下检查它是否已经被允许，那肯定会好起来的。

# python - 在 OS-X 上以交互模式在 python 中键入 utf-8 字符

> ID：10077609
> 
> 赞同：5
> 
> 时间：2012-04-09T18:07:28.453
> 
> 标签：python, macos, unicode

我正在尝试以交互模式将一些西班牙语字符输入字符串。例如，`option+e e`要产生 'é' 以便我做出类似 的声明`string="él"`。这在终端中有效，但在 python（我安装的任何版本，我有几个）中却没有。它根本不产生任何东西。这包括尝试粘贴字符。这正是这个问题中描述的[问题](https://stackoverflow.com/questions/2718491/why-cant-i-display-a-unicode-character-in-the-python-interpreter-on-mac-os-x-te)，特别是关于粘贴的部分和他对亚历克斯问题的评论，他指出亚历克斯的回答没有解决关于 utf-8 字符的复制/粘贴失败的问题。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T21:01:53.883

Python 用于读取交互式输入的`readline`库不接受终端发送的非 ASCII 字符。这意味着您的终端仿真器不提供 UTF-8 编码的字符，或者 readline 未配置为接受 UTF-8 输入。

幸运的是，许多流行的程序都使用了 readline，包括`bash`shell，因此有很多信息可以让它工作。例如，[从这篇文章](http://hints.macworld.com/article.php?story=20060825071728278)：

> **如何让 UTF-8 输入正常工作？**
> 
> *   在终端检查器中：
>     *   在 Emulation 部分中，关闭 Escape non-ASCII characters 选项。
>     *   在显示部分中，选择 Unicode (UTF-8) 作为字符集编码。
> *   将以下行添加到您的`.profile:`
>     
>     
>     
>     ```
>     export LC_CTYPE=en_US.UTF-8 
>     ```
>     
>     
> *   将以下行添加到您的`.inputrc`:
>     
>     
>     
>     ```
>     set meta-flag on
>     set input-meta on
>     set output-meta on
>     set convert-meta off 
>     ```
>     
>     
> *   `source ~/.profile`通过执行 a和 a来应用更改`source ~/.inputrc`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T18:11:26.100

在字符串文字之前使用`u`，使其成为 unicode 字符串。

```
string = u"El avión cayó del cielo" 
```

如果这不起作用，则问题出在您的编辑器或终端中，在这种情况下，请尝试添加

```
#coding: utf8 
```

在 python 程序的前两行中的任何一行中，并使用支持 unicode 的适当编辑器。

# css - 从孩子身高扩展父母的问题。身体不会100%高度。多列

> ID：10077616
> 
> 赞同：0
> 
> 时间：2012-04-09T18:07:57.477
> 
> 标签：css, html, height, overflow

列布局和我的 css 有真正的问题。我已经尝试了所有的技巧，但现在有用。请看这里。代码从第 419 行开始。

[http://justpost.me/lcc/](http://justpost.me/lcc/)

“mainBody”和“sidebar”都不会扩展它们的父级（body）。

本质上，“主体”没有扩展到 100% 的视口。

*   试过清除修复
*   尝试溢出隐藏
*   尝试清除两个 div
*   尝试了额外的包装器/ div

谢谢你的帮助，

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T09:15:38.810

几乎回答了我自己的问题。我删除了正文样式表顶部的一些附加代码。现在身体在膨胀。

但是，“mainNav”的大小不适合高度。

已经固定到一个很好的标准和一个固定的位置。

# ajax - 如何在 drupal 7 中组织 ajax 搜索

> ID：10077617
> 
> 赞同：2
> 
> 时间：2012-04-09T18:07:59.327
> 
> 标签：ajax, drupal, search, drupal-7, drupal-views

我需要帮助在 Drupal 7 中使用视图 3 模块组织搜索页面。我有自定义内容类型，其中包含许多内容字段，当然我有一个效果很好的视图。但我还需要搜索块来使用它。以下是它的工作原理：左侧边栏将具有带有搜索参数的 ajax 表单右侧边栏将具有与我的视图相关的动态块因此，当用户在块中选择任何参数时 - 视图会动态更新。我尝试使用上下文过滤器，但它仅部分起作用，因为它不进行比较操作并且仅在页面重新加载时起作用。

请帮助我提供有关如何组织这些东西的任何建议。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-13T00:51:20.037

您可以通过添加“搜索：搜索词”过滤器、编辑该过滤器的设置并选中“向访问者公开此过滤器，以允许他们更改它”来做到这一点。

[![在此处输入图像描述](../Images/e906e96ea57c7e2981ac51176dace99f.png)](https://i.stack.imgur.com/e8hoZ.png)

然后在“高级”>“其他”下，将“使用 AJAX”更改为“是”。那应该给你基本的设置。

您还可以使用“高级”>“块中的公开形式”下的设置为您提供具有公开形式的块，然后您可以使用块配置页面定位该块。

# c#-4.0 - 将我的列表存储在 C# 中的数据类型

> ID：10077618
> 
> 赞同：0
> 
> 时间：2012-04-09T18:07:59.997
> 
> 标签：c#-4.0

我有两组，一组是设计师，一组是经理。每个设计师都将其经理的 ID 存储在他的个人资料中。

我想遍历经理列表并让所有设计师为他们工作。

我的问题是需要以特殊方式访问设计师个人资料数据，我不想创建一个完整的笛卡尔产品。所以我想的是创建一个数据类型来存储用户名（字符串）和经理 ID（整数），我可以快速访问和查找。

对于这种查找功能，您会推荐什么数据类型？

**编辑：**我不能改变任何类的结构。不是经理，也不是设计师。我想要一些类似于`SomeTypeLikeDictionary<int, string>`int 是经理的 ID 和 string 是设计师的全名的东西。我想把它放在适合查找的集合类型中。示例：现在我正在查找为经理 ID 10 工作的所有设计师的姓名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T22:59:04.617

使用 Chris Shain 的假定类型：

```
public class Designer { 
    public Int32 DesignerId { get; set; } 
    public Int32 ManagerId { get; set; } 
    public String DesignerName { get; set; } 
} 
```

并且，假设您有一个`designers`代表所有设计师的集合，您可以为此使用 linq：

```
Dictionary<int, IEnumerable<Designer>> designerLookup = designers
    .GroupBy(designer => designer.ManagerId)
    .ToDictionary(group => group.Key); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T18:33:57.117

根据上面的评论，我将假设以下内容：

```
public class Manager {
    public Int32 ManagerId { get; set; }
    public String ManagerName { get; set; }
}

public class Designer {
    public Int32 DesignerId { get; set; }
    public Int32 ManagerId { get; set; }
    public String DesignerName { get; set; }
} 
```

假设给定设计师的经理是静态的，我将修改经理类：

```
public class Manager {
    private List<Designer> _designers = new List<Designer>();
    public Int32 ManagerId { get; set; }
    public String ManagerName { get; set; }
    public IList<Designer> Designers { get { return _designers; } }
} 
```

然后将管理器存储在[KeyedCollection](http://msdn.microsoft.com/en-us/library/ms132438.aspx)的子类中：

```
using System.Collections.ObjectModel;
public class ManagerList : KeyedCollection<Int32, Manager> {
    protected override int GetKeyForItem(Manager item)
    {
        return item.ManagerId;
    }
}

// Somewhere else
var managerList = new ManagerList();
var someManager = new Manager { ManagerId = 1, ManagerName="Bill Lundberg" };
managerList.Add(someManager);

foreach (var designer in myDesigners)
    managerList[designer.ManagerId].Designers.Add(designer); 
```

当然，这一切都没有考虑到设计师管理方面的任何变化。这就是我问的原因:-)

# java - 如何在 ant 文件中设置类路径以执行 Java 程序并包含外部 jar？

> ID：10077620
> 
> 赞同：1
> 
> 时间：2012-04-09T18:08:10.650
> 
> 标签：java, ant, jar, classpath, execute

我找到了有关如何设置类路径以便可以执行 Java 程序或包含外部 jar 的示例，但不能同时包含两者。我尝试将多个示例合并到一个文件中失败了。

我的源 .java 文件在 src 目录中，我要执行的文件是 src/TEDI.java，类文件被正确放入构建目录，我所有的 jar 都在目录 jung2-2_0_1 中。我可以使用以下 ant 文件编译我的程序，但不能执行：

```
<?xml version="1.0"?>
<project name="TEDI" basedir="." default="execute">
    <property name="src" value="src"/>
    <property name="output" value="build"/>
    <property name="lib" value="jung2-2_0_1"/>

    <target name="execute" depends="compile">
        <echo>
            Executing TEDI.
        </echo>
        <java classname="${output}/TEDI.class">
            <classpath refid="java"/>
        </java>
    </target>

    <target name="compile" depends="create">
        <echo>
            Compiling source files.
        </echo>
        <javac destdir="${output}">            
            <src path="${src}"/>            
            <classpath refid="java"/>
        </javac>
    </target>

    <target name="clean">
        <echo>
            Deleting old class files.
        </echo>
        <delete dir="${output}"/>
    </target>

    <target name="create" depends="clean">
        <echo>
            Creating output directory.
        </echo>
        <mkdir dir="${output}"/>
    </target>

    <path id="java">
        <pathelement location="${output}"/>
        <fileset dir="${lib}">
            <include name="*.jar"/>
        </fileset>
    </path>
</project> 
```

当我运行 ant 时，它会很好地完成清理、创建和编译目标，然后当它开始执行时，它会说：`Could not find build/TEDI.class. Make sure you have it in your classpath`

无论如何，我希望有人能告诉我我在该`path`部分做错了什么。在阅读了一个关于如何创建 ant 目标以执行文件的示例后，我添加了`pathelement`一点，但它根本没有帮助。有很多示例，其中很多示例以不同的方式实现相同的目标（虽然没有一个完全符合我的目标），所以我不知道哪种方法适合我正在尝试的方法去做。任何帮助或想法将不胜感激。

编辑：根据 Sandro 的回答更改`<pathelement location="${build}"/>`为`<pathelement location="${output}"/>`，但它根本不会更改错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T19:45:20.633

该`java`任务需要一个 Java 类名，而不是类文件的路径。所以你应该使用

```
 <java classname="TEDI"> 
```

代替

```
 <java classname="${output}/TEDI.class"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T18:13:24.820

由于您要执行的类似乎在 中`${output}`，因此您必须包含`${output}`在您的类路径中。

尝试添加`<pathelement location="${output}"/>`到您的路径。

# spring - 在 Spring Security 3.05 中配置并发时出错

> ID：10077621
> 
> 赞同：1
> 
> 时间：2012-04-09T18:08:12.497
> 
> 标签：spring, security, spring-security

在 Spring Security 3.05 中配置并发时出现以下错误。我正在使用 Tomcat 7。我已按照 Spring Security 文档进行操作，但无法理解为什么会出现此错误。

```
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.filterChainProxy': Cannot resolve reference to bean 'concurrencyFilter' while setting bean property 'filterChainMap' with key [/**] with key [0]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'concurrencyFilter' defined in ServletContext resource [/WEB-INF/applicationContext-security.xml]: Initialization of bean failed; nested exception is org.springframework.beans.ConversionNotSupportedException: Failed to convert property value of type 'java.lang.String' to required type 'org.springframework.security.core.session.SessionRegistry' for property 'sessionRegistry'; nested exception is java.lang.IllegalStateException: Cannot convert value of type [java.lang.String] to required type [org.springframework.security.core.session.SessionRegistry] for property 'sessionRegistry': no matching editors or conversion strategy found
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveManagedList(BeanDefinitionValueResolver.java:353)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:153)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveManagedMap(BeanDefinitionValueResolver.java:378)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:161)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1325)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4723)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5226)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5221)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'concurrencyFilter' defined in ServletContext resource [/WEB-INF/applicationContext-security.xml]: Initialization of bean failed; nested exception is org.springframework.beans.ConversionNotSupportedException: Failed to convert property value of type 'java.lang.String' to required type 'org.springframework.security.core.session.SessionRegistry' for property 'sessionRegistry'; nested exception is java.lang.IllegalStateException: Cannot convert value of type [java.lang.String] to required type [org.springframework.security.core.session.SessionRegistry] for property 'sessionRegistry': no matching editors or conversion strategy found
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    ... 27 more
Caused by: org.springframework.beans.ConversionNotSupportedException: Failed to convert property value of type 'java.lang.String' to required type 'org.springframework.security.core.session.SessionRegistry' for property 'sessionRegistry'; nested exception is java.lang.IllegalStateException: Cannot convert value of type [java.lang.String] to required type [org.springframework.security.core.session.SessionRegistry] for property 'sessionRegistry': no matching editors or conversion strategy found
    at org.springframework.beans.BeanWrapperImpl.convertIfNecessary(BeanWrapperImpl.java:481)
    at org.springframework.beans.BeanWrapperImpl.convertForProperty(BeanWrapperImpl.java:518)
    at org.springframework.beans.BeanWrapperImpl.convertForProperty(BeanWrapperImpl.java:512)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.convertForProperty(AbstractAutowireCapableBeanFactory.java:1371)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1330)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    ... 33 more
Caused by: java.lang.IllegalStateException: Cannot convert value of type [java.lang.String] to required type [org.springframework.security.core.session.SessionRegistry] for property 'sessionRegistry': no matching editors or conversion strategy found
    at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:233)
    at org.springframework.beans.BeanWrapperImpl.convertIfNecessary(BeanWrapperImpl.java:466)
    ... 39 more 
```

这是我的弹簧安全配置文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
  xmlns:beans="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/security
           http://www.springframework.org/schema/security/spring-security-3.0.xsd">

    <http auto-config="false" use-expressions="true"
        access-denied-page="/jsp/accessDenied.jsp" 
        entry-point-ref="authenticationEntryPoint">
        <intercept-url pattern="/login.jsp" filters="none" />
            <intercept-url pattern="/**" access="hasRole('ROLE_USER')" />
        <logout invalidate-session="true" logout-url="/logout.htm"
                logout-success-url="/login.jsp?loggedout=true"/>
            <custom-filter ref="authenticationFilter" 
                position="FORM_LOGIN_FILTER"/>
            <custom-filter ref="concurrencyFilter" 
                position="CONCURRENT_SESSION_FILTER"/>
  <!--          <security:custom-filter ref="singleEntryFilter"
                after="CONCURRENT_SESSION_FILTER"/> --> 
            <session-management session-authentication-strategy-ref="sas"/> 
    </http>
 <!--   <bean id="singleEntryFilter" 
        class="SingleEntryFilter"
        p:redirectURI="/login.jsp">
            <property name="guardURI">
                <list>
                    <value>/jsp</value>
                </list>    
            </property>  
    </bean> -->
    <beans:bean id="authenticationFilter" 
        class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter">
           <beans:property name="sessionAuthenticationStrategy-ref" value="sas"/>
            <beans:property name="authenticationManager-ref" value="authenticationManager"/>
            <beans:property name="authenticationFailureHandler-ref" value="customAuthenticationFailureHandler"/>
            <beans:property name="authenticationSuccessHandler-ref" value="customAuthenticationSuccessHandler"/> 
    </beans:bean>
    <beans:bean id="customAuthenticationFailureHandler"
        class="org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler">
        <beans:property name="defaultFailureUrl" value="/login.jsp?authfailed=true"/>
    </beans:bean>    
    <beans:bean id="customAuthenticationSuccessHandler"
        class="org.springframework.security.web.authentication.SimpleUrlAuthenticationSuccessHandler">
            <beans:property name="defaultTargetUrl" value="/index.jsp" />
    </beans:bean>
    <beans:bean id="authenticationEntryPoint"  
        class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint">   
        <beans:property name="loginFormUrl" value="/login.jsp"/> 
    </beans:bean>

    <authentication-manager alias="authenticationManager">
    <authentication-provider user-service-ref="userDetailsService">
            <password-encoder ref="passwordEncoder"/>
        </authentication-provider>
    </authentication-manager>
    <beans:bean class="org.springframework.security.authentication.encoding.Md5PasswordEncoder"
            id="passwordEncoder"/>
    <user-service id="userDetailsService">
            <user name="username" password="ee11cbb19052e40b07aac0ca060c23ee"
                authorities="ROLE_USER, ROLE_ADMIN" />
            <user name="test" password="21232f297a57a5a743894a0e4a801fc3"
                authorities="ROLE_USER" />
    </user-service>
    <beans:bean id="concurrencyFilter" 
        class="org.springframework.security.web.session.ConcurrentSessionFilter">
        <beans:property name="sessionRegistry" value="sessionRegistry"/>    
        <beans:property name="expiredUrl" value="/login.jsp?loggedout=true" />
    </beans:bean>
    <beans:bean id="sas" 
        class="org.springframework.security.web.authentication.session.ConcurrentSessionControlStrategy">
        <beans:property name="maximumSessions" value="1" />    
        <beans:constructor-arg name="sessionRegistry" ref="sessionRegistry" />
    </beans:bean>
    <beans:bean id="sessionRegistry" 
        class="org.springframework.security.core.session.SessionRegistryImpl" /> 
</beans:beans> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T21:50:39.407

我认为错误消息非常具有描述性：

> 在 [...] org.springframework.beans 中创建名称为**“concurrencyFilter”的**bean 时出错。**ConversionNotSupportedException**：无法将**“java.lang.String”**类型的属性值转换为所需的“org.springframework.security.core.session”类型。**SessionRegistry** ' 为**属性 'sessionRegistry** '; 嵌套异常是 java.lang.IllegalStateException：**无法将类型 [java.lang.String] 的值转换为属性“sessionRegistry”所需的类型 [org.springframework.security.core.session.SessionRegistry]**：找不到匹配的编辑器或转换策略

看起来你所要做的就是改变：

```
<beans:property name="sessionRegistry" value="sessionRegistry"/> 
```

到：

```
<beans:property name="sessionRegistry" ref="sessionRegistry"/> 
```

# c# - 构建“本机代码 + 包装器 + 托管代码”项目

> ID：10077625
> 
> 赞同：0
> 
> 时间：2012-04-09T18:08:19.527
> 
> 标签：c#, c++, c++-cli, build-automation

我有一个复合项目，其中包含：适用于 Linux/Windows 的 C++ 库、基于适用于 Windows 的 C++ 库源的 C++/CLI 库、基于适用于 Windows 的 C++/CLI 库的 C# 项目、基于适用于 Linux/Windows 的 C++ 库的 C++ 项目。如何建设这样的项目？我需要选择什么构建系统？

现在我使用在 Linux 中生成 makefile 的 CMake 和在 Windows 中生成 MSVS 解决方案，但是编写 CMakeLists.txt 来构建 C# 项目非常困难。

在我有两个 MSVS 解决方案之前：用于托管（由 cmake 配置）和用于本机（由 cmake 生成）代码项目。托管项目是用 MSVS 编写的。原生项目写在 CMakeLists.txt 中。CMake 正在配置使用 Windows 环境变量的托管项目，这些变量保持到外部库、输出目录等的路径。这肯定是一个错误的决定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:26:33.427

MSBuild 是一个不错的构建脚本工具，可以很好地与 Visual Studio 项目文件（本质上是 MSBuild 脚本本身）集成。如果您以前从未使用过它，可能会有一些学习曲线，但除此之外，使用它来构建 .NET 项目非常简单。

使用 MSBuild 脚本构建 Visual Studio 项目的示例：

```
<!-- Compile a C# project and output to a staging directory -->
<MSBuild Projects="MyCsProject\MyCsProject.csproj" Properties="outDir=Staging\bin\MyCsProject" />

<!-- Compile a C++/CLI project and output to a staging directory, then re-sign it -->
<MSBuild Projects="MyCppProject\MyCppProject.vcxproj" Properties="outDir=Staging\bin\MyCppProject" />
<Exec Command="&quot;$(WindowsSDKDirectory)\Bin\sn.exe&quot; -Rc Staging\bin\MyCppProject\MyCppProject.dll $(StrongNameKeyContainer)" /> 
```

如果您使用的是 Visual Studio Professional 或更高版本，那么您可以拥有一个包含 C# 项目和 C++/CLI 项目的解决方案文件，因此在 Visual Studio 中构建所有内容相当容易。

但是，如果您使用的是 Visual Studio 的 Express 版本，那么您可能需要使用 MSBuild（或其他构建脚本工具），因为您不能在与 C# 项目相同的解决方案中使用 C++/CLI 项目Express 版本，因此您将需要一个 MSBuild 脚本，它可以一步编译所有各种项目。

我在 C++/CLI 项目中遇到的一个问题是签名。如果您需要签署您的 C++/CLI 程序集，那么您需要在您的 MSBuild 脚本中添加一个步骤以使用“sn”工具（应该是 Windows SDK 的一部分）在之后重新签署您的 C++/CLI 程序集它已被编译。如果您使用的是 .snk.pfx 文件，那么您需要使用“sn”工具首先将该密钥添加到密钥容器（使用 -i 开关），然后您需要使用该密钥容器当您重新签署程序集时（使用 -Rc 开关）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T18:36:42.373

我目前在一个具有 C++、CLI 和 C# 的项目中工作，并且 C++ 也用于 iOS 应用程序。我们在 Windows 上设置它的方式是我们将每种语言都放在自己的项目中，然后将所有项目放在一个解决方案中，这样我们就可以通过 IDE 一步编译所有内容。所有依赖项等都由 VS 管理。我认为让 VS 设置所有依赖项的简单性远远超过了为 C++ 文件创建项目的额外工作。对于 iOS，我有一个单独的 Xcode 项目，它为 iOS 构建所有 C++ 东西，同样你会有一个用于 Windows 的 CMake 项目。

# javascript - JavaScript SlideUp/SlideDown 让我的页脚在幻灯片后跳动

> ID：10077627
> 
> 赞同：1
> 
> 时间：2012-04-09T18:08:34.773
> 
> 标签：javascript, jquery, html, css

有人可以帮我澄清我的代码中的问题所在。

我想隐藏一个元素然后向上滑动，因此它下面的另一个元素变得可见（显示）-向下滑动也是如此。

实际上它有效，但每次滑动时都会让我的页脚跳动，解决方案是什么？

```
var openF = $('.openForm').css('color', '#FFF');
$('#contact').hide();

$(openF).live('click', function() {
    if ($(this).val() == "Open Contact Form") {
        $(this).val("Close Contact Form");
        $('#contactDT').slideUp(200);
        $('#contact').show(200);
    } else {
        $(this).val("Open Contact Form");
        $('#contactDT').slideDown(200);
        $('#contact').hide(200);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:12:44.720

在没有看到 HTML 和 CSS 的情况下，我不确定我是否完全理解您的问题，但听起来您可能在制作动画的元素上有填充。

当您运行动画时，它们会通过不断更新元素的 CSS 高度来实现。问题是如果你的元素有填充，它会在隐藏动画结束时跳过。（这是因为即使高度为 0，您的元素仍然是填充的高度。）

解决方案是将填充应用于包装器内的某些元素，动画将在包装器上发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T00:45:34.020

您在 slideUp/slideDown 和 show/hide 上都以 200 毫秒的时间制作动画。这就是跳跃效应的原因。不要将值传递`200`给显示/隐藏函数。

改变这个...

```
if ($(this).val() == "Open Contact Form") {
    $(this).val("Close Contact Form");
    $('#contactDT').slideUp(200);
    $('#contact').show(200);
} else {
    $(this).val("Open Contact Form");
    $('#contactDT').slideDown(200);
    $('#contact').hide(200);
} 
```

至...

```
if ($(this).val() == "Open Contact Form") {
    $(this).val("Close Contact Form");
    $('#contactDT').slideUp(200);
    $('#contact').show();
} else {
    $(this).val("Open Contact Form");
    $('#contactDT').slideDown(200);
    $('#contact').hide();
} 
```

这应该摆脱跳动的问题。

# java - 为具有 2 列（字符串、整数）和 n 行的 JTable 实现自定义 CellEditor

> ID：10077632
> 
> 赞同：0
> 
> 时间：2012-04-09T18:08:54.753
> 
> 标签：java, swing, jtable, tablecellrenderer, tablecelleditor

我有一个包含 N 行和 2 列的 JTable 我需要实现一个自定义 CellEditor 类来访问每个单元格的数据输入

`table.getCellEditor(int row, int column).getCellEditorValue()`

我用过这个 CellEditor 类

```
class MyEditor extends DefaultCellEditor {
        /**
         * 
         */
        private static final long serialVersionUID = 1L;
        private JTextField textField;
        private boolean valueSet;
          public MyEditor() {
            super(new JTextField());
          }

          @Override
            public boolean isCellEditable(EventObject eo) {
                System.err.println("isCellEditable");
                if (eo instanceof KeyEvent) {
                    KeyEvent ke = (KeyEvent) eo;
                    System.err.println("key event: " + ke.getKeyChar());
                    textField.setText(String.valueOf(ke.getKeyChar()));
                    valueSet = true;
                } else {
                    valueSet = false;
                }
                return true;
            }
    } 
```

但不足以访问正确单元格位置的数据......（似乎所有表格都被视为一个完整的单元格）

我发现的所有示例都与使用单元格编辑器在输入不正确但足够清晰可以帮助我解决问题的情况下阻止编辑单元格有关。

PS如果您想详细了解整个界面（不）如何工作，则整个代码是这样的：

```
public class CompileDataJob extends JFrame {
      private boolean DEBUG = false;
    private JPanel contentPane;

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    CompileDataJob frame = new CompileDataJob();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the frame.
     */
    public CompileDataJob() {
        setTitle("Inserisci i parametri dei lavori");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 551, 293);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        setContentPane(contentPane);

        JPanel panel_1 = new JPanel();
        final JTable table = new JTable(new MyTableModel());

        JButton btnNewButton = new JButton("    OK   ");
        btnNewButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                try{
                    DataJobManager.azzeraListaLavori();
                    int numJob=DataJobManager.loadNumeroLavori();
                    LinkedList<Job> listaLavori=new LinkedList<Job>();
                    String id;
                    int time;
                    for (int rowIndex=0; rowIndex<numJob; rowIndex++){
                            id=(String)(table.getCellEditor(rowIndex,0).getCellEditorValue());
                            time=Integer.parseInt(((String)((table.getCellEditor(rowIndex, 1)).getCellEditorValue())));
                            Job l=new Job(id,time);
                            listaLavori.add(l);
                    }
                        DataJobManager.saveListaLavori(listaLavori);
                        CompileDataJob.this.dispose();
                        JOptionPane.showMessageDialog(CompileDataJob.this,"Data Saved");
                }catch(Exception ecc){
                    JOptionPane.showMessageDialog(CompileDataJob.this,"Error during the saving.");
                }
            }
        });
        panel_1.add(btnNewButton);

        JButton btnNewButton_1 = new JButton("Cancel");
        btnNewButton_1.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                CompileDataJob.this.dispose();
            }
        });

        JPanel panel = new JPanel();

        table.setDefaultEditor(Object.class,new MyEditor());

        table.setPreferredScrollableViewportSize(new Dimension(500, 70));
        table.setFillsViewportHeight(true);
        table.getSelectionModel().addListSelectionListener(
                new ListSelectionListener() {
                    public void valueChanged(ListSelectionEvent event) {
                        int viewRow = table.getSelectedRow();
                        JLabel statusText=new JLabel();
                        if (viewRow < 0) {
                            //Selection got filtered away.
                            statusText.setText("");
                        } else {
                            int modelRow = 
                                table.convertRowIndexToModel(viewRow);
                            statusText.setText(
                                String.format("Selected Row in view: %d. " +
                                    "Selected Row in model: %d.", 
                                    viewRow, modelRow));
                        }
                    }
                }
        );

                //Create the scroll pane and add the table to it.
                JScrollPane scrollPane = new JScrollPane(table);

                        //Set up column sizes.
                        initColumnSizes(table);

        panel_1.add(btnNewButton_1);
        GroupLayout gl_contentPane = new GroupLayout(contentPane);
        gl_contentPane.setHorizontalGroup(
            gl_contentPane.createParallelGroup(Alignment.LEADING)
                .addGroup(gl_contentPane.createSequentialGroup()
                    .addGroup(gl_contentPane.createParallelGroup(Alignment.TRAILING, false)
                        .addComponent(panel_1, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(panel, GroupLayout.DEFAULT_SIZE, 525, Short.MAX_VALUE))
                    .addContainerGap())
        );
        gl_contentPane.setVerticalGroup(
            gl_contentPane.createParallelGroup(Alignment.LEADING)
                .addGroup(gl_contentPane.createSequentialGroup()
                    .addComponent(panel, GroupLayout.PREFERRED_SIZE, 213, GroupLayout.PREFERRED_SIZE)
                    .addPreferredGap(ComponentPlacement.RELATED, 61, Short.MAX_VALUE)
                    .addComponent(panel_1, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE))
        );
        GroupLayout gl_panel = new GroupLayout(panel);
        gl_panel.setHorizontalGroup(
            gl_panel.createParallelGroup(Alignment.LEADING)
                .addGroup(gl_panel.createSequentialGroup()
                    .addGap(11)
                    .addComponent(scrollPane, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                    .addContainerGap(12, Short.MAX_VALUE))
        );
        gl_panel.setVerticalGroup(
            gl_panel.createParallelGroup(Alignment.LEADING)
                .addGroup(gl_panel.createSequentialGroup()
                    .addGap(5)
                    .addComponent(scrollPane, GroupLayout.DEFAULT_SIZE, 197, Short.MAX_VALUE)
                    .addContainerGap())
        );
        panel.setLayout(gl_panel);
        contentPane.setLayout(gl_contentPane);

    }

    private void initColumnSizes(JTable table) {
        MyTableModel model = (MyTableModel)table.getModel();
        TableColumn column = null;
        Component comp = null;
        int headerWidth = 0;
        int cellWidth = 0;
        Object[] longValues = model.longValues;
        TableCellRenderer headerRenderer =
            table.getTableHeader().getDefaultRenderer();

        for (int i = 0; i < 2; i++) {
            column = table.getColumnModel().getColumn(i);

            comp = headerRenderer.getTableCellRendererComponent(
                                 null, column.getHeaderValue(),
                                 false, false, 0, 0);
            headerWidth = comp.getPreferredSize().width;

            comp = table.getDefaultRenderer(model.getColumnClass(i)).
                             getTableCellRendererComponent(
                                 table, longValues[i],
                                 false, false, 0, i);
            cellWidth = comp.getPreferredSize().width;

            if (DEBUG) {
                System.out.println("Initializing width of column "
                                   + i + ". "
                                   + "headerWidth = " + headerWidth
                                   + "; cellWidth = " + cellWidth);
            }

            column.setPreferredWidth(Math.max(headerWidth, cellWidth));
        }
    }

    class MyEditor extends DefaultCellEditor {
        /**
         * 
         */
        private static final long serialVersionUID = 1L;
        private JTextField textField;
        private boolean valueSet;
          public MyEditor() {
            super(new JTextField());
          }

          @Override
            public boolean isCellEditable(EventObject eo) {
                System.err.println("isCellEditable");
                if (eo instanceof KeyEvent) {
                    KeyEvent ke = (KeyEvent) eo;
                    System.err.println("key event: " + ke.getKeyChar());
                    textField.setText(String.valueOf(ke.getKeyChar()));
                    //textField.select(1,1);
                    //textField.setCaretPosition(1);
                    //textField.moveCaretPosition(1);
                    valueSet = true;
                } else {
                    valueSet = false;
                }
                return true;
            }
    }

    class MyTableModel extends AbstractTableModel {
        /**
         * 
         */
        private static final long serialVersionUID = 1L;
        private String[] columnNames = {"Nome Job", "Durata"};
        int numJob=DataJobManager.loadNumeroLavori();
        private Object[][] data = getDatiDefaultTabella();

        public class Job {
            public int time; // Should n't this be a long?
            public String jobName;
        }

        public Object[][] getDatiDefaultTabella(){
            Object[][] tabella=new Object[numJob][2];
            for(int i=0; i<numJob; i++){
                for(int j=0; j<2; j++){
                    tabella[i][j]="inserisci dati";
                }
            }

            return tabella;
        }

        public Object[][] getTabella(){
            return data;
        }

        public int getColumnCount() {
            return columnNames.length;
        }

        public int getRowCount() {
            return numJob;
        }

        public String getColumnName(int col) {
            return columnNames[col];
        }

        public Object getValueAt(int row, int col) {
            return data[row][col];
        }

        /*
         * JTable uses this method to determine the default renderer/
         * editor for each cell.  If we didn't implement this method,
         * then the last column would contain text ("true"/"false"),
         * rather than a check box.
         */
        public Class getRowClass(int r) {
            return getValueAt(r, 0).getClass();
        }

        public Class getColumnClass(int c) {
            return getValueAt(0, c).getClass();
        }

        /*
         * Don't need to implement this method unless your table's
         * editable.
         */
        public boolean isCellEditable(int row, int col) {
            //Note that the data/cell address is constant,
            //no matter where the cell appears onscreen.
            return true;
        }

        /*
         * Don't need to implement this method unless your table's
         * data can change.
         */
        public void setValueAt(Object value, int row, int col) {
            if (DEBUG) {
                System.out.println("Setting value at " + row + "," + col
                                   + " to " + value
                                   + " (an instance of "
                                   + value.getClass() + ")");
            }

            data[row][col] = value;
            fireTableCellUpdated(row, col);

            if (DEBUG) {
                System.out.println("New value of data:");
                printDebugData();
            }
        }

        private void printDebugData() {
            int numRows = getRowCount();
            int numCols = getColumnCount();

            for (int i=0; i < numRows; i++) {
                System.out.print("    row " + i + ":");
                for (int j=0; j < numCols; j++) {
                    System.out.print("  "  + data[i][j]);
                }
                System.out.println();
            }
            System.out.println("--------------------------");
        }
    }

    /**
     * Create the GUI and show it.  For thread safety,
     * this method should be invoked from the
     * event-dispatching thread.
     */

        public void run() {
            try {
                CompileDataJob frame = new CompileDataJob();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:38:50.367

好吧，我想我明白了。我稍微优化了你的代码并删除了我不需要的东西。您可以再次添加它。

这是编译数据作业

```
public class CompileDataJob extends JFrame {
    final boolean DEBUG = false;
  private final JPanel contentPane;

  /**
   * Launch the application.
   */
  public static void main(String[] args) {
      EventQueue.invokeLater(new Runnable() {
          public void run() {
              try {
                  CompileDataJob frame = new CompileDataJob();
                  frame.setVisible(true);
              } catch (Exception e) {
                  e.printStackTrace();
              }
          }
      });
  }

  /**
   * Create the frame.
   */
  public CompileDataJob() {
      setTitle("Inserisci i parametri dei lavori");
      setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      setBounds(100, 100, 551, 293);
      contentPane = new JPanel();
      contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
      setContentPane(contentPane);

      JPanel panel_1 = new JPanel();
      final JTable table = new JTable(new MyTableModel());

      JButton add = new JButton(" ADD ");
      add.addActionListener(new ActionListener() {
          public void actionPerformed(ActionEvent e) {
            ((MyTableModel)table.getModel()).addRow(new Job(0, ""));
        }
      });

      JButton btnNewButton = new JButton("    OK   ");
      btnNewButton.addActionListener(new ActionListener() {
          public void actionPerformed(ActionEvent e) {
              try{
                      DataJobManager.saveListaLavori(((MyTableModel)table.getModel()).getJobs());
                      CompileDataJob.this.dispose();
                      JOptionPane.showMessageDialog(CompileDataJob.this,"Data Saved");
              }catch(Exception ecc){
                  JOptionPane.showMessageDialog(CompileDataJob.this,"Error during the saving.");
              }
          }
      });
      panel_1.add(btnNewButton);
      panel_1.add(add);
      JButton btnNewButton_1 = new JButton("Cancel");
      btnNewButton_1.addActionListener(new ActionListener() {
          public void actionPerformed(ActionEvent arg0) {
              CompileDataJob.this.dispose();
          }
      });

      JPanel panel = new JPanel();

//      table.setDefaultEditor(Object.class,new MyEditor());

      table.setPreferredScrollableViewportSize(new Dimension(500, 70));
      table.setFillsViewportHeight(true);

              //Create the scroll pane and add the table to it.
              JScrollPane scrollPane = new JScrollPane(table);

      panel_1.add(btnNewButton_1);
      GroupLayout gl_contentPane = new GroupLayout(contentPane);
      gl_contentPane.setHorizontalGroup(
          gl_contentPane.createParallelGroup(Alignment.LEADING)
              .addGroup(gl_contentPane.createSequentialGroup()
                  .addGroup(gl_contentPane.createParallelGroup(Alignment.TRAILING, false)
                      .addComponent(panel_1, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                      .addComponent(panel, GroupLayout.DEFAULT_SIZE, 525, Short.MAX_VALUE))
                  .addContainerGap())
      );
      gl_contentPane.setVerticalGroup(
          gl_contentPane.createParallelGroup(Alignment.LEADING)
              .addGroup(gl_contentPane.createSequentialGroup()
                  .addComponent(panel, GroupLayout.PREFERRED_SIZE, 213, GroupLayout.PREFERRED_SIZE)
                  .addPreferredGap(ComponentPlacement.RELATED, 61, Short.MAX_VALUE)
                  .addComponent(panel_1, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE))
      );
      GroupLayout gl_panel = new GroupLayout(panel);
      gl_panel.setHorizontalGroup(
          gl_panel.createParallelGroup(Alignment.LEADING)
              .addGroup(gl_panel.createSequentialGroup()
                  .addGap(11)
                  .addComponent(scrollPane, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                  .addContainerGap(12, Short.MAX_VALUE))
      );
      gl_panel.setVerticalGroup(
          gl_panel.createParallelGroup(Alignment.LEADING)
              .addGroup(gl_panel.createSequentialGroup()
                  .addGap(5)
                  .addComponent(scrollPane, GroupLayout.DEFAULT_SIZE, 197, Short.MAX_VALUE)
                  .addContainerGap())
      );
      panel.setLayout(gl_panel);
      contentPane.setLayout(gl_contentPane);

  }
} 
```

这是工作

```
public class Job {
    public int time = 500; // Should n't this be a long?
    public String jobName;
    public boolean processed = false;

    public Job(int time, String jobName) {
        this.time = time;
        this.jobName = jobName;
    }

    public boolean isProcessed() {
        return processed;
    }
} 
```

这是您的 TableModel，它是可优化的，但可以工作......

```
class MyTableModel extends AbstractTableModel {
    private static final long serialVersionUID = 1L;
    private final List<Job> objects = new ArrayList<Job>();
    private final String[] columnNames = { "Nome Job", "Durata", "processed" };

    private final Class<?>[] metaModell = new Class[]{String.class, Integer.class, Boolean.class};

    public int getColumnCount() {
        return columnNames.length;
    }

    public int getRowCount() {
        return objects.size();
    }

    @Override
    public String getColumnName(int col) {
        return columnNames[col];
    }

    public Object getValueAt(int row, int col) {
        if (row >= objects.size()) 
            return null;
        Job job = getRow(row);
        switch (col) {
            case 0:
                return job.jobName;
            case 1:
                return job.time;
            case 2:
                return job.isProcessed();
        }
        return null;
    }

    private Job getRow(int row) {
        return objects.get(row);
    }

    @Override
    public Class<?> getColumnClass(int c) {
        if (c < metaModell.length)
            return metaModell[c];
        return Object.class;
    }

    @Override
    public boolean isCellEditable(int row, int col) {
        return col >= 0 && col < columnNames.length;
    }

    @Override
    public void setValueAt(Object value, int row, int col) {
        Job job = getRow(row);
        switch (col) {
            case 0:
                job.jobName = (String) value;
                break;
            case 1:
                job.time = (Integer) value;
                break;
//          case 2:
//              job.processed = (Boolean) value;
//              break;
        }
        fireTableDataChanged();
    }

    public List<Job> getJobs() {
        return objects;
    }

    public void addRow(Job job) {
        this.objects.add(job);
        fireTableDataChanged();
    }
} 
```

正如您将看到的，我从编辑器中删除了所有 MyEditor 内容和复杂的 getValues。相反，我向表模型添加了一个方法`addJob()`和。`getJobs`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T18:19:07.780

好的，你的类确实定义了一个 CellEditor，但它没有做任何 DefaultEditor 不会做的事情。

此外，你不要把它粘在一起。您的 JTable 不知道它应该使用哪个 CellEditor。您必须告诉您的表使用您的编辑器实现。有多种方法可以做到这一点（例如，为类设置默认渲染器，由您的 tablemodel 返回）。您还可以将 CellEditor 直接分配给列（ `column.setCellEditor(new MyCellEditor());`--> [http://docs.oracle.com/javase/tutorial/uiswing/components/table.html](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)）

# python - 如何更改 Django 中的模板框架？

> ID：10077636
> 
> 赞同：1
> 
> 时间：2012-04-09T18:09:07.860
> 
> 标签：python, django, django-templates, template-engine, mustache

我想将 Mustache 集成到我的 Django 应用程序中。我需要采取哪些步骤才能用 Mustache 完全替换 Django 的模板系统？

我想让 render_to_response 与 Mustache 模板一起正常工作，并通过上下文（STATIC_URL、请求等）传递所有正确的变量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T20:21:12.023

基本上，您必须`render_to_response`用您自己的实现替换该函数，该实现使用您选择的模板系统。Django`render_to_response`特定于 Django 的模板系统。这个函数简单地包装了一些在使用 django 模板引擎时使用的常见的 grunt-work。[Django 的教程](https://docs.djangoproject.com/en/dev/intro/tutorial03/#write-views-that-actually-do-something)中介绍了它们如何工作的基础知识。

使用`django.template.RequestContext`获取`TEMPLATE_CONTEXT_PROCESSORS`设置中指定的所有上下文变量（其中定义了 STATIC_URL、请求等）。由于`RequestContext`其行为类似于字典，因此您应该能够毫无问题地将其传递给 mustache。`RequestContext`在其构造函数中获取请求对象。

最后，不要忘记返回正确的[HttpResponse](https://docs.djangoproject.com/en/dev/ref/request-response/#httpresponse-objects)对象！

因为我不是一个段落迷：

1.  创建 RequestContext 实例。
2.  将收到的字典与 RequestContext 实例合并。
3.  将模板呈现为字符串。
4.  用 HttpResponse 实例包装最终字符串。

# python - pygame - 如何用字体和颜色显示文本？

> ID：10077644
> 
> 赞同：62
> 
> 时间：2012-04-09T18:09:49.440
> 
> 标签：python, pygame

有没有办法可以使用 python 在 pygame 窗口上显示文本？

我需要显示一堆更新的实时信息，并且不想为我需要的每个角色制作图像。

我可以将文本传送到屏幕上吗？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-04-09T18:18:10.007

是的。可以在 pygame 中绘制文本：

```
# initialize font; must be called after 'pygame.init()' to avoid 'Font not Initialized' error
myfont = pygame.font.SysFont("monospace", 15)

# render text
label = myfont.render("Some text!", 1, (255,255,0))
screen.blit(label, (100, 100)) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-09T22:38:06.243

[您可以通过使用pygame.font.Font](http://www.pygame.org/docs/ref/font.html#pygame.font.Font)设置字体路径来使用自己的自定义字体

```
pygame.font.Font(filename, size): return Font 
```

例子：

```
pygame.font.init()
font_path = "./fonts/newfont.ttf"
font_size = 32
fontObj = pygame.font.Font(font_path, font_size) 
```

然后使用 fontObj.render 渲染字体并将 blit 到一个表面，如上面 veiset 的回答。:)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-11T14:53:19.730

我的游戏中有一些显示实时比分的代码。它具有快速访问的功能。

```
def texts(score):
   font=pygame.font.Font(None,30)
   scoretext=font.render("Score:"+str(score), 1,(255,255,255))
   screen.blit(scoretext, (500, 457)) 
```

我在我的while循环中使用它来调用它：

```
texts(score) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-10-22T17:19:09.280

有2种可能性。在任何一种情况下，PyGame 都必须由[`pygame.init`](https://www.pygame.org/docs/ref/pygame.html).

```
import pygame
pygame.init() 
```

使用[`pygame.font`](https://www.pygame.org/docs/ref/font.html#pygame.font)模块并创建一个[`pygame.font.SysFont`](https://www.pygame.org/docs/ref/font.html#pygame.font.SysFont)或[`pygame.font.Font`](https://www.pygame.org/docs/ref/font.html#pygame.font.Font)对象。[`render()`](https://www.pygame.org/docs/ref/font.html#pygame.font.Font.render)a[`pygame.Surface`](https://www.pygame.org/docs/ref/surface.html)将文本和[`blit`](https://www.pygame.org/docs/ref/surface.html#pygame.Surface.blit)Surface*放到*屏幕上：

```
my_font = pygame.font.SysFont(None, 50)
text_surface = myfont.render("Hello world!", True, (255, 0, 0))
screen.blit(text_surface, (10, 10)) 
```

或者使用[`pygame.freetype`](https://www.pygame.org/docs/ref/freetype.html)模块。创建一个[`pygame.freetype.SysFont()`](https://www.pygame.org/docs/ref/freetype.html#pygame.freetype.SysFont)或[`pygame.freetype.Font`](https://www.pygame.org/docs/ref/freetype.html#pygame.freetype.Font)对象。[`render()`](https://www.pygame.org/docs/ref/freetype.html#pygame.freetype.Font.render)a[`pygame.Surface`](https://www.pygame.org/docs/ref/surface.html)用文字或直接[`render_to()`](https://www.pygame.org/docs/ref/freetype.html#pygame.freetype.Font.render_to)将文字显示在屏幕上：

```
my_ft_font = pygame.freetype.SysFont('Times New Roman', 50)
my_ft_font.render_to(screen, (10, 10), "Hello world!", (255, 0, 0)) 
```

另请参阅[文本和字体](https://github.com/Rabbid76/PyGameExamplesAndAnswers/blob/master/documentation/pygame/pygame_text_and_font.md)

* * *

最小的`pygame.font`例子：`[![](../Images/1046507529a28f50314afc43ea70d681.png) repl.it/@Rabbid76/PyGame-Text](https://repl.it/@Rabbid76/PyGame-Text#main.py)`

[![](../Images/1dc2f4a3482abda13c825a9ecac78461.png)](https://i.stack.imgur.com/QnNaX.png)

```
import pygame

pygame.init()
window = pygame.display.set_mode((500, 150))
clock = pygame.time.Clock()

font = pygame.font.SysFont(None, 100)
text = font.render('Hello World', True, (255, 0, 0))

background = pygame.Surface(window.get_size())
ts, w, h, c1, c2 = 50, *window.get_size(), (128, 128, 128), (64, 64, 64)
tiles = [((x*ts, y*ts, ts, ts), c1 if (x+y) % 2 == 0 else c2) for x in range((w+ts-1)//ts) for y in range((h+ts-1)//ts)]
for rect, color in tiles:
    pygame.draw.rect(background, color, rect)

run = True
while run:
    clock.tick(60)
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            run = False

    window.blit(background, (0, 0))
    window.blit(text, text.get_rect(center = window.get_rect().center))
    pygame.display.flip()

pygame.quit()
exit() 
```

* * *

最小的`pygame.freetype`例子：`[![](../Images/1046507529a28f50314afc43ea70d681.png) repl.it/@Rabbid76/PyGame-FreeTypeText](https://repl.it/@Rabbid76/PyGame-FreeTypeText#main.py)`

[![](../Images/3536f4ebc76ce9caedd5172a53bfd4fd.png)](https://i.stack.imgur.com/umMZi.png)

```
import pygame
import pygame.freetype

pygame.init()
window = pygame.display.set_mode((500, 150))
clock = pygame.time.Clock()

ft_font = pygame.freetype.SysFont('Times New Roman', 80)

background = pygame.Surface(window.get_size())
ts, w, h, c1, c2 = 50, *window.get_size(), (128, 128, 128), (64, 64, 64)
tiles = [((x*ts, y*ts, ts, ts), c1 if (x+y) % 2 == 0 else c2) for x in range((w+ts-1)//ts) for y in range((h+ts-1)//ts)]
for rect, color in tiles:
    pygame.draw.rect(background, color, rect)

run = True
while run:
    clock.tick(60)
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            run = False

    window.blit(background, (0, 0))
    text_rect = ft_font.get_rect('Hello World')
    text_rect.center = window.get_rect().center
    ft_font.render_to(window, text_rect.topleft, 'Hello World', (255, 0, 0))
    pygame.display.flip()

pygame.quit()
exit() 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-15T21:05:33.047

我写了一个包装器，它将缓存文本表面，仅在脏时重新渲染。[googlecode/ninmonkey/nin.text/demo/](http://code.google.com/p/ninmonkey/source/browse/#hg/nin.text%253Fstate%253Dclosed)

# php - 简单的 jQuery/JSON 到 HTML 输出

> ID：10077645
> 
> 赞同：0
> 
> 时间：2012-04-09T18:10:05.757
> 
> 标签：php, jquery, json

教自己从 mySQL -> PHP -> JSON / Javascript 的数据流，并在这一点上卡住了。我要做的就是遍历外部 JSON 数据并将它们放入无序列表中。我试图编辑 jQuery 网站上给出的示例来为我工作，但我无法弄清楚。任何帮助表示赞赏。这是我的代码。

```
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>

<script type="text/javascript">
$.getJSON('links.json', function(json) {
// alert("JSON Data: " + json[1].pagetitle);
}); 
```

我可以通过使用注释掉的警报来确认数据是从外部 JSON 文件中提取的。

这是我创建 JSON 文件的代码：

```
// Require Database Connection
require_once "pdo_testdb_connect.php";

// Query Database for all available links
$STH = $dbh->query('SELECT pagetitle, pagelink FROM links');

// If empty..
if ($STH == '') {
echo "There are no links available at this time.";
}

// Set Fetch Mode
$STH->setFetchMode(PDO::FETCH_ASSOC);

$allLinks = array();

// Pull all page titles and links
while($row = $STH->fetch()) {
    $allLinks[] = $row;
} 

// Encode array to JSON
$je = json_encode($allLinks);

// Write to file
$fp = fopen('links.json', 'w');
fwrite($fp, $je);
fclose($fp); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T18:23:16.847

我希望这段代码对你有用

```
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>

<script type="text/javascript">
       $.getJSON('links.json', function(json) {
          // alert("JSON Data: " + json[1].pagetitle);

           $.each(json, function(i,val){
                 var li_populate = "<li>"+i+"+ val +"</li>"; 
                  $("#myul").append(li_populate);

            })

       }); 
```

# asp.net - 在 MVC3 Razor 中为区域中的视图创建自定义路由

> ID：10077646
> 
> 赞同：0
> 
> 时间：2012-04-09T18:10:06.333
> 
> 标签：asp.net, asp.net-mvc-3, razor

我有一个解决方案“样本”。其中有多个文件夹 a,b,c,d... 我的启动项目位于 c 文件夹中。在启动项目中，我有区域、内容、控制器、助手、模型、视图等文件夹。在 Areas 文件夹中，我有 Area1 和 Area2 文件夹。在 Area2 中，我有控制器、模型和视图

如果我运行项目，我需要访问[http://localhost/c/Area2/Home(another](http://localhost/c/Area2/Home(another) Folder)/home(main View)

到主页。如果我运行解决方案而不是手动输入上述路径，我如何创建自定义路由以直接查看主页。

*控制器和模型的名称是 HomeController 和 HomeModel。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:21:47.080

要创建自定义路由，您必须在 global.asax.cs 文件中添加路由条目

```
routes.MapRoute(
            "FolderName", // Route name
            "FolderName1/FolderName2/{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional });// Parameter defaults 
```

要回答您的问题，并将上述路由设为默认路由，您可能只想删除 VS 放入 global.asax 文件中的默认路由

# text - 命名实体作为文本分类中的一个特征？

> ID：10077647
> 
> 赞同：8
> 
> 时间：2012-04-09T18:10:09.160
> 
> 标签：text, machine-learning, classification, named-entity-recognition

使用现有的文本分类（监督）技术，为什么我们不将文本中的命名实体 (NE) 视为训练和测试中的一个特征？您认为我们可以通过使用 NE 作为一项功能来提高精度吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T11:19:25.943

这在很大程度上取决于您所在的领域。您必须根据领域定义功能。假设在搜索引擎中您正在学习对问题进行排名，生成动态排名，NE 不会给您带来任何好处。它在很大程度上取决于您正在工作的领域以及定义的输出分类标签（监督学习）。

现在假设您正在对与足球、电影或政治等相关的文件进行分类。在这种情况下，命名实体可以工作。我在这里给你举个例子，假设你正在使用神经网络将文件分类为足球、电影、政治等。现在说一个文件进入“莱昂内尔·梅西被邀请参加“社交网络”的首映式，也出席了包括杰西·艾森伯格、安德鲁·加菲尔德和贾斯汀·汀布莱克在内的演员和工作人员”在这里，命名实体（输入特征）和电影（定义输出）之间的联系将更加牢固，因此它将被归类为电影上的文档。

另一个例子，假设我们的文档是“汤姆克鲁斯在电影“最后一场足球比赛”中扮演莱昂内尔梅西的角色。这里的好处是，你的神经网络已经了解到，当演员和足球运动员一起出现在一个文档中时，它很有可能是一部电影。同样，它取决于数据和训练它也可能反过来（但这就是学习的全部内容；查看过去的数据）

所以我的回答是尝试一下，没有人会阻止你将实体命名为特征。它可能对您正在工作的领域有所帮助。

# android-edittext - Having Android EditText.onDraw() woes

> ID：10077659
> 
> 赞同：0
> 
> 时间：2012-04-09T18:10:54.107
> 
> 标签：android-edittext

I am trying to draw some lines on the background of an EditText.

I subclassed EditText, and included the fully qualified package name in my xml layout, replacing the previous EditText declaration.

Then I implemented onDraw(); but what is happening is that onDraw just seems to get called over and over again in an infinite loop.

I thought maybe I was launching an infinite recursion, so I commented everything out except for a log message, and it is still occurring.

What is going on here?

```
package myview;
import android.content.Context;
import android.graphics.Canvas;
import android.util.AttributeSet;
import android.util.Log;
import android.widget.EditText;

public class LinedEditView extends EditText {

  public LinedEditView(Context context, AttributeSet attrs) {
    super(context, attrs);
  }

  public LinedEditView(Context context) {
    super(context);
  }

  public LinedEditView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
  }

  @Override
/////// KEEPS GETTING CALLED !!!!!!??????? ////////////
  protected void onDraw(Canvas canvas) {
    Log.d("LinedEditView", "Calling onDraw()");
    super.onDraw(canvas);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:22:29.390

It looks like you are logging every time onDraw() is called, which conceivably should be once per frame (or else once per update required).

Usually the way an animation loop works is that it is exactly an infinite loop, which is called over and over again, and draws to the canvas depending on the state of the view at the time at which it is called.

# java - 如何从我的 Java 程序执行 Perl 脚本？

> ID：10077674
> 
> 赞同：0
> 
> 时间：2012-04-09T18:12:27.497
> 
> 标签：java, perl, embedded-script

我正在编写一个需要调用 Perl 脚本来做一些事情的小工具。

我已经知道并编写了如何调用它的代码，但我必须为`exec()`.

有没有可能将该脚本作为一种可以直接调用的包提供？

我想稍后生成一个可执行的 JAR，并且还想拥有整个工具来提供 Perl 脚本，而不知道它的位置。

目前它像：

```
private void extractAudioStream() {
    inputFile = "C:\\Users\\Stefan\\Documents\\temp_tshark\\forward_stream.pcap";
    outputFile_audiostream = "C:\\Users\\Stefan\\Documents\\temp_tshark\\forward_stream.pcm";

    String perl_cmd = "perl C:\\Users\\Stefan\\Documents\\tshark_bin\\rtp_dump.pl " + inputFile + " " + outputFile_audiostream;

    try {
        p = Runtime.getRuntime().exec(perl_cmd); 
```

希望问题足够清楚。

我认为这可能不那么容易，因为系统`perl`命令等待完全合格的路径？那么是否有可能检测到我当前的位置并将其传递给我的 cmd-String？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T19:41:09.730

```
String perl_cmd = "perl -e \"print \\\"bla\\n\\\";\";"
Runtime.getRuntime().exec(perl_cmd); 
```

**编辑：**我忘了`-e`在脚本之间留一个空格；您还必须在脚本中转义反斜杠和双引号（如果您是 Java 中的内联脚本，而不是从 jar 文件中读取它，则两次），这对于单行代码来说有点尴尬。

因此，最好使用`Process.getOutputStream`将脚本写入 Perl 解释器的标准输入：

```
 String perlScript = "print \"hello\";"; // get from a jar with Class.getResourceAsStream()
  Process p = new ProcessBuilder("perl").redirectErrorStream(true).redirectOutput(ProcessBuilder.Redirect.INHERIT).start();
  BufferedWriter w = new BufferedWriter(new OutputStreamWriter(p.getOutputStream()));
  w.write(perlScript);
  w.close();
  p.waitFor(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T18:35:28.150

如果你在字符串中读取/存储你的 perl 脚本，你可以像这样执行它：

```
perlScript = "print \"HELLO\\n\"; print \"CIAOOOO\\n\";";
String perl_cmd = "echo \"" + perlScript + "\" |perl";
Runtime.getRuntime().exec(perl_cmd); 
```

希望能帮助到你...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T18:35:08.757

您可以将脚本写到一个文件中，比如一个临时文件，然后从那里执行它，然后在完成后将其删除。

# android - 在 Android ICS (4.0) 中禁用主页按钮

> ID：10077675
> 
> 赞同：9
> 
> 时间：2012-04-09T18:12:32.163
> 
> 标签：android, android-3.0-honeycomb, android-4.0-ice-cream-sandwich, keyguard

我正在为一家公司制作一个专有应用程序，该应用程序永远不会在 Ice Cream Sandwich（Android 4.0）中发布到 Android 市场（或者我现在猜是 Play 商店）。

我需要禁用主页，以便用户无法恶意卸载软件或删除应用程序捕获的数据。这个最新版本是第一个用 4.0 编写的，以前的版本是用 2.2 和 3.2 编写的。

为了在 2.2 中禁用 Home 按钮，我将应用程序关联为家庭替代品，因此该按钮只是重新打开了应用程序，但我不能再使用此方法，因为这在某种程度上阻止了我们对应用程序进行更新（我们不不想让用户重新选择家庭默认设置，因为这会导致数据删除。

我在 3.2 中禁用主页按钮的代码是：

```
@Override
public void onAttachedToWindow() {
     getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
     this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
     super.onAttachedToWindow();
} 
```

并且，在 onCreate 下：

```
KeyguardManager keyguardManager = (KeyguardManager)getSystemService(Context.KEYGUARD_SERVICE);
KeyguardLock lock = keyguardManager.newKeyguardLock(KEYGUARD_SERVICE);
lock.disableKeyguard(); 
```

但是当我运行在我的 3.2 平板电脑上运行的相同代码时，它在我的 4.0 平板电脑上不起作用。

我想知道 4.0 是否有一个新的 API 或方法可以实现与我目前在 3.2 实现中相同的效果。

感谢您的任何帮助或指导。

亚当

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T06:39:45.487

怎么解决。。

编写第二个实现主屏幕的应用程序，当按下主屏幕按钮时，该应用程序将进入前台。然后，您需要从这个应用程序将您的主应用程序推回前台。唯一的问题是您的主屏幕应用程序永远不需要更新，但您应该能够自由更新主应用程序，而无需选项卡要求设置主启动器。

希望这是有道理的..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T18:34:27.323

不......你不能覆盖Android4.0的主页按钮至少......使用“hotveryspicy”的解决方案并且，如果你想响应主页按钮，实现一个主页屏幕。

# java - 在Java中获取存储在PNG图像中的文本

> ID：10077679
> 
> 赞同：2
> 
> 时间：2012-04-09T18:12:45.580
> 
> 标签：java, png, java-2d

根据这个[关于 PNG 格式的 Wikipedia 条目](http://en.wikipedia.org/wiki/Portable_Network_Graphics#Ancillary_chunks)，PNG 图像文件可以在其`tEXt`块中存储嵌入的文本。这允许与图像一起存储一些文本，这些文本在图像本身中不可见，但隐藏在文件中。

问题是：如何`name=value`使用 Java2D api 从 PNG 文件中读取这些对？这`ImageReader`门课对我有帮助吗？任何人都可以制作一个简短的片段吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T18:21:24.240

这应该可以通过[javapng 实现](http://code.google.com/p/javapng/)。

使用`com.sixlegs.png.PngImage#getTextChunk(String)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T16:06:43.757

[PNGJ](http://code.google.com/p/pngj/)库允许您读/写三种类型的文本块。

# kineticjs - 动力学JS。使用 onClick 事件绘制图像

> ID：10077681
> 
> 赞同：3
> 
> 时间：2012-04-09T18:12:51.337
> 
> 标签：kineticjs

我正在尝试使用 onClick 事件将图像绘制到 KineticJS 画布中，但它不起作用。像这样的错误：未捕获的类型错误：无法调用未定义的 imageObj.onload 的方法“添加”如何使舞台和图层变量对 drawImage 函数可见？希望 smb 可以帮助我，因为我已经没有想法这样做

```
 var stage = new Kinetic.Stage({
        container: "container",  // div with id 'container'
        width: 578,
        height: 500,                
    });

    var layer = new Kinetic.Layer();        

    function drawImage(src) {       
        var imageObj = new Image();
        imageObj.onload = function() {
            var image = new Kinetic.Image({
                x: 100,
                y: 110,
                image: imageObj,
                draggable: true,
            });

            layer.add(image);

            stage.add(layer);
        };

        imageObj.src = src;
    } 
```

... img src="testImage.jpg" onclick="drawImage(this.src);"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:15:59.567

```
var layer = new Kinetic.Layer(); 
```

此语句是否在您的事件 onclick 之前调用？ 

如果你这样做怎么办 

```
Img src="testImage.jpg" onclick="var layer = new Kinetic.Layer();  drawImage(this.src);" 
```

# javascript - 如何使此展开/折叠常见问题解答列表起作用？

> ID：10077683
> 
> 赞同：1
> 
> 时间：2012-04-09T18:12:53.297
> 
> 标签：javascript, jquery, css, html-lists, accordion

这是我想要展开/折叠的列表： 我的目标只是切换展开/折叠，让这个列表像手风琴一样。我不明白的是如何使用下面提供的 javascript 将 <div> 从隐藏状态变为可见状态。非常感谢任何资源或直接帮助。

### 船运

```
<li class="plusimageapply"><a name="faq-question">Why do I see prices for some items and not others? How do I get pricing on items that I want to buy?</a></li>

<div style="display: none;">Ths is a sampel of an answer tot he above question.</div>

<li class="plusimageapply"><a name="faq-question">How do I handle an overnight delivery?</a></li>

<div style="display: none;">AMOeasy offers five overnight shipping options. During checkout, simply check the option that best meets your needs and process your order.
  <ul>
    <li>UPS orders must be placed before 5:30pm EST / 2:30pm PST.</li>
    <li>FedEx orders must be place before 8:00pm EST / 5:00pm PST.</li>
  </ul>
  If you are concerned that the item may not be in stock, please call customer service at 877-AMO-4LIFE (877-266-4543).
</div> 
```

以下是我正在使用的 JavaScript

```
<script type="text/javascript">
$(document).ready(function(){
    $('li a').click(function () {
        var questionname= this.name;
        $("#"+questionname).toggle();
        $(this).parent().toggleClass("minusimageapply");
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T18:28:03.263

我可以建议一些有效的 HTML（假设 an`li`是***仅***一个`ol`or的有效子元素，`ul`并且 a`div`不是这些元素***中的******任何***一个的有效子元素），例如：

 *```
<ul>
    <li class="q">Question One</li>
    <li>first answer to question one</li>
    <li>second answer to question one</li>
    <li class="q">Question two</li>
    <li>first answer to question two</li>
    <li>second answer to question two</li>
    <li class="q">Question three</li>
    <li>first answer to question three</li>
    <li>second answer to question three</li>
</ul> 
```

和 jQuery：

```
$('li:not(".q")').hide();

$('li.q').click(
    function(){
        $('li:not(".q")').slideUp();
        $(this).toggleClass('open');
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Wkat3/)。

或使用`dl`：

```
<dl>
    <dt>Question One</dt>
    <dd>first answer to question one</dd>
    <dd>second answer to question one</dd>
    <dt>Question two</dt>
    <dd>first answer to question two</dd>
    <dd>second answer to question two</dd>
    <dt>Question three</dt>
    <dd>first answer to question three</dd>
    <dd>second answer to question three</dd>
</dl>
​ 
```

和 jQuery：

```
$('dd').hide();

$('dt').click(
    function() {
        var toggle = $(this).nextUntil('dt');
        toggle.slideToggle();
        $('dd').not(toggle).slideUp();
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Wkat3/1/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T18:19:04.470

试试这个

```
$('li a').click(function () {
    var $this = $(this);
    $this.parent().next().toggleClass("minusimageapply").slideToggle();
});​ 
```

[**现场示例 **](http://jsfiddle.net/Q3HaT/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-19T16:21:13.417

或这个...

```
$('li.faq-answer').hide();
$('li.faq-question').click(function () {
    $(this).next().slideToggle();
});
```

```
li {
        list-style:none;
}
li.faq-question {
	font-weight: 700;
}
li.faq-question:hover {
	cursor: pointer;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<ul>
	<li class="faq-question">Question 1</li>
	<li class="faq-answer">Curabitur blandit tempus porttitor.</li>
	<li class="faq-question">Question 2</li>
	<li class="faq-answer">Maecenas faucibus mollis interdum. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.</li>
	<li class="faq-question">Question 3</li>
	<li class="faq-answer">Aenean lacinia bibendum nulla sed consectetur. Donec id elit non mi porta gravida at eget metus. Nullam quis risus eget urna mollis ornare vel eu leo.</li>
	<li class="faq-question">Question 4</li>
	<li class="faq-answer">Aenean eu leo quam. Pellentesque ornare sem lacinia quam venenatis vestibulum. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.</li>
	<li class="faq-question">Question 5</li>
	<li class="faq-answer">Praesent commodo cursus magna, vel scelerisque nisl consectetur et.</li>
</ul>
```*

# android - 扩展 ListActivity 的类中的 android 按钮

> ID：10077687
> 
> 赞同：1
> 
> 时间：2012-04-09T18:13:16.100
> 
> 标签：android

在扩展 ListActivity 的类中，我创建的每个项目都显示为多个项目。我想在我的 UI 底部有一个“只有一个”按钮......问题是，当我创建该按钮时，它显示为按钮列表，这不是我想要的......我只需要一个按钮。 ...有人可以帮忙吗？这是我的代码，

```
public class ListViewActivity extends ListActivity implements OnCheckedChangeListener {

TextView label;
CheckBox checkBox;
private ArrayList<Boolean> status = new ArrayList<Boolean>();

public class MyCustomAdapter extends ArrayAdapter<String> {

public MyCustomAdapter(Context context, int textViewResourceId,
  String[] objects) {

    super(context, textViewResourceId, objects);

    for (int i = 0; i < objects.length; i++) {
        status.add(false);
    }
  // TODO Auto-generated constructor stub
 }

@Override
public View getView(final int position, View convertView, ViewGroup parent) {
 // TODO Auto-generated method stub
 //return super.getView(position, convertView, parent);

 View row = convertView;

 if(row==null){
  LayoutInflater inflater=getLayoutInflater();
  row=inflater.inflate(R.layout.main, parent, false); 

 }  

 label=(TextView)row.findViewById(R.id.months);
 label.setText(month[position]);

 checkBox=(CheckBox)row.findViewById(R.id.checkBox);
 checkBox.setFocusable(false);
 checkBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

 @Override
 public void onCheckedChanged(CompoundButton buttonView,boolean isChecked) {

         String event = null;

         if (isChecked) 
         {
         status.set(position, true);
         event = " just checked!";
         } 

        else 
         {
         status.set(position, false);
         event = " just unchecked!";
         }

         Toast.makeText(getApplicationContext(), "checkbox " + position +event,    Toast.LENGTH_SHORT).show();   

 }
 });
 checkBox.setChecked(status.get(position));

 return row;
}
}

String[] month = {
    "January", "February", "March", "April",
    "May", "June", "July", "August",
    "September", "October", "November", "December"
  };

 /** Called when the activity is first created. */
 @Override
 public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 // setContentView(R.layout.main);
 /*setListAdapter(new ArrayAdapter<String>(this,
   R.layout.row, R.id.weekofday, DayOfWeek));*/

   setListAdapter(new MyCustomAdapter(ListViewActivity.this, R.layout.main, month));

   //here are the button I am talking about     
   Button saveButton = (Button) this.findViewById(R.id.button1);

  }

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:26:30.037

如果您只希望底部有一个按钮，则可以将按钮放置在列表视图下方，或使用此处所述的页脚视图：

[Android ListView 页脚视图未放置在屏幕底部](https://stackoverflow.com/questions/3093481/android-listview-footer-view-not-being-placed-on-the-bottom-of-the-screen)

# windows - Windows 7 上的 R CMD 错误 - “R”未被识别为内部或外部命令，

> ID：10077689
> 
> 赞同：31
> 
> 时间：2012-04-09T18:13:17.920
> 
> 标签：windows, r

我正在探索在 Windows 7 上构建包，但在到达命令提示符阶段后遇到了麻烦。以下线程似乎与我遇到问题的主题相同，但问题仍未解决：

*   [无法在 Windows 7 中安装 R 包](https://stackoverflow.com/questions/4740697/cannot-install-r-package-in-windows-7)

问题：每当我在命令提示符中尝试 R CMD 命令时（例如，我已经尝试过`R CMD install pkgName`, `R cmd install pkgName`, `Rcmd install pkgName`，其中是已在 OS X 上编辑并发布在 CRAN 上`pkgName`的实际包的占位符，我在那里解压缩`R CMD check`source 在当前工作目录中），我收到以下错误消息：

```
'R' is not recognized as an internal or external command,
operable program or batch file. 
```

（如果我尝试该`Rcmd install pkgName`命令，则错误开始为它在其独立界面中打开得很好。`'Rcmd' is not ...``R`

我检查了以下指南，但未能成功识别问题：

*   [卡尔·W·布罗曼的网站](http://www.biostat.wisc.edu/~kbroman/Rintro/Rwinpack.html)
*   [Rob J Hyndman 的网站](http://robjhyndman.com/researchtips/building-r-packages-for-windows/)
*   [史蒂文·莫舍的博客](http://stevemosher.wordpress.com/ten-steps-to-building-an-r-package-under-windows/)

想到的最直接的事情是 Windows 中的路径变量设置不正确，但这也没有（还）导致答案。例如，我对路径进行了三次检查以确保它们是正确的，包括 R 版本号、`x64`路径名中的正确等等。

我意识到这是一个远程诊断的复杂问题，但对于解决此问题的任何建议和建议表示赞赏。作为参考，以下是我已经采取的尝试解决此问题的步骤：

*   卸载 R 和 Rtools
*   安装最新版本的[R (2.15.0)](http://cran.r-project.org/bin/windows/base/)
*   安装[Rtools215](http://cran.r-project.org/bin/windows/Rtools/)以匹配 R 版本 2.15.0
*   最初我让 Rtools 指定路径变量（在安装期间打开该选项）。此方法后没有成功。
*   我更新了计算机上的路径变量，其中使用了以下路径：

    ```
    C:\Rtools\bin; C:\Program Files\R\R-2.15.0\bin\x64; 
    ```

*   我还尝试了包含以下路径的`R CMD`(and `Rcmd`) 命令（请注意，这些路径不会导致我计算机上的任何内容，因此我尝试在指定和不指定它们的情况下执行`R CMD`/ ）：`Rcmd`

    ```
    C:\Rtools\perl\bin; C:\Rtools\MinGW\bin; 
    ```

*   尝试添加/删除以下路径，该路径转到 Rtools 文件夹中唯一可见的其他文件夹：

    ```
    C:\Rtools\gcc-4.6.3; 
    ```

*   `R CMD`如前所述，尝试了命令的多种变体。

*   几个月前，当我安装了 R 版本 2.14.1 和 Rtools214 时，我尝试了这一切，但我遇到了完全相同的问题。

注意：我已经在 R 和 Rtools 之前安装了 Cygwin，而且我还没有安装 MikTeX（还）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-09T18:17:54.600

*   调整 PATH 后是否关闭了命令提示符并打开了新的命令提示符？
*   在命令行输入命令`PATH`并确保正确更新路径
*   尝试导航到保存 R.exe 的目录并在本地运行它 - `cd C:\Program...\bin\x64`, `R.exe`.
*   确保您在 Windows 的命令提示符而不是 Cygwin 的终端上运行
*   如果您在 PATH 中的分号后实际上有一个空格，则需要删除它：`/bin;C:/Program...`. 尝试将其与 Joshua 的解决方案结合起来。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-11T15:29:22.987

我在这里附上我的整个解决方案：

1.  安装与我的 R 版本兼容的 Rtools
2.  添加`PATH: C:\Program Files\R\R-2.15.1\bin\x64;C:\Rtools\bin;C:\Rtools\gcc-4.6.3\bin`
3.  在cmd中，输入：`R CMD INSTALL packagename`

点击“进入”，完成。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-16T18:21:05.807

[我在让它工作时遇到了很多麻烦，最后在r-project](http://cran.r-project.org/bin/windows/base/rw-FAQ.html#How-do-I-install-R-for-Windows_003f "r-项目")上找到了金块 （R 不喜欢路径中的空格）所以这就是我最终做到这一切的方式：

*   我将 R 安装到“c:\programs”而不是“c:\program files...”。我到 RSCRIPT.exe 的最终路径是“C:\Programs\R\R-2.15.2\bin\Rscript.exe”
    *   我将该目录添加到我的 PATH 中，但这似乎没有帮助
    *   RStudio 也安装在 c:\Programs 下（例如 c:\Programs\RStudio），但 RTools 安装在“c:\”根目录下（例如 c:\RTools）。
*   我将所有软件包下载到“c:\downloads\r”
*   我在“c:\downloads\r”中打开了一个命令提示符，并从此下载目录运行 R CMD 安装，指定 R 的路径
    *   例如“C:\Programs\R\R-2.15.2\bin\x64\R CMD INSTALL colorspace_1.2-0.zip”

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-01T22:16:40.303

CMD 处理器似乎区分大小写。您必须使用安装与安装

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-11-27T16:16:03.410

简单的解决方案，使用引号：

c:> "C:\Program Files\WinZip\wzunzip.exe"

如果您运行此程序，则无需担心 Program Files 中的空间。

希望这有帮助。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-10-11T10:00:12.070

我在尝试使用 Windows Power Shell 中的 SparkR 时遇到了类似的问题。每次我会执行“.\sparkR.cmd”（我在包含此文件的文件夹中）时，它都会抛出一条错误消息，例如，

> cmd 不被识别为内部和外部命令...blah...blah...blah。

我通过在我的 PATH 中添加“C:\Windows\System32”解决了这个问题。

我重新启动了我的系统，然后重复了这个过程，这一次，我看到了一个新的错误，

> R 不被识别为内部和外部命令...blah...blah...blah。

我尝试了各种方法，包括上面提到的方法。没有任何工作，我可能没有足够的效率让它工作。

[然后我在 code.google](https://code.google.com/p/batchfiles/)遇到了这个地方。我只是将 R.bat 复制到记事本上，将其命名为 R.bat。**将其保存在sparkR.cmd**所在的文件夹中。对我来说，

> C:\Apache\spark-1.5.1-bin-hadoop2.6\bin\

我把它放在我的 PATH 上：

> C:\Apache\spark-1.5.1-bin-hadoop2.6\bin\R.bat

重新启动我的笔记本电脑，以管理员身份打开我的 Power Shell 并输入：

> .\R.bat 帮助

它工作得很好。然后我打字，

> .\sparkR.cmd

它就在那里。

有效。

我希望它对 R 的新手有所帮助。谢谢 [G. Grothendieck](https://stackoverflow.com/users/516548/g-grothendieck)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-25T12:33:51.740

在 .bat 文件中添加一行代码，指定安装 R 的文件夹的路径，然后给出脚本的路径，如下所示 -

```
@ECHO OFF
PATH C:\Program Files\R\R-3.5.1\bin
R CMD BATCH D:\project_abc\helloworld.R 
```

在此之后，运行 .bat 文件，您将看到脚本中的代码将顺利运行。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-27T12:48:34.777

在我的情况下，问题是通过在下面的窗口中选择 PATH 时使用 Edit 而不是 New 来解决的：

[在此处输入图像描述](https://i.stack.imgur.com/A63jJ.png)

选择编辑后，我添加了以下目录：

```
C:\Program Files\R\R-4.0.2\bin\x64 
```

这解决了我的问题。

# visual-studio-2008 - Visual Studio - 设置 .EXE 控制台应用程序的版本号

> ID：10077693
> 
> 赞同：7
> 
> 时间：2012-04-09T18:13:38.030
> 
> 标签：visual-studio-2008, console-application, versioning

我有一个简单的 .EXE 控制台应用程序，通过 Visual Studio 2008 用 C# 编写。如何指定 .EXE 的版本号？当我对程序进行更新时，我想手动更新它。我不想使用“发布向导”（它支持发布版本属性），因为它创建了一个 setup.exe 并且对于我们的简单应用程序（我们通过 XCOPY 部署）来说过于夸张了。

谢谢，马特

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T18:17:12.770

查看`AssemblyInfo.cs`解决方案资源管理器中的“属性”节点。特别是搜索`AssemblyVersion`和`FileVersion`属性。

# ruby - 使用 RVM 安装 Ruby 时出错（安装 RubyGems 失败）

> ID：10077695
> 
> 赞同：6
> 
> 时间：2012-04-09T18:13:49.823
> 
> 标签：ruby, rubygems, rvm

我正在尝试通过 RVM 安装 Ruby 1.9.3。但是，当它安装 RubyGems 时，我得到了这个：

> curl：（22）请求的 URL 返回错误：404 请求的 url 不存在：'http://production.cf.rubygems.org/rubygems/rubygems-.tgz' 尝试使用 ftp:// URL。
> 
> % Total % Received % Xferd 平均速度 时间 时间 当前 Dload 上传总花费 左速度 0 0 0 0 0 0 0 0 --:--:-- 0:05:00 --:--:-- 0curl: ( 28) 连接() 超时！
> 
> 出现错误，请检查 /home/jjw0c4/.rvm/log/ruby-1.9.3-p125/*.log

尝试获取源时出错。停止安装。

我的猜测是URL“ `/rubygems-.tgz`”，最后不应该有版本号吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-09T18:21:19.163

这是早期版本的 RVM 中的一个错误。

更新 RVM：

```
rvm get stable # OR:
rvm get head   # OR if none worked:
curl -L get.rvm.io | bash -s stable 
```

安装程序也会更新（实际上最新`rvm get ...`的只是调用安装程序）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T13:11:36.507

我最终使用 RVM 站点上的命令删除并重新安装了 RVM：

`curl -L get.rvm.io | bash -s stable`

我现在有

`rvm 1.12.1 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]`

安装。

谢谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T23:05:23.953

我不知道这是否与您遇到问题的原因相同，但对我而言，我认为我遇到此问题的原因是因为我的 cURL CA 捆绑包（有效证书颁发机构列表）已过时。所以我认为它在验证 SSL 证书时失败了。当我更新我的 CS 包时，它能够很好地安装 RubyGems。

*   [如何在 RedHat 上更新 cURL CA 包](https://serverfault.com/questions/394815/how-to-update-curl-ca-bundle-on-redhat)
*   [如何在 Ubuntu 10.04 上更新 cURL CA 包](https://serverfault.com/questions/151157/ubuntu-10-04-curl-how-do-i-fix-update-the-ca-bundle)

**更新：**当我在安装 RubyGems 的过程中，我还发现一些 RubyGems.org 服务器已关闭，这就是导致 404 错误的原因。我今天又试了一次，果然奏效了。

# jquery - 我如何覆盖css属性

> ID：10077696
> 
> 赞同：1
> 
> 时间：2012-04-09T18:14:02.043
> 
> 标签：jquery, css, overriding

我如何使用 javascript/jQuery 覆盖 css 属性，例如 cssHooks(jQuery)，但 prop 在外部 css 中。

例如

索引.html

```
<div id="test">abc</div> 
```

样式.css

```
#test {background: red;} 
```

每次我使用背景道具时，我都想隐藏这个元素并且对背景不做任何事情。

“但我不仅想对某些 div (#test) 这样做，而且对我的 css 中带有背景道具的每个元素都这样做”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:16:55.027

如果你使用 jquery，你可以这样做

```
$('#test').css('display','none'); 
```

这将隐藏元素并保持背景不变。

**[编辑]**我认为我以前不理解这个问题。根据您的评论，您想要做的是更改正在使用该`background`属性的内容？我不相信有办法做到这一点。我能想到的唯一选择是遍历每个 DOM 元素并检查是否设置了 element.style.background。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T18:28:59.647

如果要隐藏`background`设置了 css 属性的元素，最好为这些元素添加一个类。然后根据类隐藏元素。

下面的示例隐藏了所有具有 class 的项目`background-set`。

```
$('.background-set').hide(); 
```

`background`如果没有设置属性，更糟糕的方法是抓取元素并过滤掉。我使用 div 选择器开始搜索，但您可以根据需要扩展它。

```
$('div').filter(function() {
    return $(this).css('background').replace('rgba(0, 0, 0, 0) none repeat scroll 0% 0%','').length > 0;
}).hide(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T18:19:15.353

直接在元素上设置的样式值将覆盖 CSS 中设置的内容。如果要隐藏元素，可以这样做：

```
$('#test').hide(); 
```

在内部，这只是设置的快捷方式`elem.style.display = "none";`。

您问题的这一部分让我们感到困惑：“每次我使用背景道具时，我都想隐藏这个元素并且对背景不做任何事情。” 因此，如果您需要更多答案，则需要澄清您的要求。

隐藏元素不会以任何方式改变背景（尽管它将不再可见）。如果您试图在保持元素可见的同时隐藏背景，那么您需要将背景设置回透明。

```
$('#test').css("background", "transparent"); 
```

直接在元素上设置此样式值将覆盖您设置的任何 CSS 样式表规则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T19:07:03.713

使用javascript检查背景属性时，不同的浏览器会返回不同的值。Chrome`rgba(0, 0, 0, 0) none repeat scroll 0% 0%`会为没有设置背景的元素返回，因此检查返回字符串的长度将不起作用，其他浏览器可能不支持 rgba 并返回其他内容。

你真正需要做的就是检查背景属性是否与上述匹配，至少对于 Chrome，然后找出其他浏览器也返回什么，然后做一些非常低效的事情，比如：

```
var pattern=/rgba\(0\, 0\, 0\, 0\)/gi;

$.each($('*'), function(index, item) {
    var bg = $(item).css('background');
    if (!bg.match(pattern)) {
        $(item).hide();
    }
}); 
```

[小提琴](http://jsfiddle.net/adeneo/CunWL/3/)

# c# - 在访问属性之前执行公共代码的模式

> ID：10077699
> 
> 赞同：1
> 
> 时间：2012-04-09T18:14:19.500
> 
> 标签：c#

完全出于节省代码输入的兴趣，我想找到某种方法将文本附加到另一个类返回的成员。这可能没有意义，所以举个例子。我正在研究的是一个管理测试数据的类：

```
public class TestFiles
{
    private const string File1RelativePath = @"TestData\File1.xml";
    private const string File2RelativePath = @"TestData\File2.xml";

    private static string RootPath()
    {
        // don't know the deployment location until runtime 
        return Some_DirectoryName_Determined_At_Run_Time_Returned_BySomeOtherModule();
    }

    public static string File1
    {
        get { return Path.Combine(RootPath() + File1RelativePath); }
    }

    public static string File2
    {
        get { return Path.Combine(RootPath() + File2RelativePath); }
    }
} 
```

这个类完全符合我的要求，我可以简单地通过以下方式调用它：

```
String FileToUseForTest = TestFiles.File1; 
```

问题是我很懒，当我添加更多文件时，我必须在两个地方进行：常量字符串和获取属性。也许我可以在 getter 中包含字符串文字，但即便如此，我也必须在每个 getter 中调用 Path.Combine(RootPath() ... ，这对我来说工作量太大了。

因此，尝试另一种方法，由于以下原因，该方法不起作用：

```
public class TestFiles
{
    public class FileRelativePaths
    {
        private const string File1RelativePath = @"TestData\File1.xml";
        private const string File2RelativePath = @"TestData\File2.xml";
    }

    private static FileRelativePaths relPaths = new RulePackages();

    FileRelativePaths FullPaths
    {
        get { return relPaths; }
    }

    private static string RootPath()
    {
        // No longer called, but somehow need to find a way to append to paths returned in FullPaths
        return Some_DirectoryName_Determined_At_Run_Time_Returned_BySomeOtherModule();
    }
} 
```

这几乎可行，我得到了强类型，调用者可以通过

```
String FileToUseForTest = TestFiles.FullPaths.File1; 
```

但问题是这只是给了我相对路径，我真的想在返回的字符串中附加一些代码（通过使用方法 RootPath()）。

那么，有什么方法可以让它工作，同时仍然具有强类型并将代码长度保持在最低限度？我有点接受使用上面的第一种方法，但我想我会问是否有创造性的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:37:56.380

如何使用运算符重载来执行包含根路径的隐式转换？

```
class Program
{
    static void Main(string[] args)
    {
        RelativePath relative = @"Relative\Path\One";

        Console.WriteLine(relative.Path);
        string path = relative;
        Console.WriteLine(path);

        Console.ReadLine();
    }
}

public class RelativePath
{

    public static string RootPath()
    {
        return @"C:\MyRootPath\";
    }

    public string Path
    {
        get;
        protected set;
    }

    public RelativePath(string relativePath)
    {
        this.Path = relativePath;
    }

    public static implicit operator RelativePath(string path)
    {
        return new RelativePath(path);
    }

    public static implicit operator string(RelativePath relativePath)
    {
        return System.IO.Path.Combine(RootPath(), relativePath.Path);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T19:09:00.343

就个人而言，我只是让自己不得不在两个地方进行更改。这是我不太喜欢的另一种选择，但据我了解，它满足您的标准：

```
public enum XmlFile{
    File1,
    File2
};

public static class TestFiles{
    const string RelativeDirectory = @"TestData";
    const string XmlExtension = @"xml";
    static string RootPath {
        get
        {
            return Some_DirectoryName_Determined_At_Run_Time_Returned_BySomeOtherModule();
        }
    }

    //overload as necessary for other extensions or pass it as an additional parameter
    public static string GetFullPath(XmlFile file){
        return string.Format(@"{0}{1}\{2}.{3}", RootPath, RelativeDirectory, file, XmlExtension);
    }
} 
```

这个片段有一些不幸的副作用：

*   使用约定将枚举成员与文件名相关联
*   依赖于枚举的 ToString()
*   假设 RelativeDirectory 始终相同（否则，您将需要进一步的约定来适应）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T18:32:49.320

只需使用一个小的辅助函数...

```
private static string fixupPath (string dir)
{
    return Path.Combine(RootPath() + dir); 

}

public static string File1
{
    get { return fixupPath(File1RelativePath); }
} 
```

如果您真的想优化击键而不是可维护性，请使用较短的函数名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T18:39:24.960

这样的事情怎么样？注意，前面有未经测试的代码：

```
public enum TestFileType {
    File1,
    File2,
}

public class TestFiles
{
    private static Dictionary<TestFileType, String> filePaths = new Dictionary<TestFileType, String> 
        { 
            { TestFileType.File1, @"TestData\File1.xml" }, 
            { TestFileType.File2, @"TestData\File2.xml" } 
        };

    public static String GetFile(TestFileType fType) {
        return Path.Combine(RootPath() + filePaths[fType]);
    }
}

// Use thus: 
TestFiles.GetFile(TestFileType.File1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T18:41:35.150

有几件事浮现在脑海中。首先，你可以有一个枚举、一个字典和一个“get”函数，而不是离散属性：

```
public enum TestFile { File1, File2 };

public class TestFiles {

  private static Dictionary<TestFile,string> _testFiles = new Dictionary<TestFile,string> {
    { TestFile.File1, @"TestData\File1.xml" },
    { TestFile.File2, @"TestData\File2.xml" },
  };

  public string RootPath() {
    return @"C:\";
  }

  public string Get( TestFile tf ) {
    return Path.Combine( RootPath(), _testFiles[tf] );
  }

  // even better, you can override the array indexing operator
  public string this[TestFile tf] {
    get { 
        return Path.Combine( RootPath(), _testFiles[tf] );
    }
  }
} 
```

如果你想抽象出重复的`Path.Combine`代码，你总是可以使用一个辅助类，尽管我怀疑你会在这里获得很多。不过，它可能会增加可读性：

```
public static class TestFileHelper {
    public static string RootPath() {
      return @"C:\";
    }

    public static string RootedAtTestDir( this string s ) {
        return Path.Combine( RootPath(), s );
    }
} 
```

然后，不用`Path.Combine`到处打电话，你可以写：

```
return _testFiles[tf].RootedAtTestDir(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-09T19:12:57.270

这实际上可能是扩展的一个很好的用例。您可以将其添加到测试程序集/文件中，然后在需要的地方引用它：

```
public static class TestExtensions
{
    private static string RootPath = @"C:\Some\Root\Path";
    public static string AddRoot(this string path)
    {
        return Path.Combine(RootPath, path);
    }
} 
```

另一种选择是也使用字典，以防您要定义多个“根”，这样您就可以指定两件事：路径和根键。

```
public static class TestExtensions
{
    private static Dictionary<string, string> RootPaths = new Dictionary<string, string>();

    public static void RegisterRoot(string rootKey, string rootPath)
    {
        // Omitted null checking, but should do it.
        RootPaths[rootKey] = rootPath;
    }

    public static string AddRoot(this string path, string rootKey)
    {
        return Path.Combine(RootPaths[rootKey], path);
    }
} 
```

用法很简单。只需在任何字符串实例上调用扩展方法。IE：

```
// Single root version.
TestFiles.File1.AddRoot(); 
// String literal...
@"Relative\Path\File.xml".AddRoot();
// Dictionary root version.
TestExtensions.RegisterRoot("testRoot", @"C:\Some\Test\Directory");
TestFiles.File1.AddRoot("testRoot"); 
```

希望有帮助。

# asp.net - 如果表中存在多个条目，则动态显示 DropDownList

> ID：10077701
> 
> 赞同：0
> 
> 时间：2012-04-09T18:14:31.960
> 
> 标签：asp.net, vb.net, dynamic, drop-down-menu, multiple-instances

如果存在多个，我正在尝试创建一个选项来选择 SQL 表中的特定条目。下面列出的 Sub 用于文本框 (MOTxt) 和按钮 (GotMO)，用于检查从 SQL 中提取的 MO#。根据输入的数字，将使用该行的数据填充页面上的其他文本框。也有例外情况，其中 MONumber 将被输入不止一次，并且每个条目关联的不同数据。所以，这是我的情况。如果我们在表中列出了重复的 MONumber，它将使用它找到的第一个更新条目填充文本框。我想创建一个动态下拉列表（仅在找到多个时才显示）显示找到的每个 MONumber 的“名称”字段条目，然后从该列表中选择正确的名称，然后用该选定的数据行填充文本框。

这是我背后的代码：

```
Protected Sub GotMONum_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles GotMO.Click
    Dim da As New SqlDataAdapter
    Dim ds As New DataSet
    Dim MOLength As String = MOTxt.Text
    Dim TieOffTemp As Integer
    Dim QTYTemp As Integer
    Dim MySelectQuery As String = "SELECT Name,ProdLine,NoRods,TieOffs FROM z_md_Outwrap WHERE MONumber = @MONum"
    Dim myConnection As New SqlConnection(ConfigurationManager.ConnectionStrings("GLoomisDBConnectionString").ConnectionString)
    Dim myCommand As New SqlCommand(MySelectQuery, myConnection)

    Message2.InnerHtml = ""
    Message.InnerHtml = ""
    If (Me.MOTxt.Text = "") Then
        MsgBox("Please enter an MO Number to check")
    Else
        ' Fills fields based on MO Number
        myCommand.Parameters.AddWithValue("@MONum", MOTxt.Text)
        myConnection.Open()
        da.SelectCommand = myCommand
        da.Fill(ds, "tblData")
        myConnection.Close()

        If ds IsNot Nothing AndAlso ds.Tables.Count > 0 AndAlso ds.Tables(0).Rows.Count > 0 Then
            NameTxt.Text = ds.Tables("tblData").Rows(0).Item("Name")
            ProdLineTxt.Text = ds.Tables("tblData").Rows(0).Item("ProdLine")
            NoRodsTxt.Text = ds.Tables("tblData").Rows(0).Item("NoRods")
            TieOffsTxt.Text = ds.Tables("tblData").Rows(0).Item("TieOffs")

            If Integer.TryParse(NoRodsTxt.Text, QTYTemp) Then
                If Integer.TryParse(TieOffsTxt.Text, TieOffTemp) And TieOffTemp > 0.0 Then
                    AmountVal.Text = "$" & (QTYTemp * TieOffTemp * 0.18)
                End If
            End If
        Else
            Message.InnerHtml = "No MO# found as entered. Please check for errors."
            Message.Style("color") = "red"
        End If
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T20:56:00.863

如果我这样做，我会更改代码，以便单击函数中的内容位于单独的函数中，以便您可以轻松地从其他函数中调用它。我会使用强类型对象而不是数据集来增加简洁性。还要向“加载数据”函数添加几个字符串参数以接受monum 和name 字符串。

要查找倍数，只需检查数据库返回的计数（datatable.rows.count 或 StronglyTypedObject.count）

接下来，创建一个不可见的下拉列表控件，并在行数 > 0 时将其设置为可见。

使用 Linq，绑定下拉列表相当简单。然后在 onselectedindexchanged 事件上调用新的“加载数据”事件，传递选择的名称和 monumber。

我不会填写强类型对象，因为这个问题已经提出了很多要求，但为了让您开始......以下代码示例就是这样，不应将其视为您将使用的实际代码。

```
Protected Sub GotMONum_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles GotMO.Click

  loaddata(monum.text, "")
end sub

protected sub loaddata(byval monum as string, byval name as string)
  'your code here along with the following lines after:
  Dim MySelectQuery As String = ""
  myCommand.Parameters.AddWithValue("@MONum", MOTxt.Text)

  if not string.isnullorempty(name)
    MySelectQuery = "SELECT Name,ProdLine,NoRods,TieOffs FROM z_md_Outwrap WHERE MONumber = @MONum and Name = @name"
    mycommand.Parameters.AddWithValue("@Name", Name)
  else
    MySelectQuery = "SELECT Name,ProdLine,NoRods,TieOffs FROM z_md_Outwrap WHERE MONumber = @MONum "
  End If
  'again, instead using a dataset, convert it to a list(of StronglyTypedObject)

  if StronglyTypedObject.count > 0 then
     dropdownlist.visible = true
     dim dropdownlistcontents = (from a in StronglyTypedObject.AsEnumerable _
                              Select a.Name).Distinct
     dropdownlist.datasource = dropdownlistcontents
     dropdownlist.databind
  end if
end sub

Protected Sub DDL_OnSelectedIndexChanged(ByVal sender As Object, ByVal e As System.EventArgs) handles dropdownlist.selectedindexchanged
   loaddata(monum.text, "dropdownlist.selectedvalue")
end sub 
```

希望这能让你上路…… - Mutek

# android - 定位视图，使每个视图占据相同的空间

> ID：10077706
> 
> 赞同：0
> 
> 时间：2012-04-09T18:14:54.403
> 
> 标签：android, android-layout, android-linearlayout

我试图在一行中放置几个​​视图（比如说 N），这样每个视图都将占据屏幕宽度的 1/N。我知道如何使用 LinearLayout( `layoutWeight`) 来实现这一点，但问题是我需要有另一个布局将出现在该行中的某些视图下方。问题是，由于所有这些视图都包含在 LinearLayout 中，因此我无法将其他布局放置在此布局中（原因很明显），并且我无法从 LinearLayout 引用特定视图并将我的视图放置在其下方。一些视觉帮助以帮助解释我自己：

![在此处输入图像描述](../Images/e88870a0a8ec2a0579600b9e7091b4fc.png)

所以我想在上面第三个框的正下方显示灰色框。目前，我通过获取屏幕宽度并将其分成 N 个相等的部分并为此视图设置适当的边距来实现这一点。不过，我不太喜欢这个。有没有更好的方法来实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T19:02:12.237

所以这是我的想法，因为 android 上的 xml 真的很难。

在线性布局内部创建 2 个部分，其中 1 个是线性布局，另一个是相对布局，使用 LayoutWeight 使用原始线性布局将它们分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T19:29:18.720

所以你想让一个 View 或 ViewGroup 定位，使其中心位于第三个框的中心正下方？

它可能但不是很优雅：

这个想法是使用表格布局和 android:layout_span 来连接第二行中的 3 个单元格，并在该表格范围内使用居中视图。

示例表布局：

```
<TableRow>

    <TextView
        android:layout_column="0"
        android:gravity="center"
        android:padding="3dip"
        android:text="0" />

    <TextView
        android:layout_column="1"
        android:gravity="center"
        android:padding="3dip"
        android:text="1" />

    <TextView
        android:layout_column="2"
        android:gravity="center"
        android:padding="3dip"
        android:text="2" />

    <TextView
        android:layout_column="3"
        android:gravity="center"
        android:padding="3dip"
        android:text="3" />

    <TextView
        android:layout_column="4"
        android:gravity="center"
        android:padding="3dip"
        android:text="4" />
</TableRow>

<TableRow>

    <TextView
        android:layout_column="0"
        android:gravity="center"
        android:padding="3dip"
        android:text="0" />

    <RelativeLayout
        android:layout_span="3"
        android:padding="3dip" >

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:gravity="center"
            android:text="Button 1,2,3" />
    </RelativeLayout>

    <TextView
        android:layout_column="4"
        android:gravity="center"
        android:padding="3dip"
        android:text="4" />
</TableRow> 
```

# java - 读取父类中的子类变量

> ID：10077710
> 
> 赞同：0
> 
> 时间：2012-04-09T18:15:00.043
> 
> 标签：java

我正在尝试访问父类中的子类变量。你能建议我如何根据下面的代码片段进行操作吗？

```
public abstract class Base{

//some abstract methods
//one more method to parse the xml
    public final void parseXml(){
        String clName = Thread.currentThread().getStackTrace()[1].getClassName(); //child class name
        if(xmlFile_+clName){ //i am trying to access "Test.xmlFile_Test",
          //execute the if string is available
        }

    }
}
public class Test extends Base{
    public static final String xmlFile_Test = "<Hello>sample</Hello>";
    public int execute(){
        parseXml(); //This should call  base class method
    }
} 
```

我的错误步骤在哪里..这是伪代码，可能会帮助您回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T18:23:31.357

创建`getXMLFile()`在基类及其所有子类中调用的方法

```
public class Base{
    protected String getXMLFile(){
        return "BaseXML";
    }

    public void foo(){
        if(getXMLFile() ....){
            ...
        }
    }
}

public class Test{
    @Override
    protected String getXMLFile(){
        return "TestXML";
    }
} 
```

# ruby-on-rails - 如何提交消息然后将其添加到消息列表的顶部而不在 ruby on rails 中刷新页面？

> ID：10077713
> 
> 赞同：0
> 
> 时间：2012-04-09T18:15:07.790
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我有一个微博/消息系统，每次提交新的微博或评论/消息时，页面都会刷新以显示它。

由于我已经使用 :remote => true 在我的表单上设置了 ajax，我现在希望在不刷新页面的情况下添加或添加微博。

到目前为止，我有：

```
class MicropostsController < ApplicationController

def create

    if params[:micropost][:user_id].to_i == current_user.id

     @comment = Comment.new(:user_id => current_user.id)
        respond_to do |format|
            if @micropost.save

            format.js   { render :post_on_wall }
            else
            format.js   { render :form_errors }

            end
        end
    else 
```

如果表单通过了所有验证并且用户在单击发布之前实际上输入了有效的内容，那么“如果@micropost.save”将为真，它将在我命名为“post_on_wall”的文件中执行 js。如果 "@micropost.save" 将执行 "form_errors" 中的代码。

在 form_errors 中，我添加了一个警报，只是为了检查当用户不输入任何内容并点击帖子时微博不会被发布。它工作正常。

在“post_on_wall”文件中，我有这个：

```
$('.microposts').prepend('<%= j render("users/partials/microposts") %>'); 
```

**这样做的问题是它基本上抓取了正在呈现“users/partials/ microposts** ”的文件中循环的所有微帖子，然后将它们放在“.microposts”div中的所有内容之上。即使是位于“.microposts”顶部的发布微博的实际表单也被推到刚刚添加到页面的内容下方。在这种情况下，当我使用分页并将 per_page 设置为 10 时，向下 10 个空格。

这是我的html结构。

```
<div class='cf' id='content'>
    <div id='leftColumn'>
    </div>
    <div class='microposts'>
    </div>
    <div id='rightColumn'>
  </div>
</div> 
```

每个微博及其相关评论都存储在一个名为“.postHolder”的类中。

我觉得我的做法是错误的。这个文件：“users/partials/microposts”指向的文件基本上有代码可以帮助一次显示几个微帖子（10）。这用于与我正在尝试做的完全不同的事情（分页+无限滚动）。

无论如何，我觉得我应该处理的方法是如何检测刚刚发布的新帖子。它应该被检测为一个新的“.postHolder”类，然后在找到它之后应该将它添加到“postHolder”列表的顶部，而不是替换它上面的微帖子表单。

我正在考虑创建一个单独的 div 来保存所有微帖子，然后将此 div 放在微帖子表单下方。这样我就不必担心表单被推下，因为它不会在 div 里面包含实际上将是我将要准备的所有微博。

这仍然给我留下了获取刚刚发布的帖子然后将其添加到列表顶部的问题。

无论如何，我真的很想要一个可以帮助我实现此功能的示例或一些好的建议。

感谢您的时间亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T19:52:31.193

使用您当前的 HTML/部分结构，只需执行此操作（替换整个微帖子，因为那是您的部分创建的内容）。

```
$('.microposts').html('<%= escape_javascript render("users/partials/microposts") %>'); 
```

但是，在未来，有一个渲染微帖子的 _micropost 部分，然后您可以轻松地将微帖子添加到 .microposts 的顶部。

# java - 使用 java 代码将证书添加到密钥库

> ID：10077714
> 
> 赞同：20
> 
> 时间：2012-04-09T18:15:08.637
> 
> 标签：java, https, ssl-certificate, keytool, digital-certificate

我正在尝试使用服务器的 .cer 证书文件建立 https 连接。我可以使用浏览器手动获取证书文件，并使用 keytool 将其放入密钥库中。然后我可以使用 java 代码访问密钥库，获取我添加到密钥库的证书并连接到服务器。

然而，我现在甚至想要实现获取证书文件并将其添加到我的密钥库的过程，使用 java 代码而不使用 keytool 或浏览器来获取证书。

有人可以告诉我如何解决这个问题以及我需要做什么吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-09T18:27:59.930

编辑：[这](https://web.archive.org/web/20130319003303/http://dzone.com/snippets/ssl-download-certificate-chain)似乎正是你想要的。

使用以下代码可以在运行时添加信任库。

```
import java.io.InputStream;
import java.security.KeyStore;

import javax.net.ssl.SSLContext;
import javax.net.ssl.TrustManager;
import javax.net.ssl.TrustManagerFactory;

public class SSLClasspathTrustStoreLoader {
    public static void setTrustStore(String trustStore, String password) throws Exception {
        TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance("X509");
        KeyStore keystore = KeyStore.getInstance(KeyStore.getDefaultType());
        InputStream keystoreStream = SSLClasspathTrustStoreLoader.class.getResourceAsStream(trustStore);
        keystore.load(keystoreStream, password.toCharArray());
        trustManagerFactory.init(keystore);
        TrustManager[] trustManagers = trustManagerFactory.getTrustManagers();
        SSLContext sc = SSLContext.getInstance("SSL");
        sc.init(null, trustManagers, null);
        SSLContext.setDefault(sc);
    }
} 
```

我使用此代码与活动目录服务器建立安全的 LDAP 连接。

[这](http://knowledge-oracle.blogspot.com/2009/02/import-private-key-and-certificate-in.html)也很有用，底部有一个类，可以在运行时导入证书。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-31T10:18:48.530

我为此编写了小型库[ssl-utils-android](https://github.com/mklimek/ssl-utils-android)。

您可以通过提供资产目录中的文件名来简单地加载任何证书。

用法：

```
OkHttpClient client = new OkHttpClient();
SSLContext sslContext = SslUtils.getSslContextForCertificateFile(context, "BPClass2RootCA-sha2.cer");
client.setSslSocketFactory(sslContext.getSocketFactory()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-12T16:47:10.087

刚刚关注

[https://docs.oracle.com/cd/E19509-01/820-3503/ggfgo/index.html](https://docs.oracle.com/cd/E19509-01/820-3503/ggfgo/index.html) [https://www.sslshopper.com/article-most-common-java-keytool-keystore-commands.html](https://www.sslshopper.com/article-most-common-java-keytool-keystore-commands.html)

```
javac -cp .:/home/ec2-user/velu/*: QuickStart.java
java -cp .:/home/ec2-user/velu/*:  QuickStart

[ec2-user@ip-10-30-0-66 velu]$ ls
QuickStart.class  commons-codec-1.2.jar       input-payload.txt          logback-core-1.1.3.jar
QuickStart.java   commons-httpclient-3.1.jar  httpclient-4.5.jar  jdk-8u101-linux-x64.rpm    slf4j-api-1.7.12.jar
certificates      commons-logging-1.2.jar     httpcore-4.4.1.jar  logback-classic-1.1.3.jar

import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

import org.apache.commons.httpclient.HttpClient;
import org.apache.commons.httpclient.HttpMethod;
import org.apache.commons.httpclient.MultiThreadedHttpConnectionManager;
import org.apache.commons.httpclient.methods.PostMethod;
import org.apache.commons.httpclient.methods.StringRequestEntity;
import org.apache.commons.httpclient.params.HttpClientParams;
import org.apache.http.impl.client.CloseableHttpClient;
import org.apache.http.impl.client.HttpClients;

public class QuickStart {

        public static void main(String[] args) throws Exception {
                System.setProperty("javax.net.ssl.keyStore", "/home/user/velu/certificates/myownOut.pkcs12");
                System.setProperty("javax.net.ssl.keyStorePassword", "password");

                System.setProperty("javax.net.ssl.trustStore", "/home/user/velu/certificates/myTrustStore");
                System.setProperty("javax.net.ssl.trustStorePassword", "password");

System.setProperty("org.apache.commons.logging.Log", "org.apache.commons.logging.impl.SimpleLog");
System.setProperty("org.apache.commons.logging.simplelog.showdatetime", "true");
System.setProperty("org.apache.commons.logging.simplelog.log.httpclient.wire", "debug");
System.setProperty("org.apache.commons.logging.simplelog.log.org.apache.commons.httpclient", "debug");

                CloseableHttpClient httpclient = HttpClients.createDefault();

                HttpClientParams params = new HttpClientParams();
                params.setConnectionManagerClass(MultiThreadedHttpConnectionManager.class);
                HttpClient client = new HttpClient(params);

                HttpMethod m = new PostMethod("https://velu.org:443/Services/com/Echo");

                m.setRequestHeader("content-type", "application/xml");
                //m.setRequestHeader("Accept", "application/xml");
//              m.setRequestHeader("SOAPAction", "Echo");
                try {

                        ((PostMethod) m).setRequestEntity(new StringRequestEntity(getFileContent(), "application/xml", "UTF-8"));
                        System.out.println("VELU EXCUTING");
                        client.executeMethod(m);
                        if (m.getStatusCode() == 200) {
                                System.out.println("VELU RECEIVED:" + m.getResponseBodyAsString());
                        }
                } catch (IOException e) {
                        System.out.println(e.toString());
                } finally {
                        m.releaseConnection();
                }

        }

        public static String getFileContent() {

                BufferedReader br = null;
                String fileContent = "";
                try {

                        br = new BufferedReader(new FileReader(
                                        "/home/user/velu/input-payload.txt")); // Note that this file format should be proper.
                        String sCurrentLine = "";
                        while ((sCurrentLine = br.readLine()) != null) {
                                fileContent += sCurrentLine;
                        }
                        System.out.println(fileContent);

                } catch (IOException e) {
                        e.printStackTrace();
                } finally {
                        try {
                                if (br != null)
                                        br.close();
                        } catch (IOException ex) {
                                ex.printStackTrace();
                        }
                }
                return fileContent;
        } 
```

# android - currentTimeMillis() 未返回预期结果

> ID：10077716
> 
> 赞同：1
> 
> 时间：2012-04-09T18:15:32.417
> 
> 标签：android

在我的应用程序中，我需要解析一个包含事件结束时间的 JSON。当这个事件正在进行时，我需要计算完成那个事件的剩余时间。为此，我使用这段代码：

```
// I get the time and convert it from millis to seconds
long end = System.currentTimeMillis() / 1000;                      
techsTime.add((int) (queue.event.get("event0").endtime - end)); 
```

一旦我获得了以秒为单位的时间，我将其转换为 d,h,m,s。这在一些设备（如 Optimus Black 和 HTC Desire）中就像一种魅力。但是今天我用朋友的中兴Blade测试了我的应用程序，事件的剩余时间很奇怪。它以负数和数字出现，与原始数字相距甚远。我用不同的值测试了应用程序并且没有模式，它们就像随机数，例如：

擎天柱黑 -> 21m 32s
ZTE Blade -> -38m -57s

我认为 System.currentTimeMillis() 在两种设备中可能不同，但它们都使用 CM7 作为操作系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T18:21:41.287

我认为问题可能在于其中一台设备的时钟设置不正确。根据您提供的时间提取，差异似乎恰好是一小时，这可能是时钟设置错误的原因。当您考虑时间设置时，还要查看时区。可能是两台设备显示相同的时间，但其中一台配置在不同的时区。

现代设备在网络上不同步时钟会很奇怪，但对于中兴通讯来说仍然是可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T18:18:15.617

使用`System.nanotime()`- 它是专门为测量 2 个事件之间的时间而创建的。 `System.currentTimeMillis()`使用不会每 1 毫秒更新一次的系统时钟，因此**不**可靠并给出不同的结果。

# geolocation - W3C Geolocation API 极其不准确

> ID：10077717
> 
> 赞同：1
> 
> 时间：2012-04-09T18:15:40.587
> 
> 标签：geolocation, w3c-geolocation

我在我的新 web 项目中使用 W3C 地理定位 api。当我在大城市或附近的某个地方时，该 api 可以完美运行！:)

问题是：在国内，一个拥有大约 5000 名居民的小城市，它非常不准确。我的意思是..在我看来5k并没有那么小。另外：我是通过 WiFi 登录的，所以它至少应该靠近我的位置。

但是当我在这里登录我的 WiFi 时在我的笔记本电脑上使用它时，该 api 将我放置在距离我正确位置大约 140 公里（！！！）的地方。这对于我的新 webapp 来说是绝对不能接受的。

你们中有人知道为什么它不准确吗？

最好的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T18:18:54.127

API 的实现取决于客户端。大多数手机将使用其内置的 GPS 来确定位置。笔记本电脑上的网络浏览器没有该选项，因此将退回到替代品。看起来您的浏览器正在使用 GeoIP 数据库。

# wcf - 如何使用代码为 WCF 服务编写自定义绑定？

> ID：10077718
> 
> 赞同：0
> 
> 时间：2012-04-09T18:15:41.883
> 
> 标签：wcf, custom-binding

如何为 WCF 服务编写自定义绑定并将其包含在服务中。我需要用不在配置文件中的代码来做。

如果我编写自定义绑定，那么如何将新绑定包含在我的 WCF 服务中？目前我知道如何在配置中执行此操作，但是如何在代码中执行此操作？或者在创建自定义绑定之后，如何让我的 WCF 服务使用新的绑定？

# python - Django - DatabaseError：没有这样的表

> ID：10077721
> 
> 赞同：11
> 
> 时间：2012-04-09T18:16:09.250
> 
> 标签：python, database, django, django-models

我定义了两个模型：

```
class Server(models.Model):
    owners = models.ManyToManyField('Person')

class Person(models.Model):
    name = models.CharField(max_length=50)

admin.site.register(Server)
admin.site.register(Person) 
```

之后我什至检查了 sql，只是为了好玩：

```
BEGIN;
CREATE TABLE "servers_server_owners" (
    "id" integer NOT NULL PRIMARY KEY,
    "server_id" integer NOT NULL,
    "person_id" integer NOT NULL,
    UNIQUE ("server_id", "person_id")
)
;
CREATE TABLE "servers_server" (
    "id" integer NOT NULL PRIMARY KEY,
    "name" varchar(50) NOT NULL,
    "port" integer unsigned NOT NULL,
    "state" integer NOT NULL
)
;
CREATE TABLE "servers_person" (
    "id" integer NOT NULL PRIMARY KEY,
    "name" varchar(50) NOT NULL
)
;
COMMIT; 
```

它甚至说`CREATE TABLE "servers_server_owners"`

我跑去`syncdb`将新模型安装到数据库中。我去管理界面定义了一些要玩的对象，但出现以下错误：

```
DatabaseError at /admin/servers/server/1/  
no such table: servers_server_owners 
```

我关闭了开发服务器，`syncdb`再次运行，启动服务器：仍然是同样的问题。为什么它找不到表，即使它只是告诉我它创建了 id？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T21:41:38.830

作为未来的提示，请查看[South](http://south.aeracode.org/)，这是一个非常有用的实用程序，可以将模型更改应用到数据库，而无需在每次更改模型时都创建新数据库。

有了它，您可以轻松：`python manage.py migrate app_name`South 将编写您的模型更改。[文档](http://south.readthedocs.org/en/0.7.6/index.html)非常简单。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-10T11:51:53.683

实际上问题是该表从未被创建。由于我对 django 相当陌生，我不知道它`./manage.py syncdb`不会更新现有模型，而只会创建不存在的模型。

因为模型“服务器”在我添加另一个模型之前就已经存在，并且它已经在数据库中，所以“syncdb”实际上并没有创建新表。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-20T16:39:00.503

我今天遇到同样的问题并解决它。我认为您错过了教程 1 中的一些命令。请按照以下步骤操作：

```
./python manage.py makemigrations polls
python manage.py sql polls
./python manage.py syncdb 
```

然后修复它并获得表民意调查，您可以看到创建的表。你应该阅读`manage.py makemigrations`命令。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-09T07:58:30.463

对于 django 1.9，这就是我所做的，它解决了这个问题。

> > python manage.py makemigrations app_name
> > 
> > python manage.py 迁移

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-28T07:20:20.393

1.  使用“manage.py help”检查命令
2.  如果你找到了 migrate 和 makemigration，这意味着你的 python 已经更新了

第1步：

```
python manage.py makemigration 
```

结果1：

```
Migrations for 'mainsite':
mainsite\migrations\0001_initial.py
- Create model Post 
```

第2步：

```
python manage.py migrate 
```

结果2：

```
Operations to perform:
Apply all migrations: admin, auth, contenttypes, mainsite, sessions
Running migrations:
Applying mainsite.0001_initial... OK 
```

最后，运行服务器。完毕

# macos - 如何在 Mac 上找到 CPU 密集型课程？

> ID：10077724
> 
> 赞同：0
> 
> 时间：2012-04-09T18:16:25.197
> 
> 标签：macos, cocoa

所有，我有一个处理媒体文件的巨大应用程序。当我启动我的应用程序并开始处理媒体文件时，我得到 102% 的 CPU 使用率。我真的很想要一个可以告诉我哪个类是 CPU 密集型的工具。这样我就可以跳到那个班级并修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:24:53.020

您可以使用 Instruments 中的[Time Profiler 工具](https://developer.apple.com/library/mac/#documentation/AnalysisTools/Reference/Instruments_User_Reference/TimeProfilerInstrument/TimeProfilerInstrument.html)。

它将为您提供所有功能的运行时间的详细信息。

# foursquare - 如何识别“已编辑”协作列表中条目的创建者？

> ID：10077728
> 
> 赞同：0
> 
> 时间：2012-04-09T18:16:39.177
> 
> 标签：foursquare

它看起来不像响应包含项目的“用户”对象，并且在实现中没有任何关于它的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:15:43.360

在协作列表中，项目的创建者默认是列表的创建者。因此，如果您没有看到与某个项目关联的用户项目，则它是由列表创建者创建的。朋友添加的项目将包含该朋友的用户对象。

# java - 如何在谷歌地方网址中嵌入经度和纬度

> ID：10077729
> 
> 赞同：0
> 
> 时间：2012-04-09T18:16:47.357
> 
> 标签：java, url, google-places-api

我正在使用 GenericUrl 类将我的纬度和经度嵌入 url。我该如何使用`GenericUrl`？

以下是一些使用的地方`GenericUrl`：

[http://javadoc.google-api-java-client.googlecode.com/hg/1.0.10-alpha/com/google/api/client/http/class-use/GenericUrl.html](http://javadoc.google-api-java-client.googlecode.com/hg/1.0.10-alpha/com/google/api/client/http/class-use/GenericUrl.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:28:39.583

从阅读文档[`GenericURL`](http://javadoc.google-api-java-client.googlecode.com/hg/1.0.10-alpha/com/google/api/client/http/GenericUrl.html)，看来这个类是为了解码一个 URL 而不是构建一个新的。您将需要使用不同的机制来构建 Google Places URL。

# php - MySQL 日期时间格式

> ID：10077731
> 
> 赞同：2
> 
> 时间：2012-04-09T18:16:49.973
> 
> 标签：php, mysql, datetime, date-formatting

我正在用 HTML、PHP 和 MySQL 创建一个注册页面。我想在注册中添加一个隐藏字段用作加入日期。

让包含当前日期和时间的隐藏字段或将当前日期时间分配给变量并在 SQL 插入语句中使用它会更好吗？

无论如何，如果使用以下隐藏的表单字段，将日期时间存储为的日期格式是`2010-07-06 07:55:12`什么？

```
<input name="joindate" type="hidden" id="joindate"  value="<?php echo date(''); ?>"> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T18:20:05.650

尝试

```
 echo date('Y-m-d g:i:s',time()); //PHP 
```

我们更好的 MySQL 使用`datetime`归档并调用 `NOW()

```
 INSERT INTO registration (Name,Date) VALUES ('Jarlsberg Cheese',NOW()) ; 
```

在你的 SQL 语句中

我希望这有帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T18:20:43.613

不要使用隐藏字段，将变量分配给当前日期/时间（或使用 MySQL 中的 NOW() 函数）并将其用作连接日期。

原因是有人可以轻松地使用 Firebug 之类的工具来编辑隐藏的加入日期字段，并将您不希望的值放入数据库中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T18:19:38.827

您甚至可以在 SQL 中执行此操作：插入用户 (...,joindate) 值 (...,NOW());

这样你就不必摆弄格式..

编辑：但是如果你不喜欢这个，那么将这个值传递给客户端并返回是没有意义的。只需在创建插入查询时设置它。使用隐藏字段，您冒着有人实际更改您的值并将其设置为意想不到的风险。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-09T18:20:09.190

您提到的日期格式是有效的 MySQL 日期时间。在 PHP 中，您可以像这样回显它：

```
date('Y-m-d H:i:s') 
```

或者，以您的示例为例：

```
<input name="joindate" type="hidden" id="joindate"  value="<?php echo date('Y-m-d H:i:s'); ?>"> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-09T18:23:25.700

根据 Eric Petroelje 的说法：

使用 Type 创建一个字段`timestamp`并设置为 Default value `CURRENT_TIMESTAMP`。然后，您甚至不必在插入语句中提及此字段。它只是插入插入的时间和日期。

简单的。:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-28T12:19:38.520

是的，您可以使用 TIMESTAMP、DATETIME 甚至 VARCHAR 数据类型在数据库表中创建一列，并使用 now() 函数将日期和时间插入其中。它工作得很好。祝你好运！！！

INSERT INTO table_name(Some_column,Date_column) VALUES ('Ephraim Tarfa',now()) ;

# asp.net - 使用相同的数据读取器填充图表控件和数据网格

> ID：10077732
> 
> 赞同：0
> 
> 时间：2012-04-09T18:16:53.363
> 
> 标签：asp.net, vb.net, datagrid, datareader

我在同一页面中有一个图表控件和数据网格。

我想单击一下按钮，使用数据读取器填充它们。

我有这个代码：

```
dg.datasource=reader
dg.databind()

Chart1.Series("series1").Points.DataBind(
    reader, 
    "product_name", 
    "SumOfpriceafterall", 
    "Tooltip=SumOfpriceafterall, Label=quantity{C2}") 
```

问题是只有一个被填充（代码中的第一个数据绑定），而另一个数据绑定不起作用。

为什么会发生这种情况，我有什么选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T05:09:41.800

因为 datareader 是只转发数据源。填充网格后，光标到达末尾，数据读取器完成。所以在第二次绑定 (chart.bind) 期间，datareader 不包含任何数据。使用可以向前和向后移动的数据集，否则您必须在第一次数据绑定后重新获得相同的数据读取器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T16:12:35.450

在我[之前的回答](https://stackoverflow.com/a/10083365/11808)之后，如果您想避免使用数据集或重新获得相同的数据读取器，您可以执行以下技巧。

在后面的代码中，使用 gridview.rowdatabound 事件，对于添加到 gridview 的每个数据行，使用相同的数据在图表上绘制 X、Y。就像是：

```
Protected Sub myGV_RowDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles myGV.RowDataBound

    Dim Field1 as string, Field2 as string

    If e.Row.RowType = DataControlRowType.DataRow Then
        Field1 = DataBinder.Eval(e.Row.DataItem, "Field1")  ' X Value
        Field2 = DataBinder.Eval(e.Row.DataItem, "Field2")  ' Y value
        ' Plot on the chart the above X,Y
    End If
End Sub 
```

# iphone - 从文件中读取列表并使用 xcode NSMutableArray arrayWithContentsOfFile 对它们进行排序

> ID：10077736
> 
> 赞同：0
> 
> 时间：2012-04-09T18:17:14.927
> 
> 标签：iphone, objective-c, xcode

我正在尝试从记录超过 10000 个的 plist 文件中读取，但是每当我运行它时，它就会崩溃，这是我正在使用的代码，它无法从 plist 中读取

```
-(IBAction)clicked:(id)sender{

 NSString *path = [[NSBundle mainBundle] pathForResource:@"news" ofType:@"plist"];
 NSMutableArray *array = [NSMutableArray arrayWithContentsOfFile: path]; 
```

然后我使用排序程序.....

但以上在这里不起作用也是他的plist文件

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <string>4</string>
    <string>2</string>
    <string>5</string>
    <string>8</string>
    <string>1</string>
</array>
</plist> 
```

@implementation sort_algViewController

```
-(IBAction)clicked:(id)sender{

 //id temp;
 NSString *path = [[NSBundle mainBundle] pathForResource:
 @"news" ofType:@"plist"];

    if ([[NSFileManager defaultManager] fileExistsAtPath:path]) {
    NSLog(@"%@",path);
        printf("YeS");
    }
 //NSMutableArray *array = [[NSArray arrayWithObjects: @"1", @"9", @"7",@"3", @"5", nil]mutableCopy];
 //myarray = [NSMutableArray arrayWithContentsOfFile: @"bdata.txt" ];
 NSMutableArray *array = [NSMutableArray arrayWithContentsOfFile: path];

//  NSString *array = [NSString stringWithContentsOfFile: path];
    NSAutoreleasePool *pool = [NSAutoreleasePool new];
//  NSMutableArray *array = [[NSMutableArray alloc] initWithContentsOfFile:path];
    NSLog(@"%@",array);
    NSLog(@"%@",path);
 //printf("before Array x: ");

 //bubbleSort(array);   // sort the array
 int n = [array count]  ;
 for (int i = 0; i < n-1; i++)
 for (int j = 0; j < n-i-1; j++)
 if ([[array objectAtIndex: j] compare:
 [array objectAtIndex: j+1]] == NSOrderedDescending)

//#define SWAP(arr, x, y) 
     do {   
         id oldX = [array objectAtIndex: (j)];  
         [array replaceObjectAtIndex: (j) withObject: [array objectAtIndex: (j+1)]];
         [array replaceObjectAtIndex: (j+1) withObject: oldX];  
     } while (0);

     printf("array");
     NSString *element;
        NSEnumerator *iterator = [array objectEnumerator];
        while ((element = [iterator nextObject]) != nil)
            printf("%s ", [element UTF8String]); 
        printf("\n");

[array release];    // array needs to be released! 

 [pool release];

//return EXIT_SUCCESS;

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:23:04.957

检查：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"news" ofType:@"plist"]; 
```

不返回 nil 值`path`。（您可以为此添加 NSLog 跟踪）。

如果这不能解决问题，请附上控制台上的输出以及它崩溃的确切行。

编辑：

替换语句：

```
NSMutableArray *array = [NSMutableArray arrayWithContentsOfFile: path]; 
```

和：

```
NSMutableArray *array = [[NSMutableArray arrayWithContentsOfFile: path] retain]; 
```

*或*删除该行：

```
[array release];    // array needs to be released! 
```

你应该没事。

您当前编写代码的方式是释放一个 autoreleasead 数组，这是不正确的。因此，要么添加保留，要么删除版本。

# matlab - 如何在matlab中乘以这个矩阵

> ID：10077741
> 
> 赞同：0
> 
> 时间：2012-04-09T18:17:48.480
> 
> 标签：matlab, math

所以我们有这个矩阵 `a=[1;2;3]`，我们想把它自己相乘`a*a`，

然而，Matlab 没有做这个乘法运算，并建议使用`a.^2`，但这只会将每个成员自身相乘`( 1;4;9 )`......

那么如何在Matlab中乘法`a*a (a^2)`？

贪婪

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T18:18:51.597

你不能把它自己相乘，因为它不是正方形的。

不过，您可以将其乘以它的转置：

```
a * a' 
```

或者：

```
a' * a 
```

你使用哪一个取决于你想要什么。但听起来你不知道你想要什么（否则就毫无疑问......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T18:20:27.493

你不能把这两个矩阵相乘，看看为什么在这里：

![在此处输入图像描述](../Images/39ed340f6a40da0af7369234cd8c983f.png)

在您的情况下，它是 3X1 矩阵乘以 3X1 矩阵。

[http://en.wikipedia.org/wiki/Matrix_multiplication#Illustration](http://en.wikipedia.org/wiki/Matrix_multiplication#Illustration)

# sql - 根据多列值相等，将一个表中的多行设置为另一表中的多行

> ID：10077742
> 
> 赞同：0
> 
> 时间：2012-04-09T18:17:52.903
> 
> 标签：sql

我正在尝试运行一个相当复杂的查询。两个表不同步。在处理的一个步骤中，一个 16 位的值从一个表复制到另一个表，并被截断为仅 10 位。

我正在使用一些信息来复制完整的 16 位数字。我试图找到 10 位值与 16 位值的前 10 位匹配的任何地方，并且这两个表中的其他三个信息匹配。结合起来，它们几乎 100% 确定我们有一个独特的条目。这是我的查询的当前迭代：

```
UPDATE DB1.TABLE1
SET ID =
(
SELECT b.ID
FROM DB2.TABLE1 b
INNER DB1.TABLE1 a 
ON left(b.ID, 10) = a.ID
WHERE len(a.ID) = 10
AND a.STORE = b.STORE
AND a.DOCTYPE = b.DOCTYPE
AND a.DOCDATE = b.DOCDATE
) 
```

问题是，它告诉我子查询正在返回多个结果。但我想要多个结果。我尝试`WHERE`在括号后添加另一个语句，并复制子查询的最后四行，但这也不起作用。我也尝试使用`WHERE EXISTS`和复制整个`SELECT`语句，但这也给了他们多个结果错误。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:24:55.303

您的语句正在尝试将 DB1.TABLE1 中的每一行更新为子查询返回的内容。这不仅不是您想要的，而且语句失败，因为子查询返回多个值。

您需要做的是将两个表关联为更新语句的一部分，如下所示：

```
UPDATE DB1.TABLE1
SET ID = b.ID
FROM DB1.TABLE1 a
  INNER JOIN DB2.TABLE1 b
  ON left(b.ID, 10) = a.ID
    AND a.STORE = b.STORE
    AND a.DOCTYPE = b.DOCTYPE
    AND a.DOCDATE = b.DOCDATE
WHERE len(a.ID) = 10 
```

# twisted - 多核/多处理器上的 TwistedWeb

> ID：10077745
> 
> 赞同：19
> 
> 时间：2012-04-09T18:17:59.010
> 
> 标签：twisted, multiple-instances, twisted.web

在运行 TwistedWeb 服务器时，人们使用哪些技术来利用多个处理器/内核？有推荐的方法吗？

我的基于 twisted.web 的 Web 服务在 Amazon EC2 实例上运行，这些实例通常具有多个 CPU 内核（8、16），并且该服务所做的工作类型受益于额外的处理能力，所以我非常想使用那。

我知道可以在 Twisted 的多个实例之前使用配置为反向代理的 haproxy、squid 或 Web 服务器。事实上，我们目前正在使用这样的设置，nginx 充当多个上游twisted.web 服务的反向代理，这些服务在同一主机上运行，​​但每个服务都在不同的端口上。

这很好用，但我真正感兴趣的是一个没有“前置”服务器的解决方案，但所有扭曲的进程都以某种方式绑定到同一个套接字并接受请求。这样的事情甚至可能......还是我疯了？操作系统是 Linux (CentOS)。

谢谢。

安东。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-10T12:13:02.360

有多种方法可以支持 Twisted 应用程序的多进程操作。不过，一开始要回答的一个重要问题是，您希望并发模型是什么，以及您的应用程序如何处理共享状态。

在单进程 Twisted 应用程序中，并发都是协作的（在 Twisted 的异步 I/O API 的帮助下），共享状态可以保存在 Python 对象所在的任何地方。您的应用程序代码运行时知道，在它放弃控制之前，不会运行其他任何东西。此外，您的应用程序中想要访问某个共享状态的任何部分都可以很容易地做到这一点，因为该状态可能保存在一个易于访问的无聊的旧 Python 对象中。

当您有多个进程时，即使它们都在运行基于 Twisted 的应用程序，您也有两种形式的并发。一种与前一种情况相同——在特定进程中，并发是协作的。但是，您有一种新类型，其中正在运行多个进程。您平台的进程调度程序可能会随时在这些进程之间切换执行，而您对此几乎没有控制权（也几乎无法看到它何时发生）。它甚至可以安排您的两个进程在不同的内核上同时运行（这甚至可能是您所希望的）。这意味着您失去了一些关于一致性的保证，因为一个进程不知道第二个进程何时会出现并尝试在某些共享状态上进行操作。

与单进程模型不同，您不再有任何方便、易于访问的位置来存储您的所有代码都可以访问的状态。如果将它放在一个进程中，则该进程中的所有代码都可以像普通 Python 对象一样轻松访问它，但是在任何其他进程中运行的任何代码都无法再轻松访问它。您可能需要找到一个 RPC 系统来让您的进程相互通信。或者，您可以构建您的流程划分，以便每个流程只接收需要存储在该流程中的状态的请求。这方面的一个例子可能是一个带有会话的网站，其中有关用户的所有状态都存储在他们的会话中，并且他们的会话由 cookie 标识。前端进程可以接收 Web 请求，检查 cookie，查找负责该会话的后端进程，然后将请求转发到该后端进程。这种方案意味着后端通常不需要通信（只要您的 Web 应用程序足够简单 - 即，只要用户不相互交互，或对共享数据进行操作）。

请注意，在该示例中，预分叉模型是不合适的。前端进程必须独占监听端口，以便它可以在后端进程处理所有传入请求之前检查它们。

当然，有许多类型的应用程序，以及许多其他用于管理状态的模型。为多处理选择正确的模型需要首先了解哪种并发对您的应用程序有意义，以及如何管理应用程序的状态。

话虽如此，对于非常新版本的 Twisted（此时尚未发布），在多个进程之间共享侦听 TCP 端口非常容易。这是一个代码片段，它演示了您可以使用一些新 API 来完成此操作的一种方式：

```
from os import environ
from sys import argv, executable
from socket import AF_INET

from twisted.internet import reactor
from twisted.web.server import Site
from twisted.web.static import File

def main(fd=None):
    root = File("/var/www")
    factory = Site(root)

    if fd is None:
        # Create a new listening port and several other processes to help out.                                                                     
        port = reactor.listenTCP(8080, factory)
        for i in range(3):
            reactor.spawnProcess(
                    None, executable, [executable, __file__, str(port.fileno())],
                childFDs={0: 0, 1: 1, 2: 2, port.fileno(): port.fileno()},
                env=environ)
    else:
        # Another process created the port, just start listening on it.                                                                            
        port = reactor.adoptStreamPort(fd, AF_INET, factory)

    reactor.run()

if __name__ == '__main__':
    if len(argv) == 1:
        main()
    else:
        main(int(argv[1])) 
```

使用旧版本，您有时可以避免使用`fork`共享端口。但是，这很容易出错，在某些平台上失败，并且不是使用 Twisted 的受支持方式：

```
from os import fork

from twisted.internet import reactor
from twisted.web.server import Site
from twisted.web.static import File

def main():
    root = File("/var/www")
    factory = Site(root)

    # Create a new listening port
    port = reactor.listenTCP(8080, factory)

    # Create a few more processes to also service that port
    for i in range(3):
        if fork() == 0:
            # Proceed immediately onward in the children.
            # The parent will continue the for loop.
            break

    reactor.run()

if __name__ == '__main__':
    main() 
```

这是因为 fork 的正常行为，其中新创建的进程（子进程）从原始进程（父进程）继承所有内存和文件描述符。由于进程在其他方面是隔离的，因此这两个进程不会相互干扰，至少就它们正在执行的 Python 代码而言。由于文件描述符是继承的，因此父级或任何子级都可以接受端口上的连接。

由于转发 HTTP 请求是一项如此简单的任务，我怀疑您是否会注意到使用这些技术中的任何一种都可以显着提高性能。前者比代理好一点，因为它简化了您的部署并且更容易地适用于非 HTTP 应用程序。后者可能更多的是一种负担，而不是值得接受。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T18:35:01.283

IMO 的推荐方式是`haproxy`像您一样使用（或其他负载均衡器），如果配置正确，瓶颈不应该是负载均衡器。此外，您还需要一些故障转移方法，`haproxy`以防您的某个进程出现故障。

不可能将多个进程绑定到同一个 TCP 套接字，但可以使用 UDP。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-21T09:56:29.733

如果您也希望通过 HTTPS 提供您的 Web 内容，这就是您需要在 @Jean-Paul 的代码段之上执行的操作。

```
from twisted.internet.ssl import PrivateCertificate
from twisted.protocols.tls import TLSMemoryBIOFactory

'''
Original snippet goes here
..........
...............
'''

privateCert = PrivateCertificate.loadPEM(open('./server.cer').read() + open('./server.key').read())
tlsFactory = TLSMemoryBIOFactory(privateCert.options(), False, factory)
reactor.adoptStreamPort(fd, AF_INET, tlsFactory) 
```

通过使用`fd`，您将提供 HTTP 或 HTTPS，但不能同时提供两者。如果您希望同时拥有两者，`listenSSL`请在父进程中包含`fd`您从 ssl 端口获得的 ssl 作为生成子进程时的第二个参数。

完整的狙击手在这里：

```
from os import environ
from sys import argv, executable
from socket import AF_INET

from twisted.internet import reactor
from twisted.web.server import Site
from twisted.web.static import File

from twisted.internet import reactor, ssl
from twisted.internet.ssl import PrivateCertificate
from twisted.protocols.tls import TLSMemoryBIOFactory

def main(fd=None, fd_ssl=None):
    root = File("/var/www")
    factory = Site(root)

    spawned = []
    if fd is None:
        # Create a new listening port and several other processes to help out.                                                                     
        port = reactor.listenTCP(8080, factory)
        port_ssl = reactor.listenSSL(8443, factory, ssl.DefaultOpenSSLContextFactory('./server.key', './server.cer'))
        for i in range(3):
            child = reactor.spawnProcess(
                None, executable, [executable, __file__, str(port.fileno()), str(port_ssl.fileno())],
                childFDs={0: 0, 1: 1, 2: 2, port.fileno(): port.fileno(), port_ssl.fileno(): port_ssl.fileno()},
                env=environ)
            spawned.append(child)
    else:
        # Another process created the port, just start listening on it.                                                                            
        port = reactor.adoptStreamPort(fd, AF_INET, factory)
        cer = open('./server.cer')
        key = open('./server.key')
        pem_data = cer.read() + key.read()
        cer.close()
        pem.close()
        privateCert = PrivateCertificate.loadPEM(pem_data )
        tlsFactory = TLSMemoryBIOFactory(privateCert.options(), False, factory)
        reactor.adoptStreamPort(fd_ssl, AF_INET, tlsFactory)

    reactor.run()

    for p in spawned:
        p.signalProcess('INT')

if __name__ == '__main__':
    if len(argv) == 1:
        main()
    else:
        main(int(argv[1:])) 
```

# jquery - 在 jQuery 日期小部件中设置默认初始年份时遇到问题

> ID：10077765
> 
> 赞同：1
> 
> 时间：2012-04-09T18:19:21.367
> 
> 标签：jquery, jquery-ui, datepicker

我正在使用 jQuery 日期选择器小部件，它运行良好，但我对如何在下拉菜单中设置初始年份感到困惑。

这是我的代码：

```
$(function() {      
        $( "#datepicker" ).datepicker();
        $.datepicker.setDefaults( {changeYear: true , yearRange: '1900:1998',gotoCurrent: true});
    }); 
```

这会产生正确的日历，但将初始年份设置为 1900。我不希望用户必须滚动浏览一百年的选项，并且希望弹出的年份默认为 1998。这根本不可能? 还是我忽略了文档中的设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T18:26:30.667

大声笑，“你做错了”：P

你不需要`.setDefaults`

```
$(function() {
    $("#datepicker").datepicker({
        changeYear: true,
        defaultDate: new Date(1998, 1 - 1, 1), // <-- look at this line!!!
        gotoCurrent: true,
        yearRange: '1900:1998'
    });
}) 
```

有关默认日期格式的更多信息，请参见[此处](http://docs.jquery.com/UI/Datepicker#option-dateFormat)

请参阅[Scott](https://stackoverflow.com/users/682480/scott)的[jsFiddle](http://jsfiddle.net/DotNetScott/ZzvY5/)与[工作 Css ：P](http://jsfiddle.net/ZzvY5/12/)

> ***还***

我建议这样做更像这样：

```
$(function() {
     $("#datepicker").datepicker({
        changeMonth: true,
        changeYear: true,
        defaultDate: new Date(1998, 0, 1), 
        gotoCurrent: true,
        yearRange: '-70:1998'
    });
});​ 
```

# c# - WriteableBitmap.SaveJpeg 呈现黑色图像（WP7）

> ID：10077766
> 
> 赞同：0
> 
> 时间：2012-04-09T18:19:27.010
> 
> 标签：c#, windows-phone-7, writeablebitmap

我正在尝试将一些文本和图像渲染到可写位图以制作 1 个更大的图像，并且此方法已在其他位置用于创建或操作图像，但由于某种原因，此实例仅创建黑色图像。如果我只是将图像源设置为原始的 WriteableBitmap，它显示得很好，但是当我调用 SaveJpeg 然后 LoadJpeg 时，它显示为黑色图像（是的，我需要调用 SaveJpeg，因为这实际上是传递给服务器）。以下是我尝试渲染元素的方式：

```
NoteViewModel note = Instance.Note;
var grid = new Grid()
{
    Height = 929,
    Width = 929
};
grid.RowDefinitions.Add(new RowDefinition() { Height = new GridLength(679) });
grid.RowDefinitions.Add(new RowDefinition() { Height = new GridLength(1, GridUnitType.Star) });
var noteText = new TextBlock()
{
    Text = note.Text,
    FontFamily = note.FontFamily,
    Foreground = note.FontColor,
    TextWrapping = System.Windows.TextWrapping.Wrap,
    Width = 929,
    Height = 679
};
Grid.SetRow(noteText, 0);
grid.Children.Add(noteText);

WriteableBitmap sigImage = Instance.Signature.SignatureImage;
var sig = new Image()
{
    Source = sigImage,
    Height = 250,
    Width = (sigImage.PixelWidth / sigImage.PixelHeight) * 250,
    Margin = new Thickness(929 - ((sigImage.PixelWidth / sigImage.PixelHeight) * 250), 0, 0, 0)
};
Grid.SetRow(sig, 1);
grid.Children.Add(sig);

var messagePicture = new WriteableBitmap(grid, null);

var stream = new MemoryStream();

messagePicture.SaveJpeg(stream, messagePicture.PixelWidth, messagePicture.PixelHeight, 0, 100); //Save to a temp stream

stream.Position = 0;

var test = new WriteableBitmap(929,929); //Load the picture back up to see it
test.LoadJpeg(stream);

img.Source = test; //Show the image on screen (img is an Image element) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T22:08:35.640

所以显然 WriteableBitmap 在调用 SaveJpeg 时会将透明背景渲染为黑色，所以我也通过渲染白色画布解决了这个问题，如下所示：

```
var background = new Canvas()
{
    Width = 929,
    Height = 929,
    Background = new SolidColorBrush(Colors.White)
};

messagePicture.Render(background, new TranslateTransform()); 
```

# jsf-2 - jsf 2.0 和欢迎文件

> ID：10077767
> 
> 赞同：1
> 
> 时间：2012-04-09T18:19:31.563
> 
> 标签：jsf-2

我对 jsf 显示的默认 URL 有一些问题：

网址显示如下：

www.URL.com/PROYECT_NAME/

我想要这样的东西

www.URL.com/PROYECT_NAME/home

我像这样发送了欢迎文件。

```
<welcome-file-list>
   <welcome-file >faces/views/home.xhtml</welcome-file>
</welcome-file-list> 
```

所以我真正想要的是，当 jsf 显示欢迎文件时显示和 url 像这样 www.URL.com/PROYECT_NAME/home 或完整的路由 faces/views/home.xhtml。

我知道这是一个愚蠢的问题，但我很喜欢它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T21:17:09.200

[可以使用PrettyFaces](http://ocpsoft.org/prettyfaces/)等基于过滤器的 servlet 扩展来实现这一点。

它使用简单，有很好的文档和示例，但为了说明您的案例，您可以执行以下操作：

*   下载 prettyfaces.jar 并添加到您的类路径中。通常是`/WEB-INF/lib`文件夹。
*   将包含 URL 映射的 pretty-config.xml 文件添加到该`/WEB-INF`文件夹​​。

pretty-config.xml 文件示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<pretty-config xmlns="http://ocpsoft.com/prettyfaces/3.3.3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://ocpsoft.com/prettyfaces/3.3.3 http://ocpsoft.com/xml/ns/prettyfaces/ocpsoft-pretty-faces-3.3.3.xsd">

    <url-mapping id="home">
        <pattern value="/home" />
        <view-id value="/home.xhtml" />
    </url-mapping>

</pretty-config> 
```

要从控制器重定向到此映射，您应该使用`pretty:`+之类的字符串`url-mapping-id`。

控制器 bean 示例：

```
@ManagedBean
@ViewScoped
public class HomeBean
{
    public String goHome()
    {
        return "pretty:home";
    }
} 
```

而已。每当您发出请求时，如果 PrettyFaces 过滤器找到 url 映射模式`/home`，它将显示视图 id `home.xhtml`，但将 URL 保留为`/home`. 漂亮的。

另外，作为建议，`welcome-file-list`您只能添加`index.html`.

web.xml 欢迎文件列表标签示例：

```
<welcome-file-list>
   <welcome-file>index.html</welcome-file>
</welcome-file-list> 
```

并将这样的 index.html 文件添加到您的应用程序根文件夹中。

index.html 文件示例：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
            <title>My Application</title>
            <meta http-equiv="content-type" content="text/html; charset=utf-8" />
            <meta http-equiv="refresh" content="0;url=/myapplication/home" />
        </head>
        <body>
            <h3>Loading...</h3>
        </body>
    </html> 

```

通过这样做，每当有人请求您的应用程序时，它将获得一个快速加载页面，并将被重定向到`/home`.

我希望它有所帮助。

# sharepoint - 带有 SharePoint 的 ADFS 2.0 未被识别为受信任的应用程序并抛出

> ID：10077768
> 
> 赞同：0
> 
> 时间：2012-04-09T18:19:32.607
> 
> 标签：sharepoint, ssl, adfs

我正在为 SharePoint 配置 POC，并通过第三方帐户提供程序进行身份验证，并遇到了几个问题，并遵循 microsoft 在[http://technet.microsoft.com/en-us/library/cc731443(v=ws.10 ) 提供的文档).aspx](http://technet.microsoft.com/en-us/library/cc731443(v=ws.10).aspx)。我看到的大多数文档都是针对 ADFS 2.0 RTW

问题是当我尝试访问 SharePoint 网站时，我被重定向到帐户提供商 ADFS 网站，并弹出 NTLM 提示。一旦我输入我的凭据，我会收到以下错误

> **由于 URL 未识别任何已知的信任应用程序，因此无法满足 URL 为“https://spadfsweb.spdev.com/_layouts/Authenticate.aspx?Source=/”的应用程序的令牌请求。**

这是我的设置

ADFS 帐户提供程序（ADFS 角色和 DC 位于不同的计算机中）

*   视窗 2008 R2
*   添加了 ADFS 角色
*   ADFS 具有以下参数
    *   令牌签名证书“ **​​sts.adfsaccount.spaccount.com** ”
    *   联合服务 URI
        *   **urn:federation:accountprovider**
    *   联合服务端点 URL
        *   **https://sts.adfsaccount.spaccount.com/adfs/ls/**
*   导出令牌签名证书并将其导入资源合作伙伴 ADFS

ADFS 资源合作伙伴（ADFS 角色和 DC 位于不同的计算机中）

*   视窗 2008 R2
*   添加了 ADFS 角色
*   ADFS 具有以下参数
    *   令牌签名证书“ **​​sts.staging.spresource.com** ”
    *   联合服务 URI
        *   **瓮：联合：资源提供者**
    *   联合服务端点 URL
        *   **https://sts.staging.spresource.com/adfs/ls/**
*   具有以下受信任的应用程序，即共享点
    *   **https://spadfsweb.spdev.com/_trust/**，我有各种各样的组合，如下所示
        *   [https://spadfsweb.spdev.com](https://spadfsweb.spdev.com)
        *   [https://spadfsweb.spdev.com/_layouts](https://spadfsweb.spdev.com/_layouts)
*   导出令牌签名证书并将其导入帐户合作伙伴 ADFS

以下是我如何配置 SharePoint 网站的步骤

```
$cert = New-Object System.Security.Cryptography.X509Certificates.X509Certificate2("C:\Data\Certs\stsadfsaccount_exporttokensign.cer")
New-SPTrustedRootAuthority -Name "Account Token Signing Cert" -Certificate $cert
$map = New-SPClaimTypeMapping -IncomingClaimType "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress" -IncomingClaimTypeDisplayName "EmailAddress" -SameAsIncoming
$map2 = New-SPClaimTypeMapping -IncomingClaimType "http://schemas.microsoft.com/ws/2008/06/identity/claims/role" -IncomingClaimTypeDisplayName "Role" –SameAsIncoming
$ap = New-SPTrustedIdentityTokenIssuer -Name "Staging Provider"-Description "User account domain from adfs to provide authenitcation" -Realm "urn:federation:resourceprovider" -ImportTrustCertificate $cert -ClaimsMappings $map,$map2 -SignInUrl "https://sts.adfsaccount.spaccount.com/adfs/ls/" -IdentifierClaim http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress 
```

---SharePoint有资源提供者的uri、账户伙伴的签名证书和账户伙伴的adfs url

如果我做错了什么，请告诉我。

谢谢迪帕克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T19:18:40.333

您似乎建议您使用 ADFS 1.0。实际上，如果您按照您所说的那样遵循[http://technet.microsoft.com/en-us/library/cc731443%28v=ws.10%29.aspx](http://technet.microsoft.com/en-us/library/cc731443%28v=ws.10%29.aspx)，那么您已经配置了 ADFS 1.0，而不是继任者广告文件系统 2.0。在我看来，任何新部署都应该使用 AD FS 2.0。

[ADFS 1.0 故障排除页面](http://technet.microsoft.com/en-us/library/cc739441%28WS.10%29.aspx)上描述了您的错误消息；引用：

> *条件：服务器错误*
> 
> **错误：**无法完成对 URL https://... 的应用程序的令牌请求，因为该 URL 没有识别任何已知的信任应用程序
> 
> **解决方案：**当应用程序 URL 未识别任何已知应用程序时，资源联合服务会返回此错误。确保已将应用程序添加到联合身份验证服务的信任策略中。有关如何执行此操作的详细信息，请参阅[完成添加应用程序向导](http://technet.microsoft.com/en-us/library/cc786723%28v=ws.10%29.aspx)。
> 
> 对于声明感知应用程序，验证在应用程序的 web.config 文件中输入的返回 URL 是否正确，并且它与联合服务的信任策略中指定的应用程序 URL 匹配。
> 
> 对于基于 Windows NT 令牌的应用程序，请验证在 IIS 的**ADFS Web 代理**选项卡上输入的返回 URL 是否正确，并且它与联合服务的信任策略中的应用程序 URL 匹配。

此外，如果您还不知道，Microsoft 为 ADFS 1.0 创建了 ADFS 诊断工具；请参阅[此博文下载](http://blogs.technet.com/b/adfs/archive/2007/11/01/adfs-diagnostic-tool.aspx)。这个工具可能在追踪这个特定问题时很有用。

希望这可以帮助...

# c++ - 在现代 C++ 中处理中型字节数组的正确方法是什么？

> ID：10077771
> 
> 赞同：2
> 
> 时间：2012-04-09T18:19:47.973
> 
> 标签：c++, c++11

许多语言和框架都提供“字节数组”类型，但 C++ 标准库没有。什么类型适合用于中等大小的¹、可调整大小的字节数组，我如何有效地使用该类型？（特别是：分配，作为参数传递和销毁）

* * *

^(1：中型是指小于 100 MB。)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T18:23:41.170

您可以使用`std::vector<unsigned char>`, 或按照@Oli 的建议`std::vector<uint8_t>`。是的，您可以绕过它，而无需复制全部内容。

```
void f(std::vector<unsigned char> & byteArray) //pass by reference : no copy!
{
     //
}

std::vector<unsigned char>  byteArray;
//...
f(byteArray); //no copying is being made! 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T18:23:45.267

> 许多语言和框架都提供“字节数组”类型，但 C++ 标准库没有。

你错了，C++ 有一个字节数组类型: `std::vector<unsigned char>`，它的存储保证是连续的（如果你不需要这个条件，还有其他选择）。您可能想阅读有关引用、移动语义、返回值优化和复制省略的内容，以了解如何有效地处理这些内容。

*注意：在 C++ 中，一个字节是一个`char`（有符号或无符号）。它可能不是 8 位长，您可以通过`CHAR_BITS`宏获取其大小。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T18:25:01.353

我建议使用`std::deque<uint8_t>`而不是，`std::vector<uint8_t>`因为后者需要连续的内存块。我会避免分配大块内存，`new`因为它会使用默认构造函数初始化内存块，这可能比你想要的要贵一点。

在紧要关头，我相信您可以`boost::shared_ptr`使用自定义解除分配器进行自定义，这样您就可以在分配时`std::malloc`避免初始化开销并解除分配，`std::free`同时仍然保持`shared_ptr`带来的好处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T18:28:52.717

`vector<char>`应该可以满足您的目的。如果您希望共享版本避免复制，您可以使用以下内容：

```
typedef shared_ptr<vector<uint8_t>> ByteArray; 
```

如果您在编译时知道大小，则可以使用`array`稍微节省空间的大小。

也`string`可以处理可能比向量更合适的空字符。

一些扩展实现有一个绳索实现[http://en.wikipedia.org/wiki/Rope](http://en.wikipedia.org/wiki/Rope) , [http://www.aoc.nrao.edu/php/tjuerges/ALMA/STL/html-3.4.6/rope.html](http://www.aoc.nrao.edu/php/tjuerges/ALMA/STL/html-3.4.6/rope.html)，这可能更合适。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-16T08:32:28.777

使用 unique_ptr 有性能原因，至少对于相对较大的缓冲区。有关详细信息，请参阅[https://stackoverflow.com/a/35798248/1992615](https://stackoverflow.com/a/35798248/1992615)。

# python - Python/BeautifulSoup：从网页中抓取数据

> ID：10077773
> 
> 赞同：0
> 
> 时间：2012-04-09T18:20:00.193
> 
> 标签：python, beautifulsoup

我是 Python 编程的初学者，我正在尝试学习如何抓取网页。我想做的是从这个[网页上抓取数据](http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO1&Sect2=HITOFF&d=PALL&p=1&u=/netahtml/PTO/srchnum.htm&r=1&f=G&l=50&s1=0000149.PN.&OS=PN/0000149&RS=PN/0000149)

我正在尝试从上面的页面中抓取（如果你打开网页`ISSUE DATE`，你可以看到）。`ISSUE DATE`我面临一些问题。

这是我为此编写的代码。

```
import BeautifulSoup
import urllib2

url = "http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO1&Sect2=HITOFF&d=PALL&p=1&u=%2Fnetahtml%2FPTO%2Fsrchnum.htm&r=1&f=G&l=50&s1=0000149.PN.&OS=PN/0000149&RS=PN/0000149"

data = urllib2.urlopen(url).read()
soup = BeautifulSoup.BeautifulSoup(data)
value1 = soup.findAll('TABLE')

for value in value1:
    date1 = value.find('B').text
    print date1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:41:00.263

如果在循环之前添加 ...`print value1` 您可以看到 html 在第 37 行的第 27 字符处出现错误，这是一个缺少其开始双引号的结束双引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T18:41:53.620

这可能没有优化，但这是找回发布日期的一种方法：

```
import BeautifulSoup
import urllib2

url = "http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO1&Sect2=HITOFF&d=PALL&p=1&u=%2Fnetahtml%2FPTO%2Fsrchnum.htm&r=1&f=G&l=50&s1=0000149.PN.&OS=PN/0000149&RS=PN/0000149"

data = urllib2.urlopen(url).read()
soup = BeautifulSoup.BeautifulSoup(data)
issue_date = soup.findAll('b')[5].text
print issue_date 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T21:19:03.293

如果整个页面的结构相同，您可以这样做

```
import BeautifulSoup
import urllib2

url = "http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO1&Sect2=HITOFF&d=PALL&p=1&u=%2Fnetahtml%2FPTO%2Fsrchnum.htm&r=1&f=G&l=50&s1=0000149.PN.&OS=PN/0000149&RS=PN/0000149"

data = urllib2.urlopen(url).read()
soup = BeautifulSoup.BeautifulSoup(data)
for td in soup.findAll('td'):
    if td.get('width','') !='' and td.get('width')=='80%':
        print td.text 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T18:48:08.217

BeautifulSoup 需要标签名称为小写。另请注意，使用一些 try.. except 块会使调试更容易一些。以下代码似乎可以实现您想要的：

```
import BeautifulSoup
import urllib2

url = "http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO1&Sect2=HITOFF&d=PALL&p=1&u=%2Fnetahtml%2FPTO%2Fsrchnum.htm&r=1&f=G&l=50&s1=0000149.PN.&OS=PN/0000149&RS=PN/0000149"

data = urllib2.urlopen(url).read()
soup = BeautifulSoup.BeautifulSoup(data)
value1 = soup.findAll('table')
n=0
for value in value1:
    date1 = value.find('b')
    try: print n,date1.text
    except: print n
    n=n+1
try: print "The winner is:",value1[3].find('b').text
except: pass 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-27T23:54:11.420

使用**查找文本函数，然后使用****下一个**函数迭代到下一个元素，如下所示：

```
import requests
from bs4 import BeautifulSoup   
url="http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO1&Sect2=HITOFF&d=PALL&p=1&u=/netahtml/PTO/srchnum.htm&r=1&f=G&l=50&s1=0000149.PN.&OS=PN/0000149&RS=PN/0000149"
html=requests.get(url).content
issue_date_zone = BeautifulSoup(html).find(text='Issue Date:')
date_str=issue_date_zone.next.next.text
print date_str 
```

结果是：

```
March 25, 1837 
```

# javascript - facebook喜欢按钮网站描述

> ID：10077776
> 
> 赞同：0
> 
> 时间：2012-04-09T18:20:18.433
> 
> 标签：javascript, facebook, facebook-like, facebook-likebox

按照[这些说明，我在](http://developers.facebook.com/docs/reference/plugins/like/)[我的网站](http://festivals.ie/)上添加了一个 Facebook 赞按钮。基本上，我添加了这个 HTML：

```
<div class="fb-like" data-href="http://www.festivals.ie" 
    data-send="false" data-width="100"data-show-faces="false" data-font="verdana"     
    data-layout="button_count">
</div> 
```

而这个JavaScript：

```
(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s);
    js.id = id;
    js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=29208799875673";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk')); 
```

按下按钮时，会出现以下弹出窗口：

![在此处输入图像描述](../Images/fa566848527a96262dc63df79da7eb76.png)

弹出窗口包含一些描述网站的文本（以红色圈出）。此文本似乎是从 `<p>`页面上出现的第一个非空元素（从顶部开始）复制而来的。

有没有办法可以将其更改为更好地描述该站点的内容？我尝试添加一个

```
<meta name="description" content="my website description"/> 
```

但这没有任何区别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T18:21:10.017

使用 opengraph 描述元标记。您可能还想添加标题，除非您的页面标题始终是您希望在 Facebook 上显示的内容。

```
<meta property="og:title" content="..." />
<meta property="og:description" content="..." /> 
```

有关详细信息，请参阅[https://developers.facebook.com/docs/opengraph/objects/](https://developers.facebook.com/docs/opengraph/objects/)。

# sql-server - 如何从 TSQL UNPIVOT 中过滤值？

> ID：10077779
> 
> 赞同：2
> 
> 时间：2012-04-09T18:20:32.707
> 
> 标签：sql-server, sql-server-2005, unpivot

我有一个面向列的表，用于指定产品的制造选项。每个选项都可以是以下选项的子集（' '、'B'、'L'、'R'、'BX'、'LX'、'RX）。该表有 314 列。（这是一个遗留版本，而不是我今天要做的方式......）

我有一个客户要求计算某个选项在某个日期范围内的使用次数。获取过滤后的数据不是问题，但是将面向列的表转换为可数的面向行的表是对我的透视/非透视技能的挑战。

[我可以用这个获取列名（从http://www.simple-talk.com/community/blogs/andras/archive/2007/09/14/37265.aspx](http://www.simple-talk.com/community/blogs/andras/archive/2007/09/14/37265.aspx)引用）

```
declare @cols nvarchar(max)

select @cols = coalesce(@cols + ',' + quotename(column_name), quotename(column_name))
from information_schema.columns where table_name = 'mfgOptions'
    and data_type = 'char' and character_maximum_length 
```

大多数时候，选项都有一个 ' ' 值。我不想将这些包含在我的透视表中。我想要的结果是这样的表格：

```
MfgItemID | MfgOptionName | OptionSelection
-------------------------------------------
1000      | option1       | BX
1000      | option2       | B
2000      | option1       | LX
2000      | option3       | RX 
```

使用上面的@cols 定义，我创建了以下 UNPIVOT

```
declare @query nvarchar(max)
set @query = N'SELECT MfgItemID, MfgOptionName, OptionSelection
from (SELECT MfgItemID, ' + @cols + '
FROM mfgOptions) a
UNPIVOT (OptionSelection for MfgOptionName IN (' + @cols + ') ) AS u
order by MfgItemID, MfgOptionName'

EXECUTE(@query) 
```

这个查询正在执行，似乎主要做我需要的事情。但是，这需要很长时间，因为我在表中有 500,000 多行。如果我可以在取消透视之前消除所有空白选项，我认为它会运行得更快。

有没有人对如何在取消透视之前过滤字段值有任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T18:44:54.347

您不能`WHERE`在`UNPIVOT`子句内放置 a ，也不能在返回的子查询中过滤掉，`a`因为该行上可能还有其他有用的值。我知道你能做的最好的事情就是这样`WHERE u.OptionSelection <> ' '`说`UNPIVOT`：

```
declare @query nvarchar(max)
set @query = N'SELECT MfgItemID, MfgOptionName, OptionSelection
from (SELECT MfgItemID, ' + @cols + '
FROM mfgOptions) a
UNPIVOT (OptionSelection for MfgOptionName IN (' + @cols + ') ) AS u
WHERE u.OptionSelection <> '' ''
order by MfgItemID, MfgOptionName'

EXECUTE(@query) 
```

# xcode - 组件初始化缓慢导致用户体验不足

> ID：10077783
> 
> 赞同：1
> 
> 时间：2012-04-09T18:20:57.953
> 
> 标签：xcode, uiview, uiviewcontroller, xamarin.ios

这是当我单击前一个视图上的按钮时出现的视图。文本框、笑脸图像和标签是由 xCode 预先设计的。

请查看视图的图像和代码，以了解为什么所有视图的组件都在非常缓慢地初始化并准备好在完成完全加载后进行我捕获的最后一次拍摄。此外，当我输入字母时非常慢，当我使用 iOS 在每次触摸文本框时提供的键盘输入时，字母出现的速度非常慢。

![在此处输入图像描述](../Images/b2b2467d62cbc964d37ed12b5ec5058d.png)

**观点守则；**

```
using System;
using System.Drawing;

using MonoTouch.Foundation;
using MonoTouch.UIKit;

namespace IstanbulCity
{
    public partial class AskForNAme : UIViewController
    {
        public delegate void AskForNAmeClosingDelegate (AskForNAme form);

        public event AskForNAmeClosingDelegate AskForNAmeClosed;
        NSObject obs1;
        float scrollamount = 0.0f;
        float bottomPoint = 0.0f;
        float yOffset = 0.2f;
        bool moveViewUp = false;

        public AskForNAme () : base ("AskForNAme", null)
        {

        }

        public override void DidReceiveMemoryWarning ()
        {
            // Releases the view if it doesn't have a superview.
            base.DidReceiveMemoryWarning ();

            // Release any cached data, images, etc that aren't in use.
        }

        public override void ViewDidLoad ()
        {
            base.ViewDidLoad ();

            // Perform any additional setup after loading the view, typically from a nib.
        }
        public override void ViewDidAppear(bool animated)
        {
            base.ViewDidAppear(true);
                obs1 = NSNotificationCenter.DefaultCenter.AddObserver (
"UIKeyboardDidShowNotification", KeyboardUpNotification);
            this.tbOwnerMailAdress.ShouldReturn += TextFieldShouldReturn;
            this.tbOwnerBirthDay.ShouldReturn += TextFieldShouldReturn;
            this.uivGuguPhoto.Image = UIImage.FromFile ("image/fcuk.jpeg");

        }
        public override void ViewWillAppear(bool animated)
        {  
            base.ViewWillAppear(false);
            obs1 = NSNotificationCenter.DefaultCenter.AddObserver (
"UIKeyboardDidShowNotification", KeyboardUpNotification);
            this.tbOwnerMailAdress.ShouldReturn += TextFieldShouldReturn;
            this.tbOwnerBirthDay.ShouldReturn += TextFieldShouldReturn;
            this.uivGuguPhoto.Image = UIImage.FromFile ("image/fcuk.jpeg");

        }
        public override void ViewDidUnload ()
        {
            base.ViewDidUnload ();

            // Clear any references to subviews of the main view in order to
            // allow the Garbage Collector to collect them sooner.
            //
            // e.g. myOutlet.Dispose (); myOutlet = null;

            ReleaseDesignerOutlets ();
        }

        public override bool ShouldAutorotateToInterfaceOrientation (UIInterfaceOrientation toInterfaceOrientation)
        {
            // Return true for supported orientations
            return (toInterfaceOrientation != UIInterfaceOrientation.PortraitUpsideDown);
        }

        void HandleIstanbulCityViewControllerClosed (babyAge form)
        {
            form.DismissModalViewControllerAnimated (true);
            form = null;
        }

        partial void tbKadikoyHallEditDidEndOnExit (MonoTouch.Foundation.NSObject sender)
        {
            tbIstanbulName.ResignFirstResponder ();
        }

        private bool TextFieldShouldReturn (UITextField tf)
        {
            tf.ResignFirstResponder ();
            if (moveViewUp) {
                ScrollTheView (false);
            }
            return true;
        }

        private void KeyboardUpNotification (NSNotification notification)
        {
            ResetTheView ();

            RectangleF r = UIKeyboard.BoundsFromNotification (notification);

            if (this.tbOwnerMailAdress.IsEditing ) {
                //Calculate the bottom of the Texbox
                //plus a small margin...
                bottomPoint = (this.tbOwnerMailAdress.Frame.Y + this.tbOwnerMailAdress.Frame.Height + yOffset);

                //Calculate the amount to scroll the view
                //upwards so the Textbox becomes visible...
                //This is the height of the Keyboard -
                //(the height of the display - the bottom
                //of the Texbox)... 
                scrollamount = (r.Height - (View.Frame.Size.Height - bottomPoint));
            }
            else if (this.tbOwnerBirthDay.IsEditing)
            {
                bottomPoint = (this.tbOwnerBirthDay.Frame.Y + this.tbOwnerBirthDay.Frame.Height + yOffset);
                scrollamount = (r.Height - (View.Frame.Size.Height - bottomPoint));
            }
            else
            {
                scrollamount = 0;
            }

            //Check to see whether the view
            //should be moved up...
            if (scrollamount > 0) {
                moveViewUp = true;
                ScrollTheView (moveViewUp);
            }  else
                moveViewUp = false;
        }

        private void ResetTheView ()
        {
            UIView.BeginAnimations (string.Empty, System.IntPtr.Zero);
            UIView.SetAnimationDuration (0.3);

            RectangleF frame = View.Frame;
            frame.Y = 0;
            View.Frame = frame;
            UIView.CommitAnimations ();
        }

        private void ScrollTheView (bool movedUp)
        {
//To invoke a views built-in animation behaviour,
//you create an animation block and
//set the duration of the move...
//Set the display scroll animation and duration...
            UIView.BeginAnimations (string.Empty, System.IntPtr.Zero);
            UIView.SetAnimationDuration (0.3);

//Get Display size...
            RectangleF frame = View.Frame;

            if (movedUp) {
//If the view should be moved up,
//subtract the keyboard height from the display...
                frame.Y -= scrollamount;
            }  else {
//If the view shouldn't be moved up, restore it
//by adding the keyboard height back to the original...
                frame.Y += scrollamount;
            }

//Assign the new frame to the view...
            View.Frame = frame;

//Tell the view that your all done with setting
//the animation parameters, and it should
//start the animation...
            UIView.CommitAnimations ();

        }
    }
} 
```

**最新版本 - 仍然是相同的用户体验' 慢！**

```
using System;
using System.Drawing;

using MonoTouch.Foundation;
using MonoTouch.UIKit;

namespace IstanbulCity
{
    public partial class AskForNAme : UIViewController
    {
        public delegate void AskForNAmeClosingDelegate (AskForNAme form);

        public event AskForNAmeClosingDelegate AskForNAmeClosed;

        public AskForNAme () : base ("AskForNAme", null)
        {

        }

        public override void DidReceiveMemoryWarning ()
        {
            // Releases the view if it doesn't have a superview.
            base.DidReceiveMemoryWarning ();

            // Release any cached data, images, etc that aren't in use.
        }

        public override void ViewDidLoad ()
        {
            base.ViewDidLoad ();

            // Perform any additional setup after loading the view, typically from a nib.
        }

        public override void ViewDidUnload ()
        {
            base.ViewDidUnload ();

            // Clear any references to subviews of the main view in order to
            // allow the Garbage Collector to collect them sooner.
            //
            // e.g. myOutlet.Dispose (); myOutlet = null;

            ReleaseDesignerOutlets ();
        }

        public override bool ShouldAutorotateToInterfaceOrientation (UIInterfaceOrientation toInterfaceOrientation)
        {
            // Return true for supported orientations
            return (toInterfaceOrientation != UIInterfaceOrientation.PortraitUpsideDown);
        }

        void HandleIstanbulCityViewControllerClosed (babyAge form)
        {
            form.DismissModalViewControllerAnimated (true);
            form = null;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T18:51:16.243

这看起来与初始化无关。您正在添加来自`ViewDidAppear`和的通知`ViewWillAppear`。你也**总是**在每个键盘通知上调用`ResetTheView`，它会做动画（即使没有其他改变）。

我的猜测是你调用的`ResetTheView`方式比你意识到的更频繁——连续的动画正在扼杀你的应用程序的性能。

`Console.WriteLine`您可以通过在方法中放置一个 ，也许是一个计数器来确认这一点`ResetTheView`。

# visual-studio - 尝试在 Visual Studio 中更新扩展时出错

> ID：10077788
> 
> 赞同：10
> 
> 时间：2012-04-09T18:21:22.970
> 
> 标签：visual-studio, visual-studio-2010

我正在尝试更新 Visual Studio 2010 中的扩展，但突然出现错误。我打开扩展管理器并让它加载更新列表。我选择了一个，然后单击更新，但我得到一个错误的对话框。根据我尝试更新的扩展程序，会出现两个错误之一。

例如，尝试更新 Nuget 让我：

```
Value cannot be null
Parameter name: v1 
```

另一方面，Code Maid：

```
Invalid entry to install/download
Parameter name: entry 
```

Ankh SVN 给了我与 Code Maid 相同的错误。（很长一段时间没有使用或更新过 Ankh SVN，但我尝试了它是否有效）

我不知道我最近所做的任何可能导致这种情况的更改。远程想到的唯一一件事是安装 VS11 Beta，但我相当确定从那以后我已经成功更新了 VS2010 扩展。

希望我可以避免*可怕的重新安装*™

* * *

我似乎不是唯一一个遇到这个问题的人：http: [//visualstudiogallery.msdn.microsoft.com/27077b70-9dad-4c64-adcf-c7cf6bc9970c/view/Discussions](http://visualstudiogallery.msdn.microsoft.com/27077b70-9dad-4c64-adcf-c7cf6bc9970c/view/Discussions)

* * *

顺便说一句，我可以通过手动下载和执行安装程序来更新相关扩展。但我当然还是想知道这里发生了什么！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T22:57:41.247

不是一个完整的答案，但我认为我可以帮助解决 nuget 问题：

1.  在控制面板-> 程序中找到并卸载 Nuget。（确保 VS 没有运行）
2.  转到[http://nuget.org/](http://nuget.org/)并单击“安装 Nuget”
3.  在下一页上单击下载。
4.  打开下载的文件（它应该与VS相关联）。
5.  按照向导。

这应该安装最新版本的 nuget，这意味着将没有可用的更新。我不确定下一次更新结束时会发生什么。

我意识到这只是一种解决方法。

编辑：对不起，刚刚注意到你确实这样做了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-31T22:30:16.537

这是该问题的修补程序。

[http://connect.microsoft.com/VisualStudio/Downloads/DownloadDetails.aspx?DownloadID=38654](http://connect.microsoft.com/VisualStudio/Downloads/DownloadDetails.aspx?DownloadID=38654)

对我来说就像一个魅力。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-12T17:32:48.957

我在使用 NuGet 时遇到过类似的问题，尤其是在早期版本中（我注意到最多的是 1.4 之前的版本）。

1) 如果它在程序和功能中列出，请将其删除。
2）打开“%PROGRAMFILES (X86)%\Microsoft Visual Studio 10.0\Common7\IDE\Extensions”，如果列出了Nuget，将其删除。3）转到您的用户目录（c：\ users \ xxxx \ AppData \ Local \ Microsoft \ VisualStudio \ 10.0，如果Nuget在其中列出。删除它。关闭/打开VS。看看错误是否仍然存在，如果是的话。你可以从命令行尝试 /ResetAddin 标志，看看是否有其他东西在干扰。

如果错误没有出现，请重新安装 Nuget 1.7（或最新版本），希望一切顺利。

你在使用 Telerik Extensions 吗？Silverlight 的东西让我如痴如醉。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-27T07:52:33.093

[尝试在/SafeMode](http://msdn.microsoft.com/en-us/library/ms241278%28v=vs.80%29.aspx)中加载 DevEnv并从那里安装。我无法告诉你发生了什么，但 VS 有时确实会陷入困境，只需要伸出援助之手。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T14:18:32.640

当我在我的解决方案中打开一个[WiX](http://wixtoolset.org/)项目并去更新整个解决方案的管理包时，我会得到这个。如果我右键单击解决方案中的所有 WiX 项目并卸载这些项目，则可以正常更新 NuGet 包。然后我重新加载 WiX 项目。

我想它也可能发生在其他“奇怪”的项目类型中。有什么可以尝试的！

# xcode - 如果没有代码更改，xcode 不会在断点处停止

> ID：10077790
> 
> 赞同：0
> 
> 时间：2012-04-09T18:21:25.437
> 
> 标签：xcode, breakpoints

我目前正在运行 xcode 4.3.1，我发现如果我不做任何代码更改并使用之前设置的同一组断点重新运行程序，xcode 将不会再停在断点处。我目前的解决方法是放入一些非常耗时的垃圾 NSLog 语句。以前有人遇到过问题吗？我是否缺少一些偏好设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T23:41:15.793

您是否检查过以确保“断点”按钮仍被按下。否则，您可以尝试重新启动 xcode/您的机器。如果你让它运行，有时 xcode 会开始做一些奇怪的事情。最后一个选择是实际上只是重新安装 xcode。

您面临的问题似乎是 xcode 问题，与您的实际代码无关。我创建了一个小应用程序并设置了断点，但无法重现您的问题。

# objective-c - 更改基于视图的 NSTableView 中选定的视图

> ID：10077793
> 
> 赞同：3
> 
> 时间：2012-04-09T18:21:49.453
> 
> 标签：objective-c, cocoa, nstableview

使用基于视图时如何更改所选行的视图`NSTableView`？具体来说，我想为未选中的行创建一个简单的 NSView 子类，为选中的行创建一个更复杂的 NSView 子类，它允许编辑与行项目相关的更多信息。

例如，Things 允许您扩展正在编辑的项目，如下所示：http: [//culturedcode.com/things/](http://culturedcode.com/things/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T18:38:54.413

我的猜测是你想在选择行时使用不同的 NSTableCellView 子类。我认为你应该能够做这样的事情：

```
- (void)tableViewSelectionDidChange:(NSNotification *)notification
{
    NSTableView *table = [notification object];
    NSIndexSet *allColumns = [NSIndexSet indexSetWithIndexesInRange:NSMakeRange(0, [[table tableColumns] count])];
    [table reloadDataForRowIndexes:[table selectedRowIndexes] columnIndexes:allColumns];
}

- (NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row
{
    if ([[tableView selectedRowIndexes] containsIndex:row])
    {
        // If the row is selected, return an instance of the class for selected views
        SelectedTableCellView *selectedView = ...; // Get from makeViewWithIdentifier:
        // Set up selectedView
        return selectedView;
    }
    else 
    {
        NonSelectedTableCellView *nonSelectedView = ...; // Get from makeViewWithIdentifier:
        // Set up nonSelectedView
        return nonSelectedView;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T18:26:07.787

如果您详细说明“将视图更改为更复杂的视图”的含义，那可能会很好

尽管如此，您可以例如`- (void)tableViewSelectionDidChange:(NSNotification *)notification`在表格视图的委托中实现，`NSTableRowView`如果它是可见的，则获取选定的，并以您想要的方式更改它，包括使其更复杂，扩展它（见下文）等。

要修改行的大小，您需要`- (CGFloat)tableView:(NSTableView *)tableView heightOfRow:(NSInteger)row`在同一个委托中实现，并调用表视图`-noteHeightOfRowsWithIndexesChanged`来更新特定行的高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T12:58:24.133

我认为该应用程序是`NSOutlineView`在大纲视图中创建的，只有您可以轻松扩展您选择的行...

```
- (BOOL)outlineView:(NSOutlineView *)outlineView isItemExpandable:(id)item
{        

    if ([item isKindOfClass:[NSDictionary class]]) 
    {
        return YES;        
    }else 
    {
        return NO;
    }
} 
```

我认为这种方式是写..

# asp.net - 如何在代码隐藏文件中找到转发器控件的 HtmlInputCheckBox 而不使用 runat="server" 标记

> ID：10077795
> 
> 赞同：0
> 
> 时间：2012-04-09T18:21:56.703
> 
> 标签：asp.net

在中继器内部我有一个 html 复选框，现在我想在文件后面的代码中访问此复选框以检查该复选框是否被选中。但我不想用户 runat="server" 标签，我怎么能这样做我的代码如上所述

```
 <input id="cbfdgroup" class="checkitem" type="checkbox" name="fd_cb_group[]" value='<%#Eval("FoodItemsUid") %>'> 
```

在文件后面的代码中，我试图像这样访问

```
foreach (RepeaterItem ri in rptMenu.Items)
        {
            if (ri.ItemType == ListItemType.Item || ri.ItemType == ListItemType.AlternatingItem)
            {
                HtmlInputCheckBox chk = (HtmlInputCheckBox)ri.FindControl("cbfdgroup");

                if (chk.Checked)
                {
                }
            }
        } 
```

但这会给出错误，因为对象引用未设置为对象的实例。我应该如何在不使用 runat =“server”标签的情况下在文件后面的代码中获取此控件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:32:04.357

这不可能。为了澄清，这`runat="server"`部分正在做它所说的。就是说这个控件应该可供服务器使用和访问。

代码隐藏中的代码是在服务器上运行/执行的代码。因此，从逻辑上讲，如果该控件对服务器不可用，则它不能被代码操纵（因此它也不会出现在智能感知中。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T18:24:52.687

我不相信你问的是可能的。`runat=server`是使控件对后面的代码可用的原因。如果您删除该属性，则您的代码根本不会以任何方式了解该控件。

多一点解释：

代码隐藏在*服务器*上执行。因此，您想要在代码隐藏中访问的任何控件都必须具有`runat=server`才能可用。两者密不可分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T18:37:40.987

你不需要从转发器中读取项目

假设您正在向服务器发送回发（http post）

您可以通过简单地阅读选定的复选框：

```
string x = Request["fd_cb_group[]"]; 
```

它大于 1 它将用逗号分隔，只需使用 split 获取所选值的字符串列表。

整个事情是这样的：

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        string x = Request["fd_cb_group[]"];

        string[] allSelectedOnes = x.Split(',');

        foreach(string item in allSelectedOnes)
        {
            //your custom code for the selected checkboxes
        }
    } 
```

# java - 如何通过 DVI/HDMI 视频输出 java？

> ID：10077797
> 
> 赞同：2
> 
> 时间：2012-04-09T18:22:04.660
> 
> 标签：java, processing, visualizer, hdmi

对于一个项目，我必须在 java 中创建一个音乐可视化器（我决定使用 www.processing.org 来创建视觉效果），然后使用 DVI/HDMI 将其输出到 spartan-6 板上。我在那里找不到太多东西。

我在项目中相当早，所以如果需要我可以从处理中改变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T18:31:26.313

AFAIK，屏幕类型或您是否使用 VGA、DVI 或 HDMI 对 Java 没有任何影响。您需要在操作系统中配置这些设备，Java 将使用它们。

# assembly - LC3 程序集按位右移

> ID：10077798
> 
> 赞同：6
> 
> 时间：2012-04-09T18:22:06.763
> 
> 标签：assembly, bitwise-operators, bit-shift, lc3

[我需要做的是使用LC-3 Assembly](http://highered.mcgraw-hill.com/sites/dl/free/0072467509/104653/PattPatelAppA.pdf)实现按位左移和按位右移。基本上，每个位都必须在移位方向上移动一个空间，并且零填充创建的空白空间。

例子：

右移：

```
 01001001
 00100100→ 
```

左移：

```
 01001001
←10010010 
```

通过获取二进制字符串并将其添加到自身，我已经成功实现了左移。

我对如何执行右移感到困惑。任何想法将不胜感激。我有 AND、NOT、ADD 操作、数据移动操作、七个寄存器来存储值和整个内存范围。我只需要一些基本的想法如何实现它。

如果您需要 LC-3 指令集参考，这里有[一个](http://highered.mcgraw-hill.com/sites/dl/free/0072467509/104653/PattPatelAppA.pdf)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T18:54:39.677

假设您设置`R2`它只有一个位集。然后，如果您`AND`使用另一个寄存器并在条件上进行分支`Z`，则您正在测试该位是否已设置。如果是，您想设置“结果”寄存器中的前一位。

如果您然后将您的一位寄存器移到一个位置并循环重复，您应该拥有您需要的东西。

（抱歉，如果这含糊不清；因为这可能是家庭作业，我试图避免只给你答案）

**编辑：**

因此，假设您的输入是 01001011。您从输出 00000000、输入掩码 00000010 和输出掩码 00000001 开始。您执行 AND 并发现它不为零，因此您将输出掩码添加到输出中。然后将两个掩码移过来，得到 00000100 和 00000010。

在下一次循环中，AND 为零，所以你什么都不加，等等。当移动掩码使其为零时，循环终止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T18:53:43.873

哇，这是一个非常小的指令集。

如果您有 256 字节的可用内存，那么查找表可能是要走的路。

您可以在没有数据存储器的情况下使用每个位位置上的循环来执行此操作，`AND`用于提取位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-10T20:22:53.517

假设前导 0，您可以通过一次又一次地减去 2 来除以。

所以计算一下你可以添加 RX、RX、#-2 的频率

我相信还有一种方法可以解决前导 1 的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-01T16:25:28.037

你需要两个口罩。它们都是一个“1”，其余都是“0”。两者都初始化为 0000 0000 0000 0001，但其中一个左移了您希望原始数字右移的量。我们称它为 Mask1。未移位的数字将是 Mask2。

将 Mask1 与原始编号进行比较。If (Mask1 "and" input) > or < 0, "or" Mask2 with output 然后左移两个 Masks。

在任何一种情况下，左移两个掩码并重试，直到输入中没有更多位要测试。

LC-3 没有按位“或”。您将必须“不”两个操作数，“和”它们，然后“不”按位“或”的结果。

您测试 Mask1 “和”输入是否 > 或 < 0 的原因是因为如果它为零，我们什么也不想做。如果对这些操作数进行“与”运算的结果 > 0，则意味着测试的位置找到了“1”，需要将其打印到结果中。如果掩码左移变为 1000 0000 0000 0000，从技术上讲，这是一个负数。该位置的“和”以及该位置带有“1”的任何数字也将是负数。

# html - 在表单上禁用空值：输入字段

> ID：10077800
> 
> 赞同：0
> 
> 时间：2012-04-09T18:22:31.470
> 
> 标签：html, forms, spring-mvc

我`<form:input>`在我的jsp上使用a。输入字段应该是可编辑的，但不能为空。有没有办法在客户端处理这个问题？即，禁用删除字段中的值，但保持字段可编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:37:01.987

禁用删除会给用户带来不便。最好在焦点离开字段时检查该值，如果它为空则显示错误消息。例如，使用 jQuery：

```
<form:input id = "f" ... /> 
```

.

```
var f = $("#f");
f.blur(function() {
    if (!f.val()) {
        ... // show error message
    }
});
f.change(function() {
    if (f.val()) {
        ... // hide error message
    }
}); 
```

# java - 在注销期间破坏用户会话是否足够？

> ID：10077806
> 
> 赞同：3
> 
> 时间：2012-04-09T18:22:53.213
> 
> 标签：java, jsp, session, web, logout

我想了解我们如何在网站中实现安全的注销方法。我正在jsp中尝试注销页面。*用户单击注销*时销毁会话是否足够？如果不是注销所需的步骤，对用户来说是安全的操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T18:26:23.593

一般来说，我会说是的，但这取决于您可能在客户端存储的其他信息。例如，如果您有任何包含敏感信息的 cookie（希望您没有），那么您也应该清除它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T18:26:51.470

如果您存储了任何与用户相关的 cookie，您也需要清理它们。换句话说，您的服务器用来识别用户的任何信息都应该被清除。如果只是会话-那么在您的情况下就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T18:25:09.067

定义“安全”。

您可能还想关闭缓存，这样点击“返回”按钮就不会显示潜在的敏感信息。除此之外，不知道你还关心什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T18:29:22.830

取决于您的应用程序要求，您在注销期间需要什么功能。除了有时刷新或释放用户会话之外，会话中设置的变量很少，它们也应该被正确释放。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T18:29:42.047

是的，一旦你使会话无效，那么会话 id 就不再有效，可能会话 cookie 也会被破坏，所以会话就消失了（连同存储在会话中的所有数据）。

为了注销用户（从 servlet 或 JSP 页面）：

```
<% 
   HttpSession s = request.getSession(); 
   s.invalidate();
%> 
```

那是容易的部分。现在，如果您将一些重要的、用户特定的数据存储在自定义 cookie 中，请确保清理它们。这同样适用于 HTML 5 本地存储 - 它必须手动清理。

# osx-lion - LION OS：在后台运行 Mac 应用程序

> ID：10077811
> 
> 赞同：3
> 
> 时间：2012-04-09T18:23:10.020
> 
> 标签：osx-lion

我是新的 Mac 编程人员，但在 iOS 开发方面有足够的经验。我正在开发一个 Mac 应用程序。我希望我的应用程序始终在系统后台运行并进行某种同步，就像 Dropbox 一样。我想知道如何在我的应用程序启动后始终在后台运行我的应用程序，并以一定的时间间隔在后台从我的应用程序执行一些处理。

请指教！

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:28:19.210

Mac OS X 的核心就是 UNIX。您可以在 *NIX 系统上执行的任何操作，都可以在 OS X 上执行。请参阅：[进程间通信。](http://en.wikipedia.org/wiki/Interprocess_communication)
您确实需要了解 IPC 的概念，然后才能解决如何使用特定操作系统来完成它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T18:25:09.823

当然可以，Mac 是一个成熟的操作系统。 [使用 xcode 开发在用户登录之前运行的 osx 守护进程](https://stackoverflow.com/questions/1530785/developing-a-osx-deamon-that-runs-before-user-login-using-xcode)

# javascript - 无法重现 TypeError：“未定义”不是对象

> ID：10077821
> 
> 赞同：28
> 
> 时间：2012-04-09T18:23:36.483
> 
> 标签：javascript, jquery, iphone, safari

谷歌分析显示，我们总用户中约 12% 受到以下 Javascript 错误的影响：

`TypeError: 'undefined' is not an object`

90% 的浏览器是 Safari 7534.48.3，10% 是 Mozilla 兼容代理。75% 的错误来自 iPhone，23% 来自 iPad。1% 来自 Macintosh，另外 2% 来自 iPod 等。这些设备都没有运行 Linux 或 Windows。

我曾尝试在 iPhone 和 iPad 上的 Safari 中启用调试模式，但无法重现该错误。

[这是指向 Google Analytics 声称显示错误的页面的链接](http://myschoolholidays.com/Birmingham)。如果有人可以在这里始终如一地重现错误，我将非常高兴，因为只需一个行号就足以让我开始调试。

谁能想到我可以尝试调试的任何其他方法？谢谢大家

对于我们中间的好奇，我正在使用[此代码向 GA 发送错误](http://mclear.co.uk/2012/04/09/send-javascript-client-errors-to-google-analytics/)-**警告**：可能的自我提升。

**更新：** TypeError：'undefined' 不是对象（评估 'safari.self.tab.canLoad'）

单击时设法摆脱它，主要是在iphone上单击“更改国家..”

**更新：**通过确保元素在 dom 中可用来解决这个问题。原来成功的 ajax 调用试图写入一个不可用的元素。

我保留了[Unable to replicate TypeError: 'undefined' is not an object here的可靠记录](http://mclear.co.uk/2012/04/13/unable-to-reproduce-typeerror-undefined-is-not-an-object/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-12-19T18:14:54.273

不明确的

未定义类型只有一个值：未定义。如果没有为它们分配值，则它是所有变量在声明后具有的默认值。你也可以将 undefined 的值赋给任何变量，但一般来说，应该避免这种情况，因为如果我们需要将一个变量标记为没有任何有意义的值，我们应该使用 null。

```
Let declaredVar;
console.log(typeof declaredVar); // -> undefined

declaredVar = 5;
console.log(typeof declaredVar); // -> number

declaredVar = undefined;
console.log(typeof declaredVar); // -> undefined

The undefined value can also be returned by the typeof operator when a non-existent variable is used as an argument.

Console.log(typeof notDeclaredVar); // -> undefined
console.log(notDeclaredVar); // -> Uncaught ReferenceError: notDeclared is not defined 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-04-09T18:33:51.203

在你的functions.js中，你有这个：

```
storage_get = function(key) {
  var store = (window.SAFARI ? safari.extension.settings : localStorage);
  var json = store.getItem(key);
  if (json == null)
    return undefined;
  try {
    return JSON.parse(json);
  } catch (e) {
    log("Couldn't parse json for " + key);
    return undefined;
  }
} 
```

`undefined`不是 JavaScript 关键字。这是一个（大多数情况下）碰巧未定义的变量。你不能这样使用`undefined`。考虑一下如果你用 替换它会发生什么`pinkelephant`，因为这正是这里发生的事情。

# jquery - MVC + jQuery - 在不阻塞浏览器 UI 的情况下加载包含大量行的表

> ID：10077823
> 
> 赞同：-4
> 
> 时间：2012-04-09T18:23:43.327
> 
> 标签：jquery, model-view-controller, asynchronous

我有一个 MVC 视图，其中包含一个返回数百行的表。浏览器需要很长时间才能呈现它。

我想使用 jQuery 对服务器进行异步调用以获取行块（例如，每个 tiem 10 行）并一次绘制一个块，以让用户感觉到正在做某事。

我该怎么做？考虑到我不知道总行数。我需要加载它们，直到服务器发出已完成（或超时）的信号。

请，如果可能的话，我想有一个逐步的解决方案。

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:28:52.033

听起来你需要[无限滚动](http://www.infinite-scroll.com/)。

**编辑：**

您可以将`bufferPx`选项设置为一些非常高的值，以使滚动时感觉负载没有发生，例如

```
bufferPx: 2000 // load at least 2000 pixels worth of data 
```

# c# - MongoDB 的 C# 驱动程序中的 BSON 序列化

> ID：10077829
> 
> 赞同：3
> 
> 时间：2012-04-09T18:24:21.103
> 
> 标签：c#, mongodb, mongodb-.net-driver, bson

我刚开始使用 MongoDB 和官方的 c# 驱动程序。我有一个关于对象序列化的小问题。例如我们有一个类：

```
public class User
{
    public string Name;

    public List<Comment> Comments = new List<Comment>(){ new Comment() };
    public List<Card> Cards = new List<Card>() { new Card() };
}

public class Comment
{
    public string Id;
    public string Text;
}

public class Card
{
    public string Id;
    public string Text;
} 
```

我想在 User 中获得序列化的 Cards 集合，但是像 DBRef 这样的 Comments 集合。是否可以使用最新的标准 c# 驱动程序来实现它？使用以下属性会非常酷：

```
public class User
{
    public string Name;

    [UseDBRef]
    public List<Comment> Comments = new List<Comment>(){ new Comment() };

    public List<Card> Cards = new List<Card>() { new Card() };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T03:37:49.640

在 GitHub 中查看这个项目。

[https://github.com/virajs/MongoDB-Mapping-Attributes.git](https://github.com/virajs/MongoDB-Mapping-Attributes.git)

本项目主要为您提供两个映射属性。一对多和多对一。签出代码并玩弄测试项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T18:47:16.703

您可以将您的 Comments 属性声明为 List<MongoDBRef> 并自己处理关系，但没有自动支持。

# asp.net - 如何防止表单的动作在asp.net中发生

> ID：10077830
> 
> 赞同：0
> 
> 时间：2012-04-09T18:24:25.303
> 
> 标签：asp.net

我有一个带有 action="xyz.aspx:type=new" 的表单和一些输入文本框和 2 个按钮：提交和预览。提交按钮使用文本框值更新数据库，预览按钮将表单文本框值带到页面 "xyz.aspx?type=preview" 。问题是实现了功能，但是在单击预览按钮后，表单的操作 url 开始起作用并导致数据库中不需要的更新。那么我该如何防止这种情况发生呢？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:30:26.337

如果您的两个按钮不是 asp:Buttons，请先执行此操作。

```
<asp:Button Id="Submit" runat="server" OnClick="Submit_OnClick"/>
<asp:Button Id="Preview" runat="server" OnClick="Preview_OnClick"/> 
```

现在，移动您的代码以将数据库更新到`Submit_OnClick`

```
protected void btnExecute_Click(object sender, EventArgs e)
{
    //update your database
} 
```

您的数据库应仅在单击提交时更新。

如果您需要将预览按钮发布到另一个页面，请使用 PostBackUrl 属性。

# wpf - 将大量数据加载到 UI 中的最佳方法

> ID：10077835
> 
> 赞同：1
> 
> 时间：2012-04-09T18:24:59.973
> 
> 标签：wpf, winforms, wcf

我正在构建一个交易应用程序，并且必须使用 WPF 在 UI 中处理大约 500 万行。数据会不时刷新。我们正在考虑使用 WCF 作为服务层。考虑到用户大部分时间都需要响应式 UI，处理这种情况的最佳方法/控制是什么？

在技​​术方面，我们是微软商店。另一个问题是，WPF 是否可以处理大数据或 WinForms 是否可行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T18:32:43.423

您将需要使用[数据虚拟化](http://www.slideshare.net/Cameroon45/data-virtualization-in-wpf-and-beyond)（注意 - 不是[UI 虚拟化](http://www.kirupa.com/net/ui_virtualization_pg1.htm)），[这](http://bea.stollnitz.com/blog/?p=344)是一个很好的启动器。

# android - Android Dev：未及时绘制 Android 布局

> ID：10077837
> 
> 赞同：0
> 
> 时间：2012-04-09T18:25:05.200
> 
> 标签：android, blocking, splash-screen, android-activity

我无法将此问题放入可搜索的术语中。我正在开发一个 Android 应用程序，特别是我的应用程序的启动画面。应用程序需要从外部 Web 服务（阻塞函数调用）获取数据，同时用户会得到一个漂亮的标题、图像和进度条。当数据到达时，用户被重定向到主菜单。它是一个简单的屏幕，所有内容都在 xml 布局文件中定义，我的问题是我只是黑屏几秒钟，然后是主菜单。如果我按回去，我会看到进度条愉快地旋转的启动画面。

这是我到目前为止所拥有的：

```
public class SplashActivity extends Activity{
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);
    }

    @Override
    public void onStart(){
        super.onStart();
        DatabaseManager db = new DatabaseManager(this.getBaseContext());
        db.fetchExternCatalog(); //doesnt return until data arrives
        Intent intent = new Intent().setClass(this, MainMenuActivity.class);
        startActivity(intent);
    }
} 
```

似乎直到 Activity 运行（在 onCreate()、onStart() 等之后）才真正绘制屏幕。我认为 onStart() 将是放置这个的完美位置，但显然不是。

那么如何在屏幕上绘制所有内容并在之后调用阻塞函数，以便用户在下载数据时真正看到启动画面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:30:08.433

您需要使用 ProgressDialog 类来构建对话框，然后在线程内运行阻塞方法。

我将在一分钟内发布一个示例（必须靠近 PC：p）

```
 private void showSplash(){

    progressDialog = ProgressDialog.show(this, "Hello! ima title", "Im the message you see.");
    progressDialog.show();

    Thread t = new Thread(new Runnable(){                   
        public void run(){
            // Put your blocking method here.
            // You may need to build in a "hey, im done downloading" variable to get it to close down right
    progressDialog.dismiss();
    }
}); 
t.start();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T18:32:53.373

您将锁定 UI 线程，这就是我相信您看到黑屏的原因。使用 AsyncTask 或为数据库操作创建自己的线程池。

至于点击后退按钮并查看您的旧活动，您需要告诉 android 不要将活动存储在它的堆栈中。这应该有助于：

[http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html](http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html)

# php - 两个数组的区别

> ID：10077840
> 
> 赞同：47
> 
> 时间：2012-04-09T18:25:30.253
> 
> 标签：php

我有以下两个数组。我想要这两个数组之间的区别。也就是说，我怎样才能找到两个数组中都不存在的值？

```
 $array1=Array ( [0] => 64 [1] => 98 [2] => 112 [3] => 92 [4] => 92 [5] => 92 ) ;
 $array2=Array ( [0] => 3 [1] => 26 [2] => 38 [3] => 40 [4] => 44 [5] => 46 [6] => 48 [7] => 52 [8] => 64 [9] => 68 [10] => 70 [11] => 72 [12] => 102 [13] => 104 [14] => 106 [15] => 92 [16] => 94 [17] => 96 [18] => 98 [19] => 100 [20] => 108 [21] => 110 [22] => 112); 
```

* * *

## 回答 #1

> 赞同：190
> 
> 时间：2012-04-09T18:32:51.877

要获得两个数组之间的差异，您需要执行以下操作：

```
$fullDiff = array_merge(array_diff($array1, $array2), array_diff($array2, $array1)); 
```

原因是`array_diff()`它只会给你 in`$array1`但不是的值，而不是`$array2`相反。以上将给你两个。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-04-09T18:27:10.863

**注意：**此答案将返回 in`$array2`中不存在的值`$array1`，它不会返回in`$array1`中不存在的值`$array2`。

```
$diff = array_diff($array2, $array1); 
```

[`array_diff()`](http://php.net/array-diff)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-11-30T07:13:57.833

如果要递归获取数组之间的差异，请尝试以下功能：

```
function arrayDiffRecursive($firstArray, $secondArray, $reverseKey = false)
{
    $oldKey = 'old';
    $newKey = 'new';
    if ($reverseKey) {
        $oldKey = 'new';
        $newKey = 'old';
    }
    $difference = [];
    foreach ($firstArray as $firstKey => $firstValue) {
        if (is_array($firstValue)) {
            if (!array_key_exists($firstKey, $secondArray) || !is_array($secondArray[$firstKey])) {
                $difference[$oldKey][$firstKey] = $firstValue;
                $difference[$newKey][$firstKey] = '';
            } else {
                $newDiff = arrayDiffRecursive($firstValue, $secondArray[$firstKey], $reverseKey);
                if (!empty($newDiff)) {
                    $difference[$oldKey][$firstKey] = $newDiff[$oldKey];
                    $difference[$newKey][$firstKey] = $newDiff[$newKey];
                }
            }
        } else {
            if (!array_key_exists($firstKey, $secondArray) || $secondArray[$firstKey] != $firstValue) {
                $difference[$oldKey][$firstKey] = $firstValue;
                $difference[$newKey][$firstKey] = $secondArray[$firstKey];
            }
        }
    }
    return $difference;
} 
```

测试：

```
$differences = array_replace_recursive(
    arrayDiffRecursive($firstArray, $secondArray),
    arrayDiffRecursive($secondArray, $firstArray, true)
);
var_dump($differences); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-09T18:27:37.280

数组差异？

[http://php.net/array_diff](http://php.net/array_diff)

```
var_dump(array_diff($array2, $array1)); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-29T12:51:20.177

```
<?php
function getArrayDiff($a1, $a2) {
    $result = array();

    print_r($a1);
    print_r($a2);

    // If First Array is Bigger than Second
    if( count($a1) > count($a2) ) {
        $result=array_diff($a1,$a2);
    }
    // If Second Array is Bigger than First
    if( count($a1) < count($a2) ) {
        $result=array_diff($a2,$a1);
    }
    // If Both array are same but, data values are different.
    else
    {
        $result = array_merge (array_diff($a2,$a1), array_diff($a1,$a2));   
    }
    return $result;
}

print "<pre>";
// First Array is Big
echo "First Array is Big <br/>";
$a1=array("a"=>"red","b"=>"green","c"=>"blue","d"=>"yellow");
$a2=array("e"=>"red","f"=>"green","g"=>"blue");
print_r( getArrayDiff($a1, $a2) );

// Second Array is Big
echo "Second Array is Big <br/>";
$a1=array("e"=>"red","f"=>"green","g"=>"blue");
$a2=array("a"=>"red","b"=>"green","c"=>"blue","d"=>"yellow");
print_r( getArrayDiff($a1, $a2) );

// Both Array are same
echo "Both Array are same <br/>";
$a1=array("a"=>"red","b"=>"green","d"=>"yellow");
$a2=array("e"=>"red","f"=>"green","g"=>"blue");
print_r( getArrayDiff($a1, $a2) );

?> 
```

> 输出：

```
First Array is Big 
Array
(
    [a] => red
    [b] => green
    [c] => blue
    [d] => yellow
)
Array
(
    [e] => red
    [f] => green
    [g] => blue
)
Array
(
    [d] => yellow
)
Second Array is Big 
Array
(
    [e] => red
    [f] => green
    [g] => blue
)
Array
(
    [a] => red
    [b] => green
    [c] => blue
    [d] => yellow
)
Array
(
    [d] => yellow
)
Both Array are same 
Array
(
    [a] => red
    [b] => green
    [d] => yellow
)
Array
(
    [e] => red
    [f] => green
    [g] => blue
)
Array
(
    [g] => blue
    [d] => yellow
) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-02-20T08:45:46.137

如果你要使用`array_diff()`.
需要记住的是，论点的编写顺序。

PHP 文档：[array_diff](https://www.php.net/manual/en/function.array-diff.php)

```
# array_diff(1, 2)
array_diff($one, $two);

# array_diff(2, 1)
array_diff($two, $one); // produces different result. 
```

# java - 将 Java 未完成项目添加到 SBT 依赖项

> ID：10077841
> 
> 赞同：2
> 
> 时间：2012-04-09T18:25:34.497
> 
> 标签：java, scala, dependencies, sbt

我是 SBT 的新手，我正在考虑将我的工作迁移到 IntellijIDEA。

我有一个使用 eclipse 创建的 Java 项目，现在我想将它与 scala 一起使用。

但是，该 Java 项目在不断变化，我不想每次都编译一个 jar 并放入 lib 文件夹。

有没有一种简单的方法来添加这种依赖关系？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T18:35:22.370

假设您有两个项目：

1) 在`/main-project`中，您已`build.sbt`包含该行`name := "main-project-id"`

2) 在`/other-project`中，您`build.sbt`包含该行`name := "other-project-id"`

您可以通过添加文件来创建从 Main 项目到 Other 项目的依赖项`/main-project/project/Build.scala`：

```
import sbt._
import Keys._

object MainProjectBuild extends Build {
  lazy val main = Project(id = "main-project-id", base = file(".")) dependsOn(other)
  lazy val other = Project(id = "other-project-id", base = file("other-project"))
} 
```

`/other-project`然后在里面添加一个链接`/main-project`。就像是：

```
cd /main-project
ln -s ../other-project other-project 
```

这样您现在`other-project`在一个名为的目录中有一个：`/main-project/other-project/`.

完成此操作后，如果您运行`sbt compile`或在内部进行任何操作`/main-project`，它将按预期工作。

**编辑**

一种不同的，也许更简单的方法就是创建一个指向您的 java 源的链接，使其看起来像是在同一个源目录中。

因此，如果您的 Scala 代码在`/main-project/src/main/scala/somepackage/...`并且您的 java 代码在 中`/other-project/src/main/java/otherpackage/...`，那么您可以执行以下操作：

```
cd /main-project/src/main
ln -s /other-project/src/main/java java 
```

那么该目录`/main-project/src/main/java`将只是指向依赖源，但 sbt 将把它全部构建在一起。

# java - Android WebView 302 重定向 - 蜂窝

> ID：10077843
> 
> 赞同：19
> 
> 时间：2012-04-09T18:25:50.873
> 
> 标签：java, android, redirect, android-3.0-honeycomb

我正在开发一个使用 WebView 和一些 302 重定向来跟踪链接点击的 Android 应用程序。在 Android 2.3.3 上，302 重定向通过

```
public boolean shouldOverrideUrlLoading(WebView view, String url) 
```

正确，但在 Honeycomb 3.2.2 上只有初始 URL 通过，并且 302 重定向永远不会显示为被请求。我在这里尝试了解决方案[，并在](https://stackoverflow.com/questions/8941516/android-why-webview-redirect-to-webbrowser)[此处](https://stackoverflow.com/a/9493323/211780)尝试了答案，但这些都不能解决问题。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-01T11:33:08.707

试试这个方法[public WebResourceResponse shouldInterceptRequest (WebView view, String url)](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldInterceptRequest(android.webkit.WebView,%20java.lang.String))

也许，对你有帮助。

# image - 在python中调整图像大小

> ID：10077844
> 
> 赞同：2
> 
> 时间：2012-04-09T18:25:51.127
> 
> 标签：image, resize, python-2.5

我可以将python中的图像大小调整为给定的高度和宽度吗？我使用python 2.5，我尝试了本教程[http://effbot.org/imagingbook/introduction.htm](http://effbot.org/imagingbook/introduction.htm)，我安装了图像的PIL库，但是当我尝试写：

```
import Image
im = Image.open("test.jpg") 
```

我从 import:open 得到了未定义的变量，虽然`import Image`没有给出错误？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T18:31:25.883

您的导入似乎是问题所在。使用它而不是“导入图像”：

```
from PIL import Image 
```

然后像这样继续：

```
image = Image.open('/example/path/to/image/file.jpg/')
image.thumbnail((80, 80), Image.ANTIALIAS)
image.save('/some/path/thumb.jpg', 'JPEG', quality=88) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-30T04:17:21.110

对谁有用：刚刚在[Pillow 官方网站](http://pillow.readthedocs.org/installation.html)上找到。您可能使用了 Pillow 而不是 PIL。

> 警告
> 
> Pillow >= 1.0 不再支持“导入图像”。请改用“from PIL import Image”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-16T06:24:42.120

此脚本调整给定文件夹中所有图像的大小：

```
import PIL
from PIL import Image
import os, sys
path = "path"
dirs = os.listdir( path )
def resize():
    for item in dirs:
        if os.path.isfile(path+item):
            img = Image.open(path+item)
            f, e = os.path.splitext(path+item)
            img = img.resize((width,hight ), Image.ANTIALIAS)
            img.save(f + '.jpg') 
resize() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-08T21:41:00.190

```
import os
from PIL import Image

imagePath = os.getcwd() + 'childFolder/myImage.png'
newPath = os.getcwd() + 'childFolder/newImage.png'
cropSize = 150, 150

img = Image.open(imagePath)
img.thumbnail(cropSize, Image.ANTIALIAS)
img.save(newPath) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-13T18:36:30.750

如果您在使用 PIL 时遇到问题，另一种选择可能是 scipy.misc 库。假设您要调整大小为 48x48，并且您的图像与脚本位于同一目录中

```
from from scipy.misc import imread
from scipy.misc import imresize 
```

进而：

```
img = imread('./image_that_i_want_to_resize.jpg')
img_resized = imresize(img, [48, 48]) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-03T11:18:29.087

*   **您可以使用调整图像大小`skimage`**

    ```
    from skimage.transform import resize
    import matplotlib.pyplot as plt

    img=plt.imread('Sunflowers.jpg')
    image_resized =resize(img, (244, 244)) 
    ```

*   **绘制调整大小的图像**

    ```
    plt.subplot(1,2,1)
    plt.imshow(img)
    plt.title('original image')

    plt.subplot(1,2,2)
    plt.imshow(image_resized)
    plt.title('image_resized') 
    ```

*   **进一步的代码说明：[scikit-image](https://scikit-image.org/docs/dev/auto_examples/transform/plot_rescale.html)**

# django - 我正在 django 中扩展用户模型，但由于原始密码，我无法进行身份验证

> ID：10077846
> 
> 赞同：2
> 
> 时间：2012-04-09T18:26:01.557
> 
> 标签：django, django-authentication

所以问题是我在 django 中扩展了用户模型。我已经为它写了意见。这是我的模型代码：-

```
class StudentProfile(User):
    batch = models.CharField(max_length=10)
    course = models.CharField(max_length=20)
    date_of_birth = models.DateField()
    answer = models.CharField(max_length=20)
    contact = models.CharField(max_length=20) 
```

这是我的身份验证后端文件：-

从 quizapp.models 导入 StudentProfile

```
class StudentAuthenticationBackend(object):
    def authenticate(self, username=None, password=None):
        try:
            student = StudentProfile.objects.get(username=username)
            if student.check_password(password):
                return student
        except StudentProfile.DoesNotExist:
            pass

        return None

    def get_user(self, user_id):
        try:
            return StudentProfile.objects.get(pk=user_id)
        except StudentProfile.DoesNotExist:
            return None 
```

我已经在seetings.py 中进行了更改

```
AUTHENTICATION_BACKENDS = (
    'quizapp.backends.StudentAuthenticationBackend',
    'django.contrib.auth.backends.ModelBackend',
) 
```

我正在打印用户名、密码和身份验证用户。这就是我得到的：-

使用 django 创建超级用户时

```
>> a = authenticate(username="super",password="super")
>> print(a)
>> super 
```

但是当使用表单创建的用户时，

```
>> b = authenticate(username="test",password="123")
>> print(b)
>> None 
```

我已经交叉检查了用户名和密码，这是真的。所以但是在 auth_user 表中，用户名是超级用户，密码是加密的，但是对于测试用户，用户名是用户，密码是 123。

所以问题一定是 django 正在使用 123 是加密密码并使用它的解密版本进行身份验证。

有没有办法解决这个问题？

我使用了 OneToOneField 并在 StudentProfile 模型中添加了额外的字段。现在我正在使用表单并使用它注册用户。

这是查看代码：-

```
def register_page(request):
    if request.method == 'POST':
        form = RegistrationForm(request.POST)
            if form.is_valid():
                user = StudentProfile.objects.create(
                  username=form.cleaned_data['username'],
                  password=form.cleaned_data['password1'],
                  batch=form.cleaned_data['batch'],
                  first_name=form.cleaned_data['first_name'],
                  last_name=form.cleaned_data['last_name'],
                  course=form.cleaned_data['course'],
                  date_of_birth=form.cleaned_data['date_of_birth'],
                  secret_question=form.cleaned_data['secret_question'],
                  answer=form.cleaned_data['answer'],
                  contact=form.cleaned_data['contact']
                 )
                return HttpResponseRedirect('/register/success/')
   else:
       form = RegistrationForm()

     variables = RequestContext(request, {'form': form})
     return render_to_response('registration/register.html',variables) 
```

而且我在“user_id”列中的 /register/ null 值处收到 IntegrityError 违反了非空约束错误。有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T18:32:57.560

[从关于存储有关用户的其他信息](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)的 Django 身份验证文档部分：

> 如果您想存储与您的用户相关的附加信息，Django 提供了一种方法来指定特定于站点的相关模型——称为“用户配置文件”——为此目的。
> 
> 要使用此功能，请定义一个模型，其中包含您想要存储的其他信息或您想要使用的其他方法的字段，并将模型中的`OneToOneField`命名添加`user`到`User`模型中。这将确保只能为每个`User`.

所以你根本不应该子类`User`化——这是你问题的根源。相反，您应该创建另一个具有一对一关系的模型，`User`并在那里添加您的字段。

# java - 无法解决我的 Circle 类问题

> ID：10077850
> 
> 赞同：0
> 
> 时间：2012-04-09T18:26:27.610
> 
> 标签：java, swing, geometry

大约两周前，我提出了另一个关于 Circle 课程的问题。我无法准确地确定直接代码放在这里向你们展示，但无论我对 Circle 类或任何类似的东西做什么，我都无法编译代码。

我曾尝试直接从教科书中复制，以查看老师和书提供的代码是否有效，但每当我尝试创建圆形或矩形时，我仍然会收到“找不到符号”。例如，这是我书中的一些代码

```
import javax.swing.JApplet;
import java.awt.Color;
import java.awt.Graphics;

public class Week8_ExtraCredit extends JApplet
{
    private int centerX = 200, centerY = 150;
    private Color toggleColor = Color.BLACK;
    private Circle circle;

    public void paint( Graphics g )
    {
        super.paint( g );

        for ( int diameter = 200; diameter >= 20; diameter -= 20 )
        {
            circle = new Circle( centerX - diameter / 2,
                                 centerY - diameter / 2,
                                 diameter, toggleColor );

            circle.draw( g );

            if ( toggleColor.equals( Color.BLACK ))
                toggleColor = Color.RED;
            else
                toggleColor = Color.BLACK;
        }
    }
} 
```

这段代码是直接从我的书中提取的，它应该在里面创建一个带有黑色和红色环的圆圈。但是运行它，我得到这个错误

```
C:\Users\yardeen\Documents\JCreator LE\MyProjects\Week8_ExtraCredit\src\Week8_ExtraCredit.java:17: error: cannot find symbol
    private Circle circle;
            ^
  symbol:   class Circle
  location: class Week8_ExtraCredit 
```

这是为调用 Circle 类的每个实例给出的。如果我能得到任何帮助来解释我为什么会遇到这个问题，那就太棒了！到目前为止，这是我学习 Java 的唯一障碍。:\

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T18:40:50.530

假设您没有像代码那样创建 Circle 类并且上述评论建议，这是一个替代解决方案（除非您需要创建自己的 Circle 类）：

确保你有这些导入：

```
import java.awt.*;
import java.awt.event.*;
import java.awt.geom.*; 
```

然后创建一个椭圆：

```
Shape circle = new Ellipse2D.Double(x, y, width, height); 
```

此行将替换您的“circle = new Circle”行。确保 x、y、宽度和高度是双倍的，如果您想了解更多信息，请查看[此](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/geom/Ellipse2D.Double.html)。

# c# - 如何为名称中带有空格的列创建复杂的数据类型？

> ID：10077865
> 
> 赞同：4
> 
> 时间：2012-04-09T18:28:21.807
> 
> 标签：c#, sql, entity-framework, entity-framework-4

我有一个存储过程，它返回列名中带有空格和破折号的列。我不能简单地使用“获取列信息”按钮来自动为这个存储过程生成一个复杂类型。

我如何处理字段名称中的空格和破折号，因为它们不是 C# 中字段名称的合法字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T22:06:22.420

我找到了答案。

继续创建复杂类型，用下划线替换列名中的空格，或者按照您喜欢的任何约定命名复杂类型中的字段。

然后，在模型浏览器中单击您的函数导入。在 Visual Studio 2010 窗口的底部，应该有一个显示“映射详细信息”的选项卡。在这里，您可以指定与复杂类型中的每个字段对应的列的名称。在此处输入带有空格的列名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-24T18:09:03.507

另一种方法是使用 a`SqlDataAdapter`来执行存储过程。然后，您可以使用`Fill`将内容存储到 a`DataSet`中的方法，然后您可以在其中遍历行。这适用于有空格的列。有关此问题的详细解决方案，请参阅[此处的此帖子。](https://stackoverflow.com/a/38019533/4896260)

# batch-file - 批处理中的数字错误

> ID：10077866
> 
> 赞同：1
> 
> 时间：2012-04-09T18:28:25.277
> 
> 标签：batch-file

考虑以下代码：

```
@echo off

setlocal enabledelayedexpansion

set HOUR=00
set MINS=10

if %HOUR% EQU 00 (
set HOUR=12
set /A minDiff=60-!MINS!&set expectedTime=1^.!minDiff!
)

echo expectedTime=!expectedTime! 
```

作为变量 expectedTime 的值的预期输出必须为 1.50 ，但它仅输出 1.。给出的错误是：无效的数字。数字常量是十进制 (17)、十六进制 (0x11) 或八进制 (021)。请帮忙！！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T19:18:07.657

您发布的代码对我来说很好。我怀疑您在与您发布的内容略有不同的条件下遇到错误。

SET /A 有一个非常不幸的特性，即任何以 0 开头的数字都被视为八进制表示法。因此 08 或 09 的值不是 SET /A 的有效数字，并且会给出您引用的错误消息。要获得正确的值，您必须将 MINS 表示为 8 或 9（无前导 0）。请注意，00 到 07 可以正常工作，因为八进制和十进制解释产生相同的值。

一种经常用于处理潜在的不想要的前导零的技巧是在数字字符串前面加上适当大的 10 次幂，然后使用 mod（余数）运算符提取所需的值。例如，如果您从未期望值大于 9999，那么您可以使用以下内容安全地处理变量 VAL 中潜在的前导零

```
set /a "VAL=10000%VAL% %% 10000" 
```

上述技术的好处是它可以合并到更大的数学计算中，而不必在计算之前单独去除前导零。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-09T18:37:18.207

根据 IF 语句更改为：

```
 %HOUR% = 12 
```

那应该可以解决这个问题。

# variables - 通过用户选择传递产品变量

> ID：10077869
> 
> 赞同：1
> 
> 时间：2012-04-09T18:28:37.040
> 
> 标签：variables, magento, controller

我想做一个售票网站主题。正如您可能猜到的那样，大多数售票网站都使用基于 Flash 的椅子选择工具。那些使用预制场景的系统是观众可以选择他们的椅子。我可以使用 jQuery 或 flash 制作预制场景，但我不知道如何处理 Magento 的选择。

那么，我想知道是否可以在 Magento 中传递用户特定的变量？我的意思是，这个变量也应该在结帐和后端可用。你能给我一个建议来完成这样一个想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T01:01:56.583

如果可以从固定的选项列表中选择此选项，则可以使用可配置产品或自定义选项来实现您想要的。

如果您正在寻找的是一个完全定制的用户定义值，那么这是相当密集的编程，所以如果您不是开发人员，这不是一件容易的事。

原谅无耻的自我链接，但我最近在这里发布了这个主题：

[http://mikebywaters.wordpress.com/2012/03/29/adding-custom-data-to-a-cart-item-in-magento/](http://mikebywaters.wordpress.com/2012/03/29/adding-custom-data-to-a-cart-item-in-magento/)

简而言之，帖子说您可以在将项目添加到报价单时将一组自定义数据添加到报价单。为此，您必须完全劫持添加到购物车的控制器。首先，从现有控制器中获取所有功能。查看 Mage_Sales_Model_Quote::addProduct() 函数，您会发现它需要两个参数，如下所示：

```
$quote->addProduct($product, $request); 
```

其中 $request 是 Varien_Object 类型，格式如下：

```
$request = new Varien_Object(array(
    'qty'=>$qty,
    'options'=>$options,
    'custom_options'=>$custom_options 
)); 
```

希望这可以帮助。

# file - powershell 写入日志文件

> ID：10077871
> 
> 赞同：0
> 
> 时间：2012-04-09T18:28:42.413
> 
> 标签：file, logging, powershell

我编写了下面的代码，除了其中一个变量超过 200 个字符外，它工作正常，并进入下一行，弄乱了布局。关于更好的布局的任何建议，所以如果其中一个变量很长，它仍然保留结构？

```
$WriteLog = $null 
$WriteLog = @()
$WriteLog +="Here is some stuff:                $stuff1"
$WriteLog +="Here is some stuff:                $stuff2"
$WriteLog +="Here is some stuff:                $stuff3"
$WriteLog +="Here is some stuff:                $stuff4"
$WriteLog +="Here is some stuff:                $stuff5"
$WriteLog +="Here is some stuff:                $stuff6"
Out-File -InputObject $WriteLog -Append -NoClobber -FilePath "$env:SystemDrive\somestuff\somestuff.txt" 
```

示例输出：

```
"Here is some stuff:                    stuff1"
"Here is some stuff:            stuff2"  
"Here is some stuff:                Heres a lot of stuff
stuff3, stuff3, stuff3, stuff3,  stuff3, stuff3" 
"Here is some stuff:            stuff4"  
"Here is some stuff:                    stuff5"
"Here is some stuff:                    stuff6" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T20:04:31.727

Out-File 有一个 -Width 参数可能会有所帮助。或者您可以将长变量格式化为此处的字符串吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T19:10:11.937

如果您不确定，我会使用格式（我希望我理解您的问题）。看

```
'{0,5} -f 5
#vs.
'{0,5} -f 1115 
```

然后..

```
$WriteLog = $stuff1, $stuff2, $stuff3, $stuff4, $stuff5, $stuff6 | 
               Foreach-Object { "Here is some stuff:{0,20}" -f $_ }
$WriteLog = $WriteLog -join "`n" 
```

# javascript - 在第三方 ajax 之后保持 jquery 脚本存活

> ID：10077876
> 
> 赞同：-1
> 
> 时间：2012-04-09T18:29:03.083
> 
> 标签：javascript, jquery

我知道还有其他类似的帖子，但我不知道问别人的问题是否合适。这是我认为我找到了我的问题的答案的链接：[其他问题](https://stackoverflow.com/questions/2238030/jquery-trigger-document-ready-so-ajax-code-i-cant-modify-is-executed "其他问题")。我认为页面上的最后一个解决方案可能是要使用的解决方案。

我仍然存在的问题是*如何*将其应用于我的场景。我的脚本都包含在一个外部函数中。它基于这个概念：

```
jQuery.noConflict();
jQuery(function($) {

    var Engine = {
        utils : {
            functionName : function(){
                // Do stuff in here
            },
            functionName2 : function(){
                // do something else    
            }
        },
        ui : {
            functionName : function(){
                // Do stuff in here
            },
            functionName2 : function(){
                // do something else    
            }
        },
        fixes : {
            functionName : function(){
                // Do stuff in here
            },
            functionName2 : function(){
                // do something else    
            }
        },
        tweaks : {

            functionName : function(){
                // Do stuff in here
            },
            functionName2 : function(){
                // do something else    
            }
        }
    };

    Engine.utils.functionName();
    Engine.utils.functionName2();

    Engine.ui.functionName();
    Engine.ui.functionName2();

    Engine.fixes.functionName();    
    Engine.fixes.functionName2();   

    Engine.tweaks.functionName();
    Engine.tweaks.functionName2();

}); 
```

我最终试图解决我的脚本在 ajax 调用更改内容后无法正常工作的问题。链接的问题是“jquery : trigger $document.ready（所以我无法修改的 AJAX 代码被执行）”。那个答案，尤其是最后一个，似乎是我正在寻找的，但我不确定如何在我的场景中使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T17:38:35.860

我使用带 on() 的委托找到了答案。

```
jQuery.noConflict();
function scriptlist() {
    var $ = jQuery;
    var Engine = {
        utils : {
            functionName : function(){
                // Do stuff in here
            },
            functionName2 : function(){
                // do something else    
            }
        },
        ui : {
            functionName : function(){
                // Do stuff in here
            },
            functionName2 : function(){
                // do something else    
            }
        },
        fixes : {
            functionName : function(){
                // Do stuff in here
            },
            functionName2 : function(){
                // do something else    
            }
        },
        tweaks : {

            functionName : function(){
                // Do stuff in here
            },
            functionName2 : function(){
                // do something else    
            }
        }
    };

    Engine.utils.functionName();
    Engine.utils.functionName2();

    Engine.ui.functionName();
    Engine.ui.functionName2();

    Engine.fixes.functionName();    
    Engine.fixes.functionName2();   

    Engine.tweaks.functionName();
    Engine.tweaks.functionName2();

};

jQuery('body').on('change click.productSubmitInput',function(){
    jQuery.ready(scriptlist());
});
scriptlist(); 
```

这样，我的所有脚本将在由 aachange() 事件引发的内容更新后或当我的带有类“productSubmitInput”的按钮被单击时重新绑定。

# user-interface - 您如何使用 DirectX9 渲染超流畅的字体？

> ID：10077884
> 
> 赞同：1
> 
> 时间：2012-04-09T18:29:25.027
> 
> 标签：user-interface, fonts, directx, rendering, directx-9

简单地`ID3DXFont::DrawText()`单独使用会产生锯齿状字体，尤其是在较大的字体大小时。有没有办法使用 DirectX9 像在 Windows 8 Metro UI 中那样非常流畅地渲染字体？

我有点想避免 DirectWrite，因为它需要 Direct2D，但我使用的是 DirectX9。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:32:39.897

DirectWrite 实际上不需要 Direct2D，可以单独使用 (IDWriteBitmapRenderTarget)。使用 Direct2D 将 DirectWrite 文本渲染到 IWICBitmap（通过 ID2D1Factory::CreateWicBitmapRenderTarget()），然后使用 DX 绘制该位图（可能通过复制到 DX 表面，或使用某些共享表面方法）要容易得多；我'不熟悉这里的细节）。您可以通过 IWICImagingFactory::CreateBitmap() 创建 IWICBitmap。

Metro 似乎没有使用 ClearType，所以灰度应该没问题。正确的 ClearType 文本实际上需要每个组件的 alpha，因此通常无法将其渲染为具有 alpha 通道的位图。

您使用 DX9 是为了在 XP 上运行，还是出于其他原因使用它？如果您能够要求 Win7 或 Vista SP2 + 平台更新作为您的最低要求，那么我强烈建议您考虑使用 D2D+DW 将文本渲染为位图，然后使用 DX 绘制位图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T03:18:04.030

您可以创建位图字体渲染，范围从“非常简单”到“非常复杂”。

对于一个简单的方法，有这个例子，虽然它是在托管 DirectX 中，但可以很容易地在 C++/DirectX 9 中完成。[位图字体](http://www.chadvernon.com/blog/resources/managed-directx-2/bitmap-fonts/)。您还可以使用这个免费的应用程序[位图字体生成器](http://www.angelcode.com/products/bmfont/)轻松创建位图字体表（这里还有如何创建位图渲染的链接）。

然后有更复杂的方法来制作字体，例如使用带[符号的距离字段](http://dl.acm.org/citation.cfm?id=1031875)，如 [改进的矢量纹理的 Alpha 测试放大率中](http://www.valvesoftware.com/publications/2007/SIGGRAPH2007_AlphaTestedMagnification.pdf)所述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T10:24:21.563

ID3DXFont 无法绘制出非常酷和流畅的字体。为了实现这一点，我为字体渲染了自己的纹理图集，然后用带有纹理的四边形绘制它。第二种方法是用类似的方式从图集中绘制字体，但使用距离字段方法。带有简单像素着色器的距离场将为您提供非常流畅和可扩展的字体。

在这一点上我实现了这一点：[我的距离场字体](http://1.bp.blogspot.com/-YOwxOd-fCNM/T6F4pwntyWI/AAAAAAAAARk/C2d3xRDri7g/s1600/RGAtliAjuOELT2-m4bz-Mm9rSEtEu2pmktxUnWV0zXqzFFBW4ymJzqAew3oQxtK3UyOsW-9Fi0Q.png)

# schema - 如何在 Plone 中更改 Dexterity 提供的对象的 URL

> ID：10077886
> 
> 赞同：0
> 
> 时间：2012-04-09T18:29:38.940
> 
> 标签：schema, plone, zope, dexterity

我基于 Plone Dexterity 定义了一些内容类型，我希望任何内容类型都有自己的 ID。所以我使用了 zope.schema.Id 。

```
class IArticle(form.Schema, IImageScaleTraversable):
    """
    Article
    """

    form.model("models/article.xml")

    id = schema.Id(
        title=_(u"Identifier"),
        description=_(u"The unique identifier of object."),
        required=False
    ) 
```

当我创建一个新的文章对象时，它工作正常，但是当我想修改现有文章的 Id 时，它总是显示错误：

```
 {'args': (<MultiContentTreeWidget 'form.widgets.IRelatedItems.relatedItems'>,),
 'context': <Article at /dev/articles/this-is-another-articles>,
 'default': <object object at 0x100266b20>,
 'loop': {},
 'nothing': None,
 'options': {},
 'repeat': {},
 'request': <HTTPRequest, URL=http://localhost:8083/dev/articles/this-is-another-article/@@edit>,
 'template': <zope.browserpage.viewpagetemplatefile.ViewPageTemplateFile object at 0x10588ecd0>,
 'view': <MultiContentTreeWidget 'form.widgets.IRelatedItems.relatedItems'>,
 'views': <zope.browserpage.viewpagetemplatefile.ViewMapper object at 0x10b309f50>}
 .......
 .......
 .......
Module zope.tales.expressions, line 217, in __call__
Module zope.tales.expressions, line 211, in _eval
Module plone.formwidget.contenttree.widget, line 147, in render_tree
Module plone.app.layout.navigation.navtree, line 186, in buildFolderTree
Module Products.CMFPlone.CatalogTool, line 427, in searchResults
Module Products.ZCatalog.ZCatalog, line 604, in searchResults
Module Products.ZCatalog.Catalog, line 907, in searchResults
Module Products.ZCatalog.Catalog, line 656, in search
Module Products.ZCatalog.Catalog, line 676, in sortResults
Module plone.app.folder.nogopip, line 104, in documentToKeyMap
Module plone.folder.ordered, line 102, in getObjectPosition
Module plone.folder.default, line 130, in getObjectPosition
ValueError: No object with id "this-is-another-articles" exists. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T21:05:42.730

我不认为这是库存编辑表单中支持的用例。您可以从包含项目的文件夹的文件夹内容选项卡重命名项目。如果您想从编辑表单中执行此操作：

*   您可能需要使用自定义编辑表单（子类化现有表单）；
*   将您的 id 字段命名为“id”以外的名称，可能是“target_id”或“shortname”
*   让表单的 __call__() 方法更新/保存表单，并且仅在成功时重命名其容器中的项目。
*   __call__() 应该在触发名称更改的编辑后重定向到新项目的 URL。

也许像（完全未经测试）：

```
from plone.dexterity.browser.edit import DefaultEditForm as BaseForm
from Products.statusmessages.interfaces import IStatusMessages

class RenameEnabledEditForm(BaseForm):
    def __call__(self, *args, **kwargs):
         self.update(*args, **kwargs)
         data, errors = self.extractData()
         existing, newid = self.context.getId(), data.get('target_id')
         if not errors and existing != newid:
             parent_folder = self.context.__parent__
             if newid in parent_folder.objectIds():
                 raise RuntimeError('Duplicate object id')  # collision!
             parent_folder.manage_renameObject(existing, newid)
             newurl = parent_folder[newid].absolute_url()
             IStatusMessages(self.context).addStatusMessage(
                 u'Renamed item from "%s" to "%s" in folder' % (existing, newid),
                 type='info',
                 )
             self.request.response.redirect(newurl)
         else:
             return self.index(*args, **kwargs) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T21:31:40.710

为了与灵巧的内容类型一起使用，我改编了@spdupton 的答案（更正导入中的错字）并将 self.context 更改为 self.request

```
from Products.statusmessages.interfaces import IStatusMessage

class EditForm(dexterity.EditForm):
    grok.context(IPics)

    def applyChanges(self, data):    
        existing = self.context.getId()
        data, errors = self.extractData()
        super(EditForm, self).applyChanges(data)

        newid = str(data.get('picName'))

        print 'existing, newid =', existing, newid
        if not errors and existing != newid:
            parent_folder = self.context.__parent__
            if newid in parent_folder.objectIds():
                raise RuntimeError('Duplicate object id')  # collision!
            parent_folder.manage_renameObject(existing, newid)
            newurl = parent_folder[newid].absolute_url()
            IStatusMessage(self.request).addStatusMessage(
                u'Renamed item from "%s" to "%s"' % (existing, newid),
                type='info',
                )
            self.request.response.redirect(newurl) 
```

#

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T07:19:43.917

还有[一个未解决的问题和初步工作，](http://code.google.com/p/dexterity/issues/detail?id=174)以使敏捷类型支持标准“在内容上显示'短名称'？”-功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T07:14:56.370

我已经通过自定义添加表单实现了这一点，因此只有添加表单包含 id-field 而编辑表单不包含（重命名是通过重命名操作或从文件夹内容视图以旧方式完成的）。

一些样板：

```
from five import grok

from zope import schema

from plone.directives import form
from plone.directives import dexterity

class IMyContent(form.Schema):
    """Schema of MyContent"""

class NotValidId(schema.ValidationError):
    """Id is not valid."""

def isValidId(value):
    """Validates id for new MyContent objects"""
    # raise NotValidId(value)
    return True

class IMyContentAddForm(IMyContent):
    """Schema of MyContent Add Form"""

    form.order_before(id="*")
    id = schema.ASCIILine(
        title=u"Id",
        constraint=isValidId,
        required=True
        )

class MyContentAddForm(dexterity.AddForm):
    """Add Form for new MyContent objects"""
    grok.name("my.app.mycontent")

    label = u"Add New"
    schema = IMyContentAddForm

    def create(self, data):
        """Creates a new object with the given (validated) id"""
        id = data.pop("id")
        obj = super(MyContentAddForm, self).create(data)
        obj.id = id
        return obj 
```

# android - Eclipse 无法识别 Android 兼容性 Javadoc

> ID：10077890
> 
> 赞同：4
> 
> 时间：2012-04-09T18:30:01.140
> 
> 标签：android, javadoc

我正在尝试在我正在创建的 Android 应用程序中使用 v4 兼容性包，但 Eclipse 似乎找不到 Javadoc。我将兼容性jar（android-support-v4.jar）放在文件夹libs中，并在项目构建路径中引用它。然后我使用创建了Javadoc

```
javadoc -d docs -sourcepath src\java -subpackages android.support.v4 
```

在控制台中，效果很好。当我将它指向文件夹时，Eclipse 说它是一个有效的 Javadoc，但是在我创建的任何代码上，它都使用兼容性包，它只是说“这个元素既没有附加源代码也没有附加 Javadoc，因此找不到 Javadoc。”

```
So the build path for the Javadoc is file:/C:/android-sdk-windows/extras/android/compatibility/v4/docs/ 
```

它似乎编译得很好，但是当我将鼠标悬停时，我无法显示 Javadoc。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T21:20:33.410

如果要显示兼容性库中的 javadoc，可以右键单击项目，然后单击属性，然后在 java 构建路径上单击库，然后您将看到您的 android 兼容性 jar，然后单击它并单击源附件然后单击编辑并添加您的 android 兼容性路径（即 /android-sdk/extras/android/compatibility）

这是一个更容易指导的屏幕截图：![安卓兼容文档](../Images/5e04c37470364d07901ef29d521245b3.png)

请记住接受答案，以便人们可以继续回答您未来的问题。

# vb6 - 旧版 VB 6 远程调试桌面应用程序

> ID：10077891
> 
> 赞同：0
> 
> 时间：2012-04-09T18:30:02.063
> 
> 标签：vb6, remote-debugging

我会发布我尝试过的内容，但我还没有找到有关如何执行此操作的任何信息。我已经搜索并没有提出任何答案。

我希望能够从本地 VB 6 IDE 中调试用 VB 6 编写并安装在我网络中的远程计算机上的桌面应用程序。

我使用 VB 6 的原因是因为该应用程序是遗留的并且正在维护（很痛苦）。

非常感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T21:12:13.073

我从来没有设法做到这一点。

我建议在远程机器上安装 VB6 并运行使用远程桌面会话解释的应用程序。

# ruby - 在 ruby 中运行指南针时出现无效的 gemspec 错误

> ID：10077894
> 
> 赞同：0
> 
> 时间：2012-04-09T18:30:14.377
> 
> 标签：ruby, compass-sass

在 OSX 10.7.3 中运行新的指南针项目时收到以下错误。

```
Invalid gemspec in [/Library/Ruby/Gems/1.8/specifications/multipart-post-1.1.5.gemspec]:           invalid date format in specification: "2012-02-13 00:00:00.000000000Z" 
```

我试过运行 sudo gem update --system 来解决这个问题，但是这样做时我得到了同样的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T18:36:21.417

试试这个

```
gem install rubygems-update
update_rubygems 
```

您可能还会发现这很有帮助，尤其是。GaborKomaromi的回答

[gemspec 中的无效日期格式规范](https://stackoverflow.com/questions/7290575/invalid-date-format-specification-in-gemspec)

# scala - 将 .jar 添加到类路径（Scala）

> ID：10077899
> 
> 赞同：20
> 
> 时间：2012-04-09T18:30:34.110
> 
> 标签：scala, jar, jvm, classpath

所以我一直在尝试使用[信号收集](http://code.google.com/p/signal-collect/)框架，我下载了`.jar`文件并将其解压缩到一个文件夹中。目前文件夹结构如下：

```
LICENSE.txt  
PageRank.scala  
core-1.1.1-sources.jar  
dependencies/  
javaapi-1.1.1-sources.jar  
NOTICE.txt  
README.txt  
core-1.1.1.jar  
javaapi-1.1.1-javadoc.jar  
javaapi-1.1.1.jar 
```

他们提供的Scala测试代码在哪里`PageRank.scala`，分别是：

```
import com.signalcollect._

object PageRank extends App {
  val graph = GraphBuilder.build
  graph.addVertex(new PageRankVertex(id=1))
  graph.addVertex(new PageRankVertex(id=2))
  graph.addEdge(new PageRankEdge(sourceId=1, targetId=2))
  graph.addEdge(new PageRankEdge(sourceId=2, targetId=1))
  graph.execute
  graph.foreachVertex(println(_))
  graph.shutdown
}

class PageRankVertex(id: Any, dampingFactor: Double=0.85)
    extends DataGraphVertex(id=id, state=1-dampingFactor) {
  type Signal = Double

  def collect(oldState: Double, mostRecentSignals: Iterable[Double]): Double = {
    1 - dampingFactor + dampingFactor * mostRecentSignals.sum
  }

}

class PageRankEdge(sourceId: Any, targetId: Any)
    extends DefaultEdge(sourceId, targetId) {
  type SourceVertex = PageRankVertex

  def signal(sourceVertex: PageRankVertex) = {
    sourceVertex.state * weight / sourceVertex.sumOfOutWeights
  }

} 
```

当谈到 JVM/Java/Scala 时，我是一个新手，这是我尝试将其添加`.jar's`到类路径以进行编译`PageRank.scala`：

```
$ scalac -classpath *.jar dependencies/*.jar PageRank.scala 
error: IO error while decoding core-1.1.1.jar with UTF-8
Please try specifying another one using the -encoding option
error: IO error while decoding javaapi-1.1.1-javadoc.jar with UTF-8
Please try specifying another one using the -encoding option
error: IO error while decoding javaapi-1.1.1-sources.jar with UTF-8
Please try specifying another one using the -encoding option
error: IO error while decoding javaapi-1.1.1.jar with UTF-8
Please try specifying another one using the -encoding option
error: IO error while decoding dependencies/je-3.2.76.jar with UTF-8
Please try specifying another one using the -encoding option
error: IO error while decoding dependencies/scala-library-2.9.1.jar with UTF-8
Please try specifying another one using the -encoding option
6 errors found 
```

我无法弄清楚出了什么问题......发生了什么？谢谢！问候，-kstruct

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-09T18:41:54.677

您需要将两个类路径路径作为单个参数传递。

试试这个：

```
$ scalac -classpath "*.jar:dependencies/*.jar" PageRank.scala
$ scala -classpath "*.jar:dependencies/*.jar" PageRank
PageRankVertex(id=2, state=0.9999999999999997)
PageRankVertex(id=1, state=0.9999999999999997) 
```

它对我有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-28T11:47:06.447

似乎取决于已安装的 Java 版本，在类路径中包含多个 JAR 的通配符可能有效，也可能无效。我在 StackOverflow 的其他地方发现[了这个技巧](https://stackoverflow.com/questions/219585/including-all-the-jars-in-a-directory-within-the-java-classpath)（请注意，您可以在“echo”之后拥有任意数量的文件夹，用空格分隔）：

```
scalac -classpath $(echo *.jar dependencies/*.jar | tr ' ' ':')  PageRank.scala
scala -classpath $(echo *.jar dependencies/*.jar | tr ' ' ':')  PageRank 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-09T13:46:32.323

为简单起见，您可以只使用： scala -classpath $(echo *.jar dependencies/*.jar | tr ' ' ':') PageRank.scala

# doctrine-orm - 使用 CI2 + Doctrine2 从数据库/实体中获取随机记录

> ID：10077900
> 
> 赞同：0
> 
> 时间：2012-04-09T18:30:35.483
> 
> 标签：doctrine-orm, codeigniter-2

以下将返回带有 Doctrine 的随机记录：

```
$name = Doctrine::getTable('nametable')
->createQuery()
->select('name')
->orderBy('RAND()')
->fetchOne(); 
```

但我正在运行 CI2 + Doctrine2，所以它不起作用`Call to undefined method Doctrine::getTable()`

我试过了

```
$data = $this->doctrine->em->getRepository('ORM\Project\Names')
                 ->orderBy('RAND()')
                 ->fetchOne(); 
```

但这也不起作用： `Uncaught exception 'BadMethodCallException' with message 'Undefined method 'orderBy'. The method name must start with either findBy or findOneBy!'`

也许 findOneBy 是我想要的，但它需要一个数组。

在此设置中是否有一种优雅的方式来获取随机记录？

**编辑：**

这就是我想出的：

```
$query = $this->doctrine->em->createQuery("select max(u.id) from ORM\Dynasties2\Femalenames u");
$result = $query->getSingleResult();
$highval = $result[1];
$random_name = rand(1,$highval);
$name = $this->doctrine->em->find('ORM\Dynasties2\Femalenames', $random_name);
$mother_name = $name->getName(); 
```

当然有更清洁的方法？？？显然 CI2/Doctrine2 中没有 RAND() 这样的东西，只是编写一个 SQL 查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:41:48.480

**当您尝试访问存储库时， “orderBy”**不起作用。在这种情况下，您必须使用 "createQuery" 或查询构建器**"createQueryBuilder"**进行查询。

**另一种方式是：**

```
$data = $this->doctrine->em->getRepository('ORM\Project\Names')->findOneBy(array(
    'field' => 'ASC or DESC'
)); 
```

在这里您可以测试 RAND 而不是 ASC 或 DESC，但我认为最好的方法是进行查询。

您可以在存储库中定义一个函数并查询您的存储库中有所有查询，而不是在您的控制器中，那么您的第一个示例看起来不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T17:40:52.167

这就是我想出的：

```
$query = $this->doctrine->em->createQuery("select max(u.id) from ORM\Dynasties2\Femalenames u");
$result = $query->getSingleResult();
$highval = $result[1];
$random_name = rand(1,$highval);
$name = $this->doctrine->em->find('ORM\Dynasties2\Femalenames', $random_name);
$mother_name = $name->getName(); 
```

我以为还有另一种方法，但找不到。

# android - 像主页按钮一样覆盖电源按钮

> ID：10077905
> 
> 赞同：38
> 
> 时间：2012-04-09T18:30:47.477
> 
> 标签：android, overriding, home-button

好吧，我正在做一些事情，我想禁用设备的所有硬按钮。

电源、主页、音量增大、音量减小、搜索、返回等硬按钮。

我已经成功地覆盖了除了电源之外的几乎所有[按钮](https://stackoverflow.com/questions/10025660/override-home-and-back-button-is-case-a-boolean-is-true/10025904#10025904)。

所以我只是想让你们看到并分享一些想法，这样我就可以摆脱它。

我得到了**长按**Power keyevent in `onDispatchKeyEvent()`，就像我想抓住它的短按一样。此外，当按下电源时，我还尝试通过获取of来停止*屏幕关闭*，并且我成功接收了它，但我无法处理它。`Broadcast``SCREEN_OFF`

谢谢。

然后，我创建了一个接收屏幕开/关广播的 ReceiverScreen

**ReceiverScreen.java**

```
public class ReceiverScreen extends BroadcastReceiver {

    public static boolean wasScreenOn = true;

    @Override
    public void onReceive(Context context, Intent intent) {
        if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
            // do whatever you need to do here
            wasScreenOn = false;
        } else if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {
            // and do whatever you need to do here
            wasScreenOn = true;
        }
    }
} 
```

**DisableHardButton.java**

```
public class DisableHardButton extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);
    IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_ON);
    filter.addAction(Intent.ACTION_SCREEN_OFF);
    BroadcastReceiver mReceiver = new ReceiverScreen();
    registerReceiver(mReceiver, filter);
    }

@Override
    protected void onPause() {
        // when the screen is about to turn off
        if (ScreenReceiver.wasScreenOn) {
            // this is the case when onPause() is called by the system due to a screen state change
            System.out.println("SCREEN TURNED OFF");

    } else {
        // this is when onPause() is called when the screen state has not changed
    }
    super.onPause();
}

@Override
protected void onResume() {
    // only when screen turns on
    if (!ScreenReceiver.wasScreenOn) {
        // this is when onResume() is called due to a screen state change
        System.out.println("SCREEN TURNED ON");
    } else {
        // this is when onResume() is called when the screen state has not changed
    }
    super.onResume();
}
} 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-04-12T05:42:30.100

呸。这是一个相当有争议的问题，背后有很多评论。

让我先稍微改一下你的问题。如果我理解清楚，您希望在活动期间禁用设备上的所有物理按钮。这包括电源按钮，您可以通过处理`ACTION_SCREEN_OFF`意图来检测它。对于这种情况，您当前（成功的）解决方法是广播一个`ACTION_SCREEN_ON`，当它关闭时将屏幕踢回生活，前提是主机正确实现了这一点。

如果（且仅当）您能够`ACTION_SCREEN_OFF`在它被发送到系统之前捕获并处理它，您现在希望通过使该操作变得不必要来加倍努力。这可能吗？如果可以，怎么做？

这值得商榷。然而，简短的版本很简单：**如果不对您的固件或 Android 操作系统的核心进行自定义修改，这对于有限数量的设备是不可能的。**

就文档而言，Android 系统将其定义为[*广播动作*](http://developer.android.com/reference/android/content/Context.html#sendBroadcast%28android.content.Intent%29)。遵循消息传播的[发布-订阅模式](http://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern)，此消息将通知所有相关方此操作。因为这条消息是由系统发送的，因为消息栈是由系统管理的，而且因为这条消息也被系统*接收*，所以你的代码根本没有注入到正确的位置来阻止这条消息的接收。

此外，对于某些设备，这将是一个没有任何程序中断的*物理开关。*充其量，Android 系统可以希望在事件发生时对其进行处理，这正是为什么此广播消息在服务堆栈中是一种特殊情况的原因。据我所知并基于此场景的稀疏文档，这就是为什么在我们考虑任何可能的滥用向量之前，它不是一个开箱即用的受支持功能。

如果您有能力修改相关设备的物理硬件，那么您最好的办法实际上要简单得多：限制对物理电源按钮的访问、损坏或以其他方式禁用物理电源按钮。在许多情况下，这是不可取的，但这适用于您的 Android 设备被使用的情况，例如，作为销售点或公共服务机器。如果这不可行，则可能只需要对电源按钮的访问设置物理限制，通过发送`ACTION_SCREEN_ON`.

请记住，这种策略并非万无一失。做好这件事并做好记录程序，以免你成为下一个[2600 曝光](http://en.wikipedia.org/wiki/2600:_The_Hacker_Quarterly)的素材。

祝你的申请好运。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-08-13T09:29:28.320

与所有答案相反..检查一下：

* * *

```
@Override
public boolean dispatchKeyEvent(KeyEvent event) {
        if (event.getKeyCode() == KeyEvent.KEYCODE_POWER) {
                Log.i("", "Dispath event power");
                Intent closeDialog = new Intent(Intent.ACTION_CLOSE_SYSTEM_DIALOGS);
                sendBroadcast(closeDialog);
                return true;
        }

        return super.dispatchKeyEvent(event);
} 
```

它能做什么：

每当用户按下电源按钮时。我们在对话之前取消它！:) 。这对我有用..（在note2上测试）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-27T17:55:34.143

这是我所做的：

(1) 创建一个接收器类：

```
public class ScreenReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        switch (action) {
            case Intent.ACTION_SCREEN_OFF:
                BaseActivity.unlockScreen();
                break;

            case Intent.ACTION_SCREEN_ON:
                // and do whatever you need to do here
                BaseActivity.clearScreen();
        }
    }
} 
```

(2) 上面调用的两个方法如下所示：

```
public static void unlockScreen () {
    if (current == null) return;

    Log.i( Constants.TAG, "Turning on screen ... " );

    Window window = current.getWindow();
    window.addFlags( WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD );
    window.addFlags( WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED );
    window.addFlags( WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON   );
}

public static void clearScreen () {
    if (current == null) return;

    Log.i( Constants.TAG, "Clearing screen flag when on ... " );

    Window window = current.getWindow();
    window.clearFlags( WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD );
    window.clearFlags( WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED );
    window.clearFlags( WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON   );
}

private static BaseActivity current;

@Override
protected void onResume () {
    current = this;
} 
```

(3)在主Activity类的onCreate()方法中注册receiver：

```
 IntentFilter filter = new IntentFilter( Intent.ACTION_SCREEN_ON );
    filter.addAction( Intent.ACTION_SCREEN_OFF );
    registerReceiver(new ScreenReceiver(), filter); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-12T09:09:17.970

您可以了解电源按钮按下，但我认为您不会覆盖它，您将能够关闭对话框以关闭电源并显示其他内容。

这是我尝试过的，

```
package com.easylogs.app;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import android.widget.Toast;

public class CloseSystemDialogsIntentReceiver extends BroadcastReceiver {
    public void onReceive(final Context context, final Intent intent) {
        Log.i("HERE", "------------------------------------HERE");
        Toast.makeText(context, "OFFFFFFFFFFFFFFFF",Toast.LENGTH_LONG).show();
    }
} 
```

并在清单中声明为，

```
 <receiver android:name="CloseSystemDialogsIntentReceiver">
    <intent-filter>
            <action android:name="android.intent.action.CLOSE_SYSTEM_DIALOGS" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </receiver> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-15T11:20:44.703

```
@Override
public boolean dispatchKeyEvent(KeyEvent event) {
    if (event.getKeyCode() == KeyEvent.KEYCODE_POWER) {

        return true;
    }

    return super.dispatchKeyEvent(event);
} 
```

您是否尝试过上面的代码，我们可以在其中处理电源键事件。另请查看已处理电源按钮按下事件的此[LINK 。](https://stackoverflow.com/questions/9886466/overriding-the-power-button-in-android)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-05-03T06:41:33.200

我知道为时已晚，但将来可能对其他开发人员有所帮助。通过**Android N**测试。来自[https://stackoverflow.com/a/15828592/1065357的参考](https://stackoverflow.com/a/15828592/1065357)

```
 @Override
    public void onWindowFocusChanged(boolean hasFocus) {
        super.onWindowFocusChanged(hasFocus);
        if(!hasFocus) {
           Intent closeDialog = new Intent(Intent.ACTION_CLOSE_SYSTEM_DIALOGS);
            sendBroadcast(closeDialog);
        }
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-22T08:03:53.650

如果有人正在寻找将您的应用程序开发为**信息亭模式/COSU（企业拥有的一次性应用程序）**的解决方案，您需要禁用各种硬件按钮，请点击以下链接 -

[https://www.andreasschrade.com/2015/02/16/android-tutorial-how-to-create-a-kiosk-mode-in-android/](https://www.andreasschrade.com/2015/02/16/android-tutorial-how-to-create-a-kiosk-mode-in-android/)

# c# - 如何将 SaveAsDialog 的结果传递给 RelayCommand？

> ID：10077907
> 
> 赞同：1
> 
> 时间：2012-04-09T18:31:18.240
> 
> 标签：c#, .net, wpf, mvvm

这是我的问题的流程：

1.  用户点击“保存”按钮

2.  出现“另存为”对话框以选择目标路径

3.  执行“保存”按钮的点击事件的 RelayCommand

目前我对以下内容一无所知：

1.  如何打开对话框并使用 EventToCommand 绑定执行 RelayCommand

2.  如何将“另存为”对话框的选定路径传递到 RelayCommand

我正在使用 MVVM Light 库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:03:04.630

虽然我认为 Dmitriy Reznik 的回答相当不错，但另一个解决方案是使用按钮的命令来完成 ViewModel 中的大部分工作。这并不严格遵循 MVVM 模式，但它可能更容易实现。

将 Button 上的 Command 设置为 ViewModel 上的 ICommand。ICommand 启动 SaveFileDialog 并在对话框关闭后将文件写入磁盘。由于您使用的是 MVVM Light，我将使用 RelayCommand 来实现 ICommand。

xml:

```
<Button Command="{Binding SaveAsClickCmd}/> 
```

代码：

```
public class MyViewModel
{
    public RelayCommand SaveAsClickCmd
    {
        get {
            return _saveAsClickCmd ?? (_saveAsClickCmd = new RelayCommand(() => {
                var dialog = new Microsoft.Win32.SaveFileDialog();
                if (dialog.ShowDialog() != true)
                    return;
                using (var stream = dialog.OpenFile()) {
                    //write out file to disk
                }
            }));
        }
    }

    private RelayCommand _saveAsClickCmd;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:31:04.257

我基于 MVVM Light 库中的 DialogMessage 类创建了一个类（您需要参考 MVVM Light 库）

```
public class SaveFileDialogMessage : GenericMessage<string>
{
    /// <summary>
    /// Initializes a new instance of the <see cref="SaveFileDialogMessage" /> class.
    /// </summary>
    /// <param name="content">The content.</param>
    /// <param name="filter">The filter.</param>
    /// <param name="callback">The callback.</param>
    public SaveFileDialogMessage(string content, string filter, Action<bool?, string> callback)
        : base(content)
    {
        Filter = filter;
        Callback = callback;
    }

    /// <summary>
    /// Initializes a new instance of the <see cref="SaveFileDialogMessage" /> class.
    /// </summary>
    /// <param name="sender">The sender.</param>
    /// <param name="content">The content.</param>
    /// <param name="filter">The filter.</param>
    /// <param name="callback">The callback.</param>
    public SaveFileDialogMessage(object sender, string content, string filter, Action<bool?, string> callback)
        : base(sender, content)
    {
        Filter = filter;
        Callback = callback;
    }

    /// <summary>
    /// Initializes a new instance of the <see cref="SaveFileDialogMessage" /> class.
    /// </summary>
    /// <param name="sender">The sender.</param>
    /// <param name="target">The target.</param>
    /// <param name="content">The content.</param>
    /// <param name="filter">The filter.</param>
    /// <param name="callback">The callback.</param>
    public SaveFileDialogMessage(object sender, object target, string content, string filter, Action<bool?, string> callback)
        : base(sender, target, content)
    {
        Filter = filter;
        Callback = callback;
    }

    /// <summary>
    /// Gets a callback method that should be executed to deliver the result
    /// of the message box to the object that sent the message.
    /// </summary>
    public Action<bool?, string> Callback { get; private set; }

    /// <summary>
    /// Gets or sets the title.
    /// </summary>
    /// <value>
    /// The title.
    /// </value>
    public string Title { get; set; }

    /// <summary>
    /// Sets or gets the filter property.
    /// </summary>
    public string Filter { get; set; }

    /// <summary>
    /// Utility method, checks if the <see cref="Callback" /> property is
    /// null, and if it is not null, executes it.
    /// </summary>
    /// <param name="result">The result that must be passed
    /// to the dialog message caller.</param>
    /// <param name="fileName">Name of the file.</param>
    public void ProcessCallback(bool? result, string fileName)
    {
        if (Callback != null)
        {
            Callback(result, fileName);
        }
    } 
```

然后在你的 ViewModel 你有这样的东西：

```
 var dialog = new SaveFileDialogMessage("Title", "XML Files" + "|" + ".xml", ProcessSaveFileDialog);
    Messenger.Default.Send(dialog);

    private void ProcessSaveFileDialog(bool? dialogResult, string fileName)
    {
            ..........
    } 
```

并在您的 View 构造函数中：

```
 /// <summary>
    /// Initialize a new instance of the <see cref="MainView"/> class.
    /// </summary>
    public MainView()
    {
        InitializeComponent();
        Messenger.Default.Register<SaveFileDialogMessage>(this, msg =>
                                                                {
                                                                    var sfd = new SaveFileDialog { Filter = msg.Filter, Title = msg.Title };
                                                                    var result = sfd.ShowDialog();
                                                                    msg.ProcessCallback(result, sfd.FileName);
                                                                });
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T18:47:55.973

就个人而言，我不会通过在 viewModel 中完成所有事情来追求 MVVM 的纯度，并且会作弊，为代码隐藏节省一些代码。组件不是开箱即用的 MVVM 就绪的情况并不少见，而且“追逐”可能需要时间，而客户会失去价值。

无论如何，对于当前的问题，有这种方法：

1.  在 viewModel 中创建一个名为 OnSelectSavePath 的事件，该事件返回字符串 (filePath)
2.  单击时 viewModel 引发事件
3.  Page/UserControl/Window 使用运行 OpenFileDialog 之类的方法订阅事件
4.  Page/UserControl/Window 从该方法返回选定的字符串
5.  ViewModel 从事件接收字符串并充分利用它。

这样，您可以正确地将 viewModel 从表示层分离（不给出选择表单的详细信息），同时仍然提供所需的功能。

另一种方法是定义支持 MVVM 的自定义 openFileDialog。您将当前 viewModel 传递给对话框，对话框将更新 viewmodel 上的 selectedPath 属性。

更好的是，您可以在 codeBehin 中执行此操作，然后使用 selectedPath 属性在 viewModel 上调用一些方法。这为您省去了所有麻烦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-30T13:00:10.077

我知道这是一个旧线程，但对于初学者（如我）来说，获得*正确*的示例很重要。

就个人而言，我不喜欢上面的任何示例，因为我觉得在 ViewModel 中声明对话框违反了 MVVM 模式。恕我直言，ViewModel 必须不知道任何与 UI 相关的控件，例如对话框或消息框。

在谷歌搜索时，我发现了这个：[http](http://www.matt.digital/mvvm-light-communicating-across-layers-with-services/) ://www.matt.digital/mvvm-light-communicating-across-layers-with-services/恕我直言，这是如何以类似 MVVM 的方式呈现对话框的完美示例。

# android - nullpointerexception 线程主因错误而退出

> ID：10077908
> 
> 赞同：0
> 
> 时间：2012-04-09T18:31:21.890
> 
> 标签：android, eclipse, nullpointerexception

那么错误是：

```
 W/dalvikvm(320): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
 E/AndroidRuntime(320): Uncaught handler: thread main exiting due to uncaught exception
 E/AndroidRuntime(320): java.lang.NullPointerException
 E/AndroidRuntime(320):     at com.android.vosori.Amp$1.onCheckedChanged(Amp.java:58)
 E/AndroidRuntime(320):     at android.widget.CompoundButton.setChecked(CompoundButton.java:122)
E/AndroidRuntime(320):  at android.widget.ToggleButton.setChecked(ToggleButton.java:66)
 E/AndroidRuntime(320):     at android.widget.CompoundButton.toggle(CompoundButton.java:85)
 E/AndroidRuntime(320):     at android.widget.CompoundButton.performClick(CompoundButton.java:97)
 E/AndroidRuntime(320):     at android.view.View.onTouchEvent(View.java:4179)
 E/AndroidRuntime(320):     at android.widget.TextView.onTouchEvent(TextView.java:6541)
 E/AndroidRuntime(320):     at android.view.View.dispatchTouchEvent(View.java:3709)      E/AndroidRuntime(320):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
 E/AndroidRuntime(320):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
 E/AndroidRuntime(320):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
 E/AndroidRuntime(320):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
E/AndroidRuntime(320):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
E/AndroidRuntime(320):  at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
 E/AndroidRuntime(320):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
 E/AndroidRuntime(320):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
 E/AndroidRuntime(320):     at android.os.Handler.dispatchMessage(Handler.java:99)
 E/AndroidRuntime(320):     at android.os.Looper.loop(Looper.java:123)
 E/AndroidRuntime(320):     at android.app.ActivityThread.main(ActivityThread.java:4363)
 E/AndroidRuntime(320):     at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(320):  at java.lang.reflect.Method.invoke(Method.java:521)
 E/AndroidRuntime(320):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
 E/AndroidRuntime(320):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
 E/AndroidRuntime(320):     at dalvik.system.NativeStart.main(Native Method) 
```

和..来源是：

```
public class Amp extends Activity implements OnSeekBarChangeListener {

    WakeLock wL;
    public boolean tb;
    SeekBar volume;
    AudioManager am;
    MediaPlayer mp;
    AudioRecord arec;
    AudioTrack atrack;
    ToggleButton tbs;
    static final int buffersize = 200000;
    final short[] buffer = new short[buffersize];
    short[] readBuffer = new short[buffersize];

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        // wake-lock
        PowerManager pM = (PowerManager) getSystemService(Context.POWER_SERVICE);
        WakeLock wL = pM.newWakeLock(PowerManager.FULL_WAKE_LOCK, "whatever");

        super.onCreate(savedInstanceState);
        wL.acquire();
        // fullscreen
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.main);
            android.os.Process
                    .setThreadPriority(android.os.Process.THREAD_PRIORITY_URGENT_AUDIO);
            int bufferSize = AudioRecord.getMinBufferSize(8000,
                    AudioFormat.CHANNEL_CONFIGURATION_MONO,
                    AudioFormat.ENCODING_PCM_16BIT);

            arec = new AudioRecord(MediaRecorder.AudioSource.MIC, 8000,
                    AudioFormat.CHANNEL_CONFIGURATION_MONO,
                    AudioFormat.ENCODING_PCM_16BIT, bufferSize);
            atrack = new AudioTrack(AudioManager.STREAM_VOICE_CALL, 8000,
                    AudioFormat.CHANNEL_CONFIGURATION_MONO,
                    AudioFormat.ENCODING_PCM_16BIT, bufferSize,
                    AudioTrack.MODE_STREAM);
            atrack.setPlaybackRate(8000);
            byte[] buffer = new byte[bufferSize];

            while (tb) {
                arec.read(buffer, 0, bufferSize);
                atrack.write(readBuffer, 0, buffer.length);
            }

        tbs = (ToggleButton) findViewById(R.id.tbS);
        tbs.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

            public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {
                // TODO Auto-generated method stub
                if (isChecked) {
                    arec.startRecording();
                    atrack.play();
                } else {
                    arec.stop();
                    atrack.stop();

                }

            }
        });

        volume = (SeekBar) findViewById(R.id.sb1);
        am = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
        int maxV = am.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
        int curV = am.getStreamVolume(AudioManager.STREAM_MUSIC);
        volume.setMax(maxV);
        volume.setProgress(curV);
        volume.setOnSeekBarChangeListener(this);
    }

    public void onProgressChanged(SeekBar arg0, int progress, boolean arg2) {
        // TODO Auto-generated method stub
        am.setStreamVolume(AudioManager.STREAM_MUSIC, progress, 0);
        am.setSpeakerphoneOn(true);

    }

    public void onStartTrackingTouch(SeekBar arg0) {
        // TODO Auto-generated method stub

    }

    public void onStopTrackingTouch(SeekBar arg0) {
        // TODO Auto-generated method stub

    }

} 
```

你能帮我么？我被困在这几天，找不到解决这个问题的方法

更新编辑：抱歉 D：我对这个不太好 D：我可能在这里犯了一个错误，也尝试将这些东西移到 oncheckedchanged 方法中，但没有用：S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:41:21.847

在调用方法“run”之前，您不会初始化 arec 和 atrack 变量。我在您的代码中看不到您正在调用方法 run() 的任何地方，因此这些变量将永远不会被初始化。

将这些变量的初始化移到 onCreate 中，这个问题应该会消失

# php - 在 PHP 中将 ereg_replace 转换为 preg_replace

> ID：10077912
> 
> 赞同：-1
> 
> 时间：2012-04-09T18:31:44.373
> 
> 标签：php

> **可能重复：**
> [用 preg_replace 替换 ereg_replace](https://stackoverflow.com/questions/3649574/replace-ereg-replace-with-preg-replace)

我已经升级到 PHP 5.3，我需要知道如何将这些标签转换为 Preg_replace。

有任何想法吗？

```
$html = ereg_replace("<(/)?(font|span|del|ins)[^>]*>", "", $html);

// then run another pass over the html (twice), removing unwanted attributes    
$html = ereg_replace("<([^>]*)(class|lang|style|size|face)=(\"[^\"]*\"|'[^']*'|[^>]+)([^>]*)>", "<\\1>", $html);
$html = ereg_replace("<([^>]*)(class|lang|style|size|face)=(\"[^\"]*\"|'[^']*'|[^>]+)([^>]*)>", "<\\1>", $html); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T19:36:22.223

应该是一样的，你只需要添加分隔符（可能是“/”，“~”或“@”，你最喜欢没有“）。在替换字符串中你必须使用“$1”而不是“ \1"！

它看起来像这样：

```
$html = preg_replace("~<(/)?(font|span|del|ins)[^>]*>~","",$html);

$html = preg_replace("~<([^>]*)(class|lang|style|size|face)=(\"[^\"]*\"|'[^']*'|[^>]+)([^>]*)>~", "<$1>", $html); 
```

/edit：您可以在分隔符后添加“i”（不带“），因为标签可能用大写字母书写，“i”是代表“不区分大小写”的修饰符。

```
$html = preg_replace("~<(/)?(font|span|del|ins)[^>]*>~i","",$html);

$html = preg_replace("~<([^>]*)(class|lang|style|size|face)=(\"[^\"]*\"|'[^']*'|[^>]+)([^>]*)>~i", "<$1>", $html); 
```

题外话：在 html4 中你可能有这样的东西：

```
<tagname name="<"> 
```

这意味着通过过滤没有“<”或“>”的所有内容，您的正则表达式将不会使用这些标签触发！但它相当罕见。

# delphi - 每行中具有不同数据类型的 Delphi 网格，动态显示

> ID：10077913
> 
> 赞同：3
> 
> 时间：2012-04-09T18:31:45.780
> 
> 标签：delphi, tdbgrid

我正在尝试创建一个 Delphi 网格，以允许在 db 网格中显示和编辑每行可能具有不同数据类型的数据。我想为每种数据类型显示一个特定的控件，例如当数据类型是 DateTime 时，我想显示我的自定义编辑控件，它允许在其中键入日期或弹出日历。

数据看起来像这样：

```
Name   DataType   DateValue   StringValue   BooleanValue     
---------------------------------------------------------
A      Date       1/1/2007 
B      String                 asdf
C      Boolean                              True 
```

...并且在数据库中，该表为每种可能的值类型都有一个列。所以，有一个`BooleanValue`列`DateValue`，等等。

我想做的是在网格中显示一个“值”列，根据该行的“数据类型”显示适当的编辑控件。因此，网格应如下所示：

```
Name   DataType   Value     
---------------------------
A      Date       1/1/2007 
B      String     asdf
C      Boolean    True 
```

看来我需要根据`Value`列的值动态地为每一行显示不同的编辑控件（以允许用户编辑列）`DataType`。我知道有更高级的网格可以处理这类问题，但是除了 Delphi 开箱即用的功能之外，这些功能不会允许任何事情。

关于如何制作这样的东西的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T20:33:42.273

Personally, I would not go for editing directly inside the `TDBGrid` in this case, since your Table is not DB normalized (I don't use it in any case actually). I would have used a Calculated field to *display* the desired value in the grid, And dynamically created the `TDBxxxEdit`s on the form for each field type (How about your own `TDBTreeEdit` for example, a `TDBRichEdit`, or a DB Image pickup editor, etc...?).

In case you do want to use your own controls on the `TDBGrid`, and replace the default `TInplaceEdit` editor, you can refer the following article: [Adding components to a DBGrid](http://delphi.about.com/od/usedbvcl/l/aa081903a.htm), and a related article: [Displaying and editing MEMO fiels in Delphi's TDBGrid](http://delphi.about.com/library/weekly/aa030105a.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T22:00:33.763

在同一列中显示所有数据非常容易。您可以简单地添加一个计算字符串字段，并根据您在该行中存储的内容更改值。

编辑要复杂一些。如果您想拥有一个就地编辑器，那么您将面临一个痛苦的世界……我已经做到了，这很痛苦，而且需要很多时间。如果您想显示一个对话框来编辑该值，那就容易多了。您可以将列对象添加到网格中，并且可以设置已附加到计算字段的列以显示按钮。单击按钮时，您只需显示该行所需的编辑对话框，并在对话框关闭时提交编辑。

还有其他方法可以完成这项工作，但我会说上述方法是最短的方法。其他方式可能包括自定义绘制事件以在一列中显示您的数据，拦截点击以创建您自己的编辑器等...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T05:15:19.427

after add calculated fields .
Sample:

```
procedure OnCalculate(DataSet:TDataSet);
begin
  case IndexText(DataSet['ValueType'],['Date','String','Boolean']) of 

    0:DataSet['DateValue']:=StrToDateTime(DataSet['Value']); // also converting
    1:DataSet['StringValue']:=DataSet['Value'];
    2:DataSet['BooleanValue']:= MatchText(DataSet['Value'],['1','True','T','Y','Yes']);
{etc datatypes}
   end;
end; 
```

# javascript - 用户错误信息 | HTML 数据与 JavaScript

> ID：10077914
> 
> 赞同：3
> 
> 时间：2012-04-09T18:32:01.443
> 
> 标签：javascript

我在下面有这个对象：

我想过把消息像这样放在html中

```
<div id = "text_identifier">text_here</div> // div is hidden. 
```

然后使用 getElementById 将消息拉入 JavaScript 并最终以正确的元素（中的参数元素`Message`）显示给用户

两个相关的问题？

像这样在 JavaScript 中包含内容是不好的做法吗？

如果我确实将消息移动到 HTML 中，我上面描述的方法是最佳实践吗？

```
/**
 *Message
 */

var Message = function( element )
{
    var messages =  
    {
        name:         'Please enter a valid name',
        email:        'Please enter a valid email',
        pass:         'Please enter passoword, 6-40 characters',
        url:          'Please enter a valid url',
        title:        'Please enter a valid title',
        tweet:        'Please enter a valid tweet',
        empty:        'Please complete all fields',
        email_s:      'Please enter a valid email.',
        same:         'Please make emails equal',
        taken:        'Sorry, that email is taken',
        validate:     'Please contact <a class="d" href="mailto:guy@host.com">support</a> to reset your password',
    }
    this.display = function( type ) 
    {
        element.innerHTML = messages[ type ];
        new Effects().fade( element, 'down', 4000 );
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:39:10.280

这取决于你喜欢怎么做。JavaScript 通常不是重要的东西，它是 php 后端部分。因此，将它集成到您​​的系统中，使其易于阅读。:)

我会`data-*`为每个元素使用 HTML 属性。

如果你有很多输入，你可以这样：

```
<input type="text" name="name" data-error-message="Please enter a valid name">
<input type="text" name="email" data-error-message="Please enter a valid email">
<input type="text" name="pass" data-error-message="Please enter passoword, 6-40 character"> 
```

当您选择值时，您还可以选择错误消息:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T18:39:25.147

我认为这确实是一种偏好。您可以在 HTML 中使用它并仅显示具有特定类的 div（即，显示“抱歉，该电子邮件已被占用”的 div 具有 .taken 类，并且在该错误触发时显示该 div）。

可能会有关于性能的争论，但我认为在这个规模上它们是微不足道的，如果有的话，你的方法可能会稍微好一些。它为您提供了一个统一的位置来编辑消息，以及一种将这些消息调用到前面的简单干净的方式。

所以真的，一个意见/偏好的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T18:36:55.197

我相信你知道如何根据你到目前为止所说的使用 javascript，实际上你使用的方法绝对没问题，不应该对你造成任何伤害，我添加了一个链接，以防你需要参考

[http://www.javascripttoolbox.com/bestpractices/](http://www.javascripttoolbox.com/bestpractices/)

# c - C Lib 设计 - 结构和内存管理 [最佳实践]

> ID：10077916
> 
> 赞同：4
> 
> 时间：2012-04-09T18:32:20.240
> 
> 标签：c, memory, struct

所以，我是一个尝试学习 C 的 C# 人。作为第一个（个人）项目，我正在尝试编写一个基本的坐标几何库。

**问题：**在后台堆上分配内存，而不是让针对库的程序员来做这件事，这又是最佳 C 编程实践吗？

例如，我的“点”结构和相关方法：

**点.h**

```
/* A basic point type. */
typedef struct point
{
    float x;
    float y;
    float z;
    char *note;
}point;

/* Initializes a basic point type. [Free with free_point method] */
point *create_point(float pos_x, float pos_y, float pos_z, char *_note);
/* Frees a point type. */
void free_point(point *_point);
/* Finds the midpoint between two points. */
point *midpoint(point *pt1, point *pt2); 
```

**点.c**

```
#include "point.h"

/* Initializes a basic point type. [Free with free_point method] */
point *create_point(float pos_x, float pos_y, float pos_z, char *_note)
{
    point *p;
    size_t notelen = strlen(_note);

    p = (point*)malloc(sizeof(point));
    p->x = pos_x;
    p->y = pos_y;
    p->z = pos_z;

    p->note = (char*)calloc(notelen + 1, sizeof(char));
    strcpy_s(p->note, notelen + 1, _note);

    return p;

}
/* Frees a point type. */
void free_point(point *_point)
{
    free (_point->note);
    free (_point);
}

/* Creates a midpoint between two points. */
point *midpoint(point *pt1, point *pt2)
{
    float mid_x = (pt1->x + pt2->x) * 0.5f;
    float mid_y = (pt1->y + pt2->y) * 0.5f;
    float mid_z = (pt1->z + pt2->z) * 0.5f;

    point *p = create_point(mid_x, mid_y, mid_z, "Midpoint");
    return p;
} 
```

请注意，我通过 create_point() 方法在堆上为任何实现/使用我的 lib 的人创建了 struct 'point'（老实说，这个项目只是为了我和学习，不过......）。这是不好的做法吗？感觉就像我在强迫用户以某种方式编程。midpoint() 方法也是如此。同样，您必须使用指向“点”结构的指针。

我无法在 SO 上找到有关 C 库设计的确切问题，但如果适用，请指出正确的方向。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T18:47:31.757

这是偏好，真的。我通常同意让用户按照他们的意愿为对象分配内存，然后为他们初始化成员。

```
/* here a non-zero return value might indicate if for example
 * we failed to allocate memory for note */
int point_init(struct point* p, int x, int y, char* note)
{
  /* ... */
}

/* usage: */
struct point p;
if (point_init(&p, 1, 2, "hello")) {
  /* error */
} 
```

这使用户可以选择执行诸如分配内存中相邻的点数组之类的操作，而不是跟踪指向点的指针数组：

```
struct point mypoints[NUM_POINTS];

for(size_t i = 0; i < NUM_POINTS; ++i) {
  point_init(&mypoints[i], ...);
} 
```

# 编辑：

如果您想使用[不透明指针](http://en.wikipedia.org/wiki/Opaque_pointer)策略向库用户隐藏结构的成员，则需要使用您描述的方法为它们分配内存。这对于在库中分配结构无疑是一个巨大的好处。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T18:49:53.010

*最佳实践是以程序员可以最快*的方式编写库的方式，因为这是 C 的强项。例如，程序员可能知道将需要成千上万个这样的点结构，并且为了将未来的访问保持在本地可能更愿意将所有结构分配在一块内存中。如果您的库允许程序员将指针传递给要初始化的结构，那么他可以这样做。但是如果你坚持给他分配内存，他就不行。

# php - 从网站页面抓取内容

> ID：10077923
> 
> 赞同：1
> 
> 时间：2012-04-09T18:32:57.103
> 
> 标签：php, html

我遇到了一些问题，需要帮助..

我的计划： 1\. 从免费代理获取 ip (hi de my ass) 2\. 转换为 XML

```
$html = file_get_contents('http://www.hidemyass.com/proxy-list/');

//$body = explode('<tbody>', $html);
$body = $html;

$xml = simplexml_load_string("<?xml version='1.0' encoding='utf-8'?><xml />");

$rows = array();
foreach (array_slice(explode('<td>', end($body)), 1) as $row)
{
    preg_match('/span>([0-9])<\/span>/', $row, $ids);
    preg_match('/span>([0-9])<\/span>/', $row, $dir);
    preg_match('/span>([0-9])<\/span>/', $row, $due);

    $node = $xml->addChild('train');

    $node->addChild('route', $ids[1]);
    $node->addChild('direction', $dir[1]);
    $node->addChild('due', $due[1]);
}

header('Content-Type: text/xml');
echo $xml->asXML(); 
```

但还是不行。。

你能帮助我吗 ？

谢谢jk

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T18:40:09.330

最简单和理想的解决方案是`simple_html_dom`请参阅：[http ://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

例子

```
 include 'simple_html_dom.php';
    $html = file_get_html('http://www.hidemyass.com/proxy-list/');
    echo "<pre>";
    foreach ( $html->find ( 'tr' ) as $element ) {
        $ip = $element->find ( 'td', 1 );
        $port = $element->find ( 'td', 2 );
        $ip = getIP ( $ip );
        // var_dump($element->xmltext);
        echo " $ip : $port \n";
    }

    function getIP($obj) {
        global $html;

        $text = str_replace ( "div", "span", $obj->xmltext );
        $text = explode ( "span", $text );

        $ip = array ();

        foreach ( $text as $value ) {
            $value = trim ( $value );
            $value = trim ( $value, "<" );
            $value = trim ( $value, ">" );
            $value = trim ( $value, "." );

            if (empty ( $value ))
                continue;

            if (strpos ( $value, "display:none" )) {
                continue;
            }

            if (strpos ( $value, ">" )) {
                $value = "<" . $value . ">";
            }

            $value = strip_tags ( $value );

            $value = trim ( $value, "." );

            if (empty ( $value ))
                continue;

            $ip [] = $value;
        }

        if (is_array ( $ip )) {
            return implode ( ".", $ip );
        }
    } 
```

但这不会为您提供所需格式的 IP 地址，因为 HideMyASS 正在保护此类提取

包含`td`的 IP 地址如下所示

```
<td>
<span><span class="52">201</span>.73
    <div style="display: none">228</div>
    <span class="" style="">.</span><span>17</span><span
    style="display: none">248</span><span></span>.107</span>
</td> 
```

你能看到`<div style="display: none">`，有时`<span style="display: none">`他们使用整数类的一些瓷砖，例如`class=51`这也意味着没有......

我能够完成一项疯狂的工作......使用`getIP`功能......我希望这会有所帮助

输出示例

```
 IP address : Port 
 200.135.197.120 :  8080 
 96.46.7.194 :  80 
 217.26.14.18 :  3128 
 189.114.111.190 :  8080 
 202.51.107.37 :  8080 
 128.208.04.198 :  2124 
 221.133.238.138 :  8080 
 41.215.247.146 :  8080 
 140.113.216.134 :  3128 
 190.211.132.33 :  8080 
 117.34.92.43 :  3128 
 118.97.235.234 :  3128 
 85.248.141.245 :  3128 
 203.223.47.119 :  3128 
 200.48.213.82 :  8080 
 217.112.128.247 :  80 
 114.134.76.27 :  8080 
 78.45.134.10 :  3128 
 77.78.197.15 :  8080 
 189.44.226.66 :  3128 
 124.195.124.166 :  8080 
 190.39.128.219 :  8080 
 222.42.45.51 :  3128 
 195.138.76.136 :  3128 
 115.249.252.235 :  8080 
 222.124.152.18 :  8080 
 190.255.39.147 :  3128 
 189.22.138.162 :  8080 
 217.146.208.162 :  8080 
 203.143.18.1 :  8080 
 210.57.215.130 :  80 
 190.98.166.106 :  3128 
 200.5.226.74 :  80 
 187.6.254.19 :  3128 
 177.36.242.57 :  8080 
 41.133.101.242 :  8080 
 201.87.208.66 :  8080 
 41.67.20.91 :  8080 
 118.192.1.168 :  3128 
 41.75.201.146 :  3128 
 61.166.144.69 :  8080 
 200.238.98.234 :  3128 
 110.52.11.220 :  80 
 125.67.230.192 :  8080 
 94.228.35.219 :  80 
 64.85.181.45 :  8080 
 222.169.15.234 :  8080 
 113.106.194.220 :  80 
 119.82.239.50 :  8080 
 117.27.139.17 :  80 
```

谢谢

# objective-c - xcode 3.2.6：@-token 之前的预期表达式

> ID：10077931
> 
> 赞同：0
> 
> 时间：2012-04-09T18:33:48.740
> 
> 标签：objective-c, xcode, xcode4, xcode3.2

我在 xcode 和 Objective-C- 编程的世界里很新。现在我正在通过**“Objective C- Programming: The big Nerd Ranch Guide”**学习编程。由于 OSX 版本较旧，我只能安装**xcode 3.2.6**。但是本书使用了最新的 xcode 版本。

在浏览章节时，我遇到了一个问题：

```
#import <Foundation/Foundation.h>

int main (int argc, const char * argv[])
{
    @autoreleasepool{   
        NSDate *now = [NSDate date];    
        NSLog(@"The date is %@", now);
    }
    return 0;
} 
```

此代码示例给了我以下错误：

> “@-token 之前的预期表达式”

在网上搜索解决方案时，我发现它是 xcode 4 的新语法...我不知道 3.2.6 和最新版本之间存在如此大的差异。现在我的问题是：这是否意味着 xcode 4 中的所有语法都已更改为以前的版本，而这本书对我来说毫无意义？还是只是这个说法？（如果是，如何用旧版本写？我什至不知道那句话有什么用，因为我是一个血腥的初学者）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:37:22.530

您将 Xcode（IDE）与 SDK 混淆了。@autorelease 池注解被添加到 iOS 5 SDK 中，Xcode 4 恰好给了你。如果您希望它在 Xcode 3.x 中运行，您需要确保使用 iOS 5 SDK 运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T18:38:37.067

总之，是的。

Apple，因为他们几乎拥有整个堆栈，可以随意更改语言，并且 3.0 到 4.0 有一些更改。在这一点上，我真的不会浪费我的时间尝试在 3 中编写 IOS 程序。

这些类的 API 在 iOS 3 和 4 和 4 和 5 之间也发生了变化。

我真的建议，此时将您的 Mac 升级到至少支持 XCODE 4 的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T18:38:57.847

替换`@autoreleasepool {}`为以下代码：

```
NSAutoreleasePool *pool = [NSAutoreleasePool new];
NSDate *now = [NSDate date];
NSLog(@"The date is %@", now);
[pool release]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T18:40:54.823

您收到的消息指的是 Objective-C 的一项新功能，称为 ARC，旨在简化内存管理。它在从 Xcode4 开始的 Apple ObjC 编译器上可用。

你仍然可以使用这本书，但你应该删除所有与 ARC 相关的语句（这不仅仅是 `@autoreleasepool`），实际上这并不容易，因为你还需要添加内存管理。

# r - 使用 BY 或 APPLY 在 R 中比较行/向量的身份？

> ID：10077933
> 
> 赞同：1
> 
> 时间：2012-04-09T18:33:52.310
> 
> 标签：r, apply

我正在尝试比较 R 中的一系列行和一个固定向量，并将它们标记为相同（TRUE）或不同（FALSE）。将问题想象为将一组测试响应与答案键进行比较。

我已经能够使用循环和 COMPARE 包进行比较，但是我无法使用更有效的方法（例如 BY、APPLY 或 DDPLY）来复制它：

```
test.answers <- as.data.frame(rbind(c(ID="A",rep(3, 6)), c(ID="B",6:1), c(ID="C",1:6)))

library(compare)

# Compare using a loop
for (i in 1:length(test.answers)) 
  {
  test.answers$Static1[i] <- isTRUE(compare(as.data.frame(rbind(rep(3, 6))),
                                            test.answers[i,2:7], allowAll=TRUE))
  }
test.answers # This is correct!

staticfn <- function(x) 
  { 
  isTRUE(compare(as.data.frame(rbind(rep(3, 6))),
                 test.answers[2:7], allowAll=TRUE)) 
  }

# Compare using APPLY
test.answers$Static2 <- apply(test.answers, 1, staticfn)
test.answers # This is incorrect!

# Compare using BY
test.answers$Static3 <- by(test.answers, test.answers$ID, staticfn)
test.answers # This is incorrect!

# Compare using DDPLY
library(plyr)
test.answers <- ddply(test.answers, .(ID), { staticfn })
test.answers # This is incorrect!

# Results

  ID V2 V3 V4 V5 V6 V7 Static1 Static2 Static3
1  A  3  3  3  3  3  3    TRUE    TRUE    TRUE
2  B  6  5  4  3  2  1   FALSE    TRUE    TRUE
3  C  1  2  3  4  5  6   FALSE    TRUE    TRUE

  ID   V1
1  A TRUE
2  B TRUE
3  C TRUE 
```

如果有人能建议为什么 APPLY 和 DDPLY 给我的结果与循环不同，以及我如何修改其中一个函数以避免使用循环，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T18:47:00.087

你让这太复杂了：

```
apply(test.answers,1,function(x){all(x[-1] == rep(3,6))}) 
```

# java - 使用 AtomicInteger 作为静态共享计数器

> ID：10077937
> 
> 赞同：5
> 
> 时间：2012-04-09T18:34:05.323
> 
> 标签：java, multithreading, synchronization

为了通过 Java 学习同步，我只是在搞一些简单的事情，比如创建线程之间共享的计数器。

我遇到的问题是我无法弄清楚如何在 100% 的时间内按顺序打印计数器。

```
int counterValue = this.counter.incrementAndGet();
System.out.println(this.threadName + ": " + counterValue); 
```

上面增加`AtomicInteger counter`，获取新值，并将其打印到由负责该更新的线程名称标识的控制台。当该`incrementAndGet()`方法似乎导致 JVM 在打印当前线程的更新值之前上下文切换到另一个线程进行更新时，就会出现问题。这意味着在线程返回执行状态之前，该值会递增但不会打印。查看此示例输出时，这一点很明显：

```
Thread 3: 4034
Thread 3: 4035
Thread 3: 4036
Thread 1: 3944
Thread 1: 4037
Thread 1: 4039
Thread 1: 4040
Thread 2: 3863
Thread 1: 4041
Thread 1: 4043 
```

您可以看到，当执行返回到线程 1 时，它会打印其值并继续更新。线程 2 也是如此。

我有一种感觉，我错过了一些非常明显的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T18:36:06.867

> 当出现该问题时，incrementAndGet() 方法导致 JVM 在打印当前线程的更新值之前上下文切换到另一个线程进行更新

这是在这些情况下经常发生的竞争条件。尽管`AtomicInteger`计数器正在正确递增，但在递增发生*之后和调用**之前*，没有什么可以阻止`Thread 2`被换出的。**`println`**

 **```
int counterValue = this.counter.incrementAndGet();
// there is nothing stopping a context switch here
System.out.println(this.threadName + ": " + counterValue); 
```

如果你想打印“100% 的时间顺序计数器”，你将不得不在增量*和*`println`调用周围的锁上同步。当然，如果你这样做，那就`AtomicInteger`浪费了。

```
synchronized (counter) {
    System.out.println(this.threadName + ": " + counter.incrementAndGet());
} 
```

如果您编辑您的问题以解释*为什么*您需要输出是连续的，那么可能有一个更好的解决方案没有这种竞争条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T18:38:43.303

您需要为此同步整个构造：

```
synchronized(this) {    
   int counterValue = this.counter.incrementAndGet();
   System.out.println(this.threadName + ": " + counterValue);
} 
```

但是，在这种情况下，您不必使用 AtomicInteger。平原`int`会工作（counter++）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T18:42:52.430

要按顺序打印，incAndGet 和 println 必须都在*临界区*，一段代码只有一个线程可以进入，其他的被阻塞。可以用二进制信号量实现，例如 java `synchronized`。

你可以把事情放在头上，让一个线程增加一个计数器并打印它。其他线程可能在“临界区”中只占用一个接一个的计数器。这会更有效，因为关键区域应该保持较小并且最好不要 I/O。**

# ruby-on-rails - Rails/Ruby：是否有一个不生成咖啡脚本文件的骨干宝石？

> ID：10077941
> 
> 赞同：5
> 
> 时间：2012-04-09T18:34:24.013
> 
> 标签：ruby-on-rails, backbone.js, gem

不确定这个问题是否属于stackoverflow ....

我正在尝试在 Backbone.js 上跟随 Ryan Bates Railscast。他使用生成咖啡脚本文件的 gem 'backbone-on-rails'。即使我完全按照他的方式复制代码，我也会遇到各种奇怪的错误（INDENT 错误）并且代码无法正常工作，尽管正如我所说，我对空格非常小心。

有几次，我能够通过完全按照我的方式重新输入代码来解决问题！

我的工作效率已经很慢了，现在已经停止使用咖啡脚本，所以我想知道是否还有另一个不使用咖啡脚本的骨干.js gem

例如，这是我收到的另一条错误消息，即使没有缩进并且我没有从互联网上复制代码。

```
Error: Parse error on line 2: Unexpected 'INDENT' 
```

另一个例子，handleError 函数应该在尝试创建条目的错误（和警告消息）时触发。它适用于 RailsCast，但不适用于我的应用程序。

```
createEntry: (event) ->
    event.preventDefault()
    attributes = name: $('#new_entry_name').val()
    @collection.create attributes,
      success: -> $('#new_entry')[0].reset()
      error: @handleError

  handleError: (entry, response) ->
    if response.status == 422
      errors = $.parseJSON(response.responseText).errors
      for attribute, messages of errors
        alert "#{attribute} #{message}" for message in messages 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-18T21:37:10.240

万一有人通过谷歌找到这个问题。

```
# Generate JavaScript
rails generate backbone:install --javascript 
```

资料来源：*Tricks*下[的骨干网自述文件](https://github.com/meleyal/backbone-on-rails/blob/master/README)

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T01:38:27.980

Rails 最流行的 Backbone.js gem 是：[https](https://github.com/codebrew/backbone-rails) ://github.com/codebrew/backbone-rails 。它不提供在原生 JavaScript 中生成 Backbone 应用程序的功能。

如果您想在 JavaScript 中生成 Backbone 应用程序，可以在[https://github.com/meleyal/backbone-on-rails](https://github.com/meleyal/backbone-on-rails)使用亚军 gem 。只需运行以下命令：

*   添加`gem 'backbone-on-rails'`到您的`Gemfile`
*   `bundle install`
*   `rails generate backbone:install -j`
*   `rails generate backbone:scaffold user -j`

不过，我强烈建议您学习 CoffeeScript。一旦确定了语法，您将能够以越来越快的速度开发客户端应用程序。*

# asp.net - Telerik TreeView for ASP.NET MVC ajax 问题

> ID：10077942
> 
> 赞同：0
> 
> 时间：2012-04-09T18:34:26.147
> 
> 标签：asp.net, jquery, treeview, telerik, partial-views

Telerik 的 TreeView 控件虽然花哨且功能丰富，但现在对我来说是一场噩梦。但是，我找不到更好的 TreeView 控件，它支持折叠/展开等，并且有一些文档。这是我的问题。

这是网站管理员：_Layout.cshtml

```
<!DOCTYPE HTML>
<html>
<head>
    <title>@ViewBag.Title</title>
    <!--
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/custom.css")" rel="stylesheet" type="text/css" />-->
    @(Html.Telerik().StyleSheetRegistrar()
                    .DefaultGroup(group => 
                        group.Add("telerik.common.css")
                             .Add("~/Content/Site.css")
                             .Add("~/Content/custom.css")
                             .Add("~/Content/themes/humanity/jquery-ui-1.8.18.custom.css")
                    .Combined(true)
                    .Compress(true)))
</head>
<body>
    <div class="page">
        <header>
            <div id="header-logo">
                    <img alt="X" src="../../Content/Images/logo100.png"/>
            </div>
            <div id="title">
                <h1>title</h1>
            </div>

            @(Html.Telerik().Menu()
                    .Name("menu")
                    .Items(menu =>
                    {
                        menu.Add().Text("Home").Action("Index", "Home");
                        menu.Add().Text("Products")
                            .Items(item =>
                                       {
                                           item.Add().Text("xxx").Action("xxx", "Products");
                                           item.Add().Text("xxx").Action("xxx", "Products");
                                           item.Add().Text("xxx").Action("xxx", "Products");
                                           item.Add().Text("xxx").Action("xxx", "Products");
                                       });
                        menu.Add().Text("Events").Action("Index", "Events");
                        menu.Add().Text("About Us").Action("About", "Home");
                        menu.Add().Text("Admin").Action("Index", "Admin");
                    })
                    .HtmlAttributes(new { style = "text-align:left;" }))
        </header>
        <section id="main">
            @RenderBody()
        </section>
        <footer>
        </footer>
    </div>
    @(Html.Telerik().ScriptRegistrar()
                        .Scripts(script=>script.Add("~/Scripts/custom.js"))
                        .Globalization(true)
                        .DefaultGroup(group => group.Combined(true)
                                                    .Compress(true)))
</body>
</html> 
```

这是基本页面视图：Index.cshtml

```
@{
    ViewBag.Title = "Admin";
}
<h2>
    Admin Index</h2>
<div id="navAdminLeft">
    @(Html.Telerik().TreeView()
    .Name("AdminNavTree")
    .Items(item =>
               {
                   item.Add().Text("Products");
                   item.Add().Text("Categories");
                   item.Add().Text("Materials");
                   item.Add().Text("Finishes");
                   item.Add().Text("Packaging");
                   item.Add().Text("File Manager");
                   item.Add().Text("CategoryTree");
               })
        .ClientEvents(events => events.OnSelect("loadAdminContent"))
           )
</div>
<div id="adminContent">
</div>
<script type="text/javascript">
    function loadAdminContent(e) {
        $.ajax({
            type: "GET",
            cache: false,
            url: "Admin/" + e.item.innerText,
            data: {},
            success: function (data) {
                $("#adminContent").html(data);
            }
        });
    }
</script> 
```

每当用户在页面上选择一个节点时，都会`#AdminNavTree`获取要显示的内容并进行填充`#adminContent`。我正在尝试构建一个编辑页面，其中一个 div 中列出了一个类别树，当用户单击该 div 上的任何类别时，详细信息将通过 ajax 加载到同一页面上的另一个 div 中。这是加载到的类别树的部分视图`#adminContent`：_CategoryTree.cshtml

```
@using xxx.Models.Navigation
@model IEnumerable<NavigationItem>

<div id="categoryTree">      
 @{Html.Telerik().TreeView()
    .Name("ctree")
        .BindTo(Model, mappings => 
            mappings.For<NavigationItem>(binding => binding
                    .ItemDataBound((currentItem, navigationItem) =>
                        {
                            currentItem.Text = navigationItem.Text;
                            currentItem.Expanded = true;
                                                        })
                    .Children(child => child.Items)

                ))
    .ClientEvents(events=>events.OnSelect("loadContent"))                                  
    .Render();
}
</div>
<div id="detail"></div>
<script type="text/javascript">
    function loadCategoryDetail(e) {
        $.ajax({
            type: "POST",
            url: "Admin/CategoryDetails",
            data: { id: $("#ctree").data("tTreeView").getItemText(e.item) },
            success: function (data) {
                $("#detail").html(data);
            }
        });
    }
</script> 
```

ajax 加载的详细信息页面不包含任何 Telerik 控件，因此列出代码不是问题。

问题：这不会呈现。一旦它尝试渲染`#ctree`树视图，它就会开始抛出所有类型的脚本错误，特别是它忽略 loadCategories（说未找到）。到目前为止，我认为正在发生的事情是包含树视图的 ajax 加载的部分页面正在重新加载 jquery 库，从而破坏脚本中的所有旧绑定和函数。有没有办法使这项工作，一个页面上的两个树视图，一个先前加载的，一个在 ajax 加载的部分视图中，都绑定到单独的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T20:13:20.383

我在 jsTree 上取得了很好的成功......对您的 Telerik 问题没有帮助，但可能值得一试。

[http://www.jstree.com/](http://www.jstree.com/)

# winforms - 如何创建一个永远不会吸引键盘焦点的按钮的winform

> ID：10077945
> 
> 赞同：3
> 
> 时间：2012-04-09T18:34:45.110
> 
> 标签：winforms, button, keyboard, focus

我的winform上有几个文本框。我也有几个按钮。现在，当我在一个这样的文本框上键入并单击一个按钮时，输入焦点从文本框中丢失，按钮获得输入键盘焦点。也就是说，当我们单击按钮时，光标从文本框中消失了。我不想要这种行为。即使单击按钮，我也希望我的文本框将光标保留在其中。真实情况是我有文本框和数字按钮只能在触摸屏上使用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T19:08:38.283

尝试创建自己的按钮控件，该控件继承自标准控件但关闭`Selectable`样式：

```
public class ButtonEx : Button {
  public ButtonEx() {
    this.SetStyle(ControlStyles.Selectable, false);
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T18:54:36.453

在您的按钮单击事件处理程序中，将焦点显式设置为**其他控件**。选择您认为在按下按钮后可以获得焦点的任何控件。例如，将焦点设置为 TextBox，使用如下代码：

```
textBox1.Focus(); 
```

这将防止您的按钮在单击按钮时获得焦点。

此外，将按钮的[`TabStop`](http://msdn.microsoft.com/en-us/library/dst5y6fs)属性设置为 false。

建议您将属性设置为 false 的其他答案[`CanFocus`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.canfocus.aspx)将不起作用，因为该属性对于按钮是只读的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T18:41:02.700

您可以将焦点设置到按钮单击事件处理程序上的文本框，如下所示：

```
private void Button_Click(...)
{
    FocusTextBox();
    // Do things...
}

private void FocusTextBox()
{
    textBox.Focus();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-07T08:47:14.870

创建`Button`具有属性的自定义类`Focusable`，设置`Focusable`为`false`

```
public class ButtonEx : Button
{
    [DefaultValue(true)]
    public bool Focusable
    {
        get { return GetStyle(ControlStyles.Selectable); }
        set { SetStyle(ControlStyles.Selectable, value); }
    }
} 
```

# sql - sqlite 对 SUM 列值进行排序

> ID：10077947
> 
> 赞同：-1
> 
> 时间：2012-04-09T18:34:48.090
> 
> 标签：sql, sqlite, sorting

```
SELECT SUM(bytes),stamp_updated 
from acct 
where stamp_updated BETWEEN datetime('now', 'localtime','-7 hours') AND datetime('now', 'localtime') 
GROUP BY ip_src 
ORDER BY bytes DESC limit 10; 
```

```
    48498275|2012-04-09 11:26:01
    6977282|2012-04-09 08:27:01
    1192705|2012-04-09 08:46:02
    3971336|2012-04-09 09:46:04
    1909543|2012-04-09 11:28:04
    265829|2012-04-09 09:11:02
    1234909|2012-04-09 10:28:04
    2396834|2012-04-09 11:28:02
    192638|2012-04-09 09:00:01
    30766141|2012-04-09 11:31:01

```

为什么第一列没有正确排序（DESC）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T18:41:52.930

`bytes`您在汇总之前使用您的列进行排序。试试这个：

```
SELECT SUM(bytes) AS total_bytes, stamp_updated 
FROM acct 
WHERE stamp_updated BETWEEN datetime('now', 'localtime','-7 hours') AND datetime('now', 'localtime') 
GROUP BY ip_src 
ORDER BY total_bytes DESC limit 10; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T18:41:47.670

您正在汇总您尝试排序的字段。这些单条数据不再单独存在，而是作为您分组依据的每个元素的总数。

也许你正在尝试`order by SUM(bytes)`？

除此之外，请考虑按 select 语句中的所有非聚合字段进行分组……您在`stamp_updated`分组依据中丢失了。

# c# - 如何使用 gtk# 和 mono 在 textview 中搜索文本？

> ID：10077949
> 
> 赞同：1
> 
> 时间：2012-04-09T18:34:58.273
> 
> 标签：c#, gtk, gtk#

我想知道如何在文本视图中搜索文本并更改其颜色（如语法突出显示）。我已经有了一个用保存/加载功能编写的基本文本编辑器。我在 gtk# 中使用 monodevelop。

非常感谢——阿德里安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T22:43:57.413

我将在这里使用 gtk api 命名法，应该有 gtk# 等价物。

对于搜索，GtkTextIter 有前向和后向搜索方法，旨在与 GtkTextView/GtkTextBuffer 一起使用。

对于语法高亮，您可以研究 GtkSourceView 及其 c# 包装器，它具有所有的语法高亮基础设施。它也是 GtkTextView 的子类，所以 GtkTextIter 可以使用它。

# android - Andengine Sprites 显示为黑框

> ID：10077957
> 
> 赞同：4
> 
> 时间：2012-04-09T18:35:44.140
> 
> 标签：android, andengine, sprite

出于某种原因，我的所有精灵都开始显示为黑框，而之前它们不是。这是我的代码。我只用前 2 个精灵让它运行良好，但是当我添加其他精灵时，它们在我的 android 设备上变成了黑盒。任何帮助将不胜感激。

```
public class GameHabeebActivity extends SimpleBaseGameActivity implements IAccelerationListener, IOnSceneTouchListener, IOnAreaTouchListener {
    // ===========================================================
    // Constants
    // ===========================================================

    // ===========================================================
    // Fields
    // ===========================================================

    private BitmapTextureAtlas mBitmapTextureAtlas;

    private TextureRegion mBoxFaceTextureRegion;
    private TextureRegion mCircleFaceTextureRegion;
    private TextureRegion mBaseballTextureRegion;
    private TextureRegion mTomatoeTextureRegion;
    private TextureRegion mBatTextureRegion;
    private TextureRegion mCanTextureRegion;
    private TextureRegion mBottleTextureRegion;

    private int mFaceCount = 0;

    private PhysicsWorld mPhysicsWorld;

    private float mGravityX;
    private float mGravityY;

    private int CAMERA_WIDTH;
    private int CAMERA_HEIGHT;

    private Scene mScene;

    private int itemscale=2;
    private int whichface=0;
    // ===========================================================
    // Constructors
    // ===========================================================

    // ===========================================================
    // Getter & Setter
    // ===========================================================

    // ===========================================================
    // Methods for/from SuperClass/Interfaces
    // ===========================================================

    @Override
    public EngineOptions onCreateEngineOptions() {
        Toast.makeText(this, "! HIT THE OBJECTS TO KEEP THEM IN THE AIR !", Toast.LENGTH_LONG).show();

        final Display display = getWindowManager().getDefaultDisplay();

        CAMERA_WIDTH = display.getWidth();
        CAMERA_HEIGHT = display.getHeight();

        final Camera camera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);

        return new EngineOptions(true, ScreenOrientation.LANDSCAPE_FIXED, new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), camera);
    }

    @Override
    public void onCreateResources() {
        BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/");

        this.mBitmapTextureAtlas = new BitmapTextureAtlas(this.getTextureManager(), 600, 170, TextureOptions.BILINEAR);
        this.mBoxFaceTextureRegion =  (TextureRegion) BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mBitmapTextureAtlas, this, "face_box_tiled.png", 0, 0); // 64x32
        this.mCircleFaceTextureRegion = (TextureRegion) BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mBitmapTextureAtlas, this, "face_circle_tiled.png", 64, 0); // 64x32
        this.mBaseballTextureRegion= (TextureRegion) BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mBitmapTextureAtlas, this, "Baseball.png", 128, 0);//50x50
        this.mTomatoeTextureRegion= (TextureRegion) BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mBitmapTextureAtlas, this, "tomatoe.png", 178, 0);//50x46
        this.mBatTextureRegion= (TextureRegion) BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mBitmapTextureAtlas, this, "Baseball_bat.png", 228, 0);//261x36
        this.mCanTextureRegion= (TextureRegion) BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mBitmapTextureAtlas, this, "can.png", 489, 0);//50x83
        this.mBottleTextureRegion= (TextureRegion) BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mBitmapTextureAtlas, this, "bottle.png", 539, 0);//50x170
    }

    @Override
    public Scene onCreateScene() {
        this.mEngine.registerUpdateHandler(new FPSLogger());

        this.mPhysicsWorld = new PhysicsWorld(new Vector2(0, SensorManager.GRAVITY_EARTH), false);

        this.mScene = new Scene();
        this.mScene.setBackground(new Background(1, 1, 1));
        this.mScene.setOnSceneTouchListener(this);

        final VertexBufferObjectManager vertexBufferObjectManager = this.getVertexBufferObjectManager();
        final Rectangle roof = new Rectangle(0, 0, CAMERA_WIDTH, 2, vertexBufferObjectManager);
        final Rectangle left = new Rectangle(0, 0, 2, CAMERA_HEIGHT, vertexBufferObjectManager);
        final Rectangle right = new Rectangle(CAMERA_WIDTH - 2, 0, 2, CAMERA_HEIGHT, vertexBufferObjectManager);

        final FixtureDef wallFixtureDef = PhysicsFactory.createFixtureDef(0, 0.5f, 0.5f);

        PhysicsFactory.createBoxBody(this.mPhysicsWorld, roof, BodyType.StaticBody, wallFixtureDef);
        PhysicsFactory.createBoxBody(this.mPhysicsWorld, left, BodyType.StaticBody, wallFixtureDef);
        PhysicsFactory.createBoxBody(this.mPhysicsWorld, right, BodyType.StaticBody, wallFixtureDef);

        this.mScene.attachChild(roof);
        this.mScene.attachChild(left);
        this.mScene.attachChild(right);

        this.mScene.registerUpdateHandler(this.mPhysicsWorld);

        this.mScene.setOnAreaTouchListener(this);

        createitemstimehandler();

        return this.mScene;
    }

    @Override
    public boolean onAreaTouched( final TouchEvent pSceneTouchEvent, final ITouchArea pTouchArea,final float pTouchAreaLocalX, final float pTouchAreaLocalY) {
        if(pSceneTouchEvent.isActionDown()) {
            final Sprite face =  (Sprite) pTouchArea;
            this.jumpFace(face);
            return true;
        }

        return false;
    }

    //add objects by touch
    @Override
    public boolean onSceneTouchEvent(final Scene pScene, final TouchEvent pSceneTouchEvent) {
        /*if(this.mPhysicsWorld != null) {
            if(pSceneTouchEvent.isActionDown()) {
                this.addFace(pSceneTouchEvent.getX(), pSceneTouchEvent.getY());
                return true;
            }
        }*/
        return false;
    }

    @Override
    public void onAccelerationAccuracyChanged(final AccelerationData pAccelerationData) {

    }

    @Override
    public void onAccelerationChanged(final AccelerationData pAccelerationData) {
        this.mGravityX = pAccelerationData.getX();
        this.mGravityY = pAccelerationData.getY();

        final Vector2 gravity = Vector2Pool.obtain(this.mGravityX, this.mGravityY);
        this.mPhysicsWorld.setGravity(gravity);
        Vector2Pool.recycle(gravity);
    }

    @Override
    public void onResumeGame() {
        super.onResumeGame();

        this.enableAccelerationSensor(this);
    }

    @Override
    public void onPauseGame() {
        super.onPauseGame();

        this.disableAccelerationSensor();
    }

    // ===========================================================
    // Methods
    // ===========================================================

    private void addFace(final float pX, final float pY) {
        this.mFaceCount++;
        TextureRegion whichtexture = null;

        if(whichface==0)
        {
            whichtexture=mBoxFaceTextureRegion;
        }
        if(whichface==1)
        {
            whichtexture=mCircleFaceTextureRegion;
        }
        if(whichface==2)
        {
            whichtexture=mBaseballTextureRegion;
        }
        if(whichface==3)
        {
            whichtexture= mBatTextureRegion;
        }
        if(whichface==4)
        {
            whichtexture=mTomatoeTextureRegion;
        }
        if(whichface==5)
        {
            whichtexture=mCanTextureRegion;
        }
        if(whichface==6)
        {
            whichtexture=mBottleTextureRegion;
        }
        final Sprite face;
        final Body body;

        final FixtureDef objectFixtureDef = PhysicsFactory.createFixtureDef(1, 0.5f, 0.5f);

        //add object
        face = new Sprite(pX, pY, whichtexture, this.getVertexBufferObjectManager());
        face.setScale(itemscale);
        body = PhysicsFactory.createCircleBody(this.mPhysicsWorld, face, BodyType.DynamicBody, objectFixtureDef);

        this.mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(face, body, true, true));

        face.setUserData(body);
        this.mScene.registerTouchArea(face);
        this.mScene.attachChild(face);

        whichface++;
        if(whichface>6)
        {
            whichface=0;
        }
    }

    private void jumpFace(final Sprite face) {
        final Body faceBody = (Body)face.getUserData();

        final Vector2 velocity = Vector2Pool.obtain(this.mGravityX * -3, this.mGravityY * -3);
        faceBody.setLinearVelocity(velocity);
        Vector2Pool.recycle(velocity);
    }

    private void createitemstimehandler() {
        TimerHandler itemTimerHandler;
        float mEffectSpawnDelay = 1f;

        itemTimerHandler = new TimerHandler(mEffectSpawnDelay, true,
        new ITimerCallback() {

            @Override
            public void onTimePassed(TimerHandler pTimerHandler) {
                addFace(CAMERA_HEIGHT,CAMERA_WIDTH/2);
                jumpFace ((Sprite)mScene.getLastChild());
            }
        });

        getEngine().registerUpdateHandler(itemTimerHandler);
    }

    // ===========================================================
    // Inner and Anonymous Classes
    // ===========================================================
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-09T22:52:07.067

我认为您需要在 onCreateResources() 方法的末尾添加它

```
this.mBitmapTextureAtlas.load(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T20:40:56.403

问题是你所有的图像加在一起都比你的纹理图集大。这与图集的总表面无关。地图集可能有更大的表面，但由于纹理的大小和形状，它可能无法将它们全部添加到其中，并且无法加载。

我可以这么说，因为您说它可以正常工作，直到您添加另一个。尝试使您的纹理图集更大或更好，创建另一个纹理图集并在那里添加另一个精灵。

我遇到了这个确切的问题，发现问题是这样的。

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T19:07:01.020

这是否与此问题有关：[问题 53：BitmapTextureAtlasTextureRegionFactory.createTiledFromAsset 当文件名称中有下划线时找不到位图文件](http://code.google.com/p/andengine/issues/detail?id=53)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-20T07:41:28.487

查看

1.  您的地图集已加载
2.  如果您在场景更改期间加载和卸载了您的图集，请确保您再次加载了您的图集。
3.  图像的大小。图像尺寸不应超过 2048 * 2048。尺寸大于此尺寸会在不同设备（高分辨率设备）中产生问题。

# jquery - 获得正确目标的主干视图事件

> ID：10077961
> 
> 赞同：3
> 
> 时间：2012-04-09T18:36:17.317
> 
> 标签：jquery, event-handling, backbone.js

给定以下简单的html：

```
<div class="someContainer">
  <h5>Some other information</h5>
</div> 
```

以及以下主干视图：

```
var view = Backbone.View.extend({
  events: {
   'click .someContainer': performAction
  },
  performAction: function (evt) { 
    // Do things here
  } 
}); 
```

我发现自己做了很多下面的代码，这对我来说似乎是一种代码味道。我做错了什么还是有更好的方法来做到这一点？

```
...performAction: function (evt) { 
 // Check to see if the evt.target that was clicked is the container and not the h5 (child)

 if ($(evt.target).hasClass('someContainer')) { 
  // Everything is ok, the evt.target is the container
 } else { 
  // the evt.target is NOT the container but the child element so...
  var $container = $(evt.target).parent('.someContainer');

  // At this point I now have the correct element I am looking for
 }
} 
```

这很有效，但我不确定这是可以在任何地方编写的好代码。我可以制作一个我可以调用的方法，但我不确定它是否能真正纠正代码异味，它只是将它外包给其他地方。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T19:37:25.883

您可以[`evt.currentTarget`](http://api.jquery.com/event.currentTarget/)改用：

> 事件冒泡阶段中的当前 DOM 元素。

演示：http: [//jsfiddle.net/ambiguous/UgA5M/](http://jsfiddle.net/ambiguous/UgA5M/)

或者你可以使用`$container = $(evt.target).closest('.someContainer')`而不用担心嵌套。

演示：http: [//jsfiddle.net/ambiguous/B49LG/](http://jsfiddle.net/ambiguous/B49LG/)

您使用哪种方法取决于您的具体情况。如果您在某种控件上有一个点击处理程序，那么`closest`可能更有意义；如果您真的想要将单击处理程序绑定到的元素（或认为您拥有，[这毕竟都是基于`delegate`](https://stackoverflow.com/a/7802255/479863)），然后使用`currentTarget`.

# ruby - 为什么 macvim 不总是使用 ruby 1.9.3？

> ID：10077963
> 
> 赞同：3
> 
> 时间：2012-04-09T18:36:22.340
> 
> 标签：ruby, vim, macvim

我已经安装了[yadr dotfiles](https://github.com/skwp/dotfiles)、一组 vim、ruby 等插件。

我在文件中有以下 Ruby 代码行`foo.rb`：

`foo: bar`

注意我使用 ruby​​ 1.9.3 语法进行符号分配/定义。

当我从命令行使用`mvim foo.rb`并保存该文件启动 macvim 时，一切正常。

但是，当我使用打开 macvim`open -a macvim`并导航到并打开`foo.rb`时，当我尝试保存文件时，我在`foo: bar`. 当我将其更改为时，`:foo => bar`我不会收到语法错误。

*   使用`open -a macvim`打开macvim，然后输入`:!ruby -v`prints`ruby 1.8.7`
*   使用`mvim .`打开macvim，然后输入`:!ruby -v`prints`ruby 1.9.3`

*根据我打开 macvim 的方式，我会得到不同版本的 Ruby*。如何确保 macvim 始终使用 ruby​​ 1.9.3 来评估我的 ruby​​ 代码？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T19:13:11.053

我花了一段时间才找到修复程序，但问题是由于 MacVim 没有以与终端加载 zsh 相同的方式加载 zsh 引起的。

修复很简单，可以放在你的 zshrc 中。查看我的 dotfiles 中的提交：

[https://github.com/simeonwillbanks/dotfiles/commit/e0e19cfeff13f8bc99d8164217ddd84c6d7f9529](https://github.com/simeonwillbanks/dotfiles/commit/e0e19cfeff13f8bc99d8164217ddd84c6d7f9529)

提交引用了一个完整的解释，可以在这里找到：

[http://vim.1045645.n5.nabble.com/MacVim-and-PATH-tt3388705.html#a3392363](http://vim.1045645.n5.nabble.com/MacVim-and-PATH-tt3388705.html#a3392363)

![在此处输入图像描述](../Images/f6c3d4893841916504ed45d60107f3a8.png)

希望这可以帮助！

# tooltip - 使用 ZURB Foundation 作为工具提示——新创建的 DOM 元素不绑定到工具提示“悬停”事件

> ID：10077964
> 
> 赞同：3
> 
> 时间：2012-04-09T18:36:28.503
> 
> 标签：tooltip, zurb-foundation

我的具体用例是我使用 .net 回发来显示一个更新面板，其中包含与它们相关联的工具提示的元素。我已经在页面上初始化了 ZURB Foundation（提供工具提示）脚本，第一页的工具提示效果很好。回发后，我想*重新*初始化脚本，以便将这些新的工具提示项绑定到“悬停”事件。

通用用例是以任何方式添加启用工具提示的新元素的任何情况。

在我看来，“悬停”绑定是在页面初始化到*现有*的“.has-tip”元素集合时完成的，但是正在处理*未来*的.has-tip 元素的存在。

我想做以下事情： a) 重新初始化工具提示插件并搜索新的 .has-tip 元素以附加“悬停”事件。

已经尝试了许多不同的方法来尝试重新初始化，但是

```
$.fn.tooltips('init'); 
```

似乎是最有希望的，因为它成功调用了脚本中的 init 方法，但没有将悬停事件绑定到新的 .has-tip 元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-01T16:31:06.093

我尝试了很多建议，但真正有效的是：

完成 DOM 编辑后，您必须调用

```
$(document).foundation(); 
```

这句话将刷新所有内容，包括您的工具提示。奇迹般有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T15:42:29.137

编辑/澄清：

1.  似乎存在动态内容的错误： [https ://github.com/zurb/foundation/pull/465](https://github.com/zurb/foundation/pull/465)

2.  ~~修复错误后（您可以自己修复，阅读请求请求以获取更多信息），~~错误已修复，因此您可以触发页面范围的工具提示刷新：

    $(document).tooltips('reload');

* * *

原始答案

如果您还没有弄清楚，jquery.tooltips.js 有一个名为 .reload 的方法/函数，它实际上似乎是最有前途的（代码来自基础插件）：

```
reload : function() {
      var $self = $(this);
      return ($self.data('tooltips')) ? $self.tooltips('destroy').tooltips('init') : $self.tooltips('init');
    }, 
```

这实际上只是他们其他方法的链，但最好在 .init 之前 .destroy 以避免双重工具提示或其他一些冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-12T14:09:32.017

当使用 Ajax 生成模态窗口时，我遇到了同样的问题，

这是我的解决方法：

```
$(document)
  .on('opened.fndtn.reveal', '[data-reveal]', function () {
    $('html').css({'overflow': 'hidden'});
    $('.has-tip').each(function(i){
    var tip = $(this);
    Foundation.libs.tooltip.create(tip);
  });
}) 
```

它适用于 ZF v5.2+

# javascript - 通过jquery ajax上传和加载图片

> ID：10077971
> 
> 赞同：2
> 
> 时间：2012-04-09T18:36:55.660
> 
> 标签：javascript, jquery, asp.net, asp-classic

所以，让我更好地解释一下，我很确定标题并没有说太多。

我负责对公司系统进行一些改进。现在系统将当前图像保存为文件，并将图像的路径插入数据库。

那么，如果有效，有什么问题呢？好吧，如果服务器一直插入很多图像，服务器将需要一些改进，所以我的第一个想法是，为什么不将图像数据保存到数据库并通过ajax调用加载呢？很好，它不会使服务器因图像中的大量千兆字节而过载，不会出现重复问题等问题，但是当我从 jQuery 调用 ajax 方法时，发送到服务器端的数据是通过查询字符串如果数据超过 6000 个字符，就像我使用 base64 编码时一样，我无法调用该方法。

我的另一个想法是，将图像发送到服务器端，然后生成数据保存到数据库中，当用户想要查看图像时，服务器将数据转换为图像并发送到客户端。但问题是，这个系统有很多用户，发送/接收大量的图像会使服务器由于大量的请求而出现内存问题。

因此，长话短说，在不超载服务器容量的情况下，从客户端向服务器发送/接收图像的最佳方式是什么，反之亦然。

PS：对不起，很长的帖子，我想提出一个明确的问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T20:36:51.993

服务器将更多地在数据库中存储图像。大多数 Web 服务器非常有效地提供静态文件（如图像）。

在尝试解决问题之前，您必须更多地考虑问题：

*   **您的问题是带宽过载吗？**在上传之前尝试调整图像客户端的大小（您可以使用 PlUpload 等工具）。如果你不能，至少在服务器端调整它们的大小以提供更小的服务并节省下载带宽

*   **您的问题是硬盘空间超载吗？**同样，调整图像客户端或服务器端的大小。

*   **你的问题是CPU过载吗？**尝试确定导致尖峰的根代码。请注意，大量请求会导致 CPU 过高，您可能需要更强大的服务器（或其他网络服务器）

# qt - 插件中没有为 QWidget 调用 closeEvent

> ID：10077976
> 
> 赞同：0
> 
> 时间：2012-04-09T18:37:26.620
> 
> 标签：qt, qt4

`QWidget`我在插件中创建了一个。我也使用了一个`QTimer`so显示一些数据取决于时间。当我`QWidget`关闭时必须删除它`QTimer`但我不能因为`closeEvent`没有被调用。可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:07:08.953

如果关闭的意思是销毁，那么您可以将 QWidget 的 destroy() 信号连接到 QTimer 的 destroy() 插槽。

# java - 使用 Criteria 进行连接

> ID：10077979
> 
> 赞同：0
> 
> 时间：2012-04-09T18:37:32.873
> 
> 标签：java, hibernate, criteria, criteria-api

我对休眠非常陌生。我已经用谷歌搜索了两个小时，但我仍然不知道如何在不使用 HQL 的情况下进行 JOIN，仅按标准。我有表 Clients(cID, name) 和 Visits(vID, vcID, date)。关系是一对多的（一个客户可以多次访问）。我也想在没有 setFetchMode 的情况下这样做。只是标准。我必须更改映射xml吗？

更新：这是我的映射 xml 的一部分：

```
 <class name="Client" table="Clients">
   <id name="cID" column="cID"><generator class="native"/></id>
   <property name="name"     length="10" not-null="true"/>
 </class>
 <class name="Visit" table="Visits">
   <id name="vID" column="vID"><generator class="native"/></id>
   <property name="vcID"     length="10" not-null="true"/>
   <property name="date" length="25" not-null="true"/>
 </class> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T18:46:26.527

拥有一个具有列表属性“访问”的类 Client 映射到您的访问实体：

```
Criteria criteria = session.createCriteria(Client.class);
criteria.addCriteria("visits"); 
```

这将在您的客户表和您的访问表之间创建一个内部连接。

**更新：**

在这里你会找到一些很好的例子：[http ://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html#querycriteria-associations](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html#querycriteria-associations)

**映射示例**

我几乎从不使用休眠映射 xml，但它应该类似于：

```
 <class name="Client" table="Clients">
      <id name="cID" column="cID"><generator class="native"/></id>
      <property name="name"     length="10" not-null="true"/>

      <bag name="visits">
           <key column="vcId"/>
           <one-to-many class="Visit"/>
      </bag>
    </class> 
```

告诉 Hibernate，有一个属性“visits”表示一对多关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T19:45:58.933

您需要更新映射：

```
 <class name="Client" table="Clients">
   <id name="cID" column="cID"><generator class="native"/></id>
   <property name="name"     length="10" not-null="true"/>
   <!-- Declare Set<Visit> visits in the Client class-->
   <set name="visits" lazy="false" cascade="all">
        <key column="vcID"/>
        <one-to-many class="your.package.Visit"/>
    </set>
 </class>
 <class name="Visit" table="Visits">
   <id name="vID" column="vID"><generator class="native"/></id>
   <!-- and add "Client client" property to your Visit class --> 
   <many-to-one name="client" column="vcID" lazy="false"/> 
   <property name="date" length="25" not-null="true"/>
 </class> 
```

然后：

```
 Criteria criteria = session.createCriteria(Visit.class).addCriteria("client")
                      .add(Restriction.eq(...)); 
```

或者

```
Criteria criteria = session.createCriteria(Client.class).addCriteria("visits")
                      .add(Restriction.eq(...)); 
```

Hibernate 会自动加入它们。

# c# - 如何获取上下文菜单单击事件的选定列表视图项

> ID：10077983
> 
> 赞同：0
> 
> 时间：2012-04-09T18:37:46.410
> 
> 标签：c#, wpf, xaml, mouseclick-event

当单击分配给列表视图项目的上下文菜单时，我需要帮助来获取选定列表视图项目的详细信息。

```
 <ListView.Resources>
    <ContextMenu x:Key="GvRowMenu" ItemsSource="{Binding ContextMenuItems}">
        <ContextMenu.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <Image  Source="{Binding IconPath}"></Image>
                    <TextBlock  Text="{Binding Name}"></TextBlock>
                    <MenuItem 
                        Click="MenuItem_Click"
                        CommandParameter="{Binding RelativeSource={RelativeSource Self}, Path=DataContext.RunCommand}" /> 
```

这是一个点击事件代码

```
private void MenuItem_Click(object sender, RoutedEventArgs e)
    {
        //what needs to de here?
    } 
```

我在我的视图模型中编写了这段代码，但它不会在执行方法上触发

```
RunCommand = new DelegateCommand<object>(OnRunCommand, CanRunCommand);

private void OnRunCommand(object obj)
    {
        // use the object here...
    }

    private bool CanRunCommand(object obj)
    {
        return true;
    } 
```

让我知道，我该如何处理这种情况。任何与此相关的示例将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:49:45.163

你正在混合你的方法......你可以运行一个事件或者你可以使用一个命令，但不能同时使用。

你想要的是绑定命令：

```
<MenuItem Command="{Binding DataContext.RunCommand}" /> 
```

那里有许多奇妙的信息来源……[这里有一个](http://www.tanguay.info/web/index.php?pg=codeExamples&id=178)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T11:56:51.130

谢谢..！好吧，下面的代码对我有用。

```
private void MenuItem_Click(object sender, RoutedEventArgs e)
{
   MenuItem menuItem = (MenuItem)e.Source;
   ContextMenu contextMenu = menuItem.CommandParameter as ContextMenu;
   ListViewItem item = (ListViewItem)contextMenu.PlacementTarget;
   var x = ((myViewModel)(item.Content)).myModel;
   //'x' gives all required data of list view item
} 
```

这是我的 XAML

```
<ListView.Resources>
   <ContextMenu x:Key="GvRowMenu" ItemsSource="{Binding ContextMenuItems}">
      <ContextMenu.ItemTemplate>
         <DataTemplate>
            <StackPanel Orientation="Horizontal">
               <Image  Source="{Binding ImagePath}"/>
               <TextBlock  Text="{Binding Name}"/>
               <MenuItem Click="MenuItem_Click" 
                         CommandParameter="{Binding 
                                 RelativeSource={RelativeSource 
                                 AncestorType={x:Type ContextMenu}}}"/>
            </StackPanel>
         </DataTemplate>
      </ContextMenu.ItemTemplate>
   </ContextMenu>
</ListView.Resources> 
```

# visual-studio-2010 - 从VS 2008升级到VS 2010，签入SVN，仍然提示升级

> ID：10077986
> 
> 赞同：2
> 
> 时间：2012-04-09T18:37:59.687
> 
> 标签：visual-studio-2010, visual-studio-2008, svn

正如标题所说，我们将 VS2008 解决方案升级到 VS2010，并将更新的解决方案文件签入到 SVN。当我用更改更新我的本地 SVN 并在 VS2010 中打开解决方案时，我仍然收到“升级向导”提示，告诉我解决方案需要升级到 VS2010，即使`.sln`文件已经升级。尝试在 VS2008 中重新打开它会出现预期错误，即该解决方案适用于较新版本的 Visual Studio。

知道是什么原因造成的以及如何解决它，这样我们就不必在已经升级的解决方案上运行升级向导了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T08:36:46.930

我不确定这是您问题的根源，但值得一试。当向导转换 VS2008 项目时（当您转换解决方案时，项目也会被转换），将为每个项目文件创建一个文件，其名称相同但扩展名不同：`vcxproj`而不是`vcproj`. 这个文件没有被 SVN 版本化（因为在向导做他的事情之前它不存在），所以当你在没有运行向导的计算机上 SVN 更新你的解决方案时它会丢失。

`vcxproj`因此，将向导创建的所有文件添加并提交到 SVN 存储库，更新其他工作副本，然后尝试在 VS2010 中再次打开解决方案。`vcproj`顺便说一句，不再需要旧文件，因此如果您确定没有人需要 VS2008 版本，则可以将它们从 SVN 存储库中删除。

# visual-studio - Visual Studio 2010：文档选项卡上下文菜单的名称

> ID：10077987
> 
> 赞同：16
> 
> 时间：2012-04-09T18:38:10.390
> 
> 标签：visual-studio, visual-studio-2010

有谁知道右键单击 Visual Studio 2010 中的文档选项卡时获得的上下文菜单的名称？

我想向其中添加“关闭所有文档”命令，但我无法确定它在自定义对话框中是哪个上下文菜单。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-09T20:45:33.253

[**您可以在其他上下文菜单**](http://blog.krisvandermast.com/VisualStudio2010AddAnExtraContextMenuItemToTheDocumentTab.aspx)中找到该菜单| [**简易 MDI 文档窗口**](http://blog.krisvandermast.com/VisualStudio2010AddAnExtraContextMenuItemToTheDocumentTab.aspx)。

# git - 使用 GPG 签署 git 提交

> ID：10077996
> 
> 赞同：38
> 
> 时间：2012-04-09T18:38:52.493
> 
> 标签：git, gnupg, pgp, git-sign

有没有办法用 gpg 签署 git 提交？使用标签（使用`-s`而不是`-a`）非常容易，似乎提交会有类似的功能。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-12-17T07:41:14.047

注意：`-S`一直添加选项可能很麻烦。
在 git 2.0 及更高版本中，您可以添加一个配置来为您处理该选项。

请参阅[Nicolas Vigier (boklm)](https://github.com/boklmthe)的[提交 2af2ef3](https://github.com/git/git/commit/2af2ef3c85612946cac3f16143b4875c9f31c4d2)：

## 添加对`commit.gpgsign`所有提交进行签名的选项

> 如果您想对所有提交进行 GPG 签名，则必须`-S`始终添加该选项。config 选项允许自动签署所有提交
> 。`commit.gpgsign`

```
commit.gpgsign 
```

> 一个布尔值，用于指定是否所有提交都应该是 GPG 签名的。
> 在执行 rebase 等操作时使用此选项可能会导致大量提交被签名。使用代理来避免多次输入您的 GPG 密码可能会很方便。

正如[Apteryx](https://stackoverflow.com/users/2896799/apteryx)评论[如下](https://stackoverflow.com/questions/10077996/sign-git-commits-with-gpg/20628543?noredirect=1#comment62530543_20628543)：

> 要在命令行上全局设置：

```
git config --global commit.gpgsign true 
```

* * *

在 Git 2.27（2020 年第二季度）中，“ `git rebase`”学习了“ `--no-gpg-sign`”选项来反`commit.gpgSign`制用户可能拥有的选项。

请参阅[Đoàn Trần Công Danh (``)的](https://github.com/)[提交 5c5bac1](https://github.com/git/git/commit/5c5bac173d202013750dc28b37107d151ccb921e)、[提交 4369d3a](https://github.com/git/git/commit/4369d3a0009bc2459c413ca45cc8928d1a5e53aa)、[提交 9da37fe](https://github.com/git/git/commit/9da37fe11e039eef68f2a67c7a0fa86165a5c653)、[提交 ae06ba6](https://github.com/git/git/commit/ae06ba611a3d4cdb1c3d87727d4a30e79a59b5ea)、[提交 cf0ad4d](https://github.com/git/git/commit/cf0ad4d199924073ef485ff60393c8a81edbdbb6)、[提交 c241371](https://github.com/git/git/commit/c241371c0445cee7116e36bbacb5b35069a81e64)（2020 年 4 月 3 日） 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 fc3f6fd](https://github.com/git/git/commit/fc3f6fd7bef30895b3f80c1f8a708f5eeb69695b))^(中，2020 年 4 月 22 日）)
^([`gitster`](https://github.com/gitster))

> ## [`cherry-pick/revert`](https://github.com/git/git/commit/cf0ad4d199924073ef485ff60393c8a81edbdbb6)`--no-gpg-sign`:在任何情况下都是荣誉
> 
> ^(签字人：Đoàn Trần Công Danh)
> 
> {cherry-pick,revert} --edit 尚未兑现 --no-gpg-sign。
> 
> 将此选项传递给以[`git commit`](https://git-scm.com/docs/git-commit)兑现它。

* * *

请注意，“ [`git rebase --rebase-merges`](https://github.com/git/git/blob/73af6a4fab3fc570e234f5836dc1e59c3270a716/Documentation/git-rebase.txt#L518)” ^(（[man](https://git-scm.com/docs/git-rebase#Documentation/git-rebase.txt---rebase-merges(rebase-cousins%7Cno-rebase-cousins))）)在使用非默认合并策略重放合并或重放`--gpg-sign`章鱼`git merge`合并时（因为使用默认策略重放双头合并是在一个单独的代码路径，大多数用户没有触发该问题），已在 Git 2.30（2021 年第一季度）中更正

请参阅[Samuel Čavoj ( ) 的](https://github.com/sammko)[提交 43ad4f2](https://github.com/git/git/commit/43ad4f2eca811afe7eb2eb089afc9f501fd8a2c6)、[提交 19dad04](https://github.com/git/git/commit/19dad040ed19761e8d6d63b4efd03ad846b81d06)、[提交 ae03c97](https://github.com/git/git/commit/ae03c97ac0e36a33183562464f9506c8b3a73060)（2020 年 10 月 18 日[）](https://github.com/sammko)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 73af6a4](https://github.com/git/git/commit/73af6a4fab3fc570e234f5836dc1e59c3270a716))^(中，2020 年 11 月 2 日）)[`sammko`](https://github.com/sammko)
^([`gitster`](https://github.com/gitster))

> ## [`sequencer`](https://github.com/git/git/commit/ae03c97ac0e36a33183562464f9506c8b3a73060): 修复传递给合并子命令的 gpg 选项
> 
> ^(签字人：Samuel Čavoj)

> 当`--rebase-merges`使用指定的自定义策略`-s`或章鱼合并执行变基时，同时`gpgsign`启用（变基`-S`或配置`commit.gpgsign`），操作将在合并提交时失败。
> 
> 而不是用“ `-S%s`”替换键 id，只有裸键 id 会被传递给底层合并命令，该命令试图将其解释为 ref。
> 
> 按照 Johannes Schindelin 和 Junio C Hamano 的建议修复问题并添加测试用例。

和：

> ## [`sequencer`](https://github.com/git/git/commit/19dad040ed19761e8d6d63b4efd03ad846b81d06): 显式传递`--no-gpg-sign`给`merge`
> 
> ^(签字人：Samuel Čavoj)

> 为具有非默认策略的合并启动的合并子命令将使用其自己的默认行为来决定如何签署提交，无论`opts->gpg_sign`设置为什么。
> 例如，如果设置为`--no-gpg-sign`，则显式指定给 rebase 的标志将被忽略。`commit.gpgsign``true`
> 
> 修复问题并添加一个测试用例来执行此行为。

固定在：

" [`git rebase --rebase-merges`](https://github.com/git/git/blob/73af6a4fab3fc570e234f5836dc1e59c3270a716/Documentation/git-rebase.txt#L518)" ^(( [man](https://git-scm.com/docs/git-rebase#Documentation/git-rebase.txt---rebase-merges(rebase-cousins%7Cno-rebase-cousins)) ))在使用非默认合并策略重放合并或重放章鱼合并时（因为使用默认策略重放双头合并是在单独的代码路径中完成的）未正确将`--gpg-sign`命令行选项传递给底层`git merge`，大多数用户没有触发该问题），已在 Git 2.30（2021 年第一季度）中更正，.

请参阅[Samuel Čavoj ( ) 的](https://github.com/sammko)[提交 43ad4f2](https://github.com/git/git/commit/43ad4f2eca811afe7eb2eb089afc9f501fd8a2c6)、[提交 19dad04](https://github.com/git/git/commit/19dad040ed19761e8d6d63b4efd03ad846b81d06)、[提交 ae03c97](https://github.com/git/git/commit/ae03c97ac0e36a33183562464f9506c8b3a73060)（2020 年 10 月 18 日[）](https://github.com/sammko)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 73af6a4](https://github.com/git/git/commit/73af6a4fab3fc570e234f5836dc1e59c3270a716))^(中，2020 年 11 月 2 日）)[`sammko`](https://github.com/sammko)
^([`gitster`](https://github.com/gitster))

> ## [`sequencer`](https://github.com/git/git/commit/ae03c97ac0e36a33183562464f9506c8b3a73060): 修复`gpg`传递给`merge`子命令的选项
> 
> ^(签字人：Samuel Čavoj)

> 当使用 with 或章鱼合并指定的自定义策略执行`rebase`with并同时启用（或 config ）时，操作将在合并提交时失败。 而不是用“ ”替换键 id，只有裸键 id 会被传递给底层合并命令，该命令试图将其解释为 ref。`--rebase-merges``-s``gpgsign``rebase -S``commit.gpgsign`
> `-S%s`
> 
> 按照 Johannes Schindelin 和 Junio C Hamano 的建议修复问题并添加测试用例。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-04-09T18:46:12.880

`git commit -S`（需要 git >= 1.7.9）。