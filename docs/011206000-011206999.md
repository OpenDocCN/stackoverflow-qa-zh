# StackOverflow 问答 11206000-11206999

# java - hibernate referencedColumnNames 未映射到单个属性

> ID：11206000
> 
> 赞同：16
> 
> 时间：2012-06-26T11:07:04.097
> 
> 标签：java, spring, hibernate

我在使用 Hibernate 4 的 Spring 3 Web 应用程序中遇到以下异常：

```
 org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mySessionFactory' defined in URL [file:war/WEB-INF/datasource-config.xml]: Invocation of init method failed; nested exception is org.hibernate.AnnotationException: referencedColumnNames(DISCUSSION_ID) of com.jr.freedom.discusion.Message.discussion referencing com.jr.freedom.discusion.Discussion not mapped to a single property
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:96)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:44)
    at org.springframework.test.context.TestContext.buildApplicationContext(TestContext.java:198)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:233)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:126)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:85)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:231)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:95)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.invokeTestMethod(SpringJUnit4ClassRunner.java:139)
    at org.junit.internal.runners.JUnit4ClassRunner.runMethods(JUnit4ClassRunner.java:51)
    at org.junit.internal.runners.JUnit4ClassRunner$1.run(JUnit4ClassRunner.java:44)
    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:27)
    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:37)
    at org.junit.internal.runners.JUnit4ClassRunner.run(JUnit4ClassRunner.java:42)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.hibernate.AnnotationException: referencedColumnNames(DISCUSSION_ID) of com.jr.freedom.discusion.Message.discussion referencing com.jr.freedom.discusion.Discussion not mapped to a single property
    at org.hibernate.cfg.BinderHelper.createSyntheticPropertyReference(BinderHelper.java:205)
    at org.hibernate.cfg.ToOneFkSecondPass.doSecondPass(ToOneFkSecondPass.java:116)
    at org.hibernate.cfg.Configuration.processEndOfQueue(Configuration.java:1514)
    at org.hibernate.cfg.Configuration.processFkSecondPassInOrder(Configuration.java:1437)
    at org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1355)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1724)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1775)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBuilder.buildSessionFactory(LocalSessionFactoryBuilder.java:184)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:314)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 29 more 
```

下面是使用 Discission Pojo 的 Message POJO：

```
@Entity
@Table(name = "MESSAGE")
public class Message {

    @Id
    @Column(name = "message_id")
    private String id;

    @Column(name = "message_text", nullable = false)
    private String messageText;

    /**
     * Foreign key for user table
     */
    @Id
    @OneToOne
    @JoinColumn(name = "from_user", nullable = false)
    private User fromUser;

    /**
     * Foreign key for discussion table
     */
    @Id
    @ManyToOne
    @JoinColumn(name = "discussion",referencedColumnName="DISCUSSION_ID", nullable = false)
    private Discussion discussion;

    public Message() {
        id = UUID.randomUUID().toString();
    }

    public String getMessageText() {
        return messageText;
    }

    public void setMessageText(String messageText) {
        this.messageText = messageText;
    }

    public User getFromUser() {
        return fromUser;
    }

    public void setFromUser(User fromUser) {
        this.fromUser = fromUser;
    }

    public Discussion getDiscussionId() {
        return discussion;
    }

    public void setDiscussionId(Discussion discussion) {
        this.discussion = discussion;
    }

    public String getId() {
        return id;
    }

} 
```

这是讨论 POJO：

```
@Entity
@Table(name = "DISCUSSION")
public class Discussion {

    @Id
    @Column(name = "DISCUSSION_ID")
    private String id;

        @Column(name = "TITLE", nullable = false)
    private String title;

    @Column(name = "CATAGORY", nullable = false)
    private String catagory;

    @Id
    @OneToOne
    @JoinColumn(name = "discussionOwner", nullable = false)
    private User discussionOwner;

    public Discussion() {
        id = UUID.randomUUID().toString();
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public String getCatagory() {
        return catagory;
    }

    public void setCatagory(String catagory) {
        this.catagory = catagory;
    }

    public User getDiscussionOwner() {
        return discussionOwner;
    }

    public void setDiscussionOwner(User discussionOwner) {
        this.discussionOwner = discussionOwner;
    }

    public String getId() {
        return id;
    }

} 
```

我错过了什么？这两个实体之间的关系是一个讨论实体可以包含许多消息，而一个消息只能属于一个讨论

提前致谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-25T02:14:44.323

对于那些有兴趣进行复合键连接的人，请尝试：

```
@JoinColumns({    
  @JoinColumn(name = "x", referencedColumnName = "x"),
  @JoinColumn(name = "y", referencedColumnName = "y"),
  @JoinColumn(name = "z", referencedColumnName = "z")
}) 
```

本质上，如果您有 3 列标记为 @ID，JPA 假定您需要所有 3 列来进行唯一标识。这意味着在外键方面，您还需要 3 列来进行正确的外键引用。

# django - 如何在 Django 模板中运行多 for 循环？

> ID：11206001
> 
> 赞同：1
> 
> 时间：2012-06-26T11:07:04.823
> 
> 标签：django, django-templates

我有一个模板，我需要在其中同时运行两个 for 循环。例如：

```
#pseudocode
{% for x in one%} and {% for y in two %}
 {{x}}, {{y}}
{% endfor %} 
```

PS：以上代码是伪代码。我还找到了一个包，即[Djnago-multiforloop](http://pypi.python.org/pypi/django-multiforloop/0.2.1)

还有其他方法吗？

## 更新！

我有一本`objects`在 python 中命名的字典，如下所示：

```
{<User: x>: True, <User: y>: False} 
```

现在我想在我的 Django 模板代码中使用这些值：

```
 {% for share_user in objects %} and {% for key, value in objects.iteritems %}
    <tr>
        <td>{{ share_user }}</td> 
        <td><a href="{% url share_edit type type.pk share_user.id %}">{{ value}}</a></td>
    </tr>   
{% endfor %} 
```

我想将两者合并，`for loop` 以便模板中的以下代码成功运行。

期望的输出：对于第一次迭代：

```
x
True 
```

对于第二次迭代：

```
Y
False 
```

在我的views.py中：

```
 permission_obj = somemodels.objects.filter(object_id=object_id)
 for perm in permission_obj:
    s_user.append(perm.user)
    s_edit.append(perm.edit)
 objects = dict(zip(s_user,s_edit))
 extra_context = {
   'objects' : objects
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:48:28.877

2只有你可以做这样的事情：

```
{% for x, y in one_and_two %}
   {{x}}, {{y}}
{% endfor %} 
```

如果一个是 [1, 2, 3] 而两个是 [4, 5, 6]

one_and_two 是 [(1, 4), (2, 5), (3, 6)]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:50:12.027

根据您有问题的更新。

视图.py

```
permission_obj = somemodels.objects.filter(object_id=object_id)
objects = []

for perm in permission_obj:
   objects.append({'user':perm.user,'edit':perm.edit})

 extra_context = {
   'objects' : objects
    } 
```

模板.html

```
{% for obj in objects %}
    <tr>
        <td>{{ obj.user }}</td> 
        <td><a href="{% url share_edit type type.pk obj.user.id %}">{{ obj.edit }}</a></td>
    </tr>   
{% endfor %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-18T13:28:27.040

如果您想遍历 2 个相同大小的列表，您可以在 python 中使用 zip()
请查看此答案以获取详细信息

[https://stackoverflow.com/a/14841466/9715289](https://stackoverflow.com/a/14841466/9715289)

# silverlight - 抑制总页数查询 (Silverlight DataPager)

> ID：11206002
> 
> 赞同：0
> 
> 时间：2012-06-26T11:07:05.713
> 
> 标签：silverlight, entity-framework-4, datagrid, datapager, domaindatasource

我正在使用带有 DomainDataSource 和 DataPager 和 EF 4 的 Silverlight DataGrid 当使用 MSSQL 服务器分析器时，我注意到我们占用了大部分数据检索时间的 2 个查询。一个查询获取给定负载大小的数据，另一个查询获取总页数。对于大型数据集，获取页数的速度非常慢，比获取数据本身要慢得多！

所以我的问题是：是否可以禁止此查询？我知道数据分页器需要知道有多少页，但我想如果必须的话我可以解决这个问题

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:53:05.103

将查询上的 'IncludeTotalCount' 设置为 false 有效。我在数据库上下文中的 Load 覆盖方法中做到了这一点，但我想它可以在特定查询上完成。

# java - 在android中批量上传图片

> ID：11206003
> 
> 赞同：1
> 
> 时间：2012-06-26T11:07:07.420
> 
> 标签：java, android, file-upload, bulk

我有一个应用程序，我需要将 10 张图片（最多）上传到服务器。首先，我一个接一个地在一个线程中上传所有图像，每次回收`Bitmap`地图并给出`GC`提示，`System.gc();`现在这工作正常，但问题是用户需要等待更多时间上传图像。所以我现在尝试`ThreadPoolExecuter`使用这种方法在一个线程中上传每 2 张图像，该应用程序可能会在小型 RAM 设备上耗尽内存。问题是：有没有更好的解决方案来快速发送图像而不消耗大量内存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:47:11.427

您始终可以使用 AsynTask 来完成后台工作。在此您将有覆盖的方法调用 doInBackground。您可以在其中将图像上传到服务器，因为它是异步调用，所以效率很高。所以你仍然可以让你的 UI 更改并行。

# cocos2d-iphone - 如何将对象附加到box2d cocos2d中的旋转圆圈？

> ID：11206007
> 
> 赞同：0
> 
> 时间：2012-06-26T11:07:28.230
> 
> 标签：cocos2d-iphone, box2d

我试图让一个物体在碰撞点上连接到一个正在旋转的圆圈，但玩家需要连接到玩家身上的一个恒定点。例如，玩家来回移动，当用户触摸屏幕并且玩家跳起来时，但我需要的是，当玩家与圆圈碰撞时，它会将腿连接到圆圈上并继续随着圆圈旋转。所以想知道在cocos2d box2d中如何制作这种碰撞关节？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:58:07.443

当检测到用户和圆圈之间的碰撞时，您可以运行一个调用回调函数（可能是 CCCallFuncND）的操作。回调函数可以将指针传递给两个主体（包装在 NSValue valueWithPointer 中）并在它们之间创建任意关节。这将通过首先实例化所需类型的 b2JointDef 来完成，将该关节的 bodyA 和 bodyB 定义为您希望“粘在一起”的两个主体，然后调用 b2World->CreateJoint()。

就将玩家身体附加到圆形身体上的*特定点而言*，您必须通过关节定义的某些参数（如锚点）来执行此操作。例如 b2PrismaticJoints 有 anchorPoint，它定义了关节运动范围的中心。

# python - Django 临时图像

> ID：11206008
> 
> 赞同：4
> 
> 时间：2012-06-26T11:07:28.433
> 
> 标签：python, django, django-models

嗨我有这种类型的模型

```
class Post(models.Model):
    title = models.CharField()
    image = models.ImageField()
    # other fields 
```

为了创建一个新帖子，我需要这样的流程：

*   在新的帖子页面 1 中，用户选择照片并上传（提交）
*   在新帖子页面 2 中，用户可以看到照片并填写其他字段，例如“标题”

我的问题是如何上传照片并将其显示在下一页中，而无需使用图像字段创建新的 Post 对象。我应该将图像保存在临时目录中吗？在这种情况下，如何保留参考并在第二页中使用它？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:29:50.087

有几个解决方案

1.  定义另一个模型以仅保存图像，并在 Post 模型中添加可能是 OneToOneField。在提交 page1 时，创建此图像模型的实例并将其作为图像字段放入 page2。
2.  使用 html5 文件 API，您可以在图像字段中引用本地文件。因此，您可以使用本地客户端路径在 page2 上显示图像，而无需将其存储在服务器上。参考：[在上传之前查看从客户端文件系统中选择的图像？](https://stackoverflow.com/questions/6250704/view-image-selected-from-file-system-on-client-side-before-upload)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:45:40.243

首先阅读相关文档，以便了解上传的文件会发生什么： [https ://docs.djangoproject.com/en/dev/topics/http/file-uploads/](https://docs.djangoproject.com/en/dev/topics/http/file-uploads/)

恕我直言，最简单的解决方案是

1/ 将上传的文件保存在某个临时目录中 - 只需确保您可以以一种或另一种方式提供内容（直接通过前端网络服务器，或者如果您想更多地控制谁可以访问此内容，则通过自定义视图），

2/将临时文件路径和url以一种或另一种方式传递给“下一个”视图（隐藏的表单字段，会话......）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T12:19:26.887

我曾经有一张桌子来存储图像（实际上是任何文件:)）。每个图像都链接到对象 (FK) 并具有状态 - 草稿、已批准、已删除。所以我不使用临时目录，只是改变图像表中的状态。

# android - Banner admod 搞砸了 listview

> ID：11206010
> 
> 赞同：0
> 
> 时间：2012-06-26T11:07:47.483
> 
> 标签：android, listview, imageview, admob

我正在尝试生成一个列表视图。

生成列表视图时，一切正常：每个项目的高度都很好。但是，一旦加载横幅，第一项的高度就会变得奇怪。

对于列表视图中的每个项目，我将渲染一个使 Imageview 不可见的图像（view.INVISIBLE）；

我可以避免这种情况吗？

![在此处输入图像描述](../Images/85bf3cc8856adb51b271ed84a27fd19a.png)

这是列表视图的 xml 项

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" 
    android:background="@drawable/round_box"
    >

     <ImageView
         android:id="@+id/immagine_logo"
         android:layout_width="wrap_content"
         android:layout_height="fill_parent"
         android:layout_alignParentLeft="true"
         android:gravity="center"
         android:layout_centerVertical="true"
         android:paddingLeft="5dip"
         android:paddingRight="5dip"
         android:adjustViewBounds="true"
         android:maxWidth="60dip"
         android:background="@android:color/transparent"
         android:src="@drawable/circle_logo"

          />

     <TextView

         android:id="@+id/Ingre_item_ingrediente"
         android:layout_width="wrap_content"
         android:layout_height="fill_parent"
         android:layout_alignParentTop="true"
         android:gravity="center_horizontal|center_vertical"
         android:layout_centerVertical="true"
         android:text="nome di una ricetta miolto lunga che deve per forza andare a capa"
         android:layout_toRightOf="@+id/immagine_logo"
         android:layout_toLeftOf="@+id/Ingre_item_grammi"
         android:paddingTop="10dip"
         android:paddingBottom="10dip"
         android:textSize="18dip"
         android:textColor="#FF000000"
         android:textStyle="bold"
         />

    <TextView 

        android:id="@+id/Ingre_item_grammi"
        android:layout_height="match_parent"
        android:layout_width="wrap_content"
        android:singleLine="true"
         android:gravity="center"
          android:layout_centerVertical="true"
        android:layout_marginLeft="5dip"
        android:paddingRight="5dip"
        android:text="400.75 gr."
        android:layout_alignParentRight="true"
         android:paddingTop="10dip"
         android:paddingBottom="10dip"
        android:textSize="18dip"
         android:textColor="#FF000000"
    /> 

     <TextView 

        android:id="@+id/id_alimento"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:visibility="gone"
    />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:33:39.613

确保 ListView 的属性`android:layout_height`和`android:layout_width`设置为`fill_parent`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:10:37.780

与其将可见性设置为 View.INVISIBLE，不如将其设置为 View.GONE

# javascript - 从 svg 外部的按钮单击 d3 中的节点

> ID：11206015
> 
> 赞同：22
> 
> 时间：2012-06-26T11:07:57.263
> 
> 标签：javascript, d3.js, force-layout

我使用 D3 创建了一个力有向图，并在普通 div 中显示了节点的 ID。我需要在 div 中突出显示其 id 已被单击的节点。我已经搜索了节点的 id 并使用普通的 javascript 尝试单击它，但它不起作用。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-06-26T16:02:25.440

更一般地说，如果用户与元素*A*交互，您如何选择（然后修改）相关元素*B*？有很多方法可以实现这一点，但这里有三种常见的方法。

## 选项 1\. 对于一对一映射，按 id 选择。

如果 A 中的每个元素在*B*中都有一个对应的元素，则可以通过 id 选择相关元素*B*，例如`d3.select("#foo")`选择 a `<div id="foo">`。

这种方法需要使用[selection.attr为](https://github.com/mbostock/d3/wiki/Selections#wiki-attr)*B*中的每个元素设置一个 id 。如果您的数据具有固有的唯一标识符，则这是最简单的，例如or ：`d.name``d.id`

```
b.attr("id", function(d) { return d.id; }); 
```

接下来，要启用单击元素*A*以更改*B*中相应元素的填充颜色，请使用[selection.on](https://github.com/mbostock/d3/wiki/Selections#wiki-on)注册一个单击侦听器，然后按 id 选择：

```
a.on("click", function(d) {
  d3.select("#" + d.id).style("fill", "red");
}); 
```

标识符必须是*唯一且[有效](http://www.w3.org/TR/html4/types.html#type-id)*的。例如，id 必须以字母而不是数字开头，并且不能包含空格。如果您的数据还没有唯一标识符，您可以从索引中生成一个，例如

```
b.attr("id", function(d, i) { return "b-" + i; }); 
```

稍后，假设元素*A*的顺序相同，

```
a.on("click", function(d, i) {
  d3.select("#b-" + i).style("fill", "red");
}); 
```

您还可以[遍历数据数组](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach)以生成唯一标识符。

## 选项 2。对于一对多映射，按类选择。

选择类“foo”的元素，例如 a `<div class="foo">`，say `d3.selectAll(".foo")`。*如果A*中的任何元素对应于*B*中的多个元素，请使用此方法。例如，如果您有一个显示学生之间关系的力导向图，您可以根据每个学生的年份为节点着色，然后使用图例来切换每年的可见性。

与前面的方法一样，您可以使用[selection.attr](https://github.com/mbostock/d3/wiki/Selections#wiki-attr)来设置“类”属性。在这种情况下，类属性不是唯一的，因此它可能来自`d.type`数据中的一个属性：

```
b.attr("class", function(d) { return d.type; }) 
```

如果您对数据的不同分类属性有多个图例，您还可以更具体并为类名添加前缀。继续学年示例：

```
b.attr("class", function(d) { return "year-" + d.year; }) 
```

设置类属性将替换任何先前设置的类，因此如果要将多个类应用于元素，则需要在设置“类”属性时将它们用空格连接在一起。

接下来，要启用单击元素*A*以更改*B*中相应元素的填充颜色，请使用 selection.on 注册一个单击侦听器，然后按类选择：

```
a.on("click", function(d) {
  d3.selectAll("." + d.type).style("fill", "red");
}); 
```

请注意，我们在这里使用[selectAll](https://github.com/mbostock/d3/wiki/Selections#wiki-d3_selectAll)而不是[select](https://github.com/mbostock/d3/wiki/Selections#wiki-d3_select)；那是因为我们要选择所有对应的元素，而不仅仅是第一个。同样，您需要确保 class 属性是[valid](https://stackoverflow.com/questions/448981/what-characters-are-valid-in-css-class-names)。

## 选项 3。对于其他所有内容，请按数据选择和过滤。

前两种方法生成 id 和 classes，以便浏览器可以索引*B*中的元素以进行有效选择。对于少量元素，或者需要更通用的选择方法时，您可以省略指定“id”或“class”属性，只需通过[selection.filter](https://github.com/mbostock/d3/wiki/Selections#wiki-filter)手动选择。

让我们称与*A* `da`中的每个元素关联的基准，以及与*B* `db`中的每个元素关联的基准。现在我们要做的就是定义一个在`da`匹配时返回 true 的表达式`db`。例如，如果我们想按类型过滤：

```
a.on("click", function(da) {
  b.filter(function(db) { return da.type == db.type; }).style("fill", "red");
}); 
```

前两个选项是首选，但有时手动过滤很有用，例如当您有一个范围滑块并希望根据定量变量进行过滤时。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T13:44:31.230

# php - PHP - 从数组中找到确切的值或上面的值

> ID：11206019
> 
> 赞同：0
> 
> 时间：2012-06-26T11:08:17.967
> 
> 标签：php, arrays, max

我有一个包含有效数字的嵌套数组 => 数据：-

```
$validData = array(array(1 => 'one data'),array(5 => '5 data'),array(15 => '15 data'),array(30 => 'thirty data')); 
```

假设我有一个查询值 $query = 14;

我想先检查是否有 14，如果没有，则转到最近的选项 ABOVE。

我一直在用 max、array_keys 和 range 做最近的项目。但是，出于某种原因，匹配或超越我看不到最好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:18:42.740

假设数组已排序

```
$query = 14;
$arrayThatWeWant = null;
foreach ( $validData as $index=>$vdSubRay)
{
    $ak = key($vsSubRay);
    if ( $ak == $query )
    {
        $arrayThatWeWant = $vdSubRay;
        break;
    }
    else if ( $ak > $query )
    {
        $arrayThatWeWant = $validData[$index-1];
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:21:24.070

```
// in case your array keys are already sorted
$prevKey = key(current($validData));
foreach($validData as $data) {
    $currentKey = key($data);
    if ($currentKey == $query) {
        // found !
        echo $currentKey;
        break;
    }
    else if ($currentKey > $query) {
        echo $currentKey;    
        break;
    }
    $prevKey = $currentKey;
} 
```

# php - 通过 AJAX 和 PHP 解析用户输入

> ID：11206020
> 
> 赞同：-2
> 
> 时间：2012-06-26T11:08:18.623
> 
> 标签：php, xml, ajax

现在，这不是“请为我调试我的 codez”问题。我已经花了......我什至不想考虑尝试解决这个问题需要多长时间。

我的问题是我正在执行这个 php 页面，理想情况下，它检查一个字符串并将其转换为更安全的格式，因为这个页面用于存储帐户的密码。

下面这段代码的目标是在每个字符处重复对字符串进行切片，然后将其评估为我的密钥。它对整个字符串长度执行此操作。返回给我的是“0”。我不知道系统是如何获得这个值的。

也许我使用错误的 substr() 函数？此外，我对解析字符串的完全不同的方法持开放态度，例如使用 RegExp。谢谢你们的帮助，伙计们！

代码：

```
<?php
error_reporting(0);
#region Initial
$accstr = "apple";
$accn = "scourge";
//Key
$a[0] = "#"; //These variables are for conversion; indexes of this array correspond to those
$a[1] = "!"; //of the other array ($ind)
$a[2] = "@";
$a[3] = "%$";
$a[4] = "%";
$a[5] = "!@";
$a[6] = "&*";
$a[7] = "^";
$a[8] = "##";
$a[9] = "&^";
$a[10] = "&";
$a[11] = "%~";
$a[12] = "!%";
$a[13] = "!$";
$a[14] = "*#";
$a[15] = "#*";
$a[16] = "~";
$a[17] = "~&";
$a[18] = "``";
$a[19] = "/^";
$a[20] = "%`";
$a[21] = "~~";
$a[22] = "`~";
$a[23] = "%%";
$a[24] = "~!";
$a[25] = "~#";
$a[26] = "``#";
$a[27] = "``!";
$a[28] = "``@";
$a[29] = "``%$";
$a[30] = "``%";
$a[31] = "``!@";
$a[32] = "``&*";
$a[33] = "``^";
$a[34] = "``##";
$a[35] = "``&^";
$a[36] = "&&^#";
$a[37] = "~@!";
$a[38] = "!@&@";
$a[39] = "%~~$";
$a[40] = "%`%";
$a[41] = "!^~@";
$a[42] = "&#$*";
$a[43] = "^**&";
$a[44] = "#%#`";
$a[45] = "&``!@^";
$a[46] = "&**~&";
$a[47] = "%|~";
$a[48] = "!-|~%";
$a[49] = "!$~";
$a[50] = "*/#";
$a[51] = "#%*";
$a[52] = "|~";

$ind[0] = "a";//These are used to tell what's being looked at in the string
$ind[1] = "b";
$ind[2] = "c";
$ind[3] = "d";
$ind[4] = "e";
$ind[5] = "f";
$ind[6] = "g";
$ind[7] = "h";
$ind[8] = "i";
$ind[9] = "j";
$ind[10] = "k";
$ind[11] = "l";
$ind[12] = "m";
$ind[13] = "n";
$ind[14] = "o";
$ind[15] = "p";
$ind[16] = "q";
$ind[17] = "r";
$ind[18] = "s";
$ind[19] = "t";
$ind[20] = "u";
$ind[21] = "v";
$ind[22] = "w";
$ind[23] = "x";
$ind[24] = "y";
$ind[25] = "z";
$ind[26] = "0";
$ind[27] = "1";
$ind[28] = "2";
$ind[29] = "3";
$ind[30] = "4";
$ind[31] = "5";
$ind[32] = "6";
$ind[33] = "7";
$ind[34] = "8";
$ind[35] = "9";
$ind[36] = "~";
$ind[37] = "!";
$ind[38] = "@";
$ind[39] = "#";
$ind[40] = "$";
$ind[41] = "%";
$ind[42] = "^";
$ind[43] = "&";
$ind[44] = "*";
$ind[45] = "(";
$ind[46] = ")";
$ind[47] = "_";
$ind[48] = "+";
$ind[49] = "`";
$ind[50] = "-";
$ind[51] = "=";
$ind[52] = "?";

$xml = new DOMDocument('1.0', 'utf-8');
$xml->formatOutput = true;
$xml->preserveWhiteSpace = false;
$xml->load('pwDB.xml');
$finln = "";
#endregion

#region Create coded password
$pwlen = strlen($accstr);
for($cnter=1;$cnter<=$pwlen;$cnter++)
    {
        $a1 = substr($accstr,$cnter,1);
        for($cnter2=1;$cnter2<=52;$cnter2++)
            {
                if($a1==$ind[$cnter2])
                    {
                        $finln += $a[$cnter2];
                    }
            }
    }
#endregion

#region Send finln
$newpw = $xml->createElement($accn);
$newpw->appendChild($xml->createElement('password', $finln));
$xml->getElementsByTagName('cache')->item(0)->appendChild($newpw);
file_put_contents("pwDB.xml",$xml->saveXML());
print $finln;
#endregion
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T19:48:42.810

所以典型的密码散列是一种方式——如果你需要两种方式，那么你谈论的是不同的加密。

通常为了散列你会做下面的事情，虽然我敦促不要逐字逐句而是自己研究一些，所以oyu了解你在做什么以及所涉及的概念：

```
$xml = new DOMDocument('1.0', 'utf-8');
$xml->formatOutput = true;
$xml->preserveWhiteSpace = false;
$xml->load('pwDB.xml');

$account = 'someuser';
$password = 'passw0rd';

// your salt can be a constant that you never change, or can be user specific
// if you make it user specific then you need to store it as well as the password
$salt = "1j0i90@$t%";

$hash = hash('sha256', $password . $salt);

$acct = $xml->createElement($account);
$pw = $xml->createElement('password', $salt);
$acct->appendChild($pw);

$xml->appendChild($acct);

file_put_contents("pwDB.xml",$xml->saveXML()); 
```

然后比较像登录一样的凭据，你会这样做：

```
 $xml = new DOMDocument('1.0', 'utf-8');
    $xml->formatOutput = true;
    $xml->preserveWhiteSpace = false;
    $xml->load('pwDB.xml');

    $account = 'someuser';
    $password = 'passw0rd';
    $salt = "1j0i90@$t%";

    $hash = hash('sha256', $password . $salt);
    $xpath = new DOMXPath($xml);

   // look up by account name - assuming these are unique
   $accountNodes = $xpath->query('//'.$account);
   if($accountNodes->length) {
      $accountNode = $accountNodes->item(0);
      $pwNodes = $xpath->query('//password', $accountNode);
      if($pwNodes->length) {
         $pwNode = $pwNodes->item(0);
         if($hash === (string) $pwNode) {
             // authentication OK!
         } 
      }
   } 
```

# mysql - 高级 mysql 分组问题 - 脑筋急转弯

> ID：11206021
> 
> 赞同：1
> 
> 时间：2012-06-26T11:08:26.337
> 
> 标签：mysql, sum, grouping

去年我一直在大量使用 stackoverflow - 一个优秀的来源，拥有伟大的贡献者。现在是我请求帮助的时候了。

设置正常：Orders、OrderArticles 和 Articles

我想获得去年销售的文章总量，*但仅限于最好的 5 周*。

没关系 WEEK 函数和 UNIXTIME 等等等等 - 我已经涵盖了。我的问题是是否可以不使用存储过程或函数。

我为每周和文章的摘要创建了一个子查询，并按总和降序排列结果。现在 - 我只需要将查询限制为 5。很简单，但我还必须过滤 ArticleID 上的结果，但是因为我在子查询中，所以我无权访问外部 ArticleID，它也无济于事加入结果 - 为时已晚 ;-)

语法（很难理解没有实际的 sql，对吧......？）

```
SELECT a.ID, [more fields], omg.total
FROM Articles AS a
LEFT JOIN
(
    SELECT weeklytotals.articleID, weeklytotals.total
    FROM
    (
        SELECT SUM(ra.quantity) AS total, ra.articleID AS articleID
        FROM OrderArticles ra
        INNER JOIN Orders r
            ON ra.orderID = r.ID
        WHERE r.timeCreated >= UNIX_TIMESTAMP('2011-06-30')
        GROUP BY ra.articleID, WEEK(FROM_UNIXTIME(r.timeCreated))
        ORDER BY SUM(ra.quantity) DESC
    ) AS weeklytotals
    WHERE omg.articleID = a.ID --<-- THIS IS NOT WORKING BUT NECESSARY!
    LIMIT 0, 5
) AS omg
ON omg.articleID = a.ID
WHERE a.isEnabled = 1 --more WHERE-thingys 
```

这将返回前 5 篇文章并将它们与正确的文章联系起来。耶。

我省略了 SUM 函数（它可以进入 omg-SELECT）。

你明白吗？我明白我想要什么吗？是的，我们当然愿意！

提前谢谢。

编辑：条件已经改变 - 这让我的生活更轻松，但我仍然想知道是否有解决问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:59:57.493

如果您要求`omg`子查询使用`a`表中的数据，请将其放入`SELECT`部分而不是`FROM`部分。使用 mysql 文档中的术语，您希望[相关子查询](http://dev.mysql.com/doc/refman/5.6/en/correlated-subqueries.html)的结果在外部结果集中显示为[标量操作数。](http://dev.mysql.com/doc/refman/5.6/en/scalar-subqueries.html)

您写到对总和感兴趣，即每篇文章只有一个数字，尽管您`SUM`从示例查询中省略了。我的方法依赖于这个总和，如果你真的需要最好的五周中的每一周都有不同的值，那么可能会以一种糟糕的方式打破。

```
SELECT a.ID, [more fields], IFNULL(SUM(
    (
        SELECT SUM(ra.quantity) AS total
        FROM OrderArticles ra
        INNER JOIN Orders r
           ON ra.orderID = r.ID
        WHERE ra.articleID = a.ID -- <-- reference a.ID here
          AND r.timeCreated >= UNIX_TIMESTAMP('2011-06-30')
        GROUP BY WEEK(FROM_UNIXTIME(r.timeCreated))
        ORDER BY SUM(ra.quantity) DESC
        LIMIT 0, 5
    )), 0) AS total
FROM Articles AS a
WHERE a.isEnabled = 1 --more WHERE-thingys 
GROUP BY a.ID 
```

我不是在这里说任何关于性能的事情。以这种方式放置子查询，它将针对结果集中的每一行执行。因此，如果您有大量文章，实际使用可能会太慢。但如果发生这种情况，我怀疑存储过程或类似的技巧会更好。

*编辑：*我发现我原来的建议，它使用嵌套两层深的子查询，不允许访问最里面的子查询来使用最外面的列。但是[在 sqlfiddle 上玩弄这个](http://sqlfiddle.com/#!2/ee79d/11)我还发现可以安全地将子查询的结果传递给 sum，从而避免一级嵌套。因此，上面的代码实际上已经由 MySQL 服务器检查并执行，因此应该可以按预期工作。

# javascript - 对象不支持此属性或方法“同位素”

> ID：11206022
> 
> 赞同：1
> 
> 时间：2012-06-26T11:08:27.473
> 
> 标签：javascript

我的网站有问题。我在 IE8/9 上收到网页错误：

> 对象不支持此属性或方法“同位素”行：47 字符：3 代码：0

这是代码：

```
/*-----------------------------------------------------------------------------------
/*
/* Custom JS
 /*
-----------------------------------------------------------------------------------*/

/* Start Document */
jQuery(document).ready(function($) {

/*----------------------------------------------------*/
/*  Responsive Menu
/*----------------------------------------------------*/

      // Create the dropdown bases
      $("<select />").appendTo("#navigation");

      // Create default option "Go to..."
      $("<option />", {
         "selected": "selected",
         "value"   : "",
         "text"    : "Menu"
      }).appendTo("#navigation select");

      // Populate dropdowns with the first menu items
      $("#navigation li a").each(function() {
        var el = $(this);
        $("<option />", {
            "value"   : el.attr("href"),
            "text"    : el.text()
        }).appendTo("#navigation select");
      });

      //make responsive dropdown menu actually work     
        $("#navigation select").change(function() {
            window.location = $(this).find("option:selected").val();
        });

/*----------------------------------------------------*/
/*  Isotope Portfolio Filter
/*----------------------------------------------------*/

  $(function() {
    var $container = $('#portfolio-wrapper');
    // initialize Isotope
    $container.isotope({
      // options...
      resizable: false, // disable normal resizing
      // set columnWidth to a percentage of container width
      masonry: { columnWidth: $container.width() / 12 }
    });

    // update columnWidth on window resize
    $(window).smartresize(function(){
      $container.isotope({
      // update columnWidth to a percentage of container width
      masonry: { columnWidth: $container.width() / 12 }
      });
    });

      $container.isotope({
        itemSelector : '.portfolio-item'
      });

      var $optionSets = $('#filters .option-set'),
          $optionLinks = $optionSets.find('a');

      $optionLinks.click(function(){
        var $this = $(this);
        // don't proceed if already selected
        if ( $this.hasClass('selected') ) {
          return false;
        }
        var $optionSet = $this.parents('.option-set');
        $optionSet.find('.selected').removeClass('selected');
        $this.addClass('selected');

        // make option object dynamically, i.e. { filter: '.my-filter-class' }
        var options = {},
            key = $optionSet.attr('data-option-key'),
            value = $this.attr('data-option-value');
        // parse 'false' as false boolean
        value = value === 'false' ? false : value;
        options[ key ] = value;
        if ( key === 'layoutMode' && typeof changeLayoutMode === 'function' ) {
          // changes in layout modes need extra logic
          changeLayoutMode( $this, options )
        } else {
          // otherwise, apply new options
          $container.isotope( options );
        }

        return false;
      });
});

/*----------------------------------------------------*/
/*  Back To Top Button
/*----------------------------------------------------*/
    var pxShow = 300;//height on which the button will show
    var fadeInTime = 400;//how slow/fast you want the button to show
    var fadeOutTime = 400;//how slow/fast you want the button to hide
    var scrollSpeed = 400;//how slow/fast you want the button to scroll to top. can be a value, 'slow', 'normal' or 'fast'

    jQuery(window).scroll(function(){
      if(jQuery(window).scrollTop() >= pxShow){
        jQuery("#backtotop").fadeIn(fadeInTime);
      }else{
        jQuery("#backtotop").fadeOut(fadeOutTime);
      }
    });

    jQuery('#backtotop a').click(function(){
      jQuery('html, body').animate({scrollTop:0}, scrollSpeed); 
      return false; 
    }); 

/* End Document */
})(); 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:25:20.073

您需要定义同位素函数。只有这样你才能调用它。我不认为 isotope() 是一个内置函数。

在下面的示例中，我在 h1 元素上添加了一个函数 test() 然后调用它。

```
$('h1')
[<h1>​Hello​&lt;/h1>​]

var a = $('h1')

a.test = function() {console.log(this);}

a.test()
[<h1>​Hello</h1>​] 
```

# android - 决定支持哪个 Android API 版本时的因素（内部应用程序）

> ID：11206023
> 
> 赞同：0
> 
> 时间：2012-06-26T11:08:31.830
> 
> 标签：android, api, android-4.0-ice-cream-sandwich, android-2.2-froyo, android-2.3-gingerbread

（让我首先说 a）我很感激这是问我应该使用哪个版本的错误地方，特别是因为我的问题仅与本地相关，并且 b）我很惊讶这还没有完成，但它好像没有！）

在工作中，我的任务是编写一个供内部使用的 Android 应用程序，主要由非技术用户使用。我们有一个现有的应用程序（很糟糕）和一堆运行 Froyo 和 Gingerbread 的设备（目前都是 7 英寸平板电脑，但这不一定总是如此），制造商没有计划发布 ICS 更新。一方面，过时硬件会很糟糕（尽管我们可以选择不受支持的基于 ICS 的 3rd 方 ROM），但另一方面，当 ICS*似乎*提供一系列闪亮的新功能。

是否有一个很好的比较参考来查看 API 级别之间的主要区别？另外，考虑到 4.0 的冰河采用率，我现在还考虑放弃 2.x 是不是疯了？最重要的是，我在决定支持哪个 API 时**应该考虑哪些因素，而我在上面还没有提到？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:22:14.317

您必须问自己的第一个问题是：您想使用 ICS 中的哪个功能在 2.2/2.3 中不可用？如果答案是“我不知道”，那么您绝对应该坚持使用 2.2。如果您想集成更高版本的某些功能，您可以选择使用[SupportPackage 。](http://developer.android.com/tools/extras/support-library.html)

如果您知道要使用的特定功能，请检查它是否在 SupportPackage 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:23:58.760

您可以使用此 [http://developer.android.com/sdk/api_diff/9/changes.html](http://developer.android.com/sdk/api_diff/9/changes.html) 来了解差异。我个人认为，对于手机应用程序，新应用程序的支持必须从 2.2 开始。对于平板电脑 3.0 及以后版本，因为 3.0 及以后版本实际上是平板电脑操作系统，而 2.2、2.3 是手机操作系统。如果您需要更高端的功能（不是所有功能，而是片段等重要功能），您可以使用较低版本的支持包。但是对于手机我会坚持使用 2.2 和平板电脑，因为 Android 是为平板电脑定制的 3 以后，我通常会这样做，除非你有 2.2、2.3 平板电脑作为目标。

# javascript - jquery 就绪处理程序从未执行

> ID：11206025
> 
> 赞同：1
> 
> 时间：2012-06-26T11:08:39.153
> 
> 标签：javascript, jquery

我有一个关于节日的网站，每个节日都有一个单独的页面。通常，一个节日的页面应该是[这样](http://www.festivals.ie/festival/show/1)的，但是[其中一个节日页面](http://www.festivals.ie/festival/show/30)有一些问题。这些包括：

*   标题中的 twitter 和 facebook 按钮不加载
*   右上角的谷歌地图无法加载
*   节日阵容布局不正确，没有出现蓝色背景

经过一番调试，我发现这是因为 jQuery 就绪处理程序没有被执行。我所指的处理程序位于从页面第 3252 行开始的行脚本中。

我猜这没有被执行的原因是因为在页面加载过程中较早发生了 JavaScript 错误，但我在 Firebug 中看不到任何错误证据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:18:40.483

查看代码后，我在第 2673 行看到以下内容：

```
<div id="video"><iframe width="560" height="315" src="http://www.youtube.com/embed/A71ID1Hlw70" frameborder="0" ahttp://www.festivals.ie/festival/edit/30#llowfullscreen></iframhttp://www.festivals.ie/festival/edit/30#e> 
```

感谢 Chrome 的自动语法突出显示（并在 2673 处中断）用于识别这个未关闭的 iframe。

# jquery - 如果用户单击具有 css cssselected 的 tr，如何移除焦点？

> ID：11206032
> 
> 赞同：1
> 
> 时间：2012-06-26T11:09:02.247
> 
> 标签：jquery, html

在我的 html 表中，我有两行，第一行没有 css，但第二行有 cssselected 到 tr。如果用户单击带有 cssselected 的 tr 或 td，我必须移除焦点。

```
 <table id="myTable">           
            <tr>
                <td>
                    cell4
                </td>
                <td>
                    cell5
                </td>
                <td>
                    cell6
                </td>
            </tr>
            <tr class="cssselected">
                <td class="cssselected">
                    cell 12
                </td>
                <td class="cssselected">
                    cell8
                </td>
                <td class="cssselected" rowspan="2">
                    cell8
                </td>
            </tr>
            <tr class="cssselected">
                <td class="cssselected">
                    cell9
                </td>
                <td class="cssselected">
                    cell10
                </td>
            </tr>
        </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:13:42.243

如果删除焦点意味着`cssselected`从该行中删除（我这样说是因为焦点是您与输入标签一起使用的术语）：

```
$('tr').click(function() {
    // If the clicked tr has the class cssselected
    if($(this).hasClass('cssselected')){
        // Remove the class cssselected 
        // from all the descendant td and from the clicked tr
        $('td', this).andSelf().removeClass('cssselected');
    }
}); 
```

在这里摆弄[http://jsfiddle.net/97HVf/](http://jsfiddle.net/97HVf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:14:34.587

这是 JQuery 解决方案：-

```
$(document).ready(function(){

    $('.cssselected').click(function(){
        $(this).removeClass('cssselected');
    });
}); 
```

# list - sencha 中列表的换行符

> ID：11206034
> 
> 赞同：1
> 
> 时间：2012-06-26T11:09:11.440
> 
> 标签：list, sencha-touch-2

我正在创建一个列表，我正在向列表中添加元素。现在，如果我在列表中添加一个没有换行符的长句子的文本，它就会超出范围。

![第三个元素，这是添加到列表后的样子](../Images/841adc19bfa18ebe3f1dafe07c6a9119.png)

![那是应该添加到列表中的实际文本](../Images/40fe280205e60fd5e9407f405f7a0828.png)

我想要的是，如果这个词太长，我会明确地打破它，以便它出现在下一行。我不确定该怎么做。

```
{
            cls:'notesList',
            xtype:'list',
            id:'notesList',
            height:300,
            whitespace:pre-wrap,
            allowDeselect: false,
            style:'background-color: rgba(0,140,153,1.0);',
            itemTpl:'<table><tr><td width="3%"><img src="resources/images/user.png" width="20em" height="20em" /></td>' +
                '<td width = "60%" style="font-weight:bold;text-align:left;">{Author}</td>' +
                '<td width = "40%" style="font-weight:bold;text-align: right">{Name}</td></tr>'+
                '<tr><td colspan=3>{Text}</td></tr></table>'
        }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:48:47.880

嘿@Knush 将此说明添加到您的元素中，`white-space:pre-wrap`您可以具体`width`到`input text`.

例如，

进入`style`

```
....
items: [
{
    text: '<p class="your_class" face="Arial" size="2" style="text-align:center;white-space:pre-wrap;" >lkjsdlksdj ewiouwe iouiuio</p>',
    id: 'ce',
    handler: function() {
        stuff()
    },
},
 ]
... 
```

或者来自 CSS 类

```
.your_label {
   width: 60px;
   white-space:pre-wrap;
} 
```

我希望这有帮助。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:10:36.983

我曾经遇到过这个问题，我通过在文本容器中添加一些 CSS 来解决它。

使用列表中的 itemCls 配置将 CSS 类添加到列表项。

然后将以下内容添加到 .css 中的这个 CSS 类中

```
word-wrap: break-word;
overflow: hidden;
max-width: 247px;
width: 247px; 
```

希望这可以帮助

# android - 从 SQLite 浏览器创建的数据库在设备“Android”中不起作用

> ID：11206041
> 
> 赞同：0
> 
> 时间：2012-06-26T11:09:45.800
> 
> 标签：android

我的问题是我在 sqlite 数据库浏览器中创建了一个设备，它在模拟器中工作正常。但是当尝试我的应用程序到我的设备时，它会导致强制关闭。当我删除数据库并使用 eclipse 创建一个新数据库时，即使在我的设备中也可以正常工作。但是在数据库中插入大量数据 1 一个 1 真的让我很害怕，所以有人知道一个同样适用于设备的 sqlite 数据库浏览器吗？？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:22:30.840

查看[本教程](http://www.helloandroid.com/tutorials/how-have-default-database)以在应用程序中使用数据库文件。

请记住一件事，它只会将您的数据库文件复制到应用程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:32:18.743

如果您想在您的应用程序之外创建一个预加载的数据库并稍后在您的应用程序中使用它，您必须将它放在您的`assets`目录中，然后在您的应用程序第一次启动时将其复制到您的应用程序存储空间。

这是因为作为一项安全措施，在真实（无根）设备上，除了您自己的应用程序之外，什么都不能访问该应用程序数据库目录（以及某些其他数据库目录）。

有一个很好的教程，用于在应用程序之外创建/复制您自己的数据库并将其复制到应用程序数据库[目录](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:16:59.560

在真实设备上，您无权访问 sqlite 数据库。这就是为什么您无法像在模拟器上那样浏览数据库的原因。请参阅此解决方法。 [查看android数据库、表和数据的工具](https://stackoverflow.com/questions/2149438/tool-to-see-android-database-tables-and-data)

# jquery - 来自jsp页面错误的fomat数据json？

> ID：11206046
> 
> 赞同：0
> 
> 时间：2012-06-26T11:09:50.323
> 
> 标签：jquery, jsp

**源 JSP：**

```
String r_payment_code = request.getParameter("paymentcode");
String sql = "SELECT hd.invoice_id, tt.payment_code"
          +" FROM dbt_invoice hd, dbt_payment tt"
          +" WHERE hd.payment_id = tt.payment_id"
          +" AND hd.period_id = 147"
          +" AND tt.period_id = 147"
          +" AND tt.payment_code LIKE 'NDH"+ r_payment_code +"%' and rownum <=5";
RecordSet sData = DBUtil.executeQuery(db_name, sql);
JSONObject json      = new JSONObject();
JSONArray jsonarr = new JSONArray();
JSONObject jsonobj;
int i = 0;
String[] arrPaymentCode = new String[sData.RecordCount];
while(sData.next()){
    jsonobj = new JSONObject();
    jsonobj.put("invoice_id", sData.getString("invoice_id"));
    jsonobj.put("payment_code", sData.getString("payment_code"));
    jsonarr.add(jsonobj);
}
json.put("SRC_PAYMENCODE", jsonarr);
response.setContentType("application/json");
out.println(json); 
```

**从 JSP 页面输出：**

[{"invoice_id":"6384","payment_code":"NDH000228015"},{"invoice_id":"6385","payment_code":"NDH000230254"},{"invoice_id":"6386","payment_code": "NDH000228302"},{"invoice_id":"6387","payment_code":"NDH000228303"},{"invoice_id":"6388","payment_code":"NDH000228311"}]

**从 HTML 调用**

```
$("#txtPaymentCode").autocomplete(
                $.ajax({
                    type: "POST",
                    url: "../../common/script/jquery/autocomplete/srcData.jsp",
                    data :{paymentcode : inputString},
                    dataType: "json",
                    success: function(data){
                        data = JSON.parse(data);
                        alert(data)
                    },
                    error:function (xhr, ajaxOptions, thrownError){
                        alert(xhr.status);
                        alert(thrownError);
                        document.getElementById("dvShowSearchPhone").innerHTML = thrownError;
                    }
                })
        ); 
```

无效的 JSON：[{"invoice_id":"6384","payment_code":"NDH000228015"},{"invoice_id":"6385","payment_code":"NDH000230254"},{"invoice_id":"6386"," payment_code":"NDH000228302"},{"invoice_id":"6387","payment_code":"NDH000228303"},{"invoice_id":"6388","payment_code":"NDH000228311"}]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:22:42.477

不完全确定问题是什么，但我猜。
如果您尝试自动完成支付代码，当您在 javascript 回调处理程序中尝试 data.payment_code 时会发生什么（即

```
success: function(data){
data = JSON.parse(data);
alert(data.payment_code)
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:49:12.013

不确定，只是猜测

尝试用分号结束您的 ajax 调用 >> }) 应该是 });

并尝试添加

```
 contentType: "application/json; charset=utf-8", 
```

# android - 如何在android中显示外部数据库内容并将其分配给局部变量

> ID：11206050
> 
> 赞同：0
> 
> 时间：2012-06-26T11:10:02.430
> 
> 标签：android

数据库字段是

**电话号码** || **数**
999999999 || 1
777777777 || 2

我创建了 phone_no 活动，这样如果我输入电话号码，它应该根据下面的 phone_no 显示计数

我的代码如下

```
{
HttpClient httpclient = new DefaultHttpClient();   
HttpPost httppost = new HttpPost("http://10.0.2.2/phoneno.php");

String pho = input.getText().toString();

List<NameValuePair> nameValuePairsphedit = new ArrayList<NameValuePair>(11);

nameValuePairsphedit.add(new BasicNameValuePair("phone_no",pho));

try {
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairsphedit));
Log.d("myapp", "works till here. 2");

 try {
         HttpResponse response = httpclient.execute(httppost);
         Log.d("myapp", "response " + response.getEntity());
         String result = EntityUtils.toString(response.getEntity());
         Log.d("","Response :"+result);
         JSONObject json=new JSONObject(result);

         count1 = json.getString("count");//count1 is local variable

     } 
catch (Exception e) 
{
     e.printStackTrace();
} 
                    } 
```

而我的phoneno.php文件如下

```
<?php

$conn= mysql_connect('localhost','root','');
if (!$conn)
  {
  die('Could not connect: ' . mysql_error());
  }

    mysql_select_db('test',$conn);

    $phone_no = mysql_escape_string($_REQUEST['phone_no']);

    $sql="SELECT * FROM meh WHERE phone_no='$phone_no'";
    $result = mysql_query($sql) or die(mysql_error());
    if (!$result)
    {
        die('There was a problem executing the query');
    }
    else
    {

    $rs=mysql_fetch_array($result);

    $arrInfo = array('phone_no' => $rs['phone_no'] , 'count' => $rs['count']);

    echo json_encode($arrInfo);

    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:33:55.960

使用下面的方法。您正在尝试直接阅读 response.getEntity() 。您需要先从该实体获取 InputStream，然后从该 InputStream 读取服务器流内容。

```
public static JSONObject read(String url)  {

    InputStream is = null;
    String result = "";
    JSONObject jsonObject = null;
    // http post
    try {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(url);
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("phone_no",pho));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();

    } catch (Exception e) {
        e.printStackTrace();
    }

    // convert response to string
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result = sb.toString();
    } catch (Exception e) {
        e.printStackTrace();
    }

    //convert the read response to JSONObject
    try {
        System.out.println("Read data from server :" + result+":");
        jsonObject = new JSONObject(result);
    } catch (JSONException e) {
        e.printStackTrace();
    }

    return jsonObject;
} 
```

# java - 返回时Arraylist为空

> ID：11206057
> 
> 赞同：1
> 
> 时间：2012-06-26T11:10:24.800
> 
> 标签：java, android, collections

我正在开发一个android项目，我遇到了一个问题，问题是：

> 当我返回它时，Arraylist 为空。

这是我的java代码：

```
 ArrayList<ArrayList<Object>> container = new ArrayList<ArrayList<Object>>();
            ArrayList<Object> itemRow = new ArrayList<Object>();
            JSONObject jsonObj =  new JSONObject(result);
            JSONArray allElements = jsonObj.getJSONArray("Table");
            Log.i("allElements", "" + allElements);
            for (int i = 0; i < allElements.length(); i++) {
                itemRow.add(allElements.getJSONObject(i).getString("ParentName").toString());
                itemRow.add(allElements.getJSONObject(i).getString("ParentEmailID").toString());
                itemRow.add(allElements.getJSONObject(i).getString("ParentContact").toString());
                itemRow.add(allElements.getJSONObject(i).getString("ParentAddress").toString());
                itemRow.add(allElements.getJSONObject(i).getString("ParentProfilePictureName").toString());
                itemRow.add(allElements.getJSONObject(i).getString("StudentName").toString());
                Log.i("itemRow", "itemRow at index: " + i + ", " + itemRow);
                container.add(((i*2)/2), itemRow);
                itemRow.clear();
            }

            return container; 
```

在这段代码中，我有两个 Arraylist 一个用于包含所有元素，另一个用于存储单行元素。这些 Arraylist 是从 JSONArray 加载的，一切正常，我可以从项目行（采用单行的 Arraylist）打印数据并存储到主 Arraylist（容器）中。

但是当我返回这个 Arraylist（容器）并在 logcat 中打印时，它会显示空的 Arraylist

```
[[], [], [], [], []]. 
```

我不明白为什么会发生这种情况，请帮我解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T11:11:37.467

因为你做了，它仍然指的是添加到的对象`container`

```
itemRow.clear(); 
```

您可能想重新初始化它

```
itemRow = new ArrayList<Object>(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T11:12:59.933

停止清除列表，它不再为空：

```
itemRow.clear(); 
```

您应该在每次迭代时创建一个新列表。将以下代码行放入 for 循环中：

```
ArrayList<Object> itemRow = new ArrayList<Object>(); 
```

请记住，Java 传递对对象的引用。因此容器列表包含对您添加到其中的列表的引用。它不会复制列表。因此，您当前的代码将多个对同一列表对象的引用添加到容器列表中，并且每次添加时都会清除该列表。因此，它在循环结束时包含对同一个空列表的 N 个引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:13:01.913

您的评估具有误导性/不正确，ArrayList**不**为空，实际上包含五个元素。

数组列表的每个*元素*都是一个空列表。这是因为循环中的最后两行：

```
container.add(((i*2)/2), itemRow);
itemRow.clear(); 
```

如您所料，第一行将 itemRow 添加到容器中。下一行调用`clear()`您刚刚添加的行 - 因此在您的方法退出时*容器中的所有内容都将始终为空*。

看起来这个问题是由于您试图在`itemRow`整个方法中重用相同的对象引起的，但这是行不通的。要解决您的问题，请将

```
ArrayList<Object> itemRow = new ArrayList<Object>(); 
```

循环内的构造函数（作为第一行），然后`clear()`在最后停止调用它。现在，每个 JSON 元素都将为其创建一个单独的行列表，一旦您将这些添加到其中，`container`它们将保持其内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T11:14:49.953

您认为容器实际上复制每个数组列表本身的假设是不正确的。它指的是那些已经创建的而不是每个列表的副本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T11:17:03.680

试试这个

```
container.add(((i*2)/2), itemRow.clone()); 
```

因为它关于 JAVA 引用...

# sql-server - mvc3 中的健康监控

> ID：11206060
> 
> 赞同：1
> 
> 时间：2012-06-26T11:10:31.717
> 
> 标签：sql-server, asp.net-mvc-3

我想在 mvc3 应用程序中进行健康监测。

我正在使用事件查看器。但我想保存这些事件和错误以存储到 Sql server 数据库中。

```
<healthMonitoring enabled="true"  heartbeatInterval="10">
       <providers>
    <clear/>
    <add name="EventLogProvider" type="System.Web.Management.EventLogWebEventProvider,System.Web,Version=4.0.0.0,Culture=neutral,PublicKeyToken=b03f5f7f11d50a3a" />

    <add connectionStringName="LocalSqlServer" maxEventDetailsLength="1073741823"
        buffer="false" bufferMode="Notification" name="SqlWebEventProviderlane"
        type="System.Web.Management.SqlWebEventProvider,System.Web,Version=4.0.0.0,Culture=neutral,PublicKeyToken=b03f5f7f11d50a3a" />

  </providers>

  <profiles>
    <add name="Default" minInstances="1" maxLimit="Infinite" minInterval="00:01:00"
                custom="" />
            <add name="Critical" minInstances="1" maxLimit="Infinite" minInterval="00:00:00"
                custom="" />
  </profiles>

  <rules>
    <clear/>

    <add name="All Errors Default" eventName="All Events" provider="EventLogProvider"
        profile="Default" minInstances="1" maxLimit="Infinite" minInterval="00:01:00"
        custom="" />
    <add name="Failure Audits Default" eventName="Failure Audits"
        provider="EventLogProvider" profile="Default" minInstances="1"
        maxLimit="Infinite" minInterval="00:01:00" custom="" />
  </rules>

  <eventMappings>
    <clear/>
    <add name="All Events" type="System.Web.Management.WebBaseEvent,System.Web,Version=4.0.0.0,Culture=neutral,PublicKeyToken=b03f5f7f11d50a3a"
          startEventCode="0" endEventCode="2147483647" />
          <add name="All Errors" type="System.Web.Management.WebBaseErrorEvent,System.Web,Version=4.0.0.0,Culture=neutral,PublicKeyToken=b03f5f7f11d50a3a"
        startEventCode="0" endEventCode="2147483647" />
         </eventMappings>

</healthMonitoring> 
```

这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T06:42:06.147

在规则部分，您必须引用名为“SqlWebEventProviderlane”的提供程序：

```
<add name="All Errors Default" eventName="All Events" provider="SqlWebEventProviderlane" 
    profile="Default" minInstances="1" maxLimit="Infinite" minInterval="00:01:00" 
    custom="" /> 
```

然后，您必须在该部分中提供一个名为“LocalSqlServer”的连接字符串，它指向您的数据库。

```
<connectionStrings>
  <add name="LocalSqlServer" connectionString="data source=serverName;initial catalog=yourDataBase;..."/>
</connectionStrings> 
```

您必须使用工具 aspnet_regsql 准备数据库。

# sql-server-2008 - 无法使用递归 CTE 找到匹配的子记录

> ID：11206073
> 
> 赞同：0
> 
> 时间：2012-06-26T11:11:23.367
> 
> 标签：sql-server-2008, recursive-cte

我有下表@t：

```
ParentId   SkuName  ChildId
   P1         X1      C1
   C1         X2      C2
   C2         X3      C2 
```

如果我通过 ParentId = P1，则所需的输出是 x3

即停止条件是匹配记录的最后一行并获取该记录的 sku 名称

排。如果没有匹配的行，则返回 null

我的尝试（虽然没有工作）

```
DECLARE @t TABLE (ParentId Varchar(100), Name VARCHAR(20), ChildId Varchar(100))
INSERT INTO @t(ParentId, Name, ChildId)
  SELECT 'P1', 'X1', 'C1' UNION ALL
  SELECT 'C1', 'X2', 'C2' UNION ALL
  SELECT 'C2', 'X3', 'C2' 

Declare @ParentId Varchar(10) = 'P1'

;With CTE As
(
    Select 
        Rn = ROW_NUMBER() Over(Order By (Select 1))
        ,ParentId
        , Name
        , ChildId
    From @t Where ParentId = @ParentId

    Union All

    Select 
        Rn + 1
        ,pc.ParentId as Parents     
        ,pc.Name
        ,pc.ChildId
    FROM @t pc
    JOIN CTE gp on pc.Childid = gp.Parentid
)

Select *
From CTE 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:25:21.430

问题出`JOIN`在您的第二个`UNION`查询中。你正在加入`pc.Childid = gp.Parentid`。你应该加入`pc.ParentId = gp.Childid`。

此外，由于您的数据的子项和父项具有相同的值，因此您最终将获得无限递归，除非您指定递归应该在`ParentId`等于`Childid`. ( `WHERE gp.ParentId <> gp.Childid`)

这是您正在寻找的结果吗？

```
DECLARE @t TABLE (ParentId VARCHAR(100), Name VARCHAR(20), ChildId VARCHAR(100))
INSERT INTO @t(ParentId, Name, ChildId)
SELECT 'P1', 'X1', 'C1' UNION ALL
SELECT 'C1', 'X2', 'C2' UNION ALL
SELECT 'C2', 'X3', 'C2' 

DECLARE @ParentId VARCHAR(10) = 'P1'

;With CTE As
(
    SELECT 
        Rn = 1
        ,ParentId
        ,Name
        ,ChildId
    FROM @t WHERE ParentId = @ParentId

    UNION All

    SELECT 
        Rn + 1
        ,pc.ParentId as Parents     
        ,pc.Name
        ,pc.ChildId
    FROM @t pc
    JOIN CTE gp 
        on pc.ParentId = gp.Childid
    WHERE gp.ParentId <> gp.Childid
)

SELECT TOP 1 *
FROM CTE
ORDER BY Rn DESC
OPTION (MAXRECURSION 0); 
```

# android - 拉刷新示例，错误

> ID：11206079
> 
> 赞同：0
> 
> 时间：2012-06-26T11:11:57.363
> 
> 标签：android

我正在尝试将“拉动刷新”小部件添加到我的代码中，我只是在使用这个示例：

[https://github.com/johannilsson/android-pulltorefresh](https://github.com/johannilsson/android-pulltorefresh)

所以，我创建了 pullToRefresh 包，用 eclipse 生成了一个 jar 文件并将其导入到其他包中，我得到了这个错误：

```
06-26 10:55:05.482: E/AndroidRuntime(508): FATAL EXCEPTION: main 
06-26 10:55:05.482: E/AndroidRuntime(508): java.lang.RuntimeException: Unable to start activity ComponentInfo{example.pull/example.pull.PullToRefreshExampleActivity}: android.view.InflateException: Binary XML file line #10: Error inflating class com.pull.widget.pullToRefresh
06-26 10:55:05.482: E/AndroidRuntime(508):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1815)
06-26 10:55:05.482: E/AndroidRuntime(508):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1831)
06-26 10:55:05.482: E/AndroidRuntime(508):  at android.app.ActivityThread.access$500(ActivityThread.java:122)
06-26 10:55:05.482: E/AndroidRuntime(508):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1024)
06-26 10:55:05.482: E/AndroidRuntime(508):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-26 10:55:05.482: E/AndroidRuntime(508):  at android.os.Looper.loop(Looper.java:132)
06-26 10:55:05.482: E/AndroidRuntime(508):  at android.app.ActivityThread.main(ActivityThread.java:4123)
06-26 10:55:05.482: E/AndroidRuntime(508):  at java.lang.reflect.Method.invokeNative(Native Method)
06-26 10:55:05.482: E/AndroidRuntime(508):  at java.lang.reflect.Method.invoke(Method.java:491)
06-26 10:55:05.482: E/AndroidRuntime(508):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
06-26 10:55:05.482: E/AndroidRuntime(508):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
06-26 10:55:05.482: E/AndroidRuntime(508):  at dalvik.system.NativeStart.main(Native Method)
06-26 10:55:05.482: E/AndroidRuntime(508): Caused by: android.view.InflateException: Binary XML file line #10: Error inflating class com.pull.widget.pullToRefresh
06-26 10:55:05.482: E/AndroidRuntime(508):  at android.view.LayoutInflater.createView(LayoutInflater.java:596)
06-26 10:55:05.482: E/AndroidRuntime(508):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:671)
06-26 10:55:05.482: E/AndroidRuntime(508):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:724)
06-26 10:55:05.482: E/AndroidRuntime(508):  at android.view.LayoutInflater.inflate(LayoutInflater.java:479)
06-26 10:55:05.482: E/AndroidRuntime(508):  at android.view.LayoutInflater.inflate(LayoutInflater.java:391)
06-26 10:55:05.482: E/AndroidRuntime(508):  at android.view.LayoutInflater.inflate(LayoutInflater.java:347)
06-26 10:55:05.482: E/AndroidRuntime(508):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:223)
06-26 10:55:05.482: E/AndroidRuntime(508):  at android.app.Activity.setContentView(Activity.java:1786)
06-26 10:55:05.482: E/AndroidRuntime(508):  at example.pull.PullToRefreshExampleActivity.onCreate(PullToRefreshExampleActivity.java:21)
06-26 10:55:05.482: E/AndroidRuntime(508):  at android.app.Activity.performCreate(Activity.java:4397)
06-26 10:55:05.482: E/AndroidRuntime(508):  at  android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
06-26 10:55:05.482: E/AndroidRuntime(508):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1779)
06-26 10:55:05.482: E/AndroidRuntime(508):  ... 11 more
06-26 10:55:05.482: E/AndroidRuntime(508): Caused by: java.lang.reflect.InvocationTargetException
06-26 10:55:05.482: E/AndroidRuntime(508):  at java.lang.reflect.Constructor.constructNative(Native Method)
06-26 10:55:05.482: E/AndroidRuntime(508):  at java.lang.reflect.Constructor.newInstance(Constructor.java:416)
06-26 10:55:05.482: E/AndroidRuntime(508):  at android.view.LayoutInflater.createView(LayoutInflater.java:576)
06-26 10:55:05.482: E/AndroidRuntime(508):  ... 22 more
06-26 10:55:05.482: E/AndroidRuntime(508): Caused by: android.content.res.Resources$NotFoundException: File pulltorefresh from xml type layout resource ID #0x7f030000
06-26 10:55:05.482: E/AndroidRuntime(508):  at android.content.res.Resources.loadXmlResourceParser(Resources.java:2135)
06-26 10:55:05.482: E/AndroidRuntime(508):  at android.content.res.Resources.loadXmlResourceParser(Resources.java:2090)
06-26 10:55:05.482: E/AndroidRuntime(508):  at android.content.res.Resources.getLayout(Resources.java:849)
06-26 10:55:05.482: E/AndroidRuntime(508):  at android.view.LayoutInflater.inflate(LayoutInflater.java:389)
06-26 10:55:05.482: E/AndroidRuntime(508):  at com.pull.widget.pullToRefresh.init(pullToRefresh.java:92)
06-26 10:55:05.482: E/AndroidRuntime(508):  at com.pull.widget.pullToRefresh.<init>(pullToRefresh.java:66)
06-26 10:55:05.482: E/AndroidRuntime(508):  ... 25 more
06-26 10:55:05.482: E/AndroidRuntime(508): Caused by: java.io.FileNotFoundException: pulltorefresh
06-26 10:55:05.482: E/AndroidRuntime(508):  at android.content.res.AssetManager.openXmlAssetNative(Native Method)
06-26 10:55:05.482: E/AndroidRuntime(508):  at android.content.res.AssetManager.openXmlBlockAsset(AssetManager.java:487)
06-26 10:55:05.482: E/AndroidRuntime(508):  at android.content.res.Resources.loadXmlResourceParser(Resources.java:2117)
06-26 10:55:05.482: E/AndroidRuntime(508):  ... 30 more 
```

我认为更重要的是：-

```
06-26 10:55:05.482: E/AndroidRuntime(508):  at com.pull.widget.pullToRefresh.init(pullToRefresh.java:92) 
```

这条线是：

```
mRefreshViewText = (TextView) mRefreshView.findViewById(R.id.pull_to_refresh_text); 
```

在“pullToRefresh.java”中创建的包。

从包装上看，会发生什么？

提前致谢

# c# - NServiceBus 异常和订阅者无法读取队列

> ID：11206081
> 
> 赞同：2
> 
> 时间：2012-06-26T11:12:08.077
> 
> 标签：c#, nservicebus, ravendb

我一直在为此奋斗了几天，但没有运气。我按照入门指南中的指南设置了一个 NServiceBus 项目。我的 MVC 站点成功地将消息推送到我的队列中，但订阅者从未读过它们。大约一分钟后没有错误消息，控制台上会弹出以下信息：

2012-06-26 13:05:43,648 [1] FATAL NServiceBus.Hosting.GenericHost [(null)] <(null)> - Autofac.Core.DependencyResolutionException：调用构造函数'Void .ctor(Raven .Client.IDocumentStore)' 类型为'RavenTimeoutPersistence'。---> System.Net.WebException：操作在 Raven.Client.Connection.HttpJsonRequest.ReadStringInternal(Func`1 getResponse) 的 Raven.Client.Connection.HttpJsonRequest 的 System.Net.HttpWebRequest.GetResponse() 处超时.ReadResponseString() 在 Raven.Client.Connection.HttpJsonRequest.ReadResponseJson()

我可以通过门户网站成功连接到 Raven，并且可以看到我的队列列在那里 - 所以我不知道为什么 NServiceBus 无法读取队列中的消息。我重新安装了 MSMQ，重新启动了机器，重新安装了 NServiceBus - 似乎没有任何效果。

有谁知道这里出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T15:05:29.727

这原来是卡巴斯基反病毒软件的另一个受害者。即使防火墙设置为“允许所有网络连接”，将其关闭也可以解决问题。

# java - android开发打开文件txt并返回内容

> ID：11206082
> 
> 赞同：-2
> 
> 时间：2012-06-26T11:12:10.453
> 
> 标签：java, android, file-io

在互联网上搜索，找不到有效的代码。如何获取 txt 文档的内容并将其返回。

假设我在（ src/my.proovi.namespace/data.txt ）中有一个 txt 文件，并且我创建了一个名为 refresh_all_data(); 的方法。我希望在哪里收集和返回数据。在主要活动方法中，我只需要将内容获取为（ String content = refresh_all_data(); ）就是这样。

应该很容易，但只是找不到有效的答案。非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:30:49.350

将文件放在`/assets`项目的文件夹中，然后您可以[`InputStream`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStream.html)通过以下方式打开它`AssetManager`：

```
InputStream in = getAssets().open("data.txt"); 
```

然后，您可以从文件中读取行并[`StringBuilder`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)使用 a将它们添加到[`Reader`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/Reader.html)：

```
//The buffered reader has a method readLine() that reads an entire line from the file, InputStreamReader is a reader that reads from a stream.
BufferedReader reader = new BufferedReader(new InputStreamReader(in));
//This is the StringBuilder that we will add the lines to:
StringBuilder sb = new StringBuilder(512);
String line;
//While we can read a line, append it to the StringBuilder:
while((line = reader.readLine()) != null){
    sb.append(line);
}
//Close the stream:
reader.close();
//and return the result:
return sb.toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:21:43.630

在一个函数中实现以下代码并在任何你想要的地方调用它。

```
try{
      // Open the file that is the first 
      // command line parameter
      FileInputStream fstream = new FileInputStream("textfile.txt");
      // Get the object of DataInputStream
      DataInputStream in = new DataInputStream(fstream);
      BufferedReader br = new BufferedReader(new InputStreamReader(in));
      String strLine;
      //Read File Line By Line
      while ((strLine = br.readLine()) != null)   {
      // Print the content on the console
      System.out.println (strLine);
      }
      //Close the input stream
      in.close();
        }catch (Exception e){//Catch exception if any
      System.err.println("Error: " + e.getMessage());
      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T20:17:29.590

好的，我得到了什么。

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    String test = null;
    try {
        test = refresh_all_data();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    TextView day1Label = new TextView(this);  
    day1Label.setText(test);
    setContentView(day1Label);

} 
```

还有 refresh_all_data(); 方法。

```
private String refresh_all_data() throws IOException
{ 

    InputStream in = getAssets().open("data.txt");
    //The buffered reader has a method readLine() that reads an entire line from the file, InputStreamReader is a reader that reads from a stream.
    BufferedReader reader = new BufferedReader(new InputStreamReader(in));
    //This is the StringBuilder that we will add the lines to:
    StringBuilder sb = new StringBuilder(512);
    String line;
    //While we can read a line, append it to the StringBuilder:
    while((line = reader.readLine()) != null){
        sb.append(line);
    }
    //Close the stream:
    reader.close();
    //and return the result:
    return sb.toString();
} 
```

感谢分配给 Jave。

# java - 制作多个maven镜像仓库

> ID：11206083
> 
> 赞同：0
> 
> 时间：2012-06-26T11:12:20.003
> 
> 标签：java, maven-3, artifactory

我已经建立了一个工件并在其中制作了 3 个存储库，即**A,B 和 C**。现在在我的 settings.xml 文件中，我将 A 配置为所有内容的镜像：

```
<mirror>
      <id>myRepo</id>
      <name>remote repo</name>
      <url>http://<url>:<port>/artifactory/A</url>
      <mirrorOf>*</mirrorOf> 
</mirror> 
```

现在每次构建时，maven 只查找 A 下的工件，而不是 B 或 C 下的工件。那么有没有办法确保 B 和 C 也与 A 一起被查找？我尝试为镜像保留多个条目，但因为每个条目都具有相同的`<mirrorOf>`值，所以它不会被 Maven 拾取。我遇到了这个：[Maven doc to mirror](http://people.apache.org/~ltheussl/maven-stage-site/guides/mini/guide-mirror-settings.html)并发现，“*当与存储库管理器一起使用时，单个镜像可以处理多个存储库。* ”由于我已经在使用具有 3 个存储库的工件，所以我不知道如何在那里配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T14:48:59.953

您应该定义[一个虚拟存储库](http://wiki.jfrog.org/confluence/display/RTF/Virtual+Repositories)，它将解析为 A、B 和 C，并将您的镜像设置配置到此存储库。正确设置设置文件的最简单方法就是在 Artifactory[中生成它。](http://wiki.jfrog.org/confluence/display/RTF/Configuring+Artifacts+Resolution)

PS 请注意[使用](http://wiki.jfrog.org/confluence/display/RTF/Configuring+Artifacts+Resolution#ConfiguringArtifactsResolution-AdditionalMirror-anySetup)mirror-any 时的注意事项。

# simple-html-dom - 简单 HTML DOM 错误处理的问题

> ID：11206084
> 
> 赞同：1
> 
> 时间：2012-06-26T11:12:21.857
> 
> 标签：simple-html-dom

我有我传递给函数 doScrape() 的网站列表，该函数创建 SimpleHtmlDom 对象并加载作为参数传递给它的 url。

但是当**刮板**正在进行时，无法加载一个 url 并且 PHP 抛出以下异常

> 警告：file_get_contents（[http://www.somesite.com](http://www.somesite.com)）[function.file-get-contents]：打开流失败：HTTP 请求失败！第 850 行 F:\xampp\htdocs\scraping\scraper\simple_html_dom.php 中的 HTTP/1.0 500 内部服务器错误

由于这个错误，整个**刮刀**停止工作。如何处理此异常并保持**刮板**运行事件出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:15:21.200

你可以这样做：

```
$data = @file_get_contents(http://www.somesite.com);
if($data){
    //Ok
}else{
    //Error
} 
```

# r - Rcpp 中的高效子集（相当于 R“which”命令）

> ID：11206085
> 
> 赞同：4
> 
> 时间：2012-06-26T11:12:25.393
> 
> 标签：r, if-statement, rcpp, syntactic-sugar

在 Rcpp 中，有各种“Rcpp 糖”命令允许在代码中进行很好的矢量化操作。在下面的代码中，我移动了一个数据框，将其分解为向量，然后使用“ifelse”和“sum”糖命令计算 v 在 x 等于 y 或 y+1 的行上的平均值。一切似乎都正常工作。

**只是想知道是否有比这更简洁的方法 - 例如，等效于“which”命令，它给出满足特定条件的索引点？**在犰狳中似乎有一个可用作“find”的工具，但这意味着使用不兼容的对象类型（你不能同时使用“find”和“ifelse”）。

在同一主题上，**是否可以让“ifelse”接受复合逻辑条件？**例如，在下面的例子中，indic 的定义是由两个“ifelse”命令组成的，显然它是一个更简洁的命令。任何想法将不胜感激。

期待听到您的回复:)

```
require(Rcpp)
require(inline)

set.seed(42)
df = data.frame(x = rpois(1000,3), y = rpois(1000,3), v = rnorm(1000),
                stringsAsFactors=FALSE)

myfunc1 = cxxfunction(
    signature(DF = "data.frame"),
    plugin = "Rcpp",
    body = '
            using namespace Rcpp;
            DataFrame df(DF);
            IntegerVector x = df["x"];
            IntegerVector y = df["y"];
            NumericVector v = df["v"];

            LogicalVector indic = ifelse(x==y,true,ifelse(x==y+1,true,false));
            double subsum = sum(ifelse(indic,v,0));
            int subsize = sum(indic);
            double mn = ((subsize>0) ? subsum/subsize : 0.0);

            return(Rcpp::List::create(_["subsize"] = subsize, 
                                      _["submean"] = mn
                                     ));
            '
            )

myfunc1(df)

### OUTPUT:
# 
# $subsize
# [1] 300
# 
# $submean
# [1] 0.1091555
# 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T08:10:45.723

Rcpp (>= 0.10.0) 实现**|** 两个逻辑糖表达式之间的运算符。所以你可以这样做：

```
require( Rcpp )

cppFunction( code = '
List subsum( IntegerVector x, IntegerVector y, NumericVector v){
    using namespace Rcpp ;

    LogicalVector indic  = (x==y) | (x==y+1) ;
    int subsize          = sum(indic) ;
    double submean       = subsize == 0 ? 0.0 : sum(ifelse(indic,v,0)) / subsize ;

    return List::create( _["subsize"] = subsize, _["submean"] = submean ) ;
}
' )
subsum( rpois(1000,3), rpois(1000,3), rnorm(1000) )
# $subsize
# [1] 320
# 
# $submean
# [1] -0.05708866 
```

# php - php，从数组中获取最接近当前的时间？

> ID：11206086
> 
> 赞同：1
> 
> 时间：2012-06-26T11:12:26.070
> 
> 标签：php, arrays, sorting, time, foreach

> **可能重复：**
> [如何从日期数组中获取最近的日期？](https://stackoverflow.com/questions/11012891/how-to-get-most-recent-date-from-an-array-of-dates)

我有一个时间表，它是一个数组：

```
array(
    '01.01.2012|11:00',
    '01.01.2012|14:30',
    '01.01.2012|16:24', // example match
    '01.01.2012|17:20',
    '01.01.2012|17:43',
    '02.01.2012|10:20',
    '02.01.2012|12:30',
); // etc. 
```

我想要一个 Cron 作业，它将检查当前日期/时间并与数组中的日期/时间进行比较。首先我检查日期是否匹配，没问题。但是然后我需要从该数组中找到并显示当前时间之后的最早时间。如果同一日期内没有合适的时间，则显示下一个日期的最早时间。

例如：让我们采用上面的数组和当前日期/时间`01.01.2012|14:45`

*   日期是匹配的，所以我们继续
*   下次从数组 16:24，但是如何用 PHP 找到呢？如果当前时间高于数组中同一日期的任何时间，那么从下一个日期获取最早的时间？

显然，为了获得正确日期的字符串，我使用“foreach”和“if”，它返回正常。但那我该如何度过时光呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:04:20.303

[转换为时间戳](http://php.net/strtotime)，[排序](http://php.net/sort)并与[当前时间](http://php.net/time)进行迭代比较。

```
$ts = array_map(
        create_function('$a','return strtotime(str_replace("|", " ", $a));'), 
        $dates);
$len= count($ts); $now = time();
sort($ts); 
for($i=0;$i<$len && (!($now<$ts[$i]));$i++);
echo date("d.m.Y|H:i",$ts[$i]); 
```

感兴趣的功能

*   [数组映射](http://php.net/array_map)
*   [创建函数](http://php.net/create_function)
*   [str_replace](http://php.net/str_replace)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:31:42.693

为您循环的日期时间格式编写一个比较函数，直到找到大于或等于您的参考日期的日期。

```
function compareDateTime($dt1, $dt2) {
   sscanf($dt1, "%d.%d.%d|%d:%d", $day, $month, $year, $hour, $minute);
   $comp1 = $year . $month . $day . $hour . $minute;
   sscanf($dt1, "%d.%d.%d|%d:%d", $day, $month, $year, $hour, $minute);
   $comp2 = $year . $month . $day . $hour . $minute;

   return $comp1 - $comp2;
} 
```

当 $dt1 < $dt2 时返回 -ve，当 $dt1 > $dt2 时返回 +ve

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:25:24.207

您可以考虑将这些日期转换为 UNIX 时间戳：

```
function getUnixTimestamp($string) {
    list($date, $time) = explode('|', $string);
    return strtotime("$date $time");
} 
```

然后你可以使用类似的东西：

```
$array = array(); // from example
$timestamps = array_map('getUnixTimestamp', $array);
$current = time();

// create an array mapping timestamp to string
$keyedArray = array_combine($timestamps, $array);

// sort by timestamp
ksort($keyedArray);

foreach ($keyedArray as $timestamp => $string) {
    if ($timestamp > $current) {
        // this is the first timestamp after current time
    }
} 
```

您可能需要对 进行一些额外的检查`$timestamp`，确保它是在同一天或第二天，但使用时间图比较比字符串匹配更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T11:20:06.823

如果将这些转换为 UNIX 时间戳，则可以对它们进行数字排序、循环并获取大于当前时间戳的第一项。

# python - Emacs Python 自动补全

> ID：11206088
> 
> 赞同：4
> 
> 时间：2012-06-26T11:12:43.117
> 
> 标签：python, django, ubuntu, emacs

编辑：

我刚刚意识到我正在使用 0.2 版的 auto-complete.el。我想我需要使用 auto-complete.el 0.1 版。我可以从哪里下载它？我只能在谷歌上找到较新的版本。

* * *

我正在尝试在 Emacs 中为 Python 设置自动完成功能。

我使用的是 Ubuntu LTS 版本，我安装了 Python 和 Emacs。

这是我的 .emacs 文件：

```
(setq-default indent-tabs-mode nil) ; always replace tabs with spaces
(setq-default tab-width 4) ; set tab width to 4 for all buffers

(add-to-list 'load-path "~/.emacs.d/vendor")
(progn (cd "~/.emacs.d/vendor")
       (normal-top-level-add-subdirs-to-load-path))

(require 'python)
(require 'auto-complete)
(require 'yasnippet)

(autoload 'python-mode "python-mode" "Python Mode." t)
(add-to-list 'auto-mode-alist '("\\.py\\'" . python-mode))
(add-to-list 'interpreter-mode-alist '("python" . python-mode))

;; Initialize Pymacs                                                                                           
(autoload 'pymacs-apply "pymacs")
(autoload 'pymacs-call "pymacs")
(autoload 'pymacs-eval "pymacs" nil t)
(autoload 'pymacs-exec "pymacs" nil t)
(autoload 'pymacs-load "pymacs" nil t)
;; Initialize Rope                                                                                             
(pymacs-load "ropemacs" "rope-")
(setq ropemacs-enable-autoimport t)

;; Initialize Yasnippet                                                                                        
;Don't map TAB to yasnippet                                                                                    
;In fact, set it to something we'll never use because                                                          
;we'll only ever trigger it indirectly.                                                                        
(setq yas/trigger-key (kbd "C-c <kp-multiply>"))
(yas/initialize)
(yas/load-directory "~/.emacs.d/snippets")

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                                         
;;; Auto-completion                                                                                            
;;;  Integrates:                                                                                               
;;;   1) Rope                                                                                                  
;;;   2) Yasnippet                                                                                             
;;;   all with AutoComplete.el                                                                                 
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                                         
(defun prefix-list-elements (list prefix)
  (let (value)
    (nreverse
     (dolist (element list value)
      (setq value (cons (format "%s%s" prefix element) value))))))
(defvar ac-source-rope
  '((candidates
     . (lambda ()
         (prefix-list-elements (rope-completions) ac-target))))
  "Source for Rope")
(defun ac-python-find ()
  "Python `ac-find-function'."
  (require 'thingatpt)
  (let ((symbol (car-safe (bounds-of-thing-at-point 'symbol))))
    (if (null symbol)
        (if (string= "." (buffer-substring (- (point) 1) (point)))
            (point)
          nil)
      symbol)))
(defun ac-python-candidate ()
  "Python `ac-candidates-function'"
  (let (candidates)
    (dolist (source ac-sources)
      (if (symbolp source)
          (setq source (symbol-value source)))
      (let* ((ac-limit (or (cdr-safe (assq 'limit source)) ac-limit))
             (requires (cdr-safe (assq 'requires source)))
             cand)
        (if (or (null requires)
                (>= (length ac-target) requires))
            (setq cand
                  (delq nil
                        (mapcar (lambda (candidate)
                                  (propertize candidate 'source source))
                                (funcall (cdr (assq 'candidates source)))))))
        (if (and (> ac-limit 1)
                 (> (length cand) ac-limit))
            (setcdr (nthcdr (1- ac-limit) cand) nil))
        (setq candidates (append candidates cand))))
    (delete-dups candidates)))
(add-hook 'python-mode-hook
          (lambda ()
                 (auto-complete-mode 1)
                 (set (make-local-variable 'ac-sources)
                      (append ac-sources '(ac-source-rope) '(ac-source-yasnippet)))
                 (set (make-local-variable 'ac-find-function) 'ac-python-find)
                 (set (make-local-variable 'ac-candidate-function) 'ac-python-candidate)
                 (set (make-local-variable 'ac-auto-start) nil)))

;;Ryan's python specific tab completion                                                                        
(defun ryan-python-tab ()
  ; Try the following:                                                                                         
  ; 1) Do a yasnippet expansion                                                                                
  ; 2) Do a Rope code completion                                                                               
  ; 3) Do an indent                                                                                            
  (interactive)
  (if (eql (ac-start) 0)
      (indent-for-tab-command)))

(defadvice ac-start (before advice-turn-on-auto-start activate)
  (set (make-local-variable 'ac-auto-start) t))
(defadvice ac-cleanup (after advice-turn-off-auto-start activate)
  (set (make-local-variable 'ac-auto-start) nil))

(define-key python-mode-map "\t" 'ryan-python-tab)
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;                                         
;;; End Auto Completion                                                                                        
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;; 
```

在 .emacs.d 目录中，我有：

```
pymacs.el
init_python.el
vendor/
snippets/ 
```

在 .emacs.d/vendor 我已经安装了 pymacs、yasnippet 和 auto-complete，所以它看起来像这样：

```
auto-complete.el
pinard-Pymacs-4be2c15/
yasnippet-0.5.9/ 
```

当我像这样启动emacs时：

```
emacs -nw manage.py 
```

我收到此错误消息：

```
![enter image description here][1] 
```

任何想法如何让它工作？

我已经在谷歌上搜索了很长时间，但我找不到任何明确的说明如何让它们一起工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-01T07:33:00.747

不要使用rope/pymacs 来完成Emacs 的python，我建议使用[https://github.com/tkf/emacs-jedi](https://github.com/tkf/emacs-jedi)，这真的很棒。

您可以`jedi`使用 el-get ( [https://github.com/dimitri/el-get](https://github.com/dimitri/el-get) ) 进行安装，它会为您安装必要的依赖项。

我的 .emacs 绝地配置：

```
;;; jedi completion
;;; see https://github.com/tkf/emacs-jedi

;; jedi dependency: deferred
(add-to-list 'load-path (expand-file-name
                         "~/.emacs.d/el-get/deferred"))
;; jedi dependency: deferred
(add-to-list 'load-path (expand-file-name
                         "~/.emacs.d/el-get/ctable"))
;; jedi dependency: epc
(add-to-list 'load-path (expand-file-name
                         "~/.emacs.d/el-get/epc"))
(add-to-list 'load-path (expand-file-name
                         "~/.emacs.d/el-get/jedi"))
(require 'jedi)
(setq jedi:server-args
      '("--sys-path" "/usr/lib/python2.7/"
        "--sys-path" "/usr/lib/python2.7/site-packages"))

(setq jedi:setup-keys t) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T09:10:46.180

不要认为报告的错误与 python 模式有关。也许做一个 grep，搜索发出该错误的程序。WRT 选项“-nw”，图形，图像支持可能会丢失或损坏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T13:09:39.950

据我所知，python 模式随 Emacs 一起提供，所以你甚至不需要做任何事情来激活它。我确实在 python 中使用`autocomplete`and `yasnippet`，它似乎对我来说很好用。这是我的相关位`.emacs`

```
(add-to-list 'load-path
              "~/.emacs.d/plugins/yasnippet")

...

(require 'yasnippet)
(yas/global-mode 1)

...
(require 'auto-complete-config)
...
(add-hook 'python-mode-hook 'auto-complete-mode) 
```

我从[这个 github repo](https://github.com/capitaomorte/yasnippet)获得了我的 yasnippet 版本，并从[开发人员的网站](http://cx4a.org/software/auto-complete/)（链接到[EmacsWiki](http://emacswiki.org/emacs/AutoComplete)）获得了我的自动完成版本。

# java - 如何使用 id sqlite 获取一行？

> ID：11206090
> 
> 赞同：5
> 
> 时间：2012-06-26T11:12:45.547
> 
> 标签：java, android, sqlite, android-sqlite

这是一个简单的！然而，我错过了一些东西。请帮帮我。在这里，我试图通过 id 获取值，但无法这样做。即使更改了 id 的值，它也会返回相同的值。

```
 db = openOrCreateDatabase("DBSOURCE", 0, null);
    Cursor cursorc = db.rawQuery("SELECT * FROM LIST WHERE ID="+id+"", null);
    cursorc.moveToFirst();

    int NameID = cursorc.getColumnIndex("Name");
    int mobilenumberID = cursorc.getColumnIndex("MoblieNumber");

    edName.setText(cursorc.getString(NameID));
    edMobNum.setText(cursorc.getString(mobilenumberID));

    cursorc.close();

    db.close(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T11:23:40.807

1-或更好地使用参数化语句

```
String query = "SELECT COUNT(*) FROM " + tableName + " WHERE columnName = ?";
cursor = db.rawQuery(query, new String[] {comment}); 
```

2 - 使用 if 条件 c.moveToFirst() 或 c.getCount() >0 或 (!c.isAfterLast())

```
if (c.moveToFirst()){ 
    do{ 
       //if you not need the loop you can remove that
       id = c.getInt(c.getColumnIndex("_id"));
   }
 while(cursor.moveToNext());
}c.close(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T14:03:44.880

id 列标题实际上是“ID”吗？或者是一个设置为“_id”的变量（Android 数据库中主键的常用列名）？

如果是后者，则您的查询不正确，因为您使用“ID”作为文字列名。尝试将其更改为：

```
Cursor cursorc = db.rawQuery("SELECT * FROM LIST WHERE " + ID + " = " + id, null); 
```

甚至这个：

```
Cursor cursorc = db.rawQuery("SELECT * FROM LIST WHERE _id = " + id, null); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T11:24:51.773

尝试使用

```
Cursor cursorc = db.rawQuery("select * from list where ID = ?", new String[] {id+""}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-26T11:40:08.513

试试这种方式

```
 Suppose long id=5;
    String[] col=new String[]{KEY_ROWID,KEY_NAME,KEY_ADDRESS};  // your column which data u want to retrive if id is same 
    Cursor c=db.query(DATABASE_TABLE, col, KEY_ROWID+"="+id,null, null, null, null);
    if(c!=null){
    c.moveToFirst();
    // get data here which u want accroding to ur requirement 
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T11:24:34.647

尝试这个

```
Cursor cursorc = db.rawQuery("SELECT * FROM LIST WHERE ID='"+id+"'", null); 
```

# java - 查找使用内存分析工具 (MAT) 锁定对象的线程

> ID：11206091
> 
> 赞同：4
> 
> 时间：2012-06-26T11:12:51.027
> 
> 标签：java, deadlock

我正在通过使用 MAT 查看 .hprof 文件来诊断 Java 死锁情况。我可以清楚地看到两个线程被阻塞等待在哈希图上同步。我找不到的是哪个线程*确实*锁定了哈希图。

谁能照亮我无知的黑暗？

M。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T11:51:10.130

您可以对堆转储进行线程堆栈分析，这将概述每个线程中分配的对象。

要访问此信息，请在内存分析器工具中单击 Java Basic -> Thread Overview。

以下链接中提到了调试转储文件的步骤。

请参考以下链接：

[http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.mat.ui.help%2Ftasks%2Fanalyzingthreads.html](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.mat.ui.help%2Ftasks%2Fanalyzingthreads.html)

# c++ - 使用 cmake 实用程序编译时出错

> ID：11206092
> 
> 赞同：1
> 
> 时间：2012-06-26T11:12:52.503
> 
> 标签：c++, gcc, xerces, undefined-reference

我正在尝试使用以下 make 命令编译我的 gcc 代码。操作系统：Redhat，gcc - 4.1
但我收到如下错误：rmtrain@lintrni130 $ /usr/local/bin/make all

```
[ 21%] Built target GCVCore
Linking CXX executable CFE
/usr/bin/ld: warning: libicui18n.so.36, needed by ../../Generic/icu/lib/libicuio.so, not found (try using -rpath or -rpath-link)
/usr/bin/ld: warning: libxalanMsg.so.110, needed by ../../Generic/Xalan/lib/libxalan-c.so, not found (try using -rpath or -rpath-link)
CMakeFiles/CFE.dir/trnuser1/rmtrain/DevelopmentEnv/Generic/ConvUI/GCVConvUISetting.o: In function `xercesc_2_6::XMLAttDefList::~XMLAttDefList()':
GCVConvUISetting.cpp:(.text._ZN11xercesc_2_613XMLAttDefListD0Ev[xercesc_2_6::XMLAttDefList::~XMLAttDefList()]+0x2f): undefined reference to `xercesc_2_6::XMemory::operator delete(void*)' 
```

请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:53:36.130

我重新安装了 icu 3.2 而不是 3.6。然后它工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:51:15.047

警告意味着您链接的某些库依赖于其他共享库，并且在链接器的搜索路径中找不到这些库。[链接器手册描述了它如何在文档中形成该](http://sourceware.org/binutils/docs/ld/Options.html#index-link_002dtime-runtime-library-search-path-219) [选项](http://sourceware.org/binutils/docs/ld/Options.html#index-link_002dtime-runtime-library-search-path-219)的搜索路径[`-rpath-link`](http://sourceware.org/binutils/docs/ld/Options.html#index-link_002dtime-runtime-library-search-path-219)

它们只是警告，因此不会导致您的链接失败。如果在运行时没有找到那些所需的库，那将是一个问题，但在链接时不一定是一个问题。

如果要使警告静音，则需要找出包含哪个目录`libicui18n.so.36`并`libxalanMsg.so.110`使用手册中描述的方法之一告诉链接器查看该目录。

最后一行是真正的问题，表明您没有链接到定义该符号的库。您需要找出它是哪个库并使用它链接到它`-lfoo`，它可能类似于`-lxerces`

# python - 从子线程中断主线程的 raw_input()

> ID：11206093
> 
> 赞同：4
> 
> 时间：2012-06-26T11:12:55.107
> 
> 标签：python, multithreading

我有多线程 Python 程序。主线程响应用户命令：

```
while 1:
    try:
        cmd = raw_input(">> ")
        if cmd == "exit":
            break
        # other commands
    except KeyboardInterrupt:
        break

# other stuffs 
```

**问题**：如何从其他子线程中断 while 循环？

`sys.exit()`不是一个选项，因为在 while 循环之外还有其他代码。

我想到的可能的解决方案：

1.  中断主线程
2.  写一个“退出”到`sys.stdin`

解决方案1：我试过`thread.interrupt_main()`了，但是没有用。

解决方案2：调用`sys.stdin.write()`不起作用，以下代码也不起作用：

```
f = open(sys.stdin.name, "w")
f.write("exit")
f.close() 
```

[另一个类似的问题](https://stackoverflow.com/questions/3167956/)提供了一个答案，建议您生成另一个进程并使用`subprocess.Popen.communicate()`它向它发送命令。但是是否可以对`communicate()`当前流程本身进行操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:17:19.627

您可以使用类似的东西[`select`](http://docs.python.org/library/select.html)来检查何时有输入`sys.stdin`。这使得循环不是等待`raw_input`而是轮询，你可以有一个循环条件来检查是否退出循环。

# html - 如何将图像放在html页面的中心？

> ID：11206109
> 
> 赞同：14
> 
> 时间：2012-06-26T11:13:53.933
> 
> 标签：html, css, vertical-alignment

> **可能重复：**
> [如何将 div 水平和垂直居中](https://stackoverflow.com/questions/10296015/how-to-center-div-horizontally-and-vertically)

我需要将图像放在 html 页面的中心，无论是垂直还是水平......一直在尝试一些东西，但似乎工作正常。为了获得水平对齐，我使用了 `<body style="text-align:center">`

它工作正常，但垂直对齐怎么办？

问候

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-26T11:20:34.317

如果：

> X 是图像宽度，
> Y 是图像高度，

然后：

```
img {
    position: absolute;
    top: 50%;
    left: 50%;
    margin-left: -(X/2)px;
    margin-top: -(Y/2)px;
} 
```

但请记住，仅当您网站上的唯一元素是此图像时，此解决方案才有效。我想这就是这里的情况。

使用这种方法可以为您带来流动性的好处。某人的屏幕有多大（或多小）并不重要。图像将始终停留在中间。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-26T13:15:25.143

将您的图像放在容器 div 中，然后使用以下 CSS（更改尺寸以适合您的图像。

```
.imageContainer{
        position: absolute;
        width: 100px; /*the image width*/
        height: 100px; /*the image height*/
        left: 50%;
        top: 50%;
        margin-left: -50px; /*half the image width*/
        margin-top: -50px; /*half the image height*/
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T11:17:10.090

嘿，现在你可以给**身体背景图片了**

并设置`background-position:center center;`

像这样

```
body{
background:url('../img/some.jpg') no-repeat center center;
min-height:100%;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T13:20:17.913

根据您要达到的效果，有许多不同的选项。克里斯·科伊尔（Chris Coyier）当时就以这种方式做了一篇文章。值得一读：

[http://css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)

# java - 如何在运行时创建测试套件

> ID：11206112
> 
> 赞同：0
> 
> 时间：2012-06-26T11:14:09.247
> 
> 标签：java, testing, junit, test-suite

```
Class A {

    @Test     
    @CustomAnnotation(attrib1 = "foo"; attrib2 = "moo"; attrib3 = "poo") 
    void methodA(){ }

    @Test      
    @CustomAnnotation(attrib1 = "blahblah"; attrib2 = "flahflah"; attrib3 = "klahklah") 
    void methodB(){ }

    @Test      
    @CustomAnnotation(attrib1 = "foo"; attrib2 = "flahflah"; attrib3 = "poo") 
    void methodC(){ }
} 
```

现在，使用反射，我的注释处理类将返回一个符合我的条件的方法的 SET/LIST（例如，attrib1="foo"） - 方法 A 和方法 C 将满足。现在我需要在运行时将这些添加到测试套件并运行它。

如何将它们添加到测试套件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:15:37.773

看看`org.junit.runner.JUnitCore`。您应该能够使用以下命令指定要运行的测试集（必须作为测试执行的方法） ：http `org.junit.runner.Request`: [//junit.sourceforge.net/javadoc/org/junit/runner/JUnitCore.html#run(org. junit.runner.Request](http://junit.sourceforge.net/javadoc/org/junit/runner/JUnitCore.html#run(org.junit.runner.Request)）

# jquery - $(document).ready() 在 jQuery-AJAX 调用中立即触发

> ID：11206115
> 
> 赞同：4
> 
> 时间：2012-06-26T11:14:12.270
> 
> 标签：jquery, ajax, document-ready, ready

我有一个名为的 html 页面`search.html`，其中包含以下 jQuery 代码：

```
$(document).ready(function(){
...some code // THIS IS THE CODE I'M INTERESTED IN
}
...some other code 
```

我还有另一个 html 页面，其中包含以下 jQuery 代码：

```
$("#display_area").load("search.html") // #display_area is a div 
```

问题是，当调用此 jQuery 代码时，它会立即插入内容`search.html`但执行我感兴趣的代码（$(document).ready() 部分中的代码），它不会等待DOM 准备就绪，这显然会产生错误。

其他代码（在 $(document).ready() 部分之外）正常执行，没有任何问题。

将代码放在 .load() 函数的回调函数中也不起作用，代码会在 DOM 未准备好时触发。

有没有办法解决这个问题？任何帮助，将不胜感激。

编辑：我只想指定`search.html`包含自己的 DOM，该 DOM 将插入 #display_area div 中，并且我希望我的代码在 #display_area div 完成加载其所有新 DOM（内容）时触发通过 load() 函数加载的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T11:31:30.297

我认为你的错误是`$(document).ready`当你的主页的 DOM 第一次准备好时调用它。更改 DOM 不会重新触发`$(document).ready`。您的困惑来自您`$("#display_area").load("search.html")`在页面加载时调用的事实。那时，原始 DOM 还没有完成，当它完成时，`$(document).ready`被触发，稍后（在某个随机时刻）你的 Ajax 函数返回。就是这样。

*要在 Ajax .load 函数返回后*执行代码，请使用

```
$("#display_area").load("search.html", function() { 
    alert('New DOM elements should be available now'); 
    // do more stuff 
} ); 
```

编辑：好的，这是整个方案：

*   在您的主 html 页面中，`$("#display_area").load("search.html")`仅在 DOM 准备好时调用。所以从*你的主页中的*`$(document).ready`一个函数中调用
**   接下来，使用我描述的 .load 的回调函数，在那里做任何你想做的事*   最后，如果您希望 search.html 中的代码在加载后执行：在您的主页和 search.html 之间约定一个函数名称。此函数在 search.html 中定义并从 .load 回调中调用。*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T11:33:07.533

search.html 中的 $(document).ready() 将在 search.html 加载时触发，这将在 .load() 完成时发生，即使其他页面未完成加载。

您可以尝试将 JS 代码放在 search.html 中的普通函数中，然后在 .load() 的回调函数中调用此“新添加”函数。填充 div 仍然可以在 .load() 回调函数中进行。*

# drupal - Ubercart 和 Drupal 7 - hook_add_to_cart

> ID：11206118
> 
> 赞同：3
> 
> 时间：2012-06-26T11:14:20.343
> 
> 标签：drupal, drupal-7, ubercart, githooks

[http://www.ubercart.org/docs/api/hook_add_to_cart](http://www.ubercart.org/docs/api/hook_add_to_cart)

我正在尝试使用 ubercart 的添加购物车功能。我创建了 stock_control.module 和 stock_control.info 文件并启用了该模块。在我的 .module 文件中，我有

第一个是输出，但第二个不是。

```
<?php
   dsm('hello1');
     function stock_control_add_to_cart($nid, $qty, $data) {
    dsm('hello2');
     if ($qty > 1) {
    $result[] = array(
  '        success' => FALSE,
  'message' => t('Sorry, you can only add one of those at a time.'),
);
  }
  return $result;
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T01:59:52.493

我相信版本 7 中的钩子是[`hook_uc_add_to_cart`](http://api.ubercart.me/api/drupal/ubercart!uc_cart!uc_cart.api.php/function/hook_uc_add_to_cart/7).

# spring - Ehcache 与 Hibernate & Spring Exception 的集成：二级缓存未启用使用

> ID：11206125
> 
> 赞同：3
> 
> 时间：2012-06-26T11:14:49.207
> 
> 标签：spring, hibernate, ehcache, second-level-cache

我将 Spring 3.1 与 Hibernate 4 一起使用。在将 Ehcache 与 Hibernate 一起使用时，出现如下错误：

**二级缓存未启用使用 [hibernate.cache.use_second_level_cache | hibernate.cache.use_query_cache]**

即使我将 second_level_cache 设置为 true，我仍然会遇到同样的错误。这是我的定义，如果有人可以帮助我，我会很高兴。

感谢和问候，

吨

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource"><ref local="dataSource"/></property>
    <property name="packagesToScan" value="com.tk.sample.ext4.model" />
    <property name="hibernateProperties">
    <props>
        <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
        <prop key="hibernate.show_sql">true</prop>
        <prop key="hibernate.use_sql_comments">true</prop>
        <prop key="hibernate.format_sql">false</prop>
        <prop key="hibernate.hbm2ddl.auto">update</prop>
        <prop key="hibernate.generate_statistics">true</prop>
        <prop key="current_session_context_class">thread</prop>
        <prop key="hibernate.connection.release_mode">auto</prop>
        <prop key="hibernate.auto_close_session">true</prop>
        <prop key="hibernate.transaction.flush_before_completion">true</prop>
        <prop key="hibernate.transaction.auto_close_session">true</prop>
        <prop key="hibernate.connection.characterEncoding">UTF-8</prop>
        <!-- c3p0 properties -->
        <prop key="hibernate.c3p0.min_size">2</prop>
        <prop key="hibernate.c3p0.max_size">50</prop>
        <prop key="hibernate.c3p0.timeout">300</prop>
        <prop key="hibernate.c3p0.max_statements">50</prop>
        <prop key="hibernate.c3p0.idle_test_period">3000</prop>
        <prop key="hibernate.c3p0.acquireRetryAttempts">30</prop>
        <prop key="hibernate.c3p0.acquireIncrement">5</prop>
        <prop key="hibernate.c3p0.initialPoolSize">2</prop>
        <prop key="hibernate.c3p0.maxPoolSize">50</prop>
        <prop key="hibernate.c3p0.maxIdleTime">300</prop>
        <prop key="hibernate.c3p0.maxStatements">50</prop>
        <prop key="hibernate.c3p0.minPoolSize">2</prop>
        <!-- Ehcache properties -->
        <prop key="hibernate.cache.provider_class">org.hibernate.cache.EhCacheProvider</prop>
        <prop key="hibernate.cache.provider_configuration_file_resource_path">/WEB-INF/ehcache.xml</prop>
        **<prop key="hibernate.cache.use_second_level_cache">true</prop>**
        <prop key="hibernate.cache.use_query_cache">true</prop>
        <prop key="hibernate.cache.region.factory_class">net.sf.ehcache.hibernate.EhCacheRegionFactory</prop>
    </props>
    </property>
</bean> 
```

ehcache.xml

```
 <ehcache>
  <diskStore path="java.io.tmpdir"/>
  <defaultCache
     maxEntriesLocalHeap="10000"
     eternal="false"
     timeToIdleSeconds="120"
     timeToLiveSeconds="120"
     overflowToDisk="true"
     maxEntriesLocalDisk="10000000"
     diskPersistent="false"
     diskExpiryThreadIntervalSeconds="120"
     memoryStoreEvictionPolicy="LRU"
  />
</ehcache> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T10:41:58.703

这也在其他线程中进行了讨论删除以下行

```
<prop key="hibernate.cache.provider_class"> 
```

添加以下内容

```
<prop key="hibernate.cache.region.factory_class">org.hibernate.cache.ehcache.SingletonEhCacheRegionFactory</prop> 
```

Hibernate 3 和 Hibernate 4 将具有不同的配置。

# java - 在 Java 中将 http 响应转换为 XML 文档

> ID：11206127
> 
> 赞同：0
> 
> 时间：2012-06-26T11:14:55.897
> 
> 标签：java, xml, http

请问，有什么方法可以将我通过互联网获得的响应转换为 xml DOM 文档？我知道响应文本是 xml 格式的（服务器正在发送 xml 格式的响应）。我没有使用 Java 中的 http 通信，所以我不知道该怎么做。谷歌搜索了一段时间后，我发现了几个例子，但没有运气。

如果我使用[这里](https://stackoverflow.com/questions/5162063/http-request-for-xml-file)描述的方法，我的 Document 等于 null :\

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:51:38.237

我找到了一个方法：

```
Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(link); 
```

:)))

# java - 一个读取巨大 CSV 文件行的 Java 主题程序

> ID：11206130
> 
> 赞同：3
> 
> 时间：2012-06-26T11:15:02.380
> 
> 标签：java, multithreading

我有一个超过 700K + 行的巨大 CSV 文件。我必须解析该 CSV 文件的行并执行操作。我想通过使用线程来做到这一点。我一开始尝试做的很简单。每个线程都应处理 CSV 文件的唯一行。我的行数有限，只能读取 3000 行。我创建了三个线程。每个线程都应该读取 CSV 文件的一行。以下是代码：

```
import java.io.*;

class CSVOps implements Runnable
{
    static int lineCount = 1;
    static int limit = 3000;
    BufferedReader CSVBufferedReader;

    public CSVOps(){} // Default constructor

    public CSVOps(BufferedReader br){
        this.CSVBufferedReader = br;
    }

    private synchronized void readCSV(){
        System.out.println("Current thread "+Thread.currentThread().getName());
        String line;
        try {
            while((line = CSVBufferedReader.readLine()) != null){
                System.out.println(line);
                lineCount ++;
                if(lineCount >= limit){
                    break;
                }
            }
        }
        catch (IOException e) {
            e.printStackTrace();
        }
    }

    public void run() {
        readCSV();
    }

}

class CSVResourceHandler
{
    String CSVPath;

    public CSVResourceHandler(){ }// default constructor

    public CSVResourceHandler(String path){
        File f = new File(path);
        if(f.exists()){
            CSVPath = path;
        }
        else{
            System.out.println("Wrong file path! You gave: "+path);
        }
    }

    public BufferedReader getCSVFileHandler(){
        BufferedReader br = null;
        try{
            FileReader is = new FileReader(CSVPath);
            br = new BufferedReader(is);
        }
        catch(Exception e){
        }
        return br;
    }
}

public class invalidRefererCheck
{
    public static void main(String [] args) throws InterruptedException
    {
        String pathToCSV = "/home/shantanu/DEV_DOCS/Contextual_Work/invalid_domain_kw_site_wise_click_rev2.csv";
        CSVResourceHandler csvResHandler = new CSVResourceHandler(pathToCSV);
        CSVOps ops = new CSVOps(csvResHandler.getCSVFileHandler());

        Thread t1 = new Thread(ops);
        t1.setName("T1");

        Thread t2 = new Thread(ops);
        t1.setName("T2");

        Thread t3 = new Thread(ops);
        t1.setName("T3");

        t1.start();
        t2.start();
        t3.start();
    }
} 
```

CSVResourceHandler 类简单查找传递的文件是否存在，然后创建一个 BufferedReader 并提供它。这个阅读器被传递给CSVOps 类。它有一个方法 readCSV，它读取 CSV 文件的单行并打印出来。限制设置为 3000。

现在为了让线程不搞乱计数，我将这些限制和计数变量都声明为静态的。当我运行这个程序时，我得到了奇怪的输出。我只得到大约 1000 条记录，有时我得到 1500 条。它们是随机排列的。在输出结束时，我得到两行 CSV 文件，当前线程名称是 main ！！

我是线程的新手。我希望阅读这个 CSV 文件变得更快。可以做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T13:14:17.587

好的，首先，***不要使用***多个线程从单个机械磁盘进行并行 I/O。它实际上会降低性能，因为每次线程有机会运行时，机械头都需要寻找下一个读取位置。因此，您不必要地弹跳磁盘的磁头，这是一项昂贵的操作。

使用单个生产者多消费者模型使用单个线程读取行并使用工作池处理它们。

关于你的问题：

你真的不应该在退出主线程之前等待线程完成吗？

```
public class invalidRefererCheck
{
    public static void main(String [] args) throws InterruptedException
    {
        ...
        t1.start();
        t2.start();
        t3.start();

        t1.join();
        t2.join();
        t3.join();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:33:10.527

我建议大块阅读文件。分配一个大缓冲区对象，读取一个块，从末尾解析以找到最后一个 EOL 字符，将缓冲区的最后一位复制到临时字符串中，在 EOL+1 处将 null 推入缓冲区，从缓冲区排队引用，立即创建一个新的，首先复制临时字符串，然后填充缓冲区的其余部分并重复直到 EOF。重复直到完成。使用线程池来解析/处理缓冲区。

您必须将整块有效行排队。排队单行将导致线程通信花费的时间比解析时间长。

请注意，这和类似的情况可能会导致池中的线程“无序”处理块。如果必须保留顺序（例如，输入文件已排序，而输出将进入另一个必须保持排序的文件），则可以让块组装器线程在每个块对象中插入一个序列号。然后，池线程可以将处理过的缓冲区传递给另一个线程（或任务），该线程（或任务）保留一个乱序块列表，直到所有先前的块都进入。

多线程不一定是困难/危险/无效。如果您使用队列/池/任务，请避免同步/加入，不要不断地创建/终止/销毁线程，并且只在一次只有一个线程可以处理的大型缓冲区对象周围排队。你应该看到一个很好的加速，几乎没有死锁、错误共享等的可能性。

这种加速的下一步将是预先分配一个缓冲区池队列，以消除缓冲区和相关 GC 的持续创建/删除，并在每个缓冲区的开头使用（L1 缓存大小）“死区”完全消除缓存共享。这在多核机器上会很快（尤其是使用 SSD！）。

哦，Java，对。我为我用空终止符回答的“CplusPlus-iness”道歉。不过，其余的点都还可以。这应该是一个与语言无关的答案:)

# class - Orchard - 使用字段向正文添加类或 ID

> ID：11206131
> 
> 赞同：0
> 
> 时间：2012-06-26T11:15:02.683
> 
> 标签：class, field, orchardcms, document-body

我的问题是 -**如何使用 Orchard 中的文本字段将类或 id 添加到正文标签？**

因此，如果我在文本字段中输入“产品”一词，那么结果应该是`<body class="product">`. 我想使用此方法而不是创建备用布局模板，因为每个页面都具有相同的布局，但我需要为每个页面使用不同的类来引用我在 CSS 中为每个页面设置的不同配色方案。

我在后端的 Title ContentType 中添加了一个名为 Area 的文本字段。我现在的问题是如何获取要放入 Document.cshtml 正文中的字段的值。

我已经阅读[了在 Orchard 中设置唯一的正文类和 ID](https://stackoverflow.com/questions/8575941/setting-unique-body-classes-and-ids-in-orchard)以及[在 Orchard CMS 中使用 Document.cshtml 的替代品，](https://stackoverflow.com/questions/9877821/using-alternatives-for-document-cshtml-in-orchard-cms)但我仍然无法让它工作！第二个似乎是我想做的，但到目前为止我一直无法实现。

任何答案将不胜感激？

谢谢

安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T12:21:02.810

我很沮丧，以至于在网上找不到现成的解决方案。因为我更喜欢在 jquery 和 js 中编码......

这是我的解决方案：假设您已加载 jquery ...

```
@using(Script.Foot()) {
<script type ="text/javascript">
//<![CDATA[
$(document).ready(function () { 
    var url = window.location.pathname;
    var count = url.match(new RegExp("/", 'g'));
    var urlsplit = url.split("/");
    var page_class = urlsplit[count.length];

   alert(page_class);
    $('body').addClass(page_class);
});
//]]>
</script>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T00:15:34.000

实现这一目标的最简单方法是使用 Vandelay.Industries 的 Classy 功能。

# xml - CouchDB & E4X 用于包含 XML 的文档

> ID：11206132
> 
> 赞同：2
> 
> 时间：2012-06-26T11:15:03.723
> 
> 标签：xml, couchdb, e4x

我有一个 CouchDB 数据库（v1.2.0），其中包含以下文档：

```
{
   "_id": "pages/1",
   "_rev": "15-56ad5a5e879206edb04a7a62105dd25d",
   "content": "<html lang=\"en\"><head><title>Page Title</title></head></html>"
} 
```

根据[这篇文章](http://www.cmlenz.net/archives/2008/03/couchdb-xml-and-e4x)，我应该简单地写一个这样的视图：

```
// by_lang
function(doc) {
    var html = new XML(doc.content);
    emit(html.@lang, {title: html.head.title.text()});
} 
```

, 从 XML 中获取数据。

不幸的是，这不起作用。起初我认为我下载的 CouchDB 二进制文件不包括包含 E4X 的 SpiderMonkey，但事实并非如此。如果我添加一条`log(html);`语句，我可以看到 XML 已正确解析（@ Erlang 窗口）。

Erlang 窗口指出我的代码有问题的是：

```
Log :: function raised exception (new TypeError("String.prototype.toJSON called on incompatible XML", "../share/couchdb/server/main.js", 1138)) with doc._id pages/1 
```

我打开了`main.js`文件，中断的代码如下：

```
// moving this away from global so we can move to json2.js later
toJSON : function (val) {
    return JSON.stringify(val);
}, 
```

谷歌搜索那个错误把我带到了[这个](http://mail-archives.apache.org/mod_mbox/couchdb-dev/200912.mbox/%3Ce282921e0912191707u7a09e8eco2d8a54aec3119471@mail.gmail.com%3E)提到 json2.js 的页面（上面代码的注释中也提到了它。

任何想法如何解决这个问题？有没有可能这是一个错误，或者我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T01:22:39.290

我*认为*问题在于`toJSON`无法转换任何`html.@lang`对象（在您调用之前它不是纯字符串`.toString()`

因此，将您的电话更改`emit`为包含`toString()`电话（请注意，我还将电话更改`.text()`为`.toString()`电话：

```
emit(html.@lang.toString(), {title: html.head.title.toString()}); 
```

# opengl-es - 调整纹理可见部分的精灵边界

> ID：11206139
> 
> 赞同：0
> 
> 时间：2012-06-26T11:15:28.243
> 
> 标签：opengl-es, cocos2d-iphone, cocos2d-x

有没有办法调整精灵可见部分的边界？为了更容易理解：我有一个纹理，如图 1 所示。然后我将它分解成碎片并使用[PRKit](http://www.cocos2d-x.org/boards/6/topics/8101?r=12361#message-12361)填充生成的碎片 （图 2 和 3 上的木材纹理）。但是生成的片段是透明的（图 2 和图 3 中的绿色），当从片段创建精灵时，它们具有初始纹理的大小。有没有办法摆脱这种透明度并调整可见部分（木材纹理）的大小，openGL或cocos2d-x是什么意思？ ![例子](../Images/a3181da75e9d1f06494c38812882ff75.png) 也许它有帮助 - PRKit 中的 draw() 方法：

```
void PRFilledPolygon::draw() {

//CCNode::draw();

glDisableClientState(GL_COLOR_ARRAY);

// we have a pointer to vertex points so enable client state
glBindTexture(GL_TEXTURE_2D, texture->getName());

glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_ONE_MINUS_SRC_ALPHA);
glVertexPointer(2, GL_FLOAT, 0, areaTrianglePoints);
glTexCoordPointer(2, GL_FLOAT, 0, textureCoordinates);

glDrawArrays(GL_TRIANGLES, 0, areaTrianglePointCount);

glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);

//Restore texture matrix and switch back to modelview matrix
glEnableClientState(GL_COLOR_ARRAY);} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T05:46:40.227

好的，我做到了。首先，我从 PRFilledPolygon(PRKit) 创建纹理，用于该 CCRenderTexture，之后我将生成的纹理应用于新的 CCSprite，然后我创建了一个边界框，使用来自 PRKit 站点的数据并使用 setTextureRect() 将其应用于精灵.

# emacs - emacs 的打字机声音

> ID：11206140
> 
> 赞同：9
> 
> 时间：2012-06-26T11:15:31.920
> 
> 标签：emacs, elisp

我想设置emacs，以便在将文本输入缓冲区时播放打字机声音，并在按Enter键时播放回车声音（类似于Windows上的Q10编辑器）。有人对我如何解决这个问题有任何建议吗？有没有我可以使用的钩子？

我目前使用 aquamacs 和 emacs 22，但不反对升级。

编辑：如果有人感兴趣，这里问了这个问题的 vim 版本：[我写信时如何让 VIM 播放打字机声音？](https://stackoverflow.com/questions/4418364/how-can-i-make-vim-play-typewriter-sound-when-i-write-a-letter)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-26T18:53:12.437

首先，您必须建立一些播放声音的方式：

```
 (defun play-typewriter-sound ()
      (let ((data-directory "~/Dowloads/Sounds"))
        (play-sound `(sound :file "key1.wav")))) 
```

...例如在 Mac OSX Emacs 上不起作用，因为它没有在编译时提供声音支持。但是有一些解决方法，例如参见[http://www.emacswiki.org/emacs/ErcSound](http://www.emacswiki.org/emacs/ErcSound)

*   然后，您可以在任何 Emacsen 上使用建议

    ```
    (defadvice self-insert-command (after play-a-sound activate)
      (play-typewriter-sound)) 
    ```

    你也可以建议`newline-and-indent`。

*   在 Emacs24 上，您现在拥有`post-self-insert-hook`

    ```
    (add-hook 'post-self-insert-hook 'play-typewriter-sound) 
    ```

*   如果您不喜欢`defadvice`，可以使用`post-command-hook`并检查`this-command`那里的名称：

    ```
    (add-hook 'post-command-hook #'play-typewriter-sound-maybe)

    (defun play-typewriter-sound-maybe ()
      (if (eq this-command 'self-insert-command)
          (play-typewriter-sound))) 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-16T16:27:33.663

如果有人需要这个使用`afplay`这里我用什么

```
(defun play (audio-name)
    (interactive)
    (let* (buf (get-buffer-create "playnoise"))
        (start-process-shell-command 
         "play" buf (concat (format "afplay /Users/foo/audios/%s" audio-name) ".mp3"))))

(play "wrong") 
```

# ios - 如何在 iOS sdk 中使用正则表达式

> ID：11206144
> 
> 赞同：2
> 
> 时间：2012-06-26T11:15:49.767
> 
> 标签：ios, iphone, objective-c, regex

如何在 iOS sdk 中使用正则表达式？

我需要`UITextField`使用正则表达式进行验证，只允许将数值放入`UITextField`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T11:20:39.157

在你的 shouldChangeCharactersInRange 中你可以这样做

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{

        NSString *newString = [textField.text stringByReplacingCharactersInRange:range withString:string];

        NSString *expression = @"^([0-9]+$";

        NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:expression 
                                                                               options:NSRegularExpressionCaseInsensitive 
                                                                                error:nil];
        NSUInteger numberOfMatches = [regex numberOfMatchesInString:newString
                                                            options:0
                                                              range:NSMakeRange(0, [newString length])];        
        if (numberOfMatches == 0)
            return NO;        

    return YES;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T11:18:15.223

试试这个作为你的正则表达式 ^[0-9]+$

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T11:26:56.610

试试这个，对你有帮助

```
- (void)textFieldDidEndEditing:(UITextField *)textField 
{
    activeField = nil;
    if (textField == tfMobile) 
    {
        NSString *strRegExp=@"[0-9]*";
        NSPredicate *MobNumTest=[NSPredicate predicateWithFormat:@"SELF MATCHES %@",strRegExp];
        if([MobNumTest evaluateWithObject:textField.text]==NO)
        { 

            UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"Warning" message:@"Please Enter correct contact no." delegate:nil cancelButtonTitle:@"ok" otherButtonTitles:nil];

            [alert show];
            [alert release];

            tfMobile.text =@"";

        }

    }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T11:27:12.927

在需要的地方调用此方法。如果 checkString 仅包含数字，则返回 true

```
- (BOOL) textFieldValidation:(NSString *)checkString {
       NSString *stricterFilterString = @"[0-9]+";//here + is for one or more numerals(use * for zero or more numerals)
       NSString *regEx =  stricterFilterString;
       NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", regEx];
       return [emailTest evaluateWithObject:checkString]; 
```

}

# php - 根据数组中的值隐藏和显示元素

> ID：11206152
> 
> 赞同：0
> 
> 时间：2012-06-26T11:16:19.857
> 
> 标签：php, jquery

我有一个 `<a href="menu1" ">Menu1</a> <a href="menu2"">Menu 2</a>` 用于这些菜单 1 和 menu2 的菜单栏，我已经存储了值 0110 等等。我有一张表，我在其中存储这些项目的值 1 和零。在其他页面上，我正在获取数组中的所有字段

```
for($i=1;$i<15;$i++)
    echo $check1[$i]; 
```

并得到 1010100 与数据库中的完全相同。现在我想检查值是否为 1 是否应在页面上显示特定菜单，否则不会。现在我想制作一个 jquery 或使用 php 隐藏值为 0 的元素并显示值为 1 的元素。我可以用吗

```
for(var i=0;var i<15;i++)
{ 
    switch (var[i]){
        case 1:var[i].hide;
            break;
        case 2:var[i].show;
    }
} 
```

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:47:27.160

你想切换 1 和 0？检查此代码：

```
 <script language="javascript" src="http://code.jquery.com/jquery-1.7.js"></script>
    <table width="300" border="1" cellspacing="1" cellpadding="2">
      <tr>
        <td>Index</td>
        <td>1 / 0</td>
      </tr>
      <? for($i=1;$i<15;$i++){
        $value = rand(0,1);
      ?>
      <tr class="tr<?=$value;?>">
        <td><?=$i;?></td>
        <td><?=$value;?></td>
      </tr>
      <? } ?>
    </table>
    <a href="#" onclick="$('.tr0').show();$('.tr1').hide();">Show 0</a>
    |
    <a href="#" onclick="$('.tr1').show();$('.tr0').hide();">Show 1</a>

|
<a href="#" onclick="$('.tr1').show();$('.tr0').show();">Show both</a> 
```

# modulo - 模64到底是什么

> ID：11206153
> 
> 赞同：1
> 
> 时间：2012-06-26T11:16:27.440
> 
> 标签：modulo

我还没有在网上找到任何具体的链接来解释模 64 到底是什么。我不是程序员，但在学习 3GPP2 CDMA2000 标准时遇到了这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T11:20:29.640

模是一个数除以另一个数的余数。所以，一个数的**模 64**是这个数除以 64 的余数。例如，65 的**模 64**是 1，当你将 65 除以 64 时，余数是 1。

# jsf - 加载页面时如何触发 ActionListener？

> ID：11206154
> 
> 赞同：0
> 
> 时间：2012-06-26T11:16:29.140
> 
> 标签：jsf, primefaces

使用 JSF 2.0（和 Primefaces），有没有办法在加载页面时触发 ActionListener？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:38:18.387

取决于您的需要，例如，如果您想在 bean 中初始化某些东西，可以使用`f:event`with ：`preRenderView`

检查此链接： [http ://www.mkyong.com/jsf2/jsf-2-prerenderviewevent-example/](http://www.mkyong.com/jsf2/jsf-2-prerenderviewevent-example/)

但是您应该知道每个请求都会调用该事件：ajax，验证失败...。您可以检查它是否是这样的新请求：

```
public boolean isNewRequest() {
        final FacesContext fc = FacesContext.getCurrentInstance();
        final boolean getMethod = ((HttpServletRequest) fc.getExternalContext().getRequest()).getMethod().equals("GET");
        final boolean ajaxRequest = fc.getPartialViewContext().isAjaxRequest();
        final boolean validationFailed = fc.isValidationFailed();
        return getMethod && !ajaxRequest && !validationFailed;
    } 
```

# javascript - 将键/值添加到值是对象的数组中

> ID：11206155
> 
> 赞同：3
> 
> 时间：2012-06-26T11:16:30.883
> 
> 标签：javascript, jquery

将键/值添加到值是对象的数组中

我想添加一些文本作为键和对象作为值。

例子

```
$('#clickme').on('click' , function() {
    push to array => "some_text" as (value) and $(this) as key
}) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T11:20:24.270

只需使用作为关联数组的普通对象：

```
var myObj = {};
$('#clickme').on('click' , function() {
    myObj["some_text"] = $(this);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:19:51.197

这应该有效：

```
var myArr = new Array();
myArr["MyKey"] = { name: "myobject" }; 
```

# spring-mvc - Spring 3 复选框列表对象具有空属性

> ID：11206156
> 
> 赞同：0
> 
> 时间：2012-06-26T11:16:42.217
> 
> 标签：spring-mvc

我可能在这里完全迷失了方向，但是我来自 MVC.NET 世界，我一生都无法弄清楚这一点。我没有收到任何错误消息，但在表单提交中提交的所有对象属性均为空。对象本身不是空的，只是它们的属性。

我想做的就是在表单提交后有一系列对象，由表单上的复选框表示。由于嵌套列表排列，您可以看到这有点棘手。该视图在 GET 请求上完美呈现，但在发布到服务器时似乎忘记了所有内容。有没有人有这种设置的例子？任何人都可以提出为什么我所有的对象都失去了绑定？

我的控制器：

```
@RequestMapping(value="/Search", method = RequestMethod.GET)
public String search(Model model)
{
    Period periods = new Period();

    SearchModel search = new SearchModel();
    search.periods = periods.BuildPeriodList();

    model.addAttribute("periods", periods.BuildPeriodList());
    model.addAttribute(search);

    return "search";
}

@RequestMapping(value = "/Search", method = RequestMethod.POST)
public String search(@ModelAttribute("searchModel") SearchModel search, BindingResult result)
{         
    System.out.println(Arrays.deepToString(search.periods));

    return "search";
} 
```

我的观点：

```
<div id="searchPage">
<div id="searchForm">
    <form:form action="Search" method="post" modelAttribute="searchModel">
        <h2>Search</h2>
        <h2>Periods</h2>

        <c:forEach items="${periods}" var="period" varStatus="index">

            <form:checkbox path="periods[${index.count - 1}]" id="${period.name}" name="${period.name}" value="${period.name}"/>
            <label for="${period.name}">${period.displayName}</label>

            <div class="subPeriods">
            <c:forEach items="${period.subPeriods}" var="subPeriod" varStatus="subIndex">

                <form:checkbox path="periods[${subIndex.count - 1}].subPeriods" id="${subPeriod.name}" name="${subPeriod.name}" value="${period.name}"/>
                <label for="${subPeriod.name}">${subPeriod.displayName}</label>

            </c:forEach>
            </div>

        </c:forEach>
        <div class="clear"></div>
        <h2>Extras</h2>
        <form:checkbox path="hasImage" name="hasImage" id="hasImage"></form:checkbox>
        <label for="hasImage">Image</label>
        <form:checkbox path="hasPaper" name="hasPapaer" id="hasPapaer"></form:checkbox>
        <label for="hasPaper">Paper Data</label>
        <form:checkbox path="hasExtended" name="hasExtended" id="hasExtended"></form:checkbox>
        <label for="hasExtended">Extended Info</label>
        <input type="submit" name="search" value="Search"></input>
    </form:form>
</div>
<div id="searchResults">

</div>
<div class="clear"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:10:24.147

这是由于您的某些复选框绑定到您的“周期”模型，而其他复选框绑定到您的 SearchModel 模型。form:checkbox 元素的 path 属性告诉如何绑定信息。

要么将其包含在您的 SearchModel 中，要么在您的 POST 方法中包含另一个 @ModelAttribute("periods")。

我建议坚持使用一个模型，而且我不确定您是否可以在控制器方法中拥有多个 @ModelAttribute，不过可以尝试一下。

# wicket - Wicket：转到带有激活面板的页面

> ID：11206157
> 
> 赞同：0
> 
> 时间：2012-06-26T11:16:43.547
> 
> 标签：wicket, panel

我正在使用 wicket 1.5 开发一个 Web 应用程序。现在我有一个问题。应重定向到的目标页面包括四个不同的面板（面板 1、2、3、4）。如何获取具有激活面板 3 的页面实例？通常，新的 XXXPage() 方法将返回一个带有激活面板 1 的页面实例。

问候兰塞尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:28:16.373

使用 PageParameters 指示哪个面板应该处于活动状态。[这与这里提出的问题](https://stackoverflow.com/questions/11193088/wicket-is-it-possible-to-display-components-of-a-panel-based-on-page-the-panel)非常相似

# javascript - 如何创建在数组中查找匹配数据的搜索？

> ID：11206158
> 
> 赞同：0
> 
> 时间：2012-06-26T11:16:47.393
> 
> 标签：javascript, jquery, json, twitter-bootstrap

我想创建一个搜索框来检查输入并查看它是否与城镇名称匹配。

我的数据是这样组织的（顺便说一句虚构的数据）：

```
var markers = {
    towns: {
        "London": {lat: -83.68088192646843, lng: -125.270751953125},
        "Paris": {lat: -58.1548020417031, lng: -21.318115234375},
    }
} 
```

所以澄清一下：

*   获取文本框输入，`var query`
*   搜索城镇，`var results`
*   `if (query === results)`做某事，例如发出警报

谢谢。

编辑：

我已经能够进行如下测试：

```
$("#search").blur(function() {
    var query = $("#search").val();
    var results = "hi";
    if (query === results) {
        alert("booyah");
    }   
}) 
```

这可行，但是正如您所见，我不知道如何将城镇存储在`var results`.

编辑#2：这行得通吗？

```
$("#search").blur(function() {
    var query = $("#search").val();
    for (var town in markers.towns) {
        if (query !== markers.towns[town]) {
            alert("booyah");
        }           
    }
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:47:47.337

首先，您的对象不是数组。这种情况可能很简单：

```
var coordinates = (function () {
    var markers = {
        towns: {
            "London": {lat: -83.68088192646843, lng: -125.270751953125},
            "Paris": {lat: -58.1548020417031, lng: -21.318115234375},
        }
    };
    return {
        find = function (city) {
             markers.towns[city] || null;
        }
    };
})(); 
```

find 方法将返回您的值对象或 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:58:46.053

当我使用硬编码的查询变量运行以下命令时，它可以正常工作：

```
var markers = {
    towns: {
        "London": {lat: -83.68088192646843, lng: -125.270751953125},
        "Paris": {lat: -58.1548020417031, lng: -21.318115234375}
    }
}

var query = "london";   // Test with different capitalization.
for (var town in markers.towns) {
    // If the current town name matches the input field (case insensitive)
    if (town.toLowerCase() === query.toLowerCase()) {
        alert("booyah");
    }
} 
```

# eclipse - 使用Equinox项目的区域有向图包

> ID：11206161
> 
> 赞同：1
> 
> 时间：2012-06-26T11:16:55.530
> 
> 标签：eclipse, eclipse-plugin, osgi, equinox

我正在尝试在我的项目中使用 Equinox 的区域有向图包。作为第一步，我正在尝试使用**org.eclipse.equinox.region.tests bundle 来测试 bundle** **org.eclipse.equinox.region**存在于[equinox project](http://git.eclipse.org/c/equinox/rt.equinox.bundles.git/tree/bundles)中。

 **当我将相关包导入 Eclipse IDE 时，在**RegionPerformanceTests**类中加载**org.eclipse.core.tests.harness.PerformanceTestRunner**包时出错。这是因为我无法在清单文件中导入上述包。当我尝试将其添加为清单文件中的依赖项时，此包不存在。[当我添加此链接中](http://wiki.eclipse.org/Automated_Testing)给出的依赖项时，我找不到此链接中给出的任何包

 **如果我能就这个问题获得一些帮助，那将非常有帮助。****

# c++ - Visual C++ - 构建问题

> ID：11206166
> 
> 赞同：0
> 
> 时间：2012-06-26T11:17:09.063
> 
> 标签：c++, visual-c++

我正在尝试在以下位置构建这个小程序`Visual C++ 2008 Express Edition`：

```
 #include "stdafx.h"
    #include <iostream>
    #include <vector>

    int main(){
    std::vector<bool> listOfFeatures(4,false);
    for(std::vector<bool>::iterator i = features.begin(); i != features.end(); i++){
    std::int maxValue = criterionFunction(*listOfFeatures);
    }
    }
    std::int criterionFunction(std::int *features){
    return -2*features[1]*features[2]+3*features[1]+5*features[2]-2*features[1]*features[2]*
    features[3]+7*features[3]+4*features[4]-2*features[1]*features[2]*features[3]*
    features[4];
} 
```

但是，得到以下输出：

```
1>------ Build started: Project: SFS, Configuration: Debug Win32 ------
1>Compiling...
1>SFS.cpp
1>.\SFS.cpp(7) : error C2065: 'features' : undeclared identifier
1>.\SFS.cpp(7) : error C2228: left of '.begin' must have class/struct/union
1>        type is ''unknown-type''
1>.\SFS.cpp(7) : error C2065: 'features' : undeclared identifier
1>.\SFS.cpp(7) : error C2228: left of '.end' must have class/struct/union
1>        type is ''unknown-type''
1>.\SFS.cpp(8) : error C2589: 'int' : illegal token on right side of '::'
1>.\SFS.cpp(8) : error C2143: syntax error : missing ';' before '::'
1>.\SFS.cpp(11) : error C2589: 'int' : illegal token on right side of '::'
1>.\SFS.cpp(11) : error C2059: syntax error : '::'
1>.\SFS.cpp(11) : error C2589: 'int' : illegal token on right side of '::'
1>.\SFS.cpp(11) : error C2143: syntax error : missing ';' before '{'
1>.\SFS.cpp(11) : error C2447: '{' : missing function header (old-style formal list?)
1>Build log was saved at "file://c:\Users\Ola\Documents\Visual Studio 2008\Projects\SFS\SFS\Debug\BuildLog.htm"
1>SFS - 11 error(s), 0 warning(s)
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

这是为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T11:18:27.203

不应该

```
features.begin() 
```

是

```
listOfFeatures.begin() 
```

和

```
int criterionFunction(int *features) 
```

之前被**宣布**`main`？注意没有`std::int`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:19:33.320

`features`没有在任何地方声明或定义。

# javascript - 使用 rangy 删除选择

> ID：11206170
> 
> 赞同：0
> 
> 时间：2012-06-26T11:17:18.563
> 
> 标签：javascript, rangy

我制作了一个带有一些清理逻辑的小内联编辑器。因此，如果您从 word 文件中粘贴，它会删除所有格式。

我的问题是，如果您选择例如一个句子并粘贴，它不会被替换。这与清理逻辑有关。现在我需要知道，如何使用 rangy 删除范围，以便在粘贴之前删除该范围。

[http://jsfiddle.net/eJNKy/3/](http://jsfiddle.net/eJNKy/3/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T13:30:35.130

[`deleteContents()`](https://developer.mozilla.org/en/DOM/range.deleteContents)您可以使用其方法删除范围。

Rangy 还处理了许多您试图在 jsFiddle 中修复的跨浏览器问题。它提供了一个`createContextualFragment()`实现和一个选择对象`getRangeAt()`。此外，您应该使用事件的`ctrlKey`属性`keydown`。这是一个更新的 jsFiddle：

[http://jsfiddle.net/timdown/eJNKy/6/](http://jsfiddle.net/timdown/eJNKy/6/)

关键功能是

```
function paste(html) {
    var sel = rangy.getSelection();
    if (html && sel.rangeCount > 0) {
        var range = sel.getRangeAt(0);
        range.deleteContents();
        var frag = range.createContextualFragment(html);
        var lastChild = frag.lastChild;
        range.insertNode(frag);
        range.collapseAfter(lastChild);
        sel.setSingleRange(range);
    }
} 
```

# javascript - 在 HTML5 画布中，有没有办法以不同的角度旋转图像？

> ID：11206173
> 
> 赞同：0
> 
> 时间：2012-06-26T11:17:39.823
> 
> 标签：javascript, canvas, html5-canvas, rotation

目前有两个图像我想在画布上旋转，我尝试保存和恢复但没有工作

```
 function SetCanvas()
       {
        var canvas = document.getElementById('pic1');

        if(canvas.getContext)
        {
             var ctx = canvas.getContext('2d');
          //    ctx.save();
              ctx.rotate(0.5);
             var image = new Image();
              image.src ='ME.JPG';
              image.onload = function(){

                  ctx.drawImage(image, 90,0,200,100);

              };
        }
            //ctx.restore();
            var canvas2 = document.getElementById("pic2");
            var image2 = new Image();
            image2.src = 'ME2.JPG';
            if(canvas2.getContext)
            {
                    image2.onload = function(){
                            ctx2=canvas2.getContext('2d');
                            ctx2.drawImage(image2, 0,0,200,100); 
                    };
            }

        }

          <ul id="picsCanvas" style="overflow:hidden;white-space:nowrap; list-style-type:none;">
               <li style=" display:inline; float:left" id="first">
                    <canvas ID="pic1" width="300" height="360" ></canvas>
               </li>
                <li id="second" style="margin-top:0px; display:inline; float:left; position:absolute ">
                    <canvas id="pic2" width="300" height="360"  style="position:absolute" ></canvas>
               </li>
            </ul> 
```

请注意，代码可能不正确，因为这是我不久前所做的，我只是想了解如何执行此操作以及是否可能...感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:52:04.547

这两个链接对如何使用 HTML5 画布进行旋转提供了很好的解释和示例

[https://developer.mozilla.org/en/Drawing_Graphics_with_Canvas](https://developer.mozilla.org/en/Drawing_Graphics_with_Canvas)

[https://developer.mozilla.org/en/Canvas_tutorial/Basic_animations](https://developer.mozilla.org/en/Canvas_tutorial/Basic_animations)

旋转时设置不同的角度（参见下面的代码示例）。它的一般要点是：

```
1) save the context
2) transform to, usually, the center of the image
3) rotate
4) transform back
5) draw image
6) restore 
```

在您的情况下，对于两个图像，您需要在进行第二次旋转调用之前将原点转换为第二个图像。下面是旋转一张图像的简化示例。将其排序，然后进行第二次变换/旋转。

例子：

```
var canvas = document.getElementById("yourCanvas");
var ctx     = canvas.getContext("2d");
var angle = 0;
window.setInterval(function(){
    angle = angle+1;
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    ctx.save();
    ctx.fillStyle = "#FF0000";

    // first image
    ctx.translate(150,200);
    ctx.rotate( angle*Math.PI/180 );  // rotate 90 degrees
    ctx.translate(-150,-200);

    ctx.fillStyle = "black";  
    ctx.fillRect(100, 150, 100, 100); 
    ctx.fill();

    ctx.restore();
}, 5);​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T01:37:49.233

图像正在异步加载。这意味着整个函数（减去`onload`图像的处理程序）首先发生。然后在加载图像时，调用它们的处理程序。这发生在第二次传递中。到发生这种情况时，您已经有效地旋转并恢复了画布消除旋转。

`onload`简单的解决方法是在每个图像处理程序中旋转和恢复画布。

# android - 无法将源和目标地理点放入不同的变量中

> ID：11206178
> 
> 赞同：1
> 
> 时间：2012-06-26T11:17:59.880
> 
> 标签：android, maps, android-mapview

关于地图上的用户交互，我试图在两个不同的变量中获取源和目标。对源和目标使用单个标记。在`onTouchEvent`方法中无法区分来源和目的地。

有了这些点，我想计算距离并通过用户交互在地图上动态绘制路线。

这是我的代码

```
public boolean onTouchEvent(MotionEvent event, MapView mapView) {
        final int action=event.getAction();
        final int x=(int)event.getX();
        final int y=(int)event.getY();
        boolean result=false;

        if (action==MotionEvent.ACTION_DOWN) {
            for (OverlayItem item : items) {
                Point p=new Point(0,0);

                map.getProjection().toPixels(item.getPoint(), p);

                if (hitTest(item, marker, x-p.x, y-p.y)) {
                    result=true;
                    inDrag=item;

                    items.remove(inDrag);
                    populate();

                    xDragTouchOffset=0;
                    yDragTouchOffset=0;

                    setDragImagePosition(p.x, p.y);
                    dragImage.setVisibility(View.VISIBLE);

                    xDragTouchOffset=x-p.x;
                    yDragTouchOffset=y-p.y;

                    break;
                }
            }
        }
        else if (action==MotionEvent.ACTION_MOVE && inDrag!=null) {
            setDragImagePosition(x, y);
            result=true;
        }
        else if (action==MotionEvent.ACTION_UP && inDrag!=null) {
            dragImage.setVisibility(View.GONE);

            GeoPoint pt=map.getProjection().fromPixels(x-xDragTouchOffset,
                    y-yDragTouchOffset);

            slatlng[0] = pt.getLatitudeE6()/1E6;
            slatlng[1] = pt.getLongitudeE6()/1E6; 

            urlString = getUrl(slatlng[0], slatlng[1], dlatlng[0],dlatlng[1]);

            try {
                distance = getDistance(urlString);
            } catch (Exception e) {
                e.printStackTrace();
            }           
            System.out.println("Distance : "+distance);
            System.out.println("Lat : " +slatlng[0]+"Lng :"+slatlng[1]);
            OverlayItem toDrop=new OverlayItem(pt, inDrag.getTitle(),
                    inDrag.getSnippet());

            items.add(toDrop);
            populate();

            inDrag=null;
            result=true;
        }

        return(result || super.onTouchEvent(event, mapView));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:39:36.263

使用 Location 类来解决您的问题。

```
 Location locationA = new Location("point A");  

locationA.setLatitude(pointA.getLatitudeE6() / 1E6);  
locationA.setLongitude(pointB.getLongitudeE6() / 1E6);  

Location locationB = new Location("point B");  

locationB.setLatitude(pointB.getLatitudeE6() / 1E6);  
locationB.setLongitude(pointB.getLongitudeE6() / 1E6);  

double distance = locationA.distanceTo(locationB); 
```

[在Location](http://developer.android.com/reference/android/location/Location.html)检查 Location 类方法

# symfony - 我应该在数据库迁移中执行插入吗？

> ID：11206179
> 
> 赞同：2
> 
> 时间：2012-06-26T11:18:10.547
> 
> 标签：symfony, doctrine, doctrine-orm, migration

我有表格**"course"**、**"tab"**和**"courses_tabs** "。最后一个包含应在课程中显示的选项卡。我已经为这些表的数据库结构生成了迁移，现在我需要填写**“courses_tabs”**，为每门课程添加所有选项卡。

我想知道哪种方式适合该任务：
**我应该使用 INSERT 和 foreach 循环创建 Doctrine2 迁移（docrine2 不允许运行查询以获取 id 列表）还是创建命令并手动运行一次并且只运行一次？**

# javascript - 在 jQuery 加载命令之后，有没有办法强制等待 html 被渲染到 div 中？

> ID：11206183
> 
> 赞同：0
> 
> 时间：2012-06-26T11:18:20.450
> 
> 标签：javascript, jquery, ajax

我（基本上）有这个代码 -

```
<script type="text/javascript" language="javascript">
    $(document).ready(function() {
        $("#loadDiv").load("mypage.html", function(){ alert($("#someText").text()) });
    });
</script>
<div id="loadDiv"></div> 
```

但是，由于 html 尚未呈现到 div 中，因此警报将显示“未定义”。

我已经看到了这个问题——[如何在执行回调函数之前等待 jQuery 的加载函数来渲染加载的内容](https://stackoverflow.com/questions/3085954/how-to-wait-for-jquerys-load-function-to-render-loaded-content-before-executing)——杰克的回答是最适合我的情况。在我的实际页面上，我有 8 个，延迟两秒，在呈现 html 之前仍有一些在运行。

有没有人有比增加延迟到愚蠢时间更好的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:21:51.853

您应该能够将代码包装在`setTimeout()`具有超时时间的回调中`0`（浏览器旨在以`4`微秒为单位进行钳制，但并非所有浏览器都这样做）。

这会将代码推送到事件队列中，让浏览器有机会在代码执行之前进行渲染。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:47:43.213

根据[文档](http://api.jquery.com/load/)，该`load`方法在调用函数之前已经等待将内容放入元素中：

> “如果提供了“完成”回调，则在执行后处理和 HTML 插入后执行。”

我已经对此进行了测试，它确实在回调函数运行时在元素中找到了加载的内容。

如果它在您的代码中不起作用，那么您正在尝试做的不是您在问题中显示的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:28:51.160

您可以将 html 设置为空（如果在加载请求时 div 中没有其他 html 元素）。成功（完成事件）后，您加载内容（现在我不知道响应是 html 还是文本，我已经按照您的代码完成了示例）。如果请求失败，您还可以设置预定义文本。

检查此链接以获取更多信息[jquery\load](http://api.jquery.com/load/)，但这应该可以工作

```
$("#loadDiv").load("mypage.html", function(response, status, xhr) {
  if (status == "success") {
    $("#loadDiv").html("");
  }
  else if(status == "complete"){
          $("#loadDiv").text();
   }
}); 
```

# c# - disqus API 缺少必需参数：grant_type

> ID：11206184
> 
> 赞同：3
> 
> 时间：2012-06-26T11:18:24.500
> 
> 标签：c#, api, url, oauth-2.0, disqus

我正在尝试通过 disqus API 检索 access_token。

这是我的网址：

```
https://disqus.com/api/oauth/2.0/access_token/?client_id=cvwNO7HaRwgYDq9anat8j7uzowJ8HBEz8gH7mUnmMhC0BKZZTkObc5d7o242liNG&grant_type=authorization_code&client_secret=Hrrgy1ZLcLN0qjmZhzXR2owET8cGazcbcGNxTlsWEJYiNfc3JcQLbKx2PYW6yNU7&redirect_uri=http://www.aftenposten.no&code=PM6QYwUJ 
```

我收到一个错误：缺少必需的参数：grant_type

我正在使用以下代码来获取响应：

```
HttpWebRequest request = HttpWebRequest.CreateHttp(uri);
request.Method = "POST";
request.BeginGetResponse(new AsyncCallback(getAccessTokenResponse), request); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-16T18:17:46.993

您需要在请求正文中传递表单数据，而不是作为 url 参数。试试这个：

```
var uri = "https://disqus.com/api/oauth/2.0/access_token/"
HttpWebRequest request = HttpWebRequest.CreateHttp(uri);
var data = "client_id=[your client id]"
data += "&grant_type=authorization_code"
data += "&client_secret=[your client secret]"
data += "&redirect_uri=http://www.aftenposten.no&code=PM6QYwUJ"
var postData = Encoding.ASCII.GetBytes(data);

request.Method = "POST";
request.ContentType = "application/x-www-form-urlencoded";
request.ContentLength = postData.Length;

using (var stream = request.GetRequestStream())
{
    stream.Write(data, 0, data.Length);
}

var response = (HttpWebResponse)request.GetResponse();
var responseString = new StreamReader(response.GetResponseStream()).ReadToEnd(); 
```

# asp.net - C# 插入 FK 表 asp.net

> ID：11206186
> 
> 赞同：-1
> 
> 时间：2012-06-26T11:18:27.893
> 
> 标签：asp.net

如何在 asp.net 中插入外键表？我只是在插入外部属性时遇到问题。我需要使用 FK 属性（即部门 ID）插入员工表中。我对这个查询有疑问：

```
string insCmd = "insert into emp(id, name, phone, email) values (@id, @name, @phone, @email); select identity_scope;"; 
```

我没有收到任何错误，但没有发生插入。谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:03:08.953

好吧，我发现您的插入语句存在两个问题。

1.  是`SCOPE_IDENTITY()`，不是`identity_scope`。
2.  您正在尝试插入到`id`列中，如果将其定义为 IDENTITY 列，则不允许这样做。

将您的声明更改为：

```
string insCmd = "insert into emp(name, phone, email) values (@name, @phone, @email); select @id = SCOPE_IDENTITY()"; 
```

此外，您应该定义`@id`为输出参数。

# liferay - 我们如何识别 Liferay DB 中的站点模板和页面模板信息

> ID：11206190
> 
> 赞同：2
> 
> 时间：2012-06-26T11:18:43.337
> 
> 标签：liferay

我已经创建了页面模板和网站模板。我想根据用户角色将站点模板动态分配给社区。

我怎样才能通过代码实现它。

我可以从哪个表中获取站点模板和页面模板信息。

如果我知道模板的详细信息，那么我可以将其动态分配给社区。

需要解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T11:53:04.490

`Page template`存储在`LayoutPrototype`表中。

`Site template`存储在`LayoutsetPrototype`表中。

# jqgrid - 忽略大小写敏感的sopt值

> ID：11206192
> 
> 赞同：0
> 
> 时间：2012-06-26T11:18:57.533
> 
> 标签：jqgrid, struts2

在我给出的 struts2jquery 网格中

```
<sj:gridColumn name="processName" index="processName" title="Process Name" search="true" searchoptions="{sopt: ['bw','cn']}"/> 
```

对于sopt，我们的值如下

`{sopt:['eq','ne','lt','le','gt','ge','bw','bn','in','ni','ew','en','cn','nc']}`

现在我想通过忽略字母大小写来获取网格中的数据。但是，如果我们以与存储相同的方式进行搜索，它就会过滤数据。IE; （比如说）如果我存储以“D”开头的数据，它将不会过滤以“d”开头的数据。我该如何解决这个问题。有什么选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T14:19:03.797

这个链接应该可以帮助你[struts2 jquery plugin wiki grid](http://code.google.com/p/struts2-jquery/wiki/SearchGrid)。

您应该定义自己的搜索操作类来进行搜索。顺便说一句，应该是**`<sjg:gridColumn/>`**o_O

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:10:31.877

我用 JavaScript 找到了解决方案：

```
<%@ taglib prefix="s" uri="/struts-tags"%>
<%@ taglib prefix="sj" uri="/struts-jquery-tags"%>
<%@ taglib prefix="sjg" uri="/struts-jquery-grid-tags"%>
<div id="prije">Prije</div>

<s:url var="remoteurl" action="jsontable" />

<sjg:grid id="gridtableID" 

    caption="Primjer JSON TABELE" 
    dataType="json"
    href="%{remoteurl}" 
    gridModel="gridModel" 
    viewrecords="true"
    pager="true"
    pagerPosition="centar"
    navigator="true"
    navigatorSearch="true"
    filter="true"
    filterOptions="{stringResult:true}"
    loadonce="true"

     >

    <sjg:gridColumn name="id"
        index="id" title="ID" 
        formatter="integer"
        search="false"
        searchoptions="{sopt:['cn','eq','ne','bw','bn','ew','en','nc']}"
        editable="false" />
    <sjg:gridColumn name="name" index="name" title="Name" sortable="true"
        search="true"
        searchoptions="{sopt:['cn','eq','ne','bw','bn','ew','en','nc']}" />
    <sjg:gridColumn name="country" index="country" title="Country"
        search="true"
        searchoptions="{sopt:['cn','eq','ne','bw','bn','ew','en','nc']}"/>
    <sjg:gridColumn name="city" index="city" title="City" search="true"
        searchoptions="{sopt:['cn','eq','ne','bw','bn','ew','en','nc']}" />
    <sjg:gridColumn name="creditLimit" index="creditLimit"
        title="Credit Limit" formatter="currency" search="true"
        searchoptions="{sopt:['cn','eq','ne','bw','bn','ew','en','nc']}"/>

</sjg:grid>

<script>
$(document).ready(function(){
    $("#gridtableID").jqGrid('setGridParam', { ignoreCase: true});
    });
</script> 
```

# java - 如何使用 SFTP 使用 Java 的公共私钥身份验证的可靠示例

> ID：11206197
> 
> 赞同：18
> 
> 时间：2012-06-26T11:19:12.243
> 
> 标签：java, sftp

最近，我们的一个客户意外地将我们从 ftp 收集的一些重要文件转移到了 sftp 服务器。最初我的印象是编写或找到一个可以处理 sftp 的 java 实用程序会很简单，但事实证明并非如此。使这个问题更加复杂的是我们正试图从 Windows 平台连接到 sftp 服务器（因此 SSH_HOME 在客户端上的位置的定义变得非常混乱）。

我一直在使用 apache-commons-vfs 库并设法获得了一个可靠地用于用户名/密码身份验证的解决方案，但到目前为止还没有任何东西可以可靠地处理私钥/公钥身份验证。

以下示例适用于用户名/密码身份验证，但我想将其调整为私钥/公钥身份验证。

```
public static void sftpGetFile(String server, String userName,String password, 
        String remoteDir, String localDir, String fileNameRegex)
    {

       File localDirFile  = new File(localDir);
       FileSystemManager fsManager = null;

       if (!localDirFile.exists()) {
           localDirFile.mkdirs();
       }

       try {
           fsManager = VFS.getManager();
       } catch (FileSystemException ex) {
           LOGGER.error("Failed to get fsManager from VFS",ex);
           throw new RuntimeException("Failed to get fsManager from VFS", ex);
       }

       UserAuthenticator auth = new StaticUserAuthenticator(null, userName,password);

       FileSystemOptions opts = new FileSystemOptions();

       try {
           DefaultFileSystemConfigBuilder.getInstance().setUserAuthenticator(opts,
                   auth);
       } catch (FileSystemException ex) {
           LOGGER.error("setUserAuthenticator failed", ex);
           throw new RuntimeException("setUserAuthenticator failed", ex);
       }
       Pattern filePattern = Pattern.compile(fileNameRegex);
       String startPath = "sftp://" + server + remoteDir;
       FileObject[] children;

       // Set starting path on remote SFTP server.
       FileObject sftpFile;
       try {
           sftpFile = fsManager.resolveFile(startPath, opts);

           LOGGER.info("SFTP connection successfully established to " +
                   startPath);
       } catch (FileSystemException ex) {
           LOGGER.error("SFTP error parsing path " +
                   remoteDir,
                   ex);

           throw new RuntimeException("SFTP error parsing path " +
                   remoteDir,
                   ex);
       }

       // Get a directory listing
       try {
           children = sftpFile.getChildren();
       } catch (FileSystemException ex) {
           throw new RuntimeException("Error collecting directory listing of " +
                   startPath, ex);
       }

       search:
       for (FileObject f : children) {
           try {
               String relativePath =
                       File.separatorChar + f.getName().getBaseName();

               if (f.getType() == FileType.FILE) {
                   System.out.println("Examining remote file " + f.getName());

                   if (!filePattern.matcher(f.getName().getPath()).matches()) {
                       LOGGER.info("  Filename does not match, skipping file ." +
                               relativePath);
                       continue search;
                   }

                   String localUrl = "file://" + localDir + relativePath;
                   String standardPath = localDir + relativePath;
                   System.out.println("  Standard local path is " + standardPath);
                   LocalFile localFile =
                           (LocalFile) fsManager.resolveFile(localUrl);
                   System.out.println("    Resolved local file name: " +
                           localFile.getName());

                   if (!localFile.getParent().exists()) {
                       localFile.getParent().createFolder();
                   }

                   System.out.println("  ### Retrieving file ###");
                   localFile.copyFrom(f,
                           new AllFileSelector());
               } else {
                   System.out.println("Ignoring non-file " + f.getName());
               }
           } catch (FileSystemException ex) {
               throw new RuntimeException("Error getting file type for " +
                       f.getName(), ex);
           }

       }

       FileSystem fs = null;
       if (children.length > 0) {
           fs = children[0].getFileSystem(); // This works even if the src is closed.
           fsManager.closeFileSystem(fs);
       }
    } 
```

我的私钥存储在已知位置，并且我的公钥已分发到服务器（我们已经测试这些密钥在使用其他工具连接时可以成功工作）

我玩过添加以下行

```
SftpFileSystemConfigBuilder.getInstance().setIdentities(this.opts, new File[]{new File("c:/Users/bobtbuilder/.ssh/id_dsa.ppk")}); 
```

这成功地将私钥加载到整个框架中，但它永远不会使用该密钥进行进一步的身份验证。

最热烈地接受的任何帮助或指导

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-28T10:59:05.827

经过大量挖掘，我终于自己得到了答案。似乎我的大部分烦恼与私钥和公钥的格式有关

privateKey 必须是 openSSH 格式 publicKey 出于某种原因只能从 puttyGen 窗口粘贴（导出公钥似乎总是给它缺少标头，这意味着 freeSSHD windows 服务器无法使用它）

无论如何，下面是我最终想出的代码，包括javadoc，所以希望可以为其他人节省我所经历的痛苦

```
/**
* Fetches a file from a remote sftp server and copies it to a local file location.  The authentication method used
* is public/private key authentication. <br><br>

* IMPORTANT: Your private key must be in the OpenSSH format, also it must not have a passphrase associated with it.
*    (currently the apache-commons-vfs2 library does not support passphrases)<p>
* 
* Also remember your public key needs to be on the sftp server.  If you were connecting as user 'bob' then your
* public key will need to be in '.ssh/bob' on the server (the location of .ssh will change depending on the type
* of sftp server)
* 
* @param server The server we care connection to 
* @param userName The username we are connection as
* @param openSSHPrivateKey The location of the  private key (which must be in openSSH format) on the local machine
* @param remoteDir The directory from where you want to retrieve the file on the remote machine (this is in reference to SSH_HOME, SSH_HOME is the direcory you 
* automatically get directed to when connecting)
* @param remoteFile The name of the file on the remote machine to be collected (does not support wild cards)
* @param localDir The direcoty on the local machine where you want the file to be copied to
* @param localFileName The name you wish to give to retrieved file on the local machine
* @throws IOException - Gets thrown is there is any problem fetching the file
*/
public static void sftpGetFile_keyAuthentication(String server, String userName, String openSSHPrivateKey,
    String remoteDir,String remoteFile, String localDir, String localFileName) throws IOException
{

   FileSystemOptions fsOptions = new FileSystemOptions();
   FileSystemManager fsManager = null;
   String remoteURL = "sftp://" + userName + "@" + server + "/" + remoteDir + "/" + remoteFile;
   String localURL  = "file://" + localDir + "/" + localFileName;

    try {
        SftpFileSystemConfigBuilder.getInstance().setStrictHostKeyChecking(fsOptions, "no");
        SftpFileSystemConfigBuilder.getInstance().setIdentities(fsOptions, new File[]{new File(openSSHPrivateKey)});
        fsManager = VFS.getManager();
        FileObject remoteFileObject = fsManager.resolveFile(remoteURL, fsOptions);
        LocalFile localFile =
                   (LocalFile) fsManager.resolveFile(localURL);
        localFile.copyFrom(remoteFileObject,
                   new AllFileSelector());
    } catch (FileSystemException e) {
        LOGGER.error("Problem retrieving from " + remoteURL + " to " + localURL,e );
        throw new IOException(e);
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-05-11T20:52:20.580

我想这就是你要找的 -

```
/**
* @param args
*/
public static void main(String[] args) {

    /*Below we have declared and defined the SFTP HOST, PORT, USER
            and Local private key from where you will make connection */
    String SFTPHOST = "10.20.30.40";
    int    SFTPPORT = 22;
    String SFTPUSER = "kodehelp";
    // this file can be id_rsa or id_dsa based on which algorithm is used to create the key
    String privateKey = "/home/kodehelp/.ssh/id_rsa";
    String SFTPWORKINGDIR = "/home/kodehelp/";

    JSch jSch = new JSch();
    Session     session     = null;
    Channel     channel     = null;
    ChannelSftp channelSftp = null;
    try {
        jSch.addIdentity(privateKey);
        System.out.println("Private Key Added.");
        session = jSch.getSession(SFTPUSER,SFTPHOST,SFTPPORT);
        System.out.println("session created.");

        java.util.Properties config = new java.util.Properties();
        config.put("StrictHostKeyChecking", "no");
        session.setConfig(config);
        session.connect();
        channel = session.openChannel("sftp");
        channel.connect();
        System.out.println("shell channel connected....");
        channelSftp = (ChannelSftp)channel;
        channelSftp.cd(SFTPWORKINGDIR);
        System.out.println("Changed the directory...");
    } catch (JSchException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SftpException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }finally{
        if(channelSftp!=null){
            channelSftp.disconnect();
            channelSftp.exit();
        }
        if(channel!=null) channel.disconnect();

        if(session!=null) session.disconnect();
    }
} 
```

更多信息请访问

[http://kodehelp.com/sftp-connection-public-key-authentication-java/](http://kodehelp.com/sftp-connection-public-key-authentication-java/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-09T15:24:26.500

这个帖子和答案非常有帮助，非常感谢。

我只想在语句“*当前 apache-commons-vfs2 库不支持密码短语*”中添加一个集成，因为我也使用密码短语并且它有效。

您必须在您的项目中导入 jsch 库（我使用的是 0.1.49）并实现接口“com.jcraft.jsch.UserInfo”。

这样的事情应该没问题：

```
public class SftpUserInfo implements UserInfo {

    public String getPassphrase() {
        return "yourpassphrase";
    }

    public String getPassword() {
        return null;
    }

    public boolean promptPassphrase(String arg0) {
        return true;
    }

    public boolean promptPassword(String arg0) {
        return false;
    }
} 
```

然后你可以通过这种方式将它添加到 SftpFileSystemConfigBuilder 中：

```
SftpFileSystemConfigBuilder.getInstance().setUserInfo(fsOptions, new SftpUserInfo()); 
```

希望这可以帮助。

# mysql - 如何总结1列并将其设置为新表中的新记录（每个成员每月的总时间）

> ID：11206199
> 
> 赞同：0
> 
> 时间：2012-06-26T11:19:15.817
> 
> 标签：mysql, time, sum

如何汇总表中记录的`czas`列并将其设置为新表的（时间）列中的新记录（每个成员每月的总时间）？`time(H:m)``raport``june`

我正在尝试这样的事情，但它不起作用：

```
mysql_query("INSERT INTO time (czerwiec) SELECT SUM(czas) FROM raport WHERE data BETWEEN '2012-06-01' AND '2012-06-30'") or die ('{"success":"false"}'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:49:46.357

试试这个 SELECT 查询 -

```
SELECT
  SEC_TO_TIME(SUM(TIME_TO_SEC(czas))) time_sum
FROM
  raport
-- WHERE
--   YEAR(data) = 2012 AND MONTH(data) = 6
GROUP BY
  YEAR(data), MONTH(data) 
```

取消注释 WHERE 条件以过滤日期。

然后使用[INSERT...SELECT](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)构造填充另一个表。

# ios - 在 ios 上使用文本自定义图像的最佳方法

> ID：11206200
> 
> 赞同：0
> 
> 时间：2012-06-26T11:19:16.853
> 
> 标签：ios, custom-component, quartz-core

我有一个定制衣服的项目，比如说一件 T 恤，它具有以下特点：

*   改变颜色。
*   添加几行文本（<= 4）并从列表中更改字体。
*   将图像或照片添加到 T 恤。
*   将 T 恤旋转到自定义背面。
*   旋转图像并放大/缩小。
*   将结果保存为本地项目并将其发送到网络服务（我认为使用 NSDictionary/json ）。
*   另存为图像。

所以我的问题是：

我应该使用多个图像来模拟颜色变化吗？或者我应该使用 QuartzCore（我不是 QuartzCore 方面的专家，但如果我必须使用它，我会学习）。或者有更好的方法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T14:02:46.100

执行此操作的简单方法是将 T 恤图像渲染到 CGContext 中，然后遍历行和列并将显示“强”原色的像素更改为所需的色调。您将拍摄一个穿着鲜红色（或其他原色）T 恤的人的照片，然后在您的代码中仅更改红色具有高亮度和饱和度的像素（即“r”值超过某个阈值b 和 g 分量很低）。

修改后的图像看起来会有点平坦，因为当您将像素更改为一个值（新色调）时，亮度不会发生变化。为了使这更真实，您需要使每个像素具有与以前相同的亮度。您可以通过从 RGB 到 HCL 等颜色空间来回转换来做到这一点。Apple 有一个很棒的关于颜色的文档（在 Mac 部分），它解释了颜色空间（google 'site:developer.apple.com "Color Spaces"'）

为了实现您的目标，您将不得不处理这些技术：

*   创建一个 CGContext 并使用 Quartz 将图像渲染到其中
*   弄清楚如何读取每个像素（像素可以有 alpha 和不同的排序）
*   找出识别正确像素的好方法（通过使这些像素变为黑色或白色来测试）
*   对于要更改的每个像素，将 RGB 转换为 HCL 以获取其亮度
*   用颜色和色调不同但亮度相同的像素替换像素
*   使用 CGContext 制作新图像

如果这一切看起来很困难，那么您必须为您想要的每种颜色提供不同的图像。

# .net - wcf tcp 异步流式传输是可能的吗？

> ID：11206201
> 
> 赞同：1
> 
> 时间：2012-06-26T11:19:23.663
> 
> 标签：.net, wcf, tcp

我有一个使用 tcp 的服务，我所有的方法都是异步的，所以我实现了 Begin/End 方法（我使用 C# 4.0）。

如果我只修改了我的 app.confing 以将传输模式设置为 Streamed 而不是 Buffered，那么当我在客户端进行异步调用时，应用程序将永远等待响应。但是，如果我将传输模式更改为缓冲，那么它工作正常。

另外我注意到我需要在缓冲传输模式下使用可靠会话，因为当我启动应用程序时，我收到错误 10061，即目标服务主动拒绝连接。

我知道如果我想使用流传输模式，我不需要禁用 dereliableSession，所以我问是否可以将流传输模式与异步方法一起使用。

谢谢。

编辑：我正在尝试传输一个 5MB 的文件。但是，这是一个测试，因为在生产中，文件可以更大，所以我想为将来的需要做好准备。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T18:25:03.150

答案是肯定的，您可以在异步方法上使用流传输模式。下面的链接将带您进入 MSDN 文章，该文章描述了使用异步方法实现流式传输功能所必须采取的必要步骤。

以下帖子应澄清您的情况：[http ://social.msdn.microsoft.com/Forums/en-US/wcf/thread/4893f3c9-2a38-462f-b49c-afa833a3760a/](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/4893f3c9-2a38-462f-b49c-afa833a3760a/)

此外，另一篇文章详细解释了如何使用代码示例创建自托管 REST WCF 服务，该服务提供使用流模式和异步方法上传/下载大文件的功能。您可以使用基于 SOAP 的服务来实现相同的目的。与配置相关的事情是将您的传输模式设置为流式传输并增加超时值。有关完整的实施示例，请查看此链接： http: [//www.level533.com/2010/11/uploading-large-files-to-self-hosted-wcf-rest-service/](http://www.level533.com/2010/11/uploading-large-files-to-self-hosted-wcf-rest-service/)

PS：我无法提供此答案中的所有内容，否则这将成为一篇成熟的文章。

# java - 基于 Java 生成的 RSA 密钥的 JavaScript 加密

> ID：11206202
> 
> 赞同：0
> 
> 时间：2012-06-26T11:19:32.177
> 
> 标签：java, javascript, encryption, rsa

我正在尝试实现 Java 和 JavaScript 之间的加密解决方案。

在 Java 端，我有以下静态块：

```
public class Manager {

  public static KeyPairGenerator keyPairGenerator;
  public static KeyPair keyPair;

  static{       
      try {
        keyPairGenerator = KeyPairGenerator.getInstance("RSA");
        keyPairGenerator.initialize(1024);
        keyPair = keyPairGenerator.genKeyPair();
      } catch (NoSuchAlgorithmException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
      }
  }
  ...
} 
```

一旦我的服务器启动并运行，这基本上会生成一个新的密钥对......

然后我以 JSON 格式给出公钥：

```
<%
JSONObject json = new JSONObject();
json.put("publicKey", "-----BEGIN PUBLIC KEY-----" + Base64.encodeBase64URLSafeString(Manager.keyPair.getPublic().getEncoded()) + "-----END PUBLIC KEY-----");
%> 
```

我想使用该密钥（无论是 1024 位还是 2048 位）对来自客户端表单的信息进行编码......谁知道如何使用 RSA 1024 位、base64 编码的公钥对信息进行编码？

我尝试了 jCryption 和严重的其他库无济于事......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T00:23:52.197

如果您不将公钥作为证书发送，最好单独发送模数和公共指数（例如，在单独的字段中编码的 base 64）。默认编码将生成 X509 SubjectPublicKeyInfo ASN.1 结构，您需要在 JavaScript 库中对其进行解析。

请注意，您只是在防止窃听者；中间人攻击仍然可行，因为它们可以用自己的公钥替换您的公钥。RSA 1024 现在当然已经过时了。幸运的是，您仍然有 TLS/SSL 来保护您。

# ruby-on-rails - 不要让 `should validate_inclusion_of` 在 Rails3.2、RSpec2 中工作

> ID：11206205
> 
> 赞同：1
> 
> 时间：2012-06-26T11:19:36.143
> 
> 标签：ruby-on-rails, ruby, rspec

模型：

```
class Contact < ActiveRecord::Base
  validates :gender, :inclusion => { :in => ['male', 'female'] }
end 
```

移民：

```
class CreateContacts < ActiveRecord::Migration
  def change
    create_table "contacts", :force => true do |t|
      t.string  "gender",  :limit => 6, :default => 'male'
    end
  end
end 
```

RSpec 测试：

```
describe Contact do
  it { should validate_inclusion_of(:gender).in(['male', 'female']) }
end 
```

结果：

```
Expected Contact to be valid when gender is set to ["male", "female"] 
```

有人知道为什么这个规范没有通过吗？或者任何人都可以重建和（in）验证它吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:49:55.203

我误解了`.in(..)`应该如何使用。我以为我可以传递一个值数组，但它似乎只接受一个值：

```
describe Contact do
  ['male', 'female'].each do |gender|
    it { should validate_inclusion_of(:gender).in(gender) }
  end
end 
```

我真的不知道使用有什么区别`allow_value`：

```
['male', 'female'].each do |gender|
  it { should allow_value(gender).for(:gender) }
end 
```

而且我想检查一些不允许的值也总是一个好主意：

[:no, :valid, :gender].each 都做 |gender| 它 { should_not validate_inclusion_of(:gender).in(gender) } end

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:32:25.557

我通常更喜欢直接测试这些东西。例子：

```
%w!male female!.each do |gender|
  it "should validate inclusion of #{gender}" do
    model = Model.new(:gender => gender)
    model.save
    model.errors[:gender].should be_blank
  end
end

%w!foo bar!.each do |gender|
  it "should validate inclusion of #{gender}" do
    model = Model.new(:gender => gender)
    model.save
    model.errors[:gender].should_not be_blank
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-27T18:29:33.990

你需要使用`in_array`

从文档：

```
 # The `validate_inclusion_of` matcher tests usage of the
  # `validates_inclusion_of` validation, asserting that an attribute can
  # take a whitelist of values and cannot take values outside of this list.
  #
  # If your whitelist is an array of values, use `in_array`:
  #
  #     class Issue
  #       include ActiveModel::Model
  #       attr_accessor :state
  #
  #       validates_inclusion_of :state, in: %w(open resolved unresolved)
  #     end
  #
  #     # RSpec
  #     describe Issue do
  #       it do
  #         should validate_inclusion_of(:state).
  #           in_array(%w(open resolved unresolved))
  #       end
  #     end
  #
  #     # Test::Unit
  #     class IssueTest < ActiveSupport::TestCase
  #       should validate_inclusion_of(:state).
  #         in_array(%w(open resolved unresolved))
  #     end
  #
  # If your whitelist is a range of values, use `in_range`:
  #
  #     class Issue
  #       include ActiveModel::Model
  #       attr_accessor :priority
  #
  #       validates_inclusion_of :priority, in: 1..5
  #     end
  #
  #     # RSpec
  #     describe Issue do
  #       it { should validate_inclusion_of(:state).in_range(1..5) }
  #     end
  #
  #     # Test::Unit
  #     class IssueTest < ActiveSupport::TestCase
  #       should validate_inclusion_of(:state).in_range(1..5)
  #     end
  # 
```

# javascript - 将 MouseHover 事件更改为 Tooltip 的 Onclick 事件

> ID：11206210
> 
> 赞同：2
> 
> 时间：2012-06-26T11:19:42.900
> 
> 标签：javascript, jquery, jquery-events, jquery-ui-tooltip

我有一个用于鼠标悬停工具提示的 JS，

我应该改变什么来将鼠标悬停转换为这个 JS 中的 onclick 事件。

我尝试更换一些但没有用！这是下面的JS。但它没有用，而是显示错误。

可以完成还是需要更改所有代码！

```
var htmltooltip={
tipclass: 'htmltooltip',
fadeeffect: [true, 500],
anchors: [],
tooltips: [], //array to contain references to all tooltip DIVs on the page

positiontip:function($, tipindex, e){
    var anchor=this.anchors[tipindex]
    var tooltip=this.tooltips[tipindex]
    var scrollLeft=window.pageXOffset? window.pageXOffset : this.iebody.scrollLeft
    var scrollTop=window.pageYOffset? window.pageYOffset : this.iebody.scrollTop
    var docwidth=(window.innerWidth)? window.innerWidth-15 : htmltooltip.iebody.clientWidth-15
    var docheight=(window.innerHeight)? window.innerHeight-18 : htmltooltip.iebody.clientHeight-15
    var tipx=anchor.dimensions.offsetx
    var tipy=anchor.dimensions.offsety+anchor.dimensions.h
    tipx=(tipx+tooltip.dimensions.w-scrollLeft>docwidth)? tipx-tooltip.dimensions.w : tipx //account for right edge
    tipy=(tipy+tooltip.dimensions.h-scrollTop>docheight)? tipy-tooltip.dimensions.h-anchor.dimensions.h : tipy //account for bottom edge
    $(tooltip).css({left: tipx, top: tipy})
},

showtip:function($, tipindex, e){
    var tooltip=this.tooltips[tipindex]
    if (this.fadeeffect[0])
        $(tooltip).hide().fadeIn(this.fadeeffect[1])
    else
        $(tooltip).show()
},

hidetip:function($, tipindex, e){
    var tooltip=this.tooltips[tipindex]
    if (this.fadeeffect[0])
        $(tooltip).fadeOut(this.fadeeffect[1])
    else
        $(tooltip).hide()   
},

updateanchordimensions:function($){
    var $anchors=$('*[@rel="'+htmltooltip.tipclass+'"]')
    $anchors.each(function(index){
        this.dimensions={w:this.offsetWidth, h:this.offsetHeight, offsetx:$(this).offset().left, offsety:$(this).offset().top}
    })
},

render:function(){
    jQuery(document).ready(function($){
        htmltooltip.iebody=(document.compatMode && document.compatMode!="BackCompat")? document.documentElement : document.body
        var $anchors=$('*[@rel="'+htmltooltip.tipclass+'"]')
        var $tooltips=$('div[@class="'+htmltooltip.tipclass+'"]')
        $anchors.each(function(index){ //find all links with "title=htmltooltip" declaration
            this.dimensions={w:this.offsetWidth, h:this.offsetHeight, offsetx:$(this).offset().left, offsety:$(this).offset().top} //store anchor dimensions
            this.tippos=index+' pos' //store index of corresponding tooltip
            var tooltip=$tooltips.eq(index).get(0) //ref corresponding tooltip
            if (tooltip==null) //if no corresponding tooltip found
                return //exist
            tooltip.dimensions={w:tooltip.offsetWidth, h:tooltip.offsetHeight}
            $(tooltip).remove().appendTo('body') //add tooltip to end of BODY for easier positioning
            htmltooltip.tooltips.push(tooltip) //store reference to each tooltip
            htmltooltip.anchors.push(this) //store reference to each anchor
            var $anchor=$(this)
            $anchor.hover(
                function(e){ //onMouseover element
                    htmltooltip.positiontip($, parseInt(this.tippos), e)
                    htmltooltip.showtip($, parseInt(this.tippos), e)
                },
                function(e){ //onMouseout element
                    htmltooltip.hidetip($, parseInt(this.tippos), e)
                }
            )
            $(window).bind("resize", function(){htmltooltip.updateanchordimensions($)})
        })
    })
}
}

htmltooltip.render() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:34:08.457

如我所见（尚未尝试过），您只需更换

```
$anchor.hover( 
            function(e){ //onMouseover element 
                htmltooltip.positiontip($, parseInt(this.tippos), e) 
                htmltooltip.showtip($, parseInt(this.tippos), e) 
            }, 
            function(e){ //onMouseout element 
                htmltooltip.hidetip($, parseInt(this.tippos), e) 
            } 
        ) 
```

和

```
$anchor.click( 
            function(e){ //onMouseover element 
                htmltooltip.positiontip($, parseInt(this.tippos), e) 
                htmltooltip.showtip($, parseInt(this.tippos), e) 
            }
        ) 
```

但是您必须在工具提示中添加一个“关闭”按钮才能再次隐藏它。或您想要的任何其他解决方案/行为。

**更新：**

您可以尝试设置工具提示的“onclick”处理程序。可能看起来像：

```
showtip:function($, tipindex, e){   
    var tooltip=this.tooltips[tipindex]   
    if (this.fadeeffect[0])   
        $(tooltip).hide().fadeIn(this.fadeeffect[1])   
    else   
        $(tooltip).show()  

    $(tooltip).bind('click', 
        function(e) 
        {
            htmltooltip.hidetip($, tipindex, e);
        }
    ); 
},

hidetip:function($, tipindex, e){             
    var tooltip=this.tooltips[tipindex]             
    if (this.fadeeffect[0])             
        $(tooltip).fadeOut(this.fadeeffect[1])             
    else             
        $(tooltip).hide()  

    $(tooltip).unbind('click');              
}, 
```

但这只是一个想法......用户必须点击工具提示而不是按钮......

另一种方法是在您的工具提示中使用 id，在带有前缀左右的关闭按钮上使用相同的 id（例如“tooltip1_closeButton”）。比您可以在“渲染”功能中附加按钮的 onclick 事件，例如

```
$(tooltip.id + "_closeButton").bind("click", 
    function(e)
    {
        htmltooltip.hidetip($, parseInt(this.tippos), e) 
    } 
```

# jquery - 切换框关闭，其他打开？

> ID：11206211
> 
> 赞同：3
> 
> 时间：2012-06-26T11:19:49.030
> 
> 标签：jquery, toggle

有人可以帮我解决这个代码吗，如果你知道怎么做，我认为它很容易..？

当前单击以切换框出现在下面。

我需要它，所以当您单击另一个切换按钮时，当前打开的框会关闭，因此它们基本上不可能同时打开？

但是您仍然可以正常切换每个单独的打开/关闭，就在它打开时另一个（如果打开）也关闭。

到目前为止.. [http://jsfiddle.net/CkTRA/380/](http://jsfiddle.net/CkTRa/380/)

谢谢你。

更新：

它可以与像这样的独立框一起使用吗...？

HTML：

```
<div>
<h3 class = "trigger"> <a href="#box1">Heading 1</a></h3> 
</div>
<div>
<h3 class = "trigger"><a href="#box2">Heading 2</a></h3>
</div>

<div class = "toggle" id="box1">
    box one content
</div>
<div class = "toggle" id="box2">
    box two content
</div>​ 
```

到目前为止的jQuery：

```
$(".trigger").click(function(){
    $(this).next(".toggle").slideToggle("slow");
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:10:59.377

我认为这个简单的代码应该可以完美运行

```
$(".trigger").click(function(){
    $(".trigger").not(this).next(".toggle").slideUp("slow");
    $(this).next(".toggle").slideToggle("slow");
}); 
```

[参见 jsFiddle 演示](http://jsfiddle.net/CkTRa/395/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:37:45.843

这是我对这个问题的解决方案：

```
$(".trigger").click(function() {
    $(this).addClass('current');
    $('.trigger:not(.current)').next(".toggle").slideUp('slow');
    $(this).removeClass('current').next(".toggle").slideToggle("slow");
});​ 
```

[http://jsfiddle.net/paragnair/CkTRA/391/](http://jsfiddle.net/paragnair/CkTRa/391/)

**更新：** 以下示例确保您单击的标题仅在其他标题向上滑动后才会滑动。

```
$(".trigger").click(function() {
    var currentTrigger = $(this);            
    currentTrigger.addClass('current');
    $('.trigger:not(.current)').next(".toggle").slideUp('slow', function(){
        currentTrigger.removeClass('current').next(".toggle").slideToggle("slow");
    });
});​ 
```

[http://jsfiddle.net/paragnair/CkTRa/392/](http://jsfiddle.net/paragnair/CkTRa/392/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:27:09.900

这是一种解决方案：当您单击一个时，您首先关闭所有（如果有），然后打开您单击的那个：

```
$(".trigger").click(function(){
  $(".trigger").next(".toggle").slideUp("slow");
  $(this).next(".toggle").slideDown("slow");
}); 
```

唯一的缺点是，如果您再次单击打开的，您将关闭它并重新打开它，但我不确定这是否会影响您的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T11:24:39.887

最简单的方法是向打开的类添加一个类，并使用该类以打开的类为目标。例如，您可以`open`在打开类时添加一个类，并使用选择器`.open`关闭打开的类：

```
$(".trigger").click(function(){
    $('.open').slideToggle('slow').toggleClass('open');       
    $(this).next(".toggle").toggleClass('open').slideToggle("slow");
 }); 
```

现场示例：http: [//jsfiddle.net/CkTRa/389/](http://jsfiddle.net/CkTRa/389/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T11:44:59.543

更好的方法是：

## *[jsFiddle 演示](http://jsfiddle.net/roXon/tAqm5/)*

*   您可以有 2 个以上的标题。
*   它切换已经打开的
*   如果再次单击它只会关闭打开的那个

jQuery：

```
$('.trigger').next('.toggle').hide();
$('.trigger').click(function() {
    var el = $(this).next('.toggle');
    var doit = el.is(':visible') ? el.slideUp() : ($('.toggle').slideUp()) (el.slideDown());
}); 
```

# iphone - 在视图中添加多个标签

> ID：11206213
> 
> 赞同：0
> 
> 时间：2012-06-26T11:19:50.623
> 
> 标签：iphone, objective-c, ios, xcode, uilabel

我想在我的数组中添加与对象一样多的标签。但是如何对齐它们？？我想要一个在另一个之下，并且页面完成后它应该从下一列开始。但是我尝试使用代码覆盖另一个。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    array = [[ NSMutableArray alloc]initWithObjects:@"aaa",@"bbb",@"ccc",@"ddd",nil];
    for( int i=0;i<[array count];i++)
    {
        NSString *theText = [array lastObject];
        UILabel *label = [[UILabel alloc]init];
        label.text = theText;
        label.backgroundColor = [UIColor clearColor];
        label.lineBreakMode = UILineBreakModeWordWrap;
        label.frame = CGRectMake(0, label.frame.origin.y + label.frame.size.height, size.width + 20, size.height + 20);
        [self.view addSubview:label];
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T11:25:20.103

试试这个代码..

```
array = [[ NSMutableArray alloc]initWithObjects:@"aaa",@"bbb",@"ccc",@"ddd",nil];
UILabel *label;
int y =10;
for( int i=0;i<[array count];i++)
{
    NSString *theText = [array objectAtIndex:i];
    label = [[UILabel alloc]init];
    label.text = theText;
    label.backgroundColor = [UIColor clearColor];
   label.frame = CGRectMake(0, y + label.frame.size.height, size.width + 20,   size.height + 20);
[self.view addSubview:label];
    y = y +label.frame.size.height+5;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:25:21.523

你总是在循环中取最后一个对象。相反，您应该从正确的索引中获取对象。

```
int y = 10;
for( int i=0;i<[array count];i++)
{
    //NSString *theText = [array lastObject]; Wrong One
    NSString *theText = [array objectAtIndex:i]; //Correct One
    ...
    ...
    label.frame = CGRectMake(0, y, size.width + 20,   size.height);
    y += size.height + 5;

} 
```

此外，您需要正确管理 origin.y。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:26:18.790

```
- (void)viewDidLoad
{
    float originFromY = 0;

    [super viewDidLoad];
    array = [[ NSMutableArray alloc]initWithObjects:@"aaa",@"bbb",@"ccc",@"ddd",nil];
    for( int i=0;i<[array count];i++)
    {
         NSString *theText = [array lastObject];
         UILabel *label = [[UILabel alloc]init];
         label.text = theText;
          label.backgroundColor = [UIColor clearColor];
         lineBreakMode:UILineBreakModeWordWrap];
        label.frame = CGRectMake(0, originFromY, 50,40);
       [self.view addSubview:label];
       originFromY += 60;
    }
 } 
```

这可能会帮助你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T11:26:25.547

您修改后的代码

```
- (void)viewDidLoad
{
[super viewDidLoad];
array = [[ NSMutableArray alloc]initWithObjects:@"aaa",@"bbb",@"ccc",@"ddd",nil];
int y = 0;
for( int i=0;i<[array count];i++)
{
    NSString *theText = [array lastObject];
    UILabel *label = [[UILabel alloc]init];
    label.text = theText;
    label.backgroundColor = [UIColor clearColor];
    lineBreakMode:UILineBreakModeWordWrap];
    label.frame = CGRectMake(0, y, size.width + 20, size.height + 20);
    y += size.height + 20;
    [self.view addSubview:label];
}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T11:28:00.570

做这个：

```
- (void)viewDidLoad
{
  [super viewDidLoad];
  array = [[ NSMutableArray alloc]initWithObjects:@"aaa",@"bbb",@"ccc",@"ddd",nil];
  for( int i=0;i<[array count];i++)
  {
    UILabel *label = [[UILabel alloc]init];
    label.text = [array objectAtIndex:i];
    label.backgroundColor = [UIColor clearColor];

    label.frame = CGRectMake(10, (i*30)+10, 100, 30); // here height is 30 and width is 100;
    [self.view addSubview:label];
   }
  } 
```

# android - 位图android的问题

> ID：11206220
> 
> 赞同：0
> 
> 时间：2012-06-26T11:20:22.260
> 
> 标签：android

我正在开发一个应用程序，我可以在其中从 URL 获取图像并将其显示在 imageview 中...现在我已经尝试通过此代码....\

**代码**

```
**
    private Bitmap LoadImage(String URL, BitmapFactory.Options options) {
        Bitmap bitmap = null;
        InputStream in = null;
        try {
            in = OpenHttpConnection(URL);
            bitmap = BitmapFactory.decodeStream(in, null, options);
            in.close();
        } catch (IOException e1) {
            e1.printStackTrace();
        }
        return bitmap;
    }

    private InputStream OpenHttpConnection(String strURL) throws IOException {
        InputStream inputStream = null;
        URL url = new URL(strURL);
        URLConnection conn = url.openConnection();

        try {
            HttpURLConnection httpConn = (HttpURLConnection) conn;
            httpConn.setRequestMethod("GET");
            httpConn.connect();

            if (httpConn.getResponseCode() == HttpURLConnection.HTTP_OK) {
                inputStream = httpConn.getInputStream();
            }
        } catch (Exception ex) {
            ex.printStackTrace();
        }
        return inputStream;
    }

    /*
     * private class FetchImageTask extends AsyncTask<String, Integer, Bitmap> {
     * 
     * @Override protected Bitmap doInBackground(String... arg0) { Bitmap b =
     * null; try { b = BitmapFactory.decodeStream((InputStream) new
     * URL(arg0[0]).getContent()); } catch (MalformedURLException e) {
     * e.printStackTrace(); } catch (IOException e) { e.printStackTrace(); }
     * return b; } }
     */

    private class NearByScreenTask extends AsyncTask<Void, Void, Void> {
        private final ProgressDialog dialog = new ProgressDialog(context);
        Bitmap BMP = null;

        @Override
        protected void onPreExecute() {
            this.dialog.setMessage("Please Wait...");

            this.dialog.show();
            // put your code which preload with processDialog
        }

        @Override
        protected Void doInBackground(Void... arg0) {
            try {
                // TODO Auto-generated method stub
                BitmapFactory.Options bmOptions;
                bmOptions = new BitmapFactory.Options();
                bmOptions.inSampleSize = 1;
                BMP = LoadImage(strURL, bmOptions);

            } catch (Exception e) {
                Log.e(TAG, "ERROR" + e);
            }
            return null;
        }

        @Override
        protected void onPostExecute(final Void unused) {
            if (this.dialog.isShowing()) {
                this.dialog.dismiss();
                Log.e(TAG, "BMP is :: ---" + BMP);
                image.setImageBitmap(BMP);

            }
        }
    } 
```

**创建::**

```
image.setImageResource(android.R.color.transparent);
            Log.i(TAG, "item.getImageURL()" + item.getImageURL());
            strURL = item.getImageURL();
            new NearByScreenTask().execute(); 
```

**更新2**

```
 BMP = BitmapFactory.decodeStream(new java.net.URL(strURL).openStream());
image.setImageBitmap(BMP); 
```

但是当我在 logcat 中打印它时，BMP 让我为 Null。我还检查了图像 url 并且它在浏览器中运行良好。但是这里提出了一些关键问题，所以它变成了 NULL ，你能帮我解决这个问题吗......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:35:42.447

试试这个库的异步图像加载器。

有许多示例代码和库可用，其中一些如下

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:46:39.420

如此[处所述](http://brainflush.wordpress.com/2009/11/23/droid-fu-part-2-webimageview-and-webgalleryadapter/#comment-747)，您应该尝试将`OpenHttpConnection()`方法更改为：

```
private InputStream OpenHttpConnection(String strURL) throws IOException {
    HttpGet httpRequest = new HttpGet(URI.create(strURL));
    HttpClient httpclient = new DefaultHttpClient();
    HttpResponse response = (HttpResponse) httpclient.execute(httpRequest);
    HttpEntity entity = response.getEntity();
    BufferedHttpEntity bufHttpEntity = new BufferedHttpEntity(entity);
    return bufHttpEntity.getContent();
} 
```

# php - 使用正则表达式获取除指定类名之外的所有链接

> ID：11206223
> 
> 赞同：0
> 
> 时间：2012-06-26T11:20:25.173
> 
> 标签：php, javascript, asp.net, regex

我想使用 REGEX 从 HTML 文档中获取所有链接，除了具有指定类名的链接。

例如：

```
<a href="someSite" class="className">qwe</a> <a href="someSite">qwe</a> 
```

结果，我只想从不包含等于“className”的类的链接中获得**href="someSite "**

我创建了正则表达式：

```
(?<=<\s*a.*)href\s*?=\s*?("|').*?("|') 
```

它准确地返回了我想要的东西，但是从所有链接中，我不知道如何向我的正则表达式添加一个异常，以不返回指定类名的链接

任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:28:55.203

**如果你愿意使用 jQuery，你可以不使用 Regex 来做到这一点：**

```
 var list = $("a", document).filter(function () {
                return $(this).hasClass("className") == false;
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:39:11.460

假设您在某个变量中有 HTML，您可以使用[http://code.google.com/p/phpquery/wiki/Selectors（phpquery](http://code.google.com/p/phpquery/wiki/Selectors) - php 的 php jQuery-esq 事物）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T03:42:55.763

## 免责声明：

正如其他人将要或已经指出的那样，使用正则表达式解析非常规语言充满危险！最好使用专门为这项工作设计的专用解析器，尤其是在解析 HTML 标签汤时。

## 那就是说...

如果您坚持使用正则表达式，这里是一个经过测试的 PHP 脚本，它实现了一个“相当不错”的正则表达式解决方案：

```
<?php // test.php Rev:20120626_2100

function strip_html_anchor_tags_not_having_class($text) {
    $re_html_anchor_not_having_class ='% # Rev:20120626_1300
    # Match an HTML 4.01 A element NOT having a specific class.
    <a\b                   # Anchor element start tag open delimiter
    (?:                    # Zero or more attributes before CLASS.
      \s+                  # Attributes are separated by whitespace.
      (?!class\b)          # Only non-CLASS attributes here.
      [A-Za-z][\w\-:.]*    # Attribute name is required.
      (?:                  # Attribute value is optional.
        \s*=\s*            # Name and value separated by =
        (?:                # Group for value alternatives.
          "[^"]*"          # Either a double-quoted string,
        | \'[^\']*\'       # or a single-quoted string,
        | [\w\-:.]+        # or a non-quoted string.
        )                  # End group of value alternatives.
      )?                   # Attribute value is optional.
    )*                     # Zero or more attributes before CLASS.
    (?:                    # Optional CLASS (but only if NOT MyClass).
      \s+                  # CLASS attribute is separated by whitespace.
      class                # (case insensitive) CLASS attribute name.
      \s*=\s*              # Name and value separated by =
      (?:                  # Group allowable CLASS value alternatives.
        (?-i)              # Use case-sensitive match for CLASS value.
        "                  # Either a double-quoted value...
        (?:                # Single-char-step through CLASS value.
          (?!              # Assert each position is NOT MyClass.
            (?<=["\s])     # Preceded by opening quote or space.
            MyClass        # (case sensitive) CLASS value to NOT be matched.
            (?=["\s])      # Followed by closing quote or space.
          )                # End assert each position is NOT MyClass.
          [^"]             # Safe to match next CLASS value char.
        )*                 # Single-char-step through CLASS value.
        "                  # Ok. DQ value does not contain MyClass.
      | \'                 # Or a single-quoted value...
        (?:                # Single-char-step through CLASS value.
          (?!              # Assert each position is NOT MyClass.
            (?<=[\'\s])    # Preceded by opening quote or space.
            MyClass        # (case sensitive) CLASS value to NOT be matched.
            (?=[\'\s])     # Followed by closing quote or space.
          )                # End assert each position is NOT MyClass.
          [^\']            # Safe to match next CLASS value char.
        )*                 # Single-char-step through CLASS value.
        \'                 # Ok. SQ value does not contain MyClass.
      |                    # Or a non-quoted, non-MyClass value...
        (?!                # Assert this value is NOT MyClass.
          MyClass          # (case sensitive) CLASS value to NOT be matched.
        )                  # Ok. NQ value is not MyClass.
        [\w\-:.]+          # Safe to match non-quoted CLASS value.
      )                    # End group of allowable CLASS values.
      (?:                  # Zero or more attribs allowed after CLASS.
        \s+                # Attributes are separated by whitespace.
        [A-Za-z][\w\-:.]*  # Attribute name is required.
        (?:                # Attribute value is optional.
          \s*=\s*          # Name and value separated by =
          (?:              # Group for value alternatives.
            "[^"]*"        # Either a double-quoted string,
          | \'[^\']*\'     # or a single-quoted string,
          | [\w\-:.]+      # or a non-quoted string.
          )                # End group of value alternatives.
        )?                 # Attribute value is optional.
      )*                   # Zero or more attributes after CLASS.
    )?                     # Optional CLASS (but only if NOT MyClass).
    \s*                    # Optional whitespace before closing >
    >                      # Anchor element start tag close delimiter
    (                      # $1: Anchor element contents.
      [^<]*                # {normal*} Zero or more non-<
      (?:                  # Begin {(special normal*)*} construct
        <                  # {special} Allow a < but only if
        (?!/?a\b)          # not the start of the </a> close tag.
        [^<]*              # more {normal*} Zero or more non-<
      )*                   # Finish {(special normal*)*} construct
    )                      # End $1: Anchor element contents.
    </a\s*>                # A element close tag.
    %ix';
    // Remove all matching start and end tags but keep the element contents.
    return preg_replace($re_html_anchor_not_having_class, '$1', $text);
}
$input = file_get_contents('testdata.html');
$output = strip_html_anchor_tags_not_having_class($input);
file_put_contents('testdata_out.html', $output);
?> 
```

## `function strip_html_anchor_tags_not_having_class($text)`

此函数去除所有 HTML 4.01 Anchor 元素（即`<A>`标签）的开始和匹配结束标签，这些元素不具有特定的（区分大小写的）`CLASS`属性值，其中包含：`MyClass`。该`CLASS`值可以包含任意数量的值，但其中之一必须是：`MyClass`。Anchor 标记名称和 CLASS 属性名称不区分大小写。

## 示例输入 ( `testdata.html`)：

```
<h2>Paragraph contains links to be preserved (CLASS has "MyClass"):</h2>
<p>
Single DQ matching CLASS: <a href="URL" class="MyClass">Test 01</a>.
Single SQ matching CLASS: <a href="URL" class='MyClass'>Test 02</a>.
Single NQ matching CLASS: <a href="URL" class=MyClass>Test 03</a>.
Variable whitespace: <a href = "URL" class = MyClass >Test 04</a>.
Variable capitalization: <A HREF = "URL" CLASS = "MyClass" >Test 04</A>.
Reversed attribute order: <a class="MyClass" href="URL">Test 05</a>
Class before MyClass: <a href="URL" class="Pre MyClass">Test 06</a>.
Class after MyClass: <a href="URL" class="MyClass Post">Test 07</a>.
Sandwiched MyClass: <a href="URL" class="Pre MyClass Post">Test 08</a>.
Link with HTML content: <a class="MyClass" href="URL"><b>Test</b> 09</a>.
</p>

<h2>Paragraph contains links to be stripped (NO CLASS with "MyClass"):</h2>
<p>
Case does not match: <a href="URL" class="myclass">TEST 10</a>.
CLASS not whole word: <a href="URL" class="NotMyClass">TEST 11</a>.
No class attribute: <a href="URL">TEST 12</a>.
Link with HTML content: <a class="NotMyClass" href="URL"><b>Test</b> 13</a>.
</p> 
```

## 示例输出 ( `testdata_out.html`)：

```
<h2>Paragraph contains links to be preserved (CLASS has "MyClass"):</h2>
<p>
Single DQ matching CLASS: <a href="URL" class="MyClass">Test 01</a>.
Single SQ matching CLASS: <a href="URL" class='MyClass'>Test 02</a>.
Single NQ matching CLASS: <a href="URL" class=MyClass>Test 03</a>.
Variable whitespace: <a href = "URL" class = MyClass >Test 04</a>.
Variable capitalization: <A HREF = "URL" CLASS = "MyClass" >Test 04</A>.
Reversed attribute order: <a class="MyClass" href="URL">Test 05</a>
Class before MyClass: <a href="URL" class="Pre MyClass">Test 06</a>.
Class after MyClass: <a href="URL" class="MyClass Post">Test 07</a>.
Sandwiched MyClass: <a href="URL" class="Pre MyClass Post">Test 08</a>.
Link with HTML content: <a class="MyClass" href="URL"><b>Test</b> 09</a>.
</p>

<h2>Paragraph contains links to be stripped (NO CLASS with "MyClass"):</h2>
<p>
Case does not match: TEST 10.
CLASS not whole word: TEST 11.
No class attribute: TEST 12.
Link with HTML content: <b>Test</b> 13.
</p> 
```

希望提高他们的 regex-fu 的读者会很好地研究这个（相当长和复杂的）正则表达式。它为准确性和速度而精心手工制作，并实施了多种先进的效率技术。当然，它被充分注释以允许人类阅读。这个例子清楚地表明“正则表达式”已经演变成一种丰富的（非*正*则）编程语言。

请注意，总会有这种解决方案失败的边缘情况。例如，CDATA 部分、注释、脚本、样式和标签属性值中的邪恶字符串可能会导致此问题。（见上面的免责声明。）也就是说，这个解决方案在很多情况下都会做得很好（但*永远不会*100% 可靠！）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T11:51:55.627

其他答案是明智的。但是，如果出于任何原因您坚持使用 REGEX 方法。尝试这个。

我假设您正在通过 PHP（或 .NET）执行 REGEX，因为您的模式包含一个否定的后视断言，JavaScript 不支持该断言。

我还将匹配与过滤出那些有坏类的匹配，因为 REGEX 不适合后者（因为类属性可能出现在链接的开始标记内的任何位置）。

```
$str = "<a href='bad_href' class='badClass'>bad link</a> <a href='good_href'>good link</a>";
preg_match_all('/<a.+(href ?= ?("|\')[^\2]*\2).*>.*<\/a>/U', $str, $matches);
foreach($matches[0] as $key => $match)
    if (preg_match('/class=(\'|")[^\1]*badClass[^\1]*\1/', $match))
        unset($matches[1][$key]);
$matches = $matches[1]; //array containing "href='good_href'" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T12:23:16.393

```
var aList= document.getElementsByTagName('a');
for (var i in aList) {
   if (aList.hasOwnProperty(i)) {
     if (aList[i].className.indexOf(YourClassName) != -1) continue;
    //... 
    //... Your code
   }
} 
```

# map - nginx 地图模块 - 在包含的文件中使用正则表达式

> ID：11206226
> 
> 赞同：0
> 
> 时间：2012-06-26T11:20:30.933
> 
> 标签：map, module, nginx, rewrite, config

我正在使用 nginx 及其地图模块（[http://wiki.nginx.org/HttpMapModule](http://wiki.nginx.org/HttpMapModule)）根据 $args 值创建重写。我的配置如下所示：
nginx.conf

```
map $args $myvar {
    default 0;
    include /path/to/file.conf;
} 
```

file.conf 有类似的东西：

```
foo=1 /url1;
foo=2 /url2;
....
foo=n /urln; 
```

之后我使用 $myvar 进行这样的重定向

```
location = /somepage.html {
    if ($myvar !~ 0) {
        rewrite ^ $myvar? permanent;
    }
    rewrite ^ /mydefaultpage/? permanent;
} 
```

问题是：我可以在我的`map`指令中包含的 file.conf 中使用正则表达式吗？所以我可以写类似的东西

```
~^foo=1(&<suffix>.*)$ /url1?$suffix; 
```

从而在重定向到 /url1 时保留所有其他参数。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:55:18.617

您不能`/url1?$suffix`在第二个参数中使用。它必须是变量或静态字符串。

试试这个：

```
map $arg_foo $redirect_to {
    default /mydefaultpage/;
    include /path/to/file.conf;
}

location = /somepage.html {

    set $redirect_args $args;

    if ($args ~ "^(?:(.+)&)?foo=[^&]*(?:&(.+))?$") {
        set $redirect_args $1&$2;
    }

    return 301 $redirect_to?$redirect_args;
} 
```

# bash - "=~" 运算符在 shell 脚本中的作用是什么？

> ID：11206233
> 
> 赞同：18
> 
> 时间：2012-06-26T11:20:54.007
> 
> 标签：bash, shell

它似乎是一种比较运算符，但它在例如以下代码（取自[https://github.com/lvv/git-prompt/blob/master/git-prompt.sh#L154](https://github.com/lvv/git-prompt/blob/master/git-prompt.sh#L154)）中究竟做了什么？

```
 if [[ $LC_CTYPE =~ "UTF" && $TERM != "linux" ]];  then
            elipses_marker="…"
    else
            elipses_marker="..."
    fi 
```

我目前正在尝试`git-prompt`在 MinGW 下工作，而 MinGW 提供的 shell 似乎不支持此运算符：

```
conditional binary operator expected
syntax error near `=~'
`        if [[ $LC_CTYPE =~ "UTF" && $TERM != "linux" ]];  then' 
```

在这种特定情况下，我可以将整个块替换为`elipses_marker="…"`（我知道我的终端支持 unicode），但这到底是`=~`做什么的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-26T11:27:52.370

它是内置`[[`命令的仅 bash 补充，执行正则表达式匹配。由于它不必与完整字符串完全匹配，因此挥动该符号以表示“不精确”匹配。

在这种情况下，如果`$LC_CTYPE` *包含*字符串“UTF”。

更便携的版本：

```
if test `echo $LC_CTYPE | grep -c UTF` -ne 0 -a "$TERM" != "linux"
then
  ...
else
  ...
fi 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-26T11:26:58.760

这是一个正则表达式匹配。我猜你的 bash 版本还不支持。

在这种特殊情况下，我建议用更简单（更快）的模式匹配替换它：

```
[[ $LC_CTYPE == *UTF* && $TERM != "linux" ]] 
```

（注意`*`此处不得引用）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T11:24:53.427

与 Ruby 一样，它匹配 RHS 操作数是正则表达式的位置。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-26T11:23:44.567

它匹配正则表达式

[请参阅http://tldp.org/LDP/abs/html/bashver3.html#REGEXMATCHREF](http://tldp.org/LDP/abs/html/bashver3.html#REGEXMATCHREF)中的以下示例

```
#!/bin/bash

input=$1

if [[ "$input" =~ "[0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9][0-9][0-9]" ]]
#                 ^ NOTE: Quoting not necessary, as of version 3.2 of Bash.
# NNN-NN-NNNN (where each N is a digit).
then
  echo "Social Security number."
  # Process SSN.
else
  echo "Not a Social Security number!"
  # Or, ask for corrected input.
fi 
```

# nhibernate - 使用 Fluent NHibernate 更新实体，删除多对多关系中的关联

> ID：11206240
> 
> 赞同：1
> 
> 时间：2012-06-26T11:21:33.863
> 
> 标签：nhibernate, fluent-nhibernate, mapping, many-to-many

我有两个这样的实体：

```
public class Service
{
    public virtual int ServiceId { get; set; }
    public virtual char LayoutCode { get; set; }
    public virtual string ServiceNameEn { get; set; }
    public virtual string ServiceNameTh { get; set; }
    public virtual string ServiceDescEn { get; set; }
    public virtual string ServiceDescTh { get; set; }
    public virtual string ServicePhone { get; set; }
    public virtual byte[] ServiceImage { get; set; }
    public virtual bool Permanent { get; set; }
    public virtual bool Active { get; set; }
    public virtual bool IsAutoAssign { get; set; }
    public virtual DateTime CreatedDatetime { get; set; }
    public virtual DateTime LastUpdatedDatetime { get; set; }
    public virtual string RedirectUrl { get; set; }
    public virtual IList<Reply> Replies { get; set; }
    public virtual IList<Employee> Employees { get; set; }
    public virtual IList<ServicesOfUser> ServicesOfUser { get; set; }
    private IList<Category> _categories = new List<Category>();
    public virtual IEnumerable<Category> Categories
    {
        get
        {
            return _categories;
        }
    }
    public virtual void Add(Category category)
    {
        if (!_categories.Any(x => x.CategoryId == category.CategoryId))
        {
            _categories.Add(category);
        }
    }
    public virtual void Clear()
    {
        _categories.Clear();
    }
} 
```

和

```
public class Category
{
    public virtual int CategoryId { get; set; }
    public virtual string CategoryNameEn { get; set; }
    public virtual string CategoryNameTh { get; set; }
    public virtual string CategoryDescEn { get; set; }
    public virtual string CategoryDescTh { get; set; }
    public virtual byte[] CategoryImage { get; set; }
    public virtual bool Active { get; set; }
    public virtual DateTime CreatedDatetime { get; set; }
    public virtual DateTime LastUpdatedDatetime { get; set; }
    public virtual IList<Service> Services { get; set; }
} 
```

这两个实体的关系是多对多的，有映射关系：

```
public class ServiceMap : ClassMap<Service>
{
    public ServiceMap()
    {
        Table("[SERVICES]");

        Id(x => x.ServiceId)
            .GeneratedBy.Identity()
            .Column("service_id")
            .CustomType("int")
            .Access.Property()
            .CustomSqlType("int")
            .Not.Nullable();
        Map(x => x.LayoutCode)
            .Column("layout_code")
            .CustomType("char")
            .Access.Property()
            .CustomSqlType("char")
            .Length(1)
            .Not.Nullable();
        Map(x => x.ServiceNameEn)
            .Column("service_name_en")
            .Access.Property()
            .CustomType("string")
            .CustomSqlType("varchar")
            .Length(128)
            .Not.Nullable();
        Map(x => x.ServiceNameTh)
            .Column("service_name_th")
            .Access.Property()
            .CustomType("string")
            .CustomSqlType("nvarchar")
            .Length(128)
            .Not.Nullable();
        Map(x => x.ServiceDescEn)
            .Column("service_desc_en")
            .CustomType("string")
            .Access.Property()
            .CustomSqlType("varchar")
            .Length(4000)
            .Nullable();
        Map(x => x.ServiceDescTh)
            .Column("service_desc_th")
            .CustomType("string")
            .Access.Property()
            .CustomSqlType("nvarchar")
            .Length(4000)
            .Nullable();
        Map(x => x.ServicePhone)
            .Column("service_phone")
            .Access.Property()
            .CustomType("string")
            .CustomSqlType("nvarchar")
            .Length(50)
            .Nullable();
        Map(x => x.ServiceImage)
            .Column("service_image")
            .CustomType("BinaryBlob")
            .Access.Property()
            .Generated.Never()
            .CustomSqlType("image")
            .Length(131231)
            .Nullable();
        Map(x => x.Permanent)
            .Column("permanent")
            .CustomType("bool")
            .Access.Property()
            .CustomSqlType("bit")
            .Not.Nullable();
        Map(x => x.Active)
            .Column("active")
            .CustomType("bool")
            .Access.Property()
            .CustomSqlType("bit")
            .Not.Nullable();
        Map(x => x.IsAutoAssign)
            .Column("is_auto_assign")
            .CustomType("bool")
            .Access.Property()
            .CustomSqlType("bit")
            .Not.Nullable();
        Map(x => x.CreatedDatetime)
            .Column("created_datetime")
            .Access.Property()
            .CustomType("DateTime")
            .CustomSqlType("datetime")
            .Not.Nullable();
        Map(x => x.LastUpdatedDatetime)
            .Column("last_updated_datetime")
            .Access.Property()
            .CustomType("DateTime")
            .CustomSqlType("datetime")
            .Not.Nullable();
        Map(x => x.RedirectUrl)
            .Column("redirect_url")
            .Access.Property()
            .CustomType("string")
            .CustomSqlType("nvarchar")
            .Length(213123)
            .Nullable();
        HasMany<ServicesOfUser>(x => x.ServicesOfUser)
            .AsBag()
            .Cascade.None()
            .LazyLoad()
            .Inverse()
            .KeyColumns.Add("service_id", mapping => mapping.Name("service_id")
                .SqlType("int")
                .Nullable());
        HasMany<Reply>(x => x.Replies)
            .AsBag()
            .Cascade.None()
            .LazyLoad()
            .Inverse()
            .KeyColumns.Add("send_to_service_id", mapping => mapping.Name("send_to_service_id")
                .SqlType("int")
                .Nullable());
        HasManyToMany<Employee>(x => x.Employees)
            .AsBag()
            .Cascade.None()
            .LazyLoad()
            .Table("SERVICE_MONITORS")
            .Inverse()
            .ChildKeyColumns.Add("employee_id", mapping => mapping.Name("employee_id")
                .SqlType("uniqueidentifier")
                .Not.Nullable())
            .ParentKeyColumns.Add("service_id", mapping => mapping.Name("service_id")
                .SqlType("int")
                .Not.Nullable());
        HasManyToMany<Category>(x => x.Categories)
            .AsBag()
            .Access.CamelCaseField(Prefix.Underscore)
            .Cascade.AllDeleteOrphan()
            .Table("SERVICES_IN_CATEGORIES")
            .ChildKeyColumns.Add("category_id", mapping => mapping.Name("category_id")
                .SqlType("int")
                .Not.Nullable())
            .ParentKeyColumns.Add("service_id", mapping => mapping.Name("service_id")
                .SqlType("int")
                .Not.Nullable());
    }
} 
```

和

```
public class CategoryMap : ClassMap<Category>
{
    public CategoryMap()
    {
        Table("[SERVICE_CATEGORIES]");

        Id(x => x.CategoryId)
            .GeneratedBy.Identity()
            .Column("category_id")
            .CustomType("int")
            .Access.Property()
            .CustomSqlType("int")
            .Not.Nullable();
        Map(x => x.CategoryNameEn)
            .Column("category_name_en")
            .CustomType("string")
            .Access.Property()
            .CustomSqlType("varchar")
            .Length(128)
            .Not.Nullable();
        Map(x => x.CategoryNameTh)
            .Column("category_name_th")
            .CustomType("string")
            .Access.Property()
            .CustomSqlType("nvarchar")
            .Length(128)
            .Not.Nullable();
        Map(x => x.CategoryDescEn)
            .Column("category_desc_en")
            .CustomType("string")
            .Access.Property()
            .CustomSqlType("varchar")
            .Length(3423423)
            .Not.Nullable();
        Map(x => x.CategoryDescTh)
            .Column("category_desc_th")
            .CustomType("string")
            .Access.Property()
            .CustomSqlType("nvarchar")
            .Length(3243234)
            .Not.Nullable();
        Map(x => x.CategoryImage)
            .Column("category_image")
            .CustomType("BinaryBlob")
            .Access.Property()
            .Generated.Never()
            .CustomSqlType("image")
            .Length(131231)
            .Nullable();
        Map(x => x.Active)
            .Column("active")
            .CustomType("bool")
            .Access.Property()
            .CustomSqlType("bit")
            .Not.Nullable();
        Map(x => x.CreatedDatetime)
            .Column("created_datetime")
            .Access.Property()
            .CustomType("DateTime")
            .CustomSqlType("datetime")
            .Not.Nullable();
        Map(x => x.LastUpdatedDatetime)
            .Column("last_updated_datetime")
            .Access.Property()
            .CustomType("DateTime")
            .CustomSqlType("datetime")
            .Not.Nullable();
        HasManyToMany<Service>(x => x.Services)
            .AsBag()
            .Cascade.AllDeleteOrphan()
            .Inverse()
            .LazyLoad()
            .Table("SERVICES_IN_CATEGORIES")
            .ChildKeyColumns.Add("service_id", mapping => mapping.Name("service_id")
                .SqlType("int")
                .Not.Nullable())
            .ParentKeyColumns.Add("category_id", mapping => mapping.Name("category_id")
                .SqlType("int")
                .Not.Nullable());
    }
} 
```

编码：

```
using (unitOfWork = new UnitOfWork(SessionFactory))
{
    serviceRepo = new ServiceRepo(unitOfWork.Session);
    try
    {
        Service service = new Service();
        if (id != null)
            service = serviceRepo.GetById((int)id);

        // set values for service here

        IList<Category> categories = new List<Category>();
        // add some categories to service

        serviceRepo.Save(service);
        unitOfWork.Commit();

        return service;
    }
    catch (Exception ex)
    {
        unitOfWork.Rollback();
        return null;
    }
} 
```

服务更新了，但连接表中的关联记录没有被删除。

如果我在向服务添加类别之前添加以下代码：

```
service.Clear(); 
```

提交时，我收到以下错误消息：

```
not-null property references a null or transient value ilu.src.Entities.Category.CategoryDescEn 
```

完整的堆栈跟踪：

```
 at NHibernate.Engine.Nullability.CheckNullability(Object[] values, IEntityPersister persister, Boolean isUpdate)
   at NHibernate.Event.Default.DefaultDeleteEventListener.DeleteEntity(IEventSource session, Object entity, EntityEntry entityEntry, Boolean isCascadeDeleteEnabled, IEntityPersister persister, ISet transientEntities)
   at NHibernate.Event.Default.DefaultDeleteEventListener.OnDelete(DeleteEvent event, ISet transientEntities)
   at NHibernate.Impl.SessionImpl.FireDelete(DeleteEvent event, ISet transientEntities)
   at NHibernate.Impl.SessionImpl.Delete(String entityName, Object child, Boolean isCascadeDeleteEnabled, ISet transientEntities)
   at NHibernate.Engine.CascadingAction.DeleteCascadingAction.Cascade(IEventSource session, Object child, String entityName, Object anything, Boolean isCascadeDeleteEnabled)
   at NHibernate.Engine.Cascade.CascadeToOne(Object parent, Object child, IType type, CascadeStyle style, Object anything, Boolean isCascadeDeleteEnabled)
   at NHibernate.Engine.Cascade.CascadeAssociation(Object parent, Object child, IType type, CascadeStyle style, Object anything, Boolean isCascadeDeleteEnabled)
   at NHibernate.Engine.Cascade.CascadeProperty(Object parent, Object child, IType type, CascadeStyle style, Object anything, Boolean isCascadeDeleteEnabled)
   at NHibernate.Engine.Cascade.CascadeCollectionElements(Object parent, Object child, CollectionType collectionType, CascadeStyle style, IType elemType, Object anything, Boolean isCascadeDeleteEnabled)
   at NHibernate.Engine.Cascade.CascadeCollection(Object parent, Object child, CascadeStyle style, Object anything, CollectionType type)
   at NHibernate.Engine.Cascade.CascadeAssociation(Object parent, Object child, IType type, CascadeStyle style, Object anything, Boolean isCascadeDeleteEnabled)
   at NHibernate.Engine.Cascade.CascadeProperty(Object parent, Object child, IType type, CascadeStyle style, Object anything, Boolean isCascadeDeleteEnabled)
   at NHibernate.Engine.Cascade.CascadeOn(IEntityPersister persister, Object parent, Object anything)
   at NHibernate.Event.Default.DefaultDeleteEventListener.CascadeBeforeDelete(IEventSource session, IEntityPersister persister, Object entity, EntityEntry entityEntry, ISet transientEntities)
   at NHibernate.Event.Default.DefaultDeleteEventListener.DeleteEntity(IEventSource session, Object entity, EntityEntry entityEntry, Boolean isCascadeDeleteEnabled, IEntityPersister persister, ISet transientEntities)
   at NHibernate.Event.Default.DefaultDeleteEventListener.OnDelete(DeleteEvent event, ISet transientEntities)
   at NHibernate.Impl.SessionImpl.FireDelete(DeleteEvent event, ISet transientEntities)
   at NHibernate.Impl.SessionImpl.Delete(String entityName, Object child, Boolean isCascadeDeleteEnabled, ISet transientEntities)
   at NHibernate.Engine.CascadingAction.DeleteCascadingAction.Cascade(IEventSource session, Object child, String entityName, Object anything, Boolean isCascadeDeleteEnabled)
   at NHibernate.Engine.Cascade.CascadeToOne(Object parent, Object child, IType type, CascadeStyle style, Object anything, Boolean isCascadeDeleteEnabled)
   at NHibernate.Engine.Cascade.CascadeAssociation(Object parent, Object child, IType type, CascadeStyle style, Object anything, Boolean isCascadeDeleteEnabled)
   at NHibernate.Engine.Cascade.CascadeProperty(Object parent, Object child, IType type, CascadeStyle style, Object anything, Boolean isCascadeDeleteEnabled)
   at NHibernate.Engine.Cascade.CascadeCollectionElements(Object parent, Object child, CollectionType collectionType, CascadeStyle style, IType elemType, Object anything, Boolean isCascadeDeleteEnabled)
   at NHibernate.Engine.Cascade.CascadeCollection(Object parent, Object child, CascadeStyle style, Object anything, CollectionType type)
   at NHibernate.Engine.Cascade.CascadeAssociation(Object parent, Object child, IType type, CascadeStyle style, Object anything, Boolean isCascadeDeleteEnabled)
   at NHibernate.Engine.Cascade.CascadeProperty(Object parent, Object child, IType type, CascadeStyle style, Object anything, Boolean isCascadeDeleteEnabled)
   at NHibernate.Engine.Cascade.CascadeOn(IEntityPersister persister, Object parent, Object anything)
   at NHibernate.Event.Default.DefaultDeleteEventListener.CascadeBeforeDelete(IEventSource session, IEntityPersister persister, Object entity, EntityEntry entityEntry, ISet transientEntities)
   at NHibernate.Event.Default.DefaultDeleteEventListener.DeleteEntity(IEventSource session, Object entity, EntityEntry entityEntry, Boolean isCascadeDeleteEnabled, IEntityPersister persister, ISet transientEntities)
   at NHibernate.Event.Default.DefaultDeleteEventListener.OnDelete(DeleteEvent event, ISet transientEntities)
   at NHibernate.Impl.SessionImpl.FireDelete(DeleteEvent event, ISet transientEntities)
   at NHibernate.Impl.SessionImpl.Delete(String entityName, Object child, Boolean isCascadeDeleteEnabled, ISet transientEntities)
   at NHibernate.Engine.Cascade.DeleteOrphans(String entityName, IPersistentCollection pc)
   at NHibernate.Engine.Cascade.CascadeCollectionElements(Object parent, Object child, CollectionType collectionType, CascadeStyle style, IType elemType, Object anything, Boolean isCascadeDeleteEnabled)
   at NHibernate.Engine.Cascade.CascadeCollection(Object parent, Object child, CascadeStyle style, Object anything, CollectionType type)
   at NHibernate.Engine.Cascade.CascadeAssociation(Object parent, Object child, IType type, CascadeStyle style, Object anything, Boolean isCascadeDeleteEnabled)
   at NHibernate.Engine.Cascade.CascadeProperty(Object parent, Object child, IType type, CascadeStyle style, Object anything, Boolean isCascadeDeleteEnabled)
   at NHibernate.Engine.Cascade.CascadeOn(IEntityPersister persister, Object parent, Object anything)
   at NHibernate.Event.Default.AbstractFlushingEventListener.CascadeOnFlush(IEventSource session, IEntityPersister persister, Object key, Object anything)
   at NHibernate.Event.Default.AbstractFlushingEventListener.PrepareEntityFlushes(IEventSource session)
   at NHibernate.Event.Default.AbstractFlushingEventListener.FlushEverythingToExecutions(FlushEvent event)
   at NHibernate.Event.Default.DefaultFlushEventListener.OnFlush(FlushEvent event)
   at NHibernate.Impl.SessionImpl.Flush()
   at NHibernate.Transaction.AdoTransaction.Commit()
   at ilu.src.Common.UnitOfWork.Commit() in D:\Arunsawad\iLertU\ilu\ilu\src\Common\UnitOfWork.cs:line 41
   at ilu.Controllers.AdminController.SaveService(Nullable`1 id, String name, String nameth, String desc, String descth, String phone, String catids, String url, Char layoutcode, Boolean permanent, Boolean active, Boolean autoassign) in D:\Arunsawad\iLertU\ilu\ilu\Controllers\AdminController.cs:line 107 
```

我在这里有什么遗漏吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:34:29.680

将级联声明为`Cascade.AllDeleteOrphan()`. 此外，尝试添加`.Inverse()`到多对多映射之一。

更多信息：

NHibernate 文档中的[双向关联](http://www.nhforge.org/doc/nh/en/index.html#collections-bidirectional)
[NHibernate Pitfalls: Many to Many and Inverse](http://weblogs.asp.net/ricardoperes/archive/2011/05/28/nhibernate-pitfalls-many-to-many-and-inverse.aspx)
[NHibernate Cascades: the different between all, all-delete-orphans and save-update](http://ayende.com/blog/1890/nhibernate-cascades-the-different-between-all-all-delete-orphans-and-save-update)

* * *

**编辑：**

从你得到的错误来看，你只需要`CategoryDescEn`在尝试保存之前初始化类别的属性。好像是`null`当您尝试保存时：

> 非空属性引用**空值**或瞬态值 ilu.src.Entities.Category。**类别降序**

# linux - 如何使用旧内核为 GNU/Linux 安装构建静态二进制文件？

> ID：11206243
> 
> 赞同：11
> 
> 时间：2012-06-26T11:21:44.340
> 
> 标签：linux, gcc, libc

```
$ printf 'int main(){}' | gcc -static -x c - -o hello
$ scp hello vi-server.org:./
hello                                100%  565KB 565.2KB/s   00:00
$ ssh -t vi-server.org "./hello; uname -r"
FATAL: kernel too old
sh: line 1: 15378 Segmentation fault      ./hello
2.6.18-274....  # can't easily upgrade the kernel
Connection to vi-server.org closed. 
```

如何构建可在旧系统上运行的静态二进制文件？我希望静态二进制文件甚至可以在 2.4 上工作。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-26T12:18:57.183

您需要配置 glibc 以针对较旧的内核版本。根据[http://www.gnu.org/software/libc/manual/html_node/Configuring-and-compiling.html](http://www.gnu.org/software/libc/manual/html_node/Configuring-and-compiling.html) glibc 接受配置选项`--enable-kernel=version`where`version`是`2.4.20`针对旧内核版本的形式。

然后，您可以将您的程序与`gcc -static -nodefaultlibs [...] /path/to/my/libc.a`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T05:54:02.900

感谢上面的海报 ecatmur -- 使用配置选项 --enable-kernel=version 重新配置/重建 glibc 确实有效

我将添加以下内容 - 您可以使用 gcc -static -L/path/to/local/lib （目录的大 L 选项），它似乎与链接到库文件本身一样工作。当我以后一种方式链接（到/path/to/local/lib/libc.a）时，它创建了一个不必要的大可执行文件。

# rest - 具有客户端缓存的 JAX-RS 框架

> ID：11206245
> 
> 赞同：2
> 
> 时间：2012-06-26T11:21:48.807
> 
> 标签：rest, jersey, jax-rs, restlet, resteasy

RESTEasy、Jersey 或 Restlet 是否集成了客户端缓存？

我读了一些关于[泽西岛的 CacheClient](http://code.google.com/p/smart-util/wiki/JerseyCacheClient)

这是官方的实现吗？如果没有，他们是否正在为 Jersey 2.0 开发客户端缓存？有人可以证实这一点吗？

对于 Resteasy，我[在这里](http://docs.jboss.org/resteasy/docs/1.2.GA/userguide/html/Cache_NoCache_CacheControl.html)读到了一些关于官方客户端缓存控制的内容。

我不确定Restlet。官方有没有好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T19:13:26.193

关于 Restlet，我们计划在 2.2 版本中添加缓存服务。这也将有利于 JAX-RS 扩展。

在此处查看我们的[详细路线图](http://wiki.restlet.org/developers/175-restlet.html)。

# ios5 - 转场/视图转换后 iOS 核心动画失败

> ID：11206246
> 
> 赞同：0
> 
> 时间：2012-06-26T11:21:49.120
> 
> 标签：ios5, core-animation, segue

我有一个基本动画，只需旋转图像，我正在使用核心动画。在 viewWillAppear 方法中，我创建了动画：

```
gearRotate = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
gearRotate.repeatCount = HUGE_VALF;
gearRotate.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
gearRotate.duration = 2;
gearRotate.fromValue = 0;
gearRotate.toValue = [NSNumber numberWithFloat:(360*M_PI)/180];
[gearButton.imageView.layer addAnimation:gearRotate forKey:@"transform.rotation"];

[self stopGear]; 
```

我最初调用 stopGear 来暂停动画。我确实在 viewDidLoad 中有这段代码。无论如何，当动画被调用时，它工作正常：

```
-(void)startGear {
CFTimeInterval pausedTime = [gearButton.imageView.layer timeOffset];
gearButton.imageView.layer.speed = 1.0;
gearButton.imageView.layer.timeOffset = 0.0;
gearButton.imageView.layer.beginTime = 0.0;
CFTimeInterval timeSincePause = [gearButton.imageView.layer convertTime:CACurrentMediaTime() fromLayer:nil] - pausedTime;
gearButton.imageView.layer.beginTime = timeSincePause; 
```

}

这种暂停方法也可以正常工作：

```
-(void)stopGear {
CFTimeInterval pausedTime = [gearButton.imageView.layer convertTime:CACurrentMediaTime() fromLayer:nil];
gearButton.imageView.layer.speed = 0.0;
gearButton.imageView.layer.timeOffset = pausedTime; 
```

}

但是，如果我转到另一个视图然后回到主视图，这一切都会失败。该应用程序运行良好，但如果我去过另一个视图，动画将永远不会运行。

这就是为什么我最初将此代码移动到 viewWillAppear 的原因，认为我需要重新创建动画，但没有 bean。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T20:06:41.917

`gearRotate.repeatCount = HUGE_VALF;`您可以使用以下方法代替使用，以便在对另一个视图控制器执行 segue 后保持动画运行：

```
-(void)startGear {
    [[gearButton.imageView layer] removeAnimationForKey:@"transform.rotation"];
    gearRotate = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
    gearRotate.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
    gearRotate.duration = 2;
    gearRotate.fromValue = 0;
    gearRotate.toValue = [NSNumber numberWithFloat:(360*M_PI)/180];
    [[gearButton.imageView layer] addAnimation:gearRotate forKey:@"transform.rotation"];
    [self performSelector:@selector(startGear) withObject:nil afterDelay:gearRotate.duration];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:36:56.293

好的，所以我通过重新思考动画的工作原理来解决这个问题。我现在只是在每次我希望它运行时创建动画：

```
-(void)startGear {
    gearRotate = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
    gearRotate.repeatCount = HUGE_VALF;
    gearRotate.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
    gearRotate.duration = 2;
    gearRotate.fromValue = 0;
    gearRotate.toValue = [NSNumber numberWithFloat:(360*M_PI)/180];
    [[gearButton.imageView layer] addAnimation:gearRotate forKey:@"transform.rotation"]; 
```

}

当我想暂停它时，我只需将其删除：

```
-(void)stopGear {
    [[gearButton.imageView layer] removeAnimationForKey:@"transform.rotation"]; 
```

}

我目前不确定这是否是 Apple 的首选方法，但它运行良好。

# java - Java OpenGL 只有蓝色纹理

> ID：11206253
> 
> 赞同：0
> 
> 时间：2012-06-26T11:22:19.450
> 
> 标签：java, opengl, colors, textures

我对纹理和 OpenGL 有一点问题。我做了一个小的 .obj 加载器（带有纹理加载），但一切都被绘制成蓝色。例子：

我加载一个纹理。我用 GL11.glBindTexture(GL11.GL_TEXTURE_2D,textureId) 绑定纹理。如果我做：

```
 glColor3f(1f,1f,1f);
    glBegin(GL_QUADS);
    glVertex3f(50f,0,-50);
glVertex3f(-50f,0,-50f);
glVertex3f(-50f,0,50f);
glVertex3f(50f,0,50f);
glEnd();
    GL11.glBindTexture(GL11.GL_TEXTURE_2D, textureId); 
```

它画了一个白色的四边形......但如果我这样做：

```
 GL11.glBindTexture(GL11.GL_TEXTURE_2D, textureId);
    glColor3f(1f,1f,1f);
    glBegin(GL_QUADS);
    glVertex3f(50f,0,-50);
glVertex3f(-50f,0,-50f);
glVertex3f(-50f,0,50f);
glVertex3f(50f,0,50f);
glEnd(); 
```

它绘制了一个蓝色四边形，其他所有内容也是蓝色的。

也许有人知道解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:27:05.033

没有纹理，因为您没有使用`glTexCoord2f`.

颜色错误可能是由于参数不正确造成的`glTexImage`。

其他所有内容都是蓝色的，因为您对所有内容都使用相同的纹理。绑定不同的纹理或使用默认纹理 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:31:38.963

这是问题所在，因为您没有对每个顶点使用 glTexCoord2f。请尝试对每个顶点进行此操作，因为它可以解决它，因为目前您的颜色并未绑定到所有区域。

# bash - 如何使用 bash 脚本将 grep 中的两行打印成一行

> ID：11206254
> 
> 赞同：0
> 
> 时间：2012-06-26T11:22:23.380
> 
> 标签：bash, grep, echo, mediainfo

我正在努力实现以下目标：

我有一个包含多个视频文件的目录，我想列出所有文件并在同一行中添加文件的持续时间和大小，使用 mediainfo（没有其他可用）。

Mediainfo 的输出类似于：

```
General
Format      : 
File Size   : 335 MiB
Duration    : 28mn 24s 
```

我想在文件中获取以下数据：
文件名：335 MiB：28mn 24s
所以我可以检查文件是否有重复...

因此我有以下脚本：

```
#!/bin/bash
         for i in $( ls /mnt/storage/kids/* ); do
                     echo -n item: $i ":"
                     mediainfo $i |grep -A 1 "File size"
                     done 
```

使用 echo n 我在 item 的同一行中得到以下行： $i 和使用 grep -A 1 我得到文件大小和持续时间，但持续时间进入第二行而不是与文件名和文件大小相同。
我还想摆脱文件名和持续时间标题。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:34:43.600

要摆脱双线，请将您的代码更改为：

```
echo -n item: $i ":" $(mediainfo $i |grep -A 1 "File size") 
```

要摆脱标题，您可以使用 awk：

```
$ echo -e 'Filename : BOO\nSize : BAA' | awk -F: '{print $2}'
 BOO
 BAA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:41:57.607

*   不要使用`for i in $(ls)`，这是错误的。如果你想循环文件`for i in /mnt/storage/kids/*`直接使用。
*   避免`echo -n`支持`printf`，它是可移植的。

试试这个：

```
for i in /mnt/storage/kids/* ; do
    printf 'item: %s: ' "$i"
    mediainfo "$i" | sed -e '/File Size/,/Duration/{s/.*: //p;};d' | sed -e '$!N;s/\n/: /'
done 
```

# php - 在运行之前记录所有查询

> ID：11206258
> 
> 赞同：-2
> 
> 时间：2012-06-26T11:22:33.147
> 
> 标签：php, mysql, zend-framework

使用 Zend Framework，我需要使用包含谁做了什么的信息来记录我的系统。我想要一个系统来记录数据库中发生的事情以进行更新和删除查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:29:20.320

据我所知，您只想记录您的查询。您首先需要设置 Zend_Log（这里有一个教程：[http](http://devjoe.blogspot.ca/2012/06/zendlog-tutorial-zendlogcan-be-very.html) ://devjoe.blogspot.ca/2012/06/zendlog-tutorial-zendlogcan-be-very.html和[http://devjoe.blogspot.ca/ 2012/06/zendlog-tutorial-part-2.html](http://devjoe.blogspot.ca/2012/06/zendlog-tutorial-part-2.html)）。

设置日志后，您可以在调用 mysql 查询的函数中将以下行添加到模型中：

```
public function simpleSelectQuery($someParam) {
    $mdl = new self(); 
    $select = $mdl->select();
    $select->where('id = ?', $someParam);
    MyApp_Logger::log('User is running query: '.$select->__toString(), Zend_Log::NOTICE);
    return $mdl->fetchAll($select); 
} 
```

这将在您的日志文件中显示 Zend 生成的 SELECT 语句。

# html - 查询字符串中的 Base64 编码参数问题

> ID：11206259
> 
> 赞同：7
> 
> 时间：2012-06-26T11:22:33.397
> 
> 标签：html, asp.net-mvc-3, c#-4.0, hyperlink

我正在我的 Web 应用程序中向用户邮件发送一个链接（用于确认用户注册），如下所示：

```
<a target="_blank" href="http://localhost:2817/ConfirmRegistration?confirm=Y0tcmGepe7wjH7A1CT1IaA==">
http://localhost:2817/ConfirmRegistration?confirm=Y0tcmGepe7wjH7A1CT1IaA==
</a> 
```

但 Chrome 会提醒此消息：

![铬消息](../Images/01be7ce038662d8e300d1dcc1030cd65.png)

查询字符串是否无效？我该如何解决？

顺便说一句：
我的应用程序是 C# 和 MVC3

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-01-25T11:13:41.143

我使用的是 HttpUtility.UrlEncode，但如果 base64 编码的字符串包含“+”号，我会遇到问题。它被正确地编码为“%2b”，但是当它从浏览器返回时，它被解释为一个空格。所以，我改用了两种简单的编码/解码方法：

```
public static string UrlEncodeBase64(string base64Input)
{
    return base64Input.Replace('+', '.').Replace('/', '_').Replace('=', '-');
}

public static string UrlDecodeBase64(string encodedBase64Input)
{
    return encodedBase64Input.Replace('.', '+').Replace('_', '/').Replace('-', '=');
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T11:31:18.060

`confirm`您应该对参数进行 URL 编码。您得到的错误是由于最后一个`==`片段。

为此，请使用[HttpServerUtility.UrlEncode](http://msdn.microsoft.com/en-us/library/zttxte6w.aspx)或类似的框架方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T11:31:02.877

您可能应该对参数值进行 URL 编码，因为`=`它本身用于将参数名称与参数值分开。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-14T07:32:44.160

您可以通过将两个 char 替换`+`为`_`和`/`来发送您的值`-`：

```
string confirm=confirm.Replace('+', '_').Replace('/', '+');

<a target="_blank" href="http://localhost:2817/ConfirmRegistration?confirm=@confirm">
http://localhost:2817/ConfirmRegistration?confirm=@confirm
</a> 
```

您可以使用以下方法在服务器端获取数据：

```
if (Request.QueryString["confirm"] != null && Request.QueryString["confirm"].ToString() != "")
{
       string confirm = HttpUtility.HtmlDecode(Request.QueryString["confirm"]).Replace('_', '+').Replace('-', '/');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-30T08:10:51.550

如果您使用的是 ASP.net 核心，则可以使用 WebEncoders.Base64UrlEncode 和 WebEncoders.Base64UrlDecode

# c# - C# 在将多个图像加载到多个 PictureBox 时在哪里使用线程

> ID：11206260
> 
> 赞同：0
> 
> 时间：2012-06-26T11:22:35.597
> 
> 标签：c#

我正在为我的缩略图 UserControl 完成代码，其中一项要求是能够在任何时候加载多达 3,000 张图像。可以想象，如果没有线程，这将使控件在实时环境中几乎毫无用处，因为加载它们可能需要相当长的时间，并且此时用户被冻结在任何使用该控件的程序之外。

我是线程新手，我所看到和尝试的要求我更改 GenerateThumbnails 的签名并生成错误（不包含在此代码中）。

我想知道的是，在将图像加载到 PictureBox 中时，我将如何实现线程以允许用户交互。

此控件的代码如下（我将其全部包含在内） - 更新为实现了 BackgroundWorker。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Drawing;
using System.Drawing.Drawing2D;
using System.Drawing.Imaging;
using System.Text;
using System.Threading;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace ImageViewerPlus
{

    public partial class Filmstrip : UserControl
    {

        //private BackgroundWorker bwAsyncWorker = new BackgroundWorker();

        public Filmstrip()
        {
            InitializeComponent();
            log = log + "Initialized Filmstrip Form: \r\n";
            //bwAsyncWorker.WorkerReportsProgress = true;
            //bwAsyncWorker.WorkerSupportsCancellation = true;
            //bwAsyncWorker.ProgressChanged += new ProgressChangedEventHandler(bwAsync_ProgressChanged);
            //bwAsyncWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bwAsync_RunWorkerCompleted);
            //bwAsyncWorker.DoWork += new DoWorkEventHandler(bwAsync_DoWork);

            toolStripProgressBar1.Minimum = 0;
            toolStripProgressBar1.Maximum = 100;
        }

        protected override void OnPaint(PaintEventArgs pe)
        {
            SolidBrush b = new SolidBrush(this.BackColor);
            pe.Graphics.FillRectangle(b, this.ClientRectangle);
        }

        public string log;
        private string selectedImagePath;
        private List<PictureBox> pictureBoxes;
        private List<string> imagePaths;
        private int imageCount;
        private int selectedImageIndex;
        private int pictureBoxIndex;
        private int oldSelectedImageIndex;

        public SelectedImageDelegate SelectedImageCallback;

        private static int THUMBNAIL_SIZE = 100;

        private List<PictureBox> PictureBoxes
        {
            set
            {
                pictureBoxes = value;
            }
            get
            {
                return pictureBoxes;
            }
        }

        public List<string> ImagePaths
        {
            set
            {
                imagePaths = value;
            }
            get
            {
                return imagePaths;
            }
        }

        private int ImageCount
        {
            set
            {
                imageCount = value;
            }
            get
            {
                return imageCount;
            }
        }

        public int SelectedImageIndex
        {
            set
            {
                selectedImageIndex = value;
            }
            get
            {
                return selectedImageIndex;
            }
        }

        public string SelectedImagePath
        {
            set
            {
                selectedImagePath = value;
            }
            get
            {
                return selectedImagePath;
            }
        }

        private int PictureBoxIndex
        {
            set
            {
                pictureBoxIndex = value;
            }
            get
            {
                return pictureBoxIndex;
            }
        }

        public void GenerateThumbnails(List<string> images)
        {
            log = log + "GenerateThumbnails() Entered: \r\n";
            ImagePaths = images;
            ImageCount = ImagePaths.Count;
            int pictureBoxTopInterval = THUMBNAIL_SIZE + 4;
            int pictureBoxLeftInterval = THUMBNAIL_SIZE + 4;
            int thumbnailColumns = this.panelDoubleBuffered1.Width / (THUMBNAIL_SIZE);
            int remainder;
            int thumbnailRows = Math.DivRem(ImageCount, thumbnailColumns, out remainder);
            int thumbnailBreak = 0;

            if (remainder > 0)
            {
                thumbnailRows = thumbnailRows + 1;
            }

            PictureBoxes = new List<PictureBox>();
            pictureBoxIndex = 0;

            log = log + "Generating PictureBox array: \r\n";
            for (int i = 0; i < thumbnailRows; i = i + 1)
            {
                log = log + "Row " + i.ToString() + ", Column ";
                for (int j = 0; j < thumbnailColumns; j = j + 1)
                {
                    log = log + j.ToString() + ", ";
                    if (thumbnailBreak == ImageCount)
                    {
                        break;
                    }
                    else
                    {
                        PictureBox nextPictureBox = new PictureBox();

                        PictureBoxes.Add(nextPictureBox);

                        PictureBoxes[PictureBoxIndex].ImageLocation = ImagePaths[PictureBoxIndex];
                        PictureBoxes[PictureBoxIndex].Parent = panelDoubleBuffered1;
                        PictureBoxes[PictureBoxIndex].Width = THUMBNAIL_SIZE;
                        PictureBoxes[PictureBoxIndex].Height = THUMBNAIL_SIZE;
                        PictureBoxes[PictureBoxIndex].Tag = pictureBoxes[PictureBoxIndex].ImageLocation;
                        PictureBoxes[PictureBoxIndex].Top = 3 + (i * pictureBoxTopInterval);
                        PictureBoxes[PictureBoxIndex].Left = 3 + (j * pictureBoxLeftInterval);
                        PictureBoxes[PictureBoxIndex].Show();
                        PictureBoxes[PictureBoxIndex].Click += new EventHandler(OnButtonClick);
                        PictureBoxIndex = PictureBoxIndex + 1;
                        this.Refresh();
                        thumbnailBreak = thumbnailBreak + 1;
                    }
                }
                log = log + ": Initialised\r\n";
            }

            PictureBoxIndex = 0;
            log = log + "if (bwAsyncWorker.IsBusy) - ";
            if (bwAsyncWorker.IsBusy)
            {
                log = log + "bgw is busy: \r\n";
                //toolStripStatusLabel1.Text = "Cancelling...";
                //bwAsyncWorker.CancelAsync();
            }
            else
            {
                toolStripStatusLabel1.Text = "Loading...";
                log = log + "bwAsyncWorker.RunWorkerAsync(); - ";
                bwAsyncWorker.RunWorkerAsync();
            }
        }

        private void bwAsync_DoWork(object sender, DoWorkEventArgs e)
        {
            log = log + "Executed:\r\n";
            BackgroundWorker bwAsync = sender as BackgroundWorker;

            for (int i = 0; i < ImageCount; i = i + 1)
            {
                try
                {
                    log = log + "bwAsync.ReportProgress(Convert.ToInt32(i * (100.0 / ImageCount))); - ";
                    bwAsync.ReportProgress(Convert.ToInt32(i * (100.0 / ImageCount)));
                    log = log + "Executed:\r\n";

                    log = log + "ProgressBar updated to: " + (Convert.ToInt32(i * (100.0 / ImageCount))) + "\r\n";

                    log = log + "Image " + i.ToString();
                    PictureBoxes[i].Load();
                    log = log + " Has Loaded\r\n";

                    log = log + "SetImage(PictureBoxes[i]); - ";
                    SetImage(PictureBoxes[i]);
                    log = log + "Executed:\r\n";

                    if (bwAsync.CancellationPending)
                    {
                        log = log + "e.Cancel = true; - ";
                        e.Cancel = true;
                        log = log + "Executed\r\n";

                        log = log + "return;\r\n";
                        return;
                    }

                }
                catch
                {
                }
            }
        }

        private void bwAsync_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            if (e.Error != null)
            {
                log = log + "RunWorkerComplete: " + e.Error.Message + "\r\n";
                MessageBox.Show(e.Error.Message);
                return;
            }

            if (e.Cancelled)
            {
                log = log + "RunWorkerComplete: Cancelled...\r\n";
                toolStripStatusLabel1.Text = "Cancelled...";
            }
            else
            {
                log = log + "RunWorkerComplete: Completed...\r\n";
                toolStripStatusLabel1.Text = "Completed...";
                toolStripProgressBar1.Value = 100;
            }
        }

        private void bwAsync_ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
            log = log + " + "; // shows that ProgressChanged was entered.
            toolStripProgressBar1.Value = e.ProgressPercentage;
            Application.DoEvents();
        }

        public void OnButtonClick(object sender, EventArgs e)
        {
            log = log + "Selected image changed to: " + SelectedImageIndex.ToString() + ": \r\n";
            oldSelectedImageIndex = SelectedImageIndex;
            SelectedImagePath = ((PictureBox)sender).Tag.ToString();
            SelectedImageCallback(SelectedImagePath);
            SelectedImageIndex = ImagePaths.IndexOf(SelectedImagePath);
            oldSelectedImageIndex = SelectedImageIndex;
            Refresh();

            Graphics dc = this.panelDoubleBuffered1.CreateGraphics();
            Pen Redpen = new Pen(Color.Red, 2);
            dc.DrawRectangle(Redpen, PictureBoxes[SelectedImageIndex].Left - 2, PictureBoxes[SelectedImageIndex].Top - 2, 104, 104);
        }

        public static Bitmap ConvertToRGB(Bitmap original)
        {
            Bitmap newImage = new Bitmap(original.Width, original.Height, PixelFormat.Format32bppArgb);
            newImage.SetResolution(original.HorizontalResolution, original.VerticalResolution);
            using (Graphics g = Graphics.FromImage(newImage))
            {
                g.DrawImageUnscaled(original, 0, 0);
            }
            return newImage;
        }

        //Generate new image dimensions
        public Size GenerateImageDimensions(int currW, int currH, int destW, int destH)
        {
            //double to hold the final multiplier to use when scaling the image
            double multiplier = 0;

            //string for holding layout
            string layout;

            //determine if it's Portrait or Landscape
            if (currH > currW) layout = "portrait";
            else layout = "landscape";

            switch (layout.ToLower())
            {
                case "portrait":
                    //calculate multiplier on heights
                    if (destH > destW)
                    {
                        log = log + "multiplier = (double)destW / (double)currW;";
                        multiplier = (double)destW / (double)currW;
                        log = log + "Executed\r\n";
                    }

                    else
                    {
                        log = log + "multiplier = (double)destH / (double)currH;";
                        multiplier = (double)destH / (double)currH;
                        log = log + "Executed\r\n";
                    }
                    break;
                case "landscape":
                    //calculate multiplier on widths
                    if (destH > destW)
                    {
                        log = log + "multiplier = (double)destW / (double)currW;";
                        multiplier = (double)destW / (double)currW;
                        log = log + "Executed\r\n";
                    }

                    else
                    {
                        log = log + "multiplier = (double)destH / (double)currH;";
                        multiplier = (double)destH / (double)currH;
                        log = log + "Executed\r\n";
                    }
                    break;
            }

            //return the new image dimensions
            try
            {
                return new Size((int)(currW * multiplier), (int)(currH * multiplier));
            }
            catch (System.Exception e)
            {
                log = log + "Calling from GenerateImageDimensions(): " + e.Message;
                return new Size((int)(currW * multiplier), (int)(currH * multiplier));
            }

        }

        //Resize the image
        public void SetImage(PictureBox pb)
        {
            try
            {
                //create a temp image
                log = log + "Image imgtmp = pb.Image; - ";
                Image imgtmp = pb.Image;
                log = log + "Executed\r\n";
                //calculate the size of the image
                log = log + "Size imgSize = GenerateImageDimensions(imgtmp.Width, imgtmp.Height, pb.Width, pb.Height); - ";
                Size imgSize = GenerateImageDimensions(imgtmp.Width, imgtmp.Height, pb.Width, pb.Height);
                log = log + "Executed\r\n";

                //create a new Bitmap with the proper dimensions
                log = log + "Bitmap finalImg = new Bitmap(imgtmp, imgSize.Width, imgSize.Height);";
                Bitmap finalImg = new Bitmap(imgtmp, imgSize.Width, imgSize.Height);
                log = log + "Executed\r\n";

                log = log + "Bitmap img = ConvertToRGB(finalImg);";
                Bitmap img = ConvertToRGB(finalImg);
                log = log + "Executed\r\n";

                //create a new Graphics object from the image
                log = log + "Graphics gfx = Graphics.FromImage(img);";
                Graphics gfx = Graphics.FromImage(img);
                log = log + "Executed\r\n";

                //clean up the image (take care of any image loss from resizing)
                log = log + "gfx.InterpolationMode = InterpolationMode.HighQualityBicubic;";
                gfx.InterpolationMode = InterpolationMode.HighQualityBicubic;
                log = log + "Executed\r\n";

                //empty the PictureBox
                log = log + "pb.Image = null;";
                pb.Image = null;
                log = log + "Executed\r\n";

                //center the new image
                log = log + "pb.SizeMode = PictureBoxSizeMode.CenterImage;";
                pb.SizeMode = PictureBoxSizeMode.CenterImage;
                log = log + "Executed\r\n";

                //set the new image
                log = log + "pb.Image = finalImg;";
                pb.Image = finalImg;
                log = log + "Executed\r\n";
            }
            catch (System.Exception e)
            {
                log = log + "Calling from SetImage: - " + e.Message + "\r\n";
                MessageBox.Show(e.Message);
            }
        }
    }
} 
```

这是应用程序的图像，请注意一些缩略图没有调整大小，我完全无法理解为什么。

由于防止垃圾邮件，我还不能发布图片，但你可以在[这里](http://spacemarines.co.uk/programming/CSharp/PVPlus.jpg)找到一张。

如果需要，我也可以提供日志输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:25:44.133

使用 BackgroundWorker 线程。

```
private void bw_DoWork(object sender, DoWorkEventArgs e)
{
    BackgroundWorker worker = sender as BackgroundWorker;

    for (int i = 1; (i <= 10); i++)
    {
        if ((worker.CancellationPending == true))
        {
            e.Cancel = true;
            break;
        }
        else
        {
            // **Perform your uploads here** and report progress.
            System.Threading.Thread.Sleep(500);
            worker.ReportProgress((i * 10));
        }
    }
} 
```

# qtp - 使用 Qtp 在 QC 中上传缺陷

> ID：11206261
> 
> 赞同：0
> 
> 时间：2012-06-26T11:22:39.807
> 
> 标签：qtp, hp-quality-center

有没有办法在不使用 QCUtil 的情况下将缺陷上传到 QC 中？因为以下内容只能在 QTP 测试中编写时使用，在 vbs 文件或 vba 中编写时不起作用。

```
Dim QCConnection 
Set QCConnection = QCUtil.QCConnection 
Set BugFactory = QCConnection.BugFactory 
Set Bug = BugFactory.AddItem (Nothing) 
```

除了使用 QCUtil 之外，还有其他方法可以将缺陷上传到 Quality Center 吗？

预先感谢您的帮助，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:09:00.127

找到了答案:)。它是通过以下代码：

```
Set qtApp = CreateObject("QuickTest.Application") 'Create QTP Object

qtApp.TDConnection.Disconnect 'Disconnect  TDConnection
qtApp.TDConnection.Connect QCserver, QCdomain, QCproject, QCuser, QCpassword, False 'Connect  TDConnection

Set tdc = qtApp.TDConnection.TDOTA 'Set TDC Connection
set BugFactory = tdc.BugFactory
'Add a new, empty defect

Set Bug = BugFactory.AddItem(Nothing)

'Enter values for required fields

Bug.Status = "New"

Bug.Summary ="issues in verification"

Bug.DetectedBy = "Jeff"  

Bug.Post 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T21:14:35.030

QCUtils 是 QC api 的包装器，称为 OTA。您可以直接从任何可以使用 COM 的东西中使用它。

QC 帮助页面中有一个 Chm 帮助文件，其中包含 OTA 的示例。

# email - 发送有关 Mantis 新错误的电子邮件

> ID：11206263
> 
> 赞同：2
> 
> 时间：2012-06-26T11:22:44.910
> 
> 标签：email, configuration, config, mantis

对于一个特定的项目，我正在尝试将 mantis 配置为在提交新错误时向所有主管 (65) 发送电子邮件。

为此，我在配置报告页面中添加了一个条目，如下所示：

```
Username: All Users
Project Name: Test New
Type: Complex
Value:

array ('new' => array('threshold_min' => '65', 'threshold_max' => '65')) 
```

当我添加它时，它会像这样重新格式化它：

```
array (
  'new' => 'array(\'threshold_min => \'65',
  'threshold_max' => '65\')',
) 
```

并且不向项目主管发送电子邮件。

有人可以帮助我吗？配置 Mantis 非常新！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:18:52.413

我发现我还必须为“处理程序更改时的电子邮件”启用主管（我还必须为经理级别执行此操作，以便在分配时接收电子邮件。

它现在工作:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T12:11:59.053

在 mantis 中以管理员身份登录。

单击管理配置。

单击电子邮件通知。

您将获得一个表格，说明在不同的时间应该何时触发邮件，选择适当的选项。

[点击这里查看mantis管理指南文档](http://www.mantisbt.org/docs/master-1.2.x/en/administration_guide.pdf)

附图是为您提供帮助的快照...

![在此处输入图像描述](../Images/b2e058a95763a719e32025cbc2e6bbb7.png)

*下面只是为了您的螳螂功能增强......*

您还可以通过包括为不同级别的用户提供聊天选项

```
$g_main_menu_custom_options = array (
                array( "Chat", REPORTER, 'chat_page.php' )
                ); 
```

在您的 config_inc.php 中。

我已将**phpchat**应用程序与 mantis 合并。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T16:11:11.797

您可以配置将电子邮件发送给特定的用户角色作为“经理”。然后在项目中为所有这 65 个人分配这个角色。

所有这些人都会收到邮件。

让我知道这是否有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T13:24:56.647

目前在管理配置页面中存在一个 [已知限制](http://www.mantisbt.org/bugs/view.php?id=13298)，无法正确处理复杂类型的输入。

实际上，我不久前就开始根据问题报告者的初始提交来解决这个问题，但被转移了方向，从未有时间完成它。[您可以在我的github 分支](https://github.com/dregad/mantisbt/commits/manage-config-dr)上找到正在进行的工作。

在那之前，恐怕您唯一的选择是直接在 config_inc.php 中输入所需的设置。

# javascript - 使用回调的递归Javascript函数不起作用

> ID：11206264
> 
> 赞同：0
> 
> 时间：2012-06-26T11:22:50.820
> 
> 标签：javascript, recursion

我正在尝试使用回调来解决我的递归函数 JS 的问题。我只想根据索引更新 3 div 的 HTML。请在下面找到代码

```
<div id="try0">50</div>
<div id="try1">50</div>
<div id="try2">50</div>

function getNumberOfAnswers(questionID, callback)
{
  var value = i*10;
   callback( value.toString());

}

var i=0;
getNumberOfAnswers(i, function callFunc(ratio){
    var itemToChg = 'try'+i;
document.getElementById(itemToChg).innerHTML = ratio;
    if(i<3){
        i++;
        getNumberOfAnswers(i,callFunc(ratio));

    }

    }); 
```

我没有在上面的代码上添加任何标签来简化，但我用它做了一个 JSfiddle。[http://jsfiddle.net/cyrilGa/zmtQ8/](http://jsfiddle.net/cyrilGa/zmtQ8/)。在倒数第三行，我尝试写 getNumberOfAnswers(i,ratio); 但它没有用。有人可以帮我解决这个问题吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:03:49.880

该行：

```
var value = i*10; 
```

应该

```
var value = questionID * 10; 
```

而且我认为

```
getNumberOfAnswers(i,callFunc(i)); 
```

应该：

```
getNumberOfAnswers(i,callFunc); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:51:22.613

不要为此使用递归，这很愚蠢。

```
for ( var i = 0; i < 3; i++ ) {
    document.getElementById('try' + i).innerHTML = i * 10;
} 
```

这是你想要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:36:14.360

您需要将`callFunc(ratio);`底部的递归替换为，`callFunc(i);`因为在您递增时参数`ratio`仍然等于 0 `i`。其他一切都很好。

# c# - 声明之间的区别

> ID：11206267
> 
> 赞同：3
> 
> 时间：2012-06-26T11:23:13.927
> 
> 标签：c#, .net, declaration, nullable

这两个代码有什么区别：

```
public uint? a;
public uint a; 
```

我想知道如果我们使用有什么区别？在 int 或 double 或其他之后

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T11:23:48.520

`uint?`是一个可以为[空的类型](http://msdn.microsoft.com/en-us/library/1t3y8s4s%28v=vs.80%29.aspx)，例如它可以保存空值。

```
uint? a;
uint b;

a = null;
b = null; //this will cause error 
```

在 C# 4.0 中，您可以使用[空合并运算符进行检查](http://msdn.microsoft.com/en-us/library/ms173224.aspx)

```
 b = a ?? 0; 
```

它与

```
 if (a.HasValue)
        b = a;
    else
        b = 0; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T11:26:17.607

值类型不能保存空值，因为它们不是对象。和 ？您指定要在值类型周围使用不可见的包装器，并使其为空。

```
int a = null  // won't work
int? b = null // works 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-26T11:27:40.400

`int?`是一个快捷方式`Nullable<int>`。它允许存储空值。`Nullable<T>`是一种泛型类型，允许将空值分配给通常不支持空值的类型。

所以

```
int? a = null; //valid
int b = null; //invalid

//usage pattern
if (a.HasValue){
    c = a.Value;
} 
```

请参阅[可为空的 MSDN 文档](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-26T11:35:02.927

要补充的一件事：

```
public uint? a; 
```

完全一样

```
public Nullable<uint> a; 
```

这`?`只是语法糖。

哦，还有一个想到的：仅仅因为框架为您提供了使用可为[空类型](http://msdn.microsoft.com/en-us/library/1t3y8s4s.aspx)的选项，这并不意味着您应该不假思索地使用它们。

当你使用它们时，你的代码中会充斥着对 Nullable`HasValue`检查的调用，这与 相同`x == null`，可能指向可以改进的设计。

我并不是说 Nullables 不好。实际上恰恰相反：如果您认为它们可能非常适合您的用例，那么请务必继续使用它们。

只是不要仅仅因为它们在那里就使用它们。请？请问好看吗？

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-26T11:25:44.033

```
public uint? a is `nullable type` which is what the `?` operator means in this scenario.

public uint a; is an unsigned integer that requires a value. 
```

Nullable 类型是 System.Nullable 结构的实例。可空类型可以表示其基础值类型的正常值范围，外加一个额外的空值。例如，一个 Nullable，发音为“Nullable of Int32”，可以分配从 -2147483648 到 2147483647 的任何值，也可以分配 null 值。可以为 Nullable 分配值 true 或 false 或 null。在处理数据库和其他包含可能未分配值的元素的数据类型时，将 null 分配给数字和布尔类型的能力特别有用。例如，数据库中的布尔字段可以存储值 true 或 false，或者它可能是未定义的。

[http://msdn.microsoft.com/en-us/library/1t3y8s4s(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/1t3y8s4s(v=vs.80).aspx)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-26T11:25:28.630

`public uint? a;`这是可为空的类型。可空类型可以表示其基础值类型的正确值范围，以及额外的空值。

# meteor - 如何在流星客户端中创建各种视图？

> ID：11206268
> 
> 赞同：3
> 
> 时间：2012-06-26T11:23:15.097
> 
> 标签：meteor

我想知道我们是否可以在同一服务器的流星客户端中提供具有不同 URL 的不同视图？也就是说，对于猪肉游戏，每个玩家都有一个视图。

一个非常清楚的例子：

```
http://app1.meteor.com/myself # a web view for a user
http://app1.meteor.com/all # a web view for the administrator 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:39:46.760

You can use [router](https://atmosphere.meteor.com/package/router). It is very easy to use.

You can find examples on usage [here](https://github.com/tmeasday/meteor-router).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T00:21:58.550

是的。您只需要跟踪用户会话。你可以在这里看到一个例子：

[http://user-sessions.meteor.com/](http://user-sessions.meteor.com/)

来源可以在这里找到：

[http://github.com/possibilities/meteor-user-sessions](http://github.com/possibilities/meteor-user-sessions)

# java - java中的JSON反序列化列表没有类型信息

> ID：11206270
> 
> 赞同：0
> 
> 时间：2012-06-26T11:23:20.310
> 
> 标签：java, json, serialization, gson

```
class Result {
  private List orders;// Holds objects of class Object only.
  private Number a;
  private Number b;
}

class Order {
  private Number oid;
  private Number status;
}

public class TestClass {
public static void main(String... args){
    String testString = "{\"orders\":[{\"oid\":\"347\",\"status\":\"1\"},{\"oid\":\"348\",\"status\":\"1\"}],\"a\":14.15,\"b\":0}";
    Gson gson = new GsonBuilder().create(); 
    Result res = gson.fromJson( testString, Result.class );
} 
```

类结果不能修改。Json 没有列表的类型信息，Json 无法解析。

1.  假设我们不能更改这些类，将如何解决这个问题？考虑可能存在多个不同类型的此类列表的情况。
2.  如果列表包含多种类型的对象怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:05:33.110

解析 JSON 时，您希望它具有一定的结构。例如，您希望 Result 对象包含 Orders 而不是字符串或其他内容。所以解析器必须足够智能，才能弄清楚列表中可以包含哪些类型的对象。除非您对集合进行参数化，否则无法知道这一点。相信所有 java 泛型信息在编译时都会被删除。这不是真的。例如，Gson 使用泛型来确定如何解析特定的列表值。因此，如果您使用的是 GSon 解析器并且`List<Order>`不同的列表类型没有问题。

处理不同的列表项类是另一回事。如果您可以更改 Json 数据，那么对于每个列表项，您可以对类名及其字段进行编码。如果您绝对无法更改数据类，则必须恢复将 json 解释为分层键值对的集合并自己进行反序列化。

可能[这个](https://stackoverflow.com/questions/11191387/gson-deserialization-how-to-know-the-objects/)线程会有所帮助

# java - 使用 mail-service.xml 文件从 jboss 发送电子邮件

> ID：11206272
> 
> 赞同：1
> 
> 时间：2012-06-26T11:23:22.360
> 
> 标签：java, jboss, jakarta-mail

我正在尝试从 jboss 发送邮件，同时从 mail-service.xml 文件获取会话。

```
javax.naming.Context ictx = new javax.naming.InitialContext();
       Session mailSession = (Session) ictx.lookup("java:/Mail"); 
```

这是我的 mail-service.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<!--DOCTYPE server-->
<!-- $Id: mail-service.xml,v 1.5 2003/08/27 04:34:12 patriot1burke Exp $ -->

<server>

  <!-- ==================================================================== -->
  <!-- Mail Connection Factory                                              -->
  <!-- ==================================================================== -->

  <mbean code="org.jboss.mail.MailService"
         name="jboss:service=Mail">
    <attribute name="JNDIName">java:/Mail</attribute>
    <attribute name="User">nobody</attribute>
    <attribute name="Password">password</attribute>
    <attribute name="Configuration">
       <!-- Test -->
       <configuration>

          <property name="mail.smtp.starttls.enable" value="true"/>
          <property name="mail.smtp.host" value="smtp.gmail.com"/>
          <property name="mail.smtp.user" value="***"/>
          <property name="mail.smtp.password" value="***"/>
          <property name="mail.smtp.port" value="587"/>
          <property name="mail.smtp.auth" value="true"/>
          <property name="mail.debug" value="true"/>
       </configuration>
    </attribute>
  </mbean>

</server> 
```

但我得到这个输出说身份验证失败异常：

```
16:29:37,562 INFO  [STDOUT] 220 mx.google.com ESMTP ku7sm11540452pbc.31
16:29:37,578 INFO  [STDOUT] DEBUG SMTP: connected to host "smtp.gmail.com", port
: 587
16:29:37,578 INFO  [STDOUT] EHLO cl-4
16:29:38,000 INFO  [STDOUT] 250-mx.google.com at your service, [101.63.150.159]
250-SIZE 35882577
250-8BITMIME
250-STARTTLS
250 ENHANCEDSTATUSCODES
16:29:38,000 INFO  [STDOUT] DEBUG SMTP: Found extension "SIZE", arg "35882577"
16:29:38,000 INFO  [STDOUT] DEBUG SMTP: Found extension "8BITMIME", arg ""
16:29:38,000 INFO  [STDOUT] DEBUG SMTP: Found extension "STARTTLS", arg ""
16:29:38,000 INFO  [STDOUT] DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", a
rg ""
16:29:38,000 INFO  [STDOUT] STARTTLS
16:29:38,453 INFO  [STDOUT] 220 2.0.0 Ready to start TLS
16:29:38,718 INFO  [STDOUT] EHLO cl-4
16:29:40,750 INFO  [STDOUT] 250-mx.google.com at your service, [101.63.150.159]
250-SIZE 35882577
250-8BITMIME
250-AUTH LOGIN PLAIN XOAUTH
250 ENHANCEDSTATUSCODES
16:29:40,750 INFO  [STDOUT] DEBUG SMTP: Found extension "SIZE", arg "35882577"
16:29:40,765 INFO  [STDOUT] DEBUG SMTP: Found extension "8BITMIME", arg ""
16:29:40,765 INFO  [STDOUT] DEBUG SMTP: Found extension "AUTH", arg "LOGIN PLAIN
 XOAUTH"
16:29:40,765 INFO  [STDOUT] DEBUG SMTP: Found extension "ENHANCEDSTATUSCODES", a
rg ""
16:29:40,765 INFO  [STDOUT] DEBUG SMTP: Attempt to authenticate
16:29:40,765 INFO  [STDOUT] AUTH LOGIN
16:29:41,187 INFO  [STDOUT] 334 VXNlcm5hbWU6
16:29:41,187 INFO  [STDOUT] bm9b2R5
16:29:41,625 INFO  [STDOUT] 34 UGFzc3dvcmQ6
16:29:41,625 INFO  [STDOUT] cFzc3dvcmQ=
16:29:42,062 INFO  [STDOUT] 535-5.7.1 Username and Password not accepted. Learn
more at
535 5.7.1 http://support.google.com/mail/bin/answer.py?answer=14257 ku7sm1154045
2pbc.31
16:29:42,062 INFO  [STDOUT] in sendmail1 javax.mail.AuthenticationFailedExceptio
n 
```

我搜索了这个问题并找到[了这个](https://stackoverflow.com/questions/2047942/how-to-resovle-javax-mail-authenticationfailedexception-issue)链接。它建议应该使用 Authenticator。但问题是链接中的代码不使用`mail-service.xml`文件中的会话。一切都在程序本身中硬编码。从获取会话时，我应该如何使用此身份验证器`mail-service.xml`？
**编辑**
我将“mail.smtp.user”和“mail.smtp.password”的值分别添加到mail-service.xml文件中的用户和密码属性中。它开始工作了。

```
<server>

  <!-- ==================================================================== -->
  <!-- Mail Connection Factory                                              -->
  <!-- ==================================================================== -->

  <mbean code="org.jboss.mail.MailService"
         name="jboss:service=Mail">
    <attribute name="JNDIName">java:/Mail</attribute>
    <attribute name="User">***</attribute>
    <attribute name="Password">***</attribute>
    <attribute name="Configuration">
       <!-- Test -->
       <configuration>

          <property name="mail.smtp.starttls.enable" value="true"/>
          <property name="mail.smtp.host" value="smtp.gmail.com"/>
          <property name="mail.smtp.user" value="***"/>
          <property name="mail.smtp.password" value="***"/>
          <property name="mail.smtp.port" value="587"/>
          <property name="mail.smtp.auth" value="true"/>
          <property name="mail.debug" value="true"/>
       </configuration>
    </attribute>
  </mbean>

</server><br> 
```

但我已经在“mail.smtp.user”和“mail.smtp.password”值中给出了用户名和密码。为什么它不能从那里读取它？它就是为了这个目的，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T00:14:30.297

mail.smtp.password 仍然是有效的配置属性吗？我知道旧版本的文档有它，但它似乎已从[http://javamail.kenai.com/nonav/javadocs/com/sun/mail/smtp/package-summary.html](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/smtp/package-summary.html)中删除。我认为当它被删除时，大多数用于设置受管理和经过身份验证的 JavaMail 会话的文档都停止工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T04:13:53.217

理想情况下，JBoss 会设置 Session 来为您进行身份验证，但如果这不起作用，您可以使用 Transport.connect 方法来指定用户名和密码。有关示例，请参阅 JavaMail 常见问题解答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-16T06:00:12.813

在服务器中的 mail-service.xml 中尝试此操作

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- $Id: mail-service.xml 62350 2007-04-15 16:50:12Z dimitris@jboss.org $ -->
<server>
<!-- ================================================== -->
<!-- Mail Connection Factory                                              --> 
<!-- ============================================== -->

<mbean code="org.jboss.mail.MailService"
     name="jboss:service=Mail">
<attribute name="JNDIName">java:/Mail</attribute>
<attribute name="User">type sender mail id here</attribute>
<attribute name="Password">type password</attribute>   
<attribute name="Configuration">
  <!-- A test configuration -->
  <configuration>
<property name="mail.smtp.auth" value="true"/>
    <property name="mail.smtp.starttls.enable" value="true"/>
    <property name="mail.smtp.socketFactory.class" value="javax.net.ssl.SSLSocketFactory"/>
    <!-- Change to your mail server prototocol -->
    <property name="mail.store.protocol" value="pop3"/>
    <property name="mail.transport.protocol" value="smtp"/>

    <!-- Change to the user who will receive mail  -->
    <property name="mail.user" value="nobody"/>

    <!-- Change to the SMTP gateway server -->
    <property name="mail.smtp.host" value="smtp.gmail.com"/>

    <!-- The mail server port -->
    <property name="mail.smtp.port" value="465"/>
    <!-- Change to the address mail will be from  -->
    <property name="mail.from" value=""/>

    <!-- Enable debugging output from the javamail classes -->
    <property name="mail.debug" value="false"/>
  </configuration>
</attribute>
<depends>jboss:service=Naming</depends>
</mbean>

</server> 
```

# android - Sencha 应用程序到原生 Android 应用程序

> ID：11206278
> 
> 赞同：0
> 
> 时间：2012-06-26T11:23:48.703
> 
> 标签：android, extjs

我想将 sencha touch 应用程序部署到本机 Android (apk) 但是当我遵循指南并运行最后一条指令时，即

```
sencha package run android.json 
```

这是我的“android.json”文件

```
{
/**
 * @cfg {String} applicationName
 * @required
 * This is the name of your application, which is displayed on the device when the app is installed. On IOS, this should match
 * the name of your application in the Apple Provisioning Portal.
 */
"applicationName":"My Application",

/**
 * @cfg {String} applicationId
 * This is the name namespace for your application. On IOS, this should match the name of your application in the Apple Provisioning Portal.
 */
"applicationId":"com.mycompany.myAppID",

/**
 * @cfg {String} bundleSeedId
 * A ten character string which stands before aplication ID in Apple Provisioning Portal
 */
"bundleSeedId":"KPXFEPZ6EF",

/**
 * @cfg {String} versionString
 * @required
 * This is the version of your application.
 */
"versionString":"1.0",

/**
 * @cfg {String} iconName
 * This is file name of your icon. This should be in the same directory of this configuration file.
 *
 * For iOS, please refer to their documentation about icon sizes:
 * https://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html
 *
 * For Android, please refer to the Google Launcher icons guide:
 * http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html
 */
"iconName":"icon.png",

/**
 * @cfg {String} inputPath
 * @required
 * This is location of your Sencha Touch 2 application, relative to this configuration file.
 */
"inputPath":"./",

/**
 * @cfg {String} outputPath
 * @required
 * This is where the built application file with be saved.
 */
"outputPath":"../../st2/",

/**
 * @cfg {String} configuration
 * @required
 * This is configuration for your application. `Debug` should always be used unless you are submitting your app to an online
 * store - in which case `Release` should be specified.
 */
"configuration":"Debug",

/**
 * @cfg {String} platform
 * @required
 * This is the platform where you will be running your application. Available options are:
 *  - iOSSimulator
 *  - iOS
 *  - Android
 *  - AndroidEmulator
 */
"platform":"iOSSimulator",

/**
 * @cfg {String} deviceType
 * @required
 * This is device type that your application will be running on.
 *
 * If you are developing for Android, this is not necessary.
 *
 * Available options are:
 *  - iPhone
 *  - iPad
 *  - Universal
 */
"deviceType":"Universal",

/**
 * @cfg {String} certificatePath
 * This is the location of your certificate.
 * This is required when you are developing for Android or you are developing on Windows.
 */
"certificatePath":"/path/to/certificate.file",

/**
 * @cfg {String} certificateAlias
 * This is the name of your certificate.
 *
 * IF you do not specify this on OSX, we will try and automatically find the certificate for you using the applicationId.
 *
 * This can be just a simple matcher. For example, if your certificate name is "iPhone Developer: Robert Dougan (ABCDEFGHIJ)", you
 * can just put "iPhone Developer".
 *
 * When using a certificatePath on Windows, you do not need to specify this.
 */
"certificateAlias":"",
/**
 * @cfg {String} sdkPath
 * This is the path to the Android SDK, if you are developing an Android application.
 */
"sdkPath":"/path/to/android-sdk",

/**
/**
 * @cfg {String} androidAPILevel
 * This is android API level, the version of Android SDK to use, you can read more about it here: http://developer.android.com/guide/appendix/api-levels.html.
 * Be sure to install corresponding platform API in android SDK manager (android_sdk/tools/android)
 */
"androidAPILevel":"7",

/**
 * @cfg {Array[String]} orientations
 * @required
 * This is orientations that this application can run.
 */
"orientations": [
    "portrait",
    "landscapeLeft",
    "landscapeRight",
    "portraitUpsideDown"
]
} 
```

它创建一个 My Application.app 文件而不是应用程序文件。如何使用 sencha sdk 工具创建 apk 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:36:08.993

您是否查看过 Android的[原生打包指南？](http://docs.sencha.com/touch/2-0/#!/guide/native_android)

您需要阅读该指南，然后在您的 json 文件中编辑路径以反映您的路径等。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-23T10:10:52.560

为了创建 apk 文件，您需要使用

```
stbuild package android.json 
```

你还需要同样的 sencha cmd v3.0

[http://www.sencha.com/products/sencha-cmd/download](http://www.sencha.com/products/sencha-cmd/download)

# android - 在 ListView Android 上显示联系人

> ID：11206285
> 
> 赞同：0
> 
> 时间：2012-06-26T11:24:21.087
> 
> 标签：android, listview

我想在 listView 上获得联系人，我也想重新利用一个 SocialAuth 代码。在这段代码中，我可以在 LogCat 上获取 ContactList，但不能在 listView 中获取，我不知道该怎么做。此 listView 在其他 XML 上。

我正在寻找更多，但我不知道如何调整代码

```
public void Events(String provider) {

    setContentView(R.layout.contact_list);

    List < Contact > contactsList = adapter.getContactList();

    if (contactsList != null && contactsList.size() > 0) {
        for (Contact p: contactsList) {

            if (TextUtils.isEmpty(p.getFirstName()) && TextUtils.isEmpty(p.getLastName())) {
                p.setFirstName(p.getDisplayName());
            }

            Log.d("Custom-UI", "Display Name = " + p.getDisplayName());
            String ContactNAme = p.getDisplayName();
            //ContactName = new String[] {p.getDisplayName()};
            //mapTo = new int[] {android.R.id.text1};
            Log.d("Custom-UI", "First Name = " + p.getFirstName());
            String ContactFisrtName = p.getFirstName();
            Log.d("Custom-UI", "Last Name = " + p.getLastName());
            String ContactLastName = p.getLastName();
            Log.d("Custom-UI", "Contact ID = " + p.getId());
            String ContactId = p.getId();
            Log.d("Custom-UI", "Profile URL = " + p.getProfileUrl());
            String ContactProfileUrl = p.getProfileUrl();

        }
        //  Log.d("ContactList",mAdapter.toString());
    }
    Toast.makeText(CustomUI.this, "View Logcat for Contacts Information", Toast.LENGTH_SHORT).show();

} 
```

我认为问题在于光标，因为我没有任何人，我有这个我认为像光标一样工作的功能

```
public List<Contact> getContactList() 
{
    try 
    {
        contactsList = new contactTask().execute().get();
    } 
    catch (InterruptedException e) 
    {
        e.printStackTrace();
    } 
    catch (ExecutionException e) 
    {
        e.printStackTrace();
    }

    return contactsList;
} 
```

所以如果有人可以帮助我，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:29:31.973

您需要为列表视图编写一个自定义适配器。

这是一个很好的例子

[http://android.vexedlogic.com/2011/04/02/android-lists-listactivity-and-listview-ii-%E2%80%93-custom-adapter-and-list-item-view/](http://android.vexedlogic.com/2011/04/02/android-lists-listactivity-and-listview-ii-%E2%80%93-custom-adapter-and-list-item-view/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:32:24.807

请看下面的链接

[http://developer.android.com/tools/samples/index.html](http://developer.android.com/tools/samples/index.html)

这是 Android SDK 中的示例示例。在那里你可以得到想要的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:56:28.000

```
 // Call contact thread 

    contact_thread = new Contact_thread();
        contact_thread.start();

 private Cursor getContacts() {
    // Run query
    Uri uri = ContactsContract.Contacts.CONTENT_URI;
    String[] projection = new String[] { ContactsContract.Contacts._ID,
            ContactsContract.Contacts.DISPLAY_NAME };
    String[] selectionArgs = null;
    String sortOrder = ContactsContract.Contacts.DISPLAY_NAME
            + " COLLATE LOCALIZED ASC";

    return managedQuery(uri, projection, null, selectionArgs, sortOrder);
}

class Contact_thread extends Thread {

    @Override
    public void run() {
        // TODO Auto-generated method stub
        // Build adapter with contact entries
        Cursor cursor = getContacts();

        cursor.moveToFirst();
        contactName = new String[cursor.getCount()];
        contactNo = new String[cursor.getCount()];
        checkedPosition = new boolean[cursor.getCount()];

        ContentResolver contect_resolver = getContentResolver();
        int i = 0;
        if (cursor.getCount() > 0) {
            do {
                String id = cursor
                        .getString(cursor
                                .getColumnIndexOrThrow(ContactsContract.Contacts._ID));

                Cursor phoneCur = contect_resolver.query(
                        ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                        null,
                        ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                                + " = ?", new String[] { id }, null);
                if (phoneCur.moveToFirst()) {
                    contactName[i] = phoneCur
                            .getString(phoneCur
                                    .getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                    contactNo[i] = phoneCur
                            .getString(phoneCur
                                    .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

                    if (contactName[i] == null) {
                        contactName[i] = "Unknown";
                    }

                } else {
                    contactName[i] = "Unknown";
                    contactNo[i] = "";
                }

                db.AddContact(contactName[i], contactNo[i]);

                i++;
                phoneCur.close();
            } while (cursor.moveToNext());

        }
        cursor.close();
        runOnUiThread(new Runnable() {

            @Override
            public void run() {
                // TODO Auto-generated method stub
                // mContactList.setAdapter(cursorAdapter);

                mContactList.setAdapter(new ContactAdapter(
                        ContactManager.this, R.layout.contact_entry));

            }
        });
    }
}

private class ContactAdapter extends ArrayAdapter<String> implements
        Filterable {

    public ContactAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
        // TODO Auto-generated constructor stub
    }

    public int getCount() {
        return contactName.length;
    }

    public String getItem(int position) {
        return contactName[position];
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        View v;
        if (convertView == null) {
            LayoutInflater li = getLayoutInflater();
            v = li.inflate(R.layout.contact_entry, null);
        } else {
            v = convertView;
        }
        CheckedTextView text = (CheckedTextView) v.findViewById(R.id.text1);
        text.setText(contactName[position] + "  (" + contactNo[position]
                + ") ");
        text.setChecked(checkedPosition[position]);
        return v;
    }

} 
```

联系人入口.xml

```
 <?xml version="1.0" encoding="utf-8"?>
  <CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/text1"
        android:layout_width="fill_parent"
        android:layout_height="?android:attr/listPreferredItemHeight"
        android:background="#AA0114"
        android:checkMark="?android:attr/listChoiceIndicatorMultiple"
        android:gravity="center_vertical"
        android:paddingLeft="6dip"
        android:paddingRight="6dip"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textStyle="bold" /> 
```

# c# - 在样式中添加 nowrap？

> ID：11206293
> 
> 赞同：1
> 
> 时间：2012-06-26T11:24:47.487
> 
> 标签：c#, html

我试图阻止文本换行。如何将其添加`nowrap`到以下内容并保持一切正常？

```
html.Append("<ins style=\"background:#e6ffe6;\">").Append(text) 
                        .Append("</ins>"); 
```

需要添加如下内容：

```
// style='white-space:nowrap; display:inline;' 
```

当我添加它时，它会破坏我的样式。我想我添加错了？

```
html.Append("<ins style='white-space:nowrap; display:inline;',style=\"background:#e6ffe6;\">").Append(text) 
                            .Append("</ins>"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:30:06.613

您拥有该`style`属性两次，请尝试以下操作：

```
html.Append("<ins style=\"white-space:nowrap; display:inline; background:#e6ffe6;\">")
    .Append(text) 
    .Append("</ins>"); 
```

但是，IMO 样式最好保留在 CSS 文件中。您可以设置一个适当的类（或类）：

```
html.Append("<ins class=\"aClass\">")
    .Append(text) 
    .Append("</ins>"); 
```

然后在你的 CSS 文件中：

```
.aClass {
  white-space:nowrap; 
  display:inline; 
  background:#e6ffe6;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:30:50.133

你做错了`,style=`。`Style`属性在 html 元素中只能出现一次。您必须一次编写样式属性：

```
html.Append("<ins style='white-space:nowrap; display:inline;background:#e6ffe6;'>).Append(text) 
                        .Append("</ins>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:32:04.413

为什么不将所有三个样式属性组合在一个样式标签中？

```
html.Append("<ins style=\"background:#e6ffe6;white-space:nowrap; display:inline;\">").Append(text).Append("</ins>"); 
```

# trim - wp_trim_words 除了普通字符串之外什么都不能工作

> ID：11206297
> 
> 赞同：0
> 
> 时间：2012-06-26T11:25:03.833
> 
> 标签：trim, custom-fields, texttrimming

我有点不在我的领域，对此我感到困惑。除了常规字符串外，使用 wp_trim_field 对我不起作用。

这不起作用，它返回整个文本：

```
<?php 
$field = the_field('project_description');
$trimmedfield = wp_trim_words( $field, $num_words = 1, $more = '… ' );
echo '<p>' . $trimmedfield . '</p>';  
?> 
```

然而，这确实有效：

```
<?php 
$field = 'this text does get trimmed';
$trimmedfield = wp_trim_words( $field, $num_words = 1, $more = '… ' );
echo '<p>' . $trimmedfield . '</p>';  
?> 
```

回显 $field 会回显出我要修剪的文本，但修剪不起作用。关于为什么的任何想法？

编辑 - 我也试过这个，同样的事情发生了：

```
<?php
   $length = 1;
   $text = the_field('project_description');
   $words = explode(' ', $text);
   array_splice($words, $length);
   $text = implode(' ', $words);
   echo $text; 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:09:10.287

使用`var_dump($field);` `wp_trim_words( $field,....)` `$field`必须是字符串类型...检查这是否是为了测试数据类型，如果它不确定你知道该怎么做。

`typecast`如果不是，请使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-18T19:00:54.563

您需要将`$field`变量更改为：`$field = get_field('project_description');`

`the_field();`输出内容，同时`get_field();`检索它。为了通过函数传递它，您需要检索它。

回答此问题的 ACF 文档页面：[https ://www.advancedcustomfields.com/resources/displaying-custom-field-values-in-your-theme/](https://www.advancedcustomfields.com/resources/displaying-custom-field-values-in-your-theme/)

# java - 如何将大文件 (> 5 mb) 从 Blobstore 发布到 Google Drive？

> ID：11206298
> 
> 赞同：7
> 
> 时间：2012-06-26T11:25:03.970
> 
> 标签：java, google-app-engine, blobstore, google-drive-api

我的 Blobstore 中存储了 Blob，并希望将这些文件推送到 Google Drive。当我使用 Google App Engine UrlFetchService

```
URLFetchService fetcher = URLFetchServiceFactory.getURLFetchService();
URL url = new URL("https://www.googleapis.com/upload/drive/v1/files");
HTTPRequest httpRequest = new HTTPRequest(url, HTTPMethod.POST);
httpRequest.addHeader(new HTTPHeader("Content-Type", contentType));
httpRequest.addHeader(new HTTPHeader("Authorization", "OAuth " + accessToken));
httpRequest.setPayload(buffer.array());
Future<HTTPResponse> future = fetcher.fetchAsync(httpRequest);
try {
  HTTPResponse response = (HTTPResponse) future.get();
} catch (Exception e) {
  log.warning(e.getMessage());
} 
```

**问题：**当文件超过 5 mb 时，超过了 UrlFetchService 请求大小的限制（链接：[https](https://developers.google.com/appengine/docs/java/urlfetch/overview#Quotas_and_Limits) ://developers.google.com/appengine/docs/java/urlfetch/overview#Quotas_and_Limits ）

**替代方案：**使用 Google Drive API 我有以下代码：

```
File body = new File();
body.setTitle(title);
body.setDescription(description);
body.setMimeType(mimeType);

// File's content.
java.io.File fileContent = new java.io.File(filename);
FileContent mediaContent = new FileContent(mimeType, fileContent);

File file = service.files().insert(body, mediaContent).execute(); 
```

**此解决方案的问题：** Google App Engine 不支持 FileOutputStream 来管理从 Blobstore 读取的 byte[]。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T19:21:40.327

为此，请使用小于 5 兆字节的块的可恢复上传。这在 Google API Java Client for Drive 中很容易做到。这是改编自您已经提供的 Drive 代码的代码示例。

```
File body = new File();
body.setTitle(title);
body.setDescription(description);
body.setMimeType(mimeType);

java.io.File fileContent = new java.io.File(filename);
FileContent mediaContent = new FileContent(mimeType, fileContent);

Drive.Files.Insert insert = drive.files().insert(body, mediaContent);
insert.getMediaHttpUploader().setChunkSize(1024 * 1024);
File file = insert.execute(); 
```

有关更多信息，请参阅相关类的 javadocs：

*   [com.google.api.services.drive.Drive.Files.Insert](http://javadoc.google-api-java-client.googlecode.com/hg/apis/drive/v1/com/google/api/services/drive/Drive.Files.Insert.html)
*   [com.google.api.client.googleapis.media.MediaHttpUploader](http://javadoc.google-api-java-client.googlecode.com/hg/1.10.3-beta/com/google/api/client/googleapis/media/MediaHttpUploader.html)

# jquery - 我如何只显示 5 个 Li 并有一个显示 5 个以上的按钮

> ID：11206307
> 
> 赞同：2
> 
> 时间：2012-06-26T11:25:27.280
> 
> 标签：jquery

我有 500 个`li`，但一开始我只想显示 5 个，然后我可以单击一个按钮，它会显示更多`li`的，也许最后没有更多`li`的，但不是所有的都只是另外 5 个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T11:27:57.390

```
var $li = $("li"),
    chunk = 5;

$li.slice(chunk).hide();

$("button").click(function() {
    $li.filter(":hidden").slice(0, chunk).show();
});​ 
```

[js小提琴](http://jsfiddle.net/Ma8AW/)。

有更有效的方法来编写这段代码，但是这个是相当易读的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T11:34:51.083

您可以在您的后面动态添加一个“更多”按钮，`ul`并一次显示 5 li，直到全部显示。然后你可以隐藏更多按钮：

```
var vis = 5;
$('li').slice(vis).hide();

var $more = $('<a href="#">test</a>')
$more.click(function(){
    $('li:hidden').slice(0,vis).show();
    if($('li:hidden').length == 0)
        $more.hide();
});
$('ul').after($more); 
```

现场示例：http: [//jsfiddle.net/JKWtP/](http://jsfiddle.net/JKWtP/)

# cocos2d-x - CCApplication::getCurrentLanguage() 在 cocos2d-x 上获取 null

> ID：11206316
> 
> 赞同：7
> 
> 时间：2012-06-26T11:25:55.907
> 
> 标签：cocos2d-x

我实际上正在使用 Linux，但我也使用 Mac。

我正在尝试为我的游戏添加多语言支持，并且我将使用带有标签的不同 XML。

当我使用`ccLanguageType _myLanguage = CCApplication::getCurrentLanguage()`get null 时，信号 11 异常。

我也用过`getCurrentLanguageJNI()` ，但是没用。

这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T10:49:55.100

尝试使用 CCApplication::sharedApplication().getCurrentLanguage();

# macos - 导出私钥时 SecItemExport 失败

> ID：11206327
> 
> 赞同：4
> 
> 时间：2012-06-26T11:26:42.443
> 
> 标签：macos, security, osx-lion, core-foundation

我想使用新的 10.7 `Security.framework`API 导出私有 ECDSA 密钥，但操作一直失败，错误代码为 -26260：

```
errSecPassphraseRequired     = -25260,  /* Passphrase is required for import/export. */ 
```

我还希望我生成的密钥不要添加到钥匙串中，因为它们是供其他机器使用的，我将自己处理存储。这是不起作用的代码 - 第一次导出成功，但是一旦导入相同的密钥数据，如果没有密码就无法再次导出。我没有为此密钥设置密码。我尝试了许多导出类型的组合，包括打包的 OpenSSL 和 PEM 装甲，但似乎没有什么不同。我有工作代码已经使用 OpenSSL 执行此操作，但由于它在 Lion 中已被弃用，我想看看新的 API 可以做什么。

```
// Set up the parameters for 256-bit ECDSA
CFMutableDictionaryRef parameters = CFDictionaryCreateMutable(kCFAllocatorDefault, 0, &kCFTypeDictionaryKeyCallBacks, &kCFTypeDictionaryValueCallBacks);
CFDictionarySetValue(parameters, kSecAttrKeyType, kSecAttrKeyTypeECDSA);
CFDictionarySetValue(parameters, kSecAttrKeySizeInBits, CFSTR("256")); // kSecp256r1
CFDictionarySetValue(parameters, kSecAttrIsPermanent, kCFBooleanFalse);

// Issue #1:
// SecKeyGeneratePair() adds the keys to the keychain, which I don't want to do
// The docs say that kSecAttrIsPermanent should change this behavior
SecKeyRef publicKey, privateKey;
OSStatus result = SecKeyGeneratePair((CFDictionaryRef)parameters, &publicKey, &privateKey);

CFRelease(parameters), parameters = nullptr;

if(noErr == result) {
    CFDataRef privateKeyData = nullptr;
    result = SecItemExport(privateKey, kSecFormatUnknown, 0, nullptr, &privateKeyData);
    if(noErr == result) {
        CFShow(privateKeyData);

        uint32_t format = kSecFormatUnknown;
        uint32_t itemType = kSecItemTypePrivateKey;
        CFArrayRef items = nullptr;
        result = SecItemImport(privateKeyData, nullptr, &format, &itemType, 0, nullptr, nullptr, &items);

        CFRelease(privateKeyData), privateKeyData = nullptr;
        CFRelease(privateKey), privateKey = nullptr;

        if(noErr == result) {
            privateKey = (SecKeyRef)CFRetain(CFArrayGetValueAtIndex(items, 0));

            CFRelease(items), items = nullptr;

            // Issue #2:
            // SecItemExport() fails with -25260
            result = SecItemExport(privateKey, kSecFormatUnknown, 0, nullptr, &privateKeyData);
            if(noErr == result) {
                CFShow(privateKeyData);
                CFRelease(privateKeyData), privateKeyData = nullptr;
            }
            else
                printf("SecItemExport error: %d\n", result);
        }
        else
            puts("SecItemImport failed");
    }
    else
        printf("SecItemExport error: %d\n", result);
}
else
    printf("SecKeyGeneratePair error: %d\n", result); 
```

以下是示例运行的输出：

```
<CFData 0x10061b390 [0x7fff79ed3fa0]>{length = 121, capacity = 256, bytes = 0x307702010104209432679e712a4ac156 ... 219ffed31a54aff1}
SecItemExport error: -25260 
```

# java - 如何在 JPanel 上添加多个图层

> ID：11206328
> 
> 赞同：2
> 
> 时间：2012-06-26T11:26:42.787
> 
> 标签：java, swing, paintcomponent

我需要一些有关 Java Swing 组件及其功能的帮助。我需要将 a 添加`JPanel`到 a`JFrame`并在其上绘制 an `Ellipse2D`。在`Ellipse2D`我想添加另一个元素的上面，在我的情况下它是一张图片（现在我使用一个`ImageIcon`，可能是错误的）。`Ellipse2D`如我所附图片所示，如何在面板上添加和图片？

我需要分离图像的原因是，因为我有时需要更改椭圆的填充颜色。

谢谢你的帮助。![在此处输入图像描述](../Images/23a552809817557811ca4cd5332ab84b.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T11:32:47.853

您需要的是创建自定义`JPanel`实现和覆盖`paintComponent`方法。

在其中，您只需执行以下操作：

```
public void paintComponent(Graphics g) {

    super.paintComponent(g);

    // Draw ellipse here

    // Draw your image here. It will be drawn on top of the ellipse.

} 
```

这样，您可以在类中保存椭圆填充颜色，并在更改颜色后`CustomPanel`调用方法。`repaint()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T11:42:20.893

*   [您的想法可能会在 Oracles 教程How to Decorate Components with the JLayer Class](http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html)中得到很好的描述（包括代码示例）

*   通知`JLayer`仅适用于 Java7，但它基于 (for Java6) [JXLayer](http://java.net/projects/jxlayer/)

*   您也可以使用（我正在使用）`GlassPane`，与 Swing GUI 的相同/类似输出

编辑

使用[OverlayLayout](http://docs.oracle.com/javase/7/docs/api/javax/swing/OverlayLayout.html)`J/Component`非常简单和漂亮的输出，可以使用`Graphics`例如[几个示例](http://www.java2s.com/Tutorial/Java/0240__Swing/OverlayLayoutforlayoutmanagementofcomponentsthatlieontopofoneanother.htm)进行覆盖

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T05:18:43.407

将这两个图像作为图像图标

```
ImageIcon car=new ImageIcon("image path");
ImageIcon elipse=new ImageIcon("image path"); 
```

添加这两个图像图标两个标签

```
JLabel carLabel=new JLabel(car);
JLabel ellipseLabel=new JLabel(ellipse); 
```

并设置椭圆和汽车的位置

```
carLabel.setBounds(0,0,50,50);
ellipseLabel.setBounds(10,10,50,50); 
```

# iphone - Iphone 如何更改界面？

> ID：11206336
> 
> 赞同：-3
> 
> 时间：2012-06-26T11:27:05.063
> 
> 标签：iphone, objective-c, ios

我正在制作主页包含 TableView 的应用程序，但是当我单击 tableView 中的任何单元格时，我想打开一个 webView，我该如何制作它......这是我的代码以任何方式做我想做的事

我可以更改接口文件或从代码创建 Web 视图或...

* * *

```
@implementation ViewController
@synthesize tblMain, rows, timer;

NSURL *url;
NSString *jsonreturn;
NSData *jsonData;
NSError *error;
NSDictionary *dict;
UITableViewCell *cell;
static NSString *CellIdentifier;

- (void)viewDidLoad{
    [super viewDidLoad];

    [self GetData];
    timer = [NSTimer scheduledTimerWithTimeInterval:10.0 target:self selector:@selector(GetData) userInfo:nil repeats:YES];
}

-(void)GetData{
    url = [NSURL URLWithString:@"file://localhost/Users/mac/Documents/json.json"];
    jsonreturn = [[NSString alloc] initWithContentsOfURL:url];
    NSLog(jsonreturn);
    jsonData = [jsonreturn dataUsingEncoding:NSUTF32BigEndianStringEncoding];
    dict = [[[CJSONDeserializer deserializer] deserializeAsDictionary:jsonData error:&error] retain];
    rows = [dict objectForKey:@"savola"];
    NSLog(@"Array: %@",rows);
    [self.tblMain reloadData];

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [rows count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
    }

    dict = [rows objectAtIndex: indexPath.row];

    cell.textLabel.text = [NSString stringWithFormat:@"%@ - %@", [dict objectForKey:@"company"], [dict objectForKey:@"price"]];
    cell.detailTextLabel.text = [dict objectForKey:@"time"];

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    // open a web view
}

@end 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-26T11:35:22.347

在你在这里发布你的问题之前，做一些最低限度的研究，如果你不明白，来这里发帖，

创建一个新项目->添加一个子类的文件`UITableView`，现在在`didSelectRowAtIndexPath`方法内部将其导航到一个新类并在新类中做你的东西（比如加载网络视图，在 xib 中添加一个网络视图）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-26T12:10:30.520

创建一个视图控制器，比如 MyWebviewcontroller 和 xib（在创建视图控制器时检查 xib 的用户界面）。

打开 MyWebViewController.xib 并添加 webview。

然后在 didSelectRowAtIndexPath 中编写代码：

```
MyWebviewcontroller *viewController =  [[MyWebviewcontroller alloc]initWithNibName:@"MyWebviewcontroller" bundle:nil];
[self.view addSubView:viewController.view]; 
```

# c++ - fscanf/scanf 实现中的错误：获取双值的错误实现？

> ID：11206339
> 
> 赞同：-1
> 
> 时间：2012-06-26T11:27:13.290
> 
> 标签：c++, iostream, scanf

我正在尝试使用 fscanf 函数从文件中获取双精度值。我正在运行以下代码：这是从我的代码中提取的：

```
double some_double;
fscanf(file_name,"%lf", &some_double); 
```

例如。文件内容为“10.5”

在调试模式下，我看到这是读取值 == 10.0000

它是什么：fscanf 函数的错误实现，还是我的错误？如果是第二个变体 - 请建议如何修复它？请谢谢

**编辑**

```
#define nameOfFile "infoOnObjects.txt"
#define stop _asm nop
FILE* file = fopen(nameOfFile, "r");
if (file == NULL)
    throw "error";
double num;
int n = fscanf(file,"%lf", &num); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T11:47:40.233

检查您的十进制除数的语言环境符号是否是点“。”，而不是逗号“，”。此问题在某些平台上有效（例如，Ubuntu gcc；而在 Windows mingw 上则无关紧要）。

# python - 基于 __setattr__ 和 _getattr__ 的动态配置对象

> ID：11206349
> 
> 赞同：1
> 
> 时间：2012-06-26T11:27:42.973
> 
> 标签：python

我试图创建动态对象来验证我的配置并将结果呈现为对象。我试图通过创建这样的类来实现这一点：

```
class SubConfig(object):
    def __init__(self, config, key_types):
        self.__config = config
        self.__values = {}
        self.__key_types = key_types

    def __getattr__(self, item):
        if item in self.__key_types:
            return self.__values[item] or None
        else:
            raise ValueError("No such item to get from config")

    def __setattr__(self, item, value):
        if self.__config._blocked:
            raise ValueError("Can't change values after service has started")

        if item in self.__key_types:
            if type(value) in self.__key_types[item]:
                self.__values[item] = value
            else:
                raise ValueError("Can't assing value in different type then declared!")
        else:
            raise ValueError("No such item to set in config") 
```

SubConfig 是配置文件中部分的包装器。Config 可以在程序启动后取消更改值的可能性（您只能在初始化时更改值）。

问题是当我设置任何值时，它会在 getattr 中进入无限循环。正如我所读`__getattr__`的那样（首先获取现有的 attr，然后调用`__getattr__`）。我正在将我的代码与可用示例进行比较，但我什么也得不到。

我注意到所有问题都是我的构造函数产生的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T11:50:45.060

问题是您的构造函数在初始化对象时调用`__setattr__`，然后调用，`__getattr__`因为`__`私有成员尚未初始化。

我可以想到两种方法来解决这个问题：

一种选择是调用 down`object.__setattr__`从而避免您`__setattr__`或等效地使用`super(SubConfig, self).__setattr__(...)`in `__init__`。您也可以`self.__dict__`直接设置值。这里的一个问题是，因为您使用的是双下划线，所以您必须手动修改属性名称（因此`'__config'`变为`'_SubConfig__config'`）：

```
def __init__(self, config, key_types):
    super(SubConfig, self).__setattr__('_SubConfig__config', config)
    super(SubConfig, self).__setattr__('_SubConfig__values', {})
    super(SubConfig, self).__setattr__('_SubConfig__key_types', key_types) 
```

另一种方法是`__setattr__`检测并通过访问以`_`ie开头的属性名称

```
if item.startswith('_')
    return super(SubConfig, self).__setattr__(item, value) 
```

这更像是 Pythonic，因为如果有人有充分的理由访问您的对象的内部，您没有理由尝试阻止他们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T12:19:25.593

Cf ecatmur 对根本原因的回答——记住这`__setattr__`不是对称的`__getattr__`——每次尝试绑定对象的属性时都会无条件地调用它。覆盖`__setattr__`很棘手，如果您不清楚利弊，则不应这样做。

现在为您的用例提供一个简单实用的解决方案：重写您的初始化程序以避免触发**setattr**调用：

```
class SubConfig(object):
    def __init__(self, config, key_types):
        self.__dict__.update(
            _SubConfig__config=config,
            _SubConfig__values={},
            _SubConfig__key_types=key_types
            ) 
```

请注意，我重命名了您的属性以模拟使用双前导下划线命名方案时发生的名称修改。

# performance - 如何在数据库之间移动大量数据？

> ID：11206352
> 
> 赞同：0
> 
> 时间：2012-06-26T11:27:51.133
> 
> 标签：performance, jdbc, db2

我需要比较来自不同服务器上的两个数据库（它们都是 DB2）的数据，它们之间没有现有连接。因为这两个数据库都在生产中使用，所以我不想让它们过载，因此我将在我的本地机器上创建一个新的数据库（可能是 MySQL），从两个 DB2 中提取数据，插入 MySQL 并在本地进行比较.

我想在 Java 中执行此操作，所以我的问题是如何在不使生产数据库超载的情况下尽可能有效地执行此任务。我做了一些研究，并提出了以下几点：

*   限制我将在初始 SELECT 语句中使用的列数
*   调整 ResultSet 对象的获取大小（IBM DB2 JCC 驱动程序的默认值似乎是 64）
*   使用 PreparedStatement 对象预编译 SQL

还有什么我可以做的，或者有什么其他建议吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:06:46.247

DB2 for Linux UNIX, and Windows 包括 EXPORT 实用程序作为其运行时客户端的一部分。该实用程序可以指向 z/OS 上的 DB2 数据库，以快速将表（或查询结果集）导出到客户端机器上的平面文件中。您可以选择平面文件是定界的、固定宽度的还是 DB2 专有的 IXF 格式。您的 z/OS DBA 应该能够帮助您在工作站上配置客户端，并按照 EXPORT 实用程序的要求将必要的包绑定到 z/OS 数据库中。

一旦你的客户端上有平面文件，你可以随意比较它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:43:23.800

听起来对于 map reduce (hadoop) 来说是一项很棒的工作。一项有两个映射器的工作，一个用于每个 DB 和一个 reducer 来进行比较。它可以扩展到您需要的任意数量的处理器，或者只在单台机器上运行。

# jquery - 使用 JQuery 替换整个表格行（包括 ）

> ID：11206355
> 
> 赞同：9
> 
> 时间：2012-06-26T11:27:56.203
> 
> 标签：jquery

我在这里查看了其他示例，但它们似乎正在替换 a 的内容，`<tr>`而不是整个行，包括`<tr>`.

```
<table>
    <tr style="display:block">
        <td id="someid">Test</td>
        <td>Some text</td>
    </tr>
</table> 
```

下面的代码似乎只替换了`<tr>`. 我需要替换所有内容，包括该`<tr>`行将折叠。任何人都可以确认此代码是否完全替换了该行：

```
var newtr = "<tr style='display:none'><td id='someid'></td><td></td></tr>"
$("td#someid").parent().html(newtr); 
```

我不认为整个`<tr>`被替换的原因是因为该行没有折叠 - 尽管我已经在 J​​Query 之外测试了 HTML 并且它工作正常。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-26T11:30:30.757

你快到了，只需使用 jQuery [`replaceWith`^([jQuery docs])](http://api.jquery.com/replaceWith/)函数：

```
$("td#someid").parent().replaceWith(newtr); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T11:30:39.580

正确的功能是[`.replaceWith`](http://api.jquery.com/replaceWith/)：

```
$("td#someid").parent().replaceWith(newtr); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T11:30:46.393

如果您尝试替换对象，而不是其内容：

```
$("td#someid").parent().replaceWith(newtr); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-26T11:31:10.110

使用 jquery 的 replaceWith 方法替换元素。

```
$('#someid').parent().replaceWith(newtr); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-26T11:32:00.440

如果您更喜欢 HTML 技术而不是切换元素，请尝试以下操作：

你说这不会取代 tr 元素是正确的。.html("...") 替换元素的内部 HTML（在本例中为 tr）。使用 JavaScript outerHTML 来实现：`$("td#someid").parent().get(0).outerHTML = newtr;`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-26T11:35:34.097

看到这个演示：http: [//jsfiddle.net/rathoreahsan/QXmTN/](http://jsfiddle.net/rathoreahsan/QXmTN/)

**jQuery**

```
$("td#someid").parent().replaceWith(newtr); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-26T11:44:08.073

你也可以检查这个[JsFiddle](http://jsfiddle.net/umairnoor84/hELdz/)

```
var newtr = "<tr style='display:none'><td id='someid'></td><td></td></tr>";

$("td#someid").parent().parent().html(newtr); 
```

# android - 如何在我的实际 Android 设备上检查我的横幅应用程序是否正常工作？

> ID：11206357
> 
> 赞同：0
> 
> 时间：2012-06-26T11:27:56.997
> 
> 标签：android

我使用 SDK(Android: 3.2[API-13]) 开发了一个简单的应用程序，用于显示 Google 横幅。我在这个应用程序中有两个问题。

问题 1：我检查了它在模拟器上运行的应用程序，但我如何检查它是否正常工作？

问题 2：我想在我的物理 Android 设备上使用 Android 版本 2.3.3 运行应用程序。我需要对应用程序进行哪些更改才能在使用 Android 版本 2.3.3 的 Android 设备上运行它？

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.farman.banner"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".MyBannerActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name="com.google.ads.AdActivity"
              android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/>

    </application>

    <uses-permission android:name="android.permission.INTERNET"/>
  <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

</manifest 
```

>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:42:37.670

Ans 1 :-您必须将其安装在设备中并检查它。
Ans 2 :-要在 2.3.3 版本中运行它，您需要编辑以下文件：-

*   project.properties 或 default.properties（根文件夹中可能只有 2 个中的 1 个）这里...更改 target=android-10 的值
*   Androidmanifest.xml 这里...检查并更改
    `<uses-sdk android:minSdkVersion="13" />`as的值`<uses-sdk android:minSdkVersion="10" />`

现在清理并运行您的应用程序，它将在 2.3 版本中运行。

# testing - Selenium RC 在谷歌 Chrome 中运行测试时给出 Error-Object [object HTMLIFrameElement] has no method 'getCurrentWindow'

> ID：11206360
> 
> 赞同：4
> 
> 时间：2012-06-26T11:28:11.557
> 
> 标签：testing, selenium, automation, selenium-rc, qa

我在运行测试时使用 Selenium RC 和 Chrome，它给了我这个错误

```
error(1340708572726): Unexpected Exception: Object [object HTMLIFrameElement] has no method 'getCurrentWindow' 
```

但是，我并不总是收到此错误。有时测试通过，有时测试失败。我将浏览器更改为 IE 并没有收到此错误。这是代码的相关部分

```
void editResumeInfo(String objective, String company, String jobDesc, String city, String phoneCountry, String phoneArea, String phoneNumb, String coleg, String certificateName, String certificateLocation, String seminarName, String seminarLocation, String notes){
        selenium.type("id=objective", objective)
        selenium.click("xpath=//html/body/div/div/div[3]/div/div[2]/div[3]/form/div/div/div[2]/div[3]/a")
        selenium.select("id=experienceIndustry0", "label=Health Care")
        selenium.select("name=experienceProfession", "label=Direct Support Professional")
        selenium.select("id=experienceStartDate0_month", "label=May")
        selenium.select("id=experienceStartDate0_year", "label=2006")
        selenium.select("id=experienceEndDate0_month", "label=August")
        selenium.select("id=experienceEndDate0_year", "label=2011")
        selenium.type("id=experienceCompany0", company)
        selenium.type("id=experienceJobDesc0", jobDesc)
        selenium.type("id=experienceAddressCity0", city)
        selenium.select("id=experienceAddressCountry0", "label=Guyana")
        selenium.type("id=experiencePhoneCountryCode0", phoneCountry)
        selenium.type("id=experienceAreaCode0", phoneArea)
        selenium.type("id=experiencePhoneNumber0", phoneNumb)

        selenium.click("xpath=//html/body/div[2]/div/div[3]/div/div[2]/div[3]/form/div/div/div[3]/div[3]/a")
        selenium.select("id=educationLevel0", "label=Post Graduate")
        selenium.select("id=educationDegree0", "label=Biomedical Science")
        selenium.type("id=educationCollege0", coleg)
        selenium.select("id=educationGradDate0_year", "label=2011")
        selenium.type("id=certificateName0", certificateName)
        selenium.type("id=certificateLocation0", certificateLocation)
        selenium.select("id=certificateDate0_month", "label=May")
        selenium.select("id=certificateDate0_year", "label=2004")

        selenium.click("xpath=//html/body/div[2]/div/div[3]/div/div[2]/div[3]/form/div/div/div[4]/div[3]/a")
        selenium.type("id=seminarName0", seminarName)
        selenium.type("id=seminarLocation0", seminarLocation)
        selenium.select("name=seminarDate_month", "label=March")
        selenium.select("name=seminarDate_year", "label=2011")
        selenium.type("id=skillNotes", notes)
        selenium.clickAndWait("id=submit")
    } 
```

我正在调用这个方法

```
@Test
    void objectiveFiveThousandInputShowSuccess(){
        values=TestDataController.characterGen(5000)
        editResumeInfo(values, "abcd", "this is job", "bangalore", "91", "0381", "232269876", "IIT", "test certificate", "bangalore", "test seminar", "delhi", "note" )
        CheckSuccess()
    }

    @Test
    void objectiveFieldOnNullInputShowSuccess(){
        editResumeInfo("", "abcd", "this is job", "bangalore", "91", "0381", "232698376", "IIT", "test certificate", "bangalore", "test seminar", "delhi", "note" )
        CheckSuccess()
    }

    @Test
    void companyFieldOnFiveHundredShowSuccess(){
        values=TestDataController.characterGen(500)
        editResumeInfo("objective", values, "this is job", "bangalore", "91", "0381", "23269876", "IIT", "test certificate", "bangalore", "test seminar", "delhi", "note" )
        CheckSuccess()
    } 
```

# jquery - jquery ajax请求间歇性问题

> ID：11206363
> 
> 赞同：1
> 
> 时间：2012-06-26T11:28:28.277
> 
> 标签：jquery, ajax

希望有人可以提供帮助。我有这个代码：

```
 $('.FinderOptions').on("click", ".nextButton", function(){
            console.log("Next has been clicked");
             var session = $('#sessionvalue').val();
             var querystring = $("#formStep").serialize() + "&session=" + session;
            $.ajaxSetup({async: false, 
                        cache: false});
            $.ajax({
                    type: "POST",
                    data: querystring,
                    url: "includes/finder/processstep.php",
                    dataType: 'json',
                    success: function(msg){
..... 
```

但似乎有一个间歇性的问题，它没有提交 ajax 请求。

我让它在我的本地 xampp 服务器上运行，但是当我让它运行时，它有时不会提交 ajax 请求。（运行时萤火虫没有错误，但它会选择“下一个已单击”日志..）。

我尝试用谷歌搜索它并找到了我在上面的示例中提出的这些建议：

```
$.ajaxSetup({async: false, 
                            cache: false}); 
```

但这似乎也没有排序。

这真的很奇怪，但有人知道它可能是什么吗？

尝试在这里举个例子：http: [//jsfiddle.net/hkrB5/](http://jsfiddle.net/hkrB5/) （当然可以正常工作:(）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:57:57.543

没有人回复我，但我终于想通了。我设置了一个没有 www 的基本 url，但是当我访问带有 www 的页面时。它将提交请求 - 获取 www。出来，它会。强制删除 www。并排序。希望这可以帮助处于相同情况的其他人:)

# backbone.js - Backbone.js 发送 POST 而不是 PUT（mongoose 将 _id 设置为 id）

> ID：11206365
> 
> 赞同：1
> 
> 时间：2012-06-26T11:28:41.340
> 
> 标签：backbone.js, mongoose

Backbone.js 发送更新对象的 POST 而不是 PUT。

我认为这是因为 mongoDB 使用 _id 而不是 id。

**我如何说backbone.js 使用_id 而不是id？**

我已经尝试了一些服务器端更改，但我认为只说骨干应该使用另一个属性作为 id 会更容易。 [MongoDB：输出'id'而不是'_id'](https://stackoverflow.com/questions/7034848/mongodb-output-id-instead-of-id)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T11:32:28.727

来自精细手册[http://backbonejs.org/#Model-idAttribute](http://backbonejs.org/#Model-idAttribute)

> **idAttribute** *model.idAttribute*
> 
> 模型的唯一标识符存储在 id 属性下。如果您直接与使用不同唯一键的后端（CouchDB、MongoDB）通信，您可以设置模型的 idAttribute 以透明地从该键映射到 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T21:58:10.563

id 属性可以根据模型更改，例如

```
var Meal = Backbone.Model.extend({
  idAttribute: "_id"
}); 
```

要将其设置为所有模型的默认设置（例如，如果我们使用 mongodb），请通过将此 LOC 放置在您的应用程序 js 文件中来覆盖默认设置，该文件在主干.js 之后运行

```
//override the id attribute for model
Backbone.Model.prototype.idAttribute = '_id'; 
```

# java - Hibernate 会话中持久对象的状态

> ID：11206368
> 
> 赞同：0
> 
> 时间：2012-06-26T11:28:52.663
> 
> 标签：java, hibernate, persistence, persistent, hibernate-session

关于 Hibernate，我有一个可能非常简单的问题：

当我有一个对象的持久实例，并且其中一些对象的属性在相同的内部进行了修改[`Session`](https://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html)时，这些更改对我来说也是可见的吗？

还是我必须要[`refresh`](https://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#refresh%28java.lang.Object%29)对象才能获得它的当前状态？

* * *

我想扩展我的问题：如果这些更改不在同一内部进行`Session`怎么办？如果它们是由`Session`同一个提供的，该[`SessionFactory`](https://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/SessionFactory.html)怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:14:38.273

`Query.list()`如果您有一个实体加载了两次或更多次（无论是否使用或都无关紧要`Session.load()`），那么您总是会获得相同的 Java 对象实例。因为它是同一个实例，所以无论你在哪里使用这个实例，这个实例的每个修改都是可见的，所以对于没有持久化到数据库的修改也是如此（这是一定的危险）。

如果实体使用两个不同的会话加载了两次（会话是否来自同一个 SessionFactory 无关紧要），那么您将获得 Java 类的两个实例。这两个实例是独立的。一个实例未获知另一实例中的修改。如果修改被持久化到数据库中，情况也不是这样。即使您再次加载实体并且它已经在会话缓存中，您也不会得到修改（例如：`session1.load(entity); session2.save(entity); session1.load(entity);`然后`session1`不会加载 `session2`所做的更改，因为实体已经在缓存中）。如果直接在程序外部使用 SQL 进行修改，情况也是如此。要加载修改，您必须`evict()`实例或使用新会话。在这种情况下，建议使用版本化列（与`<version>`子句映射的列）以避免修改丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:34:19.257

不需要刷新，除非它被分离，否则它将是可见的。

# sql - INSERT INTO 增量控制字段

> ID：11206372
> 
> 赞同：3
> 
> 时间：2012-06-26T11:29:02.287
> 
> 标签：sql, ms-access

我正在使用 MS-ACCESS 数据库。从我使用的项目中并提出了一些其他问题，表 NOEUDS 和 INFRA（应该更新）：

表 INFRA：

```
RECNO   -   NOEUD   -   SECURISE    
00000008    C002         F    
00000005    C009         F    
00000001    C035         F    
00000002    C001         F    
00000003    C036         F    
00000006    C012         F    
00000007    C013         F 
```

表NOEUDS：

```
NOEUD   TYPE_MAT  N_AMONT       
C021     COF       100          
C022     COF       229          
C023     COF       130          
C002     COF       111 
```

我想创建一个查询，在 NOEUDS 上检查 INFRA 表中缺少的节点 C*，如果没有，则应插入一个新的。问题是 RECNO 字段用作控件并且不能复制（不是主键，因为所有数据库只是控制它的程序的存储库）。所有字段都是文本，因此 RECNO 是使用 HEX 数字的连续计数，如图所示。

我使用查询来选择：

```
SELECT (SELECT MAX(CINT(INFRA.RECNO))+1 AS N FROM INFRA), 
       NOEUDS.NOEUD, "F" AS Expr2
FROM NOEUDS
WHERE (((NOEUDS.NOEUD) Like "C*" 
       And (NOEUDS.NOEUD) Not In (SELECT NOEUD FROM INFRA))); 
```

结果是：

```
9   C021   F    
9   C022   F    
9   C023   F 
```

应该：

```
9   C021   F    
A   C022   F    
B   C023   F 
```

我需要一些帮助，所以我可以在 00000019 传递到 0000001A 之后以十六进制计数插入正确的 RECNO 等等。

提前致谢

更新 1：

我们使用的程序使用 Access 数据库作为存储。当我使用该程序添加 noeud 时，我必须使用地图所需的菜单和构建信息插入更多信息。问题是很多信息是多余的，程序无法自动处理。我正在尝试使用查询来工作并插入可能的信息。

每次我在 noeuds 表中插入一个 noeud 时，都需要在 INFRA 表中插入一行，仅使用 RECNO（从最后一个开始依次计数）、NOEUD 和其他一些信息（以完成 autocad 表标记）。由于我有数百台 Cxxx、Bxxx、Pxxx、Gxxx 设备，我为每个项目节省了几个小时的无聊工作。

我需要帮助计算为 NOEUDS 表中找到的每个 NOEUD 添加 RECNO 的顺序方式，这些 NOEUD 将插入 INFRA 表中。

更新 2：

我正在手动插入每个 noeud。是否有可能以一种方式加入，它从我想要插入的 noeuds 中获取列表，而不是 1 对 1 进行它获取列表并按顺序执行？

2个查询是：

我想在 INFRA 表中添加的装备：

SELECT NOEUDS.NOEUD FROM NOEUDS WHERE (((NOEUDS.NOEUD) Like "C*" And (NOEUDS.NOEUD) Not In (SELECT NOEUD FROM INFRA)));

手动插入：

插入 INFRA (recno, NOEUD, SECURISE) SELECT (SELECT Right(String(8, "0") & Hex(Max(Val("&H" & RECNO)) + 1), 8) AS N FROM INFRA), NOEUDS .NOEUD, "F" AS Expr2 来自 NOEUDS WHERE (NOEUDS.NOEUD=[INSERT CHAMBRE?]);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:30:30.997

虽然我不太了解你的问题，但我希望这个答案能提供你可以使用的东西。

我的`INFRA`表有一个名为`RECNO`. 该表包含一行。

```
RECNO
00000019 
```

这个查询给我“1A”作为`N`。

```
SELECT Hex(Max(Val("&H" & RECNO)) + 1) AS N
FROM INFRA; 
```

要将零填充`N`到 8 的宽度，我可以使用这个查询，它给我 "0000001A" as `N`。

```
SELECT Right(String(8, "0") & Hex(Max(Val("&H" & RECNO)) + 1), 8) AS N
FROM INFRA; 
```

关于您的其余问题，我的直觉是打开一个包含不匹配`NOEUDS.NOEUD`值的记录集，然后浏览记录集行并将每个`NOEUD`值、您的自定义`RECNO`序列号和“其他信息”插入`INFRA`表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T00:26:06.637

我认为 VBA 解决方案应该比尝试只使用 SQL 做你想做的更好。如果您没有太多的 VBA 经验，它仍然可以实现，因为所需的 VBA 应该是相当基本的。看看这个代码大纲是否足以让你开始。

```
Public Sub AddToInfra()
    Const cstrQuery As String = "qryUnmatchedNoeuds" ' Note 1 '
    Dim db As DAO.Database ' Note 2 '
    Dim fld As DAO.Field
    Dim rsFrom As DAO.Recordset
    Dim rsTo As DAO.Recordset

    Set db = CurrentDb
    Set rsFrom = db.OpenRecordset(cstrQuery, dbOpenSnapshot)
    Set rsTo = db.OpenRecordset("infra", dbOpenTable, dbAppendOnly)

    Do While Not rsFrom.EOF
        rsTo.AddNew
        For Each fld In rsFrom.Fields ' Note 3 '
            If Not fld.Name = "RECNO" Then
                rsTo.Fields(fld.Name).Value = fld.Value
            End If
        Next fld
        rsTo!RECNO = Next_InfraRecno ' Note 4 '
        rsTo!SECURISE = "F" ' Note 5 '
        rsTo.Update
        rsFrom.MoveNext
    Loop

    rsTo.Close
    rsFrom.Close
    Set fld = Nothing
    Set rsFrom = Nothing
    Set rsTo = Nothing
    Set db = Nothing
End Sub 
```

笔记：

1.  我根据我对您想要的最佳猜测使用了保存的查询。请参阅下面的 SQL。
2.  `DAO.Database`需要对 Microsoft DAO 对象库的引用。如果您的 Access 版本是 2000 或 Access XP，您可能需要设置该引用（从 VBE 主菜单，工具 -> 引用）。
3.  我决定目标表将包含与源记录集中字段的名称和数据类型匹配的字段。如果这对您不起作用，请为每个常见字段替换类似的内容：（如果您愿意，请`rsTo!YourFieldNameHere.Value = rsTo!YourFieldNameHere.Value`放弃。）`.Value`
4.  创建一个`Next_InfraRecno()`函数以返回下一个`RECNO`值。将我们之前使用的方法转换为函数。如果您遇到麻烦，请发布一个新问题...向我们展示您的代码、错误消息和触发错误的行（如果有），以及我们需要知道的任何其他信息。:-)
5.  `SECURISE = "F"`对于插入的每一行，我都得到了您想要的印象。

在您提到的评论中“*使用字段 ANCIEN 存储计数*”。我不知道这涉及到什么，希望无论它是什么，你都可以将它集成到这个代码大纲中。如果没有，对不起。:-(

这是我的`qryUnmatchedNoeuds`查询的 SQL：

```
SELECT n.DELETED, n.NOEUD
FROM
    noeuds AS n
    LEFT JOIN infra AS i
    ON n.NOEUD = i.NOEUD
WHERE
        (((n.NOEUD) Like "c*")
    AND ((i.NOEUD) Is Null)); 
```

# windows - 在没有 GUI 的情况下模拟登录到 Windows

> ID：11206377
> 
> 赞同：1
> 
> 时间：2012-06-26T11:29:38.577
> 
> 标签：windows, authentication, login, automation

我正在编写部署多台机器并在其上安装多个程序的自动化程序。

作为安装过程的一部分，用户将手动执行的步骤之一是注销并登录到 Windows 计算机。

有人可以请我指向相关链接，以便我可以理解如何在没有 gui 的情况下将登录过程模拟到 Windows 中？

我的意思是我需要让机器认为有人登录了它，而我只使用了 powershell。

启动 mstsc 并不能解决问题，因为我无法克服证书请求（我需要一个自动过程，但我没有找到使证书警告静音的方法）

我搜索了几天，找不到我要找的东西。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:20:12.483

这只是一个想法。也许您可以先制作自动登录机器的映像，然后安装软件，最后删除自动登录？

此链接包含有关自动登录的详细信息 [http://support.microsoft.com/kb/315231](http://support.microsoft.com/kb/315231)

# r - 将函数变量插入图形标题

> ID：11206378
> 
> 赞同：8
> 
> 时间：2012-06-26T11:29:39.120
> 
> 标签：r, graphics, plot

我有一个带有两个输入变量的函数

```
min.depth<-2  
max.depth<-5 
```

该函数产生一个图。如何将输入变量插入到标题中？

我试过了：

```
plot.a<-plot(plt.a$"Traits",plt.a$"Species",xlab="Site similarity by traits (Tsim)",
             ylab="Site similarity by species (Jaccard)",
             main=c("Jaccard vs. Tsim for depths", min.depth, "to",max.depth,"m") 
```

虽然这确实正确插入了输入变量，但它也会导致标题堆叠如下：

```
Jaccard vs. Tsim for depths  
2  
to  
5  
m 
```

关于如何避免这种堆叠的任何想法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-26T11:34:36.643

您应该使用`paste`而不是`c`：

```
plot(..., main=paste("Jaccard vs. Tsim for depths",  min.depth, "to",max.depth,"m", sep=" ")) 
```

随着`c`您创建一个字符串向量（因此是堆叠），`paste`您将它们连接成一个字符串。

# java - 如何每 x 秒显示一次表单的结果

> ID：11206379
> 
> 赞同：1
> 
> 时间：2012-06-26T11:29:42.817
> 
> 标签：java, wicket

我有一些从 db 搜索结果的表格。如何每隔 x 秒自动显示 db 的结果？这意味着每 x 秒提交一次按钮。我发现关于刷新的是这个类：

```
add(new AjaxSelfUpdatingTimerBehavior(Duration.seconds(10)) {
    private static final long serialVersionUID = 1;       
    }); 
```

这只是刷新页面而不是提交表单。然后我想从检票口示例页面中获得灵感：http: [//www.wicket-library.com/wicket-examples/ajax/clock?](http://www.wicket-library.com/wicket-examples/ajax/clock?1) 1 但是当我点击源代码时，我只看到返回的网址：内部错误

更新：

我尝试调用简单的javascript，然后从js提交表单：

```
 add(new AjaxSelfUpdatingTimerBehavior(Duration.seconds(10)) {
        private static final long serialVersionUID = 1L;

        @Override
        protected void onPostProcessTarget(AjaxRequestTarget target) {
            target.appendJavaScript("alert('hello');");
        }

    }); 
```

但没有成功

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T13:46:29.107

您需要结合[AbstractAjaxTimerBehaviour](http://wicket.apache.org/apidocs/1.5/org/apache/wicket/ajax/AbstractAjaxTimerBehavior.html)来引发触发[AjaxFormSubmittingBehaviour](http://wicket.apache.org/apidocs/1.5/org/apache/wicket/ajax/form/AjaxFormSubmitBehavior.html)的事件。我没有尝试过，但从我的检票口经验和这两种行为的 JavaDocs 来看，它应该可以工作。

由于似乎需要一些演示代码...

免责声明：这是由两个提到的课程中的 Copy'n'Pasting 在几分钟内完成的。所以这不是好的代码，经过测试的代码或任何我在没有深入了解的情况下投入生产的东西。但它似乎工作。

首先，您需要组合行为：

```
public abstract class AjaxTimerFormSubmitBehavior extends AbstractAjaxTimerBehavior {

    /**
     * should never be accessed directly (thus the __ cause its overkill to
     * create a super class), instead always use #getForm()
     */
    private Form<?> __form;

    private boolean defaultProcessing = true;

    /**
     * @param updateInterval
     */
    public AjaxTimerFormSubmitBehavior(Duration updateInterval) {
        this(null, updateInterval);
    }

    public AjaxTimerFormSubmitBehavior(Form<?> form, Duration updateInterval) {
        super(updateInterval);
        __form = form;

        if (form != null) {
            form.setOutputMarkupId(true);
        }
    }

    @Override
    protected void onTimer(final AjaxRequestTarget target) {
        getForm().getRootForm().onFormSubmitted(new IFormSubmitter() {
            public Form<?> getForm() {
                return AjaxTimerFormSubmitBehavior.this.getForm();
            }

            public boolean getDefaultFormProcessing() {
                return AjaxTimerFormSubmitBehavior.this.getDefaultProcessing();
            }

            public void onSubmit() {
                AjaxTimerFormSubmitBehavior.this.onSubmit(target);
            }

            public void onError() {
                AjaxTimerFormSubmitBehavior.this.onError(target);
            }
        });
    }

    /**
     * @return Form that will be submitted by this behavior
     */
    public final Form<?> getForm() {
        if (__form == null) {
            __form = findForm();

            if (__form == null) {
                throw new IllegalStateException(
                        "form was not specified in the constructor and cannot "
                                + "be found in the hierarchy of the component this behavior "
                                + "is attached to: Component="
                                + getComponent().toString(false));
            }
        }
        return __form;
    }

    /**
     * @see Button#getDefaultFormProcessing()
     *
     * @return {@code true} for default processing
     */
    public boolean getDefaultProcessing() {
        return defaultProcessing;
    }

    /**
     * Finds form that will be submitted
     *
     * @return form to submit or {@code null} if none found
     */
    protected Form<?> findForm() {
        // try to find form in the hierarchy of owning component
        Component component = getComponent();
        if (component instanceof Form<?>) {
            return (Form<?>) component;
        } else {
            return component.findParent(Form.class);
        }
    }

    /**
     * Listener method that is invoked after the form has been submitted and
     * processed without errors
     *
     * @param target
     */
    protected abstract void onSubmit(AjaxRequestTarget target);

    /**
     * Listener method invoked when the form has been processed and errors
     * occurred
     *
     * @param target
     */
    protected abstract void onError(AjaxRequestTarget target);

} 
```

然后你必须使用它

```
public class HomePage extends WebPage {
    private static final long serialVersionUID = 1L;

    private Integer counter = 0;

    public HomePage(final PageParameters parameters) {
        final Label label = new Label("counter", new PropertyModel<Integer>(this, "counter"));
        label.setOutputMarkupId(true);
        add(label);
        Form form = new Form("form");
        form.add(new AjaxTimerFormSubmitBehavior(form, Duration.seconds(10)) {

            @Override
            protected void onSubmit(AjaxRequestTarget target) {
                counter++;
                target.add(label);
            }

            @Override
            protected void onError(AjaxRequestTarget target) {
                // TODO Auto-generated method stub

            }
        });
        add(form);
    }

    public Integer getCounter() {
        return counter;
    }

    public void setCounter(Integer counter) {
        this.counter = counter;
    }
} 
```

我希望这会给你一个想法......

[这](https://dl.dropbox.com/u/2989371/demo-1.0.war)是一个小型演示战争文件。只需下载，在您最喜欢的应用程序容器中折腾，然后观察它的作用。它也包含来源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:35:37.830

要设置间隔以定期运行一些代码，您可以使用 JQuery 执行此操作：

```
$(document).ready(function(){
    //ajax code here
    myVar = setInterval(someCode, 10000);
}); 
```

那是你追求的吗？

**编辑**

刚刚意识到... set Interval 实际上并不是一个 JQuery 函数。

```
//use this to stop it    
clearInterval(myVar); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T15:11:25.040

我认为您做了正确的事情，我认为您将行为附加到不会改变自身的组件上。您将需要在`onPostProcessTarget`方法中编写更新逻辑并将要刷新的组件添加到 ajaxRequestTarget。`Firebug`查看或`Chrome`查看该行为是否触发了对服务器的调用的网络选项卡。

如果不是这样，可能是脚本的前提条件失败（标记id更改可以做到这一点）

# magento - 将 customer_entity_varchar 中的数据添加到订单网格 magento

> ID：11206382
> 
> 赞同：2
> 
> 时间：2012-06-26T11:29:50.883
> 
> 标签：magento, grid

我正在尝试将“accountno”字段添加到 customer_entity_varchar 表中的订单网格。为了实现这一点，我改变了 Grid.php 中的 _prepareCollection() 方法，如下所示：

```
 protected function _prepareCollection()
    {

        $collection = Mage::getResourceModel($this->_getCollectionClass());

           $customerEntityVarchar = Mage::getSingleton('core/resource')->getTableName('customer_entity_varchar');

            $collection->getSelect()->join(array(
                'customer_entity_varchar_table'=>$customerEntityVarchar), 
                '`main_table`.`customer_id`=`customer_entity_varchar_table`.`entity_id`
                    AND `customer_entity_varchar_table`.`attribute_id`=122', 
                array('accountno' => 'value')); 

            print_r($collection->getSelect()->__toString());
            $this->setCollection($collection);
            return parent::_prepareCollection();

    } 
```

> 在attribute_id `=122' 122 is the attribute_id of`accountno`

当我 print_r 选择查询并在 phpmyadmin 中执行它时，它会返回准确的结果，但是当我尝试在 _prepareColumns() 方法中将 Column 添加到网格时，它显示该字段为空白。我的 _prepareColumns 方法如下所示：

```
protected function _prepareColumns()
    {
         $this->addColumn('real_order_id', array(
            'header'=> Mage::helper('sales')->__('Order #'),
            'width' => '80px',
            'type'  => 'text',
            'index' => 'increment_id',
        ));

          $this->addColumnAfter('accountno', array(
                'header' => Mage::helper('sales')->__('Account No'),
                'index' => 'accountno',       
            ), 'real_order_id');
//rest of the code here
      } 
```

# php - 使用 Ajax 从表单传递数据

> ID：11206385
> 
> 赞同：1
> 
> 时间：2012-06-26T11:30:04.360
> 
> 标签：php, html, ajax, database, forms

想知道是否有人可以帮助我。我对 Ajax 几乎一无所知，经过多次尝试将我的 User1_id 和 Text 传递到我的 insert.php 之后，我无法将我想要的数据插入到我的数据库中。

正如我的 profile.php 和 insert.php 所代表的那样，表单提交到数据库，但是当用户提交表单时，它会导航到 insert.php，并且宁愿让 Ajax 发送数据并完全保留在 Profile.php 上有时，我觉得在创建此类功能时这是一种更好的方法。

我想知道是否有人可以指导我朝着正确的方向前进。

Profile.php 表单

```
<form id="FormId" action="" method="get">
    <input type="hidden" value="<? echo $user1_id ?>">
        <textarea placeholder="Whats New??" id="FormId" name="status"></textarea>
            <input type="submit" name="Submit" value="Submit">
            </form> 
```

插入.php

```
 <?
    session_start();
    ini_set('display_errors',1);
    error_reporting(E_ALL|E_STRICT);
    include "db_connect.php";
    if (isset($_GET['status']))  {
         $status = $_GET['status'];
    }
    $user1_id=$_SESSION['id'];

if ($_GET['status']) {
$query = mysql_query("INSERT INTO feed (status,user1_id) VALUES ('$status', '$user1_id')")  or die (mysql_error());
if($query){
    echo "Posted Into Database";
}

exit();
}
?> 
```

我知道我需要与此类似的东西。但我认为我更多地停留在 var/data 部分。

```
$("form#myFormId").submit(function() {
    var mydata = $("form#myFormId").serialize();
    alert(mydata); // it's only for test
    $.ajax({
        type: "GET",
        url: "insert.php",
        data: mydata,
        success: function(response, textStatus, xhr) {
            alert("success");
        },
        error: function(xhr, textStatus, errorThrown) {
            alert("error");
        }
    });
    return false;
}); 
```

但不知道该怎么办。

任何指导表示赞赏。不要求任何人为我编写代码。但欢迎好的方向。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:34:42.660

将您的 ajax 部分更改为：

```
$("form#myFormId").submit(function(e) {
  e.preventDefault();  //prevent default submit
  ........ 
```

你的隐藏输入应该有名字

```
<input name="userId" type="hidden" value="<? echo $user1_id ?>"> 
```

在php中，

```
$userId = $_GET["userId"]; 
```

更改 textarea 的 id，它与您的 formid 相同，并且 ids 需要是唯一的，因此更改您的 textarea id，您可以尝试将数据传递为：

```
$.ajax({
        type: "GET",
        url: "insert.php",
        data:"status="+$("#yourTextareaId").val()+"&userId="+$("#yourHiddenInputId").val(),
        ...... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T23:25:20.550

只想对你们俩的时间和帮助表示感谢。我重新编写了代码，现在可以正常工作了。

这是最终代码 PROFILE.PHP/JS

```
<script type="text/javascript">

function createstatus(content){
$.post("insert.php", { user1_id: content } );
refreshstream();
}

function createwallpost(content,user1_id){

$.ajax({
   type: "POST",
   url: "insert.php",
   data: "status="+content+"&user1_id="+user1_id,
   success: function(){
     document.location = document.location;
   }
 });

}
</script>

    <form action="insert.php" method="POST" target="ifr1" class="form_statusinput">
        <input type="hidden" name="user1_id" value="<?php echo $user1_id ?>">
        <input type="text" name="status" id="status" class="homescreen_status_input" placeholder="Say something">
        <iframe name="ifr1" id="ifr1" style="display:none;"></iframe>
    </form> 
```

插入.PHP

```
<?
session_start();
include "db_connect.php";
if (isset($_POST['status']))  {
     $status = $_POST['status'];
}

$user1_id = $_POST['user1_id'];

if ($_POST['status']) {
$query = mysql_query("INSERT INTO feed (status,user1_id) VALUES ('$status', '$user1_id')")  or die (mysql_error());
if($query){
    echo "Posted Into Database";
}

exit();
} 

?> 
```

我决定使用 post 而不是 GET 方法，因为我觉得它更安全并且可以顺利传递更多信息。再次感谢。

# c# - 如何将故事板应用为样式

> ID：11206387
> 
> 赞同：3
> 
> 时间：2012-06-26T11:30:09.493
> 
> 标签：c#, wpf, styles, storyboard, shapes

我想对`Storyboard`我`Rectangle` `Fill`这样的应用：

```
<Rectangle Name="MyRectangle"
  Width="100"
  Height="100">
  <Rectangle.Fill>
    <SolidColorBrush x:Name="MySolidColorBrush" Color="Blue" />
  </Rectangle.Fill>
  <Rectangle.Triggers>
    <EventTrigger RoutedEvent="Rectangle.MouseEnter">
      <BeginStoryboard>
        <Storyboard>
          <ColorAnimation 
            Storyboard.TargetName="MySolidColorBrush"
            Storyboard.TargetProperty="Color"
            From="Blue" To="Red" Duration="0:0:1" />  
        </Storyboard>
      </BeginStoryboard>
    </EventTrigger>
  </Rectangle.Triggers>
</Rectangle> 
```

但我想插入`Storyboard`a `Style`，我试过这个：

```
<Style xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
   xmlns:s="clr-namespace:System;assembly=mscorlib" 
   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
   TargetType="{x:Type Rectangle}">

<Style.Triggers>

    <EventTrigger RoutedEvent="Shape.Loaded">
        <BeginStoryboard>
            <Storyboard>
                <ColorAnimation 
            Storyboard.TargetName="MySolidColorBrush"
            Storyboard.TargetProperty="Color"
            From="Blue" To="Red" Duration="0:0:1" />
            </Storyboard>
        </BeginStoryboard>
    </EventTrigger>

</Style.Triggers>

<Setter Property="Shape.Fill" Value="Blue" x:Name="MySolidColorBrush"/>

</Style> 
```

使用此代码：

```
var rect = new Rectangle();

using (FileStream stream = new FileStream("myStyle.xaml", FileMode.Open))
   rect.Style = XamlReader.Load(stream) as Style; 
```

但它不起作用并引发异常。我必须如何改变我的风格？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T14:11:53.027

在你的故事板中改变它

```
Storyboard.TargetProperty="Color" 
```

到

```
Storyboard.TargetProperty="Fill.Color" 
```

并删除

```
Storyboard.TargetName="MySolidColorBrush" 
```

# winforms - 如何在 WinForms 中的禁用面板上设置 WaitCursor 光标

> ID：11206392
> 
> 赞同：2
> 
> 时间：2012-06-26T11:30:40.427
> 
> 标签：winforms, panel

我正在尝试这样做

```
panel.Enabled = false; // to disable all controls on panel at once
panel.Cursor = Cursors.WaitCursor; 
```

并且调试器显示 panel.Cursor 是 WaitCursor，但是当我将鼠标移到面板上时，光标仍然是箭头。

```
panel.Update(); panel.Refresh(); // does not help 
```

那么，如何解决呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T19:28:23.813

禁用的控件将不会接收 Windows 消息。最简单的方法是保持启用并以不同的方式处理“禁用”。

根据您的特定需要，另一种方法是将下面的代码添加到按钮的父级 - 您可以优化例程以仅在需要更改时调用。

```
 this.MouseMove += (s, a) =>
                              {
                                  if (button2.Bounds.Contains(a.Location))
                                      this.Cursor = Cursors.WaitCursor;
                                  else
                                      this.Cursor = Cursors.Default;
                              }; 
```

# javascript - 按长度排序数组

> ID：11206393
> 
> 赞同：-2
> 
> 时间：2012-06-26T11:30:41.273
> 
> 标签：javascript, arrays, integer

我有以下数组：

[http://jsfiddle.net/3NZsK/](http://jsfiddle.net/3NZsK/)

我需要按数组的长度对数组进行排序。

如何找出哪一个是最大的、第二大的、第三大的和最小的？

例如，我有以下虚拟函数，它可以让我们获得第二大数组：

[http://jsfiddle.net/WPRYf/](http://jsfiddle.net/WPRYf/)

上面的哑函数算法是什么？

先感谢您

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T13:28:18.930

```
var
  a = ["a", "a"];
  b = ["b", "b", "b", "b"],
  c = ["c", "c", "c"],
  d = ["d"],
  container = [a, b, c, d];

​container.sort(function (a, b) {
  return b.length - a.length;
});

console.log(container); 
```

`container`将从最长（最多元素）到最短（最少元素）排序。访问它：

```
container[0] // longest
container[1] // 2nd longest
// ... 
```

[http://jsfiddle.net/pSRVq/](http://jsfiddle.net/pSRVq/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T17:51:47.227

您可以使用 length 方法找到数组的长度，然后根据它们的值对它们进行排序以找到最大、第二大的数组。

# objective-c - NSMutableArray 和副本

> ID：11206395
> 
> 赞同：4
> 
> 时间：2012-06-26T11:30:49.100
> 
> 标签：objective-c, ios, uitableview, nsmutablearray

我有 3 个`NSMutableArrays`：a，b，c。

```
a= [b copy];
a= [c copy]; 
```

第一次复制（从 b 中）的元素会发生什么？

在我的用例中，a 是我用作 tableview 的 DataSource 的数组，而 b 和 c 是在需要时代替数据源的数组。谢谢

具体例子。最后我不得不使用 setArray。

```
-(IBAction)selectTab:(id)sender {
    if ([(UIButton*)sender tag] == 1000) {
        if (![self.butonLocuri isSelected]) {

            [tableDataSourceArray setArray:locuriArray];
            [self addPins:self.tableDataSourceArray];
            [self.myTableView reloadData];
        }
    }

    if ([(UIButton*)sender tag] == 2000) {

        if(![self.butonEvenimente isSelected]){

            [tableDataSourceArray setArray:evenimenteArray];
            [self addPins:self.tableDataSourceArray];
            [self.myTableView reloadData];

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T11:38:56.047

```
a= [b copy]; // a is pointing to [b copy] memory location.   
a= [c copy]; // a is pointing to [c copy] memory location. 
```

你应该使用`setArray:`方法。

```
[a setArray:b];
[a setArray:c]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T11:33:14.487

它们被数组 c 的元素替换。Plus copy 仅在您实施了 NSCopying 委托时才有效。

# php - 缓存 API Twitter 调用 Twitter Profile Widget

> ID：11206398
> 
> 赞同：1
> 
> 时间：2012-06-26T11:30:53.593
> 
> 标签：php, jquery, twitter

我正在本地开发一个站点，该站点两次使用 Twitter Profile Widget，用于两个单独的 Twitter 提要。

我现在已经多次遇到速率限制（150 次呼叫/每小时），我一直在寻找管理这个的方法。

我发现的一种技术使用 Cron Jobs 调用 PHP 文件，该文件每 10 分钟缓存一次 Twitter API 调用，将其保存到服务器上的 txt 文件并使用 JQuery 对其进行解析。步骤 2,3,5.. [http://net.tutsplus.com/tutorials/php/how-to-create-an-advanced-twitter-widget/](http://net.tutsplus.com/tutorials/php/how-to-create-an-advanced-twitter-widget/)

我的问题是.. 然后我将如何将 JSON 内容解析到我的 Twitter 个人资料小部件中？

我怀疑这可能是不可能的..

下面是用于显示 Twitter 提要的标准 Twitter Profile Widget 代码。

```
<script charset="utf-8" src="http://widgets.twimg.com/j/2/widget.js"></script>
            <script>
                new TWTR.Widget({version: 2, type: 'faves', rpp: 10, interval: 30000, title: ' ',subject: ' ', width: 210, height: 330,
                  theme: {
                    shell: {
                      background: ' ',
                      color: '#ffffff'
                    },
                    tweets: {
                      background: '#ffffff',
                      color: '#444444',
                      links: '#53cdc7'
                    }
                  },
                  features: {
                    scrollbar: true,
                    loop: false,
                    live: true,
                    behavior: 'all'
                  }
                }).render().setUser('diariesdownundr').start();

                new TWTR.Widget({version: 2,type: 'faves',rpp: 10,interval: 30000,title: ' ',subject: ' ',width: 210,height: 330,
                  theme: {
                    shell: {
                      background: ' ',
                      color: '#ffffff'
                    },
                    tweets: {
                      background: '#ffffff',
                      color: '#444444',
                      links: '#53cdc7'
                    }
                  },
                  features: {
                    scrollbar: true,
                    loop: false,
                    live: true,
                    behavior: 'all'
                  }
                }).render().setUser('diaries1').start();
            </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T03:03:14.720

这确实是可能的。[从http://twitter.com/javascripts/widgets/widget.js](http://twitter.com/javascripts/widgets/widget.js)获取未压缩的 widget.js ，并更改 var profileBase（大约第 884 行）以从您网站上的缓存文件而不是 api.twitter.com 中读取。加载新的 widjet.js，而不是现在从 widgets.twimg.com 加载的那个

至于要读取的实际“twitter 缓存”文件——使用 cronjob 确实是一种方法。当我这样做时，我使用 curl 向 api.twitter.com 发出与当前 widget.js 发出的完全相同的请求——如果我抓取了 widget.js 发出的请求的整个 URL 以及所有获取参数（例如，您可以在 Firebug 中看到这一点），将其扔给 curl（因此， curl_init($url) 和 curl_exec($url) ），并将 curl_exec 的输出写入缓存文件。

# ruby-on-rails - 将变量转换为 :symbol 并通过？

> ID：11206401
> 
> 赞同：3
> 
> 时间：2012-06-26T11:31:03.903
> 
> 标签：ruby-on-rails, carrierwave, symbols

我试图将函数变量作为符号传递给载波无济于事，我怎么能正确地做到这一点？

像这样：

```
 image_tag @profile.photos.first.file_url(:size) 
```

我的功能：

```
 # Get avatar in correct size
  # Display or return default image
  def get_avatar(id, size)

    this_size = size.to_sym
    @profile = User.find(id).profile rescue nil
    image_tag @profile.photos.first.file_url(this_size)

  rescue
    image_tag ("/assets/avatars/img_#{size}.png")
 end 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-07T06:17:52.473

如果大小不是字符串，则需要先转换。

试试这个：

```
this_size = size.to_s.to_sym 
```

或者完全跳过该行并使用它：

```
@profile.photos.first.file_url(:"#{size}") 
```

# android - Android：如何在 OpenGLES 中将 2 个纹理放入同一个正方形？

> ID：11206403
> 
> 赞同：0
> 
> 时间：2012-06-26T11:31:15.787
> 
> 标签：android, opengl-es, bind, textures

我需要在同一个 Square 上放置 2 个纹理，但是当我运行应用程序时它一直在崩溃。我该怎么办？我必须使用 2 个不同的“上下文”变量吗？我是否必须创建 Square 类的 2 个实例（每个纹理一个）？我的渲染器：

```
public class HelloOpenGLES10Renderer implements Renderer {
private Square      square;     // the square
private Context     context;
private Context     context2;

/** Constructor to set the handed over context */
public HelloOpenGLES10Renderer(Context context) {
    this.square     = new Square();
    this.context=context;
    this.context2=context2;
}

public void onDrawFrame(GL10 gl) {
    // clear Screen and Depth Buffer
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

    // Reset the Modelview Matrix
    gl.glLoadIdentity();

    // Drawing
    gl.glTranslatef(0.0f, 0.0f, -5.0f);     // move 5 units INTO the screen
    square.loadGLTexture(gl, this.context,Square.getSex());
    square.loadGLTexture(gl, this.context2,Square.getHair());   // is the same as moving the camera 5 units away
    square.draw(gl);                        // Draw the triangle

} 
```

我没有发布我的 onsurfacechanged 和 onsurfacecreated。

我的广场课：公共课广场{

```
private FloatBuffer vertexBuffer;   // buffer holding the vertices
private static int sex=2130837504;
private static int hair=2130837511;

private FloatBuffer textureBuffer;
private FloatBuffer textureBuffer2;// buffer holding the texture coordinates
private float texture[] = {
        // Mapping coordinates for the vertices
        0.0f, 1.0f,     // top left     (V2)
        0.0f, 0.0f,     // bottom left  (V1)
        1.0f, 1.0f,     // top right    (V4)
        1.0f, 0.0f      // bottom right (V3)
};
private float texture2[] = {
        // Mapping coordinates for the vertices
        0.0f, 0.5f,     // top left     (V2)
        0.0f, 0.0f,     // bottom left  (V1)
        0.5f, 0.5f,     // top right    (V4)
        0.5f, 0.0f      // bottom right (V3)
};

private float vertices[] = {
        -1.0f, -2.0f,  0.0f,        // V1 - bottom left
        -1.0f,  2.0f,  0.0f,        // V2 - top left
         0.8f, -2.0f,  0.0f,        // V3 - bottom right
         0.8f,  2.0f,  0.0f         // V4 - top right
};

public Square() {
    ByteBuffer byteBuffer = ByteBuffer.allocateDirect(vertices.length * 4);
    byteBuffer.order(ByteOrder.nativeOrder());
    vertexBuffer = byteBuffer.asFloatBuffer();
    vertexBuffer.put(vertices);
    vertexBuffer.position(0);

    byteBuffer = ByteBuffer.allocateDirect(texture.length * 4);
    byteBuffer.order(ByteOrder.nativeOrder());
    textureBuffer = byteBuffer.asFloatBuffer();
    textureBuffer.put(texture);
    textureBuffer.position(0);
    byteBuffer = ByteBuffer.allocateDirect(texture2.length * 4);
    byteBuffer.order(ByteOrder.nativeOrder());
    textureBuffer2 = byteBuffer.asFloatBuffer();
    textureBuffer2.put(texture2);
    textureBuffer2.position(0);
}

/** The draw method for the square with the GL context */
public void draw(GL10 gl) {
    // bind the previously generated texture
    gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);

    // Point to our buffers
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

    // Set the face rotation
    gl.glFrontFace(GL10.GL_CW);

    // Point to our vertex buffer
    gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuffer);
    gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, textureBuffer);

    // Draw the vertices as triangle strip
    gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, vertices.length / 3);

    //Disable the client state before leaving
    gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
}

/** The texture pointer */
private int[] textures = new int[1];

public void loadGLTexture(GL10 gl, Context context,int sex ) {
    // loading texture
    Bitmap bitmap = BitmapFactory.decodeResource(context.getResources(),
            sex);

    // generate one texture pointer
    gl.glGenTextures(1, textures, 0);
    // ...and bind it to our array
    gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);

    // create nearest filtered texture
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_NEAREST);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);

    // Use Android GLUtils to specify a two-dimensional texture image from our bitmap
    GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap, 0);

    // Clean up
    bitmap.recycle();
}

public void loadGLTextureHair(GL10 gl, Context context,int hair ) {
    // loading texture
    Bitmap bitmap = BitmapFactory.decodeResource(context.getResources(),
            sex);

    // generate one texture pointer
    gl.glGenTextures(1, textures, 0);
    // ...and bind it to our array
    gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);

    // create nearest filtered texture
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_NEAREST);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);

    // Use Android GLUtils to specify a two-dimensional texture image from our bitmap
    GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap, 0);

    // Clean up
    bitmap.recycle();
}

public static int getSex() {
    return sex;
}

public static void setSex(int sex) {
    Square.sex = sex;
}

public static int getHair() {
    return hair;
}

public static void setHair(int hair) {
    Square.hair = hair;
} 
```

}

日志猫：

```
06-26 10:15:10.320: D/dalvikvm(280): GC_EXTERNAL_ALLOC freed 923 objects / 64552 bytes in 83ms
06-26 10:15:10.921: D/libEGL(280): egl.cfg not found, using default config
06-26 10:15:10.921: D/libEGL(280): loaded /system/lib/egl/libGLES_android.so
06-26 10:15:11.260: I/ARMAssembler(280): generated scanline__000001B7:030101C1_00009501_00000000 [142 ipp] (234 ins) at [0x23a918:0x23acc0] in 5769170 ns
06-26 10:15:13.170: W/KeyCharacterMap(280): No keyboard for id 0
06-26 10:15:13.170: W/KeyCharacterMap(280): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
06-26 10:15:29.020: D/dalvikvm(312): GC_EXTERNAL_ALLOC freed 945 objects / 65408 bytes in 72ms
06-26 10:15:29.560: D/libEGL(312): egl.cfg not found, using default config
06-26 10:15:29.570: D/libEGL(312): loaded /system/lib/egl/libGLES_android.so
06-26 10:15:29.860: I/ARMAssembler(312): generated scanline__000001B7:030101C1_00009501_00000000 [142 ipp] (234 ins) at [0x23a830:0x23abd8] in 2951633 ns
06-26 10:15:54.629: W/KeyCharacterMap(312): No keyboard for id 0
06-26 10:15:54.639: W/KeyCharacterMap(312): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
06-26 11:21:50.350: D/dalvikvm(344): GC_EXTERNAL_ALLOC freed 967 objects / 66264 bytes in 75ms
06-26 11:21:50.950: D/libEGL(344): egl.cfg not found, using default config
06-26 11:21:50.950: D/libEGL(344): loaded /system/lib/egl/libGLES_android.so
06-26 11:21:51.290: I/ARMAssembler(344): generated scanline__000001B7:030101C1_00009501_00000000 [142 ipp] (234 ins) at [0x23a830:0x23abd8] in 12307152 ns
06-26 11:22:01.749: W/KeyCharacterMap(344): No keyboard for id 0
06-26 11:22:01.749: W/KeyCharacterMap(344): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
06-26 11:48:39.200: D/dalvikvm(371): GC_EXTERNAL_ALLOC freed 989 objects / 67120 bytes in 69ms
06-26 11:48:39.750: D/libEGL(371): egl.cfg not found, using default config
06-26 11:48:39.759: D/libEGL(371): loaded /system/lib/egl/libGLES_android.so
06-26 11:48:40.079: W/dalvikvm(371): threadid=7: thread exiting with uncaught exception (group=0x4001d800)
06-26 11:48:40.109: E/AndroidRuntime(371): FATAL EXCEPTION: GLThread 8
06-26 11:48:40.109: E/AndroidRuntime(371): java.lang.NullPointerException
06-26 11:48:40.109: E/AndroidRuntime(371):  at hello.project.Square.loadGLTexture(Square.java:96)
06-26 11:48:40.109: E/AndroidRuntime(371):  at hello.project.HelloOpenGLES10Renderer.onDrawFrame(HelloOpenGLES10Renderer.java:34)
06-26 11:48:40.109: E/AndroidRuntime(371):  at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1332)
06-26 11:48:40.109: E/AndroidRuntime(371):  at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1116)
06-26 11:48:42.879: I/Process(371): Sending signal. PID: 371 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:23:55.340

我几乎可以肯定你得到了，`NullPointerException`因为`BitmapFactory`找不到你指定的资源 id，所以`Bitmap`变成了`null`，因此当你尝试它时会抛出异常`recycle()`。

`private static int sex=2130837504;`您应该从生成的`R`类中获取值，而不是像 ( ) 那样使用 id 作为静态变量： `BitmapFactory.decodeResource(context.getResources(), R.drawable.sex);`.

除此之外，您的代码还有一些初学者问题：

1.  你只需要一个`Context`对象。

2.  您不需要两种不同的方法来加载纹理（`loadGLTextureHair`（有另一个错误，它应该使用参数头发，而不是性别）和`loadGLTexture`）：

    ```
    public void loadGLTexture(GL10 gl, Context context, int resourceId) {
        Bitmap bitmap = BitmapFactory.decodeResource(context.getResources(), resourceId);

        gl.glGenTextures(1, textures, 0);
        gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);

        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_NEAREST);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);
        gl.gltexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_S, GL10.GL_REPEAT);
        gl.gltexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_WRAP_T, GL10.GL_REPEAT);

        GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap, 0);
        bitmap.recycle();
    } 
    ```

您应该从您的方法中调用此方法`onSurfaceCreated()`，如果您从中调用它，`onDrawFrame()`它将每帧加载一个新纹理，并且您将耗尽内存。
要在纹理之间切换，请使用`glBindTexture()`方法。3\. 由于您没有在其他地方保存纹理[] 中的值，因此下次加载纹理时它会被覆盖。

这些是我能看到的最明显的错误，如果你修复它们，你的程序至少应该运行。继续阅读大量教程和示例，直到你明白为止:)

# c# - 匹配不包含短语的所有内容的正则表达式

> ID：11206405
> 
> 赞同：0
> 
> 时间：2012-06-26T11:31:23.463
> 
> 标签：c#, .net, regex

对我来说似乎是一项微不足道的任务，但在过去的一个小时内未能完成。

正则表达式应匹配不包含短语“排除短语”的每个单词。

例如：
匹配：
'ok
string''some phrasOk because thre is no e in phrase'
等...

不匹配：
“排除短语”
“某些前缀排除短语”
“排除短语某些后缀”
等...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:07:59.397

如果你有一句话：

> Lorem ipsum dolor sit amet, consectetur adipiscing elit。

查找所有单词的正则表达式，但不是 'sit' 和 'adipiscing' 将是：

> \b(?(?=坐|adipiscing)^\w+|\w+)\b

在 php 中：

```
$text = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit.';

$matches = array();
preg_match_all("/\b(?(?=sit|adipiscing)^\w+|\w+)\b/i", $text,$matches);

var_dump($matches); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T12:04:16.153

那将是一个正则表达式`^((?!phrase).)*$`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T12:04:57.620

解决这个问题的最简单方法：匹配（平凡）的正则表达式然后反转条件。

python中的示例：

```
>>> not(re.search ('exclude phrase','Some prefix exclude phrase'))
False
>>> not(re.search ('exclude phrase','exclude phrase some suffix'))
False
>>> not(re.search ('exclude phrase','ok string'))
True 
```

# javascript - 如何调试使页面运行缓慢的脚本（根据Firefox）？

> ID：11206407
> 
> 赞同：1
> 
> 时间：2012-06-26T11:31:32.237
> 
> 标签：javascript, jquery, raphael, settimeout

我有一个有几个超时的脚本，使用 Raphael 绘制菜单并使用各种动态属性来完成此操作。您可以在 jsfiddle 上查看它：[我的代码的 JSFiddle 版本](http://jsfiddle.net/p9ujf/1/)

我的问题是 Firefox 偶尔会抛出“脚本运行缓慢等”。打开此页面时出现错误，可能在半分钟或更长时间后。通常我会将鼠标悬停在一个元素上，因此此时会打开一个子菜单。该错误通常不指向我的任何 js 文件，有时甚至不指向 Firefox 自己的文件。

我该如何调试，这可能吗？任何提示表示赞赏。（我现在使用 chronos 作为计时器，似乎没有帮助）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:55:16.080

### 分析您的代码

您可能想做*Profiling*，即对代码进行性能分析。正如其他人所指出的，Firebug 是 Firefox 中的一个很好的工具。更具体地说：在 Firebug 中，单击*控制台*选项卡中的*配置文件。*然后稍微调整一下导航，然后再次单击*Profile*以完成分析并获得结果。他们会告诉您调用哪些函数的频率和执行时间。这将帮助您识别代码中的性能瓶颈。

 **### 优化

快速浏览一下，我会说您可能仍然可以优化 DOM 查询。保存对昂贵查询结果的引用。并尽可能[使用上下文](http://www.tvidesign.co.uk/blog/improve-your-jquery-25-excellent-tips.aspx#tip9)，以提高查询效率。

此外，[`requestAnimationFrame()`](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)现在似乎是 javascript 动画的方式，而不是`setTimeout()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:55:25.177

大多数浏览器都有某种机制允许用户停止“长时间运行的脚本”。

脚本如何被视为“长时间运行”在浏览器之间略有不同，并且是在“执行上下文”中执行的指令数量或其经过的持续时间。

JavaScript 在浏览器中运行时主要是事件驱动的（除了在解析页面时立即执行 JavaScript）。浏览器会等到执行上下文完成后再做任何事情，并且在等待 JavaScript 执行时，可以阻止任何显示刷新等。

您基本上需要将您的指令分解为对事件的响应。如果你在任何地方都有一个巨大的循环（例如做一个动画），你真的需要使用一个间隔来打破执行周期。例如`var interval = window.setInterval(refreshDisplay, 50);`- 这将`refreshDisplay`每 50 毫秒调用一次函数（不带参数）（粗略的每秒 20 次调用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:34:00.273

![在此处输入图像描述](../Images/cd1be84bc64c05e5ef84557319942a1b.png)

[](http://getfirebug.com/)**用于调试 javascript (Firefox 插件) 的[**firebug**](http://getfirebug.com/)**

 **![在此处输入图像描述](../Images/db80fee2f5a818652597b4eeab7d7410.png)

用于`F12`显示萤火虫

这会帮助你！

**使用 Firebug，您可以使用断点调试 javascript 并查看所有 ajax 调用！**

![在此处输入图像描述](../Images/b1739564ebc0578d6b34cbefcc3672b4.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T11:37:06.540

尝试`Firebug`使用类似屏幕截图所示的东西——

![截屏](../Images/6b8fae5a51e2603700418b6c8f6967cb.png)

下载firebug的链接——

[http://getfirebug.com/downloads/](http://getfirebug.com/downloads/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T11:49:27.370

可能有一些操作运行缓慢，或者您的循环之一的复杂性很差。您可以使用二进制拆分：删除一半代码，查看时间是否有显着增加，并对运行最慢的一半代码执行相同操作。****

# ios - NSMutableDictionary - 使用 allKeysforObject 不检索数组值

> ID：11206413
> 
> 赞同：0
> 
> 时间：2012-06-26T11:32:01.207
> 
> 标签：ios, objective-c

```
NSMutableDictionary *expense_ArrContents = [[NSMutableDictionary alloc]init];
for (int i = 1; i<=4; i++) {
    NSMutableArray *current_row = [NSMutableArray arrayWithObjects:@"payer_id",@"Expense_Type_id",@"Category_Id",@"SubCategory_Id",nil];
    [expense_ArrContents setObject:current_row forKey: [NSNumber numberWithInt:i]];
}
NSArray *newArray = [expense_ArrContents allKeysForObject:@"payer_id"];
NSLog(@"%@",[newArray description]); 
```

我想获取包含特定对象的键值列表，该对象位于存储在 nsmutabledictionary 中的特定键的值数组中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:46:36.440

在您获得所有键 ( `[expense_ArrContents allKeysForObject:@"payer_id"];`) 的行中，您实际上获得了不在任何数组项中的对象的键。这与您在 中添加的`@"player_id"`对象不同。实际上，也许您的所有行都有不同的对象（除非编译器进行了一些优化 - 也许它威胁将相同的字符串文字作为一个对象，而不是为每次迭代创建新对象）。尝试为添加到的NSString 对象创建一个对象，然后获取该对象的所有键：`@"player_id"``current_row``@"player_id"``@"player_id"``current_row`

```
NSString* playerId = @"player_id";
for(){
    NSMutableArray *current_row = [NSMutableArray arrayWithObjects: playerId,...];
...
}
NSArray *newArray = [expense_ArrContents allKeysForObject:playerId]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:34:24.173

您的 NSArray`*newArray = [expense_ArrContents allKeysForObject:@"payer_id"];`不会返回任何值，因为在 fee_ArrContents 中没有这样的键（@“payer_id”），而是有 1、2、3 等键。您的要求是什么？想看看 fee_ArrContents 中的所有键是什么日志

```
NSArray*keys=[expense_ArrContents allKeys]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T12:09:32.613

试试这个 ：

```
NSMutableArray *array_key=[[NSMutableArray alloc]init];
for (NSString *key in expense_ArrContents) {    
    if ([[expense_ArrContents objectForKey:key] containsObject:@"payer_id"]) {
        [array_key addObject:key];
    }
} 
```

# asp.net-mvc - MVC 如何从我的域模型映射到特定的视图模型

> ID：11206415
> 
> 赞同：2
> 
> 时间：2012-06-26T11:32:14.580
> 
> 标签：asp.net-mvc, viewmodel, automapper

在观看了将特定视图模型传递给视图的建议之后，我开始使用将域模型映射到 ASP.NET MVC 中的视图模型的概念。

我已经能够管理一个域模型到具有较少属性的更简单视图模型的基本映射，但现在需要生成更复杂的视图模型并且无法弄清楚。我有以下领域模型

```
public class Club
{
    public int ClubID { get; set; }
    public string FullName { get; set; }
    public string Description { get; set; }
    public string Telephone { get; set; }
    public string URL { get; set; }
    public DateTime CreatedDate { get; set; }

    public virtual ICollection<Member> Members{ get; set; }
}

public class Member
{
    public int MemberID{ get; set; }
    public string Name { get; set; }
    public MemberType Membership{ get; set; }
    public virtual Club Club { get; set; }
    public virtual int ClubID { get; set; }
}

public enum MemberType
{
    Standard,
    Special,
    Limited
} 
```

我想映射到这样的视图模型（注意：我这样拆分它是因为我认为它是有道理的，但我不确定）......

```
public class ClubDetailsViewModel
{
    public int ClubID { get; set; }
    public string FullName { get; set; }
    public string Description { get; set; }
    public IList<ClubDetailsMemberSummaryViewModel> Members { get; set; }
}

public class ClubDetailsMemberSummaryViewModel
{
    public MemberType Membership { get; set; }
    public int MemberCount { get; set; }
} 
```

我最终想要的是一个页面，其中显示了一些俱乐部详细信息以及俱乐部成员类型的摘要报告以及成员数量。如：

```
Some Club Name
Description of the club.....

CLUB MEMBERS
Limited - 15
Standard - 100 
```

所以我认为视图模型对此很有意义（尽管可能是更好的方法）。我苦苦挣扎的地方是如何映射元素。我可以让俱乐部将主要字段映射到俱乐部视图模型，但真的无法弄清楚如何将俱乐部列表的结果映射到他们的视图模型上，然后将其作为列表添加到主视图模型中。

我正在使用这个从我的存储库中获取俱乐部

```
var clubs = _clubRepository.GetClubByID(ID); 
```

然后我可以使用实体框架转换使用包含在数据访问层中返回的法院

```
var grpCourts = from c in clubs.Members
                group c by c.Membership into grp 
                select new { st = grp.Key, count = grp.Distinct().Count() }; 
```

我将如何遍历结果记录并将它们映射到 ClubDetailsMemberSummaryViewModel，然后将这些列表添加到主 ClubDetailsViewModel？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:24:41.827

`Club`您从to的映射`ClubDetailsViewModel`将是微不足道的，除了`Members`. 对于该属性，您可以编写一个快速的内联解析器或编写您自己的自定义解析器。内联解析器看起来像这样：

```
Mapper.CreateMap<Club, ClubDetailsViewModel>()
    .ForMember(dest => dest.Members, opt => opt.ResolveUsing(src => 
    {
        return src.Members
            .GroupBy(m => m.Membership)
            .Select(grp => new ClubDetailsMemberSummaryViewModel
            {
                Membership = grp.Key,
                MemberCount = grp.Distinct().Count()
            });
    })); 
```

我认为将这样的更复杂的解析器重构为自己的类是一种很好的做法：

```
public class MembershipClubDetailsResolver : ValueResolver<Club, IList<ClubDetailsMemberSummaryViewModel>>
{
    protected override IList<ClubDetailsMemberSummaryViewModel> ResolveCore (Club source) 
    {
        return source.Members
            .GroupBy (m => m.Membership)
            .Select(grp => new ClubDetailsMemberSummaryViewModel
            {
                Membership = grp.Key,
                MemberCount = grp.Distinct().Count()
            })
            .ToList();
    }
} 
```

然后在映射中使用该解析器：

```
Mapper.CreateMap<Club, ClubDetailsViewModel>()
    .ForMember(dest => dest.Members, opt => opt.ResolveUsing<MembershipClubDetailsResolver>()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:34:24.363

您的映射似乎相当复杂，我想我会使用 automapper 的 .ConvertUsing 方法

```
Mapper.CreateMap<List<Club>,List<ClubDetailsViewModel>>()
.ConvertUsing<ClubToClubDetailsViewModel>(); 
```

转换类具有以下继承

```
public class ClubToClubDetailsViewModel: TypeConverter<List<Club>,List<ClubDetailsViewModel>>
{
....
} 
```

或者，您可以修改创建两个“简单”映射

```
Mapper.CreateMap<Club,ClubDetailsViewModel>() 
```

这将映射除名为 Members 的属性之外的所有内容

然后您需要为成员创建一个映射到 ClubDetailsMemberSummaryViewModel，您可以手动进行映射，也可以在 automapper 中进行配置。

有关 automapper 的更多具体细节，您可以访问[https://github.com/AutoMapper/AutoMapper/wiki](https://github.com/AutoMapper/AutoMapper/wiki)

# c# - 应用程序实例之间的通信

> ID：11206416
> 
> 赞同：1
> 
> 时间：2012-06-26T11:32:16.580
> 
> 标签：c#, .net, winforms, wcf

我有一个winforms应用程序，

单击关闭按钮时，我将该应用程序隐藏到系统托盘中，就像 Skype 的工作方式一样。

如果再次实例化应用程序并且该应用程序的实例已经在运行，那么我想将已经运行的应用程序（可能在托盘中）带到前面并退出新的应用程序..

`Main`我想在使用 WCF的方法中是这样的

```
Process currentProcess = Process.GetCurrentProcess();
Process[] processes = Process.GetProcesses();
bool running = false;
foreach (var process in processes)
{
    if (process.ProcessName == currentProcess.ProcessName 
        && process.Id != currentProcess.Id)
    {
        running = true;
    }
}

if (running)
{

    ChannelFactory<IService1> pipeFactory = new 
        ChannelFactory<IService1>(new NetNamedPipeBinding(),
                    new EndpointAddress("net.pipe://localhost/PipeActivate"));

    IService1 pipeProxy = pipeFactory.CreateChannel();
    pipeProxy.ActivateThisWindow();

    Application.Exit();
}
else
{

    using (ServiceHost host = new 
        ServiceHost(typeof(Form1), 
                new Uri[] { new Uri("net.pipe://localhost") }))
    {

        host.AddServiceEndpoint(typeof(IService1), 
                        new NetNamedPipeBinding(), "PipeActivate");

        host.Open();

        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Form1());

        host.Close();
    }
} 
```

在哪里

```
void IService1.ActivateThisWindow()
    {
        this.Show();
        if (this.WindowState != FormWindowState.Normal)
            this.WindowState = FormWindowState.Normal;
        this.Activate();
    } 
```

现在的问题是，它将正在运行的实例放在前面，但是随着新实例的退出，它会回到以前的状态。

问题是什么？我该如何解决这个问题？

我可以使用哪些其他方法来实现此要求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:55:10.717

虽然这是一种非常新颖的方法，但它有点矫枉过正。如这里所示，有一种更简单且使用更广泛的方法来处理此问题。

[创建单实例应用程序的正确方法是什么？](https://stackoverflow.com/questions/19147/what-is-the-correct-way-to-create-a-single-instance-application)

从个人经验来看，我将这个资源用于我所有的单实例应用程序，它就像一个魅力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T12:13:17.543

我假设您已经在 Form 1 类中实现了 IService1.ActivateThisWindow，所以这种行为是因为 form1 的新实例正在为主机应用程序上的每个请求创建并在请求结束时被销毁。为了解决问题，将 IService1.ActivateThisWindow 放在单独的类中，使 form1 不是宿主对象并使 form1 成为单例。

# java - 用于将文本从浏览器直接复制到文本文件的 Windows 背景中的 Java

> ID：11206423
> 
> 赞同：0
> 
> 时间：2012-06-26T11:32:51.737
> 
> 标签：java, background, popup, text-files

是否可以使用 Java 监听来自浏览器的事件？

主要任务是在鼠标右键弹出菜单中添加“复制到文件”命令。此命令必须在浏览器、记事本、winword（任何可选文本）中将选定文本添加到特定文本文件。

我刚刚尝试了将图标添加到托盘的代码，但我不知道是否可以开发它来解决我的任务。

```
import java.awt.*;
import java.awt.event.*;
public class SystemTrayTest
{

    public SystemTrayTest()
    {

        final TrayIcon trayIcon;

        if (SystemTray.isSupported()) {

            SystemTray tray = SystemTray.getSystemTray();
            Image image = Toolkit.getDefaultToolkit().getImage("tray.gif");

            MouseListener mouseListener = new MouseListener() {

                public void mouseClicked(MouseEvent e) {
                    System.out.println("Tray Icon - Mouse clicked!");                 
                }
                public void mouseEntered(MouseEvent e) {
                    System.out.println("Tray Icon - Mouse entered!");                 
                }
                public void mouseExited(MouseEvent e) {
                    System.out.println("Tray Icon - Mouse exited!");                 
                }
                public void mousePressed(MouseEvent e) {
                    System.out.println("Tray Icon - Mouse pressed!");                 
                }
                public void mouseReleased(MouseEvent e) {
                    System.out.println("Tray Icon - Mouse released!");                 
                }

            };

            ActionListener exitListener = new ActionListener() {
                public void actionPerformed(ActionEvent e) {
                    System.out.println("Exiting...");
                    System.exit(0);
                }
            };

            PopupMenu popup = new PopupMenu();
            MenuItem defaultItem = new MenuItem("Exit");
            defaultItem.addActionListener(exitListener);
            popup.add(defaultItem);

            trayIcon = new TrayIcon(image, "Tray Demo", popup);

            ActionListener actionListener = new ActionListener() {
                public void actionPerformed(ActionEvent e) {
                    trayIcon.displayMessage("Action Event", 
                        "An Action Event Has Been Peformed!",
                        TrayIcon.MessageType.INFO);
                }
            };

            trayIcon.setImageAutoSize(true);
            trayIcon.addActionListener(actionListener);
            trayIcon.addMouseListener(mouseListener);

            //    Depending on which Mustang build you have, you may need to uncomment
            //    out the following code to check for an AWTException when you add 
            //    an image to the system tray.

            //    try {
                      tray.add(trayIcon);
            //    } catch (AWTException e) {
            //        System.err.println("TrayIcon could not be added.");
            //    }

        } else {
            System.err.println("System tray is currently not supported.");
        }
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args)
    {
        SystemTrayTest main = new SystemTrayTest();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:46:57.237

您正在谈论访问剪贴板事件。这可能会帮助你。[我们如何获得有关系统剪贴板事件的通知？](https://stackoverflow.com/questions/8664711/how-do-we-get-notified-about-system-clipboard-events)

# jquery - JQM：是否在所有页面上都包含标题？

> ID：11206425
> 
> 赞同：1
> 
> 时间：2012-06-26T11:32:53.330
> 
> 标签：jquery, jquery-mobile

我正在使用 JQM (1.1.0) 开发一个相当广泛的移动网站。该结构旨在使 ajax 获取尽可能平滑。到目前为止，我已经在每个文件/页面上包含了标题（html-tag、header-tag 和所有脚本的导入）。

为一些缓存问题和未触发的事件而苦苦挣扎，我偶然发现了[这篇文章](http://rip747.wordpress.com/2012/04/19/pitfalls-with-jquery-mobile-and-how-to-over-come-them/)（#1），说标题应该只包含在将被加载的第一个文档/文件中一次。这很好用，也解决了我以前遇到的许多缓存问题。

然而，这也产生了一个非常讨厌的问题：如果用户点击刷新它会完全破坏网站 - 因为除了第一页之外的所有页面都缺少必要的文档标签。

那么，有什么方法可以优雅地处理这个问题，或者我应该恢复并回到 JQM Doc 的方式，在所有页面中包含标题？我对后者感觉更舒服，但上述帖子的作者有一个很好的观点——至少在我看来。

或者换一种说法，JQM 真的忽略了获取页面的标题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:49:22.010

不是一个完整的答案，但我最终寻求的解决方案是一个单一的全局标题。

反过来，JQM 确实忽略了标题。这仍然留下了刷新问题，但是通过一个简单的 javascript 重定向回包含完整标题的启动屏幕来解决这个问题。

# image - 保护 cakephp 2.0 中的图像/视频文件夹

> ID：11206432
> 
> 赞同：5
> 
> 时间：2012-06-26T11:33:23.977
> 
> 标签：image, .htaccess, cakephp-2.0, hotlinking

我们目前正在使用 webroot 中的文件夹来存储我们在需要登录的视图中加载的图像和视频（使用通常的 html 图像助手）。

我怎样才能防止外部访问者只是做一个`site.com/img/photos/1.jpg`url 并访问图像？据我了解，我不能真正使用媒体视图在正确的视图中渲染图像，而且我不知道是否有通过 htaccess 操作的解决方案。

这方面的最佳做法是什么？也许选择使用非 webroot 文件夹是最好的（尽管这会使文件存储部分变得更加困难）？

正如poncha建议的那样，我尝试将主 .htaccess 文件编辑到这个

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteCond %{HTTP_REFERER} !localhost
   RewriteCond %{REQUEST_URI} ^app/webroot/img/
   RewriteRule .* / [L,F]
   RewriteRule    ^$ app/webroot/    [L]
   RewriteRule    (.*) app/webroot/$1 [L] 
</IfModule> 
```

但是重写基线似乎禁止访问整个站点，没有它，img 访问似乎没有任何变化。

编辑 2：在 webroot 中编辑 htaccess：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php [QSA,L]

# this RewriteCond is needed to avoid rewrite loops
RewriteCond %{REQUEST_URI} !^/app/webroot/
RewriteRule (.*) app/webroot/$1 [L,R]

RewriteCond %{HTTP_REFERER} !127.0.0.1
RewriteCond %{REQUEST_URI} ^/app/webroot/img/
RewriteRule .* - [L,F]

</IfModule> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:44:18.030

这将检查`Referer`http 标头是否设置为包含您的域的内容，如果没有，则拒绝访问 img/ 文件夹。

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_REFERER} !site.com
RewriteCond %{REQUEST_URI} ^img/
RewriteRule .* / [L,F] 
```

**注意**：如果有人想窃取您的内容，“破坏”这种保护很容易，但是，它确实可以防止*盗链*，而无需生成某种脚本，该脚本将通过所有图像/视频来检查是否应该访问的确。

编辑：

如果您的网站不在 中`/`，您有两种选择：

1.  更改`RewriteBase`以反映站点的基本 uri（例如`RewriteBase /app/webroot/`）

2.  更改`RewriteCond`以反映来自`/`（例如`RewriteCond ^app/webroot/img/`）的路径

在您的情况下，第二个选项是首选，因为您有其他规则

编辑2：

在您的情况下，整个集合应如下所示：

```
RewriteEngine on
RewriteBase /

# this RewriteCond is needed to avoid rewrite loops
RewriteCond %{REQUEST_URI} !^/app/webroot/
RewriteRule (.*) app/webroot/$1 [L,R]

RewriteCond %{HTTP_REFERER} !localhost
RewriteCond %{REQUEST_URI} ^/app/webroot/img/
RewriteRule .* - [L,F] 
```

# web-services - WSO2 ESB'a 示例轴服务器中的 JAX-RS Web 服务

> ID：11206433
> 
> 赞同：0
> 
> 时间：2012-06-26T11:33:24.017
> 
> 标签：web-services, rest, jax-rs, wso2, wso2esb

我想知道我们是否可以在 WSO2ESB 的示例 axis2 服务器中创建和托管 JAX-RS Web 服务。

如果是的话，有人可以给我一个工作示例的链接。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:09:31.287

我认为有可能，构建服务并将其部署到示例 axis2Server\repository\services 文件夹

# python - Python：将双条目字典列表映射到字典，第一个条目作为键，第二个作为值

> ID：11206434
> 
> 赞同：2
> 
> 时间：2012-06-26T11:33:24.950
> 
> 标签：python

我有这样的事情：

```
[{'date': 1, 'value':5}, {'date':2,'value':3}, ...] 
```

并希望将这两个键的值映射到：

```
{1:5, 2:3, ...} 
```

我怎样才能以一种好的方式做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T11:35:19.460

```
>>> lis = [{'date': 1, 'value':5}, {'date':2,'value':3}]
>>> {x['date']:x['value'] for x in lis}
{1: 5, 2: 3} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T11:37:22.093

对于 Python 2：

```
>>> lis = [{'date': 1, 'value':5}, {'date':2,'value':3}]
>>> result = dict((x['date'], x['value']) for x in lis)
{1: 5, 2: 3} 
```

对于 Python 3：

见阿什维尼的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:47:30.957

您也可以这样做：以下 Python 代码将提取字典值：

```
dict(map(lambda L: L.values(), lst)) 
```

# c# - 无法将 double 隐式转换为字符串错误

> ID：11206438
> 
> 赞同：0
> 
> 时间：2012-06-26T11:33:49.133
> 
> 标签：c#, .net

我有一个有几个标题的 Excel 表。标头之一是 Param2。在我的代码中，分配给 Param2 的变量是 strParam2。这就是我的代码中声明 strParam2 的方式

```
 String strParam2 = xlRange.Cells[row, 7].Value; 
```

我的代码理想地读取 excel 工作表中的单元格并执行一组操作。我在 Excel 表的 Param2 下的单元格中给出了 2 的值。为了将其转换为字符串，我使用了该行

```
System.Int32.TryParse(strParam2.ToString(), out iDetailLevel); 
```

但是，我收到一个错误“无法隐式地将双精度转换为字符串”我也尝试了这一行，但是我再次收到错误。

```
System.Double.TryParse(strParam2.ToString(), out iDetailLevel); 
```

这里有什么问题？以前有没有人经历过类似的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T11:38:15.500

最有可能的是，您在分配给的行上遇到错误，`strParam2`因为`xlRange.Cells[row, 7].Value`返回 a `double`，它不能隐式转换为`string`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T11:41:46.840

看起来该特定单元格的值是双精度值，您的代码正试图`implicitly convert`通过`=`. 您需要检查单元格的值并进行相应的转换

`String strParam2 = xlRange.Cells[row, 7].Value;`

将会：

`String strParam2 = xlRange.Cells[row, 7].Value.ToString();`

如您所说，如果`strParam2`在代码中的其他地方使用，则只需创建一个新字符串来保存标题文本并保持不变：

`string headerText = xlRange.Cells[row, 7].Value.ToString();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:49:47.640

如果你有这条线：

```
String strParam2 = xlRange.Cells[row, 7].Value.ToString(); 
```

正如杜安建议的那样。您不需要在解析中包含 .ToString() 。只需使用 strParam2 值。

# asp.net - 如何在 asp.net 中动态创建表单

> ID：11206442
> 
> 赞同：1
> 
> 时间：2012-06-26T11:34:04.663
> 
> 标签：asp.net

我需要像下面的 html 一样动态创建表单

```
 <form action='http://www.example.com' method='POST' name=''>
<input type='HIDDEN' name='' value=''>
<input type='HIDDEN' name='Username' value=''>
<input type='HIDDEN' name='password' value=''>                          
<input type='SUBMIT' value='Go'>
    </form> 
```

到表单一旦创建此表单，它应该会自动在 asp.net 中的页面加载时发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:47:29.430

这实际上不能在 PageLoad 上发布。渲染 html 页面后，您只能使用 javascript 自动发布它。

本文有一个源代码，介绍如何在asp.net上动态创建此表单并自动发帖。完全按照您的要求完成。

[http://www.codeproject.com/Articles/37539/Redirect-and-POST-in-ASP-NET](http://www.codeproject.com/Articles/37539/Redirect-and-POST-in-ASP-NET)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:47:18.940

从@Aristos 之前的回答中，我检查了链接，我也学到了。你可以检查一下

您还可以在页面加载时使用 javascript 发布表单

```
...your forms tags here

<script type="text/javascript">

   document.forms['form_name'].submit();

</script>
</body>
</html> 
```

只需确保脚本是 DOM 中的最后一个元素或使用 jQuery

```
$(document).ready(function()
   {
     document.forms['form_name'].submit();
   }
); 
```

# javascript - 如何检查变量是否包含中文/日文字符？

> ID：11206443
> 
> 赞同：8
> 
> 时间：2012-06-26T11:34:07.870
> 
> 标签：javascript, jquery, html

如何检查变量是否包含中文或日文字符？我知道这条线有效：

```
if (document.body.innerText.match(/[\u3400-\u9FBF]/)) 
```

我需要做的不是文档而是单个变量。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T11:39:22.473

`.match`是一个字符串方法。您可以将其应用于任何包含字符串的内容。而且，当然，对于任意变量。

如果您有一些不是字符串的东西，大多数对象都会定义`.toString()`将其内容转换为某种合理的字符串化形式的方法。当您从页面检索选择时，您将获得选择对象。将其转换为字符串，然后`match`在其上使用：`sel.toString().match(...)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:38:48.407

afaik 你可以用一个变量来做同样的事情......`document.body.innerText`只返回正文的文本。因此你可以做

```
myvar.match(...) 
```

这是一个例子：[http ://snipplr.com/view/15357/](http://snipplr.com/view/15357/)

# data-structures - 我的应用程序的最佳链接列表或 BST 是什么

> ID：11206449
> 
> 赞同：0
> 
> 时间：2012-06-26T11:34:32.963
> 
> 标签：data-structures, tree, linked-list, binary-search-tree

我的任务是开发一个电子电话簿，我必须在其中存储公司员工的姓名和电话号码。您可用的数据结构是链表和二叉搜索树 (BST)，我必须为我的项目选择最受支持的数据结构。此外，在选择任何数据结构时，还必须考虑插入、删除和搜索操作，因为公司可以雇佣一些新员工，搜索一个员工的电话号码，一些老员工也可以离开这个公司。讨论您认为哪种数据结构更适合上述场景。还要讨论为什么您更喜欢这种数据结构而不是其他的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:46:13.550

BST会更好。因为...

1.  在 BST 中搜索电话簿中最常用的功能比在链表中更快。

2.  在平均情况下，插入需要 O(log n) 时间。在链表的情况下，如果要插入一个新节点，找到正确的位置需要 O(n) 时间，这再次比 BST 慢。

3.  删除：最坏的情况是它需要的时间与树的高度成正比。但是在链表的情况下需要恒定的订购时间。（这是链表更好的唯一情况。）

因此，平均链表更好。

PS：我假设您想以排序方式存储电话簿。

# c# - 返回 来自方法的值

> ID：11206452
> 
> 赞同：1
> 
> 时间：2012-06-26T11:34:38.320
> 
> 标签：c#, asp.net, entity-framework

我需要从我的桌子上为特定患者获取所有预约，为此我尝试过，

```
public List<Appoinment> GetAppoinments()         //here Appointment is a class.
    {
        List<Appoinment> appointments = null;

        foreach (DataObject.Appointment appointment in
                   dataEntities.Appointments.Where(a => a.PATIENTID == PatientId))
        {

        }

        return appointments;
    } 
```

在我的约会类和表中，我有像 PatientId、医生、约会日期这样的字段，

在这里，在我尝试过的 foreach 循环中，

```
appointments.add(appointment); 
```

它的thorwing错误，它不能自动从数据库表约会转换为类约会，对吧。

我不知道如何做到这一点，任何人都可以在这里帮助我，提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T11:39:36.073

```
public List<Appointment> GetAppointments()      
{
    return dataEntities.Appointments
                       .Where(a => a.PATIENTID == PatientId)
                       .Select(a => new OtherNamespace.Appointment 
                                    {
                                        Id = a.Id,
                                        Name = a.Name,
                                        // etc.
                                    })
                       .ToList();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:40:53.957

您将 Data.Appointment 转换为 Your.Appointment。

你可以做这样的事情。

```
My.Appoint resultAppointment = new My.Appointment();
resultAppointment.Id = dataAppointment.Id 
```

但更好的方法是对数据点进行投影。生成的 sql 查询将只获取必要的字段

```
public List<Appoinment> GetAppoinments()         //here Appointment is a class.
    {
        return dataEntities.Appointments.Where(a => a.PATIENTID == PatientId))
                                        .Select(a => new Appointment() { Prop1 = a.Prop1})
                                        .ToList();

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T11:43:32.753

我同意上面的解决方案....但是，如果您必须经常编写这种映射代码...即将一个对象的属性复制到另一个对象的代码，那么您可以考虑使用 Automapper

[https://github.com/AutoMapper/AutoMapper](https://github.com/AutoMapper/AutoMapper)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T11:39:43.937

您可以执行以下操作：

```
dataEntities.Appointments.Where(a => a.PATIENTID == PatientId)
  .Select (new Appoinment { ... set values from DB element }); 
```

# css - CSS 边框交汇点

> ID：11206455
> 
> 赞同：9
> 
> 时间：2012-06-26T11:34:44.670
> 
> 标签：css, border

我希望有人可以帮助我解决css问题...

我正在使用列表视图来显示一些结果，需要有一个分组的概念，为了实现这一点，我在组之间交替使用 2 种背景颜色。我正在尝试为这些元素添加边框，但是由于顶部边框和左侧边框可能是不同的颜色，有没有办法删除它们相遇的三角形？

```
 <!DOCTYPE html>
 <html>
 <head>
 <style type="text/css">
 p
 {
 border-top:10px solid red;
 border-left:10px solid white;
 border-bottom-style:dotted;
 border-left-style:solid;
 }
 </style>
 </head>

 <body>
 <p>2 different border styles.</p>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-26T11:46:23.993

你可以这样写：

```
p{
    width:200px;
    height:200px;
    background:red;
    border-left:5px solid pink;
    -moz-box-shadow:inset 0 5px green;
    box-shadow:inset 0 5px green;
} 
```

检查这个[http://jsfiddle.net/nRWux/1/](http://jsfiddle.net/nRWux/1/)

box-shaow 在 IE8 及以下版本中不起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T11:59:41.413

这是使用 :before 与 IE8+ 兼容的解决方案`pseudo`：

小提琴[http://jsfiddle.net/PhilippeVay/hXrW5/](http://jsfiddle.net/PhilippeVay/hXrW5/)

```
 <!DOCTYPE html>
 <html>
 <head>
 <style type="text/css">
 p {
     position: relative;
     border-top:10px solid red;
     border-bottom-style:dotted;
     border-left-style:none;
 }
 p:before {
     content: '';
     display: block;
     width: 10px;
     position: absolute;
     top: -10px; /* top: 0; if you want red over blue (top over left) */
     bottom: 0;
     background: blue;
 }
 </style>
 </head>

 <body>
 <p>2 different border styles.</p>
 </body>
 </html> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T11:57:27.060

您可以使用 box-shadow 作为边框顶部，

在您的示例中：http: [//jsfiddle.net/C7jnJ/](http://jsfiddle.net/C7jnJ/)

```
margin-top:10px;
box-shadow:0 -10px 0 10px red; 
```

而不是边框​​顶部。添加边距顶部是因为阴影显示在“p”之外，如果您希望它在里面，那么它将是：http: [//jsfiddle.net/C7jnJ/1/](http://jsfiddle.net/C7jnJ/1/)

```
box-shadow:inset 0px 10px 0px red; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T11:44:34.400

不，不可能删除它们相遇的三角形。边界是这样实现的，没有办法解决。

# jquery - jQuery {} 数组我如何引用/编辑/更新/删除等

> ID：11206457
> 
> 赞同：2
> 
> 时间：2012-06-26T11:34:52.900
> 
> 标签：jquery, arrays, edit

考虑以下：

```
 var service_call_array = { 
     3 : 'test',
     4 : 'more of a test eh?',
     5 : 'more info required'
 }; 
```

我可以循环遍历它

```
$(function() { 
   $.each(service_call_array, function(key, value) {
        alert(key + ':' +value);
   }
}); 
```

但原则上，我将如何添加第四项键：值，如何通过键更新或编辑或更改值（例如键：4）如何通过引用键来删除，以及如何引用元素值没有循环的关键？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T11:43:40.160

首先，这是一个对象——而不是一个数组。数组只能具有数字索引并具有特殊语义，例如`.length`属性。现在，回答你的问题。

您所拥有的是一个普通的旧 JavaScript 对象，并且您正在为其分配属性。[MDN 有一个关于它们的完整页面。](https://developer.mozilla.org/en/JavaScript/Guide/Working_with_Objects)这是一个摘要：

# 访问属性

使用`o.key`or`o["key"]`语法，例如：

```
var object = {
    foo: "bar"
};
alert(object.foo); // displays "bar" 
```

将对象用作查找表时，该`o["key"]`语法特别方便，例如：

```
var translate = {
    "hello": "bonjour",
    "goodbye": "au revoir"
};
var word = "hello"; // received through some kind of user input
alert(translate[word]); // displays "bonjour" 
```

# 设置属性

类似于访问属性，但现在您将它们放在分配的左侧。属性是否已经存在并不重要，它会在必要时创建。

```
var object = {};
object.foo = "bar";
alert(object.foo); // still "bar" 
```

# 删除属性

使用`delete`语句。

```
var object = {
    foo: "bar"
}
alert(object.foo); // displays "bar"
delete object.foo;
alert(object.foo); // displays "undefined"
alert(object.foo === undefined); // displays true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:38:00.370

首先，如果你要用数字索引，不要使用 object `{}`，使用 array `[]`。

其次，您**添加**这样的新项目：

```
var obj = {};
obj.newItem = 'newItem';        // You can use the dot syntax when your member
                                // name is a valid identifier.
obj['new Item 2'] = 'newItem2'; // Or, you can use the bracket notation if it 
                                // isn't.

var arr = [];
arr[0] = 'firstItem';           // Use the bracket syntax.
arr[42] = 'anotherItem';        // The indices don't have to be contiguous. 
```

要**访问**或**更新**值，您将使用类似的语法。所有值都是动态的，因此无论您是第一次添加它们还是更新它们，它在语法上都是相同的：

```
var a = obj.newItem;            // Access with dot syntax
var b = obj['new Item 2'];      // Access with bracket syntax

obj.newItem = 'updatedValue'    // Update with new value using dot syntax
obj['new Item 2'] = 42          // Update with new value using bracket syntax
                                // Note that the type of the value doesn't have
                                // to remain the same. 
```

要实际**删除**一个值，请使用`delete`关键字：

```
delete obj.newItem;             // Now, obj.newItem is undefined again. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T11:40:21.803

您可以通过调用获得参考，`service_call_array.key`然后您可以对其进行更新或做任何您想做的事情。

添加：

```
service_call_array.key = 'newValue';
service_call_array[key] =  'newValue'; 
```

删除：

```
delete service_call_array.key;
delete service_call_array[key]; 
```

# jquery - 如何检索在.jspf文件中对Js数组进行的jquery ajax调用中使用Gson创建的json对象数据

> ID：11206459
> 
> 赞同：1
> 
> 时间：2012-06-26T11:35:06.003
> 
> 标签：jquery, gson

我有一个 ArrayList 将 Hashmap 对象作为行详细信息，其中每个 HashMap 是放在 ArrayList.ie 中的行

```
ArrayList <HashMap> alData = new ArrayList <HashMap> (); 
```

我在 ArrayList 中有行，我已经转换为通过 jquery ajax 调用触发的 json 对象，转换是使用 Gson 完成的，如下所示。

```
Type listOfObject = new TypeToken< ArrayList <HashMap> >(){}.getType();
String sGson = new Gson().toJson(alData,listOfObject); 
```

请帮助我在客户端使用 jquery ajax 调用从 json 对象中检索数据

```
$.ajax({    type: "POST",   
    url: "/app1/servlet/Controller?handler=28&obid= " +  sbId  ,  
        data: "namedQuery=reports&queryParam=" + sbId, success: function (data) 
        { 
             Please help me retrieve the data from the 
             Gson object to convert to an Javascript array.
        },
            error: function(jqXHR, textStatus, errorThrown){ 
                alert(textStatus + " | " + errorThrown);
            },

       dataType: 'json' 
}); 
```

谢谢

# php - 传文件上传jquery和ajax

> ID：11206461
> 
> 赞同：0
> 
> 时间：2012-06-26T11:35:10.833
> 
> 标签：php

我正在尝试使用 php 使用 ajax 上传文件 Jquery。如果我传递 Jquery 数据我无法检索文件上传数据如何将 jquery 文件上传数据传递给 ajax。请一些帮助我如何通过 jquery ajax 和 php 上传文件..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:06:38.133

您不能 AJAX 上传。

它基本上是一个假的 AJAX，使它看起来像是 AJAX 上传。

实际上发生的情况是上传表单被赋予`target`了附近的 iframe。这使它看起来像是 AJAX 上传，而实际上并非如此。

iframe 通常在其大小范围内被赋予一个 JS 函数，该函数在父窗口中触发一个函数，该函数显示某种消息“谢谢您的上传”。

当然，这只是真正的基本功能，您需要谷歌搜索更多示例，幸运的是那里有很多。

# c# - 正则表达式匹配 c# 花括号行

> ID：11206466
> 
> 赞同：0
> 
> 时间：2012-06-26T11:35:24.180
> 
> 标签：c#, regex

我正在寻找正则表达式来匹配任何具有打开或关闭花括号的字符串。只有当括号内除了空格、制表符等 (\s) 之外还有另一个字符时，它才应该匹配 - 即使字符串中有另一个括号。

基本上，这是静态代码分析器的一部分，女巫应该检查括号是否在新的空白行（样式指南）。如果字符串中有任何其他字符，它应该匹配。

我得到了这个`^[\S]*({|})[\S]*$`。但它也匹配`{`，因为`*`. 我正在使用 C#。

例子：

匹配：`{ lala`, `lala{`, `asdf{asdf`,`{}`

不匹配：`{`, `{`, `}`, `TAB { TAB`,`asdf`

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:08:24.840

这不是很好，但这可能有效：

```
^([\S]+[{}])|([\S]+[{}][\S]+)|([{}][\S]+)$ 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:10:24.793

正则表达式`^(?=.*[{}])\S*$`将匹配包含至少一个花括号的字符串，并且这样的字符串不会有任何空白字符。

* * *

***更新：***

根据您的评论，您可能正在寻找此正则表达式：`.*{(?:\s*[^\s}]+}?|})`

# jquery - 在 DOM 树中查找相同的 div

> ID：11206475
> 
> 赞同：1
> 
> 时间：2012-06-26T11:35:48.990
> 
> 标签：jquery

我有一个 DOM 树：

```
<div id="all">
  <div id="second">
    <div id="target"></div> *
    <div id="somediv"></div>
  </div>
  <div id="second">
    <div id="target"></div>
    <div id="somediv"></div>
  </div>
  <div id="second">
    <div id="target"></div>
    <div id="somediv"></div>
  </div>
</div> 
```

如何获取所有 id="target" 的 div？

`$('#second').siblings().andSelf().children(':first')` - 仅显示第一个目标 (*)，忽略其余目标。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T11:38:12.260

HTML 文档中不能有多个具有相同 ID 的 div。相反，请使用 class="target"。然后你可以得到所有带有类目标的div

```
$("#all .target") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:37:57.157

尝试以下操作：

```
$('div[id=second]').siblings().andSelf().children(':first') 
```

当出现 id 选择器时，jQuery 将只返回具有该 id 的第一个元素。这是因为具有相同 id 的元素是*无效的 HTML*。HTML 解析器通常很灵活，可能会在大多数浏览器中正常显示，但不能保证一定是这样。考虑更改您的标记以使用`data-`属性或 CSS 类或类似的而不是 ID。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T11:38:46.697

您不能在 HTML 中重复 ID .. 替换`id="target"`为`class="target"`然后 -

```
$('#all').find('.target'); 
```

# jsf-2 - 什么时候应该使用 h:link 而不是 h:commandLink？

> ID：11206482
> 
> 赞同：6
> 
> 时间：2012-06-26T11:36:33.007
> 
> 标签：jsf-2

如果我有一个想要链接到的 JSF 页面，我不需要与该页面进行任何通信，并且不需要对我链接的页面执行任何验证，我是否应该始终使用 h:link ?

不使用 ah:commandLink（使用 immediate="true" 或 execute="@this"）会丢失任何东西吗？

在这种情况下， h:link 和 h:commandLink 之间有什么区别吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-26T12:01:08.730

将`h:link`触发一个完整的 GET 请求。只有 JSF 生命周期阶段 1（恢复视图）和 6（呈现响应）将被调用。没有转换，没有验证，没有行动。

因此`immediate="true"`并且`execute="@this"`不会起作用（它们根本不可用`h:link`）。

如果需要在服务器上处理输入数据，则`h:link`用于纯页面导航和（触发 POST 请求）。`h:commandLink`

*附录：*

根据 BalusC 的评论，如果目标页面包含`f:viewParam`s，则不会跳过 GET 请求的生命周期阶段 2 到 5。

# php - 确保 PHP 变量是数组的最佳方法

> ID：11206483
> 
> 赞同：1
> 
> 时间：2012-06-26T11:36:52.750
> 
> 标签：php, arrays, php-5.3

我有一个 javascript 客户端将参数传递给服务器函数（我正在使用 ExtJS Direct）。有时客户端发送一个对象，有时它发送一个对象数组。

目前我正在使用这个 EnsureArray 函数来确保参数是一个数组，然后我这样做`foreach`：

```
// Wraps a non array variable with an array.
function EnsureArray( &$aVar )
{
    if ( !is_array( $aVar ) )
        $var = array( $aVar );
}

function Destroy( $aRecords )
{
    // $aRecords might be a single object or an array of objects. Ensure it's wrapped as an array.        
    $this->EnsureArray( $aRecords );

    foreach ( $aRecords as $aRecord )
    {
        sql( "UPDATE Groups SET deleted = true WHERE id = $aRecord->id LIMIT 1" );
    }        

    return array(
        'success' => true,
    );
} 
```

有没有一种技巧，更简洁的方法，一条线可以做到这一点？

**编辑：**自从发布这个问题以来，我发现 ExtJS 可以[选择](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.writer.Json-cfg-allowSingle)发送包含在数组中的所有记录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T13:33:21.527

您可以尝试以下操作，而不是函数：

```
$aRecords = is_array($aRecords) ? $aRecords : array($aRecords); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:39:18.683

这可能是最好的方式，如果你不打算强制你总是被发送一个数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-04T01:22:45.973

只需将变量类型转换为数组：

```
function Destroy( $aRecords )
{
    foreach ( (array)$aRecords as $aRecord )
    {
        sql( "UPDATE Groups SET deleted = true WHERE id = $aRecord->id LIMIT 1" );
    }        

    return array(
       'success' => true,
    );
} 
```

见[http://php.net/manual/en/language.types.type-juggling.php](http://php.net/manual/en/language.types.type-juggling.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T13:44:07.433

我将使该函数`Destroy`需要数组作为其参数：

```
function Destroy(array $aRecords) { ... } 
```

然后客户端也应该总是发送数组。如果由于某种原因这是不可能的，那么从客户端接收（非）数组并将其传递给的代码`Destroy()`需要负责将其作为数组传递，因为它是 (不合规）客户端和标准化功能。

对于客户端可以调用的每个可能的操作，可能会有一个端点，因此您甚至不需要弄清楚数据是否是数组，您只需知道。IE：

```
// someaction.php

include 'destroy.php';
$data = json_decode($_POST['data']);
Destroy($data); 
```

但：

```
// anotheraction.php

include 'destroy.php';
$data = json_decode($_POST['data']);
Destroy(array($data)); 
```

如果客户端不规则地向同一操作发送不同的格式，请修复客户端。

# css - CSS：在没有按预期工作之前

> ID：11206484
> 
> 赞同：1
> 
> 时间：2012-06-26T11:36:56.753
> 
> 标签：css

我有一个“之前”元素，在菜单项之前显示 >。

您可以在以下位置看到它：http: [//jsfiddle.net/EaTz7/](http://jsfiddle.net/EaTz7/)

现在我希望创建的是 > 显示在悬停**和**访问时，而不是未访问时

唯一的问题是，

```
li a:visited:before
{
    content: ">";
    color: #b2c900;
} 
```

没有做它应该做的事情。

悬停元素确实可以正常工作。我究竟做错了什么？或者这个功能只是没有实现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T11:45:54.823

你的代码是正确的。这是问题所在-> [http://hacks.mozilla.org/2010/03/privacy-related-changes-coming-to-css-vistited/](http://hacks.mozilla.org/2010/03/privacy-related-changes-coming-to-css-vistited/)

由于隐私相关问题（如果访问的链接具有这种外观，那么我可以知道用户访问了该站点）浏览器限制了您可以设置已访问链接的样式的数量。

# facebook - 阿帕奇安全

> ID：11206485
> 
> 赞同：1
> 
> 时间：2012-06-26T11:36:58.217
> 
> 标签：facebook, apache, security, debugging

我需要使用 facebook 应用程序，但我的网页返回响应 206 而不是 200，因此 facebook 应用程序返回 http 代码 500。

我用[http://developers.facebook.com/tools/debug/og/object?q=http://adserver.leadhouse.net/test/test/index.php](http://developers.facebook.com/tools/debug/og/object?q=http://adserver.leadhouse.net/test/test/index.php)测试并返回 206 而不是 joomla.it 返回 200 时它们是相同的 curl -I 响应数据

我使用这个 perl 脚本进行了测试：http: [//pastebin.com/NCDv9eTh](http://pastebin.com/NCDv9eTh) 并且我的页面很容易受到攻击，而 joomla.it 很好。

我认为我的答案在 [Facebook 调试器之间非常接近：Response 206](https://stackoverflow.com/questions/9807771/facebook-debugger-response-206) and [Apache Webserver security and optimization Tips](https://stackoverflow.com/questions/171237/apache-webserver-security-and-optimization-tips)

但我不明白如何更改我的 apache 配置。解决方案在此页面中： www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35.2 具有类似代码：

```
 SetEnvIf Range (,.*?){5,} bad-range=1
    RequestHeader unset Range env=bad-range 
```

或 httpd.apache.org/docs/2.2/mod/core.html#limitrequestfieldsize

我怎样才能使它不那么容易受到我的网页的攻击？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:05:11.090

我不知道您在这里谈论的是哪种“漏洞”。

Facebook 调试器显示响应状态代码 206 是*正常*的 - 因为调试器尝试仅从您的 URL 请求前*x* (K) 字节。如果您的服务器接受此类范围请求并正确回答它们，则响应代码将为 206。

这没有*漏洞*。**_**

 *如果这导致您的网站出现任何*其他*问题，请以易于理解的方式描述它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T20:43:55.647

是的，一切都是从调试 facebook 开始的：对话框发送返回 500 http 代码，而我的页面返回 206 http 代码。当我测试 perl 脚本[http://pastebin.com/NCDv9eTh时，我的好奇心集中在 http 代码 206 的 DoS 漏洞上](http://pastebin.com/NCDv9eTh)

我报告了一些关于 apache 文档的重要短语：

> 此漏洞涉及“拒绝服务”攻击。这意味着远程攻击者在适当的情况下能够将您的服务或服务器减慢到爬行或耗尽可用于服务请求的内存，使其无法及时为合法客户端提供服务。
> 
> 没有迹象表明这会导致远程攻击；第三方可能会危及您的安全并获得服务器本身的立足点。此漏洞的结果纯粹是通过使您的服务器停止运行并拒绝与服务器的其他连接来拒绝服务。

因此`LimitRequestFieldSize`解决方法不够，您可以修改有关 apache wiki 文档的`Range`参数咨询`Mitigation`段落：[http](http://wiki.apache.org/httpd/CVE-2011-3192) ://wiki.apache.org/httpd/CVE-2011-3192 您获得返回 http 代码之间的切换：从 206 到 200。您最好使用 apache配置，但您仍然面临 DoS 漏洞。

我添加`mod_headers`了这一行：

```
RequestHeader unset Range 
```

现在我的页面返回 http 代码 200。为了限制可用于服务请求的耗尽内存，我限制`mod_limitipconn`使用此代码添加的 ip 连接：

```
MaxConnPerIP 10 
```*

# android - 具有多个数组的复杂 Json 解析

> ID：11206486
> 
> 赞同：-1
> 
> 时间：2012-06-26T11:36:58.787
> 
> 标签：android, json, web-services, parsing, soap

如何解析我从 .asmx-webservice 获得的 _json。我得到了 SOAP 响应，现在我想解析这个响应并获取列表视图中的项目

这是我的主要活动

**MainActivity.java**

```
package com.Parsing.SOAPParsing;

import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONObject;
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import android.app.ListActivity;
import android.os.Bundle;
import android.widget.ListAdapter;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class MainActivity extends ListActivity {

    private static final String SOAP_ACTION = "http://tempuri.org/GetMyTest";

    private static final String METHOD_NAME = "GetMyTest";

    private static final String NAMESPACE = "http://tempuri.org/";
    private static final String URL = "http://www.beyyondcareers.com/webservice.asmx";

    TextView tv;
    ArrayList<HashMap<String, String>> testList = new ArrayList<HashMap<String, String>>();

    private String result;

    private JSONArray JSONArr;

    private static final String TAG_TEST_ID = "TestId";
    private static final String TAG_ORG_ID = "OrgId";
    private static final String TAG_TEST_TYPE = "TestType";
    private static final String TAG_TEST_NAME = "TestName";
    private static final String TAG_NO_OF_SECTION = "NoOfSection";
    private static final String TAG_TEST_TIME = "TestTime";
    private static final String TAG_TEST_SCORE = "TestScore";
    private static final String TAG_DIRECTION = "Direction";
    private static final String TAG_DISPLAY = "Display";
    private static final String TAG_CREATE_ON = "CreateOn";
    private static final String TAG_CREATED_BY = "CreatedBy";
    private static final String TAG_SHOW_CALCULATOR = "ShowCalculator";
    private static final String TAG_COURSE_ID = "CourseId";
    private static final String TAG_STANDARD_ID = "StandardId";
    private static final String TAG_SUBJECT_ID = "SubjectId";
    private static final String TAG_IS_CONCEPTE_BUILDER = "IsConceptBuilder";
    private static final String TAG_CATEGORY = "TestCategory";
    private static final String TAG_TEST_TYPE_ONE = "testTyp";
    private static final String TAG_STUDENT_ID = "StudentId";
    private static final String TAG_REF_ID = "ReferenceId";
    private static final String TAG_REF_TYPE = "ReferenceType";
    private static final String TAG_GROUP_ID = "GroupId";
    private static final String TAG_DATE_ALLOCATION = "DateOfAllocation";
    private static final String TAG_ATTENDED = "Attended";
    private static final String TAG_ATTENDED_ON = "AttendedOn";
    private static final String TAG_ATTENDED_NO_OF_TIME = "AttendedNoOfTime";
    private static final String TAG_STUDENT_TYPE = "StudentType";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        tv = (TextView) findViewById(R.id.textview);

        try {

            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
            request.addProperty("StudentId", 10);

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);
            envelope.dotNet = true;
            envelope.setOutputSoapObject(request);

            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

            androidHttpTransport.call(SOAP_ACTION, envelope);
            SoapPrimitive response = (SoapPrimitive) envelope.getResponse();
            result = response.toString();
            // JSONObject json = new JSONObject(response.toString());
            // JSONArray jArray = json.getJSONArray("Test0");
            JSONArr = new JSONArray(result);

            for (int i = 0; i < JSONArr.length(); i++) {
                JSONObject c = JSONArr.getJSONObject(i);

                String testid = c.getString(TAG_TEST_ID);
                String orgid = c.getString(TAG_ORG_ID);
                String testtype = c.getString(TAG_TEST_TYPE);
                String testname = c.getString(TAG_TEST_NAME);
                String noofsection = c.getString(TAG_NO_OF_SECTION);
                String testtime = c.getString(TAG_TEST_TIME);
                String testscore = c.getString(TAG_TEST_SCORE);
                String direction = c.getString(TAG_DIRECTION);
                String display = c.getString(TAG_DISPLAY);
                String createdon = c.getString(TAG_CREATE_ON);
                String createdby = c.getString(TAG_CREATED_BY);
                String showcalc = c.getString(TAG_SHOW_CALCULATOR);
                String courseid = c.getString(TAG_COURSE_ID);
                String standardid = c.getString(TAG_STANDARD_ID);
                String subjectid = c.getString(TAG_SUBJECT_ID);
                String isconceptbuilder = c.getString(TAG_IS_CONCEPTE_BUILDER);
                String testcatag = c.getString(TAG_CATEGORY);
                String testtyp = c.getString(TAG_TEST_TYPE_ONE);
                String studendid = c.getString(TAG_STUDENT_ID);
                String refid = c.getString(TAG_REF_ID);
                String reftype = c.getString(TAG_REF_TYPE);
                String groupid = c.getString(TAG_GROUP_ID);
                String dateofallocation = c.getString(TAG_DATE_ALLOCATION);
                String attended = c.getString(TAG_ATTENDED);
                String attendedon = c.getString(TAG_ATTENDED_ON);
                String attendednooftime = c.getString(TAG_ATTENDED_NO_OF_TIME);
                String studenttype = c.getString(TAG_STUDENT_TYPE);

                HashMap<String, String> map = new HashMap<String, String>();

                map.put(TAG_TEST_ID, testid);
                map.put(TAG_TEST_TYPE, testtype);
                map.put(TAG_TEST_NAME, testname);

                testList.add(map);
            }
        } catch (Exception e) {
            tv.setText(e.getMessage());
        }

        ListAdapter adapter = new SimpleAdapter(this, testList,
                R.layout.list_item, new String[] { TAG_TEST_ID, TAG_TEST_TYPE,
                        TAG_TEST_NAME }, new int[] { R.id.testid, R.id.type,
                        R.id.testname });

        setListAdapter(adapter);
    }

}

callsoap.java

package com.Parsing.SOAPParsing;

import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONObject;
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import android.app.ListActivity;
import android.os.Bundle;
import android.widget.ListAdapter;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class MainActivity extends ListActivity {

    private static final String SOAP_ACTION = "http://tempuri.org/GetMyTest";

    private static final String METHOD_NAME = "GetMyTest";

    private static final String NAMESPACE = "http://tempuri.org/";
    private static final String URL = "http://www.beyyondcareers.com/webservice.asmx";

    TextView tv;
    ArrayList<HashMap<String, String>> testList = new ArrayList<HashMap<String, String>>();

    private String result;

    private JSONArray JSONArr;

    private static final String TAG_TEST_ID = "TestId";
    private static final String TAG_ORG_ID = "OrgId";
    private static final String TAG_TEST_TYPE = "TestType";
    private static final String TAG_TEST_NAME = "TestName";
    private static final String TAG_NO_OF_SECTION = "NoOfSection";
    private static final String TAG_TEST_TIME = "TestTime";
    private static final String TAG_TEST_SCORE = "TestScore";
    private static final String TAG_DIRECTION = "Direction";
    private static final String TAG_DISPLAY = "Display";
    private static final String TAG_CREATE_ON = "CreateOn";
    private static final String TAG_CREATED_BY = "CreatedBy";
    private static final String TAG_SHOW_CALCULATOR = "ShowCalculator";
    private static final String TAG_COURSE_ID = "CourseId";
    private static final String TAG_STANDARD_ID = "StandardId";
    private static final String TAG_SUBJECT_ID = "SubjectId";
    private static final String TAG_IS_CONCEPTE_BUILDER = "IsConceptBuilder";
    private static final String TAG_CATEGORY = "TestCategory";
    private static final String TAG_TEST_TYPE_ONE = "testTyp";
    private static final String TAG_STUDENT_ID = "StudentId";
    private static final String TAG_REF_ID = "ReferenceId";
    private static final String TAG_REF_TYPE = "ReferenceType";
    private static final String TAG_GROUP_ID = "GroupId";
    private static final String TAG_DATE_ALLOCATION = "DateOfAllocation";
    private static final String TAG_ATTENDED = "Attended";
    private static final String TAG_ATTENDED_ON = "AttendedOn";
    private static final String TAG_ATTENDED_NO_OF_TIME = "AttendedNoOfTime";
    private static final String TAG_STUDENT_TYPE = "StudentType";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        tv = (TextView) findViewById(R.id.textview);

        try {

            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
            request.addProperty("StudentId", 10);

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);
            envelope.dotNet = true;
            envelope.setOutputSoapObject(request);

            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

            androidHttpTransport.call(SOAP_ACTION, envelope);
            SoapPrimitive response = (SoapPrimitive) envelope.getResponse();
            result = response.toString();
            // JSONObject json = new JSONObject(response.toString());
            // JSONArray jArray = json.getJSONArray("Test0");
            JSONArr = new JSONArray(result);

            for (int i = 0; i < JSONArr.length(); i++) {
                JSONObject c = JSONArr.getJSONObject(i);

                String testid = c.getString(TAG_TEST_ID);
                String orgid = c.getString(TAG_ORG_ID);
                String testtype = c.getString(TAG_TEST_TYPE);
                String testname = c.getString(TAG_TEST_NAME);
                String noofsection = c.getString(TAG_NO_OF_SECTION);
                String testtime = c.getString(TAG_TEST_TIME);
                String testscore = c.getString(TAG_TEST_SCORE);
                String direction = c.getString(TAG_DIRECTION);
                String display = c.getString(TAG_DISPLAY);
                String createdon = c.getString(TAG_CREATE_ON);
                String createdby = c.getString(TAG_CREATED_BY);
                String showcalc = c.getString(TAG_SHOW_CALCULATOR);
                String courseid = c.getString(TAG_COURSE_ID);
                String standardid = c.getString(TAG_STANDARD_ID);
                String subjectid = c.getString(TAG_SUBJECT_ID);
                String isconceptbuilder = c.getString(TAG_IS_CONCEPTE_BUILDER);
                String testcatag = c.getString(TAG_CATEGORY);
                String testtyp = c.getString(TAG_TEST_TYPE_ONE);
                String studendid = c.getString(TAG_STUDENT_ID);
                String refid = c.getString(TAG_REF_ID);
                String reftype = c.getString(TAG_REF_TYPE);
                String groupid = c.getString(TAG_GROUP_ID);
                String dateofallocation = c.getString(TAG_DATE_ALLOCATION);
                String attended = c.getString(TAG_ATTENDED);
                String attendedon = c.getString(TAG_ATTENDED_ON);
                String attendednooftime = c.getString(TAG_ATTENDED_NO_OF_TIME);
                String studenttype = c.getString(TAG_STUDENT_TYPE);

                HashMap<String, String> map = new HashMap<String, String>();

                map.put(TAG_TEST_ID, testid);
                map.put(TAG_TEST_TYPE, testtype);
                map.put(TAG_TEST_NAME, testname);

                testList.add(map);
            }
        } catch (Exception e) {
            tv.setText(e.getMessage());
        }

        ListAdapter adapter = new SimpleAdapter(this, testList,
                R.layout.list_item, new String[] { TAG_TEST_ID, TAG_TEST_TYPE,
                        TAG_TEST_NAME }, new int[] { R.id.testid, R.id.type,
                        R.id.testname });

        setListAdapter(adapter);
    }

} 
```

从此我得到了json文件，但无法获取列表中的文件...请帮助我

提前致谢/

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-26T11:42:00.197

Google GSON 库将帮助您进行此解析

[http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

# python - 如何在 Python 中从当年打印明年

> ID：11206489
> 
> 赞同：43
> 
> 时间：2012-06-26T11:37:08.787
> 
> 标签：python, datetime

如果使用最简单的代码在 python 中给出当前年份，我如何打印下一年，可能使用 datetime 模块在一行中。

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-06-26T11:38:40.153

日期和日期时间对象都有一个`year`属性，它是一个数字。只需添加 1：

```
>>> from datetime import date
>>> print date.today().year + 1
2013 
```

如果变量中有当前年份，只需直接加 1，无需费心使用 datetime 模块：

```
>>> year = 2012
>>> print year + 1
2013 
```

如果您在字符串中有日期，只需选择代表年份的 4 位数字并将其传递给`int`：

```
>>> date = '2012-06-26'
>>> print int(date[:4]) + 1
2013 
```

年份算术非常简单，将其设为整数并加 1。没有比这更简单的了。

但是，如果您使用的是整个日期，并且您需要相同的日期但一年后，请使用组件创建一个新`date`对象，其中年份递增 1：

```
>>> today = date.today()
>>> print date(today.year + 1, today.month, today.day)
2013-06-26 
```

或者您可以使用该`.replace`函数，该函数返回您指定的字段已更改的副本：

```
>>> print today.replace(year=today.year + 1)
2013-06-26 
```

`today`请注意，当闰年的 2 月 29 日时，这可能会有点棘手。因此，绝对的、故障安全的正确方法是：

```
def nextyear(dt):
   try:
       return dt.replace(year=dt.year+1)
   except ValueError:
       # February 29th in a leap year
       # Add 365 days instead to arrive at March 1st
       return dt + timedelta(days=365) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-23T02:43:50.350

这是另一种简单的方法...

```
import datetime

x = datetime.datetime.now()

print(x.year+1) 
```

# iphone - 通过将非 ARC 文件添加到 ARC iPhone 应用程序的问题？

> ID：11206490
> 
> 赞同：0
> 
> 时间：2012-06-26T11:37:18.373
> 
> 标签：iphone, objective-c, ios5, xcode4.2, automatic-ref-counting

我将非应用程序中的添加`.h`和文件添加到iphone 应用程序。我在这些文件的构建阶段将 -fno-objc-arc 设置为编译器标志。但是当我在添加这些文件后尝试运行这个应用程序时，我遇到了一个问题。应用程序没有给出任何错误只是显示失败一次并停止构建过程。`.m``ARC``ARC`

我很困惑，并试图了解这是什么问题。我删除这些非`ARC`文件后，它运行正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:06:52.283

首先，您添加 .h 文件，但没有在其上设置任何编译标志 - 您对此的评论有点混乱 - 实际上您的问题和评论令人困惑。所以让我们尝试解决这个问题：

*   您将 .m 和 .h 添加到项目中 - 您可以在左窗格中看到它们
*   .m 文件被添加到所需目标的构建阶段，编译标志为 -fno-objc-arc

现在它变得棘手，因为你的问题是自相矛盾的：

1）您尝试构建并且构建失败。然后编辑您的帖子并提供错误消息。

2）构建成功，您运行了项目，但它以某种方式失败。问题是你没有告诉我们它是如何失败的。

因此，除了澄清您的问题之外，请注意，如果您将非 ARC 文件添加到项目中，该文件必须符合某些约定，您可以在 ARC 文档中阅读这些约定（两篇非常短的文章，一篇来自 Apple ，来自 llvm 的一个）。例如，如果您在该文件中有一个以“init”或“create”开头的方法，那么它返回的任何对象都必须保留而不是自动释放。

我个人已经在 ARC 项目中使用了非 ARC 文件一年了，没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:46:46.107

只需执行以下操作：

1.  重置您的模拟器。

    2\. 清除你的构建

在您的非 arc 文件内容中删除 release、retain、autoreleasepool 和 auto release。

构建并运行后。希望它会奏效。

# c# - 是否可以在 ac# 应用程序中从休眠/睡眠中检测系统唤醒状态？

> ID：11206491
> 
> 赞同：2
> 
> 时间：2012-06-26T11:37:21.657
> 
> 标签：c#

> **可能重复：**
> [检测电源状态变化](https://stackoverflow.com/questions/3948884/detect-power-state-change)

在我的 c# windows 窗体应用程序中，我想在系统从休眠/睡眠状态唤醒时重置一个计数器变量。是否有任何方法或事件可以检测到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T11:45:13.600

.NET Framework 提供了一个[PowerModeChanged](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.powermodechanged.aspx)事件，只要电源状态发生变化，例如用户挂起或恢复操作系统时，就会发生该事件。

# iphone - UIWebView 透明度破坏了我的代码

> ID：11206493
> 
> 赞同：0
> 
> 时间：2012-06-26T11:37:25.297
> 
> 标签：iphone, objective-c, ios, uiwebview

我将 a 的背景颜色设置`UIWebView`为 clearColor 并将`opaque`属性设置为 false。

在我的 html 文件中，我将背景设置为透明。但是由于某些奇怪的原因，我的 Web 视图无法正确解释我的 HTML 文件的正文，我看到了诸如此类的标签`<b><i>`。一旦我删除了 setBackgroundColor: 调用，事情就会恢复正常。这发生在 iOS 5 模拟器上。

```
 [self.aWebView loadData:someData MIMEType:nil textEncodingName:@"utf-8" baseURL:nil]; 
```

而aWebView的配置如下：

```
self.aWebView.backgroundColor = [UIColor clearColor];
self.aWebView.opaque = NO; 
```

# java - 按数值排序列表<>

> ID：11206495
> 
> 赞同：1
> 
> 时间：2012-06-26T11:37:30.330
> 
> 标签：java, android, list, sorting

我有一个`public List<FriendProfile> friends = new ArrayList<FriendProfile>();`. 我通过从服务器读取信息来初始化好友列表。FriendProfile 对象包含一个名为`private int userPosition;`

初始化朋友列表后，我想通过在列表的`userPosition`索引 0 处具有最高的 FriendProfile 对象对朋友列表进行排序，然后相应地排序，索引 1 具有第二高`userPosition`...

我想我可以编写一个排序算法，但我正在寻找预先编写的代码（也许 JDK 有一些方法可以提供？）

帮助表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T11:40:39.840

使用`Collections.sort()`并指定一个`Comparator`：

```
Collections.sort(friends,
                 new Comparator<FriendProfile>()
                 {
                     public int compare(FriendProfile o1,
                                        FriendProfile o2)
                     {
                         if (o1.getUserPosition() ==
                                 o2.getUserPosition())
                         {
                             return 0;
                         }
                         else if (o1.getUserPosition() <
                                      o2.getUserPosition())
                         {
                             return -1;
                         }
                         return 1;
                     }
                 }); 
```

或有`FriendProfile`实施`Comparable<FriendProfile>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:43:52.103

实现可比接口。

```
class FriendProfile implements Comparable<FriendProfile> {

    private int userPosition;

    @Override
    public int compareTo(FriendProfile o) {

        if(this.userPosition > o.userPosition){
            return 1;
        }
        return 0;
    }

} 
```

只需调用 Collection.sort(List) 方法。

```
 FriendProfile f1=new  FriendProfile();
    f1.userPosition=1;
    FriendProfile f2=new  FriendProfile();
    f2.userPosition=2;
    List<FriendProfile> list=new ArrayList<FriendProfile>();
    list.add(f2);
    list.add(f1);
    Collections.sort(list); 
```

列表将被排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-18T14:21:58.737

现在不需要装箱（即不需要`OBJECT`使用 new Operator 使用 valueOf 与 Collections.Sort 的 compareTo 来创建。）

1)升序

```
Collections.sort(temp, new Comparator<XYZBean>() 
{
     @Override
     public int compare(XYZBean lhs, XYZBean rhs) {

       return Integer.valueOf(lhs.getDistance()).compareTo(rhs.getDistance());
      }
 }); 
```

1)对于降序

```
Collections.sort(temp, new Comparator<XYZBean>() 
{
     @Override
     public int compare(XYZBean lhs, XYZBean rhs) {

       return Integer.valueOf(rhs.getDistance()).compareTo(lhs.getDistance());
      }
 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T11:40:27.343

使用`Collections.Sort`并编写一个`Comparator`基于`userPosition`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T11:40:27.273

将 Comparator 与 Collections.sort 方法一起使用

```
java.util.Collections.sort(list, new Comparator<FriendProfile >(){
     public int compare(FriendProfile a,  FriendProfile b){
          if(a.getUserPosition() > b.getUserPosition()){
             return 1;
           }else if(a.getUserPosition() > b.getUserPosition()){
            return -1;
         }
          return 0;
     }
}); 
```

看到这个[链接](https://stackoverflow.com/questions/9679769/sort-an-arraylist-of-objects)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T12:04:54.780

有两种方法可以做到这一点。

1、FriendProfile可以实现Comparable接口。

```
public class FriendProfile implements Comparable<FriendProfile>
{
   public int compareTo(FriendProfile that)
   {
     // Descending order
     return that.userPosition - this.userPosition;
   }
}

...

Collections.sort(friendProfiles); 
```

2\. 你可以写一个比较器。

```
public class FriendProfileComparator implements Comparator<FriendProfile>
{
   public int compare(FriendProfile fp1, FriendProfile fp2) 
   {
     // Descending order
     return fp2.userPosition - fp1.userPosition;
   }
}

...

Collections.sort(friendProfiles, new FriendProfileComparator()); 
```

当比较对象而不是基元时，请注意您可以委托给包装对象 compareTo。例如`return fp2.userPosition.compareTo(fp1.userPosition)`

如果对象具有要实现的自然顺序，则第一个很有用。比如 Integer 实现了数字顺序，String 实现了字母顺序。如果您想要在不同情况下使用不同的订单，则第二个很有用。

如果你写了一个比较器，那么你需要考虑把它放在哪里。由于它没有状态，您可以将其编写为 Singleton 或 FriendProfile 的静态方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-26T12:36:31.037

`You can use` **java.lang.Comparable 接口如果你只想以一种方式排序**。

`But if you want to sort` **在不止一种方式中，使用 java.util.Compartor 接口。**

例如：

**其对象将按其 roll_nos 排序的类**

```
public class Timet {

    String name;
    int roll_no;

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public int getN() {
        return roll_no;
    }
    public void setN(int n) {
        this.roll_no = n;
    }
    public Timet(String name, int n) {

        this.name = name;
        this.roll_no = n;
    }

    public String toString(){
        return this.getName();

    }

} 
```

**排序类：**

```
public class SortClass {

    public void go(){

        ArrayList<Timet> arr = new ArrayList<Timet>();
        arr.add(new Timet("vivek",5));
        arr.add(new Timet("alexander",2));
        arr.add(new Timet("catherine",15));

        System.out.println("Before Sorting :"+arr);

        Collections.sort(arr,new SortImp());

        System.out.println("After Sorting :"+arr);

    }
    class SortImp implements Comparator<Timet>{

        @Override
        public int compare(Timet t1, Timet t2) {

            return new Integer(t1.getN()).compareTo (new Integer((t2.getN())));
        }

    }
    public static void main(String[] args){

        SortClass s = new SortClass();
        s.go();

    }

} 
```

# jpa - JPQL for select from select row_number() over()

> ID：11206498
> 
> 赞同：5
> 
> 时间：2012-06-26T11:37:39.333
> 
> 标签：jpa, jpql

我在 AS/400 上使用 Db2，我正在尝试执行一个 JPQL 查询，该查询会将结果从第 x 行返回到第 y 行。

在 SQL 中这有效：

```
select cur.* from (
  SELECT ROW_NUMBER() OVER() AS ROWNUM FROM tableName d) as cur
WHERE cur.ROWNUM > 0 AND cur.ROWNUM < 10 
```

我怎样才能在 JQPL 中做到这一点？我尝试了很多方法，但每次都遇到异常。

我想将我的结果限制在查询中，而不是使用 setMaxResult、setFirstResult 方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-26T11:41:12.380

```
Query q = em.createQuery("select e from SomeEntity e")
            .setFirstResult(0)
            .setMaxResults(10); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:54:03.583

那是做不到的。JPQL 对实体进行操作，实体映射到数据库中的表。db2 中的行号是结果集中的概念，而不是数据库表中的概念。

# bash - 编译几个项目（使用makefile），但在第一次破坏构建时停止？

> ID：11206500
> 
> 赞同：4
> 
> 时间：2012-06-26T11:37:40.340
> 
> 标签：bash, makefile

我想做类似的*事情*：

```
for i in *
do
    if test -d $i
    then
        cd $i; make clean; make; cd -;
    fi;
done 
```

这很好用，但我想`for`在构建损坏的情况下“打破”-loop。

有没有办法做到这一点？也许某种`if`-statement，可以检查成功`make`吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-26T11:49:46.107

您可以使用 Make 本身来实现您正在寻找的内容：

```
SUBDIRS := $(wildcard */.)

.PHONY : all $(SUBDIRS)
all : $(SUBDIRS)

$(SUBDIRS) :
    $(MAKE) -C $@ clean all 
```

如果您的任何目标失败，Make 将中断执行。

## UPD。

支持任意目标：

```
SUBDIRS := $(wildcard */.)  # e.g. "foo/. bar/."
TARGETS := all clean  # whatever else, but must not contain '/'

# foo/.all bar/.all foo/.clean bar/.clean
SUBDIRS_TARGETS := \
    $(foreach t,$(TARGETS),$(addsuffix $t,$(SUBDIRS)))

.PHONY : $(TARGETS) $(SUBDIRS_TARGETS)

# static pattern rule, expands into:
# all clean : % : foo/.% bar/.%
$(TARGETS) : % : $(addsuffix %,$(SUBDIRS))
    @echo 'Done "$*" target'

# here, for foo/.all:
#   $(@D) is foo
#   $(@F) is .all, with leading period
#   $(@F:.%=%) is just all
$(SUBDIRS_TARGETS) :
    $(MAKE) -C $(@D) $(@F:.%=%) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T11:42:48.597

您可以`make`通过`$?`变量检查其退出代码来检查是否已成功退出，然后有一个`break`语句：

```
...
make

if [ $? -ne 0 ]; then
    break
fi 
```

# php - 在多数组中的每个数组中获取重复的键 => 值 + 其他不重复的键 => 值

> ID：11206503
> 
> 赞同：0
> 
> 时间：2012-06-26T11:37:54.747
> 
> 标签：php

我有这个多数组“$marray 里面有一些类似 key = value 的数组，有些看起来不像这样：

```
$marray = array(
 array("id" => "1", "be_pro" => 6, "name" => "a1", "service" => 4a),
 array("id" => "2", "be_pro" => 6, "name" => "a1", "service" => 4d),
 array("id" => "3", "be_pro" => 4, "name" => "a4", "service" => 3d),
 array("id" => "4", "be_pro" => 4, "name" => "a4", "service" => 3s),
 array("id" => "6", "be_pro" => 4, "name" => "a4", "service" => 34),
 array("id" => "8", "be_pro" => 3, "name" => "a3", "service" => 4r),
 array("id" => "8", "be_pro" => 3, "name" => "a3", "service" => 4d)
); 
```

所以我想获得带有“id”、“be_pro”和“name”的新数组，然后从下一个数组中获取“service”加上“service”，直到新数组中的“be_pro”不同，所以如果不同的话放在下一个数组。

我该怎么做？

我需要的是打印一个多数组和数组，每一行都有类似的be_pro

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:34:44.403

这对我有帮助：

```
 // first get all bepro_id and put in array
   foreach($all_rows as $service){
    $bepros[$service['bepro_id']]++;
   }
  //var_dump($bepros);

 //Then for each be pro_id print every row , so print every service , then for be pro_id,id,name just print the first key "[0]" the array inside $new_array

 foreach ($bepros as $key=>$bepro){
    if(isset($new_bep)){
        $x = 0 + $new_bep;
    }else{
        $x = 0;
    }
    $new_array[] = array_slice($all_rows,$x,$bepro);

    // get where let before
    $new_bep=$x + $bepro;
 } 
```

# jquery - 如何在 jQuery Mobile 中设置过渡背景？

> ID：11206515
> 
> 赞同：4
> 
> 时间：2012-06-26T11:38:59.467
> 
> 标签：jquery, jquery-mobile

在 jQuery Mobile 中的某些页面转换期间（例如在转弯和流转换期间），在转换期间会显示空白背景/页面。

参考见：http: [//jquerymobile.com/demos/1.1.0/docs/pages/page-transitions.html](http://jquerymobile.com/demos/1.1.0/docs/pages/page-transitions.html)

如何改变空白背景？

编辑：这是一个 JSfiddle 来说明我的意思：http: [//jsfiddle.net/4ayER/](http://jsfiddle.net/4ayER/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T11:40:43.037

我相信您可以为 body 元素设置 CSS：

```
body {
 background-color: blue !important;
} 
```

编辑：原来它需要 !important 部分。

见这里[http://jsfiddle.net/4ayER/2/](http://jsfiddle.net/4ayER/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T14:16:21.450

由于在 CSS 中使用 !important 不是最佳实践，因此您可以通过在 CSS 中添加以下规则来避免使用它： .ui-body-c, .ui-overlay-c { background-color: blue; }

# php - 页面加载随机字符而不是普通 html

> ID：11206516
> 
> 赞同：0
> 
> 时间：2012-06-26T11:39:07.057
> 
> 标签：php, nginx, apache2, apc

我启用了apc。Nginx 用作“反向代理”。在某个时刻，假设几个小时后，页面突然加载了一些随机的不可理解的字符。

我检查了apache和nginx的错误日志，没有异常。可能是什么问题呢？如果您需要更多信息，请询问。

# php - PHP 导出到带有样式的 excel

> ID：11206518
> 
> 赞同：0
> 
> 时间：2012-06-26T11:39:11.890
> 
> 标签：php, excel

我正在使用来自[http://forums.codeguru.com/archive/index.php/t-470940.html](http://forums.codeguru.com/archive/index.php/t-470940.html)的代码在 php 中创建 excel。这样做时，有没有办法在单元格中添加粗体和/或斜体等样式？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T12:14:17.133

该线程中显示的方法不会生成 Excel .xls 文件。它生成一个制表符分隔值文件。这是一种纯文本格式，不支持任何样式

如果你想生成一个真正的带格式的 xls 文件，那么看看一些可以从 PHP 中用来编写实际 Excel 文件的库，例如我的[PHPExcel](http://www.phpexcel.net)库

**编辑**

除了 PHPExcel 之外，您还可以在[此问题的答案中找到其他用于编写真实 Excel 文件的 PHP 库的详细信息](https://stackoverflow.com/questions/3930975/alternative-for-php-excel)

# mysql - MySql 在重复键更新时插入

> ID：11206523
> 
> 赞同：0
> 
> 时间：2012-06-26T11:39:24.153
> 
> 标签：mysql

我有一个表说**内容**表，有字段说

```
unitId | referenceId | contentId | masterContentId | sequence 
```

现在我需要在重复键上插入更新序列的值，referenceId 字段的值`masterContentId`是“10”和`contentId`“100”，对于 `unitId`“500”和`contentId`“100”的记录。IE

```
rowId| unitId| referenceId | contentId | masterContentId | sequence|
-----+-------+-------------+-----------+-----------------+---------+
1       10      1             500         2                a
2       20      2             300         4                b
3       500     3             100         6                c
4       500     4             700         8                d
5       30      5             100         10               e
6       40      6             100         20               f 
```

所以，我试图解释的是，我需要用第 5 行的相应值更新第 3 行。

怎么做，使用**Mysql Insert On duplicate Key Update**

# php - 它们之间有区别吗，如果有，那是什么？

> ID：11206528
> 
> 赞同：-1
> 
> 时间：2012-06-26T11:39:44.247
> 
> 标签：php

```
$a = true;

1，new test($a);

2，new test(true); 
```

它们（1,2）之间有区别吗，如果有，那是什么？谢谢你，。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T11:43:51.860

那么另一个使用变量，另一个不使用。在这种情况下，这会导致致命错误：

```
class test {

    public function __construct( &$a )
    {

    }
}

$a = true;

new test($a);

new test(true); //Fatal error because this cannot be passed by reference 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:45:30.993

严格来说，这取决于测试是如何定义的。

如果`test`定义为[通过引用传递](http://php.net/manual/en/language.references.pass.php)输入参数，`2`则将引发致命错误，因为`true`它是文字值。

此外，`test`可能会产生副作用，这意味着您执行行`1`和`2`事项的顺序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T11:47:43.960

这取决于`test`类的构造函数。在常规**的按值传递**构造函数中，它们完全相同：

```
class test {
  public $b;
  function __construct($a) { $this->b = $a; }
} 
```

正如预期的那样，这`$obj->b`将是`true`您的两个陈述。

另一方面，如果您[**通过引用传递，**](http://php.net/manual/en/language.references.pass.php)如果稍后更改全局，您可能会得到不同的结果`$a`。例子：

```
class test {
  public $b;
  function __construct( &$a ) { $this->b = &$a; }
}

$a = true;
$obj = new test($a);
$a = false; 
```

`$obj->b`将`false`在这种情况下，因为它是对`$a`! 使用引用，您也可以反过来做，`$a`从构造函数中更改：

```
class test {
  function __construct( &$a ) { $a = false; }
}

$a = true;
$obj = new test($a); 
```

`$a`现在即使在全局范围内也是错误的！

此外，`new test(true)`通过引用传递时不可能这样做，因为您不能引用文字值，只能引用其他变量。

# sql-server - 仅日期部分与 SQL Server 中的系统日期比较

> ID：11206529
> 
> 赞同：0
> 
> 时间：2012-06-26T11:40:01.213
> 
> 标签：sql-server, tsql

我有一个存储过程：-

```
CREATE procedure St_Proc_GetTimeEntryID            
@userID int,            
@timeEntryID int output            
as begin             
    set nocount on;      
    SET @timeEntryID=0      
    DECLARE @TEMP INT       
    SET @TEMP=0        
    SELECT @TEMP=ProductionTimeEntryID            
    FROM    production            
    WHERE   ProductionTimeEntryID =             
        (SELECT MAX(ProductionTimeEntryID)             
            FROM production            
            where UserID=@userID             
            and (CalendarDate = (select GETDATE()))            
            and IsTaskCompleted=1 )      
            BEGIN      
                SET @timeEntryID=@TEMP      
            END      
END 
```

这里 CalendarDate 是包含 Date As 06/26/201212:00PM 格式的列。我想在我的子查询中仅将日期部分与系统日期部分（06/26/2012 = 06/26/2012）进行比较

```
(SELECT MAX(ProductionTimeEntryID)             
            FROM production            
            where UserID=@userID 
            and (CalendarDate = (select GETDATE()))            
            and IsTaskCompleted=1 ) 
```

请指导我如何修改以获得结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:50:30.107

在 SQL2K8 中；

```
 ... WHERE CAST(CalendarDate AS DATE) <= CAST(GETDATE() AS DATE) 
```

（这将否定任何索引使用`CalendarDate`，或者括号`CalendarDate`之间`CalendarDate >= CAST(CalendarDate AS DATE) AND < DATEADD(...`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T12:25:29.020

在 SQL Server 2000/2005 上，最有效的方法（意味着完全能够利用 上的索引`CalendarDate`，如果存在的话）将是：

```
DECLARE @today SMALLDATETIME;
SET @today = DATEDIFF(DAY, 0, CURRENT_TIMESTAMP);

...
WHERE CalendarDate >= @today
AND CalendarDate < DATEADD(DAY, 1, @today); 
```

如果使用 SQL Server 2008+：

```
DECLARE @today DATE = CURRENT_TIMESTAMP;
...
WHERE CalendarDate >= @today
AND CalendarDate < DATEADD(DAY, 1, @today); 
```

您还可以在 SQL Server 2008+ 中使用直接强制转换，但我不能 100% 确定这可以保证`CalendarDate`在所有情况下都使用索引：

```
WHERE CONVERT(DATE, CalendarDate) = CONVERT(DATE, CURRENT_TIMESTAMP); 
```

因为这种转换不适用于其他日期/时间数据类型，为了保持一致性，我更喜欢开放式范围技术，并且绝对不会容忍对列执行隐式或显式转换的大多数场景（因为这通常意味着不会使用索引）。我在以下博客文章中对这个和其他几个日期/时间暴行大肆抨击：

*   [BETWEEN 和魔鬼有什么共同点？](https://sqlblog.org/2011/10/19/what-do-between-and-the-devil-have-in-common)

*   [要改掉的坏习惯：错误处理日期/范围查询](https://sqlblog.org/2009/10/16/bad-habits-to-kick-mis-handling-date-range-queries)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:48:28.140

像这样的东西？

```
(SELECT MAX(ProductionTimeEntryID)             
        FROM production            
        where UserID=412             
        and (convert(datetime, convert(varchar(100), CalendarDate, 106)) <= convert(datetime, convert(varchar(100), GETDATE(), 106)))            
        and IsTaskCompleted=1 ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T11:50:20.723

使用[转换功能](http://www.w3schools.com/sql/func_convert.asp)

在你的情况下：

```
SELECT CONVERT(DATE,GETDATE(),101) 
```

进一步来说：

```
(SELECT MAX(ProductionTimeEntryID)             
            FROM production            
            where UserID=@userID 
            and (CONVERT(DATE,CalendarDate) = CONVERT(DATE,GETDATE()))            
            and IsTaskCompleted=1 ) 
```

# c# - 将数据网格视图添加为树视图中的子节点

> ID：11206535
> 
> 赞同：1
> 
> 时间：2012-06-26T11:40:26.553
> 
> 标签：c#, winforms, user-interface, datagridview

基本上，我正在开发一个 winforms 应用程序。现在我遇到了一个问题，我想要一个在`DataGridView`. 我已经使用`DataGridView`了显示子节点的自定义。但我想要的是`DataGridView`在子节点中添加另一个。这意味着，当用户展开节点时，数据网格视图显示为子节点。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T07:33:27.800

查看以下代码项目文章，其中将下拉框添加为树节点项。文章扩展了 TreeNode 并添加了一个 ComboxBox。扩展到 DataGridView 应该相当简单

[http://www.codeproject.com/Articles/14544/A-TreeView-Control-with-ComboBox-Dropdown-Nodes](http://www.codeproject.com/Articles/14544/A-TreeView-Control-with-ComboBox-Dropdown-Nodes)

# gtk - 如何在 Gtk.Label 上插入图像。这可能吗？还是我需要寻找其他解决方案？

> ID：11206538
> 
> 赞同：1
> 
> 时间：2012-06-26T11:40:29.370
> 
> 标签：gtk, pygtk

我有一个包含以下字段的数据库：名字，姓氏，图片。我有一个名为 infoLabel 的 gtk.Label。

我想以这样的方式更新标签：

```
Label.set_markup("<img src='pix/1.png'>\nName" + Firstname + " " + Lastname) 
```

但它不起作用，因为在 Pango 标记中不允许使用 img。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-30T06:00:12.550

以下是“主页”标签的示例。

```
label_with_icon = gtk.HBox()
icon = gtk.image_new_from_stock(gtk.STOCK_HOME, gtk.ICON_SIZE_MENU)
label_with_icon.pack_start(icon)
label_with_icon.pack_start(gtk.Label('Home'))
label_with_icon.show_all() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T11:43:32.957

我不希望能够在标签中有图像，不。

但是您应该能够用包含 GtkImage 和标签的容器替换任何标签，并以这种方式解决它。

当然，首先您必须将图像保存在本地内存中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-13T15:01:21.753

这是基于 John La Rooy 的回答，但我不得不做出一些调整。不知道为什么，可能是由于库的不同版本或其他原因。

```
label_with_icon = gtk.HBox()
icon = Gtk.Image.new_from_file("/path/to/file.png") # not .image_new_from_file
label_with_icon.pack_start(icon, False, False, 0)   # this method takes five args
label_with_icon.pack_start(gtk.Label('a caption'))
label_with_icon.show_all() 
```

# python - Google AppEngine 库导入

> ID：11206539
> 
> 赞同：2
> 
> 时间：2012-06-26T11:40:31.993
> 
> 标签：python, google-app-engine

我目前正在四处寻找 GAE 中允许和不允许的内容。

使用[Google 的开发者网站](https://developers.google.com)，我发现 _socket C 库和套接字模块在 GAE 上是不允许的。

他们是如何禁用这些模块的？他们是完全重建了 Python 解释器还是开发了自己的解释器（如 pypy）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T11:48:10.287

您实际上并不需要重建整个 python 解释器来禁用模块，您可以（例如）删除库或（如 AppEngine 所做的那样）或拥有一个导入钩子来检查加载的模块并拥有一个模块白名单允许加载。

# java - 在 juint4 中将对象从 TestSuite 传递到 TestCase

> ID：11206542
> 
> 赞同：0
> 
> 时间：2012-06-26T11:40:52.113
> 
> 标签：java, junit

我想将一个对象（不仅仅是一个字符串或整数）从一个 TestSuite 传递给所有的 TestCases。
在以前的junit版本中，我可以在调用之前将参数传递给构造函数 `testSuite.addTest(new TestCase(someObject))`
我现在如何使用注释样式来做到这一点？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T01:47:45.790

我会把它做成一个带有延迟加载的单例。第一个测试调用创建共享状态的 TomcatHelper.getSharedTomcat()。第二个测试调用 TomcatHelper.getSharedTomcat() ，它返回之前的相同实例。

我认为您的示例不够极端，不值得与跑步者/黑客 JUnit 做一些非传统的事情。

# sql - SQL View 从两个字段中选择数据并合并为一个

> ID：11206544
> 
> 赞同：0
> 
> 时间：2012-06-26T11:40:54.687
> 
> 标签：sql

我有一个包含两个字段的表 - ID1 和 ID2
ID1 可以为空，ID2 始终填充。

我想创建一个包含一个字段的视图。该字段将是来自 ID2 的数据，除非 ID1 有一个值，在这种情况下我需要它是 ID1。

Coalesce 对我不起作用，因为 ID1 不为空。

所有的建议都收到了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:44:34.633

取决于在这种情况下“空白”的确切含义，但如果空白仅表示空字符串或空格：

如果该列可能包含您仍希望将其视为空白的空格，请从 ID1 中删除空格：

```
LTRIM(ID1) 
```

然后，`NULL`如果它等于空字符串，则可以通过执行以下操作：

```
NULLIF(TRIM(ID1), '') 
```

然后你可以`COALESCE()`像这样使用 ID2 列：

```
COALESCE(NULLIF(TRIM(ID1), ''), ID2) 
```

如果 ID1 始终是 'something' 或 '' （空字符串），那么您只需要`NULLIF(ID1,'')` 如果 ID1 = 空字符串将返回 NULL

原始响应，这是愚蠢的，因为它修剪了两次！

~~'[ID] = COALESCE(NULLIF(LTRIM(RTRIM(ID1)), ''), ID2)'~~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:46:09.933

无论“空白”是什么意思，如果不是`NULL`，都可以用一个`CASE`条件表示：

```
CASE WHEN ID1 = 'blank' THEN ID2 ELSE ID1 END 
```

`ID1 = 'blank'`你的情况在哪里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T11:47:31.147

```
select case when ID1 = '' then ID2 else ID1 end from MyTable; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T11:46:02.233

你可以试试这样的`CASE`说法：

```
SELECT CASE ID1 = '' THEN ID2 ELSE ID1 END CASE FROM ... 
```

# ruby - 数组的 each_pair 模拟（压缩 2 个数组）

> ID：11206549
> 
> 赞同：2
> 
> 时间：2012-06-26T11:41:13.640
> 
> 标签：ruby, arrays

有一种`each_pair`方法允许在每次循环迭代时获取散列对：

```
{ 1 => "a", 2 => "b" }.each_pair do |key, value|
   # do something with #{key} and #{value}
end 
```

如何在每次循环迭代中知道当前数组元素的索引？

```
array.each do |element|
  # what is element index in array?
end 
```

使用一些递增迭代器有一个无聊的解决方案。但是该迭代器应该在循环之前分配，并且应该在每次迭代时手动递增。这显然很无聊。

如果有某种方法可以用数组压缩一些数组`1..`并获得像`["b", "d", "e"] → [(1,"b"), (2,"d"), (3,"e")] and than pattern matched each element of the pair in`|这样的元组数组，那就太好了。|` 声明。

所以，最后，我正在寻找的是一些功能`f`，即：

```
f(["a"]) do |index, element|
  # index == 1, element == "a"
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T11:47:20.397

[您可以使用Enumerable::each_with_index 遍历](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_with_index)数组并获取当前索引

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:47:45.170

如果我错了，请纠正我，但我假设您想要一个由具有原始数组索引和值的子数组组成的数组？

```
a= ["b", "d", "e"]
a.enum_with_index.map {|ind, val| [ind, val]
=> [[0, "b"], [1, "d"], [2, "e"]] 
```

# php - MySQL - 从多个表中选择数据

> ID：11206551
> 
> 赞同：0
> 
> 时间：2012-06-26T11:41:24.487
> 
> 标签：php, mysql

我是 MySQL 新手，在尝试了一些不同的谷歌搜索并阅读了一些 MySQL 教程之后，似乎无法获得所需的信息。

给定以下示例表：

表1（活动这是发送给客户端的活动表）：

```
ID  sendingid         list        fromaccount    
1       a1        user_new1        noreply@example.com
2       a2        user_new1        noreply@example.com
3       a3        user_new2        noreply@example.com
4       a4        user_new4        noreply@example.com 
```

表 2（跟踪 - 这是主要的任务跟踪表，它跟踪哪个用户打开了我们的活动）：

```
ID  trackingid         emails            
1       a1        myexampla@gmail.com
2       a2        example@hotmail.com 
3       a3        newexample@yahoo.com
4       a4        simpler@gmail.com 
```

表 3（user_new1- 这是在列名列表下附加活动发送的列表）：

```
ID     fname         emails                    price
1       John        myexampla@gmail.com        10
2       Bill        example@hotmail.com        20
3       sami        newexample@yahoo.com       20
4       daweoo        simpler@gmail.com        20 
```

user_new1,user_new2,user_new3 .......user_new80 表。所有表都具有相似的结构。

首先我会从跟踪表中找到唯一的电子邮件地址，然后我会找到它发送到哪个活动表列表，然后我将从列表中删除该记录，比如 user_new1 并将其移动到另一个临时表。我们在数据库中有数百万条记录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:50:05.557

关于表 user_new1, user_new2 ...为每个用户创建一个表真的是个好主意吗？不仅仅是为每个用户提供字段的表。

您可以使用 JOIN - [JOINS on w3school从多个表中选择数据](http://www.w3schools.com/sql/sql_join.asp)

但是你需要连接表，例如，创建表Users和Jobs。用户有一份工作。因此，如果使用 InnoDB 引擎，则在用户表中添加字段 job_id 并设置为作业表的外键。之后，您可以使用 join 从两个表中进行选择：

```
$sql = "SELECT * FROM users AS u
        JOIN jobs AS j
        ON u.job_id = j.id"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:56:31.107

试试这个代码

```
 SELECT
    p.fCodigoProduto, p.fCodigoCategoria, p.fCodigoCategoriaSub, p.fCodigoVendedor,
    p.fCodigoFornecedor, p.fNomeProduto, p.fDescricao, p.fPreco,
    p.fObservacao, p.fDataCadastro, p.fStatusProduto,
    c.fNomeCategoria, 
    s.fNomeCategoriaSub,
    f.fNomeFornecedor, 
    i.fSequenciaImagem, i.fCaminhoImagem, i.fTamanhoImagem, i.fImagemProduto,
    (@rownum:=@rownum+1) as Rownumber,
   (SELECT count(*) FROM tblprodutos) as QtdeReg
 FROM
  tblprodutos p
  LEFT JOIN tblcategorias c ON p.fCodigoCategoria = c.fCodigoCategoria
  LEFT JOIN tblcategoriassub s ON p.fCodigoCategoriaSub = s.fCodigoCategoriaSub
  LEFT JOIN tblvendedores v ON p.fCodigoVendedor = v.fCodigoVendedor
  LEFT JOIN tblfornecedores f ON p.fCodigoFornecedor = f.fCodigoFornecedor
  LEFT JOIN tblimagemproduto i ON p.fCodigoProduto = i.fCodigoProduto
 ORDER BY
   fNomeProduto ASC 
```

# java - 如何在 Java 中创建执行测试的结果/报告

> ID：11206552
> 
> 赞同：1
> 
> 时间：2012-06-26T11:41:27.303
> 
> 标签：java, swing, selenium

我为我的 selenium 测试创建了一个运行程序和错误处理程序。我能够将错误存储在执行中`String Builder`和执行之后，我在控制台上打印它。

我想从执行中创建 HTML 报告。

我怎样才能实现它。如果是的话，我应该将所有东西存储在变量中吗？我应该以某种格式编写并为此编写一些过滤器。

请让我知道如何做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:15:37.030

我建议的一种简单方法是将所有打印输出语句附加到字符串缓冲区（Java）之类的存储变量中，并带有 | 之类的分隔符。每行末尾的符号，然后将此信息写入文本文件。（在 | 符号的帮助下逐行拆分）

如果您想将此信息存储在 excel 中，则必须使用 Apache POI 项目将数据写入 excel 表。（http://poi.apache.org/）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:48:47.780

大多数人使用[JUnit](http://www.junit.org)和/或[JBehave](http://jbehave.org/)来驱动他们的 Selenium 测试，这些测试带有内置的 html 报告。

JBehave 网站上的完整示例可在此处获得：http: [//jbehave.org/reference/web/stable/using-selenium.html](http://jbehave.org/reference/web/stable/using-selenium.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T09:08:04.737

我已经创建了类名结果，它有一些变量和函数使用它我可以使用 css 创建 HTML 格式的结果，还可以获得一个 xml 日志文件。

谢谢你的时间。

# ruby-on-rails - 如何在测试过程中禁用一些宝石？

> ID：11206563
> 
> 赞同：1
> 
> 时间：2012-06-26T11:42:22.253
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems, cucumber

我在我的 rails 3 应用程序上安装了一个运行平稳的 gem，但是当我运行 cucumber 测试时，缺少该 gem 来获取用户属性。实际上，由于安全管理，它应该是这样的。（没有登录==没有信息）

所以，我想知道在运行黄瓜测试时是否有任何方法可以禁用这个 gem？这样我就不会根据这个 gem 得到任何错误。

提前致谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T11:51:15.820

在您的 gemfile 中，您可以在特定环境中添加 gem。IE

```
group :development, :production do
  gem 'yahoo-weather'
end 
```

此 gem 只会添加到开发和生产环境中。它不会出现在测试环境中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T14:04:40.793

在和我的同事检查问题后，我们决定采用这种方式似乎几乎可以的解决方案，

由于我们不希望特定的 gem 函数在测试过程中发挥作用，我们决定使用

```
acts_as_specificgem(do this do that) unless Rails.env == "test" 
```

无需在测试场景中重复自己，看起来更干净。

干杯！

# delphi - 我有哪些选项可以取消 Delphi 应用程序中的一长串操作？

> ID：11206564
> 
> 赞同：3
> 
> 时间：2012-06-26T11:42:28.833
> 
> 标签：delphi, coding-style

为简单起见，我的 Delphi XE 应用程序包含负责根据某些条件生成文件的对象：一个对象可以生成文本文件，其他对象（从前者继承）可以生成 XML 或 HTML 文件等等。 .它们都有一个共同的祖先，但不运行在一个线程上！

我现在正在尝试添加一种方法来在用户点击取消按钮时取消整个生成过程。问题是我没有任何东西可以让它工作。最基本的操作是`if user_canceled then halt_process`在整个生成过程中到处添加 A LOT，但我觉得这不是最佳解决方案。

我的问题是，是否有一些更聪明的方法可以做到这一点？或者您可能对重构我的代码有任何建议，以便将来在需要添加更多生成代码（以及因此取消测试）时可以更好地集成此添加？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:44:06.227

*如果需要取消进程，*您将需要添加手动检查，因为无法取消它并使程序处于有效状态。编译器/程序只是不知道哪些操作是原子的，哪些不在您的应用程序逻辑中。

例如

```
OpenFile(...);  //<- if program halts anywhere before CloseFile you have the file locked
...
CloseFile; 
```

最佳解决方案很大程度上取决于您现有的设计。在排队操作的简单情况下，`A -> B -> C -> D`如果您将其包装到线程中并`if Terminated then Exit;`在操作之间添加（当然如果有的话，可以正确释放临时对象）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:42:25.873

我相信实现取消的一个好方法是使用 EAbort。只要您最终在尝试中打开和关闭文件，提高 EAbort（例如单击按钮）将使您很好地摆脱一长串操作。它不应该工作，但它确实有效。

# android - Android 视频捕获意图崩溃

> ID：11206565
> 
> 赞同：1
> 
> 时间：2012-06-26T11:42:34.990
> 
> 标签：android, android-intent, video-capture

我需要使用意图在应用程序中录制视频。我认为代码是正确的，但是当我启动图像时，图像停止并且文件变为 0Bytes。我放下了我正在使用的代码。

第一个函数调用：

```
protected void makeVideo() {
        //create new Intent

        Intent intent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);

        fileUri = getOutputMediaFileUri(MEDIA_TYPE_VIDEO);  // create a file to save the video
        intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);  // set the image file name

        intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1); // set the video image quality to high

        // start the Video Capture Intent
        startActivityForResult(intent, CAPTURE_VIDEO_ACTIVITY_REQUEST_CODE);
    } 
```

getOutputMediaFile 函数：

```
private static File getOutputMediaFile(int type){

        // To be safe, you should check that the SDCard is mounted
        // using Environment.getExternalStorageState() before doing this.

        //      Environment.getExternalStorageState();

        //      File mediaStorageDir = new File(Environment.getExternalStorageDirectory(), Constants.ALBUM.AlbumInPhone);
        File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), Constants.ALBUM.AlbumInPhone);
        // This location works best if you want the created images to be shared
        // between applications and persist after your app has been uninstalled.

        // Create the storage directory if it does not exist
        if (! mediaStorageDir.exists()){
            if (! mediaStorageDir.mkdirs()){
                Log.d(Constants.ALBUM.AlbumInPhone, "failed to create directory");
                return null;
            }
        }

        // Create a media file name
        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
        File mediaFile;
        if (type == MEDIA_TYPE_IMAGE){
            mediaFile = new File(mediaStorageDir.getPath() + File.separator + "IMG_"+ timeStamp + ".jpg");
        } else if(type == MEDIA_TYPE_VIDEO) {
            mediaFile = new File(mediaStorageDir.getPath() + File.separator + "VID_"+ timeStamp + ".mp4");
        } else {
            return null;
        }

        File x = mediaFile;
        int y=0;
        y=1;

        return mediaFile;
    }

private static Uri getOutputMediaFileUri(int type){
        return Uri.fromFile(getOutputMediaFile(type));
    } 
```

和：

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        if (requestCode == CAPTURE_VIDEO_ACTIVITY_REQUEST_CODE) {
            if (resultCode == RESULT_OK) {
                // Video captured and saved to fileUri specified in the Intent
                //              Toast.makeText(this, "Video saved to:\n" + data.getData(), Toast.LENGTH_LONG).show();
                String uri = fileUri.getPath();

                if(TextUtils.isEmpty(uri)){
                    Log.v(TAG, "Could not get video");
                } else {
                    Log.v(TAG, "video: " + uri);
                    if(BebeDataBaseManager.addVideoToAlbum(this, uri, albumId)){
                        Log.v(TAG, "video: added");
                        this.cursor.requery();
                    } else {
                        Log.v(TAG, "video: not added");
                    }
                }
            } else if (resultCode == RESULT_CANCELED) {
                // User cancelled the video capture
            } else {
                // Video capture failed, advise user
            }
        }
... 
```

我做错了什么？

# wpf - 移动 ObservableCollection 中的项目时 DataTemplate 消失

> ID：11206570
> 
> 赞同：0
> 
> 时间：2012-06-26T11:42:56.227
> 
> 标签：wpf, mvvm, datatemplate

我有一个用于 ListView 中的列的 CellTemplate。CellTemplate 包含一个具有 ItemTemplate 的 ComboBox。ItemsSource 和 SelectedItem 都绑定到另一个 ViewModel。ListView 绑定到 ViewModel 上的 ObservableCollection。在 ListView 上方有一个工具栏，其中包含用于上下移动所选项目的按钮。I 按钮绑定到和 ICommand，这将在 ObservableCollection 上进行移动。

![在此处输入图像描述](../Images/430724040f5a512439e6bf5be09a553a.png)

视图更新得很好，但是 ComboBox 中的选定项目没有使用 DataTemplate 并且只显示类型名称。

![在此处输入图像描述](../Images/ec4aac64f7a464fb988ff95b00de2dae.png)

我发现如果 IsEditable = false 一切正常，但我需要这是真的。

我创建了一个验证问题的小项目。也许这是 WPF 中的一个问题。

这是 XAML：

```
<Window x:Class="WpfApplication3.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:WpfApplication3="clr-namespace:WpfApplication3"
    Title="MainWindow" Height="350" Width="525">
<Window.Resources>
    <DataTemplate DataType="{x:Type WpfApplication3:Item}">
        <TextBlock Text="{Binding Name}"/>
    </DataTemplate>
    <DataTemplate x:Key="cellTemplate">
        <ComboBox ItemsSource="{Binding Items}" SelectedItem="{Binding SelectedItem}" Width="100" IsEditable="true" TextSearch.TextPath="Name"/>
    </DataTemplate>
</Window.Resources>
<Grid>
    <StackPanel>
        <ToolBar>
            <Button Content="Add" Command="{Binding AddItemCommand}"/>
            <Button Content="Up" Command="{Binding MoveItemUpCommand}" CommandParameter="{Binding ElementName=listView, Path=SelectedItem}"/>
            <Button Content="Down" Command="{Binding MoveItemDownCommand}" CommandParameter="{Binding ElementName=listView, Path=SelectedItem}"/>
        </ToolBar>
        <ListView x:Name="listView" ItemsSource="{Binding Collection}">
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="Name" CellTemplate="{StaticResource cellTemplate}"/>
                </GridView>
            </ListView.View>
        </ListView>
    </StackPanel>
</Grid> 
```

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = new ViewModel();
    }
}

public class ViewModel
{
    public ICommand AddItemCommand { get; private set; }
    public ICommand MoveItemUpCommand { get; private set; }
    public ICommand MoveItemDownCommand { get; private set; }
    public ObservableCollection<Row> Collection { get; set; }

    public ViewModel()
    {
        Collection = new ObservableCollection<Row>();
        AddItemCommand = new RelayCommand(AddItem);
        MoveItemUpCommand = new RelayCommand<Row>(MoveItemUp, CanMoveItemUp);
        MoveItemDownCommand = new RelayCommand<Row>(MoveItemDown, CanMoveItemDown);
    }

    private bool CanMoveItemDown(Row arg)
    {
        if (arg == null)
            return false;

        return Collection.Last() != arg;
    }

    private void MoveItemDown(Row obj)
    {
        var index = Collection.IndexOf(obj);

        Collection.Move(index, index + 1);
    }

    private bool CanMoveItemUp(Row arg)
    {
        if (arg == null)
            return false;

        return Collection.First() != arg;
    }

    private void MoveItemUp(Row row)
    {
        var index = Collection.IndexOf(row);

        Collection.Move(index, index - 1);
    }

    private void AddItem()
    {
        Collection.Add(new Row());
    }
}

public class Row
{
    public Row()
    {
        Items = new List<Item> { new Item { Name = "Test1" }, new Item { Name = "Test2" } };
    }

    public List<Item> Items { get; set; }

    public Item SelectedItem { get; set; }
}

public class Item
{
    public string Name { get; set; }

    public int Order { get; set; }
} 
```

# jquery - Prototype.JS 和 Facebook 喜欢

> ID：11206572
> 
> 赞同：2
> 
> 时间：2012-06-26T11:43:05.860
> 
> 标签：jquery, prototypejs, magento-1.5

我在 jQuery 中编写了一个代码，它执行以下操作：

1.  通过 Facebook 连接
2.  点击喜欢按钮
3.  检查是否在 Facebook 上喜欢并显示内容，如果不喜欢，请要求喜欢

    ```
     <script>
        $('#loginfb').click( function() {
         FB.login(function(response) {
           if (response.authResponse) {
             var logstatus="logged in";
             FB.api('/me', function(response) {
               console.log('Good to see you, ' + response.name + '.');
             });
             $('#loginfb').empty();
             $('#loginfb').append('<p>Logged In to Facebook</p>');
             console.log('Welcome!  Fetching your information.... ');
            var url = 'http://facebook.com/bitslabo';
            $('#fblikeblock').html('<div id="pleaselike">like!</div><fb:like id="fbLike" href="'+url+'" send="false" layout="button_count" width="450" show_faces="false" font=""></fb:like>');
            FB.XFBML.parse(document.getElementById('fblikeblock'));
           } else {
             console.log('User cancelled login or did not fully authorize.');
           }
         },{perms:"friends_likes,user_likes"});
                    });

        $('#getlogin').click( function() {
            FB.getLoginStatus(function(response) {
                var page_id = "[PAGE ID]";
                    if (response && response.authResponse) {
                        var user_id = response.authResponse.userID;
                        var fql_query = "SELECT uid FROM page_fan WHERE page_id = "+page_id+" and uid="+user_id;
                        FB.Data.query(fql_query).wait(function(rows) {
                          if (rows.length == 1 && rows[0].uid == user_id) {
                            console.log("LIKE");
                            $('#container_notlike').hide();
                            $('#container_like').show();

                          } else {
                            console.log("NO LIKEY");
                            $('#container_like').hide();
                            $('#container_notlike').show();
                          }
                        });
          } else if (response.status === 'not_authorized') {
            // the user is logged in to Facebook, 
            // but has not authenticated your app
            alert('Please click "Log in to Facebook"');
          } else {
            alert('Please click "Log in to Facebook"');
            // the user isn't logged in to Facebook.
          }
         });

        });
        </script> 
    ```

问题是我正在使用的 CMS（magento 1.5）上到处都是prototype.js，并且存在 jQuery 与 Prototype 冲突，其中 jQuery 覆盖了 Prototype 并禁用了网站的所有功能。

所以，我想，这里有两个问题：

1.  如何让 jQuery 脚本运行而不影响原型脚本？
2.  如何在原型中编写我上面描述的相同内容？

我希望这是有道理的！提前致谢！

# php - 使用 Delphi 进行 DB 连接和选择 (FIREMONKEY - iOS)

> ID：11206573
> 
> 赞同：2
> 
> 时间：2012-06-26T11:43:07.250
> 
> 标签：php, mysql, ios, delphi, firemonkey

我有一个数据库，想选择一个带有**DELPHI 和 FIREMONKEY CROSSOVER**的条目。 *但我从未在 DELPHI 上使用过 SQL。而且我不知道如何使用 DELPHI 连接到数据库。*我不想要满是组件的手。它应该是一个简单的连接，就像使用 PHP 一样。

我使用 XAMPP - mySQL。假设我们有一个数据库“db_x”，带有一个表“users”，在该表中有以下条目： **name: Michael; 姓氏：施耐德；年龄：22**。

数据库位于“localhost”或其他地方，登录名是“root”，密码是“rootpw”。要连接到 PHP 中的数据库，我们使用：

```
mysql_connect("localhost","root","rootpw") or die ("Connection Error");
mysql_select_db("db_x") or die ("Error DB"); 
```

现在我想从名为“ **Michael ”的用户那里获取****姓氏**：

 **```
$query= mysql_query("SELECT surname FROM users WHERE name = 'Michael'")  
or die  
(mysql_error());   

while($zeile = mysql_fetch_array( $query )) 
{ 
    echo $zeile['surname']."<br>";
} 
```

**现在这是关于 PHP 的，但是关于 DELPHI 呢？**我有相同的数据库并想显示用户的姓氏，但我什至不知道如何与 DELPHI 连接（**它还应该支持 Firemonkey 并在 iOS 上工作**）。

很抱歉我犯了语法错误。

感谢所有来自德国的回答和问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-07T17:45:34.200

**为了这个恐龙的完整性。**

我没有找到我当时使用的功能，但它与此类似：

```
http := TIdHttp.Create(nil);
http.HandleRedirects := true;
http.ReadTimeout := 6000;
jsonToSend := TStringList.create;
jsonToSend.Text := 'json={"food":"Pizza"}';
Memo1.Lines.Text := http.Post('http://www.mypage.com/mydata.php', jsonToSend);
jsonToSend.free;
http.free; 
```

和简单的 mysql 和 json 编码在 mydata.php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T16:59:47.927

Delphi中有各种方法，在这个例子中我有以下内容：

我在表单上有一个 TSQLConnection 对象（但这可以在代码中创建）。我在组件上设置了数据库连接和数据库设置。

然后，在代码中...

```
//variables
var Q: TSQLQuery;

//in function
Q := TSQLQuery.Create(nil);
try
  Q.SQLConnection := myConnectionObjectOnForm;
  Q.SQL.Text := "SELECT some stuff from TABLE";
  Q.Active := true;

  if not Q.Eof then
    //Do stuff eg
    result := Q.Fields[0].AsString;  //or reference FieldByName

  Q.Close;
finally
  Q.Free;
end; 
```

TSQLQuery 和 TSQLDataSet 最常用于数据检索**

# c++ - 二进制处理器如何区分两个相同字节大小的变量类型

> ID：11206580
> 
> 赞同：0
> 
> 时间：2012-06-26T11:43:41.793
> 
> 标签：c++, c, variables, types, binary

我试图弄清楚两个具有相同字节大小的变量类型是怎么回事？

如果我有一个变量，它的大小是一个字节。计算机如何能够判断它是一个字符而不是布尔类型变量？甚至是一个字符或一个短整数的一半？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T11:50:48.623

处理器不知道。编译器会这样做，并为处理器生成适当的指令以执行以适当方式操作内存中的字节，但对于处理器本身来说，一个数据字节就是一个数据字节，它可以是任何东西。

语言赋予这些东西以意义，但它是处理器并没有真正意识到的抽象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T11:48:49.757

计算机无法做到这一点。编译器是。您使用 char 或 bool 关键字来声明变量，编译器生成的代码使计算机以对特定类型有意义的方式处理该变量占用的内存。

例如，一个 32 位整数在内存中占用 4 个字节。为了增加它，CPU 有一条指令说“在这个地址增加一个 32 位整数”。这就是编译器产生的，CPU 盲目地执行它。它不关心地址是否正确或那里的二进制数据。

用于递增变量的指令的大小是另一回事。它很可能是另外 4 个左右的字节，但指令（代码）与数据分开存储。可能会为处理内存中相同位置的程序生成许多指令。由于优化可能会改变用于给定操作的指令数量，因此无法事先正式指定指令的大小。唯一的判断方法是编译你的程序并查看生成的汇编代码（指令）。

另外，看看 C 中的联合。它们允许您将相同的内存位置用于不同的数据类型。编译器允许您这样做并为其生成代码，但您必须知道自己在做什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T11:45:09.983

因为你*指定*了类型。C++ 是一种强类型语言。你不能写`$x = 10`。:)

它知道

```
 char c = 0; 
```

是`char`因为...好吧，`char`关键字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T11:50:33.650

计算机只能看到 1 和 0。您可以控制变量包含的内容。

您也可以将该数据转换为您想要的任何内容。

```
char foo = 'a'; 
if ( (bool)(foo)  ) // true
{
    int sumA = (byte)(foo) + (byte)(foo);
    // sumA == (97 + 97)
} 
```

还要查看[数据转换](http://www.cplusplus.com/doc/tutorial/typecasting/)以将内存位置视为不同的数据类型。这可以小到一个字符或整个结构。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T12:19:57.243

一般来说，它不能。看看 的限制`dynamic_cast<>`，它试图做到这一点。`dynamic_cast`只能在从多态基类派生的对象的特殊情况下工作。那是因为这些对象（并且只有那些对象）中有额外的数据。Chars 和 int 没有此信息，因此您不能`dynamic_cast`在它们上使用。

# c++ - 起始指针和内部指针之间的区别是什么以及何时使用它们

> ID：11206582
> 
> 赞同：0
> 
> 时间：2012-06-26T11:43:49.400
> 
> 标签：c++, c, c++11

起始指针和内部指针之间的区别以及在什么情况下我们应该更喜欢一个而不是另一个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T11:50:26.153

作为一个完整的猜测，“开始指针”是由`malloc`or返回的指针`new[]`，而“内部指针”是指向分配中间的指针。

如果是这样，那么重要的区别是您需要`free`开始指针，而不是内部指针。

不过，这不是标准中的术语。“内部指针”通常表示指向更大内存块的指针，我猜/推断其余部分。因此，您可能需要提供上下文。问题出自哪本书/课程/采访？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:37:03.820

我相信史蒂夫杰索普的答案是正确的答案，即起始指针是由 malloc() 等返回的指针。内部指针是指向该分配中位置的指针。我无法改进他的答案，但我会扩展它：

例如，您可能需要将某些结构的数千个实例作为链表。无需根据需要为结构（或类）调用 malloc()，只需调用 malloc() 一次即可为几千个实例分配足够的空间。然后创建一个空闲列表（空闲实例的链接列表）。您可以通过在空闲列表和使用列表之间移动实例（通过调整指针链接移动）来使用和释放。然后，当程序不再需要该结构的任何实例时，您只需在开始指针上调用 free()，它最初由 malloc() 返回。

我在这里遇到了 Windows 和 .NET Windows 的 C++ 编程上下文中内部指针的另一个定义：http: [//www.codeproject.com/Articles/8901/An-overview-of-interior-pointers-in-C -命令行界面](http://www.codeproject.com/Articles/8901/An-overview-of-interior-pointers-in-C-CLI)。

在 C++ / .NET 中，内部指针也可以表示指向 CLI 堆中的内存的指针，即 .NET 的托管内存。但是，在我看来，这基本上是相同的想法。通过使用 C++ 和 C 与 .NET 管理内存，我想我们并不关心起始指针，因为我们永远不会调用 free() 来解除分配。.NET 为我们进行垃圾收集。

# html - XFBML 是否已被弃用？

> ID：11206585
> 
> 赞同：3
> 
> 时间：2012-06-26T11:43:55.360
> 
> 标签：html, fbml, deprecated, facebook-social-plugins, xfbml

根据 Facebook 的说法，FBML 已被弃用，并将于 2012 年 7 月 5 日被删除，如此处所[引](https://developers.facebook.com/docs/reference/fbml/)。

**这不是[这个问题](https://stackoverflow.com/questions/4275757/deprecating-fbml)的重复，因为我指的是 XFBML 而不是 FBML。**

我的问题很简单，由于 FBML 被弃用，这是否意味着 XFBML 也被弃用？

我问这个是因为我正在使用诸如评论社交插件之类的插件，并且它使用了 XFBML 和 iframe 的混合。我应该将所有这些插件更改为使用 iframe 还是 HTML5？还是 XFBML 与 FBML 无关？

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T11:52:07.173

嗯，xfbml 更像`HTML + FBMl`

XFBML 仍然可以使用 Facebook Javascript API 呈现，因此使用 XFBML 不是一个坏主意，但仍然不是最好的主意。

常规的 HTMl 和 javascript 结合 Facebook Javascript API 可以做 XFBML 可以做的所有事情，而且它可以做的更干净。

仅供参考：[https ://developers.facebook.com/blog/post/568/](https://developers.facebook.com/blog/post/568/)

> 请注意：我们弃用 FBML 不会影响 XFBML（扩展 Facebook 标记语言）。XFBML 是一组 XML 元素，可以包含在您的 HTML 页面中以显示社交插件。加载页面时，文档中的任何 XFBML 元素都会由 JavaScript SDK 处理，从而在您的页面上呈现相应的插件。JavaScript SDK 将在 FBML 弃用后继续支持 XFBML（除了用于在我们的服务器上执行 FBML 的 fb:serverFbml 元素）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T10:45:36.997

XFBML 为网页上的 facebook 元素使用 XML 命名空间，而 iframe 和 HTML5 则没有。iframe 元素是不推荐使用的元素，应尽可能避免使用。

XML 命名空间比常规的 div 或 iframe 更能说明元素。因此，除非您需要包含必须使用本地资源的元素（例如 youtube 电影），否则我始终建议您应该使用可扩展标记方法。

在这种情况下，它不使用本地资源，因此我建议您在这方面走高路并使用 XFBML。

直接回答您的问题：没有 XFBML 没有被弃用，FBML 规范是。

# android - ASP.Net 自定义错误页面未在 iPad/Android 上显示

> ID：11206589
> 
> 赞同：1
> 
> 时间：2012-06-26T11:44:09.173
> 
> 标签：android, asp.net, ipad, mobile-safari, android-browser

在 ASP.Net 应用程序中，我配置了一个自定义错误页面。它提供故障参考，以便用户可以根据需要跟进支持、注销链接和应用程序菜单，以便他们可以尝试其他操作。该页面将 设置`Response.StatusCode`为`500`，因为错误处理的本质是该页面还将用于 AJAX 请求等中的错误以及那些我想要正确 HTTP 语义的错误。但它仍然会显示在所有主要的桌面浏览器上。

然而，在 iPad 和测试 Android 平板电脑上，浏览器显示自己的错误页面，上面没有任何有用的信息或选项。

如果我将响应状态代码更改为 200，自定义错误页面会显示在两台设备上，但此更改会导致应用程序的其他地方出现问题（使用 AJAX 请求），此外，我觉得不合适。无论如何我可以强制 iPad/Android 设备显示我的自定义错误页面而不是它自己的内置错误页面吗？

# eclipse - bakcberry os 7 模拟器永远加载

> ID：11206590
> 
> 赞同：0
> 
> 时间：2012-06-26T11:44:12.153
> 
> 标签：eclipse, blackberry, windows-7, simulator

我已经安装了模拟器 os 7 并永远加载它。（模拟器操作系统<= 6很好）

我的问题就像： [我的系统上没有加载 bakcberry os 7 模拟器](https://stackoverflow.com/questions/7292318/blakcberry-os-7-simulator-not-loading-on-my-system) ，问题看起来还没有解决。

我的系统：

*   处理器：Intel core 2 duo @2GHz
*   内存：4 GB
*   Windows 7 终极 32 位服务包 1，关闭 UAC
*   Java SDK 1.6 更新 31
*   IDE：日食伽利略 3.5
*   黑莓插件 1.1.2

是否有任何建议、步骤或配置如何解决此问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T11:02:48.310

您的 Eclipse 和 BlackBerry 插件版本相当旧，可能值得更新它们以查看是否有所作为。当前版本是

*   日食：靛蓝 3.7
*   BB 插件：1.5.2

正如另一位评论者所说，您的硬件也很旧，模拟器非常占用资源。为了让您了解模拟器性能，这是我的规范：

*   CPU：Intel i7 2700K（超频至3.4GHz）
*   内存：16GB
*   硬盘：128GB三星830 SSD
*   操作系统：Windows 7 专业版 64 位
*   Eclipse：Indigo 3.7.2（在 eclipse.ini 中我有以下标志：-Xmx768m）
*   BB 插件：1.5.2
*   BB 模拟器：粗体 9930

运行（不是调试）模拟器需要 17 秒才能加载。

# php - php中的var_dump之类的函数

> ID：11206597
> 
> 赞同：3
> 
> 时间：2012-06-26T11:44:34.510
> 
> 标签：php, function, return-value, var

我需要一个像`var_dump($object)`php 中的函数问题是 Var_dump 函数在屏幕上打印所有东西，我只需要一个变量中的答案。我的意思是……`$variable=var_dump($object);`我不想在屏幕上看到任何东西！谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T11:47:02.220

```
$variable=var_export($object,true); 
```

你需要[var_export](http://php.net/manual/en/function.var-export.php)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T11:49:23.080

也许你使用：

```
$variable = print_r($object, true); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T11:51:25.027

U 还可以使用输出控制功能

```
ob_start();
var_dump($object);
$description = ob_get_clean(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-07T03:34:03.120

有时 json_encode() 可以很方便：

```
$variable = json_export($data); 
```

或者

```
$variable = json_encode($data, JSON_UNESCAPED_SLASHES | JSON_PRETTY_PRINT); 
```

# php - 将 PHP 变量放在 javascript 文件中

> ID：11206599
> 
> 赞同：2
> 
> 时间：2012-06-26T11:44:41.990
> 
> 标签：php, javascript, jquery

按照标题。

我有一块 jQuery 看起来像下面

```
$("<div class='creditCardDetails' id='usercurrentccbox'>
    <div class='creditCard'>
    <div class='cardChoice'>
    <span>Choose Card Type</span>
    <input name='cctype' type='radio' value='V' class='lft-field' id='visa' />
    <label for='visa'></label>
    <input name='cctype' type='radio' value='M' class='lft-field' id='mastercard' />
    <label for='mastercard'></label><input name='cctype' type='radio' value='A' class='lft-field' id='amex' />
    <label for='amex'></label>
    </div>
    <!--cardChoice-->
    <div class='cardNumber'>
    <input name='ccn' id='ccn' type='text' class='long-field' value='<?php echo MaskCreditCard($loggedInfo[ccn]);?>' maxlength='19' readonly />
    </div>
    <div class='cardCVV'>
    <input name='cvv' id='cvv' type='text' maxlength='5' class='small-field' />
    </div>
    <div class='creditCardName'>
    <input name='ccname' id='ccname' type='text' class='long-field' value='<?php echo $loggedInfo[ccname];?>' readonly/>
    </div
    <div class='cardDate'>
    <input name='exp1' id='exp1' type='text' maxlength='2' class='small-field' value='<?php echo $loggedInfo[ccm];?>' readonly /><input name='exp2' id='exp2' type='text' maxlength='4' class='small-field' value='<?php echo $loggedInfo[ccy];?>' readonly />
    </div>
    </div><!--creditCard-->").insertAfter("#paymentCardChoice"); 
```

但是你会看到它有 PHP 变量，如果我将它嵌入到我的 PHP 文件中，这是可行的，但我想保持 PHP 文件尽可能短，并将此代码放在 .js 文件中，当然我的变量只显示PHP 的文本不是其自身的变量。

我试图调用的变量已经在 config.php 文件中定义。

我需要使用这样的东西吗？如果是这样，我会坚持如何在上面的代码中调用变量。

```
$.post('phpfile.php', qString, function (data) {

}, "json"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:03:43.007

PHP 代码不会在`.js`文件中执行。一个非常简单的解决方法是将您的 JavaScript+PHP 代码放在一个`.php`文件中；并设置内容类型标头，例如：

```
<?php
    #
    # script.js.php
    #
    header("Content-type: text/javascript");
?>
$("<div><?php echo $foo; ?></div>"); 
```

您会发现该[`json_encode`](http://php.net/manual/en/function.json_encode.php)函数非常方便地将几乎任何 PHP 变量（字符串、数字、数组等）转换为有效的 JavaScript。此函数负责转义字符，例如`"`,等`\`，`\n`这些字符可能会破坏您的 JavaScript 代码。以下示例演示了如何将任意 PHP 变量传递给 JavaScript 代码：

```
<?php
    #
    # script.js.php
    #
    header("Content-type: text/javascript");
?>
var config = <?php echo json_encode(array(
   "foo" => "foo",
   "bar" => "bar",
   "baz" => array(
       "baz1",
       "baz2"
   )
)); ?>; 
```

`<script src>`您可以使用标签在您的 PHP 页面中包含“PHP 驱动的 JavaScript”文件：

```
<script type="text/javascript" src="script.js.php"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:46:57.807

如果将其放在单独的`.js`文件中，它将无法工作，因为 Javascript 是客户端而 PHP 是服务器端。

您的 PHP 变量现在才有效，因为它在您插入 javascript 之前在页面中较早地声明，因此它在页面加载时呈现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:47:53.723

你可以有一个 PHP 文件，其中包含你的`config.php`文件

```
include("config.php"); 
```

然后您可以在脚本标签中包含您的 jquery 代码

```
<script>
   // you jquery code with php config variables
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T12:28:41.750

**.js**

```
var qString = 'selectedID=' +selectedID;
$.post('/assets/inc/get-logged-info-card.php', qString, function (results) {
$("<div class='creditCardDetails' id='usercurrentccbox'>
    <div class='creditCard'>
    <div class='cardChoice'>
    <span>Choose Card Type</span>
    <input name='cctype' type='radio' value='V' class='lft-field' id='visa' />
    <label for='visa'></label>
    <input name='cctype' type='radio' value='M' class='lft-field' id='mastercard' />
    <label for='mastercard'></label><input name='cctype' type='radio' value='A' class='lft-field' id='amex' />
    <label for='amex'></label>
    </div>
    <!--cardChoice-->
    <div class='cardNumber'>
    <input name='ccn' id='ccn' type='text' class='long-field' value='"+results[0].maskccn+"' maxlength='19' readonly />
    </div>
    <div class='cardCVV'>
    <input name='cvv' id='cvv' type='text' maxlength='5' class='small-field' />
    </div>
    <div class='creditCardName'>
    <input name='ccname' id='ccname' type='text' class='long-field' value='"+results[0].ccname+"' readonly/>
    </div
    <div class='cardDate'>
    <input name='exp1' id='exp1' type='text' maxlength='2' class='small-field' value='"+results[0].ccm+"' readonly /><input name='exp2' id='exp2' type='text' maxlength='4' class='small-field' value='"+results[0].ccy+"' readonly />
    </div>
    </div><!--creditCard-->").insertAfter("#paymentCardChoice");
}, "json"); 
```

**.php**

```
<?php
$selectedID     =   $_POST['selectedID'];

$q = "SELECT * FROM tbl_user WHERE user_id = '$selectedID'";
$sql = mysql_query($q);

$results = array();
while($row = mysql_fetch_array($sql))
{
   $results[] = array(
      'cct'     => $row['user_cct'],
      'ccn'     => $row['user_ccn'],
      'maskccn'     => MaskCreditCard($row['user_ccn']),
      'ccname'      => $row['user_ccname'],
      'ccm'     => $row['user_date_m'],
      'ccy'     => $row['user_date_y']
   );
}
echo json_encode($results);
?> 
```

# javascript - ie8中的jquery出错

> ID：11206600
> 
> 赞同：1
> 
> 时间：2012-06-26T11:44:42.030
> 
> 标签：javascript, jquery, internet-explorer

我收到此错误：

> 网页错误详情
> 
> 用户代理：Mozilla/4.0（兼容；MSIE 8.0；Windows NT 5.1；Trident/4.0；.NET4.0C；.NET CLR 2.0.50727；.NET CLR 3.0.4506.2152；.NET CLR 3.5.30729）时间戳：星期二， 2012 年 6 月 26 日 11:31:22 UTC
> 
> 消息：对象不支持此属性或方法行：56 字符：650 代码：0

```
URI: http://api.apps.com/html/81 
```

> 消息：对象不支持此属性或方法行：56 字符：738 代码：0

```
URI: http://api.apps.com/html/81 
```

我不能依赖那个调试器，因为当我查看源代码时，我看到第 56 行是一条长线，我不知道错误到底在哪里？有没有办法追踪错误？错误不支持什么。这是第 56 行：

```
function send_email(to) {
    if (to.length == 0) {
        $("#email_loader").html("<p>Please enter an `email address</p>");
        $("#email_response").fadeIn(250);
    }
    else {
        _gaq.push(['_trackEvent', 'Email', FA.appID]);
        $("#email_loader").html("<img src='http://apps.com/img/ajax_load.gif' />");
        $("#email_response").fadeIn(500);
        $.get("/inc_appdl_main_api.php", {
            to: to,
            app_id: FA.appID
        }, function (data) {
            if (data.length > 0) {
                $("#email_loader").html(data);
                $("#email_response").delay(1000).fadeOut(500);
            }
        });
        setTimeout(FA.iframeClose, 2000);
    }
};
function iframeClose() {
    parent.postMessage("closeFA", "*");
};
$("#to").keypress(function (event) {
    if ((event.which == '13') && ($(this).val().length > 0)) {
        to = $(this).val();
        event.preventDefault();
        send_email(to);
    }
});
$("#email").click(function () {
    to = $("#to").val();
    send_email(to);
});
function set_url_target(url) {

} 
```

有没有办法在ie8中调试？

我查看了记事本++。它指向那里： char 791 to=$("#to").attr('value');send_email(to);

它出什么问题了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:55:29.060

确保在加载页面时控制台/开发人员工具处于打开状态，否则在您尝试使用`console.log`.

假设这不是问题，请尝试`console.log()`在各种函数调用周围自由添加语句，如下所示：

```
$("#email").click(function () {
    console.log('call 1...');
    to = $("#to").val();
    console.log('call 1 done.');
    send_email(to);
}); 
```

为它疯狂，希望你会在控制台中看到类似的东西

```
LOG: call 7... 
```

没有匹配`LOG: call 7 done.`。然后你就知道谁是罪魁祸首了。

该错误提到了几个字符数字，这些数字使您接近两个`.val()`电话。所以首先关注那些。只需将它们替换为常数即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:48:52.857

这对我有用：

`"to"`IE 由于变量而引发错误。我改变了这个：

```
$("#email").click(function () {
    to = $("#to").val();
    send_email(to);
}); 
```

对此：

```
$("#email").click(function () {
   var to = $("#to").val();
    send_email(to);
}); 
```

IE 停止抛出错误！！

# android - TableLayout放置

> ID：11206602
> 
> 赞同：0
> 
> 时间：2012-06-26T11:44:46.373
> 
> 标签：android, android-tablelayout

如何在屏幕中心的 5 上放置 TableLayout 的按钮 5 网格？

```
 <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
           android:id="@+id/Table5"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" 
            android:padding="30dp"
            android:weightSum="5"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:47:18.037

尝试将`android:layout_gravity="center"`属性添加到`TableLayout`

（如果这不起作用，请`TableLayout`用 a`LinearLayout`或类似的东西包装。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:49:00.760

```
<GridView
        android:id="@+id/myGrid"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:columnWidth="@dimen/grid_width"
        android:gravity="center"
        android:numColumns="auto_fit"
        android:paddingLeft="8dp"
        android:paddingRight="8dp"
        android:stretchMode="spacingWidth"
        android:verticalSpacing="8dp" /> 
```

并进入grid_width，您可以设置一个尺寸（对于hdpi，480/5）。我不知道这是否适合你的情况。但是试试看

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T12:58:21.737

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TableLayout
        android:id="@+id/tableLayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_centerInParent="true"
        android:layout_margin="10dp"
        android:background="#ffffff"
        android:gravity="center" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal" >

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="b11" />

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="b12" />

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="b13" />

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="b14" />

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="b15" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal" >

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="b21" />

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="b22" />

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="b23" />

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="b24" />

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="b25" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal" >

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="b31" />

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:text="b32" />

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="b33" />

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="b34" />

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="b35" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal" >

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="b41" />

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="b42" />

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="b43" />

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="b44" />

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="b45" />
        </TableRow>

        <TableRow
            android:id="@+id/tableRow5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal" >

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="b51" />

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="b52" />

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="b53" />

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="b54" />

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="b55" />
        </TableRow>
    </TableLayout>

</RelativeLayout> 
```

在 android 布局 XML 文件中使用上述代码使用 TableLayout 创建 5x5 按钮矩阵

# c++ - 使用 C++ 创建 HTML 报告

> ID：11206604
> 
> 赞同：8
> 
> 时间：2012-06-26T11:44:51.403
> 
> 标签：c++, html, visual-studio-2010

好吧，我已经完成了编码，所有的结果都准备好了，我现在需要做的就是创建 HTML 报告来显示这些结果。如何使用 C++ 创建 HTML 报告？任何想法？如果有帮助，我将使用 Visual Studio 编译和运行我的代码，尽管我不太热衷于使用 VS 库，并且我更喜欢使用 C++ 标准库（如果有的话）。先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:25:29.500

一种快速的方法是将 html 标签写为字符串。这是一个例子

```
 ofstream myfile;
    myfile.open ("C:\\report.html");
    myfile << "<!DOCTYPE html><html><head></head><body>"; //starting html

    //add some html content
    //as an example: if you have array of objects featuring the properties name & value, you can print out a new line for each property pairs like this:
    for (int i=0; i< reportData.length(); i++)
        myfile << "<p><span style='font-weight: bold'>" << reportData[i].name << "</span><span>" << reportData[i].value << "</span></p>";

   //ending html
    myfile << "</body></html>";
    myfile.close(); 
```

编辑：更新的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T08:35:10.787

您可能需要的是 C++ HTML 模板引擎。[你可以在这里](https://stackoverflow.com/a/412985/2013672)找到一个列表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T12:07:48.867

好吧，HTML 是文本，因此所有常规工具`write`都`std::ostream`完全能够为您生成输出。我建议您只生成描述数据结构层次结构的 XML，然后应用脚本、样式表或其他任何东西来根据您的喜好对其进行格式化。

# ef-code-first - EF 代码首次迁移 - 更改 Sql Azure 表键

> ID：11206609
> 
> 赞同：0
> 
> 时间：2012-06-26T11:45:10.073
> 
> 标签：ef-code-first, azure-sql-database, entity-framework-migrations

Sql Azure 不支持更改表键。有一个解决方法：创建一个新表，传输数据，删除旧表。

由于此限制，EF (4.3) 在更改表的键后无法迁移我的模型。

在应用手动工作后，我能做些什么来让 EF 代码首先接受新数据库？（无需删除整个数据库或触摸其他表）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:27:49.930

通过一些手动编辑，您可以在基于代码的迁移中完成所有这些工作。

*   更改模型中的密钥（通过注释或流式 API）。
*   从包管理器控制台运行`add-migration`以获取新的基于代码的迁移。
*   将迁移文件中生成的迁移步骤与 Azure 所需的 create-transfer-delete-rename 方法交换。

现在，当您运行应用程序时，更改密钥的更新将使用适合 Azure 的自定义迁移步骤完成，而不是使用默认代码。

# javascript - 选择特定 DIV 中的文本框（Jquery）

> ID：11206611
> 
> 赞同：0
> 
> 时间：2012-06-26T11:45:10.237
> 
> 标签：javascript, jquery

我需要一些关于我正在编写的 Javascript 的帮助。我有不同名称的不同 DIV 类，我想遍历每个 DIV 类。所以有一个外部循环来选择 DIV 类，然后有一个内部循环，它通过该 DIV 类并选择所有文本框值。

我的问题是我的 JQuery 选择每个 DIV 中的每个文本框。请参阅下面的代码。

**HTML**

```
<div class="Parent">

    <div class="Percentage">
    <pe:Percentage runat="server" />
    </div>

    <div class="Percentage">
    <pe:Percentage runat="server" />
    </div>

    <div class="Percentage">
    <pe:Percentage runat="server" />
    </div>

</div> 
```

**用户控制**

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="percentagerange.ascx.cs"   Inherits="js_percentagerange" %>
<div id="percentage">
<asp:TextBox runat="server" ID="txtPercentage1"  onchange="percentageCount()">50</asp:TextBox> <asp:Label runat="server" ID="lbl1" >%   </asp:Label>
<br  /><br />
<asp:TextBox runat="server" ID="txtPercentage2" onchange="percentageCount()">50</asp:TextBox> <asp:Label runat="server" ID="Label1">%  </asp:Label>
<br /><br />
<asp:TextBox runat="server" ID="txtPercentage3"   onchange="percentageCount()">0</asp:TextBox> <asp:Label runat="server" ID="Label2">%  </asp:Label>
<br /><br />
</div> 
```

**Javascript**

```
function percentageCount() {

    var totalPercentage = 0;

    $(".Parent").children().each(function(i, val) {
        alert($(".Parent").html());

        $(val + "[id*='txt']").each(function(i, val) {
            alert(this.value);
        });
    });

$(document).ready(function() {
    $(".Parent").children().each(function(i, val) {
    $(this).removeClass("Percentage").addClass("Percentage" + i);

    percentageCount();
}); 
```

基本上我想遍历每个 .Percentage 并访问文本框值。但仅适用于该 DIV。不是每个 DIV

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:23:57.520

不确定我是否正确理解了您的问题，但是：

代替

```
alert(this.value); 
```

尝试：

```
alert($(this).val()); 
```

# facebook-graph-api - 如果用户喜欢我的粉丝页面，我可以获得关于该用户的哪些额外信息？

> ID：11206615
> 
> 赞同：0
> 
> 时间：2012-06-26T11:45:34.837
> 
> 标签：facebook-graph-api

如果我是带有“喜欢”门的粉丝页面的管理员（即用户必须先喜欢该页面才能看到内容） - 我可以获得哪些关于喜欢我的页面的用户的信息？我可以看到他们喜欢的其他页面，等等？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:55:34.343

您获得的唯一额外信息是他喜欢该页面时的指示，仅此而已。

喜欢页面不会授予您的应用程序访问用户详细信息的权限，因此要获取除某些通用数据`signed_request`（如年龄范围和语言环境）之外的任何信息，您需要授权用户。

# android - 添加按钮时 TableLayout 的对齐问题

> ID：11206617
> 
> 赞同：0
> 
> 时间：2012-06-26T11:45:38.853
> 
> 标签：android, android-tablelayout

我为我的应用程序创建了一个`TableLayout`。一切正常，但是一旦我在页面底部添加按钮图像，对齐就会中断。这是输入按钮图像代码之前的图像：

![在此处输入图像描述](../Images/c5fc8288c7c471bfb3ef9c2cffa617c8.png)

输入按钮图像的代码后：

![在此处输入图像描述](../Images/7997b701115ebc4c37edce4c265d4638.png)

我的xml布局：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout  
    xmlns:android="http://schemas.android.com/apk/res/android"  
    android:id="@+id/tableLayout1"  
    android:layout_width="match_parent"  
    android:layout_height="match_parent"  
    android:shrinkColumns="*"  
    android:stretchColumns="*"
    android:background="@drawable/authenticinfo">  
    <TableRow  
        android:id="@+id/tableRow1"  
        android:layout_height="wrap_content"  
        android:layout_width="match_parent"  
        android:gravity="center_horizontal">  
        <TextView  
            android:layout_width="match_parent"  
            android:layout_height="wrap_content"  
            android:textStyle="bold"  
            android:typeface="serif"  
            android:textSize="18dp"              
            android:gravity="center"  
            android:layout_span="6"></TextView>  
    </TableRow>  
      <TableRow  
        android:id="@+id/tableRow2"  
        android:layout_height="wrap_content"  
        android:layout_width="match_parent"  
        android:gravity="center_horizontal">  
        <TextView               
            android:layout_width="match_parent"  
            android:layout_height="wrap_content"  
            android:textStyle="bold"  
            android:typeface="serif"  
            android:textSize="38dp"              
            android:gravity="center"  
            android:layout_span="6"></TextView>  
    </TableRow>  
        <TableRow  
        android:id="@+id/tableRow3"  
        android:layout_height="wrap_content"  
        android:layout_width="match_parent"  
        android:gravity="center_horizontal">  
        <TextView  
            android:id="@+id/textView2"  
            android:layout_width="match_parent"  
            android:layout_height="wrap_content"  
            android:textStyle="bold"  
            android:typeface="serif"  
            android:textSize="38dp"               
            android:gravity="center"  
            android:layout_span="6"></TextView>  
    </TableRow>      
            <TableRow  
        android:id="@+id/tableRow4"  
        android:layout_height="wrap_content"  
        android:layout_width="match_parent"  
        android:gravity="center_horizontal">  
         <ImageView
            android:id="@+id/imview"            
            android:layout_centerHorizontal="true"          
             android:layout_gravity="center"
            /> 
    </TableRow>  
     <TableRow  
        android:id="@+id/tableRow5"  
        android:layout_height="wrap_content"  
        android:layout_width="match_parent"  
        android:gravity="center_horizontal">  
        <TextView              
            android:layout_width="match_parent"  
            android:layout_height="wrap_content"  
            android:textStyle="bold"  
            android:typeface="serif"  
            android:textSize="20dp"               
            android:gravity="center"  
            ></TextView>  
    </TableRow>     
             <TableRow  
        android:id="@+id/tableRow6"  
        android:layout_height="wrap_content"  
        android:layout_width="match_parent"  
        android:gravity="center_horizontal">  
        <TextView  
            android:id="@+id/ProductID1"  
            android:text="Product ID"  
            android:textStyle="bold"  
            android:typeface="serif"></TextView>  
        <TextView  
            android:id="@+id/ProductID2"  
            android:text=":"  
            android:textStyle="bold"  
            android:typeface="serif"></TextView>  
        <TextView  
            android:id="@+id/ProductID3"  
            android:text="92173ad0"  
            android:textStyle="bold"  
            android:typeface="serif"></TextView>
    </TableRow>     
             <TableRow  
        android:id="@+id/tableRow7"  
        android:layout_height="wrap_content"  
        android:layout_width="match_parent"  
        android:gravity="center_horizontal">  
        <TextView  
            android:id="@+id/ProductID4"  
            android:text="产品编号 "  
            android:textStyle="bold"  
            android:typeface="serif"></TextView>  
        <TextView  
            android:id="@+id/ProductID5"  
            android:text=":"  
            android:textStyle="bold"  
            android:typeface="serif"></TextView>  
        <TextView  
            android:id="@+id/ProductID6"  
            android:text="92173ad0"  
            android:textStyle="bold"  
            android:typeface="serif"></TextView>
    </TableRow>     
              <TableRow  
        android:id="@+id/tableRow8"  
        android:layout_height="wrap_content"  
        android:layout_width="match_parent"  
        android:gravity="center_horizontal">  
        <TextView               
            android:layout_width="match_parent"  
            android:layout_height="wrap_content"  
            android:textStyle="bold"  
            android:typeface="serif"  
            android:textSize="8dp"               
            android:gravity="center"  
            android:layout_span="6"></TextView>  
    </TableRow> 
<TableRow  
        android:id="@+id/tableRow9"  
        android:layout_height="wrap_content"  
        android:layout_width="match_parent"  
        android:gravity="center_horizontal">  
        <TextView  
            android:id="@+id/Manf1"  
            android:text="生产日期  "  
            android:textStyle="bold"  
            android:typeface="serif"></TextView>  
        <TextView  
            android:id="@+id/Manf2"  
            android:text=":"  
            android:textStyle="bold"  
            android:typeface="serif"></TextView>  
        <TextView  
            android:id="@+id/Manf3"  
            android:text="01 Jan 2012"  
            android:textStyle="bold"  
            android:typeface="serif"></TextView>
    </TableRow> 
<TableRow  
        android:id="@+id/tableRow10"  
        android:layout_height="wrap_content"  
        android:layout_width="match_parent"  
        android:gravity="center_horizontal">  
        <TextView  
            android:id="@+id/Exp1"  
            android:text="有效日期  "  
            android:textStyle="bold"  
            android:typeface="serif"></TextView>  
        <TextView  
            android:id="@+id/Exp2"  
            android:text=":"  
            android:textStyle="bold"  
            android:typeface="serif"></TextView>  
        <TextView  
            android:id="@+id/Exp3"  
            android:text="01 Jan 2015"  
            android:textStyle="bold"  
            android:typeface="serif"></TextView>
    </TableRow>
    <TableRow  
        android:id="@+id/tableRow11"  
        android:layout_height="wrap_content"  
        android:layout_width="match_parent"  
        android:gravity="center_horizontal">  
        <TextView               
            android:layout_width="match_parent"  
            android:layout_height="wrap_content"  
            android:textStyle="bold"  
            android:typeface="serif"  
            android:textSize="8dp"               
            android:gravity="center"  
            android:layout_span="6"></TextView>  
    </TableRow>  
    <TableRow  
        android:id="@+id/tableRow12"  
        android:layout_height="wrap_content"  
        android:layout_width="match_parent"  
        android:gravity="center_horizontal">  
        <TextView  
            android:id="@+id/Mas1"  
            android:text="马来西亚出口许可证   "  
            android:textStyle="bold"  
            android:typeface="serif"></TextView>  
        <TextView  
            android:id="@+id/Mas2"  
            android:text=":"  
            android:textStyle="bold"  
            android:typeface="serif"></TextView>  
        <TextView  
            android:id="@+id/Mas3"  
            android:text=""  
            android:textStyle="bold"  
            android:typeface="serif"></TextView>
    </TableRow>
     <TableRow  
        android:id="@+id/tableRow13"  
        android:layout_height="wrap_content"  
        android:layout_width="match_parent"  
        android:gravity="center_horizontal">  
        <TextView  
            android:id="@+id/China1"  
            android:text="中国的进口许可证   "  
            android:textStyle="bold"  
            android:typeface="serif"></TextView>  
        <TextView  
            android:id="@+id/China2"  
            android:text=":"  
            android:textStyle="bold"  
            android:typeface="serif"></TextView>  
        <TextView  
            android:id="@+id/China3"  
            android:text=""  
            android:textStyle="bold"  
            android:typeface="serif"></TextView>
    </TableRow>    
      <TableRow  
        android:id="@+id/tableRow14"  
        android:layout_height="wrap_content"  
        android:layout_width="match_parent"  
        android:gravity="center_horizontal">  
        <TextView               
            android:layout_width="match_parent"  
            android:layout_height="wrap_content"  
            android:textStyle="bold"  
            android:typeface="serif"  
            android:textSize="28dp"               
            android:gravity="center"  
            android:layout_span="6"></TextView>  
    </TableRow>  

<TableRow  
        android:id="@+id/tableRow15"  
        >  
       <ImageView
            android:id="@+id/imbutt"            
            android:layout_centerHorizontal="true"          
             android:layout_gravity="center"
             android:background="@+drawable/buttonmainmenuoff"
            /> 
            <ImageView
            android:id="@+id/imbutt"            
            android:layout_centerHorizontal="true"          
             android:layout_gravity="center"
             android:background="@+drawable/buttonmainmenuoff"
            /> 
            <ImageView
            android:id="@+id/imbutt"            
            android:layout_centerHorizontal="true"          
             android:layout_gravity="center"
             android:background="@+drawable/buttonmainmenuoff"
            /> 
    </TableRow>

</TableLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:29:24.360

布局中断是因为`ImageViews`您在最后添加的列拉伸了它们所在的列（例如`ImageView`，您添加的第二个将拉伸`TextView`包含 的列`:`）。您没有说您希望它们如何放置，但您可以做的一件简单的事情是将它们包装在另一个布局中，如下`LinearLayout`所示：

```
 <TableRow android:id="@+id/tableRow15" >

        <LinearLayout
            android:layout_span="6"
            android:gravity="center" >

            <ImageView
                android:id="@+id/imbutt1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/ic_launcher" />

            <ImageView
                android:id="@+id/imbutt2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/ic_launcher" />

            <ImageView
                android:id="@+id/imbutt3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/ic_launcher" />
        </LinearLayout>
    </TableRow> 
```

当然，如果需要，您可以使用`layout_weight`属性传播它们。

作为旁注，您的布局中是否真的有 6 列（您将 设置`layout_span`为`6`）？另外，您是使用那些空单数`TextViews`还是仅将它们用作分隔符（如果这是您想要的，那么您可以考虑在之外的具有所需高度的简单`View`元素）？`TableRows`

# ios - AVFramework 会话问题

> ID：11206620
> 
> 赞同：0
> 
> 时间：2012-06-26T11:45:46.607
> 
> 标签：ios, cocoa-touch, avfoundation

当我尝试使用 AVFramework 捕获视频时，我收到一个异常 -11803，它表示会话未启动，第一次当我初始化会话时它工作正常，但在控制器更改然后再次返回到同一个控制器之后它引发异常，但在同一会话中图像捕获工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T04:59:32.060

问题解决了，问题是会话对象没有正确释放。

# javascript - 更改 url 中的 #id 并按 enter 不会导致导航到指定的 id

> ID：11206621
> 
> 赞同：1
> 
> 时间：2012-06-26T11:45:51.800
> 
> 标签：javascript, html, jquery, url

完整的代码复制粘贴在下面。我是 javascript 和 jquery 的新手，不知道为什么会发生以下情况：

假设我`http://someurlhere/#1`在浏览器 Google Chrome 中的 URL。如果我转到地址栏，只删除`1`上面 URL 中的数字，键入`2`并按`enter`，页面不会导航到带有 的部分`id=2`。现在，如果我再次进入地址栏并按下回车键，它将导航到带有`id=2`. 为什么我第一次按下时它不导航`enter`？

我一直在寻找，我认为这可能与`hashchange`事件有关。我在脚本中添加了最后几行。每当我更改 ID 号时，我都会在控制台中收到一条消息，但上述行为保持不变。有人可以解释为什么第一次按 enter 不起作用，但第二次起作用，我该如何解决？谢谢你。

编码：

```
<html>
<head>
    <title>Selecting multiple DIV tags with jquery</title>
    <script type="text/javascript" src="./jquery.js">
    </script>
    <style type="text/css">

        html{
            overflow: hidden;
        }
        .slide {
            display: block;
            position: absolute;
            border-style: solid;
            border-width: 1px;
            top: 0px;
            left: 0px;
            padding:20px;
            height: 95%;
            width: 100%;
        }
    </style>
</head>
<body>

    <br/><br/><br/><br/><br/><br/>
    <section class="slide">This is the first div.</section>
    <br/><br/><br/><br/><br/><br/>
    <section class="slide">
        This is the second div.

    </section>

    <br/><br/><br/><br/><br/><br/>
    <section class="slide">This is the third div.</section>
    <br/><br/><br/><br/><br/><br/>
    <section class="slide">This is the fourth div.</section>
    <br/><br/><br/><br/><br/><br/>
    <section class="slide">This is the fifth div.</section>
    <br/><br/><br/><br/><br/><br/>
    <section class="slide">This is the sixth div.</section>

    <script type="text/javascript">

        // Assign ids to each section in the order they appear.
        $("section").each(function(index){
            $(this).attr('id', index+1);
            $(this).append('<button onClick="nextdiv();">Some div</button>');
            $(this).css('opacity', 0);
        });

        // Check if the current url points to a specific id. If not point
        // it to id = 1, otherwise point it to the id specified in the URL.
        var currenturl = $(location).attr('href');

        var indexhash = currenturl.lastIndexOf('#')

        if (indexhash === -1){
            var newurl = currenturl + '#1';
            $("#1").css('opacity',1);
            window.location.href = newurl;
        }
        else {
            var currentid = currenturl.substring(indexhash, currenturl.length);
            console.log(currentid);
            $(currentid).css('opacity', 1);
            window.location.href = currenturl;
            // window.location.assign(currenturl);
        }

        var newurlid = function(){
            var currenturl = $(location).attr('href');
            var indexhash = currenturl.lastIndexOf('#');
            var currentid = currenturl.substring(indexhash+1, currenturl.length);
            var newid = parseInt(currentid, 10) + 1;
            var newurl = currenturl.substring(0,indexhash+1) + newid;
            return {'newurl': newurl, 'newid': newid}
        };

        nextdiv = function(){
            console.log(newurlid().newurl);
            var newid = parseInt(newurlid().newid);
            console.log(newid);
            var selectid = '#' + newid;
            $("section").each(function(index){
            $(this).css('opacity', 0);
            });
            $(selectid).css('opacity', 1);
            window.location.href = newurlid().newurl;
        };

        $(window).bind('hashchange', function() {
                var currenturl = $(location).attr('href');
                console.log(currenturl);
                window.location.href = currenturl;
        });

    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T11:47:48.820

ID 不能是数字，它们需要以字符开头。尝试类似 tab1、tab2、tab3 的方法。

至于哈希变化，你非常接近。您目前正在做的是在页面刷新时解析哈希。您还绑定了一个哈希更改事件，但目前它没有做任何事情。您需要将大部分哈希解析代码移动到这样的函数中：

```
var hashChange = function() {

// Check if the current url points to a specific id. If not point
        // it to id = 1, otherwise point it to the id specified in the URL.
        var currenturl = $(location).attr('href');

        var indexhash = currenturl.lastIndexOf('#')

        if (indexhash === -1){
            var newurl = currenturl + '#1';
            $("#1").css('opacity',1);
            window.location.href = newurl;
        }
        else {
            var currentid = currenturl.substring(indexhash, currenturl.length);
            console.log(currentid);
            $(currentid).css('opacity', 1);
            window.location.href = currenturl;
            // window.location.assign(currenturl);
        }

        var newurlid = function(){
            var currenturl = $(location).attr('href');
            var indexhash = currenturl.lastIndexOf('#');
            var currentid = currenturl.substring(indexhash+1, currenturl.length);
            var newid = parseInt(currentid, 10) + 1;
            var newurl = currenturl.substring(0,indexhash+1) + newid;
            return {'newurl': newurl, 'newid': newid}
        };

        nextdiv = function(){
            console.log(newurlid().newurl);
            var newid = parseInt(newurlid().newid);
            console.log(newid);
            var selectid = '#' + newid;
            $("section").each(function(index){
            $(this).css('opacity', 0);
            });
            $(selectid).css('opacity', 1);
            window.location.href = newurlid().newurl;
        };

}; 
```

并在 hashchange 事件和 DOM 准备就绪时调用它，所以基本上

```
 $(document).ready(hashChange);
 $(window).bind('hashchange', hashChange); 
```

# r - 我如何为这个混合设计实验计算误差率的方差分析？

> ID：11206623
> 
> 赞同：1
> 
> 时间：2012-06-26T11:45:54.297
> 
> 标签：r

使用下面的数据框，我设法计算了受试者反应时间的重复测量方差分析。这是有问题的数据框：

```
> str(a)
'data.frame':   2778 obs. of  9 variables:
 $ Phase    : Factor w/ 1 level "Test": 1 1 1 1 1 1 1 1 1 1 ...
 $ Subject  : Factor w/ 17 levels "1","2","3","5",..: 7 7 7 7 7 7 7 7 7 7 ...
 $ Group    : Factor w/ 2 levels "Attn","Dist": 1 1 1 1 1 1 1 1 1 1 ...
 $ Global   : Factor w/ 2 levels "D","S": 1 1 1 1 1 1 1 1 1 1 ...
 $ Local    : Factor w/ 2 levels "D","S": 1 1 1 1 1 1 1 1 1 1 ...
 $ trialtype: Factor w/ 1 level "Dist": 1 1 1 1 1 1 1 1 1 1 ...
 $ RT       : num  477 682 720 NaN 604 720 910 707 705 758 ...
 $ ACC      : logi  TRUE TRUE TRUE FALSE TRUE TRUE ... 
```

这是我用来计算反应时间方差分析的代码：

```
raw<-read.table('R_notarg_noattn.tdf',header=T)
head(raw)
str(raw)
raw$Subject = factor(raw$Subject)

raw$logrt = log10(raw$RT)  # logorithm of RT
hist(raw$logrt)

tsttrl_nooutliers = subset(raw, logrt>2 & ACC==TRUE)  # take values greater than 2 logs AND where subj responded correctly
attach(tsttrl_nooutliers)  # make column names available as global variables
hist(logrt)
summary(aovrt <- aov(logrt ~ Group*Global*Local + Error(Subject/(Global*Local)), subset=Phase=='Test', data=tsttrl_nooutliers))  # ANOVA table

meanrt=10^tapply(logrt,list( Global=Global, Local=Local, Group=Group), mean)  # de-log and calculate means by condition

par(mfcol=c(1,2))  # c() *combines* values into vector/list; par() sets graphical parameters... equivalent to Matlab's set() ????
barplot(meanrt[,,'Attn'],beside=T,ylim=c(700,1000),xpd=F)
barplot(meanrt[,,'Dist'],beside=T,ylim=c(700,1000),xpd=F)

detach(tsttrl_nooutliers) 
```

我想对错误率重复类似的分析，这些错误率编码在 boolean column`ACC`中。我想知道我应该怎么做，因为这个计算需要一个中间步骤，即按每个条件按主题计算错误率。当我说“条件”时，我的意思是说因素的独特组合，即 $Group、$Global、$Local、$trialtype（仅选择 $Phase == Test 的试验，如前面的片段）。

有人能指出我正确的方向吗？简而言之，我不清楚如何获得错误率，然后将其输入`aov`函数应该没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:37:00.083

我不同意使用 aov() 不会带来任何问题，因为您将从分析连续的结果转向离散的结果（乘以观察到的二项式）。撇开这通常需要泊松回归或逻辑回归这一事实不谈，可以在 $Subject、$Group、$Global、$Local 和 $trialtype 的类别中聚合“ACC”的总和/长度。目前，$trialtype 和 $Phase 只有一个级别，因此似乎不需要子集，但如果此 str() 输出位于子集上，则您可以将其限制为 $trialtype=="Test" 仅使用`a[a$trialtyp=="Test" , ]`作为您的数据框。

```
categ.a <- with( a, tapply(a$ACC, INDEX =list(Subject Group, Global, Local), 
                     FUN = function(x) {
                                   sum(x)/ length(x) } 
```

编辑 1：您可能想在 www.stackexchange.com 上寻求有关如何处理本研究设计以获得离散结果的统计咨询。如果您正确设置了 glm() 或 lmer() 分析，您甚至可能不需要此步骤。我一直在想，我可能会尝试将 $Subject 作为混合模型中的一个级别，其中 ACC==TRUE 作为泊松错误的结果，使用 log(length(ACC)) 的偏移量。

编辑2：如果您在每个主题和类别中有足够的数字，错误率是“伪连续的”，即大部分不是零，那么原始方法可能就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:58:08.007

您没有正确进行 RT 分析，因此很难了解如何进行错误分析。您不允许对原始值进行 ANOVA，您需要先汇总到条件。排除异常值后（这些异常值的理由是什么？）然后您需要聚合 rt.

```
agg <- aggregate( RT ~ Group + Global + Local + Subject, data = tsttrl_nooutliers, mean ) 
```

然后就可以进行建模了。我不想告诉你如何做准确度，尽管你现在应该能够弄清楚。你需要阅读[Dixon (2008)](http://www.psych.ualberta.ca/~pdixon/Home/resources/Dixon2008.pdf)和[Jaeger (2008)](http://psy2.ucsd.edu/~dhuber/Jaeger_2008.pdf)。不建议对精度进行方差分析，它们很好地涵盖了大部分原因。

# automation - 在 Jmeter 中处理动态 http 请求而不是硬编码的 http 请求

> ID：11206628
> 
> 赞同：-1
> 
> 时间：2012-06-26T11:46:00.273
> 
> 标签：automation, jmeter, load-testing, performance-testing

我正在一个 JSF Web 应用程序上创建一个 50 个用户的负载测试。

我使用 JMeter 代理为一个登录、执行一些数据库操作并注销的用户记录了一个场景。记录场景后，记录的测试包含http请求和特别属于用户在场景记录时使用**的数据。**

在对 50 个唯一虚拟用户运行测试时，记录的测试发送了记录场景中的 http 请求和数据。但在我们的应用程序中，http 请求和数据因用户而异。那么在JMeter中，当涉及到根据登录后用户数据的存在或不存在而调用方法时，我该如何处理这种情况呢？确切地说，我将如何更改我的测试计划以管理每个虚拟用户的动态 url 和动态数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T14:00:36.453

最新版本的 JMeter 允许您从头开始编写整个参数（原始数据），因此您可以在该字段中使用变量。

要实现动态 URL，请对先前的请求使用正则表达式提取器（后处理器），该请求定义将发送的请求并使用 HTTP 请求的路径字段中的变量。

如果您知道每种类型的用户将发送什么请求，您可以使用 If Controllers 并测试由先前的正则表达式提取器创建的线程变量，并在每个控制器中添加特定请求。

如果每个用户的后续请求由服务器定义，使用重定向，只需选中“Follow Redirection”字段。

有关如何执行此操作的更多示例，请参阅[JMeter Wiki 。](http://wiki.apache.org/jmeter)

# c# - 使用 SerializableDynamicObject 进行动态排序

> ID：11206631
> 
> 赞同：1
> 
> 时间：2012-06-26T11:46:03.963
> 
> 标签：c#, xml, wcf, serialization, dynamic

我需要根据运行时确定的标准对这些集合进行排序。

我使用本文中的代码[来](https://stackoverflow.com/questions/41244/dynamic-linq-orderby)执行排序 - 最初我的代码使用动态类。

然后我遇到了通过 WCF 进行序列化的问题，所以我转而使用[SerializableDynamicObject](http://loosexaml.wordpress.com/2011/01/01/wcf-serialization-of-dlr-dynamic-types/) ，现在排序代码中断了：

```
 PropertyInfo pi = type.GetProperty(prop); 
```

错误是 SerializableDynamicObject 没有名为“Name”的属性 - 其中“Name”是 prop 的值。

我想最简单的做法是找到另一种方法来序列化排序算法使用的动态类型。任何指向这个方向的指针将不胜感激！

我看过[这个](https://stackoverflow.com/questions/7501846/xml-serialize-dynamic-object)例子，但我收到错误消息：

```
The constructor with parameters (SerializationInfo, StreamingContext) is not found in ISerializable type 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:10:25.560

这是一些使用[FastMember](http://nuget.org/packages/FastMember)的代码，它适用于基于反射和`dynamic`基于的对象（取决于您传递给的内容`TypeAccessor.Create`）

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Dynamic;
using FastMember;

namespace ConsoleApplication6
{
    class Program
    {
        static void Main()
        {
            var list = new List<dynamic>();
            dynamic obj = new ExpandoObject();
            obj.Foo = 123;
            obj.Bar = "xyz";
            list.Add(obj);
            obj = new ExpandoObject();
            obj.Foo = 456;
            obj.Bar = "def";
            list.Add(obj);
            obj = new ExpandoObject();
            obj.Foo = 789;
            obj.Bar = "abc";
            list.Add(obj);

            var accessor = TypeAccessor.Create(
                typeof(IDynamicMetaObjectProvider));
            string propName = "Bar";
            list.Sort((x,y) => Comparer.Default.Compare(
                accessor[x, propName], accessor[y,propName]));

            foreach(var item in list) {
                Console.WriteLine(item.Bar);
            }
        }
    }
} 
```

值得一提的是，对于基于反射的类型，这不会**在**每个项目的基础上使用反射；所有这些都通过元编程进行了优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T14:05:45.330

Marc Gravell 的回答给了我完成这个任务的答案——我需要实现一个可以处理多个排序标准的排序器，直到运行时才知道。我正在接受 Marc 的回答，但将其发布为有人可能会发现它也很有用。

可能有一种更优雅的方式来实现这一点，如果是这样，请告诉我，我会更新答案。

```
 public class SerializableDynamicObjectComparer: IComparer
{
    private readonly List<KeyValuePair<string, bool>> sortCriteria = new List<KeyValuePair<string, bool>>();

    private readonly TypeAccessor accessor;

    public SerializableDynamicObjectComparer(IEnumerable<string> criteria)
    {
        foreach (var criterium in criteria)
        {
            string[]  sortCriterium = criterium.Split('.');

            this.sortCriteria.Add(new KeyValuePair<string, bool>(sortCriterium[0],
                                                                 sortCriterium.Length == 0
                                                                     ? sortCriterium[1].ToUpper() == "ASC"
                                                                     : false));
        }

        this.accessor = TypeAccessor.Create(typeof (IDynamicMetaObjectProvider));
    }

    public int Compare(object x, object y)
    {
        for(int i=0; i< this.sortCriteria.Count; i++)
        {
            string fieldName = this.sortCriteria[i].Key;
            bool isAscending = this.sortCriteria[i].Value;
            int result = Comparer.Default.Compare(this.accessor[x, fieldName], this.accessor[y, fieldName]);
            if(result != 0)
            {
                //If we are sorting DESC, then return the -ve of the default Compare result
                return isAscending ? result : -result;
            }
        }

        //if we get here, then objects are equal on all sort criteria.
        return 0;
    }
} 
```

用法：

```
var sorter = new SerializableDynamicObjectComparer(sortCriteria);

var sortableData = reportData.ToList();
sortableData.Sort(sorter.Compare); 
```

其中 sortCriteria 是一个字符串数组，例如

```
 new {"Name.DESC", "Age.ASC", "Count"} 
```

# java - 了解 Spring-social 中的 SignInAdapter

> ID：11206632
> 
> 赞同：3
> 
> 时间：2012-06-26T11:46:08.073
> 
> 标签：java, signing, spring-social

大家好，我阅读了很多关于 Spring-Social 的信息，我有一个问题。SignInAdapter 的 signIn 方法中的参数“userLocalId”是什么？我通过 facebook 注册用户，方法是在注册表格中获取信息。在此之后，我希望他按下 signIn_button(facebook signIn) 并可以访问我的网站。

我应该做这样的事情：在 SignInAdapter 我连接到 facebook 并将它的社交信息与我的用户表中的字段进行比较？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T03:33:39.913

Spring Social Integration 包含 3 个部分。

*   注册
    注册本地用户是根据提供商提供的信息创建的
*   连接
    在连接中，我们将本地用户映射到 openID 用户
*   登录登录我们允许经过openId
    身份验证的用户登录到我们的应用程序

**登录**
登录`SigninAdapter`用于加载本地用户，以便 Spring Security 层可以使用它。这里的`localUserId`参数将指向我们应用程序中用户的 ID。因此，在适配器中，我们需要将此用户加载为 an`org.springframework.security.core.userdetails.User`并将其设置为`SecurityContext`.

前任：

```
LocalUser lu = getLocalUser(localUserId); // Load the local user from database
User user = new User(lu.username, lu.password, lu.authorities)
UsernamePasswordAuthenticationToken result = new UsernamePasswordAuthenticationToken(user, user.getPassword(), user.getAuthorities());
SecurityContextHolder.getContext().setAuthentication(result); 
```

**Connect**
Spring Social Providers a`org.springframework.social.connect.web.ConnectController`这将帮助我们将本地用户链接到 openId 用户。
它要求您向 发送`POST`请求`/connect/<provider>`，这会将用户重定向到提供者的登录页面，用户必须在该页面对应用程序进行授权。

# android - WebView 从文件和网络加载

> ID：11206636
> 
> 赞同：0
> 
> 时间：2012-06-26T11:46:14.313
> 
> 标签：android, webview, webviewclient

我有一个将从文件或网络加载的网络视图。我将 设置`WebViewClient`为 webview 并覆盖功能`onPageFinished(WebView view, String url)`。

`onPageFinished`每次 webview 加载并完成时，无论它是从文件加载还是从 web 加载，它都会转到函数。

我的问题是，如果它从 FILE 加载，我可以跳过`onPageFinished`（或任何其他功能）`WebViewClient`吗？如果它从 WEB 加载，我还能去那里吗？

谢谢你的回答：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:19:07.387

我认为最好的方法是自己控制 onPageFinished() 的执行。检查方法内部是否 url 开始于`"file:///..."`或`"http://..."`

# c# - C#中的存储过程

> ID：11206641
> 
> 赞同：1
> 
> 时间：2012-06-26T11:46:45.133
> 
> 标签：c#, sql, .net, tsql, stored-procedures

我想在 c# 中使用存储过程。我在 sql server 中创建存储过程，并在程序中调用它。但是当我使用断点功能时，我知道数据不是从数据库中检索到的，因为断点跳过了循环。

.aspx 代码：

```
<asp:Button ID="Button1" runat="server" Text="Button" OnClick="store" />
<asp:Label ID="Label9" runat="server" Text="Label"></asp:Label> 
```

c#代码：

```
public void store(object sender, EventArgs ser)
{
    try
    {
        // c reate and open a connection object
        SqlConnection conn = Class3.GetConnection();

        // 1\. create a command object identifying the stored procedure
        SqlCommand cmd = new SqlCommand("storeprocedure3", conn);

        // 2\. set the command object so it knows to execute a stored procedure
        cmd.CommandType = CommandType.StoredProcedure;

        // 3\. add parameter to command, which will be execute the command
        SqlDataReader rdr = cmd.ExecuteReader();

        // iterate through results, printing each to console
        while (rdr.Read())
        {
            Label9.Text = rdr["menuename"].ToString();
        }
    }
    catch (Exception sa)
    {
        Console.WriteLine(sa);
    }
} 
```

存储过程：

```
CREATE PROCEDURE procedure3     
AS
BEGIN
    select menuename from menue;

END
GO 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T11:51:28.967

您的程序不匹配（**procedure3** vs **storeprocedure3**）

使用此代码

```
 SqlCommand cmd = new SqlCommand("procedure3 ", conn); 
```

并关闭你的连接

```
 SqlDataReader rdr = cmd.ExecuteReader(CommandBehavior.CloseConnection); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T11:53:58.610

IMO，这是最大和最可能的问题：

```
catch (Exception sa)
{
    Console.WriteLine(sa);
} 
```

我*想*它**真的很**努力地告诉你出了什么问题，但你让它沉默了。没有**任何理由**这样做`try`；`catch`如果这不起作用，那*就是非常错误的*- 让它出错。阅读异常详细信息。

如果我很挑剔（坦率地说，我很挑剔） - 你在这里**需要**更多`using`，即

```
using(SqlConnection conn = Class3.GetConnection())
using(SqlCommand cmd = new SqlCommand("whatever", conn))
{
    cmd.CommandType = CommandType.StoredProcedure;
    using(SqlDataReader rdr = cmd.ExecuteReader())
    {
        while (rdr.Read())
        {
           // do something
        }
    }
} 
```

或者，坦率地说，更简单的是，使用像 dapper 这样的工具：

```
using(SqlConnection conn = Class3.GetConnection())
{
    foreach(var obj in conn.Query("whatever",
          commandType: CommandType.StoredProcedure))
    {
        string menuename = obj.menuename;
        // do something...
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T11:55:07.637

是否`EXEC procedure`产生任何结果？

同样在您的代码中，您引用了存储过程，因为`storeprocedure3`实际上过程名称似乎是`procedure3`

将行更改为：

```
SqlCommand cmd = new SqlCommand("procedure3", conn); 
```

# iphone - 如何为从 uiimagepickercontroller 捕获的 uiimage 设置亮度

> ID：11206651
> 
> 赞同：0
> 
> 时间：2012-06-26T11:47:10.740
> 
> 标签：iphone, uiimagepickercontroller

我正在使用`UIImagePickerController`类。我有一个按钮，当我单击该按钮时，我希望图像变亮。我在网上搜索过，但我在搜索时找到的代码不起作用。

这是我找到并使用的代码：

```
- (UIImage *) brightness:(UIImage *)image
{

int level= 200;//put here an int value that go from -255 to 255;

CGImageRef inImage = image.CGImage;   //Input image cgi

CGContextRef ctx;

CFDataRef m_DataRef;
m_DataRef = CGDataProviderCopyData(CGImageGetDataProvider(inImage));
UInt8 * m_PixelBuf = (UInt8 *) CFDataGetBytePtr(m_DataRef);

int length = CFDataGetLength(m_DataRef);
CGImageGetBitsPerComponent(inImage), CGImageGetBitsPerPixel(inImage),CGImageGetBytesPerRow(inImage);

for (int index = 0; index < length; index += 4)
{
    Byte tempR = m_PixelBuf[index + 1];
    Byte tempG = m_PixelBuf[index + 2];
    Byte tempB = m_PixelBuf[index + 3];

    int outputRed = level + tempR;
    int outputGreen = level + tempG;
    int outputBlue = level + tempB;

    if (outputRed>255) outputRed=255;
    if (outputGreen>255) outputGreen=255;
    if (outputBlue>255) outputBlue=255;

    if (outputRed<0) outputRed=0;
    if (outputGreen<0) outputGreen=0;
    if (outputBlue<0) outputBlue=0;

    m_PixelBuf[index + 1] = outputRed; 
    m_PixelBuf[index + 2] = outputGreen; 
    m_PixelBuf[index + 3] = outputBlue;

}

ctx = CGBitmapContextCreate(m_PixelBuf,
                            CGImageGetWidth( inImage ),
                            CGImageGetHeight( inImage ),
                            8,
                            CGImageGetBytesPerRow( inImage ),
                            CGImageGetColorSpace( inImage ),
                            kCGImageAlphaPremultipliedFirst );

CGImageRef imageRef = CGBitmapContextCreateImage (ctx);
UIImage* rawImage = [UIImage imageWithCGImage:imageRef];

CGContextRelease(ctx);

CGImageRelease(imageRef); 

CFRelease(m_DataRef);

return rawImage; 

} 
```

图像仍然是原始图像的亮度，没有变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T13:50:32.183

总的来说，这个想法看起来不错，可能是更新像素数据时出错了。但要改变亮度，我建议使用 CoreGraphics 而不是软处理：

```
CGFloat brightness = 0.5;

UIGraphicsBeginImageContext(image.size);
CGRect imageRect = CGRectMake(0, 0, image.size.width, image.size.height);
CGContextRef context = UIGraphicsGetCurrentContext();

// Original image
[image drawInRect:imageRect]; 

// Brightness overlay
CGContextSetFillColorWithColor(context, [UIColor colorWithRed:1.0 green:1.0 blue:1.0 alpha:brightness].CGColor);
CGContextAddRect(context, imageRect);
CGContextFillPath(context);

UIImage* resultImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

您可以更改亮度叠加颜色以获得正确的结果。

# iphone - 缩放后无法在 UIScrollView 中设置图像

> ID：11206658
> 
> 赞同：0
> 
> 时间：2012-06-26T11:47:24.657
> 
> 标签：iphone, image, uiscrollview, uiimageview, uiscrollviewdelegate

我`ImageScrollView`用来显示图像。一开始我只显示小图像。当用户尝试缩放时，我会加载大图像。首先，我想使用以下代码执行此操作：

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollViewCalled
{
    ImageScrollView *scroll = (ImageScrollView *)scrollViewCalled;
    UIImageView *imageView = (UIImageView *)[scroll imageView];
    return imageView;
}

- (void)scrollViewWillBeginZooming:(UIScrollView *)scrollViewCalled withView:(UIView *)view
{
    ImageScrollView *scroll = (ImageScrollView *)scrollViewCalled;
    if (scroll != scrollViewCalled || scroll.isImageBig)
    {
        return;
    }
    scroll.userInteractionEnabled = NO;
    [self setBigImageInBackgroundForIndex:nil];
} 
```

但它的工作原理很奇怪：当我尝试缩放时，显示了大图像，但我看到了它的最大缩放比例，我无法滚动查看图像的其余部分。但是当我再放大一次而不是滚动图像时，它开始正常工作，我终于可以滚动图像了。但我应该为此放大 2 倍。

然后我尝试`scrollViewDidEndZooming`了`scrollViewWillBeginZooming`：

```
- (void)scrollViewDidEndZooming:(UIScrollView *)scrollViewCalled withView:(UIView *)view atScale:(float)scale
{
    ImageScrollView *scroll = (ImageScrollView *)scrollViewCalled;
    if (scroll != scrollViewCalled || scroll.isImageBig)
    {
        return;
    }
    scroll.userInteractionEnabled = NO;
    [self setBigImageInBackgroundForIndex:nil];
} 
```

一切都变得完美了，除了一件事：为时已晚。我缩放小图像，我看到它是缩放变体，然后加载大图像，我看到大图像的最小缩放。对于用户来说，该图像似乎回到了以前的缩放状态。只有当我尝试再放大一次时，我才能完美放大。

先感谢您！

这是 ImageScrollView 的代码：

```
ImageScrollView.h
#import <UIKit/UIKit.h>

@interface ImageScrollView : UIScrollView <UIScrollViewDelegate> {
    UIView        *imageView;
    NSUInteger     index;
}
@property (assign) NSUInteger index;
@property (retain, nonatomic) UIView        *imageView;
@property (assign, nonatomic) BOOL isImageBig;
@property (assign, nonatomic) BOOL hasImage;

- (void)displayImage:(UIImage *)image;
- (void)displayTiledImageNamed:(NSString *)imageName size:(CGSize)imageSize;
- (void)setMaxMinZoomScalesForCurrentBounds;

- (CGPoint)pointToCenterAfterRotation;
- (CGFloat)scaleToRestoreAfterRotation;
- (void)restoreCenterPoint:(CGPoint)oldCenter scale:(CGFloat)oldScale;

@end

ImageScrollView.m

#import "ImageScrollView.h"
#import "TilingView.h"

@implementation ImageScrollView
@synthesize index;
@synthesize imageView;
@synthesize isImageBig, hasImage;

- (id)initWithFrame:(CGRect)frame
{
    if ((self = [super initWithFrame:frame])) {
        self.showsVerticalScrollIndicator = NO;
        self.showsHorizontalScrollIndicator = NO;
        self.bouncesZoom = YES;
        self.decelerationRate = UIScrollViewDecelerationRateFast;
        self.delegate = self;        
    }
    return self;
}

- (void)dealloc
{
    [imageView release];
    [super dealloc];
}

#pragma mark -
#pragma mark Override layoutSubviews to center content

- (void)layoutSubviews 
{
    [super layoutSubviews];

    // center the image as it becomes smaller than the size of the screen

    CGSize boundsSize = self.bounds.size;
    CGRect frameToCenter = imageView.frame;

    // center horizontally
    if (frameToCenter.size.width < boundsSize.width)
        frameToCenter.origin.x = (boundsSize.width - frameToCenter.size.width) / 2;
    else
        frameToCenter.origin.x = 0;

    // center vertically
    if (frameToCenter.size.height < boundsSize.height)
        frameToCenter.origin.y = (boundsSize.height - frameToCenter.size.height) / 2;
    else
        frameToCenter.origin.y = 0;

    imageView.frame = frameToCenter;

    if ([imageView isKindOfClass:[TilingView class]]) {
        // to handle the interaction between CATiledLayer and high resolution screens, we need to manually set the
        // tiling view's contentScaleFactor to 1.0\. (If we omitted this, it would be 2.0 on high resolution screens,
        // which would cause the CATiledLayer to ask us for tiles of the wrong scales.)
        imageView.contentScaleFactor = 1.0;
    }
}

#pragma mark -
#pragma mark UIScrollView delegate methods

- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
{
    return imageView;
}

#pragma mark -
#pragma mark Configure scrollView to display new image (tiled or not)

- (void)displayImage:(UIImage *)image
{
    // clear the previous imageView
    [imageView removeFromSuperview];
    [imageView release];
    imageView = nil;

    // reset our zoomScale to 1.0 before doing any further calculations
    self.zoomScale = 1.0;

    self.imageView = [[[UIImageView alloc] initWithImage:image] autorelease];
    [self addSubview:imageView];

    self.contentSize = [image size];
    [self setMaxMinZoomScalesForCurrentBounds];
    self.zoomScale = self.minimumZoomScale;
//    self.zoomScale = self.maximumZoomScale;
}

- (void)setMaxMinZoomScalesForCurrentBounds
{
    CGSize boundsSize = self.bounds.size;
    CGSize imageSize = imageView.bounds.size;

    // calculate min/max zoomscale
    CGFloat xScale = boundsSize.width / imageSize.width;    // the scale needed to perfectly fit the image width-wise
    CGFloat yScale = boundsSize.height / imageSize.height;  // the scale needed to perfectly fit the image height-wise
    CGFloat minScale = MIN(xScale, yScale);                 // use minimum of these to allow the image to become fully visible

    // on high resolution screens we have double the pixel density, so we will be seeing every pixel if we limit the
    // maximum zoom scale to 0.5.
    CGFloat maxScale = 1.0 / [[UIScreen mainScreen] scale];
//    CGFloat maxScale = 4.0 / [[UIScreen mainScreen] scale];

    // don't let minScale exceed maxScale. (If the image is smaller than the screen, we don't want to force it to be zoomed.) 
    if (minScale > maxScale) {
        minScale = maxScale;
    }

    self.maximumZoomScale = maxScale;
    self.minimumZoomScale = minScale;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:58:25.483

添加这个方法：

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
return imageView;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:22:26.870

事实上，你不需要做那么多。创建一个滚动视图。创建具有更大图像的图像视图。设置 imageview 的 frame 和 scrollview 的 frame 相似。使用图像的宽度和高度设置滚动视图的内容大小。现在，从滚动视图的委托方法中，执行以下操作：

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
return imageView;
} 
```

# android - 如何从json字符串创建谷歌任务api任务对象

> ID：11206663
> 
> 赞同：0
> 
> 时间：2012-06-26T11:47:35.210
> 
> 标签：android

我能够将 Google 任务对象转换为 json 字符串，但是如何从 json 字符串构造 Task 对象。

我可以手动解析 json 字符串，但是由于 Task 类是一个 hashmap 对象，有没有直接简单的方法来做到这一点？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:18:14.650

Gson 可能是您正在寻找的 - [http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

它使 Java 对象和 Json 之间的转换变得容易。

# visual-c++ - 将项目从 vc6 转换为 vc9 的问题

> ID：11206664
> 
> 赞同：0
> 
> 时间：2012-06-26T11:47:37.660
> 
> 标签：visual-c++, compiler-errors, visual-c++-6, visual-c++-2008

我有一个用vc6构建的项目，现在我必须将它转换成vc9。

在代码中有一行

```
CMapStringToOb  cLogPathMap;
ofstream        tlogFile; 
```

但是当我构建项目时，会发生以下错误。

**错误 C2146：语法错误：缺少“；” 在标识符“tlogFile”之前**

**错误 C4430：缺少类型说明符 - 假定为 int。注意：C++ 不支持默认整数**

当我转到**ofstream**的定义时，文件**iosfwd**被打开，其中 ofstream 定义为

```
typedef basic_ofstream<char, char_traits<char> > ofstream; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:53:09.193

以下微软建议包含 fstream：http: [//msdn.microsoft.com/en-us/library/e9cabcax%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/e9cabcax%28v=vs.90%29.aspx)

因此，将以下行放在该 c++ 文件的标头包含中：

```
#include <fstream> 
```

# java - beans.xml 中的 ms sql 配置

> ID：11206673
> 
> 赞同：1
> 
> 时间：2012-06-26T11:47:58.310
> 
> 标签：java, sql-server-2008, struts

我已经安装了 MS SQL Server 2008，我想在带有 Struts 的 Java 项目中使用它。不幸的是，我无法在 Java 中配置它。我正在为 MsSql 使用 Windows 身份验证。那可能吗？

我的 beans.xml 文件看起来像：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" 
  "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.microsoft.sqlserver.jdbc.SQLServerDriver" />
        <!-- S2-Install-Start: INSERT DB SERVER HERE -->
        <property name="url" value="jdbc:sqlserver://localhost:1433;DatabaseName=MyDatabase" />
        S2-Install-End:
        <property name="username" value="Stefana\Steffi" />
        S2-Install-Start: INSERT DB PASSWORD HERE
        <property name="password" value="" />
        S2-Install-End:
    </bean> 
```

我不知道我应该在用户和密码字段中写什么？当我连接到 Ms Sql Server 时，我得到以下信息：

```
Servertype: DatabaseEngine

Servername: Stefana\SQLEXPRESS

Authentication: Windows Authentication

Username:Stefana\Steffi

Password: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T04:09:20.613

如果您使用[jTDS JDBC Driver](http://jtds.sourceforge.net/) for SQL Server，则可以使用 Windows 身份验证。jTDS 驱动程序是免费的、开源的，并且通常比官方的 Microsoft 驱动程序更强大。

如果您在项目中包含 jTDS jar，我相信这个数据源 URL 应该可以工作：

```
jdbc:jtds://localhost:1433/MyDatabase;domain=Stefana 
```

因为您在 Windows 上运行，所以 jTDS 驱动程序能够使用本机库自动使用您当前的凭据登录。但是，明确指定用户名和密码通常是一个更好的主意，因为这样您的 Web 应用程序的行为不会因启动它的人而异。

另请注意，默认情况下 SQL Server 2008 可能不会启用 TCP 连接。除非您打开它，否则您将无法连接 Microsoft 驱动程序或 jTDS 驱动程序。

**要启用 TCP 连接：**

*   打开*Sql Server 配置管理器*（它应该在您的开始菜单上）
*   在左侧的树中，导航到*SQL Server 网络配置*，然后导航到*MSSQLSERVER 的协议*
*   您应该在协议列表中看到*TCP/IP*。
*   如果其状态为*已禁用*，则双击它，并将已*启用*选项更改为*是*，然后单击*确定*
*   您现在需要重新启动 SQL Server。导航到*SQL Server 服务*项
*   右键单击服务列表中的*SQL Server (MSSQLSERVER)*
*   选择*重启*
*   您现在应该能够从 Java Web 应用程序连接到 SQL Server

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T14:07:07.883

replace the property:

```
<property name="url" value="jdbc:sqlserver://localhost:1433;DatabaseName=MyDatabase" /> 
```

for:

```
<property name="url" value="jdbc:sqlserver://localhost:1433;DatabaseName=MyDatabase;" /> 
```

Done!!!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:53:38.490

这不是正确的做法。

你拥有那个数据库吗？您的配置显示“localhost”，所以我假设是的。您应该从 SQL Server 为您的应用程序使用另一个用户名和密码，而不是 Windows 身份验证。我会为此应用程序创建一个单独的用户。仅授予它对应用程序模式的访问权，并授予完成其任务所需的最低权限（例如，如果不需要，则没有 DELETE 权限；如果不需要，则不能访问 SYSTEM 表；如果不需要，则不能运行存储过程）。

更好的解决方案是使用 JNDI 数据源，并且在您的机器上没有纯文本密码。

# asp.net-mvc - MVC如何在使用脚手架创建VIEW时隐藏ID字段

> ID：11206674
> 
> 赞同：0
> 
> 时间：2012-06-26T11:48:02.707
> 
> 标签：asp.net-mvc, entity-framework, data-annotations, poco, t4

我有一个使用 POCO T4 模板生成的类，我正在使用此代码向部分类添加一些 DataAnnotation。

我想知道：

如何隐藏字段 OptionId（在数据库中是带有 IDENTITY 的主键），因此用户不需要在视图中输入此值（但在模型中设置）。

另外我想知道是否 `[DatabaseGenerated(DatabaseGeneratedOption.Identity)]` 是 REQUIRED 或带有 POCO 的 EF 会自动创建新 ID（是 IDENTITY）

```
namespace MyProject.Models
    {
        [MetadataType(typeof(ReOptionMetadata))]
        public partial class ReOption
        {
            private class ReOptionMetadata
            {
                [Key]
                [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
                [HiddenInput(DisplayValue = false)] // Is it correct?
                public int OptionId { get; set; }
                [Required]
                public string Name { get; set; }
                [Required]
                public string Value { get; set; }
                [Required]
                public string Description { get; set; }
                [Required]
                public string NoteInternal { get; set; }    
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:54:39.543

`@Html.HiddenFieldFor(model => model.ColumnWhichContainsTheId)`?

# c - c中的函数指针声明

> ID：11206676
> 
> 赞同：0
> 
> 时间：2012-06-26T11:48:27.207
> 
> 标签：c

我正在经历 k&r 复杂的声明部分。我对这个特定的声明有疑问。

```
char(*(*x[3])())[5] 
```

为什么不能 `char[5] (*(*x[3])())` ？这个声明是否合法？

```
 int* (*(*x)())[2]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:04:28.720

根据运算符的优先级并应用螺旋规则，

```
char(*(*x[3])())[5] 
```

相当于

> x 是指向函数的指针数组，返回指向 char 数组的指针

但在，

```
char[5] (*(*x[3])()) 
```

数组下标应该在声明的末尾，从而导致语法错误。`nothing`当您对此应用螺旋规则时，您会碰到。

还，

```
int* (*(*x)())[2]; 
```

是完全合法的，它的声明可以表述为

> x 是指向函数的指针，返回指向指向 int 的指针数组的指针

Check out the [Java applet](http://www.muquit.com/muquit/software/cdcl/cdcl.html) which can help you decode complicated declarations and also read these [articles](http://www.geeksforgeeks.org/archives/9677) of how to form complicated declarations.

@Steve Jessop's comment also seems plausible as to why the `[]` go at the end.

# html - 如何让 IE 尊重最大和最小宽度

> ID：11206680
> 
> 赞同：0
> 
> 时间：2012-06-26T11:48:39.563
> 
> 标签：html, css, internet-explorer

> **可能重复：**
> [如何使 IE 支持最小宽度/最大宽度 CSS 属性？](https://stackoverflow.com/questions/5968779/how-to-make-ie-support-min-width-max-width-css-properties)

我有一个网站，它的主要导航位于列表中（向左浮动）。

li 元素需要具有最小和最大宽度。当然，这个 css 在所有好的浏览器中都可以正常工作。但是 IE (9) 对此没有反应。

```
 ul.dropdown li {
            line-height: normal;
                    text-align: center;
            max-width: 145px;
            min-width: 88px;
            min-height: 30px;
        } 
```

如果我在一种情况下使用此代码，例如最大宽度 IE 尊重它。 [http://perishablepress.com/maximum-and-minimum-height-and-width-in-internet-explorer/](http://perishablepress.com/maximum-and-minimum-height-and-width-in-internet-explorer/)

但当然我不能将它用于最小宽度。

我需要一个 IE 尊重最大和最小宽度的解决方案。

有解决办法吗？

谢谢你！

* * *

编辑：我忘了提到我已经添加了

`<!DOCTYPE html`>

;)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T13:50:37.613

好的，我发现了问题。它不在代码中，我的 IE 只是自动切换到 Quirks 模式。通过进入控制台（F12）更改它并将文档模式更改为IE9！

谢谢你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:35:17.490

试试这个（它在我的 ie8 上工作）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>template</title>
<style type="text/css">
 #content{
   height:400px;
   background:yellow;
   *width: expression(if(document.body.clientWidth < 534){"533px";}else if(document.body.clientWidth > 776){"777px";}else{ "auto"; }); /* set min-width for IE */
   background: red;
 }

</style>

</head>
<body>
<div id="content">
hello
</div>
</body>
</html> 
```

我不知道怎么写这个？和 ：。

用这个破解宽度：http: [//paulirish.com/2009/browser-specific-css-hacks/](http://paulirish.com/2009/browser-specific-css-hacks/)

# php - 如何选择 NO ID 增加的最后一行

> ID：11206684
> 
> 赞同：1
> 
> 时间：2012-06-26T11:48:55.387
> 
> 标签：php, mysql

如何选择 MySQL 表中的最后一行？

我正在插入数据，我需要从上一行中检索列值。

（顺便说一下，我正在使用 PHP。） table1 是这样的

```
table1
******************
cate_id | task_id | start_date  |     end_date | line |

 1         2        30/04/2012      26/06/2012    text
 3         1        26/06/2012      27/06/2012    text
 2         1        27/06/2012      01/01/9999    text 
```

在`NO an auto_increment`那张桌子上有。

我的情况是更新表中现有的最后一行，然后插入一个新行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T11:50:11.987

您已经编辑了问题，所以这里是更新

```
SELECT MAX(cate_id) AS last_cate_id FROM table; 
```

或者您可以通过以下方式获取下一个 ID：

```
SELECT MAX(cate_id)+1 AS next_cate_id FROM table; 
```

如果没有事务，这很容易插入相同的 cate_id！

如果您不能使用它们，例如因为 MyISAM，您可以使用 select 插入。

```
INSERT INTO table
(cate_id, task_id ..)
VALUES
( (SELECT MAX(cate_id)+1 AS next_cate_id FROM table), 1 ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T12:27:04.810

如果您没有订单，您将无法获得“LAST”值或第一个值，因为订单将不一样（必然），如果您没有自动增量，您怎么知道哪个是第一个还是最后一个？，如果您使用日期或自动增量，您将能够得到它，但是，假设您有订单，`'column1'`您可以执行以下操作：

```
select * from table1 order by `column1` desc limit 1 
```

# php - 将数组发送到 php 函数

> ID：11206687
> 
> 赞同：0
> 
> 时间：2012-06-26T11:49:05.167
> 
> 标签：php, javascript, jquery

我正在尝试使用 $_POST 将数组发送到 php 文件，但仍然总是得到一个未定义的变量！

```
var all = [];
var textInput = $('input[type=text]');
var checkBox = $('input[type=checkbox]');
var radio = $('input[type=radio]');
textInput.each(function () {
    if ($(this).val() != "") {
        name = $(this).attr('name');
        value = $(this).attr('value');
        all[name] = value;
    }
});
checkBox.each(function () {
    if ($(this).attr("checked")) {
        name = $(this).attr('name');
        value = $(this).attr('value');
        all[name] = value;
    }
});
radio.each(function () {
    if ($(this).attr("checked")) {
        name = $(this).attr('name');
        value = $(this).attr('value');
        all[name] = value;
    }
});
var getSelect = $('#experince');
if (getSelect[0].selectedIndex != 0) {
    name = getSelect[0].name;
    value = getSelect[0].selectedIndex;
    all[name] = value;
}
$.post('test.php', all, function (data) {
    alert(data);
    $.each(data, function (key, value) {
        alert(value);
    });
}, 'json'); 
```

PHP文件

```
 if(!isset($_POST['workF'])){
    $_POST['workF'] ="undefine";
}

if(!isset($_POST['workP'])){
    $_POST['workP']="undefine";

}

if(!isset($_POST['gender'])){
    $_POST['gender']="undefine";
}

if(!isset($_POST['experince'])){
    $_POST['experince']="undefine";
}

if (!isset($_POST['jobs'])){
    $_POST['jobs']="undefine";
}

if(!isset($_POST['location'])){
    $_POST['location']="undefine";

}

$work_type_f = $_POST['workF'];
$work_type_p = $_POST['workP'];
$gender = $_POST['gender'];
$experince = $_POST['experince'];
$jobs = $_POST['jobs'];
$location =$_POST['location']; 
```

![在此处输入图像描述](../Images/a254d363f7792bef41f66a691a9d03f0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:53:22.390

您最好在字典上运行**JSON.stringify()**，然后在 PHP 中使用**JSON_decode()**来检索数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:55:27.780

`all`应该是一个**对象**，而不是一个数组：

```
var all = {}; 
```

jQuery 在将它传递给 时会为您进行必要的转义`$.post`，但它不会读取数组的对象属性。

然而[，正如乔伊所说](https://stackoverflow.com/questions/11206687/sending-array-to-php-function#comment14712586_11206687)，你只是想在这里模仿一种形式。确保输入全部包含在单个表单中，并用于[`.serialize()`](http://api.jquery.com/serialize/)获取可以与 HTTP 请求一起发送的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:56:05.247

对不起，如果我没有很好地理解，但是为什么你不使用这样的 html 属性呢？

```
<input type="text" name="all[nameOfText]" />
<input type="text" name="all[nameOfText2]" />

<input type="radio" name="all[nameOfRadio]" />
... 
```

# sass - 如何使用“compass compile”命令覆盖只读文件？

> ID：11206688
> 
> 赞同：0
> 
> 时间：2012-06-26T11:49:09.293
> 
> 标签：sass, file-permissions, compass-sass

我有来自 TFS 服务器的 MS Visual Studio Web 项目文件夹，其中包含几个 *.scss 文件，并且已经生成了 *.css（由 Mindscape Web Workbench Visual Studio 插件）。

在发布站点之前要使用 Compass 重新生成 *.css 文件。
但是文件 *.css 文件包含在项目中并签入，因此它们被标记为**只读**文件属性。

我的命令行：

```
C:\Ruby193\bin>compass compile
   --force
   --sass-dir 'd:\SDesign'
   --css-dir 'd:\SDesign' 
   --output-style compressed
   --no-line-comments
   --relative-assets
   --trace 
```

结果如下：

```
overwrite Style.css
Errno::EACCES on line ["56"] of C: Permission denied - d:/SDesign/Style.css
  C:/Ruby193/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/actions.rb:56:in `open'
  C:/Ruby193/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/actions.rb:56:in `write_file'
  C:/Ruby193/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/compiler.rb:144:in `compile'
  C:/Ruby193/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/compiler.rb:118:in `compile_if_required'
  C:/Ruby193/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/compiler.rb:103:in `block (2 levels) in run'
  C:/Ruby193/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/compiler.rb:101:in `each'
  C:/Ruby193/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/compiler.rb:101:in `block in run'
  C:/Ruby193/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/compiler.rb:126:in `timed'
  C:/Ruby193/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/compiler.rb:100:in `run'
  C:/Ruby193/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/commands/update_project.rb:45:in `perform'
  C:/Ruby193/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/commands/base.rb:18:in `execute'
  C:/Ruby193/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/commands/project_base.rb:19:in `execute'
  C:/Ruby193/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/exec/sub_command_ui.rb:43:in `perform!'
  C:/Ruby193/lib/ruby/gems/1.9.1/gems/compass-0.12.1/lib/compass/exec/sub_command_ui.rb:15:in `run!'
  C:/Ruby193/lib/ruby/gems/1.9.1/gems/compass-0.12.1/bin/compass:29:in `block in <top (required)>'
  C:/Ruby193/lib/ruby/gems/1.9.1/gems/compass-0.12.1/bin/compass:43:in `call'
  C:/Ruby193/lib/ruby/gems/1.9.1/gems/compass-0.12.1/bin/compass:43:in `<top (required)>'
  C:/Ruby193/bin/compass:19:in `load'
  C:/Ruby193/bin/compass:19:in `<main>' 
```

有没有办法不手动重置目标 *.css 文件的只读属性？
也许一些*神奇的*命令参数？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:34:00.087

这是我的临时解决方案。
如果您知道更好的方法，请告诉我！

```
@echo off
set ruby_bin=c:\Ruby193\bin
set project_path=d:\CDesign
set temp_path=%project_path%\temp

if exist "%temp_path%" rd "%temp_path%" /Q /S
mkdir "%temp_path%"

call %ruby_bin%\compass.bat compile --force --sass-dir '%project_path%' --css-dir '%temp_path%' --output-style compressed --no-line-comments --relative-assets

xcopy %temp_path%\*.* %project_path% /S /R /Y
rd "%temp_path%" /Q /S 
```

# sql-server-2008 - 如果我们对另一个表中的列有外键约束，如何截断主键表？

> ID：11206690
> 
> 赞同：2
> 
> 时间：2012-06-26T11:49:11.107
> 
> 标签：sql-server-2008, sql-server-2008-r2

嗨，我正在使用 sql server 2008 r2，我遇到了一个真正的问题。我有一个表 A 和表 B，其中我在表 A 中有一个列 IID 作为主键约束。和相同的列，即表 B 中的 IID 作为外键约束。我有一种情况，我想截断表 A。在运行查询截断表 A 时，它给了我以下错误。

```
Msg 4712, Level 16, State 1, Line 1 
Cannot truncate table 'A' because it is being referenced by
a FOREIGN KEY constraint. 
```

我的问题是我无法对表 B 执行任何 DML 和 DDL 操作。我如何截断表 A？谢谢！在先进。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T12:07:33.703

允许截断的唯一方法是删除针对表 A 的外键约束。约束是否被禁用或两个表都为空都没有关系，SQL Server 仍然不允许它。因此，如果您有方便的外键定义，您可以这样做：

```
ALTER TABLE dbo.TableB DROP CONSTRAINT FK_whatever;

TRUNCATE TABLE dbo.TableA;

ALTER TABLE dbo.TableB ADD CONSTRAINT FK_Whatever
  FOREIGN KEY ...; 
```

否则，正如@Damien 所说，解决“真正问题”的方法是使用`DELETE`而不是`TRUNCATE`. 如果您还`TRUNCATE`用于重置`IDENTITY`列，则可以执行 a`DELETE`然后 a [`DBCC CHECKIDENT('dbo.TableA', RESEED, 1);`](http://msdn.microsoft.com/en-us/library/ms176057.aspx)...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:51:38.560

如果你不能对表 B 做任何事情，那么你将不得不让 SQL Server 验证它没有删除表 B 引用的行。

所以，它很好，很慢，有记录`DELETE FROM A`。

# sql - 我的查询有问题吗？（日期）

> ID：11206696
> 
> 赞同：0
> 
> 时间：2012-06-26T11:49:25.607
> 
> 标签：sql

此查询应该获取在特定日期创建的学生数据。但是，如果我为 @NumberOfDays 输入 15，它会返回 15 天和 14 天的数据，如果我输入 20，这一次它会带来 19 天和 20 天的数据。有人可以帮我解决我的问题吗？我不知道我做错了什么。

```
SELECT TOP 10 S.Id, S.Name, S.Surname, S.DateCreated
FROM STUDENT S WITH(NOLOCK)
WHERE DATEDIFF(day, CAST(S.DateCreated AS date), CAST(GETDATE() AS date)) = @NumberOfDays 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:53:23.530

```
SELECT TOP 10 S.Id, S.Name, S.Surname, S.DateCreated
FROM STUDENT S WITH(NOLOCK)
WHERE DATEDIFF(day, CAST(S.DateCreated AS date), CAST(GETDATE() AS date)) 
Between @NumberOfDays-1 and @NumberOfDays 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:13:11.023

**有了这个查询，它终于可以工作了！**

```
SELECT TOP 10 S.Id, S.Name, S.Surname, S.DateCreated
FROM STUDENT S WITH(NOLOCK)
WHERE CAST(S.DateCreated AS DATE) = CAST(DATEADD(DAY, -@NumberOfDays, GETDATE()) AS DATE) 
```

# javascript - 使用内置的喜欢操作 (og.likes) 检查当前用户是否喜欢某个 URL

> ID：11206707
> 
> 赞同：3
> 
> 时间：2012-06-26T11:50:06.933
> 
> 标签：javascript, facebook

[我的应用程序使用 Facebook 官方内置的 like action](http://developers.facebook.com/docs/opengraph/actions/builtin/likes/)实现了一个自定义的 like 按钮。

唯一缺少的部分是如果用户已经喜欢该资源，则禁用该按钮。在使用 FQL 测试各种方法均未成功后，我刚刚尝试针对[https://graph.facebook.com/<user_id>/og.likes](https://graph.facebook.com/<user_id>/og.likes)发出 get 请求，这会返回 Open Graph 之类的当前用户。

不幸的是，我似乎无法找到一种方法来过滤特定 object_id 的结果。任何人都可以推荐解决方案或知道使用 FQL 完成相同任务的方法吗？请注意，我们在这里谈论的是 Open Graph Likes，这似乎与使用 Facebook Like 按钮创建的标准点赞不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T22:13:59.410

我也一直在努力了解如何使用图形 API 或 FQL 获取有关这些 og.like 的信息。它们似乎没有存储在任何常用表（url_like 或 link_stat）中。这可能不是“正确”的做法，但我就是这样做的。

为了检查用户是否喜欢该对象，我正在使用您提到的 Graph API，使用 URL graph.facebook.com/[userid]/og.likes。然后我只是在响应中循环遍历数组，并查找与我感兴趣的对象的 URL 或 ID 匹配的数组。如果用户有很多 og.like，这并不是特别有效，但它会得到任务完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T01:31:30.087

看起来你可以为你的 URL 设置一个 Like 按钮，然后在 WHERE 子句中通过 ANDing "url=" 来检查用户是否喜欢它： `https://api.facebook.com/method/fql.query?query=SELECT url FROM url_like WHERE user_id = me() and url="http://www.yourUrl.com"&access_token=...`

请注意，网址必须在“引号”中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T12:53:38.207

我不确定 API 是否可用。

但是，您有解决方法。当您知道正在查看的资源时，您就知道用户 ID，当您发布任何操作时，将其存储在您的数据库中并使用该信息来禁用喜欢。

一旦我找到更多信息，我会及时通知您。

**编辑**

> 一个 FQL 表，其中包含用户喜欢的 Open Graph URL。
> 
> 要阅读您需要的 url_like 表
> 
> user_likes 当前会话用户喜欢的所有 Open Graph URL 的权限 用户friend_likes 当前会话用户的朋友喜欢的所有 Open Graph URL 的权限

来源：[用户喜欢](https://developers.facebook.com/docs/reference/fql/url_like/)

# ios - InAppSettings 在启动时未填充

> ID：11206708
> 
> 赞同：0
> 
> 时间：2012-06-26T11:50:09.777
> 
> 标签：ios, iphone, settings.bundle, inappsettingskit

我正在使用来自[http://www.inappsettingskit.com/](http://www.inappsettingskit.com/)的应用内设置。这真的很棒，但我不知道如何让设置在启动时自动加载到应用内设置中。

当我第一次启动我的应用程序时，所有应用程序内的多值单元格都是空白的。

我想知道的是第一次启动应用程序时如何加载它们？

默认值是从设置包中加载的，但不会传递到应用内设置...目前这是我的代码...

-applicationDidFinishLaunching：

```
//It is here that we set the defaults
    NSString *textValue = [[NSUserDefaults standardUserDefaults] stringForKey:@"title_key"];

    //If the first value is nil, then we know that the defaults are not set.
    if(textValue == nil)
    {
        //We set the default values from the settings bundle.

        //Get the bundle path
        NSString *bPath = [[NSBundle mainBundle] bundlePath];
        NSString *settingsPath = [bPath stringByAppendingPathComponent:@"Settings.bundle"];
        NSString *plistFile = [settingsPath stringByAppendingPathComponent:@"Root.plist"];

        NSDictionary *settingsDictionary = [NSDictionary dictionaryWithContentsOfFile:plistFile];
        NSArray *preferencesArray = [settingsDictionary objectForKey:@"PreferenceSpecifiers"];

        NSDictionary *item;

        NSString *title_Key;
        NSString *detail_Key;
        NSString *sort_Key;

        for(item in preferencesArray)
        {
            //Get the key of the item.
            NSString *keyValue = [item objectForKey:@"Key"];

            //Get the default value specified in the plist file.
            id defaultValue = [item objectForKey:@"DefaultValue"];

            if([keyValue isEqualToString:@"title_key"]) title_Key = defaultValue;
            if([keyValue isEqualToString:@"detail_key"]) detail_Key = defaultValue;
            if([keyValue isEqualToString:@"sort_key"]) sort_Key = defaultValue;

        }

        //Now that we have all the default values.
        //We will create it here.
        NSDictionary *appPrerfs = [NSDictionary dictionaryWithObjectsAndKeys:
                                   [NSNumber numberWithInt:2], @"title_key",
                                   [NSNumber numberWithInt:4], @"detail_key",
                                   [NSNumber numberWithInt:2], @"sort_key",
                                   nil];

        [[NSUserDefaults standardUserDefaults] registerDefaults:appPrerfs];
        [[NSUserDefaults standardUserDefaults] synchronize];
    } 
```

我也尝试了第一个答案中的建议，创建一个单独的 userDefaults.plist 并从那里加载默认值，我的应用程序仍然获得默认值，但它们没有传递到应用程序内设置。

![在此处输入图像描述](../Images/d34cb357ead6e36324eb1a7831661ebe.png)

我认为它应该在第一次启动应用程序时看起来像这样......

![在此处输入图像描述](../Images/47aedc5a8dab245b7dd57c3a77c0a85f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:57:16.627

你想注册你的`NSUserDefaults`第一个。看看这个[描述](https://github.com/futuretap/InAppSettingsKit/issues/68)。

# android - 致命异常 main : 无法启动活动组件

> ID：11206710
> 
> 赞同：0
> 
> 时间：2012-06-26T11:50:15.327
> 
> 标签：android, fatal-error

我正在解析数据并将其显示在 textview 上。虽然我已经初始化了清单文件中的所有变量和必要的权限。我仍然收到致命错误。请看一下代码。提前致谢。

如果我使用 android 2.1 i.ie API-7 ..但是如果我用 android 4.0.3 ie API-15 替换它，应用程序将成功运行 ..它会抛出相同的 reeor ..正如我在 logcat 文件中提到的

主要活动

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

View layout = findViewById(R.id.layout);

TextView id[];
TextView Name[];
TextView Email[];
TextView Address[];

try{
    SAXParserFactory saxPF= SAXParserFactory.newInstance();
     SAXParser saxP = saxPF.newSAXParser();
     XMLReader xmlR = saxP.getXMLReader();

     URL url = new URL("http://xyz");

     XMLHandler myXMLHandler = new XMLHandler();
     xmlR.setContentHandler(myXMLHandler);
     xmlR.parse(new InputSource(url.openStream()));

}catch(Exception e){
    e.printStackTrace();
}

data= XMLHandler.data;

id = new TextView[data.getId().size()];
Name = new TextView[data.getName().size()];
Email = new TextView[data.getEmail().size()];

for(int i=0 ; i <data.getName().size(); i++)
{
    id[i] = new TextView (this);
    id[i].setText("Id : " + data.getId().get(i));

    Name[i] = new TextView(this);
    Name[i].setText("Name : " + data.getName().get(i));

    Email[i] = new TextView(this);
    Email[i].setText("Email : " + data.getEmail().get(i));

((ViewGroup)layout).addView(id[i]);
((ViewGroup)layout).addView(Name[i]);   
((ViewGroup)layout).addView(Email[i]);

} 
```

XMLGettersSetters 类

```
public class XMLGettersSetters {

    private ArrayList<String> id = new ArrayList<String>();
    private ArrayList<String> Name = new ArrayList<String>();
    private ArrayList<String> Email = new ArrayList<String>();

    public ArrayList<String> getId(){

        return id;
    }

    public void setId(String id){
        this.id.add(id);
    }

    public ArrayList<String> getName(){
        return Name;
    }

    public void setName(String name)
    {
        this.Name.add(name);
    }

    public ArrayList<String> getEmail(){
        return Email;

    }
    public void setEmail(String email){
        this.Email.add(email);

    }

} 
```

XMLHandler 类

```
public class XMLHandler extends DefaultHandler {
    String elementValue= null;
    Boolean elementOn = false;
    public static XMLGettersSetters data = null;

    public static XMLGettersSetters getXMLData(){
        return data;
    }

    public static void setXMLData(XMLGettersSetters data)
    {
        XMLHandler.data=data;
    }

    public void startElement(String uri,String localName,String qName,Attributes attributes) throws SAXException{
        elementOn=true;

        if(localName.equals("ExaReceipts")){
            data = new XMLGettersSetters();

        }else if(localName.equals("Organisation")){
    }
    }

    public void endElement(String uri,String localName,String qName)throws SAXException
    {

        elementOn = false;

        if(localName.equalsIgnoreCase("id"))
            data.setId(elementValue);

        else if(localName.equalsIgnoreCase("Name"))
            data.setName(elementValue);

        else if(localName.equalsIgnoreCase("Email"))
        data.setEmail(elementValue);
    }

    public void characters (char[] ch , int start , int length)throws SAXException
    { 
        if(elementOn){
            elementValue= new String(ch,start,length);
            elementOn=false;
        }

    }

} 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.spinnertest1"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />
 <uses-permission android:name="android.permission.INTERNET" />"
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".SpinnerTest1Activity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

日志猫

```
06-26 17:41:38.482: W/dalvikvm(2129): threadid=1: thread exiting with uncaught exception (group=0x409c01f8) 
06-26 17:41:38.492: E/AndroidRuntime(2129): FATAL EXCEPTION: main 
06-26 17:41:38.492: E/AndroidRuntime(2129): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.spinnertest1/com.spinnertest1.SpinnerTest1Activity}: java.lang.NullPointerException 
06-26 17:41:38.492: E/AndroidRuntime(2129):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956) 
06-26 17:41:38.492: E/AndroidRuntime(2129):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981) 
06-26 17:41:38.492: E/AndroidRuntime(2129):     at android.app.ActivityThread.access$600(ActivityThread.java:123) 
06-26 17:41:38.492: E/AndroidRuntime(2129):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147) 
06-26 17:41:38.492: E/AndroidRuntime(2129):     at android.os.Handler.dispatchMessage(Handler.java:99) 
06-26 17:41:38.492: E/AndroidRuntime(2129):     at android.os.Looper.loop(Looper.java:137) 
06-26 17:41:38.492: E/AndroidRuntime(2129):     at android.app.ActivityThread.main(ActivityThread.java:4424) 
06-26 17:41:38.492: E/AndroidRuntime(2129):     at java.lang.reflect.Method.invokeNative(Native Method) 
06-26 17:41:38.492: E/AndroidRuntime(2129):     at java.lang.reflect.Method.invoke(Method.java:511) 
06-26 17:41:38.492: E/AndroidRuntime(2129):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 
06-26 17:41:38.492: E/AndroidRuntime(2129):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 
06-26 17:41:38.492: E/AndroidRuntime(2129):     at dalvik.system.NativeStart.main(Native Method)
06-26 17:41:38.492: E/AndroidRuntime(2129): Caused by: java.lang.NullPointerException 
06-26 17:41:38.492: E/AndroidRuntime(2129):     at com.spinnertest1.SpinnerTest1Activity.onCreate(SpinnerTest1Activity.java:58) 
06-26 17:41:38.492: E/AndroidRuntime(2129):     at android.app.Activity.performCreate(Activity.java:4465) 
06-26 17:41:38.492: E/AndroidRuntime(2129):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 
06-26 17:41:38.492: E/AndroidRuntime(2129):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920) 
06-26 17:41:38.492: E/AndroidRuntime(2129):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:01:43.483

你在调用`execute()`方法吗？

```
execute(URL); 
```

URL [http://exareceipts.exa.com.au/request_queue/invoice_request/get_test_data](http://exareceipts.exa.com.au/request_queue/invoice_request/get_test_data)

您使用的不在 XML 标记中。

# java - 什么是 Spring 等效于 java.net.Authenticator？

> ID：11206713
> 
> 赞同：0
> 
> 时间：2012-06-26T11:50:24.477
> 
> 标签：java, spring, spring-security

我有一个看起来像这样的方法，客户端以第二个代码片段中显示的方式使用它。我在我的应用程序中使用 Spring bean，所以我想知道 Spring 是否有自己的方法？我可以很容易地注入用户名/密码，但我想知道是否有以 Spring 为中心的方法。

客户端正在访问受密码保护的 URL，该 URL 在专用网络上托管 Web 服务。

```
import java.net.Authenticator;

public class MyAuthenticator extends Authenticator {
    protected PasswordAuthentication getPasswordAuthentication() {
        String promptString = getRequestingPrompt();
        String hostname = getRequestingHost();
        InetAddress ipaddr = getRequestingSite();
        int port = getRequestingPort();

        String username = "myusername";
        String password = "mypassword";
        return new PasswordAuthentication(username, password.toCharArray());
    }
} 
```

客户端代码：

```
Authenticator.setDefault(new MyAuthenticator()); 
```

# yii - Yii CAPTCHA 网址坏了

> ID：11206715
> 
> 赞同：3
> 
> 时间：2012-06-26T11:50:28.670
> 
> 标签：yii, captcha

我想在我的 Yii 项目上创建一个 AJAX 注册表单。所以在每个页面上我都有一个登录按钮，如果用户没有被授权，它会显示一个弹出窗口。在该弹出窗口中，他可以看到带有电子邮件字段、密码字段和验证码（默认 Yii 验证码）的注册表单。

所以，我的用户注册模型是用户。有一个验证规则：

```
array('code', 'captcha', 'allowEmpty'=>!Yii::app()->user->isGuest), 
```

我的控制器（所有用户的操作都在其中）是用户（url：site.url/user/），我在那里添加了验证码操作：

```
'captcha'=>array(
    'class'=>'CCaptchaAction',
    'backColor'=>0xFFFFFF,
    'foreColor'=>0x000000,
), 
```

在我的下一个代码中：

```
$this->widget('CCaptcha', array(
    'clickableImage'    => true,
    'showRefreshButton' => false,
)) 
```

这里有一个问题：（在一个弹出窗口中，它可以显示在每个页面（例如索引页面，属于主控制器）验证码想要从该控制器加载图像（来自 /main/captcha，而不是 /user /验证码）。

在每个控制器中添加验证码是个坏主意，所以我添加了

```
'captchaAction' => '/user/captcha', 
```

但在那之后验证码想从一个网址加载

```
http://site.loc/user/captcha/v/4fe99aca1bbed 
```

用户友好的 url 的验证码崩溃了，我无法避免（我认为，不是 yii 专家，这是因为常见的路径配置）。

有没有简单的解决方案来解决这个问题？我应该修复 URL 还是重新配置 CAPTCHA？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T13:30:22.803

所以，当我在等待帮助时，我自己解决了这个问题 :) 在我的项目中，我将我的控制器分成了下一个层次结构：

```
/frontend
/backend 
```

普通用户的所有控制器（当然）都在前端部分，包括 UserController 和 MainController。

是的，我写了一些配置来隐藏 URL 中的 /frontend/，如下所示：

```
'<c:\w+>/<a:\w+>' => 'frontend/<c>/<a>', 
```

而且我确信，我的验证码配置中的那个字符串（'captchaAction' => '/user/captcha'）知道去哪里（几乎就是这样！），但不！

我应该将完整路径写入我的控制器并执行如下操作：

```
'captchaAction' => '/frontend/main/captcha', 
```

正如我在问题中所说，我将我的 CAPTCHA 操作放在 UserController 中，但现在您可以看到它位于 MainController 中（我从 UserController 中删除了它）

我得到一个错误：

```
CCaptchaValidator.action "captcha" is invalid. Unable to find such an action in the current controller. 
```

所以，为了解决这个问题，我只需要在我的用户**模型中使用 CCaptchaValidator 的属性**[captchaAction](http://www.yiiframework.com/doc/api/1.1/CCaptchaValidator#captchaAction-detail)！代码：

 **```
array('code', 'captcha', 'captchaAction'=>'/frontend/main/captcha', 'allowEmpty'=>!Yii::app()->user->isGuest) 
```

所以，现在我的 AJAX Captcha 验证可以在我想要的地方正常工作。

亲爱的社区，祝 Yii 的默认验证码好运！**

# eclipse - Java 自动完成在 Eclipse 中打乱了行尾输入

> ID：11206724
> 
> 赞同：0
> 
> 时间：2012-06-26T11:51:04.597
> 
> 标签：eclipse

在 Eclipse（Java 编辑器）中，使用自动完成功能时，我按键盘上的 End 按钮添加分号并完成我的代码行。我最终得到的是放在行尾的carret，但实际上写的是方法调用中的第一个属性应该在哪里。我最终得到的是这个

![在此处输入图像描述](../Images/dcdb6677cbc51ad94e6ae0ce94116b5d.png)

而不是这个

![在此处输入图像描述](../Images/4891987997586395cb2586cb6e4dd17c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:17:34.497

您可以在此处通过两种方式使用自动完成功能：

1.  按`esc`两次，然后按`end`按钮。
2.  按`enter`三下（对于每个参数角色，jobId 和 p_userName），它将带您到最后，默认参数设置为变量。

# c# - Asp.Net MVC 布局和局部视图

> ID：11206725
> 
> 赞同：7
> 
> 时间：2012-06-26T11:51:10.983
> 
> 标签：c#, asp.net-mvc, partial-views, viewbag

让我们考虑两个使用相同布局的视图，它们包括：

*   包含“主体”的左列（两个视图的填充方式不同）
*   显示一般信息的右列（通过模型传递）

我没有定义两次正确的部分，而是想知道是否可以创建一个 PartialView 来直接从布局页面链接。

问题是局部视图隐含地从正在渲染的视图继承它们的模型。而且由于每个视图都有自己的模型，我最终会在局部视图中遇到模型类型不匹配的问题。

从这里我看到两个解决方案：

*   我可以在 ViewBag 中插入视图模型的公共部分。不幸的是，这意味着使用此布局的每个视图都必须实现此“约定”，但在编译时没有任何警告开发人员...
*   我可以使用多态性使每个视图模型都继承自部分视图使用的相同基类（编辑：或接口）。这将在一定程度上起作用，但一旦我在同一布局中有第二个局部视图，复杂性就会呈指数级增加。

所以这里有问题：

*   我对上述假设是否正确？
*   你觉得还有其他可能吗？
*   这方面的经验有什么回报吗？

非常感谢，结核病。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T11:55:59.933

在两个模型上使用`Interface`并实现它，这正是它们的用途。

这是一个使用两个不同模型的两个不同视图的示例，它们都实现了一个接口。这是[subtypeing](https://en.wikipedia.org/wiki/Subtyping)而不是[ad-hoc polymorphism](https://en.wikipedia.org/wiki/Ad_hoc_polymorphism)。

```
public class ViewModelOne : IReusableView
{
    public string Name { get; set; }
    public string Something { get; set; }
    public int ANumber { get; set; }
}

public class ViewModelTwo : IReusableView
{
    public string Name { get; set; }
    public string Thing { get; set; }
    public string SomethingElse { get; set; }
    public int ANumber2 { get; set; }
}

public interface IReusableView
{
    string Name { get; }
} 
```

所以我们这里有一个非常简单的局部视图，即“InnerPartialView”：

```
@model TestIntegration.Models.IReusableView
<div>
    @Model.Name
</div> 
```

用于此示例控制器的主页和关于页面：

```
 public class HomeController : Controller
    {
        public ActionResult Index()
        {
            ViewBag.Message = "Welcome to ASP.NET MVC!";

            return View(new ViewModelOne() { Name = "hello", Something="sdfsdfs", ANumber = 1 });
        }

        public ActionResult About()
        {
            return View(new ViewModelTwo() { Name = "hello 2", SomethingElse = "aaaddd", ANumber2 = 10, Thing="rand" });
        }
    } 
```

主视图：

```
@model TestIntegration.Models.ViewModelOne
@{
    ViewBag.Title = "Home Page";
}

<h2>@ViewBag.Message</h2>
<p>
    To learn more about ASP.NET MVC visit <a href="http://asp.net/mvc" title="ASP.NET MVC Website">http://asp.net/mvc</a>.
    @Html.Partial("InnerPartialView")
</p> 
```

关于视图：

```
@model TestIntegration.Models.ViewModelTwo
@{
    ViewBag.Title = "About Us";
}

<h2>About</h2>
<p>
     Put content here.
         @Html.Partial("InnerPartialView")
</p> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T12:59:18.793

当你渲染局部视图时，你可以给它发送一个模型：

```
@Html.RenderPartial(MVC.Partials.Views.Sidebar, Model.SideBarModel); 
```

因此，您可以将数据作为部分侧边栏模型的父模型的一部分发送。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-25T22:25:25.710

在局部视图中，模型是类型的`dynamic`，因此您不需要知道它们是什么类型。但是，您只需要确保模型具有您需要的属性。换句话说，您可以使用`Model.MyProperty`or `Model.MyProperty`as `MyPropertyType`when using `Html.Partial`.

# css - HTML5 vs HTML4 - 使用额外空间呈现的 h1 标签 - 如何删除？

> ID：11206730
> 
> 赞同：9
> 
> 时间：2012-06-26T11:51:19.233
> 
> 标签：css, html, html4

我拿了一个 DTD 为 HTML4 Transitional 的页面，并将 doctype 更改为，`<!DOCTYPE html>` 并且在其下方的 h1 和 div 之间出现了额外的空间。我没有对标记或 CSS 进行任何其他更改。

JSFiddle 示例：http: [//jsfiddle.net/ngordon/vSqkg/3/](http://jsfiddle.net/ngordon/vSqkg/3/)。

如果将 doctype 从 HTML5 更改为 HTML4 Transitional，即使标记和 CSS 完全相同，您也会看到多余的空间出现和消失。

知道如何摆脱那个空间吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T00:28:29.543

HTML 4.01 过渡文档类型在浏览器中导致几乎标准模式。HTML5 文档类型导致标准模式。

这篇 Microsoft 文章解释了差异：http: [//msdn.microsoft.com/en-us/library/ff405794%28v=vs.85%29](http://msdn.microsoft.com/en-us/library/ff405794%28v=vs.85%29)。

它说对于几乎标准模式：

> 当且仅当满足以下条件之一时，内联元素才会影响行高。
> 
> 如果元素：
> 
> *   包含文本字符
>     
>     
> *   具有非零边框宽度
>     
>     
> *   具有非零边距
>     
>     
> *   具有非零填充
>     
>     
> *   有背景图片
>     
>     
> *   将垂直对齐设置为基线以外的值
>     
>     
> 
> 请注意，换行符不被视为此定义的文本字符，除非它是行框的唯一内容。在这种情况下，无论指定的行高如何，行框高度仍然是该行的最高行内框顶部和最低行内框底部。
> 
> 如果 img 元素是表格单元格的唯一内容，则将单元格行框高度的行框高度调整为零。

在您的情况下，最关键的是，这意味着计算包含图像的行的高度不包括[`strut`](http://www.w3.org/TR/CSS2/visudet.html#strut)，一个虚构的内联元素，它应该将行高增加到元素的行高值`h1`。

这个[jsfiddle](http://jsfiddle.net/vSqkg/7/)显示了一个真实的`span`元素，其中包含一个`&nbsp;`作为支撑的真实文本内容，您可以看到 HTML 4.01 过渡文档类型和 HTML5 文档类型的布局是相同的。

这个[jsfiddle](http://jsfiddle.net/vSqkg/8/)显示了相同的想法，只是这次 strut 是使用 CSS 制作的，如下所示：

```
h1:before {
   content: '\A0';
} 
```

在 khurram 的回答的情况下，他正在做的是减少行高，`h1`因此，在标准模式下，支柱的高度小于图像的高度。这意味着整个线条的高度是由图像的高度决定的，而不是支柱的高度。在标准模式和几乎标准模式下，图像的高度是相同的，所以同样，您看不到两种模式之间的渲染差异。

至于为什么设置 line-height`h1`以匹配图像的高度（25px）不起作用，但将其设置为 12px，那是因为 strut 不仅建立了顶部和底部，而且还建立了基线线。基线略高于底部以允许文本下降，对于通常约为 3 像素的正常大小的文本。默认情况下，图像位于基线上，因此基线和底部之间的间隙被添加到图像的高度以建立线的高度。

这可以通过使用 将图像移出基线来解决`img { vertical-align: top }`，这在[jsfiddle](http://jsfiddle.net/vSqkg/9/)中显示。如果您在此处修改 h1 行高，您将看到大于 25px 的值会增加行间距，但小于或等于 25px 的值不会更改该间距。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T11:56:32.693

在开始应用任何其他 css 效果之前，您是否已将 css重置[http://meyerweb.com/eric/tools/css/reset/应用到 css？](http://meyerweb.com/eric/tools/css/reset/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T11:59:22.477

您的错误处理默认行高。

HTML4 过渡忽略 H1 wrt 行高的内容，产生一个 25px 高的元素。HTML5 尊重 H1 标签的行高，相当于 29 像素。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-26T11:58:51.260

只是给`line-height:12px;`或你想要的。
**看一看：** [JSFIDDLE](http://jsfiddle.net/vSqkg/4/)。修改您的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T21:27:39.513

这就是为什么 HTML5 Boilerplate 有一个 CSS 重置。

您也可以只将 div 设置为 a `margin: 0; padding: 0;`，但您必须对每个元素都执行此操作，直到您将它们全部击中。Meyer 在这个线程中关于 CSS 重置的答案是正确的。

这是解决方法的一个示例：http: [//jsfiddle.net/mikelegacy/vSqkg/5/](http://jsfiddle.net/mikelegacy/vSqkg/5/)

# spring - 如何将 Spring bean 注入休眠自定义类型？

> ID：11206731
> 
> 赞同：0
> 
> 时间：2012-06-26T11:51:20.407
> 
> 标签：spring, hibernate

我们有许多带有 Location 类型的 @JoinColumn 字段的 Hibernate 实体。位置数据基本上是静态的，所以我们决定将它们完全缓存在内存中。

最初的计划是用 locationId 字段替换所有 Location 字段。然而，我们很快意识到这是太多的工作，特别是因为存在引用位置字段的条件查询，现有工具无法轻松获取。

另一种方法是实现自定义 Hibernate 类型，将 locationIds 从数据库映射到 Location 对象，但似乎没有任何简单的方法可以将缓存 bean 注入自定义类型实例。

（我们的 Hibernate 版本不提供 Configuration.registerTypeOverride() 调用，因此我们无法控制 Type 实例的实例化，因此无法注入。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T23:32:15.113

在我的特定情况下，我可以将实体的 PersistenceProvider 子类化，并在创建会话工厂后立即传递 Spring 上下文。

# jms - 如何将jms主题消息移动到oracle AQ

> ID：11206733
> 
> 赞同：1
> 
> 时间：2012-06-26T11:51:22.697
> 
> 标签：jms, oracle-aq

我们如何使用java代码将jms主题的消息排入oracle AQ？

# wordpress - Wordpress 创世纪主题 - 将徽标从文本更改为图形

> ID：11206736
> 
> 赞同：5
> 
> 时间：2012-06-26T11:51:32.383
> 
> 标签：wordpress

我正在使用没有孩子的香草 Geneis 主题，但我找不到徽标应该位于的位置。我可以不用担心更改图标，但我看不到任何徽标文件，也没有看到有关如何添加到“父”主题的建议 - 我没有使用孩子。

有没有办法添加一个标志。我在 wordpress 中更改了徽标而不是文本的设置（在标题设置中）。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T18:22:33.883

虽然我没有在默认的 Genesis 主题上执行此操作，但我已将主要标题文本替换为仅一个徽标。我在[创世纪论坛](http://www.studiopress.com/support/showthread.php?t=101814)上发布了我是如何做到的，但在这里。

如果您想保留 genesis_do_header 钩子的其余部分，您可以使用子主题的 functions.php 替换默认的 genesis_do_header。

打开functions.php并添加以下内容：

```
// Replace header hook to include logo 
remove_action( 'genesis_header', 'genesis_do_header' ); 
add_action( 'genesis_header', 'genesis_do_new_header' ); 
function genesis_do_new_header() { 
    echo '<div id="title-area"><img src="your/logo/image.jpg" alt="Site Logo" />'; 
    do_action( 'genesis_site_title' ); 
    do_action( 'genesis_site_description' ); 
    echo '</div><!-- end #title-area -->'; 
    if ( is_active_sidebar( 'header-right' ) || has_action( 'genesis_header_right' ) ) { 
        echo '<div class="widget-area">'; 
        do_action( 'genesis_header_right' ); 
        dynamic_sidebar( 'header-right' ); 
        echo '</div><!-- end .widget-area -->'; 
    } 
} 
```

然后，您可以按照以下方式使用 CSS 设置图像样式：

```
#title-area img {
    float:left;
} 
```

您现在应该会看到您的徽标漂浮在您网站标题的左侧。您可能需要调整一些东西，因为主题并不相同，但请告诉我这对您有何帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-04T21:43:36.830

不要复活旧帖子或任何东西，但我找到了一个比上面建议的解决方案更好的解决方案：

如果要删除 Title 和 Description，请在 functions.php 中添加以下代码。当您决定使用站点徽标而不是站点标题的文本时，这很有用。

```
/** Remove Title & Description **/
remove_action( 'genesis_site_title', 'genesis_seo_site_title' );
remove_action( 'genesis_site_description', 'genesis_seo_site_description' );
/** Remove default site title and add custom site title **/
remove_action( 'genesis_site_title', 'genesis_seo_site_title' );
function custom_site_title() { 
     echo '<a href="'.get_bloginfo('url').'" title="My Website"><img src="'.wp_get_attachment_url(254).'" alt="My Website"/></a>';
}
add_action( 'genesis_site_title', 'custom_site_title' ); 
```

# c# - 从动态创建的矩形对象 c# 获取事件

> ID：11206737
> 
> 赞同：0
> 
> 时间：2012-06-26T11:51:34.327
> 
> 标签：c#, events, object

我目前正在尝试将事件处理程序分配给动态创建的矩形对象。这些对象是根据数组中的数据循环创建的，例如

```
for(int a = 0;  a < array.getlength(0); a++)
{
   //draw rectangle on each iteration
   rectangle shape = new rectangle();

   shape.width(200);
   shape.height(50);

   shape.posTop(posx);
   shape.posLeft(posy);

   posx = posx + 20;
   posy = posy + 50;

   //code to draw onto Canvas object etc...
} 
```

无论如何都要为这个对象的每次迭代分配一个鼠标单击事件，以便我可以检索有关每个迭代的信息？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-26T12:10:42.843

你试过这样的东西吗

```
for(int a = 0;  a < array.getlength(0); a++)
{
   //draw rectangle on each iteration
   rectangle shape = new rectangle();

   shape.width(200);
   shape.height(50);

   shape.posTop(posx);
   shape.posLeft(posy);

   posx = posx + 20;
   posy = posy + 50;

   shape.click.MouseDown += new MouseButtonEventHandler(shape_MouseDown);

   //code to draw onto Canvas object etc...
} 
```

当我记得正确的形状没有单击事件时，但是其他鼠标事件（例如 mousedown）。

# iphone - 如何在滚动瓷砖地图期间检测瓷砖和精灵之间的碰撞？

> ID：11206739
> 
> 赞同：0
> 
> 时间：2012-06-26T11:51:39.027
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

我是cocos2d的新手，现在有一天我陷入了平铺地图学习中。我想检测精灵和滚动平铺地图层的平铺之间的碰撞。在平铺地图层中，我还在平铺属性中设置了特定的平铺值1。问题就是这样，当瓷砖与精灵碰撞并且我的精灵处于固定位置时，我如何检测瓷砖的碰撞或坐标？

```
-(void)Collision:(ccTime)delta{

CGPoint playerPosition=player.position;
CGPoint tileCoordPos = [self tileCoordForPosition:playerPosition]; 
bool isTouchOnWater = NO;

int tileGID = [FloorLayer tileGIDAt:tileCoordPos];

if (tileGID != 0)
{
    NSDictionary* properties = [tileMap propertiesForGID:tileGID];
    if (properties)
    {
        CCLOG(@"NSDictionary 'properties' contains:\n%@", properties);
        NSString* isWaterProperty = [properties valueForKey:@"isWater"];
        isTouchOnWater = ([isWaterProperty boolValue] == YES);
    }
}

if (isTouchOnWater)
{
    [[SimpleAudioEngine sharedEngine] playEffect:@"alien-sfx.caf"];
    [FloorLayer removeTileAt:tileCoordPos];
} 
```

}

这是我正在使用的代码。在此代码中，瓷砖的坐标保持不变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T07:08:59.960

我通过滚动整个地图并制作两张地图来解决问题，一张用于地面层，一张用于物体，然后检测碰撞......它对我来说非常完美

# android - 列表视图项指示器 (>)

> ID：11206740
> 
> 赞同：0
> 
> 时间：2012-06-26T11:51:39.013
> 
> 标签：android, android-layout, android-widget

我注意到在某些 android 菜单中，会显示一个列表视图，其中列出了右侧带有 (>) 图标的项目。它类似于可扩展列表，但箭头指向正确。这是内置的，还是我自己做的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:53:21.877

它被称为[Group Indicator](http://developer.android.com/reference/android/widget/ExpandableListView.html#setGroupIndicator%28android.graphics.drawable.Drawable%29)，默认情况下在[ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)中可用。

如果您不希望 Group Indicator 可见，则必须使用`setGroupIndicator(null)`. 但默认情况下，它对您创建的任何 Expandable ListView 都是可见的。

当它向左显示箭头时，表示该组处于折叠状态，当它指向底部时，表示该组处于展开状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T11:53:46.910

您必须像这样制作列表视图行布局。

您可以在行布局的左侧设置 Drawable 中的图像

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T12:11:57.167

在列表视图中

** > 行右侧的右箭头，**

被放置到导航到另一个活动。

该箭头有时是 ImageButton，通过单击它；uoy可以去其他活动。

# jquery - 使用 jquery _nearly_ 选择 html textarea 的内容，除了

> ID：11206741
> 
> 赞同：0
> 
> 时间：2012-06-26T11:51:44.160
> 
> 标签：jquery, firefox, select

在 Web 应用程序中，我想使用 jquery 触发一个对话框。该对话框用于提供要由用户复制到剪贴板的字符串 (Ctrl-C)。为了简单起见，我想选择（突出显示）指定为文本区域值的字符串。此外，我也将点击处理程序绑定到选择内容，以便用户在点击时不会取消选择内容。

但是，使用 Firefox (FF 13.0.1/Linux) 这不起作用。对话框触发，文本区域接受内容。绑定工作正常。只是内容的选择根本不起作用，除非在明确点击之后。

所以我创建了一个简单的用例：http: [//jsfiddle.net/4CK7Y/2/](http://jsfiddle.net/4CK7Y/2/)

它包含以下代码：

HTML：

```
<div>
    <fieldset>
        <textarea id="payload"></textarea>
    </fieldset>
</div> 
```

JS/JQuery：

```
$('#payload').val("some text");
$('#payload').select();
$('#payload').click(function(){this.select();}); 
```

我很惊讶地发现这在大多数浏览器中都能正常工作：Konqueror、Rekonq、Opera。但是在 Firefox 中，这只适用于重新加载。如果单击“运行”，您会看到问题：尽管重新执行了代码，但未单击文本区域的内容不会被选中。

这是什么原因？我能做些什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:57:22.453

因为 textarea在页面加载时不会自动获得**焦点。**将**focus()**事件附加到**$(document).ready()**下的文本区域。

# asp.net - 站点地图全球化不起作用

> ID：11206745
> 
> 赞同：0
> 
> 时间：2012-06-26T11:51:59.953
> 
> 标签：asp.net, localization, sitemap, globalization, aspmenu

以下信息都是关于在法国显示语言的。但它没有显示任何数据，为什么？我尝试了很多方法，但没有用。我尝试了很多方法，但没有用。我尝试了很多方法，但没有用。

```
 <?xml version="1.0" encoding="utf-8" ?>
     <siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" enableLocalization="true">      
            <siteMapNode ur!="~/Default2.aspx" title="$resources:SiteMapLocalizations,str1" description=""/>
    </siteMap> 
```

* * *

```
 <asp:Menu ID="MnuSideMenu" CellPadding="0" CellSpacing="0" runat="server" Width="100%">
        <DataBindings>
            <asp:MenuItemBinding DataMember="siteMapNode" NavigateUrlField="url" TextField="title" />
        </DataBindings>
    </asp:Menu> 
```

* * *

```
public partial class Default2 : System.Web.UI.Page
  {
protected void Page_Load(object sender, EventArgs e)
{
    XmlDataSource oXmlDataSource = new XmlDataSource();
    oXmlDataSource.XPath = "siteMap/siteMapNode";
    oXmlDataSource.DataFile = Server.MapPath("~") + @"/siteMap/x.sitemap";
    MnuSideMenu.DataSource = oXmlDataSource;
    MnuSideMenu.DataBind();
}
protected override void InitializeCulture()
{
    string languageId = "en-US";
    if (!string.IsNullOrEmpty(languageId))
    {
        if (languageId.EndsWith("FR")) languageId = "fr-FR";
        else languageId = "en-US";
        SetCulture(languageId);
    }

    if (Session["Language"] != null)
    {
        if (!Session["Language"].ToString().StartsWith(Thread.CurrentThread.CurrentCulture.TwoLetterISOLanguageName)) SetCulture(Session["Language"].ToString());
    }

    base.InitializeCulture();
}

protected void SetCulture(string languageId)
{
    Session["Language"] = languageId;
    Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture(languageId);
    Thread.CurrentThread.CurrentUICulture = new CultureInfo(languageId);
}
protected void Button1_Click1(object sender, EventArgs e)
{

} 
```

## }

![在此处输入图像描述](../Images/97342d62bfa6379a6e337159725f2623.png)

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:44:38.613

添加**Global.asax**文件写这段代码

```
void Application_BeginRequest(Object sender, EventArgs e)
    {
        // Code that runs on application startup
        HttpCookie cookie = HttpContext.Current.Request.Cookies["CultureInfo"];
        if (cookie != null &amp;&amp; cookie.Value != null)
        {
            System.Threading.Thread.CurrentThread.CurrentUICulture = new System.Globalization.CultureInfo(cookie.Value);
            System.Threading.Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo(cookie.Value);
        }
        else
        {
            System.Threading.Thread.CurrentThread.CurrentUICulture = new System.Globalization.CultureInfo("en");
            System.Threading.Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo("en");
        }
    } 
```

更多详情请[点击](http://satindersinght.blogspot.in/2012/06/create-website-for-multilanguage.html)

[http://satindersinght.blogspot.in/2012/06/create-website-for-multilanguage.html](http://satindersinght.blogspot.in/2012/06/create-website-for-multilanguage.html)

* * *

样品

```
 <siteMapNode url="EmployeeDetails.aspx " title="$resources:Resources,EmployeeDetails " description="$resources:Resources,Viewemployeedetails" /> 
```

注意：**资源**是主根，如给定链接中所示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:05:30.950

本地化不适用于 XmlDataSource。所以我删除了 XmlDataSource 并使用了

```
 SiteMapDataSource  oSmapDataSource = new SiteMapDataSource();
        oSmapDataSource.SiteMapProvider= "siteMapCatalogueSiteMap";
        oSmapDataSource.ShowStartingNode = false; // Just a Dummy node as we dont have the Root node for Localisation concept
        (this.Master.FindControl("MnuSideMenu") as Menu).DataSource = oSmapDataSource;
        (this.Master.FindControl("MnuSideMenu") as Menu).DataBind(); 
```

现在印度尼西亚语来了。

# c# - Alchemy-Websockets - WebSocketClient 路径

> ID：11206746
> 
> 赞同：2
> 
> 时间：2012-06-26T11:52:05.660
> 
> 标签：c#, websocket

我是stackoverflow的新手。

我目前正在开发一个 WebSocket 项目并使用一个名为 Alchemy-Websockets 的组件。

我的问题是当我尝试像这样使用 Alchemy.WebSocketClient 类时：

```
var aClient = new WebSocketClient("ws://172.28.1.103:8100"); 
```

我收到了 FormatException 错误。

这里的文档：http: [//alchemywebsockets.net/docs/class_alchemy_1_1_web_socket_client.html](http://alchemywebsockets.net/docs/class_alchemy_1_1_web_socket_client.html)

没有显示任何示例代码。

那么，有人可以在这里给我一些帮助吗？

TKS。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T17:22:14.063

杰克在这里，炼金术的维护者。（我们需要更新我们的自动生成的文档。）

尝试将频道附加到连接的末尾，如下所示：

```
var aClient = new WebSocketClient("ws://172.28.1.103:8100/channel"); 
```

注意最后的 /channel 。值可以是任何东西。您可以在我们的集成测试中看到一个示例：[https ://github.com/Olivine-Labs/Alchemy-Websockets/blob/master/test/Integration/Alchemy/ClientServer.cs](https://github.com/Olivine-Labs/Alchemy-Websockets/blob/master/test/Integration/Alchemy/ClientServer.cs)

# blackberry - 存储在我的 PersistentObject 中的数据是否会在 Blackberry 中的 App 更新时保留。？

> ID：11206748
> 
> 赞同：2
> 
> 时间：2012-06-26T11:52:11.820
> 
> 标签：blackberry, persistent-storage

我开发了一个黑莓应用程序，我在其中使用持久存储来保存一些数据。该应用程序已经投放市场。我在第二个版本中创建了一些新的 PersistentStorage 值。如果我从 BlackBerry App Store 更新我的应用程序，这些数据会保留吗？或者数据会丢失？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:07:38.733

如果您更改持久对象的类定义（例如添加、删除或更改数据成员的类型），那么您可能会丢失数据。系统将检测到结构的变化，并且必须删除类定义和类的所有实例。

有两种方法可以解决这个问题：

1.  仅使用 OS 中定义的类（HashTables、Strings、int、float、double 等）来构建您需要的结构。（这也会产生数据在应用程序删除后仍然存在的副作用）；
2.  如果您需要使用新类，然后需要更改它，请创建一个使用不同持久对象 ID 的新类，并在启动期间检测用户是否有数据存储在旧类下。如果是这样，将数据迁移到新类并删除旧类。

# java - Spring MVC应用程序，试图在tomcat上运行

> ID：11206749
> 
> 赞同：1
> 
> 时间：2012-06-26T11:52:13.633
> 
> 标签：java, spring

谁能帮我克服这个错误？我发现了一个类似的问题，但答案对我没有帮助。

我正在尝试运行一个 Spring MVC 应用程序。我不担心警告，但警告后的错误让我感到沮丧。

我遇到了类似的错误并且已修复，但是我不确定如何修复，因为我声明了所有 bean 并在指定的路径资源和类中。

```
 Jun 26, 2012 7:45:50 AM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
07:45:53,267  WARN ActiveManagementCoordinator:56 - A C3P0Registry mbean is already registered. This probably means that an application using c3p0 was undeployed, but not all PooledDataSources were closed prior to undeployment. This may lead to resource leaks over time. Please take care to close all PooledDataSources.
07:45:53,881  WARN DTDEntityResolver:73 - recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide!
07:45:53,917  WARN DTDEntityResolver:73 - recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide!
07:45:53,929  WARN DTDEntityResolver:73 - recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide!
07:45:53,940  WARN DTDEntityResolver:73 - recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide!
07:45:53,954  WARN DTDEntityResolver:73 - recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide!
07:45:53,983  WARN DTDEntityResolver:73 - recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide!
07:45:53,993  WARN DTDEntityResolver:73 - recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide!
07:45:54,012  WARN DTDEntityResolver:73 - recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide!
07:45:54,018  WARN DTDEntityResolver:73 - recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide!
07:45:54,029  WARN DTDEntityResolver:73 - recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide!
07:45:54,035  WARN DTDEntityResolver:73 - recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide!
07:45:54,049  WARN DTDEntityResolver:73 - recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide!
07:45:54,066  WARN DTDEntityResolver:73 - recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide!
07:45:54,083  WARN DTDEntityResolver:73 - recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide!
07:45:54,091  WARN DTDEntityResolver:73 - recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide!
07:45:54,108  WARN DTDEntityResolver:73 - recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide!
07:45:54,124  WARN DTDEntityResolver:73 - recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide!
07:45:54,135  WARN DTDEntityResolver:73 - recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide!
07:45:54,145  WARN DTDEntityResolver:73 - recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide!
07:45:54,155  WARN DTDEntityResolver:73 - recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide!
07:45:54,175  WARN DTDEntityResolver:73 - recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide!
07:45:54,185  WARN DTDEntityResolver:73 - recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide!
07:45:54,205  WARN DTDEntityResolver:73 - recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide!
07:45:54,215  WARN DTDEntityResolver:73 - recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide!
07:45:54,225  WARN DTDEntityResolver:73 - recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide!
07:45:57,410 ERROR ContextLoader:220 - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jmsConnFactory' defined in class path resource [spring-msgtransport.xml]: Invocation of init method failed; nested exception is javax.naming.NameNotFoundException: Name jms.tundra.wls.cf is not bound in this Context
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:563)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4701)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5204)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5199)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: javax.naming.NameNotFoundException: Name jms.tundra.wls.cf is not bound in this Context
    at org.apache.naming.NamingContext.lookup(NamingContext.java:803)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:159)
    at org.apache.naming.SelectorContext.lookup(SelectorContext.java:158)
    at javax.naming.InitialContext.lookup(Unknown Source)
    at org.springframework.jndi.JndiTemplate$1.doInContext(JndiTemplate.java:154)
    at org.springframework.jndi.JndiTemplate.execute(JndiTemplate.java:87)
    at org.springframework.jndi.JndiTemplate.lookup(JndiTemplate.java:152)
    at org.springframework.jndi.JndiTemplate.lookup(JndiTemplate.java:178)
    at org.springframework.jndi.JndiLocatorSupport.lookup(JndiLocatorSupport.java:95)
    at org.springframework.jndi.JndiObjectLocator.lookup(JndiObjectLocator.java:105)
    at org.springframework.jndi.JndiObjectFactoryBean.lookupWithFallback(JndiObjectFactoryBean.java:201)
    at org.springframework.jndi.JndiObjectFactoryBean.afterPropertiesSet(JndiObjectFactoryBean.java:187)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
    ... 20 more
Jun 26, 2012 7:45:57 AM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jmsConnFactory' defined in class path resource [spring-msgtransport.xml]: Invocation of init method failed; nested exception is javax.naming.NameNotFoundException: Name jms.tundra.wls.cf is not bound in this Context
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:563)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4701)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5204)
    at org.apache.catalina.core.StandardContext$1.call(StandardContext.java:5199)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: javax.naming.NameNotFoundException: Name jms.tundra.wls.cf is not bound in this Context
    at org.apache.naming.NamingContext.lookup(NamingContext.java:803)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:159)
    at org.apache.naming.SelectorContext.lookup(SelectorContext.java:158)
    at javax.naming.InitialContext.lookup(Unknown Source)
    at org.springframework.jndi.JndiTemplate$1.doInContext(JndiTemplate.java:154)
    at org.springframework.jndi.JndiTemplate.execute(JndiTemplate.java:87)
    at org.springframework.jndi.JndiTemplate.lookup(JndiTemplate.java:152)
    at org.springframework.jndi.JndiTemplate.lookup(JndiTemplate.java:178)
    at org.springframework.jndi.JndiLocatorSupport.lookup(JndiLocatorSupport.java:95)
    at org.springframework.jndi.JndiObjectLocator.lookup(JndiObjectLocator.java:105)
    at org.springframework.jndi.JndiObjectFactoryBean.lookupWithFallback(JndiObjectFactoryBean.java:201)
    at org.springframework.jndi.JndiObjectFactoryBean.afterPropertiesSet(JndiObjectFactoryBean.java:187)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
    ... 20 more

Jun 26, 2012 7:45:57 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error listenerStart
Jun 26, 2012 7:45:57 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/tundra-le] startup failed due to previous errors
Jun 26, 2012 7:45:57 AM org.apache.catalina.core.ApplicationContext log
INFO: Closing Spring root WebApplicationContext
Jun 26, 2012 7:45:57 AM org.apache.catalina.loader.WebappClassLoader clearReferencesJdbc
SEVERE: The web application [/tundra-le] registered the JDBC driver [oracle.jdbc.OracleDriver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered.
Jun 26, 2012 7:45:57 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [/tundra-le] appears to have started a thread named [Resource Destroyer in BasicResourcePool.close()] but has failed to stop it. This is very likely to create a memory leak. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:26:24.967

缺少 JNDI 名称。您是否正确配置了 web.xml？

# c# - c#windows窗体子窗体前面显示MDI窗体的所有控件

> ID：11206756
> 
> 赞同：1
> 
> 时间：2012-06-26T11:52:50.343
> 
> 标签：c#, windows, forms, mdi

子窗体前面显示的MDI窗体的面板控件............

```
private void contentsToolStripMenuItem_Click(object sender, EventArgs e)
        {
            FormCollection fc = Application.OpenForms;
            foreach (Form frm in fc)
            {
                if (frm.Name.ToLower() == "frmshortcutkeys")
                {
                    return;
                }
            }
            frmShortcutKeys objfrmShortcutKeys = new frmShortcutKeys();
            objfrmShortcutKeys.MdiParent = this;
            objfrmShortcutKeys.Show();
        } 
```

# java - 访问共享目录

> ID：11206757
> 
> 赞同：0
> 
> 时间：2012-06-26T11:52:53.150
> 
> 标签：java, linux, file, shared

我们的问题也与 linux 有关，但 Java 需要解决方案。所以我有一个数据目录

```
/somedir/data 
```

在linux服务器上

```
servername 
```

我可以通过 ssh 连接到服务器并只从部署机器上做任何我想做的事情（由于公钥/私钥到位）。但是有一个 Java 进程应该从该目录中读取文件。如何强制它读取该文件？我试图使用`File("//servername/somedir/data")`没有成功。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:56:21.963

您必须使用其中一种网络文件服务共享文件。例如：

*   NFS（检查`showmount -e`）；
*   桑巴（检查`smbclient -L`）；
*   AFS;
*   HTTP/FTP（首先检查主机上是否有 HTTP/FTP 服务器）。

你也可以使用 SSH 访问这个文件（你说你有 SSH 连接到主机，这意味着 SSH 无论如何都可以访问）。

如果你想从 Java 程序连接到 SSH 服务器，你可以使用（例如）[JSch](http://www.jcraft.com/jsch/)。JSch 用法示例在[这里](http://www.jcraft.com/jsch/examples/ScpFrom.java.html)。

# mysql - Mysql 语法错误：'WHERE NOT LIKE'

> ID：11206761
> 
> 赞同：0
> 
> 时间：2012-06-26T11:53:15.773
> 
> 标签：mysql

我试图通过每 24 小时仅插入唯一值来跟踪页面浏览量。但是当我运行此查询时，出现语法错误。

```
insert ignore into profilepageviews values( '77.777.777.777' , CURRENT_TIMESTAMP, '5') where hitdate NOT LIKE '%2012-06-26%' 
```

错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'where hitdate NOT LIKE '%2012-06-26%'' at line 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T11:54:36.707

您不能将`WHERE`子句与 一起使用`INSERT`，您可能想要[`UPDATE`](http://dev.mysql.com/doc/refman/5.0/en/update.html)

# c# - 读取时 memorystream 包含错误的 xml 标记

> ID：11206773
> 
> 赞同：0
> 
> 时间：2012-06-26T11:53:56.173
> 
> 标签：c#, xml, stream, httpwebresponse

我的问题是什么？当我将流写回网络时，打开文件，它包含一些内容，但格式不正确，还有一些内容丢失。

我是否因逻辑错误而丢失数据？

**注意：**下面的 readstream 和 writestream 模拟了服务将要填写的内容。我将接收要从服务中读取的流。我需要将该流写回。

```
 MemoryStream writeStream = new MemoryStream();
        byte[] buffer = new byte[256];
        OrderDocument doc = new OrderDocument();
        doc.Format = "xml";
        doc.DocumentId = "5555555";
        doc.Aid = "ZZ";
        doc.PrimaryServerPort = "PORT";
        MemoryStream readStream = new MemoryStream(doc.GetDocument());
        while (readStream != null && readStream.Read(buffer, 0, buffer.Length) > 0)
        {
            writeStream.Write(buffer, 0, buffer.Length);
        }
        writeStream.Flush();
        writeStream.Position = 0;
        Response.Buffer = true;
        Response.Clear();
        Response.ClearContent();
        Response.ClearHeaders();

        Response.ContentType = "text/xml";
        Response.ClearHeaders();
        Response.AddHeader("Content-Disposition", string.Format("attachment; filename={0}.xml", doc.DocumentId));
        Response.AddHeader("Content-Length", writeStream.Length.ToString());
        Response.BinaryWrite(writeStream.ToArray());
        Response.End(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:58:54.767

> 我是否因逻辑错误而丢失数据？

可能是的，您可以尝试稍微简化您的代码。我真的没有看到这里需要多个内存流：

```
OrderDocument doc = new OrderDocument();
doc.Format = "xml";
doc.DocumentId = "5555555";
doc.Aid = "ZZ";
doc.PrimaryServerPort = "PORT";
byte[] buffer = doc.GetDocument();

Response.Buffer = true;
Response.Clear();
Response.ClearHeaders();
Response.ContentType = "text/xml";
Response.AddHeader("Content-Disposition", string.Format("attachment; filename={0}.xml", doc.DocumentId));
Response.OutputStream.Write(buffer, 0, buffer.Length); 
```

# jquery - 如何在ajax调用中解析多维json响应

> ID：11206775
> 
> 赞同：0
> 
> 时间：2012-06-26T11:53:58.830
> 
> 标签：jquery, ajax, json

下面是我得到的json响应，

```
{
    "day": ["Thursday", "Friday", "Saturday", "Sunday"],
    "date": ["03-01-2012", "03-02-2012", "03-03-2012", "03-04-2012"]
} 
```

我想以不同的方式解析它的日期和日期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T11:56:56.750

成功函数是这样的，是吗？

```
success: function(data) { // data represents here the ajax json response
  var days = data.day;
  var dates = data.date;
  // Here loop through them, or do anything else you like
} 
```

基本上，您可以像对待任何 Javascript 对象一样对待 JSON 响应。

# java - 如何显式关闭内存缓存中的连接

> ID：11206777
> 
> 赞同：0
> 
> 时间：2012-06-26T11:54:15.333
> 
> 标签：java, windows, memcached, spymemcached

我正在尝试关闭 memcached 连接以启动新连接。但我无法在 memcached 中找到任何合适的方法。我正在关闭以前的连接，因为它试图继续重新连接到失败的服务器。

我在 windows 上使用 spymemcached 2.8.0 和 memcached 1.4.4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T14:59:37.960

MemcachedClient 中有一个关闭方法。

# c++ - Common LNK 2019 - 头文件中的函数声明 - 源文件中的定义

> ID：11206779
> 
> 赞同：0
> 
> 时间：2012-06-26T11:54:33.567
> 
> 标签：c++, linker, c++-cli

考虑到这是一个常见问题，如果使用此文件逻辑，此错误的根源可能是什么：

*   Utils.h：声明`bool Dummy();`
*   Utils.cpp：定义`bool Dummy() {return true;}`
*   ClassA.h：无关紧要`class A { bool sheet; public: A(); };`
*   ClassA.cpp：无关代码：

    ```
     #include "Utils.h"
     #include "ClassA.h"
     A::A() { sheet = Dummy(); } 
    ```

    *注意*：所有头文件都包含保护`#pragma once`宏。

错误：像这样

```
Error   2   error LNK2028: unresolved token (0A00000B) "bool __clrcall Dummy(void)" 

Error   3   error LNK2019: unresolved external symbol "bool __clrcall Dummy(void)" .... in ClassA.obj 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:30:58.530

> bool **__clrcall** Dummy(void)

您正在使用 /clr 编译 ClassA.cpp 文件，生成托管代码。然而，您的 Dummy() 函数是在没有 /clr 的情况下编译的，因此调用约定为 __cdecl。链接器注意到差异，它找不到 Dummy 的托管实现。

您必须告诉编译器 Utils.cpp 是根据本机代码构建的。像这样修复 ClassA.cpp：

```
#pragma managed(push, off)
#include "Utils.h"
#pragma managed(pop)
#include "ClassA.h"
// etc... 
```

# java - 多线程是队列合同的一部分吗？

> ID：11206786
> 
> 赞同：0
> 
> 时间：2012-06-26T11:54:48.930
> 
> 标签：java, data-structures, queue

目前我有一个算法，有点像网络蜘蛛或文件搜索系统——它有一组要处理的元素，处理元素可以导致更多元素排队。

然而这个算法是单线程的——这是因为我从数据库中获取数据并且希望一次只有一个数据库连接。在我目前的情况下，性能并不重要 - 我这样做只是为了可视化目的以简化调试。

对我来说，使用队列抽象似乎很自然，但是似乎使用队列意味着多线程 - 据我了解，大多数标准 java 队列实现都驻留在 java.util.concurrent 包中。

![队列接口实现列表](../Images/363f0228e061d0a6e6a069794cb3cbe2.png)

我知道我可以继续使用任何支持*拉取*和*推送*的数据结构，但我想知道在这种情况下使用哪种数据结构更自然（可以在单线程应用程序中使用队列吗？）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:01:33.453

`java.util.concurrent`使用单线程结构基本上没问题。

需要注意的主要事情是阻止呼叫。如果您使用像 an 这样的有限大小结构[`ArrayBlockingQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ArrayBlockingQueue.html)，并且在已满的队列上调用该[`put`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html#put%28E%29)方法，则调用线程将阻塞，直到队列中有空间。如果您使用任何类型的队列并[`take`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html#take%28%29)在它为空时调用，则调用线程将阻塞，直到队列中有东西。如果您的应用程序是单线程的，那么这些事情就永远不会发生，这意味着永远阻塞。

为避免`put`阻塞，您可以使用无界结构，例如[`LinkedBlockingQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingQueue.html). 为避免在删除时阻塞，请使用非阻塞操作 -[`remove`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html#remove%28java.lang.Object%29)如果队列为空，则抛出异常，并[`poll`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html#poll%28long,%20java.util.concurrent.TimeUnit%29)返回 null。

话虽如此，有些[`Queue`](http://docs.oracle.com/javase/6/docs/api/java/util/Queue.html)接口的实现不在`java.util.concurrent`. [`ArrayDeque`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayDeque.html)可能是一个不错的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T12:01:49.557

可以在单线程应用程序中使用任何队列。在没有并发线程的情况下，同步开销应该可以忽略不计，并且只有在元素处理时间非常短时才会引起注意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T12:13:42.380

队列在 java.util 中定义。LinkedList 是一个队列，对并发不太友好。没有 Queue 方法阻塞，因此从单线程的角度来看它们应该是安全的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T12:45:40.347

如果您想将队列与 ThreadPool 一起使用，我建议使用[ExecutorService](http://docs.oracle.com/javase/tutorial/essential/concurrency/pools.html)为您结合两者。ExecutorService 默认使用 LinkedBlockingQueue。

[http://tutorials.jenkov.com/java-util-concurrent/executorservice.html](http://tutorials.jenkov.com/java-util-concurrent/executorservice.html)

[http://recursor.blogspot.co.uk/2007/03/mini-executorservice-future-how-to-for.html](http://recursor.blogspot.co.uk/2007/03/mini-executorservice-future-how-to-for.html)

[http://www.vogella.com/articles/JavaConcurrency/article.html](http://www.vogella.com/articles/JavaConcurrency/article.html)

# java - 如何将 Junit 生成的错误消息打印到文本文件

> ID：11206788
> 
> 赞同：-1
> 
> 时间：2012-06-26T11:54:57.330
> 
> 标签：java, junit

我正在尝试找到一个解决方案：如何将 Junit 生成的错误消息打印到文本文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:56:28.450

捕获/生成错误消息并将其写入任何文件。

`new FileWriter(new File("myFile.txt")).write(errorMessage)

# java - 跳过声纳分析测试

> ID：11206791
> 
> 赞同：2
> 
> 时间：2012-06-26T11:55:03.170
> 
> 标签：java, maven, code-analysis, sonarqube, static-code-analysis

如果我运行以下命令会发生什么：

```
mvn clean install sonar:sonar -Dmaven.test.skip=true 
```

我已经在本地设置了声纳并在端口 9000 上运行。

跳过测试对声纳报告有什么影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:05:24.460

然后 Sonar 不会产生任何与测试相关的数据，例如代码覆盖率和测试成功统计。这也将影响总体技术债务和总体质量指标的计算。

# c# - 如何使用 C# 中的 XDocument 类从 xml 中删除节点？

> ID：11206795
> 
> 赞同：-1
> 
> 时间：2012-06-26T11:55:12.413
> 
> 标签：c#, wpf, linq-to-xml

只是，我试图从我拥有的 xml 文件中删除节点。但它显示异常。下面的代码我试过了。

```
 LoadXmlFile.Element("NewElementName").Remove();            
 LoadXmlFile.Save(@"D:\yyy_RemoveElement.xml"); 
```

它显示异常，例如“调用目标已引发异常”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:56:32.163

你可以试试这样。它会帮助你很好。

```
 LoadXmlFile.Descendants("NewElementName").Remove();         
 LoadXmlFile.Save(@"D:\yyy_RemoveElement.xml"); 
```

# php - 如何使用 mysqli 从数据库中检索术语

> ID：11206796
> 
> 赞同：0
> 
> 时间：2012-06-26T11:55:15.490
> 
> 标签：php, mysqli

我不知道我是否正确，但我想做的是用户在文本框中输入一个术语或多个术语，并且在用户提交文本框后，它应该显示任何结果包含该术语。但我似乎无法让它工作，所以我的问题是，当我在文本框中输入时使用 mysqli 能够从数据库中检索术语时，我是否走在正确的轨道上？我不确定查询是否与 like 语句正确，是否循环遍历每个术语，但如果有人可以提供帮助，将不胜感激:)

我也收到一个警告，这是需要修复的：

警告：mysqli_stmt::bind_param() [mysqli-stmt.bind-param]：变量数与第 84 行 ... 中准备好的语句中的参数数不匹配。如何解决？

下面是代码的mysqli方面：

```
 <?php

        $username="xxx";
        $password="xxx";
        $database="mobile_app";

          $mysqli = new mysqli("localhost", $username, $password, $database);

          /* check connection */
          if (mysqli_connect_errno()) {
            printf("Connect failed: %s\n", mysqli_connect_error());
            die();
          }

          $questioncontent = (isset($_GET['questioncontent'])) ? $_GET['questioncontent'] : '';

        ?>

        <form action="previousquestions.php" method="get">
              <p>Search: <input type="text" name="questioncontent" value="<?php echo $questioncontent; ?>" onchange="return trim(this)" /></p>
              <p><input id="searchquestion" name="searchQuestion" type="submit" value="Search" /></p>
              </form>

        <?php 

        if (isset($_GET['searchQuestion'])) {

        $searchquestion = $questioncontent;
        $terms = array(explode(" ", $searchquestion));

        //loop through each term
        foreach ($terms as &$each) {
            $each = '%'.$each.'%';

   $questionquery = "
SELECT q.QuestionContent 
  FROM Question q
WHERE ";

$i=0;

$whereArray = array();
$orderByArray = array();
$orderBySQL = "";
$paramString = "";

//loop through each term
foreach ($terms as &$each) {
    $each = '%'.$each.'%';
        $i++;
    //if only 1 term entered then perform this LIKE statement
    if ($i == 1){
        $questionquery .= "q.QuestionContent LIKE ? ";
    } else {
        //If more than 1 term then add an OR statement
        $questionquery .= "OR q.QuestionContent LIKE ? ";
        $orderBySQL .= ",";
    }

        $orderBySQL .= "IF(q.QuestionContent LIKE ? ,1,0)"; 

    $whereArray = "%" . $each . "%";
    $orderByArray = $each;

    $paramString = "ss";
}  

$questionquery .= "GROUP BY q.QuestionId, q.SessionId ORDER BY " . $orderBySQL; 
$stmt=$mysqli->prepare($questionquery)or die($mysqli->error);;  
$stmt->bind_param($paramString, array_merge($whereArray, $orderByArray));
    $stmt->execute();
    $stmt->bind_result($dbQuestionContent); 
    $questionnum = $stmt->num_rows();
}           
            ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:14:50.487

我认为这应该可以满足您的大部分需求-我尚未对其进行测试，因此可能存在拼写错误；我将把修复这些作为练习留给读者。

```
$terms = array(explode(" ", $searchquestion));

$questionquery = "SELECT q.QuestionContent FROM Question q WHERE ";

$i=0;

$whereArray = array();
$orderByArray = array();
$orderBySQL = "";
$paramString = "";

//loop through each term
foreach ($terms as &$each) {
    $i++;
    //if only 1 term entered then perform this LIKE statement
    if ($i == 1){
        $questionquery .= "q.QuestionContent LIKE ? ";
    } else {
        //If more than 1 term then add an OR statement
        $questionquery .= "OR q.QuestionContent LIKE ? ";
        $orderBySQL .= ",";
    }

    $orderBySQL .= "IF(q.QuestionContent LIKE ? ,1,0)"; 

    $whereArray[] = "%" . $each . "%";
    $orderByArray[] = $each;

    $paramString .= "ss";
}  

$questionquery .= "GROUP BY q.QuestionId, q.SessionId ORDER BY " . $orderBySQL; 
$stmt=$mysqli->prepare($questionquery)or die($mysqli->error); ;  
$stmt->bind_param($paramString, array_merge($whereArray, $orderByArray)); 
```

# ms-word - VSTO 如何识别word文档中的部分（如表格）？

> ID：11206804
> 
> 赞同：1
> 
> 时间：2012-06-26T11:55:36.050
> 
> 标签：ms-word, vsto

我在 word 模板中有多个表格，需要以其他方式更改每个表格。也有可能会删除或插入其中一个，所以我不能说我拿了第 5 个，而且总是一样的。
必须保存标识，因此我不能使用 .ID 值。

有什么方法可以用 VSTO 识别特定表？最好也可以在没有VSTO的文档中设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:55:09.477

我找到了一种方法：

用 word 标记表格并为其添加书签。您必须选择一个唯一的名称，以便您还可以识别该表。可以通过如下方法进行识别：

```
public Word.Bookmark GetBookmark(String bookmarkName)
{
    // Find bookmark
    Word.Bookmark bookmark = null;
    foreach (Word.Bookmark curBookmark in Globals.ThisDocument.Bookmarks)
    {
        if (curBookmark.Name.Equals(bookmarkName))
        {
            bookmark = curBookmark;
            break;
        }
    }

    return bookmark;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T16:00:39.113

我遇到了类似的问题。为了解决这个问题，我在word tamplate中设置了表格的标题（右键单击表格->表格属性...->替代文本->标题）并在word文档中搜索所有表格的标题。下面是我用来搜索表格的代码。

```
public static Table getTable(Document doc, String title){
    int totalTables = doc.Tables.Count;
    Microsoft.Office.Interop.Word.Table ret = null;
    for (int i = 1; i <= totalTables; i++){
        if (title.Equals(doc.Tables[i].Title, StringComparison.OrdinalIgnoreCase)){
            ret = doc.Tables[i];
            break;
        }
    }
    return ret;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T14:49:05.250

是否可以使用表格的替代文本作为标识符？

使用下面的代码来检索它们（从[这里](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/01fa2856-2ee4-4047-840b-5e47011f0431)复制的代码）

```
 Word.Application wdApp = Application;
 Word.Document wdDoc = wdApp.ActiveDocument;
 Word.Table wdTable = wdDoc.Tables[1];
 MessageBox.Show(wdTable.Title + "\n" + wdTable.Descr); 
```

# python - PyGtk：带有条目的滚动列表，我可以设置一个 Id

> ID：11206806
> 
> 赞同：0
> 
> 时间：2012-06-26T11:55:43.130
> 
> 标签：python, gtk, signals, pygtk, gtkentry

我的窗口上有一个滚动列表，我将为每一行插入 2 个条目，我试图了解如何捕获已更改的条目并使用此值更新我的数组。

我将解释我的代码是什么：

我有一个包含 2 个字段的数组：名称和说明 每行有 2 个条目，名称和说明 当我要修改第 2 行时，我想更新数组上的对象：

```
rows[1].name = XXX rows[1].description = YYY 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:27:37.997

您可能还想考虑使用`Gtk.TreeView`可编辑单元格。底层`Gtk.ListStore`可以替换你的数组。

但是您也可以使用现有条目并将您想要的任何数据作为“用户数据”传递给`"changed"`信号的回调。

```
def on_entry_changed(entry, data):
    print("Row %d, Column %s - %s", data[0], data[1], entry.get_text())

for i in xrange(10):
    name = Gtk.Entry()
    name.connect("changed", on_entry_changed, (i, "name"))
    description = Gtk.Entry()
    description.connect("changed", on_entry_changed, (i, "description"))
    # add your entries to a box or whatever 
```

# ruby-on-rails - 在 ActiveRecord 上使用 select 会引发“无路由匹配”

> ID：11206807
> 
> 赞同：0
> 
> 时间：2012-06-26T11:55:43.600
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

发生了一些非常奇怪的事情，我不知道如何解决它。

我的数据库上有两个课程。项目和时间表。

在我的项目控制器的索引方法中，我列出了一个项目列表，我还想列出为该项目输入任何日志的最后日期。

当我运行下面的代码时，我收到以下错误。

```
No route matches {:action=>"show", :controller=>"projects", :id=>#<Project id: nil, name: "Project A", user_id: 1, created_at: nil, updated_at: nil>} 
```

如果我注释“选择”行并取消注释上面的行（使用 Project.all），一切正常。

知道为什么会发生这种情况吗？

```
def index
    #@projects = Project.all

    @projects = Project.select("julianday(Date('now')) - julianday(log.timeofevent) as diff, *").joins("left outer join timelogs log on projects.id = log.project_id").group("projects.id").order("log.timeofevent asc")

    respond_to do |format|
        format.html # index.html.erb
        format.json { render json: @projects }
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T21:38:34.590

非常感谢您的回答。你是对的。事实上，问题是当视图试图生成一个链接时，它缺少像 ID 这样的东西。

我认为这会起作用：

```
@projects = Project.select("julianday(Date('now')) - julianday(log.timeofevent) as diff, *").joins("left outer join timelogs log on projects.id = log.project_id").group("projects.id").order("log.timeofevent asc") 
```

但是，显然单独使用“（星）”是行不通的。我不得不将它替换为“项目。（星）”

因此，生成的固定代码（工作正常）是：

```
@projects = Project.select("julianday(Date('now')) - julianday(log.timeofevent) as diff, projects.*").joins("left outer join timelogs log on projects.id = log.project_id").group("projects.id").order("log.timeofevent asc") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:22:58.723

这很可能是因为在视图中您的代码试图创建将显示每个项目的链接。这可能看起来像这样：

```
link_to 'Show', project 
```

或者可能是这样的：

```
link_to 'Show', project_path(project) 
```

查询中的某些内容返回没有 no 的行`projects.id`（正如您在错误中看到的那样，`id`is `nil`）。我怀疑你的错误是`group`函数，它需要一个聚合函数，所以它肯定看起来是错误的，我不确定为什么它会导致 null project.id。你的意思是使用`order`？

## 添加

我刚刚意识到您可能正在使用它来消除重复项。所以无论如何，回到我认为其他人所在的地方 - 需要更多信息:)

# c++ - openMP的并行化效率

> ID：11206808
> 
> 赞同：0
> 
> 时间：2012-06-26T11:55:47.777
> 
> 标签：c++, parallel-processing, openmp, execution-time

我有一个 C++ 代码，在 8 线程计算机上包含许多与 openMP 并行的 for 循环。

**但是单线程的执行速度比并行8线程快。**有人告诉我，如果 for 循环的负载增加，并行化将变得高效。

这里的负载是指例如循环的最大迭代次数。问题是我没有机会比较大量数据的单线程和 8 线程并行代码。

我应该使用并行代码吗？并行化效率是否会随着 for 循环的负载而增加？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:44:45.493

OpenMP 的规范用例是高迭代计数循环的迭代在一组线程之间的分布，条件是循环迭代没有直接或间接的依赖关系。

通过考虑*循环迭代执行的顺序会影响结果吗？*. 例如，如果迭代 N+1 使用迭代 N 的结果，那么您有这样的依赖关系，以相反的顺序运行循环迭代将改变例程的输出。

间接依赖主要是指[数据竞争](http://en.wikipedia.org/wiki/Race_condition)，其中线程必须协调它们对共享数据的访问，特别是它们必须确保对共享变量的写入以正确的顺序发生。

在许多情况下，您可以重新设计带有依赖项的循环以删除这些依赖项。

如果您有一个没有此类依赖关系的高迭代计数循环，那么您有一个使用 OpenMP 进行良好加速的候选人。这是但是：

*   在每个此类循环的开始和结束时，计算都会产生一些并行开销，如果循环计数不够高，则此开销可能部分或全部超过并行运行迭代的加速。确定这是否影响您的代码的唯一方法是测试和测量。
*   循环迭代之间的依赖关系可能比我已经概述的更微妙。根据您的系统架构和循环内的计算，您可能（没有意识到）对线程进行编程以争夺对缓存或 I/O 资源或任何其他资源的访问。在最坏的情况下，这可能会导致线程数量增加，从而导致执行率下降。
*   您必须确保每个 OpenMP 线程都由硬件支持，而不是由超线程所代表的伪硬件支持。每个 OpenMP 线程一个核心，超线程是这个领域的蛇油。
*   我希望这里还有其他的但可以放在这里，也许其他人会帮忙。

现在，转向您的问题：

*   *我应该使用并行代码吗？* 测试和测量。
*   *并行化效率是否会随着 for 循环的负载而增加？* 大约，但对于您的硬件上的代码，测试和测量。

最后，如果不测量各种环境组合下的运行时间并了解您所做的测量告诉您什么，您将无法成为一名认真的并行计算专家。如果您无法比较大量数据的顺序执行和并行执行，则必须针对少量数据对其进行测量，并在对处理大量数据时的行为进行预测之前了解您学到的经验教训。

# android - 请问谁能在logcat中解释这个错误

> ID：11206809
> 
> 赞同：0
> 
> 时间：2012-06-26T11:55:50.060
> 
> 标签：android

```
06-26 17:07:09.898: E/AndroidRuntime(380): FATAL EXCEPTION: main
06-26 17:07:09.898: E/AndroidRuntime(380): java.lang.NoClassDefFoundError: org.mythrii.email.Mail
06-26 17:07:09.898: E/AndroidRuntime(380):  at org.mythrii.email.Email$1.onClick(Email.java:19)
06-26 17:07:09.898: E/AndroidRuntime(380):  at android.view.View.performClick(View.java:2485)
06-26 17:07:09.898: E/AndroidRuntime(380):  at android.view.View$PerformClick.run(View.java:9080)
06-26 17:07:09.898: E/AndroidRuntime(380):  at android.os.Handler.handleCallback(Handler.java:587)
06-26 17:07:09.898: E/AndroidRuntime(380):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-26 17:07:09.898: E/AndroidRuntime(380):  at android.os.Looper.loop(Looper.java:123)
06-26 17:07:09.898: E/AndroidRuntime(380):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-26 17:07:09.898: E/AndroidRuntime(380):  at java.lang.reflect.Method.invokeNative(Native Method)
06-26 17:07:09.898: E/AndroidRuntime(380):  at java.lang.reflect.Method.invoke(Method.java:507)
06-26 17:07:09.898: E/AndroidRuntime(380):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-26 17:07:09.898: E/AndroidRuntime(380):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-26 17:07:09.898: E/AndroidRuntime(380):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:10:18.770

解决这个问题的方法是在项目目录中创建一个名为“libs”的文件夹，并将所有外部jar文件复制到那里。

如需进一步说明，您可以参考此链接。

[http://tools.android.com/recent/dealingwithdependenciesinandroidprojects](http://tools.android.com/recent/dealingwithdependenciesinandroidprojects)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T12:05:22.843

我认为你面临的是你的代码编译，但 @run time 它崩溃。我该如何解决这个问题，`libs`在 eclipse 中的项目中创建一个文件夹（如果它不存在）并在文件夹中添加包含`org.mythrii.email.Mail`类的 jar 文件`libs`，然后运行你的应用程序。

# iis - 当内容不是 gzip 时改变标头：在 IIS 7 上作为 CDN 的来源

> ID：11206810
> 
> 赞同：9
> 
> 时间：2012-06-26T11:55:56.720
> 
> 标签：iis, gzip, cdn

我正在尝试将我的 IIS 服务器设置为 CDN 的源服务器。我已经解决了一些问题，例如 IIS 没有向代理提供 gzip 压缩的内容（如果它们有 via 标头）以及频繁的 HitThreshold 问题。

我的 CDN 供应商指出 IIS 的另一个问题是，如果客户端不请求压缩后的内容，它不会返回“Vary”标头。根据他们的说法，问题是如果由于某种原因请求内容的第一个客户端不希望内容 gzip 压缩 CDN 然后不请求文件的新版本，因为 Vary 标头不指示它应该返回两个不同的文件，取决于“接受编码”。

到目前为止，我唯一的解决方案是将“Vary：Accept-Encoding”添加为自定义标头，但由于 IIS 在请求 gzip 时自动添加此可变标头，因此我最终得到多个值，例如“Vary：Accept-Encoding，Accept-Encoding” .

有人对此有任何解决方案吗？或者可以确认这是一个真正的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T03:15:54.727

这是一个真正的问题。IIS gzip 模块会覆盖现有的 Vary 标头。[请对此 MS Connect问题](http://connect.microsoft.com/VisualStudio/feedback/details/758474/iis-gzip-compression-filter-removes-pre-existing-vary-header)投票。相关文章[在这里](http://blogs.msdn.com/b/chaun/archive/2009/10/01/iis-compression-overwrites-the-vary-header-average-rating-0-ratings.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-17T23:27:00.987

此问题现已通过 IIS 的官方补丁得到解决。要下载和更多信息，请访问[http://support.microsoft.com/kb/2877816](http://support.microsoft.com/kb/2877816)

Erez Benari，IIS 项目经理

# iphone - 转换 NSMutableArray 值

> ID：11206814
> 
> 赞同：-2
> 
> 时间：2012-06-26T11:56:03.053
> 
> 标签：iphone, ios, nsmutablearray

我一直在寻找这个，但找不到答案。

我有一个 NSMutableArray，其值为 who_1、what_2、where_3 等。

我想将其转换为谁、什么、在哪里等。

我已经将整数的值作为变量，而 _ 只是一个字符串。

我应该采取哪些步骤来转换所有这些数组值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:19:15.977

```
 NSArray * arrB = [[NSArray alloc]initWithObjects:@"apple_a",@"ball_b",@"cat_c",@"doll_d",nil]; 

 NSMutableArray * arrA = [[NSMutableArray alloc]init];

for(NSString *strData in arrB)
    {
        NSArray *arr = [strData componentsSeparatedByString:@"_"];
        [arrA  addObject:[arr objectAtIndex:0]];
    } 
```

这将是你的输出

```
arrA:(
    apple,
    ball,
    cat,
    doll
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:00:03.210

您需要为此应用逻辑，您无法找到棘手问题的答案:) 您需要运行一个循环。

用'_'分隔字符串

环形

```
for(NSString *s in ary)
{
   NSArray *a = [s componentsSeparatedByString:@"_"];
   [anotherArray addObject:[a objectAtIndex:0]];
} 
```

并更新您的阵列..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T12:02:09.913

以下可能会对您有所帮助 -

```
NSRange range = [string rangeOfString:@"_"]; 
NSString *finalString = [originalString substringToIndex:range.location]; 
```

你可以让这个循环。

或者你可以去`componentSeperatedByStrings`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T12:20:20.233

这可能会帮助你

```
NSMutableArray *tmpAry = [[NSMutableArray alloc] init];
for(NSString *_string in _StringAry)
{
    NSCharacterSet  *charSet  = [NSCharacterSet characterSetWithCharactersInString:@"_0123456789"];
    _string =  [[_string componentsSeparatedByCharactersInSet:charSet] componentsJoinedByString:@""];
    [tmpAry addObject: [[_string copy] autorelease]];
}
NSLog(@"%@", tmpAry); // Gives the modified array
[tmpAry release]; 
```

# jsf - 如何在 JSF 2 中检测会话已失效？

> ID：11206817
> 
> 赞同：4
> 
> 时间：2012-06-26T11:56:13.507
> 
> 标签：jsf, session, jsf-2

在我的应用程序中，我有一个退出按钮，单击该按钮后，当前用户的会话将被以下代码无效。

```
FacesContext.getCurrentInstance().getExternalContext().invalidateSession(); 
```

我将用户重定向到不同的页面。

但是现在我想如果用户单击后退按钮，我会将他带到应用程序的起始页面，而不是他访问的最后一页。我有一个应用程序阶段侦听器，它将与页面缓存相关的标头设置为“无”，现在我只想检测到该用户会话是否已失效。但我猜每当用户单击后退按钮时，它都会为用户创建一个新会话。有什么办法可以预防吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T12:02:45.437

> *如何在 JSF 2 中检测会话已失效？*

检查用户是否[请求了](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getRequestedSessionId%28%29)无效[的](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#isRequestedSessionIdValid%28%29)会话 ID 。

```
HttpServletRequest request = (HttpServletRequest) externalContext.getRequest();

if (request.getRequestedSessionId() != null && !request.isRequestedSessionIdValid()) {
    // Session has been invalidated during the previous request.
} 
```

* * *

> *它正在为用户创建一个新会话。有什么办法可以预防吗？*

只是不要让**您的**应用程序代码创建会话。当您的应用程序需要在会话中存储某些内容时，将隐式创建会话，例如视图或会话范围的 bean，或 a 的视图状态`<h:form>`等。

* * *

> *我有一个应用程序阶段侦听器，它将与页面缓存相关的标头设置为“无”*

servlet 过滤器是一个更好的地方。另请参阅[避免 JSF Web 应用程序上的后退按钮](https://stackoverflow.com/questions/10305718/avoid-back-button-on-jsfprimefaces-application)

# android - SAXParser 的 IOException

> ID：11206818
> 
> 赞同：0
> 
> 时间：2012-06-26T11:56:13.460
> 
> 标签：android

## **接下来的代码应该将数据从 webService 解析到 textView；

**问题**：IOEXception**问**：我怎样才能解决异常并让我的程序正常工作？？**所以任何人都可以帮助我，因为我尝试了很多来自网络的示例代码，但对我没有任何帮助

```
 @Override
 public class NewParsActivity extends Activity {   

public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
         Button b;

        /** Called when the activity is first created. */
        static final String baseUrl="http://www.androidpeople.com/wp-content/uploads/2010/06/example.xml";

        TextView tv;
        EditText ed,ed2;

            tv=(TextView)findViewById(R.id.text);
            ed=(EditText)findViewById(R.id.edt);
            b=(Button) findViewById(R.id.button1);
            ed2=(EditText) findViewById(R.id.editText1);

            try{

                SAXParserFactory spf=SAXParserFactory.newInstance();
                SAXParser sp=spf.newSAXParser();
                XMLReader xr=sp.getXMLReader();
                URL link=new URL(baseUrl);
                handlXml doingWork=new handlXml();
                xr.setContentHandler(doingWork);
                xr.parse(new InputSource(link.openStream()));
                String information=doingWork.getInformation();
                tv.setText(information);
            }catch(Exception e){
             tv.setText("Error");
            }

    //
    public class handlXml  extends DefaultHandler {
       One  item=new One();

       public String getInformation(){
           return item.DataToString();

       }
    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {
        // TODO Auto-generated method stub
        if(localName.equals("website")){
            String uniN=attributes.getValue("category");
            item.setName(uniN);
        }
    }

}

    //

public class One {

    String UName;
    public void setName(String n){
        UName=n;    
    }

public String DataToString()
{
    return "In"+UName;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:03:08.760

你确定你已经正确地实现了处理程序吗？你仍然缺乏`characters()`和`endElement()`。

`startElement()`仅用于识别您正在阅读的标签。使用临时变量将内容存储在 中`characters()`，并将数据保存在`endElement()`.

也许这就是问题所在。我不确定。

# ubuntu - 安装了 Python3，但它在 Ubuntu 中输出错误

> ID：11206819
> 
> 赞同：0
> 
> 时间：2012-06-26T11:56:16.543
> 
> 标签：ubuntu, python-3.x

我已经安装了 python 3。但是 cmake .. 显示错误： `PYTHON3_INCLUDE_DIR detected at /usr/include/python3.2mu, but /usr/include/python3.2mu/Python.h does not seem to exist Call Stack (most recent call first):` usr/include/python3.2mu 只有一个文件 pyconfig.h

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:58:00.027

由于您正在调用 cmake，我推断您正在尝试构建一些 Python C 扩展。您还需要安装该软件包[`python3-dev`](http://packages.ubuntu.com/search?keywords=python3-dev&searchon=names&suite=all&section=all)才能使其正常工作。

# wordpress - 加载页面内容和博客文章索引内容 (WordPress)

> ID：11206823
> 
> 赞同：0
> 
> 时间：2012-06-26T11:56:22.487
> 
> 标签：wordpress

我对 Wordpress 的模板结构和查询帖子有疑问。

我有我的模板设置，其中（例如）archive-$posttype.php 的构建如下：

```
get_header();

$args = 'page_id=18'; //Client Uses page
query_posts($args); the_post();

get_template_part( 'sub-header' ); 

// Reset Query
wp_reset_query();
?>
<div class="content">
   <?php get_template_part( 'loop' ); ?>... 
```

我这样做是为了为我的 sub-header.php 文件设置我的默认 $post 变量，该文件打印出该页面的内容：

```
<div id="subheader">
   <h1><?php echo get_post_meta($post->ID, 'header_title', true)?></h1>
   <?php echo get_post_meta($post->ID, 'header_description', true)?>... 
```

但是，在 home.php 模板上使用此方法不起作用：

```
get_header();

$temp_query = $wp_query;

$page_id = 119; //Client Uses page
#$post = get_page( $page_id );
$args = array('page_id' => $page_id);
$post = new WP_Query( $args ); the_post();

get_template_part( 'sub-header' ); 

wp_reset_postdata();
?>
<div class="content">           
   <?php get_template_part( 'loop' ); ?>
   <?php get_sidebar( 'news' ); ?>
</div><!--.content -->
<?php get_footer(); ?> 
```

我很好奇为什么这适用于一个模板而不是主模板。而且，我是不是走错了路？在大多数情况下与用户所在的当前页面实际相关的子标题模板中的页面内容的正确方法是什么。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:52:49.907

不确定我是否完全理解您的问题，但如果您按照我的想法进行操作，那么在另一个循环上方的特定页面中有一大段文本会拉入某种或其他类型的帖子，我会使用模板命名结构。

```
<?php /* Template Name: My Template */ ?> 
```

这将允许您使用标准循环从客户端将模板设置到的任何页面获取内容（避免您使用的静态 ID）。

您的主页错误可能是由于它未在阅读设置中设置为帖子页面。据我了解，如果页面未设置为帖子页面，它将像普通页面一样运行，除非您专门重写查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:00:19.953

*“在大多数情况下与用户所在的当前页面实际相关的子标题模板中的页面内容的正确方法是什么？”*

与其尝试将两个不相关的页面/帖子联系在一起，不如使用自定义字段工具更容易。我目前最喜欢的是[Advanced Custom Fields](http://www.advancedcustomfields.com/)。

使用 ACF，您可以将补充字段（图像、所见即所得、文件上传、总共 14 种字段类型）添加到您的帖子和页面，然后轻松地将自定义数据拉入您的模板。它有很好的文档记录并且非常易于使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T14:36:28.433

所以，我改变了 sub-header.php 模板的工作方式。基本上对正在设置/调用的页面/帖子类型进行一些基本检查，然后动态提取相关页面信息。

```
<?php 
if (is_page()) : 
    $header_title = get_post_meta($post->ID, 'header_title', true);
    $video_id = get_post_meta($post->ID, 'youtube_video_id', true);
    $thumbnail = get_the_post_thumbnail($post->ID, 'post-thumbnail', array('class'=>'visual-element'));
    $description = get_post_meta($post->ID, 'header_description', true);
elseif (is_home()) :
    $page_id = 119; // News page
    $page = get_page( $page_id );

    $header_title = get_post_meta($page->ID, 'header_title', true);
    $video_id = get_post_meta($page->ID, 'youtube_video_id', true);
    $thumbnail = get_the_post_thumbnail($page->ID, 'post-thumbnail', array('class'=>'visual-element'));
    $description = get_post_meta($page->ID, 'header_description', true);
elseif (is_archive()) :
    $page_id = 18; // Client Uses page
    $page = get_page( $page_id );

    $header_title = get_post_meta($page->ID, 'header_title', true);
    $video_id = get_post_meta($page->ID, 'youtube_video_id', true);
    $thumbnail = get_the_post_thumbnail($page->ID, 'post-thumbnail', array('class'=>'visual-element'));
    $description = get_post_meta($page->ID, 'header_description', true);
endif;
?>
<div id="subheader">    
    <h1><?php echo $header_title; ?></h1>
    <?php if ( $video_id ) : ?>
    <iframe class="visual-element" width="300" height="200" src="http://www.youtube.com/embed/<?php echo $video_id;?>?rel=0" frameborder="0" allowfullscreen></iframe>
    <?php elseif ($thumbnail) : ?>
    <?php echo $thumbnail; ?>
    <?php endif; ?>
    <?php echo $description; ?>
</div><!-- #subheader --> 
```

# android - Android位置地理编码器和谷歌地图API之间的区别

> ID：11206830
> 
> 赞同：4
> 
> 时间：2012-06-26T11:56:50.183
> 
> 标签：android, geolocation, google-geocoder

在我的 Android 应用程序中，我需要从 GPS 获取我的坐标地址。这是获得它的最佳方法。通过以下代码使用 android.location.Geocoder ？

```
Geocoder geo = new Geocoder(Booking.this);
try {
List<Address> add = geo.getFromLocation(location.getLatitude(), location.getLongitude(), 3);
 Log.d("Geocode location", ""+add.get(0));
                } catch (IOException e1) {
                    e1.printStackTrace();
                } 
```

或通过此链接[http://maps.googleapis.com/maps/api/geocode/json?latlng=13.9020,80.3498&sensor=true](http://maps.googleapis.com/maps/api/geocode/json?latlng=13.9020,80.3498&sensor=true)使用 Google 地图 API ？

如果有人指导正确的地理编码方法将会很有帮助。

# struts-1 - 使 struts1 应用程序独立于 struts

> ID：11206835
> 
> 赞同：1
> 
> 时间：2012-06-26T11:57:04.510
> 
> 标签：struts-1

我是 struts1 的新手，我想知道是否可以更改基于 struts1 构建的应用程序，如何使其独立于 struts。如果我想改变，我需要做哪些改变？

我知道我必须将 struts 标签转换为 html 标签。这是我需要执行的唯一更改还是还有更多更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:19:48.590

您可以从使用 JSTL 开始，而不是大多数逻辑和 bean 标记。除此之外，您的应用程序将依赖于 Struts，除了

*   不使用框架提供的任何东西，但是为什么首先使用 Struts
*   构建某种在幕后使用 Struts 的超级框架，但可以迁移到另一个底层 MVC 框架。但是，与使用 Struts 构建整个应用程序并将应用程序迁移到另一个框架所花费的时间相比，创建和迁移框架所花费的时间可能会更多。

无论如何，Struts1 已经过时了，不应该用于新项目。更喜欢更现代的框架，例如 Stripes 或 Spring MVC。

# gwt - 是否可以在 smartgwt 中使用 gwt rpc？

> ID：11206838
> 
> 赞同：3
> 
> 时间：2012-06-26T11:57:15.533
> 
> 标签：gwt, rpc, smartgwt

我正在用 gwt 创建一个应用程序。然后我发现 smartgwt 小部件更易于使用。在 smargwt 展示的帮助下，我设法创建了一些工作的东西。现在我想添加一些以前创建的 gwt 复合小部件。但是当这样做时，gwt rpc 调用失败了。

*   是否可以将 gwt rpc 调用与 smartgwt 一起使用？

*   如果是的话怎么办？

*   还是smartgwt和gwt之间有什么大的区别，因为gwt rpc不能在smartgwt中使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:07:15.527

是的，可以以相同的方式在 smartgwt 中使用 gwt rpc 调用。

如果您遇到任何问题，请提供有关您遇到的异常或错误等问题的描述。

# iphone - UIDocumentInteractionController 不显示

> ID：11206842
> 
> 赞同：3
> 
> 时间：2012-06-26T11:57:29.717
> 
> 标签：iphone, objective-c, ios

当`UIDocumentInteractionController`用户从`tableView`.

返回 NO并且永远不会调用`interactionControllerWithURL`委托方法`documentInteractionControllerViewControllerForPreview`并且`documentInteraction`控制器不会出现。

当用户选择表中的项目时，将执行以下代码：

```
 NSURL *fileURL;
    fileURL = (NSURL *)[[DataMng sharedMng] getFileInFolder:self.navigationItem.title atRow:indexPath.row type:type];

    if (self.docInteractionController == nil){
        self.docInteractionController = [UIDocumentInteractionController interactionControllerWithURL:fileURL];
        if (!self.docInteractionController) {
            NSLog(@"Selected a file with estension not supported for visualization");
            return;
        }
        self.docInteractionController.delegate = self;
    }else{
        self.docInteractionController.URL = fileURL;
    }

    if(! [self.docInteractionController presentPreviewAnimated:YES]){
        NSLog(@"ERROR in presenting preview");
    } 
```

委托控制器（self）符合`UIDocumentInteractionControllerDelegate`协议，是控制器内部的导航`Tabbar`控制器。

欢迎任何想法

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T17:19:08.203

我回答我自己的问题：

我启动 docInteractionController 的表单是正确的，问题出在文件 url 中，它缺少正确的扩展名（在我的例子中是 .pdf）和控制器 UTI，它必须是扩展形式（com.adobe.pdf）。

一旦正确设置预览显示没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-22T05:19:20.583

您使用这些方法来显示 UIDocumentInteractionController：-

```
-(UIViewController *)documentInteractionControllerViewControllerForPreview:(UIDocumentInteractionController *)controller

{
    return [[[[UIApplication sharedApplication] delegate]window]rootViewController];

}

-(void)documentInteractionControllerDidEndPreview:    (UIDocumentInteractionController *)controller 

{

    self.navigationController.navigationBarHidden = YES;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T13:04:23.260

```
if(! [self.docInteractionController presentPreviewAnimated:YES]){
        NSLog(@"ERROR in presenting preview");
    } 
```

想想，这不是呈现文档交互控制器的正确方式。尝试设置以下代码

```
CGRect rect = CGRectMake(0, 0, 0, 0);
[self.docInteractionController presentOpenInMenuFromRect:rect inView:self.view animated:YES]; 
```

希望这对您有所帮助。

# macos - 在具有可编辑列顺序的 NSTableView 中获取列

> ID：11206848
> 
> 赞同：0
> 
> 时间：2012-06-26T11:57:50.660
> 
> 标签：macos, cocoa, cell, nstableview, nstablecolumn

如果用户单击“ClickMe”列，我`NSTableView`希望收到通知。我将整个表格视图链接到一个可以提取`clickedColumn:`.

我当然可以编写自己的搜索算法来查看列 X 是否实际上是“Clickme”列，但这不会很优雅。有没有办法正确识别列，并以编程方式接收该 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T14:25:22.630

在你的表视图中查询 NSTableView 的 columnAtPoint: mouseDown: 或 mouseUp: 方法怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:38:43.480

我找到了一种以相当快的方式进行自己搜索的方法，但我仍然觉得我在这方面付出了太多努力：

首先，在 Interface Builder 中将所需列的 Identifier 设置为“ClickMeColumn”。然后：

```
NSInteger cmColumn = [tableView columnWithIdentifier:@"ClickMeColumn"];
if ( [tableView clickedColumn] == cmColumn )
      NSLog(@"Clicked me!"); 
```

我正在寻找类似的东西`[tableView clickedColumnIdentifier]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-30T08:39:27.840

使用以下任何一种方法。由 tableView 的委托在选择时调用。您可以从相关的 tableColumn 中提取标识符和标题字符串。

```
- (void)tableView:(NSTableView *)tableView didClickTableColumn:(NSTableColumn *)tableColumn {

NSLog(@"tableView:didClickTableColumn: %@, titleString: %@", [tableColumn identifier], [[tableColumn headerCell] stringValue]);

}

- (void)tableView:(NSTableView *)tableView mouseDownInHeaderOfTableColumn:(NSTableColumn *)tableColumn {

NSLog(@"tableView:mouseDownInHeaderOfTableColumn: %@, titleString: %@", [tableColumn identifier], [[tableColumn headerCell] stringValue]);

} 
```

来自：[https ://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSTableView_Class](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSTableView_Class)

# google-maps-markers - 根据簇内的标记类型更改标记簇的图标

> ID：11206854
> 
> 赞同：6
> 
> 时间：2012-06-26T11:58:11.930
> 
> 标签：google-maps-markers, markerclusterer

我有一张地图，此时有两种不同类型的标记：照片和博客文章。我想使用一个集群系统，最好是 MarkerClusterer。有没有办法动态更改标记图标，或者换句话说，取决于集群内的标记（照片或帖子）类型？例如，如果集群只包含照片，我想显示某种相机图标，如​​果集群内只有帖子，我可能想显示一个字母。如果所有类型的标记都在集群内，我想使用某种组合图标。

我可以在*MarkerStyleOptions*中分配图标 URL 的位置插入此检查吗？

一个好处是还可以在图标中显示每种类型的标记数量，即两个数字。

有没有人看到无需更改源代码即可做到这一点的方法？

我想最简单的选择是将每个标记类型保存在单独的集群中......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T14:55:23.737

您必须为您创建的每个组创建不同的标记数组。并尝试为每个创建一个 MarkerCluster。

# javascript - 使用 Javascript 结束呼叫

> ID：11206857
> 
> 赞同：0
> 
> 时间：2012-06-26T11:58:47.543
> 
> 标签：javascript, sip

我正在创建一个应用程序，用户可以通过单击浏览器中的数字来发起 x-lite 呼叫。发起呼叫非常容易。我所要做的就是添加`<a href="SIP: <numer>">`。我无法找到一种方法来结束来自 javascript 的调用。

我检查了vicidialer。他们有一种方法，我可以将视线最小化并在后台运行，然后呼叫和挂断按钮以某种方式向其发送命令。希望实现类似的东西。

我在这里先向您的帮助表示感谢。——马尼什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:00:38.020

它不能做到，至少不能用纯 Javascript。

`sip:`通过在浏览器中注册 URI 方案处理程序来启动 SIP 拨号程序。

启动该 URI 后，您的浏览器将不再进行交互。

# ruby-on-rails - 多线程并发 Capybara 请求？

> ID：11206861
> 
> 赞同：11
> 
> 时间：2012-06-26T11:59:00.900
> 
> 标签：ruby-on-rails, rspec, capybara

我的 API 允许用户购买某些独特的物品，其中每件物品只能卖给一个用户。因此，当多个用户尝试购买同一个商品时，一个用户应该得到响应：*ok*，另一个用户应该得到响应*too_late*。

现在，我的代码中似乎存在错误。比赛条件。如果两个用户同时尝试购买相同的商品，他们都会得到*ok*的答案。这个问题在生产中显然是可以重现的。现在我编写了一个简单的测试，试图通过 rspec 重现它：

```
context "when I try to provoke a race condition" do
  # ...

  before do
    @concurrent_requests = 2.times.map do
      Thread.new do
        Thread.current[:answer] =  post "/api/v1/item/buy.json", :id => item.id
      end
    end

    @answers = @concurrent_requests.map do |th|
      th.join
      th[:answer].body
    end
  end

  it "should only sell the item to one user" do
    @answers.sort.should == ["ok", "too_late"].sort
  end
end 
```

似乎没有同时执行查询。为了测试这一点，我将以下代码放入我的控制器操作中：

```
puts "Is it concurrent?"
sleep 0.2
puts "Oh Noez." 
```

如果请求是并发的，则预期的输出将是：

```
Is it concurrent?
Is it concurrent?
Oh Noez.
Oh Noez. 
```

但是，我得到以下输出：

```
Is it concurrent?
Oh Noez.
Is it concurrent?
Oh Noez. 
```

这告诉我，capybara 请求不是同时运行的，而是一次运行一个。**如何使我的 capabara 请求并发？**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-11T20:27:15.203

多线程和 capybara 不起作用，因为 Capabara 使用单独的服务器线程来按顺序处理连接。但如果你分叉，它会起作用。

我使用退出代码作为进程间通信机制。如果你做更复杂的事情，你可能想要使用套接字。

这是我快速而肮脏的 hack：

```
before do
  @concurrent_requests = 2.times.map do
    fork do
      # ActiveRecord explodes when you do not re-establish the sockets
      ActiveRecord::Base.connection.reconnect!

      answer = post "/api/v1/item/buy.json", :id => item.id

      # Calling exit! instead of exit so we do not invoke any rspec's `at_exit`
      # handlers, which cleans up, measures code coverage and make things explode.
      case JSON.parse(answer.body)["status"]
        when "accepted"
          exit! 128
        when "too_late"
          exit! 129
      end
    end
  end

  # Wait for the two requests to finish and get the exit codes.
  @exitcodes = @concurrent_requests.map do |pid|
    Process.waitpid(pid)
    $?.exitstatus
  end

  # Also reconnect in the main process, just in case things go wrong...
  ActiveRecord::Base.connection.reconnect!

  # And reload the item that has been modified by the seperate processs,
  # for use in later `it` blocks.
  item.reload
end

it "should only accept one of two concurrent requests" do
  @exitcodes.sort.should == [128, 129]
end 
```

我使用相当奇特的退出代码，例如*128*和*129*，因为如果没有到达 case 块，进程退出代码为 0，如果发生异常，则退出代码为 1。两者都不应该发生。因此，通过使用更高级别的代码，我会注意到何时出现问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-11T06:02:25.743

您不能同时发出水豚请求。但是，您可以创建多个 capybara 会话并在同一个测试中使用它们来模拟并发用户。

```
user_1 = Capybara::Session.new(:webkit) # or whatever driver
user_2 = Capybara::Session.new(:webkit)

user_1.visit 'some/page'
user_2.visit 'some/page'

# ... more tests ...

user_1.click_on 'Buy'
user_2.click_on 'Buy' 
```

# xmpp - 将 XMPP 服务器集成到 Web 应用程序的最佳方式

> ID：11206865
> 
> 赞同：1
> 
> 时间：2012-06-26T11:59:07.647
> 
> 标签：xmpp

我正在开发一个中等规模的社区项目，使用 php 和 php 框架 symfony2 atm。

我们计划将 XMPP 集成为我们用户的支持聊天和高级功能。用户将能够通过 webclient 和普通的 xmpp 客户端进行连接。

所以这是我的问题：

1.  关于名册：我希望将朋友列表中的用户列在用户联系人列表中。我知道这可以通过名册来完成。但是我怎样才能以一种简单而稳定的方式实现它呢？是否有一个好的服务器实现可以让用户名册从像 pgsql 这样的 sql 数据库中出来？
2.  当用户在 xmpp 服务器上登录时名册数据发生变化时，客户端会发生什么情况？
3.  我可以对用户名册中列出的用户进行分组吗？
4.  对于此类项目，您会推荐哪个 XMPP 服务器项目？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T09:42:50.900

1.  大多数现有的 XMPP 服务器都支持所有流行的 DBRM。所以这应该没有问题。

2.  当您直接对数据库进行更改时，可能什么都没有。所以必须找到一个服务器，您可以在其中向所有连接的客户端发起名册推送。另请参阅 XMPP RFC 以获取名册更新。

3.  是的，名册组是 XMPP 的核心功能。

4.  您可以在此处找到 XMPP 服务器列表：http: [//xmpp.org/xmpp-software/servers/](http://xmpp.org/xmpp-software/servers/)您必须检查哪些服务器支持 pgsql 并允许您更新名册并启动名册推送到连接的资源。

# javascript - 如何防止 Backbone.js 中的路由？

> ID：11206867
> 
> 赞同：3
> 
> 时间：2012-06-26T11:59:17.910
> 
> 标签：javascript, backbone.js, backbone-events, backbone-routing

当我从首页单击“取消”时 - 没关系。但是当我移至“第二页”时，“取消”不起作用。在这种情况下，路由器将应用程序重定向到“”路由。我需要防止这种重定向。

“取消” - 隐藏链接，“第二页” - 移动到第二页

```
<script type="text/html" id="template">
    <a href="#" class="cancel">Cancel</a>
    <a href="#second">Second page</a>
</script>

<div id="container"></div>    

<script>
var View = Backbone.View.extend({

    template: $('#template').html(),

    events: {
        "click .cancel": "cancel"
    },

    cancel: function () {
        this.$el.hide();
    },

    render: function () {
        this.$el.html(this.template);
        return this;
    }
});

var AppRouter = Backbone.Router.extend({

    routes: {
        "": "first",
        "second": "second"
    }, 
```

创建视图并替换容器的 html

```
 links: function () {
        var view = new View;
        $('#container').html(view.render().el);
    },

    second: function () {
        this.links();
        $('#container').prepend("<h1>Second page</h1>");
    },

    first: function () {
        this.links();
        $('#container').prepend("<h1>First page</h1>");
    }

});

$(document).ready(function () {
    app = new AppRouter;
    Backbone.history.start();
});
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:06:14.030

我认为您应该从取消处理程序返回 false 以防止导航到`#`：

```
cancel: function (e) {
        this.$el.hide();
        return false;
    }, 
```

[http://api.jquery.com/on/](http://api.jquery.com/on/)说：

> 从事件处理程序返回 false 将自动调用 event.stopPropagation() 和 event.preventDefault()。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-02T15:47:57.440

您还可以像**在这个答案**中那样以可重用的方式解决阻塞哈希havigation ：

**[如果内容未保存，则阻止导航到另一个视图](https://stackoverflow.com/questions/9872988/prevent-navigating-to-another-view-if-contents-are-unsaved/24535463#24535463)**

此解决方案可防止 Backbone 路由器回调触发，虽然它只能在哈希更改后运行，但此函数会将先前的哈希片段设置回来，因此不会被注意到

* * *

此外，**对于这个确切的问题**，您可以简单地从

```
<a href="#">...</a> 
```

到

```
<a>...</a> 
```

它将充当普通的 HTML 锚标记（例如，光标设置为`pointer`），但不会在任何地方导航

# macos - 打开 xterm telnet 连接 (Mac OS X)

> ID：11206872
> 
> 赞同：1
> 
> 时间：2012-06-26T11:59:40.400
> 
> 标签：macos, applescript, x11, telnet, xterm

几个小时以来，我一直试图让这个脚本正确，并且已经走了很远，但是我通过将命令传递给 X11 xterm 窗口而陷入困境。

我需要连接到 xterm telnet 服务器。这是正常的程序：

*   打开终端
*   输入命令：（`xterm -fa Monaco -fs 12`这会打开一个 X11 窗口，字体更大）
*   在新的 xterm 窗口中，我输入：`telnet -l username server ip`
*   这将打开 telnet 连接并提示输入密码

因为一些没有终端知识的用户必须能够访问这个连接，所以我尝试了几种方法来编写一个可以在 Mac 上运行的脚本。并打开连接，让用户在打开的 telnet 窗口中工作。我最终为此使用了 AppleScript，并编写了以下脚本：

```
tell application "X11"
    activate
end tell

tell application "System Events"
    tell process "X11"
        tell menu bar 1
            tell menu "Applications"
                click menu item "Terminal"
                tell window 1
                    run
                    do script "xterm -fa Monaco -fs 12"
                    delay 2
                    do script "telnet -l meister 192.169.25.1"
                end tell
            end tell
        end tell
    end tell
end tell 
```

但不幸的是，这不起作用。它只打开一个 X11 xterm 窗口，没有更大的字体，也没有终端命令，它只是一个空窗口。

你们中有人知道我如何更改脚本以使其正常工作，或者也许有一种方法可以使用其他类型的脚本而不是 AppleScript 来做到这一点？

非常感谢您提前提供的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T00:17:36.380

首先，要启动 xterm，只需执行以下操作：

```
do shell script "xterm -fa Monaco -fs 12 -wf" 
```

如果需要，这将自动启动 X11。

根据您的系统，/usr/X11/bin 可能不在路径上，因此您可能希望这样做：

```
do shell script "/usr/X11/bin/xterm -fa Monaco -fs 12 -wf" 
```

如果您希望 xterm 运行命令而不是仅仅打开 shell，请使用 -e 参数：

```
do shell script "/usr/X11/bin/xterm -fa Monaco -fs 12 -e telnet -l meister 192.169.25.1" 
```

如果 telnet 命令失败，xterm 窗口将立即关闭；要调试它，请在“-e”之前添加一个“-hold”。

既然你问了“一些其他类型的脚本而不是苹果脚本”，同样的事情显然是 bash 中的一个单行代码，两个带有 shebang：

```
#!/bin/sh
/usr/X11/bin/xterm -fa Monaco -fs 12 -e telnet -l meister 192.169.25.1 
```

如果将其保存为“doit”和“chmod +x doit”，则可以从终端以“./doit”的形式运行它。

或者，如果您希望它在 Finder 中可双击，请将其重命名为“doit.command”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-26T12:34:31.443

尝试：

```
tell application "X11"
    activate
    tell application "System Events" to tell process "X11"
        click menu item "Terminal" of menu 1 of menu bar item "Applications" of menu bar 1
        delay 0.5
        keystroke "xterm -fa Monaco -fs 12"
        delay 0.5
        keystroke return
        delay 0.5
        keystroke "telnet -l meister 192.169.25.1"
        delay 0.5
        keystroke return
    end tell
end tell 
```

# spring - jsf2.0与spring 3.1和hibernate 4.1的集成

> ID：11206876
> 
> 赞同：0
> 
> 时间：2012-06-26T11:59:54.253
> 
> 标签：spring, hibernate, jakarta-ee, jsf-2, tomcat7

我想集成 jsf2.0 和 spring 3.1 和 hibernate 4.1。但是tomcat有错误404：描述请求的资源（/jsfspringhiber/page/default.jsf）不可用。怎么了？ ![在此处输入图像描述](../Images/e00b307a595581dbe863d454330e156a.png) 以下是我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns="http://java.sun.com/xml/ns/javaee" 
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">

  <display-name>jsfspringhiber</display-name>

  <!-- Add Support for Spring -->
  <listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
  </listener>
  <listener>
    <listener-class>
        org.springframework.web.context.request.RequestContextListener
    </listener-class>
  </listener>

  <!-- Change to "Production" when you are ready to deploy -->
  <context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
  </context-param>

  <!-- Welcome page -->
  <welcome-file-list>
    <welcome-file>faces/default.xhtml</welcome-file>
  </welcome-file-list>

  <!-- JSF mapping -->
  <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <!-- Map these files with JSF -->
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.faces</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
  </servlet-mapping>

</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T14:28:26.620

我使用行家。正确答案在[这里。](https://stackoverflow.com/questions/11293730/oracle-11g-and-integration-of-hibernate-spring-and-jsf/11295542#11295542) 结构是： ![在此处输入图像描述](../Images/190ed3e5f7b4edabef25b0033ff8cbc9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T14:26:59.510

好的，如果您的 url 模式为 /faces/* ，Faces servlet 将在每个请求前面加上 /faces。因此，您必须以 /jsfspringhiber/faces/page/default.xhtml 或仅 /jsfspringhiber 访问资源（如果欢迎文件列为 faces/page/default.xhtml）。

更新：删除所有 servlet 映射，只使用一个：

```
<welcome-file-list>
  <welcome-file>default.xhtml</welcome-file>
</welcome-file-list>

<servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.xhtml</url-pattern>
</servlet-mapping> 
```

并将 default.xhtml 文件放在 WebContent 目录下。

如果您真的想映射所有这些 url 模式，请查看此[答案](https://stackoverflow.com/questions/9032635/container-managed-login-page-does-not-render-jsf-components)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T13:24:27.117

我猜你正在使用 eclipse，我认为你的部署有问题。

1）查看tomcat部署路径看是否部署正确：workspace/.metadata/plugings/org.eclipse.wst.server.core/tmp0/wtpwebapps。（有时有助于删除 tmp0，以强制 tomcat 重新部署）。

2）在项目的属性中检查部署程序集并验证是否包含所有需要的文件。

这可能有效

# python - 如何为降序值编写排序键函数？

> ID：11206884
> 
> 赞同：36
> 
> 时间：2012-06-26T12:00:52.253
> 
> 标签：python, sorting

在最近版本的 Python 中，将*键*函数传递`sort()`给以前的*cmp*函数使我对某些对象执行复杂的排序变得更加棘手。

例如，我想使用一组字符串决胜局字段对一组对象从最新到最旧进行排序。所以我希望日期以相反的顺序排列，但字符串按自然顺序排列。使用比较功能，我可以将日期字段与字符串字段的比较反转。但是对于一个关键功能，我需要找到某种方法来反转/反转日期或字符串。

处理数字很容易（虽然丑陋） - 只需从某些东西中减去它们 - 但我是否必须为日期找到类似的技巧（从另一个日期减去它们并比较时间增量？）和字符串（......我不知道我如何以与语言环境无关的方式颠倒它们的顺序）。

我知道存在，`functools.cmp_to_key()`但它被描述为*“主要用作转换为不再支持比较函数的 Python 3 的程序的转换工具”*。这意味着我应该能够使用 key 方法做我想做的事——但是如何做呢？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-26T12:26:52.967

最通用的方法是简单地依次按每个键单独排序。Python 的排序总是稳定的，所以这样做是安全的：

```
sort(data, key=tiebreakerkey)
sort(data, key=datekey, reverse=True) 
```

将（假设关键功能的相关定义）为您提供按日期降序和升序排序的数据。

请注意，这样做比生成单个复合键函数要慢，因为您最终会执行两个完整的排序，因此如果您可以生成一个更好的复合键，但将其拆分为单独的排序会提供很大的灵活性：给定每列的关键函数，您可以对它们进行任意组合，并为任何单独的列指定反向。

对于一个完全通用的选项：

```
keys = [ (datekey, True), (tiebreakerkey, False) ]
for key, rev in reversed(keys):
    sort(data, key=key, reverse=rev) 
```

为了完整起见，虽然我真的认为应该尽可能避免：

```
from functools import cmp_to_key
sort(data, key=cmp_to_key(your_old_comparison_function)) 
```

我认为你应该避免这种情况的原因是你回到`n log n`调用比较函数与`n`调用键函数（或`2n`在你进行两次排序时调用）相比。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-26T12:42:36.143

执行此操作的缓慢但优雅的方法是创建一个反向排序的值包装器：

```
from functools import total_ordering
@total_ordering
class ReversedOrder:
    def __init__(self, value):
        self.value = value
    def __eq__(self, other):
        return other.value == self.value
    def __lt__(self, other):
        return other.value < self.value 
```

如果您没有`functools.total_ordering`，则必须实现所有 6 个比较，例如：

```
import operator
class ReversedOrder:
    def __init__(self, value):
        self.value = value
for x in ['__lt__', '__le__', '__eq__', '__ne__', '__ge__', '__gt__']:
    op = getattr(operator, x)
    setattr(ReversedOrder, x, lambda self, other, op=op: op(other.value, self.value)) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-26T12:41:09.140

我认为文档不完整。我将“主要”一词解释为仍有理由使用 cmp_to_key，这就是其中之一。 `cmp`被删除是因为它是一个“有吸引力的麻烦：”人们会被它吸引，即使它`key`是一个更好的选择。

但是你的case作为一个函数显然更好`cmp`，所以用`cmp_to_key`它来实现它。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-26T12:23:10.000

排序两次，每个键上一次，反转一次。

（Python`sort`是[*稳定*](http://en.wikipedia.org/wiki/Stable_sort#Stability)的；也就是说，它不会改变原始列表的顺序，除非它必须这样做。）

[如果您关心如何对相等的元素进行排序，那么您按照哪种顺序进行排序*确实很重要。*]

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-07-09T20:05:31.287

一种方法是使用`pandas`library 和 args `ascending`，设置你想要升序排序的列和你想要降序的列，例如`ascending=[True,False,False]`

您不仅可以对***两个***级别（例如`datetime`和`str`）执行此操作，还可以对所需的***任意***数量的级别执行此操作。

例如，如果您有

```
d = [[1, 2, datetime(2017,1,2)], 
     [2, 2, datetime(2017,1,4)],
     [2, 3, datetime(2017,1,3)],
     [2, 3, datetime(2017,1,4)], 
     [2, 3, datetime(2017,1,5)], 
     [2, 4, datetime(2017,1,1)], 
     [3, 1, datetime(2017,1,2)]] 
```

你可以设置你的`df`

```
df = pd.DataFrame(d) 
```

并使用`sort_values`

```
sorted_df = df.sort_values(by=[0,1,2], ascending=[True,False,False])
sorted_list = sorted_df.agg(list, 1).tolist()

[[1, 2, Timestamp('2017-01-02 00:00:00')],
 [2, 4, Timestamp('2017-01-01 00:00:00')],
 [2, 3, Timestamp('2017-01-05 00:00:00')],
 [2, 3, Timestamp('2017-01-04 00:00:00')],
 [2, 3, Timestamp('2017-01-03 00:00:00')],
 [2, 2, Timestamp('2017-01-04 00:00:00')],
 [3, 1, Timestamp('2017-01-02 00:00:00')]] 
```

注意第一列是升序排列，第二列和第三列是降序排列，这当然是由于设置的原因`ascending=[True,False,False]`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-14T10:02:48.380

对于字符串，您可以使用一些公认的最大值（例如 2^16 或 2^32）并使用 chr()、unicode()、ord() 来进行数学运算，就像整数一样。

在我的一项工作中，我知道我处理的是 utf8 中的字符串，它们的序数低于 0xffff，所以我写道：

```
def string_inverse(s):
    inversed_string = ''
    max_char_val = 0xffff
    for c in s:
        inversed_string += unicode(max_char_val-ord(c))
    return inversed_string        

result.sort(key=lambda x:(x[1], string_inverse(x[0])), reverse=True) 
```

x 是类型：(string, int)，所以我得到的是，滥用 SQL：

```
select * from result order by x[1] desc, x[0] asc; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-06T03:04:57.773

尝试这个：

```
>>> import functools
>>> reverse_key = functools.cmp_to_key(lambda a, b: (a < b) - (a > b))
>>> reverse_key(3) < reverse_key(4)
False
>>> reverse_key(3) > reverse_key(4)
True
>>> reverse_key('a') < reverse_key('b')
False 
```

# categories - 在 category.tpl 中获取 prestashop 中当前类别的同级类别

> ID：11206886
> 
> 赞同：3
> 
> 时间：2012-06-26T12:01:06.813
> 
> 标签：categories, prestashop

我需要在 Prestashop 主题的类别页面中列出**同级类别**。目前，它**确实**显示了子类别（如果有），但**不**显示兄弟类别。

快速回答将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-02T18:01:00.577

首先，我会在 /override/controllers/ 中创建一个覆盖文件，名为 CategoryController.php

并添加：

```
<?php

class CategoryController extends CategoryControllerCore
{
    public function displayContent()
    {
        // Get the global smarty object.
        global $smarty;

        // Get current category's parent.
        $parent_category = new Category($this->category->id_parent, self::$cookie->id_lang);

        // Get parent category's subcategories (which is current category's siblings, including it self).
        $category_siblings = $parent_category->getSubCategories((int)self::$cookie->id_lang)

        /* Assign your siblings array to smarty. */
        $smarty->assign(
            array(
                "category_siblings" => $category_siblings
            )
        );

        /* This we run the normal displayContent, but pass the siblings array to
           category.tpl */
        parent::displayContent();
    }
}

?> 
```

我这是做到这一点的基本方法，我还没有测试它。您需要找到一种不在同级列表中列出当前类别的方法。

如果代码有效，您现在将在 category.tpl 中有一个名为 category_siblings 的数组，您现在需要例如复制 category.tpl 中输出子类别的代码并将子类别 arra 替换为 category_siblings 数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-15T18:08:57.403

谢谢 - 效果很好！

您不必从数组中删除当前类别，只需将其标记为活动。您必须编辑 category.tpl 并在 foreach 子类别循环中插入：

```
<li {if $category->id == $subcategory.id_category}class="active"{/if}> 
```

它非常棒的导航技巧！再感谢一次

# android - 如何将应用程序注册到 C2DM

> ID：11206889
> 
> 赞同：1
> 
> 时间：2012-06-26T12:01:10.760
> 
> 标签：android, android-c2dm

> **可能重复：**
> [向 C2DM 注册 Android 应用程序](https://stackoverflow.com/questions/3757576/register-the-android-app-with-c2dm)

所以，我一直在四处寻找，阅读所有我能拿到的东西，以检查如何将 C2DM 与我的超酷聊天应用程序一起使用。

我看到我的服务器人员必须处理各种各样的事情，但我没有理解一件事。

注册过程必须包含一个 senderId，它基本上是一个 Google ID，它作为正在使用该应用的应用（或用户）被传输到 Google 服务器，这将您标识为推送客户端。

我的问题是，**我是否必须通过注册对话框提示用户？**这对我的用户来说似乎是一件可怕的事情，因为该应用程序已经使用 Facebook 连接并且提示太多这些对用户怀有敌意，并且肯定会让他们卸载该应用程序。

一个应用程序注册C2DM的过程是什么？以及如何使用 Google Play 使用的现有身份验证令牌？

* * *

我（第三次）阅读了 Vogella 关于使用 C2DM 的教程，这是我提出问题的基础：

```
public void register(View view) {
    Intent intent = new Intent("com.google.android.c2dm.intent.REGISTER");
    intent.putExtra("app",PendingIntent.getBroadcast(this, 0, new Intent(), 0));
    intent.putExtra("sender", "youruser@gmail.com");  //WHICH EMAIL?
    startService(intent);
} 
```

第 4 行中使用的电子邮件是设备所有者的电子邮件还是服务电子邮件？

如果我们谈论的是用户，有没有办法在没有另一个身份验证对话框的情况下获得它？我已经有 Facebook 登录，我不想让用户感到不适。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:07:56.093

请参阅 vogella 的文章，非常简短的 C2DM 实施指南。

[http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html](http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html)

那里提到的所有东西以及代码，我个人都实现了它的代码，并且运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:25:30.347

首先你需要[注册](https://developers.google.com/android/c2dm/signup)google的C2DM

其次为您的 C2DM 应用程序获取 Auth 令牌

```
function(){
        // Create the post data
        // Requires a field with the email and the password
        StringBuilder builder = new StringBuilder();
        builder.append("Email=").append(email);
        builder.append("&Passwd=").append(password);
        builder.append("&accountType=GOOGLE");
        builder.append("&source=MyLittleExample");
        builder.append("&service=ac2dm");

        // Setup the Http Post
        byte[] data = builder.toString().getBytes();
        URL url = new URL("https://www.google.com/accounts/ClientLogin");
        HttpURLConnection con = (HttpURLConnection) url.openConnection();
        con.setUseCaches(false);
        con.setDoOutput(true);
        con.setRequestMethod("POST");
        con.setRequestProperty("Content-Type",
                "application/x-www-form-urlencoded");
        con.setRequestProperty("Content-Length", Integer.toString(data.length));

        // Issue the HTTP POST request
        OutputStream output = con.getOutputStream();
        output.write(data);
        output.close();

        // Read the response
        BufferedReader reader = new BufferedReader(new InputStreamReader(con.getInputStream()));
        String line = null;
        String auth_key = null;
        while ((line = reader.readLine()) != null) {
            if (line.startsWith("Auth=")) {
                auth_key = line.substring(5);
            }
        }

        // Finally get the authentication token
        // To something useful with it
        return auth_key;
} 
```

现在您需要将客户端移动设备注册到 C2DM 以接收更新

```
public void register(View view) {
    Intent intent = new Intent("com.google.android.c2dm.intent.REGISTER");
    intent.putExtra("app",PendingIntent.getBroadcast(this, 0, new Intent(), 0));
    intent.putExtra("sender", "youruser@gmail.com");
    startService(intent);
} 
```

该服务将异步向 Google 注册，并在成功注册后发送“ **com.google.android.c2dm.intent.REGISTRATION** ”意图。您的应用程序需要为此意图注册一个广播接收器。这也需要使用基于您的包的权限，因为 Android 系统会在内部对此进行检查。

```
<receiver android:name=".C2DMMessageReceiver"
    android:permission="com.google.android.c2dm.permission.SEND">
    <intent-filter>
        <action android:name="com.google.android.c2dm.intent.RECEIVE"></action>
        <category android:name="de.vogella.android.c2dm.simpleclient" />
    </intent-filter>
</receiver> 
```

//

```
public class C2DMRegistrationReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
    String action = intent.getAction();
    Log.w("C2DM", "Registration Receiver called");
    if ("com.google.android.c2dm.intent.REGISTRATION".equals(action)) {
        Log.w("C2DM", "Received registration ID");
        final String registrationId = intent
                .getStringExtra("registration_id");
        String error = intent.getStringExtra("error");

        Log.d("C2DM", "dmControl: registrationId = " + registrationId
                + ", error = " + error);
        // Send and store this in your application server(unique for each device)
    }
}
} 
```

现在您可以开始通过您的服务器发送 C2DM 消息

```
private final static String AUTH = "authentication";

    private static final String UPDATE_CLIENT_AUTH = "Update-Client-Auth";

    public static final String PARAM_REGISTRATION_ID = "registration_id";

    public static final String PARAM_DELAY_WHILE_IDLE = "delay_while_idle";

    public static final String PARAM_COLLAPSE_KEY = "collapse_key";

    private static final String UTF8 = "UTF-8";

    public static int sendMessage(String auth_token, String registrationId,
            String message) throws IOException {

        StringBuilder postDataBuilder = new StringBuilder();
        postDataBuilder.append(PARAM_REGISTRATION_ID).append("=")
                .append(registrationId);
        postDataBuilder.append("&").append(PARAM_COLLAPSE_KEY).append("=")
                .append("0");
        postDataBuilder.append("&").append("data.payload").append("=")
                .append(URLEncoder.encode(message, UTF8));

        byte[] postData = postDataBuilder.toString().getBytes(UTF8);

        // Hit the dm URL.

        URL url = new URL("https://android.clients.google.com/c2dm/send");
        HttpsURLConnection
                .setDefaultHostnameVerifier(new CustomizedHostnameVerifier());
        HttpsURLConnection conn = (HttpsURLConnection) url.openConnection();
        conn.setDoOutput(true);
        conn.setUseCaches(false);
        conn.setRequestMethod("POST");
        conn.setRequestProperty("Content-Type",
                "application/x-www-form-urlencoded;charset=UTF-8");
        conn.setRequestProperty("Content-Length",
                Integer.toString(postData.length));
        conn.setRequestProperty("Authorization", "GoogleLogin auth="
                + auth_token);

        OutputStream out = conn.getOutputStream();
        out.write(postData);
        out.close();

        int responseCode = conn.getResponseCode();
        return responseCode;
    } 
```

[参考](http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html)

# javascript - 如何一次删除大量的mongodb集合？

> ID：11206890
> 
> 赞同：22
> 
> 时间：2012-06-26T12:01:17.403
> 
> 标签：javascript, mongodb, database

我的数据库中有很多 mongodb 集合需要删除。它们都有相似的名称，如果只使用通配符，则很容易删除它们。但看起来他们做不到。

有没有办法一次选择一堆集合来删除它们？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-11T12:10:38.100

对于正则表达式，您可以使用 string.match

```
db.getCollectionNames().forEach(function(c) {
    if(!c.match("^system.indexes")) { 
        db.getCollection(c).drop();
    }
  }); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-02-24T07:00:15.017

```
# Delete Particular Collections From MongoDB

> use database_name

> delete_collection_list = ["collection1", "collection2", "collection3", "collection4", "collection5", "collection6"]

> delete_collection_list.forEach( function (collection) {
    if (db.getCollectionNames().indexOf(collection)>=0) {
        db.getCollection(collection).drop();
        print("Deleted Collection: "+ collection);
    }
  }) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-26T12:25:02.627

您可以使用以下命令删除所有集合。

```
> use database_name;

> db.getCollectionNames().forEach(function(c) {
    if(c != 'system.indexes') { 
        db.getCollection(c).drop();
    }
  }); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-06-26T12:09:04.207

不，没有办法通过通配符/正则表达式删除多个集合。您必须将它们一一丢弃。我最近执行了一项类似的任务，我的脚本每秒能够丢弃约 20-30 个集合。你有多少？

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-09-23T16:18:23.103

You can drop **every** collection in the database with `db.dropDatabase()` in the mongo shell. Just make sure you really want to nuke everything before you do.

# ios - iOS CAShapeLayer 和带有 Core Animation 的阴影

> ID：11206891
> 
> 赞同：0
> 
> 时间：2012-06-26T12:01:20.457
> 
> 标签：ios, core-graphics, core-animation, shadow

我想用 CAShapeLayer 绘制一个图形，并在背景上设置一个漂亮的阴影以获得一些漂亮的视觉效果。有了阴影，我的图形动画（使用一些数据建模的直线到图形）真的变慢了！我阅读了 shadowPath 属性并决定使用它，但问题是，尽管我关闭了 CGMutable 路径，但似乎 CoreAnimation 关闭了它，我得到的这个阴影，而不是一条线，而是一个多边形. 看起来真的很丑。

帮助！

# javascript - 使用 javascript 使用 XML 验证 XSD

> ID：11206892
> 
> 赞同：3
> 
> 时间：2012-06-26T12:01:20.913
> 
> 标签：javascript, xml, xsd

请告诉我如何使用 JavaScript 使用 XSD 解析或验证 XML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:31:28.290

如果它是客户端（浏览器内）Javascript，我不知道在浏览器中运行的任何 XSD 验证器。我将创建一个服务器端验证服务并从 Javascript 作为 Web 服务调用它。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-26T13:34:33.813

您不能这样做，除非您对仅在 Internet Explorer 中有效的验证感到满意。如果没问题，请检查：[http ://technosatish.blogspot.com/2008/06/javascript-xsd-validation-and-examples.html](http://technosatish.blogspot.com/2008/06/javascript-xsd-validation-and-examples.html)

# android - 如何从位图图像创建画廊？

> ID：11206894
> 
> 赞同：0
> 
> 时间：2012-06-26T12:01:31.023
> 
> 标签：android

到目前为止我所做的是

```
public class GalleryView extends Activity {
public Context context=getApplicationContext();

public Map< Integer,Drawable> dayMap;
Bitmap icon1 = BitmapFactory.decodeResource(context.getResources(),
        R.drawable.antartica1);
Drawable d1 =new BitmapDrawable(context.getResources(),icon1);

Bitmap icon2 = BitmapFactory.decodeResource(context.getResources(),
        R.drawable.antartica2);
Drawable d2 =new BitmapDrawable(context.getResources(),icon2);

Bitmap icon3 = BitmapFactory.decodeResource(context.getResources(),
        R.drawable.antartica3);
Drawable d3 =new BitmapDrawable(context.getResources(),icon3);

Bitmap icon4 = BitmapFactory.decodeResource(context.getResources(),
        R.drawable.antartica4);
Drawable d4 =new BitmapDrawable(context.getResources(),icon4);

Bitmap icon5 = BitmapFactory.decodeResource(context.getResources(),
        R.drawable.antartica5);
Drawable d5 =new BitmapDrawable(context.getResources(),icon5);

ImageView imageView;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main_gallery);
    dayMap=new HashMap<Integer,Drawable>();
    dayMap.put(0,d1);
    dayMap.put(1,d2);
    dayMap.put(2,d3);
    dayMap.put(3,d4);
    dayMap.put(4,d5);

    Gallery ga = (Gallery)findViewById(R.id.Gallery01);
    ga.setAdapter(new ImageAdapter(context));

    imageView = (ImageView)findViewById(R.id.ImageView01);
    ga.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            Toast.makeText(getBaseContext(), 
                    "You have selected picture " + (arg2+1) + " of Antartica", 
                    Toast.LENGTH_SHORT).show();
            imageView.setImageDrawable(dayMap.get(arg2));

        }

    });

}

public class ImageAdapter extends BaseAdapter {

    private Context ctx;
    int imageBackground;

    public ImageAdapter(Context c) {
        ctx = c;
        TypedArray ta = obtainStyledAttributes(R.styleable.Gallery1);
        imageBackground = ta.getResourceId(R.styleable.Gallery1_android_galleryItemBackground, 1);
        ta.recycle();
    }

    @Override
    public int getCount() {

        return dayMap.size();
    }

    @Override
    public Object getItem(int arg0) {

        return arg0;
    }

    @Override
    public long getItemId(int arg0) {

        return arg0;
    }

    @Override
    public View getView(int arg0, View arg1, ViewGroup arg2) {
        ImageView iv = new ImageView(ctx);
        iv.setImageDrawable(dayMap.get(arg0));
        iv.setScaleType(ImageView.ScaleType.FIT_XY);
        iv.setLayoutParams(new Gallery.LayoutParams(160,130));
        iv.setBackgroundResource(imageBackground);
        return iv;
    }

} 
```

}

但是我收到了这个错误-

```
06-26 17:29:27.171: E/AndroidRuntime(853): FATAL EXCEPTION: main
06-26 17:29:27.171: E/AndroidRuntime(853): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.sai.samples.views/com.sai.samples.views.GalleryView}: java.lang.NullPointerException
06-26 17:29:27.171: E/AndroidRuntime(853):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
06-26 17:29:27.171: E/AndroidRuntime(853):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
06-26 17:29:27.171: E/AndroidRuntime(853):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-26 17:29:27.171: E/AndroidRuntime(853):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
06-26 17:29:27.171: E/AndroidRuntime(853):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-26 17:29:27.171: E/AndroidRuntime(853):  at android.os.Looper.loop(Looper.java:130)
06-26 17:29:27.171: E/AndroidRuntime(853):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-26 17:29:27.171: E/AndroidRuntime(853):  at java.lang.reflect.Method.invokeNative(Native Method)
06-26 17:29:27.171: E/AndroidRuntime(853):  at java.lang.reflect.Method.invoke(Method.java:507)
06-26 17:29:27.171: E/AndroidRuntime(853):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-26 17:29:27.171: E/AndroidRuntime(853):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-26 17:29:27.171: E/AndroidRuntime(853):  at dalvik.system.NativeStart.main(Native Method)
06-26 17:29:27.171: E/AndroidRuntime(853): Caused by: java.lang.NullPointerException
06-26 17:29:27.171: E/AndroidRuntime(853):  at android.content.ContextWrapper.getApplicationContext(ContextWrapper.java:100)
06-26 17:29:27.171: E/AndroidRuntime(853):  at com.sai.samples.views.GalleryView.<init>(GalleryView.java:24)
06-26 17:29:27.171: E/AndroidRuntime(853):  at java.lang.Class.newInstanceImpl(Native Method)
06-26 17:29:27.171: E/AndroidRuntime(853):  at java.lang.Class.newInstance(Class.java:1409)
06-26 17:29:27.171: E/AndroidRuntime(853):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
06-26 17:29:27.171: E/AndroidRuntime(853):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
06-26 17:29:27.171: E/AndroidRuntime(853):  ... 11 more 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:08:50.440

`getApplicationContext()`应该叫里面`onCreate()`。我认为在创建活动之前调用它是无效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:14:51.077

这条线导致**NPE**

```
ga.setAdapter(new ImageAdapter(context)); 
```

因为您的**上下文**是`null`，因为您在活动之外初始化它`onCreate()`

实际上，

这些是您的死代码，（您无法在活动方法之外或不参考它的情况下获取应用程序上下文）

```
public Context context=getApplicationContext();
Bitmap icon1 = BitmapFactory.decodeResource(context.getResources(),
        R.drawable.antartica1);
Drawable d1 =new BitmapDrawable(context.getResources(),icon1);
Bitmap icon2 = BitmapFactory.decodeResource(context.getResources(),
        R.drawable.antartica2);
Drawable d2 =new BitmapDrawable(context.getResources(),icon2);
Bitmap icon3 = BitmapFactory.decodeResource(context.getResources(),
        R.drawable.antartica3);
Drawable d3 =new BitmapDrawable(context.getResources(),icon3);
Bitmap icon4 = BitmapFactory.decodeResource(context.getResources(),
        R.drawable.antartica4);
Drawable d4 =new BitmapDrawable(context.getResources(),icon4);
Bitmap icon5 = BitmapFactory.decodeResource(context.getResources(),
        R.drawable.antartica5);
Drawable d5 =new BitmapDrawable(context.getResources(),icon5); 
```

您不能在 onCreate() 或任何其他 Activity 方法之外执行此操作。

所以把你的这些代码放在活动的 onCreate() 方法中。

像，

```
public Context context;
Bitmap icon1, icon2, icon3, icon4, icon5;
Drawable d1, d2, d3, d4, d5; 
public Map< Integer,Drawable> dayMap;
ImageView imageView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main_gallery);
 context=getApplicationContext();
 icon1 = BitmapFactory.decodeResource(context.getResources(),
            R.drawable.antartica1);
 d1 =new BitmapDrawable(context.getResources(),icon1);
 icon2 = BitmapFactory.decodeResource(context.getResources(),
            R.drawable.antartica2);
 d2 =new BitmapDrawable(context.getResources(),icon2);
 icon3 = BitmapFactory.decodeResource(context.getResources(),
            R.drawable.antartica3);
 d3 =new BitmapDrawable(context.getResources(),icon3);
 icon4 = BitmapFactory.decodeResource(context.getResources(),
            R.drawable.antartica4);
 d4 =new BitmapDrawable(context.getResources(),icon4);
 icon5 = BitmapFactory.decodeResource(context.getResources(),
            R.drawable.antartica5);
 d5 =new BitmapDrawable(context.getResources(),icon5);
 .
 .
 . 
```

# c# - 更改测试运行程序工作目录

> ID：11206895
> 
> 赞同：6
> 
> 时间：2012-06-26T12:01:32.223
> 
> 标签：c#, .net, visual-studio-2010, unit-testing, resharper

使用作为 resharper 一部分的集成测试运行器运行/调试单元测试时，是否可以更改工作目录？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T12:17:54.993

原来你可以；

```
 Main Menu > Reshaper > Options > Tools > Unit Testing > Run Tests From 
```

当然，您还需要更改测试项目的输出目录。

问题在于它是全局变化而不是每个项目。我现在通过将被测系统的输出目录更改为单元测试输出目录来解决我的问题。

# facebook - 在我的网站上嵌入带有赞按钮的 Facebook 相册

> ID：11206909
> 
> 赞同：0
> 
> 时间：2012-06-26T12:02:38.807
> 
> 标签：facebook, facebook-like, facebook-php-sdk, facebook-page, facebook-comments

我可以做这样的事情吗？

我想将我粉丝页面中的所有照片嵌入我的网站。想要选择喜欢每张照片 - 必须。希望每张照片都有一个指向 Facebook 上真实 URL 的链接 - 必须。也想分享和评论，但不那么重要。

如果您知道我该怎么做，请告诉我。我看到了很多例子，但没有一个包含这些东西。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:10:29.633

获取一些照片很容易。获取所有照片几乎是不可能的。从对照片对象的[Graph API 调用](https://developers.facebook.com/docs/reference/api/photo/)开始。

要获取照片、创建和应用，请在您的站点上安装 PHP SDK。此代码应该可以帮助您入门。

```
$config = array(
   'appId'  => 'YOUR_APP_ID',
   'secret' => 'YOUR_APP_SECRET',
);
 if (!class_exists('Facebook')) 
    include_once 'PATH_TO_SDK/facebook.php';
 $fb_object = new Facebook($config);

 $photos = $fb_object->api('PAGE_ID_OR_USERNAME/photos', 'GET');
 printf('<pre>%s</pre>', print_r($photos, true)); 
```

您需要遍历这些结果才能获得超过 15 张照片。此 API 调用不会返回未标记为“公开”的照片。

要创建点赞或评论，您需要对用户进行身份验证，然后使用照片 ID 发布到 Graph API。

# linux - 软件桥连接问题上的结合

> ID：11206910
> 
> 赞同：2
> 
> 时间：2012-06-26T12:02:42.317
> 
> 标签：linux, networking, load-balancing

**你有什么：**

1.  绑定（bond0）接口（除 4 之外的所有模式），至少有 2 个 iface（比如 eth0 / eth1）连接在同一个外部交换机上
2.  bond0 接口加入了软件桥 (br0)
3.  虚拟机 (vm0)（例如 LibVirt::LXC）在 br0 上有一个接口

**你得到什么：**

1.  vm0 无法通过 bond0 over br0 连接到（大多数）IP 地址
2.  系统日志中的“bond0：接收到的以自己的地址作为源地址的数据包”

**为什么你会得到这个：**

当 vm0 想要联系外部 IP 地址时，它会发送一个 ARP 请求。这个带有 vm0 源 mac 的 L2 广播将通过（取决于绑定模式）例如 eth0，但通过外部交换机，通过 eth1 重新进入，从而通过bond0。因此，交换机 br0 将获知连接到bond0 的端口上的vm0 的mac 地址。因此，vm0 永远不会收到 ARP 回复。

**你能做些什么来解决：**

除了分享信息之外，我发布此内容的原因是我无法找到一个足够好的解决方案。我确实找到的是：

1.  在 vm0 上设置静态 ARP 条目
2.  使用 bond0 mode=4 但你的外部交换机必须支持这个
3.  将您的外部 siwtch 配置为在 eth0/eth1 上使用专用 VLAN，但仅适用于某些用例并增加了复杂性
4.  将两个物理接口添加到启用了生成树的网桥，而不是使用绑定驱动程序
5.  在 br0 的正确端口上静态配置 vm0 的 MAC 在 Linux 上不是一个选项（尽管适用于 OpenBSD）

我真的希望在这里有一个更优雅的解决方案......有人吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T09:09:06.743

我有同样的问题，我想出了同样的分析。我发现的唯一非侵入性/可扩展解决方案是使用主动/备份绑定（模式 1）。权衡是您松散了聚合。

IMO 最好的解决方案是使用 802.3ad，但我不能总是使用它，因为我的大多数交换机都受限于 6 个端口通道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-16T12:24:03.760

在桥接器中尝试这些选项：

```
brigde_fd 0
bridge_stp off # switch on with more system like this
bridge_maxage 0
bridge_ageing 0
bridge_maxwait 0 
```

取自这个线程： [kvm bridge也在proxmox中](http://ubuntuforums.org/showthread.php?t=1565074)

# jquery - jquery ui滑块显示值

> ID：11206912
> 
> 赞同：11
> 
> 时间：2012-06-26T12:02:52.313
> 
> 标签：jquery, jquery-ui, uislider

我有一个值为 1 - 5 的滑块。它更新了 ID 为“天”的隐藏输入。

```
$(function() {
    $("#slider").slider({
        value: 3,
        min: 1,
        max: 5,
        step: 1,
        slide: function(event, ui) {
            $("#days").val(ui.value);
        }
    });
    $("#days").val($("#slider").slider("value"));
});​ 
```

我想给滑块添加标签

所以在位置 1 会说 1 小时，2 会说 12 小时，3 会说 1 天，4 = 3 天和 5 = 1 周。

但我想将天数保持为 1 -5

这怎么可能？

编辑

想复制这个 ![滑块示例](../Images/155e2703e5c134b6cb2aa2aa921caf12.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-26T12:45:33.077

只需安排您的标签容器（例如，我添加了一个`div`），当您滑动时，更新它。

现场版：http: [//jsfiddle.net/8ek4a/5/](http://jsfiddle.net/8ek4a/5/)

代码 ：

```
$(function() {
   var labelArr = new Array("", "1 hour", "12 hours", "1 day", "3 day", "1 week");
   $( "#slider" ).slider({
       value:3,
       min: 1,
       max: 5,
       step: 1,
       slide: function( event, ui ) {
          $( "#days" ).val( ui.value );
          $("#label").html(labelArr[ui.value]);
       }
   });
   $( "#days" ).val($( "#slider" ).slider( "value" ) );
   $("#label").html(labelArr[$( "#slider" ).slider( "value" )]);
});​ 
```

**更新：** 现在我想出了这个解决方案来实现指标。见[http://jsfiddle.net/8ek4a/6/](http://jsfiddle.net/8ek4a/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-05T16:10:37.973

你可以试试这段代码

```
 $(function() {
$("#slider-range").slider({
  range: true,
  min: 12,
  max: 500,
  values: [ 75, 300 ],
  slide: function( event, ui ) {
    $( "#amount" ).val( "$" + ui.values[ 0 ] + " - $" + ui.values[ 1 ] );
  }
});
$( "#amount" ).val( "$" + $( "#slider-range" ).slider( "values", 0 ) + "- $" + $( "#slider-range" ).slider( "values", 1 ) );
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-25T03:53:31.867

现在我们可以使用这个插件来显示值

```
$(".slider").slider().slider("pips", {
        first: "pip",
        last: "pip"
    }).slider("float");
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<link href="https://code.jquery.com/ui/1.10.4/themes/flick/jquery-ui.css" rel="stylesheet"/>
<link href="https://raw.githubusercontent.com/simeydotme/jQuery-ui-Slider-Pips/master/dist/jquery-ui-slider-pips.min.css" rel="stylesheet"/>
<script src="https://code.jquery.com/ui/1.11.1/jquery-ui.js"></script>
<script src="https://raw.githubusercontent.com/simeydotme/jQuery-ui-Slider-Pips/master/dist/jquery-ui-slider-pips.js"></script>

<div class="slider"></div>
```

[小提琴](https://jsfiddle.net/hdukc2o9/)

# string - 如何在 Lua 中找到由关键字内的字母组成的单词？

> ID：11206914
> 
> 赞同：1
> 
> 时间：2012-06-26T12:03:03.703
> 
> 标签：string, search, lua

例如，我有一个关键字“abandoned”，我想从我存储这些单词的数组中找到包含该关键字的字母的单词，例如“done”、“abandon”、band”。我该如何搜索呢？

我尝试编写此代码但无法正常工作。我写了一个函数，它接受关键字和单词。然后我把关键字的字母放到keywordletters数组中，把单词的字母放到wordletters数组中。

然后我写了一个循环来匹配字母。如果 wordletters 数组与 keywordletters 数组的字母匹配，那么我将当前 wordletters 元素分配为 nil，然后我将 keywordletters 元素设为 nil。因为我们不能第二次使用它。

在所有循环之后，我检查了 wordletters 数组。如果它有一个不是 nil 的元素，那么我返回 false。但是，它没有按我想要的方式工作。你能帮我吗？

编辑：我解决了我的问题并相应地编辑了代码。

这是我的代码：

```
 function consistLetters(keyword,word)

keywordletters={ }
    wordletters= { }
local found=false
findLetters(keyword,keywordletters)
findLetters(word,wordletters)

for i=1, #wordletters,1 do
    for j=1, #keywordletters,1 do
        if(keywordletters[j]~="") then
            if(wordletters[i]==keywordletters[j]) then
                keywordletters[j]="" 
                found=true;
                break
            end
         end
    end
    if found~=true then
        return false
    end
   found=false; 
end     

  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:52:03.437

> 例如，我有一个关键字“abandoned”，我想从我存储这些单词的数组中找到包含该关键字的字母的单词，例如“done”、“abandon”、band”。我该如何搜索呢？

您可以简单地将关键字用作正则表达式（在 Lua 中也称为“模式”），将其字母作为一个集合，例如`('^[%s]+$'):format('abandoned'):match('done')`.

```
local words = {'done','abandon','band','bane','dane','danger','rand','bade','rand'}
local keyword = 'abandoned'

-- convert keyword to a pattern and match it against each word
local pattern = string.format('^[%s]+$', keyword)
for i,word in ipairs(words) do
    local matches = word:match(pattern)
    print(word, matches and 'matches' or 'does not match')
end 
```

输出：

```
done    matches
abandon matches
band    matches
bane    matches
dane    matches
danger  does not match
rand    does not match
bade    matches
rand    does not match 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:14:11.067

尝试这个：

```
W={"done", "abandon", "band"}
for k,w in pairs(W) do
    W[w]=true
end

function findwords(s)
    for i=1,#s do
        for j=i+1,#s do
            local w=s:sub(i,j)
            if W[w] then print(w) end
        end
    end
end

findwords("abandoned") 
```

如果您没有单词数组，则可以加载字典：

```
for w in io.lines("/usr/share/dict/words") do
    W[w]=true
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T12:14:47.960

在你的数组上运行循环并使用它`string.find`来检查这个长词。

```
for idx = 1, #stored_words do
   local word = stored_words[idx]
   if string.find(long_word, word, 1, true) then
      print(word .. " matches part of " .. long_word)
   end
end 
```

# sql - ORACLE SQL Developer - 查看 UPDATE 语句的确切结果？

> ID：11206920
> 
> 赞同：1
> 
> 时间：2012-06-26T12:03:31.567
> 
> 标签：sql, oracle-sqldeveloper

有没有办法在 SQL Developer 中查看执行更新语句的确切结果，而不是只更新行数？当然是在提交声明之前。我想看看对受语句影响的行进行了哪些更改以及哪些行受到了影响，但我找不到办法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:23:56.743

我不认为有办法得到你想要的，即查看更新语句的确切结果。

在更新或删除语句的 WHERE 子句中运行具有相同条件的选择查询以在运行任何重要的更新或删除语句之前查看将受到影响的记录几乎总是一个好主意。

您还可以使用 SQL History 选项卡（查看（在菜单栏中）-> SQL History 或按 F8）查看过去执行的所有 SQL。这适用于 Oracle SQL Developer 版本 3.1.xx

# php - websocketpp 服务器的主机地址

> ID：11206924
> 
> 赞同：1
> 
> 时间：2012-06-26T12:03:47.103
> 
> 标签：php, c++, websocket

我用 websocketpp (C++) 和 PHP 中的 websocket 客户端制作了一个 websocket 服务器。当我在本地机器上测试它时，它可以工作：客户端可以连接到服务器，并且它们可以互相发送一些数据。

然后我将服务器脚本放在我的服务器上并在那里编译它。编译后它正在运行并“工作”：服务器也是另一个服务器的客户端，它们连接并传输数据。但是，我的 PHP 客户端无法连接到 C++ websocket 服务器。我实际上不知道要使用哪个主机 URL。我试过这些：

```
ws://www.url.nl:port/folder/program-name
ws://www.url.nl:port/
ws://www.url.nl:port/program-name 
```

如何引用我的服务器？

我希望我的问题很清楚，但如果需要，请随时要求澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:55:38.900

那么你的网址应该是`ws://www.url.nl:port/`

确保您的服务器/网络上没有防火墙阻止您的请求。你可以通过运行来做到这一点`telnet www.url.nl port`。如果您有权访问 netcat，则使用`nc -v www.url.nl port`这将为您提供有关连接状态的更多详细信息。

如果您有任何错误消息，这将非常有帮助。;-)

**编辑**运行服务：

确保您的服务正在运行并侦听正确的网络接口和端口。

`netstat -tulpen`在 linux 或`netstat -ano`windows 上使用

**编辑**检查您的防火墙规则： `iptables -L`

# android - 如何在表格布局中加载大量数据

> ID：11206926
> 
> 赞同：0
> 
> 时间：2012-06-26T12:04:01.067
> 
> 标签：android

我是 android 新手，我正在尝试在 tablelayout 中加载包含图像和文本并从服务器获取的大量数据。有人可以建议我应该怎么做。因为一次加载所有行可能会导致应用程序崩溃。请帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:05:42.033

Bestet 是带有自定义适配器的 ListView。

您可以阅读有关[ListView 和 ListViewActivity](http://www.vogella.com/articles/AndroidListView/article.html)以及[listview 的自定义适配器的更多信息](https://stackoverflow.com/search?q=android%20custom%20listview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:11:29.443

您可以做的是使用[`ListView`](http://developer.android.com/reference/android/widget/ListView.html)or [`GridView`](http://developer.android.com/guide/topics/ui/layout/gridview.html)with custom 适配器。有关更多信息，请阅读这篇[文章](http://www.vogella.com/articles/AndroidListView/article.html)，它将对您有所帮助，现在当您遇到其他问题时，请创建这些内容发布一个新问题

# xcode4.2 - 将标签输出显示为十进制

> ID：11206928
> 
> 赞同：0
> 
> 时间：2012-06-26T12:04:11.597
> 
> 标签：xcode4.2, decimal

我目前有 2 个文本字段，用户在其中输入完整的数字，然后将它们相乘并除以 100 以获得所需的数字并显示在标签中，即 2400x1200/100=288。我的问题是我需要将结果数字显示为“2.88”而不是“288”我怎样才能做到这一点？

我的代码如下

```
- (IBAction)myTextField:(id)sender {
}

- (IBAction)mySecondTextField:(id)sender {
}

- (IBAction)calculate {
int num1 = self.myTextField.text.intValue;
int num2 = self.mySecondTextField.text.intValue;
self.myLabel.text = [NSString stringWithFormat:@"%.2d m2", num1 * num2 / 10000];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:06:14.170

利用 -

```
self.myLabel.text = [NSString stringWithFormat:@"%.2f", num1 * num2 / 10000.0]; 
```

而不是 10000，您需要使用 10000.0。并且只有 %0.2f 作为格式就足够了。

# jquery - 在 jQuery 中的文本的一半处添加换行符

> ID：11206940
> 
> 赞同：-2
> 
> 时间：2012-06-26T12:05:13.720
> 
> 标签：jquery

我想`<br/>`在我拥有的每个文本块的一半添加一个换行符。这意味着如果我有这样的推文：“谷歌科学家发现机器学习的证据”，它会是这样的：

`"Google scientists find evidence < br/> of machine learning"`

如何计算字符串中的单词数，将此数字除以 2 并在 jQuery 中添加一个中断？

谢谢

一个例子 ：

```
<span class="tweet-text">Nara Wants To Build A Better Recommendation Platform, Starts With Restaurants And A $4 Million Series...</span> 
```

需要成为

```
<span class="tweet-text">Nara Wants To Build A Better Recommendation < br/> Platform, Starts With Restaurants And A $4 Million Series...</span> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T12:11:58.413

试试这个 ：

```
var words = "Google scientists find evidence of machine learning";
var arrofwords = words.split(" ");
var middle = arrofwords.length / 2;
arrofwords.splice(middle,0,"<br/>");
var output = arrofwords.join(" "); 
```

[工作演示](http://jsfiddle.net/XHL7W/)

它使用空格分割句子，`<br/>`在中间单词之后插入 a 并再次加入......

（感谢[@Felix Kling](https://stackoverflow.com/users/218196/felix-kling)的评论建议）

尽管这有一些问题 - 它没有把它放在`<br/>`你想要的地方......并且对于长句来说不是最有效的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T12:08:17.887

我建议计算字符串中的字符数量，找到最接近 50% 点的空间并在那里拆分字符串。然后只需在插入中断的情况下渲染字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T12:09:46.010

```
function wordwrap( str, int_width, str_break, cut ) {   // Wraps a string to a given number of characters
    // 
    // +   original by: Jonas Raoni Soares Silva (http://www.jsfromhell.com)
    // +   improved by: Nick Callen

    var i, j, s, r = str.split("\n");
    if(int_width > 0) for(i in r){
        for(s = r[i], r[i] = ""; s.length > int_width;
            j = cut ? int_width : (j = s.substr(0, int_width).match(/\S*$/)).input.length - j[0].length || int_width,
            r[i] += s.substr(0, j) + ((s = s.substr(j)).length ? str_break : "")
        );
        r[i] += s;
    }
    return r.join("\n");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-08T18:55:59.003

当容器小于文本宽度时，此插件会自动将您的文本行很好地分解为 2：

[https://github.com/SumoSoft/PrettyBreak](https://github.com/SumoSoft/PrettyBreak)

# scala - 如何在 JavaFX WebView 中隐藏滚动条

> ID：11206942
> 
> 赞同：4
> 
> 时间：2012-06-26T12:05:22.943
> 
> 标签：scala, webview, hide, javafx, scrollbars

我正在尝试删除 javafx webview 中的滚动条。在论坛上搜索，建议是使它们不可见，如下所示：

```
browser.getChildrenUnmodifiable().addListener(new ListChangeListener<Node>() {
    @Override public void onChanged(Change<? extends Node> change) {
        Set<Node> deadSeaScrolls = browser.lookupAll(".scroll-bar");
        for (Node scroll : deadSeaScrolls) {
            scroll.setVisible(false);
        }
    }
}) 
```

但是，我收到以下错误：

“特征 ListChangeListener 是抽象的；无法实例化”

我可以理解为什么它会失败，但话又说回来，为什么人们会成功使用此代码？我正在使用 Eclipse，代码被 Scala 代码包围。

谢谢！小号

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T00:47:51.883

我编写了您所指的滚动条隐藏代码并将[其发布到论坛](https://forums.oracle.com/forums/thread.jspa?threadID=2321740)。

我使用 WinXPsp3、JavaFX 2.2b13、JDK7u6b14ea 再次尝试了它，它仍然对我有用。

我从未尝试从 Scala 访问代码，因此您可能遇到了一些 Java<->Scala 互操作性问题。Java 没有特征，因此您收到的错误将与 Scala 相关。我在你的问题中添加了一个 Scala 标签，所以也许有 Scala 专业知识的人可以提供帮助。

这是我用来重新检查功能的简短、可编译的测试应用程序。

```
import java.util.Set;
import javafx.application.Application;
import javafx.collections.ListChangeListener;
import javafx.collections.ListChangeListener.Change;
import javafx.scene.*;
import javafx.scene.web.WebView;
import javafx.stage.Stage;

// demos showing a webview which does not visibly display scrollbars.
public class NoScrollWebView extends Application {
  public static void main(String[] args) { launch(args); }
  @Override public void start(Stage primaryStage) {
    // show a doc in webview.
    final WebView webView = new WebView();
    webView.getEngine().load("http://docs.oracle.com/javafx/2/get_started/jfxpub-get_started.htm");
    primaryStage.setScene(new Scene(webView));
    primaryStage.show();

    // hide webview scrollbars whenever they appear.
    webView.getChildrenUnmodifiable().addListener(new ListChangeListener<Node>() {
      @Override public void onChanged(Change<? extends Node> change) {
        Set<Node> deadSeaScrolls = webView.lookupAll(".scroll-bar");
        for (Node scroll : deadSeaScrolls) {
          scroll.setVisible(false);
        }
      }
    });
  }
} 
```

这里最好的解决方案可能是提供一个新的 WebView 控件外观，其中没有任何控件 - 但在 WebView 控件开源之前，这可能会很困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T15:16:03.063

最简单的方法是在场景 CSS 文件中为 .scroll-bar 组件提供 NoOp 皮肤。

因此，在 CSS 中输入如下内容：

```
.scroll-bar {
    -fx-skin: "org.acme.visual.NoOpScrollbarSkin";
} 
```

和子类 SkinBase 类：

```
public class NoOpScrollbarSkin extends SkinBase<ScrollBar,ScrollBarBehavior> {
    public NoOpScrollbarSkin(ScrollBar scrollBar, ScrollBarBehavior scrollBarBehavior) {
        super(scrollBar, scrollBarBehavior);
    }

    public NoOpScrollbarSkin(ScrollBar scrollBar) {
        super(scrollBar, new ScrollBarBehavior(scrollBar));
    }
} 
```

编辑：这个例子似乎不适用于 WebView，因为它被转换为 com.sun.javafx.scene.control.skin.ScrollBarSkin。解决方案并不比以前检查节点更改更好，必须将 ScrollBarSkin 子类化以覆盖行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-06T12:29:15.630

设置 WebView 时添加以下代码：

```
engine.getLoadWorker().stateProperty().addListener(new ChangeListener<State>()
{

    public void changed(ObservableValue<? extends State> o, State old, final State state)
    {
        if (state == State.RUNNING || state == State.SUCCEEDED)
        {
            // System.out.println("Page: " + state + ": " + engine.getLocation());
            engine.executeScript("document.body.style.overflow = 'hidden';");
        }
    }

}); 
```

此代码将删除 WebView 中加载的任何网页的滚动条。

不幸的是，当页面加载时，可能会有一小段时间出现滚动条（如果网页在其标记中指定了滚动条）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-15T06:45:37.843

我可以通过将以下 css 块添加到我的全局 html 样式表来删除滚动条

```
body {
   overflow-x: hidden;
   overflow-y: hidden;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-29T22:03:44.810

在 JavaFx 中，将 newCascadeStyleSheet.css 放在资源文件夹中：

```
body {
    overflow-x: hidden;
    overflow-y: hidden;
} 
```

然后在 Webview ：

```
webView.getEngine().setUserStyleSheetLocation(getClass().getResource("/newCascadeStyleSheet.css").toExternalForm()); 
```

就这样。

# c++ - 嵌套typedef，出了什么问题

> ID：11206951
> 
> 赞同：0
> 
> 时间：2012-06-26T12:05:45.823
> 
> 标签：c++, templates, typedef

有人在这里看到错误吗？这有什么问题`typedef A<B<T>::c>`？？

```
template <const char *N> struct A { static const char *p; };
template <const char *N> const char *A<N>::p = N;
template <class T> struct B { static const char c[1]; typedef A<B<T>::c> C; };
template <class T> const char B<T>::c[1] = "";
template <class T> struct D { static const char c[1]; typedef A<c> C; };
template <class T> const char D<T>::c[1] = "";

template <int& I> struct E { static int *ip; };
template <int& I> int* E<I>::ip = &I;
template <class T> struct F { static int i; typedef E<F<T>::i> C; };
template <class T> int F<T>::i;
template <class T> struct G { static int i; typedef E<i> C; };
template <class T> int G<T>::i;

#define AS(X) if (!(X)) return 1;
int main()
{
  AS(B<int>::C::p == B<int>::c);
  AS(B<float>::C::p == B<float>::c);
  AS(B<float>::C::p != B<int>::c);
  AS(D<int>::C::p == D<int>::c);
  AS(D<float>::C::p == D<float>::c);
  AS(D<float>::C::p != D<int>::c);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:32:45.550

代码是正确的。您的编译器中有一个错误，您应该确保将此错误报告给开发人员。

# java-me - LWUIT 列表滚动问题

> ID：11206953
> 
> 赞同：3
> 
> 时间：2012-06-26T12:05:52.143
> 
> 标签：java-me, lwuit

我在 LWUIT 表格上有一个列表。我想在这个表单中添加背景图片。我尝试使用以下代码。图像在背景中设置，但列表在滚动时扭曲。

```
 categoryList=new List(categories.categoryVector);

    categoryList.setListCellRenderer(new CategoryListCellRenderer());

    Image img=parentMIDlet.constants.getBgImage();

    //img=img.scaled(this.getPreferredW(), this.getPreferredH());
    getStyle().setBackgroundType(Style.BACKGROUND_IMAGE_ALIGNED);

    getStyle().setBackgroundAlignment(Style.BACKGROUND_IMAGE_ALIGN_CENTER);

    getStyle().setBgImage(img);

    //getStyle().setBgPainter(new ImagePainter(img));

    addComponent(BorderLayout.CENTER,categoryList);

    categoryList.isScrollableY();

    categoryList.setFixedSelection(List.FIXED_NONE);

    categoryList.addActionListener(new CategoryListActionListener(mainMIDlet,categoryList)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T08:58:12.020

如果您使用的是 1.5 或更新版本，您应该使用：

```
getStyle().setBackgroundType(Style.BACKGROUND_IMAGE_ALIGNED_CENTER); 
```

确保选中和未选中样式的列表背景透明度都设置为 0。确保父表单设置为可滚动的 false。

# javascript - 将画布保存为 PNG 或 JPG

> ID：11206955
> 
> 赞同：19
> 
> 时间：2012-06-26T12:05:58.663
> 
> 标签：javascript, html, canvas, fabricjs

我想将画布另存为 PNG，而不是在新窗口中将其作为 base64 编码图像打开。

我使用了这段代码：

```
jQuery("#btnPreview").click(function(){
        if (!fabric.Canvas.supports('toDataURL')) {
            alert('Sorry, your browser is not supported.');
        }
        else {
            canvas.deactivateAll();
            canvas.forEachObject(function(o){
                if(o.get("title") == "||Watermark||"){
                    canvas.bringToFront(o);
                }
            });
            window.open(canvas.toDataURL('png'), "");
            canvas.forEachObject(function(o){
                if(o.get("title") == "||Watermark||"){
                    canvas.sendToBack(o);
                }
            });
            canvas.renderAll();
        }

    }); 
```

我想让按钮将图像保存为 PNG 或 JPG。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-02-14T01:52:47.843

我在我的 jquery 上使用它：

```
var image = canvas.toDataURL("image/png").replace("image/png", "image/octet-stream"); 

$('.save').attr({
    'download': 'YourProduct.png',  /// set filename
    'href'    : image              /// set data-uri
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T12:34:19.383

`canvas.toDataURL('png')`提供一个字符串 a la `data:image/png;base64,XYZ`。你可以把它塞进一个`<a href="%dataURI%" download>download</a>`（可能触发元素上的点击事件）。请参阅[在 HTML5 中下载资源：a[下载]](http://updates.html5rocks.com/2011/08/Downloading-resources-in-HTML5-a-download)

不过，目前仅受 Google Chrome 支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-12T05:48:57.957

在 script.js 文件中

```
 $(document).on('click','#btnPreview',function(){
     var img =$scope.canvas.toDataURL('image/png');
     $.ajax({
                type: "POST",   
                url: 'ajax.php', 
                data: {'img':img},
                success: function(data) { 
                    $("#loader_message").html("Image saved successfully"); 
                }
            });
  }); 
```

在 ajax.php

```
 $encodedData=explode(',', $_POST["img"]);
    $data = base64_decode($encodedData[1]);
    $urlUploadImages = $_SERVER['DOCUMENT_ROOT'].$projName.'/images/canvas/';
    $nameImage = "test.png";
    $img = imagecreatefromstring($data);
     if($img) {
        imagepng($img, $urlUploadImages.$nameImage, 0);
        imagedestroy($img); 
        echo "OK";
    }
    else {
        echo 'ERROR';
    } 
```

# google-app-engine - 如何在 Google App Engine 中查找来自 cron 作业的请求？

> ID：11206956
> 
> 赞同：2
> 
> 时间：2012-06-26T12:06:04.623
> 
> 标签：google-app-engine, servlets, cron

我有一个在 GAE 上运行的 servlet，我有一个 cron 作业，它偶尔会访问这个 servlet。有没有办法区分来​​自外部的请求和来自 cron 作业的请求，以便我可以根据请求的来源执行不同的操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T12:16:20.237

当请求来自 Cron 服务时，它有一个特殊的[HTTP 标头](https://developers.google.com/appengine/docs/java/config/cron#Securing_URLs_for_Cron)：

```
X-AppEngine-Cron: true 
```

# c# - 无法将类型 IEnumerable 转换为 List

> ID：11206957
> 
> 赞同：12
> 
> 时间：2012-06-26T12:06:07.447
> 
> 标签：c#

几年来我一直在使用 C# 和 Unity3d，但我刚刚开始使用 .NET 编程。我得到错误：

无法将类型“ `System.Collections.Generic.IEnumerable<URL>`”隐式转换为“ `System.Collections.Generic.List<URL>`”。存在显式转换（您是否缺少演员表？）

这是我的代码：

```
namespace TestBrowserHistory
{
    public class Test1
    {
        public Test1()
        {

        }
          static void Main()
    {
        InternetExplorer myClass = new InternetExplorer();
        List<URL> calledList = myClass.GetHistory();
        Console.WriteLine("Hello!");
        Console.WriteLine(calledList[1]);
        Console.ReadLine();
    }
    }
}

public class InternetExplorer
{
    // List of URL objects
    public List<URL> URLs { get; set; }
    public IEnumerable<URL> GetHistory()
    {
        // Initiate main object
        UrlHistoryWrapperClass urlhistory = new UrlHistoryWrapperClass();

        // Enumerate URLs in History
        UrlHistoryWrapperClass.STATURLEnumerator enumerator =
                                           urlhistory.GetEnumerator();

        // Iterate through the enumeration
        while (enumerator.MoveNext())
        {
            // Obtain URL and Title
            string url = enumerator.Current.URL.Replace('\'', ' ');
            // In the title, eliminate single quotes to avoid confusion
            string title = string.IsNullOrEmpty(enumerator.Current.Title)
                      ? enumerator.Current.Title.Replace('\'', ' ') : "";

            // Create new entry
            URL U = new URL(url, title, "Internet Explorer");

            // Add entry to list
            URLs.Add(U);
        }

        // Optional
        enumerator.Reset();

        // Clear URL History
        urlhistory.ClearHistory();

        return URLs;
    }

} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-26T12:11:36.587

你得到那个错误是因为`myClass.GetHistory();`返回`IEnumerable<URL>`，这与`List<URL>`编译时不同，尽管它实际上是`List<URL>`在运行时。将方法签名更改为 return `List<URL>`，因为您已经这样做了

```
public List<URL> GetHistory() 
```

其他解决方法是将方法调用结果转换为`List<URL>`

```
List<URL> calledList = (List<URL>)myClass.GetHistory(); 
```

或从结果构造新列表

```
List<URL> calledList = new List<URL>(myClass.GetHistory()); 
```

如果您不需要 List 功能，您可以定义`calledList`为 IEnumerable

```
var calledList = myClass.GetHistory(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T12:13:09.480

List 是 IEnumerable，但反之则不然。

如果需要列表操作，则应更改方法以返回 IList<> 而不是 IEnumerable。或者，您应该将返回值分配给 IEnumerable 变量而不是 List。这将限制您（无需进一步操作）IEnumerable 方法（例如，您可以执行 foreach 并使用 .First 之类的 LINQ 方法，但您不能按特定位置引用）。这可能足以满足您最终的需要。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T12:08:50.600

您对`GetHistory`方法的定义返回一个 IEnumerable，并且您将其分配给 IList。要么改变定义，要么改变用法。

如果您不需要更改集合，我会将 GetHistory 的定义更改为 IEnumerable。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T12:08:53.000

这是错误

```
List<URL> calledList = myClass.GetHistory(); 
```

由于`GetHistory`方法返回`IEnumerable<URL>`

```
public IEnumerable<URL> GetHistory() 
```

编辑：

**解决方案**`GetHistory()`：只需将方法的返回值更改为`IList<T>`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-26T12:10:47.133

要使事情正常工作，您只需将 GetHistory() 方法的返回类型更改为`List<URL>`.

您可以将 List 类型转换为 IEnumerable，但反之则不行。编译器被告知 GetHistory 返回 IEnumerable，即使它*是*一个列表，它也不知道。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-26T12:18:37.217

代替其他人所说的，您可以简单地：

```
GetHistory();
List<URL> calledList = URLs; 
```

因为无论如何都会`GetHistory`修改`URLs`它的副作用，所以从它返回任何结果几乎没有目的。除此之外，您可能会考虑是否`GetHistory`需要*显式*调用 - 也许等效代码应该在`URLs`第一次调用 getter 时隐式执行？

另外，你为什么不使用`foreach`？

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-10-23T04:45:55.780

您可以使用 Linq lamda 提供的 tolist() 将 IEnumerable 转换为 List。

```
using System.Linq;

List<URL> calledList = myClass.GetHistory().ToList(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-26T12:17:56.827

只需添加

```
yield return U; 
```

while 块结束并删除

```
 return URLs; 
```

之后那个功能是这样的

```
public IEnumerable<URL> GetHistory()
{
    // Initiate main object
    UrlHistoryWrapperClass urlhistory = new UrlHistoryWrapperClass();

    // Enumerate URLs in History
    UrlHistoryWrapperClass.STATURLEnumerator enumerator =
                                       urlhistory.GetEnumerator();

    // Iterate through the enumeration
    while (enumerator.MoveNext())
    {
        // Obtain URL and Title
        string url = enumerator.Current.URL.Replace('\'', ' ');
        // In the title, eliminate single quotes to avoid confusion
        string title = string.IsNullOrEmpty(enumerator.Current.Title)
                  ? enumerator.Current.Title.Replace('\'', ' ') : "";

        // Create new entry
        URL U = new URL(url, title, "Internet Explorer");

        // Add entry to list
        URLs.Add(U);
        yield return U;
    }

    // Optional
    enumerator.Reset();

    // Clear URL History
    urlhistory.ClearHistory();

} 
```

# c# - 在流畅的 nHibernate 中将平面视图映射到类层次结构

> ID：11206964
> 
> 赞同：4
> 
> 时间：2012-06-26T12:06:26.387
> 
> 标签：c#, .net, fluent-nhibernate, fluent-nhibernate-mapping

我正在开发一个应用程序，它有一个使用比赛结果/时间等的模型。
我有一个看起来像这样的模型：

```
public class Competitor
{
    public virtual int ID { get; set; }
    public virtual string Name { get; set; }
    public virtual DateTime DateOfBirth { get; set; }
}

public class Event
{
    public virtual int ID { get; set; }
    public virtual string Name { get; set; }
    public virtual string Description { get; set; }
}

public class Result
{
    public virtual int ID { get; set; }
    public virtual decimal ResultTime { get; set; }
    public virtual Competitor Competitor { get; set; }
    public virtual Event Event { get; set; }
} 
```

在我的数据库中，我只能访问代表数据“平面”视图的视图。这看起来像：

**vResult**

ResultID
ResultTime
CompetitorID
CompetitorName
CompetitorDateOfBirth
EventID
EventName
EventDescription

所以，我试图避免有一个完全匹配上述“平面”模式的类（如果可能的话）

是否可以用 Fluent nHibernate 映射它？

**编辑**
- 值得一提的是，数据访问将是**只读的**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T15:09:35.117

正如上面的评论所指出的，它确实`Component`解决了这个问题。

`ResultMap`在我的课堂上遵循以下内容：

```
Component(x => x.Event, m =>
            {
                m.Map(x => x.ID).Column("EventID");
                m.Map(x => x.Name).Column("EventName");
                m.Map(x => x.Description).Column("EventDescription");
            }); 
```

# javascript - 在javascript中跟踪URL的重定向路径

> ID：11206967
> 
> 赞同：3
> 
> 时间：2012-06-26T12:06:28.167
> 
> 标签：javascript, redirect, firefox-addon

我正在尝试在浏览器中查找请求的 url 的重定向次数，如果可能的话，我想通过 javascript 跟踪该 URL 的重定向路径。

例如，如果我在浏览器中请求“A”。假设重定向流程为 A->B->C->D。意味着，它被重定向到'D'。在这种情况下，我需要获得三个 301 重定向状态代码和一个 200 ok 状态代码。

我在我的 addon.js 中尝试了以下方法（并为 firefox 浏览器制作了一个插件）。

```
var req = new XMLHttpRequest();
req.open('GET', document.location, false);
req.send(null);
var headers = req.getAllResponseHeaders().toLowerCase();
var StatusValue = req.status; 
```

它给出了 200 ok（我认为它是最终 url）。

是否可以通过 Javascript 获取 URL 的所有 301 重定向。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:18:10.350

[`nsIXMLHttpRequest`interface](http://hg.mozilla.org/mozilla-central/file/d254c07f3301/content/base/public/nsIXMLHttpRequest.idl#l103)有一个`channel`类型为 的成员（只能被扩展访问）[`nsIChannel`](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIChannel)。您可以将自己的回调分配给其`notificationCallbacks`属性并实现[`nsIChannelEventSync`接口](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIChannelEventSink)以接收重定向事件。这些方面的东西：

```
Components.utils.import("resource://gre/modules/XPCOMUtils.jsm");

var req = new XMLHttpRequest();
req.open('GET', document.location);

var oldNotifications = req.channel.notificationCallbacks;
var oldEventSink = null;
req.channel.notificationCallbacks =
{
  QueryInterface: XPCOMUtils.generateQI([
      Components.interfaces.nsIInterfaceRequestor,
      Components.interfaces.nsIChannelEventSink]),

  getInterface: function(iid)
  {
    // We are only interested in nsIChannelEventSink, return the old callbacks
    // for any other interface requests.
    if (iid.equals(Ci.nsIChannelEventSink))
    {
      try {
        oldEventSink = oldNotifications.QueryInterface(iid);
      } catch(e) {}
      return this;
    }

    if (oldNotifications)
      return oldNotifications.QueryInterface(iid);
    else
      throw Components.results.NS_ERROR_NO_INTERFACE;
  },

  asyncOnChannelRedirect: function(oldChannel, newChannel, flags, callback)
  {
    var type = null;
    if (flags & Components.interfaces.nsIChannelEventSink.REDIRECT_TEMPORARY)
      type = "temporary";
    else if (flags & Components.interfaces.nsIChannelEventSink.REDIRECT_PERMANENT)
      type = "permanent";
    else if (flags & Components.interfaces.nsIChannelEventSink.REDIRECT_INTERNAL)
      type = "internal";

    Components.utils.reportError("Redirect from " + oldChannel.URI.spec + " " +
                                 "to " + newChannel.URI.spec + " " +
                                 (type ? "(" + type + ")" : ""));

    if (oldEventSink)
      oldEventSink.asyncOnChannelRedirect(oldChannel, newChannel, flags, callback);
    else
      callback.onRedirectVerifyCallback(Cr.NS_OK);
  }
};

req.send(null); 
```

此代码确保在记录任何对`nsIChannelEventSync.asyncOnChannelRedirect`.

供参考：[nsIInterfaceRequestor](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIInterfaceRequestor)，[XPCOMUtils](https://developer.mozilla.org/en/JavaScript_code_modules/XPCOMUtils.jsm)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-01-19T10:11:05.747

thx，代码有效，但不如预期：`A->B->C->D (channel_1 -> channel_2 -> channel_3 -> channel_4).`

在我的情况下，它将记录一个重定向链，`A->B->C->D`如：

`A->B (channel_1 -> channel_2), than B->C (channel_1 -> channel_2), C->D (channel_1 -> channel_2);`哪里`channel_1 & channel_2`是随机哈希数。

所以我不能把链条链接在一起。这将是捕获事件链的策略（而页面重定向使用，元刷新，javascript，http ...）？

# c++ - QSortFilterProxyModel 和 columnCount

> ID：11206972
> 
> 赞同：2
> 
> 时间：2012-06-26T12:06:44.420
> 
> 标签：c++, model-view-controller, qt, proxy, qt4

我有 2 个模型：( `MyModel` ，`inherits QAbstractItemModel`它的树) 和`MyProxyModel`( `inherits QSortFilterProxyModel`)。

MyModel 的列数为 1，MyModel 中的项目包含应使用 MyProxyModel 在 QTableView 中显示的信息。我将 MyProxyModel 与`MyProxyModel::columnCount() == 5`.

我重载了函数`MyProxyModel::data()`。但表格视图仅显示来自第 1 列（`MyModel::columnCount`）的数据。

调试后我发现`MyProxyModel::data()`它只获取索引`column < MyModel::columnCount()`（似乎它使用`MyModel::columnCount()`并忽略`MyProxyModel::columnCount()`）。

在表视图标题部分计数等于`MyProxyModel::columnCount()`（没关系；））。

如何在单元格中显示信息`column > MyModel::columnCount()`？

**我的模型.cpp：**

```
int MyModel::columnCount(const QModelIndex& parent) const
{
    return 1;
} 
```

**MyProxyModel.cpp：**

```
int MyProxyModel::columnCount(const QModelIndex& parent) const
{
    return 5;
}

QVariant MyProxyModel::data(const QModelIndex& index, int role) const
{
    const int  r = index.row(),
                  c = index.column();
    QModelIndex itemIndex = itemIndex = this->index(r, 0, index.parent());
    itemIndex = mapToSource(itemIndex);
    MyModel model = dynamic_cast<ItemsModel*>(sourceModel());
    Item* item = model->getItem(itemIndex);
    if(role == Qt::DisplayRole)
    {
          if(c == 0)
          {
                return model->data(itemIndex, role);
          }
          return item->infoForColumn(c);
    }
    return QSortFilterProxyModel::data(index, role)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:39:00.010

正如 Krzysztof Ciebiera 所说，用不多的话来说：你的`data`和`columnCount`方法永远不会被调用，因为它们没有正确声明。您应该实现的虚拟方法具有签名

```
int columnCount(const QModelIndex&) const;
QVariant data(const QModelIndex&, int) const; 
```

虽然您的方法具有不同的签名

```
int columnCount(QModelIndex&) const;
QVariant data(QModelIndex&, int); 
```

因此他们不会被调用。请注意，您的方法错误地期望对模型索引进行非常量引用。您的`data()`方法还需要非常量对象实例。

# jquery - 选择下拉选项时跳转到相关部分

> ID：11206980
> 
> 赞同：1
> 
> 时间：2012-06-26T12:07:25.607
> 
> 标签：jquery, css

我想知道我是否可以得到一些帮助。我想要实现的是这个。

一旦从一个选项中选中，页面应该跳转到相应的 div。我可以发出警报以确保选择了正确的 div，但我不知道如何使页面跳转到相关部分

```
<div class="nav">
    <div class="top-nav">           
        <form action="#">
            <select>
                <option value="ten">10</option>
                <option value="twenty">20</option>
                <option value="thirty">30</option>
            </select>   
        </form>     
    </div>
</div>

<div class="area">          
    <div id="ten">Alot of content goes in here</div>
    <div id="twenty">Alot of content goes in here</div>
    <div id="thirty">Alot of content goes in here</div>
</div>

$('.top-nav').children().children('select').bind('change', function () {        
    alert($('#' + $(this).val()).html()); 
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:16:43.170

**demo**会有细微差别，看这里：http: [//jsfiddle.net/byRRY/5/](http://jsfiddle.net/byRRY/5/)

演示中的行为选择值，您将看到偏移量将转到正确的 div，请随时删除警报。

这应该有帮助，

**代码**

```
$('.top-nav').children().children('select').bind('change', function () {  
  $("html, body").animate({scrollTop: $('#' + $(this).val()).offset().top}, "slow");

    alert($('#' + $(this).val()).html()); 
}); 
​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T12:12:28.877

使用滚动功能
，如`$('#mydiv').scrollTo('#somethingelse');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T12:17:11.990

JQuery 的 scrollTo 插件可以通过许多有趣的选项来实现这一点。

```
$(document).ready(function(){
    $target = "#myDiv";

    //target, speed, easing
    $.scrollTo($target, 800, {easing:'easeInOutQuint'});
}); 
```

[插件](http://flesler.blogspot.co.uk/2007/10/jqueryscrollto.html)

# mysql - mysql db结构以获得更好的性能

> ID：11206981
> 
> 赞同：0
> 
> 时间：2012-06-26T12:07:30.177
> 
> 标签：mysql

我不是专业人士，但我正在玩弄 wordpress，试图按照我希望它的工作方式对其进行自定义......

我有必要向单个帖子添加额外的数据，特别是餐厅菜单，每个帖子都会在侧边栏中显示独特的菜单。

单个帖子是 wp_posts 表中的单行。

![wp_posts](../Images/9a551fea9195fe86f6fafcecb5b54164.png)

我正在使用 wp metabox 功能添加其他信息，该功能有自己的名为 wp_postmeta 的表。

该表与 wp_posts 不同，因为它可以包含单个帖子的多行元信息。

![wp_postmeta](../Images/b47ad27e5c720af0814dae00fe81c396.png)

我的问题：

这个实现很慢吗？如果db增长会引起问题吗？为什么 wp guyz 会以这种方式实现呢？每个帖子有一个元列和多行不是更明智吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:22:46.170

我看到你有“price_list_heading”，`"price_list_category","price_list_heading1", "price_list_category1","price_list_heading2", "price_list_category2","price_list_heading3" and "price_list_category3"`我不知道为什么，但我认为你不应该这样做，你需要创建一个带索引的关系表（我不知道 Wordpress 是否让你这样做）

它看起来像：这将取决于您的应用程序的基数

假设 1 个帖子元可以有多个类别，多个类别可以有一个帖子元（基数 N:M）

![在此处输入图像描述](../Images/7bf87e6b72bc7c6849b898f260acca45.png)

现在如果一个帖子可以有多个类别，一个类别只能有一个帖子

![在此处输入图像描述](../Images/ae8fdc19774590b52ca334cb1ff07ea9.png)

其中 wp_postmeta_copy1 是来自 ws_postmeta 表（id​​）的 FK

请查看此文档：

*   [http://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model](http://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model)
*   [http://www.inf.unibz.it/~franconi/teaching/2000/ct481/er-modelling/](http://www.inf.unibz.it/~franconi/teaching/2000/ct481/er-modelling/)
*   [http://searchsqlserver.techtarget.com/definition/entity-relationship-model](http://searchsqlserver.techtarget.com/definition/entity-relationship-model)

# php - 从时间戳填充多维数组

> ID：11206984
> 
> 赞同：0
> 
> 时间：2012-06-26T12:07:34.270
> 
> 标签：php, mysql, arrays

我有一个 mysql 时间戳列表。我想制作一个 html 菜单，它的第一个 LI 有几年，嵌套 LI 有几个月。例如：

2012 -> 十二月、五月、四月。2011 年 -> 11 月，1 月。2010 -> 四月，三月，二月。

如您所见，我希望菜单是数年和数月内的数组，仅是我数据库中的数月（和数年）。

这肯定很简单，但我不知道如何执行此操作。我正在查询我所有的时间戳并循环它们，但是当我必须填充数组时，我无法管理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:30:15.077

你有没有尝试过这样的事情？

```
<?php
// this would've been pulled from mysql
$data = array(
    array('date' => "2010-11-12 12:34:56", 'some' => 'data'),
    array('date' => "2010-12-12 12:34:56", 'some' => 'data'),
    array('date' => "2010-12-13 12:34:56", 'some' => 'data'),
    array('date' => "2011-01-01 12:34:56", 'some' => 'data'),
);

$grouped = array();

foreach ($data as $row) {
    $year = substr($row['date'], 0, 4);
    $month = substr($row['date'], 6, 2);
    $grouped[$year][$month][] = $row;
}

var_dump($grouped); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T12:34:27.963

您想要的 SQL 可能是这样的：

```
SELECT YEAR(date) AS year, MONTH(date) AS month, COUNT(*) AS entries FROM my_table
GROUP BY year,month ORDER BY year ASC, month ASC; 
```

代码是：

```
$previous_year = null;
foreach ($result_rows as $row) {
    if ($previous_year == null || $row['year'] != $previous_year) {
        if ($previous_year != null) {
            echo '</ul>/li>';
        }
        echo '<li><span class="year">'.$row['year'].'</span><ul>';
        $previous_year = $row['year'];
    }
    echo '<li>'.$row['month'].' ('.$row['entries'].')</li>';
}
if ($previous_year != null) {
    echo '</ul></li>';
} 
```

编辑：

基于另一个答案的替代 PHP，这是更整洁的：

```
$grouped = array();
foreach ($result_rows as $row) {
    $grouped[$row['year']][$row['month']] = $row;
}

foreach ($grouped as $year => $months) {
    echo "<li>$year";
    echo "<ul>";
    foreach ($months as $month => $row) {
        echo "<li>$month (".$row['entries'].")</li>";
    }
    echo "</ul></li>";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T12:10:21.870

您必须使用[GROUP BY](http://dev.mysql.com/doc/refman/5.0/en/group-by-modifiers.html)对查询进行分组，并在 PHP 中使用循环来创建合适的结构。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T12:18:48.053

在轻微的peusdo代码中。

```
$r = query(SELECT * FROM TBL_WHATEVER ORDER BY TS ASC);
$last_year = null;

while($row as mysql_fetch_assoc($r)){
    $year = date('Y', $r['ts']);

   if($year != $last_year){
     echo $year;
     $last_year = $year;
   }else{
       $month = 1;
       while($month < 12){
           echo date('F', $r['ts']);
       }
    }

} 
```

类似这样的帖子有很多：

[PHP：循环遍历日期范围内的所有月份？](https://stackoverflow.com/questions/2155110/php-loop-thru-all-months-in-date-range)

# gwt - 通信客户端-服务器-客户端

> ID：11206985
> 
> 赞同：1
> 
> 时间：2012-06-26T12:07:34.483
> 
> 标签：gwt, smartgwt, gwt-rpc

我对客户端和服务器之间的通信有疑问。

我想创建一个可以执行以下操作的 GWT 应用程序：

客户端 A 向服务器触发一个事件，而服务器又向客户端 B 触发一个事件。这里客户端 B 必须能够一直监听该事件。

我想实时向连接的客户端 B 发送一些数据很少的事件。这可能吗？如果是的话，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T12:43:53.373

> 在这里，客户端 B 必须能够一直监听事件。

要让客户端等待数据，您可以使用 Comet [1]（长期 HTTP 请求）或 WebSockets [2]（如果目标 JS 运行时确实支持）。

[1]：[http ://code.google.com/p/gwt-comet/](http://code.google.com/p/gwt-comet/)

[2]：[http ://code.google.com/p/gwt-ws/](http://code.google.com/p/gwt-ws/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T12:10:31.190

[这是一个例子](https://developers.google.com/web-toolkit/doc/1.6/DevGuideServerCommunication)，当然它可以用于客户端和服务器之间的通信，您必须使用 Rpc（远程过程调用）。您可以通过 rpc 作为序列化对象发送和接收数据

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T12:55:20.310

只需将客户端（A）请求的结果存储在数据库中。并编写客户端代码以从数据库请求内容，在服务器中对其进行处理并将结果返回给客户端（在您的情况下为客户端 B）

# android - 导航箭头未显示在左侧的操作栏上，它充当后退 - android

> ID：11206987
> 
> 赞同：0
> 
> 时间：2012-06-26T12:07:37.603
> 
> 标签：android, android-actionbar, back-button

我在我的应用程序中使用操作栏。我在操作栏上添加后退按钮。在其点击返回功能被调用。但是通常显示在操作栏上的左箭头没有显示出来。

我正在尝试使用以下代码：

```
getActionBar().setDisplayOptions(ActionBar.DISPLAY_HOME_AS_UP, ActionBar.DISPLAY_HOME_AS_UP); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:35:39.830

使用此代码：

```
getActionBar().setDisplayHomeAsUpEnabled(true); 
```

如果您使用支持库来支持 Android pre-3.0，请使用：

```
getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

# android - 无法检索动态创建的 EditText 的值

> ID：11206996
> 
> 赞同：1
> 
> 时间：2012-06-26T12:08:13.670
> 
> 标签：android, android-edittext

嗨，伙计们，我从具有默认值的 JSON 动态创建了一些 EditText。

在向 EditTexts 输入一些值后，我使用根视图的**getChildAt()方法访问了它们。**使用EditText的**getText()方法时，它返回默认值，而不是更改后的值。**我什至无法通过代码设置 EditText 的文本。

这是我创建 EditText 的方法。

```
private static EditText createEditText(final Context context,
        Element element) {
    final EditText editText = new EditText(context);
    editText.setId(Integer.parseInt(element.getFieldID()));
    editText.setText(element.getCellValue());
    editText.setTag(element);
    editText.setOnEditorActionListener(new TextView.OnEditorActionListener() {

        public boolean onEditorAction(TextView v, int actionId,
                KeyEvent event) {
            if (event != null
                    && (event.getKeyCode() == KeyEvent.KEYCODE_ENTER)) {
                InputMethodManager inputMethodManager = (InputMethodManager) context
                        .getSystemService(Context.INPUT_METHOD_SERVICE);
                inputMethodManager.hideSoftInputFromWindow(
                        editText.getApplicationWindowToken(),
                        InputMethodManager.HIDE_NOT_ALWAYS);
            }
            return false;
        }
    });

    return editText;
} 
```

这就是我在更改文本后访问 EditTexts 的方式。

```
public static boolean updateElements(ScrollView rootView) {
    try {
        for (int i = 0; i < rootView.getChildCount(); i++) {
            View view = rootView.getChildAt(i);
            if (view.getClass() == LinearLayout.class) {
                LinearLayout layout = (LinearLayout) view;
                for (int x = 0; x < layout.getChildCount(); x++) {

                    View linearView = layout.getChildAt(x);

                    if (linearView.getClass() == EditText.class) {
                        EditText txtBox = (EditText) linearView;

                        txtBox.setText("TextBox " + x);

                        }
                    }
                }
            }
        }

        return true;

    } catch (Exception ex) {
        ex.printStackTrace();
        return false;
    }
} 
```

请告诉我我在这里做错了什么......谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:30:01.430

终于找到问题了！！！

我一直在**onCreate()**和**onResume()**方法中设置活动的根视图。传递给**updateElements(ScrollView rootView)**的视图是在**onCreate()**方法创建的视图；但显示的实际视图是**onResume()**创建的视图。

菜鸟失误！无论如何，感谢您的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:17:08.083

尝试改变

```
Object.getClass() == Class.class 
```

到

```
Object.getClass().equals(Class.class) 
```

# windows - 是否可以将 DLL 加载到地址空间而不是从文件系统文件中？

> ID：11206999
> 
> 赞同：3
> 
> 时间：2012-06-26T12:08:34.467
> 
> 标签：windows, dll, loadlibrary

我必须创建一个导出一些符号（函数）的包装 DLL。在其资源中，它包含另一个真正完成这项工作的**加密DLL。**

在包装器 DLL 初始化时，它会解密原始文件，将其保存在文件中，然后通过`LoadLibrary`. 但是我想避免将此 DLL 保存在文件中。

我知道这并不能保证防弹保护，实际上可以转储进程虚拟内存并在那里看到它。我也知道可以创建一个带有`FILE_FLAG_DELETE_ON_CLOSE`属性的文件，这样可以确保在进程终止后立即删除该文件。但我仍然想知道是否有“不是从文件”加载 DLL 的选项。

到目前为止，我想到了以下几点：

1.  分配具有充分保护的虚拟内存块（`PAGE_EXECUTE_READ`或`PAGE_EXECUTE_READWRITE`）。最好在映像首选基址。
2.  在那里提取/解密 DLL 映像。
3.  如果图像基地址不是其首选地址 - “手动”进行重定位。即 - 分析重定位表并就地修补图像。
4.  处理图像导入。加载其依赖 DLL 并填充符号地址。
5.  调用其初始化函数 ( `DllMain`)。

也就是说，我可以做装载机的工作。但不幸的是，在某些区域，通过上述技巧加载的 DLL 的行为会有所不同，因为从操作系统的角度来看，它不是正确加载的 DLL。这包括以下内容：

*   需要DLL “`DllMain`模块句柄”，这只是它的基地址。它可以在调用各种 API 函数时使用此句柄，例如`LoadResource`. 这些电话可能会失败。
*   异常处理会有问题。操作系统不会看到 DLL 的`SAFESEH`部分，因此不会调用其内部异常处理代码（它是 64 位 DLL，意味着异常处理`SAFESEH`是**强制性**的）。

这是我的问题：是否有 API 可以将 DLL 正确加载到进程地址空间而无需将其放在文件中？例如，它的替代变体`LoadLibrary`适用于文件映射而不是文件系统文件？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:14:04.900

是的，可以加载位于另一个图像资源中的 DLL 并在不需要文件的情况下执行它！看看[这篇文章](http://www.joachim-bauch.de)，这正是你想要的。有效，我试过了。