# StackOverflow 问答 000775000-000775999

# active-directory - 如何防止在 ADAM 中创建重复对象？

> ID：775000
> 
> 赞同：0
> 
> 时间：2009-04-21T22:52:19.550
> 
> 标签：active-directory, ldap, adam, adfs

我正在使用 ADAM 和 DSML 服务进行测试。我有两台 ADAM 服务器，一台是另一台的副本，它们是负载平衡的。如何保护 ADAM 目录中的重复对象创建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-23T09:59:27.817

在创建任何内容之前，请先查询您打算用作命名属性的名称，以查看它是否已在使用中。

我不确定 ADAM，但对于 Active Directory，虽然完整的 DN 当然必须是唯一的，但 sAMAccountName 在域中也必须是唯一的。

或者尝试，捕获错误并返回它。

# bios - 如何以编程方式启用 LAN 唤醒

> ID：775006
> 
> 赞同：2
> 
> 时间：2009-04-21T22:54:40.107
> 
> 标签：bios, wake-on-lan

有没有办法以编程方式进入 BIOS 并为那些支持它的机器打开 LAN 唤醒功能？

理想情况下，解决方案将是跨 BIOS，但也可以使用单独的解决方案来打击每个主要供应商。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T22:58:29.537

BIOS 配置是操作系统为避免病毒问题而有意限制的内容（当时有很多 BIOS 病毒！）。

您需要查看系统管理界面以查看是否普遍可用。您可能需要在 windows 中的 ring0 （或 linux 中的 root/kernel）中工作。此外，您可能需要学习如何直接访问硬件，学习并保存最常见的 BIOS 制造商和类型的数据库，即使那样也无法涵盖所有​​这些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-28T21:31:10.440

[SMBIOS](http://www.dmtf.org/standards/smbios/)可能有帮助？

我知道在我以前的工作中，我们有一个实用程序可以从常规的 windows 程序中*读取BIOS 一次。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-07-09T21:22:43.410

我想您会发现 LAN 唤醒是一个 CMOS 设置选项，因此无法通过与硬件无关的操作系统接口进行编程。

Dell Inc. 为客户提供 OpenManage 实用程序套件，用于远程操作其客户端机器上的设置设置。一些链接：

[戴尔 OpenManage](http://www.dell.com/content/topics/global.aspx/sitelets/solutions/management/openmanage?c=us&l=en&cs=555)
[维基百科文章](http://en.wikipedia.org/wiki/OpenManage)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-01-05T13:40:08.677

启用 LAN 唤醒有几个步骤。首先它必须在 BIOS 中启用，其次它必须在网卡本身上启用。

在 Windows 中，您可以在网络适配器的高级选项对话框下找到设置。对于 Linux，您可以使用`ethtool`命令。

用于`ethtool eth0`显示 eth0 接口的当前状态：

```
Settings for eth0:
        Wake-on: g 
```

用于`ethtool -s eth0 wol XYZ`设置选项，但请记住，并非所有卡都支持所有 WoL 方法，并且某些卡在重新启动时会记住设置，但其他卡不会（然后您需要将此命令添加到启动脚本中）。

```
wol p|u|m|b|a|g|s|d...
    设置 LAN 唤醒选项。并非所有设备都支持这一点。此选项的参数是一个字符串
    指定要启用哪些选项的字符。
    p 唤醒 phy 活动
    u 唤醒单播消息
    m 多播消息唤醒
    b 广播消息唤醒
    ARP 唤醒
    g 唤醒 MagicPacket(tm)
    s 为 MagicPacket(tm) 启用 SecureOn(tm) 密码
    d 禁用（什么都不唤醒）。此选项清除所有以前的选项。

```

# jquery - jquery隐藏预加载

> ID：775008
> 
> 赞同：0
> 
> 时间：2009-04-21T22:55:55.737
> 
> 标签：jquery, preload

这是我的页面[http://equipe94.com/2009e.html](http://equipe94.com/2009e.html)

有一些 tweek 附加到页面（滚动条和箭头）和一些定位

你有没有办法完全隐藏一切（只保留背景）..做这些事情，并显示完成的页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T23:08:16.940

为什么不直接将 css`display`属性设置为`none`，并在文档加载后用 JS 更改它？如果您在页面上使用[jQuery](http://www.jQuery.com)，它可能如下所示：

CSS：

```
#mydiv { display: none; } 
```

JavaScript：

```
$(document).ready(function() {
    $('#mydiv').show();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T23:18:33.310

为了补充 Calvin 的答案，可以通过添加此功能来预加载图像：

```
$.preloadImages = function()
{
  for(var i = 0; i<arguments.length; i++)
  {
    $("<img>").attr("src", arguments[i]);
  }
} 
```

然后告诉它你要加载哪些图像：

```
$.preloadImages("image1.gif", "/path/to/blah.png", "some/other.jpg"); 
```

出于礼貌，将该代码放在您要加载的内容之前。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T23:12:19.567

这类问题以前也有人问过。您所说的实际上不是“预加载”-它只是在页面完全加载之前阻碍用户查看页面。它不会使页面加载更快。

只需将整个页面放入容器中，然后使用 CSS 将容器的显示模式设置为`none`. `none`然后只需将容器的显示模式更改为文档准备好或加载最后一个图像后的任何其他内容：

```
var imgTotal = 10; // total number of images on your page
var imgCount = 0;

$("img").load(function(){
  imgCount++;
  if (imgCount == imgTotal)
    $("#container").show();
} 
```

但是，考虑到您的页面在我的浏览器上加载不到一秒钟，我真的看不出这有什么意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T23:31:45.493

它不完全是图像，而是改变问题的页面元素......

我有隐藏的 css 正文，我的 jquery 的最后一个参数是 css:visible

工作得很好.. 2 秒加载，每个人都出现了！

谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T23:53:25.410

我会使用准备好的 DOM 将其显示设置为无，然后在 $(window).load 上显示

否则，如果他们没有启用 JS，他们将永远看不到任何东西！

我注意到您的网站在没有 JS 的情况下仍然可以查看，干得好！

# windows - WaitForSingleObject 在文件句柄上？

> ID：775014
> 
> 赞同：17
> 
> 时间：2009-04-21T22:56:57.887
> 
> 标签：windows, msvcrt

当你调用`WaitForSingleObject()`你用`CreateFile()`or创建的句柄时会发生什么`_get_osfhandle()`？

由于不值得解释的原因，我想`WaitForSingleObject()`用来等待我创建的 HANDLE `_get_osfhandle(fd)`，其中`fd`来自定期调用`_open()`. 这可能吗？

我已经在实践中尝试过，并且在某些机器上它按预期工作（句柄始终处于信号状态，因为您可以从中读取更多数据），并且在某些机器上`WaitForSingleObject()`如果您允许它会无限期阻塞。

MSDN 页面`WaitForSingleObject()`说，它处理的唯一受支持的事情是“更改通知、控制台输入、事件、内存资源通知、互斥体、进程、信号量、线程和可等待计时器”。

此外，如果我使用`CreateFile()`而不是`_get_osfhandle()`CRT 文件描述符会有所不同吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-21T23:08:59.090

不要这样做。如您所见，它具有未定义的行为。

即使定义了行为，它也被定义为相对没有用处，除非您不喜欢编写额外的代码。它在该句柄上的任何异步 I/O 操作完成时发出信号，这并不概括为跟踪哪个 I/O 操作完成。

你为什么要等待文件句柄？显然，当您正在做的事情甚至没有得到足够好的支持而不会无限期地阻塞时，意图很重要。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-21T23:09:40.150

我找到了以下链接。在我看来，共识，不要这样做。

*   [异步 IO 浏览器](http://www.flounder.com/asynchexplorer.htm#Waiting%20on%20a%20file%20handle)

> 等待文件句柄
> 
> 在异步句柄上启动 I/O 操作时，句柄进入非信号状态。因此，当在 WaitForSingleObject 或 WaitForMultipleObjects 操作的上下文中使用时，文件句柄将在 I/O 操作完成时发出信号。但是，Microsoft 积极反对这种技术。如果存在多个挂起的 I/O 操作，它不会一概而论；如果任何 I/O 操作完成，句柄就会发出信号。因此，尽管这种技术是可行的，但它并不是最佳实践。

*   [蛋头咖啡厅](http://www.eggheadcafe.com/forumarchives/win32programmerkernel/Dec2005/post25117352.asp)：

> 在重叠模式下使用 ReadDirectoryChangesW。WaitForSingleObject 可以等待 OVERLAPPED 结构中的事件。
> 
> 如果您使用以下更改通知函数，您还可以使用 API WaitForSingleObject() 来等待文件更改：
> FindFirstChangeNotification()
> [http://msdn.microsoft.com/library/default.asp?url=/library/en-我们/fileio/fs/findfirstchangenotification.asp](http://msdn.microsoft.com/library/default.asp?url=/library/en-us/fileio/fs/findfirstchangenotification.asp) [http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dllproc/base/waitforsingleobject.asp](http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dllproc/base/waitforsingleobject.asp)
> 
> 关于 ReadDirectoryChangesW 的“邪恶”的有趣说明：http:
> [//blogs.msdn.com/ericgu/archive/2005/10/07/478396.aspx](http://blogs.msdn.com/ericgu/archive/2005/10/07/478396.aspx)

# asp.net - 请求的表单身份验证失败

> ID：775016
> 
> 赞同：1
> 
> 时间：2009-04-21T22:57:11.600
> 
> 标签：asp.net, webforms, forms-authentication

我有一个使用无 cookie 表单身份验证的 Web 应用程序。每天我的事件日志都有大量的 4005 错误代码（请求的表单身份验证失败）。我相信这是因为用户在登录时正在为页面添加书签，所以当他们重新访问 url 中的表单票证时，至少这是我可以在测试中触发的唯一场景。

我的问题是可以禁用此 4005 代码的日志记录吗？它填满了我的事件日志

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T23:01:22.307

不是你的问题的答案，我什至不熟悉 ASP。但是，如果就像 PHPSESSID 和 jsessionid 一样，这个“url 中的表单票证”实际上是一个会话 id，它也被添加到*匿名*访问者的 URL 中，那么搜索引擎是否也会导致这个错误？如果是这样：这不会破坏您的搜索分数吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T02:04:03.053

如果您可以使用 cookie，那么它是一个比无 cookie 模式更好的解决方案，因为您的用户将可以使用他们肯定希望能够做到的书签，并且您的错误日志不会充满错误。它也不太容易受到会话劫持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T23:27:44.240

您可以处理错误，使其不会出现在日志中

```
'in global.asax
Sub Application_Error(ByVal sender As Object, ByVal e As EventArgs)
     ' Code that runs when an unhandled error occurs
     Dim lastError As Exception = Server.GetLastError()
     ' Must be a better way, just can remember how, you will get the idea.
     If lastError.Message.Contains("Forms authentication failed for the request") Then
         'do nothing
         Server.ClearError()            
     End If
End Sub 
```

# asp.net - 选中复选框时禁用某些 ASP.Net 验证控件

> ID：775019
> 
> 赞同：10
> 
> 时间：2009-04-21T22:57:56.107
> 
> 标签：asp.net, validation

我正在使用老式的 ASP.NET 验证（呃）进行结帐过程。我有一个复选框-“我会用我的信用卡详细信息打电话”-。如果选中，我需要在客户端和回发上禁用信用卡号的必填字段验证器和 cc 验证器。

它是怎么做到的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-21T23:08:31.917

您可以禁用验证器**客户端**（在 javascript 中）：

```
function disable(validatorId)
{
   var validator = document.getElementById(validatorId);
   ValidatorEnable(validator, false);
} 
```

其中 validatorId 是要禁用的验证器的客户端 ID。有关完整示例，请参阅[此页面](http://www.willasrari.com/blog/use-client-side-javascript-to-disable-aspnet-validators/000289.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-21T23:00:43.820

您可以禁用验证器**服务器端**：

```
MyFieldValidator.Enabled = MyCheckBox.Checked

Page.Validate()
If Page.IsValid Then
   'stuff
end if 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T17:55:28.487

如果您要禁用服务器端，那么您可以这样做

```
button1.CausesValidation = False 
```

在您的 CheckChangedEvent 中，如果您有很多验证器并且需要全部禁用它们，这将更有帮助。

# assembly - 什么是好的或有趣的类汇编语言，但在更高的层次上？

> ID：775020
> 
> 赞同：5
> 
> 时间：2009-04-21T22:58:13.280
> 
> 标签：assembly

我一直在研究[L.in.oleum](http://www.anywherebb.com/linoleum.html)，并且对它的高级构造（循环、动态变量）与低级汇编能力（寄存器）的混合很感兴趣。

有没有像 Lino 这样的其他语言，它们融合了汇编程序的速度和提高生产力的特性？

编辑：我意识到这种听起来像广告。我真的对其他类似汇编程序的语言很感兴趣，Lino 是我碰巧知道的唯一一种。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-21T23:26:19.750

[C--](http://www.cminusminus.org/)是一种中间语言，主要由编译器生成，介于 C 和汇编程序之间

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-21T23:01:39.153

您可能想查看[LLVM](http://llvm.org/)。它的[伪汇编程序](http://llvm.org/docs/LangRef.html)可能与您的想法相似

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-09-16T15:00:07.650

FORTH - 不完全是汇编程序，但它被大量使用并且非常低级。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-21T23:02:54.143

您可以尝试直接使用[LLVM](http://llvm.org/docs/LangRef.html)。

由于已经有许多工具可以创建/转换它，因此您很有可能能够用它做出一些有用的东西（尽管没有 ide 支持）。

如果你被卡住了，只需用 C++ 编写你想要的，然后用 Clang 编译它，保持中间形式。

要快速了解您是否喜欢它，请尝试他们的[在线编译器](http://llvm.org/demo/index.cgi)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-21T23:09:24.800

[高层大会](http://webster.cs.ucr.edu/AsmTools/HLA/)也可能很有趣。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-21T23:21:08.233

汇编器中的 Win32：基本上是汇编器的 Windows 标头，带有一些不错的高级宏：

[http://www.masm32.com/](http://www.masm32.com/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-21T23:00:50.920

大多数接受内联汇编的 C 编译器。当然，组装优化的部分不是跨架构的，但我真的无法想象一种跨架构的汇编语言会如此有效。我会研究一下油毡，但是通过优化编译器和完全不同的平台，从 4 到数百个寄存器，我真的看不出它工作得很好。

另一种选择是 C#/Java 及其字节码。但我仍然会质疑手动优化在这些方面的用处。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-21T23:46:43.320

System z 具有[HLASM](http://en.wikipedia.org/wiki/HLASM)，我们将其用于相当多的开发。它添加了各种高级语言结构。除了 HLASM 将汇编提升为高级语言之外，我相信 IBM 有一个基于 PL/I 的内部产品，它使 C 向汇编降低了一点:-)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-22T00:38:53.337

我曾经使用过[PL/M](http://en.wikipedia.org/wiki/PL/M)，在我看来它只比装配高一级。它更像是一种宏语言，但具有一些更高级别的结构，例如循环等。这是一次有趣的经历。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-04-21T21:09:35.807

LLVM 是一个很好的答案。

其他一些有趣的语言是 JVM 字节码和 MSIL（.Net 平台字节码）。两者都提供基于堆栈的系统，这与 x86 汇编有很大不同。

# database - 如何将非官方数据库后端添加到 Django？

> ID：775026
> 
> 赞同：1
> 
> 时间：2009-04-21T23:00:40.997
> 
> 标签：database, django

看起来 Django 正在查看 django/db/backends 文件夹，但是当我安装各种适配器时，它们会安装到 /django 本身 - 我可以指出这一点吗？将它们复制到后端似乎不起作用，因为它总是说 blablalb.base 丢失了......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T14:55:36.973

从[文档中](http://docs.djangoproject.com/en/dev/ref/settings/#database-engine)：

> 您可以通过将 DATABASE_ENGINE 设置为完全限定的路径（即 mypackage.backends.whatever）来使用 Django 不附带的数据库后端。

所以你可以在任何地方安装后端，只要它可以在你的 PYTHONPATH 上导入。您只需要在 DATABASE_ENGINE 中提供完整的导入路径。

# c# - 在重定向页面上执行 GET/POST 时如何让 HttpWebRequest.AllowAutoRedirect 设置 cookie？

> ID：775038
> 
> 赞同：12
> 
> 时间：2009-04-21T23:02:56.937
> 
> 标签：c#, cookies, redirect, httpwebrequest

有没有办法让`HttpWebRequest`对象在通过该功能自动重定向到另一个页面时考虑 set-cookie 标头`AllowAutoRedirect`？我需要它来维护跨重定向的 cookie 信息；如果框架可以为我执行此操作，我宁愿不必自己实现重定向。这一定是一个常见的请求，因为我见过的大多数登录页面通常都会这样做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-21T23:09:52.787

我知道要使单独的请求（即不同的 HttpRequest 对象）与 cookie 一起使用，您需要将两个请求的[HttpRequest.CookieContainer属性设置为](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.cookiecontainer.aspx)[CookieContainer](http://msdn.microsoft.com/en-us/library/system.net.cookiecontainer.aspx)的同一实例。对于这种情况，您可能也需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T18:28:40.220

如果您不想使用 CookieContainer，以下代码将访问一个页面，并在参数中提供 cookie。然后，它将下载该页面设置的所有 cookie 并将它们作为字符串列表返回。

请注意，AllowAutoRedirect 设置为 false。如果您想遵循重定向，请将该对象从 HttpWebResponse 标头中拉出，然后手动构建另一个 Web 请求。

```
Public Shared Function GetCookiesSetByPage(ByVal strUrl As String, ByVal cookieToProvide As String) As IEnumerable(Of String)

    Dim req As System.Net.HttpWebRequest
    Dim res As System.Net.HttpWebResponse
    Dim sr As System.IO.StreamReader

    '--notice that the instance is created using webrequest 
    '--this is what microsoft recomends 
    req = System.Net.WebRequest.Create(strUrl)

    'set the standard header information 
    req.Accept = "*/*"
    req.UserAgent = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; .NET CLR 1.0.3705)"
    req.ContentType = "application/x-www-form-urlencoded"
    req.AllowAutoRedirect = False
    req.Headers.Add(HttpRequestHeader.Cookie, cookieToProvide)
    res = req.GetResponse()

    'read in the page 
    sr = New System.IO.StreamReader(res.GetResponseStream())
    Dim strResponse As String = sr.ReadToEnd

    'Get the cooking from teh response
    Dim strCookie As String = res.Headers(System.Net.HttpResponseHeader.SetCookie)
    Dim strRedirectLocation As String = res.Headers(System.Net.HttpResponseHeader.Location)
    Dim result As New List(Of String)
    If Not strCookie = Nothing Then
        result.Add(strCookie)
    End If
    result.Add(strRedirectLocation)
    Return result
End Function 
```

# html - IE 在高度 > 4096px 时显示透明度错误？

> ID：775041
> 
> 赞同：4
> 
> 时间：2009-04-21T23:04:14.983
> 
> 标签：html, css, internet-explorer

当我在大页面上遇到问题时，我正在处理一个带有透明背景覆盖的 JavaScript 对话框。

如果页面很大，则透明覆盖层将是纯色（即不再透明）。我做了一些测试，发现这只发生在覆盖层大于 4096 像素高的情况下（嗯，可疑，那是 2^12）。

任何人都可以验证这个问题吗？你见过变通方法吗？

这是我的测试代码（我正在使用原型）：

```
<style>
.overlayA { 
    position:absolute;
    z-index:10;
    width:100%;
    height:4095px;
    top:0px;
    left:0px;
    zoom: 1;
    background-color:#000;
    filter:alpha(opacity=10);
    -moz-opacity:0.1;
    opacity:0.1;
}

.overlayB { 
    position:absolute;
    z-index:10;
    width:100%;
    height:4097px;
    top:0px;
    left:0px;
    zoom: 1;
    background-color:#000;
    filter:alpha(opacity=10);
    -moz-opacity:0.1;
    opacity:0.1;
}
</style>
<div style="width:550px;height:5000px;border:1px solid #808080">
    <a href="javascript:// show overlay A" onclick="Element.show('overlayA')">Display A = 4096h</a>
    <br /><a href="javascript:// show overlay B" onclick="Element.show('overlayB')">Display B = 4097h</a>
</div>
<div id="overlayA" onclick="Element.hide(this)" class="overlayA" style="display:none"></div>
<div id="overlayB" onclick="Element.hide(this)" class="overlayB" style="display:none"></div> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-22T18:10:25.290

由于您在 CSS 上有一个不透明度过滤器，我相信您在幕后间接使用 DirectShow 进行 alpha 混合和图像合成。DirectShow 使用 DirectX 纹理，DX9 的像素限制为 4096x4096，这可以解释这种不稳定的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T23:38:02.203

如何使叠加层成为窗口的大小而不是页面的大小，并在滚动时向上或向下移动它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T17:53:09.030

你已经在边缘操作了（那是巨大的......）所以我不知道 MS 会将其归类为错误或“修复”它，即使它是。

您可能需要将其分解为更小的覆盖 DIV。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T18:08:58.430

你为什么不发布固定的覆盖？
这样它就不必像整个页面内容一样大。

简单地做：

```
 #Overlay{
  position:fixed;
  left:0px;
  top:0px;
  height:100%;
  width:100%;
  rest of declarations
 } 
```

只要确保它的父级是文档并且文档的宽度和高度为 100%。这样，您应该可以使用更小的覆盖层。

position:fixed 将确保叠加层相对于视口定位。因此它总是显示在左上角。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-09-08T20:23:15.257

position:fixed 解决方案是一个参差不齐的解决方案。它在 IE 中没有得到很好的支持。

最好的办法是自动创建和附加额外的透明元素（最大高度为 2048 像素，以覆盖同样存在此问题的 XP DX8）。

这是我使用的代码，假设您已经有一个浮动 div 解决方案。

```
 if(document.getElementById('document_body').scrollHeight > 2048)
    {
        document.getElementById('float_bg').style.height = "2048px";
        document.getElementById('float_bg').style.zIndex = -1;
        count=1;
        total_height=2048;
        while(total_height < document.getElementById('document_body').scrollHeight)
        {
            clone = document.getElementById('float_bg').cloneNode(true);
            clone.id = 'float_bg_'+count;
            clone.style.zIndex = -1;
            //clone.style.backgroundColor='red';
            clone.style.top = (count*2048)+"px";
            document.getElementById('float_el').insertBefore(clone,document.getElementById('float_bg'));
            count++;                

            this_add = 2048;
            if((total_height + 2048) > document.body.scrollHeight)
            {
                clone.style.height = (document.body.scrollHeight - total_height);
            }
            total_height += this_add;
        }
    }
    else
    {
            document.getElementById('float_bg').style.height = document.body.scrollHeight + "px";
    } 
```

# css - 是否值得尝试覆盖 DNN 中的默认类

> ID：775045
> 
> 赞同：2
> 
> 时间：2009-04-21T23:04:58.320
> 
> 标签：css, dotnetnuke

DotNetNuke 在其他无类跨度等的跨度中使用了很多预设类，如 .Normal、.Head、.SubHead 等他们都从他们的父母那里继承了他们的风格，但我很好奇其他人是否已经尝试过这个并且有故事可以讲述成功或在模块/管理端遇到了一些事情，这使得这是一项徒劳的任务？

谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T00:49:06.777

这真的取决于你的项目。如果您正在开发商业产品，我的建议是学习如何使用样式，以便您与 DotNetNuke 核心以及第三方扩展（皮肤和模块）具有高度兼容性。

我想说，如果您完全控制该站点，那么遵循您自己的约定并完全绕过 DNN 选择器可能是值得的。

这种方法是创建定义具有特定类名的区域的皮肤和容器。然后，您可以根据元素的实际情况而不是应用到它的类来定义这些区域内元素的样式。

您可能还需要清理或删除 default.css 文件 (\portals_default\default.css) 的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-05T15:16:46.223

我会添加另一个样式表来附加或覆盖默认样式。这样，您无需编辑默认样式表即可重铸默认样式。

使用 CSS 的级联特性对您有利！

如果样式是新的，请确保使用外部容器命名它们。

# python - 如何将秒转换为小时、分钟和秒？

> ID：775049
> 
> 赞同：609
> 
> 时间：2009-04-21T23:08:16.550
> 
> 标签：python, datetime

我有一个以秒为单位返回信息的函数，但我需要以小时：分钟：秒的形式存储该信息。

有没有一种简单的方法可以在 Python 中将秒数转换为这种格式？

* * *

## 回答 #1

> 赞同：1025
> 
> 时间：2009-04-21T23:22:15.720

您可以使用[`datetime.timedelta`](https://docs.python.org/library/datetime.html#datetime.timedelta)功能：

```
>>> import datetime
>>> str(datetime.timedelta(seconds=666))
'0:11:06' 
```

* * *

## 回答 #2

> 赞同：676
> 
> 时间：2009-04-21T23:15:54.317

通过使用该[`divmod()`](http://docs.python.org/library/functions.html#divmod)函数，它只执行一次除法来产生商和余数，您只需两个数学运算就可以非常快速地得到结果：

```
m, s = divmod(seconds, 60)
h, m = divmod(m, 60) 
```

然后使用[字符串格式](https://stackoverflow.com/a/134951/4936137)将结果转换为您想要的输出：

```
print('{:d}:{:02d}:{:02d}'.format(h, m, s)) # Python 3
print(f'{h:d}:{m:02d}:{s:02d}') # Python 3.6+ 
```

* * *

## 回答 #3

> 赞同：86
> 
> 时间：2014-07-01T10:13:42.217

我很难说出一个简单的方法（至少我不记得语法），但可以使用[time.strftime](https://docs.python.org/2/library/time.html#time.strftime)，它可以更好地控制格式：

```
from time import strftime
from time import gmtime

strftime("%H:%M:%S", gmtime(666))
'00:11:06'

strftime("%H:%M:%S", gmtime(60*60*24))
'00:00:00' 
```

[gmtime](https://docs.python.org/2/library/time.html#time.gmtime)用于将秒转换为`strftime()`需要的特殊元组格式。

> 注意：在 23:59:59 之后截断

* * *

## 回答 #4

> 赞同：64
> 
> 时间：2015-08-11T16:06:05.810

# 使用`datetime`：

### 使用`':0>8'`格式：

```
from datetime import timedelta

"{:0>8}".format(str(timedelta(seconds=66)))
# Result: '00:01:06'

"{:0>8}".format(str(timedelta(seconds=666777)))
# Result: '7 days, 17:12:57'

"{:0>8}".format(str(timedelta(seconds=60*60*49+109)))
# Result: '2 days, 1:01:49' 
```

### 没有`':0>8'`格式：

```
"{}".format(str(timedelta(seconds=66)))
# Result: '00:01:06'

"{}".format(str(timedelta(seconds=666777)))
# Result: '7 days, 17:12:57'

"{}".format(str(timedelta(seconds=60*60*49+109)))
# Result: '2 days, 1:01:49' 
```

# 使用`time`：

```
from time import gmtime
from time import strftime

# NOTE: The following resets if it goes over 23:59:59!

strftime("%H:%M:%S", gmtime(125))
# Result: '00:02:05'

strftime("%H:%M:%S", gmtime(60*60*24-1))
# Result: '23:59:59'

strftime("%H:%M:%S", gmtime(60*60*24))
# Result: '00:00:00'

strftime("%H:%M:%S", gmtime(666777))
# Result: '17:12:57'
# Wrong 
```

* * *

## 回答 #5

> 赞同：45
> 
> 时间：2017-04-06T16:40:56.057

这是我的快速技巧：

```
from humanfriendly import format_timespan
secondsPassed = 1302
format_timespan(secondsPassed)
# '21 minutes and 42 seconds' 
```

欲了解更多信息，请访问： [https ://humanfriendly.readthedocs.io/en/latest/#humanfriendly.format_timespan](https://humanfriendly.readthedocs.io/en/latest/#humanfriendly.format_timespan)

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2019-07-09T18:40:09.303

以下套装对我有用。

```
def sec_to_hours(seconds):
    a=str(seconds//3600)
    b=str((seconds%3600)//60)
    c=str((seconds%3600)%60)
    d=["{} hours {} mins {} seconds".format(a, b, c)]
    return d

print(sec_to_hours(10000))
# ['2 hours 46 mins 40 seconds']

print(sec_to_hours(60*60*24+105))
# ['24 hours 1 mins 45 seconds'] 
```

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2015-11-03T16:42:14.393

这就是我得到它的方式。

```
def sec2time(sec, n_msec=3):
    ''' Convert seconds to 'D days, HH:MM:SS.FFF' '''
    if hasattr(sec,'__len__'):
        return [sec2time(s) for s in sec]
    m, s = divmod(sec, 60)
    h, m = divmod(m, 60)
    d, h = divmod(h, 24)
    if n_msec > 0:
        pattern = '%%02d:%%02d:%%0%d.%df' % (n_msec+3, n_msec)
    else:
        pattern = r'%02d:%02d:%02d'
    if d == 0:
        return pattern % (h, m, s)
    return ('%d days, ' + pattern) % (d, h, m, s) 
```

一些例子：

```
$ sec2time(10, 3)
Out: '00:00:10.000'

$ sec2time(1234567.8910, 0)
Out: '14 days, 06:56:07'

$ sec2time(1234567.8910, 4)
Out: '14 days, 06:56:07.8910'

$ sec2time([12, 345678.9], 3)
Out: ['00:00:12.000', '4 days, 00:01:18.900'] 
```

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2016-05-21T21:14:33.807

如果你需要获得`datetime.time`价值，你可以使用这个技巧：

```
my_time = (datetime(1970,1,1) + timedelta(seconds=my_seconds)).time() 
```

您不能添加`timedelta`到`time`，但可以将其添加到`datetime`。

**UPD**：同一技术的另一种变体：

```
my_time = (datetime.fromordinal(1) + timedelta(seconds=my_seconds)).time() 
```

`1`您可以使用任何大于 0 的数字来代替。这里我们使用的事实是`datetime.fromordinal`始终返回组件为零的`datetime`对象。`time`

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2020-02-10T05:50:09.377

小时 (h) 由秒除以 3600 (60 分钟/小时 * 60 秒/分钟) 计算得出

分钟 (m) 以剩余秒数（小时计算的余数，按 %）除以 60（60 秒/分钟）计算得出

同样，秒 (s) 按小时和分钟的余数计算。

休息只是字符串格式！

```
def hms(seconds):
    h = seconds // 3600
    m = seconds % 3600 // 60
    s = seconds % 3600 % 60
    return '{:02d}:{:02d}:{:02d}'.format(h, m, s)

print(hms(7500))  # Should print 02h05m00s 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2021-07-09T19:12:40.417

有点偏离主题的答案，但可能对某人有用

```
 def time_format(seconds: int):
    if seconds is not None:
        seconds = int(seconds)
        d = seconds // (3600 * 24)
        h = seconds // 3600 % 24
        m = seconds % 3600 // 60
        s = seconds % 3600 % 60
        if d > 0:
            return '{:02d}D {:02d}H {:02d}m {:02d}s'.format(d, h, m, s)
        elif h > 0:
            return '{:02d}H {:02d}m {:02d}s'.format(h, m, s)
        elif m > 0:
            return '{:02d}m {:02d}s'.format(m, s)
        elif s > 0:
            return '{:02d}s'.format(s)
    return '-' 
```

结果是：

```
print(time_format(25*60*60 + 125)) 
>>> 01D 01H 02m 05s
print(time_format(17*60*60 + 35)) 
>>> 17H 00m 35s
print(time_format(3500)) 
>>> 58m 20s
print(time_format(21)) 
>>> 21s 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2019-05-17T09:00:10.407

`dateutil.relativedelta`如果您还需要以浮点数形式访问小时、分钟和秒，则非常方便。`datetime.timedelta`不提供类似的接口。

```
from dateutil.relativedelta import relativedelta
rt = relativedelta(seconds=5440)
print(rt.seconds)
print('{:02d}:{:02d}:{:02d}'.format(
    int(rt.hours), int(rt.minutes), int(rt.seconds))) 
```

印刷

```
40.0
01:30:40 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-11-30T13:57:11.400

就我而言，我想实现格式“HH：MM：SS.fff”。我是这样解决的：

```
timestamp = 28.97000002861023
str(datetime.fromtimestamp(timestamp)+timedelta(hours=-1)).split(' ')[1][:12]
'00:00:28.970' 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-02-09T15:53:10.480

如果您希望将日期上“自午夜以来的秒数”的单个值转换为日期时间对象或带有 HH:MM:SS 的字符串，则上述解决方案将起作用，但我登陆此页面是因为我想这样做在熊猫的整个数据框列上。如果其他人想知道如何一次为多个值执行此操作，那么最终对我有用的是：

```
 mydate='2015-03-01'
 df['datetime'] = datetime.datetime(mydate) + \ 
                  pandas.to_timedelta(df['seconds_since_midnight'], 's') 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-05-11T17:08:40.143

这是我一直使用的一种方式：（不管它多么低效）

```
seconds = 19346
def zeroes (num):
    if num < 10: num = "0" + num
    return num

def return_hms(second, apply_zeroes):
    sec = second % 60
    min_ = second // 60 % 60
    hrs = second // 3600
    if apply_zeroes > 0:
       sec = zeroes(sec)
       min_ = zeroes(min_)
       if apply_zeroes > 1:
           hrs = zeroes(hrs)
    return "{}:{}:{}".format(hrs, min_, sec)

print(return_hms(seconds, 1)) 
```

结果： `5:22:26`

## return_hms() 函数的语法

该`return_hms()`函数的使用如下：

第一个变量（秒）是要转换为 h:m:s 的秒数。

第二个变量（apply_zeroes）正在格式化：

> 0 或更少：不应用任何零

> 1：当分钟和秒低于 10 时，对它们应用零。

> 2 或更多：对任何小于 10 的值（包括小时数）应用零。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-12-23T19:18:52.320

我在这里查看了所有答案，但仍然尝试了自己的答案

```
def a(t):
  print(f"{int(t/3600)}H {int((t/60)%60) if t/3600>0 else int(t/60)}M {int(t%60)}S") 
```

结果：

```
>>> a(7500)
2H 5M 0S
>>> a(3666)
1H 1M 6S 
```

蟒蛇：3.8.8

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2020-01-25T12:13:19.853

您可以将秒除以 60 以获得分钟

```
import time
seconds = time.time()
minutes = seconds / 60
print(minutes) 
```

当你再次除以 60 时，你会得到小时

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2021-06-15T08:03:40.083

这是一个简单的程序，它读取当前时间并将其转换为以小时、分钟和秒为单位的时间

```
import time as tm #import package time
timenow = tm.ctime() #fetch local time in string format

timeinhrs = timenow[11:19]

t=tm.time()#time.time() gives out time in seconds since epoch.

print("Time in HH:MM:SS format is: ",timeinhrs,"\nTime since epoch is : ",t/(3600*24),"days") 
```

输出是

```
Time in HH:MM:SS format is:  13:32:45 
Time since epoch is :  18793.335252338384 days 
```

* * *

## 回答 #18

> 赞同：-4
> 
> 时间：2019-11-04T11:02:12.557

```
 division = 3623 // 3600 #to hours
division2 = 600 // 60 #to minutes
print (division) #write hours
print (division2) #write minutes 
```

PS我的代码不专业

# grails - Grails 和 Spring Security：如何从控制器中获取经过身份验证的用户？

> ID：775053
> 
> 赞同：12
> 
> 时间：2009-04-21T23:09:13.723
> 
> 标签：grails

我最近从 JSecurity 插件转移到了 Spring Security。如何从我的控制器中获取经过身份验证的用户？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-22T06:13:09.787

它目前没有记录，但在插件安装文件中，它添加了 3 种方法到每个控制器，因此您实际上不必注入 authenticationService：

```
private void addControllerMethods(MetaClass mc) {
    mc.getAuthUserDomain = {
        def principal = SCH.context?.authentication?.principal
        if (principal != null && principal != 'anonymousUser') {
            return principal?.domainClass
        }

        return null
    }

    mc.getPrincipalInfo = {
        return SCH.context?.authentication?.principal
    }

    mc.isUserLogon = {
        def principal = SCH.context?.authentication?.principal
        return principal != null && principal != 'anonymousUser'
    }
} 
```

这意味着您可以调用

```
principalInfo 
```

获取主体对象。它还具有“isUserLogin”以查看用户是否已登录，并具有“authUserDomain”以获取与已登录用户的主体相关联的实际域类实例（Person/User）。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2011-06-07T19:28:55.390

以下代码来自[Spring Security Core Plugin (Version: 1.1.2) - Reference Documentation - Section 6.2](http://burtbeckwith.github.com/grails-spring-security-core/docs/manual/index.html)

grails.plugins.springsecurity.SpringSecurityService 提供安全实用功能。它是一个常规的 Grails 服务，因此您可以使用依赖注入将其注入到控制器、服务、taglib 等中：

```
class SomeController {
    def springSecurityService
    def someAction = { 
        def user = springSecurityService.currentUser 
        …
    } 
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-04-22T00:50:31.233

我正在使用 0.5.1，以下对我有用：

```
class EventController {
  def authenticateService

  def list = { 
     def user = authenticateService.principal() 
     def username = user?.getUsername()
     .....
     .....
  } 
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-05-21T02:34:27.973

如今，我认为这样做的方法是：

```
def user = getAuthenticatedUser() 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-08T11:26:42.320

您也可以通过这种方式获取当前用户

```
 class AnyController {
  def springSecurityService
  def someAction = { 
    def user = User.get(springSecurityService.principal.id)

     } 
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-11T07:42:26.120

使用此代码：

```
if (springSecurityService.isLoggedIn()){   
        println "Logged In"

    } 
```

# asp.net-mvc - asp.net mvc - 基于认证用户的动态控制器

> ID：775056
> 
> 赞同：1
> 
> 时间：2009-04-21T23:09:27.357
> 
> 标签：asp.net-mvc

如果我希望我的 Web 应用程序的默认 URL 根据用户显示完全不同的 UI，那么实现此目的的最佳方法是什么？我真的不想为每种类型的用户使用相同的控制器。换句话说，如果用户登录并访问[http://mysweetapp.com](http://mysweetapp.com)并且是管理员用户，他们应该会看到与访问[http://mysweetapp 相同的内容。 com/管理员](http://mysweetapp.com/admin)。如果用户以普通用户身份登录，他们应该会看到与访问[http://mysweetapp.com/normaluser相同的内容](http://mysweetapp.com/normaluser)

我是否应该将“重定向”控制器作为默认控制器并将客户端发送到适当的控制器？

```
routes.MapRoute(
               "Default",
               "{controller}/{action}/{id}",
               new { controller = "Redirect", action = "Index", id = "0" }); 
```

我也尝试过创建自己的 ControllerFactory，但我认为我不清楚这个概念并且无法让它发挥作用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-21T23:16:47.277

为简单起见，在您的 HomeController Index 方法（或您使用的任何默认控制器）中，您可以放置​​一些类似这样的代码，然后当用户开始在您的站点周围导航时，来自 AdminIndex 视图或 Index 视图的链接可以将用户发送到适当的区域- 这样您就有一个共享控制器，而其他控制器可以特定于用户类型。

```
return user.IsAdministrator ? View("AdminIndex") : View("Index"); 
```

user.IsAdministrator 调用当然是伪代码 - 如果用户是管理员用户，请用您使用的任何方法替换它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-23T01:43:44.437

我认为最干净的方法是创建一个自定义路由处理程序以供您的默认路由使用。然后，如果控制器名称是您的默认控制器名称，您可以分开使用哪个控制器，在下面的示例中，它是：Home。然后检查用户是否是管理员，并使用您要使用的控制器处理请求。

这是代码：

```
public class CustomHttpHandler : IHttpHandler
{
    public RequestContext RequestContext { get; private set; }

    public CustomHttpHandler(RequestContext requestContext)
    {
        try
        {
            string controllerName = RequestContext.RouteData.GetRequiredString("controller");
            if (controllerName.Equals("home", StringComparison.CurrentCultureIgnoreCase))
            {
                bool isAdmin = RequestContext.HttpContext.User.IsInRole("Admin");
                controllerName = isAdmin ? "admin" : "normaluser";
            }

            IControllerFactory factory = ControllerBuilder.Current.GetControllerFactory();
            IController controller = factory.CreateController(RequestContext, controllerName);
            if (controller != null)
            {
                controller.Execute(RequestContext);
            }
        }
        finally
        {
            factory.ReleaseController(controller);
        }
    }
}

public class CustomRouteHandler : IRouteHandler
{
    public IHttpHandler GetHttpHandler(RequestContext requestContext)
    {
        return new CustomHttpHandler(requestContext);
    }
}

// Now use the CustomRouteHandler when you map your default route.
routes.MapRoute(
    "Default",
    "{controller}/{action}/{id}",
    new { controller = "Home", action = "Index", id = "" }
).RouteHandler = new CustomRouteHandler(); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T23:22:09.480

您可能要考虑的是区域。这将允许您为每个区域拥有单独的控制器。然后根据角色或您希望的任何内容允许访问这些区域。这将为您提供“/admin/controller/action”、“/users/controller/action”等路由。“模式”通过命名空间分隔所有控制器，并很好地处理路由。轻松分离母版页等。

它不会给你（可能令人困惑，IMO）'/'和'/admin/'对于管理员用户来说看起来相同，但它会让你分离内容和控制器。

您所描述的内容可能会导致每个控制器的大量方法，这通常被 MVC/REST 人群所反对。这并不可怕，但也不是最佳实践。

[您可以在此处](http://haacked.com/archive/2008/11/04/areas-in-aspnetmvc.aspx)阅读此博客中的有关区域。谷歌“asp.net mvc 领域”了解更多信息。

- - - - 编辑 - - - - - -

稍微扩展一下：

如果没有自定义路由或其他一些恶作剧，动作会通过 url 映射到控制器。因此，如果您想保持所有管理员操作和视图不同，但是在根 url 上，以及正常的用户操作，这将导致一个必须处理所有这些操作的大控制器，或者一些奇怪的“如果这个角色，这个视图; 如果那个角色，那个观点”这种废话必须发生在每个动作中。潜在的调试有点混乱。

同样，默认视图引擎也会根据 url 查找视图。

这意味着您所有的视图都将放在一个大而丑陋的目录中，其中充满了各种奇怪的名称相似但行为不同的视图。

简而言之，这将成为潜在的可怕维护噩梦，具体取决于应用程序的复杂性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T23:23:39.413

如果您不想使用相同的控制器，请先为每个项目设置单独的控制器和视图 - mysweetapp.com/admin 和 mysweetapp.com/normaluser。

然后，您可以根据他们的登录角色通过默认控制器将特定用户重定向到此页面。

```
if (User.IsInRole("Admin")
            {
                return RedirectToAction("Index", "admin");
            }
            else if (User.IsInRole("Standard")
            {
                return RedirectToAction("Index", "normaluser");
            } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-11-27T08:49:40.180

您能否创建一个从 DefaultControllerFactory 扩展并覆盖 CreateController 的类？

```
public class RedirectControllerFactory : DefaultControllerFactory
{
    public override IController CreateController(System.Web.Routing.RequestContext requestContext, string controllerName)
    {
        if (controllerName.Equals("Redirect"))
        {
            controllerName = requestContext.HttpContext.User.IsInRole("Admin") ? "Admin" : "NormalUser";
        }
        return base.CreateController(requestContext, controllerName);
    }
} 
```

然后在您的 Application_Start() 中：

```
protected void Application_Start()
{
    // ...
    ControllerBuilder.Current.SetControllerFactory(new RedirectControllerFactory());
} 
```

# active-directory - 开源 SPML 到 LDAP 网关

> ID：775059
> 
> 赞同：-1
> 
> 时间：2009-04-21T23:10:05.593
> 
> 标签：active-directory, ldap, adam, spml

我最近遇到了[Project Keychain](http://www.google.com/url?sa=t&source=web&ct=res&cd=1&url=http%3A%2F%2Fblogs.oracle.com%2Fmwhite%2Fentry%2Fproject_keychain_spml_gateway_for&ei=5lHuSZeaOpvItgf2_fXLDw&rct=j&q=spml+keychain&usg=AFQjCNHWhYPd9nmC5jxg_D0wmJ7QftTy9A)，想知道是否有任何其他 SPML 到 LDAP 网关是开源的。实现语言无关紧要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-27T10:46:37.767

Quest 有 ActiveRoles SPML 服务器，它是免费的但不是开源的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-04-29T13:15:58.243

还有 Softerra Adaxes SPML Provider（它不是开源的）[http://www.adaxes.com](http://www.adaxes.com)，但它基于开源 SPML 库（[http://www.softerra.com/products_spml-library.htm](http://www.softerra.com/products_spml-library.htm)）

# html - 如何在css中隐藏div的内容

> ID：775060
> 
> 赞同：26
> 
> 时间：2009-04-21T23:10:18.480
> 
> 标签：html, css

我有这个 html 代码

```
<div id="mybox"> aaaaaaa </div> 
```

这是我的CSS

```
#mybox{
   background-color:green;
}

#mybox:hover{
   background-color:red;
} 
```

问题是如何在鼠标悬停事件时隐藏 div 的内容（aaaaaaa），仅使用 css 并且不更改代码的结构我想我应该在下面放一些代码，`#mybox:hover`但我不知道代码

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-04-21T23:16:57.747

在不更改标记或使用 JavaScript 的情况下，您几乎必须更改 knut 提及的文本颜色，或设置 text-indent: -1000em;

IE6 不会读取锚元素以外的任何东西上的 :hover 选择器，因此您必须使用[Dean Edwards 的 IE7 之](http://dean.edwards.name/IE7/)类的东西。

确实，您最好将文本放在某种元素中（例如`p`or`span`或`a`）并将其设置为`display: none;`悬停。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-01-10T13:27:33.227

这是使用 CSS3 最简单​​的方法：

```
#mybox:hover {
  color: transparent;
} 
```

无论容器颜色如何，您都可以在悬停时使文本颜色透明。

[http://caniuse.com/#feat=css3-colors](http://caniuse.com/#feat=css3-colors)

干杯! :)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-04-21T23:22:50.553

通过 CSS 隐藏是通过使用“可见性”或“显示”属性来实现的。尽管两者都取得了相似的结果，但了解差异很有用。

如果你只想隐藏元素但保留它所占用的空间，你应该使用：

```
#mybox:hover {
   visibility: hidden;
} 
```

如果你想隐藏元素并移除它所占用的空间，以便其他元素可以占用它的空间，那么你应该使用：

```
#mybox:hover {
   display: none;
} 
```

还要记住，IE6 及以下版本不响应 :hover 对除 A 标记之外的任何内容。在这种情况下，您需要一些 Javascript 来更改类名：

```
document.getElementById('mybox').className = 'hide'; 
```

并在 CSS 中定义“隐藏”类：

```
.hide { display: none; } 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-01-25T04:08:52.220

听起来很傻，但 font-size:0; 可能只是工作。它对我有用。您可以使用需要显示的子元素轻松覆盖它。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-04-21T23:13:06.523

您可以使文本颜色与背景颜色相同：

```
 #mybox:hover
{
  background-color: red;
  color: red;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-09-02T21:12:01.087

不透明度怎么办

```
#mybox:hover {
    opacity: 0;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-08-20T05:33:56.640

使用隐藏在 html/css 中的最佳方法`display:none;`

*例子*

```
<div id="divSample" class="hideClass">hi..</div>
<style>
.hideClass
{display:none;}
</style> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-03-10T22:48:03.230

有很多方法可以做到：
一种方法：

```
#mybox:hover {
   display:none;
} 
```

另一种方式：

```
#mybox:hover {
   visibility: hidden;
} 
```

或者你可以这样做：

```
#mybox:hover {
   background:transparent;
   color:transparent;
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-03-26T04:27:01.497

这是一个迟到的答案，但仍然猜测将颜色设置为透明是最好的选择。

```
#mybox:hover{
background-color:red;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-21T23:13:37.877

```
#mybox:hover { display: none; }
#mybox:hover { visibility: hidden; }
#mybox:hover { background: none; }
#mybox:hover { color: green; } 
```

虽然应该注意的是，IE6 及以下版本在不在 A 标签上时不会监听悬停。为此，您必须在悬停期间合并 JavaScript 以向 div 添加一个类。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-11-10T16:16:55.603

很抱歉迟到了 7 年，但这可以通过使用以下方法来实现：

```
.your-block{
    visibility: hidden;
    width: 0px;
    height: 0px;
} 
```

这将保留页面上的内容并且不会占用任何空间，而 display:none 将完全隐藏内容。

如果您需要在 div 中引用代码但不需要显示，则使用上面的代码会很有用。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-07-26T10:20:33.247

我会说：

```
#mybox{
  background:green;  
}

#mybox:hover{
  color:transparent;
}
```

```
<div id="mybox">
  This text will disappear on hover  
</div>
```

这将隐藏文本，但是当然，它仍然包含文本，但是隐藏文本是一种棘手的方法（使不可见），但它会很好用

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2017-03-30T22:59:04.573

```
.button {
        width: 40px;
        height: 40px;
        font-size: 0;
        background: url("data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%221284%20207%2024%2024%22%3E%3Cg%20fill%3D%22none%22%3E%3Cpath%20d%3D%22M1298.5%20222.9C1297.5%20223.6%201296.3%20224%201295%20224%201291.7%20224%201289%20221.3%201289%20218%201289%20214.7%201291.7%20212%201295%20212%201298.3%20212%201301%20214.7%201301%20218%201301%20219.3%201300.6%20220.5%201299.9%20221.5L1302.7%20224.2C1303%20224.6%201303.1%20225.3%201302.7%20225.7%201302.3%20226%201301.6%20226%201301.2%20225.7L1298.5%20222.9ZM1295%20222C1297.2%20222%201299%20220.2%201299%20218%201299%20215.8%201297.2%20214%201295%20214%201292.8%20214%201291%20215.8%201291%20218%201291%20220.2%201292.8%20222%201295%20222Z%22%20fill%3D%22%239299A6%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E") #f0f2f5 no-repeat 50%;
    }
```

```
<button class="button">Поиск</button>
```

# jquery - jQuery离线预加载

> ID：775066
> 
> 赞同：0
> 
> 时间：2009-04-21T23:13:12.340
> 
> 标签：jquery, preload

这是我的 html 页面[http://equipe94.com/2009e.html](http://equipe94.com/2009e.html)

我对页面做了一些事情，它使页面重新定位（滚动和箭头）

您是否有一种方法可以隐藏所有内容（背景除外），执行使页面移动的操作，并在正确的位置显示所有内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T23:16:40.383

-- 抱歉重复发帖.. -- 唯一的问题：[jquery hidden preload](https://stackoverflow.com/questions/775008/jquery-hidden-preload)

# java - 包含绘图到面板区域

> ID：775070
> 
> 赞同：0
> 
> 时间：2009-04-21T23:14:41.213
> 
> 标签：java, swing

我想将一个 X 和 Y 整数数组绘制到 Java 框架中的面板上。

画线的最佳方法是什么（目前我正在使用 Graphic 的 drawPolyline）？

如何在不知道最大值 (Y) 值的情况下*有效地*缩放整数值，使它们都适合面板区域？

**更新，例如**

```
public void paint(Graphics g)
{
  int height = panel.getHeight();
  int width = panel.getWidth();
  int[] xPoints = { ... values ... };
  int[] yPoints = { ... values ... };
  int nPoints = dataLength;
  // Scale xPoints and yPoints so they fit in the area of width and height
  // and draw line
  g.drawPolyline(xPoints, yPoints, nPoints);
  g.dispose();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-26T04:52:07.427

在不知道 x 和 y 最大值的情况下，我认为这是无法做到的，因为您无法计算所需的比例。但是，如果您有一个点数组，那么您当然可以搜索它以找到最小和最大 x 和 y 值。

如果您有获得最大值的方法，请继续阅读（并为了其他有类似问题的人的利益）。

求任意两个 y 值之间任意两个 x 值的最大差值；称它们为 max(dx) 和 max(dy) - 它们分别是 max(x)-min(x) 和 max(y)-min(y)。

取 width/max(dx) 和 height/max(dy) 中的较大者。这个数字提供了你的规模；只需使用 ((x-min(x))/scale) 修改每个 x 值，使用 ((y-min(y))/scale) 修改每个 y 值

您现在应该拥有适合相对 0,0 方向的最大形状。

注意：我有负坐标，您必须在应用这些公式之前将它们调整到正坐标范围。

# javascript - Javascript 正则表达式返回 null 但它不应该是。为什么？

> ID：775077
> 
> 赞同：1
> 
> 时间：2009-04-21T23:16:02.413
> 
> 标签：javascript, ajax, regex

我有一个正则表达式，它搜索它通过 Ajax 检索的页面的源，并获取其间的所有数据，包括字段集标记。

这是我的javascript：

```
 var req = new XMLHttpRequest();
 var regex = new RegExp("<(fieldset)\b[^>]*>.*?</\1>");

 function showEditForm(i) {

   req.open('GET', '/admin/maps/edit/' + i, false);
   req.send(null);

   var response = req.responseText;
   //strip out all the line breaks
   var responseStripped = response.replace( new RegExp("\\n|\\r", "g"), "" );

   var regexed = regex.exec(responseStripped)
   alert(regexed);

} 
```

这是 responseStripped 的来源：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"       "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head>  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />  <title>Gessner Engineering | Administrative Area | edit</title>  <link href="/stylesheets/scaffold.css?1236625014" media="screen" rel="stylesheet" type="text/css" />  </head><body>  <div id="user-bar-greeting">Logged in as Thomas Gessner</div>  <div id="user-bar-action"  >(<a href="/logout" title="Log out">Log out</a>)</div><div id="header"></div><ul id="menu">  <li><a href="/admin">Home</a></li>  <li><a href="/admin/maps">Geotechnical Map</a></li>  <li><a href="/admin/profiles">Profiles</a></li>  <li><a href="/admin/projects">Projects</a></li>  <li><a href="/admin/users">Users</a></li></div><div id="content">  <h1></h1>  <fieldset><legend>Edit Test Marker</legend><form action="/admin/maps/1" class="edit_map" enctype="multipart/form-data" id="edit_map_1" method="post"><div style="margin:0;padding:0"><input name="authenticity_token" type="hidden" value="1422cd87ff4d68b2b23c9015a0568bffd47fbfeb" /></div>    <p>    <label for="map_name">Name</label><br />    <input id="map_name" name="map[name]" size="30" type="text" value="Test Marker" />  </p>  <p>    <label for="map_description">Description</label><br />    <textarea cols="40" id="map_description" name="map[description]" rows="5">test</textarea>  </p>  <p>    <label for="category_id">Category:</label><br/>    <select id="map_category_id" name="map[category_id]"><option value="">Select One</option></select>  </p>  <p>    <label for="map_address">Address</label><br />    <input id="map_address" name="map[address]" size="30" type="text" />  </p>  <p>    <label for="map_address2">Address2</label><br />    <input id="map_address2" name="map[address2]" size="30" type="text" />  </p>  <p>    <label for="map_city">City</label><br />    <input id="map_city" name="map[city]" size="30" type="text" />  </p>  <p>    <label for="map_state">State</label><br />    <input id="map_state" name="map[state]" size="2" type="text" />  </p>  <p>    <label for="map_zip">Zip</label><br />    <input id="map_zip" name="map[zip]" size="30" type="text" />  </p>  <p>    <input id="map_submit" name="commit" type="submit" value="Create" />  </p></form></fieldset></div></body></html> 
```

我已经验证了正则表达式在 RegexBuddy 和[RegexPal](http://regexpal.com)中有效。

但是，当一切都说完了，我得到了 null 返回。

我究竟做错了什么？

谢谢！

*请注意，这是测试形式，它可能看起来很难看，但我试图逐步分解它，这是它所处的最后一个状态。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-21T23:19:20.907

您忘记转义字符串中的反斜杠：

```
var regex = new RegExp("<(fieldset)\\b[^>]*>.*?</\1>"); 
```

# c++ - 最好的商业 C++ IDE？

> ID：775082
> 
> 赞同：-3
> 
> 时间：2009-04-21T23:17:30.147
> 
> 标签：c++, windows, ide

我尝试过 C++ Builder 2009 和 Visual Studio 2008。VCL 似乎比 MFC 友好得多。有没有比这两个更好的替代品？

PS：请不要推荐免费赠品或开源 IDE。我*真的*只对商业 IDE 感兴趣。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-21T23:19:37.863

这一切都取决于你在编码什么。如果你只做 Win32，我相信 Visual Studio 2008 真的是为 Win32 打磨的。您可以随时尝试将 Visual Studio 作为 Express Edition 进行试用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-21T23:22:39.057

我想提到 VCL 和 MFC 意味着您仅指的是 Windows IDE。话虽如此，我认为VS2008几乎没有比赛的王冠。它的调试器是您可以获得的最好的调试器之一，并且它完美地集成到了 IDE 中。不要误会我的意思，C++ builder 仍然是一款很棒的软件，但我觉得 Borland 的编码工具系列在他们卖给 Embarcadero 之前的日子里处于鼎盛时期。Visual Studio 2010[看起来也很有前途](http://www.microsoft.com/visualstudio/2010/overview.mspx)！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-04-21T23:20:14.727

Visual Studio 2008 毫无疑问。有独立的（但主要是开源的，呵呵）UI 设计师将为各种我认为比 MFC 和 VCL 更好的库生成代码。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-21T23:21:24.800

Visual Studio 是最好的 C++ 开发环境，但 MFC 是一个非常糟糕的框架。我建议使用 C# 和 .net 框架，或者使用我知道的 VCL没有。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-22T00:19:10.280

我不确定我是否理解 VCL 和 MFC 以及 IDE 之间的联系。

IDE 就像一个文档编辑器。我觉得Visual Studio很棒，好久没看到Builder了，应该也不错吧。我也是 Eclipse 的粉丝，并且认为 CDT 取得了长足的进步。

但是，VCL 和 MFC 只是与 IDE 一起分发但可以在没有它的情况下使用的类库。如果您想问这个问题，请编辑您的问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-22T13:23:07.133

Visual Studio 是适用于 Windows*的*C++ IDE。请注意，您根本不必使用 MFC - 例如我使用 WTL，其他 GUI 库和框架，例如 Qt 也可以从 VS 中使用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-22T13:33:12.493

+1 为[Visual Studio 2008](http://msdn.microsoft.com/en-us/vstudio/default.aspx)。

将 VS 与[Visual Assist](http://www.wholetomato.com/)相结合，以获得更好的代码完成、重构、更好的概览……（真的不能没有它了）

将VS 与[ViEmu](http://www.viemu.com/)结合使用，在 Visual Studio 中进行 vi 样式编辑（仍然习惯了，但肯定更有趣）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-09T17:14:11.103

我知道的唯一商业替代品是 Qt Creator，它仍处于测试阶段。我不知道，所以我不能考虑比较。

除此之外，选择很明显：如果您想做可移植的 C++ 或 C++/CLI，请选择 Visual Studio 2008；调试器很棒，编译器高度符合标准。但是对于富客户端 Windows 应用程序、Windows 数据库应用程序、COM 服务器和客户端或 Delphi 互操作，请使用 C++Builder。在富客户端 UI 方面，没有什么比 VCL 更高效了。

# apache-flex - 每个函数一个文件……真的吗？

> ID：775093
> 
> 赞同：0
> 
> 时间：2009-04-21T23:21:54.253
> 
> 标签：apache-flex, actionscript

我对 Flex/ActionScript 比较陌生，但我一直在使用一种模式，即在我的 util 包中为每个函数创建一个文件 - 文件名与函数名相同。就像文件是 convertTime.as 一样：

```
package util{
    public function convertTime(s:String):Date{
        ...
    }
} 
```

这样我可以通过以下方式轻松导入函数：

```
import util.convertTime;
...
convertTime(...); 
```

我更喜欢这种方式，而不是导入一个类对象，然后调用挂在它上面的静态方法，如下所示：

```
import util.Util;
...
Util.convertTime(...); 
```

但是，我这样做的次数越多，最终得到的文件就越多，而且只将一个函数放入文件中似乎有点浪费/愚蠢，尤其是当函数很小的时候。还有另一种选择吗？还是这两个选项是我唯一的选择？

*更新：经过一些研究，我还在下面发布了我自己的答案。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-21T23:52:35.210

是的，这是实用程序库的两个主要选项。我们实际上将这两种方法都用于我们的通用效用函数。对于我们认为实际上应该内置的非常小的一组函数（例如 map()），我们在每个文件中放置一个函数，以便我们可以直接使用该函数。

对于更晦涩/专门的实用程序函数，我们不想污染我们的全局命名空间，因此我们将它们设为实用程序类上的静态函数。这样，我们确定当有人引用 ArrayUtils.intersect() 时，我们知道 intersect() 来自哪个库，以及它的大致用途（它与两个数组相交）。

我建议尽可能使用后一种路线，除非你有一个功能，a）你经常使用，b）一目了然。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-23T15:42:54.220

毕竟，我遇到了其他一些替代方案，并认为我会在这里分享它们。

# 备选方案 1 - 使用继承

这可能是一个明显的答案，但有限。您可以将静态方法放入父类中，继承它们以将它们放入子类中。这仅适用于类。此外，由于 ActionScript 是单继承，因此您只能继承一次。

# 备选方案 2 - 为方法命名

您仍然将实用程序函数编写为挂在实用程序类上的静态方法，但是您为它们设置别名，以便您可以使用更短的名称访问它们，例如：

```
import mx.binding.utils.BindingUtils;
var bind:Function = BindingUtils.bindProperty; 
```

现在你可以打电话

```
bind(...); 
```

而不是冗长的

```
BindingUtils.bindProperty(...); 
```

您可以在类范围和函数范围内执行此操作，但不能在包范围内执行此操作 - 因为显然您在包内只能有一个可见属性。如果您在类范围内执行此操作，您将需要确保它不会与您的其他类属性名称冲突。

# 备选方案 3 - 使用包括

如[这篇 flexonrails 博客文章](http://flexonrails.net/?p=73)中所述，您可以使用*include*来模拟 ActionScript 中的 mixin。[包含](http://livedocs.adobe.com/flex/3/html/help.html?content=usingas_4.html#218626)与导入不同，它所做的只是复制您包含的整个文件并将其粘贴到您包含它的位置。所以，它完全没有处理命名空间问题，你不能像导入一样引用它的完整路径名，如果你有冲突的名字，你自己处理这个。与导入不同的是，它会创建相同代码的不同副本。但是你*可以*用它做的是将任意数量的函数放在一个文件中，并将它们包含在另一个文件的类或函数范围中。前任：

```
// util/time_utils.as
function convertTime(..){
   ...
}
function convertDate(..){
   ...
} 
```

包括：

```
include 'util/time_util.as';  // this is always a relative path
...
convertTime(...); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-25T20:10:54.933

@an0nym0usc0ward

OOP 只是将类似的函数或属性合并到可以导入和使用的对象中的方法。它只是代码的一种组织形式，所有代码最终都在处理器中按程序执行，OOP 只是源的组织。他在这里所做的可能不像您从书中学到的那样是 OOP，但它最终会做完全相同的事情，并且应该受到同样的尊重。

任何真正了解 OOP 的人都不会天真地认为 OOP 的批准和文档形式是唯一可能的面向对象的代码方式。

编辑：这应该是对 an0nym0usc0ward 告诉他学习 OOP 的粗鲁评论的评论回应。但我想我在错误的框中输入了它:)

# junit - JUnit 报告——测试方法描述

> ID：775096
> 
> 赞同：26
> 
> 时间：2009-04-21T23:22:34.830
> 
> 标签：junit, report

我正在尝试查看是否有办法通过 javadocs 在我的 junit 报告中包含“描述性文本”。JUnit 4 似乎不像 TestNG 那样支持 @Test 注释的“描述”属性。

到目前为止，我研究过的只有一个工具，叫做 javadoc-junit ( [http://javadoc-junit.sourceforge.net/](http://javadoc-junit.sourceforge.net/) )。但是我无法让它工作，因为它似乎与 Junit 4 不兼容。

我想要的是某种方式在 JUnit 报告中为我的每个测试方法提供一两个文本。JavaDoc 不好，因为目标受众必须在 JavaDoc 和 Junit 报告之间切换才能查看文档和/或测试统计信息。

有人知道我可以毫不费力地使用其他任何东西吗？

最好的，雷 J

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-04-21T09:33:13.633

有`JUnit 5`一种方法可以用`@DisplayName`. 声明的测试类可以有`text`,`special characters`和`emojis`.

每个测试中声明的文本通过`test runners`和可见`test reports`。

* * *

**[Javadoc](https://junit.ci.cloudbees.com/job/JUnit5/javadoc/)说：**

`public @interface DisplayName`

> @DisplayName 用于为带注释的测试类或测试方法声明自定义显示名称。显示名称通常用于 IDE 和构建工具中的测试报告，并且可能包含空格、特殊字符甚至表情符号。

**和[用户指南](http://junit.org/junit5/docs/current/user-guide/#custom-names)：**

```
import org.junit.gen5.api.DisplayName;
import org.junit.gen5.api.Test;

@DisplayName("A special test case")
class DisplayNameDemo {

    @Test
    @DisplayName("Custom test name containing spaces")
    void testWithDisplayNameContainingSpaces() {
    }

    @Test
    @DisplayName("╯°□°）╯")
    void testWithDisplayNameContainingSpecialCharacters() {
    }

    @Test
    @DisplayName("")
    void testWithDisplayNameContainingEmoji() {
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-09T08:37:12.970

还有一个相当新的解决方案，称为**[Allure](https://github.com/allure-framework/)**。那是一个基于Java的测试执行报告，主要是在代码中添加补充注释。现有的注释包括：

*   自定义描述：**@Description("一个很酷的测试")**
*   按功能或故事分组：**@Features({"feature1", "feature2"})** , **@Stories({"story1", "story2" })**
*   将在测试用例中执行的方法标记为步骤：**@Step**（甚至适用于私有方法）
*   附件：**@Attachment(name = "页面截图", type = "image/png")**

有关更多详细信息，请参阅他们的**[wiki](https://github.com/allure-framework/allure-core/wiki)**和**[示例项目](https://github.com/allure-framework/allure-junit-example)**。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-21T23:24:26.090

我不会将 javadocs 放在 JUnit 测试中。我通常使方法的名称具有足够的描述性，因此它与我能提出的任何评论一样好或更好。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-04-24T06:27:50.660

我可以想象，[集成测试框架 (FIT)](http://fit.c2.com/)将是一个不错且干净的解决方案。

**FIT是做什么的？**
FIT 是一个框架，它允许通过 Word 文档中的表格、wiki 表格或 html 表格来编写测试。
FIT 会忽略表格外的每个字符，让您输入文档、描述、要求等。

**这些表中的 on 看起来如何？**

想象一个`MyMath.square(int)`将其输入参数平方的函数。您必须构建一个所谓的 Fixture，作为您`MyMath`和下表之间的适配器：

```
class.with.Fixture.Square
x    square()
2    4
5    25 
```

第一列描述输入值，第二列描述预期结果。如果不相等，则该字段标记为红色。

**夹具的外观如何？**
对于给定的示例，这将是正确的夹具：

```
package class.with.Fixture // Must be the same as in the fist row of the table

public class Square extends Fixture {
    public int x; // Must be the same as in the second row
    public int square() { // Must be the same as in the second row
        return MyMath.square(x);
    }
} 
```

或许，您可以使用 FIT 来满足您的要求。
请随时评论我的答案或编辑您的问题以获取更多信息！

# database - Oracle XE 还是 Postgres？

> ID：775106
> 
> 赞同：3
> 
> 时间：2009-04-21T23:26:19.983
> 
> 标签：database, oracle, postgresql

我应该为 Web 应用程序使用 Postgres 还是 Oracle XE **，为什么？**

它们既可免费获得，也可用于商业用途。

为什么我应该使用一个数据库而不是另一个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-21T23:31:01.707

好吧，使用 Oracle XE，如果您达到极限，您必须购买 Oracle 或将整个应用程序迁移到不同的数据库。使用 PostgreSQL，没有任何限制，而且该软件是完全免费和开源的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-21T23:33:02.480

如果您选择 Oracle XE，需要注意以下几点：

1.  如果您有一台多处理器服务器，它将只使用一个 CPU
2.  它最多只能使用 1 GB 的内存
3.  用户数据的数据库大小限制为 4 GB
4.  仅适用于 32 位 Windows 和 32 位 Linux

如果这些限制对您来说不是问题并且您喜欢 Oracle 方法，那么请试一试，否则请考虑使用像 Postgres 或 MySQL 这样的开源服务器，它们没有上述限制。

如果您确实选择了 XE，但后来发现您的要求发生了变化，那么 Oracle 的下一个版本是 5 个席位 900 美元，每个席位增加 180 美元。这实际上比 MS SQL Server afaik 便宜一点。

选择 Oracle 有一些很好的理由，特别是如果您是 Java 开发人员，例如您可以用 Java 编写存储过程，而且我认为 Java Web 服务有本机支持。但是，最终您需要权衡成本与应用程序的要求。MySQL 和 Postgres 将允许您免费扩展您的应用程序（显然硬件除外）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-22T00:50:38.037

您没有提供太多信息，但除非您已经是 Oracle 专家，否则我认为没有理由选择 Oracle XE 而不是 PostgreSQL。PostgreSQL 将永远是免费的，并且功能更强大，可扩展性更强。

您可以选择在 Windows、Mac OS X 或 Linux 上运行 PostgreSQL。我认为 Oracle XE 仅限于 Windows 和 Linux。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-22T04:42:18.120

在选择数据库供应商时，请注意将您的应用程序的需求与供应商数据库产品的优势相匹配。并注意他们的弱点。

例如，如果您知道您的写入将与您的读取一样频繁，并且两者将同时发生，那么您将想知道您考虑的每个供应商如何处理并发性。如果您预计应用程序的负载会很重，那么依赖具有复杂锁升级方案的复杂锁管理器的供应商可能会给您带来麻烦。您将花费更多时间尝试解决数据库的锁管理器问题，而不是实际解决您的问题。

这是一个例子。每个数据库都有其优点和缺点需要考虑。做你的研究，找到一个比较供应商的网站，并做出一个平衡你的需求的选择。如果你能得到一份评估副本，那就更好地运行一些概念验证测试。编写脚本，以类似于您希望您的应用程序生成并从那里开始的内容来攻击数据库。当你在做的时候，从每个供应商那里获取脚本中 SQL 的查询计划，看看你可以从中学到什么关于每个供应商的优化器是如何工作的。

还有更多可以说的，但希望你能明白要点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-22T00:29:30.347

您选择的平台是什么？如果是 Windows，我会选择 Oracle 或 MySQL，因为我只听说过在 Windows 机器上运行 PostgreSQL 的坏消息。

此外，Oracle 具有更多的 GUI 配置方法，因此如果您不是 Linux 黑客，您可能会更喜欢它。

另一方面，Postgres 有一种优越的 SQL 控制台和控制台工具，一般来说，它更发达，更易于使用。Oracle 有更多工具，但不错的工具（如 PL/SQL 导航器）不是免费的，而且免费的工具简直糟透了。

请记住，选择数据库是一项长期决定，因此还要考虑您的应用程序需求可能发生的变化。如果您不准备最终在 Oracle 上花钱，最好选择 Postgres——安全的选择。对于大多数项目来说已经足够了。

# assembly - x86 跳转到一个地址

> ID：775108
> 
> 赞同：8
> 
> 时间：2009-04-21T23:26:41.590
> 
> 标签：assembly, x86, gdb

作为安全类的分配，我试图`__asm__("jmp 0xbffff994");`在我的代码中使用，但是当我在 gdb 中反汇编东西时，指令更改为`jmp 0xc8047e2a`. 知道为什么以及如何跳转到特定地址吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-04-21T23:34:28.653

可能是因为它是跳转到相对地址，并且链接器或加载器已经移动了您的代码。尝试将地址放入变量中，然后执行以下操作：

```
jmp dword [var] 
```

或者：

```
push 0xbffff994
ret 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T23:36:54.327

在编译时很难确定确切的地址，您是否尝试过使用标签？将它们与 jmp 一起使用更为常见。

例子：

```
start:
 jmp exit

exit:
 ret 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T23:34:15.223

Daniel 解释了为什么你的跳跃和你编程的不一样。它与目标文件和链接有关。

如果要跳转到特定地址，最好使用调试器或反汇编程序修补跳转。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T23:35:43.113

在我的系统（gcc 版本 4.2.4，Ubuntu）上，这在 disassmbley（洞察力）上看起来不错：

```
主函数（）
{
asm("jmp 0xbffff994");
返回0；
};       

```

分解结果（洞察力）：

```
        0x8048344 : lea 0x4(%esp),%ecx
- 0x8048348 : 和 $0xfffffff0,%esp
- 0x804834b : pushl -0x4(%ecx)
- 0x804834e : 推送 %ebp
- 0x804834f : 移动 %esp,%ebp
- 0x8048351：推送 %ecx
- 0x8048352：jmp 0xbffff994
- 0x8048357 : 移动 $0x0,%eax
- 0x804835c：弹出 %ecx
- 0x804835d：弹出 %ebp
- 0x804835e : lea -0x4(%ecx),%esp
- 0x8048361 : 回复

```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T23:42:04.377

我建议使用十六进制编辑器，如果只是一次性的，只需更改值。

# php - Codeigniter:$query->free_result() 使用活动记录时？

> ID：775111
> 
> 赞同：11
> 
> 时间：2009-04-21T23:29:08.073
> 
> 标签：php, mysql, activerecord, codeigniter

在我从 CodeIgniter 模型中的活动记录查询中完成我的结果集之后，我应该使用`$query->free_result()`ActiveRecord 还是自动这样做？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-04-21T23:58:32.980

PHP 将在您的脚本完成后清理所有内容。但是，如果您在循环中有大量查询，则每次迭代后都不会清理结果。

因此，如果您在循环中运行大量查询，您可能需要 free_result() 来清理内存。否则，没有必要。有关详细信息，请参见此处：

[https://www.codeigniter.com/user_guide/database/results.html](https://www.codeigniter.com/user_guide/database/results.html)

# c# - 我将如何将其编写为单个 LINQ 查询？

> ID：775114
> 
> 赞同：2
> 
> 时间：2009-04-21T23:30:27.417
> 
> 标签：c#, .net, linq, .net-3.5

使用以下逻辑，单个 LINQ 查询的正确语法是什么？

> `If Branch is Service, I want its parent, otherwise I want Branch.`

您能否批评我的尝试并让我知道如何改进它？

```
int branchId = 21;
var t = ctx.BranchInfos.Single(p => p.BranchID == branchId );
if (t.Type == BranchType.Service.ToString())
{
    t = ctx.BranchInfos.Single(p => p.BranchID == t.Parent);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-21T23:50:39.583

我建议，如果仅在一个地方需要这样做，那么您现在拥有的内容是相当清楚的，应该保留。

如果您经常这样做，请执行以下操作：

```
public static BranchInfo BranchOrServiceParent(
    this IEnumerable<BranchInfo> input)
{ 
    var t = BranchInfos.Single(p => p.BranchID == branchId);
    if (t.Type == BranchType.Service.ToString())    
        t = input.BranchInfos.Single(p => p.BranchID == t.Parent);
    return t;
} 
```

然后使用它很简单：

```
int branchId = 21;
var t = ctx.BranchInfos.BranchOrServiceParent(); 
```

如果您随后需要以清晰的方式参数化/更改事物，则可以。

如果您随后发现两次*可能*的数据库访问是性能问题，那么您可以尝试复杂的 Linq 查询，或者接受这可能实际上需要由存储过程来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T23:37:37.337

我很确定您可以使用单个 LINQ 语句来完成，但我同样确定您不应该这样做。它不会提高可读性，也不会提高性能。

```
var t = ctx.BranchInfos.Single(x =>
  (
    x.BranchID == branchID &&
    x.Type != BranchType.Service.ToSting()
  )
  ||
  (
    ctx.BranchInfos.Any(
      y.BranchID == branchID) &&
      y.Type == BranchType.Service.ToSting()) &&
    x.BranchID == ctx.BranchInfos.Single(
      y.BranchID == branchID) &&
      y.Type == BranchType.Service.ToSting()).ParentID
  )
); 
```

不错，不是吗？:DI 仍然建议不要使用它。第一种情况很简单 - 如果项目具有正确的 ID 并且不是服务类型，我们就有匹配项。

第二种情况更棘手。我们必须检查该项目是否具有来自具有提供的 ID 的项目的 ParentID 属性的 ID，但前提是具有提供的 ID 的项目是服务类型。因为我们在检查时不知道是否有提供的ID和类型Service的项目，所以我们必须首先检查`Any()`是否有这样的项目，并依赖于条件评估`and`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T23:40:25.020

```
var t = ctx.BranchInfos.Single(
  p => (p.BranchID == branchId && p.Type != BranchType.Service.ToString) ||
       (p.BranchID == GetBranchParentId(branchId) && p.Type == BranchType.Service.ToString)); 
```

其中 GetBranchParentId 是一个函数，它返回分支的 BranchId，其 id 作为参数传递。

但是，我喜欢你的原始代码，所以我不会使用单个查询来获取我的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-21T23:47:56.097

除非我搞砸了逻辑，否则这可能会为您提供所需的东西。

编辑：不同的方法

```
var t = ctx.BranchInfos.Where(p.BranchID == branchId).First(p => p.Type == BranchType.Service.ToString() ? p.Parent : p); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-21T23:49:26.823

这可能会起作用，但有点尴尬。

```
var t = ctx.BranchInfos.Where(p => p.BranchID == branchId)
    .Select(p => 
      p.Type != BranchType.Service.ToString() 
      ? p 
      : ctx.BranchInfos.Single(t => p.Parent == t.BranchId)).FirstOrDefault(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-21T23:52:44.790

我相信以下内容等同于您的代码示例。我添加了一些模拟代码来将其变成一个独立的示例。

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            Context ctx = new Context();
            ctx.BranchInfos.Add(new BranchInfo() { Type = "NonService", BranchID = 20, Parent = 0 });
            ctx.BranchInfos.Add(new BranchInfo() { Type = "Service", BranchID = 21, Parent = 20 });
            ctx.BranchInfos.Add(new BranchInfo() { Type = "NonService", BranchID = 30, Parent = 20 });

            int branchId = 21;

            var t = (from a in ctx.BranchInfos
                     where a.BranchID == branchId
                     select a.Type != BranchType.Service.ToString() ? a :
                     (from b in ctx.BranchInfos
                      where b.BranchID == a.Parent
                      select b).Single()).Single();

            Console.WriteLine(t.BranchID); // Prints 20
        }

        class Context
        {
            public List<BranchInfo> BranchInfos = new List<BranchInfo>();
        }

        class BranchInfo
        {
            public string Type;
            public int BranchID;
            public int Parent;
        }

        enum BranchType
        {
            Service = 0
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-21T23:58:30.547

```
var t = ctx.BranchInfos.Where(p =>
 (
   p.BranchID == branchID &&
   p.Type != BranchType.Service.ToSting()
 )
 ||
 (
   p.Type == BranchType.Service.ToSting() &&
   ctx.BranchInfos.Where(p => p.BranchID == branchID).FirstOrDefault() != null &&
   p.BranchID == ctx.BranchInfos.Where(p => p.BranchID == branchID).FirstOrDefault().ParentID
 )).FirstOrDefault(); 
```

这里的逻辑是：（如果类型是服务，则通过 ID 获取我的分支）或（如果分支类型是服务，则获取我知道子 ID 的分支的父级）

还：

即使那里有一个子查询，它也会评估为对数据库的一次命中，因为您在子查询中使用了相同的 Datacontext。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-22T03:20:49.173

提供的 BranchInfo.Parent 与 BranchInfo 的类型相同：

```
int branchID;
var branchOrParent = db.BranchInfos
    .Where(b => b.BranchID == branchID)
    .Select(b => b.Type == BranchType.Service.ToString() ? b.Parent : b)
    .FirstOrDefault(); 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2009-04-21T23:46:06.240

我认为你可以这样做：

var t = ctx.BranchInfos.FirstOrDefault(p => p.BranchID == branchId || p.BranchID == t.Parent);

麦克风

# ruby-on-rails - Rails：在无表活动记录中模拟关系

> ID：775115
> 
> 赞同：0
> 
> 时间：2009-04-21T23:30:43.233
> 
> 标签：ruby-on-rails

我正在使用 BaseWithoutTable 插件来扩展 ActiveRecord。这允许我创建没有基础表的模型（我从 Web 服务获取数据）。我希望我的网络应用程序保持安静，但是我很难在没有关系的情况下做到这一点。

更具体地说，假设我有一个书籍模型和一个作者模型，并且我从 Web 服务中获取这两种资源。我想访问 /authors/1/books 等图书资源。

看来我可以选择两条路线。首先，破解关系（belongs_to，has_many），这样我就可以定义自己的关系而不需要外键。其次，我可以构建自定义路由和控制器方法，让我可以访问之前的 url。

如果有人对如何做到这一点有任何想法，我将不胜感激。

谢谢，如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T23:50:31.317

对于给定的 url，您可以执行以下操作。

/作者/1/书

```
class Books < ApplicationController
  before :find_author

  def show
   @books = Books.get_from_web_service_for_author(@author)
  end

  def find_author
    @author = params[:author_id]
  end
end 
```

您需要定义访问 Web 服务的方法，并且还需要在路由中定义嵌套资源。

# r - 在函数体中不提及函数参数如何使用？

> ID：775116
> 
> 赞同：7
> 
> 时间：2009-04-21T23:30:47.133
> 
> 标签：r

我一直在尝试更多地了解 R（和编写 C 扩展），我认为阅读一些知名包的源代码可能会有所帮助。我决定从 rpart 开始，它被定义为：

```
rpart <- function(formula, data, weights, subset,
       na.action=na.rpart, method, model=FALSE, x=FALSE, y=TRUE,
       parms, control, cost, ...) 
```

我对源代码进行了快速搜索，但我没有看到函数体中任何地方提到的公式，但我知道 rpart 以某种方式使用了该参数。rpart 是如何使用公式而其名称不在函数体中的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-22T09:32:47.140

这很棘手：

```
m <- match.call(expand.dots = FALSE)
# ...
m[[1L]] <- as.name("model.frame")
m <- eval(m, parent.frame()) 
```

该函数用于`match.call`找出它是如何被调用的，修改调用以替换被调用函数`model.frame`，并`eval`使用它接收到的参数调用它（尽管我替换的部分`# ...`删除了几个参数），并`model.frame`使用`formula`参数。`match.call`请参阅、`eval`和的文档`model.frame`并进行一些实验，例如尝试了解此处发生的情况：

```
f <- function(formula, data) { 
  m <- match.call()
  m[[1L]] <- as.name('model.frame')
  eval(m, parent.frame())
}
f(x ~ y)
Error in eval(expr, envir, enclos) : object 'x' not found
x <- c(1,2,3)
f(x ~ y)
Error in eval(expr, envir, enclos) : object 'y' not found
y <- c(3,4,5)
f(x ~ y)
  x y
1 1 3
2 2 4
3 3 5
d <- as.data.frame(matrix(c(1,2,3,4),nrow=2))
names(d) <- c('foo', 'bar')
f(foo ~ bar, d)
  foo bar
1   1   3
2   2   4 
```

# fedex - FedEx 和 UPS 追踪 API

> ID：775119
> 
> 赞同：0
> 
> 时间：2009-04-21T23:32:01.983
> 
> 标签：fedex, ups

任何熟悉 FedEx 或 UPS API 的人。是否可以计算包裹的“保证交货日期”。我希望能够判断包裹是否迟到。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-12T17:59:26.910

您必须使用 Tracking API，并且响应将包含此 XML 格式的信息。我认为该属性是“OrderStatus”，Delivered 的代码是“011”。您应该下载[UPS Shipping API](http://www.ups.com/bussol?loc=en_US&viewID=productView&contentID=ct1_sol_sol_olt "UPS 运输 API")并阅读 Track 规范和示例。

至于“保证交货日期”，它似乎仅适用于 UPS Freight LTL Guaranteed（大多数 UPS 选项不保证）但是您可以**将** `/TrackResponse/Shipment/**ScheduledDeliveryDate**`（和时间）与`/TrackResponse/Shipment/DeliveryDetails/**DeliveryDate**/Date`.

而且，如果货物有保证日期，那么计划日期应该等于交货日期。

# xna - 如何在 XNA 中编写一个简单的 .txt 内容处理器？

> ID：775125
> 
> 赞同：3
> 
> 时间：2009-04-21T23:34:55.737
> 
> 标签：xna

我真的不明白内容导入器/处理器在 XNA 中是如何工作的。

我需要阅读以下形式的文本文件（Content/levels/level1.txt）：

```
x x
x x
x x 
```

其中 x 只是整数，放入 int[,] 数组中。

关于编写简单的 .txt 导入器的任何提示？？？通过搜索 google/msdn，我只找到了 .x/.fbx 文件导入器示例。而且它们似乎太复杂了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-22T05:53:58.353

你真的需要处理文本文件吗？如果没有，那么您可能可以跳过大部分内容管道。

就像是：

```
string filename = "Content/TextFiles/sometext.txt";
string path = Path.Combine(StorageContainer.TitleLocation, filename);

string lineOfText;
StreamReader sr = new StreamReader(path);
while ((lineOfText = sr.ReadLine()) != null)
{
  // do something
} 
```

此外，请务必在您添加的文本文件上将“构建操作”设置为“无”，并将“复制到输出目录”设置为“如果较新则复制”。这告诉内容管道不要编译文本文件，而是将其复制到输出目录以供原样使用。

我从 Microsoft 提供的 RacingGame 示例中得到了这个（或多或少）。它放弃了大部分内容管道，只是为其大部分关卡数据加载和处理文本文件 (XML)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2011-02-02T19:24:55.300

XNA 4.0 使用

```
System.IO.Stream stream = TitleContainer.OpenStream("tilename.txt"); 
```

请参阅[http://msdn.microsoft.com/en-us/library/bb199094.aspx](http://msdn.microsoft.com/en-us/library/bb199094.aspx)和[http://blogs.msdn.com/b/shawnhar/archive/2010/12/09/reading-files-in- xna-game-studio-4-0.aspx](http://blogs.msdn.com/b/shawnhar/archive/2010/12/09/reading-files-in-xna-game-studio-4-0.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-21T23:41:27.327

那里似乎没有很多信息，但这篇博文确实指出了如何使用 XNA 通过代码加载 .txt 文件。

希望这可以帮助您将文件放入内存，从那里以您喜欢的任何方式解析它应该很简单。

[XNA 3.0 - 在 Xbox 上读取文本文件](http://www.johnwordsworth.com/blog/2009-01-02/xna-30-reading-text-files-on-the-xbox/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-21T23:42:52.363

[http://www.ziggyware.com/readarticle.php?article_id=69](http://www.ziggyware.com/readarticle.php?article_id=69)可能是一个不错的起点。它涵盖了创建一个基本的内容处理器。

# css - Blackberry 字体系列

> ID：775135
> 
> 赞同：1
> 
> 时间：2009-04-21T23:40:00.000
> 
> 标签：css, blackberry, mobile, fonts

我目前正在制作我们应用程序的移动版本，并且正在尝试查找列出`Font`黑莓设备支持的资源的资源。我在黑莓开发网站和论坛上四处搜索，但运气不佳。

到目前为止，我使用 CSS 指定的任何字体似乎都不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-22T00:05:09.440

如果您找不到支持的字体名称列表，您可以简单地指定字体系列。这些是 WCSS (WAP CSS) 中使用的字体系列：

*   `serif`
    例子： *时代新罗马*
*   `sans-serif`
    示例： *Arial、Helvetica*
*   `monospace`
    例子： *快递*
*   `cursive`
    示例： *Zapf-Chancery、Caflisch Script*
*   `fantasy`
    示例： *西部、小动物*

RIM 的内容设计指南：
**最佳实践：在 Web 内容中有效地使用字体**

*   明智地修改字体。尽可能为 BlackBerry® Browser 使用用户定义的默认字体，除非您特别需要选择不同的字体。尽管使用用户定义的默认字体使得控制布局和外观变得更加困难，但它避免了选择用户觉得难以阅读的字体或字体大小的问题。用户要么将默认 BlackBerry Browser 字体更改为合适的字体或字体大小，要么接受主题指定的默认字体。
*   尽可能避免使用绝对字体大小。如果更改字体大小，请使用相对大小，例如更大、更小、xx-large 等。在标准文本流中，例如一系列段落，更改字体大小是不必要的，因为文本会换行。请记住，用户可以为 BlackBerry Browser 指定最小字体大小，因此小于指定最小字体大小的相对或绝对字体大小不会对用户设备产生影响。

您可能感兴趣的一些资源：

*   [开发人员文档（黑莓浏览器）](http://na.blackberry.com/eng/support/docs/subcategories/?userType=21&category=BlackBerry+Browser) - 包括 CSS 指南。
*   [浏览器规范（Flash 演示）](http://www.blackberry.com/DevMediaLibrary/view.do?name=browser)
*   [WCSS 教程](http://www.developershome.com/wap/wcss/)
*   [所有黑莓设备的用户代理配置文件](http://www.google.com/search?q=site%3Awww.blackberry.net%2Fgo%2Fmobile%2Fprofiles%2Fuaprof)- 显示支持的 mime 类型、字符集、屏幕大小、Java 支持等。

# multithreading - 什么是线程？

> ID：775139
> 
> 赞同：0
> 
> 时间：2009-04-21T23:41:58.760
> 
> 标签：multithreading

1.  什么是线程？
2.  为什么你认为我应该关心他们？
3.  你会建议我去哪里学习更多（我在德尔福工作，如果这很重要的话）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-21T23:45:48.673

1.  [维基百科：线程（计算）](http://en.wikipedia.org/wiki/Thread_(computer_science))
2.  [维基百科：线程（计算）- 多线程](http://en.wikipedia.org/wiki/Thread_%28computing%29#Multithreading)
3.  [Delphi中的线程](http://delphi.about.com/od/kbthread/Threading_in_Delphi.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-21T23:47:14.460

线程允许您在 CPU 中使用多个处理器或内核，因此当在特定机器上正确使用时，它们可以提供巨大的加速。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-22T00:25:22.433

来自“老前辈”的一点历史：当我第一次听说线程时，它们被称为“控制线程”。

较早流行的可移植线程库之一是（现在仍然是）“pthreads”或“POSIX Threads”。它源自 Digital Equipment Corporation 的“Concert Multithread Architecture”。值得注意的是 pthreads 的[文档](http://www.devdaily.com/unix/man/man3/pthread_create.3thr.shtml)仍然使用术语“控制线程”。从该功能的在线手册页`pthread_create`：

> pthread_create 创建一个与调用线程同时执行的新控制线程。

您应该关心线程，因为您在计算机上所做的一切都是在线程中完成的。即使是最简单的“Hello, world”程序也至少包含一个线程。

多线程让事情变得更有趣。事实上，如果你不是很小心，事情就会变得*太有趣了！*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-24T10:16:47.910

1.  您的程序/应用程序可以同时做的“事情”的数量，而不受它在特定时间正在做的其他“事情”的影响。

2.  支持示例 1.假设您的程序是一辆汽车，但您没有使用线程，打开门时，门被卡住了，您无法关闭它。现在您无法启动汽车，因为只有一个动作可用，并且在前一个动作结束之前您无法启动任何其他动作。如果您要在程序（汽车）中使用线程，那么您将开着车门行驶；-)
3.  线程是什么相当简单，使用它取决于语言，所以搜索正确的文档并获得一些乐趣 :)

# excel-formula - 这个 Excel 公式应该做什么？

> ID：775140
> 
> 赞同：3
> 
> 时间：2009-04-21T23:42:03.643
> 
> 标签：excel-formula

我有一个电子表格，我应该在其中修复损坏的公式。有谁知道这是“打算”做什么？

```
=#REF!A33 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-21T23:45:28.473

这意味着对已删除的工作表或命名范围的引用。

换句话说，它可能是

```
=Worksheet2!A33 
```

但 Worksheet2 已被删除。

可能附近的单元格具有相似的公式，仍然指向有效位置，您可以重新创建它指向的内容......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-21T23:45:31.500

当电子表格公式包含不正确的单元格引用时，会出现无效的单元格引用错误。

请参阅：[http ://spreadsheets.about.com/od/formulatips/qt/REF_error.htm](http://spreadsheets.about.com/od/formulatips/qt/REF_error.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-21T23:46:26.363

它可能正在引用另一张纸上的单元格，该单元格已被删除

所以

```
 =Sheet1!A33 
```

变成

```
 =#REF!A33 
```

# c++ - C++ 隔离自由列表

> ID：775144
> 
> 赞同：-1
> 
> 时间：2009-04-21T23:43:09.057
> 
> 标签：c++

我需要使用隔离的空闲列表来完成家庭作业，我想知道 STL 或其他库是否已经编写了这些，所以我不必重新发明轮子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-21T23:54:13.787

我不认为 STL 有任何东西，但看起来 Boost 库可能有它，[http://www.boost.org/doc/libs/1_38_0/libs/pool/doc/interfaces/simple_segregated_storage.html](http://www.boost.org/doc/libs/1_38_0/libs/pool/doc/interfaces/simple_segregated_storage.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T23:53:26.737

我使用的 STL 实现支持分配器作为模板参数，您可以使用它来使容器**使用**您的隔离空闲列表，但您仍然需要编写自己的。

# c# - WPF 在项目上添加文本块并将其绑定到文本框

> ID：775146
> 
> 赞同：1
> 
> 时间：2009-04-21T23:43:45.747
> 
> 标签：c#, wpf, diagram

我有一个图表设计器程序，当用户右键单击形状并在属性窗口中写入形状名称时，我想向形状（这些是路径对象）添加文本。我将上下文菜单属性添加到形状，当用户单击上下文菜单中的“属性”时，会打开一个包含文本框和按钮的新窗口。我可以向形状添加文本块，但无法将属性窗口中的文本框绑定到形状中的文本块。我想要的是当用户在属性窗口的文本框中输入文本并单击“确定”按钮时，形状上的文本块会更改为用户输入的文本。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T00:08:21.227

您可以使用 ElementName 绑定将一个控件绑定到另一个：

```
<TextBlock Text="{Binding Text, ElementName=TextBoxInPropertiesWindow}" /> 
```

但在这种情况下，这可能不是您想要的，因为听起来属性窗口和文本框很快就会消失和/或被重用于编辑其他图表元素。

因此，您确实需要考虑将文本框和文本块绑定到底层数据模型/视图模型。这样，文本框可以更新模型（文本框销毁后仍会保留），然后文本块将更新以响应模型的变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T00:15:55.233

将选定形状的数据上下文绑定到窗口或控制器上名为 SelectedItem 的属性，然后将属性窗口的数据上下文绑定到 SelectedItem。

# nhibernate - Fluent NHibernate HasMany 没有更新 FK

> ID：775147
> 
> 赞同：2
> 
> 时间：2009-04-21T23:44:36.430
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping

我正在使用最新的 Fluent NHibernate lib (0.1.0.452)，但在保存子实体时遇到问题。

我认为这是相当常见的情况......我有一个映射的父母：

```
HasMany<Packet>(x => x.Packets)
            .Cascade.All()
            .KeyColumnNames.Add("OrderId"); 
```

和一个简单的 Packet 类（在域模型和 FNH 映射中）没有对父级的任何引用。生成的是一个正确的 Packets 表，其中包含一个名为 OrderId 的列。不工作的是储蓄。每当我尝试保存父对象时，子对象也会被保存，但 FK 保持不变。我检查了 SQL，在 INSERT 语句中 OrderId 甚至没有出现！

```
INSERT INTO KolporterOrders (CargoDescription, SendDate, [more cols omitted] ) VALUES ('order no. 49', '2009-04-22  00:57:44', [more values omitted])
SELECT LAST_INSERT_ID()
INSERT INTO Packets (Weight, Width, Height, Depth) VALUES ('To5Kg', 1, 1, 1)
SELECT LAST_INSERT_ID() 
```

如您所见，最后一个 INSERT 中完全缺少 OrderId。

我还检查了生成的 NH 映射，似乎没问题：

```
<bag name="Packets" cascade="all">
    <key column="OrderId" />
    <one-to-many class="Company.Product.Core.Packet, Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
</bag> 
```

我尝试将 Cascade 设置为不同的值。我什至添加了对 PacketMap（FNH 映射类）的引用。

为什么没有插入 OrderId 的任何想法？

编辑：忘了提：如果重要的话，我正在使用 MySQL5。

Edit2：上面的 FNH 映射生成带包（不是集合）的 hbm - 我编辑了它。用于保存的 C# 代码：

```
var order = new Order(); 
NHSession.Current.SaveOrUpdate(order); //yes, order.Packets.Count == 1 here

///Order.cs, Order ctor
public Order()
    {
        CreateDate = DateTime.Now;
        OrderState = KolporterOrderState.New;
        Packets = new List<Packet>();
        Packets.Add(new Packet()
        {
            Depth = 1,
            Height = 1,
            Width = 1,
            Weight = PacketWeight.To5Kg
        });
    } 
```

会话在 EndRequest 处刷新并关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T14:32:47.683

好吧，我的错。我在 global.asax 的 ApplicationStart 中对其进行了测试，因此尚未创建请求，因此未刷新会话。当我在一个简单的 ConsoleApp 项目上对其进行测试时，当我看到刷新实际上会导致 FK col 更新时，我意识到了这一点。

无论如何：感谢您的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T23:53:43.647

在“vanilla”父子对象模型中，您必须更新子对象对父对象的引用，以使 NHibernate 更新子记录对父对象的引用。

在“反转”的父子对象模型中，您必须修改父对象的子对象集合，以使 NHibernate 更新子记录对父对象的引用。

看来您可能想要使用“倒置”的父子对象模型。

在 XML 映射中，您需要

```
<set name="Packets" cascade="all" inverse="true">
    <key column="OrderId" />
    <one-to-many class="Company.Product.Core.Packet, Core,
        Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
</set> 
```

在 Fluent 映射中，您需要

```
HasMany<Packet>(x => x.Packets)
    .Cascade.All()
    .Inverse()
    .KeyColumnNames.Add("OrderId")
; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T11:31:19.087

这真的很奇怪。您应该检查后续更新，NHibernate 有时会在之后更新外键，然后它不会出现在插入中。

确保 OrderId 在 Packets 表中没有多重含义。要检查这一点，请将 OrderId 的名称更改为其他名称。

级联与它无关。它仅控制您是否需要明确保存孩子。

# c# - 将word文档另存为图片

> ID：775153
> 
> 赞同：5
> 
> 时间：2009-04-21T23:46:06.693
> 
> 标签：c#, image, ms-word

我正在使用以下代码将 Word Doc 转换为图像文件。但是图片显得太大，内容不合适 - 有没有办法渲染图片或保存图片大小？

```
 private void btnConvert_Click(object sender, EventArgs e)
    {
        if (string.IsNullOrEmpty(txtFileName.Text))
        {
            MessageBox.Show("Choose a document to convert", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            txtFileName.Focus();
            return;
        }

        ApplicationClass wordApp = new ApplicationClass();
        object objectMissing = Missing.Value;

        try
        {
            object fileName = txtFileName.Text;
            FileStream fs = new FileStream(fileName.ToString(), FileMode.Open, FileAccess.Read);
            Byte[] data = new Byte[fs.Length];
            fs.Read(data, 0, data.Length);

            Document doc = wordApp.Documents.Open(ref fileName, ref objectMissing, ref objectMissing, ref objectMissing, ref objectMissing, ref objectMissing, ref objectMissing,
                                   ref objectMissing, ref objectMissing, ref objectMissing, ref objectMissing, ref objectMissing, ref objectMissing,
                                   ref objectMissing, ref objectMissing, ref objectMissing);

            byte[] range = (byte[]) wordApp.ActiveDocument.Content.EnhMetaFileBits;
            if (range != null)
            {
                MemoryStream ms = new MemoryStream(range);
                Metafile mf = new Metafile(ms);
                picImage.Height = mf.Height;
                picImage.Width = mf.Width;
                mf.Save("c:\\test.png", ImageFormat.Png);
                picImage.Image = Image.FromFile("c:\\test.png");
            }
        }
        finally
        {
            wordApp.Quit(ref objectMissing, ref objectMissing, ref objectMissing);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-23T20:02:49.197

结果很简单：

```
 private void renderImage(byte[] imageData)
    {
        using (MemoryStream ms = new MemoryStream(imageData))
        {
            Image image = Image.FromStream(ms);
            picImage.Image = image;
        }
    } 
```

这将第一页显示为图像，但也应该很容易呈现其他页面。

感谢所有回答的人

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T11:32:52.093

将其转换为任何大小，然后使用 imagemagick：[http](http://www.imagemagick.org/script/index.php) ://www.imagemagick.org/script/index.php调整大小或执行您需要的任何其他后处理（它可以做很多）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T03:07:31.293

您还可以在保存后以编程方式调整图像大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T00:57:28.347

如何使用 Microsoft Document Image Writer 将文档打印为 TIFF？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T05:00:01.747

将内容复制到 Powerpoint（如果可以复制），然后您可以将幻灯片保存为所需格式的图像

# python - 根据商店营业时间有效地确定企业是否营业

> ID：775161
> 
> 赞同：6
> 
> 时间：2009-04-21T23:48:14.503
> 
> 标签：python, mysql, performance, solr

给定时间（例如，目前周二下午 4:24），我希望能够从一组企业中选择当前开放的所有企业。

*   我有一周中每一天的每家企业的营业和关闭时间
*   假设一家企业只能在每小时的 00、15、30、45 分钟标记开/关
*   我假设每周都有相同的时间表。
*   我最感兴趣的是能够快速查找在某个时间开放的一组业务，而不是数据的空间需求。
*   请注意，有些我一天晚上 11 点开门，第二天凌晨 1 点关门。
*   假期无关紧要 - 我会单独处理这些

存储这些打开/关闭时间的最有效方法是什么，以便通过单个时间/星期几元组我可以**快速**找出哪些企业是开放的？

我正在使用 Python、SOLR 和 mysql。我希望能够在 SOLR 中进行查询。但坦率地说，我愿意接受任何建议和替代方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-22T00:25:59.623

如果您愿意一次只看一个星期，您可以将所有开/关时间规范化为自一周开始以来设置的分钟数，例如周日 0 小时。对于每个商店，您创建多个 [startTime, endTime, storeId] 形式的元组。（对于跨越周日午夜的几个小时，您必须创建两个元组，一个到周末，一个从一周开始）。这组元组将在 startTime 和 endTime 上都被索引（例如，使用您将预处理的树）。元组不应该那么大：一周只有大约 10k 分钟，可以容纳 2 个字节。这种结构在具有适当索引的 MySQL 表中将是优雅的，并且在信息更改时对不断插入和删除记录非常有弹性。您的查询将只是“

如果信息不经常更改，并且您希望查找速度非常快，则可以预先解决所有可能的查询并缓存结果。例如，一周内只有 672 个刻钟。有了一个企业列表，每个企业都有一个像 Brandon Rhodes 的解决方案一样的开放和关闭时间列表，您可以简单地在一周内每隔 15 分钟迭代一次，找出谁在营业，然后将答案存储在查找表中或内存列表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-22T00:08:07.357

另一位受访者提到的位图字段将非常有效，但如果您希望能够处理半小时或四分之一小时的时间，则会变得混乱，因为您必须每次在算术上增加位数和字段的设计您遇到了必须匹配的新分辨率。

我会尝试将值作为日期时间存储在列表中：

```
openclosings = [ open1, close1, open2, close2, ... ] 
```

然后，我将在其内置的“bisect”模块中使用 Python 的“bisect_right()”函数在快速 O(log n) 时间内找到您的查询时间“适合”的列表中的哪个位置。然后，查看返回的索引。如果它是偶数（0、2、4...），则时间介于“关闭”时间之一和下一个“开放”时间之间，因此商店关闭。相反，如果二等分索引是奇数（1、3、5...），则时间已落在开店时间和关店时间之间，商店开张。

不如位图快，但您不必担心分辨率，而且我想不出另一个如此优雅的 O(log n) 解决方案。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-22T01:13:48.807

您说您正在使用 SOLR，不关心存储，并且希望查找速度快。然后，不要存储打开/关闭元组，而是以您需要的粒度级别（15 分钟）为每个打开的时间块索引一个条目。对于编码本身，您可以只使用累积小时：分钟。

例如，周一下午 4 点到 5 点营业的商店会为 [40:00, 40:15, 40:30, 40:45] 添加索引值。周一下午 4:24 的查询将被规范化为 40:15，因此与该商店文档匹配。

乍一看，这似乎效率低下，但对于索引速度和空间来说，这是一个相对较小的常数损失。并使搜索尽可能快。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-21T23:52:58.673

抱歉，我没有一个简单的答案，但我可以告诉你，作为 90 年代后期一家公司的开发团队经理，我们的任务是解决这个问题，这很困难。

每周的工作时间并不困难，可以使用相对较小的位掩码（168 位 = 每周每小时 1 个）来完成，诀窍是每周二交替关闭的企业。

从位掩码开始，然后转到异常字段是我见过的最好的解决方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-22T14:18:22.507

在您的 Solr 索引中，不是将每个业务作为一个以小时为单位的文档进行索引，而是在一周内为每个业务的每个“零售会话”建立索引。

例如，如果 Joe 的咖啡店在周一至周六上午 6 点至晚上 9 点营业，周日不营业，您将索引六个不同的文档，每个文档都有两个索引字段，“open”和“close”。如果您的单位是 15 分钟间隔，则值的范围可以从 0 到 7*24*4。假设您对每个企业都有一个唯一的 ID，请将其存储在每个文档中，以便您可以将会话映射到企业。

然后你可以简单地在 Solr 中进行范围搜索：

打开：[* TO N] 并关闭：[N+1 TO *]

其中 N 计算到当前时间所在的第 N 个 15 分钟间隔。例如，如果是周三上午 10:10，您的查询将是：

打开：[* TO 112] 并关闭：[113 TO *]

又名“查找在周三上午 10:00 或之前开始并在周三上午 10:15 或之后结束的会话”

如果您想在搜索中包含其他条件，例如位置或产品，您还需要将其与每个会话文档一起编入索引。这有点多余，但是如果您的索引不是很大，那应该不是问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-22T02:03:30.980

您是否查看过有多少种独特的开/关时间组合？如果数量不多，则制作唯一组合的参考表，并针对每个业务存储相应条目的索引。然后您只需搜索参考表，然后找到具有这些索引的业务。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-22T01:18:43.833

如果你能很好地控制你的数据，我看到了一个简单的解决方案，类似于@Sebastian 的。遵循创建元组的建议，除了以 [time=startTime, storeId] 和 [time=endTime, storeId] 的形式创建它们，然后在列表中对它们进行排序。要了解商店是否营业，只需执行如下查询：

```
select storeId
from table
where time <= '@1'
group by storeId
having count(storeId) % 2 == 1 
```

为了优化这一点，您可以在每个时间 t 构建一个查找表，存储在 t 开放的商店，以及 t 和 t+1 之间的商店开放/关闭（对于 t 的任何分组）。

然而，这具有更难维护的缺点（重叠的打开/关闭需要合并到更长的打开关闭期间）。

# asp.net - 覆盖 web.config 根文件以启用 customerrors 标记

> ID：775162
> 
> 赞同：1
> 
> 时间：2009-04-21T23:48:52.800
> 
> 标签：asp.net, iis, web-config, custom-errors

我有一种情况，我想捕获 HTML 页面（不仅仅是 aspx 页面）触发的 404 错误，但我只能访问我网站根文件夹的 web.config 和所有子目录（注意，我没有可以访问实际的 IIS 服务器，但我无法创建应用程序或更改设置）

所以我确实在子目录上尝试了 web.config customerrors，它们确实有效，仅适用于 ASPX 页面，而不适用于 HTML 页面，有人知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T00:11:54.743

请注意，上面的两个答案对于通常情况是正确的。但是，可以将 IIS 6.0 及更低版本配置为通过 ASP.NET 处理 HTML 页面或其他任何内容。此外，IIS 7 彻底改变了一切——实际上，ASP.NET 管道现在*就是*IIS 管道，因此任何内容都可以通过任何 HttpModules 进行处理。

因此，在 IIS 7 及更高版本中，您可以为 ASPX 页面配置的任何内容，都可以为 HTML 页面进行配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T00:03:26.447

IIS 不解析 HTML 页面，因此不受 web.config 设置的影响。如果不配置 IIS 中的设置，我不知道有任何解决方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T00:06:34.083

比 Jeremy 所说的更具体一点，IIS 将不同的文件扩展名映射到不同的可执行文件。默认情况下，它将被配置为让 .NET 运行时处理 .aspx 文件（在这种情况下，您的 web.config 将被加载和使用），但它将直接为 .html 页面提供服务（因此退回到它自己的 404错误处理）。

烦人，但我认为除了控制 IIS 或将平面 html 页面制作成 aspx 页面（即使它们不包含实际的服务器端内容）之外，你无能为力，以欺骗 IIS 让 .NET处理它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T00:11:02.950

您可以查看 ASP.NET 的新路由功能：[http://msdn.microsoft.com/en-us/library/cc668201.aspx](http://msdn.microsoft.com/en-us/library/cc668201.aspx)。

# audio - waveInXXX 是否应用低通滤波器？

> ID：775164
> 
> 赞同：1
> 
> 时间：2009-04-21T23:50:21.987
> 
> 标签：audio, signal-processing, antialiasing

当我使用（win32）waveInXXX 函数以某个采样频率（比如 8kHZ，甚至可能更低）从麦克风收集样本时，系统/声卡是否对输入样本应用低通滤波器，或者我会得到混叠? 我应该在降低采样频率之前以更高的频率进行采样并自己进行过滤吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-24T15:08:21.797

有趣的问题。我不知道您将如何确定答案（缺乏实验）。我怀疑录音的实际采样率很可能是 44.1kHz（或 48kHz），然后 Windows 会执行 SRC，在这种情况下几乎肯定会应用低通滤波器。如果声卡本身以 8kHz 采样，人们会希望硬件会预先执行低通滤波器。

简而言之，除非您遇到混叠伪影问题，否则不要费心实施低通滤波器。

# c# - 观察者模式和委托

> ID：775165
> 
> 赞同：1
> 
> 时间：2009-04-21T23:50:25.323
> 
> 标签：c#, observer-pattern

我需要帮助来理解观察者模式和代表。我在另一个网站上找到了这段代码，我试图了解它实际上在做什么。有人可以帮我吗。

当我执行代码时，我收到两条消息“服务器已启动并正在运行”和“服务器已关闭，我们正在处理它，它很快就会回来”。我想我收到了两条消息，因为在 Main 中有一个 server.ServerStatus = true; 和 server.ServerStatus = false。但是，如果我注释掉 server.ServerStatus = true; 然后运行我得到消息“服务器已启动并正在运行”，但我预计只会看到“服务器已关闭，我们正在处理它，它很快就会回来。”。有人可以解释吗？苏珊

```
class Program
{
    static void Main(string[] args)
    {
        Server server = new Server();
        server.ServerStatusChanged += new EventHandler(ProcessServerStatus);
        server.ServerStatus = true; 
        server.ServerStatus = false;
        Console.Read();
    }

    public class Server
    {
        public event EventHandler ServerStatusChanged;
        private bool _ServerStatus;

        public bool ServerStatus
        {
            get { return this._ServerStatus; }
            set {
                if (this._ServerStatus == value) return; // Dont need to do anything;
                if (this.ServerStatusChanged != null) // make sure the invocation list is not empty  
                    ServerStatusChanged(value, new EventArgs());  // Firing Event
                this._ServerStatus = value; 
            } 
        }
    }

    public static void ProcessServerStatus(object sender, EventArgs e)
    {
        bool status = (bool)sender; 
        if (status)
            Console.WriteLine("Server is up and running");
        else
            Console.WriteLine("Server is down, We are working on it it will be back soon");

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T00:05:33.400

这是执行您想要的代码的代码。

注意 _initialized 变量。这是必需的，因为否则第一次不会发生任何事情。在它开始正常工作之前，您必须将状态设置为 True。

另外，你所描述的我并没有发生。我没有收到消息说它已启动并正在运行。我什么也没得到。

```
 class Program
{
    static void Main(string[] args)
    {
        Server server = new Server(); 
        server.ServerStatusChanged += new EventHandler(ProcessServerStatus); 
        //server.ServerStatus = true; 
        server.ServerStatus = false; 
        Console.Read();
    }

    public class Server
    {
        public event EventHandler ServerStatusChanged; 
        private bool _ServerStatus = false;
        private bool _initialized = false;
        public bool ServerStatus
        {
            get { return this._ServerStatus; }
            set
            {
                if (this._initialized == true && this._ServerStatus == value)
                    return; // Dont need to do anything;                
                else
                    this._initialized = true;
                if (this.ServerStatusChanged != null) // make sure the invocation list is not empty                      
                    ServerStatusChanged(value, new EventArgs());  // Firing Event                
                this._ServerStatus = value;
            }
        }
    }
    public static void ProcessServerStatus(object sender, EventArgs e)
    {
        bool status = (bool)sender;
        if (status)
            Console.WriteLine("Server is up and running");
        else Console.WriteLine("Server is down, We are working on it it will be back soon");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T23:56:34.467

这是一个活动注册...

```
server.ServerStatusChanged += new EventHandler(ProcessServerStatus); 
```

它说“只要有 ServerStatusChanged，就调用 ProcesServerStatus 方法。” 因此，当您将 ServerStatus 设置为 true 时，您会调用 ProcessServerStatus 并传递 true 并打印“Server is up...”；当您将其更改为 false 时，会触发另一个事件，但这次 ServerStatus 为 false，因此您会收到“服务器已关闭 ...”因此，您正在查看服务器状态并在服务器状态更改时执行某些操作 (ProcessServerStatus)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-21T23:57:12.843

基本上发生的情况是，您在 Main 中将 ServerStatus 设置为 true/false 的分配将调用 ServerStatus 属性的“set”函数。

在该函数中，将创建一个事件并将其触发到 ServerStatusChanged 处理程序，任何注册事件的人都将收到该事件。另请注意，仅当状态更改时才会触发该事件。

在这种情况下，Main 在

```
Server.ServerStatusChanged += new EventHandler(ProcessServerStatus); 
```

线。

由于您将 ServerStatus 设置为 true，然后在 Main 中设置为 false，因此会触发两个事件，导致您的控制台同时显示“服务器已启动并正在运行”和“服务器已关闭，我们正在处理它......”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T00:08:57.823

如果您以前没有遇到过观察者模式，可能会本能地认为所有方法调用都是静态完成的——我们在代码中调用的方法就是被调用的方法。然而，观察者模式可以让你更动态地做事。您可以在运行时说“嘿，当某某发生时，请告诉我！您可以通过调用某某方法让我知道”被观察的人会记录所有对它说过的人“当这种情况发生时发生这种情况，让我知道”——然后，当它发生时，它就是这样做的——让所有人都知道。这是通过保留必须调用的方法列表，然后在事件“触发”时调用它们来完成的。

该行：

```
server.ServerStatusChanged += new EventHandler(ProcessServerStatus); 
```

正在告诉服务器对象“嘿，当服务器状态发生变化时，请告诉我。您可以通过调用 ProcessServerStatus 方法让我知道”。所以，当这条线：

```
server.ServerStatus = true; 
```

运行时，它会触发 ServerStatusChanged 事件，该事件然后调用所有说“让我知道”的内容。所以它将调用该`ProcessServerStatus`方法，因为这是其列表中唯一的方法。

该列表中的每个方法都必须具有特定的方法签名；在这种情况下，`void ProcessServerStatus(object sender, EventArgs e)`。本`sender`例中的参数是服务器状态 - 您可以在以下行中看到：

```
ServerStatusChanged(value, new EventArgs()); 
```

因此，当`ProcessServerStatus`被调用时，它会将其转换为布尔值，并打印适当的字符串。

当我运行此代码时，它按预期工作 - 如果我注释掉该`serverStatus = true;`行，它不会打印任何内容（因为 _serverStatus 默认为 false，如果状态没有更改，则不会触发事件）。相反，如果我注释掉该`serverStatus = false;`行，它会显示“服务器已启动并正在运行”

# html - 网络上的数学方程式

> ID：775168
> 
> 赞同：45
> 
> 时间：2009-04-21T23:51:20.923
> 
> 标签：html, math, latex, equation, mathml

如何在网络上呈现数学方程式？我已经熟悉 LaTeX 的数学模式。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-03T10:03:12.427

其他答案已过时。截至 2012 年，**漂亮的数学很容易**编写和渲染。该技术称为[MathJax](http://www.mathjax.org/)。[你可以在MathOverflow](https://mathoverflow.net/questions/103844/how-to-show-this-holder-bound)和数百个数学博客上看到它的安静动作。

> MathJax 是一个开源的 JavaScript 数学显示引擎，适用于所有现代浏览器。不再为读者设置。没有更多的浏览器插件。没有更多的字体安装......它只是工作。

Mathjax 可靠且不引人注目，因此您只需要编写数学即可。您在 Tex (Latex) 中执行此操作，这是一种大多数科学家和数学家都熟悉的简洁语法（并且共享了数十年的优秀教程）。对于 Mathjax，您只需在 HTML 中的双美元符号之间内联编写 Tex 代码，例如。

> 当$$a \ne 0$$ 时，$$ax^2 + bx + c = 0$$ 有两种解，它们是 $$x = {-b \pm \sqrt{b^2-4ac} \超过 2a}.$$

要使用 Mathjax 来呈现您的数学，请在您的 HTML 标头中添加一个 Javascript 行：

```
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script> 
```

如果您在 Wordpress、Tumblr 或 Blogger 等平台上发布，他们的画廊中有插件可以执行此操作（[Wordpress](http://wordpress.org/extend/plugins/mathjax-latex/)）。

Mathjax 如何渲染数学？使用 Javascript，它可以在几分之一秒内将您的数学呈现为漂亮的 HTML 和 CSS（非常类似于 Latex）。如果浏览器支持 MathML，它也可以通过它呈现数学，但这并不重要。这是一个普遍的成功，因为最终用户的工作流程很简单，而不是因为它背后的技术。

如果您有帐户，您可以选择在 Wikipedia 上使用 Mathjax（通过 png 图像）。寻找`Special:Preferences`/外观。

* * *

MathML 是荒谬的。它既不可读也不可写（二次方程需要[800 个字符](http://aiju.de/rant/XML/MathML)- 在 Tex 中是 50）。它只是[另一种毫无意义的 XML 语言](http://www.dataspora.com/2009/08/xml-and-big-data/)。值得庆幸的是，在大多数浏览器支持它之前它已经过时了。它甚至不如 Tex 或 Mathjax 的 HTML-CSS 好*！*

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-04-21T23:55:28.153

事实证明，这有点痛苦。

您可以使用[MathML](http://www.w3.org/Math/)，但浏览器支持仍然不确定。如果您从乳胶开始，您有一些转换为 html 的选项，但它们通常最终都会将实际方程渲染为图像并将它们内联。

没什么漂亮的（除非你求助于 pdf 或其他东西）。什么是最好的将取决于内容的种类、方程的数量以及方程的复杂程度。

[这](http://www.cs.tut.fi/~jkorpela/math/)是一个体面的总结。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2011-03-20T09:52:16.633

我最喜欢的两种方法：

*   客户端：[MathJax](http://www.mathjax.org/)。在此处查看[一些示例](http://www.mathjax.org/demos/tex-samples/)。它非常易于使用和安装，其开发[得到了 AMS 和 SIAM](http://www.mathjax.org/sponsors/)等科研机构的支持。我希望这将成为在 Web 上显示数学的事实标准。

*   服务器端：[LaTeXML](http://dlmf.nist.gov/LaTeXML/)。这用于生成[NIST 数学函数数字图书馆](http://dlmf.nist.gov/)。如果您的 TeX 源代码中有自定义宏，它往往会打嗝，但总的来说，它确实给出了非常好的结果。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2009-04-23T20:09:34.687

jsMath包是另一个使用 LaTeX 标记和本机字体的选项**。**引用他们的网页[http://www.math.union.edu/~dpvc/jsMath/](http://www.math.union.edu/~dpvc/jsMath/)：

> jsMath 包提供了一种在 HTML 页面中包含数学的方法，该方法可以在 Windows、Macintosh OS X、Linux 和其他风格的 unix 下跨多个浏览器工作。它克服了使用图像来表示数学的传统方法的许多缺点：jsMath 使用原生字体，因此当您更改浏览器中文本的大小时它们会调整大小，它们会以打印机的全分辨率打印，并且您无需等待下载数十张图像即可在网页中查看数学。网页作者也有优势，因为不需要对网页进行预处理以生成任何图像，并且数学是以 TeX 形式输入的，因此很容易创建和维护您的网页。

参见例如[这一页](http://www.math.union.edu/~dpvc/jsMath/examples/Henrici.html)或[那](http://images.math.cnrs.fr/La-methode-de-Newton-et-son.html)一页。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-04-01T21:34:58.683

## [凯特克斯](http://khan.github.io/KaTeX/)

[Khan Academy](https://www.khanacademy.org/)的一些开发人员发布了一个基于 Tex的**快速库，名为**[Katex](http://khan.github.io/KaTeX/)：

*   快速地
*   高质量
*   自给自足；和，
*   可以在服务器上渲染

看起来是一个很棒的现代选择。

![凯特克斯样品](https://i.stack.imgur.com/7E9Js.png)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2009-04-22T01:00:21.600

你可以直接在 HTML 中做比大多数人意识到的更多的数学运算。请参阅这些[说明](http://www.johndcook.com/math_symbols.html)。

渲染 LaTeX 的唯一安全方法是将输出保存为图像。一些站点尝试使用工具即时执行此操作，但它们从未可靠地工作。例如，在某些博客上，如果您直接访问网页，则此功能有效，但如果您通过 Feedburner/Google Reader 则无效。

在 Firefox 和 IE 中，我在 MathML 浏览器支持方面有过糟糕的经历。甚至不要尝试。还没有。也许几年后。

这是我用来将 LaTeX 编译为 gif 的[网站。](http://www.artofproblemsolving.com/LaTeX/AoPS_L_TeXer.php)

如果您愿意使用 PDF 而不是 HTML，事情会变得容易得多。只需创建您的 LaTeX 文档并用于`pdflatex`将其编译为 PDF。如果您确实走 PDF 路线，您可能会对[如何](http://www.johndcook.com/blog/2008/11/24/how-to-put-pdf-properties-in-a-latex-file/)在 LaTeX 文件中包含 PDF 属性（例如作者、关键字等）感兴趣。此外，[此页面](http://www.johndcook.com/blog/2008/11/24/link-to-web-pages-from-latex-pdf/)还解释了如何标记 LaTeX 以在 PDF 中创建链接。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-21T23:54:57.373

texvc 可以将 LaTeX 数学方程式转换为 png 或 HTML。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-21T23:56:00.630

LaTeX 和[MathML](http://www.w3.org/Math/)是唯一“正确”的方法。然而，每个都有严重的局限性。其他选项是图像（如果您稍后需要编辑方程式，则不是最佳选择）或复杂的 HTML（需要一些培训，但可以完成）。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-22T01:30:59.450

我确实在我的 wiki 中“按需”渲染 LaTeX 公式。基本上，我从每个 wiki 部分提取乳胶代码并将其放入 .tex 文件中（其文件名是乳胶的 md5sum，因此如果再次使用相同的代码，将使用相同的 tex 并因此使用相同的图像） . 然后，tex 文件每分钟由一个 cron 任务编译，首先生成一个 .ps，然后使用转换程序生成一个 .png（再次以原始 md5 命名）。wiki 条目将乳胶文本替换为引用此 png 的 img 标记（原始乳胶代码作为 alt，用于文本阅读器）。

如果你想这样做，要**非常**小心地尽可能多地消毒你的乳胶。Latex 中有一些命令，例如 \input，您绝对不想让它们通过，因为任何能够使用它们的人都可以在您的服务器磁盘中包含任何可读文件并将其包含在生成的 Latex 输出中。

为了解决这个问题，Mediawiki（维基百科的名声）有一个特殊的插件来清理乳胶输入，但我不想使用它有两个原因：首先我没有使用 mediawiki，其次它是用 OCaml 编写的，我没有不想弄乱我不懂的语言。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-04-22T02:15:32.980

我过去曾为此使用过 ASCIIMathML。它本质上是一个 JavaScript 库，可以在 IE 中使用插件来优化性能，但在 IE 和 Firefox/Mozilla 中也可以不使用它（虽然有点慢）。该语法支持 LaTeX 的一个子集，但差异会引起一些混乱，因此它可能会使您的用户感到困惑，具体取决于他们来自哪里。

以下是一些链接，您可以自己查看：

*   [ASCIIMathML](http://www1.chapman.edu/~jipsen/mathml/asciimath.html)
*   [ASCII数学教程](http://www.wjagray.co.uk/maths/ASCIIMathTutorial.html)

并不完美，并且不适用于所有浏览器（Safari 等），但它至少在今天是有效的，尽管在网络的一些选择性子集中。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2011-03-19T23:08:14.867

为此，我编写了一个开源 javascript 模块，名为 jqmath。请参阅[http://mathscribe.com/author/jqmath.html](http://mathscribe.com/author/jqmath.html)。您以简化的类似 TeX 的语法键入方程，jqmath 将它们转换为 MathML 或简单的 HTML 和 CSS，具体取决于浏览器。这比使用图像更有效且更易于访问。

顺便说一句，这里其他答案中提到的一些摘要和注释现在已经过时了。此外，Firefox 现在支持 MathML，并且 webkit（Chrome 和 Safari）在他们的夜间构建中都有它，尽管他们还没有发布它。如果您有 MathPlayer 插件，Internet Explorer 会呈现 MathML。Opera 使用样式表伪造 MathML。MathML 是 HTML 5 标准的一部分，因此可能所有这些浏览器都会早早地原生支持它。的确，在那之前，jqmath 的输出看起来不会像 TeX 的那么好，但它肯定是可读的，并且对于未来的网页来说绝对是一个更好的解决方案。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-04-22T00:00:02.493

如果您确实使用图像，盲人用户的阅读器是否能够阅读方程式？有些人可能想要。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-04-22T00:13:22.650

有一个名为[LatexIt](http://www.apple.com/downloads/macosx/math_science/latexit.html)的小 Mac 应用程序，它可以很容易地将 LaTeX 方程转换为 PDF、PNG 等。

（我用它在 Keynote 或 PowerPoint 中为我的幻灯片创建方程式。它非常好，支持拖放，因此您可以将方程式“拖动”到任何地方以插入它们。）

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-04-22T01:57:30.993

我的印象是 MediaWiki 将允许您输入 LaTeX 标记（或类似的东西）并动态决定显示它的最佳方式。目前，我认为在可能的情况下将 HTML 用于小型表达式，将图像用于无法以其他方式表示的更复杂的表达式；我怀疑有朝一日，如果浏览器开始支持它，它可能会利用任何其他方法成为最先进的方法，即 MathML。所以我想你可能会发现，如果你使用 MediaWiki，就好像它是你的网站引擎一样，你将与未来的任何东西向前兼容。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-04-22T06:59:21.270

您可以通过 LaTeX 服务器即时生成方程式图像。

[http://www.forkosh.com/mimetex.html](http://www.forkosh.com/mimetex.html)

如果您使用的是 WordPress，则可以使用 LaTeX for WordPress ( [http://wordpress.org/extend/plugins/latex/](http://wordpress.org/extend/plugins/latex/) ) 插件。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-06-05T07:05:40.733

目前客户端 MathML 渲染的状态还没有准备好被广泛采用。这意味着您确实需要将 MathML 呈现为图像。你如何做到这一点取决于你的环境。

您对自己的服务器有 root 访问权限吗？您是否愿意在其上安装软件？在这种情况下，您可以渲染自己的图像。如果您正在运行博客软件或 wiki，通常您可以找到一个可以利用您的平台功能的插件。如果您打算编写大量数学表达式，这通常是理想的场景。

如果您托管自己的图像，则可以预渲染它们，或使用 mimetex.cgi 之类的扩展程序。如果您允许渲染任意 MathML 表达式，您将面临其他网站热链接到您的图像渲染器的风险。如果您在 Web 服务器上放置过滤器以防止热链接，那么通过提要阅读器查看您网站的人也将被阻止。

如果您无法渲染自己的图像，或者您只想渲染几个表情，那么您通常可以让另一个服务生成图像，然后在您的网站上热链接图像。当然，不利的一面是您依赖于另一个站点，该站点为您提供图像而一无所获。

其他服务的示例（如其他评论中所述）包括： * [http://www.artofproblemsolving.com/LaTeX/AoPS_L_TeXer.php](http://www.artofproblemsolving.com/LaTeX/AoPS_L_TeXer.php) : [alt text http://alt2.artofproblemsolving.com/Forum/latexrender/pictures/a/ f/c/afc183343d84d030898f589bac12a8d9cf04558a.gif](http://alt2.artofproblemsolving.com/Forum/latexrender/pictures/a/f/c/afc183343d84d030898f589bac12a8d9cf04558a.gif) * [http://www.forkosh.com/mimetex.html](http://www.forkosh.com/mimetex.html) : [mimetex.cgi http://www.forkosh.dreamhost.com/mimetex.cgi?c=%5Csqrt%7Ba%5E2+ b%5E2%7D](http://www.forkosh.dreamhost.com/mimetex.cgi?c=%5Csqrt%7Ba%5E2+b%5E2%7D)

使用 mimetex 的优点是可以轻松更改公式并重新渲染。

# rule-engine - 什么时候不应该使用规则引擎？

> ID：775170
> 
> 赞同：111
> 
> 时间：2009-04-21T23:51:32.467
> 
> 标签：rule-engine

我有一个相当不错的使用规则引擎的优点列表，以及使用它们的一些原因，我需要的是一个你不应该使用规则引擎的原因列表

到目前为止，我最好的是：

> 规则引擎并非真正旨在处理工作流或流程执行，也不是旨在执行规则的工作流引擎或流程管理工具。

您不应该使用它们的任何其他重要原因？

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2009-12-30T22:52:12.553

我将从个人经验中举两个例子，说明使用规则引擎是个坏主意，也许这会有所帮助：-

1.  在过去的一个项目中，我注意到规则文件（该项目使用 Drools）包含很多 Java 代码，包括循环、函数等。它们本质上是伪装成规则文件的 Java 文件。当我向架构师询问他对设计的推理时，我被告知“规则从未打算由业务用户维护”。

**教训**：它们被称为“业务规则”是有原因的，当您无法设计一个业务用户可以轻松维护/理解的系统时，不要使用规则。

2.  另一种情况；该项目使用规则是因为需求定义/理解不佳并且经常更改。开发团队的解决方案是广泛使用规则来避免频繁的代码部署。

**经验教训**：在初始版本更改期间，需求往往会发生很大变化，并且不保证使用规则。当您的业务经常变化时使用规则（不是要求）。例如：-随着税法的变化和规则的使用，每年都会改变税收的软件是一个好主意。Web 应用程序的 1.0 版本会随着用户确定新需求而经常更改，但会随着时间的推移而稳定下来。不要使用规则来替代代码部署。​</p>

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2009-04-22T00:15:42.283

当我看到人们使用非常大的规则集（例如，在单个规则集中有数千条规则）时，我会感到非常紧张。当规则引擎是位于企业中心的单例引擎时，通常会发生这种情况，希望保持规则[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)将使许多需要它们的应用程序可以访问它们。我会拒绝任何人告诉我具有这么多规则的 Rete 规则引擎是很好理解的。我不知道有任何工具可以检查以确保不存在冲突。

我认为划分规则集以使其保持较小是一个更好的选择。方面可以是在许多对象之间共享公共规则集的一种方式。

我更喜欢尽可能简单、更多数据驱动的方法。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2009-04-22T00:00:46.783

我注意到的一个点是“双刃剑”：

> 将逻辑交给非技术人员

当您在非技术方面拥有一两个多学科天才时，我已经看到这项工作很棒，但我也看到缺乏技术导致臃肿，更多错误，并且通常是开发/维护成本的 4 倍。

因此，您需要认真考虑您的用户群。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-01-22T08:58:33.690

我是业务规则引擎的忠实拥护者，因为它可以帮助您让程序员的生活更轻松。在处理数据仓库项目时，我的第一个经验是找到包含跨越整个页面的复杂 CASE 结构的存储过程。调试是一场噩梦，因为很难理解在如此长的 CASE 结构中应用的逻辑，也很难确定代码第 1 页的规则与第 5 页的规则是否重叠。总的来说，我们有代码中嵌入了 300 多个这样的规则。

当我们收到一个新的开发要求时，称为会计目的地，它涉及处理超过 3000 条规则，我知道有些事情必须改变。那时我一直在研究一个原型，该原型后来成为现在自定义业务规则引擎的父级，能够处理所有 SQL 标准运算符。最初我们一直使用 Excel 作为创作工具，后来，我们创建了一个 ASP.net 应用程序，它允许业务用户定义他们自己的业务规则，而无需编写代码。现在系统运行良好，几乎没有错误，并且包含超过 7000 条用于计算此计费目标的规则。我认为仅通过硬编码是不可能出现这种情况的。

尽管如此，这种方法还是有局限性的：

*   您需要拥有对公司业务有深刻理解的有能力的业务用户。
*   搜索整个系统（在我们的例子中是数据仓库）的工作量很大，以确定所有硬编码条件，这些条件对于转换为业务规则引擎处理的规则是有意义的。我们还必须注意确保这些初始模板能够被业务用户完全理解。
*   您需要有一个用于规则创作的应用程序，其中实现了用于检测重叠业务规则的算法。否则你最终会陷入一团糟，没有人知道他们得到的结果。当您在自定义业务规则引擎之类的通用组件中出现错误时，可能会非常难以调试并涉及大量测试以确保以前有效的东西现在也有效。

关于这个主题的更多细节可以在我写的一篇文章中找到：http: [//dwhbp.com/post/2011/10/30/Implementing-a-Business-Rule-Engine.aspx](http://dwhbp.com/post/2011/10/30/Implementing-a-Business-Rule-Engine.aspx)

总体而言，使用业务规则引擎的最大优势是它允许用户重新控制业务规则定义和创作，而无需在每次需要修改某些内容时都去 IT 部门。它还减少了 IT 开发团队的工作量，他们现在可以专注于构建具有更多附加值的东西。

干杯，

尼古拉

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2011-11-04T17:50:55.147

关于何时不使用规则引擎的精彩文章……（以及何时使用）……

[http://www.jessrules.com/guidelines.shtml](http://www.jessrules.com/guidelines.shtml)

另一种选择是，如果您有一组仅按任何顺序应用一次以获得结果的线性规则，则创建一个 groovy 界面并让开发人员编写和部署这些新规则。优点是速度非常快，因为通常您会传递休眠会话或 jdbc 会话以及任何参数，因此您可以访问所有应用程序数据，但以一种有效的方式。使用事实列表，可能会有很多循环/匹配确实会减慢系统速度.....这是避免规则引擎并能够动态部署的另一种方法（是的，我们的 groovy 规则部署在数据库，我们没有递归......它要么符合规则，要么没有）。这只是另一种选择.....哦，还有一个好处是不需要为新来的开发人员学习规则语法。

这真的取决于你的上下文。规则引擎有它们的位置，如果您在项目中有规则，您可能希望为不需要规则引擎的非常简化的情况动态部署规则引擎，那么上述只是另一种选择。

如果您有一个简单的规则集并且可以有一个 groovy 界面，则基本上不要使用规则引擎.....就像动态部署和加入您的团队的新开发人员可以比流口水语言更快地学习它一样。（但这是我的观点）

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2009-09-30T15:37:56.803

根据我的经验，当满足以下条件时，规则引擎效果最好：

1.  为您的问题领域定义明确的学说
2.  高质量（最好是自动化的）数据，以帮助推动您的大部分输入
3.  访问主题专家
4.  具有创建专家系统经验的软件开发人员

如果缺少这四个特征中的任何一个，您仍然可能会发现一个规则引擎适合您，但是每次我尝试它时即使缺少 1 个，我都会遇到麻烦。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-21T23:57:01.893

这当然是一个好的开始。规则引擎的另一件事是，有些事情是容易理解的、确定性的和直截了当的。工资预扣是（或曾经是）这样的。您*可以将*其表示为可由规则引擎解析的规则，但您也可以将相同的规则表示为一个相当简单的值表。

因此，当您表达将具有持久数据的长期流程时，工作流引擎非常有用。规则引擎可以做类似的事情，但你必须做很多额外的复杂性。

当您拥有复杂的知识库并需要搜索时，规则引擎非常有用。规则引擎可以解决复杂的问题，并且可以快速适应不断变化的情况，但会给基础实现带来很多复杂性。

许多决策算法足够简单，可以表达为简单的表驱动程序，而没有真实规则引擎所暗示的复杂性。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-21T14:04:23.753

我不太了解某些要点，例如：
a）业务人员需要非常了解业务，或者；
b) 业务上的分歧不需要知道规则。

对我来说，作为一个刚接触BRE的人，BRE的好处就是所谓的让系统适应业务变化，所以它的重点是适应变化。
在时间 x 建立的规则是否与在时间 y 建立的规则不同是否重要，因为：
a) 业务人员不了解业务，或；
b) 商务人士不懂规则？

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-30T13:43:54.553

我强烈推荐像[Drools 这样的业务规则引擎作为开源](http://www.jboss.org/drools/)或像 LiveRules 这样的[商业规则引擎。](http://www.yorosis.com/liverules.html)

*   当您有许多本质上易变的业务策略时，很难维护这部分核心技术代码。
*   规则引擎为框架提供了极大的灵活性，并且易于更改和部署。
*   规则引擎不是在任何地方都可以使用，而是在您有很多策略不可避免地定期更改时需要使用。

# multidimensional-array - 如何使用指针链接两个多维数组？

> ID：775182
> 
> 赞同：0
> 
> 时间：2009-04-21T23:55:11.523
> 
> 标签：multidimensional-array, hash, heap, binary-heap

我需要基本上合并一个二进制堆和线性探测哈希表来制作一个“复合”数据结构，它具有堆的功能，具有哈希表的排序能力。

我需要做的是为每个数据结构（二进制堆和哈希）创建 2 个二维数组，然后用指针将它们相互链接，这样当我更改内容时，例如删除二进制堆中的值，它也会得到在哈希表中删除。

因此，我需要让 Heap 数组的一行从 Heap 指向 Hastable，而 hashtable 数组的一行从 hashtable 指向堆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T00:05:12.560

创建一个包含两者的容器，以及执行算法所需的所有操作的访问器函数/方法（取决于您的实现语言）。

IE：从容器中删除：从二进制和哈希中删除。

添加到容器：添加到二进制和哈希。

编辑：哦，一个任务 - 有趣！:)

我会这样做：仍然实现一个容器。但是，不要为 btree/hash 使用标准库，而是像这样实现它们：创建一个可以放入数据成员中的类型，该类型具有指向数据元素所在的 BTree 节点和 Hashtable 节点的指针。

要删除一个数据元素，给定一个指向它的指针，您可以在 btree（从节点指针导航到父节点、删除子节点（左或右）、重构树）和哈希表（从哈希列表中删除）上执行删除算法）。添加值时，对 btree 和 hash 执行 add 算法，但请确保在返回之前更新数据中的节点指针。

一些伪代码（我将使用 C，但我不确定您使用的是什么语言）： typedef struct { BTreeNode* btree HashNode* hash } ContianerNode;

将数据放入容器中：

```
typedef struct
{
    ContainerNode node;
    void* data; /* whatever the data is */
} Data; 
```

BTreeNode 有类似的东西：

```
typedef struct _BTreeNode
{
    struct _BTreeNode* parent;
    struct _BTreeNode* left;
    struct _BTreeNode* right;
} BTreeNode; 
```

一个 HashNode 有类似的东西：

```
typedef struct _HashNode
{
    struct _HashNode* next;
} HashNode;
/* ala singly linked list */ 
```

并且您的 BTree 将是指向 BTreeNode 的指针，而您的 hastable 将是指向 HashNodes 的指针数组。像这样：

```
typedef struct
{
    BTreeNode* btree;
    HashNode* hashtable[HASHTABLESIZE];
} Container;

void delete(Container* c, ContainerNode* n)
{
    delete_btree_node(n->btree);
    delete_hashnode(n->hash);
}

ContainerNode* add(Container* c, void* data)
{
    ContainerNode* n = malloc(sizeof(ContainerNode));
    n->btree = add_to_btree(n);
    n->hash = add_to_hash(n);
} 
```

我会让你完成那些其他功能（不能为你完成整个任务；））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T00:04:59.080

为什么要打扰链接？

您有两个关联结构，只是将一个上的任何操作复制到另一个上（确保如果一个操作除外，您要么使整个事物崩溃，要么让对象处于有效状态，如果您关心这些事情）

除非您可以利用其中一个的结构来帮助您处理另一个（我不知道您如何做到这一点，因为任何一个都可以在任何修改操作中完全重新安排其内部状态），这同样有效且简单得多。

当然，这意味着任何*修改*操作的 O() 成本是最昂贵的成本，并且内存成本加倍，但原始计划确实如此，除非它们是我遗漏的一些技巧。

# .net - 用于 TCP 消息传递的 .NET 项目

> ID：775185
> 
> 赞同：0
> 
> 时间：2009-04-21T23:56:08.477
> 
> 标签：.net, sockets, tcp

.NET 中是否有一个开源项目或框架，它为客户端和服务器之间通过 TCP 的消息传递提供基本的“管道”？这似乎是我最终一遍又一遍地写本质上相同的东西的事情之一，我想把自己从那一点抽象出来，处理我的应用程序的细节，而不是*再写*一半- 用于通过 TCP 进行消息传递的评估机制。

希望比 WCF 更小/更简单的东西。我真的对不试图解决所有问题的轻量级的东西很感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T00:00:27.843

[WCF](http://msdn.microsoft.com/en-us/magazine/cc163447.aspx)内置了很多细节。虽然我实际上并没有尝试自己实现它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-22T00:50:06.197

至少，在集成或手动代码中，您至少会遇到不同的激活、线程模型、缓冲区、框架、安全性和序列化问题。它是任何语言或环境中任何 UDP/TCP 或配置/属性工作的典型。它仍然需要根据服务器或客户端的需求进行调整，这很简单，I/O 工作的巨大可能性的本质。

完全同意 WCF 过于臃肿而且与 .NET Remoting 相比要慢得多（这比托管套接字代码慢，而托管套接字代码又比本机 iocp 代码慢得多）手动滚动代码。但这是额外的工作，如果你管理上面的通用泛型库（不是更强大的模板，这使得它在.NET中变得更难，即你必须以奇怪的方式设计类型+必须使用接口）比你在一个人年中做得很好一些复杂的管道和消息队列（这不是不可能的，但恕我直言，回想起来永远不值得“一般”做......）。

替代方案是 MSMQ，MS 越来越多地押注其软件，或者半途而废的开源位，这些位永远不会完全满足您需要的模型。Tibcos、ActiveMQs，应有尽有。即使是更低的级别，最好的也被广泛认为是 C++ boost::asio，虽然被认为是顶级的，但就像所有的东西一样，它并不适合所有东西。这是一个非常了不起的设计，所以我要提防潜在的浪费时间的练习。

在 .NET 上，我会首先采用 MS“今天”推出的任何 50 线程服务，如果不采用“再次类似的代码”并寻找类似的概念，以便在它重新出现时装备你的工具集（就像每一个新的I/O 库或框架每 5 年左右执行一次）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-22T00:03:20.643

如果您需要的不仅仅是简单的消息传递支持，请查看[.Net 的远程处理支持](http://msdn.microsoft.com/en-us/library/kwdt6w2k(VS.85).aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T00:07:09.200

你也可以试试 Indy.net 项目。

它最初是用 Delphi 编写的，但这就是它应该做的。

# android - 将一组按钮添加到 Android 应用程序中的 GridView

> ID：775188
> 
> 赞同：16
> 
> 时间：2009-04-21T23:56:50.007
> 
> 标签：android, arrays, button, dynamic, android-gridview

我有一个应用程序，它将有 5-15 个按钮，具体取决于后端可用的内容。如何定义正确的 GridView 布局文件以包含一组按钮，每个按钮都有不同的文本和其他属性？每个按钮本质上都会将一个项目添加到购物车，因此除了它添加到购物车的项目之外，onClick 代码将是相同的。

如何定义一个数组，以便我可以添加可变数量的按钮，但仍然通过唯一 ID 引用它们中的每一个？我已经看到了[arrays.xml](http://developer.android.com/guide/samples/ApiDemos/res/values/arrays.html)的示例，但是他们创建了一个预先设置的字符串数组。我需要一种方法来创建一个对象，而不是在布局或数组 xml 文件中定义文本。

**更新 - 添加了有关添加到 GridView 的信息**

我想将此添加到 GridView，因此调用 [addView 方法]( [http://developer.android.com/reference/android/widget/AdapterView.html#addView(android.view.View,%20int)](http://developer.android.com/reference/android/widget/AdapterView.html#addView(android.view.View,%20int))会导致UnsupportedOperationException。我可以执行以下操作：

```
ImageButton b2 = new ImageButton(getApplicationContext());
b2.setBackgroundResource(R.drawable.img_3);
android.widget.LinearLayout container = (android.widget.LinearLayout) findViewById(R.id.lay);
container.addView(b2); 
```

但这并没有像我想要的那样在网格中布置按钮。这可以在 GridView 中完成吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2010-05-22T21:31:13.533

在以下代码中，您应该将 的上限更改为`for`变量。

```
public class MainActivity
        extends Activity
        implements View.OnClickListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        TableLayout layout = new TableLayout (this);
        layout.setLayoutParams( new TableLayout.LayoutParams(4,5) );

        layout.setPadding(1,1,1,1);

        for (int f=0; f<=13; f++) {
            TableRow tr = new TableRow(this);
            for (int c=0; c<=9; c++) {
                Button b = new Button (this);
                b.setText(""+f+c);
                b.setTextSize(10.0f);
                b.setTextColor(Color.rgb( 100, 200, 200));
                b.setOnClickListener(this);
                tr.addView(b, 30,30);
            } // for
            layout.addView(tr);
        } // for

        super.setContentView(layout);
    } // ()

    public void onClick(View view) {
        ((Button) view).setText("*");
        ((Button) view).setEnabled(false);
    }
} // class 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-05-05T09:10:02.597

这是一个很好的示例：

[https://developer.android.com/guide/topics/ui/layout/gridview.html](https://developer.android.com/guide/topics/ui/layout/gridview.html)

您应该只在 getView 适配器方法中创建按钮而不是图像视图。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2010-04-24T01:10:05.770

如果您使用的是**GridView**或**ListView (etc)**，并且正在生成视图以通过适配器**getView(pos, convertView, viewGroup)**填充它们，您可能会遇到混淆（我曾经做过一次）。

如果您决定重新使用 convertView 参数，则必须重置其中的*所有*内容。这是框架传递给您的旧视图，以节省膨胀布局的成本。它几乎从未与之前在布局中的*位置相关联。*

```
class GridAdapter extends BaseAdapter // assigned to your GridView
{
    public View getView(int position, View convertView, ViewGroup arg2) {
        View view;
        if (convertView==null)
        {
            view = getLayoutInflater().inflate(R.layout.gd_grid_cell, null);
        }
        else
        {
             // reusing this view saves inflate cost
             // but you really have to restore everything within it to the state you want
            view = convertView;
        }

        return view;
    }
    //  other methods omitted (e.g. getCount, etc) 
} 
```

我认为这代表了一个 Android 的东西，一开始这个概念有点难以理解，直到你意识到它里面有一个重要的优化（必须对小型移动设备上的 CPU 很好）

# java - 将 Oracle 日期映射到 Java 类型以返回自纪元以来的秒数？

> ID：775191
> 
> 赞同：1
> 
> 时间：2009-04-21T23:57:22.017
> 
> 标签：java, oracle, date

我有一个带有 oracle 日期列的表

当我在列上对 sqlplus 进行选择时，它给了我这样的值

```
10-JAN-2007 
```

1.  这是Oracle列中日期的精度吗，即日期列中没有小时秒，毫秒。
2.  如何将其映射到 java 时间戳并获得自纪元以来的秒数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T00:00:49.310

如果您使用 java.sql Statement/PreparedStatement 选择它，它将返回一个 java.sql.Date，然后您可以像常规 java.util.Date 一样对其执行 .getTime()。

但是，根据 RDBMS，如果您真的需要时间戳，则必须使列成为时间戳类型并将其选择到 java.sql.Timestamp 中。否则它会给你上午 12 点的时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-22T00:23:55.430

不，Oracle DATE 列确实存储小时、分钟和秒。但是，sqlplus 默认只显示月、日、年。在运行查询之前使用以下命令来显示完整的日期和时间：

```
alter session set NLS_DATE_FORMAT='DD-MM-YYYY HH24:MI:SS'; 
```

Oracle 中 DATE 和 TIMESTAMP 列类型之间的区别在于 TIMESTAMP 将存储小数秒。

# sql-server - NHibernate 和 sql 时间戳列作为版本

> ID：775208
> 
> 赞同：1
> 
> 时间：2009-04-22T00:06:54.927
> 
> 标签：sql-server, nhibernate, concurrency, fluent-nhibernate

我一直在努力让 Nhibernate 使用字节数组作为版本映射到 sql 时间戳。我实现了一个 IUserVersionType 但 Nhibernate 在数据库中创建 varbinary 而不是时间戳。受 Ayende 最近一篇关于并发的博客文章的启发，我更改了我的映射以将 sql 类型指定为完美运行的时间戳。但是我现在面临一个相当奇怪的问题，其中 Nhibernate 执行插入，获取新版本，然后立即尝试进行更新并尝试设置版本列，这是一个 sql 时间戳失败。

这是我的映射：

```
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
assembly="Core.Domain, Version=0.1.3397.31993, Culture=neutral,
PublicKeyToken=94dc7dc697cfcfc0" namespace="Core.Domain.Entities"
default-lazy="false">
 <class name="Contact" table="Contacts" xmlns="urn:nhibernate-
mapping-2.2" optimistic-lock="version" dynamic-insert="true" dynamic-
update="true">
   <id name="Id" type="Int32" column="Id">
     <generator class="identity" />
   </id>
   <version name="Version" type="BinaryBlob" generated="always"
unsaved-value="null">
     <column name="Version" sql-type="timestamp" not-null="false" />
   </version>
   <property name="Title" type="String">
     <column name="Title" length="5" />
   </property>
   <property name="FirstName" type="String">
     <column name="FirstName" not-null="true" length="50" />
   </property>
   <property name="MiddleName" type="String">
     <column name="MiddleName" length="50" />
   </property>
   <property name="LastName" type="String">
     <column name="LastName" not-null="true" length="50" />
   </property>
   <property name="Suffix" type="String">
     <column name="Suffix" length="5" />
   </property>
   <property name="Email" type="String">
     <column name="Email" length="50" />
   </property>
   <bag name="PhoneNumbers" inverse="true" cascade="all-delete-
orphan">
     <key foreign-key="FK_Contacts_PhoneNumbers_ContactId" on-
delete="cascade" column="ContactId" />
     <one-to-many class="Core.Domain.Entities.PhoneNumber,
Core.Domain, Version=0.1.3397.31993, Culture=neutral,
PublicKeyToken=94dc7dc697cfcfc0" />
   </bag>
   <property name="DateCreated" type="DateTime">
     <column name="DateCreated" />
   </property>
   <property name="DateModified" type="DateTime">
     <column name="DateModified" />
   </property>
   <property name="LastModifiedBy" type="String">
     <column name="LastModifiedBy" />
   </property>
 </class>
</hibernate-mapping>
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
assembly="Core.Domain, Version=0.1.3397.31993, Culture=neutral,
PublicKeyToken=94dc7dc697cfcfc0" namespace="Core.Domain.Entities"
default-lazy="false">
 <class name="Customer" table="Customers" xmlns="urn:nhibernate-
mapping-2.2" optimistic-lock="version" dynamic-insert="true" dynamic-
update="true">
   <id name="Id" type="Int32" column="Id">
     <generator class="identity" />
   </id>
   <version name="Version" type="BinaryBlob" generated="always"
unsaved-value="null">
     <column name="Version" sql-type="timestamp" not-null="false" />
   </version>
   <property name="AccountNumber" access="nosetter.pascalcase-
underscore" type="String">
     <column name="AccountNumber" unique="true" length="25" />
   </property>
<!-- other mappings... -->
   <property name="DateCreated" type="DateTime">
     <column name="DateCreated" />
   </property>
   <property name="DateModified" type="DateTime">
     <column name="DateModified" />
   </property>
   <property name="LastModifiedBy" type="String">
     <column name="LastModifiedBy" />
   </property>
   <joined-subclass name="Core.Domain.Entities.Individual,
Core.Domain, Version=0.1.3397.31993, Culture=neutral,
PublicKeyToken=94dc7dc697cfcfc0" table="Individuals">
     <key column="CustomerId" />
     <many-to-one fetch="join" lazy="false" not-null="true"
cascade="all" unique="true" not-found="exception" name="Contact"
column="ContactID" />
     <bag name="Addresses" table="Addresses_Individuals">
       <key column="AddressId" foreign-
key="FK_Addresses_Individuals_Addresses_AddressId" />
       <many-to-many column="IndividualId"
class="Core.Domain.Entities.Address, Core.Domain,
Version=0.1.3397.31993, Culture=neutral,
PublicKeyToken=94dc7dc697cfcfc0" foreign-
key="FK_Addresses_Individuals_Individuals_IndividualId" />
     </bag>
   </joined-subclass>
   <joined-subclass name="Core.Domain.Entities.Store, Core.Domain,
Version=0.1.3397.31993, Culture=neutral,
PublicKeyToken=94dc7dc697cfcfc0" table="Stores">
     <key column="CustomerId" />
     <many-to-one unique="true" cascade="save-update" fetch="join"
not-null="true" not-found="exception" name="Address"
column="AddressId" />
     <many-to-one lazy="proxy" not-null="true" cascade="all" not-
found="exception" name="Client" column="ClientId" />
     <property name="StoreName" type="String">
       <column name="StoreName" not-null="true" length="50" />
     </property>
     <bag name="Contacts" table="Contacts_Stores">
       <key column="ContactId" foreign-
key="FK_Contacts_Stores_Contacts_ContactId" />
       <many-to-many column="StoreId"
class="Core.Domain.Entities.Contact, Core.Domain,
Version=0.1.3397.31993, Culture=neutral,
PublicKeyToken=94dc7dc697cfcfc0" foreign-
key="FK_Contacts_Stores_Stores_StoreId" />
     </bag>
   </joined-subclass>
 </class>
</hibernate-mapping> 
```

对具有关联联系人的个人调用 Session.Save 会导致以下错误：

```
NHibernate: INSERT INTO Addresses (Line1, PostalCode, Country,
DateCreated, DateModified, LastModifiedBy) VALUES (@p0, @p1, @p2, @p3,
@p4, @p5); select SCOPE_IDENTITY(); @p0 = 'Order Address Line 1', @p1
= 'CV31 6BW', @p2 = 'United Kingdom', @p3 = '20/04/2009 19:45:32', @p4
= '20/04/2009 19:45:32', @p5 = ''
NHibernate: SELECT address_.Version as Version22_ FROM Addresses
address_ WHERE address_.Id=@p0; @p0 = '1'
NHibernate: INSERT INTO Contacts (FirstName, LastName, DateCreated,
DateModified, LastModifiedBy) VALUES (@p0, @p1, @p2, @p3, @p4); select
SCOPE_IDENTITY(); @p0 = 'Joe', @p1 = 'Bloggs', @p2 = '20/04/2009
19:45:34', @p3 = '20/04/2009 19:45:34', @p4 = ''
NHibernate: SELECT contact_.Version as Version33_ FROM Contacts
contact_ WHERE contact_.Id=@p0; @p0 = '1'
NHibernate: INSERT INTO Customers (AccountNumber, DateCreated,
DateModified, LastModifiedBy) VALUES (@p0, @p1, @p2, @p3); select
SCOPE_IDENTITY(); @p0 = '', @p1 = '20/04/2009 19:45:34', @p2 =
'20/04/2009 19:45:34', @p3 = ''
NHibernate: INSERT INTO Individuals (ContactID, CustomerId) VALUES
(@p0, @p1); @p0 = '1', @p1 = '1'
NHibernate: SELECT individual_1_.Version as Version2_ FROM Individuals
individual_ inner join Customers individual_1_ on
individual_.CustomerId=individual_1_.Id WHERE
individual_.CustomerId=@p0; @p0 = '1'
NHibernate: UPDATE Contacts SET Version = @p0 WHERE Id = @p1 AND
Version = @p2; @p0 = 'System.Byte[]', @p1 = '1', @p2 = 'System.Byte[]'

System.Data.SqlClient.SqlException: Cannot update a timestamp column.
at System.Data.SqlClient.SqlConnection.OnError(SqlException exception,
Boolean breakConnection)
at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException
exception, Boolean breakConnection)
at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning
(TdsParserStateObject stateObj)
at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior,
SqlCommand cmdHandler, SqlDataReader dataStream,
BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject
stateObj)
at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader
ds, RunBehavior runBehavior, String resetOptionsString)
at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds
(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean
returnStream, Boolean async)
at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior
cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String
method, DbAsyncResult result)
at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery
(DbAsyncResult result, String methodName, Boolean sendToPipe)
at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
at NHibernate.AdoNet.AbstractBatcher.ExecuteNonQuery(IDbCommand cmd)
in c:\CSharp\NH\nhibernate\src\NHibernate\AdoNet\AbstractBatcher.cs:
line 203
at NHibernate.Persister.Entity.AbstractEntityPersister.Update(Object
id, Object[] fields, Object[] oldFields, Object rowId, Boolean[]
includeProperty, Int32 j, Object oldVersion, Object obj,
SqlCommandInfo sql, ISessionImplementor session) in c:\CSharp\NH
\nhibernate\src\NHibernate\Persister\Entity
\AbstractEntityPersister.cs: line 2713
NHibernate.Exceptions.GenericADOException: could not update:
[Core.Domain.Entities.Contact#1][SQL: UPDATE Contacts SET Version =
@p0 WHERE Id = @p1 AND Version = @p2] 
```

任何想法为什么 NHibernate 试图更新联系人的版本列，即使它没有用于地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T11:41:43.243

地址没有我假设的版本列。

我想知道您从哪里获得 sql 类型。为什么不这样呢？

```
 <version name="Version" type="Timestamp" generated="always" unsaved-value="null">
     <column name="Version" not-null="false" />
   </version> 
```

您当然需要实体中的 DateTime 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-30T03:30:02.113

我发现在类上使用 dynamic-insert="true" 会导致这个问题。我成功使用了以下映射：

```
...
    <class name="Contact" table="Contact">
        <id name="ID" column="ID" type="int">
            <generator class="identity" />
        </id>
        <version name="Version" generated="always" unsaved-value="null" type="BinaryBlob"/>
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T21:12:12.717

[http://ayende.com/Blog/archive/2009/04/15/nhibernate-mapping-concurrency.aspx](http://ayende.com/Blog/archive/2009/04/15/nhibernate-mapping-concurrency.aspx)

# sql-server - 如何检查我当前是否是 SQL 2000/2005/2008 的数据库所有者

> ID：775213
> 
> 赞同：3
> 
> 时间：2009-04-22T00:08:51.380
> 
> 标签：sql-server, tsql, dbo

我不记得如何在 TSQL 查询中执行此操作。它是单行的，适合在运行 DML 之前进行测试。该查询类似于 SELECT IS_DBO() 或 SELECT IS(DBO)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T00:19:32.743

您可能正在寻找以下[`IS_MEMBER`](http://msdn.microsoft.com/en-us/library/ms186271.aspx)功能：

```
SELECT IS_MEMBER('db_owner') 
```

# javascript - 如何使用 CSS 使区域不可点击？

> ID：775215
> 
> 赞同：37
> 
> 时间：2009-04-22T00:09:50.630
> 
> 标签：javascript, jquery, css

假设我有包含一些链接和图像的包装器 div，有什么方法可以只使用 CSS 立即停用它？

* * *

审查答案后：
我放弃了只能用 CSS 实现的想法。jQuery blockUI 插件就像魅力一样工作。

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2012-04-27T12:50:14.703

有一个 CSS 规则，但由于旧的浏览器支持，它没有被广泛使用

`pointer-events: none;`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-01-31T08:38:34.990

这些天来，您可以在内容上放置一个伪元素。

```
.blocked
{
    position:relative;
}
.blocked:after
{
    content: '';
    position: absolute;
    left:0;
    right:0;
    top:0;
    bottom:0;
    z-index:1;
    background: transparent;
} 
```

[http://jsfiddle.net/HE5wR/27/](http://jsfiddle.net/HE5wR/27/)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-02-05T14:43:08.363

我认为这个也有效：

**CSS**

```
pointer-events: none; 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-04-22T01:46:05.657

如果您打算使用 jQuery，您可以使用 blockUI 插件轻松完成此操作。...或者要使用 CSS 回答您的问题，您必须将 div 绝对定位在您希望阻止的内容上。只需确保绝对定位的 div 出现在要为 z 索引目的而被阻止的内容之后。

```
<div style="position:relative;width: 200px;height: 200px;background-color:green">
    <div>
        <a href="#">Content to be blocked.</a>
    </div>
    <div style="position: absolute;top:0;left:0;width: 200px;height:200px;background-color: blue;z-index:2;opacity:0.4;filter: alpha(opacity = 50)"></div>
</div> 
```

对不起所有的内联 CSS。你必须做一些不错的课程。此外，这仅在 Firefox 和 IE7 中进行了测试。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-04-22T00:14:41.100

用另一个不可点击的元素覆盖它。您可能需要使用 JavaScript 来打开和关闭此“封面”。你可以做一些聪明的事情，比如让它成为半透明的或其他的东西。

```
<style>
    #cover {position:absolute;background-color:#000;opacity:0.4;}
</style>

<div id="clickable-stuff">
   ...
</div>
<div id="cover">
</div>

<script type="text/javascript">
    function coverUp() {
        var cover = document.getElementById('cover');
        var areaToCover = document.getElementById('clickable-stuff');
        cover.style.display = 'block';
        cover.style.width = //get areaToCover's width
        cover.style.height = //get areaToCover's height
        cover.style.left = //get areaToCover's absolute left position
        cover.style.top = //get areaToCover's absolute top position
    }

    /*
       Check out jQuery or another library which makes
       it quick and easy to get things like absolute position
       of an element
    */
</script> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-08-04T08:21:48.250

您应该考虑应用 jQuery 的 event.preventDefault 函数。在这里你可以找到一个例子：

[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

TL;DR 版本：

```
$("#element-to-block").click( function(event) {
  event.preventDefault();
} 
```

砰！

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2009-04-22T00:21:16.640

如果您的意思是不可点击，以便用户无法复制和粘贴它或以某种方式保存数据。不，这从未真正成为可能。

您可以使用[jQuery BlockUI 插件](https://github.com/malsup/blockui/)或 CSS 规则`pointer-events: none;`，但这并不能真正阻止人们复制您的文本或图像。

在最坏的情况下，我总是可以`wget`提供您的内容，并且充其量使用以下插件可以轻松绕过 css 和 js 方法：

*   [Firefox](https://addons.mozilla.org/en-US/firefox/addon/re-enable-right-click/)或[chrome](https://chrome.google.com/webstore/detail/allow-right-click/hompjdfbfmmmgflfjdlnkohcplmboaeo?hl=en)上的“允许右键单击”
*   [Firefox](https://addons.mozilla.org/en-US/firefox/addon/re-enable-right-click/)或[chrome](https://chrome.google.com/webstore/detail/absolute-enable-right-cli/jdocbkpgdakpekjlhemmfcncgdjeiika?hl=en)上的“绝对启用右键单击和复制”
*   [Firefox](https://addons.mozilla.org/en-US/firefox/addon/don-t-fuck-with-paste/)或[chrome](https://chrome.google.com/webstore/detail/dont-fuck-with-paste/nkgllhigpcljnhoakjkgaieabnkmgdkb?hl=en)上的“不要乱搞粘贴”

更重要的是，除非你有一个非常好的和合法的借口来破坏基本的浏览器行为、可用性、可访问性、翻译功能、密码管理器、屏幕截图工具、容器工具或用户右键单击上下文中的任意数量的各种浏览器插件功能菜单，请，只是，停止，做，这个。

# c++ - 在OpenGL中动态加载纹理的好方法是什么？

> ID：775217
> 
> 赞同：6
> 
> 时间：2009-04-22T00:10:38.880
> 
> 标签：c++, opengl, textures

目前我正在第二个线程上将图像加载到内存中，然后在显示循环期间（如果需要纹理加载），加载纹理。

我发现我无法在第二个线程上加载纹理，因为 OpenGL 不喜欢这样；也许这是可能的，但我做错了什么 - 所以如果这实际上是可能的，请纠正我。

另一方面，如果我的失败是有效的——如何在不中断渲染循环的情况下加载纹理？目前，纹理从内存加载大约需要 1 秒，虽然这不是主要问题，但对用户来说可能会有点烦人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T00:17:25.103

您可以使用您希望读取文件的任何工具，在您喜欢的任何线程上将纹理从磁盘加载到内存。

但是，当您将其绑定到 OpenGL 时，需要在与该 OpenGL 上下文的渲染相同的线程上进行处理。话虽如此，[这个讨论](http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=256344)表明在第二个线程中使用 PBO 是一种选择，并且可以加快进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-24T07:16:27.987

您当然可以在任意数量的线程中将纹理从磁盘加载到 RAM 中，但由于 Reed 的回答中提到的原因，OpenGL 不会在多个线程中上传到 VRAM。

鉴于从磁盘加载是最慢的部分，这就是您可能想要线程化的部分。加载线程建立一个要上传的纹理队列，然后这个队列被拥有 GL 上下文的线程消耗（但是请注意，您可以通过各种线程访问该队列）。您还可以考虑每帧上传 N 个纹理的非线程方法，其中 N 是一个不会过多减慢渲染速度的数字。

# css - css布局问题。页边距和标准纸张尺寸

> ID：775219
> 
> 赞同：0
> 
> 时间：2009-04-22T00:11:24.137
> 
> 标签：css

我试图找出什么边距最适合可读性，我认为最好使用标准纸张尺寸和边距。我查了一下，好像8.5是标准的。我查找了如何做基本的 CSS 并遇到了问题

左边距：1.5 英寸；右边距：8.0in；

我除了左边将从左侧 1.5 处开始，右侧从左侧 8 英寸开始。事实证明，右边是 8 英寸，破坏了我的页面。无论用户浏览器的分辨率是多少，我如何设置它以使文本的宽度为 7 英寸？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T00:17:49.767

您可以将主体的宽度设置为 7 英寸。但是浏览器会自动为您布置文本以适合纸张。所以我会将左边距和右边距都设置为 1.5 英寸。您可以使用单独的 CSS 文件进行打印。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T02:17:24.380

看看[CSS 盒子模型](http://www.w3.org/TR/css3-box/#introduction)和[媒体类型规则](http://www.w3schools.com/css/css_mediatypes.asp)。@page[规则](http://www.w3.org/TR/CSS2/page.html)（用于分页媒体）也可能很有趣。

正如已经说过的，您应该使用该`width`属性来定义块级元素的宽度。然后，您可以使用`padding`和`margin`填充文本并在其容器周围放置边距。

像这样的东西可以让你指定打印的文档样式：

```
@media print {
  p {
    font-family: times,serif;
    font-size: 12px
    margin: 1cm 2cm;
    page-break-inside: avoid;
    widows: 2;
    orphans: 2;
  }
} 
```

我建议让打印机软件根据您指定的边距和用于打印的页面自动确定文本的尺寸。这样，用户可以更轻松地在他们想要的任何尺寸的纸张上打印。[以下是一些](http://www.w3schools.com/css/css_ref_print.asp)您可能希望用于格式化打印文档的特定于打印的 CSS 属性。

而且我相信衬线字体在印刷品上更容易阅读（或者人们这么说），所以这也可能值得考虑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T00:27:06.657

您正在向后看：margin-right 是从视口（或纸）右侧开始的宽度。所以对于一张 8.5 英寸的纸，四面都有 1 英寸的边距，你会想要：

```
body{
      margin-left: 1in;
      margin-right: 1in;
      width: 6.5in;
} 
```

# python - Python 目录漫游器

> ID：775231
> 
> 赞同：5
> 
> 时间：2009-04-22T00:19:13.010
> 
> 标签：python, directory-listing

我目前正在使用来自[这里的目录步行器](http://effbot.org/librarybook/os-path-walk-example-3.py)

```
import os
class DirectoryWalker:
# a forward iterator that traverses a directory tree

def __init__(self, directory):
    self.stack = [directory]
    self.files = []
    self.index = 0

def __getitem__(self, index):
    while 1:
        try:
            file = self.files[self.index]
            self.index = self.index + 1
        except IndexError:
            # pop next directory from stack
            self.directory = self.stack.pop()
            self.files = os.listdir(self.directory)
            self.index = 0
        else:
            # got a filename
            fullname = os.path.join(self.directory, file)
            if os.path.isdir(fullname) and not os.path.islink(fullname):
                self.stack.append(fullname)
            return fullname

for file in DirectoryWalker(os.path.abspath('.')):
    print file 
```

这个微小的更改允许您在文件中拥有完整路径。

任何人都可以帮助我如何使用它来查找文件名吗？我需要完整路径和文件名。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-22T17:40:32.583

为什么要自己做这么无聊的事情？

```
for path, directories, files in os.walk('.'):
    print 'ls %r' % path
    for directory in directories:
        print '    d%r' % directory
    for filename in files:
        print '    -%r' % filename 
```

输出：

```
'.'
    d'finction'
    d'.hg'
    -'setup.py'
    -'.hgignore'
'./finction'
    -'finction'
    -'cdg.pyc'
    -'util.pyc'
    -'cdg.py'
    -'util.py'
    -'__init__.pyc'
    -'__init__.py'
'./.hg'
    d'store'
    -'hgrc'
    -'requires'
    -'00changelog.i'
    -'undo.branch'
    -'dirstate'
    -'undo.dirstate'
    -'branch'
'./.hg/store'
    d'data'
    -'undo'
    -'00changelog.i'
    -'00manifest.i'
'./.hg/store/data'
    d'finction'
    -'.hgignore.i'
    -'setup.py.i'
'./.hg/store/data/finction'
    -'util.py.i'
    -'cdg.py.i'
    -'finction.i'
    -'____init____.py.i' 
```

[但是，如果您坚持，在os.path](http://docs.python.org/library/os.path.html)中有与路径相关的工具， os.basename 就是您正在查看的内容。

```
>>> import os.path
>>> os.path.basename('/hello/world.h')
'world.h' 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-22T00:26:32.367

而不是使用“。” 作为您的目录，请参考其绝对路径：

```
for file in DirectoryWalker(os.path.abspath('.')):
    print file 
```

另外，我建议使用“文件”以外的词，因为它在 python 语言中表示某些东西。不是关键字，但它仍然运行。

顺便说一句，在处理文件名时，我发现 os.path 模块非常有用——我建议你看一下，尤其是

```
os.path.normpath 
```

规范化路径（去除多余的 '.'s 和 'theFolderYouWereJustIn/../'s）

```
os.path.join 
```

加入两条路径

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T00:27:32.740

os.path.dirname()？os.path.normpath()？os.path.abspath()？

这也是一个思考递归的好地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T00:27:16.797

只需将当前目录路径添加到返回的“./foo”路径：

```
print os.path.join(os.getcwd(), file) 
```

# bonjour - 如何使用 mDNS 将所有子域路由到单个主机？

> ID：775233
> 
> 赞同：28
> 
> 时间：2009-04-22T00:20:02.057
> 
> 标签：bonjour, zeroconf, mdns

我有一个开发网络服务器托管为“myhost.local”，它是使用 Bonjour/mDNS 找到的。服务器正在运行 avahi-daemon。

网络服务器还想处理它自己的任何子域。例如“cat.myhost.local”、“dog.myhost.local”和“guppy.myhost.local”。

鉴于 myhost.local 位于 dhcp 的动态 IP 地址上，是否还有办法将子域的所有请求路由到 myhost.local？

我开始认为目前不可能...

[http://marc.info/?l=freedesktop-avahi&m=119561596630960&w=2](http://marc.info/?l=freedesktop-avahi&m=119561596630960&w=2)

> > 您可以使用 /etc/avahi/hosts 文件执行此操作。或者，您可以
> > 使用 avahi-publish-host-name。
> 
> 不他不能。因为他想定义一个别名，而不是一个新的主机名。即他只想注册一个A RR，没有反向PTR RR。但是，如果您将某些内容粘贴到 /etc/avahi/hosts 中，那么它会同时注册两者，并在 PTR RR 不唯一时检测到冲突，这就是别名的情况。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2010-10-09T08:05:15.197

我已经用分配给此任务的少量时间尽可能地解决了这个问题。

但不幸的是，我认为 avahi/msdns/bonjour 的 Windows 实现不支持别名（如果我对如何支持这个的示例有误，请纠正我）。

我所做的是从 avahi 网站上提供的示例 python 脚本开始：

## 创造 ：`/usr/bin/avahi-announce-alias`

使其可执行并填写

```
#! /usr/bin/env python
# avahi-alias.py

import avahi, dbus
from encodings.idna import ToASCII

# Got these from /usr/include/avahi-common/defs.h
CLASS_IN = 0x01
TYPE_CNAME = 0x05

TTL = 60

def publish_cname(cname):
    bus = dbus.SystemBus()
    server = dbus.Interface(bus.get_object(avahi.DBUS_NAME, avahi.DBUS_PATH_SERVER),
            avahi.DBUS_INTERFACE_SERVER)
    group = dbus.Interface(bus.get_object(avahi.DBUS_NAME, server.EntryGroupNew()),
            avahi.DBUS_INTERFACE_ENTRY_GROUP)

    rdata = createRR(server.GetHostNameFqdn())
    cname = encode_dns(cname)

    group.AddRecord(avahi.IF_UNSPEC, avahi.PROTO_UNSPEC, dbus.UInt32(0),
        cname, CLASS_IN, TYPE_CNAME, TTL, rdata)
    group.Commit()

def encode_dns(name):
    out = []
    for part in name.split('.'):
        if len(part) == 0: continue
        out.append(ToASCII(part))
    return '.'.join(out)

def createRR(name):
    out = []
    for part in name.split('.'):
        if len(part) == 0: continue
        out.append(chr(len(part)))
        out.append(ToASCII(part))
    out.append('\0')
    return ''.join(out)

if __name__ == '__main__':
    import time, sys, locale
    for each in sys.argv[1:]:
        name = unicode(each, locale.getpreferredencoding())
        publish_cname(name)
    try:
        # Just loop forever
        while 1: time.sleep(60)
    except KeyboardInterrupt:
        print "Exiting" 
```

此脚本处理每个别名的公告，并将一直运行直到您将其杀死。（因此，我们需要创建另一个脚本，如下所示）

## 创建文本文件`/etc/avahi/aliases`

我们用它来存储这台机器的别名，每行一个

## 创建目录`/etc/avahi/aliases.d/`

实际上我还没有在我在这里展示的任何脚本中使用它，但是对于那些有进取心的人来说，你可以看到需要做什么。

这个想法是您可以将别名分组到单独的文本文件中（当您在 apache 中处理虚拟主机时这将更有意义），这是 *nix 上的许多守护程序应用程序已经提供的东西（apache 和 apt 只是两个示例）。

## 创造`/usr/bin/avahi-announce-aliases`

使其可执行并填写

```
#!/usr/bin/env python

import os, sys
from subprocess import Popen

def ensure_file (path):
    """
        Looks for  file at provided path, creates it if it does not exist.
        Returns the file.
    """
    rfile = None    
    if not os.path.exists(path) and os.path.isfile(path) :
        rfile = open(path,"w+");
        print("ensuring file : %s " % path)

    print("file ensured : %s " % path)
    return rfile

command = '/usr/bin/avahi-announce-alias'
alias_pid_path = "/tmp/avahi-aliases.pid"
alias_file_path = "/etc/avahi/aliases"

alias_file = open(alias_file_path)
if not os.path.exists(alias_pid_path) :
    open(alias_pid_path,"w").close()

alias_pid = open(alias_pid_path,"r")

for line in alias_pid :
    txt = line.strip('\n')
    if len(txt) > 0 :
        print("kill %s" % txt )
        os.system("kill %s" % txt)          
alias_pid.close()
alias_pid = open(alias_pid_path,"w+")

for line in alias_file :
    txt = line.strip('\n')
    if len(txt) > 0 :
        print("publishing : << %s >>" % txt)
        process = Popen([command, txt])
        alias_pid.write("%s\n" % str(process.pid))    
alias_pid.close()

print("done") 
```

它绝不是 Python 编程的巅峰之作，因此请随意在您认为合适的地方进行改进。

## 用法

如果我们的主机名是“server”并且 avahi-hostname 是“server.local”，那么我们可以`/etc/avahi/aliases`使用您的额外主机名填充文本文件，如下所示：

```
deluge.server.local
username.server.local
accounts.server.local
something-else.server.local
another.hostname.home 
```

（但实际上，我很确定你可以在那里拥有任何主机名，只要你确保它在网络上不存在，这就是为什么我只是创建普通 avahi 主机名的“子域”）

然后我们运行：

`sudo avahi-publish-aliases`

我设置它的主要原因是为了便于在我的笔记本电脑上更轻松地模拟 django 和 drupal 网站开发。

## 注意事项

我唯一的失望是 Bonjour/Avahi 的 windows 实现不支持这个实现宣布的别名，它只会看到通常宣布的主要 avahi 主机名（即上面示例中的 server.local）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2010-03-14T01:01:40.730

我当时因为不可能而放弃了它，从那以后我就再也没有重新审视过这个问题。

我目前的解决方案是费力地将每个感兴趣的子域添加到本地机器上的 hosts 文件中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2011-12-31T01:02:48.633

看起来 airtonix 实现了这一点，并在[https://github.com/airtonix/avahi-aliases上提供了它](https://github.com/airtonix/avahi-aliases)

我在 Ubuntu 11.04 上测试过的更新的 fork 位于[https://github.com/hmalphettes/avahi-aliases](https://github.com/hmalphettes/avahi-aliases)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-10T04:15:42.860

您可以使用 Avahi API 注册其他记录。[Avahi wiki 上的此示例](http://www.avahi.org/wiki/Examples/PythonPublishAlias)演示了如何在 Python 中发布其他 CNAME（别名）记录。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-02T11:44:57.190

我知道这很旧，但更好的解决方案是[dnsmasq](https://github.com/mralexgray/dnsmasq)。

这可以简单地完成......通过参数/配置......

> 返回指定域中所有主机的 ipaddr。
> 
> `-A, --address=/<domain>/<ipaddr>`

> `address=/yourdomain.com/10.0.1.100`

瞧！

# java - ResultSet 方法“last”是最佳方法吗？

> ID：775240
> 
> 赞同：0
> 
> 时间：2009-04-22T00:23:28.927
> 
> 标签：java, jdbc

我有这个java代码可以做到这一点

```
ResulSet rs = stmt.executeQuery();
while (rs.next()) {
    .... //do regular processing

    if (rs.last()) {
       //do last record processing
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T00:28:43.440

您应该改用：[isLast()](http://java.sun.com/javase/6/docs/api/java/sql/ResultSet.html#isLast())。

请注意，并非所有 JDCB 驱动程序都支持此功能。显然，您必须在安装时检查它。

大多数主要数据库工作正常。

固定代码应如下所示。

```
if( rs.isLast() ) { 
   // do last record processing
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T00:31:30.733

就个人而言，我会在循环外声明从查询中检索到的变量，然后在循环之后执行“最后一条记录处理”。

```
ResulSet rs = stmt.executeQuery();
long primaryKey;

while (rs.next()) {
    primaryKey = rs.getLong(1);
    .... //do regular processing
}

// Do last record processing.
System.out.println("last primary key = " + primaryKey); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-22T00:50:20.453

否：rs.last() 实际上会将光标发送到 ResultSet 中的最后一行，这绝对不是您想要做的。您最多只能处理结果集中的 2 行（第一行和最后一行）。

# iis - 为什么 IIS 将我的 www 请求转发到没有 www 主机名的 TLD？

> ID：775243
> 
> 赞同：0
> 
> 时间：2009-04-22T00:24:28.333
> 
> 标签：iis, subdomain

我只是在我的 IIS 网站身份高级配置选项卡中设置了 2 个主机名。

它们是： 端口 80 www.mydomain.com 端口 80 mydomain.com

每当我访问 www.mydomain.com 时，它都会将我转发到 mydomain.com

我该如何解决它，以便它反过来，所有请求都转到 www.mydomain.com？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T00:27:15.843

这可能发生在您的应用程序中，在 IIS 中没有自动执行此操作的功能。但是，如果您真的不认为这是您的应用程序，请查看“主页”选项卡，看看是否选择了重定向。

# html - HTML 表格中的长行污染了其他行的布局

> ID：775248
> 
> 赞同：0
> 
> 时间：2009-04-22T00:26:00.543
> 
> 标签：html, css, css-tables

我有一个 html 表格作为页面的布局（我知道的不好的做法）。这张表是这样的：

```
Label1    Value1
Label2    Value2
Label3    Value3
Label4    Value4a   Value4b    Value4c   Value4d 
```

我刚刚添加了一条验证错误消息，该消息对于第一行来说可能非常大，所以现在是：

```
Label1    Value1    ErrorMessage
Label2    Value2
Label3    Value3
Label4    Value4a   Value4b    Value4c   Value4d 
```

为了使设计工作，我在包含验证消息的单元格中添加了一个 colspan，以便它跨越整个表格。它适用于长度小到不会溢出表的错误消息。除此之外，我得到：

```
Label1    Value1    Veeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeery long ErrorMessage
Label2    Value2
Label3    Value3
Label4    Value4a   Value4b                 Value4c               Value4d 
```

第4行完全搞砸了。有没有办法指定错误消息单元格内容应该溢出表格，而不是扩大同一列中其他单元格的空间？也许一些神奇的CSS？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-22T00:32:00.343

这是非常骇人听闻的，但可能适用于您的情况。如果可能，为每个内容单元格提供静态宽度。然后添加一个没有宽度的额外单元格。然后最后一个单元格应该扩展，而其他单元格则保持其设定的宽度。

编辑：根据您的评论您还可以尝试在 css 中为错误消息提供更高的[z-index 。](http://www.w3schools.com/Css/pr_pos_z-index.asp)您还需要设置消息[位置](http://www.w3schools.com/Css/pr_class_position.asp)以使其正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T00:51:09.330

好的，这是我在 Firefox 3 中测试并运行的解决方案：

```
<style type="text/css">
#error {
    width: inherit;
    overflow: auto;
    padding: 0;
    margin: 0;
}
</style>

<table width="400">
  <tr>
    <td width="100">A</td>
    <td colspan="3" width="300">
      <div id="error">Really long line...</div>
    </td>
  </tr>
  <tr>
    <td>1A</td>
    <td>1B</td>
    <td>1C</td>
    <td>1D</td>
  </tr>
  <tr>
    <td>2A</td>
    <td>2B</td>
    <td>2C</td>
    <td>2D</td>
  </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T01:00:59.290

要使文本延伸到表格之外，文本元素要么必须位于比表格更高的级别（分层），要么必须与表格无关地定位。

您可以通过执行以下操作来完成后者：

```
Label1    Value1    <span class="outside">Veeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeery long ErrorMessage</span>
Label2    Value2
Label3    Value3
Label4    Value4a   Value4b                 Value4c               Value4d 
```

然后给外面的课：

```
.outside
{
    position:absolute;
} 
```

您必须进行一些进一步的格式化才能使其显示在更正位置。

**编辑：**

刚刚意识到如果您也使用 Jose 的想法和 span 而不是 div，格式会清理一些。

```
table 
{
   table-layout:fixed;
   width:100em;
} 
```

# asp.net - 如何提高 IIS / ASP.Net 的启动性能

> ID：775256
> 
> 赞同：7
> 
> 时间：2009-04-22T00:29:19.177
> 
> 标签：asp.net, iis

我正在使用一个特别慢的虚拟网络主机（名字隐瞒！），其中磁盘性能可能非常糟糕。因此，第一次访问我的 ASP.Net 网站可能需要 1 分钟以上的时间来加载。（初始加载后，它都在 RAM 中并且很好。）

我想知道是否有人知道指示 IIS 预加载站点的方法？是精华，仿效第一击？

我玩过所有预编译的东西，它有帮助，但它不能替代上述内容。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T00:42:46.650

您的应用程序需要回收吗？所有回收选项都在 IIS 配置中，并且可以进行调整以适合您的应用程序。

理想的情况是删除所有应用程序回收，以便应用程序始终保持加载状态。只有在更改 web.config 文件或部署了新版本的应用程序时，才会发生回收。

如果需要每天回收，根据前面的答案，可以使用批处理文件来回收应用程序，它还可以使用应用程序的 URL 调用 iexplore.exe 来“预加载”它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T00:35:06.903

为什么不能有一个包含 iis 重置的批处理文件并安排它每天在特定时间执行（当您的系统上没有用户时）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T00:41:11.600

如果您的提供商可以在他们重新启动 Web 服务器时让您连接，您可以在 Web 服务器重新启动后让一个批处理文件/脚本文件访问您的网站。您只需要访问唯一的 ASP.NET 程序集文件即可将该特定程序集放入内存。因此，如果您有 1 个包含 10 页的程序集，只需点击其中一页。应该够了。如果您有超过 1 个程序集，请在每个程序集中点击 1 页以将这些程序集加载到内存中。

如果您无法在您的提供商处获得它，那么您必须自己想出一种更聪明的方法来执行此操作（即了解提供商何时重置 Web 服务器并在您的计算机中安排任务以自己访问这些页面）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T00:43:00.223

您希望预加载多少网站？多少页？

您可以预编译站点，以消除问题的“编译”部分，但如果站点足够大，“预加载”站点可能没有意义。如果站点在多个主机上运行，​​则尤其如此。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-22T01:45:43.660

在修改程序集后第一次从已编译的 ASP.NET 应用程序请求页面时，处理时间比处理普通页面请求要长得多。

因此，对您的问题的一个简单解决方案是在进行任何修改后立即从您的应用程序中请求一个页面。这样一来，您是第一个请求页面的人，您需要等待很长时间，而不是您的用户。

# php - 为什么我的表单值没有出现在 $_REQUEST 中？

> ID：775258
> 
> 赞同：0
> 
> 时间：2009-04-22T00:29:31.097
> 
> 标签：php, html, forms

我有来自 HTML 表单的代码：

```
<select name="history12">
    <option value="Gov/Econ">Government &amp; Economics</option>
    <option value="AP Gov/Econ">AP Government &amp; Economics</option>
</select> 
```

...以及此代码，以邮件形式：

```
$history12 = $_REQUEST['history12'] ; 
```

但是，当我尝试 echo() $history12 时，它总是返回空白。我不知道我做错了什么，因为其他输入工作正常（文本和收音机），但它似乎在选择时很糟糕。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-22T00:45:37.737

也许您可以尝试输出整个 $_REQUEST 变量，以确保您所期望的一切都显示出来。这可能至少表明是否设置了“history12”键。

```
print_r($_REQUEST); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-22T00:55:59.457

需要检查的几件事

*   它周围是否有表单元素
*   表单元素是否使用 POST
*   你从 print_r($_REQUEST); 得到什么吗？
*   作为最后的手段，你有没有看到任何地方的价值[`get_defined_vars()`](http://is.php.net/manual/en/function.get-defined-vars.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T01:07:14.627

如果以干净的形式重复了您的代码并且它工作正常。您的问题必须在其他地方。

获取此代码并开始添加其他组件，您可以测试一个给您带来问题的组件。

```
<form action="test.php" method="post">
<select name="history12">
    <option value="Gov/Econ">Government &amp; Economics</option>
    <option value="AP Gov/Econ">AP Government &amp; Economics</option>
</select>
<input name="send" type="submit" value="send" />
</form>
<?php

if(isset($_POST['history12'])) {
    $history12 = $_REQUEST['history12'] ;
    echo $history12;
}
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-22T11:43:00.667

您是否确保不会在上面的同名表单元素之后意外出现另一个表单元素？

我曾经有几次，例如“history12”作为下拉列表，但之后是一个隐藏字段，名称相同但没有值。这将覆盖选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-22T00:32:30.903

确保在提交表单时选择了某些内容。

默认情况下会选择某些内容，因此您更有可能在放置选择之前在某处擦除变量或在 html 中关闭表单。

您还可以在其他地方使用一些格式错误的 html 来对表单进行一些时髦的操作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-22T01:15:41.423

当我运行这个：

```
<form action='me.php' method='POST'>
<select name="history12">
    <option value="Gov/Econ">Government &amp; Economics</option>
    <option value="AP Gov/Econ">AP Government &amp; Economics</option>
</select>
<input type='submit' name='submit' value='lksjdflk' />
</form>
<pre>
<?php 

var_dump($_REQUEST);

?>
</pre> 
```

我明白了：

```
数组（2）{
  [“历史 12”]=>
  string(11) "AP 政府/经济"
  [“提交”]=>
  字符串（8）“lksjdflk”
}

```

您需要在表单周围发布 html 以及在服务器端接收它的代码。

另外，尝试将值从“Gov/Econ”更改为“Gov Econ”，看看你会得到什么。您可能正在运行一些处理 $_REQUEST 的代码，并使用正则表达式或其他东西做一些时髦的事情并剥夺您的价值。

# wix - WiX——总是覆盖以前的版本

> ID：775259
> 
> 赞同：20
> 
> 时间：2009-04-22T00:29:40.580
> 
> 标签：wix, overwrite, previous-installation

我有一个需要安装在任何现有版本上的应用程序的安装程序，无论版本号如何。

相反，我有一个安装程序，它经常说我需要去添加/删除程序。这对我的测试人员来说是非常令人沮丧的行为，因为它只是在他们心中没有真正原因的情况下减慢他们的速度——以前的安装程序包总是只会安装，删除以前存在的所有文件，所以他们不必执行该步骤。我们还有一个（庞大的）客户群，他们接受过类似的培训，我现在安装的任何版本都应该覆盖我之前可能安装的任何版本。

据我所知，WiX 范式似乎是做一些事情，比如阻止向后版本安装和其他复杂的事情，比如打补丁。坦率地说，我们的客户不够聪明，不知道或关心修补、合并等任何事情，他们只想要一个始终有效的安装程序（我倾向于同意他们的观点；带宽很便宜）。那我怎么得到呢？

我已经尝试过了，但这似乎并不重要：

```
<InstallExecuteSequence>
  <RemoveExistingProducts Before="InstallInitialize"/>
</InstallExecuteSequence> 
```

这是 WiX 的 3.0.5120 版本。

编辑：根据 Rob 的建议，我添加了以下代码：

```
<InstallExecuteSequence>
  <RemoveExistingProducts After="InstallInitialize"/>
</InstallExecuteSequence>

<Upgrade Id="27cb76c7-544e-465f-b1f3-b11d9a49e416">
  <UpgradeVersion Minimum="0.8.0"
                  IncludeMinimum="yes"
                  Maximum="1.5.1"
                  Property="OLDERVERSIONBEINGUPGRADED" />
</Upgrade> 
```

我没有添加不允许回滚安装的代码；出于令我非常尴尬的原因，我们只能说版本号的增加并不一定与软件质量的增加相关。我不希望任何人被锁定在他们认为他们需要的东西之外。

此外，非常重要的是将产品的默认 GUID 更改为“*”，以便使用不同的安装程序生成不同的 GUID，这显然是问题所在。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-22T02:31:05.720

你想要一个重大的升级。在 WiX.chm“How To”中有一个专门针对此的主题（也在网上：[http](http://wix.sourceforge.net/manual-wix3/major_upgrade.htm) ://wix.sourceforge.net/manual-wix3/major_upgrade.htm ）。

# .net - 将业务逻辑移出数据库时将其移到何处

> ID：775263
> 
> 赞同：2
> 
> 时间：2009-04-22T00:30:45.463
> 
> 标签：.net, sql, sql-server-2005, business-logic

我有一个重 CRUD 的 ASP.NET 应用程序，其中包含存储过程中的所有业务逻辑。

例如，有一个大约 500 行长的 UPDATE 存储过程，包含大量条件逻辑，引用多个表和 UDF。proc 接收正在更新的字段名称和新值，设置一堆声明的变量，进行一堆验证并创建一个动态 SQL 语句来进行更新。一旦尺寸适合所有。它很大而且很混乱。

我想将业务逻辑转移到 .NET 端，以便更轻松地管理/更新、测试和置于源代码控制之下。

我的问题是：这个业务逻辑应该去哪里？

假设我有一个带有名为“Factory”的属性的 PurchaseOrder 对象。如果工厂发生变化，我需要确保分配的新工厂生产采购订单上的产品，它有定价，并且根据该工厂要求的最低数量等。所有这些验证都需要在数据库。

我是否应该让 PurchaseOrder 对象的工厂设置器负责通过“isFactoryValid”方法/属性进行数据验证，该方法/属性对通用数据访问对象进行多次调用，然后进行更新（如果是）？

或者我是否创建一个负责处理与 PurchaseOrder 相关的数据访问的 PurchaseOrder/Database '代理'对象。在这种情况下，我是否会在由 PurchaseOrder 的设置器调用的代理中拥有一个“isFactoryValid”方法，然后调用代理的更新方法？

我如何确定是否需要担心所有这些额外调用会增加数据库的流量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T00:37:11.063

**一种方法：** 您在.net 中有一个数据层（一个或多个数据类），该层有一个接口......然后您有一个使用该接口执行业务逻辑的业务层。[http://en.wikipedia.org/wiki/Multitier_architecture](http://en.wikipedia.org/wiki/Multitier_architecture)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T00:43:11.283

有两种主要模式被广泛用于在 DB 之外实现持久性逻辑：

*   [ActiveRecord 模式](http://www.martinfowler.com/eaaCatalog/activeRecord.html)- 持久性逻辑在您的域对象中。
*   [存储库模式](http://www.martinfowler.com/eaaCatalog/repository.html)——一个单独的对象或层处理数据访问——你的“代理”概念解决了这个问题。

这两个对象的诀窍是*知道何时访问数据库并知道何时不访问*。例如，*将*在 DB 和域层之间进行冗余验证，例如，即使在您进行 DB 调用之前，您也应该评估非空值、将字符串截断为长度等。只有在这些检查完成之后应该调用数据库中的保存。

还有多种策略可用于提高性能或最小化数据库访问，例如延迟加载、事务等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T00:39:57.593

您还可以将业务逻辑转换为可重用的 Web 服务块。WCF 提供了很好的工具支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T00:49:05.510

研究领域驱动设计 (DDD)，它将回答您的许多问题。它讨论了用于数据访问的存储库和用于验证的规范。一个好的 ORM 也会有所帮助。这本书也很棒：

[替代文字 http://img117.imageshack.us/img117/5282/032112521501aa240sclzzzzzzzv38088225zh7.jpg](http://img117.imageshack.us/img117/5282/032112521501aa240sclzzzzzzzv38088225zh7.jpg)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-23T03:17:25.037

这将取决于您创建的对象模型以及您如何让调用者决定哪个工厂将是新工厂来处理 PurchaseOrder。

例如，如果您给调用者一个他们可以从中挑选的工厂列表，您可以将该列表过滤为仅支持与现有 PurchaseOrder 关联的产品的那些工厂（我假设您正在编辑现有订单）。如果您想让 PurchaseOrder 验证 Factory 可以处理订单，我会让 PurchaseOrder 上的设置器调用 Factory 上的方法（类似于 CanProcessOrderFor(product, quantity)）。

我假设您必须已经进行数据库查询才能获取工厂列表和采购订单。我会让工厂对象的查询返回他们支持的产品列表和当前数量（或最小订单——无论你的逻辑需要是什么）。

如果这是一个常见的场景，像 NHibernate 这样好的 ORM 可以让你缓存其中的一些结果以最小化往返。

# f# - 为什么 F# 函数返回“val FunctionName: int -> int”的签名？

> ID：775269
> 
> 赞同：1
> 
> 时间：2009-04-22T00:33:45.517
> 
> 标签：f#, monomorphism

我在[F# Wikibook on High Order Functions 上](http://en.wikibooks.org/wiki/F_Sharp_Programming/Higher_Order_Functions)关注了一些示例。

标题下的第二个代码片段，*Composition Function*具有以下代码片段。

```
#light
open System

let compose f g x = f (g x)

let xSquared x = x*x
let negXPlusFive x = -x/2.0 + 5.0

let fog = compose xSquared negXPlusFive

// ... Console.WriteLine statements.... 
```

我有问题的理解是

> ```
> let xSquared x = x*x 
> ```

当我单独使用 F# 交互式 shell (fsi.exe) 运行它时，我得到以下签名。

```
> let xSquared x = x*x;;

val xSquared : int -> int 
```

但是当我运行整个代码片段时，`xSquared`会返回以下内容。

```
val compose : ('a -> 'b) -> ('c -> 'a) -> 'c -> 'b
val xSquared : float -> float
val negXPlusFive : float -> float
val fog : (float -> float) 
```

为什么`xSquared`需要`float`取回`float`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-22T02:28:20.967

为了扩展 Sebastian 所说的内容和 jleedev 标记的内容，函数如下：

```
let xSquared x = x*x 
```

只能在具有运算符 * 的类型上工作。默认情况下， int 在这些情况下获胜。它不能是真正通用的，因为 .NET 没有一种方法来表示“任何具有 * 的类型”的约束。

但是，F# 支持内联，这允许函数更通用，因为它们被内联到每个调用点。这使您可以拥有像 xSquared 这样的函数，该函数适用于浮点数、整数等——任何带有 * 运算符的类型。

```
> let inline xSquared x = x*x;;

val inline xSquared :
   ^a ->  ^b when  ^a : (static member ( * ) :  ^a *  ^a ->  ^b) 
```

现在注意函数类型是 ^a -> ^b。这类似于'a -> 'b，除了类型变量必须静态解析。因为 F# 没有类型类，所以这就是操作符的处理方式。

实际上，您可以使用自己的 * 成员定义自己的类型来做任何您想做的事情，并且它可以与 xSquared 一起使用：

```
type Foo(x) =
    member this.Y = x - 1
    static member (*) (x:Foo, y:Foo) = string <| x.Y * y.Y + 1

let a = Foo(10);;

type Foo =
  class
    new : x:int -> Foo
    member Y : int
    static member ( * ) : x:Foo * y:Foo -> string
  end
val a : Foo

> xSquared a;;
val it : string = "82" 
```

只需在您的 F# 发行版中打开 prim-types.fs 并四处寻找。第 2200 行左右是 >>> 的定义和其他炫耀内联和其他漂亮东西的定义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-22T00:36:41.517

借助更多信息，F# 可以确定使用浮点参数调用 xSquared。如果您将 negXPlusFive 更改为“let negXPlusFive x = -x + 5”，您会发现它，fog 和 xSquared 将是“int -> int”。

# windows - 跨平台的分区管理库？

> ID：775270
> 
> 赞同：1
> 
> 时间：2009-04-22T00:34:15.843
> 
> 标签：windows, linux, cross-platform, partitioning

我正在寻找可以在 Windows 和 Linux 上运行的某种分区管理库（最好是 Python 的，但任何东西都可以）。（特别是用于使用 USB 设备，但任何硬盘工具都应该这样做）

我们宁愿不实现两个不同的库，因为这会使其更难维护，但到目前为止，我们还没有找到任何在这方面提供跨平台兼容性的东西。

这是给用户分区 USB 闪存棒的（我应该把它放在问题中），我们希望他们不知道如何分区，更不用说以*我们的*方式进行分区了。我们的具体案例是使用以特殊方式制作的 EXT3 文件系统设置 USB 闪存驱动器（以便与 USB_ZIP 兼容）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-04T06:46:24.587

您可以使用来自 GNU parted ( [http://www.gnu.org/software/parted/index.shtml](http://www.gnu.org/software/parted/index.shtml) ) 的 libparted，也可以打开一个到 sfdisk 的管道，这是大多数 linux 发行版上最可编写脚本的分区工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-30T20:20:38.017

由于分区是一项风险很大的业务，除非安装操作系统，否则我想知道您为什么要通过库从应用程序内部执行此操作。

为什么不直接通过例如 system() 调用调用适用于操作系统的可用分区应用程序？这样，您将确保向用户呈现他熟悉的 UI（假设他至少做过一次分区）。

# java - Axis Web 服务是否需要 AAR 文件？

> ID：775274
> 
> 赞同：1
> 
> 时间：2009-04-22T00:36:06.807
> 
> 标签：java, web-services, axis

我开始使用 Java 编写的基于 Axis 的 Web 服务，它将在 WebSphere 上运行。

我的问题是，我可以像往常一样将它捆绑为 Web 应用程序，作为 EAR 文件中的 WAR 文件，还是我需要在 WAR 文件中的 EAR 文件中的 AAR 文件？

还是 AAR 文件只是用于自行打包 Web 服务组件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T05:37:05.880

如果您使用的是 Axis2，我相信您确实需要一个 .aar 文件。

请记住，.aar 文件只是一个 .jar 文件，具有特定的结构：META-INF 文件夹中的 services.xml 文件。

# c - SQLite C 警告

> ID：775276
> 
> 赞同：1
> 
> 时间：2009-04-22T00:36:59.283
> 
> 标签：c, sqlite, compiler-warnings

我正在使用 sqlite3.c 库。
它编译时带有 140 个转换警告。
我的设置有什么问题？

谢谢。

```
sqlite3.c
c:\Projects\Lib\sqlite3.c(11311) : warning C4244: '=' : conversion from 'double' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(11312) : warning C4244: '=' : conversion from 'double' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(11313) : warning C4244: '=' : conversion from 'double' to 'sqlite3_int64', possible loss of data
c:\Projects\Lib\sqlite3.c(11316) : warning C4244: '+=' : conversion from 'double' to 'sqlite3_int64', possible loss of data
c:\Projects\Lib\sqlite3.c(11430) : warning C4244: '=' : conversion from 'sqlite3_int64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(11431) : warning C4244: '=' : conversion from 'double' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(11434) : warning C4244: '=' : conversion from 'double' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(11435) : warning C4244: '=' : conversion from 'double' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(11436) : warning C4244: '=' : conversion from 'double' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(11437) : warning C4244: '=' : conversion from 'double' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(11452) : warning C4244: '=' : conversion from 'sqlite3_int64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(11454) : warning C4244: '=' : conversion from 'double' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(11499) : warning C4244: 'initializing' : conversion from 'double' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(11505) : warning C4244: '=' : conversion from 'double' to 'time_t', possible loss of data
c:\Projects\Lib\sqlite3.c(11547) : warning C4244: 'return' : conversion from 'sqlite3_int64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(11607) : warning C4244: '=' : conversion from 'double' to 'sqlite3_int64', possible loss of data
c:\Projects\Lib\sqlite3.c(11633) : warning C4244: '=' : conversion from 'double' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(11720) : warning C4244: '+=' : conversion from 'double' to 'sqlite3_int64', possible loss of data
c:\Projects\Lib\sqlite3.c(11722) : warning C4244: '+=' : conversion from 'double' to 'sqlite3_int64', possible loss of data
c:\Projects\Lib\sqlite3.c(11724) : warning C4244: '+=' : conversion from 'double' to 'sqlite3_int64', possible loss of data
c:\Projects\Lib\sqlite3.c(11726) : warning C4244: '+=' : conversion from 'double' to 'sqlite3_int64', possible loss of data
c:\Projects\Lib\sqlite3.c(11730) : warning C4244: '+=' : conversion from 'double' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(11736) : warning C4244: '=' : conversion from 'double' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(11738) : warning C4244: '+=' : conversion from 'double' to 'sqlite3_int64', possible loss of data
c:\Projects\Lib\sqlite3.c(11742) : warning C4244: '+=' : conversion from 'double' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(11781) : warning C4244: '=' : conversion from 'double' to 'sqlite3_int64', possible loss of data
c:\Projects\Lib\sqlite3.c(11950) : warning C4244: 'function' : conversion from 'u64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(11981) : warning C4244: '=' : conversion from 'double' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(11984) : warning C4244: '=' : conversion from 'sqlite3_int64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(12007) : warning C4244: '=' : conversion from 'sqlite3_int64' to 'char', possible loss of data
c:\Projects\Lib\sqlite3.c(12607) : warning C4244: 'return' : conversion from 'sqlite3_int64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(16030) : warning C4244: '=' : conversion from 'sqlite3_int64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(17184) : warning C4244: 'initializing' : conversion from 'sqlite_uint64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(17512) : warning C4244: '=' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(19310) : warning C4244: '=' : conversion from 'u64' to 'unsigned char', possible loss of data
c:\Projects\Lib\sqlite3.c(19313) : warning C4244: '=' : conversion from 'u64' to 'unsigned char', possible loss of data
c:\Projects\Lib\sqlite3.c(19320) : warning C4244: '=' : conversion from 'u64' to 'u8', possible loss of data
c:\Projects\Lib\sqlite3.c(25669) : warning C4244: 'initializing' : conversion from 'sqlite3_int64' to 'LONG', possible loss of data
c:\Projects\Lib\sqlite3.c(25670) : warning C4244: 'initializing' : conversion from 'sqlite3_int64' to 'LONG', possible loss of data
c:\Projects\Lib\sqlite3.c(25702) : warning C4244: 'initializing' : conversion from 'sqlite3_int64' to 'LONG', possible loss of data
c:\Projects\Lib\sqlite3.c(25703) : warning C4244: 'initializing' : conversion from 'sqlite3_int64' to 'LONG', possible loss of data
c:\Projects\Lib\sqlite3.c(25735) : warning C4244: 'initializing' : conversion from 'sqlite3_int64' to 'LONG', possible loss of data
c:\Projects\Lib\sqlite3.c(25736) : warning C4244: 'initializing' : conversion from 'sqlite3_int64' to 'LONG', possible loss of data
c:\Projects\Lib\sqlite3.c(28785) : warning C4018: '>=' : signed/unsigned mismatch
c:\Projects\Lib\sqlite3.c(29505) : warning C4244: 'function' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(29511) : warning C4244: 'function' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(29734) : warning C4244: '=' : conversion from 'i64' to 'u32', possible loss of data
c:\Projects\Lib\sqlite3.c(29747) : warning C4244: '=' : conversion from 'i64' to 'u32', possible loss of data
c:\Projects\Lib\sqlite3.c(29871) : warning C4244: '=' : conversion from 'i64' to 'u32', possible loss of data
c:\Projects\Lib\sqlite3.c(29887) : warning C4244: '=' : conversion from 'i64' to 'u32', possible loss of data
c:\Projects\Lib\sqlite3.c(30081) : warning C4018: '>' : signed/unsigned mismatch
c:\Projects\Lib\sqlite3.c(30360) : warning C4244: '=' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(30367) : warning C4244: '=' : conversion from 'i64' to 'Pgno', possible loss of data
c:\Projects\Lib\sqlite3.c(30370) : warning C4244: '=' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(30665) : warning C4018: '<=' : signed/unsigned mismatch
c:\Projects\Lib\sqlite3.c(31713) : warning C4018: '>' : signed/unsigned mismatch
c:\Projects\Lib\sqlite3.c(31771) : warning C4018: '>' : signed/unsigned mismatch
c:\Projects\Lib\sqlite3.c(31978) : warning C4018: '<=' : signed/unsigned mismatch
c:\Projects\Lib\sqlite3.c(33807) : warning C4244: 'function' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(33809) : warning C4244: 'function' : conversion from 'i64' to 'u32', possible loss of data
c:\Projects\Lib\sqlite3.c(34527) : warning C4244: '=' : conversion from 'u16' to 'unsigned char', possible loss of data
c:\Projects\Lib\sqlite3.c(34623) : warning C4018: '>' : signed/unsigned mismatch
c:\Projects\Lib\sqlite3.c(35382) : warning C4244: '=' : conversion from 'u16' to 'unsigned char', possible loss of data
c:\Projects\Lib\sqlite3.c(35884) : warning C4018: '<=' : signed/unsigned mismatch
c:\Projects\Lib\sqlite3.c(36557) : warning C4018: '<=' : signed/unsigned mismatch
c:\Projects\Lib\sqlite3.c(36674) : warning C4244: '=' : conversion from 'i64' to 'u32', possible loss of data
c:\Projects\Lib\sqlite3.c(36679) : warning C4018: '>' : signed/unsigned mismatch
c:\Projects\Lib\sqlite3.c(36880) : warning C4244: '=' : conversion from 'i64' to 'u32', possible loss of data
c:\Projects\Lib\sqlite3.c(36887) : warning C4018: '>' : signed/unsigned mismatch
c:\Projects\Lib\sqlite3.c(37265) : warning C4244: 'function' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(37267) : warning C4244: 'function' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(37272) : warning C4244: 'function' : conversion from 'i64' to 'u32', possible loss of data
c:\Projects\Lib\sqlite3.c(37273) : warning C4244: 'function' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(37343) : warning C4244: 'function' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(37557) : warning C4018: '<=' : signed/unsigned mismatch
c:\Projects\Lib\sqlite3.c(37695) : warning C4018: '>' : signed/unsigned mismatch
c:\Projects\Lib\sqlite3.c(37891) : warning C4018: '>' : signed/unsigned mismatch
c:\Projects\Lib\sqlite3.c(37962) : warning C4244: '+=' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(37964) : warning C4244: '=' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(38070) : warning C4244: '=' : conversion from 'u16' to 'u8', possible loss of data
c:\Projects\Lib\sqlite3.c(38150) : warning C4244: '=' : conversion from 'u16' to 'u8', possible loss of data
c:\Projects\Lib\sqlite3.c(39686) : warning C4018: '>' : signed/unsigned mismatch
c:\Projects\Lib\sqlite3.c(40231) : warning C4244: '+=' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(40541) : warning C4244: '=' : conversion from 'i64' to 'Pgno', possible loss of data
c:\Projects\Lib\sqlite3.c(40590) : warning C4244: 'initializing' : conversion from 'sqlite3_int64' to 'Pgno', possible loss of data
c:\Projects\Lib\sqlite3.c(40671) : warning C4244: 'initializing' : conversion from 'i64' to 'Pgno', possible loss of data
c:\Projects\Lib\sqlite3.c(41144) : warning C4244: '=' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(41152) : warning C4244: 'function' : conversion from 'i64' to 'size_t', possible loss of data
c:\Projects\Lib\sqlite3.c(41153) : warning C4244: '+=' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(41493) : warning C4244: '+=' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(41688) : warning C4244: '=' : conversion from 'const i64' to 'double', possible loss of data
c:\Projects\Lib\sqlite3.c(41693) : warning C4244: '=' : conversion from 'const i64' to 'double', possible loss of data
c:\Projects\Lib\sqlite3.c(42031) : warning C4244: 'return' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(43995) : warning C4244: 'return' : conversion from 'i64' to 'u32', possible loss of data
c:\Projects\Lib\sqlite3.c(44011) : warning C4244: '+=' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(44118) : warning C4244: '=' : conversion from 'u64' to 'u8', possible loss of data
c:\Projects\Lib\sqlite3.c(44132) : warning C4244: '+=' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(44287) : warning C4018: '<' : signed/unsigned mismatch
c:\Projects\Lib\sqlite3.c(44382) : warning C4018: '>=' : signed/unsigned mismatch
c:\Projects\Lib\sqlite3.c(44444) : warning C4244: 'function' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(44489) : warning C4244: 'function' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(44827) : warning C4244: 'return' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(45006) : warning C4244: '=' : conversion from 'double' to 'i64', possible loss of data
c:\Projects\Lib\sqlite3.c(45036) : warning C4244: '=' : conversion from 'double' to 'u64', possible loss of data
c:\Projects\Lib\sqlite3.c(46720) : warning C4244: '=' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(46735) : warning C4244: '=' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(47061) : warning C4244: 'function' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(47071) : warning C4244: '=' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(47168) : warning C4244: '=' : conversion from 'i64' to 'double', possible loss of data
c:\Projects\Lib\sqlite3.c(47961) : warning C4244: '=' : conversion from 'i64' to 'u32', possible loss of data
c:\Projects\Lib\sqlite3.c(47982) : warning C4018: '>' : signed/unsigned mismatch
c:\Projects\Lib\sqlite3.c(48020) : warning C4018: '>=' : signed/unsigned mismatch
c:\Projects\Lib\sqlite3.c(48038) : warning C4018: '<' : signed/unsigned mismatch
c:\Projects\Lib\sqlite3.c(48055) : warning C4018: '<' : signed/unsigned mismatch
c:\Projects\Lib\sqlite3.c(48235) : warning C4244: '+=' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(48258) : warning C4244: 'function' : conversion from 'u64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(48270) : warning C4244: 'function' : conversion from 'u64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(48275) : warning C4244: '=' : conversion from 'u64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(48493) : warning C4244: '=' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(48497) : warning C4244: '=' : conversion from 'i64' to 'u8', possible loss of data
c:\Projects\Lib\sqlite3.c(48633) : warning C4244: '=' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(49420) : warning C4244: '=' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(49564) : warning C4244: '=' : conversion from 'i64' to 'u32', possible loss of data
c:\Projects\Lib\sqlite3.c(49567) : warning C4018: '>' : signed/unsigned mismatch
c:\Projects\Lib\sqlite3.c(50183) : warning C4244: '=' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(50189) : warning C4244: 'function' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(50635) : warning C4244: '=' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(50636) : warning C4244: '=' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(62675) : warning C4244: 'function' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(62711) : warning C4244: 'function' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(63239) : warning C4244: 'function' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(63512) : warning C4244: 'initializing' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(63513) : warning C4244: 'initializing' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(63514) : warning C4244: 'initializing' : conversion from 'i64' to 'int', possible loss of data
c:\Projects\Lib\sqlite3.c(65536) : warning C4049: compiler limit : terminating line number emission
        Compiler limit for line number is 65535
c:\Projects\Lib\sqlite3.c(77234) : warning C4244: '=' : conversion from 'u16' to 'unsigned char', possible loss of data 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T00:45:46.300

从 SQLite 网站：

> 有人说我们应该消除所有警告，因为良性警告掩盖了未来变化中可能出现的真实警告。这是真的。但作为回应，开发人员观察到所有警告都已在用于 SQLite 开发的编译器（各种版本的 GCC）中修复。编译器警告仅来自开发人员无权访问的编译器。

[http://www.sqlite.org/faq.html#q17](http://www.sqlite.org/faq.html#q17)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-12-16T22:09:47.497

在 Visual Studio 2005 或 2008 中，只需在 sqlite.c 上即可轻松配置编译器警告级别。这样，您可以在您编写的所有代码上使用一个很好的详细 /w4 并在 sqlite3.c 上使用 /w1，这样您就不会收到这些警告。在解决方案资源管理器中右键单击 sqlite.c，单击属性，向下钻取到配置属性 -> C/C++ -> 常规，然后从警告级别下拉列表中选择 /W1 或 /W0。

我没有在其他版本的 VS 或 VC++ 中尝试过这种方法。如果您提到您的特定编译器/IDE，那就太好了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T00:43:32.920

不，这不是你的设置。SQLite 写有很多警告。他们已经很多年没有修好了。没什么可做的，但忽略警告或贡献回补丁

# java - ant 任务将属性文件复制到 java 构建目录中的相应位置

> ID：775279
> 
> 赞同：6
> 
> 时间：2009-04-22T00:37:41.000
> 
> 标签：java, ant, properties

好吧，我难住了。

我有一个看起来像相当典型的 Eclipse Java 构建的 Java 树：

```
myproject
  src
    com
      example
        test
          // Java files in com.example.test here
  bin
    com
      example
        test
          // Compiled class files will go here 
```

现在我有一个`MyClass.properties`文件`myproject/src/com/example/test`和源 Java 文件。如何编写一个适当的 ant 任务来将源树中所有更改的 .properties 文件复制到它们在构建（`myproject/bin`）树中的相应位置？

（其中更容易的一半是做实际的复制；我猜这更难的一半是检查依赖关系）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-22T01:17:06.020

怎么样：

```
<copy todir="myproject/bin">
   <fileset dir="myproject/src" includes="**/*.properties"/>
</copy> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-22T00:41:33.407

来自关于任务的 Ant 手册：

> 将文件或资源集合复制到新文件或目录。默认情况下，仅当源文件比目标文件新或目标文件不存在时才会复制文件。但是，您可以使用 overwrite 属性显式覆盖文件。

# iphone - iPhone - 库 UINavigationController 和我的子类 UINavigationController 之间的区别

> ID：775284
> 
> 赞同：0
> 
> 时间：2009-04-22T00:39:54.630
> 
> 标签：iphone, cocoa-touch, uinavigationcontroller, controller, uitabbarcontroller

我试图了解使用`UINavigationController`Nib 内部（通过库窗口）和子类化`UINavigationController`. （出于这个问题的目的，我不仅仅指的是导航控制器；我指的是界面生成器的库窗口中包含的任何控制器。）

首先，我想我的第一个问题是：将库中的“控制器”添加到 nib 是否会创建该控制器的实例？如果不是，那么这样做的目的或正常的最终目标是什么。我很难找到任何能够真正解释 IB 部分的材料。这是一个屏幕截图，可以帮助说明我的问题。

![Xcode 笔尖窗口](https://i.stack.imgur.com/ylVZM.jpg)

在我的笔尖窗口屏幕截图中，当我添加`UITabBarController`到笔尖时会发生什么？这会给我一个 a 的实例`UITabBarController`吗？

我的问题的最后一部分是（假设我最初的假设是正确的），为什么我要对类进行子`UITabBarController`类化（在这种情况下）而不是将其添加到笔尖？

![Xcode 库](https://i.stack.imgur.com/42qTu.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-22T00:52:17.423

对于您的第一个问题：是的，它确实创建了一个`UINavigationController`. 然后，您必须将 a 添加`UINavigationController`到 File's Owner 类并将它们与`IBOutlet`.

```
IBOutlet UINavigationController *nav; 
```

然后在Interface Builder cntl中+单击File's Owner，拖到builder上的Nav Controller，释放，然后选择nav。

对于您的其余问题，问题是您是否需要对`UITabController`.

# c# - 哪种应用程序最适合非交互式运行？

> ID：775290
> 
> 赞同：0
> 
> 时间：2009-04-22T00:42:42.360
> 
> 标签：c#, .net

我需要创建一个可以使用批处理文件激活的应用程序。

应用程序将接受文件名的单个字符串参数。然后它将对该文件运行一些处理并将另一个文件放在预定位置并退出。

应用程序不需要与实际用户交互。

我的首选平台是使用 C# 的 .net。

我最初计划编写一个控制台应用程序，但不确定这是不是最好的主意。

完成这项任务的最佳方法是什么？有没有办法创建一个由批处理文件触发的 Windows 服务？这更可取吗？Windows 窗体项目会更受欢迎吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T00:46:29.777

选项一：控制台应用程序。使用 Windows 计划程序在计划时间运行它。（受到推崇的）

选项二：具有一些内置调度程序或轮询器的 Windows 服务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-22T01:14:18.227

我最喜欢的选择，也是我说服我的前任雇主采用作为公司政策的选择，如下：

所有服务器类型的应用程序都是在没有任何类型的直接附加 UI 的情况下编写的。这在设计阶段是否编译为控制台应用程序、Windows 应用程序或其他方式都无关紧要——对于 .NET，差异归结为翻转编译器开关。不过一般来说，由于程序在没有直接人工干预的情况下运行，我们通常将其设计为作为服务运行——服务控制管理器负责启动和关闭，可以在应用程序失败时重新启动应用程序，并且有很多好处编写桌面应用程序时很难自己完成的事情。

接下来，您让服务器应用程序通过网络侦听“管理员”进行连接。此管理员连接是您的 UI。SSL 加密和身份验证等事情取决于您和您的公司，但在此基础上，我建议构建一个基于行的人类可读界面。这样您就可以使用 telnet 连接到它并发出诸如“ `show connections`”、“ `drop user 52`”和“ `restart`”之类的命令。任何种类的管理行为，以及任何种类的状态和统计信息都应该使用这个接口公开。首先，这有助于调试，其次，它会导致下一步......

最后构建一个 UI。一个简单的可能。此 UI 的部分配置是指定要连接的主机和端口，以及任何身份验证位。UI 应用程序连接到运行服务的机器并通过网络管理界面发出命令，并解释结果。在我们公司，每个新 UI 都是一个插件模块，是一个更大项目的一部分。该项目将显示代表各种服务器及其状态的小红灯和绿灯。单击服务器将允许您“向下钻取”该服务器并检查其状态或配置的各个方面。

尽管该项目最初只是我在一两台服务器上的小程序，但它很快发展到包括数十台服务器，每台服务器运行少数服务，在不同的操作系统上运行，并在世界各地的许多城市中运行。这种简单的 UI 策略使我们能够在一个座位上轻松跟踪和控制数百种此类服务，或者同时在不同办公室的不同办公桌上。

可扩展性意味着不需要有人在计算机前点击您编写的程序上的按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T00:57:40.217

开发最快的东西可能是控制台应用程序，带有批处理文件，由 Windows 计划任务（或类似的东西）触发。

这样，您只需要开发应用程序本身的功能，而不是想出一个调度框架。

您还可以利用计划任务提供的功能，例如日志记录、易于自定义的计划、错误报告等。Windows 计划任务的另一个选项可能是使用 SQL Server 计划作业，它也提供了很好的作业历史记录。

综上所述，如果你走这条路，你确实有额外的依赖关系，如果你编写自己的 Windows 服务，你可能会消除这些依赖关系。此外，如果部署是一个问题，那么使用安装程序编写 Windows 服务可以让您更好地控制安装过程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T00:45:39.107

如果它是非交互式的，那么控制台几乎肯定是要走的路，因为您可以简单地将它放在后台并不管它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-22T00:47:49.400

您当然可以创建一个 Windows 服务来监视要放入特定文件夹的文件。然后批处理文件可以将文件放入该文件夹中。

不过，我建议您找到一个更好的理由这样做。问问自己，“这比只运行控制台程序并指定文件名的批处理作业有什么好处”？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-22T01:12:38.747

带有 FileSystemWatcher 的 Windows 服务，它监视相关文件夹，而不是始终在线的控制台应用程序。这就是它们的用途，如果系统出现故障，您不必记住将文件放在上面，也不必将其放入 Windows 启动中。只需将服务设置为自动启动。

# python - MySQL参数化查询

> ID：775296
> 
> 赞同：85
> 
> 时间：2009-04-22T00:43:21.360
> 
> 标签：python, mysql, bind-variables

我很难使用 MySQLdb 模块将信息插入我的数据库。我需要在表中插入 6 个变量。

```
cursor.execute ("""
    INSERT INTO Songs (SongName, SongArtist, SongAlbum, SongGenre, SongLength, SongLocation)
    VALUES
        (var1, var2, var3, var4, var5, var6)

""") 
```

有人可以帮我这里的语法吗？

* * *

## 回答 #1

> 赞同：275
> 
> 时间：2009-04-22T01:35:26.493

请注意对 SQL 查询使用字符串插值，因为它不会正确转义输入参数，并且会使您的应用程序容易受到 SQL 注入漏洞的影响。**差异可能看起来微不足道，但实际上它是巨大的**。

### 不正确（存在安全问题）

```
c.execute("SELECT * FROM foo WHERE bar = %s AND baz = %s" % (param1, param2)) 
```

### 正确（转义）

```
c.execute("SELECT * FROM foo WHERE bar = %s AND baz = %s", (param1, param2)) 
```

它增加了混淆，用于在 SQL 语句中绑定参数的修饰符在不同的 DB API 实现之间有所不同，并且 mysql 客户端库使用`printf`样式语法而不是更普遍接受的“？” 标记（例如使用`python-sqlite`）。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2009-04-22T01:04:31.387

你有几个可用的选项。你会想要熟悉 python 的字符串迭代。当您想知道这样的事情时，您将来可能会更成功地搜索这个术语。

更适合查询：

```
some_dictionary_with_the_data = {
    'name': 'awesome song',
    'artist': 'some band',
    etc...
}
cursor.execute ("""
            INSERT INTO Songs (SongName, SongArtist, SongAlbum, SongGenre, SongLength, SongLocation)
            VALUES
                (%(name)s, %(artist)s, %(album)s, %(genre)s, %(length)s, %(location)s)

        """, some_dictionary_with_the_data) 
```

考虑到您可能已经在对象或字典中拥有所有数据，第二种格式将更适合您。此外，当您必须在一年内回来更新此方法时，必须在字符串中计算“%s”的出现次数，这很糟糕:)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2009-04-22T00:53:31.710

链接的文档给出了以下示例：

```
 cursor.execute ("""
         UPDATE animal SET name = %s
         WHERE name = %s
       """, ("snake", "turtle"))
   print "Number of rows updated: %d" % cursor.rowcount 
```

因此，您只需将其调整为您自己的代码 - 例如：

```
cursor.execute ("""
            INSERT INTO Songs (SongName, SongArtist, SongAlbum, SongGenre, SongLength, SongLocation)
            VALUES
                (%s, %s, %s, %s, %s, %s)

        """, (var1, var2, var3, var4, var5, var6)) 
```

（如果 SongLength 是数字，您可能需要使用 %d 而不是 %s）。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2011-03-27T09:31:30.457

实际上，即使您的变量 (SongLength) 是数字，您仍然必须使用 %s 对其进行格式化才能正确绑定参数。如果你尝试使用 %d，你会得到一个错误。[这是此链接http://mysql-python.sourceforge.net/MySQLdb.html](http://mysql-python.sourceforge.net/MySQLdb.html)的一小段摘录：

要执行查询，首先需要一个游标，然后可以对其执行查询：

```
c=db.cursor()
max_price=5
c.execute("""SELECT spam, eggs, sausage FROM breakfast
          WHERE price < %s""", (max_price,)) 
```

在这个例子中，max_price=5 那么为什么在字符串中使用 %s 呢？因为 MySQLdb 会将其转换为 SQL 文字值，即字符串 '5'。完成后，查询实际上会说“...WHERE price < 5”。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-04-12T20:28:19.750

作为所选答案的替代方案，并且具有与 Marcel 相同的安全语义，这是一种使用 Python 字典指定值的紧凑方法。它的好处是在您添加或删除要插入的列时易于修改：

```
 meta_cols = ('SongName','SongArtist','SongAlbum','SongGenre')
  insert = 'insert into Songs ({0}) values ({1})'.format(
      ','.join(meta_cols), ','.join( ['%s']*len(meta_cols)))
  args = [ meta[i] for i in meta_cols ]
  cursor = db.cursor()
  cursor.execute(insert,args)
  db.commit() 
```

其中**meta**是保存要插入的值的字典。更新可以用同样的方式完成：

```
 meta_cols = ('SongName','SongArtist','SongAlbum','SongGenre')
  update='update Songs set {0} where id=%s'.
        .format(','.join([ '{0}=%s'.format(c) for c in meta_cols ]))
  args = [ meta[i] for i in meta_cols ]
  args.append(songid)
  cursor=db.cursor()
  cursor.execute(update,args)
  db.commit() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-09-12T21:24:13.530

第一个解决方案效果很好。我想在这里添加一个小细节。确保您尝试替换/更新的变量必须是 str 类型。我的 mysql 类型是十进制，但我必须将参数变量设置为 str 才能执行查询。

```
temp = "100"
myCursor.execute("UPDATE testDB.UPS SET netAmount = %s WHERE auditSysNum = '42452'",(temp,))
myCursor.execute(var) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-01T00:04:21.277

这是另一种方法。它记录在 MySQL 官方网站上。 [https://dev.mysql.com/doc/connector-python/en/connector-python-api-mysqlcursor-execute.html](https://dev.mysql.com/doc/connector-python/en/connector-python-api-mysqlcursor-execute.html)

在精神上，它使用了与@Trey Stout 的回答相同的机制。但是，我发现这个更漂亮，更具可读性。

```
insert_stmt = (
  "INSERT INTO employees (emp_no, first_name, last_name, hire_date) "
  "VALUES (%s, %s, %s, %s)"
)
data = (2, 'Jane', 'Doe', datetime.date(2012, 3, 23))
cursor.execute(insert_stmt, data) 
```

为了更好地说明对变量的任何需求：

注意：请注意正在完成的转义。

```
employee_id = 2
first_name = "Jane"
last_name = "Doe"

insert_stmt = (
  "INSERT INTO employees (emp_no, first_name, last_name, hire_date) "
  "VALUES (%s, %s, %s, %s)"
)
data = (employee_id, conn.escape_string(first_name), conn.escape_string(last_name), datetime.date(2012, 3, 23))
cursor.execute(insert_stmt, data) 
```

# asp.net - asp.net ajax 控件可以用作纯客户端控件吗？

> ID：775297
> 
> 赞同：4
> 
> 时间：2009-04-22T00:43:25.213
> 
> 标签：asp.net, asp.net-mvc, asp.net-ajax

所以，我的问题是，是否可以在没有服务器端控件和 ASP.NET Ajax ScriptManager 的情况下使用[Control Toolkit中的任何 ASP.NET Ajax 控件。](http://www.asp.net/AJAX/AjaxControlToolkit/Samples/Default.aspx)

作为参考，我在 ASP.NET MVC 应用程序的上下文中询问。

显然，某些控件在此模型中没有意义，因为它们会回发到服务器以完成它们的工作（例如 Autocomplete、CascadingDropDown 等）。

但是，在非 ASP.NET Web 窗体应用程序中使用一些控件会很有趣。例如，我真的很想在我的一个项目中使用[日历](http://www.asp.net/AJAX/AjaxControlToolkit/Samples/Calendar/Calendar.aspx)控件*。但我的好奇心不仅仅是日历控件，所以如果有一种在“纯客户端”模式下使用它们的通用方法，我会很感兴趣。

如果这是可能的，你能指出我如何做到这一点的任何例子或资源吗？

*是的，我知道在 JQuery UI 中有类似日历控件的替代方案，但为了与其他已经存在的非 MVC 项目保持一致，我更喜欢使用 Microsoft 日历控件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T01:25:59.463

我相信他们正在重构 Ajax 控件工具包以仅允许更多客户端（尤其是在 ASP.NET MVC 中使用）。工具包的仅脚本版本在[这里](http://ajaxcontroltoolkit.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=16488)（您想要仅包含脚本文件的版本）。

Stephen Walther 有几篇关于使用它的优秀博客文章，特别是其中一篇用于[日历控件](http://stephenwalther.com/blog/archive/2008/08/22/asp-net-mvc-tip-36-create-a-popup-calendar-helper.aspx)，一篇用于[自动完成文本字段](http://stephenwalther.com/blog/archive/2008/08/24/asp-net-mvc-tip-37-create-an-auto-complete-text-field.aspx)（如果您搜索它们，可能还有其他）。

# ruby - 在 ruby 中增长二进制有效载荷

> ID：775302
> 
> 赞同：1
> 
> 时间：2009-04-22T00:45:38.093
> 
> 标签：ruby, literals

我是 ruby​​ 新手，正在寻找一种方法来创建随机二进制数据的“有效负载”。

```
def payload_grow(payload_stack)
  payload = payload_stack
  valid_chars = ("a".."f").to_a + ("0".."9").to_a
  length = valid_chars.size
  hex_code = ""
  hex_code << valid_chars[rand(length-1)]
  hex_code
  payload = payload + '0x' + hex_code + hex_code
  payload
end 
```

我遇到的问题是我希望有效负载是文字而不是字符串或整数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T00:57:54.117

创建一个随机的字节数组非常简单：

```
irb> Array.new(256) { rand(256) }
#=> [60, 169, 218, 174, 221, 164, 188, 150, 240, 204, 161, 252, 174, 209, 98, 202, 251, 169, 114, 26, 7, 28, 5, 75, 251, 54, 173, 25, 106, 209, 200, 98, 215, 127, 214, 145, 37, 255, 90, 11, 92, 56, 85, 152, 250, 178, 127, 60, 242, 155, 102, 115, 41, 28, 81, 236, 240, 185, 157, 98, 173, 10, 149, 135, 0, 103, 180, 101, 159, 177, 169, 163, 20, 63, 77, 208, 26, 170, 33, 53, 148, 15, 154, 36, 108, 161, 255, 134, 153, 67, 144, 218, 85, 40, 236, 154, 21, 40, 236, 45, 199, 34, 81, 133, 136, 14, 106, 9, 23, 115, 88, 200, 63, 42, 242, 101, 28, 80, 194, 253, 252, 185, 65, 86, 44, 69, 100, 255, 101, 21, 79, 116, 193, 74, 225, 229, 50, 174, 164, 68, 243, 246, 216, 96, 25, 59, 143, 25, 201, 87, 6, 34, 158, 74, 240, 119, 17, 5, 251, 108, 52, 200, 169, 67, 29, 59, 63, 223, 184, 75, 50, 24, 157, 1, 143, 114, 84, 124, 248, 166, 74, 197, 196, 166, 221, 55, 219, 121, 111, 72, 253, 112, 74, 204, 7, 202, 225, 147, 154, 52, 182, 110, 216, 151, 160, 154, 127, 36, 138, 192, 237, 52, 31, 147, 193, 203, 112, 134, 142, 242, 211, 125, 197, 109, 222, 151, 151, 61, 213, 16, 154, 186, 154, 219, 213, 49, 221, 225, 111, 131, 22, 192, 236, 127, 59, 147, 195, 54, 157, 171, 35, 141, 188, 68, 107, 173] 
```

这可以很容易地压缩成一个字节字符串，然后可以使用以下命令将其写入文件或其他任何内容`Array#pack`：

```
irb> Array.new(256) { rand(256) }.pack('c*')
#=> "Xw.\254\202.\371r%\302\262\353\245\322\032\017\215O\025*~\333\333\031\331$\210V\345~=e\267\222u\e\363s\332u\320x\373\020ObR\t\375$\262%\177\307\277\334Q\201\311cV\035#3\327\313\366\n\314\336\342=`\032r\025\004\362\037\326`mS\271\316\232\207?+\224\237\304H\231\346oB\227 e?\344\031\3255\374tP\200>\324\352\240\203&\3335|a@\v\017\374\344^\315f#\300\346\024NTZ\236\327ZpB8\347\022R\256\326P\326F@\r\224+\321y\203\262\215N\022Q\240\326~>\356\373\v;\003\322\355P\242\304)\263#::E\310\311]\216\335d\001\02206\034\201\177\365\316P\t\267+\243\243]\000U2\221\347]8\357\343\312\324G\277[0hg\221\202\375\322xc`\363\031\231DU\335GI\327\304\346\231\035z\3155\244\312=\260\267\316X\350\027\2418\v\263\217" 
```

或者您可以使用以下命令创建一个随机十六进制字符串数组`String#%`：

```
irb> Array.new(100) { "%02x" % rand(256) }
#=> ["77", "ed", "06", "55", "ba", "29", "72", "a5", "78", "09", "6e", "19", "46", "ad", "00", "73", "69", "5a", "e0", "a2", "fe", "78", "62", "7b", "b6", "67", "ef", "a9", "5b", "c1", "45", "9b", "a6", "40", "77", "1d", "5a", "65", "e3", "ab", "31", "00", "8f", "e1", "11", "b2", "34", "f7", "46", "f6", "8b", "4f", "5b", "65", "43", "a4", "f2", "09", "ac", "d1", "d4", "6d", "b6", "8b", "ee", "b5", "8b", "de", "8b", "e2", "1f", "a4", "9c", "06", "45", "7a", "b4", "d7", "a7", "39", "f9", "92", "13", "13", "8a", "2b", "5b", "dc", "2f", "63", "cb", "68", "7b", "85", "0f", "f8", "46", "dd", "84", "53"]
irb> Array.new(100) { "%02x" % rand(256) }.join(' ')
#=> "28 69 8e ae c7 bb 95 d1 b7 dc fe 17 7f 01 cf 2e 33 10 ab 2f eb e5 d8 e7 ec 75 70 0d f0 2b 06 f4 c9 bd af 6c 90 4b 82 8e 0e 3c 36 67 57 2a 5f 5f 39 17 5d 34 24 58 a4 f7 99 3c a8 d7 d3 a2 69 4c 0e e5 82 3d 0a 71 ec e8 d1 a9 ca 76 37 78 b5 cb 10 09 bd 31 20 85 c4 0a 40 8f de 44 db e4 02 d2 cc 45 06 68" 
```

我不确定您在这里所说的“文字”是什么意思，您能进一步解释一下吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T03:40:53.243

我在 BinData 中找到了我想要的东西

# scala - 为什么 this.type 不能用于新实例

> ID：775312
> 
> 赞同：14
> 
> 时间：2009-04-22T00:50:01.547
> 
> 标签：scala

我希望能够使用 this.type 来定义一种方法，该方法可以创建不可变案例类的新实例。像这样的东西：

```
trait Expression
{
  def left : Expression
  def right : Expression

  def new_with_changes(l : Expression, r : Expression) : this.type
}

case class Derived(left : Expression, right : Expression)
{
  def new_with_changes(l : Expression, r : Expression) : this.type =
  {
    new Derived(left, right)
  }
} 
```

不幸的是，编译器抱怨

```
test.scala:13: error: type mismatch;
 found   : Derived
 required: Derived.this.type
    new Derived(left, right)
    ^
one error found 
```

为什么新的案例类与 this.type 不匹配？

如果我在 Base.new_with_changes 中将 this.type 更改为 Base 并在 Derived.new_with_changes 中将 Derived 更改为有效，但它似乎错过了 this.type 的优点。

编辑：问题的真正意图是为什么在 Scala 中没有一种等效的方式来声明向下的调用者执行向下转换，这与 this.type 所做的方式非常相似，但对于一般类型。我不认为这很容易，但它会很好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-22T02:19:36.043

this.type 是这个特定实例的唯一类型。它是一个单例类型 - 与同一类的任何其他实例不同的类型。这有效

```
class Foo { def f : this.type = this} 
```

但这并不

```
class Foo { def f : this.type = new Foo} 
```

this.type 并不经常需要，但它可以用来表达一些不能以其他方式表达的约束

例如，这里的 Inner 类说每个实例的外部方法将返回它来自的特定 Outer 实例。

```
scala> class Outer{ class Inner { def outer : Outer.this.type = Outer.this}; def f(x : Inner) = println("ok")}
defined class Outer

scala> val o1 = new Outer
o1: Outer = Outer@13c1b69

scala> val o2 = new Outer
o2: Outer = Outer@1a3f178

scala> val in1 = new o1.Inner
in1: o1.Inner = Outer$Inner@627b5c

scala> val in2 = new o2.Inner
in2: o2.Inner = Outer$Inner@158c3b7

scala> val o3 = in1.outer
o3: o1.type = Outer@13c1b69

scala> o1.f(new o3.Inner)  
ok

scala> o1.f(new o2.Inner)
<console>:8: error: type mismatch;
 found   : o2.Inner
 required: o1.Inner
       o1.f(new o2.Inner) 
```

本文有另一个使用 this.type 启用跨子类边界的方法链接的好例子：http: [//scalada.blogspot.com/2008/02/thistype-for-chaining-method-calls.html](http://scalada.blogspot.com/2008/02/thistype-for-chaining-method-calls.html)

```
scala>   class A { def method1: this.type = this }
defined class A

scala>   class B extends A { def method2: this.type = this }
defined class B

scala> val b = new B
b: B = B@15cb235

scala> b.method1.method2
res3: b.type = B@15cb235 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-26T16:39:52.310

[注意：我不建议你这样做。] 你很有可能完成你想要的。对 this.type 的强制转换是一个谎言，但是 JVM 不知道这一点并且不能抛出异常，因为单例类型是一个 scala 概念。

现在，如果您实际上在任何地方使用 this.type 的单例属性，这会让您很快陷入困境。但是，如果您想要做的只是获得协变返回类型而无需键入它们的所有麻烦，只有到处都是巨大的丑陋演员的小缺点：

```
trait Expression
{
  def left : Expression
  def right : Expression

  def new_with_changes(l : Expression, r : Expression) : this.type
}

case class Derived1(left : Expression, right : Expression) extends Expression {
  def new_with_changes(l : Expression, r : Expression) =
    Derived1(left, right).asInstanceOf[this.type]

  def foo() = "Derived1"
}

case class Derived2(left : Expression, right : Expression) extends Expression {
  def new_with_changes(l : Expression, r : Expression) =
    Derived2(left, right).asInstanceOf[this.type]

  def bar() = "Derived2"  
} 
```

在行动中：

```
scala> Derived1(Derived1(null,null), null)
res0: Derived1 = Derived1(Derived1(null,null),null)

scala> res0.new_with_changes(res0, null).bar
<console>:6: error: value bar is not a member of Derived1
       res0.new_with_changes(res0, null).bar
                                         ^

scala> res0.new_with_changes(res0, null).foo
res2: java.lang.String = Derived1

scala> Derived2(Derived2(null, null), null)
res3: Derived2 = Derived2(Derived2(null,null),null)

scala> res3.new_with_changes(null, res3).foo
<console>:6: error: value foo is not a member of Derived2
       res3.new_with_changes(null, res3).foo
                                         ^

scala> res3.new_with_changes(null, res3).bar
res6: java.lang.String = Derived2 
```

# c++ - 用于操作基础/派生对象容器的函数

> ID：775325
> 
> 赞同：0
> 
> 时间：2009-04-22T00:55:00.270
> 
> 标签：c++, generics, stl, templates

考虑以下带有数组的算法：

```
class MyType;
{
    // some stuff
}

class MySubType:MyType
{
    // some stuff
}

void foo(MyType** arr, int len)
{
    for (int i = 0;i<len;i++)
        // do something on arr[i]->
}

void bar()
{
    MySubType* arr[10];
    // initialize all MySubType*'s in arr
    foo(&arr, 10);
} 
```

这里没有什么太花哨的。我的问题是 - 我如何使用模板来做到这一点？

```
void foo(std::vector<MyType>& s)
{
    std::vector<MyType>::iterator i;
    for (i = s.begin(); i != s.end(); i++)
        // do stuff on *i
} 
```

所以，在酒吧，我不能这样做：

```
void bar()
{
    std::vector<MySubType> s;
    foo(s);  // compiler error
} 
```

`std::vector<MyType, std::allocator<MyType> >&`错误：来自类型表达式的类型引用的无效初始化`std::vector<MySubType, std::allocator<MySubType> >`

有没有办法做这样的事情？

基本上，如果有办法做到这一点：

```
std::vector<MySubType> s;
std::vector<MyType>& t = s; 
```

我会幸福的...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-22T01:03:42.543

这可能会解决您的问题

```
template <typename T>
void foo(std::vector<T>& s)
{
    typename std::vector<T>::iterator i;
    for (i = s.begin(); i != s.end(); i++)
        // do stuff on *i
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-22T02:09:24.837

为了扩展[kuoson 的答案](https://stackoverflow.com/questions/775325/how-do-i-do-this-in-c/775343#775343)，惯用的 C++ 风格是将迭代器传递给函数而不是容器。

```
template<typename Iterator>
void foo(const Iterator & begin, const Iterator & end)
{
    Iterator i;
    for (i = begin;  i != end;  ++i)
        // do stuff on *i
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-22T01:00:14.830

这就是问题所在 - 如果 s 和 t 指向同一个对象，有什么可以阻止您将`MyOtherSubType`（与 MySubType 无关）放入 t 中？这将使 s 包含不是 MySubType 的对象。我不知道有任何类型安全的编程语言可以让你做到这一点。如果允许，想象一下我们会遇到的问题：

```
//MySubType inherits from MyType
//MyOtherSubType also inherits from MyType

std::vector<MySubType> s;
std::vector<MyType>& t = s;

MyOtherSubType o;
t.push_back(o); 
```

由于 t 和 s 是不同名称的完全相同的对象，因此 s[0] 处的元素不是 MySubType。巨大的问题——我们永远无法确定我们的向量是否包含它们应该包含的类型！因此，编译不允许它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-22T01:40:09.150

既然您说“这里没什么特别的”，我不确定您是否意识到这一点：

您的原始代码已损坏；或者如果你很幸运，它现在可能不会被破坏，但它非常脆弱，一旦有人做了比看`MySubType`课更多的事情就会破坏。

问题是你传递了一个`MyType*`to`foo()`但它确实指向一个数组`MySubType`。如果一个`MySubType`对象碰巧比一个`MyType`对象大（如果你在派生类中添加了任何东西，这很可能），那么在`foo()`函数中完成的指针运算将是不正确的。

这是派生类对象数组的严重且经典的缺陷之一。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-22T06:19:40.070

如果您想将多个不同`MyType`派生类型的对象存储在单个向量中（我怀疑您会这样做，尽管对于这个特定示例来说这不是必需的），您需要使用 a`std::vector<MyType*>`而不是`std::vector<MyType>`. 此建议类似于 Michael Burr 为您的原始指针代码提出的建议。

这确实有一个不幸的副作用，您不能将 a 隐式转换`std::vector<MySubType*>`为 a`std::vector<MyType*>`来调用`foo()`。但是转换代码并不太繁琐：

```
void foo(std::vector<MyType*>& s)
{
    ...
}

void bar()
{
    std::vector<MySubType*> s;

    // Populate s
    ...

    std::vector<MyType*> u(s.begin(), s.end());    // Convert
    foo(u);
} 
```

或者，从一开始就`bar()`使用 a `std::vector<MyType*>`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-22T01:00:26.653

C++ 不支持模板类型的协变，与 C# 目前所做的一样，原因大致相同。如果您想这样做，最好将您的向量模板化为一个通用接口类型（指向该类型的指针），并使函数 foo 接受该类型的向量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-22T01:03:39.813

不幸的是，没有。不同的模板特化被认为是不同的类；你不能在`std::vector<MyType>`和之间转换`std::vector<MySubType>`。

您可以将“do stuff”的公共位`foo()`拆分为一个单独的函数，并在每个向量上有一个单独的循环（或可能使用`std::foreach`）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-22T01:54:33.153

使用 boost（用于智能指针）：

```
foo( std::vector<boost::shared_ptr<MyType> >& v )
{
   std::for_each( v.begin(),
                  v.end(),
                  do_something );
}

bar()
{
    std::vector<boost::shared_ptr<MyType> > s;
    // s.push_back( boost::shared_ptr<MyType> ( new MySubType() ) );
    foo( s ); 
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-22T02:24:52.567

如果我知道这些 foobars 背后的真正代码是什么，那么也许我会知道得更好，但是在 STL 中是否已经有解决您的问题的方法？

```
for_each(s.begin(), s.end(), DoStuffOnI()); 
```

只需将“在 *i 上执行操作”代码放在函数或仿函数中即可：

```
struct DoStuffOnI : public std::unary_function<MyType&,void> {
    void operator()(MyType& obj) {
        // do stuff on *i
    }
}; 
```

如果您对发送两个参数而不是一个参数感到烦恼，那么好吧，也许您可​​以执行以下操作：

```
template<typename In>
struct input_sequence_range : public std::pair<In,In> {
    input_sequence_range(In first, In last) : std::pair<In,In>(first, last)
    {
    }
};

template<typename C>
input_sequence_range<typename C::iterator> iseq(C& c)
{
    return input_sequence_range<typename C::iterator>(c.begin(), c.end());
}

template<typename In, typename Pred>
void for_each(input_sequence_range<In> r, Pred p) {
    std::for_each(r.first, r.second, p);
} 
```

然后像这样调用 for_each ：

```
for_each(iseq(s), DoStuffOnI()); 
```

# asp.net - 在哪里可以下载 DLR 的托管 JScript？

> ID：775339
> 
> 赞同：3
> 
> 时间：2009-04-22T01:01:49.740
> 
> 标签：asp.net, wpf, dynamic-language-runtime, managed-jscript

动态语言运行时的最新版本（0.9 稳定版）包含 IronPython 和 IronRuby，但不包含托管 JScript。

有谁知道我可以在哪里下载最新版本的托管 JScript 以用于 ASP.NET 和/或 WPF？

如果您不知道，JScript.NET 和托管 JScript 是完全不同的东西。我正在寻找的是托管 JScript。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-20T04:46:07.993

更新...

Silverlight 动态语言 SDK 0.5.0[发行说明](http://sdlsdk.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=25120)于 2009 年 3 月 23 日在[CodePlex](http://codeplex.com)上发布，其中包含这个小宝石：

> 托管 JScript 已从包中删除。

当在[此线程](http://dlr.codeplex.com/Thread/View.aspx?ThreadId=58121)中被问及托管 JScript (IronJScript) 的未来时，[动态语言运行时论坛的协调员 Bill (](http://dlr.codeplex.com) [billchi](http://www.codeplex.com/site/users/view/billchi) )有以下说法：

> DLR JScript 是实验性的，用于通知 DLR 的设计（表达式树、互操作、调用站点、托管等）。随着 DLR 继续发展以在 CLR 4.0 中发布，我们使用 asp futures 和 Silverlight 动态 sdk 发布的 JS 变得非常陈旧且无法使用。不幸的是，目前没有开发和发布 DLR 可托管 JScript 的计划。
> 
> 谢谢，
> 
> 账单

（编辑以添加稍后帖子的报价）

> JScript 团队将继续支持将本机 Jscript (jscript.dll) 与 IActiveScript 一起使用。他们还将继续为 Jscript.NET 提供服务，但此时他们没有做出其他承诺。
> 
> 账单

考虑到 JScript.NET 脚本 API 现在都已过时（尽管它们仍然存在于 .NET 2.0 中），因此似乎没有脱离 JScript (JavaScript) 的 ActiveScripting 实现的 .NET 升级路径。

我可以建议将讨论（抗议 ;-) 定向到[该线程](http://dlr.codeplex.com/Thread/View.aspx?ThreadId=58121)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-04-08T20:18:33.283

不要害怕，Fredrik Holmström 正在研究[IronJS](http://github.com/fholm/IronJS "IronJS")，这是一个在 F# 中的 DLR 上的 JavaScript 实现。他目前的目标是 .NET 2.0、3.5 和 4.0 以及 Mono 2.6，但最终希望在库变得更加稳定时实现 Silverlight 集成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-24T00:49:38.710

本周在 Redmond“Metro”DotNet 期货会议上传出的谣言是，MSFT 决定终止 DLR 上的 ManagedJScript。

这就是我们没有听到任何消息的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-08-20T02:21:52.390

下载托管 JS： [http ://www.microsoft.com/downloads/details.aspx?FamilyID=a5189bcb-ef81-4c12-9733-e294d13a58e6&displaylang=en](http://www.microsoft.com/downloads/details.aspx?FamilyID=a5189bcb-ef81-4c12-9733-e294d13a58e6&displaylang=en)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-22T01:21:18.447

根据[这篇博](http://blogs.msdn.com/gauravseth/archive/2007/08/16/difference-between-jscript-jscript-net-and-managed-jscript.aspx)文，托管 JScript 作为 Silverlight 2 (1.1) 的一部分提供。要编写应用程序，您需要[动态语言 SDK](http://silverlight.net/learn/dynamiclanguages.aspx)。

**编辑：**对于 ASP.NET，它在[ASP.NET Futures中可用，但根据](http://www.microsoft.com/downloads/details.aspx?familyid=A5189BCB-EF81-4C12-9733-E294D13A58E6&displaylang=en)[此条目](http://forums.asp.net/t/1353527.aspx)已“退休”，目前在另一个官方版本中不可用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-22T01:54:30.550

您可以在 ASP.NET 期货中找到它

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-22T13:21:13.567

相对于 IronPython 或 IronRuby，托管 JScript 真的很难找到。几乎唯一可以找到它的地方是 ASP.Net 期货。但现在已经两年了，不支持。ECMAScript 5 现在正在标准化，应该在 2009 年的某个时间完成。也许微软正在等到新标准出来。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-22T13:05:51.757

你见过 ROScript 吗？[http://www.remobjects.com/script.aspx](http://www.remobjects.com/script.aspx) 应该支持 ECMAScirpt 和 PascalScript

# c# - 如何使用 ASP.NET MVC 将所选项目添加到数据库中

> ID：775340
> 
> 赞同：0
> 
> 时间：2009-04-22T01:02:06.870
> 
> 标签：c#, asp.net-mvc

```
 <% foreach (FoodMenu f in (IEnumerable)ViewData.Model)
      { 
         %>            

        <ul >
          <li><%= Html.Encode(f.ProductId) %> </li>     
    <li><%= Html.Encode(f.Name) %></li>
    <li><%= Html.Encode(f.Price) %> </li>
     <li><%= Html.CheckBox("Selected") %></p></li>      

       </ul>

      </div> 

      <% } %> 
```

我想将所选项目添加到数据库中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T01:21:18.710

将所选产品的 id 编码到复选框的名称中。

```
<%= Html.CheckBox("Selected_" + f.ProductId) %> 
```

在服务器端，遍历 ValueProviderKeys 并找到选择并从选择的那些中提取产品 ID。

```
foreach (var key in this.ValueProvider.Keys.Where( k => k.StartsWith( "Selected_" ) )
{
     // for a checkbox I think this is something like true,false if the
     // visible checkbox is checked.  There is an invisible checkbox
     // (set to false), that is checked by default so you get both when
     // the true checkbox is checked.
     bool selected = this.ValueProvider[key].AttemptedValue.Contains("true");
     int productID = int.Parse( key.Replace("Selected_",null) );

     ...store selected product id in db...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T02:20:01.673

最好的方法是为您的复选框列表使用模型绑定，请参阅此处的帖子：http:
[//haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

# c++ - 网络摄像头驱动设置？

> ID：775349
> 
> 赞同：1
> 
> 时间：2009-04-22T01:07:26.933
> 
> 标签：c++, ubuntu, opencv, webcam

我正在开发一个 C++ 应用程序，该应用程序使用 OpenCV/ffmpeg 从我的内置网络摄像头（Studio XPS 13）捕获视频帧。这个应用程序对网络摄像头驱动程序所做的那些自动灯光调整非常敏感......有什么办法可以改变这种行为吗？通过一些网络摄像头驱动程序设置应用程序，或在代码中（您可能会建议不同的库）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-24T21:39:21.110

好吧，我不确定最常用的方法是什么，但我知道我的网络摄像头 (ov511) 的模块可以选择调整所有这些设置...尝试运行`modinfo`内核模块。

# isapi - Isapi 重写过滤器最终进入循环

> ID：775350
> 
> 赞同：0
> 
> 时间：2009-04-22T01:08:41.860
> 
> 标签：isapi

我正在使用 ionics isapi rewrite filter 将所有 .asp 文件重定向到 validate.asp 文件以进行会话验证。但我最终陷入了一个循环。任何帮助将非常感激。

**我的 .ini 文件**

```
ReDirectRule ^/XXXX/(.*).asp?(.*)  /YYYY/validate.asp$2&url1=$1&url2=$2 [R] 
```

**验证.asp**

```
<% 
'validation step goes here..

Response.Redirect("../XXXX"&Request.QueryString("url1")&".asp"&Request.QueryString("url2"))
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T08:11:12.687

**ini.文件**

```
ReWriteRule ^/XXXX/(.+).asp(?:\?(.*))?$ /YYYY/validate.asp?$2&url1=$1&url2=$2 [L] 
```

**验证.asp**

```
'validation step goes here..

Server.Transfer("../XXXX"&Request.QueryString("url1") & ".asp") 
```

[Server.Transfer](http://www.w3schools.com/asp/met_transfer.asp)方法将在一个 ASP 文件中创建的所有状态信息（所有应用程序/会话变量和请求集合中的所有项）发送（传输）到第二个 ASP 文件。

# python - os.path.exists() 用于路径中的文件？

> ID：775351
> 
> 赞同：16
> 
> 时间：2009-04-22T01:09:31.657
> 
> 标签：python, windows

我通常`os.path.exists()`在对其进行任何操作之前检查文件是否存在。

我遇到过一种情况，我正在调用配置的 env 路径中的可执行文件，因此可以在不指定`abspath`.

在调用文件之前是否可以检查文件是否存在？（我可能会依赖`try/except`，但首先我正在寻找替代品`os.path.exists()`）

顺便说一句 - 我在 Windows 上这样做。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-04-22T01:16:08.800

您可以获取 PATH 环境变量，并为路径中每个目录中的 .exe 尝试“exists()”。但这可能会表现得很糟糕。

查找 notepad.exe 的示例：

```
import os
for p in os.environ["PATH"].split(os.pathsep):
    print os.path.exists(os.path.join(p, 'notepad.exe')) 
```

更聪明的例子：

```
if not any([os.path.exists(os.path.join(p, executable) for p in os.environ["PATH"].split(os.pathsep)]):
    print "can't find %s" % executable 
```

您是否有特定的原因要避免异常？（除了教条？）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-08-24T12:25:35.850

使用 Carl Meyer 对 PATHEXT 的评论扩展 Trey Stout 的搜索：

```
import os
def exists_in_path(cmd):
  # can't search the path if a directory is specified
  assert not os.path.dirname(cmd)

  extensions = os.environ.get("PATHEXT", "").split(os.pathsep)
  for directory in os.environ.get("PATH", "").split(os.pathsep):
    base = os.path.join(directory, cmd)
    options = [base] + [(base + ext) for ext in extensions]
    for filename in options:
      if os.path.exists(filename):
        return True
  return False 
```

编辑：感谢 Aviv（在我的博客上）我现在知道有一个 Twisted 实现：[twisted.python.procutils.which](http://twistedmatrix.com/trac/browser/tags/releases/twisted-8.2.0/twisted/python/procutils.py)

编辑：在 Python 3.3 及更高版本中，标准库中有[shutil.which()](https://docs.python.org/3/library/shutil.html#shutil.which)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-22T12:51:26.400

请注意，检查存在然后打开总是对竞争条件开放。该文件可能会在您的程序检查和下一次访问该文件之间消失，因为其他程序继续在机器上运行。

因此，即使您的代码“确定”该文件存在，也可能仍然会引发异常。毕竟，这就是为什么它们被称为异常。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-22T15:53:31.453

您通常不应该 os.path.exists 试图弄清楚某事是否会成功。您应该尝试一下，如果您愿意，可以在失败时处理异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-22T12:37:50.673

在 Unix 上，您必须拆分 PATH 变量。

```
if any([os.path.exists(os.path.join(p,progname)) for p in os.environ["PATH"].split(":")]):
    do_something() 
```

# sql - 使用存储过程作为“动态”视图？

> ID：775356
> 
> 赞同：1
> 
> 时间：2009-04-22T01:14:23.173
> 
> 标签：sql, postgresql

我想创建一个“视图”，以从我正在开发的应用程序中的大约 90 个查询中消除相同的三行子查询。

问题是子查询包含基于变量的条件。

```
SELECT * FROM items WHERE id NOT IN (
  SELECT item_id FROM excluded_items WHERE user_id = 123
); 
```

如果它不是可变的，我可以简单地制作一个视图并完成它。

不过，我不确定在这种情况下该怎么做。在视图后面采用相同的心态，我很想创建一个返回所需记录集的存储过程，以便可以这样调用它：

```
SELECT * FROM user_items(123); 
```

现在我有一个地方可以更新此项目排除和任何其他条件，但是如果我想将该 SP 的结果与其他表结合起来，我不确定索引会受到怎样的影响？

那么这是好/坏的做法吗？有没有另一种方法可以做到这一点，还是我应该把它吸起来并继续复制这个子查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T01:27:09.070

像往常一样，*您的里程可能会有所不同*。如果您担心在代码语法方面这是一个好的做法，我认为这并不重要。使用存储过程从中返回记录集是一件很正常的事情，如果它可以节省您的开发时间 - 那么为什么不这样做呢？但是，如果您已经确定查询执行时间的成本受到负面影响，以至于您的业务成本超过了程序员的生产力，那么请务必不要使用存储过程。

多年来，我听到了很多关于存储过程的玩笑，人们称它们为邪恶的最佳实践。我得出的结论是一如既往地为工作使用正确的工具。

要确定更改对性能的确切影响，请使用以下命令执行一些测试查询：

```
EXPLAIN ANALYZE SELECT * FROM items WHERE id NOT IN (
  SELECT item_id FROM excluded_items WHERE user_id = 123
); 
```

接着

```
EXPLAIN ANALYZE SELECT * FROM user_items(123); 
```

然后比较执行时间和查询计划。我认为您将能够做出更明智的决定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-08T09:44:00.240

你有没有尝试过类似的东西

```
create view user_items as (
  select i.*, u.id as user_id
    from (items i cross join users u)
      left join excluded_items e
      on (i.id = e.item_id
        and u.id = e.user_id)
    where e.item_id is null
); 
```

已经？我使用 PostgreSQL 8.3 对其进行了测试，如果您在简单查询中使用视图，它能够将 user_id 上的条件拉入交叉连接，例如

```
select *
  from user_items ui
  where user_id = 1; 
```

如果您使用此视图的查询变得过于复杂，查询优化器无法找到将 user_id 上的条件拉入交叉连接并计算完整交叉连接的可能性，那么您仍然可以使用查询优化器的一些[参数](http://www.postgresql.org/docs/8.3/interactive/runtime-config-query.html#RUNTIME-CONFIG-QUERY-GEQO)来获取它又拉了进去。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T01:37:24.007

我认为存储过程解决方案更加 DRY 并且确实提高了可读性。尽管我当然更喜欢在可能的情况下使用视图（尤其是使用 PostgreSQL 强大的规则），但我只是想不出更好的表达方式。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-04-22T07:55:45.907

90处相同的SQL也可以在客户端解决。例如，创建一个构建 SQL 字符串的函数：

```
public string SqlItemsForUser(int iUserId) {
    return "SELECT * FROM items WHERE id NOT IN ( " +
        "SELECT item_id FROM excluded_items WHERE user_id = " +
        Convert.ToString(iUserId) + ");";
} 
```

你可以在 90 个地方调用这个函数，所以如果你必须改变子查询，你只需要在一个地方改变它。

# c++ - MPI 遗传蒙特卡罗算法资源？

> ID：775357
> 
> 赞同：1
> 
> 时间：2009-04-22T01:14:36.277
> 
> 标签：c++, algorithm, parallel-processing, openmpi

我一直在和一些朋友一起将 Matlab 遗传算法转换为 C++，它目前按顺序工作。Matlab 不再是我们当前代码的一部分。

我们希望在集群上使用它，但资源有点枯竭。我们在大学有一个可用的集群，它配备了 Rocks 和 OpenMPI，但我不确定从哪里开始使用它。

我们目前有 2D 和 3D 阵列设置，其中包含数据，当系统在模型之间进行交叉或交换时，它只是尝试交换 2D 和 3D 阵列的一部分。有哪些好方法可以将这些结构跨多个节点分开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T01:26:42.130

如果你在做矩阵计算，那么是否有一个很好的方法来划分计算很大程度上取决于计算本身。

我强烈推荐 Golub 和 van Loan 的书，“Matrix Computations, 3rd Ed.”。其中有一整章专门讨论并行计算（第 6 章）。

OpenMPI 是一个很好的中间件来解决这个问题。由于您是在 C++ 中执行此操作，因此您还可以查看 zeromq。两者有不同的语义，一个可能比另一个更喜欢你的问题空间或你的技能。

此外，您应该知道并行矩阵计算（通常是信号处理，但还有许多其他应用）是一个非常非常活跃的研究领域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T16:45:39.283

## 健身计算：

您通常只需要了解一个个体即可计算其适应度，因此您可以通过将个体分配到每个核心来处理整个人口。当一个人的适应度被计算出来时，把那个核心交给一个新的人。

## 交叉：

分而治之的方法可能非常适合这个问题。将您的数组分解为由每个 CPU 内核处理的块，然后可能添加一个全局交叉步骤（配对的子集）以确保您能够适当地在多维空间中移动。

# python - 如何解码 REG_BINARY 值 HKLM\Software\Microsoft\Ole\DefaultLaunchPermission 以查看哪些用户具有权限？

> ID：775365
> 
> 赞同：1
> 
> 时间：2009-04-22T01:19:40.697
> 
> 标签：python, binary, wmi, registry, decode

我正在尝试找到一种方法来解码“ **HKLM\Software\Microsoft\Ole\DefaultLaunchPermission** ”的 REG_BINARY 值，以查看默认情况下哪些用户具有权限，如果可能的话，我还可以通过用户名附加其他用户的方法.

在工作中，我们使用 DCOM，并且在大多数情况下，我们总是给予相同的用户权限，但在某些情况下，我们被迫适应我们的客户并添加自定义用户/组以满足他们的需求。不幸的是，我们需要添加的自定义用户是随机用户名，所以我无法像我对 95% 时间使用的默认用户所做的那样，只添加所有用户并从键中复制值。

我目前正在开发一个命令行可执行应用程序，我有一个命令可以为预定义用户设置权限，但我还希望能够添加一个选项来附加自定义用户以添加到默认权限以及我们预定义的默认用户列表。

目前，要使用我的应用程序设置默认用户列表，我只需键入：

**MyTool.exe 策略**

但我希望能够让它更详细一点，更接近 NET 命令用于 Windows 用户的方式，例如：

**MyTool.exe 策略 /ADD:"MyCustomUsername"**

问题是存储在 REG_BINARY 值中的数据似乎不容易解码。我能够在 python 中解码十六进制部分，但我留下了某种二进制数据，我不知道如何处理，因为我什至不知道首先使用了哪种编码来知道用什么来解码它。:P

我已经做了很多谷歌搜索，但我认为我对这个主题的术语缺乏理解可能导致我忽略了答案而没有认识到它是什么。

我想我的第一个真正的问题是从十六进制解码后，上面的密钥使用了什么样的编码？

或者更好的是，是否甚至可以通过编程方式获取/修改密钥的值，以便我可以获得当前设置的用户列表，并在必要时附加其他用户/组？

如果可能的话，我宁愿严格用 Python（或 WMI/WMIC）编写这个应用程序，但如果有必要，我可以尝试在我的 python 应用程序中实现其他类型的代码，如果这意味着最终完成工作！我想提到这个应用程序主要用于 Windows XP Professional 和大多数 Windows Server 版本也很有用，所以我不担心任何可能的解决方案不会与早期的 Windows 操作系统版本兼容。

任何帮助、代码或只是一些熟悉该主题的简单帮助，将*不胜*感激！

提前感谢您提供的任何帮助！！:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T02:04:35.517

在安装由我们的 .NET 服务托管的 COM 服务器时，我们遇到了类似的问题，即我们希望以编程方式更改安装逻辑中的 COM ACL。我想您会发现它只是一种二进制 ACL 格式，您可以使用该类在 .NET 中进行操作：

[System.Security.AccessControl.CommonSecurityDescriptor](http://msdn.microsoft.com/en-us/library/system.security.accesscontrol.commonsecuritydescriptor.aspx)

很抱歉，我无法帮助您获得 Python 解决方案，但如果您背对着墙并且您可以管理 .NET，那么一些示例代码将如下所示：

```
int launchMask = (int) (COM_RIGHTS.EXECUTE | COM_RIGHTS.EXECUTE_LOCAL | COM_RIGHTS.ACTIVATE_LOCAL);

SecurityIdentifier sidAdmins = new SecurityIdentifier(WellKnownSidType.BuiltinAdministratorsSid, null);
SecurityIdentifier sidInteractive = new SecurityIdentifier(WellKnownSidType.InteractiveSid, null);

DiscretionaryAcl launchAcl = new DiscretionaryAcl(false, false, 3);
launchAcl.AddAccess(AccessControlType.Allow, sidAdmins, launchMask, InheritanceFlags.None, PropagationFlags.None);
launchAcl.AddAccess(AccessControlType.Allow, sidInteractive, launchMask, InheritanceFlags.None, PropagationFlags.None);

CommonSecurityDescriptor launchSD = new CommonSecurityDescriptor(false,
                                                                    false,
                                                                    ControlFlags.DiscretionaryAclPresent | ControlFlags.SelfRelative,
                                                                    sidAdmins,
                                                                    sidAdmins,
                                                                    null,
                                                                    launchAcl);

byte[] launchPermission = new byte[launchSD.BinaryLength];
launchSD.GetBinaryForm(launchPermission, 0); 
```

然后，您获取启动权限字节数组并将其写入注册表。如果 .NET 不是初学者，您至少可以看看 .NET 类是如何工作的，看看它们使用了哪些 win32 函数。您可以使用[反射器](http://www.red-gate.com/products/reflector/)工具查看相关程序集，或者 MSFT 实际[发布 .NET 源代码](http://weblogs.asp.net/scottgu/archive/2008/01/16/net-framework-library-source-code-now-available.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T01:39:33.737

那么 REG_BINARY 不是任何特定的格式，它只是告诉注册表数据是自定义二进制格式的一种方式。所以你需要找出里面有什么是对的。

另外，从十六进制转换数据是什么意思？你在拆包吗？我怀疑您是否正确解释了它，直到您首先知道那里保存了什么。

一旦你找出注册表字段中的内容，python 的 struct 模块将是你最好的朋友。

[http://docs.python.org/library/struct.html](http://docs.python.org/library/struct.html)

进一步阅读（你可能已经看过这些）

*   [http://msdn.microsoft.com/en-us/library/ms687317(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms687317(VS.85).aspx) <--windows info on perms
*   [http://docs.python.org/library/_winreg.html](http://docs.python.org/library/_winreg.html) <-- python 注册表访问

# c++ - 这会超出范围并且无法正常运行吗？

> ID：775367
> 
> 赞同：2
> 
> 时间：2009-04-22T01:20:38.493
> 
> 标签：c++, struct, scope

我在我的代码中声明了一个结构，然后尝试将它插入到我编写的数据结构中。但是，我担心由于我在函数内部声明了结构，一旦函数结束，数据结构将指向垃圾。有人能帮忙吗？

这是代码：

```
 void Class::function()
 {
  // do some stuff
  node newNode;
  newNode.memAddr = tempNode.memAddr+totalSize;
  newNode.size = tempNode.size-totalSize;
  lists[newNode.size>=512?64:(newNode.size>>3)].insert(&newNode);
 } 
```

编辑：我实际上是在尝试重写 malloc，所以调用 malloc() 或 new 在这里不起作用。有什么方法可以将此代码移动到插入方法中，然后使其以不会超出插入范围的方式工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T01:22:41.110

函数返回后它将超出范围，是的。那是无效的。您想在堆上分配它。

编辑：除非你复制你在插入中指向的内存，当然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T01:26:30.960

这几乎肯定会导致错误。问题是您将堆栈上的值的地址传递给将超出该值的列表。如果列表正在存储`node*`类型，那么这将是不正确的。

要使其正常工作，您需要执行以下操作之一

1.  让列表实例存储节点值而不是`node*`.
2.  在传入之前在堆上分配`node*`它。这意味着您必须稍后释放它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T01:26:38.400

newNode 将超出范围，其地址将指向垃圾（如 jfclavette 所述。）

但是，如果有机会

```
 lists[newNode.size>=512?64:(newNode.size>>3)].insert(&newNode) 
```

被实现为**复制**newNode，那么根据您发布的有限代码片段，该副本中的数据**可能是可以的。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T01:28:30.190

正如其他人所指出的，这将导致存储一个指向堆栈的指针。堆栈非常繁忙，它很可能会很快指向您非常关心的事情，因此您会在运行时很快发现问题。

最好在堆上分配它（使用新的）并在其他时间释放它。

编辑：删除注释“你的编译器应该警告你获取堆栈分配对象（&newNode）的地址。” 如果您尝试返回对堆栈对象的引用，您的编译器会警告您，但如果您只是尝试获取指针，则不会。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-22T02:00:43.123

回答编辑：不。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-22T04:34:17.937

你为什么要实现malloc？除非您正在编写操作系统，否则您可能不想这样做。最终，您需要调用 malloc 为您执行的操作系统的堆函数。如果您只想更好地控制事物的分配方式，请查看[Placement new](http://www.devx.com/tips/Tip/12582)。

# x86 - 有人能解释一下我会在内存中找到这个 IDE 控制器寄存器地址映射的开始位置吗？

> ID：775373
> 
> 赞同：0
> 
> 时间：2009-04-22T01:23:46.160
> 
> 标签：x86, device-driver

作为我为期四分之一的项目的一部分，我一直在翻阅文档以开发一个简单的磁盘驱动程序。目前我正在尝试绘制英特尔 82801EB IO 控制器内部实现的各种 atapi 和 IDE 控制器寄存器。

首先，我指的文件：www.intel.com/assets/pdf/datasheet/252516.pdf

在第 415 页，表 154 显示了各种配置寄存器的偏移量。这似乎是一个愚蠢的问题，但是我如何找到它们的偏移*量*？我期待找到为这些寄存器保留的某种固定基址。从那里我将能够使用此表构建我的驱动程序。

例如，在表 154 上，PCI 命令寄存器位于偏移量 04-05h。登记册在第 417 页上有详细说明，我相信我已经理解了。但是，该寄存器位于 4 个字节的基地址在哪里？

更新：现在，在查看我们正在使用的 D865PERL 板的固定 IO 映射后，它说 0000-00ffh 由 B865PERL 保留，请参阅 ICH5 数据表以获取动态寻址信息。我相信它可以用于我上面提到的表 154 中的 IDE 控制器寄存器。在这一点上，我给我的教授发了电子邮件，但我仍在试图弄清楚这些在哪里。

感谢您的关注！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T01:35:18.473

您的 82801EB 将映射到硬件中的某个地址空间。这将特定于您的硬件，因此您需要从硬件手册中找到起始地址。

```
Step-1: Get IEB_START_ADDRESS from you manual
For each of the registers in the IDE controller
Step-2: Add offset to IEB_START_ADDRESS (For example, if you want offset 04)
You will have to do dereference the address something like (*(IEB_START_ADDRESS + 4)) 
```

现在，请注意寄存器大小。

如果是 16 位，请使用“无符号短”。

如果它是 32 位，则使用“unsigned int”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-16T04:49:49.967

原来我不必找到实际地址，而是 IDE 控制器的总线/设备/功能编号。

1.  枚举所有可能的 PCI 总线/设备/功能组合，搜索 IDE 控制器的供应商和设备 ID
2.  一旦找到，只需写入 CONFIG_ADDRESS 端口，然后从 CONFIG_DATA 读取信息

基本上，一旦有了总线、设备和功能（以及寄存器偏移量），您就可以将该信息写入 PCI CONFIG_ADDRESS 寄存器 (cf8h) 并从 CONFIG_DATA (cfch) 读取寄存器内容。

# sql-server - 表 - 编辑模式 (Sql 2008)

> ID：775375
> 
> 赞同：0
> 
> 时间：2009-04-22T01:25:06.750
> 
> 标签：sql-server

在对象资源管理器中，您可以右键单击表并选择编辑前 200 行。当你这样做时，它会在编辑模式下打开表格。

有谁知道如何在查询中编写它的语法，这样您就不必右键单击并选择编辑前 200 行？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-22T01:33:53.110

SQL 不用于与 SQL Server Management Studio 之类的查询工具进行交互，这听起来像是您正在使用的。

你所追求的是像一个宏来自动化一个常见的任务。我不相信 SQL Server Management Studio 支持宏——Express Edition 肯定不支持。

# sql-server-2005 - 解决 Sql Server 2005 连接问题

> ID：775382
> 
> 赞同：1
> 
> 时间：2009-04-22T01:27:35.840
> 
> 标签：sql-server-2005

我有一个使用允许通过 TCP/IP 连接的 SQL Server Express 2005 数据库的 .Net 3.5 应用程序。安装了 SQL Server 的计算机是域的一部分。该程序安装在 3 台计算机上并共享同一个数据库。连接字符串位于所有计算机共享的文件中。SQL Server 安装在 Windows Server 2003 机器上。另外两台电脑是Windows XP。其中一台 XP 机器是域的一部分，并且与服务器位于同一位置。另一台 XP 机器不是域的一部分，它使用硬件 VPN 连接到服务器（始终打开）。属于域的 Windows Server 和 XP 机器上的程序能够打开与数据库的连接，但通过 VPN 连接的 XP 机器在尝试打开连接时超时。服务器具有混合模式身份验证。

这是我用来找出问题的清单：
1\. SQL Browser 正在 Windows Server 机器上运行。[端口：1434]
2\. SQL Server 正在接受通过 TCP 的连接（但不是命名管道）
3\. 服务器响应来自客户端的 Ping。
4.查看sql server的ErrorLog并记下端口。我可以从客户端的命令行远程登录到服务器 ip 和 sql 端口。

如何找到连接超时的位置？我可以在服务器上使用可移植程序（无需安装）来检查网络流量并查看请求是否在中间被接收或丢弃？

谢谢，
基肖尔。一个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T02:59:05.683

你确定你不是在说 1433 吗？我会在客户端机器上尝试通过端口 1433 和 1434 远程登录，看看是否可以连接到服务器（显然您将无法登录，但您应该能够查看是否可以连接）。至少这可以告诉您是否有某种防火墙问题，或者您是否在正确的端口上连接。

-大学教师

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T02:24:51.117

您可以使用[SysInternals TCPView](http://technet.microsoft.com/en-us/sysinternals/bb897437.aspx)来监控流量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T02:21:10.983

我知道没有便携式网络嗅探器，因为您需要 WinCAP 将卡置于混杂模式。您可以做的是在 XP 机器上安装 Wireshark 以转储网络流量并使用服务器上的管理工作室来监视连接。

您还可以在服务器上使用 netstat 查看打开的端口，并且在知道 VPN IP 地址的情况下，这也可以判断服务器上是否打开了套接字。

```
eg: netstat -p tcp -b 
```

这将生成显示 src/dest IP 地址和使用该套接字的应用程序的输出

```
TCP 192.168.1.1:1146 192.168.1.1:80 ESTABLISHED
[FIREFOX.EXE] 
```

# c# - 如何将匿名类型传递给函数？

> ID：775387
> 
> 赞同：4
> 
> 时间：2009-04-22T01:32:02.133
> 
> 标签：c#, .net, linq, anonymous-types

我有包含许多列的表或包含大型数据集（XML 文档）的列，我需要将表中的信息（状态信息）快速加载到一个类中。我注意到 Linq 允许您这样选择列...：

使用匿名类型：

```
var query = (from name in some.Table
            select new { ColumnName = name.ColumnName });

MapEntToOb( query)
private void MapEntToObj( var query)          <------ doesn't work! 
```

我想调用一个例程来使用查询做一些事情（映射），但不能像下面那样传递它......

```
LinqClass.Table query =  from name in some.Table
            select;

MapEntToObj( query)
...
private void MapEntToObj( LinqClass.Table query) 
```

现在我将映射移动到本地范围，但我希望通过数据映射为所有人提供一个干净一致的设计。

# java - 访问 .jar 之外的属性文件？

> ID：775389
> 
> 赞同：14
> 
> 时间：2009-04-22T01:32:21.413
> 
> 标签：java, properties, jar

我有一个要放在一起的 .jar 文件。我想创建一个非常简单的 .properties 文件，其中包含用户名和其他内容等可配置的内容，以便他们可以手动编辑，而不必包含 GUI 编辑器。

我想做的是能够按以下顺序搜索：

1.  指定的属性文件 ( `args[0]`)
2.  当前目录（调用 Java 的目录）中的 MyApp.properties
3.  用户目录中的 MyApp.properties（[user.home](http://www.mindspring.com/~mgrand/java-system-properties.htm)系统属性？）
4.  存储应用程序 .jar 的目录中的 MyApp.properties

我知道如何访问#1 和#3（我认为），但是如何在运行时确定#2 和#4？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-22T02:31:36.590

4，你可以试试这个。获取类路径：

```
String classpath = System.getProperty("java.class.path"); 
```

然后在其中搜索您的应用程序 jar 的名称：

```
int jarPos = classpath.indexOf("application.jar"); 
```

解析出通往它的路径：

```
int jarPathPos = classpath.lastIndexOf(File.pathSeparatorChar, jarPos) + 1;
String path = classpath.substring(jarPathPos, jarPos); 
```

然后附加`MyApp.properties`. 确保检查`jarPos == -1`，这意味着如果类路径（可能在您的开发环境中运行时）找不到 jar。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-22T02:01:12.110

对于当前工作目录：

```
new File("."); 
```

对于当前目录中名为 MyApp.properties 的文件：

```
new File(new File("."), "MyApp.properties"); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-22T03:07:37.957

#2 是[“user.dir”](http://java.sun.com/javase/6/docs/api/java/lang/System.html#getProperties())系统属性。#3 是“user.home”属性。

＃4无论您如何处理它都有点杂乱无章。如果您从不在系统类路径上的 JAR 加载了一个类，那么这是一种替代技术。

```
CodeSource src = MyClass.class.getProtectionDomain().getCodeSource();
if (src != null) {
  URL url = new URL(src.getLocation(), "MyApp.properties");
  ...
} 
else {
  /* Fail... */
} 
```

# javascript - 用 Javascript更新 RSS URL？

> ID：775390
> 
> 赞同：1
> 
> 时间：2009-04-22T01:33:28.697
> 
> 标签：javascript, rss

是否可以动态更新 rss`<link>`标签的 URL，以便在单击位置栏中的 RSS 图标时，浏览器会将用户引导到更新后的 URL？

例如，使用 Jquery：

```
<link id="feed_url" rel="alternate" type="application/rss+xml" 
      title="RSS" href="/feed" />

<script type="text/javascript">
    $("#feed_url").attr("href", "/feed?foo=bar");
</script> 
```

用户现在应该被重定向到`/feed?foo=bar`而不是`/foo`.

请注意，查询字符串中的值是在客户端动态确定的，因此必须通过 Javascript 更新 URL。我无法在服务器端确定这些值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T01:54:33.670

许多浏览器会解析 DocumentComplete 上的链接标签，如果它发生变化，以后不会重新解析它。所以从技术上讲，它可能会更新，但浏览器可能不会注意到。您必须在不同的浏览器中进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T02:05:18.933

为什么要使用 javascript 来更新 URL？为什么不直接更改 HTML？

您正在更改模板/视图以添加 JavaScript，因此我认为向浏览器发送错误的提要地址，然后使用 JavaScript 来更正地址并没有任何好处。

如果您想动态生成/更改 RSS 链接，则应在服务器端完成。您可以将不同页面的提要地址存储在数据库中，并在请求页面时将它们动态插入页面。

例如

```
<link id="feed_url" rel="alternate" type="application/rss+xml"
  title="<? echo $page['RSS']['title'] ?>"
  href="<? echo $page['RSS']['url'] ?>" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T02:13:57.257

请记住，有提要阅读器和聚合器可以在没有 javascript 的情况下阅读页面。我不知道这对您来说是否是一个问题，但如果是，请提供默认的未修改 js 的提要，或禁用提要并为 js 客户端动态添加提要。

# .net - 插入新行时发出警报的 MySQL 函数

> ID：775392
> 
> 赞同：0
> 
> 时间：2009-04-22T01:33:51.503
> 
> 标签：.net, mysql

MySQL 中是否有我们可以在客户端应用程序中使用的函数，它会在每次向表中插入新行时自动发送警报？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-22T01:47:50.660

您将必须使用/编写一个触发器，该触发器将记录专门设计的更改，仅用于此目的，表和一个 cron/在 MS 环境中使用的任何东西，每 X 秒检查一次此表（您决定 X ）。
或者，为 mysql 编写一个扩展......（或者支付一个 mysql 开发人员为你做这件事）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T16:40:30.687

在某些数据库（Interbase、Firebird，也许还有其他...）中，您可以触发事件。 [http://www.firebirdsql.org/doc/whitepapers/events_paper.pdf](http://www.firebirdsql.org/doc/whitepapers/events_paper.pdf)

有一天我在 MySQL 论坛上问了这个问题： http: [//forums.mysql.com/read.php?84,3629,3629](http://forums.mysql.com/read.php?84,3629,3629)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T02:13:44.793

最简单但（可以说）最不优雅的解决方案是让您的客户简单地轮询表以进行更改。

# css - 如何将菜单与文本隔开

> ID：775395
> 
> 赞同：0
> 
> 时间：2009-04-22T01:34:34.590
> 
> 标签：css

如何在菜单标题和正文之间留出空格？这也是好习惯吗？

```
div.body
{
    width: 6.5in;
    margin:0px auto;
    text-align:left;
}

.menu ul{
    margin:0px auto;
    }
.menu li{
    width: 25%;
    text-align:center;
    display:block;
    float:left;
    }
.menu a{
    display:block;
    } 
```

html:

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="my.css" />
</head>
<body>

<div>
    <div class="menu">
    <ul>
    <li><a href="">Home</a></li>
    <li>Test</li>
    <li>Test 2</li>
    <li>Contact</li>
    </ul>
    </div>
</div>

<div class="body">
lots of textlots of textlots of textlots of textlots of textlots of textlots of textlots of text
<the above repeated many times>

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T01:50:18.220

在正文中设置上边距：

```
div.body
{
  width: 6.5in;
  margin: 10px auto 0px auto;
  text-align: left;
} 
```

# python - 如何使用 WSGIREF 捕获 POST

> ID：775396
> 
> 赞同：2
> 
> 时间：2009-04-22T01:34:39.147
> 
> 标签：python, wsgi, wsgiref

我正在尝试从一个简单的表单中捕获 POST 数据。

这是我第一次玩 WSGIREF，我似乎找不到正确的方法来做到这一点。

```
This is the form:
<form action="test" method="POST">
<input type="text" name="name">
<input type="submit"></form> 
```

显然缺少正确信息来捕捉帖子的功能：

```
def app(environ, start_response):
    """starts the response for the webserver"""
    path = environ[ 'PATH_INFO']
    method = environ['REQUEST_METHOD']
    if method == 'POST':
        if path.startswith('/test'):
            start_response('200 OK',[('Content-type', 'text/html')])
            return "POST info would go here %s" % post_info
    else:
        start_response('200 OK', [('Content-type', 'text/html')])
        return form() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T04:37:13.483

您应该正在阅读来自服务器的响应。

从[nosklo](https://stackoverflow.com/questions/394465/python-post-data-using-modwsgi)对类似问题的回答：“ [PEP 333](http://www.python.org/dev/peps/pep-0333/)说[你必须阅读 environ['wsgi.input']](http://www.python.org/dev/peps/pep-0333/#input-and-error-streams)。”

测试代码（改编自此[答案](https://stackoverflow.com/questions/336866/how-to-implement-a-minimal-server-for-ajax-in-python)）：
    警告：此代码仅用于演示目的。
    警告：尽量避免硬编码路径或文件名。

```
def app(environ, start_response):
    path    = environ['PATH_INFO']
    method  = environ['REQUEST_METHOD']
    if method == 'POST':
        if path.startswith('/test'):
            try:
                request_body_size = int(environ['CONTENT_LENGTH'])
                request_body = environ['wsgi.input'].read(request_body_size)
            except (TypeError, ValueError):
                request_body = "0"
            try:
                response_body = str(request_body)
            except:
                response_body = "error"
            status = '200 OK'
            headers = [('Content-type', 'text/plain')]
            start_response(status, headers)
            return [response_body]
    else:
        response_body = open('test.html').read()
        status = '200 OK'
        headers = [('Content-type', 'text/html'),
                    ('Content-Length', str(len(response_body)))]
        start_response(status, headers)
        return [response_body] 
```

# c# - 使用 C# 读取文件内容

> ID：775404
> 
> 赞同：3
> 
> 时间：2009-04-22T01:37:28.563
> 
> 标签：c#, file

我想使用 C# 读取以下文件类型的内容：

1.  RTF
2.  PDF格式
3.  HTML
4.  微软字

.Net 中是否有用于读取所有文件类型内容的通用 API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T01:45:23.240

没有内置支持读取大多数这些文件类型。HTML 是纯文本，因此您可以使用 System.IO/StreamReader 读取它，但您必须自己解析它。

有第三方组件会读取这些文件类型，但我不确定是否有一个包罗万象的组件。

对于 PDF，我相信[iTextSharp](http://itextsharp.sourceforge.net/)允许您阅读。

对于 RTF/Word，您可以使用[主互操作程序集](http://msdn.microsoft.com/en-us/library/aax7sdch.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T02:25:34.703

我之前使用过[Aspose](http://www.aspose.com/)，它是一个非常强大的产品，它的价格相当昂贵，因此只有在您的应用程序还需要创建新的 word/pdf/rtf 文档时才会推荐它。

我同意其他关于仅使用 System.IO 读取 HTML 文件的评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T02:02:26.023

如果您要对数据进行全文索引，请考虑使用[Lucene](http://incubator.apache.org/lucene.net/)，它可以处理这些文件类型。

# unicode - 带有汉字的文件如何知道每个字符使用多少字节？

> ID：775412
> 
> 赞同：21
> 
> 时间：2009-04-22T01:40:08.743
> 
> 标签：unicode, encoding, cjk

我已阅读 Joel 的文章[“每个软件开发人员绝对、肯定必须了解 Unicode 和字符集（没有借口！）”](http://www.joelonsoftware.com/articles/Unicode.html)，但仍然不了解所有细节。一个例子将说明我的问题。看看下面这个文件：

[![替代文字](https://i.stack.imgur.com/5YHfg.png)](https://i.stack.imgur.com/5YHfg.png)
[（来源：[yart.com.au](http://www.yart.com.au/stackoverflow/unicode2.png)）]

我在二进制编辑器中打开了文件，仔细检查了第一个汉字旁边的三个 a 中的最后一个：

[![替代文字](https://i.stack.imgur.com/HT7F5.png)](https://i.stack.imgur.com/HT7F5.png)
[（来源：[yart.com.au](http://www.yart.com.au/stackoverflow/unicode1.png)）]

据乔尔说：

> 在 UTF-8 中，从 0 到 127 的每个代码点都存储在一个字节中。只有 128 及以上的代码点使用 2、3 存储，实际上最多 6 个字节。

小编也是这么说的：

1.  E6 (230) 高于代码点 128。
2.  因此，我将以下字节解释为 2、3，实际上最多 6 个字节。

如果是这样，什么表明解释超过 2 个字节？E6 后面的字节如何表示？

我的汉字是按 2、3、4、5 还是 6 字节存储的？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2009-04-22T01:49:19.003

如果编码为 UTF-8，则下表显示如何将 Unicode 代码点（最多 21 位）转换为 UTF-8 编码：

```
Scalar Value                 1st Byte  2nd Byte  3rd Byte  4th Byte
00000000 0xxxxxxx            0xxxxxxx
00000yyy yyxxxxxx            110yyyyy  10xxxxxx
zzzzyyyy yyxxxxxx            1110zzzz  10yyyyyy  10xxxxxx
000uuuuu zzzzyyyy  yyxxxxxx  11110uuu  10uuzzzz  10yyyyyy  10xxxxxx 
```

有许多不允许的值 - 特别是字节 0xC1、0xC2 和 0xF5 - 0xFF 永远不会出现在格式良好的 UTF-8 中。还有许多其他的禁止组合。不规则出现在第 1 字节和第 2 字节列中。请注意，代码 U+D800 - U+DFFF 是为 UTF-16 代理保留的，不能出现在有效的 UTF-8 中。

```
Code Points          1st Byte  2nd Byte  3rd Byte  4th Byte
U+0000..U+007F       00..7F
U+0080..U+07FF       C2..DF    80..BF
U+0800..U+0FFF       E0        A0..BF    80..BF
U+1000..U+CFFF       E1..EC    80..BF    80..BF
U+D000..U+D7FF       ED        80..9F    80..BF
U+E000..U+FFFF       EE..EF    80..BF    80..BF
U+10000..U+3FFFF     F0        90..BF    80..BF    80..BF
U+40000..U+FFFFF     F1..F3    80..BF    80..BF    80..BF
U+100000..U+10FFFF   F4        80..8F    80..BF    80..BF 
```

这些表是从[Unicode](http://www.unicode.org/)标准版本 5.1 中提取的。

* * *

在问题中，偏移量 0x0010 .. 0x008F 的材料产生：

```
0x61           = U+0061
0x61           = U+0061
0x61           = U+0061
0xE6 0xBE 0xB3 = U+6FB3
0xE5 0xA4 0xA7 = U+5927
0xE5 0x88 0xA9 = U+5229
0xE4 0xBA 0x9A = U+4E9A
0xE4 0xB8 0xAD = U+4E2D
0xE6 0x96 0x87 = U+6587
0xE8 0xAE 0xBA = U+8BBA
0xE5 0x9D 0x9B = U+575B
0x2C           = U+002C
0xE6 0xBE 0xB3 = U+6FB3
0xE6 0xB4 0xB2 = U+6D32
0xE8 0xAE 0xBA = U+8BBA
0xE5 0x9D 0x9B = U+575B
0x2C           = U+002C
0xE6 0xBE 0xB3 = U+6FB3
0xE6 0xB4 0xB2 = U+6D32
0xE6 0x96 0xB0 = U+65B0
0xE9 0x97 0xBB = U+95FB
0x2C           = U+002C
0xE6 0xBE 0xB3 = U+6FB3
0xE6 0xB4 0xB2 = U+6D32
0xE4 0xB8 0xAD = U+4E2D
0xE6 0x96 0x87 = U+6587
0xE7 0xBD 0x91 = U+7F51
0xE7 0xAB 0x99 = U+7AD9
0x2C           = U+002C
0xE6 0xBE 0xB3 = U+6FB3
0xE5 0xA4 0xA7 = U+5927
0xE5 0x88 0xA9 = U+5229
0xE4 0xBA 0x9A = U+4E9A
0xE6 0x9C 0x80 = U+6700
0xE5 0xA4 0xA7 = U+5927
0xE7 0x9A 0x84 = U+7684
0xE5 0x8D 0x8E = U+534E
0x2D           = U+002D
0x29           = U+0029
0xE5 0xA5 0xA5 = U+5965
0xE5 0xB0 0xBA = U+5C3A
0xE7 0xBD 0x91 = U+7F51
0x26           = U+0026
0x6C           = U+006C
0x74           = U+0074
0x3B           = U+003B 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-04-22T01:46:56.247

这就是 UTF8 编码的全部内容（这只是 Unicode 的一种编码方案）。

大小可以通过检查第一个字节来计算，如下所示：

*   如果它以 bit pattern 开头`"10" (0x80-0xbf)`，则它不是序列的第一个字节，您应该备份直到找到开头，任何以“0”或“11”开头的字节（感谢 Jeffrey Hantin 在评论中指出这一点）。
*   如果它以位模式开头，则为`"0" (0x00-0x7f)`1 个字节。
*   如果它以位模式开头，则为`"110" (0xc0-0xdf)`2 个字节。
*   如果它以位模式开头，则为`"1110" (0xe0-0xef)`3 个字节。
*   如果它以位模式开头，则为`"11110" (0xf0-0xf7)`4 个字节。

我将复制显示此内容的表格，但原件在[此处](http://en.wikipedia.org/wiki/UTF-8)的 Wikipedia UTF8 页面上。

```
+----------------+----------+----------+----------+----------+
| Unicode        | Byte 1   | Byte 2   | Byte 3   | Byte 4   |
+----------------+----------+----------+----------+----------+
| U+0000-007F    | 0xxxxxxx |          |          |          |
| U+0080-07FF    | 110yyyxx | 10xxxxxx |          |          |
| U+0800-FFFF    | 1110yyyy | 10yyyyxx | 10xxxxxx |          |
| U+10000-10FFFF | 11110zzz | 10zzyyyy | 10yyyyxx | 10xxxxxx |
+----------------+----------+----------+----------+----------+ 
```

上表中的 Unicode 字符由以下位构成：

```
000z-zzzz yyyy-yyyy xxxx-xxxx 
```

在没有给出的情况下，`z`和`y`位被假定为零。有些字节被认为是非法的起始字节，因为它们是：

*   无用：以 0xc0 或 0xc1 开头的 2 字节序列实际上给出了小于 0x80 的代码点，可以用 1 字节序列更好地表示。
*   RFC3629 用于 U+10FFFF 以上的 4 字节序列，或 5 字节和 6 字节序列。这些是字节 0xf5 到 0xfd。
*   未使用：字节 0xfe 和 0xff。

此外，多字节序列中不以“10”位开头的后续字节也是非法的。

例如，考虑序列 [0xf4,0x8a,0xaf,0x8d]。这是一个 4 字节序列，因为第一个字节位于 0xf0 和 0xf7 之间。

```
 0xf4     0x8a     0xaf     0x8d
= 11110100 10001010 10101111 10001101
       zzz   zzyyyy   yyyyxx   xxxxxx

= 1 0000 1010 1011 1100 1101
  z zzzz yyyy yyyy xxxx xxxx

= U+10ABCD 
```

对于第一个字节 0xe6（长度 = 3）的特定查询，字节序列为：

```
 0xe6     0xbe     0xb3
= 11100110 10111110 10110011
      yyyy   yyyyxx   xxxxxx

= 01101111 10110011
  yyyyyyyy xxxxxxxx

= U+6FB3 
```

如果您在[此处](http://www.cojak.org/index.php?function=code_lookup&term=6FB3)查看该代码，您会看到它是您的问题中的代码：澳。

为了展示解码是如何工作的，我回到我的档案中找到了我的 UTF8 处理代码。我不得不对其进行一些变形以使其成为一个完整的程序，并且编码已被删除（因为问题实际上是关于解码），所以我希望我没有从剪切和粘贴中引入任何错误：

```
#include <stdio.h>
#include <string.h>

#define UTF8ERR_TOOSHORT -1
#define UTF8ERR_BADSTART -2
#define UTF8ERR_BADSUBSQ -3
typedef unsigned char uchar;

static int getUtf8 (uchar *pBytes, int *pLen) {
    if (*pLen < 1) return UTF8ERR_TOOSHORT;

    /* 1-byte sequence */
    if (pBytes[0] <= 0x7f) {
        *pLen = 1;
        return pBytes[0];
    }

    /* Subsequent byte marker */
    if (pBytes[0] <= 0xbf) return UTF8ERR_BADSTART;

    /* 2-byte sequence */
    if ((pBytes[0] == 0xc0) || (pBytes[0] == 0xc1)) return UTF8ERR_BADSTART;
    if (pBytes[0] <= 0xdf) {
        if (*pLen < 2) return UTF8ERR_TOOSHORT;
        if ((pBytes[1] & 0xc0) != 0x80) return UTF8ERR_BADSUBSQ;
        *pLen = 2;
        return ((int)(pBytes[0] & 0x1f) << 6)
            | (pBytes[1] & 0x3f);
    }

    /* 3-byte sequence */
    if (pBytes[0] <= 0xef) {
        if (*pLen < 3) return UTF8ERR_TOOSHORT;
        if ((pBytes[1] & 0xc0) != 0x80) return UTF8ERR_BADSUBSQ;
        if ((pBytes[2] & 0xc0) != 0x80) return UTF8ERR_BADSUBSQ;
        *pLen = 3;
        return ((int)(pBytes[0] & 0x0f) << 12)
            | ((int)(pBytes[1] & 0x3f) << 6)
            | (pBytes[2] & 0x3f);
    }

    /* 4-byte sequence */
    if (pBytes[0] <= 0xf4) {
        if (*pLen < 4) return UTF8ERR_TOOSHORT;
        if ((pBytes[1] & 0xc0) != 0x80) return UTF8ERR_BADSUBSQ;
        if ((pBytes[2] & 0xc0) != 0x80) return UTF8ERR_BADSUBSQ;
        if ((pBytes[3] & 0xc0) != 0x80) return UTF8ERR_BADSUBSQ;
        *pLen = 4;
        return ((int)(pBytes[0] & 0x0f) << 18)
            | ((int)(pBytes[1] & 0x3f) << 12)
            | ((int)(pBytes[2] & 0x3f) << 6)
            | (pBytes[3] & 0x3f);
    }

    return UTF8ERR_BADSTART;
}

static uchar htoc (char *h) {
    uchar u = 0;
    while (*h != '\0') {
        if ((*h >= '0') && (*h <= '9'))
            u = ((u & 0x0f) << 4) + *h - '0';
        else
            if ((*h >= 'a') && (*h <= 'f'))
                u = ((u & 0x0f) << 4) + *h + 10 - 'a';
            else
                return 0;
        h++;
    }
    return u;
}

int main (int argCount, char *argVar[]) {
    int i;
    uchar utf8[4];
    int len = argCount - 1;

    if (len != 4) {
            printf ("Usage: utf8 <hex1> <hex2> <hex3> <hex4>\n");
            return 1;
    }
    printf ("Input:      (%d) %s %s %s %s\n",
        len, argVar[1], argVar[2], argVar[3], argVar[4]);

    for (i = 0; i < 4; i++)
            utf8[i] = htoc (argVar[i+1]);

    printf ("   Becomes: (%d) %02x %02x %02x %02x\n",
        len, utf8[0], utf8[1], utf8[2], utf8[3]);

    if ((i = getUtf8 (&(utf8[0]), &len)) < 0)
        printf ("Error %d\n", i);
    else
        printf ("   Finally: U+%x, with length of %d\n", i, len);

    return 0;
} 
```

您可以使用您的字节序列运行它（您需要 4 所以使用 0 来填充它们），如下所示：

```
> utf8 f4 8a af 8d
Input:      (4) f4 8a af 8d
   Becomes: (4) f4 8a af 8d
   Finally: U+10abcd, with length of 4

> utf8 e6 be b3 0
Input:      (4) e6 be b3 0
   Becomes: (4) e6 be b3 00
   Finally: U+6fb3, with length of 3

> utf8 41 0 0 0
Input:      (4) 41 0 0 0
   Becomes: (4) 41 00 00 00
   Finally: U+41, with length of 1

> utf8 87 0 0 0
Input:      (4) 87 0 0 0
   Becomes: (4) 87 00 00 00
Error -2

> utf8 f4 8a af ff
Input:      (4) f4 8a af ff
   Becomes: (4) f4 8a af ff
Error -3

> utf8 c4 80 0 0
Input:      (4) c4 80 0 0
   Becomes: (4) c4 80 00 00
   Finally: U+100, with length of 2 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-22T01:50:41.807

一个很好的参考是 Markus Kuhn 的[UTF-8 and Unicode FAQ](http://www.cl.cam.ac.uk/~mgk25/unicode.html)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-22T01:48:00.003

本质上，如果它以 0 开头，则它是一个 7 位代码点。如果它以 10 开头，则它是多字节代码点的延续。否则，1 的数量告诉您此代码点编码为多少字节。

第一个字节表示编码代码点的字节数。

0xxxxxxx 7 位代码点编码为 1 个字节

110xxxxxx 10xxxxxx 10 位代码点，编码为 2 个字节

110xxxxx 10xxxxxx 10xxxxxx 等 1110xxxx 11110xxx 等

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-22T01:45:48.480

最多 0x7ff 的代码点存储为 2 个字节；最多 0xffff 为 3 个字节；其他所有内容为 4 个字节。（从技术上讲，最高为 0x1fffff，但 Unicode 中允许的最高代码点为 0x10ffff。）

解码时，多字节序列的第一个字节用于确定用于制作序列的字节数：

1.  `110x xxxx`=> 2字节序列
2.  `1110 xxxx`=> 3字节序列
3.  `1111 0xxx`=> 4字节序列

序列中的所有后续字节都必须符合该`10xx xxxx`模式。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-22T01:55:44.477

3 个字节
[http://en.wikipedia.org/wiki/UTF-8#Description](http://en.wikipedia.org/wiki/UTF-8#Description)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-04-22T05:08:48.430

UTF-8 的构造方式使得字符从哪里开始以及它有多少字节不会有歧义。

这真的很简单。

*   **0x80 到 0xBF 范围内的字节*绝不*是字符的第一个字节。**
*   **任何其他字节*始终*是字符的第一个字节。**

UTF-8 有很多冗余。

如果你想知道一个字符有多少字节，有多种方法可以知道。

*   第一个字节总是告诉你字符有多少字节：
    *   如果第一个字节是 0x00 到 0x7F，则为一个字节。
    *   0xC2 到 0xDF 表示它是两个字节。
    *   0xE0 到 0xEF 表示它是三个字节。
    *   0xF0 到 0xF4 表示它是四个字节。
*   或者，您可以只计算 0x80 到 0xBF 范围内的连续字节数，因为这些字节都与前一个字节属于同一个字符。

有些字节从不使用，例如 0xC1 到 0xC2 或 0xF5 到 0xFF，所以如果你在任何地方遇到这些字节，那么你就不是在看 UTF-8。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-22T01:45:03.880

提示在这句话中：

> 在 UTF-8 中，从 0 到 127 的每个代码点都存储在一个字节中。只有 128 及以上的代码点使用 2、3 存储，实际上最多 6 个字节。

最多 127 的每个代码点都将最高位设置为零。因此，编辑器知道，如果遇到最高位为 1 的字节，就是多字节字符的开始。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-04T07:53:45.207

为什么有这么多复杂的答案？

1 个汉字 3 个字节。使用这个函数（在 jQuery 下）：

```
function get_length(field_selector) {
  var escapedStr = encodeURI($(field_selector).val())
  if (escapedStr.indexOf("%") != -1) {
    var count = escapedStr.split("%").length - 1
    if (count == 0) count++  //perverse case; can't happen with real UTF-8
    var tmp = escapedStr.length - (count * 3)
    count = count + tmp
  } else {
    count = escapedStr.length
  }
  return count
} 
```

# winsock - 在 Winsock 中实现原始以太网

> ID：775419
> 
> 赞同：1
> 
> 时间：2009-04-22T01:44:33.380
> 
> 标签：winsock, raw-ethernet

我正在做一个项目，我必须制作自定义数据包。也就是说，我必须控制每个数据包标头。我正在尝试使用套接字来做到这一点。基本上，我需要做的是：

```
SOCKET s = socket(PF_UNSPEC, SOCK_RAW, ethernet_type); 
```

ethernet_type 是定制的、非标准的，例如 0xAAAA。我正在使用 htons()。另外，我最好不要使用winPcap。

现在，我收到错误 10043，不支持协议。

错误消息似乎表明我可以将协议配置到我的系统中，但我不知道该怎么做。

它说：

不支持协议。请求的协议尚未配置到系统中，或者不存在它的实现。例如，套接字调用请求 SOCK_DGRAM 套接字，但指定了流协议。

这里有几个不同的问题，所以如果有人有任何意见，我真的很感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T01:58:36.017

根据[这些](http://en.wikipedia.org/wiki/Raw_socket) [文章](http://seclists.org/nmap-hackers/2005/0004.html)，Microsoft 在不可移除的修补程序中从 Windows 中移除了原始套接字支持。因此，除非您想切换到另一个操作系统，否则您可能会不走运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T01:59:22.550

我认为向套接字调用添加新协议将是一件相当困难的事情。您必须确保套接字支持该调用。我认为您必须重新编译套接字函数，而且我认为这在 Windows 下并不容易。

制作自定义数据包不需要您创建新协议

我认为指定RAW套接字的正确方法是这样的

```
SOCKET s;
s = socket(AF_INET, SOCK_RAW, IPPROTO_RAW); 
```

如果您真的想像变量名所暗示的那样使用原始以太网，那么您可以使用 winpcap 驱动程序或编写[自己的驱动程序](http://www.osix.net/modules/article/?id=824)

我认为原始以太网没有另一种“简单”的解决方案。winpcap 相当简单，所以你可能想检查一下

# nhibernate - NHibernate 保存错误 w/i 数据库

> ID：775437
> 
> 赞同：0
> 
> 时间：2009-04-22T01:51:51.477
> 
> 标签：nhibernate

我在一个 NHibernate 对象上调用 Save，该对象附加了许多子对象。保存后，当 NHibernate 开始插入我的 sql 数据库时，有时会发生错误（例如，“数据在从一种数据类型转换为另一种数据类型时被截断。”）。以下是示例异常的顶部行。NHibernate 从来没有告诉过我更多……它失败了。我的问题是，我如何确定哪个表/列是我保存错误的罪魁祸首？

在 System.Data.SqlServerCe.SqlCeCommand.ProcessResults(Int32 hr) 在 System.Data.SqlServerCe.SqlCeCommand.ExecuteCommandText(IntPtr& pCursor, Boolean& isBaseTableCursor) 在 System.Data.SqlServerCe.SqlCeCommand.ExecuteCommand （CommandBehavior 行为，字符串方法，ResultSetOptions 选项) 在 NHibernate.Id.Insert.AbstractSelectingDelegate.PerformInsert (SqlCommandInfo insertSQL, ISessionImplementor session, IBinder binder) 在 NHibernate.AdoNet.AbstractBatcher.ExecuteNonQuery(IDbCommand cmd) 在 NHibernate.Persister 的 System.Data.SqlServerCe.SqlCeCommand.ExecuteNonQuery()。 NHibernate.Persister.Entity.AbstractEntityPersister.Insert（对象 [] 字段，对象 obj，ISessionImplementor 会话）在 NHibernate.Action.EntityIdentityInsertAction.Execute()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T12:01:25.787

问题是错误发生在 SqlServerCe 库中。所以 NHibernate 不能告诉你出了什么问题。

很可能您在映射文件中选择了与数据库中不同的数据类型（例如，您在模型中有一个数字，而在数据库中有一个 varchar）。数据库执行隐式转换，如果失败，您会收到此错误。

您可以通过以下方式找到它：

*   观察调试器中的值并尝试找到一个比平时大的值
*   阅读您的映射文件和类声明并将其与您的数据库模型进行比较
*   使用 SchemaExport 导出模型并将导出的模型与您的模型进行比较。

# java - JSF 所需的库是什么/在哪里（特别是 javax.faces 的东西）

> ID：775442
> 
> 赞同：4
> 
> 时间：2009-04-22T01:54:45.323
> 
> 标签：java, jsf, resources

我花了过去几个小时在网上搜索，但我无法弄清楚这一点。

我想`javax.faces`在我正在处理的 java 包中包含一些类。

具体来说：

```
import javax.faces.application.Application;
import javax.faces.context.FacesContext;
import javax.faces.el.VariableResolver; 
```

我正在使用日食 3.4

我知道如何包含外部库、设置我的构建路径等。

我不知道哪些库（jars、libs 等）包含我需要的类，我也不知道在哪里可以找到它们。我知道信息就在那里（人们正在开发 JSF 的东西），但我似乎无法弄清楚这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-22T03:12:57.787

如果您使用 myfaces，那么您的类路径中需要 myfaces-api.jar 和 myfaces-impl.jar，您可以从[http://myfaces.apache.org/download.html下载它们](http://myfaces.apache.org/download.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T03:29:00.243

据我所知，这些包来自 Java EE 版本 5（它记录在其 javadocs 中，以及诸如 Servlet API 之类的东西）。因此，它通常由您的应用程序/servlet 容器提供；Tomcat、Jetty、GlassFish 等——只要容器支持 Java EE 5。

# php - PHP的“foreach”结构的无知或错误？

> ID：775463
> 
> 赞同：2
> 
> 时间：2009-04-22T02:05:31.083
> 
> 标签：php, arrays, codeigniter, dataset, foreach

我有一个从 MySQL 获得的数据集，如下所示：

```
大批
(
    [0] => 数组
        (
            [观看次数] => 14
            [时间戳] => 06/04
            [views_scaled] => 4.9295774647887
            [unix_time] => 1239022177
        )

    [1] => 数组
        (
            [观看次数] => 1
            [时间戳] => 19/04
            [views_scaled] => 0.35211267605634
            [unix_time] => 1240194544
        )

        ...
        ...
        ...

) 1

```

（它是后处理的，'timestamp' 之前确实是一个时间戳，但无论如何都无所谓）

数组存储在 上`$results`，在我的代码中间我做了这样的事情：

```
$results = array_merge($results, $new_days);
$a = $结果；
foreach ($results 为 $row)
{
    $unix_time[] = $row['unix_time'];
}
$b = $结果；

```

**问题：** `$a`两者`$b`都不同。第一个显示了应有的数组，第二个具有相同的`count()`，但它的第四个元素与最后一个元素重复。据我所知，我没有通过引用传递任何东西，所以`$results`不打算改变（也许是指针，但不是它的内容）。我在 Mac OS X 10.5.2 上使用 PHP 5.2.4。

**显而易见的问题：**这是某种预期的行为，错误还是我在这里做错了什么？（请不是布尔答案；）

* * *

**编辑：**谢谢大家的兴趣，我不知道我应该发布多少额外的代码，除了从数据库中检索数据和`foreach`解析时间戳并构建一个新数组之外，我之前没有做太多事情（`$new_days`) 为失踪的日子。这一切都很好。

这段代码在我早期发布的代码之后：

```
array_multisort($unix_time, SORT_ASC, $results);
$days = implode('|', array_pluck('timestamp', $results));
$views = implode('|', array_pluck('views', $results));
$views_scaled = implode(',', array_pluck('views_scaled', $results));

```

（`array_pluck()`是从典型的 DB 转储数据集中的列生成数组的自定义函数）

* * *

**编辑2：**再次感谢，这[是完整的片段](http://snipplr.com/view/14259/ignorance-or-bug-on-phps-foreach-construct/)和`$results`数组的输出[`$a`](http://snipplr.com/view/14257/)和[`$b`](http://snipplr.com/view/14258/)（也在代码的注释中引用）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T04:22:54.967

检查您的代码片段，非常快（即将离开办公室一天），这可能与您的（第一个）循环中通过引用传递的某些内容有关。尝试按值使用 normal 并将所有内容存储到新的结果数组中。（将消除可能发生的任何谜团）。也可以尝试将第二个 foreach 中的第二个 $row 命名为不同的名称.. 打败我 - 不能告诉你更多地关注这个。

此行和以下代码块也不会执行

```
if ($last_day != $day_before_this_one AND $last_day) 
```

可能与它有关，新的日子永远不会填满，合并可能会做一些时髦的事情。

不会称之为答案，但我猜它是一个开始

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T12:34:36.487

正如已经提到的，问题是第一个 foreach 循环。

这里的推理...

```
<?
// set up an example array and loop through it using references (&)
$my_array = array(1,2,3,4);
foreach($my_array as &$item)
{
  $item = $item+.1;
}
// 1st loop, $item points to: $my_array[0], which is now 1.1
// 2nd, $item -> $my_array[1], which is now 2.1
// 3rd, $item -> $my_array[2], which is now 3.1
// 4th, $item -> $my_array[3], which is now 4.1
// looping done, but $item is still pointing to $my_array[3]

// next foreach loop
foreach($my_array as $item)
{
  var_dump($my_array);
  print $item."<br>";
}
// notice the & in the output of the var_dump, if you actually run this code.
// 1st loop: the value of $my_array[0] is assigned to $item, which is still a pointer/reference to $my_array[3]
// first loop.. array(1.1,2.1,3.1,1.1) // grabbing [0] and putting into [3] 
// next loop... array(1.1,2.1,3.1,2.1) // grabbing [1] and putting into [3]
// next loop... array(1.1,2.1,3.1,3.1) // grabbing [2] and putting into [3] (here's where the magic happens!)
// last loop... array(1.1,2.1,3.1,3.1) // grabbing [3] and putting into [3] (but [3] is the same as [2] !!!)
?> 
```

我希望这是有道理的！基本上倒数第二个值将被重复，因为最后一个值在第二个循环期间被替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T02:13:34.373

我无法想象这是如何预期的行为。这里一定有其他事情发生。你能把行为隔离到一段小到可以在这里发布的代码吗？如果你这样做，错误可能会变得很明显。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T02:41:46.723

我还要说还有其他事情发生。

我写了这个：

```
<?php

$a = array('bob','sam','tom','harry');
$b = array();
$c = array();

foreach($a as $item) {
        $c[] = $item;
}
$b = $a;

print_r($a);
print_r($b); 
```

并得到：

```
php ./test.php
Array
(
    [0] => bob
    [1] => sam
    [2] => tom
    [3] => harry
)
Array
(
    [0] => bob
    [1] => sam
    [2] => tom
    [3] => harry
) 
```

不过，我正在运行 PHP 5.2.8。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-22T03:12:18.037

我认为你的问题是结果集并不是一个真正的数组，它是一个 mysql 结果集对象，它就像一个数组。

我认为，如果您遍历每一行，将其分配给一个新数组，然后进行合并，它将正常运行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-22T04:31:44.180

除非我弄错了，否则这是不久前的一个 PHP 错误。我不知道细节，但数组和引用已经搞砸了一点。

# asp.net-mvc - Asp.Net MVC + CSLA + DDD 可能吗

> ID：775465
> 
> 赞同：5
> 
> 时间：2009-04-22T02:05:38.183
> 
> 标签：asp.net-mvc, domain-driven-design, csla

前几天我被要求审查一个基于 ASP.NET MVC + CSLA + DDD（域驱动设计）的系统。该系统的第一个版本基于 ASP.NET MVC + CSLA。第二个版本基于那个加上添加的 DDD。原因是因为......好吧，我不知道是什么。当我查看两种不同架构的图表时，很明显第二个版本非常复杂。CSLA 对象基本上使用域对象。当你看到这样的东西时，你就知道它已经闻起来了，但是如果没有 A) 对所有主题的极端了解或 B) 长时间使用它，很难证明为什么有人不应该这样做。对于这个主题，我没有这些，但我知道如果我从头开始构建它，我就不会这样做，也不会

那么，亲爱的读者，在这种情况下你会怎么做呢？我的想法是，如果你想使用 CSLA、MVC 和 DDD，那么你就站出来选择一个或另一个（CSLA 或 DDD）。如果你没有厨房里的厨师太多。

如果您对此事有意见，请提供一些见解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T16:46:21.560

> 我的想法是，如果你想使用 CSLA、MVC 和 DDD，那么你就站出来选择一个或另一个（CSLA 或 DDD）。如果你没有厨房里的厨师太多。

我倾向于同意你的观点。如果有人想用已经淘汰的 DDD 友好架构 + 支持框架来做 DDD，我会推荐[S#arp 架构](http://www.sharparchitecture.net/)而不是 CSLA。

话虽如此，有些人认为可以使用 CSLA 承担 DDD 的某些方面。显然，一个 DDD 纯粹主义者可能会对这种前景感到畏缩，但您不必成为一个纯粹主义者就可以从 DDD 中获得一些东西。Derick Bailey 有一个关于该主题的有趣博客：[http ://www.avocadosoftware.com/csblogs/dredge/archive/2007/02/19/687.aspx](http://www.avocadosoftware.com/csblogs/dredge/archive/2007/02/19/687.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T22:05:11.797

在我看来，CSLA 以最新版本自爆。意见不同，但在我的书中，当一个对象必须知道它是否是一个孩子时，这是非常错误的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-26T17:19:15.103

似乎有些人发现 CSLA 和 DDD / Alt.Net 并不完全是交叉用途。

我仍然同意，如果你决定走一条更纯粹、不那么务实的道路，你可能还有很多工作要做，以适应 Rocky 所做的出色工作，正如 Keith 所建议的那样，它可能是如果您不小心，很容易造成混乱。

一些进一步的信息：

[在 CSLA.NET 中使用依赖注入](http://beyondthispoint.blogspot.com/2008/12/using-dependency-injection-with-cslanet.html)

[在 CSLA.NET 中使用存储库模式](http://beyondthispoint.blogspot.com/2009/01/using-repository-pattern-with-cslanet.html)

洛基[为什么他致力于建立一个“务实”的框架](http://www.lhotka.net/weblog/RamblingThoughtsOnPragmaticDevelopment.aspx)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2009-04-22T02:46:51.283

我不确定从内存中使用 ActiveRecord 方法的 CSLA 是否特别适合 DDD。最好使用 nHibernate。

# c# - Windows 的键值数据库？

> ID：775474
> 
> 赞同：7
> 
> 时间：2009-04-22T02:08:33.993
> 
> 标签：c#, asp.net, windows, memcached, key-value

除了 MongoDB 和 Memcached，还有哪些键值对存储在 Windows 上运行？我见过的大多数似乎只能在 Linux 上运行（Hypertable、Redis、Lightcloud）。

相关链接：
[是否有经过业务验证的云存储/Key=>Value 数据库？（开源）](https://stackoverflow.com/questions/639545/is-there-a-business-proven-cloud-store-keyvalue-database-open-source)
[http://www.metabrew.com/article/anti-rdbms-a-list-of-distributed-key-value-stores/](http://www.metabrew.com/article/anti-rdbms-a-list-of-distributed-key-value-stores/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-22T03:14:50.980

[Berkeley](http://en.wikipedia.org/wiki/Berkeley_DB) DB可用[。](http://www.oracle.com/technology/products/berkeley-db/index.html)我很惊讶还没有人提到它。

您可以使用本机或 Cygwin 工具链在 Windows 上构建它，但如果您要将它与`C#`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-16T10:07:57.067

我会看看[highscalability.com](http://highscalability.com/drop-acid-and-think-about-data)上的这篇文章。它描述了一些您可能想要考虑的选项，包括[Tokyo Cabinet/Tyrant](http://tokyocabinet.sourceforge.net/)、[CouchDB](http://couchdb.apache.org/)和[MongoDB](http://www.mongodb.org/display/DOCS/Home)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-30T23:47:28.643

Redis 是 C99（Posix）。在 cygwin 上构建和运行它应该很简单。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-05-19T14:05:58.457

这是 Windows 的 CouchDb 安装程序

[http://people.apache.org/~mhammond/dist/0.11.0/](http://people.apache.org/~mhammond/dist/0.11.0/)

# c++ - 在 C++ 黑客游戏代码中保留地址？

> ID：775481
> 
> 赞同：4
> 
> 时间：2009-04-22T02:10:22.790
> 
> 标签：c++, memory-address

我有这段代码可以编辑游戏中的地址以获得无限弹药等等，我发现每台计算机的地址都不同，有时每次重新启动游戏时，我如何才能使这项工作仍然有效，即使他们改变了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-22T02:17:35.830

堆中记录内容的签名匹配。也许对特定的已知内容使用编辑距离。

我回答没有害处，既然你不得不问，你可能没有能力把它拉下来。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-22T02:19:43.407

如果你得到你要找的地址，然后在内存中搜索那个地址，找到指向那个数据的指针的地址，然后在内存中搜索*那个*地址，这样你就可以找到指向它的指针的地址，以此类推，你最终可能会找到一个不会改变的地址。然后，在运行时，您可以使用它作为起点并取消引用它以找到您正在寻找的位置。当然，这一切都取决于数据在内部的布局方式。它会变得非常复杂。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-22T02:18:39.010

最好的方法是在内存中寻找模式并使用偏移量来解决。这不会简单，因为这是游戏开发者想要阻止的事情。

所以他们不会有一个很好的文本字符串说“Ammo 在这个字符串开始之前存储了 27 个字节”。

如果他们正在做一些棘手的事情，比如每次运行游戏时都移动它（我会这样做，因为我很狡猾），你需要反汇编他们的代码来找出*他们*是如何定位内存的。

然后你做同样的事情。我知道，听起来很简单，而且确实如此。但是根据您过去的问题，我不确定“H4cKL0rD”是一个合适的绰号:-)，至少在这种情况下。

如果您对反汇编程序、十六进制编辑器等感到不自在，几乎可以肯定有一个程序可以为您解决问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-22T02:12:15.623

您要么放弃，要么使用反汇编程序变得非常好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-22T02:27:40.923

如果您只想完成工作而不关心自己编写代码，您可以使用专门为此任务设计的程序，例如[T-Search](http://en.wikipedia.org/wiki/Tsearch)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-03T18:12:08.600

我会说，预加载一些自定义内存分配器并尝试找到您正在寻找的 malloc() 大小。

由于您尝试破解的数据很可能存储在具有其他参数的结构中，因此了解结构大小将允许您在看到此大小的分配传递时采取特殊措施。

```
typedef struct {
   int ammo;
   int damage;
   int fire_distance;
} Sniper_AWP_T;

void *my_custom_malloc( int size ){
   void *ret = malloc(size);
   if( size == sizeof( Sniper_AWP_T ) ){
       hack_address = ret;
   }
   return ret;
}

// later on 

hack_address->ammo = 999; 
```

# python - 如何使用 Python 传输二进制数据？

> ID：775482
> 
> 赞同：3
> 
> 时间：2009-04-22T02:11:12.507
> 
> 标签：python, http, file, client-server, protocol-buffers

我是第一次在客户端-服务器程序上工作，可悲的是，我不知道从哪里开始我正在做的事情。

我将使用[Google Protocol Buffers](http://code.google.com/p/protobuf/)在客户端和服务器之间传输二进制数据。我将使用 Python 变体。据我了解，基本思想是客户端将序列化数据，将其发送到服务器，然后服务器将反序列化数据。

问题是，我真的不确定从哪里开始向服务器发送二进制数据。我希望它会像 HTTP 请求那样“简单”，但我一直在 Google 周围寻找传输二进制数据的方法，并在大量的教程、指南和文档中迷失了方向。我什至无法通过调查 HTTP 传输来判断我是否在吠叫错误的树（我希望使用它，因此如果需要安全性，我可以将它提升到 HTTPS 的一个档次）。不过，我真的不想达到套接字编程的水平——我想在转向之前使用可用的库。（我也更喜欢标准的 Python 库，但如果有完美的 3rd 方库，我会活下去。）

因此，如果有人对如何通过 Python 传输二进制数据有一个很好的起点（或想自己解释一下），我将不胜感激。顺便说一句，我正在运行的服务器当前正在运行带有 mod_python 的 Apache。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T02:28:37.800

每当您要将二进制数据从一个系统移动到另一个系统时，都需要牢记几件事。

不同的机器以不同的方式存储相同的信息。这对内存和网络都有影响。更多信息在这里（[http://en.wikipedia.org/wiki/Endianness](http://en.wikipedia.org/wiki/Endianness)）

因为您使用的是 python，所以您可以在这里放松一下（假设客户端和服务器都在 python 中），只需使用 cPickle 来序列化您的数据。如果你真的想要二进制文件，你将不得不熟悉 python 的 struct 模块（[http://docs.python.org/library/struct.html](http://docs.python.org/library/struct.html)）。并了解如何打包/解包您的数据。

我会首先从简单的线路协议服务器开始，直到您克服网络通信的困难。如果您以前从未这样做过，它会很快变得混乱。如何发出命令，如何传递数据，如何重新同步错误等等……

如果您已经了解客户端/服务器协议设计的基础知识，那么请先练习在磁盘上打包和解包二进制结构。对于这种情况，我还参考了 HTTP 和 FTP 的 RFC。

-------基于评论进行编辑-------- 通常这种事情是通过向服务器发送一个包含文件校验和以及文件大小的“标题”来完成的字节。请注意，我不是指 HTTP 标头，您可以根据需要自定义它。事件链需要像这样......

```
CLIENT: "UPLOAD acbd18db4cc2f85cedef654fccc4a4d8 253521"
SERVER: "OK"
(server splits the text line to get the command, checksum, and size)
CLIENT: "010101101010101100010101010etc..." (up to 253521 bytes)
(server reasembles all received data into a file, then checksums it to make sure it matches the original)
SERVER: "YEP GOT IT"
CLIENT: "COOL CYA" 
```

这过于简化了，但我希望你能看到我在这里谈论的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-22T02:50:27.687

我不确定我的问题是否正确，但也许你可以看看[扭曲的项目](http://twistedmatrix.com/trac/)。

正如您在常见问题解答中看到的那样，“Twisted 是一个用 Python 编写的网络引擎，支持多种协议。它包含一个 Web 服务器、多个聊天客户端、聊天服务器、邮件服务器等。Twisted 由许多子-可以单独访问的项目[...]”。

文档很不错，网上也有很多例子。希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T03:19:03.980

我想这取决于您与 Google Protocol Buffers 的联系程度，但您可能想查看[**Thrift**](http://incubator.apache.org/thrift/)。

> **Thrift**是一个用于可扩展的跨语言服务开发的软件框架。它将软件堆栈与代码生成引擎相结合，以构建在 C++、Java、Python、PHP、Ruby、Erlang、Perl、Haskell、C#、Cocoa、Smalltalk 和 OCaml 之间高效无缝工作的服务。

有一个很好的例子可以开始他们的主页。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T03:24:39.427

一个快速的问题：为什么是二进制？有效载荷本身是二进制的，还是您更喜欢二进制格式？如果是前者，也可以使用带有 JSON 或 XML 的 base64 编码；它确实使用了更多的空间（~34%）和更多的处理开销，但对于许多用例来说并不一定足够重要。

# visual-studio - 未为 xaml 安装 VS 2008 设计器

> ID：775484
> 
> 赞同：3
> 
> 时间：2009-04-22T02:11:50.103
> 
> 标签：visual-studio, visual-studio-2008, xaml

c:......\Page1.xaml 没有编辑器 请确保已安装文件类型 (.xaml) 的应用程序

不知道可能是什么问题。

我试图找到 devenv.exe，但我无法在任何地方找到它！我已经安装了sp1。我还完全卸载了 vs2008 和 .net framework 3.5 并重新安装了它。没有解决它。

更多背景知识：我上周安装了它，它工作正常，尝试安装 sql server 2008 dev edition 但它不会安装客户端工具，因为它不喜欢 vs 2008 的东西，所以我取消了 vs 2008 和sql server 2008 安装没有问题。然后我重新安装了vs2008，然后我的问题发生了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T02:41:49.313

除了何塞的回答，我会按顺序尝试以下。其中之一应该解决问题。

*   devenv /resetSkipPkgs
*   转到添加删除程序并修复 Visual Studio 安装

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T02:20:52.390

要修复您的安装，请运行：

```
devenv.exe /setup 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T02:50:07.810

您是否为 Visual STudio 安装了 Service Pack 1？如果没有，请这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-04-27T18:04:10.807

确保为此问题安装了文件类型 .xaml 的应用程序

最好的答案是点击开始搜索“devenv /resetskippkgs”然后运行它就可以了

# python - 排序集合：我如何正确获取（扩展）切片？

> ID：775490
> 
> 赞同：2
> 
> 时间：2009-04-22T02:14:31.327
> 
> 标签：python

我该如何解决这个问题？

```
>>> class unslice:
...     def __getitem__(self, item): print type(item), ":", item
...
>>> u = unslice()
>>> u[1,2]    # using an extended slice
<type 'tuple'> : (1, 2)
>>> t = (1, 2)
>>> u[t]  # or passing a plain tuple
<type 'tuple'> : (1, 2) 
```

合理的：

我目前正在过度设计一个能够返回项目范围的排序关联集合。我很可能希望在集合中存储小整数元组（或者甚至像 Ellipsis 这样更奇怪的值）（作为键），并且需要某种理智的方法来区分扩展切片和普通键

在一维的情况下，这不是问题。我想不出我想要收集 type 值的任何真正原因`slice`，特别是因为`xrange`值在功能上相似并且更容易被 pythonistas 识别（根据我的判断）。所有其他扩展切片结构都是 元组`slice`，`Ellipsis`或普通的 Python 值

除了 NumPy 中的多维数组之外，似乎没有其他类型的扩展切片可用于任何类型的集合。

我确实需要支持 n 维轴，类似于八叉树或 GiS 索引。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-22T03:01:14.757

由于无法区分调用 u[x,y] 和 u[(x,y)]，因此您应该将尝试定义的两个操作之一转换为实际方法。你知道，命名为 u.slice() 或 u.range() 或 u.getslice() 或 u.getrange() 或类似的东西。

实际上，在编写*自己的*程序时，我通常会发现，当我试图用两种截然不同的语义重载 Python 操作时，这意味着我正在做的**两**件事都需要变成命名方法！因为如果两者在含义上如此相似，以至于没有一个明显优于使用大括号 [] getitem 快捷方式的声明，那么如果**两个**操作都获得真实、可读、显式的方法名称，我的代码可能会更具可读性。

但是，很难说更多，因为你还没有告诉我们你到底是怎么陷入这个烂摊子的。为什么你既要在元组下存储东西又要**获取**东西的范围？有人怀疑你一开始就在做一些复杂的事情。:-)

哦，其他语​​言有这个问题让你说a[1][2]做多维访问很容易和a[1,2]区分开来。只是让你知道还有另一种选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T03:30:54.343

从[文档](http://docs.python.org/reference/expressions.html#index-917)：

> 这里的形式语法有歧义：任何看起来像表达式列表的东西也看起来像切片列表，因此任何订阅都可以解释为切片。与其使语法进一步复杂化，不如通过定义在这种情况下作为订阅的解释优先于作为切片的解释来消除歧义（如果切片列表不包含适当的切片或省略号，就是这种情况）。类似地，当切片列表正好有一个短切片且没有尾随逗号时，解释为简单切片优先于扩展切片。

因此，我认为不可能将`u[1,2]`-as-extended-slice 与`u[1,2]`-as-tuple-key 区分开来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T03:40:00.593

我目前对此的想法是简单地让通常与切片相关联的类型无法收集。我想不出任何理智的理由为什么有人想要用`slice`值做任何事情，或者`Ellipsis`除了在下标表达式中使用它们。

如果集合的用户想要对元组进行排序（而不是数字、字符串或日期或任何其他明显的东西），那么只需要一些额外的东西可能是有意义的。作为例子...

```
>>> u[t]
<type 'tuple'> : (1, 2)
>>> u[t,]
<type 'tuple'> : ((1, 2),) 
```

还没有真正用实际代码尝试过（此时实际上没有有效的 GiS 索引），但我怀疑这可能只是自动做正确的事情，因为扩展切片是长度为一（一维）的元组，恰好是一个元组。

# vb.net - 使用 vb.net Action(Of T) 和 lambda 声明匿名方法时出现问题

> ID：775504
> 
> 赞同：2
> 
> 时间：2009-04-22T02:21:07.210
> 
> 标签：vb.net, lambda, action, anonymous-methods

```
Imports System.Reflection
Public Class Test
    Private Field As String
End Class

Module Module1
    Sub Main()

        Dim field = GetType(Test).GetField("Field", Reflection.BindingFlags.NonPublic Or Reflection.BindingFlags.Instance)

        Dim test = New Test

        Dim GetValue = New Func(Of Test, String)(Function(t As Test) field.GetValue(test))

        'This line indicates a compile error: 'Expression does not produce a value':
        Dim SetValue = New Action(Of Test, String)(Function(t As Test, value As String) field.SetValue(test, value))
    End Sub
 End Module

Module Module2
    Dim field = GetType(Test).GetField("Field", Reflection.BindingFlags.NonPublic Or Reflection.BindingFlags.Instance) 'Is Shared (Module)
    Sub Main2()
        Dim test = New Test
        Dim GetValue = New Func(Of Test, String)(Function(t As Test) field.GetValue(test))
        Dim SetValue = New Action(Of Test, String)(Function(t As Test, value As String) field.SetValue(test, value))
    End Sub
End Module 
```

Donno 出了什么问题，但 Module2 工作得很好！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-22T02:30:30.433

**编辑**划掉我原来的答案，我误读了这个问题。

这不编译的原因是类型推断和后期绑定的问题。在第一个示例中，字段是一个局部变量，因此可以参与类型推断。编译器会正确推断出类型为 FieldInfo。这意味着 SetValue 调用是静态类型调用。它是一个 void 返回方法，因此与需要返回值的 Function lambda 表达式不兼容。

第二个示例中的字段值是在模块级别声明的。这些变量不受类型推断的影响，因此将选择类型对象。因为类型是对象，所以 SetValue 调用变成了后期绑定调用。假定所有后期绑定调用都指向返回类型为 Object 的函数。在运行时，如果函数返回 void，则实际上不会返回任何内容。因此，在这种情况下，它是一个非 void 返回表达式，因此可以编译。

您必须解决此问题的一个选项是在第一个示例中将字段显式键入为 Object。这将迫使它成为一个后期绑定调用，它将像第二个一样编译

```
Dim field As Object = ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T03:23:50.163

那么这是基于 JaredPar 帖子的最终答案：

```
Module Module1
    Sub Main()
        Dim field = GetType(Test).GetField("Field", Reflection.BindingFlags.NonPublic Or Reflection.BindingFlags.Instance)
        Dim test = New Test
        Dim GetValue = New Func(Of Test, String)(Function(t As Test) field.GetValue(test))
        'This line indicates a compile error: 'Expression does not produce a value': 
        Dim SetValue = New Action(Of Test, String)(Function(t As Test, value As String) DirectCast(field, Object).SetValue(test, value))
    End Sub
End Module 
```

注意演员反对

```
Dim SetValue = New Action(Of Test, String)(Function(t As Test, value As String) DirectCast(field, Object).SetValue(test, value)) 
```

# linq - 无法分配空值 - LINQ 查询问题

> ID：775510
> 
> 赞同：10
> 
> 时间：2009-04-22T02:26:17.900
> 
> 标签：linq

我有以下 LINQ 查询：

```
DataClassesDataContext dc = new DataClassesDataContext(); 
var query = from contact in dc.Contacts
            select new
            {
                ContactId = contact.ContactId,
                LastName = contact.LastName,
                FirstName = contact.FirstName,
                Addresses = contact.Addresses,
                Phones = contact.Phones,
                DOB = contact.BirthDate,
                LastNote = contact.Notes.Max(n => n.Created), //this line causes the error
                Status = contact.ContactStatus.ContactStatusName,
                EmailAddress = contact.Emails
            }; 
```

我获得笔记集合的最大创建日期的行导致引发以下异常：

> 例外：不能将 null 值分配给 System.DateTime 类型的成员，该类型是不可为 null 的值类型。

如何编写查询以允许 Null 值进入 LastNote 字段？DOB 字段定义为 DateTime？并且处理空值没有问题。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-04-22T02:29:48.187

想我想通了。

如果我将最大音符值转换为可为空的 DateTime ，它似乎消除了异常。以下更改对我有用：

```
LastNote = (Nullable<DateTime>)contact.Notes.Max(n => n.Created) 
```

正如其他人所指出的，它也可以使用可以为空的 DateTime 的简写符号来编写，如下所示：

```
LastNote = (DateTime?) contact.Notes.Max(n => n.Created) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-22T02:31:41.803

将该行重写为：

```
LastNote = (DateTime?) contact.Notes.Max(n => n.Created), 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-11T11:00:35.863

```
LastNote = contact.Notes.Max(n => (DateTime?)n.Created) 
```

在网上找不到这个，所以我希望这对其他人有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-18T11:48:10.923

在VB中是这样的：

```
LastNote = CType(contact.Notes.Max(n => n.Created), Global.System.Nullable(Of Date)) 
```

我认为...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-22T02:43:50.133

您*可以*这样做，或者您可以更改您的数据库架构，以便“已创建”列不允许空值。

出现这种情况是因为其中一行返回 Created 的空值。如果数据库不允许空值，则该场景将永远不会发生。

# .net - Satellite Assembly 版本必须与基本版本匹配吗？

> ID：775512
> 
> 赞同：0
> 
> 时间：2009-04-22T02:26:54.387
> 
> 标签：.net, .net-2.0, strongname, satellite-assembly

我刚刚遇到了一种情况，我需要使用我们其中一个程序集的新版本来修补发行版。我所有的程序集都是强名称，这是一个 Windows 窗体应用程序。我编辑了我的 App.config 以进行适当的重新映射，一切都很好，直到我们使用本地化版本测试了我们的软件。我们看到的问题是现有的附属程序集没有加载并且我们没有看到本地化的资源。我能找到的唯一解决方案是使用基本程序集作为模板，使用程序集链接器重建附属程序集。

几个问题：

如果我的基础程序集是强命名的，我的附属程序集也必须是强命名的吗？就我而言，我没有使用 GAC。

为什么我的附属程序集不使用我的 App.config 中指定的重定向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-22T08:25:12.747

是的，附属程序集也必须是强命名的，并且需要与真实程序集相同的版本和公钥。

请参阅此链接： http: [//www.codeguru.com/csharp/.net/net_general/tipstricks/article.php/c11367/](http://www.codeguru.com/csharp/.net/net_general/tipstricks/article.php/c11367/)

我不确定为什么在您使用重定向时未加载它。您将程序集 A 版本 1 替换为版本 2。您将版本 1 重定向到版本 2。您的程序集 A 的附属程序集仍在版本 1 中？它是否正确？这当然行不通。如果更换组件，则必须更换其卫星。

# windows - Windows 中的符号链接

> ID：775518
> 
> 赞同：0
> 
> 时间：2009-04-22T02:29:53.210
> 
> 标签：windows, linux, symlink

我正在使用一个庞大的图像数据库。每次我使用图像数据库创建新测试时，该数据库都会被复制。所以在 Linux 中，我使用链接文件到一个通用的数据库集。

现在，我在 Windows 中，有什么方法可以使用 Linux 链接到文件或 Windows 中的等效项。或者使用一些相对文件路径是唯一的出路？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T03:26:19.907

你是说[交界处](http://technet.microsoft.com/en-us/sysinternals/bb896768.aspx)吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T02:36:06.470

您在寻找类似[Reparse points](http://msdn.microsoft.com/en-us/library/aa365503(VS.85).aspx)的东西吗？这些有点像 linux 上的符号链接。如果您需要一种方法来查看您的 linux 分区，您可能会对[Ext2Ifs](http://www.fs-driver.org/)之类的东西感兴趣。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T03:08:24.913

您可以使用文件符号链接。请参阅[此处了解更多信息](http://www.shell-shocked.org/article.php?id=284)，也请参阅[此处](http://en.wikipedia.org/wiki/Symbolic_link)

# mysql - 在 mysql 中处理时间偏移的建议

> ID：775520
> 
> 赞同：0
> 
> 时间：2009-04-22T02:30:35.877
> 
> 标签：mysql, timezone, offset

将这个项目提炼成最简单的术语；

1.  用户点击一个按钮，一个带有 NOW() 时间戳的记录被创建。
2.  NOW() 当然等于服务器上创建记录的时间。
3.  我需要根据他们的时区向他们展示统计数据，而不是我的。

在 MySql 中与时区偏移对齐的最佳方法是什么？是否有专门用于处理偏移量的特定字段格式？

我需要按照以下方式运行：

```
 SELECT DATE_FORMAT(b_stamp, '%W') AS week_day, count(*) AS b_total, b_stamp
      FROM table
      WHERE
   (b_stamp >= DATE_SUB(NOW(), INTERVAL 7 DAY))
      AND
   (user_id = '$user_id') GROUP BY week_day ORDER BY b_stamp DESC 
```

我宁愿不问用户他们在哪个时区，我认为 JS 是从浏览器中提取这些数据的唯一方法。也许如果他们在移动设备上，而且这不是一个基于网络的应用程序，我可以得到它，但这可能不是这个方向。

我正在考虑最好的方法可能是确定它们的偏移量，并将变量设置为“server_time”+/- their_offset。这使得它看起来好像服务器位于不同的位置。我相信这将是最好的，因为我不需要向代码中添加额外的 +/- 逻辑，使其变得混乱并使其变得丑陋。

另一方面，这会将带有时间戳的数据放入数据库中。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T02:37:59.073

您可以使用 javascript 从客户端获取时区，如下所示：

var timeZone=(new Date().gettimezoneOffset()/60)*(-1);

打印变量并在使用前进行测试。我认为这将是您最简单的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T03:59:07.490

除了使用 JS，您还可以获取他们的 IP 地址的时区（使用类似 ip2location 的东西），然后使用 MySQL 的 CONVERT_TZ() 函数。

# linux - 在linux中编译actionscript

> ID：775526
> 
> 赞同：4
> 
> 时间：2009-04-22T02:32:10.880
> 
> 标签：linux, actionscript, command-line

我正在开发一个需要 Flash mp3 播放器的网站。我完全不知道弄乱 flash/actionscript/flex 等的程序，但是我需要稍微编辑一下 flash（我需要添加两行代码）。那里有大量的教程用于设置 flash（或 flex 或其他）开发环境，但由于我的需求非常简单，我想比这更轻量级（而且，许多似乎已经过时）。我想我要说的是我正在寻找一种简单的方法来重新编译一些现有的动作脚本（命令行是一个加号！）。有没有人有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-22T23:25:24.330

下载免费/开源[Flex 3 SDK](http://opensource.adobe.com/wiki/display/flexsdk/Download+Flex+3)。这包括一个 ActionScript3 编译器。像这样运行编译器：

```
mxmlc MyAs3File.as 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T02:35:57.890

你可以在这里在线编译它：[http](http://wonderfl.kayac.com/) ://wonderfl.kayac.com/ 。那样就不会乱了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T03:28:59.793

ActionScript 2有[MTASC](http://mtasc.org/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-02-20T09:48:12.530

我还想说[swftools](http://swftools.org)正是你所需要的。有一个 swfc 编译器可以编译 as2 文件。我真的建议更新源。AS3 比 AS2 快得多，并且有很多工具，例如[开源 Flex sdk](http://opensource.adobe.com/wiki/display/flexsdk/Flex+4.6)中包含的 mxmlc 和 fcsh 。如果您正在寻找一个成熟的 IDE，有一个作为[开源端口](http://code.google.com/p/fb4linux/)发布的 Linux 版本的 Flash Builder ……还有其他几个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-07T01:11:51.127

### 通用 Linux

`linux`您可以从[swftools.org 获取源代码](http://www.swftools.org/)。

### Debian / Ubuntu

在`debian`/`ubuntu`你可以运行

```
apt-get install swftools 
```

### Mac OS X

不完全是“linux”，但`mac OS X`如果你安装了[自制软件](http://brew.sh/)，你可以这样做：

```
brew install swftools 
```

### 很好，但是我如何编译代码？

安装了一个，你应该有一个新的实用程序，你可以用它来做：

```
as3compile MyAs3File.as 
```

### 陷阱

请注意，这不是 Adob​​e 编译器的 1:1 替代品 - 有些东西它不支持（请参阅 swftools.org 上的文档、常见问题解答、更改日志），但它对于编译我的简单动作脚本非常有效。

# python - 使用 pygtk 和 glade 将 pixbuf 绘制到绘图区域

> ID：775528
> 
> 赞同：3
> 
> 时间：2009-04-22T02:34:43.010
> 
> 标签：python, drawing, pygtk, glade

我正在尝试在 python 中创建一个 GTK 应用程序，我可以在其中将加载的图像绘制到单击它的屏幕上。我尝试这样做的方法是将图像加载到 pixbuf 文件中，然后将该 pixbuf 绘制到绘图区域。

主要代码行在这里：

```
def drawing_refresh(self, widget, event):
    #clear the screen
    widget.window.draw_rectangle(widget.get_style().white_gc, True, 0, 0, 400, 400) 
    for n in self.nodes:
         widget.window.draw_pixbuf(widget.get_style().fg_gc[gtk.STATE_NORMAL],
                                   self.node_image, 0, 0, 0, 0) 
```

这应该只是将 pixbuf 绘制到左上角的图像上，但除了白色图像之外什么都没有显示。我已经通过将 pixbuf 放入 gtk 图像来测试它是否可以加载。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T07:46:15.337

我发现我只需要让函数在`widget.queue_draw()`函数末尾调用另一个公开事件。该函数在开始时仅被调用一次，此时没有可用的节点，因此没有绘制任何内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-23T03:41:31.560

您可以使用 cairo 来执行此操作。首先，创建一个基于 gtk.DrawingArea 的类，并将暴露事件连接到您的暴露函数。

```
class draw(gtk.gdk.DrawingArea):
    def __init__(self):
        self.connect('expose-event', self._do_expose)
        self.pixbuf = self.gen_pixbuf_from_file(PATH_TO_THE_FILE)

    def _do_expose(self, widget, event):
        cr = self.window.cairo_create()
        cr.set_operator(cairo.OPERATOR_SOURCE)
        cr.set_source_rgb(1,1,1)
        cr.paint()
        cr.set_source_pixbuf(self.pixbuf, 0, 0)
        cr.paint() 
```

这将在每次发出暴露事件时绘制图像。

# nhibernate - 如何调试 nHibernate/RhinoMocks TypeInitializer 异常

> ID：775529
> 
> 赞同：3
> 
> 时间：2009-04-22T02:35:29.967
> 
> 标签：nhibernate

拉我的头发试图调试这个。今天早上早些时候，这段代码运行良好，但我看不出我为破坏它所做的更改。现在，每当我尝试打开 nHibernate 会话时，都会收到以下错误：

测试方法 BCMS.Tests.Repositories.BlogBlogRepositoryTests.can_get_recent_blog_posts 抛出异常：System.TypeInitializationException：“NHibernate.Cfg.Environment”的类型初始化程序抛出异常。---> System.Runtime.Serialization.SerializationException: 成员 'Castle.DynamicProxy.Serialization.ProxyObjectReference,Rhino.Mocks, Version=3.5.0.1337, Culture=neutral, PublicKeyToken=0b3305902db7183f'的类型未解析。

关于如何调试这里发生的事情的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-07T06:03:25.960

我遇到了和你一样的问题——在我的例子中，它是使用 NLog 的静态方法：

```
LogManager.GetCurrentClassLogger() 
```

我用 Rhinomocks 存根替换了当前线程的主体：

```
var identity = MockRepository.GenerateStub<IIdentity>();
identity.Stub(x => x.IsAuthenticated).Return(true);
var principal = MockRepository.GenerateStub<IPrincipal>();
principal.Stub(x => x.Identity).Return(identity);
Thread.CurrentPrincipal = principal; 
```

为我的代码运行单元测试引发了与原始问题相同的异常。

堆栈跟踪：

```
at System.AppDomain.get_Evidence()
at System.AppDomain.get_EvidenceNoDemand()
at System.AppDomain.get_Evidence()
at System.Configuration.ClientConfigPaths.GetEvidenceInfo(AppDomain appDomain, String exePath, String& typeName)
at System.Configuration.ClientConfigPaths.GetTypeAndHashSuffix(AppDomain appDomain, String exePath)
at System.Configuration.ClientConfigPaths..ctor(String exePath, Boolean includeUserConfig)
at System.Configuration.ClientConfigPaths.GetPaths(String exePath, Boolean includeUserConfig)
at System.Configuration.ClientConfigurationHost.RequireCompleteInit(IInternalConfigRecord record)
at System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject, Boolean requestIsHere, Object& result, Object& resultRuntimeObject)
at System.Configuration.BaseConfigurationRecord.GetSection(String configKey)
at System.Configuration.ClientConfigurationSystem.System.Configuration.Internal.IInternalConfigSystem.GetSection(String sectionName)
at System.Configuration.ConfigurationManager.GetSection(String sectionName)
at NLog.Config.XmlLoggingConfiguration.get_AppConfig()
at NLog.LogFactory.get_Configuration()
at NLog.LogFactory.GetLogger(LoggerCacheKey cacheKey)
at NLog.LogFactory.GetLogger(String name)
at NLog.LogManager.GetCurrentClassLogger()
at MyClassHere... 
```

因此，正如您从堆栈跟踪中看到的那样，尝试读取配置文件，这是行不通的 - 为什么？因为现在模拟的当前主体不再是我们最初拥有的 WindowsPrincipal - 它现在是一个模拟的主体，不会有任何类型的 Windows 文件访问权限。

想一想，这里有几种方法可以解决这个问题。

1.  将记录器注入我的班级，以便可以对其进行存根（我想我可能应该这样做......）。这将允许我为 Thread 主体使用存根。
2.  修改线程上现有的 WindowsPrincipal（或基于它创建另一个）以添加调用我的方法所需的角色。

- 更新 -

为了解决我的问题，最后我决定按照上面的第一个建议运行。为了避免编写我自己的 NLog Logger 抽象，我只是利用了 Common.Logging 提供的内容。类构造函数现在接受 ILog 作为其参数之一，注入记录器的 Unity 配置如下所示：

```
container.RegisterType<ILog>(new TransientLifetimeManager(), new InjectionFactory(x => LogManager.GetCurrentClassLogger())); 
```

同时，我的单元测试现在允许我传入一个模拟记录器。

```
var logger = MockRepository.GenerateStub<ILog>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T14:11:10.590

更多信息......它似乎与将 Thread.CurrentPrincipal 切换为模拟的 IPrincipal 实现有关。我在实体内的域模型中进行所有安全检查。在修改实体的属性之前，实体的方法会检查 Thread.CurrentPrincipal.IsInRole()。

因此，为了测试实体的方法，我必须在调用实体方法之前设置不同的用户（贡献者用户、版主用户等）。

我还没弄清楚为什么昨天它工作得很好。

这是我的模拟 IPrincipal 的示例：

```
 private static IPrincipal _blogContributorUser = null;
    public static IPrincipal BlogContributorUser
    {
        get
        {
            if (null == _blogContributorUser)
            {
                var identity = MockRepository.GenerateStub<IIdentity>(); 
                identity.Stub(p => p.Name).Return("BlogContributor").Repeat.Any(); 
                var principal = MockRepository.GenerateStub<IPrincipal>(); 
                principal.Stub(p => p.Identity).Return(identity).Repeat.Any();
                principal.Stub(p => p.IsInRole(UserRoles.BlogContributor)).Return(true).Repeat.Any();
                principal.Stub(p => p.IsInRole(UserRoles.CommentContributor)).Return(true).Repeat.Any();
                principal.Stub(p => p.IsInRole(UserRoles.TagContributor)).Return(true).Repeat.Any();
                _blogContributorUser = principal;
            }
            return _blogContributorUser;
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-07-02T14:06:17.417

我有同样的问题。看起来它在读取配置文件时遇到了麻烦，因为 CurrentPrincipal 已更改。在替换 CurrentPrincipal（例如，打开 NHibernate 会话、初始化 Unity 等）之前，我已经从配置文件中移动了所有必须初始化的内容，之后一切正常。当然，这不是解决方案，只是一个绝望的人想出的解决方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-04T14:35:47.283

像这样的错误通常表示版本控制问题。

我怀疑可能发生的是 RhinoMocks 和 NHibernate 都在使用 Castle.DynamicProxy 类型，但他们要求该类型的不同版本。

您最近是否将 RhinoMocks 或 NHibernate 升级到更新版本？

如果这不是问题，那么更多信息会有所帮助 - 所有测试都失败了，还是只有这个特定的？

*编辑*您可能还希望尝试将这些行添加到您的 Properties\AssemblyInfo.cs 文件中：

```
[assembly: InternalsVisibleTo("Rhino.Mocks")] 
[assembly: InternalsVisibleTo("Castle.DynamicProxy")]
[assembly: InternalsVisibleTo("DynamicProxyGenAssembly2")] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-12T14:33:24.827

如果错误与模拟`IPrincipal`和/或`IIdentity`RhinoMocks 或 Moq 有关，解决方案实际上非常简单：不要使用这些框架，而是创建简单的假类型。

这是一个简单的“允许一切”实现的示例：

```
public class FakeIdentity : IIdentity
{
    public string Name { get { return "IntegrationTest"; } }

    public string AuthenticationType { get { return "Kerberos"; } }

    public bool IsAuthenticated { get { return true; } }
}

public class FakePrincipal : IPrincipal
{
    public FakePrincipal() { this.Identity = new FakeIdentity(); }

    public IIdentity Identity { get; private set; }

    public bool IsInRole(string role) { return true; }
} 
```

如果您需要更多复杂性，请查看该[`System.Security.Principal.GenericPrincipal`](https://msdn.microsoft.com/en-us/library/system.security.principal.genericprincipal(v=vs.110).aspx)课程。

# .net - .net 中是否有用于读取 XML 注释文档文件的 API

> ID：775532
> 
> 赞同：17
> 
> 时间：2009-04-22T02:37:25.890
> 
> 标签：.net, xml, api, documentation, intellisense

在这个[问题](https://stackoverflow.com/questions/194899/where-does-visual-studio-get-the-type-description-info-used-by-intellisense)中，我看到微软为 BCL 提供了 XML 文档文件。我想知道是否有人知道 .net 中是否有一个 API 可用于在运行时查找它。我知道我们可以使用 XML api 手动解析文件。

用例是我们允许在我们的系统中使用自定义（读取第 3 方）类型/程序集，并且在 UI 中选择这些时，我们希望提取自定义类型/程序集创建者指定的文档，或者如果不可用提供其他默认值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-07-07T04:46:48.997

我在 CodePlex 上维护[Jolt.NET](http://jolt.codeplex.com)项目，并实现了执行此任务的功能。有关更多信息，请参阅[Jolt](http://jolt.codeplex.com/Wiki/View.aspx?title=Jolt)库。

本质上，该库允许您以编程方式定位和查询 XML 文档注释文件，以使用元数据类型`System.Reflection`（即`MethodInfo`，`PropertyInfo`等）中的程序集。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-22T04:14:18.450

[Microsoft 的 Sandcastle](http://blogs.msdn.com/sandcastle/ "微软沙堡")是一种工具，用于在有或没有 XML 注释文件的帮助下从程序集中提取文档。它已作为开源发布。您可以尝试查看该工具的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-28T15:56:42.990

让我们考虑一下。

XML 注释绝不是组装单元的一部分。因此，您正在谈论的第 3 方大会将没有任何信息可供您从中提取评论。

现在，如果这些程序集可以生成包含此文档的 XML 文件，可能使用 SandCastle 或 nDoc，那么您可以按照您的意愿读取这些 XML 文件。

接下来的问题是 - 假设您有这些 XML 文档文件，如何解析和阅读它们

*   我建议使用[**Linq to XML**](http://msdn.microsoft.com/en-us/library/bb308960.aspx)来快速轻松地加载此文档。这在很多方面都比 SandCastle 所做的 XSLT 处理要好。只要您了解 XML 文档文件的 XML 架构/层次结构，使用 Linq to XML 执行此操作不会花费那么长时间

让我知道情况如何，或者如果您有任何问题

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-17T07:31:34.067

这是另一个：[NuDoc：一个 .NET XML API 文档阅读器](http://clariuslabs.github.io/NuDoc/)

它使用访问者模式来遍历 XML 文档。

这是在[GitHub](https://github.com/clariuslabs/NuDoc)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-02T16:10:28.943

您可能想要调查以下库

*   [通用编译器基础结构](http://ccimetadata.codeplex.com/Wiki/View.aspx?title=Unfinished%20business)
*   [应用程序扩展框架](http://plugins.codeplex.com/)

# jdbc - 控制 JMS 服务器：创建的 MDBean 过多（weblogic）

> ID：775543
> 
> 赞同：1
> 
> 时间：2009-04-22T02:44:28.370
> 
> 标签：jdbc, jms, weblogic, jboss-mdb

我有一个执行延迟操作的应用程序。用户生成 100 万条消息，这些消息存储在 JMS 队列中，然后一个 MDBean 使用这些消息并执行一些操作并将数据存储在数据库中。由于 JMS Queue 工作得太快，它会尝试创建 100 万个 MDBean 实例，而这些实例又会尝试创建 100 万个数据库连接。由于 JDBC 连接池无法处理 100 万个连接请求，因此其中一些超时也就不足为奇了。

控制创建的 MDBean 数量的最佳解决方案是什么？100 万条消息最好由一定数量的不超过 JDBC 池中允许的连接数的 MDBean 处理

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T02:57:19.383

您可以使用 weblogic-ejb-jar.xml 中 bean 的描述符中的 max-beans-in-free-pool 元素来限制 MDB 的实例数。

```
<message-driven-descriptor>
   <pool>
      <max-beans-in-free-pool>100</max-beans-in-free-pool>
      <initial-beans-in-free-pool>50</initial-beans-in-free-pool>
   </pool>
   ...
</message-driven-descriptor> 
```

如果未指定，则创建的实例数将仅受可用线程数的限制。无论如何，最好将最大线程数设置为等于或小于数据库连接池的大小。

# html - Firefox 停留在“等待”或“正在传输数据”

> ID：775548
> 
> 赞同：3
> 
> 时间：2009-04-22T02:49:43.507
> 
> 标签：html, css, hover, firefox-3

我有一个网站，其中包含一个 CSS 样式的按钮，用于在悬停时显示不同的图像。我等待页面完全加载，然后将鼠标移到该按钮上。

Firefox 将显示新图像，但状态栏卡住显示“正在从 www.server.com 传输数据”或“正在等待 www.server.com”，并且永远不会消失。我可以通过[Firebug](http://en.wikipedia.org/wiki/Firebug)的网络视图看到图像在悬停时正确下载，并且我在任何地方都看不到其他错误。

什么会导致这种情况？我之所以问，是因为我在此页面上遇到了后续 Ajax 调用完成脚本的虚假问题。

Firefox 卡住显示此状态是一个常见问题吗？原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T02:58:14.967

不知道为什么会卡住，但有更好的方法来做翻转。将常规图像和悬停图像放在同一个图像中。然后使用`background-position`做翻转：

```
a.btn {
  background-image: url("/img/btn.png");
  background-position: 0px 0px;
}
a.btn:active {
  background-position: 0px 50px;
}
a.btn:hover {
  background-position: 0px 25px;
} 
```

上面的 CSS 用于高度为`25px`. 顶部图像只是常规图像；下面是悬停图像；在其下方是`active`图像，单击链接时会显示该图像。

这消除了翻转状态更改之间的任何加载延迟。如果你想变得花哨，你甚至可以使用 JavaScript 为过渡设置动画（通过包含过渡帧）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T04:41:02.973

根据操作系统和网络类型，网络连接可能会因以下原因停止：

*   客户端上的操作系统只允许一次打开一定数量的连接。
*   服务器只允许来自单个客户端（或 IP 地址）的一定数量的连接。

Firefox 中的默认网络设置应该可以防止 99% 的问题，因为 Firefox 可以防止自己打开太多与服务器的连接或打开连接太快。此外，如果一切都以健康的方式运行，在打开连接失败的情况下，Firefox 会将它要发出的任何请求排队，并在它可用时将其放在另一个连接上，或类似的东西。

有时代理会干扰事物，甚至是您的 ISP 在您不知情的情况下使用的透明代理。有时网络上的数据包丢失过多，甚至 TCP 连接都变得不可靠。

但是，根据所描述的症状 - 它似乎是完全可重现的，我可能会查看服务器。无论如何，不​​要使用 Firebug 和所有方式来处理网络请求，还要检查服务器日志以查看是否有任何问题。如果 Web 服务器收到请求但由于某种原因无法提供服务，则应记录该请求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T03:59:00.687

我不熟悉这个具体问题，但我确实对运行 Gecko 的网络库 Necko 做了一些测试。

缺少一些欺骗状态字段的代码，状态栏向 www.server.com 指示某种网络活动。

您应该仔细查看您的代码，尤其是您可能加载的任何 js 库，以查看是否有一些意外的网络功能被启动。

如果您找不到任何明显的东西，您应该转向进行网络跟踪或使用 [HTTP 日志记录](https://developer.mozilla.org/en/HTTP_Logging)，这取决于您更容易。

如果此时您无法隔离问题，您可能发现了一个新错误！不太可能，但这确实发生在我在模块上的工作期间......你应该在 bugzilla.mozilla.org 中提交一个错误，遵循最新和最伟大的错误提交规则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-05T15:33:57.100

您在加载 git.gnome.org 站点时遇到困难，并且无法加载。控制台说：样式表[https://git.gnome.org/browse/cgit_text.css](https://git.gnome.org/browse/cgit_text.css)未加载，因为它的 MIME 类型“text/html”不是“text/css”。

# printing - 有没有虚拟 COM 端口收据打印机之类的东西？

> ID：775560
> 
> 赞同：6
> 
> 时间：2009-04-22T03:02:06.223
> 
> 标签：printing, virtual-serial-port

我正在调试一些直接写入 COM 端口的代码，以便在收据打印机上打印收据。打印机型号类似于 Epson TM-88。

如果我可以使用某种虚拟打印机，而不是在调试此代码时打印大量热敏纸，那就太好了。

与[PDFCreator](http://sourceforge.net/projects/pdfcreator/)或[FinePrint](http://www.fineprint.com)类似，但使用虚拟 COM 端口而不是虚拟 Windows 打印机。

有谁知道这样的事情？

**编辑：**代码发送控制字符以获取粗体文本和其他格式。如果可能的话，我想在输出中看到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T03:36:41.303

[COM Port Redirector](http://en.wikipedia.org/wiki/COM_port_redirector)的维基百科页面底部有一个开源和免费软件工具列表，可以重定向串行端口，您可能可以为打印机编写自己的简单模拟器。

如果收据打印机类似于我使用的 Zebra 或 Intermec 打印机，那么格式只是一些 ASCII 格式的打印命令。例如，Intermec 打印机使用 Intermec 打印机语言 (IPL)。就爱普生 POS 打印机而言，它看起来像是使用一种称为 ESC/POS 的语言。这是另一个包含更多信息的[答案。](https://stackoverflow.com/questions/308588/where-can-i-find-a-esc-pos-epson-barcode-test-program)顺便说一下，这里是 ESC/POS[命令规范](http://www.posprint.ru/pdf/escpos.pdf)。

请问，硬件自带的驱动是Windows打印机驱动吗？如果是这样的话，你不能使用像[CutePDF](http://www.cutepdf.com/Products/CutePDF/writer.asp)这样打印到 PDF 文件的东西来完成所有的测试吗？当您以您喜欢的方式获得它时，然后使用实际打印机进行最终测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T03:06:22.997

Microsoft 的免费 Virtual PC 可让您将访客虚拟机的 COM 端口定向到真机上的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T03:27:44.507

您可以编写一个简单的应用程序来模拟打印机的行为，并在另一台通过零调制解调器电缆连接的机器上运行它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-02-07T14:43:18.917

如果只是将原始数据打印到输出文件，为什么不简单地添加虚拟打印机并将端口配置为 FILE 呢？当您的代码调用打印机时，将打开文本框，您可以在其中提供文件名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-04-16T17:29:46.210

试试 HHD Free Serial Port Monitor 和 VSPE Free Serial Port Emulator。我正在尝试直接打印到屏幕上的虚拟收据打印机，但发现这些工具也很有用。HHD 以几种不同的方式显示数据流以及输出的控制台视图。

# delphi - 分发带有第三方 UI 元素的设计时包

> ID：775561
> 
> 赞同：2
> 
> 时间：2009-04-22T03:05:31.190
> 
> 标签：delphi, ide, packages, custom-component, bpl

现在我正在学习更多关于组件开发的设计时间方面的知识，我有一些可能会变成针对 Delphi 2007 的 IDE“插件”（如果兼容，还有其他插件）。

理想情况下，这些表单/UI 将使用我经常使用的一些第三方组件。假设许可可以为 IDE 插件等分发这些组件，那么与对具有“完整源代码”的包所做的相比，我需要做些什么来准备分发包？

（我希望这个问题有意义。如果没有，请善待并提出问题）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T03:41:33.943

您需要分发为您将支持的每个 Delphi 版本（版本 + 更新）编译的 BPL，然后只分发 BPL。设置一个虚拟机来测试它。BPL 是一个特殊的 DLL，所以你只是分发一个二进制文件，它应该与你的许可证一起工作。

分发 .PAS 或 .DCU 很可能违反许可协议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T05:49:45.930

您可能会发现这会导致各种问题。

GExperts 的做法不同。它是一个静态链接到一些第 3 方控件并仅引用 Delphi 自己的运行时包的 DLL。这不会导致与其他包的任何冲突，因为静态链接的单元对 IDE 不可见。这也意味着 GExperts 不需要分发任何运行时包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T04:23:39.723

不要在设计时包中分发这些组件。如果您的客户也碰巧想在他们自己的项目中使用这些相同的组件，那么您和您的客户都会感到头疼。如果您将这些组件的单元放在设计时包中，那么您的客户将无法在工具面板上安装他们自己的这些组​​件的副本，因为一次只能加载一个单元的一个副本。

您正在使用的组件应该已经从他们的供应商处获得了运行时包。*将该*包放入设计时包的“需要”列表中。仅分发*.bpl*文件；我认为您可以将它安装在与设计时包相同的目录中。

该运行时软件包也是*供应商*设计时软件包的要求，您的客户将在他们的 IDE 中安装该软件包。

# c# - 如何使用参数制作链接按钮

> ID：775566
> 
> 赞同：2
> 
> 时间：2009-04-22T03:07:58.050
> 
> 标签：c#, html, parameters, onclick, linkbutton

HTML：

```
<asp:LinkButton ID="lnk_productImage" runat="server" Text="select"
   OnClick="viewProductImage('<%#DataBinder.Eval(Container.DataItem,"Id") %>')"
   >
</asp:LinkButton> 
```

代码隐藏：

```
protected void viewProductImage(object sender, EventArgs e, int id)
{ 
    //Load Product Image
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-22T03:39:25.010

我看到您正在使用中继器，因此您可能可以使用以下代码：

在您的转发器模板中：

```
<asp:Repeater ID="_postsRepeater" runat="server" OnItemCommand="_postsRepeater_ItemCommand">
  <ItemTemplate><asp:LinkButton ID="_postDeleteLinkButton" runat="server" CommandName="DeletePost" CommandArgument="<%# ((Post)Container.DataItem).ID %>">Delete</asp:LinkButton></ItemTemplate>
</asp:Repeater> 
```

然后处理转发器的 ItemCommand 事件：

```
protected void _postsRepeater_ItemCommand(object source, RepeaterCommandEventArgs e)
{
    if (e.CommandName == "DeletePost") // Replace DeletePost with the name of your command
    {
        // Get the passed parameter from e.CommandArgument
        // e.g. if passed an int use:
        // int id = Convert.ToInt32(e.CommandArgument);
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-22T03:24:29.117

使用 linkbutton 的 CommandArgument 属性来传递参数。

CommandArgument 属性：

获取或设置传递给 Command 事件处理程序的可选参数以及关联的命令名称属性。

[链接按钮成员](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton_members.aspx)

# c# - C# - 如何通过 HTTP 读取连续的 XML 流

> ID：775574
> 
> 赞同：9
> 
> 时间：2009-04-22T03:16:43.097
> 
> 标签：c#, xml, http, httpwebrequest

我试图找出从服务中使用连续 XML 数据流的最佳方法，该服务通过 HTTP 将数据作为“恒定”提要发送。

我正在考虑使用 HttpWebRequest/Response，但我不确定如果数据只是连续流式传输会如何。

有什么想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-22T03:41:09.373

我以前做过这个，不是用 XML，而是用需要解析应用程序状态更改的数据。HttpWebResponse.GetResponseStream() 方法适用于此。完成后，请确保在此流上调用 Close()。我建议一个 finally 块。

```
HttpWebRequest req;

try
{
    req = (HttpWebRequest)WebRequest.Create("http://www.example.com");
    Stream stream = req.GetResponseStream();

    byte[] data = new byte[4096];
    int read;
    while ((read = data.Read(data, 0, data.Length)) > 0)
    {
         Process(data, read);
    }
}
finally
{
    if (req != null)
        req.Close();
} 
```

或者，或者：

```
HttpWebRequest req;

try
{
    req = (HttpWebRequest)WebRequest.Create("http://www.example.com");
    Stream stream = req.GetResponseStream();

    XmlTextReader reader = new XmlTextReader(stream);

    while (reader.Read())
    {
       switch (reader.NodeType) 
        {
         case XmlNodeType.Element:
           Console.Write("<{0}>", reader.Name);
           break;
         case XmlNodeType.Text:
           Console.Write(reader.Value);
           break;
         case XmlNodeType.CDATA:
           Console.Write("<![CDATA[{0}]]>", reader.Value);
           break;
         case XmlNodeType.ProcessingInstruction:
           Console.Write("<?{0} {1}?>", reader.Name, reader.Value);
           break;
         case XmlNodeType.Comment:
           Console.Write("<!--{0}-->", reader.Value);
           break;
         case XmlNodeType.XmlDeclaration:
           Console.Write("<?xml version='1.0'?>");
           break;
         case XmlNodeType.Document:
           break;
         case XmlNodeType.DocumentType:
           Console.Write("<!DOCTYPE {0} [{1}]", reader.Name, reader.Value);
           break;
         case XmlNodeType.EntityReference:
           Console.Write(reader.Name);
           break;
         case XmlNodeType.EndElement:
           Console.Write("</{0}>", reader.Name);
           break;
       }       

    }       
}
finally
{
    if (req != null)
        req.Close();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T03:41:36.157

应该能够相当容易地做到这一点。您需要通过调用 Response.GetResponseStream() 来获取响应流，然后在循环中使用异步 ResponseStream.BeginRead()。

响应上没有超时设置，但如果您一直收到发送的数据，那么应该没问题。

# python - libparted 的 Python 绑定？

> ID：775580
> 
> 赞同：2
> 
> 时间：2009-04-22T03:21:06.583
> 
> 标签：python

我正在寻找一种`libparted`从 Python 与 GNU 库进行交互的方法，但到目前为止，我发现的一个2005 年的[GSOC](http://code.google.com/soc) [项目](http://pylibparted.tigris.org)和一个[已从存档中删除的](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=379034)[Ubuntu/debian 包](https://edge.launchpad.net/ubuntu/+source/python-parted)一直令人沮丧。

我是否缺少某些东西，或者我应该习惯于`libparted`从命令行进行操作/尝试修复其他软件包中发生的 bitrot？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T06:13:13.860

你的意思是像[pyparted](https://github.com/rhinstaller/pyparted)库？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T04:06:01.357

debian 放弃这个包的原因是缺少维护者。如果您愿意（并且能够）维护现有软件包并成为他们的维护者，那将对 FOSS 做出巨大贡献。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T05:03:14.043

您可以尝试使用[SIP](http://www.riverbankcomputing.co.uk/software/sip/intro)为其生成 Python 绑定。它适用于 QT，因此它可能适用于 libparted。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T19:11:17.100

旧线程，但您也可以签[出 reparted](http://pypi.python.org/pypi/reparted/)，它是一个 ctypes python 绑定。

# .net - 在 .NET 或正则表达式中验证 MSSQL 标识符（参数）

> ID：775587
> 
> 赞同：3
> 
> 时间：2009-04-22T03:25:20.270
> 
> 标签：.net, sql-server, regex, tsql

在 .NET 项目中，我需要验证字符串是否是有效的 Microsoft SQL Server 2005 参数标识符。

*例子：* `SELECT * FROM table WHERE column = @parameter`

**是否有运行时类方法来验证作为参数的字符串，或者是否有验证规则的正则表达式？**（见下文）

[从有关 identifiers 的文档中](http://msdn.microsoft.com/en-us/library/ms175874(SQL.90).aspx)，参数应符合以下一般标识符规则：

> 1.  第一个字符必须是以下字符之一： * Unicode 标准 3.2 定义的字母。字母的 Unicode 定义包括从 a 到 z、从 A 到 Z 的拉丁字符，以及来自其他语言的字母字符。* 下划线 (_)、at 符号 (@) 或数字符号 (#)。
>     标识符开头的某些符号在 SQL Server 中具有特殊含义。以 at 符号开头的常规标识符始终表示局部变量或参数，不能用作任何其他类型对象的名称。以数字符号开头的标识符表示临时表或过程。以双数字符号 (##) 开头的标识符表示全局临时对象。尽管可以使用数字符号或双数字符号字符来开始其他类型对象的名称，但我们不推荐这种做法。某些 Transact-SQL 函数的名称以双 at 符号 (@@) 开头。为避免与这些函数混淆，您不应使用以@@ 开头的名称。
> 2.  后续字符可以包括以下内容： * Unicode 标准 3.2 中定义的字母。* 来自基本拉丁文或其他国家文字的十进制数字。* at 符号、美元符号 ($)、数字符号或下划线。
> 3.  标识符不能是 Transact-SQL 保留字。SQL Server 保留保留字的大写和小写版本。
> 4.  不允许嵌入空格或特殊字符。
> 5.  不允许使用补充字符。
> 
> 在 Transact-SQL 语句中使用标识符时，不符合这些规则的标识符必须用双引号或括号分隔。

由于我只想验证参数，因此标识符必须以 @ 符号开头，并且不能被分隔。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-22T04:12:27.050

我偶然发现了 Unicode 字符类，但是一旦我发现 .NET 正则表达式支持它们，我想出了以下正则表达式来解决我的问题：

`@[\p{L}{\p{Nd}}$#_][\p{L}{\p{Nd}}@$#_]*`

这强制执行：

*   标识符始终以 @ 开头，使其成为参数。
*   不允许在第二个位置使用 @ 以避免与特殊 TSQL 函数混淆。
*   仅允许规则中定义的字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T03:32:08.817

我发现这篇关于在 TSQL 上创建一个用于评估正则表达式的函数的文章，内部使用 VBScript，在[这里查看](http://www.simple-talk.com/sql/t-sql-programming/tsql-regular-expression-workbench/)

另一个你会发现有用的链接，但我认为它需要注册，[在这里](http://www.sqlservercentral.com/articles/Advanced+Querying/sql2000dbatoolkitpart2/2362/)

另一个想法可能是将@parameter 作为 sysname 数据类型处理，不知道它是否适合这里

# php - 如何配置 Zend_Auth 以支持多个子域？

> ID：775590
> 
> 赞同：0
> 
> 时间：2009-04-22T03:27:17.520
> 
> 标签：php, zend-framework

我有两个应用程序都运行 Zend Framework MVC 应用程序的单独实例。它们托管在不同的子域上：

```
news.mydomain.com
member.mydomain.com 
```

我使用 Zend_Auth on`member.mydomain.com`来处理身份验证。

如何配置 ZF`news.mydomain.com`以捕获分配的身份验证信息`member.mydomain.com`？

我知道我们可以配置 cookie 的“域”参数，但是在 Zend_Auth 中哪里/如何做呢？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T03:40:18.690

如果在两个应用程序中将 Zend_Session 命名空间设置为相同的命名空间，您应该能够做到这一点。我相信您在第一次实例化它时设置了它，例如：

```
$sess = new Zend_Session("Mynamespace"); 
```

只要两个应用程序都在同一台机器上运行，或者你有一些跨系统会话发生（例如，多台机器上的 memcached），它们都应该能够访问相同的会话变量。

如果您确实找到了设置域的位置，请尝试将其设置为：

```
.mydomain.com 
```

代替

```
mydomain.com 
```

我记得我的安装中的多个子域发生了一些奇怪的事情，这似乎解决了它。

编辑：我找到了您为用户会话设置域的位置——奇怪的是，它在 Zend_Session 中。

[Zend_Session 配置选项](http://framework.zend.com/manual/en/zend.session.global_session_management.html#zend.session.global_session_management.configuration_options)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-01-13T11:04:26.620

就像对 Brett Bender 答案的快速更新一样。为了让它工作，我目前只需使用：

```
Zend_Session::setOptions(array(
    'cookie_domain' => '.mydomain.com',
    'name' => 'MySessionNamespace',
)); 
```

我的引导程序中有这个设置，但可以在会话开始之前的任何地方调用它。

# unicode - Unicode“故事的结尾”

> ID：775601
> 
> 赞同：4
> 
> 时间：2009-04-22T03:36:31.367
> 
> 标签：unicode

我正在寻找一个在 unicode 中表示“故事结尾”的好角色。我记得曾经看过一个看起来像分形的东西，而且非常酷。有谁知道我在哪里可以找到这个角色？更重要的是，当我不知道它的名称时，我在哪里可以找到具有特殊含义的 unicode 字符？谷歌不是很有帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-04-22T03:58:38.130

编辑：我发现了一些看起来有点像分形的东西，也恰好被称为“故事结尾”。这是一个泰语字符。

[这](http://www.decodeunicode.org/en/u+0e5b/properties)是你要找的吗？

[http://www.decodeunicode.org/en/u+0e5b/data/k//XS/khomut31910809.jpg](http://www.decodeunicode.org/en/u+0e5b/data/k//XS/khomut31910809.jpg)

> *故事结尾 Khomut 符号是一个终端标点符号，放置在旧书中一首诗的诗句结尾、一章结尾或故事结尾处。*
> 
> 对比 U+17DA Khmer Sign Koomuut

顺便说一句：我在谷歌图片搜索上找到了这个——这**`"end of story" unicode`**是第四个结果。这可能是搜索任何类型符号的最佳方式。虽然没有角色的名字，但它可能无法找到，因为**`unicode fractal`**没有返回任何有用的东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-22T03:44:47.040

去看看 unicode.org 代码图表。您可以浏览它们并通过它们的外观找到您喜欢的角色。[http://www.unicode.org/charts/](http://www.unicode.org/charts/)

或者，使用具有官方角色名称的数据文件浏览角色名称。使用您的浏览器或编辑器搜索功能进行搜索。[http://www.unicode.org/Public/5.1.0/ucd/UnicodeData.txt](http://www.unicode.org/Public/5.1.0/ucd/UnicodeData.txt)

当您找到一个想要查看它的字符时，只需搜索字符代码即可。例如，字符 0087（UnicodeData.txt 文件中的第一个字段）被搜索为[U+0087](http://www.google.com/search?q=u%2B0087)。FileFormat.info 通常包含所有字符。例如，[END OF SELECTED AREA](http://www.fileformat.info/info/unicode/char/0087/index.htm)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T03:42:01.383

你在使用 Windows 吗？使用字符图（开始 | 附件 | 系统工具）。我个人喜欢希腊欧米茄 (U+03A9) 或欧米茄 (U+2126) 的欧姆符号。

# php - 在线 Flash Mp3 播放器音乐按钮

> ID：775619
> 
> 赞同：0
> 
> 时间：2009-04-22T03:48:59.540
> 
> 标签：php, html, flash, mp3

所以我有一个网站，可以查询包含音乐信息、id3 信息和文件位置信息的数据库。我想使用[THIS](http://musicplayer.sourceforge.net/)在每个搜索结果旁边添加一个可播放的 mp3 播放器，但如果不生成 xspf 文件，我无法弄清楚如何做到这一点，这意味着我需要为每个文件提供一个 xspf 文件数据库，我不想这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T04:22:32.627

XSPF[文件](http://en.wikipedia.org/wiki/XSPF)相当小。它只是一个包含歌曲位置和标题的 XML 文档。只需动态生成它。

```
<?
header('Content-type: application/xspf+xml');
$tracks = array(
    'Song 1' => '/media/song1.ogg',
    'Second Song' => '/media/second_song.ogg',
    '3rd Song' => '/media/3rd_song.mp3'
);
$xml = new XmlWriter();
$xml->startDocument('1.0','UTF-8'); 
$xml->startElement('playlist');
$xml->writeAttribute('version','1');
$xml->writeAttribute('xmlns','http://xspf.org/ns/0/');
$xml->startElement('trackList'); 
foreach ($tracks as $title => $location) {
   $xml->startElement('track');
   $xml->startElement('title', $title);
   $xml->startElement('location', $location);
   $xml->endElement(); // track
}
$xml->endElement(); // trackList
$xml->endElement(); // playlist
$xml->endDocument();
$xml->flush();
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T04:24:22.747

没关系，如果你不想的话，发现你不需要一首歌曲的播放列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T10:44:48.560

这里有几个：

*   [声音管理器2](http://www.schillmania.com/projects/soundmanager2/)
*   [普拉亚](http://candyscript.com/projects/playa/)

# web-services - SSIS 网络服务任务

> ID：775623
> 
> 赞同：1
> 
> 时间：2009-04-22T03:51:15.213
> 
> 标签：web-services, ssis

如果 web 服务返回无值（返回类型为事件数组），则会收到错误 SSIS 包调用 websrvice 任务并输出分配给 xmlfile。如果值存在，则无错误，仅当没有值时，包失败。webservice任务失败时如何处理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-04T02:31:17.900

我们创建了 dll 来使用 web 服务，并将 array[] 复杂类型转换为平面数据表返回。现在即使返回数据为空也不会出错，因为平面表，以前我们有返回空值中断的 arra[] 复杂类型。

# java - iText 数据矩阵生成问题

> ID：775625
> 
> 赞同：3
> 
> 时间：2009-04-22T03:53:56.160
> 
> 标签：java, itext, barcode

我正在尝试从 itext 中生成数据矩阵条形码。这适用于我的大多数代码，但不适用于某些代码。一个例子是：

> HEnSh0701003-2V1

由于某种原因，这会产生非方形条形码。当我使用其他公司的编码器（例如 IDAutomation）时，我确实得到了一个有效的方形条形码。

有谁知道为什么会这样？我正在寻找一种解决方案，这样我就可以使用嵌入式 iTest DataMatrix 类，而不必使用第三方。

我正在使用的代码示例：

```
BarcodeDatamatrix bar = new BarcodeDatamatrix();
 bar.setOptions(BarcodeDatamatrix.DM_AUTO);
bar.generate("HEnSh0701003-2V1");
bcd.addCell(bar.createImage()); 
```

其中 bcd 是具有 2 列的 PdfTable。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-06-23T18:12:50.607

我遇到了这个确切的问题。我最终深入研究了 iText 源代码来解决这个问题。iText 正在调整条形码的大小以适合您提供的文本。

itext支持DataMatrix条形码的以下大小：10x10,12x12,8x18,14x14,8x32,16x16,12x26，18x18,20x20，12x36,22x22,16x36,24x24,22x26,16x48,32x32,36x36,40x40,44x44,48x48,52x52 , 64x64, 72x72, 80x80, 88x88, 96x96, 104x104, 120x120, 132x132, 144x144

如您所见，其中有许多非方形尺寸。我所做的是创建一个方形条形码尺寸列表，然后在检查 generate() 调用的返回值时尝试每个尺寸。

```
// supported square barcode dimensions
int[] barcodeDimensions = {10, 12, 14, 16, 18, 20, 22, 24, 26, 32, 36, 40, 44, 48, 52, 64, 72, 80, 88, 96, 104, 120, 132, 144};

BarcodeDatamatrix barcode = new BarcodeDatamatrix();
barcode.setOptions(BarcodeDatamatrix.DM_AUTO);

// try to generate the barcode, resizing as needed.
for (int generateCount = 0; generateCount < barcodeDimensions.length; generateCount++) {
    barcode.setWidth(barcodeDimensions[generateCount]);
    barcode.setHeight(barcodeDimensions[generateCount]);
    int returnResult = barcode.generate(text);
    if (returnResult == BarcodeDatamatrix.DM_NO_ERROR) {
        return barcode.createImage();
    }
}

throw new Exception("Error generating barcode."); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-09-30T12:09:41.703

谢谢 JonMR

对于那些需要它的人，这是 VB.net 中的相同代码

```
 Private Function GetDataMatrixBarcode(ByVal message As String) As iTextSharp.text.Image

        Dim barcode As BarcodeDatamatrix = New BarcodeDatamatrix()
        Dim barcodeDimensions() As Integer = New Integer() {10, 12, 14, 16, 18, 20, 22, 24, 26, 32, 36, 40, 44, 48, 52, 64, 72, 80, 88, 96, 104, 120, 132, 144}
        Dim returnResult As Integer

        barcode.Options = BarcodeDatamatrix.DM_AUTO

        For generateCount As Integer = 0 To barcodeDimensions.Length - 1
            barcode.Width = barcodeDimensions(generateCount)
            barcode.Height = barcodeDimensions(generateCount)
            returnResult = barcode.Generate(message)
            If returnResult = BarcodeDatamatrix.DM_NO_ERROR Then
                Return barcode.CreateImage
            End If
        Next

        Throw New Exception("Error generating datamatrix barcode for text '" & message & "'")

    End Function 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-11-04T16:08:21.260

对于那些在 C# 中需要它的人：

```
// supported square barcode dimensions
        int[] barcodeDimensions = { 10, 12, 14, 16, 18, 20, 22, 24, 26, 32, 36, 40, 44, 48, 52, 64, 72, 80, 88, 96, 104, 120, 132, 144 };

        BarcodeDatamatrix barcode = new BarcodeDatamatrix();
        barcode.Options = (BarcodeDatamatrix.DM_AUTO);

        // try to generate the barcode, resizing as needed.
        for (int generateCount = 0; generateCount < barcodeDimensions.Length; generateCount++)
        {
            barcode.Width = (barcodeDimensions[generateCount]);
            barcode.Height = (barcodeDimensions[generateCount]);
            int returnResult = barcode.Generate("1234567");
            if (returnResult == BarcodeDatamatrix.DM_NO_ERROR)
            {
                Image barcodeImg = barcode.CreateImage();
                table.AddCell(barcodeImg);
                table.AddCell(string.Empty);
            }
        } 
```

顺便说一句，有人知道如何用这个制作矩形条码吗？每当我选择矩形格式时，它都会给我一个错误代码 3 (DM_Error_Invalid_Square)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-01-03T16:21:21.350

你必须改变

```
barcode.setOptions(BarcodeDatamatrix.DM_AUTO); 
```

到

```
barcode.setOptions(BarcodeDatamatrix.DM_B256); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-07T14:32:49.423

在 Java 中实现使用 itext 将条形码添加到现有的 pdf 文件。

使用的jar文件：itext、commons-codec-1.6.jar

```
InputStream inputStream = new ByteArrayInputStream(FileUtils.readFileToByteArray(new File("c:/tmp/your_existing.pdf")));
FileOutputStream outStream = new FileOutputStream("c:/tmp/pdf_copy_1.pdf");

PdfContentByte contentByte = null;
        int totalPages = 0;
        PdfReader pdfReader = null;
        PdfStamper pdfStamper = null;

    try {
        pdfReader = new PdfReader(inputStream);
        totalPages = pdfReader.getNumberOfPages();
        pdfStamper = new PdfStamper(pdfReader, outStream);
        String text = "SAMPLE BARCODE TEST";
        String barcodeData = DigestUtils.md5Hex(text); --encoding barcode text...

        //Adding barcode to each page in pdf
        for (int i = 1; i <= totalPages; i++) {
            contentByte = pdfStamper.getOverContent(i);
            if(barcodeData != null){
                Image img = null;
                BarcodeDatamatrix datamatrix = new BarcodeDatamatrix();
                datamatrix.setWidth(10); -- BARCODE WIDTH
                datamatrix.setHeight(10); -- BARCODE HEIGHT
                datamatrix.generate(barcodeData);
                img = datamatrix.createImage();
                img.setAbsolutePosition(175, 750); --barcode position x,y
                contentByte.addImage(img);
            }
        }

    }
    catch (Exception e) {
        e.printStackTrace();

    } 
```

# asp.net - 用于在带有复选框的gridview上进行操作的jQuery函数

> ID：775628
> 
> 赞同：4
> 
> 时间：2009-04-22T03:57:40.533
> 
> 标签：asp.net, jquery, gridview

我的 gridview (gvAvailable) 中的第一列是当前复选框列“chkSelect”。它现在的工作方式是用户可以检查gridview上的多个复选框，但我想要一个jquery函数来取消选择gridview上的所有复选框，除了被点击的复选框。

我还在寻找一种方法来通过单击按钮使用 jquery 访问选中行的列。

谢谢你的帮助

这是生成的 html 的外观

```
<table class="Grid" cellspacing="0" border="0" id="gvAvailable" style="width:99%;border-collapse:collapse;">
<tr class="GridHeader">
<th scope="col">&nbsp;</th><th scope="col">Guid</th><th scope="col">Id</th><th scope="col">Name</th>
    <th scope="col">Facility</th><th scope="col">Room</th>
</tr>
<tr class="GridItem">
    <td>
        <input id="gvAvailable_ctl02_chkSelect" type="checkbox" name="gvAvailable$ctl02$chkSelect" />
    </td>
    <td>24</td>
    <td>000101020201</td>
     <td>Test</td>
     <td>Test Facility</td>
     <td>&nbsp;</td>
</tr><tr class="GridAltItem">
<td>
    <input id="gvAvailable_ctl03_chkSelect" type="checkbox" name="gvAvailable$ctl03$chkSelect" />
</td>
<td>25</td>
<td>1001</td>
<td>Test 2</td>
<td>Test 3</td>
<td>&nbsp;</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T04:28:42.050

如果您将相同的类添加到标记中的每个复选框，您可以通过说

```
$('.classname') 
```

这将为您返回对象数组。然后，您可以在阵列上调用“每个”并取消选择它们。

```
function removeChecks()
{    
    $('.classname').each(function()
    {
         $(this).removeAttr('checked');
    });
} 
```

然后在每个复选框的单击处理程序中添加上述函数调用：

```
$('.classname').each(function()
{
    $(this).click(function()
    {
        removeChecks();
        $(this).attr('checked', 'checked');
    });
}); 
```

上面的代码应该设置为在页面加载时运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T07:00:58.317

在此示例中，我放置了一个按钮进行检查，并放置了一个按钮取消选中 gridview 复选框：

```
<asp:GridView runat="server" ID="grid"></asp:GridView>

<input type="button" onclick="uncheckCheckBoxes()" value="UnCheck" />
&nbsp;
<input type="button" onclick="checkCheckBoxes()" value="Check" />

<script>
    function uncheckCheckBoxes()
    {
        var gridClientID = '<%= grid.ClientID %>';
        jQuery.each($("#" + gridClientID + " input[type='checkbox']"), function ()
        {
          this.checked = false;
        });
    }

    function checkCheckBoxes()
    {
        var gridClientID = '<%= grid.ClientID %>';
        jQuery.each($("#" + gridClientID + " input[type='checkbox']"), function ()
        {
          this.checked = true;
        });
    }
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T04:42:37.900

我假设您想确保用户单击的复选框不会被切换？如果是这样，请继续往下看。

首先，只需为gridview 中的所有复选框指定一个类名。

每当单击复选框时，向其添加另一个类以表示它已被物理选中。

```
$('.checkbox').click(function(){
   $(this).addClass('checked');
}); 
```

现在，当用户单击顶部的全选复选框（我们称之为“selectAll”）时，遍历所有复选框并在检查“checked”类时切换状态

```
$('#selectAll').click(function(){
   var status = $(this).attr('checked')
   $('.checkbox').each(function(){
      //only toggle if not set
      if(!$(this).hasClass('checked')){
        if(status){
          $(this).attr('checked', 'checked');
        }
        else{
          $(this).attr('checked', '');
        }
      }
    });
}); 
```

这应该会让你走上快乐的道路。

现在，访问选中行的列？

```
You could add an onclick event to each table row.
$('#tablename tr').click(function(){
  //do something
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T04:21:38.357

我发现[这篇](http://www.dotnetcurry.com/ShowArticle.aspx?ID=236)文章非常有用 使用 jQuery 检查/取消选中 ASP.NET 复选框列表中的所有项目

# c - 使用 SO_REUSEADDR - 以前打开的套接字会发生什么？

> ID：775638
> 
> 赞同：27
> 
> 时间：2009-04-22T04:05:23.683
> 
> 标签：c, network-programming, unix

在 unix 的网络编程中，我总是在服务器用来监听连接的套接字上设置 SO_REUSEADDR 选项。这基本上说可以在机器上的同一端口上打开另一个套接字。这在从崩溃中恢复并且套接字未正确关闭时很有用 - 应用程序可以重新启动，它只会在同一端口上打开另一个套接字并继续侦听。

我的问题是，旧插座会发生什么？毫无疑问，所有数据/连接仍将在旧套接字上接收。它会被操作系统自动关闭吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-04-22T04:20:06.223

当使用它的程序死亡时，一个套接字被认为是关闭的。这大部分由操作系统处理，操作系统将拒绝接受来自死对话的任何进一步通信。但是，如果套接字意外关闭，另一端的计算机可能不知道对话已经结束，并且可能仍在尝试通信。

这就是为什么在 TCP 规范中设计了一个等待期，然后才能重用相同的端口号。因为理论上，无论多么不可能，来自旧会话的数据包可能会以适当的 IP 地址、端口号和序列号到达，从而导致接收服务器错误地将其插入错误的 TCP 流中。

该`SO_REUSEADDR`选项会覆盖该行为，允许您立即重用端口。实际上，您是在说：“我了解其中的风险，并且无论如何都想使用该端口。”

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2009-04-22T04:09:52.393

是的，当旧进程结束时，操作系统会自动关闭前一个套接字。您通常不能立即在同一个端口上侦听的原因是，尽管套接字已关闭，但仍会在一段时间内（通常是几分钟）保持 2MSL 状态。当超时到期时，操作系统会自动将旧套接字转换出此状态。

# .net - 如何在事先不知道类型的情况下反序列化 XML？

> ID：775647
> 
> 赞同：15
> 
> 时间：2009-04-22T04:11:14.417
> 
> 标签：.net, serialization, xml-serialization

假设我有几个基本对象，如下所示：

```
[Serializable]
public class Base
{

    public string Property1 { get; set; }
    public int Property2 { get; set; }
}

[Serializable]
public class Sub: Base
{
    public List<string> Property3 { get; set; }

    public Sub():base()
    {
        Property3 = new List<string>();
    }        
} 
```

我像这样序列化它们：

```
Sub s = new Sub {Property1 = "subtest", Property2 = 1000};
s.Property3.Add("item 1");
s.Property3.Add("item 2");

XmlSerializer sFormater = new XmlSerializer(typeof(Sub));
using (FileStream fStream = new FileStream("SubData.xml", 
    FileMode.Create, FileAccess.Write, FileShare.None))
{
    sFormater.Serialize(fStream, s);
} 
```

我怎样才能反序列化它们，以便我回到正确的类？

如，我想要这样的东西

```
XmlSerializer bFormater = new XmlSerializer(typeof (Base));
Base newBase;
using (FileStream fStream = new FileStream("BaseData.xml", 
    FileMode.Open, FileAccess.Read, FileShare.Read))
{
    newBase = (Base) bFormater.Deserialize(fStream);
} 
```

除了我能够为从 Base 派生的任何类传递一个 XML 文件，并且将创建正确的类。

我想我可以读取 XML 根节点的名称并使用 switch 语句来创建正确的 XmlSerializer，但我想知道是否有更简单的方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-22T04:26:18.547

您可以读取 XML 文件的根节点，而不是使用 switch 语句，您可以像这样编写代码 -

```
Type yourType = Type.GetType("Your Type");
XmlSerializer xs = new XmlSerializer(yourType); 
```

我认为除了阅读 XML 之外别无他法，因为如果您不知道类型，您将无能为力。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-05T10:50:03.450

使用`[XmlInclude]`基类的属性告诉 XML 序列化器派生类，这样它就可以确定要创建什么。您的最后一个代码段应该可以正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-05T10:34:58.553

据我所知，没有更简单的方法可以做到这一点。

我个人更喜欢更通用的解决方案（因为我必须在我的代码中序列化很多不同的类）：将类型名称与值一起序列化。

您可以查看此问题以了解一些详细信息： [Serialise to XML and include the type of the serialized object](https://stackoverflow.com/questions/824162/serialise-to-xml-and-include-the-type-of-the-serialised-object)

# java - 使用 JOGL 加载 .obj

> ID：775648
> 
> 赞同：6
> 
> 时间：2009-04-22T04:11:43.013
> 
> 标签：java, jogl, .obj

我发现可能有关于加载 obj 的教程，但没有关于如何加载它并将其与 java 一起使用的教程，有人有任何有用教程的链接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T05:09:56.307

我能找到的最接近的是：

*   [JOGL-ES 第 2 章 - 加载 OBJ 模型](http://www.google.com/search?rlz=1C1GGLS_en___US304&sourceid=chrome&ie=UTF-8&q=JOGL-ES+loading+obj+models)
*   [OBJ 文件格式](http://www.royriggs.com/obj.html)
*   [OBJ 加载器，独立于渲染器](http://www.pixelnerve.com/v/2009/02/06/another-obj-file-loader/)

请记住，JOGL 是一个非常低级的 API。一些更高级的 API（JMonkeyEngine 和 Java3D）内置了复杂的 API 来处理这类事情。使用 JOGL，您将自己完成大部分工作。显然，每种方法都有优点和缺点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-01-07T03:08:57.870

不是教程，但是一些示例代码怎么样？不幸的是，它使用“固定功能管道”而不是使用新的“使用着色器做所有事情”方法，但我喜欢认为代码是清晰的。

[http://darksleep.com/oObjLoader/](http://darksleep.com/oObjLoader/)

另外，我应该注意到它确实使用 VBO，而不是直接渲染或显示列表，所以它相当有效。

# assembly - 如何增加 MIPS 程序集中的地址？

> ID：775650
> 
> 赞同：2
> 
> 时间：2009-04-22T04:12:34.540
> 
> 标签：assembly, mips

我刚刚开始精益 MIPS 程序集，我正在尝试编写一个简单的`while`循环。它将等同于 C 代码：

`int A[5];`

`for(i=0;i<5;i++) A[i]=i;`

所以我知道我可以`beq`用来做一个`while`循环，但我不知道如何每次增加内存地址以进入下一个寄存器。我想也许`slt`操作数可能有用，但我不知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T04:29:55.370

假设 $3 指向 A[]

```
lis $4
.word 4
lis $5
.word 1
add $7, $4, $5 ;$7 = 5
add $6, $0, $0 ;$6 = 0

loop:
sw $6, 0($3)
add $3, $4, $3 ;point to next "int"
add $6, $5, $6 ;add 1 to our counter
bne $7, $6, loop ;we will stop at 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-09-24T19:08:19.410

```
 .data

A:  .space  20  #declared 20 bytes of storage to hold array of 5 int

__start:
       lw          $t0, A   #load base address of array
       li          $t1, 0
loop:  sw          $t1($t0), $t1
       addi        $t1, $t1, 4
       ble         $t1, 20, loop
#continue code or simple exit after this 
```

# java - Ant中java任务的输出

> ID：775663
> 
> 赞同：0
> 
> 时间：2009-04-22T04:23:09.273
> 
> 标签：java, ant, task

我有一个 .java 文件，并且正在使用 ant 中的 javac 对其进行编译。.class 文件进入输出目录。A.class 在运行时会生成 a.txt。

如何运行 ant 'java' 任务以及运行时 a.txt 会去哪里？我的意思是哪个目录？我可以指定目录吗？java任务的输出文件应该去哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T04:55:08.370

看看这个以供参考：

[http://ant.apache.org/manual/Tasks/java.html](http://ant.apache.org/manual/Tasks/java.html)

它包含一个使用 Java 任务运行特定类的示例，例如：

```
<target name="run">
     <java classname="A">
             <classpath>
               <pathelement location="output"/>
               <pathelement path="${java.class.path}"/>
             </classpath>
     </java>
</target> 
```

这实际上取决于您将文件从 A.java 写入的位置。如果它在当前目录中，例如：

```
File f = new File("./test.txt");
f.createNewFile(); 
```

然后它将输出相对于您运行构建文件的位置的文件。

希望有帮助。

# java - java的字符串编码转换有多贵？

> ID：775664
> 
> 赞同：3
> 
> 时间：2009-04-22T04:23:24.357
> 
> 标签：java, unicode, encoding

我想知道 Java 的字符串编码转换算法有多昂贵，例如，一段文本位于 EBCDIC 中，需要转换为 UTF-16，或者类似的大文件转换。有没有关于这种转换成本的基准？多种编码的基准会更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T04:34:25.360

这是一个 O(n) 算法。执行所需的时间将或多或少随着您要转换的字符串的长度线性增加（尽管如果您要转换数百万个非常短的字符串，函数调用的开销会增加）。

在几乎所有情况下，这都不会成为瓶颈。您可能可以在极短的时间内对数十兆字节的非常大的字符串进行编码。虽然我没有实际的基准数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T08:25:51.920

我怀疑它可以忽略不计。如果您要转换数千个字符串，我会更担心分配新字符串对象的成本，或者如果您要转换非常大的字符串，我会更担心分配巨大的字节数组。但即便如此，也只是在极端情况下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-02-12T12:09:35.630

这是一个可以忽略不计的开销——Java 的字符串算法通常非常好，并且多年来已经得到很好的优化。

这并不是说不可能创建更高效​​的专用算法，或者可能与优化的本机代码库接口以获得百分之几的额外性能。但是，除非您有很多服务器，其中编码占用了很大一部分 CPU 时间，否则不太可能值得付出努力。

# c# - 从 C# 确定父进程 ID

> ID：775665
> 
> 赞同：4
> 
> 时间：2009-04-22T04:23:34.373
> 
> 标签：c#, .net, winapi

我想确定 Windows 中任意进程的父进程的进程 ID。

我需要这种方法在 x64 和 x32 上都可以工作。

任何想法/示例代码来实现这一点。System.Diagnositics.Process 不包含此信息。

我有点担心使用 toolhelp api，因为它们是 32 位特定的。

相关资料：

*   [C++ 实现](http://www.codeproject.com/KB/threads/ParentPID.aspx)
*   [我用谷歌搜索的一些东西](http://www.csharpfriends.com/Forums/ShowPost.aspx?PostID=27395)（那里的互操作不是 x64 友好的）

[常见问题解答](http://msdn.microsoft.com/en-us/netframework/aa569609.aspx)中的性能计数器解决方案： (PerformanceCounter("Process", "Creating Process ID", procName);) 让我害怕，因为它不允许您输入进程 ID，而是按名称指定进程，所以这一切当你有多个孩子时，可以变成梨形。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T04:44:46.787

[WIN32_Process](http://msdn.microsoft.com/en-us/library/aa394372(VS.85).aspx)有 processid 和 parent processid。在 64 位上获取 WMI 数据有点困难，[但仍然可以通过更改提供程序标志来实现](http://msdn.microsoft.com/en-us/library/aa393067(VS.85).aspx)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-04-22T12:08:12.820

使用 NAPI（Win32 常见问题解答）

# sql - SQLCMD 进入 SQL server 2000

> ID：775673
> 
> 赞同：1
> 
> 时间：2009-04-22T04:27:39.480
> 
> 标签：sql

可以用sqlcmd查询sql server 2000数据库吗？如果是这样，它的最小下载在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T04:37:58.003

显然你可以，它在[这个页面上](https://web.archive.org/web/20090412065213/http://www.microsoft.com/downloads/details.aspx?displaylang=en&FamilyID=b33d2c78-1059-4ce2-b80d-2343c099bcb4)

# python - 文件类型信息

> ID：775674
> 
> 赞同：0
> 
> 时间：2009-04-22T04:28:18.900
> 
> 标签：python

我正在编写 python 脚本，我想找出有关文件的信息，例如 mime 类型（或文件包含的任何有用描述）。

我听说过 python-magic，但我真的在寻找能够让我找到这些信息*的*解决方案，而无需安装额外的包。

我是坚持维护文件扩展名列表，还是 python 在标准库中有一些东西？我无法在文档中找到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-22T05:18:46.377

我不确定您是否想从文件内容中推断出某些东西，但如果您想从文件扩展名 mimetypes 模块中了解 mime 类型就足够了

```
>>> import mimetypes
>>> mimetypes.init()
>>> mimetypes.knownfiles
['/etc/mime.types', '/etc/httpd/mime.types', ... ]
>>> mimetypes.suffix_map['.tgz']
'.tar.gz'
>>> mimetypes.encodings_map['.gz']
'gzip'
>>> mimetypes.types_map['.tgz']
'application/x-tar-gz' 
```

[http://docs.python.org/library/mimetypes.html](http://docs.python.org/library/mimetypes.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T05:14:27.730

标准库支持[将文件名映射到 mimetypes](http://docs.python.org/library/mimetypes.html#module-mimetypes)。

您的问题听起来也像您对 mimetype 以外的其他信息感兴趣。[stat](http://docs.python.org/library/stat.html)模块还将为您提供有关大小、所有者、上次修改时间等的信息，但除此之外，最常见的文件系统（Windows NTFS/FAT、Linux Ext 2/3、Mac OS X）不存储任何元数据或“其他有关文件的信息”。这就是为什么我们需要使用扩展来查找 mimetype 的原因。

# asp.net-mvc - ASP.NET MVC 视图是否应该参数化

> ID：775678
> 
> 赞同：0
> 
> 时间：2009-04-22T04:29:00.973
> 
> 标签：asp.net-mvc

在 asp.net mvc 中，我一直认为在视图类上指定参数化构造函数比使用 ViewData 将数据传递给视图更有利。通过这种方式，视图类可以在操作中实例化，并从那里作为 IView 的实现返回，以便框架最终呈现给客户端。

```
// An example of an action that returned one of two
// views while passing a data objects from the current
// scope.
IView MyAction(discriminator){
  if(discriminator){
    return new MyView(SomeVal, SomeVal2)
  }else{
    return new AnotherView(SomeVal1)
  }
}

// An Example Definition for IView
public interface IView{
  Render(stream OutputStream);
}

// An Example View Code Behind/Partial Class
public partial class AnotherView{
  public AnotherView(string GimmeData){
    this.GimmeData = GimmeData
  }

  // This value could be accessed in the markup like:
  // <%=this.GimmeData%>
  public string GimmeData {get; set;}
} 
```

我提出这个问题是因为我个人发现强类型视图毫无意义，因为我想从操作中传递给视图的对象不是 1 或 0，而是*n个。*我还发现 ViewData 集合有点过于“无类型”，无法与 .net 强类型世界很好地融合。

视图上的参数化构造函数甚至公共属性将允许视图的实现者指定渲染视图所需的数据或可以在视图中渲染的数据的合同。这种方法将有效地封装视图。

为什么这是一个糟糕的设计？将数据从操作传递到视图的“视图数据集合”/“强类型视图”“方式”提供了哪些优势。有人认为这是个好主意吗？

* * *

**更新**

我改变了主意。我意识到视图实际上只是关于渲染。一个非常好的设计方法是引入表示应用程序中可用用户界面的[表示模型。](http://martinfowler.com/eaaDev/PresentationModel.html)

如果可以显示某些内容，则演示模型中应该有一个布尔值。如果某些东西可以显示文本，则表示模型中应该有一个字符串。表示模型并不[乏力](http://martinfowler.com/bliki/AnemicDomainModel.html)，因为您使用它来封装 UI 的逻辑。例如，如果一个字段是空的，那么其他一些字段可能会变灰。这是表示逻辑，它描述了您的特定 UI 的工作方式。

一旦引入了表示模型​​，通用页面类就可以正常工作，您只需将视图传递给正确的表示模型。演示模型允许您清理视图中的代码并提供可移植性。如果一个人决定在 winforms 中实现，他们只需要将他们的 UI 绑定到演示模型。

无论如何，我只是想跟进，因为我不再同意我原来的建议。我接受了特拉维斯的回答，因为这基本上是他提出的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T04:52:44.163

约定通常是提供一个 View Model 来封装您在视图中需要的数据。然后，您可以将此强类型对象向下传递到您的视图中。因此，例如，您可能有一个如下所示的 BlogDisplay 对象：

```
public object BlogDisplayPage {
  public string PageTitle {get; set;}
  public BlogEntry Content {get; set;}
  public IList<Comment> Comments {get; set;}
  public IList<BlogEntry> RelatedEntries {get; set;}
  public IList<BlogEntry> PreviousEntries {get; set;}
} 
```

请原谅这个例子的人为，但我想你明白我想要表达的意思。这样，您可以将与视图关联的所有数据放在一个可以轻松测试和维护的对象中。这还具有使用泛型具有强类型视图的优点。

与您对参数化构造函数的建议相比，我更喜欢这一点，因为它的意图很明确，并且该数据的创建和聚合将在一个可能更容易维护的地方进行。

# sql - 如何使用单引号 sql server 2005 插入文本

> ID：775687
> 
> 赞同：36
> 
> 时间：2009-04-22T04:31:55.990
> 
> 标签：sql, sql-server-2005, quotes, quotations

我想在 sql server 2005 数据库中的表中插入带单引号的文本，例如 john's

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2009-04-22T04:53:36.983

正如 Kirtan 指出的那样，用一个额外的单引号转义单引号
如果您尝试通过 sp_executesql 执行动态 sql（这首先不是一个好主意），那么下面的代码将为您工作

```
sp_executesql N'INSERT INTO SomeTable (SomeColumn) VALUES (''John''''s'')' 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-04-22T05:12:37.640

答案真的取决于你是如何做的`INSERT`。

如果要指定 SQL 文字，则需要使用双引号方法：

```
-- Direct insert
INSERT INTO Table1 (Column1) VALUES ('John''s')

-- Using a parameter, with a direct insert
DECLARE @Value varchar(50)
SET @Value = 'John''s'
INSERT INTO Table1 (Column1) VALUES (@Value)

-- Using a parameter, with dynamic SQL
DECLARE @Value varchar(50)
SET @Value = 'John''s'
EXEC sp_executesql 'INSERT INTO Table1 (Column1) VALUES (@p1)', '@p1 varchar(50)', @Value 
```

如果您正在从代码中执行 INSERT，请使用参数：

```
// Sample ADO.NET
using (SqlConnection conn = new SqlConnection(connectionString)) {
    conn.Open();
    using (SqlCommand command = conn.CreateCommand()) {
        command.CommandText = "INSERT INTO Table1 (Column1) VALUES (@Value)";

        command.Parameters.AddWithValue("@Value", "John's");

        command.ExecuteNonQuery();
    }
} 
```

如果您的数据包含直接或间接的用户输入，请**使用 PARAMETERS**。参数可防止 SQL 注入攻击。永远不要使用用户输入构建动态 SQL。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2011-06-24T17:06:28.997

这对我有用：

```
 INSERT INTO [TABLE]
  VALUES ('text','''test.com''', 1) 
```

基本上，您使用要插入的单引号并将其替换为两个。因此，如果您想插入一串文本（'text'）并在其周围添加单引号，那就是（'''text'''）。希望这可以帮助。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-04-22T04:34:58.557

```
INSERT INTO Table1 (Column1) VALUES ('John''s') 
```

或者您可以使用存储过程并将参数传递为 -

```
usp_Proc1 @Column1 = 'John''s' 
```

如果您使用的是 INSERT 查询而不是存储过程，则必须用两个引号对引号进行转义，否则如果不这样做也可以。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-04T00:40:41.830

此答案适用于 SQL Server 2005、2008、2012。

有时该值有许多单引号。而不是像上面描述的那样在每个单引号旁边添加一个单引号`'John''s'`。还有一些示例使用该`REPLACE`函数来处理一个值中的许多单引号。

试试下面的。这是一个更新语句，但您也可以在语句中使用它`INSERT`。

```
SET QUOTED_IDENTIFIER OFF

DECLARE @s VARCHAR(1000)

SET @s = "SiteId:'1'; Rvc:'6'; Chk:'1832'; TrEmp:'150'; WsId:'81'; TtlDue:'-9.40'; TtlDsc:'0'; TtlSvc:'0'; TtlTax:'-0.88'; TtlPay:'0'; TipAmt:'0.00'; SvcSeq:'09'; ReTx:'N'; TraceId:'160110124347N091832';"

UPDATE TransactionPaymentPrompt
set PromptData = @s

from TransactionPaymentPrompt tpp with (nolock)
where tpp.TransactionID = '106627343' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-30T16:51:14.577

您问如何`Apostrophe character (')`在 SQL Server 中转义。上面的所有答案都很好地解释了这一点。

**但是，根据情况，`Right single quotation mark character (’)`可能是合适的。**

*（不需要转义字符）*

```
-- Direct insert
INSERT INTO Table1 (Column1) VALUES ('John’s') 
```

• 撇号 (U+0027)

[维基百科上的 Ascii 撇号](https://en.wikipedia.org/wiki/List_of_Unicode_characters#Basic_Latin)

• 右单引号 (U+2019)

[维基百科上的 Unicode 右单引号](https://en.wikipedia.org/wiki/List_of_Unicode_characters#Unicode_symbols)

# asp.net-mvc - MVC Nhibernate - 访问路径 ???.hbm.xml 被拒绝

> ID：775688
> 
> 赞同：0
> 
> 时间：2009-04-22T04:33:52.927
> 
> 标签：asp.net-mvc

维斯塔，VS2008，MVC 1.0。

我有一个使用 FluentNHibernate 进行配置的 MVC 应用程序。

我已将应用程序发布到本地计算机上的 IIS7。

当我浏览应用程序时出现错误

'C:\Users\Malcolm\Documents\Temp\MyProject.Domain.Ingredient.hbm.xml' 被拒绝

首先是我使用的是 FluentNhibernate 那么为什么要使用 xml 文件进行配置呢？

其次，错误说为文件夹添加 ASPNET 权限，但为什么要起诉 Temp 文件夹？

第三，我无法添加 ASPNET 权限，因为当我尝试添加 Vista 时说不存在 ASPNET 帐户？？？

马尔科姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T05:27:57.883

Fluent NHibernate 生成用于构造 ISessionFactory 的临时 .hbm.xml 文件。我猜您需要将 Temp 文件夹的写入权限授予您服务器上的 ASPNET 帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T06:24:51.990

正如@darin 所说，您的权限是正确的，但在 Vista 中，用于运行 ASP.Net 应用程序的帐户已更改。它不再是 ASPNET，现在称为“NETWORK SERVICE”（是的，名称中有空格）

# asp.net-mvc - 在构建企业解决方案时可以安全地加入 ASP.NET MVC 潮流吗？

> ID：775690
> 
> 赞同：11
> 
> 时间：2009-04-22T04:34:23.207
> 
> 标签：asp.net-mvc, migration

在我被指向其中一个“VS”之前。像下面这样的问题...

*   [ASP.NET webforms + ASP.NET Ajax 与 ASP.NET MVC 和 Ajax 框架自由](https://stackoverflow.com/questions/99056/asp-net-webforms-asp-net-ajax-versus-asp-net-mvc-and-ajax-framework-freedom)
*   [我应该追求 ASP.NET WebForms 还是 ASP.NET MVC](https://stackoverflow.com/questions/191556/should-i-pursue-asp-net-webforms-or-asp-net-mvc)
*   [ASP.NET MVC Web 应用程序与 ASP.NET Web 应用程序](https://stackoverflow.com/questions/276211/asp-net-mvc-web-application-vs-asp-net-web-application)

...请让我声明我不是在寻找比较。

我需要回答的一些问题包括：

1.  做疯狂的 UI（例如使用 UI 在线构建 BOM 树）的学习曲线是否陡峭？很多发布问题的人似乎都遇到了一些 UI 要求或其他让我担心的问题。技术是否成熟到足以处理这些类型的要求？
2.  是否有一个相当发达的社区？在线文学的可用性如何？您可以获得大量有关 WebForms 的文献。
3.  开发它的时间是否与构建传统企业 WebForms 站点相当或更少？
4.  需要多长时间才能让整个开发人员团队对 WebForms 感到满意（如果不是迷恋的话）以精通 ASP.NET MVC？

我认为它的真相是 StackOverflow 是类似于 Google 的产品，而 ASP.NET MVC 可能非常适合。但我被困在*贵公司的应用程序*类别中开发软件。

[替代文字 http://stuffthathappens.com/blog/wp-content/uploads/2008/03/simplicity.png](http://stuffthathappens.com/blog/wp-content/uploads/2008/03/simplicity.png)

因此，如果某些事情无法完成或必须被黑客入侵，那么以后冒险可能会付出非常高昂的代价。希望听到那些已经冒险的人。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T05:10:56.397

我可以回答你一半的问题。我刚刚从 WebForms 背景潜入 MVC。有（显然）一个学习曲线，但它真的不是很陡峭。我已经能够毫不费力地完成过渡，我发现整个过程就像呼吸新鲜空气一样。

但是，我非常擅长前端技术（HTML 和 Javascript），而且我不喜欢 WebForms 和 Microsoft ajax 框架生成的 HTML。如果您和/或您的团队是这样的，您会喜欢的。但是，如果您对自己对事件层次结构的深入了解感到自豪，或者如果您喜欢 UpdatePanels 的简单性，那么您可能会反对这些更改。

文档还可以，无论如何都可以愉快地进行。这里有一些视频可以满足您的胃口： [http://videos.visitmix.com/MIX09/T49F](http://videos.visitmix.com/MIX09/T49F) [http://videos.visitmix.com/MIX09/T50F](http://videos.visitmix.com/MIX09/T50F) [http://videos.visitmix.com/MIX09/T44F](http://videos.visitmix.com/MIX09/T44F)

这是您的文档主页： [http ://www.asp.net/mvc/](http://www.asp.net/mvc/)

有关更多信息，asp.net mvc 1.0 书的第一章已在线，可以免费下载。在此处查看 ScottGu 的博客： [http ://weblogs.asp.net/scottgu/archive/2009/03/10/free-asp-net-mvc-ebook-tutorial.aspx](http://weblogs.asp.net/scottgu/archive/2009/03/10/free-asp-net-mvc-ebook-tutorial.aspx)

而且，本章的完整代码可以在这里找到：http: [//www.codeplex.com/nerddinner](http://www.codeplex.com/nerddinner)

最后，在开发时间方面，我认为使用 MVC 开发应用程序可能需要更长的时间（虽然我没有证据），但我认为支持、维护、修复错误和增强所需的时间会少很多。因此，通过少量的前期投资，我认为您将获得更多回报。

无论如何，就像我说的，这些是我的初步发现。我还没有遇到一个非常棘手的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-09-23T14:06:07.130

大约 3 个月前，我被告知我需要开发一个企业网络应用程序（实际上是一系列小型网络应用程序），但我可以选择任何我想要的技术。

由于我对 VS/C#/.Net 最满意，因此难题是选择 ASP.NET WebForms 还是 ASP.NET MVC2 —— 与您不同，我唯一的背景是 Windows 窗体 (WinForms) 和一点 WPF。所以我不得不研究（并试用）WebForms 和 MVC。

就像你一样，我意识到我的应用程序既不是谷歌也不是苹果，而是你的沼泽标准公司应用程序，有数千个按钮和框等。WebForms 似乎是最快的部署，但很难测试和很难长期保持。MVC 的学习曲线似乎要陡峭得多，但一旦建立起来，测试和维护将变得轻而易举。

我只摆弄了一个星期的 WebForms，所以我不能真正评论它。但 MVC 绝对是我所期望的一切。

是的，这是一个陡峭的学习曲线。对我来说很新的概念：

*   模型-视图-控制器 (MVC)
*   关注点分离 (SoC)
*   模型绑定
*   单元测试和测试驱动设计（TDD）
*   模拟和存根
*   依赖注入 (DI)

对我帮助最大的书是：

*   [Sanderson 的 Pro ASP.NET MVC2](https://rads.stackoverflow.com/amzn/click/com/1430228865)（MVC、模型绑定、DI、TDD）
*   [Osherove 的单元测试艺术](https://rads.stackoverflow.com/amzn/click/com/1933988274)（TDD、Mocking、Stubbing、DI）

我还必须复习我的 HTML、CSS 和 Javascript。

总体而言，一开始似乎有相当多的加速工作，但维护和扩展现有应用程序非常轻松。每当我被要求进行更改时，这都相当容易，而且我通常能够按时甚至有时提前交付。

在理想情况下，编写一个 MVC 应用程序需要 2 个人完成。一个人编写核心代码，另一个人编写 UI 和视图（HTML、CSS、Javascript）。尽管完全可以自己完成所有工作。（这就是我现在正在做的事情......）

不过，我在 Enterprise 中部署时遇到了一些问题。在内部，我的公司正在运行 Windows Server 2003 和 IIS6。不幸的是，当使用虚拟路径时，我们无法让应用程序在 IIS6 上正确部署。（所有对 CSS 文件的引用和在 CSS 文件中的引用都已损坏。）如果您计划部署 MVC，我建议使用 IIS7 或更高版本。MVC 据说可以在 IIS6 上运行，但需要您的 IT 部门愿意弄清楚如何让它工作。

**编辑：**我刚刚意识到我从来没有直接回答过你的问题。开始：

1.  我的个人经验表明，是的，构建好的模型和 UI 的学习曲线很陡峭，但我并不是真正的 Web 开发人员，所以我一直在努力解决这个问题。好消息是 MVC 技术相当成熟。

2.  是的，这个社区发展得很好，而且还在不断发展。你会从 StackOverflow 以及 MS 的 ASP.NET MVC 子论坛中得到很多好的答案。

3.  我没有编写 WebForms 的个人经验，但我编写了很多 WinForms 应用程序，我觉得我花了大约。构建此 MVC 应用程序的时间要长 3 倍。最初的投资是熊市，但定期维护和改进似乎来得更快，尤其是随着应用程序的发展......因为你似乎有一个程序员团队，所以你们可能会更快，因为你们可能会分开学习/工作量。

4.  同样，之前没有使用 WebForms 的经验，但我可以告诉你的是，当我学习 ASP.NET MVC 时，有时我很难理解发生了什么，因为我之前没有 ASP.NET 背景。（例如：成员资格和角色提供者——我最近不得不自己编写代码。男孩就是这么有趣......）从好的方面来说，我没有任何“旧的做事方式”（又名 WebForms）可以忘记任何一个。如果你有一个团队迷恋 PostBack / CodeBehind，你可以打赌 MVC 一开始看起来会非常奇怪。但希望您的团队能够看到 MVC 带来的优势并完全接受它。

哦，应该注意的是，您可以混合 MVC 和 WebForms。这不是一个全有或全无的命题。虽然，如果我站在你的立场上，我会尝试尽可能多地采用 MVC，并且只在它显然更有意义的地方使用 WebForms。

好的，我希望这会有所帮助...... :-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T04:53:30.587

如您所知，一切以人为本，技术第二。您可以简单地构建公司应用程序的新功能，因为它们可以共存，然后您可以自己回答所有这些问题。这是新的东西，所以它当然会比你习惯的需要更多的时间，但它很有趣，所以马上开始为你自己的人和应用程序回答这些问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T05:18:13.837

有趣的是，您的问题全部集中在您的担忧上，而不是任何好处上。你问过自己“为什么”的问题吗？如果您觉得可以使用 WebForms 取得成功，为什么要改用 MVC？MVC 中有什么可以证明风险是合理的？如果你为这个项目买单，你会怎么做？

我不会以任何方式将 WebForms 推向 MVC，但作为架构师，您需要能够非常强烈地回答为什么您决定从一个非常知名的数量转向一个相对较新的数量的问题。我认为这样做有很多很好的理由，但这不是我的工作就行了。:)

# c# - 将 System.Json 用于非 Silverlight 项目？

> ID：775692
> 
> 赞同：11
> 
> 时间：2009-04-22T04:34:27.637
> 
> 标签：c#, .net, json

关于如何做的任何想法？如果不可能，什么是 C# 的好的 JSON 库？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2011-08-18T10:26:11.553

`System.Json`[现在可以通过NuGet](http://nuget.codeplex.com) （.Net 的包管理系统）在非 Silverlight 项目中使用，并有望作为 vnext 核心框架的一部分发布。NuGet 包名为[JsonValue](http://nuget.org/List/Packages/JsonValue)。

假设我们在字符串变量中有以下 JSON `json`：

```
[{"a":"foo","b":"bar"},{"a":"another foo","b":"another bar"}] 
```

我们可以使用以下代码将值“另一个栏”写入控制台：

```
using System.Json;
dynamic jsonObj = JsonValue.Parse(json);
var node = jsonObj[1].b;
System.Console.WriteLine(node.Value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T09:11:20.233

如果你只是在寻找 JSON 编码/解码，微软有一个官方的 System.Web 扩展库可以做到这一点，你可能已经有了这个程序集（System.Web.Extensions）：

[http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)

例子：

```
using System;
using System.Web.Script.Serialization;

class App 
{
    static void Main(string[] args = null)
    {
        JavaScriptSerializer jss = new JavaScriptSerializer();
        String sJson = "{\"Name\": \"Your name\"}";
        DesJson json = jss.Deserialize<DesJson>(sJson);

        Console.WriteLine(json.Name);
    }
}

class DesJson {
    public string Name {get; set;}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T09:24:16.630

这是将任何对象实例序列化为 JSON 的扩展方法：

```
public static class GenericExtensions
{
    public static string ToJsonString<T>(this T input)
    {
        string json;
        DataContractJsonSerializer ser = new DataContractJsonSerializer(input.GetType());
        using (MemoryStream ms = new MemoryStream())
        {
            ser.WriteObject(ms, input);
            json = Encoding.Default.GetString(ms.ToArray());
        }
        return json;
    }
} 
```

您需要添加对 System.ServiceModel.Web 的引用才能使用 DataContractSerializer。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-10-09T00:11:43.003

斯科特·格思里（Scott Guthrie）写了一篇关于这个的博客

[http://weblogs.asp.net/scottgu/archive/2007/10/01/tip-trick-building-a-tojson-extension-method-using-net-3-5.aspx](http://weblogs.asp.net/scottgu/archive/2007/10/01/tip-trick-building-a-tojson-extension-method-using-net-3-5.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-20T09:20:16.583

另一种选择是使用 Mono 的 System.Json 实现，我可以通过一些小改动将它反向移植到 C# 2.0。

[您可以从这里](http://vm1.duckdns.org/Public/System.Json/System.Json.zip)简单地下载我的 C# 2.0 项目。

# c++ - 为什么 Shell_NotifyIcon 气球提示不起作用？

> ID：775700
> 
> 赞同：4
> 
> 时间：2009-04-22T04:37:37.770
> 
> 标签：c++, winapi, tooltip, windows-shell, notifyicon

根据我所看到的一切，当我在应用程序窗口中左键单击时，以下 C++ 程序应该从托盘图标显示气球工具提示，但它不起作用。谁能告诉我我错过了什么？

这是在带有 Shell32.dll 6.0 版的 XP 上（使用 DllGetVersion 验证）。

谢谢！

```
 #include "stdafx.h"
    #include "shellapi.h"

    LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam);

    int APIENTRY _tWinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPTSTR lpCmdLine, int nCmdShow)
    {
        MSG msg;

        WNDCLASS wc;
        memset(&wc, 0, sizeof(wc));
        wc.lpfnWndProc = WndProc;
        wc.hInstance = hInstance;
        wc.hCursor = LoadCursor(NULL, IDC_ARROW);
        wc.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);
        wc.lpszClassName = "sysTrayTest";
        RegisterClass(&wc);

        HWND hWnd = CreateWindow("sysTrayTest", "", 
                                WS_OVERLAPPEDWINDOW,
                                CW_USEDEFAULT, 0, 500, 500, 
                                NULL, NULL, hInstance, NULL);
        if (hWnd)
        {
            ShowWindow(hWnd, nCmdShow);
            while (GetMessage(&msg, NULL, 0, 0))
            {
                TranslateMessage(&msg);
                DispatchMessage(&msg);
            }
        }

        return 0;
    }

    LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
    {
        switch (message)
        {
            case WM_DESTROY:
            {
                NOTIFYICONDATA nid;
                memset(&nid, 0, sizeof(NOTIFYICONDATA));
                nid.cbSize = sizeof(NOTIFYICONDATA);
                nid.hWnd = hWnd;
                nid.uID = 1;
                Shell_NotifyIcon(NIM_DELETE, &nid);

                PostQuitMessage(0);
            }
            break;

            case WM_CREATE:
            {
                NOTIFYICONDATA nid;
                memset(&nid, 0, sizeof(NOTIFYICONDATA));
                nid.cbSize = sizeof(NOTIFYICONDATA);
                nid.hWnd = hWnd;
                nid.uID = 1;
                nid.uFlags = NIF_ICON | NIF_MESSAGE | NIF_TIP;
                nid.uCallbackMessage = WM_USER + 200;
                nid.hIcon = LoadIcon(NULL, IDI_INFORMATION);
                lstrcpy (nid.szTip, "Test Tip");
                Shell_NotifyIcon(NIM_ADD, &nid);
            }
            break;

            case WM_LBUTTONDOWN:
            {
                NOTIFYICONDATA nid;
                memset(&nid, 0, sizeof(NOTIFYICONDATA));
                nid.cbSize = sizeof(NOTIFYICONDATA);
                nid.hWnd = hWnd;
                nid.uID = 1;
                nid.uFlags = NIF_INFO;
                lstrcpy(nid.szInfo, "Test balloon tip");
                lstrcpy(nid.szInfoTitle, "Test Title");
                nid.dwInfoFlags = NIIF_INFO;
                nid.uTimeout = 15000;
                Shell_NotifyIcon(NIM_MODIFY, &nid);
            }
            break;

            default:
                return DefWindowProc(hWnd, message, wParam, lParam);
        }
        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-22T21:58:18.347

呸，我想通了。出于某种原因，我的标题...

大小（通知图标数据）== 508

然而...

NOTIFYICONDATA `_`V3`_`大小 == 504
NOTIFYICONDATA `_`V2`_`大小 == 488
NOTIFYICONDATA `_`V1`_`大小 == 88

如果我指定 V2 或 V3 而不是 sizeof(NOTIFYICONDATA) 气球提示显示就好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T04:47:43.300

您是否在...下检查了注册表

HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\Advanced

... 对于 EnableBalloonTips？用户关闭是很常见的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-12-01T18:17:34.793

问题是您假设 Windows 会`WM_LBUTTONDOWN`在用户单击图标时向您发送 a，但这是不正确的。`WM_LBUTTONDOWN`仅当用户在 hWnd 的客户区域内单击时才会发送，如果您仔细阅读文档，`NOTIFYICONDATA`您会意识到当用户单击图标时，Windows 会向您发送一条`WM_USER+20`消息（根据您的代码），并且在 lParam 参数中您会得到通知`WM_LBUTTONDOWN`。

# sql-server - 处理在 SQL Server 和经典 ASP 中存储为 varbinary 的散列密码

> ID：775702
> 
> 赞同：2
> 
> 时间：2009-04-22T04:37:45.463
> 
> 标签：sql-server, asp-classic, vbscript, passwords, varbinary

全部，

提前抱歉 - 我是以下大多数主题（SQL、ASP）的新手。反正...

我有一个非常简单的网络应用程序，它要求用户使用用户名和密码登录。

前端创建密码的加盐 SHA1 哈希，并将其（连同用户名）发布到 ASP 页面。

该 ASP 页面获取数据，调用 SQL Server 数据库中的存储过程，并传递用户名和散列密码；存储过程将信息写入“用户”表。

表中密码列的类型是 varbinary。

据我所知，当 ASP 获得密码 (password = Request.Form("password")) 时，它是一个字符串。

如果我以这种方式创建查询，我可以“欺骗”SQL Server 将其作为 varbinary 处理：

query = "EXEC sp_save_user @username='" & 用户名 & "', @password=0x" & 密码

IOW - 我在密码字符串前面加上“0x”。

但是，我读过使用参数化查询是一种更好的做法：

例如： SET objParam = objCommand.CreateParameter("@password",204, 1, 40, 密码)

但是，这会失败，因为参数应该是二进制 (204)，但密码是字符串。

那么，如何在 ASP 中将“4a5e6a8d521ed487b81c91e131cf27e8dae9b783”之类的字符串转换为二进制文件？

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T11:29:01.527

我记得我曾经在这种事情上大发雷霆的日子。我建议您升级到 ASP.Net，但与此同时，以下代码 (VBScript) 应该可以满足您的要求：

```
<%

Dim result

main()

function main()

    Dim userName : userName = "Martin"
    Dim data : data = "4a5e6a8d521ed487b81c91e131cf27e8dae9b783"

    Dim db: Set db = Server.CreateObject("ADODB.Connection")
    db.Open "Provider=SQLOLEDB.1;Persist Security Info=False;User ID=sa;Password=password1;Initial Catalog=Test;Data Source=(local)"

    Dim cmd : Set cmd = Server.CreateObject("ADODB.Command")
    cmd.ActiveConnection = db

    cmd.CommandText = "dbo.[sp_save_user]"
    cmd.CommandType = 4    
    cmd.Parameters.Append cmd.CreateParameter("@UserName", 200, 1, 50, userName)
    Dim bytes : bytes = stringToBinary(data)
    cmd.Parameters.Append cmd.CreateParameter("@Password", 204, 1, LenB(bytes), bytes)
    cmd.Execute()

    db.Close

    result = "done"

end function

function stringToBinary(str)
    dim ahex
    for i=0 to len(str) - 1 step 2
        Dim strDigit1 
        Dim strDigit2
        strDigit1 = Ucase(Mid(str, i+1, 1))
        strDigit2 = Ucase(Mid(str, i+2, 1))

        Dim byteDigit1
        Dim byteDigit2
        byteDigit1 = InStr("0123456789ABCDEF", strDigit1) - 1
        byteDigit2 = InStr("0123456789ABCDEF", strDigit2) - 1

        ahex = ahex & ChrB((byteDigit1 * 16) + byteDigit2)
    next   

    stringToBinary = ahex          
end function
%>
<html>
    <head>
        <title>Test</title>
    </head>
    <body>
        <h1><%= result %></h1>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T11:43:40.603

我假设您有更改数据库的范围......更具体地说是存储过程？

为什么不直接接受哈希作为字符串并将其转换为 SProc 中的 varbinary？

进一步阅读，SQL Server 中没有内置的 String -> Varbinary 函数，但[这个函数](http://blogs.msdn.com/rextang/archive/2008/01/13/7091118.aspx)是作为一个简单的解决方案提供的，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-22T08:24:31.380

也许有点无关，但我想知道，如果你在客户端上加盐，你是如何保证盐安全的？

# windows - 让批处理文件最小化 DOS 窗口？

> ID：775703
> 
> 赞同：3
> 
> 时间：2009-04-22T04:37:54.930
> 
> 标签：windows, minimize, shrink

所以我有点喜欢 MS-DOS 之类的，但我来问自己，我怎样才能最小化一个 DOS 窗口？任何一种都可以，最小化，缩小到一个蓝色的小块。

我似乎无法找到让它在我的 Windows XP 计算机上工作的方法，XP 中真的排除了一切吗？！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-22T04:42:41.737

`start`您可以使用以下命令在新的最小化窗口中启动程序：

```
start /min your_command_here 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-22T05:33:42.457

您可以做的一件事是创建一个 Windows 程序，该程序将找到您正在运行的 cmd 窗口的标题，并在该程序中将其最小化。在 Win32 中，您将使用[FindWindow](http://msdn.microsoft.com/en-us/library/ms633499.aspx)命令获取窗口句柄，然后[使用 CloseWindow](http://msdn.microsoft.com/en-us/library/ms632678(VS.85).aspx)将其最小化。像这样*完全未经测试*的程序：

```
int main(int argc, char** argv)
{
    HWND wnd = FindWindow(      
        NULL,
        argv[1]
        );
    CloseWindow(wnd);
    return 0;
} 
```

在 cmd 窗口中，您可以将标题设置为您定义的某个字符串（以避免歧义），然后将该名称传递给程序给您的程序：

```
C:\>title TitleOfWindowToMiniMize

C:\>minimizeWindow TitleOfWindowToMiniMize 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T05:07:31.210

你不能。不在DOS中。DOS没有windows的概念。

在 Windows 中，您可以编写一个小程序来查找您的窗口并向其发送适当的消息，使其最小化。同样，您也可以最大化或隐藏/显示您的窗口。

# apache-flex - 如何使用 flex 或 flash（动作脚本 3）将不同的国家时间放入单个页面，因为 getTime() 仅用于获取当前时间

> ID：775705
> 
> 赞同：1
> 
> 时间：2009-04-22T04:38:38.283
> 
> 标签：apache-flex, flash, actionscript-3, actionscript, actionscript-2

我是初学者，不知道如何使用 flex 中的动作脚本 3 将所有国家/地区时间显示到单个页面中。你知道任何示例时间代码吗？我会试试那个代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T15:14:20.313

在 Actionscript/Flex 中，您只能获取来自用户操作系统的本地时间或 UTC 时间。您必须找到一种将 UTC 转换为用户时间的方法 - 或使用 externalInterface 与 java.util 之类的东西进行通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T04:45:41.900

在 Java 中，您可以使用 Calendar.getInstance(TimeZone zone) 方法来创建时区的日历对象。TimeZone.getAvailableIDs() 将为您提供 Java 支持的内置时区列表。您可以找到所需的时区，并使用 id 可以从 TimeZone.getTimeZone(String ID) 创建 TimeZone 对象

# c++ - 将 String^ 转换为 std::string（基本字符串）-> 错误。我怎样才能解决这个问题？

> ID：775708
> 
> 赞同：2
> 
> 时间：2009-04-22T04:39:46.220
> 
> 标签：c++, string, std

我尝试将 String^ 转换为基本字符串...但是在此代码之后出现错误。这是什么意思，我该如何解决？我需要将基本字符串输入到类构造函数中。字符串 ^ 不起作用。

```
System::String^ temp = textBox1->Text;
string dummy = System::Convert::ToString(temp); 
```

```
错误 C2440：“正在初始化”：无法从“System::String ^”转换为“std::basic_string”
1> 与
1> [
1> _Elem=字符，
1> _Traits=std::char_traits,
1> _Ax=std::分配器
1>]
1> 没有构造函数可以采用源类型，或者构造函数重载决议不明确

```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-22T05:06:39.387

你需要编组你的字符串。托管字符串位于托管堆上的某个位置（垃圾收集器可以自由移动它）。

将字符串获取到本机端的一种方法如下：

```
using System::Runtime::InteropServices::Marshal;

char *pString = (char*)Marshal::StringToHGlobalAnsi(managedString);
std::string nativeString(pString); // make your std::string
Marshal::FreeHGlobal(pString);     // don't forget to clean up 
```

如果您使用的是 Visual Studio 2008，则可以利用更好的编组实用程序。[查看此 MSDN 页面](http://msdn.microsoft.com/en-us/library/bb384865.aspx)。

```
#include <msclr/marshal.h>
#include <msclr/marshal_cppstd.h>

using namespace msclr::interop;

std::string nativeString(marshal_as<std::string>(managedString)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-12-12T13:37:01.880

我花了 11 小时寻找解决方案：

```
 #include <stdlib.h
 #include <string.h>
 #include <msclr\marshal_cppstd.h>
 //ListaQuad<int> prueba;
 //..
 using namespace msclr::interop;
 //..
 System::String^ clrString = (TextoDeBoton);
 std::string stdString = marshal_as<std::string>(clrString);  //String^ to std
 //System::String^ myString = marshal_as<System::String^>(MyBasicStirng);   //std to String^ (no lo he probado, pero sería algo así.)
 prueba.CopyInfo(stdString); //MyMethod
 //..
 //where, String^ = TextoDeBoton;
 //and, stdString = normal string; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-22T06:08:45.710

您需要做两件事才能将 a 转换`System::String`为 a `std::string`：

*   将托管堆中的内存编组为非托管堆。
*   将您的字符编码从宽字符转换为（从您的问题来看）ansi 字符。

一种无需担心释放任何 HGlobal 内存的方法是按照以下方式定义一个方法：

```
interior_ptr<unsigned char> GetAsciiString(System::String ^s)
{
    array<unsigned char> ^chars = System::Text::Encoding::ASCII->GetBytes(s);
    return &chars[0];
    // of course you'd want to do some error checking for string length, nulls, etc..
} 
```

你会像这样使用它：

```
// somewhere else...
{
    pin_ptr<unsigned char> pChars = GetAsciiString(textBox1->Text);
    std:string std_str(pChars); // I don't have my compiler in front of me, so you may need a (char*)pChars
} 
```

这也允许您使用您选择的编码（例如 utf-8 over ascii），但您可能并不真正需要它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-24T05:35:49.277

可能是，您需要从`std::string`到 进行反向转换`String^`。我正在搜索这个转换，但我没有找到。所以，我写了。我希望它对某人有用：

```
String^ stdStringToPlatformString(string stdString){
    const size_t newsizew = strlen(stdString.c_str()) + 1;
    size_t convertedChars = 0;
    wchar_t *ch1 = new wchar_t[newsizew];
    mbstowcs_s(&convertedChars, ch1, newsizew, stdString.c_str(), _TRUNCATE);
    String ^platformString;
    platformString = ref new Platform::String(ch1, newsizew);
    return platformString;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-22T05:36:12.420

我想你也可以这样做：

```
string dummy = string( textBox1->Text ); 
```

查看如何：在 MSDN 上的[各种字符串类型之间进行转换。](http://msdn.microsoft.com/en-us/library/ms235631(VS.80).aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T16:38:58.073

```
string platformStringToStdString(String ^input){
    int size=input->Length()+1;
    char* auxiliary=(char *)malloc(sizeof(char)*size);
    wcstombs_s(NULL,auxiliary,size,input->Data(),_TRUNCATE);
    string result(auxiliary);
    free(auxiliary);
    return result;
} 
```

# java - Eclipse PDE、Navigator View、TreeSelection - 获取文件类型和名称

> ID：775709
> 
> 赞同：7
> 
> 时间：2009-04-22T04:40:29.557
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp, eclipse-pde

我试图在导航树视图中获取 Eclipse 用户的结构化选择的详细信息。目前我有以下基于 org.eclipse.ui.popMenus 扩展点：

```
public void run(IAction action) {

Shell shell = new Shell();

ISelection selection = workbenchPart.getSite().getSelectionProvider().getSelection();

if (structuredSelection instanceof org.eclipse.jface.viewers.TreeSelection) {

   org.eclipse.jface.viewers.TreeSelection treeSelection = (org.eclipse.jface.viewers.TreeSelection) structuredSelection;
   IAdaptable firstElement = (IAdaptable) treeSelection.getFirstElement();

   // Relies on an internal API, bad juju
   if (firstElement instanceof org.eclipse.jdt.internal.core.CompilationUnit) {
    org.eclipse.jdt.internal.core.CompilationUnit compilationUnit = (org.eclipse.jdt.internal.core.CompilationUnit) firstElement;                                   
    String editorSelection = new String(compilationUnit.getContents());
   }            
} 
```

问题在于它目前与 JDT 编译单元 API 耦合，这是内部的，对于我想要的来说太具体了。

理想情况下，我希望能够获得底层文件名、类型和内容，而不必依赖：

1.  内部 API
2.  JDT 编译单元代码。

当用户右键单击导航器视图中的文件时，这将允许我获取通用文件的属性。

有人可以为我提供有关如何执行此操作的任何指示吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-22T14:09:19.207

[编辑：我添加了以下替代方案-原始答案是父亲倒下]

第一：如果你在包资源管理器中选择了一些东西，被选中的项目都是Java模型对象——你必须在某种程度上处理它们。有两种方法可以处理此问题：

1.  直接使用 ICompilationUnit（见下文）
2.  创建一个 Eclip 适配器工厂来自动化转换

## 适配器工厂方法

您可以创建一个适配器工厂（它可以存在于您的主插件或其他插件中），eclipse 可以使用它来自动从 ICompilationUnit 转换为 IFile。

注意：如果您在不同的插件中创建适配器工厂，您可能需要为其设置早期启动以加载适配器工厂。否则，您需要让您的插件与选择一起使用取决于提供适配器的插件。

[在http://www.eclipse.org/resources/resource.php?id=407](http://www.eclipse.org/resources/resource.php?id=407)上有一些关于适配器的详细信息，但我将在这里讨论这个问题的实现。

### 依赖项

将托管适配器的插件需要以下依赖项

*   org.eclispe.core.resources
*   org.eclipse.jdt.core

### 适配器工厂类

在新插件中定义以下类

```
package com.javadude.foo;

import org.eclipse.core.resources.IFile;
import org.eclipse.core.runtime.IAdapterFactory;
import org.eclipse.jdt.core.ICompilationUnit;

public class CompilationUnitToFileAdapter implements IAdapterFactory {
    @Override
    public Object getAdapter(Object adaptableObject, Class adapterType) {
        if (adaptableObject instanceof ICompilationUnit)
            // note: "adapting" it here just means returning the ref'd IFile
            return (IFile) ((ICompilationUnit)adaptableObject).getResource();
        return null;
    }
    @Override
    public Class[] getAdapterList() {
        return new Class[] {IFile.class};
    }
} 
```

### 扩展名

在将托管适配器工厂的插件中，将以下内容添加到您的 plugin.xml：

```
<extension point="org.eclipse.core.runtime.adapters">
    <factory
        adaptableType="org.eclipse.jdt.core.ICompilationUnit"
        class="com.javadude.foo.AdapterFactory1">
        <adapter type="org.eclipse.core.resources.IFile" />
    </factory>
</extension> 
```

### 使用适配器

有了上述内容，您现在可以编写：

```
Object firstElement = ((ITreeSelection) selection).getFirstElement();
IFile file = (IFile) Platform.getAdapterManager().
                         getAdapter(firstElement, IFile.class);
if (file == null)
    // adapter not present; cannot use as IFile
else
    // adapter present - you can use it as an IFile 
```

使用这种方法，您可以添加额外的适配器来将其他类型转换为 IFile，而您的选择代码并不关心。

* * *

## 直接 ICompilationUnit 方法

[编辑：我已经更改了答案，但将以下内容作为参考信息 b/c 这是探索在包资源管理器中选择的编译单元内容的标准方法]

这实际上是在包资源管理器中获取文件内容的首选方式...

您应该使用 ICompilationUnit，而不是使用 CompilationUnit。大多数 Eclipse API 使用接口用于公共消费，使用类用于内部细节。

如果您将代码更改为

```
if (firstElement instanceof ICompilationUnit) {
    ICompilationUnit unit = (ICompilationUnit firstElement;
    String contents = new String(unit.getContents());
} 
```

你的身体会很好。

要查看检查/修改 Java 模型和源代码的详细信息：

```
(In Eclipse)
Help->
  Help Contents->
    JDT Plug-in Developer's Guide->
      Programmer's Guide->
        JDT Core 
```

这显示了如何适当地使用 Java 模型

要隔离引用 java 模型的位置，您可以创建一个 (eclipse) 适配器，它将 Java 模型对象转换为文件。假设存在这样的适配器，然后您可以要求 AdapterManager 为您将其转换为 java 文件。我去看看有没有。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-26T17:25:36.497

[那（从 JDT 中解耦 Resource）是E4 (Eclipse 4)](http://wiki.eclipse.org/E4)的目标之一。
REsources的[插件列表](http://wiki.eclipse.org/Resources)不再提及 JDT（同样，仅限 Eclipse 4.x）：

*   `org.eclipse.core.filesystem`- 一个抽象的通用文件系统 API，包括该 API 用于本地文件系统的实现。这是资源插件访问底层文件系统的 API。
*   `org.eclipse.core.resources`- 包含资源模型的API和实现
*   `org.eclipse.core.resources.compatibility`- 为在 Eclipse 3.1 或更高版本中打开旧工作区的用户提供迁移支持的插件

像[e4photo](https://github.com/qualidafial/eclipse.platform.ui/blob/master/examples/org.eclipse.e4.demo.e4photo/src/org/eclipse/e4/demo/e4photo/ExifTable.java)这样的演示项目不需要任何 JDT即可[通过选择 IContainer 来访问 IResource](https://github.com/qualidafial/eclipse.platform.ui/blob/078eef3960dfe195a4b3052f6a77af671123a073/examples/org.eclipse.e4.demo.e4photo/src/org/eclipse/e4/demo/e4photo/ExifTable.java#L78-L97)。

```
void setSelection(@Named(IServiceConstants.ACTIVE_SELECTION)
        IResource selection) {
...
IResource[] members = input.members();
...
IResource resource = members[i];
if (resource.getType() == IResource.FILE) {
  InputStream contents = ((IFile) resource).getContents(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-22T07:30:45.997

你想达到什么目的？你想获取文件内容吗？然后你可以尝试：

```
IAdaptable firstElement = (IAdaptable) treeSelection.getFirstElement();

IFile file = (IFile) firstElement.getAdapter(IFile.class);
if (file != null && file.isAccessible()) {
    // Use getContents API
    ....
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-28T21:43:57.517

看起来 JDT 已经`IAdapterFactory`为包括编译单元 ( `org.eclipse.jdt.internal.ui.JavaElementAdapterFactory`) 在内的所有 Java 元素定义了一个。适配器是为`IResource`而不是定义的，`IFile`因此您应该能够：

```
Object firstElement = treeSelection.getFirstElement();

IResource resource = (IResource)Platform.getAdapterManager().getAdapter(firstElement, IResource.class); 
```

# haskell - Haskell 有什么大惊小怪的？

> ID：775726
> 
> 赞同：111
> 
> 时间：2009-04-22T04:45:47.050
> 
> 标签：haskell, functional-programming

我认识一些程序员，当他们在他们中间时，他们一直在谈论 Haskell，而且在这里，每个人似乎都喜欢这种语言。擅长 Haskell 似乎有点像天才程序员的标志。

有人可以举几个 Haskell 的例子来说明为什么它如此优雅/优越吗？

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2009-10-16T01:46:30.810

这是说服我学习 Haskell*的例子（我很高兴我做到了）。*

```
-- program to copy a file --
import System.Environment

main = do
         --read command-line arguments
         [file1, file2] <- getArgs

         --copy file contents
         str <- readFile file1
         writeFile file2 str 
```

好的，这是一个简短易读的程序。从这个意义上说，它比 C 程序更好。但这与（比如说）具有非常相似结构的 Python 程序有什么不同呢？

答案是惰性评估。在大多数语言（甚至是一些函数式语言）中，像上面那样结构的程序会导致整个文件被加载到内存中，然后以新名称再次写出。

Haskell 是“懒惰的”。它在需要之前不会计算事物，并且通过扩展*它不会*计算它永远不需要的事物。例如，如果您要删除该`writeFile`行，Haskell 一开始就不会费心从文件中读取任何内容。

事实上，Haskell 意识到`writeFile`依赖于`readFile`，因此能够优化此数据路径。

虽然结果取决于编译器，但运行上述程序时通常会发生以下情况：程序读取第一个文件的一个块（例如 8KB），然后将其写入第二个文件，然后从第一个文件读取另一个块文件，并将其写入第二个文件，依此类推。（尝试运行`strace`它！）

...这看起来很像文件副本的高效 C 实现。

因此，Haskell 让您可以编写紧凑、可读的程序——通常不会牺牲很多性能。

我必须补充的另一件事是，Haskell 只会让编写有缺陷的程序变得困难。令人惊叹的类型系统、没有副作用，当然还有 Haskell 代码的紧凑性，至少出于三个原因减少了错误：

1.  更好的程序设计。降低的复杂性导致更少的逻辑错误。

2.  紧凑的代码。存在错误的行更少。

3.  编译错误。许多错误只是*无效的 Haskell*。

Haskell 并不适合所有人。但是每个人都应该尝试一下。

* * *

## 回答 #2

> 赞同：135
> 
> 时间：2009-04-22T05:01:33.453

向我推销它的方式，以及在学习 Haskell 一个月后我认为是正确的，是函数式编程以有趣的方式扭曲你的大脑：它迫使你以不同的方式思考熟悉的问题：而不是循环，考虑地图、折叠和过滤器等。一般来说，如果你对一个问题有多个观点，它会让你更好地推理这个问题，并在必要时切换观点。

Haskell 的另一个非常巧妙的地方是它的类型系统。它是严格类型化的，但是类型推断引擎让它感觉就像一个 Python 程序，当你犯了一个愚蠢的类型相关错误时，它会神奇地告诉你。Haskell 在这方面的错误信息有些欠缺，但是当您对这种语言更加熟悉时，您会对自己说：这就是打字应该是的！

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2009-04-22T07:40:14.587

你有点问错问题了。

Haskell 不是一门语言，你可以去看看一些很酷的例子然后去“啊哈，我现在明白了，*这*就是它的优点！”

更像是，我们拥有所有这些其他编程语言，它们或多或少都相似，然后是 Haskell，它完全不同而且古怪，一旦你习惯了古怪，它就会变得非常棒。但问题是，要适应这种古怪需要相当长的时间。使 Haskell 与几乎任何其他甚至是半主流语言不同的地方：

*   懒惰的评价
*   没有副作用（一切都是纯粹的，IO/etc 通过 monads 发生）
*   极具表现力的静态类型系统

以及与许多主流语言不同的其他一些方面（但被一些人共享）：

*   功能性的
*   重要的空白
*   类型推断

正如其他一些发帖人所回答的那样，所有这些功能的组合意味着您以完全不同的方式思考编程。所以很难想出一个例子（或一组例子）来充分地将这一点传达给 Joe-mainstream-programmer。这是一个经验的事情。（打个比方，我可以给你看我1970年去中国旅行的照片，但看了照片你还是不知道那段时间在那里生活是什么感觉。同样，我可以给你看一个Haskell '快速排序'，但你仍然不会知道成为 Haskeller 意味着什么。）

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2009-04-22T05:18:41.260

真正让 Haskell 与众不同的是它在设计中为强制执行函数式编程所做的努力。您可以使用几乎任何语言以函数式风格进行编程，但在第一次方便时就很容易放弃。Haskell 不允许您放弃函数式编程，因此您必须将其得出合乎逻辑的结论，这是一个更容易推理的最终程序，并且回避了一整类最棘手的错误类型。

在编写用于现实世界的程序时，您可能会发现 Haskell 缺乏一些实用的方式，但您的最终解决方案会更好地了解 Haskell。我肯定还没有到那里，但到目前为止学习 Haskell 比 Lisp 上大学时更有启发性。

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2009-04-22T09:09:22.033

大惊小怪的部分原因是纯度和静态类型可以实现并行性和积极的优化。并行语言现在很热门，多核有点破坏性。

Haskell 为您提供了比几乎任何通用语言更多的并行选项，以及快速的本机代码编译器。这种对并行样式的支持确实没有竞争对手：

*   [通过线程火花](http://hackage.haskell.org/package/parallel-3.2.2.0/docs/Control-Parallel-Strategies.html)的半隐式并行
*   [显式线程](http://hackage.haskell.org/packages/archive/base/4.0.0.0/doc/html/Control-Concurrent.html)
*   [数据并行数组](http://haskell.org/haskellwiki/GHC/Data_Parallel_Haskell)
*   [演员和消息传递](http://hackage.haskell.org/cgi-bin/hackage-scripts/package/actor)
*   [事务性记忆](http://haskell.org/haskellwiki/Software_transactional_memory)

因此，如果您关心使您的多核工作，Haskell 有话要说。一个很好的起点是 Simon Peyton Jones 的[Haskell 并行和并发编程教程](https://www.microsoft.com/en-us/research/publication/a-tutorial-on-parallel-and-concurrent-programming-in-haskell/)。

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2009-04-22T04:51:15.540

[软件事务内存](http://en.wikipedia.org/wiki/Software_Transactional_Memory)是处理并发的一种非常酷的方法。它比消息传递灵活得多，而且不像互斥锁那样容易出现死锁。 [GHC 的](http://www.haskell.org/ghc/)STM 实现被认为是最好的之一。

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2009-06-14T16:50:11.583

去年我一直在学习 Haskell，并在其中编写了一个相当大且复杂的项目。（该项目是一个自动期权交易系统，从交易算法到解析和处理低级、高速市场数据馈送的所有内容都在 Haskell 中完成。）它更加简洁和易于理解（对于那些有适当的背景）比 Java 版本要好，而且非常健壮。

可能对我来说最大的胜利是能够通过诸如 monoids、monads 之类的东西来模块化控制流。一个非常简单的例子是 Ordering monoid；在诸如

```
c1 `mappend` c2 `mappend` c3 
```

where`c1`等等 return `LT`，`EQ`or `GT`，`c1`returning`EQ`导致表达式继续，求值`c2`；if`c2`返回`LT`or`GT`那是整体的值，并且`c3`不被评估。这种事情在诸如单子消息生成器和解析器之类的东西中变得相当复杂和复杂，我可能携带不同类型的状态，具有不同的中止条件，或者可能希望能够为任何特定调用决定中止是否真的意味着“没有进一步处理”或意思是“最后返回错误，但继续处理以收集进一步的错误消息。”

所有这些东西都需要一些时间并且可能需要相当多的努力来学习，因此对于那些还不了解这些技术的人来说，很难为它做出令人信服的论据。我认为[All About Monads](https://wiki.haskell.org/All_About_Monads)教程给出了一个非常令人印象深刻的演示，但我不希望任何不熟悉该材料的人在第一次甚至第三次仔细阅读时都会“理解”。

无论如何，Haskell 中还有很多其他的好东西，但这是我不经常提到的主要内容，可能是因为它相当复杂。

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2009-04-22T05:01:16.140

对于一个有趣的例子，你可以看看： [http://en.literateprograms.org/Quicksort_(Haskell)](http://en.literateprograms.org/Quicksort_(Haskell))

有趣的是查看各种语言的实现。

使 Haskell 以及其他函数式语言如此有趣的原因在于，您必须以不同的方式思考如何编程。例如，您通常不会使用 for 或 while 循环，但会使用递归。

如上所述，Haskell 和其他函数式语言擅长并行处理和编写多核应用程序。

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2009-04-22T04:53:58.277

我不能给你一个例子，我是一个 OCaml 人，但是当我处于像你这样的情况时，好奇心就会占据上风，我必须下载一个编译器/解释器并试一试。通过这种方式，您可能会更多地了解给定函数式语言的优缺点。

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2009-04-22T05:20:20.943

在处理算法或数学问题时，我觉得很酷的一件事是 Haskell 对计算的固有惰性求值，这仅由于其严格的函数性质而成为可能。

例如，如果要计算所有素数，可以使用

```
primes = sieve [2..]
    where sieve (p:xs) = p : sieve [x | x<-xs, x `mod` p /= 0] 
```

结果实际上是一个无限列表。但是 Haskell 会从左到右求值，所以只要你不尝试做需要整个列表的事情，你仍然可以使用它而不会让程序陷入无穷大，例如：

```
foo = sum $ takeWhile (<100) primes 
```

它将所有小于 100 的素数相加。这很好有几个原因。首先，我只需要编写一个生成所有素数的素数函数，然后我就可以使用素数了。在面向对象的编程语言中，我需要一些方法来告诉函数在返回之前它应该计算多少个素数，或者用一个对象模拟无限列表行为。另一件事是，一般而言，您最终编写的代码表达了您想要计算的内容，而不是按什么顺序来评估事物 - 而是编译器为您完成。

这不仅对无限列表有用，事实上，当您不需要进行不必要的评估时，它会在您一直不知道的情况下使用。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2009-04-25T23:42:53.567

我同意其他人的观点，即看几个小例子并不是展示 Haskell 的最佳方式。但无论如何我都会给一些。[这是欧拉计划问题 18 和 67](http://projecteuler.net/index.php?section=problems&id=18)的快速解决方案，它要求您找到从三角形底到顶点的最大和路径：

```
bottomUp :: (Ord a, Num a) => [[a]] -> a
bottomUp = head . bu
  where bu [bottom]     = bottom
        bu (row : base) = merge row $ bu base
        merge [] [_] = []
        merge (x:xs) (y1:y2:ys) = x + max y1 y2 : merge xs (y2:ys) 
```

这是Lesh 和 Mitzenmacher对[BubbleSearch](http://mybiasedcoin.blogspot.com/2007/08/bubblesearch.html)算法的完整、可重用的实现。我用它来打包大型媒体文件以在 DVD 上存档存储，没有浪费：

```
data BubbleResult i o = BubbleResult { bestResult :: o
                                     , result :: o
                                     , leftoverRandoms :: [Double]
                                     }
bubbleSearch :: (Ord result) =>
                ([a] -> result) ->       -- greedy search algorithm
                Double ->                -- probability
                [a] ->                   -- list of items to be searched
                [Double] ->              -- list of random numbers
                [BubbleResult a result]  -- monotone list of results
bubbleSearch search p startOrder rs = bubble startOrder rs
    where bubble order rs = BubbleResult answer answer rs : walk tries
            where answer = search order
                  tries  = perturbations p order rs
                  walk ((order, rs) : rest) =
                      if result > answer then bubble order rs
                      else BubbleResult answer result rs : walk rest
                    where result = search order

perturbations :: Double -> [a] -> [Double] -> [([a], [Double])]
perturbations p xs rs = xr' : perturbations p xs (snd xr')
    where xr' = perturb xs rs
          perturb :: [a] -> [Double] -> ([a], [Double])
          perturb xs rs = shift_all p [] xs rs

shift_all p new' [] rs = (reverse new', rs)
shift_all p new' old rs = shift_one new' old rs (shift_all p)
  where shift_one :: [a] -> [a] -> [Double] -> ([a]->[a]->[Double]->b) -> b
        shift_one new' xs rs k = shift new' [] xs rs
          where shift new' prev' [x] rs = k (x:new') (reverse prev') rs
                shift new' prev' (x:xs) (r:rs) 
                    | r <= p    = k (x:new') (prev' `revApp` xs) rs
                    | otherwise = shift new' (x:prev') xs rs
                revApp xs ys = foldl (flip (:)) ys xs 
```

我确信这段代码看起来像随机乱码。但是，如果您阅读[了 Mitzenmacher 的博客文章](http://mybiasedcoin.blogspot.com/2007/08/bubblesearch.html)并理解了该算法，您会惊奇地发现可以将算法打包到代码中而无需说明您要搜索的内容。

按照您的要求给出了一些示例，我会说**开始欣赏 Haskell 的最佳方式**是阅读这篇论文，它为我提供了编写 DVD 打包程序所需的想法：John Hughes 的[为什么函数式编程很重要。](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.47.3346)这篇论文实际上早于 Haskell，但它出色地解释了一些让人们喜欢 Haskell 的想法。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2010-08-05T17:39:19.720

对我来说，Haskell 的吸引力在于编译器*保证*正确性的承诺。即使是纯代码部分。

我已经编写了很多科学模拟代码，并且多次想知道**我**之前的代码中是否存在错误，这可能会使当前的很多工作无效。

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2010-08-05T18:14:17.110

我发现对于某些任务，我使用 Haskell 非常高效。

原因是语法简洁和易于测试。

这就是函数声明语法的样子：

> foo a = a + 5

这是我能想到的定义函数的最简单方法。

如果我写逆

> inverseFoo a = a - 5

我可以通过写来检查它是否与任何随机输入相反

> prop_IsInverse :: Double -> Bool
> prop_IsInverse a = a == (inverseFoo $ foo a)

并从命令行调用

> jonny@ubuntu: runhaskell quickCheck +names fooFileName.hs

这将通过随机测试输入一百次来检查我的文件中的所有属性是否被保存。

我不认为 Haskell 是适合所有事物的完美语言，但是在编写小函数和测试方面，我没有见过更好的语言。如果你的编程有数学成分，这非常重要。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2009-04-22T06:05:07.717

如果你能理解 Haskell 中的类型系统，我认为这本身就是一项成就。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2009-04-22T05:30:14.570

它没有循环结构。没有多少语言有这个特点。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-06-14T16:54:31.607

我同意那些说函数式编程会扭曲你的大脑以从不同角度看待编程的人的观点。我只是将它用作业余爱好者，但我认为它从根本上改变了我处理问题的方式。如果没有接触过 Haskell（以及在 Python 中使用生成器和列表解析），我认为我在使用 LINQ 时几乎不会那么有效。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-04-22T05:32:59.713

提出逆向观点：Steve Yegge 写道[Hindely-Milner 语言缺乏编写良好系统所需的灵活性](http://steve-yegge.blogspot.com/2007/01/pinocchio-problem.html)：

> HM 非常漂亮，在一种完全无用的形式数学意义上。它很好地处理了一些计算结构；Haskell、SML 和 OCaml 中的模式匹配调度特别方便。不出所料，它充其量只能笨拙地处理一些其他常见且非常理想的构造，但它们通过说你错了，你实际上并不想要它们来解释这些场景。你知道，比如，哦，设置变量。

Haskell 值得学习，但它也有自己的弱点。

# programming-languages - 编程技能在语言之间的可转移性如何？

> ID：775729
> 
> 赞同：8
> 
> 时间：2009-04-22T04:48:35.653
> 
> 标签：programming-languages

如果您正在为（例如）PHP 开发人员宣传一个编程职位，并且应聘者具有出色的简历，但他们是（例如）ASP.NET 方面的专家，并且他们的简历中的 PHP 组件很轻，您还会考虑他们的位置？你认为一般的编程技能胜过特定的语言技能吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-22T04:55:27.743

一个好的程序员可以很容易地在语言之间转换。

然而，问题在于，一个好的程序员，顾名思义，就是已经具备使用多种语言的技能的人。如果您正在雇用仅在单一语言和编程环境（编译器、框架等）方面有经验的人，那么他们可能没有必要的经验，特别是考虑到 PHP“堆栈”与 .NET 有些不同。

但是，如果您正在雇用了解 Java、PHP 并具有一定 Python 经验的人，那么这表明他们已经具有良好的编程经验，并且他们的技能很可能很容易转移到 ASP.NET。

这是我的看法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-22T04:54:19.853

非常可转移。对于一个优秀的程序员来说，语法是微不足道的，只要他们知道应该在何时何地使用某些设计模式和解决问题的技术（以及它们何时可用于一种语言），那么就没有理由不考虑它们.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-04-22T04:55:11.380

绝对地。通用编程技能是任何开发人员的核心价值。事实上，沟通技巧甚至可能超过其他一切。一个好的程序员是一个好的沟通者。

编程应该是关于交流的，因为代码将花费更多的时间来查看和修改，而不是第一次编写它，因此它可以更好地传达它应该做什么。

一个在编程基础上有扎实基础的程序员应该能够在几乎任何语言中以相当快的速度上手。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-22T04:53:22.413

不熟悉某些技术/语言就是这样 - 不熟悉。如果一个人的简历很好，并且对他一直在使用的技术表现出深刻的沉浸感，并且具有良好的编程和解决问题的能力，那么他绝对应该被考虑。唯一的例外是您现在需要一位合格的专家，因为您没有时间或出于某些原因可以让他学习。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-04-22T04:58:31.777

老实说，看起来可能并非如此，但我相信这个问题几乎太模糊而无法准确回答。我认为这在很大程度上取决于您正在招聘的具体工作。

如果您希望有人进来并立即在高水平上工作，那么您真的希望有人对您将使用的语言有丰富的经验。最好至少有一个人领导该项目，该人真正了解该语言以及如何在他的设计选择中不“违背常规”的情况下使用它。同样，如果候选人有很强的语言偏好，并且总是会为你选择的语言感到遗憾（谈论他的最爱如何让一切变得更好），那么他将不是你这个角色的最佳选择。

另一方面，如果这不一定是项目的主要开发人员，则可能还有其他选择。一个称职的 PHP 开发人员完全有可能介入并协助 Java 项目，反之亦然。具有良好通用技能的强大开发人员将在许多方面优于普通 PHP 开发人员。与往常一样，那里的挑战在于评估他们的技能以及他们是否能够快速适应新平台。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-04-22T05:20:01.147

这些高级语言的棘手部分是“类库”，需要一些时间才能使用您可以使用的“内置”函数。（你不想重新发明轮子）。

但是如果你只看它本身的语言，因为大多数语言在某种程度上是相互关联的，一个懂 5 种以上语言的人比一个只懂一种语言的人更有优势。

如果您将其归结为招聘，那么问题是您打算保留程序员多长时间？他是为了快速工作，比如说 2-3 个月，还是你雇佣一个你想保留 3 年以上的新程序员？

从长远来看，多语言的人可能会更好，但如果他不知道这种特定的语言，他需要一些时间才能加快速度......

/约翰

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-04-22T05:01:38.727

同意，一个好的程序员可以在语言之间转换。

但是，无论你多么优秀，一种新的语言/范式/思维方式都需要一些时间来适应。如果我正在招聘一名 Java 开发人员。并且有一个“聪明并且把事情做好”的 c++ 开发人员，考虑到“熟悉”和“高效”是两件不同的事情，我必须有一个非常令人信服的理由来雇用他/她而不是具有 Java 经验的人。

简而言之，如果我需要一个前辈，有相关经验的人胜过熟悉语法的人。少年，也许那时还有一些余地。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-04-22T04:59:18.047

我想在这里的其他答案中添加一个警告，虽然编程技能很有价值并且可以转移，但人力资源部门可能会因为你的简历上没有“正确”的东西而丢弃你的简历。如果你然后通过在简历中加入一种你还没有准备好回答面试问题的语言来解决这个问题，你可能不会给面试你的人留下深刻印象。这是第 22 条规则，在某些公司招聘时存在相当大的问题，这对公司、想要在那里工作的人和已经在那里工作的人来说都很糟糕。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-04-22T05:01:13.393

我想说，一般来说，成为一名优秀的 PHP 程序员意味着如果你花时间学习它，你就有很大的机会成为一名优秀的 ASP.NET 程序员。会编程是一种天赋，学习一门语言主要是训练。话虽如此，我相信不仅仅是熟悉该语言的语法。一个好的程序员应该对可用的框架、库、特定语言的实践等有很好的理解。一个 ASP 程序员可以在阅读一本好的 PHP 书籍后编写 PHP 代码。但是为了成为一名优秀的 PHP 程序员，需要更深入的了解，而这种了解主要来自经验。

所以，这一切都归结为 - 一个好的程序员可能可以学习大多数语言。问题是，你愿意为让他成为一名经验丰富的程序员而付出代价吗？

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2009-04-22T06:00:33.673

这些技能很容易转移，但是让一个人擅长特定语言而不是仅仅擅长它的原因在于他们对该语言的怪癖有深入的了解。

每种语言都有其奇怪的习语，只有在使用该语言一段时间后才能学会。精通另一种类似的语言确实对此毫无帮助。

即使对于熟悉 ASP.NET 的人来说，当他们第一次切换到 PHP 时，他们仍然需要克服一个实质性的“WTF”阶段，在此期间他们会产生一些漂亮的东西讨厌的代码。它可能是工作代码，但不容易维护，并且可能不会很好地与项目的其余部分集成。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-05-04T22:35:49.777

一方面，编程技能与语言无关。编程基本上是解决问题。您需要知道如何识别问题、分析问题并将其分解为基本组成部分，并设计解决方案（无论是通过算法、数据结构，还是通常两者兼而有之）。每种语言都只是您用来构建解决方案的工具箱。有些，如 Java 和 C#，使用起来更简单，但工具更简单，因此您很少能根据自己的需要微调解决方案。C 是最灵活和最强大的语言（在汇编程序之外）。它为您提供了几乎完全按照您想做的事情的权力和自由——包括大规模滥用（当然是故意的）违反其（非强制执行的）规则。但是它的工具箱里装满了很多非常锋利的工具，

关于这次谈话有一件事情让我担心，那就是有大量的人只使用高度抽象的语言（如 Java、C# 和任何脚本化的 Web 语言（立即想到 Python））进行编程。在我 37 年的编码生涯中，我已经用两种语言（如果不是更多的话）进行了很好的编程。

确实，每种新语言都有一条学习曲线，从语法、语义、库和特性开始。但是，这里还有一个我没有看到的问题。

今天，大多数程序员几乎都只接受过高级、高度抽象的语言的培训，根本不知道他们的代码在幕后实际上要做什么。你正在与一个完全陌生的“大脑”进行交流，它同时非常愚蠢，并且通过将数百万甚至数十亿的简单操作组合在一起并以几乎难以想象的高速运行它们的能力，可以模拟出虚拟的光彩。

与我一起工作的程序员从未以汇编语言、C 甚至 C++ 为基础，但他们只考虑 Java、C# 等级别的编程，最终完全不了解他们正在编写的漂亮代码是什么实际上会做什么，以及他们在如何使用语言方面做出的选择的优势和（通常是可怕的）后果是什么。

您需要一些可以将您带入低级语言的经验 - 特别是在没有 GUI 层的命令行 DOS 或 Unix 上 - 例如，在保护模式操作系统将程序员与编码裸机和处理端口、内存隔离之前地址、中断地址表、寄存器以及机器实际执行的基本操作码和操作数。

我会给你一个例子来说明我在说什么。有多少 Java 程序员曾经像这样初始化过 StringBuilder 或 StringBuffer？

```
StringBuffer strBuf = new StringBuffer(); 
```

然后继续对其进行十几个 .append() 操作？特别是在执行数千甚至数百万次的循环中。一般的 Java 程序员不知道的是，默认构造函数会创建一个 16 字节的内部缓冲区。作为每个 strBuf.append(str); 增加 StringBuffer 内容的长度，它被迫分配一个新的更大的内存块，将现有内容复制到内存中，追加新字符串，然后为 gc 标记旧缓冲区。这最终会导致大量不必要的分配、副本和必须 gc'd 的范围外内存碎片。

如果您在循环外部定义 StringBuffer 并使用构造函数为其提供一个足够大的初始缓冲区大小以处理任何预期的最终长度，您分配一个内存块而不必执行所有这些数千或数以百万计的不必要的重新分配、副本和 gc。

```
StringBuffer fixedStrBuf = new StringBuffer(1024); 
```

然后，循环中的每个 .append() 仅将新字符串复制到同一缓冲区中的现有字符串上。完成并使用 fixedStrBuf.toString() 检索内容后，只需调用 fixedStrBuf.setLength(0); 它使缓冲区本身完好无损，但重新初始化它以再次使用。您还可以在每个循环的顶部执行 setLength(0) 调用。只要确保 StringBuffer 对象在您退出持续重用它的处理循环后立即超出范围，或者至少在您完成它时为其分配一个 NULL 值，这样它就可以在什么时候被 gc'd不再需要它。

顺便说一句，StringBuilder 比 StringBuffer 快，如果您不需要使代码线程安全，则首选。此外，您可以通过使用 Apache Commons 方法获得更高的速度和灵活性（以及对意外空值的更多保护）：

org.apache.commons.lang.text.StrBuilder；

和 StringBuilder 一样，它不是同步的，所以要小心使用它，但它至少还有十几个其他有用的方法，包括 .clear()，它的作用与 .setLength(0) 相同，但使代码多一点可读。

几年前，一家大型运输公司的明星 Java 程序员（他在 Penn 的班级中排名前 10%，并且在 Brainbench 测试中名列前茅）编写了一个应该获取数据的 ETL（数据挖掘）程序后，我被一家大型运输公司叫来。它在一夜之间出现，对其进行一些重大转换，并创建一个临时数据集市，高级工程师可以从中调用他们一天工作所需的图表、网格和报告。不幸的是，他的程序运行时间在 300 到 360 分钟（5 到 6 小时）之间，而工程师们已经落后了半天，因为他们要到午餐时间才能获得决策支持数据。我花了两周时间分析和重构程序，并且在没有进行任何重大重写的情况下，将运行时间缩短到 15 到 20 分钟。在那个节目中，在该语言的许多其他误用中（就语法和语义而言都是正确的），程序员实际上使用了上面的 StringBuffer()，每次循环大约有十几个附加，循环运行超过一百万次，创建了1500 万个不必要的分配、复制和删除。而且，这只是一行代码。我可以写一本书，讲述程序员不知道他美丽但效率极低的 Java 代码的低级后果的所有方式。

所以，我的建议是，与其尝试将 Ruby 或 Python 或任何新的热门抽象语言添加到您的曲目中，不如花几个月的空闲时间，学习 C（C99 甚至更早的语言 - 不要担心尝试赶上几乎没有人使用的全新 C11 标准），并获得 Gayle Laakmann 的名为“Cracking the Coding Interview”的书，其中包含 150 个您可能会遇到的小型编码练习在技​​术面试期间被要求在白板上编码。它们都可以用 C、C++ 和 Java 来解决（他在本书的最后用 Java 给出了答案，因为它被更广泛地理解，尽管 C 会提供更简单和更优雅的解决方案）。在学习的同时用 C 语言完成它们，您将学到大量关于什么是好的 Java 编程和坏的 Java 编程的知识。PS 找到几个好的 C 引物 - 尝试从原始 K&R（Kernighan 和 Ritchie）手册中学习 C 就像忍受两天的根管治疗一样。如果你读过 K&R，至少要找到第二版。H & S (Harbison & Steel) 是一本更清晰的教学手册。

顺便说一句，运行 Java p 代码的 JVM 是用 C 或 C++ 编写的。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-04-22T04:55:17.993

那要看。如果某人具有强大的技术背景、才能和热情，那么学习一门新的语言或领域应该是相当容易的。我的意思是这就是计算机科学的全部意义——事情每天都在变化，每个优秀的程序员都应该能够适应。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-04-22T05:02:38.727

只要转移是在相同范式的编程语言之间转移，我认为它很容易转移。将 C 程序员转换为 Java 程序员是相当困难的，我认识的很多老师在学习 java 时更喜欢没有任何背景的学生，而不是具有“C”类型背景的学生。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-04-22T05:04:56.287

PHP 和 ASP.NET 可能相似，但 PHP 和 C# 非常不同，如果您使用 C#3，那么学习曲线非常陡峭。如果程序员可以只做前端工作，那没什么大不了的。

现在，知识在语言之间的可转移性是不同的，因为这取决于语言是否是相同类型的编程（结构、功能、面向对象）。例如，一个出色的 C 程序员可能不会将他的知识转移到 OOP 或 FP，因为处理设计的方式是如此不同。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-04-22T12:00:54.257

错误的问题，我想。这就是框架之间编程技能的可转移性。asp 经典开发人员和 jsp 开发人员可能可以互相读写代码。Java Server Faces 和 ASP.NET 也是如此。从我当前的项目中我知道，C# winforms 开发人员可能很难将他的才能转移到 C# ASP.NET 项目中。语法只是主流编程语言的一小部分（我不包括像 Prolog 和 F# 这样的怪人，它们的代码方法与花括号语言系列完全不同）

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-04-22T12:52:26.537

塑造我对任何技术（/平台/产品/语言）态度的一件事是学习体验的具体程度。我的同事在 MS Access 方面知识渊博，并且多年来构建了各种各样的定制业务系统（质量参差不齐）。但尽管如此，他们对 sql 几乎一无所知。如果他们花了三个月的时间维护一个小型 PHP/MySQL 站点，那么他们将处于一个更好的位置（在技能方面），至少可以开始研究 Informix/Sybase/SQL Server/etc 系统。

超过某个点，尽管学习新技术的成本可能会下降。在 PHP/VBscript 之间切换我发现在学习这两种语言时非常烦人，因为对约定的简单更改（例如使用“;”）增加了学习过程中不需要的额外烦恼。最近，我不得不在 C#、Perl 和 VBScript 之间切换很多次，但这不是问题——您无需考虑就遵循每种语法的规则。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-04-22T05:21:48.303

如果您在编程方面接受过良好的教育，是的。我的意思是你已经做了很多编程，了解了 cpu 在低级别做什么，了解算法和运行时复杂性，并且擅长解决问题。

我认为有些语言的学习曲线仍然很长。您可能无需任何经验就可以加入一个 C++ 程序员团队并帮助他们，但您肯定会经常与它的黑暗丑陋的角落发生冲突。

像 sql 或 python 这样的高级语言可能看起来很容易上手，但有多年经验的人会理解表面上不明显的技巧、未记录的功能和坑。

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2020-10-12T13:38:36.560

这些技能很容易转移，但是让一个人擅长特定语言而不是仅仅擅长它的原因在于他们对该语言的怪癖有深入的了解。每种语言都有其奇怪的习语，只有在使用该语言一段时间后才能学会。

# c# - 请确认或更正我对此 Haskell 代码片段的“英文解释”

> ID：775730
> 
> 赞同：14
> 
> 时间：2009-04-22T04:48:41.677
> 
> 标签：c#, haskell, types, f#, algebraic-data-types

我是一名 C# 开发人员，正在通过[“Real World Haskell”](http://book.realworldhaskell.org/)工作以真正理解函数式编程，因此当我学习 F# 时，我会真正了解它，而不仅仅是“用 F# 编写 C# 代码”，可以这么说.

好吧，今天我遇到了一个例子，我以为我理解了 3 次不同的时间，然后才看到我错过的东西，更新我的解释，然后递归（相信我，还有诅咒）。

现在我相信我确实明白了，我在下面写了详细的“英文解释”。您能否请Haskell大师确认理解，或指出我错过了什么？

注意：Haskell 代码片段（直接从书中引用）定义了一个自定义类型，该类型与内置的 Haskell 列表类型同构。

**Haskell 代码片段**

```
data List a = Cons a (List a)
              | Nil
              defining Show 
```

***编辑：经过一些回复，我看到了我犯的一个误解，但对纠正该错误的 Haskell“解析”规则不太清楚。所以我在下面包含了我原来的（不正确的）解释，然后是更正，然后是我仍然不清楚的问题。***

**编辑：这是我对片段的原始（不正确）“英文解释”**

1.  我正在定义一种名为“List”的类型。
2.  List 类型是参数化的。它有一个类型参数。
3.  有 2 个值构造函数可用于创建 List 的实例。一个值构造函数称为“Nil”，另一个值构造函数称为“Cons”。
4.  如果您使用“Nil”值构造函数，则没有字段。
5.  “Cons”值构造函数有一个类型参数。
6.  如果您使用“Cons”值构造函数，则必须提供 2 个字段。第一个必填字段是 List 的一个实例。第二个必填字段是 a 的实例。
7.  （我故意省略了关于“定义表演”的任何内容，因为它不是我现在想要关注的一部分）。

**更正后的解释如下（以粗体表示的变化）**

8.  我正在定义一种名为“List”的类型。
9.  List 类型是参数化的。它有一个类型参数。
10.  有 2 个值构造函数可用于创建 List 的实例。一个值构造函数称为“Nil”，另一个值构造函数称为“Cons”。
11.  如果您使用“Nil”值构造函数，则没有字段。

    **5.（此行已被删除......它不准确）“Cons”值构造函数具有单个类型参数。**

12.  **如果您使用“Cons”值构造函数，则必须提供 2 个字段。第一个必填字段是 a 的实例。第二个必填字段是“List-of-a”的一个实例。**

13.  （我故意省略了关于“定义表演”的任何内容，因为它不是我现在想要关注的一部分）。

**仍然不清楚的问题**

最初的困惑是关于片段中“Cons a (List a)”的部分。事实上，这是我仍然不清楚的部分。

人们已经指出，“Cons”标记之后的行上的每个项目都是一个*类型*，而不是一个值。所以这意味着这一行说“Cons 值构造函数有 2 个字段：一个是 'a' 类型，另一个是 'list-of-a' 类型。”

知道这一点很有帮助。但是，仍有一些不清楚的地方。当我使用 Cons 值构造函数创建实例时，这些实例将第一个“a”“解释”为“将传入的值放在此处”。但他们*不会*以同样的方式解释第二个“a”。

例如，考虑这个 GHCI 会话：

```
*Main> Cons 0 Nil
Cons 0 Nil
*Main> Cons 1 it
Cons 1 (Cons 0 Nil)
*Main> 
```

当我键入“Cons 0 Nil”时，它使用“Cons”值构造函数来创建 List 的实例。从 0 开始，它得知类型参数是“Integer”。到目前为止，没有混淆。

但是，它*也*确定了 Cons 的第一个字段的值为 0。但它不确定*第二**个*字段的*值*……它仅确定第二个字段的*类型*为“List Integer”。

所以我的问题是，为什么第一个字段中的“a”表示“这个字段的类型是'a' *，*这个字段的值是'a'”，而第二个字段中的“a”*只*表示“类型这个字段是'List of a'”？

**编辑：我相信我现在已经看到了曙光，这要归功于一些回应。让我在这里表达一下。（如果以某种方式*仍然*不正确，请务必让我知道！）**

在片段“Cons a (List a)”中，我们说“Cons”值构造函数有两个字段，第一个字段的类型为“a”，第二个字段的类型为“List of a” '。

**这就是我们所说的！**特别是，我们对价值观*只字未提！*这是我错过的一个关键点。

稍后，我们要创建一个实例，使用“Cons”值构造函数。我们在解释器中输入：“Cons 0 Nil”。这**明确地**告诉 Cons 值构造函数使用 0 作为第一个字段的值，并使用 Nil 作为第二个字段的值。

这就是它的全部。一旦您知道 value 构造函数定义只指定*types*，一切都会变得清晰。

感谢大家的有用回复。正如我所说，如果还有什么问题，请务必告诉我。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-22T05:04:49.843

> *   “Cons”值构造函数有一个类型参数。

不：当您声明`data List a`. 一个有效的属性是，如果我有一个 Nil :: List Int，我不能将它与 Nil :: List Char 互换。

> *   如果您使用“Cons”值构造函数，则必须提供 2 个字段。第一个必填字段是 List 的一个实例。第二个必填字段是 a 的实例。

你已经把它交换了：第一个必填字段是 a 的实例，第二个字段是 List 的实例。

[Real World Haskell 的这一章](http://book.realworldhaskell.org/read/defining-types-streamlining-functions.html)可能很有趣。

> 谢谢。这就是我现在正在读的那一章。所以......当代码显示“Cons a (List a)”时，我认为其中的“Cons a”部分说明 Cons 值构造函数已参数化。他们还没有涵盖参数化类型的语法，所以我猜如果你打算使用 a，语法必须要求重新声明“a”。但你是说没必要？因此，这不是“a”的意思吗？

没有。一旦我们在我们的类型中声明了一个参数，我们就可以重用它，否则就说“应该在那里使用那个类型”。它有点像`a -> b -> a`类型签名：a 是对类型进行参数化，但是我必须使用与返回值相同的 a。

> 好的，但这令人困惑。似乎第一个“a”的意思是“第一个字段是a的一个实例”，

不，那*不是*真的。它只是意味着数据类型参数化了某个类型 a。

> 它还意味着“第一个字段的值与它们为 a 传入的值相同”。换句话说，它指定类型 AND 值。

不，这也不是真的。

这是一个有启发性的示例，您以前可能见过也可能没见过它的语法：

```
foo :: Num a => a -> a
```

这是一个相当标准的函数签名，它接受一个数字并对它做一些事情并给你另一个数字。不过，我在 Haskell 中所说的“数字”实际上是指实现“Num”类的任意类型“a”。

因此，这会解析为英语：

> 设a表示实现了Num类型类的类型，则该方法的签名是一个类型为a的参数，返回值为a类型

数据也会发生类似的事情。

我还想到 Cons 规范中 List 的实例也让你感到困惑：解析时要非常小心：而 Cons 正在指定一个构造函数，这基本上是 Haskell 将数据包装成的模式，（ List a) 看起来像一个构造函数，但实际上只是一个类型，如 Int 或 Double。a 是一种类型，而不是任何意义上的值。

**编辑：**响应最近的编辑。

我认为首先需要进行解剖。然后我会逐点处理你的问题。

Haskell 数据构造函数有点奇怪，因为你定义了构造函数签名，而且你不需要做任何其他的脚手架。Haskell 中的数据类型没有任何成员变量的概念。（注意：有一种替代语法更适合这种思维方式，但现在让我们忽略它）。

另一件事是 Haskell 代码很密集。它的类型签名就是这样。所以希望看到在不同的上下文中重复使用相同的符号。类型推断在这里也起着重要作用。

所以，回到你的类型：

```
数据列表 a = 缺点 a (列表 a)
              | 零
```

我把它分成几块：

```
数据列表
```

这定义了类型的名称，以及它稍后将具有的任何参数化类型。请注意，您只会在其他类型签名中看到这一点。

```
缺点a (列表 a) |
零
```

这是数据构造函数的名称。**这不是一个类型**。但是，我们可以对其进行模式匹配，ala：

```
foo :: List a -> Bool
foo 无 = 真
```

注意 List a 是签名中的类型，而 Nil 既是数据构造函数又是我们模式匹配的“事物”。

```
缺点a（列表 a）
```

这些是我们插入构造函数的值的类型。Cons 有两个条目，一个是 a 类型，一个是 List a 类型。

> 所以我的问题是，为什么第一个字段中的“a”表示“这个字段的类型是'a'，这个字段的值是'a'”，而第二个字段中的“a”只表示“类型这个字段是'List of a'”？

简单：不要把它当成我们指定类型；想想它有 Haskell 正在推断它的类型。因此，出于我们的意图和目的，我们只是在其中添加一个 0，在第二部分添加一个 Nil。然后，Haskell 查看我们的代码并认为：

*   嗯，我想知道 Cons 0 Nil 的类型是什么
*   好吧，Cons 是 List a 的数据构造函数。我想知道 List a 的类型是什么
*   嗯，第一个参数中使用了a，所以因为第一个参数是一个Int（另一个简化；0实际上是一个奇怪的东西，被类型分类为Num），所以这意味着a是一个Num
*   嘿，好吧，这也意味着 Nil 的类型是 List Int，尽管实际上并没有任何东西可以这么说

（注意，这实际上并不是它的实现方式。Haskell 在推断类型时可以做很多奇怪的事情，这就是错误消息很糟糕的部分原因。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-22T20:49:34.330

通常在各种方面都缺乏类比，但既然你知道 C#，我认为这可能会有所帮助。

这就是我`List a`在 C# 中描述定义的方式，也许这可以澄清一些事情（或者更有可能让你更加困惑）。

```
class List<A>
{
}

class Nil<A> : List<A>
{
    public Nil() {}
}

class Cons<A> : List<A>
{
    public A Head;
    public List<A> Tail;

    public Cons(A head, List<A> tail)
    {
        this.Head = head;
        this.Tail = tail;
    }
} 
```

如你看到的;

*   该`List`类型有一个类型参数 ( `<A>`)，
*   `Nil`构造函数没有任何参数，
*   并且`Cons`构造函数有两个参数，一个`head`类型`A`的值和一个`tail`类型的值`List<A>`。

现在，在 Haskell 中`Nil`and`Cons`只是`List a`数据类型的构造函数，在 C# 中它们本身也是类型，所以这就是类比失败的地方。

但我希望这能让您直观地了解不同`A`的 ' 代表什么。

（请评论一下这种可怕的比较如何不公平地对待 Haskell 的数据类型。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-22T05:11:27.317

```
Cons a (List a) 
```

Cons 的第一个字段是“ `a`”类型的值。第二个是“ `List a`”类型的值，即与当前列表的参数类型相同的参数化列表。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-22T06:23:02.993

5 是错误的，我会说 6 如下替换两者：

Cons{1} a{2} (List a){3} 是一个名为 Cons 的构造函数（{1} 之前的部分），用于 List a 类型的值（数据 List a 部分），它需要两个值：一个是 a 类型（{1} 和 {2} 之间的部分）和 List a 类型之一（{2} 和 {3} 之间的部分）。

为了帮助您解决明显的混淆来源：在 Haskell 中，您几乎不必提供显式类型参数 - 类型推断从您的值推断类型。所以从某种意义上说，是的，当您将值传递给函数或构造函数时，您还指定了一个类型，即。传入值的类型。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-22T14:58:31.443

是的，数据语法有点令人困惑，因为它对名称和类型进行了双关语，并没有真正区分它们之间的*语法*区别。特别是，在构造函数定义中，例如：

```
Cons a (List a) 
```

第一个词是构造函数的名称；其他每个单词都是一些预先声明的类型的名称。所以两者`a`和`List a`都已经在范围内（`a`由`a`in " `data List a`" 引入范围），你说这些是参数的类型。*通过使用记录语法*说明相同的内容，可以更好地证明它们的作用：

```
Cons { headL :: a, tailL :: List a } 
```

即 type 的值`List Int`，*如果*它是使用构造`Cons`函数构造的，则具有两个字段： an`Int`和 a `List Int`。如果它是用 构造的`Nil`，则它没有字段。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-22T18:19:50.773

> 当我键入 " `Cons 0 Nil`" 时，它使用 " `Cons`" 值构造函数来创建 List 的实例。从 0 得知类型参数为“ `Integer`”。到目前为止，没有混淆。
> 
> 但是，它也确定了 Cons 的第一个字段的值为 0。但它不确定第二个字段的值……它仅确定第二个字段的类型为“List Integer”。

不，它确定第二个字段的值为`Nil`。给定您的定义，`Nil`是 type 的值`List a`。因此也是如此`Cons 0 Nil`。而在`Cons 1 it`第二个字段的值为`it`; 即，`Cons 0 Nil`。这正是 REPL 显示的内容： `Cons 1 (Cons 0 Nil)`.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-22T22:39:33.787

我看了你编辑的问题。

> 当我使用 Cons 值构造函数创建实例时，这些实例将第一个“a”“解释”为“将传入的值放在此处。

在“Cons a (List a)”中，“a”和“List a”都是类型。我不明白“价值”与它有什么关系。

> 当我键入“Cons 0 Nil”时，它使用“Cons”值构造函数来创建 List 的实例。从 0 开始，它得知类型参数是“Integer”。到目前为止，没有混淆。
> 
> 但是，它也确定了 Cons 的第一个字段的值为 0。但它不确定第二个字段的值……它仅确定第二个字段的类型为“List Integer”。

第二个字段的值为`Nil`。

> 所以我的问题是，为什么第一个字段中的“a”表示“这个字段的类型是'a'，这个字段的值是'a'”，而第二个字段中的“a”只表示“类型这个字段是'List of a'”？

第一个字段中的“a”表示“该字段的类型是'a'”。第二个字段中的“List a”表示“该字段的类型是'List a'”。在上述“Cons 0 Nil”的情况下，“a”被推断为“整数”。所以“Cons a (List a)”变成了“Cons Integer (List Integer)”。0 是整数类型的值。Nil 是“List Integer”类型的值。

> 该字段的值为'a'

我不明白你这是什么意思。'a' 是一个类型变量；它与价值观有什么关系？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-07-09T23:03:06.777

只是为了给你一些额外的“帮助”，以防你还在看这个帖子。Haskell 有几个约定会打乱其他人对事情应该如何做的想法——在 Haskell 中，参数化类型是如此普遍接受，以至于它通常被认为是一个类型级别的函数。同样，值构造函数被认为是“特殊”函数，除了它们“获取一个值（或更多）并产生一个值作为结果”之外，它们还允许模式匹配。

Haskell 的另一个“有趣”特性是它不会显式（或隐式）评估函数的参数，**即使该参数在括号中**。让我稍微不同地说明一下：Haskell 函数不会在其他参数之前评估括号中的参数。将参数放在括号中仅用于分组目的，而不是让它们“首先”评估。Haskell 以比任何其他操作更高的优先级将参数分配给（“应用”）函数 - 甚至高于其自身参数之一的隐式函数应用程序。这就是为什么`Cons`构造函数在第二个参数周围有括号，`(List a)`- 告诉编译器`Cons`有两个参数，而不是*三个*. 括号仅用于分组，而不用于优先级！

作为一个附带主题，请注意 F# 中的类型。由于 F# 起源于 ML，因此其参数化类型的参数在前面 - `int list`，而不是 ( `List Int`) 在后面！Haskell 以另一种方式处理，因为它与 Haskell 处理函数的方式相同——首先是函数，然后是函数的参数。这鼓励了一种常见的使用模式，并解释了为什么 Haskell 类型和值构造函数都是大写的——提醒您正在处理与类型/类相关的事情。

好的，我完成了；谢谢你让我把这个巨大的 Wall O' Text 放在你的财产上......

# java - Java中是否有一些库可以压缩PNG图像，例如pngout？

> ID：775732
> 
> 赞同：2
> 
> 时间：2009-04-22T04:48:51.393
> 
> 标签：java, png-8

Java中是否有一些库可以压缩用C/C++编写的png图像，如pngout、pngcrush、optipng？

继续 Phil 在下面评论的内容，我的意思是通过删除不需要的信息来减小 Java 中 ImageIO 类生成的图像的文件大小，就像 pngout 所做的一样。当我对 ImageIO 类生成的图像运行 pngout 时，我能够减少大约 50% 的文件大小（减少的大小会因图像而异）。所以我想知道是否有任何工具或库可以与 Java 接口，以便生成 ImageIO 类的图像文件可以减小它们的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T04:59:30.323

您可以从 Java 调用可执行文件来完成这项工作，或者您可以使用 SWIG 包装库并从 Java 调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T07:00:40.640

[JMagick为](http://www.jmagick.org)[ImageMagick](http://www.imagemagick.org/index.php)提供了一个面向对象的 Java 接口。

> ImageMagick® 是一个用于创建、编辑和合成位图图像的软件套件。它可以读取、转换和写入各种格式（超过 100 种）的图像，包括 DPX、EXR、GIF、JPEG、JPEG-2000、PDF、PhotoCD、PNG、Postscript、SVG 和 TIFF。使用 ImageMagick 可以平移、翻转、镜像、旋转、缩放、剪切和变换图像，调整图像颜色，应用各种特殊效果，或绘制文本、线条、多边形、椭圆和贝塞尔曲线。

# sql-server-2008 - Eval 去除 SQL DateTime 字段的时间段

> ID：775739
> 
> 赞同：0
> 
> 时间：2009-04-22T04:53:21.853
> 
> 标签：sql-server-2008, datetime, .net-3.5, eval

本来打算称之为“Eval 不会给我时间”，但觉得这太可爱了。

我遇到的问题与我看到的标题建议的问题相反，所以这里是：

Visual Studio 2008 专业版、SQL Express 2008、Vista。Web 项目，我在其中使用设施表中的 JOINed 信息打开事件表中的记录。

我在一个完全填写的 SQL 文件中有一个 SQL DateTime 字段：例如，4/30/2009 6:30 PM。

我在 ListView 中的字段是直的`<%# Eval("EventDate") %>`，据我通过从 SQLDataSource 检索观察 Autos 窗口可以看出，我的跟踪在一天中的下午 6:30 时完好无损。

据我所知，填充 DataSource 之后的唯一指令是 Eval 本身。

然而，在渲染时，该日期时间在页面上显示为 4/30/2009 **12:00:00 AM**。

因此，我坚信我需要额外的 fu 来解析我的 Eval 语句，以获得我投入该领域的时间。我还不太擅长这个，所以欢迎提出建议。先感谢您。

编辑：为每个 Jose 提供代码。

数据源：

`<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:MeetingsConnectionString %>" onselecting="SqlDataSource1_Selecting" SelectCommand="SELECT Events.ID, Events.FacilityID, Events.Room, Events.EventDate, Events.Speaker, Events.Topic, Facilities.ID AS Expr1, Facilities.FacilityName, Facilities.FacilityAddress, Facilities.FacilityCity, Facilities.FacilityState, Facilities.FacilityZip, Facilities.FacilityLat, Facilities.FacilityLong FROM Events INNER JOIN Facilities ON Events.FacilityID = Facilities.ID WHERE (Events.EventDate BETWEEN @EventDate AND @EventDate2) ORDER BY Events.EventDate" ProviderName="System.Data.SqlClient"> <SelectParameters> <asp:Parameter Name="EventDate" /> <asp:Parameter Name="EventDate2" /> </SelectParameters> </asp:SqlDataSource>`

列表显示：

`<asp:ListView ID="ListView1" runat="server" DataSourceID="SqlDataSource1" DataKeyNames="ID,Expr1"> <AlternatingItemTemplate> When:<asp:Label ID="EventDateLabel" runat="server" Text='<%# Eval("EventDate") %>' />`

... `<ItemTemplate> When: <asp:Label ID="EventDateLabel" runat="server" Text='<%# Eval("EventDate") %>' /><br />`

编辑2：我通过将EventDate分为EventDate（一个日期）和EventTime（一个时间）来解决这个问题。我现在得到了正确的值，并继续使用 CONVERT 或 CAST 在 SQL 查询中将时间值从军用时间转换为民用时间（即下午 6:30）。感谢您的所有回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T05:55:14.947

Sql server 有一个新类型 date，如果你将 datetime 转换为 datelike 就会这样做： select convert(datetime, convert (date, '4/30/2009 6:30 PM'))

也许您在某处指定了错误的类型？

# sql-server - 虚拟化数据库服务器还是 Web 服务器？

> ID：775755
> 
> 赞同：0
> 
> 时间：2009-04-22T05:01:12.177
> 
> 标签：sql-server, database, web-applications

在具有 1 个应用服务器 (IIS) 和 1 个数据库服务器 (MSSQL) 的 Web 应用程序架构中，如果您必须选择一个服务器在 VM 中进行虚拟化，它会是：Web 还是 db？

一般来说，当然。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T05:41:50.427

当然是网络。

数据库需要太多的 IO 带宽 + 将实例或数据库添加到单个实例更容易，而隔离的 Web 服务器受益更多。

类似的问题... [“在 VMWare 上运行 Sharepoint 2003？”](https://stackoverflow.com/questions/733905/run-sharepoint-2003-on-vmware/734134#734134) . Sharepoint 只是一个带有 SQL Server 后端的 asp.net 应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T06:41:44.430

大多数虚拟环境的缺点是 I/O，尤其是磁盘。SQL 是 I/O 密集型的。我正在使用共享虚拟主机，而缓慢的 I/O 正在杀死我。

也就是说，微软正在 Hyper-V 上推动 SQL。它是一个虚拟机管理程序，这意味着它在 VM 和硬件之间有一个更薄的层，并且驱动程序是准原生的。这是他们的白皮书：http: [//download.microsoft.com/download/d/9/4/d948f981-926e-40fa-a026-5bfcf076d9b9/SQL2008inHyperV2008.docx](http://download.microsoft.com/download/d/9/4/d948f981-926e-40fa-a026-5bfcf076d9b9/SQL2008inHyperV2008.docx)

看起来对于 SQL，您将损失约 10% 的整体性能。好处是您可以快速将整个实例移动到另一个盒子，增加 RAM 等。

要考虑的另一件事是英特尔的企业级 SSD 驱动器 (X25-E)。我想这在虚拟环境中会有很大帮助。昂贵的，当然。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T05:08:16.123

我可能会根据应用服务器所需的计算量与数据库完成的计算量/io 量来决定。

话虽如此，我认为大多数时候数据库不应该被虚拟化。对于必须确保数据在磁盘上保持良好和安全的数据库来说，虚拟化并不太热，而添加另一个抽象层对此无济于事。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-22T05:08:54.810

如果您有两台物理服务器，则无需虚拟化 - 一台服务器用于 IIS，另一台用于数据库。

如果您有一台物理服务器，则也无需虚拟化。

如果我必须选择，那将是 Web 服务器。通过在物理服务器上运行，数据库将在性能方面受益。如果 Web 服务器是虚拟化的，则可以快速轻松地克隆它以创建 Web 服务器集群。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-22T05:35:15.153

借助当今的虚拟机管理程序和最佳实践，您可以虚拟化这两种基础架构。当您虚拟化您的数据库基础架构时，最好确保将数据库安装到基于 SAN 的系统上，这样 IO 性能就不会成为瓶颈。

与所有事情一样，做事方式也有正确和错误，但遵循供应商的最佳实践和测试将使您能够从 VM 实例中获得最佳性能。

如果您想虚拟化您的整个基础架构，有很多来自不同供应商的白皮书和性能测试。

尽管虚拟化再次成为行业热门话题，各种供应商现在免费提供虚拟机管理程序，但这并不意味着使用虚拟化是前进的方向。服务器整合是的，可能会提高性能 - YMMV

# php - PHP转换日期格式

> ID：775758
> 
> 赞同：0
> 
> 时间：2009-04-22T05:01:18.557
> 
> 标签：php, mysql, datetime

> ## 复制
> 
> *   [管理 PHP 和 MySQL 之间的日期格式差异](https://stackoverflow.com/questions/415092/managing-date-formats-differences-between-php-and-mysql)
> *   [PHP/MySQL：从 YYYY-MM-DD 转换为 DD 月，YYYY？](https://stackoverflow.com/questions/744010/php-mysql-convert-from-yyyy-mm-dd-to-dd-month-yyyy)
> *   [打印后使用 PHP 格式化 DATETIME 列](https://stackoverflow.com/questions/668735/format-datetime-column-using-php-after-printing)
> *   [php中的日期格式](https://stackoverflow.com/questions/638011/date-formatting-in-php/638022)

各位，

我有一个 PHP 页面，我将在其中显示来自 Mysql db 的一些数据。我有 2 个日期要显示在此页面上。在我的 db 表中，日期 1 的格式为 d/m/Y（例如：2002 年 11 月 11 日），日期 2 的格式为 dmY（例如：11-11- 2002) 我需要以相同的格式显示这两者。我存储在变量 $dateFormat='m/d/Y' 中的格式

谁能指导我

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-22T05:10:23.840

用于`strtotime`将字符串转换为 Unix 时间戳，然后使用该`date`函数生成正确的输出格式。

由于您使用的是英国日期格式“d/m/Y”，而 strtotime 需要一种美国格式，因此您需要稍微不同地对其进行转换：

```
$date1 = "28/04/2009";
$date2 = "28-04-2009";

function ukStrToTime($str) {
    return strtotime(preg_replace("/^([0-9]{1,2})[\/\. -]+([0-9]{1,2})[\/\. -]+([0-9]{1,4})/", "\\2/\\1/\\3", $str));
}

$date1 = date($dateFormat, ukStrToTime($date1));
$date2 = date($dateFormat, ukStrToTime($date2)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T05:08:03.017

你应该已经准备好了：

```
echo date($dateFormat, strtotime($date1));
echo date($dateFormat, strtotime($date2)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T14:38:47.887

您可能需要查看[strptime](http://au2.php.net/manual/en/function.strptime.php)函数。这可以将字符串中的任何日期转换回数值。与[strtotime](http://au2.php.net/manual/en/function.strtotime.php)不同，它可以适应不同的格式，包括来自不同语言环境的格式，并且它的输出不是 UNIX 时间戳，因此它能够解析 1970 年之前和 2037 年之后的日期。虽然它可能需要更多的工作，因为它返回虽然是一个关联数组。

不幸的是，它在 Windows 系统上也不可用，因此它不可移植。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T05:22:16.557

如果由于某种原因 strtotime 对你不起作用，总是可以用 str_replace 替换有问题的标点符号。

```
function dateFormat($date) {
$newDate = str_replace(/, -, $date);
echo $newDate;
}

echo dateFormat($date1);
echo dateFormat($date2); 
```

我知道这会让大多数人感到畏缩，但它可能会帮助您在将来格式化非日期字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-03-01T07:44:53.563

我是菜鸟。所以想出了这样做的方法。什么 mysql 需要.. shish 我使用了参数 2 ...希望它有帮助。问候

```
public function dateConvert($date,$param){  
     if($param==1){  
         list($day,$month,$year)=split('[/.-]',$date);  
         $date="$year-$month-$day"; //changed this line  
         return $date;  
     }  
     if ($param == 2){ //output conversion  
            list($day,$month,$year) = split('[/.]', $date);  
            $date = "$year-$day-$month";  
            return $date;  
   }  
 } 
```

# c++ - 使用 qmake/gcc 有条件地禁用警告？

> ID：775774
> 
> 赞同：7
> 
> 时间：2009-04-22T05:08:03.657
> 
> 标签：c++, gcc, conditional, compiler-warnings, qmake

我参与了一个用 Qt 编写并在 Linux 上使用 qmake 和 gcc 构建的软件项目。我们必须链接到一个质量相当低并且会发出大量警告的第三方库。我想在我们的源代码上使用 -W -Wall，但是将 -w 传递给讨厌的第三方库以保持控制台没有噪音和混乱，这样我们就可以专注于我们的代码质量。

在 qmake 中，有没有办法有条件地将 CFLAGS/CXXFLAGS 添加到某些文件和库中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-22T07:00:08.117

乔纳森，我认为问题在于您的源文件包含来自 3rd 方库的头文件，并且您想关闭后者的警告。

凯文，我认为你可以使用编译指示来控制警告：[gcc 诊断编译指示](http://gcc.gnu.org/onlinedocs/gcc-4.3.3/gcc/Diagnostic-Pragmas.html#Diagnostic-Pragmas "gcc 诊断编译指示")

您可以在任何#includes 之前和之后为 3rd 方库添加这些。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-06-22T09:30:35.650

如果您使用 -isystem 包含您的库怎么办。

在项目文件中，例如：

```
QMAKE_CXXFLAGS += -isystem /usr/local/boost_1_44_0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T05:52:46.950

通常，您会在与您自己的代码不同的目录中构建第三方库，因此您将拥有不同的 makefile，因此您可以为该编译放置一组不同的标志。

如果您将第三方库代码与您自己的代码混合在一起，那么您已经为维护噩梦做好了准备。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-11-13T15:24:02.693

凯文，

```
qmake CONFIG+=debug QMAKE_CXXFLAGS_WARN_ON=-w QMAKE_CFLAGS_WARN_ON=-w 
```

应该这样做（如果您愿意，请使用 CONFIG+=release...）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-03-24T22:09:19.830

正如马丁所写的那样，通过

```
QMAKE_CXXFLAGS += -isystem ... 
```

仅在相应的标题中禁止警告。无需禁用项目（甚至项目范围内）的任何源文件的警告，也无需混淆 #pragmas 或包装文件。

请注意，如果您使用的是 QtCreator，您仍然需要（即另外）添加目录，`INCLUDEPATH`以便索引器获取标题。

# sql - PLSQL：在单个查询中获取一周中每一天的总和以及一周的总和

> ID：775787
> 
> 赞同：4
> 
> 时间：2009-04-22T05:14:45.077
> 
> 标签：sql, oracle, plsql, group-by, pivot

假设，我有一个表 ClientTrade，如下所示：

```
ClientName , TradeDate , Quantity 
```

我想在 Oracle PLSQL 中创建一个查询，它应该返回如下结果：（天数来自 TradeDate 列，Mon = sum(Quantity) for Mon，Tue = sum(Quantity) for Tue ... 等等。 )

```
ClientName  Mon Tue Wed Thu Fri Sat Sun TotalForWeek
ABC         10  15  5   2   4   0   0   34
XYZ         1   1   2   1   2   0   0   7 
```

假设此报告将始终具有使其运行一周的 where 条件，是否可以在单个查询中创建它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-22T05:10:13.770

稍微简化一下...

```
SELECT ClientName, 
       SUM(CASE WHEN to_char(TradeDate,'DY')='MON' THEN Quantity ELSE NULL END) AS Mon,
       SUM(CASE WHEN to_char(TradeDate,'DY')='TUE' THEN Quantity ELSE NULL END) AS Tue,
       SUM(CASE WHEN to_char(TradeDate,'DY')='WED' THEN Quantity ELSE NULL END) AS Wed,
       SUM(CASE WHEN to_char(TradeDate,'DY')='THU' THEN Quantity ELSE NULL END) AS Thu,
       SUM(CASE WHEN to_char(TradeDate,'DY')='FRI' THEN Quantity ELSE NULL END) AS Fri,
       SUM(CASE WHEN to_char(TradeDate,'DY')='SAT' THEN Quantity ELSE NULL END) AS Sat,
       SUM(CASE WHEN to_char(TradeDate,'DY')='SUN' THEN Quantity ELSE NULL END) AS Sun,
       SUM(Quantity) AS TotalForWeek
FROM  ClientTrade
GROUP BY ClientName 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-22T05:34:34.827

子查询。

```
select ClientName, 
(select sum(b.quantity) 
from table b where b.clientName = a.clientname 
and b.tradedate = [some constant or calculation that identifies monday])  
as Mon,
(select sum(b.quantity) 
from table b where b.clientName = a.clientname 
and b.tradedate = [some constant or calculation that identifies tuesday])  
as Tue,

..etc..
from table a 
```

一种更清洁但可能效率较低的方法涉及带有 group by:ew 的视图

```
create view quantityperday as
select clientname, 
tradedate, 
dayofweek(tradedate) as dow, 
weekofyear(tradedate) as woy, 
year(tradedate) as y,
sum(quantity) as quantity
from table 
group by clientname, tradedate; 
```

然后：

```
select clientname, b.quantity as Mon, c.quantity as Tue ....
from table a join quantityperday b 
on (a.clientname = b.clientname and b.y = '2008'
and b.doy = 2 and b.dow = 'Monday')
quantityperday c 
on (a.clientname = c.clientname and c.y = '2008'
and c.doy = 2 and c.dow = 'Tuesday')
join .... 
```

这变得丑陋的原因是我们将行旋转为列。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-22T05:47:02.707

让我们来看看：

```
SELECT Client, MonSum, TueSum, WedSum, ThuSum, FriSum, SatSum, SunSum, TotSum
    FROM (SELECT ClientName AS Client, SUM(Quantity) AS MonSum
             FROM Trades
             WHERE DayOfWeek(TradeDate) = 'Monday'
               AND TradeDate BETWEEN DATE '..Monday..' AND DATE '..Sunday..'
             GROUP BY ClientName
         ) AS MonData
         JOIN
         (SELECT ClientName AS Client, SUM(Quantity) AS TueSum ...
         ) AS TueData ON Mondata.Client = TueData.Client
         JOIN
         ...
         (SELECT ClientName AS Client, SUM(Quantity) AS TotSum
             FROM Trades
             WHERE TradeDate BETWEEN DATE '..Monday..' AND DATE '..Sunday..'
             GROUP BY ClientName
         ) AS TotData ON MonData.Client = TotData.Client
    ORDER BY Client; 
```

不整洁，但正如@tpdi 在他的回答中提到的那样，那是因为我们将行旋转为列。我已经使用了一致的`TradeDate BETWEEN ...`条款来涵盖相关的一周。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T09:44:06.520

感谢您的回答。实际上，我在 plsql 中发现了一些效果很好的东西：

```
select clientname,
max(decode(trim(dow),'MONDAY',totalquantity,0)) Mon,
max(decode(trim(dow),'TUESDAY',totalquantity,0)) Tue,
max(decode(trim(dow),'WEDNESDAY',totalquantity,0)) Wed,
max(decode(trim(dow),'THURSDAY',totalquantity,0)) Thu,
max(decode(trim(dow),'FRIDAY',totalquantity,0)) Fri,
(
max(decode(trim(dow),'MONDAY',totalquantity,0)) +
max(decode(trim(dow),'TUESDAY',totalquantity,0)) +
max(decode(trim(dow),'WEDNESDAY',totalquantity,0)) +
max(decode(trim(dow),'THURSDAY',totalquantity,0)) +
max(decode(trim(dow),'FRIDAY',totalquantity,0)) 
) TOTAL
from 
(
  select clientname, 
  to_char(tradedate, 'DAY') as dow, 
  sum(quantity) as totalquantity
  from ClientTrade a
  where a.tradedate >= trunc(sysdate-7,'D')
  and a.tradedate <= trunc(sysdate-7,'D') + 4
  group by c.clientshortname, tradedate
)
group by clientname 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-02-13T21:21:13.933

我在 Oracle 11G 上的尝试：

```
select clientname, nvl(MON,0) MON,  nvl(TUE,0) TUE, nvl(WED,0) WED, nvl(THU,0) THU, nvl(FRI,0) FRI, nvl(SAT,0) SAT, nvl(SUN,0) SUN,
nvl(MON,0) +  nvl(TUE,0) + nvl(WED,0) + nvl(THU,0) + nvl(FRI,0) +nvl(SAT,0) + nvl(SUN,0) TotalForWeek
from 
(
select   clientname,to_char(tradedate,'Dy') dw, sum(quantity) quantity from ClientTrade
group by clientname,  to_char(tradedate,'Dy')
)
pivot (sum(quantity) FOR dw in ('Mon' as MON,'Tue' as TUE,'Wed' AS WED,'Thu' AS THU,'Fri' AS FRI,'Sat' AS SAT,'Sun' AS SUN) ) 
```

# c++ - 从 Visual Studio C++ 6.0 到 VS 2008？

> ID：775790
> 
> 赞同：3
> 
> 时间：2009-04-22T05:18:20.030
> 
> 标签：c++, visual-studio, ide, build

我在一家公司工作，在 VC6 上进行 C++ 开发，我们正在考虑迁移到 VS 2008。

升级有什么好处？

有什么缺点？

关于迁移项目文件的任何指南/步骤，或者我应该注意的问题？人们可以迁移到不同的开发界面吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-22T05:23:18.147

对我来说，升级到 2008 的最大原因是 C++ 编译器的标准合规水平。它从 VC6 得到了**极大的**改进，并且能够使用您熟悉或想要使用的大多数库。包括 STL、BOOST 和 TR1。

缺点是升级的正常问题。例如，改进的标准合规性意味着它可能会破坏一些依赖于非标准行为的代码。没有具体的例子浮现在脑海中，但我确信它们就在那里。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-22T06:52:51.160

好处是：

*   您将从一个使用了 5 年以上、模板支持很差的编译器转移到一个更新的和符合标准的编译器。
*   您将花费更少的时间来调查编译问题，这些问题最终是编译器的一个已知问题，而不是您的代码问题。
*   广泛可用的 C++ 文献和文档将与您的编译器更加相关。

缺点是： - 这可能需要一些时间，否则可能会花费一些时间，例如为您的产品添加新功能。

移植中最大的问题可能是您拥有的任何不符合但允许 VC6 编译的代码。此代码可能无法在 VS2008 上编译。我想一些 Win32 API 也可能已经改变，对于 MFC 和 ATL 类也是如此。

了解问题规模的最简单方法是处理一个不依赖其他 VC 项目的小项目。查看您遇到了多少错误以及修复它们需要多长时间。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-22T10:57:40.463

换个角度来看：VC6 是在 2000 年之前发布的。它针对的是全新的操作系统，如 Windows 98 和 NT4。到目前为止，这些操作系统已经退役。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-22T05:27:29.990

有很多好处，其中包括一个非常成熟、先进和友好的环境。除此之外，编译器已经改进，不用说 - STL ......此外，网络上的所有论坛，所有信息都可以用于最新版本的 VS 而不是旧版本。缺点是没有向后兼容性。含义：一旦迁移，在以前的版本中就无法打开这个项目。由于编译器之间的差异，您可能会遇到一些编译问题。您还可能会遇到一些“包含”路径问题，因此您可能需要进行一些手动配置设置。我强烈推荐它。去吧！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-22T05:58:05.877

完全支持 MFC 和 COM，至少它们是专业版。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-22T06:56:28.407

很多人都提到了搬家的好处。我建议你采取行动，但这是我发现的两个最大的烦恼：

*   您需要一个项目文件来调试二进制文件。在 VC6 中，您只需将一个 exe 文件拖到 VC 窗口并进行调试即可。在此之后的每个版本中，您首先需要一个项目文件。
*   一切都是额外的鼠标点击。许多菜单项被移到更远的一级菜单，如果你像我一样是个老鼠迷，这很烦人。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-22T11:15:34.990

[TDD](http://www.geekzone.co.nz/vs2008/6187)支持。

# .net - WPF 绑定控件大小

> ID：775793
> 
> 赞同：1
> 
> 时间：2009-04-22T05:18:50.840
> 
> 标签：.net, wpf, data-binding, xaml

我有一个 StackPanel，其中包含我想调整大小的自定义用户控件列表。我希望用户能够拖动滑块并上下缩放控件大小。

有没有办法将控件宽度绑定到滑块值？类似于：

```
<MyControl Width="{Binding Path=SizeSlider.SelectedValue}"/> 
```

这可能吗？还是我应该只遍历控件并在滑块值更改时手动设置大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T05:27:39.647

您应该可以通过使用来做到这一点

```
<MyControl Width="{Binding ElementName=SizeSlider, Path=Value}"/> 
```

通过仅设置`Path`，您假设`SizeSlider`在当前 DataContext 中存在命名的东西。

我已经在代码中完成了一次并且它有效：

```
var binding = new Binding("Value") { Source = slider };
BindingOperations.SetBinding(b, WidthProperty, binding);
BindingOperations.SetBinding(b, HeightProperty, binding); 
```

所以显然

```
<MyControl Width="{Binding Source=SizeSlider, Path=Value}"/> 
```

可能是另一种方法。

# php - 在 Mac Leopard 10.5.6 上使用 GD2 和 Freetype 编译 PHP 时出错

> ID：775797
> 
> 赞同：0
> 
> 时间：2009-04-22T05:20:27.340
> 
> 标签：php, macos, gd2, freetype2

我正在 Mac OS X 10.5.6 上编译 PHP5.2.9。需要一些帮助来解决这个问题。

我有 PHP 编译并使用基本配置，现在我正在尝试使用 GD2 进行编译。我遇到的问题是，如果我将参数添加到使用 Freetype 构建，则会出现构建错误。这是我演示问题的最低配置。另外，我知道对 libjpeg/libpng 等还有其他要求。我现在不包括这些要求以使其更简单。

```
sudo ./configure --prefix=/usr/local/php --with-config-file-path=/usr/local/conf/php \
--enable-fastcgi \
--with-freetype-dir=/usr/local \
--with-gd 
```

错误：

```
checking for FT_New_Face in -lfreetype... no
configure: error: Problem with freetype.(a|so). Please check config.log for more information. 
```

这是来自错误日志：

```
configure:36779: gcc -o conftest  -gstabs  -no-cpp-precomp -Wl,-rpath,/usr/loca$
Undefined symbols:
  "_FT_New_Face", referenced from:
      _main in ccgzHTP6.o
ld: symbol(s) not found
collect2: ld returned 1 exit status
configure: failed program was:
#line 36768 "configure"
#include "confdefs.h"
/*     Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */ 
```

正如我在 --with-freetype-dir 参数中定义的那样，我从源代码构建并安装在 /usr/local/ 中的 freelib-2.1.3。我认为它告诉我它正在尝试查找字体文件，但我不确定何时或是否安装了这种字体。

如果我在没有 Freetype 的情况下构建，GD2 将构建和安装，但我希望在我的系统上具有 Freetype 功能。以下是我使用 Freetype 选项的完整配置设置（失败的那个！）

```
sudo ./configure --prefix=/usr/local/php --with-config-file-path=/usr/local/conf/php --enable-fastcgi \
--with-jpeg-dir=/usr/local \
--with-png-dir=/usr/local \
--with-zlib-dir=/usr/local \
--enable-gd-native-ttf \
--with-tlib=/usr/local \
--with-freetype-dir=/usr/local \
--with-xpm-dir=/usr/X11R6 \
--with-gd 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T06:09:17.160

好吧，做了一件非常愚蠢的事情。我忘记了我从哪里下载 Freetype2，但是 2.1.3 版本已经过时了几年。我刚刚更新到 2.3.9，它编译得非常完美。呜呜。

请注意，谷歌搜索者。故障排除的第一步是确保您使用的是最新版本的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-09-30T07:57:04.230

安装包含所需扩展的自定义 PHP 版本可能是一个挑战。从头开始编译所有内容的替代方法是使用[MacPorts](http://www.macports.org/)，它提供正确的源文件、依赖项并完全自动化配置、制作和制作安装过程。

在 MacPorts 端口集合中，提供了最新版本的 PHP 以及几乎所有的扩展和工具。当新版本的 PHP 发布时，它通常会很快进入 MacPorts，从而可以非常轻松地升级您安装的版本。

如果你做 LAMP/MAMP 开发，MacPorts 还提供最新的 Apache 和 MySQL 服务器版本。

# iphone - 拨打电话号码结束通话后如何返回应用程序的主页？

> ID：775798
> 
> 赞同：3
> 
> 时间：2009-04-22T05:21:45.997
> 
> 标签：iphone, cocoa-touch

我正在 iPhone 中开发一个本地搜索应用程序......从一组电话号码搜索中拨打一个电话号码后，我能够拨打所选号码......现在我需要的是一个代码或一种方法来检查是否通话已结束，应用程序应返回到我选择号码的页面，而不是退出当前正在发生的应用程序？请帮助..只剩下这个问题，然后应用程序完成..所以请帮助。 .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T05:25:09.840

你不能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T09:34:57.527

在退出应用程序之前保存您的当前位置（使用 NSUserDefaults 或数据库）并在应用程序启动时检查它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T09:45:06.253

扩展其他人所说的话；

你不能在 iPhone 上做到这一点。它只允许一个进程运行，所以你不能让你的应用程序在后台运行。Oxigen 所说的可能是您最好的选择；保存应用程序。位置（导航明智）并恢复应用程序。一旦用户启动您的应用程序，就会到达该位置。再次。

但是，这确实需要您的用户启动您的应用程序。没有办法自动执行此操作。

也许有一天，当 iPhone OS 4.0 出来时，我们真的可以运行后台应用程序了。让我们向苹果大神祈祷吧！

PS：标题+1！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T21:39:07.580

由于单进程模型，这是 iPhone 上的常见问题。UIKit 将在通话结束后重新启动您的应用程序，但是您需要在应用程序终止之前保存状态，然后在重新启动时重新加载您的状态。

您应该查看这个关于保存状态和重新启动的[SO 问题，特别是用于在 iPhone 开发人员网站上的](https://stackoverflow.com/questions/307832/best-way-to-load-an-application-like-it-was-in-its-previous-state-when-it-was-ter)[DrillDownSave](https://developer.apple.com/iphone/library/samplecode/DrillDownSave)示例中实现此目的的 Apple 示例代码（需要登录）。

# asp.net - asp.net 验证

> ID：775801
> 
> 赞同：0
> 
> 时间：2009-04-22T05:22:15.433
> 
> 标签：asp.net

我想添加一个验证控件来检查输入的人的名字和姓氏是否由 AZ 中的字符组成，而不是任何特殊字符和数字？怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T05:25:55.393

使用正则表达式验证器并将其`[a-zA-Z]`作为 reg ex 进行验证。
如果您想要支持连字符和下划线，请输入`[a-zA-Z_\-]`

```
<asp:RegularExpressionValidator id="revalApha" runat="server" 
ControlToValidate="TextBox1" ValidationExpression="[a-zA-Z]+$" 
ErrorMessage="Only Alphabets allowed"> </asp:RegularExpressionValidator> 
```

我会建议不要使用自定义验证器，因为您需要在 javascript 和 c# 中编写一个函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T05:25:16.253

您可以使用正则表达式验证器或自定义验证器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T05:27:46.963

这是使用[正则表达式验证器的](http://msdn.microsoft.com/en-us/library/ms998267.aspx)一个很好的例子。但不要忘记 O'Dell 和 Van Damme。:)

# ruby-on-rails - 使用 gravatar 插件时如何设置选项 d=identicon？

> ID：775803
> 
> 赞同：0
> 
> 时间：2009-04-22T05:22:41.970
> 
> 标签：ruby-on-rails, gravatar

我已经成功设置了 gravatar RoR 插件（是的！）但是当有人没有 gravatar 帐户时，我希望它显示 identicon，我猜当 d=identicon 在 gravatar URL 时显示...但是因为我正在使用插件，我基本上是在说 gravatar_for (user) 所以......有没有办法添加这个值？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-22T14:18:42.227

如果您使用的是[gravtastic](http://github.com/chrislloyd/gravtastic/tree/master)，您可能可以通过在模型中执行以下操作来使其工作

```
is_gravtastic, :default => "identicon" 
```

# c# - 通过修改此代码需要帮助

> ID：775810
> 
> 赞同：1
> 
> 时间：2009-04-22T05:25:37.017
> 
> 标签：c#, file

我想从具有特定驱动器的所有目录中删除所有 .rar 扩展文件。假设我在这下面有“D:\Test”，我创建了许多 .rar 文件或 .zip 文件。一旦程序运行，只应删除所有 .rar 文件，其他扩展文件应保持不变，并应显示已删除多少 rar 文件。我可以在子目录的 n 个 detpht 中创建 n 个文件，但是在程序运行时，所有 .rar 文件都应该被删除。为此，我编写了一个程序，并在该特定驱动器中创建了许多文件，但是当我运行应用程序时说没有文件，我的意思是它总是检查 else 条件。这是我的代码，请有人修改它。

```
static void Main(string[] args)
{
    DirectoryInfo dirMain = new DirectoryInfo("D:\\Test");
    if (dirMain != null)
    {
        FileInfo[] dirRar = dirMain.GetFiles("*.rar", SearchOption.AllDirectories);
        if (dirRar != null && dirRar.Length > 0)
        {
            for (int i = 0; i < dirRar.Length; i++)
            {
                Console.WriteLine(dirRar[i].FullName);
                dirRar[i].Delete();
            }
            Console.WriteLine("Total no of files deleted" + dirRar.Length.ToString());
        }
        else
        {
            Console.WriteLine("There is no file");
        }
    }
    Console.ReadKey();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T05:49:21.950

对我来说很好；也许检查`d:\Test`存在？顺便说一句- 请注意，`GetFiles`当涉及复杂的权限集时，递归重载有点不稳定。`try`通过使用/`catch`围绕子文件夹手动进行递归，您会做得更好：

```
int count = 0;
Queue<string> dirs = new Queue<string>();
dirs.Enqueue(@"d:\Test");
while(dirs.Count > 0) {
    string dir = dirs.Dequeue();
    try
    {
        foreach (string subdir in Directory.GetDirectories(dir))
        {
            dirs.Enqueue(subdir);
        }
    }
    catch (Exception ex) { Console.Error.WriteLine(ex); }// access denied etc

    foreach (string file in Directory.GetFiles(dir, "*.rar"))
    {
        try
        {
            File.Delete(file);
            count++;
        }
        catch (Exception ex) { Console.Error.WriteLine(ex); }// access denied etc
    }
}
Console.WriteLine("Deleted: " + count); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T05:41:03.267

你的代码看起来不错。如果您输入 else 条件，则意味着 d:\test（或任何子文件夹）下没有 .rar 文件，或者您运行代码的帐户没有对该文件夹的读取权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T05:42:15.527

几点建议：

1.  检查文件或目录是否未标记为隐藏。
2.  尝试`FileInfo[] dirRar = dirMain.GetFiles("*.*");`对每个文件进行迭代并检查您是否获得了 rar 文件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T05:44:58.827

它在这里工作。

D:\Test 中的所有 rar 文件均已删除。

# resources - 关于编程技巧的推荐文章/论文

> ID：775814
> 
> 赞同：6
> 
> 时间：2009-04-22T05:27:12.160
> 
> 标签：resources

我在这里的意图是有一个单线程将让你成为一个更好的程序员，只是为了阅读类型的**文章**或**论文**或**真正的独立博客文章**，作者已经付出了很多努力来提炼（**任何将花费您不到一天时间阅读的内容**）。我没有时间挖掘互联网的巨大信息库（大部分时间），所以如果我们通过在好东西上放置信标来互相帮助，我们都可以节省时间。

必须

*   影响（或至少使您检查）您对编程的看法/前景。
*   与**技术无关**（不仅与特定的程序员社区相关）。
*   **不是**新架构、产品或方法的插件。
*   **不绑定到支持编程**的特定角色。**（如何做更好的规格/UX/等）**
***   **不要让我的大脑受伤**。针对中高级读者，而不假设读者是数学/微积分的巫师**

 **我看到我们已经有了“[最好的编程文章是什么？](https://stackoverflow.com/questions/316461?sort=votes&page=1#sort-top)' 并且有一些重叠（至少与第一页）_我找不到词语来表达我想要传达的差异。我想这里的重点是“工艺”方面。
希望有足够多的人发现这个想法有用并做出贡献……否则它会被投票/关闭并且不会增加噪音。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T05:33:37.433

[Dijkstra 档案](http://www.cs.utexas.edu/~EWD/)让我大吃一惊。大多数都很短，可以在不到一个小时的时间内阅读。美妙之处在于，许多人会用余生来真正理解。:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-22T05:35:48.943

[如何成为一名程序员](http://samizdat.mines.edu/howto/HowToBeAProgrammer.html)

篇幅比较短，一天就能轻松读完，专精本专业的语用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-22T05:44:30.513

虽然这不是一篇文章/论文，但我强烈建议您阅读：

[Martin Fowler 等人的重构](http://www.google.com/books?q=refactoring&btnG=Search+Books)。

它使您完全改变了查看代码的方式。源代码不是为了让机器快乐，而是为了人类。

> *任何傻瓜都可以编写计算机可以理解的代码。优秀的程序员编写人类可以理解的代码。~马丁·福勒*

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-22T05:32:13.880

[神话人物月](https://rads.stackoverflow.com/amzn/click/com/0201835959)虽然是一本书而不是一篇文章，但它是必不可少的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-22T07:01:57.050

[每个计算机科学家都应该知道的关于浮点运算](http://docs.sun.com/source/806-3568/ncg_goldberg.html)的知识可能有点过于专业，但我认为至少应该在这里提及。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-22T05:28:46.120

Peter Naur 的[编程作为理论构建](http://www.naur.com/comp/c1-4.html)

网上好像找不到。然而，这篇文章作为附录出版在 Alistair Cockburn 的《[敏捷软件开发：合作游戏](http://www.amazon.co.uk/Agile-Software-Development-Cooperative-Game/dp/0321482751)》一书中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-08T04:34:30.160

Martin Fowler 关于[GUI 架构](http://www.martinfowler.com/eaaDev/uiArchs.html)的论文。如果程序员在使用 GUI 之前阅读此内容，世界将会变得更美好。
每当我对 MVC、MVP、MVVM 和其他日益增多的首字母缩略词感到困惑时，我都有一个方便的打印输出……以及它们的语义扩散。

# windows - win32：更改 MessageBox 文本？

> ID：775821
> 
> 赞同：1
> 
> 时间：2009-04-22T05:30:26.927
> 
> 标签：windows, winapi, messagebox

我的程序有多个线程。我正在使用消息框向用户显示信息。无论如何（或消息框的替代方案）我可以让另一个线程更新/更改消息框显示文本，而消息框仍在屏幕上并且用户可见？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-22T05:33:42.520

如果您使用的是标准的 Win32 消息框，我认为一旦该框已显示（您输入模式消息泵），就没有任何方法可以更改文本。

我建议您创建自己的窗口来监听来自其他线程的消息/更新。这样你就可以控制了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-04T02:07:59.743

通过 GetCurrentThreadId() 和 SetWindowsHookEx() 使用特定于线程的挂钩，您可以挂钩 MessageBox() 内部接收的消息，以及访问对话框的主窗口句柄，然后您可以访问所有子控件对话框。然后，您可以根据需要自定义对话框及其控件。这种技术通常用于实现自动关闭对话框（在引入 MessageBoxTimeout() 之前）、自定义按钮的文本等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T12:11:47.507

我不相信有直接的方法可以做到这一点，您可能可以尝试获取窗口句柄，但这太麻烦了。最好的办法是创建自己的对话框，以便您完全控制它。

# sql-server - Show Group above details 查询

> ID：775829
> 
> 赞同：0
> 
> 时间：2009-04-22T05:33:41.660
> 
> 标签：sql-server

表中数据：

```
 ItemCode  ItemName     ItemGroup  
    SFD       Softdrink     NULL
    CCL       Coco Cola     SFD
    FNT       Fanta         SFD
    SPR       Sprite        SFD
    ACL       Alchol            
    TQL       Tequila       ACL
    VDK       Vodka         ACL 
```

当用户找到“Softdrink”时，结果将是：

```
 ItemCode       ItemName
    SFD            Softdrink     
    CCL            Coca Cola         
    FNT            Fanta                       
    SPR            Sprite 
```

我怎么能做到？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-22T05:42:45.463

所有软饮料都在 itemgroup sfd 中。试试`select itemcode, itemname from table where itemgroup = 'SFD'`；

马克汉密尔顿指出：

> 除了 Softdrink 本身没有 SFD 作为其 ItemGroup。您需要在查询中添加“或 ItemCode = 'SFD'”。我想知道类别是否可以进一步嵌套，在这种情况下，递归 CTE 可以解决问题

是的，要么在 where 添加一个“或”，要么递归。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T06:04:43.910

得到它的工作

```
select ItemCode, ItemName from Items 
where itemCode in (select itemcode  from Items where itemname = 'softDrink') 
or itemGroup in  (select itemcode  from Items where itemname = 'softDrink') 
```

能否进一步修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T09:55:21.267

```
WITH hier (code, name) AS
        (
        SELECT  ItemCode, ItemName
        FROM    Table
        WHERE   ItemCode = 'SFD'
        UNION ALL
        SELECT  ItemCode, ItemName
        FROM    hier
        JOIN    Table
        ON      ItemGroup = code
        )
SELECT  *
FROM    hier 
```

这将选择具有更深层次结构的项目（即您可以添加`Fanta Lemon`和`Fanta Orange`，`ItemGroup = FNT`并且此查询也会选择它们）。

# asp.net - VB .NET 在 Gridviews 中创建附加列

> ID：775841
> 
> 赞同：2
> 
> 时间：2009-04-22T05:38:26.050
> 
> 标签：asp.net, vb.net, gridview

我试图将数据添加到我在 gridview 中创建的新列中。我使用以下代码创建列：

```
Dim Field As New BoundField
Field.HeaderText = "Cummulative Amount"
Dim Col As DataControlField = Field
Me.GridView1.Columns.Add(Col) 
```

现在我需要进入并为列下方的行添加数据。我看到 ppl 说我需要将它设置为等于一个数据字段但是我如何从头开始创建一个数据字段呢？

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T05:50:57.407

是的，人们已经告诉您正确的事情 - 您需要设置`DataField`BoundField 的属性才能呈现它。您的 DataField 将是您将 GridView 绑定到的数据源公开的公共属性。

顺便说一句，您不需要创建 a`DataControlField`因为`BoundField`该类继承自`DataControlField`. 您可以直接将其添加`BoundField`到 GridView 的 Columns 集合中。

```
Dim Field As New BoundField()
Field.HeaderText = "Cumulative Amount"
Field.DataField = "CumulativeAmount"

Me.GridView1.Columns.Add(Field) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T05:51:12.073

**更新：**

您可以在网格视图的标记中创建此计算列。假设您的数据源有一个名为“金额”的字段和另一个名为“数量”的字段，并且您的“累积金额”是这两列的乘积，您可以执行以下操作：

```
<asp:GridView runat="server" DataSource="sqlDataSource">
  <columns>
    <asp:BoundField HeaderText="Amount" DataField="Amount" />
    <asp:BoundField HeaderText="Quantity" DataField="Quantity" />
    <asp:TemplateField HeaderText="Cummulative Amount">
      <ItemTemplate>
        <asp:Label runat="server" Text='<%# Eval("Amount") * Eval("Quantity") %>' />
      </ItemTemplate>
    </asp:TemplateField>
  </columns>
</asp:GridView> 
```

# java - struts中的分页

> ID：775846
> 
> 赞同：2
> 
> 时间：2009-04-22T05:41:50.317
> 
> 标签：java, struts2

我有一个要求，我必须从数据库中获取一些记录，然后我必须在 JSP 上每页显示 50 条记录。该页面将在屏幕上显示第一个、上一个、下一个和最后一个按钮。有没有人在 struts 或类似的框架中实现了类似的功能？我也不想一次获得所有记录。请指导我如何实施？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T05:59:57.760

我为此使用了[Displaytag](http://displaytag.sourceforge.net/1.2/)库。它与 Struts 和 jsp 结合使用效果很好，并提供排序和分页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-05-05T20:05:59.917

也许您可以尝试一些处理所有客户端处理并从服务器端代码获取数据的 JQuery 插件。你可以试试[http://www.datatables.net/](http://www.datatables.net/)因为它处理分页、过滤、排序并且有更多的功能。这里解释了如何将 DataTables 与 java servlet 应用程序[http://www.codeproject.com/KB/java/JQuery-DataTables-Java.aspx](http://www.codeproject.com/KB/java/JQuery-DataTables-Java.aspx)集成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-03-03T14:05:40.140

1）在动作类中计算动作中的总页数（从数据库中获取它并像totalPages = totalEntries / pageSize一样计算）

2）从jsp发送pageNumber（当用户点击页面编号时），从jsp发送pageSize（如果用户必须指定pageSize）或从action发送到Business。String query = "select empid, ename from employee by joindate desc limit " + start + "," + pageSize;

计算 Start like int start = (pageNumber * pageSize - pageSize);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T18:36:25.763

使用 Strust2 标准 API 设置最大结果

```
List<Class_Name> records = new ArrayList<Class_Name>();
private static SessionFactory sf = new Configuration().configure().buildSessionFactory();
Session s = sf.openSession();
Criteria cr = s.createCriteria(Class_Name.class);
cr.setMaxResults(50);

records = cr.list();
s.close(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-07T08:45:06.660

使用[Struts 2 Jq Grid 插件](http://code.google.com/p/struts2-jquery/source/browse/trunk/struts2-jquery-grid-showcase/src/main/webapp/WEB-INF/content/grid-subgrid.jsp?r=1751)它是为 struts2 设计的插件 ..`display tag`已贬值。您只需使用即可实现，`struts2 jqgrid tags`并且还有许多其他功能

# perl - 从空格分隔的文本文件中计算数值，在行的范围内

> ID：775848
> 
> 赞同：1
> 
> 时间：2009-04-22T05:41:55.230
> 
> 标签：perl, math, shell, text

我有一个包含以下值的文件：

```
for 3 threads:
Average time taken for API1 is: 19097.7 nanoseconds.
Average time taken for API2 is: 19173.1 nanoseconds.
Average time taken for API2 is: 19777.7 nanoseconds.
Average time taken for API2 is: 19243.1 nanoseconds.
Average time taken for API1 is: 19737.7 nanoseconds.
Average time taken for API2 is: 19128.1 nanoseconds.
for 5 threads:
Average time taken for API1 is: 19097.7 nanoseconds.
Average time taken for API2 is: 19173.1 nanoseconds.
Average time taken for API2 is: 19777.7 nanoseconds.
... 
```

我希望计算 1API 行和 2API 行的总和，并将它们相加。另一个要求是我还想单独计算每个线程。有没有办法使用 perl、sed、awk 或只是 shell 脚本来做到这一点？

我目前能得到的是：

```
cat result | grep API1 | awk {'print $7'} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T05:48:45.480

您可以使用 grep 和 awk 的组合。grep 仅选择包含数据的行（API 所在的位置）和 awk 进行计数。

```
grep API file | awk '{ arr[$5]+=$7 } END {for (i in arr) {print i,arr[i]}   } ' - 
```

（使用文件名更改文件或删除以从标准输入读取）

如果你想计算不同的总和，你可以这样做

```
awk '{ if($1 == "for") id = $2; else arr[id $5]+=$7 } END {for (i in arr) {print i,arr[i]}   } ' testfile 
```

输出：

```
5API1 19097.7
5API2 38950.8
3API1 38835.4
3API2 77322 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T06:27:11.563

简短且不可读：

```
perl -lane 'END{&h}sub h{print"\t$_ => $h{$_}"for keys%h;%h=()}&h,print,next if/^for/;$h{$F[4]}+=$F[6]' data 
```

可读，但必须是脚本：

```
#!/usr/bn/perl

use strict;
use warnings;

my %counts;
my $thread = "undefined";
while (<>) {
    if (/^for ([0-9]+)/) {
        $thread = $1;
        next;
    }
    my ($item, $time) = /for (\S+) is: (\S+) nano/;
    $counts{$thread}{$item} += $time;
}

for my $thread (sort { $a <=> $b } keys %counts) {
    print "for $thread threads:\n";
    for my $item (sort keys %{$counts{$thread}}) {
        print "\t$item => $counts{$thread}{$item}\n";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T15:08:03.700

我不明白您的最后一个要求（*没有*指定线程），但我会为您提供该信息的设置并满足我*能*理解的要求。数据已分解，因此您可以访问它。虽然我不明白你会如何使用'for x threads:' 行，但它至少被捕获了，所以你也许可以使用它。

```
use List::Util qw<sum>;

my $fh = FileHandle->new( PATH_TO_DATAFILE );
my $data 
    = { trial_times => []
      , totals      => {}
      };
my $precision = 0;

while ( <$fh> ) { 
    if ( m/^for (\d+) threads:/ ) { 
        push @{$data->{trial_times}}, {};
    }
    elsif ( m/^Average time taken for (API\w+) is: (\d+\.(\d+)) nanoseconds./ ) {
        push @{$data->{trial_times}[-1]{$1}}, $2;
        push @{ $data->{totals}->{$1} }, $2;
        $precision = length $3 if length $3 > $precision;
    }
}

### $data

foreach my $api ( keys %{ $data->{totals} } ) { 
    my @list = @{ $data->{totals}{$api} };
    my $sum  =sum @list;

    printf "Sum for %d runs of API $api: %0.${precision}f (Average: %0.${precision}f)\n"
         , scalar @list, $sum, $sum / scalar @list
         ;
}

my @combined = map { @$_ } values %{$data->{totals}};
### @combined
my $sum      = sum @combined;
printf "Combined %d runs for %0.${precision}f total (Average: %0.${precision}f)\n"
    , scalar @combined, $sum, $sum / scalar @combined
    ; 
```

# iis-7 - YSlow 和 css 图像 - 如何使用 IIS7 对它们进行 GZip？

> ID：775861
> 
> 赞同：0
> 
> 时间：2009-04-22T05:48:18.693
> 
> 标签：iis-7, yslow

YSlow 说从我的 CSS 文件（例如背景图像）引用的图像不是 GZipped。我在 IIS7 中为我的网站打开了静态和动态压缩...所以它们应该被压缩。

这是 YSlow 的错误还是来自 CSS 文件的图像请求忽略了压缩头？

有没有办法让这些图像 GZipped？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-22T07:33:49.080

GZIP 压缩图像没有必要或不可取，因为无论如何图像已经使用与 GZIP 非常相似的压缩算法进行压缩。

您可能会节省不到 1% 左右的带宽，因此考虑到大量额外的 CPU 使用率，这并不是一个好主意。相比之下，HTML、JS 和 CSS 等基于文本的文件通常可以节省 50% 到 60% 的带宽，而这正是 GZIP 压缩的亮点。

此规则的例外是未压缩的图像格式，例如未压缩的 BMP 或未压缩的 TIFF，但我怀疑您是否正在使用它。

我猜测 IIS 已配置为不尝试压缩图像，这是一件好事。

# c# - 自治软件

> ID：775863
> 
> 赞同：5
> 
> 时间：2009-04-22T05:49:03.730
> 
> 标签：c#, self

有没有人写过任何代码，应用程序在其生命周期中学习和改进自身（使用存储在 KB 中的观察数据），是否有任何框架？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T06:40:25.900

我曾经写过一个学习`Tic Tac Toe`（或`Noughts and Crosses`）游戏。这算不算？

它基本上维护了一个 3 ⁹元素数组，用于每个游戏状态。在每场比赛结束时，如果它赢了，它将在该比赛期间的所有状态中添加一个。或者如果它丢失了则减去一个（包括旋转和镜像以加快学习速度）。

在决定移动时，它只需要参考几种可能性，然后选择得分最高的一种。

它最终变得相当好，但不是通过扮演一个人，这花费了太长时间。它必须松散地玩自己的另一个副本，一个随机机器人和一个硬编码规则机器人，用于成千上万的游戏。

当我释放它时，它有 10 个初始智力水平，它们只是学习过程中的不同阶段。

我儿子目前正在对抗最愚蠢的水平 - 他只有四岁，所以我不想对他太粗暴，所以他们会一起学习（虽然他偶尔会击败我`Connect Four`，所以也许我应该施加更大的压力在他身上）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T06:36:51.540

我建议开始在网络上查看很多高级 AI 主题：这些主题包括神经网络、基因编程等（维基百科）。

值得关注的地方还包括大学对更高水平人工智能的研究。（即。我知道一个团队编写了一个程序，该程序通过使计算机用相机观察钟摆来推断运动定律；非常酷的东西）[http://blog.wired.com/wiredscience/2009/ 04/newtonai.html](http://blog.wired.com/wiredscience/2009/04/newtonai.html)

这是一个非常大的领域，需要您编写大量代码；您真正应该关注的是学习算法背后的概念，这样您就可以对您找到的算法进行编程或调整以满足您的需求。我认为这将是您创建学习算法的最佳选择。

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T06:57:11.070

恕我直言，您的问题非常广泛。大多数垃圾邮件过滤器都符合您的描述。但总的来说，您的方法将取决于应用程序必须学习什么以及应该如何学习。例如，垃圾邮件过滤器通常进行监督学习。但是，如果您不希望用户帮助您的应用程序学习，您将不得不使用无监督学习方法。当然还有更多的选择。[mloss.org](http://mloss.org)有很多包含 ML 算法的库，您可以使用它们。但是对于大多数库来说，如果您至少大致了解它们的算法是如何工作的，那将会很有帮助。

最好的办法是阅读一些关于机器学习（如 Mitchell 的[机器学习](http://mloss.org)）和 AI 的书籍。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-09T14:23:34.153

[上](https://stackoverflow.com/questions/598726/overwhelmed-by-machine-learning-is-there-a-ml101-book)一篇文章列出了一些标准教科书，其中我强烈推荐Russel/Norvig[的人工智能现代方法 (AIMA)](https://stackoverflow.com/questions/598726/overwhelmed-by-machine-learning-is-there-a-ml101-book)。

在[许多可用的工具包](http://www.google.de/search?hl=de&q=machine+learning+toolkits&btnG=Suche&meta=)中，我建议看一下[Orange](http://www.ailab.si/Orange/)、[SciPy](http://www.scipy.org)（Python）或[Weka](http://www.cs.waikato.ac.nz/ml/weka/)（Java）。

# apache - Apache 和 mod_rewrite：将域重定向到子目录

> ID：775868
> 
> 赞同：5
> 
> 时间：2009-04-22T05:50:09.750
> 
> 标签：apache, mod-rewrite

（我知道这本身不是一个编程问题，但它涉及正则表达式，所以至少它是边界......）

设置：

Windows 上带有 mod_rewrite 的 Apache 2.0。两个域，我们称它们为 domain1.example 和 domain2.example。我想在同一台服务器（“server1”）上托管两个域，所以我将它们指向同一个 IP 地址。

现在，如果用户在他的浏览器中键入“domain2.example”，我希望他最终进入服务器上的子目录**，但保留他键入的域（“domain2.example/domain2/”）。当然，重定向必须保留此域/目录下页面上的所有绝对和相对链接。

这对 mod_rewrite （或 Apache 虚拟主机或其他方法）是否可行，我该怎么做？

** 在这种情况下，“子目录”实际上不是磁盘上的文件夹，而是使用 Apache“位置”指令创建的虚拟文件夹。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-22T06:12:39.227

我假设您无权访问 Apache 配置，否则，是的，虚拟主机是您的最佳选择。但是，如果您不这样做，则可以将其放入 .htaccess 文件中，并且应该可以解决问题：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(.+)\.yourwebsite\.com$
RewriteRule ^/(.*)$ /path/to/your/subdomains/%1/$1 [L] 
```

所以一个请求`[http://foo.yourwebsite.com/bar](http://foo.yourwebsite.com/bar)`会去`/path/to/your/subdomains/foo/bar`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-22T06:01:35.777

假设域是独立的，建议的解决方案是虚拟主机。

您可以在[apache 网站上](http://httpd.apache.org/docs/2.0/vhosts/)找到文档。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-22T05:58:54.860

我不相信你需要使用 mod_rewrite，你应该能够像你建议的那样使用虚拟主机。为此，您将拥有一个带有 servername domain2.example 的虚拟主机，它指向您想要的目录。这还将对 domain1.example 使用 ServerAlias 指令，因此对此的请求将转到同一目录。

请参阅[ServerAlias](http://httpd.apache.org/docs/2.2/mod/core.html#serveralias)和[DocumentRoot](http://httpd.apache.org/docs/2.2/mod/core.html#documentroot)的文档。另请注意，如果您希望目录显示在 URL 中，*则*需要使用 mod_rewrite。

# sql - 序列化和反序列化 SQL 查询

> ID：775870
> 
> 赞同：1
> 
> 时间：2009-04-22T05:51:11.557
> 
> 标签：sql, serialization, embedded, binary, protocols

我有一个嵌入式设备，它保留了一个内表列表。我希望它将这个表的状态与一些外部数据库同步以进行调试。那就是每当我向某个结构数组添加元素时，我希望设备发出“INSERT INTO ...”命令。

但是，我通过 RS232 串行电缆发送数据，这使得发送显式 SQL 的开销无法接受。

由于我经常使用的 SQL 命令只有 3 种，所以我只能序列化这几种。即`INSERT INTO`,`DELETE FROM`和`UPDATE`。

我想到的一般想法是使用“压缩/可序列化”的 SQL 协议发送数据。我们不会将命令直接发送到 SQL 服务器，而是发送到我将编写的自定义序列化 SQL 服务器：

1.  我们将为每个更改数据库的简单操作（即 INSERT、DELETE、UPDATE）分配一个编号。唯一可用的可序列化 SQL 命令是`INSERT INTO x ()`, `DELETE FROM x WHERE id=y`. 我们只能改变`x`和`y`。
2.  首先在服务器上创建所有必要的表一次。在服务器上保留一个哈希表，将每个表映射到一个数字。这可以在纯 SQL 中完成，因为这只完成一次。
3.  然后为每个表分配一个数字，确保服务器知道这个数字
4.  最后，每当我们希望执行 SQL 命令时，我们将发送命令号，然后是表号，然后是数据长度，然后是数据。服务器将通过表的描述来确定实际数据的布局。

例如

```
INSERT INTO temperature(temperature,location)
     VALUES ((108,"chille"),(120,"usa")) 
```

会被翻译成

```
[INSERT INTO id][2 data to send]
    [byte of 108][6 bytes string "chille"]
    [byte of 120][3 bytes "usa"] 
```

和

```
DELETE FROM people (id,"bob") WHERE id=1 or id=2 
```

会被翻译成

```
[DELETE id][2 data to send][byte of 1][byte 2] 
```

由于 id 被定义为单字节整数。

本着这种精神，是否有任何已知的协议/实现？

有没有人有更好的主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-22T06:13:58.507

大多数 DBMS 使用准备好的语句来执行此操作。您准备一个语句，例如插入，然后仅使用相关参数执行它。服务器（或客户端）为准备好的语句提供某种 ID（通常是整数，有时是字符串），客户端库可以根据需要重新执行它。

您的一些想法需要改进 - 特别是 DELETE 中的 OR 并不明显。此外，您需要定义“要发送的 N 个数据”是标识多行还是多个值，如果是多行，您如何确定行中有多少个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T07:38:57.757

您可能在这里进行了过早的优化，特别是考虑到这只是为了测试。我将使用纯 SQL 实现该功能并查看它的执行情况。

然后考虑您需要改进它的时间，并将收益与您在这段时间内可以做的其他事情进行比较。就像添加用户可能购买的功能一样。

# linux - 为什么会生成核心转储文件？

> ID：775872
> 
> 赞同：17
> 
> 时间：2009-04-22T05:51:21.387
> 
> 标签：linux, coredump

有时当我运行我的代码时，当我通过`Ctrl`+终止程序时会生成一个核心转储文件`\`。文件名的格式为`core.*`. 程序没有突然终止，也没有分段错误。我相信它是`SIGQUIT`而不是`SIGABRT`或`SIGSEGV`。如果我尝试`Ctrl`+`C`或`Ctrl`+ `Z`，则不会生成它。

谁能说出为什么只有在按下`Ctrl`+时才会生成它？`\`如何避免生成此核心转储文件？核心转储文件有什么用吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-04-22T05:53:53.047

当一个进程由于程序故障而被操作系统终止时，它会转储内核。发生这种情况的最典型原因是程序访问了无效的指针值。鉴于您有一个零星的转储，很可能您使用的是未初始化的指针。

您可以发布导致故障的代码吗？除了模糊的概括之外，如果没有实际看到代码，很难猜测出什么问题。

至于核心转储实际上是什么，请查看这篇 Wikipedia 文章：

*   [http://en.wikipedia.org/wiki/Core_dump](http://en.wikipedia.org/wiki/Core_dump)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-04-22T06:57:17.093

正如其他人所说，核心转储是程序故障的结果。

[您可以使用ulimit](http://linux.die.net/man/1/ulimit)命令配置是否要生成核心转储。进入

```
ulimit -c 0 
```

禁用活动外壳中的核心文件生成。

如果生成核心的程序是使用符号信息构建的，您可以执行如下的[事后调试会话](http://www.network-theory.co.uk/articles/gccdebug.html)：

```
gdb <pathto/executable> --core <corefilename> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-04-22T05:56:36.473

当进程接收到某些信号（例如 SIGSEGV）时，会生成核心转储，内核在访问其地址空间之外的内存时会将其发送给它。通常这是因为指针使用方式的错误。这意味着程序中存在错误。

核心转储对于查找错误很有用。它是问题发生时进程内存的映像，因此可以使用诸如 gdb 之类的调试器来查看程序当时在做什么。调试器甚至可以访问（有时）程序中变量的值。

您可以使用 ulimit 命令防止发生核心转储。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2010-10-04T09:54:46.383

`ctrl + \`向进程发送信号 SIGQUIT。根据 POSIX.1 标准，此信号的默认操作是生成核心。

SIGILL、SIGABRT、SIGFPE、SIGSEGV 是系统生成核心的其他情况。

有关详细信息，请参阅系统上的“man 7 signal”。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-04-22T05:54:18.087

它是一种帮助调试表现不佳的应用程序的工具。它很大，因为它包含了所有应用程序物理内存在它死亡时的内容，以及所有线程的寄存器状态和堆栈。

它们是在内核杀死一个应用程序做坏事时生成的，比如产生分段违规或总线错误。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-04-22T14:13:49.493

您可以通过编写不会崩溃的代码来避免创建核心转储文件:)

说真的，核心转储很有用，因为您可以看到程序崩溃时的状态，用于“事后”调试。您可以在 gdb 中打开它们并检查程序的状态（特别是如果它是通过调试构建的）。

如果程序具有 SIGSEGV（通常由无效的指针取消引用引起）、SIGABRT（如果您调用 abort() 或在 C++ 中通过默认的 terminate() 处理程序处理析构函数等中的异常，则会发生核心转储）或一些其他故障。您还可以使用调试器或以编程方式显式触发它们。

如果你已经修复了所有的错误并且它是完美的，你可以删除它们。此外，如果您以任何方式更改了程序（并重新编译了它），那么它们将变得无用，因为现在的调试信息与核心转储中的内容不匹配，因此您也可以删除它们。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-05-10T11:25:00.763

`Ctrl`+的点`\`是生成核心转储。就是`SIGQUIT`这样。如果您不想生成它，请改用`Ctrl`+ `C`( `SIGINT`)。如果有问题的程序没有响应`SIGINT`但您需要从终端中将其终止，则您或开发人员做错了什么。

设计为*不会*从终端中被`Ctrl`+杀死的程序`C`仍然应该优雅地响应`SIGTERM`，这可以在另一个终端中通过`kill -TERM ...`. 如果一切都失败了，`SIGKILL`将强制立即终止。

# python - 在python中访问鸡蛋？

> ID：775880
> 
> 赞同：1
> 
> 时间：2009-04-22T05:55:19.207
> 
> 标签：python, egg

有没有办法从 python 代码中调用已安装的 python egg？我需要从 python 代码中调用 sphinx 文档生成器，目前我正在这样做：

`os.system( "sphinx-build.exe -b html c:\\src c:\\dst" )`

这可行，但需要一些额外的配置：需要将 python 安装文件夹中的“脚本”文件夹添加到系统 PATH（我在 Windows 上）。调用已安装的 python 鸡蛋有更好的本地方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T09:47:06.607

所以基本上，您想将 Sphinx 用作库吗？

这是做什么`sphinx-build`的：

```
from pkg_resources import load_entry_point

load_entry_point('Sphinx==0.5.1', 'console_scripts', 'sphinx-build')() 
```

查看`entry-points.txt`EGG-INFO 目录，请注意 sphinx-build 入口点是`sphinx.main`函数（位于 中`__init__.py`）。

看看它并复制它的功能，您可以将 sphinx 用作库。我没有详细查看代码，但似乎 - 命令的大部分`sphinx-build`是由对象`build`上的方法完成的`Sphinx`。

在您的代码中，您必须执行以下操作：

```
from sphinx.application import Sphinx
s = Sphinx(...)
s.build(...) 
```

您需要查看 Sphinx 源代码以找出参数`Sphinx.__init__()`和`Sphinx.build()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T06:16:02.557

将 egg 添加到 PYTHONPATH 或 sys.path 将允许您访问其中的模块和包。

# perl - 在 Perl 中 slurping 文件时如何跳过行？

> ID：775882
> 
> 赞同：6
> 
> 时间：2009-04-22T05:57:42.773
> 
> 标签：perl

我怎样才能做到这一点？

```
open FILE, $somefile;
foreach (<FILE>)
{
   if (/some_regex/)
   {
      $want_the_next_line = <FILE>;
      $want_the_next_line_after_that = <FILE>;
   }
} 
```

明白我的意思了吗？我基本上想在我的 foreach 中间啜饮一堆行，而不是每次迭代时都必须记住我的状态并检查它。我目前在 Perldoc 的 <> 上找不到任何有用的东西。

哦，顺便说一句，我真的不想：

```
@file = <FILE>; 
```

我相信你明白。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-22T06:15:57.207

使用`while`代替`foreach`：

```
open FILE, $somefile;
while (<FILE>)                      # <<-- HERE
{
   if (/some_regex/)
   {
      $want_the_next_line = <FILE>;
      $want_the_next_line_after_that = <FILE>;
   }
} 
```

该`while`循环只会从中读取一行，`<FILE>`然后您可以在当前迭代中随心所欲地使用它。

此外，此技术将帮助您避免一次读取整个文件。

**技术背景：** `foreach()`需要一个数组，因此一次读取整个文件，而`while()`循环中的表达式是标量上下文，只检查“假”值，就像 EOF 产生的一样。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-22T19:11:14.817

您可以在 perlfaq5 中使用相同的技术：如何在文件中更改、删除或插入一行，或附加到文件的开头？：

* * *

（由布赖恩·d·福伊提供）

从文本文件中插入、更改或删除一行的基本思想包括读取和打印文件到要进行更改的位置，进行更改，然后读取和打印文件的其余部分。Perl 不提供对行的随机访问（特别是因为记录输入分隔符 $/ 是可变的），尽管 Tie::File 等模块可以伪造它。

执行这些任务的 Perl 程序采用打开文件、打印其行、然后关闭文件的基本形式：

```
open my $in,  '<',  $file      or die "Can't read old file: $!";
open my $out, '>', "$file.new" or die "Can't write new file: $!";

while( <$in> )
    {
    print $out $_;
    }

    close $out; 
```

在该基本表单中，添加您需要插入、更改或删除行的部分。

要将行添加到开头，请在进入打印现有行的循环之前打印这些行。

```
open my $in,  '<',  $file      or die "Can't read old file: $!";
open my $out, '>', "$file.new" or die "Can't write new file: $!";

print $out "# Add this line to the top\n"; # <--- HERE'S THE MAGIC

while( <$in> )
    {
    print $out $_;
    }

    close $out; 
```

要更改现有行，请插入代码以修改 while 循环内的行。在这种情况下，代码会找到“perl”的所有小写版本并将它们大写。每一行都会发生这种情况，因此请确保您应该在每一行上都这样做！

```
open my $in,  '<',  $file      or die "Can't read old file: $!";
open my $out, '>', "$file.new" or die "Can't write new file: $!";

print $out "# Add this line to the top\n";

while( <$in> )
    {
    s/\b(perl)\b/Perl/g;
    print $out $_;
    }

    close $out; 
```

要仅更改特定行，输入行号 $. 很有用。首先阅读并打印要更改的行。接下来，读取要更改的单行，更改并打印。之后，阅读其余行并打印：

```
while( <$in> )   # print the lines before the change
    {
    print $out $_;
    last if $. == 4; # line number before change
    }

my $line = <$in>;
$line =~ s/\b(perl)\b/Perl/g;
print $out $line;

while( <$in> )   # print the rest of the lines
    {
    print $out $_;
    } 
```

要跳过行，请使用循环控件。本示例中的下一个跳过注释行，最后一个在遇到**END**或**DATA**时停止所有处理。

```
while( <$in> )
    {
    next if /^\s+#/;             # skip comment lines
    last if /^__(END|DATA)__$/;  # stop at end of code marker
    print $out $_;
    } 
```

通过使用 next 跳过您不想在输出中显示的行，执行相同的操作来删除特定行。此示例跳过每五行：

```
while( <$in> )
    {
    next unless $. % 5;
    print $out $_;
    } 
```

如果出于某种奇怪的原因，您真的想一次查看整个文件而不是逐行处理，则可以将其吞入其中（只要您可以将整个文件放入内存中！）：

```
open my $in,  '<',  $file      or die "Can't read old file: $!"
open my $out, '>', "$file.new" or die "Can't write new file: $!";

my @lines = do { local $/; <$in> }; # slurp!

    # do your magic here

print $out @lines; 
```

File::Slurp 和 Tie::File 等模块也可以提供帮助。但是，如果可以，请避免一次读取整个文件。在进程完成之前，Perl 不会将该内存归还给操作系统。

您还可以使用 Perl 单行代码就地修改文件。以下将 inFile.txt 中的所有“Fred”更改为“Barney”，用新内容覆盖文件。使用 -p 开关，Perl 会在你用 -e 指定的代码周围包裹一个 while 循环，而 -i 会打开就地编辑。当前行在 $ 中*。使用 -p，Perl*会在循环结束时自动打印 $ 的值。有关详细信息，请参阅 perlrun。

```
perl -pi -e 's/Fred/Barney/' inFile.txt 
```

要备份 inFile.txt，请提供 -ia 文件扩展名以添加：

```
perl -pi.bak -e 's/Fred/Barney/' inFile.txt 
```

要仅更改第五行，您可以添加一个测试检查 $.，输入行号，然后仅在测试通过时执行操作：

```
perl -pi -e 's/Fred/Barney/ if $. == 5' inFile.txt 
```

要在某行之前添加行，您可以在 Perl 打印 $_ 之前添加一行（或多行！）：

```
perl -pi -e 'print "Put before third line\n" if $. == 3' inFile.txt 
```

您甚至可以在文件的开头添加一行，因为当前行在循环结束时打印：

```
perl -pi -e 'print "Put before first line\n" if $. == 1' inFile.txt 
```

要在文件中已有的一行之后插入一行，请使用 -n 开关。它就像 -p 一样，只是它不会在循环结束时打印 $_ ，所以你必须自己做。在这种情况下，首先打印 $_，然后打印要添加的行。

```
perl -ni -e 'print; print "Put after fifth line\n" if $. == 5' inFile.txt 
```

要删除行，只打印您想要的行。

```
perl -ni -e 'print unless /d/' inFile.txt

    ... or ...

perl -pi -e 'next unless /d/' inFile.txt 
```

# ruby-on-rails - 面向 Django 开发人员的 Rails

> ID：775884
> 
> 赞同：4
> 
> 时间：2009-04-22T05:58:08.437
> 
> 标签：ruby-on-rails

我已经习惯使用 Django 一段时间了。现在我必须学习一些 RoR。是否有任何好的 RoR 教程可以用熟悉 Django 的人会理解的术语来解释事物，即是否有针对 RoR 的“民意调查”教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-05-25T17:32:19.057

我喜欢“[使用 Rails 2 在 15 分钟内创建一个博客](http://rubyonrails.org/screencasts)”。一些代码已经过时，但您将很快了解 Rails MVC 代码是如何组织的。

# asp.net - 在 ASP.NET MVC 中使用 Windows 身份验证时，User.Identity.Name 未返回正确的凭据

> ID：775887
> 
> 赞同：0
> 
> 时间：2009-04-22T05:59:40.350
> 
> 标签：asp.net, asp.net-mvc, windows-authentication

我在我的 ASP.NET MVC 应用程序中使用 Windows 身份验证，系统提示我在作为域成员的网络服务器上输入凭据 [我有域凭据并且可以很好地进行身份验证] 但是当我的控制器操作调用“User.Identity.Name”时为了尝试针对当前登录的用户检查数据库值，这是从本地计算机返回 SAM 帐户，而不是从 DOMAIN 中返回 SAM 帐户：

本地计算机用户名（User.Identity.Name 返回）：LOCALPC\username

我所期待的（这是我针对 AD 进行身份验证的内容）：域\用户名

这给我带来了问题，因为我无法准确地验证仅使用用户名的用户。

我是否遗漏了一些东西，有没有办法返回我目前对网络服务器进行身份验证的内容，而不是客户端计算机上的本地 SAM 帐户？

这很重要的原因是因为并非所有 Intranet 应用程序客户端都将加入域（未加入域但属于具有 AD 帐户的用户的计算机）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-22T06:55:08.080

我的错误，问题现在已解决，结果证明是我的代码中的一个错误，而我的机器未加入域这一事实使我相信问题出在 User.Identity.Name 的值上。

谢谢大家的建议，希望我对这个网站的下一个贡献将是一个不那么愚蠢的笔记。

--

顺便说一句 - 此链接可能有助于人们在 IIS 中查找有关身份验证的相关信息：http: [//blog.mike-obrien.net/PermaLink,guid,5e975b20-7b05-472f-bd80-04028ab8b6fa.aspx](http://blog.mike-obrien.net/PermaLink,guid,5e975b20-7b05-472f-bd80-04028ab8b6fa.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T06:16:20.903

当您的网络浏览器出现提示时，输入“域\用户名”而不是“用户名”进行身份验证。

编辑：

这是开发服务器吗？检查运行 IIS 的帐户。您是否在 web.config 中配置了模拟？

# asp.net-mvc - ASP.NET MVC，跨父子 LINQ2SQL 实体的简单创建页面

> ID：775891
> 
> 赞同：0
> 
> 时间：2009-04-22T06:00:52.157
> 
> 标签：asp.net-mvc

我有一个简单的结构

**小部件（父表）**

*   id（身份）

*   标题

**WidgetChild（子表）** -

*   id（widget.id 的外键）
*   内容

在我的视图中，我有一个捕获标题的字段，以及另一个捕获内容值的字段。

```
 <%= Html.TextBox("title") %> 
```

和

```
 <%= Html.TextBox("content") %> 
```

我如何连接我的控制器以首先将新条目插入 Widget，然后将条目插入 WidgetChild？我不知道该怎么做。我是否传递一个 FormCollection 实例，手动实例化 Widget 实例并传递值？或者我可以以某种方式使用 UpdateModel() 吗？我不熟悉 UpdateModel 如何绑定我的表单值，尤其是当它们跨越多个表/类时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T08:24:53.467

您可以在此处使用自动模型绑定。

使用这样的表格：

```
<%using(Html.BeginForm("Update", "Home")) {%>
    <%=Html.TextBox("widget.Title") %>
    <%=Html.TextBox("childWidget.Content") %>
    <input type="submit" value="Submit" />
    <%} %> 
```

然后，您的控制器可以如下所示：

```
public ActionResult Update(Widget widget, WidgetChild childWidget)
{
  // do whatever with the objects here
} 
```

这些对象将具有从那里填充的表单的属性（小部件的标题和 childWidget 的内容） - 然后您可以将这些对象相互关联并以正常方式将它们保存到您的 linq to sql 数据上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T06:56:23.040

您需要根据您的数据库结构区分两个进程。您可以使用向导步骤。检查这个[链接](https://stackoverflow.com/questions/771788/how-do-i-create-a-mvc-wizard-similar-in-functionality-to-webforms-wizards)。

第二种方法是手动完成。就像在页面提交上一样，您将在接受 post 动词的 action 方法中获得所有页面数据，对。现在您可以在父表中填写必填字段，然后立即获取相同的记录以获取主键。最后，您可以使用父表 ID 在子表中输入数据。

你不觉得这个过程很头疼吗！最好在另一个视图中添加子内容，您可以在其中显示小部件父级的下拉菜单，然后添加内容。

# c++ - 将构造函数中的结构清零

> ID：775902
> 
> 赞同：3
> 
> 时间：2009-04-22T06:13:12.067
> 
> 标签：c++, winapi

Win32 编程中使用了广泛的结构。很多时候只使用它们的一些字段，而所有其他字段都设置为零。例如：

```
STARTUPINFO startupInfo; // has more than 10 member variables
ZeroMemory( &startupInfo, sizeof( startupInfo ) ); //zero out
startupInfo.cb = sizeof( startupInfo ); //setting size is required according to MSDN
startupInfo.dwFlags = STARTF_FORCEOFFFEEDBACK;
//Now call CreateProcess() passing the startupInfo into it 
```

我想停止复制粘贴此类代码，而是使用关心归零和设置参数的抽象。假设我只需要像示例中那样初始化结构，并且不需要其他调整。以下是一个好的解决方案吗？有哪些可能的问题？

```
class CStartupInfo : public STARTUPINFO {
public:
   CStartupInfo()
   {
       ZeroMemory( this, sizeof( STARTUPINFO ) );
       cb = sizeof( STARTUPINFO );
       dwFlags = STARTF_FORCEOFFFEEDBACK;
   }
}; 
```

我特别担心 ZeroMemory() 调用 - 看起来我完全控制代码并且该类没有 vtable，并且以这种方式调用 ZeroMemory() 是安全的，两个代码片段之间没有太大区别，除了后者提供一个抽象。有什么注意事项吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-22T06:28:10.110

对于结构，您可以执行以下操作：

```
STARTUPINFO startup_info = { sizeof(STARTUPINFO), 0 };
startup_info.dwFlags = STARTF_FORCEOFFFEEDBACK; 
```

我发现这是初始化这些结构的巧妙技巧。然而，问题是 cb（或大小/长度）字段必须是结构中的第一个字段。如果需要，您也可以只做扩展版本：

```
STARTUPINFO startup_info = { 0 };
startup_info.cb = sizeof(STARTUPINFO);
startup_info.dwFlags = STARTF_FORCEOFFFEEDBACK; 
```

如果您想用类包装结构，我建议您首先尝试 ATL/WTL，因为您要包装的结构可能已经作为类存在。

如果您仍然热衷于创建自己的类，我建议您创建一个构造函数，按顺序获取结构的每个元素，并指定默认参数，以便以后更容易更改这些值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-22T06:17:29.293

为什么不创建一个函数而不是子类化呢？

```
STARTUPINFO CreateStartupInfo( DWORD flags ) {
  STARTUPINFO info;
  ZeroMemory(&info, sizeof(info));
  info.cb = sizeof(STARTUPINFO);
  info.dwFlags = flags;
  return info;
} 
```

确实，这可以在堆栈上放置一个非平凡大小的结构。如果有问题的编译器执行命名返回值优化（[链接](http://msdn.microsoft.com/en-us/library/ms364057.aspx)），则只会创建一个副本。但无论如何，您的示例已经有一次实例并暂时放置第二个实例不太可能导致重大问题。

如果结构中存在未正确管理的资源，我通常只对结构进行子类化。通常是实现 RAII 模型。在您的特定示例中，没有发生额外的资源管理，所以我会避免使用子类并只使用一个函数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-22T08:08:15.533

我使用了 tonj 的建议，但由于它经常杀死智能感知，我最终更喜欢这个：

```
template <typename T>
T& ZeroInit(T & data) 
{ 
  ZeroMemory(&data, sizeof(data)); 
  return data;
}

template <typename T>
T& ZeroInitCB(T & data) 
{ 
  ZeroMemory(&data, sizeof(data)); 
  data.cb = sizeof(data); 
  return data;
} 
```

与 selfzero<> 相比，正常情况下是另一行：

```
STARTUPINFO si;
ZeroInitCB(si); 
```

但是 - 如前所述 - 我选择帮助智能感知；）

return T& 有时允许链接，但我不经常使用它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-22T07:47:48.390

您可以使用模板：

```
template <class T>
class selfzero : public T
{
public:
    selfzero() {
        ZeroMemory( this, sizeof( selfzero<T> ));
    };
}; 
```

进而：

```
{
    selfzero<STARTUPINFO> si;
} 
```

警告：在具有 vtable 或稍后获得 vtable 的类或结构上使用它，它会爆炸。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-22T08:12:16.587

我认为这是使此类结构更加防弹的好方法。我不确定为什么其他人似乎不喜欢这种技术。我偶尔会使用它，但不会像其他情况那样经常使用它，因为出于某种原因，它似乎不太受到同事的喜爱。

我不经常看到它在已发表的材料中使用 - 我现在可以在快速谷歌中找到的唯一一篇是 Paul DiLascia 在 MSJ 1997 年 8 月的一篇文章 ( [http://www.microsoft.com/MSJ/0897/ C0897.aspx](http://www.microsoft.com/MSJ/0897/C0897.aspx)）：

> `CRebarInfo`和是 C 结构和`CRebarBandInfo`的程序员友好的 C++ 版本，其构造函数在适当地设置成员之前将对象初始化为全零。`REBARINFO``REBARBANDINFO``cbSize`

我想不出太多的缺点（除了缺乏接受）。如果其他人可以指出更具体的东西，我将不胜感激。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-22T10:53:53.030

要改进 TonJ 的解决方案：

```
template <class T>
class selfzero : public T
{
public:
    selfzero() {
        ZeroMemory( (T*) this, sizeof( T ));
    };
}; 
```

将 T 归零，而不是 selfdata。在多重继承、vtables 等情况下甚至是安全的。T 结构必须在内存中连续分配，并且 ((T*) this) 已针对其他基类和 vtable 进行了适当调整。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-23T08:57:50.930

如果结构的所有非静态数据成员都有平凡的**构造**函数，那么你的类有一个平凡的构造函数，它将把**成员初始化为它们的默认值**。大多数时候与故意将结构归零完全相同。因此，虽然将它们归零以进行初始化可能是“好”的做法，但大多数时候都不需要。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-04-22T06:22:28.953

您可以创建行为类似于普通类型但用零初始化的类型的特殊包装器，例如：

```
class zbool {
private:
  bool value;
public:
  zbool(const bool value) { ... }
  operator bool() { ... }
  // ... code skipped
}; 
```

然后使用这样的类型：

```
struct MyStruct {
  zbool deleted;
}; 
```

当然，如果您尝试初始化外部结构，这将不起作用。

# php - 如何更改 DOM 中元素的名称？

> ID：775904
> 
> 赞同：13
> 
> 时间：2009-04-22T06:13:13.860
> 
> 标签：php, xml, dom

在带有 DOM 的 PHP 中，我有一个代表 <identity/> 元素的 DomElement 对象。

我有一种情况需要更改它，使其元素名称为 <person/>，但保持相同的子元素和属性。

更改 DomElement 的元素名称并保留其子元素和属性的最简单方法是什么？

*编辑：我刚刚发现了一个[非常相似的问题](https://stackoverflow.com/questions/237786/is-there-a-better-way-to-change-a-domelement-tagname-property-in-php)（尽管它没有很好的答案）。*

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-22T06:23:20.730

您可以使用将元素的子`importNode()`节点复制`<identity>`到新创建的`<person>`元素吗？

```
function changeName($node, $name) {
    $newnode = $node->ownerDocument->createElement($name);
    foreach ($node->childNodes as $child){
        $child = $node->ownerDocument->importNode($child, true);
        $newnode->appendChild($child, true);
    }
    foreach ($node->attributes as $attrName => $attrNode) {
        $newnode->setAttribute($attrName, $attrNode);
    }
    $newnode->ownerDocument->replaceChild($newnode, $node);
    return $newnode;
}

$domElement = changeName($domElement, 'person'); 
```

也许这样的事情会起作用，或者您可以尝试使用`cloneChild()`.

编辑：实际上，我刚刚意识到原始函数会丢失节点的位置。根据 thomasrutter 链接到的问题，`replaceChild()`应该使用。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-02-19T16:00:50.230

感谢您的帖子，我可以快速为我解决同样的问题。但是，我有一个 DOM_NOT_FOUND 异常。这可能是 PHP 版本问题，因为原始帖子已有 5 年历史。

根据 PHP 文档（2014 年 2 月）

```
DOM_NOT_FOUND
  Raised if oldnode is not a child of this node. 
```

所以，我换了

```
$newnode->ownerDocument->replaceChild($newnode, $node); 
```

和

```
$node->parentNode->replaceChild($newnode, $node); 
```

这是完整的功能（已测试）：

```
public static function changeTagName($node, $name) {
    $childnodes = array();
    foreach ($node->childNodes as $child){
        $childnodes[] = $child;
    }
    $newnode = $node->ownerDocument->createElement($name);
    foreach ($childnodes as $child){
        $child2 = $node->ownerDocument->importNode($child, true);
        $newnode->appendChild($child2);
    }
    foreach ($node->attributes as $attrName => $attrNode) {
        $attrName = $attrNode->nodeName;
        $attrValue = $attrNode->nodeValue;
        $newnode->setAttribute($attrName, $attrValue);
    }
    $node->parentNode->replaceChild($newnode, $node);
    return $newnode;
} 
```

还值得一提的是，当你想使用这个功能时，你应该按照其他帖子中解释的相反顺序遍历 DOM 树。

更新：在 Windows 上使用并更新到 PHP 5.5.15 版数月后，我收到一条错误消息，提示无法将 $attr 转换为字符串。所以我更新了上面的第三个 for-each 循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-04T18:40:19.250

注意：我尝试了 Calvin 的代码，它对我有用，但并不完全。如果我要替换的标签有嵌套标签，一些子标签有时会丢失。

原因是 childNodes 是一个节点子节点的*活动* [DOMNodeList](http://php.net/manual/en/class.domnodelist.php)，并且`appendChild`在 DOM 中移动节点，从而影响列表排序。如果你只是`foreach`在 childNodes 上做，循环可以跳过一些孩子。

我的解决方案是使用 while 循环。这样您就不必将任何节点复制到数组中。

我已经将所有内容打包在一个方便的函数中，该函数接受一个字符串并返回一个字符串，并且应该使用 utf-8。以下是在 PHP 5.5.9 中测试的。

```
function renameTags($html, $oldname, $name) {
    $dom = new DOMDocument( '1.0', 'utf-8' );
    $fragment = $dom->createDocumentFragment();
    if ( $fragment->appendXML( $html ) ) {
        $dom->appendChild( $fragment );

        $nodesToAlter = $dom->getElementsByTagName( $oldname );

        while ($nodesToAlter->length) {
            $node = $nodesToAlter->item(0);

            $newnode = $node->ownerDocument->createElement($name);

            while ($node->hasChildNodes()) {
                $child = $node->childNodes->item(0);
                $child = $node->ownerDocument->importNode($child, true);
                $newnode->appendChild($child);
            }
            foreach ($node->attributes as $attr) {
                $attrName = $attr->nodeName;
                $attrValue = $attr->nodeValue;
                $newnode->setAttribute($attrName, $attrValue);
            }
            $newnode->ownerDocument->replaceChild($newnode, $node);

        }
        return $dom->saveHTML();
    } else {
        //error
    }
}

$html = 'Testing <b foo="bar" baz="foo">nested tags in <i lol="cat"> html strings</i></b> and <b>stuff</b>';

echo renameTags($html, 'b', 'strong'); 
```

印刷：

```
Testing <strong foo="bar" baz="foo">nested tags in <i lol="cat"> html strings</i></strong> and <strong>stuff</strong> 
```

# asp.net - 添加母版页时出错

> ID：775914
> 
> 赞同：0
> 
> 时间：2009-04-22T06:17:57.513
> 
> 标签：asp.net, vb.net

```
Server Error in '/' Application.
--------------------------------------------------------------------------------

Invalid postback or callback argument.  Event validation is enabled using <pages enableEventValidation="true"/> in configuration or <%@ Page EnableEventValidation="true" %> in a page.  For security purposes, this feature verifies that arguments to postback or callback events originate from the server control that originally rendered them.  If the data is valid and expected, use the ClientScriptManager.RegisterForEventValidation method in order to register the postback or callback data for validation. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.ArgumentException: Invalid postback or callback argument.  Event validation is enabled using <pages enableEventValidation="true"/> in configuration or <%@ Page EnableEventValidation="true" %> in a page.  For security purposes, this feature verifies that arguments to postback or callback events originate from the server control that originally rendered them.  If the data is valid and expected, use the ClientScriptManager.RegisterForEventValidation method in order to register the postback or callback data for validation.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  

Stack Trace: 

[ArgumentException: Invalid postback or callback argument.  Event validation is enabled using <pages enableEventValidation="true"/> in configuration or <%@ Page EnableEventValidation="true" %> in a page.  For security purposes, this feature verifies that arguments to postback or callback events originate from the server control that originally rendered them.  If the data is valid and expected, use the ClientScriptManager.RegisterForEventValidation method in order to register the postback or callback data for validation.]
   System.Web.UI.ClientScriptManager.ValidateEvent(String uniqueId, String argument) +2080169
   System.Web.UI.Control.ValidateEvent(String uniqueID, String eventArgument) +106
   System.Web.UI.WebControls.LinkButton.RaisePostBackEvent(String eventArgument) +32
   System.Web.UI.WebControls.LinkButton.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +7
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +11
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +174
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +5102

--------------------------------------------------------------------------------
Version Information: Microsoft .NET Framework Version:2.0.50727.42; ASP.NET Version:2.0.50727.42 
```

我能做些什么来纠正这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-24T10:19:27.477

您可能有多个表单元素。从内容页面中删除任何表单元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T06:59:25.417

该错误包含有关要做什么的足够信息，您可以执行以下任一操作：

**1\. 母版页添加指令**

```
<%@ Page EnableEventValidation="true" %> 
```

**2.编辑Web.Config**

```
<system.web>
  <pages enableEventValidation="true"/>
</system.web> 
```

# apache-flex - 如何在 flex 组件的属性表中嵌入 excel 表？

> ID：775920
> 
> 赞同：1
> 
> 时间：2009-04-22T06:22:11.403
> 
> 标签：apache-flex, actionscript-3, mxml, flashdevelop

我正在尝试使用 mxml 在 flex 中创建一个自定义组件。我已经为自定义组件创建了属性表，但它需要一个按钮，onclick 必须指向 Excel 表中可以从中检索数据的单元格。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T06:26:43.920

看看[as3xls](http://code.google.com/p/as3xls/)。

# c# - c#加密解密

> ID：775924
> 
> 赞同：1
> 
> 时间：2009-04-22T06:23:31.260
> 
> 标签：c#, encryption

C# 2005 我正在对 IP 地址使用简单的加密和解密。远程服务器上的应用程序将加密 IP 地址，客户端将对其进行解密。但是，当客户端解密 IP 时，我只能取回一些 IP 地址。其余的都是垃圾。之前：123.456.78.98 之后：fheh&^G.78.98

非常感谢，

```
 /// Encrypt the SIP IP address in the remote server
        private void encryptSIP_IP(string sip_ip)
        {
            TripleDESCryptoServiceProvider encrypt = new TripleDESCryptoServiceProvider();

        /// Private key
        byte[] key = { 0, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 144, 89, 55, 34, 21, 13, 8, 5, 3, 2, 1, 0};

        encrypt.Key = key;
        byte[] byteSIP = System.Text.Encoding.Default.GetBytes(sip_ip);

            ICryptoTransform encryptor = encrypt.CreateEncryptor();
             byte[] encrypted_sip = encryptor.TransformFinalBlock(byteSIP, 0, byteSIP.Length);

/// This will decrypt in the client application
        private void decryptSIP_IP(byte[] encrypted_sip)
        {
            TripleDESCryptoServiceProvider decrypt = new TripleDESCryptoServiceProvider();
            /// Private key
            byte[] key = { 0, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 144, 89, 55, 34, 21, 13, 8, 5, 3, 2, 1, 0 };
            decrypt.Key = key;
            ICryptoTransform decryptor = decrypt.CreateDecryptor();

            byte[] original = decryptor.TransformFinalBlock(encrypted_sip, 0, encrypted_sip.Length);
            string ip = System.Text.Encoding.Default.GetString(original);
        }
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-22T06:32:10.633

除了密钥之外，您还需要一个[初始化向量](http://en.wikipedia.org/wiki/Initialization_vector)（您的情况为 8 个字节）：

```
// To Encrypt
encrypt.IV = new byte[] { 1, 2, 3, 4, 5, 6, 7, 8 };

// Use same IV to decrypt
decrypt.IV = new byte[] { 1, 2, 3, 4, 5, 6, 7, 8 }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T07:02:10.467

正如darin 已经说过的，您需要设置初始化向量。如果可能，为每个加密过程选择一个随机的，并以明文形式传输/保存。

顺便说一句，您应该研究 CryptoStream 而不是使用 TransformBlock/TransformFinalBlock ...它更干净，恕我直言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T06:27:28.177

您是否尝试过在两侧显式设置编码？也许默认值不同。

# java - 将来自不同包的日志消息记录到不同的文件中

> ID：775932
> 
> 赞同：4
> 
> 时间：2009-04-22T06:27:41.673
> 
> 标签：java, logging, log4j

假设我的应用程序中有这些包 - foo.bar 和 foo.foobar，并且我想将来自 foo.bar 包的所有 log4j 日志消息发送到 foobar.log 文件，并将来自 foo.foobar 的日志消息发送到 foofoobar .log 文件，我应该如何配置 log4j.xml 文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-22T06:42:53.070

您可以在记录器配置中使用 appender-ref：

```
<logger name="foo.bar">
    <level value="debug"/>
    <appender-ref ref="FILE1" />
</logger> 
```

在[这里](http://wiki.apache.org/logging-log4j/Log4jXmlFormat)查看完整示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-08-08T15:44:03.917

当您有重叠的层次结构并且不想要重复的日志消息时，我还建议将 additivty 设置为“false”。

IE：

```
<logger name="foo.bar">
    <level value="debug"/>
    <appender-ref ref="FILE1" />
</logger>
<logger name="foo.bar.xyz" additivity="false">
    <level value="debug"/>
    <appender-ref ref="FILE2" />
</logger> 
```

这样，定向到 FILE2 的消息不会被写入 FILE1

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-05-04T04:05:38.887

我只是后来才弄清楚并将解释编译成博客文章，这可能会帮助正在阅读此页面的其他人。

[如何将日志消息发送到不同的日志文件](http://veerasundar.com/blog/2009/08/log4j-tutorial-how-to-send-log-messages-to-different-log-files/)

# java - 在没有读锁的情况下使用 writeLock 是否安全？

> ID：775936
> 
> 赞同：1
> 
> 时间：2009-04-22T06:28:30.577
> 
> 标签：java, concurrency

假设这是一个“单例”实现：我是否保证这只会调用 productCatalogLoader.load() 一次，并且不会发生空指针？有什么办法可以让这更简单？

```
private final ReentrantReadWriteLock lock = new ReentrantReadWriteLock();
private ProductCatalog productCatalog;

public ProductCatalog get() {
        if (this.productCatalog == null) {
            reload();
         }
        return this.productCatalog;
}                                                         

public void reload() {

    lock.writeLock().lock();
    try {
        if (this.productCatalog != null) return;
        this.productCatalog = productCatalogLoader.load();
    } finally {
        lock.writeLock().unlock();
    }
} 
```

}

编辑：这是一个适度成功的尝试，将更复杂的代码简化为一个简单的问题示例。有几个人发现我的单例太复杂了；）（实际上还有一个石英计时器调用重新加载，但“重新加载”实现有点不同 IRL）。无论如何，我得到了我需要的答案，损坏的双重检查锁定。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T06:35:45.087

IMO，使其更简单的最佳方法是使用“普通”锁，除非您确实有充分的证据表明它会导致瓶颈：

```
private final Object lock = new Object();
private ProductCatalog productCatalog;

public ProductCatalog get() {
    synchronized (lock) {
        if (this.productCatalog == null) {
            this.productCatalog = productCatalogLoader.load();
        }
        return this.productCatalog;
    }
} 
```

在绝大多数情况下，这已经足够了，您无需担心内存模型的技术问题。

编辑：关于在不获取读锁的情况下读取写锁中更改的数据是否安全 - 我*怀疑*不是，但我不想肯定地说。您使用 volatile 变量使用普通（如果您小心的话，在 Java 1.5+ 上是安全的）双重检查锁定的方法有什么好处吗？

```
private final Object lock = new Object();
private volatile ProductCatalog productCatalog;

public ProductCatalog get() {
    if (this.productCatalog == null) {
        synchronized (lock) {
            if (this.productCatalog == null) {
                this.productCatalog = productCatalogLoader.load();
            }
        }
    }
    return this.productCatalog;
} 
```

我相信这是 Effective Java 2nd edition 中推荐的惰性初始化技术，用于静态初始化器不够用的情况。请注意，`productCatalog`它必须是 volatile 才能使其工作 - 我认为这*实际上*是您通过不取出代码中的读取锁定所缺少的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-22T06:47:08.850

不，一般来说它是不安全的......写锁只保证在写锁被释放之前没有其他人能够获得读锁或写锁。不在代码中使用 readlock 就像同步 reload 方法但不同步 get 方法。我有点同意 Jon Skeet 的观点，但这在很大程度上取决于使用情况。

如果您有很多线程或多或少地同时调用，您可能想要一个读锁而不是让它同步。

编辑：顺便说一句，在 Effective Java 2nd Edition 中如何做到这一点有一个很好的例子......我也必须在这里纠正自己，考虑到上下文，如果以一种聪明的方式完成同步（以及 writelock在这种情况下可能也会起作用）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-22T08:56:46.760

这看起来像是[损坏的双重检查锁定](http://en.wikipedia.org/wiki/Double_checked_locking_pattern)。问题是 this.productCatalog 可以在对象完全构建之前分配。

说我们有

```
var foo = new ProductCatalog();
foo.blah = "blah blah";
this.productCatalog = foo; 
```

可以重新排序为

```
var foo = new ProductCatalog();
this.productCatalog = foo;
foo.blah = "blah blah"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T08:42:49.833

如果您尝试制作单例，这不是更简单吗：

```
private final ProductCatalog productCatalog = productCatalogLoader.load();
public ProductCatalog get() {
   return this.productCatalog;
} 
```

如果出于某种原因您不能使 ProductCatalog 成为最终成员，那么根据 Jon Skeet 的回答使用 synchronized 或者您的原始代码应该可以工作，只要通过 get() 调用或您的重新加载之外不访问成员 productCatalog ()。

# terminology - 编程术语是否具有远离清晰的内在趋势？

> ID：775940
> 
> 赞同：0
> 
> 时间：2009-04-22T06:34:30.563
> 
> 标签：terminology

不久前，我决定学习 C#，这是一次相当有益的体验，因为这门语言似乎很容易上手。

也就是说，术语除外。并不是说有大量的行话（学习任何新的语言/技术都会带来）——而是使用的术语看起来要么尴尬、不清楚或不必要地复杂。与（比如说）IEnumerable 集合相比，“数组”似乎很容易向某人解释，因为它本身就是一个名称。

但这超出了特定的语言/平台。采取以下措施：

*   函数/子程序与方法
*   错误与异常
*   临时表与公用表表达式
*   用户拥有的表与架构（在 SQL Server 中）

我很欣赏这些不是完全等效的术语，但“原始”术语似乎更合适，因此可以说更容易解释或理解。

所以……所有的“好”名字都已经被取了吗？

或者这些概念只是变得更加复杂，因此与日常语言更加遥远。这种趋势有反例吗？（显然有很多任务要简单得多，但这通常是外部库/操作系统/等做程序员以前必须做的事情的结果，而不是更好地描述相同的工作）。

还是我完全错了，我的思想只是因为小时候学习 BASIC 而扭曲（根据 Dijkstra）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-22T06:41:45.397

每个知识领域都倾向于发展行话，以便可以讨论特定领域的概念，而无需费力地使用用于表达这些概念的语言。

当我学习数据建模时，有人强调开发一个好的模型的关键是理解——如果有帮助，请记录——领域词汇。我当然发现这是真的，它的附带好处是帮助我与系统用户建立联系，了解他们的困难，并看到可能的解决方案，如果没有通过语言进行更深入的理解，我就不会看到这些解决方案。

如果你在一个领域呆了足够长的时间，这些词就会和你的其他词汇一样熟悉，那么挑战就是保持正常的对话而不听起来像个怪胎。;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T06:52:42.267

这些词中的大多数没有完全相同的含义。如果您以函数与方法为例：

据我了解，*函数*是使用命令式语言（如 C）或与对象无关的 JavaScript 函数独立存在的东西。

如果您使用术语*方法*代替，您已经暗示您使用的语言是面向对象的并且您正在对对象进行操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T07:49:59.617

程序员喜欢文字。我们得到了很多钱，以将它们按正确的顺序排列并让“魔术”发生。因此，我们很自然地描述了我们用令人痛苦的细节所做的事情。程序员通常说*的就是*他们所说的。

正如您所说，所有这些术语都不是确切的同义词，它们各自的含义不同。例如，“list”（对我来说）意味着一个链表，我可以在其中有重复的值。“数组”意味着我不能有重复的值。其他语言的人在这里会不同意我的观点，这与我们在交流中想要的相反：思想的平等。

即使我说“平价”这一事实也说明了这里的问题。基本上，这个词越晦涩，它的意思就越准确。“汽车”对几个人意味着几件事，但“副翼”几乎意味着一件事。

我认为语言设计者和作者努力将所有语义含义打包到他们的术语中，但它们还不够晦涩难懂。

太多的“重载”:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-22T06:41:33.933

很多时候，这些术语似乎令人困惑，因为它们旨在尽可能明确地描述语言特征。

例如，Error 在语义上与 Exception 不同，因此我们需要用不同的术语来描述它们。如果我们将所有异常都称为错误，您会用什么词来区分错误和 IllegalArgumentException 之类的东西？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-22T06:46:39.427

> 还是我完全错了，我的思想只是因为小时候学习 BASIC 而扭曲（根据 Dijkstra）？

是的，这可能是原因。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-22T06:51:52.847

我认为这在很大程度上取决于开发社区。

例如，PHP 几乎没有行话。这可能是因为 php 社区对将页面获取到浏览器感兴趣，而不是考虑将“原创”内容放入他们的论文中。

Perl 有自己的奇怪但清晰的行话（“祝福这个对象”？），这可能反映了 Larry Wall 的口才和古怪。

C++ 和 Java 可能是“为轮子发明新词”的最糟糕的罪犯。“坚持”可能是最糟糕的例子；我们真的需要另一个术语来“写入文件”吗？这可能是由于大量 Java/C++ 社区成员试图为这些内容考虑“原始”主题，而不是如何将页面输出到浏览器。

# c# - 从 Enterprise Architect 模型中提取数据

> ID：775944
> 
> 赞同：6
> 
> 时间：2009-04-22T06:35:55.880
> 
> 标签：c#, parsing, enterprise-architect, xmi

我正在尝试以编程方式从 Enterprise Architect 模型中提取信息（保存在[XMI](http://en.wikipedia.org/wiki/XMI)文件中）——我需要它来生成一些报告，但我不想创建 EA 插件。任何地方都有 C# XMI 解析器库吗？

我当然可以从它的 XML 模式生成 XMI​​ 解析代码，但那将是我的第二个选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-08-20T22:49:53.660

您真的需要 XML 吗？EA 将其信息保存在数据库中（从 EA 7.5 开始，标准 Jet DB 别名 MS Access 格式，尽管它有 eap 文件扩展名），它应该很容易查询。另一种方法是使用自动化接口（在 C# 中，您需要导入 Interop.EA）来访问 EA 存储的所有内容以及生成的图表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-22T08:15:17.047

好的，到目前为止我发现有**不同版本的 XMI**。引用[维基百科](http://en.wikipedia.org/wiki/XMI)：

> 已经创建了几个版本的 XMI：1.0、1.1、1.2、2.0 和 2.1。2.x 版本与 1.x 系列完全不同。

我将 EA 模型导出到 1.1 和 2.1 并且导出看起来确实不同，从顶级 XML 元素开始。所以我想在谈论 MI 解析器时，您首先必须指定您感兴趣的 XMI 版本。

# c# - 货币图书馆

> ID：775950
> 
> 赞同：7
> 
> 时间：2009-04-22T06:38:53.113
> 
> 标签：c#, asp.net-mvc, cultureinfo

我正在寻找一个与货币首字母缩写词一起使用的 .Net 类/库，就像 TimeZoneInfo 类与时区一起使用一样。

我需要用这些首字母缩写词填充下拉列表并将结果存储在数据库中。此值将用于在稍后阶段从网络检索最新汇率。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-22T07:34:31.607

```
CultureInfo[] cultures = CultureInfo.GetCultures(CultureTypes.SpecificCultures);
IEnumerable<string> currencySymbols = cultures.Select<CultureInfo, string>(culture => new RegionInfo(culture.LCID).ISOCurrencySymbol); 
```

是你要找的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T07:34:24.477

您最好自己生成列表并将其与相关信息一起放入数据库中。我已经相当成功地使用了这种方法

```
Country  Currency Name Symbol Code

USA  US Dollar  $ USD 
```

有几个好处

1.  报告要容易得多，因为您可以加入此表并根据需要格式化输出
2.  可以适应行业的变化
3.  支持多币种的国家等复杂场景可应对

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T06:42:28.347

那么，您可以从您将用于汇率的网络服务中查询此列表吗？

从根本上说，它是一个比`TimeZoneInfo`（必须处理许多复杂性）更简单的列表 - 一个简单的枚举或硬编码/数据库列表就足够了？它确实会定期更改（参见：欧元）。

# shell - 在 csh Shell 脚本中读取带空格的用户输入

> ID：775953
> 
> 赞同：3
> 
> 时间：2009-04-22T06:41:18.737
> 
> 标签：shell, csh

我有一个脚本，用户应该能够在其中输入带空格的字符串。到目前为止，我有：

```
#bin/csh

echo "TEST 1"
echo -n "Input : "
set TEST = $<

echo "Var | " $TEST

set TEST=`echo $TEST`

echo "Var after echo | " $TEST

set TEST=`echo $TEST | sed 's/ /_/g'`

echo "Var after change | " $TEST 
```

如果我在“input”中输入字符串“rr r”，$TEST 将只取“r”。我希望能够将 $TEST 设置为“rr r”。这可能吗？如果我输入一个像“1 1 1”这样的字符串，我会得到一个错误：

> set：变量名必须以字母开头。

这是什么原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-22T06:50:26.143

这是因为您没有在`SET`语句中使用引号。当您输入`"r r r"`作为输入时，两种不同的变体（未引用和引用）等效于：

```
set TEST=$<    :is equivalent to:  set TEST=r r r
set TEST="$<"  :is equivalent to:  set TEST="r r r" 
```

其中第一个简单地设置`TEST`为`"r"`和`r`到`""`（两次！）。第二个设置`TEST`为`"r r r"`。那是因为`csh`让您可以执行多项任务，例如：

```
set a=1 b=2 c d=4 
```

所以你需要使用`SET`. 检查以下成绩单以了解其工作原理：

```
[pax ~]$ set x=$< ; echo .$x.
hello
.hello.

[pax ~]$ set x="$<" ; echo $x ; echo .$b.$c.
a b c
.a b c.
b: Undefined variable.

[pax ~]$ set x=$< ; echo $x ; echo .$b.$c.
a b c
.a.
...

[pax ~]$ set x=$< ; echo $x ; echo .$b.$c.
a b=7 c=urk!
.a.
.7.urk!. 
```

您收到您通过输入描述的错误的原因`"1 1 1"`是因为您正在有效地执行：

```
set TEST=1 1 1 
```

并且`csh`这意味着您要创建`TEST`设置为`"1"`后跟变量的变量`1`，该变量不以字母开头，因此不允许。使用引用的变体，这变为：

```
set TEST="1 1 1" 
```

这会做你所期望的。

# asp.net-mvc - 为什么不是所有的表单控件都可以通过 HtmlHelper 呈现？

> ID：775965
> 
> 赞同：3
> 
> 时间：2009-04-22T06:45:53.580
> 
> 标签：asp.net-mvc, design-principles

有谁知道为什么某些 HTML 表单控件可以使用[System.Web.Mvc.HtmlHelper](http://msdn.microsoft.com/en-us/library/system.web.mvc.htmlhelper.aspx)（隐藏、复选框、密码、文本框）呈现，而有些不能并且应该明确地用 HTML（文件、提交）编写？这种分离的原理是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-22T09:15:48.350

好问题。

我认为输入控件（例如输入、选择）包含在 Html 帮助程序中，因此它们可以通过 TempData 维护自己的状态，而无需用户编写大量代码来实现。我还认为链接和表单控件被包装以提供一种简单且统一的方式来指定这些控件的控制器/操作。大多数其他控件不保证开箱即用的状态管理或需要构建控制器/操作 url。

当然，没有什么可以阻止您为喜欢的控件编写自己的包装器 - 例如，这是我使用的一对 - 这是用于 html 标签控件的一个：

```
public static string Label(this HtmlHelper helper, string fieldName, string labelText)
{
    var sb = new StringBuilder();
    sb.Append("<label for=\"");
    sb.Append(fieldName);
    sb.Append("\">");
    sb.Append(labelText);
    sb.Append("</label>");
    return sb.ToString();
} 
```

这是我使用的一个，它包装了该标签助手和一个文本框，以生成一个带有标签的统一文本输入字段：

```
public static string TextField(this HtmlHelper helper, string labelText, string fieldName, string value)
{
    return string.Concat(
        "<div>",
        helper.Label(fieldName, labelText),
        helper.TextBox(fieldName, value),
        "</div>");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-22T12:29:57.027

我在[“Preview4 中缺少 Html.SubmitButton()”线程中找到了 Phil Haack 的答案？](http://forums.asp.net/t/1295135.aspx)关于问题：

> 是的，我们正在努力让助手保持简约。不仅如此，我们还收到了一些人的反馈，认为我们的许多助手是不必要的。“我知道 HTML，为什么我需要一个 SubmitButton 助手？”。
> 
> 我们认为，由于输入按钮通常不用于呈现用户输入，因此辅助方法具有边际价值。毕竟，使用 VS HTML 编辑器，您可以在键入 . 它告诉您哪些属性可用。我们的助手没有。
> 
> ...
> 
> 我们要避免的事情是每个 html 元素都有一个助手。那没有任何意义：Html.Div。
> 
> 我们想为助手提出一个设计原理。也许我们有一个所有常见的表单元素，而不仅仅是显示用户输入的那些。这是一种可能性，在这种情况下我们将包括 SubmitButton。
> 
> 现在，我们的基本原理是任何呈现用户输入的通用表单助手，或任何呈现路由信息的助手，都有一个助手......

# php - 使用 PHP 或 Javascript 旋转 png

> ID：775969
> 
> 赞同：0
> 
> 时间：2009-04-22T06:48:31.793
> 
> 标签：php, javascript, rotation

我正在尝试旋转基于我数据库中的值（1-360 度）的 png

但是，我将它与 google mapping api 结合使用，如果我使用“header('Content-type: image/png');” 我的地图没有显示，只有图像。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T06:52:00.443

有一个使用 javascript 旋转图像的[jQuery 插件。](http://code.google.com/p/jquery-rotate/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T07:24:30.133

从[ImageMagic](http://www.imagemagick.org) [API 站点](http://www.imagemagick.org/script/api.php)：

> PHP
> MagickWand for PHP 是 ImageMagick MagickWand API 的原生 PHP 扩展。
> IMagick 是一个原生 PHP 扩展，用于使用 ImageMagick API 创建和修改图像。此处提供了扩展的文档。
> phMagick 是 ImageMagick 的包装器类，将最常见的 Web 图像操作操作包装在易于使用的函数中，但允许通过向其命令行程序发出系统调用来完全访问 ImageMagick 的功能。
> 
> ImageMagick® 是一个用于创建、编辑和合成位图图像的软件套件。它可以读取、转换和写入各种格式（超过 100 种）的图像，包括 DPX、EXR、GIF、JPEG、JPEG-2000、PDF、PhotoCD、PNG、Postscript、SVG 和 TIFF。使用 ImageMagick 可以平移、翻转、镜像、旋转、缩放、剪切和变换图像，调整图像颜色，应用各种特殊效果，或绘制文本、线条、多边形、椭圆和贝塞尔曲线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-22T08:53:09.047

使用 PHP 中的 GD2 库，您可以轻松地旋转图像，将其临时存储为 PNG，然后像现在一样在页面中使用它。

应该有大量的脚本，它们给出了如何使用 GD2 的一个很好的例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-04-16T14:23:01.850

我认为这就是您要寻找的：

[http://wilq32.adobeair.pl/jQueryRotate/Wilq32.jQueryRotate.html](http://wilq32.adobeair.pl/jQueryRotate/Wilq32.jQueryRotate.html)

# jquery - JQuery 可重用函数

> ID：775970
> 
> 赞同：1
> 
> 时间：2009-04-22T06:49:40.013
> 
> 标签：jquery, function, row, reusability

对 JQuery 完全陌生，所以我每天都在学习。

我注意到的一件事是它是多么容易，你可以写

```
$('div#test).remove(); 
```

但我正在寻找有关如何重用某些代码的示例，例如：

```
function RemoveTableRow(row, id) 
{
   $(row).remove();
   // id should be used for ajax call
} 
```

然后在我的锚标签上添加一个“点击”

```
onclick="RemoveTableRow('user-row-1', 32);" 
```

但不知何故它不起作用，即使我将它添加到 document.ready 函数中。有人可以为我剪掉它，这是这样做的最佳实践方式吗？

提前致谢。这个论坛是杀手！

**更新**

我从这里获得的帮助中更新了代码。这是我当前的代码，我想知道它是否是最好的方法。

```
function RemoveTableRow(row, id) {
            $.ajax({
             type: "POST",
             url: "Default.aspx/DeleteEmployee",
             data: "{'ID':'" + id + "'}",
             beforeSend: function() {
                  $("#" + row).animate({'backgroundColor':'#fb6c6c'},300);
             },
             success: function() {
              $("#" + row).slideUp(300,function() {
                    $("#" + row).remove();
              });
             }
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T06:54:28.800

user-row-1 是表行的 ID 吗？如果是，那么您在选择器中缺少 #

```
function RemoveTableRow(row, id) {
   $('#'+row).remove();
   // id should be used for ajax call
} 
```

或者不改变函数，用完整的选择器调用它

```
onclick="RemoveTableRow('#user-row-1', 32);" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T06:56:55.207

您要将onclick绑定到哪里？假设它是一个带有 id myid 的 DOM 元素，那么这将是：

```
("#myid").click(function () {RemoveTableRow('user-row-1', 32);} ); 
```

# asp.net - asp：在表格控件（web控件）的表格单元格中添加web控件。

> ID：775973
> 
> 赞同：0
> 
> 时间：2009-04-22T06:50:44.363
> 
> 标签：asp.net, insert, controls

我在面板中插入了一个表格 Web 控件。在该表的单元格中，我想插入其他用户控件，如标签、面板。我无法做到这一点。布局和表格 web 控件的普通表格是否有任何区别。如果是，那么如何在面板中插入简单表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-22T07:48:10.370

您需要向我们提供更多信息。

我看不出你在做什么有任何问题，你能举个例子吗？是来自后面的代码还是在 aspx 代码中？

```
<asp:Panel runat="server" id="pnl_something">
  <table>
     <tr>
         <td>
             <asp:Label runat="server" id="lbl_inside" />
         </td>
     </tr>
  </table>
</asp:Panel> 
```

我没有测试过那个代码，只是在这里写的。如果您从后面的代码中添加它，您应该首先构建表格并在 td 的控件中添加标签。

希望它有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-22T11:59:51.703

实际上我使用的是 asp:table 而不是 html:table 。在 asp:table 中我无法添加任何控件。但现在问题已解决。谢谢

# ruby-on-rails - 如何在 activerecord 之外创建 activerecord 样式验证？

> ID：775976
> 
> 赞同：1
> 
> 时间：2009-04-22T06:51:00.510
> 
> 标签：ruby-on-rails, ruby, activerecord

我正在为我公司编写的软件开发一个测试框架。我们的产品是基于网络的，在我运行 RESTful 请求后，我想处理结果。我希望能够在每个命令类中进行 activerecord 类型验证，以便在运行后自动针对所有“验证”测试结果。但是，我不知道该怎么做。我的代码看起来像这样（简化以显示重要部分）。

```
class CodesecureCommand
  def execute
    result = RestClient.post("http://#{codesecure.host_name_port}#{path}", post_data)

    return parse(result) #parse simple returns a Hpricot document
  end
end

class RunScan < CodesecureCommand

  #What I have now
  #I have to override the execute function so that it calls the local success method
  #to see if it failed or not.
  def execute()
    result = super()

    if success(result)
      return true
    else
    end

  end

  def success(result)
    result.search('div.transaction-message') do |message|
      if message.innerHTML.scan(/Configure abuse setting for domain users successfully\./).length == 1
        return true
      end
    end
  end

  #What I would like is to be able to call execute (without having to override it).
  #then after it runs it calls back to this class to check

  #if the regex matches the command was successful and returns true
  test_success /regex/

  #if test_success fails then these are called
  #the idea being that I can use the regex to identify errors that happened then
  #report them to the user
  identify_error /regex/, "message"
  identify_error /regex/, "message"
  end
end 
```

我想要的是，在调用执行方法之后，会自动调用 test_success 和 identify_error，就像 activerecord 中的验证一样。谁能告诉我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T08:39:04.977

在没有过多查看您的代码的情况下，这是我对实现验证类方法的看法：

```
module Validations
  def self.included(base)
    base.extend ClassMethods
  end

  def validate
    errors.clear
    self.class.validations.each {|validation| validation.call(self) }
  end

  def valid?
    validate
    errors.blank?
  end

  def errors
    @errors ||= {}
  end

  module ClassMethods
    def validations
      @validations ||= []
    end

    def validates_presence_of(*attributes)
      validates_attributes(*attributes) do |instance, attribute, value, options|
        instance.errors[attribute] = "cant't be blank" if value.blank?
      end
    end

    def validates_format_of(*attributes)
      validates_attributes(*attributes) do |instance, attribute, value, options|
        instance.errors[attribute] = "is invalid" unless value =~ options[:with]
      end
    end

    def validates_attributes(*attributes, &proc)
      options = attributes.extract_options!

      validations << Proc.new { |instance|
        attributes.each {|attribute|
          proc.call(instance, attribute, instance.__send__(attribute), options)
        }
      }
    end
  end
end 
```

它假定 ActiveSupport 存在，它位于 Rails 环境中。您可能希望使用 扩展它以允许每个属性出现多个错误`instance.errors[attribute] << "the message"`，但我省略了这样的晦涩之处，以使这个简短的示例尽可能简单。

这是一个简短的用法示例：

```
class MyClass
  include Validations

  attr_accessor :foo
  validates_presence_of :foo
  validates_format_of :foo, :with => /^[a-z]+$/
end

a = MyClass.new
puts a.valid?
# => false

a.foo = "letters"
puts a.valid?
# => true

a.foo = "Oh crap$(!)*#"
puts a.valid?
# => false 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-24T18:08:20.650

你想要[Validatable](http://validatable.rubyforge.org/)：`sudo gem install validatable`

```
class Person
  include Validatable
  validates_presence_of :name
  attr_accessor :name
end 
```

此外，Validatable 不依赖于 ActiveSupport。

# vb6 - 使用 VB6.0 为 CR 8.5 参数设置默认值

> ID：775982
> 
> 赞同：1
> 
> 时间：2009-04-22T06:53:52.000
> 
> 标签：vb6, crystal-reports

我需要使用 VB6.0 在 CR 8.5 中的帮助
我想为 VB6.0 中的水晶报表参数设置默认值。
可能吗？
使用水晶报表 8.5、Visual Basic 6.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-25T10:44:30.793

You may try

```
Dim CrParameter as ParameterFieldDefinition

For Each CrParameter in CrReport.ParameterFields
    If CrParameter.Name = "{?YourParameter}" Then
        CrParameter.AddCurrentValue defaultParameter
    End If
Next CrParameter 
```

# internet-explorer - 在 FireFox 和 IE 保存对话框中添加新选项

> ID：775986
> 
> 赞同：0
> 
> 时间：2009-04-22T06:55:16.567
> 
> 标签：internet-explorer, firefox, plugins

我想禁用 IE 和 Firefox 的自定义保存对话框，或者在其中添加一个新的“保存到我的位置”选项。我想我需要为 IE 和 Firefox 创建插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-22T07:37:32.567

是的，我认为您也必须为浏览器编写扩展程序。我不知道如何为 Firefox 的 IE 做到这一点，你可以从那里开始：

[https://developer.mozilla.org/en/Extensions](https://developer.mozilla.org/en/Extensions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-01-12T02:33:56.837

```
if ($.browser.msie)
{
    selectElement.add(option);
}
else
{
    selectElement.add(option, null);
} 
```

# facebook - 您最想复制或最受欢迎的 Web API 是什么？

> ID：775988
> 
> 赞同：3
> 
> 时间：2009-04-22T06:55:47.783
> 
> 标签：facebook, rest, soap, twitter, xml-rpc

肥皂，REST，xmlrpc。Facebook、推特、[插入 web 2.0 站点]。什么是最终的 Web API，哪个是您最有可能在自己的代码中复制的 API，出于什么原因？似乎有些 Web API 引起了开发人员的恶心，而另一些则引起了纯粹的崇拜。如果您被告知为您会效仿的网站/产品开发 API（即使它是矫枉过正）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-10-13T17:33:00.747

[HTTP](http://www.w3.org/Protocols/rfc2616/rfc2616.html)本身。

提供的原语具有表现力，但足够通用，可以应用于广泛的问题。让我白发苍苍的 API 是那些对我将如何使用它们做出毫无根据的假设的 API。HTTP 是漂亮的非规范性的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T08:12:08.100

[37signals](http://www.37signals.com/)的产品具有出色的 API，使用 RESTful XML-over-HTTP。[文档](http://developer.37signals.com/)也相当不错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-15T04:52:58.690

Google GDATA 的 API 集——我使用 YouTube 的——扩展了 Atom，它本身就是一个标准，所以花在开发上的时间也是花在学习这种 RSS 类型协议上的时间，这使它在更多方面具有优势专有的恕我直言。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-10-15T05:01:58.460

Flickr 的 API 相当不错：[http ://www.flickr.com/services/api/](http://www.flickr.com/services/api/)

花了几个月的时间使用它，发现它非常有用。文档也很棒，许多人使它看起来更容易。

REST、JSON/XML/PHP/SOAP 协议，每个端点都有命名空间，每个请求都有很多选项/参数。错误消息和代码也记录在案。

最重要的是，它允许您访问 Flickr 存储的有关其照片和用户的所有信息（当然，具有适当的权限）。一定要喜欢好的 API！

# c# - C# 代码中的下载选项

> ID：775989
> 
> 赞同：1
> 
> 时间：2009-04-22T06:56:15.910
> 
> 标签：c#

我想在我的应用程序中显示 .mdb 文件的下载弹出窗口。我尝试使用以下代码：

```
string path = " D:\New people metrix 7th april\People Metrix New Web\Bin\Inbox.mdb";

HttpContext.Current.Response.ContentType = "application/octet-stream";
HttpContext.Current.Response.AddHeader("Content-Disposition", "attachment; filename=" + System.IO.Path.GetFileName(path));
HttpContext.Current.Response.Clear();
HttpContext.Current.Response.WriteFile(path);
HttpContext.Current.Response.End(); 
```

但我收到此错误：
无法评估表达式，因为代码已优化或本机框架位于调用堆栈顶部。
这个虫子真的要死我了！！！...请帮帮我。

* * *

**我做对了伙计们...我已将图像按钮放在更新面板中，因此不允许下载..非常感谢大家帮助我..**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-22T07:00:30.750

好吧，至少 -在设置标题`Response.Clear()` *后*调用看起来像一个错误 - 尝试将它移到开头？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-10-26T11:39:23.700

sFilePath="下载/query.txt"; sFileName="query.txt"

HttpContext.Current.Response.ContentType = "APPLICATION/OCTET-STREAM"; //因为这 2 行你会弹出 ***String Header = "Attachment; Filename=" + sFileName; HttpContext.Current.Response.AppendHeader("Content-Disposition", Header);***

```
 System.IO.FileInfo Dfile = new System.IO.FileInfo(HttpContext.Current.Server.MapPath(sFilePath));
       HttpContext.Current.Response.WriteFile(Dfile.FullName);
     HttpContext.Current.Response.End(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-22T07:23:56.513

我使用这样的东西：

```
 string filePath = Server.MapPath("~/" + document.Path + "/" + document.Filename);
        System.IO.FileInfo targetFile = new System.IO.FileInfo(filePath);
        if(targetFile.Exists)
        {
            Response.Clear();
            Response.AddHeader("Content-Disposition", "attachment; filename=" + targetFile.Name);
            Response.AddHeader("Content-Length", targetFile.Length.ToString());
            Response.ContentType = "application/octet-stream";
            Response.WriteFile(targetFile.FullName);
        } 
```

使用的文档对象是我的一个容器，带有路径和文件名。

试试看，让我知道它是否有效，对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-22T07:39:13.437

我做这样的事情我更喜欢 BinaryWrite 而不是 WriteFile，而且我没有设置内容长度，因为如果您尝试下载 0 字节文件，它会在某些浏览器中抛出。

```
字符串路径 = @"D:\New people metrix 4 月 7 日\People Metrix New Web\Bin\Inbox.mdb";
文件信息文件信息 = 新文件信息（路径）；
HttpContext.Current.Response.Clear();
HttpContext.Current.Response.AddHeader("Content-Disposition", string.Concat("attachment; filename=", path));
HttpContext.Current.Response.ContentType = "应用程序/八位字节流";
HttpContext.Current.Response.BinaryWrite(File.ReadAllBytes(fileinfo,.FullName));
HttpContext.Current.Response.Flush();
HttpContext.Current.Response.End();

```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-22T07:39:40.830

您的路径不会转义“\”字符。当您调用**Path.GetFileName**时，它​​可能会抛出一个异常，该异常被捕获并在代码的其他地方被忽略/翻译。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-22T08:23:07.153

Response.Clear()，似乎是这里的问题。

你可以试试这个。

```
public static void ForcedDownload(HttpResponse response, byte[] buffer, string fileName) {
      response.Clear();
      response.Buffer=true;
      response.AddHeader("content-disposition", string.Format(@"attachment;filename={0}", fileName));
      response.Charset="";
      response.Cache.SetCacheability(HttpCacheability.NoCache);
      response.ContentType="application/octet-stream";
      response.BinaryWrite(buffer);
      response.Flush();
      response.End();
    } 
```

# pvcs - 具有文件夹层次结构的 PVCS 6.0 签出

> ID：775999
> 
> 赞同：0
> 
> 时间：2009-04-22T06:58:52.673
> 
> 标签：pvcs

我们在当前项目中使用 PVCS 6.0。我想将整个项目连同文件夹层次结构一起检出到我的工作目录中。

目前，如果我选择项目并进行结帐，它只是将所有文件转储到我的工作文件夹中，没有任何层次结构。关于如何去做的任何想法？...

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-12-11T13:09:41.287

您必须创建一个私有工作区并在每个子目录的属性中配置工作区设置。我记得我在手册的某处读过你可以使用“。”来解决问题。作为位置...无论如何硬编码属性中的路径应该没问题。**