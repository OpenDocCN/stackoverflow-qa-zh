# StackOverflow 问答 11861000-11861999

# extjs4 - ExtJS4 - Internet Explorer 的网格面板标题中未显示所有标题

> ID：11861005
> 
> 赞同：0
> 
> 时间：2012-08-08T08:54:39.483
> 
> 标签：extjs4

我面临 extjs 4 网格面板标题的问题。我的网格面板中有四列。让我们假设它们是 1、2、3 和 4。标题 1 和 2 没有显示，但在其他显示的标题（3 或 4）的宽度发生轻微变化时，所有四个标题都会准确显示。此问题仅在 IE 中发生。我在 Chrome 和 Firefox 中尝试过，效果很好。我正在使用 IE8。请尽早提供您的宝贵意见。提前致谢。

问候， 阿尼克

*通过按照 IE-8 标准制作 Internet Explorer 文档模式解决了这个问题。只需在 jsp 页面的标签中添加以下代码：*

```
<META http-equiv="X-UA-Compatible" content="IE=8"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:27:45.257

我们通过将以下行添加到相应的 CSS 解决了类似的问题

```
.some-class {
zoom: 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:27:25.413

尝试使用 Ext.viewport

```
var viewport = new Ext.Viewport({
  layout: 'fit',
  border: false,
  items: your grid panel
}) 
```

# sql-server - 电源视图布局问题

> ID：11861007
> 
> 赞同：1
> 
> 时间：2012-08-08T08:54:43.510
> 
> 标签：sql-server, reporting-services, sql-server-2012, powerpivot, powerview

有人在电源视图上开发吗？我今年有一个切片器，但我想将它显示在 X 列而不是 X 行中。它在电源轴上很容易做到，但我不知道如何在电源视图上做到这一点。

是否可以？

![在此处输入图像描述](../Images/64e8cfd44cd272e85140721510c8a7fb.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T04:32:22.063

您目前无法在 Power View 中更改切片器的布局。这是一个很棒的功能请求，我几乎可以肯定已经登录 Connect。如果它不存在，请随意投票或将其添加为新的，但我们肯定会听到你的声音:)

-肖恩

# android - Android：如何设置保存文件等的路径，例如在我们编写的窗口中 c:/someting/...我将在 android 中做什么

> ID：11861008
> 
> 赞同：1
> 
> 时间：2012-08-08T08:54:43.690
> 
> 标签：android, android-emulator

我正在尝试录制语音并将其保存在文件中。为此，我必须提供一个保存文件的路径，但我不知道如何设置路径...我最近开始使用 android 手机。在 Windows 中，我们将路径设置为驱动器，例如 C:/folder/folder....在 android 手机中，我的根目录是什么？我在哪里可以保存音频文件？现在写我正在使用模拟器......模拟器和手机的路径是否相同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T09:05:43.683

我们可以创建这样的文件`SD card`

```
String root = Environment.getExternalStorageDirectory().toString();
File myDir = new File(root + "/folder");    
myDir.mkdirs();    
String fname = "file";
File file = new File (myDir, fname); 
```

file 是您存储的文件的路径。

并将其添加`Permission`到清单中

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T09:07:40.277

```
_path=Environment.getExternalStorageDirectory().getPath() + "/RECORDS/";
            //                        ||                       || 
            //                        VV                       VV 
            //                  storage path              folder name 
fileName =  String.format("filename.mp3");
File file = new File(_path, fileName);
try {
    file.createNewFile();
    } catch (IOException e) {
    e.printStackTrace();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T09:20:58.247

```
Uri outputFileUri;

File root = new File(Environment.getExternalStorageDirectory()

     + File.separator + "myDir" + File.separator);

   root.mkdirs();

   sdImageMainDirectory = new Filenter code here(root, "myPicName.jpg");

   outputFileUri = Uri.fromFile(sdImageMainDirectory); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T09:00:15.800

将文件保存在 SD 卡中。

```
 File path = Environment.getExternalStorageDirectory();
    String cardName = path.getName();
    path=cardName+"/mypathname/file_name.mp3"; 
```

在模拟器中也可以。创建 sdcard ，当你创建模拟器。

谢谢

# jquery - 如何计算已选中的复选框数量

> ID：11861024
> 
> 赞同：14
> 
> 时间：2012-08-08T08:55:16.677
> 
> 标签：jquery

我有一个`HTML`表格，第一列由`checkboxes`等组成，当用户单击一个按钮时，我想检查是否有任何复选框，`checked`然后再转到后面的代码等。

这就是我所拥有的，但它一直在抛出`error`

```
Microsoft JScript runtime error: Syntax error, unrecognized expression: input.checkbox:checked"] 
```

这是我的代码，我只想返回实际检查了多少复选框的计数。

```
 $('#BtnExportToExcel').click(function () {
              var check = ('#gvPerformanceResult').find('input.checkbox:checked"]').length;
              alert(check);
        return false;
        }): 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-08T08:56:22.993

您的语法无效（`$`开头和`"]`结尾都没有）。

改变：

```
('#gvPerformanceResult').find('input.checkbox:checked"]').length; 
```

到：

```
$('#gvPerformanceResult').find('input.checkbox:checked').length; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-08T08:56:55.787

你在函数中有一个悬空括号`find()`，试试这个

```
$('#BtnExportToExcel').click(function () {
   var check = $('#gvPerformanceResult').find('input[type=checkbox]:checked').length;
   alert(check);
   return false;
}): 
```

请注意，根据您的回答，您似乎想要所有复选框`#gvPerformanceResult`而不是类的复选框`.checkbox`- 用于`[type=checkbox]`选择这些复选框

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-08-08T09:00:42.477

```
$('input[type="checkbox"]:checked').length; 
```

这将返回选中复选框的数量。

* * *

严格：

```
$('#gvPerformanceResult').find('input[type="checkbox"]:checked').length; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-08T08:58:07.937

弄清楚了

```
$('#BtnExportToExcel').click(function () {
    var check = $("input:checkbox:checked").length
    alert(check);
}); 
```

# hibernate - 休眠缓存配置

> ID：11861027
> 
> 赞同：0
> 
> 时间：2012-08-08T08:55:46.890
> 
> 标签：hibernate, ehcache

我在一个项目中找到了 ehcache 的下一个配置。对我来说它看起来很奇怪，我不明白 A.blist 缓存配置了什么。请帮我理解这个配置。

实体 A 具有 B 类型实体的列表

> ```
> <cache name="A.blist"
>        maxElementsInMemory="10000"
>        eternal="false"
>        overflowToDisk="false"
>        memoryStoreEvictionPolicy="LRU" />
> 
> <cache name="B"
>        maxElementsInMemory="5000"
>        eternal="true"
>        overflowToDisk="false"
>        memoryStoreEvictionPolicy="LRU" /> 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:14:42.153

Hibernate 在独立缓存中缓存集合。因此，如果您有一个具有列表或集合的实体，它将需要它自己的缓存。

这在[hibernate-ehcache 集成文档](http://ehcache.org/documentation/integrations/hibernate#collections)中进行了解释。

# entity-framework - EF 4.3.1 代码优先表索引映射或创建

> ID：11861029
> 
> 赞同：0
> 
> 时间：2012-08-08T08:55:56.360
> 
> 标签：entity-framework, mapping, code-first, table-index

我一直在寻找一种方法来首先从 EF 代码创建或配置表上的特定索引，但真的找不到任何东西。映射流利的 Api 似乎没有公开任何方法来做到这一点。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:10:30.013

您可以将索引创建添加到链接答案中提到的自定义数据库初始化程序，也可以使用[基于代码的迁移](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx)。迁移[为索引创建提供支持](http://msdn.microsoft.com/en-us/library/hh829515%28v=vs.103%29.aspx)。

# opencv - opencv 2.4.2 findContours 导致堆栈溢出

> ID：11861033
> 
> 赞同：3
> 
> 时间：2012-08-08T08:56:25.843
> 
> 标签：opencv

我尝试使用 VS 2010 在 Windows 中从[此处](http://docs.opencv.org/2.4.2/doc/tutorials/imgproc/shapedescriptors/find_contours/find_contours.html)运行示例程序，但它一直给我一个 Stack Overflow 错误。我正在使用 OpenCV 2.4.2 相同的代码在 OpenCV 2.3.1 上运行良好。

我不确定我哪里出错了。我从源代码构建 OpenCV 并动态链接库。你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T07:27:44.223

我遇到过同样的问题。这些到[此处](http://code.opencv.org/issues/2218)和[此处](http://code.opencv.org/issues/2358)的链接显示了您的问题的原因。

只需`OPENCV_CAN_BREAK_BINARY_COMPATIBILITY`在构建 opencv 时取消选中即可。

# objective-c - 在 XCode 之外从钥匙串中检索存储的密码失败

> ID：11861037
> 
> 赞同：5
> 
> 时间：2012-08-08T08:56:51.350
> 
> 标签：objective-c, macos, osx-mountain-lion

我按照 Apple 在“钥匙串服务编程指南”中的示例代码将通用密码存储在钥匙串中。

只要我在 Xcode 的调试模式下运行应用程序，一切正常。但是，当我存档和导出应用程序时，它仍会存储密码（在 Keychain Access 中可见），但无法检索它们。

钥匙串不断返回 errSecAuthFailed (-25293)。这发生在山狮身上，而不是雪豹身上。我的应用程序经过代码签名和沙盒处理。在我看来，在检索密码时，钥匙串不会将应用程序识别为存储密码的同一个应用程序，因为当我将密码设置为任何应用程序都可以访问时，它也能正常工作。

我使用以下代码：

```
+ (NSString*) retrievePasswordFromKeychainWithKey: (NSString*) theKey {    
    SecKeychainUnlock(NULL, 0, NULL, FALSE);
    const char* userNameUTF8 = [NSUserName() UTF8String];
    uint32_t userNameLength = (uint32_t)strlen(userNameUTF8);
    uint32_t serviceNameLength = (uint32_t)strlen([theKey UTF8String]);

    uint32_t pwLength = 0; 
    void* pwBuffer = nil; 
    SecKeychainItemRef itemRef = nil;
    OSStatus status1 = SecKeychainFindGenericPassword (NULL, serviceNameLength,  serviceNameUTF8, userNameLength, userNameUTF8, &pwLength, &pwBuffer, &itemRef);

    if (status1 == noErr) {
        NSData* pwData = [NSData dataWithBytes:pwBuffer length:pwLength];
        SecKeychainItemFreeContent (NULL,     //No attribute data to release
                                    pwBuffer    //Release data buffer allocated by SecKeychainFindGenericPassword
                                    );
        return [NSString stringWithCString:[pwData bytes] encoding:NSUTF8StringEncoding];
    }
    //status1 is always -25293
    return nil;   
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T12:28:52.990

好的，我刚刚得知这是 Mac OS 10.8.0 中的一个开放错误。使用 Developer ID 签名的应用无法访问钥匙串中的数据。我希望这将在 10.8.1 中修复...

一种解决方法是不要使用您的开发人员 ID 对应用程序进行签名。（我也读过在 Lion 下构建的应用程序不受此错误的影响，但我无法对此进行测试）

# c++ - DP - 数硬币找零

> ID：11861038
> 
> 赞同：0
> 
> 时间：2012-08-08T08:56:54.600
> 
> 标签：c++, algorithm, dynamic-programming, coin-change

该问题需要计算特定成本的硬币变化次数。

例如，如果我的硬币值为`50, 20, 10, 5, 1`，我可以形成以下成本：

5 => (5), (11111)，这是 2 种方式。

10 => (10), (5, 5), (5, 11111), (11111, 11111)，这是 4 种方式。

这是我的功能。它从 10 的成本中返回错误的结果（返回 9 种方式，而实际的方式只有 4 种）

```
int dp[10000];
int coins[] = { 50, 20, 10, 5, 1 };
int rec(int n)
{
  if (n == 0) return 1;
  if (dp[n] != -1) return dp[n];
  int cnt = 0;
  for (int i = 0; i < 5; i++)
    if (coins[i] <= n) cnt += rec(n - coins[i]);
  return dp[n] = cnt;
} 
```

如何修复此功能以提供正确数量的方式？这个算法是否正确？[在此处](http://ideone.com/9rHCQ)查看完整的代码及其输出

**注意**：我的问题不在于`dp`数组初始化。我在每次调用之前都`memset`将其初始化为.`-1``rec`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:17:42.060

(5, 1, 1, 1, 1, 1) 和 (1, 1, 1, 5, 1, 1) 在你的算法中是不同的方式，你应该让它减少。

```
int dp[10000][5];  // dp[20][2] means, if the biggest coin is coins[2],
                   // how much ways for 20 ?
int coins[] = { 1, 5, 10, 20, 50 }; // here
int rec(int n, int m)
{
  int cnt = 0;
  int i;
  if (n == 0) return 1;
  //if (m == 0) return 1;
  if (dp[n][m] != -1) return dp[n][m];
  for (i = 0; i <= m; i++)
    if (coins[i] <= n) cnt += rec(n - coins[i], i);
  return dp[n][m] = cnt;
}

int main()
{
        memset(dp, -1, sizeof(dp));
        printf("%d\n", rec(10, 4));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:08:46.923

结果是错误的，因为您永远无法确保您的算法从 5 个硬币开始。(5,11111) 在您的代码中与 (1, 5, 1111) 一样有效，但结果相同。你的结果应该是错误的 6 和更高，而不是 10 和更高。

要解决这个问题，你可以在你的函数 rec() 中做一个截止：

```
int rec(int n, int cutoff)
{
  if (n == 0) return 1;
  if (dp[n] != -1) return dp[n];
  int cnt = 0;
  for (int i = cutoff; i < 5; i++)
    if (coins[i] <= n) cnt += rec(n - coins[i], i);
  return dp[n] = cnt;
} 
```

应该这样做。

编辑：你将不得不照顾你的 dp[] 数组，因为它不关心这个截止，但这通常是你遇到的错误。您可以评论该行，并检查这是否有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T09:12:18.487

一句话：你的初始化

```
memset(dp, -1, sizeof dp); 
```

不是很安全。`memset`初始化内存空间的每个*字节*（参见[http://www.cplusplus.com/reference/clibrary/cstring/memset/](http://www.cplusplus.com/reference/clibrary/cstring/memset/)。）。对于这种特殊情况，您很幸运，并且 的表示`int(-1)`（可能）与四次相同`unsigned char(-1)`。

我建议使用`std::fill`（[http://www.cplusplus.com/reference/algorithm/fill/](http://www.cplusplus.com/reference/algorithm/fill/)）。

# java - 使用 iText 在所有续页中重复 PdfPTable 标题

> ID：11861040
> 
> 赞同：17
> 
> 时间：2012-08-08T08:56:57.043
> 
> 标签：java, itext

`PdfPTable`如果表格的长度超过一页，如何在所有页面中重复 a 的标题？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-08T09:07:28.390

看看。`setHeaderRows(int headerRows)`_ `PdfPTable`在那里定义为标题的行应该保留在新页面上。

```
table.setHeaderRows(1) 
```

第一行作为标题。

请参阅[API](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfPTable.html#setHeaderRows%28int%29)。

# ruby-on-rails - 活动记录错误

> ID：11861046
> 
> 赞同：0
> 
> 时间：2012-08-08T08:57:29.943
> 
> 标签：ruby-on-rails, activerecord

我有两个模型课，

```
class Designation < ActiveRecord::Base
  attr_accessible :name
  validates :name, presence: true, uniqueness: { case_sensitive: false }
  has_many :employee_details
  accepts_nested_attributes_for :employee_details
end 
```

和

```
class EmployeeDetail < ActiveRecord::Base
  belongs_to :Designation
  attr_accessible :bloodGroup, :dob, :doc, :doj, :empId, :name, :panNo, :status, :Designation
end 
```

我已经为 EmployeeDetail 生成了默认脚手架。当我尝试在指定文本框中创建和输入整数值时，来自 EmployeeDetail 页面，它给了我错误 `ActiveRecord::AssociationTypeMismatch in EmployeeDetailsController#create Designation(#81846160) expected, got String(#75419260)`。

谁能帮我解决这个问题？EmployeeDetailController#create:- def create @employee_detail = EmployeeDetail.new(params[:employee_detail])

```
respond_to do |format|
  if @employee_detail.save
    format.html { redirect_to @employee_detail, notice: 'Employee detail was successfully created.' }
    format.json { render json: @employee_detail, status: :created, location: @employee_detail }
  else
    format.html { render action: "new" }
    format.json { render json: @employee_detail.errors, status: :unprocessable_entity }
  end
end 
```

结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:24:24.897

当您关联任何模型时，您应该使用模型名称的小写版本。

改变：

```
belongs_to :Designation 
```

至：

```
belongs_to :designation 
```

# php - CSV 矩阵到 Mysql

> ID：11861047
> 
> 赞同：0
> 
> 时间：2012-08-08T08:57:32.697
> 
> 标签：php, csv

我试图让这段代码工作，因为它正是我所追求的： [http ://www.reloadedpc.com/php/php-convert-csv-price-matrix-mysql-table/](http://www.reloadedpc.com/php/php-convert-csv-price-matrix-mysql-table/)

虽然我收到此错误：

> 警告：array_merge() [function.array-merge]：参数 #1 不是第 580 行 C:\xampp\htdocs\matrix\Csv.php 中的数组
> 
> 警告：array_merge() [function.array-merge]：参数 #1 不是第 580 行 C:\xampp\htdocs\matrix\Csv.php 中的数组
> 
> 警告：array_merge() [function.array-merge]：参数 #1 不是第 580 行 C:\xampp\htdocs\matrix\Csv.php 中的数组
> 
> 致命错误：无法访问第 24 行 C:\xampp\htdocs\matrix\index.php 中的受保护属性 Csv::$field_names

第 580 行是 Csv.php 的以下内容：

```
$this->contents[$line_nr][(int) $position] = array_merge( $this->contents[$line_nr][(int) $position] ); 
```

index.php 的第 24 行（和第 23 行）是：

```
//get the row of width increments
$stack = $csv->field_names; 
```

Csv.php 文件可以在这里查看：http: [//hg.mijnpraktijk.com/csv-library/src/e4397b31002d/Csv.php](http://hg.mijnpraktijk.com/csv-library/src/e4397b31002d/Csv.php)

有什么建议么？

多谢你们。

**-EDIT-** 整个代码块是：

```
 foreach ( $this->contents as $line_nr => $line )
                {

                        if ( array_key_exists( (int) $position, $this->contents[$line_nr] ) )
                        {
                             $return[$line_nr] = $this->contents[$line_nr][(int) $position];
                                unset( $this->contents[$line_nr][(int) $position] );
                                // reindex after removal
                                $this->contents[$line_nr][(int) $position] = array_merge($this->contents[$line_nr][(int) $position] );
                        }
                } 
```

它似乎取消了它。$this->contents[$line_nr][(int) $position] 是矩阵的标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:10:16.690

如果您查看错误的最后一行，它会显示：

> 致命错误：无法访问第 24 行 C:\xampp\htdocs\matrix\index.php 中的受保护属性 Csv::$field_names

现在转到您发布的 Csv.php 链接并查看代码，您会看到确实`field_names`定义为: `protected $field_names = array();`，这意味着您无法直接访问它，除非您扩展 Csv 类。

如果您不想扩展此类，只需使用公共方法：

```
$csv->get_field_names(); 
```

# android - 从 11 api 到更低的端口片段没有工作

> ID：11861048
> 
> 赞同：1
> 
> 时间：2012-08-08T08:57:33.507
> 
> 标签：android, android-fragments, android-fragmentactivity

我在 Vogel 网站上找到了 AndroidFragment 教程，并为 Android 4.0 做。然后我尝试将其移植到较低版本，例如 API 8。

一直以来，当我启动我的应用程序时，我都有 ClassNotFound 异常

请帮我修复错误。

有我的 MainActivity 文件：

```
package com.dev.fragments;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;

public class MainActivity extends FragmentActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

} 
```

有我的 main.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <fragment
        android:id="@+id/listFragment"
        android:layout_width="150dip"
        android:layout_height="match_parent"
        android:layout_marginTop="?android:attr/actionBarSize"
        class="com.dev.fragments.ListFragment" ></fragment>

    <fragment
        android:id="@+id/detailFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.dev.fragments.DetailFragment" >
        <!-- Preview: layout=@layout/details -->
    </fragment>

</LinearLayout> 
```

有我的 ListFragment 文件：

```
package com.dev.fragments;

import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class ListFragment extends android.support.v4.app.ListFragment {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
                "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
                "Linux", "OS/2" };
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(getActivity(),
                android.R.layout.simple_list_item_1, values);
        setListAdapter(adapter);
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        String item = (String) getListAdapter().getItem(position);
        DetailFragment fragment = (DetailFragment) getFragmentManager()
                .findFragmentById(R.id.detailFragment);
        if (fragment != null && fragment.isInLayout()) {
            fragment.setText(item);
        } else {
            Intent intent = new Intent(getActivity().getApplicationContext(),
                    DetailActivity.class);
            intent.putExtra("value", item);
            startActivity(intent);

        }

    }
} 
```

有我的 DetailFragment 文件：

```
package com.dev.fragments;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

public class DetailFragment extends Fragment {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.e("Test", "hello");
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.details, container, false);
        return view;
    }

    public void setText(String item) {
        TextView view = (TextView) getView().findViewById(R.id.detailsText);
        view.setText(item);
    }

} 
```

有我的清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.dev.fragments"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="4"
        android:targetSdkVersion="15" />

    <application
        android:label="@string/app_name">
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".DetailActivity"></activity>
    </application>

</manifest> 
```

还有我的错误：

```
08-08 08:55:02.126: E/AndroidRuntime(454): FATAL EXCEPTION: main
08-08 08:55:02.126: E/AndroidRuntime(454): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.dev.fragments/com.dev.fragments.MainActivity}: java.lang.ClassNotFoundException: com.dev.fragments.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.dev.fragments-2.apk]
08-08 08:55:02.126: E/AndroidRuntime(454):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
08-08 08:55:02.126: E/AndroidRuntime(454):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
08-08 08:55:02.126: E/AndroidRuntime(454):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
08-08 08:55:02.126: E/AndroidRuntime(454):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
08-08 08:55:02.126: E/AndroidRuntime(454):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-08 08:55:02.126: E/AndroidRuntime(454):  at android.os.Looper.loop(Looper.java:123)
08-08 08:55:02.126: E/AndroidRuntime(454):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-08 08:55:02.126: E/AndroidRuntime(454):  at java.lang.reflect.Method.invokeNative(Native Method)
08-08 08:55:02.126: E/AndroidRuntime(454):  at java.lang.reflect.Method.invoke(Method.java:521)
08-08 08:55:02.126: E/AndroidRuntime(454):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-08 08:55:02.126: E/AndroidRuntime(454):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-08 08:55:02.126: E/AndroidRuntime(454):  at dalvik.system.NativeStart.main(Native Method)
08-08 08:55:02.126: E/AndroidRuntime(454): Caused by: java.lang.ClassNotFoundException: com.dev.fragments.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.dev.fragments-2.apk]
08-08 08:55:02.126: E/AndroidRuntime(454):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
08-08 08:55:02.126: E/AndroidRuntime(454):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
08-08 08:55:02.126: E/AndroidRuntime(454):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
08-08 08:55:02.126: E/AndroidRuntime(454):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
08-08 08:55:02.126: E/AndroidRuntime(454):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:11:04.213

我猜这是一个logcat错误？

我没有接受过移植 v4 支持包的培训，但您的 MainActivity 似乎没有正确部署，尽管没有正确放入**com.dev.fragments-2.apk**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T21:51:06.733

**public void onActivityCreated(Bundle savedInstanceState)**

*从API 11*开始使用的上述方法

 *在此之前它不存在。

```
 :) 
```*

# sql - 有或没有不同的甲骨文交集

> ID：11861049
> 
> 赞同：3
> 
> 时间：2012-08-08T08:57:38.733
> 
> 标签：sql, oracle, query-optimization

我有以下查询：

```
select id from t1
intersect
select id from t2
intersect
select id from t3 
```

id 在某些表中可能是非唯一的，所以我需要使用 distinct。

一般来说，什么更好：

```
select distinct id from (
select id from t1
intersect
select id from t2
intersect
select id from t3) 
```

或者

```
select distinct id from t1
intersect
select id from t2 -- here id is unique
intersect
select distinct id from t3 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T09:07:30.620

没有必要`DISTINCT`。运算符会自动生成一组不同的`INTERSECT`值。正如您在此示例中所看到的，`x`有两行 an`ID`为 1，`y`只有一行 an`ID`为 1，并且两者`INTERSECTION`中的 the 仅产生一行

```
SQL> ed
Wrote file afiedt.buf

  1  with x as (select 1 id from dual union all select 1 from dual),
  2       y as (select 1 id from dual)
  3  select id
  4    from x
  5  intersect
  6  select id
  7*   from y
SQL> /

        ID
----------
         1 
```

即使您自己使用`INTERSECT`两行表，您仍然会在输出中获得单行

```
SQL> ed
Wrote file afiedt.buf

  1  with x as (select 1 id from dual union all select 1 from dual)
  2  select id
  3    from x
  4  intersect
  5  select id
  6*   from x
SQL> /

        ID
----------
         1 
```

# exception - WSO2 Identity Server 无法通过 API 添加具有多个声明值的用户

> ID：11861056
> 
> 赞同：3
> 
> 时间：2012-08-08T08:58:20.290
> 
> 标签：exception, wso2, axis2, wso2is, user-management

我正在尝试使用 UserStoreManager 在 WSO2 身份服务器中添加用户帐户。添加具有或不具有一个声明值的用户时，我没有问题，但是当我尝试在声明的映射中添加多个声明值时，它会抛出一个异常：

```
org.wso2.carbon.um.ws.api.WSUserStoreManager handleException 
SEVERE: Can not access the directory context oruser already exists in the system
org.apache.axis2.AxisFault: Can not access the directory context oruser already exists in the system.. 
```

这是我使用的代码

```
Map<String, String> claims = new HashMap<String, String>();
claims.put("http://wso2.org/claims/givenname", "John");
//second value causing the exception
claims.put("http://wso2.org/claims/lastname", "Doe");
STORE_MANAGER.addUser("JohnDoe", "123456",
      new String[] { Constants.DEFAULT_ROLE }, claims, "default"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:23:17.860

您使用的 IS 版本是什么？

顺便说一句，请试试这个

```
Map<String, String> claims = new HashMap<String, String>();

claims.put("http://wso2.org/claims/givenname", "John");

claims.put("http://wso2.org/claims/lastname", "Doe");

remoteUserStoreManager.addUser("JohnDoe", "123456",null, claims, "default"); 
```

# java - @Scheduled Job 10 天使用 Spring Java[关闭]

> ID：11861058
> 
> 赞同：0
> 
> 时间：2012-08-08T08:58:26.503
> 
> 标签：java, spring, scheduled-tasks, quartz-scheduler

我需要创建一个计划作业，该作业将在每**10**天**间隔后发生。**但是我不确定Spring的**@Scheduled注释的参数中会写什么。**如果我在 @Scheduled 注释中使用 cron 作为参数，任何人都可以为这项工作定义**cron 表达式，或者*****fixedDelay***会是比***cron***更好的选择吗？

# javascript - JQuery 自动滚动到底部（但在鼠标滚动时禁用）

> ID：11861059
> 
> 赞同：1
> 
> 时间：2012-08-08T08:58:28.587
> 
> 标签：javascript, jquery, events, scroll

我按 $.get 加载我的内容，并按 javascript-auto-scrolling “关注”新附加数据。现在，如果用户“手动滚动”，我想禁用自动滚动，但是下面的滚动到底部函数也会触发 Jquery .scroll() 函数 - 所以它会禁用它的功能。

```
if(self.testelem.hasClass("active")){
    $(document).scrollTop($(document).height());
} 
```

如何接收鼠标滚轮事件或阻止 scrollTop 触发 .scroll() 函数？我还尝试在 scrollTop 工作时设置一个超时来阻止，但这不是一个很好的解决方案并且有一些缺点。

有什么建议么？

**编辑：** 我当前的代码：

我使用按钮#stb（滚动到底部）和类 .active 来关闭/打开它。

```
$.get("url", function(data){
    //do something          
    if(self.testelem.hasClass("active")){
        $(document).scrollTop($(document).height());
    }
}); 

$(document).scroll(function(){
    jQuery('html,body').queue([]).stop();  //try this
    //$("#stb").parent().removeClass("active");
}); 
```

ps：是的，我知道。有几个非常相似的问题。我读过它们，但它们在重要方面有所不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:22:05.567

要停止`scrollTo`用户中断中滚动的事件，请尝试以下操作：

```
$(document).scroll(function(){
    jQuery('html,body').queue([]).stop();  //try this
    //jQuery.scrollTo.window().queue([]).stop(); //failing that try this
}); 
```

# ruby-on-rails - ActiveRecord - 在一个连接中工作

> ID：11861060
> 
> 赞同：0
> 
> 时间：2012-08-08T08:58:30.730
> 
> 标签：ruby-on-rails, activerecord

例如，假设 Rails 3.2.3 中有代码

```
def test_action
  a = User.find_by_id(params[:user_id])
  # some calculations.....
  b = Reporst.find_by_name(params[:report_name])
  # some calculations.....
  c = Places.find_by_name(params[:place_name])
end 
```

此代码向数据库发出 3 个请求并打开 3 个不同的连接。很可能这将是一个相当长的动作。

有没有办法只打开一个连接并在其中执行 3 个请求？或者我想自己控制使用哪个连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:17:12.097

您可以查看[ActiveRecord::ConnectionAdapters::ConnectionPool](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/ConnectionPool.html)文档 此外，AR 不会为每个模型/查询打开连接，它会重用现有连接。

```
[7] pry(main)> [Advertiser.connection,Agent.connection,ActiveRecord::Base.connection].map(&:object_id)
=> [70224441876100, 70224441876100, 70224441876100] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:17:52.590

你会想用括号括起来[`transaction`](http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html)：

> 事务是保护性块，其中 SQL 语句只有在它们都可以作为一个原子操作成功时才​​是永久的。典型的例子是两个账户之间的转账，如果取款成功，您只能进行存款，反之亦然。事务强制执行数据库的完整性并保护数据免受程序错误或数据库故障的影响。因此，基本上，只要您有许多必须一起执行或根本不执行的语句，您就应该使用事务块。

```
def test_action
  User.transaction do
    a = User.find_by_id(params[:user_id])
    # some calculations.....
    b = Reporst.find_by_name(params[:report_name])
    # some calculations.....
    c = Places.find_by_name(params[:place_name])
  end
end 
```

即使它们调用不同的模型，操作也被封装到对数据库的一次调用中。要么全有，要么全无。如果一个在中间失败，那么整个胶囊就会失败。

> 尽管在某些 Active Record 类上调用了事务类方法，但事务块中的对象不必都是该类的实例。这是因为事务是每个数据库连接的，而不是每个模型的。

# vb.net - 在 Visual Basic 中使用循环打印平方数

> ID：11861062
> 
> 赞同：2
> 
> 时间：2012-08-08T08:58:33.817
> 
> 标签：vb.net, loops, numbers, perfect-square

我正在尝试使用 for 循环在 Visual Basic 中打印平方数列表。我是新手，觉得这很难。我正在编写的程序应该打印数字平方的列表，例如（1、4、9、16 等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:56:41.617

```
 Sub Main()

            For number As Integer = 1 To 1000
                Console.WriteLine("Square of {0} : {1}", number, number * number)
            Next

            Console.ReadKey()

    End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:02:26.660

You could add a counter to your loop then each time the loop is executed increment it. Then inside the loop you would just need to times the counter with itself for the square.

```
square = counter*counter; 
```

# winforms - RadControls 或 DevExpress 或 Infragistics 与 ITextSharp

> ID：11861064
> 
> 赞同：0
> 
> 时间：2012-08-08T08:58:38.030
> 
> 标签：winforms, devexpress, itextsharp, infragistics, rad-controls

我正在寻找用于 winform 应用程序的富文本框。C#，.net 4.0

我需要在文本框中支持粗体、下划线、项目符号和编号。将来，希望通过拼写更正添加语言支持。

我需要它来使用 ITextSharp 生成报告。

对于最适合我需要的控件选择，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T12:27:03.317

我以前在各种项目中使用过 RadControls、Infragistics 和 iTextSharp，但没有使用 DevExpress，所以我无法与 DevExpress 交谈。话虽如此，对于您所描述的富文本编辑类型，我认为您可以安全地使用 3 种中的任何一种。如果由我决定，我会选择 Infragistics。

我想在这种情况下这是个人喜好问题，但我一直发现 Infragistics 比 RadControls 更容易使用。我还发现 Infragistics 的文档比 RadControls 的文档更好（从易于定位我要查找的内容的角度来看）。每当我需要帮助时，Infragistics 和 Telerik (RadControls) 支持团队/社区都非常活跃和乐于助人。

就像我说的，我无法与 DevExpress 交谈，但我想在这种情况下它与其他两个非常相似。如果您对 Infragistics 和 RadTools 有任何具体问题，请随时提问。我很乐意回答他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T19:19:28.917

从您的问题中，我无法推断出您在谈论哪种形式的 Windows 应用程序。因为如您所知，我们可以使用 Windows Presentation Foundation 或传统上已知的 WinForms 开发在 .NET 上开发基于 Windows 的应用程序。我不能代表其他人，但肯定可以为您指出 Telerik 提供的用于 Windows 应用程序开发的 2 种风格。他们是：

* * *

**WinForms 的 RadControls - RadRichTextBox：**

![在此处输入图像描述](../Images/fe2abe8c16cd5c118ba104b6b0a107d3.png)

特征：

1.  **富文本格式**- Telerik RadRichTextBox 控件允许您编辑文本并应用富格式选项，例如：
    *   大胆的
    *   斜体
    *   强调
    *   击穿
    *   文字颜色和背景
    *   项目符号和编号列表
    *   段落对齐和缩进
    *   显示/隐藏格式符号
    *   清除格式
    *   上标和下标
2.  **插入图片/符号**
3.  **SpellChecker** - 使用内置或自定义词典对不同语言进行可扩展的拼写检查。
4.  **多级撤消/重做支持**- Telerik RadRichTextBox 凭借其多级撤消/重做功能提供类似桌面的可用性和控制。它允许回顾和撤销过去的操作，就像在 Microsoft Word 中一样。
5.  **两种类型的布局**——分页和流（作为在浏览器中查看的 HTML 页面中的文本）。
6.  **多区域选择**- 内置的多区域支持使您可以同时对多个选择执行各种操作。
7.  **导入/导出**- 使用 Telerik RadRichTextBox 控件，您可以将 XAML、HTML、RTF、DocX（富文本）或 TXT（纯文本）加载到控件中，您可以对其进行格式化和编辑，然后将其导出回上述任何格式或PDF。

有关这方面的更多信息，请访问：[http ://www.telerik.com/products/winforms.aspx](http://www.telerik.com/products/winforms.aspx)

可以在以下位置找到用于 WinForms 的 RichTextBox 的文档：[http ://www.telerik.com/help/winforms/richtextbox-overview.html](http://www.telerik.com/help/winforms/richtextbox-overview.html)

* * *

**WPF 的 RadControls - RadRichTextBox：**

![在此处输入图像描述](../Images/834348c4740bce2b011a0bab21550efd.png)

特征：

1.  **富文本格式**- Telerik RadRichTextBox 控件允许您编辑文本并应用富格式选项，例如：
    *   大胆的，
    *   斜体
    *   强调，
    *   删除线、上标和下标
    *   使用所有可用的系统字体
    *   文字颜色和背景
    *   项目符号和编号列表
    *   段落对齐和缩进
    *   显示/隐藏格式符号
    *   清除格式
2.  **插入图片/符号/超链接/自定义 UI 元素**
3.  **表格支持**——包括嵌套表格、合并单元格、设置不同的 RowSpan 和 ColumnSpan、具有自动宽度的表格等等。
4.  **ContextMenu** - 开箱即用的标准菜单，但可以轻松定制或替换用户定义的菜单。
5.  **SelectionMiniToolbar** - 与 MS Word 中的非常相似，但也可以替换为另一个。
6.  **SpellChecker** - 使用内置或自定义词典对不同语言进行可扩展的拼写检查。
7.  **打印**– 使用 WPF 的本机打印实现。
8.  **多级撤消/重做支持**- Telerik RadRichTextBox 凭借其多级撤消/重做功能提供类似桌面的可用性和控制。它允许回顾和撤销过去的操作，就像在 Microsoft Word 中一样。
9.  **两种类型的布局**——分页和流（作为在浏览器中查看的 HTML 页面中的文本）。
10.  **多区域选择**- 内置的多区域支持使您可以同时对多个选择执行各种操作。
11.  **富文本剪贴板**——允许从 Word、OpenOffice 等中复制/粘贴富文本；导入/导出 - 使用 Telerik RadRichTextBox 控件，您可以将 XAML、HTML、RTF、DocX（富文本）或 TXT（纯文本）加载到控件中，您可以对其进行格式化和编辑，然后将其导出回上述任何格式或PDF。

更多信息可以阅读：[http ://www.telerik.com/products/wpf/overview.aspx](http://www.telerik.com/products/wpf/overview.aspx)

这是 RichTextBox 的文档：[http ://www.telerik.com/help/wpf/radrichtextbox-overview.html](http://www.telerik.com/help/wpf/radrichtextbox-overview.html)

* * *

希望通过以上信息，您能够可视化我们控件提供的选项范围。

Lohith (Tech Evangelist, Telerik India)

# java - Scala/Java - 解析一些文本并删除标点符号的库？

> ID：11861069
> 
> 赞同：1
> 
> 时间：2012-08-08T08:59:08.777
> 
> 标签：java, scala, text, punctuation

我正在使用`BreakIterator`Java 中的实现从字符串中删除标点符号。我需要在 Scala 中重写它，所以我认为这可能是一个用更好的库替换它的好机会（我的实现非常天真，我确信它在边缘情况下会失败）。

是否存在任何可能使用的此类库？

编辑：这是我在 Scala 中的快速解决方案：

```
 private val getWordsFromLine = (line: String) => {
    line.split(" ")
        .map(_.toLowerCase())
        .map(word => word.filter(Character.isLetter(_)))
        .filter(_.length() > 1)
        .toList
  } 
```

考虑到这一点`List[String]`（每行一个......是的......这就是圣经 - 它是很好的测试用例）：

> 摩西的第二本书，称为出埃及记
> 
> 第 1 章 1 这些是进入埃及的以色列人的名字。每个人和他的家人都和雅各一起来。2 流便、西缅、利未和犹大， 3 以萨迦、西布伦和便雅悯， 4 但、拿弗他利、迦得和亚设。

你会得到`List[String]`这样的：

```
List(the, second, book, of, moses, called, exodus, chapter, now, these, are, the, names, of, the, children, of, israel, which, came, into, egypt, every, man, and, his, household, came, with, jacob, reuben, simeon, levi, and, judah, issachar, zebulun, and, benjamin, dan, and, naphtali, gad, and, asher) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T18:35:43.087

对于这种特殊情况，我会使用正则表达式。

```
def toWords(lines: List[String]) = lines flatMap { line =>
  "[a-zA-Z]+".r findAllIn line map (_.toLowerCase)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:10:47.377

这是一种使用正则表达式的方法。不过，它还没有过滤单字符单词。

```
val s = """
THE SECOND BOOK OF MOSES, CALLED EXODUS

CHAPTER 1 1 Now these [are] the names of the children of Israel,
which came into Egypt; every man and his household came with
Jacob. 2 Reuben, Simeon, Levi, and Judah, 3 Issachar, Zebulun,
and Benjamin, 4 Dan, and Naphtali, Gad, and Asher.
"""

/* \p{L} denotes Unicode letters */
var items = """\b\p{L}+\b""".r findAllIn s

println(items.toList)
  /* List(THE, SECOND, BOOK, OF, MOSES, CALLED, EXODUS,
          CHAPTER, Now, these, are, the, names, of, the,
          children, of, Israel, which, came, into, Egypt,
          every, man, and, his, household, came, with,
          Jacob, Reuben, Simeon, Levi, and, Judah,
          Issachar, Zebulun, and, Benjamin, Dan, and,
          Naphtali, Gad, and, Asher)
  */

/* \w denotes word characters */
items = """\b\w+\b""".r findAllIn s
println(items.toList)
  /* List(THE, SECOND, BOOK, OF, MOSES, CALLED, EXODUS,
          CHAPTER, 1, 1, Now, these, are, the, names, of,
          the, children, of, Israel, which, came, into,
          Egypt, every, man, and, his, household, came,
          with, Jacob, 2, Reuben, Simeon, Levi, and, Judah,
          3, Issachar, Zebulun, and, Benjamin, 4, Dan, and,
          Naphtali, Gad, and, Asher)
  */ 
```

[这里](http://answers.oreilly.com/topic/217-how-to-match-whole-words-with-a-regular-expression/)`\b`描述了单词边界，正则表达式的 Javadoc 在[这里](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)。

# iphone - 如何在 iOS 中列出声音文件？

> ID：11861072
> 
> 赞同：1
> 
> 时间：2012-08-08T08:59:32.117
> 
> 标签：iphone, ios, ios5, alarm, avplayer

在我的应用程序中，我导入了 4 个声音文件。现在我想在一个视图中列出所有的声音文件。当用户单击任何一种声音时，需要像在警报应用程序中一样选择并播放它（选择警报声音）。这里的不同之处在于我从我的项目中获得了声音。我在 SO 和 Google 中进行了搜索，但找不到完全解决此问题的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:08:34.480

假设“在我的应用程序中我导入了 4 个声音文件”意味着这些文件在您的应用程序包中（并且还假设文件的扩展名是 MP3 - 您可以将其更改为它们实际具有的任何扩展名）：

```
NSString *bundlePath = [[NSBundle mainBundle] resourcePath];
NSFileManager *mgr = [[NSFileManager alloc] init];

NSArray *allFiles = [mgr contentsOfDirectoryAtPath:bundlePat error:NULL];
for (NSString *fileName in allFiles)
{
    if ([[fileName pathExtension] isEqualToString:@"mp3"])
    {
        NSString *fullFilePath = [bundlePath stringByAppendingPathComponent:fileName];
        // fullFilePath now contains the path to your MP3 file
        DoSomethingWithFile(fullFilePath);
    }
} 
```

# c# - 为什么我的代码会泄漏连接？

> ID：11861080
> 
> 赞同：1
> 
> 时间：2012-08-08T09:00:05.177
> 
> 标签：c#, .net, sql, ado.net, database-connection

问题：

为什么以下代码会泄漏连接？

```
 public System.Data.DataTable GetDataTable()
    {
        System.Data.DataTable dt = new System.Data.DataTable();
        string strConnectionString = "Data Source=localhost;Initial Catalog=MyDb;User Id=SomeOne;Password=TopSecret;Persist Security Info=False;MultipleActiveResultSets=False;Packet Size=4096;";
        System.Data.SqlClient.SqlConnectionStringBuilder csb = new System.Data.SqlClient.SqlConnectionStringBuilder(strConnectionString);
        csb.IntegratedSecurity = true;

        string strSQL = "SELECT * FROM T_Benutzergruppen";

        using (System.Data.SqlClient.SqlConnection sqlcon = new System.Data.SqlClient.SqlConnection(csb.ConnectionString))
        {
            using (System.Data.SqlClient.SqlCommand cmd = new System.Data.SqlClient.SqlCommand(strSQL, sqlcon))
            {
                if (sqlcon.State != System.Data.ConnectionState.Open)
                {
                    sqlcon.Open();
                }

                // First attempt
                //System.Data.SqlClient.SqlDataAdapter sqlda = new System.Data.SqlClient.SqlDataAdapter("SELECT * FROM T_Benutzer", sqlcon);
                //sqlda.Fill(dt);

                cmd.ExecuteNonQuery();
            }

            if(sqlcon.State != System.Data.ConnectionState.Closed)
                sqlcon.Close();
        }
        //sqlcon.ConnectionString = csb.ConnectionString;

        // Second attempt
        //System.Data.SqlClient.SqlDataAdapter sqlda = new System.Data.SqlClient.SqlDataAdapter("SELECT * FROM T_Benutzer", csb.ConnectionString);
        //sqlda.Fill(dt);

        return dt;
    } 
```

如果我进入 SQL-Server 活动监视器，我会看到 Session 68

```
SELECT * FROM T_Benutzergruppen 
```

附加问题：

如果问题：

如果我注释掉除 ConnectionStringBuilder 之外的所有内容，并且只在此函数中执行以下代码，为什么它也会泄漏连接？

```
// Second attempt
System.Data.SqlClient.SqlDataAdapter sqlda = new System.Data.SqlClient.SqlDataAdapter("SELECT * FROM T_Benutzer", csb.ConnectionString);
sqlda.Fill(dt); 
```

**注意：**
executenonquery 没有意义，它只是用于测试目的。

如果我让它在调试器中运行，我会看到 sqlcon.Close();

get 被执行了，所以问题不在于

```
if(sqlcon.State != System.Data.ConnectionState.Closed) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:02:41.180

连接池。别担心。

这是正常行为。

[http://msdn.microsoft.com/en-us/library/8xx3tyca(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/8xx3tyca(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T09:04:13.747

ADO.Net 将连接池化，以便它们可以重复使用，因为它们的创建成本相对较高。

> 连接到数据库服务器通常包括几个耗时的步骤。必须建立诸如套接字或命名管道之类的物理通道，必须发生与服务器的初始握手，必须解析连接字符串信息，必须由服务器验证连接，必须运行检查以登记当前交易等等。
> 
> 实际上，大多数应用程序仅使用一种或几种不同的连接配置。这意味着在应用程序执行期间，许多相同的连接将被重复打开和关闭。为了最大限度地降低打开连接的成本，ADO.NET 使用了一种称为连接池的优化技术。

[http://msdn.microsoft.com/en-us/library/8xx3tyca(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/8xx3tyca(v=vs.100).aspx)

此外，无需显式调用 .Close()。您的*using*块将调用*IDisposable.Dispose()*，这将正确关闭连接。

# php - PHP 如何将 Soap XML 与 XML Schema(.xsd) 链接起来

> ID：11861081
> 
> 赞同：-1
> 
> 时间：2012-08-08T09:00:06.667
> 
> 标签：php, xml, wsdl

我有两个网址。

```
http://www.labs.skanetrafiken.se/v2.2/GetStartEndPoint.xsd

http://www.labs.skanetrafiken.se/v2.2/querypage.asp?inpPointFr=lund&inpPointTo=ystad 
```

如何让这两者协作，以便我可以通过 PHP 提取信息？

如何将 XML 文件中的所有信息提取到 PHP 对象或数组中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:56:31.030

我刚刚用这段代码回答了我自己的问题：

```
/**
 * convert xml string to php array - useful to get a serializable value
 *
 * @param string $xmlstr
 * @return array
 * @author Adrien aka Gaarf
 */

function xmlstr_to_array($xmlstr) {
    $doc = new DOMDocument();
    $doc->loadXML($xmlstr);
    return domnode_to_array($doc->documentElement);
}
function domnode_to_array($node) {
    $output = array();
    switch ($node->nodeType) {
        case XML_CDATA_SECTION_NODE:
        case XML_TEXT_NODE:
        $output = trim($node->textContent);
        break;
        case XML_ELEMENT_NODE:
        for ($i=0, $m=$node->childNodes->length; $i<$m; $i++) {
            $child = $node->childNodes->item($i);
            $v = domnode_to_array($child);
            if(isset($child->tagName)) {
                $t = $child->tagName;
                if(!isset($output[$t])) {
                    $output[$t] = array();
                }
                $output[$t][] = $v;
            }
            elseif($v) {
                $output = (string) $v;
            }
        }
        if(is_array($output)) {
            if($node->attributes->length) {
                $a = array();
                foreach($node->attributes as $attrName => $attrNode) {
                    $a[$attrName] = (string) $attrNode->value;
                }
                $output['@attributes'] = $a;
            }
            foreach ($output as $t => $v) {
                if(is_array($v) && count($v)==1 && $t!='@attributes') {
                    $output[$t] = $v[0];
                }
            }
        }
        break;
    }
    return $output;
}

$xml = 'http://www.labs.skanetrafiken.se/v2.2/querypage.asp?inpPointFr=lund&inpPointTo=ystad';      

$xmlstr = new SimpleXMLElement($xml, null, true);

$array = xmlstr_to_array($xmlstr->asXML());

print_r($array); 
```

这将返回一个带有 XML 的数组，这正是我想要使用的。

# sqlite - 插入从不同查询返回的记录？

> ID：11861089
> 
> 赞同：0
> 
> 时间：2012-08-08T09:00:42.307
> 
> 标签：sqlite

我想从与传递的 StoreName 对应的“Stores”中获取 ID。

```
 Select ID from Stores WHERE Name='Megamart' 
```

现在我希望这个 id 插入到一个表中。我这样做了：

```
INSERT INTO NetOrderID ( StoreID, SalesManID) VALUES ( " Select ID from Stores WHERE Name='Megamart'" , 1) 
```

但事实证明这是行不通的。帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:02:31.307

```
INSERT INTO NetOrderID ( StoreID, SalesManID) 
Select ID, 1 from Stores WHERE Name='Megamart' 
```

# class - 调用不可变类的成员函数

> ID：11861091
> 
> 赞同：2
> 
> 时间：2012-08-08T09:00:52.120
> 
> 标签：class, d, immutability, member-functions

```
immutable class Foo
{
    void bar()
    {
    }
}

void main()
{
    auto x = new Foo();
    x.bar();
    // Error: function test.Foo.bar () immutable is not callable
    //         using argument types ()
} 
```

我必须在程序中进行哪些更改才能`x.bar()`编译？是否`x`有错误的类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T09:06:59.780

看起来像一个错误。`x`推断有 type `Foo`，虽然它是一个不可变的类，但它被视为一个可变变量，这导致`x.bar()`失败，因为`bar()`它是一个不可变的方法。

一种解决方法是提供一个空的不可变构造函数，

```
immutable class Foo
{
    void bar()
    {
    }

    immutable this() {}    // <---
} 
```

这导致`new Foo()`表达式返回一个`immutable(Foo)`.

# php - 移动大记录表mysql的最快方法

> ID：11861092
> 
> 赞同：0
> 
> 时间：2012-08-08T09:00:53.473
> 
> 标签：php, mysql

请帮我找出这个解决方案。我处理一个非常大的数据记录，比如 2M 的学生测试结果记录。所有记录都存储在一个表中，我需要做的是将此记录分成两个不同的表，一个为所有通过学生另一个是失败的学生。分开这条记录后，我需要从源表中删除原始记录。每次我运行这段代码时，都需要几个小时才能完成。如果有人可以帮我找出解决方案会很棒。谢谢。

这是示例代码：

```
<?php ob_start(); ?>
<?php
function spread($classselect,$subjectselect)
{include "connectdb.php";

//movepass

$selectpass = mysql_query("SELECT * FROM testresultAUG2012 WHERE actualmonth='AUG' AND testresult = 'PASS' AND classname = '$classselect' AND educationsubject = $subjectselect;",$conn);
$totalpass = mysql_num_rows($selectpass);
$pass=0;
while($pass<$totalpass)
{
    $name=mysql_result($selectpass, $pass, "Studentname");
    $subject=mysql_result($selectpass, $pass, "Subject");
    $testbatch=mysql_result($selectpass, $pass, "testbatch");
    $classname=mysql_result($selectpass, $pass, "class");
    $lecturer=mysql_result($selectpass, $pass, "lecturer");
    $date=mysql_result($selectpass, $pass, "date");
    $month=mysql_result($selectpass, $pass, "month");
    $time=mysql_result($selectpass, $pass, "time");
    $state=mysql_result($selectpass, $pass, "result");

    //count total pass subject and add 1
    $totalpass = mysql_query("SELECT * FROM Student WHERE Studentname = '$name';",$conn);
    $only = mysql_fetch_array($theone);
    $currentpass = $only['totalpass'];
    $newpass = $currentpass + 1;
    mysql_query("UPDATE Student SET totalpass = $newpass WHERE Studentname = '$name';",$conn);

    //save record to pass table
    mysql_query("INSERT INTO passtab(......) VALUES(....);",$conn);

    //remove data from origin table
    mysql_query("DELETE FROM testresultAUG2012 WHERE Studentname = '$name' AND testbatch = $testbatch AND Subject=$subject AND result = 'PASS' AND class = '$classname';",$conn);
    $pass++;
}

//moveFailed

$selectfail = mysql_query("SELECT * FROM testresultAUG2012 WHERE actualmonth='AUG' AND testresult = 'PASS' AND classname = '$classselect' AND educationsubject = $subjectselect;",$conn);
$totalfail = mysql_num_rows($selectfail);
$fail=0;
while($fail<$totalfail)
{
    $name=mysql_result($selectfail, $fail, "Studentname");
    $subject=mysql_result($selectpass, $fail, "Subject");
    $testbatch=mysql_result($selectfail, $fail, "testbatch");
    $classname=mysql_result($selectfail, $fail, "class");
    $lecturer=mysql_result($selectfail, $fail, "lecturer");
    $date=mysql_result($selectfail, $fail, "date");
    $month=mysql_result($selectfail, $fail, "month");
    $time=mysql_result($selectfail, $fail, "time");
    $state=mysql_result($selectfail, $fail, "result");

    //count total fail subject and add 1
    mysql_query("UPDATE Student SET totalfail = totalfail + 1  WHERE Studentname = '$name';",$conn);

    //save record to fail table
    mysql_query("INSERT INTO failtab(....) VALUES(...);",$conn);

    //remove data from origin table
    mysql_query("DELETE FROM testresultAUG2012 WHERE Studentname = '$name' AND testbatch = $testbatch AND Subject=$subject AND result = 'FAIL' AND class = '$classname';",$conn);
    $fail++;
    }
}
?>
<?php
$relatedclass=$_POST[classup];
$relatedsubject=$_POST[subject];
spread($relatedclass,$relatedsubject);
echo "<center>Spread Completed !!!</CENTER>";

?>
<? ob_flush(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:08:26.287

您不应该从数据库中获取所有数据，然后将其逐行发送回。

如果你的草坪上有一袋沙子，你想把它送给你的邻居，你会怎么做？你会给他留一张纸条告诉他他可以接受吗？或者你会先把整个袋子寄给你在俄罗斯的叔叔，然后告诉你叔叔一次一粒地寄回给你的邻居？您处理数据的方式更像是后一种方法。

改为执行以下操作：

```
INSERT INTO table1
(col1, col2, ... coln)
SELECT col1, col2, ... coln
FROM table2
WHERE result = 'PASS' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:13:02.003

您可以从while循环中删除查询并在循环外运行查询，但在循环内生成查询字符串。我的意思是每次您可以使用一个查询插入所有数据时都运行查询，您可以尝试以下解决方案

```
while($pass<$totalpass)
{
    $name=mysql_result($selectpass, $pass, "Studentname");
    $subject=mysql_result($selectpass, $pass, "Subject");
    $testbatch=mysql_result($selectpass, $pass, "testbatch");
    $classname=mysql_result($selectpass, $pass, "class");
    $lecturer=mysql_result($selectpass, $pass, "lecturer");
    $date=mysql_result($selectpass, $pass, "date");
    $month=mysql_result($selectpass, $pass, "month");
    $time=mysql_result($selectpass, $pass, "time");
    $state=mysql_result($selectpass, $pass, "result");

    //count total pass subject and add 1
    $totalpass = mysql_query("SELECT * FROM Student WHERE Studentname = '$name';",$conn);
    $only = mysql_fetch_array($theone);
    $currentpass = $only['totalpass'];
    $newpass = $currentpass + 1;

    //save record to pass table
   $values[]='('.$valuestring.')'(//whatever you want to ineser)

    //remove data from origin table

    $pass++;
} 
```

mysql_query（插入tyablename（''）值（implode（'，'，$values）））

# javascript - Javascript 未在网站上运行

> ID：11861093
> 
> 赞同：0
> 
> 时间：2012-08-08T09:00:54.520
> 
> 标签：javascript, function, iframe

在以下网站 ( [http://www.homefresh.co.nz/gallery.html](http://www.homefresh.co.nz/gallery.html) ) 顶部有一段 javascript 可以动态更改 iFrame 的高度

标头中的 Javascript：

```
<script type="text/javascript" language="javascript">
<!--
function calcHeight()
{
    //find the height of the internal page
    var the_height=document.getElementById('the_iframe').contentWindow.document.body.scrollHeight;
    //change the height of the iframe
    var the_height = parseFloat(the_height) + 15;
    document.getElementById('the_iframe').height=the_height;
}
//-->
</script> 
```

在页面中是 iFrame 代码：

```
<iframe src="http://www.dpdesignz.co.nz/homefresh/" id="the_iframe" onLoad="calcHeight();" height="1" width="920px" scrolling="auto" frameBorder="0"></iframe> 
```

除了出于某种原因它没有更新

我在这里有完全相同的代码，它可以工作（[http://www.dpdesignz.co.nz/homefresh/test.htm](http://www.dpdesignz.co.nz/homefresh/test.htm)）

谁能看到任何阻止它的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:07:32.807

带有脚本的页面和 iframe 页面必须在同一个域中。由于安全问题，这是[同源策略所要求的。](http://en.wikipedia.org/wiki/Same_origin_policy)

因此，如果您想访问已打开的文档，`www.dpdesignz.co.nz`则必须使用`www.dpdesignz.co.nz`域中的主机页面。这就是为什么您的一个脚本有效而另一个无效的原因。

# http - 如何强制浏览器使用 https 从另一个站点请求图像？

> ID：11861094
> 
> 赞同：0
> 
> 时间：2012-08-08T09:00:53.587
> 
> 标签：http, iis, ssl, https

例如，我有一个站点，`mysite.com`它显示来自另一个站点的一些图像，例如`anothersite.com`. 这两个站点都有有效的证书，并且 https 对它们都有效。我的问题是，如果客户端浏览并在浏览时使用 https，如何使浏览器`anothersite.com`使用 http请求图像？`http://mysite.com``https://mysite.com`

我正在尝试在我的图像元素中省略协议，`<img src="//anothersite.com/image.jpg" />`但它不起作用，浏览器不显示安全连接（在 Chrome 中用黄色三角形锁定）。如果我指定`<img src="https://anothersite.com/image.jpg" />`Chrome 显示绿色锁，但我不想在用户`mysite.com`使用 http 浏览时使用 https 请求图像。

如果这很重要，这两个站点都在 IIS 上运行。

谢谢你。

# ruby-on-rails - 红宝石模型

> ID：11861095
> 
> 赞同：0
> 
> 时间：2012-08-08T09:00:55.533
> 
> 标签：ruby-on-rails, model, associations, relationship

我有两个模型作为主题和教师
主题模型

```
class Subject < ActiveRecord::Base
   belongs_to :sclass
    has_many :subject_teachers
   attr_accessible :sub_name
end 
```

和教师模型为

```
class Teacher < ActiveRecord::Base
  # attr_accessible :title, :body
  has_many :sclass_teachers
   has_many :subject_teachers
  attr_accessible :fname, :lname, :mob, :email
end 
```

并将他们的连接表创建为 subject_teacher 多对多关系

```
class SubjectTeacher < ActiveRecord::Base  
  belongs_to :subject
  belongs_to :teacher  
end 
```

但我想在主题模型/表格中访问教师姓名，我该怎么做。我在哪里编写了完美的代码，以便我获得特定主题的特定教师姓名，因为存在多对多关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:40:12.177

你会这样做：

```
has_many :teachers through => :subject_teachers 
```

正如@Hugo 所说

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:12:42.620

您可以使用 has_many :through 关系从主题访问教师数据

[http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:16:16.177

你说的有点奇怪：你建立了多对多的关系，并且需要一个特定的老师来教授一个科目。因此，对于多对多关系，您可以获得教师列表。从该列表中，您可以选择第一个。但是，如果您知道一门学科最多只有一位老师，那么只需一个 has_many 就方便多了。

您可以使用@subject.subject_teachers.teachers 访问教师，其中@subject 是一个主题实例。

如果使用 has-many-and-belongs-to-many 关系，则可以省略中间类。您只需要该关系具有其他数据，例如日期和时间。

# maven - 如何为程序集描述符中的文件夹设置 directoryMode 权限？

> ID：11861098
> 
> 赞同：0
> 
> 时间：2012-08-08T09:01:09.957
> 
> 标签：maven, maven-3, maven-assembly-plugin

我似乎无法更改程序集描述符中的输出目录权限。它似乎完全被忽略了。但是，文件权限设置正确。我正在使用 Maven 3。

```
<fileSet>
    <directory>src/main/conf</directory>
    <fileMode>0644</fileMode>
    <directoryMode>0755/directoryMode>
    <outputDirectory>conf</outputDirectory>
</fileSet> 
```

目录仍显示为 775。

```
drwxrwxr-x 
```

这是一个已知的错误？我什至尝试单独定义一个文件集，排除所有文件，只指定输出目录但无济于事。

任何提示或解决方法表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:57:51.853

这似乎是程序集插件的一个错误（[MASSEMBLY-621](http://jira.codehaus.org/browse/MASSEMBLY-621)）。此错误已在 2.4 版中修复。我也遇到了这个问题，将插件从 2.3 升级到 2.4 解决了这个问题（使用 Maven 2.2.1，没有测试 Maven 3）。

其他相关错误：

*   [MASSEMBLY-422](http://jira.codehaus.org/browse/MASSEMBLY-422)

# java - 重新登录 Flex 导致 Channel.Connect.Failed 错误 NetConnection.Call.Failed: HTTP: Status 500: url

> ID：11861102
> 
> 赞同：1
> 
> 时间：2012-08-08T09:01:31.463
> 
> 标签：java, apache-flex, authentication, login, blazeds

我们在使用 Flex 4、BlazeDS 和 WebLogic 10.3.5 重新登录 Flex 应用程序时遇到问题。

导致问题的用例如下：

1.  在浏览器中启动应用程序。
2.  使用 j_security_check 操作重定向到登录表单页面。
3.  登录并使用应用程序。
4.  在浏览器中点击“返回”按钮。
5.  再次来到登录表单页面。
6.  重新登录。
7.  在 BlazeDS 中获取异常并在 Flex/ActionScript 中捕获错误。

在 WLS 的日志中捕获的异常：

```
[BlazeDS]Unexpected error encountered in Message Broker servlet
flex.messaging.LocalizedException: The FlexSession is invalid.
        at flex.messaging.FlexSession.checkValid(FlexSession.java:943)
        at flex.messaging.FlexSession.getUserPrincipal(FlexSession.java:254)
        at flex.messaging.HttpFlexSession.getUserPrincipal(HttpFlexSession.java:286)
        at flex.messaging.MessageBrokerServlet.service(MessageBrokerServlet.java:296)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
        at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
        at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
        at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:300)
        at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:183)
        at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3717)
        at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3681)
        at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
        at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
        at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2277)
        at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2183)
        at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454)
        at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209)
        at weblogic.work.ExecuteThread.run(ExecuteThread.java:178) 
```

Flex/ActionScript 中的错误：

```
faultCode: Client.Error.MessageSend
faultString: Send failed
faultDetail: Channel.Connect.Failed error NetConnection.Call.Failed: HTTP: Status 500: url: 'http://server:port/web-project/messagebroker/amf' 
```

似乎 BlazeDS 获得了第二个会话，而第一个会话仍然有效且处于活动状态。

有谁知道，这正是导致这个问题以及如何优雅地解决它们？我有一些提示，但不知道它们是否足够合适：

*   在 Flex/ActionScript 中捕获故障，重定向到注销页面以使会话无效，然后重定向到登录页面并创建新会话。
*   通过 JavaScript 禁用浏览器中的“后退”按钮。

我将不胜感激任何建议、解释和建议。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T21:55:53.917

问题是会话固定。

怎么了：

*   你登录
*   你得到一个会话
*   你得到 FlexSession （设置为会话属性）
*   你点击后退按钮
*   您登录（传入旧的 jsessionid）

Spring的SessionFixationProtectionStrategy：

*   检测到 jsessionid 的会话是否有效
*   提取旧会话的属性
*   使会话无效（销毁它）
*   创建新会话
*   将旧会话的属性转移到新会话

当旧会话被销毁时，FlexSession 变为“无效”。

FlexSessions 在创建会话时再次创建，并且由于该策略传递了相同的引用，该引用被无效（以浓重的俄语口音）“我们有问题”

这很容易通过将策略设置`bMigrateAttributes`为 false 来解决：

```
<security:session-management session-authentication-strategy-ref="sas" />
  <bean id="sas class="org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy"   p:migrateSessionAttributes="false"/> 
```

[http://static.springsource.org/spring-security/site/docs/3.0.x/reference/session-mgmt.html](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/session-mgmt.html)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-06T18:01:10.063

我遇到了同样的问题，但我想保留所有会话属性，而不仅仅是 Spring 属性，所以我没有将***migrateSessionAttributes***设置为 false 以在会话固定时保留非弹簧属性。

我最终覆盖了***SessionFixationProtectionStrategy***，因此我仍然可以从迁移所有属性的会话固定中受益。

在***onSessionChange***方法中，我专门删除了“__flexSession”属性

```
package xxxxx;

import javax.servlet.http.HttpSession;

import org.springframework.security.core.Authentication;
import org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy;
import org.springframework.stereotype.Component;

@Component
public class MySessionFixationProtectionStrategy extends SessionFixationProtectionStrategy {
    private static String FLEX_SESSION_ATTRIBUTE = "__flexSession";

    @Override
    protected void onSessionChange(String originalSessionId, HttpSession newSession, Authentication authentication) {
        // We remove the flex session attribute to avoid "The FlexSession is invalid." exception
        newSession.removeAttribute(FLEX_SESSION_ATTRIBUTE);

        super.onSessionChange(originalSessionId, newSession, authentication);
    }
} 
```

# html - 如何在页面的角落或中心添加 html 元素（按钮、链接等）？

> ID：11861104
> 
> 赞同：0
> 
> 时间：2012-08-08T09:01:39.083
> 
> 标签：html, css, jsp

我有一个经理页面，我想在页面**右侧添加一个****LOG-OUT**按钮。

 **我知道如何一一添加按钮，例如：

![在此处输入图像描述](../Images/471b328a1f8ee4d891764f19f6262c51.png)

这是上面页面的代码：

```
<!-- Bank manager's permissions -->

<!DOCTYPE html>
<html>
<head><title>Bank Manager's Transactions Page</title>
<link rel="stylesheet" href="./css/styles.css" type="text/css"/>
</head>
<body>
    <table class="title">
      <tr><th>Manager's Transactions Page</th></tr>
    </table>

    <h1>Hello ${name.firstName} ${name.lastName} , You've logged in successfully!</h1>
    <h1>
    Please choose one of the following options
    </h1>

    <!-- The followings are Manager's permissions -->

    <fieldset>
      <legend>To get a list of all the employees at the bank</legend> 
      <form action="blablabla">     <!-- THAT ONE forwards to a servlet that's called Admin1.java -->
        <a href="adminAdds1">Press here to continue</a>  
      </form>
    </fieldset>

    <fieldset>
      <legend>To get a list of all the clients at the bank</legend> 
      <form action="blablabla">     <!-- THAT ONE forwards to a servlet that's called Admin1.java -->
        <a href="adminAdds1">Press here to continue</a>  
      </form>
    </fieldset>

    <fieldset>
      <legend>To get a list of all the overdraft clients at the bank</legend> 
      <form action="blablabla">     <!-- THAT ONE forwards to a servlet that's called Admin1.java -->
        <a href="adminAdds1">Press here to continue</a>  
      </form>
    </fieldset>

    <fieldset>
      <legend>To get the number of overdraft clients at the bank</legend> 
      <form action="blablabla">     <!-- THAT ONE forwards to a servlet that's called Admin1.java -->
        <a href="adminAdds1">Press here to continue</a>  
      </form>
    </fieldset>

    <fieldset>
      <legend>To get a full financial report for the current month</legend> 
      <form action="blablabla">     <!-- THAT ONE forwards to a servlet that's called Admin1.java -->
        <a href="adminAdds1">Press here to continue</a>  
      </form>
    </fieldset>

    <fieldset>
      <legend>To get a full financial report for a specific date</legend> 
      <form action="blablabla">     <!-- THAT ONE forwards to a servlet that's called Admin1.java -->
        <a href="adminAdds1">Press here to continue</a>  
      </form>
    </fieldset>
</body> 
```

如何在 JSP 文件的某个角落添加按钮？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:28:39.833

试试这个

样式.css

```
#logout
{
float:right;
margin-right:20px;
height:5px;
} 
```

在页面中

```
<link href="style.css" rel="stylesheet" type="text/css" />
<div id="logout"><button>Your text</button></div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T09:25:14.123

就像写一个`css`文件一样简单。

先写一个`css`。像这样的东西：`bar.css`

```
@charset "utf-8";
/* CSS Document */

.bar
{
 width:40px;
}

#right
{
    float:right;
    margin-right:20px;
    background:#06F;
} 
```

然后将这些放在您的`jsp`文件中：

```
<link href="bar.css" rel="stylesheet" type="text/css" /> 
```

对于注销的链接：

```
<div id ="right" class="bar">
<!-- Your Link to Log out -->
</div> 
```

这只是一个例子。这个例子会把你放在`link`右边。设置您的参数任何东西，让您`log out link`在您喜欢的地方。您可能还想把它放在顶部或底部。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T09:35:06.133

检查这个：

```
 <!DOCTYPE html>
        <html>
        <head><title>Bank Manager's Transactions Page</title>
        <style type="text/css">
                body,html
                {
                    margin:0;
                }
               #logout
                {
                    float:right;
                }​
            </style>

        </head>
        <body>

<!-- Logout link, instead of using anchor tag you can replace it with button tag ...... -->

            <div id="logout">
                   <a href="logoutPage">LogOut</a>  
            </div> 

<!-- if you chose button tag, you remove the div and you can directly put stylesheet using button id -->

            <table class="title">
              <tr><th>Manager's Transactions Page</th></tr>
            </table>
            <h1>Hello ${name.firstName} ${name.lastName} , You've logged in successfully!</h1>
            <h1>
            Please choose one of the following options
            </h1>

            <!-- The followings are Manager's permissions -->

            <fieldset>
              <legend>To get a list of all the employees at the bank</legend> 
              <form action="blablabla">     <!-- THAT ONE forwards to a servlet that's called Admin1.java -->
                <a href="adminAdds1">Press here to continue</a>  
              </form>
            </fieldset>        

        <!-- code continues...... -->

        </body>​
    </html> 
```**

# c# - 如何在同一应用程序中使用来自不同位置的同名但不同版本的dll？

> ID：11861107
> 
> 赞同：1
> 
> 时间：2012-08-08T09:02:07.873
> 
> 标签：c#, dll, versioning

我们正在尝试为另一个应用程序编写几个插件。我们有两个目录，每个目录都包含它需要独立运行的代码，其中包含所有 dll（但不是 exe 作为它的第 3 方，我们无法控制它）。dll中有一些共享代码，放​​置在每个插件目录中。在引入新版本的插件时，我们需要在其中一个插件目录中更改此共享 dll，但保留另一个。当我们这样做时，旧版本会中断，因为它依赖于旧版本的共享 dll，但它只加载一个。有没有办法强制它使用某个版本的dll？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:06:29.747

你应该使用后期绑定方法`System.Reflection`

# java - Doxygen 不能正常解析标签。它解析标签，如, and \s\p into

> ID：11861109
> 
> 赞同：0
> 
> 时间：2012-08-08T09:02:21.180
> 
> 标签：java, doxygen

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T02:34:53.833

“正确”在提到 xml 时有点用词不当，除非它的结构不正确，但我认为您指的是标签。如果你不喜欢 doxygen 的输出，为什么不写一个 xslt 让它随心所欲呢？我确信那里有许多 doxygen.xml --> myflavor.xml 转换，您可以将其用作起点。

# java - 在 Spring MVC 应用程序中使用 CXF 创建 SOAP 客户端时出错

> ID：11861112
> 
> 赞同：0
> 
> 时间：2012-08-08T09:02:29.233
> 
> 标签：java, spring, jakarta-ee, cxf, java-ee-6

我是 Spring 框架的新手，这个问题可能很愚蠢。但请务必为此错误提供解决方案。

我在尝试运行使用 Apache CXF 使用基于 SOAP 的 Web 服务的 Spring MVC 应用程序时遇到以下错误。

```
 INFO: Starting service Catalina
Aug 08, 2012 2:09:28 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.27
Aug 08, 2012 2:09:29 PM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(D:\rtProjectsWS\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\dataservice-client\WEB-INF\lib\geronimo-servlet_2.5_spec-1.1.2.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
Aug 08, 2012 2:09:29 PM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(D:\rtProjectsWS\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\dataservice-client\WEB-INF\lib\geronimo-servlet_3.0_spec-1.0.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
SLF4J: The requested version 1.6 by your slf4j binding is not compatible with [1.5.5, 1.5.6, 1.5.7, 1.5.8, 1.5.9, 1.5.10]
SLF4J: See http://www.slf4j.org/codes.html#version_mismatch for further details.
SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/D:/rtProjectsWS/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/dataservice-client/WEB-INF/lib/slf4j-jdk14-1.6.2.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/D:/rtProjectsWS/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/dataservice-client/WEB-INF/lib/slf4j-log4j12-1.5.10.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
Aug 08, 2012 2:09:29 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
Aug 08, 2012 2:09:29 PM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
java.lang.AbstractMethodError: org.slf4j.impl.JDK14LoggerAdapter.log(Lorg/slf4j/Marker;Ljava/lang/String;ILjava/lang/String;Ljava/lang/Throwable;)V
    at org.apache.commons.logging.impl.SLF4JLocationAwareLog.info(SLF4JLocationAwareLog.java:159)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:194)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

我创建项目的步骤如下：

1.  通过在 STS IDE 中选择 MVC 模板创建 Spring MVC 项目。
2.  使用向导生成的 CXF SOAP 客户端。
3.  通过添加以下行修改了 spring 配置。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:28:35.120

也许[这篇](http://markmail.org/message/g4rci3jvj4uglofw)文章可以帮助或[这个](http://www.thecorneroffice.org/blog/plink/2009/02/090226-1759.html)。它基本上说您有版本冲突或旧版本的 slf4j。

# java - 来自詹金斯的运行日食

> ID：11861114
> 
> 赞同：0
> 
> 时间：2012-08-08T09:02:37.450
> 
> 标签：java, eclipse, selenium, hudson, jenkins

我已经在我的 Windows 机器上安装了 Jenkins。我目前正在对网站进行功能测试，并且我已经使用 selenium 创建了所有测试用例。我使用带有 testng 插件的 eclipse 运行了所有这些测试用例。

现在有什么方法可以让我在 Jenkins 本身的 Eclipse 中运行这些测试用例，即我可以从 Jenkins 控制 Eclipse。我现在正在努力并且能够使用批处理命令运行它（我已经在批处理文件中编写了所有命令来运行 eclipse 和 selenium 驱动程序，并且该批处理文件是从 Jenkins 执行的）但我正在寻找一个插件，我可以使用该插件直接运行 eclipse 、 selenium web-driver。请看这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:48:47.190

您使用批处理文件处于正确的位置，但我建议您使用 Ant 或 Maven 而不是 Eclipse - 它们是 Java 脚本构建的标准方式，并且它们具有良好的 Jenkins 支持。

这是 Maven 在测试前启动 Selenium 的插件：http: [//mojo.codehaus.org/selenium-maven-plugin/](http://mojo.codehaus.org/selenium-maven-plugin/)

以下是如何使用 Maven 运行 TestNG 测试：[http ://maven.apache.org/plugins/maven-surefire-plugin/examples/testng.html](http://maven.apache.org/plugins/maven-surefire-plugin/examples/testng.html)

# ios - 可以使用推送通知在不通知用户的情况下运行代码吗？

> ID：11861117
> 
> 赞同：6
> 
> 时间：2012-08-08T09:02:40.930
> 
> 标签：ios, notifications, push-notification, background-process

我有一个应用程序需要每 24 小时与服务器通信一次（以刷新它的数据）。即使应用程序没有打开，也没有在后台，这需要发生。

理想情况下，我想要的是：

*   每 24 小时，我的服务器向 iPad 发送一个推送通知
*   这会唤醒应用程序，并运行刷新数据所需的代码
*   然后丢弃通知

这有可能吗？
应用程序是否仅在用户单击通知后才被唤醒？或者我可以在显示通知之前运行一些代码吗？我什至可以丢弃通知消息吗？

如果推送通知不是正确的方法，那是什么？？？

多谢你们！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-31T01:13:34.997

随着 iOS 7 的发布，这终于可以使用远程/静音通知。它们的工作方式与推送通知相同，但它们可以启动后台获取模式并上传/下载新内容，而不是立即提醒用户。

这是简单的教程：[http ://www.objc.io/issue-5/multitasking.html](http://www.objc.io/issue-5/multitasking.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T09:07:23.437

仅当您的应用程序是报亭应用程序时才有可能，如果是，您可以`content-available: true`每 24 小时发送一次推送通知。

如果它不是报亭应用程序，您可以改为使用 GPS 围栏来运行代码。如果用户希望在用户靠近某个区域（即他们的家/工作场所）时更新应用程序，则允许用户设置 GPS 围栏。这将唤醒应用程序，然后您可以运行后台下载。例如，Instapaper 就是这样做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:52:05.527

如果时间段总是 24 小时，您可以使用本地通知而不是推送通知。

除非用户打开推送通知，否则您的应用程序将无法运行任何代码，推送通知由操作系统处理，并且您的应用程序在它不活动或在后台无法控制它们时，您应该查看[推送通知编程指南](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1)

完成您尝试做的事情的另一种方法是每次启动应用程序并且上次更新发生在 24 小时前时从服务器获取数据，

1.  每次联系服务器时，将日期保存在 NSUserDefault
2.  每次用户打开应用程序时检查最后一次服务器联系是否发生在 24 小时之前然后刷新数据

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-01T11:34:55.010

可以使用所谓的 VOIP 推送通知。即使应用程序完全关闭，此通知也可以在后台运行代码。

# c# - 如何处理外部dll中的连接字符串？

> ID：11861118
> 
> 赞同：1
> 
> 时间：2012-08-08T09:02:43.653
> 
> 标签：c#, asp.net, performance, dll, informix

如果我有一个`dll`我在许多 Web 应用程序中使用的方法，可以`dll`在我的应用程序中使用 this 中的方法。

处理连接字符串的最佳做法是什么？

这些`dll`方法是静态方法..

这就是我所做的

```
 private static String connectionString = "User Id=xxx;Password=xxx;Host=xxx;Server=xxx;Service=1525;Database=xxx; Client Locale=ar_ae.1256; Database Locale=ar_ae.8859-6; Protocol=olsoctcp;pooling=true;Min Pool Size=4;Max Pool Size=400;Connection Timeout=30"; 
```

* * *

```
public static int Is_Valid_User(string p_u, string p_p)
        {
            int ret = 0;  // invalid user
            using (IfxConnection conn = new IfxConnection(connectionString))
            {
                IfxCommand DBCmd = new IfxCommand();
                String p = My_Decryption_2(p_p);
                try
                {
                    if (conn.State == ConnectionState.Closed)
                        conn.Open();
                    DBCmd = new IfxCommand();
                    DBCmd.Connection = conn;
                    DBCmd.CommandText = "SELECT nvl(emp_num,0) FROM emp_net WHERE username = ? AND DECRYPT_CHAR(password, 'xxxxxx') = ? ";
                    DBCmd.Parameters.Add("user_name", p_u);
                    DBCmd.Parameters.Add("password", p);
                    using (IfxDataReader dataReader = DBCmd.ExecuteReader())
                    {
                        if (dataReader.Read())
                            ret = (int)dataReader[0];
                        dataReader.Close();
                    }
                }
                catch (ApplicationException e)
                {

                }
                conn.Close();
            }
            return ret;
        } 
```

* * *

这是`dll` 在我的 Web 应用程序中使用 a 的好方法吗？还是有比这更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:03:52.290

最好在某种配置中使用连接字符串，例如`web.config`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:13:42.960

使用这些静态方法，您几乎把自己踢到了脚上。最佳实践可能是重构类以使用实例方法并通过构造函数或属性注入连接字符串。

无法重构静态方法以包含连接字符串？

```
public static int Is_Valid_User(string p_u, string p_p, string connectionString) 
```

您也可以硬编码对 [web|app]config 连接字符串的引用，但这只是改变了问题（对固定字符串的依赖），并没有解决它。

# mysql - After migrating db php returns latin1 charset, but in DB - cp1251

> ID：11861120
> 
> 赞同：0
> 
> 时间：2012-08-08T09:02:51.977
> 
> 标签：mysql, database, character-encoding, phpmyadmin, latin1

I need to transfer my mysql DB from windows server to Ubuntu server. So i made export in phpmyadmin on win and imported *.sql file in linux. In linux PMA all looks okay, tables are healthy, no errors, and charter set is (cp1251), russian data in tables looks how it needed. But when i try to run select in php script there is only "???????" in result, and echo `mysql_client_encoding()` showing that charset is latin1. Please, tell me where is latin1 can be seted? Thanks for help.

UPD: I am using now `mysql_set_charset('cp1251');` after each db connection, but its not an pefect solution. Maybe someone can offer other idea?

# java - 在没有注释的杰克逊中指定特定通用集合字段的具体类型

> ID：11861121
> 
> 赞同：1
> 
> 时间：2012-08-08T09:02:58.403
> 
> 标签：java, json, jackson

我有一个具有通用集合字段的类

```
class Test {
  List<E> aList;
} 
```

我想使用杰克逊反序列化它。如何在不使用注释的情况下指定用于此特定字段的集合类型，而不是对象中的所有列表（因为我无法更改现有类）。

我是杰克逊的初学者，所以我不知道如何编写自定义反序列化器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T16:28:41.920

FWIW...

> 不使用注释（因为我无法更改现有类）

[Jackson 的 Mix-Ins 功能](http://wiki.fasterxml.com/JacksonMixInAnnotations)可用于解决此问题。

> 我不知道如何编写自定义反序列化器

尽管没有完全更新最新的 Jackson 版本，但 Jackson Wiki 页面上关于[自定义反序列](http://wiki.fasterxml.com/JacksonHowToCustomDeserializers)化和[自定义创建者](http://wiki.fasterxml.com/JacksonFeatureCreators)的页面仍然相关。

此外，在[Gson v Jackson - Part 3 on InstanceCreator for a Parameterized Type](http://programmerbruce.blogspot.com/2011/07/gson-v-jackson-part-3.html#TOC-InstanceCreator-for-a-Parameterized)中，我针对类似问题发布了几个不同的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:34:24.787

我认为您不需要做任何事情 Jackson 似乎能够弄清楚 List 的数据类型，我上周遇到了这个问题，结果证明 Java Generic 信息可以通过反射获得，请参阅[有什么例外在 Java 中键入擦除？](https://stackoverflow.com/questions/11822904/what-are-the-exceptions-to-type-erasure-in-java)和[Java 中的类型擦除](https://stackoverflow.com/questions/4713438/type-erasure-in-java)

我编写了以下测试程序以更好地理解它。

```
public class GenericObject {
        public Map<Integer,String> map = new HashMap<>();
        private List<Integer> integers = new ArrayList<>();  
        private List<Date> dates = new ArrayList<>(); 

        public List<Integer> getIntegers() {
            return integers;
        }

        public void setIntegers(List<Integer> integers) {
            this.integers = integers;
        }

        public List<Date> getDates() {
            return dates;
        }

        public void setDates(List<Date> dates) {
            this.dates = dates;
        }

        public void setIntegersList(Integer... ints)
        {
            for (Integer integer : ints) {
                integers.add(integer);
            }
        }

    public void setDatesList(Date... dates)
    {
        for (Date date : dates) {
            this.dates.add(date);
        }
    }

public void runtimeGenericTypes()
{
    try {

        Field field  = GenericObject.class.getField("map");
        System.out.println("Field has type " + field.getType());
        ParameterizedType genericType = (ParameterizedType) field.getGenericType();
        Type[] actualTypeArguments2 = genericType.getActualTypeArguments();
        for (Type type : actualTypeArguments2) {
            System.out.println("Gerenic field types: " + type);
        }

        // get the return type of a generic method 
        Method method =GenericObject.class.getMethod("getIntegers",null);
        Class<?> returnType = method.getReturnType();
        System.out.println(returnType);

        Type genericReturnType = method.getGenericReturnType();
        ParameterizedType parameterizedType = (ParameterizedType) genericReturnType;
        Type[] actualTypeArguments = parameterizedType.getActualTypeArguments();
        for (Type type : actualTypeArguments) {
            System.out.println(type);
        }

        System.out.println(genericReturnType);

        // get the parameter type of a generic method 
        Method set = GenericObject.class.getMethod("setIntegers", List.class);
        Class<?>[] parameterTypes = set.getParameterTypes();
        for (Class<?> class1 : parameterTypes) {
            System.out.println("Parameter type " + class1);
        }
        Type[] genericParameterTypes = set.getGenericParameterTypes();
        for (Type type : genericParameterTypes) {
            ParameterizedType parameterizedType2 = (ParameterizedType) type;
            parameterizedType2.getActualTypeArguments();
            for (Type type2 : genericParameterTypes) {
                System.out.println(" Paratermer type is: " + type2);
            }
        }

    } catch (SecurityException | NoSuchMethodException | NoSuchFieldException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    TypeVariable<?>[] typeParameters = dates.getClass().getTypeParameters();
    for (TypeVariable<?> typeVariable : typeParameters) {

        System.out.println(typeVariable);
    }
}

public static void main(String[] args) {

    GenericObject object = new GenericObject();
    object.setIntegersList(1,2,4,5,5);
    object.setDatesList(new Date());

    object.runtimeGenericTypes();

    ObjectMapper mapper = new ObjectMapper();
    mapper.configure(SerializationConfig.Feature.INDENT_OUTPUT,true);
    DateFormat df = DateFormat.getDateInstance(DateFormat.LONG);
    mapper.setDateFormat(df);

        String json;
        try {
            json = mapper.writeValueAsString(object);
            System.out.println(json);

            GenericObject readObject = mapper.readValue(json, GenericObject.class);
            List<Integer>  readIntegers = readObject.getIntegers();
            for (Integer integer : readIntegers) {
                System.out.println(integer);
            }
            List<Date> dates2 = readObject.getDates();
            for (Date date : dates2) {
                System.out.println(date);
            }

        } catch (IOException e) {
            e.printStackTrace();
        }

} 
```

}

# jquery - 使用 .on() 和 jQuery 的不同方法？

> ID：11861127
> 
> 赞同：0
> 
> 时间：2012-08-08T09:03:25.330
> 
> 标签：jquery

我对使用 .on() 有点困惑有人可以告诉我两者之间的区别：

```
$('#detailData').on('click', '.select-topic', function() { 
```

和

```
$('#detailData .select-topic').on('click', function() { 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:05:02.840

第一个将单击事件处理程序*委托*给`#detailData`元素。当点击事件（可能来自它的任何后代）到达该元素时，jQuery 会检查事件目标是否与选择器匹配，`.select-topic`. 如果是，则执行事件处理程序。

如果元素被动态添加到 DOM 中，这很有用`.select-topic`- 您不能将事件处理程序直接绑定到尚不存在的元素。

这是可能的，因为大多数 DOM 事件从它们起源的元素开始向上*冒泡，直到所有祖先元素。*

第二个示例将单击事件处理程序绑定到`.select-topic`执行代码时 DOM 中存在的所有元素。

这是一个[简单的演示](http://jsfiddle.net/jamesallardice/z2YVP/)。对于以下标记：

```
<ul id="myList">
    <li class="item">Item 1</li>
    <li class="item">Item 2</li>
</ul>​ 
```

运行以下代码：

```
$("#myList .item").on("click", function () {
    $(this).text("Clicked!"); 
});

/*$("#myList").on("click", ".item", function () {
    $(this).text("Clicked!"); 
});*/

$("#myList").append("<li class='item'>Item 3</li>"); 
```

尝试点击“Item 3”，什么都不会发生。注释掉第一个`.on()`调用，并取消注释第二个。再次运行它，并注意当您单击“Item 3”时事件处理程序现在是如何运行的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:04:55.380

第**一个**是动态创建的元素 ( `.select-topic`)
，**第二**个不会将 click enent 侦听器委托给新创建的元素。

第一个类似于现在已弃用的`.live()`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:05:56.717

```
$('#detailData')
.on('click', '.select-topic', function () { 
```

将 click 事件处理程序与`#detailData`.

```
$('#detailData .select-topic')
.on('click', function () { 
```

将 click 事件处理程序与`#detailData .select-topic`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T09:05:59.997

[该文档](http://api.jquery.com/on/)可以向您解释：

> **`.on( events [, selector] [, data], handler(eventObject) )`**
> 
> **selector**一个选择器字符串，用于过滤触发事件的选定元素的后代。如果选择器被`null`或省略，事件总是在到达被选元素时触发。

换句话说，在这两种情况下，事件都附加到具有 ID 的元素`detailData`，但在第一种情况下，它被委托给匹配`'.select-topic'`选择器中的所有元素。这将起作用，即使`'.select-topic'`在定义时不匹配（因为您没有将事件附加到该元素，只有父元素）。

有关事件委托的更多信息：http: [//davidwalsh.name/event-delegate](http://davidwalsh.name/event-delegate)

# hibernate - IE9中的jsf文件上传问题

> ID：11861132
> 
> 赞同：0
> 
> 时间：2012-08-08T09:03:43.863
> 
> 标签：hibernate, file-upload, jsf-2, primefaces

我正在使用带有 primefaces 的 jsf2.0。在我的应用程序中，我有图像上传选项。文件上传工作正常，除了 IE9 之外的所有浏览器。当我尝试在 IE9 上上传文件时，我没有上传，我收到以下错误。

堆栈跟踪

```
java.io.FileNotFoundException: D:\Eclipse_wspace\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\ChennaiVolunteer\activityPhoto\C:\Users\Public\Pictures\Sample Pictures\Desert.jpg (The filename, directory name, or volume label syntax is incorrect)
at java.io.RandomAccessFile.open(Native Method)
at java.io.RandomAccessFile.<init>(Unknown Source)
at javax.imageio.stream.FileImageOutputStream.<init>(Unknown Source)
at com.sun.imageio.spi.FileImageOutputStreamSpi.createOutputStreamInstance(Unknown Source)
at javax.imageio.ImageIO.createImageOutputStream(Unknown Source)
at javax.imageio.ImageIO.write(Unknown Source)
at com.chennaivolunteer.photo.upload.PhotoUploadAction.handleImage(PhotoUploadAction.java:188)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.apache.el.parser.AstValue.invoke(AstValue.java:262)
at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
at org.apache.myfaces.view.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:83)
at org.primefaces.component.fileupload.FileUpload.broadcast(FileUpload.java:298)
at javax.faces.component.UIViewRoot._broadcastAll(UIViewRoot.java:937)
at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:269)
at javax.faces.component.UIViewRoot._process(UIViewRoot.java:1249)
at javax.faces.component.UIViewRoot.processDecodes(UIViewRoot.java:682)
at org.apache.myfaces.lifecycle.ApplyRequestValuesExecutor.execute(ApplyRequestValuesExecutor.java:34)
at org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:171)
at org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:189)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:77)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:185)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:151)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:269)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
 Aug 8, 2012 2:24:16 PM org.apache.catalina.core.StandardWrapperValve invoke 
```

东南

我的 image.xhtml 是

```
<f:view>
        <h:form  enctype="multipart/form-data">
            <p:panel  header="Event Images" style="font-size:12px;height:499px">
            <h:inputHidden value="#{photoUploadAction.aid}"></h:inputHidden>
            <p:messages id="messages" for="imaload"></p:messages>       
             <p:fileUpload id="imaload" fileUploadListener="#{photoUploadAction.handleImage}"  
                           mode="advanced"  multiple="true"
                          update="messages"  
                           immediate="true"  
                           allowTypes="/(\.|\/)(gif|jpe?g|png)$/"/>  
                 <!--  <p:growl life="1000"  id="messages"/>  --> 
            </p:panel>
        </h:form>
    </f:view> 
```

我的支持bean方法是

```
 public void handleImage(FileUploadEvent event) throws IOException {
        BufferedImage bufferedImage;
        // setAid(getAid());

        String tmpFile = scontext.getRealPath(("/activityPhoto/")
                + event.getFile().getFileName());

        //File realPath = new File("e:/cv_project/ChennaiVolunteer/WebContent/activityPhoto",(event.getFile().getFileName()));
        File realPath = new File("d:/Program Files (x86)/Apache Software Foundation/Tomcat 7.0/webapps/ChennaiVolunteer/activityPhoto",(event.getFile().getFileName()));

        String filName = realPath.toString();

        /*File result = new File(tmpFile);

        String exactPath = result.toString();
*/
        byte[] imageByte = event.getFile().getContents();

        boolean flag = false;

        //storeImage(imageByte, tmpFile);

        String images = event.getFile().getFileName();
        photoUploadVO.setImageName(images);

        imageName = photoUploadVO.getImageName();

        if (loginBean.getType().equals("admin")
                || loginBean.getType().equals("ngo_coordinator")
                || loginBean.getType().equals("ngo")) {

            if (ngoPojo.getNgo_id() != 0) {
                photoUploadVO.setUsrId(ngoPojo.getNgo_id());
                photoUploadVO.setPhotoStatus("valid");
                photoUploadVO.setReasonForReject("pending");
                photoUploadVO.setUser_type(ngoPojo.getType());

            } else {
                photoUploadVO.setUsrId(loginBean.getUser_id());
                photoUploadVO.setPhotoStatus("valid");
                photoUploadVO.setReasonForReject("pending");
                photoUploadVO.setUser_type(loginBean.getType());
            }
        } else {
            photoUploadVO.setUsrId(loginBean.getUser_id());
            photoUploadVO.setPhotoStatus("pending");
            photoUploadVO.setReasonForReject("pending");
            photoUploadVO.setUser_type(loginBean.getType());
        }

        photoUploadVO.setCreated_by(loginBean.getEmail());
        photoUploadVO.setCreatedDate(new Date());
        photoUploadVO.setPhoto_path(tmpFile);
        InputStream in = new ByteArrayInputStream(imageByte);

        // photoUploadVO.setUsrId(loginBean.getUser_id());
        // photoUploadVO.setActivityId(getAid());
        bufferedImage = ImageIO.read(in);

        if (bufferedImage.getWidth() <= 400 && bufferedImage.getHeight() <= 400) {

            photoUploadVO.setDisabled("false");
            getMthd(imageByte, tmpFile);

        } else {

            try {
                photoUploadVO.setDisabled("false");

                //BufferedImage image = ImageIO.read(in);
                ImageIO.write(resize(bufferedImage, 400, 400), "jpg", new File(tmpFile));
                flag = photoUploadDaoService.uploadPhotos(photoUploadVO);

                // profileImageService.uploadPhotos(profileImageBean);
                if (flag == true) {
                    FacesMessage msg=null;
                    if(loginBean.getType().equals("admin")) {
                     msg = new FacesMessage("Successfully Uploaded");
                    }
                    if(!loginBean.getType().equals("admin")) {
                         msg = new FacesMessage("Successfully Uploaded(After administrator approve your photos will display on portal)");
                        }

                    FacesContext.getCurrentInstance().addMessage(null, msg);
                } else {
                    FacesMessage msg = new FacesMessage("Failure", event
                            .getFile().getFileName() + " to uploaded.");

                    FacesContext.getCurrentInstance().addMessage(null, msg);
                }

            } catch (IOException e) {
                e.printStackTrace();

                FacesMessage error = new FacesMessage(
                        FacesMessage.SEVERITY_ERROR,
                        "The files were not uploaded!", "");
                FacesContext.getCurrentInstance().addMessage(null, error);
            }

        }

    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T12:08:22.033

这是由 IE 中的安全漏洞引起的。所有 IE 版本都会发送完整的客户端文件路径，而不仅仅是文件名和上传的文件。

在您的代码中使用它之前，您应该使用 Commons IO[`FilenameUtils#getName()`](http://commons.apache.org/io/api-release/org/apache/commons/io/FilenameUtils.html#getName%28java.lang.String%29)从完整的客户端文件路径中提取文件名。

```
String filename = FilenameUtils.getName(event.getFile().getFileName()));
// ... 
```

### 也可以看看：

*   [Apache Commons FileUpload FAQ](http://commons.apache.org/fileupload/faq.html) -[为什么`FileItem.getName()`返回整个路径，而不仅仅是文件名？](http://commons.apache.org/fileupload/faq.html#whole-path-from-IE)

* * *

**与具体问题无关**，整个`tmpFile`变量都是多余的。在到目前为止给出的代码中，您根本不需要它。完全摆脱它。这也是创建临时文件的错误方法。`getRealPath()`可能会在某些服务器配置中返回`null`，并且绝对不打算将文件保存在其中，而只是从中读取文件。

# jquery - jQuery find pattern and get the element ID

> ID：11861137
> 
> 赞同：0
> 
> 时间：2012-08-08T09:03:59.820
> 
> 标签：jquery

I need to use the jQuery find built-in function and get the ID of the "found" form.

```
// workingForm is a valid obj and the jQuery selector is form[id$="frmAlert-"]
var workingForm = J('#tabs').find('form[id$="frmAlert-"]');

var idWorkingForm = J(workingForm).attr('id');
alert(idWorkingForm);
var idWorkingForm = workingForm.attr('id');
alert(idWorkingForm); 
```

Why is the idWorkingForm always undefined?

Thanks!

# c - C 未定义的引用

> ID：11861139
> 
> 赞同：5
> 
> 时间：2012-08-08T09:04:01.983
> 
> 标签：c, header-files, resource-files

我在以下代码中遇到了一些问题，特别是在 header.c 中，我无法访问 header.h 中的 extern int x 变量...为什么？.h 中的外部变量不是全局变量吗？我如何在其他文件上使用它？

===header.h===

```
#ifndef HDR_H
#define HDR_H

extern int x;
void function();

#endif 
```

===header.c===

```
#include <stdio.h>
#include "header.h"

void function()
{
    printf("%d", x); //****undefined reference to x, why?****
} 
```

===样本.c===

```
int main()
{
    int x = 1;
    function();
    printf("\n%d", x);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T09:09:26.570

宣言

```
extern int x; 
```

告诉编译器在某些源文件中会有一个*名为*`x`. 但是，在`main`函数中声明一个*局部*变量`x`。将该声明移到外部`main`以使其全局化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T09:08:04.607

关键字表示变量存在但`extern`不创建它。编译器期望另一个模块将有一个具有该名称的全局变量，并且链接器将做正确的事情来将它们连接起来。

你需要这样改变`sample.c`：

```
/* x is a global exported from sample.c */
int x = 1;

int main()
{
    function();
    printf("\n%d", x);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T09:06:14.070

`extern`声明一个变量，但没有定义它。它基本上告诉编译器有`x`其他地方的定义。要修复将以下内容添加到`header.c`（或其他一些`.c`文件，但*只有*一个`.c`文件）：

```
int x; 
```

注意在`main()`局部变量中`x`会隐藏全局变量`x`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T09:06:54.473

事实上，`extern int x;`手段`x`将在另一个地方/翻译单元中定义。

编译器希望`x`在全局范围内的某个地方找到 的定义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T09:32:37.067

我会像这样重新组织/修改您的代码并摆脱 header.c

===样本.h===

```
#ifndef SAMPLE_H
#define SAMPLE_H

extern int x;
void function();

#endif 
```

===样本.c===

```
#include <stdio.h>
#include "sample.h"

int x;

void function()
{
    printf("%d", x);
}

int main()
{
    x = 1;
    function();
    printf("\n%d", x);
    return 0;
} 
```

# android - 运行 Google Map API 时出现 InflateException

> ID：11861145
> 
> 赞同：0
> 
> 时间：2012-08-08T09:04:14.183
> 
> 标签：android, google-maps

在 Eclipse 中运行一个关于 Google Map API 的项目时，我遇到了一个问题。我有一个新的 Google API 项目，AVD 目标是 Google API。但是`Android.view.InflateException`，扁平化类存在错误`com.google.android.maps.MapView`。布局有问题吗？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <TextView 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/jindu"
        />
    <EditText 
        android:id="@+id/et1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="116.46"
        />

</LinearLayout>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <TextView 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/weidu"
        />
    <EditText 
        android:id="@+id/et2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="16.46"
        />
    <Button 
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/select"
        />
</LinearLayout>
<com.google.android.maps.MapView
    android:id="@+id/mapView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:clickable="true"
    android:enabled="true"
    android:apiKey="AIzaSyBtMrZJRGm32jIFRxmpgKf3WTqR6AHmkj8"
    />

 </LinearLayout> 
```

我的主要文件

```
<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.INTERNET" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Map"
        android:label="@string/title_activity_map" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <uses-library android:name="com.google.android.maps" />

</application> 
```

我的课

```
EditText et1;
EditText et2;
Button button1;
MapView mapView;
MapController mapController;

double jindu = 116.46;
double weidu = 39.92;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.map);
    et1 = (EditText) this.findViewById(R.id.et1);
    et2 = (EditText) this.findViewById(R.id.et2);
    button1 = (Button) this.findViewById(R.id.button1);
    mapView = (MapView) this.findViewById(R.id.mapView);
    mapController = mapView.getController();        
    setGeoPoint();
    button1.setOnClickListener(new OnClickListener(){

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            jindu = Double.parseDouble(et1.getText().toString());
            weidu = Double.parseDouble(et2.getText().toString());
            setGeoPoint();
        }

    });
}

private void setGeoPoint() {
    GeoPoint gp = new GeoPoint((int)(jindu*1E6),(int)(weidu*1E6));
    mapController.animateTo(gp);
    mapController.setZoom(18);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:15:01.720

你有没有给你的谷歌地图 API 密钥？如果是的话，你可能没有用 MapActivity 代替活动扩展你的类。当您使用地图时，您需要扩展 MapActivity 代替活动

有关更多详细信息，请检查此问题 [android hellomap 示例给出异常](https://stackoverflow.com/questions/3040307/android-hellomap-example-giving-exception)

# jquery - 仅在特定屏幕尺寸上触发选项卡

> ID：11861147
> 
> 赞同：0
> 
> 时间：2012-08-08T09:04:17.263
> 
> 标签：jquery

只有在 iPhone 上查看时才会触发选项卡时遇到一些问题（基本上是 max-wdith:740px）。

我尝试了许多选项，但似乎无法使其正常工作。这是我的基本 jQuery：

* * *

```
$('#tab-1, #tab-2, #tab-3').hide();
$('#tab-1').show();
$('ul.mobileTabs li a.mobiletab1').addClass('mobileActive');

$('ul.mobileTabs li a').click(function(){
    $('ul.mobileTabs li').removeClass('mobileActive');
    $(this).parent().addClass('mobileActive');
    var currentTab = $(this).attr('href');
    $('#tab-1, #tab-2, #tab-3').hide();
    $(currentTab).show();
    return false;
}); 
```

* * *

如果有人可以帮助我，那就太好了！

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:09:11.840

响应式设计的 iPhone 像素大小为纵向 300 像素和横向 420 像素。

如果您只想为特定浏览器大小运行功能，您可以这样做：

```
if($(window).width() <= 740) {
   foo();
} else {
   boo();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:09:16.900

这是 ->`$('ul.mobileTabs li').addClass('mobileActive');`吗？

```
$('#tab-1, #tab-2, #tab-3').hide();
$('#tab-1').show();
$('ul.mobileTabs li').addClass('mobileActive'); 
```

dom 添加的类“mobileActive”应该是“li”

# java - 将 SQL 格式转换为 java 格式的正则表达式

> ID：11861148
> 
> 赞同：0
> 
> 时间：2012-08-08T09:04:18.940
> 
> 标签：java, regex

我正在尝试没有机会将 sql 属性转换为 java 格式。举个例子：我想将“p_start_date”更改为“pStartSate”。

我试过用

```
String var = "p_start_date";
var.replaceAll("(_[a-z])\1", "([A-Z])\1"); 
```

并且

```
Pattern pattern = Pattern.compile("([a-z0-9]+_)*");
        Matcher matcher = pattern.matcher(var);

    if (matcher.find()) {
        // Get all groups for this match
        //System.out.println(matcher.groupCount());
        for (int i=0; i<=matcher.groupCount(); i++) {
            String groupStr = matcher.group(i);
            System.out.println(groupStr);
        }
    } 
```

但两者都不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:32:29.843

这是你想要的？

```
String var = "p_start_date";

Pattern pattern = Pattern.compile("_([a-z])");
Matcher matcher = pattern.matcher(var);

StringBuffer sb=new StringBuffer();
while(matcher.find()) {
    matcher.appendReplacement(sb, matcher.group(1).toUpperCase());
}
matcher.appendTail(sb);

System.out.println(sb); 
```

输出：**pStartDate**

# iphone - 显示 CALayer 动画的帧率 (FPS)

> ID：11861149
> 
> 赞同：2
> 
> 时间：2012-08-08T09:04:24.610
> 
> 标签：iphone, ios, ipad, animation, calayer

我一直在 iPad 上创建一个（相当）简单的 CALayer 动画，但它并不像我希望的那样流畅。为了查看我的优化尝试是否有效，我想向控制台显示或输出帧速率（系统设法绘制的每秒帧数）。此功能在游戏引擎中很常见。

这可以通过 CALayer 动画实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:07:44.793

你可以使用 Instruments 来代替 Run，去 Profile，然后你可以选择 OpenGL ES Driver。 ![在此处输入图像描述](../Images/b085e8184fbbaa07ff657b2bda682067.png)

您可以观看 WWDC Session 238 - iOS App Performance: Graphics and Animations，它将让您深入了解可以改进动画的内容和方法。

# c# - 查找文件夹中的所有文件

> ID：11861151
> 
> 赞同：67
> 
> 时间：2012-08-08T09:04:42.647
> 
> 标签：c#, file, directory

我正在寻找一个程序，它可以在我的桌面上找到某种类型的所有文件并将它们放入特定的文件夹中，例如，我会将所有带有 .txt 的文件放入 Text 文件夹中。

任何想法最好的方法是什么？谢谢。

我试过这个：

```
string startPath = @"%userprofile%/Desktop";
string[] oDirectories = Directory.GetDirectories(startPath, "");
Console.WriteLine(oDirectories.Length.ToString());

foreach (string oCurrent in oDirectories)
    Console.WriteLine(oCurrent);

Console.ReadLine(); 
```

未能成功找到所有文件。

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-08-08T09:40:32.970

很多这些答案实际上都不起作用，我自己尝试过。试一试：

```
string filepath = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);
DirectoryInfo d = new DirectoryInfo(filepath);

foreach (var file in d.GetFiles("*.txt"))
{
      Directory.Move(file.FullName, filepath + "\\TextFiles\\" + file.Name);
} 
```

它会将桌面上的所有 .txt 文件移动到文件夹`TextFiles`中。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-08T09:14:18.690

首先；最佳做法是获取用户桌面文件夹

```
string path = Environment.GetFolderPath(Environment.SpecialFolder.Desktop); 
```

然后你可以找到所有类似的文件

```
string[] files = Directory.GetFiles(path, "*.txt", SearchOption.AllDirectories); 
```

请注意，通过上述行，您将在登录用户的桌面文件夹和所有子文件夹中找到所有扩展名为 .txt 的文件。

然后您可以通过枚举上述集合来复制或移动文件，例如

```
// For copying...
foreach (string s in files)
{
   File.Copy(s, "C:\newFolder\newFilename.txt");
}

// ... Or for moving
foreach (string s in files)
{
   File.Move(s, "C:\newFolder\newFilename.txt");
} 
```

请注意，您必须在`Copy()`（或`Move()`）操作中包含文件名。因此，您必须找到一种方法来确定至少您正在处理的扩展名的文件名，而不是像上面示例中那样命名所有文件。

考虑到这一点，您还可以查看`DirectoryInfo`和`FileInfo`类。这些以类似的方式工作，但您可以更轻松地获取有关路径/文件名、扩展名等的信息

查看这些以获取更多信息：

[http://msdn.microsoft.com/en-us/library/system.io.directory.aspx](http://msdn.microsoft.com/en-us/library/system.io.directory.aspx)

[http://msdn.microsoft.com/en-us/library/ms143316.aspx](http://msdn.microsoft.com/en-us/library/ms143316.aspx)

[http://msdn.microsoft.com/en-us/library/system.io.file.aspx](http://msdn.microsoft.com/en-us/library/system.io.file.aspx)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-08T09:09:21.463

您可以尝试使用 Directory.GetFiles 并修复您的模式

```
 string[] files = Directory.GetFiles(@"c:\", "*.txt");

 foreach (string file in files)
 {
    File.Copy(file, "....");
 }

 Or Move

 foreach (string file in files)
 {
    File.Move(file, "....");
 } 
```

[http://msdn.microsoft.com/en-us/library/wz42302f](http://msdn.microsoft.com/en-us/library/wz42302f)

# asp.net-mvc - MVC3 - 可空类型（表单没有向控制器发送值）

> ID：11861167
> 
> 赞同：0
> 
> 时间：2012-08-08T09:06:04.753
> 
> 标签：asp.net-mvc, asp.net-mvc-3

这两天我试图解决这个问题。不幸的是我做不到。我不明白为什么我的“表单”将空值发送到某个类。你知道我该怎么做吗？真的这个问题让我很紧张。

> 参数字典包含“SportsStore.WebUI.Controllers.CartController”中方法“System.Web.Mvc.RedirectToRouteResult AddToCart(Int32, System.String)”的不可为空类型“System.Int32”的参数“Id_tow”的空条目'。可选参数必须是引用类型、可空类型或声明为可选参数。参数名称：parameters 描述：当前web请求执行过程中发生了未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.ArgumentException：参数字典包含不可为空类型“System.Int32”的参数“Id_tow”的空条目，用于“System.Web.Mvc.RedirectToRouteResult AddToCart(Int32, System.String)”中的方法SportsStore.WebUI.Controllers.CartController'。可选参数必须是引用类型、可空类型或声明为可选参数。参数名称：参数
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

这是这个表格：

```
@model SportsStore.WebUI.Models.SomeView
@using SportsStore.WebUI.HtmlHelpers
@using SportsStore.WebUI.Controllers
@using SportsStore.Entities

@{
    ViewBag.Title = "List";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>List</h2>

@foreach (var p in Model.Towar)
{
<div class="item">
<h3>@p.Nazwa</h3>
@p.Opis

@using(Html.BeginForm("AddToCart", "Cart")) {
@Html.HiddenFor(x => @p.Id_tow)
@Html.Hidden("returnUrl", Request.Url.PathAndQuery)
<input type="submit" value="+ Add to cart" />
}

<h4>@p.Cena.ToString("c")</h4>
</div>
}

<h2>List</h2>

@foreach (var b in Model.Kategorie)
{
<div class="item">
<h3>@b.Nazwa</h3>
</div>
}

<div class="pager">
@Html.PageLinks(Model.PagingInfo, x => Url.Action("List",
new {page = x, category = Model.CurrentCategory}))
</div> 
```

在我看来是显示正确的值，但将 null 发送到类（HTML 源）

```
<div class="item">
<h3>Piłka</h3>
Piłka Firmy Nike

<form action="/Cart/AddToCart" method="post"><input data-val="true" data-val-number="The field Id_tow must be a number." data-val-required="The Id_tow field is required." id="p_Id_tow" name="p.Id_tow" type="hidden" value="1" /><input id="returnUrl" name="returnUrl" type="hidden" value="/" /><input type="submit" value="+ Add to cart" />
</form>
<h4>59,80 zł</h4>
</div> 
```

控制器购物车的一部分，它获取空值：

```
public RedirectToRouteResult AddToCart(int Id_tow, string returnUrl)
            {
                Towar product = repository.Towar
                .FirstOrDefault(p => p.Id_tow == Id_tow);
                if (product != null)
                {
                    GetCart().AddItem(product, 1);
                }

                return RedirectToAction("Index", new { returnUrl });
            } 
```

如果我会让我的价值观一切正常，但这当然不能解决问题

```
public RedirectToRouteResult AddToCart(int Id_tow = 1, string returnUrl = "www.gmail.com")
            {
                Towar product = repository.Towar
                .FirstOrDefault(p => p.Id_tow == Id_tow);
                if (product != null)
                {
                    GetCart().AddItem(product, 1);
                }

                return RedirectToAction("Index", new { returnUrl });
            } 
```

**如果没有您的帮助，我将无法解决此问题。谢谢**

```
@foreach (var p in Model.Towar)
{
<div class="item">
<h3>@p.Nazwa</h3>
@p.Opis

@{
    int Id_tow = @p.Id_tow;
}

@using(Html.BeginForm("AddToCart", "Cart")) {
@Html.HiddenFor(x => Id_tow)
@Html.Hidden("returnUrl", Request.Url.PathAndQuery)
<input type="submit" value="+ Add to cart" />
}

<h4>@p.Cena.ToString("c")</h4>
</div>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:19:38.073

你可以更换

```
public RedirectToRouteResult AddToCart(int Id_tow, string returnUrl)
            {
                Towar product = repository.Towar
                .FirstOrDefault(p => p.Id_tow == Id_tow);
                if (product != null)
                {
                    GetCart().AddItem(product, 1);
                }

                return RedirectToAction("Index", new { returnUrl });
            } 
```

和

```
public RedirectToRouteResult AddToCart(Towar tow, string returnUrl)
            {
                Towar product = repository.Towar
                .FirstOrDefault(p => p.Id_tow == tow.Id_tow);
                if (product != null)
                {
                    GetCart().AddItem(product, 1);
                }

                return RedirectToAction("Index", new { returnUrl });
            } 
```

或者您可以使用`Html.Hidden("Id_tow", @p.Id_tow)`，但不建议这样做，因为它会在 View 和 Controller 之间创建一些脆弱的依赖关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:31:07.617

在生成的hmtl的以下部分可以看到问题：

```
id="p_Id_tow" name="p.Id_tow" 
```

这种名称差异会阻止 mvc 路由引擎将隐藏字段的值与名为 Id_tow 的参数相关联。最简单的解决方案是更改参数的名称以匹配字段的 id 或名称。

# java - log4j：如何记录记录器名称？

> ID：11861171
> 
> 赞同：2
> 
> 时间：2012-08-08T09:06:15.287
> 
> 标签：java, log4j

我需要将 Logger 名称放入每个日志中。现在我用

`logger.error(logger.getName());`.

有没有更好的办法？我不想在`%m`这里使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T09:27:00.080

您可以在日志记录文本中使用[%c 选项](http://logging.apache.org/log4j/2.x/manual/layouts.html#Patterns)。

# php - 如何垂直对齐不在同一个div中的两个对象

> ID：11861172
> 
> 赞同：0
> 
> 时间：2012-08-08T09:06:15.443
> 
> 标签：php, css, wordpress

`<div id='widget-sidebar' class='widgets_on_page'>`我在论坛内容上方有一个带有登录小部件的 wordpress 页面。我想将它浮动到右侧并使论坛标题在左侧垂直对齐，如下所示：

![在此处输入图像描述](../Images/43f07f62795ff909ed00d7109646c137.png)

我遇到的问题是论坛标题是动态生成的，所以我不能将它们放在同一个 div 中。

有任何想法吗？

这是源代码：

```
 <div id="primary">
            <div id="content" role="main">

                    <div id='widget-sidebar' class='widgets_on_page'>
    <ul><li id="wp_sidebarlogin-2" class="widget widget_wp_sidebarlogin"><h2 class="widgettitle">Welcome Admin</h2><div class="avatar_container"><img src="http://localhost/wordpress/wp-content/plugins/user-avatar/user-avatar-pic.php?src=http://localhost/wordpress/wp-content/uploads/avatars/1/1344255249-bpfull.jpg&#038;w=38&#038;id=1&#038;random=1344255249" alt="" class=" avatar  avatar-38  photo user-1-avatar" width="38" height="38" /></div><ul class="pagenav"><li class="page_item"><a href="http://localhost/wordpress/wp-admin/">Dashboard</a></li><li class="page_item"><a href="http://localhost/wordpress/wp-admin/profile.php">Profile</a></li><li class="page_item"><a href=" http://localhost/wordpress/wp-login.php?action=logout&amp;redirect_to=http%3A%2F%2Flocalhost%2Fwordpress%2F%3Fforum%3Dna-forum&amp;_wpnonce=caf8874286">Logout</a></li></ul></li></ul>
  </div><!-- widgets_on_page -->

    <article id="post-2901" class="post-2901 forum type-forum status-publish hentry">
        <header class="entry-header">
                        <h1 class="entry-title"><a href="http://localhost/wordpress/?forum=na-forum" title="Permalink to NA Forum" rel="bookmark">NA Forum</a></h1>

                    </header><!-- .entry-header --> 
```

这是我正在使用的论坛页面模板的一部分：

```
 <div id="primary">
            <div id="content" role="main">

            <?php widgets_on_template("widget-sidebar"); ?>

            <?php if ( have_posts() ) : ?>

                <?php twentyeleven_content_nav( 'nav-above' ); ?>

                <?php /* Start the Loop */ ?>
                <?php while ( have_posts() ) : the_post(); ?>

                    <?php get_template_part( 'content', get_post_format() ); ?>

                <?php endwhile; ?>

                <?php twentyeleven_content_nav( 'nav-below' ); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:12:25.080

如果您不关心 IE7，您可以使用`display: table-cell;`. 由于它被呈现为一个表格，它失去了浮动的能力。因此，您必须在至少一个元素上明确设置宽度。

### CSS

```
div {
    display:        table-cell;
    vertical-align: middle;
}

div:first-child {
    width:      80%;
} 
```

### HTML

```
<div>
    first line<br>
    second line<br>
    last line
</div>

<div>
    just one line<br>
</div> 
```

### 小提琴

[http://jsfiddle.net/y96hb/](http://jsfiddle.net/y96hb/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:01:12.683

对小部件使用绝对定位应该可以。就像是：

```
div#content {
    position: relative;
}

div#widget-sidebar {
    position: absolute;
    top: 10px;
    right: 10px;
} 
```

# reporting-services - 如何在 SSRS 2005 中的每一页的表尾显示列的总和？

> ID：11861174
> 
> 赞同：0
> 
> 时间：2012-08-08T09:06:26.410
> 
> 标签：reporting-services

我有一个由表格控件组成的 SSRS 报告。表有三列（X、Y、Z），并填充了来自数据库存储过程的数据。在表格页脚中，我使用公式显示 Z 列的总和`=Sum(Fields!Z.Value)`。表格页脚仅显示在最后一页而不是每一页。现在我必须逐页显示 Z 列的总和。即，如果报告由 4 页组成，除最后一页外的每一页都有 25 行，最后一页有 20 页，那么我必须在表尾显示第 1 页的 Z 列总和，第 2 页的 Z 列总和表格页脚等等...

我可以在每一页上显示表格页脚，但无法计算每一页的 Z 列的总和。

有人可以在这方面帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:11:05.387

如果您只想在最后一页显示您的页脚，您应该以适当的方式设置页脚文本框的可见性。

**1.**将文本框添加到页脚。
**2.** TextBox Properties -> Visibility -> Show or hide based on expression：

```
=IIF(Globals!PageNumber = Globals!TotalPages, False, True) 
```

**3.**在 TextBox 的 Expression 中写：

```
=Sum(Fields!Z.Value, "YourDataSet") 
```

# android - 如何：在 android 中使用 AudioManager startBluetoothSco() 函数

> ID：11861180
> 
> 赞同：2
> 
> 时间：2012-08-08T09:06:38.730
> 
> 标签：android, bluetooth, audio-recording

如果我想设置 AudioManager.startBluetoothSco() 函数的限制，我在哪里做？从这里：http: [//developer.android.com/reference/android/media/AudioManager.html#startBluetoothSco()](http://developer.android.com/reference/android/media/AudioManager.html#startBluetoothSco())

限制是：

• 流类型必须是 STREAM_VOICE_CALL

•格式必须是单声道

• 采样必须为 16kHz 或 8kHz

STREAM_VOICE_CALL 可以安装在：

```
AM.setMode(AudioManager.MODE_IN_CALL); 
```

或者

```
AM.setStreamSolo(AudioManager.STREAM_VOICE_CALL, true); 
```

Mono 和采样可以设置在：

```
audioRecord = new AudioRecord(
android.media.MediaRecorder.AudioSource.MIC, 8000,
AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_PCM_16BIT, buffersizebytes); 
```

谁能想到或知道不同的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:56:30.267

您提供给 Android SDK 文档的链接如下：

“...如果建立了 SCO 连接，则以下限制适用于音频输出流，以便它们可以路由到 SCO 耳机：

*   流类型必须是 STREAM_VOICE_CALL
*   格式必须是单声道
*   采样必须是 16kHz 或 8kHz

以下限制适用于输入流：

*   格式必须是单声道
*   采样必须为 8kHz”

您对“AudioRecord”的使用是输入流，不需要关注 STREAM_VOICE_CALL：

对于“AudioTrack”，您需要在 SCO 模式下执行以下操作：

```
AudioTrack audioTrack = new AudioTrack(AudioManager.STREAM_VOICE_CALL, //
8000, AudioFormat.CHANNEL_OUT_MONO, AudioFormat.ENCODING_PCM_16BIT, //
minBufferSizeInBytes, //
AudioTrack.MODE_STREAM); 
```

*不在*SCO 模式下的情况如下：

```
AudioTrack audioTrack = new AudioTrack(AudioManager.STREAM_MUSIC, //
8000, AudioFormat.CHANNEL_OUT_MONO, AudioFormat.ENCODING_PCM_16BIT, //
minBufferSizeInBytes, //
AudioTrack.MODE_STREAM); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:30:54.633

要解决这个问题，你必须像这样使用：一个用于输入，另一个用于输出

```
 audioRecord = new AudioRecord(
                                    android.media.MediaRecorder.AudioSource.MIC ,                                                                                SAMPPERSEC,
            channelConfiguration, audioEncoding, buffersizebytes);

        Atrack = new AudioTrack(AudioManager.STREAM_VOICE_CALL,
            SAMPPERSEC,
            AudioFormat.CHANNEL_OUT_MONO,
            audioEncoding,
            buffersizebytes,
            AudioTrack.MODE_STREAM); 
```

# sql - 我可以使用 t-SQL 标记字符串吗

> ID：11861181
> 
> 赞同：1
> 
> 时间：2012-08-08T09:06:39.390
> 
> 标签：sql, sql-server, tsql, tokenize

我想知道我是否有这样创建的 SQL Server 2008 表：

```
CREATE TABLE tbl (id INT PRIMARY KEY, 
                  dvt NVARCHAR(32), 
                  d0 TINYINT, 
                  d1 TINYINT, 
                  d2 TINYINT);
INSERT INTO tbl (id, dvt, d0, d1, d2) 
 VALUES(1, '1', NULL, NULL, NULL);
INSERT INTO tbl (id, dvt, d0, d1, d2) 
 VALUES(2, '', NULL, NULL, NULL);
INSERT INTO tbl (id, dvt, d0, d1, d2) 
 VALUES(3, '2,5', NULL, NULL, NULL);
INSERT INTO tbl (id, dvt, d0, d1, d2) 
 VALUES(4, '13, 34, 45, 5', NULL, NULL, NULL);
INSERT INTO tbl (id, dvt, d0, d1, d2) 
 VALUES(5, '1,8, 10', NULL, NULL, NULL); 
```

我需要从“dvt”列中取出字符串并将其拆分为“d0”、“d1”和“d2”列。'dvt' 值可以用逗号分隔。

我可以使用 C# 和标记化函数来做到这一点，但我想知道是否可以使用 SQL 来做同样的事情？

之前的列：

```
1, "1",             NULL, NULL, NULL
2, "",              NULL, NULL, NULL
3, "2,5",           NULL, NULL, NULL
4, "13, 34, 45, 5", NULL, NULL, NULL
5, "1,8, 10",       NULL, NULL, NULL 
```

之后的列：

```
1, "1",             1,    NULL, NULL
2, "",              NULL, NULL, NULL
3, "2,5",           2,    5,    NULL
4, "13, 34, 45, 5", 13,   34,   45  -- 5 is discarded
5, "1,8, 10",       1,    8,    10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:17:04.727

尝试这样的事情

```
 ;WITH Vals AS (
         SELECT id,
                dvt,
                CAST('<r>'+REPLACE(dvt,',','</r><r>')+'</r>' AS XML).query('/r[1]').value('.','varchar(max)') d1,
                CAST('<r>'+REPLACE(dvt,',','</r><r>')+'</r>' AS XML).query('/r[2]').value('.','varchar(max)') d2,
                CAST('<r>'+REPLACE(dvt,',','</r><r>')+'</r>' AS XML).query('/r[3]').value('.','varchar(max)') d3
         FROM   tbl
)
SELECT  id,
        dvt,
        CASE WHEN d1 = '' THEN NULL ELSE d1 END d1,
        CASE WHEN d2 = '' THEN NULL ELSE d2 END d2,
        CASE WHEN d3 = '' THEN NULL ELSE d3 END d3
FROM    Vals 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:52:16.547

这种代码的主要问题是计算的重用。

SQL Server 擅长缓存结果*（如果您**键入**完全相同的`CHARINDEX()`计算 5 次，它只计算一次并重复使用该结果 4 次）*。

不过，对于不得不键入或维护该代码的可怜的程序员来说，这可不是什么安慰。

SQL Server 2005 以后`CROSS APPLY`的版本确实有所帮助。逻辑是重复的，但结果可以重复引用，而不是计算重复键入。

```
SELECT
  *,
  SUBSTRING(dvt, 1,            ISNULL(comma1.pos-1, LEN(dvt))           ) AS item1,
  SUBSTRING(dvt, comma1.pos+1, ISNULL(comma2.pos-1, LEN(dvt))-comma1.pos) AS item2,
  SUBSTRING(dvt, comma2.pos+1, ISNULL(comma3.pos-1, LEN(dvt))-comma2.pos) AS item3
FROM
(
  SELECT 'ab,c,def,hij' AS dvt
  UNION ALL
  SELECT 'xyz,abc'      AS dvt
)
  AS data
OUTER APPLY
  (SELECT NULLIF(CHARINDEX(',', data.dvt, 1           ), 0) AS pos                     )  AS comma1
OUTER APPLY
  (SELECT NULLIF(CHARINDEX(',', data.dvt, comma1.pos+1), 0) AS pos WHERE comma1.pos > 0)  AS comma2
OUTER APPLY
  (SELECT NULLIF(CHARINDEX(',', data.dvt, comma2.pos+1), 0) AS pos WHERE comma2.pos > 0)  AS comma3
OUTER APPLY
  (SELECT NULLIF(CHARINDEX(',', data.dvt, comma3.pos+1), 0) AS pos WHERE comma3.pos > 0)  AS comma4 
```

另一种选择是简单地编写一个执行此操作的*表值用户定义函数*（即使函数的结果始终是一行）。然后你只需`CROSS APPLY`那个函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:14:04.937

这是可能的。

您可以通过一些重复调用`CHARINDEX`和检查空值来做到这一点，但编写 a`FUNCTION`来拆分字符串可能会更好更清晰。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-10-26T04:07:14.077

我需要 Sybase 的字符串标记器；名称数据中由 1 个或多个空格分隔 名称日期干净且没有逗号或其他特殊字符

```
declare @test varchar(60)
select @test=str_replace(lower(rtrim('Jayanta  Narayan     Choudhuri'))," ",",")
exec sp_splitwords @test 
```

这是基于来自[http://www.sql9.com/?id=102的 Kenny Lucas 的简洁提示](http://www.sql9.com/?id=102)

```
drop proc sp_splitwords
go
create proc sp_splitwords(@instr varchar(80)) as
begin
  declare @pos  int, 
          @word varchar(80), 
          @list varchar(81)

  create table #words(word varchar(80))    
  select @list = @instr + ','    
  set @pos = patindex('%,,%',@list)
  while @pos > 0
  begin
    select @list = str_replace(@list,',,',',')    
    set @pos = patindex('%,,%',@list)
  end

  set @pos = patindex('%,%',@list)

  while @pos > 0
  begin    
    set @word = substring(@list, 1,@pos-1)            
    set @list = substring(@list, @pos+1,len(@list)-@pos)    
    if NOT( @word is null OR LEN(@word) = 0 )
      insert into #words (word) values (@word)    
    set @pos = patindex('%,%',@list)
  end

  select * from #words
  order by len(word) desc

  drop table #words
end 
```

我可以将 Metaphone SQL 函数移植到 Sybase [http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=125724](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=125724)

Sybase 允许从一个漂亮的解决方法中递归函数 [http://www.sypron.nl/quiz2008a.html#jan08](http://www.sypron.nl/quiz2008a.html#jan08)

```
CREATE FUNCTION Metaphone2 (@str VARCHAR(100))
RETURNS VARCHAR(25) AS
BEGIN
  RETURN @str 
END

DROP FUNCTION Metaphone2
GO
CREATE FUNCTION Metaphone2 (@str VARCHAR(100))
RETURNS VARCHAR(25) AS
BEGIN
  RETURN dbo.Metaphone(@str)
END 
```

[更改了从http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=125724](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=125724)粘贴的 1 行函数

变音位和字符串标记器的组合意味着我可以模糊搜索名字的第一个中间名和姓氏及其轮换

# plone - 使用 Dexterity 模式或 XML 的传统界面？

> ID：11861182
> 
> 赞同：1
> 
> 时间：2012-08-08T09:06:39.760
> 
> 标签：plone, dexterity

Plone Dexterity 支持通过接口（使用 zope.schema 进行定义）或通过 XML 文件定义内容类型模式。首选/推荐的方式是什么？

此外：是否有用于定义模式 (models/mytype.xml) 的 XML 方言的文档？

此[演示文稿](http://shuttlethread.com/blog/beyond-through-the-web-dexterity-types)看起来很接近但不完整。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:47:04.813

我个人更喜欢 zope.schema 路线；如果我真的想的话，我可以用 python 动态改变接口属性，而 XML 定义当然是静态的。

另外，请注意，要针对 XML 定义的模式注册适配器和视图，无论如何都需要将其拉入 python 代码：

```
from plone.dexterity import api

class IMyXMLDefinedType(api.Schema):
    api.model('my_xml_defined_type.xml') 
```

XML 方言是[`plone.supermodel`package](https://pypi.python.org/pypi/plone.supermodel)的一部分；我无法找到[源代码](https://github.com/plone/plone.supermodel)之外的任何文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T23:48:32.590

我将通过说没有硬性和快速的答案来助长混乱。

对于更简单的内容类型，或者在开发更复杂的内容类型的早期，我经常倾向于超模 XML，因为它与灵巧的 TTW 编辑器的工作非常密切。它允许我与客户一起工作，他们可以非常快速地反馈他们想要从他们的内容类型中得到什么。

有时我什至会进入一些功能的文件系统开发，同时仍然通过超模在 FTI 中定义字段。

但是，对于更复杂的内容类型，您几乎肯定会遇到仅靠超模无法做到的事情。那时，我通常会转换为模式——这通常很容易做到。

理想情况下，如果你正在做大量的灵活性开发，你应该能够很容易地来回移动。它们只是表示相同对象和属性的不同方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T20:00:12.987

我更喜欢接口而不是 xml 模型。部分原因是我更喜欢 Python 而不是 XML。部分原因是您无法使用 XML 做一些事情。例如，如果您想使用collective.dexteritytextindexer 将一个字段注册为可搜索的，您（当前）无法在Plone 界面中设置它，因此您必须使用Python 代码，因此必须使用一个界面。但是 Martijn 在他的回答中表明，您可以在接口中使用 api.model 来引用 xml 文件，所以如果您真的愿意，这可能是一种解决方法。

# android - 在活动中设置 ExpandableListView 时出错

> ID：11861188
> 
> 赞同：0
> 
> 时间：2012-08-08T09:07:00.933
> 
> 标签：android, android-listview, nullpointerexception

```
 public class Official_Activity extends Activity{
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.official_data2);
    setupViewComponent();

    new setList().execute();
}

 private void setupViewComponent() {
    // TODO Auto-generated method stub
     ExpandableListView list = (ExpandableListView)findViewById(R.id.list);
}

private class setList extends AsyncTask <Void, Void, List<News>>{

    List<Map<String, Object>> groups;
    List<List<HashMap<String, Object>>> childs;

     final ProgressDialog progDlg3 = new ProgressDialog(Official_Group.group);

    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        progDlg3.setTitle("Please wait");
        progDlg3.setMessage("Loading...");
        progDlg3.setIcon(android.R.drawable.ic_dialog_info);
        progDlg3.setCancelable(false);
        progDlg3.show();
    }

    @Override
    protected List<News> doInBackground(Void... arg0) {
        // TODO Auto-generated method stub
        List<News> newes = null;
        try {
            newes = GetJson.update();
            return newes;
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return newes;

    }

    protected void onPostExecute(List<News> result){

         groups = new ArrayList<Map<String, Object>>();
        Map<String, Object> group1 = new HashMap<String, Object>();
        group1.put("ItemTitle", "Earthquake report");
        group1.put("ItemText", "Data from USGS");
        Map<String, Object> group2 = new HashMap<String, Object>();
        group2.put("ItemTitle", "Weather info");
        group2.put("ItemText", "Show weather info");
    groups.add(group1);
    groups.add(group2);

    List<HashMap<String, Object>> data = new ArrayList<HashMap<String, Object>>();
    for(News news : result){
        HashMap<String, Object> item = new HashMap<String, Object>();
        item.put("ItemTitle", news.getPlace());
        item.put("ItemText", "Magnitude: "+news.getMag());
        item.put("latit", news.getLatit());
        item.put("longit", news.getLongit());
        item.put("date", news.getTime());
        item.put("tzone", news.getTzone());
        data.add(item);
    }

List<HashMap<String, Object>> weather = new ArrayList<HashMap<String, Object>>();
    HashMap<String, Object> item2 = new HashMap<String, Object>();
    item2.put("ItemTitle", "Coming Soon");
    item2.put("ItemText", "");
    item2.put("latit", "");
    item2.put("longit", "");
    item2.put("date", "");
    item2.put("tzone", "");
    weather.add(item2);

     childs = new ArrayList<List<HashMap<String, Object>>>();
    childs.add(data);
    childs.add(weather);

    ExpandableListAdapter mExpaListAdap = new SimpleExpandableListAdapter(
            this,
            groups,
            R.layout.list_item,
            new String[] {"ItemTitle", "ItemText"},                   
            new int[] {R.id.ItemTitle, R.id.ItemText},
            childs,                                     
            R.layout.list_earthquake,
            new String[] {"ItemTitle", "ItemText", "latit", "longit", "date", "tzone"},
            new int[] {R.id.ItemTitle, R.id.ItemText, R.id.latit, R.id.longit, R.id.date, R.id.tzone}
            );

        list.setAdapter(mExpaListAdap);
      progDlg3.dismiss();     
    }

 }
   } 
```

但是发现错误：

```
The constructor SimpleExpandableListAdapter(Official_Activity.setList,
List<Map<String,Object>>, int, String[], int[], List<List<HashMap<String,Object>>>,
int, String[], int[]) is undefined 
```

如何解决？

getJson 的代码：[Intent 与 ListView（JSON 数据）](https://stackoverflow.com/questions/11685611/intent-with-listview-json-data)

9/8 更新：我将“this”更改为“Official_Activity.this”后，发现另一个错误：

> 08-08 09:34:33.975: E/AndroidRuntime(335): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.android.abc/com.android.abc.Official_Activity}: java.lang.NullPointerException

代码中是否有任何错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:15:13.713

你在一个内部类中，所以 " `this`" is `Official_Activity.setList` `class`，它不是 a `context`，你必须改写`Official_Activity.this`，如下所示：

```
new SimpleExpandableListAdapter(
            Official_Activity.this,
            groups,
            R.layout.list_item,
            new String[] {"ItemTitle", "ItemText"},                   
            new int[] {R.id.ItemTitle, R.id.ItemText},
            childs,                                     
            R.layout.list_earthquake,
            new String[] {"ItemTitle", "ItemText", "latit", "longit", "date", "tzone"},
            new int[] {R.id.ItemTitle, R.id.ItemText, R.id.latit, R.id.longit, R.id.date, R.id.tzone}
            ); 
```

# php - Yii 框架中的进程输出

> ID：11861189
> 
> 赞同：4
> 
> 时间：2012-08-08T09:07:01.643
> 
> 标签：php, ajax, yii

我有一个ajax提交按钮如下，

```
 echo CHtml::ajaxSubmitButton(
        '>', $this->createUrl('/shop/category/nextCategory&id=16&store=true&gift_store='.$_GET['gift_store'].'&startValue='.$start_value.'&endValue='.$endValue), array(
        'type'=>'GET',
        'update'=>'#test',
        'beforeSend' => 'function(){
                        alert("beforeSend");
                        }',
        'complete' =>    'function(){
                            alert("complete");
                        }',
        )
    ); 
```

在我在控制器中的操作中，我使用 reder partial 如下，

```
$this->renderPartial('view',array('model'=>$this->loadModel()),false,true); 
```

因为我已将 processOutput 设置为 true，所以 ajax 提交按钮工作正常。但它继续执行（对于我点击的次数）。我希望它在单击提交按钮时只执行一次。如果有人可以帮助我解决这个问题，那就太好了。我整天都在努力解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T10:18:46.603

好的，我解决了解决方案。发生的事情是，ajax 请求是根据 ID 触发的。每次通过 ajax 重新加载 div 时，都会加载一个新的委托/事件，指向与他之前的相同的 ID。因此，当您实际单击按钮时，两个代表都会完成他们的工作，因为两者都与单击的按钮匹配。

这个问题有两种解决方案。一个是每次生成按钮时都有一个唯一的 id，如下所示，

```
array('id' => 'next-category-'.uniqid()); 
```

另一种方式，这就是我解决它的方法，

```
array("id"=>"next-category", "live"=>false); 
```

live: 布尔值，事件处理程序是否应该以 live/delegate 或直接样式附加。如果未设置，将使用 liveEvents。将其交给提交按钮即可解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:44:41.833

如果您为 ajax 请求创建 normalizeUrl 会更好。

```
echo CHtml::ajaxSubmitButton(
            '>', CHtml::normalizeUrl(array('/shop/category/nextCategory',array('store'=>1,'gift_store'=>1,'startValue'=>1,'endValue'=>1))), array(
            'type'=>'GET',
            'update'=>'#test',
            'beforeSend' => 'function(){
                            alert("beforeSend");
                            }',
            'complete' =>    'function(){
                                alert("complete");
                            }',
            )
        ); 
```

这段代码很完美，我已经检查过了。似乎它们可能是您的 js 代码中某处的一些错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T09:38:19.280

借助 jQuery，您可以定义以下代码来“完成”功能：

```
function() {
    $('input[type=submit]").attr("disabled", "disabled");
} 
```

因此，如果我理解正确，您的按钮将被禁用以重新推送。

不要忘记将 css 选择器 input[type=submit] 修改为您的按钮的 CSS 选择器。

**解决方案 2**：将您的 CHtml::ajaxButton 转换为

```
if (!Yii::app()->request->isAjaxRequest) {

} 
```

然后，当您通过 ajax 加载内容时，您的按钮将不会显示在页面上

# php - PHP 语法字符串连接

> ID：11861190
> 
> 赞同：0
> 
> 时间：2012-08-08T09:07:11.367
> 
> 标签：php, mysql

```
 $a = '
        SELECT * FROM `'. $table .'` WHERE `chrDate` > "'. $lastDate .'" INTO OUTFILE "'. $file .'"
        FIELDS TERMINATED BY ", " ENCLOSED BY \'"\' ESCAPED BY "\"
        LINES TERMINATED BY "\n"
'; 
```

我不知道为什么我不能这样做，我尝试解决了好几次但每次我都给出这个错误:(

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '\n"' at line 2 
```

**回声$a **

```
SELECT * FROM `tbl_SaleApa` WHERE `chrDate` > "2001/03/29" INTO OUTFILE "C:/xampp/htdocs/transfer/tempfile/tbl_SaleApa.sql"
FIELDS TERMINATED BY ", " ENCLOSED BY '"' ESCAPED BY "\"
LINES TERMINATED BY "\n" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:09:23.197

我有这个： 编辑：您还将变量封装在不需要的双引号中。请参阅更新的代码。

```
<?php

$table='myTable';
$lastDate='myDate';
$file='myFile.ext';
$a = "SELECT * FROM $table WHERE chrDate > '$lastDate' INTO OUTFILE '$file' 
    FIELDS TERMINATED BY ', ' ENCLOSED BY '\"' ESCAPED BY '\\' 
    LINES TERMINATED BY '\\n'"; 

echo $a;

?> 
```

哪个输出：

```
SELECT * FROM myTable WHERE chrDate > 'myDate' INTO OUTFILE 'myFile.ext'
FIELDS TERMINATED BY ', ' ENCLOSED BY '"' ESCAPED BY '\' 
LINES TERMINATED BY '\n' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:33:27.123

我的问题解决了：

```
$a = '
SELECT * FROM `'. $table .'` WHERE `chrDate` > "'. $lastDate .'" INTO OUTFILE "'. $file .'"
FIELDS TERMINATED BY ", " ENCLOSED BY \'"\' ESCAPED BY "\\\"
LINES TERMINATED BY "\n"
'; 
```

更改`ESCAPED BY "\"`为`ESCAPED BY "\\\"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:10:01.567

```
$sql = '
SELECT * FROM `'. $table .'` WHERE `chrDate` > "'. $lastDate .'" INTO OUTFILE "'. $file .'"
FIELDS TERMINATED BY ", " ENCLOSED BY \'"\' ESCAPED BY "\\"
LINES TERMINATED BY "\n"'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T09:10:37.853

```
 $a = "SELECT * FROM " . $table . " WHERE chrDate > '" . $lastDate . "' INTO OUTFILE '" . $file . "' 
        FIELDS TERMINATED BY ', ' ENCLOSED BY '\"' ESCAPED BY '\\' 
        LINES TERMINATED BY '\n'"; 
```

# javascript - Opentok 连续窗口重载

> ID：11861191
> 
> 赞同：1
> 
> 时间：2012-08-08T09:07:12.313
> 
> 标签：javascript, opentok, tokbox

当我开始视频聊天时，两个客户端上的视频窗口每 2 秒关闭并重新打开一次。控制台上有大量消息，但它们都来自 openTok javascript 文件。它与 session.publish(publisher) 函数的调用方式有关，但我不确定问题是什么。这个问题是新问题 - 上周运行良好，从那时起我就没有接触过客户端和服务器代码。确实有效的备份现在不起作用。最近 Tokbox 方面有什么变化吗？

如果有人可以看一下我的代码，我将不胜感激。

我的客户端代码位于： http: [//paste.ubuntu.com/1135279/](http://paste.ubuntu.com/1135279/) 这是控制台输出，每次窗口打开和关闭时都会重复最后 6 行。

```
TB.min.js:251[DEBUG] opentok: TB.setLogLevel(4)
TB.min.js:251[DEBUG] opentok: Session.connect(413302)
TB.min.js:251[DEBUG] opentok: TB.checkSystemRequirements()
TB.min.js:251[DEBUG] opentok: TB.removeEventListener(sessionConnected)
TB.min.js:251[DEBUG] opentok: TB.addEventListener(sessionConnected)
TB.min.js:251[DEBUG] opentok: TB.removeEventListener(streamCreated)
TB.min.js:251[DEBUG] opentok: TB.addEventListener(streamCreated)
TB.min.js:251[DEBUG] opentok: TB.addEventListener(exception)
TB.min.js:251[DEBUG] opentok: TB.removeEventListener(exception)
TB.min.js:251[DEBUG] opentok: TB.addEventListener(exception)
TB.min.js:251[DEBUG] opentok: TB.setLogLevel(4)
TB.min.js:251[DEBUG] opentok: TB.checkSystemRequirements()
TB.min.js:251[DEBUG] opentok: TB.addEventListener(exception)
TB.min.js:251[DEBUG] opentok: TB.removeEventListener(exception)
TB.min.js:251[DEBUG] opentok: TB.addEventListener(exception)
chat:373TB.addEventListener
TB.min.js:251[DEBUG] opentok: TB.initSession(1_MX40MTMzMDJ-flR1ZSBBdWcgMDcgMTc6MzU6MDIgUERUIDIwMTJ-MC4zMzExMDQ3fg)
TB.min.js:251[DEBUG] opentok: TB.removeEventListener(sessionConnected)
TB.min.js:251[DEBUG] opentok: TB.addEventListener(sessionConnected)
TB.min.js:251[DEBUG] opentok: TB.removeEventListener(sessionDisconnected)
TB.min.js:251[DEBUG] opentok: TB.addEventListener(sessionDisconnected)
chat:377Uncaught ReferenceError: connectionCreatedHandler is not defined
TB.min.js:251[DEBUG] opentok: TB.sessionConnected: 1_MX40MTMzMDJ-flR1ZSBBdWcgMDcgMTc6MzU6MDIgUERUIDIwMTJ-MC4zMzExMDQ3fg - 5f4c204130c5bb9c7ba058dbb7da96fbb377e09d
chat:322sessionConnectedHandler
TB.min.js:251[DEBUG] opentok: TB.initPublisher(cPMLG7xrBPaEfhFwo2mvdrCkvPOe4NywvideoBox)
TB.min.js:251[DEBUG] opentok: Session.publish([object Object]):undefined
TB.min.js:251[DEBUG] opentok: Pending: publishToSession(1_MX40MTMzMDJ-flR1ZSBBdWcgMDcgMTc6MzU6MDIgUERUIDIwMTJ-MC4zMzExMDQ3fg,5f4c204130c5bb9c7ba058dbb7da96fbb377e09d,T1==cGFydG5lcl9pZD00MTMzMDImc2lnPTBiYThlMzVjYWY3OGQzNDk0MTA0ZmZhOTEwZjRlZDNjOTNhYjg2MTc6c2Vzc2lvbl9pZD0xX01YNDBNVE16TURKLWZsUjFaU0JCZFdjZ01EY2dNVGM2TXpVNk1ESWdVRVJVSURJd01USi1NQzR6TXpFeE1EUTNmZyZjcmVhdGVfdGltZT0xMzQ0Mzg2MTAzJm5vbmNlPTMwNzk0MyZyb2xlPXB1Ymxpc2hlcg==) on component publisher_1
TB.min.js:251[DEBUG] opentok: TB.connectionCreated
TB.min.js:251[DEBUG] opentok: TB.deviceAccessHandler: accessDialogOpened
TB.min.js:251[DEBUG] opentok: TB.resize
TB.min.js:251[DEBUG] opentok: TB.resize
TB.min.js:251[DEBUG] opentok: TB.deviceAccessHandler: accessDialogClosed
TB.min.js:251[DEBUG] opentok: TB.deviceAccessHandler: accessDenied
TB.min.js:251[DEBUG] opentok: Pending: cleanupView() on component publisher_1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T23:46:43.647

回答这个问题有点晚了，但是从日志来看，您似乎没有在收听 sessionConnectedHandler，如果您在会话连接之前尝试发布/订阅视频流，这可能会导致一些问题。[您可以在此处](http://tokbox.com/opentok/webrtc/docs/js/release-notes.html)找到发行说明以查看是否有任何代码已更改。

# android - Android：表单验证库

> ID：11861193
> 
> 赞同：3
> 
> 时间：2012-08-08T09:07:26.363
> 
> 标签：android, android-layout, validation

我正在尝试在 android 中找到一个表单验证库。有这样的事吗？

我有一个注册表单，我想验证它的字段。如果用户输入了无效数据，我想在该字段的右侧放置一个红色警告标记，并弹出一个他输入了无效数据的工具提示。

我知道，`android:inputType`但这不是我想要的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:26:34.800

我不知道任何这样的图书馆。但是，如果您正在使用 EditTexts，那么您最好的选择是使用自定义[TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)：

```
class TextCheck implements TextWatcher
{
    private EditText editor;

    public TextCheck(EditText editor)
    {
        this.editor = editor;
    }

    @Override
    public void onTextChanged(CharSequence arg0, int arg1, int arg2, int arg3)
    {
        // check the text, and if the user entered 
        // something wrong, change your edittext
        if(something wrong)
        {
            editor.setBackgroundColor(Color.RED); //for example
        }
    }

    @Override
    public void afterTextChanged(Editable arg0){}

    @Override
    public void beforeTextChanged(CharSequence arg0, int arg1, int arg2, int arg3){}

} 
```

然后你可以在你所有的 EditTexts 上使用它，比如

```
EditText editor = (EditText) findViewById(...your id...);
editor.addTextChangedListener(new TextCheck(editor)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T05:59:12.477

> 有这样的事吗？

啊..是的，有一个，你可以在[这里](https://github.com/ragunathjawahar/android-saripaar)找到它。

它使用但不限于**Annotations**为您进行表单验证。要了解该库的功能，请访问[关于 SO 的以下答案，](https://stackoverflow.com/a/12335430/421372)其中我描述了该库的用法。

如果您想编写新规则，您可以随时扩展[Rule](https://github.com/ragunathjawahar/android-saripaar/blob/master/src/com/mobsandgeeks/saripaar/Rule.java)类。

PS：我是图书馆的作者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-18T10:04:50.777

我知道这是旧的，但你可以尝试这个优秀的[Android 验证库](https://github.com/ragunathjawahar/android-saripaar)并访问这个[Stackoverflow 参考](https://stackoverflow.com/questions/11776829/android-form-validation-ui-library)和这个[Stackoverflow 参考](https://stackoverflow.com/questions/6613321/form-validation-library-for-android)以获取使用示例，因为我发现主要库的操作方法有点难以理解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T09:32:57.527

我做了类似的事情。您可以改进此代码并适应您的需要。

**EditTextWithValidation.java**

```
public class EditTextWithValidation extends EditText implements OnTouchListener {
    private EditTextValidator mValidator;

    public EditTextWithValidation(Context context) {
        super(context);

        initialize();
    }

    public EditTextWithValidation(Context context, AttributeSet attrs) {
        super(context, attrs);

        initialize();
    }

    public EditTextWithValidation(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);

        initialize();
    }

    public EditTextValidator getCustomValidator() {
        return mValidator;
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        setError(null);

        return false;
    }

    private void initialize() {
        mValidator = new EditTextValidator(this);
        setOnTouchListener(this);
    }
} 
```

**EditTextValidator.java**

```
public class EditTextValidator {
    private static final String TAG = EditTextValidator.class.getName();

    private enum ValidationResult {
        Ok, Rules, Mismatch
    }

    private EditText mParent;
    private Pattern mValidationPattern;
    private int mValidationErrorMsgId;
    private boolean mAllowEmpty;
    private EditText mMatchView;
    private int mMismatchMsgId;
    private int mMinLength;
    private int mMaxLength;
    private ValidationResult mValidationResult;

    public EditTextValidator(EditText parent) {
        this.mParent = parent;
    }

    public void setAllowEmpty(boolean allowEmpty) {
        this.mAllowEmpty = allowEmpty;
    }

    public void setValidationErrorMsgId(int validationErrorMsgId) {
        this.mValidationErrorMsgId = validationErrorMsgId;
    }

    public void setValidationRules(String strPattern, int validationErrorMsgId, boolean allowEmpty) {
        try {
            if (!TextUtils.isEmpty(strPattern)) {
                mValidationPattern = Pattern.compile(strPattern);
            }
        } catch (PatternSyntaxException e) {
            Log.e(TAG, e.getMessage(), e);
            ToastUtil.toastShort("Invalid validation pattern!");
        }

        this.mValidationErrorMsgId = validationErrorMsgId;
        this.mAllowEmpty = allowEmpty;
    }

    public void setValidLength(int min, int max) {
        mMinLength = min;
        mMaxLength = max;
    }

    public void shouldMatch(EditText matchView, int mismatchMsgId) {
        this.mMatchView = matchView;
        this.mMismatchMsgId = mismatchMsgId;
    }

    public boolean validate() {
        mValidationResult = ValidationResult.Ok;

        InputMethodManager imm = (InputMethodManager) mParent.getContext().getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(mParent.getWindowToken(), 0);

        final String text = mParent.getText().toString();
        final int length = text.length();

        if (mValidationResult == ValidationResult.Ok && !mAllowEmpty && 0 == text.length()) {
            mValidationResult = ValidationResult.Rules;
        }

        if (mValidationResult == ValidationResult.Ok) {
            if (mMinLength != 0 && length < mMinLength) {
                mValidationResult = ValidationResult.Rules;
            } else if (mMaxLength != 0 && length > mMaxLength) {
                mValidationResult = ValidationResult.Rules;
            }
        }

        if (mValidationResult == ValidationResult.Ok && mValidationPattern != null) {
            Matcher m = mValidationPattern.matcher(text);
            if (!m.matches())
                mValidationResult = ValidationResult.Rules;
        }

        if (mValidationResult == ValidationResult.Ok && mMatchView != null) {
            if (mMatchView.getText().toString().compareTo(text) != 0)
                mValidationResult = ValidationResult.Mismatch;
        }

        if (ValidationResult.Ok == mValidationResult) {
            mParent.setError(null);
        } else {
            CharSequence error = null;
            if (ValidationResult.Rules == mValidationResult)
                error = MyApplication.getContext().getText(mValidationErrorMsgId);
            else if (ValidationResult.Mismatch == mValidationResult)
                error = MyApplication.getContext().getText(mMismatchMsgId);

            mParent.setError(error);
            mParent.requestFocus();
        }

        return mValidationResult == ValidationResult.Ok;
    }
} 
```

**用法：**

```
mSignupEmail = (EditTextWithValidation) root.findViewById(R.id.signup_email);
mSignupEmail.getCustomValidator().setValidationRules(
        "[a-zA-Z0-9_-]+(?:\\.[a-zA-Z0-9_-]+)*@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9_-]+)*\\.(?:[a-zA-Z]{2,})",
        R.string.email_answer_validation_msg,
        false);
mSignupEmail.getCustomValidator().setValidLength(0, 50);

…

mSignupPassword = (EditTextWithValidation) root.findViewById(R.id.signup_password);
mSignupPassword.getCustomValidator().setValidationRules(
                    "[a-zA-Z0-9!@#$%^&*()]{6,20}",
        R.string.password_validation_msg,
        false);

…

mSignupConfirmPassword = (EditTextWithValidation) root.findViewById(R.id.signup_confirm_password);
mSignupConfirmPassword.getCustomValidator().setAllowEmpty(true);
mSignupConfirmPassword.getCustomValidator().shouldMatch(mSignupPassword, R.string.password_mismatch);
mSignupConfirmPassword.getCustomValidator().setValidationErrorMsgId(R.string.password_validation_msg);

…

if (mSignupEmail.getCustomValidator().validate() && mSignupPassword.getCustomValidator().validate() && mSignupConfirmPassword.getCustomValidator().validate()) {
    // DO SOMETHING
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-21T14:26:28.867

安装此应用程序：[https ://play.google.com/store/apps/details?id=com.desarrollodroide.repos](https://play.google.com/store/apps/details?id=com.desarrollodroide.repos)

转到：`Utils`-> `Android-Validator`->`View Demo`

这个应用程序中还有很多其他很酷的库。好消息是您可以查看每个库的演示，如果您喜欢，还可以获取该特定库的 github 存储库的链接。它非常有用。

# asp.net - 有没有办法改变表单身份验证的响应类型（302-重定向）是 ASP .NET？

> ID：11861198
> 
> 赞同：1
> 
> 时间：2012-08-08T09:07:40.700
> 
> 标签：asp.net, forms-authentication, http-status-code-302

我是 ASP .NET 的新手，我真的需要一些帮助。我在互联网上搜索了很多，但没有发现任何关于我的问题...这是关于一个网站，用户不登录就无法访问其页面（没有任何页面）。我们使用表单身份验证：

```
<authentication mode="Forms">
  <forms loginUrl="~/Login.aspx" timeout="2880" />
</authentication>
<authorization>
  <deny users="?" />
</authorization> 
```

一段时间后，我们进行了一些更改，让用户无需登录即可访问该站点的页面，但我们也希望保留以前的概念。所以我们在 web.config 中创建了一个键来指示页面是否可以访问。如果这个“autologin”键设置为1，在重定向到“Login.aspx”后，系统会使用硬编码的用户信息进行自动登录，所以用户有一种不用登录也可以浏览网站的感觉，但重点是同样：在访问页面之前，服务器会向 Login.aspx 发送 302 响应（重定向）。这是我的问题！我认为...不能遵循临时重定向。

例如：如果我尝试将页面查看为“GoogleBot”，则会收到以下错误：
*“无效的 URL 或服务器没有响应，HTTP 返回代码：302”*

使用 SEO Toolkit 会导致类似错误：
*“http://localhost:5769/GlobalShop/”的链接导致重定向到“http://localhost:5769/GlobalShop/Login.aspx?ReturnUrl=%2fGlobalShop%2f " 这导致了另一个重定向。搜索引擎只能通过单个重定向跃点传递页面排名和其他相关数据。使用不必要的重定向会对页面排名产生负面影响。*

当我使用 facebook 的“对象调试器”时，也会发生同样的错误。我们有一个类似按钮的功能，但 Facebook 无法提取元数据来格式化出现在用户 Facebook 页面上的帖子。错误消息：
*“无法遵循重定向：URL 请求 HTTP 重定向，但无法遵循。
重定向路径：
原始： http: [//mysite.net/Default.aspx](http://mysite.net/Default.aspx)
**302： http: [//mysite.net/Login。 aspx?ReturnUrl=%2fDefault.aspx](http://mysite.net/Login.aspx?ReturnUrl=%2fDefault.aspx)**
301: [http://mysite.net/Default.aspx](http://mysite.net/Default.aspx)
最终 URL 以粗体显示（这是我们尝试从中提取元数据的 URL）。”*

为了从一个页面重定向到另一个页面，我通常使用“Response.RedirectPermanent()”来避免这类问题。我想知道我是否可以以某种方式将表单身份验证的响应类型更改为永久重定向（301）？如果不可能，我该怎么办？我究竟做错了什么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:15:18.680

如果您启用了 FormsAuthentication，即使使用自动登录，您也将不得不经历一个重定向周期。

不幸的是，这意味着删除该重定向循环的唯一方法是完全删除 FormsAuthentication。

# javascript - 根据 id 显示不同的图像

> ID：11861199
> 
> 赞同：0
> 
> 时间：2012-08-08T09:07:43.530
> 
> 标签：javascript, mootools

文件可以在以下位置找到：

[http://www.mediafire.com/?mhdbwy4gb4rfk4r](http://www.mediafire.com/?mhdbwy4gb4rfk4r)

我有 ：

```
alert(this.internal.questionIndex); 
```

这将显示 0、1、2、3，具体取决于您的问题。

我现在想在每个问题上显示不同的图像。

```
 if (this.internal.questionIndex === 0) 

 {

     var myimg = new Element('img', {src:'images/q1.png'}); 

 } 
```

你这似乎不起作用，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:12:12.573

你可以这样做：

```
var id = parseInt(this.internal.questionIndex, 10) + 1; //if for 0 you are using 1
var myimg = new Element('img', {src:'images/q' + id + '.png'}); 
```

# css - CSS显示：阻止问题

> ID：11861201
> 
> 赞同：0
> 
> 时间：2012-08-08T09:07:45.630
> 
> 标签：css

我们有以下代码：http: [//jsfiddle.net/DVwmJ/](http://jsfiddle.net/DVwmJ/)

如您所见，绿线在红线之后 4px（我们不希望这样）。任何人都知道为什么如果我取消注释 span 元素的“display:block”css 声明，这些行会重叠（如预期的那样）？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:25:15.120

没有`display: block`，`span`仍然是一个内联元素。额外的 4 个像素的高度来自于为字母[降序留出的空间。](http://en.wikipedia.org/wiki/Descender)一个观察：如果你改变`font-size`，[额外高度的量也会改变](http://jsfiddle.net/thirtydot/DVwmJ/14/)。

如果你不想指定`display: block`，[你可以设置`vertical-align: top`](http://jsfiddle.net/thirtydot/DVwmJ/13/)，这与默认的不同`vertical-align: baseline`。

# java - 如何使用 DOm Parser 从 Xml 标签中读取空数据

> ID：11861208
> 
> 赞同：-1
> 
> 时间：2012-08-08T09:08:01.427
> 
> 标签：java, xml, xml-parsing, domparser

我有一个紧急要求，从 xml 文件中读取 Xml 数据并将其存储在文本文件中。我的问题是我可以从 xml 标记中读取数据并将其存储在文本文件中，但我正在发送为空的标记值，即使我想要读取标签的数据和空值并将其存储在文本文件中。

```
http://stackoverflow.com/questions/11790153/reading-xml-data-in-to-text-file

<company>
        <staff>
            <firstname>John</firstname>
            <lastname>Kaith</lastname>
            <nickname></nickname>
            <Department>Sales Manager</Department>
        </staff>
        <staff>
            <firstname>Sharon</firstname>
            <lastname>Eunis</lastname>
            <nickname></nickname>
            <Department></Department>
        </staff>
        <staff>
            <firstname>Shiny</firstname>
            <lastname></lastname>
            <nickname></nickname>
            <Department>SAP Consulting</Department>
        </staff>
    </company> 
```

代码：

```
for (int i = 0; i < nList.getLength(); i++) 
             {      
                 Node node = nList.item(i);  

                 if (node.getNodeType() == Node.ELEMENT_NODE)    
                 {         
                      Element eElement = (Element) node; 

                     if(eElement.hasChildNodes())    
                     {               
                         NodeList nl = node.getChildNodes();  

                         for(int j=0; j<nl.getLength(); j++)  
                         {                   
                             Node nd = nl.item(j);   
                             String name= nd.getTextContent().trim();
                             if (name !=null && !name.trim().equals(""))
                             {
                             String v=name.trim();
                             System.out.print(v +",");   
                             writer.write(nd.getTextContent() + ",");
                             }

                     } 
                         System.out.println(data);
                        System.out.print("\n");

                         writer.write("\n");
                         }        
                         } } 
```

此代码的输出：

```
John,kaith,Sales Manager,
sharon,Eunis,
shiny,SAP consulting, 
```

预期输出：

```
John,kaith, ,Sales Manager,
 sharon,Eunis, , ,
shiny, , ,SAP consulting, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:13:40.843

这不就是：

```
if (name !=null && !name.trim().equals("")) 
```

你的问题 ？您正在积极拒绝空白文本元素。

# spring - 扩展 JSTL 视图类

> ID：11861209
> 
> 赞同：0
> 
> 时间：2012-08-08T09:08:03.327
> 
> 标签：spring, spring-mvc

我正在扩展 JSTL 视图类来实现我自己的视图解析器。但是，我遇到了问题。查看我的代码：

```
public class TestView extends JstlView {
    private String fo_suffix = "_jo";

    public void setUrl(String url)
    {
        //We need to change the inputed url to add a prefix for fo
        super.setUrl(url.replace("\\.jsp", fo_suffix+ ".jsp"));
    }
    public void render(Map<String, ?> model, HttpServletRequest request,
            HttpServletResponse response) throws Exception {
        final StringWriter xmlfo = new StringWriter();

        HttpServletResponseWrapper wrapper = new HttpServletResponseWrapper(
                response) {
            @Override
            public PrintWriter getWriter() throws IOException {
                return new PrintWriter(xmlfo);
            }
        };

        super.render(model, request, wrapper); 
```

在上面的代码中，当我调试时，控件永远不会到达**setUrl**方法。所以内部 RequestDispatcher 中的 url 始终为空。

请帮我解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:59:09.623

不要忘记将 TestView 放入“myServletName”-servlet.xml

```
<bean id="viewResolver"    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass" value="test.TestView"/>
.... 
```

# java - 反序列化包含html的json而不转换实体

> ID：11861210
> 
> 赞同：0
> 
> 时间：2012-08-08T09:08:03.643
> 
> 标签：java, json, jackson

似乎这应该很简单，但我还没有设法找到答案。

我有一些类似于以下的json：

```
{
"standfirst":"\u2022 Alistair shreds field to win <strong>Olympic</strong> triathlon by 11 seconds"
} 
```

我在 Jackson 1.9.8 中使用 ObjectMapper 反序列化

当它被杰克逊反序列化时，standfirst 属性的值变为

`"• Alistair shreds field to win <strong>Olympic</strong> triathlon by 11 seconds"`

而我想要的是：

“\u2022 Alistair 以 11 秒的优势击败了奥运铁人三项”

关于如何实现这一目标的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:23:27.443

Jackson 提供了一种通过注册自定义`CharacterEscapes`对象来指定自定义转义规则的方法`JsonFactory`（并且每个对象`ObjectMapper`都有自己的工厂来配置）。如有必要，您也可以直接指定`CharacterEscapes`for 。`JsonGenerator`

一些使用示例可以从 Jackson 单元测试中找到：对于 Jackson 1.9 类是`org.codehaus.jackson.impl.TestCustomEscaping`和`org.codehaus.jackson.main.TestCharEscaping`.

由于这个特定的 Unicode 字符超出了 ASCII 范围，您将定义`getEscapeSequence(int ch)`返回正确的转义序列，否则可以使用默认设置。

# php - 蛋糕PHP 5.4.4

> ID：11861217
> 
> 赞同：0
> 
> 时间：2012-08-08T09:08:24.787
> 
> 标签：php, cakephp-2.0

> **可能重复：**
> [方法声明应与 PHP 中的父方法兼容](https://stackoverflow.com/questions/3115388/declaration-of-methods-should-be-compatible-with-parent-methods-in-php)

我刚刚安装了 php 5.4.4。我突然收到了严格的警告。有人知道它是什么吗？

```
Strict (2048): Declaration of User::beforeSave() should be compatible with Model::beforeSave($options = Array) [APP/Model/User.php, line 3] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T11:26:07.607

在 APP/Model/User.php 中，更改声明以匹配它扩展的类 Model

```
function beforeSave( array $options ){
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:01:50.100

如果您仔细观察，您会注意到方法签名不同。Model::beforeSave() 接受可选数组，而您的方法不接受任何内容。

但是，消息并不严重。这是一个严格的，意味着你打破了标准，但不像你在泰坦尼克号上。

# c++ - 调试字体链接

> ID：11861221
> 
> 赞同：1
> 
> 时间：2012-08-08T09:08:33.027
> 
> 标签：c++, mfc, localization, fonts

我对我们正在开发的程序有疑问。它是使用 MFC 编写的，但不使用 unicode。我们已经翻译成简体中文。到目前为止，这是我们的第一个也是唯一一个本地化。我们已将所有字符串移至资源中以使其可翻译。在我们的计算机（Win7 和 XP）上似乎一切正常，但对于一些运行 Windows XP 的客户计算机，我们遇到了问题：

在这些计算机上，除了我们输入到树控件（直接使用 CTreeCtrl）的那些之外，所有翻译的字符串都可以工作。我不确定是树控件还是我们输入的文本导致了问题，但字体似乎没有在这些控件中被替换。我的猜测是它可能不会被替换，因为某些字符串还包含拉丁字符。尽管如此，这种替换似乎在程序的其他地方也有效，并且并非所有输入到树中的字符串都包含这些字符。

所以我的第一个问题是：有没有办法知道控件内部发生了什么？我们可以远程访问发生问题的计算机，但在它们上运行调试器可能有点棘手。什么样的工具可以用来诊断这个问题？

我想到的一种可能的解决方案是对树控件进行子类化，以更好地控制实际的文本绘制，可能使用来自[http://blogs.msdn.com/b/oldnewthing/archive/2004/07/16/的方法185261.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2004/07/16/185261.aspx)来解决这个问题。这会有效吗？还是白白费力？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:21:44.747

Ok, it seems on their system there was either a bug in the tree control implementation or they had some systemwide addin that hooked into the drawing in some way. What I ended up doing was to do custom drawing through notifications in the tree view and then using font linking to resolve the fonts. I dont think font linking would be necessary, though, because I think most of the time it ended up doing just TextOutW() with the preselected font anyway.

Here is a somewhat simplified code sample of what I ended up with:

```
void MyDlg::OnCustomDrawTreeItem( NMHDR* pNMHDR, LRESULT* pResult )
{

if (!mpFontLink)
{
    *pResult = CDRF_DODEFAULT;
    return;
}

LPNMTVCUSTOMDRAW pCustomdraw = (LPNMTVCUSTOMDRAW) pNMHDR;
switch(pCustomdraw->nmcd.dwDrawStage)
{
case CDDS_PREPAINT:
    {
        // Ask to do custom draw
        *pResult = CDRF_NOTIFYITEMDRAW;
        break;
    }
case CDDS_ITEMPREPAINT:
    {
        // Ask for post paint notification
        *pResult = CDRF_NOTIFYPOSTPAINT;
        break;
    }
case CDDS_ITEMPOSTPAINT:
    {
        // Get the rect of only the item, not the tree stuff
        RECT rcItem;
        m_pageTree.GetItemRect((HTREEITEM) pCustomdraw->nmcd.dwItemSpec, &rcItem, TRUE);

        // Erase the item background in case the previous string drawn was wider
        HDC hDC = pCustomdraw->nmcd.hdc;
        FillRect( hDC, &rcItem, (HBRUSH) GetClassLongPtr(m_pageTree.GetSafeHwnd(), GCLP_HBRBACKGROUND));

        pageStruct *pS = (pageStruct*) pCustomdraw->nmcd.lItemlParam;
        DWORD dwFontCodepages = 0, dwStrCodepages = 0;

        HFONT hOriginalFont = (HFONT)GetCurrentObject(hDC, OBJ_FONT);
        HRESULT hr = mpFontLink->GetFontCodePages( hDC, hOriginalFont, &dwFontCodepages);
        OML_CStringW tData = pS->csCaption.GetBuffer();

        // Set up position etc
        DWORD dwAlignOrig = GetTextAlign(hDC);
        if (!(dwAlignOrig & TA_UPDATECP)) {
            SetTextAlign(hDC, dwAlignOrig | TA_UPDATECP);
        }

        POINT ptOrig;
        MoveToEx(hDC, 2 + rcItem.left, 1 + rcItem.top, &ptOrig);
        SetTextColor( hDC, pCustomdraw->clrText );
        SetBkColor( hDC, pCustomdraw->clrTextBk );

        // Loop over the parts of the text
        TuInt32 nIndex = 1;
        while (nIndex <= tData.GetLength())
        {
            long nActualChars = 0;
            wchar_t *pStr = (wchar_t*)tData.BaseGetItemP( nIndex );
            TuInt32 nChars = 1 + tData.GetLength() - nIndex;
            hr = mpFontLink->GetStrCodePages(pStr, nChars,
                                             dwFontCodepages, &dwStrCodepages, &nActualChars);

            if (dwStrCodepages & dwFontCodepages)
            {
                // We end up here almost every time, that is why TextOutW would probably be enough.
                // This part is supported by the original font (or the GDI can help us switch automatically)
                TextOutW(hDC, 0, 0, pStr, nActualChars);
            }
            else
            {
                // We need to link
                HFONT hLinked;
                if (FAILED(hr = mpFontLink->MapFont(hDC, dwStrCodepages, 0, &hLinked)))
                {
                    // Fail: Output the rest without linking
                    TextOutW( hDC, 0, 0, pStr, nChars );
                    break;
                }

                // Output with linked font
                SelectObject(hDC, hLinked);
                TextOutW( hDC, 0, 0, pStr, nActualChars);
                SelectObject(hDC, hOriginalFont);
                mpFontLink->ReleaseFont( hOriginalFont );
            }
            nIndex += nActualChars;
        }
        OML_LOG_1( "_END:");

        // Reset alignment mode
        if (!(dwAlignOrig & TA_UPDATECP)) {
            SetTextAlign(hDC, dwAlignOrig);
            MoveToEx(hDC, ptOrig.x, ptOrig.y, NULL);
        }

        *pResult = CDRF_SKIPDEFAULT;
    }
default:
    {
        *pResult = CDRF_DODEFAULT;
        break;
    }
}
} /* OnCustomDrawTreeItem */ 
```

# java - 使用嵌入式 Jetty 作为应用服务器时内存被阻塞

> ID：11861225
> 
> 赞同：3
> 
> 时间：2012-08-08T09:08:51.900
> 
> 标签：java, memory, jetty

我使用嵌入式码头作为 Java 应用程序服务器，最大 JVM 内存设置为 800MB。我创建了一种部署和取消部署 Web 档案的方法。每次我使用基本的 hello world 应用程序部署战争时，嵌入式应用程序服务器都会使用大约 200MB 的额外内存，这会在我添加第 4 个 Web 应用程序后导致内存不足。这是嵌入式 Jetty 用作应用程序服务器时的预期行为吗？

```
@ManagedOperation
public boolean deployWebApp(String context, String pathToWar){
    boolean success = false;
    WebAppContext webctx = null;
    try{
        webctx = addWebApp(context, pathToWar);
        webctx.getTempDirectory();
        webctx.start();
        success = webctx.isRunning();
    } catch (Exception e) {
        e.printStackTrace();
        logger.log(Level.SEVERE, "Failed to startup webapp with webappcontext: ", webapps.get(context).getContextPath());           
    }
    return success;     
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:05:41.377

不，我使用嵌入式 Jetty，它不使用任何类似内存量的东西。

最好的办法是创建一个堆转储，然后使用 Eclipse 内存分析器之类的工具来分析堆，并查看消耗如此多内存的 Web 应用程序是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T04:12:36.960

取消部署/部署内存泄漏可能与各种已知的 JRE ClassLoader 固定问题有关。

我们最近（截至过去 2 天！）向服务器端类加载器添加了一些先发制人的阻止器，以允许 WebAppClassLoader 以不泄漏对 ClassLoader 的引用的方式运行。

见： http: [//git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-util/src/main/java/org/eclipse/jetty/util/preventers](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-util/src/main/java/org/eclipse/jetty/util/preventers)

这些都是通过 Server.addBean(Object) 方法添加到服务器的。

在您的嵌入式服务器上使用这些可能会有一些运气。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T10:01:09.333

在使用 jconsole 并遍历 contexthandlercollection 中的每个处理程序后，发现未部署的 web 应用程序没有删除 securityhandlers 和 sessionhandlers，因此 perm gen 不断增长。

我们以编程方式删除了每个处理程序，我们可以看到 perm gen 内存减少。

```
this.getSessionHandler().stop();
this.getSessionHandler().destroy();
this.getSecurityHandler().stop();
this.getSecurityHandler().destroy(); 
```

# ruby - 控制器的简单路由导致 ArgumentErrorr

> ID：11861227
> 
> 赞同：2
> 
> 时间：2012-08-08T09:08:57.220
> 
> 标签：ruby, ruby-on-rails-3, routes

我刚刚使用以下命令创建了一个控制器：

```
rails generate controller LegacyPlanCalculator index process 
```

然后我将它添加到我的 routes.rb 文件中：

```
match "legacy_plan_calculator" => "legacy_plan_calculator#index" 

match "/legacy_plan_calculator/process" => "legacy_plan_calculator#process" 
```

我可以在项目中看到控制器及其视图。控制器中的动作显然是空的：

```
class LegacyPlanCalculatorController < ApplicationController
  def index
  end

  def process
  end

end 
```

但是当我尝试转到时：`http://localhost:3000/legacy_plan_calculator`我收到此错误：

```
wrong number of arguments (1 for 0)

Rails.root: C:/Users/saadr/Dropbox/workspace/gps4money 
```

当用户输入时，我希望能够登陆`index`旧计划计算器的视图`localhost:3000/legacy_plan_calculator`

更新：这是错误页面上“完整跟踪”的前几行：

```
actionpack (3.1.0) lib/action_controller/metal.rb:193:in `process'
actionpack (3.1.0) lib/action_controller/metal.rb:193:in `dispatch'
actionpack (3.1.0) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.1.0) lib/action_controller/metal.rb:236:in `action'
actionpack (3.1.0) lib/action_dispatch/routing/route_set.rb:65:in `call'
actionpack (3.1.0) lib/action_dispatch/routing/route_set.rb:65:in `dispatch'
actionpack (3.1.0) lib/action_dispatch/routing/route_set.rb:29:in `call' 
```

而且我不知道这些文件的位置，因此无法从这些文件中发布相关代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:35:41.040

`process`是一个[保留字](http://oldwiki.rubyonrails.org/rails/pages/ReservedWords)，只需将其更改为任何其他字即可。

# php - 基于 Web 的文件管理器（我使用托管帐户）

> ID：11861232
> 
> 赞同：0
> 
> 时间：2012-08-08T09:09:16.393
> 
> 标签：php

我似乎在从工作中访问我的 cpanel 时遇到问题，因此我正在尝试找到一个可以作为替代方案的基于 Web 的文件编辑器。但是，我发现的所有这些都要求我具有实际的 linux 服务器访问权限。

我只是在寻找一个简单的 php 编辑器，我可以设置并使用它来编辑和管理几个文件。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:13:37.683

如果您无法在您的主机帐户上安装基于 Web 的文件管理器，您可以使用在线工具。

[https://codeanywhere.net/](https://codeanywhere.net/)非常好。

或者您可以查看此列表以找到您需要的更合适的文件编辑器。 [http://www.smashingapps.com/2010/12/07/11-robust-web-based-editors-to-code-directly-from-your-browser.html](http://www.smashingapps.com/2010/12/07/11-robust-web-based-editors-to-code-directly-from-your-browser.html)

# android - LoaderManager 和 java.lang.NullPointerException 错误

> ID：11861236
> 
> 赞同：0
> 
> 时间：2012-08-08T09:09:27.923
> 
> 标签：android, android-fragments, android-loadermanager

我正在研究android中的碎片，我写了这个简单的程序：在这个应用程序中我想创建一个列表视图，我不会创建一个后台线程，这个线程写在一个日志文件中

这是主要活动

```
public class MainActivity extends FragmentActivity {
    public static final String TAG = "Test_Loader"; 
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Log.i(TAG, "Start  !!!!!!!!!!!!!!");    
        if (getSupportFragmentManager().findFragmentById(android.R.id.content) == null) {
            getSupportFragmentManager().beginTransaction().replace(android.R.id.content, new listFragment()).commit();

        }
    }
} 
```

这是我的 ListFragment：

```
public class listFragment extends ListFragment implements LoaderCallbacks<Void> {

    public static final String TAG = "Test_Loader";
    private ProgressBar mProgressView;
    private LinearLayout mFormView;
    private int valTest = 0;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.activity_main, null);
        Log.i(TAG, "start listFragment");
        return view;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        ArrayList<Map<String, String>> list = buildData();
        String[] from = { "name", "purpose" };
        int[] to = { R.id.recordTitolo, R.id.recordDescrizione };
        SimpleAdapter adapter = new SimpleAdapter(getActivity(), list,
                R.layout.record, from, to);
        setListAdapter(adapter);

        /** IL LOADERMANAGER */
        getLoaderManager().initLoader(0, null, this);

    }

    private ArrayList<Map<String, String>> buildData() {
        ArrayList<Map<String, String>> list = new ArrayList<Map<String, String>>();
        list.add(putData("android", "mobile"));
        list.add(putData("winphone7 ", "windows"));
        list.add(putData("iPhone", "iPhone"));
        return list;
        // TODO Auto-generated method stub

    }

    private HashMap<String, String> putData(String name, String purpose) {
        HashMap<String, String> item = new HashMap<String, String>();
        item.put("name", name);
        item.put("purpose", purpose);
        return item;
    }

    @Override
    public Loader<Void> onCreateLoader(int id, Bundle args) {
        Log.i(TAG, "onCreateLoader(): id=" + id);
        AsyncTaskLoader<Void> loader = new AsyncTaskLoader<Void>(getActivity()) {
            @Override
            public Void loadInBackground() {

                try {

                Log.i(TAG, "loadInBackground(): doing some work....");
                    for (int i = 0; i < 4; ++i) {
                    Log.i(TAG, "backgroud: number " + i);
                    }
                    valTest = 100;
                    Thread.sleep(5000);                                     
                } catch (InterruptedException e) {
                    Log.d(TAG, "ERROR" + e);
                }

                Log.i(TAG, "Stop backgroud");
                return null;
            }
        };
        Log.i(TAG, "return");
        loader.forceLoad();
        return loader;
    }

    // metodo per implementare dopo caricato questo metido viene richiamato
    @Override
    public void onLoadFinished(Loader<Void> arg0, Void arg1) {
        toggleLoading(false);
        buildForm();
        // TODO Auto-generated method stub

    }
    private void buildForm() {

        // TODO Auto-generated method stub
        Log.i(TAG, "Valuet: " + valTest);
    }

    private void toggleLoading(boolean b) {
        // TODO Auto-generated method stub
        mProgressView.setVisibility(b ? View.VISIBLE : View.GONE); 
        mFormView.setGravity(b ? Gravity.CENTER : Gravity.TOP); 
    }

    @Override
    public void onLoaderReset(Loader<Void> arg0) {
        // TODO Auto-generated method stub
        Log.i(TAG, "start onLoaderReset()");
    }

} 
```

在这里你可以看到activity_main.xml

[activity_main.xml](http://pastebin.com/LfrUhGFw)

现在我认为问题存在，`getLoaderManager`但我不明白如何解决它。

## 编辑

当我运行我的应用程序时，我在 logcat 中看到了这个：

```
08-08 15:13:09.347: E/AndroidRuntime(341): FATAL EXCEPTION: main
08-08 15:13:09.347: E/AndroidRuntime(341): java.lang.NullPointerException
08-08 15:13:09.347: E/AndroidRuntime(341):  at com.example.test3.listFragment.toggleLoading(listFragment.java:128)
08-08 15:13:09.347: E/AndroidRuntime(341):  at com.example.test3.listFragment.onLoadFinished(listFragment.java:114)
08-08 15:13:09.347: E/AndroidRuntime(341):  at com.example.test3.listFragment.onLoadFinished(listFragment.java:1)
08-08 15:13:09.347: E/AndroidRuntime(341):  at android.support.v4.app.LoaderManagerImpl$LoaderInfo.callOnLoadFinished(LoaderManager.java:425)
08-08 15:13:09.347: E/AndroidRuntime(341):  at android.support.v4.app.LoaderManagerImpl$LoaderInfo.onLoadComplete(LoaderManager.java:393)
08-08 15:13:09.347: E/AndroidRuntime(341):  at android.support.v4.content.Loader.deliverResult(Loader.java:103)
08-08 15:13:09.347: E/AndroidRuntime(341):  at android.support.v4.content.AsyncTaskLoader.dispatchOnLoadComplete(AsyncTaskLoader.java:221)
08-08 15:13:09.347: E/AndroidRuntime(341):  at android.support.v4.content.AsyncTaskLoader$LoadTask.onPostExecute(AsyncTaskLoader.java:61)
08-08 15:13:09.347: E/AndroidRuntime(341):  at android.support.v4.content.ModernAsyncTask.finish(ModernAsyncTask.java:461)
08-08 15:13:09.347: E/AndroidRuntime(341):  at android.support.v4.content.ModernAsyncTask.access$500(ModernAsyncTask.java:47)
08-08 15:13:09.347: E/AndroidRuntime(341):  at android.support.v4.content.ModernAsyncTask$InternalHandler.handleMessage(ModernAsyncTask.java:474)
08-08 15:13:09.347: E/AndroidRuntime(341):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-08 15:13:09.347: E/AndroidRuntime(341):  at android.os.Looper.loop(Looper.java:123) 
```

我认为问题是这段代码

```
private void toggleLoading(boolean b) {
    // TODO Auto-generated method stub
    mProgressView.setVisibility(b ? View.VISIBLE : View.GONE); 
    mFormView.setGravity(b ? Gravity.CENTER : Gravity.TOP);
} 
```

当我删除这段代码时一切正常，但我不知道，因为我有这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:56:14.790

您遇到了这个问题，因为看起来您没有初始化`mProgressView`and`mFormView`字段。如果它们是在布局中定义的，你会想要这样的：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.activity_main, null);

    mProgressView = (ProgressBar)view.findViewById(R.id.progress_view_id);
    mFormView = (LinearLayout)view.findViewById(R.id.form_view_id);

    Log.i(TAG, "start listFragment");
    return view;
} 
```

# c# - 等待下载完成

> ID：11861240
> 
> 赞同：1
> 
> 时间：2012-08-08T09:10:09.250
> 
> 标签：c#, web-services, soap, download, polling

我需要从网络服务下载一个实时创建的 zip 文件。让我解释。我正在开发一个使用 SoapXml Web 服务的 Web 应用程序。Web 服务中有一个导出函数，它返回一个临时 url 来下载文件。根据下载请求，服务器会创建文件并在几秒钟后使其可供下载。我正在尝试使用

> webClient.DownloadFile(url, @"c:/etc../")

此函数下载文件并将其保存到我的 0kb。太快了！服务器没有时间创建文件。我也试着把

> ```
> webClient.OpenRead(url); 
> System.Threading.Thread.Sleep(7000);
> webClient.DownloadFile(url, @"c:/etc../"); 
> ```

但不起作用。在调试模式下，如果我在 webClient.DownloadFile 上放置一个 BREAK POINT 并在 3、4 秒后重新启动，服务器就有时间创建文件并且我有完整的下载。

网络服务的开发人员建议我在 url 上使用“轮询”，直到文件准备好下载。它是如何工作的？

我该怎么做才能解决我的问题？（我也试过 DownloadFile 异步模式）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:28:57.077

我的应用程序中有类似的机制，并且效果很好。WebClient 确实请求并等待，因为服务器正在创建响应（文件）。如果 WebClient 下载 0kb，则意味着服务器以一些空响应响应请求。这可能不是错误，而是设计。如果创建文件需要很长时间，此方法可能会导致超时。另一方面，如果创建文件需要很短的时间，服务器端应该响应文件（使 WebClient 挂起请求，直到文件准备好）。我会尝试与其他开发人员讨论这个问题，并可能重新设计“文件生成器”。

编辑：池意味着循环发出请求，例如每 2 秒。我使用[DownloadData](http://msdn.microsoft.com/en-us/library/xz398a3f)是因为它每次都保存空文件是无用的，而且会消耗资源，而 DownloadFile 就是这样做的。

```
 public void PoolAndDownloadFile(Uri uri, string filePath)
        {
            WebClient webClient = new WebClient();
            byte[] downloadedBytes = webClient.DownloadData(uri);
            while (downloadedBytes.Length == 0)
            {
                Thread.Sleep(2000);
                downloadedBytes = webClient.DownloadData(uri);
            }
            Stream file = File.Open(filePath, FileMode.Create);
            file.Write(downloadedBytes, 0, downloadedBytes.Length);
            file.Close();
        } 
```

# java - Java 反射和 OOM 错误

> ID：11861243
> 
> 赞同：0
> 
> 时间：2012-08-08T09:10:20.050
> 
> 标签：java, memory-management, reflection, out-of-memory

我得到了一个`java.lang.OutOfMemoryError`，它似乎发生在我做反思的时候：

`obj.getClass().getMethod(methodName, (Class[]) null);`

这说明什么？有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:14:17.080

代码是一样的

```
obj.getClass().getMethod(methodName) 
```

> 这说明什么？

它表明您需要仔细阅读错误消息，因为这不太可能是原因，因为它不会产生很少的内存。

> 有人知道吗？

如果它确实是错误发生的地方，那么真正的原因很可能在其他地方。要解决此问题，您需要对应用程序进行内存分析，或在 OOME 上进行堆转储或增加最大堆大小（或全部三个）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:15:21.370

引发内存不足错误的点通常与使用大量内存的代码部分相去甚远。当垃圾收集器检测到内存问题时，它会被抛出，但这可能在另一个线程中，而不是消耗所有内存的线程。

如果您不知道问题出在哪里，最好的办法是运行分析器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:15:09.223

我认为你没有足够的 PermGen 空间分配。您可以尝试 -XX:PermSize=128M -XX:MaxPermSize=256M 作为应用程序的 java 命令行参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T09:17:43.237

`java.lang.OutOfMemoryError`当 Java 虚拟机因为内存不足而无法分配对象时抛出，并且垃圾收集器无法提供更多内存。

我认为这无关`obj.getClass().getMethod(methodName, (Class[]) null);`

请检查您的应用程序/程序内存不足的原因。

# solr - 长查询的缓慢 Solr 查询响应时间

> ID：11861244
> 
> 赞同：1
> 
> 时间：2012-08-08T09:10:24.870
> 
> 标签：solr, full-text-search

我有一个包含约 4000 万个文档的单核 [1]、非复制 Solr 索引。每个文档有两个字段，一个存储，另一个不存储。我搜索非存储字段，存储字段是我的结果。

该索引的响应时间约为 8 秒。需要注意的是，我没有进行我认为典型的全文查询。每个查询包含几十个 OR 术语。我预计这会很慢，但没有现在那么慢。

我注意到 Solr 只使用了它的 JVM 可用的 7GB 中的几百 MB。它不能将大部分索引保留在内存中。这引出了我的问题：有没有办法配置 solr，使其被迫在 RAM 中维护大部分（或至少更多）索引？

[1] 分片给我带来了一个问题。相对分数在我的 Solr 应用中非常重要。分片本地评分意味着我拥有的分片越多，得分就越不准确。

回复评论的更多信息：

这是我搜索的字段的字段类型定义：

```
<fieldType name="text" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
<charFilter class="solr.MappingCharFilterFactory" mapping="mapping-ISOLatin1Accent.txt"/>
<charFilter class="solr.MappingCharFilterFactory" mapping="mapping-FoldToASCII.txt"/>
<tokenizer class="solr.StandardTokenizerFactory"/>
<filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
  <analyzer type="query">
<charFilter class="solr.MappingCharFilterFactory" mapping="mapping-ISOLatin1Accent.txt"/>
<charFilter class="solr.MappingCharFilterFactory" mapping="mapping-FoldToASCII.txt"/>
<tokenizer class="solr.StandardTokenizerFactory"/>
<filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
</fieldType> 
```

这是一个示例查询：

```
(Carberry J 2008 Toward a Unified Theory of High-Energy Metaphysics Silly String Theory Journal of Psychoceramics 5 11 1 3) 
```

这将需要大约 10 秒的时间来响应，而具有较少 ORed 术语的查询，例如 (Carberry 2008)，将在大约 100 毫秒内返回。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T12:59:50.820

我相信我已经找到并解决了我遇到的问题。

事实证明，我的许多文档，因为它们是由书目元数据组成的，在通常的英语停用词之上包含一些非常常见的词。这些词包括“期刊”和“诉讼”。此外，由于我的文档包含作者姓名，通常包括首字母缩写，因此其中许多包含索引的单字母术语。如果将其中任何一个作为查询项包含在内，则响应时间将增加一个数量级。

我的解决方案是使用 StopFilter 和 LengthFilter 简单地过滤掉这些常用术语，如下所示：

```
<filter class="solr.StopFilterFactory" words="stopwords.txt" ignoreCase="true"/>
<filter class="solr.LengthFilterFactory" min="2" max="100"/> 
```

# java - 用什么代替 SimpleJdbcTestUtils？

> ID：11861245
> 
> 赞同：3
> 
> 时间：2012-08-08T09:10:25.477
> 
> 标签：java, spring, unit-testing, jdbc

我正在尝试使用 Spring 和 DBUnit 设置数据库测试。我有一个脚本要在每次测试之前运行。下面的代码有效，但`SimpleJdbcTemplate` **已弃用**。作为 3.2 版本的一部分，该方法`executeSqlScript`已移至 JdbcTestUtil，但我们使用的是 3.1.x。改用什么？

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration
public class MyTestScript{

    @Autowired
    public DataSource dataSource;
    @Autowired
    public Resource script;

    @Before
    public void setup() {
        SimpleJdbcTestUtils.executeSqlScript(
            new SimpleJdbcTemplate(dataSource), script, true);
    }

    @Test
    public void testInsert() {
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:35:36.340

你应该压制警告然后继续。一旦切换到 Spring 3.2，转换将是微不足道的（删除所有`Simple`前缀）。在这些测试中没有真正的理由`SimpleJdbcTemplate`不惜一切代价避免，因为它的整个功能都在`JdbcTemplate`同一个名称下。

# android - 将资产文件夹中的图像插入 ListView

> ID：11861246
> 
> 赞同：0
> 
> 时间：2012-08-08T09:10:25.223
> 
> 标签：android, image, listview

```
ArrayList<HashMap<String, String>> list = new ArrayList<HashMap<String, String>>();
    JSONObject json = jParser.getJSONFromUrl("http://domain.com/directory/database/retrieveComments.php?placeId=" + stringPlaceId);
    try
    {
        commentsRatingsArray = json.getJSONArray("commentsRatings");
        for(int i = 0; i < commentsRatingsArray.length(); i++)
        {
        JSONObject jsonObject = commentsRatingsArray.getJSONObject(i);
        String dbUserFullName = jsonObject.getString(TAG_FULLNAME);
        String dbUserEmail = jsonObject.getString(TAG_EMAIL);
        String dbComment = jsonObject.getString(TAG_COMMENT);
        String dbRating = jsonObject.getString(TAG_RATING);
        String dbDate = jsonObject.getString(TAG_DATE);
        String dbTime = jsonObject.getString(TAG_TIME);

        HashMap<String, String> map = new HashMap<String, String>();
        map.put(TAG_FULLNAME, dbUserFullName);
        map.put(TAG_EMAIL, dbUserEmail);
        map.put(TAG_COMMENT, dbComment);
        map.put(TAG_RATING, dbRating);
        map.put(TAG_DATE, dbDate);
        map.put(TAG_TIME, dbTime);

        list.add(map);
    }   
}
catch (Exception e)
{
     e.printStackTrace();
     Toast.makeText(getBaseContext(), "Connection to the server is lost. Please check your internet connection.", Toast.LENGTH_SHORT).show();
}

ListAdapter adapter = new SimpleAdapter
(DisplayCommentsRatings.this, list, R.layout.commentrating,

     new String[] { TAG_FULLNAME, TAG_EMAIL, TAG_COMMENT, TAG_DATE,  TAG_TIME },
     new int[] {R.id.tvUserFullName, R.id.tvUserEmail, R.id.tvUserComment, R.id.tvDate, R.id.tvTime });

     setListAdapter(adapter); 
```

这是我的代码，我正在从我的数据库中获取这些 JSON 数组值。我只想知道如何在列表视图中更改图像的 src。因为我只会使用 5 张图片，所以我决定将这些图片包含在我的资产文件夹中，而不是将它们上传到网络上。

有人可以给我一个想法，使这成为可能吗？

这是我的 XML 代码：

```
<LinearLayout
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

    <TextView
        android:id="@+id/tvUserFullName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#000000"
        android:textSize="12dip"
        android:textStyle="bold"/>
            //This is the imageView where I will display the image from the assets folder
    <ImageView
        android:id="@+id/ivUserRating"
        android:layout_width="100dip"
        android:layout_height="fill_parent"
        android:src="@drawable/zerostar"/>

</LinearLayout>

<TextView
    android:id="@+id/tvUserEmail"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="EmailAddress@domain.com"
    android:textSize="9dip"/>

<TextView
    android:id="@+id/tvUserComment"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text='"This is a comment. This is a comment. This is a comment. This is a comment. This is a comment."'
    android:textSize="10dip"
    android:layout_margin="3dip"
    android:textColor="#000000"
    android:maxLength="300"/>

<TextView
    android:id="@+id/tvDate"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:text="August 1, 2010"
    android:textColor="#000000"
    android:textSize="8dip"
    android:layout_gravity="right"/>

<TextView
    android:id="@+id/tvTime"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:text="08:20 PM"
    android:textColor="#000000"
    android:textSize="8dip"
    android:layout_gravity="right"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-19T09:26:28.387

像往常一样使用 SimpleAdapter，但一定要覆盖你的“适配器”的 setViewBinder 方法，如：

```
adapter.setViewBinder(new ViewBinder() {   
    public boolean setViewValue(View view, Object data,   
    String textRepresentation) {   
    // Check wether it's ImageView and the data   
    if(view instanceof ImageView && data instanceof Bitmap){   
        ImageView iv = (ImageView) view;   
        iv.setImageBitmap((Bitmap) data);   
        return true;   
    }else   
        return false;   
    }   
}); 
```

然后使用 getBitmap() 获取断言图像

```
public Bitmap getBitmap( String path, int i ){   
        Bitmap mBitmap = null;   
        try {  
            AssetManager assetManager = getAssets(); 
            String[] files = null; 

            files = assetManager.list( "smartmodel/" + path ); 
            Log.i( "Assert List", files[1].toString() );
            // Pass ur file path, here is one in assert/smartmodel/ filer
            mBitmap = BitmapFactory.decodeStream( this.getAssets().open( "smartmodel/" + path + "/"+ files[i]) );   
        } catch (Exception e) {   
            e.printStackTrace();   
        }
        return mBitmap;   
    } 
```

最后，在您的简单适配器列表参数中，放入

```
map.put( "ItemImage", getBitmap( gridItemName, i )); 
```

您传递的 getBitmap(...) 将被显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:19:30.547

检查位置和使用，

```
Bitmap bmp=null;

if(position==0){

   bitmap=getBitmap("img0.png");

}else if  (position==1){

   bitmap=getBitmap("img1.png");
}
.
.
. 
```

**方法：：**

```
private Bitmap getBitmap(String name) throws IOException
        {
            AssetManager asset = getAssets();

            InputStream is = asset.open(name);
            Bitmap bitmap = BitmapFactory.decodeStream(is);

            return bitmap;
        } 
```

# windows-8 - Windows 应用商店应用程序权限对话框

> ID：11861249
> 
> 赞同：0
> 
> 时间：2012-08-08T09:10:28.753
> 
> 标签：windows-8, permissions, dialog, windows-store-apps

我想在应用程序访问设备或传感器时使用类似于操作系统的权限对话框来显示权限。

例如，如果我们的应用程序要使用位置传感器，那么操作系统会询问用户是否允许应用程序使用位置数据。

Windows 8 为这样的权限显示了一个非常好的对话框，那么是否有任何类/控件可以让我用我的自定义数据显示相同的对话框？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:39:17.470

对于桌面应用程序，您可以使用任务对话框 - [http://msdn.microsoft.com/en-us/library/windows/desktop/bb756938.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756938.aspx)

# java - 目录映射和动作映射

> ID：11861257
> 
> 赞同：0
> 
> 时间：2012-08-08T09:10:50.380
> 
> 标签：java, jsp, struts2

我有两个目录，出于调试目的，两个目录都具有相同的内容。一个是有标题`zxc`的，另一个是有标题的`welcome`。我正在尝试`welcome`使用以下代码执行使用该目录的操作：

```
<action name="welcome">
    <result>/welcome/welcome.jsp</result>
</action> 
```

当我使用时`<result>/zxc/welcome.jsp</result>`，页面显示成功。当我使用上述内容时，`<result>/welcome/welcome.jsp</result>`我得到`error 404 - resource not found`.

**编辑1：**

我也有这个动作，它基本上会重定向到`welcome`当 url 留空时：

```
<action name="">
    <result type="redirect">welcome</result>
</action> 
```

**编辑2：**

struts.xml 配置：

```
<package name="website" namespace="/" extends="struts-default, json-default">
   ...
</package> 
```

上述两个动作都位于这个包内。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:25:02.123

这应该是命名空间问题，解决方法是：

```
<action name="">
    <result type="redirect">/welcome</result>
</action> 
```

例子：

如果 URL 是, 那么如果你`http://hostname/${contextPath}/something/something`重定向到`welcome`, URL 会是`http://hostname/${contextPath}/something//welcome/welcome.jsp`这样的.`404``/welcome`

`Important:`我不确定，您应该写下`/welcome`，还是使用`<param name="namespace">/</param>`. 我正在使用约定插件。试试看。

# android - 无法加载 -landroid jni

> ID：11861258
> 
> 赞同：2
> 
> 时间：2012-08-08T09:10:51.063
> 
> 标签：android, c++, android-ndk, java-native-interface

我无法在我的包中加载 -landroid lib，我正在使用以下 Android.mk 代码

```
 include $(CLEAR_VARS)

LOCAL_MODULE := ShirtsAR

TARGET_PLATFORM := android-5

USE_OPENGL_ES_1_1 := false

ifeq ($(USE_OPENGL_ES_1_1), true)
    OPENGLES_LIB  := -lGLESv1_CM
    OPENGLES_DEF  := -DUSE_OPENGL_ES_1_1
else
    OPENGLES_LIB  := -lGLESv2
    OPENGLES_DEF  := -DUSE_OPENGL_ES_2_0
endif

ANDROID_LIB := -landroid 
LOCAL_SRC_FILES := ShirtsAR.cpp

LOCAL_CFLAGS := -Wno-write-strings $(OPENGLES_DEF)

LOCAL_LDLIBS := -llog $(OPENGLES_LIB) $(ANDROID_LIB)
LOCAL_ARM_MODE := arm

include $(BUILD_SHARED_LIBRARY) 
```

请指导，我被卡住了.. :(

出现以下错误

```
/android-ndk-r7/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows/bin/../lib/gcc/arm-linux-androideabi/4.4.3/../../../../arm-linux-androideabi/bin/ld.exe: cannot find -landroid 
```

collect2: ld 返回 1 退出状态 make: *** [obj/local/armeabi/libShirtsAR.so] 错误 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-29T05:28:50.453

Native Activity 仅支持 API 级别 9 和更高级别（请参阅 NDK 发行版中的 docs/STABLE-APIS.html）。因此，如果您想链接到 libandroid，您需要更改为

```
TARGET_PLATFORM := android-9 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-05T20:24:28.267

我必须在 Application.mk 文件中使用这个 APP_PLATFORM 变量。在此之后我能够构建我的解决方案。

示例：APP_PLATFORM := android-22

今天 2017 年 10 月 TARGET_PLATFORM 对我不起作用。

干杯。

# c# - Web应用程序中的确认消息框

> ID：11861271
> 
> 赞同：3
> 
> 时间：2012-08-08T09:11:42.873
> 
> 标签：c#, asp.net

我在 asp.net Web 应用程序中使用以下消息框。现在我想将此消息框转换为确认消息框，并在它为真时执行某些操作，否则意味着拒绝该应用程序。

```
 ScriptManager.RegisterStartupScript(this, this.GetType(), "temp", "<script language='javascript'>alert('Are you sure, you want to apply?');</script>", false); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T09:19:42.360

我认为你正在以错误的方式解决这个问题。**您应该在发回之前**显示此确认信息，然后仅在他们选择“应用”时才发回。

使用 ASP.NET Web 控件，该`Button`控件具有[`OnClientClick`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.onclientclick.aspx)可用于在 Http POST 之前调用 javascript 的属性：

你可以这样做：

```
<asp:button id="btn"
            runat="server"
            Text="Apply"
            OnClientClick="return confirm('Are you sure you wish to apply?');"
            OnClick="btn_Click" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T09:19:43.187

在下面注册脚本而不是警报

```
<script type="text/javascript">
var r=confirm("Are you sure you are sure?")
if (r==true)
{
  //You pressed OK!
}
else
{
  //You pressed Cancel!
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:20:13.160

与确认框等效的javascript 是confirm() 方法。此方法根据用户的“确定”或“取消”按钮响应返回真或假值。

**用法：**

```
var confirmed = confirm('Are you sure?','Are you sure you want to delete this item?');

if(confirmed){
  //do something
} else {
  //do something else
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T09:37:26.990

试试这个

将此添加到您的 cs 文件以显示 a`confirm`而不是`alert`

```
string confirm = 
"if(confirm('Are you surely want to do this ??')) __doPostBack('', 'confirmed');";
ScriptManager.RegisterStartupScript(this, this.GetType(), "temp", confirm, true); 
```

在同一页面上添加此内容以检查用户何时来自该确认框

```
protected void Page_Load(object sender, EventArgs e)
{
    string parameter = Request["__EVENTARGUMENT"];
    if (string.Equals("confirmed", 
                        parameter, 
                        StringComparison.InvariantCultureIgnoreCase))
    {
        // Call your server side method here
    }
} 
```

对于我使用的这个，`__doPostBack`你可以从[这里](https://stackoverflow.com/questions/3591634/how-to-use-dopostback)了解更多信息。希望它会帮助你

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T09:44:36.157

`OnClientClick`当用户单击按钮时尝试此代码检查事件

```
<script type="text/javascript">
      function check()
     {          
        var chk =confirm("Are you sure you are sure?")
        if (chk==true)
        {
            // try you want
        }
        else
        {
            // try you do not want
        }
       return true;
     }

</script>        

 <asp:button id="Button1"
        runat="server"
        Text="Button1"
        OnClientClick="return check();"/> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-10T09:02:34.513

```
private void showMessage(string msg){

        ScriptManager.RegisterStartupScript(this, this.GetType(), "temp", "<script language='javascript'>alert('"+ msg +"');</script>", false); 
```

受保护的无效BtnReg_Click（对象发送者，EventArgs e）{

```
 OracleHelper.OracleDBOpen();
        object flag = OracleHelper.OracleExecuteScalar("your select Query ");
        if (flag == null)
        {
                      showMessage("Failed !!! ");

        }
        else
        {
            string reg = String.Format("your Insert Query ");

            showMessage("successfuly");
            OracleHelper.OracleExecuteNonQuery(reg);

        }                
        OracleHelper.OracleDBClose();
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-03T15:38:41.167

要在 C# 中完全做到这一点，你可以试试这个：

```
 protected override void OnInit(EventArgs e)
    {  
        AddConfirmationButton();   
        base.OnInit(e);
    }

    private void AddConfirmationButton()
    {   
        Button confirmButton = new Button();
        confirmButton.Text = "Action Foo";
        string confirmationMessage = "Are you sure you wish to do action Foo?";
        confirmButton.OnClientClick = "return confirm('" + confirmationMessage + "');";
        confirmButton.Command += confirmButton_Command;

        Controls.Add(confirmButton);

    }

    void confirmationMessage_Command(object sender, CommandEventArgs e)
    {
        DoActionFoo();   //work your magic here.
    } 
```

这会从网页向用户显示“确定/取消”对话框。如果用户单击“确定”，则事件命令中的函数将触发。如果用户单击“取消”，则不会发生任何事情。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-17T05:03:48.023

```
ScriptManager.RegisterStartupScript(page,this.GetType(), "temp","javascript:calopen();
",true);

function calopen()    
{    
    if (confirm("Are you sure?"+'\n'+"Are you want to delete"))    
    {   
        enter code here    
    }
    else   
    {   
        return false;
    }    
} 
```

# objective-c - iOS旋转使用tabBar控制器锁定为纵向

> ID：11861272
> 
> 赞同：1
> 
> 时间：2012-08-08T09:11:48.717
> 
> 标签：objective-c, ios

目前正在开发一个使用标签栏控制器的应用程序。该应用程序根本不会旋转到横向模式 - 所有视图都继承自 baseVieController，在这里我已经实现：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return true;
} 
```

现在我知道 tabBar 控制器不会旋转，除非它的所有子视图都支持视图试图旋转到的方向 - 我的问题是：如果我没有在所有子视图中实现 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 方法，即使我没有将其指定为所需的方向，它是否会将这些子视图锁定为纵向模式？因此将整个 tabBar 控制器锁定为纵向。我知道以前有人问过类似的问题，但我找不到这个特定问题的答案。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T10:10:16.767

您可以旋转视图，只需要像下面这样覆盖：只需在要旋转的视图控制器类中添加代码（这里是“SampleClassName”）

```
@interface UITabBarController (rotation)
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation;
@end

@implementation UITabBarController (rotation)
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

    if ([self.selectedViewController isKindOfClass:[UINavigationController class]])
    {
        UINavigationController *navController = (UINavigationController *) self.selectedViewController;
        if ([[navController visibleViewController] isKindOfClass:[SampleClassName class]])
            return YES;
    }
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}
@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T19:01:33.187

如果您正在使用情节提要为 IOS 5 开发，这将有助于我遇到同样的问题。通常在故事板之前，我们可能会将 TabBarController 添加到 uiview 或 appdelegate 中。使用情节提要，情节提要视图并不总是必须连接到视图控制器。

要解决此问题

在子类字段类型 **UITabBarController**中添加新的类文件**objective-c类**

 **1 - 在情节提要中选择标签栏控制器视图

2 - 在自定义类更改**UITabBarController**到你新创建的类名，我叫我的 MainTabBarViewController

3 - 在你新创建的类中改变这个

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
{
      return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

至

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
{
        if (interfaceOrientation == UIInterfaceOrientationPortrait)
            return YES;

        if (interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)
            return YES;

        return NO;
} 
```

基本上正在发生的事情是您正在 Interface Builder 中创建一个结构，但这只会让您获得一部分。在这种情况下，您仍然需要创建伴随代码。一开始这让我很困惑，因为我习惯于使用 .xib 从头开始​​构建视图，并且通常会从 appdelegate 配置 tabbarcontroller。

您也可以像这样有条件地控制其中的每一个

```
if (interfaceOrientation == UIInterfaceOrientationLandscapeLeft)
    return NO;

if (interfaceOrientation == UIInterfaceOrientationLandscapeRight)
    return NO;

if (interfaceOrientation == UIInterfaceOrientationPortrait)
    return YES;

if (interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)
    return YES; 
```

对你想要的返回yes，对你不想要的返回no。或者接受一切回报yes。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:44:59.900

至于您的父视图控制器（在您的情况下 - baseViewController）实现此方法 -

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return true;
} 
```

您无需在子视图控制器中实现此功能，因为它支持所有子视图控制器中的所有方向。**

# json - jQuery UI 自动完成 - 构建自定义源

> ID：11861273
> 
> 赞同：1
> 
> 时间：2012-08-08T09:11:56.770
> 
> 标签：json, jquery-ui, jquery-ui-autocomplete

我有以下形式的 json 数组：

```
[{"label":<some-label>,"spellings":[<list of spellings>]}, ...] 
```

我需要使用 jquery ui 自动完成来解析上面的数组。但是，有一些限制：

1.  自动完成建议应该涉及“拼写”的匹配，但应该只建议相应的“标签”。例如，如果“标签”有 n 个“拼写”，那么自动完成应该只显示 n 个“拼写”的特定“标签”。
2.  从提供的建议中选择时，相应的“标签”应仅反映在文本输入框中。

我应该如何进行？任何指针？

而且，如何迭代相应“标签”的“拼写”列表？

这就是我正在尝试做的，但给出了乱码输出。

```
var labels = []
var values = [] 
$.getJSON($url, function(data) { 
  $.each(data, function(key, val) { 
    for (var v in val.value)
      values.push(val.value[v])
    labels.push(val.label)
}); 
$("#text1").autocomplete({ 
  minLength: 2, 
  source: values, 
  focus: function(event, ui) { 
    $("#text1").val(ui.item.label); 
    return false; 
  }, 
  select: function(event, ui) { 
    $("#text1").val(ui.item.label); 
    return false; 
  } 
});
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T16:26:21.127

我会建立一个项目的单一源数组，每个拼写一个，其中`label`属性是每个拼写的标签，`value`属性是拼写本身。这将使您能够快速过滤结果，而无需遍历每个对象的`spelling`数组并检查可能需要一段时间的匹配项。

然后，在您定义的函数中`source`，您可以执行自己的过滤逻辑，只允许建议列表中每个“标签”的一个实例。

像这样的东西应该可以工作（请注意，自动完成是在`$.getJSON`回调内部初始化的。这是确保在初始化小部件之前加载源数据所必需的）：

```
$.getJSON($url, function(data) {
    $.each(data, function (i, el) {
        source.push({ label: el.label, value: el.label });

        $.each(el.spellings, function (j, spelling) {
            source.push({ label: el.label, value: spelling });
        });
    });

    /* initialize the autocomplete widget: */
    $("input").autocomplete({
        source: function (request, response) {
            var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i")
                , results = [];

            /* Make sure each entry is only in the suggestions list once: */
            $.each(source, function (i, value) {
                if (matcher.test(value.value) && $.inArray(value.label, results) < 0) {
                    results.push(value.label);
                }
            });
            response(results);
        }
    });
}); 
```

**示例：http:** [//jsfiddle.net/MaMZt/](http://jsfiddle.net/MaMZt/)

# mysql - Mysql查询日志不起作用

> ID：11861275
> 
> 赞同：8
> 
> 时间：2012-08-08T09:12:05.953
> 
> 标签：mysql

我的 mysql 查询日志有问题。

[我用https://stackoverflow.com/a/2896718/1012683](https://stackoverflow.com/a/2896718/1012683)搜索了使用过的 my.cnf，并将行 log=/var/log/mysqld_query.log 添加到 my.cnf。然后我重新启动 mysql 但仍然没有查询日志。

这里有什么问题？

谢谢，弗洛

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-08T09:14:08.180

您需要设置`general_log` 为“开”。看[这里](http://dev.mysql.com/doc/refman/5.1/en/query-log.html)

添加这个，`my.cnf`然后重新启动 MySQL 服务器：

```
general_log = 1
log=/var/log/mysqld_query.log 
```

或者

```
SET GLOBAL general_log = 'ON'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T12:06:41.173

您可以先使用查询检查 general_log 是“ON”还是“OFF”：

```
mysql>show variables like '%log%'; 
```

如果 general_log 为 'OFF'，则 log=... 的设置将不起作用。mysql运行时可以开启general_log（不需要重启mysql），使用下面的cmd：

```
mysql>SET GLOBAL general_log = 'ON'; 
```

并且将自动生成变量 general_log_file 中的日志文件。

# ios - 相当于IOS中的静态字段

> ID：11861277
> 
> 赞同：2
> 
> 时间：2012-08-08T09:12:12.730
> 
> 标签：ios, static-members

我更像是一名 Android 开发人员，但我开始看到 iOS 开发隧道尽头的曙光。

但是，有一种编码模式我似乎找不到对应的。

使用静态字段作为标志。

安卓 ：

```
public final static int ERROR_EMPTY = 1;
public final static int ERROR_NO_CONNECTION = 2;
public final static int ERROR_WRONG_USER = 4;

...

if (error == MyClass.ERROR_EMPTY) {//do things} 
```

在 iOS 上实现这一目标的正确方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T09:30:44.300

**使用 Objective-C 和 C**

我经常使用前缀：

```
typedef enum MyClass_Error {
  // never use MyClass_Error_Undefined
  // or you may favor MyClass_Error_None for a valid error code
  MyClass_Error_Undefined = 0,
  MyClass_Error_Empty = 1,
  MyClass_Error_NoConnection = 2,
  MyClass_Error_WrongUser = 4
  // ...
} MyClass_Error; 
```

对于这些价值集合。然后您将获得诸如类型安全和`switch`值检查之类的好处。

对于非类型常量：

```
enum { MyClass_ConstantName = 4 }; 
```

并随时将这些隐藏在`*.m`私有时。

另请注意，C`enum`可能在其定义的值中有间隙（与 Java 不同）。

**更新：**有一种更好的方法来声明一个枚举，如 Abizern 的回答所示——如果你坚持使用最新的工具链。使用此扩展的主要原因是为了二进制兼容性和编码（尽管出于这些目的我更喜欢固定宽度类型）。

* * *

对于要使用现有类型的情况，还有一些其他变体：

**私有常量**

我的班级.m

```
static const NSRange MyClass_InputRange = {1,1}; 
```

**公共常量**

我的类.h

```
extern const NSRange MyClass_InputRange; 
```

我的班级.m

```
const NSRange MyClass_InputRange = {1,1}; 
```

* * *

**使用 C++**

您可能倾向于为这些值引入一个新的范围——在类或命名空间中，而不是使用前缀来模拟范围。

**常见错误**

*   使用`#define`for 常量（除非在预处理时必须定义）
*   使用短标识符和没有前缀的标识符
*   `static`在标题中使用值
*   *`const`尽可能*不*使用*
**   当它们可以在`*.m`源中时，在标题中声明它们。*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T09:46:30.290

只是为了添加贾斯汀的优秀答案 - 枚举的现代 Objective-C 定义将是：

```
typedef enum MyClass_Error : NSUInteger {
  // never use MyClass_Error_Undefined
  // or you may favor MyClass_Error_None for a valid error code
  MyClass_Error_Undefined = 0,
  MyClass_Error_Empty = 1,
  MyClass_Error_NoConnection = 2
  // ...
} MyClass_Error; 
```*

# jquery - jquery comobox 选择的值未呈现

> ID：11861282
> 
> 赞同：0
> 
> 时间：2012-08-08T09:12:18.953
> 
> 标签：jquery, select, combobox, render

我的问题是这样的：

我有一个 jquery 组合框元素。当页面加载时显示第一个选项元素，但是当我选择其他元素而不是第一个元素并发布页面时，它会呈现回来，然后运行一些客户端代码（jquery）并将组合框的值设置为我想要的它是：

```
$("#ddl_Cities").val(_dest); // '_dest' has the value of one of the options 
```

奇怪的是，当我调试它时，我看到了

```
$("#ddl_Cities option:selected").text();
$("#ddl_Cities option:selected").val();
$("#ddl_Cities").val();
$("#ddl_Cities")[0].selectedIndex; 
```

ALL 显示文本、值和我的选择（'_dest'）的索引，而不是第一个元素。就像它知道选择了哪一个但不将其呈现到屏幕上。

你能弄清楚这种行为背后的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:26:37.040

当您发布页面时，它将使用默认值（这里的第一个元素）重新加载，这没有任何异常。我猜您正在调试的内容发生在页面重新加载之前，不是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:52:11.993

例如，您确定没有省略 $(document).ready() 吗？或者你的代码就在你的页面后面？

```
$(document).ready(function(){
  // Your code here
}); 
```

# soap - 如何在多个函数中使用相同的 WSDL 消息定义？

> ID：11861283
> 
> 赞同：0
> 
> 时间：2012-08-08T09:12:31.840
> 
> 标签：soap, wsdl

在尝试调用 WSDL 定义的函数时，我遇到了一些关于来自 Visual Studio 2010 的无效定义的错误。问题是您不能在两个单独的函数中使用相同的消息定义。所以我必须在他们做同样的事情时创建多个消息定义。

例如：

```
<message name="Hi">
  <part name="input" type="xsd:string">
</message>
<message name="Say_hi_back">
  <part name="return" type="xsd:string">
</message>
<message name="I_hate_you">
  <part name="return" type="xsd:string">
</message>

<portType name="DataPort">
   <operation name="sayHello">
      <input message="tns:Hi"/>
      <output message="tns:Say_hi_back"/>
   </operation>
   <operation name="sayIHateYou">
      <input message="tns:Hi"/>
      <output message="tns:I_hate_you"/>
   </operation>
</portType> 
```

现在调用任何一个函数都会给你一个错误。除非我添加一个具有完全相同部分的 Hi2 并将操作定义中的输入消息之一更改为 tns:Hi2。

为什么是这样？这没有道理。我正在构建一个服务，我必须将 customerID 添加到我要构建的所有功能中。一种用于预约的功能，一种用于付款的功能，一种用于所有人的功能。这意味着我将不得不复制消息定义 10 次并将它们命名为 getCustomerID*N*。

很多时候我将不得不有多个输入参数。例如，有人想要在日期 x 和日期 y 之间进行所有约会。（这适用于所有存储的信息，如付款等。）虽然我只需要一条带有 int、日期和日期的消息。我将不得不写一个巨大的文件。

所以我的问题是是否有其他方法可以做到这一点。我只使用 WSDL 两天，那两天充满了问题和欺骗性的“胜利”。你在哪里解决了一个问题，却发现打开了通往下一个问题的大门。

谢谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T06:36:10.643

You are creating a WSDL reflecting an RPC style as evidenced by the 'type' attributes in the message part definitions. I am not entirely sure why this would cause a problem with VS, but the RPC style has gone out of vogue in favor of the document style (the modern versions of some tools have dropped support for RPC altogether).

You may have better results using the document style (document/literal/wrapped is our standard). You can read a little more about style differences here ([http://www.ibm.com/developerworks/webservices/library/ws-whichwsdl/](http://www.ibm.com/developerworks/webservices/library/ws-whichwsdl/)).

The changes required are not too complex and this site ([http://wso2.org/library/knowledge-base/convert-rpc-encoded-wsdl-document-literal-wrapped-wsdl](http://wso2.org/library/knowledge-base/convert-rpc-encoded-wsdl-document-literal-wrapped-wsdl)) gives some help, although I think the author flipped his rpc vs literal output definitions in the #Output message section.

# google-drive-api - 我可以关闭驱动器 OAuth 流程吗？

> ID：11861285
> 
> 赞同：1
> 
> 时间：2012-08-08T09:12:35.493
> 
> 标签：google-drive-api

有没有办法关闭内置流程来自己处理 OAuth 流程？

现在看起来好像“授予权限”页面出现在用户访问我的应用程序之前。

由于我使用 App Engine 并依靠 UserServer 代表用户触发操作，因此无论如何我都必须自己处理所有 OAuth 流程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T16:06:48.910

无法关闭安装流程；然而，这是一个很好的功能请求，将对此进行调查。

感谢您的反馈，当我有更多信息时，我会更新这个答案。

# jquery-animate - jquery淡出后调用历史返回按钮

> ID：11861286
> 
> 赞同：0
> 
> 时间：2012-08-08T09:12:40.933
> 
> 标签：jquery-animate, jquery

我需要在调用`parent.history.back();`jquery 函数后调用。
我的代码如下所示：

```
if((counteditems).length == 0) {
             $("li.res").fadeIn("slow");
             $('div.no-items').fadeIn("slow", "linear");
             $('div.no-items .close-it').click(function(){
                     $("div.no-items").fadeOut('slow',  function() {

                        parent.history.back();
                        return false;

                });

              });  
        } 
```

计算了一些项目，如果它们的长度为零，`li.res`则应显示。
之后 a`div.no-items`应该淡入。在此`div.no-items`有一个关闭按钮。当我单击它时，`div.no-items`应该淡出，然后应该触发浏览器的“后退按钮”。
一切都像它应该的那样工作，但除了淡出。它淡出然后淡入并触发后退按钮但`div.no-items`仍然存在。
我的代码有什么问题？

编辑：我正在使用 jquery BBQ

# ruby-on-rails - 为 HABTM 选择多个框

> ID：11861289
> 
> 赞同：0
> 
> 时间：2012-08-08T09:12:46.543
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有两个模型；问题和类别之间具有 HABTM 关联。现在我想要一个可以编辑问题类别的表格，但我不知道如何。我从这个开始，但我迷路了，我不确定如何命名“名称”属性等以及如何使用问题自动编辑/创建它，我该如何设置？

```
<%= f.fields_for :categories do |categories_form| %>
        <%= categories_form.select "category_ids", Category.all.collect { |c| [c.description, c.id] }, {}, {:multiple => true, :size => 9} %>
    <% end %> 
```

我设法设置了问题（has_many）->用fields_for和accepts_nested_attributes_for回答，但不是这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:28:29.433

您应该看一下 Ryan Bates[嵌套模型表单第 1 部分](http://railscasts.com/episodes/196-nested-model-form-part-1)和[嵌套模型表单第 2](http://railscasts.com/episodes/197-nested-model-form-part-2)部分的以下截屏视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:25:43.370

**迁移**

您需要为表创建迁移

您需要为关联的中间表创建迁移+关联创建的中间表名称是：categories_questions 或：questions_categories，在第二种情况下，您必须在模型中定义名称，如链接中所示 [我需要手动为 HABTM 连接表创建迁移？](https://stackoverflow.com/questions/564306/do-i-need-to-manually-create-a-migration-for-a-habtm-join-table)

```
class CreateCategoriesQuestions < ActiveRecord::Migration
  def self.up
    create_table :categories_questions, :id => false do |t|
        t.references :category
        t.references :question
    end
    add_index :categories_questions, [:category_id, :question_id]
    add_index :categories_questions, [:question_id, :category_id]
  end

  def self.down
    drop_table :categories_questions
  end
end 
```

**问题模型**

```
class Question < ActiveRecord::Base
  has_and_belongs_to_many :categories
end 
```

**类别模型**

```
class Category < ActiveRecord::Base
  has_and_belongs_to_many :questions
end 
```

**控制器材料**

**questions_controller.rb**

```
def new
  @question = Question.new
  @question.categories.build #Build a categories_questions so as to use fields_for 
end 
```

**表格资料**

```
= f.fields_for :categories do |categories_fields|
  = categories_fields.text_field :name
  = categories_fields.text_field :description 
```

在这一点上，我必须告诉你（我是 ruby​​ 和 rails 的新手），要在这里创建一个新对象，你可以使用 jquery 正确附加一个 html 块名称，或者创建帮助程序（最后使用 javascript）添加一个新的对象并在保存时保存关联。在下一个链接中，有人演示了确切的方法。

[http://apidock.com/rails/ActionView/Helpers/FormHelper/fields_for#512-Setting-child-index-while-using-nested-attributes-mass-assignment](http://apidock.com/rails/ActionView/Helpers/FormHelper/fields_for#512-Setting-child-index-while-using-nested-attributes-mass-assignment)

# jquery - jQuery - 未定义 Cufon 和 TypeError

> ID：11861290
> 
> 赞同：0
> 
> 时间：2012-08-08T09:12:51.027
> 
> 标签：jquery, wordpress, cufon

我在页面上收到这两个错误：

ReferenceError：Cufon 未定义

TypeError: $(".main_equal2").equalHeights 不是函数

我正在使用带有 simplemarket 主题的 Wordpress。所有脚本文件都加载在 header.php 中，并包含在下面。

任何人都可以帮助解决我的问题吗？

```
 <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script type="text/javascript" src="<?php bloginfo('template_url') ?>/scripts/cufon.js"></script>
    <script type="text/javascript" src="<?php bloginfo('template_url') ?>/scripts/avenir_400.font.js"></script>
    <script type="text/javascript" src="<?php bloginfo('template_url') ?>/scripts/equal_heights.js"></script>
    <script type="text/javascript" src="<?php bloginfo('template_url') ?>/scripts/html5shiv.js"></script>
    <script type="text/javascript" src="http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js"></script>
    <!--<script src="<?php bloginfo('template_url') ?>/scripts/googlemapselector.js"></script>-->
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>

    <!--[if lte IE 8]>
        <script src="<?php bloginfo('template_url') ?>/scripts/selectivizr-min.js" type="text/javascript"></script>
    <![endif]-->

    <script type="text/javascript">
            function initialize() {
                geocoder = new google.maps.Geocoder();
                var latlng = new google.maps.LatLng(40.718510, -73.774080);
                var mapOptions = {
                    zoom: 13,
                    center: latlng,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                }
                map = new google.maps.Map(document.getElementById("map_canvas_sat"), mapOptions);

                var image = 'images/school_icon.png';

                var marker = new google.maps.Marker({
                    map: map,
                    position: latlng,
                    animation: 'drop',
                    icon: image
                });
            }

            $(document).ready(function(){
                $(".main_equal2").equalHeights();
                $(".main_equal3").equalHeights2();
                $(".main_equal4").equalHeights3();
            });

            jQuery(document).ready(function(){
                // Anything classed with .collapse should be collapsed as well by default
                i = 0;

                jQuery('.collapse').each(function() {
                    this.id = 'collapser-' + Math.floor( Math.random() * ( Math.random() * 10000 ) );
                    jQuery(this).wrap('<div id="' + this.id + '-expand"></div>');

                    if(i == 0) {    
                        jQuery(this).before('<a class="dark_stripe" id="' + this.id + '-link" href="#" onclick="javascript:jQuery(\'#' + this.id + '\').slideToggle();return false;">Click</a>');
                        i++;
                    } else if(i == 1) {
                        jQuery(this).before('<a class="light_stripe" id="' + this.id + '-link" href="#" onclick="javascript:jQuery(\'#' + this.id + '\').slideToggle();return false;">Click</a>');
                        i = 0;
                    }

                    jQuery(this).wrap( '<div></div>' );
                    jQuery(this).slideUp();
                });

                jQuery(".athletics_map_location").click(function() {
                    var address = $(this).attr('value');
                    var image = 'http://www.bigideaadv.com/tmla/wp-content/themes/simplemarket/images/school_icon.png';

                    geocoder.geocode( { 'address': address}, function(results, status) {
                        if (status == google.maps.GeocoderStatus.OK) {
                            map.setCenter(results[0].geometry.location);
                            var marker = new google.maps.Marker({
                                map: map,
                                animation: 'drop',
                                position: results[0].geometry.location,
                                icon: image
                            });

                            /*shadow: Symbol({
                                fillColor: '#00ff00'
                            }),*/

                        } else {
                            alert("Geocode was not successful for the following reason: " + status);
                        }
                    });
                });

                jQuery(".athletics_map_location2").click(function() {
                    var address = $(this).attr('value');
                    var image = 'http://www.bigideaadv.com/tmla/wp-content/themes/simplemarket/images/facility_icon.png';

                    geocoder.geocode( { 'address': address}, function(results, status) {
                        if (status == google.maps.GeocoderStatus.OK) {
                            map.setCenter(results[0].geometry.location);
                            var marker = new google.maps.Marker({
                                map: map,
                                animation: 'drop',
                                position: results[0].geometry.location,
                                icon: image
                            });

                            /*shadow: Symbol({
                                fillColor: '#00ff00'
                            }),*/

                        } else {
                            alert("Geocode was not successful for the following reason: " + status);
                        }
                    });

                    //FONT REPLACEMENT FOR RIGHTS PROTECTED AVENIR FONT
                    Cufon.replace('#athletics_menu ul#menu-athletics-menu a:link, #athletics_menu ul#menu-athletics-menu a:visited, #athletics_menu ul#menu-athletics-menu a:hover, #athletics_menu ul#menu-athletics-menu a:active');
                    Cufon.replace('#athletics_sidebar_right aside.widget h3, #athletics_sidebar_bottom_left aside.widget h3, #athletics_sidebar_bottom_center aside.widget h3, .page-template-template-athletics-sports-page-php aside.widget h3');
                });

                $(function() {
                   // initialize scrollable
                   var root = $(".scrollable").scrollable({circular: true, speed: 1000}).autoscroll({ autoplay: true, interval: 5000 });
                   //$(".scrollable").scrollable();
                });
            });
        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:33:18.133

在 wordpress 中使用 jQuery 而不是 $ 或使用

```
jQuery(document).ready(function($){ 
```

在代码中启用 $。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-14T05:47:01.983

有两个 jQuery 包含并且正在使用 $. 而不是 jQuery。感谢所有的建议。

# magento - 如何在 Magento 的 CSV 文件中写入一些数据？

> ID：11861295
> 
> 赞同：3
> 
> 时间：2012-08-08T09:13:23.080
> 
> 标签：magento

我正在尝试将一些装运详细信息打印为 CSV 文件，我几乎完成了此操作，但它没有提供下载选项。它会自动创建文件并将其保存在提到的目录中。

我想我缺少 _prepareDownloadResponse() 函数，但我该如何实现它。

我正在使用此代码->

```
$file_path = 'sample_shipment.csv';
$mage_csv = new Varien_File_Csv();
$mage_csv->saveData($file_path, $content); 
```

编辑：所有这些代码都在我的 indexcontroller.php 中 indexcontroller.php 的完整代码->

```
class Company_Manifestupload_IndexController extends Mage_Adminhtml_Controller_Action
{        
public function indexAction() {
    echo 'Manifestupload Index!';
}
public function bluedartmanifestuploadAction() {
    $request = $this->getRequest();
    $shipmentIds = $request->getPost('shipment_ids', array());
    $file_path = 'manifest_upload_'.Mage::getSingleton('core/date')->date('d-m-Y_H-i-s').'_csv.csv';
    $mage_csv = new Varien_File_Csv();
    $shipment_csv=array();

            /*  Putting data in $shipment_csv[] */
            $mage_csv->saveData($file_path, $shipment_csv);
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:23:34.040

为了使 csv 文件可下载，只需将以下代码放入相关的控制器操作中：

```
$fileName       = 'filename.csv';
$content        = $csvData; //prepare the csv data and return as string
$this->_prepareDownloadResponse($fileName, $content); //this will make the csv file downloadable with the $content as contents in it. 
```

希望这可以帮助。

**编辑：** 请找到更新的控制器操作代码。

```
public function bluedartmanifestuploadAction() {
    $request        = $this->getRequest();
    $shipmentIds    = $request->getPost('shipment_ids', array());
    $fileName       = 'manifest_upload_'.Mage::getSingleton('core/date')->date('d-m-Y_H-i-s').'_csv.csv';

    //prepare csv contents
    #prepare header
    $csv = '';
    $_columns = array(
        "field1",
        "field2",
        //...
    );
    $data = array();
    foreach ($_columns as $column) {
        $data[] = '"'.$column.'"';
    }
    $csv .= implode(',', $data)."\n";
    #prepare data
    foreach($dataFromShipmentIds as $_data){ //just dummy loop
        $data = array();
        $data[] = $_data['field1'];
        $data[] = $_data['field2'];
        //...
        $csv .= implode(',', $data)."\n";
    }
    //now $csv varaible has csv data as string

    $this->_prepareDownloadResponse($fileName, $csv); 
} 
```

**编辑2**：上述代码仅在理想情况下才能正常工作。当字段中有“\n”和“，”时，它不会生成正确的CSV。为了使其正常工作，可以使用varien文件CSV中的代码。我会在这里添加它-

首先如上所述在 $data[] 中创建值数组，而不是`$csv.=implode(',',$data)."\n"`使用下面的代码。

```
foreach ($data as $value) {
         if (strpos($value, $delimiter) != false ||
             strpos($value, $enclosure) != false ||
             strpos($value, "\n") != false ||
             strpos($value, "\r") != false ||
             strpos($value, "\t") != false ||
             strpos($value, ' ') != false) {
             $str2 = $enclosure;
             $escaped = 0;
             $len = strlen($value);
             for ($i=0;$i<$len;$i++) {
                 if ($value[$i] == $escape_char) {
                     $escaped = 1;
                } else if (!$escaped && $value[$i] == $enclosure) {
                     $str2 .= $enclosure;
                 } else {
                     $escaped = 0;
                 }
                     $str2 .= $value[$i];
             }
             $str2 .= $enclosure;
             $str .= $str2.$delimiter;
         } else {
             $str .= $enclosure.$value.$enclosure.$delimiter;
         }
     }
            $str = substr($str,0,-1);
            $str .= "\n"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-22T05:22:47.847

如果您想为您订购的商品创建可下载的 csv，您可以使用以下脚本。

```
$orders = Mage::getModel("sales/order")->getCollection();
// prepare CSV header
$csv = '';
$_columns = array(
     "Order Id",
     "Product Name",
     "Sku",
     "Price"
);
$data = array();
// prepare CSV header...
foreach ($_columns as $column) {
       $data[] = '"'.$column.'"';
}
$csv .= implode(',', $data)."\n";
foreach ($orders as $order) {
         $items = $order->getAllItems();
         foreach ($items as $item) {
               $loadProduct = Mage::getModel('catalog/product')->load($item->getProductId());
               //prepare csv contents
                $data = array();
                $data[] = $order->getId();
                $data[] = $loadProduct['name'];
                $data[] = $loadProduct['sku'];
                $data[] = $loadProduct['price'];

                $csv .= implode(',', $data)."\n";
               //now $csv varaible has csv data as string
    }
}

$this->_redirect('*/*/');
$this->_prepareDownloadResponse('file.csv', $csv, 'text/csv'); 
```

欲了解更多信息，请访问[这里](http://hkpatel201.blogspot.com/2014/04/how-to-create-csv-files-in-magento.html)

# facebook-graph-api - Facebook API 获取安装相同应用程序的共享朋友喜欢

> ID：11861296
> 
> 赞同：0
> 
> 时间：2012-08-08T09:13:25.020
> 
> 标签：facebook-graph-api

我需要以某种方式获得使用同一个应用程序的朋友之间的共同点赞，一些 FQL 最终返回给我最常见的点赞列表，这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T16:26:18.373

我已经看过了，要根据可索引的 user_id 字段获得当前用户的喜欢，您需要当前用户的 user_access 令牌。

[https://developers.facebook.com/docs/reference/fql/like/](https://developers.facebook.com/docs/reference/fql/like/)

这基本上意味着，只有您的应用程序在特定时间的当前用户才能根据他们的喜好查询信息。类似以下查询的内容可能对您有用。请注意，您需要 read_stream 权限

```
select object_id, user_id,object_type FROM like WHERE object_id in(SELECT object_id FROM like WHERE user_id =me()) and user_id in(select uid FROM user WHERE uid in(SELECT uid2 FROM friend where uid1 = me()) and is_app_user='true') 
```

你可以试试这个

```
https://developers.facebook.com/tools/explorer/433871385166/?fql=select%20object_id%2C%20user_id%2Cobject_type%20FROM%20like%20WHERE%20object_id%20in(SELECT%20object_id%20FROM%20like%20WHERE%20user_id%20%3Dme())%20and%20user_id%20in(select%20uid%20FROM%20user%20WHERE%20uid%20in(SELECT%20uid2%20FROM%20friend%20where%20uid1%20%3D%20me())%20and%20is_app_user%3D'true') 
```

然后，您很可能需要使用一些服务器端代码来分析返回的数据以计算最流行的数据。可能通过创建一个数组，遍历数据，根据 object_id 检查数组中是否有一个键，如果没有将该键添加到值为 1 的数组中（其中 1 是计数），否则增加值减 1。

伪代码示例

```
 $data; // This would be what was returned from your FQL query
  $compare = array();
  foreach($data as $value){
    if(array_key_exists($value['object_id'],$compare)){
       $compare['object_id'] = $value['object_id'] + 1;
    }else{
       $compare['object_id'] = 1;
    }
  }
  // Do some sorting function to compare the counts.
  //you would then probably need to batch queries to get the name/title of the object that the user has liked 
```

我希望这能给你一个好的起点

# git - 如何在git项目中搜索任何函数或变量的作者？

> ID：11861300
> 
> 赞同：1
> 
> 时间：2012-08-08T09:13:40.443
> 
> 标签：git, project

如何在git项目中搜索任何函数或变量的作者？当我找到一些函数或变量时，我很好奇，我想知道是谁创造了这些东西。有什么方法可以追踪作者姓名和创作时间吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:14:54.833

`git blame`将确定谁最后修改了文件/修订版中的*每一行*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T12:33:36.750

根据布赖恩的回答，`git blame`将告诉您最近的提交者/提交以修改一行，但是如果您想一直跟踪该行，则需要“镐搜索”：

```
-S<string>
Look for differences that introduce or remove an instance of <string>. Note that this is different than the string simply appearing in diff output; see
the pickaxe entry in gitdiffcore(7) for more details. 
```

假设您想`methodFoo`在 file中查找字符串的全部历史记录`TroublingClass`。您可以使用`git log`如下命令：

```
git log -S"methodFoo" -- TroublingClass 
```

旗帜`-S`只是没有得到应有的关注。在归因故障或调查错误历史时，它非常有用。

# java - Eclipse 中的 Java 错误：无法找到或加载主类长度

> ID：11861303
> 
> 赞同：0
> 
> 时间：2012-08-08T09:13:53.930
> 
> 标签：java

我正在正常工作。突然，当我尝试运行时，出现此错误：

```
Error: Could not find or load main class length 
```

我确保`PATH`环境变量包含：`C:\Program Files\Java\jdk1.7.0_05\bin`

请问是什么问题？我查看了以前的帖子，但对我的情况没有任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:17:46.163

您正在尝试运行不再存在的类，或者不再具有 main() 方法或运行配置不正确。

你真的有一个名为`length`（全小写）的类吗？那会令人困惑。

# jsf-2 - 如何访问 JSF 2 中的 Set 元素？

> ID：11861310
> 
> 赞同：1
> 
> 时间：2012-08-08T09:14:18.273
> 
> 标签：jsf-2, el

我想在 JSF 2 中的 Set 中获取特定元素，请告知如何做到这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T12:25:40.677

此问题并非特定于 JSF/EL。已经在纯 Java 中，您**无法**访问[`Set`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html). `Set`没有像has`get(index)`那样的方法[`List`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)。您需要将 转换`Set<T>`为`T[]`数组或 a`List<T>`以便您可以通过索引访问它。

这以可预测的方式起作用，[`SortedSet`](http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html)或者[`LinkedHashSet`](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html)仅在元素随后分别以排序顺序或插入顺序插入时起作用。当它是 a 时，这没有任何意义，[`HashSet`](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)因为您无法事先可靠地预测元素最终会在哪个索引处结束。

如果您使用的是 EL 2.2（您的问题历史证实了这一点），那么您可以使用[`Set#toArray()`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html#toArray%28%29)将其转换为数组，然后使用大括号符号`[]`按索引访问元素。下面的示例打印 的数组表示的第二项`#{bean.someSet}`。

```
#{bean.someSet.toArray()[1]} 
```

同样，如果它是像`HashSet`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T10:09:56.823

您的问题很不清楚，但**JSF2 并不真正支持 Set**。

组件喜欢`ui:repeat`或`h:datatable`总是需要*排序*来显示数据，因此您最好的选择是将您的转换`Set`为`List`第一个。

# cakephp - cakephp 的 datbase.php 未上传到 github

> ID：11861311
> 
> 赞同：1
> 
> 时间：2012-08-08T09:14:22.173
> 
> 标签：cakephp, github, cakephp-1.2, github-for-windows

我最近开始使用 GitHub。我正在上传我的 cakephp 网站。另外，我正在为 Windows 使用 GitHUb，[http://windows.github.com/](http://windows.github.com/)

现在，在我添加我的 CakePHP 文件 -> 提交更改 -> 同步之后，我没有看到我的 app/database.php 文件正在上传。

我通过浏览器检查了存储库，但仍然找不到 database.php 文件。

我已经重新安装了 GitHub for windows，创建了一个新的存储库，再次将文件添加到其中，但结果相同。

请帮忙，这是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:34:04.913

清除您的 .gitignore 文件并再次提交。

但是 database.php 在你的 .gitignore 中是出于安全原因。它可能包含敏感数据，请在推送前仔细检查。

# c++ - 安全附加 boost 文件系统路径，检测向上引用

> ID：11861312
> 
> 赞同：1
> 
> 时间：2012-08-08T09:14:37.240
> 
> 标签：c++, boost, path

我想对这个主题有一个最好的指导。在实际做某事之前，我必须先做一些路径魔法。

```
using namespace boost::filesystem;
path p = "apple"; // apple 
p /= "pear";      // apple/pear
p /= "..";        // apple/pear/..                      // apple
p /= "chicken";   // apple/pear/../chicken              // apple/chichken
p /= "..";        // apple/pear/../chicken/..           // apple
p /= "..";        // apple/pear/../chicken/../..        // .
p /= "..";        // apple/pear/../chicken/../../..     // ..
p /= "cow";       // apple/pear/../chicken/../../../cow // ../cow
path s = "\\tmp\\file857463.tmp"; // s.is_relative() is true on windows 
```

在第一行之后的每一行中，`//`您都可以看到我打印出来的内容。在第二个之后`//`你可以看到我想看到的（如果不同）

考虑到我肯定不想接触文件系统，如果我想看到这种行为，我可以/应该做什么中间步骤。在最终表格出现后，我想测试当前目录内的参考点是否（仍然没有访问 FS）。

我想检测像`\`(windows) 或`\\`(windows) 或`/`Linux 上的向上跳跃。来自手册的引用：**在 Windows 上， path("/foo").is_absolute() 返回 false**。恕我直言，这是非常科学的，但没用。我的主要目标是防止向上引用，而无需手动访问字符，也无需提升访问 FS。（如果我必须手动触摸任何字符，我宁愿一起编写自己的路径实用程序。）

我没有找到一个可靠的概念来检测驱动器根引用。我也尝试过提升文档和谷歌。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:27:00.587

尝试使用规范： http: [//www.boost.org/doc/libs/1_50_0/libs/filesystem/doc/reference.html#canonical](http://www.boost.org/doc/libs/1_50_0/libs/filesystem/doc/reference.html#canonical)

# iphone - 如何在iphone中的图像上赋予草图效果？

> ID：11861313
> 
> 赞同：3
> 
> 时间：2012-08-08T09:14:38.533
> 
> 标签：iphone

我正在实现一个 iPhone 应用程序，其中我实现了以下功能：

1.  选择照片
2.  拍摄照片
3.  现在我想给[这张照片一个素描效果。](http://itunes.apple.com/in/app/photo-to-sketch/id421785759?mt=8)

我怎么能这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T17:44:14.343

如果我可以再次推荐它，我的开源[GPUImage](https://github.com/BradLarson/GPUImage)框架有一个内置过滤器可以做到这一点。GPUImageSketchFilter 使用 Sobel 边缘检测来突出图像或视频上的黑色边缘，从而产生与该应用程序中所见完全相同的效果：

![草图滤镜](../Images/e18218a904ec973749eed2bc1acb86c9.png)

上图取自[这个答案](https://stackoverflow.com/a/9402041/19679)，我在其中描述了该过滤器的工作原理，并展示了其他几个过滤器示例。

事实上，框架附带的 SimplePhotoFilter 示例应用程序完全符合您的描述（捕获照片，对其应用草图过滤器，并将其保存到照片库），所以如果您想获得它，我会从那里开始快速启动并运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T10:02:19.873

OpenCV 可用于在 iphone 中对图像进行素描效果。

请参阅[iphone-how-to-convert-a-photo-into-a-pencil-drawing](https://stackoverflow.com/questions/5816295/iphone-how-to-convert-a-photo-into-a-pencil-drawing)链接并获得帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:34:43.993

Core Image 滤镜可能是最好的选择。

[http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CoreImageFilterReference/](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CoreImageFilterReference/)。

# mysql - 在 phpMyAdmin 中散列

> ID：11861317
> 
> 赞同：7
> 
> 时间：2012-08-08T09:14:44.730
> 
> 标签：mysql, phpmyadmin, hash

我有一个 mySQL 数据库，我正在使用 phpMyAdmin 来访问它。该数据库有表员工，其中包含姓名、地址、电子邮件和密码等字段。

最初密码字段只是`VARCHAR (20)`. 但现在我想用 SHA-256 散列技术对我的密码进行散列。

我对数据库没有太多经验，所以我想知道的是-

1.  我可以在不影响其他字段或整个表的情况下散列所有当前员工的密码吗？

2.  将来当我（从 Web 应用程序）在数据库中输入数据时，我在哪里编写散列函数来散列密码？即散列是否发生在前端，然后散列密码存储在数据库中，或者密码进入数据库进行散列然后存储。

解决方案和建议表示赞赏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T10:05:16.333

**Q1：我可以在不影响其他字段或整个表的情况下散列所有当前员工的密码吗？**

**答：**是的。但是您需要将密码列的大小更改为 40-42。您将使用`PASSWORD( )`内置函数来加密您的密码

```
ALTER TABLE tableName MODIFY `password` VARCHAR(42); 
```

之后，您现在可以更新密码列

```
UPDATE tablename
SET     `password` = PASSWORD(`password`); 
```

前任。）

```
abcde12345 => *20B30AFAF441808B50273EDA287132EC25B02DE2 
```

**Q2：将来当我在数据库中输入数据时（从网络应用程序），我在哪里编写散列函数来散列密码？**

**答：**在你的`INSERT query`

```
INSERT INTO tableName (name, address, email, password) 
VALUES ('aa','bb',''cc,PASSWORD('abcde12345')) 
```

当您要搜索密码时，请先加密文本：

```
SELECT *
FROM   tableName
WHERE `password` = PASSWORD('abcde12345') 
```

还有一件事，不要忘记将您的`Password`列转义，`backtick`因为它是**[MySQL 保留字。](https://dev.mysql.com/doc/refman/5.7/en/keywords.html)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:21:00.950

您可以在 php 中对密码进行哈希处理，然后将其存储在数据库中：

```
$pwd = hash('sha256',$_POST['password']); 
```

MySQL 不支持 sha256 功能，因此您需要通过代码散列，然后存储/更新您的密码表。否则你可以考虑这个[http://stuge.se/mysql-sha256/](http://stuge.se/mysql-sha256/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:25:40.093

> 我可以在不影响其他字段或整个表的情况下散列所有当前员工的密码吗？

是的。例如，如果您要使用[SHA-1](http://en.wikipedia.org/wiki/SHA-1)哈希函数，您可以添加相应的列并通过一次查询对所有密码进行哈希处理：

```
alter table employee add column password_hash varchar(40);
update employee set password_hash = sha1(password); 
```

假设您的纯文本密码列称为“密码”。当然，您可以在获得散列后删除原始列（并且很可能这正是您接下来想要做的）。

但是，我强烈建议您阅读更多有关[散列算法](http://en.wikipedia.org/wiki/Hash_function)的内容并选择更好的内容。例如，您可能想要使用不同的散列函数和/或添加[salt](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)。

> 将来当我（从 Web 应用程序）在数据库中输入数据时，我在哪里编写散列函数来散列密码？即散列是否发生在前端，然后散列密码存储在数据库中，或者密码进入数据库进行散列然后存储。

最常见的是，每次用户登录时都会在服务器端进行哈希处理。然后创建身份验证会话并将会话 ID 存储在用户的 cookie 中（因此，您永远不会将密码或其哈希值存储在客户端，但是，您在用户登录时将其传输到服务器，这就是为什么至少使用 SSL 进行身份验证的原因）。

在某些情况下，您甚至可能想要构建一个单独的身份验证后端，它只接受密码哈希请求（因此，即使有人破解了您的系统，确切的哈希模式仍然是秘密的，直到他们也破解了哈希后端，这可以是如果构建得足够仔细，难度会大得多）。但是，您只需要这样的东西，以防您真的非常关心安全性并且它非常重要。否则，典型的服务器端散列就足够了。

# vb6 - 如何获取当前的硬盘类型？

> ID：11861318
> 
> 赞同：-1
> 
> 时间：2012-08-08T09:14:49.483
> 
> 标签：vb6, wmi, master-slave, hdd

我找到了一种在 vb6 中获取硬盘序列号的方法。但它需要从中选择一个选项

*   初级主人
*   主从
*   二级大师
*   次要奴隶

但我想自动选择一个选项。自动选择逻辑是，

> 假设我有 4 个具有上述 4 种类型的 HDD。并且逻辑将选择加载当前系统的硬盘类型。

我真的不知道如何检测当前系统是哪种硬盘类型。请帮忙。

这是我用来选择硬盘序列号的类。[HDSN 等级](http://social.msdn.microsoft.com/Forums/en-US/vbpowerpacks/thread/0e9a097d-c22c-4b70-ad50-106d680fa5b3/#eceda6cb-1508-4d90-b79e-83bd02323869)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T01:07:33.470

下面的代码应该会有所帮助：

```
Option Explicit

Private Const FILE_SHARE_READ = &H1
Private Const FILE_SHARE_WRITE = &H2
Private Const GENERIC_READ = &H80000000
Private Const GENERIC_WRITE = &H40000000
Private Const OPEN_EXISTING = 3

Private Const IOCTL_VOLUME_BASE     As Long = 86 ' Asc("V")
Private Const METHOD_BUFFERED       As Long = 0
Private Const FILE_READ_ACCESS      As Long = 1
Private Const FILE_ANY_ACCESS       As Long = 0

'DEFINE IOCTL_VOLUME_GET_VOLUME_DISK_EXTENTS CTL_CODE(IOCTL_VOLUME_BASE, 0, METHOD_BUFFERED, FILE_ANY_ACCESS)
Private Const IOCTL_VOLUME_GET_VOLUME_DISK_EXTENTS = (((IOCTL_VOLUME_BASE) * (2& ^ 16&)) Or ((FILE_ANY_ACCESS) * (2& ^ 14&)) Or ((0&) * (2& ^ 2&)) Or (METHOD_BUFFERED))

Private Type DISK_EXTENT
    DiskNumber          As Long
    StartingOffset      As Currency
    ExtentLength        As Currency
End Type

Private Type VOLUME_DISK_EXTENTS
    NumberOfDiskExtents As Currency
    Extents(1 To 4)     As DISK_EXTENT
End Type

Private Declare Function CreateFile _
    Lib "kernel32" Alias "CreateFileA" _
    (ByVal lpFileName As String, _
    ByVal dwDesiredAccess As Long, _
    ByVal dwShareMode As Long, _
    ByVal lpSecurityAttributes As Long, _
    ByVal dwCreationDisposition As Long, _
    ByVal dwFlagsAndAttributes As Long, _
    ByVal hTemplateFile As Long) As Long

Private Declare Function CloseHandle _
    Lib "kernel32" _
    (ByVal hObject As Long) As Long

Private Declare Function GetWindowsDirectory Lib "Kernel32.dll" Alias "GetWindowsDirectoryW" ( _
    ByVal lpBuffer As Long, _
    ByVal uSize As Long _
) As Long

Private Declare Function DeviceIoControlNoInput _
    Lib "kernel32" Alias "DeviceIoControl" _
    (ByVal hDevice As Long, _
    ByVal dwIoControlCode As Long, _
    ByVal lpInBuffer As Long, _
    ByVal nInBufferSize As Long, _
    ByRef lpOutBuffer As Any, _
    ByVal nOutBufferSize As Long, _
    ByRef lpBytesReturned As Long, _
    ByVal lpOverlapped As Long) As Long

' Return the index of the physical drive from which we've booted into Windows. 
Public Function GetBootPhysicalDrive() As Long

    Dim sWindowsPath        As String
    Dim nRet                As Long
    Dim sDevicePath         As String
    Dim hLogicalBootDrive   As Long
    Dim sVolumeDevice       As String
    Dim uVolumeDiskExtents  As VOLUME_DISK_EXTENTS
    Dim nBytesReturned      As Long

    ' Allocate space and retrieve the windows directory.
    sWindowsPath = Space$(64)
    nRet = GetWindowsDirectory(StrPtr(sWindowsPath), 64)

    ' This gives us the volume that Windows is on. Open it.
    sVolumeDevice = "\\.\" & Left$(sWindowsPath, 2)
    hLogicalBootDrive = CreateFile(sVolumeDevice, GENERIC_READ + GENERIC_WRITE, FILE_SHARE_READ + FILE_SHARE_WRITE, 0&, OPEN_EXISTING, 0&, 0&)

    ' Find out information about this volume.
    nRet = DeviceIoControlNoInput(hLogicalBootDrive, IOCTL_VOLUME_GET_VOLUME_DISK_EXTENTS, 0&, 0&, uVolumeDiskExtents, LenB(uVolumeDiskExtents), nBytesReturned, 0&)

    If nRet = 0 Then
    ' Something went wrong. Return error value.
        GetBootPhysicalDrive = -1
    Else
    ' This is the physical disk number.
        GetBootPhysicalDrive = uVolumeDiskExtents.Extents(1).DiskNumber
    End If

    ' Close volume.
    CloseHandle hLogicalBootDrive

End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T20:16:57.410

使用 Mark Bertenshaw 的[上述](https://stackoverflow.com/questions/11861318/how-to-get-current-hdd-type/11875423#11875423)解决方案，我在一个模块中编写了以下内容，并调用了该`GetDiskSerialNumber`函数来获取启动当前系统的 HDD 的序列号。这是我的模块代码：

```
Option Explicit

Private Const FILE_SHARE_READ = &H1
Private Const FILE_SHARE_WRITE = &H2
Private Const GENERIC_READ = &H80000000
Private Const GENERIC_WRITE = &H40000000
Private Const OPEN_EXISTING = 3

Private Const IOCTL_VOLUME_BASE     As Long = 86 ' Asc("V")
Private Const METHOD_BUFFERED       As Long = 0
Private Const FILE_READ_ACCESS      As Long = 1
Private Const FILE_ANY_ACCESS       As Long = 0

'DEFINE IOCTL_VOLUME_GET_VOLUME_DISK_EXTENTS CTL_CODE(IOCTL_VOLUME_BASE, 0, METHOD_BUFFERED, FILE_ANY_ACCESS)
Private Const IOCTL_VOLUME_GET_VOLUME_DISK_EXTENTS = (((IOCTL_VOLUME_BASE) * (2& ^ 16&)) Or ((FILE_ANY_ACCESS) * (2& ^ 14&)) Or ((0&) * (2& ^ 2&)) Or (METHOD_BUFFERED))

Private Type DISK_EXTENT
    DiskNumber          As Long
    StartingOffset      As Currency
    ExtentLength        As Currency
End Type

Private Type VOLUME_DISK_EXTENTS
    NumberOfDiskExtents As Currency
    Extents(1 To 4)     As DISK_EXTENT
End Type

Private Declare Function CreateFile _
    Lib "kernel32" Alias "CreateFileA" _
    (ByVal lpFileName As String, _
    ByVal dwDesiredAccess As Long, _
    ByVal dwShareMode As Long, _
    ByVal lpSecurityAttributes As Long, _
    ByVal dwCreationDisposition As Long, _
    ByVal dwFlagsAndAttributes As Long, _
    ByVal hTemplateFile As Long) As Long

Private Declare Function CloseHandle _
    Lib "kernel32" _
    (ByVal hObject As Long) As Long

Private Declare Function GetWindowsDirectory Lib "Kernel32.dll" Alias "GetWindowsDirectoryW" ( _
    ByVal lpBuffer As Long, _
    ByVal uSize As Long _
) As Long

Private Declare Function DeviceIoControlNoInput _
    Lib "kernel32" Alias "DeviceIoControl" _
    (ByVal hDevice As Long, _
    ByVal dwIoControlCode As Long, _
    ByVal lpInBuffer As Long, _
    ByVal nInBufferSize As Long, _
    ByRef lpOutBuffer As Any, _
    ByVal nOutBufferSize As Long, _
    ByRef lpBytesReturned As Long, _
    ByVal lpOverlapped As Long) As Long

' Return the index of the physical drive from which we've booted into Windows. 
Public Function GetBootPhysicalDrive() As Long

    Dim sWindowsPath        As String
    Dim nRet                As Long
    Dim sDevicePath         As String
    Dim hLogicalBootDrive   As Long
    Dim sVolumeDevice       As String
    Dim uVolumeDiskExtents  As VOLUME_DISK_EXTENTS
    Dim nBytesReturned      As Long

    ' Allocate space and retrieve the windows directory.
    sWindowsPath = Space$(64)
    nRet = GetWindowsDirectory(StrPtr(sWindowsPath), 64)

    ' This gives us the volume that Windows is on. Open it.
    sVolumeDevice = "\\.\" & Left$(sWindowsPath, 2)
    hLogicalBootDrive = CreateFile(sVolumeDevice, GENERIC_READ + GENERIC_WRITE, FILE_SHARE_READ + FILE_SHARE_WRITE, 0&, OPEN_EXISTING, 0&, 0&)

    ' Find out information about this volume.
    nRet = DeviceIoControlNoInput(hLogicalBootDrive, IOCTL_VOLUME_GET_VOLUME_DISK_EXTENTS, 0&, 0&, uVolumeDiskExtents, LenB(uVolumeDiskExtents), nBytesReturned, 0&)

    If nRet = 0 Then
    ' Something went wrong. Return error value.
        GetBootPhysicalDrive = -1
    Else
    ' This is the physical disk number.
        GetBootPhysicalDrive = uVolumeDiskExtents.Extents(1).DiskNumber
    End If

    ' Close volume.
    CloseHandle hLogicalBootDrive

End Function

Public Function GetDiskSerialNumber() As String
    Dim wmiObject As Object
    Dim obj As Object

    Set wmiObject = GetObject("WinMgmts:")
    For Each obj In wmiObject.InstancesOf("Win32_PhysicalMedia")
        If obj.Tag = "\\.\PHYSICALDRIVE" + CStr(GetBootPhysicalDrive) Then GetDiskSerialNumber = obj.Tag + " : " + obj.SerialNumber
    Next obj
End Function 
```

非常感谢[Mark Bertenshaw](https://stackoverflow.com/users/127742/mark-bertenshaw)。

# ios - Tabbarcontroller 行为 - iOS

> ID：11861319
> 
> 赞同：0
> 
> 时间：2012-08-08T09:14:52.367
> 
> 标签：ios, xcode, uitabbarcontroller, ibaction

![流动](../Images/860639fda8b6b80325cfe30d5045fbf5.png) 我正在尝试从 newViewController 按钮到达 IBAction 上的选项卡栏 C。但是当我到达时，标签栏控制器显示 A 的视图而不是 C 的视图。如果使用

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];

UIViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"MyInitialViewController"];
[vc presentModalViewController:navController animated:NO]; 
```

我最终创建了没有标签栏选项和导航栏的 C 标签栏视图 ![C](../Images/c7a286216f1026f207e196d9adc5c170.png)

任何帮助将不胜感激！谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:10:58.260

如果您使用故事板并希望保留导航栏和标签栏，则应使用

```
[self.navigationController performSegueWithIdentifier:@"MyInitialViewController" sender:self]; 
```

而不是使用模态演示

# python - Python 类方法抛出 AttributeError

> ID：11861321
> 
> 赞同：4
> 
> 时间：2012-08-08T09:14:54.570
> 
> 标签：python, exception, flask, class-method, attributeerror

我在获取类方法以在 Flask 中运行时遇到问题。

在`models/User.py`：

```
from mongoengine import *

class User(Document):
  first_name = StringField()
  last_name = StringField()
  ...

  def __init__(self, arg1, arg2, ...):
    self.first_name = arg1
    self.last_name = arg2
    ...

  @classmethod
  def create(self, arg1, arg2, ...):
    #do some things like salting and hashing passwords...
    user = self(arg1, arg2, ...)
    user.save()
    return user 
```

在主应用程序 python 文件中：

```
from models import User
...
def func():
  ...

  #Throws "AttributeError: type object 'User' has no attribute 'create'"
  user = User.create(arg1, arg2, ...) 
```

我不应该在不实例化 User 对象的情况下调用 User 类的 create 吗？我正在使用 Python 2.7.2，并且我还尝试了 using 的非装饰器语法`create = classmethod(create)`，但这不起作用。提前致谢！

编辑：我发现了一个问题：模型文件夹不包含`__init__.py`文件，所以它不是一个模块，所以`from models import User`实际上并没有导入我想要的文件。它没有给我以前的错误，因为我曾经`models.py`在与应用程序python脚本相同的目录中有一个模块，但是在删除它之后我从未删除过相应的`.pyc`文件。现在，我得到的是错误`AttributeError: 'module' object has no attribute 'create'`而不是以前的错误，但我确定它现在正在导入正确的文件。

EDIT2：已解决。然后我将导入更改为`from models.User import User`它现在正在使用该方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:45:25.100

这个问题是双重的：

1.  该`User.py`文件在`models/`文件夹中，这意味着我的导入实际上是在文件中寻找`User`类，该类`models.py`不再存在但仍然被导入而没有错误，因为该`models.pyc`文件仍然存在
2.  在目录中导入时导入不正确。它应该是`from models.User import User`，只要`models/`文件夹是一个模块，所以我需要做的就是`touch models/__init__.py`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:20:00.873

```
>>> class foo(object):
...     def __init__(self):
...             pass
...     @classmethod
...     def classmethod(cls):
...             return 0
...
>>> a = foo()
>>> a.classmethod()
0
>>> 
```

# asp.net - 表示层中的数据集

> ID：11861327
> 
> 赞同：0
> 
> 时间：2012-08-08T09:15:13.547
> 
> 标签：asp.net, user-interface, dataset

我正在`asp.net`使用分层架构制作网站。我可以`Data-Set`在表示层中实现和使用对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:33:33.017

数据访问层和业务逻辑层更适合它。要获得更多信息，请尝试[创建 DAL](http://www.asp.net/web-forms/tutorials/data-access/introduction/creating-a-data-access-layer-cs)和[创建 BLL](http://www.asp.net/web-forms/tutorials/data-access/introduction/creating-a-business-logic-layer-cs)。

显然你可以使用它，但是分层架构就是关于分离层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:55:55.487

为了与数据库交互，您应该使用数据访问层。

你可以看看数据访问层的目的。

[数据访问层的目的是什么？](https://stackoverflow.com/questions/59942/what-is-the-purpose-of-a-data-access-layer)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T11:51:02.853

我简单的分层架构可能有：

在 DAL 中填充的数据集

“BLL”中的业务实体/域对象是从 DAL 数据集中填充的

表示对象是非常简单的数据传输对象，可以匹配所呈现的任何内容。

显然还有比这更多的东西。

Pluralsight 刚刚[发布了一门](http://blog.pluralsight.com/2012/08/03/video-peeling-the-onion-architecture-of-an-n-tier-application/)值得您花时间学习的课程？

# javascript - 谷歌地球插件——如何检查具有 ID 的元素是否已经存在？

> ID：11861332
> 
> 赞同：0
> 
> 时间：2012-08-08T09:15:28.420
> 
> 标签：javascript, google-earth, google-earth-plugin

我通过以下方式创建和分配样式（例如 C#）：

```
// ge — IGEPlugin instance
var placemark1 = ge.createPlacemark("placemark1");
var style1 = ge.createStyle("style1");
style1.getLineStyle().setWidth(2);
placemark1.setStyleSelector(style1);
// ... add placemark to ge features... 
```

如何检查具有 ID 的元素是否`style1`已存在于*GE*中？如果我打电话`ge.createPlacemark("placemark1")`，第二次我会得到一个`COM`错误。

我无法获取元素`ge.getElementById("style1")`——它总是返回 null。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:09:38.813

有几件事，首先有一个访问器`getComputedStyle`，它允许您将对象样式属性作为 KMLStyle 对象获取。

```
dynamic placemarkStyle = placemark1.getComputedStyle();
string id = placemarkStyle.getId(); 
```

也许您可以根据需要使用此方法来引用样式对象...

您还可以通过将类型名称作为字符串传递给`getElementsByType`. 像这样的东西应该可以工作（尽管它未经测试......）

```
public bool DoesStyleExist(string id)
{
  var styles = ge.getElementsByType('style');
  int l = styles.getLength();

  if(l == 0) 
  {
    // no styles
    return false;
  }

  for (var i = 0; i < l; ++i) {
    var style = style.item(i);
    var styleid = style.getId();
    if(id == styleid)
    {
      // matching style id
      return true;
    }
  }

  // no match
  return false;
} 
```

**编辑**

根据您的评论，您的代码中一定有错误 - 我已经测试了以下内容，它按预期工作。

```
 // create the placemark
  placemark = ge.createPlacemark('pm1');
  var point = ge.createPoint('');
  point.setLatitude(37);
  point.setLongitude(-122);
  placemark.setGeometry(point);

  // add the placemark to the earth DOM
  ge.getFeatures().appendChild(placemark);

  var styleMap = ge.createStyleMap('');

  // Create normal style for style map
  var normalStyle = ge.createStyle('style1');
  var normalIcon = ge.createIcon('icon1');
  normalIcon.setHref('http://maps.google.com/mapfiles/kml/shapes/triangle.png');
  normalStyle.getIconStyle().setIcon(normalIcon);

  // Create highlight style for style map
  var highlightStyle = ge.createStyle('style2');
  var highlightIcon = ge.createIcon('icon2');
  highlightIcon.setHref('http://maps.google.com/mapfiles/kml/shapes/square.png');
  highlightStyle.getIconStyle().setIcon(highlightIcon);

  styleMap.setNormalStyle(normalStyle);
  styleMap.setHighlightStyle(highlightStyle);

  // Apply stylemap to a placemark
  placemark.setStyleSelector(styleMap);

  alert(ge.getElementById('pm1')); // object 
  alert(ge.getElementById('style1')); // object 
  alert(ge.getElementById('style2')); // object

  DoesStyleExist('style1'); // true
  DoesStyleExist('style2'); // true
  DoesStyleExist('foo'); // false 
```

# javascript - 具有垂直滚动和水平页面的表格

> ID：11861333
> 
> 赞同：0
> 
> 时间：2012-08-08T09:15:34.303
> 
> 标签：javascript, jquery, html, css

我有一个表格，在左列和顶行中有重要信息，因此这些应该始终可见，然后我希望在底部有页面用于水平“滚动”和垂直滚动的正常滚动。

是否有支持此功能的 Jquery 脚本？

它看起来像这样 ![在此处输入图像描述](../Images/715c162968c67a8c55de8aaa37b69233.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:46:44.300

如果您的要求是显示基本数据，那么您可以使用可用于此目的的 Jquery 插件之一，例如[Datatables](http://datatables.net/release-datatables/extras/FixedColumns/index.html)。它们非常灵活，您可以使用它们的额外功能之一来完成大部分基本操作。

如果您的要求不仅仅是显示数据。它具有复杂的编辑、每列的自定义功能和其他内容，然后您可以更好地使用自定义实现。我们已经构建了这样一个表格，它集成了自动填充、日历和其他完全自定义的功能，方法是在表格旁边有一个 div 浮动并使用 Jquery 来控制滚动。左侧的标题和冻结列通常是单独的表/ div 本身，并且只是根据使用 Jquery 的表对齐。它们适用于 IE 8+ 和其他浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:29:03.243

这行得通吗？（我用的是 CSS，不是 jQuery，抱歉）

[http://jsfiddle.net/mAnQp/](http://jsfiddle.net/mAnQp/)

更新：添加页面 [http://jsfiddle.net/mAnQp/3/](http://jsfiddle.net/mAnQp/3/)

# opengl-es - Opengl es 渲染到纹理出现颠倒

> ID：11861336
> 
> 赞同：1
> 
> 时间：2012-08-08T09:15:50.690
> 
> 标签：opengl-es

使用帧缓冲区 渲染纹理时出现倒置，这里是顶点和纹理坐标。顺便说一句，在不创建帧缓冲区的情况下渲染可以正确地渲染纹理

```
private final float[] mVerticesData =
    { 
            -1f, 1f, 0.0f, // Position 0
            0.0f, 0.0f, // TexCoord 0
            -1f, -1f, 0.0f, // Position 1
            0.0f, 1.0f, // TexCoord 1
            1f, -1f, 0.0f, // Position 2
            1.0f, 1.0f, // TexCoord 2
            1f, 1f, 0.0f, // Position 3
            1.0f, 0.0f // TexCoord 3
    }; 
```

任何帮助请...谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T11:48:36.840

将 2D 纹理图像上传到 OpenGL 时，它期望数据从下到上指定，即使通常图像在内存中是从上到下的。您似乎已反转纹理坐标以解决此问题。

您应该在将纹理数据上传到 OpenGL 之前翻转纹理数据并保持纹理坐标不变。如果这样做，相同的纹理坐标适用于图像和 FBO 纹理。

所以解决方案是在调用 GLUtils.texImage2D 之前翻转位图并将顶点写为

```
private final float[] mVerticesData =
    { 
        -1f, 1f, 0.0f, // Position 0
        0.0f, 1.0f, // TexCoord 0
        -1f, -1f, 0.0f, // Position 1
        0.0f, 0.0f, // TexCoord 1
        1f, -1f, 0.0f, // Position 2
        1.0f, 0.0f, // TexCoord 2
        1f, 1f, 0.0f, // Position 3
        1.0f, 1.0f // TexCoord 3
    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:55:57.947

> 顺便说一句，在不创建帧缓冲区的情况下渲染可以正确地渲染纹理

我认为实际上并没有。将所有变换设置为与顶点坐标匹配的标识和纹理坐标，即 S=X，T=Y，OpenGL 假定纹理数据的原点位于左下方（立方体贴图除外，它们是不同的野兽）。帧缓冲区颜色附件，在您的情况下，您的纹理，同意该约定。

您的纹理 T 坐标与 Y 顶点坐标反平行，这意味着在所有身份转换设置的情况下，您将其“倒置”。

但是，大多数图像文件格式都假定原点位于左上角，如果您将此类数据按原样上传到 OpenGL 纹理，则会添加另一个翻转，并且与纹理坐标翻转一起取消。

所以很有可能，你的常规纹理代码路径被“翻转”了。

# haskell - 带有 Database.Persist 的 SQL 索引（Yesod Web 框架）

> ID：11861339
> 
> 赞同：4
> 
> 时间：2012-08-08T09:16:04.653
> 
> 标签：haskell, yesod

Database.Persist 似乎与索引无关。这没关系，我可以创建自己的索引，但是在添加/删除字段时，通用 SQL 迁移似乎会创建和删除表。这也具有删除索引的效果。

是否有推荐的方法来确保它们在数据库迁移中幸存下来？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T15:21:10.247

只有 SQLite3 后端应该删除表，PostgreSQL 和 MySQL 都提供了足够强大的 ALTER TABLE 命令来避免这种情况。所以索引应该只对 SQLite3 丢失。如果您在生产中使用 SQLite3（不推荐），您有两种选择：

1.  禁用自动迁移并自己处理架构。
2.  在迁移运行后添加一些代码来替换任何缺失的索引。

# ios - 如何在 iOS 中播放 NSData 音频或视频？

> ID：11861341
> 
> 赞同：3
> 
> 时间：2012-08-08T09:16:12.607
> 
> 标签：ios, audio, video, uiwebview, nsdata

我需要在 iOS 中呈现音频或视频内容。

不幸的是，我没有收到作为 URL 的音频/视频，而是`NSData`与内容类型（MIME 类型）一样。

仅在使用时似乎`UIWebView`无法正确播放音频/视频数据（感谢Apple提供的出色控制器）`loadData:MIMEType:textEncodingName:baseURL:``loadRequest:`

所以我想将 NSData 保存到一个临时文件，但我没有文件扩展名（只是 MIME 类型）。

实现这一目标的最佳方法是什么？也许使用其他一些 iOS 控件实现音频/视频播放器？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:25:15.647

制作一个将 MIME 类型映射到合适的扩展名的方法

```
-(NSString *)getExtenstionFromMimeType:(NSString *)mimeType
{

   if ( [mimeType isEqualToString:@""video/mp4"] )
       return @"mp4"; 
   else if  ( ..... ) 
         and so on 

} 
```

您还可以使用 MPVideoPlayerController 播放音频视频，但您还需要将源媒体作为 url 或本地文件路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T10:47:06.267

如果有人想知道这里是解决方案：

您需要使用 在名为 MobileCoreServices 的框架中声明的[UTType 函数。](http://developer.apple.com/library/ios/#documentation/MobileCoreServices/Reference/UTTypeRef/Reference/reference.html)基本思路是从 MIME 类型中获取 UTI，然后从 UTI 中获取扩展名：

MIME 类型 --> UTI --> 文件扩展名。

可以在[此处](http://ddeville.me/2011/12/mime-to-UTI-cocoa/)找到 MIME-Type 到 UTI 转换的示例。

# c# - 使用 .Net.Mail 类发送电子邮件后，图像在电子邮件中不可见

> ID：11861343
> 
> 赞同：1
> 
> 时间：2012-08-08T09:16:18.297
> 
> 标签：c#, .net, vb.net, email

我需要将 HTML 内容作为电子邮件发送，如果 HTML 有任何图像..它不会在电子邮件中显示 uo。

我无法将图像附加到邮件图像将在 HTML 中，我从 CMS 获得

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T13:19:31.213

您是否将图像添加为链接资源？以下是如何执行此操作的示例：http: [//www.codeproject.com/Articles/34467/Sending-Email-Using-Embedded-Images](http://www.codeproject.com/Articles/34467/Sending-Email-Using-Embedded-Images)

```
using System.Net.Mail;

string htmlBody = "<html><body><h1>Picture</h1><br><img src=\"cid:Pic1\"></body></html>";
AlternateView avHtml = AlternateView.CreateAlternateViewFromString
    (htmlBody, null, MediaTypeNames.Text.Html);

// Create a LinkedResource object for each embedded image
LinkedResource pic1 = new LinkedResource("pic.jpg", MediaTypeNames.Image.Jpeg);
pic1.ContentId = "Pic1";
avHtml.LinkedResources.Add(pic1);

// Add the alternate views instead of using MailMessage.Body
MailMessage m = new MailMessage();
m.AlternateViews.Add(avHtml);

// Address and send the message
m.From = new MailAddress("rizwan@dotnetplayer.com", "Rizwan Qureshi");
m.To.Add(new MailAddress("shayan@dotnetplayer.com", "Shayan Qureshi"));
m.Subject = "A picture using alternate views";
SmtpClient client = new SmtpClient("smtp.dotnetplayer.com");
client.Send(m); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:14:45.410

在所有不能附加图像的 HTML 电子邮件中，所有图像都必须放在服务器中，并在 HTML 中以完整路径引用，例如“http://www.yourdomain.com/images/imagename.ext”。外壳很重要，它是图像不出现的最常见原因。

# c# - 有没有办法在索引处插入 SelectList 而不创建新列表？

> ID：11861344
> 
> 赞同：1
> 
> 时间：2012-08-08T09:16:23.843
> 
> 标签：c#, asp.net-mvc, selectlist

有没有办法在不创建新列表的情况下在 SelectList 的开头插入 SelectListItem。如果不是必要的话，不喜欢迭代列表的想法！

编辑：需要澄清，MySelectList 属于对象 SelectList，而不是 List 或 Enumerate。（否则就是ez）

类似的东西：（这不起作用）

```
SelectList MySelectList = new SelectList(SomeList, "Value", "Text");

MySelectList.Insert(0, new SelectListItem() { Text = "", Value = "" }); 
```

代替：

```
SelectList MySelectList = new SelectList(SomeList, "Value", "Text");

MySelectList.ToList().Insert(0, new SelectListItem() { Text = "", Value = "" });
MySelectedList = new SelectList(MySelectList, "Value", "Text"); 
```

# c# - Visual Studio 性能分析 WOW64 错误

> ID：11861346
> 
> 赞同：0
> 
> 时间：2012-08-08T09:16:47.020
> 
> 标签：c#, wcf, visual-studio, visual-studio-2012

我使用 .NET Framework 4.5 版在 Windows 7 64 位操作系统上运行 Visual Studio 2012 RC1，并尝试对 Windows Communication Foundation (WCF) 项目进行性能分析，但它给了我错误：

`WOW64 processes is not supported by this version of the profiling tools.`

使这项工作的方法是什么？我记得在 VS 2010 中分析得很好，有时会出现这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:28:57.477

你有没有安装过VS2005，因为那是有道理的；因为分析给出了完全相同的错误。

MSDN：

> 如果您尝试在具有 64 位操作系统的计算机上以采样模式使用 Visual Studio Team System 2005 分析工具，您将看到以下错误：
> 
> 此版本的分析工具不支持分析 WOW64 进程。

如果不是 VS2005 问题，那么很可能您在构建或测试过程中设置了一些“优化”，导致它无法与 64 位进程交互。

可以查看的链接：http: [//msdn.microsoft.com/en-us/library/ms952405.aspx](http://msdn.microsoft.com/en-us/library/ms952405.aspx)

它的语义是 Profiler 是 32 位的，进程是 64 位的。不知道这怎么可能。

来自论坛的额外阅读，用户在 Vs2010 中有类似的问题：http: [//social.msdn.microsoft.com/Forums/en-US/vstsprofiler/thread/cba7ee2f-661b-4026-b5c8-d4b27e7e7055/](http://social.msdn.microsoft.com/Forums/en-US/vstsprofiler/thread/cba7ee2f-661b-4026-b5c8-d4b27e7e7055/)

# asp.net - 将特定控件删除到一个母版页上

> ID：11861347
> 
> 赞同：1
> 
> 时间：2012-08-08T09:16:56.957
> 
> 标签：asp.net, master-pages, inline

我在其中一个母版页上放置了一个锚链接，该链接在使用该母版页的地方可见。但是在其中一个页面中，我不希望锚链接可见。另外，我被指示不要使用内联标签。

可以做些什么来从其中一个母版页中删除锚标记？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:24:30.013

我假设您的`Anchor`控制权是`runat='server'`，您可以在要删除的页面上执行此操作`Anchor`

```
System.Web.UI.HtmlControls.HtmlGenericControl Anchor =
                             this.Master.FindControl("AnchorID") as 
                             System.Web.UI.HtmlControls.HtmlGenericControl;
if (Anchor != null)
     this.Master.Controls.Remove(Anchor); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:25:27.983

在您使用母版页的页面上，您可以像这样检索母版

```
MasterPageClassName mp = (MasterPageClassName)this.Master; 
```

您可以在母版页类中添加公共方法以显示隐藏锚链接（您可以在此处访问母版页上的所有私有控件）

```
mp.ToggleLink() 
```

此 ToggleLink 方法实际上将根据您的业务需求显示/隐藏您的锚按钮/控件。

# jquery - jquery - FF中的自定义绑定事件错误

> ID：11861351
> 
> 赞同：2
> 
> 时间：2012-08-08T09:17:08.783
> 
> 标签：jquery, bind, custom-event

早上，我在 firfox 中出现了一个错误：

> TypeError: handlers.push 不是函数 handlers.push(handleObj);

该错误是由绑定到自定义事件引起的

```
_submit.bind('watch.changed', function () {
    var $ob = $(this);
    if ($ob.attr('disabled') && $ob.attr('disabled') === 'disabled') {
        $tmp.attr('disabled', 'disabled').addClass('disabled');
    } else {
        $tmp.removeAttr('disabled').removeClass('disabled');
    }
}); 
```

有没有人来过这个或知道解决它的方法？

问候

# python - Twisted 在连接关闭之前不发送任何内容

> ID：11861361
> 
> 赞同：1
> 
> 时间：2012-08-08T09:17:48.670
> 
> 标签：python, networking, twisted

问题是，在您关闭连接之前，Twisted 似乎不会发送任何内容。该问题在我的客户端和 Firefox 上都可见（服务器未发送）。

这是完整的代码。

```
#!/usr/bin/env python
#-*- coding: utf-8 -*-
from twisted.internet.protocol import Protocol,Factory
from twisted.internet.endpoints import TCP4ServerEndpoint,TCP4ClientEndpoint
from twisted.internet import reactor
import thread
class echoProtocol(Protocol):
    def dataReceived(self,data):
        self.transport.write(data+"\n - Server")

class echoFactory(Factory):
    def buildProtocol(self,addr):
        print addr.host
        return echoProtocol()

class clientProtocol(Protocol):
    def sendMessage(self,message):
        self.transport.write(message)
    def dataReceived(self,data):
        print data

class clientFactory(Factory):
    def buildProtocol(self,addr):
        return clientProtocol()

def messageLoop(p):
    while 1 :
        text=raw_input("")
        p.sendMessage(text)

def connectedProtocol(p):
    thread.start_new_thread(messageLoop, p)

if __name__ == '__main__':
    choice=raw_input("Server?[y/n]")
    if choice.lower()=="y":
        TCP4ServerEndpoint(reactor,44554).listen(echoFactory())
        reactor.run()
    else:
        TCP4ClientEndpoint(reactor,"127.0.0.1",44554).connect(clientFactory()).addCallback(connectedProtocol)
        reactor.run() 
```

如何让 Twisted 在关闭连接之前实际发送一些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:22:15.710

在`ctrl-c`你的循环回调中插入显示了问题。您的协议卡在“写入”模式下，`dataReceived`直到离开回调后才能进入该部分。

您是否有任何理由不能遵循默认的[回显客户端示例](http://twistedmatrix.com/documents/current/core/examples/#auto2)？你也没有在`reactor.stop`任何地方打电话。

主要问题是对延迟概念的误解。您在 while 循环内阻塞，这意味着您永远不会到达`dataReceived`. 但是如果不循环，怎么继续发送数据呢？您需要*在当前 deferred 中添加另一个 deferred*。

请注意，在[单机客户端的代码中，](http://twistedmatrix.com/documents/current/core/howto/clients.html)回调如何`gotProtocol`将另一条消息添加到反应器以供稍后调用，然后添加关闭回调。您需要进行递归回调设置。

这是您的代码，设置为根据需要递归链接附加回调。它还具有 errback 链的关闭功能。如果输入了类似的内容，您应该添加一些代码来检查内容`raw_input`并附加关闭回调`quit`。否则它会永远循环，除非用户用`ctrl-c`.

```
#!/usr/bin/env python
#-*- coding: utf-8 -*-
from twisted.internet.protocol import Protocol,Factory
from twisted.internet.endpoints import TCP4ServerEndpoint,TCP4ClientEndpoint
from twisted.internet import reactor
import thread

class echoProtocol(Protocol):
    def dataReceived(self,data):
        self.transport.write(data+"\n - Server")

class echoFactory(Factory):
    def buildProtocol(self,addr):
        print addr.host
        return echoProtocol()

class clientProtocol(Protocol):
    def sendMessage(self,message):
        self.transport.write(message)
    def dataReceived(self,data):
        print data

class clientFactory(Factory):
    def buildProtocol(self,addr):
        return clientProtocol()

def messageLoop(p):
    text=raw_input("")
    p.sendMessage(text)
    reactor.callLater(1, messageLoop, p)

def connectedProtocol(p):
    thread.start_new_thread(messageLoop, p)

def shutdown(ignored):
    reactor.stop()

if __name__ == '__main__':
    choice=raw_input("Server?[y/n]")
    if choice.lower()=="y":
        TCP4ServerEndpoint(reactor,44554).listen(echoFactory())
        reactor.run()
    else:
        TCP4ClientEndpoint(reactor,"127.0.0.1",44554).connect(clientFactory()).addCallback(messageLoop).addErrback(shutdown)
        reactor.run() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:33:12.070

我怀疑您正在阅读线路但没有发送线路。在这种情况下，读取会阻塞，直到获得换行符或 EOS。如果您从不发送 EOL，您将在关闭套接字时收到一条大线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T13:15:17.027

是什么`connectedProtocol`？您的示例中没有使用它，但它会在您的实际应用程序中唤起令人讨厌的线程相关错误的图像。

除此之外，`writeSomeData`是错误的调用方法。试试`write`吧。

# ruby - 在运行 bundle exec irb 时，需要访问仅限机器的 gem

> ID：11861364
> 
> 赞同：1
> 
> 时间：2012-08-08T09:17:59.440
> 
> 标签：ruby, gem, bundler, irb

如何让 bundle exec irb 了解系统宝石？

* * *

要加载项目，我们使用 bundle exec irb。为了让我在 irb 的生活更轻松，我计划使用 irb_rocket（带有 wirble 和 ruby​​-terminfo）。

仅加载普通 irb 时，它按预期工作。但是，当使用 bundle exec irb 时，它可以（显然）找不到我的系统宝石。

我没有更改 gemfile 的选项，除非我能以某种方式使其仅适用于我的机器。

如果它值得任何东西；os x，git 中的源代码控制，rbenv 中的 ruby​​ 版本控制。

当需要 gem 的完整路径时，irb_rocket 再次需要 terminfo ，然后在`require 'terminfo.so'`. 在本地更改 gem 并不是我真正想做的，但我想它会起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:46:05.103

您可以将[Pry](https://github.com/pry/pry/)而不是 IRB 与[pry-debundle](https://github.com/ConradIrwin/pry-debundle)一起使用。如果这是一个 Rails 项目，您只需将[pry-rails](https://github.com/rweng/pry-rails)添加到您的项目`Gemfile`中，以便将其用作 Rails 控制台。

# php - 使用 php-ajax 在更改另一个下拉列表时更新下拉列表

> ID：11861365
> 
> 赞同：1
> 
> 时间：2012-08-08T09:18:03.793
> 
> 标签：php, ajax

我想在更改国家下拉列表时更改城市下拉列表的值。好吧，当我选择国家中的值时，现在卡在了点上，它说变量 $r 未定义。 **页面：index.php**

```
<form method="post" action="" name="form1">
<table width="60%" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td width="150">Country</td>
    <td  width="150"><select name="country" onChange="getCity('findcity.php?country='+this.value)">
    <option value="">Select Country</option>
    <option value="1">USA</option>
    <option value="2">Canada</option>
        </select></td>
  </tr>
  <tr style="">
    <td>City</td>
    <td ><div id="citydiv"><select name="city">
    <option>Select City</option>
        </select></div></td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
</table> 
```

**页面：findcity.php**

```
<?php 
$country=$_REQUEST['country'];
$link = mysql_connect('localhost', 'root', ''); 
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db('db_ajax');
$query="select city from city where countryid=$country";
$result=mysql_query($query);
?>
<select name="city">

<? while($r=mysql_fetch_array($result)) { 

?>
<option value=""><?php echo $r['city'];?></option>
<? } ?>
</select> 
```

**这是脚本**

```
<script>
function getXMLHTTP() { //function to return the xml http object
        var xmlhttp=false;  
        try{
            xmlhttp=new XMLHttpRequest();
        }
        catch(e)    {       
            try{            
                xmlhttp= new ActiveXObject("Microsoft.XMLHTTP");
            }
            catch(e){
                try{
                xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
                }
                catch(e1){
                    xmlhttp=false;
                }
            }
        }

        return xmlhttp;
    }

    function getCity(strURL) {      

        var req = getXMLHTTP();

        if (req) {

            req.onreadystatechange = function() {
                if (req.readyState == 4) {
                    // only if "OK"
                    if (req.status == 200) {                        
                        document.getElementById('citydiv').innerHTML=req.responseText;                      
                    } else {
                        alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                    }
                }               
            }           
            req.open("GET", strURL, true);
            req.send(null);
        }

    }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:13:57.393

将您的代码更改为..

```
<?php
  while($r=mysql_fetch_array($result))
  { 

      echo '<option value="">'.$r['city'].'</option>';
   } 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:47:28.933

您错过了在“。”附近编写“php”`<?(write down php here) while($r=mysql_fetch_array($result)) {`并执行一些调试，例如检查您是否获得国家/地区的 id，而不是检查查询是否返回正确的结果或在浏览器上打印查询并在数据库上运行该查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:25:47.850

尝试使用`mysql_fetch_assoc`而不是`mysql_fetch_array`

# c# - 当面板在 WPF 中可见时向面板添加动画

> ID：11861368
> 
> 赞同：0
> 
> 时间：2012-08-08T09:18:08.677
> 
> 标签：c#, wpf, visual-studio-2010

我在 WPF 中创建一个应用程序，窗口有一个 3 行的主网格。第 3 行有 3 个按钮，单击每个按钮时，第 2 网格行中会显示一个面板。我通过设置面板的可见性选项来实现这一点。但是，现在我想在面板变得可见时添加效果/动画。我不知道从哪里开始，所以请帮忙。

我的 xaml 代码与此类似

```
<Window>
   <Grid>
      <!-- 3row definitions -->
      <Grid Grid.Row="0"> </Grid>
      <Grid Name="panel1" Grid.row="1" Visibility="Hidden"></Grid>
      <Grid Name="panel2" Grid.row="1" Visibility="Hidden"></Grid>
      <Grid Name="panel3" Grid.row="1" Visibility="Hidden"></Grid>
      <Grid Grid.Row="2"></Grid>
   </Grid>
 </Windows> 
```

更改可见性的 Xaml.cs 代码与此类似

```
 private void Image_MouseLeftButtonDown(object sender, System.Windows.Input.MouseButtonEventArgs e)
    {
        panel1.Visibility = System.Windows.Visibility.Visible;
        panel2.Visibility = System.Windows.Visibility.Hidden;
        panel3.Visibility = System.Windows.Visibility.Hidden;
    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-08T09:26:14.403

这可以使用表达式工作室来完成，在表达式混合中打开您的 wpf 项目，您可以在其中向您的 wpf 控件添加动画，您还需要在应用程序启动时启动和停止动画，

[http://www.youtube.com/watch?v=JpGvl1TayAQ](http://www.youtube.com/watch?v=JpGvl1TayAQ)

这是一个视频教程，您可以通过谷歌搜索获得更多教程，

# objective-c - 检测数组中不同字符串的数量

> ID：11861371
> 
> 赞同：0
> 
> 时间：2012-08-08T09:18:22.077
> 
> 标签：objective-c, ios, uitableview

**基本上我需要一个函数来计算数组中不同值的数量，还有一个函数来给我数组中每个不同值的实际计数。**

我有一个包含变化数量的值的数组：

数组=（这个，这个，这个，这个，是，是，是，是，是，它，它，它，它，它）

我想制作一个列表视图，每个部分都应该包含不同的类别，例如：

```
This
- Element 1
- Element 2
- ...
Is
- Element 1
- ...
It
- Element 1
- ... 
```

所以我需要数字**3**来表示我的部分数量和每个部分的*子元素数量。*

我怎样才能做到这一点？有没有比为每个部分计算索引的 for 语句更好的方法？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T09:24:12.707

将每个数组元素添加到`NSCountedSet`. 然后`count`集合的 是您添加的不同对象的数量，您可以`countForObject:`用来询问集合每个不同对象有多少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:24:02.050

首先，制作你的数组的副本，以便使用。

1.  要计算不同的值，请从复制的数组中删除所有重复项，copyArray.count 会告诉您您需要什么。（自行搜索如何删除重复项）。
2.  要获得每个组的实际计数：您已经复制了没有重复的数组，因此在复制的数组中创建一个 for 循环：

    `for (NSString *stringer in copiedArrayWithoutDuplicates){`

    ```
     int counter = 0;
       for(NSString *iniStr in initialArrayWithDuplicates){
          if([stringer isEqualToString: iniStr]){
              counter++;
          }
       }
       NSLog(@"string %@ was detected %i times", stringer, counter);
    } 
    ```

# iphone - 防止旋转的 CGAffineTransform 被视图自动旋转破坏

> ID：11861372
> 
> 赞同：1
> 
> 时间：2012-08-08T09:18:42.977
> 
> 标签：iphone, ios, ipad, ios5

我有一个 UIImageView 的子类，其中包含一些我用来对其自身应用变换的手势识别器。我在平移或缩放方面没有问题，但是当设备本身旋转时，旋转的变换会导致问题。基本上每次设备旋转时都会产生缩放图像的效果......

我想这是有道理的，一切的旋转可能会导致旋转变换出现问题，但有没有人知道这种行为的任何方法？最好是可以在 UIImageView 子类中实现的东西？我需要其他同级视图来自动调整大小，因此我无法在父视图中禁用“自动调整子视图”。

如果有帮助，这是负责创建旋转变换的代码：

```
- (void)setUpRotation
{
    UIRotationGestureRecognizer *newRecognizer = [[UIRotationGestureRecognizer alloc] initWithTarget:self action:@selector(handleRotationGesture)];
    newRecognizer.delegate = self;
    self.rotationRecognizer = newRecognizer;
    [self addGestureRecognizer:self.rotationRecognizer];
    [newRecognizer release];
    self.userInteractionEnabled = YES;
}

- (void)handleRotationGesture
{
    // Initial state
    if(self.rotationRecognizer.state == UIGestureRecognizerStateEnded)
    {        
        lastRotation = 0.0;
        return;
    }

    CGFloat rotation = 0.0 - (lastRotation - self.rotationRecognizer.rotation);    
    CGAffineTransform currentTransform = self.transform;
    self.transform  = CGAffineTransformRotate(currentTransform,rotation);  

    lastRotation = self.rotationRecognizer.rotation; 
} 
```

这是在 iOS 5.0 上。

# java - JTable - 触发列数据更改事件

> ID：11861373
> 
> 赞同：2
> 
> 时间：2012-08-08T09:18:53.793
> 
> 标签：java, swing, events, jtable

我想触发一个事件，该事件表示给定的列值已全部更改，即在 X 列的某处，某些值已更改。我该怎么做，因为所有事件都涉及单元格、行或整个数据表......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T09:31:56.520

查看`AbstractTableModel`，看起来像`TableModelEvent`明确地构造一个可能会成功：

```
model.fireTableChanged(new TableModelEvent(model, 0, lastRow, columnIndex,
                       TableModelEvent.UPDATE)); 
```

另请参阅 javadoc `TableModelEvent`：

```
/**
 * Depending on the parameters used in the constructors, the TableModelevent
 * can be used to specify the following types of changes: <p>
 *
 * <pre>
 * TableModelEvent(source);              //  The data, ie. all rows changed 
 * TableModelEvent(source, HEADER_ROW);  //  Structure change, reallocate TableColumns
 * TableModelEvent(source, 1);           //  Row 1 changed
 * TableModelEvent(source, 3, 6);        //  Rows 3 to 6 inclusive changed
 * TableModelEvent(source, 2, 2, 6);     //  Cell at (2, 6) changed
 * TableModelEvent(source, 3, 6, ALL_COLUMNS, INSERT); // Rows (3, 6) were inserted
 * TableModelEvent(source, 3, 6, ALL_COLUMNS, DELETE); // Rows (3, 6) were deleted
 * </pre>
 *
 * It is possible to use other combinations of the parameters, not all of them 
 * are meaningful. (...) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:38:27.843

就我个人而言，如果只是为了指示表需要刷新，我会触发一个事件来说明整个表已更改。

# javascript - 电子邮件验证不接受只有两个字符的域

> ID：11861374
> 
> 赞同：1
> 
> 时间：2012-08-08T09:18:54.997
> 
> 标签：javascript, validation

我正在使用电子邮件验证脚本，一切都很好，除了用户尝试在域中输入只有两个字符的地址，例如 test@me.com 或 temp@ip.com

验证然后触发一个错误，我已经查看但无法看到此行为的目标位置，代码如下......

```
function validate_youremail()
{
    var isvalidemailflag = 0;
    if(jQuery("#property_mail_email").val() == '')
    {
        isvalidemailflag = 1;
    }else
    if(jQuery("#property_mail_email").val() != '')
    {
        var a = jQuery("#property_mail_email").val();
        var filter = /^[a-zA-Z0-9]+[a-zA-Z0-9_.-]+[a-zA-Z0-9_-]+@[a-zA-Z0-9]+[a-zA-Z0-9.-]+[a-zA-Z0-9]+.[a-z]{2,4}$/;
        //if it's valid email
        if(filter.test(a)){
            isvalidemailflag = 0;
        }else{
            isvalidemailflag = 1;   
        }
    }
    if(isvalidemailflag)
    {
        youremail.addClass("error");
        youremailInfo.text("Please Enter valid Email Address");
        youremailInfo.addClass("message_error2");
        return false;
    }else
    {
        youremail.removeClass("error");
        youremailInfo.text("");
        youremailInfo.removeClass("message_error");
        return true;
    } 
```

它可能直直地盯着我看，但这是漫长的一天:) 谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:23:41.767

```
@[a-zA-Z0-9]+[a-zA-Z0-9.-]+[a-zA-Z0-9]+ 
```

表示“@”，然后是“一个或多个这些字符”，然后是“一个或多个这些字符以及点和连字符”，然后是“一个或多个这些字符”。

这使它成为“至少三个字符”。

您可能希望将（该片段的）中间部分更改为零或更多（即`*`，而不是`+`）。

表达仍然是破碎的。跳出来的问题是它拒绝`+`在`@`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:27:02.897

符合 RFC2822 标准的电子邮件验证。

模式：`/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/g`

资料来源：[RegExr](http://gskinner.com/RegExr/?2rhq7)

请注意，RFC2822 标准不允许在电子邮件地址中使用大写字符，但您可以根据自己的目的轻松调整它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T09:40:04.890

我建议您使用另一个正则表达式。

这个正则表达式是从[用 C 语言编写的 PHP 源代码中提取的。](http://svn.php.net/viewvc/php/php-src/trunk/ext/filter/logical_filters.c?revision=321634&view=markup)

```
/^(?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){255,})(?!(?:(?:\x22?\x5C[\x00-\x7E]\x22?)|(?:\x22?[^\x5C\x22]\x22?)){65,}@)(?:(?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01-\x08\x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F]))*\x22))(?:\.(?:(?:[\x21\x23-\x27\x2A\x2B\x2D\x2F-\x39\x3D\x3F\x5E-\x7E]+)|(?:\x22(?:[\x01-\x08\x0B\x0C\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|(?:\x5C[\x00-\x7F]))*\x22)))*@(?:(?:(?!.*[^.]{64,})(?:(?:(?:xn--)?[a-z0-9]+(?:-+[a-z0-9]+)*\.){1,126}){1,}(?:(?:[a-z][a-z0-9]*)|(?:(?:xn--)[a-z0-9]+))(?:-+[a-z0-9]+)*)|(?:\[(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){7})|(?:(?!(?:.*[a-f0-9][:\]]){7,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?)))|(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){5}:)|(?:(?!(?:.*[a-f0-9]:){5,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3}:)?)))?(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))(?:\.(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))){3}))\]))$/i
.test('temp@ip.com'); 
```

# c++ - 为什么 trunc(1) 输出为 0？

> ID：11861377
> 
> 赞同：3
> 
> 时间：2012-08-08T09:19:01.750
> 
> 标签：c++, double, decimal-point, truncation

有人可以解释一下为什么在 c++ 中会发生这样的事情：

```
double tmp;
...                    // I do some operations with tmp 
                       // after which it has to be equal to one
cout << tmp;           // prints 1
cout << trunc(tmp);    // prints 0
cout << trunc(tmp*10); // prints 9 
```

我用它来分隔数字的小数部分，例如，如果我有：5.010 ...我想有0.010 ..所以我使用：

```
double remainder = tmp - trunc(tmp); 
```

* * *

我正在发布整个代码....地板的建议不起作用

 `````
short getPrecision(double num, short maxPrecision) {

  // Retrieve only part right of decimal point
  double tmp  = fabs(num - trunc(num));
  double remainder = tmp;

  // Count number of decimal places
  int c = 0;
  while (remainder > 0 && c < maxPrecision) {
    tmp *= 10;
    remainder = tmp - trunc(tmp);
    c++;
  }
  return c;
} 
````  `例如，当我使用 5.1 运行此函数时，remanider 为 0 而不是 1

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T09:21:51.407

经过一些计算，它必须是一个？好吧，它也可以`0.99999999999999999`。浮点运算并不精确，您应该始终考虑到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:25:00.950

请参阅[http://en.cppreference.com/w/cpp/numeric/math/trunc](http://en.cppreference.com/w/cpp/numeric/math/trunc)上的图片。那里的图表解释了与 ing 1 的不一致`trunc`。可能同样适用于 10

这应该可以帮助您实现所需的目标：

```
double remainder = tmp - floor(tmp); 
`````

# hibernate - 在 JPA/Hibernate 中引用已删除的实体

> ID：11861382
> 
> 赞同：3
> 
> 时间：2012-08-08T09:19:26.143
> 
> 标签：hibernate, jpa

我有以下设置：有各种实体（`Projects`, `Tests`, `Users`），然后有`TestReports`. `TestReports`引用其他实体以及文件系统中的一些额外数据。

生成报告并且永远不会删除（出于审计目的）。但是，可以删除其他实体。当报告引用某些已删除的实体时，这会导致这种情况。从业务的角度来看，这没问题，报告可以只显示`[deleted id123]`而不是删除的实体标签，这很好。但是，`javax.persistence.EntityNotFoundException`当我尝试加载引用已删除实体的报告时，我得到了。

在这种情况下，有没有办法告诉 Hibernate/JPA 只创建带有 ID 和一些`isDeleted`标志的幻像对象？

在 Hibernate Envers 文档中，我发现它们在遍历修订历史时支持类似的东西，但我还没有找到在“正常”实体中使用它的方法。

**来自 Envers 文档：**

> 第二个参数 selectDeletedEntities 指定是否应将删除实体的修订包含在结果中。如果是，则此类实体将具有修订类型 DEL 和所有字段，除了 id，null。

我知道通过`deleted`在所有对象上引入标志并使用 if 进行*软*删除而不是实际删除的解决方法。但这增加了额外的开销，我想避免。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T09:24:52.527

我不确定这是否是您正在寻找的。`@NotFound(action=NotFoundAction.IGNORE)`您可以通过使用注释告诉 hibernate 在字段上设置 null 而不是抛出 EntityNotFoundException 。没有太多关于它的文档，你可以在[这里](http://docs.jboss.org/ejb3/app-server/HibernateAnnotations/reference/en/html_single/index.html#d0e2064)找到如何使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:41:06.653

我有类似的情况，我这样做了：
我从不删除这些东西。相反，我`deletion time`为那些被删除的设置了一个。加载数据时，对象被成功获取，但是当我检查它们时，`deletion time`我显示`[deleted]`.

但是，这是我想出的解决方案，您可能会找到另一个解决方案。

**更新**
您也可以尝试这个：
捕获`javax.persistence.EntityNotFoundException`并手动将您喜欢的任何值插入该字段。在这种情况下，您可以看到哪些被删除，哪些实际上没有参考。

# android - 谷歌云消息 (GCM) 问题

> ID：11861385
> 
> 赞同：2
> 
> 时间：2012-08-08T09:19:36.023
> 
> 标签：android

我正在为客户端和服务器使用 Google Cloud Messaging (GCM) 示例代码。我已经使用 Apache Tomcat 成功设置了服务器，并且还按照教程中提供的步骤创建了 Android 应用程序 (apk)。

在 Apache Tomcat 上部署 war 文件后，我可以从模拟器注册。我为 Tomcat 服务器提供了一个公共 IP，并且能够使用 GPRS 从移动浏览器查看“注册屏幕”。

我已按照 GCM 教程中提供的所有步骤进行操作。

GCM 的示例代码有问题吗？

当我单击按钮将消息发送到注册设备时，出现以下异常：

> com.google.android.gcm.server.InvalidRequestException：HTTP 状态代码：401 com.google.android.gcm.server.Sender.sendNoRetry(Sender.java:177) com.google.android.gcm.server.Sender.send (Sender.java:121) com.google.android.gcm.demo.server.SendAllMessagesServlet.doPost(SendAllMessagesServlet.java:82) javax.servlet.http.HttpServlet.service(HttpServlet.java:637) javax.servlet.http .HttpServlet.service(HttpServlet.java:717)

我浏览了一些类似的帖子，但没有找到任何关于这个问题的确切解决方案。任何建议/提示都会有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-11T11:26:09.823

Google 最近已将其 api 控制台更新为 Google Cloud Console。简而言之，您需要创建一个 Android 应用程序并选择通过 Web 服务器访问 API。[这项服务有一个详细的指南](https://github.com/PushAppsService/PushAppsSDK/tree/master/Android/Guides)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T02:37:19.347

我在使用 tomcat 作为服务器时遇到了同样的问题，为了修复它我修改了这个文件

`WebContent/WEB-INF/classes/api.key`用从 google api 控制台中提取的 API 密钥替换内容。

我希望它有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T18:59:01.053

That's the Not Authorized return code. Your server app is not authenticated to the GCM server. Did you generate yourself an API key in the developer console?

# javascript - 我如何浏览json？

> ID：11861389
> 
> 赞同：0
> 
> 时间：2012-08-08T09:19:48.333
> 
> 标签：javascript, json

我在一个对象中有一些 JSON，但我似乎可以返回 json 样本的值，如下所示。

```
{
"rootLayout":"main",
"layoutDescriptions":[
{
  "id":"main",
  "container" : {
    "type":"Tabs",
    "content":[
      {
        "type":"Panel",
        "label":"Simple Address",
        "layout":"SimpleForm",
        "comment":"This form is simple name value pairs",
        "content":[
          { "type":"label", "constraint":"newline", "text":"Org Name" },
          { "type":"text", "property":"propOne" },
          { "type":"label", "constraint":"newline", "text":"Address" },
          { "type":"text", "property":"addrLine1" },
          { "type":"text", "property":"addrLine2" },
          { "type":"text", "property":"addrLine3" },
          { "type":"label", "constraint":"newline", "text":"Postcode" },
          { "type":"text", "property":"postcode" }
        ]
      }, 
```

我正在尝试使用返回 rootLayout

```
 obj[0].rootLayout.id 
```

这也不起作用我想知道如何访问内容元素。

我是 json 的新手，我认为我已经陷入了困境。我在互联网上找不到任何好的读物，谁能推荐一些。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-08T09:22:54.017

## 一些解释，因为您似乎不了解 JSON

它并不像人们想象的那么复杂。它实际上表示 javascript 对象，就好像它们是由代码编写的一样。

因此，如果您将 JSON 写为：

```
{
    id : 100,
    name: "Yeah baby"
} 
```

这意味着您的对象有两个属性：`id`和`name`。第一个是数字，第二个是字符串。

在您的示例中，您可以看到您的对象有两个属性：`rootLayout`和`layoutDescriptions`. 第一个`jsonObj.rootLayout`是字符串，将返回`"main"`，第二个是数组：

```
layoutDescriptions: [ {...}, {...},... ] 
```

显然是一个对象数组，因为数组元素用花括号括起来。您在示例中提供的这个特定数组元素对象具有自己的属性，就像我为顶级对象所解释的那样：（`id`字符串）、`container`（另一个对象，因为它再次包含在花括号中）等等......

我希望你对 JSON 表示法有更多的了解。

## 那么让我们来回答你的问题

您可以`id`通过以下方式访问它：

```
jsonObj.layoutDescriptions[0].id 
```

并进一步获取您的内容对象：

```
var contentObjects = jsonObj.layoutDescriptions[0].container.content[0].content;
for(var i = 0; i < contentObjects.length, i++)
{
    // assign this inner object to a variable for simpler property access
    var contObj = contentObjects[i];

    // do with this object whatever you need to and access properties as
    // contObj.type
    // contObj.property
    // contObj.text
    // contObj.constraint
} 
```

请注意，这只会枚举第一个内容对象的内容对象......如果这有意义......那么看看你的 JSON 对象，你会发现你有嵌套的内容对象数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T09:21:58.053

该对象是一个对象，而不是一个数组，并且它没有一个名为 的属性`0`。

得到`rootLayout`：

```
obj.rootLayout 
```

但是，`rootLayout`是一个字符串，而不是一个对象。它没有`id`. `layoutDescriptions`数组中的第一项确实如此。

```
obj.layoutDescriptions[0].id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T09:25:56.697

你想得到一个等于`layoutDescriptions`吗？`id``obj.rootLayout`

```
var targetLayout = {};
for(var i = 0; i < obj.layoutDescriptions.length; i++) {
    if(obj.layoutDescriptions[i].id == obj.rootLayout) {
        targetLayout = obj.layoutDescriptions[i]; break; 
    }
}

console.log(targetLayout); 
```

# c# - 检查OU是否受到意外删除的保护

> ID：11861395
> 
> 赞同：2
> 
> 时间：2012-08-08T09:20:06.743
> 
> 标签：c#, active-directory, ldap, ou

我正在与 OU 合作，只是想找出答案

有什么方法可以检查 OU 是否受到意外删除的保护？

我用谷歌搜索但找不到任何解决方案。

我正在寻找 C# 中的解决方案而不是脚本。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T19:41:09.540

您需要打开对象（`ntSecurityDescriptor`属性）上的 ACL 并查找拒绝所有人删除。该类`ActiveDirectorySecurity`为您提供了一个托管包装器 - [http://msdn.microsoft.com/en-us/library/system.directoryservices.activedirectorysecurity.aspx](http://msdn.microsoft.com/en-us/library/system.directoryservices.activedirectorysecurity.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-09T18:37:27.137

要保护 AD 对象，需要两个 ACE。一种是“拒绝删除+DeleteTree”，必须在要保护的对象上设置，第二种“拒绝DeleteChild”必须在父对象上设置。如果要删除保护，则只需删除对象上的 ACE。父对象上的 ACE 必须保留，否则同一 OU 中的其他对象将不再受保护！

这是我的代码，它运行良好：

```
 //using System.Security.Principal
    //using System.DirectoryServices;

    public static void SetProtectADObject(DirectoryEntry ent, bool Protect = true)
    {
        //get parent object
        var parentEnt = new DirectoryEntry(ent.Parent.Path);

        //refresh objects
        ent.RefreshCache();
        parentEnt.RefreshCache();

        if (Protect)
        {
            #region Protect
            try
            {
                IdentityReference everyOneAccount = new NTAccount("Everyone").Translate(typeof(SecurityIdentifier)); //S-1-1-0
                var objAce = new ActiveDirectoryAccessRule(everyOneAccount, ActiveDirectoryRights.Delete | ActiveDirectoryRights.DeleteTree, AccessControlType.Deny);
                var parentAce = new ActiveDirectoryAccessRule(everyOneAccount, ActiveDirectoryRights.DeleteChild, AccessControlType.Deny);

                //check if ace present on object
                var objACL = ent.ObjectSecurity;
                bool acePresent = false;
                foreach (ActiveDirectoryAccessRule ace in objACL.GetAccessRules(true, false, typeof(NTAccount)))
                {
                    if (ace.IdentityReference.Value == "Everyone")
                    {
                        if (ace.ActiveDirectoryRights == (ActiveDirectoryRights.DeleteTree | ActiveDirectoryRights.Delete)) { acePresent = true; break; }
                        else if (ace.ActiveDirectoryRights == (ActiveDirectoryRights.DeleteChild | ActiveDirectoryRights.DeleteTree | ActiveDirectoryRights.Delete)) { acePresent = true; break; }
                    }
                }

                if (!acePresent)
                {
                    //set ace to object
                    objACL.AddAccessRule(objAce);

                    //commit changes
                    ent.CommitChanges();
                }

                //check if ace present on parent object
                var parentACL = parentEnt.ObjectSecurity;
                bool parentAcePresent = false;
                foreach (ActiveDirectoryAccessRule ace in parentACL.GetAccessRules(true, false, typeof(NTAccount)))
                {
                    if (ace.IdentityReference.Value == "Everyone")
                    {
                        if (ace.ActiveDirectoryRights == (ActiveDirectoryRights.DeleteChild)) { parentAcePresent = true; break; }
                        else if (ace.ActiveDirectoryRights == (ActiveDirectoryRights.DeleteChild | ActiveDirectoryRights.DeleteTree | ActiveDirectoryRights.Delete)) { parentAcePresent = true; break; }
                    }
                }

                if (!parentAcePresent)
                {
                    //set ace to parent object
                    parentACL.AddAccessRule(parentAce);

                    //commit changes
                    parentEnt.CommitChanges();
                }
            }
            catch (Exception ex)
            {
                throw new Exception(string.Format("Error protecting object {0}", ent.Path), ex);
            }
            #endregion
        }
        else
        {
            #region Unprotect
            //to remove the protection we remove only the ACE from the object, not from the parent. 
            //The ACE on the parent must be in place because otherwise other objects on the same level will not protected anymore!

            try
            {
                IdentityReference everyOneAccount = new NTAccount("Everyone").Translate(typeof(SecurityIdentifier)); //S - 1 - 1 - 0
                var objAce = new ActiveDirectoryAccessRule(everyOneAccount, ActiveDirectoryRights.Delete | ActiveDirectoryRights.DeleteTree, AccessControlType.Deny);

                //check if ace present on object
                var objACL = ent.ObjectSecurity;
                bool acePresent = false;
                foreach (ActiveDirectoryAccessRule ace in objACL.GetAccessRules(true, false, typeof(NTAccount)))
                {
                    if (ace.IdentityReference.Value == "Everyone")
                    {
                        if (ace.ActiveDirectoryRights == (ActiveDirectoryRights.DeleteTree | ActiveDirectoryRights.Delete)) { acePresent = true; break; }
                        else if (ace.ActiveDirectoryRights == (ActiveDirectoryRights.DeleteChild | ActiveDirectoryRights.DeleteTree | ActiveDirectoryRights.Delete)) { acePresent = true; break; }
                    }
                }

                //set ace to object
                if (acePresent)
                {
                    ent.ObjectSecurity.RemoveAccessRule(objAce);
                    ent.CommitChanges();
                }
            }
            catch (Exception ex)
            {
                throw new Exception(string.Format("Error unprotecting object {0}", ent.Path), ex);
            }
            #endregion 
        }
    }

    public static bool IsADObjectProtected(DirectoryEntry ent)
    {
        //get parent object
        var parentEnt = new DirectoryEntry(ent.Parent.Path);

        //refresh objects
        ent.RefreshCache();
        parentEnt.RefreshCache();

        //get current ACLs
        ActiveDirectorySecurity acl = ent.ObjectSecurity;
        ActiveDirectorySecurity parentAcl = ent.Parent.ObjectSecurity;
        AuthorizationRuleCollection rules = acl.GetAccessRules(true, true, typeof(NTAccount));
        AuthorizationRuleCollection parentRules = parentAcl.GetAccessRules(true, false, typeof(NTAccount));

        //check object acl
        bool acePresent = false;
        foreach (ActiveDirectoryAccessRule ace in rules)
        {
            Console.WriteLine(ace.AccessControlType.ToString());
            if (ace.AccessControlType == AccessControlType.Deny)
            {
                if (ace.ActiveDirectoryRights == (ActiveDirectoryRights.DeleteTree | ActiveDirectoryRights.Delete)) { acePresent = true; break; }
                else if (ace.ActiveDirectoryRights == (ActiveDirectoryRights.DeleteChild | ActiveDirectoryRights.DeleteTree | ActiveDirectoryRights.Delete)) { acePresent = true; break; }
            }
        }

        //check parent acl
        bool parentAcePresent = false;
        foreach (ActiveDirectoryAccessRule ace in parentRules)
        {
            if (ace.AccessControlType == AccessControlType.Deny)
            {
                if (ace.ActiveDirectoryRights == (ActiveDirectoryRights.DeleteChild)) { parentAcePresent = true; break; }
                else if (ace.ActiveDirectoryRights == (ActiveDirectoryRights.DeleteChild | ActiveDirectoryRights.DeleteTree | ActiveDirectoryRights.Delete)) { parentAcePresent = true; break; }
            }
        }

        return parentAcePresent && acePresent;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:35:11.003

检查 systemFlags 属性。[ADS_SYSTEMFLAG_ENUM](http://msdn.microsoft.com/en-us/library/aa772297.aspx)上的 MS 页面有 C++ 示例，它应该很容易适应 C#。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-15T13:09:10.973

您可以在 powershell 中使用活动目录 cmdlet Get-ADObject -Filter * -Properties ProtectedFromAccidentalDeletion | 执行简单的一行。其中 {$_.ProtectedFromAccidentalDeletion -eq $true}

稍后，如果您想更改它-将其通过管道传输到 | 设置 ADObject -ProtectedFromAccidentalDeletion:$false

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-08T23:44:33.447

这是获取 OU 并查找 ACL 的代码片段，该 ACL 确定它是否受到意外删除的保护。
这是使用 [System.DirectoryServices]、[System.Security.AccessControl] 和 [System.Security.Principal] 命名空间

```
bool? protected = null;
DirectoryEntry de = new DirectoryEntry("LDAP://OU=TestOu,DC=Test,DC=Local", "Username", "Password");
ActiveDirectorySecurity ads = de.ObjectSecurity;
AuthorizationRuleCollection rules = ads.GetAccessRules(true, true, typeof(NTAccount);
foreach (ActiveDirectoryAccessRule rule in rules)
    if (rule.AccessControlType == AccessControlType.Deny)
        if (rule.ActiveDirectoryRights == (ActiveDirectoryRights.DeleteChild | ActiveDirectoryRights.DeleteTree | ActiveDirectoryRights.Delete))
            protected = true;
        else
            protected = false; 
```

我针对我的一个根 OU 运行了这个，应用了超过 150 个 ACL，它在一两秒内返回了答案。

# android - ListView 的自定义适配器

> ID：11861396
> 
> 赞同：2
> 
> 时间：2012-08-08T09:20:10.050
> 
> 标签：android, listview, android-arrayadapter, custom-adapter

我正在尝试制作一个自定义的 ListView，它应该显示一个便笺标题以及创建便笺的时间和日期，每个都在单独的 TextView 中，而每个便笺标题也由存储在数据库中的颜色值着色。所以我为它创建了一个自定义适配器：

```
public class NoteAdapter extends ArrayAdapter<Note> {

public NoteAdapter(Context context, int resource, int textViewResourceId, List<Note> objects) {
    super(context, resource, textViewResourceId, objects);
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // Creating the row
    View row = super.getView(position, convertView, parent);

    // Changing the text of time and date
    ((TextView)row.findViewById(R.id.noteTitle)).setText(getItem(position).getTitle());
    ((TextView)row.findViewById(R.id.noteTime)).setText(getItem(position).getTime());
    ((TextView)row.findViewById(R.id.noteDate)).setText(getItem(position).getDate());

    ((TextView)row.findViewById(R.id.noteTitle)).setTextColor(Color.parseColor(getItem(position).getColor()));

    // Returning the row
    return row;
    }
} 
```

在主要活动中，这就是我实现它的方式：

```
...
NoteAdapter adapter;
NotesManager manager;
private Note nNoteToDelete;
ArrayList<Note> lstAllNotes;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Setting onClickListener for the "Add note" button when the activity starts
    findViewById(R.id.btnAddNewNote).setOnClickListener(addNewNote);

    // INSTANTIATING

    // Manager - to manage all the DB manipulations
    manager = new NotesManager(this);

    // Retrieving all the notes in the DB
    lstAllNotes = manager.getAllNotes();

    // Setting the ArrayAdapter, to display retrieved data in the ListView
    //adapter = new ArrayAdapter<Note>(this, R.layout.note, lstAllNotes);
    adapter = new NoteAdapter(this, R.layout.main, R.id.noteTitle, lstAllNotes);

    // Setting the ListAdapter
    setListAdapter(adapter);

    // Registering for a single click action for each item in the ListView
    getListView().setOnItemClickListener(editNote);

    // Registering for a long click, which will pop up a context menu
    registerForContextMenu(getListView());

}
... 
```

但是当我测试应用程序时，它立即崩溃。我在 LogCat 中收到这些错误：

```
08-08 08:59:52.291: E/AndroidRuntime(21268): FATAL EXCEPTION: main
08-08 08:59:52.291: E/AndroidRuntime(21268): java.lang.NullPointerException
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:394)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.widget.ArrayAdapter.getView(ArrayAdapter.java:362)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at com.notepad.NoteAdapter.getView(NoteAdapter.java:24)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.widget.AbsListView.obtainView(AbsListView.java:2267)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.widget.ListView.onMeasure(ListView.java:1156)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.view.View.measure(View.java:15172)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.view.View.measure(View.java:15172)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.view.View.measure(View.java:15172)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:833)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.view.View.measure(View.java:15172)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2148)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.view.View.measure(View.java:15172)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1848)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1100)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1273)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:998)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4212)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.view.Choreographer.doCallbacks(Choreographer.java:555)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.view.Choreographer.doFrame(Choreographer.java:525)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.os.Handler.handleCallback(Handler.java:615)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.os.Handler.dispatchMessage(Handler.java:92)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.os.Looper.loop(Looper.java:137)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at android.app.ActivityThread.main(ActivityThread.java:4745)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at java.lang.reflect.Method.invokeNative(Native Method)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at java.lang.reflect.Method.invoke(Method.java:511)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-08 08:59:52.291: E/AndroidRuntime(21268):    at dalvik.system.NativeStart.main(Native Method) 
```

我在这里想念什么？为什么它不断崩溃，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T09:28:02.857

您没有在`getView()`自定义适配器中膨胀视图

你正在做的事情是不对的

```
// Creating the row
View row = super.getView(position, convertView, parent); 
```

尝试做这样的事情，其中​​ row.xml 将是布局文件夹中的布局文件

```
LayoutInflater inflater=LayoutInflater.from(context);
View row=inflater.inflate(R.layout.row, parent, false); 
```

其中 context 将是在构造函数中初始化的 Context 类型的局部变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:39:51.053

试试这个：

```
public class NoteAdapter extends ArrayAdapter<Note> {

    LayoutInflater mInflater;
    List<Note> list;
    public NoteAdapter(Context context, int resource, int textViewResourceId, List<Note> objects) {
        super(context, resource, textViewResourceId, objects);
        mInflater=LayoutInflater.from(context);
        list=objects;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        final ViewHolder holder;

        if(convertView==null){
             convertView=mInflater.inflate(R.layout.listitem_layout,null);// R.layout.listitem_layout is your custom layout file
             holder=new ViewHolder();

             holder.title=(TextView)convertView.findViewById(R.id.noteTitle);
             holder.time=(TextView)convertView.findViewById(R.id.noteTime);
             holder.date=(TextView)convertView.findViewById(R.id.noteDate);
             convertView.setTag(holder);
        }
        else{
             holder=(ViewHolder)convertView.getTag();
        }

        Note note=list.get(position);

        holder.title.setText(note.getTitle());
        holder.title.setTextColor(Color.parseColor(note.getColor()));
        holder.time.setText(note.getTime());
        holder.date.setText(note.getDate());      

        return convertView;
    }
    class ViewHolder{
        TextView title;
        TextView time;
        TextView date;
    }
} 
```

# git - 将 hg 书签转换为命名分支

> ID：11861401
> 
> 赞同：2
> 
> 时间：2012-08-08T09:20:45.753
> 
> 标签：git, mercurial, branch

从 git 迁移到 mercurial 之后（不是我个人的偏好 :) 我遇到了一个问题：`hg convert`将 git 分支转换为书签。有没有办法将书签转换为命名的 hg 分支？它甚至是否需要，为什么？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T11:42:51.480

Git 分支和 hg 书签本质上是相同的东西（对单个变更集的引用），这就是它们以这种方式转换的原因。书签的行为与 git 分支几乎相同——它们在您提交时前进等（没有跟踪分支的概念，但您可以使用[remotebranches](http://mercurial.selenic.com/wiki/RemoteBranchesExtension)扩展获得类似的结果）。许多人在 Mercurial 中根本不使用命名分支——他们使用书签和/或匿名分支。

Hg 命名的分支非常不同——名字是历史不可磨灭的一部分。不可能（自动）将 git 分支转换为名为 hg 的分支，因为 git 分支仅命名分支的尖端 - 您无法知道哪些其他变更集应该是分支的一部分。

如果你真的想从现在开始使用命名分支（我强烈鼓励它 - 我个人更喜欢在单独的命名分支中完成每项任务）我建议在每个当前书签处启动一个具有相同名称的命名分支（然后您可以删除书签）。

您可以手动完成并将变更集移植或移植到新的命名分支中，但这样做会删除与 git 变更集的关联 - 如果您使用的是 hg-git 而不是转换，这很重要。尽管嫁接*可能会*保持一些关联，因为它是使用 hg 合并工具实现的。

# python - 如果仅用于原始 sql，SQL Alchemy 的性能？

> ID：11861402
> 
> 赞同：3
> 
> 时间：2012-08-08T09:20:45.573
> 
> 标签：python, django, sqlalchemy, mysql-python

我打算在 Django 项目中使用非常简单的原始 SQL。例子：

`SELECT name,doc_id,doc_content,creation_date from doc_table where uid = 'xxx' limit 1 ;`

主要要求：

*   易于执行 SQL 查询和获取数据 - 例如。如果我使用 MySQLdb ，我不想通过游标重复进行查询，然后处理元组以获取所需数据的字典。

*   防止 SQL 注入和正确的数据转义。

有两种选择，

a) 使用 SQLAlchemy ，即使仅用于原始 SQL。

b) 使用在 MySQLdb 上编写的包装器，或者编写一个。

我倾向于 SQLAlchemy，因为我已经阅读了很多关于它的好东西。

与更简单的 MySQLdb 包装器相比，如果我打算仅将它用于简单的原始 SQL，那么使用 SQLAlchemy 是否会产生任何显着的性能开销，例如 CPU 使用率、内存使用率。SQLAlchemy 的所有其他电池都没有多大用处。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T07:17:05.903

*根据要求，发表评论作为答案：*

请参阅[为什么使用 sqlite 插入 SQLAlchemy 比直接使用 sqlite3 慢 25 倍的答案？](https://stackoverflow.com/a/11769768/99594). 尽管不是`mysql`，但 Mike 发布了一个用于性能测试的示例代码，您可以使用 mySQL 将其应用于您的案例并扩展为包括所有 CRUD 操作。从那里发布的结果中，我得出结论，仅使用[SQLAlchemy Core](http://docs.sqlalchemy.org/en/rel_0_7/core/tutorial.html)时不应该有任何显着的性能下降。

另请查看如果仅用于原始 sql 查询，是否仍推荐 SQLAlchemy 的另一个 SO 答案[？](https://stackoverflow.com/a/11543303/99594)

# c# - 可以将活动的 Microsoft Word 窗口转换为 WPF 窗口吗？

> ID：11861406
> 
> 赞同：3
> 
> 时间：2012-08-08T09:20:51.740
> 
> 标签：c#, wpf, ms-word, office-interop

我创建了一个 Microsoft Word 2010 vsto 插件，当用户单击功能区按钮时，它会显示许多自定义 Wpf 窗口对话框。

我遇到的问题是，如果您单击任务栏中的 Word 图标，自定义对话框会在 Word 实例后面消失。

经过一番谷歌搜索后，似乎可以通过设置我的窗口的 Owner 属性来解决这个问题，但我正在努力获取 Word 应用程序的 Window 实例。

我在下面附上了相关代码，有什么建议吗？

```
using WordNS = Microsoft.Office.Interop.Word;

Window wrapperWindow = new Window();
wrapperWindow.ResizeMode = ResizeMode.NoResize;
wrapperWindow.WindowStartupLocation = System.Windows.WindowStartupLocation.CenterScreen;
wrapperWindow.ShowInTaskbar = false;
wrapperWindow.Content = dialogViewModel.View;
wrapperWindow.Title = dialogViewModel.Title;
wrapperWindow.SizeToContent = SizeToContent.WidthAndHeight;

WordNS.Application app = (WordNS.Application)Marshal.GetActiveObject("Word.Application");
wrapperWindow.Owner = (Window)app.ActiveWindow; 
```

![将 ActiveWindow 转换为 Window 时出现无效的转换异常](../Images/b3b77dfcd68b7d76e906362b9463df4a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:53:50.823

例外清楚地表明您的问题的答案是否定的。

如果`Microsoft.Office.Interop.Word`提供了任何方法来获取 Word 主窗口的窗口句柄 (HWND)（或者如果您通过一些 Win32 调用获取该句柄），您可能会尝试通过[WindowInteropHelper.Owner](http://msdn.microsoft.com/en-us/library/system.windows.interop.windowinterophelper.owner.aspx)属性设置窗口的所有者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T06:14:08.693

使用 Clemens 的建议走这`WindowInteropHelper`条路线，下面是完成此工作的完整代码：

1）在类中的任何位置定义此指针：

```
[DllImport("user32.dll")]
private static extern IntPtr GetForegroundWindow(); 
```

2）在窗口声明代码中添加如下代码：

```
 Window wrapperWindow = new Window();
        //Set all the relevant window properties

        //Set the owner of the window to the Word application
        IntPtr wordWindow = GetForegroundWindow();
        WindowInteropHelper wih = new WindowInteropHelper(wrapperWindow);
        wih.Owner = wordWindow; 
```

# ruby - 为什么我的哈希值打印为字符串？

> ID：11861412
> 
> 赞同：5
> 
> 时间：2012-08-08T09:21:11.480
> 
> 标签：ruby

这很奇怪，但我不知道要配置什么或在哪里配置。我正在尝试打印一个简单的哈希值，如下所示：

```
#!/usr/bin/ruby

names = Hash.new
names[1] = "Jane"
names[2] = "Thomas"

puts names 
```

我希望输出是

```
{1=>"Jane", 2=>"Thomas"} 
```

当我得到

```
1Jane2Thomas 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T09:24:23.183

你应该使用检查。

```
puts names.inspect
#=> {1=>"Jane", 2=>"Thomas"} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T14:09:54.877

*puts*方法在其参数上调用to_s**并**打印结果。然而*p*方法在其参数上调用**检查**并打印结果：

```
{1=>"Jane", 2=>"Thomas"}.to_s
#=> '1Jane2Thomas'

{1=>"Jane", 2=>"Thomas"}.inspect
#=> '{1=>"Jane", 2=>"Thomas"}' 
```

因此，要获得漂亮的 Hash 打印输出，请使用

```
puts {1=>"Jane", 2=>"Thomas"}.inspect 
```

或者

```
p {1=>"Jane", 2=>"Thomas"} 
```

# java - OSGi 中的 OpenJPA 找不到 MySQL JDBC 连接器包

> ID：11861414
> 
> 赞同：7
> 
> 时间：2012-08-08T09:21:17.770
> 
> 标签：java, jdbc, osgi, openjpa, aries

我目前在 Felix (v4.0.3) 上开发一个 OSGi 项目。我需要使用 JPA，所以我安装了 Apache Aries JPA 包。我还安装了 OpenJPA，我需要它来使用 MySQL 连接器包连接到 MySQL 数据库。不幸的是它不起作用，OpenJPA 说它找不到 MySQL JDBC 类，我无法弄清楚是什么坏了，也许我做错了什么。我将在下面解释我精确安装的内容以及 persistence.xml 文件和我得到的实际异常。

这是我安装的 Apache Aries 捆绑包的列表：

1.  org.apache.aries.jpa.api-0.3.jar
2.  org.apache.aries.jpa.container.context-0.3.jar
3.  org.apache.aries.jpa.container-0.3.jar
4.  org.apache.aries.util-0.4.jar

然后我安装了那些 Apache Aries JPA 包的依赖项。我从 Springsource 下载了它们：

1.  com.springsource.javax.transaction-1.1.0.jar
2.  com.springsource.org.apache.log4j-1.2.16.jar
3.  com.springsource.slf4j.api-1.6.1.jar
4.  com.springsource.slf4j.log4j-1.6.1.jar
5.  javax.persistence_2.0.4.v201112161009.jar（这个来自 EclipseLink，以防万一）

我还安装了 OpenJPA 及其所有依赖项。**我在apache-openjpa-2.2.0**下载文件夹的**lib**文件夹中找到了 bundle **2 到 5** (commons-*) 。[我在这里](http://www.jarvana.com/jarvana/archive-details/org/apache/servicemix/bundles/org.apache.servicemix.bundles.serp/1.13.1_4/org.apache.servicemix.bundles.serp-1.13.1_4.jar)下载了 Serp ，因为在 lib 文件夹中找到的 jar 不是 OSGi 包。最后我在 Springsource 中找到了最后两个包（#7 和 #8）：

 ****1.  openjpa-2.2.0.jar
2.  commons-collections-3.2.1.jar
3.  commons-dbcp-1.4.jar
4.  commons-lang-2.4.jar
5.  commons-pool-1.5.4.jar
6.  org.apache.servicemix.bundles.serp-1.13.1_4.jar
7.  com.springsource.javax.servlet-2.5.0.jar
8.  com.springsource.org.objectweb.asm-3.2.0.jar

一旦我最终安装了 OpenJPA，我仍然需要 MySQL JDBC 驱动程序包，我也从 Springsource 存储库中获得了它以及它的 commons-logging 依赖项：

1.  com.springsource.com.mysql.jdbc-5.1.6.jar
2.  com.springsource.org.apache.commons.logging-1.1.1.jar

现在，安装的捆绑包列表变得非常大。我说我安装了 OpenJPA，但这只是因为我不知道如何将任何其他提供程序与 Aries 一起使用。我最初想使用 EclipseLink，但显然 Apache Aries 没有将其检测为提供程序，并且根据[此博客](http://jaxenter.com/tutorial-using-jpa-in-an-osgi-environment-36661-3.html)，您必须制作另一个包含您自己的激活器的捆绑包，以便 Aries 注意到 EclipseLink。我试过了，但没有用，所以我改用 OpenJPA。

所以现在我有两个问题：

*   如何让 OpenJPA 注意到我的 MySQL Bundle？

或者：

*   如何让 Apache Aries 注意到 EclipseLink ？

这是我使用的 persistence.xml 文件：

```
<persistence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
version="2.0" xmlns="http://java.sun.com/xml/ns/persistence">
<persistence-unit name="userManager.model" transaction-type="RESOURCE_LOCAL">
    <provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>
    <class>org.project.dao.entity.UserEntity</class>
    <properties>
        <property name="openjpa.ConnectionDriverName" value="com.mysql.jdbc.Driver" />
        <property name="openjpa.ConnectionURL" value="jdbc:mysql://localhost:3306/usermanager?autoReconnect=true" />
        <property name="openjpa.ConnectionUserName" value="root" />
        <property name="openjpa.ConnectionPassword" value="root" />            
    </properties>
</persistence-unit>
</persistence> 
```

执行我的 DAO 类的以下构造函数时发生错误：

```
 @PersistenceContext(unitName="userManager.model")
private EntityManager em;
private EntityManagerFactory emf;

public UserDAOBean() {
    em = emf.createEntityManager();
} 
```

这是我在 OpenJPA 找不到 MySQL 时遇到的错误。当然值得一提的是 URL 和用户名/密码都可以工作：

```
<openjpa-2.2.0-r422266:1244990 nonfatal general error> org.apache.openjpa.persistence.PersistenceException: There were errors initializing your configuration: <openjpa-2.2.0-r422266:1244990 fatal user error> org.apache.openjpa.util.UserException: A connection could not be obtained for driver class "com.mysql.jdbc.Driver" and URL "jdbc:mysql://localhost:3306/usermanager?autoReconnect=true".  You may have specified an invalid URL.
at org.apache.openjpa.jdbc.schema.DataSourceFactory.newConnectException(DataSourceFactory.java:255)
at org.apache.openjpa.jdbc.schema.DataSourceFactory.newDataSource(DataSourceFactory.java:123)
at org.apache.openjpa.jdbc.conf.JDBCConfigurationImpl.createConnectionFactory(JDBCConfigurationImpl.java:844)
at org.apache.openjpa.jdbc.conf.JDBCConfigurationImpl.getConnectionFactory(JDBCConfigurationImpl.java:732)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.openjpa.lib.conf.ConfigurationImpl.instantiateAll(ConfigurationImpl.java:295)
at org.apache.openjpa.conf.OpenJPAConfigurationImpl.instantiateAll(OpenJPAConfigurationImpl.java:1671)
at org.apache.openjpa.kernel.AbstractBrokerFactory.makeReadOnly(AbstractBrokerFactory.java:646)
at org.apache.openjpa.kernel.AbstractBrokerFactory.newBroker(AbstractBrokerFactory.java:203)
at org.apache.openjpa.kernel.DelegatingBrokerFactory.newBroker(DelegatingBrokerFactory.java:156)
at org.apache.openjpa.persistence.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:227)
at org.apache.openjpa.persistence.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:154)
at org.apache.openjpa.persistence.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:60)
at org.apache.aries.jpa.container.impl.CountingEntityManagerFactory.createEntityManager(CountingEntityManagerFactory.java:64)
at javax.persistence.EntityManagerFactory$$Proxy.createEntityManager(Unknown Source) 
```

我已经消除了异常（它一直在继续）直到这一点：

```
Caused by: java.lang.ClassNotFoundException: com.mysql.jdbc.Driver not found by org.apache.openjpa [12]
at org.apache.felix.framework.BundleWiringImpl.findClassOrResourceByDelegation(BundleWiringImpl.java:1460)
at org.apache.felix.framework.BundleWiringImpl.access$400(BundleWiringImpl.java:72)
at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.loadClass(BundleWiringImpl.java:1843)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:169)
at org.apache.openjpa.jdbc.schema.DataSourceFactory.newDataSource(DataSourceFactory.java:85)
... 108 more 
```

PS：由于垃圾邮件限制，我无法发布指向 Aries、OpenJPA 或 EclipseLink 的链接，抱歉：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T09:19:53.120

感谢 Holly Cummins，经过几个小时的研究，我找到了解决问题的方法。我将在下面详细说明，这将是一个**很长的**答案。

如果您想将**EclipseLink**与 Apache Aries 一起使用（我发现安装它比 OSGi 的 OpenJPA 简单几个数量级，因为它只包含在*5*个捆绑包中），您必须直接从 apache 签出 EclipseLink - Aries 适配器，因为它还没有尚未发布。

转到适当的文件夹并执行以下命令来获取它：

```
svn checkout https://svn.apache.org/repos/asf/aries/trunk/jpa/jpa-container-eclipselink-adapter/ 
```

您应该得到一个名为**jpa-container-eclipselink-adapter**的文件夹。现在，假设您使用的是 Linux 并安装了 Maven，请运行以下命令：

```
cd jpa-container-eclipselink-adapter
mvn clean install 
```

一旦 Maven 成功编译了适配器的源代码，您将使用路径在 Maven 存储库中找到它

```
<maven-repo>/org/apache/aries/jpa/org.apache.aries.jpa.eclipselink.adapter/0.3.1-SNAPSHOT/org.apache.aries.jpa.eclipselink.adapter-0.3.1-SNAPSHOT.jar 
```

您必须与其他捆绑包一起部署此捆绑包（将其复制到 Felix 的**捆绑包**文件夹中）。

这就是 EclipseLink 部分，现在为了让您的持久性真正发挥作用，您必须将 Blueprint 与 Aries 一起使用。这是您需要从 [http://aries.apache.org/downloads/currentrelease.html]（Apache Aries 下载页面）获取的**所有捆绑包的列表**

1.  org.apache.aries.blueprint
2.  org.apache.aries.proxy
3.  org.apache.aries.jndi.api
4.  org.apache.aries.jndi
5.  org.apache.aries.blueprint
6.  org.apache.aries.jpa.api
7.  org.apache.aries.jpa.container.context
8.  org.apache.aries.jpa.container
9.  org.apache.aries.transaction.blueprint
10.  org.apache.aries.transaction.manager（这个在他们的网站上列出了两次，只是重复）
11.  org.apache.aries.util

完成 Aries 下载后，您仍然需要依赖项（从 SpringSource 获取它们）。这些是 SLF4J、Log4J、SLF4J Log4J Binding 和 javax.transaction 1.1 API 的捆绑包。

1.  [http://ebr.springsource.com/repository/app/bundle/version/detail?name=com.springsource.slf4j.api&version=1.6.1](http://ebr.springsource.com/repository/app/bundle/version/detail?name=com.springsource.slf4j.api&version=1.6.1)
2.  [http://ebr.springsource.com/repository/app/bundle/version/detail?name=com.springsource.slf4j.log4j&version=1.6.1](http://ebr.springsource.com/repository/app/bundle/version/detail?name=com.springsource.slf4j.log4j&version=1.6.1)
3.  [http://ebr.springsource.com/repository/app/bundle/version/detail?name=com.springsource.javax.transaction&version=1.1.0](http://ebr.springsource.com/repository/app/bundle/version/detail?name=com.springsource.javax.transaction&version=1.1.0)
4.  [http://ebr.springsource.com/repository/app/bundle/version/detail?name=com.springsource.org.apache.log4j&version=1.2.16](http://ebr.springsource.com/repository/app/bundle/version/detail?name=com.springsource.org.apache.log4j&version=1.2.16)

您还需要来自 EclipseLink 的包（您需要 OSGi 包版本）

[http://www.eclipse.org/eclipselink/downloads/](http://www.eclipse.org/eclipselink/downloads/)

打开 zip 并获取以下文件：

1.  org.eclipse.persistence.antlr
2.  org.eclipse.persistence.asm
3.  org.eclipse.persistence.core
4.  org.eclipse.persistence.jpa
5.  javax.persistence

最后，假设您要使用 MySQL 数据库，您将需要 MySQL JDBC 驱动程序包（从 Springsource 下载）

1.  [http://ebr.springsource.com/repository/app/bundle/version/detail?name=com.springsource.com.mysql.jdbc&version=5.1.6](http://ebr.springsource.com/repository/app/bundle/version/detail?name=com.springsource.com.mysql.jdbc&version=5.1.6)
2.  [http://ebr.springsource.com/repository/app/bundle/version/detail?name=com.springsource.org.apache.commons.logging&version=1.1.1](http://ebr.springsource.com/repository/app/bundle/version/detail?name=com.springsource.org.apache.commons.logging&version=1.1.1)

一旦你安装了所有这些包，你需要使用一个你将通过 JNDI 获得的**非 jta 数据源。**这是一个 persistence.xml 文件，您可以根据需要进行更改：

```
<persistence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0" xmlns="http://java.sun.com/xml/ns/persistence">
    <persistence-unit name="userManager" transaction-type="RESOURCE_LOCAL">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <non-jta-data-source>osgi:service/javax.sql.DataSource/(osgi.jndi.service.name=jdbc/userManagerDS)</non-jta-data-source>
        <class>com.example.dao.entity.UserEntity</class>
        <exclude-unlisted-classes>true</exclude-unlisted-classes>
        <properties>  
            <!-- EclipseLink should create the database schema automatically -->
            <!-- <property name="eclipselink.ddl-generation" value="create-tables" /> 
            <property name="eclipselink.ddl-generation.output-mode" value="database" /> -->
        </properties>
    </persistence-unit>
</persistence> 
```

看到非 jta-data-source 标记中的**javax.sql.Datasource了吗？**这就是我们将使用 Blueprint xml 定义的内容。为此，您首先需要在持久性捆绑包中添加**OSGI-INF/blueprint/**文件夹（包含您的 DAO 和实体的那个）。这是蓝图 xml 文件所在的默认文件夹，位于此处的任何 xml 文件都将被扫描。完成后，创建**blueprint.xml**文件（名称可以更改）并粘贴（和修改）以下代码：

```
 <bean id="dataSource" class="com.mysql.jdbc.jdbc2.optional.MysqlDataSource">
        <property name="url" value="jdbc:mysql://localhost:3306/usermanager?autoReconnect=true" />
        <property name="user" value="root" />
        <property name="password" value="root" />
    </bean>

    <service id="MySQLDataSource" interface="javax.sql.DataSource" ref="dataSource">
        <service-properties>
            <entry key="osgi.jndi.service.name" value="jdbc/userManagerDS" />
        </service-properties>
    </service>

    <service id="userDAOService" interface="com.example.dao.remote.UserDAORemote">
        <bean class="com.example.dao.beans.UserDAOBean">
            <jpa:unit index="0" unitname="userManager" />
        </bean>
    </service>
</blueprint> 
```

在这里，我们正在做两件事。首先，我们告诉 Aries 创建**userManagerDS**数据源并使用 JDBC 驱动程序、URL、用户和密码对其进行配置。这与我们在**persistence.xml**文件中使用的数据源相同。

然后，我们在 DAO 中注入**EntityManagerFactory**。我们的 DAO 是**com.example.dao.beans.UserDAOBean**类，我们需要将其名称添加到**bean**标记中。这个类必须实现一个接口，我们需要将此接口添加到**服务**标签中。现在，最后的**jpa:unit**标记告诉 Aries 使用 UserDAOBean 的第一个构造函数注入与名为**userManager**（我们在 persistence.xml 中使用的名称相同）的持久性单元相关的 EntityManagerFactory。这是通过使用 index="0" 属性来完成的。这也意味着你的 DAO 中必须有如下代码：

```
private EntityManager em;
private EntityManagerFactory emf;

public UserDAOBean(EntityManagerFactory emf) {
    this.emf = emf;
    this.em = emf.createEntityManager();
} 
```

也可以使用 setter 注入 EMF。以下是帮助您使用 Blueprint 的更多资源：

*   [http://aries.apache.org/modules/jpaproject.html](http://aries.apache.org/modules/jpaproject.html)
*   [http://aries.apache.org/modules/blueprint.html](http://aries.apache.org/modules/blueprint.html)
*   [http://mail-archives.apache.org/mod_mbox/aries-user/201104.mbox/%3C15F2C30E-2A71-4320-9992-DBCF181B58E4@gmail.com%3E](http://mail-archives.apache.org/mod_mbox/aries-user/201104.mbox/%3C15F2C30E-2A71-4320-9992-DBCF181B58E4@gmail.com%3E)

**可选**：请注意，如果您使用的是 Felix，添加 javax.transaction 包将导致“违反使用约束”，因为系统包（包 0）也导出此 API。您必须通过更改**config.properties**中的以下行来阻止它导出它：

```
#org.osgi.framework.system.packages= 
```

您必须在此处输入上一个包导出的**所有包的列表。**不幸的是，没有办法“删除”一个包，您必须重新定义要导出的整个包列表。这是我的，我希望它有帮助（是的，它非常非常长）：

```
org.osgi.framework.system.packages=org.osgi.framework;version=1.6.0, org.osgi.framework.launch;version=1.0.0, org.osgi.framework.wiring;version=1.0.0, org.osgi.framework.startlevel;version=1.0.0, org.osgi.framework.hooks.bundle;version=1.0.0, org.osgi.framework.hooks.resolver;version=1.0.0, org.osgi.framework.hooks.service;version=1.1.0, org.osgi.framework.hooks.weaving;version=1.0.0, org.osgi.service.packageadmin;version=1.2.0, org.osgi.service.startlevel;version=1.1.0, org.osgi.service.url;version=1.0.0, org.osgi.util.tracker;version=1.5.0, javax.accessibility;version=0.0.0.1_006_JavaSE, javax.activation;version=0.0.0.1_006_JavaSE, javax.activity;version=0.0.0.1_006_JavaSE, javax.annotation.processing;version=0.0.0.1_006_JavaSE, javax.annotation;version=0.0.0.1_006_JavaSE, javax.crypto.interfaces;version=0.0.0.1_006_JavaSE, javax.crypto.spec;version=0.0.0.1_006_JavaSE, javax.crypto;version=0.0.0.1_006_JavaSE, javax.imageio.event;version=0.0.0.1_006_JavaSE, javax.imageio.metadata;version=0.0.0.1_006_JavaSE, javax.imageio.plugins.bmp;version=0.0.0.1_006_JavaSE, javax.imageio.plugins.jpeg;version=0.0.0.1_006_JavaSE, javax.imageio.spi;version=0.0.0.1_006_JavaSE, javax.imageio.stream;version=0.0.0.1_006_JavaSE, javax.imageio;version=0.0.0.1_006_JavaSE, javax.jws.soap;version=0.0.0.1_006_JavaSE, javax.jws;version=0.0.0.1_006_JavaSE, javax.lang.model.element;version=0.0.0.1_006_JavaSE, javax.lang.model.type;version=0.0.0.1_006_JavaSE, javax.lang.model.util;version=0.0.0.1_006_JavaSE, javax.lang.model;version=0.0.0.1_006_JavaSE, javax.management.loading;version=0.0.0.1_006_JavaSE, javax.management.modelmbean;version=0.0.0.1_006_JavaSE, javax.management.monitor;version=0.0.0.1_006_JavaSE, javax.management.openmbean;version=0.0.0.1_006_JavaSE, javax.management.relation;version=0.0.0.1_006_JavaSE, javax.management.remote.rmi;version=0.0.0.1_006_JavaSE, javax.management.remote;version=0.0.0.1_006_JavaSE, javax.management.timer;version=0.0.0.1_006_JavaSE, javax.management;version=0.0.0.1_006_JavaSE, javax.naming.directory;version=0.0.0.1_006_JavaSE, javax.naming.event;version=0.0.0.1_006_JavaSE, javax.naming.ldap;version=0.0.0.1_006_JavaSE, javax.naming.spi;version=0.0.0.1_006_JavaSE, javax.naming;version=0.0.0.1_006_JavaSE, javax.net.ssl;version=0.0.0.1_006_JavaSE, javax.net;version=0.0.0.1_006_JavaSE, javax.print.attribute.standard;version=0.0.0.1_006_JavaSE, javax.print.attribute;version=0.0.0.1_006_JavaSE, javax.print.event;version=0.0.0.1_006_JavaSE, javax.print;version=0.0.0.1_006_JavaSE, javax.rmi.CORBA;version=0.0.0.1_006_JavaSE, javax.rmi.ssl;version=0.0.0.1_006_JavaSE, javax.rmi;version=0.0.0.1_006_JavaSE, javax.script;version=0.0.0.1_006_JavaSE, javax.security.auth.callback;version=0.0.0.1_006_JavaSE, javax.security.auth.kerberos;version=0.0.0.1_006_JavaSE, javax.security.auth.login;version=0.0.0.1_006_JavaSE, javax.security.auth.spi;version=0.0.0.1_006_JavaSE, javax.security.auth.x500;version=0.0.0.1_006_JavaSE, javax.security.auth;version=0.0.0.1_006_JavaSE, javax.security.cert;version=0.0.0.1_006_JavaSE, javax.security.sasl;version=0.0.0.1_006_JavaSE, javax.sound.midi.spi;version=0.0.0.1_006_JavaSE, javax.sound.midi;version=0.0.0.1_006_JavaSE, javax.sound.sampled.spi;version=0.0.0.1_006_JavaSE, javax.sound.sampled;version=0.0.0.1_006_JavaSE, javax.sql.rowset.serial;version=0.0.0.1_006_JavaSE, javax.sql.rowset.spi;version=0.0.0.1_006_JavaSE, javax.sql.rowset;version=0.0.0.1_006_JavaSE, javax.sql;version=0.0.0.1_006_JavaSE, javax.swing.border;version=0.0.0.1_006_JavaSE, javax.swing.colorchooser;version=0.0.0.1_006_JavaSE, javax.swing.event;version=0.0.0.1_006_JavaSE, javax.swing.filechooser;version=0.0.0.1_006_JavaSE, javax.swing.plaf.basic;version=0.0.0.1_006_JavaSE, javax.swing.plaf.metal;version=0.0.0.1_006_JavaSE, javax.swing.plaf.multi;version=0.0.0.1_006_JavaSE, javax.swing.plaf.synth;version=0.0.0.1_006_JavaSE, javax.swing.plaf;version=0.0.0.1_006_JavaSE, javax.swing.table;version=0.0.0.1_006_JavaSE, javax.swing.text.html.parser;version=0.0.0.1_006_JavaSE, javax.swing.text.html;version=0.0.0.1_006_JavaSE, javax.swing.text.rtf;version=0.0.0.1_006_JavaSE, javax.swing.text;version=0.0.0.1_006_JavaSE, javax.swing.tree;version=0.0.0.1_006_JavaSE, javax.swing.undo;version=0.0.0.1_006_JavaSE, javax.swing;version=0.0.0.1_006_JavaSE, javax.tools;version=0.0.0.1_006_JavaSE, javax.transaction.xa;version=0.0.0.1_006_JavaSE, javax.transaction;version=0.0.0.1_006_JavaSE, javax.xml.bind.annotation.adapters;version=0.0.0.1_006_JavaSE, javax.xml.bind.annotation;version=0.0.0.1_006_JavaSE, javax.xml.bind.attachment;version=0.0.0.1_006_JavaSE, javax.xml.bind.helpers;version=0.0.0.1_006_JavaSE, javax.xml.bind.util;version=0.0.0.1_006_JavaSE, javax.xml.bind;version=0.0.0.1_006_JavaSE, javax.xml.crypto.dom;version=0.0.0.1_006_JavaSE, javax.xml.crypto.dsig.dom;version=0.0.0.1_006_JavaSE, javax.xml.crypto.dsig.keyinfo;version=0.0.0.1_006_JavaSE, javax.xml.crypto.dsig.spec;version=0.0.0.1_006_JavaSE, javax.xml.crypto.dsig;version=0.0.0.1_006_JavaSE, javax.xml.crypto;version=0.0.0.1_006_JavaSE, javax.xml.datatype;version=0.0.0.1_006_JavaSE, javax.xml.namespace;version=0.0.0.1_006_JavaSE, javax.xml.parsers;version=0.0.0.1_006_JavaSE, javax.xml.soap;version=0.0.0.1_006_JavaSE, javax.xml.stream.events;version=0.0.0.1_006_JavaSE, javax.xml.stream.util;version=0.0.0.1_006_JavaSE, javax.xml.stream;version=0.0.0.1_006_JavaSE, javax.xml.transform.dom;version=0.0.0.1_006_JavaSE, javax.xml.transform.sax;version=0.0.0.1_006_JavaSE, javax.xml.transform.stax;version=0.0.0.1_006_JavaSE, javax.xml.transform.stream;version=0.0.0.1_006_JavaSE, javax.xml.transform;version=0.0.0.1_006_JavaSE, javax.xml.validation;version=0.0.0.1_006_JavaSE, javax.xml.ws.handler.soap;version=0.0.0.1_006_JavaSE, javax.xml.ws.handler;version=0.0.0.1_006_JavaSE, javax.xml.ws.http;version=0.0.0.1_006_JavaSE, javax.xml.ws.soap;version=0.0.0.1_006_JavaSE, javax.xml.ws.spi;version=0.0.0.1_006_JavaSE, javax.xml.ws.wsaddressing;version=0.0.0.1_006_JavaSE, javax.xml.ws;version=0.0.0.1_006_JavaSE, javax.xml.xpath;version=0.0.0.1_006_JavaSE, javax.xml;version=0.0.0.1_006_JavaSE, org.ietf.jgss;version=0.0.0.1_006_JavaSE, org.omg.CORBA.DynAnyPackage;version=0.0.0.1_006_JavaSE, org.omg.CORBA.ORBPackage;version=0.0.0.1_006_JavaSE, org.omg.CORBA.TypeCodePackage;version=0.0.0.1_006_JavaSE, org.omg.CORBA.portable;version=0.0.0.1_006_JavaSE, org.omg.CORBA;version=0.0.0.1_006_JavaSE, org.omg.CORBA_2_3.portable;version=0.0.0.1_006_JavaSE, org.omg.CORBA_2_3;version=0.0.0.1_006_JavaSE, org.omg.CosNaming.NamingContextExtPackage;version=0.0.0.1_006_JavaSE, org.omg.CosNaming.NamingContextPackage;version=0.0.0.1_006_JavaSE, org.omg.CosNaming;version=0.0.0.1_006_JavaSE, org.omg.Dynamic;version=0.0.0.1_006_JavaSE, org.omg.DynamicAny.DynAnyFactoryPackage;version=0.0.0.1_006_JavaSE, org.omg.DynamicAny.DynAnyPackage;version=0.0.0.1_006_JavaSE, org.omg.DynamicAny;version=0.0.0.1_006_JavaSE, org.omg.IOP.CodecFactoryPackage;version=0.0.0.1_006_JavaSE, org.omg.IOP.CodecPackage;version=0.0.0.1_006_JavaSE, org.omg.IOP;version=0.0.0.1_006_JavaSE, org.omg.Messaging;version=0.0.0.1_006_JavaSE, org.omg.PortableInterceptor.ORBInitInfoPackage;version=0.0.0.1_006_JavaSE, org.omg.PortableInterceptor;version=0.0.0.1_006_JavaSE, org.omg.PortableServer.CurrentPackage;version=0.0.0.1_006_JavaSE, org.omg.PortableServer.POAManagerPackage;version=0.0.0.1_006_JavaSE, org.omg.PortableServer.POAPackage;version=0.0.0.1_006_JavaSE, org.omg.PortableServer.ServantLocatorPackage;version=0.0.0.1_006_JavaSE, org.omg.PortableServer.portable;version=0.0.0.1_006_JavaSE, org.omg.PortableServer;version=0.0.0.1_006_JavaSE, org.omg.SendingContext;version=0.0.0.1_006_JavaSE, org.omg.stub.java.rmi;version=0.0.0.1_006_JavaSE, org.w3c.dom.bootstrap;version=0.0.0.1_006_JavaSE, org.w3c.dom.events;version=0.0.0.1_006_JavaSE, org.w3c.dom.ls;version=0.0.0.1_006_JavaSE, org.w3c.dom;version=0.0.0.1_006_JavaSE, org.xml.sax.ext;version=0.0.0.1_006_JavaSE, org.xml.sax.helpers;version=0.0.0.1_006_JavaSE, org.xml.sax;version=0.0.0.1_006_JavaSE 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T04:49:44.513

使用 JNDI 数据源而不是直接的 jdbc 连接可能会更好。[Aries 博客示例](http://aries.apache.org/modules/samples/blog-sample.html)有一个 blog.datasource 包，它使用蓝图注册数据源。所需捆绑包的列表比您当前拥有的要长，但您可以从 blog-assembly/target 目录或 pom.xml 中将它们全部复制。

或者，Aries 有一个 org.apache.aries.jpa.eclipselink.adapter，它与您链接到的文章做同样的事情。Aries 使用它来针对 EclipseLink 进行测试，所以它肯定可以工作。您还可以查看 Aries 测试以了解它是如何使用的，并查看是否有可以复制的 EclipseLink 测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T13:17:27.837

[使用gemini blueprint dbAccess 插件( http://www.eclipse.org/gemini/dbaccess/](http://www.eclipse.org/gemini/dbaccess/) )时事情可能会更容易，我认为它也适用于Aries。对于 MySQL，请务必包含连接器插件（例如[http://ebr.springsource.com/repository/app/bundle/version/detail?name=com.springsource.com.mysql.jdbc&version=5.1.6](http://ebr.springsource.com/repository/app/bundle/version/detail?name=com.springsource.com.mysql.jdbc&version=5.1.6)）。这应该足以让数据库启动并运行，前提是 blueprint.xml（使用上面的示例）配置正确，如上所述。****

# nservicebus - NServiceBus ITransport 事件获取当前消息引用

> ID：11861415
> 
> 赞同：0
> 
> 时间：2012-08-08T09:21:19.587
> 
> 标签：nservicebus

我正在围绕 NServiceBus 构建一些监控工具，目前我正在订阅 ITransport 接口上的一些事件：

```
ITransport Events:
TransportMessageReceived 
FailedMessageProcessing
FinishedMessageProcessing 
```

订阅`TransportMessageReceived`事件时，我会在事件 args 中获得对当前消息的引用。但是，当`FinishedMessageProcessing`事件引发时，它似乎不包含对已完成消息的引用。这适用于`FailedMessageProcessing`包含异常但不包含导致异常的消息的事件。

我想知道在引发 FailedMessageProcessing 和 FinishedMessageProcessing 事件时是否有某种方法可以获取对消息的引用

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:47:37.850

对于失败的消息，您可以实现以下接口来获取对消息的引用：

```
 public interface IManageMessageFailures
{
    void SerializationFailedForMessage(TransportMessage message, Exception e);

    void ProcessingAlwaysFailsForMessage(TransportMessage message, Exception e);

    void Init(Address address);

} 
```

请注意，如果您使用它，那么您将无法立即使用二级重试。

# sql-server - 笛卡尔积和交叉连接有什么区别？

> ID：11861417
> 
> 赞同：24
> 
> 时间：2012-08-08T09:21:21.577
> 
> 标签：sql-server

我正在研究 SQL Server 2008，想知道笛卡尔积和交叉连接之间的区别。有人可以帮我澄清这个概念吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-08T09:25:39.757

当您进行交叉连接时，您将获得笛卡尔积。第一个表中的每一行都与第二个表中的每一行匹配

![在此处输入图像描述](../Images/6c0f2bcd7b5ed701801f8b7baee20274.png)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-05-23T19:56:51.863

## CROSS JOIN

> This join is a Cartesian join that does not necessitate any condition to join. The resultset contains records that are multiplication of record number from both the tables.

![cross join](../Images/13e12a82f43fe9a3db96bb42609e8ca2.png)

```
/* CROSS JOIN */
SELECT t1.*,t2.*
FROM Table1 t1
CROSS JOIN Table2 t2 
```

**Sorce:**
[APRIL 13, 2009 BY PINAL DAVE
SQL SERVER – Introduction to JOINs – Basic of JOINs](http://blog.sqlauthority.com/2009/04/13/sql-server-introduction-to-joins-basic-of-joins/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T10:50:53.940

两个连接都给出相同的结果。交叉联接是 SQL 99 联接，笛卡尔积是 Oracle 专有联接。

没有“where”子句的交叉连接给出笛卡尔积。笛卡尔积结果集包含第一个表中的行数乘以第二个表中的行数。（导致结果集中的维度更高）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-15T07:26:40.967

笛卡尔积没有任何条件，结果集的总行为 r=r1*r2，其中第一个关系中的 r1 行和第二个关系中的 r2 行。连接满足特定条件

# caching - 如何在 symfony2 中将数据存储在缓存中

> ID：11861418
> 
> 赞同：15
> 
> 时间：2012-08-08T09:21:32.350
> 
> 标签：caching, symfony

我有一个配置表（id,name,value），其中包含我的 symfony 应用程序的一些配置变量，例如 email_expiration_duration。我想编写一个服务来从 symfony 应用程序中读取这些配置变量。

我想将数据缓存在 app/cache 文件夹中。这意味着只有当数据不在缓存中时，我才会从数据库中读取数据。每当配置值更改时，我都会清除缓存的数据。

我怎样才能在 symfony2 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T18:49:10.483

如果您想将此信息存储在您在 app/cache 文件夹中手动创建的文件中，您可以使用以下解决方案：[https ://stackoverflow.com/a/13410635/1443490](https://stackoverflow.com/a/13410635/1443490)

如果您不想/不需要关心 app/cache 文件夹中使用了哪个文件夹并且您的项目已经使用了 Doctrine，您可以遵循以下解决方案：[https ://stackoverflow.com/a/8900283/1443490](https://stackoverflow.com/a/8900283/1443490)

# windows - 尝试向代码签名添加时间戳时出现加密和身份验证问题

> ID：11861419
> 
> 赞同：2
> 
> 时间：2012-08-08T09:21:35.320
> 
> 标签：windows, sdk, timestamp, code-signing, signtool

嗨！

我想使用 Microsoft Platform SDK (7.1) 中的 signtool 对 windows .exe 二进制文件进行签名，并在签名中添加时间戳。我有两个问题。

1.  我想使用的（符合 RFC 的）时间戳服务器只允许加密的 https 连接，但是如果 URL 没有以 http:// 为前缀，signtool 的 /tr 选项会返回错误
2.  在使用时间戳服务器之前，我需要通过 TLS-Client-Authentication（使用签名证书）或通过经典的 HTTPS 用户名/密码登录对其进行身份验证。但我找不到使用signtool 设置任何这些的方法。

有没有办法做到这一点？

# android - 在 android 中使用 inSampleSize >1 下载位图是否意味着下载的数据更少？

> ID：11861423
> 
> 赞同：0
> 
> 时间：2012-08-08T09:21:54.150
> 
> 标签：android, bitmap, download, inputstream

在 android 中，当使用 inSampleSize > 1 的 BitmapFactory.Options 从 Internet 下载 Bitmap 时，它的质量会降低并且占用的内存更少。这是否意味着下载的数据更少？

我的目标是创建大图像的缩略图并在 GridView 中显示它们。我想下载尽可能少的数据。不想下载全尺寸图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T09:30:26.303

不，这只意味着在内存中加载的数据更少，通常是为了避免臭名昭著的`OutOfMemoryError`. 数据以其原始大小下载，但按比例缩小的版本加载到内存中。

# iphone - 仅使用 InterfaceBuilder 在视图上定位对象

> ID：11861426
> 
> 赞同：0
> 
> 时间：2012-08-08T09:22:04.247
> 
> 标签：iphone, objective-c, interface-builder, uibutton

已经以编程方式创建了一个`UIButton`，一切都按预期工作，但我如何才能使用 IB 仅在视图上定位对象？

更准确地说，我喜欢仅将 IB 用于此行（请参阅：setViaIB）

```
 self.searchBtn.frame = CGRectMake(setViaIB, setViaIB, 36, 36); 
```

创建的完整代码`UIButton`：

```
 self.searchBtn = [UIButton buttonWithType:UIButtonTypeCustom];
 self.searchBtn.frame = CGRectMake(100, 0, 36, 36);
[self.searchBtn setBackgroundImage:[UIImage imageNamed:@"search.png"] forState:UIControlStateNormal];
[self.searchBtn addTarget:self action:@selector(searchBtnTapped::) forControlEvents:UIControlEventTouchUpInside];
[self.searchBtn setNeedsDisplay];
[self.view addSubview:self.searchBtn]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:24:59.193

如果您在 IB 中创建按钮，则只能在 IB 中定位该按钮。您可以将 searchBtnTapped 方法更改为 IBAction 并通过 IB 中的文件所有者将其链接到您的按钮。然后，您可以在 IB 中将按钮移动到任何您想要的位置。如果不是，您只需通过坐标重新定位按钮，直到您满意为止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:25:56.223

我很确定你不能，为什么不用`initWithNibName: bundle:`在 nib（Interface Builder）文件中创建整个视图呢？

# java - Spring/Java 找不到主方法

> ID：11861431
> 
> 赞同：0
> 
> 时间：2012-08-08T09:22:23.967
> 
> 标签：java, spring

我尝试编写一个简单的 Spring 3 控制台应用程序。我不能让这个应用程序运行，我总是得到错误，没有主方法。我的系统是安装了 openjdk-7 和 sts 2.9.2-release 的 Ubuntu 12.04。一个简单的 hello world 运行没有任何问题**编辑：（**我测试了另一个项目来证明一个简单的 hello world 可以运行）。

该项目是通过 Maven 管理的，到目前为止我没有遇到任何错误。

我尝试复制一本书的示例，如下所示：

**XmlConfigWithBeanFactory.java**

```
import org.springframework.beans.factory.support.DefaultListableBeanFactory;
import org.springframework.beans.factory.xml.XmlBeanDefinitionReader;

import org.springframework.core.io.FileSystemResource;

public class XmlConfigWithBeanFactory {

public static void main(String[] args) {
    DefaultListableBeanFactory factory = new DefaultListableBeanFactory();
    XmlBeanDefinitionReader rdr = new XmlBeanDefinitionReader(factory);
    rdr.loadBeanDefinitions(new FileSystemResource(
            "src/xmlBeanFactory.xml"));
    Oracle oracle = (Oracle) factory.getBean("oracle");
    System.out.println(oracle.defineMeaningOfLife());
    }
} 
```

**甲骨文.java**

```
public interface Oracle {

    public String defineMeaningOfLife();
} 
```

**书虫Oracle.java**

```
public class BookwormOracle implements Oracle {

    public String defineMeaningOfLife() {
        return "Encyclopedias are a waste of money - use the Internet";
    }

} 
```

**xmlBeanFactory.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">
<!-- oracle bean used for a few examples -->
<bean id="oracle" name="wiseworm" class="BookwormOracle"/>
</beans> 
```

如果你愿意，我也可以发布 maven pom.xml，但我认为所有包都加载和链接没有错误。

我很高兴谷歌和其他页面无法帮助我的任何提示。这是我想要做的另一个例子：http: [//www.devdaily.com/blog/post/java/load-spring-application-context-file-java-swing-application](http://www.devdaily.com/blog/post/java/load-spring-application-context-file-java-swing-application)

甚至这篇文章[Java can't find method main](https://stackoverflow.com/questions/11720447/java-cant-find-method-main)也没有帮助我

我是否必须将此应用程序作为 Java 应用程序或 AspectJ/JavaApplication 启动。不能从 eclipse 以这种方式启动控制台应用程序吗？我是否需要将我的文件发布到服务器（“添加到服务器”，但这也不起作用）？

最让我困惑的是，我看到了 main 方法:)，它与任何 hello world 应用程序的语法相同。

谢谢到目前为止...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:26:14.090

在包资源管理器中右键单击“XmlConfigWithBeanFactory.java”，然后选择“Run as Java Application”。那应该行得通。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T10:30:55.173

我使用了所有的 java 文件和 XML 文件并让它在我的系统中运行。修复两个错误后它运行良好，下次发布问题时，请发布异常或收到的错误消息。

运行项目时出现两个错误

第一个错误：

这与没有“commons-logging”jar 文件有关。

我下载了jar文件并将其放在构建路径下。

您可以在[此处](http://www.mkyong.com/java/javalangnoclassdeffounderror-orgapachecommonslogginglogfactory/)找到解决方案。您还需要更改您的 pom.xml

现在将是，

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>org.test.testapp</groupId>
  <artifactId>testapp</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <dependencies>
  <dependency>
    <groupId>commons-logging</groupId>
    <artifactId>commons-logging</artifactId>
    <version>1.1.1</version>
</dependency>
</dependencies>
</project> 
```

第二个错误：

xmlBeanFactory.xml 指的是不同的 Spring 版本。我更改为 Spring-2.5.jar 并更新了我的构建路径。

就是这样，现在项目运行了。

# cryptography - 将 ssh 密钥存储在 github 上是否安全？

> ID：11861433
> 
> 赞同：8
> 
> 时间：2012-08-08T09:22:37.017
> 
> 标签：cryptography, rsa, public-key-encryption, ssh-keys

我想知道在公共 git 存储库中存储公钥和私钥是否安全？这些密钥受密码保护。

我愿意这样做以保存我当前的 linux 配置。如果这样做不安全，您知道实现我的目标的方法吗？

问候

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-08T09:24:40.187

私钥应保持私密。将它们放在公共 git 存储库中是非常矛盾的。即使他们有密码，也可以强行打开。

Github 刚刚[被黑](http://it.slashdot.org/story/12/03/05/1243235/github-hacked)，所以你应该假设你上传到 Github 上的所有内容都是供所有人看到的，甚至是私人存储库。

您可以将 Linux 配置保存在 Github 上，但不能保存私钥。它们必须保持私密（在您的服务器上，在您的主文件夹中）。在[serverfault.com](http://serverfault.com)上查看这个非常有用的[答案](https://serverfault.com/questions/5410/using-revision-control-for-server-configuration-files)：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:12:44.520

如果密码足够强，则可以发布 PKCS#12 密码保护的密钥（文件 *.pfx、*.p12），因此不能暴力破解。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-11-14T19:17:40.953

如果它是软件，它可以被黑客入侵，因此只要有适当的时间和耐心，任何东西都可以被暴力破解。管理私钥不应该在云中完成。我会采用 PGP 加密的本地密钥存储，使用密码短语和一些简单的脚本。

# c# - XmlSerializer 未序列化属性

> ID：11861434
> 
> 赞同：8
> 
> 时间：2012-08-08T09:22:37.623
> 
> 标签：c#, xml, xmlserializer

我想将一个类序列化为 XML，并为其分配一个 XML 属性。片段：

```
 [XmlType(TypeName = "classmy")]
    public class MyClass2 : List<object>
    {
        [XmlAttribute(AttributeName = "myattr")]
        public string Name { get; set; }
    }

    public class MyConst
    {
        public MyConst()
        {
            MyClass2 myClass2 = new MyClass2 { 10, "abc" };

            myClass2.Name = "nomm";

            XmlSerializer serializer = new XmlSerializer(typeof(MyClass2));
            serializer.Serialize(Console.Out, myClass2);
        }
    } 
```

但生成的 XML 看起来像这样

```
<?xml version="1.0" encoding="IBM437"?>
<classmy xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <anyType xsi:type="xsd:int">10</anyType>
  <anyType xsi:type="xsd:string">abc</anyType>
</classmy> 
```

一切都很好，唯一的例外是 myClass2.Name 没有序列化。我期待着一些东西

```
<classmy myattr="nomm" [...]>[...]</classmy> 
```

...为什么不序列化，怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T09:29:46.640

不要派生`List<T>`，用成员创建类`List`

```
[XmlType(TypeName = "classmy")]
public class MyClass2
{
    [XmlAttribute(AttributeName = "Items")]
    List<object> Items { get; set; } //need to change type in `<>`

    [XmlAttribute(AttributeName = "myattr")]
    public string Name { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T10:36:07.370

XmlSerializer 以特殊方式处理 List<>：

> 如果满足某些要求，XmlSerializer 可以以不同方式处理实现 IEnumerable 或 ICollection 的类。实现 IEnumerable 的类必须实现采用单个参数的公共 Add 方法。Add 方法的参数必须与从 GetEnumerator 方法返回的 IEnumerator.Current 属性返回的类型一致（多态）。除了 IEnumerable 之外，实现 ICollection 的类（例如 CollectionBase）必须具有采用整数的公共 Item 索引属性（C# 中的索引器），并且必须具有整数类型的公共 Count 属性。传递给 Add 方法的参数必须与从 Item 属性返回的类型相同，或者是该类型的基类型之一。对于实现 ICollection 的类，**另请注意，公共字段和属性将不会被序列化，但返回另一个集合类（实现 ICollection 的）的公共字段除外**。[MSDN - 滚动到 XML 序列化注意事项](http://msdn.microsoft.com/en-us/library/182eeyhh%28v=vs.71%29.aspx)

这就是为什么它将您的类序列化为仅对象列表，而没有您的属性。最好的解决方案是将 List 作为类公共属性包含在内并将其标记为 XmlElement。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T09:48:30.383

替代解决方案：使用数组而不是列表和 XmlElement

```
 [XmlType(TypeName = "classmy")]
    public class MyClass2
    {
        [XmlElement(ElementName = "Items")]
        public object[] Items { get; set; }
        [XmlAttribute(AttributeName = "myattr")]
        public string Name { get; set; }
    } 
```

# openerp - openerp 中的父左和右父

> ID：11861436
> 
> 赞同：4
> 
> 时间：2012-08-08T09:22:53.477
> 
> 标签：openerp

什么是左父母和右父母？

它在**Openerp**中是如何工作的？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T15:29:17.790

正如 Raphael Collet 在[他对 OpenERP Server 的回答](https://answers.launchpad.net/openobject-server/+question/186704)中解释的那样：

> parent_left 和 parent_right 是与 parent_id 字段相关的特殊字段。这些字段的目的是使层次结构中的查询高效执行：使用 parent_left 和 parent_right，您可以检索节点的所有后代，而无需进行递归查询。
> 
> 考虑层次结构中的两个节点 A 和 B。例如，A 和 B 可以是合作伙伴类别。它们的整数字段 parent_left 和 parent_right 是这样的：
> 
> ```
>  B is a descendant of A in the hierarchy (defined by parent_id) 
> ```
> 
> 当且仅当
> 
> ```
>  A.parent_left < B.parent_left and
>     A.parent_left < B.parent_right and 
>     B.parent_left < A.parent_right and
>     B.parent_right < A.parent_right 
> ```
> 
> 因此，假设您有六个合作伙​​伴类别，如下所示。您可以通过遍历树来分配 parent_left 和 parent_right。结果显示在每个节点旁边的括号中。请注意，那里的值是最优的；在实践中，您可以在数字上留下空白。
> 
> *   客户 (1, 10)
>     *   消费者 (2, 3)
>     *   合作伙伴 (4, 9)
>         *   基本合作伙伴 (5, 6)
>         *   金牌合作伙伴 (7, 8)
> *   供应商 (11, 12)
> 
> 您可以使用单个 SQL 查询检索客户的所有子类别。请注意，值 1 和 10 是客户的 parent_left 和 parent_right；它们可以作为查询本身的一部分进行检索。
> 
> ```
>  SELECT id FROM partner_category
>     WHERE parent_left > 1 AND parent_left < 10 
> ```
> 
> 最后一点是 parent_left 和 parent_right 可以在不遍历整个层次结构的情况下更新。删除节点不需要任何更改。要添加一个节点，您可以使用两个 UPDATE 查询来调整 parent_left 和 parent_right：一个在新节点的祖先的 parent_left 和 parent_right 之间“留出一些空间”，另一个是移动新节点的后续兄弟的 parent_left 和 parent_right 和他们的后代。所以 parent_left 和 parent_right 可以有效地维护。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T09:54:53.467

这些是[嵌套集模型](http://en.wikipedia.org/wiki/Nested_set_model)的字段。在 SQL 中管理具有无限深度的分层数据结构。[在 MySQL 中管理分层数据一](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)文通过 SQL 示例解释了此模型的详细信息。

OpenERP 使用嵌套集模型来管理诸如会计科目表和仓库位置之类的树。`parent_left`和`parent_right`列相当于上述文章中的`right`和列。`left`

# objective-c - 影响应用整体背景图像的导航控制器

> ID：11861439
> 
> 赞同：0
> 
> 时间：2012-08-08T09:22:57.283
> 
> 标签：objective-c, ios, uinavigationcontroller

我有一个应用程序，当它开始时，它会加载一个 viewController，它会加载 Default.png 启动图像并将其保持 1.5 秒，然后该图像淡出，然后淡入另一个图像，该图像将成为我整个应用程序的背景图像. 从这里它加载第一个 viewController，然后按钮和导航栏淡入。

所以它去了 SplashScreeVC - Default.png 呈现 Default.png 淡出 新图像淡入（这是应用程序的整体背景图像） 加载 MainVC，按钮和导航栏 alpha 设置为 0.1。调用方法淡入导航栏和 mainVC 中的按钮

所以在我的应用程序代表中我有这个

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.

    SplashVC *splash = [[SplashVC alloc] initWithNibName:@"SplashView" bundle:nil];
    self.window.rootViewController = splash;

    [self.window makeKeyAndVisible];
    return YES;
} 
```

所以应用程序加载了 Default.png，然后加载了具有 Default.png 作为其背景图像的 splashVC，这显示了 1.5 秒。然后我有一些方法可以淡出这个图像，然后淡入将用作整个应用程序的背景图像的图像。然后它调用加载导航控制器的 appDelegates MainNav 方法。App Delegates MainNav 方法如下

```
-(void) MainNav
{
    UIViewController *main = [[MainVC alloc] initWithNibName:@"MainView" bundle:nil];

    self.navController = [[UINavigationController alloc] initWithRootViewController:main];

    UIImage *navImage = [UIImage imageNamed:@"NavBarGrey.png"];
    //Add the custom image

    [[self.navController navigationBar] setBackgroundImage:navImage forBarMetrics:UIBarMetricsDefault];

    //[[UINavigationBar appearance] setTintColor:UIColorFromRGB(0xee2e24)];

    [[UINavigationBar appearance] setTintColor:UIColorFromRGB(0xe7e7e7)];

    self.navController.view.backgroundColor = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"backgroundImage.png"]];

    self.window.rootViewController = self.navController;

} 
```

问题是当它从 SplashScreen VC 移动到 MainVC 时，图像会突然猛烈起来，尽管事实上它与在 SplashVC 中淡入的图像相同。

有谁知道这是为什么？我猜它与影响图像大小的导航控制器有关，但不确定如何修复它？我是否需要为不同尺寸的导航栏背景创建新图像？还是有其他方法可以解决此问题？

任何建议将不胜感激。谢谢！！

编辑：固定图像向右抖动，图像宽度在错误高度，但图像仍在跳跃一定量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:53:52.697

你可以设置背景图像代码

```
yourView.setBacroundColur=[UIColour colourWithImagePttern:[UIImage ImageNamed:@""]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:30:49.733

设法弄清楚了。似乎必须复制图像并将其高度增加 20 像素并将其设置为导航栏背景图像。这抵消了导航栏的问题。

# asp.net - 从后面的代码创建 Image 和 PlaceHolder - 动态

> ID：11861443
> 
> 赞同：0
> 
> 时间：2012-08-08T09:23:14.207
> 
> 标签：asp.net, image, dynamic, placeholder

我想从我的数据库中读取图像，但它们必须在无序列表中。我有一个 Handler 确实得到了 imgUrl 的来源

```
s+= "< ul>";
while (reader.Read())
{
    id = reader.GetInt32(0);
    s += "< li>< div>";
    s += "< a href='#'>< img src='~/Handlers/ShowImage.ashx?id=" + id + "'/>< /a>";
    s += "</ div></ li>";
}
s+="< /ul>"; 
```

之后，我使用在 aspx 中声明的 Literal 来传递这段 html 代码。

```
myLiteral.text = s; 
```

问题是：我的处理程序永远不会被执行，所以我永远不会得到 img 源。为了解决这个问题，我开始使用 PlaceHolder，而不是写标签“< img ... />”。

所以我有：

```
while (reader.Read())
{
    id = reader.GetInt32(0);

    PlaceHolder holder = new PlaceHolder();
    Image img = new Image();
    img.ImageUrl = "~/Handlers/ShowImage.ashx?id=" + id;
    holder.Controls.Add(img);

    s += " li div";
    s += " a href='" + reader.GetString(1) + "'" + holder + " /a";
    s += " /div /li";
} 
```

这样处理程序执行，但我的持有人只是通过`.toString()`:S

谁来帮帮我？而且，这是我想要的最佳方式吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:31:49.497

请试试....

```
 StringWriter sw = new StringWriter();
  HtmlTextWriter htw = new HtmlTextWriter(sw);
  holder.RenderControl(htw);
  string s = sw.ToString(); 
```

“s”是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:06:30.003

你能澄清一下你的问题吗？

*   当你说你有一个处理程序时......那是一个 HttpHandler 吗？
*   你的代码在哪里运行？它在您页面的代码隐藏中吗？它是什么方法？

此外，如果您想自己渲染 HTML 字符串，建议您使用 StringBuilder 类，而不是仅仅使用 "s+="

谢谢！

# actionscript-3 - object.hitTestObject(other_object) 执行次数过多

> ID：11861447
> 
> 赞同：0
> 
> 时间：2012-08-08T09:23:29.133
> 
> 标签：actionscript-3, flash, actionscript

为什么会这样？

当两个物体相互接触时，我会追踪，它们会显示很多信息：

```
 private function onEnterFrame(e:Event):void{

        e.target.x += 4;
        var moved = false
        if(!moved)
        {
            for(var i = 0; i < arrows.length; i++)
            {

                if(e.target.hitTestObject(arrows[i]))
                   {

                       trace('boom');
                       moved = true;
                       break;
                   }

            }
        } 
```

所以这里它把“boom”这个词写了很多次而不是1次，如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:09:49.703

您正在检查每一帧的命中测试，因此每次它都会为您提供命中测试的值。我认为您的问题是您在循环中定义了布尔变量“已移动”，它失去了它的目的，因为它在进入循环时总是错误的。尝试在函数之外定义布尔变量。这将有助于解决问题:)

# sharepoint - 无法使用 OpenXML 在 Word 中填充内容控件

> ID：11861451
> 
> 赞同：0
> 
> 时间：2012-08-08T09:23:45.710
> 
> 标签：sharepoint, ms-word, openxml, openxml-sdk

我是 OpenXML 的新手，我将在这个问题上大发雷霆。帮助将不胜感激。

概述是我正在尝试通过 asp.net 填写 word 文档内容模板。

我可以轻松地使用 CustomXML 填充字段，但我尝试填充的文档也映射到 SharePoint 文档库。因此，当我在 SharePoint 库中上传文档时，它会自动填充 Word 文档内容控件中的列。现在使用自定义 XML 正在破坏该设置。当控件映射到 SharePoint 时，使用 OpenXML 填充数据不起作用。

请帮助示例代码或正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T00:06:47.233

这正是我们在项目中所做的：）你很幸运。

首先，您需要为该文档库创建事件接收器。并且您需要实现 ItemUpdated 和 ItemAdded。请参阅 [http://www.dotnetcurry.com/ShowArticle.aspx?ID=649](http://www.dotnetcurry.com/ShowArticle.aspx?ID=649) http://blogs.msdn.com/b/brianwilson/archive/2007/03/05/part-1-event-handlers-everything-你需要知道的关于微软办公室共享点门户服务器苔藓事件处理程序.aspx

//事件接收器的代码。这将为您提供内容控件的名称及其值

```
 Dictionary<string, string> results = new Dictionary<string, string>();
            using (Stream stream = file.OpenBinaryStream(SPOpenBinaryOptions.SkipVirusScan)) {

                using (WordprocessingDocument doc = WordprocessingDocument.Open(stream, true)) {
                    var contentControls = doc.MainDocumentPart
                        .GetXDocument()
                        .Descendants(w + "sdt");

                    foreach ( var contentControl in contentControls ) 
                    {
                        string key = (string)contentControl.Descendants(w + "sdtPr").Elements(w + "alias").Attributes(w + "val").FirstOrDefault();
                        string val = GetTextFromContentControl(contentControl);
                        results[key] = val;
                    }

 }

static string GetTextFromContentControl(XElement contentControlNode) {
            return contentControlNode.Descendants(w + "p")
                .Select
                (
                    p => p.Elements()
                          .Where(z => z.Name == r || z.Name == ins || z.Name == br)
                          .Descendants()
                          .Where(z => z.Name == w + "t" || z.Name == w + "br")
                          .StringConcatenate(element => (string)element + (element.Name == w + "br" ? Environment.NewLine : "")) + Environment.NewLine
                ).StringConcatenate();
        } 
```

# c# - 如何正确显示此平面列表？

> ID：11861454
> 
> 赞同：0
> 
> 时间：2012-08-08T09:23:51.027
> 
> 标签：c#, .net, silverlight, hierarchical-data

```
LIST ONE                    LIST TWO

[ ] Parent 1                - Entry (from Child 1)
    [X] Child 1             - Entry (from Child 1)
        [ ] ChildChild 1    - Entry (from ChildChild 1)
    [ ] Child 2 
```

*   **LIST ONE**包含分层数据。我们将其显示在支持分层数据的 GridView 中。
*   **列表二**包含平面数据。我们也将其显示在 GridView 中。

如果它的`SelectedItem`变化**LIST TWO**的 ItemsCollection 也发生变化。**LIST TWO包含来自***Child 1* ( `SelectedItem`) 及其所有子项（So *Child 1*和*ChildChild 1* ）的合并条目集合。

我们面临的问题是，我们需要向用户显示哪些是来自**LIST ONE**的当前选定项目的条目（ **LIST TWO** ） 。

 **我们已经讨论了一段时间，并提出了以下解决方案：

1.  我们可以为与当前选定项目相关的条目着色。
2.  我们可以实现一个选项卡控件：一个选项卡显示所有条目，另一个选项卡仅显示所选项目的条目。
3.  我们可以在那里放置一个复选框，当它被（未）选中时隐藏子条目
4.  我们可以用一个额外的列来标记这些项目。当条目与所选项目有关时，可能会有一个选中的复选框。

所有这些解决方案实际上都是相同的。唯一的问题是：有没有更优雅的解决方案？我已经想了很长时间，但我的头上没有任何想法。也许你遇到过类似的问题。

**PS：有人知道更合适的标题吗？****

# entity-framework - EF 代码优先和双向关系

> ID：11861459
> 
> 赞同：0
> 
> 时间：2012-08-08T09:24:13.887
> 
> 标签：entity-framework, ef-code-first

```
this.HasRequired(t => t.Parent)
    .WithMany(t => t.Children)
    .HasForeignKey(d => d.ParentId); 
```

在这里，我定义了一个基本的一对多关系。如果我根本不想在模型中公开 Children 属性，但仍希望在 Parent 和 ParentId 之间同步值怎么办。我将如何定义这种“关系”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:39:32.237

您将`WithMany`不带任何参数调用：

```
this.HasRequired(t => t.Parent)
    .WithMany()
    .HasForeignKey(d => d.ParentId); 
```

# php - 将 JSON 对象从 Jquery 发布到 PHP 并对其进行解码（跨域）

> ID：11861466
> 
> 赞同：0
> 
> 时间：2012-08-08T09:24:30.097
> 
> 标签：php, jquery, json, cross-domain, jsonp

我有代码可以将 JSON 对象从 Jquery 传递到 PHP 页面。

问题在于发送跨域请求，如果我尝试

```
dataType:'json' 
```

在 jquery 中，它给了我一个我理解的 xhttp 错误（安全）错误。

读完[这篇文章后](https://stackoverflow.com/questions/2943103/jsonp-implications-with-true-rest)我也明白JSONP 只适用于 GET 方法

这就是我创建和使用对象的方式：

```
function order(id, name) {

        return {
            id: id,
            name: name
        }

    }

    var orders= [];

    orders.push(order("123", "Lamb Kebab"), product("234", "Chicken"));

    var jsonOrders = $.toJSON(orders); 

    $.post(
        "process.php",
        {orders: jsonOrders },
        function(data){
            $("#result").html(data);
        }
    ); 
```

我传递 JSON 对象跨域的解决方案是什么？如果这是不可能的，什么是替代解决方案？

请指教

谢谢

编辑：

**jQuery代码**

```
 function product(code, type) {

        return {
            code: code,
            type: type
        }

    }

    var products = [];

    products.push(product("333", "Product one"), product("444", "Second product"));

    var jsonProducts = $.toJSON(products); 

    $.ajax({
        type: "GET",
        url: "http://page.tld/foo.php",
        contentType: "application/json; charset=utf-8",
        dataType: "jsonp",
        data:JSON.stringify({products: jsonProducts}),

        error: function (msg) {
            //alert("error");
            console.log("Error here" +msg);         

        },

        success: function (msg) {
                console.log("Success"+msg);
        }
    }); 
```

**

> PHP 端的错误是： Invalid argument provided for foreach() in ....

**

**PHP 代码（简化版）**

```
<?php header("Content-type: application/json; charset=utf-8");
require_once('json.php');

if (isset($_GET['products'])) {

$products = json_decode($_GET["products"],"true");
foreach ($products as $product){
echo $_GET['callback'] . '(' .(json_encode($product["type"])). ')';
}
}
else
{
echo $_GET['callback'] . '(' .(json_encode("not found")). ')';
} 
```

?>

它正在进入能够找到 $_GET['products'] 的块中，这是我的解析错误吗？我确信这是一个明显的错误，但我无法发现它。

真的很抱歉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:42:54.113

我在 PHP 端使用了 GET 参数并解码了 JSON。

# visual-studio-2008 - 调试时如何控制BIDS在编辑器中打开包的时间？

> ID：11861467
> 
> 赞同：0
> 
> 时间：2012-08-08T09:24:35.397
> 
> 标签：visual-studio-2008, ssis, bids

我在商业智能开发工作室 (BIDS) 中有一个解决方案，它由多个项目和多个包组成。有一个“主”包将依次执行其他几个包。在调试模式下运行解决方案时，BIDS 会打开它在编辑器中执行的大部分包，但不会打开每个包。

这背后的逻辑是什么，我如何控制在编辑器中加载哪个包，哪个不加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:15:45.500

它将加载您上次关闭解决方案时打开的包

编辑：

也许您打开了 pkg1，当您按 F5 时，您将 pkg2 配置为 startObjectID。右键单击您的解决方案并单击属性：

![在此处输入图像描述](../Images/852bcf4540f54179415124f5739f1ef7.png)

# excel - 写字板以 html 格式打开 .xls 文件？

> ID：11861469
> 
> 赞同：0
> 
> 时间：2012-08-08T09:24:43.063
> 
> 标签：excel

我从朋友那里得到了一个 .xls 文件。当我尝试在excel中打开它时，它打开得很好。但是当我尝试在写字板中打开同一个文件时，它使用如下表格标签显示文件内容：

```
<table border=1 cellspacing="0" cellpadding="0" width="580">
<style>

        <!--table

        .xl31

        {mso-style-parent:style0;

        mso-number-format:"\@";

        text-align:left;

        border-top:none;

        border-right:.5pt solid black;

        border-bottom:.5pt solid black;

        border-left:none;

        white-space:normal;}

        --> 
        <tr><td> By _______________ </td><td colspan=2 > By ____________ </td></tr>

        <tr><td>(Authorized  Signature) </td><td colspan=2 >  (Authorized  Signature)</td></tr>

        </table></th></tr> 
</table> 
```

但是当我使用 microsoft office-2003 创建一个 excel 文件并在写字板中打开它时，它会显示一些垃圾数据。有人可以帮我找出这些文件之间的区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T15:08:50.700

在许多 Web 应用程序中，通过将数据格式化为 HTML 表格并将其与将内容描述为 Excel 文件的标题一起发送来“作弊”并创建 Excel 下载，这是一种常见的做法。Excel 仍将呈现数据正常，以为它可能会抱怨下载中的内容看起来不像真正的 Excel 文件。

That's likely how your friend got that file. If you try it with an Excel file you created from Excel its either going to be binary (xls) or a zipped up set of XML files (2007+) so its not going to have any content you can read directly using Wordpad.

# winapi - 流畅播放实时网络音频样本

> ID：11861475
> 
> 赞同：2
> 
> 时间：2012-08-08T09:25:03.950
> 
> 标签：winapi, signal-processing, audio-streaming

我正在该服务器中编写一个客户端/服务器应用程序，发送实时音频数据，捕获从某些外部设备（例如麦克风）捕获的音频样本并将其发送到客户端。然后客户想要播放这些样本。我的应用程序将在本地网络上运行，所以我的带宽没有问题（我的声音是 8k，8bit 立体声，而我的网卡是 1000Mb）。在客户端中，我将数据缓冲一小段时间，然后开始播放。当数据从服务器到达时，我将它们发送到声卡。这似乎工作正常，但有一个问题：
当我在客户端的缓冲区完成时，我会遇到播放声音的间隙。
我认为这是因为服务器和客户端的采样时间不同，这意味着服务器上的 8K 与客户端上的 8K 不同。
我可以通过再次暂停客户端的播放和缓冲来解决这个问题，但我的老板不接受，因为我有适当的带宽，我应该能够播放声音而没有间隙或暂停。
所以我决定在客户端动态改变播放速度，但我不知道怎么做。

我在 Windows（本机）中编程，目前使用 waveOutXXX 播放声音。我可以使用任何其他本机库（DirectX/DirectSound、Jack 或 ...），但它们应该在客户端提供流畅的播放。

我已经用 waveOutXXX 编程了很多次，没有任何问题，我知道它很好，但我无法解决我的动态重采样问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:09:16.660

我在我处理的应用程序中遇到了类似的问题。它不涉及网络，但它确实涉及以一定的固定采样率实时捕获源数据，大量的信号处理，最后以固定的速率输出到声卡。和你一样，我在缓冲区边界的播放中也有间隙。

在我看来，问题在于正在完成的处理导致音频数据以非常生涩的方式进入声卡。也就是说，它会得到一个很大的块，然后需要很长时间才能得到另一个块。总体吞吐量是正确的，但是这种延迟导致声卡经常缺乏数据。我想你的系统中的网络部分可能有同样的情况。

我解决它的方法是首先使音频缓冲区更长。然后，每次收到新的音频块时，我都会检查缓冲区的满载情况。如果它不到 20% 满，我会写一些静默，让它大约 60% 满。

您可能会认为这不利于减少播放中的间隙，因为它实际上是在增加间隙，但它确实有帮助。我遇到的问题是，即使我有一个非常大的音频缓冲区，我总是处于它为空的边缘。由于系统中的其他延迟，这导致几乎每个缓冲区的播放间隙。

当缓冲区开始变空时写入静默，但在它真正变空之前，确保缓冲区总是有一些数据可以在处理落后一点时保留。此外，与许多周期性间隙相比，播放中只有一个小间隙很难注意到。

我不知道这是否对你有用，但它应该很容易实现和试用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T14:39:39.933

我建议您的问题不太可能是由于采样率不匹配，而是与您的缓冲有关。您应该不断地将数据转储到声卡，并不断填充缓冲区。使用合理的缓冲区大小......对于大多数应用程序来说，300 毫秒应该足够了。

现在，在很长一段时间内，录制端的时钟和播放端的时钟可能会偏离得足够远，以至于 300 毫秒的缓冲区不再足够。我建议不要以可能引入伪影的如此小的差异重新采样，而只需在编码端添加样本。您仍然以 8kHz 录制，但您可能每秒添加一两个样本，以达到 8.001kHz 左右。简单地将现有样本之一加倍（或者甚至是一个样本与下一个样本之间的简单平均值）将听不见。根据您的应用程序的需要进行调整。

# c# - asp图片按钮刷新页面

> ID：11861487
> 
> 赞同：0
> 
> 时间：2012-08-08T09:25:34.267
> 
> 标签：c#, asp.net

嗨我的网页有很多 imageButtons，点击刷新页面。我该如何防止这种情况？

```
 var imageButton = new ImageButton();
    imageButton.ImageUrl = "Styles/unClicked.png";
    imageButton.ID = "btn" + questionName;
     imageButton.OnClientClick = ("javascript:button_pressed()"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:32:37.520

我的第一个答案是，如果您不希望图像回发，请不要使用`<asp:ImageButton`>，而只需使用一个`<img>`元素。

但是，如果您想使用`<asp:ImageButton>`then 更新以下行来停止页面被回发（刷新）...

```
imageButton.OnClientClick = "button_pressed();return false;" 
```

请注意，您不需要初始的“javascript:”（浏览器知道它是 javascript）

# html - IE 中的 CSS 问题

> ID：11861491
> 
> 赞同：0
> 
> 时间：2012-08-08T09:25:42.523
> 
> 标签：html, css, internet-explorer

我已经使用 html 和 css 设计了一个登录表单。样式在 chrome 和 firefox 中正确显示。但是在IE中它有一些问题。

**HTML**

```
<div id="wrapper">
<div id="page">
    <form id="adminLoginForm">
        <label>User Name :</label>
        <input type="text" class="uname"/>
        <label>Password :</label>
        <input type="password" class="pwd"/>
        <input type="submit" class="loginSubmit submit" value="SUBMIT"/>
        <p class="alert loginAlert">Test alert</p>
    </form>
</div>
</div> 
```

**CSS**

```
#wrapper{
    width:1000px;
    margin:0 auto;
}
p{
    margin:0;
    padding:0;
}
#page{
    float: left;
    width: 1000px;
    min-height: 480px;
    background-color: #FFFFFF;
    padding-bottom:20px;
}
.submit{
    float:left;
    width: 130px;
    padding-top: 5px;
    padding-bottom: 5px;
    font-weight: bold;
    cursor: pointer;
    height:30px;
    background: url('/img/bg/submit.jpg');
    border: none;
    border-radius: 10px;
    color: #960000;
}
.alert{
    float: left;
    width: 100%;
    margin-top: 5px;
    color: #C00;
    display:none;
}
#adminLoginForm{
    float: left;
    width: 350px;
    height: 170px;
    margin-left: 325px;
    margin-top: 150px;
    background: url('/img/bg/b15.jpg');
    border-radius: 10px;
    box-shadow: 0px 0px 10px #A38D77;
    padding-top: 10px;
}
#adminLoginForm label{
    float: left;
    width: 150px;
    text-align: right;
    font-weight: bold;
    color: #000000;
    font-size: 15px;
    margin-top: 20px;
}
#adminLoginForm input{
    float: left;
    width: 150px;
    margin-top: 19px;
    margin-left: 5px;
    padding-left: 5px;
    padding-right: 5px;
}
#adminLoginForm input.loginSubmit{
    width:130px;
    margin-left:111px;
} 
```

**在 Chrome 和 Firefox 中输出** ![铬合金](../Images/bd6673aa74251762814873b6ad00c46c.png)

**IE中的输出**
![IE](../Images/ccdf5d3e8829e99acce1fdb301d7b9ff.png)

我知道`border-radius`并且`box-shadow`在 IE 中不起作用。但我不知道为什么 IE 中的标签和文本框之间存在差距。谁能帮我解决这个问题..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:36:15.237

如果您将表单的内容包装在一个 div 中，然后该 div 将成为该表单的唯一子项，则问题已解决：

**HTML：**

```
<form id="adminLoginForm">
    <div>
        <label>User Name :</label>
        <input type="text" class="uname"/>
        <label>Password :</label>
        <input type="password" class="pwd"/>
        <input type="submit" class="loginSubmit submit" value="SUBMIT"/>
        <p class="alert loginAlert">Test alert</p>
    </div>
</form> 
```

我之所以想到这一点，是因为我记得（在 XHTML 似乎将成为新的 Web 标准的时代），对于**XHTML**，本机内联元素（如`<label>`和`<input>`）不是该元素的有效子`<form>`元素。

我*不*认为常规**HTML**是这种情况，但关键是`<form>`标签和各种`<input>`元素相当特殊，并且倾向于遵循自己的 CSS 格式规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:39:34.293

尝试对这些类型的设计使用表格模式..所有浏览器的最佳兼容性技巧..

```
<div id="wrapper">
<div id="page">
    <form id="adminLoginForm">
    <table>
        <tr><td><label>User Name :</label></td><td><input type="text" class="uname"/></td></tr>
        <tr><td><label>Password :</label></td><td><input type="password" class="pwd"/></td></tr>
        <tr><td colspan="2" style="text-align:center;"><input type="submit" class="loginSubmit submit" value="SUBMIT"/></td></tr>                        
    </table>
        <p class="alert loginAlert">Test alert</p>
    </form>
</div>
</div> 
```

# java - 使用 jquery 或 jsp 或 javascript 在 html 中显示 windows 目录结构。

> ID：11861493
> 
> 赞同：0
> 
> 时间：2012-08-08T09:25:43.840
> 
> 标签：java, jquery, html, jsp

我想在网页中显示 windows 目录结构，以便用户可以选择文件并上传到服务器进行备份。使用 java 能够获取所有目录和文件，但我不知道如何进一步在 web 中显示它们页面与 windows 目录结构一样。我已经看到了很多 jquery 插件。它们都是静态的。我需要一个动态的树结构。它必须显示所有用户驱动器、目录和文件。请帮助我找到解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T09:29:38.113

试试 jQuery 文件树[插件](http://www.abeautifulsite.net/blog/2008/03/jquery-file-tree/)。

[演示](http://labs.abeautifulsite.net/archived/jquery-fileTree/demo/)

# complexity-theory - 作业调度概率的变化

> ID：11861499
> 
> 赞同：0
> 
> 时间：2012-08-08T09:25:57.920
> 
> 标签：complexity-theory, scheduling, theory, np

我正在为一家航空运输公司做一些行政工作。他们在这里建造飞机集装箱等。他们希望我编写的其中一件事是一个订单优化脚本，在场的人可以使用它来充分利用给定的材料。给出一个简单的概述：假设我们订购了一定数量的每单位 10 米的梁。我们需要 5x 6m、10x 3.5m、4x 3m 的梁块，它们是通过将 10m 切割成更小的部分来获得的。我们需要订购的 10m 光束的最小数量是多少？

与多处理器作业调度问题有一些相似之处（一个梁是一个处理器，每个块都是一个作业），尽管它侧重于最小化执行所有作业所需的时间，而不是最小化执行所有作业所需的处理器数量。 -设置时间。多处理器作业调度问题是 NP 完全的，但我想知道我对问题的变体是否也是。有没有人知道类似的问题和解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T06:11:48.480

这个问题正是：[http](http://en.wikipedia.org/wiki/Cutting_stock_problem) ://en.wikipedia.org/wiki/Cutting_stock_problem （更普遍的是[http://en.wikipedia.org/wiki/Bin_packing_problem](http://en.wikipedia.org/wiki/Bin_packing_problem)）。您可以使用任何旧的 ILP 求解器。我喜欢[http://lpsolve.sourceforge.net/5.5/](http://lpsolve.sourceforge.net/5.5/)，它使用起来非常友好。

# .net - 如何使第三方dll中的方法在vb6中可见？

> ID：11861502
> 
> 赞同：0
> 
> 时间：2012-08-08T09:25:58.443
> 
> 标签：.net, dll, vb6

我有我的 C#.net 类库（`MyLib.dll`）。`Other.dll`MyLib.dll 正在调用通过引用我的类库（MyLib.dll）添加的其他第三方 dll( ) 文件。

现在的问题是`MyLib.dll`要在 vb 6.0 中使用。

我已经注册`MyLib.dll`启用 COM，并且我已经`Register for COM Interop`在我的类库的属性中设置了选项。

我还为（使用）和为使它们在 COM 中可见生成`.tlb`了文件。我可以在 vb6 的参考文献中看到这两个。`MyLib.dll``Regasm``Other.dll``MyLib and Other`

中的方法`MyLib`可见，但`Other`使用 vb6 打开时不可见。

我也尝试将 MyLib 放在 GAC 中，但`Other.dll`（第三方 dll）不支持 vb6，它只支持 C#.net 和 VB.Net。

如何使`Other.dll`vb6 中的方法可见。

有什么方法可以使第三方 dll 中的方法可见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:34:09.113

所以，如果我理解正确的话，MyLib.dll 在 COM 中是可见的，但 Other.dll 不是。但是，如果从 MyLib.dll 中可以看到 Other.dll，您可以使用 MyLib.dll 作为 Other.dll 和 COM 之间的桥梁。

假设 Other.dll 有一个您希望向 COM 公开的 void Foo(int x, string y) 函数。像这样在 MyLib.dll 上创建一个函数

```
public void Foo(int x, string y)
{
    Other.Foo(x, y);
} 
```

这不行吗？

# c# - ASP.net 和 Javascript 确认

> ID：11861505
> 
> 赞同：0
> 
> 时间：2012-08-08T09:26:22.017
> 
> 标签：c#, javascript, asp.net

我有这种情况：我有一个带有表单和操作按钮的 asp 页面。当用户点击按钮时，它必须显示一个确认框（确认）来询问用户。如果用户说 OK，则必须执行操作 A，如果用户说取消，则必须执行操作 B。问题是 A，B 操作在服务器端，而用户在客户端。因为它需要 2 次操作，所以我*无法*添加`return confirm()`到`onclick`属性中。所以我所做的是在表单中创建一个隐藏字段并编写javascript函数来询问用户并在隐藏字段中返回值并提交表单然后根据隐藏字段在服务器上采取行动。

我的问题是：这个案例有更好的设计吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:31:16.137

是的，至少在我看来，值得一看 ajax 控制工具包，特别是：

[http://www.asp.net/ajaxlibrary/act_Popup.ashx](http://www.asp.net/ajaxlibrary/act_Popup.ashx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:35:02.937

在表单中使用两个按钮，而不是在提交表单后询问。

```
<input type="submit" name="action" value="OK">
<input type="submit" name="action" value="Cancel"> 
```

只有点击的那个才会成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:39:39.820

是的，阿贾克斯是最好的。

您也可以通过 JavaScript 使用

```
location.href = newPageUrl; 
```

主要是重定向场景

# android - android中的KSOAP2双ID异常

> ID：11861506
> 
> 赞同：3
> 
> 时间：2012-08-08T09:26:24.270
> 
> 标签：android, android-ksoap2, runtimeexception

我在我的 android 应用程序中使用 KSOAP2，当我尝试执行特定的 web 服务请求时，我得到了这个“双 ID”异常。我哪里错了？请帮我。

```
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(SOAP_ADDRESS);

        SoapPrimitive response = null;
        try {   
          androidHttpTransport.call(SOAP_ACTION, envelope); //<<--- Getting exception here
          response = (SoapPrimitive)envelope.getResponse();

        } catch (Exception e) {
            e.printStackTrace();
            Toast.makeText(getApplicationContext(), e+"", Toast.LENGTH_LONG).show();
        } 
```

堆栈跟踪 ：

```
java.lang.RuntimeException: double ID
at org.ksoap2.serialization.SoapSerializationEnvelope.read(SoapSerializationEnvelope.java:407)
at org.ksoap2.serialization.SoapSerializationEnvelope.readUnknown(SoapSerializationEnvelope.java:273)
 at org.ksoap2.serialization.SoapSerializationEnvelope.read(SoapSerializationEnvelope.java:389)
at org.ksoap2.serialization.SoapSerializationEnvelope.readUnknown(SoapSerializationEnvelope.java:273)
at org.ksoap2.serialization.SoapSerializationEnvelope.read(SoapSerializationEnvelope.java:389)
at org.ksoap2.serialization.SoapSerializationEnvelope.readUnknown(SoapSerializationEnvelope.java:273)
 at org.ksoap2.serialization.SoapSerializationEnvelope.read(SoapSerializationEnvelope.java:389)
at org.ksoap2.serialization.SoapSerializationEnvelope.readUnknown(SoapSerializationEnvelope.java:273)
 at org.ksoap2.serialization.SoapSerializationEnvelope.read(SoapSerializationEnvelope.java:389)
 at org.ksoap2.serialization.SoapSerializationEnvelope.parseBody(SoapSerializationEnvelope.java:151)
 at org.ksoap2.SoapEnvelope.parse(SoapEnvelope.java:140)
 at org.ksoap2.transport.Transport.parseResponse(Transport.java:116)
at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:235)
at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:114)
at com.menthatech.soap_login_test.SampleSoapTest_LoginActivity.onClick(SampleSoapTest_LoginActivity.java:94)
at android.view.View.performClick(View.java:2408)
at android.view.View$PerformClick.run(View.java:8816)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4627)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-28T16:48:27.203

我今天遇到了这个异常...不知道你的情况是不是一样...

在我的情况下，是因为 Web 服务（C#）返回一个数据集，但是，我改变了一些列然后返回，所以，我有 2 个具有相同 ID 的表。带有 diffgr:before 标签。

因此，当您处理数据集时，只需将代码放在 Web 服务返回对象之前：

**ds.AcceptChanges();**

:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T11:01:32.770

**这是一个很好的例子，可以帮助你：[点击这里](http://code.google.com/p/ksoap2-android/wiki/CodingTipsAndTri)**

**这是我对这个问题的快速修复：**

```
SoapSerializationEnvelope soapEnvelope = new SoapSerializationEnvelope(
            SoapEnvelope.VER11);

SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);
soapEnvelope.setOutputSoapObject(Request);
soapEnvelope.dotNet = true;

List<Integer> companies =  new ArrayList<Integer>();
companies.add(65);
companies.add(66);
companies.add(67);

Request.addProperty("name", "test1");
SoapObject soapCompanies = new SoapObject(NAMESPACE, "companies");
for (Integer i : companies){
    soapCompanies.addProperty("int", i);
}
Request.addSoapObject(soapCompanies); 
```

**输出 XML：**

```
<n0:companies xmlns:n0 = "http://tempuri.org/">
            <int i:type = "d:int">65</int>
            <int i:type = "d:int">66</int>
            <int i:type = "d:int">67</int>
</n0:companies>
<name i:type = "d:string">test1</name> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-09-10T03:19:25.890

我想为遇到这个问题的人记录下不同的解决方案......

因为调用DataSet 数据回XML 使用“diffgram”。“双 ID”错误是 <diffgr:id> 重复，具有相同的 ID

例如：
A 表有“Table”、“Table1”（如果您的数据集选择更多表）
如果“A”有 11 条记录并显示到 XML 是
<Table diffgr:id="Table1">、<Table diffgr: id="Table2">.........<Table diffgr:id="Table11">

如果 B 有 10 条记录并显示给 XML 是
<Table1 diffgr:id="Table11">、<Table diffgr:id="Table12">.........<Table diffgr:id="Table110">

所以。您可以看到 diffgr:id="Table11" 重复。这就是为什么有“双重身份”错误

**解决方案**

更改数据集表名称

SqlDataAdapter.Fill(DataSet);
DataSet.Tables[0].TableName = "Table_";
DataSet.Tables[1].TableName = "Table1_";
数据集.AcceptChanges();

# javascript - 显示最新评论并向上滚动以查看旧评论

> ID：11861508
> 
> 赞同：1
> 
> 时间：2012-08-08T09:26:28.497
> 
> 标签：javascript, html, css

我是新手，但我想知道有没有办法显示 div 中的最后一个 li

例如：我有 20 条评论，`<div style="height:500px;overflow-y:scroll"></div>`每个评论`<li>`的高度会有所不同，并且超过`<div>`. 所以我们可以在 div 内滚动到第一条和最后一条评论

我想要做的是当页面加载时我希望显示最后一条评论然后如果用户想要他可以向上滚动以查看较旧的评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:33:46.923

```
var commentDiv = $('#myDiv');
var distanceToScroll = commentDiv.innerHeight();

commentDiv.scrollTop(distanceToScroll); 
```

可能会发生评论可能比可见区域长，并且评论的顶部可能在上面的代码中不可见。

然后，

```
var lastComment = commentDiv.find('.comments').last();
distanceToScroll -= (lastComment.outerHeight() - 10); 
```

# linux - bash mysql / public_html 仅备份脚本

> ID：11861510
> 
> 赞同：0
> 
> 时间：2012-08-08T09:26:35.277
> 
> 标签：linux, bash, backup

在我的专用设备上，有一个我想备份到的 5gig NAS。最终对每个 cPanel 的 MySQL 表和 public_html 进行备份，

我如何读取 MySQL 表文件夹 (/var/lib/mysql) 的内容，如果找到子文件夹，则制作找到的子文件夹的 tar.gz 文件，然后将它们复制到 /mnt/mysql_backup/date /数据库名称。

然后去 /home/ 遍历每个文件夹以备份 /public_html/ 文件夹所在的位置，然后将文件复制到 /mnt/files_backup/date/cpanelfoler

如果脚本成功完成。删除旧备份并仅保留刚刚创建的最后一个备份。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:55:40.290

试试这个脚本：

```
#! /usr/bin/bash

OK=0          
KO=1

MYSQL_DIR="/var/lib/mysql"
MYSQL_BACKUP_DIR="/mnt/mysql_backup/date/dbname"
HTML_DIR="/home/public_html"
HTML_BACKUP_DIR="/mnt/files_backup/date/cpanelfoler"
LOG_FILE="/tmp/backup_log.log"

function archiving
{
        local return_status=$OK         # Function return status
        local IN_DIR=$1                 # Input directory
        local ARC_DIR=$2                # Archiving directory

        final_arc_dir=$ARC_DIR
        timestamp=`date +%Y%m%d%H%M%S`
        # Archive will be like this : archive_YYYYMMDDHHMMSS
        final_arc_dir=${final_arc_dir}/archive_$timestamp

        if [ ! -d "$final_arc_dir" ]; then
        echo "Creating directory $final_arc_dir"
        mkdir -p $final_arc_dir
        fi

        # More secure : copy then delete instead of moving
        echo "Copying files ... to $ARC_DIR"
        # For each file, or directory we copy than delete
        cp -r $IN_DIR $final_arc_dir
        return_last_command=`echo $?`
        if [ $return_last_command -ne 0 ]
        then
                return_status=KO
                echo "Error copying files ---> $IN_DIR"
        else
                rm -rf $IN_DIR
        fi

        # Archive name
        archive_name=$(echo $final_arc_dir |  awk -F/ '{print $NF}')
        # We can compress
        tar cvf - $final_arc_dir | gzip > $ARC_DIR/$archive_name.tar.gz
        ret=$?
        if [ $ret -ne 0 ]
        then
                echo "Compression failed ---> $final_arc_dir"
                return_status=$KO
        else
                echo "Compression terminated successfully, we can delete original directory"
                rm -rf $final_arc_dir
        fi

        # Cleanup old archives
        for f in `ls -l $ARC_DIR | awk '{print $9}' | grep -v "$timestamp"`
        do
            echo "\nRemove this older backup --------------------> $f\n"
            rm -rf $ARC_DIR/$f
        done

        return $return_status
}

### MAIN ###

### Archiving MYSQL FILES
if ! archiving $MYSQL_DIR $MYSQL_BACKUP_DIR
then
    echo "\nError archiving MYSQL FILES ----> KO" | tee -a $LOG_FILE
    exit $KO
fi

### Archiving HTML FILES
if ! archiving $HTML_DIR $HTML_BACKUP_DIR
then
    echo "\nError archiving HTML FILES ----> KO" | tee -a $LOG_FILE
    exit $KO
fi

# All seems to be ok
echo "\nAll seems to be okay\n"
exit $OK 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:57:40.040

使用[`mysqldump`](https://dev.mysql.com/doc/refman/5.0/en/mysqldump.html)：

```
$ mysqldump my_database > my_database_dump.sql 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T12:09:53.047

要备份mysql，我会考虑使用mysqldump。但请记住，mysqldump 在运行时会锁定表。如果您的数据库中有大量数据，则此过程可能需要相当长的时间。

如果您不能长时间锁定数据库，我会做一个镜像并在该镜像上运行备份脚本。（在这里找到一个详细的分步过程： http: [//www.howtoforge.com/mysql_database_replication](http://www.howtoforge.com/mysql_database_replication)）

要备份您的数据库，您可以执行以下操作：

```
BACKUPDATE=$(date +"%Y%m%d")
BACKUPDIR='/mnt/backup'

BACKUPUSER='bkpUser'
BACKUPPASS='bkpPassword'

mkdir -p $BACKUPDIR/$BACKUPDATE/databases/

for DATABASE in $(mysql -u$BACKUPUSER -pBACKUPPASS -e "show databases" | grep -v Database | grep -v  information_schema)
  do 
      mysqldump -u$BACKUPUSER -pBACKUPPASS $DATABASE > $BACKUPDIR/$BACKUPDATE/databases/$DATABASE.sql
  done 
```

这应该每天创建一个新文件夹并将所有数据库转储到其中。

对于 public_html 文件夹，类似于

```
tar czvf $BACKUPDIR/$BACKUPDATE/public_html.tar.gz $(find /home/  -type d -name public_html) 
```

添加一点错误检查，这应该可以帮助您。

关于备份的最后一句话。我强烈建议您保留比上次备份文件更多的内容。像把每一件事都保留一个星期和每个月一个对我来说听起来不错。

# php - 为什么 sqlsrv_fetch_array 没有得到选择查询的第一行

> ID：11861514
> 
> 赞同：2
> 
> 时间：2012-08-08T09:26:42.657
> 
> 标签：php, sql

我正在使用这个选择

```
$sql1=" SELECT pole FROM Table1 WHERE dva='d'"; 
```

它应该从表中返回所有元素（因为在“dva”字段中它们都有“d”）并使用这个函数来做到这一点

```
while( $row = sqlsrv_fetch_array($st)) {
 // echo $row[0]."<br />";
print_r($row);
} 
```

这是我得到的结果，它从第二行开始，依此类推......

```
Array ( 
    [0] => testxz2 
    [pole] => testxz2 
) 
Array ( 
    [0] => some data 
    [pole] => some data 
) 
Array ( 
    [0] => some data 
    [pole] => some data 
) 
```

在我尝试这个之前，这让我得到了第 1 行和我从上面的代码得到的其他行，

```
 while($pole=sqlsrv_get_field($st,0)){echo $pole;} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-08T09:50:08.857

你能把整个代码放在 fetch 调用之前吗

只需编辑之前的部分：

```
 if( sqlsrv_fetch( $st ) === false) {
     die( print_r( sqlsrv_errors(), true)); 
```

我认为这是错误，因为您正在获取第一个元素，而您用来获取所有行的第二个元素缺少第一个元素，因为已经获取...尝试`while`在第一次获取之前使用您的循环..

# maven - Maven 程序集引用父项目？

> ID：11861515
> 
> 赞同：2
> 
> 时间：2012-08-08T09:26:50.427
> 
> 标签：maven, maven-assembly-plugin

我试图让我的程序集（从一个专用的子项目运行）包含由父级聚合的 Javadoc。不幸的是，当我尝试在 moduleSet 中包含父级时，它在装配过程中被忽略，如下所示：

```
[WARNING] The following patterns were never triggered in this artifact inclusion
filter:
o  'com.company.foo.product:foo-java-product' 
```

我怀疑这是因为父级在技术上不是“模块”，但我想不出任何其他方式来引用父级目标目录中的 javadoc。我从子模块运行程序集的原因是，当从父 pom.xml 运行时，我无法让 dependencySet 工作（实际上与上面的错误类似）。

有人可以推荐一个解决方案吗？

这是我的程序集文件（它已经成功获取了我想要的源代码和依赖项）：

```
<assembly>
  <id>dist</id>
  <formats>
    <format>dir</format>
  </formats>
  <includeBaseDirectory>false</includeBaseDirectory>
  <moduleSets>
    <!-- Include Javadoc -->
    <moduleSet>
        <useAllReactorProjects>true</useAllReactorProjects>
        <includes>
            <include>com.company.foo.product:foo-java-product</include>
        </includes>
        <sources>
            <includeModuleDirectory>false</includeModuleDirectory>
            <fileSets>
                <fileSet>
                    <outputDirectory>docs/Javadoc</outputDirectory>
                    <directory>target/site</directory>
                </fileSet>
            </fileSets>
        </sources>
    </moduleSet>
    <!-- Include sources for sample project tests-->
    <moduleSet>
        <useAllReactorProjects>true</useAllReactorProjects>
        <includes>
            <include>com.company.foo.product:samples</include>
        </includes>
        <sources>
            <includeModuleDirectory>false</includeModuleDirectory>
            <fileSets>
                <fileSet>
                    <outputDirectory>source</outputDirectory>
                    <directory>src/test/java</directory>
                    <includes>
                        <include>com/company/foo/samples/Sample*.java</include>
                    </includes>
                </fileSet>
            </fileSets>
        </sources>
    </moduleSet>
  </moduleSets>
  <dependencySets>
    <!-- Include 3rd Party Dependencies -->
    <dependencySet>
        <excludes>
            <exclude>com.company.foo.product:common</exclude>
            <exclude>com.company.foo.product:consumer</exclude>
            <exclude>com.company.foo.product:publisher</exclude>
            <exclude>com.company.foo.product:samples</exclude>
        </excludes>
        <outputDirectory>lib</outputDirectory>
        <useProjectArtifact>false</useProjectArtifact>
    </dependencySet>
  </dependencySets>
</assembly> 
```

这是应用程序分发 pom.xml

```
<project>
  <parent>
    <groupId>com.company.foo.product</groupId>
    <artifactId>foo-java-product</artifactId>
    <version>0.5-SNAPSHOT</version>
  </parent>
  <modelVersion>4.0.0</modelVersion>
  <artifactId>app-distribution</artifactId>
  <name>app-distribution</name>
  <packaging>pom</packaging>
  <dependencies>
    <dependency>
        <groupId>com.company.foo.product</groupId>
        <artifactId>consumer</artifactId>
    </dependency>
    <dependency>
        <groupId>com.company.foo.product</groupId>
        <artifactId>publisher</artifactId>
    </dependency>
    <dependency>
        <groupId>com.company.foo.product</groupId>
        <artifactId>samples</artifactId>
    </dependency>
  </dependencies>

  <build>
    <plugins>
        <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <version>2.3</version>
            <configuration>
                <descriptors>
                    <descriptor>assemblies/sources.xml</descriptor>
                </descriptors>
            </configuration>
            <executions>
                <execution>
                    <id>make-assembly</id>
                    <phase>package</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
  </build>
</project> 
```

我的父母 pom.xml 看起来像这样：

```
<project>
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.company.foo.product</groupId>
  <artifactId>foo-java-product</artifactId>
  <version>0.5-SNAPSHOT</version>
  <packaging>pom</packaging>
  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
  </properties>
  <modules>
    <module>Common</module>
    <module>Consumer</module>
    <module>Publisher</module>
    <module>Samples</module>
    <module>app-distribution</module>
  </modules>
  <build>
    <pluginManagement>
        <plugins>
            ...
        </plugins>
    </pluginManagement>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-javadoc-plugin</artifactId>
            <version>2.8.1</version>
            <configuration>
                <quiet>true</quiet>
                <stylesheet>maven</stylesheet>
                <splitindex>true</splitindex>

            </configuration>
            <executions>
                <execution>
                    <id>javadoc-jar</id>
                    <phase>package</phase>
                    <goals>
                        <goal>aggregate</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        <!--
        <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <version>2.3</version>
            <configuration>
                <descriptors>
                    <descriptor>assemblies/sources.xml</descriptor>
                </descriptors>
            </configuration>
            <executions>
                <execution>
                    <id>make-assembly</id>
                    <phase>package</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
        -->
    </plugins>

  </build>
  <dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>com.company.foo.product</groupId>
            <artifactId>common</artifactId>
            <version>${project.version}</version>
        </dependency>
        <dependency>
            <groupId>com.company.foo.product</groupId>
            <artifactId>publisher</artifactId>
            <version>${project.version}</version>
        </dependency>
        <dependency>
            <groupId>com.company.foo.product</groupId>
            <artifactId>consumer</artifactId>
            <version>${project.version}</version>
        </dependency>
        <dependency>
            <groupId>com.company.foo.product</groupId>
            <artifactId>samples</artifactId>
            <version>${project.version}</version>
        </dependency>
  </dependencyManagement>
</project> 
```

# mysql - 带有另一个表结构信息的 Mysql 表

> ID：11861516
> 
> 赞同：0
> 
> 时间：2012-08-08T09:26:50.717
> 
> 标签：mysql, database

我想制作一个`A`包含以下字段的表格：`id, name, type`.

它代表`B` 另一个表的成员和验证方案`B`

所以假设`A`有以下数据：

```
id  | Name | Type
0   | f1   | int
1   | f2   | date 
```

然后 B 有`f1`和作为具有类型和`f2`的字段`int``date`

我的问题，这可能吗？

我应该使用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:19:53.917

这是可能的，因为它已经在**INFORMATION_SCHEMA 表**中完成，该`COLUMNS`表将为您提供任何表的成员详细信息。

见：[http ://dev.mysql.com/doc/refman/5.0/en/information-schema.html](http://dev.mysql.com/doc/refman/5.0/en/information-schema.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:31:15.693

你需要运行这个查询：

```
DESCRIBE table_name; 
```

它会给你一个列名和类型的列表。

您只需要找到一种自动化流程来填充您的表 A

您可以通过以下方式获取所有表的列表：

```
SHOW TABLES; 
```

# css - 在 Firefox 中显示 Arial Black 有技巧吗？

> ID：11861519
> 
> 赞同：14
> 
> 时间：2012-08-08T09:26:58.907
> 
> 标签：css, firefox, bugzilla, webfonts, font-family

由于 Arial black 在 firefox 中存在问题，有没有办法在不使用@font-face 嵌入的情况下显示它？

[https://bugzilla.mozilla.org/show_bug.cgi?id=644385](https://bugzilla.mozilla.org/show_bug.cgi?id=644385)

我已经看到了一些解决方法，例如使用

```
font-weight: 900;
font-family:'Arial Black', Gadget, sans-serif; 
```

但是这种方法对我不起作用。建议？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-08T09:33:52.797

问题（根据错误）是Firefox使用的Windows DirectWrite API被`Arial Black`视为`font-family: Arial; font-weight: bold;`（[注释#8](https://bugzilla.mozilla.org/show_bug.cgi?id=644385#c8)），因此根据[注释#10](https://bugzilla.mozilla.org/show_bug.cgi?id=644385#c10)，您需要使用：

```
font-family: "Arial Black", Arial;
font-weight: 900; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-08T10:07:58.483

似乎现在最好的解决方案是使用 font-face 检查本地机器上是否存在字体。我想这比将字体上传到 Font Squirrel 并生成一堆要嵌入的文件要好。

```
@font-face {

    font-family: 'arial-black';
    src: local('Arial Black');

}

#nav {

font-family:"Arial Black", arial-black, sans-serif;

} 
```

它将像普通的网络安全字体一样调用 Arial Black，如果这不起作用（在这种情况下为 Firefox），它将回退到 font-face 以在本地计算机中查找它。

如果有人有更好的方法，请随时发布。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-06T15:16:11.900

Arial Black 是 Arial 系列的 900 重量。因此，在您的 Firefox 中使用 Arial `font-family`，如下所示：

```
font-family:"Arial Black", Gadget, Arial, sans-serif;
font-weight: 900; 
```

这是在[bugzilla.mozilla.org中报告的](https://bugzilla.mozilla.org/show_bug.cgi?id=644385#c10)

# android - 在 node.js 中解析为 JSON

> ID：11861523
> 
> 赞同：0
> 
> 时间：2012-08-08T09:27:04.793
> 
> 标签：android, json, http, node.js, post

我有这个 Java 代码

```
DefaultHttpClient httpclient = new DefaultHttpClient();         
        HttpPost httpPostRequest = new HttpPost(URL);           
        StringEntity se;            
        se = new StringEntity(jsonObjSend.toString());          
        // Set HTTP parameters          
        httpPostRequest.setEntity(se);          
        httpPostRequest.setHeader("Accept", "application/json");            
        httpPostRequest.setHeader("Content-type", "application/json");          
        //httpPostRequest.setHeader("Accept-Encoding", "gzip"); 
        // only set this parameter if you would like to use gzip compression            
        long t = System.currentTimeMillis();            
        HttpResponse response = (HttpResponse) httpclient.execute(httpPostRequest); 
```

这在 node.js 中

```
var http = require('http');
// Configure our HTTP server to respond with Hello World to all requests.
var server = http.createServer(function (request, response) {
console.log("Entering");

if ( request.method === 'POST' ) {

     // the body of the POST is JSON payload.
     request.pipe(process.stdout);   
     }

});

// Listen on port 8000, IP defaults to 127.0.0.1
server.listen(8000);

// Put a friendly message on the terminal
console.log("Server running at http://127.0.0.1:8000/"); 
```

我使用管道在控制台中写入所有内容，以确保我收到数据。我真正想要的是将数据解析回 JSON，然后将其保存在数组中。如何从请求中获取数据？有人有代码示例吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:08:44.227

```
var http = require('http');
// Configure our HTTP server to respond with Hello World to all requests.
var server = http.createServer(function (request, response) {
console.log("Entering");

if ( request.method === 'POST' ) {

        // the body of the POST is JSON payload.
        request.pipe(process.stdout);   

        var data = '';
        request.on('data', function(chunk) {
            data += chunk;
        });

        request.on('end', function() {
            try {
                data = JSON.parse(data);
            } catch (e) {
                console.log(e);
            }
        });
    }

});

// Listen on port 8000, IP defaults to 127.0.0.1
server.listen(8000);

// Put a friendly message on the terminal
console.log("Server running at http://127.0.0.1:8000/"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T07:56:48.393

尝试在您的代码中使用以下概念

```
 response.on('data', function (chunk)
        {
                var data = chunk.toString();
                var data_val = JSON.parse(data)
          }); 
```

# html - 消除页面底部的空白

> ID：11861524
> 
> 赞同：3
> 
> 时间：2012-08-08T09:27:10.860
> 
> 标签：html, css, removing-whitespace

最初我有一个显示为渐变背景的背景图像。想要拥有纯黑色背景，我删除了指向背景图像/重复 x 的链接。结果是页面底部有一个大的空白区域。我已经搜索了很多这个常见问题的答案，但没有一个能帮助我解决这个问题。

这是一个 .php 站点，所以如果有一个 html .div 则我找不到它，但在 css 样式表中它只是读作 #top-bg with background: #000000

我试过增加 height: 100%; 不知道在哪里调整某些网站推荐的边距。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T09:30:10.387

```
body, html{
    padding:0!important; 
    margin:0 !important;

    background:#000;//is this what you want?
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:22:33.113

尝试这个

```
body, html {

background:#000;
height:100%;
padding:0;
margin:0

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:36:15.420

首先，您是否认为删除默认浏览器填充和边距？

```
html{
    margin: 0;
    padding: 0;
} 
```

另外，在哪里定义你的背景？

*   在你的第一个 div 中？
*   在你的身体里？
*   在你的 HTML 中？

为了更好，背景是在你的身体标签中定义的：

```
body{
    background-color: #FCC; /* for test */
} 
```

如果您没有填充，没有边距，此代码为您工作......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-29T10:06:27.123

```
html {
  background:#000;
} 
```

这足以让我删除空白。

# javascript - 使用 JavaScript 将多维数组保存到 XML

> ID：11861527
> 
> 赞同：1
> 
> 时间：2012-08-08T09:27:24.840
> 
> 标签：javascript, xml, json, multidimensional-array

所以我有一个看起来像这样的多维数组：

```
var map = [[0, 0, 0, 0, 0, 0, 0],
           [0, 3, 0, 0, 2, 0, 0],
           [0, 0, 0, 0, 4, 0, 4],
           [0, 0, 0, 0, 5, 0, 5],
           [0, 0, 0, 0, 0, 0, 1],
           [0, 0, 2, 5, 0, 0, 0],
           [0, 0, 0, 2, 0, 0, 0],
           [0, 4, 0, 0, 0, 0, 0],
           [0, 0, 0, 0, 0, 0, 0]]; 
```

我想把它保存到我的 XML 文件中。

我的 XML 文件如下所示：

```
<TileMaps>
<Level> <!-- Level 1  -->
<map>[[1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
          [1, 3, 2, 4, 0, 0, 0, 0, 0, 1],
          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]]</map>
</Level>
<Level> <!-- Level 2  -->
<map>[[1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
          [1, 3, 2, 4, 0, 0, 0, 0, 0, 1],
          [1, 0, 2, 4, 0, 0, 0, 0, 0, 1],
          [1, 1, 1, 1, 1, 1, 1, 1, 1, 1]]</map>
</Level>
</TileMaps> 
```

因此，当我添加数组时，我希望将其放置在以下 XML 文件中：

```
<Level><map> ARRAY HERE </map></Level> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:54:57.683

为此建议使用 JSON。无论如何，如果您想继续使用 XML，请提供解决方案。

**数组到 XML**

使用字符串连接构建 XML 字符串。使用[Crockford 的 JSON 库](https://raw.github.com/douglascrockford/JSON-js/master/json2.js)来构建数组字符串。

```
var map = [[0, 0, 0, 0, 0, 0, 0],
           [0, 3, 0, 0, 2, 0, 0],
           [0, 0, 0, 0, 4, 0, 4],
           [0, 0, 0, 0, 5, 0, 5],
           [0, 0, 0, 0, 0, 0, 1],
           [0, 0, 2, 5, 0, 0, 0],
           [0, 0, 0, 2, 0, 0, 0],
           [0, 4, 0, 0, 0, 0, 0],
           [0, 0, 0, 0, 0, 0, 0]];

var xml = '<TileMaps><level><map>';
xml += JSON.stringify(map);
xml  += '</map></level></TileMaps>';

alert(xml); 
```

jsfiddle：http: [//jsfiddle.net/diode/ZfWjp/](http://jsfiddle.net/diode/ZfWjp/)

然后将其发送到服务器端进行保存。

**XML 到数组**

从服务器加载保存的 XML。

使用 jQuery 来解析它。

```
var xml = '<TileMaps><level><map>[[0,0,0,0,0,0,0],[0,3,0,0,2,0,0],[0,0,0,0,4,0,4],[0,0,0,0,5,0,5],[0,0,0,0,0,0,1],[0,0,2,5,0,0,0],[0,0,0,2,0,0,0],[0,4,0,0,0,0,0],[0,0,0,0,0,0,0]]</map></level></TileMaps>';

var map = $.parseJSON($(xml).find("map").text());

alert(map[0]);
alert(map[1]); 
```

jsfiddle：http: [//jsfiddle.net/kBrCT/1/](http://jsfiddle.net/kBrCT/1/)

注意：如果单个 XML 文件中有多个地图节点，则必须修改此项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:53:03.317

好吧，如果只是将数组本身转换为字符串，您可以这样做：

```
var data = [[0, 0, 0, 0, 0, 0, 0],
       [0, 3, 0, 0, 2, 0, 0],
       [0, 0, 0, 0, 4, 0, 4],
       [0, 0, 0, 0, 5, 0, 5],
       [0, 0, 0, 0, 0, 0, 1],
       [0, 0, 2, 5, 0, 0, 0],
       [0, 0, 0, 2, 0, 0, 0],
       [0, 4, 0, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 0, 0]];

var dataAsString = "[" + data.map(function(item){return "["+item.toString()+"]"}).toString() + "]"

console.log(dataAsString); 
```

**注意：**地图是对 Javascript 的最新补充，它可能不适用于所有浏览器（参见[Mozilla Docs](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T17:09:06.190

这是我的解决方案，它在后端使用 PHP 和 JSON，因此您需要根据需要修改服务器端代码（如果将 JSON 包装在 XML 中，您还需要调整 AJAX 片段中的语法） ...哦，根据您的目标用户，您需要向输入（客户端和服务器端）添加一些验证：

页：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Maker</title>
<style>
#can{width:300px; height:90px; display:block; background-color:#666;}
</style>
</head>

<body>
Which level do you want:<input type="text" id="level_request" value="level1"/><button onclick="init()">Go</button>
</body>
<script>
function saveLevel(){
ajax=((window.XMLHttpRequest)?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"));
name=document.getElementById('level_name').value; //this grabs the content in the Level Name field
if(name.length>0){
    ajax.onreadystatechange=function()
    {
        if (ajax.readyState==4&&ajax.status==200){
            alert('Level saved');
        }
    }
    params='level='+name+'&map='+JSON.stringify(map); //this constructs the message to send, consisting of the name and map
    ajax.open("POST","levels.php",true); //this is the file you will be POSTing a message to
    ajax.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    ajax.setRequestHeader("Content-length", params.length);
    ajax.setRequestHeader("Connection", "close");
    ajax.send(params);
    }
}

var blocksize=30;
var map=[[1,1,1,1,1,1,1,1,1,1],[1,3,0,0,0,0,2,4,0,1],[1,1,1,1,1,1,1,1,1,1]];
var can;
var ctx;

function init(){
    ajax=((window.XMLHttpRequest)?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"));
    ajax.onreadystatechange=function()
    {
        if (ajax.readyState==4){ //this test whether the request is complete
            l=document.getElementById('level_request').value;
            document.body.innerHTML='Level Name:<input type="text" id="level_name" /><br/><canvas id="can" width="300" height="90"></canvas><br/><button onclick="saveLevel()">Save</button>'; //this replaces the initial form
            can=document.getElementById('can')
            if(can){ctx=can.getContext('2d');}

            if(ajax.status==200){ //this test whether it was successful
                m=JSON.parse(ajax.responseText);//this overwrites the existing map with the received data
                console.log(m);
                map=m.tilemaps[l];
                for(y=0;y<map.length;y++){
                    for(x=0;x<map[y].length;x++){
                        draw(y,x);
                    }
                }
                can.addEventListener('click',builder);
            }
            else{ //this is what we do if the request is done and it was a failure
                for(y=0;y<map.length;y++){
                    for(x=0;x<map[y].length;x++){
                        draw(y,x);
                    }
                }
                can.addEventListener('click',builder);
                alert('Something went wrong, loading default level');
            }

        }
    }
    ajax.open("GET","levels.php?level="+document.getElementById('level_request').value,true);
    ajax.send();

}

function builder(e){
    if (e == null) {e = window.event;}
    x = e.clientX; //where the click was
    y = e.clientY;
    offsetX = ExtractNumber(can.offsetLeft);//where the canvas is
    offsetY = ExtractNumber(can.offsetTop);
    x_grid=Math.floor((x-offsetX)/blocksize); //which block in the canvas was clicked
    y_grid=Math.floor((y-offsetY)/blocksize);
    map[y_grid][x_grid]++;
    if(map[y_grid][x_grid]>4){map[y_grid][x_grid]=0;}
    draw(y_grid,x_grid);
}

function draw(y,x){
    kind=map[y][x];
    switch(kind){
        case 0:
            ctx.drawImage(floorimg,x*blocksize,y*blocksize);
        break;
        case 1:
            ctx.drawImage(wallimg,x*blocksize,y*blocksize);
        break;
        case 2:
            ctx.drawImage(blockimg,x*blocksize,y*blocksize);
        break;
        case 3:
            ctx.drawImage(playerimg,x*blocksize,y*blocksize);
        break;
        case 4:
            ctx.drawImage(goalimg,x*blocksize,y*blocksize);
        break;
    }
}

function ExtractNumber(value){
    var n = parseInt(value);
    return n == null || isNaN(n) ? 0 : n;
}
var floorimg=new Image();
floorimg.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAE5JREFUeNpiNDU1ZaANYAHiadOmEaM0KysLSOaCSYJg8rRpTAw0A6NGjxo9avQIMJqRdiUfDV3NQlI5SVIJPJpCRo0eNXrU6EFaqAIEGABIow4bXRyDLQAAAABJRU5ErkJggg==';
var wallimg=new Image();
wallimg.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAEFJREFUeNpirK+vZ8AGGhsbcUkRqYaJgWZg1Gj6AUZIFFOeHjDVjEbjcEoho2XIaAoZLUNGU8hoGTKaQmgAAAIMAJeMK58/yjg2AAAAAElFTkSuQmCC';
var blockimg=new Image();
blockimg.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABrFJREFUeNpUVkluJMcVjTnHmimySRMtQw0I1koLH8v38Cl8Je+8lQWpW252iWRNOcScfj+LgtsJgixmZf74/00R/B9//5t1vjB6YkxJkadJCsE5jylzNgn6LOi3EIyxaZoY51JKISWbrynn6H3Ome7kjCIu5dGG291KFWVZ1PVcgrOvLsP+70JRPl9U/ev7jOV5vRAjluHKWGubuoopilM3GlN0g00p4dHr+28NfnVdb+Y/buLD9cJ9XRSmLJvFEj9loXe7DZYpi0qtFvWlG1jKMSbng9FGSkwvU4rGGHqbTUBAa42KKaaJFp2BYvyPaZhUKoY4iQnYACOtVJ6yCs41bfvx0yHsu5Rz4lpI9fNvz6UWVWnu73b9YEPKt5u268fR+d1qobVic7Mp5eB8fzkLXbRN+Xy8PN5uyrrVAstydSVku6w7yc7nS1Ho7bL90+3qeOlHF3fb9aZ1Uom6afZPXyrFNpsVA5FCoJYPPoSoJCsLw2RRW4dplOS9ZSYlBXKvAwZnN+tVmjJNmSej1ekyvhxOy7oQmaFBQAoUoCJTFEphOCES3g0Yn0tjtDYssQzCeF2RCESeFUPqEeLL4RwCiqM6A8vfvb/DEK/nDgMA5aZtcOGrGAMhh26Ch7DwvJGgJAwJwFSA3lsLTYo4i2ax3k5SdwPmi81yCShBS3BhXZd1WR268fXUMbBVlG8SmSnks1SkkgqExzzzjNeCLktMSUYoihLgsRQA0+HcnY/Hq7Bo3JzbUi6aMgQs5EEM7qQYoWe4CJ4AeCnEDGSLAtq4eurNZigNtdEiSq+bwpjy9dj1fU9PCO6806ZY1cAuH4/d6XDAk1LpWZTQWcQQXEkfMmhgJFoyqrMWHxVKj+MowUNRAHEm8826/fnj5/tbcXNzg69AL8R+tys7F/p+yJNjxCBPUfsQm8pAZ6iLNaboSeaMQZcYjkprBaoxIPfel8ag35v1ooea98+STaYwIBq14CLo9PU8DKO7f3czW0nHnGEoF6ZS5WVbQTlXLqh9/ME4oBVTwBpKsNKowqjdqr0MPuZptO50OiODIO13d998eH9fN/WX56OzLieqC0qrUiK10PHHT7/hDtwP9N9oBE7aaGgHDXIJKHlZN4/vdvBtYJJLBYN3l0t3OUM3KXqkwunSR9IxiXUOnMk6JzSIzVQaajZa/y/GggdoyuhZWPhQbDerQgk+Jec8kIU2vHOllusFmsiHw8tgHcWeD3hjDKTFa8CRQiIQJK9PwJppkFldc4fwZVNVFrff3NgkziNQRYskCaUUMsz2fWfjMNih70mFKCcptSZSLGlcXeP8mpuuu4RCAVauNOIRlQAOF2y3rIB7pjGRbR4FEISrtnI+wjD7l1etpKlqzclAWAJap/BAi9bZq2gCiVtByAit/ecnKA8uRhsotF41pqwuNgz9AIApHrhoF43Kbrtd//NfP9lhID8S8LmuGkAn4iYJ0gmcxDRPgMm7kcFimTCBJLEmCmHW2+0SMWuRP1Kn4FEkeA8EFc9//fGH/zyfl4tm9GnG821LIw9RDcTKBAFN6BqwXTcUNw4wQ103aBz/t22D947nHhsVlabACIA+uPFmu/rl0xM0DwAz5jRGzHagrg2ykb/tVRiBcmAOg0RXpK0W03GBBIdv9y9H9PW22wHalOw4fvtwezxe8Az4nuYo5d0JecSQXmRZQbVyCuCZWJo5EErNoTNpMWH8zbJdLlcztAyYIDvRVlsZ7+1fPjzgKIAihCVSHhlIpwPv4d00G2zeZLnBG3PRRIKOmJRxOErUVbFb1UoXL10gbrsuzKOVRTFeLnjXWoQS9kuhyAWlRtdYbQw4V4TexTwn70hxrJ2zeBQIHA8XTAqpAcVVWwO4f//6ebOsX49nZcpge9UsYAnUwURgIGpucLb56dfPz4czqPHIpf3vcODgArIfEGMW0I4tresHnHxoTK1lHPFk1bQnz+4267HvFosFOI8h6aL0zqphbeuhhou///PD99+9BwIY5cO390DfOgTqgNIQDKCHOTeLGoOTiQUdGhaVXjUFghNCN7yhjPN0/b7fLzdbRZZgEqWtD2Kiw5gkqVxPUpQkHLscI3dl2kgnHE7KqppTgo4C866dJzWhfTJLSudueHh8/OXTFwXekOHL1fLw8enx4Q46pN1yThlgXTA6GZA8rhvi9VQzax4yYtcwouMOtEz5B7qR2iBvu14ozAP+X/bP68Y875/Q1Jy20YZsNMSM3MBJISK4Z7ExaMvi7CE4nkO5MJGKkVToBy5Am4xjk4T5yv8KMAAKNJRh2Lhx4QAAAABJRU5ErkJggg==';
var playerimg=new Image();
playerimg.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAATdJREFUeNpiNDU1ZaANYAHiadOm4ZLGZfGi+fPxmzt52jQWPNJAc/8rKSGLMN679//+ThBD0Z2g6UwMNAM0NJqFVA3AoCAmrAkbDQxcUiOQgNGQhGHc+QpTKi5RjMgEw4LVXKyGQgBE6my5GFwNkF1VW9vc0MDMzIwvGvGbi2wB0EQ4+8mTJ4kpKTRJIRDXFJWU4DSaSCdjOhzCffP2bVxiIk3SNZqzaJxlsrKyqGjiZFhhR2NX58JcjRwJZANIEQ0MiSFS8iGnRXSjgUUBmjR+g5BTG0Tj6dOnqexqiLknTpzAFyBEOhyteAKSJ0+eRCueWLCWkJCSE2umh1uM7ALkcCBQXkPKX6xFM1ZTyKllMGt0SC1BjAUk142wxoIpQdOHX2MBGJmMGKUKpLFATFgz0q45CRBgAHQ6gQd/qFgwAAAAAElFTkSuQmCC';
var goalimg=new Image();
goalimg.src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFtJREFUeNpilJSUZKANYAFiGRkZqpv75MkTJgaagWFv9BMwGA2QUaNHttEsmPmCYMbBJYVWzNHR1XgKWIh7iS+BR1PIqNEjIaPjAaQ2V0bDGktYk9S6IB4ABBgADi4U6URvDncAAAAASUVORK5CYII=';
</script>
</html> 
```

级别.php：

```
<?php
if($_REQUEST['level']&&$_REQUEST['map']){
    $file=file_get_contents('levels.txt'); //get the existing content
    $json=json_decode($file); //convert it from string to object
    $tilemaps=$json->tilemaps;
    $tilemaps->$_REQUEST['level']=json_decode($_REQUEST['map']);
    $o['tilemaps']=$tilemaps;
    $str=json_encode($o);
    $pos=fopen('levels.txt','w');
    fwrite($pos,$str);
    fclose($pos);
}
else{
    header('content-type:application/json');
    echo file_get_contents('levels.txt');
}
?> 
```

# rating - 如何在提交表单上获取选定的星级评分值

> ID：11861539
> 
> 赞同：0
> 
> 时间：2012-08-08T09:28:37.313
> 
> 标签：rating

我想获得这个 ajax 星级评分的选定值：

```
<span id="stars-cap"></span>
  <div id="stars-wrapper2">
     <select name="selrate">
         <option value="1">Déplorable</option>
         <option value="2">Pas satisfaisant</option>
         <option value="3">Correct</option>
         <option value="4" selected="selected">Très satisfaisant</option>
         <option value="5">Parfait</option>
     </select> 
```

我有 4 个区块 评分后，用户必须提交表单。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:32:35.013

给你的选择一个像`selrate`然后使用

```
document.getElementById('selrate').value 
```

# django - 表单被错误的视图处理？

> ID：11861545
> 
> 赞同：0
> 
> 时间：2012-08-08T09:28:49.640
> 
> 标签：django

在 url`/sites/1`我有一个表格：

```
<form action="." method="post">
... 
```

但是，当我提交它时，它`/sites/`由不同的视图处理，导致错误。

这是我的`urls.py`：

```
url(r'^sites/$', 'app.views.sites_view'),
url(r'^sites/(?P<site_id>\d+)$', 'app.views.site_view'),
... 
```

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:53:09.747

您的 URL 在使用斜杠时不一致。

浏览器将 URL 视为目录结构。`.`表示当前“目录”的根。如果您在`/sites/1`，则“当前目录”为`/sites/`。如果您在`/sites/1/`- 即按照 Django 文档中的建议使用斜杠 - 那么当前目录仍然是`/sites/1/`.

确保所有 URL 都以斜杠结尾，并使用默认的附加斜杠功能重定向到任何 URL 的斜杠附加版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:50:15.723

动作应该有 {% url current_view_name %} 值

例如

```
url(r'^sites/$', 'app.views.sites_view'),
url(r'^sites/(?P<site_id>\d+)$', 'app.views.site_view', name="sites_view"), 
```

# python - string.decode() 与 unicode(string)

> ID：11861551
> 
> 赞同：12
> 
> 时间：2012-08-08T09:29:06.087
> 
> 标签：python, string, unicode, decode

```
myString = 'éíěřáé' 
```

我需要将此字符串解码为 un​​icode。以下用法之间以及这两种方法之间有什么区别吗？

```
myString.decode(encoding='UTF-8', errors='ignore') 
```

和

```
unicode(myString, encoding='UTF-8', errors='ignore') 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T09:35:52.383

`unicode`构造函数可以采用除字符串之外的其他类型：

```
>>> unicode(10)
u'10' 
```

然而，对于字节串的情况，这两种形式大多是等价的。一些编码选项对构造函数无效，`unicode`因为它们不会产生 unicode 输出，但`.decode`对字节串的方法有效，例如`'hex'`：

```
>>> unicode('10', encoding='hex')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: decoder did not return an unicode object (type=str) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T09:37:32.833

它们本质上是相同的，但在任何一种情况下都有一些小的性能捷径；`str.decode`知道它的参数是一个字符串，所以它可以快捷地检查它的参数，同时`unicode.__new__`也有一些常见编码的快捷方式，包括 UTF-8。

`PyCodec_Decode`在一般情况下，这两种方法都会调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:36:06.593

在 Python 2.x`str.decode()`中，可能会产生一个 unicode 对象或另一个`str`. 该`unicode()`函数仅适用于产生 unicode 对象的编码。

例如：

```
>>> "x\x9cKLJ\x06\x00\x02M\x01'".decode('zip')
'abc'
>>> unicode("x\x9cKLJ\x06\x00\x02M\x01'", encoding='zip')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: decoder did not return an unicode object (type=str)
>>> 
```

请注意，在内部，它们的工作方式与调用相同，`unicode()`表明它确实解码了对象，然后才反对结果的类型。

# guava - 为什么 Guava EventBus 不实现接口？

> ID：11861552
> 
> 赞同：1
> 
> 时间：2012-08-08T09:29:27.883
> 
> 标签：guava

我目前正在遇到一个用例，我想包装一个 EventBus 实例以使用装饰器模式提供额外的功能。如果 EventBus 将实现一个接口，这很容易做到。使用 EventBus 的当前实现（它直接继承自 Object，不实现接口），这只能通过子类化来完成。

所以我的问题是：没有 EventBus 实现接口是否有特定原因（例如 SyncEventBus 实现 EventBus，AsyncEventBus 扩展 SyncEventBus / 实现 EventBus）？

当然，使用子类实现装饰器模式有一些技巧，但特别是使用 EventBus 并将事件传递给注册对象的方式，这相对复杂且不简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T16:03:40.507

我为您搜索了 Guava 问题跟踪器。

[https://code.google.com/p/guava-libraries/issues/detail?id=875](https://code.google.com/p/guava-libraries/issues/detail?id=875)

# c# - 带有 IDisposable 的简单 ConsoleProgram - 没有内存减少 - 我们有泄漏？

> ID：11861553
> 
> 赞同：3
> 
> 时间：2012-08-08T09:29:28.193
> 
> 标签：c#, .net, memory-leaks, idisposable

我有一个简单的 ConsoleProgram，它正在创建一个包含 80 个 IDisposable 对象的列表。该对象包含两个`System.Threading.ManualResetEvent`在方法中关闭的对象`Dispose()`。请考虑代码：

```
public class Program
{
    private static void Main(string[] args)
    {
        Console.ReadLine();
        Test(80);
        Console.WriteLine("end.");
        Console.ReadLine();
    }

    private static void Test(int c)
    {
        Console.WriteLine("Test start.");

        List<TestObject> list = new List<TestObject>();

        for (int i = 0; i < c; i++)
            list.Add(new TestObject());

        Console.WriteLine("End of adding. Added: {0} items.", c);
        Console.ReadLine();

        foreach (TestObject obj in list)
            obj.Dispose();

        list = null;
        Console.WriteLine("Dispose end.");
    }

    public class TestObject : IDisposable
    {
        public ManualResetEvent mr1 = new ManualResetEvent(true);
        public ManualResetEvent mr2 = new ManualResetEvent(false);

        public void Dispose()
        {
            mr1.Close();
            mr2.Close();
        }
    }
} 
```

我已经测试了我的程序以防内存消耗和内存泄漏。我认为创建所有列表对象后消耗的内存会增加，但调用`Dispose()`方法并将`null`值设置为列表对象后会减少。不幸的是，我有观察者不同的行为。请考虑以下我的测试结果：

1.  程序启动（未创建任何内容）。工作集 = 6.700K
2.  创建了 80 个对象的列表。WorkingSet = 7.160K（内存增长：460K）
3.  程序将该`Dispose()`方法称为集合`null`以列出对象。WorkingSet = 7.164K（内存从最后一点增长：4K）
4.  程序挂起超过 20 分钟。WorkingSet = 7.296K（内存从最后一点增长：105K，内存从头增长：596K）
5.  程序已关闭。

我真的对第3点和第4点感到困惑。为什么没有释放内存？我认为这是内存泄漏，因为总内存增长等于 596K，并且从未释放。

非常感谢您的任何回答。

PS。更改对象的数量（例如更改为 9000）会导致内存增长超过 2MB。

PS2。在我的程序结束时，我要求`GC.Collect()`强制清理。但是在使用的内存量仍然相同并且没有减少之后 - 我很困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T09:34:25.143

调用`Dispose()`并将值设置为 null 不会*立即*释放内存。当垃圾收集器下一次运行时，你的内存应该被释放，但这一次不是确定性的。通常，当应用程序处于内存压力下时会发生这种情况，通常是由于创建对象需要更多内存。如果没有这种压力，并且应用程序处于空闲状态，GC 可能永远不会收集您的内存。

简而言之，这不是内存泄漏。

# macos - 如何在可可中获取文件更改的时间戳

> ID：11861554
> 
> 赞同：-1
> 
> 时间：2012-08-08T09:29:27.657
> 
> 标签：macos, cocoa

作为标题，使用 NSFileManager 我可以获得文件创建时间和修改时间，而我需要的是最后更改时间。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T05:40:57.667

在 cocoa 中做这类事情的首选方法是使用 NSURL。

您可能想使用 fileURLWithPath:isDirectory: 或 fileURLWithPath: 创建 NSURL 实例，然后使用 getResourceValue:forKey:error: 或 resourceValuesForKeys:error: 方法来获取您的资源值。

用于时间戳的资源键是 NSURLAttributeModificationDateKey、NSURLContentAccessDateKey、NSURLContentModificationDateKey 和 NSURLCreationDateKey。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:15:50.007

既然您知道最后状态更改时间之类的东西，为什么不直接使用 stat(2) 呢？还是我误解了这个问题？

stat(2) 会一直给你；创建、修改、访问和元数据已更改；它不是高级别的，但调用起来很简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T09:54:45.250

最后我使用以下方法。

```
#include <sys/stat.h>

long lastChangedTimestamp = 0;
struct stat fileStatus;
if(0 == stat(filename, &fileStatus))
{
    lastChangedTimestamp = fileStatus.st_ctimespec.tv_sec;
} 
```

# c# - 如何处理注册用户群的群发电子邮件警报系统

> ID：11861556
> 
> 赞同：1
> 
> 时间：2012-08-08T09:29:38.197
> 
> 标签：c#, email, sql-server-2008-express, alerts, massmail

我有一个客户想要开发一个系统来处理向选择加入的注册用户发送警报电子邮件。警报基于与地理旅行相关的事件，这些事件是通过第三方网络服务提供的。注册用户群预计约为 500,000 名用户，每个用户可以订阅多个警报类别。

我只是想找出技术上创建此警报功能所需的范围。在我看来，我们会创建如下内容：

*   每小时轮询一次警报服务
*   在临时数据库表中存储警报“队列”
*   将队列表作为计划任务处理并将电子邮件发送给选择加入的用户

我真的不确定的部分是电子邮件的物理发送。我想知道是否有人可以在这里推荐任何好的选择。我想我们正在寻找要么创建一个自定义组件来发送电子邮件，要么使用一个专门的第三方服务（比如 dotMailer？或者一个自定义的群发邮件服务器？）。我已经读过，如果您不小心，推出您自己的解决方案会冒着将 IP 列入黑名单的风险，显然我们希望保持这一切完全合法。

我还应该提到，我们将寻求使用 .NET (C#) 创建解决方案，并且仅限于 SQL Server Express 2008 版本。

任何想法都非常感谢

提前谢谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:29:43.890

对于 Poll 、 Queue 和 Send 操作，我将创建一个调用外部服务的 windows 服务，对数据进行操作，然后收集结果以发送电子邮件，根据需要使用已发送标志等更新数据库。

我最近处理了一个类似的项目，当我们提到大量电子邮件时，我们发现许多 ISP 或托管服务提供商都非常紧张。您应该明确地查看[http://en.wikipedia.org/wiki/CAN-SPAM_Act_of_2003](http://en.wikipedia.org/wiki/CAN-SPAM_Act_of_2003) CAN SPAM 指南（或您所在地区的类似指南）。

只要您遵守规则并遵循指南，您应该可以从本地邮件服务器发送邮件，但重要的是您要确保 MX 记录上的 DNS 查找或反向 DNS 查找都正确地相互指向。确实，将其外包给第三方邮件提供商或 ISV 会更容易，但是当我们尝试时，我们无法找到合适的，最终自己做。

此外，您可能希望查看 SPF 记录和其他增加大量电子邮件传递的方法！对于它的价值，这可能是一项非常棘手的任务，因为 SMTP（我最不喜欢的协议）很难尝试调试，如果人们收到多封或不请自来的电子邮件，他们会非常沮丧，因此请确保您有一个选择加入政策和适当的检查以防止重复交付。

# asp.net - 使用 asp.net 从 URL 保存动态页面

> ID：11861561
> 
> 赞同：0
> 
> 时间：2012-08-08T09:29:57.987
> 
> 标签：asp.net, dynamic

如何在 Asp.net 中获取动态网页的渲染数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:35:18.043

您可以使用 HTML 敏捷包来获取渲染数据

[http://htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/)

例子：-

[如何使用 HTML 敏捷包](https://stackoverflow.com/questions/846994/how-to-use-html-agility-pack)

# wix - UPGRADINGPRODUCTCODE 条件在库中的 wixui_install.wxs 中不起作用

> ID：11861573
> 
> 赞同：2
> 
> 时间：2012-08-08T09:30:32.980
> 
> 标签：wix

UPGRADINGPRODUCTCODE 条件在库中的 wixui_install.wxs 中不起作用

如果第一次安装和进行重大升级，我想将下一个按钮的值更改为相应的 dlg。

这在 wix 库中不起作用。

Publish Dialog="LicenseAgreementDlg" Control="Next" Event="NewDialog" Value="PortNoDlg" >LicenseAccepted = "1" AND NOT UPGRADINGPRODUCTCODE

Publish Dialog="LicenseAgreementDlg" Control="Next" Event="NewDialog" Value="InstallDirDlg" >LicenseAccepted = "1" AND UPGRADINGPRODUCTCODE

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T11:34:23.997

[`UPGRADINGPRODUCTCODE`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372380.aspx)仅为通过[Upgrade 表](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372379.aspx)和[FindRelatedProducts](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368600.aspx) / [RemoveExistingProducts](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371197.aspx)找到的包的隐藏卸载设置。这不会显示任何 UI，因此从该属性调节控制事件将无济于事。

相比之下`UPGRADINGPRODUCTCODE`，没有为较新的安装设置。如果您想根据是否卸载以前的版本来确定您的控制事件，您必须引用`ActionProperty`升级表中每条记录中指定的属性。

# css - 滤镜和背景图片一起

> ID：11861577
> 
> 赞同：0
> 
> 时间：2012-08-08T09:30:46.583
> 
> 标签：css, internet-explorer-8, background, filter, internet-explorer-9

我正在尝试为在 IE8 和 IE9 上“优雅地”降级的按钮创建渐变效果。我有一个光泽渐变按钮，我所做的是为了在 IE9 中获得相同的光泽外观和感觉，我使用的是 SVG 背景图像。对于 IE8，我决定放弃光泽，只坚持基本的两级渐变，问题是，一旦我添加过滤器，它就会优先于 IE9 中的背景，这是我不希望发生的。这个问题有解决方法吗？以下是CSS

```
 input[type="button"], input[type="submit"], input[type="reset"], button {
    padding: 3px 10px 3px 10px;
    margin: 0;
    border: none;
    color: white;
    outline: 0;
    font-size: 0.875em;
    font-family: Arial, Helvetica, sans-serif;
    font-weight: bold;
    overflow: visible;
    width: auto;
    background: #094fa4;
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#009ee5', endColorstr='#094fa4',GradientType=0 );
    background-image: url(../images/btn.svg);
    background: -moz-linear-gradient(top, #2261ad 0%, #2261ad 50%, #094fa4 50%, #094fa4 100%);
    background: -webkit-linear-gradient(top, #2261ad 0%, #2261ad 50%, #094fa4 50%, #094fa4 100%);
    background: -ms-linear-gradient(top, #2261ad 0%, #2261ad 50%, #094fa4 50%, #094fa4 100%);
    /*background:linear-gradient(to bottom, #2261ad 0%, #2261ad 50%, #094fa4 50%, #094fa4 100%);*/
    border-top: 1px solid #4379B9;
    border-bottom: 1px solid #08438C;
    border-radius: 4px;
    cursor: pointer;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:03:33.493

**您可以对IE8**使用 CSS hack 。像这样写：

```
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#009ee5', endColorstr='#094fa4',GradientType=0 )\9; //for IE8 & below.
background-image: url(../images/btn.svg); 
```

阅读更多信息[http://www.gravitationalfx.com/css-hacks-for-ie-targeting-only-ie8-ie7-and-ie6/](http://www.gravitationalfx.com/css-hacks-for-ie-targeting-only-ie8-ie7-and-ie6/)

或者

您可以对不同的浏览器使用条件注释[http://www.quirksmode.org/css/condcom.html](http://www.quirksmode.org/css/condcom.html)

# php - 解析错误：语法错误，意外的 T_VARIABLE functions.php

> ID：11861578
> 
> 赞同：-2
> 
> 时间：2012-08-08T09:30:47.670
> 
> 标签：php, syntax-error

当我们连接到我们的网站时，我们从昨天开始就出现错误：

```
Parse error: syntax error, unexpected T_VARIABLE in /homez.534/planetinm/www/wp-content/themes/ut-gogreen/functions.php on line 301 
```

这是第 301 行，有人可以告诉我语法错误在哪里吗？

```
<input type="text" id="col_<?php echo $i; ?>_title" name="col_<?php echo $i; ?>_title" style="width:350px;" value="<?php echo get_option('col_'$i'_title'); ?>" /> 
```

我认为我们在第 307 行也有一个错误：

```
<textarea id="col_<?php echo $i; ?>_content" name="col_<?php echo $i; ?>_content" style="width:350px;"><?php echo get_option('col_'$i'_content'); ?></textarea> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:33:18.417

你的错误在这里：

```
<?php echo get_option('col_'. $i. '_title'); ?> 
```

您忘记将字符串与`$i`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:33:31.737

第 301 行：

```
value="<?php echo get_option('col_'$i'_title'); ?>" 
```

应该

```
value="<?php echo get_option('col_' . $i . '_title'); ?>" 
```

您忘记了`.`连接字符串的运算符。

与 307 相同：

```
<?php echo get_option('col_'$i'_content'); ?> 
```

应该

```
<?php echo get_option('col_' . $i . '_content'); ?> 
```

# delphi - Delphi - 通用数据模块

> ID：11861580
> 
> 赞同：1
> 
> 时间：2012-08-08T09:31:02.527
> 
> 标签：delphi, generics, datamodule

我正在尝试定义泛型数据模块，如下所示：

```
TDM<T> = class(TDataModule)
public
  function GetValue:T;virtual;abstract;
end; 
```

但是当我这样做时，Delphi 误解了数据模块并认为它的形式（将客户端宽度、字体等表单属性添加到 .dfm 文件中）。我希望这个数据模块仅用于继承，所以我尝试将其作为没有 .dfm 文件的简单类，然后制作从它继承的真实数据模块（带有 .dfm 文件）。例子：

```
TDataModule2 = class(TDM<Integer>)
public
  function GetType:Integer;override;
end; 
```

一切看起来都很棒，但只是在我关闭和打开项目的那一刻。在项目打开时，Delphi 出于某种原因再次将 TDataModule2 解释为表单（这会导致运行时出现异常）。

我正在使用德尔福 XE。有没有办法让这成为可能？

# video - 使用 cfmediaplayer 嵌入 vimeo

> ID：11861581
> 
> 赞同：3
> 
> 时间：2012-08-08T09:31:05.663
> 
> 标签：video, coldfusion, media-player, mp4, vimeo

使用 Coldfusion 9 的`cfmediaplayer`标签，我能够从 vimeo 获取视频以在 Coldfusion 媒体播放器中播放。我想绕过 vimeo 作为嵌入方法的 iframe 并使用冷融合播放器。我使用了以下代码（以及我从[这个页面](http://hwdmediashare.co.uk/forum/27-development-customisation/53527-vimeo-pro)获得的视频）：

```
<cfmediaplayer name="myVid" source="http://player.vimeo.com/external/35713812.sd.mp4?s=127f879fc781ae7e62049696679e5615"" /> 
```

它工作得很好。

然后我将我的 Coldfusion 升级到 CF10。Adobe 已升级其 cfmediaplayer 以支持 flash 和 html5 视频。但是当我尝试使用与上面相同的代码时，媒体播放器会告诉我服务不可用或类型不受支持。如果我没记错的话，Vimeo 提供 mp4 文件（至少链接中的文件是）。我还在另一台计算机上重新测试了 Coldfusion 9，代码片段仍然可以正常工作。

有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T01:48:13.400

也许这是一个临时的网络问题。我刚刚尝试了您的代码（删除了最后的双引号）并加载了视频。如果您仍然看到问题，请分享您使用的浏览器。

# workflow-foundation-4 - 如何可视化工作流程？

> ID：11861585
> 
> 赞同：1
> 
> 时间：2012-08-08T09:31:15.667
> 
> 标签：workflow-foundation-4, visualization

我在第 4 版中使用 Windows 工作流基础。我想问是否有任何方法可以使用 html5 和 js 在网站上简单地显示/可视化工作工作流实例。我不想使用重新托管设计器。我找到了[WorkflowInspectionServices](http://msdn.microsoft.com/en-us/library/system.activities.workflowinspectionservices.aspx)类，但老实说，从中提取工作流图结构并不容易（不同的处理并行活动或流程图）。工作流跟踪系统是发现工作流实例状态/进度的唯一方法吗？

有没有人尝试过类似的东西？任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:06:41.930

WorkflowDesigner 是一个 WPF 组件，因此不能很好地与 HTML 配合使用，但由于您不想使用它，我猜它不是很重要，尽管您可以使用它来生成工作流的图像并在浏览器中显示它。我不知道有任何查看器将工作流定义转换为 HTML 结构。XAML 只是 XML，因此它肯定是可能的，但我怀疑这将是一个简单的练习，因为您必须至少复制所有活动设计器的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-31T15:55:53.677

考虑使用[桑基图](https://en.wikipedia.org/wiki/Sankey_diagram)来帮助可视化工作流程。

[![安全事件工作流程的可视化](../Images/acaf34ea581bb8b9e43e80b359528af2.png)](https://i.stack.imgur.com/4SDm2.jpg)

我见过用于描述工作流程的层次结构图，但一直认为它们缺少一些东西——例如，可以有两个父节点的节点。桑基图解决了这个问题，*并*提供了一种简单的方法来介绍“节点”之间移动量的概念。此外，根据定义，[流程图是“一种表示工作流或流程的图表”](https://en.wikipedia.org/wiki/Flowchart)。桑基图看起来比层次结构图流动得多。

有关更多信息，请查看[David Pallmann 关于使用桑基图可视化工作流的令人信服的案例](http://davidpallmann.blogspot.com/2018/12/visualizing-workflow-activitty-with.html)。

[通过 fork Highcharts 的 Sankey 演示](https://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/demo/sankey-diagram/)并将系列数据自定义为以下内容，我能够在 10 分钟内创建[此工作流可视化：](https://codepen.io/jhfrench/pen/KKpEMRe)

```
 data: [
        ['Event Submission', 'Event Submission Close', 250],
        ['Event Submission', 'Create Incident', 750],
        ['Event Submission Close', 'Approve', 240],
        ['Event Submission Close', 'Reject', 10],
        ['Approve', 'After Action Review', 640],
        ['Create Incident', 'Contained', 400],
        ['Create Incident', 'Provide Analysis', 150],
        ['Create Incident', 'Incident Close', 125],
        ['Contained', 'Containment Approval', 370],
        ['Contained', 'Containment Rejection', 30],
        ['Incident Close', 'Approve', 110],
        ['Incident Close', 'Reject', 15],
        ['Containment Approval', 'Eradicated', 320],
        ['Containment Approval', 'Provide Analysis', 50],
        ['Eradicated', 'Eradication Approval', 315],
        ['Eradicated', 'Eradication Rejection', 5],
        ['Eradication Approval', 'Recovered', 315],
        ['Eradication Approval', 'Provide Analysis', 5],
        ['Recovered', 'Approve', 310],
        ['Recovered', 'Reject', 5]
    ] 
```

# php - inarray 二维数组

> ID：11861587
> 
> 赞同：0
> 
> 时间：2012-08-08T09:31:31.653
> 
> 标签：php, arrays, search

我有一个二维数组

```
$list['1'][] ='23';
$list['1'][] ='24';
$list['1'][] ='25';
$list['1'][] ='26'; 
```

和一维数组

```
$items={"23","24","36"};

following is right syntax for 1d array.

$items=array("23","24","36"); 
```

我想检查 $List['1'] 值是否在 $items 内，如果项目不在，则将它们存储到新数组中

我试过

```
$different['1'][] = array_diff($items,$list['1']); 
```

但如果没有区别，它会创建一个带有键但为空值的数组

$不同['1]

```
['1'] => Array
    (
        [0] => 
    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:34:44.937

```
if($diff = array_diff($items,$list['1])){
     $different['1'][] = $diff;
} 
```

这应该可以解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:37:11.117

我无法重现这种行为。

```
<?php
echo 'php: ', PHP_VERSION, "\n";
$list = array(1=>array());
$list[1][]=23;
$list[1][]=24;
$list[1][]=25;
$list[1][]=26;

$items = array(23,24);

var_dump(array_diff($items,$list[1])); 
```

在我的机器上打印

```
php: 5.4.1
array(0) {
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:38:45.343

试试这个：

```
$item = array('23','24');
foreach($list['1'] as $listItem) {
    if(!in_array($listItem, $item)) {
        $different['1'][] = $listItem;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T09:40:09.023

```
$list['1'][] ='23';
$list['1'][] ='24'; 

$items=array("23","24");

$different['1'][] = array_diff($items,$list['1']);

var_dump($different['1']); // output: array(1) { [0]=> array(0) { } }

$different['1'] = array_diff($items,$list['1']);

var_dump($different['1']); // output: array(0) { } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T09:43:04.843

```
 $list['1'][] ='23';
    $list['1'][] ='24';
    $list['1'][] ='25';
    $list['1'][] ='26';

    $items=array("23","24");

$different['1'][] = array_diff($list['1'],$items); 
```

你的 arr_diff 函数的参数序列是错误的。这就是为什么它会给你null。试试上面的代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T09:45:03.503

对 $list 数组中的每个元素使用 for 循环，并在该循环中添加以下代码

```
if(!in_array($list[1][0], $items)){
  array_push($items, $list[1][3]);
}

print_r($items); 
```

# c# - 使用 XSLT 的“路径中的非法字符”

> ID：11861588
> 
> 赞同：1
> 
> 时间：2012-08-08T09:31:36.050
> 
> 标签：c#, .net, xslt, illegal-characters

当我调用 XslCompiledTransform 类的 Transform 方法时，出现“路径中的非法字符”异常。

这是我的代码：

```
// Maybe there is a problem in this path 
string xsltPath = @"..\..\HtmlAttributesParser.xslt";

XslCompiledTransform xsltCompiled = new XslCompiledTransform();
xsltCompiled.Load(xsltPath, new XsltSettings(false, true), new XmlUrlResolver());
StringBuilder output = new StringBuilder();

xsltCompiled.Transform(content, XmlWriter.Create(output)); 
```

没有 * 吗？“ < > | 在我的路径中，所以我想知道为什么我会得到这个异常。

关于异常消息，我的内容变量的值与此异常之间没有联系，对吗？

编辑：这是适用于在线 XSLT 测试器的内容

```
<div class="pk-link">
<a href="/STORE/Pages/myPage.aspx" url="/STORE/Pages/myPage.aspx" width="" heigth=""  target="_blank">
    <img border="0" src="/link_download.gif"/>
      Download
</a>
</div> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T10:26:58.930

如果您有一个带有 XML 输入的字符串，那么您需要使用该`Transform`方法的重载，期望在该字符串上创建一个`XmlReader`or `XPathDocument`（或更一般地`IXPathNavigable`），例如

```
string result;

using (StringReader sr = new StringReader(content))
{
  using (XmlReader xr = XmlReader.Create(sr))
  {
    using (StringWriter sw = new StringWriter())
    {

       xsltCompiled.Transform(xr, null, sw);

      result = sw.ToString();
    }
  }
} 
```

将字符串作为第一个参数的 Transform 方法的重载需要文件路径或 URL，而不是 XML 输入。

# sql - 选择员工人数超过 2 人的城市 sql

> ID：11861589
> 
> 赞同：-1
> 
> 时间：2012-08-08T09:31:43.667
> 
> 标签：sql, database

我需要选择两个以上名为“ged”的员工的城市，并按部门排序。这是我的桌子

```
empl            
 ide    fn  ln  debt
  43    ged trt 43
  73    ged res 43
 456    k   hjkhg   0
 532    kkhg    gfgf    23
  45    k   gdfg    79
 243    hj  vjv 78
 354    ged vt  78
 3421   ged vt  78

depart  
debt    city
  43    odesa
  23    kiev
  79    lviv
  78    lviv 
```

我写了这样的代码

```
select  depart.CITY from depart inner join  empl on empl.DEBT=depart.DEBT
where empl.FN='ged'
group by empl.FN, depart.CITY
having count(empl.FN)>=2; 
```

但它只给了一个城市——敖德萨

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T09:43:01.567

我没有发现您的查询有任何问题

请参阅演示[SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/dc300/1)

![在此处输入图像描述](../Images/d60e09ce33c75e0db615965a9f8d8a35.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-08T09:53:07.343

```
select  depart.CITY from depart inner join  empl on empl.DEBT=depart.DEBT
where empl.FN='ged' order by empl.DEBT 
```

# c# - 从 sqlDataReader 获取行的内容作为列表

> ID：11861597
> 
> 赞同：2
> 
> 时间：2012-08-08T09:32:01.050
> 
> 标签：c#, linq

我有一个SqlDataReader阅读器，我事先不知道数据结构，即列数是未知的。我想把表格放在 csv 文件中。我从中检索列

```
System.Data.DataTable dt = reader.GetSchemaTable(); 
```

所以我把它们放在 dt.Columns() 之后。然后，我想做这样的事情：

```
while (reader.Read())
{
    writer.WriteLine(string.Join(";",ListWithRowContent))
} 
```

但是，我很难使用 linq .Select 之类的东西将一行的内容放入 ListWithRowContent 列表中，但是无法查询“reader”对象。
问题：怎么做（请不要for循环！）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T09:44:10.413

假设该读者位于任何记录上：

```
var values = new Object[reader.FieldCount];

reader.GetValues(values);

writer.WriteLine(string.Join(";", values.Select(v => v.ToString()))); 
```

或更方便的方式（FW 4.0 或更高版本）：

```
var values = new Object[reader.FieldCount];

reader.GetValues(values);

writer.WriteLine(string.Join(";", values)); 
```

# sql - $wpdb->get_results 在查询中带有 UNION

> ID：11861600
> 
> 赞同：1
> 
> 时间：2012-08-08T09:32:32.440
> 
> 标签：sql, wordpress, union

当自己运行以下每个 SELECT（没有 UNION）时，我得到了预期的结果。使用 UNION 时我没有得到任何结果。

任何想法为什么这不起作用？

```
$query = "
 (SELECT * FROM projects WHERE public='1')
 UNION
 (SELECT * FROM projects JOIN project_region ON projects.id_project = project_region.id_project 
 JOIN user ON user.id_region = project_region.id_region WHERE user.user_id = {$current_user->ID})
 UNION
 (SELECT * FROM projects JOIN project_user ON projects.id_project = project_user.id_project
 WHERE project_user.user_id = {$current_user->ID})
";

$projects = $wpdb->get_results($query);

if ($projects) {
   foreach ($projects as $project) {
      // output results
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:05:54.900

在`UNION`你需要有相同的列号，每个联合查询的列名。因此，在第一个查询中，您有来自项目表的列，但在第二个查询中，您有来自项目、project_region 和用户表的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:19:01.147

MYSQL 错误是 *字段列表中的列 'id_project' 不明确*

所以工作查询如下所示：

```
$query = "
(SELECT id_project, name FROM projects WHERE public='1')
UNION
(SELECT projects.id_project, projects.name FROM projects JOIN project_region ON projects.id_project = project_region.id_project 
JOIN user ON user.id_region = project_region.id_region WHERE user.user_id = {$current_user->ID})
UNION
(SELECT projects.id_project, projects.name FROM projects JOIN project_user ON projects.id_project = project_user.id_project
WHERE project_user.user_id = {$current_user->ID})
"; 
```

我在这里找到了解决方案：http: [//sqlzoo.net/howto/source/z.dir/err918/mysql](http://sqlzoo.net/howto/source/z.dir/err918/mysql)

# actionscript-3 - 在 ActionScript 中随机绘制

> ID：11861605
> 
> 赞同：1
> 
> 时间：2012-08-08T09:32:43.483
> 
> 标签：actionscript-3, random

我想随机移动一个 AS 3 影片剪辑。这是我目前拥有的，绑定到 ENTER_FRAME 事件。这显然将影片剪辑从左上边缘移动到右下边缘，所以我需要某种开关来添加/减去目标位置。

```
function movePsycho(e:Event):void {
    e.target.y += Math.random()*2;
    e.target.x += Math.random()*2;
    if (e.target.y >= stage.height || e.target.x >= stage.width)
        e.target.removeEventListener(Event.ENTER_FRAME, movePsycho);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:04:42.030

你不需要加/减的东西。你只需要确保你不仅能从随机数中得到正值，而且还能得到负值，这样它就会流向四面八方。

尝试将您的随机生成线更改为：

```
e.target.y += Math.random()*10 - 5;
e.target.x += Math.random()*10 - 5; 
```

如果你想让它在 5px 半径内移动，这将起作用。

我刚刚意识到您可能想在屏幕上生成一个新的随机点，然后移动到该点，当您的对象到达目的地时生成另一个随机点。因此，如果是这种情况，请尝试以下操作：

```
mc.addEventListener(Event.ENTER_FRAME, onFrame);

var dirX:int = mc.x;
var dirY:int = mc.y;

function generateRandomPoint():void
{
    dirX = Math.random() * stage.stageWidth;
    dirY = Math.random() * stage.stageHeight;
}

function onFrame(e:Event):void
{
    mc.x += (dirX - mc.x) * 0.1;
    mc.y += (dirY - mc.y) * 0.1;

    if(Math.abs(dirX - mc.x) < 1 || Math.abs(dirY - mc.y) < 1)
        generateRandomPoint();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:38:25.877

我不知道 actionscript 但你可能会在这方面找到帮助

[http://www.actionscript.org/forums/showthread.php3?t=270725](http://www.actionscript.org/forums/showthread.php3?t=270725)

# css - 悬停另一个元素时更改元素的 CSS 属性

> ID：11861606
> 
> 赞同：1
> 
> 时间：2012-08-08T09:32:44.577
> 
> 标签：css

我有一个`div`被调用的图像。它有一个 CSS-property `visibility:hidden;`。我有另一个按钮叫做按钮。

我需要的是当我悬停按钮时，图像变为`visibility:visible;`.

我可以使用 CSS 还是必须使用 JavaScript？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T09:39:46.097

是的，你可以这样做

像这样

**HTML**

```
<label for="button">Click here</label>
<input type="checkbox" id="button">

  <div class="one">Show my div</div> 
```

**CSS**

```
label{
background:green;
  padding:10px;
 }
.one{
width:100px;
  display:none;
  height:100px;
  background:red;
  margin-top:20px;
}
input[type="checkbox"]{
visibility:hidden;

}
input[type="checkbox"]:checked ~ .one{
display:block;
} 
```

[**现场演示**](http://tinkerbin.com/eB4BChw6)

* * *

**更新的答案**

如果您**只想悬停**而不是查看**此****[演示](http://tinkerbin.com/0TAAea4f)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T09:39:21.113

请注意，这是一个 javascript / jQuery 解决方案：

```
$(button).hover(function() {
    $('div#image').attr('visibility', 'visible');
}, function() {
    $('div#image').attr('visibility', 'hidden');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:36:26.387

如果 div 是按钮的子级，则只能执行此操作 - 这是不可能的。

如果你让它成为其他东西的孩子（即不是一个按钮，做不同的事情），这是可能的。

但是，什么浏览器？所有主要的？因为如果您愿意只使用最现代的，则可以使用兄弟选择器。

但是对于主流用法，只有当 div 是悬停元素的子元素时才能这样做。注意：您可以悬停任何东西，它不必是按钮或链接`<a>`。所以这就是我要做的 - 制作一个*看起来*像按钮的 div 元素，并且有一个您想要更改的子元素。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-08T09:38:28.643

为此，您需要 javascript。如果您的 div 是按钮的父级，则可以使用 css，但在您的情况下，这是不可能的 JS

```
function changeVisibility(objID) {
    var el = document.getElementById(objID);
    if(el.style.visibility == 'hidden') {
        el.style.visibility = 'visible';
        return true;
    }

    el.style.visibility = 'hidden';

} 
```

HTML

```
<div id="box">Something to show</div>
<input type="button" class="button" onmouseover="changeVisibility('box')" value="Change visibility" /> 
```

# mysql - 将xml文件中的数据插入mysql数据库

> ID：11861607
> 
> 赞同：0
> 
> 时间：2012-08-08T09:32:47.830
> 
> 标签：mysql, xml, insert

我有一个将事件日志输出到 xml 文件的设备，我想将该数据输入到 mysql 数据库中。我想使用 LOAD XML，但我不确定我是如何尝试搜索论坛的，但我无法找到答案。XML 文件如下所示：

```
<response>
<ROW0>:0000,dp0,54321,1,g1,00/00/00-00.00;:0001,dp0,54321,1,g1,00/00/00-00.00;:0002,dp0,54321,1,g1,00/00/00-00.00;:0003,dp0,54321,1,g1,00/00/00-00.00;:0004,dp0,54321,1,g1,00/00/00-00.00;:0005,dp0,54321,1,g1,00/00/00-00.00;:0006,dp0,54321,1,g1,00/00/00-00.00;:0007,dp0,54321,1,g1,00/00/00-00.00;:0008,dp0,54321,1,g1,00/00/00-00.00;:0009,dp0,54321,1,g1,00/00/00-00.00;:0010,dp0,54321,1,g1,00/00/00-00.00;:0011,dp0,54321,1,g1,00/00/00-00.00;:0012,dp0,54321,1,g1,00/00/00-00.00;:0013,dp0,54321,1,g1,00/00/00-00.00;:0014,dp0,54321,1,g1,00/00/00-00.00;:0015,dp0,54321,1,g1,00/00/00-00.00;:0016,dp0,54321,1,g1,00/00/00-00.00;:0017,dp0,54321,1,g1,00/00/00-00.00;:0018,dp0,54321,1,g1,00/00/00-00.00;:0019,dp0,54321,1,g1,00/00/00-00.00;:0020,dp0,54321,1,g1,00/00/00-00.00;:0021,dp0,54321,1,g1,00/00/00-00.00;:0022,dp0,54321,1,g1,00/00/00-00.00;:0023,dp0,54321,1,g1,00/00/00-00.00;:0024,dp0,54321,1,g1,00/00/00-00.00;:0025,dp0,54321,1,g1,00/00/00-00.00;:0026,dp0,54321,1,g1,00/00/00-00.00;:0027,dp0,54321,1,g1,00/00/00-00.00;:0028,dp0,54321,1,g1,00/00/00-00.00;:0029,dp0,54321,1,g1,00/00/00-00.00;:0030,dp2,00106,3,g2,18/06/12-20.02;:0031,dp2,00106,3,g2,18/06/12-20.02;:0032,dp2,00106,3,g2,18/06/12-20.03;:0033,dp2,00106,3,g2,18/06/12-20.04;:0034,dp2,00106,3,g2,18/06/12-23.10;:0035,dp2,00106,3,g2,18/06/12-23.10;:0036,dp2,00106,3,g2,18/06/12-23.10;:0037,dp2,00106,3,g2,18/06/12-23.11;:0038,dp2,00106,3,g2,18/06/12-23.11;:0039,dp2,00106,3,g2,18/06/12-23.15;:0040,dp2,00106,3,g2,18/06/12-23.15;:0041,dp2,00106,3,g2,18/06/12-23.16;:0042,dp2,00106,3,g2,18/06/12-23.16;:0043,dp2,00106,3,g2,18/06/12-23.20;:0044,dp2,00106,3,g2,18/06/12-23.21;:0045,dp2,00106,3,g2,18/06/12-23.21;:0046,dp2,00106,3,g2,18/06/12-23.21;:0047,dp2,00106,3,g2,18/06/12-23.22;:0048,dp2,00106,3,g2,18/06/12-23.22;:0049,dp2,00106,3,g2,18/06/12-23.22;:0050,dp2,00106,3,g2,18/06/12-23.23;:0051,dp2,00106,3,g2,18/06/12-23.23;:0052,dp2,00106,3,g2,18/06/12-23.23;:0053,dp2,00106,3,g2,18/06/12-23.23;:0054,dp2,00106,3,g2,18/06/12-23.24;:0055,dp2,00106,3,g2,18/06/12-23.24;:0056,dp2,00106,3,g2,18/06/12-23.24;:0057,dp2,00106,3,g2,18/06/12-23.24;:0058,dp2,00106,3,g2,18/06/12-23.27;:0059,dp3,00110,3,g2,18/06/12-23.31;:0060,dp3,00110,3,g2,18/06/12-23.31;:0061,dp2,00106,3,g2,18/06/12-23.31;:0062,dp2,00106,3,g2,18/06/12-23.32;:0063,dp2,00106,3,g2,18/06/12-23.34;:0064,dp2,00106,3,g2,18/06/12-23.34;:0065,dp2,00106,3,g2,18/06/12-23.34;:0066,dp2,00106,3,g2,18/06/12-23.34;:0067,dp2,00106,3,g2,18/06/12-23.35;:0068,dp2,00106,3,g2,18/06/12-23.35;:0069,dp2,00106,3,g2,18/06/12-23.36;:0070,dp2,00106,3,g2,18/06/12-23.36;:0071,dp2,00106,3,g2,18/06/12-23.37;:0072,dp2,00106,3,g2,18/06/12-23.38;:0073,dp3,00110,3,g2,18/06/12-23.38;:0074,dp2,00106,3,g2,18/06/12-23.38;:0075,dp2,00106,3,g2,18/06/12-23.39;:0076,dp2,00106,3,g2,18/06/12-23.39;:0077,dp2,00106,3,g2,18/06/12-23.41;:0078,dp3,00110,3,g2,19/06/12-13.52;:0079,dp3,00110,3,g2,19/06/12-13.52;:0080,dp3,00110,3,g2,19/06/12-13.52;:0081,dp3,00110,3,g2,19/06/12-13.52;:0082,dp2,00106,3,g2,19/06/12-15.32;:0083,dp2,00106,3,g2,19/06/12-15.32;:0084,dp3,00110,3,g2,19/06/12-15.32;:0085,dp3,00110,3,g2,19/06/12-15.32;:0086,dp3,00110,3,g2,19/06/12-15.32;:0087,dp3,00110,3,g2,19/06/12-15.33;:0088,dp3,00110,3,g2,19/06/12-15.51;:0089,dp3,00110,3,g2,19/06/12-15.51;:0090,dp3,00110,3,g2,19/06/12-15.52;:0091,dp3,00110,3,g2,19/06/12-15.52;:0092,dp3,00110,3,g2,19/06/12-15.52;:0093,dp3,00110,3,g2,19/06/12-15.53;:0094,dp3,00110,3,g2,19/06/12-15.53;:0095,dp3,00110,3,g2,19/06/12-15.53;:0096,dp3,00110,3,g2,19/06/12-15.53;:0097,dp3,00110,3,g2,19/06/12-15.54;:0098,dp3,00110,3,g2,19/06/12-15.54;:0099,dp3,00110,3,g2,19/06/12-15.54;</ROW0>
</response> 
```

如您所见，每个单元格用逗号分隔，每行用 ; 分隔：单元格是：事件编号，用户名，代码，门，组，日期和时间此外，每次有人打开门时都会更新 xml 文件，但它只包含 100 行日志。我想要实现的是，这个数据库每小时都会更新 XML 文件中的数据，但如果有意义的话，只会更新新的数据。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:38:40.183

对不起，这个设计对我来说毫无意义。

XML 是数据和描述的结合。您的 XML 没有提供任何描述。 `<ROW0>`什么也没告诉我。

更糟糕的是，您有一个没有标签或元数据的以逗号分隔的子文本。

你为什么不做这样的事情？

```
<response>
    <entries>
        <entry>
            <name>0000</name>
            <door>dp0</door>
            <group>54321</group>
            <date>2012-11-30</date>
            <time>11:12:13</time>
        </entry>      
    </entries>
</response> 
```

您不能使用 XPath 来查找任何内容。您必须解析逗号分隔的文本才能使用它。

这真的是一个`.csv`变相的文件。

您说“数据库应该更新 XML 文件”。我认为这也是错误的想法。数据库是关于持久性的。他们不应该更新任何东西。

> 此外，每次有人打开门时都会更新该 xml 文件，但它仅包含 100 行日志。我想要实现的是，这个数据库每小时都会更新 XML 文件中的数据，但如果有意义的话，只会更新新的数据。

这听起来像是您想要一个每小时醒来并做某事的预定工作。我无法分辨哪个是源，哪个是最终的安息地 - 日志文件或数据库。

如果数据库是源，您将查询您的数据库，并更新 .csv/log 文件。我认为最简单的做法是覆盖它，而不是想知道什么是新的，什么不是。

如果日志文件是源文件，您将不得不读取它、解析它并使用某个键遍历所有记录。如果密钥没有出现，请插入它。如果是，请更新它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:13:41.117

您可以使用 simplexml_load_file('filename.xml') 函数并将该 xml 数据放入一个数组并使用 foreach 循环检索它并与 mysql 建立数据库连接，并使用查询将其插入数据库

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:37:53.600

请按照以下步骤操作：-->

一步步：

解析您的 XML 文件并从中获取值（将它们保存在数组中）

连接到您的 MySQL 数据库

为插入创建 PreparedStatement

循环遍历您的数组并将值插入数据库中

关闭数据库连接

# java - Spring调用错误的控制器映射

> ID：11861609
> 
> 赞同：6
> 
> 时间：2012-08-08T09:33:01.013
> 
> 标签：java, validation, tomcat, spring-mvc

我正在用 Spring 构建非常基本的 mvc 应用程序。它有一个控制器，应该在请求正文上调用验证。问题是，如果我在 web.xml 中定义映射，它会停止寻找正确的控制器，但是当我修改 servlet 应用程序上下文时，Spring 星会即时进行一些新的绑定，但是这次基于注释的验证被忽略了。如何在仍然调用基于注释的验证的同时控制 web.xml 中的映射？

以下是详细信息：

控制器：

```
@Controller
@RequestMapping("/api")
public class UserActionsController {

    @RequestMapping(value="/choice", method = RequestMethod.POST)
    public @ResponseBody NameValue addUserChoice(@Valid @RequestBody NameValue action)
    {       
        return action;
    }
} 
```

这是 servlet 应用程序上下文：

```
<mvc:annotation-driven/>

<context:component-scan base-package="com.my.package" />

<bean
    class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
    <property name="mediaTypes">
        <map>
            <entry key="json" value="application/json" />
        </map>
    </property>
    <property name="defaultContentType" value="application/json" />
    <property name="defaultViews">
        <list>
            <bean
                class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" />
        </list>
    </property>
</bean> 
```

网页xml：

```
<servlet>
    <servlet-name>action-api</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>action-api</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

**上面的配置正在运行。**当我尝试更改 web.xml 时问题就开始了，因此控制器将只负责“/api/*”。我将其更改为`<url-pattern>/api/*</url-pattern>`. 在这种情况下，Spring 找不到合适的控制器。

```
(DispatcherServlet:819) - DispatcherServlet with name 'action-api' processing POST request for [/api/choice]
(RequestMappingHandlerMapping:209) - Looking up handler method for path /choice
(RequestMappingHandlerMapping:219) - Did not find handler method for [/choice]
(PageNotFound:1080) - No mapping found for HTTP request with URI [/api/choice] in DispatcherServlet with name 'action-api'
(DispatcherServlet:913) - Successfully completed request 
```

修改 servlet 应用程序上下文会有所帮助，Spring 现在能够找到控制器，但不再调用验证。

```
<bean
    class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <property name="alwaysUseFullPath" value="true" />
    <property name="messageConverters">
        <util:list id="beanList">
            <bean class="org.springframework.http.converter.StringHttpMessageConverter"/>
            <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"/>
        </util:list>
    </property>
</bean>

<bean
    class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
    <property name="alwaysUseFullPath" value="true" />
</bean>

<bean class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="alwaysUseFullPath" value="true" />
</bean> 
```

这是日志：

```
(DispatcherServlet:819) - DispatcherServlet with name 'action-api' processing POST request for [/api/choice]
(RequestMappingHandlerMapping:209) - Looking up handler method for path /choice
(RequestMappingHandlerMapping:219) - Did not find handler method for [/choice]
(DefaultAnnotationHandlerMapping:124) - Mapping [/api/choice] to HandlerExecutionChain with handler [com.my.package.controller.UserActionsController@1f86dbd] and 1 interceptor
(HandlerMethodInvoker:638) - Reading [com.my.package.model.NameValue] as "application/json" using [org.springframework.http.converter.json.MappingJacksonHttpMessageConverter@2059ef]
(HandlerMethodInvoker:173) - Invoking request handler method: public com.my.package.model.NameValue com.citypath.dima.controller.UserActionsController.addUserChoice(com.my.package.model.NameValue)
(AnnotationMethodHandlerAdapter:1037) - Written [com.my.package.model.NameValue@166685b] as "application/json;charset=UTF-8" using [org.springframework.http.converter.json.MappingJacksonHttpMessageConverter@2059ef]
(DispatcherServlet:957) - Null ModelAndView returned to DispatcherServlet with name 'action-api': assuming HandlerAdapter completed request handling
(DispatcherServlet:913) - Successfully completed request 
```

看起来 Spring 进行了一些即时绑定，但这次验证器被忽略了。我需要有 2 个控制器，比如“/api”和“/something”。如何在 web.xml 中定义它，以便 Spring 能够找到它们并调用验证？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T09:53:52.850

Spring @Controllers URL 总是相对于处理它们的 Spring Dispatcher Servlet 进行解释。因此，如果您将调度程序 servlet 映射到 web.xml 中的 /api/*，那么上面控制器的 URL 是 /api/api/choice

因此，您可以在 web.xml 中配置两个 spring dispatcher servelts 一个映射到 web.xml 中的 /api ，一个映射到 web.xml 中的 /somethingelse 然后您可以从 @RequestMappings 中删除 /api

在我的应用程序中，我为 api 和 UI 使用单个 Dispatcher Servlet，并在我的各种 API 控制器中使用称为 URL 的公共静态最终字符串来构建 API 公开的各种资源的路径。下面是我的 API 中的一个示例。

```
@Controller
@RequestMapping(CompanyPermissionsResourceController.PATH)
public class CompanyPermissionsResourceController extends BaseApiController
{
    public static final String PATH = CompanyResourceController.PATH + "/permissions"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:37:35.967

你确定你正在向 提出`post`请求`/api/choice`吗？

```
@RequestMapping(value="/choice", method = RequestMethod.POST) 
```

尝试更改为

```
@RequestMapping(value="/choice", method = RequestMethod.GET)
public @ResponseBody NameValue addUserChoice(@Valid @RequestBody NameValue action)
{       
    return action;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-08T09:41:27.090

我不认为它是这样工作的。将所有路径`/api/choice`放在方法级别。

# c++ - decltype 比较

> ID：11861610
> 
> 赞同：6
> 
> 时间：2012-08-08T09:33:02.533
> 
> 标签：c++, templates, c++11, decltype

有没有办法比较`decltype`C++11 中的结果？

换句话说，为什么这段代码无效：

```
template<typename T, typename U>
void func(T& t, U& u) {
    if(decltype(t) == decltype(u)) {
        // Some optimised version for this case
    } else {
        // A more general case for differing types
    }
} 
```

我知道在某些情况下，这个特定问题可以通过部分模板专业化来解决；我的问题是关于`decltype`s 的比较。

**编辑：**在尝试通过 SFINAE 为免费功能提供默认值的过程中出现了这个问题。也许更好的问题是为什么这是无效的：

```
template<bool B>
bool SomeFunction() { ... }

template<typename T, typename U>
bool SomeFunctionWrapper(T& t, U& u) {
    SomeFunction<decltype(t) == decltype(u)>();
} 
```

从那以后，我找到了另一种解决方案（根本不涉及模板），但在一个阶段我尝试了这个：

```
// If it exists, the free function is defined as
// bool AFreeFunction();
typedef struct { char } undefined;
template<typename T = void>
undefined AFreeFunction();

template<bool B>
bool AFreeFunctionWrapper_() {
    return false;
}

template<>
bool AFreeFunctionWrapper_<false>() {
    return AFreeFunction();
}

bool AFreeFunctionWrapper() {
    return AFreeFunctionWrapper_<decltype(AFreeFunction()) == decltype(undefined)>();
} 
```

我最终得到了这个策略的一个变体，可以在 GCC 4.6 中使用，但后来发现 MSVC 中的模板函数不允许使用默认模板参数，即使在 2012 RC 中也是如此。所以最终的解决方案是这样的：

```
class AFreeFunction {
public:
    operator bool() { return false; }
}; 
```

如果函数被定义，它就会被调用。如果不是，则将其解释为类的构造函数，然后隐式转换为`bool`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T10:44:54.333

您通常通过标签调度来解决这个问题。此外，您已经分别拥有`t`和`u`-`T&`和的“声明类型” `U&`。要比较类型是否相等，您可以使用`std::is_same`. 但是，重载解析已经为您解决了这个问题：

```
template<class T>
void f(T& v1, T& v2){ ... } // #1

template<class T, class U>
void f(T& t, U& u){ ... } // #2 
```

`f`如果 的两个参数属于同一类型，则#1 比 #2 更专业。如果您出于某种原因坚持通过手动类型比较来解决此问题，那么应用前面提到的几点如下所示：

```
#include <type_traits>

namespace detail{
template<class T, class U>
void f(T& t, U& u, std::true_type){ ... } // #1

template<class T, class U>
void f(T& t, U& u, std::false_type){ ... } // #2
} // detail::

template<class T, class U>
void f(T& t, U& u){
  detail::f(t, u, std::is_same<T,U>()); // tag dispatching
} 
```

`std::is_same``std::true_type`如果两种类型相同，则将派生自，否则将派生自`std::false_type`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-08T09:35:31.473

为什么无效？a 的结果`decltype`是一个类型。所以它说的是

```
if (int == int) 
```

这显然是语言不允许的。

您需要将函数的两个部分分开，并将专用部分放在专用类的函数中，然后将调用转发到那里。这是痛苦的。

或者，如果您的实现正确实现它，您可以使用`typeid`或运行时类型信息，尽管这会将所有内容推迟到程序运行时（这允许较少的优化）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-08T10:00:47.433

您可以使用 SFINAE ( `std::enable_if`) 执行此操作：

```
template<typename T, typename U>
typename std::enable_if<std::is_same<T, U>::value, void>::type func(T& t, U& u) {
    std::cout << "same\n";
}
template<typename T, typename U>
typename std::enable_if<!std::is_same<T, U>::value, void>::type func(T& t, U& u) {
    std::cout << "different\n";
} 
```

正如 Mehrdad 所说，`decltype(t)`and`decltype(u)`是类型（`T &`和`U &`分别），而不是值，因此不能在值表达式级别进行比较，但必须在元表达式（模板）级别进行比较。

# objective-c - 处理 NSError 时了解“潜在的空值取消引用”

> ID：11861612
> 
> 赞同：3
> 
> 时间：2012-08-08T09:33:16.767
> 
> 标签：objective-c, nserror

我知道这似乎是一个非常基本的问题，但我一直认为解释（和理解）基本问题是构建干净且有效的代码的关键。我在 CoreData 实体中有以下代码片段：

```
-(BOOL)validateForInsert:(NSError *__autoreleasing *)error {
    [super validateForInsert:error];
    return [self validateInternal:error];
}

-(BOOL)validateInternal:(NSError *__autoreleasing *)error {
  // checking attributes and build userInfo error
  if(anyErrors) {
    *error = [NSError errorWithDomain:appDomain code:200 userInfo:details];
    return NO;
  }
  return YES;
} 
```

通过在 Xcode 中运行“分析”，我在创建错误时得到了著名的“潜在的 null 取消引用”。虽然编译器没有发出任何警报，但代码一直有效。这也可能是一个问题，为什么编译器没有警告我？

但是谈到代码，我完全知道解决方案，即检查是否（错误！= nil），但我对此很迷茫。问题从头开始，在 NSError *_autoreleasing* 的含义上，为什么是周围的星号？哪个应该是指向指针的指针？

假设我想自己调用 validateForInsert:，如何构建 *_autoreleasing* 对象？

我想以下问题与上述问题有关：如果我从头开始构建 *error，为什么我要先检查是否为 nil ？

最后但并非最不重要的一点是，代码运行良好，错误被拦截，你能找出一个可能导致它失败或崩溃的案例吗？正如我所说，我正在使用 CoreData，一个通用的例子会很好，但另一个与 CoreData 相关的例子值得赞赏。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T10:06:02.840

```
*error = [NSError errorWithDomain:appDomain code:200 userInfo:details]; 
```

在语法上是正确的，因此编译器不会发出警告。分析器检测到这将在运行时崩溃 if `error = NULL`，即如果您调用

```
[myObj validateForInsert:NULL]; 
```

如果你打电话

```
NSError *error;
[myObj validateForInsert:&error]; 
```

然后传递 的地址`error`，因此传递类型的变量`NSError * *`。

修饰符是对 ARC 编译器的`__autoreleasing`一个提示，即分配给的对象`error`是一个自动释放的对象。

您可以将变量声明为自动释放

```
NSError * __autoreleasing error;
[myObj validateForInsert:&error]; 
```

但通常你不在乎。ARC 只是生成正确的代码。

有关详细信息，请阅读[过渡到 ARC 发行说明](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)。在 stackoverflow 上也有很多关于这个主题的答案。

# iphone - 仅在目标 c 中的日期时间

> ID：11861615
> 
> 赞同：0
> 
> 时间：2012-08-08T09:33:18.943
> 
> 标签：iphone, objective-c, ios, ipad

我有这样的约会时间

```
2012-01-01 10:00:00 
```

我只需要像这样将其转换为日期

```
2012-01-01 
```

谁能帮我这是我的代码

```
NSDate *adate           =   objIStruct_Conference.m_DtDate;
        NSLog(@"DATE========%@",objIStruct_Conference.m_DtDate);
        NSString *DateString    =   [NSString stringWithFormat:@"%@", adate ];

        NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
        [formatter setLocale:[[[NSLocale alloc] initWithLocaleIdentifier:@"en_US"] autorelease]];
        [formatter setDateFormat:@"yyyy:MM:dd"];
        NSLog(@"NEW DATE====%@", [formatter stringFromDate:adate]);
        [formatter release]; 
```

我得到 DATE===== 2012-01-01 10:00:00 ，新日期=====(null)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T09:39:20.443

```
 NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
 [formatter setDateFormat:@"yyyy:MM:dd"];
 NSLog(@"%@", [formatter stringFromDate:[NSDate date]]);
 [formatter release]; 
```

[请参阅NSDateFormatter](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)的类参考

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:25:10.910

您的`adate`指针似乎是`nil`，因为它**在真实设备上**对我来说非常有效`NSDate`，但是当我将其设置`_date`为 nil 时，输出将`nil`与您的情况一样。

```
NSDate *_date = [NSDate date];
NSDateFormatter *_dateFormatter = [[NSDateFormatter alloc] init];
[_dateFormatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US"]];
[_dateFormatter setDateFormat:@"yyyy-MM-dd"];
NSLog(@"%@", [_dateFormatter stringFromDate:_date]); 
```

输出是：

```
2012-08-08 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:40:44.453

请使用此代码：

```
NSDateFormatter *dateFormat = [[[NSDateFormatter alloc] init] autorelease];
[dateFormat setDateFormat:@"yyyy-MM-dd"];
NSLog(@"%@",[dateFormat stringFromDate:date]); 
```

# apache - 使用 .htaccess 重定向根目录，不包括子目录

> ID：11861620
> 
> 赞同：1
> 
> 时间：2012-08-08T09:33:33.033
> 
> 标签：apache, .htaccess

我有两个网站，domain1.com 和 domain2.com。两个网站的管理部分都在 /admin 目录下。

我需要 domain1.com 上的公共网站重定向到 domain2.com，但我仍然需要访问 admin1.com 上的 admin 子目录。

这是我可以用 .htaccess 轻松完成的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:53:39.613

在文档根目录的 htaccess 文件中，在`domain1.com`适当的地方添加：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/admin
RewriteRule ^(.*)$ http://domain2.com/$1 [R=301,L] 
```

# magento - 确认页面的 Magento 跟踪脚本

> ID：11861625
> 
> 赞同：1
> 
> 时间：2012-08-08T09:33:49.110
> 
> 标签：magento, tracking

我需要在确认页面中添加一个跟踪脚本。需要输入的值是订单编号和订单减去增值税的总金额。

我想我已经对订单 ID 进行了排序：getOrderId(); ?>

但我不知道如何减少增值税的总额。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:46:25.393

以下是我如何进行 Google Adwords 跟踪。基本上通过使用最后一个订单的小计。

```
<?php
$order_details = Mage::getModel('sales/order')->loadByIncrementId(Mage::getSingleton('checkout/session')->getLastRealOrderId());
$adwords_saleamt = $order_details->subtotal; 
?>

/* <![CDATA[ */
var google_conversion_id = ****your_id****;
var google_conversion_language = "en";
var google_conversion_format = "3";
var google_conversion_color = "ffffff";
var google_conversion_label = "*****your_label******";
var google_conversion_value = <?php echo $adwords_saleamt; ?>;
/* ]]> */ 
```

# c# - 实现控制台客户端signalR和自主机signalR？

> ID：11861626
> 
> 赞同：2
> 
> 时间：2012-08-08T09:33:50.840
> 
> 标签：c#, signalr, signalr.client

我想将客户端连接到自托管的 SignalR 服务器，以便从另一个控制台应用程序通知控制台应用程序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T16:37:20.070

将此自助主机指南 与此 .Net 客户端指南相结合： [http](http://www.asp.net/signalr/overview/signalr-20/getting-started-with-signalr-20/tutorial-signalr-20-self-host) ://www.asp.net/signalr/overview/signalr-20/getting-started-with-signalr-20/tutorial-signalr-20-self-host ： [http](http://www.asp.net/signalr/overview/signalr-20/hubs-api/hubs-api-guide-net-client) ://www.asp.net/signalr/overview/signalr-20/hubs-api/hubs-api-guide-net-client ，你大部分时间都在那里。

# objective-c - 如何在 iPhone 或 iPad 中设置锁屏壁纸

> ID：11861628
> 
> 赞同：0
> 
> 时间：2012-08-08T09:33:51.720
> 
> 标签：objective-c, ios, ipad, ios4

我已经浏览了许多我在这里问过的类似帖子。我知道在 iOS 设备中没有公共 API 可以做到这一点，如果我们为此目的使用私有 API，苹果也不会接受。但是我在 iTunes 中找到了一个具有相同功能的应用程序。

这是链接： http: [//itunes.apple.com/us/app/sticky-notes-hd-with-bump/id364874025 ?mt=8](http://itunes.apple.com/us/app/sticky-notes-hd-with-bump/id364874025?mt=8)

如果苹果不支持这个，这个应用程序是如何在 Appstore 中的。然后他们可能以其他方式做到了这一点。所以我希望这个功能可以以某种方式实现。

有没有人对此有任何想法。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:42:56.590

那是不可能的。

您是否购买了您引用的应用程序？你看见了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T03:17:01.813

您引用的应用程序会生成一张图片，您需要手动将其设置为锁屏/壁纸。

朝着这个方向发展的一件事是[MPNowPlayingInfoCenter](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPNowPlayingInfoCenter_Class/Reference/Reference.html)；它允许您设置锁定屏幕上“正在播放”信息中显示的内容，但这与您将获得多远有关。

# asp.net-mvc-3 - 从控制器调用函数以查看

> ID：11861629
> 
> 赞同：0
> 
> 时间：2012-08-08T09:33:52.890
> 
> 标签：asp.net-mvc-3

我有一个在控制器中返回字符串的函数。那么当在视图中单击按钮时，我如何调用该函数呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:44:36.563

正如其他人指出的那样，可能会有更好的选择，具体取决于您正在尝试做什么。但是，如果您只想通过单击按钮来调用方法，那么我所知道的最简单的方法是：

```
<button type="button" onclick="window.location.href='<%=Url.Action("MethodName", "ControllerName") %>'"> 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:36:42.353

也许这个函数更适合您的模型，尤其是当它可能引用模型属性时。

因此，可以在函数范围内访问 this ，而不是向其传递字符串值：

```
@(model.Function()) 
```

如果你的函数是通用的，那么我建议不要将它存储在控制器或模型中，而是将它完全存储在单独的命名空间中的不同类中：

```
@(Logic.StringFunctions.Function(model.myString)) 
```

# java - Java XPath 变音/元音解析

> ID：11861630
> 
> 赞同：0
> 
> 时间：2012-08-08T09:34:01.083
> 
> 标签：java, parsing, xpath

我想解析以下 xml 结构：

```
<?xml version="1.0" encoding="utf-8"?>
<documents>
  <document>
    <element name="title">
      <value><![CDATA[Personnel changes: Müller]]></value>
    </element>
  </document>
</documents> 
```

为了解析这个`element name="?????`结构，我按以下方式使用 XPath：

```
XPath xPath = XPathFactory.newInstance().newXPath();

String currentString = (String) xPath.evaluate("/documents/document/element[@name='title']/value",pCurrentXMLAsDOM, XPathConstants.STRING); 
```

解析本身工作正常，但德语变音符号（元音）如“Ü”、“ß”或类似的东西存在一些问题。当我打印出 currentString 时，字符串是：

```
Personnel changes: MÃ¼ller 
```

但我想拥有像 XML 中的字符串：

```
Personnel changes: Müller 
```

只是补充一下：我无法更改xml文件的内容，我必须像我得到它一样解析它，所以我必须以正确的方式解析everey String。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:36:20.290

听起来像是编码问题。XML 是 UTF-8 编码的 Unicode，您似乎将其打印为 ISO-8859-1。检查 Java 源代码的编码设置。

**编辑：**请参阅[设置默认 Java 字符编码？](https://stackoverflow.com/questions/361975/setting-the-default-java-character-encoding)对于如何设置`file.encoding`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T07:03:20.477

我现在找到了一个好的快速的解决方案：

```
public static String convertXMLToString(File pCurrentXML) {

        InputStream is = null;
        try {
            is = new FileInputStream(pCurrentXML);
        } catch (FileNotFoundException e1) {
            e1.printStackTrace();
        }
        String contents = null;
         try {

                try {
                    contents = IOUtils.toString(is, "UTF-8");
                } catch (IOException e) {
                    e.printStackTrace();
                }
            } finally {
                IOUtils.closeQuietly(is);
            }

        return contents;

    } 
```

Afterwars 我将 String 转换为 DOM 对象：

```
static Document convertStringToXMLDocumentObject(String string) {

        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        DocumentBuilder builder = null;
        Document document = null;

        try {
            builder = factory.newDocumentBuilder();
        } catch (ParserConfigurationException e) {
            e.printStackTrace();
        }

        try {
            document = builder.parse(new InputSource(new StringReader(string)));
        } catch (SAXException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        return document;

    } 
```

然后我可以使用 XPath 解析 DOM，所有元素值都在 UTF-8 中！示范：

```
currentString = (String) xPath.evaluate("/documents/document/element[@name='title']/value",pCurrentXMLAsDOM, XPathConstants.STRING);
System.out.println(currentString); 
```

输出：

```
Personnel changes: Müller 
```

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T11:00:01.877

如果您知道文件是 utf8 编码的，请尝试以下操作：

```
 FileInputStream fis = new FileInputStream("yourfile.xml");
    InputStreamReader in = new InputStreamReader(fis, "UTF-8");

    InputSource pCurrentXMLAsDOM = new InputSource(in); 
```

# powershell - TFSBuild 在 powershell 的参数中包含一个数组

> ID：11861631
> 
> 赞同：0
> 
> 时间：2012-08-08T09:34:01.777
> 
> 标签：powershell, tfs, tfsbuild

我有一个 TFS 2010 版本，它调用一个 powershell 脚本进行部署。我为构建脚本定义了几个参数，这些参数效果很好。它们由构建使用，并且还包含在通过 InvokeProcess 控件的 Arguments 属性传递到 Powershell 的参数中。

我现在需要将 powershell 脚本部署到可变数量的服务器，因此我想在 TFS 的参数列表中传递服务器 ID。

在构建定义中，我声明了一个名为 TargetServers 类型为 string[] 的新参数。在执行构建之前，我已经从“构建过程参数”对话框中填充了它。

我已将 InvokeProcess 控件的 FileName 属性设置为“Powershell”，并将 Arguments 属性设置如下：

```
String.Format(" ""& '{0}' '{1}' '{2}' '{3}' '{4}' '{5}' '{6}' '{7}' '{8}' '{9}' "" ", DeploymentScriptFileName, IO.Path.GetDirectoryName(DeploymentScriptFileName), "ExecuteBizTalkAppMSI.ps1", MSIFileName, BTDFFilename, TargetServerPath, TargetServers, ServerDeploymentFolder, InstallFolder, HostInstanceFilter, ApplicationName) 
```

我的问题是传递给 Powershell 的 TargetServers 参数只是 System.String[]。

从构建日志中，我可以看到 Invoke Process 控件的以下输出：

```
Powershell  "& 'C:\Builds\3\x.Int.MIS.Deployment\CopyDeployScriptThenExecute.ps1'
'C:\Builds\3\\x.Int.MIS.Deployment' 'ExecuteBizTalkAppMSI.ps1'
 'x.Int.MIS-3.0.0.msi' 'x.Int.MIS.Deployment.btdfproj'
'\\d-vasbiz01\BizTalkDeployment' 'System.String[]' 'c:\BizTalkDeployment'
'c:\Program Files (x86)\x.Int.MIS for BizTalk 2010\3.0' 'BTSSvc*MIS*' " 
```

谁能告诉我如何传递数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:39:39.477

作为用逗号分隔的字符串：

```
PS> function foo([string[]]$x){$x}
PS> foo a,2,3
a
2
3 
```

如果需要，您可以在每个单独的项目周围加上引号，但除非它们包含空格或为语法保留的其他字符，否则您不需要这样做。

# visual-studio-2010 - 同一服务器上不同版本的 abcpdf

> ID：11861633
> 
> 赞同：1
> 
> 时间：2012-08-08T09:34:06.807
> 
> 标签：visual-studio-2010, abcpdf

我有两个版本的 abcpdf 在同一台机器上运行。其中一个项目使用的是旧版本 7.1，另一个项目使用的是较新的版本，即 8.1。

当我尝试构建时，Visual Studio 会自动获取 abcpdf 8.1 上的最新版本并引发以下编译错误

```
'WebSupergoo.ABCpdf7.Doc.Doc()' is obsolete: 'Don't use ABCpdf7 namespace - use ABCpdf8 instead.' 
```

请建议我哪里出错了。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T17:42:41.470

从 GAC 卸载这两个版本，然后重新启动 IIS 以清除它们。

然后按照手动安装的说明手动引用项目中的特定 dll：

[http://www.websupergoo.com/helppdf5net/source/3-concepts/6-installation.htm](http://www.websupergoo.com/helppdf5net/source/3-concepts/6-installation.htm)

您需要将项目引用指向两个不同的 AbcPdf.dll 文件（每个版本一个），并且您需要确保将 ABCpdfCE7.dll 或 ABCpdf8-32（或 -64）.dll 复制到正确项目的 bin。

# java - 如何正确地多线程一组独立任务？

> ID：11861634
> 
> 赞同：1
> 
> 时间：2012-08-08T09:34:08.440
> 
> 标签：java, multithreading

我正在使用此代码在不同的 CPU 内核之间划分数百个任务。

```
 final List<Throwable> errors = Collections.synchronizedList(Lists.<Throwable>newArrayList());

    final ExecutorService pool = Executors.newFixedThreadPool(Runtime.getRuntime().availableProcessors());

    for (...) {

        pool.execute(new Runnable() { @Override public void run() {

            try {

                // TASK HERE

            } catch (Throwable e) {
                errors.add(e);
            }

        }});

    }

    pool.shutdown();
    try {
        pool.awaitTermination(1000, TimeUnit.DAYS); // wait "indefinitely"
    } catch (InterruptedException e) {
        throw new RuntimeException(e);
    }

    if (!errors.isEmpty()) throw Exceptions.wrap(errors.get(0)); // TODO multi-exception 
```

它有效，但它并不好。

*   没有`awaitTermination`没有超时的版本，这就是我想要的。
*   我需要自己收集错误。

这样做的正确/常用方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:37:45.857

线程池的重点是重用线程。您应该在应用程序启动时在创建任务的代码之外创建它，然后注入它。添加任务后无需关闭池。当您的应用程序关闭时，您会这样做。

To run a collection of tasks, use `ExecutorService.invokeAll`. To get the results afterwards, call `get` on each of the returned `Futures`. It will rethrow any exception that the task threw, so you can collect it afterwards.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:38:21.540

You can use a future to do the error handling:

```
final List<Future> futures = new ArrayList<Future>();
for (int i = 0; i < 5; i++) {

    futures.add(pool.submit(new Runnable() { @Override public void run() {
            // TASK HERE
    }}));

}

for (Future f : futures) {
    try {
        f.get();
    } catch (ExecutionException e) {
        //something bad happened in your runnable
    }
}

//when you are done with the executor

pool.shutdown();
try {
    pool.awaitTermination(1000, TimeUnit.DAYS); // wait "indefinitely"
} catch (InterruptedException e) {
    throw new RuntimeException(e);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:38:13.940

I think you need to submit each Runnable, get a [Future](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html) back, and then call [get()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html#get%28%29) on each Future.

When you call `get()`, you'll either get the result of the Runnable, or the exception that it encountered.

# php - 合并 2 个 php 脚本

> ID：11861646
> 
> 赞同：0
> 
> 时间：2012-08-08T09:34:54.543
> 
> 标签：php, xml

我需要一些关于 php 脚本的帮助。我编写了一个脚本来解析 xml 并在 txt 文件中报告错误行。

代码是这样的。

```
<?php

    function print_array($aArray)
    {
        echo '<pre>';
        print_r($aArray);
        echo '</pre>';
    }

    libxml_use_internal_errors(true);
    $doc = new DOMDocument('1.0', 'utf-8'); 
    $xml = file_get_contents('file.xml'); 
    $doc->loadXML($xml); 

    $errors = libxml_get_errors();
    print_array($errors);

    $lines = file('file.xml');
    $output = fopen('errors.txt', 'w');

    $distinctErrors = array();
    foreach ($errors as $error)
    {
        if (!array_key_exists($error->line, $distinctErrors))
        {
            $distinctErrors[$error->line] = $error->message;
            fwrite($output, "Error on line #{$error->line} {$lines[$error->line-1]}\n");

        }
    }

    fclose($output);

?> 
```

打印数组仅用于查看错误，它只是可选的。现在我的雇主在网上找到了一段代码

```
<?php

//  test if the form has been submitted
if(isset($_POST['SubmitCheck'])) {
    // The form has been submited
    // Check the values!

        $directory = $_POST['Path'];

        if ( ! is_dir($directory)) {
              exit('Invalid diretory path');
                }
                else
                {
                  echo "The dir is: $directory". '<br />';
                        chdir($directory);

                        foreach (glob("*.xml") as $filename) {  
                        echo $filename."<br />";  
                        }  
              }
        }

        else {
    // The form has not been posted
    // Show the form
        ?>
        <form id="Form1" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
            Path: <input type="text" name="Path"><br>
            <input type="hidden" name="SubmitCheck" value="sent">
            <input type="Submit" name="Form1_Submit" value="Path">
        </form>
        <?php
        }
?> 
```

这基本上找到了给定目录中的所有 xml，并告诉我合并这两个脚本。我给出了输入目录，脚本应该在该目录中的所有 xml 上运行，并在 txt 文件中给出报告。

而且我不知道该怎么做，我是 PHP 的初学者，花了我大约 2-3 天的时间来编写最简单的脚本。有人可以帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:39:14.187

从您的代码中创建一个函数并将所有“file.xml”替换为一个参数，例如$filename。在“echo $filename”所在的第二个脚本中，调用您的函数。

# object - 在另一个 Twig 属性定义的值内插入 Twig 变量/属性

> ID：11861667
> 
> 赞同：0
> 
> 时间：2012-08-08T09:36:13.333
> 
> 标签：object, twig, interpolation, templating, templating-engine

采取以下示例结构：

```
{% set paths = {
                   ...
                   'js': {
                           ...
                           'jquery': {
                                      'version': '1.7.2',
                                      'cdn': 'https://ajax.googleapis.com/ajax/libs/jquery/{{paths.js.jquery.version}}/jquery.min.js',
                                      'fallback': ....
                                      }
                          }
               }
%} 
```

要访问，我通常会使用类似的东西：

```
 <script src="{{paths.js.jquery.cdn}}"></script> 
```

* * *

### 问题：

插值变量无法识别，您会得到类似`...libs/jquery/%7B%7B%paths.js/jquery.version7D%7D/jquery.min.js...`.

我试过了：

*   `'a': 'text{{b}}text'`,
*   `'a': {{ ('text' ~ b ~ 'text') }}`,
*   `'a': "{{ ('text' ~ b ~ 'text') }}"`,
*   `'a': "{{ (['text', b, 'text'] | join }}"`,
*   `'a': "{{ (['text', {{b}}, 'text'] | join }}"`
*   还有更多我忘记了

* * *

### 我知道属性（）

关于它的文档不多，但据我所知，它必须是这样的：

```
attribute(paths, attribute(js, attribute(jquery, cdn))) 
```

对于一个级别来说会很好，但不是任意级别的深度。如果我有误解，请纠正我`attribute()`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:07:34.017

`'a': ('text' ~ b ~ 'text'`) 实际上是正确的，但是表达式周围不能有花括号（因为我们已经在表达式中，即变量定义中）。

正确的方法：

```
{% set paths = {
                   ...
                   'js': {
                           ...
                           'jquery': {
                                      'version': '1.7.2',
                                      'cdn': ('https://ajax.googleapis.com/ajax/libs/jquery/' ~ paths.js.jquery.version ~ '/jquery.min.js'),
                                      'fallback': ....
                                      }
                          }
               }
%} 
```

* * *

但是这里有一个简单的设计错误；当渲染器/解析器来到`cdn`属性定义时，`paths`还没有设置。解决此问题的一种可能方法是首先声明另一个变量；

```
{% set params=  {
                   'jqueryversion': '1.7.2'
                }
%}

{% set paths = {
                   ...
                   'js': {
                           ...
                           'jquery': {
                                      'cdn': ('https://ajax.googleapis.com/ajax/libs/jquery/' ~ params.jqueryversion ~ '/jquery.min.js'),
                                      'fallback': ....
                                      }
                          }
               }
%} 
```

显然，如果`paths.js.jquery.cdn`只使用一次，那么只需在需要它的地方硬编码*父*变量的值并插入*子*变量：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/{{params.jqueryversion}}/jquery.min.js"></script> 
```

# codemirror - Codemirror 远程自动完成

> ID：11861668
> 
> 赞同：5
> 
> 时间：2012-08-08T09:36:14.330
> 
> 标签：codemirror

Codemirror 有一个很好的自动完成示例：[链接](http://codemirror.net/demo/complete.html)。

这个想法是让服务器端自动完成（例如，自动完成 Java 的 Ajax 服务）。有人有使用 codemirror 远程自动完成的例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-12T22:54:14.110

通过使用以下代码，我已经能够使用 CodeMirror 5.3 的 show-hint.js 获得异步完成（es6 风味，所以对于 es3，替换`let`为`var`和`=>`with `function`）

虽然没有实际的 ajax，但希望很明显如何将其挂钩，只需`callback`在您的 ajax 调用完成处理程序中调用即可。

```
CodeMirror.registerHelper('hint', 'ajax', (mirror, callback) => {
    let words = ['foo', 'bar', 'baz'];
    let cur = mirror.getCursor();
    let range = mirror.findWordAt(cur);
    let fragment = mirror.getRange(range.anchor, range.head);
    callback({
        list: words.filter(w => w.indexOf(fragment) === 0),
        from: range.anchor,
        to: range.head
    });
});
CodeMirror.hint.ajax.async = true;

CodeMirror.commands.autocomplete = function(mirror) {
    mirror.showHint({ hint: CodeMirror.hint.ajax });
}; 
```

关键是`async`按照文档告诉您的方式设置属性：

> 可以将提示函数的 async 属性设置为 true，在这种情况下，它将使用参数（cm、回调、？选项）进行调用，并且只有在提示函数调用回调时才会弹出完成界面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T14:18:02.950

```
// javascript code

var editor;

function createEditor (data) {
    editor = CodeMirror.fromTextArea(myTextarea, {
        mode: "text/x-sql",
        extraKeys: {"Ctrl-Q": "autocomplete"},
        hint: CodeMirror.hint.sql,
        hintOptions: {
            tables: data ? data : {}
        }
    })
}

(function createEditorWithRemoteData () {
    $.ajax({
        type:'POST',
        dataType:'json',
        url:'data.json',
        success:createEditor,
        error:function () {}
    })
})();

// data.json

{
    "table1": [ "col_A", "col_B", "col_C" ],
    "table2": [ "other_columns1", "other_columns2" ]
} 
```

# dotnetnuke - VS2010无法创建DotNetNuke模块，模板问题？

> ID：11861669
> 
> 赞同：2
> 
> 时间：2012-08-08T09:36:13.927
> 
> 标签：dotnetnuke

我一直在关注 DotNetNuke 的教程视频，现在我正在创建自己的模块。我已经安装了我需要的所有东西并将模板放在所需的文件夹中，但是每当我尝试创建一个项目时，它就会说

```
"The local IIS URL http://dnndev/desktopmodules/... specified for Web project ... has not been configured" 
```

然后它要求我创建一个虚拟目录，但说我不能，因为服务器“http://dnndev”不在本地机器上。

我已经搜索了一段时间的答案，并尝试编辑模板文件和主机文件，但无论我尝试什么，我总是得到相同的消息。有谁知道我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:44:20.017

如果您按照这些步骤设置开发环境，那么模板应该可以按原样工作。

[http://www.dotnetnuke.com/Resources/Wiki/Page/development-environment.aspx](http://www.dotnetnuke.com/Resources/Wiki/Page/development-environment.aspx)

如果您为您的网站使用不同的路径，我建议您自定义模板。

[http://www.dotnetnuke.com/Resources/Wiki/Page/Customize-Project-Template.aspx](http://www.dotnetnuke.com/Resources/Wiki/Page/Customize-Project-Template.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-08T10:11:10.387

我假设您正在使用似乎令人困惑的[dotnetnuke wiki 页面链接。](http://www.dotnetnuke.com/Resources/Wiki/Page/creating-module-project.aspx)要获得更好的步骤，请访问： http: [//www.dotnetnuke.com/Resources/Blogs/BlogID/16.aspx](http://www.dotnetnuke.com/Resources/Blogs/BlogID/16.aspx)并找到“让我们构建一个模块 #1 - 项目介绍”，这是分步系列视频中的第一个视频这将帮助您清楚地了解该过程。

如果您需要更多帮助，请告诉我。

# c# - 将 Byte[64] 数组转换为最小长度字符串

> ID：11861672
> 
> 赞同：2
> 
> 时间：2012-08-08T09:36:16.690
> 
> 标签：c#, .net

我尝试生成像 XXXX-XXXX-XXXX 这样的解锁密钥或简单的小长度字符串或十六进制字符串。我正在使用 RSA 算法来加密和解密密钥。我有一些长字符串

```
Q65g2+uiytyEUW5SFsiI/c5z9NSxyuU2CM1SEly6cAVv9PdTpH81XaWS8lITcaTZ4IjdmINwhHBosvt5kdg== 
```

当我使用以下转换方法转换字节数组（数组大小为 64 字节）时。

```
Convert.ToBase64String(bytes); 
```

我的要求是生成最小长度的密钥。有什么方法可以将字节数组（数组大小为 64 字节）转换为最小长度，我需要将其转换回字节数组或任何其他建议（以最小化字符串长度）会有所帮助。

我试图将输出字符串转换为十六进制十进制，但输出比字符串太长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:01:23.870

您可能想看看[将任意 GUID 编码为可读 ASCII (33-127) 的最有效方法是什么？](https://stackoverflow.com/questions/2827627/what-is-the-most-efficient-way-to-encode-an-arbitrary-guid-into-readable-ascii/4211088#4211088)那里讨论了用于压缩 PDF 文件的 Base 85 编码。

不过，在您的情况下，Base64 和 Base85 之间的区别是 8 个字符。

您可以安全地删除 Base64 字符串中的尾随 '=='，因为它用于对齐并且对于 64 字节值将始终存在（当然，您必须将这些字符添加回解码字符串）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:21:29.677

Obviously, you can only fit a certain amount of data into a fixed number of characters. You have pretty much maxed out the limit with base64 already which gives you 6 bits per byte.

**Therefore you need to reduce the amount of data that needs to be stored.** Can you reduce the key length? You could use a 96 bit key (by always leaving all other bytes zero). That would require 16 base64 characters which is much better.

It seems you don't need much security against brute forcing. So you can reduce the key size even further.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:00:20.820

既然您提到您希望用户能够输入字符串，那么**从用户的角度来看，易用性与 string 的长度之间将存在反比关系**。

即使键入一个`Base64`字符串也容易出现很多错误。`Base32`字符串更容易输入，但相应的长度会增加。

如果用户可以复制粘贴密钥，那么上面的内容没有实际意义，应该没有任何正当理由为什么字符串的长度应该尽可能小。

# skype - Skype 状态按钮显示状态，但如果我点击状态它没有连接到 Skype

> ID：11861675
> 
> 赞同：1
> 
> 时间：2012-08-08T09:36:21.660
> 
> 标签：skype

我在我的网站上实现了 Skype 按钮，它的状态显示很好，但是如果我点击该按钮，它不会呼叫用户，说

地址不明白

```
 Firefox doesn't know how to open this address, because the protocol (skype) isn't associated with any program. 
```

您可能需要安装其他软件才能打开此地址。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T09:20:14.777

要使小部件在 Firefox 中有用，只需将链接更改为

```
callto://skype_user_name

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:38:48.760

此按钮仅适用于安装了 Skype 插件的人。

几乎没有人。请改用其他方法。

# php - 从没有提交按钮的下拉选择中加载数据库记录

> ID：11861679
> 
> 赞同：0
> 
> 时间：2012-08-08T09:36:38.060
> 
> 标签：php, javascript, jquery

我的表单中有两个提交按钮：

*   用于提交/保存表单并将输入字段插入数据库的按钮。
*   按钮，用于根据下拉选择将记录加载到数据库中已经存在的表单中。例如更改数据库中的现有记录。

现在我知道如何在不单击提交按钮的情况下提交表单：

```
onChange = "this.form.submit()" 
```

但是我想要的是删除“加载按钮”，如果我在下拉列表中进行选择，它会自动加载记录，而不是使用上面的代码提交整个表单。

知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:46:21.920

如果您使用的是 jquery，则可以在下拉更改中加载数据，如下所示：

```
$('form select').change(function() {
  alert('You should do your data loading now');
}); 
```

请参阅[文档](http://api.jquery.com/change/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:42:01.820

```
<html>
<head>
<script type="text/javascript">
function showUser(str)
{
if (str=="")
  {
  document.getElementById("txtHint").innerHTML="";
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","getuser.php?q="+str,true);
xmlhttp.send();
}
</script>
</head>
<body>

<form>
<select name="users" onchange="showUser(this.value)">
<option value="">Select a person:</option>
<option value="1">Peter Griffin</option>
<option value="2">Lois Griffin</option>
<option value="3">Glenn Quagmire</option>
<option value="4">Joseph Swanson</option>
</select>
</form>
<br />
<div id="txtHint"><b>Person info will be listed here.</b></div>

</body>
</html> 
```

和 getuser.php

```
<?php
$q=$_GET["q"];

$con = mysql_connect('localhost', 'peter', 'abc123');
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("ajax_demo", $con);

$sql="SELECT * FROM user WHERE id = '".$q."'";

$result = mysql_query($sql);

echo "<table border='1'>
<tr>
<th>Firstname</th>
<th>Lastname</th>
<th>Age</th>
<th>Hometown</th>
<th>Job</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['FirstName'] . "</td>";
  echo "<td>" . $row['LastName'] . "</td>";
  echo "<td>" . $row['Age'] . "</td>";
  echo "<td>" . $row['Hometown'] . "</td>";
  echo "<td>" . $row['Job'] . "</td>";
  echo "</tr>";
  }
echo "</table>";

mysql_close($con);
?> 
```

[它如何工作的示例](http://www.w3schools.com/php/php_ajax_database.asp)。

# webdriver - 在 Web 表单上填写详细信息的最有效方法是什么？

> ID：11861680
> 
> 赞同：5
> 
> 时间：2012-08-08T09:36:40.747
> 
> 标签：webdriver

获取一个包含大量文本字段、下拉列表等的标准网页。在 webdriver 中填写值然后验证值是否输入正确的最有效方法是什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T10:30:27.130

如果您在输入字段中发生了一些 javascript 验证或其他魔法，您只需测试输入的值是否正确。您不想测试 webdriver/selenium 是否正常工作。

有多种方法，具体取决于您是要使用 webdriver 还是 selenium。这是我正在使用的东西的杂烩。

```
Assert.assertEquals("input field must be empty", "", selenium.getValue("name=model.query"));
driver.findElement(By.name("model.query")).sendKeys("Testinput");
//here you have to wait for javascript to finish. E.g wait for a css Class or id to appear
Assert.assertEquals("Testinput", selenium.getValue("name=model.query")); 
```

仅使用 webdriver：

```
WebElement inputElement = driver.findElement(By.id("input_field_1"));
inputElement.clear();
inputElement.sendKeys("12");
//here you have to wait for javascript to finish. E.g wait for a css Class or id to appear
Assert.assertEquals("12", inputElement.getAttribute("value")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-09T16:43:06.267

希望用户能够以某种方式看到填写表单的结果。所以你可以按照这些 BDD 式的思路来思考：

```
When I create a new movie
Then I should see my movie page 
```

也就是说，您的“新电影”步骤将执行字段输入和提交。而您的“然后”会断言电影会显示您输入的数据。

```
element = driver.find_element(:id, "movie_title")
element.send_keys 'The Good, the Bad, the Ugly'
# etc.
driver.find_element(:id, "submit").click 
```

我现在只是涉足这个，但这是我迄今为止想出的。它肯定看起来比 Capybara 之类的更冗长：

```
fill_in 'movie_title', :with => 'The Good, the Bad, the Ugly' 
```

希望这可以帮助。

# css - css边框bug - 倾斜渲染

> ID：11861683
> 
> 赞同：3
> 
> 时间：2012-08-08T09:36:47.993
> 
> 标签：css, border

我们有以下代码：http: [//jsfiddle.net/Z92Qp/](http://jsfiddle.net/Z92Qp/)

如您所见，鼠标悬停时出现的绿线在右侧是“倾斜的”。 [看图片](http://imageshack.us/photo/my-images/543/72358279.jpg)

是浏览器的bug吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:45:39.153

[不，边界是这样设计的，在这里](http://www.tizag.com/cssT/border.php)看到的一半

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T09:48:03.130

这不是浏览器如何选择呈现边框的错误。

请参阅我模拟的这个示例。 [http://jsfiddle.net/blowsie/Uss7X/](http://jsfiddle.net/blowsie/Uss7X/)

![在此处输入图像描述](../Images/9cbd291d91a2bd25c7ca87e042712871.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T09:45:59.337

嘿，现在习惯像这样框阴影

```
li:hover {
                box-shadow: 0 4px 0 0 #00FF00;
    -webkit-box-shadow: 0 4px 0 0 #00FF00;
    -moz-box-shadow: 0 4px 0 0 #00FF00;

            } 
```

**[现场演示](http://jsfiddle.net/Z92Qp/1/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T09:44:58.637

CSS 边框是用对角线绘制的。

否则，如果底部和右侧有 2 种不同的颜色（例如蓝色和红色），角落会发生什么？是全红还是全蓝？

这是众所周知的，甚至被用来制作[CSS 三角形](http://css-tricks.com/snippets/css/css-triangle/)

# testing - 如何处理大规模机器上的大规模杀毒测试

> ID：11861684
> 
> 赞同：-3
> 
> 时间：2012-08-08T09:36:58.717
> 
> 标签：testing, qa, antivirus

如何处理大规模机器上的大规模反病毒测试。在不同的虚拟机上处理大型反病毒测试的最佳简单方法是什么。有没有可以管理这么大的矩阵的开源工具。是否可以使用 XLS 表处理它。任何机构都有例子。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:29:09.737

虽然直接在虚拟机上识别病毒非常困难，但您可以通过监控网络上的流量来识别潜在受感染的虚拟机。

蠕虫通过扫描网络（随机探测）并识别其他易受攻击的机器来传播槽机器。这种机制通常会导致大量连接失败、冗余流量和针对某些易受攻击端口的流量。

# php - 在 PHP 中缓存辩论/论坛条目

> ID：11861688
> 
> 赞同：4
> 
> 时间：2012-08-08T09:37:13.193
> 
> 标签：php, mysql, caching

只是在寻找一个建议。在我们的一个网页上，我们有一个辩论/论坛网站。每次用户请求辩论页面时，他/她都会获得所有主题的列表（以及他们的答案数量等）。

当用户请求特定主题/线程时，该线程的所有答案都将显示给用户一个很长的用户名、用户图片、年龄、来自答案发布者的论坛帖子总数。

当前每次访问页面时都使用 MySQL 查询检索所有内容。但是，这开始变得非常缓慢（尤其是对于大线程，+3000 个答案）。

我想以某种方式缓存辩论条目，以加快此过程。但是问题是，如果我自己缓存条目，帖子数量等（当然是动态的），将不会总是最新的。

当这样的东西更新时，有没有什么聪明的方法来缓存页面/重新缓存它们？:)

预先感谢，菲舍尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:20:40.427

您应该根据其数据为缓存创建标签或名称。

例如，对于名为*Jake's Post 的帖子*，您可以创建名称的 md5，这将为您提供标签*49fec15add24931728652baacc08b8ee*。

*现在针对标签49fec15add24931728652baacc08b8ee*缓存与此帖子有关的内容和所有内容。当帖子更新或添加评论时，转到缓存并删除与*49fec15add24931728652baacc08b8ee*关联的所有内容。

现在没有缓存，当下一个访问者到达新帖子时，它将被重建。

您可以通过为每个帖子设置多个标签来进一步细分。例如，您可以有一个评论和答案的标签，当添加评论时删除评论标签，而不是答案标签。这减少了服务器在重建缓存时必须做的工作，因为现在只缺少注释。

有许多库和框架可以帮助您做到这一点。

杰克

**编辑**

我会使用文件来存储数据，更具体地说是页面的 HTML 输出。然后，您可以执行以下操作：

```
if(file_exists($tag))
{
    // Load the contents of the cache file here and output it
}
else
{
    // Do complex database look up and cache the file for later
} 
```

请记住，像 Zend 这样的框架内置了这类东西。我会认真考虑使用框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:06:08.040

有趣的话题！

我首先要看的是优化你的数据库——即使你不得不花钱升级硬件，它也会比引入缓存更容易、更便宜——更少的移动部件，更少的可能出错的事情......

如果您无法从数据库中挤出更多性能，那么我要考虑的下一件事就是对数据进行一点反规范化。例如，维护一个“reply_count”列，而不是计算针对每个主题的回复。这很丑陋，但减少了出错的机会 - 运气好的话，您可以本地化数据访问层中的所有逻辑。

我要考虑的下一个选项是缓存页面。例如，如果您有合理的流量水平，只需将“辩论页面”缓存 30 秒就可以显着减少数据库的负载，即使一切都出错了，因为您正在缓存整个页面，它会下次页面过时时自行解决。在大多数情况下，缓存整个页面是可以的 - 如果在过去 30 秒内出现了新帖子并且您没有在页面上看到它，这并不是世界末日。

如果您确实必须在页面上提供更多“最新”内容，您可能会在数据库访问级别引入缓存。过去，我构建了一个数据库访问层，它基于关于缓存结果多长时间的硬连线逻辑来缓存 SQL 查询的结果。在我们的例子中，我们构建了一个函数来调用数据库，它允许您指定查询（例如获取用户的帖子）、参数数组（例如用户名、日期来源）和缓存持续时间。数据库访问函数将根据查询和参数在缓存持续时间内缓存结果；如果缓存持续时间已过期，它将刷新缓存。这个方案是相当防错的——作为最终用户，你很少会注意到缓存导致的怪异，而且因为我们保持缓存时间相当短，所以它很快就解决了。

通过缓存内容片段来构建您的页面是可能的，但很快就会变得非常复杂。由于缓存策略不同，创建对最终用户毫无意义的页面非常容易——“未读帖子”不会增加细分中的帖子数量，因为“摘要”和“之间的缓存策略不同”细节”。

# cocoa - 恢复 NSTableView 中的选择（NSWindowRestoration）

> ID：11861693
> 
> 赞同：5
> 
> 时间：2012-08-08T09:37:27.047
> 
> 标签：cocoa, nstableview, nswindowrestoration

我正在一个非基于文档的 Cocoa 应用程序中进行窗口恢复。该应用程序具有类似 Mail.app 的界面。每个窗口代表一个帐户；该窗口中的边栏列出了该帐户中的对话，主区域列出了所选对话中的消息。

这些列表中的每一个都是基于视图的`NSTableView`. 会话列表绑定到一个绑定到窗口控制器属性`NSArrayController`的对象；消息列表绑定到第二个，第二个绑定到第一个的选择。`contentSet``account``NSArrayController``contentSet``NSArrayController`

我已经完成了我的窗口恢复工作，它重新打开了所有窗口并将它们与帐户对象重新关联，但我不知道如何恢复表视图的选择。这似乎不会自动发生——当窗口恢复时，选择了一个对象，但它不是之前选择的那个。这里发生了什么？保存和恢复选择的最简单方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T17:24:40.150

正如您所意识到的，`NSTableView`不会自动保存选择。

最简单的方法是将你`NSTableView`的 's绑定`selectionIndexes`到你`Array Controller`的 's上`selectionIndexes`，然后从`NSUserDefaults`. 然后你可以将阵列控制器绑定`selectionIndexes`到`Shared User Defaults Controller`（使用控制器密钥`values`，你可以命名你的`Model Key Path`任何东西）。因为`NSIndexSet`需要存档/取消存档才能存储，所以使用`NSKeyedUnarchiveFromData`值转换器。这本身就应该起作用。

* * *

如果您在重置选择索引时遇到问题，因为表格视图没有立即重新填充（我怀疑您会遇到这些问题，因为您正在填充绑定），您可以手动保存默认值。

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setValue:[NSKeyedArchiver archivedDataWithRootObject:self.arrayController.selectionIndexes] valueForKey:vvLastSavedSelectionIndex]; 
```

并检索它们：

```
NSIndexSet *selectionIndexes = [NSKeyedUnarchiver unarchiveObjectWithData:[[NSUserDefaults standardUserDefaults] valueForKey:vvLastSavedSelectionIndex]];
[self.arrayController setSelectionIndexes:selectionIndexes]; 
```

# php - Ajax 提交未正常进行

> ID：11861695
> 
> 赞同：0
> 
> 时间：2012-08-08T09:37:30.370
> 
> 标签：php, ajax, jquery

伙计们，这是我的第一个问题。我有一个表格，显示学生姓名和输入字段以输入他们的考试成绩。表头显示了主题（它在一个while循环中）并有一个输入字段来输入所有主题的最大分数。这个最大标记是通过 Ajax 更新的。它没有正常发生。如果我们第一次按提交，什么都不会发生。如果我们第二次按下提交，它就会提交。如果我们按第三次，它会更新两次，如果我们按第四次，它会更新三次（成功消息显示三次）代码 -

```
<script>
$(document).ready(function(){
$("#maxmarks<?php echo "$m";?>").validate({

    rules:{

        maxmarks:{

        number: true,

        }

    },
    messages:{

        maxmarks:{

            number: "Please enter a valid marks",

        }

    },
    submitHandler: function(form){

        $("#maxmarks<?php echo "$m";?>").submit(function(){

            $.ajax({

                url : 'components/teacher/performance/maxupdate.php', 
                type : 'POST', 
                data : $("#maxmarks<?php echo "$m";?>").serialize(),
                success : function(res){

                    $('#resultreturn').prepend(res);

                }
            });
            return false;
        }); 

    }                 
 });
 });
 </script> 
```

该表单与上面的脚本具有相同的 id。有人可以告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:44:49.290

您有两次提交处理程序。一次 as `submitHandler:`，然后你再做一次 as`.submit()`

一个或另一个 - 不是两者兼而有之。

第一次提交表单时，它会创建提交处理程序（正如您告诉它的那样`.submit()`），但实际上并没有运行它。

第二次运行它（因为您之前创建了它），然后再次创建它。每次你运行它，你都会得到更多。

# python - 导入橙色返回“ImportError：没有名为橙色的模块”

> ID：11861698
> 
> 赞同：4
> 
> 时间：2012-08-08T09:37:38.493
> 
> 标签：python, linux, ubuntu, orange

我想使用 Orange 软件包进行[科学分析](http://orange.biolab.si/)。安装在`x86_64 Ubuntu 12.04`, with上`Python 2.7.3`, 顺利, 使用`sudo easy_install orange`. 但是，该软件包似乎无法直接使用：

```
11:30:43 leon@t410i:~$ python
Python 2.7.3 (default, Apr 20 2012, 22:39:59) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import orange
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named orange
>>> 
```

但是，在从适当的 dist-packages 子目录运行 Python 时导入包可以正常工作：

```
11:34:02 leon@t410i:~$ cd /usr/local/lib/python2.7/dist-packages/Orange-2.5a4-py2.7-linux-x86_64.egg/Orange
11:34:32 leon@t410i:/usr/local/lib/python2.7/dist-packages/Orange-2.5a4-py2.7-linux-x86_64.egg/Orange$ python
Python 2.7.3 (default, Apr 20 2012, 22:39:59) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import orange
>>> orange.__file__
'orange.so'
>>> 
```

问题是什么？当从文件系统中的任何地方调用 python 时，包含在 dist-packages 中的其他包工作正常。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T09:52:57.267

导入 Orange 的语义在 2.5 版左右发生了变化。如果使用使用以前版本编写的代码，则必须进行一些更改，请参阅[http://orange.biolab.si/blog/2011/12/20/orange-25-code-conversion/](http://orange.biolab.si/blog/2011/12/20/orange-25-code-conversion/)。至关重要的是，需要更换：

```
import orange 
```

和：

```
import Orange 
```

(note the capital letter O in the second example).

A side effect is that other sub-modules no longer need to be explicitly imported; a single

```
import Orange 
```

is enough, instead of e.g.

```
import orange, orngTest, orngStat, orngTree 
```

# c# - 与通用类型 Nhibernate 合并

> ID：11861699
> 
> 赞同：2
> 
> 时间：2012-08-08T09:37:43.537
> 
> 标签：c#, nhibernate, generics, types

这是我的 AbstractNHibernateDao，我想将 SaveOrUpdateCopy 与 Merge 命令一起使用，但是当我尝试与 Type TI 一起使用时出现以下错误

> 错误 1 ​​类型“T”必须是引用类型才能在泛型类型或方法“NHibernate.ISession.Merge(T)”中用作参数“T”

```
public abstract class AbstractNHibernateDao<T, TIdT> : IDao<T, TIdT>
    {
        private readonly Type _persitentType = typeof (T);

        /// <summary>
        ///   Exposes the ISession used within the DAO.
        /// </summary>
        private static ISession NHibernateSession
        {
            get { return NHibernateSessionManager.Instance.GetSession(); }
        }

        #region IDao<T,TIdT> Members

        /// <summary>
        ///   For entities that have assigned ID's, you must explicitly call Save to add a new one. See http://www.hibernate.org/hib_docs/reference/en/html/mapping.html#mapping-declaration-id-assigned.
        /// </summary>
        public T Save(T entity)
        {
            NHibernateSession.Save(entity);
            NHibernateSession.Flush();
            return entity;
        }

        /// <summary>
        ///   For entities with automatatically generated IDs, such as identity, SaveOrUpdate may be called when saving a new entity. SaveOrUpdate can also be called to update any entity, even if its ID is assigned.
        /// </summary>
        public T SaveOrUpdate(T entity)
        {
            NHibernateSession.SaveOrUpdate(entity);
            NHibernateSession.Flush();
            return entity;
        }

        public T SaveOrUpdateCopy(T entity)
        {
            NHibernateSession.Merge(entity);
            return entity;
        } 

        public void Delete(T entity)
        {
            NHibernateSession.Delete(entity);
            NHibernateSession.Flush();
        }

        /// <summary>
        ///   Commits changes regardless of whether there's an open transaction or not
        /// </summary>
        public void CommitChanges()
        {
            if (NHibernateSessionManager.Instance.HasOpenTransaction())
            {
                NHibernateSessionManager.Instance.CommitTransaction();
            }
            else
            {
                // If there's no transaction, just flush the changes
                NHibernateSessionManager.Instance.GetSession().Flush();
            }
        }

    } 
```

我怎么能用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:39:59.263

你应该这样做`Merge(entity)`而不是`Merge(T)`：

```
public abstract class AbstractNHibernateDao<T, TIdT> 
    : IDao<T, TIdT> where T : class
{
    public T SaveOrUpdateCopy(T entity)
    {
        NHibernateSession.Merge(entity);
        return entity;
    }
} 
```

# c# - 加载用户控件时显示“正在加载用户控件”消息

> ID：11861701
> 
> 赞同：1
> 
> 时间：2012-08-08T09:37:51.070
> 
> 标签：c#, winforms, multithreading

我有一个带有 TabStrip 控件的 Winforms 应用程序。在运行时，用户控件将被动态加载到不同的选项卡中。

我想在加载 UserControl 之前向用户显示“用户控件 xyz 正在加载”消息（将现有标签设置为可见并更改其文本），直到加载完全完成。

到目前为止我的方法：

1.  试图在 BackgroundWorker 线程中加载用户控件。这失败了，因为我必须在加载 UserControl 期间访问 Gui-Controls
2.  试图在 BackgroundWorker 线程中显示消息。这显然失败了，因为 BackgroundWorker 线程不是 UI 线程 ;-)
3.  显示消息，调用 DoEvents()，加载 UserControl。每次我加载 UserControl 时，这都会导致不同的行为（闪烁，...），并且我无法控制何时以及如何将其再次设置为不可见。

总结一下，我有两个问题：

1.  在加载用户控件之前如何确保消息直接可见
2.  如何确保消息再次设置为不可见，就在 UserControl 完全加载的那一刻（包括所有 DataBindings、网格格式等）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:49:47.327

我们使用的类似这样：

1.  创建一个新表单，其中包含您想向用户展示的任何内容，
2.  实现一个静态方法，您可以在其中调用此表单以在其内部创建，以防止内存泄漏
3.  在此表单中创建一个新线程，以便表单在单独的线程中运行并保持响应；我们使用一个显示进度条填充的ajax 控件。

在用于启动线程的方法中，将其属性设置为 topmost true 以确保它保持在顶部。

例如，在您的主要形式中执行此操作：

```
loadingForm.ShowLoadingScreen("usercontrollname");
//do something
loadingform.CloseLoadingScreen(); 
```

在加载表单类中；

```
public LoadingScreen()
{
  InitializeComponent();
}

public static void ShowLoadingScreen(string usercontrollname)
{
  // do something with the usercontroll name if desired
  if (_LoadingScreenThread == null)
  {
    _LoadingScreenThread = new Thread(new ThreadStart(DoShowLoadingScreen));
    _LoadingScreenThread.IsBackground = true;
    _LoadingScreenThread.Start();
  }
}

public static void CloseLoadingScreen()
{
  if (_ls.InvokeRequired)
  {
    _ls.Invoke(new MethodInvoker(CloseLoadingScreen));
  }
  else
  {
    Application.ExitThread();
    _ls.Dispose();
    _LoadingScreenThread = null;
  }
}

private static void DoShowLoadingScreen()
{
    _ls = new LoadingScreen();
    _ls.FormBorderStyle = FormBorderStyle.None;
    _ls.MinimizeBox = false;
    _ls.ControlBox = false;
    _ls.MaximizeBox = false;
    _ls.TopMost = true;
    _ls.StartPosition = FormStartPosition.CenterScreen;

  Application.Run(_ls);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T07:27:42.343

根据@wterbeek 的示例，我出于自己的目的修改了该类：

*   将其居中加载表格
*   修改其不透明度
*   将其调整为父大小
*   将其显示为对话框并阻止所有用户交互

*   我被要求展示一个颤抖的人

我在线收到一个空错误：

```
if (_ls.InvokeRequired) 
```

所以我添加了一个 _shown 条件（如果动作完成得如此之快以至于 _LoadingScreenThread 线程甚至没有运行）来检查表单是否存在。

此外，如果 _LoadingScreenThread 没有启动，Application.Exit 将关闭主线程。

我想发布它可能会帮助其他人。代码中的注释将解释更多。

```
public partial class LoadingScreen : Form {

    private static Thread _LoadingScreenThread;

    private static LoadingScreen _ls;

    //condition required to check if the form has been loaded
    private static bool _shown = false;

    private static Form _parent;

    public LoadingScreen() {
        InitializeComponent();
    }
    //added the parent to the initializer
    //CHECKS FOR NULL HAVE NOT BEEN IMPLEMENTED
    public static void ShowLoadingScreen(string usercontrollname, Form parent) {
        // do something with the usercontroll name if desired
        _parent = parent;
        if (_LoadingScreenThread == null) {
            _LoadingScreenThread = new Thread(new ThreadStart(DoShowLoadingScreen));
            _LoadingScreenThread.SetApartmentState(ApartmentState.STA);
            _LoadingScreenThread.IsBackground = true;
            _LoadingScreenThread.Start();
        }
    }

    public static void CloseLoadingScreen() {
        //if the operation is too short, the _ls is not correctly initialized and it throws 
        //a null error
        if (_ls!=null && _ls.InvokeRequired) {
            _ls.Invoke(new MethodInvoker(CloseLoadingScreen));
        } else {
            if (_shown)
            {
                //if the operation is too short and the thread is not started
                //this would close the main thread
                _shown = false;
                Application.ExitThread();
            }
            if (_LoadingScreenThread != null)
                _LoadingScreenThread.Interrupt();
            //this check prevents the appearance of the loader
            //or its closing/disposing if shown
            //have not found the answer
            //if (_ls !=null)
            //{
               _ls.Close();
               _ls.Dispose();
            //}
            _LoadingScreenThread = null;
        }
    }

    private static void DoShowLoadingScreen() {
        _ls = new LoadingScreen();
        _ls.FormBorderStyle = FormBorderStyle.None;
        _ls.MinimizeBox = false;
        _ls.ControlBox = false;
        _ls.MaximizeBox = false;
        _ls.TopMost = true;
        //get the parent size
        _ls.Size = _parent.Size; 
        //get the location of the parent in order to show the form over the 
        //target form
        _ls.Location = _parent.Location;     
        //in order to use the size and the location specified above
        //we need to set the start position to "Manual"
        _ls.StartPosition =FormStartPosition.Manual;
        //set the opacity
        _ls.Opacity = 0.5;
        _shown = true;
        //Replaced Application.Run with ShowDialog to show as dialog
        //Application.Run(_ls);
        _ls.ShowDialog();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T09:53:45.640

再次尝试第二种方法：

> 试图在 BackgroundWorker 线程中显示消息。这显然失败了，因为 BackgroundWorker 线程不是 UI 线程 ;-)

但是这一次，在后台线程中使用以下代码来更新您的标签：

```
label.Invoke((MethodInvoker) delegate {
    label.Text = "User Control xyz is loading";
    label.Visible = true;
});
// Load your user control
// ...
label.Invoke((MethodInvoker) delegate {
    label.Visible = false;
}); 
```

[`Invoke`](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)允许您在另一个线程中更新您的 UI。

# php - 操作数应包含 1 列 MySQL

> ID：11861703
> 
> 赞同：1
> 
> 时间：2012-08-08T09:38:00.413
> 
> 标签：php, mysql, mysql-error-1241

有谁知道这个查询发生了什么？我想要做的是如果表`courseID`中*不存在*表中，则打印所有退出。但我不断收到错误**操作数应包含 1 列**`elective_modules`*`group_elective_modules``group_elective_modules`*

 *****这是我的查询**

```
$alternativeEQuery = 
"SELECT elective_modules.courseID,elective_modules.yr 
 FROM elective_modules
 WHERE elective_modules.yr = '$year1' 
 AND elective_modules.courseID 
 NOT IN 
     (SELECT group_elective_modules.moduleID,group_elective_modules.courseName 
 FROM group_elective_modules 
 WHERE group_elective_modules.courseName = '$courseTitle'
 AND elective_modules.courseID = group_elective_modules.moduleID)";

$alternativeEResult = mysql_query($alternativeEQuery) or die($alternativeEQuery."<br/><br/>".mysql_error()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T09:39:20.960

此处的子查询中不能有两列：

```
(SELECT group_elective_modules.moduleID,group_elective_modules.courseName 
 FROM group_elective_modules 
 WHERE group_elective_modules.courseName = '$courseTitle'
 AND elective_modules.courseID = group_elective_modules.moduleID) 
```

要么使用正确的，要么添加第二个`not in`子句并在那里使用另一个列名。***

# python - 如何在 cx_Oracle 和 Sql * Plus 上获得相同的结果？

> ID：11861704
> 
> 赞同：0
> 
> 时间：2012-08-08T09:38:00.607
> 
> 标签：python, cx-oracle

它是 - 对于 sqlplus - 命令：

```
SQL> set serveroutput on
SQL> exec where.my_package.ger_result('something');
something=1823655138 
```

它是 - 对于 cx_Oracle：

```
>>> c.callproc('where.my_package.ger_result', ('something',))
['something'] 
```

如您所见 - 结果是不同的。我不知道如何解决它。:[

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:47:25.773

对不起，我无法复制这个。

我没有你的 PL/SQL 包，所以我使用了以下存储过程：

```
CREATE OR REPLACE PROCEDURE p_do_somet (
    p_param     IN VARCHAR2
) AS
BEGIN
    dbms_output.put_line(p_param || '=1823655138');
END;
/ 
```

我`something=1823655138`从 SQL*Plus 和在您的答案中使用 Python 脚本得到了相同的输出。

如果您使用 SQL*Plus 和 cx_Oracle 得到不同的结果，那么您的存储过程正在做一些非常有趣的事情（我不知道是什么导致它这样做），或者您的 SQL*Plus 会话和 Python 脚本没有连接到相同的数据库和/或模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:09:43.323

```
import cx_Oracle

dsn_tns = cx_Oracle.makedsn('my_ip_address_server_next_port', 0000, 'sid')
db = cx_Oracle.connect('user', 'password', dsn_tns)
curs = db.cursor()
curs.callproc("dbms_output.enable")

curs.callproc('where.my_package.ger_result', ['something',])

statusVar = curs.var(cx_Oracle.NUMBER)
lineVar = curs.var(cx_Oracle.STRING)
while True:
  curs.callproc("dbms_output.get_line", (lineVar, statusVar))
  if statusVar.getvalue() != 0:
    break
  print lineVar.getvalue() 
```

# sharepoint - 检查项目的角色

> ID：11861710
> 
> 赞同：0
> 
> 时间：2012-08-08T09:38:19.270
> 
> 标签：sharepoint, roles, splistitem

如何检查当前用户是否具有编辑角色，在顺序工作流的列表中创建项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T23:50:27.723

我想你需要实现 onWorkflowActivated 事件（http://msdn.microsoft.com/en-us/library/gg265727.aspx）

要获得当前用户的项目级别权限，您需要：

```
SPRoleDefinitionBindingCollection usersRoles = mysplistitem.AllRolesForCurrentUser; 
```

有关更多信息，请参见下面的链接； [http://sharepointmalaya.blogspot.com.au/2009/07/validate-user-base-permissions-before.html](http://sharepointmalaya.blogspot.com.au/2009/07/validate-user-base-permissions-before.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T07:54:29.963

要检查当前用户是否对项目、文件夹、列表或站点具有权限，请使用[DoesUserHavePermission](http://msdn.microsoft.com/ru-ru/library/microsoft.sharepoint.splistitem.doesuserhavepermissions%28v=office.12%29.aspx)方法

# ios - Plist 字典键

> ID：11861713
> 
> 赞同：0
> 
> 时间：2012-08-08T09:38:25.610
> 
> 标签：ios, plist, key

我正在使用此代码将内容添加到 plist 中：

```
//////////// Save data into plist /////////////////
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *path = [documentsDirectory stringByAppendingPathComponent:@"datatesting.plist"];
NSLog(@"path='%@'",path);

NSFileManager *nfm = [[NSFileManager alloc] init];
if([nfm fileExistsAtPath:path])
{
    // if file exists, get its contents, add more entries and write back
    NSMutableArray *array = [[NSMutableArray alloc] initWithContentsOfFile:path];
    NSArray *keys = [NSArray arrayWithObjects:@"Title",@"Description",@"Coordinate",nil]; 

    [array addObject:[NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:[NSString stringWithFormat:@"%@",titlestring],[NSString stringWithFormat:@"%@",descriptionstring],[NSString stringWithFormat:@"%@",coordinadastring], nil] forKeys:keys]]; 
    NSLog(@"modified array=%@",array);
    BOOL ok = [array writeToFile:path atomically:YES];
    if(!ok){
        NSLog(@"Unable to write appended file");
        return;
    }

} else {

    // if file doesn't exist, create a new one
    NSMutableArray *array = [[NSMutableArray alloc] init];
    NSArray *keys = [NSArray arrayWithObjects:@"Title",@"Description",@"Coordinate",nil]; 
    [array addObject:[NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:[NSString stringWithFormat:@"%@",titlestring],[NSString stringWithFormat:@"%@",descriptionstring],[NSString stringWithFormat:@"%@",coordinadastring], nil] forKeys:keys]]; 
    NSLog(@"new array=%@",array);
    BOOL ok = [array writeToFile:path atomically:YES];
    if(!ok){
        NSLog(@"Unable to write new file");
        return;
    }
} 
```

现在我在使用 plist 的内容时遇到了问题。所以我的两个问题是： - 当前 plist 的字典的键是什么？- 在 Tableview 中读取内容的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:50:36.220

你有一个字典数组。您需要迭代数组的内容，然后查看每个字典。您可以使用块枚举器或较旧的 for() 样式来执行此操作。我现在将使用后者，因为您可能不知道块。

```
NSArray *array = ...; // read in the array from the file
for(NSDictionary *dict in array) {
  NSString *title = [dict objectForKey:@"Title"];
  ... etc
} 
```

当你想在 tablview 中显示这些数据时，行数就是字典的数量（即 [array count]）。如果您只想显示每个单元格的标题，您将获取单元格行号，然后通过 [array objectAtIndex:cellRow]) 获取字典，然后像上面一样拉出标题。

# python - Python argparse：如何在仍然是可选参数的同时将 `--add` 更改为 `add`？

> ID：11861717
> 
> 赞同：3
> 
> 时间：2012-08-08T09:38:41.650
> 
> 标签：python, command-line-arguments, argparse

我想要这个功能：

```
$ python program.py add Peter 
'Peter' was added to the list of names. 
```

我可以用`--add`而不是`add`这样来实现这一点：

```
import argparse
parser = argparse.ArgumentParser()
parser.add_argument("--add", help="Add a new name to the list of names",
                    action="store")
args = parser.parse_args()
if args.add:
   print "'%s' was added to the list of names." % args.add
else:
   print "Just executing the program baby." 
```

这样：

```
$ python program.py --add Peter
'Peter' was added to the list of names. 
```

但是当我改成`--add`它`add`不再是可选的时候，我怎么还能让它是可选的却没有那些`--`标志呢？（最好也使用`argparse`图书馆）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:53:27.577

您想要的实际上称为“位置参数”。你可以像这样解析它们：

```
import argparse                                                             
parser = argparse.ArgumentParser()                                             
parser.add_argument("cmd", help="Execute a command",                           
                    action="store", nargs='*')                                 
args = parser.parse_args()                                                     
if args.cmd:                                                                   
    cmd, name = args.cmd                                                       
    print "'%s' was '%s'-ed to the list of names." % (name, cmd)               
else:                                                                          
    print "Just executing the program baby." 
```

这使您能够指定不同的操作：

```
$ python g.py add peter
'peter' was 'add'-ed to the list of names.

$ python g.py del peter
'peter' was 'del'-ed to the list of names.

$ python g.py 
Just executing the program baby. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:53:53.627

您可以使用[子命令](http://docs.python.org/dev/library/argparse.html#sub-commands)来实现此行为。尝试以下内容

```
import argparse
parser = argparse.ArgumentParser()

subparsers = parser.add_subparsers(title='Subcommands',
    description='valid subcommands',
    help='additional help')

addparser = subparsers.add_parser('add')
addparser.add_argument('names', nargs='*')

args = parser.parse_args()

if args.names:
    print "'%s' was added to the list of names." % args.names
else:
    print "Just executing the program baby." 
```

Note that the use of `nargs='*'` means that `args.names` is now a list, unlike your `args.add`, so you can add an arbitrary number of names following `add` (you'll have to modify how you handle this argument). The above can then be called as follows:

```
$ python test.py add test
'['test']' was added to the list of names.

$ python test.py add test1 test2
'['test1', 'test2']' was added to the list of names. 
```

# java - jooq 是否有任何性能领先于 java 中的简单 sql

> ID：11861719
> 
> 赞同：4
> 
> 时间：2012-08-08T09:38:47.140
> 
> 标签：java, sql, prepared-statement, jooq

我想将 jooq 用于我的 java web 项目，因为从它的规范来看，它似乎简单而好的查询构建器，但它是否比 java 中的简单查询或准备好的语句有任何性能提升。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T15:12:59.303

有正在进行的（未发布的）基准测试来检查 jOOQ 中的瓶颈和一般性能问题。可以在此处查看最近发现的问题的示例：

[https://github.com/jOOQ/jOOQ/issues/1625](https://github.com/jOOQ/jOOQ/issues/1625)

正如[Mikko 所说](https://stackoverflow.com/a/11861819/521799)，jOOQ 无法击败直接传递给 JDBC 的静态 SQL 字符串，因为您将始终有以下开销：

1.  构造 jOOQ 对象
2.  遍历 jOOQ 对象以呈现 SQL
3.  `PreparedStatement`使用该 SQL创建一个
4.  遍历 jOOQ 对象以查找绑定变量，将它们绑定到`PreparedStatement`

如果性能在您的环境中至关重要，我建议您不要让 jOOQ 为每个查询执行执行这些步骤。相反，让 jOOQ 渲染一次 SQL 并自己缓存 SQL 字符串，以及对可重用`PreparedStatement`. 但是，如果您不使用内存数据库，例如 H2，我们在这里讨论的是微优化，如基准所示。我们谈论的是每次查询获得 < 1 毫秒。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T09:44:32.127

不，它不提供性能增益。JOOQ 本身通过 JDBC 与数据库通信（并使用准备好的语句）并且不包含缓存，因此它根本无法比直接通过 JDBC 执行查询更快。

# javascript - 文本框的 JavaScript 求和

> ID：11861721
> 
> 赞同：0
> 
> 时间：2012-08-08T09:38:55.690
> 
> 标签：javascript, dynamic, textbox

我真的可以帮你！我需要汇总动态数量的文本框，但我的 JavaScript 知识是每周完成此任务的方式。任何人都可以帮助我吗？我希望该函数在名为 inptSum 的 p-tag 中打印总和。

这是一个函数和html代码：

```
function InputSum() {
    ...
}

<table id="tbl">
<tbody>
    <tr>
        <td align="right">
            <span>June</span>
        </td>
        <td>
            <input name="month_0" type="text" value="0" id="month_0" onchange="InputSum()" />
        </td>
    </tr>
    <tr>
        <td align="right">
            <span>July</span>
        </td>
        <td>
            <input name="month_1" type="text" value="0" id="month_1" onchange="InputSum()" />
        </td>
    </tr>
    <tr>
        <td align="right">
            <span>August</span>
        </td>
        <td>
            <input name="month_2" type="text" value="0" id="month_2"  onchange="InputSum()" />
        </td>
    </tr>
    <tr>
        <td align="right">
            <span>September</span>
        </td>
        <td>
            <input name="month_3" type="text" value="0" id="month_3" onchange="InputSum()" />
        </td>
    </tr>
    </tbody>
</table>

<p id="inputSum"></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:42:42.363

```
function InputSum() {
    var inputs = document.getElementsByTagName("input"); 
    for (var i = 0; i < inputs.length; i++) { 
        if(inputs[i].id.indexOf("month_") == 0) 
            alert(inputs[i].value); 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:46:42.483

```
function InputSum() {
   var month_0=document.getElementById("month_0").value;// get value from textbox
  var month_1=document.getElementById("month_1").value;
  var month_2=document.getElementById("month_2").value;
   var month_3=document.getElementById("month_3").value;
   // check number Can be omitted the

   alert(month_0+month_1+month_2+month_3);//show result 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:56:47.107

使用一点 jQuery，您可以很容易地做到这一点，使用[以选择器开头的属性](http://api.jquery.com/attribute-starts-with-selector/)。然后我们遍历它们，将它们的值解析为整数并将它们相加。像这样的东西：

```
function InputSum() {
    var sum = 0;
    $('input[id^="month_"]').each(function () {
        sum += parseInt($(this).val(), 10);
    });
    $("#inputSum").text(sum);
} 
```

如果您将代码修改为以下内容，您甚至可以摆脱每个输入的 onchange 属性：

```
$(function () {
    var elms = $('input[id^="month_"]');
    elms.change(function() {
        var sum = 0;
        elms.each(function () {
            sum += parseInt($(this).val(), 10);
        });
        $("#inputSum").text(sum);
    });
}); 
```

# uitableview - uitableviewcell中的奇怪侧条纹

> ID：11861722
> 
> 赞同：0
> 
> 时间：2012-08-08T09:38:56.560
> 
> 标签：uitableview

我正在尝试创建分组表视图，每当我选择小于 1 的 alpha 时，我都会得到这两个奇怪的条纹。有什么建议么？提前谢谢。

这是一个屏幕截图：http: [//imgur.com/VePLG](http://imgur.com/VePLG)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:17:39.650

在`tableView:cellForRowAtIndexPath:`，一旦你有了你的细胞，做：

```
cell.textLabel.backgroundColor = [UIColor clearColor]; 
```

# jquery - 从位于特定行的表中选择文本输入

> ID：11861734
> 
> 赞同：0
> 
> 时间：2012-08-08T09:39:34.083
> 
> 标签：jquery

我有这样的桌子-

```
<table class='table'>
  <tr>
   <td class="td"><input type="text" name="name<%=f.getId()%>" value="<%=f.getName()%>"/>      
   </td>
   <td class="td"><input type="text" id="field_length" size="3" name="length<%=f.getId()%>" value="<%=f.getLength()%>"/></td>
   <td class="td"><input type="text" name="tooltip<%=f.getId()%>" value="<%=f.getToolTip()%>"/></td>
  </tr>
  <tr>
   same like the previous.......
  </tr>
  <tr>
    same like previous....
  </tr> 
```

现在我想更改位于第二行的文本框中的值，其 id 为“field_length”。我尝试使用 jquery 来做到这一点。

```
$(‘tr:nth-child(2) input:text#field_length’).val(10); 
```

但这不起作用。任何机构都可以为此提供一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:41:00.617

ID 必须是唯一的，您可以使用 id 选择器选择元素：

```
$('#field_length').val(10) 
```

> 我需要的是更改除第一行之外的每一行中所有文本框的值。

你可以试试：

```
$('input:not(:first)').val(10) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:48:23.090

您的第一个 td 以另一个 td 而不是 /td 结尾。顺便说一句，正如您解释如何构建表格时，您将获得多个具有相同 ID 的元素，这是不允许的，正如 Raminson 所提到的，ID 应该是唯一的。最后，您可以尝试使用 each()。如果您需要我，我会在这里发布如何操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:04:58.010

改用这个，只需选择名称以长度开头的输入，而不是错误的 ID 构造。元素名称的第一部分是固定的……如果需要，您可以使用此解决方案删除 ID。

```
$("table tr:nth-child(2) input:text[name^=length]").val(10); 
```

[小提琴样本](http://jsfiddle.net/Yoeri/Xkt3h/8/)

# java - App Engine 多个“在 500 空前提交”错误图片

> ID：11861746
> 
> 赞同：0
> 
> 时间：2012-08-08T09:40:12.453
> 
> 标签：java, image, google-app-engine

嗨，我正在开发一个照片 Web 应用程序，并且每当我生成请求太快时都会出现以下错误，例如 - 多次单击相册导致服务器端不得不在短时间内提供太多照片。怀疑只是我的本地机器没有足够的内存。如果它在云端，我会遇到同样的问题吗？

```
Aug 8, 2012 5:30:47 PM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: Error for /_ah/img/eQaAh6XKGrl39oZ5BZgVcQ=s500
java.lang.OutOfMemoryError: Java heap space
Aug 8, 2012 5:30:47 PM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: Error for /_ah/img/RHDL5oC2G-hrgw2rVCj4wQ=s500
java.lang.OutOfMemoryError: Java heap space
Aug 8, 2012 5:30:47 PM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: Committed before 500 null
Aug 8, 2012 5:30:47 PM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: /_ah/img/a09PBMb4WLfIZYKCyGA7fQ=s500
java.lang.IllegalStateException: Committed
    at org.mortbay.jetty.Response.resetBuffer(Response.java:1024)
    at org.mortbay.jetty.Response.sendError(Response.java:240).... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T20:33:23.670

根据您问题中的详细信息，实际上不可能给您一个明确的答案。

要在本地避免此类错误，您可以`--jvm_flag=-Xmx1024m`在调用`dev_appserver.sh`. 如果您一直遇到错误，请增加该值。

如果您部署后仍然发现问题，则可能需要将[前端类更改](https://developers.google.com/appengine/docs/adminconsole/performancesettings#Setting_the_Frontend_Instance_Class)为具有更多内存的类。更高的实例类具有更多的内存（和 CPU），但每个实例小时的成本更高。

# android - 是否有本机按钮组元素？

> ID：11861757
> 
> 赞同：2
> 
> 时间：2012-08-08T09:40:31.337
> 
> 标签：android, button, android-button

我需要一组水平的两个按钮。它应该或者至少看起来是原生的，因为我希望我的应用看起来完全原生。我与谷歌地图应用程序的按钮组风格相同：

![谷歌地图应用](../Images/7cd4dba0efc80b5fcf679083f93387ef.png) ![谷歌地图主屏幕](../Images/5160f26741ade7585424d3031fb90b9f.png)

有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:44:45.980

是什么让你相信这些按钮是原生的？:)
实际上，这些控件是自定义`RadioButtons`包含在`RadioGroup`.

关于本机按钮......通常这些按钮在不同的 Android 版本上具有不同的外观和感觉。例如，在 Android 2.2 上，主要颜色是白色/灰色，在 Android 4.0 上是蓝色。

# initialization - BPEL，初始化变量并重复 onAlarm eventHandler

> ID：11861759
> 
> 赞同：1
> 
> 时间：2012-08-08T09:40:34.843
> 
> 标签：initialization, bpel

我有一个小问题我目前无法解决。在 BPEL 中，我想创建一个 onAlarm eventHandler，它会立即触发（即“for”元素设置为“PT0S”）并每 2 秒重复一次。此事件处理程序应包含一个计数器，该计数器在每次警报触发时递增。

问题是：如何初始化计数器？如果变量将在 onAlarm 范围内初始化，则该值将不再增加。在“正常”控制流中，该值也无法初始化，因为如果进程或 onAlarm 范围首先运行，则未定义该值。所以我会时不时地得到一个 uninitializedVariable 异常。

我的解决方案是不在进程范围内也不在 onAlarm 范围内初始化变量，而是创建一个 faultHandler ，其中将初始化变量，然后执行 onAlarm 流程。问题是每个 uninitializedVariable 执行现在都会被这个 faultHandler 捕获，并且可能还有另一个。

那么是否有另一种可能性来处理这个问题，或者我可以以某种方式找出哪个变量没有正确初始化，以便 faultHandler 可以获得两个控制流？

该解决方案应该适用于每个 BPEL 引擎。

谢谢，迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T15:36:25.193

`from-spec`您可以使用就像在赋值中一样使用其定义上的默认值来初始化变量。有关详细信息，请参阅[规范的第 8.4.1 节](http://docs.oasis-open.org/wsbpel/2.0/OS/wsbpel-v2.0-OS.html#_Toc164738495)。

默认初始化可能如下所示：

```
<variables>
    <variable name="Default" type="xsd:int" >
        <from>5</from>
    </variable>
</variables> 
```

这应该像`eventHandlers`在流程的启动活动完成后安装的那样工作。到那时，根作用域中定义的变量已经被初始化了。要引用[规范，第 12.1 节](http://docs.oasis-open.org/wsbpel/2.0/OS/wsbpel-v2.0-OS.html#_Toc164738523)：

> 作用域初始化包括实例化和初始化作用域的变量和伙伴链接；...如果范围包含初始启动活动，则启动活动必须在安装事件处理程序之前完成。

规范就这么多。我认为没有人能说这是否“适用于每个 BPEL 引擎”。据我所知，它适用于 bpel-g、Orchestra 和 EasyBPEL，但不适用于 Apache ODE 或 OpenESB。

# php - php prestashop cookie

> ID：11861761
> 
> 赞同：0
> 
> 时间：2012-08-08T09:40:40.583
> 
> 标签：php, prestashop

如何访问 prestashop cookie？目录结构是这样的
/
|
|-index.php
|
|-prestashop/
   |
   |-(presta 商店文件)

我设法从 index.php 登录。但我无法访问 cookie 来检查用户是否登录。任何方式来检查它或获取用户名

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-29T16:04:28.643

对于 Prestashop 1.6，它现在不同了，没有`$smarty`和没有`$cookie`，都在上下文中。

如何访问上下文？

从 Controller 子类、AdminTab 子类或 Module 子类内部，应使用以下快捷方式调用 Context `$this->context`：.

从其他任何地方，您都可以`Context`通过调用`Context::getContext()`.

老路

```
$cookie->id_lang; 
```

新的方法

```
$this->context->language->id; 
```

更多关于这里的文档[http://doc.prestashop.com/display/PS16/Using+the+Context+Object#UsingtheContextObject-WhatistheContextobject](http://doc.prestashop.com/display/PS16/Using+the+Context+Object#UsingtheContextObject-WhatistheContextobject)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T15:22:51.710

Prestashop 维护一个全局 $cookie 变量，它是一个类型的对象`Cookie`。只要您在外部 index.php 文件中引导 Prestashop，您就应该能够访问它：

```
function myfunction()
{
  global $cookie;

  if ($cookie->isLogged)
    echo 'Here be dragons.';
} 
```

在不知道您如何访问 Prestashop 核心来执行登录的情况下，虽然很难给出具体的建议......

# c - c中的堆栈损坏

> ID：11861762
> 
> 赞同：0
> 
> 时间：2012-08-08T09:40:42.207
> 
> 标签：c

```
#include <stdio.h>
#include <string.h>

#define SRC_BUFF_SIZE 32
#define DST_BUFF_SIZE 8

int tempfn1(char *p)
{
    printf("p %p\n", p);
    return 0;
}

int tempfn(char *ip, int size)
{
    char pttt[DST_BUFF_SIZE];
    printf("ip %p\n", ip);
    tempfn1(ip);
    // ERROR - copying more data to a local buffer of 4 bytes

    //memcpy(pttt, ip, size); // This will lead to stack corruption as     
                              // the size exceeds the size of destination

    // IDEALLY the copy should be done with min of size of destination buffer 
    // or source size rather than source size... 
    // anyways dest can hold only the size so it is better to crop the buffer 
    // than to crash due to overflow. 
    // proper call is as follows
    #define MIN(a,b) (((a) < (b)) ? (a) : (b))
    memcpy(pttt, ip, MIN(size, DST_BUFF_SIZE));

    printf("ip %p\n", ip);
    tempfn1(ip);
    return 0;
}

int main()
{
    char ip[SRC_BUFF_SIZE] = {0xe2, 0xe2, 0xe2, 0xe2, 0xe2, 0xe2, 0xe2, 0xe2, 
    0xe2, 0xe2, 0xe2, 0xe2, 0xe2, 0xe2, 0xe2, 0xe2, 
    0xe2, 0xe2, 0xe2, 0xe2, 0xe2, 0xe2, 0xe2, 0xe2, 
    0xe2, 0xe2, 0xe2, 0xe2, 0xe2, 0xe2, 0xe2, 0xe2 };
    tempfn(ip, SRC_BUFF_SIZE);
    return 0;
} 
```

这是一个避免堆栈损坏的示例程序。是否有任何其他功能可以检查目标长度和源长度以避免堆栈损坏？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T09:48:40.493

您的问题实际上归结为-

> 给定一个指针，找出它所指向的内存块的大小

这是*不可能*的，也没有意义。因此，为了使这个*难题*更简单，您需要做出一些假设，例如指针是`char`指针并且`\0`将被视为`End-Of-Block`指标。然后你可以使用诸如`strlen`etc之类的功能

但在你给定的情况下，这一切都不成立，你正在做的事情（ using `MIN`）似乎还可以，并且尽可能接近你想要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T09:57:48.257

您所指的概念不仅适用于堆栈损坏。它通常用于避免内存溢出。当与堆栈变量一起使用时，内存溢出会导致堆栈损坏，或者与堆变量一起使用时会导致堆损坏。基本上它会导致未定义的行为。

避免这种情况的最佳方法是：

1.  正如Kerrek SB 在他的评论中正确指出的那样正确编程（即使用正确的逻辑）。
2.  要使用 strncpy 代替 strcpy、strncat 代替 strcat 等函数，这将有助于应用您在此处尝试应用的相同安全概念。

以下关于安全编码指南和实践的两个链接可能会有所帮助：

[http://www.atsec.com/downloads/pdf/secure-coding-guidelines.pdf](http://www.atsec.com/downloads/pdf/secure-coding-guidelines.pdf)
[https://www.securecoding.cert.org/confluence/display/seccode/Top+10+Secure+Coding+Practices](https://www.securecoding.cert.org/confluence/display/seccode/Top+10+Secure+Coding+Practices)

# jquery - twitter 引导模型事件“显示”在事件处理程序上使用 jquery 调用了两次

> ID：11861765
> 
> 赞同：4
> 
> 时间：2012-08-08T09:40:44.877
> 
> 标签：jquery, twitter-bootstrap, modal-dialog

我使用以下方法加载 Twitter 引导模型（[http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)）：

```
$("#multiple_choice_question").modal(); 
```

然后，我调用 jQuery 的 .on() 甚至处理程序以在模型完全加载后执行更多操作，但 .on() 函数似乎被调用了两次？

例如，如果我这样做，我会得到两个随机数：

```
$("#multiple_choice_question").on("shown",function() {
    console.log(Math.floor(Math.random() * 101)); 
}); 
```

我怎样才能阻止这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-14T15:56:47.710

**@simo**注册活动的答案`.one('shown')`对我有用。从[jQuery 文档](https://api.jquery.com/one/)中，用于`.one()`“将处理程序附加到元素的事件。处理程序对每个事件类型的每个元素最多执行一次。”

# curl - 使用 cURL 更新 openrdf-sesame 端点中的三元组

> ID：11861767
> 
> 赞同：2
> 
> 时间：2012-08-08T09:40:57.217
> 
> 标签：curl, sparql, triplestore, triples

我对所有与语义网络相关的东西都很陌生，而且我在解决这个问题时遇到了麻烦。

因此，我使用 cURL POST 请求将 RDF 数据从 .trig 文件上传到我的端点。例如：

```
<object1> <type> <dog>
<object1> <age> "3" 
```

这很好，但如果我将 trig 文件中的数据更新为：

```
<object1> <type> <dog>
<object1> <age> "4" 
```

然后重新上传它，它会相应地更新数据

```
<object1> <type> <dog>
<object1> <age> "3"
<object1> <age> "4" 
```

有没有办法更新现有的三元组而不必删除整个记录？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T16:08:05.590

是的，芝麻协议允许使用 HTTP 删除特定的三元组`DELETE`

请参阅[Repository Statements](http://www.openrdf.org/doc/sesame2/system/ch08.html#d0e341)文档 - 请务必仔细阅读，如果您没有为您的参数设置正确的参数，您`DELETE`可以删除整个上下文而不仅仅是特定的三元组。

要考虑的另一种替代方法是，如果您执行 a`PUT`而不是`POST`那将覆盖现有数据而不是附加到它。

# osgi - 两个 OSGi 包之间的相互依赖关系

> ID：11861772
> 
> 赞同：1
> 
> 时间：2012-08-08T09:41:16.343
> 
> 标签：osgi

假设有两个 OSGi 包的 A 和 B 分别导出 x 和 y 包。如果存在 A 依赖于 B 的导出而 B 依赖于 A 的导出的情况，应该首先启动哪一个。假设一个人想要从不同类（即不在 Activator 类中）的共享注册表中获取 ServiceReference，那么如何使用当前包的上下文初始化 BundleContext 对象。

这可能会解决我上面提到的关于相互依赖的情况。就像 A 可以在其激活器的启动方法中使用 B 的导出，而 B 可以在调用时在不同类的方法中使用 A 的导出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T16:54:19.993

包解析（resolving）不同于启动和运行包。不要将两者混为一谈，这一点非常重要。

OSGi 框架可以解决包依赖关系中的循环。因此，一旦解决了捆绑包，就可以按某种顺序启动它们。您需要确保您不会将捆绑包设计为依赖于它们的相对起始顺序。这就是您使用服务和 DS 之类的东西的原因。无法解决服务依赖中的循环。因此，请确保避免此类循环。

# javascript - 如何使用 jquery 检测所有事件中的任何一个？

> ID：11861773
> 
> 赞同：1
> 
> 时间：2012-08-08T09:41:19.507
> 
> 标签：javascript, jquery

我有检测用户空闲状态的功能。如果发生任何事件，我想更新数据库。现在我有这样的脚本

```
$("body").mousemove(function(event) {
myfuction();
}); 
```

我想像这样转换上面的脚本

```
$("body").anyOfTheEvent(function(event) {
myfuction();
}); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:46:20.197

您可以拥有一系列您感兴趣的事件并订阅所有这些事件

```
var events = ['click','mousemove','keydown'] // etc
$.each(events,function(i,e){
    $('body')[e](myfuction);    
}); 
```

在此处获取事件列表：http: [//api.jquery.com/category/events/](http://api.jquery.com/category/events/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T09:48:58.520

您可以使用 e.type 属性找到事件名称。试试看这个例子

```
 $('#element').bind('click dblclick mousedown mouseenter mouseleave',
                     function(e){
                         alert("EventName:"+e.type);
                     });
    ​ 
```

jsfiddle 在这里[http://jsfiddle.net/qp2PP/](http://jsfiddle.net/qp2PP/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T09:46:51.883

您可以使用 bind() 绑定多个事件

```
$('#foo').bind('click mousemove', function(evt) {
    console.log(evt.type);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T09:50:09.533

只需使用`on()`, 以空格分隔的事件列表：

```
$('body').on('mousedown click', function(e) {
    var  eventType = e.type;
    // do stuff
}); 
```

参考：

*   [`on()`](http://api.jquery.org/on/).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-04T02:05:37.640

您可以直接绑定到文档，而不是绑定到特定元素。

```
$(document).bind('click mousemove', function(evt)       {
    document.getElementById("demo").innerHTML = Math.random();
}); 
```

[**CODEPEN**](https://codepen.io/radin/pen/Vzmawx?editors=1010#0)中的示例[](https://codepen.io/radin/pen/Vzmawx?editors=1010#0)

# php - 使用子数组返回 JSON 数组

> ID：11861774
> 
> 赞同：0
> 
> 时间：2012-08-08T09:41:24.797
> 
> 标签：php, mysql, arrays, json

我的桌子看起来像：

```
id | title | link | kind
------------------------
 1   link1   http   one
 4   link2   http   two
 2   link9   http   one 
```

我想返回一个 JSON 数组（JSON 解析不是问题！），它看起来像：

```
one
 - link1, http
 - link9, http
two
 - link2, http 
```

kind-colum 是**动态**的，所以我不知道实际的字符串。（但它永远不是（空）！）

是）我有的：

```
$links = array();
while($row = mysql_fetch_object($result)) {
    $link = array(
        'title' => $row->title,
        'link' => $row->link,
        'kind' => $row->kind
    );
    $links[] = $link;
}

echo json_encode($links); 
```

这是一个包含每个元素的所有列的数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:44:21.367

使用 $row->kind 作为顶级数组的索引。

```
$kinds = array('one' => 1, 'two' => 2, ...etc...);
$links = array();
while($row = mysql_fetch_object($result)) {
    $link = array(
        'title' => $row->title,
        'link' => $row->link
    );
    $links[$kinds[$row->kind]][] = $link;
}

echo json_encode($links); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:45:36.563

您可以在 MySQL 查询中执行此操作：

```
SELECT CONCAT("[",
          GROUP_CONCAT(
               CONCAT("{".kind.":'",title ,"'"),
               CONCAT(",".kind.":'",link),"'}")
          )
     ,"]") AS json
FROM table_name; 
```

# php - 为拍卖网站创建计时器

> ID：11861783
> 
> 赞同：1
> 
> 时间：2012-08-08T09:42:16.547
> 
> 标签：php, javascript, countdowntimer

我正在尝试为拍卖网站创建一个计时器。

每个产品都有一个特定的结束日期，称为`TargetDate`，它被输入到`TimerInput.php`文件中。
然后将这些值发布到`TimerOutput.php`文件中，该文件将显示产品，然后是计时器倒计时到完成日期。

每次`counter > 15`用户点击出价按钮，定时器继续正常倒计时。
但是，当`counter < 15`, 每次点击 bid 时，通过将 扩展`TargetDate`与按下按钮时相关的特定值，导致计时器重置为 15。

首先，出价按钮不起作用，因此通过刷新页面来调用该函数。
当计时器低于 15 时，刷新页面会导致按`TargetDate`原样延长并将计时器重置为 15。
但问题是当到达最初`TargetDate`进入`TimerInput.php`文件的第一个时，投标结束，虽然显示不同的时间在执行代码期间显示日期正在更新。

我试图通过`PHP`单独执行代码并使用`Javascript`.
然后我尝试执行代码`Javascript`，最后我尝试将日期写入外部文件并再次读取但没有结果。

感谢您提前提供任何帮助。

这是我的代码：

**定时器输出.php：**

```
<?php

// target date entered by user
$TargetDate = $month."/".$day."/".$year." ".$hour.":".$minute.":".$second." ".$hourclock;

// change target date to unix timestamp format
$UnixTargetDate = strtotime($month."/".$day."/".$year." ".$hourHC.":".$minute.":".$second);

// unix timestamp right now
$unixtime = strtotime("now");
}

?>

<script language="JavaScript">
//TargetDate = "7/30/2012 13:32";
ForeColor = "navy";
CountActive = true;
CountStepper = -1;
LeadingZero = true;
DisplayFormat = "%%H%%:%%M%%:%%S%%";
FinishMessage = "Sold at: "

    // extract timer variables inputs
    var unixNow = parseInt("<?php echo $unixtime?>");
    var unixTarget = parseInt("<?php echo $UnixTargetDate?>");

function AdditionalSecond()
{

    if ((unixTarget - unixNow)>0 && (unixTarget - unixNow)<15)
    {
        // reset timer to 15s
        // update target date
        unixTarget = unixTarget + 15 - (unixTarget - unixNow);

    }
    else if ((unixTarget - unixNow)>15)
    {
        // do nothing continue countdown normally
        unixTarget=unixTarget;

    }
    else
    {
        // display that item is sold when time is up
        FinishMessage
    }

}

// call function AdditionalSecond() to be executed  
AdditionalSecond();

// create a new javascript Date object based on the timestamp
// multiplied by 1000 so that the argument is in milliseconds, not seconds
var date = new Date(unixTarget*1000);

// month part from the timestamp
var months = date.getMonth()+1;
// day part from the timestamp
var days = date.getDate();
// year part from the timestamp
var years = date.getFullYear();
// hours part from the timestamp
var hours = date.getHours();
// minutes part from the timestamp
var minutes = date.getMinutes();
// seconds part from the timestamp
var seconds = date.getSeconds();

// will display time in 10:30:23 format
TargetDate = months + '/' + days + '/' + years + ' ' + hours + ':' + minutes + ':' + seconds;

</script>
<div id="countTimer" name="countTimer" style="margin-left:100px;">
<script language="JavaScript" src="countdown.js"></script>
</div>
<div id = "soldtime" style = "margin-left:100px;">
<span id="timedispspan"></span>
</div>
<div id = "bottom" style = "margin-left:100px;">
<form name="BidForm" id="BidForm" onsubmit="return false">
<input type="button" value="Bid" onclick="AddSecond();" style = "width:100px;height:30px;">
</form>
</div>
</body>
</html> 
```

**倒计时.js：**

```
function calcage(secs, num1, num2) {
  s = ((Math.floor(secs/num1))%num2).toString();
  if (LeadingZero && s.length < 2)
    s = "0" + s;
  return "<b>" + s + "</b>";
}

function refreshDiv(){    
        document.getElementById("cntdwn").innerHTML = DisplayStr;  
    }

function CountBack(secs) {
  if (secs < 0) {

    document.getElementById("cntdwn").innerHTML = FinishMessage;
    return;
  }

  DisplayStr = DisplayFormat.replace(/%%D%%/g, calcage(secs,86400,100000));
  DisplayStr = DisplayStr.replace(/%%H%%/g, calcage(secs,3600,24));
  DisplayStr = DisplayStr.replace(/%%M%%/g, calcage(secs,60,60));
  DisplayStr = DisplayStr.replace(/%%S%%/g, calcage(secs,1,60));

  document.getElementById("cntdwn").innerHTML = DisplayStr;
  if (CountActive)
    setTimeout("CountBack(" + (secs+CountStepper) + ")", SetTimeOutPeriod);
}

function putspan(backcolor, forecolor) {
 document.write("<span id='cntdwn' style='background-color:" + backcolor + 
                "; color:" + forecolor + "'></span>");
}

if (typeof(BackColor)=="undefined")
  BackColor = "white";
if (typeof(ForeColor)=="undefined")
  ForeColor= "black";
if (typeof(TargetDate)=="undefined")
  TargetDate = "12/31/2012 5:00 AM";
if (typeof(DisplayFormat)=="undefined")
  DisplayFormat = "%%D%% Days, %%H%% Hours, %%M%% Minutes, %%S%% Seconds.";
if (typeof(CountActive)=="undefined")
  CountActive = true;
if (typeof(FinishMessage)=="undefined")
  FinishMessage = "";
if (typeof(CountStepper)!="number")
  CountStepper = -1;
if (typeof(LeadingZero)=="undefined")
  LeadingZero = true;

CountStepper = Math.ceil(CountStepper);
if (CountStepper == 0)
  CountActive = false;
var SetTimeOutPeriod = (Math.abs(CountStepper)-1)*1000 + 990;
putspan(BackColor, ForeColor);
var dthen = new Date(TargetDate);
var dnow = new Date();
if(CountStepper>0)
  ddiff = new Date(dnow-dthen);
else
  ddiff = new Date(dthen-dnow);

gsecs = Math.floor(ddiff.valueOf()/1000);
CountBack(gsecs); 
```

# mysql - MySQL查询以选择具有自动增量的结果作为结果中添加的新列

> ID：11861799
> 
> 赞同：13
> 
> 时间：2012-08-08T09:43:21.897
> 
> 标签：mysql

我有一个包含以下字段的学生表：

```
student(student_id, student_name, student_avg) 
```

我需要在 MySQL 中编写一个查询，它将结果显示为：

序列号。=> 结果还应该有一个带有序列号的新列，`1,2,3,...,n`就像结果中每一行的自动增量一样。

```
student_id
student_name
student_avg > 4 
```

我不想以任何方式改变我的桌子。我所要做的就是编写一个查询，它会给我上述结果。我希望我很清楚。

示例数据：

```
student_id         student_name      student_avg 
 1                    abc               2.5
 2                    xyz               4.1
 3                    def               4.2 
```

查询后的示例输出：

```
serial_no    student_id    student_name     student_avg
  1             2            xyz               4.1
  2             3            def               4.2 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-08T10:08:32.620

试试这个

```
SELECT  @s:=@s+1 serial_number,student_id,student_name,student_avg
FROM    students,
        (SELECT @s:= 0) AS s
WHERE
student_avg > 4; 
```

[https://stackoverflow.com/a/11096550/1423506](https://stackoverflow.com/a/11096550/1423506)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-08T10:00:49.853

```
SET @serial=0;
SELECT @serial := @serial+1 AS `serial_number`, `column_name` FROM `table_name`; 
```

在您的特定情况下：

```
SET @serial=0;

SELECT 
   @serial := @serial+1 AS `serial_number`, 
   `student_id`, 
   `student_name`, 
   `student_avg`
FROM 
   `students`
WHERE
   `student_avg` > 4; 
```

# python - python中的fabric API直接调用

> ID：11861802
> 
> 赞同：10
> 
> 时间：2012-08-08T09:43:42.847
> 
> 标签：python, fabric

我记得fabric API可以直接在py脚本中调用，但忘了从哪里开始有人给出线索吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-08T09:56:40.350

是的，您可以调用它，例如：

```
from fabric.api import run
from fabric.tasks import execute

def do_something():
    run("echo $RANDOM")

if __name__ == "__main__":
    execute(do_something, hosts=["username@host"]) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-08T18:39:20.170

文档中有一个完整的部分介绍如何使用 fabric[作为库](http://docs.fabfile.org/en/1.10/usage/library.html)。我会提到这一点，以及如何最好地以这种方式处理织物的使用。

具体来说，您需要使用执行函数 as来解决在`X`主机列表上执行任务的问题。完成后，您应该断开与所有已连接主机的连接。通常，该工具会为您执行此操作，但在将结构用作库时，您必须手动执行此操作。Fabric 0.9.4 及更高版本具有功能。理想情况下，这应该在语句的子句中。`Y``execute( X, hosts=Y )``fab``disconnect_all()``finally``try...finally`

# unit-testing - 如何在不使用 DVS 的情况下测试 ILOG JRules 规则集？

> ID：11861803
> 
> 赞同：1
> 
> 时间：2012-08-08T09:43:47.060
> 
> 标签：unit-testing, ilog, jrules

我正在尝试将 JRules BRMS 7.1 用于项目。我发现 DVS 在测试规则集方面有一些限制。

就是无法测试Excel场景文件模板**中复杂类型集合中的内容。**

但我理解这是正常的，因为这种内容对于 Excel 表格格式来说太复杂了。

因此，任何人都知道在不使用 DVS 的情况下测试需要大量测试用例和大量复杂类型输入的规则集的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T14:35:35.567

如果开发人员正在执行测试，则使用带有嵌入式规则引擎的 JUnit。如果非技术用户需要进行测试，升级到没有此限制的 WODM 7.5 可能是最简单的。如果这不是一个选项，那么可以使用 JRules 7.1 DVS，但它有点复杂，涉及创建一个单独的包装规则项目，该项目将输出集合作为输入，并在其 XOM 中执行与实际结果的比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T09:54:33.767

Raj Rao 是正确的，您可以使用数组作为预期结果（输入很容易），但您将不得不使用隐藏的 JRules API，无论如何这很痛苦。
JUnit 或 7.5 就是答案。
除非你想付钱给 IBM，否则他们可能会说这是不可能的，因为它在任何地方都没有详细说明:(

干杯
PS：顺便说一句，复杂类型的数组作为输入很容易确定并且有据可查，我认为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-11T22:15:57.487

如果您已将规则作为 HTDS 服务部署到 RES，那么您可以使用 SoapUI 来测试 HTDS Web 服务。

SoapUI 允许您设置可用于测试不同场景的测试用例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-28T07:42:50.627

要使用 Decision Validation Services 验证规则，您需要创建一个 Excel 场景文件模板，在该模板中填充要测试的场景。在生成 Excel 场景文件模板之前，您必须检查您的项目不包含任何可能阻止生成 Excel 文件的错误或警告。第 1 步：在您的规则资源管理器中选择您的项目，在规则项目中启用 dvs 部分单击检查点，并确保您没有任何错误。2：创建场景文件点击下一步为测试项目命名为name.xls。3：将场景中的值和预期结果中的预期结果传递给预期结果列。4：您可以一次测试多个场景。5：现在关闭并保存excel文件。6：运行配置右键单击 dvs excel 文件为测试提供任何名称 7：在 excel 文件字段中单击浏览并选择 xls 文件 8\. 在规则项目字段中选择您的规则项目 9：在 HTML 报告字段中选择您的项目并单击确定。10：单击应用并运行 11：在规则工作室中右键单击您的项目并单击刷新 12：将在项目中生成 HTML 文件。13：右键单击并使用网络浏览器打开并观察您的场景的结果。14：您已成功启用 dvs

# c++ - 本地主机上的最大连接数

> ID：11861806
> 
> 赞同：0
> 
> 时间：2012-08-08T09:44:02.583
> 
> 标签：c++

为什么我的服务器套接字在`listen(severFd,2)`连接 3 个终端的情况下监听？

它应该限制为 2。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:47:24.220

第二个参数`listen()`表示排队的传入请求的最大数量。这不是可以接受的连接数的最大值。

从[man listen](http://linux.die.net/man/2/listen)（其中*backlog*是第二个参数的名称）：

> backlog 参数定义了 sockfd 的挂起连接队列可以增长到的最大长度。

如果最多需要两个接受的连接，那么您必须明确编码。

# iphone - iPhone - 如何找出在 CGContext 上绘制的文本长度？

> ID：11861807
> 
> 赞同：2
> 
> 时间：2012-08-08T09:44:01.990
> 
> 标签：iphone, ios, ipad

我是 iPhone 应用程序开发的新手。我不知道如何找出在 CGContext 上绘制的弧文本的长度，如果有人知道请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:10:33.713

您可以从 strlen(conststring) 函数获取字符串，例如，如果您想绘制字符串，

```
 NSString *string =[NSString stringWithFormat:@"%g",startPoint];
    const char *constantString =[string UTF8String];
    CGContextShowTextAtPoint(mycontext, (cgpoint), 0, constantString,strlen(constantString)); 
```

strlen(your char string) 返回字符串的长度。

# c# - 如何访问文本框值

> ID：11861808
> 
> 赞同：-2
> 
> 时间：2012-08-08T09:44:02.303
> 
> 标签：c#, asp.net

```
<asp:DataList id="ItemsList"
      BorderColor="black"
      CellPadding="5"
      CellSpacing="5"
      RepeatDirection="Vertical"
      RepeatLayout="Table"
      RepeatColumns="3"
      runat="server">      

<ItemTemplate>

   <a href="#"  data-inline="true" data-role="button" 
        data-icon="star" data-iconpos="right">        
    <input type="text" id="txtTry" style="width: 20%" runat="server" 
        value="" data-mini="true"  
        <%# DataBinder.Eval(Container.DataItem, "StringValue") %>
   </a>
</ItemTemplate>

</asp:DataList> 
```

如何访问 CS 中每个按钮的文本框的值。我怎样才能访问它。这并不难，但我还没有使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T09:50:50.140

您需要将 HTML 控件更改`<input>` 为 ASP.NET 控件，例如：

`<asp:TextBox ID="txtTry" runat="server"></asp:TextBox>`

然后稍后在您的 .cs 文件中，您可以更改文本框的值：

```
...
txtTry.Text = "foo";
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:05:06.367

是的，将 html 更改为 Asp.net 文本框。然后你可以通过oleksii提到的方法获得

即使输入 html 文本尝试以下示例通常应该使用

```
Request.Form["elementName"] 
```

例如，如果您有

`<input type="text" name="try" />`那么你可以使用`Request.Form["try"]`它来访问它的值。

# javascript - 鼠标悬停不正确

> ID：11861809
> 
> 赞同：0
> 
> 时间：2012-08-08T09:44:07.293
> 
> 标签：javascript, asp.net, html

我想将鼠标悬停在文本***"Me"***上并弹出***"You"***。

```
<div class="relative"> 
<p onmouseover="document.getElementById('toolTipDiv').className='activeToolTip'"
onmouseout="document.getElementById('toolTipDiv').className='idleToolTip'">Me<p/>
<div id="toolTipDiv" class="idleToolTip">You.</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:20:52.610

***HTML***

```
<p class="me">Me</p>
<div id="activeToolTip">You</div> 
```

***jQuery***

```
$('.me').hover(function() {
  $('#toolTipDiv').removeClass('idleToolTip').addClass('activeToolTip');
}, function(){
  $('#toolTipDiv').removeClass('activeToolTip').addClass('idleToolTip');
}); 
```

***OR***

For just show-hide you can do:

```
$('.me').hover(function() {
  $('#toolTipDiv').toggle()
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:13:53.033

我建议使用 jQuery！

您的 tooltipDiv 应该具有`display: none`CSS 属性，然后使用：

```
<p onmouseover="$('#toolTipDiv').show();"
onmouseout="$('#toolTipDiv').hide();">Me<p/> 
```

如果您的 tooltipDiv 显示在“我”文本上，那么您遇到了问题，因为触发了 onmouseout 事件。不知道您的工具提示出现在哪里！

# linux - 在程序集中定位独立库（AT&T 语法）

> ID：11861810
> 
> 赞同：1
> 
> 时间：2012-08-08T09:44:09.090
> 
> 标签：linux, assembly, att

我正在实现一个兼容性库，它应该将某些函数调用重定向到一个不同命名的函数，通常在 glibc 中。

这就是我所做的：

```
.text

.global compat_function
.extern glibc_function_different_name
compat_function:
    jmp glibc_function_different_name 
```

问题是它不是位置独立的代码，并且链接器拒绝链接库。我知道我需要让 GOT 参与其中，但现在知道如何（在 AT&T asm 语法中）。

谢谢！

# asp.net-mvc - Asp.net mvc 3 处理意外查询

> ID：11861813
> 
> 赞同：2
> 
> 时间：2012-08-08T09:44:14.730
> 
> 标签：asp.net-mvc, error-handling, get

我只是想知道用户可能通过意外查询请求的情况。假设我有控制器动作

```
 public ViewResult Details(int id)
        {
            Description description = db.Descriptions.Find(id);
            return View(description);
        } 
```

浏览器中的理想查询将是`/admin/Details?id=1`. 如果用户输入`id=-1`或`id=a`或任何其他意外输入会怎样。如何处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T09:50:17.357

为了保证数值，你可以添加 `id = @"\d+"`路由约束，只有当请求是数值时你的动作才会被击中`id`，否则它会返回http not found；

在所有其他情况下，您应该始终检查用户输入，如下所示：

```
public ActionResult Details(int id)
{
    Description description = db.Descriptions.Find(id); 

    if(description == null)
    {
          return new HttpStatusCodeResult(404);
    }

    return View(description);
} 
```

并且用户将被通知他请求的资源具有无效标识符

# php - 使用 CakePHP ajax 视图验证 ajax 请求总是返回所有无效的字段而不是正确的字段

> ID：11861816
> 
> 赞同：1
> 
> 时间：2012-08-08T09:44:25.360
> 
> 标签：php, ajax, cakephp, cakephp-2.0

我不确定为什么即使我正确填写了一些必填字段，我也会继续收到所有错误，而不仅仅是无效字段。

提交控制器：

```
public function submit() {
    $this->set('title_for_layout', 'Submit - ');

    if ($this->request->is('ajax')) {
        if (!empty($this->request->data)) {
            $this->Submission->set($this->request->data);
            if ($this->Submission->invalidFields($this->request->data)) {
                $formErrors = $this->Submission->validationErrors;
            } else {
                $formErrors = null;
            }
        } else {
            $formErrors = null;
        }

        $this->set(compact('formErrors')); 
```

}

/提交/json/submit.ctp：

```
<?php

$toReturn = array(
    'formErrors' => $formErrors
);

echo json_encode($toReturn); 
```

提交模型：

```
var $validate = array(
    'title' => array(
        'title' => array(
            'rule' => 'notEmpty',
            'required' => true,
            'allowEmpty' => false,
            'message' => 'Please enter a title'
        ),
        'minLength' => array(
            'rule' => array('minLength', 5),
            'message' => 'Please make your title longer (e.g. IJL John F. Kennedy donated his presidential salary to charity)'
        ),
        'maxLength' => array(
            'rule' => array('maxLength', 300),
            'message' => 'Your title needs to be shorter'
        ),
    ),
    'description' => array(
        'shortDescription' => array(
            'rule' => array('shortDescription'),
            'message' => 'Your description needs to be longer'
        ),
        'longDescription' => array(
            'rule' => array('longDescription'),
            'message' => 'Your description needs to be shorter'
        ),
    ),
    'source' => array(
        'source' => array(
            'rule' => 'notEmpty',
            'required' => true,
            'allowEmpty' => false,
            'message' => 'Enter a valid source URL (e.g. http://en.wikipedia.org/wiki/Penguins)'
        ),
        'website' => array(
            'rule' => 'url',
            'message' => 'Enter a valid source URL (e.g. http://en.wikipedia.org/wiki/Penguins)'
        ),
    ),
    'category' => array(
        'category' => array(
            'rule' => 'notEmpty',
            'required' => true,
            'allowEmpty' => false,
            'message' => 'Please choose a category'
        )
    )
); 
```

正在序列化和发送的表单值：

![表单值](../Images/1f94a5ed4836f32eeaef73fe0108f83a.png)

我在 json 响应中遇到的错误：

![在此处输入图像描述](../Images/bdd8a5c55c873f6b13849630363797bd.png)

在这里拉头发：|

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:31:20.770

您似乎对 validates() 和 invalidFields() 有点困惑

invalidFields() 在 validates() 之后返回无效字段，请参阅：[http ://book.cakephp.org/2.0/en/models/data-validation/validating-data-from-the-controller.html](http://book.cakephp.org/2.0/en/models/data-validation/validating-data-from-the-controller.html)

所以你的代码应该是这样的：

```
$this->Submission->set($this->request->data);
if (!$this->Submission->validates()) {
    $formErrors = $this->Submission->invalidFields();
} else {
    $formErrors = null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-26T12:20:12.503

首先，给模型设置数据：

```
$this->ModelName->set($this->request->data); 
```

然后，要检查数据是否验证，请使用模型的 validates 方法，如果验证则返回 true，否则返回 false：

```
if ($this->ModelName->validates()) {
    // it validated logic
} else {
    // didn't validate logic
    $errors = $this->ModelName->validationErrors;
} 
```

[验证来自控制器的数据](http://book.cakephp.org/2.0/en/models/data-validation/validating-data-from-the-controller.html)

# ssh - 创建通过“桥”机器的 SSH 隧道

> ID：11861817
> 
> 赞同：29
> 
> 时间：2012-08-08T09:44:26.080
> 
> 标签：ssh

我需要从 PHP 脚本访问托管在另一台机器上的数据库，该数据库只能通过 SSH 使用桥接机器访问。

如何设置隧道，以便通过“桥”机器将连接从我的机器连接到数据库？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-08-08T10:05:14.547

其实很简单。这只是一个命令的问题：

```
ssh -N -L localhost:3306:DATABASE_MACHINE:3306 BRIDGE_MACHINE_USER@BRIDGE_MACHINE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:52:48.373

您应该使用 ssh -L 选项来执行此操作

您可以阅读：[http ://www.revsys.com/writings/quicktips/ssh-tunnel.html](http://www.revsys.com/writings/quicktips/ssh-tunnel.html)

# mysql - MySQL 棘手的正则表达式

> ID：11861818
> 
> 赞同：1
> 
> 时间：2012-08-08T09:44:29.853
> 
> 标签：mysql, sql, regex, database, string

我有一个包含字符串（字符串的逗号部分）的字段，例如“X1，X2，X3，X4，X5”。让我们以 MySQL 表为例-

```
id FIELD1
1 X1,X3
2 X1,X3,X4
3 X2,X3,X4
4 X2,X4
5 X1,X3,X4,X5,X6 
```

让 Q = "X1,X3,X4,X5"

现在，查询FIELD1值的所有字符都包含在Q中的行的查询是什么。Q是这样的，只有8个字符（X1，X2..），并且字符串中的字符不重复。

```
Select id FIELD WHERE "...Some regex on characters of Q...." 
```

换句话说，它应该返回第 1、2 行，因为 X1、X3、X4 出现在 Q 中。它不应该返回第 3、4、5 行，因为 X2、X6 不出现在 Q 中。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:35:07.060

正如 juergen d 在我之前所说，您的数据库结构有问题。

如果你使用这种结构，你会得到如下丑陋的 SQL 查询：

```
SELECT id FROM Crooked_Table WHERE (FIELD1 LIKE '%X1%' OR FIELD1 LIKE '%X3%' OR FIELD1 LIKE '%X4%' OR FIELD1 LIKE '%X5%') AND NOT (FIELD1 LIKE '%X2%' OR FIELD1 LIKE '%X6%') 
```

并且您需要覆盖查询中所有可能的逗号分隔值，否则它将不起作用。

# javascript - 在 DOM 中创建的图像上运行函数

> ID：11861829
> 
> 赞同：0
> 
> 时间：2012-08-08T09:44:53.550
> 
> 标签：javascript, jquery, dom

我正在使用[dataTables](http://datatables.net/)来检索、显示和组织 PHP 脚本中的数据（这反过来又从 MySQL 数据库中提取信息）。

![我的 dataTables 表](../Images/187b1025b747f159af307b54aadea406.png)

使用以下代码，dataTables 检索信息并将其放入一个......好吧，表格。

```
$('#content div').html( '<table id="example"></table>' );
var oTable = $('#example').dataTable( {
    "bJQueryUI": true,
    "bProcessing": true,
    "bServerSide": true,
    "sPaginationType": "full_numbers",
    "sAjaxSource": "dataTables.php",
    "aoColumns": [
        /* UID */           { "bSearchable": false,
                                "bVisible":  false },
        /* Datetime */      { "asSorting": [ "desc" ] },
        /* Staff Name */    null,
        /* Room */          null,
        /* Reason */        null,
        /* Urgency */       null,
        /* Processed? */    null ],
    "fnRowCallback": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) {
        var sDirectionClass;

        if ( aData[6] === null ) {
            sDirectionClass = "new";
            if ( row % 2 !== 0 )
                sDirectionClass = "new_odd";
        } else {
            sDirectionClass = "std";
        }

        row++;

        $(nRow).addClass( sDirectionClass );
        return nRow;
    }
} ); 
```

我希望大部分内容都非常简单——这个函数获取`sAjaxSource`属性并查看我的`dataTables.php`文件，该文件只是读取 MySQL DB 并以 JSON 编码格式返回一些信息。

这一切都很好，但我正试图将我的表格列之一变成可点击的链接。

简短的 PHP 是；

```
if ( $aColumns[$i] == "Processed" )
{
    $link = '<img src="tick.png" id="' . $aRow[ $aColumns[0] ] . '" />';
    $row[] = ( empty( $aRow[ $aColumns[$i] ] ) ) ? $link : $aRow[ $aColumns[$i] ];
} 
```

基本上是伪的`if Processed field is NULL display an image with the UID of that row; otherwise display the value of Processed field`。

![支票或日期](../Images/df3f2824ae936ff3ef2e4f2184b21f14.png)

我现在想做的是使该图像 JS-clickable 以运行 AJAX 功能。我认为下面的代码（在上面的JS之后立即原位）：

```
oTable.find('img').click(function(){
    var process = $(this).attr("id");
    $.ajax({
        url: "check_alerts.php",
        data: { process: id }
    }).done(function() { 
        oTable.fnDraw(false);
    });
}); 
```

不幸的是，它似乎什么也没做。我想这是因为`img`我正在创建的 DOM 是在 DOM 中创建的，因此当上述函数运行时，它不会找到任何`img`标签。

如何修改代码以便这些图像可以运行我的 AJAX 功能？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:50:28.467

您需要使用专门用于在动态内容上绑定事件的[jquery.on() 。](http://api.jquery.com/on/)

尝试这个：

```
//replace table with the table pointer (class,id)
$('table').on('img','click',function(){
   //do your thing
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:54:36.297

您是否尝试使用 firebug 来查看是否生成了图像标签。比尝试在 firebug 控制台选项卡中运行图像单击绑定功能。如果这可行，那么您可能正试图在原始页面执行周期中过早地绑定点击事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:51:24.477

为确保您的新 DOM 元素也侦听单击事件，您应该使用“on”。

```
oTable.on("click", "img", function() {
  var process = $(this).attr("id");
  $.ajax({
    url: "check_alerts.php",
    data: { process: id }
  }).done(function() { 
    oTable.fnDraw(false);
  });
}); 
```

请参阅[文档](http://api.jquery.com/on/)

# android - Android 许可示例返回代码 3。这是什么意思？

> ID：11861834
> 
> 赞同：19
> 
> 时间：2012-08-08T09:45:07.213
> 
> 标签：android, android-lvl

我尝试了许可样本。它说“应用程序错误= 3”。[我在developer.android.com](https://developer.android.com/guide/google/play/licensing/licensing-reference.html#server-response-codes)找到了许可响应代码表，但数字 3 与上述列表有何对应关系？那个代码是什么意思？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-08T21:51:12.007

查看源代码[com.android.vending.licensing.LicenseValidator](http://code.google.com/p/marketlicensing/source/browse/library/src/com/android/vending/licensing/LicenseValidator.java?r=9cd599d6902d8b9b8311e4ef8dd20dcccb5e7aba)：

```
/**
 * Contains data related to a licensing request and methods to verify
 * and process the response.
 */
class LicenseValidator {
  private static final String TAG = "LicenseValidator";

  // Server response codes.
  private static final int LICENSED = 0x0;
  private static final int NOT_LICENSED = 0x1;
  private static final int LICENSED_OLD_KEY = 0x2;
  private static final int ERROR_NOT_MARKET_MANAGED = 0x3;
  private static final int ERROR_SERVER_FAILURE = 0x4;
  private static final int ERROR_OVER_QUOTA = 0x5;

  private static final int ERROR_CONTACTING_SERVER = 0x101;
  private static final int ERROR_INVALID_PACKAGE_NAME = 0x102;
  private static final int ERROR_NON_MATCHING_UID = 0x103;

  ... ... 
```

“应用程序错误 = 3”表示 ERROR_NOT_MARKET_MANAGED，请在[此处](https://stackoverflow.com/questions/10377325/how-do-you-deal-with-licensecheckercallback-error-not-market-managed-error-code)查看答案以了解如何处理它。

# javascript - 是否可以将 ASP.NET Web 应用程序上传到 VMware 上的虚拟 2008 服务器上？

> ID：11861838
> 
> 赞同：0
> 
> 时间：2012-08-08T09:45:29.957
> 
> 标签：javascript, asp.net, mysql, html, css

是否可以将 ASP.NET Web 应用程序上传到 VMware 上的虚拟 2008 服务器上？从 Visual Studio 创建 Web 应用程序后，我试图将其上传到虚拟服务器上。可以做到吗？如果可能的话有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:30:03.533

在 VMware 中执行此操作与在常规计算机上执行此操作没有什么不同。

首先，您只需在 Visual Studio 中进行正常发布构建，以便您的 bin 目录准备好您的 Web 应用程序。然后，您可以通过以下两种方式之一进行部署：

1.  使用 Visual Studio 中的自动部署工具（构建 -> 发布）
2.  使用 IIS 服务器管理工​​具在计算机上创建应用程序，并将 Web 应用程序的文件（通过 FTP，或使用远程桌面复制+粘贴）上传到您指定的包含应用程序的目录。

# google-apps-script - 无法再打开 Google 协作平台应用脚本

> ID：11861844
> 
> 赞同：1
> 
> 时间：2012-08-08T09:46:00.447
> 
> 标签：google-apps-script

在 Google 协作平台中： - 转到“管理站点” - 单击 Google Apps 脚本 -（我这里有 2 个脚本） - 单击可用脚本之一

将打开一个新选项卡并显示错误消息：“发生服务器错误或错误。如果重新加载页面没有帮助，请与我们联系。”

怎么了？如何让 Google 查看我的问题？

脚本本身仍在工作，只是我无法再查看或编辑它。

[https://sites.google.com/site/stamboomvanaken/test](https://sites.google.com/site/stamboomvanaken/test)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:59:21.613

此问题已[报告](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1675)给 Google。谷歌致力于它。在问题跟踪器上为这个问题加注星标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:34:56.573

**编辑：** *martinkociman 在问题 trcker 上发布了一个更简单（更好）的解决方法*

如果您使用 Chrome，您可以获取脚本的 ID 并将此 ID 插入到 URL 中，如下所示：

```
https://script.google.com/d/---------ID------------/edit 
```

这是 Chrome 检查器的屏幕截图，它适用于每个小工具；-)

![在此处输入图像描述](../Images/8dbf1e0857ffaf3cbbcb492a012a132b.png)

# java - 执行 XQuery fn-bea:date-from-dateTime($date) 导致：XPST0081

> ID：11861845
> 
> 赞同：4
> 
> 时间：2012-08-08T09:46:05.783
> 
> 标签：java, xquery, osb

我正在用 Java 编写库，它使用 OSB 中提供的 oracle 库执行 XQuery

XQuery 之一包含：

```
<cfgEndDate>{ fn-bea:date-from-dateTime($endDate) }</cfgEndDate> 
```

XQuery 在 OSB 环境甚至 Eclipse OEPE 中都能正常工作

尽管如此，尝试使用 Java 执行 XQuery（我`xquery.jar`从 OSB 发行版中获取）导致了异常：

```
oracle.xquery.XQException: XPST0081: It is a static error if a QName used in an 
expression contains a namespace prefix that cannot be expanded into a namespace URI by 
using the statically known namespaces.

Detail: Undeclared namespace prefix 'fn-bea' 

at oracle.xquery.PreparedXQuery.<init>(PreparedXQuery.java:202)
at oracle.xquery.PreparedXQuery.<init>(PreparedXQuery.java:128)
at oracle.xquery.XQueryContext.prepareXQuery(XQueryContext.java:424) 
```

**更新1：**

我刚刚尝试使用`net.sf.saxon.query`库做同样的事情。它也无法管理此功能：

```
XPST0081 XQuery static error near #...>{ fn-bea:date-from-dateTime($#:
Prefix fn-bea has not been declared
net.sf.saxon.trans.XPathException: One or more static errors were reported during
query analysis

    at net.sf.saxon.query.QueryParser.parseQuery(QueryParser.java:344)
    at net.sf.saxon.query.QueryParser.makeXQueryExpression(QueryParser.java:140)
    at net.sf.saxon.query.StaticQueryContext.compileQuery(StaticQueryContext.java:536) 
```

**更新 2**

我发现该`fn-bea:date-from-dateTime()`函数位于 weblogic 中：

```
com.bea.core.xquery_1.3.0.0.jar
package weblogic.xml.query.runtime.datetime.ext
class DateFromDateTime 
```

但是我没有发现将它与已知的 XQuery 引擎一起使用的任何可能性，而且，希望使用所有`fn-bea`功能，而不仅仅是这个。

有谁知道如何解决这个问题或建议一个支持`fn-bea`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-19T23:14:49.623

尝试使用 Oracle XQuery Processor for Java (XQJ API)。它支持 XQuery 3.0 特性

[http://orafmwsoa.blogspot.com/2014/06/running-xquery-from-java-applications.html](http://orafmwsoa.blogspot.com/2014/06/running-xquery-from-java-applications.html)

[http://docs.oracle.com/cd/E16655_01/appdev.121/e17604/adx_j_xqj.htm](http://docs.oracle.com/cd/E16655_01/appdev.121/e17604/adx_j_xqj.htm)

# python - 在 Fedora 15 上安装 pycrypto-2.3 时出错

> ID：11861846
> 
> 赞同：0
> 
> 时间：2012-08-08T09:46:08.467
> 
> 标签：python, pycrypto

嗨，我正在尝试从[这里安装 pycrypto-2.3](http://mac.softpedia.com/progDownload/PyCrypto-Download-45106.html)

我下载并运行以下命令

```
cd pycrypto-2.3/

python setup.py install 
```

我收到以下错误，

```
running install
running build
running build_py
creating build
creating build/lib.linux-x86_64-2.7
creating build/lib.linux-x86_64-2.7/Crypto
copying lib/Crypto/pct_warnings.py -> build/lib.linux-x86_64-2.7/Crypto
copying lib/Crypto/__init__.py -> build/lib.linux-x86_64-2.7/Crypto
creating build/lib.linux-x86_64-2.7/Crypto/Hash
copying lib/Crypto/Hash/SHA.py -> build/lib.linux-x86_64-2.7/Crypto/Hash
copying lib/Crypto/Hash/__init__.py -> build/lib.linux-x86_64-2.7/Crypto/Hash
copying lib/Crypto/Hash/MD5.py -> build/lib.linux-x86_64-2.7/Crypto/Hash
copying lib/Crypto/Hash/RIPEMD.py -> build/lib.linux-x86_64-2.7/Crypto/Hash
copying lib/Crypto/Hash/HMAC.py -> build/lib.linux-x86_64-2.7/Crypto/Hash
creating build/lib.linux-x86_64-2.7/Crypto/Cipher
copying lib/Crypto/Cipher/__init__.py -> build/lib.linux-x86_64-2.7/Crypto/Cipher
creating build/lib.linux-x86_64-2.7/Crypto/Util
copying lib/Crypto/Util/_number_new.py -> build/lib.linux-x86_64-2.7/Crypto/Util
copying lib/Crypto/Util/__init__.py -> build/lib.linux-x86_64-2.7/Crypto/Util
copying lib/Crypto/Util/winrandom.py -> build/lib.linux-x86_64-2.7/Crypto/Util
copying lib/Crypto/Util/python_compat.py -> build/lib.linux-x86_64-2.7/Crypto/Util
copying lib/Crypto/Util/RFC1751.py -> build/lib.linux-x86_64-2.7/Crypto/Util
copying lib/Crypto/Util/asn1.py -> build/lib.linux-x86_64-2.7/Crypto/Util
copying lib/Crypto/Util/randpool.py -> build/lib.linux-x86_64-2.7/Crypto/Util
copying lib/Crypto/Util/Counter.py -> build/lib.linux-x86_64-2.7/Crypto/Util
copying lib/Crypto/Util/number.py -> build/lib.linux-x86_64-2.7/Crypto/Util
creating build/lib.linux-x86_64-2.7/Crypto/Random
copying lib/Crypto/Random/_UserFriendlyRNG.py -> build/lib.linux-x86_64-2.7/Crypto/Random
copying lib/Crypto/Random/__init__.py -> build/lib.linux-x86_64-2.7/Crypto/Random
copying lib/Crypto/Random/random.py -> build/lib.linux-x86_64-2.7/Crypto/Random
creating build/lib.linux-x86_64-2.7/Crypto/Random/Fortuna
copying lib/Crypto/Random/Fortuna/__init__.py -> build/lib.linux-x86_64-2.7/Crypto/Random/Fortuna
copying lib/Crypto/Random/Fortuna/FortunaAccumulator.py -> build/lib.linux-x86_64-2.7/Crypto/Random/Fortuna
copying lib/Crypto/Random/Fortuna/FortunaGenerator.py -> build/lib.linux-x86_64-2.7/Crypto/Random/Fortuna
copying lib/Crypto/Random/Fortuna/SHAd256.py -> build/lib.linux-x86_64-2.7/Crypto/Random/Fortuna
creating build/lib.linux-x86_64-2.7/Crypto/Random/OSRNG
copying lib/Crypto/Random/OSRNG/rng_base.py -> build/lib.linux-x86_64-2.7/Crypto/Random/OSRNG
copying lib/Crypto/Random/OSRNG/__init__.py -> build/lib.linux-x86_64-2.7/Crypto/Random/OSRNG
copying lib/Crypto/Random/OSRNG/posix.py -> build/lib.linux-x86_64-2.7/Crypto/Random/OSRNG
copying lib/Crypto/Random/OSRNG/fallback.py -> build/lib.linux-x86_64-2.7/Crypto/Random/OSRNG
copying lib/Crypto/Random/OSRNG/nt.py -> build/lib.linux-x86_64-2.7/Crypto/Random/OSRNG
creating build/lib.linux-x86_64-2.7/Crypto/SelfTest
copying lib/Crypto/SelfTest/st_common.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest
copying lib/Crypto/SelfTest/__init__.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest
creating build/lib.linux-x86_64-2.7/Crypto/SelfTest/Cipher
copying lib/Crypto/SelfTest/Cipher/test_AES.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Cipher
copying lib/Crypto/SelfTest/Cipher/test_DES3.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Cipher
copying lib/Crypto/SelfTest/Cipher/__init__.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Cipher
copying lib/Crypto/SelfTest/Cipher/common.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Cipher
copying lib/Crypto/SelfTest/Cipher/test_ARC2.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Cipher
copying lib/Crypto/SelfTest/Cipher/test_Blowfish.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Cipher
copying lib/Crypto/SelfTest/Cipher/test_DES.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Cipher
copying lib/Crypto/SelfTest/Cipher/test_ARC4.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Cipher
copying lib/Crypto/SelfTest/Cipher/test_CAST.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Cipher
copying lib/Crypto/SelfTest/Cipher/test_XOR.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Cipher
creating build/lib.linux-x86_64-2.7/Crypto/SelfTest/Hash
copying lib/Crypto/SelfTest/Hash/test_MD5.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Hash
copying lib/Crypto/SelfTest/Hash/test_SHA.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Hash
copying lib/Crypto/SelfTest/Hash/__init__.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Hash
copying lib/Crypto/SelfTest/Hash/common.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Hash
copying lib/Crypto/SelfTest/Hash/test_HMAC.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Hash
copying lib/Crypto/SelfTest/Hash/test_MD2.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Hash
copying lib/Crypto/SelfTest/Hash/test_MD4.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Hash
copying lib/Crypto/SelfTest/Hash/test_SHA256.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Hash
copying lib/Crypto/SelfTest/Hash/test_RIPEMD.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Hash
creating build/lib.linux-x86_64-2.7/Crypto/SelfTest/Protocol
copying lib/Crypto/SelfTest/Protocol/__init__.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Protocol
copying lib/Crypto/SelfTest/Protocol/test_rfc1751.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Protocol
copying lib/Crypto/SelfTest/Protocol/test_chaffing.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Protocol
creating build/lib.linux-x86_64-2.7/Crypto/SelfTest/PublicKey
copying lib/Crypto/SelfTest/PublicKey/__init__.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/PublicKey
copying lib/Crypto/SelfTest/PublicKey/test_DSA.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/PublicKey
copying lib/Crypto/SelfTest/PublicKey/test_importKey.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/PublicKey
copying lib/Crypto/SelfTest/PublicKey/test_RSA.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/PublicKey
creating build/lib.linux-x86_64-2.7/Crypto/SelfTest/Random
copying lib/Crypto/SelfTest/Random/__init__.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Random
copying lib/Crypto/SelfTest/Random/test_rpoolcompat.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Random
copying lib/Crypto/SelfTest/Random/test_random.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Random
creating build/lib.linux-x86_64-2.7/Crypto/SelfTest/Random/Fortuna
copying lib/Crypto/SelfTest/Random/Fortuna/__init__.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Random/Fortuna
copying lib/Crypto/SelfTest/Random/Fortuna/test_SHAd256.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Random/Fortuna
copying lib/Crypto/SelfTest/Random/Fortuna/test_FortunaGenerator.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Random/Fortuna
copying lib/Crypto/SelfTest/Random/Fortuna/test_FortunaAccumulator.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Random/Fortuna
creating build/lib.linux-x86_64-2.7/Crypto/SelfTest/Random/OSRNG
copying lib/Crypto/SelfTest/Random/OSRNG/__init__.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Random/OSRNG
copying lib/Crypto/SelfTest/Random/OSRNG/test_posix.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Random/OSRNG
copying lib/Crypto/SelfTest/Random/OSRNG/test_winrandom.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Random/OSRNG
copying lib/Crypto/SelfTest/Random/OSRNG/test_generic.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Random/OSRNG
copying lib/Crypto/SelfTest/Random/OSRNG/test_fallback.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Random/OSRNG
copying lib/Crypto/SelfTest/Random/OSRNG/test_nt.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Random/OSRNG
creating build/lib.linux-x86_64-2.7/Crypto/SelfTest/Util
copying lib/Crypto/SelfTest/Util/test_asn1.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Util
copying lib/Crypto/SelfTest/Util/__init__.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Util
copying lib/Crypto/SelfTest/Util/test_winrandom.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Util
copying lib/Crypto/SelfTest/Util/test_Counter.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Util
copying lib/Crypto/SelfTest/Util/test_number.py -> build/lib.linux-x86_64-2.7/Crypto/SelfTest/Util
creating build/lib.linux-x86_64-2.7/Crypto/Protocol
copying lib/Crypto/Protocol/AllOrNothing.py -> build/lib.linux-x86_64-2.7/Crypto/Protocol
copying lib/Crypto/Protocol/__init__.py -> build/lib.linux-x86_64-2.7/Crypto/Protocol
copying lib/Crypto/Protocol/Chaffing.py -> build/lib.linux-x86_64-2.7/Crypto/Protocol
creating build/lib.linux-x86_64-2.7/Crypto/PublicKey
copying lib/Crypto/PublicKey/__init__.py -> build/lib.linux-x86_64-2.7/Crypto/PublicKey
copying lib/Crypto/PublicKey/RSA.py -> build/lib.linux-x86_64-2.7/Crypto/PublicKey
copying lib/Crypto/PublicKey/DSA.py -> build/lib.linux-x86_64-2.7/Crypto/PublicKey
copying lib/Crypto/PublicKey/_slowmath.py -> build/lib.linux-x86_64-2.7/Crypto/PublicKey
copying lib/Crypto/PublicKey/_DSA.py -> build/lib.linux-x86_64-2.7/Crypto/PublicKey
copying lib/Crypto/PublicKey/qNEW.py -> build/lib.linux-x86_64-2.7/Crypto/PublicKey
copying lib/Crypto/PublicKey/_RSA.py -> build/lib.linux-x86_64-2.7/Crypto/PublicKey
copying lib/Crypto/PublicKey/pubkey.py -> build/lib.linux-x86_64-2.7/Crypto/PublicKey
copying lib/Crypto/PublicKey/ElGamal.py -> build/lib.linux-x86_64-2.7/Crypto/PublicKey
running build_ext
warning: GMP library not found; Not building Crypto.PublicKey._fastmath.
building 'Crypto.Hash.MD2' extension
creating build/temp.linux-x86_64-2.7
creating build/temp.linux-x86_64-2.7/src
gcc -pthread -fno-strict-aliasing -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -fPIC -std=c99 -O3 -fomit-frame-pointer -Isrc/ -I/usr/include/python2.7 -c src/MD2.c -o build/temp.linux-x86_64-2.7/src/MD2.o
src/MD2.c:31:20: fatal error: Python.h: No such file or directory
compilation terminated.
error: command 'gcc' failed with exit status 1 
```

谁能告诉我如何解决这个问题并在我的机器上成功安装 pycrypto-2.3。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T20:45:35.953

PyCrypto 在 Fedora 中称为 python-crypto，可以安装：

```
yum install python-crypto 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T09:52:40.793

首先阅读文档总是值得的。我将引用 pycrypto 的自述文件：

> Red Hat 用户经常遇到这种情况，因为他们没有安装 python2-devel RPM。解决方法是简单地安装必要的 RPM。

***编辑***我要补充的是，不要从像 softpedia 这样的网站获取您的软件（尤其是加密软件！）。从[pycrypto 网站](https://www.dlitz.net/software/pycrypto/)获取并验证签名和文件哈希。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-19T03:50:02.610

要解决这个问题，您只需要预先安装 python-devel。但是如果你像我一样使用 Fedora-23，你可能会面临另一个问题。所以你需要再安装一个包。

```
sudo dnf install redhat-rpm-config python-devel 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-06T00:50:26.300

在某些版本的 Fedora 中，需要安装以下软件包： `dnf install deluge`.

# java - Maven嵌入式tomcat部署war文件

> ID：11861860
> 
> 赞同：2
> 
> 时间：2012-08-08T09:46:50.883
> 
> 标签：java, tomcat, maven, spring-mvc

我通过 tomcat-maven-plugin 使用 maven 和嵌入式 tomcat 来运行我的 Spring MVC 项目。现在我有另一个战争文件，我也想在这个 tomcat 上运行。有没有办法做到这一点？当我将war文件放在嵌入式tomcat的webapps文件夹中时，它似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T22:21:31.017

此功能的支持在插件的快照版本中，请参阅[https://issues.apache.org/jira/browse/MTOMCAT-169](https://issues.apache.org/jira/browse/MTOMCAT-169)

# java - 在读取和写入方面的休眠性能

> ID：11861867
> 
> 赞同：1
> 
> 时间：2012-08-08T09:47:08.993
> 
> 标签：java, performance, hibernate, database-performance, cpu-cache

hibernate 在读写方面是如何工作的：

1.  如果应用程序对 DB 进行更多写入，hibernate 是如何工作的？在这种情况下，我知道每次写入都必须刷新缓存，除此之外是任何性能开销（与 JDBC 相比）

2.  如果应用程序只读取数据（非常少的写入/更新），休眠如何工作？在这种情况下，由于不需要刷新缓存，我们可以期望 hibernate 的性能与 JDBC 一样好（或更好）（如果调整得当）。

另外，想了解在 case2 中使用的最佳选项（除了 ORM）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T11:51:05.310

添加额外的层总是性能较差。然而，这个额外的层有时也会减少开发时间。因此，这一切都取决于您的用例和性能要求。如果您使用 ORM，那么您可以为读取和查询启用二级缓存，这就是您的应用程序级性能。但有时本地数据库缓存就足够了（这样集群中的每个节点都可以避免缓存）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T20:32:47.507

Hibernate 是一个可以使开发更容易的工具。我觉得（根据我自己的经验）Hibernate 开销不是很大。您可能最终会编写自己的 sql 结果到对象映射。如果你做得好，它可能会比 Hibernate 快一点。然而：

*   Hibernate 在会话中进行 L1 缓存，因此您无需记住是否从 DB 获取数据
*   Hibernate 性能调整比 JDBC 容易得多 - 只需将 Javamelody 插入实时应用程序并寻找最慢的 SQL，然后使用急切和延迟加载来使事情变得更快。无需 SQL 重写，也无需接触映射代码。你只需要调整一些注释
*   L2 缓存非常简单。有时数据库缓存可以解决问题，但它有其局限性。在 Hibernate 中，您可以启用关系缓存​​和查询缓存。当您的数据库成为瓶颈并且您的应用程序部署在多个节点上时，您会看到差异。分布式缓存将比访问数据库数千次要快得多。

总而言之，是的，Hibernate 有它的开销，但对我来说，调整功能非常重要，在复杂的应用程序中，使用 Hibernate 比使用普通 JDBC 有可能（而且很可能）具有更好的性能。我不需要说使用 Hibernate 和 QueryDSL 开发比使用普通 JDBC 快得多。

# google-visualization - Google Chart（可视化）和 Meteor Live HTML - 如何集成？

> ID：11861869
> 
> 赞同：0
> 
> 时间：2012-08-08T09:47:11.880
> 
> 标签：google-visualization, meteor

我正在尝试将谷歌图表实现到我的流星项目中。我特别想使用 Meteor 的 Live HTML 技术来自动更新数据变化的图表。

我有一些问题，我不知道如何正确解决。我不是要求专门回答这些问题，而是寻找一种最佳实践集成方法。我只发布问题以澄清我的问题：

1）为了创建一个谷歌图表，您总是需要有一个附加到站点的现有 dom 元素。此方法不适用于 Meteors 方法来声明然后附加到文档的 html 片段。如果我尝试在片段中创建一个谷歌图表，则该元素尚不存在。

2）当事先创建dom元素然后更新元素（通过使用具有相同ID的appendChild）时，它们的图表确实会更新，但每次更新它们都会以某种方式变大？！？

(例如 Template.chartContainer = Meteor.ui.render(...)) 得到更新？对我来说这不起作用......虽然我不确定这是解决我的问题的正确方法。

任何关于最佳实践的建议/例子都会很棒。

THX 彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T14:02:33.863

您可以推迟图表初始化，直到所需的 dom 元素（图表容器）出现在屏幕上。

```
<template name="chart">
  <div id="chart"></div>
  {{init}}
</template> 
```

和 JS：

```
Template.chart.init = function() {
  Meteor.defer(function(){
    // Chart initialization code goes here...
  });
} 
```

这并没有解决实时变化的数据问题，尽管我认为这可以通过在需要时调用 init 函数来实现。

# jquery - JQuery自动完成Ajax验证特殊字符

> ID：11861877
> 
> 赞同：2
> 
> 时间：2012-08-08T09:47:49.870
> 
> 标签：jquery, jquery-autocomplete

我想验证在自动完成框中输入的特殊字符，例如 !@#$%^&*()，并可能会发出警告框消息“请输入有效名称”。下面是我的片段：

```
$("#txtName").autocomplete({
    source: function (request, response) {
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "Webservice.asmx/GetNames",
            data: "{'prefixText':'" + request.term + "'}",
            dataType: "json",
            success: function (data) {
                response($.map(data.d, function (item) {
                    return {
                        label: item.split('|')[0],
                        val: item.split('|')[1]
                    }
                }))
            },
            error: function (result) {
                ServiceFailed(result);
            },
            failure: function (response) {
                ServiceFailed(result);
            }
        });
    },
    select: function (event, ui) {
        autoName(ui.item.val, ui.item.label);
    },
    minLength: 4
}).data("autocomplete")._renderItem = function (ul, item) {
    var newText = String(item.value).replace(
            new RegExp(this.term, "gi"),
            "<span class='ui-state-highlight'>$&</span>");
    return $("<li></li>")
        .data("item.autocomplete", item)
        .append("<a>" + newText + "</a>")
        .appendTo(ul);
} 
```

任何帮助将非常感激。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:53:33.520

请参阅有关在文本框中[阻止特殊字符](https://stackoverflow.com/questions/895659/how-do-i-block-or-restrict-special-characters-from-input-fields-with-jquery)的问题。

您可能可以在发送请求之前设置验证。而不是设置一个完整的验证插件，它可以做所有事情`keypress`

```
$.ajax({  
    url : url, //blah blah
    beforeSend : function(){
      if(!validateChars()){
        return false;
      }
    }
}); 
```

**或者**

[您可以通过去除特殊字符](https://stackoverflow.com/questions/4374822/javascript-regexp-remove-all-special-characters)而不是阻止来发送请求。（更用户友好）

`var alowedChars = stringToReplace.replace(/[^\w\s]/gi, '')`

[贴上相关代码供参考]

# android - android列表项选择器和分隔符

> ID：11861880
> 
> 赞同：0
> 
> 时间：2012-08-08T09:48:16.437
> 
> 标签：android, listview, android-layout

我有一个带有自定义分隔线的 ListView。分隔线只是一些颜色，高度为 3dp。我为列表中的每个项目添加了一个自定义选择器，因此单击项目时背景颜色会发生变化。我的选择器如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">:
    <item android:state_selected="true" android:drawable="@color/yellow" />
    <item android:state_pressed="true" android:drawable="@color/yellow" />
    <item android:drawable="@color/grey" />
</selector> 
```

选择项目时，它会按预期将颜色从灰色变为黄色。但是，列表中所有分隔线的颜色也会发生变化。为什么会这样？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:54:21.617

我认为，在您的示例中，您没有在选择器中写入错误状态。这可能是问题所在。尝试编写一个完整的选择器 XML，如下所示；

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">:
    <item android:state_selected="true" android:state_pressed="false" android:drawable="@color/yellow" />
    <item android:state_selected="false" android:state_pressed="true" android:drawable="@color/yellow" />
    <item android:state_selected="false" android:state_pressed="false" android:drawable="@color/grey" />
</selector> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:56:49.653

我会禁用默认分隔线并将自定义分隔线作为列表项背景的一部分（可能使用 9-patch）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:52:33.393

我确定，但也许您将分隔线设置为相同的可绘制对象，我发布了一个代码，可以帮助您更改分隔线的颜色。像这样的东西。

```
android:divider="#FFCC00"
android:dividerHeight="4px" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T10:14:56.797

在 listselector 中添加自定义选择器，例如

```
<ListView 
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:listSelector="@drawable/listitem_selector"/> 
```

# javascript - 使用 jQuery 向表格中的 HTML 表单添加字段

> ID：11861882
> 
> 赞同：0
> 
> 时间：2012-08-08T09:48:27.420
> 
> 标签：javascript, jquery, html, forms, html-table

我有一个表，可以包含任意多行。这些行中的每一行都包含一个表单域的元素。最初，它看起来像这样：

```
<table border="2" id="familyHeader">
  <tr>
    <th>Description</th>
    <th>Still associated?</th>
  </tr>
  <tr id="addNewChildRow"> 
    <td> 
      <input type="text" ....> 
      <input type="text" ....>
    </td> 
    <td> 
      <input type="submit" ....>  <!-- this is intentionally not part of a form element -->
    </td> 
  </tr>

<form id="family" method="post" action="php/update_children.php">
  <tr id="updateChildrenRow">
    <td> > > > > > > </td>
    <td> 
      <input type="submit" id="updateChildren" name="updateChildren" class="updateChildren" value="Update Children"/> 
    </td>
  </tr>
</form>
</table> 
```

所以基本上顶部允许您输入详细信息 - 第一个“提交”按钮上有一个捕获，它将行添加到表中。它使用这个 JavaScript/jQuery 在最后一行之前添加它们（希望在表单元素中）：

```
function insert_child(id, type, snumber, serialnumber)
{
    $('#updateChildrenRow').before("<tr> <td>"+ type+" | "+snumber+" | "+serialnumber +"</td>"
    //$('#family').append("<tr> <td>"+ type+" | "+snumber+" | "+serialnumber +"</td>"
       + "<td> <input type=\"hidden\" name=\""+id+"\" value=\"false\" />" 
       + "<input type=\"checkbox\" checked=\"true\" name=\""+id +"\" value=\"true\"/> </td>"
       + "</tr>");
} 
```

这是可行的，因为它将元素插入到正确的位置，但是当我们提交表单时，数据不会被发布。但是，如果我们将打开的表单元素移动到第二行并提交，“addNewChildRow”按钮会被发布（我认为这表明我的发布逻辑有效，但它只是没有检测到动态添加的字段）。

正如您所看到的，我尝试附加到表单本身而不是表格，但这没有奏效（它们没有显示） - 有谁知道将表单元素动态添加到表格的诀窍是什么？被它周围的形式“检测到”？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:18:09.940

这里的问题不在于“检测”添加的字段——这总是很有效。您真正的问题是您将“表格”标签作为“表格”的子标签，但这是不允许的，浏览器将其视为错误。浏览器试图修复它 - 并且不能做任何事情，然后立即关闭“表单”标签并尝试将其所有内容移到外面。（尽可能多地给你）。之后它找到了一个丢失的“/form”并将其清除。

您的标记将转换为：

```
 <table border="2" id="familyHeader">
 .......
<form id="family" method="post" action="php/update_children.php"></form>

  <tr id="updateChildrenRow">
    <td> > > > > > > </td>
    <td> 
      <input type="submit" id="updateChildren" name="updateChildren" class="updateChildren" value="Update Children"/> 
    </td>
  </tr>
</table> 
```

现在，您的新输入刚刚在表单之外创建。

要修复它，您可以执行以下操作之一：

*   **将整个表格放入“表格”标签中。**最简单的方法，但在这种情况下，您将有两个额外的输入（不是问题 - 只是不要添加**name**属性 - 它们不会被发布），并且您必须将第一个按钮的类型从“提交”更改为“按钮' 所以它不会触发表单提交。
*   **将“表单”标签放在“td”之一或表格之外的整个表单中。**在这种情况下，您需要更改创建 attitional 字段的方式，以使其看起来完全符合您的要求。（请记住您不能直接向表单添加新的 'td' - 您必须在表单内创建一个新表格并向其中添加单元格和行。您可以设置所有内容以获得您想要的内容。

PS。此外，您对新创建的隐藏元素和复选框具有相同的**名称**。确保这正是您想要的 - 行为可能出乎意料。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:56:15.807

尝试执行 $.ajax(type post) 或 $.post 并将 $('#family').serialize() 作为数据传递。

# javascript - 显示基于先前选择的选择选项

> ID：11861884
> 
> 赞同：0
> 
> 时间：2012-08-08T09:48:39.347
> 
> 标签：javascript, jquery, html

我正在尝试显示下拉菜单“类别”和子类别。自从我使用 javascript 以来已经有几年了，所以我遇到了一些问题。我的代码根本没有填充 html 选择输入。我不知道代码是否过于简单，或者我只是犯了一些小错误，但我似乎无法让它工作。也许有人可以告诉我哪里出错了。谢谢。

```
<html>
    <select name="cat" id="menu1" class="menu"></select>
    <select name="subcat" id="menu2" class="menu"></select>
</html>

<script type = "text/javascript">

    var data = {
        "category":["sub-category"],
        "music": ["sub-category","rock", "punk"],
        "film": ["sub-categoy","comedy", "drama"],
        "tv": ["sub-catery","sit-com", "soap opera"],
    }

    for (var i in data) {
        $('#menu1').append('<option>' + i + '</option>');
    }

    $('#menu1').change(function() {
        var key = $(this).val();
        $('#menu2').empty();
        for (var i in data[key]) {
            $('#menu2').append('<option>' + data[key][i] + '</option>');
        }
    }).trigger('change');

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:54:25.330

您已经发布了 jQuery 代码。例如：`$('#menu1')`

所以一定要在脚本标签中调用 jQuery 库，并将所有这样的代码放在一个 jQuery 块中，如下所示：

**更新**

我已经修复了代码以使其正常工作。在此处查看实际操作：http: [//jsfiddle.net/QYcMt/1/](http://jsfiddle.net/QYcMt/1/)

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script type = "text/javascript">
    $(function () { 

        var data = {
            "category":["sub-category"],
            "music": ["sub-category","rock", "punk"],
            "film": ["sub-categoy","comedy", "drama"],
            "tv": ["sub-catery","sit-com", "soap opera"],
        };

        $.each(data, function(key, value){            

            $('#menu1').append($('<option />').text(key));
        });

        $('#menu1').change(function() {
            var key = $(this).val();
            $('#menu2').empty();
            for (var i in data[key]) {
                $('#menu2').append('<option>' + data[key][i] + '</option>');
            }
        }).trigger('change');

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:56:19.723

脚本可能在 HTML 元素进入 DOM 之前运行？将 Javascript 包装在

```
$(function() { ...yourcode... }); 
```

# javascript - div 与另一个 div 的位置，即使它滚动

> ID：11861886
> 
> 赞同：0
> 
> 时间：2012-08-08T09:48:42.897
> 
> 标签：javascript, jquery, html

```
<div class="mainDiv">

    <span class="foregroundImage" id="foregroundImage1"></span>

    <!-- Layer Code -->

    <div class="layerDiv">

    </div>

    <!-- Layer Code -->

</div> 
```

我需要定位 layerDiv 使得

1.  它应该在 mainDiv 的中心（而不是在屏幕的中心）
2.  mainDiv 高度和宽度是自动的，所以即使我向下滚动它也应该在中心的可见部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:11:28.140

对于盒中的死点盒，请尝试

```
$('.layerDiv')
    .css('position','relative')
    .width('90%')
    .height('90%')
    .css('left', 
        (
          0.5 * $('.mainDiv').width() 
        - 0.5 * $('.layerDiv').width()
        )
    )
    .css('top', 
        (
          0.5 * $('.mainDiv').height() 
        - 0.5 * $('.layerDiv').height()
        )
    ); 
```

相应地调整宽度和高度 % 或分配 px 值

对于以滚动方式永久位于屏幕中心的居中框，请使用：

```
$('.layerDiv')
    .css('position','fixed')
    .width(.9*$('.mainDiv').width())
    .height(.25*$(window).height())
    .css('left',
        (
            0.5 * $('.mainDiv').width()
            - (
                0.5 * $('.layerDiv').width()
                - $('.mainDiv').offset().left
            )
        )
    )
    .css('top',
        (
            0.5 * $(window).height()
            - (
                0.5 * $('.layerDiv').height()
                - $('.mainDiv').offset().top
            )
        )
    ); 
```

这将是一个内框，占 maindiv 宽度的 90%，屏幕高度的 25%，在 div 内均匀居中，滚动时始终位于屏幕中间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:04:57.207

您需要创建一个方法来查找主 div 的高度和宽度以及 layerDiv 的高度和宽度。

*   layerDiv 的顶部位置 = mainDiv 高度的一半 - layerDiv 高度的一半
*   layerDiv的左边位置=mainDiv宽度的一半-layerDiv宽度的一半

一旦你准备好这个方法，你就可以通过 JQuery 在文档加载和滚动事件上调用这个方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:52:03.047

给图层 div 一个宽度，然后给 margin : 10px auto。您可以根据自己的喜好选择顶部/底部边距。它可以是任何固定值。不能是自动的。并且 layerDiv 必须有一个宽度。

# apache - 如果某些 RewriteCond 匹配，则不要重定向

> ID：11861889
> 
> 赞同：0
> 
> 时间：2012-08-08T09:48:54.417
> 
> 标签：apache

我在 httpd.conf 文件中写了一些规则。它工作正常。我想写一个 RewriteCond 使它应该匹配第一个和第二个参数并且如果它匹配不应该重定向。

如果 URL 是移动/登录或移动/管理重定向不应该发生，我该怎么做。

- 更新 -

```
RewriteCond %{HTTP_USER_AGENT} "!(android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile|Nokia*| Opera*)" [NC]
 RewriteCond $1 !web
 RewriteCond $2 !login
 RewriteCond $2 !admin
 RewriteRule ^(.*)$ /web/index.php [R,L] 
```

这里 2 美元的部分对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:06:32.090

`!`在 RewriteRule 中的模式开头添加字符。

有关更多信息，请参阅[文档](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewriterule)。

**更新**

$2 对您不起作用，因为您的 RewriteRule 模式只有一组捕获括号。这可能是您正在寻找的：

```
RewriteCond %{HTTP_USER_AGENT} "!(android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile|Nokia*| Opera*)" [NC]
RewriteCond $1 !(web|mobile/login|mobile/admin)
RewriteRule ^(.*)$ /web/index.php [R,L] 
```

# php - PHP 和 MYSQL。想要显示目录的第一张图片。来自数据库的目录路径

> ID：11861892
> 
> 赞同：0
> 
> 时间：2012-08-08T09:49:03.310
> 
> 标签：php, mysql, image

实际上我正在开发一个 php 中的应用程序。我很擅长 ASP.NET，但不擅长 PHP，所以在这里需要一些帮助。

我的应用程序是一个图片库，我在这里所做的是，我将图像存储在运行时创建的特定目录中，使用多上传插件，在创建新专辑时，将提示用户只输入专辑的名称，然后他选择要存储在该图库中的所有图像。存储在数据库中的数据将是画廊的名称和已上传图像的文件夹的相对路径等，而专辑封面图像和其他图像详细信息不会添加到数据库中。

另一方面，我正在以这样一种方式查找输出，即专辑列表将从数据库中显示，并且每个图像文件夹中的一张图像将随机显示为专辑封面。当用户单击该专辑封面时，该专辑在数据库中的路径将作为查询字符串传递，然后他将被定向到显示该相关专辑的所有图像的页面。在这里，服务器将扫描从查询字符串中获取的路径的所有图像，并显示该特定文件夹中的所有图像。

我的代码：

```
$sql="Select ID, GalleryName, Path, CreateDate from imageGallery where IsActive=true";
$result=mysql_query($sql);

if (!$result) {
    $message  = 'Invalid query: ' . mysql_error() . "\n";
    $message .= 'Whole query: ' . $query;
    die($message);
}

    while($albums_row = mysql_fetch_assoc($result)){
    $albums[] = array(
        'id'            => $albums_row['ID'],
        'name'          => $albums_row['GalleryName'],
        'path'          => $albums_row['Path'],
        'dates'         => $albums_row['CreateDate']
    );
}

foreach($albums as $album){
// please check if this thing is correct?
echo '<a href="showImage.php?galPath=' . $album["path"] . '"><img src="something"/>    </a>';
// or any function that can work in this loop to call random image for each folder.

} 
```

我已经成功地完成了所有的上传和数据库添加操作，并且还在网页上显示了特定文件夹的所有图像。但是我的问题是在显示所有当前可用的专辑时将随机图像显示为专辑封面。从数据库中获取数据，服务器将扫描“路径”并从该路径中获取一张图像并显示为专辑封面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:57:09.187

php.net 文档始终是简短代码片段的良好来源：

HeadRoom 于 2009 年 5 月 8 日 12:08 发布了[此代码](http://www.php.net/manual/en/function.readdir.php#90770)：

```
<?php
$image_dir = 'images';
$count = 0;
if ($handle = opendir($image_dir)) {
    $retval = array();
    while (false !== ($file = readdir($handle))) {
        if (($file <> ".") && ($file <> "..")) {
            $retval[$count] = $file;
            $count = $count + 1;
        }
    }

    closedir($handle);
}
shuffle($retval);
$current_image = $retval[0];
?> 
```

请注意，您可以通过向内部添加条件来轻松过滤图片`if`，例如`&& strripos($file, ".jpg", 0) == strlen($file) - strlen(".jpg")`仅获取`.jpg`文件（不区分大小写，感谢`strripos`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:52:47.093

因此与[这个问题](https://stackoverflow.com/questions/4478783/select-random-file-from-directory)

```
function random_pic($dir = 'uploads') 
{ 
    $files = glob($dir . '/*.*'); 
    $file = array_rand($files); 
    return $files[$file]; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T11:06:37.517

解决了！！！谢谢@Matei Mihai.....

```
<?php
include("dbpath.php");

$sql="Select ID, GalleryName, Path, CreateDate from imageGallery where IsActive=true";
$result=mysql_query($sql);

// Check result
// This shows the actual query sent to MySQL, and the error. Useful for debugging.
if (!$result) {
$message  = 'Invalid query: ' . mysql_error() . "\n";
$message .= 'Whole query: ' . $query;
die($message);
}

while($albums_row = mysql_fetch_assoc($result)){
    $albums[] = array(
        'id'            => $albums_row['ID'],
        'name'          => $albums_row['GalleryName'],
        'path'          => $albums_row['Path'],
        'dates'         => $albums_row['CreateDate']
    );
}
$i=0;

foreach($albums as $album){
//echo $album['path'] . "<br/>";
$imgs =  str_replace(" ", "%20" , random_pic($album['path']));
$aPath= $album['path'];
echo "<a class='imgBox' href=" . "imageListMethod.php?p=" . $aPath .  "><img src=" . $imgs .   "></a>";
}
function random_pic($dir)
{
$files = glob($dir . '/*.jpg*');
$file = array_rand($files);
return $files[$file];
}
?> 
```

# iphone - 如何正确格式化这些日期？

> ID：11861895
> 
> 赞同：0
> 
> 时间：2012-08-08T09:49:13.800
> 
> 标签：iphone, objective-c, xcode, cocoa

您好，我有这样的日期：2012 年 8 月 7 日星期二 10:38:49 +0000

我想要的是如果今天只显示小时：10:38

如果是昨天显示：昨天，10:38

如果是上个月显示：星期三，7 月 7 日，10:38

你明白了。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:20:41.127

```
 // <strong>Output ->  Date: 10/29/2008 08:29PM</strong>    
 NSDate *today = [NSDate date];
 NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
 [dateFormat setDateFormat:@"MM/dd/yyyy hh:mma"];
 NSString *dateString = [dateFormat stringFromDate:today];
 NSLog(@"date: %@", dateString);
 [dateFormat release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:16:15.407

查看开发人员文档。

更具体地看`NSDateComponent`和`NSDate`

# iphone - 如何以编程方式模拟 commitEditingStyle 数据源方法？

> ID：11861897
> 
> 赞同：0
> 
> 时间：2012-08-08T09:49:16.950
> 
> 标签：iphone, objective-c, ios, xcode

我有表视图我有覆盖方法 commitEditingStyle: 我正在删除特定的行。我有另一个按钮来执行相同的功能。是否可以调用相同的 commitEditingStyle: 方法以便我可以重用代码，或者我是否需要编写单独的函数来做到这一点。但是它将被复制代码。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T11:04:26.597

不要假装你是表视图。相反，将您的实际删除代码包装在一个单独的函数中，并在真正的委托方法的实现中调用该方法，如下所示：

```
- (void)tableView:(UITableView *)tv commitEditingStyle:(UITableViewCellEditingStyle)s forRowAtIndexPath:(NSIndexPath *)ip
{
    if (s == UITableViewCellEditingStyleDelete)
        [self deleteRowAtIndexPath:ip];
}

- (void)deleteRowAtIndexPath:(NSIndexPath *)ip
{
    // put actual deletion code here
} 
```

然后，当您想“模拟”时，只需调用：

```
[self deleteRowAtIndexPath:anIndexPath]; 
```

# java - 我可以在 VB.NET (Windows 7) 和 java (android) 之间发送数据以开发应用程序吗？

> ID：11861899
> 
> 赞同：0
> 
> 时间：2012-08-08T09:49:26.133
> 
> 标签：java, android, vb.net

--- 我想开发这样的应用程序，它将在 android 手机和 PC (windows 7) 之间传输数据。android 手机和 PC 上都会有我的软件客户端。 - - 这可能吗？我的意思是我将有一个用 java 编写的 android 软件和用 VB.NET 编写的 PC 软件。这些java和VB.NET可以一起使用吗？（安卓和PC通过USB连接）

---Android 应用程序将发送数据，PC 软件将接收数据，反之亦然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:59:38.300

您可能希望通过网络接口进行通信并使用 REST 或其他 Web 服务并通过标准数据结构（如 JSON 或 XML）进行通信来解决此问题，VB.NET 和 Java 这两种语言都可以理解。

不知道通过USB进行通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:58:47.337

您可以为 VB.net 和 KSOPA2.jar 为您的 android 项目使用 SOAP Web 服务。

# xml - 如何在 Perl 中将 YAML 转换为 XML？

> ID：11861901
> 
> 赞同：6
> 
> 时间：2012-08-08T09:49:38.153
> 
> 标签：xml, perl, yaml

CPAN 中是否有任何模块可以将 YAML 列表转换为格式良好的 XML？

来自 YAML：

```
- fruits: 
  - apple
  - pear
  - orange 
```

到 XML：

```
<fruits>
  <apple />
  <pear />
  <orange />
</fruits> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T21:18:45.503

```
use strictures;
use YAML "Load";
use XML::Simple "XMLout";

my $data = Load(do{ local $/; <DATA> });
print XMLout( $data, XMLDecl => 1 );

__DATA__
---
- fruits:
    - apple
    - pear
    - orange 
```

DWYW*可能*有多个选项的组合，`XMLout`您可能需要调整数据结构以获得所需的根名称等。您会从令人眼花缭乱的选项数组中注意到，将 XML 序列化和编组为其他数据格式是绝对不简单。阅读：[XML::Simple](https://metacpan.org/module/XML::Simple)和[YAML](https://metacpan.org/module/YAML)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T18:04:04.100

不，没有 CPAN 模块。有[CPAN 模块来读取 YAML](https://www.metacpan.org/module/YAML)并且有[模块来编写 XML](https://www.metacpan.org/module/XML%3a%3aSimple)。数据传输将是 perl 数据结构。

问题是您的 XML 应该在什么模式中，并且有许多不同的 XML 模块，因此也没有一个完美的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-09T06:20:04.277

CPAN 可以帮助您使用[Util::XML_YAML_PERL](http://search.cpan.org/~rchandram/Util-XML_YAML_Perl-1.0.0/lib/Util/XML_YAML_Perl.pm "实用程序::XML_YAML")。

```
use Util::XML_YAML_Perl;

my $obj = Util::XML_YAML_PERL->new();

my $yaml_text = <<UNTIL_HERE;
- fruits: 
  - apple
  - pear
  - orange
UNTIL_HERE

print $obj->yaml_to_xml( $yaml_text );

# <fruits>
#  <apple />
#  <pear />
#  <orange />
# </fruits> 
```

注意：这个模块的文档有问题，可以使用补丁：Util::XML_YAML_Perl 是正确的包，而不是它的 pod 文档中的“XML::YAML_PERL”。

# facebook - FQL 如何获取 Facebook 页面的见解

> ID：11861902
> 
> 赞同：4
> 
> 时间：2012-08-08T09:49:38.817
> 
> 标签：facebook, facebook-graph-api, facebook-fql

```
SELECT metric, value FROM insights WHERE object_id=140902935963424 AND metric='page_fan_adds' AND end_time=1334905200 AND period=86400 
```

嗨，我编写了一个查询来获取 fan_page_adds 见解，但该查询没有被执行。我看不出有任何问题，我使用 facebook 页面 id 作为对象 id。任何人都可以帮忙吗？

# visual-studio-2010 - 通过 tfs sdk 查看变更集详细信息？

> ID：11861905
> 
> 赞同：1
> 
> 时间：2012-08-08T09:49:53.643
> 
> 标签：visual-studio-2010, tfs-sdk

我将单击变更集详细信息

![查看变更集详细信息](../Images/23961a32e0fac424449a21cf10a890cd.png)

我可以使用 sdk 来弹出这个窗口吗？？？

![在此处输入图像描述](../Images/3b57fcd04b9a2e844291528f7fa12575.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:10:05.443

您可以通过命令行执行此操作，如下所示：`tf changeset 13684`

我不知道通过 SDK 获得相同类型的东西的直接方法，但是，如果您必须处理代码，您总是可以包装控制台调用。

# android - 找不到经纬度

> ID：11861906
> 
> 赞同：0
> 
> 时间：2012-08-08T09:49:58.057
> 
> 标签：android, gps, locationmanager, android-location, locationlistener

我编写了用于查找某个地方的纬度和经度的代码，它在我使用 Eclipse 的 PC 上运行良好，但在我的 Android 手机上却无法运行。

```
public class MainActivity extends Activity {

    protected LocationManager locationManager;
    protected Button retrieveLocationButton;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        retrieveLocationButton = (Button) findViewById(R.id.retrieve_location_button);
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1,
                1000, new MyLocationListener());
        retrieveLocationButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                showCurrentLocation();
            }
        });
    }

    protected void showCurrentLocation() {
        Location location = locationManager
                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
        if (location != null) {
            String message = String.format(
                    "Current Location \n Longitude: %1$s \n Latitude: %2$s",
                    location.getLongitude(), location.getLatitude());
            Toast.makeText(MainActivity.this, message, Toast.LENGTH_LONG)
                    .show();
        }
    }

    private class MyLocationListener implements LocationListener {

        public void onLocationChanged(Location location) {
            String message = String.format(
                    "New Location \n Longitude: %1$s \n Latitude: %2$s",
                    location.getLongitude(), location.getLatitude());
            Toast.makeText(MainActivity.this, message, Toast.LENGTH_LONG)
                    .show();
        }

        public void onStatusChanged(String s, int i, Bundle b) {
            Toast.makeText(MainActivity.this, "Provider status changed",
                    Toast.LENGTH_LONG).show();
        }

        public void onProviderDisabled(String s) {
            Toast.makeText(MainActivity.this,
                    "Provider disabled by the user. GPS turned off",
                    Toast.LENGTH_LONG).show();
        }

        public void onProviderEnabled(String s) {
            Toast.makeText(MainActivity.this,
                    "Provider enabled by the user. GPS turned on",
                    Toast.LENGTH_LONG).show();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:14:55.517

确保您已在 AndroidManifest 文件中授予访问 gps 所需的所有权限...

```
android.permission.ACCESS_COARSE_LOCATION
android.permission.ACCESS_FINE_LOCATION
android.permission.READ_PHONE_STATE
android.permission.INTERNET 
```

请参阅此链接：[https ://sites.google.com/site/androidhowto/how-to-1/using-the-gps](https://sites.google.com/site/androidhowto/how-to-1/using-the-gps)

# java - img.setBackgroundResource 导致的内存泄漏

> ID：11861908
> 
> 赞同：0
> 
> 时间：2012-08-08T09:50:00.337
> 
> 标签：java, android, animation, garbage-collection, android-animation

我有一个想要运行的动画，当我为其设置可绘制对象时，出现了内存泄漏。我不知道这是否重要，但框架仅在可绘制文件夹中，而不在特定的 dpi 文件夹中。甚至在我开始动画之前就发生了内存泄漏。当我设置动画的资源时会发生这种情况。谢谢！

来电：

```
logoAnimation.setBackgroundResource(R.drawable.logo_animation); 
```

logo_animation.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android"
android:oneshot="false">

    <item android:drawable="@drawable/logo0" android:duration="35" />
    <item android:drawable="@drawable/logo1" android:duration="35" />
    <item android:drawable="@drawable/logo2" android:duration="35" />
    <item android:drawable="@drawable/logo3" android:duration="35" />
    <item android:drawable="@drawable/logo4" android:duration="35" />
    <item android:drawable="@drawable/logo5" android:duration="35" />
    <item android:drawable="@drawable/logo6" android:duration="35" />
    <item android:drawable="@drawable/logo7" android:duration="35" />
    <item android:drawable="@drawable/logo8" android:duration="35" />
    <item android:drawable="@drawable/logo9" android:duration="35" />
    <item android:drawable="@drawable/logo10" android:duration="35" />
    <item android:drawable="@drawable/logo11" android:duration="35" />
    <item android:drawable="@drawable/logo12" android:duration="35" />
    <item android:drawable="@drawable/logo13" android:duration="35" />
    <item android:drawable="@drawable/logo14" android:duration="35" />
    <item android:drawable="@drawable/logo15" android:duration="35" />
    <item android:drawable="@drawable/logo16" android:duration="35" />
    <item android:drawable="@drawable/logo17" android:duration="35" />
    <item android:drawable="@drawable/logo18" android:duration="35" />
    <item android:drawable="@drawable/logo19" android:duration="35" />
    <item android:drawable="@drawable/logo20" android:duration="35" />
    <item android:drawable="@drawable/logo21" android:duration="35" />
    <item android:drawable="@drawable/logo22" android:duration="35" />
    <item android:drawable="@drawable/logo23" android:duration="35" />
    <item android:drawable="@drawable/logo24" android:duration="35" />
    <item android:drawable="@drawable/logo25" android:duration="35" />
    <item android:drawable="@drawable/logo26" android:duration="35" />
    <item android:drawable="@drawable/logo27" android:duration="35" />
    <item android:drawable="@drawable/logo28" android:duration="35" />
    <item android:drawable="@drawable/logo29" android:duration="35" />
    <item android:drawable="@drawable/logo30" android:duration="35" />
    <item android:drawable="@drawable/logo31" android:duration="35" />
    <item android:drawable="@drawable/logo32" android:duration="35" />
    <item android:drawable="@drawable/logo33" android:duration="35" />
    <item android:drawable="@drawable/logo34" android:duration="35" />
    <item android:drawable="@drawable/logo35" android:duration="35" />
    <item android:drawable="@drawable/logo36" android:duration="35" />
    <item android:drawable="@drawable/logo37" android:duration="35" />
    <item android:drawable="@drawable/logo38" android:duration="35" />
    <item android:drawable="@drawable/logo39" android:duration="35" />
    <item android:drawable="@drawable/logo40" android:duration="35" />
    <item android:drawable="@drawable/logo41" android:duration="35" />
    <item android:drawable="@drawable/logo42" android:duration="35" />
    <item android:drawable="@drawable/logo43" android:duration="35" />
    <item android:drawable="@drawable/logo44" android:duration="35" />
    <item android:drawable="@drawable/logo45" android:duration="35" />
    <item android:drawable="@drawable/logo46" android:duration="35" />
    <item android:drawable="@drawable/logo47" android:duration="35" />
    <item android:drawable="@drawable/logo48" android:duration="35" />
    <item android:drawable="@drawable/logo49" android:duration="35" />
    <item android:drawable="@drawable/logo50" android:duration="35" />
    <item android:drawable="@drawable/logo51" android:duration="35" />
    <item android:drawable="@drawable/logo52" android:duration="35" />
    <item android:drawable="@drawable/logo53" android:duration="35" />
    <item android:drawable="@drawable/logo54" android:duration="35" />
    <item android:drawable="@drawable/logo55" android:duration="35" />
    <item android:drawable="@drawable/logo56" android:duration="35" />
    <item android:drawable="@drawable/logo57" android:duration="35" />
    <item android:drawable="@drawable/logo58" android:duration="35" />
    <item android:drawable="@drawable/logo59" android:duration="35" />

</animation-list> 
```

日志输出：

```
08-08 12:42:10.710: D/dalvikvm(6122): GC_CONCURRENT freed <1K, 3% free 10269K/10567K, paused 2ms+1ms
08-08 12:42:13.135: D/dalvikvm(6122): GC_FOR_ALLOC freed 115K, 3% free 10490K/10759K, paused 10ms
08-08 12:42:13.160: D/dalvikvm(6122): GC_FOR_ALLOC freed 130K, 4% free 10781K/11143K, paused 9ms
08-08 12:42:13.215: D/dalvikvm(6122): GC_FOR_ALLOC freed 195K, 4% free 11155K/11527K, paused 25ms
08-08 12:42:13.265: D/dalvikvm(6122): GC_FOR_ALLOC freed 130K, 4% free 11512K/11911K, paused 20ms
08-08 12:42:13.295: D/dalvikvm(6122): GC_FOR_ALLOC freed 195K, 4% free 11951K/12423K, paused 10ms
08-08 12:42:13.325: D/dalvikvm(6122): GC_FOR_ALLOC freed 260K, 4% free 12535K/12999K, paused 9ms
08-08 12:42:13.360: D/dalvikvm(6122): GC_FOR_ALLOC freed 325K, 4% free 13266K/13767K, paused 9ms
08-08 12:42:13.400: D/dalvikvm(6122): GC_FOR_ALLOC freed 391K, 4% free 14143K/14727K, paused 9ms
08-08 12:42:13.450: D/dalvikvm(6122): GC_FOR_ALLOC freed 521K, 5% free 15313K/16071K, paused 10ms
08-08 12:42:13.510: D/dalvikvm(6122): GC_FOR_ALLOC freed 587K, 5% free 16628K/17415K, paused 10ms
08-08 12:42:13.570: D/dalvikvm(6122): GC_FOR_ALLOC freed 587K, 5% free 17942K/18759K, paused 10ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:53:54.770

您正在加载相当多的图像，大约 60 个。如果这些图像也比较大，这让我认为内存泄漏是由`OutOfMemoryException.`

[这是一篇](http://developer.android.com/training/displaying-bitmaps/index.html)关于如何处理它的好文章。
简而言之，这个想法是您应该在将图像加载到内存之前按比例缩小它们。

# node.js - 如何在 node-mongodb-native 中启用分析？

> ID：11861909
> 
> 赞同：2
> 
> 时间：2012-08-08T09:50:02.720
> 
> 标签：node.js, mongodb, node-mongodb-native

我想通过 node-mongodb-native 驱动程序在我的 MongoDB 数据库之一上启用分析。

但是似乎没有一种`Db.setProfilingLevel()`方法（除了在管理数据库上）。

我试过使用`db.command({setProfilingLevel: 2})`但得到`no such cmd: setProfilingLevel`.

通过 mongo shell 可以正常工作`db.setProfilingLevel(2)`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T11:20:08.480

我明白你对这些方法的意思，但我认为 db.command 尝试的问题是你试图将 shell 帮助程序作为命令而不是命令本身运行。实际的命令是这种格式：

```
// get current levels
db.runCommand({ profile : -1 })
// set the level to log slow ops
db.runCommand({ profile : 1 })
// set to log slow ops and change the threshold to 200ms
db.runCommand({ profile : 1, slowms : 200 })
//revert to defaults
db.runCommand({ profile : 0, slowms : 100 }) 
```

因此，如果您尝试将相关值传递给应该可以工作的 db.command。

# javascript - 在带有条件的循环中使用停止

> ID：11861910
> 
> 赞同：0
> 
> 时间：2012-08-08T09:50:04.160
> 
> 标签：javascript

您好，我发现很难理解一些基本的 JavaScript

我编写了一个从 10 倒数到 0 的循环，并且我正在使用 console.log 将该值打印到控制台。在循环内部，一个`if`语句用于检查数字是否为 0，如果是则 console.log 打印“Blast Off！” 而不是一个数字。

这是我的工作代码：

```
for (i=10; i>=0; i--;) 
{
if (i === 0)    
    {
    console.log("Blast Off!");
    }
else 
    {
    console.log(i);
    }
} 
```

但是，我拼命想了解的是`for`循环的停止，即：

```
i>=0; 
```

这是否有效地说明如果`i`大于或等于零，然后`i`每次循环递减，然后在达到零时停止？

相反，当我将`for`循环代码更改为如下所示的内容时，这是否有效地表示如果`i`小于或等于零，然后`i`每次循环递减直到达到零？

如果停止更改，循环不打印的原因是什么？这是因为`i` **从不**保存小于或等于零的值，这意味着循环不会运行吗？

```
 i<=0; 
```

任何为我解决这个问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:15:38.350

我认为您的问题是循环中的分号额外：

这是你的代码：

```
for (i=10; i>=0; i--;) 
```

尝试这个：

```
for (i=10; i>=0; i--) 
```

也许这就是循环不打印的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T09:56:53.770

想象一组楼梯，10 级台阶。

```
--
  | i = 10
   --
     | i = 9
      --
        | i = 8
         --
           | i = 7
            --
              | i = 6
               --
                 | i = 5
                  --
                    | i = 4
                     --
                       | i = 3
                        --
                          | i = 2
                           --
                             | i = 1
                              --
                                | i = 0 
```

想象一下你正在下楼梯，在你的脑海里，你下意识地想：“直到我走到最底层，我会一直走下去”。

类似于 for 循环：

`for (i=10; i >= 0; i--)`

这就是说，我从最上面的第 10 步开始，如图所示，然后每次（或迭代）爬下一步`i--`，然后每次下台后，检查，“我在底部吗？楼梯已经？不？继续走“，那是你检查的时候`i >= 0`

希望能帮助你摆脱绝望；）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T09:54:17.190

你的理解听起来是正确的。执行语句时，第一个表达式为（在本例中为）`for`赋值。第二个表达式是比较。它将评估是否大于或等于（它是，因为我们刚刚将其设置为 10）。因为条件的计算结果为，所以循环体被执行。之后，第三个表达式运行，递减 的值，并重复该过程，直到条件评估为（当达到 0 时）。`i``10``true``i``0``true``i``false``i`

通过将条件更改为`i <= 0`，它将评估为`false`第一次，因此循环体将永远不会执行。

确切的行为在 ECMAScript 规范中的“[语句”部分中](http://es5.github.com/#x12.6.3)[有`for`](http://es5.github.com/#x12.6.3)详细说明。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T10:02:58.287

你好，首先“i = 10”和

```
i>=0 
```

是循环的条件。因此，每次`i`大于或等于零时，循环都会继续返回。由于您使用的是`i--`所以当`i`变为负数小于零时，循环将停止。

如果你使用

```
i<=0 
```

循环的条件为假，因此它不会进入循环执行括号内的代码

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-08T09:56:23.497

`for (i=10; i>=0; i--)`这意味着：

1.  从...开始`i=10`
2.  如果没有`i>=0`，则执行。这是“停止”条件。
3.  在每个循环之后执行：`i = i-1`

在此示例中，您不会进入循环，因为重复条件失败。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T09:56:36.233

您理解正确， for 循环中的 i>=0 告诉运行循环，只要 i 大于或等于 0。

i-- 在循环的每次迭代中递减 i 的值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-08T09:53:44.857

是的，如果你要改变

```
for (i=10; i>=0; i--) 
```

至

```
for (i=10; i<=0; i--) 
```

第一个条件检查是假的，因为 i 不小于或等于 0，所以它不会使循环更糟。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-08T09:53:55.050

在进入块之前检查条件，但在增量之后。增量被跳过第一次交互。第一次不满足条件时，整个循环将完全停止。

所以如果使用i<=0，则不满足条件，for会停止。如果你想跳过零，你应该有条件 i>0。

# objective-c - Cocoa xcode4.3 隐藏字符串的字符

> ID：11861918
> 
> 赞同：0
> 
> 时间：2012-08-08T09:50:23.010
> 
> 标签：objective-c, cocoa-touch, xcode4.3

我正在将字符串添加到 pickerView 中，如下所示：

```
NSString *string = [NSString stringWithFormat:@"%@  %@", xxx, xxx];
[pickerViewObjects addObject:string]; 
```

我想要做的是隐藏字符串的第一部分，或者像 charachterAtIndex 这样的东西会很有用，因为我的字符串的第一部分有特定数量的字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T05:24:24.997

使用此方法获取“（空格）约翰”

```
NSString *string = @"Hello John";

    NSUInteger spacePosition = [string rangeOfString:@" "].location;

    NSMutableString *newString = [[NSMutableString alloc]init ];

    for (int i=0; i<spacePosition; i++)
        [newString appendString:@" "];

    NSString *otherPartofString = [string substringFromIndex:(spacePosition)];
    [newString appendString:otherPartofString];

    NSLog(@"new String is '%@'",newString);
    [newString release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:52:44.180

您可以使用`[string substringWithRange:NSMakeRange(start, count)]`，这样您只会得到一个可用于显示的新字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:22:52.847

你可以这样做：

找到两个字符串之间的空格位置，如下所示：

NSUInteger spacePosition = [字符串 rangeOfString:@" "].location

然后使用：

NSString *otherPartofString = [string substringFromIndex:(spacePosition+1)];

# node.js - Node.js 登录/注册 Redis 问题

> ID：11861919
> 
> 赞同：0
> 
> 时间：2012-08-08T09:50:26.083
> 
> 标签：node.js, redis

```
};
var login = function(name, socket, passcode, callback) { 
    db.get(name + ':name', function(res) {
        db.get(name + ':pin', function(pin) {
            if (name === res) {
                if (passcode === pin) {
                    players[sockets.indexOf(socket)] = name;
                }
            }
        });
    });
};
var register = function(name, socket, passcode, callback) {
    if (name === null) {
        callback('Name null!');
        return;
    }
    if (name === '') {
        callback('Name empty!');
        return;
    }
    db.get(name + ':name', function(data) {
        if (data !== null) {
        callback('This name has been taken!');
    }
    else {
        db.set(name + ':name', name, function() {
            db.set(name + ':pin', passcode, function() {
                players[sockets.indexOf(socket)] = name;
                callback('Logged in as: ' + players[sockets.indexOf(socket)]);
            });
        });
    }
});
}; 
```

为什么登录部分让我使用任何 PIN 登录任何用户，而注册部分不回调？

他们被称为通过

```
 login(args[1], socket, args[2], function(data) {
        callback(null, data)
    } 
```

db 是一个 redis 客户端。

完整代码：github.com/creativemud，文件 server.js

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:59:24.440

你永远不会在内部执行回调`login`。完成后你需要打电话`callback`。

此外，您似乎缺乏一些错误处理。是`db`redis客户端吗？在这种情况下，每个回调的第一个参数是一个错误，这是 node.js 领域的自定义。我会做类似的事情：

```
var login = function(name, socket, passcode, callback) { 
    db.get(name + ':name', function(err, res) {
        if(err) return callback(err);

        if(res !== name) return callback(new Error('invalid result'));

        db.get(name + ':pin', function(err, pin) {
            if(err) return callback(err);

            if(pin !== passcode) return callback(new Error('invalid passcode'));

            players[sockets.indexOf(socket)] = name;
            callback(null, name);
        });
    });
}; 
```

可能不是很干净，但我希望你能赶上潮流。

**编辑：**您没有显示如何调用这些函数。Socket.io 对身份验证有很好的支持，你可能想看看：[授权和握手](https://github.com/LearnBoost/socket.io/wiki/Authorizing)。

# ios - 在 Xcode4 调试控制台中显示 ANSI 颜色

> ID：11861922
> 
> 赞同：5
> 
> 时间：2012-08-08T09:50:45.100
> 
> 标签：ios, xcode4

有没有办法做到这一点？我不想用不同的颜色来区分我的日志。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:26:09.057

**要在 Xcode 控制台中启用 ANSI 颜色，**请安装克隆[https://github.com/robbiehanson/XcodeColors](https://github.com/robbiehanson/XcodeColors)并构建。构建过程会将 Xcode 插件安装在正确的目录中。

**要为 Xcode**克隆[https://github.com/steakknife/unsign](https://github.com/steakknife/unsign)取消签名，请运行 make，将 unsign 命令放在路径中。然后运行以下命令：

```
cd /Applications/Xcode.app/Contents/MacOS
sudo unsign Xcode
sudo mv Xcode Xcode.signed
sudo ln -sf Xcode.unsigned Xcode 
```

请注意，这是可逆的。只需更改符号链接。现在您需要**更新插件 UUID 以匹配当前 Xcode 版本**：

```
XCODEUUID=`defaults read /Applications/Xcode.app/Contents/Info DVTPlugInCompatibilityUUID`

for f in ~/Library/Application\ Support/Developer/Shared/Xcode/Plug-ins/*; do defaults write "$f/Contents/Info" DVTPlugInCompatibilityUUIDs -array-add $XCODEUUID; done 
```

现在您可以在 Xcode 控制台中使用 ANSI 颜色。它看起来像这样：

![](../Images/a322302fbf02bddabeb604a6637f0b74.png)

# android - 在 MapView Android 中选择一个区域

> ID：11861923
> 
> 赞同：0
> 
> 时间：2012-08-08T09:50:48.883
> 
> 标签：android, android-mapview, selection, area

是否可以在 android 中显示地图视图并允许用户选择一个区域，例如国家或州？

澄清：

我想让用户从地图视图中选择一个国家，这怎么可能？

我不关心所选国家是否突出显示，我只关心检索用户选择/触摸/标记的国家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T10:01:02.427

有一种方法可以从地图中获取纬度，经度 [如何从谷歌地图中获取经纬度触摸事件？](https://stackoverflow.com/questions/4646584/how-to-get-lat-and-long-on-touch-event-from-goole-map)

之后，您可以调用 Google Geo Code API 将此 lat,lon 转换为物理地址，

IE

```
http://maps.googleapis.com/maps/api/geocode/json?latlng=40.714224,-73.961452&sensor=true_or_false 
```

上面的链接将返回 JSON

```
{
  "status": "OK",
  "results": [ {
    "types": street_address,
    "formatted_address": "275-291 Bedford Ave, Brooklyn, NY 11211, USA",
    "address_components": [ {
      "long_name": "275-291",
      "short_name": "275-291",
      "types": street_number
    }, {
      "long_name": "Bedford Ave",
      "short_name": "Bedford Ave",
      "types": route
    }, {
      "long_name": "New York",
      "short_name": "New York",
      "types": [ "locality", "political" ]
    }, {
      "long_name": "Brooklyn",
      "short_name": "Brooklyn",
      "types": [ "administrative_area_level_3", "political" ]
    }, {
      "long_name": "Kings",
      "short_name": "Kings",
      "types": [ "administrative_area_level_2", "political" ]
    }, {
      "long_name": "New York",
      "short_name": "NY",
      "types": [ "administrative_area_level_1", "political" ]
    }, {
      "long_name": "United States",
      "short_name": "US",
      "types": [ "country", "political" ]
    }, {
      "long_name": "11211",
      "short_name": "11211",
      "types": postal_code
    } ],
    "geometry": {
      "location": {
        "lat": 40.7142298,
        "lng": -73.9614669
      },
      "location_type": "RANGE_INTERPOLATED",
      "viewport": {
        "southwest": {
          "lat": 40.7110822,
          "lng": -73.9646145
        },
        "northeast": {
          "lat": 40.7173774,
          "lng": -73.9583193
        }
      }
    }
  },

  ... Additional results[] ... 
```

现在您可以解析 JSON 并获取国家名称城市名称地区、州等。

或者其他选择是只获取国家代码。

```
http://ws.geonames.org/countryCode?lat=25.03&lng=67.2 
```

这将返回国家代码 PK = 巴基斯坦，您可以获取国家代码列表，或者

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T09:57:47.497

我知道的一种解决方案是，您可以通过地图图钉标记特定区域，并通过在 Map 中扩展 OverLay 类来填充该区域，如下所示。希望这是有用的。

```
public class MapOverlay extends Overlay
{
    private GeoPoint new_geopoint = null;

    public MapOverlay(GeoPoint geoPoint) 
    {

    }

    @Override
    public void draw(Canvas canvas, MapView mapView, boolean shadow) 
    {
        super.draw(canvas, mapView, shadow);

        Paint mPaint = new Paint();
        mPaint.setDither(true);
        mPaint.setStyle(Style.FILL_AND_STROKE);
        mPaint.setColor(Color.RED);
        mPaint.setAlpha(9);
        mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(2);

        Path path = new Path();

        Projection projection = mapView.getProjection();

        for(int j = 0; j < geoArrayist.size(); j++) 
        {
            Iterator<GeoPoint> it = geoArrayist.iterator();
            while(it.hasNext()) 
            {
                GeoPoint arrayListGeoPoint = it.next();

                Point currentScreenPoint = new Point();
                projection.toPixels(arrayListGeoPoint, currentScreenPoint);

                if(j == 0)
                    path.moveTo(currentScreenPoint.x, currentScreenPoint.y); 
                else
                    path.lineTo(currentScreenPoint.x, currentScreenPoint.y);
            }                 
        }
       // old_geopoint = new_geopoint;
        canvas.drawPath(path, mPaint);
    }       
} 
```

# c++ - vector::erase 是否对向量中的元素重新排序？

> ID：11861926
> 
> 赞同：2
> 
> 时间：2012-08-08T09:50:55.017
> 
> 标签：c++, vector

我有一个向量包含 a,b,c,d,e vec[2] 是 c，但是在我删除/擦除 c 后它会自动重新排序吗？我的意思是 vec[2] 在手术后是 d 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:53:34.270

逻辑上是的，因为向量是元素的动态数组。您删除一个，然后移动随后的所有内容。

以同样的方式，向量的总长度将随着您擦除元素而减少。

来自[cplusplus.com](http://www.cplusplus.com/reference/stl/vector/erase/)

> 这通过删除元素的数量有效地减少了向量的大小，之前调用了每个元素的析构函数。
> 
> 因为向量保持数组格式，擦除向量末端以外的位置也会将擦除段之后的所有元素移动到它们的新位置，这可能不像在其他类型的序列容器（deque，list）中擦除那样有效.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T10:13:07.957

根据标准：

> **迭代器擦除（const_iterator 位置）；**
> 
> ……
> 
> 效果：在擦除点或之后使迭代器和引用无效
> 
> 复杂度：T的析构函数被称为等于被擦除元素个数的次数，而T的移动赋值运算符被称为等于被擦除元素之后向量中元素个数的次数。

如您所见，移动赋值运算符将被调用的次数与擦除元素之后的元素一样多，并且对之后元素的每个引用/迭代器都无效。

因此，当一个元素被擦除时，后面的所有元素都会移动以填充被擦除元素所在的“空白”空间。

关于无效引用/迭代器的要点非常重要，尤其是要记住。如果您正在循环擦除。根据最新的标准，erase 应该返回一个迭代器到你可以使用的下一个元素，或者[擦除和删除成语](http://en.wikipedia.org/wiki/Erase-remove_idiom)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:58:10.567

如果您担心在迭代期间这样做的副作用，请使用[Erase-remove 习惯用法](http://en.wikipedia.org/wiki/Erase-remove_idiom)

# mysql - SQL查询，需要显示一列条件“忽略”其他条件的计数

> ID：11861927
> 
> 赞同：0
> 
> 时间：2012-08-08T09:50:55.033
> 
> 标签：mysql, sql

我有以下查询：

```
<?php
$BM = $_POST['BranchManager'];
$AverageScore = ("ROUND(AVG(Score),1)AS 'Avg <br/> Score'");
$AverageAutofails = ("ROUND(AVG(Autofails),1)AS 'Autofails <br/> per Check'");
$CA003 = ( "SELECT COUNT(*) FROM Data_Table WHERE CA003Result = 'No'");

echo SQLResultTable("SELECT  BranchManager, COUNT(SalesExec)AS 'Total<br/> Checks', $AverageScore, SUM(Autofails) AS 'Total <br/>AutoFails', $AverageAutofails, $CA003 FROM Data_Table WHERE BranchManager = '$BM'");
?> 
```

如您所见，它累加了问题、分数、平均值等。

我需要做的是计算问题 3 (CA003) 被回答 NO 的次数。这与其他列无关，上面我尝试进行嵌套查询，但有些东西不起作用。如何将其插入其中，而不限制主查询的结果？

干杯!

所以我现在有这个工作：

```
$BM = $_POST['BranchManager'];
$AverageScore = ("ROUND(AVG(Score),1)AS 'Avg <br/> Score'");
$AverageAutofails = ("ROUND(AVG(Autofails),1)AS 'Autofails <br/> per Check'");
$CA003 = "(SELECT COUNT(*) FROM Data_Table WHERE CA003Result = 'No' AND BranchManager = '$BM')   AS 'CA003'";
$CA004 = "(SELECT COUNT(*) FROM Data_Table WHERE CA004Result = 'No' AND BranchManager = '$BM')   AS 'CA004'";
$CA006= "(SELECT COUNT(*) FROM Data_Table WHERE CA006Result = 'No' AND BranchManager = '$BM')   AS 'CA006'";
$CA010 = "(SELECT COUNT(*) FROM Data_Table WHERE CA010Result = 'No' AND BranchManager = '$BM')   AS 'CA010'";
$CA017 = "(SELECT COUNT(*) FROM Data_Table WHERE CA017Result = 'No' AND BranchManager = '$BM')   AS 'CA017'";
$CA022 = "(SELECT COUNT(*) FROM Data_Table WHERE CA022Result = 'No' AND BranchManager = '$BM')   AS 'CA022'";
$CA027 = "(SELECT COUNT(*) FROM Data_Table WHERE CA027Result = 'No' AND BranchManager = '$BM')   AS 'CA027'";

echo SQLResultTable("SELECT  BranchManager, COUNT(SalesExec)AS 'Total<br/> Checks', $AverageScore, SUM(Autofails) AS 'Total <br/>AutoFails', $AverageAutofails, $CA003, $CA004, $CA006, $CA010, $CA017, $CA022, $CA027 FROM Data_Table WHERE BranchManager = '$BM'");
?> 
```

完美显示团队（分支）结果。

目前对于下一张表，我有：

```
echo SQLResultTable("SELECT SalesExec, COUNT(SalesExec)AS 'Total<br/> Checks', $AverageScore, SUM(Autofails) AS 'Total <br/>AutoFails', $AverageAutofails,   FROM Data_Table WHERE BranchManager = '$BM' GROUP BY SalesExec");} 
```

它还需要显示每个 CA00 问题的 No Counts。

第一个查询适用于基于 BranchManager 字段的分支总计，但是对于第二个查询，我需要它来计算每行显示的 SalesExec 的每个 CA00 问题的否。

我真的不知道如何更好地解释它对不起！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:07:03.747

您只需要放置`()`子查询。最终查询看起来像......

```
SELECT
  BranchManager,
  COUNT(SalesExec)                                             AS 'Total Checks',
  ROUND(AVG(Score),1)                                          AS 'Avg Score',
  SUM(Autofails)                                               AS 'Total AutoFails',
  ROUND(AVG(Autofails),1)                                      AS 'Autofails per Check',
  (SELECT COUNT(*) FROM Data_Table WHERE CA003Result = 'No')   AS 'Total No'
FROM
  Data_Table
WHERE
  BranchManager = '$BM'
GROUP BY
  BranchManager 
```

**编辑：**根据您的评论和编辑...

第一组结果...

```
SELECT
  BranchManager,
  COUNT(SalesExec)                                     AS 'Total Checks',
  ROUND(AVG(Score),1)                                  AS 'Avg Score',
  SUM(Autofails)                                       AS 'Total AutoFails',
  ROUND(AVG(Autofails),1)                              AS 'Autofails per Check',
  SUM(CASE WHEN CA001Result = 'No' THEN 1 ELSE 0 END)  AS 'Total CA001 No',
  SUM(CASE WHEN CA002Result = 'No' THEN 1 ELSE 0 END)  AS 'Total CA002 No',
  SUM(CASE WHEN CA003Result = 'No' THEN 1 ELSE 0 END)  AS 'Total CA003 No',
  SUM(CASE WHEN CA004Result = 'No' THEN 1 ELSE 0 END)  AS 'Total CA004 No',
  SUM(CASE WHEN CA005Result = 'No' THEN 1 ELSE 0 END)  AS 'Total CA005 No',
  SUM(CASE WHEN CA006Result = 'No' THEN 1 ELSE 0 END)  AS 'Total CA006 No'
FROM
  Data_Table
WHERE
  BranchManager = '$BM'
GROUP BY
  BranchManager 
```

第二个结果集...

```
SELECT
  SalesExec,
  COUNT(SalesExec)                                     AS 'Total Checks',
  ROUND(AVG(Score),1)                                  AS 'Avg Score',
  SUM(Autofails)                                       AS 'Total AutoFails',
  ROUND(AVG(Autofails),1)                              AS 'Autofails per Check',
  SUM(CASE WHEN CA001Result = 'No' THEN 1 ELSE 0 END)  AS 'Total CA001 No',
  SUM(CASE WHEN CA002Result = 'No' THEN 1 ELSE 0 END)  AS 'Total CA002 No',
  SUM(CASE WHEN CA003Result = 'No' THEN 1 ELSE 0 END)  AS 'Total CA003 No',
  SUM(CASE WHEN CA004Result = 'No' THEN 1 ELSE 0 END)  AS 'Total CA004 No',
  SUM(CASE WHEN CA005Result = 'No' THEN 1 ELSE 0 END)  AS 'Total CA005 No',
  SUM(CASE WHEN CA006Result = 'No' THEN 1 ELSE 0 END)  AS 'Total CA006 No'
FROM
  Data_Table
WHERE
  BranchManager = '$BM'
GROUP BY
  SalesExec 
```

# android - 如何重新启动使用上下文调用其他类的活动？

> ID：11861931
> 
> 赞同：0
> 
> 时间：2012-08-08T09:51:11.430
> 
> 标签：android, android-activity

当我在 Activity 中说 Activity_A 时，我使用 Activity_A 的上下文转到 class_B。

现在，当我想从 class_B 重新启动 Activity_A 时。我用这个

```
Intent intent = new Intent(context, Activity_A.class);
context.startActivity(intent); 
```

我想要的是当我从各种活动中调用 class_B 时，它必须使用从 Activity 发送到 class_B 的上下文重新启动它被调用的 Activity。

我想用名为 class_B 的 Activity 替换 Activity_A.class

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:57:00.710

在您的情况下，您应该将一个类变量与活动上下文一起传递。例如来自 Actitity_A：

```
class_B.doMethod(this,Activity_A.class); 
```

并使用类变量从 class_B 启动 Activity

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:02:42.773

如何使用 startActivityForResult(intent,code) 而不是 startActivity(intent) 我认为这可能有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:06:26.663

您可以传递一个包含活动名称的字符串。像下面

```
Intent intent = new Intent(context, Activity_A.class);
intent.putExtra("CALLED_FROM","ACTIVITY_A"); //PASSING FLAG Variable to know from where it called
context.startActivity(intent); 
```

'

在 Activity_B 的 onCreate 中，您可以使用以下代码。

```
String calledFrom = getIntent().getStringExtra("CALLED_FROM"); 
```

从 ClassB 开始，您基本上可以在 calledFrom String 中检查 Activity Names 并相应地启动 Activity。

# linux - .htaccess .gif 到 x1.php

> ID：11861932
> 
> 赞同：0
> 
> 时间：2012-08-08T09:51:17.657
> 
> 标签：linux, .htaccess

我想将 .gif 重定向到 x1.php。由于某种原因，它不起作用

.htaccess

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule .(gif)$ x1.php [NC] 
```

这里到底有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:55:40.120

尝试省略 () 并掩盖点。

```
RewriteRule \.gif$ x1.php [NC] 
```

# jquery - 如何在jQuery中用html标签包装li元素的内容？

> ID：11861933
> 
> 赞同：0
> 
> 时间：2012-08-08T09:51:23.333
> 
> 标签：jquery

如何使用 jQuery 包装 li 元素的内容？我的 HTML 代码如下所示：

```
 <div id="ident">
<ul>
            <li>lorem ipsum dolor sit amet</li>
            <li>lorem ipsum dolor sit amet</li>
            <li>lorem ipsum dolor sit amet</li>
            <li>lorem ipsum dolor sit amet</li>
            <li>lorem ipsum dolor sit amet</li>
            <li>lorem ipsum dolor sit amet</li>
</ul>
</div> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:53:50.633

使用 wrapInner()：

```
 $("div#ident li").wrapInner("<div>"); 
```

[http://api.jquery.com/wrapInner/](http://api.jquery.com/wrapInner/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:56:35.483

看看 [http://api.jquery.com/wrap/](http://api.jquery.com/wrap/)

# php - phppowerpoint : setPath() - 图像名称中有空格时出现问题

> ID：11861936
> 
> 赞同：0
> 
> 时间：2012-08-08T09:51:29.573
> 
> 标签：php, phppowerpoint

如果图像名称中有空格，我正在使用以下代码并遇到问题。问题基本上是文件没有在 popwerpoint 幻灯片上加载。

喜欢：

```
$shape->setPath("C:/image/abc1.jpg");  // Working fine

$shape->setPath("C:/image/abc 1.jpg"); // Not working due to space in filename 
```

我正在使用 PHPPowerPoint 类生成 PowerPoint 幻灯片。

我怎样才能让它工作？

**编辑**

为了罗因的利益

```
public function setPath($pValue = '', $pVerifyFile = true) {
    if ($pVerifyFile) {
        if (file_exists($pValue)) {
            $this->_path = $pValue;

            if ($this->_width == 0 && $this->_height == 0) {
                // Get width/height
                list($this->_width, $this->_height) = getimagesize($pValue);
            }
        } else {
            throw new Exception("File $pValue not found!");
        }
    } else {
        $this->_path = $pValue;
    }
    return $this;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:57:22.673

尝试

```
$file_path = "C:/image/abc 1.jpg";
$clean_file_path = str_replace(" ", "%20", "$file_path");
$shape->setPath($clean_file_path); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T09:56:05.673

尝试：

```
$shape->setPath("C:/image/abc%201.jpg"); 
```

如果可行，您可以使用简单的字符串替换。

# iphone - 如何获得合适的素描照片？

> ID：11861942
> 
> 赞同：-1
> 
> 时间：2012-08-08T09:52:14.970
> 
> 标签：iphone

> **可能重复：**
> [如何在 iphone 中对图像进行素描效果？](https://stackoverflow.com/questions/11861313/how-to-give-sketch-effect-on-image-in-iphone)

![在此处输入图像描述](../Images/dd8a767150300de50b16bc2f3db3faaa.png)

大家好，

我是新手。

我已经尝试解决我的问题。我正在开发照片素描应用程序。但不知道如何获得正确的照片素描图像。那么如何才能获得合适的铅笔素描效果呢？以下是一些示例图像。

请指导我一条路。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:09:48.827

Core Image 滤镜可能是最好的选择，CILineOverlay 和 CIEdgeWork 混合在一起可以产生你想要的效果。[http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CoreImageFilterReference/](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CoreImageFilterReference/)。

（来自我的另一个答案）

# javascript - Phonegap - 如何摆脱未捕获的类型错误

> ID：11861944
> 
> 赞同：1
> 
> 时间：2012-08-08T09:52:21.147
> 
> 标签：javascript, android, html, sqlite, cordova

我开发了 Android Phonegap 应用程序（**Phonegap Versio 1.4.1**），它有一个`HTML`带有多个 div 标签的文件（每个`<div>`都是一个 UI 页面）和`<script>`带有 Javascript 方法的标签。该应用程序运行良好，没有出现任何错误。现在，要求`<div>`将HTML页面中的每个页面划分为单`HTML`页和Javascript，我开发的内容被分离并放置为`jscript.js`文件。所以，现在有多个`HTML`页面和一个外部 Javascript 文件，这些`HTML`文件将访问`jscript.js`文件。现在，应用程序在 Logcat 中返回一些错误，如下所示：

```
Web Console(19120): Uncaught TypeError: Cannot call method 'clear' of undefined.
Web Console(19120): Uncaught TypeError: Cannot call method 'alert' of undefined. 
```

上述错误显示在 Phonegap 方法 " `window.plugins.statusBarNotification.clear`" 和 " `navigator.notification.alert`"。

如何摆脱这些错误？由于这些原因，应用程序无法按预期工作。谷歌了很多时间，但找不到解决方案。有没有人有同样的经历？请分享你的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:36:35.790

无论您使用什么插件，都应该在设备准备好后使用它以避免此类错误。

# powershell-2.0 - 无法在 PowerShell 中创建函数

> ID：11861945
> 
> 赞同：0
> 
> 时间：2012-08-08T09:52:29.310
> 
> 标签：powershell-2.0, powershell-ise

我正在尝试使用[本教程](http://www.powershellatoms.com/shell-environment/adding-functions-to-the-powershell-ise-menu/)在我的 PowerShell ISE 中添加一个菜单项。

```
Function My-Custom-Function { 
    Write-Host “Running my very own function!” 
}

$psISE.CustomMenu.Submenus.Add(“Run Custom Function”, {My-Custom-Function}, “Shift+Ctrl+f”) 
```

但由于某种原因，我收到此错误：

```
You cannot call a method on a null-valued expression.
At line:5 char:31
+ $psISE.CustomMenu.Submenus.Add <<<< (“Run Custom Function”, {My-Custom-Function}, “Shift+Ctrl+f”)
    + CategoryInfo          : InvalidOperation: (Add:String) [], RuntimeException
    + FullyQualifiedErrorId : InvokeMethodOnNull 
```

我运行 Windows 7 Enterprise 并以管理员身份运行 PowerShell ISE...

对这个问题有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T16:44:44.600

文本：

$psISE.CurrentPowerShellTab.AddOnsMenu.Submenus.Add(“运行自定义函数”, {My-Custom-Function}, “Shift+Ctrl+f”)

最好改成

$psISE.PowerShellTabs.AddOnsMenu.Submenus.Add(“运行自定义函数”, {My-Custom-Function}, “Shift+Ctrl+f”)

假设您想要所有 PowerShell tabsl 的附加菜单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:25:43.100

尝试这个

Function My-Custom-Function { Write-Host “运行我自己的函数！” }

$psISE.CurrentPowerSHellTab.AddOnsMenu.Submenus.Add(“运行自定义函数”, {My-Custom-Function}, “Shift+Ctrl+f”)

这适用于我系统上的 V3！

# actionscript-3 - 如何获得 Flex 元数据的自动完成功能？

> ID：11861948
> 
> 赞同：0
> 
> 时间：2012-08-08T09:52:41.070
> 
> 标签：actionscript-3, apache-flex

我看了一下 flex 元数据，它似乎很安静。虽然我有问题，但我没有自动完成元数据。

我会告诉你我做了什么，也许你会发现一个错误。我想创建自己的样式元数据标记，例如 MyStyle。我想创建自己的，因为我更容易在运行时确定元数据是由我还是由 flex 框架添加的（因此我不会使用预定义的 Style 元数据标签）。

添加元数据非常简单，我只是编写了这段代码来让它工作：

```
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"
         xmlns:s="library://ns.adobe.com/flex/spark" 
         width="1024" height="768">

     <fx:Metadata>
         [MyStyle(required="true")]
     </fx:Metadata>
</s:Group> 
```

在我的 WindowedApplication 组件上，我向舞台添加了一个添加到舞台的监听器。因此，添加到应用程序的所有元素在添加到舞台时都会触发 Event.ADDED。在那个 eventHandler 中，我为我的元数据标签扫描添加的元素。

```
protected function addedToStageListener(event:Event):void
{
    var classInfo:XML = describeType(event.target);
    for each (var x:XML in classInfo..metadata)
    {
        if (x.@name == "MyStyle")
            trace(x);
    }
} 
```

我还添加了一个 flex-config.xml 文件（在我的 src 文件夹的顶层）来添加编译器选项，以便我可以在运行时读取我的自定义元数据标记。该文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<flex-config>
    <compiler>
        <keep-as3-metadata>
            <name>MyStyle</name>
        </keep-as3-metadata>
    </compiler>
</flex-config> 
```

当我运行它时，我得到了我期望的结果

```
<metadata name="MyStyle">
  <arg key="required" value="true"/>
</metadata> 
```

所以这行得通。我的下一步是在将元数据标记添加到代码时添加自动完成功能。为此，您应该创建一个 metadata.xml 来指定元数据标签，对吗？所以我这样做了，最后得到了这个简单的 metadata.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<annotations version="2.1.1">
    <metadata name="MyStyle" description="Adds style.">
        <context name="class" />
        <attribute name="required" type="Boolean" required="true" />
    </metadata>
</annotations> 
```

为了将 metadata.xml 正确添加到项目中，我按照[Adob​​e 的教程进行](http://help.adobe.com/en_US/flashbuilder/using/WSe4e4b720da9dedb5344c6f711358acdda1d-7fff.html#WSe4e4b720da9dedb56fd3caca12e6bb494bb-7ff0)操作，但它不起作用。我没有自动完成。你有什么建议吗？

**更新：**我使用 Flash Builder 4.6 Professional 并创建了一个 Flex 库项目。

# java - 如何使用 Jetty 取消阅读请求？

> ID：11861952
> 
> 赞同：0
> 
> 时间：2012-08-08T09:52:46.140
> 
> 标签：java, http, network-programming, jetty

我`Jetty 8`在阻塞 I/O 模式下使用。servlet`doPost`从请求中读取请求内容`InputStream`（实际上是 Jetty 的一个实例`HttpInput`）。

如果客户端发送一个非常大的请求并且执行速度非常慢怎么办？显然，读取请求将花费大量时间。因此，我想在几秒钟后取消读取并向客户端发送错误响应。我怎样才能做到这一点没有太多的变化，即使用`Jetty`阻塞 I/O 和没有`continuation`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T02:08:55.567

编写一个 ServletFilter 来检测慢速请求。当您确定它很慢时，...

*   [通过调用AbstractHttpConnection.getCurrentConnection()](http://download.eclipse.org/jetty/stable-8/apidocs/org/eclipse/jetty/server/AbstractHttpConnection.html#getCurrentConnection%28%29)获取对当前连接的引用
*   [通过AbstractHttpConnection.getEndPoint()](http://download.eclipse.org/jetty/stable-8/apidocs/org/eclipse/jetty/io/AbstractConnection.html#getEndPoint%28%29)获取对 EndPoint 的引用
*   调用[EndPoint.close()](http://download.eclipse.org/jetty/stable-8/apidocs/org/eclipse/jetty/io/EndPoint.html#close%28%29)

另外，看看[QoSFilter](http://wiki.eclipse.org/Jetty/Reference/QoSFilter)，它已经做了很多这样的事情。

# neural-network - Rapidminer - 神经网络算子 - 输出置信度

> ID：11861961
> 
> 赞同：1
> 
> 时间：2012-08-08T09:53:21.570
> 
> 标签：neural-network, rapidminer

我有六个输入、一个隐藏层和两个输出节点（1；0）的前馈神经网络。该 NN 通过 0;1 值学习。应用模型时，创建了变量confidence(0)和confidence(1)，其中每行这两个数字的总和为1。我的问题是：这两个数字(confidence(0)和confidence(1))是什么究竟是什么意思？这两个数字是概率吗？

感谢您的回答

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T06:25:40.293

**一般来说**

置信度值（或分数，因为它们在其他程序中被称为）表示衡量模型如何确信所呈现的示例属于某个类别。它们高度依赖于一般策略和算法的属性。

**例子**

最容易说明的例子是*多数分类器*，它只是根据原始测试集中的比例为所有观察分配相同的分数。

另一个例子是*k-nearest-neighbor-classifier*，其中类 i 的分数是通过对那些都属于 k-最近邻且具有类 i 的示例的距离进行平均来计算的。然后在所有类别中对分数进行归一化。

在NN的具体例子中，不检查代码我不知道它们是如何计算的。我猜这只是输出节点的值，在两个类之间进行了归一化。

**置信度是否代表概率？**

一般来说没有。为了说明这种情况下的概率是什么意思：如果一个示例对于“1”类的概率为 0.3，那么具有*相似特征/变量值*的所有示例中有 30%应该属于“1”类，而 70% 不应该属于。

据我所知，他的任务叫做“校准”。为此目的，存在一些通用方法（例如，对分数进行分箱并将它们映射到相应箱的类别分数）和一些依赖于分类器的方法（例如，为 SVM 发明的[Platt Scaling](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.41.1639)）。一个好的开始是：

[Bianca Zadrozny、Charles Elkan：将分类器分数转化为准确的多类概率估计](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.13.7457)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T12:03:41.423

置信度度量对应于在初始训练数据集中激活的输出 0 和 1 的比例。

例如，如果 30% 的训练集有输出 (1;0)，其余 70% 有输出 (0; 1)，那么置信度 (0) = 30%，置信度 (1) = 70%

# java - tomcat，2个webapps，2个log4js，但两个应用程序都记录到一个文件

> ID：11861963
> 
> 赞同：3
> 
> 时间：2012-08-08T09:53:26.713
> 
> 标签：java, tomcat, log4j, documentum

为了详细说明，我有一个运行 Java 1.6.0_27 的 Tomcat 服务器版本 7.0.27。

我有两场战争，每场都有自己的 log4j jar，也使用 slf4j 和 slf4j-log4j。每个战争都有自己的配置文件（log4j.xml）。

战争 1 应该使用文件 log-1.log，战争 2 应该使用文件 log-2.log，但两者都登录到 log-1.log。

我已经检查过tomcat安装中没有其他log4j jar，所以我不确定问题出在哪里。我还关闭了共享类加载，但这并没有什么区别。我的下一步是打开详细的类加载器日志记录和/或开始调试 log4j，但也许这里有人知道这是为什么并且可以节省我一些时间。感谢您对此的任何意见。

更新：

好吧，我想我得到了这个。log4j xml 文件很好。在做了详细的：类之后，我可以看到 log4j.jar 只被加载一次，并且从两个 Web 应用程序中都没有加载。

我正在使用 Documentum。他们有一个运行时 jar 需要使用他们的库，这是一个带有清单文件的空 jar。清单指向一堆罐子。换句话说，他们不使用 maven ......无论如何......其中一个 jar 恰好是在 Documentum 安装中找到的 logj4。所以看起来两个 webapps 都在使用那个。我认为这是问题所在。待确认...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:27:37.617

如果您将 Documentum 的运行时 jar 放在顶级类路径中，并且该运行时 jar 引用 log4j.jar，那么它只会加载一次。但是，您不必使用该运行时 jar，或者您可以仅在 Documentum .war 中使用它（如果一个不是 Documentum）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:10:56.910

您没有发布您的属性文件，但我可以想到一些原因：

1.  您没有写入不同文件的附加程序，即您需要 appender1 写入 log1.log 和 appender2 写入 log2.txt
2.  您正确设置了附加程序，但两个应用程序都使用相同的记录器，因此它们都写入同一个文件。
3.  您有 2 个记录器，每个记录器都有自己的附加程序，但在您的代码中，您没有初始化正确的记录器：

    ```
    //there is no logger called com.sample, so it defaults to root logger that has appender that writes to log1.txt    
    Logger logger = Logger.getLogger(com.sample.MyClass.class); 
    ```

如果您发布您的属性文件和您的记录器初始化代码，它会更容易为您提供帮助。

# sonarqube - 声纳多核

> ID：11861969
> 
> 赞同：0
> 
> 时间：2012-08-08T09:53:37.030
> 
> 标签：sonarqube

我只是想知道在分析代码时是否可以让声纳使用多个核心。

或者是否有任何其他方法可以提高整体性能。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:14:28.140

目前，声纳使用的大多数分析仪都是单线程的。我建议并行分析几个插件。[https://jira.codehaus.org/browse/SONAR-3025](https://jira.codehaus.org/browse/SONAR-3025)

如果你愿意，你可以投票，但目前没有办法使用所有核心。如果您有很多项目，您可以手动并行分析它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T18:05:48.650

除非声纳进程是多线程的，否则跑步者不太可能充分利用您的多核机器。

我可以推荐的最大性能提升是：

*   在与 Sonar 数据库相同的机器上运行您的构建。跨 WAN 网络的 JDBC 调用会严重影响您的 Sonar 构建时间。
*   如果您使用视图插件，请考虑减少视图数量。这会产生大量额外的 JDBC 调用。

# asp.net-mvc - 无法从视图中调用其他操作

> ID：11861975
> 
> 赞同：0
> 
> 时间：2012-08-08T09:53:51.523
> 
> 标签：asp.net-mvc

我正在尝试构建一个简单的 ASP.net MVC 应用程序。

我的控制器如下所示。

```
namespace CustomerReadAndLoad.Controllers
{
    public class CustomerController : Controller
    {
        //
        // GET: /Customer/
        public ActionResult Index()
        {
            return View();
        }

        public ActionResult LoadCustomer()
        {
            return View();
        }

        [HttpPost]
        public ActionResult DisplayCustomer()
        {
            Customer obj = new Customer();
            obj.ID = Convert.ToInt16(Request.Form["CuatomerID"]);
            obj.Name = Convert.ToString(Request.Form["CuatomerName"]);
            obj.Amount = Convert.ToInt16(Request.Form["CuatomerAmount"]);
            return View(obj);
        }
    }
} 
```

我试图在 LoadCustomerView 中包含动作 DisplayCustomer，如下所示

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<dynamic>" %>    
<!DOCTYPE html>    
<html>   
  <head runat="server">
    <meta name="viewport" content="width=device-width" />
    <title>LoadCustomer</title>
  </head>

  <body>
    <div>
    <form action ="DisplayCustomer" method ="post">
      Welcome to Customer management System<br />
      Enter the below details <br />
      Customer ID :- <input type="text" name = "CuatomerID" /><br />
      Customer Name :- <input type="text" name = "CuatomerName" /><br />
      Customer Amount :- <input type="text"  name = "CuatomerAmount" /><br />
      <input type ="button"  value="ClickHere" />
    </form>
 </div> 
```

单击提交按钮后，我无法移动到视图 DisplayCustomer。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T15:39:27.907

试试这个：

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<dynamic>" %>    
<!DOCTYPE html>    
<html>   
  <head runat="server">
    <meta name="viewport" content="width=device-width" />
    <title>LoadCustomer</title>
  </head>

  <body>
    <div>
    <%using(Html.BeginForm("DisplayCustomer", "Customer", FormMethod.Post)){%>
      Welcome to Customer management System<br />
      Enter the below details <br />
      Customer ID :- <input type="text" name = "CuatomerID" /><br />
      Customer Name :- <input type="text" name = "CuatomerName" /><br />
      Customer Amount :- <input type="text"  name = "CuatomerAmount" /><br />
      <button type ="submit">"ClickHere"</button>        
    <%}%>
 </div> 
```

# c# - 将存储库模式、缓存和 Web 服务链接在一起

> ID：11861978
> 
> 赞同：3
> 
> 时间：2012-08-08T09:53:53.677
> 
> 标签：c#, web-services, design-patterns, caching, repository-pattern

我试图了解`Repository`在我的应用程序中实现它的模式。我在某种程度上被它困住了。

这是应用程序如何访问数据的简化算法：

1.  该应用程序第一次没有数据。它需要连接到网络服务来获取这些数据。因此，与 Web 服务交互的所有低级逻辑都将隐藏在`WebServiceRepository`类后面。从 Web 服务传递到应用程序的所有数据都将被缓存。

2.  下次当应用程序请求数据时，将在缓存中搜索此数据，然后再从 Web 服务请求它们。缓存将自身表示为一个数据库和 XML 文件，并将通过`CacheRepository`.

    缓存的数据可以处于三种状态：有效（可以显示给用户）、无效（旧数据无法显示）和部分有效（可以显示但必须尽快更新）。

    a）如果缓存的数据是有效的，那么在我们得到它们之后我们可以停止。

    b) 如果 chached 数据无效或部分有效，我们需要访问`WebServiceRepository`. 如果对 Web 服务的访问以成功结束，则请求的数据将被缓存，然后将显示给用户（我认为这必须作为对 的第二次调用来实现`CacheRepository`）。

    c) 所以数据访问的入口点是`CacheRepository`. 只有在没有完全有效的缓存时才会调用 Web 服务。

我不知道在哪里放置验证缓存的逻辑（有效/无效/部分有效）？在哪里拨打电话`WebServiceRepository`？我认为这个逻辑不能放在任何一个中`Repositories`，因为违反了 SOLID 的单一责任原则（SRP）。

我应该实现某种`RepositoryService`并将所有逻辑放入其中吗？或者也许有办法链接`WebServiceRepository`和`WebServiceRepository`？

实现它的模式和方法是什么？

另一个问题是如何从缓存中获取部分有效的数据，然后在一个方法的调用中请求 Web 服务？我认为使用代表和事件。还有其他方法吗？

请给个建议。链接上面列出的所有功能的正确方法是什么？

PS也许我描述的有点混乱。如果需要，我可以提供一些额外的说明。

PPS 下`CacheRepository`（和下`WebServiceRepository`）我的意思是一组存储库 - `CustomerCacheRepository`，`ProductCacheRepository`等等。感谢@hacktick 的评论。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T11:36:33.370

if your webservice gives you crud methods for different entities create a repository for every entityroot. if there are customers create a CustomerRepository. if there are documents with attachments as childs create a DocumentRepository that returns documents with attachments as a property.

a repository is only responsible for a specific type of entity (ie. customers or documents). repositories are not used for "cross cutting concerns" such as caching. (ie. your example of an CacheRepository)

inject (ie. StuctureMap) a IDataCache instance for every repository.

a call to Repository.GetAll() returns all entities for the current repository. every entity is registered in the cache. note the id of that object in the cache.

a call to Repository.FindById() checks the cache first for the id. if the object is valid return it.

notifications about invalidation of an object is routed to the cache. you could implement client-side invalidation or push messages from the server to the client for example via messagequeues.

information about the status whether an object is currently valid or not should not be stored in the entity object itself but rather only in the cache.

# php - Codeigniter 2x Firefox 会话

> ID：11861983
> 
> 赞同：7
> 
> 时间：2012-08-08T09:53:57.187
> 
> 标签：php, codeigniter

我在 Firefox 浏览器中的会话有问题，在 Chrome 和 IE 中一切正常 - 它可以正确保存会话，但 Firefox 没有。我已经尝试使用本机会话将会话保存在数据库中 - 在 FF 中它会保存它但再次无法正常工作，只是在登录到页面后它重定向就像我没有登录一样。它只在 FF 中执行此操作。我看到了其他类似的问题，从他们那里我看到了 Native session 类，但没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T12:16:52.697

对于同样的问题，我在 Controller 构造函数中使用了以下标头，它成功了。

```
header('P3P:CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T14:39:51.673

我在 codeigniter 上遇到了类似的问题，发生的事情是我的用户代理必须为 CI 文档告诉您创建的自定义 DB 字段使用许多字符。

尝试制作和更改表以更改 ci_sessions 上的 user_agent 字段，然后再次检查 firefox 是否有效。

```
ALTER TABLE `ci_sessions` MODIFY COLUMN `user_agent` VARCHAR(160) not null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-14T23:26:59.090

如果 CI 会话类不能仅与 Firefox 一起使用，那么这是一个 cookie 问题。在 Firefox 下为您的域名启用 cookie，如下所示

> 工具->选项->隐私->历史：对历史使用自定义设置；选中“接受 cookie”并将您的域添加到您的例外中，允许您的域 www.your_domain.com 就是这样；

此链接中针对不同 FF 版本的更多详细信息：

[http://www.wikihow.com/Enable-Cookies-in-Firefox](http://www.wikihow.com/Enable-Cookies-in-Firefox)

# c# - 具有单个值的枚举是否合适？

> ID：11861988
> 
> 赞同：4
> 
> 时间：2012-08-08T09:54:17.170
> 
> 标签：c#, enums

这是一个非常简单的问题，但我真的很想知道什么是好的做法。

我有一个包含日志记录子系统的系统。日志包含有关用户 ID 的信息。简化的日志记录是这样的：

```
log.RegisterEvent(eventType, userID, eventDetails); 
```

有些事件是系统事件，它们没有关联用户 ID。由于用户 ID 是正整数，我认为 0 表示该事件不参考用户：

```
log.RegisterEvent(eventType, 0, eventDetails); 
```

但是把 0 放在那里只是......不对。我想过使用枚举，例如：

```
enum UserID
{
    None = 0
} 
```

但是可以有一个只有一个值的枚举吗？使用静态常量更好吗？或者这是另一种更好的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T09:56:15.860

“用户 ID”对我来说听起来不像是一种自然的枚举。这不像是在全球范围内有一组自然有界的用户。

一个常数值会更有意义：

```
const long UnknownUserId = 0; 
```

在*某些*情况下，具有单个值的枚举是有意义的，但它几乎总是用于未来的扩展。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T09:56:06.220

最好使用常量 - 否则您必须在使用时强制转换枚举值，因为 API 确实需要一个数字。枚举用于封闭的值集，用户 ID 不属于此类别。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T12:16:41.200

我不喜欢您的枚举，因为大多数开发人员不会期望`(UserIDEnum)42`使用它，因为它不是枚举类型的“定义”值。

“魔术”常数的想法对我来说也不是很吸引人。

对于可空类型，即`int?`（也称为`Nullable<int>`），这似乎是一个明显的例子。大多数开发人员会理解，如果`int?`为 null（`HasValue`为 false），则表示没有用户 ID，如果为 42，则表示用户 ID。

所以将第二个参数更改为 type `int?`。调用将如下所示：

```
log.RegisterEvent(eventType, null, eventDetails);    // no user ID in this case
log.RegisterEvent(eventType, userID, eventDetails);  // variable userID is automatically "lifted" from int to Nullable<int> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T09:56:51.743

将用户变量声明为静态常量：

```
static const int NoneUserID = 0; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-08T09:58:19.007

更改日志记录子系统以定义不使用用户 ID 的重载。

在那个重载中，你可以只编码一个 0，因为它现在是唯一使用它的地方。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T09:56:05.043

是的，当那里没有多样性时，枚举有什么用。

# javascript - 如何以编程方式访问 chrome 分析

> ID：11861991
> 
> 赞同：12
> 
> 时间：2012-08-08T09:54:26.900
> 
> 标签：javascript, google-chrome, google-chrome-extension, profiling, google-chrome-devtools

寻找一些 chrome API（用于 chrome 扩展），让我以编程方式执行以下操作：- - 开始分析 - 结束分析 - 获取页面上所有 JS 所用时间的列表

我可以在 Firefox 中实现相同的效果：

```
jsd = DebuggerService.getService(jsdIDebuggerService)
// start the profiling as
jsd.flags |= COLLECT_PROFILE_DATA;

// stop the profilinf as
jsd.flags &= ~COLLECT_PROFILE_DATA;

// get the details of how much time each JS function took
jsd.enumerateScripts({enumerateScript: function(script)
{
// script object has timings detail
} 
```

甚至一些可以让我从开发人员工具栏中导出分析信息的 API 也会有所帮助

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-12T17:10:14.973

您可以使用以下代码以编程方式在 google chrome 中分析脚本

```
console.profile("MyProfile");
// Enter name of script here
console.profileEnd(); 
```

“MyProfile”是要创建的配置文件的名称。

资源：

[http://blog.codestars.eu/2011/profiling-with-webkit/](http://blog.codestars.eu/2011/profiling-with-webkit/)

`console.time()`您可以通过使用和的组合来获得执行函数/代码片段的时间`console.timeEnd()`

# mysql - SQL 语法在本地服务器上有效，但在我的实时服务器上无效？

> ID：11861993
> 
> 赞同：1
> 
> 时间：2012-08-08T09:54:34.500
> 
> 标签：mysql, where

如果另一个表中不存在 ID，我正在尝试运行 SQL 查询来更新表。继承人的查询：

```
UPDATE product
SET active = 0
WHERE id NOT IN (SELECT product_id FROM image); 
```

此查询在我的本地服务器上按预期工作（运行 apache/mysql）。但是在我的专用服务器（也运行 apache/mysql）上，它只返回这个：

```
Query OK, 0 rows affected (0.19 sec)
Rows matched: 0  Changed: 0  Warnings: 0 
```

但我知道它应该影响一些行。

我已经仔细检查了所有内容，但看不出为什么查询不能正确通过。有没有我错过的某种设置？

亲切的问候，丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:57:01.937

您是否有一些 product_id 为空的行？使用 NOT IN 时必须过滤掉这些：

```
UPDATE product
SET active = 0
WHERE id NOT IN (SELECT product_id FROM image WHERE product_id IS NOT NULL); 
```

原因是如果 y 包含一个值，`x NOT IN y`它只能是`false`或`NULL`但永远不会。`true``NULL`

* * *

您还可以使用其他方法之一来查找出现在一个表中但不在另一个表中的值。例如，使用 EXISTS：

```
UPDATE product
SET active = 0
WHERE NOT EXISTS (SELECT * FROM image WHERE product_id = product.id); 
```

这种方法在值方面没有相同的问题`NULL`。

# jquery - Json 到 jQuery 搜索

> ID：11861995
> 
> 赞同：0
> 
> 时间：2012-08-08T09:54:38.460
> 
> 标签：jquery, html, json

我有一个像下面这样的json

```
[
    {"name":"mynewname", "id" : "t2", "location" : "India"},
    {"name":"mynewname1", "id" : "t21", "location" : "China"},    
] 
```

我有很多像上面这样的json数据..

我需要上面`textbox`的`Search`数据..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T10:21:54.637

You can try this:

[http://jsfiddle.net/geektantra/DsF7J/3/](http://jsfiddle.net/geektantra/DsF7J/3/)

**NOTE:** I am using Regular expressions for doing a full-text search through the JSON. This could affect performance when the size of your JSON data increases.

# javascript - jquery - 单击时获取元素的属性。该元素包含内部 div，因此出现未定义的错误

> ID：11861996
> 
> 赞同：0
> 
> 时间：2012-08-08T09:54:42.710
> 
> 标签：javascript, jquery

我有这样的html代码：

```
<ul>
  <li k="5" id="l">
    <div>
        <div>
         Some Text
        </div>
    </div>   
  </li>
</ul> 
```

从上面的代码中，如果我在**li**标签中没有任何 div 或 span 或其他元素，那么 $(e.target).attr("k") 将给出正确的值。但是，由于它内部还有一些其他元素，所以当我单击该元素时，它会给出 undefined value 。解决办法是什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:59:43.470

我通过运行得到正确答案：

```
 $(function(){
     $("li").click(function(){
        alert($(this).attr("k"));                
     });
 });​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:06:05.770

这也可以：

```
$(e.target).closest("li").attr("k"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:57:05.140

看看[jQuery——`closest()`](http://api.jquery.com/closest/)它不依赖于直接的父级。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T09:58:35.150

这是由于事件冒泡而发生的。该事件实际上不是在其子/后代元素之一上触发，`li`而是在其一个子/后代元素上触发。因此，您实际上是在寻找它的`k`属性，而不是`li`.

当没有子元素时不会发生这种情况，因为没有事件冒泡的可能性 - 事件将始终仅由`li`.

最简单的方法是`this`在事件回调中使用而不是`evt.target`.

```
$('li').on('click', function() {
    var k = $(this).attr('k');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T10:09:32.903

属性可以通过以下方式获取

```
$(e.target).closest("li").attr("k"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T10:17:52.950

你也可以试试这个

```
$('li').('click', function() {
  var k = $(this).attr('k');
}); 
```