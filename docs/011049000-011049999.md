# StackOverflow 问答 11049000-11049999

# c# - 2179 端口发生了什么？

> ID：11049000
> 
> 赞同：3
> 
> 时间：2012-06-15T10:31:11.383
> 
> 标签：c#, wmi, hyper-v

有没有办法为我自己的 hyper-v 客户机编写控制台客户端？我不想使用 RDP 连接到访客。我想以与微软相同的方式来做这件事。

到目前为止我发现的是（如果我错了，请纠正我）：他们的客户端连接到端口 2179 上的主机。然后在端口 2179 上发生一些握手、元数据交换，客户端在某些 49xxx 端口上获取数据。

我不明白端口 2179 发生了什么？我应该寻找任何协议规范吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:50:24.207

一点点谷歌搜索`Hyper-V`并`2179`引导我到`vmconnect.exe`，一个用于连接到在 Hyper-V 服务器上运行的虚拟机的程序。

该工具被[声明](http://fawzi.wordpress.com/2008/12/06/virtual-machine-connection/)为使用远程桌面协议。

所以我想你可以使用[RDP API 本身](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383494(v=vs.85).aspx)（`mstscax.dll`）、[`Cassia`](http://code.google.com/p/cassia/)库（如[本](https://stackoverflow.com/a/2936051/266143)答案中所建议的）或[ActiveX 控件进行`AxMSTSCLib`](http://www.codeproject.com/Articles/43705/Remote-Desktop-using-C-NET)连接。

# android - android tabwidget 自定义

> ID：11049001
> 
> 赞同：0
> 
> 时间：2012-06-15T10:31:15.940
> 
> 标签：android, android-tabhost

我有这个自定义选项卡小部件.. 在我自定义它之前，默认情况下我在每个选项卡之间都有一个自定义分隔符..

尽管我有自定义背景，有没有办法让它仍然可见？

这是我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:drawable="@drawable/footer_overbg" android:state_pressed="true"/>
<item android:drawable="@drawable/footer_overbg" android:state_focused="true"/>
<item android:drawable="@drawable/footer_overbg" android:state_selected="true"/>    
<item android:drawable="@drawable/footer_bg"/>

</selector> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:11:28.370

如果我的想法是正确的，那么你需要这个

```
mTabHost.getTabWidget().setDividerDrawable(R.drawable.divider_vertical_dark); 
```

似乎您想要在每个选项卡之间设置一个分隔符。

# .net - Autofac 抛出 ObjectDisposedException

> ID：11049002
> 
> 赞同：1
> 
> 时间：2012-06-15T10:31:27.470
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-3, autofac

我最近将 Autofac 2.6.2 添加到我的一个 ASP.NET MVC 项目中。

我遇到了一个问题，当我想解决我的 WebDataContext 时，我有一个 ObjectDisposedException：

```
Instances cannot be resolved and nested lifetimes cannot be
created from this LifetimeScope as it has already been disposed. 
```

当我调用我的索引页面时，我的浏览器会发送许多请求以获取索引页面和所需的所有其他资源（css、js 等）。其中一个请求可以解析 IWebDataContext，而所有其他请求都会引发 ObjectDisposedException。

所以我的代码看起来像这样：

```
protected void Application_Start()
{
    MyContext.Initialize();
    DependencyResolver.SetResolver(new AutofacDependencyResolver(MyContext.Container));
    [...]
}

public class MyContext
{
    public static IContainer Container { get; set; }

    public static void Initialize()
    {
        ContainerBuilder container = new ContainerBuilder();
        IDependencyRegistrar registrar = new DependencyRegistrar();
        registrar.Register(container);
        MyContext.Container = container.Build();
    }

    public static IEngine Engine
    {
        get { return Singleton<IEngine>.Instance; }
    }
}

public class DependencyRegistrar : IDependencyRegistrar
{
    public void Register(object containerBuilder)
    {
        ContainerBuilder builder = (ContainerBuilder)containerBuilder;
        builder.RegisterControllers(Assembly.GetExecutingAssembly());
        builder.RegisterType<WebDataContext>().As<IWebDataContext>().InstancePerHttpRequest();
            [...]
} 
```

最后是我解决注册依赖项的方式：

```
public class MyEngine : IEngine
{
    public T Resolve<T>() where T : class
    {
        return DependencyResolver.Current.GetService<T>();
    }
} 
```

**我的想法是：一个线程处理了 WebDataContext 并且所有其他线程都无法再访问它。有人能告诉我我是否忘记了什么以及我的代码是否是线程安全的吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T14:36:56.753

我发现了问题，我在 Application_Error 事件中调用了 Resolve 方法，这是不可能的，因为 autofac 之前会处理它的资源！

# sql - 使用 BETWEEN 子句

> ID：11049003
> 
> 赞同：2
> 
> 时间：2012-06-15T10:31:28.373
> 
> 标签：sql, sql-server, tsql, sql-server-2000

每当您编写查询时需要过滤出一系列值上的行时，我应该使用`BETWEEN`子句还是`<=`and `>=`？

哪一个在性能上更好？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T10:34:12.463

两者都不。他们创建完全相同的执行计划。

我使用它们的时间不取决于性能，而是取决于数据。

如果数据是离散值，那么我使用`BETWEEN`...

*   `x BETWEEN 0 AND 9`

但是，如果数据是连续值，那么效果就不太好了……

*   `x BETWEEN 0.000 AND 9.999999999999999999`

相反，我使用`>= AND <`...

*   `x >= 0 AND x < 10`

然而，有趣的是，该`>= AND <`技术实际上适用于***连续***和离散数据类型。所以，总的来说，我很少使用`BETWEEN`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T12:08:18.083

此外，不要`BETWEEN`用于日期/时间范围查询。

下面的真正含义是什么？

```
BETWEEN '20120201' AND '20120229' 
```

有些人认为这意味着让我获取 2 月份的所有数据，包括 2 月 29 日的所有数据。以上被翻译成：

```
BETWEEN '20120201 00:00:00.000' AND '20120229 00:00:00.000' 
```

因此，如果在 29 日午夜之后的任何时间有数据，那么您的报告将是不完整的。

人们还试图变得聪明并选择一天的“结束”：

```
BETWEEN '00:00:00.000' AND '23:59:59.997' 
```

如果数据类型是`datetime`. 如果它是`smalldatetime`范围的末尾，则四舍五入，并且您可能会包含第二天的数据，而您并不打算这样做。如果是这样，`datetime2`您实际上可能会错过一天中最后 2 毫秒以上发生的一小部分数据。在大多数情况下，统计上不相关，但如果查询错误，则查询错误。

因此，对于日期范围查询，我始终强烈建议使用开放式范围，例如，在 2 月份报告时，该`WHERE`子句会说“在 2 月 1 日或之后，3 月 1 日之前”，如下所示：

```
WHERE date_col >= '20120201' AND date_col < '20120301' 
```

`BETWEEN`可以仅使用该`date`类型按预期工作，但我仍然更喜欢查询中的开放范围，因为稍后有人可能会更改该基础数据类型以允许它包含时间。

我在这里写了很多详细信息：

*   [BETWEEN 和魔鬼有什么共同点？](https://sqlblog.org/2011/10/19/what-do-between-and-the-devil-have-in-common)

# ruby - 超时不适用于 Windows 上的 IO

> ID：11049009
> 
> 赞同：0
> 
> 时间：2012-06-15T10:31:51.453
> 
> 标签：ruby

以下代码在 Ruby 1.9.3p194 (2012-04-20) [i386-mingw32] 中不会超时：

```
require 'timeout'
Timeout.timeout(1) { gets } 
```

我希望它能够工作，因为 Ruby 1.9 使用本机线程。这是预期的（或记录的）行为还是错误？在[文档中`Timeout`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/timeout/rdoc/Timeout.html)没有提到任何限制 wrt。阻塞 IO 什么的。

（根据评论，这似乎只是 Windows 版本的问题。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:45:00.920

这是当前 Ruby 1.9.3 for Windows 的一个错误，已在主干中修复。该修复已被移植到 1.9.3：[http](http://bugs.ruby-lang.org/issues/6661) ://bugs.ruby-lang.org/issues/6661 。

# vb.net - 缩小和连接脚本，我应该在本地保存 jQuery 还是在 Google 主机上保存并修改连接代码

> ID：11049010
> 
> 赞同：0
> 
> 时间：2012-06-15T10:31:52.863
> 
> 标签：vb.net, performance, concatenation, scriptmanager

很符合问题的标题，因为问题很长。

我一直在寻找提高网站和网络应用程序速度的方法。

昨晚无意间看到这篇文章：

[http://www.experts-exchange.com/Programming/Languages/.NET/ASP.NET/A_4334-Minify-and-Concatenate-Your-Scripts-and-Stylesheets.html](http://www.experts-exchange.com/Programming/Languages/.NET/ASP.NET/A_4334-Minify-and-Concatenate-Your-Scripts-and-Stylesheets.html)

今天早上我已经实现了代码，我很高兴地说，乍一看它似乎非常好。

唯一的障碍是它只能连接本地托管的脚本。我通常使用 Google 托管的 jQuery 版本，有时还会使用一些其他广泛使用的脚本。（鉴于很多用户无论如何都会缓存这个文件......我想）

我不完全确定连接代码在做什么，所以试图弄清楚如何修改它......或者......我应该只下载 jQuery 文件并在本地托管，然后它就可以工作了！

我可以在这里发布一些代码，但显然，有很多，所以我想我会先尝试获得一般意见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:00:10.277

IMO，不值得在 Google 托管的 jQuery 中进行聚合。这已经被聚合和缩小。只需专注于将此技术应用于您的服务器托管的脚本。如果尚未缓存，您的浏览器将并行加载它们。

# objective-c - clipToBounds 和 maskToBounds 性能问题

> ID：11049016
> 
> 赞同：9
> 
> 时间：2012-06-15T10:32:31.213
> 
> 标签：objective-c, ios, performance, cocoa-touch, uiview

我有 UIScrollView 和里面有 UIImageViews 的对象（UIView 组合）。一些 UIImageViews 有圆形边框（我用`myImageView.layer.masksToBounds = YES;`这个）。其他有矩形边框和部分图像（我`Clip subviews`为此使用 Interface Builder 中的属性）。

问题是我发现剪辑属性在滚动时会强烈影响性能：

对于 iPod touch（第 4 代）的分析结果：

*   启用剪辑属性（两者或其中之一）滚动时我有大约 30 fps
*   在禁用剪辑属性的情况下，我在滚动时拥有所有 60 fps

我真的需要将一些图像剪辑到圆形边界和其他矩形边界（以显示图像的一部分）。所以，这是我的问题：有什么方法可以提高性能？可能有低级的方法（`drawRect:`或其他方法），或者玩阿尔法掩蔽可能有用，或者我只是做错了什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-15T10:56:40.677

当您有图形密集型蒙版和事物时，一种简单而简单的提高性能（通常是显着）的方法是在该项目的图层上`shouldRasterize`设置：`YES`

```
#import <QuartzCore/QuartzCore.h>

// ...

view.layer.shouldRasterize = YES; 
```

这会将视图栅格化为缓冲区，因此不会不断地重新渲染。这将为每个视图占用额外的内存，因此您应该真正尝试在滚动时回收/重用视图，类似于表视图的方式。

为了在视网膜显示器上正确行为，您还需要为 设置适当的值`rasterizationScale`：

```
view.layer.rasterizationScale = view.window.screen.scale; // or [UIScreen mainScreen] 
```

我在这方面取得了巨大的成功，比如滚动照片画廊，每个项目都有圆角、阴影等。

# java - 转换活动屏幕时避免黑屏

> ID：11049018
> 
> 赞同：1
> 
> 时间：2012-06-15T10:32:39.550
> 
> 标签：java, android, android-layout

我有两个活动 A 和 B

A 开始 B 喜欢

```
 Intent i = new Intent();
        i.setClass(A.this, B.class);
        startActivity(i);
        overridePendingTransition(R.anim.right_slide_in, R.anim.down_slide_out);
        finish(); 
```

在哪里

R.anim.right_slide_in 是

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >
    <translate
       android:fromXDelta="+100%p"
       android:toXDelta="0"
       android:duration="700"
     />
</set> 
```

而 R.anim.down_slide_out 是

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
   <translate
      android:fromYDelta="0"
      android:toYDelta="+100%p"
      android:duration="700" />
</set> 
```

这工作很棒。B从右边滑来，A滑下来。

问题是在这个过渡期间。空白屏幕显示为整个应用程序的背景![看这里](../Images/c35b227a29a174b250c175aad203abf4.png)

如何避免这种情况？

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:38:08.513

尝试使用`<application android:theme="@style/MyTheme">`将属性设置为可绘制对象的应用程序主题（例如 ）`android:windowBackground`，例如：

```
<resources>

    <style name="MyTheme" parent="android:Theme">
        <item name="android:windowBackground">@drawable/app_background</item>
    </style>

</resources> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T04:44:43.350

就应用层而言，不可能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-25T16:52:46.577

试试这个。move_to_left.xml

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:fillAfter="true"
    android:interpolator="@android:anim/linear_interpolator" >

    <translate
        android:duration="800"
        android:fromXDelta="100%p"
        android:toXDelta="0%p" />

</set> 
```

move_to_right.xml

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:fillAfter="true"
    android:interpolator="@android:anim/linear_interpolator" >

    <translate
        android:duration="800"
        android:fromXDelta="0%p"
        android:toXDelta="-100%p" />

</set>

startActivity(recipeCategoriesIntent);
overridePendingTransition(R.anim.move_to_left, R.anim.move_to_right); 
```

# php - PHP 或 Javascript：检查是否设置了 cookie，如果是更改内容

> ID：11049019
> 
> 赞同：1
> 
> 时间：2012-06-15T10:32:40.960
> 
> 标签：php, javascript, html, cookies, set

我正在开发一个网站，其中在用户登录时设置了 cookie。在用户登录之前，一个 <li> 显示测试“客户端登录”。这很好，但我想要的是在他们登录时通过检查是否设置了 cookie 来更改内容。

IE：

**未登录：**

`<li><a href="#">Client Login</a></li>`

**登录：**

`<li><a href="#">Client Tools</a></li>`

我认为这可以通过 PHP 或 javascript 或任何东西来完成？

有人可以帮忙吗？

（对此相当陌生。）

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:41:44.957

您可能想阅读[这篇](http://www.w3schools.com/js/js_cookies.asp)文章。如果你想管理 cookie 客户端，你可以使用 javascript，我会推荐[jquery-cookie](https://github.com/carhartl/jquery-cookie) 我已经可以看到一些服务器端的响应。

关于使用 cookie 检测用户登录，你应该阅读[这篇文章](http://jaspan.com/improved_persistent_login_cookie_best_practice)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:35:55.553

尝试：

```
<?php
$is_login = isset($_COOKIE["is_login"])?$_COOKIE["is_login"]:'0';

if($is_login == 0){
    echo '<li><a href="#">Client Login</a></li>';
}
else{
    echo '<li><a href="#">Client Tools</a></li>';
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T10:35:40.413

你可以通过 PHP 这样做：

```
<?php if (isset($_COOKIE['loggedin']) && $_COOKIE['loggedin'] == "yes"): ?>
<li><a href="#">Client Tools</a></li>
<?php else: ?>
<li><a href="#">Client Login</a></li>
<?php endif; ?> 
```

登录时，您需要创建一个名为“loggedin”的cookie，其值为“yes”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T10:38:01.247

如果我得到你的问题，那么你会这样做，你需要 php`$_COKKEIE`来检查它

```
if(isset($_COOKIE)){
//your logic
} 
```

# html - 链接到 HTML 中的一行？

> ID：11049020
> 
> 赞同：1
> 
> 时间：2012-06-15T10:32:44.693
> 
> 标签：html, text, hyperlink

是否可以链接到 html 文件中的行号？我想将某人链接到网页上的一个非常大的文档的一部分，但整个内容都在一个标签中，因此不会分成具有我可以链接到的 ID 的部分。

[这](http://www.gamefaqs.com/pc/934972-spelling-jungle/faqs/44591)是我正在与之交谈的页面，我想链接到“LEVEL 46” 我可以这样做吗？

我会对另一种解决方法（例如搜索文本或任何东西）感到满意，我认为这可能会因为它位于各种包装器中而变得更加复杂，假设它只是一个普通的 .txt 文件，你能做到吗？

编辑：**我没有写网页我试图链接到其他人的一部分，所以我不能添加 ID 等**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T09:30:08.573

不，这似乎是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:35:34.303

```
<a href="#a-place-in-the-document></a>

...

<h1 id="a-place-in-the-document">There's a link to here!</h1> 
```

该链接将使页面跳转到具有指定 ID 的元素。

例如：`http://example.com#hello`将链接到`http://example.com`并立即转到 ID 为 的元素`hello`。

* * *

如果您没有 ID（例如在 gamefaqs 上的文本文件中），您需要提供一个搜索字符串，以便人们快速搜索并找到您需要的任何部分（例如`[LV46]`），并让您的读者去寻找它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T10:37:08.580

您需要将所有标题转换为锚标记。

因此，对于您的示例，链接将是：

```
 <a href="#Level46"> 
```

标题本身是：

```
 <h1 id="Level46">Level 46</h1> 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-14T17:13:31.857

如果它只是一个文本文件，或者是目录结构中的文本文件集合，则可以创建一个并行目录结构，以便人们可以浏览

```
http://pdssbn.astro.umd.edu/holdings/ 
```

作为

```
http://pdssbn.astro.umd.edu/byline/holdings/ 
```

并动态生成行号和/或锚点到各个行，即使其他非文本文件位于 /holdings/ 树下，使用像这样的 Apache HTTPd **AliasMatch**

```
AliasMatch /byline/holdings/.*[.](asc|cat|lbl|tab|txt) /path/cgi-bin/pds_byline.cgi 
```

和一个符号链接，例如假设你的树在 top/ 例如 top/holdings/ 下，

```
ln -s . .../top/byline 
```

和一个简单的脚本（上面的 cgi-bin/pds_byline.cgi）可以将文本文件即时转换为 HTML。[我在这里](https://github.com/drbitboy/www_byline)创建了一个 Git 存储库来做到这一点；[这是为http://pdssbn.astro.umd.edu/holdings/](http://pdssbn.astro.umd.edu/holdings/)下的行星数据系统 (PDS) 数据集配置的。

您当然需要访问 Apache HTTPd 配置文件 (/etc/httpd/conf/conf/ */* .conf) 来执行此操作，将

```
<Directory .../top/cgi-bin>
  AllowOverride All
</Directory> 
```

在 cgi-bin/ 中使用 .htaccess 文件的条目，以及上面的**AliasMatch**，至少。NB AliasMatch 无法进入 .htaccess 文件。

警告：这只会按行号创建锚点；如果文件随着时间的推移发生变化，那么指向这些行号的现有链接将被破坏；您当然可以做同样的事情，而不是寻找特定的文本字符串，如“46 级”并即时插入相关的锚点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-11T20:51:00.340

`<a name="destination" id="destination"></a>Destination anchors`

```
<a href="#destination">Destination anchors </a> 
```

资料来源： [http ://www.motive.co.nz/glossary/anchor.php#destination](http://www.motive.co.nz/glossary/anchor.php#destination)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-15T10:37:46.887

也许您可以为特定行定义一个锚点，例如，一个部分元素。然后你可以链接到那个锚点。

```
<section name"sec1">
<a href="sec1"> 
```

# sql - 避免 phonegap 数据库中的重复行

> ID：11049024
> 
> 赞同：0
> 
> 时间：2012-06-15T10:33:02.043
> 
> 标签：sql, database, cordova

我有一个单列数据库并像这样创建它

```
function populateDB(tx){
   tx.executeSql('CREATE TABLE IF NOT EXISTS RESULT(result, UNIQUE(result))');  
} 
```

但是，当我想将对象写入表中时，出现错误：

> 无法执行语句（19 约束失败）

仅当我将 NOT NULL 和 PRIMARY KEY 添加到设置时才会出现错误。没有它，它会一直在我的数据库中写入重复项（我在启动 phonegap iOS 应用程序时使用来自 Web 服务的数据填充数据库，所以我想在数据库级别捕获重复的行）

起初我只有“PRIMARY KEY”，因为错误说明了约束，我假设主键必须是“NOT NULL”，将它添加到代码中，我仍然得到同样的错误。

我该如何解决这个问题。提前致谢

**编辑**：也许知道我将字符串化的 JSON 对象写入结果列对您来说很重要。

**编辑**：我在这个函数中插入对象。基本上我是一一做的：

```
this.save = function(){
    db.transaction (function(transaction){
        object = $.toJSON(self);
        object = encodeURI(object);
        transaction.executeSql('INSERT INTO RESULT (result) VALUES ("'+object+'")');
        },
        errorCB, 
        successCB
    );
} 
```

**编辑**：我更新了我的设置表代码。错误不会发生在每一行，但对象实际上是唯一的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T06:38:24.123

“如果不存在”是这里的问题。当您在 SQLite 查询中使用“IF NOT EXISTS”或“REPLACE”、“IGNORE”等条件时，约束会失败。

假设，您正在尝试创建一个已经存在的表，然后约束（如果它已经存在，则不再创建该表）失败，因此查询失败（您实际上想要 - 您不想复制表吗？ ) 并为您提供错误约束失败。

您可能会在 INSERT 或 REPLACE、INSERT 或 IGNORE 等方面遇到类似的错误...

# magento - 如何获取 Fedex 测试跟踪号？

> ID：11049025
> 
> 赞同：40
> 
> 时间：2012-06-15T10:33:10.523
> 
> 标签：magento, fedex

我正在 Magento 网站上配置 FEDEX 运输。我通过登录测试 FEDEX 帐户获得了测试帐号、密码、API 密钥和仪表编号。我在 Magento 中配置了自己。看起来一切都很好。但我不知道如何测试是Track Order。

那么我在哪里可以获得运输方式的跟踪号？我应该随机输入还是如何获得？我尝试了一些论坛建议的号码。但是我在弹出窗口中遇到以下错误：

```
Tracking information is currently not available 
```

我还在`shipping_fedex`Magento 中检查了我的日志文件。在打印的数组中记录了一些错误代码。这就是我在下面给出的。

```
**ERROR log**

[result] => stdClass Object (
[HighestSeverity] => ERROR
[Notifications] => stdClass Object (
[Severity] => ERROR
[Source] => trck
[Code] => 6035
[Message] => Invalid tracking numbers. Please check the following numbers and resubmit.
[LocalizedMessage] => Invalid tracking numbers. Please check the following numbers and resubmit.
)
[Version] => stdClass Object (
[ServiceId] => trck
[Major] => 5
[Intermediate] => 0
[Minor] => 0
)
) 
```

联邦快递帮助：

> **我可以追踪哪些号码？**
> 
> 按追踪编号追踪：您一次最多可以输入 30 个追踪编号。您可以输入 FedEx Express、FedEx Express Freight、FedEx Ground、FedEx SmartPost、FedEx Freight 或 FedEx Custom Critical 追踪号码的任意组合。请确保每行仅输入一个跟踪号。

编辑：根据 Derek 的建议，我使用了“99999999999”。但我得到了以下回应。弹出仍然相同的错误。是什么意思`__pid =>2432`？

```
Array
(
    [request] => <?xml version="1.0" encoding="UTF-8"?>
<FDXTrack2Request xsi="http://www.w3.org/2001/XMLSchema-instance" noNamespaceSchemaLocation="FDXTrack2Request.xsd"><RequestHeader><AccountNumber>510087062</AccountNumber><MeterNumber>0</MeterNumber></RequestHeader><PackageIdentifier><Value>999999999999</Value></PackageIdentifier><DetailScans>1</DetailScans></FDXTrack2Request>

    [result] => 
    [__pid] => 2432
) 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-11-28T08:21:54.510

你的问题一点也不愚蠢。我投了赞成票。

联邦快递的文档很糟糕，并且没有提到在测试和投入生产之后如何使用他们的服务。他们的支持更糟。

当我在网上闲逛时，我发现一个页面提到了跟踪号 123456789012 作为测试号。[在将服务路径设置为https://wsbeta.fedex.com:443/web-services/track](https://wsbeta.fedex.com:443/web-services/track)时，将其与您的测试凭据（密钥、密码、帐号和仪表编号）一起使用，请求将返回您可以在此基础上构建的有效响应。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2014-11-21T23:00:24.440

以下是可在 FedEx 测试环境中使用的静态跟踪号列表：

```
449044304137821 = Shipment information sent to FedEx
149331877648230 = Tendered
020207021381215 = Picked Up
403934084723025 = Arrived at FedEx location
920241085725456 = At local FedEx facility
568838414941 = At destination sort facility
039813852990618 = Departed FedEx location
231300687629630 = On FedEx vehicle for delivery
797806677146 = International shipment release
377101283611590 = Customer not available or business closed
852426136339213 = Local Delivery Restriction
797615467620 = Incorrect Address
957794015041323 = Unable to Deliver
076288115212522 = Returned to Sender/Shipper
581190049992 = International Clearance delay
122816215025810 = Delivered
843119172384577 = Hold at Location
070358180009382 = Shipment Canceled 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-10-25T13:10:57.283

另外：123456789012

您也可以使用：111111111111

** 每个承运人（UPS、USPS 等）都有很多用于许多用例的跟踪号码，但 FedEx 没有......我觉得这很奇怪。

***另外...我猜联邦快递希望您即使在他们的测试环境中也使用真实的跟踪号码。这就是我测试多个用例的方式。

我希望这可以帮助任何人，我已经花了一段时间挖掘。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-08T01:54:11.437

这是我从开发人员文档中的代码示例中提取的一个很好的示例。

797843158299

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-27T23:22:13.820

当指向以下服务器端点时，上面的跟踪号码列表确实可以工作：

[https://wsbeta.fedex.com:443/web-services/track](https://wsbeta.fedex.com:443/web-services/track)

请注意，这些号码仅在 FedEx 的计划维护时段内不起作用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-05-11T21:09:56.210

在他们的网站上，他们列出了您可以使用的跟踪号码：

[https://www.fedex.com/en-us/developer/web-services/process.html#develop](https://www.fedex.com/en-us/developer/web-services/process.html#develop)

展开测试环境和模拟跟踪号码子标题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-11T05:44:15.170

您可以先尝试让船舶功能正常工作。这将为您提供可用于测试跟踪的跟踪编号。我是这样做的，它对我有用！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-28T14:52:01.470

We're trying to understand FEDEX tracking number testing too. I found this resource. But so far I'm not sure if the numbers work.

We'll update the answer later if we determine it helped or delete it if it does not: [https://www.fedex.com/us/developer/webhelp/ws/2019/US/index.htm#t=wsdvg%2FAppendix_F_Test_Server_Mock_Tracking_Numbers.htm](https://www.fedex.com/us/developer/webhelp/ws/2019/US/index.htm#t=wsdvg%2FAppendix_F_Test_Server_Mock_Tracking_Numbers.htm)

# powershell - 无法从 Powershell 命令（控制台）加载 .ps1 powershell 脚本

> ID：11049034
> 
> 赞同：0
> 
> 时间：2012-06-15T10:33:39.073
> 
> 标签：powershell

我陷入了这个奇怪的问题，我试图从 powershell 命令提示符处执行一个 powershell 脚本。但是我既没有收到任何错误，也没有加载脚本。

我有脚本`C:\temp\myFunction.ps1`（其中有一个方法`getMyName()`）

我打开 powershell 命令并导航到该目录并执行

```
./myFunction.ps1 
```

然后没有错误并返回提示中的下一行。但是当我尝试调用函数 getMyName - 我得到错误 getMyName is not recognized。

我已经设置了`Execution-Policy to Unrestricted`，我正在以管理员身份运行 powershell

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T10:36:26.140

尝试[点源](http://technet.microsoft.com/en-us/library/ee176949.aspx)您的脚本：

```
. .\myFunction.ps1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:45:06.953

这是Powershell脚本的基本问题。设置您实际保存文件的路径，然后执行 Powershell 脚本。还有一件事

```
1\. start your command window run as admin.
2\. set the Powershell script policy for execution. 
```

# sql - 带有 MSQL 事务复制和 CDC 的 Microsoft Dynamics 2011

> ID：11049036
> 
> 赞同：1
> 
> 时间：2012-06-15T10:33:45.690
> 
> 标签：sql, crm, microsoft-dynamics, transactional

我想知道是否有人建议将数据从一个数据库导入 Dynamics CRM？

我们建议使用 CDC 和事务复制。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-13T01:30:02.327

有无数种方法可以做到这一点。我最常用的方法是：
1\. 在 CRM 中创建一个自定义实体来存储数据
2\. 编写一个控制台应用程序
a. 查询源
B. 酌情清理入站数据
c. 连接到 CRM
d. 根据需要创建、更新、停用或删除实体
3\. 记录活动

对我来说最重要的步骤是“清理入站数据”和“记录活动”。因为我正在编写代码，所以我可以完全控制编写的内容和位置。使用一些导入实用程序通常会让我迟早感到沮丧。根据我编写自定义导入实用程序的经验，几乎总能得到回报。

话虽如此，有大量的代码和一些不错的第三方工具可用。你可以看看抄写员。

*使用 Scribe Insight Adapter for Dynamics CRM 2011 执行批量操作*
[http://www.powerobjects.com/blog/2013/08/20/performing-bulk-operations-scribe-insight-adapter-dynamics-crm-2011/](http://www.powerobjects.com/blog/2013/08/20/performing-bulk-operations-scribe-insight-adapter-dynamics-crm-2011/)

# python - 在 matplotlib 中调整边距

> ID：11049038
> 
> 赞同：5
> 
> 时间：2012-06-15T10:33:50.030
> 
> 标签：python, matplotlib

我试图最小化 1X2 图形周围的边距，该图形是两个堆叠的子图。我搜索了很多并想出了如下命令：

```
self.figure.subplots_adjust(left=0.01, bottom=0.01, top=0.99, right=0.99) 
```

这在顶部和子图之间留下了**很大的差距。**使用这些参数，更不用说理解它们是困难的（比如`ValueError: bottom cannot be >= top`）

![在此处输入图像描述](../Images/41b586436e25466c69f52aebfb1791b5.png)

* * *

我的问题：

**完全最小化**边距的命令是什么？

这些数字是什么意思，这遵循什么坐标系（这个坐标系的非标准百分比事物和原点）？这个坐标系之上的特殊规则是什么？

需要调用此命令的确切点在哪里？从实验中，我发现它在您创建子图后起作用。如果您在调整窗口大小后需要重复调​​用它并需要调整图形大小以适应内部怎么办？

调整布局的其他方法是什么，尤其是对于单个子图？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T13:24:33.570

它们在图形坐标中：http: [//matplotlib.sourceforge.net/users/transforms_tutorial.html](http://matplotlib.sourceforge.net/users/transforms_tutorial.html)

要消除子图之间的间隙，请[使用`wspace`和`hspace`关键字](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.subplots_adjust)`subplots_adjust`。

如果你想让事情自动调整，看看[`tight_layout`](http://matplotlib.sourceforge.net/users/tight_layout_guide.html)

[网格规范： http](http://matplotlib.sourceforge.net/users/gridspec.html) ://matplotlib.sourceforge.net/users/gridspec.html

# xpath - 如何在 BPEL 中使用 Xpath 复制数组

> ID：11049047
> 
> 赞同：1
> 
> 时间：2012-06-15T10:34:20.353
> 
> 标签：xpath, esb, wso2, bpel

我有如下服务响应数据：

```
<Employees>
 <employee>
   <empName>Z</empName>
 </employee>
<employee>
   <empName>Y</empName>
 </employee>
<employee>
   <empName>Z</empName>
 </employee>
 .....
</Employees> 
```

现在我希望将其复制到与下面相同结构中的另一个 BPEL 变量。

```
<EmployeesResponse>
 <employee>
   <empName>Z</empName>
 </employee>
<employee>
   <empName>Y</empName>
 </employee>
<employee>
   <empName>Z</empName>
 </employee>
 .....
</EmployeesResponse> 
```

我不确定我收到的数据量并希望全部复制。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:41:48.387

要从源变量中选择所有元素，请使用以下查询：

```
/Employees/emplyee 
```

要复制到您的目标，请使用以下其他查询：

```
/EmployeesResponse 
```

# c# - 使用最新的 Monodevelop 和 VS 2012 RC 共享代码时出现问题

> ID：11049049
> 
> 赞同：10
> 
> 时间：2012-06-15T10:34:30.057
> 
> 标签：c#, mono, xamarin.ios, monodevelop

使用最新的 Monodevelop 和 VS 2012 RC 共享代码时。我可以从运行 MonoDevelop 的 Mac 和运行最新 VS 2012 beta 的 Windows 7 PC 加载和使用 .sln 解决方案、.csproj 项目文件和所有代码文件。源代码在机器之间共享。

这真的很好......但是在某个阶段，当我尝试在 Mac 上的 MonoDevelop 下重新加载解决方案项目时，MonoDevelop 认为解决方案文件 .sln 是一个十六进制文件，并在窗口中加载并显示它的十六进制。它不再认为它是一个解决方案文件！

我注意到文件行以 0D 0A 终止，这对于 PC 是正确的。. 我知道 Mac 只使用 0D ......但它最初是这样的并且可以工作。内容对我来说很好！

如果我在 Mac MonoDevelop 上创建一个新的解决方案，然后将现有的 csproj 放入其中，它可以正常工作。直到没有……

有任何想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-15T11:32:49.193

The problem is that the VS SLN files now start with:

```
Microsoft Visual Studio Solution File, Format Version 12.00
# Visual Studio 2010 
```

Whereas they need to start with:

```
Microsoft Visual Studio Solution File, Format Version 11.00
# Visual Studio 2010 
```

I reported this to Xamarin - and they've already got a patch - [https://bugzilla.xamarin.com/show_bug.cgi?id=4919](https://bugzilla.xamarin.com/show_bug.cgi?id=4919)

Alternatively, just manually hack the files - that's what I do.

# perl - 如何使用 XML::Twig 显示祖先？

> ID：11049052
> 
> 赞同：2
> 
> 时间：2012-06-15T10:34:31.790
> 
> 标签：perl, perl-module, xml-twig, ancestor

我不知道如何显示一个元素的祖先或自我。

这是我在使用方法祖先_or_self() 时收到的错误消息： *Can't call method "print" without a package or object reference at xxxx*

```
#!/usr/bin/perl -w
use warnings;
use XML::Twig;

my $t= XML::Twig->new;
my $v= XML::Twig::Elt->new;

$v= $t->first_elt('[@id]');
$v->print;
print ("\n\n");
$v->ancestors_or_self->print; 
```

感谢您对 Perl XML::Twig 的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T03:07:35.110

`ancestors_or_self`返回一个列表——假设你想要元素的路径，你也不`->path`需要`->print`. 作为`->path` **返回**路径，您将必须执行以下操作：

```
#!/usr/bin/perl -w
use warnings;
use XML::Twig;

my $t= XML::Twig->new;
my $v= XML::Twig::Elt->new;

$v= $t->first_elt('[@id]');
print $v->path . "\n";
print ("\n\n");
print $_->path . "\n" foreach $v->ancestors_or_self; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T10:46:46.660

那是因为`ancestors_or_self`返回一个列表，你不能调用列表的方法。改用这个：

```
$_->print for $v->ancestors_or_self; 
```

# android - 我们可以使用 Android NDK 更改 Android 源代码吗？

> ID：11049057
> 
> 赞同：0
> 
> 时间：2012-06-15T10:34:47.817
> 
> 标签：android, android-ndk

我有一个要求，例如向 android 本机设置添加自定义设置（例如，当我们转到主页-> 设置-> 显示时，我们有屏幕超时、动画、自动旋转屏幕、亮度设置可用。但我想添加一个更多设置，如 auto-screentimeout there.i，ei 需要更改 android 的源代码..一些与 forked android consept 相关的东西）所以，这可能吗..？如果可以的话，我们可以使用 NDK 来解决这个问题......谢谢进步...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:42:08.440

Android NDK 用于用 C 或 C++ 编写**应用程序**代码。

您想要的是构建自己的 Android 固件版本；这是一个完全独立的问题。看看[这个](http://www.youtube.com/watch?v=1_H4AlQaNa0)作为初学者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:48:24.207

您可以下载 Android 源代码，然后创建自己的设置 APK。但是，它可能只会在您正在测试它的手机上运行，​​并且我假设您在使用不同的 Android 版本或设备制造商的一些修改时会遇到问题。

阅读更多关于如何开始的[http://source.android.com/ 。](http://source.android.com/)

或者，您可以从当前手机中提取设置 APK，使用 apktools 对其进行反编译，然后使用您的更改重新创建它。

阅读更多[http://code.google.com/p/android-apktool/](http://code.google.com/p/android-apktool/)

在这两种方式中，您都需要具有 root 访问权限才能安装新的 APK……并且可能需要自定义恢复，以便在您的修改崩溃时从 nandroid 备份中恢复！

# jquery - 如何使用 Jquery 读取元素的所有子元素

> ID：11049059
> 
> 赞同：1
> 
> 时间：2012-06-15T10:34:55.193
> 
> 标签：jquery, xml

我有一个如下的 XML 文件。如何使用 Jquery 读取所有元素。请注意，处理文件时我不知道子元素名称

> ```
> <Skills>
>   <Programming>Yes</Programming>
>   <Networking>No</Networking>
>   <ProjectMangement>Yes</ProjectMangement>
> </Skills>
> 
> $.ajax({
>             url: 'application_form.xml', 
>             dataType: "xml",
>             success: parse,
>             error: function(){alert("Error: Something went wrong");}
>         });
> 
> function parse(document){
>             $(document).find("Skills").each(function(i,e){
> 
>               //here i want to get the name of all the child elements
>              });
> 
> } 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:17:36.040

这对我来说很好：

```
var data = "<Skills><Programming>Yes</Programming><Networking>No</Networking><ProjectMangement>Yes</ProjectMangement></Skills>"

$(data).children(); 
```

这为您提供了一个 jQuery 元素数组。

然后，您可以使用`.nodeName`来获取标签的名称：

```
$(data).children()[0].tagName;  // => "PROGRAMMING" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:45:50.010

您可以选择根节点，然后遍历子集合。如果您期望更多级别的孩子，那么递归地做

```
$.fn.iterateChildren = function(fun){
    this.each(function(){
       if(fun(this)){
          this.iterateChildren(fun);
       }
    });
} 
```

您可以选择您的根并调用该函数

```
$(document).find("Skills").iterateChildren(function(){
    //do some stuff
    //return true if you wish to keep iterating the siblings of the current node
    //return false if you wish to end the iteration (equivalent to break in a for loop
}); 
```

我将它扩展为 $ 仅仅是因为它是节点操作/遍历。如果它是您在项目中经常使用的东西，我更愿意在其余的操作/遍历逻辑（即 jQuery）中找到它。（扩展 jQuery 存在一些问题，例如名称冲突）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T13:50:04.980

使用下面的粗体代码来解析 XML 的每个子元素

function parse(document){ $(document).find("Skills").each(function(i,e){

```
 //here i want to get the name of all the child elements
           **$(this).children().each(function () {                    
                 alert($(this).text());
             });**

         }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T10:38:52.727

使用此代码并根据您的要求进行编辑：

```
var xmlString = "<route><name>Lakeway</name><abrv>LAKE</abrv><eta><time>00:30</time>     <dest>MAIN</dest></eta></route>",
 xmlDoc = $.parseXML( xmlString ),
 $xml = $( xmlDoc ),
 $abrv = $xml.find( "abrv" ).text() == "LAKE" ? $xml.find( "abrv" ) : false;

 var time = $abrv.next().children("time").text();
 var dest = $abrv.next().children("dest").text();

 alert(time + " " + dest); 
```

# iphone - 在我的应用程序上的 iTunes 连接中找不到应用程序购买链接

> ID：11049061
> 
> 赞同：1
> 
> 时间：2012-06-15T10:35:00.517
> 
> 标签：iphone, ios, xcode, app-store-connect

我读到这篇文章[应用内购买“准备提交”，但不允许我提交，](https://stackoverflow.com/questions/6088560/in-app-purchase-ready-to-submit-but-wont-let-me-submit-it)我会在下面看到一个答案：

@Ran：我遇到了同样的问题。它不允许我将我的应用内购买提交到我之前不久上传的应用。我不得不拒绝二进制文件，然后按照以下说明在上传之前将 IAP 添加到应用程序版本。

前往 iTunes 连接

*   单击管理您的应用程序

*   点击应用

*   点击“查看详情”按钮

*   向下滚动，直到看到“应用内购买”部分

*   将您的应用内购买添加到该版本。

*   然后准备好您的应用以供上传。

*   完成这些步骤后，应用内购买应自动从“准备提交”更改为“等待审核”。

在此我正在执行步骤，但我被困在步骤：**向下滚动，直到看到“应用内购买”部分**

我找不到我的应用程序链接 找不到**InAppPurchase**链接

我看到在屏幕截图下面找到链接：

![在此处输入图像描述](../Images/b0421f00f8cf2ce8d4238bdbe4ce69ae.png)

如何在 iTunes 连接上的我的应用程序上找到**InAppPurchase链接..！**

请帮助我，非常感谢..！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:47:28.247

您可以在 Manage Application -> 打开您的应用程序中看到 InAppPurchase 链接，您会发现一些链接，如定价和一些如图所示。当且仅当您在 developer.apple.com 的应用程序包 id 中启用 InAppPurchase 时，这将起作用 ![在此处输入图像描述](../Images/be6f78e346661dc0218c026a9dadf64e.png)

如果您按查看详细信息 ![在此处输入图像描述](../Images/ad89162b60b3a9790a4fa314d7cb9276.png)

像这个按钮，这将进入描述页面，在那里你不会找到 InAppPurchase

您只能找到这些选项，因此请在页面之前检查。管理应用程序 - > 转到您的应用程序

![在此处输入图像描述](../Images/af366b1a407259617c17950d34d1c7c2.png)

# javascript - 在文本框中选择建议项目时的 jQuery 事件？

> ID：11049066
> 
> 赞同：11
> 
> 时间：2012-06-15T10:35:19.917
> 
> 标签：javascript, jquery, jquery-events

我想在用户键入时在每次修改文本框控件时运行一个函数。在大多数情况下，该事件`.keyup()`都很好。

但是，浏览器（如 Chrome 或 Firefox）可能会建议文本框控件的自动完成条目（可能是因为输入控件的 @name 或 @id 是已知的）。

**不幸的是，当“单击建议的条目”时，我无法触发以下任何事件。**（`.keyup()`用键盘选择时触发）

```
$('input#email')
  .click(function() { console.log('click'); })
  .keyup(function() { console.log('keyup'); })
  .keydown(function() { console.log('keydown'); })
  .change(function() { console.log('change'); })
  .focus(function() { console.log('focus'); })
  .blur(function() { console.log('blur'); }); 
```

尽可能避免使用`setInterval()`定期检查。

**有没有办法检测到这个“选择建议”事件？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-01-19T22:00:09.980

绑定`propertychange`事件：

```
$('input').bind('input propertychange', function() { 

    var input = this.value.trim();
    [...]   

}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T10:49:34.377

简短的回答是否定的，没有用于检测建议选择的事件。您可以尝试查看 DOM 突变观察者，但我不确定这些覆盖属性是否发生变化，而且到目前为止对该 API 的支持很少。

因此，如果您真的需要处理这种情况，那么我认为这`setInterval`是您唯一的选择。

编辑：3 年后，您可以`propertychange`在新接受的答案中使用 jQuery（我假设它在幕后使用突变观察者）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-15T14:50:19.923

替代解决方案禁用自动完成并处理其他事件，如 keyup、keydown 等

```
<input type="text" name="foo" autocomplete="off" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-10T00:09:14.407

更改事件似乎工作正常，但确实需要您点击离开

# asp.net - 将图像存储在数据库中并检索是否很好？

> ID：11049072
> 
> 赞同：0
> 
> 时间：2012-06-15T10:35:42.397
> 
> 标签：asp.net

> **可能重复：**
> [在数据库中存储图像 - 是还是不是？](https://stackoverflow.com/questions/3748/storing-images-in-db-yea-or-nay)

朋友们，

我需要在 DataList 中显示动态变化的图像。我所做的是将图像作为图像数据类型存储在数据库中并检索图像。将图像存储在数据库中的好技术吗？

仅供参考，用户可以上传图片。

问候， 阿比

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T10:38:47.330

答案是 - 这取决于......已经完成了研究（[http://research.microsoft.com/pubs/64525/tr-2006-45.pdf](http://research.microsoft.com/pubs/64525/tr-2006-45.pdf)），这些研究基本上已经得出结论，如果对象平均大于 1 兆字节， NTFS 与 SQL Server 相比具有明显的优势。如果对象小于 256 KB，则数据库具有明显优势。在此范围内，这取决于工作负载的写入密集程度以及系统中典型副本的存储年龄。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:39:28.563

如果您存储路径等，您必须解决的问题是保持图像的参照完整性。如果有人移动文件，如果有人上传一个同名的新文件怎么办（我建议对上传文件进行重命名以反映某种键，而不是保留其原始名称 bob.jpg）。您需要查看对目录等进行分段以保持列表的合理性。查找图像可能比将它们也存储在数据库中更难。

然而，从好的方面来说，如果你不把它们都塞进你的数据库中，你可以根据你的图像在不同的服务器、子域、云等上的分布来形成一个 CDN

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T10:39:54.397

取决于图像的大小和您使用的数据库。

对于 SQL Server，如果它们大于 1MB 并且您不使用 NTFS 文件流来存储 BLOB 字段，那将是一个非常糟糕的主意。参见例如[http://www.simple-talk.com/sql/learn-sql-server/an-introduction-to-sql-server-filestream/](http://www.simple-talk.com/sql/learn-sql-server/an-introduction-to-sql-server-filestream/)

如果您有像 Couch DB 这样的面向文档的数据库，那可能没问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T10:40:04.303

我会将它们作为物理文件存储在服务器上，但将文件路径存储在数据库中，而不是实际图像。并根据位置存储到数据库中搜索文件。将图像存储在数据库中会随着时间的推移显着增加其大小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T10:42:35.053

如果您需要跨多个 Web 服务器扩展您的站点，将它们存储在数据库中也很有用。

如果它们是静态的，则没有用，因为它们可以与您的站点一起部署，但是像头像这样的东西通常更好地存储在数据库中，因此它们可供所有集群成员使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-15T10:36:48.167

我会将它们作为物理文件存储在服务器上，但将文件路径存储在数据库中，而不是实际图像。将图像存储在数据库中会随着时间的推移显着增加其大小。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-15T10:38:16.107

图像大小会不必要地增加您的数据库大小，因此存储它不是一个好习惯，而是将文件路径存储在您的数据库中，这不是那么大。如果您有一些强烈的要求或用例，应该在数据库中存储图像。

# android - android中具有表格或列表布局的快速操作对话框

> ID：11049073
> 
> 赞同：0
> 
> 时间：2012-06-15T10:35:45.897
> 
> 标签：android, dialog, quickaction

我想在android中显示这样的弹出窗口。快速操作对话框是实现此功能的方法，但如何在快速操作对话框中以图像形式显示列表或表格视图。或任何其他方式来实现相同的 UI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T07:27:47.220

我使用带有透明主题添加的活动来做到这一点

```
android:theme="@android:style/Theme.Translucent.NoTitleBar" 
```

到清单文件并在活动外部单击后将其关闭。我在该活动中使用了以下代码

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Make us non-modal, so that others can receive touch events.
    getWindow().setFlags(LayoutParams.FLAG_NOT_TOUCH_MODAL, LayoutParams.FLAG_NOT_TOUCH_MODAL);

    // ...but notify us that it happened.
    getWindow().setFlags(LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH, LayoutParams.FLAG_WATCH_OUTSIDE_TOUCH);

    // Note that flag changes must happen *before* the content view is set.
    setContentView(R.layout.settings_table);
}    

@Override
public boolean onTouchEvent(MotionEvent event) {
    this.finish ();
} 
```

# php - 数据库搜索中的语言特殊字符

> ID：11049075
> 
> 赞同：1
> 
> 时间：2012-06-15T10:35:51.197
> 
> 标签：php, zend-framework, utf-8, multilingual

我在一个多语言网站（目前只有英语和土耳其语）中进行搜索。

只要访问者使用正确的语言字符，搜索出来就会得到正确的结果。

例如

*   对于单词“Moudle”（英语），类似 sql 查询的子句就像“%Moudle%”，它工作正常。
*   对于单词“modül”（土耳其语），类似 sql 的子句就像“%modül%”，它工作正常。

我的问题是，对于土耳其语，如果我使用“modul”而不是“modül”，它就不起作用。只是因为“ü”。

**即使我使用英语中相同的对应字符而不是原始字符，有什么方法可以从数据库中获取结果？**

* * *

表的结构是

```
CREATE TABLE IF NOT EXISTS post_lang (
  id bigint(20) NOT NULL AUTO_INCREMENT,
  post_id bigint(20) NOT NULL,
  ln enum('en','tr') NOT NULL,
  title text CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (id)
);
INSERT INTO post_lang (id, post_id, ln, title, content, doc) VALUES
(1, 1, 'en', 'How can I create a new module?'),
(2, 1, 'tr', 'NasÄ±l yeni bir modül yaratÄ±rÄ±m?'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T10:47:06.120

您可以创建一个字段，说明`normalizedText`您将只存储不带重音符号的字符，遵循您的逻辑。

因此，您可以使用不包含重音符号且结果一致的字符串在您的 normalizedText 上运行搜索。

您可以使用方便的 php wordpress 函数 ( [remove_accents](https://stackoverflow.com/a/3542850/496223) ) 将重音字符转换为非重音字符

# java - Parcelable：双数组、日历和位图

> ID：11049076
> 
> 赞同：2
> 
> 时间：2012-06-15T10:35:54.633
> 
> 标签：java, arrays, calendar, double, drawable

我有一个客户对象类，我需要将它从一个活动传递到另一个活动。我使用 parcelable 来帮助我做到这一点，但我遇到了一些问题

# 1）双数组变量#（现在的主要问题）

我可以`writeDoubleArray`但我不能`readDoubleArray`

这条线`in.readDoubleArray();`用红色下划线表示：

> “ `readDoubleArray(double[])`Parcel 类型中的方法不适用于参数 ()”

# 2) 日历变量

我不知道用什么函数来写日历所以我只是试过`writeValue` 我没有测试它是否正常工作。我需要这方面的建议

# 3) 可绘制变量

我的对象中有一个可绘制属性，我已经搜索了一个解决方案并使用了它，但当前的那个说它已被折旧。所以我也不确定它是否会起作用。我也需要这方面的建议

### 我希望你能帮助我。谢谢！

* * *

我的代码：

* * *

```
 //My attributes
public class Event {

    public int eventID;
    public String eventName;
    public String eventDesc;
    public String category;
    public String vendor;
    public String venue;
    public Calendar startDateTime;
    public Calendar endDateTime;
    public Drawable eventImage;
    public double[] price;
    public double lat;
    public double lng;

           ....
           //Other constructors here
           ....

     public void writeToParcel(Parcel dest, int flags) {
                    dest.writeInt(eventID);
                    dest.writeString(eventName);
                    dest.writeString(eventDesc);
                    dest.writeString(category);
                    dest.writeString(vendor);
                    dest.writeString(venue);
                    dest.writeValue(startDateTime);
                    dest.writeValue(endDateTime);
                    Bitmap bitmap = (Bitmap) ((BitmapDrawable) eventImage).getBitmap();
                    dest.writeParcelable(bitmap,flags);
                    dest.writeDoubleArray(price);
                    dest.writeDouble(lat);
                    dest.writeDouble(lng);
                }

    private void readFromParcel(Parcel in) { 

                    eventID = in.readInt();
                    eventName = in.readString();
                    eventDesc = in.readString();
                    category = in.readString();
                    vendor = in.readString();
                    venue = in.readString();
                    startDateTime = (Calendar) in.readValue(getClass().getClassLoader());
                    endDateTime = (Calendar) in.readValue(getClass().getClassLoader());
                    Bitmap bitmap= (Bitmap)in.readParcelable(getClass().getClassLoader());
                    eventImage = new BitmapDrawable(bitmap);
                    price = in.readDoubleArray();
                    lat = in.readDouble();
                    lng = in.readDouble();
                } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T11:39:43.230

您正在尝试使用需要参数的方法读取双精度数组。使用时，`readDoubleArray(double[])`您需要在调用作为参数传入该数组的方法之前创建数组（足够长）。

当您不想自己创建数组时，请使用`in.createDoubleArray()`而不是`in.readDoubleArray(double[])`.

对于 Calendar 对象，您可以使用`Parcel.writeSerializable(Serializable)`- 方法，因为 Calendar 类实现了 Serializable 接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-12T12:11:21.770

用于读取双数组和日历

```
private double[] mDoubleArray;
private Calendar mCalendar;

private void readFromParcel(Parcel source) {
mDoubleArray= new double[source.readDouble()];
Calendar instance = Calendar.getInstance();
instance.setTimeInMillis(source.readLong());
mGroupKey = instance;
}

    @Override
public void writeToParcel(Parcel dest, int flags) {
dest.writeDoubleArray(mDoubleArray == null || mDoubleArray.length == 0 ? new double[] {} : mDoubleArray);  
dest.writeLong(mCalendar.getTimeInMillis());

} 
```

# javascript - 提交后将焦点设置在输入元素上

> ID：11049079
> 
> 赞同：2
> 
> 时间：2012-06-15T10:36:03.423
> 
> 标签：javascript, jquery, kendo-ui

我有一个带有一些输入字段的表单。我正在使用 tabStrip KendoUI 小部件对输入字段进行分组。我正在使用 Kendo 验证器，提交表单时会触发一些错误消息。问题是，如果带有错误消息的输入字段位于不同的选项卡上，那么当前选择的用户将看不到它。我想要完成的是当表单被验证时，包含第一个输入字段的选项卡，其中包含要选择的错误消息，并且焦点位于该输入字段上。这是一些示例代码：

```
<script type="text/javascript">
    $("#tabStrip").kendoTabStrip();
</script>

<div id="tabStrip">
    <ul>
        <li class="k-state-active">Master Info</li>
        <li>Developer Info</li>
    </ul>
     <div id="tabStrip-1">
         <div>
            <label for="folderName" class="required">Folder Name:</label>
            <input type="text" id="folderName" name="folderName"  required />
            <span class="k-invalid-msg" data-for="folderName"></span>
        </div>
        <div>
            <label for="afk">Afk:</label>
            <input type="text" id="afk" name="afk" data-bind = "value: Afk" />
        </div>
     </div>
     <div id="tabStrip-2">
         <div>
            <label for="updateFolder" class="required">Update Folder:</label>
            <input type="text" id="Text1" name="updateFolder" class="k-input k-invalid" required />
            <span class="k-invalid-msg" data-for="updateFolder"></span>
        </div>
        <div>
            <label for="age">Age:</label>
            <input type="text" id="age" name="age" class="k-input k-invalid" data-bind = "value: Age" />
        </div>
     </div>
</div> 
```

提交后，表单验证被触发，我发现第一个选项卡包含带有错误消息的输入。但是将焦点设置在带有错误消息的第一个元素上不起作用。我怀疑提交后输入元素尚未加载。这是js代码：

```
if (!omega.validatable.validate()) {
            //Select all the tab strips
            tabs = $("#tabStrip").find('div[id^=tabStrip]');

            var tabStrip = $("#tabStrip").data("kendoTabStrip");
            //Loop through the tab strips looking for an input containing the error class
            for (var i = 0; i < tabs.length; i += 1) {
                if ($(tabs[i]).find('input[class~=k-invalid]').length > 0) {

                    tabStrip.select(i);

                    // Set focus on the first input element with error message
                    $('input.k-input.k-invalid:first').focus();
                    break;
                }
            }
            return false;
        } 
```

使用

```
 $(document).ready(function () {
    $('input.k-input.k-invalid:first').focus();
 }); 
```

在这一点上也无济于事。请帮忙。谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:45:03.163

这应该监听发生的任何提交

```
$(body).on('submit',null,function() {
    $('input.k-input.k-invalid:first').focus();
}); 
```

或更具体的用途。

```
$('#yourForm').submit(function() {
   $('input.k-input.k-invalid:first').focus();
}); 
```

还将您的输入包装在`<form></form>`orsubmit 中不会触发。

**更新**

由于您的表单分布在单独的选项卡中，因此您需要将整个内容包装在表单标签中。

```
<form id="yourForm" action="submit.php"> //I will discuss action below    
<div id="tabStrip">
        <ul>
            <li class="k-state-active">Master Info</li>
            <li>Developer Info</li>
        </ul>
         <div id="tabStrip-1">
             <div>
                <label for="folderName" class="required">Folder Name:</label>
                <input type="text" id="folderName" name="folderName"  required />
                <span class="k-invalid-msg" data-for="folderName"></span>
            </div>
            <div>
                <label for="afk">Afk:</label>
                <input type="text" id="afk" name="afk" data-bind = "value: Afk" />
            </div>
         </div>
         <div id="tabStrip-2">
             <div>
                <label for="updateFolder" class="required">Update Folder:</label>
                <input type="text" id="Text1" name="updateFolder" class="k-input k-invalid" required />
                <span class="k-invalid-msg" data-for="updateFolder"></span>
            </div>
            <div>
                <label for="age">Age:</label>
                <input type="text" id="age" name="age" class="k-input k-invalid" data-bind = "value: Age" />
            </div>
         </div>
    </div> 
</form> 
```

这将对按下的表单按钮做出反应，并确保文本框中的数据也被保留。

如果此静态帖子（即您的 php 将返回一个新页面，则需要 action 属性，但是您也可以将其设为 ajax 帖子，这意味着您将离开该页面。

```
$('#yourForm').submit(function() {
   $.post('submit.php',$(this).serialize(),function() {
       $('input.k-input.k-invalid:first').focus();
   });

   e.preventDefault(); // stop it from executing the action
}); 
```

现在它将正常发布表单并在返回时将焦点设置在输入上......但是由于它们位于不同的选项卡中，您可能还需要切换回文本框选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:48:20.257

也许您需要首先取消关注其他元素，例如：

```
$("input").blur(`); 
```

比

```
$('input.k-input.k-invalid:first').focus(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T10:49:32.083

尝试这个

```
function pageload() {
    $('#ControlName').focus();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-12T20:35:11.447

实际上有一个非常简单的聚焦解决方案。转到输入元素并键入“自动对焦”。就是这样。

```
<input type="text" id="folderName" name="folderName" autofocus required> 
```

# opencv - 使用 SURF 在检测到的对象周围绘制矩形

> ID：11049081
> 
> 赞同：5
> 
> 时间：2012-06-15T10:36:11.403
> 
> 标签：opencv, surf, object-detection, homography

我正在尝试从以下涉及冲浪检测器的代码中检测对象，我不想绘制匹配项，我想在检测到的对象周围绘制一个矩形，但不知何故我无法获得正确的 Homography，请任何人指出在哪里我错了。

```
#include <stdio.h>
#include <iostream>
#include "opencv2/core/core.hpp"
#include "opencv2/features2d/features2d.hpp"
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/calib3d/calib3d.hpp"

using namespace cv;

int main()
{
    Mat object = imread( "sample.jpeg", CV_LOAD_IMAGE_GRAYSCALE );

    if( !object.data )
    {
        std::cout<< "Error reading object " << std::endl;
        return -1;
    }

    //Detect the keypoints using SURF Detector
    int minHessian = 500;

    SurfFeatureDetector detector( minHessian );
    std::vector<KeyPoint> kp_object;

    detector.detect( object, kp_object );

    //Calculate descriptors (feature vectors)
    SurfDescriptorExtractor extractor;
    Mat des_object;

    extractor.compute( object, kp_object, des_object );

    FlannBasedMatcher matcher;

    VideoCapture cap(0);

    namedWindow("Good Matches",0);
    cvResizeWindow("Good Matches",800,800);

    std::vector<Point2f> obj_corners(4);

    //Get the corners from the object
    obj_corners[0] = (cvPoint(0,0));
    obj_corners[1] = (cvPoint(object.cols,0));
    obj_corners[2] = (cvPoint(object.cols,object.rows));
    obj_corners[3] = (cvPoint(0, object.rows));

    char key = 'a';
    int framecount = 0;
    while (key != 27)
    {
        Mat frame;
        cap >> frame;

        if (framecount < 5)
        {
            framecount++;
            continue;
        }

        Mat des_image, img_matches;
        std::vector<KeyPoint> kp_image;
        std::vector<vector<DMatch > > matches;
        std::vector<DMatch > good_matches;
        std::vector<Point2f> obj;
        std::vector<Point2f> scene;
        std::vector<Point2f> scene_corners(4);
        Mat H;
        Mat image;

        cvtColor(frame, image, CV_RGB2GRAY);

        detector.detect( image, kp_image );
       extractor.compute( image, kp_image, des_image );

        matcher.knnMatch(des_object, des_image, matches, 2);

       for(int i = 0; i < min(des_image.rows-1,(int) matches.size()); i++) //THIS LOOP IS SENSITIVE TO SEGFAULTS
      {
            if((matches[i][0].distance < 0.6*(matches[i][1].distance)) && ((int) matches[i].size()<=2 && (int) matches[i].size()>0))
         {
              good_matches.push_back(matches[i][0]);
            }
       }

        //Draw only "good" matches
     //  drawMatches( object, kp_object, image, kp_image, good_matches, img_matches, Scalar::all(-1), Scalar::all(-1), vector<char>(),DrawMatchesFlags::NOT_DRAW_SINGLE_POINTS);

        if (good_matches.size() >= 4)
        {
            for( int i = 0; i < good_matches.size(); i++ )
            {
                //Get the keypoints from the good matches
                obj.push_back( kp_object[ good_matches[i].queryIdx ].pt );
                scene.push_back( kp_image[ good_matches[i].trainIdx ].pt );
           }

            H = findHomography( obj, scene, CV_RANSAC );

            perspectiveTransform( obj_corners, scene_corners, H);

            //Draw lines between the corners (the mapped object in the scene image )
            line( image, scene_corners[0] + Point2f( object.cols, 0), scene_corners[1] + Point2f( object.cols, 0), Scalar(0, 255, 0), 4 );
            line( image, scene_corners[1] + Point2f( object.cols, 0), scene_corners[2] + Point2f( object.cols, 0), Scalar( 0, 255, 0), 4 );
            line( image, scene_corners[2] + Point2f( object.cols, 0), scene_corners[3] + Point2f( object.cols, 0), Scalar( 0, 255, 0), 4 );
            line( image, scene_corners[3] + Point2f( object.cols, 0), scene_corners[0] + Point2f( object.cols, 0), Scalar( 0, 255, 0), 4 );
        }

        //Show detected matches
        imshow( "Good Matches", image );

        key = waitKey(1);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T09:46:11.280

如果您想在检测到的对象周围看到两个图像的边界矩形到第二个图像，您需要在绘制线条时使用**img_matches**数组而不是**图像。**

如果您只想看到带有标记对象的图像而不是一对图像（正如您通过在**image**中画线定义的那样），您只需将代码更改为：

`line( image, scene_corners[0], scene_corners[1], Scalar(0, 255, 0), 4 );`

`line( image, scene_corners[1], scene_corners[2], Scalar( 0, 255, 0), 4 );`

`line( image, scene_corners[2], scene_corners[3], Scalar( 0, 255, 0), 4 );`

`line( image, scene_corners[3], scene_corners[0], Scalar( 0, 255, 0), 4 );`

并在新窗口中显示图像

`imshow( "Result", image);`

# scala - 如何在 scala 中创建 curried 匿名函数？

> ID：11049085
> 
> 赞同：11
> 
> 时间：2012-06-15T10:36:28.907
> 
> 标签：scala, anonymous-function, currying

如何在 Scala 中创建匿名和柯里化函数？以下两个失败：

```
scala> (x:Int)(y:Int) => x*y
<console>:1: error: not a legal formal parameter
       (x:Int)(y:Int) => x*y
              ^

scala> ((x:Int)(y:Int)) => x*y
<console>:1: error: not a legal formal parameter
       ((x:Int)(y:Int)) => x*y
               ^ 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-15T10:45:39.670

要创建一个 curried 函数，请将其编写为多个函数（实际上就是这种情况；-)）。

```
scala> (x: Int) => (y: Int) => x*y
res2: Int => Int => Int = <function1> 
```

这意味着你有一个从 Int 到一个从 Int 到 Int 的函数。

```
scala> res2(3)
res3: Int => Int = <function1> 
```

或者你可以这样写：

```
scala> val f: Int => Int => Int = x => y => x*y
f: Int => Int => Int = <function1> 
```

# python - Scrapy没有按顺序抓取后续页面

> ID：11049088
> 
> 赞同：3
> 
> 时间：2012-06-15T10:36:44.583
> 
> 标签：python, web-crawler, scrapy

我正在编写一个爬虫来从网站获取项目的名称。该网站每页有 25 个项目和多个页面（某些项目类型为 200 个）。

这是代码：

```
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.selector import HtmlXPathSelector
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from lonelyplanet.items import LonelyplanetItem

class LonelyplanetSpider(CrawlSpider):
    name = "lonelyplanetItemName_spider"
    allowed_domains = ["lonelyplanet.com"]
    def start_requests(self):
        for i in xrange(8):
            yield self.make_requests_from_url("http://www.lonelyplanet.com/europe/sights?page=%d" % i)

def parse(self, response):
    hxs = HtmlXPathSelector(response)
    sites = hxs.select('//h2')
    items = []
    for site in sites:
        item = LonelyplanetItem()
        item['name'] = site.select('a[@class="targetUrl"]/text()').extract()
        items.append(item)
    return items 
```

当我运行爬虫并以 csv 格式存储数据时，数据未按顺序存储，即 - 第 2 页数据存储在第 1 页之前或第 3 页存储在第 2 页之前，类似地。有时在存储特定页面的所有数据之前，另一个页面的数据会进入，并且前一页面的其余数据会再次存储。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T10:44:57.633

scrapy 是一个异步框架。它使用非阻塞 IO，因此在开始下一个请求之前它不会等待请求完成。

而且由于一次可以发出多个请求，因此不可能知道该`parse()`方法获取响应的确切顺序。

我的观点是，scrapy 并不是要按特定顺序提取数据。如果你绝对需要保持顺序，这里有一些想法： [按顺序抓取 URL](https://stackoverflow.com/questions/6566322/scrapy-crawl-urls-in-order/)

# c# - 从文本到表格的 C# .net 数据挖掘

> ID：11049096
> 
> 赞同：1
> 
> 时间：2012-06-15T10:37:13.897
> 
> 标签：c#, .net, regex, database, string

以前我们使用以下格式获取邮件数据；我们必须从邮件的文本（正文）中提取重要的数据部分并将其放在一个表格中。

```
 type         date               size 
```

* * *

```
weekly    04/05/2012 16.03.03     388 
```

我首先通过一个数组来捕获这样的值：

```
string[] orderOfValues = new string[3];
orderOfValues[0] = "TYPE";
orderOfValues[1] = "DATE";
orderOfValues[2] = "SIZE"; 
```

然后在字典中

```
sdValues = new StringDictionary(); 
```

然后通过拆分提取字段；

```
sdValues.Add("TYPE", field1);
sdValues.Add("DATE", field2);
sdValues.Add("SIZE", field3); 
```

* * *

现在上游已更改数据以发送多行。

```
 type         date               size 
```

* * *

```
weekly    04/05/2012 16.03.03     388
daily     04/07/2012 17.03.03     14
weekly    04/08/2012 19.03.03     643 
```

由于行数现在是动态的，请建议如何继续

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:54:58.543

好的，所以你拿那个文件，把它分成几个字段，然后写出用 | 分隔的字段。

在我看来，您需要遍历每个输入行并执行以下操作：

```
String[] parts = inputLine.Split(new char[] {' '}, StringSplitOptions.RemoveEmptyEntries);
String outputLine = String.Join("|", parts); 
```

将 outputLines 写入您的平面文件。你不需要字典。

# objective-c - XCode OAuth 请求 access_token 调用“401 3-> HTTP/1.1 401 需要授权”

> ID：11049097
> 
> 赞同：1
> 
> 时间：2012-06-15T10:37:20.577
> 
> 标签：objective-c, xcode, magento, oauth

我已经设法进入 Magento 实现的 OAuth 协议的第三部分

[http://www.magentocommerce.com/api/rest/authentication/oauth_authentication.html](http://www.magentocommerce.com/api/rest/authentication/oauth_authentication.html)

首先，请求令牌调用返回一个令牌，我在 UIWebView 中向用户展示授权对话框，并在用户按下“授权”后提取令牌/验证器。

我用这些参数调用 access_token url

```
OAuth realm="", 
oauth_timestamp="1339756083",
oauth_nonce="d1dc184d236756c42210b746a887edb5bd69cf44", 
oauth_signature_method="HMAC-SHA1", 
oauth_consumer_key="{censored}", 
oauth_version="1.0", 
oauth_token="912i72lcu6vzlwk6a3vdj4a3sstbdzqp",
oauth_token_secret="t5cg9qlykkk9411iv0rbul0gnw9fsa0m", 
oauth_verifier="9vu02kbymodo63pve091otffvy53rhlf",
oauth_signature="fDwWGeJhatIX6kK4nb%2Bagp4C%2FxU%3D" 
```

这是我的 Obj-C 代码的一部分

```
NSMutableArray* values = [[NSMutableArray alloc]initWithObjects:self.requestToken,self.requestSecret,verifier, nil];
NSMutableArray* keys = [[NSMutableArray alloc]initWithObjects:@"oauth_token", @"oauth_token_secret", @"oauth_verifier", nil];
NSDictionary* extraParams = [[NSDictionary alloc] initWithObjects:values forKeys:keys];

OAuth* oauth = [[OAuth alloc] initWithConsumerKey:OAUTH_CONSUMER_KEY andConsumerSecret:OAUTH_CONSUMER_SECRET];

NSString* authHeader = [oauth oAuthHeaderForMethod:@"POST" andUrl:ACCESS_TOKEN_URL andParams:extraParams];
NSLog(@"%@", authHeader);
ASIHTTPRequest* request = [[ASIHTTPRequest alloc] initWithURL:[NSURL URLWithString:ACCESS_TOKEN_URL]];
[request addRequestHeader:@"Authorization" value:authHeader]; 
```

这就是洋红色告诉我的回报

```
2012-06-15 12:28:06.052 Versmissen[2175:707] 401 3-> HTTP/1.1 401 Authorization Required  -> (null) -> http://{censored}/oauth/token 
```

但是，401 3 不在 API 中解释的 OAuth 错误列表中。我不能为我的生活弄清楚出了什么问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:29:01.257

固定的。需要用 request_secret 对认证头进行签名

NSString* authHeader = [self.oauth oAuthHeaderForMethod:@"POST" andUrl:ACCESS_TOKEN_URL andParams:extraParams andTokenSecret:self.requestSecret];

:)

# jsf - 如何使用整页布局在 Primefaces 扩展中获取菜单溢出？

> ID：11049101
> 
> 赞同：2
> 
> 时间：2012-06-15T10:37:42.410
> 
> 标签：jsf, primefaces, overflow, primefaces-extensions

问题是我的菜单总是在中心窗格下，我不知道如何解决这个问题。我曾尝试更改 css，但是在更改 pe-layout-pane-content 溢出值时，滚动条不再可见，没有它，pe-north 中的 z-index 根本没有帮助。这让我发疯，因为它曾经在使用 p:layout 和 css-changes 时工作。

我有这样的模板：

```
<h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

        <h:outputStylesheet library="css" name="global.css"/>
        <style type="text/css">

            .noBorders tr, .noBorders td {
                background: none !important;
                border: none !important;
            } 
        </style>
 </h:head>

    <h:body>

        <pe:layout  fullPage="true" > 

            <pe:layoutPane  position="north" size="50"  resizable="false" closable="false" spacing="0" rendered="true" >  
                <ui:insert name="north">

                    <ui:include src="/resources/templates/menuBar.xhtml"/>    
                </ui:insert>
            </pe:layoutPane>  

            <pe:layoutPane position="west" size="215"  resizable="true" closable="true" spacing="-3">  
                <ui:insert name="west">

                </ui:insert>         
            </pe:layoutPane>   

            <pe:layoutPane position="east" size="200"  resizable="true" closable="true" spacing="-4" >  
                <ui:insert name="east"> 

                    <ui:include src="/resources/templates/commonRight.xhtml"/>  
                </ui:insert>
            </pe:layoutPane> 

            <pe:layoutPane position="center"  size="800" resizable="false">  
                <h2>
                    <ui:insert name="title">Default Title</ui:insert>
                </h2>

                <ui:insert name="center">

                    Center from newTemplate

                </ui:insert>
            </pe:layoutPane> 

            <pe:layoutPane position="south" rendered="false" statusbar="false" size="60"  resizable="true" closable="true" spacing="0">  
                <ui:insert name="south">

                    <ui:include src="/resources/templates/commonFooter.xhtml"/>

                </ui:insert>
            </pe:layoutPane>  

        </pe:layout>  
    </h:body> 
```

然后我的 menuBar.xhtml 是这样的：

```
<h:head>
        <title>menuBar.xhtml</title>

    </h:head>
    <h:body>
        <ui:composition>
            <h:form>
                <p:menubar rendered="true" style="border: none; z-index: 9998; overflow: visible" >
<p:submenu label="#{bundle.menuBar_partners}" icon="ui-icon-document">
                        <p:menuitem value="#{bundle.menuBar_partners_info}" url="#"/>
                        <p:submenu label="cars" icon="ui-icon-contact" >
                            <p:menuitem value="www.rangerover.com" url="http://www.rangerover.com"/>
                            <p:menuitem value="www.lada.com" url="www.lada.com"/>
                        </p:submenu>
</p:submenu>

                </p:menubar>

            </h:form>
        </ui:composition>

    </h:body> 
```

如果有人知道如何解决这个问题，我将非常感激。萨米人

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T17:54:50.303

当我将此 CSS 与常规 primefaces 布局和 layoutUnit 一起使用时，溢出适​​用于我的北菜单，但是当我将相同的 CSS 与 pe 布局和 layoutPane 一起使用时，它不会。

```
.ui-layout-north {
    z-index:40 !important;
    overflow:visible !important;
}
.ui-layout-north .ui-layout-unit-content {
    overflow:visible !important;
} 
```

也许您现在可以切换到 p 布局和 layoutUnit，因为 primefaces 扩展似乎已经打破了 CSS 的溢出。

此外，使用 pe，我的北方菜单右侧出现一个愚蠢的滚动条，但使用 p 我没有。

而且，如果 Oleg 给我们一个 CSS 解决方案（如果有的话）并在他的更新解决这个问题时让我们及时发布，那可能会很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-30T03:23:24.883

您应该对您的 CSS 进行以下更改

```
.ui-layout-north {
     z-index:40 !important;
     overflow:overflow !important;
}

.ui-layout-north .ui-layout-unit-content {
    overflow:overflow !important;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T10:32:18.940

萨米，我们已经在 PF 扩展论坛[http://forum.primefaces.org/viewtopic.php?f=14&t=22621&start=20](http://forum.primefaces.org/viewtopic.php?f=14&t=22621&start=20)讨论过这个你现在有了滚动条。关于菜单，尝试在菜单上使用更高的 z-index。

我计划在下一个版本中重新实现布局组件以修复一些已知问题，使用更多功能增强布局并允许对嵌套子布局进行 AJAX 更新。

谢谢。奥列格。

# c# - 使用序列化读取和写入数据到记事本

> ID：11049105
> 
> 赞同：0
> 
> 时间：2012-06-15T10:37:56.140
> 
> 标签：c#, serialization, read-write

我在使用序列化将数据读取和写入文件记事本时遇到问题基本上是关于登录和注册我将在这里给出我的代码这是注册表单的部分：

```
public partial class formSignUp : Form
    {
        List<data> game = new List<data>();
        data dt = new data();

        public formSignUp()
        {
            InitializeComponent();
        }        

        private void write()
        {
            try
            {
                using (Stream stream = File.OpenWrite("game.txt"))
                {
                    BinaryFormatter bin = new BinaryFormatter();
                    bin.Serialize(stream, dt);
                }
            }
            catch (IOException)
            {

            }
        }

        private void butRegister_Click(object sender, EventArgs e)
        {
            write();
            dt = new data(tbUName.Text, tbPass1.Text);
            game.Add(dt);
        }
    } 
```

然后这是类数据代码：

```
[Serializable()]
    class data
    {
        private string username;
        private string password;

        public string Username
        {
            get { return username; }
            set { username = value; }
        }

        public string Password
        {
            get { return password; }
            set { password = value; }
        }

        public data(string username, string password)
        {
            this.username = username;
            this.password = password;
        }

        public data()
        { 

        }
    } 
```

我将文件记事本放在名为“game.txt”的文件夹“bin”中

问题是，每次我调用“write()”时，写入文件“game.txt”的字符都是如此奇怪的字符。到目前为止，我喜欢：

```
ÿÿÿÿ          <Login, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null 
```

Login.data 用户名密码

任何人都可以帮助我吗？非常感谢提前问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:44:53.583

那是因为您使用的是 BinaryFormatter，它输出二进制数据。您应该使用其中一种文本格式化程序。There's[`SoapFormatter`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.soap.soapformatter)和 the [`DataContractJsonSerialized`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer)，虽然它可能不适合你。

# php - 在总计框中显示“运输文本” - 结帐

> ID：11049110
> 
> 赞同：1
> 
> 时间：2012-06-15T10:38:12.337
> 
> 标签：php, magento

如果尚未计算运费，我想在总计框中的行下方显示一条文字（**要添加的额外运费）。**`'Subtotal'`

这只是为了通知客户还有额外的运费，这将在后期（结帐）阶段添加到他们的订单中。

如果`IF..ELSE`尚未计算运费，是否可以显示此文本，如果已计算运费说明，则显示运费说明。

任何想法我可以修改哪些模板/核心文件来做到这一点？

提前致谢

编辑：总计框位于该行的 checkout/cart.phtml 中

```
 <?php echo $this->getChildHtml('totals'); ?> 
```

检查 totals.phtml 我得到以下信息，

```
 <table id="shopping-cart-totals-table">
    <col />
    <col width="1" />
    <tfoot>
        <?php echo $this->renderTotals('footer'); ?>
    </tfoot>
    <tbody>
        <?php echo $this->renderTotals(); ?>
    </tbody>
    </table> 
```

我检查了显示 SubTotal、Shipping （计算时）和 GrandTotal 的核心文件

app/code/core/Mage/Sales/Model/Quote/Address/Total/Subtotal.php

```
 public function fetch(Mage_Sales_Model_Quote_Address $address)
  {
    $address->addTotal(array(
        'code'  => $this->getCode(),
        'title' => Mage::helper('sales')->__('Subtotal'),
        'value' => $address->getSubtotal()
    ));
    return $this;
  } 
```

app/code/core/Mage/Sales/Modle/Quote/Address/Total/Shipping.php

```
 public function fetch(Mage_Sales_Model_Quote_Address $address)
  {
    $amount = $address->getShippingAmount();
    if ($amount != 0 || $address->getShippingDescription()) {
        $title = Mage::helper('sales')->__('Shipping & Handling');
        if ($address->getShippingDescription()) {
            $title .= ' (' . $address->getShippingDescription() . ')';
        }
        $address->addTotal(array(
            'code' => $this->getCode(),
            'title' => $title,
            'value' => $address->getShippingAmount()
        ));
    }
    return $this;
  } 
```

但我不确定这些文件是否需要编辑或其他文件。在此之后我无法继续，因此需要从这里获得外部帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T17:05:10.127

使用 Subtotal.php 文件，我添加了另一个 IF 条件并更改了如下代码：

```
 public function fetch(Mage_Sales_Model_Quote_Address $address)
 {
    $amount = $address->getShippingAmount();
    /* MY MODIFIED CODE */
    if($amount == 0)
    {

            $address->addTotal(array(
            'code' => $this->getCode(),
            'title' => Mage::helper('sales')->__('Subtotal <br/><span style="font-size:12px;color:#A4A5A7;">(Additional Shipping cost to be added)</span>'),
            'value' => $address->getSubtotal()
        ));
    }
    /* --------------- */
    else {
        $title = Mage::helper('sales')->__('Subtotal');
        $address->addTotal(array(
            'code' => $this->getCode(),
            'title' => $title,
            'value' => $address->getSubtotal()
        ));
    }
    return $this;
 } 
```

这在小计行之后添加了一行“要添加的额外运费”，非常好。

# php - 子选择查询中的表名别名范围

> ID：11049115
> 
> 赞同：1
> 
> 时间：2012-06-15T10:38:35.973
> 
> 标签：php, mysql, sql, phpmyadmin

请看下面的查询 - 我得到`Unknown column 'u.id' in 'on clause'`

```
SELECT id, username, 

coalesce(
 (SELECT name from company c 
    INNER JOIN user_company uc 
    ON uc.user_id = u.id 
    AND c.id = uc.company_id), 'NOT-AVAILABLE' 
) companyname

FROM `user` u 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:06:21.280

根据您的评论，相关性不能放在`JOIN`相关子查询的范围内。

但是，它可以放在`WHERE`相关子查询的子句中。

```
SELECT
  id,
  username,
  coalesce(
    (SELECT name
       FROM company      c
 INNER JOIN user_company uc
         ON c.id = uc.company_id
      WHERE uc.user_id = u.id
    ),
    'NOT-AVAILABLE'
  ) companyname
FROM
  `user` u 
```

这回答了你的明确问题；为什么您的查询在语法上失败。

但是，我会用一个简单的`LEFT JOIN`.

```
SELECT
  u.id,
  u.username,
  COALESCE(c.name, 'NOT-AVAILABLE') companyname
FROM
  `user` u 
LEFT JOIN
  `user_company` uc
      ON uc.user_id = u.id
LEFT JOIN
  `company` c
    ON c.id = uc.company_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:52:23.033

一种解决方法：

```
SELECT u.id,
       u.username,
       COALESCE(aux.name, 'NOT-AVAILABLE') as 'companyname'
FROM `user` u
LEFT JOIN
 (SELECT user_id, name from company c 
    INNER JOIN user_company uc
    ON c.id = uc.company_id) aux ON aux.user_id = u.id 
```

* * *

另一种解决方法：

```
SELECT u.id,
       u.username,
       COALESCE(c.name, 'NOT-AVAILABLE') AS 'companyname'
FROM `user` u
LEFT JOIN user_company uc ON uc.user_id = u.id 
LEFT JOIN company c ON c.id = uc.company_id 
```

# python - 如何加载 pyYAML 文件并使用属性而不是使用字典表示法访问它？

> ID：11049117
> 
> 赞同：9
> 
> 时间：2012-06-15T10:38:41.463
> 
> 标签：python, yaml, pyyaml

我有一个 YAML 配置，如下所示：

```
config:
 - id: foo
 - name: bar
content:
 - run: xxx
 - remove: yyy 
```

我正在使用 Python YAML 模块来加载它，但我想以更好的方式访问它，例如：

```
stream = open(filename)
config = load(stream, Loader=Loader)
print(config['content']) 
```

我想要的是能够做到：`print(config.content)`.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-15T10:52:41.223

您可以使用以下类将对象表示法与字典一起使用，如[本](https://stackoverflow.com/a/10761899/623518)答案中所述：

```
class DictAsMember(dict):
    def __getattr__(self, name):
        value = self[name]
        if isinstance(value, dict):
            value = DictAsMember(value)
        return value 
```

这个类在行动：

```
>>> my_dict = DictAsMember(one=1, two=2)
>>> my_dict
{'two': 2, 'one': 1}
>>> my_dict.two
2 
```

**编辑**这递归地与子词典一起工作，例如：

```
>>> my_dict = DictAsMember(one=1, two=2, subdict=dict(three=3, four=4))
>>> my_dict.one
1
>>> my_dict.subdict
{'four': 4, 'three': 3}
>>> my_dict.subdict.four
4 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T11:19:12.203

The easiest way to do this is probably to overwrite the YAML constructor for `tag:yaml.org,2002:map` so it returns a custom dictionary class instead of an ordinary dictionary.

```
import yaml

class AttrDict(object):
    def __init__(self, attr):
        self._attr = attr
    def __getattr__(self, attr):
        try:
            return self._attr[attr]
        except KeyError:
            raise AttributeError

def construct_map(self, node):
    # WARNING: This is copy/pasted without understanding!
    d = {}
    yield AttrDict(d)
    d.update(self.construct_mapping(node))

# WARNING: We are monkey patching PyYAML, and this will affect other clients!    
yaml.add_constructor('tag:yaml.org,2002:map', construct_map)

YAML = """
config:
  - id: foo
  - name: bar
content:
  - run: xxx
  - remove: yyy
"""

obj = yaml.load(YAML)

print(obj.config[0].id) # prints foo 
```

Note that this will break everything else in the process that uses YAML, if it expects everything to work the normal Python way. You can use a custom loader, but I personally find the PyYAML documentation a bit labyrinthine, and it seems that side effects are global and contagious as a rule rather than an exception.

You have been warned.

**As an alternative,** if your schema is relatively static you could write your own classes and deserialize to those (e.g., `class Config` with `id` and `name` properties). It probably wouldn't be worth the cost of the extra code, however.

# maven - SONAR 使用 mvn sonar:sonar 将 cobertura.ser 覆盖率报告导入声纳服务器？

> ID：11049123
> 
> 赞同：3
> 
> 时间：2012-06-15T10:39:04.037
> 
> 标签：maven, sonarqube, cobertura

我有一个 cobertura.ser 文件，它是在集成测试和系统测试时生成的。现在我想将我的覆盖范围导入到声纳服务器。

我怎样才能做到这一点，所以在执行 mvn sonar:sonar 时，覆盖范围应该考虑外部 coberture.ser 文件？

我可以使用声纳来做到这一点，我可以在所有测试运行期间看到整体覆盖率吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T10:11:29.700

您需要设置以下参数来告诉 Sonar 使用预先生成的报告：

```
sonar.dynamicAnalysis=reuseReports 
```

其次，Sonar 不读取“cobertura.ser”文件。它可以配置如下来读取生成的 XML 报告（参见 cobertura 文档）：

```
sonar.cobertura.reportPath=target/reports/coverage.xml 
```

最后，我对所有这些东西的参考来自 Sonar wiki：

*   [http://docs.codehaus.org/display/SONAR/Advanced+Parameters](http://docs.codehaus.org/display/SONAR/Advanced+Parameters)
*   [http://docs.codehaus.org/display/SONAR/Code+Coverage+by+Unit+Tests](http://docs.codehaus.org/display/SONAR/Code+Coverage+by+Unit+Tests)
*   [http://docs.codehaus.org/display/SONAR/Code+Coverage+by+Integration+Tests](http://docs.codehaus.org/display/SONAR/Code+Coverage+by+Integration+Tests)

Sonarsource 教程越来越多地推动 JaCoCo。这似乎是一个新兴标准（取代旧的已解散的 Emma 项目）

# android - 如何避免输入法隐藏 WebView 底部的 EditText 和 Button

> ID：11049124
> 
> 赞同：0
> 
> 时间：2012-06-15T10:39:18.390
> 
> 标签：android, webview, android-input-method

`WebView`我通过在我的应用程序中使用来加载网页，页面底部有`EditText`和。`Button`当我按下 时`EditText`，会显示软输入法，但输入法隐藏了`EditText`and `Button`。

我想要`EditText`and`Button`移动到输入法的顶部，所以输入法不会隐藏它们。

我在`android:windowSoftInputMode="adjustPan"`我的活动标签中添加了`AndroidManifest.xml`，但它不起作用。

我还可以做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:10:48.940

而不是使用 adjustPan 属性，请尝试使用以下属性。它对我来说很好..

```
 android:windowSoftInputMode="adjustResize" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:48:45.390

尝试将您的 webview 放在 ScrollView 布局中。一旦出现键盘，滚动布局将向上移动。请记住，在 ScrollView 布局中只能有一个孩子。最好在 Scrollview 中放置一些类似 Linear 或 Relative 的布局，然后在该布局中添加其他子视图。

看看这些：

[在android中垂直和水平滚动视图](https://stackoverflow.com/questions/2044775/scrollview-vertical-and-horizontal-in-android)

[http://www.androidaspect.com/2012/02/scrollview-tutorial-android-ui.html](http://www.androidaspect.com/2012/02/scrollview-tutorial-android-ui.html)

# iphone - 使用 iPhone 的 opengl 像喷漆一样绘制

> ID：11049128
> 
> 赞同：1
> 
> 时间：2012-06-15T10:39:28.750
> 
> 标签：iphone, ios, opengl-es, paint

我正在尝试制作具有绘图功能的应用程序。在那我需要提供像 SPRAY PAINT 这样的功能。

我已经制作了类似的代码

```
static GLfloat*     vertexBuffer = NULL;

static NSUInteger   vertexMax = 64;

NSUInteger          vertexCount = 0,
                    count,
                    i;

[EAGLContext setCurrentContext:context];
glBindFramebufferOES(GL_FRAMEBUFFER_OES, viewFramebuffer);

// Convert locations from Points to Pixels
CGFloat scale = self.contentScaleFactor;
start.x *= scale;
start.y *= scale;
end.x *= scale;
end.y *= scale;

// Allocate vertex array buffer
if(vertexBuffer == NULL)
    vertexBuffer = malloc(vertexMax * 2 * sizeof(GLfloat));

// Add points to the buffer so there are drawing points every X pixels
count = MAX(ceilf(sqrtf((end.x - start.x) * (end.x - start.x) + (end.y - start.y) * (end.y - start.y)) / kBrushPixelStep), 1);
for(i = 0; i < count; ++i) {
    if(vertexCount == vertexMax) {
        vertexMax = 2 * vertexMax;
        vertexBuffer = realloc(vertexBuffer, vertexMax * 2 * sizeof(GLfloat));
    }

    vertexBuffer[2 * vertexCount + 0] = start.x + (end.x - start.x) * ((GLfloat)i / (GLfloat)count);
    vertexBuffer[2 * vertexCount + 1] = start.y + (end.y - start.y) * ((GLfloat)i / (GLfloat)count);
    vertexCount += 1;
}

// Render the vertex array
glVertexPointer(2, GL_FLOAT, 0, vertexBuffer);
glDrawArrays(GL_POINTS, 01, vertexCount);
glStencilMask(GL_STENCIL_VALUE_MASK);
glDepthMask(GL_FALSE);
// Display the buffer
glBindRenderbufferOES(GL_RENDERBUFFER_OES, viewRenderbuffer);
[context presentRenderbuffer:GL_RENDERBUFFER_OES]; 
```

现在我需要为 Paint 做哪些额外的代码，看起来像喷漆？

![这段代码将使我附上的颜色像图像](../Images/2e480fee8940e1eabf7fd954f89bd98c.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T13:13:28.013

有[苹果示例代码](http://developer.apple.com/library/ios/#samplecode/GLPaint/Introduction/Intro.html)展示了如何做到这一点。为什么不从那开始呢？

# html - 在 Objective C 中将 RTF 文件转换为 HTML

> ID：11049134
> 
> 赞同：2
> 
> 时间：2012-06-15T10:40:24.320
> 
> 标签：html, objective-c, xcode, ipad, rtf

如何将 RTF 文件转换为 HTML 格式？我有一个文本编辑器，它以 rtf 格式保存文件，但我需要将内容放在我的服务器上。为此，我需要将 rtf 文件转换为 html 文件。我无法找到有关 Objective C 的任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:26:42.333

我不知道objective-c中有任何库可以将rtf转换为html。

但是，如果您能够在服务器端执行转换，那么这就开辟了更多可能性，例如 php 和 c# 库，以及 gnu 实用程序。

例如（你可以用谷歌搜索更多）：

**php：** Pa 软件的[RTF 到 HTML 转换器](http://www.pa-software.com/scripts/)（付费产品）、Martin Mevald 的[rtf2htm](http://www.mevald.cz/oldprograms.php)（旧的 GPL 软件）、Marcus Fischer 的[RTF Parse 类](http://www.phpclasses.org/package/1930-PHP-RTF-to-HTML-converter-with-latin-character-support.html)（GPL 的代码）、Zend 的[LiveDocX](http://www.phplivedocx.org/2009/08/13/convert-docx-doc-rtf-to-html-in-php/)甚至是在 SO [Alternative-for-phplivedocx](https://stackoverflow.com/questions/2452263/alternative-for-phplivedocx)上的 livedocx 的替代品.. ETC

**C#：**在 SO [convert-rtf-to-html](https://stackoverflow.com/questions/439301/convert-rtf-to-html)、[simple-convert-rtf-to-html](https://stackoverflow.com/questions/5265566/simple-convert-rtf-to-html)或来自 MS [Converting-between-RTF-and-HTML](http://code.msdn.microsoft.com/windowsdesktop/Converting-between-RTF-and-aaa02a6e)

**GNU：** GNU 的[UnRTF](http://www.gnu.org/software/unrtf/)实用程序。

如果你真的想要 Objective-c，那么可以翻译 php 和 GNU 解决方案的源代码——但这不是一件容易的事。因此，我仍然认为您最好的选择是在服务器端进行。

# mongodb - DB占用空间大

> ID：11049136
> 
> 赞同：0
> 
> 时间：2012-06-15T10:40:25.083
> 
> 标签：mongodb, mongodb-.net-driver

我是 mongoDB 的新手，当我开始使用测试应用程序（ASP.Net）时发现数据库占用了大量磁盘空间。我想知道集合只有像单词这样的一小部分数据。所以任何人都可以阐明这 ？

如果错了，请纠正我。在此先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T10:52:33.320

Mongo 不会收缩先前分配的结构，因为这会减慢数据库速度。当您需要它时，运行[修复程序](http://www.mongodb.org/display/DOCS/Durability+and+Repair)来重建数据库并回收未使用的空间。在现场项目中，您应该将其安排在非高峰时间。

从命令行：

```
mongod --repair 
```

从外壳（如果你走这条路，你必须为所有数据库包括本地数据库做）：

```
db.repairDatabase(); 
```

# linux - 试图阅读 iw_statistics 但代码不起作用？

> ID：11049138
> 
> 赞同：1
> 
> 时间：2012-06-15T10:40:44.070
> 
> 标签：linux, wireless

我需要从 iw_statistics 结构中读取某些统计信息，代码如下：

```
struct net_device *dev;
struct iw_statistics *wi_stats = NULL;
dev = first_net_device(&init_net);

  while (dev)
    {
      if (strncmp(dev->name , "wlan",4)==0 )
      {
         if (dev->wireless_handlers-get_wireless_stats(dev) !=NULL ) // <--- here's where the code crashes.
         {
        wi_stats = dev-wireless_handlers->get_wireless_stats(dev);
        printk(KERN_INFO "wi_stats = dev-wireless_handlers->get_wireless_stats(dev); worked!!! :D\n"); 
         }
       }

    } 
```

我正在研究 linux 内核 2.6.35，并且正在编写一个内核模块。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:28:59.980

你真的是想写吗

```
if (dev->wireless_handlers-get_wireless_stats(dev) !=NULL ) 
```

还是你的意思

```
if (dev->wireless_handlers->get_wireless_stats(dev) !=NULL ) 
```

# sbt - 如何调试从 sbt 运行的测试

> ID：11049139
> 
> 赞同：0
> 
> 时间：2012-06-15T10:40:47.273
> 
> 标签：sbt, jpda

当异常发生时，从 sbt 运行的测试[不会显示](https://stackoverflow.com/questions/7237824/how-can-i-get-complete-stacktraces-for-exceptions-thrown-in-tests-when-using-sbt)堆栈跟踪，所以我想从调试器连接到 sbt 来调试测试。有什么简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T14:10:19.743

使用 typesafe 提供的 sbt deb/rpm，它可以工作：

```
sbt -jvm-debug 8000 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T20:47:24.663

您可以使用 java jdwp 参数创建一个单独的 sbt 启动器，即 -agentlib:jdwp=transport=dt_socket,suspend=y,server=y,address=10000

从这里，您可以将调试器连接到端口 10,000。

# c++ - 动态分配数组的大小是否存储在某处？

> ID：11049144
> 
> 赞同：3
> 
> 时间：2012-06-15T10:41:15.280
> 
> 标签：c++

在我看来，`delete[]`知道动态分配数组的大小。我的问题是：有什么办法可以让我们在编码时不需要明确提供尺寸。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T10:47:13.800

delete[] 用来确定它必须处理多少项目的方法取决于实现。你无法得到它或以任何方式使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T10:59:10.420

阅读 C++ FAQ [[16.14] 在 p = new Fred[n] 之后，编译器如何知道在 delete[] p 期间有 n 个要销毁的对象？](http://www.parashift.com/c++-faq-lite/freestore-mgmt.html#faq-16.14)（以及关于免费商店管理的总体思路的整个部分。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T11:01:31.733

> 我的问题是：有什么办法可以让我们在编码时不需要明确提供尺寸。

你不需要，你只需调用`delete []`，没有大小。

编译器存储大小的方式是实现细节，没有指定。大多数将它存储在数组开始之前的某个内存中（而不是之后，正如其他人提到的那样）。

请参阅此相关问题：[delete[] 如何“知道”操作数数组的大小？](https://stackoverflow.com/questions/197675/how-does-delete-know-the-size-of-the-operand-array)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T10:44:43.320

编译器遵循不同的方法来存储分配的内存`new`。这是我在某处读到的方法之一。

当编译器根据`new`调用分配内存时，它可能会在开始时设置一个额外的字节，它将存储分配了多少内存。因此，当它遇到`delete`调用时，它将使用这个存储的值来决定必须释放多少内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T10:45:26.580

C++ 编译器具有深埋在某处的动态分配数组的大小；但是，在使用 C++ 编码时，这无法以任何方式访问 - 因此您必须在分配后将大小存储在某处。

[编辑]：虽然 Visual Studio 编译器套件的某些版本将大小存储在索引 -1 处，但这在编译器中不可信，或者在编码时根本不使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-15T10:57:04.013

编辑：

由于 delete [] 需要为数组的所有元素调用析构函数，因此长度肯定必须存储在某个地方。至于为什么无法访问此内存以防止由于大小未知而导致走出阵列等错误 - 我不太确定。严格来说，静态分配的数组的长度必须在编译时知道，而动态分配的数组的长度必须由运行时存储，因此在这两种情况下，缓冲区溢出错误理论上都是 100% 可以预防的，但静态和动态数组都是不安全。我的猜测是这是出于性能目的，边界检查会使其变慢，原始（C 风格）数组在零安全性下提供最佳性能。

这个的实现因编译器和运行时供应商而异，可能有一些实现它可能是可访问和可用的，但它不会被视为标准和推荐的做法。要存储的长度的逻辑位置是分配的内存片段的标头中的某个位置，在您将为数组的第一个元素获得的实际地址之前。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-15T11:00:10.807

我认为它依赖于编译器，您无法获取它供您的应用程序使用。以下链接显示了编译器使用的 2 种方法。

[http://www.parashift.com/c++-faq-lite/compiler-dependencies.html#faq-38.7](http://www.parashift.com/c++-faq-lite/compiler-dependencies.html#faq-38.7)

[http://www.parashift.com/c++-faq-lite/compiler-dependencies.html#faq-38.8](http://www.parashift.com/c++-faq-lite/compiler-dependencies.html#faq-38.8)

# java - 执行时间和处理时间波动

> ID：11049146
> 
> 赞同：1
> 
> 时间：2012-06-15T10:41:20.740
> 
> 标签：java, profiling, cpu, profiler, cpu-usage

为什么每次我在 Netbeans 中运行以下代码时，执行和进程 CPU 时间都会出现波动。我的 CPU 使用率是否也每次都不同。以及如何找到以下代码的 CPU 使用率。

```
class test{
static com.sun.management.OperatingSystemMXBean mxbean = (com.sun.management.OperatingSystemMXBean) ManagementFactory.getOperatingSystemMXBean();

public static void main(String[] args) throws InterruptedException {

        long start1 = System.currentTimeMillis();
        long pstart1 = mxbean.getProcessCpuTime();
        long pstart2 = TimeUnit.MILLISECONDS.convert(pstart1, TimeUnit.NANOSECONDS);        

    for (int i = 0; i < 10000; i++) {    

            System.out.println("hello");

    }     

        long end1 = System.currentTimeMillis();
        long pend1 = mxbean.getProcessCpuTime();
        long pend2 = TimeUnit.MILLISECONDS.convert(pend1, TimeUnit.NANOSECONDS);
        float pdif = pend2 - pstart2;
        float edif = end1 - start1;

        System.out.println(edif);
        System.out.println(pdif);

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:57:28.210

您主要执行 IO，因此您非常依赖操作系统的行为。

毫秒-秒不是很准确，分辨率可能超过 1 毫秒。例如 currentTimeMillis 在 Windows XP 上的分辨率约为 15 毫秒。在许多 unix 系统上，使用的 cpu 时间分辨率为 10 毫秒。

如果您使任务受 CPU 限制而不是 IO 限制并运行更长时间，您应该会看到更一致的时序。

# html - 如何在不使用表格的情况下实现表格布局？

> ID：11049149
> 
> 赞同：11
> 
> 时间：2012-06-15T10:41:37.063
> 
> 标签：html, css, html-table

以进步（和学习）的名义，我如何才能从我的代码中删除表格并实现相同的布局？

例如，这是我的表：

```
<table cellspacing="0px">
    <tr>
        <td>
            <img src="http://www.poltairhomes.com/images/footerlogo.png" />
        </td>
        <td id="footertext">
            <p>Poltair Homes Plc<br />Registered Office: The Old Chapel, Greenbottom, Truro, Cornwall, TR4 8QP.<br />Registered in England & Wales: 3955425<br />www.poltairhomes.com<br />info@poltairhomes.com</p>
        </td>
        <td id="footertext">
            <p>Terms and Conditions | Privacy Policy | Sitemap</p>
        </td>
        <td id="footertext">
            <p>SIGN UP FOR OUR NEWSLETTER:</p>
            <img src="http://www.poltairhomes.com/images/signup(temp).png" />
        </td>
    </tr>
</table> 
```

以及相关的 CSS：

```
.footertext {
    margin: 0;
    padding:0 5px 0 5px;
    color: #AAA;
    font-size: 10px;
    font-family:Arial, Helvetica, sans-serif;
    text-align:center;
    border-left: 1px solid #CCC;
} 
```

[http://jsfiddle.net/userdude/tYjKw/](http://jsfiddle.net/userdude/tYjKw/)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-15T10:45:07.140

CSS：

```
.table {
  display: table;
}
.table-row {
  display: table-row;
}
.table-cell {
  display: table-cell;
} 
```

HTML：

```
<div class="table">
  <div class="table-row">
    <div class="table-cell">Table cell 1</div>
    <div class="table-cell">Table cell 2</div>
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-15T10:56:59.513

```
<div class="table">
    <div class="row">
       <div class="cell twocol">
           <span>Content1</span>
       </div>
       <div class="cell twocol">
           <span>Content2</span>
       </div>
    </div>
    <div class="row">
       <div class="cell onecol">
           <span>Content3</span>
       </div>
    </div>
</div> 
```

和 CSS

```
.table {width: 100%; height: 100%;}
.row {width: 100%; min-height: 1px; height: auto; margin: 0;}
.cell {float: left; margin: 0; padding: 0;}
.onecol {width: 100%;}
.twocol {width: 50%;} 
```

我建议您研究一些网格系统，例如 960grid (http://960.gs/) 或 1140grid (http://cssgrid.net/)，会对您有很大帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T10:49:32.087

创建样式为：

```
.footerItem { float: left; }
```

```
<div class="footerItem">
        <img src="http://www.poltairhomes.com/images/footerlogo.png" />
    </div>
    <div class="footerItem">
        <p>Poltair Homes Plc<br />Registered Office: The Old Chapel, Greenbottom, Truro, Cornwall, TR4 8QP.<br />Registered in England & Wales: 3955425<br />www.poltairhomes.com<br />info@poltairhomes.com</p>
    </div>
    <div class="footerItem">
        <p>Terms and Conditions | Privacy Policy | Sitemap</p>
    </div>   
    <div class="footerItem">
        <p>SIGN UP FOR OUR NEWSLETTER:</p><img src="http://www.poltairhomes.com/images/signup(temp).png" />
    </div>
```

然后使用 DIV 创建您的主体以分隔块并将类应用于每个块：

# xpages - 普通笔记应用程序和Xpage应用程序之间的主要区别是什么

> ID：11049153
> 
> 赞同：1
> 
> 时间：2012-06-15T10:42:09.377
> 
> 标签：xpages

我是 Xpages 应用程序的新手，任何人都可以告诉我普通笔记应用程序和 Xpage 应用程序之间的主要区别是什么，以便我可以理解并从基础开始，如果任何人有帮助的话。

提前致谢。JB

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T10:52:19.127

这是一个非常高级的问题。

您可以使用 XPages 创建 Web 应用程序。XPages “*基于 Web 开发语言和标准，包括 JavaScript、Ajax、Java、Dojo Toolkit、服务器端 JavaScript 和 JavaServer Faces* ”（来源：[http](http://en.wikipedia.org/wiki/XPages) ://en.wikipedia.org/wiki/XPages ）。

为了让您开始使用 XPages，我建议您阅读以下书籍： [掌握 XPages：XPages 应用程序开发和 XSP 语言的分步指南](https://rads.stackoverflow.com/amzn/click/com/0132486318)

我还建议您查看[XPages.info](http://xpages.info/)上的可用资源和视频。

也请查看我关于 XPages 可用资源的博客文章：http: [//per.lausten.dk/blog/2012/02/learning-xpages-available-resources.html](http://per.lausten.dk/blog/2012/02/learning-xpages-available-resources.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T19:23:00.287

我会说部分刷新，适用于几乎任何设备和速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T18:02:16.510

访问[http://www.tlcc.com/admin/tlccsite.nsf/pages/free-xpages-training](http://www.tlcc.com/admin/tlccsite.nsf/pages/free-xpages-training)，我们 (TLCC) 提供免费课程，向您介绍 XPages 并解释它们是什么以及帮助您入门在您的第一个 XPage 上。

霍华德

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T15:31:30.553

还有一份关于使用 XPages 最大化 Domio 8.5.3 优势的白皮书[http://www.intec.co.uk/update-whitepaper-maximising-the-benefits-of-xpages-in-8-5-3/](http://www.intec.co.uk/update-whitepaper-maximising-the-benefits-of-xpages-in-8-5-3/)

基本上，它允许您开发具有一致界面的浏览器和 Notes 客户端。根据我的经验，在学习曲线之后，在 XPages 中进行 Web 开发比在传统 Domino 中进行 Web 开发要快得多。扩展库进一步减少了时间，来自 OpenNTF 的资源也是如此。加上扩展库，您还可以使用 XPages 为移动浏览器进行开发。

8.5.4 中有一个浏览器插件，它将允许从浏览器使用传统的 Notes 客户端应用程序。但是，我怀疑您是否会从中获得与从 XPages 中获得的一样好的用户体验。

# c++ - std::vector::back 和 vector::operator[vector::size() - 1] 之间的区别

> ID：11049154
> 
> 赞同：2
> 
> 时间：2012-06-15T10:42:17.927
> 
> 标签：c++, stl

有没有区别：

```
mvt_act_idx = openCloseList.size()-1;
openCloseList[mvt_act_idx].A += a; 
```

和

```
 openCloseList.back().A += a; 
```

除了可读性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:05:06.537

```
mvt_act_idx = openCloseList.size()-1;
openCloseList[mvt_act_idx].A += a; 
```

如果`openCloseList`为空，无符号减法将产生一个巨大的值，然后用于索引向量。索引运算符可以断言，也可以不断言。

```
openCloseList.back().A += a; 
```

如果`openCloseList`为空，则`back`操作可以断言，也可以不断言。

在这种错误的情况下，故障`back`可能更容易理解。

无论如何，第一个代码片段可能与一些不使用无符号整数*作为数字*的准则冲突（除了模行为简化和澄清代码的地方），而调用`back`不能与任何此类准则冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T10:47:54.083

没有有用的区别。

直接使用`back()`可能会更有效，但我对此表示怀疑。如果您真的很感兴趣，可以查看生成的汇编程序。可能会产生一两条指令的不同，这取决于您的编译器有多聪明。

我确实注意到前一种方式仅使用`size()`并且`[]`对于理解数组或在任何其他语言中使用类似结构的人来说会更加熟悉；`back()`更具体一点 C++ （尽管它几乎不是一个神秘的习语）。

# memory - VPS 上的 Java 线程问题

> ID：11049157
> 
> 赞同：0
> 
> 时间：2012-06-15T10:42:33.333
> 
> 标签：memory, locking, jvm, vps

我有一个运行 Centos 的 VPS，其中包含以下详细信息：

```
[root@XXXXXXX~]# uname -a

Linux xxxxxxxx2.6.32-042stab055.10 #1 SMP Thu May 10 15:38:32 MSD 2012 i686 i686 i386 GNU/Linux 
```

我正在尝试从安装在其上的 tomcat 运行电子商务系统 shopizer。我曾尝试在 VPS 上构建它但没有成功，所以我在其他地方构建它并将战争文件复制到 VPS 的 tomcat 上。

我现在和构建期间面临的问题是，当我运行构建的 ant 脚本时，构建挂起。现在当我启动tomcat服务器时，其详细信息如下：

```
Server version: Apache Tomcat/6.0.35
Server built:   Nov 28 2011 11:20:06
Server number:  6.0.35.0
OS Name:        Linux
OS Version:     2.6.32-042stab055.10
Architecture:   i386
JVM Version:    1.6.0_24-b24
JVM Vendor:     Sun Microsystems Inc. 
```

服务器在启动时挂起，当我进行线程转储（在这种情况下和构建情况下）时，我得到以下信息：

```
"GC Daemon" daemon prio=10 tid=0xa09fd000 nid=0x36ef in Object.wait() [0xa08f7000]
   java.lang.Thread.State: TIMED_WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0xa6c35a88> (a sun.misc.GC$LatencyLock)
    at sun.misc.GC$Daemon.run(GC.java:117)
    - locked <0xa6c35a88> (a sun.misc.GC$LatencyLock)

"Low Memory Detector" daemon prio=10 tid=0xb7686000 nid=0x36ed runnable [0x00000000]
   java.lang.Thread.State: RUNNABLE

"C1 CompilerThread0" daemon prio=10 tid=0xb7684000 nid=0x36ec runnable [0x00000000]
   java.lang.Thread.State: RUNNABLE

"Signal Dispatcher" daemon prio=10 tid=0xb7682800 nid=0x36eb waiting on condition [0x00000000]
   java.lang.Thread.State: RUNNABLE

"Finalizer" daemon prio=10 tid=0xb7673000 nid=0x36ea in Object.wait() [0xa0ffe000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0xa6ad0b58> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:133)
    - locked <0xa6ad0b58> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:149)
    at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:177)

"Reference Handler" daemon prio=10 tid=0xb7671800 nid=0x36e9 in Object.wait() [0xa1198000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0xa6ad0a58> (a java.lang.ref.Reference$Lock)
    at java.lang.Object.wait(Object.java:502)
    at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:133)
    - locked <0xa6ad0a58> (a java.lang.ref.Reference$Lock)

"main" prio=10 tid=0xb7605c00 nid=0x36e7 runnable [0xb775d000]
   java.lang.Thread.State: RUNNABLE
    at java.lang.Byte$ByteCache.<clinit>(Byte.java:79)
    at java.lang.Byte.valueOf(Byte.java:102)
    - waiting on <0xa6ad0a58> (a java.lang.ref.Reference$Lock)
    at java.lang.Object.wait(Object.java:502)
    at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:133)
    - locked <0xa6ad0a58> (a java.lang.ref.Reference$Lock)

"main" prio=10 tid=0xb7605c00 nid=0x36e7 runnable [0xb775d000]
   java.lang.Thread.State: RUNNABLE
    at java.lang.Byte$ByteCache.<clinit>(Byte.java:79)
    at java.lang.Byte.valueOf(Byte.java:102)
    at com.opensymphony.xwork2.conversion.impl.DefaultTypeConverter.<init>(DefaultTypeConverter.java:59)
    at com.opensymphony.xwork2.conversion.impl.XWorkConverter.<init>(XWorkConverter.java:186)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
    at com.opensymphony.xwork2.inject.ContainerImpl$ConstructorInjector.construct(ContainerImpl.java:419)
    at com.opensymphony.xwork2.inject.ContainerBuilder$5.create(ContainerBuilder.java:207)
    at com.opensymphony.xwork2.inject.Scope$2$1.create(Scope.java:51)
    - locked <0xa18cf408> (a com.opensymphony.xwork2.inject.ContainerImpl)
    at com.opensymphony.xwork2.inject.ContainerImpl$ParameterInjector.inject(ContainerImpl.java:462)
    at com.opensymphony.xwork2.inject.ContainerImpl.getParameters(ContainerImpl.java:477)
    at com.opensymphony.xwork2.inject.ContainerImpl.access$000(ContainerImpl.java:34)
    at com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector.inject(ContainerImpl.java:293)
    at com.opensymphony.xwork2.inject.ContainerImpl$ConstructorInjector.construct(ContainerImpl.java:431)
    at com.opensymphony.xwork2.inject.ContainerBuilder$5.create(ContainerBuilder.java:207)
    at com.opensymphony.xwork2.inject.Scope$2$1.create(Scope.java:51)
    - locked <0xa18cf408> (a com.opensymphony.xwork2.inject.ContainerImpl)
    at com.opensymphony.xwork2.inject.ContainerImpl$ParameterInjector.inject(ContainerImpl.java:462)
    at com.opensymphony.xwork2.inject.ContainerImpl.getParameters(ContainerImpl.java:477)
    at com.opensymphony.xwork2.inject.ContainerImpl.access$000(ContainerImpl.java:34)
    at com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector.inject(ContainerImpl.java:293)
    at com.opensymphony.xwork2.inject.ContainerImpl$ConstructorInjector.construct(ContainerImpl.java:431)
    at com.opensymphony.xwork2.inject.ContainerBuilder$5.create(ContainerBuilder.java:207)
    at com.opensymphony.xwork2.inject.Scope$2$1.create(Scope.java:51)
    - locked <0xa18cf408> (a com.opensymphony.xwork2.inject.ContainerImpl)
    at com.opensymphony.xwork2.inject.ContainerImpl$ParameterInjector.inject(ContainerImpl.java:462)
    at com.opensymphony.xwork2.inject.ContainerImpl.getParameters(ContainerImpl.java:477)
    at com.opensymphony.xwork2.inject.ContainerImpl.access$000(ContainerImpl.java:34)
    at com.opensymphony.xwork2.inject.ContainerImpl$MethodInjector.inject(ContainerImpl.java:293)
    at com.opensymphony.xwork2.inject.ContainerImpl$ConstructorInjector.construct(ContainerImpl.java:431)
    at com.opensymphony.xwork2.inject.ContainerBuilder$5.create(ContainerBuilder.java:207)
    at com.opensymphony.xwork2.inject.Scope$2$1.create(Scope.java:51)
    - locked <0xa18cf408> (a com.opensymphony.xwork2.inject.ContainerImpl)
    at com.opensymphony.xwork2.inject.ContainerBuilder$3.create(ContainerBuilder.java:93)
    at com.opensymphony.xwork2.inject.ContainerBuilder$7.call(ContainerBuilder.java:487)
    at com.opensymphony.xwork2.inject.ContainerBuilder$7.call(ContainerBuilder.java:484)
    at com.opensymphony.xwork2.inject.ContainerImpl.callInContext(ContainerImpl.java:574)
    at com.opensymphony.xwork2.inject.ContainerBuilder.create(ContainerBuilder.java:484)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.createBootstrapContainer(DefaultConfiguration.java:252)
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:193)
    - locked <0xa37c05b0> (a com.opensymphony.xwork2.config.impl.DefaultConfiguration)
....
....
..
"VM Thread" prio=10 tid=0xb766d800 nid=0x36e8 runnable 

"VM Periodic Task Thread" prio=10 tid=0xb7688400 nid=0x36ee waiting on condition 

JNI global references: 911

Heap
 def new generation   total 39424K, used 5740K [0xa1580000, 0xa4040000, 0xa6ad0000)
  eden space 35072K,  12% used [0xa1580000, 0xa19a8e88, 0xa37c0000)
  from space 4352K,  34% used [0xa37c0000, 0xa3932570, 0xa3c00000)
  to   space 4352K,   0% used [0xa3c00000, 0xa3c00000, 0xa4040000)
 tenured generation   total 87424K, used 1432K [0xa6ad0000, 0xac030000, 0xb1580000)
   the space 87424K,   1% used [0xa6ad0000, 0xa6c36038, 0xa6c36200, 0xac030000)
 compacting perm gen  total 12288K, used 11825K [0xb1580000, 0xb2180000, 0xb5580000)
   the space 12288K,  96% used [0xb1580000, 0xb210c588, 0xb210c600, 0xb2180000)
No shared spaces configured. 
```

我可以做些什么来解决这个问题，或者它是在 VPS 上运行的 java 的错误/问题？

B) jvm 有时会在同一个 VPS 上崩溃并出现以下错误：

```
[root@xxxxxx ~]# java
Error occurred during initialization of VM
Could not reserve enough space for object heap
Could not create the Java virtual machine.
[root@xxxxxx ~]# free
             total       used       free     shared    buffers     cached
Mem:       1155072     561320     593752          0          0     317124
-/+ buffers/cache:     244196     910876
Swap:            0          0          0 
```

对我来说很奇怪，谁能解释我这种行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T23:07:37.810

我建议您尝试更新您的操作系统和 JVM。

我认为这次崩溃是由于您的实际配置中的错误造成的。

# qt - 多次调用 showEvent() - 故意的？

> ID：11049158
> 
> 赞同：0
> 
> 时间：2012-06-15T10:42:34.567
> 
> 标签：qt

我想要做的是显示一组设置测试的页面。一旦所有细节都正确，用户按下 Commit 并显示下一个向导页面，我想立即在其中运行一系列测试。将这些显示给用户，一旦完成，用户就可以单击 Next。

我知道禁用 Next 只是返回 false 的一种情况，`isComplete()`并且可以正常实施。所以，我想使用在小部件显示后调用的函数，所以我使用`showEvent()`了向我指示要使用的函数。

目前我的测试只是显示一个进度条作为测试，因此使用了一个计时器。

```
void RunTestWizardPage::showEvent(QShowEvent *event)
{
    ui->statusEdit->setText("Running Tests");

    timer = new QTimer(this);
    connect(timer, SIGNAL(timeout()), this, SLOT(update()));
    timer->start(100);
}

void RunTestWizardPage::update()
{
    static int i = 10;

    ui->statusEdit->append("Running Tests...");

    ui->testProgress->setValue(i++);

    if(i == 100)
    {
        i = 0;
        timer->stop();
        complete = true;
        emit completeChanged();
    }
} 
```

然而，这个函数似乎被调用了两次（我认为在小部件显示之前，尽管这可能是我调试的一个技巧），因此它会导致定时器出现问题，我认为定时器永远不会结束。我确实在文档中阅读了有关自发事件的信息，但据我所知，对该函数的两次调用都不是自发的。

它是否被故意调用了两次，如果是，我该如何停止它或者是否有其他功能可以使用？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:13:33.913

在[`QWizardPage::initializePage()`](http://qt-project.org/doc/qwizardpage.html#initializePage)显示页面之前调用它。

# c++ - 多线程 - 系统创建的附加线程？

> ID：11049168
> 
> 赞同：0
> 
> 时间：2012-06-15T10:43:00.823
> 
> 标签：c++, multithreading, gdb, pthreads

我正在附加`gdb`到正在运行的进程（我的多线程服务器）。然后我请求`info thread`并看到总是有+1（或2？）附加线程，我没有在我的代码中创建。我只创建了：

*   4名工人（必须在`cond_wait()`）
*   1个信号线程（总是在`sigwait()`）
*   1个维护线程（每N秒执行一次，然后`cond_wait()`状态）
*   1个线程使用`popen()`（每N秒执行一次，然后`cond_wait()`状态）
*   1 个`main()`线程（在`accept()`）

**所以，= 我创建的 8 个线程。但是为什么报告 9 或 10 ???**

系统是 FreeBSD 6.4

此外，这个附加线程总是有问题，它使我的程序崩溃并且它总是处于`pthread_testcancel ()`状态！ [c++ pthreads - 尝试锁定互斥锁以进行读取时崩溃](https://stackoverflow.com/questions/11042458/c-pthreads-crash-while-trying-to-lock-mutex-for-reading)

看来，`*`标号10的线程是当前正在执行的线程？它和8线程一样？？？或者我有 2 个额外的线程？正常吗？谢谢..对不起我的英语不好。

```
(gdb) info thread
* 10 LWP 100108  0x4865a79b in pthread_testcancel () from /lib/libpthread.so.2 ( WHAT IS ??? (1) )
  9 Thread 0x80d4000 (runnable)  0x486d7bd3 in accept () from /lib/libc.so.6
  8 Thread 0x80d4a00 (LWP 100090)  0x4865a79b in pthread_testcancel ()
   from /lib/libpthread.so.2 ( WHAT IS??? (2) )
  7 Thread 0x80d4c00 (sleeping)  0x48651cb6 in pthread_mutexattr_init ()
   from /lib/libpthread.so.2
  6 Thread 0x80d4e00 (sleeping)  0x48651cb6 in pthread_mutexattr_init ()
   from /lib/libpthread.so.2
  5 Thread 0x868b000 (sleeping)  0x48651cb6 in pthread_mutexattr_init ()
   from /lib/libpthread.so.2
  4 Thread 0x868b200 (sleeping)  0x48651cb6 in pthread_mutexattr_init ()
   from /lib/libpthread.so.2
  3 Thread 0x868b400 (sleeping)  0x48651cb6 in pthread_mutexattr_init ()
   from /lib/libpthread.so.2
  2 Thread 0x868b600 (sleeping)  0x48651cb6 in pthread_mutexattr_init ()
   from /lib/libpthread.so.2
  1 Thread 0x868b800 (sleeping)  0x48651cb6 in pthread_mutexattr_init ()
   from /lib/libpthread.so.2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:09:06.473

额外的线程是 3rd 方库的结果。快速搜索 curl、ImageMagick、tinyxml2 和 pcre 的源代码表明 curl 和 ImageMagick 有`pthread_create()`调用。

关于在 gdb 中调试：

*   在`info threads`中，`*`指示当前正在检查的线程。它并不表示当前线程正在运行。
*   在回溯中，`in ?? ()`可以指示库不是使用调试信息（`-g`使用 gcc）构建的，或者堆栈已损坏。通常，如果堆栈损坏，gdb 会给出明确的指示。

另外，一定要检查[ImageMagick 的执行文档线程](http://www.imagemagick.org/script/architecture.php#threads)。

# java - 评论工具/库

> ID：11049171
> 
> 赞同：2
> 
> 时间：2012-06-15T10:43:07.483
> 
> 标签：java, jquery, comments

我开发了包含文章的基于 Web 的应用程序（spring+hibernate+jQuery）。我需要一些工具/插件/框架/库来组织此应用程序用户对这些文章的评论。我搜索了互联网，发现只有一个 [http://www.9lessons.info/2011/05/facebook-wall-script-with-php-and.html](http://www.9lessons.info/2011/05/facebook-wall-script-with-php-and.html) 它使用 jQuery+PHP。

请帮助使用 Java+jQuery 上的其他工具

最好的问候，帕维尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:48:15.620

如果您要求进行评论管理，那么您应该查看：

[http://disqus.com/](http://disqus.com/)

[http://www.livefyre.com/](http://www.livefyre.com/)

# trigger.io - 如何使用不同的 Android sdk 和分辨率模拟器

> ID：11049172
> 
> 赞同：1
> 
> 时间：2012-06-15T10:43:12.123
> 
> 标签：trigger.io, forge

如何在测试使用 forge 时使用不同的 Android sdk 和分辨率模拟器？

我试图在 AVD Manager 中更改它，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:12:19.927

您可以指定不同的 Android SDK 与 android.sdk 参数 ( [http://docs.trigger.io/en/v1.3/tools/local-config.html#android](http://docs.trigger.io/en/v1.3/tools/local-config.html#android) )一起使用

例如在命令行上，

```
forge build --android.sdk /Applications/sdk 
```

在您的 local_config.json 中：

```
{
  "android": {
    "sdk": "/opt/local/android-sdk"
  }
} 
```

要使用不同的 AVD 级别或以其他方式自定义模拟器，请打开 Android SDK 管理器，然后打开 AVD 管理器。创建、自定义和启动您想要的任何 AVD。

**注意**：由于模拟器中的错误，您不能使用 2.3 AVD。

下次使用时`forge run android`，我们将使用手动启动的模拟器。

# java - 杰克逊 - 将 java 对象转换为 json - 需要所有键为大写

> ID：11049174
> 
> 赞同：5
> 
> 时间：2012-06-15T10:43:24.613
> 
> 标签：java, json, object, jackson, uppercase

在将 java 对象转换为 json 方面需要您的帮助。当前的 json 结果以小写字母显示所有键，我需要它是大写的。

```
ObjectMapper mapper = new ObjectMapper();
Writer strWriter = new StringWriter();
mapper.writeValue(strWriter, obj);
String jsonString= strWriter.toString(); 
```

结果是

```
[{"flags":"1","name":"Peter","location":"London","startDate":"2012-01-06 00:00"}] 
```

但我想要这样的结果（所有键键值都应该大写）：

```
[{"FLAGS":"YU","NAME":"Peter","LOCATION":"London","STARTDATE":"2012-01-06 00:00"}] 
```

并且也有可能得到这样的（大写的关键第一个字母）：

```
[{"Flags":"1","Name":"Peter","Location":"London","StartDate":"2012-01-06 00:00"}] 
```

谁可以帮我这个事。

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-15T10:50:09.697

杰克逊有多种方法可以做到这一点。

### 注释

您可以使用字段或 getter 方法上的`@JsonProperty` [注释](http://wiki.fasterxml.com/JacksonAnnotations)来注释您的对象。

例子：

```
@JsonProperty("Name")
public final String name;

@JsonProperty("Location")
public String getLocation() {
  return location;
} 
```

### 实现 JsonSerializableWithType 接口

```
@Override
public void serialize(final JsonGenerator jG, final SerializerProvider p)
    throws IOException, JsonProcessingException
{
    serializeWithType(jG, p, null);
}

@Override
public void serializeWithType(final JsonGenerator jG, final SerializerProvider p, final TypeSerializer typeSer)
    throws IOException, JsonProcessingException
{
    // here you can do your own serialization
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-27T10:45:10.143

我建议 `@JsonNaming`在班级级别使用注释。

然而，afaik 没有策略可以满足您对全部大写字母的需求。但你可能只写你自己的。

在我的情况下，我需要第一个字符大写。所以我使用了现有的 `@JsonNaming(value = UpperCamelCaseStrategy.class)`.

# google-maps - 了解 GEOKIT 中两个边界是否相互交叉

> ID：11049177
> 
> 赞同：0
> 
> 时间：2012-06-15T10:43:28.860
> 
> 标签：google-maps, geolocation, geocoding, geokit, google-geocoding-api

我使用 Geokit 库进行地理编码现在的问题是我有

**用户模型**和**事件模型**现在每个都有一个**半径**我想要其边界在事件边界中实际相交的所有用户列表

这里的场景

```
 Like Event E1 has radius 20 (which look for all users in radius of 20 from event origin)  

  and 

  User A has radius 100 (which look for all events in radius of 100 from 'A' origin)  

  User B has radius 200 (which look for all events in radius of 200 from 'B' origin)

  User C has radius 10 (which look for all events in radius of 10 from 'C' origin) 
```

现在我想要的是所有可以为事件提供服务的用户的列表 E1 记住**事件半径**

我现在在 geokit 中有一种方法可以在边界中找到一个点（**in_bounds**）但这还不足以满足我的需要，因为可能存在事件（E1 起源）超出用户范围但考虑事件半径（E1 边界）的情况在该用户的范围内

我想知道是否有办法确定给定的两个边界是否相互交叉。

我希望我能在没有真正混淆的情况下表达我的观点

考虑它是地理位置中两个物理地理边界相交的情况，我只想知道给定一组边界，它们是否实际相交

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:30:53.210

`contains()`我认为必须有一些方法，比如谷歌地图库中的方法，比如`intersects()`检查边界。

# android - 我可以在 android 3.0 中显示没有操作栏的选项卡吗？

> ID：11049180
> 
> 赞同：1
> 
> 时间：2012-06-15T10:44:05.807
> 
> 标签：android, tabs

我想在我的片段中显示标签，但不在操作栏上？这可能吗，任何链接或代码都可能有帮助？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-07T10:36:58.387

通过删除主页按钮和标题，我得到了没有 ActionBar 其余部分的选项卡，如下所示：

```
actionBar.setDisplayShowHomeEnabled(false);
actionBar.setDisplayShowTitleEnabled(false); 
```

而**不是**覆盖：

```
onCreateOptionsMenu 
```

这样，ActionBar 将是空的，Android 不会显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:15:41.777

这取决于您要使用哪种标签。在我的应用程序中，我将 ViewPager 与[指示器](http://viewpagerindicator.com/)一起使用，效果很好，所以也许它适合你。我希望我已经理解了你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T12:32:21.713

您可以使用[tabWidget](http://developer.android.com/reference/android/widget/TabHost.html)。在我的应用程序的一部分中，我有一个`TabActivity`内部活动使用片段的地方。所以，这是可能的。这可能不是最好的解决方案，但我必须按照客户的要求去做。

# .htaccess - 我可以只为单个页面从 .htacces 中删除 .html 吗？

> ID：11049182
> 
> 赞同：1
> 
> 时间：2012-06-15T10:44:14.863
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我有一个包含以下链接的网站

*   www.mydomain.com/NiceUrl1.html
*   www.mydomain.com/blog.html **_**
*   www.mydomain.com/AnotherNiceUrl.html

我应该应用什么 .htaccess 重写规则来实现以下结果？

*   www.mydomain.com/NiceUrl1.html
*   www.mydomain.com/**博客**
*   www.mydomain.com/AnotherNiceUrl.html

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:47:16.877

```
RewriteEngine On
RewriteRule ^blog\.html$ /blog [L,R=301]
RewriteRule ^blog$ blog.html 
```

那应该行得通。第二行确保任何`blog.html`访问都获得`301 - Moved Permanently`HTTP 标头，因此会`/blog`自动打开。第三行`/blog`指向`/blog.html`服务器。

# node.js - node.js 中的同步生成

> ID：11049201
> 
> 赞同：3
> 
> 时间：2012-06-15T10:46:36.003
> 
> 标签：node.js

我想在节点中创建一个子进程，并阻塞在光纤中，直到进程终止。他们按照我的理解，它应该看起来像这样：

```
var child_process = require ("child_process");
var Fiber = require ("fibers");
var Future = require ("fibers/future");

var ls = Fiber (function () {
    var lsproc = child_process.spawn ("ls");
    var lsonSync = Future.wrap (lsproc.on);

    console.log ("return: " + lsonSync ("exit").wait ());
}).run (); 
```

来自节点的响应是：

```
TypeError: Object #<Object> has no method 'emit' 
```

我认为这与我包装实例方法而不是函数的事实有关，但我不确定如何进行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T10:54:05.263

有时您需要提出问题才能让答案突然出现在您的脑海中。

在将来包装它之前将`on`-method绑定到可以解决问题：`lsproc`

```
var child_process = require ("child_process");
var Fiber = require ("fibers");
var Future = require ("fibers/future");

var ls = Fiber (function () {
    var lsproc = child_process.spawn ("ls", ["/etc"]);
    var lsonSync = Future.wrap (lsproc.on.bind (lsproc));

    console.log ("return: " + lsonSync ("exit").wait ());
}).run (); 
```

# qt - 为 Windows 平台构建的 Qt X11 应用程序

> ID：11049202
> 
> 赞同：3
> 
> 时间：2012-06-15T10:46:37.453
> 
> 标签：qt, mingw, x11, cross-compiling, mxe

我知道这很奇怪，但我需要在 MS Windows 平台上执行支持 X11 协议的 Qt GUI 应用程序。

很明显，如果我在 Unix 环境中构建我的 Qt 源代码，它会自动成为 X11 应用程序，并且该应用程序只能在 Unix 操作系统上运行，而不能在 MS Windows 上运行。

我尝试使用 MXE（MinGW 跨环境）在 Unix for Windows 中编译我的应用程序，但它对 X11 问题没有帮助。它为 Windows 创建了一个应用程序，但该应用程序不是 XWindow 应用程序。

minGW 还有一个 XPortMinGW 项目。但我不知道它是否适用于 Qt 应用程序。

有什么方法可以构建我的 Qt 应用程序，它支持 X11，可以在 Windows 操作系统中运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T05:06:54.530

我认为不需要交叉编译。有两个问题：

1.  为 Windows 编译 Xlib。我不知道移植到 Windows 的任何维护的 Xlib 实现。你肯定需要找到一个，或者做一个。希望 Xlib 仅依赖于少数 posix API，它们可能很容易转换为 win32。忘掉赛格温吧。

    您可能有幸将自己的 Xlib 移植到 Qt 的网络后端，并在此过程中使其跨平台。Xlib 将简单地使用 Qt 的核心和网络模块。没问题。

    好消息是 Qt 5 附带了一个捆绑的 Xlib 实现。与其他一些实现相比，在 Windows 上编译它可能要容易得多。

2.  将 Qt 配置为在 Windows 上使用所述 Xlib 进行构建。为了正确地做这件事，你可能想要弄乱一点并重新构建 Qt 附带的配置工具，并添加一个将与 Xlib 链接的 makespec。

    使用 Qt 5 应该更容易做到这一点。

这不是一件完全微不足道的事情，但应该是可能的。给自己一个月的时间，期望能非常熟悉 Qt 的配置和 Xlib 的一些细节。

### 关于 Cygwin 的注意事项

1.  如果您的应用程序是封闭源代码并在您的组织之外分发，您需要购买商业许可证才能重新分发 cygwin.dll。否则，Cygwin 是 GPL 并且仅链接到 cygwin.dll 会使您的应用程序成为派生作品。

2.  当您在同一个应用程序中混合使用 posix 和非 posix 代码时，Cygwin 会出现问题，尤其是当非 posix 代码是像 Qt 这样的大型框架时。您当然可以在 Qt 中使用 Posix 平台代码并使其全部在 Cygwin 上运行，但这样会降低性能并暴露于 Cygwin 的 POSIX API 仿真的缺点。

3.  将 Cygwin 用于 Xlib / 窗口系统但让 Qt 使用 Windows API 可能需要对 Qt 代码进行大量调整。所以当然可以在 Windows 上使用 Qt 和 Xlib，但至少你不必调试/解决 Cygwin 的怪癖。

# java - 通过 JavaPNS 发送通知时发生异常

> ID：11049207
> 
> 赞同：0
> 
> 时间：2012-06-15T10:46:47.877
> 
> 标签：java, iphone, ios, ipad, apple-push-notifications

通过 JavaPNS 发送推送通知时，出现以下消息异常。

> 线程“LIST 模式下的 JavaPNS 分组通知线程”中的异常 java.lang.OutOfMemoryError：Java 堆空间

我想原因是因为我试图将通知发送给太多用户 1 次。

```
public void send (List<Device> devices, Object keystore, String password, boolean production) {

       /* Prepare a simple payload to push */ 
        PushNotificationPayload payload = PushNotificationPayload.alert("Hello World!");

       /* Decide how many threads you want to create and use */ 
        int threads = 30;

       /* Start threads, wait for them, and get a list of all pushed notifications */ 
        List<PushedNotification> notifications = Push.payload(payload, keystore, password, production, threads, devices);

} 
```

我将 73,889 个设备令牌放入列表`devices`并收到异常。

你认为我需要多次发送通知吗？有人知道向很多人发送通知吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T21:26:19.783

我可以想到2个解决您的问题的方法：

1）发送批次......比如说20k

或者

2）增加你的堆内存大小

示例：java -Xms512m -Xmx512m

（搜索一下……）

# scala - 使用哪个 scala 可变列表？

> ID：11049213
> 
> 赞同：33
> 
> 时间：2012-06-15T10:47:11.777
> 
> 标签：scala, scala-collections

这是[No Scala mutable list的后续问题](https://stackoverflow.com/questions/6706060/no-scala-mutable-list)

我想在 Scala 中使用可变列表。我可以选择

*   [`scala.collection.mutable.DoubleLinkedList`](http://www.scala-lang.org/api/current/index.html#scala.collection.mutable.DoubleLinkedList)
*   [`scala.collection.mutable.LinkedList`](http://www.scala-lang.org/api/current/index.html#scala.collection.mutable.LinkedList)
*   [`scala.collection.mutable.ListBuffer`](http://www.scala-lang.org/api/current/index.html#scala.collection.mutable.ListBuffer)
*   [`scala.collection.mutable.MutableList`](http://www.scala-lang.org/api/current/index.html#scala.collection.mutable.MutableList)

哪个很好，但是什么是“标准”，推荐的，惯用的 scala 方式？我只想使用一个可以在后面添加内容的列表。

就我而言，我使用的是 HashMap，其中“列表”（我的意思是一般意义上的）将在价值方面。然后，我从文件中读取一些内容，对于每一行，我想在哈希图中找到正确的列表并将值附加到列表中。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-15T10:54:32.050

取决于你需要什么。

`DoubleLinkedList`是一个链表，允许您来回遍历节点列表。使用其`prev`和`next`引用分别转到上一个或下一个节点。

`LinkedList`是一个单链表，所以没有`prev`指针——如果你一直只遍历到列表的下一个元素，这就是你所需要的。

编辑：请注意，以上两个是为了在**内部**用作更复杂的列表结构的构建块，例如`MutableList`支持有效追加的 s 和`mutable.Queue`s.

上面的两个集合都有线性时间追加操作。

`ListBuffer`是一个缓冲区类。尽管它由单链表数据结构支持，但它不会将`next`指针暴露给客户端，因此您只能使用迭代器和`foreach`. 然而，它的主要用途是作为缓冲区和不可变列表构建器 - 您通过 向其添加元素`+=`，当您调用 时`result`，您可以非常有效地返回一个函数式`immutable.List`. 与可变和不可变列表不同，追加和前置操作都是恒定时间的 - 您可以`+=`非常有效地在末尾追加。

`MutableList`内部使用，一般不使用，除非你打算基于单链表数据结构实现自定义集合类。例如，可变队列继承了这个类。`MutableList`类还具有高效的恒定时间追加操作，因为它维护对列表中最后一个节点的引用。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-09-22T16:09:07.020

为了读者访问这个老问题：文档的[具体可变集合类](http://docs.scala-lang.org/overviews/collections/concrete-mutable-collection-classes.html)部分概述了可变列表类，包括何时使用哪一个的解释。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-15T10:54:35.643

如果要附加项目，则根本不应该使用 a `List`。`List`当您想预先添加项目时，s 很好。改为使用`ArrayBuffer`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-15T13:44:14.490

> 我只想使用一个可以在后面添加内容的列表。

然后选择实现的东西[`Growable`](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html#scala.collection.generic.Growable)。我个人建议其中一种`Buffer`实现。

我远离`LinkedList`and `DoubleLinkedList`，因为它们主要作为其他集合的底层实现存在，但在 Scala 2.9.x 之前有很多错误。从 Scala 2.10.0 开始，我预计各种错误修复已使它们达到标准。尽管如此，它们仍缺乏人们期望的一些方法，例如`+=`，您可以在基于它们的集合中找到这些方法。

# android - 如何更改选项菜单的语言？

> ID：11049216
> 
> 赞同：3
> 
> 时间：2012-06-15T10:47:11.993
> 
> 标签：android, menu

我想更改选项菜单的语言。此代码适用于我的所有活动，菜单除外。

```
public boolean onOptionsItemSelected(MenuItem item) {

    switch(item.getItemId()){
        case R.id.ingles:
            mLocale = new Locale("en");
            Locale.setDefault(mLocale); 
            config = getBaseContext().getResources().getConfiguration(); 
            if (!config.locale.equals(mLocale)) { 
                config.locale = mLocale; 
                getBaseContext().getResources().updateConfiguration(config, null); 
            }
            setContentView(R.layout.main);
            break;

        case R.id.euskera:
            mLocale = new Locale("eu");
            Locale.setDefault(mLocale); 
            config = getBaseContext().getResources().getConfiguration(); 
            if (!config.locale.equals(mLocale)) { 
                config.locale = mLocale; 
                getBaseContext().getResources().updateConfiguration(config, null); 
            }
            setContentView(R.layout.main);
            break;
    }
    return super.onOptionsItemSelected(item);
} 
```

为什么？我尝试使用 onPrepareOptionsMenu 但它创建了额外的菜单

```
public boolean onPrepareOptionsMenu(Menu menu) {

    if(config.equals(this.getBaseContext().getResources().getConfiguration())){
        MenuInflater inflater = this.getMenuInflater();
        inflater.inflate(R.menu.menu, menu);
        return true;
    }
    return false;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:49:18.307

最好将菜单标题字符串放在 Values`string.xml`中并`menu.xml`从那里设置

喜欢

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/new_game"

          android:title="@string/new_game"
          />

</menu> 
```

如果您想在运行时更改它，请参阅此

[在 Android 中以编程方式更改语言](https://stackoverflow.com/questions/2900023/change-language-programatically-in-android)

# asp.net-mvc - 有没有办法在 ViewBag 中搜索项目？

> ID：11049218
> 
> 赞同：1
> 
> 时间：2012-06-15T10:47:16.413
> 
> 标签：asp.net-mvc

我有一个 ViewBag.People 由 View 组成；

```
 var query = db.Vw_INTERACTPEOPLE.Select(p => new { p.PersonID, p.Fullname });
 ViewBag.People = new SelectList(query.AsEnumerable(), "PersonID", "FullName"); 
```

一切正常，但在我看来，我有另一个模型填充一个表，其中一个填充的项目是链接到 PersonID 的 JobcontactID（文本框）（我没有设计数据库）。所以我想在 viewbag 中搜索 ID，而不是显示它我想显示人员全名，那么是否有任何 viewbag 搜索功能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T11:20:26.597

我建议在您的 ViewModel 中传递该信息。从长远来看，它将保持清洁和可维护。这是一篇好文章：[在 ASP.NET MVC 应用程序中使用 ViewModels 管理数据和组织代码](http://www.rachelappel.com/use-viewmodels-to-manage-data-amp-organize-code-in-asp.net-mvc-applications)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T10:55:26.053

`ViewBag`只是一个`dynamic`包装器`ViewData`（它允许在运行时调用的属性成为将用于在 中查找值的键`ViewData`）。你可以`ViewData`这样查询：

```
SelectList peopleSelectList = (from pair in ViewData
                               where pair.Key == "People"
                               select pair.Value); 
```

**更新**所以你想查询选择列表本身？

这是剃刀视图中定义的函数：

```
@functions {
    public string FindPersonName(string id)
    {
        return (from item in ViewBag.People as SelectList
                where item.Value == id
                select item.Value).FirstOrDefault();
    }
}

@functions.FindPersonName(jobContactId) 
```

# c# - 具有最多 N 个线程的代码段，按 FIFO 顺序执行

> ID：11049221
> 
> 赞同：2
> 
> 时间：2012-06-15T10:47:35.347
> 
> 标签：c#, multithreading, algorithm, parallel-processing, synchronization

我有一段代码应该由小于 N 的最大线程数执行，并且线程调用 someFunction() 的顺序应该反映在它们进入该部分的顺序中，即 FIFO 顺序。

如果我使用[信号量](http://msdn.microsoft.com/en-us/library/system.threading.semaphore.aspx)，我无法控制线程进入该部分的顺序。

> “没有保证的顺序，例如 FIFO 或 LIFO，阻塞的线程进入信号量。”

最初的尝试：

```
class someClass
{
    static volatile Semaphore semaphore;
    ...

    someClass()
    {
        semaphore = new Semaphore(N,N)
    }

    someType someFunction(InputType input)
    {
        try
        {
            semaphore.WaitOne();
            /* Section Begins */
             var response = someHeavyJob(input); // submitted to the server
            return response;
            /* Section Ends */
        }
        finally
        {
            semaphore.Release();
        } 
    }
} 
```

如果我将 Semaphore 和 ConcurrentQueue 组合如下，线程可能会返回对其他线程带来的请求的响应，这将需要对代码的其他部分进行重大更改。以下问题的 .NET 4.5 解决方案是什么：

1.  允许代码部分中的最大线程数小于 N
2.  线程进入section的顺序是FIFO
3.  线程会得到他们带来的请求的响应（而不是其他线程带来的请求的响应）

    ```
    class someClass
    {
        static volatile ConcurrentQueue<someType> cqueue;
        static volatile Semaphore semaphore;
        ...

        someClass()
        {
           cqueue = new ConcurrentQueue<someType>();
           semaphore = new Semaphore(N,N)
        }

        someType someFunction(Request request)
        {
            try
            {
                cqueue.enqueue(request);
                semaphore.WaitOne();
                Request newrequest;
                cqueue.TryDequeue(out newrequest);

                /* Section Begins */

                var response = someHeavyJob(Request newrequest); // submitted to the server
                return response;
                /* Section Ends */
            }
            finally
            {
                semaphore.Release();
            }
        }
    } 
    ```

更新：我正在澄清我的问题：SomeHeavyJobs() 函数是对正在处理此作业的服务器的阻塞调用。

UPDATE2：谢谢大家的回答。为了记录：我最终使用了[FIFO Semaphore](http://dcutilities.codeplex.com/wikipage?title=Semaphore/FifoSemaphore%20&%20Mutex/FifoMutex%20Tutorial%20and%20Implementation%20Discussion)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:09:13.067

你看过[智能线程池](http://smartthreadpool.codeplex.com/)吗？

**[编辑]**

如果我仍然解决了问题，正如我在评论中所说的那样，我不相信多线程解决方案对于这个问题是可行的。

如果在任务*k* *-1*完成之前无法启动任务k ，那么您只需要一个线程即可执行它们。如果允许您并行执行*某些*任务组合，则需要准确指定规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T11:29:56.917

> 线程调用 someFunction() 的顺序也应该反映在它们进入该部分的顺序中，即 FIFO 顺序

这在原则上是不可能的。

```
semaphore.WaitOne(); //#1
var response = someHeavyJob(input); //#2 
```

即使 Semaphore 是严格的 FIFO，也可能发生以下情况：

1.  所有线程按先进先出顺序进入区段（1）
2.  所有线程都从 CPU 中取消调度（1 到 2 之间）
3.  所有线程都以随机顺序甚至 LIFO 顺序（1 到 2 之间）重新调度
4.  所有线程开始以任意顺序进入 someHeavyJob (2)

您永远无法确保线程会以特定顺序“进入”函数。

至于 FIFO 信号量，您可以使用锁和队列自己构建信号量。看起来您已经这样做并发布了代码。据我所知，这种方法是正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T12:29:03.247

“如果我将 Semaphore 和 ConcurrentQueue 组合如下，线程可能会返回对其他线程带来的请求的响应，这将需要对代码的其他部分进行重大更改。”

我不想这么说，但我会建议“更改代码的其他部分”，即使我不知道这会有多大的“意义”。

通常，按照您的建议，通过排队包含对原始类实例的引用的消息来满足这样的要求，以便可以将响应“返回”给请求它们的对象。如果发起者都来自某个“消息处理程序”类，这使得调用该函数的线程更容易（它应该是消息处理程序的成员）。一旦线程执行了函数，它们就可以调用消息处理程序的“onCompletion”方法。“onCompletion”可以表示发起者正在等待的事件（同步），或者将某些内容排队到发起者的私有 PC 队列中（异步）。

因此，一个 BlockingCollection、一个消费者线程和明智地使用 C++/C# 继承/多态应该可以完成这项工作。

奇怪的是，这几乎正是我在当前嵌入式 ARM 项目中被迫进行的。用于 config/debug/log 的命令行界面线程现在太大了，即使在“Thumb, Optimize of size”模式下，它也需要大量 600 字的堆栈。不再允许直接调用 SD 文件系统，现在必须将自己排队到运行 SD 卡的线程（它在系统中具有运行 FAT32 的最大堆栈），并在信号量上等待 SD 线程调用它的方法并在完成后发出信号量。

这是确保呼叫按顺序进行并且始终有效的经典方式。它基本上是一个只有一个线程的线程池。

就像其他海报所写的那样，任何其他方法都可能是错误的……“勇敢”。

# c# - 如何制作整数 ID 生成器？

> ID：11049222
> 
> 赞同：8
> 
> 时间：2012-06-15T10:47:37.153
> 
> 标签：c#, mongodb

众所周知，mongoDb 默认驱动程序不支持自动整数 ID 生成。我花了 2 天时间思考如何实现我自己的唯一整数值​​的 id 生成器。那么，如何制作呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T11:02:03.850

Its not good practice to make auto increment Id in MongoDB, as I will hurt in scaling your server, but If you want to make auto increment value it is not advisable to iterate your collection, Instead make a separate table (sequence like concept) and read value from there and increment it using findAndModify. It will be unique per table.

```
> db.counters.insert({_id: "userId", c: 0});

> var o = db.counters.findAndModify(
...        {query: {_id: "userId"}, update: {$inc: {c: 1}}});
{ "_id" : "userId", "c" : 0 }
> db.mycollection.insert({_id:o.c, stuff:"abc"});

> o = db.counters.findAndModify(
...        {query: {_id: "userId"}, update: {$inc: {c: 1}}});
{ "_id" : "userId", "c" : 1 }
> db.mycollection.insert({_id:o.c, stuff:"another one"}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T11:17:09.233

**我会使用 GUID 作为主键而不是整数。** 它主要有两个好处

*   它是线程安全的
*   您无需担心计算下一个 ID。
*   获取新 ID 所需的代码非常简单

    Guid.NewGuid()

查看 CodingHorror 中的这篇有用[文章](http://www.codinghorror.com/blog/2007/03/primary-keys-ids-versus-guids.html)，该文章解释了使用 GUID 而非经典整数 ID 的优缺点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T11:49:13.693

一个迟到的答案，但我想我会发布这个：

[https://github.com/alexjamesbrown/MongDBIntIdGenerator](https://github.com/alexjamesbrown/MongDBIntIdGenerator)

我开始使用增量 ID 生成器。
注意 - 这远非理想，也不是 mongodb 的目的。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-06-15T10:47:37.527

像这样的东西：

```
public class UniqueIntGenerator : IIdGenerator
{
    private static UniqueIntGenerator _instance;

    public static UniqueIntGenerator Instance { get { return _instance; } }

    static UniqueIntGenerator()
    {
        _instance = new UniqueIntGenerator();
    }

    public object GenerateId(object container, object document)
    {
        var cont = container as MongoCollection;
        if (cont == null)
            return 0;

        var type = cont.Settings.DefaultDocumentType;
        var cursor = cont.FindAllAs(type);
        cursor.SetSortOrder(SortBy.Descending("_id"));
        cursor.Limit = 1;

        foreach (var obj in cursor)
            return GetId(obj) + 1;

        return 1;
    }

    private int GetId(object obj)
    {
        var properties = obj.GetType().GetProperties();
        var idProperty = properties.Single(y => y.GetCustomAttributes(typeof(BsonIdAttribute), false).SingleOrDefault() != null);
        var idValue = (int)idProperty.GetValue(obj, null);
        return idValue;
    }

    public bool IsEmpty(object id)
    {
        return default(int) == (int)id;
    }
} 
```

# css - 如何在不使用css更改为图像的情况下使文本透明

> ID：11049224
> 
> 赞同：1
> 
> 时间：2012-06-15T10:47:38.840
> 
> 标签：css

我有一个导航栏，它告诉用户通过更改文本颜色和黑色背景选择了哪个页面。我只想使当前页面导航中的文本透明。

此处的示例：[sammarchant.co.uk/new](http://sammarchant.co.uk/new/) - 向下滚动到灰色区域以查看

我已经使用 CSS3 进行了研究，但没有运气，我想将加载时间降到最低，因此不想使用图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:50:55.993

这对于普通的 CSS/CSS3 是不可能的。

即使您确实使文本透明，滚动到灰色区域时它也不会显示为灰色。如果文本是透明的，它将在其后面显示黑色背景。

但是，您可以使用一些 javascript 来检测背景是什么，并据此更改字体的颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:54:19.563

代码应该是这样的： -

```
nav a.current {
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
    filter: alpha(opacity=50);
    -moz-opacity:0.5;
    -khtml-opacity: 0.5;
    opacity: 0.5;
} 
```

编辑：根据您的评论添加此

```
CSS:
nav a.current span {
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";
    filter: alpha(opacity=50);
    -moz-opacity:0.5;
    -khtml-opacity: 0.5;
    opacity: 0.5;
}

HTML:
<nav>
    <ul>
       <li><a href="#"><span>Link></span><a></li>
    </ul>
</nav> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T10:57:58.263

在纯 CSS 中不使用图像的另一种方法是使用自定义字体。您所要做的就是找到/创建一个字体，其中的字符是黑色背景的透明字母。类似于[这个字体](http://www.dafont.com/impact-label.font?nb_ppp=50&af=on)

您可以在服务器上放置适当的字体并使用 [CSS @font-face](https://developer.mozilla.org/en/CSS/@font-face)规则将其导入

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T11:27:02.563

你使用白色作为文本颜色和黑色作为背景，所以如果它的 trnaparent 它看起来像灰色

你的代码看起来像这样

```
css
    nav a.current {
        background:black;
        color: white;
        padding: 5px;
        -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)"; /* For IE*/
        filter: alpha(opacity=50);  
        -moz-opacity:0.5;
        -khtml-opacity: 0.5;    
        opacity: 0.5;
    }

Html

    <nav>
         <a class="current" href="index.html">home</a>             
    </nav> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-29T15:01:53.247

制作`fontsize:0px`。您将获得透明的文本。

# python - 在 appengine 中添加新应用

> ID：11049227
> 
> 赞同：1
> 
> 时间：2012-06-15T10:47:42.397
> 
> 标签：python, google-app-engine

3 天前，我开始使用 google appengine 来看看它是如何工作的。

我已经设置了打印“hello”的基本应用程序。没什么复杂的。我更新了打印“hello”应用程序的简单应用程序，它运行良好。

然后我想多做一点实验：

首先我上传了新程序（我没有更改 app.yaml，只是 main.py）然后我得到了一个空屏幕。

然后我上传了一个新版本的应用程序（在 app.yaml 和 main.py 中更改了版本），我在后端的 admin 中更改了一个版本。我仍然有一个空的屏幕。

谢谢。

这是我的代码：main.py

```
#!/usr/bin/env python
print 'Hello, World!' 
```

应用程序.yaml：

```
application: searchbarrel
version: 2
runtime: python
api_version: 1

handlers:
- url: /.*
  script: main.py 
```

该应用程序在本地主机上运行良好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T16:44:10.553

您的 CGI 脚本需要在输出文本之前至少打印一个空白行，因为浏览器会将第一行作为 HTTP 标头：

```
#!/usr/bin/env python
print '\nHello, World!' 
```

会正常工作。

理想情况下，您应该在空行之前打印实际有效的 HTTP 标头。

dev_appserver 的行为与生产服务器稍有不同，这就是您看到输出在本地运行的原因。

（不过，使用 WSGI 框架是个好主意。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:17:55.143

这行不通。写一个有内部的文件是不够的`print hello`。您需要创建一个 WSGI 应用程序并创建一个 RequestHandler 来处理您的请求并写出`hello world`。

主文件

```
import webapp
from google.appengine.ext.webapp.util import run_wsgi_app

class MainPage(webapp.RequestHandler):
    def get(self):
        self.response.out.write('Hello, World')

app = webapp2.WSGIApplication([('/', MainPage)])

def main():
    application = webapp.WSGIApplication([("/", MainPage)], debug=True)
    run_wsgi_app(application)

if __name__ == "__main__":
    main() 
```

您应该先阅读入门指南。 [https://cloud.google.com/appengine/docs/standard/python/](https://cloud.google.com/appengine/docs/standard/python/)

# css - chrome和mozilla中的css文本阴影差异

> ID：11049229
> 
> 赞同：1
> 
> 时间：2012-06-15T10:47:45.967
> 
> 标签：css, em

假设我想为大小为 33 像素的文本添加阴影。我更喜欢阴影的单位是 em，因为我希望在浏览器缩放页面时缩放阴影。

我希望我的阴影**模糊度为 2px**。所以我的 em 值为 2/33 =0.0606 em。所以，

```
text-shadow: 0em 0em 0.0606em black; 
```

但是有一个问题！值 0.0606 不准确**（2/33 重复出现） 0.0303 小于实际值**。Mozilla 将 em 值四舍五入到更高的 px 值。在这种情况下，它将保持 2px。但 Chrome 将其四舍五入。所以在这种情况下，它只是**1px**。

现在我想摆脱一个糟糕的分歧。我如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T01:07:14.873

我知道尝试使用 css 单独寻址每个浏览器听起来可能是多余的。这样浏览器就可以按自己的节奏打。[http://davidwalsh.name/css-box-shadow](http://davidwalsh.name/css-box-shadow)

# php - 在 listData 函数中获取外部表记录

> ID：11049237
> 
> 赞同：1
> 
> 时间：2012-06-15T10:48:16.297
> 
> 标签：php, yii

这是 YII 框架，我有下表：tbl_banner_location_type

```
bannerLocationTypeId(PK)    bannerLocationId(FK)    bannerTypeId(FK)
1                           1                       2
2                           2                       5
3                           1                       6 
```

现在我将bannerLocationId 的值作为输入。即 1 我想要来自不同表的所有横幅类型值。我尝试了下面的代码，但出现错误：**Property BannerLocationType.$data->bannerType->value" is not defined。**

```
$data = BannerLocationType::model()->findAll('bannerLocationId=:bannerLocationId', 
              array(':bannerLocationId'=>(int) $_POST['bannerLocationId']));

$data = CHtml::listData($data,'bannerTypeId','$data->bannerType->value');   
echo CHtml::tag('option', array('value'=>''),CHtml::encode('- - Select - -'),true);
foreach($data as $value=>$name)
{
    echo CHtml::tag('option',
               array('value'=>$value),CHtml::encode($name),true);
} 
```

我知道我可以通过以下方式获得它的价值，但我想要数组。

```
$obj= BannerLocationType::model()->findByPk($id); 
$obj->bannerType->value; 
```

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T12:25:16.530

哦……问题已解决……那太基础了……我的 YII 知识很差。

我改变了

```
 $data = CHtml::listData($data,'bannerTypeId','$data->bannerType->value'); 
```

和

```
$data = CHtml::listData($data,'bannerTypeId','bannerType.value'); 
```

对不起朋友，如果我的问题不清楚。但我不确定我如何代表这个问题。

# air - 彗星空气超时喷雾

> ID：11049238
> 
> 赞同：0
> 
> 时间：2012-06-15T10:48:17.180
> 
> 标签：air, comet, akka, long-polling, spray

我正在构建一个长轮询 Spray 服务器以获取相关更新的 Air 应用程序。

我是 Spray 的新手，并且读到过，如果请求没有按时处理，框架会自动向客户端发送 500 超时错误。我可以在 Air 端捕捉到这个错误，然后发送另一个请求，等等。

使用这种方法是否有任何缺点（我想不出任何缺点），还是最好避免超时并将某种“无消息”消息发送回客户端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:40:47.287

我想说，从 RESTful 的角度来看，响应应该与资源的状态有关。查看可用的响应代码：

> **204 No Content**服务器成功处理了请求，但没有返回任何内容。

这表明请求已成功执行，但没有可返回的内容。

[204 无内容](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.5)

# java - 使用 Mockito isEmpty 的模拟列表总是返回 false，即使大小为 0

> ID：11049245
> 
> 赞同：8
> 
> 时间：2012-06-15T10:48:44.723
> 
> 标签：java, mocking, mockito

我正在玩 Mockito (1.9.5) 并停留在第一个简单的测试用例：

```
List mockedList = mock(ArrayList.class);
assertEquals(0, mockedList.size()); // Passed
assertTrue(mockedList.isEmpty()); // Failed 
```

谁能解释为什么这里 isEmpty() 返回 false 而 size() 返回 0？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-15T10:53:08.590

我认为这是因为 mockito 不`isEmpty()`知道`false`. 同样的想法也会发生，`size()`但这里的默认值为`0`.

基本上，您需要定义模拟对象的预期行为。如果不这样做，它将返回默认值。

# ruby-on-rails - 为什么 Rails where 子句不返回布尔条件的结果？

> ID：11049247
> 
> 赞同：0
> 
> 时间：2012-06-15T10:48:45.970
> 
> 标签：ruby-on-rails, sqlite, squeel

我有以下 squeel 查询：

```
i = Invoice.where{ paid == true } 
```

这与以下内容相同：

```
i = Invoice.where ['paid = ?', true] 
```

并执行：

```
SELECT "invoices".* FROM "invoices" WHERE "invoices"."paid" = 't' 
```

但是，此查询根本不返回任何发票。如果我尝试从我的 sqlite 程序 ether 执行查询，它不起作用，似乎该查询是错误的。我绝对确定在 sqlite db 中有发票，'t' 和 'f' 作为价值。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:03:23.620

SQLite 没有单独的布尔存储类。相反，布尔值存储为整数 0（假）和 1（真）。试试这个：

```
i = Invoice.where{ paid == 1 } 
```

另见：[http ://www.sqlite.org/datatype3.html](http://www.sqlite.org/datatype3.html)

更新：

我在这里找到了一个很好的解释你的困境。请参阅[Rails 3 SQLite3 Boolean false](https://stackoverflow.com/questions/6013121/rails-3-sqlite3-boolean-false)。

祝你好运！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-15T12:00:21.077

我相信正确的语法应该是：

```
 i = Invoice.where(paid: true)  # corrected from using braces to parenthesis 
```

# jquery - jquery mouseleave() 被忽略

> ID：11049249
> 
> 赞同：2
> 
> 时间：2012-06-15T10:48:53.820
> 
> 标签：jquery, menu, mouseleave

嗨，我在下拉导航菜单上使用 mouseleave()，这样当用户离开子菜单下拉菜单时，子菜单就会消失，但是它似乎忽略了它并且菜单仍然存在。有任何想法吗？这是网站和代码：

[http://www.maiagifts.c​​o.uk/about-us/info_1.html](http://www.maiagifts.co.uk/about-us/info_1.html)

```
 $(document).ready(function() {

    $('#newcats li').addClass('parentitem');
    $('.newsubs li').removeClass('parentitem');
    $('.newsubs').hide();                      

    $('.parentitem').hover(              
    function(){
    $(this).children('.newsubs').show();
    $(this).siblings('.parentitem').children('.newsubs').hide();

 });

    //problem is here//
    $('.newsubs').mouseleave(
    function(){
    $(this).hide();
    });
    //problem is here//

    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T10:52:36.117

尝试`.on`

```
$('.newsubs').on('mouseleave', function(){
    $(this).hide();
}); 
```

如果您使用的 jquery 版本低于 1.7.1，请使用`.live()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:53:30.257

你有没有尝试过：

```
 $('.newsubs').mouseleave(
    function(){
    $('.newsubs').hide();
    }); 
```

那会达到你想要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T10:56:50.380

如果您查看您正在链接到的站点的开发控制台，您将看到一堆错误消息，其中一个（重复）是`"Uncaught TypeError: Object #<Object> has no method 'mouseleave'"`这样的，因此上述附加处理程序的代码永远不会执行。

`.on`也没有定义，我猜它们都是您 `Uncaught TypeError: Cannot read property 'guid' of undefined`在 jquery 第 91 行收到的第一条错误消息的结果。

换句话说，jQuery 脚本不会以它的完整长度执行，`mouseleave`并且其他方法（例如`on`从未定义过）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T11:44:06.400

我将 hover() 方法更改为 .mouseover() 并开始工作。我想知道是否因为我使用 hover() 的函数仅用于它的 mouseover 部分，jquery 已经决定它有一个空的 mouseleave 所以忽略了第二个。只是一个猜测。

# php - 如何使用正则表达式删除除某些单词之外的所有内容？

> ID：11049252
> 
> 赞同：1
> 
> 时间：2012-06-15T10:49:05.347
> 
> 标签：php, regex, preg-replace

> **可能重复：**
> [正则表达式：匹配所有单词，除了](https://stackoverflow.com/questions/5463348/regular-expression-match-all-words-except)

我需要您的帮助才能在 PHP 中使用 Regex 来否定选择。所以我有一个这样的字符串：“你好，我的名字是汤姆”

我需要做的是从这个字符串中删除所有内容，而不是“tom”或“jack”或“alex”，所以我尝试了：

```
$MyString = "Hello my name is tom"
print_r(preg_replace('#^tom|^jack|^alex#i', '', $MyString)); 
```

但它不工作...

你能帮我吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T10:58:23.513

如果您想删除除某些东西之外*的*所有内容，最好反过来做：仅捕获*某些东西*？例如...

```
$testString = 'Hello my name is tom or jack';
$matches = array();
preg_match_all('/\b(tom|jack|alex)\b/i', $testString, $matches);
$result = implode('', $matches[0]);
echo $result; // tomjack 
```

您尝试做的是使用字符类语法（[`^s]`将匹配除 s 之外的任何字符）。但这不适用于一系列字符，没有“单词类”之类的东西。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:53:08.013

正则表达式：

```
\b(?!tom|jack|alex)[^\s]+\b 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T11:00:31.760

如果要删除**不是**“tom”、“jack”或“alex”的所有内容，可以使用以下命令：

```
$MyString = "Hello my name is jack";
print_r(preg_replace('#.*(tom|jack|alex)#i', '$1', $MyString)); 
```

这会将整个字符串替换为匹配的名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T11:03:59.113

你可以匹配你想要的，然后重建字符串：

```
$s = 'hello my name is tom, jack and alex';

if (preg_match_all('/(?:tom|jack|alex)/', $s, $matches)) {
print_r($matches);
        $s = join('', $matches[0]);
} else {
        $s = '';
}

echo $s; 
```

输出：

```
tomjackalex 
```

# android - Mediaplayer 不适用于 Google Drive 媒体文件

> ID：11049258
> 
> 赞同：1
> 
> 时间：2012-06-15T10:49:46.937
> 
> 标签：android, media-player, google-drive-api

我为 Google Drive 开发了两个 Android 应用程序。用于图像数据的图库应用程序运行良好。我的第二个应用是音乐播放器。在这里，我确实对 Google Drive 提供的下载链接有一些问题。一个例子：

这是 Google Drive 为 MP3 文件提供的下载链接：

```
https://docs.google.com/uc?authuser=0&id=0B2hum21gMcbZaTJNMHIrbnJqSUk3aTFYb1pzOStyNjN3Z3ZnPQ&export=download&revision=true 
```

在浏览器中使用此链接时，将下载文件。

通常我可以将这样的链接提供给在服务（setDataSource）中运行的 Android Mediaplayer。我确实有一个类似的应用程序可以为 Wuala 媒体数据执行此操作 - 它完全按预期工作。但它不适用于 Google Drive 返回的链接。

```
player.id = newId;
player.status = PlayerObject.BUFFERING;
player.mediaPlayer.setOnBufferingUpdateListener(this);
player.mediaPlayer.setOnCompletionListener(this);
player.mediaPlayer.setOnErrorListener(this);
player.mediaPlayer.setOnInfoListener(this);
player.mediaPlayer.setOnPreparedListener(this);
player.mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
player.mediaPlayer.setDataSource(player.playlist.getUrl());
player.mediaPlayer.prepareAsync(); 
```

这是LogCat：

```
I/StagefrightPlayer(116): setDataSource('https://docs.google.com/uc?authuser=0&id=0B2hum21gMcbZaTJNMHIrbnJqSUk3aTFYb1pzOStyNjN3Z3ZnPQ&export=download&revision=true')
E/MediaPlayer(23964): error (1, -2147483648)
E/MediaPlayer(23964): Error (1,-2147483648)
E/MediaPlayer(23964): stop called in state 0
E/MediaPlayer(23964): error (-38, 0)
I/StagefrightPlayer(116): setDataSource('https://docs.google.com/uc?authuser=0&id=0B2hum21gMcbZUjlDUkRHV000d1JVZ2xDZVlIK25WY3ZEQzVRPQ&export=download&revision=true')
E/MediaPlayer(23964): error (1, -2147483648)
E/MediaPlayer(23964): stop called in state 0
E/MediaPlayer(23964): error (-38, 0)
W/MediaPlayer(23964): mediaplayer went away with unhandled events
W/MediaPlayer(23964): mediaplayer went away with unhandled events
W/MediaPlayer(23964): mediaplayer went away with unhandled events 
```

知道是什么让这个链接如此特别吗？

提前谢谢了。

**编辑：**失败的链接是公共链接（谁有链接可以访问......）。所以，不需要认证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T10:59:23.633

可能是你需要认证。这可能对您有所帮助：[带有 HTTP 身份验证的 REST API](http://inchoo.net/mobile-development/android-development/rest-api-with-http-authentication-android-beanstalk-example/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-20T17:06:11.473

我在 android 2.3 中发现了同样的问题（但在 3.0 之后，不是问题）是在 setDataSource url 链接应该在 http。但谷歌驱动器提供 https 链接。

# linux - Linux 命令 - 管道命令

> ID：11049263
> 
> 赞同：3
> 
> 时间：2012-06-15T10:50:38.593
> 
> 标签：linux, shell, command, piping

我尝试了以下命令`find ~/dir1 *.m4a | play`

目录 dir1 中正好有 1 个 m4a 文件，我想播放它但是我从播放中得到一个使用错误。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T10:56:56.700

您编写的内容指示将 find 命令（一个 m4a 文件）的输出作为下一个命令 play*的输入发送。*

现在，我不知道那出戏究竟是什么，但最有可能的是，它的语法是这样的：

```
play filename 
```

但是你写的翻译成：

```
play < "filename" 
```

所以，你可能想要做的是使用像 xargs 这样的命令，它会做到这一点：

```
find ~/dir1 *.m4a | xargs play 
```

结果是：

```
play foundfile1 foundfile2 ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T10:58:36.237

可能玩不使用 STDIN 所以你必须使用 xargs

```
 find ~/dir1 \*.m4a |xargs play 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T10:59:05.247

您正在尝试通过管道传输文件的内容（即通过 STDIN 发送）。据我从播放手册页中可以看出，它不能做到这一点。

您想发送找到播放的文件名，如下所示：

找到 ~/dir1 *.m4a | xargs 玩

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T11:02:41.047

采用`find -name *.mp4 -exec play {} /;`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-15T10:57:04.863

尝试另一种方式：

```
play ~/dir1 *.m4a 
```

如果不工作 - 检查播放是否支持 m4a

或尝试在您的 pip 行中使用 xargs

```
xargs play 
```

# android - 如何在android中以编程方式创建的Imageview上实现捏缩放？

> ID：11049264
> 
> 赞同：2
> 
> 时间：2012-06-15T10:50:43.590
> 
> 标签：android, imageview, pinchzoom

> **可能重复：**
> [android多点触控图像缩放？](https://stackoverflow.com/questions/3055133/android-multitouch-image-zooming)

如何在 Android 中以编程方式创建的 Imageview 上实现捏缩放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:01:18.887

See this : [http://vivin.net/2011/12/04/implementing-pinch-zoom-and-pandrag-in-an-android-view-on-the-canvas/](http://vivin.net/2011/12/04/implementing-pinch-zoom-and-pandrag-in-an-android-view-on-the-canvas/)

and [How can I get zoom functionality for images?](https://stackoverflow.com/questions/2537238/how-can-i-get-zoom-functionality-for-images)

also see : [http://androidtrainningcenter.blogspot.se/2012/04/pinching-zoom-in-android-image-view-or.html](http://androidtrainningcenter.blogspot.se/2012/04/pinching-zoom-in-android-image-view-or.html)

and : [http://www.mysecretroom.com/www/programming-and-software/android-multi-touch-handling](http://www.mysecretroom.com/www/programming-and-software/android-multi-touch-handling)

# mysql - SELECT ... FOR UPDATE 应用于日期范围时的锁定问题

> ID：11049266
> 
> 赞同：0
> 
> 时间：2012-06-15T10:51:00.343
> 
> 标签：mysql, transactions, locking, innodb

我有以下表格结构。

```
 reservation: (InnoDB)
  ------------------------------------------
  id INT,
  date DATE,
  item_id INT,
  slot VARCHAR(50);
  PRIMARY KEY(id), UNIQUE KEY(item_id,date). 
```

现在我正在尝试在事务内的保留表上使用 SELECT.....FOR UPDATE 来锁定特定 item_id 的日期范围内的特定行（例如：2012-06-15 到 2012-06-16）。

```
SELECT availability FROM reservation WHERE item_id={$item_id} AND (date>='{$to_date}' AND date<='{$from_date}') FOR UPDATE 
```

现在，当我使用上述语句时，它会阻止特定 item_id 的所有行，甚至超出日期范围。我也在使用这个唯一键（item_id，date）。

如何仅锁定特定 item_id 的特定日期范围？

问候，
拉维。

添加：

```
 |
=====================================
120615 20:14:13 INNODB MONITOR OUTPUT
=====================================
Per second averages calculated from the last 24 seconds
----------
SEMAPHORES
----------
OS WAIT ARRAY INFO: reservation count 12, signal count 12
Mutex spin waits 0, rounds 180, OS waits 4
RW-shared spins 10, OS waits 5; RW-excl spins 2, OS waits 2
------------
TRANSACTIONS
------------
Trx id counter 0 15147
Purge done for trx's n:o < 0 15136 undo n:o < 0 0
History list length 2
Total number of lock structs in row lock hash table 2
LIST OF TRANSACTIONS FOR EACH SESSION:
---TRANSACTION 0 0, not started, OS thread id 2940
MySQL thread id 76, query id 1487 localhost 127.0.0.1 root
SHOW innodb status
---TRANSACTION 0 15143, not started, OS thread id 2588
MySQL thread id 10, query id 578 localhost 127.0.0.1 root
---TRANSACTION 0 15144, ACTIVE 11526 sec, OS thread id 2740
3 lock struct(s), heap size 320
MySQL thread id 11, query id 577 localhost 127.0.0.1 root
--------
FILE I/O
--------
I/O thread 0 state: wait Windows aio (insert buffer thread)
I/O thread 1 state: wait Windows aio (log thread)
I/O thread 2 state: wait Windows aio (read thread)
I/O thread 3 state: wait Windows aio (write thread)
Pending normal aio reads: 0, aio writes: 0,
 ibuf aio reads: 0, log i/o's: 0, sync i/o's: 0
Pending flushes (fsync) log: 0; buffer pool: 0
187 OS file reads, 75 OS file writes, 29 OS fsyncs
0.00 reads/s, 0 avg bytes/read, 0.00 writes/s, 0.00 fsyncs/s
-------------------------------------
INSERT BUFFER AND ADAPTIVE HASH INDEX
-------------------------------------
Ibuf: size 1, free list len 0, seg size 2,
0 inserts, 0 merged recs, 0 merges
Hash table size 62383, used cells 0, node heap has 1 buffer(s)
0.00 hash searches/s, 0.00 non-hash searches/s
---
LOG
---
Log sequence number 0 8287163
Log flushed up to   0 8287163
Last checkpoint at  0 8287163
0 pending log writes, 0 pending chkp writes
24 log i/o's done, 0.00 log i/o's/second
----------------------
BUFFER POOL AND MEMORY
----------------------
Total memory allocated 23277934; in additional pool allocated 1430400
Buffer pool size   960
Free buffers       895
Database pages     64
Modified db pages  0
Pending reads 0
Pending writes: LRU 0, flush list 0, single page 0
Pages read 64, created 0, written 51
0.00 reads/s, 0.00 creates/s, 0.00 writes/s
Buffer pool hit rate 1000 / 1000
--------------
ROW OPERATIONS
--------------
0 queries inside InnoDB, 0 queries in queue
1 read views open inside InnoDB
Main thread id 1544, state: waiting for server activity
Number of rows inserted 10, updated 0, deleted 0, read 66
0.00 inserts/s, 0.00 updates/s, 0.00 deletes/s, 0.00 reads/s
----------------------------
END OF INNODB MONITOR OUTPUT
============================
 | 
```

# php - 日期时间字段不会在 MySQL 中的 UPDATE 上更改

> ID：11049268
> 
> 赞同：2
> 
> 时间：2012-06-15T10:51:15.727
> 
> 标签：php, mysql, timestamp, mysqli

我已经建立了一个数据库，这是其中一张表：

```
+-------------------------+------------+------+-----+---------------------+-------+
| Field                   | Type       | Null | Key | Default             | Extra |
+-------------------------+------------+------+-----+---------------------+-------+
| id                      | char(23)   | NO   | PRI | NULL                |       | 
| claim_date              | timestamp  | NO   |     | CURRENT_TIMESTAMP   |       | 
| banned                  | tinyint(1) | NO   |     | NULL                |       | 
| available_downloads     | tinyint(4) | NO   |     | 10                  |       | 
| last_download_attempt   | datetime   | NO   |     | NULL                |       | 
| last_activation_attempt | datetime   | NO   |     | NULL                |       | 
| download_exp_date       | timestamp  | NO   |     | 0000-00-00 00:00:00 |       | 
| available_activations   | tinyint(4) | NO   |     | 5                   |       | 
| os_version              | tinyint(1) | NO   |     | NULL                |       | 
+-------------------------+------------+------+-----+---------------------+-------+ 
```

问题是：每当我尝试使用 mysqli_stmt 和 mysqli->query() 使用新值更新记录时，除了日期时间值之外，所有值都会发生变化。我正在使用的查询是

```
$stmt = $this->db->prepare('UPDATE licences SET available_activations=available_activations-1, last_activation_attempt=? WHERE id=?');
$stmt->bind_param("ss", date("Y-m-d H:i:s"), $licence_id);
$stmt->execute(); 
```

available_activations 值减少，但 last_activation_attempt 不会改变。我什至尝试对时间值进行硬编码（以“Ymd His”和时间戳格式），我尝试将数据类型更改为时间戳，但它仍然无效。当我在 mysql 控制台中输入相同的查询时，它工作正常，但 php 似乎无法处理它。在这种情况下我能做什么？

**更新** 最奇怪的事情是什么 - 这段代码被称为外部应用程序的类方法，当我从自定义 php 代码调用它（方法）时它工作正常（available_activations 和 last_activation_attempt 值都已更改），但是当我使用此应用程序仅更改 available_activation 值。它使用 $_POST 数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:50:29.273

就测试而言，我没有太多时间，但尝试以 MySQL 的时间戳格式使用它。

```
$stmt->bind_param("ss", date("YmdHis"), $licence_id); 
```

我不记得了，但我认为 MySQL 更喜欢这种方式，即使它以`Y-m-d H:i:s`格式输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:44:22.503

当我尝试重新创建时，我可以让它工作。几个想法：检查 prepare、bind_param 和 execute 调用是否失败。

在这种情况下，在准备好的语句中简单地将 last_activation_attempt 设置为 NOW() 而不是在 date() 值中绑定不是更容易吗？

# c# - Windows 窗体自定义操作 (dll)

> ID：11049269
> 
> 赞同：2
> 
> 时间：2012-06-15T10:51:25.353
> 
> 标签：c#, winforms, installation

我有一个 Windows 窗体应用程序，并使用 Visual Studio 2010 中的向导创建了一个 Windows 安装程序。应用程序安装后，我想从我编写的另一个程序集中运行一个操作。我尝试运行的代码位于名为 RegistrationController 的程序集中，并由 Windows 窗体应用程序引用，因此我想运行：

```
var controller = new RegistrationController();
controller.Register("Adrian"); 
```

一旦应用程序成功安装。我似乎找不到如何添加动作。

在此先感谢，阿德里安

# android - 从图库中选择图像并保存以备将来使用

> ID：11049270
> 
> 赞同：2
> 
> 时间：2012-06-15T10:51:31.337
> 
> 标签：android, image, save

我正在开发应用程序，我希望用户可以从图库中选择图像，以便他可以在其上应用框架。我成功访问了移动图库，现在我想知道如何保存所选图像以供进一步处理。所选图像将用于在其上应用框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:56:19.957

干得好。

```
protected void onActivityResult(int requestCode, int resultCode, Intent imageReturnedIntent) { 
    super.onActivityResult(requestCode, resultCode, imageReturnedIntent); 

    switch(requestCode) { 
    case REQ_CODE_PICK_IMAGE:
        if(resultCode == RESULT_OK){  
            Uri selectedImage = imageReturnedIntent.getData();
            String[] filePathColumn = {MediaStore.Images.Media.DATA};

            Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);
            cursor.moveToFirst();

            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
            String filePath = cursor.getString(columnIndex);
            cursor.close();

            Bitmap yourSelectedImage = BitmapFactory.decodeFile(filePath);

            //Now do whatever processing you want to do on it.
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:52:38.043

使用以下代码从图库中选择图像：

```
Intent intent=new Intent();
intent.setType=("image/*");
intent.setAction(Intent.ACTION_GET_CONTENT);
startActivityForResult(Intent.createChooser(intent,"Select Picture"), PICK_IMAGE);
/*Declare PICK_IMAGE globally :  private static final int PICK_IMAGE = 1;  */ 
```

实际代码从这里开始

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    switch (requestCode) {
    case PICK_IMAGE:
        if (resultCode == Activity.RESULT_OK) {
            Uri selectedImageUri = data.getData();
            try {
                // OI FILE Manager
                String filemanagerstring = selectedImageUri.getPath();

                // MEDIA GALLERY
                String selectedImagePath = getPath(selectedImageUri);

                if (selectedImagePath != null) {
                    filePath = selectedImagePath;
                } else if (filemanagerstring != null) {
                    filePath = filemanagerstring;
                } else {
                    Toast.makeText(getApplicationContext(), "Unknown path",
                            Toast.LENGTH_LONG).show();
                    Log.e("Bitmap", "Unknown path");
                }

                if (filePath != null) {
                    Log.e("file path  ","file path "+filePath);
                    GlobalValues.camefromtw="true";
                    decodeFile(filePath);
                } else {
                    bitmap = null;
                }
            } catch (Exception e) {
                Toast.makeText(getApplicationContext(), "Internal error",
                        Toast.LENGTH_LONG).show();
                Log.e(e.getClass().getName(), e.getMessage(), e);
            }
        }
        break;protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    switch (requestCode) {
    case PICK_IMAGE:
        Log.e("result code","result code"+resultCode+"  result   "+Activity.RESULT_OK);
        if (resultCode == Activity.RESULT_OK) {
            Uri selectedImageUri = data.getData();
            try {
                // OI FILE Manager
                String filemanagerstring = selectedImageUri.getPath();

                // MEDIA GALLERY
                String selectedImagePath = getPath(selectedImageUri);

                if (selectedImagePath != null) {
                    filePath = selectedImagePath;
                } else if (filemanagerstring != null) {
                    filePath = filemanagerstring;
                } else {
                    Toast.makeText(getApplicationContext(), "Unknown path",
                            Toast.LENGTH_LONG).show();
                    Log.e("Bitmap", "Unknown path");
                }

                if (filePath != null) {

                    decodeFile(filePath);
                } else {
                    bitmap = null;
                }
            } catch (Exception e) {
                Toast.makeText(getApplicationContext(), "Internal error",
                        Toast.LENGTH_LONG).show();
                Log.e(e.getClass().getName(), e.getMessage(), e);
            }
        }
        break;
    default:
    } 
```

图像已在文件路径中收到，现在您可以使用它了，在此代码中，我使用此设置 ImageView

```
 public void decodeFile(String filePath) {

    // Decode image size
    BitmapFactory.Options o = new BitmapFactory.Options();
    o.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(filePath, o);

    // The new size we want to scale to
    final int REQUIRED_SIZE = 1024;

    // Find the correct scale value. It should be the power of 2.
    int width_tmp = o.outWidth, height_tmp = o.outHeight;
    int scale = 1;
    while (true) {
        if (width_tmp < REQUIRED_SIZE && height_tmp < REQUIRED_SIZE)
            break;
        width_tmp /= 2;
        height_tmp /= 2;
        scale *= 2;  
    }

    // Decode with inSampleSize
    BitmapFactory.Options o2 = new BitmapFactory.Options();
    o2.inSampleSize = scale;
    bitmap = BitmapFactory.decodeFile(filePath, o2);

    image.setImageBitmap(bitmap);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-23T05:56:53.250

首先添加这个：

```
ImageView profile;
Bitmap bmp;
SharedPreferences sp;
public static final int PERMISSION_REQUEST_CAMERA = 1;
private static final int PICK_FROM_GALLERY = 1; 
```

然后在 onCreate 方法中添加这些代码行：

```
sp=getSharedPreferences("profilePicture",MODE_PRIVATE);
    profile=(ImageView)findViewById(R.id.profile);
    if(!sp.getString("dp","").equals("")){
        byte[] decodedString = Base64.decode(sp.getString("dp", ""), Base64.DEFAULT);
        Bitmap decodedByte = BitmapFactory.decodeByteArray(decodedString, 0, decodedString.length);
        profile.setImageBitmap(decodedByte);
    }

profile.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            openGallery();
        }
    }); 
```

然后添加这些函数 openGallery() ：

```
private void openGallery() {
    if (ActivityCompat.checkSelfPermission(ProfileActivity.this, Manifest.permission.READ_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED) {
        ActivityCompat.requestPermissions(ProfileActivity.this, new String[]{Manifest.permission.READ_EXTERNAL_STORAGE, Manifest.permission.WRITE_EXTERNAL_STORAGE}, PICK_FROM_GALLERY);
    }else {
        Intent photoPickerIntent = new Intent(Intent.ACTION_PICK);
        photoPickerIntent.setType("image/*");
        startActivityForResult(photoPickerIntent, 1);
    }
} 
```

然后添加这个， onRequestPermissionsResult() ：

```
@Override
public void onRequestPermissionsResult(int requestCode, @NonNull String permissions[], @NonNull int[] grantResults)
{
    switch (requestCode) {
        case PICK_FROM_GALLERY:
            // If request is cancelled, the result arrays are empty.
            if (grantResults.length > 0 && grantResults[0] == PackageManager.PERMISSION_GRANTED) {
                Intent galleryIntent = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
                startActivityForResult(galleryIntent, PICK_FROM_GALLERY);
            } else {
                Toast.makeText(ProfileActivity.this,"Not working",Toast.LENGTH_LONG).show();
                //do something like displaying a message that he didn`t allow the app to access gallery and you wont be able to let him select from gallery
            }
            break;
    }
} 
```

活动结果（）：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{

    super.onActivityResult(requestCode, resultCode, data);
    if (resultCode == RESULT_OK) {
        try { // When an Image is picked
            if (requestCode == PICK_FROM_GALLERY && resultCode == RESULT_OK
                    && null != data) {
                // Get the Image from data

                Uri selectedImage = data.getData();
                String[] filePathColumn = { MediaStore.Images.Media.DATA };

                // Get the cursor
                Cursor cursor = getContentResolver().query(selectedImage,
                        filePathColumn, null, null, null);
                // Move to first row
                cursor.moveToFirst();

                int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
                String imgDecodableString = cursor.getString(columnIndex);
                cursor.close();
                // Set the Image in ImageView after decoding the String
                bmp = BitmapFactory
                        .decodeFile(imgDecodableString);
                profile.setImageBitmap(bmp);
                ByteArrayOutputStream stream = new ByteArrayOutputStream();

                bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
                byte[] byteArray = stream.toByteArray();
                String encodedImage = Base64.encodeToString(byteArray, Base64.DEFAULT);
                sp.edit().putString("dp", encodedImage).commit();
            } else {
                Toast.makeText(this, "You haven't picked Image",
                        Toast.LENGTH_LONG).show();
            }
        } catch (Exception e) {
            e.printStackTrace();
            Toast.makeText(ProfileActivity.this, "Something went wrong", Toast.LENGTH_LONG).show();
        }

    }else {
        Toast.makeText(ProfileActivity.this, "You haven't picked Image",Toast.LENGTH_LONG).show();
    }
} 
```

不要忘记在 Manifest 文件中授予权限。

# jquery - 如何在jQuery中使用字符串中的变量

> ID：11049275
> 
> 赞同：16
> 
> 时间：2012-06-15T10:51:46.937
> 
> 标签：jquery, html

我想在字符串中使用变量。我尝试过很多次，但它只是获取变量名。

```
<head>
    <script type="text/javascript" src="jquery-1.7.2.js"></script>
    <script type="text/javascript">
       $(function(){
          $("a").click(function(){
           var id= $(".id").html();
           $('.html').html("<div class='new' id=+id+>jitender</div>")
             });
       });
    </script>
</head>
<body>
   <div class="wrap">
      <a href="#">Make Html</a>
      <div class="html"></div>
      <div class="id">first</div>
   </div>
</body> 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-15T10:52:53.787

可以`+`按如下方式进行连接。

```
$('.html').html("<div class='new' id='" + id + "'>jitender</div>"); 
```

**参考：**

*   [https://developer.mozilla.org/en/JavaScript/Reference/Operators/String_Operators](https://developer.mozilla.org/en/JavaScript/Reference/Operators/String_Operators)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-07-19T11:47:23.447

您还可以使用模板文字：

```
$('.html').html(`<div class='new' id=${id}>jitender</div>`) 
```

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-04-28T10:30:41.117

我觉得这是一种更简单有效的方法。（使用``）

```
$(".html").html(`<div class="new" id="${id}">jitender</div>`) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T10:57:22.907

```
<script type="text/javascript">
$(function(){
$("a").click(function(){
    var id= $(".id").html();
    $('.html').html("<div class='new' id='"+id+"'>jitender</div>");
    })
}) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-14T17:52:23.580

这样做的正确方法是利用 jQuery 的 HTML 构造函数为您执行所有必要的转义：

```
$("a").click(function() {
    var id= $(".id").html();
    // create new element
    $('<div>', { 
        class:'new', 
        id: id, 
        text: 'jitend'
    }).appendTo('.html'); // and append it
}); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-15T10:53:48.820

试试这个

```
$(".html").html("<div class='new' id='"+id+"'>jitender</div>") 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-06-15T10:55:09.823

Javascript 不支持在双引号内扩展变量。关闭（并重新打开）引号并使用 + 运算符，就像您已经做的那样。

`"<div class='new' id='" + id + "'>"`

这`id`是变量

# opencl - OpenCL：在运行时将执行实例重新定位到特定的核心

> ID：11049277
> 
> 赞同：1
> 
> 时间：2012-06-15T10:51:53.580
> 
> 标签：opencl, embedded-linux

> **可能重复：**
> [OpenCL 中的处理器关联](https://stackoverflow.com/questions/10476315/processor-affinity-in-opencl)
> [OpenCL：我们可以直接将工作项发送到 CPU 内核吗？](https://stackoverflow.com/questions/11050057/opencl-can-we-directly-send-a-workitem-to-cpu-core)

> OpenCL 应用程序通过队列将工作提交给计算设备（CPU / GPU）。这些设备队列保留内核执行实例并发送到管道中的设备内核。
> 
> 我想要的是 ？
> 
> 我想在运行时将此内核执行实例定位到特定内核（假设我的 CPU 有多个内核）。
> 
> 1.我们可以从队列中捕获这些实例并重新定位到我们的目标内核吗？
> 
> 2\. 可以使用任何 API 在 OpenCL 中完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T00:40:02.727

是的，您可以使用[设备裂变](http://software.intel.com/en-us/articles/opencl-device-fission-for-cpu-performance/)。

# python - 将 PyGTK 脚本转换为 EXE 会导致旧的 Windows 2K GUI 外观

> ID：11049279
> 
> 赞同：1
> 
> 时间：2012-06-15T10:52:05.653
> 
> 标签：python, windows, gtk, pygtk, py2exe

当我将 PyGTK 应用程序编译为 .exe 时，我的应用程序会获得旧的 Windows 样式/外观。

**当我使用 Py2Exe 或 PyInstaller 编译 Python/PyGTK 脚本时，如何保留 Windows XP GUI 的外观和风格？**

是否有我需要包含的特殊 .dll，我是否需要创建自己的 .manifest 文件并将其链接到我的 Py2Exe 脚本中（如果需要的话）？在 Native WinAPI 中，我可以使用函数 InitCommonControls(); 切换 Windows XP 样式，是否有我可以使用的 PyGTK 等效函数？

注意：如果我在 python 解释器中运行我的 PyGTK 脚本，那么 GUI 具有正确的 Windows XP 现代外观。但是当我使用 Py2Exe 或 PyInstaller 将相同的脚本编译成 .exe 时，.exe 的 GUI 具有旧的 Windows 2K 外观，而不是现代 Windows XP 的外观。

*关于我需要做些什么来保持 Windows XP 外观的任何想法？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T17:49:57.090

检查您是否正在使用：

```
'bundle_files': 3 
```

并将 GTK+ 目录复制到*dist*文件夹（即 etc、share、lib）。

# javascript - 如何进行“开关”以启用或禁用网页上帮助信息的显示？

> ID：11049280
> 
> 赞同：0
> 
> 时间：2012-06-15T10:52:06.060
> 
> 标签：javascript, ruby-on-rails

这是我正在考虑的功能。

我会在 boostrap 中使用 javascript 添加悬停弹出窗口作为帮助通知。用户可以选择显示或隐藏整个网站的通知。

我打算覆盖页面，而不是将帮助信息放在页面中。

有没有更好的方法来解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:17:28.030

假设您有 jquery 和一些包含帮助信息的浮动 div

```
<div id='help1' class='float_help">
   Help me :(
</div>

<div id='help2' class='float_help">
   Help me :(
</div> 
```

这个 div 可能有一些 css 让它保持浮动和隐藏，就像`position: absolute, display: none`. 当你想显示帮助信息时，你可以打电话`$('#help1').show()` 当你想隐藏所有这些或禁用时，你可以打电话`$('.float_help').hide()`还是`.remove()`帮助？

# javascript - 通过用户检测jquery事件触发或通过代码调用

> ID：11049287
> 
> 赞同：10
> 
> 时间：2012-06-15T10:52:43.323
> 
> 标签：javascript, jquery

我有一些`window.onscroll`活动

```
$(window).scroll(function(e){
    //My Stuff
}); 
```

但在我的代码中，我调用动画滚动到某个地方

```
$('html, body').stop().animate({
   scrollTop:555
}, 1000); 
```

所以我如何检测页面是由用户滚动或由我的代码调用的。我当前的解决方案是`animate`在我的代码中调用之前放置一个标志然后清除它，但这不是聪明的解决方案。我也读过关于检测`e.which`或`e.originalEvent`但它不起作用。我认为您的专家在这里有一个很好的解决方案。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-15T11:24:41.243

```
$('#scroller').scroll(function(e) {
    if (e.originalEvent) {
        // scroll happen manual scroll
        console.log('scroll happen manual scroll');
    } else {
        // scroll happen by call
        console.log('scroll happen by call');
    }
});

$('#scroller').scroll(); // just a initial call 
```

当您通过调用`e.originalEvent`将`undefined`滚动但手动滚动时它将给出`scroll`对象。

**[演示](http://jsfiddle.net/QStkd/290/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-23T07:33:40.163

我重新问了这个问题并得到了 2 个有用的答案。
我会在此处为其他会找到此线程的人链接问题。

[检测是否在 jQuery 中手动触发滚动事件](https://stackoverflow.com/q/20737937/2592207)

# ruby - 将分叉的宝石捆绑在宝石中

> ID：11049289
> 
> 赞同：4
> 
> 时间：2012-06-15T10:52:45.097
> 
> 标签：ruby, gem

我正在尝试为依赖于未命名的外部 gem 的项目构建 gem :)

在开发过程中，我在外部项目中发现了一个小错误，我添加了一个解决它的单行修复程序。我在 github 上提交了一个 pull request，但我有一段时间没有得到维护者的回复。

我想让我的项目作为 gem 可用，但如果没有这个修复它就无法工作。我能做些什么？解决此问题的最佳方法是什么。

我想到的一个选择是创建一个分叉项目的 gem 并以一个复杂的名称发布它，并依赖它。但我不喜欢用如此愚蠢的宝石污染服务器的想法。

所以我想知道是否可以将外部 gem 捆绑到我的应用程序中，并使其与我的 gem 一起安装。最干净和最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:05:05.077

您是否考虑过用自己的代码覆盖该函数？几周前，我在工作中遇到了一些软件的类似问题，我刚刚重新定义了该功能。

由于它只是您找到的一行，因此这似乎是最简单的解决方案，但我对 Ruby 有点陌生，所以这个计划可能存在我没有考虑过的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T12:16:16.933

您可以以不同的名称发布它，一旦上游维护者接受了您的修复，您就可以[拉出](http://help.rubygems.org/kb/gemcutter/removing-a-published-rubygem)您的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T11:49:55.730

事实上，这很简单。在您的 Gemfile 中，将依赖项添加为：

```
gem "nokogiri", :git => "git://github.com/tenderlove/nokogiri.git" 
```

为此，您还需要使用 bundler 来管理您的 gem，您可以在[此处](http://gembundler.com/rubygems.html)获取更多信息。

另一种选择是将您更改的代码添加到您的gem中的供应商目录并将其与您的代码一起分发，这样您就可以将此其他gem的主目录添加到您的加载路径中，您将能够在没有任何问题。

要将某些内容添加到加载路径，您只需执行以下操作：

```
$LOAD_PATH.unshift( File.join(File.dirname(__FILE__), '..', 'vendor', 'some_gem', 'lib') ) 
```

您将能够直接在`some_gem`.

# css - 均匀间隔单词，除非在多词短语中（如“人权”）

> ID：11049292
> 
> 赞同：0
> 
> 时间：2012-06-15T10:52:54.580
> 
> 标签：css

除非在多词短语（如“人权”）中产生如下效果，否则我如何均匀间隔（即完全证明）单词以填充一行？

![激进主义人权等](../Images/eb0be3e985909b0bb1ba737b7a3fa200.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:00:11.227

将您的项目放入一个`<ul>`并为每个项目添加边距`<li>`

见演示：http: [//jsfiddle.net/L8qnh/3/](http://jsfiddle.net/L8qnh/3/)

**html**

```
<ul>
    <li>Politics</li>
    <li>Enviroment</li>
    <li>Economics</li>
    <li>Human Rights</li>
    <li>Country</li>
</ul> 
```

**CSS**

```
ul{
    list-type:none;
}

li{
    float: left;
    margin-right: 40px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T10:56:30.737

您应该使用 html 列表作为导航菜单：

教程在这里，但如果你用谷歌搜索，还有很多其他的：http: [//jamesowers.co.uk/css-tutorials/50/horizo​​ntal-css-list-menu /](http://jamesowers.co.uk/css-tutorials/50/horizontal-css-list-menu/)

背后的原因：

*   如果 CSS 不加载/不支持，你的菜单看起来不错
*   帮助可访问性
*   从语义上讲，您正在显示一个项目列表 - 那么有什么比显示它们的列表更好的呢？

编辑

最简单的，仅限 html/css 的解决方案是使用表格，但是看到用于布局的表格，我的眼睛会燃烧。（根据您要提供的浏览器支持，您可能会摆脱`ul li`或嵌套`div`标签和 css`display:table-cell/table-row`等）

在这里摆弄：http: [//jsfiddle.net/nTM3S/](http://jsfiddle.net/nTM3S/)

```
 <table cellpadding="3" class="myTable" style="text-align:center">
        <tr>
           <td>Politics</td>
           <td>Environment</td>
           <td>Economics</td>
           <td>Culture</td>
           <td>Human Rights</td>
           <td>Politics</td>
           <td>Environment</td>
           <td>Economics</td>
           <td>Culture</td>
           <td>Human Rights</td>

        </tr>
    </table> 
```

和CSS：

```
td {
    width: 1%;
    padding: 20px;
    white-space: nowrap;
    background-color: #ccc;
    color: #900;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T12:15:25.960

根据您希望它在哪些浏览器中工作，您的问题的答案可能很简单，只需将 a`&nbsp;`放在您想要放在一起的短语中。

`Politics Enviroment Economics Human&nbsp;Rights Country`

然后，证明整个事情的合理性。请参阅[jsFiddle](http://jsfiddle.net/XycGB/)。

不幸的是，这不适用于所有浏览器。在 IE8 和 Opera 中没问题，但 Firefox 和 Chrome 确实像其他空间一样拉伸 nbsp。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T12:16:27.840

我会为每个元素使用一个 div，并将它们的显示属性设置为内联......示例如下：

```
<html>
<head>
    <style type="text/css">
        .food{
            padding:5px;
            display:inline;
        }
    </style>
</head>
<body>
    <div class="food">Hamburger</div>
    <div class="food">Pizza</div>
    <div class="food">Hot Dog </div>
    <div class="food">Chicken</div>

</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T10:52:55.187

应用`text-align: justify;`到您想要均匀间隔的文本行，然后编写多词短语（如“人权”）（适当调整填充）：

```
<span style="padding-right:3px;">Human</span>rights 
```

# ios - UISplitViewController 像邮件应用程序

> ID：11049297
> 
> 赞同：1
> 
> 时间：2012-06-15T10:53:21.210
> 
> 标签：ios, xcode, ipad, uisplitviewcontroller

我想让我的应用程序在垂直方向上类似于 mail.app。它应该通过按钮显示一个主视图控制器，但不是在弹出窗口和水平方向它应该看起来像一个简单的 UiSplitViewController。

你有什么想法吗？是否有任何可以重复使用的可用开源项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:00:26.697

Mail.app 使用标准的`UISplitViewController`. iOS 5 中更改了该行为，因此它不再使用弹出框，而是从左侧滑入主视图控制器。尽管从技术上讲，我猜您仍然可以将其称为“弹出框”。

这可能会让人感到困惑，因为文档和委托方法仍然引用弹出框控制器，但是如果您从 Xcode 创建一个空白拆分视图项目并在 iOS 5 设备或模拟器上运行它，您将获得新的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:08:27.373

试试[MGSplitViewController](https://github.com/mattgemmell/MGSplitViewController) - 非常有用的替代方法`UISplitViewController`，有一些不错的配置选项。

# javascript - 防止 HTML5 拖放功能从同一元素的多个放置

> ID：11049298
> 
> 赞同：0
> 
> 时间：2012-06-15T10:53:26.423
> 
> 标签：javascript, html

我正在使用 HTML5 制作拖放系统。将图像从屏幕左侧拖到右侧（这些被标识为`window1`和`window2`。图像存储在一个数组中并附加到一个隐藏的输入元素，因此我可以通过 a 将它们发送到下一页`submit`。问题是我只希望脚本检测正在放入的内容`window2`，我不想要多个条目。

```
function drop(ev)
{
//append the hidden child
number.toString();
var hidden = document.createElement("input");
hidden.type = "hidden";
hidden.name = "option"+number;
hidden.value = my_images;
var f = document.getElementById("select");
f.appendChild(hidden);
number++;

var data=ev.dataTransfer.getData("Text");
ev.target.appendChild(document.getElementById(data));
ev.preventDefault();    
} 
```

我正在考虑一个简单的`if statement`但我应该寻找什么？如何检查我当前在哪里放置图像？

编辑：使用`onmouseover`事件以某种方式检查我当前悬停的元素是否是一个想法？如果是这样，我将如何做到这一点？目前我已经写了一小段代码

```
var current = document.mouseover;
current = document.getElementById(this); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-24T16:32:00.103

HTML5 规范不考虑拖动多个项目。结果（您似乎已经注意到上面的这一点）各种 HTML5 事件不会表明已拖动多个项目。

您没有在问题中明确说明这一点，但我的猜测是您认为（或认为，这是一个较旧的问题）由于浏览器自动生成的“幽灵”图像，多个项目被拖动。这些图像当然可以给人一种正在拖动多个元素的印象。

这些“幽灵”图像以及浏览器生成它们的方式存在许多已知问题。特别是在拖动开始时会生成重影图像，这意味着您定义适当拖动的代码甚至都没有运行。即浏览器不知道您是否正在拖动一个大元素，一个小元素，或者您在拖动之前不小心选择了很多文本......它会生成它所看到的任何图像，这就是你得到的.

在某些浏览器（不是 IE）中，您可以将拖动图像替换为更合适的内容。如果您不关心 IE，这通常会奏效，但如果您确实关心 IE，那么您就会发现人们对 HTML5 API 感到恼火的原因。

# php - Apache PHP HTTP_USER_AGENT 和 get_browser 返回不正确的值

> ID：11049301
> 
> 赞同：3
> 
> 时间：2012-06-15T10:53:41.570
> 
> 标签：php, apache, browscap

我正在为我的 HSC 软件设计和开发重大项目开发一个公司网站。我有一段代码来检查 MySQL 数据库是否支持用户的浏览器，如果不支持，则向他们显示警告并记录他们的浏览器类型。这段代码使用 get_browser 函数（几乎）完美地工作，显示一条看起来有点像这样的消息：

> 我们检测到您正在使用 Internet Explorer 查看此站点。我们没有测试过这个浏览器，不能保证完全支持。为获得最佳效果，我们建议使用 Google Chrome。

然而，由于 httpd.conf 中的一些混乱和一些服务器重新启动，此代码不再有效。它将浏览器检测为“”。（只是一个空字符串）试图找出问题的根源，我在下面放了一个快速调试行：

```
echo $_SERVER['HTTP_USER_AGENT']; 
```

由于某种原因，这会在每个浏览器中返回以下内容：

> Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5

我想这是问题的原因，有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T06:49:54.057

再一次，我的问题的解决方案非常具体。这是问题所在：

我使用 WebFaction 进行托管，他们有一个很棒的应用程序、网站和域设置，但是太复杂了，无法在这里完全解释。基本上，我一直在成功运行该网站，直到有一天 httpd 可执行文件随机消失。在与 WebFaction 的支持团队交谈后，我决定重建 Apache 并将其放入一个新的应用程序中。完成此操作后，我的服务器已修复并在之后的几周内继续平稳运行。几天前，我决定是时候清除旧的应用程序（它处于非活动状态但仍在服务器上）以重新获得一些磁盘空间。我没有意识到我的新应用程序中的 PHP.ini 引用了旧应用程序中的 browscap.ini。一旦这个被删除，它就再也找不到了，返回错误。当我去 PHP。

TL；DR，只要没有其他人搞砸迁移，他们就不应该有这个问题。

# c# - 如何在 lambda 表达式中捕获外部变量的值？

> ID：11049302
> 
> 赞同：19
> 
> 时间：2012-06-15T10:53:43.503
> 
> 标签：c#, asynchronous, lambda, closures, task-parallel-library

我刚刚遇到以下行为：

```
for (var i = 0; i < 50; ++i) {
    Task.Factory.StartNew(() => {
        Debug.Print("Error: " + i.ToString());
    });
} 
```

将导致一系列“错误：x”，其中大部分 x 等于 50。

相似地：

```
var a = "Before";
var task = new Task(() => Debug.Print("Using value: " + a));
a = "After";
task.Start(); 
```

将导致“使用值：之后”。

这显然意味着 lambda 表达式中的连接不会立即发生。在声明表达式时，如何在 lambda 表达式中使用外部变量的副本？以下不会更好（我承认这不一定是不连贯的）：

```
var a = "Before";
var task = new Task(() => {
    var a2 = a;
    Debug.Print("Using value: " + a2);
});
a = "After";
task.Start(); 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-15T11:02:18.277

This has more to do with lambdas than threading. A lambda captures the reference to a variable, not the variable's value. This means that when you try to use *i* in your code, its value will be whatever was stored in *i* last.

To avoid this, you should copy the variable's value to a local variable when the lambda starts. The problem is, starting a task has overhead and the first copy may be executed only after the loop finishes. **The following code will also fail**

```
for (var i = 0; i < 50; ++i) {
    Task.Factory.StartNew(() => {
        var i1=i;
        Debug.Print("Error: " + i1.ToString());
    });
} 
```

As James Manning noted, you can add a variable local to the loop and copy the loop variable there. This way you are creating 50 different variables to hold the value of the loop variable, but at least you get the expected result. The problem is, you do get a lot of additional allocations.

```
for (var i = 0; i < 50; ++i) {
    var i1=i;
    Task.Factory.StartNew(() => {
        Debug.Print("Error: " + i1.ToString());
    });
} 
```

The best solution is to pass the loop parameter as a state parameter:

```
for (var i = 0; i < 50; ++i) {
    Task.Factory.StartNew(o => {
        var i1=(int)o;
        Debug.Print("Error: " + i1.ToString());
    }, i);
} 
```

Using a state parameter results in fewer allocations. Looking at the decompiled code:

*   the second snippet will create 50 closures and 50 delegates
*   the third snippet will create 50 boxed ints but only a single delegate

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T10:58:12.323

那是因为您在新线程中运行代码，而主线程立即继续更改变量。如果立即执行 lambda 表达式，则使用任务的全部意义都将丢失。

线程在创建任务时没有获得自己的变量副本，所有任务都使用相同的变量（实际上存储在方法的闭包中，它不是局部变量）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T11:00:51.700

Lambda 表达式捕获的不是外部变量的值，而是对其的引用。这就是您确实看到`50`或`After`在您的任务中的原因。

要解决此问题，请在您的 lambda 表达式之前创建它的副本以按值捕获它。

这种不幸的行为将由带有 .NET 4.5 的 C# 编译器修复，直到那时您需要忍受这种奇怪。

例子：

```
 List<Action> acc = new List<Action>();
    for (int i = 0; i < 10; i++)
    {
        int tmp = i;
        acc.Add(() => { Console.WriteLine(tmp); });
    }

    acc.ForEach(x => x()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-15T11:06:25.290

根据定义，Lambda 表达式是惰性求值的，因此它们在实际调用之前不会被求值。在您的情况下，由任务执行。如果您在 lambda 表达式中关闭本地，则将反映执行时本地的状态。这就是你所看到的。您可以利用这一点。例如，您的 for 循环确实不需要为每次迭代都使用新的 lambda，假设为了示例所描述的结果是您想要编写的结果

```
var i =0;
Action<int> action = () => Debug.Print("Error: " + i);
for(;i<50;+i){
    Task.Factory.StartNew(action);
} 
```

另一方面，如果您希望它实际打印`"Error: 1"..."Error 50"`，您可以将上面的内容更改为

```
var i =0;
Func<Action<int>> action = (x) => { return () => Debug.Print("Error: " + x);}
for(;i<50;+i){
    Task.Factory.StartNew(action(i));
} 
```

第一个关闭`i`并将使用`i`执行操作时的状态，并且状态通常是循环完成后的状态。在后一种情况下`i`，因为它作为参数传递给函数而被急切地评估。然后这个函数返回一个`Action<int>`传递给`StartNew`.

因此，设计决策使惰性评估和急切评估成为可能。懒惰是因为本地人被关闭并且急切地因为您可以通过将本地人作为参数传递或如下所示声明另一个具有更短范围的本地人来强制执行本地人

```
for (var i = 0; i < 50; ++i) {
    var j = i;
    Task.Factory.StartNew(() => Debug.Print("Error: " + j));
} 
```

以上所有内容对于 Lambda 都是通用的。在特定情况下，`StartNew`实际上有一个重载执行第二个示例所做的操作，因此可以简化为

```
var i =0;
Action<object> action = (x) => Debug.Print("Error: " + x);}
for(;i<50;+i){
    Task.Factory.StartNew(action,i);
} 
```

# ios - UITableView 行移动异常

> ID：11049305
> 
> 赞同：0
> 
> 时间：2012-06-15T10:53:52.817
> 
> 标签：ios, uitableview

我有一个 UITableView，它被配置为允许在编辑模式下在部分之间移动行。该表使用 NSFetchedResultsController 支持

很难描述我看到的问题，但本质上是：

1）用户开始拖动一行

2）其他行在桌子周围拖动时移开

3）用户释放触摸，我通过适当更新 ManagedObject 来响应 moveRowAtIndexPath: 回调（下面的代码）

4）现在，由于某些原因，其他行**动画回到**用户开始拖动之前的位置。也就是说，所有人都会向上或向下移动一排，回到原来的位置，而不是停留在新的位置。

一段时间后，通常在 0.5 秒到 3 秒之间，NSFetchResultsController 决定让我更新移动的单元格。在这一点上，我最终调用了 [table beginUpdates] 和 [table endUpdates] 并且行移动到它们应该执行的位置。

现在，来自 NSFetchResultsController 的延迟回调是一个奇怪的问题，但这似乎很重要。重要的是 UITableView 不会将行留在新位置，并且需要开始/结束更新调用才能将行放在应有的位置。我是否应该在此回调中做其他事情：

```
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
    NSLog(@"UI is moving row from [%d, %d] to [%d, %d]", fromIndexPath.section, fromIndexPath.row, toIndexPath.section, toIndexPath.row);

    self.inManualReorder = YES;

    // Here I update the underlying object, code is not relevant as this works.

    ...

    // I've tried saving the context here and delaying it untill later on. It doesn't affect
    // the behavior in question.

    NSError *error = nil;
    if (![self.managedObjectContext save:&error]) {
        // Replace this implementation with code to handle the error appropriately.
        // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    self.inManualReorder = NO;

    NSLog(@"UI finished moving row");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T00:25:46.373

我以前也有同样的问题。来自斯坦福 CS193p 的 CoreDataTableViewController 使用 suspendAutomaticTrackingOfChangesInManagedObjectContext 属性正常工作。它在手动更新期间忽略来自托管对象上下文的更新。

```
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)destinationIndexPath
    {
        NSError *error = nil;

        [self setSuspendAutomaticTrackingOfChangesInManagedObjectContext:YES];

        // yourown code here ...

        [self setSuspendAutomaticTrackingOfChangesInManagedObjectContext:NO];
        [self performFetch];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:15:19.587

您如何保存获取的结果？在数组中？

似乎在此数组更新之前表正在重新加载，然后在更新后再次加载（不久之后）

尝试实施

```
- (void)tableView:(UITableView*)tableView didEndEditingRowAtIndexPath:(NSIndexPath *)indexPath; 
```

像您当前一样更新您的托管对象，但将它们保存在此方法中，然后获取结果并设置您的数组。最后，在您的 UITableView 上调用 reloadData （谁的委托（即您的视图控制器）访问该结果数组。

编辑：您是否在更新块内进行表更新，即

```
[tableView beginUpdates];

// ...Move cell...

[tableView endUpdates]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T19:33:42.627

我已经找到了。

在对 controllerWill(Did)ChangeContent 的回调中，我调用了 begin(end)Updates。如果重新排序来自手动干预，我不应该这样做：

```
- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller
{
    if (!self.inManualReorder)
        [self.tableView beginUpdates];
} 
```

我正在检查 didChangeObject: 回调的这个标志，但不是这些......

# c# - 使用 MVC 在 Visual Studio 中创建一个新的控制器类？

> ID：11049307
> 
> 赞同：6
> 
> 时间：2012-06-15T10:53:58.773
> 
> 标签：c#, asp.net-mvc, visual-studio

当我使用 MVC 在 Visual Studio 中创建新控制器时，它会自动生成以下代码：

```
public class Default1Controller : Controller
{
    //
    // GET: /Default1/

    public ActionResult Index()
    {
        return View();
    }

} 
```

我的 Default1Controller 从 Controller 继承，但我使用 BaseController 类，我总是必须记住更改继承。是否可以修改或创建新模板以自动为我的项目生成更具体的代码？

```
public class Default1Controller : BaseController
{
    //
    // GET: /Default1/

    public ActionResult Index()
    {
        return View();
    }

} 
```

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T10:59:11.440

你需要`custom code generation`在`MVC`.

以下链接可能会有所帮助。

> [修改 ASP.NET MVC 中的默认代码生成/脚手架模板](http://www.hanselman.com/blog/ModifyingTheDefaultCodeGenerationscaffoldingTemplatesInASPNETMVC.aspx)

并且

> [ASP.NET MVC 和 T4 和 NerdDinner](http://www.hanselman.com/blog/TheWeeklySourceCode43ASPNETMVCAndT4AndNerdDinner.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T11:04:41.313

您必须修改基于“添加控制器”命令的 T4 模板。

转到 \Microsoft Visual Studio 11.0\Common7\IDE\ItemTemplates\CSharp\Web\MVC 3\CodeTemplates\AddController\ （替换为您的 VS 和 MCV 版本）并修改 Controller.tt

这条线`public class <#= mvcHost.ControllerName #> : Controller`应该变成`public class <#= mvcHost.ControllerName #> : BaseController`

更多细节可以在 Scott Hanselman 的[博客上找到](http://www.hanselman.com/blog/ModifyingTheDefaultCodeGenerationscaffoldingTemplatesInASPNETMVC.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T11:05:50.417

您应该能够修改位于文件夹中的控制器 T4 模板，如下所示：

```
C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\ItemTemplates\CSharp\Web\MVC 3\CodeTemplates\AddController 
```

只需更改线路

```
public class <#= mvcHost.ControllerName #> : Controller 
```

至

```
public class <#= mvcHost.ControllerName #> : BaseController 
```

此外，Asif 提供的链接也很有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T11:16:38.787

您需要覆盖 T4 模板，并且还可以使用脚手架来提高工作效率。这里有更多信息：[MvcScaffolding：覆盖 T4 模板](http://blog.stevensanderson.com/2011/04/06/mvcscaffolding-overriding-the-t4-templates/)

# 3d - Alpha 混合 2D 精灵在 windows phone 上的 3D 空间与 Xna 4.0

> ID：11049308
> 
> 赞同：0
> 
> 时间：2012-06-15T10:54:03.260
> 
> 标签：3d, textures, xna-4.0, sprite, alphablending

嘿，我正在尝试使用 2d 精灵角色制作 3d 游戏。我正在将我的精灵作为平面模型从搅拌机中加载，并且已经应用​​了纹理。

我目前正在对精灵进行 alphablending，但看起来网格仅采用背景颜色，而不是其后面的精灵的颜色。下图显示我在说。

[https://www.dropbox.com/s/matk2urmnwtklrs/errors2.jpg](https://www.dropbox.com/s/matk2urmnwtklrs/errors2.jpg)

无论如何，有没有正确地混合我的图像，使它们看起来正确透明？我目前正在寻找如何进行 alpha 测试而不是 alpha 混合，因为我认为这也可能有助于解决这个问题；但是，我需要有关如何在代码中执行此操作的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:40:50.240

如果您需要搜索更多参考资料，请查看[广告牌](http://create.msdn.com/en-US/education/catalog/sample/billboard)的 xna 示例，这是正确的术语。最困难的部分是正确的排序，因为你不能依赖 Z 缓冲区。该示例负责您也可以尝试混合状态`BlendState.NonPremultiplied`

# objective-c - _PFBatchFaultingArray objectAtIndex：

> ID：11049312
> 
> 赞同：9
> 
> 时间：2012-06-15T10:54:16.863
> 
> 标签：objective-c, xcode4.3

```
2012-06-15 17:53:25.532 BadgerNew[3090:707] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[_PFBatchFaultingArray objectAtIndex:]: index (0) beyond bounds (0)'
*** First throw call stack:
(0x353f688f 0x3779d259 0x353f6789 0x353f67ab 0x35d5fee3 0x5a5c9 0x59fd3 0x43819 0x32e63c8b 0x38153 0x38309 0x32e63c8b 0x4142d 0x32e63c8b 0x32ec363d 0x32ec35db 0x32ec2f15 0x32ec2c49 0x35d21 0x32e62cab 0x32e5c7dd 0x32e2aac3 0x32e2a567 0x32e29f3b 0x36fe922b 0x353ca523 0x353ca4c5 0x353c9313 0x3534c4a5 0x3534c36d 0x32e5b86b 0x32e58cd5 0x35a73 0x35a54)
terminate called throwing an exception(lldb) 
```

问题是什么？

它在主要中止。所以我什至不知道是哪条线导致了这个。

提示：在模拟器上运行。在我的 iPhone 上运行。不能在我朋友的 iPhone 上运行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-05T06:28:40.507

好吧，我想我知道为什么了。这是因为 NSFetchedResultsController 中的缓存。这很糟糕。如果您甚至将 NSSortDescriptor 从升序更改为降序，则必须手动删除缓存。

因此，当上下文发生变化并且缓存没有意识到这一点时，它会变得很生气并抛出像你看到的那样的错误。当您在 XCode 中构建时会发生这种情况：上下文尚未保存（并丢失其数据）但缓存认为它应该保存，因此当它以零数据重新启动时，它会感到惊讶并且不知道如何处理它。

删除缓存可以解决这个问题。我认为这可能是 Apple 停止将它与 UICollectionViewController 一起使用的原因。就是这么个问题。

编辑：检查行/部分是否不超过 NSFetchedResultsController 的相应计数不起作用，因为它再次认为数据应该在那里，但事实并非如此。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-14T09:25:46.690

您没有提供足够的信息来进行任何猜测...但是您在这里：

1.  你使用**CoreData**吗？有人认为您的 CoreData 包含数据，但当被问及没有时。当有人向 fetchedResultsController.fetchedObjects 询问第一个对象（崩溃报告中提到的索引 0）但不存在（超出崩溃报告中的边界 0）时，会发生崩溃
2.  “超出范围的索引”是**与数组相关的通用错误说明**。错误报告说有人要求数组的第一项（索引 0），但该数组是空的（边界 0）。那是一个崩溃。

修复是**在您要求数据之前确保有数据**。一种方法是检查

```
if ([myArray count] > index)
    value = [myArray objectAtIndex:index]; 
```

无论如何，我最好的猜测是 PFBatchFaultingArray 指的是 CoreData，这意味着没有简单的答案。

您是否遇到过身份验证失败，这迫使 CoreData 更新，但 FRC 仍指向旧数据？当“旧”frc 认为仍有与上次看起来一样多的数据时，会发生崩溃，但 CoreData 中的“新”数据实际上数量较少。然后自动 UITableView 更新将询问行的数据，该行不再存在 == 崩溃。然后，您需要在任何人尝试使用数据之前刷新您的 frcs。只有您会知道何时何地可以进行刷新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-01T15:49:28.123

如果您在 NSFetchRequest 上设置“propertiesToFetch”，并且如果这些属性在数据库中为零，那么您也会收到此错误。

解决方法是使该属性成为可选的，并且不要预取它。

例子：

如果 'Student<--->Backpack' 是你的模特。

```
 let fetchRequest = ...
    fetchRequest.propertiesToFetch = ["backpack"]

    ... 
```

当背包为零时发生崩溃。

# php - POST 数据被剥离 HTML 实体

> ID：11049320
> 
> 赞同：1
> 
> 时间：2012-06-15T10:54:55.217
> 
> 标签：php, html, codeigniter

我有一个标准的登录表单，将数据提交给 Codeigniter 函数以进行身份​​验证。问题是，数据似乎在到达函数之前就被剥夺了 HTML 实体。现在，如果我错了，请纠正我，但我认为 config.php 中的参数只与 Codeigniter 函数相关，即与 $this->input->post NOT $_POST 相关。无论如何，在我的 config.php 中我已经拿到

`$config['global_xss_filtering'] = FALSE;`

如果我提交表单，我在输入字段中提交的数据是：

```
$_POST['user'] = 'user';
$_POST['password'] = 'password%100'; 
```

作为参考，我的表单开始标签是：

`<form method="POST" action="<?=site_url('/log-in')?>">`

我已经完成了以下功能来测试数据：

```
echo "<pre>";
print_r($_POST);
echo sha1('userpassword%100') . '<br />';
echo sha1($_POST['username'] . $_POST['password']) . '<br />';
echo sha1($this->input->post('username', FALSE) . $this->input->post('password', FALSE)) . '<br />';
echo "</pre>"; 
```

这给出了以下输出：

```
Array
(
    [username] => user
    [password] => password0
)
ad45e6412dd3cec23e47bbb48c874cdcfd6d39e7
fa3279bde5d6aba9ed77c6e5b071ff8dde741b92
fa3279bde5d6aba9ed77c6e5b071ff8dde741b92 
```

所以顶部的哈希值是正确的，但是传递的实际数据似乎去除了 html 实体，即密码字段中的 IE %10 - $_POST['password'] 应该是 password%100 而不是 password0

谁能告诉我如何获得正确的、未转义的数据？

在此先感谢，克里斯蒂安

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T11:09:39.217

我也面临几乎同样的问题，因为我使用 $_REQUEST 方法，它对我有用。请尝试此方法，希望对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:19:37.607

在 /system/core/Input.php 的第 568 行，将 remove_invisible_characters 函数移动到`$this->_enable_xss === TRUE`语句中。

之前：

```
 // Remove control characters
    $str = remove_invisible_characters($str);

    // Should we filter the input data?
    if ($this->_enable_xss === TRUE)
    {
        $str = $this->security->xss_clean($str);
    } 
```

现在：

```
 // Should we filter the input data?
    if ($this->_enable_xss === TRUE)
    {
        // Remove control characters
        $str = remove_invisible_characters($str);

        $str = $this->security->xss_clean($str);
    } 
```

希望对其他人有所帮助！

# iphone - CorePlot 中的多线图

> ID：11049330
> 
> 赞同：-1
> 
> 时间：2012-06-15T10:55:31.033
> 
> 标签：iphone, objective-c, ios, ios5, core-plot

我想绘制多条线图，每条线在图表中具有不同的颜色和不同的数据。

我从 Core plot 1.0 示例文件夹中显示“CPTTestApp-iPad”示例。我绘制单线聊天，但我仍然没有清除所有内容。

请任何人指导我如何开发多折线图？任何多折线图和核心图初学者的学习教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:11:12.363

Core Plot 图可以包含任意数量的图，它们也可以是不同的类型。为每个图分配一个唯一`identifier`值，并在数据源中使用它来确定要返回的值。

# jquery - 如何用jquery分隔点击

> ID：11049335
> 
> 赞同：0
> 
> 时间：2012-06-15T10:55:57.883
> 
> 标签：jquery

我有一个这样的div...

```
<div class="user">
     <div class="info">
     .....
     </div>
     <div class="edit">
        Edit
     </div>
</div> 
```

在 jquery 我有这样的事情：

```
 $('user').click(function(){...});
 $('edit').click(function(){...}); 
```

如果我点击“编辑”这两个功能都会执行，我不希望这样，如果我点击“编辑”，只有他的功能应该发生。关于如何分离这两个功能的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T10:57:09.053

```
$('.edit').click(function(e){
   e.stopPropagation();
}); 
```

你的选择器是错误的，你必须`.`在类名之前加上`.edit`, `.user`。

更多在这里[`Class Selectors`](http://api.jquery.com/class-selector/)

[`.stopPropagtion()`](https://developer.mozilla.org/en/DOM/event.stopPropagation)

您也可以使用[`.on`](http://api.jquery.com/on/)too like 这也适用于动态添加的元素   

```
$('body').on('click','.edit',function(e){
      e.stopPropagation();
}); 
```

**笔记**

您可以替换`body`为将始终存在于 dom 中的任何静态父级。父元素越接近，它的性能就越好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T10:58:48.337

首先，您需要更正您的选择器。您需要在名称前面有一个`.`or来表示一个 id 或 class。`#`

```
$(".edit").click(function(e){
   e.stopPropagation();
}); 
```

# javascript - 我可以使用 console/alert/some-other-means 一次读出所有 CSS 属性吗？

> ID：11049344
> 
> 赞同：5
> 
> 时间：2012-06-15T10:56:42.447
> 
> 标签：javascript, jquery, css

我正在尝试在 iPad 上调试网站。在桌面上显示一个元素，在 iPad 上它丢失了。

**问题**：
有没有办法在一个类似的语句中输出所有 CSS

```
console.log( $('element').attr('class') ); 
```

或者是找到错误属性以逐一遍历所有CSS规则的唯一方法？

```
console.log( $('element').css('position') )
console.log( $('element').css('top') )
console.log( $('element').css('left') )
console.log( $('element').css('right') )
console.log( $('element').css('bottom') )
console.log( $('element').css('width') )
console.log( $('element').css('height') )
console.log( $('element').css('display') )
... you get the point... 
```

感谢您的输入

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T11:01:30.487

你需要[window.getComputedStyle](https://developer.mozilla.org/en/DOM/window.getComputedStyle)：

> getComputedStyle() 给出元素所有 CSS 属性的最终使用值。

每个现代浏览器（包括 IE9）都支持。

一个简单的例子：

```
var style = window.getComputedStyle($('element').get(0), null); 
```

[jsFiddle 演示](http://jsfiddle.net/Pbe4N/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T12:00:07.460

在 iPad 上使用一些工具远程检查页面要容易得多。iOS 6 将内置此功能，但现在没有多大帮助。如果您使用的是 Mac，您可以试用[iWebInspector](http://www.iwebinspector.com/)和 iOS SDK。如果没有，您可以查看 WeInRe。

1.  安装[iOS SDK](https://developer.apple.com)（免费）和[iWebInspector](http://www.iwebinspector.com/)
2.  打开 iWebInspector
3.  点击“打开iOS模拟器”
4.  通过菜单 Hardware -> Device -> iPad 切换到 iPad
5.  打开 Safari 并转到您要调试的页面
6.  在 iWebInspector 中单击“从 Safari 加载”，然后选择页面
7.  您现在应该在 iWebInspector 中获取 WebKit 调试器

![在此处输入图像描述](../Images/a8235be48f5b4d5f2bd88bac848c4b54.png)

[WeInRe](http://people.apache.org/~pmuellr/weinre/) (Webkit Inspector Remote) 可以在任何平台上运行，无需 iOS SDK。它不如真正的调试器好用，因为它只是注入脚本并且只能访问您通过 javascript 获得的内容。但它比以编程方式打印出所有 css 容易得多；）有时 WeInRe 在您查看元素后不会捕捉到对 DOM 的更改。所以等到 DOM 处于你想要查看的状态后，再展开父元素。WeInRe 由 PhoneGap 托管：[debug.phonegap.com](http://debug.phonegap.com/)，或者可以安装在您的计算机上[http://phonegap.github.com/weinre/](http://phonegap.github.com/weinre/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T11:02:56.740

jquery .css() 比 .getComputedStyle 效果更好，因为它考虑了浏览器的差异（并且基于 getComputedStyle 本身），请参阅[http://api.jquery.com/css/](http://api.jquery.com/css/)

看看[如何使用 jQuery 获取元素的所有计算样式？](https://stackoverflow.com/questions/2151558/how-to-get-all-the-calculated-styles-of-an-element-with-jquery)并相信那里的答案:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-15T11:35:18.133

这是一个添加 $.fn.computedCSS() 的小插件，您可以使用它来获取其他人已经建议的内容：

代码：

```
(function($) {
    $.fn.computedCSS = function() {
        var elem = $(this)[0];
        var styles = window.getComputedStyle(elem);
        var computed = {};  
        for (key in styles) {
            if (!key.match(/^\d+$/) && typeof styles[key] !== 'function') {
                computed[key] = styles[key];   
            }
        }
        return computed;
    };
})(jQuery); 
```

演示：

[http://jsfiddle.net/Kd6xR/](http://jsfiddle.net/Kd6xR/)

# amazon-s3 - 我可以使用 s3cmd mv 命令将对象移动到 S3 存储桶内的“文件夹”吗？

> ID：11049354
> 
> 赞同：10
> 
> 时间：2012-06-15T10:57:13.973
> 
> 标签：amazon-s3, s3cmd

我已经`s3cmd`安装了 linux 的命令行工具。将文件放入存储桶中效果很好。但是，我想将文件移动到“文件夹”中。我知道 S3 本身并不支持文件夹，但是我的 Cyber​​duck GUI 工具可以很好地转换它们，以便我查看我的备份。

例如，我在存储桶的根目录中有一个名为“test.mov”的文件，我想将它移动到“idea”文件夹中。我正在尝试这个：

```
s3cmd mv s3://mybucket/test.mov s3://mybucket/idea/test.mov 
```

但我收到奇怪的错误，例如：

```
WARNING: Retrying failed request: /idea/test.mov (timed out)
WARNING: Waiting 3 sec... 
```

我也尝试了引号，但这也无济于事：

```
s3cmd mv 's3://mybucket/test.mov' 's3://mybucket/idea/test.mov' 
```

文件夹名称也没有

```
s3cmd mv 's3://mybucket/test.mov' 's3://mybucket/idea/' 
```

有没有办法删除并重新提交这个 3GB 文件？

**更新**：仅供参考，我可以将新文件直接放入这样的文件夹中：

```
s3cmd put test2.mov s3://mybucket/idea/test2.mov 
```

但是还是不知道怎么搬家。。。。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T09:33:51.010

要从一个存储桶移动/复制到另一个存储桶或同一个存储桶，我使用 s3cmd 工具并且工作正常。例如：

```
s3cmd cp --r s3://bucket1/directory1 s3://bucket2/directory1
s3cmd mv --recursive s3://bucket1/directory1 s3://bucket2/directory1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T23:18:46.533

可能您的文件很大，尝试增加 socket_timeout s3cmd 配置设置

[http://sumanrs.wordpress.com/2013/03/19/s3cmd-timeout-problems-moving-large-files-on-s3-250mb/](http://sumanrs.wordpress.com/2013/03/19/s3cmd-timeout-problems-moving-large-files-on-s3-250mb/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-08-30T21:03:09.137

删除 ' 符号。您的代码应该是：

```
s3cmd mv s3://mybucket/test.mov s3://mybucket/idea/test.mov 
```

还要尝试您的存储桶的权限是什么 - 对于您的用户名，您应该拥有所有权限。

还尝试将 CloudFront 连接到您的存储桶。我知道这没有意义，但我有类似的问题，它没有克隆到它的云端实例。

# mysql - 如何对包含双冒号 (::) 的文本进行排序

> ID：11049357
> 
> 赞同：2
> 
> 时间：2012-06-15T10:57:16.587
> 
> 标签：mysql, sql

要按名称订购，我正在使用`'order by name`'

但名称包含双冒号：`'::'`

如何按双冒号后面的文本排序？

所以 ：

```
aaaa::bbbb
aaaa::aaaa
aaaa::1234
aaaa::a1234 
```

将被订购：

```
aaaa::1234
aaaa::aaaa
aaaa::a1234
aaaa::bbbb 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:11:58.307

按子字符串排序并使用[locate](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_locate)来查找它的开始位置：

```
order by substring(name, locate('::', name) + 3, 30) 
```

由于不使用索引，因此会降低性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:02:01.610

您必须在 MySQL 中创建一个新字段，然后将文本的第二部分插入其中。排序方式使用各种索引和算法（例如分治法）。

因此，它不适用于对特定字符串的特定部分进行排序，并且如果您确实设法“伪造”了一种这样做的方式，那么由于缺少索引，性能会很*糟糕。*

抱歉，我意识到这可能不是您要寻找的答案，但恐怕最好的方法是稍微长一点的方法，但是如果您向其中添加索引，至少您可以以极快的速度进行操作:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T11:02:58.007

您必须将文本分成两列并按后一列排序。您可以在应用程序代码中拆分和连接列，也可以使用视图和存储过程使其看起来像数据库客户端的一列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T11:32:05.793

您可以尝试以下方法

1.  获取所有数据为字母的所有记录::

    联盟

2.  获取所有数据在 :: 之后为数字的所有记录

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T12:22:03.923

关于您的排序，根据 ascii 值，数字排在字母之前，所以 aaaa:1234 应该排在第一位

您可以在 PHP 中检索值和排序

[纳夫索特](http://php.net/manual/en/function.natsort.php)

```
<?php
$arr = array("aaaa::bbbb","aaaa::aaaa","aaaa::1234","aaaa::a1234");

$sec=$arr;
natsort($sec);

print_r ($sec);

?> 
```

# iphone - 不在 SQLite 中保存数据

> ID：11049363
> 
> 赞同：2
> 
> 时间：2012-06-15T10:57:54.503
> 
> 标签：iphone, ios, ipad

每件事都在代码中，但不将数据保存在 SQLite db 中。有人可以帮忙吗？

在下面找到我的代码：

```
-(IBAction)signin:(id)sender{
    NSLog(@"%@",perDas.string1);
    nameString=[[NSString alloc]initWithString:perDas.string1];
     statusString=[[NSString alloc]initWithFormat:@"IN"];
    {
        NSLog(@"passed");
        sqlite3_stmt    *statement;

        const char *dbpath = [perDas.databasePath UTF8String];

        if (sqlite3_open(dbpath, &database) == SQLITE_OK)
        {
            NSLog(@"pass");
            NSString *insertSQL = [NSString stringWithFormat: @"INSERT INTO status  VALUES (\"%@\", \"%@\", datetime(), \"%@\")", nameString, statusString,empString];
            NSLog(@"%@",insertSQL);
            const char *insert_stmt = [insertSQL UTF8String];

            sqlite3_prepare_v2(database, insert_stmt, -1, &statement, NULL);

            sqlite3_finalize(statement);
            sqlite3_close(database);

    }
    }} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T06:33:30.933

```
-(IBAction)signin:(id)sender{
    NSArray *dirPath;
    NSString *docDir;
    NSString *databasePath;

    dirPath=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    docDir=[dirPath objectAtIndex:0];
    databasePath=[docDir stringByAppendingPathComponent:@"YourDB.sql"];

    const char *dbPath=[databasePath UTF8String];

    if(sqlite3_open(dbPath, &db)==SQLITE_OK)
    {

        NSString *insertSQL =  [NSString stringWithFormat: @"INSERT INTO status  VALUES (\"%@\", \"%@\", datetime(), \"%@\")", nameString, statusString,empString];

        const char *insertStmt=[insertSQL UTF8String];

        char *errmsg=nil;

        if(sqlite3_exec(db, insertStmt, NULL, NULL, &errmsg)==SQLITE_OK)
        {
             NSLog(@"ADDED!");
        }

        sqlite3_close(db);
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:04:52.477

你应该检查你的sql语句是否正确：

```
if (sqlite3_prepare_v2(database, insert_stmt, -1, &statement, NULL) == SQLITE_OK) {
...
} 
```

如果您只插入行集的子集，请使用此 INSERT 语句表单：

```
INSERT INTO table_name (column1, column2, column3,...)
VALUES (value1, value2, value3,...) 
```

# azure - azure 上保存日志的磁盘已满时会发生什么？

> ID：11049364
> 
> 赞同：0
> 
> 时间：2012-06-15T10:57:55.943
> 
> 标签：azure

我们的网站目前已部署到 azure，我们正在使用 azure 诊断程序编写跟踪日志。然后，我们定期将日志发送到 blob 存储，并使用 Cerebrata 的 Windows 诊断管理器软件读取它们。我想知道在 azure 上保存日志的光盘已满时会发生什么，即在运送日志之前。什么时候清除日志？如果没有运送原木，是否有任何不同。我担心的是，当尝试写入完整的光盘时出现异常（如果有的话），该站点可能会以某种方式崩溃。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:27:00.973

如果您使用的是 Windows Azure 诊断程序，那么它将使磁盘上的日志过期（首先删除最旧的文件）。您在 blob 存储中的 wad-control-container 中以实例级别为基础指定了一个配额。默认情况下，这将是 4GB（您可以更改它）。您的所有跟踪、计数器和事件日志都需要适合这 4GB 的磁盘空间。如果您也喜欢每个数据源，也可以在此处设置单独的配额。诊断管理器负责管理数据源和配额。

现在，旧版本的 SDK 中存在一个错误，即磁盘可能已满并且诊断程序停止工作。通过 RDP 进入实例并尝试导航到 C:\Resources\Directory\\Monitor 目录，您将知道您是否会受到此错误的影响。如果您被拒绝访问，那么您很可能会遇到此错误。如果您可以在机器上以普通管理员的身份查看此目录，则不会受到影响。旧版 SDK 中存在权限问题，删除此目录失败。不幸的是，这种影响的唯一症状是突然间您将无法再将数据传输出去。没有明显的失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:31:57.493

您是使用 System.Diagnostics.Trace 来“写入”您的日志，还是正在写入日志文件。无论哪种方式，都有一个汇总。这意味着如果您达到存储配额，在传输日志之前，最旧的日志将被删除。但是您可以轻松增加默认（4G！）日志配额。

请查看以下文章和帖子，详细描述 Windows Azure 中的诊断：

[http://blogs.msdn.com/b/golive/archive/2012/04/21/windows-azure-diagnostics-from-the-ground-up.aspx](http://blogs.msdn.com/b/golive/archive/2012/04/21/windows-azure-diagnostics-from-the-ground-up.aspx)

[http://www.windowsazure.com/en-us/develop/net/common-tasks/diagnostics/](http://www.windowsazure.com/en-us/develop/net/common-tasks/diagnostics/)

[http://msdn.microsoft.com/en-us/library/windowsazure/hh411544.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh411544.aspx)

# web-services - pgRouting 前端/API

> ID：11049367
> 
> 赞同：2
> 
> 时间：2012-06-15T10:58:19.740
> 
> 标签：web-services, api, postgis, openstreetmap, pgrouting

我找不到任何关于某种“人类”可读前端或 pgRouting 的 api 的可靠信息。

我有 OSM PostGIS/pgRouting 数据库，我想用它来计算点之间的路径。问题是我找不到任何可以使用 pgRouting 来公开某些 API 的软件。（WebService/comandline/任何可用的东西）

我想提供这样的 API 开始、端点（GPS 线）和一些参数（不要使用高速等）。因此，我计算距离、旅行时间和点列表以在地图上绘制多边形。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T15:35:07.547

据我所知，没有任何您正在寻找的应用程序，因此您必须使用直接 SQL 命令进行操作。（pgRouting 只是 postgreSQL 中的函数集合）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-09T19:37:23.047

> 一个简单的 pgRouting 方向后端 API，用 javascript nodejs express 编写。

易于使用和部署。

[https://github.com/imran-5/pgRouting-Direction-API](https://github.com/imran-5/pgRouting-Direction-API)

# iphone - 如何通过http将签名图像从Ipad发送到服务器系统？

> ID：11049368
> 
> 赞同：0
> 
> 时间：2012-06-15T10:58:21.090
> 
> 标签：iphone, ipad, jakarta-ee

我想将表单详细信息（姓名、年龄等..）和人的签名作为图像从 Ipad 发送到 Java Web 应用程序服务器。

[http://192.168.1.100:8080/Intranet/checkforimage.htm?name=meena&image= *** *][1]

我想知道我应该如何通过 http 将图像从 ipad 发送到服务器。

由于服务器端编码是在java中。我很乐意作为 bytearray 接收和使用。

但问题是如何将 Ipad 中的图像转换为 bytearray 并通过 HTTP 发送？

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:45:08.317

您可以执行以下操作：

**1) 在填写完所有详细信息后捕获表单的屏幕截图并将其保存为 UIImage 对象。您可以使用以下功能捕获屏幕截图：**

```
 - (UIImage*)screenshot 
{ `CGSize imageSize = [[UIScreen mainScreen] bounds].size;
if (NULL != UIGraphicsBeginImageContextWithOptions)
    UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0);
else
    UIGraphicsBeginImageContext(imageSize);

CGContextRef context = UIGraphicsGetCurrentContext();

for (UIWindow *window in [[UIApplication sharedApplication] windows]) 
{
    if (![window respondsToSelector:@selector(screen)] || [window screen] == [UIScreen mainScreen])
    {

        CGContextSaveGState(context);
        // Center the context around the window's anchor point
        CGContextTranslateCTM(context, [window center].x, [window center].y);
        // Apply the window's transform about the anchor point
        CGContextConcatCTM(context, [window transform]);
        // Offset by the portion of the bounds left of and above the anchor point
        CGContextTranslateCTM(context,
                              -[window bounds].size.width * [[window layer] anchorPoint].x,
                              -[window bounds].size.height * [[window layer] anchorPoint].y);

        // Render the layer hierarchy to the current context
        [[window layer] renderInContext:context];

        // Restore the context
        CGContextRestoreGState(context);
    }
}

// Retrieve the screenshot image
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();

return image;` 

}

**2) 将 UIImage 对象转换为 NSData 对象。
3) 使用 NSURLConnection 将 NSData 发送到服务器。**

            回答 #2

赞同：0

时间：2012-06-15T13:20:39.297

好的，试试下面的代码：

NSData *imageData = UIImagePNGRepresentation(image);

这将以 NSData 的形式返回 UIImage 对象的 PNG 表示。

如果您的图像是 JPEG 或 JPG，则可以使用以下内容：

NSData *imageData = UIImageJPEGRepresentation(image, 1.0);

您可以使用 NSURLConnection 将此“imageData”直接发送到服务器。

```

# java - 用 Java 解析 Java 代码

> ID：11049369
> 
> 赞同：-2
> 
> 时间：2012-06-15T10:58:21.790
> 
> 标签：java, regex, parsing

是否可以使用正则表达式解析一些 Java 代码？

所以假设我想要一个`int`变量列表：

```
int abc1 = 1;
int abc2 = abc1 + 1;
int abd3 = abc1 + abc2; 
```

我想把这些放到一个`ArrayList`.

所以是这样的：

```
private void parse(String s){

    List<List<String>> variables = new ArrayList<List<String>>();

    list.add(new ArrayList<String>);//var type
    list.add(new ArrayList<String>);//var name
    list.add(new ArrayList<String>);//var data

    Pattern p = Pattern.compile();//This is what I want
    Matcher m = p.matcher(s);

    while(m.find()){
        String match = m.group();
        Pattern p2 = Pattern.compile();//Here as well
        Matcher m2 = p.matcher(s);
        while(m2.find()){
            for(int i = 0; i < m.groupCount()){
                //add the variables to the lists
            }
        }
    }
} 
```

我要问的是什么正则表达式可以处理这个任务？

* * *

这一切的原因是用户可以使用一些代码（顺便说一句，Android 应用程序）对应用程序进行一些控制

如果不建议使用正则表达式，那么我应该使用什么解析器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T11:02:52.217

您可能希望使用比正则表达式更高级的语法解析应用程序。例如，您可以查看[ANTLR](http://www.antlr.org/)，它也有各种可用的语法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-15T11:33:05.903

人们经常尝试使用正则表达式解析 HTML、XML、C 或 java。

通过足够的努力和技巧，正则表达式的复杂组合可以实现许多令人惊奇的事情。但你总是会得到一些非常不完整且效率不高的东西。

正则表达式无法处理复杂的语法，使用通用或[特定于 java](https://www.google.com/?q=java+parser)的解析器。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-15T11:01:47.877

您可以尝试使用正则表达式，但使用 Java Parser 可能更容易。你可以试试[JavaCC](http://java.net/projects/javacc)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-15T11:06:11.637

我建议您查看解析器生成器，例如。JavaCC。JavaCC 允许您以类似 BNF 的样式描述语法并根据它创建 Java 类。JavaCC 也已经有语法可用于解析 Java 代码，我认为即使作为 JavaCC 附带的示例或教程。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-15T11:07:36.937

如果您真的必须使用正则表达式，请尝试类似的`(?<=int )\\w+`方法，但我强烈建议您使用一些 Java 解析器。

# iphone - 线程1：EXC_BAD_ACCESS（代码=1 地址=0xe07eca10）

> ID：11049372
> 
> 赞同：0
> 
> 时间：2012-06-15T10:58:28.177
> 
> 标签：iphone, exception, exc-bad-access

我有一个 UIView 的问题。这是代码：

```
@property ( unsafe_unretained, nonatomic) IBOutlet UIView *formView;

- (IBAction)createNewProfile:(id)sender {
   [self loadDialogForm];
}

-(void) loadDialogForm{
    NSLog(@"load form");
    CGRect frame = self.view.bounds;
    CGPoint center = CGPointMake( frame.origin.x +    ceil(frame.size.width/2),frame.origin.y + ceil(frame.size.height/2));
    CGFloat width = floor(1 * frame.size.width) - OFFSET * 2;
    CGFloat height = floor(1 * frame.size.height) - OFFSET * 2;

    _formView.frame=CGRectMake(OFFSET, OFFSET, width, height); //here the error EXC_BAD_ACCESS (code=1 address=0xe07eca10)
    _formView.center=center;

    [self.view addSubview:_formView];
    [self performSelector:@selector(initialDelayEnded) withObject:nil afterDelay:1];
} 
```

通过 NSLog，_formView 的框架是 x= 0, y=0, width=300, height=390。为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:35:09.383

采用

@property (nonatomic,retain) IBOutlet UIView *formView;

代替

@property ( unsafe_unretained, nonatomic) IBOutlet UIView *formView;

# jquery - 使用 jQuery 循环数据时调用异步函数

> ID：11049379
> 
> 赞同：0
> 
> 时间：2012-06-15T10:58:50.277
> 
> 标签：jquery, loops, asynchronous

Stack上有很多这个问题的变体，大多数答案只是说要重组你的代码或使用async = false。

问题又是，你有一个数据数组，你想要循环遍历并在每个元素上执行一些异步函数，但你不希望同时运行多个异步线程。这可能会弄乱数组顺序之类的事情，或者与您的项目想要做的完全不一致。

例如，

```
$.each(my_data,function(i,o){
  $.getJSON(o,function(r){
     //do somethin' with r then move on to next my_data element
  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:58:50.867

这是我用来解决上述问题的一个小片段，纯粹使用回调（不告诉 JS 挂起）。它可能存在于其他地方，看起来很方便已经存在，但我还没有看到它。所以在这里希望它对你们中的一些人有所帮助。

如果您希望我改进我的语法或以某种方式优化它，请评论答案，我不是世界上最优雅的编码器。

```
function asyncloop(i,arr,each_cb,end_cb){
    var cont,s;
    //just do a quick check to ensure this is an array or not at end
    if ($.isArray(arr)) { 
          s = arr[i];
          if ((i+1) < arr.length) { cont = true; } else { cont = false; }
    } else {
        s= arr;
        cont = false;
    }
    each_cb(s,function(){
        if (cont == true) {
            asyncloop((i+1),arr,each_cb,end_cb);
        } else {
            end_cb();   
        }
    });
} 
```

使用 -- 调用

```
asyncloop(0,my_data,function(o,callback){
  //gets called with each element
  some_asynch_function(o,function(r){
    //blah blah blah
    callback();
  });
},function(){
  //finish with this
  alert('process is finished wowowow');
}); 
```

那就干杯！

# php - 有 2 个导致数据无法插入的 mysqli 错误

> ID：11049384
> 
> 赞同：0
> 
> 时间：2012-06-15T10:59:08.037
> 
> 标签：php, mysqli

```
 //connected to db

if (isset($_POST['teacherusername'])) {

$_SESSION['teacherusername'] = $_POST['teacherusername'];

}

        $sql = "SELECT TeacherId FROM Teacher WHERE (TeacherUsername = ?)";

        $stmt=$mysqli->prepare($sql);
        $stmt->bind_param("s",$_SESSION['teacherusername']);
        $stmt->execute();
        $record = $stmt->fetch();
        $teacherid = $record['TeacherId'];
        $stmt->close();

        if($_SERVER['REQUEST_METHOD'] == 'POST')

        {

        $time = str_replace(array(' Hrs ', ' Mins ', ' Secs'), array(':', ':', ''), $_SESSION['durationChosen']);

        $insertsql = "INSERT INTO Session (SessionId, SessionTime, SessionDate, SessionWeight, SessionDuration, TotalMarks, ModuleId, TeacherId, Room) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)";
        $insert = $mysqli->prepare($insertsql);

        for ($i = 1, $n = $_SESSION['sessionNum']; $i <= $n; ++$i) {
            $sessid = $_SESSION['id'] . ($n == 1 ? '' : $i);
            $sessdate = date("Y-m-d", strtotime($_SESSION['dateChosen']));

            $insert->bind_param("sssssssss", $sessid, $_SESSION['timeChosen'], $sessdate,
                             $_SESSION['textWeight'], $time, $_SESSION['textMarks'],
                             $_SESSION['module'], $teacherid, $_SESSION['rooms']);

            $insert->execute();

           if ($insert->errno) { echo "Error in insert: $insert->error<br>\r\n"; }

            $insert->close();
        }

        } 
```

更新：

以前的错误已得到修复，但我现在收到 4 个警告，如下所示：

警告：mysqli_stmt::bind_param() [mysqli-stmt.bind-param]：无法在第 177 行的 /web/stud/.../Mobile_app/insertsession.php 中获取 mysqli_stmt

警告：mysqli_stmt::execute() [mysqli-stmt.execute]：无法在第 179 行的 /web/stud/.../Mobile_app/insertsession.php 中获取 mysqli_stmt

警告：main() [function.main]：无法在第 181 行的 /web/stud/.../Mobile_app/insertsession.php 中获取 mysqli_stmt

警告：mysqli_stmt::close() [mysqli-stmt.close]：无法在第 185 行的 /web/stud/.../Mobile_app/insertsession.php 中获取 mysqli_stmt

由于 mysqli 现在正在向数据库中插入数据，我应该处理这些警告还是不理会它们？

问题已解决，未来的观众请看 DAVE RANDOM 的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:07:47.480

只需在循环末尾添加这一行，它应该可以工作：

```
$insert->close(); 
```

*如果*在您显示的代码之前执行的代码中仍然没有未关闭的语句，这将起作用。您*必须先*关闭前一个语句，然后才能执行另一个语句。

有关[`mysqli_stmt::close()`](http://php.net/manual/en/mysqli-stmt.close.php)更多信息，请参阅。

**编辑**

试试这个代码：

```
//connected to db

$sql = "
  SELECT TeacherId
  FROM Teacher
  WHERE TeacherUsername = ?
";

if (!$stmt = $mysqli->prepare($sql)) {
  // Handle errors with prepare operation here
}

// Bind parameter for statement
$stmt->bind_param("s", $_SESSION['teacherusername']);

// Execute the statement
$stmt->execute();

// This is what matters. With MySQLi you have to bind result fields to
// variables before calling fetch()
$stmt->bind_result($teacherid);

// This populates $teacherid
$stmt->fetch();

// Close the statment
$stmt->close();

if($_SERVER['REQUEST_METHOD'] == 'POST')

{

    $time = str_replace(array(' Hrs ', ' Mins ', ' Secs'), array(':', ':', ''), $_SESSION['durationChosen']);

    $insertsql = "
      INSERT INTO Session
        (SessionId, SessionTime, SessionDate, SessionWeight, SessionDuration, TotalMarks, ModuleId, TeacherId, Room)
      VALUES
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
    ";
    if (!$insert = $mysqli->prepare($insertsql)) {
      // Handle errors with prepare operation here
    }

    for ($i = 1, $n = $_SESSION['sessionNum']; $i <= $n; ++$i) {

        $sessid = $_SESSION['id'] . ($n == 1 ? '' : $i);
        $sessdate = date("Y-m-d", strtotime($_SESSION['dateChosen']));

        $insert->bind_param("sssssssss", $sessid, $_SESSION['timeChosen'], $sessdate,
                     $_SESSION['textWeight'], $time, $_SESSION['textMarks'],
                     $_SESSION['module'], $teacherid, $_SESSION['rooms']);

        $insert->execute();

        if ($insert->errno) {
          // Handle query error here
        }

        $insert->close();

    }

} 
```

# ruby-on-rails - Rails：如何布局与数据模型流不同的表单？

> ID：11049392
> 
> 赞同：0
> 
> 时间：2012-06-15T10:59:30.463
> 
> 标签：ruby-on-rails, form-for, fields-for

我有一个代表每周订单的数据模型。例如。我的订单可能是

```
Monday: 2 x coffee
Tuesday: 2 x tea
Wednesday: 3 x coffee, 4x tea 
```

我在周末支付我的订单。

我将其表示为：

```
Order
   has_many: days

Day
   has_many: line_items 
```

我有一种形式：

```
form_for @order
   fields_for :days
       fields_for :line_items 
```

产生一个像

```
Monday
   Tea x 2
   Coffee x 0
Tuesday
   Tea x 1
   Coffee x 3
Wednesday
   Tea x 1
   Coffee x 2 
```

我希望我的表格是这样的表格：

```
 Monday     Tuesday     Wednesday

Coffee       2           1           1 
Tea          0           3           2
Add+ 
```

我可以通过遍历 Order.days.each do |day| 来做到这一点 day.each 等试图找出输入字段“order[]days[]line_items[]”的名称，并为 line_item 和 day 添加隐藏变量，但结果却比最初看起来更难。

我错过了更简单的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T22:24:40.197

我这样做的方法是在哈希中构建表单元素，然后将它们添加到表单中

```
form_for @order
  fields_for :days
      fields_for :line_items
          hash[line_item.product][day.theday] = select_tag... 
```

然后遍历天数和产品并在表格中放入适当的选择标签

# .net - Magento API .Net：从订单中检索产品选项名称值

> ID：11049397
> 
> 赞同：1
> 
> 时间：2012-06-15T10:59:50.453
> 
> 标签：.net, magento, soap

我需要知道如何在订单中检索每个产品的自定义选项（名称/值）。

例如，在我的订单中，我有 1x 产品，可以说是“彩色蜡笔”。该产品具有“颜色”的自定义选项，客户在将产品添加到他们的购物篮时选择该选项。

当我处理客户的订单时，我希望能够检索选项名称和选项值。

**注 1** 使用 Magento 1.7 社区版，在 .Net 中使用 SOAP 和 Magento API v2 进行开发。

我发现名为 product_options 的 salesOrderEntity Items 属性仅包含看起来像 JSON 编码的产品选项值列表。此列表不包含属性名称，而是包含看起来像 ID 的内容，我认为可以在其中查看选项名称。

```
salesOrderEntity theOrder = apiService.salesOrderInfo(sSessionId, "100000001");      
string sProductOptions = theOrder.items[0].product_options; // returns JSON like string syntax 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:28:22.463

经过进一步调查，我发现我从 product_Options 属性得到的响应是序列化的 php（wth？）。

如果你把它整理一下，它看起来像这样（类似于 JSON）：

```
a:3:{s:7:"colours";a:3:{i:0;s:4:"pink";i:1;s:6:"orange";i:2;s:3:"red";}s:6:"intkey";i:1;s:6:"colour";s:4:"blue";} 
```

我环顾四周，发现了一个 C# php 序列化器/反序列化器，并成功反序列化了来自 API 的响应。

[这是](http://sourceforge.net/projects/csphpserial/)C# 反序列化器的链接。

# ajax - 资源解释为脚本，但使用 MIME 类型 text/xml 传输

> ID：11049399
> 
> 赞同：2
> 
> 时间：2012-06-15T11:00:03.730
> 
> 标签：ajax, web-services

在 VS 2010 中，我有两个项目，一个用于 web 服务，另一个用于 asp.net 页面。

我尝试像这样调用 Web 服务（来自 asp.net 页面的 .js）：

```
var host =  "localhost:15932";

var url = "http://" + host + "/MyWebService.asmx/GetFeed?callback=?";

$.ajax({
    async: true,
    type: 'Get',
    url: url,
    data:{ CountryId: CountryId, FeedDateString: FeedDateString, Previous: Previous},
     contentType: 'application/json; charset=utf-8',
     //contentType:'text/xml ',
    processData: true,
    dataType: 'jsonp',

    success: function (response) {
        var result= response.d;
    ,
    error: function (request, status, error) {
        alert(request.responseText);
    }
        ,
    failure: function (msg) {
        alert('somethin went wrong' + msg);
    }
}); 
```

调用很顺利，但从 web 服务返回的结果是 xml，并且 chrome 显示错误消息：“资源解释为脚本，但使用 MIME 类型文本/xml 传输”当我在浏览器中键入时，我得到一个 xml 流：

“http://localhost:15932/MyWebService.asmx/GetCountryFeed?callback=jsonp1339760946308&CountryId=1&FeedDateString=&Previous=true”

我的网络服务方法的代码：

```
 [WebMethod(Description = "Get feed")]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json,UseHttpGet=true)]
    public List<Feed> GetFeed(int CountryId, string FeedDateString, bool Previous)
    {

        return (new UserFeedManager()).GetFeed(CountryId, FeeDate, Previous);
    } 
```

要更改什么以使 response.d 为 json 格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-03T15:54:30.953

您需要覆盖 Web 服务响应。

1.  将 GetFeed 的返回类型设置为 void。
2.  序列化列表。
3.  返回 json: HttpContext.Current.Response.ContentType = "text/javascript"; HttpContext.Current.Response.Write(json) HttpContext.Current.Response.End();

您可能希望创建一个类来处理您的响应并传入您的函数，这些函数返回带有 Func 函数或 Func 参数的 json。

# android - 缺少所有 SDK 平台

> ID：11049404
> 
> 赞同：0
> 
> 时间：2012-06-15T11:00:22.103
> 
> 标签：android, eclipse

几周前，我正在开发 android 应用程序。一切正常。我已经用所有版本的 android sdk 更新了我的 eclipse。从 1.* 到 4.0.3。今天我打开了我的项目来做一些改变。而且我发现只有4.0.3平台。我所有的项目都有数百个错误，即使我的 AVD 上显示有红十字。

谁能告诉我它是什么？我怎么会错过所有已安装的 sdk 平台？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:22:13.263

如果您不小心删除了 Android SDK 文件夹，它将停止您的所有代码工作。尝试重置您的路径。在 Eclipse 中，转到 Window -> Preferences -> Android。然后浏览到 SDK 位置目标文本框中的 SDK 文件夹。

# ivy - 常春藤在 Nexus 中发布多个具有不同版本号的 jar

> ID：11049405
> 
> 赞同：0
> 
> 时间：2012-06-15T11:00:23.997
> 
> 标签：ivy

如何使用 ivy 和 ant 在 Nexus Sonatype Repository 中发布具有不同版本号的多个 jar 文件。

如何编写 ivy.xml 文件？

假设我有以下两个 jar 文件

1.  寻址-1.0.jar 和
2.  castor-1.3.jar

我应该如何在 ivy.xml 中提供版本号，因为这里有两个不同的版本号（1.0 和 1.3），以便在 Nexus Sonatype 存储库中发布这些 jar 文件并使用适当的版本号。

感谢您

寻找这个问题的答复。请

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:22:06.160

构建发布的所有文件都将与相同的发布版本相关联。

我怀疑您需要做的是上传依赖项？在这种情况下，最简单的方法是使用 Nexus GUI 或以下答案

*   [将工件上传到 Nexus，无需 Maven](https://stackoverflow.com/questions/4029532/upload-artifacts-to-nexus-without-maven)

# 解释

ivy 文件描述了项目依赖关系以及项目生成和发布的文件。

因此，例如以下文件列出了 ivy 将上传到 Nexus 的两个文件，一个 jar 和一个 POM 文件：

```
<ivy-module version='2.0'>

    <info organisation="com.myspotonontheweb" module="donaldduck"/>

    <publications>
        <artifact name="donaldduck" type="jar"/>
        <artifact name="donaldduck" type="pom"/>
    </publications>

    <dependencies>
         ..
         ..
    <dependencies/>

</ivy-module> 
```

重点是......此模块发布的所有文件都将具有相同的版本号。这是由发布任务指定的（参见 pubrevision 属性）：

```
<ivy:publish resolver="nexus" pubrevision="${publish.revision}" overwrite="true" publishivy="false" >
    <artifacts pattern="${build.dir}/[artifact].[ext]"/>
</ivy:publish> 
```

# 观察

您示例中的文件看起来像[Maven Central](http://search.maven.org/)提供的文件。这意味着它们会被您的 Nexus 服务器自动代理，并且可以作为依赖项包含在您的项目中：

```
 <dependencies>
        <dependency org="net.sourceforge.addressing" name="addressing" rev="1.1.1"/>
        <dependency org="org.codehaus.castor" name="castor" rev="1.2"/>
    <dependencies/> 
```

# c++ - 错误：'int' 和 '<unresolved 重载函数类型="">' 类型的无效操作数到二进制 'operator/'</unresolved>

> ID：11049412
> 
> 赞同：0
> 
> 时间：2012-06-15T11:01:08.870
> 
> 标签：c++, operator-overloading

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:05:03.793

听起来像是`StopTime`一个函数。这将解释这两个错误。

# json - Unable to Call WCF REST Service from Jquery

> ID：11049415
> 
> 赞同：1
> 
> 时间：2012-06-15T11:01:19.450
> 
> 标签：json, wcf, rest, no-response

I am trying to call WCF REST service with POST method.

```
[OperationContract]
[AllowCrossSiteJson]
[WebInvoke(UriTemplate = "/PerformAction", 
                Method = "POST", 
         RequestFormat = WebMessageFormat.Json, 
        ResponseFormat = WebMessageFormat.Json)]
[FaultContract(typeof(CpiFaultContract))]
string PerformAction(ActionMetaData data); 
```

If I use the following C# code I am able to call the service correctly:

```
var serializer = new JavaScriptSerializer();
var jsonRequestString = serializer.Serialize(credentail);
var bytes = Encoding.UTF8.GetBytes(jsonRequestString);

// Initiate the HttpWebRequest with session support with CookiedFactory
var request = CreateHttpWebRequest("http://aviary.cloudapp.net/PerformAction");
request.Method = "POST";
request.ContentType = "application/json";
request.Accept = "application/json";

// Send the json data to the Rest service
var postStream = request.GetRequestStream();
postStream.Write(bytes, 0, bytes.Length);
postStream.Close();

// Get the login status from the service
var response = (HttpWebResponse)request.GetResponse();
var reader = new StreamReader(response.GetResponseStream());
var jsonResponseString = reader.ReadToEnd(); 
```

Following is the `web.config` I am using:

```
<?xml version="1.0"?>

 <configuration>
 <system.web>
  <compilation debug="true" targetFramework="4.0" />
 </system.web>
   <system.serviceModel>
   <behaviors>
   <endpointBehaviors>
       <behavior name="AviaryEndPointBehavior">
         <webHttp />
      </behavior>
    </endpointBehaviors>
  <serviceBehaviors>
    <behavior name="AviaryServiceBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
    <behavior name="">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
  </serviceBehaviors>
</behaviors>
 <serviceHostingEnvironment aspNetCompatibilityEnabled="true" 

      multipleSiteBindingsEnabled="true" />
  <standardEndpoints>
   <webHttpEndpoint>
    <standardEndpoint name="" helpEnabled="true" defaultOutgoingResponseFormat="Xml"
                      automaticFormatSelectionEnabled="true"></standardEndpoint>
  </webHttpEndpoint>
  </standardEndpoints>
       </system.serviceModel>
     <system.webServer>
  <modules runAllManagedModulesForAllRequests="true">
  <add name="UrlRoutingModule"
       type="System.Web.Routing.UrlRoutingModule, System.Web, Version=4.0.0.0, 

       Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
 </modules>
<handlers>
  <add name="UrlRoutingHandler" preCondition="integratedMode" verb="*"      

          path="UrlRouting.axd"
       type="System.Web.HttpForbiddenHandler, System.Web, Version=4.0.0.0, 

         Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
  </handlers>
  </system.webServer>
   </configuration> 
```

However if I use the following Ajax Method I get nothing and there is no hit on the service:

```
postData.JobActionList = JSON.stringify(jobActionLists);
var postDataString = JSON.stringify(postData);
jQuery.ajax({
    url: "http://myService.cloudapp.net/PerformAction",
    type: "POST",
    data: postDataString,
    contentType: "application/json; charset=utf-8",
    success: function (result) {

        alert("Success" + result.d);

    },
    error: function (req, status, error) {
        alert('Service Failed : ' + req + ", " + status + ", " + error);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:12:47.283

快速建议：您是否正在对服务进行跨域调用？我有同样的问题，但切换到 JSONP 而不是 JSON。看看这篇文章：[http ://bendewey.wordpress.com/2009/11/24/using-jsonp-with-wcf-and-jquery/](http://bendewey.wordpress.com/2009/11/24/using-jsonp-with-wcf-and-jquery/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-28T07:23:28.333

而是将 Object 值作为 json 在变量中作为传递发送并添加跨浏览器支持。

```
function updateExample() {

var myJSONData = '{"LastUpdatedBy":null,"DateUpdated":null,"CreatedBy":null,"DateCreated":null,"Description":null,"VideoID":' + videoId + ',"CommentID":null,"UserID":"' + userId + '","UserName":"' + document.getElementById('txtUserName').value + '","CommentText":"' + document.getElementById('txtComment').value + '","Location":846.728,"ParentCommentID":null}';

jQuery.support.cors = true;
$.ajax({
    type: "POST",
    url: "http://myService.cloudapp.net/PerformAction",
    contentType: "application/json; charset=utf-8",
    data: myJSONData,
    dataType: "jsonp",
    async: false,
    beforeSend: function (XMLHttpRequest) {
        //Specifying this header ensures that the results will be returned as JSON. 
        XMLHttpRequest.setRequestHeader("Accept", "application/json");
    },
    success: function (data, status, jqXHR) {
        alert('success');
    },
    error: function () {
        alert('failed');
    },

}); 
```

}

# azure - Azure：CacheInstaller 和 ConfigStoreException

> ID：11049417
> 
> 赞同：6
> 
> 时间：2012-06-15T11:01:29.020
> 
> 标签：azure

我正在尝试使用同位缓存。在云模拟器启动过程中出现以下异常：

```
Application: CacheInstaller.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: Microsoft.ApplicationServer.Caching.ConfigStoreException
Stack:
   at Microsoft.ApplicationServer.Caching.AzureCommon.AzureUtility.RetryExponentialTask(System.Func`1<Boolean>, System.Predicate`1<System.Exception>, System.TimeSpan, System.TimeSpan, System.TimeSpan, Int32)
   at Microsoft.ApplicationServer.Caching.AzureCommon.Package.InitializeExternalStore(Microsoft.ApplicationServer.Caching.ICustomProvider)
   at Microsoft.ApplicationServer.Caching.AzureCommon.Package.InitializeExternalStoreIfRequired()
   at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)
   at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)
   at System.Threading.ThreadHelper.ThreadStart() 
```

我的配置：

```
 <dataCacheClients>
    <tracing sinkType="DiagnosticSink" traceLevel="Error" />
    <dataCacheClient name="default">
      <autoDiscover isEnabled="true" identifier="Web" />
    </dataCacheClient>
  </dataCacheClients> 
```

有人可以帮助我吗？:)

**编辑**：

我正在使用 VS 2010 SP1，Windows 7。我删除了 SDK 1.6 并重新安装了 1.7。

云配置（网络角色）：

```
<ServiceConfiguration serviceName="Cloud" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceConfiguration" schemaVersion="2012-05.1.7">
  <Role name="Web">
    <Instances count="1" />
    <ConfigurationSettings>
      <Setting name="Microsoft.WindowsAzure.Plugins.RemoteAccess.Enabled" value="true" />
      <Setting name="Microsoft.WindowsAzure.Plugins.RemoteAccess.AccountUsername" value="..." />
      <Setting name="Microsoft.WindowsAzure.Plugins.RemoteAccess.AccountEncryptedPassword" value="..." />
      <Setting name="Microsoft.WindowsAzure.Plugins.RemoteAccess.AccountExpiration" value="..." />
      <Setting name="Microsoft.WindowsAzure.Plugins.RemoteForwarder.Enabled" value="..." />
      <Setting name="Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString" value="DefaultEndpointsProtocol=https;AccountName=...;AccountKey=..." />
      <Setting name="DiagnosticsConnectionString" value="DefaultEndpointsProtocol=https;AccountName=...;AccountKey=..." />
      <Setting name="Microsoft.WindowsAzure.Plugins.Caching.NamedCaches" value="{&quot;caches&quot;:[{&quot;name&quot;:&quot;default&quot;,&quot;policy&quot;:{&quot;eviction&quot;:{&quot;type&quot;:0},&quot;expiration&quot;:{&quot;defaultTTL&quot;:10,&quot;isExpirable&quot;:true,&quot;type&quot;:1},&quot;serverNotification&quot;:{&quot;isEnabled&quot;:false}},&quot;secondaries&quot;:0}]}" />
      <Setting name="Microsoft.WindowsAzure.Plugins.Caching.Loglevel" value="" />
      <Setting name="Microsoft.WindowsAzure.Plugins.Caching.CacheSizePercentage" value="30" />
      <Setting name="Microsoft.WindowsAzure.Plugins.Caching.ConfigStoreConnectionString" value="UseDevelopmentStorage=true" />
    </ConfigurationSettings>
    <Certificates>
      <Certificate name="Microsoft.WindowsAzure.Plugins.RemoteAccess.PasswordEncryption" thumbprint="..." thumbprintAlgorithm="sha1" />
    </Certificates>
  </Role>
</ServiceConfiguration> 
```

**编辑2**：

我试图创建空的测试项目：

1.  创建 Windows Azure 云服务项目
2.  选定的 ASP.NET Web 角色
3.  在 Web 角色属性的缓存选项卡中启用缓存（位于同一位置）
4.  安装的 Windows Azure 缓存预览
5.  使用 NuGet 启动云项目
6.  同样的例外

**编辑3**：

我安装了 VS 2012 RC 并尝试创建测试项目。发生了同样的问题。

**编辑4**：

异常详情：

```
Microsoft.ApplicationServer.Caching.ConfigStoreException:
  Windows Azure Storage Service is not ready/available.  StorageAccountName = DevStorage, BlobNamePrefix = deployment17(44)__Web --->
  Microsoft.WindowsAzure.StorageClient.StorageClientException: ERROR --->
  System.Net.WebException: The remote server returned an error: (400) Bad Request.
   at System.Net.HttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
   at Microsoft.WindowsAzure.StorageClient.EventHelper.ProcessWebResponse(WebRequest req, IAsyncResult asyncResult, EventHandler`1 handler, Object sender)
   --- End of inner exception stack trace ---
   at Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.get_Result()
   at Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.ExecuteAndWait()
   at Microsoft.WindowsAzure.StorageClient.CommonUtils.<LazyEnumerateSegmented>d__0`1.MoveNext()
   at System.Linq.Enumerable.Any[TSource](IEnumerable`1 source, Func`2 predicate)
   at Microsoft.ApplicationServer.Caching.WindowsAzureBlobProvider.IsInitialized()
   --- End of inner exception stack trace ---
   at Microsoft.ApplicationServer.Caching.AzureCommon.AzureUtility.RetryExponentialTask(Func`1 doTask, Predicate`1 shouldRethrow, TimeSpan minBackoff, TimeSpan maxBackoff, TimeSpan deltaBackoff, Int32 retryCount)
   at Microsoft.ApplicationServer.Caching.AzureCommon.Package.InitializeExternalStore(ICustomProvider customProvider)
   at Microsoft.ApplicationServer.Caching.AzureCommon.Package.InitializeExternalStoreIfRequired()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T00:38:50.143

在我看来，当它尝试初始化缓存的后备存储时出现问题。您从 Blob 存储提供商处收到 400 错误请求。如果没有配置缓存，您是否能够从另一个测试项目访问您的开发存储中的 BLOB 存储？devstorage 模拟器是否正在运行？

通过查看通知区域/系统托盘并右键单击模拟器的 Azure 小图标，检查存储模拟器是否正在运行。如果其中一个内容菜单是“启动存储模拟器”，则存储服务未运行，请单击它。如果它认为它正在运行，则单击 Show Storage Emulator 并确保检查 Blob 和其他服务并具有运行状态。如果是这种情况，请尝试使用另一个测试应用程序或第三方工具（如 Cerebrata 的 Cloud Storage Studio）读取/写入您的开发 blob 存储。

缓存系统正在尝试在 BLOB 存储中创建一个名为 cacheclusterconfigs 的文件夹，集群的每个成员都可以在其中查看配置。无论出于何种原因，您都无法访问 BLOB 存储来执行此操作。

要回答您的其他问题，是的，CacheInstaller 确实会记录。当您启动实例时，即使在它完全启动之前，您也应该能够查看计算模拟器并选择一个实例。然后右键单击该实例并选择“打开本地存储”。这将打开一个资源管理器窗口，模拟器将特定于每个实例的文件放在其中。它将类似于 C:\Users{user}\AppData\Local\dftmp\Resources\8d403f60-3b09-481a-8b9c-86ab9e06954b。GUID 是实例。从该窗口挖掘到以下目录：\directory\Microsoft.WindowsAzure.Plugins.Caching.FileStore。在这里，您将看到来自缓存服务的日志文件。如果您的安装卡住了，那么您应该在此目录中看到一个文件，例如 DedicatedCacheLogs_CacheInstaller_xxxx.log（xxxx 是数字）。这可能会帮助你。

请注意，cacheinstaller.exe.config 和相关的可执行文件实际上是从 C:\Program Files\Microsoft SDKs\Windows Azure.NET SDK\2012-06\bin\ 复制到包中，然后复制到模拟器的实例中插件\缓存目录。如果您无法从我上面指出的实例目录中找到所需的内容，也许您可​​以从该 SDK 目录向 exe.config 添加另一个跟踪侦听器并让它吐出其他信息。

希望这些提示对您有所帮助。除非我为 Azure 中的帐户提供了错误的存储帐户地址，否则我无法最终重新创建该问题，即使那样它也不是 100% 匹配您的错误。

# blackberry - Creating interface between a java class & a complete built project

> ID：11049422
> 
> 赞同：0
> 
> 时间：2012-06-15T11:01:34.337
> 
> 标签：blackberry, java-me

I have a requirement where, I need to give the user only one editable java class where he can make changes in the program such as changing username, changing phone number. The moment he saves the data, the built program should be able to reproduce the changes.

I am doing this project for BlackBerry.

I want to know, is there any way in which I can link a class with external project? I am developing the project using Eclipse. I don't know how the user will make changes and save. I know it's a little weird but generally speaking, I want to link two different applications using some middle interface. Any help is greatly appreciated

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T11:12:30.367

我相信这是一个简单的案例“你认为你知道你想要什么，但你真的不知道”:)

请说明您希望在两个应用程序之间实现什么以及它们如何交互，我们将为您提供比要求用户修改 java 文件更好的解决方案。

**OP 评论后更新：**

您需要查看 XML 或 JSON。这些是格式化数据的方法，以便于编写/生成/传输/解析。

在黑莓上解析 XML 在黑莓上 [解析 XML 文件](https://stackoverflow.com/questions/2757990/parse-xml-file-on-blackberry)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:07:39.883

当你构建一个 java 项目时，你会得到一个 jar 文件。如果您将该 jar 文件包含到类路径中，则其所有内容都可用于您的代码（带有必要的导入语句）。

# c# - HTTP 请求花费太多时间

> ID：11049424
> 
> 赞同：0
> 
> 时间：2012-06-15T11:01:52.757
> 
> 标签：c#, asp.net-mvc-3, http, sharepoint, httpresponse

我为 Sharepoint 2007 Farm 创建了一个预热脚本，我在 ArrayLists 中获取了 webapps、sitecollections、网站、网站和子网站的所有 URL。之后，我使用以下代码从每个网络获取响应，但是它花费了太多时间，我想知道是否有任何替代或更好的方法来做到这一点，并且它会花费更少的时间/资源。

```
 WebRequest request = WebRequest.Create(URL);
                request.Proxy = null;

                if ((userName == null) || (userName == ""))
                {
                    request.Credentials = CredentialCache.DefaultCredentials;
                }
                else
                {
                    CredentialCache myCache = new CredentialCache();
                    myCache.Add(new Uri(URL), authType, new NetworkCredential(userName, password, domain));
                    request.Credentials = myCache;
                }

                HttpWebResponse response = (HttpWebResponse)request.GetResponse();
                Console.WriteLine(response.StatusDescription);
                using (Stream dataStream = response.GetResponseStream())
                using (StreamReader reader = new StreamReader(dataStream))
                {

                    string responseFromServer = reader.ReadToEnd();
                    reader.Close();
                    dataStream.Close();
                    response.Close();
                } 
```

我在谷歌上试过，但找不到太多相关的，或者我不知道如何使它与此相关，

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:08:58.173

如果您不担心服务器超载，请拆分 URL 列表并启动 5 或 10 个这些进程。发送和接收时可能会有很多等待。

# ios - 无法在装有 iOS 5.1.1 的设备上测试应用程序？

> ID：11049428
> 
> 赞同：0
> 
> 时间：2012-06-15T11:02:02.150
> 
> 标签：ios, testing, device

我最近将 iPad 升级到 iOS 5.1.1。主办方提示“Xcode找不到要安装这个版本的软件和镜像”。“无法支持发展。”

![组织者屏幕](../Images/37474d07c87bd851ec41b7662b1862d4.png)

Xcode 4.2 最高支持 SDK 5.0。
Xcode 4.3.3最高支持SDK 5.1，但不支持SDK 5.1.1，是吗？

所以没有办法在 5.1.1 设备上测试，不是吗？

ps
我正在使用 Mac OS X 10.6.8 和 Xcode 4.2。根据[这种方法](https://stackoverflow.com/questions/9613565/is-is-possible-to-get-the-ios-5-1-sdk-for-use-with-xcode-4-2-on-snow-leopard)，我已将“5.1 (9B176)”复制到相应的文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:05:36.193

要在 iOS 5.1 上进行测试，您需要 Mac OS 10.7 Lion 和 Xcode 4.3。iOS 5.1 支持仅适用于 Xcode 4.3，因此您无法在使用早期版本的 5.1 设备上进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T18:43:17.540

SugarMEmE，只是一个想法，因为你需要手动复制它，你需要独立的iOS5.1.1sdk。我检查了 Xcodes4.2.x 到 Xcode4.5，它们没有 iOS5.1.1，只有 5.1，然后是 6.0。没有中间体。因此，如果有人有一个带有 Xcode4.2 或更高版本的 Lion，它可以自动下载这些中间体，从技术上讲，你可以从那里复制它。

嘿嘿，刚做了。你需要在这里找到一个文件 iPad1,1_5.1.1_9B206_restore.ipsw 说：http: [//mytopfiles.com/other/file/iPad1,1_5-1-1_9B206_Restore/589434.htm](http://mytopfiles.com/other/file/iPad1,1_5-1-1_9B206_Restore/589434.htm)

它在 Library\iTunes\iPad Software Updates\ 我的另一台 Mac（具有 Lion 和 Xcode 4.3）上，我刚刚将它复制到我的 Mac（Snow Leopard w Xcode4.2）上的同一个 Library\iTunes\iPad Software Updates 中。图像立即出现在 Xcode Organizer Library Software Images 中。我马上就可以在我的 iPad1 上构建 iOS5.1.1

从逻辑上讲，如果你需要它用于 iPad2，你会寻找 iPad2,1_5.1.1_9B206_restore.ipsw [http://mytopfiles.com/other/file/iPad2,1_5-1-1_9B206_Restore/589852.htm](http://mytopfiles.com/other/file/iPad2,1_5-1-1_9B206_Restore/589852.htm)等，我猜。

问候，乙

PS 毕竟，你还不需要支付升级到 Lion 的费用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-04T10:31:00.127

您通常可以链接到 DeviceSupport 文件夹以获取类似的操作系统版本。

我刚刚为 5.1.1 做了这个并且它有效：

```
sudo ln -s 5.1 /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport/5.1.1 
```

# arrays - 在 F# 上定义特定类型的新数组

> ID：11049439
> 
> 赞同：5
> 
> 时间：2012-06-15T11:02:47.593
> 
> 标签：arrays, f#

如何专门定义特定类型 T 的新数组？

奇怪的是，我找不到任何有用的信息。

我想写这样的东西：

```
let arr = new Array() 
```

只是 arr 的元素必须是 T 类型。

我怎样才能在 F# 上做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T11:11:17.523

也许[`Array.init<'T>`](http://msdn.microsoft.com/en-us/library/ee370582.aspx)and[`Array.create<'T>`](http://msdn.microsoft.com/en-us/library/ee370553)函数是您正在寻找的。

还可以考虑使用 a[`Sequence`](http://msdn.microsoft.com/en-us/library/dd233209)而不是数组。

> 序列是一种类型的元素的逻辑系列。当您拥有大量有序的数据集合但不一定希望使用所有元素时，序列特别有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T11:14:20.030

如果元素的类型未知，您可以使用显式类型注释：

```
let arrayOfTenZeroes = Array.zeroCreate<int> 10    
let emptyIntArray: int array = [||] 
```

[当您使用Array module](http://msdn.microsoft.com/en-us/library/ee370273)中的高阶函数时，您不必这样做，因为类型检查器会自动推断元素的类型：

```
// arr is inferred as int array
let arr = Array.init 10 (fun i -> i+1) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T11:10:50.847

也许你可以尝试这样的事情。

```
let myStringArray : string array = Array.zeroCreate 10
let myIntArray : int array = Array.zeroCreate 10
let myCharArray : char array = Array.zeroCreate 10 
```

它在[msdn](http://msdn.microsoft.com/en-us/library/dd233214.aspx)上进行了描述。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-15T15:49:19.887

[自动泛化](http://msdn.microsoft.com/en-us/library/dd233183.aspx)和类型推断是您应该利用的重要功能。

创建数组时：

```
let arr = Array.zeroCreate 10 
```

它的类型是*广义*的。在这种情况下，它被推断为`'T[]`（尽可能一般）。

一旦你做了类似的事情：

```
let x = arr.[0] + 1 
```

或者

```
printfn "%s" arr.[0] 
```

它可以推断出具体类型（`int[]`或`string[]`，分别）。

缺少显式类型使您的代码更加简洁。保存类型注释以供真正需要时使用。

# c# - C# CRM SDK 自定义列

> ID：11049449
> 
> 赞同：2
> 
> 时间：2012-06-15T11:03:40.627
> 
> 标签：c#, dynamics-crm, customcolumn

如何构建 CRM SDK QueryExpression，其中两列的值合并为一个新列？在 MySQL 中，我的查询如下所示：

```
SELECT *, (`latest_maintenance`+`maintenance_interval`) as `next_maintenance` FROM `servers` ORDER BY `next_maintenance` DESC 
```

然而，在 C# 中，我只能做到以下几点：

```
var retrieveRequest = new RetrieveMultipleRequest();

retrieveRequest.Query = new QueryExpression
                                    {
                                        EntityName = "server",
                                        ColumnSet = new ColumnSet(new[] {"latest_maintenance", "maintenance_interval"})
                                    };

var crmReponse = (RetrieveMultipleResponse) service.Execute(retrieveRequest); 
```

我如何将“latest_maintenance”和“maintenance_interval”加入“next_maintenace”以便能够使用`OrderExpression`？

编辑：我将如何为 Microsoft Dynamics CRM 进行简单的基于字符串的查询？似乎是一种比默认方式更容易、更易懂的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:45:44.837

如果您将 SDK 用于服务器端代码，那么您的选择是`QueryExpression`或`FetchXml`。两者都不会按照您的要求进行，本机。

请记住，`QueryExpression`您返回的是类型化对象，而不仅仅是字符串，因此如果要连接两个值，它们需要一个存储容器，即一个属性。

你不能只“排序”第 1 列然后第 2 列吗？IE

```
var myQueryExpression = new QueryExpression
                                {
                                    EntityName = "server",
                                    ColumnSet = new ColumnSet(new[]{
                                        "latest_maintenance", 
                                        "maintenance_interval"})
                                };
myQueryExpression.AddOrder("latest_maintenance", OrderType.Ascending);
myQueryExpression.AddOrder("maintenance_interval", OrderType.Ascending); 
```

# r - 以给定格式转换数据帧

> ID：11049460
> 
> 赞同：2
> 
> 时间：2012-06-15T11:04:17.107
> 
> 标签：r

给定的数据框值为

```
 Group          year       Value
     A              2010       17
     A              2011       18
     F              2010        8
     F              2011        9 
```

我想把它转换成

```
 Year      A      F  
          2010     17      8
          2011     18      9 
```

有没有简单的解决方案来解决这个问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T11:13:51.357

```
library('reshape2')

df <- read.table(text="     Group          year       Value
     A              2010       17
     A              2011       18
     F              2010        8
     F              2011        9", header = TRUE)

dfc <- dcast(df, year ~ Group ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T12:43:20.233

尽管语法可能令人困惑，但我仍然发现 base R 中的 reshape 很有用。使用 gauden 提供的 df

```
reshape_df <- reshape(df,dir="wide",idvar="year",timevar="Group")
colnames(reshape_df) <- c("year","A","F") 
```

将数据从“长”格式转换为“宽”。通常，时间变量成为列名，但在这种情况下，我们寻找“A”和“F”。因此，语法要求 timevar 为“组”。

# php - 如何在 Mysql 中进行此 CONCAT 比较？

> ID：11049466
> 
> 赞同：0
> 
> 时间：2012-06-15T11:04:52.577
> 
> 标签：php, mysql

我有一个自动完成搜索字段，用户可以使用它来查找不同的价目表。

我要在数据库中比较的字段是：* 品牌名称（字符串）* 型号年份（字符串）* 车辆类型（整数）

车辆类型为 0、1 或 2。即（大篷车、移动房车、拖车）

所以用户可能会搜索：“Adria 560 2005 Caravan”

我的第一个想法是做一个 CONCAT LIKE 比较。WHERE CONCAT(brand,modelyear,type) LIKE '%Adria 560 2005 Caravan%'

但问题是车辆类型是整数，因此它将“大篷车”与 0、1、2 进行比较。

我可以以某种方式将 int 转换为我比较的字符串吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:12:30.253

在搜索之前，使用 PHP str_replace() 或 preg_replace() 函数预处理搜索字符串。如果您决定这样做，这将使您将来能够以简单的方式支持多种语言。理想情况下，您应该分离 WHERE 条件，以便数据库系统可以根据需要优化查询：

```
WHERE type=0 AND CONCAT(brand,modelyear) LIKE '%Adria 560 200[4-6]%' 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:14:11.007

如果车辆类型的表名称是车辆类型，则查询将类似于以下内容：

```
SELECT * 
FROM vehicle v
INNER JOIN vehicleType vt on vt.vehicle_type_id = v.vehicle_type
WHERE concat_ws(v.brandName,v.modelYear,vt.vehicle_type) LIKE "%whatever%" 
```

# socket.io - Socket.IO 中的 io.connect() 方法是否有回调？

> ID：11049473
> 
> 赞同：14
> 
> 时间：2012-06-15T11:05:04.897
> 
> 标签：socket.io

`io.connect()`客户端的方法有回调吗？我想打印一些关于连接失败的文本，否则正常进行站点的套接字交互。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T11:23:13.830

当然，请查看 Socket.IO-client 的文档以及其中的示例：

[https://github.com/LearnBoost/socket.io-client#sockets-for-the-rest-of-us](https://github.com/LearnBoost/socket.io-client#sockets-for-the-rest-of-us)

```
socket.on('connect', function () {
  // socket connected
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-09T08:36:13.860

在当前版本的 socket.io (1.3.x) 中，您可以使用`connect_error`事件或`reconnect_failed`事件：

```
var socket = io(serverUrl);
socket.on('connect_error', function() {
    console.log('Connection failed');
});
socket.on('reconnect_failed', function() {
    console.log('Reconnection failed');
}); 
```

见：[https ://github.com/Automattic/socket.io-client#events](https://github.com/Automattic/socket.io-client#events)

# drupal - 链接继续指向实时服务器 - Drupal Live 到 localhost

> ID：11049475
> 
> 赞同：2
> 
> 时间：2012-06-15T11:05:07.153
> 
> 标签：drupal, testing, localhost, relative-path

我继承了一个 Drupal 6 站点来维护。

我是 Drupal 的新手，所以在我去的时候有一个学习的元素。

尝试在本地计算机上设置测试站点后，我遇到了一个奇怪的问题。

我在本地站点上的所有链接都继续指向实时服务器。因此，所有菜单、登录按钮等都指向实时站点。

我已采取的步骤：

*   检查 settings.php 以确保 $base_url 设置为“http://localhost:456”
*   检查 settings.php 以确保 MySQL 设置正确
*   获取整个本地数据库的 SQL 转储并搜索对实时站点 URL 的任何引用
*   从数据库中删除所有本地缓存​​数据
*   检查各种块以确保链接没有硬编码
*   禁用语言支持，因为它确实为每种语言使用单独的 URL

我完全不知道从这里去哪里。

我可以通过替换地址栏中的 URL 以指向本地站点来在本地浏览站点，我什至设法更改了本地主题，这样我就可以看到我所在的站点版本。我可以这样做的事实意味着数据库设置正确。

完全不知道从这里去哪里。有接盘侠吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:12:19.430

问题是在“变量”表中有一个条目，其中包含指向实时站点的默认语言的 URL。有一个“语言”表，其中包含每种语言的 URL，例如 eng.example.com 用于英语，ru.example.com 用于俄语。我已将此处的 url 更改为指向本地服务器，但似乎变量表中还有一个条目需要更改。

如果有人遇到这个问题并想要更改它，您需要更改条目的元数据以及 S22 表示 22 个字符的字符串，您需要将其更改为您正在输入的字符串的长度，youll当您查看表格时，请明白我的意思！此外，您需要在进行任何更改后清除缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T11:13:40.213

在您的本地服务器中，转到您的站点目录->站点->默认并打开您的 settings.php 文件查找基本 url 并将该行注释掉，它应该在第 144 行附近

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T18:07:34.170

剩下的唯一一件事是您需要在完整的代码库中搜索实时站点 url。查看是否有任何模块正在使用代码更改基本 url。虽然我不确定如何使用代码来完成。

但是，您可以编辑主机文件并添加一个条目，而不是替换 url

```
127.0.0.1    livesite.com 
```

如果您使用的是 Linux，文件的位置是`/etc/hosts`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-30T23:00:32.827

我有这个问题。我将整个站点从远程服务器移到本地服务器上工作，但是每当我加载站点时，它就会转到实时站点。我相信问题出在 .htpaccess 文件上。我更新了所有核心 Drupal 文件，但由于 .htpaccess 文件被隐藏，我没有注意到它仍然存在。

请注意，即使在我删除它之后，直到我在本地服务器上打开另一个站点然后返回路径才能正常工作。

# javascript - 将对象列表从控制器传递到MVC4中的视图

> ID：11049476
> 
> 赞同：0
> 
> 时间：2012-06-15T11:05:12.700
> 
> 标签：javascript, razor, asp.net-mvc-4

我是 ASP/MVC 的新手，作为其中的一部分，我开始使用一个简单的应用程序进行学习。

我在控制器中有一组对象，如下所示

```
 public ActionResult loadimage(String FQDN, String trange)
        {
            List<geo_crd> Geo_crd = new List<geo_crd>();

              //more logic

foreach (ToDoItem T in query1)
            {

                IEnumerable<GeoItem> query2 = (from b in db1.GeoItems
                                               where b.DNS_server_address == T.DNS_server_address
                                               select b);
                foreach (GeoItem X in query2)
                {

                    Geo_crd.Add(new geo_crd(X.DNS_latitude, X.DNS_longitude, 1));
                }

            }

            return View(Geo_crd);
        } 
```

Geo_crd 在模型中如下

```
namespace ToDoApp.Models
{
        public class geo_crd 
    {

        private Decimal _geo_lat;
        private Decimal _geo_long;
        private int _status_flag;

        public geo_crd(Decimal x, Decimal y, int z)
        {
            _geo_lat = x;
            _geo_long = y;
            _status_flag = z;
        }

        public Decimal geo_lat
        {
            get { return _geo_lat; }
            set { _geo_lat = value; }
        }

        public Decimal geo_long
        {
            get { return _geo_long; }
            set { _geo_long = value; }
        }

        public int status_flag
        {
            get { return _status_flag; }
            set { _status_flag = value; }
        }

    }
} 
```

我收到的意见如下

```
@model IEnumerable <ToDoApp.Models.geo_crd>
// more code here 
<script type="text/javascript"> 

    @foreach (var item in Model){ 
            <spam><li> @item.geo_lat </li></spam>
            <span> <li> AddLocationPin(@item.geo_lat, @item.geo_long, null, 'place 1');</li> </span> 
           } 

  </script> 
```

我遇到的问题是，服务器没有发送 AddlocatioPin ，我猜它只是忽略了它。

我在做一些非常愚蠢的事情吗？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:12:56.683

你不应该用`script`. 开始和结束标签，它们的顺序也必须在 html 中匹配。您还应该阅读有关[HTML ul 标签的更多信息](http://www.w3schools.com/tags/tag_ul.asp)

正确的观点是

```
@model IEnumerable <ToDoApp.Models.geo_crd>
//more code here 
<ul>
   @foreach (var item in Model)
   { 
       <li><span>@item.geo_lat </span></li>
       <li><span>AddLocationPin(@item.geo_lat, @item.geo_long, null, 'place 1'); </span> </li>
   } 
</ul> 
```

# python - 尝试 JSON 序列化自定义 Django 模型字段时出现 TypeError

> ID：11049477
> 
> 赞同：0
> 
> 时间：2012-06-15T11:05:16.207
> 
> 标签：python, django, json, django-serializer, django-custom-field

我已经编写了一个自定义 Django 模型字段来存储`dateutil.relativedelta`'s. 该字段如下所示：

```
class RelativeDeltaField(models.CharField):
    description = "Relative delta"

    __metaclass__ = models.SubfieldBase

    max_length = 200

    def __init__(self, *args, **kwargs):
        kwargs['max_length'] = self.max_length
        super(RelativeDeltaField, self).__init__(*args, **kwargs)

    def to_python(self, value):
        if isinstance(value, relativedelta):
            return value

        try:
            return eval(value)
        except SyntaxError, e:
            logging.error("Mangled data for a relativedelta field. Was the data truncated in MySQL column? Either manually fix, or change the next line to 'return None' and manually fix. value=%r message=%r" % (value, e))
            raise

    def get_db_prep_save(self, value, connection):

        return repr(value)

    def value_to_string(self, obj):
        value = self._get_val_from_obj(obj)
        return self.get_prep_value(value) 
```

我正在尝试将具有此字段的对象序列化为 json：

```
serializers.serialize('json', obj) 
```

但我收到一个错误：

```
…
  File "/home/rory/tix/virtualenv/lib/python2.6/site-packages/django/core/serializers/json.py", line 58, in default
    return super(DjangoJSONEncoder, self).default(o)
  File "/usr/lib/python2.6/dist-packages/simplejson/encoder.py", line 190, in default
    raise TypeError(repr(o) + " is not JSON serializable")
TypeError: relativedelta(hours=+1) is not JSON serializable 
```

通过使用`pdb`，我可以看到`o`在这种情况下是对象本身，它没有被转换为任何东西，也没有被序列化。

我该如何解决这个问题，以便我可以序列化我的字段？

Django 文档说（[https://docs.djangoproject.com/en/dev/howto/custom-model-fields/#converting-field-data-for-serialization](https://docs.djangoproject.com/en/dev/howto/custom-model-fields/#converting-field-data-for-serialization)）添加 a `value_to_string`，我确实有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:54:14.417

文档中的代码只是一个样板文件，您需要实现`value_to_string`以返回一个表示`relativedelta`.

`RelativeDeltaField`是基于的，`models.CharField`因此`get_prep_value()`看起来像

```
def get_prep_value(self, value):
    return self.to_python(value) 
```

没关系，`CharField`因为该字段在 Python 中的预期值已经是一个字符串。但是，您的自定义版本`to_python()`返回`relativedelta`而不是字符串。

# .net - 如何处理必须声明标量变量异常

> ID：11049478
> 
> 赞同：0
> 
> 时间：2012-06-15T11:05:17.987
> 
> 标签：.net, exception-handling

当我运行程序时.exception“必须声明标量变量@password12”
通过.even我使用断点来检查这个参数变量的值。它是正确的
。但我不知道问题出在哪里？？？

```
 code:
         public DataSet showoption1(seter set)
            {

                string sql = "SELECT   menue.menuename,roleid, [right].rightname,
      role.rolename, employee.employeename, employee.password FROM  [right] INNER JOIN 
      permission ON [right].rightid = permission.rightid INNER JOIN  role ON    
     permission.roleid = role.roleid INNER JOIN emp_men INNER JOIN employee ON 

    emp_men.employeeid = employee.employeeid ON role.roleid = employee.roleid INNER JOIN
    menue ON emp_men.menueid = menue.menueid where employee.employeenamee=@username AND    
   employee.password=@password12 ";

                SqlCommand cmd = new SqlCommand(sql, con);
                cmd.Parameters.AddWithValue("@username",set.Username);
                cmd.Parameters.AddWithValue("@pasword12",set.Password);
                SqlDataAdapter adptr = new SqlDataAdapter(cmd);

                DataSet ds = new DataSet();
                adptr.Fill(ds);
               int id=  Convert.ToInt32( ds.Tables[2].Rows[0]["rooleid"]);

          st.Username=  Convert.ToString(ds.Tables[2].Rows[id]["roolename"]);

                adptr.Dispose();

                return ds;

            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T11:07:07.007

错字：

```
cmd.Parameters.AddWithValue("@pasword12",set.Password); 
```

应该

```
cmd.Parameters.AddWithValue("@password12",set.Password); 
```

下一项工作：去用哈希替换密码，按帐户加盐。不完全是。存储实际密码是一个非常糟糕的主意。

# iphone - 如何将屏幕导航到横向？

> ID：11049481
> 
> 赞同：3
> 
> 时间：2012-06-15T11:05:23.077
> 
> 标签：iphone

我正在制作一个基于视图的应用程序。对于其中一个 xib 文件，我希望它仅以横向模式出现。当我单击第一页中的按钮时，它应该自动旋转到横向并导航到应该是横向的新屏幕。

我该怎么做呢 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:16:59.227

如果您正在使用，`UINavigationController`那么您将无法从纵向导航到横向，您将需要以模态方式展示您的新视图控制器，而不是推送它检查此答案[强制 UIViewController 仅在横向模式下显示](https://stackoverflow.com/questions/5339662/force-uiviewcontroller-to-only-show-in-landscape-mode)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:13:21.740

在应该处于横向的视图中，添加以下内容：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft ||  interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

# javascript - 如何强制淘汰赛重新绑定自定义绑定？

> ID：11049485
> 
> 赞同：3
> 
> 时间：2012-06-15T11:05:46.037
> 
> 标签：javascript, knockout.js

我想知道如何强制淘汰绑定来刷新它的值。通常我们使用一个 observable，这样当 observable 改变时绑定可以自动发生。但就我而言，我创建了一个自定义绑定：

```
if (!ko.bindingHandlers.asyncHtml) {
ko.bindingHandlers.asyncHtml = {
    init: function (element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        var parameters = value.params.concat([function (data) {
            $(element).html(data);
        } ]);

        parameters.concat([function (data) {
            $(element).html('Unable to retrieve html.');
        } ]);
        value.source.apply(null, parameters);
    }
}
} 
```

这样一来，执行异步 JSON 调用的函数可以在调用完成后更新相应的元素（使用返回的 HTML）。元素，在本例中为 DIV，如下所示：

```
<div id="myDiv" data-bind="asyncHtml: {source: getHtml, params: [myId()]}"> 
```

我的问题是，此页面上的另一个功能可以更改需要更新*myDiv*的数据库值。我可能可以找到一种复杂的方法来纠正这个问题，但我想知道是否有一种更简单的方法可以强制重新应用绑定？

注意：getHtml 是我的视图模型上的一个函数，它执行 JSON 调用来检索 HTML。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T09:25:36.157

我希望我能正确理解您要完成的工作，但我不确定，所以让我解释一下我是如何理解您的目标的。

1.  您有一个 div (#myDiv)，它将从服务器检索它的初始 HTML。
2.  你有一个 ajax 函数 (getHtml) 来检索这个 html 和 onSuccess 更新#myDiv，可能是这样的：

    $('#myDiv').html(serverResponseHTMLContent);

3.  然后，您有另一个函数可能会生成不同的 HTML，它应该代替服务器生成的 html。

如果这一切都正确，那么我建议您使用淘汰赛的 html 绑定。

你的 div 看起来像这样。

```
<div id="myDiv" data-bind="html: myDivInnerHtml"> 
```

myDivInnerHtml 将成为您的 viewModel 的一部分，并且应该像您通常所说的那样是可观察的。在初始绑定之前，调用 getHtml 并让它设置 myDivInnerHtml 的值，而不是实际设置 myDiv 的 html。

```
myDivInnerHtml = ko.observable(serverHtmlString); 
```

然后当您应用绑定时，myDiv 的内部 Html 将通过敲除设置。要更新 html，您的客户端函数可以更改 myDivInnerHtml 的值。

```
myDivInnerHtml(clientSideFunctionHtmlString); 
```

如果我的假设是错误的，并且您重新创建了具有不同值的相同 html，那么您应该尽可能使用模板，并且服务器不应该发送 html，而是发送要绑定到 html 的值。

Also, if the client side function is not creating html, but instead values to be bound to the html, then this will also not work.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T12:09:40.080

您可以查看`valueHasMutated()`通知订阅者他们应该重新评估 observable 的函数。

请参阅[如何强制视图刷新而不使其从可观察对象自动触发？](https://stackoverflow.com/questions/8537397/knockout-js-how-to-force-view-refresh-instead-of-using-ko-observable)更多解释。

# javascript - Jquery 将 java 脚本内容加载到 div 中

> ID：11049488
> 
> 赞同：1
> 
> 时间：2012-06-15T11:05:56.353
> 
> 标签：javascript, jquery

我有以下代码：

```
var refreshId = setInterval(function()
{
    $("#footad").html('myjshere');
}, 15500); 
```

它说 myjshere 我想将此内容加载到 div 中：

```
 <script type='text/javascript'>
      AdServer.placeAd({"sz":"728x90","pos":1});
    </script> 
```

但是当我尝试将它放在 myjshere 所在的位置时，它会抛出语法错误吗？

有什么帮助吗？

* * *

为了消除混淆，我将 JavaScript 放在了 myjshere 所在的位置，我只是使用 myjshere 这个词作为占位符来向您展示我在做什么。对困惑感到抱歉。问题是，当我将 javascript 放在 jQuery 中时，它不起作用并返回错误：语法无效。

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:08:49.160

您的脚本正在做的是将 'myjshere' 放入 id 为 'footad' 的元素中。

这就是你想要达到的目标吗？

如果我理解正确，你想要什么，那么这就是代码：

```
var refreshId = setInterval(function()
{
    $("#myjshere").html("<script type='text/javascript'>     AdServer.placeAd({'sz':'728x90','pos':1});</script>");
}, 15500); 
```

否则，如果您想替换 myshere

```
var refreshId = setInterval(function()
{
    $("#footad").replace("myjshere","<script type='text/javascript'>     AdServer.placeAd({'sz':'728x90','pos':1});</script>");
}, 15500); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T11:10:38.137

我假设`AdServer.placeAd`是您要实现的第三方功能。因此，这取决于该函数的输出是什么。如果`Adserver.placeAd`返回 HTML 字符串，您可以执行以下操作：

```
<script type='text/javascript'>
var refreshId = setInterval(function()
{
   $("#footad").html(AdServer.placeAd({"sz":"728x90","pos":1}));
}, 15500);
</script> 
```

我的猜测是，这段代码`document.write()`在函数内部运行，被称为被调用`placeAd`。因此，您可以将代码添加到您希望它看起来像的 HTML 文档部分：

```
<script type='text/javascript'>
setInterval(function()
{
   AdServer.placeAd({"sz":"728x90","pos":1});
}, 15500);
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T11:09:03.367

我最好不要问你为什么要这样做......

```
$('#footad').html('<script type="text/javascript">
AdServer.placeAd({"sz":"728x90","pos":1});
</script>'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T11:13:34.163

你想把js看成纯文本吗？你可以用它来加载它：

```
var js = AdServer.placeAd({"sz":"728x90","pos":1});
$("footad").html(js); 
```

但是js函数placeAd会返回html吗？如果不是，您必须为 AdServe 类指定一个目标。像 Adserver.target("#footad");

如果这一切都不是您所需要的，您必须提供更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T11:15:50.240

你需要这样做

```
<script type='text/javascript'>

     var myjshere = AdServer.placeAd({"sz":"728x90","pos":1});
     $(document).ready(function(){
        setInterval(function()  {
             $("#footad").html(myjshere);
          }, 15500);
     });

</script> 
```

# java - 根据参数从mysql数据库中检索特定值

> ID：11049491
> 
> 赞同：-3
> 
> 时间：2012-06-15T11:06:01.947
> 
> 标签：java, mysql, database

我想从他们输入到文本字段中的用户名和密码中检索用户名。我想将这些值作为参数传递给方法，然后该方法将识别用户名以进行打印。请帮忙。像这样的东西......

```
 public void getUser(String username, String password)throws SQLException{
 String qry = "SELECT UserName From USER....";

   Connection con = null;
   PreparedStatement stmt = null;

   try{

con = DriverManager.getConnection("URL");
stmt = con.prepareStatement(qry);
stmt.executeUpdate(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:15:52.737

如果不是更新或插入，请不要使用 executeUpdate()

您必须使用 executeQuery()。

尝试这个：

```
Connection con = null;
PreparedStatement stmt = null;
ResultSet rs = null;
String qry = "SELECT UserName From USER where username=? and password=?";
   try{

         con = DriverManager.getConnection("URL");
         stmt = con.prepareStatement(qry);
         stmt.setString(1, username);
         stmt.setString(2, password);
         rs =  stmt.executeQuery();
         while (rs.next()) {
               System.out.println(rs.getString("UserName"));
         }
        ... 
```

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:16:02.147

假设您想从 db 获取用户的全名，并且您的表结构是这样的：

`fullname | username | password`

您可以执行以下操作：

```
Connection c = null;
PreparedStatement s = null;
try {
  c = DriverManager.getConnection("URL");
  s = c.prepareStatement("SELECT fullname FROM user WHERE username=? and password=?");
  s.setString(1, username);
  s.setString(2, password);

  ResultSet rs = s.executeQuery();
  if(rs.next()) 
    return rs.getString("fullname");

  return null; // no user found!
} catch(SQLException e) {
  System.err.println(e.getMessage());
} finally {
   // close s and c
} 
```

注意：这假定传递给方法的密码与存储在 db 中的“形式”相同（即纯文本或散列（+salted））

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-02T23:34:31.693

试试这个非常简单的例子

```
 private boolean validate_login(String id,String password) {

try{           
   Class.forName("org.sqlite.JDBC");  // MySQL database connection
   Connection conn = DriverManager.getConnection("jdbc:sqlite:studentdb.sqlite");     
   PreparedStatement pst = conn.prepareStatement("Select * from student_table where id=? and password=?");
   pst.setString(1, id); 
   pst.setString(2, password);
   ResultSet rs = pst.executeQuery();                        
   if(rs.next())            
       return true;    
   else
       return false;

try{           
   Class.forName("org.sqlite.JDBC");  // MySQL database connection
   Connection conn = DriverManager.getConnection("jdbc:sqlite:studentdb.sqlite");     
   PreparedStatement pst = conn.prepareStatement("Select * from student_table where id=? and password=?");
   pst.setString(1, id); 
   pst.setString(2, password);
   ResultSet rs = pst.executeQuery();                        
   if(rs.next())            
       return true;    
   else
       return false;  
  }
  catch(Exception e){
   e.printStackTrace();
   return false;
  }       
 } 
```

# c++ - 无法将参数 1 从 'Class *' 转换为 'double []'

> ID：11049493
> 
> 赞同：1
> 
> 时间：2012-06-15T11:06:09.313
> 
> 标签：c++

好吧，这是我在这里得到但无法编译的 C++ 代码

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

const int n = 900;
class City{
string name;
double area;
int count, roads;

public:
City() {}
City(string a, double b, int c, int d ) { a=name; b=area; c=count; d=roads;}
string getname() {return name;}
double getarea() {return area;}
int getcount() {return count;}
int getroads() {return roads;}
friend ostream& operator << (ostream& , City& );
friend istream& operator >> (istream& , City& );

};

ostream& operator << (ostream& out, City& a) {
out<<"name "<<a.name<<", area "<<a.area<<", count "<<a.count<< ", roads   "<<a.roads<<endl;
return out; 
 }
istream& operator >> (istream& in, City& a) {
in>>a.name>>a.area>>a.count>>a.roads;
return in;
   }
void fill(int arr[], int size){
ifstream ifs("cities.txt.");
for (int i=0;i<size;i++) 
    ifs>>arr[i];
  }

 void func(City* arr){
ofstream ofs("density.out");
for(int i=0;i<n;i++){
    if(arr[i].getcount()/arr[i].getarea()>1000)
        ofs<<arr[i];
}
  }

  int main(){
City* hm;
hm = new City[n];
fill(hm, n);
func(hm);
system ("pause");
return 0;
 } 
```

这是我在编译时遇到的错误：

> 错误 C2664：“填充”：无法将参数 1 从“城市 *”转换为“int []”

不知何故，我看到了，它说 Class 'City *" 和 int[] 数组有问题，但无法弄清楚。我用 double 但相同的概率更改了 'int'。这是问题，否则看起来很简单文件中的数组填充函数。知道它有什么问题吗？

那么，怎么会

> void fill(City& arr, int size) 的身体想要什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:09:10.553

`void fill(int arr[], int size)`意味着您需要传递 to 的`int`数组`fill`。但是，您正在向它传递一个 的实例`City`，特别`hm`是在您的 main.xml 中。

我假设您正在尝试从中读取`City`描述列表`cities.txt`（因此具有适当的流提取/插入运算符）。更改签名`fill`以接受指向`City`对象的指针，以便您可以填写对象数组`City`而不是`int`s。

```
void fill(City *arr, int size); 
```

确保您`fill`在 main 中传递的参数是正确分配`City`的大小对象数组，至少`sz`在哪里`sz`是您作为第二个参数传入的对象。请记住调用`delete []`以释放您创建的这个数组。

一种更惯用的方法是使用`vector<City>`，这样您就不必担心内存管理问题。您修改后的`fill`签名将是：

```
void fill(std::vector<City>& c); // note we no longer need the second argument 
```

您需`#include <vector>`要这样做才能使用`vector<City>`。

最后，要利用 RVO，只需`vector<City>`按值返回，而不是将其作为参数传入。所以，你会做这样的事情：

```
std::vector<City> fill(); // cleaner, faster 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:09:24.560

`void fill(int arr[], int size)`需要一个`int`数组。您正在尝试将其传递给`City`数组。

您可以编写一个新函数，`void fill(City& arr, int size)`也可以考虑编写一个模板函数`template<class T> void fill(T* arr, size)`，等等。

还可以考虑使用`std::vector`or`std::array`代替裸数组。边界检查和内存管理将变得更加容易。

这里有几个`fill`例子：

```
// keep reading til we run out of cities in the file
void fill_vector(vector<City>& cities)
{
    ifstream ifs("cities.txt."); 
    City city;

    while (!ifs.fail() && !ifs.bad())
    {
        ifs >> city;
        cities.push_back(city);
    }
}

// only read 'n' cities
void fill_array(array<City, 5>& cities, size_t count)
{
    ifstream ifs("cities.txt."); 
    for (size_t i = 0; i < count; i++)
        ifs >> cities[i];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T11:13:08.430

你用错了`fill`。您想要的功能是`<algorithm>`:中的模板版本`void fill (ForwardIterator first, ForwardIterator last, const T& value);`（请参见[此处](http://www.cplusplus.com/reference/algorithm/fill/)）。

因此，为了使用默认`City`对象初始化每个元素，您的调用将变为：

```
std::fill(hm, &(hm[n]), City()); 
```

或（更具可读性并显示意图）：

```
std::fill(&(hm[0]), &(hm[n]), City()); 
```

**编辑：**我现在看到我误解了你的问题，并且你想`hm`用存储的对象填充你的数组。

正如其他答案中所建议的，将`fill`函数的签名更改为`fill (City * const arr, size_t const n)`应该可以解决该问题。

# javascript - 为什么这个函数返回 Nan 错误？

> ID：11049504
> 
> 赞同：0
> 
> 时间：2012-06-15T11:06:35.317
> 
> 标签：javascript

当我单击“+ 1”时，则在“0”中出现“NaN”。为什么 ？

HTML：

```
<table>
<tr><td id="run">0</td></tr>
</table>
<a href="#" onclick="plus();">+ 1 </a> 
```

JS：

```
function plus(){
document.getElementById("run").innerHTML = ( document.getElementById("run").value + 1 );
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T11:08:02.993

发生这种情况是因为`value`属性只能应用于`input`or`select`元素。

请注意，您需要将字符串值转换为数字，否则您将获得字符串连接。可以用[`parseInt`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)or[`parseFloat`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseFloat)函数来完成。

```
var val = parseInt(document.getElementById("run").innerHTML, 10);
document.getElementById("run").innerHTML = ( val + 1 ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T11:08:52.770

那是因为：

```
document.getElementById("run").value 
```

将是`undefined`和`undefined + 1 == NaN`。

输入框有一个属性，但是像have或之类的`value`节点。`<td />``.innerHTML()``.innerText()`

另外，请注意`'0' + 1 == '01'`，因此您还必须进行一些转换：

```
parseInt(document.getElementById('run').innerHTML, 10) + 1; 
```

额外的基数 - 10 - 是转换可能被解释为八进制数的字符串所必需的:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T11:23:39.043

我想这个问题仍然值得一个更好的答案，但我可能错了。)

让我们检查一下您的`plus`函数中发生了什么。首先，您通过其 id 获得一个元素，其中

```
var targetElement = document.getElementById('run'); 
```

它实际上是对[DOMElement](https://developer.mozilla.org/en/DOM/element)类型的对象的引用。通过检查其 nodeType 属性很容易看到。

```
if (targetElement.nodeType === 1) { alert("It's an element!"); } 
```

DOM 元素有很多不错的属性，但它们`nodeValue`总是*等于 null*。因此，如果您想使用其文本内容，您可以查找子 textNodes - 或仅使用`innerHTML`属性。这是一个字符串，是的，但是如果它是数字，Javascript 会设法将它转换为普通数字（据我记得 0 是数字：）。

所以你的`plus`函数实际上可以这样写（[证明](http://jsfiddle.net/s4KNe/)）：

```
document.getElementById('run').innerHTML++; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T11:08:47.697

尝试这个

```
function plus(){
document.getElementById("run").innerHTML = parseInt( document.getElementById("run").value) + 1;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T11:09:45.303

因为属性值始终是字符串，而 string + 1 在 JavaScript 中是 NaN。

要解决此问题，请使用`string.toFloat()`：

```
function plus(){
    document.getElementById("run").innerHTML = ( document.getElementById("run").value.toFloat() + 1 );
} 
```

或使用[`parseInt()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)：

```
function plus(){
    document.getElementById("run").innerHTML = ( parseInt(document.getElementById("run").value) + 1 );
} 
```

或者使用该[`~~()`](http://james.padolsey.com/javascript/double-bitwise-not/)函数作为技巧，但这会导致源代码不可读。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-15T11:29:56.230

因为`value`是[HTMLInputElement](https://developer.mozilla.org/en/DOM/HTMLInputElement)的属性并且`TD`元素不是 an`HTMLInputElement`而是 a `HTMLTableCellElement`，所以没有该属性并且：

```
undefined + 1; // NaN - Not a Number 
```

您基本上可以`innerHTML`使用与设置内容相同的属性来获取它：

```
function plus() {
    // no need to execute `getElementById` twice
    var td = document.getElementById("run");

    td.innerHTML = +td.innerHTML + 1;
} 
```

为了转换 Number 中的值，我使用了[一元加运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Arithmetic_Operators#.2B_%28Unary_Plus%29)。您还可以检查它是否`NaN`在使用之前，例如：

```
function plus() {
    var td = document.getElementById("run");
    var value = +td.innerHTML || 0;

    td.innerHTML = value + 1;
} 
```

在这种情况下，如果它是`NaN`（或 0，但在这种情况下它是一个身份）将设置为 0，并且计数将从`1`没有给出任何错误开始。

此外，我想说在支持的情况下使用[textContent](https://developer.mozilla.org/en/DOM/Node.textContent)属性可能会更好，但是处理所有浏览器的代码会有点复杂（例如，在某些 IE 版本中你需要使用它`innerText`），并且`innerHTML`在大多数情况下可能会很好的案例。

# python - python selenium 多个测试用例

> ID：11049505
> 
> 赞同：5
> 
> 时间：2012-06-15T11:06:40.643
> 
> 标签：python, firefox, testing, selenium

我在python中有以下代码

```
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import Select
from selenium.common.exceptions import NoSuchElementException
from unittestzero import Assert
from selenium.webdriver.support.ui import WebDriverWait
from selenium.common.exceptions import ElementNotVisibleException
import unittest, time, re

class HomePageTest(unittest.TestCase):
    expected_title="  some title here "
    def setUp(self):
        self.driver = webdriver.Firefox()
        self.driver.implicitly_wait(30)
        self.base_url = "https://somewebsite.com"
        self.verificationErrors = []

    def test_home_page(self):
        driver=self.driver
        driver.get(self.base_url)
        print "test some things here"

    def test_whatever(self):
        print "test some more things here"

    def tearDown(self):
        self.driver.quit()

if __name__ == "__main__":
    unittest.main() 
```

我的问题是在函数 test_home_page 之后，firefox 实例关闭并为下一个 test_whatever 函数再次打开。我该怎么做才能让所有测试用例都从同一个 firefox 实例中执行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T13:04:26.087

通常，您希望浏览器在测试之间关闭，以便使用干净的缓存、localStorage、历史数据库等开始每个测试。在测试之间关闭浏览器确实会减慢测试速度，但它可以节省调试时间，因为测试不会与浏览器缓存和先前测试的历史记录进行交互。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T13:00:59.813

初始化 Firefox 驱动程序`__init__`：

```
class HomePageTest(unittest.TestCase):
    def __init__(self):
        self.driver = webdriver.Firefox()
        self.driver.implicitly_wait(30)
        self.base_url = "https://somewebsite.com"
        self.verificationErrors = []

    ...

    def tearDown(self):
        self.driver.quit() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-13T07:57:22.153

使用`setUpClass`和`tearDownClass`

```
class HomePageTest(unittest.TestCase):

    @classmethod
    def setUpClass(cls):
        cls.driver = webdriver.Firefox()

    def setUp(self):
        self.base_url = "https://somewebsite.com"
        self.verificationErrors = []

    def tearDown(self):
        self.driver.get(self.base_url)

    @classmethod
    def tearDownClass(cls):
        cls.driver.quit()

if __name__ == "__main__":
    unittest.main() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T02:47:46.840

```
def suite():  

    suite = unittest.TestSuite()  
    suite.addTest(HomePageTest("test_home_page"))  
    suite.addTest(HomePageTest("test_whatever"))  
    return suite  

if __name__ == "__main__":

    unittest.TextTestRunner().run(suite()) 
```

使用同一个 Firefox 实例运行多个测试用例。顺便说一句，我有一个问题希望有人能知道并回答我。我如何在不同的浏览器中执行相同的测试用例？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T05:59:51.017

我认为 WebDriver Plus 可以解决您的问题。这里是。[http://webdriverplus.org/en/latest/browsers.html](http://webdriverplus.org/en/latest/browsers.html) 您可以使用这个在所有单元测试中重用相同的浏览器实例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-08T13:31:31.813

`setUpClass`与装饰器`tearDownClass`一起使用。`@classmethod`

# iphone - 将文本编辑器与 iPad 应用程序集成 - Objective C

> ID：11049508
> 
> 赞同：0
> 
> 时间：2012-06-15T11:06:55.960
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有一个由 OMNI Group 开发的文本编辑器应用程序。我需要将此文本编辑器与我的其他应用程序之一集成。我不知道该怎么做。有人可以向我提供有关我应该如何开始的任何指示。我用谷歌搜索了很多，但找不到太多帮助。谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:24:40.480

**1**：假设您的文本编辑器是浏览器中的在线编辑器，只需实现 a`UIWebView`就可以了。例如，可编辑`<textarea>`的内容在`UIWebView`.

如果您需要使用 javascript 等实现的其他特殊功能，则需要测试它们是否在`UIWebView`.

**2**：但是，如果文本编辑器已经在另一个 iOS 应用程序中工作，只需将用于实现编辑器的类复制到新项目中，并以等效方式使用它们，必要时进行调整。*如果您遵循封装*的编程原则，这应该是轻而易举的事。

# node.js - 如何通过 puttygen.exe 在 Windows 8 中创建 sshkey？

> ID：11049510
> 
> 赞同：-1
> 
> 时间：2012-06-15T11:07:05.157
> 
> 标签：node.js, debugging

“请在配置机器之前添加 SSH 密钥”。

我正在尝试从 windows 中的 puttygen.exe 创建 ssh 密钥。我无法在 Win8 rp 中找到 puttygen.exe。

有人可以帮助我如何在 Windows 中创建 ssh 密钥。我想为[https://no.de/sshkeys](https://no.de/sshkeys)创建它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T12:39:44.750

安装 WinSCP 时，PuTTYgen 会自动安装在客户端 PC 上，也可以从[PuTTY 站点](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)下载。

在客户端 PC 上，从命令行转到`Start | Run`并运行该`C:\Program Files\WinSCP\PuTTYgen\puttygen.exe`程序。

选择`SSH-2 RSA and 4096 bits`。单击生成密钥。

输入适当/描述性的密钥注释，在“密钥密码短语”窗口中输入强密码短语，然后在“确认密码短语”窗口中重新输入密码短语。

好的密码短语长度为**10-30 个字符，不是简单的句子**或其他容易猜到的短语（英语散文每个字符只有 1-2 位熵，并且提供了非常糟糕的密码短语），并且包含大小写字母的混合，数字和非字母数字字符。

> 不要忘记密码。丢失的密码短语无法恢复。

将生成的文本复制到 no.de ssh 密钥控制台。

希望这可以帮助

# ant - 如何将标准错误重定向到 Ant JUnit 目标中的标准输出？

> ID：11049512
> 
> 赞同：3
> 
> 时间：2012-06-15T11:07:19.173
> 
> 标签：ant, junit

我有一个简单的 Ant 构建文件来生成 XML 格式的 JUnit 测试报告（见下文）。这会在 stdout 和 stderr 上生成每个测试方法的输出（如果有）的报告。我希望将两个流的输出合并为每个测试方法的一个。但我不知道该怎么做；如何告诉 JUnit 目标将标准错误重定向到标准输出？

```
<target name="test" depends="compile">
    <junit>
        <classpath refid="classpath.tests"/>
        <formatter type="xml"/>
        <test name="tests.Tests1"/>
        <test name="tests.Tests2"/>
    </junit>
</target> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:13:47.967

```
ant test | grep -w junit 2>&1 
```

替代选项是：使用 q 选项运行 Ant。

```
ant -q test 
```

# java - 如何在 oracle 查询结果而不是 15sep2011_00:00:00 中获取像 2011 年 9 月 15 日这样的日期？

> ID：11049513
> 
> 赞同：0
> 
> 时间：2012-06-15T11:07:29.337
> 
> 标签：java, oracle

我正在执行查询

```
select level as VERSION,
name as DESCRIPTION,code as CODE,created as RELEASEDATE
,SUBSTR(name, INSTR(name, '.',-1)+1) as TYPE
from mytable
where code = 'HX56UO' 
```

这给出了类似的结果

```
Type    Version     Description       Release Date   
.exe    3.0.2   MPC560xB MCAL Autosar 3.x    15sep2011_00:00:00 
```

我需要像 2011 年 9 月 15 日这样的发布日期，我需要在 bean set 方法中设置这个结果值。

```
public void setLastDate(java.util.Calendar newLastPubDate) {

    lastDate = newLastDate;

} 
```

由于设置方法是日历，我需要从结果集中设置上述值的类型转换。我试着像这样设置值

```
if (rs.getDate("RELEASEDATE") != null ) {
Bean.setLastPubDate(rs.getdate"RELEASEDATE"));
} 
```

但它不是日期格式，它的日历如何设置值。请帮我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T11:36:10.953

```
if (rs.getDate("RELEASEDATE") != null ) {
    Calendar calendar = Calendar.getInstance();
    calendar.setTime(rs.getDate("RELEASEDATE"));
    Bean.setLastPubDate(calendar);
} 
```

编辑：当您以后想要将日历转换为字符串（以显示它）时，您可以使用[SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)。

```
String formatted = new SimpleDateFormat("dd MMMM yyyy").format(bean.getLastPubDate().getTime()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T11:36:34.013

As your `created` column is a `VARCHAR2` - very bad practice to not store a date as a `DATE` but we'll skip that for now - you need to convert it to a date type somewhere, and in the query is possibly simplest:

```
select level as VERSION,
    name as DESCRIPTION,
    code as CODE,
    TO_DATE(created,'DDMONYYYY_HH24:MI:SS') as RELEASEDATE,
    SUBSTR(name, INSTR(name, '.',-1)+1) as TYPE
from mytable
where code = 'HX56UO' 
```

You can still use `getDate()` from the resultset, and need to convert that Date to a Calendar object as you call your bean method:

```
Bean.setLastPubDate(Calendar.getInstance().setTime(rs.getDate("RELEASEDATE")); 
```

# php - 如何在mysql查询中随机给出限制

> ID：11049516
> 
> 赞同：1
> 
> 时间：2012-06-15T11:07:43.473
> 
> 标签：php, mysql, limit

我在 mysql 中有一个选择查询。在每次执行此查询时，我需要不同数量的数据，在 10 到 30 个条目之间。

我尝试使用以下代码：

```
'SELECT * FROM user where status='0' LIMIT 10,30' 
```

但它总是给出限制 30 的结果。

我该如何执行它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:10:55.933

`Limit 10,30`表示它将显示从记录号开始的 30 条记录。10.那有什么问题。

如果你想记录从 10 到 30 然后使用`limit 10,20`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T11:26:48.600

如果您想要 10 到 30 个结果并且您正在使用 PHP 构建查询，您可以使用

$sql = "SELECT * FROM user where status='0' LIMIT " . 兰特（10,30）；

这将每次给出相同的结果顺序，但数量不同。如果您真的想要一个随机结果集，您可以使用 MySQL 随机化顺序

$sql = "SELECT * FROM user where status='0' ORDER BY RAND() LIMIT" 。兰特（10,30）；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T11:12:52.120

如果您期望结果限制为 20，也许您想要..

```
'SELECT * FROM user where status='0' LIMIT 10,20' 
```

它本质上是 LIMIT [偏移量，数量]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T11:12:58.187

LIMIT x,y 表示您将从第 10 位获得 30 个结果

`try $limit = rand(10,30)`--> ...`LIMIT '.$limit.'`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T11:14:01.197

`limit 10,30`将为您提供第 10 条记录中的记录，总共有 30 条记录，

因此，如果您想在每个查询中更改它，您可能需要通过`limit parameter`例如

`$from = '2'; $records = '10'; SELECT * FROM user where status='0' LIMIT $from,$records`

# java - Groovy 按引用返回的难题

> ID：11049517
> 
> 赞同：2
> 
> 时间：2012-06-15T11:07:43.613
> 
> 标签：java, groovy, dsl, mop

我正在用 Groovy 编写 DSL 来破解 BASIC 脚本。我正在考虑如何处理 BASIC 数组。

使用 MOP 来处理类似的事情似乎很容易：

```
100 LET X = A(5) 
```

当 A 为 DIMed 时，我将动态声明 A 闭包，并且此 A 闭包将根据其参数返回一个值。但处理起来并不那么简单：

```
110 LET A(5) = Y 
```

因为我不能从 Groovy 引用返回。除了解析 A(5) 是左值还是右值之外，有人能想到解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T17:22:01.330

没有简单的答案，请记住，即使您解决了这个问题，您仍然必须处理 BASIC 条件（例如“IF a = 10 then ...”）。您可能可以通过明智地使用 AST 转换来获得所需的东西，但这可能并不比编写自己的自定义解析器更容易。换句话说，我认为你注定要失败，如果可能的话，应该做一些除了编写 BASIC 脚本之外的事情。

# json - 如何查询 Lotus 视图并将结果格式化为 json？

> ID：11049523
> 
> 赞同：1
> 
> 时间：2012-06-15T11:08:11.133
> 
> 标签：json, lotus-domino

我有一个名为“行走”的视图，我想查询它：

```
http://site/activity.nsf/walking?searchview&query=FIELD%20Gradient%20CONTAINS%20gradienteasy.gif 
```

这会在 HTML 表格中返回结果。我想做的是将结果格式化为 JSON，然后我将在客户端使用它。这可能吗？

我知道您可以通过执行以下操作从直观的视图中返回 JSON：

```
http://site/activity.nsf/walking?readviewentries&outputformat=json 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T17:40:07.947

Scott Good 和我在各种会议上就从传统 Domino 应用程序（不使用 XPages）生成和使用 JSON 进行了几次会议。最新的是我们在 Lotusphere 2011 上提供的“客户端和服务器端代码大师班中的 JMP303 JSON”。演示材料和幻灯片的链接是：[这里](http://www.scottgood.com/jsg/blog.nsf/BlogByMonth?OpenView&RestrictToCategory=02-2011)

/新人

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T12:28:07.963

您必须创建一个标记有“将视图内容视为 HTML”属性的视图，并设置一个列公式来生成所需的 JSON 语法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T13:48:35.680

OpenNTF 上有一篇不错的帖子，其中包含创建非常通用视图的代码，该视图返回与视图选择公式匹配的文档的 JSON：http://openntf.org/XSnippets.nsf/snippet.xsp?id=use- [transform -to-build-json-and-consume-the-output-in-an-xagent](http://openntf.org/XSnippets.nsf/snippet.xsp?id=use-transform-to-build-json-and-consume-the-output-in-an-xagent)

该示例使用“XAgent”（没有 UI 的 Xpage）来设置内容类型标题等。但如果需要，您可以使用 $$ViewTemplate 表单执行相同的操作。

# c# - 子类化 DataTable 在序列化/反序列化期间将 DataType 信息从 Double 更改为 String

> ID：11049524
> 
> 赞同：0
> 
> 时间：2012-06-15T11:08:18.163
> 
> 标签：c#, datatable, iserializable

作为这个问题的背景，我想将“制作的代码”绑定`DataTable`到`aspx:GridView`. 为了持久化这个表，我实现了`ISerializable`接口。该表显示正确，但在对行进行排序的回发中，`InvalidCastExcpetion`由于 row.ItemArray 中的元素从 type 更改为 type `double`，因此引发了 a `string`。

这是课堂。注意：两个构造函数，一个用于初始化DataTable，一个用于在反序列化过程中构建表：

```
 [global::System.Serializable()]
   [global::System.Xml.Serialization.XmlSchemaProviderAttribute("GetTypedTableSchema")]
    public partial class HeatMapVisualisationDataTable : DataTable, System.Runtime.Serialization.ISerializable
    {
        #region members
        public double _valueMin { get; private set; }
        public double _valueMax { get; private set; }
        #endregion membders

        public HeatMapVisualisationDataTable(XemlExperimentHeatMapDataTable data)
            : base("result", "http://gmd.mpimp-golm.mpg.de/HeatMap")
        {
            this.Columns.Add(new DataColumn("metabolite", typeof(Guid)));

            this.Columns.Add(new DataColumn("name", typeof(string)));

            DataColumn[] PrimaryKeyColumns = new DataColumn[1];
            PrimaryKeyColumns[0] = this.Columns["metabolite"];
            this.PrimaryKey = PrimaryKeyColumns;

            SortedDictionary<int, DataColumn> headers = new SortedDictionary<int, DataColumn>();
            foreach (var item in data.AsParallel().AsEnumerable().Select(x => x.ObservationPointId).Distinct().OrderBy(x => x))
            {
                DataColumn dc = this.Columns.Add(item.ToString(), typeof(Double));
                headers.Add(item, dc);
            }

            foreach (var item in data)
            {
                DataRow tmpRow = base.Rows.Find(item.MetaboliteId);
                if (tmpRow == null)
                {
                    tmpRow = base.Rows.Add(new object[] { item.MetaboliteId });
                    tmpRow["name"] = item.MetaboliteName;
                }
                tmpRow[headers[item.ObservationPointId]] = item.value;
            }

            this.AcceptChanges();

            _valueMax = data.AsParallel().AsUnordered().Max(x => x.value);
            _valueMin = data.AsParallel().AsUnordered().Min(x => x.value);
        }

        public HeatMapVisualisationDataTable(System.Runtime.Serialization.SerializationInfo info, System.Runtime.Serialization.StreamingContext ctxt) :
            base(info, ctxt)
        {
            _valueMin = (double)info.GetValue("valueMin", typeof(double));
            _valueMax = (double)info.GetValue("valueMax", typeof(double));
        }

        public override void GetObjectData(System.Runtime.Serialization.SerializationInfo info, System.Runtime.Serialization.StreamingContext ctxt)
        {
            base.GetObjectData(info, ctxt);
            info.AddValue("valueMin", _valueMin);
            info.AddValue("valueMax", _valueMax);
        }
    } 
```

正如我通过阅读`SerializationInfo`构造函数中的架构可以观察到的那样`HeatMapVisualisationDataTable(System.Runtime.Serialization.SerializationInfo info, System.Runtime.Serialization.StreamingContext ctxt)`，该表已正确序列化，并且就序列化的 xml 架构而言，该表是从“存储”正确的。但是，查看此构造函数中构造的基类，序列化之前类型的所有列`double`现在都是类型`string`。我究竟做错了什么？

**更新 1**：我还可以通过将数字数据类型从更改`double`为`float`或来重现此问题`decimal`。类型的主键列`Guid`被反序列化为正确的类型。

**更新 2**`DataTable.ReadXml()` ：在我看来，所描述的行为是对列的 DataTypes 被 String 替换的一些问题的跟进。

谢谢，扬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T09:16:23.963

作为一种通过绕过 DataTable 的序列化为 XML 以及随后使用 XML 从 XML 重新创建 DataTable 的解决方案`ReadXml`，我使用了[这篇关于 ADO.NET 对象的二进制序列化的 MSDN 文章](http://msdn.microsoft.com/en-us/magazine/cc188907.aspx)。诀窍是将有关列名和列类型的信息存储在一些额外的信息中`ArrayList`，并将它们放入序列化中。在这里查看我当前的`ISerializable`接口实现：

```
public HeatMapVisualisationDataTable(System.Runtime.Serialization.SerializationInfo info, System.Runtime.Serialization.StreamingContext ctxt)
    base()
{
    _valueMin = info.GetSingle("valueMin");
    _valueMax = info.GetSingle("valueMax");

    System.Collections.ArrayList colNames = (System.Collections.ArrayList)info.GetValue("colNames", typeof(System.Collections.ArrayList));
    System.Collections.ArrayList colTypes = (System.Collections.ArrayList)info.GetValue("colTypes", typeof(System.Collections.ArrayList));
    System.Collections.ArrayList dataRows = (System.Collections.ArrayList)info.GetValue("dataRows", typeof(System.Collections.ArrayList));

    // Add columns
    for (int i = 0; i < colNames.Count; i++)
    {
        DataColumn col = new DataColumn(colNames[i].ToString(), Type.GetType(colTypes[i].ToString()));
        this.Columns.Add(col);
    }

    // Add rows
    for (int i = 0; i < dataRows.Count; i++)
    {
        DataRow row = this.Rows.Add((object[])dataRows[i]);
    }

    this.AcceptChanges();
}

public override void GetObjectData(System.Runtime.Serialization.SerializationInfo info, System.Runtime.Serialization.StreamingContext ctxt)
{
    System.Collections.ArrayList colNames = new System.Collections.ArrayList();
    System.Collections.ArrayList colTypes = new System.Collections.ArrayList();
    System.Collections.ArrayList dataRows = new System.Collections.ArrayList();

    foreach (DataColumn col in this.Columns)
    {
        colNames.Add(col.ColumnName);
        colTypes.Add(col.DataType.FullName);
    }

    foreach (DataRow row in this.Rows)
    {
        dataRows.Add(row.ItemArray);
    }

    info.AddValue("colNames", colNames);
    info.AddValue("colTypes", colTypes);
    info.AddValue("dataRows", dataRows);
    info.AddValue("valueMin", _valueMin);
    info.AddValue("valueMax", _valueMax);
} 
```

请注意，我不再调用 DataTable`GetObjectData(...)`和构造函数进行反序列化。但是，这不是我原始帖子的答案。这只是一种解决方法......所以问题是“为什么要`ReadXml()`更改 DataTypes？” 仍然开放！

# jquery - 如何让 AwesomeCloud 与 IE8 一起使用

> ID：11049529
> 
> 赞同：-5
> 
> 时间：2012-06-15T11:08:33.100
> 
> 标签：jquery, html

我正在使用[awesomeCloud](http://indyarmy.com/awesomeCloud/)是一个 jQuery 的词云插件。

它使用 HTML Canvas 元素，但是 IE8 不支持。

我该怎么做才能让它在 IE8 上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:20:42.193

除了对 IE 的看法，看看[Modernizr](http://modernizr.com/)为浏览器提供了一种方法来检测它是否对 html5 组件有任何基本支持，如果没有，您就有机会处理它。

# java - 如何检测 MediaRecorder 是否被另一个应用程序使用？

> ID：11049546
> 
> 赞同：4
> 
> 时间：2012-06-15T11:09:30.943
> 
> 标签：java, android

我正在尝试检测 MediaRecorder 是否被其他应用程序使用，以停止我的记录器并继续供以后使用。我看到了 Androids Voice recorder 应用程序，它完全符合我所说的，但是如何？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T14:48:42.500

当另一个程序尝试访问 MediaRecorder 时，您要么收到错误消息，要么崩溃。换句话说，您拥有对它的独占访问权。

您无法直接获取 MediaRecorder 的状态，但是您可以验证您是否正在录制。这是执行您想要的代码：

```
package com.aplayer;

import java.io.IOException;

import android.app.Activity;
import android.media.MediaPlayer;
import android.media.MediaRecorder;
import android.net.Uri;
import android.os.Bundle;
import android.util.Log;
import android.view.Gravity;
import android.widget.Toast;

public class APlayerActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        MediaRecorder 
        recorder = new MediaRecorder();
          recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        recorder.setOutputFormat(MediaRecorder.OutputFormat.DEFAULT);
        recorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
        recorder.setOutputFile("/sdcard/test.wav");

        try {
            recorder.prepare();

        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            Log.d("ERROR ","IllegalStateException");

            Toast msg = Toast.makeText(APlayerActivity.this, "IllegalStateException", Toast.LENGTH_LONG);
            msg.setGravity(Gravity.CENTER, msg.getXOffset() / 2, msg.getYOffset() / 2);
            msg.show();

        } catch (Exception e) {
            // TODO Auto-generated catch block
            Log.d("ERROR ","IOException");
            e.printStackTrace();

            Toast msg = Toast.makeText(APlayerActivity.this, "IOException", Toast.LENGTH_LONG);
            msg.setGravity(Gravity.CENTER, msg.getXOffset() / 2, msg.getYOffset() / 2);
            msg.show();
        } 

        try {
        recorder.start();

        Toast msg = Toast.makeText(APlayerActivity.this, "Recording", Toast.LENGTH_LONG);
        msg.setGravity(Gravity.CENTER, msg.getXOffset() / 2, msg.getYOffset() / 2);
        msg.show();

        } catch (Exception e) {
        Log.e("ERROR", "start() failed");

        Toast msg = Toast.makeText(APlayerActivity.this, "Recording failed", Toast.LENGTH_LONG);
        msg.setGravity(Gravity.CENTER, msg.getXOffset() / 2, msg.getYOffset() / 2);
        msg.show();

        }

   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-09T12:30:04.803

```
 public boolean isMicrophoneAvailable() {
    boolean available = true;
    AudioRecord recorder = new AudioRecord(MediaRecorder.AudioSource.MIC, 44100, AudioFormat.CHANNEL_IN_MONO, AudioFormat.ENCODING_DEFAULT, 44100);
    try {
        if (recorder.getRecordingState() != AudioRecord.RECORDSTATE_STOPPED) {
            available = false;
        }
        recorder.startRecording();
        if (recorder.getRecordingState() != AudioRecord.RECORDSTATE_RECORDING) {
            recorder.stop();
            available = false;

        }
        recorder.stop();
    } finally {
        recorder.release();
    }

    return available;
} 
```

# c++ - 在循环范围之外声明参数是否更有效？

> ID：11049551
> 
> 赞同：4
> 
> 时间：2012-06-15T11:09:50.803
> 
> 标签：c++, optimization, scope, declaration

有时在查看优化代码时，我看到仅在循环范围内使用的参数将其声明移到循环之外。

像这样的东西：

```
A arr[BIG_NUMBER];

// .... //

for (int i=0; i!=BIG_NUMBER; ++i)
{
    B b = arr[i].getB();
    // ... do some work with b.
} 
```

变成这样：

```
A arr[BIG_NUMBER];

// .... //

B b;
for (int i=0; i!=BIG_NUMBER; ++i)
{
    b = arr[i].getB();
    // ... do some work with b.
} 
```

据推测，原因是我们在不断地重新声明`b`. 但这是合理的做法吗？答案是否取决于 B 是原始类型还是类？

我会认为，虽然 for 循环内变量的范围限制可能会阻止它们在循环外被访问，因为循环的内容存在于同一个堆栈帧中，但“实际”声明只发生一次。

（注意，我考虑[过在循环中创建一个对象，](https://stackoverflow.com/q/3009489/794283)但认为这是一个不同的问题，因为它涉及与声明相关的任何成本，而不是初始化。）

编辑 - 改进的标题

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T11:12:27.797

如果它是原始类型，编译器将相应地进行优化。

如果它是用户定义的类，则取决于。什么更昂贵，一个额外的初始化或`BIG_NUMBER`析构函数？

比较这些：

```
B b;  //one initialization
for (int i=0; i!=BIG_NUMBER; ++i)
{
    b = arr[i].getB();  //BIG_NUMBER assignments
}

for (int i=0; i!=BIG_NUMBER; ++i)
{
    B b = arr[i].getB();  //BIG_NUMBER initializations 
                          //should be the same as an assignment
} //BIG_NUMBER objects destroyed 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T14:40:11.563

没有一般的答案。这取决于 B 的类型、您使用的编译器，以及您在循环中（在分配之后）所做的事情。你所能做的就是测量，即使这样也只会告诉你一个特定的编译器，在一台特定的机器上运行。

# cocoa - 如何检查当前空间是仪表板？

> ID：11049556
> 
> 赞同：2
> 
> 时间：2012-06-15T11:10:10.293
> 
> 标签：cocoa, space, dashboard, nsworkspace

示例代码是

```
 [[[NSWorkspace sharedWorkspace] notificationCenter] addObserver:self selector:@selector(activeSpaceDidChange:) name:NSWorkspaceActiveSpaceDidChangeNotification object:nil]; 
```

然后

```
- (void) activeSpaceDidChange:(NSNotification *)aNotification {
         // code to check if current workspace is dashboard?
} 
```

我想检查当前空间是否是仪表板？任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T20:28:24.613

我尝试的第一个想法是根据以下答案获取当前空间 ID：[Detecting when a space changes in Spaces in Mac OS X](https://stackoverflow.com/questions/2414111/detecting-when-a-space-changes-in-spaces-in-mac-os-x)。这里的问题是密钥`kCGWindowWorkspace`在 OSX 10.8 中已弃用。所以没有直接的方法来获取这些信息。

在我的解决方案中，我现在检查不同的窗口或所有者，它们只是仪表板空间之一或所有其他空间：

*   如果有一个以`kCGWindowName`结尾的窗口，则用户在仪表板上`.wdgt/`
*   如果有一个窗口，则用户**不在**`kCGWindowName == System Status Item Clone`仪表板上，`kCGWindowOwnerName == SystemUIServer | Finder`

那么为什么我不只是使用`.wdgt/`支票呢？-- 因为如果仪表板上现在有小部件，这不起作用

那么为什么我要使用多个窗口检查呢？-。因为我不确定哪个窗口总是在所有空间上。至少`System Status Item Clone`并不`Finder`总是在那里。

这里我的实现是将此函数作为类别添加到 NSWorkspace

```
- (BOOL) userIsOnDashboardSpace {

NSArray*  windowsInSpace = (__bridge NSArray *) CGWindowListCopyWindowInfo(kCGWindowListOptionAll | kCGWindowListOptionOnScreenOnly, kCGNullWindowID);

NSUInteger indexOfWidget = [windowsInSpace indexOfObjectPassingTest:^BOOL(NSDictionary* obj, NSUInteger idx, BOOL *stop) {

    if ([obj objectForKey:(id)kCGWindowName]) {
        NSString *name = (NSString *)[obj objectForKey:(id)kCGWindowName];
        if ([name isEqualToString:@"System Status Item Clone"]) {
            *stop = true;
            return false;
        }            
        if ([name hasSuffix:@".wdgt/"]) {
            *stop = true;
            return true;
        }
    }        
    if ([obj objectForKey:(id)kCGWindowOwnerName]) {
        NSString *name = (NSString *)[obj objectForKey:(id)kCGWindowOwnerName];
        if ([name isEqualToString:@"SystemUIServer"]) {
            *stop = true;
            return false;
        }            
        if ([name isEqualToString:@"Finder"]) {
            *stop = true;
            return false;
        }       
    }

    return false;
}];    
return indexOfWidget != NSNotFound; 
```

}

# javascript - 如何在谷歌浏览器的新标签页中打开页面中的链接？

> ID：11049557
> 
> 赞同：0
> 
> 时间：2012-06-15T11:10:11.410
> 
> 标签：javascript, google-chrome

此代码是否是获取数组中页面中所有链接的最佳解决方案：

```
 var allLinks = document.getElementsByTagName('a'); 
```

还是有比这更好的解决方案？

在此之后，如何在新选项卡中打开数组“allLinks[i]”中的所有链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:23:37.417

只需将新的 'target' 属性附加到所有 'a' html 标记，Chrome 将默认在新选项卡中打开所有链接。

使用 jQuery，答案很简单。

```
$('a').each(function(){ $(this).attr('target', '_blank'); }); 
```

或者在纯javascript中

```
var allLinks, link, _i, _len;

allLinks = document.getElementsByTagName('a');

for (_i = 0, _len = allLinks.length; _i < _len; _i++) {
  link = allLinks[_i];
  link.setAttribute('target', '_blank');
} 
```

或在咖啡脚本中

```
allLinks = document.getElementsByTagName('a')

for link in allLinks
 link.setAttribute 'target', '_blank' 
```

# c# - 在 c# .exe 中包含可编辑文件

> ID：11049559
> 
> 赞同：1
> 
> 时间：2012-06-15T11:10:14.710
> 
> 标签：c#, edit, embedded-resource

我想将一个 .txt 文件嵌入到我的 C# 项目中，为用户存储一个列表值。这些值应该是可配置的，因此必须在运行时编辑 .txt。我发现嵌入式资源无法修改。有没有其他方法可以做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:14:49.743

将文本文件存储为嵌入式资源。第一次运行程序时，将嵌入的资源复制到磁盘上的文件中，并将其用于配置。您的用户可以编辑磁盘文件。

嵌入式资源版本用作默认配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T11:15:26.127

您可以使用您的`app.config`或`web.config`配置文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T11:15:42.483

通常，如果您将使用数据库来使用大量数据，建议您使用。我假设您真的只需要一个 .txt 文档。在您的程序集中编写一个过程，如果它不存在，它将创建该文本文件。更具体地说，假设您的程序是 mainProgram.exe。在 mainprogram.exe 的 onload 事件中编写一个过程 checkTxtFile()。此过程首先将检查目录中是否有 txt 文件。如果文件不存在，它将使用所需的值创建它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T13:35:39.663

可修改、可持久值的列表最好存储在数据库中。有许多轻量级选项可供选择；在这种情况下，我认为[SqlLite](http://www.dreamincode.net/forums/topic/157830-using-sqlite-with-c#/)数据库最适合您的目的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T11:34:11.010

您可以使用 Filestream 创建一个 XML 文件并在运行时使用它，或者制作自己的协议格式并将数据存储在文件中，这样任何人都无法更改它。除此之外，您还可以即时加密和解密文件。

# facebook - Facebook 图形 api 在 perl 中将照片发布到墙上

> ID：11049560
> 
> 赞同：0
> 
> 时间：2012-06-15T11:10:18.990
> 
> 标签：facebook, facebook-graph-api, facebook-wall

在 perl 中，我使用 Facebook::Graph api 在用户墙上发布，因为我有 aceess 令牌并且普通消息正在工作

```
my $fb = Facebook::Graph->new(
    app_id          => $app_id,
    secret          => $secret,
        );

        $fb->access_token( $access_token );

      $fb->add_post
         ->set_message($message)
         ->set_picture_uri("http://st.pimg.net/perlweb/images/lcamel.vcf3914e.gif")
         ->publish; 
```

这里的消息是用图片发布的，但我需要的是而不是在 set_picture_uri 中提供链接，我想从本地上传文件。可能吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T04:38:46.480

您可能需要自己构建一些东西来上传文件。

但我认为 Facebook 可能有 API 要求用户上传文件。

# android - OnTouch 和 OnTap 重叠。该怎么办？

> ID：11049563
> 
> 赞同：0
> 
> 时间：2012-06-15T11:10:40.430
> 
> 标签：android

这是我的 OnTouch 代码。我有另一个 onTap 方法来显示弹出窗口。但是，它不会被触发，因为 OnTouch 在 OnTap 上重叠。因此，如何将此 OnTouchEvent 函数转换为 OnTap。因为，如果我删除这个 onTouch 函数，我将无法拖动标记。

```
 public boolean onTouchEvent(MotionEvent event, MapView mapView) {
final int action=event.getAction();
            final int x=(int)event.getX();
            final int y=(int)event.getY();
            boolean result=false;
            p =  map.getProjection().fromPixels(x, y);

            newP = p;
                  if (action==MotionEvent.ACTION_DOWN) {

                    for (OverlayItem item : items) {
                      Point pa=new Point(0,0);

                      map.getProjection().toPixels(item.getPoint(), pa);

                          //I maintain the hitTest's bounds so you can still
                          //press near the marker
                      if (hitTest(item, marker, x-pa.x, y-pa.y)) {
                        result=true;

                        inDrag=item;

                        items.remove(inDrag);
                        populate();

                            //Instead of using the DragImageOffSet and DragTouchOffSet
                            //I use the x and y coordenates from the Point
                        setDragImagePosition1(x, y);

                        dragImage.setVisibility(View.VISIBLE);

                        break;
                      }
                    }
                  }
                  else if (action==MotionEvent.ACTION_MOVE && inDrag!=null) {
                    setDragImagePosition1(x, y);

                    result=true;
                  }
                  else if (action==MotionEvent.ACTION_UP && inDrag!=null) {
                    dragImage.setVisibility(View.GONE);

                        //I get the geopoint without using any OffSet, directly with the 
                        //Point coordenates
                    p=map.getProjection().fromPixels(x,y);

                    OverlayItem toDrop=new OverlayItem(p, inDrag.getTitle(),
                                                       inDrag.getSnippet());
                    Drawable orig = inDrag.getMarker(0);

                        //In my case I had down heading Arrows as markers, so I wanted my 
                        //bounds to be at the center bottom
                    if( orig != null)
                        toDrop.setMarker(boundCenterBottom(orig));

                    items.add(toDrop);
                    populate();

                    inDrag=null;
                    result=true;
                  }

               return(result || super.onTouchEvent(event, mapView));

        }
        private void setDragImagePosition1(int x, int y) {
          RelativeLayout.LayoutParams lp=
            (RelativeLayout.LayoutParams)dragImage.getLayoutParams();

              //Instead of using OffSet I use the Point coordenates.
              //I want my arrow to appear pointing to the point I am moving, so 
              //I set the margins as the Point coordenates minus the Height and half the
              //width of my arrow.
          lp.setMargins(x-(dragImage.getWidth()/2),y-dragImage.getHeight(), 0, 0);

          dragImage.setLayoutParams(lp);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:21:27.953

发射 X 次后`onTouch`，计算指针移动的平均距离。如果它小于某个 Y 值，则开始`onTap`事件，否则开始拖动。

# python - pyodbc 访问数据库 MSysObjects 权限问题

> ID：11049564
> 
> 赞同：4
> 
> 时间：2012-06-15T11:10:41.100
> 
> 标签：python, ms-access, pyodbc

我正在尝试`.mdb`使用`pyodbc`.

我可以很好地连接它——</p>

```
connection = pyodbc.connect(driver='{Microsoft Access Driver (*.mdb)}', dbp=path, pwd=password) 
```

但我无法查询`MSysObjects`以获取其表的列表—</p>

```
cursor = connection.cursor()
cursor.execute('select * from MSysObjects where Type=1 and Flags=0') 
```

它给了我——</p>

```
Record(s) cannot be read; no read permission on 'MSysObjects'. (-1907) (SQLExecDirectW) 
```

浏览一下，似乎是因为数据库已被“保护”。

我无法运行 Access 来更改它。有什么地方可以以编程方式解决这个问题吗？我需要知道数据库用户或类似的东西吗？

[我在 Visual Basic 中看到了一种解决方法](http://forums.asp.net/post/1240015.aspx)——有没有一种方法可以在 Python 中进行调整？我猜我需要一个不同的库（OLEDB）。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-04T05:26:21.657

解决方案是`cursor.tables()`按照下面的代码片段所示使用：

```
import pyodbc
connection = pyodbc.connect(driver='{Microsoft Access Driver (*.mdb)}', dbp=path, pwd=password)
cursor = connection.cursor()
tableNames = [x[2] for x in cursor.tables().fetchall() if x[3] == 'TABLE'] 
```

可能有一种更简洁的编码方式，但我很着急；）

（感谢那些对原始问题发表评论的人；我刚刚发布了这段代码，因为无论如何我都要把它写到我的笔记中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-11T20:27:12.413

我意识到我来晚了，但我最近遇到了同样的问题，并认为我会分享我为获取表/列模式而编写的函数。

```
def get_schema(cursor):
    """
    :param cursor: Cursor object to database
    :return: Dictionary with table name as key and list of columns as value
    """
    db_schema = dict()
    tbls = cursor.tables().fetchall()

    for tbl in tbls:
        if tbl not in db_schema:
            db_schema[tbl] = list() #  add table as key

        column_names = list()
        for col in cursor.columns(table=tbl):  # concatenate column names
            column_names.append(col[3])

        db_schema[tbl] = tuple(column_names)  # store column names as value
    return dict(db_schema) 
```

这个想法是您以后可以将数据元组附加到具有列名的列表中：

```
{'Table 1': [('Column 1-1', 'Column 1-2')],
 'Table 2': [('Column 2-1', 'Column 2-2', 'Column 2-3')]} 
```

# jpa - JPA 使用 TABLE GenerationType 生成主键，不生成顺序值，为什么？

> ID：11049567
> 
> 赞同：1
> 
> 时间：2012-06-15T11:10:47.970
> 
> 标签：jpa, primary-key, auto-increment, auto-generate

我正在使用 TABLE GenerationType 策略来生成表的主键值。起始值为 0，所以我希望添加到数据库的新行的 id 值将是连续的，即 1 然后 2 然后 3 然后 4 ... 等等。

实际上，我注意到这些值是递增的，但不是按顺序递增的。我所拥有的是：1,2,3,51,52,53,54,101,102 ...

为什么会这样？有没有办法控制主键值的增量？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:46:41.270

可以使用 TableGenerator 注释中的 allocationSize 属性来控制增量。文档还包含使用示例：[http ://docs.oracle.com/javaee/5/api/javax/persistence/TableGenerator.html](http://docs.oracle.com/javaee/5/api/javax/persistence/TableGenerator.html)

# visual-c++ - 在 MFC 中生成事件

> ID：11049573
> 
> 赞同：1
> 
> 时间：2012-06-15T11:11:12.887
> 
> 标签：visual-c++, mfc

我们如何生成事件，以便框架将在我需要的实例处调用 MFC 中的消息处理程序 OnSize() 函数。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T00:27:20.990

我经常重复这句话：**Windows 不是事件驱动系统**；因此，您不会生成事件。Windows 中的事件是用于同步线程的实体。

每个窗口通过处理来自系统或应用程序的消息并相应地采取行动来工作。它们可以是预定义的消息或专门为应用程序定义的消息。

我恭敬地但强烈不同意以前的帖子。尽管提供信息是出于好意，但它表明了一种糟糕的编程习惯。

**您永远不应该使用 Send/Postmessage 来更改窗口大小**。使用 Windows API：MoveWindow 或 SetWindowPos。这会将 WM_SIZE（和其他伴随消息）发送到窗口以通知大小更改请求。

一般来说：

**切勿发送或发布系统生成的消息**，因为这在大多数情况下不起作用，因为系统通常会生成您不发送的附加消息，从而导致意外行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T11:14:49.287

使用[SendMessage](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644950%28v=vs.85%29.aspx)或[PostMessage](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644944%28v=vs.85%29.aspx)函数并发送[WM_SIZE](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632646%28v=vs.85%29.aspx)消息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T11:16:12.080

您可以使用 SendMessage 函数，如下所示：

```
SetWindowPos (NULL, 0,0, myrect. Height (), myrect. Width (), SWP_FRAMECHANGED|SWP_NOZORDER); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-28T06:33:12.220

更一般地说，在 MFC 中合成事件的方法是使用`SendInput`函数：

[https://msdn.microsoft.com/en-us/library/windows/desktop/ms646310(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/windows/desktop/ms646310(v=vs.85).aspx)

# asp.net - 如何读取文本文件并将其写入 asp.net 中的 excel 文件

> ID：11049574
> 
> 赞同：0
> 
> 时间：2012-06-15T11:11:12.897
> 
> 标签：asp.net, excel

我的要求是读取文本文件，文本文件格式是

`12345|566437347|34564564|66465^2343|234234|45455|4534643...`

我需要将此文本文件存储到 Excel 文件中。在文本文件中，“ `^`”是行分隔符，“ `|`”是列分隔符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:17:24.620

您可以将文本文件读入字符串并将字符串拆分两次：

```
string[] rowArray = textfile.Split('^');
foreach (string row in rowArray )
{
    //excel code

    string[] columnArray = textfile.Split('|');
    foreach (string column in columnArray  )
    {
        //excel code
    }
} 
```

首先将文本文件拆分为行，然后将每行拆分为列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:28:18.447

我可以推荐[`EPPLus`](http://epplus.codeplex.com/)在服务器上不安装 Office 的情况下创建 excel 文件。那么你所需要的只是一个`DataTable`和`LoadFromDataTable`方法。

您需要拆分 Text by`'^'`以获取所有行，并拆分每行`'|'`以获取所有字段。要获取 的列数`DataTable`，您需要找到所有行中的最大字段数：

```
var text = File.ReadAllText(@"C:\Temp\data.txt");
var lines = text.Split('^');
var rows = lines.Select(l => new { Line = l, Fields = l.Split('|') });
var colCount = rows.Max(r => r.Fields.Length);
var tbl = new DataTable();
for (int i = 1; i <= colCount; i++)
    tbl.Columns.Add("Column" + i, typeof(string));
foreach (var row in rows)
{
    tbl.Rows.Add().ItemArray = row.Fields;
}
var pck = new OfficeOpenXml.ExcelPackage(new FileInfo(@"C:\Temp\data.xlsx"));
var ws = pck.Workbook.Worksheets.Add("Data");
ws.Cells["A1"].LoadFromDataTable(tbl, true, OfficeOpenXml.Table.TableStyles.Medium6);
pck.Save(); 
```

# c#-4.0 - 更新实体框架中的方法

> ID：11049577
> 
> 赞同：0
> 
> 时间：2012-06-15T11:11:17.577
> 
> 标签：c#-4.0, entity-framework-4, database-first

我是 Entity Framework 的新手，并且正在使用 Database First。我继承了一个正在进行更改的项目。我有一个名为 Bid 的表，我在其中添加了 column `Auciton_Status_Id`。然后我通过打开它并选择从数据库中更新模型来更新**.edmx文件（无论是什么）。**我在另一个项目中有一个**.tt**文件（无论是什么），我必须通过右键单击它选择运行自定义工具来手动更新它。问题是与 .edmx 文件在同一个项目中的**.tt**文件具有关联的 .cs 文件（带有带有签名的类`public partial class Entities : DbContext`）（无论 a`DBContext`是什么），并且它有一个名为

```
public virtual int MakeBid(Nullable<long> lotId, 
                           Nullable<decimal> bidValue, 
                           Nullable<System.DateTime> createdDate, 
                           Nullable<long> bidStatusId, 
                           Nullable<System.Guid> userId) 
```

问题是我希望我的新列`Auction_Status_Id`也可以添加到此方法中。当这是一个自动生成的类时，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:11:38.357

`MakeBid`可能是一个存储过程，所以如果你在数据库中修改它，你可以`.edmx`再次刷新。

（并确保您知道它的用途：D）。

# advantage-database-server - 性能问题 Advantage-Database-Server 10.1 - windows 7 客户端 - 虚拟 windows server 2008

> ID：11049583
> 
> 赞同：0
> 
> 时间：2012-06-15T11:11:36.950
> 
> 标签：advantage-database-server

更改网络后，我在使用 ADS 10.1 时遇到了一些性能问题。

让我解释：

网络旧配置：

服务器 - Server2003R2 - 处理器：Intel XEON 5130，2 GHZ - 4 GB RAM - ADS 7.01

工作站 - Intel 2160, 1,8 Ghz - 2 GB RAM

新形势

服务器： - 服务器 2008R2 SP1 - Intel XEON E5530 2,4 Ghz - 14 GB RAM - ADS 10.10.0.28 - 在 ESXi 服务器版本 5.0.0 的虚拟环境中运行

工作站 - Windows 7 - I3-2120 3.3 ghz - 8 gb RAM

我们的应用程序（内置于 VO 2.7）在新配置中大约慢了 3 倍。有谁知道这怎么可能？我已经在工作站上禁用了 SMB2。

亲切的问候，

埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T17:45:51.570

我们刚刚为我们的一位客户解决了类似的问题。事实证明，虚拟网卡速度是导致问题的原因。我们让我们的客户将速度提高到千兆位，现在他们正在以合理的速度工作。

# algorithm - 博弈论算法：如何进行

> ID：11049584
> 
> 赞同：2
> 
> 时间：2012-06-15T11:11:40.117
> 
> 标签：algorithm, game-theory

举个例子：[排列游戏](https://www.interviewstreet.com/challenges/dashboard/#problem/4eb167685f999)（interviewstreet.com）。我想知道如何处理这些问题。

PS：请不要发布完整的算法（因为这会破坏乐趣），只是一些指示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:43:01.957

我会设置一个带有小 N 和随机排列的小游戏，然后绘制一个完整的**Alpha-Beta 树**...

[http://en.wikipedia.org/wiki/Alpha-beta_pruning](http://en.wikipedia.org/wiki/Alpha-beta_pruning)

所有可能的移动，然后自下而上地为每个玩家在每一点做出最佳选择。

一旦你看到模式，然后从那里概括。

在博弈论术语中，您需要使用**反向归纳**来找到**子博弈完美平衡**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T17:32:38.850

`N`比较小。在每一轮中，每个数字都有两种可能性：删除该数字或不删除该数字。尝试两种可能性，`O(N*2^N)`为每个测试用例生成一个算法。实际上，这会更低，因为游戏通常在所有数字被删除之前结束，您可以经常缩短搜索时间。

因此，您需要一个回溯函数，该函数尝试删除数字的所有可能性，并`1`在 Alice 获胜和`2`Bob 获胜时返回。在深度`k`（第一个深度是`k = 0`），如果`k % 2 = 0`，那么轮到爱丽丝了。如果所有直接递归调用（具有 depth `k + 1`）返回，她就赢了`1`。如果其中至少有一个返回`2`，那么她就输了，因为 Bob 至少有一种获胜方式。

示例运行`1 3 2`：

```
k = 0 - Alice removes 1:
    k = 1 - Bob removes 3 => Bob wins because only 2 remains
          - Bob removes 2 => Bob wins because only 3 remains (note: this step
            is not needed, as Bob already proved he can win at this k = 1)
      - Alice removes 3 => Alice wins because 1 2 is increasing
      - Alice removes 2 => Alice wins because 1 3 is increasing 
```

`3`因此，如果 Alice 移除或`2`在第一步中，Alice 肯定有一个获胜策略（当两者都发挥最佳时） ，因为这两者的递归分支永远不会让 Bob 成为获胜者。

示例运行`5 3 2 1 4`（部分运行）：

```
k = 0 - Alice removes 5
    k = 1 - Bob removes 3
        k = 2 - Alice removes 2 => 1 4 => Alice wins
    k = 1 - Bob removes 2
        k = 2 - Alice removes 3 => 1 4 => Alice wins
    k = 1 - Bob removes 1
        k = 2 - Alice removes 3 => 2 4 => Alice wins
    k = 1 - Bob removes 4
        k = 2 - Alice removes 3
            k = 3 - Whatever Bob removes, he wins
        k = 2 - Alice removes 2
            k = 3 - Whatever Bob removes, he wins
        k = 2 - Alice removes 1
            k = 3 - Whatever Bob removes, he wins
  ... 
```

如您所见，`Bob`如果`Alice`从删除`5`. 如果你对她的其他可能性做同样的事情，你可能会得到同样的结果。因此，`Bob`如果他发挥最佳，谁肯定会赢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T11:16:59.197

**笔和纸**

使用笔和纸，确保您完全了解游戏规则，然后为游戏考虑所有可能的策略。

对于像这样一个相对简单的问题，从赢得比赛的那一刻开始向后思考，一次展开一步，并确保迈出这一步的玩家不可能迈出更好的一步，这就是最优性要求。

对于更复杂的问题，请阅读关于博弈论的维基百科。

# java - 无法解析为变量

> ID：11049593
> 
> 赞同：2
> 
> 时间：2012-06-15T11:12:21.433
> 
> 标签：java, android, variables

我有这个代码

```
filethemeSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {
    public void onNothingSelected(AdapterView<?> parent) {
    }
    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
        int throwid = (int)id;  
        System.out.println( "from onItemselected" +throwid);
    }
}); 
```

我尝试获取`throwid`变量的值，因此我创建了一个全局变量 `themerowid` ，然后执行以下操作：

```
themerowid = throwid; 
```

但我有这个错误：

> throwid 无法解析为变量

我该怎么做才能获得`throwid`价值？

问题是 throwid 没有改变值，它总是返回 0 ，我认为漏洞代码：

```
filethemeSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {
    public void onNothingSelected(AdapterView<?> parent) {
    }
    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
           throwid = (int)id;  
          System.out.println( "from onItemselected" +throwid);
    }
}); 
```

没有被执行，这就是为什么我一直得到 0，这段代码有一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:27:32.907

`throwId`在匿名类（侦听器）之外定义，如下所示：

```
public class MyClass extends ... implements ... {
    ...
    ...
    int throwId;

    filethemeSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {
        public void onNothingSelected(AdapterView<?> parent) {}

        public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
            throwId = (int)id;  
            System.out.println( "from onItemselected" +throwid);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:18:02.013

看起来`thowid`不在可见范围内。尝试这个：

```
 filethemeSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {
        public void onNothingSelected(AdapterView<?> parent) {
        }
        public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
              themerowid = (int)id;  
              System.out.println( "from onItemselected" + id);
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T11:18:33.893

```
 public YOURActivty extend Activty{
    int themerowid;  //<--------------------

      public void onCreate(Bundle savedInstanceState) {
      ...

    }

 public void xYZ() {

    filethemeSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {
                    public void onNothingSelected(AdapterView<?> parent) {
                    }
                    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
                            int throwid = (int)id;  
                          System.out.println( "from onItemselected" +throwid);
                    }
                });

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T11:18:35.547

全局声明 throwid ......然后使用它......

```
 int throwid
  filethemeSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {
        public void onNothingSelected(AdapterView<?> parent) {
        }
        public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
                throwid = (int)id;  
              System.out.println( "from onItemselected" +throwid);
        }
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T11:19:15.893

int throwid;(you shuld keep it as a field, because if you'll keep it as a local variable you have to declare it as final)

```
filethemeSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {
            public void onNothingSelected(AdapterView<?> parent) {
            }
            public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
                    throwid = (int)id;  
                  System.out.println( "from onItemselected" +throwid);
            }
        }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-15T11:19:57.590

try this way:

```
public class testingActivity extends Activity 
{

public int throwid;
 /** Called when the activity is first created. */

@Override      
public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.main);
  ////YOUR CODE...
          filethemeSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {
            public void onNothingSelected(AdapterView<?> parent) {
            }
            public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
                     throwid = (int)id;  
                  System.out.println( "from onItemselected" +throwid);
            }
        });
}

} 
```

# javascript - 除了JS，其他语言是否按加载顺序执行代码？

> ID：11049594
> 
> 赞同：0
> 
> 时间：2012-06-15T11:12:25.863
> 
> 标签：javascript, oop

很多人（像我一样）习惯于 JavaScript，因为代码是按加载顺序执行的，即从上到下，所以如果一个元素还没有加载，就不可能对其进行操作，或者如果一个函数尚未定义，无法调用它。由于 JS（和 VBscript，但不太流行）是唯一的互联网客户端编程（脚本，如果你愿意）语言，因此是唯一遇到必须从不同位置加载问题的语言，我假设没有其他语言可以做到这一点，即可以调用该语言中的函数/方法，同时在文档中稍后对其进行定义。这个假设是正确的，还是有其他语言也这样做？

编辑：对于那些不明白我的意思的人，这里有一个 Java 示例：

```
public class MainClass {
    public static void main(String[] args) {
        SomeClass SomeObject = new SomeClass;
        SomeObject.changeSomeVariable("someValue");
    }
}
class SomeClass {
    String someVariable;
    void changeSomeVariable(newValue){
        someVariable = newValue;
    }
} 
```

注意定义对象的类是如何在创建对象的那一行*之后*出现的。上面的方法会起作用吗（我的语法可能有点错误）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:27:15.293

例如，在 C++（编译语言）中，您可以使用一个类或一个函数，而您只知道它的定义，而不知道实现。

```
int some_function(int i); 
// we know the name of the function, the types of its parameters and
// its return value. We don't know, however, what does this function 
// exactly do.

int main() {
  int x = some_function(42);
} 
```

当然，函数的实现必须放在某个地方，否则链接会失败。

但如果我们不知道函数或类的名称或签名，我们就无法使用它。与编译语言相反，在脚本语言（如 Python、PHP、JavaScript 等）中，您可以这样做：

```
function f() {
  return some_function(42);
} 
```

即使`some_function`定义了 no，也可以创建此 JavaScript 函数而不会出错。但它必须在何时`f()`被调用时被定义。

我们可以相对于某些语言谈论和谈论这些事实。但是有很多语言，它们都是不同的。如果您对这个问题感到好奇，我可以建议您稍微学习其他几种语言（至少一种编译语言和一种功能语言）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:15:02.703

许多脚本语言（如 PHP 和 Ruby）按顺序执行。

那是脚本语言的租户。

# coding-style - 在分配大量字段时，首选这两种格式中的哪一种？

> ID：11049602
> 
> 赞同：0
> 
> 时间：2012-06-15T11:12:46.950
> 
> 标签：coding-style

在分配大量字段时，首选以下两种格式之一

1) 运算符周围有一个空格，这是 pep8 在 python 中推荐的。

```
 field1 = field1value
 field2_with_large_name = field2value
 field3 = field3value
 field4 = field4value
 field5_with_large_name = field5value
 field6_midlegth = field6value
 field7_with_large_name = field7value
 field8 = field8value
 field9 = field9value 
```

2）更易读的表格形式：

```
 field1                 = field1value
 field2_with_large_name = field2value
 field3                 = field3value
 field4                 = field4value
 field5_with_large_name = field5value
 field6_midlegth        = field6value
 field7_with_large_name = field7value
 field8                 = field8value
 field9                 = field9value 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T02:28:56.753

我不认为一种方法比另一种更好或更差。我通常使用第一个选项（更少的格式化工作），但我喜欢第二个选项用于值相关的情况，并且能够快速扫描和比较它们有好处。

关于第二种方法，我要提到的一件事是，使用空格比使用制表符进行对齐可能更好。制表符不是一个一致的单元，因为一个程序员可能将他们的编辑器设置为表示一个有 4 个空格的制表符，而另一个程序员会更喜欢 2 个。当一个程序员查看另一个程序员的代码时，对齐将被破坏。

当然，如果您的编辑器设置为将制表符转换为空格，那么代码实际上不包含制表符，那么这不是问题。

# iphone - iOS 蓝牙数据传输、Gamekit 或 Bonjour

> ID：11049605
> 
> 赞同：2
> 
> 时间：2012-06-15T11:12:50.287
> 
> 标签：iphone, bluetooth, gamekit, bonjour

我正在四处寻找合适的技术来实现我想到的应用程序。基本上我使用蓝牙通过 2 个 iOS 设备建立连接。在通信的第一部分，我只发送消息，一切正常。在第二部分中，我想允许用户共享视频文件；例如，假设视频文件为 20 MB。现在，通过这两个设备传输这些大数据的最佳选择是什么？我可以使用 GameKit 并将数据拆分成小数据包吗？需要合理的时间吗？或者最好使用 Bonjour 并等到用户在同一个 wifi 网络下或通过 2 个设备创建一个 wifi 网络？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-01-04T19:12:09.530

如果其他人（比如我）偶然发现这个问题，我会分享我的经验：

## 蓝牙

**优点：**你不需要wifi

**缺点：** Apple 只允许您访问 BLE 接口，这比普通蓝牙慢很多。我试过了，传输 1 MB 数据大约需要 5 分钟。此外，您需要将数据切成约 20 字节的块，并确保在另一端正确接收文件。

## 游戏套件

我实际上并没有尝试过，但似乎 GK 可以发送小文本消息（因为它是为此而设计的），但是发送较大的文件仍然会很慢。此外，您只能同时连接 8 个设备。

## 卓悦和 Wifi

**优点：**这是最快的。您可以在几秒钟内发送合理大小的文件（几 MB）。

**缺点：**您需要在同一个 wifi 网络中。

## 使用远程服务器

**优点：**假设你有一个不错的互联网连接，它相当快，而且你不依赖 wifi（如果你有 3G/LTE）。

事实证明，当您使用像 Parse 这样的后端即服务提供商时，这非常容易。

**缺点：** ~~好吧，您将不得不编写该服务器软件......~~您的应用程序用户可能需要移动数据计划。

我最终得到了解决方案#3，使用 Bonjour 和 Wifi，因为我不想编写服务器端代码。如果你想这样做，你需要学习 Socket 编程。我建议使用使用 TCP 的 CocoaAsyncSocket，这样您就不必确保您正确收到了文件。

由于是 2016 年，Swift 可以在 Obj-C 项目中使用，你可以看看我的解决方案，它将为你节省几乎所有的工作：[https ://github.com/JojoSc/OverTheEther](https://github.com/JojoSc/OverTheEther)

它允许您将任何类型的对象（实现 NSCoding 协议）发送到另一台设备。

# c# - 获取有关 Twitter 用户的人口统计信息

> ID：11049610
> 
> 赞同：-3
> 
> 时间：2012-06-15T11:13:07.160
> 
> 标签：c#, c#-4.0, rest, twitter

我正在用 C# 创建 twitter 应用程序，我将在其中编写用户名，并将显示他的所有人口统计数据。我有 twitter [REST API](https://dev.twitter.com/docs/api)，但没有任何解决方案。任何可以帮助我的人。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:48:06.683

下面是如何使用 LINQ to Twitter 获取用户信息的示例：

```
 var users =
            from tweet in twitterCtx.User
            where tweet.Type == UserType.Show &&
                  tweet.ScreenName == "JoeMayo"
            select tweet;

        var user = users.SingleOrDefault();

        var name = user.Name;
        var lastStatus = user.Status == null ? "No Status" : user.Status.Text;

        Console.WriteLine();
        Console.WriteLine("Name: {0}, Last Tweet: {1}\n", name, lastStatus); 
```

更多信息在这里： http://linqtotwitter.codeplex.com/wikipage?title=Querying%20User%20Info&referringTitle= [Getting%20User%20Information](http://linqtotwitter.codeplex.com/wikipage?title=Querying%20User%20Info&referringTitle=Getting%20User%20Information)。

# objective-c - 如何将 QuickTime 播放器栏插入自定义 QuickLook 插件？

> ID：11049621
> 
> 赞同：2
> 
> 时间：2012-06-15T11:13:46.043
> 
> 标签：objective-c, xcode, macos, quicktime, quicklook

这个问题真的很简单。我想模拟默认 OSX 的 Audio QuickLook 插件的行为，我需要 QuickTime Player，它通常位于预览窗口的底部。我还希望在使用我的自定义插件时，我还可以听到我当前正在预览的文件的声音。

下面是一些代码（来自 GeneratePreviewForURL.m 文件）可能有助于更好地理解上下文：

```
OSStatus GeneratePreviewForURL(void *thisInterface, QLPreviewRequestRef preview, CFURLRef url, CFStringRef contentTypeUTI, CFDictionaryRef options)
{
    @autoreleasepool {

        if (QLPreviewRequestIsCancelled(preview)) return noErr;

        NSMutableString *html=[[NSMutableString alloc] init];
        NSDictionary *props;
        NSData *imageData=[NSData dataWithContentsOfFile:@"/tmp/IMAGE.png"];

        props=@{
            (__bridge NSString *)kQLPreviewPropertyTextEncodingNameKey:@"UTF-8",
            (__bridge NSString *)kQLPreviewPropertyMIMETypeKey:@"text/html",
            (__bridge NSString *)kQLPreviewPropertyAttachmentsKey:@{
                    @"IMAGE":@{
                            (__bridge NSString *)kQLPreviewPropertyMIMETypeKey:@"image/png",
                            (__bridge NSString *)kQLPreviewPropertyAttachmentDataKey: imageData,
                            },
                    },
            };

        [html appendString:@"<html>"];
        [html appendString:@"<body>"];
        [html appendString:@"<img src=\"cid:IMAGE\">"];
        [html appendString:@"<br><br>"];
        //...
        [html appendString:@"</body>"];
        [html appendString:@"</html>"];

        QLPreviewRequestSetDataRepresentation(preview,(CFDataRef)[html dataUsingEncoding:NSUTF8StringEncoding],kUTTypeHTML,(CFDictionaryRef)props);
    }

    return noErr;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-08T07:40:25.703

`<audio>`使用 OSX 10.6.8 上的 Xcode 4.2，只需使用标签并使用其属性加载文件即可获得该结果`<src>`（如果您还想在预览窗口打开时播放音频，您只需将`<autoplay>`属性设置为"true")...不幸的是，现在在 Mavericks 上使用 Xcode 5.1，似乎使用该`cid:`方案（您已经在示例代码中用于加载`.png`文件）都无法完成这项工作！

只有[向 Apple 报告错误](https://bugreport.apple.com/)才能（可能）解决此问题。

# xcode - 如何在故事板推送 segue 调用的代码中关闭 TableViewController？

> ID：11049622
> 
> 赞同：3
> 
> 时间：2012-06-15T11:13:46.967
> 
> 标签：xcode, uitableview, push, swipe, segue

我知道如何处理 Storyboard 中的 push segues 以及使用导航控制器创建的后退按钮。我有一个主 tableview 通过 Storyboard 中的 push segue 连接到一个子 tableview。适用于在表之间切换。

我想添加在子表视图中向左滑动手势以返回主表视图的功能。

首先在 Storyboard 中使用滑动手势识别器尝试了此操作，但这导致主 tableview 成为子 tableview 的新子项。

然后我在代码中尝试：

```
[self.presentingViewController dismissViewControllerAnimated:YES completion:nil]; 
```

...但这似乎只适用于模态转场

我有：

```
- (void)viewDidLoad
{
   [super viewDidLoad];

   UISwipeGestureRecognizer *recognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipe:)];
   [recognizer setDirection:(UISwipeGestureRecognizerDirectionLeft)];
   [self.tableView addGestureRecognizer:recognizer]; 
}

- (void)handleSwipe:(UISwipeGestureRecognizer *)gestureRecognizer
{
   // need code here to dismiss the child tableview
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T08:40:03.210

今天终于弄明白了，效果很好：

```
- (void)handleSwipe:(UISwipeGestureRecognizer *)gestureRecognizer
{
    [self.navigationController popViewControllerAnimated:YES];
} 
```

在以下位置找到答案：

iOS 开发者库 > UINavigationController 类参考 > popToViewController

# java - Jboss 中的部署错误

> ID：11049623
> 
> 赞同：0
> 
> 时间：2012-06-15T11:13:48.560
> 
> 标签：java, jboss, ear

在 Jboss 中部署 EAR 时，应用程序无法启动并抛出以下堆栈跟踪：

```
16:33:31,804 WARN  [EntityResolver] Entity is not registered, publicId=-//Sun  Microsystems, Inc.//DTD J2EE Application Client 1.2//EN systemId=http://java.sun.com/j2ee/dtds/application-client_1_2.dtd    
16:33:32,112 ERROR [XmlFileLoader] The markup declarations contained or pointed to by the  document type declaration must be well-formed.:2:1
org.xml.sax.SAXParseException: The markup declarations contained or pointed to by the document type declaration must be well-formed.    
at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)
at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)
at org.jboss.metadata.XmlFileLoader.getDocument(XmlFileLoader.java:313)
at org.jboss.metadata.XmlFileLoader.getDocument(XmlFileLoader.java:257)
at org.jboss.deployment.ClientDeployer.start(ClientDeployer.java:122)
~~~ snip ~~~
at org.jboss.mx.server.Invocation.invoke(Invocation.java:74)
at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:242)
at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:642)
at org.jboss.mx.util.MBeanProxyExt.invoke(MBeanProxyExt.java:176)
at $Proxy8.deploy(Unknown Source) 
```

这可能与我的应用程序使用的库/jar 有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:52:12.027

这是关键：

> 文档类型声明包含或指向的标记声明必须格式正确。

众所周知，当引用损坏、丢失或无法访问的 DTD 时会发生这种情况。

首先，看服务描述符 XML 是否有效。如果是这样，作为测试，删除 DTD 并重试。

如果您的应用程序（或库）试图通过从 Internet 读取 DTD 来验证文档，则 JBoss 将需要 Internet 访问权限。`-Dhttp.proxyHost=yourproxy`如果您使用代理，请添加。您还可以检查 DTD 是否确实在线且可用，这可能会导致相同的症状。

[Jira 上的相关 JBoss 问题](https://issues.jboss.org/browse/JBAS-7974)

# java - 在 FreeMarker 中使用 Java Set

> ID：11049630
> 
> 赞同：1
> 
> 时间：2012-06-15T11:14:13.847
> 
> 标签：java, freemarker

从我的 Java 代码中，我返回`Set`了`Address`类对象……现在在 FreeMarker 中，我想显示所有此类`Address`对象值的值……

我的 Java 类

```
public class Address  implements java.io.Serializable {
private String phone;
private String landLineNumber;

  public Address() {}

  public String getPhone() {
    return this.phone;
  }

  public void setPhone(String phone) {
    this.phone = phone;
  }

  public String getLandLineNumber() {
    return this.landLineNumber;
  }

  public void setLandLineNumber(String landLineNumber) {
    this.landLineNumber = landLineNumber;
  } 
```

在 FreeMarker 我正在做以下事情

```
[#list addList as ${setaddress!''} Phone : ${addList.phone!''}<br/>
Land Line : ${addList.landLineNumber!''}
[/#list] 
```

现在我在填充时遇到错误，这是正确的方法吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:36:46.423

您是否在此处正确复制粘贴模板？因为它看起来很奇怪。它应该是这样的：

```
[#list addList as add]
  ${setaddress!''} Phone : ${add.phone!''}<br/>
  Land Line : ${add.landLineNumber!''}
[/#list] 
```

另外，如果您没有收到任何有意义的错误消息，只是一个`FileNotFoundError`，那里的 FreeMarker 集成有问题......

# php - PHP 监听 var 覆盖

> ID：11049635
> 
> 赞同：1
> 
> 时间：2012-06-15T11:14:31.223
> 
> 标签：php, variables, overriding, listener

有没有办法听一个被覆盖的变量......

一个虚构的例子：

```
<?php

$user = new user_class();
function callback_foo(){
   die('Do not override this variable you are not permited...');
}
listen_var_change('user','callback_foo');

?> 
```

我应该希望上面的代码能解释我想要做什么，我只是想确保 var 是恒定的。我不能使用`define()`它是否不允许对象|数组

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:21:56.410

PHP 中没有这样的机制。您可以为班级成员获得最接近的作品，并涉及魔术 getter 和 setter。例子：

```
<?php

class Foobar {
    private $user;

    public function __construct($user) {
        $this->user = $user;
    }

    public function __set($key, $val) {
        if ($key === 'user') {
            die("Do not change this value, or a fluffy kitty dies.");
        }
    }

    public function __get($key) {
        if ($key === 'user') {
            return $this->user;
        }
    }
} 
```

这几乎就是您在 PHP 中实现只读属性的方式（尽管您可能希望抛出一个可捕获的异常而不是`die`，以便用户代码可以优雅地恢复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:19:00.277

你的建议是不可能的。如果您想拥有一个“不可变”的值，一种实用的解决方案是将其隐藏在 getter 函数后面：

```
function getUser() {
    static $user;
    if (!$user) $user = new user_class();
    return $user;
} 
```

当然这不是一个好习惯，但并不比拥有一个`global $user`.

# python - 我怎样才能看到/我可以知道我需要发送哪些帖子？

> ID：11049642
> 
> 赞同：0
> 
> 时间：2012-06-15T11:14:48.570
> 
> 标签：python, post, webforms, urllib

我有一个要使用 python 提交的网络表单。我通过查看源代码知道将文件发送到我需要使用“文件”的站点。但是，当我在该站点上运行以下代码时：

```
url = "http://mascot.proteomics.dundee.ac.uk/cgi/search_form.pl?FORMVER=2&SEARCH=MIS"
values = {'FILE' : '/homes/ndeklein/test.mzML'}

data = urllib.urlencode(values)
req = urllib2.Request(url, data)
response = urllib2.urlopen(req)
the_page = response.read()
print the_page 
```

该页面包含以下内容：

```
<HTML><HEAD><TITLE>Fatal Error</TITLE></HEAD>
<BODY>
<H1>Fatal Error</H1>
<P><B>must specify search type</B><P></BODY></HTML> 
```

所以我必须给出文件类型。但是，我不知道如何找出文件类型在网络表单中的名称。如果我有一份手工发送的所有东西的清单，我可能会弄清楚。那么如何找出 POST 用于文件类型的内容，或者如何获取 webform 发送的所有内容的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:20:35.783

我假设您可以在浏览器中访问表单。当您的浏览器提交该表单时，您可以使用浏览器开发人员工具（Firefox 的 Firebug 插件）查看提交的内容。

# c# - 将文件夹中的文件列表写入afile

> ID：11049648
> 
> 赞同：1
> 
> 时间：2012-06-15T11:15:21.067
> 
> 标签：c#

我编写了一个代码来读取文件夹中的所有文件，然后将它们写入文件。所有代码都符合并运行正常，但**文件的文件名未显示在新文件中。**

**代码：**

```
private void Form1_Load(object sender, EventArgs e)
{
    DialogResult result = folderBrowserDialog1.ShowDialog(); // Show the dialog.
    // create a list to insert the data into
    //put all the files in the root directory into array
    string[] array1 = Directory.GetFiles(@"C:\Users\a3708906\Documents\Filereader m 15062012", "*.csv");

    // Display all files.
    TextWriter tw1 = new StreamWriter("C:/Users/a3708906/Documents/Filereader m 15062012/Filereader m 15062012/listoffiles.txt");
    List<string> filenames = new List<string>();
    tw1.WriteLine("--- Files: ---");
    foreach (string name in array1)
    {
            tw1.WriteLine(name);
    }
    tw1.Close();
} 
```

我会很感激你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:25:57.123

您不厌其烦地询问用户文件夹位置，但您没有检索该文件夹位置。代码应该是

```
 string[] array1 = Directory.GetFiles(folderBrowserDialog1.SelectedPath, "*.csv");

    // Display all files.
    TextWriter tw1 = new StreamWriter(folderBrowserDialog1.SelectedPath+"/listoffiles.txt"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:27:10.820

我会说你的文件夹路径中的“空间”把事情搞砸了。[按照msdn](http://social.msdn.microsoft.com/Forums/da-DK/csharplanguage/thread/aad27af4-5e6f-431f-a7bc-9cf8ed8f6444)中的说明尝试转义“空白”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T11:19:45.110

If the file isn't created (ie its just not there, even if it's just blank) then you problem lies with the stream writer. If this is the case I would suggest changing the direction of slashes so that your path is

```
TextWriter tw1 = new StreamWriter("C:\\Users\\a370890\\Documents\\Filereader m 15062012\\Filereader m 15062012\\listoffiles.txt"); 
```

If the file is created but nothing is written have a look at the flush command.

```
tw1.Flush(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T11:20:06.410

Set a breakpoint to verify that `GetFiles` is returning files.

(Consider renaming array1 to something more meaningful)

Set a breakpoint on `tw1.WriteLine(name)` and ensure it is being hit.

It should be pretty easy to see the problem. My guess is that you simply aren't getting any files returned from GetFiles, but the breakpoints will tell you for sure. If your output file is created but missing the files - this is most likely the case.

If your output file doesn't exist; take a closer look at your file writing code.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T11:20:08.300

> I think problem is with your file path or file writing capability.
> 
> You use folderbrowserdialog but do not use it to get selected file name. Instead you give path manually. also your output path can have problem.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-24T04:21:55.203

尝试这个 ：

```
using(system.IO.StreamWriter tw1 = 
      new system.IO.StreamWriter(@"C:/Users/a3708906/Documents/Filereader m 15062012/Filereader m 15062012/listoffiles.txt")
{
    foreach (string name in array1)
    {
        tw1.WriteLine(name);
    }
} 
```

# mysql - MySQL 在几个月内累积了一些差距

> ID：11049651
> 
> 赞同：0
> 
> 时间：2012-06-15T11:15:38.357
> 
> 标签：mysql, sum

我正在尝试为下表建立几个月的累积总和；

```
created_at          Installs    port
2011-02-01 00:00:00    2        7033
2012-02-05 00:00:00    8        7032
2012-03-01 00:00:00    1        7031
2012-05-05 00:00:00    2        8500
2012-06-01 00:00:00    4        7545 
```

我使用以下查询；

```
SELECT
    created_at,
    Installs,
    @total := @total + Installs AS cumulative
FROM
table, (SELECT @total:=0) AS t 
```

这很好用，但是对于没有记录的月份，我没有得到任何金额。我想用最后一个“已知”值填补空白。

我的猜测是我需要创建一个临时表来引用一年中的每个月，然后加入它，但我无法正确解决这个问题。

你有什么想法 ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:24:32.393

是的，您的猜测是处理此问题的一种方法。

创建一个（临时甚至更好：永久）表，每个月有一行，比如每个月的最后一天。然后使用`LEFT`join，类似于：

```
FROM 
        month_table AS mo 
    LEFT JOIN 
        table AS ta 
            ON  LAST_DAY(ta.created_at) = mo.last_day 
```

* * *

如果您希望您的查询能够正常工作（而不仅仅是偶然地正常），那么您应该真正注意的另一件事是添加一个排序。当您希望表格处理某个订单时，请始终使用`ORDER BY`- 并且“cumultive sum”表明您不想要随机订单。除非您指定，否则 DBMS 不会总是选择相同的顺序。

# iphone - 检测运营商连接类型（3G / EDGE / GPRS）

> ID：11049660
> 
> 赞同：21
> 
> 时间：2012-06-15T11:16:15.653
> 
> 标签：iphone, objective-c, ios, network-programming, iphone-privateapi

如何获取运营商网络的连接类型？

*   我可以使用`Reachability`类 获取连接是 WIFI 还是 WWAN
*   我能够获得网络标志

    > 可达性标志状态：WR t------ localWiFiStatusForFlags

*   我可以使用 WIFI SSID`CaptiveNetwork`

> 支持的接口：( en0 )

```
en0 => {  
    BSSID = "xx:xx:xx:xx:xx:xx";  
    SSID = MyWifiNetwork;  
    SSIDDATA = <x1x1x1x1 x1x1x1x1 x1>;  
} 
```

但我无法区分 3G、EDGE 或 GPRS 连接。

任何想法**也使用iOS私有API？**

谢谢。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-12-30T13:55:12.033

从 iOS 7 开始，您可以使用：

```
CTTelephonyNetworkInfo *telephonyInfo = [CTTelephonyNetworkInfo new];
NSLog(@"Current Radio Access Technology: %@", telephonyInfo.currentRadioAccessTechnology);
[NSNotificationCenter.defaultCenter addObserverForName:CTRadioAccessTechnologyDidChangeNotification 
                                                object:nil 
                                                 queue:nil 
                                            usingBlock:^(NSNotification *note) 
{
    NSLog(@"New Radio Access Technology: %@", telephonyInfo.currentRadioAccessTechnology);
}]; 
```

我还发现这可以检测慢速或快速连接：

```
- (BOOL)isFast:(NSString*)radioAccessTechnology {
    if ([radioAccessTechnology isEqualToString:CTRadioAccessTechnologyGPRS]) {
        return NO;
    } else if ([radioAccessTechnology isEqualToString:CTRadioAccessTechnologyEdge]) {
        return NO;
    } else if ([radioAccessTechnology isEqualToString:CTRadioAccessTechnologyWCDMA]) {
        return YES;
    } else if ([radioAccessTechnology isEqualToString:CTRadioAccessTechnologyHSDPA]) {
        return YES;
    } else if ([radioAccessTechnology isEqualToString:CTRadioAccessTechnologyHSUPA]) {
        return YES;
    } else if ([radioAccessTechnology isEqualToString:CTRadioAccessTechnologyCDMA1x]) {
        return NO;
    } else if ([radioAccessTechnology isEqualToString:CTRadioAccessTechnologyCDMAEVDORev0]) {
        return YES;
    } else if ([radioAccessTechnology isEqualToString:CTRadioAccessTechnologyCDMAEVDORevA]) {
        return YES;
    } else if ([radioAccessTechnology isEqualToString:CTRadioAccessTechnologyCDMAEVDORevB]) {
        return YES;
    } else if ([radioAccessTechnology isEqualToString:CTRadioAccessTechnologyeHRPD]) {
        return YES;
    } else if ([radioAccessTechnology isEqualToString:CTRadioAccessTechnologyLTE]) {
        return YES;
    }

    return YES;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T12:48:22.763

这里的`OLD`解决方案，特别是**使用私有 API**`SoftwareUpdateServices.framework`

```
Class NetworkMonitor = NSClassFromString(@"SUNetworkMonitor");
NSLog(@"TYPE: %d", [NetworkMonitor currentNetworkType]); 
```

它返回：

> 0：无数据
> 1：WIFI
> 2：GPRS/EDGE
> 3：3G

希望这对社区有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-31T10:36:42.400

接受的答案不适用于 iOS 10。我找到了一种解决方法并在 AppDelegate 中设置了一个计时器，该计时器每 5 秒检查一次属性 currentRadioAccessTechnology。因此，我们还需要一个功能来检查 WIFI 连接是否可用，而不是无线电接入技术。

检查WIFI连接是否可用：

```
class func isConnectedToWlan() -> Bool {
    var zeroAddress = sockaddr_in(sin_len: 0, sin_family: 0, sin_port: 0, 
                         sin_addr: in_addr(s_addr: 0), sin_zero: (0, 0, 0, 0, 0, 0, 0, 0))
    zeroAddress.sin_len = UInt8(MemoryLayout.size(ofValue: zeroAddress))
    zeroAddress.sin_family = sa_family_t(AF_INET)

    let defaultRouteReachability = withUnsafePointer(to: &zeroAddress) {
        $0.withMemoryRebound(to: sockaddr.self, capacity: 1) {zeroSockAddress in
            SCNetworkReachabilityCreateWithAddress(nil, zeroSockAddress)
        }
    }

    var flags: SCNetworkReachabilityFlags = SCNetworkReachabilityFlags(rawValue: 0)
    if SCNetworkReachabilityGetFlags(defaultRouteReachability!, &flags) == false {
        return false
    }

    //Only Working for WIFI
     let isReachable = flags == .reachable
     let needsConnection = flags == .connectionRequired

     return isReachable && !needsConnection
} 
```

像这样设置计时器：

```
Timer.scheduledTimer(timeInterval: TimeInterval.seconds(5.0), target: self, selector:      
                           #selector(showNetworkMessage), userInfo: nil, repeats: true) 
```

每 5 秒调用一次的选择器：

```
 guard !Reachability.isConnecteToWlan() else {
        //Connected to WLAN
        return
    }
    guard let currentRadioAccessTechnology = info.currentRadioAccessTechnology else {
        // No internet connection
        return
    }
    guard (currentRadioAccessTechnology == CTRadioAccessTechnologyGPRS 
             || currentRadioAccessTechnology == CTRadioAccessTechnologyEdge) else {
        // 3G, LTE fast radio access Technology
        return
    }

    if lastRadioAccessTechnology != nil {
        guard let lastRadioAccessTechnology = lastRadioAccessTechnology, 
            (lastInfo != currentRadioAccessTechnology || 
              lastInfo != currentRadioAccessTechnology) else {
            //Internet connection did not change
            return
        }
    }
    // Internet connection changed to Edge or GPRS
    // Store lastRadioAccessTechnology to check if internet connection changed
    lastRadioAccessTechnology = currentRadioAccessTechnology 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-15T11:22:14.857

我正在开发一个 iPhone 应用程序，该应用程序需要能够识别当前正在使用哪种类型的互联网连接（Wifi、3G、Edge 等）。我找到了一种使用 Apples Reachability 示例代码进行检查的简单方法。网上好像有这方面的资料不足，希望对大家有所帮助。

首先将 Reachability.m/.h 复制到您的项目中，并将 #include "Reachability.h" 包含到您的类中。

```
Reachability *reach = [[Reachability alloc]init];
if (reach.internetConnectionStatus == NotReachable) {
    NSLog(@"No Connection Found");
} else if (reach.internetConnectionStatus == ReachableViaCarrierDataNetwork) {
    NSLog(@"3G or Edge");
} else if (reach.internetConnectionStatus == ReachableViaWiFiNetwork) {
    NSLog(@"Wifi Connection");
}
[reach release]; 
```

此代码可能不是完成此操作的最佳方法，但它似乎是最简单的方法。

# android - 有人可以为此建议Android中的布局吗？

> ID：11049664
> 
> 赞同：-4
> 
> 时间：2012-06-15T11:16:43.187
> 
> 标签：android, layout

我正在根据规范开发一个应用程序，但想不出如何在 Android 中布局这个屏幕：

![在此处输入图像描述](../Images/a2356f6042851934c356dceb940241d4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:24:55.550

很难说你的布局应该是什么样子。

看起来你需要`LinearLayout`水平方向。

**编辑**

尝试类似的事情（我跳过了一些参数）：

```
<LinearLayout
 layout_width="fill_parent"
 layout_height="fill_parent"
 orientation="vertical">
    <LinearLayout
      layout_width="fill_parent"
      layout_height="wrap_content"
      orientation="horizontal">

      <Button />
      <Button />

    </LinearLayout>

    <ListView></ListView>

</LinearLayout> 
```

首先 - 您应该向 ListView 添加一个适配器，它使用按钮在第一行下方绘制视图。你可以自己做，有很多例子。在这个适配器中，您应该像这样绘制视图：

```
<LinearLayout
     layout_width="fill_parent"
     layout_height="wrap_content"
     orientation="horizontal"
     gravity="center">

     <ImageView layout_weight="1" />
     <LinearLayout
        layout_width="wrap_content"
        layout_height="wrap_content"
        layout_weight="1"
        orientation="vertical">

        <TextView />
        <TextView />
        <Button />

     </LinearLayout>

</LinearLayout> 
```

# c++ - Windows 7 中的 COleTemplateServer::RegisterAll() 会发生什么

> ID：11049665
> 
> 赞同：2
> 
> 时间：2012-06-15T11:16:50.597
> 
> 标签：c++, windows-7, registry, uac, elevated-privileges

好的，所以我们有一个在 Windows XP 中运行良好的 C++ 应用程序。它在初始化中有以下代码

```
// Register all OLE server (factories) as running.  This enables the
//  OLE libraries to create objects from other applications.
COleObjectFactory::RegisterAll(); 
```

现在就像我说的，它在 Windows XP 中运行良好，但据我了解，该程序试图注册它的 COM 接口，这在 XP 中很好，但这在 Windows Vista 和 Windows 7 中可能是一个问题，因为 UAC。特别是如果它作为标准用户运行（没有提升的特权）。

如果我理解正确，这是程序正常运行所必需的，但如果没有提升的权限，它就无法执行此代码。如果每次应用程序运行时都会运行（这通常在运行时`CWinApp::init()`运行）

**在你说只使用管理员权限之前**，用户不会拥有它们，没有办法改变它

所以，现在我的问题是：

1）我的假设是否正确？

2）如果我是正确的，最好的解决方法是什么？我可以删除这个吗？我需要设置其他东西吗？（我们更改了一些 VB 模块以使用 XML 文件而不是注册表中的内容

PS：模块编译成DLL

PPS：UAC 必须开启

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T11:35:37.200

请注意：

1.  这些功能的文档没有提及任何特权要求；和
2.  在有限的特权环境中，似乎没有人在使用这些功能时遇到问题；和
3.  现在是 2012 年，我想如果这些功能现在不能在 UAC 下运行，我想有人会注意到的。

所以（没有其他建议）我会说它只是有效。

尽管如此，我还是查看了`COleObjectFactory::RegisterAll()`and的实现`COleObjectFactory::UpdateRegistryAll()`。

# `RegisterAll`

最终调用`RegisterAll`最终在`olefact.cpp:135`调用位置 `CoRegisterClassObject`。[来自 MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms693407.aspx)：

> 向 OLE 注册一个 EXE 类对象，以便其他应用程序可以连接到它。

我相信这种注册将仅限于当前用户的会话和应用程序的生命周期。**备注**部分涉及特权（*截至 Windows Server 2003...*），但没有提供任何具体内容。

有一个称为`Running Object Table`(ROT) 的对象，可以通过[`GetRunningObjectTable`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684004.aspx). 文档有这个片段：

> 每个工作站都有一个本地 ROT，它维护一个已注册为在该计算机上运行的对象的表。

[COM Elevation Moniker](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679687.aspx)有更多关于 ROT 和权限的信息（它表明各种权限级别的进程都可以正常工作）。左侧的链接也可能有所帮助。

总的来说，似乎没有什么建议`CoRegisterClassObject`需要管理员权限。

# `UpdateRegistryAll`

这个函数`olefact.cpp:375`在它打开的地方结束`HKEY_CLASSES_ROOT`。在这一点上[，文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724475.aspx)变得更好了：

> 诸如`RegOpenKeyEx`或`RegQueryValueEx`允许您指定`HKEY_CLASSES_ROOT`键的注册表功能。当您从交互式用户帐户中运行的进程调用这些函数时，系统会将默认设置`HKEY_LOCAL_MACHINE\Software\Classes`与交互式用户的设置合并在`HKEY_CURRENT_USER\Software\Classes`。

进一步：

> 如果您将密钥写入下的密钥`HKEY_CLASSES_ROOT`，系统会将信息存储在下`HKEY_LOCAL_MACHINE\Software\Classes`

该文档没有定义当您尝试`HKEY_CLASSES_ROOT`在有限权限下写入时会发生什么（即标准用户无法写入`HKLM`），但我*相信*您最终会`HKCU`改为写入。

最后，请注意：

> **Windows Server 2003 和 Windows XP/2000**：应用程序可以将依赖的 COM 对象注册到每台机器或每用户的 COM 配置存储（`HKEY_LOCAL_MACHINE\Software\Classes`或`HKEY_CURRENT_USER\Software\Classes`）。

所以如果它掉到`HKCU`，你应该没问题。

**警告实施者**：不要依赖实施细节。

# android - 如何将 xml 转换为 KSOAP 请求？

> ID：11049666
> 
> 赞同：1
> 
> 时间：2012-06-15T11:16:51.937
> 
> 标签：android, wsdl, ksoap

我是 android 新手。我有一个 xml，它显示了要通过 SOAP 在服务器上发送的详细信息，所以请告诉我如何在 KSOAP 请求中转换以下 xml。谢谢

```
<location>
<locationId>132</locationId>
<name>test</name>
<qualifiedCoordinates>
<altitude>10</altitude>
</qualifiedCoordinates>
</location> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:25:07.027

```
SoapObject request = new SoapObject(NAMESPACE, METHOD);
    request.addProperty("locationId", 132);
    request.addProperty("name", test);
    request.addProperty("altitude", 10);
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
            SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);

    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try {
        androidHttpTransport.call(SOAP_ACTION, envelope);
        SoapObject result = (SoapObject) envelope.getResponse();}
catch(Exception e) {
        tempText.setText("Error");
        e.printStackTrace();
    } 
```

# itext - 使用 Itext 将表格与页面底部对齐

> ID：11049671
> 
> 赞同：0
> 
> 时间：2012-06-15T11:17:05.197
> 
> 标签：itext, velocity

我有一个带有嵌套表的速度模板。我想将包含表格的最后一个单元格的内容与页面底部对齐。我正在速度模板中编写 xml 并使用 IText 处理 pdf。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:47:10.363

我不确定我是否理解了您的问题，但是 PdfPTable 对象上的**setExtendLastRow**方法可以使表格上的最后一行变高，只要需要填充当前页面，直到底部边距。例子：

```
 PdfPTable tabella = new PdfPTable(4);
  PdfPCell cell = new PdfPCell(new Phrase("some text here"));
  tabella.addCell(cell);
  tabella.addCell(cell);
  tabella.addCell(cell);
  tabella.addCell(cell);
  tabella.setExtendLastRow(true); 
```

该表格只有 4 个延伸到页面底部的单元格。

# jpa - DiscriminatorColumn 作为主键 / id 的一部分

> ID：11049673
> 
> 赞同：12
> 
> 时间：2012-06-15T11:17:22.373
> 
> 标签：jpa, orm, composite-primary-key, discriminator

# 情况

我有一个 Entity `DiscriminatorColumn`，配置为单表继承：

```
@Entity
@Inheritance(strategy=InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name="TYPE")
public class ContainerAssignment{
...
} 
```

'ContainerAssignment' 引用了另一个实体：

```
@JoinColumn(name="CONTAINER_ID")
private Container container; 
```

一个容器可能有`ContainerAssignment`每个 TYPE 之一。这意味着表的主键由和`ContainerAssignment`定义。`CONTAINER_ID``TYPE`

`ContainerAssignment`有一些子类，例如

```
@Entity
@DiscriminatorValue("SOME_TYPE")
public class SomeTypeOfContainerAssignment extends ContainerAssignment{
...
} 
```

`SomeTypeOfContainerAssignment`给定的`CONTAINER_ID`.

# 问题

如果我将 JPA 定义`@Id`为 ContainerAssignment 表上的 Container，我可以这样做`entityManager.find(SomeTypeOfContainerAssignment.class, containerId)`，这很棒。这与`SELECT * FROM CONTAINER_ASSIGNMENT WHERE CONTAINER_ID = 1 AND TYPE = 'SOME_TYPE';`. 它知道它需要在这里检查类型，因为`@DiscriminatorValue("SOME_TYPE")`实体上的注释。

但是，这意味着从 Container 到 ContainerAssignment 的反向引用会中断，因为 Container 并不是真正的主键。例如，如果 Container 有一个`@OneToOne(mappedBy=container) private SomeTypeOfContainerAssignment assignment;`，当您在容器中读取时，它将通过类似 的方式读取分配`SELECT * FROM CONTAINER_ASSIGNMENT WHERE CONTAINER_ID = 1;`，而不进行类型检查。这给了它一个容器的所有分配，然后它看似随机地选择一个，可能是错误的类型，在这种情况下，它会抛出一个异常。

相反，如果我将`@Id`ContainerAssignment 的 JPA 定义为使用容器和类型的复合 id，则对 ContainerAssignment 子类的引用可以正常工作。

但是，我不能这样做`entityManager.find(SomeTypeOfContainerAssignment.class, containerId)`，因为 containerId 不是 id。我必须这样做`entityManager.find(SomeTypeOfContainerAssignment.class, new MyPk(containerId, "SOME_TYPE"))`，这似乎是打败了点`@DiscriminatorValue("SOME_TYPE")`。如果无论如何我必须在 find 上指定类型，我还不如只使用一个 ContainerAssignment Entity。

# 问题

有没有一种方法可以对单个表继承实体的子类进行工作引用，其中表上的主键在鉴别器列上是复合的，同时也能够`EntityManager.find`仅通过主键的一部分来实现不是鉴别器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-01T18:15:17.100

我将假设 ContainerAssignment 的复合主键工作正常（我真的认为它可能依赖于 JPA 实现！），而仍然困扰您的是对 entityManager.find 和 PK 实例化的烦人调用。

我的解决方案是定义独立于 JPA API 的查找器方法。不要将自己锁定在 JPA 中。最简单的方法是在您的域类中定义一个静态查找器（或者，如果您想保持域解耦，请使用查找器定义另一个类，执行 JPA。在 IoC 中挖掘以了解如何做到这一点）。

在 ContainerAssignment （或您的查找器类）：

```
public static <T extends ContainerAssignment> T findByPK(EntityManager manager,Class<T> type,long id) {
    DiscriminatorValue val = type.getAnnotation(DiscriminatorValue.class); // this is not optimal...can be cached...
    return (T) manager.find(type, new MyPk(containerId, val.getValue()));
} 
```

在您的代码中：

```
SomeTypeOfContainerAssignment ca = ContainerAssignment.findByPK(entityManager,SomeTypeOfContainerAssignment.class,containerId); 
```

请注意，将类型作为 PK 的一部分意味着您可以拥有两个具有相同 id 的不同类型的 ContainerAssignment 实例。如果您不知道它的类型，您将需要一个查询来检索 ContainerAssignment。但是，如果您的 id 是从序列生成的，您可以编写另一个查找器方法来隐藏对实体框架的内部调用，返回结果集的第一个结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:48:43.383

如果`Container`有一个双向 OneToOne with `SomeTypeOfContainerAssignment`, which extends `ContainerAssignment`，那么容器字段不应该在 中定义和映射`ContainerAssignment`，而是在`SomeTypeOfContainerAssignment`：

```
public class Container {
    @Id
    private Long id;

    @OneToOne(mappedBy = "container")
    private SomeTypeOfContainerAssignment someTypeOfContainerAssignment;
}

public class ContainerAssignment {
    @Id
    private Long id;
}

public class SomeTypeOfContainerAssignment extends ContainerAssignment {
    @OneToOne
    private Container container;
} 
```

如果所有类型的容器分配都与 C​​Ontainer 有这样的 OneToOne 关联，则可以将 Container 定义为

```
public abstract class ContainerAssignment {
    @Id
    private Long id;

    public abstract Container getContainer();
    public abstract void setContainer(Container container);
} 
```

老实说，我不知道你是否允许在表中使用相同的连接列来映射`@OneToOne container`每个子类的字段。

我认为这是你能拥有的最好的。如果将容器字段放在基类中，则必须将关联定义为 OneToMany/ManyToOne 关联，因为它确实是这样。

我不认为你想做的事情是可能的，我也不会搞乱复合 PK，因为有充分的理由不鼓励它们，而且使用起来是一场噩梦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-31T14:00:34.457

如果你对提供者特定的扩展没问题，Hibernate 提供注解**@DiscriminatorOptions**。

它帮助我解决了鉴别器列是复合主键的一部分的问题。

# sql-server - 如何向一组数据添加版本号

> ID：11049674
> 
> 赞同：1
> 
> 时间：2012-06-15T11:17:24.487
> 
> 标签：sql-server, sql-server-2008

我在 SQL Server 表中有一些数据...

```
ClientID  DecisionID
60043     1466338   
60043     1475880   
60043     1480017   
104563    1468452
106454    1475922   
106454    1475922 
```

并且我被要求为每个客户端的每个决定添加一个“版本”列，因此例如客户端 60043 将具有版本 1、2 和 3，就像这样......

```
ClientID  DecisionID  Version
60043     1466338       V1
60043     1475880       V2
60043     1480017       V3
104563    1468452       V1
106454    1475922       V1
106454    1475922       V2 
```

我可以添加一个带有`UPDATE`语句的列，然后我可能会编写一些 C# 代码来迭代填充新列，但我确信 SQL 中有更好的方法，但我什至不知道如何开始.. .*任何帮助/指点将不胜感激*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T11:35:42.857

如果您只想将版本添加到结果中（而不是实际创建列），那么：

```
DECLARE @t TABLE
    (
      clientID INT ,
      decisionID INT
    );
INSERT  INTO @t
VALUES  ( 60043, 1466338 ),
        ( 60043, 1475880 ),
        ( 60043, 1480017 ),
        ( 104563, 1468452 ),
        ( 106454, 1475922 ),
        ( 106454, 1475922 )

SELECT  clientID ,
        decisionID ,
        'V'
        + CAST(ROW_NUMBER() OVER ( PARTITION BY clientID 
                                   ORDER BY decisionID DESC ) AS NVARCHAR(10))
FROM    @t 
```

您可以使用类似的方式进行更新：

```
DECLARE @t TABLE
    (
      clientID INT ,
      decisionID INT ,
      ver VARCHAR(20)
    );
INSERT  INTO @t
        ( clientID, decisionID )
VALUES  ( 60043, 1466338 ),
        ( 60043, 1475880 ),
        ( 60043, 1480017 ),
        ( 104563, 1468452 ),
        ( 106454, 1475922 ),
        ( 106454, 1475922 );

WITH    c AS ( SELECT   clientID ,
                        decisionID ,
                        'V'
                        + CAST(ROW_NUMBER() OVER ( PARTITION BY clientID 
                            ORDER BY decisionID DESC ) AS NVARCHAR(10)) v
               FROM     @t
             )
    UPDATE  tab
    SET     ver = v
    FROM    @t tab
            INNER JOIN c ON tab.clientID = c.clientID
                            AND tab.decisionID = c.decisionID

SELECT  *
FROM    @t; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:19:26.230

首先编写一个 ALTER 脚本，将 Version 列添加到表中。

接下来编写一个 UPDATE 脚本以根据您的条件设置版本。

# android - 键盘显示时Android EditText无法聚焦

> ID：11049679
> 
> 赞同：1
> 
> 时间：2012-06-15T11:17:40.830
> 
> 标签：android, android-layout, android-edittext, android-softkeyboard

我在 EditText 上有问题。显示软键盘时，我无法显示所有 EditText 字段，如下图所示：

![截屏](../Images/04101bf72358339b5af782c5f22ab3a1.png)

以下是我的布局代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="15dip"
    android:focusable="true" >
    <TextView
        android:id="@+id/password_listing"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical|center_horizontal"
        android:text="@string/new_service"
        android:textSize="20dip"
        android:textStyle="bold"
        android:padding="10dip" />
    <RelativeLayout
        android:id="@+id/l_service_name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:gravity="center_vertical" >
    <TextView
        android:id="@+id/service_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:gravity="center_vertical"
        android:text="@string/service_name"
        android:textSize="15dip"
        android:textStyle="bold" />
    <EditText
        android:id="@+id/servicename"
        android:layout_width="180dip"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:gravity="center_vertical|center_horizontal"
        android:hint=""
        android:singleLine="true"
        android:focusable="true" />
</RelativeLayout>
<RelativeLayout
        android:id="@+id/l_username"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:gravity="center_vertical" >
    <TextView
        android:id="@+id/user_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
    android:layout_centerVertical="true"
        android:gravity="center_vertical"
        android:text="@string/username"
        android:textSize="15dip"
        android:textStyle="bold" />
    <EditText
        android:id="@+id/username"
        android:layout_width="180dip"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:gravity="center_vertical|center_horizontal"
        android:hint=""
        android:singleLine="true"
        android:focusable="true" />     
</RelativeLayout>
<RelativeLayout
        android:id="@+id/l_pwd"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:gravity="center_vertical" >
    <TextView
        android:id="@+id/pwdset"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:gravity="center_vertical"
        android:text="@string/pwd_txt"
        android:textSize="15dip"
        android:textStyle="bold" />
    <EditText
        android:id="@+id/pwd_set"
        android:layout_width="180dip"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:gravity="center_vertical|center_horizontal"
        android:hint=""
        android:inputType="textPassword"
        android:isScrollContainer="true"
        android:focusable="true" /> 
</RelativeLayout>
<LinearLayout 
        android:id="@+id/layout_3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:gravity="center_vertical|center_horizontal" >
    <TextView 
        android:id="@+id/selectmsg_txt"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical|center_horizontal"
        android:text="@string/selectmsg"
        android:textSize="15dip"
        android:textStyle="bold" />
    <GridView 
        android:id="@+id/app_grid"
        android:layout_width="match_parent" 
        android:layout_height="150dp"
        android:padding="10dp"
        android:verticalSpacing="10dp"
        android:horizontalSpacing="10dp"
        android:numColumns="auto_fit"
        android:columnWidth="60dp"
        android:stretchMode="columnWidth"
        android:gravity="center" />
    <Button
        android:id="@+id/b_addpwd"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_vertical|center_horizontal"
        android:text="@string/add"
        android:background="@android:color/transparent"
        android:drawableLeft="@drawable/ic_add"
        android:textColor="@android:color/white"
        android:textSize="20dip" />
    </LinearLayout>   
</LinearLayout> 
```

因为我希望它在我进入这个活动时自动隐藏软键盘，所以我将它添加到我的活动中：

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN); 
```

我的布局 xml 有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:22:38.307

使用滚动视图并在清单文件的活动标记中添加以下内容：

```
 android:windowSoftInputMode="adjustPan" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:28:02.237

在清单文件中使用以下代码片段：

```
 android:windowSoftInputMode="adjustResize|adjustPan" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-12T17:16:10.740

对我有帮助的是：

```
EditText et = new EditText(); //or whatever way you use to fetch the object
et.setInputType(InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS); 
```

希望它也能帮助你

# javascript - 用于显示 div 的 jQuery 不起作用

> ID：11049680
> 
> 赞同：0
> 
> 时间：2012-06-15T11:17:50.690
> 
> 标签：javascript, jquery, asp.net, modal-dialog

我希望出现一个对话框 div 并将其余页面显示为灰色。我应该无法单击页面上的任何其他内容。
以下是我正在使用的代码。不知何故，代码不起作用。页面只是在点击超链接时刷新。
任何人都可以帮忙吗？

```
<script>
    $(document).ready(function () {

                $("#DownloadButton").click(function (e) {
                    ShowDialog(true);
                    e.preventDefault();
                });

                $("#btnClose").click(function (e) {
                    HideDialog();
                    e.preventDefault();
                });

                $("#btnDownload").click(function (e) {
                    HideDialog();
                    e.preventDefault();
                });

            });

            function ShowDialog(modal) {
                $("#overlay").show();
                $("#dialog").fadeIn(310);

                if (modal) {
                    $("#overlay").unbind("click");
                }
                else {
                    $("#overlay").click(function (e) {
                        HideDialog();
                    });
                }
            }

            function HideDialog() {
                $("#overlay").hide();
                $("#dialog").fadeOut(300);
            } 

</script>

<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
        <div id="overlay" class="web_dialog_overlay">
        </div>
        <div id="dialog" class="web_dialog">
            <table>
                <tr>
                    <td>
                        <asp:Button ID="btnDownload" runat="server" Text="Download" />
                    </td>
                    <td>
                        <asp:Button ID="btnClose" runat="server" Text="Close" />
                    </td>
                </tr>
            </table>
        </div>
        <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <Triggers>
                <asp:PostBackTrigger ControlID="DownloadButton" />
            </Triggers>
            <ContentTemplate>
                <div  class="BaseClass">
                    <asp:LinkButton ID="DownloadButton" runat="server">Download</asp:LinkButton>
                </div>
                <asp:GridView>
                </asp:GridView>
            </ContentTemplate>
        </asp:UpdatePanel>
    </asp:Content> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:38:02.487

如果 DownloadButton、btnClose 和 btnDownload 是服务器控件的 ID，那么要获取客户端 ID，您必须使用：

```
$("#<%=DownloadButton.ClientID%>") 
```

代替

```
 $("#DownloadButton") 
```

在你的 jQuery 代码中。

或者

**如果您使用的是 ASP.Net 4.0**

将 ClientIDMode="static" 与您的服务器端控件一起使用。

**关闭对话框：**

使用链接关闭模型弹出窗口：例如。

```
<a href="#" id="btnClose"></a> 
```

在你的Javascript中使用：

```
$("#btnClose").click(function (e) {
                    HideDialog();
                }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T11:50:20.470

你为什么不简单地使用锚标签？它至少不会导致回发，无需使用更新面板。

```
<a id="DownloadButton" href="#">Download</a>

$("#DownloadButton").click(function (e) {
                ShowDialog(true);
                e.preventDefault();
            }); 
```

否则，如果您想使用服务器端控制，Kapil Khandelwal 的答案是正确的。

```
$("#<%=DownloadButton.ClientID%>") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T12:43:52.997

在准备好的文件中：

```
 jQuery("#overlay").dialog(
            {
                bgiframe: true,
                autoOpen: false,
                modal: true,
                width: 800
            }
        ); 
```

在点击事件中：

```
 $('#overlay').dialog('open'); 
```

我敢肯定，您必须在对话框声明中指定更多选项，但这种方法对我来说效果很好。

# php - PHP条件循环 - 字符串长度

> ID：11049681
> 
> 赞同：0
> 
> 时间：2012-06-15T11:17:59.160
> 
> 标签：php, loops, conditional, do-while

如果这是一个非常愚蠢的问题，或者是一个明显的新手错误，我很抱歉 - 但我就像这样基本，我之前几乎从未使用过 do - while 循环（我知道 - 我自己无法理解！这怎么可能这些年来我设法避免了它？？）

所以：我想从文本段落的开头选择一些单词。我使用了以下代码：

```
 $no_of_char = 70;
   $string = $content;

   $string = strip_tags(stripslashes($string)); // convert to plaintext
   $string = substr($string, 0, strpos(wordwrap($string, $no_of_char), "\n")); 
```

哪种有效，但问题是有时它会给出 EMPTY 结果。我认为这是因为该段落包含空格、空行和/或回车...所以我正在尝试创建一个循环条件，该条件将继续尝试直到字符串的长度至少为 X 个字符..

```
 $no_of_char = 70;  // approximation - how many characters we want
   $string = $content;

do {
       $string = strip_tags(stripslashes($string)); // plaintext
       $string = substr($string, 0, strpos(wordwrap($string, $no_of_char), "\n")); // do not crop words
       } 
while (strlen($string) > 8); // this would be X - and I am guessing here is my problem 
```

好吧 - 显然它不起作用（否则这个问题不会） - 现在它总是什么都不产生。（空字符串）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:20:45.860

您最可能遇到的问题是字符串开头有空行。你可以很容易地摆脱它们[`ltrim()`](http://php.net/ltrim)。然后使用您的原始代码获取第一个实际换行符。

您的循环不起作用的原因是因为您告诉它拒绝任何超过 8 个字符的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T11:21:59.650

尝试使用[str_word_count](http://uk.php.net/str_word_count)：

```
$words = str_word_count($string, 2); 
```

> 2 - 返回一个关联数组，其中键是字符串中单词的数字位置，值是实际单词本身

然后使用[array_slice](http://uk.php.net/manual/en/function.array-slice.php)：

```
$total_words = 70;
$selected_words = array_slice($words, 0, $total_words); 
```

# php - 导出到 txt 文件发生错误

> ID：11049685
> 
> 赞同：0
> 
> 时间：2012-06-15T11:18:29.287
> 
> 标签：php, file, two-columns

我已使用 PHP/MYSQL 将数据导出到文本文件。`file.txt`我使用以下指令写入创建：

```
fwrite($fp ,'' . $value. '' . "\t"); 
```

一切正常，但是当数据库中的字段包含`','`字符时会出现一些问题，如下所示：

```
Section= Society, Education & Youth 
```

所以在创建的文本文件中，节值出现在分开的两列中，这是错误的，因为节的值是一个，应该插入一个单元格（我在 excel 文件中看到了问题）

所以问题是，我怎样才能告诉输出忽略`','`某些值，以便它不会被视为两列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:36:50.300

逗号分隔值 (CSV) 文件可以使用分隔符（通常是引号）来表示这种情况下的文本。如果您的数据在文本中没有引号，那么您可以尝试一下。您可以告诉 Excel 分隔符是什么。只要 Excel 知道您如何分隔数据，您也可以使用不同的字符（制表符、逗号等）来分隔字段。

```
// try with quotes
fwrite($fp, "\"$value\"\t"); 
```

# c - 关于inet_ntoa()

> ID：11049687
> 
> 赞同：6
> 
> 时间：2012-06-15T11:18:35.330
> 
> 标签：c, linux, unix

我使用该函数编写服务器`char* inet_ntoa(struct in_addr in),`当我包含头 文件`<sys/socket.h>`时`<netinet/in.h>`，可以生成带有编译器警告的可执行二进制文件，但是当程序处理来自的返回字符串时会发生段错误`inet_ntoa`。但是当我添加标题时，`<arpa/inet.h>,`一切似乎都很好。

怎么了？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-15T11:30:32.483

`arpa/inet.h`包含 的声明`char* inet_ntoa(struct in_addr in)`。如果您不包含此标头，您的编译器将使用隐式声明`int inet_ntoa()`。错误的声明很容易导致段错误，特别是如果你在系统 where `sizeof(int)!=sizeof(void*)`.

如果您正在使用`gcc`，您可以添加`-Wall`标志。`gcc`将警告您使用没有明确声明的函数。

# asp.net-mvc - 使用 WIF 和 jquery ajax 请求时 ASP.NET MVC 3 中的会话 Cookie 过期处理

> ID：11049690
> 
> 赞同：4
> 
> 时间：2012-06-15T11:18:39.960
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery, session-cookies, wif

我的项目我正在使用 WIF *（但这对于这个问题的上下文并不重要。您可以使用替代框架来处理您的身份验证。问题是关于在执行 ajax 请求时处理身份验证失败）*。不过，就我而言，我编写了自定义服务器逻辑，它继承自`ClaimsAuthenticationManager`并处理身份验证：

```
public override IClaimsPrincipal Authenticate(string resourceName, IClaimsPrincipal incomingPrincipal)
{
    if (incomingPrincipal != null && incomingPrincipal.Identity.IsAuthenticated)
    {
        // add some custom claims
    }
    return incomingPrincipal;
} 
```

现在，在我删除所有**Session Cookies**后，结束然后再次进入任何页面，我被重定向到 WIF 提供的登录页面，并要求我再次登录。一切都按预期工作。

但是，如果我改为发出**ajax 请求**，则会出现错误，并被以下代码拦截：

```
$(document).ready(function () {
    $.ajaxSetup({
        error: function (XMLHttpRequest, textStatus, errorThrown) {            
            // do something
        }
    });
}); 
```

不幸的是`XMLHttpRequest`，对象没有返回任何有意义的消息，基于这些消息，我可以像其他人一样以任何其他方式处理这种错误。在这种特殊情况下，我只希望应用程序重定向到登录页面 - 就像正常请求一样。

![在此处输入图像描述](../Images/cc80ba7d5436b6bc7ac305126b97148f.png)

当 ajax 调用正在执行时，方法`Authenticate`from`ClaimsAuthenticationManager`被调用。`Identity.IsAuthenticated`返回false，方法结束，一切都完成了。即使`OnAuthorization`from 方法`BaseController`也没有被调用，所以我不能将任何状态传递给 ajax 结果对象。

```
protected override void OnAuthorization(AuthorizationContext filterContext)
{
    if (filterContext.HttpContext.Request.IsAjaxRequest() && !User.Identity.IsAuthenticated)
    {
        //do something, for example pass custom result to filterContext
    }
    base.OnAuthorization(filterContext);
} 
```

如何解决难题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-18T08:02:21.700

我找到了一些关于这个的资源（见答案的底部），并与以下解决方案混为一谈：

在执行 ajax 请求时，我指定要返回 json：

```
$.ajax({
    url: action,
    type: 'POST',
    dataType: 'json',
    data: jsonString,
    contentType: 'application/json; charset=utf-8',
    success:
        function (result, textStatus, xhr) {
        }
}); 
```

因为我的框架处理身份验证，当令牌过期时，它会将 http 状态 302 放入响应中。因为我不希望我的浏览器透明地处理 302 响应，所以我在 Global.asax 中捕获它，并将状态更改为 200 OK。此外，我添加了标头，指示我以特殊方式处理此类响应：

```
protected void Application_EndRequest()
{
    if (Context.Response.StatusCode == 302
        && (new HttpContextWrapper(Context)).Request.IsAjaxRequest())
    {                
        Context.Response.StatusCode = 200;
        Context.Response.AddHeader("REQUIRES_AUTH", "1");
    }
} 
```

响应内容未正确序列化为 json，导致解析错误。调用错误事件，在其中执行重定向：

```
$(document).ready(function () {
    $.ajaxSetup({
        error: function (XMLHttpRequest, textStatus, errorThrown) {
            if (XMLHttpRequest.getResponseHeader('REQUIRES_AUTH') === '1') {
                // redirect to logon page
                window.location = XMLHttpRequest.getResponseHeader('location');
            }
            // do sth else
        }
    });
}); 
```

请参阅[How to manage a redirect request after a jQuery Ajax call](https://stackoverflow.com/questions/199099/how-to-manage-a-redirect-request-after-a-jquery-ajax-call) and here [How do you deal with AJAX requests when user session expires, or where the request terminates in a 302](https://stackoverflow.com/questions/6324590/how-do-you-deal-with-ajax-requests-when-user-session-expires-or-where-the-reque)以获得更多解释。

**更新：**

同时，我想出了**新的解决方案，在我看来要好得多**，因为可以开箱即用地应用于所有 ajax 请求（如果他们没有明显地重新定义 beforeSend 事件）：

```
$.ajaxSetup({
    beforeSend: checkPulse,
    error: function (XMLHttpRequest, textStatus, errorThrown) {
        document.open();
        document.write(XMLHttpRequest.responseText);
        document.close();
    }
});

function checkPulse(XMLHttpRequest) {
    var location = window.location.href;
    $.ajax({
        url: "/Controller/CheckPulse",
        type: 'GET',
        async: false,
        beforeSend: null,
        success:
            function (result, textStatus, xhr) {
                if (xhr.getResponseHeader('REQUIRES_AUTH') === '1') {
                    XMLHttpRequest.abort(); // terminate further ajax execution
                    window.location = location;
                }
            }
    });
} 
```

控制器方法可以是任何最简单的方法：

```
[Authorize]
public virtual void CheckPulse() {} 
```

`Application_EndRequest()`保持和以前一样。

# ninject - V2 Ninject Binding 到 V3 的转换

> ID：11049691
> 
> 赞同：3
> 
> 时间：2012-06-15T11:18:55.417
> 
> 标签：ninject, ninject-2

我已经为此苦苦思考了大约 8 个小时，但我似乎无法找到一个简单的解释来说明如何将我的 ninject 的自定义引导程序（最后在 v2.xxx 中的代码上工作）更改为新的 v3.0.0.0 语法。

我目前有以下内容：

```
public class NinjectCustomBootStrapper : NinjectNancyBootstrapper
{
  protected override Ninject.IKernel GetApplicationContainer()
  {
    return Program.MyContainer;
  }

} 
```

在一个单独的班级中，并且：

```
public static IKernel MyContainer
{
  get { return _myContainer ?? (_myContainer = CreateKernel()); }
  set { _myContainer = value; }
}

private static IKernel CreateKernel()
{
  var kernel = new StandardKernel();
  kernel.Bind<CardMonitorService>().ToSelf().InSingletonScope();
  return kernel;
} 
```

在命令行应用程序的主程序“Program.c”中。

自从将 ninject 更新到 V3.0.0.0 后，我才发现有一些重大变化。我承认我不经常使用 ninject（我通常使用结构映射），而这个项目这样做的唯一原因是我最初没有编写它。

由于我已经升级了 Ninject，现在启动应用程序时出现以下异常：

```
Method not found: 'Ninject.Syntax.IBindingWhenInNamedWithOrOnSyntax`1<!0>
Ninject.Syntax.IBindingToSyntax`1.ToConstant(!0)'. 
```

经过大量的搜索和研究，我能找到的最接近的是：

[http://sharpfellows.com/post/Ninject-Auto-registration-is-chang-in-version-3.aspx](http://sharpfellows.com/post/Ninject-Auto-registration-is-changing-in-version-3.aspx)

虽然它为我指明了正确的方向，但仍然不是一个解决方案，因为我没有使用自定义绑定生成器。

所以我的问题是这个。

如何重写上面的内容，以便我的项目再次工作，并且 WCF 服务在调用时获得正确的单例绑定，当请求进来时。返回到 ninject 2 不是一个选项，因为项目中的其他依赖项已添加已强制 v3 升级，这些添加了已请求的新功能，因此我正在研究它。

作为参考，这是一个 .NET4 构建，在 NancyFX 上运行，具有自托管 WCF 设置作为 Windows 服务，使用 Topshelf 提供 SCM 接口。

干杯

肖蒂

**补充说明一下**

这是一个现有的项目，最初是在某个时候编写的，我被要求为该项目添加一些新功能。

作为添加这些新功能的一部分，我需要将正在使用的 Ninject 版本从早期版本升级到 V3.0.0.0，因为添加到项目中的新依赖项需要更新版本的 Ninject。

在以前的 Ninject V2 下，我上面给出的代码运行良好，没有问题，因为项目已经添加了 Ninject V3，所以我现在得到了如上所述的异常。

我无法返回到早期版本的 Ninject，因为这意味着无法添加我正在添加的新功能。

从我迄今为止所做的研究来看，上面的Sharpfellows链接是迄今为止我在互联网上设法找到的对我的问题的最接近的解释。

我不经常使用 Ninject，所以我不知道 V2 和 V3 之间发生了什么变化（根据我的研究）是我的问题的原因。

我需要知道如何更改我在 V2 下编写的代码（如上所示），以便它在 V3 下工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T13:20:19.267

`MissingMethodException`通常是部署问题。您针对与部署不同的程序集进行编译。检查您是否部署了相同的版本和相同的构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:31:25.403

因此，大约一周后，问题在于 Nancy 开发团队打破了与最新版本 ninject 的二进制可比性（反之亦然）:-)

有一个 GitHub 拉取请求来解决这个问题：

[https://github.com/NancyFx/Nancy.Bootstrappers.Ninject/pull/6](https://github.com/NancyFx/Nancy.Bootstrappers.Ninject/pull/6)

然而，下一个版本 'Nancy.Bootstrapper.Ninject' 0.12 将很快出现在 NuGet 上，它将实施修复。

# javascript - 使用 window.onbeforeunload，是否可以知道发生了哪个事件？

> ID：11049692
> 
> 赞同：2
> 
> 时间：2012-06-15T11:18:57.307
> 
> 标签：javascript, jquery

如何确定事件的触​​发因素（关闭浏览器、关闭选项卡、在其他页面上重定向等）？

```
function winUnload(){
     var pathToCloseCurrentTab = window.location.protocol + "//" + window.location.host + '<%= ResolveUrl("~/Services/SenderAjax.asmx") %>' + "/CloseCurrentTab";         
        $.ajax({
                type: 'POST',
                url: pathToCloseCurrentTab,
                dataType: 'JSON',
                data: {'data': $('input[id$=hfTimeLoadLayOut]').val()}
            });
}
window.onbeforeunload= function (evt){                    
    winUnload();
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:30:19.943

您无法确定触发卸载事件的原因 - 事件目标将是文档本身，并且依赖元素的不同状态是不可靠的，因为有很多动作可以触发它。

但是，如果您只需要知道某个按钮、链接或表单（等等）是否触发了它，您可以监听它们的`click`/`submit`事件，从而在卸载事件发生之前捕获它。

# c# - 如何使用c#将字符串转换为日期时间

> ID：11049694
> 
> 赞同：-6
> 
> 时间：2012-06-15T11:19:05.717
> 
> 标签：c#, datetime

当尝试以日期时间格式转换字符串值时，某个时间字符串变量当时带有空值，它会抛出异常无效格式的字符串。例如

```
string abc=//date vale
 datetime dt=new datetime();
 dt=DateTime.Parse(abc);
//if abc comes null it throws exception.
//I can check in this way
if(abc!=null)
{
 dt=DateTime.Parse(abc);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T11:20:25.220

使用以下代码。

```
string abc=//date vale
DateTime dt;        
if(DateTime.TryParse(abc, out dt)
{
       // do something
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-15T11:21:35.200

看看`DateTime.TryParse`*^([[MSDN]](http://msdn.microsoft.com/en-us/library/system.datetime.tryparse.aspx))*。

**编辑：**

如果您不想复制此代码，请将其放在一个方法中，可能带有可为空的返回值：

```
public DateTime? ParseDate(string dateString)
{
    DateTime dt;
    if (DateTime.TryParse(dateString, out dt))
    {
        return dt;
    }
    else
    {
        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-15T11:22:24.637

您可以使用[`DateTime.TryParse(string s, out DateTime result)`](http://msdn.microsoft.com/en-us/library/ch92fbc1.aspx). 此方法将尝试将字符串解析为结果并返回`true`是否有效/`false`如果无法解析。

```
string abc = //date vale
datetime dt;
bool didItWork = DateTime.TryParse(abc, out dt); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-15T11:22:25.617

您应该使用`DateTime.TryParse()`以确保避免异常。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-15T11:21:42.900

用这个

```
Convert.ToDateTime(); 
```

并检查此链接

[http://msdn.microsoft.com/en-us/library/9xk1h71t.aspx](http://msdn.microsoft.com/en-us/library/9xk1h71t.aspx)

# smartcard - A list of smartcards which support pkcs#11

> ID：11049695
> 
> 赞同：0
> 
> 时间：2012-06-15T11:19:05.423
> 
> 标签：smartcard, pkcs#11

I want to know is there exists a comprehensive list of smart cards that support pkcs#11 (or other standards like pkcs#15)?

I need a list like [Rousseau](http://ludovic.rousseau.free.fr/softwares/pcsc-tools/smartcard_list.txt)'s list.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:16:41.990

如果您正在寻找 PKCS#11，您可能正在寻找加密智能卡。如果您谈论的是加密智能卡，那么我敢肯定 99% 的智能卡供应商确实为他们的卡提供了 PKCS#11 模块。当然，模块的功能和可用性可能会有所不同。

# visual-studio-2010 - Weird [?] characters in Visual Studio

> ID：11049697
> 
> 赞同：2
> 
> 时间：2012-06-15T11:19:15.620
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2008

I have created a private character using 'Private Character Editor' (http://en.wikipedia.org/wiki/Private_Character_Editor).

Unfortunately, the character i have created does not display in Visual Studio, instead i get a 'question mark inside a square' character. I can type the private character into notepad using Alt+57344, but that same key combination does not even register in Visual Studio. Interestingly, whilst notepad outputs the next private character if i type Alt+57345, Visual Studio output the same as Alt+1 ... awesome :)

How can i get the private character to display properly?

* * *

Update!

The private character displays happily in Word and Notepad, and also in a RichTextBox in my own application, but not in Excel (i just get a 'computer says no ding' when i try to use Alt+57344). I can however paste the character into Excel using Character Map.

Cheers.

# ruby-on-rails-3 - NameError (uninitialized constant Ckeditor::Picture): i am getting this error onclick on send it to the server

> ID：11049705
> 
> 赞同：0
> 
> 时间：2012-06-15T11:19:37.497
> 
> 标签：ruby-on-rails-3

NameError (uninitialized constant Ckeditor::Picture): i am getting this error should i write pictures controller . i am unable to upload the image using ckeditor

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:51:56.913

在 config.js 中

在那个改变浏览器上传路径的路径中，给自定义路径定义自己的方法。在那里你可以写你自己的喜欢

```
def upload_image
      @func_num = params["CKEditorFuncNum"]
      @ck_editor = params["CKEditor"]
      if params.include?(:upload)
      data = params[:upload]
        @image = Upload.create(:image => data) if data.present?
      end
      render :layout => false
    end\ 
```

html中的对应视图

```
- if @image
  = image_tag @image.image.url
  :javascript
    CKEditorFuncNum = #{@func_num};
    function SetUrl( fileUrl )
    {
      window.parent.CKEDITOR.tools.callFunction(CKEditorFuncNum, fileUrl);
    }
    SetUrl("#{ @image.image.url }"); 
```

注意：仅当您使用回形针上传图片时。

# php - Versioning translatable entities in Doctrine (symfony2)

> ID：11049707
> 
> 赞同：6
> 
> 时间：2012-06-15T11:19:39.713
> 
> 标签：php, version-control, orm, symfony, doctrine-orm

What would be the best way to integrate versioning system of some entity which uses gedmo translatable behaviour?

Gedmo Loggable does not seem to work like this:

```
/**
 * @ORM\Entity(repositoryClass="Alef\JobOffersBundle\Repository\JobOfferRepository")
 * @ORM\Table(name="alef_job_offer")
 * @Gedmo\Loggable
 */
class JobOffer implements Loggable, Translatable, UserOwnerInterface {

    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\ManyToOne(targetEntity="Alef\UserBundle\Entity\User")
     * @ORM\JoinColumn(name="id_user", referencedColumnName="id")
     */
    protected $user;

    /**
     * @var datetime $created
     *
     * @Gedmo\Timestampable(on="create")
     * @ORM\Column(name="created", type="datetime")
     */
    protected $created;

    /**
     * @var datetime $updatedAt
     *
     * @ORM\Column(type="datetime")
     * @Gedmo\Timestampable(on="update")
     */
    protected $updatedAt;

    /**
     * @Gedmo\Versioned
     * @Gedmo\Translatable
     * @ORM\Column(name="title", type="string", length=255)
     */
    protected $title;

    /**
     *
     * @Gedmo\Versioned
     * @Gedmo\Translatable
     * @ORM\Column(name="description", type="text")
     */
    protected $description;

    [...] 
```

I get empty `data` field in `ext_logged_entries`.

Or maybe there is a better way to store translatable and versioned entities? Maybe not using Gedmo doctrine extensions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-19T08:14:19.040

不能同时使用 Loggable 和 Translatable。看看[这里](https://stackoverflow.com/a/18301727/2059504)。

# c# - SendInput() misinterpreted in certain applications

> ID：11049709
> 
> 赞同：0
> 
> 时间：2012-06-15T11:19:48.090
> 
> 标签：c#, sendinput

My c# project sends an injected key combo to the foreground window. In notepad, Firefox, IE9 everything works as it should, but Adobe Illustrator CS5 seems to misinterpret the sent combos: for example CTRL+G becomes CTRL+SHIFT+WHEEL_DOWN so instead of grouping selected objects it scrolls the page to the left. (A low level keyboard hook also confirmed that I'm sending the right combo.)

A quick test showed that there is method in this madness, so CTRL+F appears as CTRL+SHIFT+WHEEL_UP.

The system is Windows 7 64bit so at first I suspected some 32 vs 64 bit woe but things work properly in both 32 and 64 bit IE9.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T13:35:19.210

我不能肯定地说，但这听起来很像我的应用程序用户指出的问题（这就是我最终来到这里的原因，寻找线索！）。

对于我的应用程序，事实证明我需要在 Control keydown 事件和 C（在本例中用于复制）keydown 之间放置一些延迟。当作为单个组合同时发送时，结果非常不可预测。

[http://www.strokesplus.com/forum/topic.asp?whichpage=1&TOPIC_ID=477#1024](http://www.strokesplus.com/forum/topic.asp?whichpage=1&TOPIC_ID=477#1024)

# c# - C#中的字符串子集匹配

> ID：11049724
> 
> 赞同：1
> 
> 时间：2012-06-15T11:20:47.810
> 
> 标签：c#, regex, string

好的，我有一个自动完成/字符串匹配问题要解决。我有一个用户在文本框中输入的表达式字符串，例如

![在此处输入图像描述](../Images/5562af0086c871b5cd37589074e2990d.png)

**更多详情：**

表达式文本框有字符串

> “买一些铝”

客户端在模糊匹配后有一个服务器给出的建议列表，该列表填充一个列表框

> 全麦麸、杏仁、字母意大利面

现在在 GUI 上，我有一个很好的智能感知风格的自动完成功能，但我需要连接“TAB”动作来完成。因此，如果用户按 TAB 并且“All Bran”是最重要的建议，则字符串变为

> “买一些全麦麸”

例如字符串“Al”被替换为顶部匹配“All Bran”

这不仅仅是在表达式上拆分一个简单的字符串来匹配建议，因为表达式文本可能是这样的

> “买一些全麦麸和铝”

有建议

> 字母意大利面

在这种情况下，我希望最终的 Al 被顶级匹配替换，因此结果变为

> “买一些全麦麸和字母意大利面”

我想知道如何在 C# 中简单地执行此操作（只是 C# 字符串操作，而不是 GUI 代码），而无需返回服务器并要求进行替换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T14:45:25.310

您可以使用正则表达式执行此操作，但似乎没有必要。以下解决方案假定建议总是以空格开头（或从句子的开头开始）。如果不是这种情况，那么您将需要分享更多示例以制定规则。

```
string sentence = "Buy some Al";
string selection = "All Bran";
Console.WriteLine(AutoComplete(sentence, selection));

sentence = "Al";
Console.WriteLine(AutoComplete(sentence, selection));

sentence = "Buy some All Bran and Al";
selection = "Alphabetti Spaghetti";
Console.WriteLine(AutoComplete(sentence, selection)); 
```

这是`AutoComplete`方法：

```
public string AutoComplete(string sentence, string selection)
{
    if (String.IsNullOrWhiteSpace(sentence))
    {
        throw new ArgumentException("sentence");
    }
    if (String.IsNullOrWhiteSpace(selection))
    {
        // alternately, we could return the original sentence
        throw new ArgumentException("selection");
    }

    // TrimEnd might not be needed depending on how your UI / suggestion works
    // but in case the user can add a space at the end, and still have suggestions listed
    // you would want to get the last index of a space prior to any trailing spaces
    int index = sentence.TrimEnd().LastIndexOf(' ');
    if (index == -1)
    {
        return selection;
    }
    return sentence.Substring(0, index + 1) + selection;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:24:07.437

用于`string.Join(" and ", suggestions)`创建替换字符串，然后`string.Replace()`进行替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T11:27:05.960

您可以在数组中添加列表框项目，并在遍历数组时，一旦找到匹配项，就打破循环并退出循环并显示输出。

# java - 播放错误 - org.lwjgl.LWJGLException: X 错误

> ID：11049727
> 
> 赞同：1
> 
> 时间：2012-06-15T11:21:00.377
> 
> 标签：java, lwjgl, playn, x11

经过大量工作，现在我能够理解 playn 环境。现在一切都很好，但是，当我进入时：

mvn install (从主目录) (或) mvn java/pom.xml test -Ptest-java

我收到以下错误。我用这个更新了 pom.xml （java目录）

```
<!-- unpack LWJGL when testing -->
  <plugin>
    <groupId>com.googlecode.mavennatives</groupId>
    <artifactId>maven-nativedependencies-plugin</artifactId>
    <version>0.0.6</version>
    <executions>
      <execution>
        <id>unpacknatives</id>
        <phase>test-compile</phase>
        <goals><goal>copy</goal></goals>
      </execution>
    </executions>
  </plugin> 
```

然后，同样的错误，任何人都可以指导我

```
 main:
 [java] failed to create drawable
 [java] Exception in thread "main" java.lang.RuntimeException: org.lwjgl.LWJGLException: X Error - disp: 0xa0b7cc8 serial: 91 error: BadGC (invalid GC parameter) request_code: 60 minor_code: 0
 [java]     at playn.java.JavaGLContext.initGL(JavaGLContext.java:183)
 [java]     at playn.java.JavaGraphics.init(JavaGraphics.java:155)
 [java]     at playn.java.JavaPlatform.run(JavaPlatform.java:218)
 [java]     at playn.core.PlayN.run(PlayN.java:37)
 [java]     at main.java.ExampleJava.main(ExampleJava.java:13)
 [java] Caused by: org.lwjgl.LWJGLException: X Error - disp: 0xa0b7cc8 serial: 91 error: BadGC (invalid GC parameter) request_code: 60 minor_code: 0
 [java]     at org.lwjgl.opengl.LinuxDisplay.globalErrorHandler(LinuxDisplay.java:316)
 [java]     at org.lwjgl.opengl.LinuxKeyboard.nSetDetectableKeyRepeat(Native Method)
 [java]     at org.lwjgl.opengl.LinuxKeyboard.setDetectableKeyRepeat(LinuxKeyboard.java:152)
 [java]     at org.lwjgl.opengl.LinuxKeyboard.destroy(LinuxKeyboard.java:163)
 [java]     at org.lwjgl.opengl.LinuxDisplay.destroyKeyboard(LinuxDisplay.java:1190)
 [java]     at org.lwjgl.input.Keyboard.destroy(Keyboard.java:349)
 [java]     at org.lwjgl.opengl.Display.destroyWindow(Display.java:349)
 [java]     at org.lwjgl.opengl.Display.access$400(Display.java:62)
 [java]     at org.lwjgl.opengl.Display$5.destroy(Display.java:860)
 [java]     at org.lwjgl.opengl.Display.create(Display.java:880)
 [java]     at org.lwjgl.opengl.Display.create(Display.java:782)
 [java]     at org.lwjgl.opengl.Display.create(Display.java:764)
 [java]     at playn.java.JavaGLContext.initGL(JavaGLContext.java:173)
 [java]     ... 4 more
 [java] Java Result: 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T00:34:54.283

事实：Linux 64 位 + LWJGL = 问题

如果您使用的是 64 位 Linux，请一一尝试：

*   升级到最新版LWJGL(2.8.4)
*   安装 OpenJDK7 64 位并将其作为默认 jvm
*   我相信有第三个修复，但忘记了它是什么。当我找到它时，我会编辑它。

如果您使用的是 32 位 Linux，那么这些都无济于事。

# iphone - NSMutableString 与 NSString 的用法？

> ID：11049729
> 
> 赞同：4
> 
> 时间：2012-06-15T11:21:10.543
> 
> 标签：iphone, objective-c, ios, nsstring

我对字符串的使用`NSString`感到困惑。`NSMutable`假设我在类中声明了实例变量一和二，如下所示：

```
NSString *one;
NSMutableString *two; 
```

让我们假设我已经使用属性创建了它们的 setter 和 getter。

假设我已经改变了我的“两个”字符串，如下所示：

```
 1\. [two appendString:@"more string"];
     2\. two = @"string"
     3\. self.two = @"string" 
```

问题：

1.  第一行会释放先前的字符串并分配新对象并为其赋值。如果是，那么这是否意味着在这种情况下创建 getter 和 setter 是不必要的？或者它没有必要在`NSMutablestring`

2.  在这种情况下，之前分配的字符串对象会被释放吗？

3.  可以肯定的是，当我们在这里调用 setter 时，第一个对象会被释放。这段代码是否必要，或者我们可以使用代码行 2 来分配字符串。

现在关于`NSString`：也可以像这样修改字符串：

```
 one = [one stringByAppendingString:@" more string"];
    self.one = [one stringByAppendingString:@" more string"]; 
```

哪个更好用`NSMutablestring`or `NSString`？

对不起，很长的帖子，但我需要了解这些概念。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T11:23:30.587

对于您问题的第一部分：

1.  几乎绝对不是。我希望内存将被动态分配，而不是释放和重新分配。

2.  如果前面的答案是否定的，那么这也是否定的。

3.  第二个和第三个选项甚至不适用于警告`Incompatible pointer types assigning NSMutableString to NSString`

我希望`NSMutableString`在内存方面会稍微更有效，因为您在早期就表明程序可能需要动态内存。`NSString`可能会被分配一个大小合适的内存块。

您的观点`NSMutableString`似乎是`stringBy..`NSString 的方法会做什么：

使用`NSString`及其`stringBy...`方法，您正在创建新对象，释放旧对象（如果需要）并使新对象自动释放。（如果您从非自动释放更改为自动释放，请注意，您的 dealloc 中可能有一个不再需要的释放）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T18:51:17.907

NSString 是一个不可变的字符串对象，这意味着，在初始化之后，您无法更改它，NSMutableString 是可变的，这意味着您可以将另一个字符串附加到它或进行其他修改。

当你这样做时`[two appendString:@"more string"]`，指针仍然指向内存中的相同位置，你不必担心分配或释放。

当你这样做时`two = @"string"`，这意味着你让你的字符串指针指向内存中的特定位置，该位置包含内部带有值“string”的静态字符串。

当你这样做时`self.two = @"string"`，你已经声明了一个名为 two 的属性。通过在 xcode 中使用属性，您不必担心内存，因为您已经在属性声明中指定了。这是 xcode 提供给你的一个很好的工具，你绝对应该尽可能地使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T11:36:20.640

`NSMutableString`将节省一些内存，因为`NSString`对象始终是常量。因此，将新值重新分配给`NSString`变量将为新字符串分配新内存。

但是，请注意您的代码中的一些错误。在向对象发送消息之前，您必须初始化对象：

```
// this won't work
NSString *one; 
[one stringByAppendingString:@"more string"];

// nor this
NSMutableString *two;
[two appendString:@"more string"];

// first do this: 
NSString *one = @"an initial string constant"; // or
NSString *one = [NSString string]; 

NSMutableString *two = [NSMutableString string]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-15T11:46:43.817

`NSString`对象是不可变的，这意味着当您“修改” a 时，`NSString`您实际上是在创建一个新字符串而不是修改旧字符串，这不是很有效。随着`NSMutableString`字符串保存在缓冲区中，可以修改。

所以简单的规则是，如果您需要以任何方式修改字符串，请使用 a `NSMutableString`and if not `NSString`。您也可以将 a`NSMutableString`转换为 a`NSString`但不能反过来（然后您需要制作副本）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-07T09:15:17.970

NSMutableString 和 NSString 的区别在于：

NSMutableString：NSMutableString 对象提供了修改它们所代表的底层字符数组的方法，而 NSString 没有。例如，NSMutableString 公开了 appendString、deleteCharactersInRange、insertString、replaceOccurencesWithString 等方法。所有这些方法都对存在于内存中的字符串进行操作。我们可以在运行时更改字符串对象的值。

NSString：另一方面，如果你愿意，它只是一个创建一次然后只读的字符串；您会发现它的所有“操作”方法（子字符串、大写字符串等）都返回其他 NSString 对象，并且从未实际修改内存中的现有字符串。

# c# - 哪个平台最好的套件软件开发 C#.net,WPF,MFC

> ID：11049731
> 
> 赞同：-4
> 
> 时间：2012-06-15T11:21:33.973
> 
> 标签：c#, .net, wpf, mfc

我是软件开发的新手，请您给我一些关于其他软件开发人员最常使用的平台的信息。

我正在寻找开发具有 DB Connectivity 和有吸引力的可定制 UI 的软件。请推荐其他成功的软件开发人员目前在 IT 行业中使用的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T11:27:41.833

如果你真的是学习新手，请尝试阅读几本关于 C#、WPF、MFC 的书籍并使用它。选择一个更有趣的工作，这会促使你学到很多东西。如果您进入工业领域，那么您的项目需求大多会驱使您做出特定的选择。

但是正如我所提到的，如果您想成功，请学习一种对您来说很有趣的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T11:27:04.830

没有最好的开发平台。如果是这样，每个开发人员都应该使用它进行开发，而不是使用许多不同的工具和平台。每个平台都有其优点和缺点。我个人会推荐你c#。它很容易开始。它的开发环境（visual studio）非常适合界面设计（尤其是windows窗体开发），非常适合开始学习面向对象的方法，这在软件开发中非常重要。如果你能澄清你需要更多，也许我可以推荐其他东西。如果您想开发 Web 应用程序，有许多 Web 开发工具。Dreamviewer 比 Visual Studio 更容易开始设计 Web 应用程序。

# c++ - 2 在没有任何循环或递归或库函数的情况下提升到 n 次幂

> ID：11049736
> 
> 赞同：-4
> 
> 时间：2012-06-15T11:21:43.317
> 
> 标签：c++, templates

下面的程序在不使用任何循环、运行时递归或库函数 [pow] 的情况下计算 2 的 n 次幂。
它使用***模板元编程***技术。

```
#include <iostream>
using namespace std;

template<int n> struct funStruct
{
    enum { val = 2*funStruct<n-1>::val };
};

template<> struct funStruct<0>
{
    enum { val = 1 };
};

int main()
{
    cout << funStruct<8>::val << endl;
    return 0;
} 
```

**我在徘徊，我可以使用功能代替结构吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T11:35:13.950

正如@tdammes 指出的那样，显而易见的解决方案只是一种非迭代非递归方法：

```
constexpr int pow2( unsigned pwr ) {
   return 1 << per;
} 
```

通过使用`constexpr`编译器将在编译时计算结果并产生一个编译时间常数。如果您仍想使用递归，您可以：

```
constexpr int pow2( unsigned pwr ) {
   return pwr==0? 1 : 2*pow2(pwr-1);
} 
```

这与您的元编程技巧基本相同的编译时递归，以稍微更简洁和易于阅读的方式。当然，使用`constexpr`需要 C++11，所以如果你没有它，你总是可以使用原始的元编程技巧，或者采用 @tdammers 方法：

```
template <unsigned int N>
struct pow2 {
   static const unsigned int value = 1 << N;
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T11:28:06.310

这是一种显而易见的解决方案：

```
unsigned int power_of_two(unsigned int power) {
    return (1 << power);
} 
```

您可以支持带符号的幂，但这在整数数学中毫无意义，因为 2 的所有负幂都小于 1 并且会截断为 0。

# javascript - 如何避免显示'#'？

> ID：11049741
> 
> 赞同：2
> 
> 时间：2012-06-15T11:21:59.670
> 
> 标签：javascript

当我点击：

```
<a href="#" onclick="plus();">+ 1 </a> 
```

然后在地址栏中除了 URL ( example.com/index.php?id=1# ) 之外还会出现“#”。

有没有办法避免这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T11:22:32.083

您可以添加`return false`. 它将阻止默认操作。

```
<a href="#" onclick="plus(); return false;">+ 1</a> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-15T11:23:07.887

或这个：

```
<a href="javascript:plus();">+ 1 </a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T11:31:55.230

使用 preventDefault(); 而不是返回false。

因为这里解释的原因。 [http://fuelyourcoding.com/jquery-events-stop-misusing-return-false/](http://fuelyourcoding.com/jquery-events-stop-misusing-return-false/)

# linux - 如何从多个文件中剪切多个列并将输出打印到不同的文件

> ID：11049748
> 
> 赞同：12
> 
> 时间：2012-06-15T11:22:32.723
> 
> 标签：linux, shell, unix, cut

我有几个文件，我只想从中获取特定的列。目前，我正在使用以下代码：

```
$cut -f 1,2,5 AD0062-C.vcf > cutAD0062.txt 
```

但是，为了加快这个过程，我想知道是否可以在多个文件中剪切相同的列（字段 1、2、5），然后将输出打印到几个不同的文件中。即文件AD0063-C.vcf、AD0064-C.vcf、AD0065-C.vcf的第1、2、5列应该输出结果到单独的文件：cutAD0063.txt、cutAD0064.txt、cutAD0065.txt？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-15T11:27:39.960

您可以编写一个 for...循环：

```
for i in AD*-C.vcf
do
    cut -f 1,2,5 $i > cut${i%-C.vcf}.txt
done 
```

# java - java：如何通过类加载器获取单例实例

> ID：11049749
> 
> 赞同：0
> 
> 时间：2012-06-15T11:22:34.537
> 
> 标签：java, singleton, classloader

假设，我`ClassLoader`在运行时加载类：

```
Class<MyInterface> clazz = (Class<MyInterface>)getClass().getClassLoader().loadClass("ImplementerOfMyInterface"); 
```

然后我可以创建的新实例

```
MyInterface myInt = clazz.newInstance(); 
```

但是，当我需要通过其名称获取单例实例`MyInterface`而不是创建新实例时，应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T11:25:40.817

`newInstance`您可以调用静态“getInstance”方法（或您使用的任何单例 getter 方法名称），而不是调用。

例如：

```
public class ReflectTest {

    public static void main(String[] args) throws Exception {
        Class clazz = Class.forName("ReflectTest");
        Method m = clazz.getDeclaredMethod("getInstance", null);
        Object o = m.invoke(null, null);
        System.out.println(o == INSTANCE);
    }

    public static ReflectTest getInstance() {
        return INSTANCE;
    }

    private static final ReflectTest INSTANCE = new ReflectTest();

    private ReflectTest() {
    }

} 
```

# javascript - Salesforce 中的命令链接重新渲染

> ID：11049752
> 
> 赞同：0
> 
> 时间：2012-06-15T11:22:57.743
> 
> 标签：javascript, ajax, salesforce, apex-code, visualforce

我正在为 force.com 网站开发一个 visualforce 页面。我正在使用 apex 命令链接执行一些操作。代码如下：

```
 <ul>
    <li class="pill-none"><span>
            <apex:commandLink action="{!processOnSelected}" reRender="windowOpenPanel">Print
            <apex:param name="commandAtt" value="print"/>
            </apex:commandLink>
   </span>
   <apex:outputPanel id="windowOpenPanel">
    <apex:outputPanel rendered="{!isOpen}">
    <script type="text/javascript">
        window.open('http://invoicedetails.dev.cs16.force.com/EnterCode/InvoicePDF?invoiceId={!idString}');
    </script>
    </apex:outputPanel>
</apex:outputPanel>

</li></ul> 
```

但不会使用类方法 processOnSelected()。它给出了js错误

> actionUrl.indexOf 不是函数

下面是我的控制器方法代码：

公共无效进程OnSelected（）{

```
 String command = Apexpages.currentPage().getParameters().get('commandAtt');
    idString = '';
    isOpen=true;
    Set<Id> selectedIdSet = new Set<Id>();
    if (command=='print' || command=='payment') {

        //wfdList = new List<WrapForDescription>();
        //System.debug('__wfdList__'+wfdList); 
        for(WrapForDescription tmpList : wfdList) {

           if(tmpList.checked) {
               //WrapForDescription selected = new WrapForDescription();
               //selected.wrapOpp = tmpList.wrapOpp;
               //wfdList.add(selected);
               selectedIdSet.add(tmpList.wrapOpp.Id);
               idString+= tmpList.wrapOpp.Id+',';
               //System.debug('__True__');
           }
        }
        idString = idString.substring(0, idString.length()-1);
    }
    else if (command=='onePDF') {

        idString = id;
    }

    Blob idBlob = Blob.valueOf(idString);
    idString = Encodingutil.base64Encode(idBlob);

    System.debug('__idString__'+idString);
    System.debug('__selectedIdSet__'+selectedIdSet);

    if (command=='payment') {

        page = 'beforePaymentAll';
        AggregateResult oppSumAmount = [select SUM(Amount) total from Opportunity where Id IN :selectedIdSet];
        //accObj = [select Name, convertCurrency(Unpaid_Opportunity_Amount__c), convertCurrency(Paid_Opportunity_Amount__c) from Account where Id =:accId];
        unpaid_amount = (Decimal)oppSumAmount.get('total');
        oppList = [Select Id, Name, convertCurrency(Opportunity.Amount), Opportunity.CloseDate, Opportunity.CurrencyIsoCode, Opportunity.SecretCode__c From Opportunity o where Id IN :selectedIdSet order by CloseDate desc];
        oppListSize = oppList.Size();
        System.debug('__oppLineList__'+oppList);
        isOpen=false;
    }

} 
```

这是给出错误的 JS 文件：http: //invoicedetails.dev.cs16.force.com/faces/a4j/g/3_3_3.Finalorg.ajax4jsf.javascript.AjaxScript?rel= [1339862070000](http://invoicedetails.dev.cs16.force.com/faces/a4j/g/3_3_3.Finalorg.ajax4jsf.javascript.AjaxScript?rel=1339862070000)

并且错误在这一行给出

> var ask=actionUrl.indexOf('?')

我的代码有什么问题。任何人请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T19:41:11.393

请为 processOnSelected 方法发布控制器代码。我可以假设这个方法没有参数或者它是私有的。

尝试改变

```
public void processOnSelected() {
...
} 
```

至

```
public PageReference processOnSelected(string commandAtt) {
...
return null;
} 
```

# ios - Array as a Table 是否易于使用？

> ID：11049753
> 
> 赞同：0
> 
> 时间：2012-06-15T11:23:06.737
> 
> 标签：ios, uitableview

我有一个固定数据，稍后将在 UITableView 中使用，用户不会更新/添加此数据。

此数据看起来像一个有 4 列的表：

名称（字符串）| 电话 (INT) | 徽标 (URL) | PDF 文件（网址）

UITableView 将填充此数据，如果用户选择一行，他将导航到显示 PDF 文件的另一个页面。

问题是我应该使用核心数据还是数组，如果答案是数组，我怎么能在数组中有列？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:28:46.280

您可以轻松地使用内部带有 NSDictionary 的数组。两种结构都可能是可变的，您可以使用字典来模拟您所说的列。例子：

```
[myMutDict setObject:name forKey:@"name"];
[myMutDict setObject:[NSNumber numberWithInt:n] forKey:@"number"];

[myMutArray addObject:myMutDict]; 
```

我不会去 coredata

在您的 didSelectRowAtIndexPath 中，您将像这样选择您的数据：

```
NSDictionary *dict = [myMutArray objectAtIndex:indexPath.row];
NSString *name = [dict objectForKey:@"name"];
int tel = [[dict objectForKey:@"number"] intValue]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T11:31:29.457

为此，最好使用 NSMutable Array。要将此数据保存在 NSArray 中，最初您需要将每一行保存在 NSMutableDictionary 中，例如

```
NSMutableDictionary *dictionary = [[NSMutableDictionary alloc]initWithCapacity:4];
[dictionary setObject:value forKey:@"Name"];
[dictionary setObject:value forKey:@"Tel"];
[dictionary setObject:value forKey:@"Logo"];
[dictionary setObject:value forKey:@"PDF File"]; 
```

所以像这样将此字典添加到 NSMutableArray

```
[array addObject:dictionary]; 
```

您可以轻松地从数组中检索数据

# elisp - 如何诊断涉及间接缓冲区的emacs lisp问题？

> ID：11049757
> 
> 赞同：2
> 
> 时间：2012-06-15T11:23:15.297
> 
> 标签：elisp, emacs23, literate-programming

我正在使用 Dave Love 的[noweb 模式](http://www.loveshack.ukfsn.org/emacs/noweb.el)来编辑混合了 LaTeX 和 C 代码的文件。Love的模式使用他的[多模式](http://www.loveshack.ukfsn.org/emacs/multi-mode.el)在模式之间来回切换。这种切换是通过间接缓冲区完成的。

在 Emacs 21 中，该模式似乎运行良好。但是强制升级到 Emacs 23 已经暴露了问题：

1.  在模式之间进行转换时，标记会丢失。

2.  在两个不同的可见窗口中查看同一个缓冲区时，窗口 A 的移动偶尔会导致窗口 B 的移动，它也会导致窗口 B 的`point`移动。

我正在尝试诊断和修复这些故障。我设法通过在`(region-active-p)`. 但是问题 2 让我完全难住了。我什至不知道如何诊断。

我正在寻找任何帮助，但尤其是对这两个问题中的任何一个的答案：

*   我应该如何尝试诊断这个问题？

*   我在哪里可以找到对间接缓冲区语义的清晰和更完整的解释？GNU Emacs Lisp 参考手册并没有说太多，我不确定阅读源代码是最好的下一步。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T02:18:06.097

正如您可能想象的那样，语义学和 Emacs 是两个非常独立的世界。遗憾的是，同样没有“清晰完整的解释”。基本上，间接缓冲区共享它们的缓冲区文本、文本属性以及一些内部变量，同时它们保留单独的缓冲区局部变量和单独的覆盖。共享的和不共享的之间的划分在很大程度上是任意的。更糟糕的是，很少使用间接缓冲区，因此不可避免地会出现错误和无根据的假设。要追踪您的问题，最好的方法是首先提出可靠的可重复配方。我可以重现一些奇怪的行为，即基本缓冲区的标记最终成为间接缓冲区中的一个标记，所以这在某处看起来像是一个普通的错误（遗憾的是，这似乎在 24.1 中没有得到修复）。请`M-x report-emacs-bug`.

# c# - 从解决方案资源管理器中选择的项目

> ID：11049758
> 
> 赞同：6
> 
> 时间：2012-06-15T11:23:17.357
> 
> 标签：c#, .net, visual-studio-2010, vsix, vs-extensibility

我正在为 Visual Studio 2010 (vsix) 编写自定义包。

我需要做的是在解决方案资源管理器的项目节点中添加一个上下文菜单按钮。

我已经设法在右键单击项目节点时显示上下文菜单，但我的下一个挑战是获取对已单击的项目对象的引用。目前，我可以使用下面的代码通过 IDE 中的活动文档来获取项目。

```
DTE dte = (DTE)ServiceProvider.GlobalProvider.GetService(typeof(DTE));
Project project = dte.ActiveDocument.ProjectItem.ContainingProject; 
```

所以我的问题是：如何获得对解决方案资源管理器中选择的项目的类似引用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-16T06:46:09.157

我想到了。还不如分享信息。

通过使用该`SVsShellMonitorSelection`服务，我可以获得对所选层次结构的引用`IVsHierarchy`，这反过来又允许我获得对所选对象的引用。然后可以根据在解决方案资源管理器中选择的内容将其转换为`Project`、`ProjectItem`等类。便利！

```
IntPtr hierarchyPointer, selectionContainerPointer;
Object selectedObject  = null;
IVsMultiItemSelect multiItemSelect;
uint projectItemId;

IVsMonitorSelection monitorSelection = 
        (IVsMonitorSelection)Package.GetGlobalService(
        typeof(SVsShellMonitorSelection));

monitorSelection.GetCurrentSelection(out hierarchyPointer, 
                                     out projectItemId, 
                                     out multiItemSelect, 
                                     out selectionContainerPointer);

IVsHierarchy selectedHierarchy = Marshal.GetTypedObjectForIUnknown(
                                     hierarchyPointer, 
                                     typeof(IVsHierarchy)) as IVsHierarchy;

if (selectedHierarchy != null)
{
    ErrorHandler.ThrowOnFailure(selectedHierarchy.GetProperty(
                                      projectItemId,
                                      (int)__VSHPROPID.VSHPROPID_ExtObject, 
                                      out selectedObject));
}

Project selectedProject = selectedObject as Project; 
```

[这是来源](http://social.msdn.microsoft.com/Forums/en-US/vsx/thread/27342bf3-672b-455d-8155-3883ea3e0928/)

# spring - 使用 Atomikos JTA 事务管理器时，Spring 单元测试不会回滚

> ID：11049759
> 
> 赞同：5
> 
> 时间：2012-06-15T11:23:21.593
> 
> 标签：spring, jta, atomikos

我们想使用 Atomikos JTA 事务管理器。我们有一个单元测试，我们希望在它完成后回滚它，从而使表保持干净以供下次运行。

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"classpath:spring/appContext-test.xml"})
@TransactionConfiguration(transactionManager = "txManager")
public class InboundEmailDaoTest extends AbstractTransactionalJUnit4SpringContextTests {

    @Autowired
    private InboundEmailDao dao;

    @BeforeTransaction
    public void beforeTransaction() {
        System.out.println("InboundEmailDaoTest: Rows before: " + this.countRowsInTable("myapp.polin2fos_inbound_email"));
    }

    @AfterTransaction
    public void afterTransaction() {
        System.out.println("InboundEmailDaoTest: Rows after: " + this.countRowsInTable("myapp.polin2fos_inbound_email"));
    }

    @Test
    public void when_inserting_then_record_is_created() {

        String subject = "subject here";
        InboundEmail inboundEmail = new InboundEmail();
        inboundEmail.setEmailSubject(subject);
        //More here...
        inboundEmail.setOriginator("originator");
        inboundEmail.setOriginSystem("myapp");
        inboundEmail.setProcessingStatus("RECEIVED");
        inboundEmail.setAttachment("big fat attachment here");
        inboundEmail.setAttachmentFilename("Big fat attachment filename here");

        int rowsBefore  = this.countRowsInTable("myapp.polin2fos_inbound_email");

        System.out.println("Rows before: " + rowsBefore); 
        dao.insert(inboundEmail);

        int rowsAfter  = this.countRowsInTable("myapp.polin2fos_inbound_email");

        System.out.println("Rows after: " + rowsAfter);

        assertTrue((rowsAfter == rowsBefore + 1));
    }

} 
```

当我们使用 Spring 捆绑的 JTA 事务管理器运行时，配置如下

```
<tx:annotation-driven transaction-manager="txManager"/>
<bean id="txManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSource"/>
</bean> 
```

...我们得到：

```
Running co.myco.myapp.repository.dao.InboundEmailDaoTest

12:02:22.751 INFO  [main][org.springframework.beans.factory.support.DefaultListableBeanFactory] Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@13785d3: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.support.PropertySourcesPlaceholderConfigurer#0,caseTypeDaoImpl,inboundEmailDaoImpl,inboundEmailRepositoryImpl,propertyPlaceholderConfigurer,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,txManager,dataSource,org.mybatis.spring.mapper.MapperScannerConfigurer#0,sqlSessionFactory,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0,caseTypeMapper,inboundEmailMapper]; root of factory hierarchy
12:02:22.798 INFO  [main][org.springframework.jdbc.datasource.DriverManagerDataSource] Loaded JDBC driver: oracle.jdbc.OracleDriver
InboundEmailDaoTest: Rows before: 0
12:02:23.770 INFO  [main][org.springframework.test.context.transaction.TransactionalTestExecutionListener] Began transaction (1): transaction manager [org.springframework.jdbc.datasource.DataSourceTransactionManager@8e4805]; rollback [true]
Rows before: 0
12:02:23.832 DEBUG [main][com.myco.repository.mybatis.InboundEmailMapper.insert] ooo Using Connection [oracle.jdbc.driver.T4CConnection@44d990]
12:02:23.835 DEBUG [main][com.myco.repository.mybatis.InboundEmailMapper.insert] ==>  Preparing: insert into myapp.polin2fos_inbound_email (EMAIL_SUBJECT, RECEIVED_DATE, ORIGINATOR, ORIGIN_SYSTEM, PROCESSING_STATUS, ATTACHMENT, ATTACHMENT_FILENAME) values (?, sysdate, ?, ?, ?, ?, ?) 
12:02:23.888 DEBUG [main][com.myco.repository.mybatis.InboundEmailMapper.insert] ==> Parameters: subject here(String), originator(String), myapp(String), RECEIVED(String), big fat attachment here(String), Big fat attachment filename here(String)
Rows after: 1
12:02:23.927 INFO  [main][org.springframework.test.context.transaction.TransactionalTestExecutionListener] Rolled back transaction after test execution for test context [[TestContext@1958cc2 testClass = InboundEmailDaoTest, testInstance = co.myco.myapp.repository.dao.InboundEmailDaoTest@14c28db, testMethod = when_inserting_then_record_is_created@InboundEmailDaoTest, testException = [null], mergedContextConfiguration = [MergedContextConfiguration@10e687b testClass = InboundEmailDaoTest, locations = '{classpath:spring/appContext-test.xml}', classes = '{}', activeProfiles = '{}', contextLoader = 'org.springframework.test.context.support.DelegatingSmartContextLoader']]]
InboundEmailDaoTest: Rows after: 0
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.252 sec 
```

但是当我们使用配置如下的 Atomikos 事务管理器运行时：

```
<bean id="txManager" class="org.springframework.transaction.jta.JtaTransactionManager">
    <property name="transactionManager" ref="AtomikosTransactionManager" />
    <property name="userTransaction" ref="AtomikosUserTransaction" />
</bean>

<!-- ATOMIKOS Transaction-Manager-Specific Setup -->
<bean id="AtomikosTransactionManager"
      class="com.atomikos.icatch.jta.UserTransactionManager"
      init-method="init" destroy-method="close">

    <!-- when close is called, should we force
         transactions to terminate or not? -->
    <property name="forceShutdown" value="false" />
</bean>

<bean id="AtomikosUserTransaction"
      class="com.atomikos.icatch.jta.UserTransactionImp">
    <property name="transactionTimeout" value="300" />
</bean> 
```

...我们得到：

```
Running co.myco.myapp.repository.dao.InboundEmailDaoTest
12:12:42.267 INFO  [main][org.springframework.beans.factory.support.DefaultListableBeanFactory] Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@13785d3: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.support.PropertySourcesPlaceholderConfigurer#0,caseTypeDaoImpl,inboundEmailDaoImpl,inboundEmailRepositoryImpl,propertyPlaceholderConfigurer,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,txManager,AtomikosTransactionManager,AtomikosUserTransaction,dataSource,org.mybatis.spring.mapper.MapperScannerConfigurer#0,sqlSessionFactory,org.springframework.context.annotation.ConfigurationClassPostProcessor$ImportAwareBeanPostProcessor#0,caseTypeMapper,inboundEmailMapper]; root of factory hierarchy
12:12:42.310 INFO  [main][org.springframework.jdbc.datasource.DriverManagerDataSource] Loaded JDBC driver: oracle.jdbc.OracleDriver
12:12:42.853 INFO  [main][com.atomikos.logging.LoggerFactory] Using Slf4J for logging.
12:12:42.854 WARN  [main][com.atomikos.icatch.config.UserTransactionServiceImp] No properties path set - looking for transactions.properties in classpath...
12:12:42.855 WARN  [main][com.atomikos.icatch.config.UserTransactionServiceImp] transactions.properties not found - looking for jta.properties in classpath...
12:12:42.855 WARN  [main][com.atomikos.icatch.config.UserTransactionServiceImp] Failed to open transactions properties file - using default values
12:12:42.893 INFO  [main][com.atomikos.persistence.imp.FileLogStream] Starting read of logfile C:\Code\unblocking-workspace-29-05-12\myapp-master\myapp-repository\.\tmlog47.log
12:12:42.893 INFO  [main][com.atomikos.persistence.imp.FileLogStream] Done read of logfile
12:12:42.893 INFO  [main][com.atomikos.persistence.imp.FileLogStream] Logfile closed: C:\Code\unblocking-workspace-29-05-12\myapp-master\myapp-repository\.\tmlog47.log
12:12:42.899 INFO  [main][com.atomikos.icatch.config.imp.AbstractUserTransactionService] USING core version: 3.8.0
12:12:42.899 INFO  [main][com.atomikos.icatch.config.imp.AbstractUserTransactionService] USING com.atomikos.icatch.console_file_name = tm.out
12:12:42.900 INFO  [main][com.atomikos.icatch.config.imp.AbstractUserTransactionService] USING com.atomikos.icatch.console_file_count = 1
12:12:42.900 INFO  [main][com.atomikos.icatch.config.imp.AbstractUserTransactionService] USING com.atomikos.icatch.automatic_resource_registration = true
12:12:42.900 INFO  [main][com.atomikos.icatch.config.imp.AbstractUserTransactionService] USING com.atomikos.icatch.client_demarcation = false
12:12:42.900 INFO  [main][com.atomikos.icatch.config.imp.AbstractUserTransactionService] USING com.atomikos.icatch.threaded_2pc = false
12:12:42.900 INFO  [main][com.atomikos.icatch.config.imp.AbstractUserTransactionService] USING com.atomikos.icatch.serial_jta_transactions = true
12:12:42.900 INFO  [main][com.atomikos.icatch.config.imp.AbstractUserTransactionService] USING com.atomikos.icatch.log_base_dir = .\
12:12:42.900 INFO  [main][com.atomikos.icatch.config.imp.AbstractUserTransactionService] USING com.atomikos.icatch.console_log_level = WARN
12:12:42.900 INFO  [main][com.atomikos.icatch.config.imp.AbstractUserTransactionService] USING com.atomikos.icatch.max_actives = 50
12:12:42.900 INFO  [main][com.atomikos.icatch.config.imp.AbstractUserTransactionService] USING com.atomikos.icatch.checkpoint_interval = 500
12:12:42.900 INFO  [main][com.atomikos.icatch.config.imp.AbstractUserTransactionService] USING com.atomikos.icatch.enable_logging = true
12:12:42.900 INFO  [main][com.atomikos.icatch.config.imp.AbstractUserTransactionService] USING com.atomikos.icatch.output_dir = .\
12:12:42.900 INFO  [main][com.atomikos.icatch.config.imp.AbstractUserTransactionService] USING com.atomikos.icatch.log_base_name = tmlog
12:12:42.900 INFO  [main][com.atomikos.icatch.config.imp.AbstractUserTransactionService] USING com.atomikos.icatch.console_file_limit = -1
12:12:42.900 INFO  [main][com.atomikos.icatch.config.imp.AbstractUserTransactionService] USING com.atomikos.icatch.max_timeout = 300000
12:12:42.900 INFO  [main][com.atomikos.icatch.config.imp.AbstractUserTransactionService] USING com.atomikos.icatch.tm_unique_name = 100.100.100.100.tm
12:12:42.900 INFO  [main][com.atomikos.icatch.config.imp.AbstractUserTransactionService] USING java.naming.factory.initial = com.sun.jndi.rmi.registry.RegistryContextFactory
12:12:42.900 INFO  [main][com.atomikos.icatch.config.imp.AbstractUserTransactionService] USING java.naming.provider.url = rmi://localhost:1099
12:12:42.900 INFO  [main][com.atomikos.icatch.config.imp.AbstractUserTransactionService] USING com.atomikos.icatch.service = com.atomikos.icatch.standalone.UserTransactionServiceFactory
12:12:42.900 INFO  [main][com.atomikos.icatch.config.imp.AbstractUserTransactionService] USING com.atomikos.icatch.force_shutdown_on_vm_exit = false
12:12:42.900 INFO  [main][com.atomikos.icatch.config.imp.AbstractUserTransactionService] USING com.atomikos.icatch.default_jta_timeout = 10000
12:12:42.906 INFO  [main][org.springframework.transaction.jta.JtaTransactionManager] Using JTA UserTransaction: com.atomikos.icatch.jta.UserTransactionImp@1568654 
12:12:42.906 INFO  [main][org.springframework.transaction.jta.JtaTransactionManager] Using JTA TransactionManager: com.atomikos.icatch.jta.UserTransactionManager@18d30fb
InboundEmailDaoTest: Rows before: 1
12:12:43.149 DEBUG [main][com.atomikos.icatch.imp.BaseTransactionManager] getCompositeTransaction() returning NULL!
12:12:43.149 DEBUG [main][com.atomikos.icatch.imp.BaseTransactionManager] getCompositeTransaction() returning NULL!
12:12:43.149 DEBUG [main][com.atomikos.icatch.imp.BaseTransactionManager] getCompositeTransaction() returning NULL!
12:12:43.165 DEBUG [main][com.atomikos.icatch.imp.CoordinatorImp] Coordinator 100.100.100.100.tm0000100049 entering state: ACTIVE
12:12:43.170 DEBUG [main][com.atomikos.icatch.imp.thread.TaskManager] TaskManager: initializing...
12:12:43.170 INFO  [main][com.atomikos.icatch.imp.thread.TaskManager] THREADS: using JDK thread pooling...
12:12:43.176 DEBUG [main][com.atomikos.icatch.imp.thread.TaskManager] THREADS: using executor class com.atomikos.icatch.imp.thread.Java15ExecutorFactory$Executor
12:12:43.177 DEBUG [main][com.atomikos.icatch.imp.thread.Java15ExecutorFactory] (1.5) executing task: com.atomikos.timing.PooledAlarmTimer@160bf50
12:12:43.177 DEBUG [main][com.atomikos.icatch.imp.thread.ThreadFactory] ThreadFactory: creating new thread: Atomikos:0
12:12:43.178 DEBUG [main][com.atomikos.icatch.imp.TransactionServiceImp] Creating composite transaction: 100.100.100.100.tm0000100049
12:12:43.182 INFO  [main][com.atomikos.icatch.imp.BaseTransactionManager] createCompositeTransaction ( 300000 ): created new ROOT transaction with id 100.100.100.100.tm0000100049
12:12:43.185 INFO  [main][org.springframework.test.context.transaction.TransactionalTestExecutionListener] Began transaction (1): transaction manager [org.springframework.transaction.jta.JtaTransactionManager@ed9f47]; rollback [true]
Rows before: 1
12:12:43.376 DEBUG [main][co.myco.myapp.repository.mybatis.InboundEmailMapper.insert] ooo Using Connection [oracle.jdbc.driver.T4CConnection@96ad7c]
12:12:43.379 DEBUG [main][co.myco.myapp.repository.mybatis.InboundEmailMapper.insert] ==>  Preparing: insert into myapp.polin2fos_inbound_email (EMAIL_SUBJECT, RECEIVED_DATE, ORIGINATOR, ORIGIN_SYSTEM, PROCESSING_STATUS, ATTACHMENT, ATTACHMENT_FILENAME) values (?, sysdate, ?, ?, ?, ?, ?) 
12:12:43.429 DEBUG [main][co.myco.myapp.repository.mybatis.InboundEmailMapper.insert] ==> Parameters: subject here(String), originator(String), myapp(String), RECEIVED(String), big fat attachment here(String), Big fat attachment filename here(String)
12:12:43.494 INFO  [main][org.springframework.beans.factory.xml.XmlBeanDefinitionReader] Loading XML bean definitions from class path resource [org/springframework/jdbc/support/sql-error-codes.xml]
12:12:43.529 INFO  [main][org.springframework.jdbc.support.SQLErrorCodesFactory] SQLErrorCodes loaded: [DB2, Derby, H2, HSQL, Informix, MS-SQL, MySQL, Oracle, PostgreSQL, Sybase]
12:12:43.532 DEBUG [main][com.atomikos.icatch.imp.BaseTransactionManager] getCompositeTransaction()  returning instance with id 100.100.100.100.tm0000100049
12:12:43.532 DEBUG [main][com.atomikos.icatch.imp.BaseTransactionManager] getCompositeTransaction()  returning instance with id 100.100.100.100.tm0000100049
12:12:43.532 DEBUG [main][com.atomikos.icatch.imp.BaseTransactionManager] getCompositeTransaction()  returning instance with id 100.100.100.100.tm0000100049
12:12:43.532 DEBUG [main][com.atomikos.icatch.imp.BaseTransactionManager] getCompositeTransaction()  returning instance with id 100.100.100.100.tm0000100049
12:12:43.533 DEBUG [main][com.atomikos.icatch.imp.CoordinatorImp] Coordinator 100.100.100.100.tm0000100049 entering state: ABORTING
12:12:43.534 DEBUG [main][com.atomikos.icatch.imp.CoordinatorImp] Coordinator 100.100.100.100.tm0000100049 entering state: TERMINATED
12:12:43.534 DEBUG [main][com.atomikos.icatch.imp.CoordinatorImp] Coordinator 100.100.100.100.tm0000100049 : stopping timer...
12:12:43.534 DEBUG [main][com.atomikos.icatch.imp.CoordinatorImp] Coordinator 100.100.100.100.tm0000100049 : disposing statehandler TERMINATED...
12:12:43.534 DEBUG [main][com.atomikos.icatch.imp.CoordinatorImp] Coordinator 100.100.100.100.tm0000100049 : disposed.
12:12:43.536 DEBUG [main][com.atomikos.icatch.imp.CompositeTransactionImp] Ignoring error during event callback
java.lang.IllegalStateException: Transaction no longer active
at     com.atomikos.icatch.imp.TxTerminatedStateHandler.rollbackWithStateCheck(TxTerminatedStateHandler.java:106)
at com.atomikos.icatch.imp.CompositeTransactionImp.doRollback(CompositeTransactionImp.java:237)
at com.atomikos.icatch.imp.CompositeTerminatorImp.rollback(CompositeTerminatorImp.java:123)
at com.atomikos.icatch.imp.CompositeTransactionImp.rollback(CompositeTransactionImp.java:346)
at com.atomikos.icatch.imp.CompositeTransactionImp.entered(CompositeTransactionImp.java:373)
at com.atomikos.finitestates.FSMImp.notifyListeners(FSMImp.java:186)
at com.atomikos.finitestates.FSMImp.setState(FSMImp.java:277)
at com.atomikos.icatch.imp.CoordinatorImp.setState(CoordinatorImp.java:429)
at com.atomikos.icatch.imp.CoordinatorImp.setStateHandler(CoordinatorImp.java:286)
at com.atomikos.icatch.imp.CoordinatorStateHandler.rollback(CoordinatorStateHandler.java:764)
at com.atomikos.icatch.imp.ActiveStateHandler.rollback(ActiveStateHandler.java:264)
at com.atomikos.icatch.imp.CoordinatorImp.rollback(CoordinatorImp.java:747)
at com.atomikos.icatch.imp.TransactionStateHandler.rollback(TransactionStateHandler.java:179)
at com.atomikos.icatch.imp.TransactionStateHandler.rollbackWithStateCheck(TransactionStateHandler.java:197)
at com.atomikos.icatch.imp.CompositeTransactionImp.doRollback(CompositeTransactionImp.java:237)
at com.atomikos.icatch.imp.CompositeTerminatorImp.rollback(CompositeTerminatorImp.java:123)
at com.atomikos.icatch.imp.CompositeTransactionImp.rollback(CompositeTransactionImp.java:346)
at com.atomikos.icatch.jta.TransactionImp.rollback(TransactionImp.java:234)
at com.atomikos.icatch.jta.TransactionManagerImp.rollback(TransactionManagerImp.java:524)
at com.atomikos.icatch.jta.UserTransactionImp.rollback(UserTransactionImp.java:141)
at org.springframework.transaction.jta.JtaTransactionManager.doRollback(JtaTransactionManager.java:1037)
at org.springframework.transaction.support.AbstractPlatformTransactionManager.processRollback(AbstractPlatformTransactionManager.java:845)
at org.springframework.transaction.support.AbstractPlatformTransactionManager.rollback(AbstractPlatformTransactionManager.java:822)
at org.springframework.test.context.transaction.TransactionalTestExecutionListener$TransactionContext.endTransaction(TransactionalTestExecutionListener.java:518)
at org.springframework.test.context.transaction.TransactionalTestExecutionListener.endTransaction(TransactionalTestExecutionListener.java:292)
at org.springframework.test.context.transaction.TransactionalTestExecutionListener.afterTestMethod(TransactionalTestExecutionListener.java:185)
at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:406)
at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:91)
at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:236)
at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:134)
at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:113)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:103)
at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:74)
12:12:43.537 INFO  [main][com.atomikos.icatch.imp.CompositeTransactionImp] rollback() done of transaction 100.100.100.100.tm0000100049 
```

简而言之，Atomikos 似乎正在无缘无故地中止和终止我们的 Tx 中途飞行。有谁知道为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T13:30:06.547

问题可能出在您的代码片段中不存在的配置中。
数据源应包装到`com.atomikos.jdbc.AtomikosDataSourceBean`.

如果您在 DAO 实现中使用 Hibernate，则应设置一些属性，例如`hibernate.transaction.factory_class`或`hibernate.transaction.manager_lookup_class`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-02T23:21:00.850

我有一个类似的设置，这对我有用。

```
@TransactionConfiguration(transactionManager = "txManager", defaultrollback=true) 
```

您还可以使用 @Rollback(true/false) 设置单个 @Test 方法

根据您在测试中调用的内容，您可能必须在类上设置 @Transactional 或

```
@Transactional(propagation=Propagation.REQUIRES_NEW) per transaction @Test method 
```

# php - .PHP 没有 Apache

> ID：11049768
> 
> 赞同：1
> 
> 时间：2012-06-15T11:23:47.633
> 
> 标签：php, apache, .htaccess, cgi

我是相当新的所以首先请原谅我做错了什么。

我已经为我的朋友建立了一个网站，使用的技术与我自己的技术相同，但在他的主机上，.php 文件没有被读取/拾取。

> > PHP 是 CGI 还是 Apache 模块？
> 
> 在 Duport Associates Limited，PHP 作为 cgi 运行 - 这是因为它比作为 Apache 模块运行更安全（如果它作为 Apache 模块运行，PHP 以与 Apache 相同权限的同一用户身份运行）。
> 
> 这意味着 .htaccess 文件中的 php_value 指令将不起作用 - 但是我们确实允许本地 php.ini（或 php4.ini 用于 php4）文件 - 这些是纯文本文件，允许 php.ini 指令控制目录中脚本的 PHP放置文件的位置及其子目录。
> 
> 此外，诸如 AddHandler .php x-httpd-php 之类的 .htaccess 指令会破坏您的 PHP 脚本。

^^ 我在搜索他们的帮助页面时收到此消息。

此时我的代码如下所示：

```
<?php include('http://www.amberstoneinc.co.uk/php/html/start.php'); ?>

<?php include('http://www.amberstoneinc.co.uk/php/head/index.php'); ?>

<body class="index">

    <div class="container">

        <?php include("www.amberstoneinc.co.uk/php/nav/en.php"); ?>

        <div class="index-section">

            <?php include("http://www.amberstoneinc.co.uk/php/content/index.php"); ?>

            <div class="clear"></div>
        </div>

        <div class="clear"></div>
    </div>

    <?php include("http://www.amberstoneinc.co.uk/php/bg/index.php"); ?>

</body> 
```

有人可以帮助解释我应该做什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:35:37.297

您正在尝试`include`通过完整的 URL。这不仅是一个非常糟糕的主意，而且该功能可能会被禁用（我希望它无论如何都会被禁用），即使它确实有效，它也很可能不会达到您的预期。

您的代码应该是（有根据的猜测，可能不完全正确）：

```
<?php include('./php/html/start.php'); ?>

<?php include('./php/head/index.php'); ?>

<body class="index">

    <div class="container">

        <?php include("./php/nav/en.php"); ?>

        <div class="index-section">

            <?php include("./php/content/index.php"); ?>

            <div class="clear"></div>
        </div>

        <div class="clear"></div>
    </div>

    <?php include("./php/bg/index.php"); ?>

</body> 
```

要确切了解为什么会这样，您应该仔细阅读[此内容。](http://uk.php.net/manual/en/function.include.php)

为了在出现问题时看到有用的错误消息，您应该在开发时将其添加到页面顶部：

```
<?php ini_set('display_errors', 1); error_reporting(E_ALL); ?> 
```

# java - 如何正确关闭从 FileOutputStream 获得的 FileChannel

> ID：11049769
> 
> 赞同：4
> 
> 时间：2012-06-15T11:23:51.820
> 
> 标签：java, eclipse, nio, eclipse-juno

我刚刚在当前的 Ecipe Juno Release Candidate 中打开了一些旧代码，并注意到一个闪亮的新警告：资源泄漏。它是由这样的代码触发的：

```
FileChannel out = new FileOutputStream(file).getChannel();
try
{
    ...Do something with out...
}
finally
{
    out.close();
} 
```

Eclipse 认为创建的文件输出流是资源泄漏。实际上，我不确定这是否是错误警告（并且 FileChannel 的 close 方法也不会关闭流）或者这是否真的是资源泄漏。我将代码更改为：

```
FileOutputStream outStream = new FileOutputStream(file);
try
{
    FileChannel out = outStream.getChannel();
    ...Do something with out...
}
finally
{
    outStream.close();
} 
```

警告现在消失了，但现在我不确定是否必须调用 FileChannel 的 close 方法。所以也许它必须看起来像这样：

```
FileOutputStream outStream = new FileOutputStream(file);
try
{
    FileChannel out = outStream.getChannel();
    try
    {
        ...Do something with out...
    }
    finally
    {
        out.close();
    }
}
finally
{
    outStream.close();
} 
```

如果使用文件输入通道和文件输出通道，那么这会导致四个嵌套的 try...finally 块，这一切都会变得臃肿。

你怎么看？真的有必要关闭频道和流吗？还是关闭流就足够了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T11:27:58.290

啊，在FileOutputStream的close()方法的文档中找到了答案：

```
If this stream has an associated channel then the channel is closed as well. 
```

所以关闭流就足够了。

# java - 当我尝试打印时，为什么新行会附加到我的数组元素中？

> ID：11049771
> 
> 赞同：0
> 
> 时间：2012-06-15T11:23:58.277
> 
> 标签：java, arrays, string, newline

```
private int Index(String[] match,String keyword){
   int m=0;
   keyword=keyword+"1";
   match[m]=match[m]+"1";
   System.out.println("match:"+match[m]);
   System.out.println("keyword:"+keyword);
   System.out.println(match[m].equals(keyword));
   while(!(match[m].equals("")) && !(match[m].equals(null))){
           System.out.println("yes");
       if(match[m].equals(keyword)){
         break;
       }
       else
           m++;
   }
   return m;
} 
```

我得到以下输出（关键字的值是 sparktg）：

```
match:sparktg
1
keyword:sparktg1
false 
```

为什么在 match[m] 的情况下，“sparktg”和“1”之间有一个新行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:32:43.997

If you have no control over the input, you can do a `trim()` before you use the inputs. This eliminates any `\n` and spaces.

```
if(match[m] != null) {
   System.out.println("match:"+match[m].trim());
}
if(keyword != null) {
   System.out.println("keyword:"+keyword.trim());
} 
```

You can make it cleaner by writing a utility method to do this.

```
public String sanitize(String input) {
    return input != null ? input.trim() : null;
} 
```

and use it as so:

```
match[m] = sanitize(match[m]);
keyword = sanitize(keyword); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T11:34:08.973

我能看到的唯一原因是它`match[0]`已经以换行符结尾。您应该`match[0]`在添加`"1"`. 一个好的做法是以这种形式输出：

```
System.out.println("|"+match[0]+"|"); 
```

...因此使用`|`来清楚地标记您的字符串的开始和结束位置。

您可以`trim()`用来切断任何空格，包括换行符：

```
match[m] = match[m].trim() + "1"; 
```

但是，这也会删除空格和制表符，这对您来说可能是也可能不是问题。当我比较字符串时，为了安全起见，我经常先修剪两个字符串，但前提是你忽略了空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T12:07:41.813

这不是答案，而是关于代码的符号

`match[m].equals(null)`会抛出一个`NullPointerException`. 检查是否`match[m]`不等于 null 的正确方法是：`mathc[m] != null`在调用对象的任何方法之前。所以使用这个：

```
match[m] != null && !match[m].equals("") 
```

而不是这个：

```
!match[m].equals("") && !match[m].equals(null) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T11:36:03.873

尝试这个。在解析之前替换所有新行。

```
private static int Index(String[] match,String keyword){
       int m=0;

       for(int k=0;k<match.length;k++){
           if(match[k]!=null)
           match[k]= match[k].replace("\n", "");

       }
       if(keyword!=null)
           keyword= keyword.replace("\n", "");

       keyword=keyword+"1";
       match[m]=match[m]+"1";
       System.out.println("match:"+match[m]);
       System.out.println("keyword:"+keyword);
       System.out.println(match[m].equals(keyword));
       while(!(match[m].equals("")) && !(match[m].equals(null))){
               System.out.println("yes");
           if(match[m].equals(keyword)){
             break;
           }
           else
               m++;
       }
       return m;
    } 
```

# javascript - 执行在 Jquery 或 Javascript 中调用方法的无限循环的正确方法是什么？

> ID：11049777
> 
> 赞同：1
> 
> 时间：2012-06-15T11:24:07.367
> 
> 标签：javascript, jquery, loops

我有一个页面，我想每隔几秒钟就不停地更新。

为此，我写了以下内容：

```
var to;
$(function () {
           to = setTimeout(updateDivContent, 2000);
});

function updateDivContent() {

    $('#topbox').load('/home/blabla', null);

    $('#leftgraph').load('/home/blabla', null, function () {

        to = setTimeout(updateDivContent, 2000);
    });
}; 
```

这有效，但是，它导致我认为是内存泄漏，因为大约 15 分钟后，计算机几乎冻结，浏览器占用了所有可用的内存和 CPU。

我猜超时基本上是堆叠，但是，我不知道如何解决这个问题。我已经尝试摆脱第二个超时并将第一个超时放入`while(true)`循环中，但是，我就是无法让它工作。

任何人都可以提出任何建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T11:29:15.263

这实际上看起来不错。但是，如果第一个 Ajax 调用没有在两秒内完成，它将堆叠，这*可能*（不确定）会导致问题。

超时本身不会叠加，因为您只有在前一个完成后才启动一个新的。

*两个*Ajax 请求完成后，尝试启动新的超时：

```
$.when($('#topbox').load('/home/blabla'),
       $('#leftgraph').load('/home/blabla')
).then(function () {
    setTimeout(updateDivContent, 2000);
}); 
```

**参考：** [`$.when`](http://api.jquery.com/jQuery.when/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T11:27:37.730

我认为最好使用`setInterval`而不是`setTimeOut`.

看到[这个帖子](https://stackoverflow.com/questions/729921/settimeout-or-setinterval)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T11:27:40.523

您可能想调用`clearTimeout`以使先前的计时器无效，如下所示：

```
clearTimeout(to);
to = setTimeout(updateDivContent, 2000); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T11:28:52.610

你能这样吗，它会每 2 秒调用一次

```
to = setInterval("updateDivContent", 2000);

function updateDivContent() {

$('#topbox').load('/home/blabla', null);

$('#leftgraph').load('/home/blabla', null, function () {

    //to = setTimeout(updateDivContent, 2000); 
});
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-15T11:29:05.903

尝试`setInterval`：

```
var to;

$(function () {
    to = setInterval(updateDivContent, 2000);
});

function updateDivContent() {
    $('#topbox').load('/home/blabla', null);
    $('#leftgraph').load('/home/blabla')
}; 
```

# extjs - 从 Ext JS 4.1 中的列菜单重命名列标题

> ID：11049780
> 
> 赞同：4
> 
> 时间：2012-06-15T11:24:15.253
> 
> 标签：extjs, grid, extjs4.1

![在此处输入图像描述](../Images/46786c341790a264a7b1894660ee2fb1.png)

是否可以在此菜单中添加一个项目以重命名列标题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T01:40:00.047

The question seems kind of vague and I believe the image attached is throwing me off.

Customizing a grid header menu ([Answer](https://stackoverflow.com/questions/10348581/add-a-custom-button-in-column-header-dropdown-menus-extjs-4/11659872#11659872))..

See either answer.

My final product I have even customized my answer further:

```
initComponent: function () {
    this.callParent(arguments);

    this.headerCt.on('headerclick', function (header, column, event, html) {
        if (column.xtype == 'rownumberer') {
            return false;
        };

        header.showMenuBy(column.el.dom, column);
    }, this);

    this.headerCt.on('menucreate', function (header, column, event, html) {
        var menu = header.getMenu();

        this.createHeaderMenu(menu);
    }, this);
},

createHeaderMenu: function (menu) {
    menu.removeAll();

    // simulate header menu to be plain (menu is already created at this point)
    menu.addCls(Ext.baseCSSPrefix + 'menu-plain');
    menu.name = 'report_data_header_menu';

    menu.add({
        name: 'sort_asc',
        text: 'Sort Ascending'
    }, {
        name: 'sort_desc',
        text: 'Sort Descending'
    }, {
        name: 'remove_column',
        text: 'Remove'
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T05:58:49.157

你应该能够做到。

在 Ext.grid.header.Container 对象的 'menucreate' 事件上添加一个侦听器。该委托将向您传递菜单的引用，然后您可以操作菜单。

例子

```
var gridHeader = gridPanelInstance.getView().headerCt; //return the Header Container 

gridHeader.on('menucreate', function(gridHeaderContainer, menu, option) {

    // do whatever you want with the menu here...  eg: add/remove/ edit menu item
}); 
```

# jquery - 客户端发送的请求语法错误

> ID：11049783
> 
> 赞同：2
> 
> 时间：2012-06-15T11:24:23.743
> 
> 标签：jquery, spring, spring-mvc, spring-security

我正在尝试从 JSP（I-Frame）调用我的 Spring MVC 控制器并在浏览器上收到以下错误

```
400 Bad Request,The request sent by the client was syntactically incorrect () 
```

这是我向服务器发送请求的 JQuery 代码

```
jQuery("#login").live('click', function(e) {
        e.preventDefault();
           jQuery.ajax({
            url: "https://localhost:9002/myApp/springSecurity/login.json",
            xhrFields: {
                   withCredentials: true
                },
            type: "POST",
            crossDomain:true,
            data: jQuery("#loginForm").serialize(),
           contentType: "json",

            success: function(data, status) {
                alert(data);
                alert(status);
                if (data.loggedIn) {
                   // location.href = getHost() + '${ctx}/users';
                    //login_pannel

                } else {
                    loginFailed(data);
                }
            },
            error: loginFailed
        });

    }); 
```

这是我的控制器代码

```
@Controller
@RequestMapping("springSecurity/login.json")
public class SpringSecurityLoginController
{
@RequestMapping(method = RequestMethod.POST)
@ResponseBody
public SpringSecurityLoginStatus login(@RequestParam("j_username") final String username,
@RequestParam("j_password") final String password, final HttpServletRequest request, final HttpServletResponse response)
    {

    LOG.info("Starting login process");
    return springSecurityLoginService.login(username, password, request, response);
    }
} 
```

在点击提交按钮时，我在服务器上没有收到任何错误，但是在查看浏览器控制台输出时，它向我显示以下错误

```
"NetworkError: 400 Bad Request - https://localhost:9002/myApp/springSecurity/login.json" 
```

这是来自 Mozilla 响应标头的错误信息

```
the request sent by the client was syntactically incorrect (). 
```

我不确定是什么导致了这种行为。此外，我正在使用 Spring 安全性来处理身份验证和授权。

**编辑**

我进行了更多调试，发现当我检查控制器的值时表单值没有提交给我的控制器，`j_username`并且`j_password`控制器中的 tey 为空。

我什至尝试过`request.getParameter("param name");`，但仍然有相同的值作为空值出现

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T12:39:57.677

在您的 jQuery 中，尝试将“contentType”更改为“dataType”（[更多信息在这里](http://api.jquery.com/jQuery.ajax/)）。

# jquery - ajax jquery facebook打开图形标签未使用

> ID：11049786
> 
> 赞同：0
> 
> 时间：2012-06-15T11:24:33.620
> 
> 标签：jquery, ajax, facebook, facebook-opengraph, facebook-sharer

我从 xml 获取我的页面数据，我希望在共享时显示这些数据，下面是我的代码：

```
$.ajax({
            type: "GET",
            url: "data/artikels.xml",
            dataType: "xml",
            success: function(xml){
                oArticle = $(xml).find('article:eq('+id+')');
                var regExp = /.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/;
                var match = oArticle.find('youtube').text().match(regExp);  
                $('head').append('<meta property="og:title" content="'+oArticle.find('title').text()+'" />'
                    +'<meta property="og:description" content="'+oArticle.find('shortcontent').text().replace(/&/g, '&amp;').replace(/>/g, '&gt;').replace(/</g, '&lt;').replace(/"/g, '&quot;')+'" />'
                    +'<meta property="og:image" content="'+oArticle.find('image').text()+'" />').trigger('create');  
                $('#container').append('<div id="title_article">'+oArticle.find('title').text()+'</div>'
                    +'<div id="date_article">'+oArticle.find('date').text()+'</div>'
                    +'<iframe width="600" height="315" src='+'"'+'http://www.youtube.com/embed/'+match[1]
                    +'<div id="content_article">'+oArticle.find('fullcontent').text()+'</div>').trigger('create');

            }
        }) 
```

当我在 facebook 调试器中输入我的 url 时，会拍摄其他图像/标题/描述，当我分享时也会发生同样的情况。有没有办法解决这个问题？

亲切的问候

香椿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:35:41.657

Facebook 通过获取您的纯 HTML 页面来生成链接的元内容。它不会运行您的 JavaScript 代码。

您最好在后端脚本中处理此问题并在页面加载时提供元标记，而不是使用 AJAX 加载它。一般来说，如果您的站点中有一个没有用户输入的 AJAX 请求，那么您做错了，因为这可能是在将 HTML 提供给用户之前由服务器生成的。（从而减少用户浏览器必须发出的请求数量）

# ant - IVY如何查找特定的依赖配置正在使用中？

> ID：11049787
> 
> 赞同：0
> 
> 时间：2012-06-15T11:24:35.173
> 
> 标签：ant, ivy

我在一个项目中有我的 version.xml，我在其中定义了所有 IVY 配置和依赖项。我使用 ANT 脚本下载和检索人工制品，到目前为止一切正常。

我正在寻找的是，无论如何我都可以找到 version.xml 中是否存在某些配置，并且某些依赖项被配置为从 ANT 脚本中使用它，比如检查是否我想做一些额外的东西，如果它被配置为其他方式简单地跳过。例如我的 version.xml 如下所示；

```
<?xml-stylesheet type="text/xsl" href="http://repository.temenosgroup.com/xsl/version-doc.xsl"?>
<ivy-module version="2.0" xmlns:e="http://ant.apache.org/ivy/extra">
    <info organisation="TEMENOS" branch="MAIN" module="StateEngine" />
    <!-- "war->compile(*)" this means the 'war' configuration depends on the
    'compile' configuration of the dependency and if the dependency is not
    found in 'compile' then use the 'default' (same as '*') config (usually that is all dependencies) -->
    <configurations defaultconfmapping="test->test(*);compile->compile(*);componentDep->componentDep(*)">
        <conf name="test" description="Test Time dependencies"/>
        <conf name="compile" description="Build Time dependencies"/>
       <conf name="componentDep" description="To resolve component level dependencies" />
    </configurations>
    <publications>
        <artifact name="#SERVICE_NAME#" type="" ext="zip" />
        <artifact name="#SERVICE_NAME#" type="" ext="zip" e:platform="#PLATFORM_WIN#" />
        <artifact name="#SERVICE_NAME#" type="" ext="zip" e:platform="#PLATFORM_UNIX#" />
    </publications>
    <dependencies>
        ....
        <!-- Define Component Level Dependencies Below -->
        <dependency org="TEMENOS" branch="MAIN" name="StateMachine" transitive="false" rev="latest-dev" conf="componentDep" >
            <artifact name="StateMachineService" ext="zip" e:platform="#PLATFORM_WIN#" type="" conf="componentDep" />
            <artifact name="StateMachineService" ext="zip" e:platform="#PLATFORM_UNIX#" type="" conf="componentDep" />
            <artifact name="StateMachineService" ext="zip" type="" conf="componentDep" /> 
        </dependency>
    </dependencies>
</ivy-module> 
```

那么，在 ANT 中是否有任何可用的目标，例如“ivy:...”，它可以返回“true”或“false”，如何告诉我有一个依赖项正在尝试使用名为“componentDep”的配置？这样我就可以做额外的事情了……否则跳过。我不想在 ANT 中自己解析文件，因为这不是一个好主意。

注意：我使用的是 ANT 1.8.2 和 IVY 2.2.0

希望我说得通。如果您需要更多信息，请告诉我。

谢谢，

--

斯茹内霍

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T15:35:06.660

常春藤通常使用一个名为**ivy.xml**的文件来解析.....

我怀疑您的**version.xml**文件是为了替代而设计的？也许您的构建正在运行时生成常春藤文件？

# 怀疑的原因

ivy 发布的文件名似乎无效....我怀疑你创建了 3 个名为**#SERVICE_NAME#.zip的文件**

```
<publications>
    <artifact name="#SERVICE_NAME#" type="" ext="zip" />
    <artifact name="#SERVICE_NAME#" type="" ext="zip" e:platform="#PLATFORM_WIN#" />
    <artifact name="#SERVICE_NAME#" type="" ext="zip" e:platform="#PLATFORM_UNIX#" />
</publications> 
```

在您的构建中的其他地方，我认为有一个过滤副本正在进行......

# 您原来问题的可能答案

我想你正在寻找[常春藤分辨率报告](http://ant.apache.org/ivy/history/latest-milestone/use/report.html)？这将创建与每个项目配置关联的文件的 HTML 报告。使用如下：

```
<target name="init">
    <ivy:resolve/>

    <ivy:report todir='${ivy.reports.dir}' graph='false' xml='false'/>

     ..
</target> 
```

# disassembly - 大端 && 小端？

> ID：11049788
> 
> 赞同：0
> 
> 时间：2012-06-15T11:24:37.400
> 
> 标签：disassembly, endianness, objdump

谁能告诉我这句话是什么意思：

“指定目标文件的字节序。这只影响反汇编。这在反汇编不描述字节序信息的文件格式时很有用，例如 S-records。“

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T10:20:00.587

这篇[文章](http://www.gamedev.net/page/resources/_/technical/game-programming/writing-endian-independent-code-in-c-r2091)很好地解释了字节序是什么以及如何以独立于字节序的方式进行编程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:28:39.397

不同的环境以不同的方式存储数字，

大端环境首先存储最高有效字节的信息。Little endian 环境以最低有效字节优先存储信息。

现在大多数高级框架都会为您处理所有这些，但是如果您的编程处于较低级别，那么这将很重要。

看看它的[维基百科](http://en.wikipedia.org/wiki/Endianness)条目，它真的没有其他人那么糟糕

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-15T11:28:15.710

我不明白所有问题，但字节序用于描述存储整数的方式。

例如，数字 256 对于 1 个字节来说太大了，因此它在 2 个字节中表示为一个字节中的 1 和另一个字节中的 0，表示 1 * 256 加上 0 * 个单位。

这些字节的存储方式是字节序

# installation - 使用 NSIS 执行命令

> ID：11049791
> 
> 赞同：3
> 
> 时间：2012-06-15T11:24:50.943
> 
> 标签：installation, cmd, nsis

我想使用 NSIS 脚本执行一些命令，但是要使命令正常工作，我必须使用右键菜单中的“以管理员身份运行”打开命令提示符。如何使用 NSIS 脚本做到这一点。

我在用

```
 RequestExecutionLevel admin 
```

与 exec 命令一起，但这似乎不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T13:26:31.813

`RequestExecutionLevel`仅在 UAC 开启时适用于 Vista+，因此您还应该在运行时检查以涵盖其他情况：

```
Outfile RequireAdmin.exe
RequestExecutionLevel admin ;Require admin rights on NT6+ (When UAC is turned on)

!include LogicLib.nsh

Function .onInit
UserInfo::GetAccountType
pop $0
${If} $0 != "admin" ;Require admin rights on NT4+
    MessageBox mb_iconstop "Administrator rights required!"
    SetErrorLevel 740 ;ERROR_ELEVATION_REQUIRED
    Quit
${EndIf}
FunctionEnd

Page InstFile

Section
SectionEnd 
```

# mongodb - 使用 MongoId 的门卫

> ID：11049795
> 
> 赞同：0
> 
> 时间：2012-06-15T11:25:07.893
> 
> 标签：mongodb

我正在尝试让 Doorkeeper 宝石与 Mongoid 一起使用。根据他们的 github 页面（https://github.com/applicake/doorkeeper），我只需将以下内容添加到配置文件中，但是当我这样做时，我得到了错误：未定义的方法“orm”。

我做对了吗？除了添加这一行，我还需要做其他事情吗？

```
Doorkeeper.configure do
  orm :mongoid
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T07:55:04.447

我使用的是 MongoID 3，这个 gem 当前只支持 2.4。现在工作正常。

# oracle - Spring JpaTransactionManager 和 Jackrabbit 在同一个数据库上

> ID：11049796
> 
> 赞同：1
> 
> 时间：2012-06-15T11:25:10.167
> 
> 标签：oracle, spring, jpa, jackrabbit

我们在我们的项目中使用 JPA（使用 Oracle 数据库）并且还想使用 apache JackRabbit API。但是如果您使用数据库持久性管理器，则配置的数据库连接必须不受外部事务管理器的控制。Jackrabbit 在更高级别实现分布式 XA 事务支持，并期望完全控制底层数据库连接。

这个问题的解决方案是什么？

# html - 最大同时运行 web worker html5

> ID：11049797
> 
> 赞同：6
> 
> 时间：2012-06-15T11:25:15.290
> 
> 标签：html, web-worker

是否有可以同时运行的网络工作者的最大数量？非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T15:17:20.873

是和不是。使用 Web Workers，没有硬性限制，但您会受到可用 CPU 和内存的限制。

每个工人都有相当多的 CPU 和内存开销，所以如果你分拆很多工人，你可以让机器运转起来。

我会说 Web Workers 最适合用于 100 毫秒或更长时间的“长时间运行”后台任务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T17:58:29.803

w3c 没有提到任何限制（参见[http://www.w3.org/TR/workers/](http://www.w3.org/TR/workers/)）

但这取决于您想要做什么，限制将是您将运行应用程序的计算机（对您的用户友善）。

# powershell - Powershell误解文件名中的引号

> ID：11049798
> 
> 赞同：1
> 
> 时间：2012-06-15T11:25:25.170
> 
> 标签：powershell, batch-file, filenames

是的，这些文件的文件名中确实有引号。！！

我正在尝试使用 powershell 脚本运行 bat 文件。Powershell 脚本遍历文件夹并提取文件。然后它将这些文件名传递给调用 exe 来处理它们的批处理脚本。

这是powershell脚本的样子，

```
$path = "\\RemoteMachine\Japanese\files"
$filter = "*.msg"
$count = 0

Write-Host "Parsing started...";
get-childitem -recurse -path $path -filter $filter| % {
    $count++;
    & "C:\Users\uname\myfolder\runCommads.bat" "$($_.FullName)" "C:\Users\uname\myfolder\output\$count.txt"

} 
```

输入文件是使用不同的语言编写的。某些文件的名称由引号组成。当 PS 脚本运行 runCommand.bat 时，文件名中包含的空格会被误解。空格后面的 Word 被视为不同文件的名称。

但是，如果我在没有 PS 脚本的情况下运行批处理文件，那么对于一个文件名中包含引号的文件，就会给出预期的输出。

有人可以帮我解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:57:10.973

这似乎是批处理文件的问题，而不是 powershell 脚本的问题。

通常批处理解析器在空格处分割参数。
它可以通过使用引号来抑制，但如果您的文件名本身包含引号，它将再次失败。

但是您可以将文件名中的所有引号（在 powershell 脚本内）加倍，
然后应该可以在批处理文件中获得正确的文件名。

在批处理中，您需要删除双引号，但这似乎很容易。

```
set "filename=%~1"
setlocal EnableDelayedExpansion
set "filename=!filename:""="!" 
```

但我想，大多数批处理命令都会因此类文件名而失败。

# hibernate - 使用 2 个字段的休眠计数问题

> ID：11049799
> 
> 赞同：3
> 
> 时间：2012-06-15T11:25:30.927
> 
> 标签：hibernate, jpa, hql

在 SparePart 表中，行的唯一性由 materialName 和 materialNumber 的组合给出，我想要做的是获取现在可用的 Spare Parts 总数。

我尝试过使用 count(distinct ...) 但它只适用于一个字段而不是两个字段。

带有内部查询的 SQL 查询（使用休眠查询语言）如下所示：

```
select count(*) from (
     select distinct materialName, materialNo from SparePart
) as col 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T12:43:18.313

使用 subquery+group by 然后过滤代表特定组的第一个 ID，最后计算所有匹配过滤器的 ID：

```
SELECT COUNT(sp2) FROM SparePart sp2 WHERE EXISTS
  (SELECT sp.materialName, sp.materialNo
          FROM SparePart sp
          GROUP BY sp.materialName, sp.materialNo
          HAVING MIN(sp.id)=sp2.id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-21T08:11:37.837

您可以使用休眠方言来完成此任务。为此，请创建自己的方言，扩展 DB 使用[的方言（所有方言列表](http://docs.jboss.org/hibernate/orm/3.5/javadocs/org/hibernate/dialect/package-summary.html)），然后注册新功能。例如，我使用带有 InnoDB 引擎的 MySQL 5：

```
public final class MyDialect extends MySQL5InnoDBDialect {
    public MyDialect() {
        super();
        registerFunction("pairCountDistinct", new SQLFunctionTemplate(LongType.INSTANCE, "count(distinct ?1, ?2)"));
    }
} 
```

然后在persistence.xml中添加新属性：

```
<property name="hibernate.dialect" value="com.example.dialect.MyDialect" /> 
```

现在您可以使用此功能：

```
// some init actions
final CriteriaBuilder builder = entityManager.getCriteriaBuilder();
final CriteriaQuery<Long> criteria = builder.createQuery(Long.class);
final Root<SparePart> root = criteria.from(SparePart.class);
criteria.select(builder.function("pairCountDistinct", Long.class, root.get(SparePart_.materialName), root.get(SparePart_.materialNo)));
final long result = entityManager.createQuery(criteria).getSingleResult();
// some close actions 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T13:18:23.270

您可以使用 Criteria API 进行尝试。

```
ProjectionList projectionList = Projections.projectionList();        
projectionList.add(Projections.property("materialName"));
projectionList.add(Projections.property("materialNo"));

Criteria criteria = session.createCriteria(SparePart.class); 
criteria.setProjection(Projections.distinct(projectionList);  
criteria.setProjection(Projections.rowCount());

Long results = criteria.uniqueResult(); 
```

此外，它可能需要一些修改，因为我没有尝试过，根据您的查询进行映射。

# ant - 从文件中删除包含关键字的行

> ID：11049807
> 
> 赞同：14
> 
> 时间：2012-06-15T11:26:00.203
> 
> 标签：ant

我想从包含某个关键字的文本文件中删除所有行。

到目前为止，我只发现：

```
<linecontains>
    <contains value="assert"/>
</linecontains> 
```

但我不知道如何删除这些行。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-15T11:35:14.213

您将在[filterchain](http://ant.apache.org/manual/Types/filterchain.html)中使用该过滤器，在支持 filterchain 元素的任务中，即内置的 Concat、Copy、LoadFile、LoadProperties、Move 任务。

因此，例如，使用包含 linecontains 过滤器的过滤器链复制或移动文件。

使用过滤器`negate`上的参数`linecontains`排除包含该字符串的行。

例子：

```
<project default="test">
    <target name="test">
        <copy tofile="file.txt.edit" file="file.txt">
            <filterchain>
                <linecontains negate="true">
                    <contains value="assert"/>
                </linecontains>
            </filterchain>
        </copy>
    </target>
</project> 
```

前：

```
$ cat file.txt
abc
assert
def
assert
ghi assert
jkl 
```

后：

```
$ cat file.txt.edit
abc
def
jkl 
```

要回答有关应用于目录中选定文件的后续问题：

```
<copy todir="dest">
    <fileset dir="src">
        <include name="**/*.txt"/>
    </fileset>
    <filterchain>
        <linecontains negate="true">
            <contains value="assert"/>
        </linecontains>
    </filterchain>
</copy> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:34:24.920

您可以执行外部命令。

我还没有测试过，但是在 UNIX 上你可能会运行这样的东西：

```
<exec executable="sed">
    <arg value="s/assert//" />
   <arg value="YOUR_FILE" />
</exec> 
```

# javascript - 从 dwr.java 到 javascript 获取一个空对象

> ID：11049809
> 
> 赞同：0
> 
> 时间：2012-06-15T11:26:06.373
> 
> 标签：javascript, struts, dwr

这是我的 dwr.xml

```
....
<convert converter="bean" match="it.test.bean.Person"/>
<convert converter="bean" match="it.test.bean.Telephone"/>
.... 
```

这是我的班级人

```
public class Person implements Serializable{

private int id;
private String name;
private String surname;
....
//with getter and setter method 
```

我的 dwr.java 文件返回一个 Person 类型的对象数组。当我使用 javascript 读取我的 jsp 页面中的数据时，response.length 为 6，就像我的 dwr.java 中的一样，但对象为空。

我无法弄清楚错误可能出在哪里。我感谢您的任何答复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T19:25:05.220

A good way to find the problem is to go trough the check-list as indicated here: [http://directwebremoting.org/dwr/support/common_problems.html](http://directwebremoting.org/dwr/support/common_problems.html).

You should activate the debug mode in DWR and check to see if you can get any good object back [from /dwr/ url].

Please consider also add more information to your post if you still face that problem.

# java - RMI NotSerializableException 虽然它是一个远程对象

> ID：11049810
> 
> 赞同：10
> 
> 时间：2012-06-15T11:26:19.240
> 
> 标签：java, rmi

我正在编写一个基于 RMI 的小型聊天应用程序。

思路是：Client在Server上注册自己，每次Server收到一个client发来的消息，他都会把这个消息推送给其他所有的client。

但是我收到了 NotSerializableException，尽管我作为方法参数传递的对象实现了 Remote 接口。

这是一些代码：（有问题的部分是（ClientChat Implementation）中的`this`参数）`this.chatServ.registriereClient(this);`

(ClientChat) 界面：

```
public interface ChatClient extends Remote
{

} 
```

(ClientChat)实现：

```
public class ChatClientImpl implements ChatClient
{

    ChatServer chatServ;
    String clientName;

    public ChatClientImpl(String clientName, ChatServer chatServ) {
        this.chatServ = chatServ;
        this.clientName = clientName;
        try {
            this.chatServ.registriereClient(this);
        } catch (RemoteException e) {
            e.printStackTrace();
        }
    }
} 
```

(ServerChat) 接口

```
public interface ChatServer extends Remote
{
        void registriereClient(ChatClient client) throws RemoteException;

} 
```

(ServerChat) 实现

```
public class LobbyChatServerImpl implements ChatServer
{

    ArrayList<ChatClient> clientListe = null;

    @Override
    public void registriereClient(ChatClient client) {
        System.out.println("Client registriert");
        this.clientListe.add(client);
    }
} 
```

客户：

```
 public static void main(String[] args) {
        ChatServer lobbyChatServer = null;
        try {
            Registry registry = LocateRegistry.getRegistry(Server.RMI_PORT);
            lobbyChatServer = (ChatServer) registry.lookup("LobbyChatServer");

        } catch (RemoteException e) {
            e.printStackTrace();
        } catch (NotBoundException e) {
            e.printStackTrace();
        }

        ChatClient lobbyChat = new ChatClientImpl(name, lobbyChatServer);
  } 
```

服务器：

```
 public static void main(String[] args) {
        try {
            if (System.getSecurityManager() == null) {
                System.setSecurityManager(new RMISecurityManager());
            }

            Registry registry = LocateRegistry.getRegistry(RMI_PORT);

            ChatServer lobbyChatStub = (ChatServer)UnicastRemoteObject.exportObject(new LobbyChatServerImpl(), 0);
            registry.bind("LobbyChatServer", lobbyChatStub);

        } catch (RemoteException e) {
            e.printStackTrace();
        } catch (AlreadyBoundException e) {
            e.printStackTrace();
        }
    } 
```

例外：

```
java.rmi.MarshalException: error marshalling arguments; nested exception is: 
    java.io.NotSerializableException: de.XX.Chat.ChatClientImpl
    at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:156)
    at java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(RemoteObjectInvocationHandler.java:194)
    at java.rmi.server.RemoteObjectInvocationHandler.invoke(RemoteObjectInvocationHandler.java:148)
    at $Proxy0.registriereClient(Unknown Source)
    at de.XX.Chat.ChatClientImpl.<init>(ChatClientImpl.java:19)
    at de.XX.Client.main(Client.java:49)
Caused by: java.io.NotSerializableException: de.XX.Chat.ChatClientImpl
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1180)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:346)
    at sun.rmi.server.UnicastRef.marshalValue(UnicastRef.java:292)
    at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:151)
    ... 5 more 
```

如前所述，我想知道为什么我会得到这种异常，尽管 ChatClientImpl 已经是远程的。

希望你能帮我：）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-15T11:49:25.697

作为远程方法的参数或结果传递的对象必须是：

1.  可序列化（或可外部化），或

2.  *导出*的远程对象。

你的也不是。但是，由于它显然实现了您想要的远程接口 (2)。扩展的对象`UnicastRemoteObject`在构造时自动导出。不必显式导出的对象，通过`UnicastRemoteObject.exportObject()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T11:30:10.253

您可以做的是设置一个回调对象。这是一个扩展 UnicastRemoteObject 的对象，当您传递它时，它会变成一个回调。

[http://www.cs.swan.ac.uk/~csneal/InternetComputing/RMIChat.html](http://www.cs.swan.ac.uk/~csneal/InternetComputing/RMIChat.html)

* * *

[远程](http://docs.oracle.com/javase/7/docs/api/java/rmi/Remote.html)不可序列化。您不能以这种方式传递代理对象。即使您将其设为可序列化，它也会发送服务器上存在的对象的*副本*。不会调用客户端上的对象副本。

为了让您的“服务器”向您的“客户端”发送消息，您必须在“客户端”上创建一个服务以使其成为服务器。

您可能会发现使用 JMS 等消息传递解决方案更适合这种情况。JMS 服务器具有您可以发布和订阅的主题。一个简单的 JMS 服务器是 Active MQ。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-21T13:29:01.967

看起来您可能忘记在接口实现上“扩展 UnicastRemoteObject”：

```
public class ChatClientImpl extends UnicastRemoteObject implements ChatClient{
} 
```

和

```
public class LobbyChatServerImpl extends UnicastRemoteObject  implements ChatServer{
} 
```

# objective-c - UIView 和 UIImage 预加载

> ID：11049811
> 
> 赞同：1
> 
> 时间：2012-06-15T11:26:21.850
> 
> 标签：objective-c, cocoa, uiview, uiimage, preload

我有杂志应用程序，我想知道是否有任何方法可以预加载 UIView 和 UIImages？

我的观点结构：

```
MagazineView
  -> pageView
    -> imageContainerView
       -> image 
    -> imageContainerView
       -> image
    -> textView
  -> pageView
etc... 
```

所以我的问题是 - 如何在视图可见之前预加载图像？我想用 3 或 5 页制作一些缓存，并制作用于加载视图的线程。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:49:12.167

我认为“预加载图像”意味着在实际使用它们之前下载它们，因此在显示它们时没有延迟。

您可以做的是首先使用 下载图像`[NSData dataWithContentsOfURL:]`，然后将数据转储到使用`writeToFile:atomically:`NSData 实例上的文件中，或者简单地将数据保存在 NSData 中以供将来重用。

然后，当您需要它时，您可以使用`[UIImage imageWithContentsOfFile]`或创建 UIImage `[UIImage imageWithData:]`。

请注意，如果您将缓存保存到文件中，请将这些文件保存在缓存文件夹中，而不是文档文件夹中，或者将它们标记为在同步到 iCloud 时跳过它们的属性，否则您的应用程序将被 Apple 拒绝。

另请记住，下载这些图像可能需要很长时间、超时或失败。您应该在后台线程中以不阻塞主线程的方式执行所有这些操作，具有应用程序未冻结的视觉指示器，并在下载失败或缓存被刷新的情况下进行后备（如果您保存图像到文件）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T06:58:05.207

按照 J_D 的描述加载图像后，只需将它们放入 pageView 并将它们设置为 Hidden 为 YES。每次您想切换页面时，只需调用一些方法，该方法将预加载新图像并显示已下载的图像（将隐藏设置为 NO）;-)。希望这将帮助您解决您的问题...

# c# - ASP.Net MVC3：UrlHelper 扩展方法需要参数

> ID：11049814
> 
> 赞同：4
> 
> 时间：2012-06-15T11:26:47.567
> 
> 标签：c#, asp.net, asp.net-mvc-3

我正在尝试创建一个扩展方法。但我得到：

> 方法没有重载`MRUrl`需要 0 个参数

HtmlHelper.cs：

```
namespace MyNS.Helpers
{
   public class MyHelper
   {
    public static string MRUrl(this UrlHelper url)
    {
         return "blah"
    }
  }
} 
```

看法：

```
@MyNS.Helpers.MyHelper.MRUrl() 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-15T11:28:44.623

您没有正确调用扩展方法。它应该是：

```
@Url.MRUrl() 
```

在使用它们之前，请阅读扩展方法在 C# 中的工作原理：http: [//msdn.microsoft.com/en-us/library/bb383977.aspx](http://msdn.microsoft.com/en-us/library/bb383977.aspx)

扩展方法扩展给定类型（在您的情况下）并在此类型的**实例**`UrlHelper`上调用。因此，由于在您的视图中，您已经有一个（在整个属性中）的实例，因此您可以直接在其上调用您的扩展方法。**`UrlHelper``Url`**

 **在能够调用扩展方法之前，您需要通过添加定义其包含类的命名空间来将其纳入范围：

```
@using MyNS.Helpers
@Url.MRUrl() 
```

扩展方法也必须在**静态**类中声明。您的 C# 代码甚至无法编译。所以修复它：

```
namespace MyNS.Helpers
{
    public static class HtmlHelper // Bad name choice I know.
    {
        public static string MRUrl(this UrlHelper url)
        {
            return "blah";
        }
    }
} 
```

所有这些都是标准 C#，与 ASP.NET MVC 或 Razor 无关。

现在是 ASP.NET MVC 特定的内容：如果您想避免必须将命名空间带入每个视图 ( `@using MyNS.Helpers`) 的范围，您可以将其添加到文件的`<namespaces>`标记中`~/Views/web.config`（不要与 混淆`~/web.config`）。**

# silverlight - 将图像解析为字节数组并发送到 Web 服务

> ID：11049825
> 
> 赞同：0
> 
> 时间：2012-06-15T11:27:25.887
> 
> 标签：silverlight, image, parsing, bytearray, bitmapimage

我想知道如何从 Silverlight Image 控件获取图像并将其解析为字节数组，以便将其发送到我的 Web 服务。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:50:58.267

[这](http://www.silverlightshow.net/items/Uploading-and-downloading-images-from-WCF-in-Silverlight.aspx)对您的问题非常有用。

[这个](http://daveswersky.com/2009/08/29/silverlight-upload-and-display-image/)也可以以某种方式指导你。

# sql - 分层查询 Oracle 和点数 (1 1.1 1.1.1 1.1.2 1.2 1.3 1.3.1 1.3.2 1.3.3 ....)

> ID：11049833
> 
> 赞同：1
> 
> 时间：2012-06-15T11:27:41.567
> 
> 标签：sql, oracle

我有分层数据。

```
select lpad(' ', 4*(level-1))||NAME 
from from_sql 
where where_sql 
CONNECT BY PRIOR id = parent_id 
START WITH parent_id is null 
```

*   工作，好吧。

出去：

```
la1
    la2
    la3
        la4
    la5
        la6
        la7
la8
    la9 
```

我需要：

```
1    la1
1.1        la2
1.2        la3
1.2.1            la4
1.3        la5
1.3.1            la6
1.3.2            la7
2    la8
2.1        la9 
```

如何用点数计算？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T12:07:05.707

试试这个：

```
SELECT SYS_CONNECT_BY_PATH(r, '.'), name
FROM
  (SELECT rank() over (partition BY parent_id
                    ORDER BY id) r,
                id,
                name,
                parent_id
  FROM from_sql 
 WHERE where_sql) t
   CONNECT BY
   PRIOR id = parent_id START WITH parent_id IS NULL 
```

[这](http://sqlfiddle.com/#!4)是一个小提琴

# javascript - 验证 jquery 中的负数，保留一位小数

> ID：11049835
> 
> 赞同：1
> 
> 时间：2012-06-15T11:27:46.667
> 
> 标签：javascript, jquery, validation, jquery-validate

我想通过以下方式使用 jauery 验证文本字段：

**1.文本字段只取0-9，只有一位小数；和**

**2.如果输入的金额不是负数，在输入的数字前加负号！**

```
$('[name="pm"]').keyup(function() {

    //?

 }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T11:31:43.577

您可以通过[正则表达式](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)验证字符串，并且[`String#match`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match)：

```
if (this.value.match(/^-?\d+(?:\.\d){0,1}$/)) {
    // It's valid
} 
```

或者更多 jQuery-ish （并且上面不`textarea`可靠地支持，只是`input`）：

```
if ($(this).val().match(/^-?\d+(?:\.\d){0,1}$/)) {
    // It's valid
} 
```

（例如，`this.value`=> `$(this).val()`。）

分解正则表达式：

*   `^`- 匹配字符串的开头
*   `-?`- 单个可选`-`字符
*   `\d+`- 一位或多位数字 (0-9)
*   `(?:...)`- 非捕获分组，包含：
    *   `\.\d`- 最多一个`.`后跟一个数字
*   `{0,1}`- 允许非捕获分组零次或一次
*   `$`- 匹配字符串结尾

请注意，上述拒绝`-.1`. 如果您想接受它，它会变得更加复杂，但上面的链接应该会有所帮助。

[无偿的活生生的例子](http://jsbin.com/omupay)| [来源](http://jsbin.com/omupay/edit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T17:47:35.877

指定溶液的排列和添加：

**来自@Some_Coder 答案**

1）首先这样做

```
http://www.texotela.co.uk/code/jquery/numeric/ 
```

**来自组织者的修改回答**

```
$('[name="pm"]').keyup(function() {

   if($(this).val().indexOf('-') != 0){
      var val = $(this).val();
      $(this).val("-" + val);
   }

if ($(this).val() == '-') {
            $(this).val('');
        }
});

```

你会得到想要的结果！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T12:06:32.017

试试这段代码。

```
$('[name="pm"]').keyup(function() {
   if($(this).val().indexOf('-') != 0){
      var val = $(this).val();
      $(this).val("-" + val);
   }
});

```

如果它不起作用，请将其替换为 $('[name="pm"]')

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T11:56:36.927

如果你使用 jQuery，那么你可以使用这个插件。

[http://www.texotela.co.uk/code/jquery/numeric/](http://www.texotela.co.uk/code/jquery/numeric/)

# voice-recognition - 在设备上测试语音识别应用程序时出错

> ID：11049840
> 
> 赞同：1
> 
> 时间：2012-06-15T11:28:05.073
> 
> 标签：voice-recognition

*伙计们，我正在尝试在 android 中制作语音识别应用程序，该应用程序有一个活动，我尝试在带有 Gingerbread OS 的三星手机上运行该应用程序，当按下语音按钮时显示连接错误，我搜索了以下页面关于错误[语音识别连接错误](https://stackoverflow.com/questions/2397490/voice-recognition-connection-error)，但它没有帮助，因为我的清单文件没有{ android：launchMode“singleTask”}代码如下所示。请帮助我。*

```
package com.code.voice;

import java.util.ArrayList;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.speech.RecognizerIntent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.Spinner;

public class VoiceActivity extends Activity implements OnClickListener {
/** Called when the activity is first created. */

Button b;
ListView lv; 
static final int check = 1111; 
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    b = (Button)findViewById(R.id.bPress);
    lv = (ListView)findViewById(R.id.lvReturnVoice);
    b.setOnClickListener(this);
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    Intent i = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
    i.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,     RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
    i.putExtra(RecognizerIntent.EXTRA_PROMPT, "You may begin ");
    startActivityForResult(i, check);

}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub

    if(requestCode == check && resultCode == RESULT_OK)
    {
        ArrayList <String> results =   data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
        lv.setAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,results));
    }
    super.onActivityResult(requestCode, resultCode, data);
} 
```

}

![在此处输入图像描述](../Images/cb715211496eba18c6b0513e1f4a6456.png)

# php - 解释这个正则表达式

> ID：11049843
> 
> 赞同：0
> 
> 时间：2012-06-15T11:28:11.127
> 
> 标签：php, regex, preg-replace

我是正则表达式的新手，谁能帮我弄清楚这行说的是什么：

```
$body = preg_replace('/\s{6,}/ms','',$body); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:32:40.960

```
$body = preg_replace('/\s{6,}/ms','',$body); 
```

Replace space (`\s`), which occurs 6 to undefined times (`{6,}`) with nothing. Do this multiline. (`/m`). The `s` could be removed, it adds no value when you don't use the "all characters" character (`.`).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T11:30:12.983

它删除了至少 6 个连续的空白字符的出现。

> **\s - 空白**
> 
> 定义为（水平）制表符、空格、换行、回车或换页。

模式修饰符是无用的顺便说一句：

*   `m`改变和的`^`行为`$`
*   `s`也`.`匹配换行符；否则它将停在一行的末尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T11:31:59.363

基本上它的说法是用连续六个空格替换任何东西。

```
\s  = space
{6,} = between 6 and (since the second number after the comman is blank) 6
\ms = Used together, as /ms, they let the "." match any character whatsoever, while still allowing "^" and "$" to match, respectively, just after and just before newlines within the string. 
```

还可以看看[perldoc 中的 perl 正则表达式](http://perldoc.perl.org/perlre.html)，将来可能会有所帮助。

# batch-file - DOS FOR /F 循环之后的任何内容都没有执行

> ID：11049851
> 
> 赞同：7
> 
> 时间：2012-06-15T11:28:31.560
> 
> 标签：batch-file, cmd, dos

我在谷歌的世界里进行了一次愉快的搜索，找到了与我类似的问题，但我找不到任何人在他们的 FOR / F 循环之外做事的例子，所以我只好创建一个新线程.

我正在使用 FOR /F 循环在它在参考文件中找到的每一行执行一次 Ruby Gem，它做得很好。问题是，当它完成其参考文件的滚动并正确执行 Ruby Gem 的次数后，它不会在 FOR /F 循环之外完成 .CMD 文件中的任何其他内容。

这是我的 .CMD 代码：

```
FOR /F "tokens=1,2,3 delims=," %%a in (c:\cygwin\usr\work\easy.lst) do (
c:\ruby191\bin\scrapitalist website -u http://www.website.com/%%a/%%c/%%b.html -o     C:\cygwin\usr\autobets\work\%%b_%%c.easy
)
copy c:\cygwin\usr\work\*.easy c:\cygwin\usr\autobets\work\easy.imp 
```

easy.lst 文件中有两行数据。

循环工作正常，执行 Ruby Gem 并创建 *.easy 文件作为输出，但是，COPY 命令永远不会执行。我可以用 ECHO 或任何东西替换副本，但它不会执行。

我看不到我的 FOR /F 语法中缺少什么 - 有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-15T11:46:56.207

我想那`scrapitalist`是一个批处理文件本身，因此它会停止批处理文件，但由于 FOR 循环被缓存，它会工作到最后。

要解决这个问题，您只需要一个`call`as 前缀。

```
FOR /F "tokens=1,2,3 delims=," %%a in (c:\cygwin\usr\work\easy.lst) do (
  call c:\ruby191\bin\scrapitalist website -u http://www.website.com/%%a/%%c/%%b.html -o     C:\cygwin\usr\autobets\work\%%b_%%c.easy
)
copy c:\cygwin\usr\work\*.easy c:\cygwin\usr\autobets\work\easy.imp 
```

# iphone - 如何在 25 张图像中将 5 张图像从一个点随机移动到另一个点？

> ID：11049866
> 
> 赞同：2
> 
> 时间：2012-06-15T11:30:08.447
> 
> 标签：iphone, ios, ipad, uiimageview, ipod

在我的程序中，我需要在两个随机点之间移动 25 张图像中的 5 张图像。我正在从一个具有其超类的类生成图像视图`UIImageView`。如何生成带有标签或任何其他参数的图像视图来识别每个图像？谁能给我一个示例代码或任何有用的教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:40:32.313

例如，当您生成时，`UIImageView` 我认为这与您的生成相似

```
UIImageView *imageView = [YourGenerator generateImageView];
//Add a tag to it
imageView.tag = 1;
[self.view addSubView:imageView];
//Add another image
imageView = [YourGenerator generateImageView];
//Add a tag to it
//Different tag
imageView.tag = 2;
[self.view addSubView:imageView]; 
```

现在，当您要移动某些图像时，请执行以下操作

```
//Get the image view by its tag
UIImageView *imageView1 = [self.view viewWithTag:1];
UIImageView *imageView2 = [self.view viewWithTag:1]; 
```

现在随心所欲地移动它们

# c# - Lucene.NET PorterStemFilter 源示例，它适合我吗？

> ID：11049868
> 
> 赞同：1
> 
> 时间：2012-06-15T11:30:10.100
> 
> 标签：c#, lucene.net, stemming

首先，我必须说我们使用的 Lucene.NET 版本不是最新的，因为它与 Sitecore 6.4.1 打包在一起，直到现在我们还没有深入研究分析器和词干的使用（大错误！）。

基本上，我们正在尝试在索引时间或查询时间实现某种形式的词干提取（寻找最佳的建议？）。我们遇到的主要问题是所有关于 Stemming 的文档都是用 Java 编写的，我真的很难把它带到 C# 中。我希望有人可以提供该领域的源示例或资源链接。

由于我们的 Lucene.NET 版本非常旧，我认为无法使用 Snowball Analyzer（甚至在我们的版本中也不可用），因此我们正在考虑使用 PorterStemFilter。

任何人都可以就如何在无需升级 Lucene 的情况下使 Stemming 工作提供任何帮助/建议吗？

亲切的问候

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:22:09.400

通常您编写自己的分析器来构建 TokenStream 链。您将需要在索引和搜索时间停止。

您只需像使用其他任何分析器一样使用您的分析器。

示例分析器：

```
public class MyAnalyzer : Analyzer
{
    public override TokenStream TokenStream(string fieldName, TextReader reader)
    {
        return new PorterStemFilter(new StandardTokenizer(reader));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T12:06:30.480

[雪球](http://snowball.tartarus.org/)是最好的 afaik。在 C、Java、...中有实现。只需在您的项目中构建您自己的分析器/令牌过滤器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:02:13.350

对于旧版本的 Lucene，您可能需要考虑复制 PorterStemmerAlgorithm 类的 C# 实现

例如从这里： [http ://tartarus.org/~martin/PorterStemmer/csharp2.txt](http://tartarus.org/~martin/PorterStemmer/csharp2.txt)

您可以在索引时使用它来阻止您的关键字段值，以将所有单词的词干版本存储在索引中的“词干字段”中。

在查询时，您可以使用相同的类来阻止搜索词并使用词干查询搜索“词干字段”。

这样，您绕过了在更高版本的 Lucene 中实现的所有特定分析器的东西，您仍然可以搜索所有单词的完整版本......

它比理想的手动操作要多一些 - 但它会完成工作:-)

祝你好运！

# oracle - 按顺序缓存 ORACLE

> ID：11049872
> 
> 赞同：1
> 
> 时间：2012-06-15T11:30:27.837
> 
> 标签：oracle, oracle10g, sequence

```
start with 1
last value 1
increment by 1
cache 20 
```

如何`cache`预分配值以及它如何受到先前值的影响？

它在几次输入后显示不同的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T14:25:37.447

具有`CACHE 20`设置的序列在每个实例上缓存 20 个值（因此 RAC 集群中的每个实例都在不同的缓存中工作）。

当您谈论“几次输入后的不同结果”时，我不确定您的意思。我的猜测是，您是说生成的值中存在间隙——这是预期的，Oracle 序列将始终存在间隙。当您的序列有`CACHE`设置时，差距的一个来源是如果序列超出共享池（或者如果实例被关闭），缓存的值将被丢弃。这不是间隙的唯一来源，因此将序列设置为`NOCACHE`不会消除间隙。它将以性能为代价消除这种特殊的差距来源。

# jquery - 如何在jstree中获取所有已检查的节点？

> ID：11049874
> 
> 赞同：1
> 
> 时间：2012-06-15T11:30:39.180
> 
> 标签：jquery, jstree

我需要像这样导出我的节点：

```
function recursive_simplify(node){ 
    if(node.children){
        for(var i =0;i<node.children.length;i++){
            node.children[i] = recursive_simplify(node.children[i])
        }
    }
    delete node['metadata'];
    return node
}

$('body').on('click','.data-export', function () {
    var tree=$.jstree._reference('#reference-data-exchange');
    var checked = tree.get_checked(); 
    var result = [];
    for(var i=0, checkedLength = checked.length; i<checkedLength;i++)
    {
      var checkedJson = tree.get_json(checked[i],['id','rel','data-bin','data-pos'])[0];
      checkedJson = recursive_simplify(checkedJson);
      result.push(checkedJson);
    }
    alert(JSON.stringify(result));
}); 
```

它工作正常，但是！我需要所有已检查的节点（已检查和未确定） 我的代码仅返回已检查。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T05:03:58.897

```
get_all_checked: function(obj)
           {
                obj = !obj || obj === -1 ? this.get_container() : this._get_node(obj);
                return obj.find(".jstree-checked, .jstree-undetermined");
            }; 
```

采用 ：

```
var checkedNodes = $(this).jstree("get_all_checked"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-03T20:34:00.763

使用 3.3.8 版本的 jsTree，获取所有未确定的节点，`get_undetermined`选项可用。

因此，您可以同时使用`get_selected`并`get_undetermined`满足您的要求。

有关完整且有效的源代码，您可以参考[https://everyething.com/Example-of-jsTree-to-get-all-checked-nodes](https://everyething.com/Example-of-jsTree-to-get-all-checked-nodes)

# android - Pss、Shared dirty 和 Priv dirty 会导致 android 中的 OutOfMemoryError 吗？

> ID：11049875
> 
> 赞同：1
> 
> 时间：2012-06-15T11:30:41.673
> 
> 标签：android, memory

我想知道这些值的增加是否会导致 OutOfMemoryError。

# c - 使用 leptonica 查找区域的边界框

> ID：11049879
> 
> 赞同：1
> 
> 时间：2012-06-15T11:31:00.957
> 
> 标签：c, image, image-processing, computer-vision

我试图找到与蓝线和红线之间的区域相交的黑色像素连续区域的边界框（见下图）。

我已经使用 leptonica 库进行非常简单的图像处理，并且我知道如何“手动”解决问题。但是，我认为 leptonica 已经为这项工作提供了快速的工具——问题是它没有很好的文档记录，我不知道我应该寻找哪些功能。

我会很感激 leptonica 的文档中对函数的一些提示和指示。

这是示例图像：

![例子](../Images/b98409a91f808197c2246bd7099e756d.png)

我需要为线路之间区域的所有岛屿找到绿色框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:57:08.690

我找到了一个解决方案：

鉴于这`PIX* pixb`是一个 1bpp 源图像，并且`BOX* b`是红线和蓝线之间的框：

```
BOXA* bb = pixConnCompBB(pixb, 8); // to find bounding boxes of all connected components      on the image
BOXA* bil = boxaIntersectsBox(bb, b); 
```

`bil`结果是与线之间的区域相交的边界框数组。

# node.js - 指定 console.trace 深度

> ID：11049880
> 
> 赞同：6
> 
> 时间：2012-06-15T11:31:02.797
> 
> 标签：node.js

使用 console.trace 时有没有办法指定堆栈跟踪深度？我会发现这对于识别行号和文件的信息和日志级别消息特别有用

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T13:24:05.583

您可以通过设置变量来控制收集多少堆栈帧

```
Error.stackTraceLimit 
```

将其设置为 0 将禁用堆栈跟踪收集。任何有限整数值都将用作要收集的最大帧数。将其设置为 Infinity 意味着将收集所有帧。

另一种选择是使用命令行标志`--stack-trace-limit`：

```
node --stack-trace-limit=50 test.js 
```

参考：

[http://code.google.com/p/v8/wiki/JavaScriptStackTraceApi](http://code.google.com/p/v8/wiki/JavaScriptStackTraceApi)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-15T13:21:21.963

方法 console.trace 看起来像：

```
exports.trace = function(label) {
  // TODO probably can to do this better with V8's debug object once that is
  // exposed.
  var err = new Error;
  err.name = 'Trace';
  err.message = label || '';
  Error.captureStackTrace(err, arguments.callee);
  console.error(err.stack);
}; 
```

[https://github.com/joyent/node/blob/master/lib/console.js#L61](https://github.com/joyent/node/blob/master/lib/console.js#L61)

因此，您似乎无法设置跟踪深度。

# scala - 删除类构造函数会导致“构造函数的参数不足”（重新编译不起作用？）

> ID：11049881
> 
> 赞同：1
> 
> 时间：2012-06-15T11:31:07.703
> 
> 标签：scala, compilation

我***有***一个 Scala 类如下：

```
class ClassA(val name: String) {
  println("this is a class")
} 
```

现在我***有***这个类：

```
class ClassA() {
  println("this is a class")
} 
```

在我的主要我***曾经***这样声明类：

```
val s = new ClassA("hello") 
```

现在我这样声明：

```
val s = new ClassA 
```

问题是在一切正常之前，但是当我从对象中删除 name 参数时，我仍然收到此错误：

```
error: not enough arguments for constructor ClassA: (name: String)ClassA.
Unspecified value parameter name. 
```

似乎该类没有编译，但我重新编译了所有内容。有没有办法可以清除所有旧的编译数据并重新开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:52:14.483

我阅读了这篇文档[http://www.scala-lang.org/node/166](http://www.scala-lang.org/node/166)并意识到在 scala 中运行的是类而不是文件。所以，我只是运行常规文件 x.scala 而我需要运行 Main

# perl - 无法执行 perl 脚本

> ID：11049884
> 
> 赞同：2
> 
> 时间：2012-06-15T11:31:21.673
> 
> 标签：perl

我是 Perl 的新手，想使用 Excel 绘制图表。我找到了一些代码，但是当我尝试执行它时，它只在命令提示符上显示“按任意键继续...”。该代码可由其他人执行。我还尝试下载 Excel 编写器包并将它们放在 lib 文件夹中，但它根本没有执行。发现代码绝对可执行。

```
#!/usr/bin/perl
use strict;
use warnings;
use Excel::Writer::XLSX;

my $workbook  = Excel::Writer::XLSX->new('chart.xlsx');
my $worksheet = $workbook->add_worksheet();

# Add the worksheet data the chart refers to.
my $data = [
    ['Category', 2, 3, 4, 5, 6, 7],
    ['Value',    1, 4, 5, 2, 1, 5],
];
$worksheet->write('A1', $data);

# Add a worksheet chart.
my $chart = $workbook->add_chart(type => 'column');

# Configure the chart.
$chart->add_series(
    categories => '=Sheet1!$A$2:$A$7',
    values     => '=Sheet1!$B$2:$B$7',
);
__END__ 
```

有谁有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T12:15:47.403

奥列格的回答是这样的：

根据您所使用的操作系统，您调用 perl 程序的方式可能会有所不同。这就是我的样子。

simbabque@box:~> perl xsltest.pl simbabque@box:~>

现在，如果您不确定您的工作目录在哪里，请编辑如下代码：

```
#!/usr/bin/perl
use strict;
use warnings;
use Excel::Writer::XLSX;
use Cwd;                 # <--- new line!
print cwd(), "\n";       # <--- new line! 
```

现在，当您运行程序时，它应该会打印出如下内容：

```
simbabque@box:~> perl xsltest.pl 
/home/simbabque/
simbabque@box:~> 
```

就我而言，工作目录是我从中调用 perl 的目录。不过，它可能是另一个。

尽管它不会在屏幕上打印任何内容，但它应该已经创建了`chart.xlsx`在我的工作目录中调用的文件。我可以`ls`在命令行上查找它，或者说`file chart.xlsx`看看它是否是一个 Excel 文件。

```
simbabque@box:~> file chart.xlsx
chart.xlsx: Zip archive data, at least v2.0 to extract 
```

我现在可以在 Excel 或 Libre Office 中打开它。

* * *

如果您使用的是 Windows，请打开资源管理器并将其指向`cwd`函数所说的位置。在那里，您可以双击文件以在 Excel 中打开它。如果它与程序是同一个文件夹，您也可以使用文本编辑器的打开对话框，右键单击`chart.xlsx`并单击*打开*而不是*选择*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T11:36:14.610

它正在执行。您在某处的文件中构建 Excel 表格，而无需在屏幕上打印任何内容。当脚本成功完成时，系统会打印“按任意键继续...”提示。如果你不确定你的脚本工作目录在哪里，你可以使用`Cwd`模块来检查它。还要确保工作目录对您是可写的。

# wordpress - 自定义帖子类型“property”（wp-property 插件）查询问题

> ID：11049885
> 
> 赞同：0
> 
> 时间：2012-06-15T11:31:25.887
> 
> 标签：wordpress

我已经安装了 wp-property 插件，并且我正在尝试进行自定义查询，以从数据库中检索数据。

如果我从其他 post_type 查询帖子是可以的，但是当我尝试从插件生成的特定“属性”post_type 查询帖子时，它只显示一个 ID 或一个标题（参见附图以了解... ![在此处输入图像描述](../Images/31f7051b0d344d832e3a253236df4116.png) 这里是我的代码，我尝试了正常的 wp-query 结构，但我遇到了同样的问题：

```
 <?php
    $querystr = "
    SELECT *
    FROM `wp_posts`
    WHERE `post_type` LIKE 'property'
    ORDER BY $wpdb->posts.post_date DESC
    ";

    $pageposts = $wpdb->get_results($querystr, OBJECT);

    ?>
    <?php if ($pageposts): ?>
    <?php global $post; ?>
    <?php foreach ($pageposts as $post): ?>
    <?php setup_postdata($post); ?>

    <?php echo  $post->post_title ?><br />

    <?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T08:56:25.803

我认为您可能在全局`$post`变量和循环变量之间存在冲突。如果将其更改为以下（未经测试的）代码，它是否有效？

```
<?php global $post; ?>
<?php foreach ($pageposts as $pagepost): ?>
<?php setup_postdata($pagepost); ?>
<?php echo  $post->post_title ?><br /> 
```

顺便说一句，您的 SQL 缺少一些条件 - 您将使用它撤回帖子的所有修订。至少我会添加

```
AND $wpdb->posts.post_status = 'publish' 
```

但如果可能的话，我会回到使用[WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)。

# android - LG 手机无法访问 SqLite 数据库

> ID：11049889
> 
> 赞同：2
> 
> 时间：2012-06-15T11:31:38.680
> 
> 标签：android, database, sqlite, sqliteopenhelper, lg

我们已经为 Android 平台开发了一个预加载 SQLite 数据库的应用程序。使用 SQLiteOpenHelper，在应用程序的第一次执行中，我们从“Assets”中复制数据库为应用程序数据目录（/data/data/br.com.lwu/databases/appdatabase.sqlite）。这适用于大多数设备。但是我们在使用以下 LG 手机时遇到了问题：

*   LG 擎天柱一号
*   LG-P500
*   LG-P500h

显然，数据库已正确复制。但应用程序无法访问数据库（如表）。我们需要帮助！

```
// Copy Database:

    private static String DB_PATH = "/data/data/br.com.lwu/databases/";
    private static String DB_NAME = "appdatabase.sqlite";

private void copyDataBase() throws IOException{
        InputStream myInput = myContext.getAssets().open(DB_NAME);

        String outFileName = DB_PATH + DB_NAME;
        OutputStream myOutput = new FileOutputStream(outFileName);
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }

        myOutput.flush();
        myOutput.close();
        myInput.close();

    }

public void openDataBase() throws SQLException{ 
        String myPath = DB_PATH + DB_NAME;

        if (myDataBase == null) {
            myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READWRITE);
        }

    }

 @Override
    public synchronized void close() {

        super.close();

        if (myDataBase != null)
            if (myDataBase.isOpen()) {
                myDataBase.close();
                myDataBase = null;

            }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T11:33:25.523

尝试改变：

```
myDataBase = SQLiteDatabase.openDatabase(myPath, null,
            SQLiteDatabase.OPEN_READWRITE); 
```

对此：

```
myDataBase = SQLiteDatabase.openDatabase(myPath, null,
          SQLiteDatabase.OPEN_READWRITE | SQLiteDatabase.NO_LOCALIZED_COLLATORS); 
```

这样做不会要求您拥有**`android_metadata`**android vm 所需的强制表，以防万一它在您的数据库中丢失。

# php - 将数据转换为 HTML 表的位置：PHP / Javascript /

> ID：11049892
> 
> 赞同：0
> 
> 时间：2012-06-15T11:31:53.220
> 
> 标签：php, jquery, ajax, database, html-table

我需要关于如何编写我的网站的建议。

在我的数据库中，我有一些数据想要*动态*加载到我网站上的不同框架中。问题是：我在哪里将原始数据转换为 HTML 代码？

我目前看到以下选项：

*   在 PHP 函数中将其转换为 HTML 并通过 Ajax 在我的页面上加载它
*   通过 Ajax 获取原始数据并将其在 Javascript 中转换为 HTML 代码
*   手动编写 HTML 表，然后通过 Ajax 将数据插入其中

所有这三个选项都有其缺点 - 例如，我需要能够使用 jQuery 选择表行，当使用 Ajax 将表 HTML 代码加载到页面中时，我不知道该怎么做......手动的 HTML 表格可以解决这个问题，但表格需要有可变数量的行。

有没有我还没有想到的选项？对我还有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:41:15.530

我会使用 1 和 3 方法的某种组合，使用某种文件缓存或内存缓存，但不使用数据库（必须更慢）。您必须为所需的块生成一次带有所需参数的 html 并将其缓存到文件中，因此它类似于（伪代码）：

```
$aParams = ... lets tell that this is your params here;
$sBlockKey = 'my_block_'.md5($aParams);
if (cache::exists($sBlockKey)){
  $sMyBlock = cache::get($sBlockKey);
} else {
  $sMyBlock = generateMyBlockHtml($aParams);
  cache::add($sBlockKey, $sMyBlock);
}

return $sMyBlock; 
```

通过这种方式，您可以根据需要通过 ajax 加载它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T11:43:33.817

这取决于，但除非行数和列数是恒定的，否则我会选择 1 或 2。

选项 1 的优点是，在 PHP 中生成 HTML 比在 Javascript 中更实用，所以如果你需要做一些非常快速的事情，或者你已经在服务器端有一个模板系统，请尝试选项 1。一个巨大的缺点这种方法的一个特点是您必须信任服务器才能发送“正常”的 HTML；如果您不使用 SSL 进行 AJAX 调用，那么简单的 MITM 攻击可以轻松注入可利用的 XSS 代码，并且如果服务器由于某种原因发送了损坏的 HTML，则很难检测到并且可能无法从中恢复。

所以通常情况下，我更喜欢选项 2。此时我什至不会打扰 HTML，而是直接操作 DOM，即：

*   循环遍历数据行；对于每一行，构造一个 tr 元素并将其附加到表的主体
    *   循环列；对于每一行，构造一个 td 元素并将其附加到 tr ；用于`.text()`向单元格添加内容。

示例代码：

```
function fillTable(data) {
    var tbody = $('<tbody/>');
    data.each(function (row) {
        var tr = $('<tr/>');
        tbody.append(tr);
        row.each(function (cell) {
            var td = $('<td/>');
            tr.append(td);
            td.text(cell);
        });
    });
    $('#myTable>tbody').replaceWith(tbody);
} 
```

这样，您不必担心 HTML 编码（以及 XSS），因为您直接注入 DOM 节点 - 浏览器根本不会进行任何 HTML 解析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T11:54:52.533

我正在使用这两个 jquery 插件[http://datatables.net/](http://datatables.net/)和[http://www.trirand.com/blog/](http://www.trirand.com/blog/)这可能是一种过载但你会得到相当灵活的方式来显示你的页面上的表格动态加载的数据，它们都有很好的方法来处理行选择、格式化等。

# php - 有没有办法缩短这个表达式？

> ID：11049895
> 
> 赞同：1
> 
> 时间：2012-06-15T11:31:56.387
> 
> 标签：php

```
$titleadd = substr($_SERVER["SCRIPT_NAME"],strrpos($_SERVER["SCRIPT_NAME"],"/")+1);
$titleadd = str_replace('.php', '', $titleadd);
$titleadd = str_replace('-', ' ', $titleadd); 
```

我正在获取 url，删除[http://www.domain.com/](http://www.domain.com/)然后替换 .php 和 url 中的任何连字符以回显页面名称。

所以**www.google.com/my-page.php**将作为**我的页面输出**

有没有更短的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T11:37:19.737

您的用例的较短等效项是

```
$titleadd = strtr(basename($_SERVER["SCRIPT_NAME"], ".php"), "-", " "); 
```

当然，这不是工业级解析，但它应该提供与原始代码一样好的结果。

一个更强大的尝试将涉及[`parse_url`](http://php.net/manual/en/function.parse-url.php)，但它最终不会比你所拥有的更短。另一方面：也许代码长度在这里不是正确的度量？毕竟，你可以隐藏 200 行代码`foo()`而没有人知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:36:48.160

```
echo str_replace('-', ' ', basename('www.google.com/my-page.php', '.php')); 
```

# sqlite - SQLite3 BLOB Cast

> ID：11049902
> 
> 赞同：2
> 
> 时间：2012-06-15T11:32:15.480
> 
> 标签：sqlite, blob

I have a small iphone application that syncs with a server in this application i use sqlite3 to save the data, one of the tables has one field that's a blob (fieldName foto). To sync i need to send the data in a text file over the network, so i need to convert the blob to text.

The problem it's that i can't convert/cast the blob to text.

In the sqlite manual (http://www.sqlite.org/lang_expr.html), it says that it can be done: "To cast a BLOB value to TEXT, the sequence of bytes that make up the BLOB is interpreted as text encoded using the database encoding."

But i can't get this to work.

Query: SELECT CAST(Foto AS TEXT) FROM myTable;

Result: ????

What I'm missing?

# eclipse - How to translate (internationalize) a third-party Eclipse Plug-In?

> ID：11049903
> 
> 赞同：1
> 
> 时间：2012-06-15T11:32:24.200
> 
> 标签：eclipse, plugins, localization, rcp

I'm developing a RCP Eclipse-based application and it makes use of the Eclipse providing tool, p2, as of Eclipse 3.4 (Ganymede).

The thing is, this application must be fully in Brazillian Portuguese, and it already is, except for the p2-related UI. And that's what I need to translate. How can I?

This is where I've been:

1.  Added the "updateMenu.label", "actionSets.softwareUpdates.label"... labels to my plugin.properties. Didn't work. I found out that this was related to the previous providing mechanism (Update Manager).
2.  Found the "message.properties" file inside the "org.eclipse.equinox.internal.p2.ui.sdk" package. Then created a copy of it on the root of my plugin folder, left only two keys and translated them. Didn't work. I guess either this is not possible or the new file should be placed under another folder?

So, I ask, is this even possible?

I still have two options in mind:

1.  Create a package with the same name of the p2 one inside my plugin and place the properties there
2.  Add a sufix to the file and change the locale of the application (it hasn't been done anywhere on the code since all the other messages are in Portuguese and it's a single-language application

Any suggestions?

All the best
-Alvaro C.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T12:19:06.743

您应该只添加一个片段项目来增强第三方插件的功能（这里是语言）。

1.创建一个片段项目

2.将您的第三方插件设置为“主机插件”

3.在这个片段中创建你的消息属性

**编辑：**有关一组现有翻译以及使用片段翻译 .properties 文件的示例，请参阅[http://www.eclipse.org/babel/ 。](http://www.eclipse.org/babel/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:24:44.887

只需在 Eclipse 中使用正确的片段和包名称进行翻译，然后将翻译片段与您的产品一起导出，例如，如果产品依赖于特性，则将其包含到导出的特性中。

# jquery - 在colorbox的jquery代码中添加html元素

> ID：11049904
> 
> 赞同：0
> 
> 时间：2012-06-15T11:32:25.917
> 
> 标签：jquery, html, object, colorbox

我想向 jquery.colorbox.js 添加一个元素（想做一些花哨的样式）但我不明白 jquery 的工作方式

链接到彩盒：[http ://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)

当前输出示例：

```
<div id="cboxOverlay" style="display: block; opacity: 0.9; cursor: pointer;">
</div>

<div id="colorbox" class="" style="display: block; padding-bottom: 42px; padding-right: 42px; top: 0px; left: 456px; position: absolute; width: 871px; height: 646px;">
<div id="cboxWrapper" style="height: 688px; width: 913px;">
...
</div>
</div> 
```

所需的输出示例：

```
 <div id="cboxOverlay" style="display: block; opacity: 0.9; cursor: pointer;">
    </div>

<div id="colorbox_totalWrapper">
    <div id="colorbox" class="" style="display: block; padding-bottom: 42px; padding-right: 42px; top: 0px; left: 456px; position: absolute; width: 871px; height: 646px;">
    <div id="cboxWrapper" style="height: 688px; width: 913px;">
    ...
    </div>
    </div>
</div> 
```

当前的jQuery：

```
defaults = {
    transition: "elastic",
    speed: 300,
    width: false,
    initialWidth: "600",
    innerWidth: false,
    maxWidth: false,
    height: false,
    initialHeight: "450",
    innerHeight: false,
    maxHeight: false,
    scalePhotos: true,
    scrolling: true,
    inline: false,
    html: false,
    iframe: false,
    fastIframe: true,
    photo: false,
    href: false,
    title: false,
    rel: false,
    opacity: 0.9,
    preloading: true,

    current: "image {current} of {total}",
    previous: "previous",
    next: "next",
    close: "close",
    xhrError: "This content failed to load.",
    imgError: "This image failed to load.",

    open: false,
    returnFocus: true,
    reposition: true,
    loop: true,
    slideshow: false,
    slideshowAuto: true,
    slideshowSpeed: 2500,
    slideshowStart: "start slideshow",
    slideshowStop: "stop slideshow",
    onOpen: false,
    onLoad: false,
    onComplete: false,
    onCleanup: false,
    onClosed: false,
    overlayClose: true,     
    escKey: true,
    arrowKey: true,
    top: false,
    bottom: false,
    left: false,
    right: false,
    fixed: false,
    data: undefined
},

colorbox = 'colorbox',
prefix = 'cbox',
boxElement = prefix + 'Element',

// Events   
event_open = prefix + '_open',
event_load = prefix + '_load',
event_complete = prefix + '_complete',
event_cleanup = prefix + '_cleanup',
event_closed = prefix + '_closed',
event_purge = prefix + '_purge',

// Special Handling for IE
isIE = !$.support.opacity && !$.support.style, // IE7 & IE8
isIE6 = isIE && !window.XMLHttpRequest, // IE6
event_ie6 = prefix + '_IE6',

// Cached jQuery Object Variables
$overlay,
$box,
$wrap,
$content,
$topBorder,
$leftBorder,
$rightBorder,
$bottomBorder,
$related,
$window,
$loaded,
$loadingBay,
$loadingOverlay,
$title,
$current,
$slideshow,
$next,
$prev,
$close,
$groupControls,

settings,
interfaceHeight,
interfaceWidth,
loadedHeight,
loadedWidth,
element,
index,
photo,
open,
active,
closing,
loadingTimer,
publicMethod,
div = "div",
init;

// Convience function for creating new jQuery objects
function $tag(tag, id, css) {
    var element = document.createElement(tag);

    if (id) {
        element.id = prefix + id;
    }

    if (css) {
        element.style.cssText = css;
    }

    return $(element);
}

// Determine the next and previous members in a group.
function getIndex(increment) {
    var 
    max = $related.length, 
    newIndex = (index + increment) % max;

    return (newIndex < 0) ? max + newIndex : newIndex;
}

// Convert '%' and 'px' values to integers
function setSize(size, dimension) {
    return Math.round((/%/.test(size) ? ((dimension === 'x' ? $window.width() : $window.height()) / 100) : 1) * parseInt(size, 10));
} 
```

这个正则表达式。函数 isImage(url) { 返回 settings.photo || /.(gif|png|jpe?g|bmp|ico)((#|\?).*)?$/i.test(url); }

```
// Assigns function results to their respective properties
function makeSettings() {
    var i,
        data = $.data(element, colorbox);

    if (data == null) {
        settings = $.extend({}, defaults);
        if (console && console.log) {
            console.log('Error: cboxElement missing settings object')
        }
    } else {
        settings = $.extend({}, data);          
    }

    for (i in settings) {
        if ($.isFunction(settings[i]) && i.slice(0, 2) !== 'on') { // checks to make sure the function isn't one of the callbacks, they will be handled at the appropriate time.
            settings[i] = settings[i].call(element);
        }
    }

    settings.rel = settings.rel || element.rel || 'nofollow';
    settings.href = settings.href || $(element).attr('href');
    settings.title = settings.title || element.title;

    if (typeof settings.href === "string") {
        settings.href = $.trim(settings.href);
    }
}

function trigger(event, callback) {
    $.event.trigger(event);
    if (callback) {
        callback.call(element);
    }
}

// Slideshow functionality
function slideshow() {
    var
    timeOut,
    className = prefix + "Slideshow_",
    click = "click." + prefix,
    start,
    stop,
    clear;

    if (settings.slideshow && $related[1]) {
        start = function () {
            $slideshow
                .text(settings.slideshowStop)
                .unbind(click)
                .bind(event_complete, function () {
                    if (settings.loop || $related[index + 1]) {
                        timeOut = setTimeout(publicMethod.next, settings.slideshowSpeed);
                    }
                })
                .bind(event_load, function () {
                    clearTimeout(timeOut);
                })
                .one(click + ' ' + event_cleanup, stop);
            $box.removeClass(className + "off").addClass(className + "on");
            timeOut = setTimeout(publicMethod.next, settings.slideshowSpeed);
        };

        stop = function () {
            clearTimeout(timeOut);
            $slideshow
                .text(settings.slideshowStart)
                .unbind([event_complete, event_load, event_cleanup, click].join(' '))
                .one(click, function () {
                    publicMethod.next();
                    start();
                });
            $box.removeClass(className + "on").addClass(className + "off");
        };

        if (settings.slideshowAuto) {
            start();
        } else {
            stop();
        }
    } else {
        $box.removeClass(className + "off " + className + "on");
    }
}

function launch(target) {
    if (!closing) {

        element = target;

        makeSettings();

        $related = $(element);

        index = 0;

        if (settings.rel !== 'nofollow') {
            $related = $('.' + boxElement).filter(function () {
                var data = $.data(this, colorbox), 
                    relRelated;

                if (data) {
                    relRelated =  data.rel || this.rel;
                }

                return (relRelated === settings.rel);
            });
            index = $related.index(element);

            // Check direct calls to ColorBox.
            if (index === -1) {
                $related = $related.add(element);
                index = $related.length - 1;
            }
        }

        if (!open) {
            open = active = true; // Prevents the page-change action from queuing up if the visitor holds down the left or right keys.

            $box.show();

            if (settings.returnFocus) {
                $(element).blur().one(event_closed, function () {
                    $(this).focus();
                });
            }

            // +settings.opacity avoids a problem in IE when using non-zero-prefixed-string-values, like '.5'
            $overlay.css({"opacity": +settings.opacity, "cursor": settings.overlayClose ? "pointer" : "auto"}).show();

            // Opens inital empty ColorBox prior to content being loaded.
            settings.w = setSize(settings.initialWidth, 'x');
            settings.h = setSize(settings.initialHeight, 'y');
            publicMethod.position();

            if (isIE6) {
                $window.bind('resize.' + event_ie6 + ' scroll.' + event_ie6, function () {
                    $overlay.css({width: $window.width(), height: $window.height(), top: $window.scrollTop(), left: $window.scrollLeft()});
                }).trigger('resize.' + event_ie6);
            }

            trigger(event_open, settings.onOpen);

            $groupControls.add($title).hide();

            $close.html(settings.close).show();
        }

        publicMethod.load(true);
    }
}

// ColorBox's markup needs to be added to the DOM prior to being called
// so that the browser will go ahead and load the CSS background images.
function appendHTML() {
    if (!$box && document.body) {
        init = false;

        $window = $(window);
        $box = $tag(div).attr({id: colorbox, 'class': isIE ? prefix + (isIE6 ? 'IE6' : 'IE') : ''}).hide();
        $overlay = $tag(div, "Overlay", isIE6 ? 'position:absolute' : '').hide();
        $wrap = $tag(div, "Wrapper");
        $content = $tag(div, "Content").append(
            $loaded = $tag(div, "LoadedContent", 'width:0; height:0; overflow:hidden'),
            $loadingOverlay = $tag(div, "LoadingOverlay").add($tag(div, "LoadingGraphic")),
            $title = $tag(div, "Title"),
            $current = $tag(div, "Current"),
            $next = $tag(div, "Next"),
            $prev = $tag(div, "Previous"),
            $slideshow = $tag(div, "Slideshow").bind(event_open, slideshow),
            $close = $tag(div, "Close")
        );

        $wrap.append( // The 3x3 Grid that makes up ColorBox
            $tag(div).append(
                $tag(div, "TopLeft"),
                $topBorder = $tag(div, "TopCenter"),
                $tag(div, "TopRight")
            ),
            $tag(div, false, 'clear:left').append(
                $leftBorder = $tag(div, "MiddleLeft"),
                $content,
                $rightBorder = $tag(div, "MiddleRight")
            ),
            $tag(div, false, 'clear:left').append(
                $tag(div, "BottomLeft"),
                $bottomBorder = $tag(div, "BottomCenter"),
                $tag(div, "BottomRight")
            )
        ).find('div div').css({'float': 'left'});

        $loadingBay = $tag(div, false, 'position:absolute; width:9999px; visibility:hidden; display:none');

        $groupControls = $next.add($prev).add($current).add($slideshow);

        $(document.body).append($overlay, $box.append($wrap, $loadingBay));
    }
}

// Add ColorBox's event bindings
function addBindings() {
    if ($box) {
        if (!init) {
            init = true;

            // Cache values needed for size calculations
            interfaceHeight = $topBorder.height() + $bottomBorder.height() + $content.outerHeight(true) - $content.height();//Subtraction needed for IE6
            interfaceWidth = $leftBorder.width() + $rightBorder.width() + $content.outerWidth(true) - $content.width();
            loadedHeight = $loaded.outerHeight(true);
            loadedWidth = $loaded.outerWidth(true);

            // Setting padding to remove the need to do size conversions during the animation step.
            $box.css({"padding-bottom": interfaceHeight, "padding-right": interfaceWidth});

            // Anonymous functions here keep the public method from being cached, thereby allowing them to be redefined on the fly.
            $next.click(function () {
                publicMethod.next();
            });
            $prev.click(function () {
                publicMethod.prev();
            });
            $close.click(function () {
                publicMethod.close();
            });
            $overlay.click(function () {
                if (settings.overlayClose) {
                    publicMethod.close();
                }
            });

            // Key Bindings
            $(document).bind('keydown.' + prefix, function (e) {
                var key = e.keyCode;
                if (open && settings.escKey && key === 27) {
                    e.preventDefault();
                    publicMethod.close();
                }
                if (open && settings.arrowKey && $related[1]) {
                    if (key === 37) {
                        e.preventDefault();
                        $prev.click();
                    } else if (key === 39) {
                        e.preventDefault();
                        $next.click();
                    }
                }
            });

            $('.' + boxElement, document).live('click', function (e) {
                // ignore non-left-mouse-clicks and clicks modified with ctrl / command, shift, or alt.
                // See: http://jacklmoore.com/notes/click-events/
                if (!(e.which > 1 || e.shiftKey || e.altKey || e.metaKey)) {
                    e.preventDefault();
                    launch(this);
                }
            });
        }
        return true;
    }
    return false;
}

// Don't do anything if ColorBox already exists.
if ($.colorbox) {
    return;
}

// Append the HTML when the DOM loads
$(appendHTML);

// ****************
// PUBLIC FUNCTIONS
// Usage format: $.fn.colorbox.close();
// Usage from within an iframe: parent.$.fn.colorbox.close();
// ****************

publicMethod = $.fn[colorbox] = $[colorbox] = function (options, callback) {
    var $this = this;

    options = options || {};

    appendHTML();

    if (addBindings()) {
        if (!$this[0]) {
            if ($this.selector) { // if a selector was given and it didn't match any elements, go ahead and exit.
                return $this;
            }
            // if no selector was given (ie. $.colorbox()), create a temporary element to work with
            $this = $('<a/>');
            options.open = true; // assume an immediate open
        }

        if (callback) {
            options.onComplete = callback;
        }

        $this.each(function () {
            $.data(this, colorbox, $.extend({}, $.data(this, colorbox) || defaults, options));
        }).addClass(boxElement);

        if (($.isFunction(options.open) && options.open.call($this)) || options.open) {
            launch($this[0]);
        }
    }

    return $this;
};

publicMethod.position = function (speed, loadedCallback) {
    var 
    top = 0, 
    left = 0, 
    offset = $box.offset(),
    scrollTop, 
    scrollLeft;

    $window.unbind('resize.' + prefix);

    // remove the modal so that it doesn't influence the document width/height        
    $box.css({top: -9e4, left: -9e4});

    scrollTop = $window.scrollTop();
    scrollLeft = $window.scrollLeft();

    if (settings.fixed && !isIE6) {
        offset.top -= scrollTop;
        offset.left -= scrollLeft;
        $box.css({position: 'fixed'});
    } else {
        top = scrollTop;
        left = scrollLeft;
        $box.css({position: 'absolute'});
    }

    // keeps the top and left positions within the browser's viewport.
    if (settings.right !== false) {
        left += Math.max($window.width() - settings.w - loadedWidth - interfaceWidth - setSize(settings.right, 'x'), 0);
    } else if (settings.left !== false) {
        left += setSize(settings.left, 'x');
    } else {
        left += Math.round(Math.max($window.width() - settings.w - loadedWidth - interfaceWidth, 0) / 2);
    }

    if (settings.bottom !== false) {
        top += Math.max($window.height() - settings.h - loadedHeight - interfaceHeight - setSize(settings.bottom, 'y'), 0);
    } else if (settings.top !== false) {
        top += setSize(settings.top, 'y');
    } else {
        top += Math.round(Math.max($window.height() - settings.h - loadedHeight - interfaceHeight, 0) / 2);
    }

    $box.css({top: offset.top, left: offset.left});

    // setting the speed to 0 to reduce the delay between same-sized content.
    speed = ($box.width() === settings.w + loadedWidth && $box.height() === settings.h + loadedHeight) ? 0 : speed || 0;

    // this gives the wrapper plenty of breathing room so it's floated contents can move around smoothly,
    // but it has to be shrank down around the size of div#colorbox when it's done.  If not,
    // it can invoke an obscure IE bug when using iframes.
    $wrap[0].style.width = $wrap[0].style.height = "9999px";

    function modalDimensions(that) {
        $topBorder[0].style.width = $bottomBorder[0].style.width = $content[0].style.width = that.style.width;
        $content[0].style.height = $leftBorder[0].style.height = $rightBorder[0].style.height = that.style.height;
    }

    $box.dequeue().animate({width: settings.w + loadedWidth, height: settings.h + loadedHeight, top: top, left: left}, {
        duration: speed,
        complete: function () {
            modalDimensions(this);

            active = false;

            // shrink the wrapper down to exactly the size of colorbox to avoid a bug in IE's iframe implementation.
            $wrap[0].style.width = (settings.w + loadedWidth + interfaceWidth) + "px";
            $wrap[0].style.height = (settings.h + loadedHeight + interfaceHeight) + "px";

            if (settings.reposition) {
                setTimeout(function () {  // small delay before binding onresize due to an IE8 bug.
                    $window.bind('resize.' + prefix, publicMethod.position);
                }, 1);
            }

            if (loadedCallback) {
                loadedCallback();
            }
        },
        step: function () {
            modalDimensions(this);
        }
    });
};

publicMethod.resize = function (options) {
    if (open) {
        options = options || {};

        if (options.width) {
            settings.w = setSize(options.width, 'x') - loadedWidth - interfaceWidth;
        }
        if (options.innerWidth) {
            settings.w = setSize(options.innerWidth, 'x');
        }
        $loaded.css({width: settings.w});

        if (options.height) {
            settings.h = setSize(options.height, 'y') - loadedHeight - interfaceHeight;
        }
        if (options.innerHeight) {
            settings.h = setSize(options.innerHeight, 'y');
        }
        if (!options.innerHeight && !options.height) {
            $loaded.css({height: "auto"});
            settings.h = $loaded.height();
        }
        $loaded.css({height: settings.h});

        publicMethod.position(settings.transition === "none" ? 0 : settings.speed);
    }
};

publicMethod.prep = function (object) {
    if (!open) {
        return;
    }

    var callback, speed = settings.transition === "none" ? 0 : settings.speed;

    $loaded.remove();
    $loaded = $tag(div, 'LoadedContent').append(object);

    function getWidth() {
        settings.w = settings.w || $loaded.width();
        settings.w = settings.mw && settings.mw < settings.w ? settings.mw : settings.w;
        return settings.w;
    }
    function getHeight() {
        settings.h = settings.h || $loaded.height();
        settings.h = settings.mh && settings.mh < settings.h ? settings.mh : settings.h;
        return settings.h;
    }

    $loaded.hide()
    .appendTo($loadingBay.show())// content has to be appended to the DOM for accurate size calculations.
    .css({width: getWidth(), overflow: settings.scrolling ? 'auto' : 'hidden'})
    .css({height: getHeight()})// sets the height independently from the width in case the new width influences the value of height.
    .prependTo($content);

    $loadingBay.hide();

    // floating the IMG removes the bottom line-height and fixed a problem where IE miscalculates the width of the parent element as 100% of the document width.
    //$(photo).css({'float': 'none', marginLeft: 'auto', marginRight: 'auto'});

    $(photo).css({'float': 'none'});

    // Hides SELECT elements in IE6 because they would otherwise sit on top of the overlay.
    if (isIE6) {
        $('select').not($box.find('select')).filter(function () {
            return this.style.visibility !== 'hidden';
        }).css({'visibility': 'hidden'}).one(event_cleanup, function () {
            this.style.visibility = 'inherit';
        });
    }

    callback = function () {
        var preload, 
            i, 
            total = $related.length, 
            iframe, 
            frameBorder = 'frameBorder', 
            allowTransparency = 'allowTransparency', 
            complete, 
            src, 
            img, 
            data;

        if (!open) {
            return;
        }

        function removeFilter() {
            if (isIE) {
                $box[0].style.removeAttribute('filter');
            }
        }

        complete = function () {
            clearTimeout(loadingTimer);
            $loadingOverlay.hide();
            trigger(event_complete, settings.onComplete);
        };

        if (isIE) {
            //This fadeIn helps the bicubic resampling to kick-in.
            if (photo) {
                $loaded.fadeIn(100);
            }
        }

        $title.html(settings.title).add($loaded).show();

        if (total > 1) { // handle grouping
            if (typeof settings.current === "string") {
                $current.html(settings.current.replace('{current}', index + 1).replace('{total}', total)).show();
            }

            $next[(settings.loop || index < total - 1) ? "show" : "hide"]().html(settings.next);
            $prev[(settings.loop || index) ? "show" : "hide"]().html(settings.previous);

            if (settings.slideshow) {
                $slideshow.show();
            }

            // Preloads images within a rel group
            if (settings.preloading) {
                preload = [
                    getIndex(-1),
                    getIndex(1)
                ];
                while (i = $related[preload.pop()]) {
                    data = $.data(i, colorbox);

                    if (data && data.href) {
                        src = data.href;
                        if ($.isFunction(src)) {
                            src = src.call(i);
                        }
                    } else {
                        src = i.href;
                    }

                    if (isImage(src)) {
                        img = new Image();
                        img.src = src;
                    }
                }
            }
        } else {
            $groupControls.hide();
        }

        if (settings.iframe) {
            iframe = $tag('iframe')[0];

            if (frameBorder in iframe) {
                iframe[frameBorder] = 0;
            }
            if (allowTransparency in iframe) {
                iframe[allowTransparency] = "true";
            }
            // give the iframe a unique name to prevent caching
            iframe.name = prefix + (+new Date());
            if (settings.fastIframe) {
                complete();
            } else {
                $(iframe).one('load', complete);
            }
            iframe.src = settings.href;
            if (!settings.scrolling) {
                iframe.scrolling = "no";
            }
            $(iframe).addClass(prefix + 'Iframe').appendTo($loaded).one(event_purge, function () {
                iframe.src = "//about:blank";
            });
        } else {
            complete();
        }

        if (settings.transition === 'fade') {
            $box.fadeTo(speed, 1, removeFilter);
        } else {
            removeFilter();
        }
    };

    if (settings.transition === 'fade') {
        $box.fadeTo(speed, 0, function () {
            publicMethod.position(0, callback);
        });
    } else {
        publicMethod.position(speed, callback);
    }
};

publicMethod.load = function (launched) {
    var href, setResize, prep = publicMethod.prep;

    active = true;

    photo = false;

    element = $related[index];

    if (!launched) {
        makeSettings();
    }

    trigger(event_purge);

    trigger(event_load, settings.onLoad);

    settings.h = settings.height ?
            setSize(settings.height, 'y') - loadedHeight - interfaceHeight :
            settings.innerHeight && setSize(settings.innerHeight, 'y');

    settings.w = settings.width ?
            setSize(settings.width, 'x') - loadedWidth - interfaceWidth :
            settings.innerWidth && setSize(settings.innerWidth, 'x');

    // Sets the minimum dimensions for use in image scaling
    settings.mw = settings.w;
    settings.mh = settings.h;

    // Re-evaluate the minimum width and height based on maxWidth and maxHeight values.
    // If the width or height exceed the maxWidth or maxHeight, use the maximum values instead.
    if (settings.maxWidth) {
        settings.mw = setSize(settings.maxWidth, 'x') - loadedWidth - interfaceWidth;
        settings.mw = settings.w && settings.w < settings.mw ? settings.w : settings.mw;
    }
    if (settings.maxHeight) {
        settings.mh = setSize(settings.maxHeight, 'y') - loadedHeight - interfaceHeight;
        settings.mh = settings.h && settings.h < settings.mh ? settings.h : settings.mh;
    }

    href = settings.href;

    loadingTimer = setTimeout(function () {
        $loadingOverlay.show();
    }, 100);

    if (settings.inline) {
        // Inserts an empty placeholder where inline content is being pulled from.
        // An event is bound to put inline content back when ColorBox closes or loads new content.
        $tag(div).hide().insertBefore($(href)[0]).one(event_purge, function () {
            $(this).replaceWith($loaded.children());
        });
        prep($(href));
    } else if (settings.iframe) {
        // IFrame element won't be added to the DOM until it is ready to be displayed,
        // to avoid problems with DOM-ready JS that might be trying to run in that iframe.
        prep(" ");
    } else if (settings.html) {
        prep(settings.html);
    } else if (isImage(href)) {
        $(photo = new Image())
        .addClass(prefix + 'Photo')
        .error(function () {
            settings.title = false;
            prep($tag(div, 'Error').html(settings.imgError));
        })
        .load(function () {
            var percent;
            photo.onload = null; //stops animated gifs from firing the onload repeatedly.

            if (settings.scalePhotos) {
                setResize = function () {
                    photo.height -= photo.height * percent;
                    photo.width -= photo.width * percent;   
                };
                if (settings.mw && photo.width > settings.mw) {
                    percent = (photo.width - settings.mw) / photo.width;
                    setResize();
                }
                if (settings.mh && photo.height > settings.mh) {
                    percent = (photo.height - settings.mh) / photo.height;
                    setResize();
                }
            }

            if (settings.h) {
                photo.style.marginTop = Math.max(settings.h - photo.height, 0) / 2 + 'px';
            }

            if ($related[1] && (settings.loop || $related[index + 1])) {
                photo.style.cursor = 'pointer';
                photo.onclick = function () {
                    publicMethod.next();
                };
            }

            if (isIE) {
                photo.style.msInterpolationMode = 'bicubic';
            }

            setTimeout(function () { // A pause because Chrome will sometimes report a 0 by 0 size otherwise.
                prep(photo);
            }, 1);
        });

        setTimeout(function () { // A pause because Opera 10.6+ will sometimes not run the onload function otherwise.
            photo.src = href;
        }, 1);
    } else if (href) {
        $loadingBay.load(href, settings.data, function (data, status, xhr) {
            prep(status === 'error' ? $tag(div, 'Error').html(settings.xhrError) : $(this).contents());
        });
    }
};

// Navigates to the next page/image in a set.
publicMethod.next = function () {
    if (!active && $related[1] && (settings.loop || $related[index + 1])) {
        index = getIndex(1);
        publicMethod.load();
    }
};

publicMethod.prev = function () {
    if (!active && $related[1] && (settings.loop || index)) {
        index = getIndex(-1);
        publicMethod.load();
    }
};

// Note: to use this within an iframe use the following format: parent.$.fn.colorbox.close();
publicMethod.close = function () {
    if (open && !closing) {

        closing = true;

        open = false;

        trigger(event_cleanup, settings.onCleanup);

        $window.unbind('.' + prefix + ' .' + event_ie6);

        $overlay.fadeTo(200, 0);

        $box.stop().fadeTo(300, 0, function () {

            $box.add($overlay).css({'opacity': 1, cursor: 'auto'}).hide();

            trigger(event_purge);

            $loaded.remove();

            setTimeout(function () {
                closing = false;
                trigger(event_closed, settings.onClosed);
            }, 1);
        });
    }
};

// Removes changes ColorBox made to the document, but does not remove the plugin
// from jQuery.
publicMethod.remove = function () {
    $([]).add($box).add($overlay).remove();
    $box = null;
    $('.' + boxElement)
        .removeData(colorbox)
        .removeClass(boxElement)
        .die();
};

// A method for fetching the current element ColorBox is referencing.
// returns a jQuery object.
publicMethod.element = function () {
    return $(element);
}

;

    publicMethod.settings = defaults;

}(jQuery, document, this)); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T11:42:08.860

听起来好像您需要使用颜色框的回调才能使其正常工作。

这是一个例子。

```
$.colorbox({
  open: true,
  height: 500,
  width: 500,
  onComplete: function() {
      $("#colorbox").wrap("<div id='colorbox_totalWrapper' />")
  },
  onCleanup: function() {
      $("#colorbox").unwrap("<div id='colorbox_totalWrapper' />")
  }
}); 
```

来自 Joy 下面的评论。

*   这是一个显示此工作的 jsfiddle - [http://jsfiddle.net/joycse06/7U6Rn/](http://jsfiddle.net/joycse06/7U6Rn/)

**参考**

[http://api.jquery.com/wrap/](http://api.jquery.com/wrap/)

[http://api.jquery.com/unwrap/](http://api.jquery.com/unwrap/)

# java - 自动接受重复和排序输入的类

> ID：11049905
> 
> 赞同：1
> 
> 时间：2012-06-15T11:32:28.903
> 
> 标签：java, sorting, collections

我知道***Treeset***自动对输入进行排序但不接受重复项。java 中是否有任何类 Collection 允许重复值或对象并对给定的输入进行排序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:36:37.007

[List](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)，以及`Collection.sort()`将满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:48:42.463

用户列表实现并使用对其进行排序`Collection.sort()`

```
List<String> list=new ArrayList<String>();
    list.add("A");
    list.add("C");
    list.add("A");
    list.add("B");
    list.add("A");

    System.out.println(list);
    Collections.sort(list);
    System.out.println(list); 
```

但是如果你在集合中使用你的对象，那么实现`Comparable`接口和覆盖`compare(Object obj,Object obj1)`方法。

否则，您可以编写`Comparator`然后将其传递给`sort`方法。

# regasm - regasm 注册表错误

> ID：11049912
> 
> 赞同：2
> 
> 时间：2012-06-15T11:33:10.620
> 
> 标签：regasm

我输入这个：

> regasm COMTest.dll /tlb:COMTest.tlb /codebase COMTest

我收到以下错误：

> 注册导出的类型库时出错：访问 OLE 注册表时出错。（来自 HRESULT 的异常：0x8002801C (TYPE_E_REGISTRYACCESS)）

这是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T11:46:58.477

找到解决方案 - 我以为我是管理员，但似乎我必须以管理员身份运行 cmd。（右键单击 cmd 并选择该选项）

你每天学习新的东西 ：-）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:01:38.207

如果您输入错误的 tlb 文件参数的文件路径/名称，您也可以得到此信息。我的同事正在使用以下内容：**regasm dummy.dll /tlb: *dummy.dll* /codebase**并得到了同样的错误。

# python - Accessing inner method in python from another method

> ID：11049913
> 
> 赞同：1
> 
> 时间：2012-06-15T11:33:12.593
> 
> 标签：python

I am trying to access inner method in python from another method but on doing this it is giving me "AttributeError: 'function' object has no attribute 'b'"

My Scenario is:

```
class Foo:
    def first_method(self):
        something
        def test(self):
           print 'Hi'

    def second_method(self):
       a = self.test() 
```

The line `a = self.test()` is throwing an error.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T11:43:49.990

该功能`test`仅在本地范围内可用`first_method`。如果您想在其他功能中访问它，则必须在某处保留对它的引用。像下面这样的东西会起作用：

```
>>> class Foo:
...     def first_method(self):
...         def test():
...            print 'Hi'
...         self.test = test
...     def second_method(self):
...         self.test()
... 
>>> f = Foo()
>>> f.second_method()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 7, in second_method
AttributeError: Foo instance has no attribute 'test'
>>> f.first_method()
>>> f.second_method()
Hi 
```

请注意，代码中的问题有一些更改。例如，该函数`test`不接受任何参数。还要注意`first_method`必须在调用之前`second_method`。

# java - java-如何在逻辑上处理 n 级 for 循环，其中 n 是一个变量

> ID：11049916
> 
> 赞同：2
> 
> 时间：2012-06-15T11:33:27.843
> 
> 标签：java

在Java程序中，我得到一些数据，每个值都被分配了一个名称-每个数据项都有一个“级别”，它是一个数值。

对于级别 1，有“n”个值——数据项有名称

```
 1-1, 1-2, 1-3.....1-n. 
```

现在，第 2 级项目的名称源自第 1 级的数据项目。

因此，可以有 2 级的“m”值，对应于每个 1 级项目。在每个数据项的名称中，每个已命名的节对应一个级别，与名称的其他节之间用“~”分隔。

例如，

```
 1-1~2-1, 1-1~2-2, 1-1~2-3......1-1~2-m --->level2 corresp. to level 1 item "1-1"
    1-2~2-1, 1-2~2-2, 1-2~2-3, ....1-2~2-m--->level2 corresp. to level 1 item "1-2" 
```

现在，我想创建一个函数，其中参数是级别数，并且我想以编程方式访问该级别的所有项目。

例如，我可以在另一个 for 循环中创建一个 for 循环，以访问级别 2 的项目。

但是对于 level=x，我如何做到这一点，其中 x 是一个变量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T11:37:34.680

最简单的方法是使用递归和循环。

```
public static int count(List list) {
  int sum = 0;
  for(Object o: list) {
     sum += o instanceof List ? count((List) o) : 1;
  }
  return sum;
} 
```

如您所见，这将遍历每个级别的每个元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T11:36:45.887

如果我正确理解您的要求，那么您的结构对我来说似乎非常像一棵树。

您有一个值层次结构，每个值都是给定级别的“节点”，每个节点可以有多个子节点，可以有多个子节点......

我将为这些值创建一个树状结构并递归处理它们。

这有帮助吗？我可以尝试进一步解释我的意思。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T11:37:18.940

您可以尝试递归地解决这个问题，而不是迭代地。

# c# - RDLC report keeps loading without showing data

> ID：11049917
> 
> 赞同：4
> 
> 时间：2012-06-15T11:33:27.833
> 
> 标签：c#, reporting, rdlc

I want to generate a rdlc report by manually populating values to dataset because I send the date as an input to the query. I use the following code to do that

```
//my list get populated with the relevant records according to its date and I'm using the tableadapter of my dataset to do that

List<DailySalesEntity> list = DailySalesHandler.GetSalesByDate(dateTimePicker1.Value);
            reportViewer1.LocalReport.DataSources.Clear();
            Microsoft.Reporting.WinForms.ReportDataSource report = new Microsoft.Reporting.WinForms.ReportDataSource("DataSet_Dailysales", list);
            reportViewer1.LocalReport.DataSources.Add(report);
            reportViewer1.LocalReport.Refresh(); 
```

. I’m using a tablix to show my data using the dataset.I have set the correct report to the report viewer. I don’t get any exceptions. But the report keeps loading and does not show the report. What is it I’m doing wrong.

How can I populate the dataset by passing a parameter to the query, and use the resulting dataset in the report?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-02T15:56:38.483

我刚遇到这个问题并解决了。装载标志一直显示，从未消失。就我而言，问题是我没有处理`IsPostBack`价值。生成回发，`LocalReport.Refresh()`如果不处理，它将继续发布和发布。

这是我的问题。通过墙刷新页面一直在做 PostBacks

```
protected void Page_Load(object sender, EventArgs e)
{
    // Report data source code...
    myReport.LocalReport.Refresh();
} 
```

解决方案：

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostBack)
    {
        // Report data source code...
        myReport.LocalReport.Refresh();
    }
} 
```

因此，请检查您是否正在处理 PostBack 而不是无限循环。

# z3 - Z3 4.0 Z3_parse_smtlib2_string

> ID：11049918
> 
> 赞同：1
> 
> 时间：2012-06-15T11:33:37.587
> 
> 标签：z3

我通过 C API/JNA/Scala 将 Z3 与 SMT2 一起使用，并且似乎工作得很好。

我想尝试增量求解。所以起初我使用*Z3_parse_smtlib2_string*翻译这个：

```
(declare-fun x () Int)
(assert (>= x 0))
(check-sat)
(get-model) 
```

然后我取回*Z3_ast ，通过**Z3_solver_assert*将其放入求解器，使用Z3_solver_check 检查并通过*Z3_solver_get_model*检索模型（如果检查返回令人满意，本例中就是这种情况）。到目前为止没有问题。

但是当我想另外断言这样的事情时：

```
(assert (= x 1)) 
```

我被困在调用*Z3_parse_smtlib2_string*的地方，因为它抱怨说 x 是一个未知常量。如果我还添加了*declare-fun*到第二个片段，我会得到一个无效的参数错误。这个变量不应该已经存在于环境中吗？我是否必须设置*Z3_parse_smtlib2_string*的附加参数？我怎样才能把那些从预先解析的公式中取出来？

也使用[(set-option :global-decls true)](https://stackoverflow.com/questions/7337783/declare-symbols-that-remain-valid-outside-their-scope)不起作用，因为 Z3 告诉我*初始化后无法修改此选项值*。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T12:36:05.143

[`Z3_parse_smtlib2_string`](http://research.microsoft.com/en-us/um/redmond/projects/z3/group__capi.html#ga199452aebb37cb160bd6abead8a84d08)可以作为现有排序和常量的额外参数列表。因此，第二次调用它时，您可以告诉它您已经知道`x`代表什么。

要从第一个解析过程中恢复声明的常量和排序，您可以使用[`Z3_get_smtlib_num_decls`](http://research.microsoft.com/en-us/um/redmond/projects/z3/group__capi.html#ga33fc0f55a4d60408a6e15d89da5b1cbe),`Z3_get_smtlib_decl`并且类似地用于排序。

# c++ - Samples of illumination level changes in photos for image processing project

> ID：11049919
> 
> 赞同：0
> 
> 时间：2012-06-15T11:33:38.770
> 
> 标签：c++, image, image-processing, opencv, computer-vision

I'm working on an OpenCV project and for that I need sample photos of Illumination changes to test my image processing project on, for example:

*   The same indoor scene with the lights off and on.
*   The same outdoor scene on a sunny day at different times of the day so the light comes from different directions.
*   The same outdoor scene both on a cloudy and a sunny day.
*   etc.

So basically pairs (or larger sets) of pictures of the same scene, taken from exactly the same position with the same camera, but under different illumination circumstances.

Does anyone know where I can find such sets of samples?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:37:56.897

您可以查看几个图像数据库，例如[http://www.imageprocessingplace.com/root_files_V3/image_databases.htm](http://www.imageprocessingplace.com/root_files_V3/image_databases.htm)。在那里你应该找到适合你的目的的东西。

# macos - 通过按钮组合杀死图形界面并切换到终端

> ID：11049920
> 
> 赞同：-1
> 
> 时间：2012-06-15T11:33:43.483
> 
> 标签：macos, osx-snow-leopard, osx-server

我需要通过一个按钮组合来杀死mac上的x窗口系统（我是linux用户，我不知道mac上的图形界面如何调用，我需要从图形界面切换到终端）。

是否有任何按钮组合可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:37:35.430

两种选择：

1.  以单用户模式重启 -重启时按住`Command`+ `S`

2.  如果您将登录方法设置为用户名 + 密码，则输入`>console`用户名且无密码

# c# - System.Timers.Timer 随每次迭代而衰减

> ID：11049921
> 
> 赞同：2
> 
> 时间：2012-06-15T11:33:52.657
> 
> 标签：c#, wpf, timer

好的，所以我正在学习 C#/.NET 并且到目前为止一直坚持使用 winforms，但 WPF 似乎适合这个项目。

我有一个显示图像数组的 WrapPanel。有时这个数组会溢出窗口的范围。我正在尝试循环浏览“页面”，直到使用计时器显示所有图像。

我将在计时器经过事件处开始我的代码示例，此时我的 WrapPanel (wrapPanel1) 已经被填充并检查是否存在溢出：

```
public void t2_Elapsed(object source, ElapsedEventArgs e)
    {

        wrapPanel1.Dispatcher.BeginInvoke((ThreadStart)delegate 
        {
            remaining = Convert.ToInt32(imgCount) - (iteration*xDensity);

            label1.Content = iteration;
            label2.Content = remaining;
            label3.Content = imgCount;

            if (remaining <= 1)
            {
                Thickness marginTop = wrapPanel1.Margin;
                marginTop.Top = 0;
                wrapPanel1.Margin = marginTop;
                wrapPanel1.Children.Clear();
                t2.Stop();
                imgLayout();
            }

            else
            {
                Thickness marginTop = wrapPanel1.Margin;
                marginTop.Top = -((prevResY+10) * iteration);
                wrapPanel1.Margin = marginTop;
                iteration++;
            }
        });
    } 
```

imgCount 是一个双精度数，表示 WrapPanel 中的图像总数（由于与代码中其他地方的另一个双精度交互，因此需要双精度）

xDensity 是用户定义的 int，用于设置水平显示的图像数量。

prevResY 是每张照片的高度（所有相同的分辨率），我添加 10 以占填充 WrapPanel 时设置的 5px 边距。通过乘以迭代，我总是将 wrapPanel1 向上移动 1 行。

imgLayout(); 重新开始这个过程，因为每次我浏览所有页面时，我都需要检查是否有任何新图像，并在最后敲掉任何旧图像。这一切都在 imgLayout() 中处理。

我更新标签只是为了在调试时可以密切关注它，它们返回的正是我期望的值。

正如您可能从问题标题中收集到的那样，我的问题是，随着 t2_elapsed 的每次迭代，间隔似乎会增加。如果我将间隔设置为 10 毫秒只是为了观察它的行为，那么延迟会呈指数增长。30 秒后延迟约为 25 秒，高于最初观察到的 0.1。RAM 使用率也在缓慢攀升，这向我表明循环重新启动时某些资源没有被处理，不确定这是原因还是单独的问题。

希望有人能帮忙！如果我做了一些愚蠢的事情，请告诉我，我还在学习！

非常感谢

- - 更新 - -

好的，所以我认为这与

```
wrapPanel1.Children.Clear(); 
```

线。我删除了它，让它填满，我没有延迟，但这显然不是最终的解决方案。无论我把那条线放在哪里，它都会重现问题。

----更新**2** ----

好吧，我现在感觉很愚蠢。在启动计时器的 imgLayout() 方法的早些​​时候，我正在使用：

```
t2.Interval = new TimeSpan(0, 0, 0, 0, 5000);
t2.Tick += new EventHandler(t2_Tick);
t2.Start(); 
```

每次循环重新启动时，我都在愚蠢地声明事件处理程序。我将它设置在 Window_Loaded 方法中，它的工作方式与现在预期的完全一样，只是稍微整理了一下，并实现了一种一次滚动一整页而不是一行的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T11:38:07.770

在处理 WPF 中的重复操作时，建议使用[System.Windows.Threading.DispatcherTimer 。](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer%28v=vs.95%29.aspx)它将自动在 dispather 线程上执行其代码，而无需`BeginInvoke`.

# sql - select语句中的HQL比较

> ID：11049924
> 
> 赞同：2
> 
> 时间：2012-06-15T11:34:09.020
> 
> 标签：sql, select, hql

考虑 HQL 中的以下查询：

```
SELECT m.id, (SELECT (COUNT(*) > 0) FROM SubqueryTable...) FROM MyTable AS m; 
```

我需要从选择内的选择查询中以布尔值形式返回信息，其中包含是否有任何满足该查询的条目的信息。

上面的查询在 SQL 中可以正常工作，但是休眠给了我一个错误。我不能将比较运算符与聚合函数一起使用。

在 HQL 中从 select 子句中的 subselect 获取信息的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T12:14:32.343

不确定如何将其转换为 HQL，但您的查询可以写为：

```
SELECT m.id,
       (SELECT COUNT(*) FROM SubqueryTable...) > 0
         AS b
FROM MyTable AS m; 
```

但是也许您可以使用它-这似乎在使用`INT`列时绕过了问题：

```
SELECT m.id,
       CASE WHEN (SELECT COUNT(*) FROM SubqueryTable...) > 0
           THEN 1
           ELSE 0
       END AS b
FROM MyTable AS m; 
```

您也可以尝试`EXISTS`：

```
SELECT m.id,
       EXISTS (SELECT * FROM SubqueryTable...) 
         AS b
FROM MyTable AS m; 
```

或者：

```
SELECT m.id,
       CASE WHEN EXISTS (SELECT * FROM SubqueryTable...) 
           THEN 1
           ELSE 0
       END AS b
FROM MyTable AS m; 
```

# iphone - 如何为coverflow中的UIimage设置操作？

> ID：11049941
> 
> 赞同：1
> 
> 时间：2012-06-15T11:35:23.933
> 
> 标签：iphone, ios, xcode, uiimage, coverflow

这是我的代码，我创建了一组图像，通过修饰图像将其引导至另一个页面。我得到了图像的封面，但无法为图像设置操作。有人可以帮忙吗？...

```
[super viewDidLoad];

loadImagesOperationQueue = [[NSOperationQueue alloc] init];
NSString *imageName;

for (int i=0; i<10; i++) {
    imageName = [[NSString alloc] initWithFormat:@"cover_%d.jpg", i];

    [(AFOpenFlowView *)self.view setImage:[UIImage imageNamed:imageName] forIndex:i];
    [imageName release];
    NSLog(@"%d is the index",i);

}
[(AFOpenFlowView *)self.view setNumberOfImages:10];

- (UIImage *)defaultImage{

return [UIImage imageNamed:@"cover_1.jpg"];
} 
```

在这里，我按照以下链接教程获取封面流.. [http://blog.objectgraph.com/index.php/2010/04/09/how-to-add-coverflow-effect-on-your-iphone-应用程序-openflow/](http://blog.objectgraph.com/index.php/2010/04/09/how-to-add-coverflow-effect-on-your-iphone-app-openflow/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T11:39:28.310

编辑：

如果您需要一种方法来对点击图像做出反应，请查看[我为 AFOpenFlow 制作的这个 fork](https://github.com/sdesimone/OpenFlow)。您将看到一个新类 ，`SDSOpenFlowView`它派生自`AFOpenFlow`，以及一个`SDSOpenFlowViewDelegate`扩展原始委托协议的类。它还支持图像的抖动和长按。

旧答案：

为您的封面流视图设置一个委托，例如。如果您在控制器内部执行此操作并让您的控制器成为委托：

```
coverFlowView.delegate = self; 
```

然后定义这个方法

```
- (void)openFlowView:(AFOpenFlowView *)openFlowView selectionDidChange:(int)index; 
```

在您的控制器中：当用户选择不同的页面时将调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T12:07:01.807

查找 - [https://github.com/appcelerator/titanium_mobile/blob/master/iphone/Classes/AFOpenFlow/AFOpenFlowView.m](https://github.com/appcelerator/titanium_mobile/blob/master/iphone/Classes/AFOpenFlow/AFOpenFlowView.m)

您已经在 AFOpenFlowView.m 中有这个事件（甚至是 touchesEnded），只需对其进行自定义并做必要的事情。

如果您遇到任何问题，请发表评论。

# python - 如何在 Python 中为变量创建别名？

> ID：11049942
> 
> 赞同：13
> 
> 时间：2012-06-15T11:35:24.207
> 
> 标签：python, variables, alias

正常方式：

```
class A:
    def __init__(self):
        self.a.b.c = 10

    def another_method(self):
        self.a.b.c = self.a.b.c * 10 
```

别名方法：

```
class A:
    def __init__(self):
        self.a.b.c = 10         
        alias self.aliased = self.a.b.c  # Creates an alias 

    def another_method(self):
        self.aliased = self.aliased * 10  # Updates value of self.a.b.c 
```

如何在 Python 中实现别名？我想这样做的原因是为了减少由于长变量名造成的混乱。**这是一个多线程环境**，所以简单地复制到局部变量是行不通的。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-15T11:58:28.967

解决这个问题的方法是使用 getter 和 setter 方法——幸运的是 Python 有[内置`property()`函数](http://docs.python.org/library/functions.html#property)来隐藏它的丑陋之处：

```
class A:
    def __init__(self):
        self.a.b.c = 10

    @property
    def aliased(self):
        return self.a.b.c

    @aliased.setter
    def aliased(self, value):
        self.a.b.c = value

    def another_method(self):
        self.aliased *= 10  # Updates value of self.a.b.c 
```

一般来说，像这样的深层嵌套属性`self.a.b.c`是糟糕设计的标志——你通常不希望类必须知道距离 3 个关系的对象——这意味着对给定项目的更改可能会导致整个代码库出现问题。尝试让每个类处理它周围的类是一个更好的主意，仅此而已。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-15T11:39:27.077

Python 不会隐式复制任何内容，它只存储引用，因此无论您在哪个环境中它都可以工作。

```
# this creates a list and stores a *reference* to it:
really_really_long_variable_name = [] 
# this creates another new reference to the *same list*. There's no copy.
alias = really_really_long_variable_name

alias.append('AIB')
print really_really_long_variable_name 
```

你会得到`['AIB']`

# python - 在 Ubuntu 上编译 cld 失败

> ID：11049945
> 
> 赞同：0
> 
> 时间：2012-06-15T11:35:39.580
> 
> 标签：python, ubuntu

我正在尝试编译[cld](https://github.com/mzsanford/cld)，当我运行时`./configure && make`出现此错误：

```
configure: error: cannot find install-sh or install.sh in "." "./.." "./../.." 
```

并且在运行时：

```
cd cld/ports/python
make install 
```

我得到：

```
sudo python -u setup.py install
running install
running build
running build_ext
building 'cld' extension
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/cld -I/usr/include/python2.7 -c pycldmodule.cc -o build/temp.linux-x86_64-2.7/pycldmodule.o
cc1plus: warning: command line option ‘-Wstrict-prototypes’ is valid for Ada/C/ObjC but not for C++ [enabled by default]
pycldmodule.cc:9:57: fatal error: encodings/compact_lang_det/compact_lang_det.h: No such file or directory
compilation terminated.
error: command 'gcc' failed with exit status 1
make: *** [install] Error 1 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:12:31.393

使用 autoreconf 之前`configure`：

```
autoreconf -vi
./configure --prefix=/usr/local #or --prefix=/usr
make
sudo make install 
```

# android - 获取联系人按受欢迎程度排序

> ID：11049958
> 
> 赞同：0
> 
> 时间：2012-06-15T11:36:30.007
> 
> 标签：android, contacts, android-contacts

我有一个应用程序，我想显示联系人按受欢迎程度排序，例如呼叫该联系人的次数。另一种选择：按任何有图片的人排序。我希望它在没有用户选择的情况下自动完成！我将不胜感激任何帮助！即使是部分答案！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T11:44:25.940

使用这个查询

```
 ContentResolver cr = getContentResolver();
  Cursor cur2 = cr.query(ContactsContract.Contacts.CONTENT_URI,
          null, null, null, "times_contacted desc");
  cur2.moveToFirst();

  int name=cur2.getColumnIndex("display_name");
  for(int i=0;i<cur2.getCount();i++){
    Log.v("name",""+cur2.getString(name));
    Log.v("times",""+cur2.getString(0));
    cur2.moveToNext();
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:48:28.467

如果联系人存储在数据库中，您需要添加一个额外的列，您将在其中输入联系人被调用的次数。

当用户拨打电话时，您需要添加一些代码以将存储在“联系人被呼叫次数”列中的值增加 +1。

当您列出联系人时，只需按“联系人被呼叫的次数”列对其进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T12:23:56.717

我们没有任何此类列来检查联系人是否有照片... bt 如果存在，您可以获取 eact 联系人的联系人照片，然后将其放在顶部，否则不...

使用此代码获取照片：（只需传递每个联系人的内容解析器和 ID）

```
public static Bitmap loadContactPhoto(ContentResolver cr, long id) {
    Uri uri = ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI, id);
    InputStream input = ContactsContract.Contacts.openContactPhotoInputStream(cr, uri);
    // InputStream input = ContactsContract.Contacts.Photo
    if (input == null) {
        return null;
    }
    return BitmapFactory.decodeStream(input); 
```

# java - 在视图之间传递对象

> ID：11049965
> 
> 赞同：0
> 
> 时间：2012-06-15T11:37:00.397
> 
> 标签：java, jsf, jsf-2

在 JSF 2 中，您可以传递 ids、Strings 其他可以作为请求参数发送的东西`f:viewParam`或`@ManagedProperty`（即[在此处](https://stackoverflow.com/questions/4888942/viewparam-vs-managedpropertyvalue-param-id)讨论）。

但是，我想在视图之间传递对象，从 view1 到 view2。我的支持豆是`@ViewScoped`。我尝试了以下方法：

```
<f:setPropertyActionListener value="#{view1Bean.myObject}" target="#{view2Bean.myObject}" /> 
```

这会`view2Bean`在 view1 上创建一个，在查看 view2 时它不再存在。所以，`view2Bean.myObject`是`null`，因为该属性从未在 的特定实例上设置过`view2bean`。

我考虑过使用 Flash 范围，这似乎正是用于此目的的工具。但是，我在某处读到 BalusC，说它在我正在使用的 Mojarra 中损坏了。

在视图之间传递对象的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:54:44.373

> *但是，我想在视图之间传递对象，从 view1 到 view2。*

您可以将对象的唯一 ID 作为参数传递给下一个视图，并将 a 附加`Converter`到`<f:viewParam>`.

```
<f:viewParam name="id" value="#{bean.entity}" converter="entityConverter" /> 
```

* * *

> *我考虑过使用 Flash 范围，这似乎正是用于此目的的工具。但是，我在某处读到 BalusC，说它在我正在使用的 Mojarra 中损坏了。*

由于 Flash cookie 的工作方式，这将在当前 Mojarra 版本中仅当视图位于不同路径（文件夹）时才会失败。如果它们在**同一**路径（文件夹）中，那么它应该可以正常工作。

# validation - JSF：在验证成功或失败时有条件地更新

> ID：11049974
> 
> 赞同：7
> 
> 时间：2012-06-15T11:37:36.880
> 
> 标签：validation, jsf, jsf-2, primefaces, java-ee-6

在我的 JSF 应用程序中，我试图在我的命令按钮更新属性中添加一些条件，以便在验证失败/成功时我可以控制组件进行更新。

参考[PrimeFaces：](https://stackoverflow.com/questions/9638290/primefaces-conditional-update-on-validation)我尝试使用的验证条件更新

```
<p:commandLink process="@form" listener="#{foo}" 
  update="somethingElse" oncomplete="if (!args.validationFailed) $("#link").click();">
<p:commandLink style="display:none" id="link"
  update="something"> 
```

但是我不知道为什么这种方法对我不起作用..该特定组件的单击事件对我不起作用..我尝试执行相同问题的已接受答案，但我不明白如何解决目的...

我的目的是根据验证成功或失败的结果有条件地更新......支持我有 3 个组件 XY Z.. 我正在尝试做这样的事情..

```
<p:commandLink process="@form" listener="#{foo}" 
      update="if(Validation fail)updateSomething[e.g X and Y] **else** update somethingelse[e.g X  Y and Z]"> 
```

更准确地说，如果验证失败，那么我只想在验证成功时更新 X 和 Y 组件，而不是更新 XY 和 Z 组件。

请帮帮我..提前谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-15T12:41:53.660

第一个问题是您拥有的 EL 语法无效。您在 JavaScript 代码中使用`"`而不是过早地关闭了属性值。`'`要么转义嵌套引号，`\"`要么直接使用`'`。

```
<p:commandLink process="@form" listener="#{foo}" update="somethingElse" 
    oncomplete="if (!args.validationFailed) $('#link').click();"> 
```

第二个可能的问题是客户端ID`<p:commandLink id="link">`根本不是`"link"`。默认情况下，它带有父`<h:form>`组件的 ID。客户端 ID 是 JSF 生成的 HTML 元素 ID。在网络浏览器中打开页面，右键单击并*查看源代码*以自己查看。它看起来像`id="formId:link"`. 您需要在 jQuery 选择器中准确使用该 ID。

```
<p:commandLink process="@form" listener="#{foo}" update="somethingElse" 
    oncomplete="if (!args.validationFailed) $('#formId\\:link').click();"> 
```

### 也可以看看：

*   [如何使用 jQuery 选择 JSF 组件？](https://stackoverflow.com/questions/7927716/how-to-select-primefaces-ui-or-jsf-components-using-jquery)

* * *

另一种方法是改为在后面的方法中执行具体工作`listener="#{foo}"`。

```
if (!facesContext.isValidationFailed()) {
    RequestContext.getCurrentInstance().update("somethingElse");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-13T17:42:19.600

我尝试了标记的答案，但它没有解决我的问题，因为 args 不包含名为“validationFailed”的参数，但是我找到了从控制器添加此参数的方法。

```
 import org.primefaces.context.RequestContext;

 RequestContext requestContext = RequestContext.getCurrentInstance();
 requestContext.addCallbackParam("validationError", true);
 JSFUtils.displayErrorMessage("My message is here!"); 
```

& 在 xhtml 中我添加了以下命令链接

```
 <p:commandLink ajax="true" action="#{myController.myMethod}"
 oncomplete="if(args.validationError) alert('Error!');"/> 
```

# c# - 如何在 XAML 或运行时更改 WPF 功能区的 Control ToolTipTitle 字体？

> ID：11049976
> 
> 赞同：1
> 
> 时间：2012-06-15T11:37:43.907
> 
> 标签：c#, wpf

我创建了一个 RibbonButton 并以这种方式给出了它的 Tooltip

```
<ribbon:RibbonButton Label="My Label" 
     ToolTipTitle="{Binding Path=Label, RelativeSource={RelativeSource Self}}" /> 
```

现在在运行时，当我将按钮标签字体系列更改为印地语并在印地语中设置标签文本时，标签会在文本和字体方面正确显示，但工具提示标题文本会发生变化（由于 RelativeResource）但它的字体不会改变（因为我将文本视为垃圾字符）。这意味着工具提示文本正在改变，但字体没有改变。

如何在运行时更改 ToolTipTitle 字体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:11:33.817

我认为功能区按钮上的标准工具提示属性不可能做到这一点。但是您可以构建自己的工具提示：

```
<ribbon:RibbonButton.ToolTip>
  <StackPanel Orientation="Vertical">
    <TextBlock FontSize="18" FontWeight="Bold" Text="Header" />
    <TextBlock FontSize="14" Text="Content .... " />
  </StackPanel>
</ribbon:RibbonButton.ToolTip> 
```

# javascript - 将 javascript 对象转换为 html 表单兼容查询

> ID：11049979
> 
> 赞同：0
> 
> 时间：2012-06-15T11:37:52.627
> 
> 标签：javascript, forms, node.js

我有一个这种形式的 javascript 对象：

```
var order = {
  "id": 13,
  "name": "Sebastian",
  "items": [
    {
      "id": 5
    }
  ]
  ...
} 
```

我需要以如下所示的格式获取它：

```
order[id] = 13
order[name] = "Sebastian"
order[items][0][id] = 5 
```

在 Javascript 中执行此操作的最佳方法是什么？有没有为此预先构建的功能？

我在带有下划线和 jquery 的 nodeJS 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:58:50.157

那里可能有一个现成的功能，但是这个（快速制作的）功能也应该可以工作：

```
function convert(key, obj) {
  var collector = {};

  function recurse(key, obj) {
    var property, name;
    if( typeof obj === "object" ) {
      for( property in obj ) {
        if( obj.hasOwnProperty(property) ) {
          name = key + "[" + property + "]";
          recurse(name, obj[property]);
        }
      }
    } else {
      collector[key] = String(obj);
    }
  }

  recurse(key, obj);
  return collector;
} 
```

给它一个起始键和对象，你会得到一个带有完整名称和值的“平面”对象：

```
var order = {
  "id": 13,
  "name": "Sebastian",
  "items": [
    {
      "id": 5
    }
  ]
};

var flattened = convert("order", order);

// `flattened` is now:
// {
//   'order[id]': 13,
//   'order[name]': 'Sebastian',
//   'order[items][0][id]': 5
// } 
```

# spring - xUnit 端到端测试 Spring Web 应用程序

> ID：11049985
> 
> 赞同：0
> 
> 时间：2012-06-15T11:38:06.817
> 
> 标签：spring, testing, web-applications, junit

为 Spring JSP Web 应用程序处理以下（集成/单元）测试场景的最佳方法是什么：

*   使用 JUnitRunner 运行
*   访问 Spring 上下文（@Inject bean 到测试中）
*   将请求发送到从测试内部启动的轻量级 Web 服务器，该测试呈现整个 html，包括 JSP
*   自动回滚事务
*   没有浏览器（Selenium 已出）
*   真正运行 servlet 容器（无 MockServlet）来测试 JSP（spring-text-mvc 已出）

目标：

*   使用 Maven 构建周期运行
*   隔离测试 - 每个测试都可以将所有 bean 设置为所需的状态
*   检查 JSP 页面的 html 输出
*   检查 bean 状态/数据库状态

有这个框架吗？我可以组合框架吗？也许我需要设置自己的服务器并启动它，然后对 localhost 运行实际请求。但是我怎样才能影响服务器的上下文并对其运行回滚呢？

感谢您的指点、链接和想法。

* * *

**编辑**

我刚刚阅读了有关使用嵌入式码头测试弹簧应用程序的信息。不确定这是否是正确的方法。我认为问题在于部署的应用程序和我的测试没有相同的上下文。将进一步调查，欢迎对此提出任何想法。

* * *

**编辑2**

找到了另一个听起来很有希望的项目：[JWebUnit](http://today.java.net/pub/a/today/2007/04/12/embedded-integration-testing-of-web-applications.html#conclusion-and-unfinished-business)。将尝试这一点并根据反馈进行更新。很想听听使用该框架解决与我类似的问题的任何经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:24:11.063

我还没有使用它，但这对于 Spring-MVC 测试非常有希望 - [https://github.com/SpringSource/spring-test-mvc](https://github.com/SpringSource/spring-test-mvc)。它满足 1（使用 JUnitRunner 运行）、2（访问 Spring Context）、4（事务回滚支持）、5（无浏览器）。3、不需要启动一个轻量级的webserver，它可以通过编程方式连接整个Spring MVC基础设施并端到端测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:01:31.313

这篇博文可能是一个好的开始[http://www.scarba05.co.uk/blog/2010/07/more-on-integration-testing-of-spring%E2%80%99s-mvc-annotation-mappings-用于控制器/](http://www.scarba05.co.uk/blog/2010/07/more-on-integration-testing-of-spring%E2%80%99s-mvc-annotation-mapppings-for-controllers/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-16T08:39:41.720

自从作为基于容器的测试框架 Jakarta Cactus 退役以来，[Arquillian](http://www.jboss.org/arquillian.html)是最活跃的项目。[在这里](http://planet.jboss.org/post/arquillian_spring_framework_extension_1_0_0_alpha1_released)查看他们最新的 Spring 扩展。它支持许多容器。这是[清单](https://docs.jboss.org/author/display/ARQ/Container+adapters)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T20:52:47.283

我已经在一个用于测试驱动设计的谷歌小组中更详细地发布了这个问题。对于任何努力测试自动化或测试其 Web 应用程序的人来说，这是一个非常有趣的讨论： [Growing Object Oriented Software - Google Group](https://groups.google.com/forum/?fromgroups#!topic/growing-object-oriented-software/siUu67betIs)

# jquery - 如何在 jQuery 中获取 URL

> ID：11049988
> 
> 赞同：1
> 
> 时间：2012-06-15T11:38:16.900
> 
> 标签：jquery, url, filepath

我目前正在使用此代码：

`jQuery("input[type=file]").filestyle({ image: "http://localhost:8888/davidgray/wp-content/themes/davidgray/images/browse.png", imageheight : 22, imagewidth : 72, width : 460 });`

但是，当我将其切换到实时状态时，我当然想要它要打开的 URL，我该如何使它成为动态的？

干杯，史蒂夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T11:43:43.000

只需使用相对 URL

```
 jQuery("input[type=file]").filestyle({
        image: "/davidgray/wp-content/themes/davidgray/images/browse.png",
        imageheight : 22,
        imagewidth : 72,
        width : 460
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:43:31.097

使用 window.location ？

这是一篇值得一读的文章。

[http://davidwalsh.name/javascript-window-location](http://davidwalsh.name/javascript-window-location)

（这是假设您不知道相对 url）

# c++ - 如何从stl向量中最小元素的迭代器位置获取int/size_t值？

> ID：11049991
> 
> 赞同：1
> 
> 时间：2012-06-15T11:38:24.917
> 
> 标签：c++, stl

```
 std::vector<bool> reprVectors::encode(std::vector<float> input){
    std::vector<float> distance;
    for(size_t i=0;i<this->reprVectorsList.size();i++){
            distance.push_back(distBtw(input,this->reprVectorsList[i]));
    }
    std::vector<float>::iterator it= min_element(distance.begin(),distance.end());

    return this->reprVectorsList[it]->code;
}

float reprVectors::distBtw(std::vector<float> input, Node* node){
    double distance=0;
    for(size_t i=0;i<node->valuesInDim.size();i++){
        distance = distance +
                    pow((node->valuesInDim[i]-input[i]),2);
    }
    return (float)pow(distance,0.5);
} 
```

它迭代器给了我距离向量中的最小距离。如何在我的 reprVectorList 中找到对应的位置？如何从 min_element 返回的 it 迭代器中获取 int/size_t 值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T11:49:13.457

您可以使用[std::distance](http://en.cppreference.com/w/cpp/iterator/distance)：

```
auto index = std::distance(distance.begin(), it); 
```

这种方法有利于对迭代器执行算术运算，因为它对所有运算符类型都有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T11:43:08.540

您可以像这样从迭代器中获取“索引”：

```
size_t index = it - distance.begin(); 
```

# javascript - 在 Jasmine 测试中将对 console.log() 的调用重定向到标准输出

> ID：11049996
> 
> 赞同：69
> 
> 时间：2012-06-15T11:38:59.103
> 
> 标签：javascript, jasmine, jasmine-maven-plugin

我通过 jasmine-maven-plugin 使用 Jasmine，我想在 Maven 构建输出中看到 console.log() 消息。有没有办法做到这一点？

如果无法重定向 console.log()，是否有任何其他方法可以从我的测试中记录日志，以便它们显示在 Maven 构建输出中？

我正在以无头方式在 Jenkins 上运行这些测试，并且想要一种从测试中获得一些调试输出的方法。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2015-04-01T10:41:58.673

尝试

```
console.info('foo') 
```

从测试javascripts。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-03-08T17:00:17.893

## 茉莉花 1.x

您可以使用：

```
jasmine.log("I've got a big log."); 
```

## 茉莉花 2+

`console.log`根据[douglas-treadwell](https://stackoverflow.com/users/78181/douglas-treadwell)下面的评论，直接使用。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-09-14T14:59:51.057

如果您在节点环境中运行。你可以使用

```
process.stdout.write("this will be send to the console"); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-15T12:12:13.883

我认为这**是不可能的**。

我不得不覆盖规范加载器中的 console.log 实现。即*（使用jQuery）*：

```
var console = {
    panel: $('body').append('<div>').css({position:'fixed', top:0, right:0,background:'transparent'}),
    log: function(m){
        this.panel.prepend('<div>'+m+'</div>');
    }       

};
        console.log('message 1');
        console.log('message 2'); 
```

[​这里](http://jsfiddle.net/kvRbN/) 有一个功能示例

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-01-26T00:30:10.650

If you're desperate for any output in a Terminal window so you can have data to review after the test has completed and the browser has closed, `console.error()` seems to do the trick.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-12-15T16:07:02.157

使用 grunt/karma/jasmine (karma-jasmine 0.2.2) 遇到同样的问题 -

按照 Dave Sag 的说法，我发现`console.log`我正在测试的代码中的所有消息都运行良好，但是我的`describe() {}`和`it() {}`块中没有任何内容记录任何内容。

我*确实*发现您可以从一个`beforeEach() {}`块中登录。至少它对我有用：

```
beforeEach(function() {
  this.model = new blahModel();
  console.log('this.model = ', this.model);
}); 
```

*请注意，*这只会登录浏览器控制台，并且由于某种原因不会登录命令行。当来自测试代码块的 console.log 语句在命令行中登录时有点奇怪。[我还发现这里](https://stackoverflow.com/questions/7157999/output-jasmine-test-results-to-the-console)似乎是一种更好的一致日志记录方法。

更新：我实际上也看到了它的日志记录工作块，我相信我有其他错误阻止了这一点。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-03-25T01:35:25.093

我正在使用`jasmine 2`via`guard`并且`phantom js`发现`console.log`测试中的标准消息可以很好地输出到 jasmine spec runner 的控制台。

我还发现，`console.log`我正在测试的 javascript 代码元素中的消息确实会被写入，`stdout`但不会写入`console.log`测试本身中的消息。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-07-16T15:46:43.757

1) 转到您拥有 pom.xml 的项目目录。在 cmd 中运行以下命令。mvn 茉莉花:bdd

2）您将获得 localhost URL：localhost:8234（只是一个示例）。

3) 在浏览器中运行此 URL。现在你所有的测试用例都被执行了。

4）做这个页面的检查元素。在浏览器控制台中，您将能够看到所有 console.log() 或 console.error() 跟踪。

# android - Android :webview 使 url 可点击，即使数据包含 clcikable 和不可点击的 url

> ID：11049999
> 
> 赞同：1
> 
> 时间：2012-06-15T11:39:27.100
> 
> 标签：android

如果 html 数据包含标签中的 url 和没有标签的 URL，我如何在 webview 中将不可点击的 url 设置为可点击的。有一种方法可以首先使用 java 脚本（模式匹配）将可点击的 url 设为不可点击，然后使用 java 脚本（模式匹配）将所有不可点击的 url 设为可点击的 url。