# StackOverflow 问答 11307000-11307999

# backbone.js - 将 .on() 用于 Backbone 集合上的多个事件时获取事件名称。

> ID：11307002
> 
> 赞同：5
> 
> 时间：2012-07-03T08:19:13.807
> 
> 标签：backbone.js, backbone-events

使用 .on() 将多个事件绑定到 Backbone 集合时，我如何知道在 Backbone 集合上触发了什么事件？有关说明，请参见以下示例。（另见 jsFiddle：http: [//jsfiddle.net/PURAU/3/](http://jsfiddle.net/PURAU/3/)）

```
var Car = Backbone.Model.extend({
    nrOfWheels: 4,
    color: 'red',
    speed: 'slow'
});

var Garage = Backbone.Collection.extend({
    model: Car
});

var myGarage = new Garage(),
    myCar = new Car();

myGarage.on('add change reset', function() {
    // How do I know what event was triggered?
    console.log('add change reset', arguments);
});

myGarage.on("all", function() {
    // In here, the name of the event is the first argument.
    console.log('all', arguments);
});

// Trigger add
myGarage.add(myCar);

// Trigger change
myCar.set('speed', 'fast');

// Trigger reset
myGarage.reset(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:03:40.853

如果我们想要每个事件的特定操作，最有序的方法是监听每个事件，如果您希望在发生任何更改时拥有一个整体更改侦听器，请在侦听器内部调用它并自己指定事件名称。

```
myGarage.on('add', function() {
     yourGlobalFunction(arguments, 'add');
     //specific actions for add
});
myGarage.on('change', function() {
     yourGlobalFunction(arguments, 'change');
     //specific actions for change
});
myGarage.on('reset', function() {
     yourGlobalFunction(arguments, 'reset');
     //specific actions for reset
});

function yourGlobalFunction(prevArguments, eventName){
   log(prevArguments, eventName);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:22:12.327

您需要覆盖`trigger`这样做的方法，看看代码：

[https://github.com/documentcloud/backbone/blob/master/backbone.js#L148](https://github.com/documentcloud/backbone/blob/master/backbone.js#L148)

# user-interface - c++ builder上的垂直滚动条

> ID：11307014
> 
> 赞同：1
> 
> 时间：2012-07-03T08:19:52.493
> 
> 标签：user-interface, scrollbar, c++builder

我正在做一些 GUI，这有一个`Form`属性`TMemo`设置`ScrollBars`为的，`ssVertical`但我希望垂直滚动只在必要时显示，目前它总是显示。如何在不需要时禁用并在必要时启用？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T19:55:48.400

不幸的是，TMemo 的滚动条不能这样工作。如果它们被启用，那么无论内容如何，​​它们都会始终显示。改用 TRichEdit。

# php - 集成 magento facebook -login 在 localhost 但不在 Live 中工作

> ID：11307020
> 
> 赞同：0
> 
> 时间：2012-07-03T08:20:25.597
> 
> 标签：php, facebook

嗨，我遇到了有关 magento 和 facebook 连接的严重问题。我已经使用了 inchoo 的 facebook 扩展和 fontis recaptcha 。和贝宝登录。我有登录实时服务器的问题，但它在本地主机中运行。我还在 facebook 中设置了应用程序并使用了密钥和应用程序 ID。任何帮助将不胜感激。问候， 萨米特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:37:06.090

确保您的

1.  应用密钥正确
2.  秘密杰伊是正确的
3.  它具有在 facebook 应用程序中注册的相同 url。

这是导致您使用 facebook 登录时的三个主要原因。

# java - 如何修复 Slick 游戏中的闪烁屏幕？

> ID：11307023
> 
> 赞同：2
> 
> 时间：2012-07-03T08:20:44.277
> 
> 标签：java, ubuntu, flicker, vsync

我正在使用[Slick](http://slick.cokeandcode.com/)库编写一个简单的类似马里奥的游戏，但我遇到了游戏窗口闪烁的问题。我通常在它下面有一个 Eclipse 窗口，在我看来，当 Eclipse 更新它的屏幕时，我的游戏上会出现一些东西。

当我开始游戏时，它显示：

```
INFO:Slick Build #274
INFO:LWJGL Version: 2.0b1
INFO:OriginalDisplayMode: 1280 x 1024 x 24 @60Hz
INFO:TargetDisplayMode: 1024 x 768 x 0 @0Hz
INFO:Starting display 1024x768
INFO:Use Java PNG Loader = true
INFO:Controllers not available 
```

我在联想 Thinkpad x100e 上使用 Ubuntu 10.04。我注意到这不会发生在我的朋友身上，所以我想这可能是驱动程序（flgrx）或窗口管理器（metacity）的问题，但我不知道如何检查才能确定。或者也许它与vsync有关？

有任何想法吗？提前致谢 ：）

# apache - Apache Ant + Ivy 语法错误

> ID：11307025
> 
> 赞同：0
> 
> 时间：2012-07-03T08:20:50.933
> 
> 标签：apache, ant, xml-parsing, dependencies, ivy

我刚刚使用 apache ant 和 ivy 作为依赖项管理器设置了我的第一个项目。它工作得很好！但我有一件事我无法克服。由于我有几个使用 slf4j 的依赖项，因此存在版本不匹配的冲突。所以我在 ivy.xml 中定义了一个冲突标签来强制某个版本（在本例中为 1.5.6）。使用 Eclipse 插件 IvyIDE 运行 Ivy 解析可以正常工作。但是当使用我的 ant 构建文件来构建我的应用程序时，我得到一个 xml 语法错误：

```
Apache Ant(TM) version 1.8.2 compiled on December 20 2010
Buildfile: B:\core-lib\build.xml
parsing buildfile B:\core-lib\build.xml with URI = file:/B:/core-lib/build.xml
Project base dir set to: B:\core-lib
parsing buildfile jar:file:/C:/Program%20Files/InformDevTools/eclipse/plugins/org.apache.ant_1.8.2.v20120109-1030/lib/ant.jar!/org/apache/tools/ant/antlib.xml with URI = jar:file:/C:/Program%20Files/InformDevTools/eclipse/plugins/org.apache.ant_1.8.2.v20120109-1030/lib/ant.jar!/org/apache/tools/ant/antlib.xml from a zip file
Build sequence for target(s) `resolve' is [clean, init, resolve]
Complete build sequence is [clean, init, resolve, compile, resources, test, dist, ]
clean:
   [delete] Deleting directory B:\core-lib\build
   [delete] Deleting directory B:\core-lib\build\lib
   [delete] Deleting directory B:\core-lib\build\main
   [delete] Deleting directory B:\core-lib\build\report\test
   [delete] Deleting directory B:\core-lib\build\report
   [delete] Deleting directory B:\core-lib\build\test
   [delete] Deleting directory B:\core-lib\build
   [delete] Deleting directory B:\core-lib\dist
   [delete] Deleting directory B:\core-lib\dist
init:
Override ignored for property "DSTAMP"
Override ignored for property "TSTAMP"
Override ignored for property "TODAY"
    [mkdir] Created dir: B:\core-lib\build
    [mkdir] Created dir: B:\core-lib\build\main
    [mkdir] Created dir: B:\core-lib\build\lib
    [mkdir] Created dir: B:\core-lib\dist
    [mkdir] Created dir: B:\core-lib\build\test
    [mkdir] Created dir: B:\core-lib\build\report\test
resolve:
parsing buildfile jar:file:/C:/Users/admin/.eclipse/org.eclipse.platform_3.7.0_1992851616/plugins/org.apache.ivy.eclipse.ant_2.3.0.cr120120416000235/ivy.jar!/org/apache/ivy/ant/antlib.xml with URI = jar:file:/C:/Users/admin/.eclipse/org.eclipse.platform_3.7.0_1992851616/plugins/org.apache.ivy.eclipse.ant_2.3.0.cr120120416000235/ivy.jar!/org/apache/ivy/ant/antlib.xml from a zip file
[ivy:retrieve] No ivy:settings found for the default reference 'ivy.instance'.  A default instance will be used
[ivy:retrieve] Loading jar:file:/C:/Users/admin/.eclipse/org.eclipse.platform_3.7.0_1992851616/plugins/org.apache.ivy.eclipse.ant_2.3.0.cr120120416000235/ivy.jar!/org/apache/ivy/core/settings/ivy.properties
[ivy:retrieve] searching settings file: trying B:\core-lib\ivysettings.xml
[ivy:retrieve] :: Apache Ivy 2.3.0-rc1 - 20120416000235 :: http://ant.apache.org/ivy/ ::
[ivy:retrieve] jakarta commons httpclient not found: using jdk url handling
[ivy:retrieve] :: loading settings :: file = B:\core-lib\ivysettings.xml
[ivy:retrieve] no default ivy user dir defined: set to C:\Users\admin\.ivy2
[ivy:retrieve] no default cache defined: set to C:\Users\admin\.ivy2\cache
[ivy:retrieve] settings loaded (31ms)
[ivy:retrieve]  default cache: C:\Users\admin\.ivy2\cache
[ivy:retrieve]  default resolver: inform-artifactory
[ivy:retrieve]  -- 5 resolvers:
[ivy:retrieve]  inform [release] [ibiblio]
[ivy:retrieve]  inform [snapshot] [ibiblio]
[ivy:retrieve]  inform [proxied] [ibiblio]
[ivy:retrieve]  inform-artifactory [chain] [inform [proxied], inform  [third-party], inform [release], inform [snapshot]]
[ivy:retrieve]  inform  [third-party] [ibiblio]
[ivy:retrieve] no resolved descriptor found: launching default resolve
Overriding previous definition of property "ivy.version"
[ivy:retrieve] using ivy parser to parse file:/B:/core-lib/ivy.xml
[ivy:retrieve] [xml parsing: ivy.xml:28:108: cvc-complex-type.2.4.a: Ungültiger Content wurde beginnend mit Element "dependency" gefunden. "{conflict}" wird erwartet. in file:/B:/core-lib/ivy.xml
[ivy:retrieve] ]

BUILD FAILED
B:\core-lib\build.xml:77: syntax errors in ivy file: java.text.ParseException: [xml parsing: ivy.xml:28:108: cvc-complex-type.2.4.a: Ungültiger Content wurde beginnend mit Element "dependency" gefunden. "{conflict}" wird erwartet. in file:/B:/core-lib/ivy.xml
]
    at org.apache.ivy.ant.IvyResolve.doExecute(IvyResolve.java:396)
    at org.apache.ivy.ant.IvyTask.execute(IvyTask.java:277)
    at org.apache.ivy.ant.IvyPostResolveTask.ensureResolved(IvyPostResolveTask.java:231)
    at org.apache.ivy.ant.IvyPostResolveTask.prepareAndCheck(IvyPostResolveTask.java:178)
    at org.apache.ivy.ant.IvyRetrieve.doExecute(IvyRetrieve.java:87)
    at org.apache.ivy.ant.IvyTask.execute(IvyTask.java:277)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:390)
    at org.apache.tools.ant.Target.performTasks(Target.java:411)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.eclipse.ant.internal.launching.remote.EclipseDefaultExecutor.executeTargets(EclipseDefaultExecutor.java:32)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
    at org.eclipse.ant.internal.launching.remote.InternalAntRunner.run(InternalAntRunner.java:424)
    at org.eclipse.ant.internal.launching.remote.InternalAntRunner.main(InternalAntRunner.java:138)
Caused by: java.text.ParseException: [xml parsing: ivy.xml:28:108: cvc-complex-type.2.4.a: Ungültiger Content wurde beginnend mit Element "dependency" gefunden. "{conflict}" wird erwartet. in file:/B:/core-lib/ivy.xml
]
    at org.apache.ivy.plugins.parser.AbstractModuleDescriptorParser$AbstractParser.checkErrors(AbstractModuleDescriptorParser.java:89)
    at org.apache.ivy.plugins.parser.AbstractModuleDescriptorParser$AbstractParser.getModuleDescriptor(AbstractModuleDescriptorParser.java:344)
    at org.apache.ivy.plugins.parser.xml.XmlModuleDescriptorParser.parseDescriptor(XmlModuleDescriptorParser.java:117)
    at org.apache.ivy.plugins.parser.AbstractModuleDescriptorParser.parseDescriptor(AbstractModuleDescriptorParser.java:48)
    at org.apache.ivy.core.resolve.ResolveEngine.resolve(ResolveEngine.java:184)
    at org.apache.ivy.Ivy.resolve(Ivy.java:503)
    at org.apache.ivy.ant.IvyResolve.doExecute(IvyResolve.java:326)
    ... 20 more

Total time: 500 milliseconds 
```

如果我删除冲突定义，构建将按预期工作。这是 ivy.xml：

```
<ivy-module version="2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="http://ant.apache.org/ivy/schemas/ivy.xsd">

<info organisation="eu.inform" module="isac3-core" revision="1.0-snapshot"></info>
<configurations>
    <conf name="build" description="provide business logic for isac3"/>
    <conf name="test" extends="build" visibility="private" description="just for JUnit testing"/>
</configurations>
<publications>
    <artifact name="core-lib" type="jar" conf="build" ext="jar"/>
</publications>
<dependencies>

    <dependency org="org.apache.commons" name="commons-lang3" rev="3.1" conf="build->default"/>
    <dependency org="commons-codec" name="commons-codec" rev="1.6" conf="build->default"/>
    <dependency org="org.apache.mina" name="mina-core" rev="2.0.4" conf="build->default"/>
    <dependency org="org.apache.tika" name="tika-app" rev="1.1" conf="build->default"/>
    <!-- 
        Resolve conflict for SLF4J by selecting the latest compatible version:
        Apache tika comes packaged with slf4j 1.5.6, so we cannot exclude this dependency because it is part of the jar.
        Hibernate specifies a dependency to slf4j 1.6.1 by maven pom file.
     -->
    <conflict org="org.slf4j" rev="1.5.6"/>

    <dependency org="org.springframework" name="spring-aop" rev="3.1.1.RELEASE" conf="build->default"/>
    <dependency org="org.aspectj" name="aspectjweaver" rev="1.5.4" conf="build->default"/>
    <dependency org="org.springframework" name="spring-orm" rev="3.1.1.RELEASE" conf="build->default">
        <!-- don't include any ORM implementation since we defined the one we use -->
        <exclude org="org.eclipse.persistence" />
        <exclude org="toplink.essentials" />
        <exclude org="org.apache.ibatis" />
        <exclude org="org.apache.openjpa" />
        <exclude org="org.hibernate" />
    </dependency>
    <dependency org="org.hibernate" name="hibernate-core" rev="4.1.4.Final" conf="build->default"/>
    <dependency org="org.hibernate" name="hibernate-ehcache" rev="4.1.4.Final" conf="build->default"/>
    <dependency org="org.hibernate" name="hibernate-envers" rev="4.1.4.Final" conf="build->default"/>
    <dependency org="org.hibernate" name="hibernate-search-engine" rev="4.1.1.Final" conf="build->default"/>
    <dependency org="org.hibernate" name="hibernate-search-orm" rev="4.1.1.Final" conf="build->default"/>
    <dependency org="c3p0" name="c3p0" rev="0.9.1.2" conf="build->default"/>
    <dependency org="de.jollyday" name="jollyday" rev="0.4.6" conf="build->default"/>
    <dependency org="log4j" name="log4j" rev="1.2.17" conf="build->default"/>

    <!-- JDBC drivers -->
    <dependency org="net.sourceforge.jtds" name="jtds" rev="1.2.4" conf="build->default"/>
    <dependency org="com.microsoft" name="sqljdbc4" rev="4.0" conf="build->default"/>
    <dependency org="com.oracle" name="ojdbc6" rev="11.2.0.3" conf="build->default"/>

    <!-- dependencies solely for testing purposes (none-deployed) -->
    <dependency org="junit" name="junit" rev="4.10" conf="test->default"/>
</dependencies> 
```

这就是 ant build.xml（我省略了不必要的行以使其更紧凑）：

```
<?xml version="1.0" encoding="ISO-8859-1"?> 
```

```
<property name="src_base" location="src/main" />
<property name="src" location="${src_base}/java" />
<property name="config" location="${src_base}/config" />
<property name="resource" location="${src_base}/resource" />
<property name="build" location="build" />
<property name="buildSrc" location="${build}/main" />
<property name="lib" location="${build}/lib" />
<property name="dist" location="dist" />

<property name="distName" value="isac3-core-lib" />
<property name="distFileName" value="${distName}-${build.timestamp}.jar" />
<property name="zipFileName" value="${distName}-${build.timestamp}.zip" />

<property name="test.src" location="src/test/java" />
<property name="test.build" location="build/test" />
<property name="test.reports" location="build/report/test" />

<property name="ant.build.javac.source" value="1.7" />
<!-- Source-level version number -->
<property name="ant.build.javac.target" value="1.7" />
<!-- Class-compatibility version number -->
<property name="build.compiler" value="modern" />

...

<!-- ================================= 
      target: init
     ================================= -->
<target name="init" depends="clean">
    <!-- Create the time stamp -->
    <tstamp />
    <!-- Create the build directory structure used by compile -->
    <mkdir dir="${build}" />
    <mkdir dir="${buildSrc}" />
    <mkdir dir="${lib}" />
    <mkdir dir="${dist}" />
    <mkdir dir="${test.build}" />
    <mkdir dir="${test.reports}" />
</target>

<!-- ================================= 
      target: resolve              
     ================================= -->
<target name="resolve" depends="init" description="retrieve dependencies with ivy">
    <ivy:retrieve pattern="${lib}/[conf]/[artifact].[ext]" />
</target>

... 
```

错误发生在 ant 目标“解决”中。常春藤似乎已加载，设置文件也按预期使用。但正如已经提到的，我得到了那个语法错误。

有没有人见过这个，可以给我一个提示？

问候，

塞巴斯蒂安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:58:13.943

我复制了你的工作，我有同样的错误，但不是德语；）

无论如何，我尝试将冲突标签放在最后，它起作用了。所以现在看起来像这样：

```
<dependencies>
    ... all dependencies
    <!-- dependencies solely for testing purposes (none-deployed) -->
    <dependency org="junit" name="junit" rev="4.10" conf="test->default"/>

    <conflict  org="org.slf4j" rev="1.5.6" />
</dependencies> 
```

另一件事，可能是复制粘贴错误，但您必须确保 ivy.xml 文件以

```
</ivy-module>. 
```

让我们知道。

# google-maps - 如何计算在地图上绘制的多边形的面积（以像素为单位）？

> ID：11307027
> 
> 赞同：2
> 
> 时间：2012-07-03T08:20:54.910
> 
> 标签：google-maps, google-maps-api-3

我有一个近似面积为 10 000 平方米的多边形
我试图确定多边形在哪个缩放级别上变得几乎不可见，这意味着 - 绘制多边形所需的像素数可以忽略不计，并将其从地图中删除以保存资源。
由于我已经有了一个真实的多边形面积值，我如何计算在地图上绘制的多边形的面积（以像素为单位）以获取特定的缩放级别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T09:13:25.137

为了简化问题，我建议使用多边形的边界而不是多边形本身。这样你总是处理一个矩形，避免计算不规则多边形大小的麻烦。考虑到这一点，并假设您的多边形很简单并且只有一条路径，您可以执行以下操作：

```
var points = poly.getPath();
var bounds = new google.maps.LatLngBounds();
for (var n = 0; n < points.length ;n++){
    bounds.extend(points[n]);
}
var SW = bounds.getSouthWest();
var NE = bounds.getNorthEast();

var proj = map.getProjection();
var swPx = proj.fromLatLngToPoint(SW);
var nePx = proj.fromLatLngToPoint(NE);
var pixelWidth = (nePx.x - swPx.x)* Math.pow(2, map.getZoom());
var pixelHeight = (nePx.y - swPx.y)* Math.pow(2, map.getZoom()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-08T12:23:17.100

带有多边形而不是边界的版本，谷歌地图：

```
var square_meters = google.maps.geometry.spherical.computeArea(yourPolygon.getPath());

var init_resolution = 256 / (2 * Math.PI * 6378137);

var zoom = map.getZoom();

var resolution = init_resolution * Math.pow(2,zoom);

var area_factor = Math.pow(resolution,2);
var square_pixels = square_meters * area_factor; 
```

`256`是`TileSize`地图和`6378137`地球的半径，以米为单位。您以平方像素为单位获得多边形的面积。您可以将其与以平方像素（`height * length`的`div`）为单位的地图尺寸进行比较；

# c# - 如何将程序集从 .Net 3.5 迁移到 .Net 4.0？

> ID：11307029
> 
> 赞同：1
> 
> 时间：2012-07-03T08:21:02.940
> 
> 标签：c#, vb.net, visual-studio-2010, assemblies, project-reference

我从 github 下载了一个项目： [https ://github.com/HEskandari/FarsiLibrary/zipball/master](https://github.com/HEskandari/FarsiLibrary/zipball/master)

我用visual studio 2010打开这个，这个解决方案包含一个名为**“FarsiLibrary.WPF.VisualStudio.Design”**的项目，这个项目包含对.Net 3.5中程序集的引用，并且visual studio无法识别**Microsoft.Windows.Design。***程序集，因为这个.Net 3.5 中存在程序集。

因此，当我将目标框架更改为 3.5 时，不幸的是，这种更改没有反映，然后目标框架自动再次设置为 .Net 4。

我想知道如何处理它来构建没有任何问题？

感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:00:36.983

运行[PEVerify](https://stackoverflow.com/q/1946322/1235565)或`corflags`以确定`FarsiLibrary.WPF.VisualStudio.Design`是混合模式还是纯 .NET 应用程序。

如果它是混合模式程序集，请将其添加到您的应用程序配置文件中：

```
configuration>
   <startup useLegacyV2RuntimeActivationPolicy="true">
      <supportedRuntime version="v4.0"/>
   </startup>
</configuration> 
```

或者更好的是，重新编译以`FarsiLibrary.WPF.VisualStudio.Design`.NET 4.0 为目标。

# java - 绘图和其他折线图的图像增强

> ID：11307030
> 
> 赞同：3
> 
> 时间：2012-07-03T08:21:11.470
> 
> 标签：java, image-processing

我正在寻找用于（科学）绘图和图表的图像增强的库例程。典型例子显示在

[http://www.jcheminf.com/content/pdf/1758-2946-4-11.pdf](http://www.jcheminf.com/content/pdf/1758-2946-4-11.pdf)

和[http://en.wikipedia.org/wiki/Anti-aliasing的图 3](http://en.wikipedia.org/wiki/Anti-aliasing)

它们具有以下特点：

*   他们通常使用极少数的图元（线、字符、圆、矩形）
*   它们通常是单色（黑色/白色）或具有非常少量的块色
*   原件没有渐变或图案。

我希望重建基元，并正在寻找一种算法来在下一阶段分析之前恢复图像中的清晰线条（可能包括线条检测和 OCR）。噪音通常来自：

*   使用 JPG（通常会看到接近原始图元的噪点）
*   抗锯齿

我需要免费/开源解决方案，并且最好喜欢现有的 Java 库。如果有任何已经完成了一些工作或重建线路，那将是一个奖励！对于字符识别，我很乐意在此阶段隔离每个字符并推迟 OCR，尽管对此的指针也将不胜感激。

更新：令我惊讶的是，即使有赏金，也没有对这个问题做出实质性答复。因此，我正在亲自调查它。我仍然邀请答案，但它们应该超出我自己的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T07:51:13.260

自己的问题的答案由于近一周后没有答案，我现在的计划是：

[我在另一个 SO 帖子上发现了Canny 边缘检测算法](http://en.wikipedia.org/wiki/Canny_edge_detector)的提及，然后发现：

```
[http://www.tomgibara.com/computer-vision/canny-edge-detector][2] 
```

来自汤姆吉巴拉。

这在默认模式下很容易使用，主程序是：

```
 public static void main(String[] args) throws Exception {
             File file = new File("c.bmp");
     //create the detector
     CannyEdgeDetector detector = new CannyEdgeDetector();
     //adjust its parameters as desired
     detector.setLowThreshold(0.5f);
     detector.setHighThreshold(1f);
     //apply it to an image
     BufferedImage img = ImageIO.read(file);
     detector.setSourceImage(img);
     detector.process();
     BufferedImage edges = detector.getEdgesImage();
     ImageIO.write(edges, "png", new File("c.png"));
} 
```

ImageIO 在这里读取和写入位图。未处理的图像被读取为 24 位 BMP（ImageIO 似乎因颜色范围较低而失败）。默认设置是 Gibara 的开箱即用。

边缘检测非常令人印象深刻，勾勒出所有的线条和字符。这个位图

![原始位图](../Images/96428ec55144a337788cc9f7f0df9903.png)

转换为边缘

![检测到的边缘](../Images/feda069a517fd5fde0f15bdfed451460.png)

所以现在我有两个任务：

*   将直线拟合到轮廓，这基本上是干净的“电车线”。我希望这对于干净的图表来说是直截了当的。如果提到 Java 库以使线条原语适合轮廓，我将不胜感激。
*   识别字符。Gibara 在分离它们方面做得非常出色，因此这是一个识别单个字形的练习。我可以使用轮廓来隔离每个字形的单个像素图，然后将它们传递给[JavaOCR](http://www.roncemer.com/software-development/java-ocr)。或者，轮廓可能足以直接识别字符。我不知道字体是什么，但大多数字符都在 32-255 范围内，我相信我可以建立启发式地图。

请参阅[如何在 java 中正确加载 BufferedImage？](https://stackoverflow.com/questions/601274/how-do-i-properly-load-a-bufferedimage-in-java)用于在 Java 中加载位图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:21:10.340

> 我希望重建基元，并正在寻找一种算法来在下一阶段分析之前恢复图像中的清晰线条（可能包括线条检测和 OCR）。

你看过jaitools吗？（[http://code.google.com/p/jaitools/](http://code.google.com/p/jaitools/)）。

他们有用于矢量化图形的 API，非常快速和灵活；在此处查看 API 和文档：http: [//jaitools.org/](http://jaitools.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T03:22:03.833

## Java 库

OpenCV 是此类计算机视觉任务的首选库。这里有 Java 绑定：[http](http://code.google.com/p/javacv/) ://code.google.com/p/javacv/ 。OpenCV 涵盖了从基本图像处理过滤器到高级对象和运动检测算法的所有内容。

## 线路检测

要检测直线，请尝试 Hough 变换。OpenCV 教程有一个很好的解释： http: [//opencv.itseez.com/doc/tutorials/imgproc/imgtrans/hough_lines/hough_lines.html#how-does-it-work](http://opencv.itseez.com/doc/tutorials/imgproc/imgtrans/hough_lines/hough_lines.html#how-does-it-work)

经典的霍夫变换输出无限的线，但 OpenCV 还实现了一种称为概率霍夫变换的变体，它输出线段。它应该给你所需要的。原始学术论文在这里：[http ://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.34.9440&rep=rep1&type=pdf](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.34.9440&rep=rep1&type=pdf)

检测到线段后，您可能希望检测链接的线段并将它们连接在一起。对于您的简单图像，您可能会很好地对所有段端点进行蛮力比较。如果您在小半径内检测到多个端点，例如 2 个像素，请将它们连接在一起以确保您的线是连续的。您还可以测量连接线段之间的角度以检测多边形。

## 圆检测

还有另一个版本的霍夫变换可以检测圆圈，在这里解释：http: [//opencv.itseez.com/doc/tutorials/imgproc/imgtrans/hough_circle/hough_circle.html#hough-circle](http://opencv.itseez.com/doc/tutorials/imgproc/imgtrans/hough_circle/hough_circle.html#hough-circle)

# php - 地理位置保持浏览器会话持久

> ID：11307038
> 
> 赞同：0
> 
> 时间：2012-07-03T08:21:27.690
> 
> 标签：php, javascript, jquery, ajax, geolocation

我正在开发一个基于浏览器并专门针对移动浏览器的地理定位项目。我不会深入细节，但总体而言，该项目在项目的许多页面和部分中使用地理定位。问题似乎是，尽管总是在任何给定的浏览器上点击“接受”和“允许”，但当用户重新加载页面时，几乎每次都会提示他们重新启用位置身份验证。

这对我来说很奇怪，我去过带有地理位置的网站，它确实记得我允许它，即使在我在网站上的时间段内而不是总是如此。因此，我想知道是否需要做一些特殊的事情才能在我的项目中长时间存储此身份验证？

目前，我正在通过谷歌地图 API 使用基于 javascript 的地理定位，以及对非基于 ip 的位置的更新浏览器支持。我的项目由用户自行决定跟踪他们的位置，以便与他们相关的其他人可以看到他们在哪里，他们去过哪里，或者他们计划去哪里（如果他们输入了）。还有更多，但这是基础。从用户体验的角度来看，每次浏览器重新加载以重新验证位置时都必须提示我的用户是很烦人的。

因此，任何人都能够提供的任何建议，或有关如何处理此问题的见解将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T17:57:57.927

**Cookie**和**会话**。

在检测到用户地理位置后，您应该将其存储在 Cookie 中。来自服务器的每个请求都应该查看是否有一个 cookie 集（带有用户的位置）并对其采取行动。

过度简化的代码：

```
// get user location (via javascript)
navigator.geolocation.getCurrentPosition(function(position) 
{
  initialLocation = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
}

// ajax the server with the user location
$.post('ajax/set_user_location.php', initialLocation); 
```

然后在服务器上抓取`initialLocation`并将其保存在 cookie 中。

# email - 从 Grails 应用程序获取 Exchange 邮件

> ID：11307039
> 
> 赞同：0
> 
> 时间：2012-07-03T08:21:28.403
> 
> 标签：email, grails, exchange-server

我想（从我的 grails 应用程序）抓取发送到特定电子邮件地址的每封电子邮件，对其进行解析，获取一些数据并将该数据写入我的数据库中。它的 Exchange Server 邮件。

我想我可以以某种方式为给定的电子邮件帐户启动 Outlook 服务并检查收件箱文件夹，例如每 10 秒，如果有新邮件 - 获取它们。

这种方法可以吗？还是我应该使用一些服务？有人可以指出我正确的方向吗？我有哪些选择？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T11:30:20.413

如果您的交换服务器支持 IMAP，那么您可以使用普通的 JavaMail 机制连接到它并轮询新邮件或（更好）让服务器将新消息推送到您的应用程序，如下所示（省略错误处理，并且有很多可能不幸的是错误情况...）：

```
boolean finished = false

void setup() {
  Properties props = new Properties()
  props.setProperty("mail.store.protocol", "imaps")
  Session session = Session.getDefaultInstance(props, null)
  Store store = session.getStore("imaps")
  store.connect("mailserver.example.com", "username", "password")
  Folder inFolder = currentMailStore.getFolder("INBOX")
  inFolder.open(Folder.READ_WRITE)
  inFolder.addMessageCountListener(this)
  while(!finished) {
    inFolder.idle()
    sleep(10000)
  }
}

public void messagesAdded(MessageCountEvent e) {
  for(Message m in e.messages) {
    //...
  }
} 
```

的想法是，只要有新消息到达`idle`，服务器就会`messagesAdded`（从接口）调用您的方法。`MessageCountListener`

# java - 从 servlet 运行 C++ exe

> ID：11307040
> 
> 赞同：2
> 
> 时间：2012-07-03T08:21:29.203
> 
> 标签：java, c++, visual-studio-2010, visual-c++, servlets

我正在我的机器上运行服务器。当 Servlet 收到消息后，相应的 Visual C++“.exe”需要开始运行。

我正在使用以下代码来启动 exe。但我收到“Microsoft Visual C++ 调试错误”。代码如下：-

```
if(strLine.equals(location))//same place do not do anything             
{                   
Runtime rt=Runtime.getRuntime();  
String cmd[]={"cmd.exe", "/c", "C:\\Users\\nabeel.OUCS1289\\Documents\\Visual Studio 2010\\Projects\\Scene Localization - (FM)\\Debug\\Scene Localization.exe"};                    
rt.exec(cmd);
System.out.println("Same place so dont do anyuthing");          
} 
```

请在这方面帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:55:14.840

要执行的 EXE 文件位于用户配置文件目录中。运行 JRE/Webserver 的帐户是否对该特定目录具有读取和执行权限？

此外，通过 删除间接执行`cmd.exe /c ...`。这对于常规的可执行文件是完全没有必要的。仅当您正在执行由 cmd.exe 本身提供的命令并且因此无法通过 exe 文件执行时才需要它。

# mongodb - 当我更新 mongodb 集合时，我可以搜索集合吗

> ID：11307043
> 
> 赞同：0
> 
> 时间：2012-07-03T08:21:36.150
> 
> 标签：mongodb, nosql

我知道更新运算符何时会锁定集合，但我想知道并发搜索运算符会不会受到影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:10:04.337

之前有人问过类似的问题： [MongoDB :are reads/writes to database concurrent?](https://stackoverflow.com/questions/7828875/mongodb-are-reads-writes-to-database-concurrent)

MongoDB曾经有一个全局写锁，最近似乎已根据此链接删除：http: [//blog.serverdensity.com/2012/05/23/goodbye-global-lock-mongodb-2-0-vs- 2-2/](http://blog.serverdensity.com/2012/05/23/goodbye-global-lock-mongodb-2-0-vs-2-2/) 同样值得一读的是，虽然它是一个较旧的链接： [http ://blog.pythonisito.com/2011/12/mongodbs-write-lock.html](http://blog.pythonisito.com/2011/12/mongodbs-write-lock.html)

# c# - Designer 在 InitializeComponent 中创建一些字段，而不是创建全局变量

> ID：11307050
> 
> 赞同：2
> 
> 时间：2012-07-03T08:21:54.690
> 
> 标签：c#, .net, winforms, visual-studio-2010, visual-studio

我有一个问题，即 Visual Studio (2010) WinForms 设计器在设计器文件中全局创建一些控件（或至少是它们的字段），并在从构造函数调用的 InitializeComponent 方法中创建一些控件。

有谁知道为什么设计师在方法中本地而不是全局创建它们，有没有办法阻止它这样做？

它在某些表单上执行此操作，但不是全部，并且似乎只发生在 Label 控件上。受影响表单的开发人员确信他们没有做任何不同的事情。

我可以手动解决这个问题，但宁愿知道问题的根源。我需要能够从另一种使用反射来访问字段的方法访问字段。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T08:29:45.493

有一个**Generate Member** (in code, [`GenerateMember`](http://msdn.microsoft.com/en-us/library/ms233630.aspx)) 属性控制控件是否具有成员字段。（不要太令人惊讶，希望如此）。它应该默认为`true`，但可能以`false`某种方式设置为。

# .net - mono：在 Linux 的命令行中构建 .Net 解决方案

> ID：11307053
> 
> 赞同：11
> 
> 时间：2012-07-03T08:21:58.807
> 
> 标签：.net, ubuntu, mono

我最近在我的 Linux 机器上安装了 mono，以便能够在更熟悉的环境中进行一些 .Net 编程。

我正在尝试从命令行构建**解决方案，而不必启动繁重的单体开发。**在 Windows 上，这可以使用 Msbuild.exe 完成。我似乎无法使用单声道工具找到该文件。

最接近的是**mdtool**（如果我理解正确的话）用于构建单个项目而不是整个解决方案）。

如何使用单声道在 Linux 上从命令行构建**整个解决方案？**

顺便说一句，我正在运行 Ubuntu 10.0.4

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T08:24:37.230

> 只需像在 Microsoft .Net Framework 上执行 msbuild 一样运行 xbuild。你不需要安装 Monodevelop，xbuild 带有标准的 Mono 安装。

[https://stackoverflow.com/a/56113/73381](https://stackoverflow.com/a/56113/73381) （可能重复）

# jquery - 带有树遍历的jquery表单

> ID：11307054
> 
> 赞同：1
> 
> 时间：2012-07-03T08:22:01.580
> 
> 标签：jquery, forms, tree-traversal

我得到了这个学校的任务来制作这个表格。如果没有显示您必须填写的消息，则必须填写 * 标记（这必须是红色）。就这样。不要对我太苛刻。

```
 </style>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script type="text/javascript">
        $(document).on("ready", geladen);
        function geladen(){

             console.log("geladen");
            // zodra een veld verlaten wordt moet gecontrolleerd worden
        }
        function controlleerVerplicht(event){
            // controlleer of er niets is ingevuld
                    if ( $('input*').val().length < 1 ){

            $("*").css("border", "2px solid red").next().text("Dit veld is verplicht");

            }

            else ($("*").css("border", "2px solid green").next().text("Het is succesvol gedaan"));
                // en zet in dat geval de tekst "Dit veld is verplicht" in de span in dezelfde paragraaf
            }

        function checkAcceptatie(){

            console.log("check acceptatie");

            if ($("input:checked").length==1){

                $(":submit").removeAttr("disabled");

                }

        }           
    </script>
</head>

<body>
    <form action="formulierverwerker.php" method="post">
        <fieldset>
            <legend>
                NAW
            </legend>
            <p>
                <label for="naamveld">Naam: *</label>
                <label for="dhr">
                    <input type="radio" name="gender" value="m" id="dhr" />
                    dhr. </label>
                <label for="mevr">
                    <input type="radio" name="gender" value="f" id="mevr" />
                    mevr. </label>
                <input type="text" name="name" id="naamveld" class="verplicht" />
                <span>&nbsp;</span>
            </p>
            <p>
                <label for="straatveld">Straat:</label>
                <input type="text" name="street"  id="straatveld" />
                <label for="straatveld">Huisnummer: *</label>
                <input type="text" name="huisnummer"  id="huisnummerveld" class="verplicht" />
                <span>&nbsp;</span>
            </p>
            <p>
                <label for="postcodeveld">Postcode: * </label>
                <input type="text" name="zip" class="verplicht" id="postcodeveld" />
                <label for="stadveld">Stad:</label>
                <input type="text" name="city" class="verplicht" id="stadveld" />
                <span>&nbsp;</span>
            </p>
        </fieldset>
        <fieldset>
            <legend>
                Contact
            </legend>
            <p>
                <label for="emailveld">Email:
                    <input type="text" name="email" id="emailveld" />
                </label>
            </p>
            <p>
                <label for="telefoonveld">Telefoon:
                    <input type="text" name="phone" id="telefoonveld" />
                </label>
            </p>
            <p>
                <button name="action" value="send" type="submit" >
                    Verstuur
                </button>
            </p>
        </fieldset>
    </form> 
```

# sharepoint - 如何使用 SP2007 以编程方式自定义 editform.aspx/newform.aspx？

> ID：11307055
> 
> 赞同：1
> 
> 时间：2012-07-03T08:22:08.653
> 
> 标签：sharepoint

我一直在寻找解决方案几个小时，但我无法自定义我的列表表单。虽然在 SPDesigner 下修改表单很容易，但我在 VS2008 中找不到同样的方法。

有谁知道以编程方式自定义表单的方法？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T11:37:24.063

自定义 newform.asxp 和 editform.aspx（在我看来）的最佳方法可能是：

在新的视觉工作室解决方案上：

*   定义列表的内容类型
*   基于 CT 定义列表 shema
*   在 schema.xml 中的“表单”部分中，为 editform.aspx 和 newform.aspx 定义您自己的 aspx

    ```
    <Forms>
        <Form Type="DisplayForm" Url="DispForm.aspx" SetupPath="pages\form.aspx" WebPartZoneID="Main" />
        <Form Type="EditForm" Url="EditForm.aspx" SetupPath="features\$SharePoint.Feature.DeploymentPath$\YourListDefinitionPathInSolution\YourEditForm.aspx" UseLegacyForm="True" WebPartZoneID="Main" />
        <Form Type="NewForm" Url="NewForm.aspx" SetupPath="features\$SharePoint.Feature.DeploymentPath$\YourListDefinitionPathInSolution\YourEditForm.aspx" UseLegacyForm="True"  WebPartZoneID="Main" />
    </Forms> 
    ```

在这篇博文中，您将找到一个好方法：[创建自定义 SharePoint 2010 列表表单以在 Visual Studio 2010 项目中进行部署](http://ikarstein.wordpress.com/2010/12/29/walkthrough-create-custom-sharepoint-2010-list-form-for-deployment-in-a-visual-studio-2010-project/)

问候

编辑：抱歉，2010 版的配方:-(

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-03T10:27:24.667

您的建议听起来不像是最佳实践，newform.aspx、editform.aspx 等是 SharePoint 开箱即用的列表表单，可能应该单独使用。

你在做什么改变？像增加文本框大小这样的简单更改还是实质性更改？

如果更改很大，您可以创建自己的表单

# javascript - javascript中的HTML转换器问题

> ID：11307056
> 
> 赞同：1
> 
> 时间：2012-07-03T08:22:09.350
> 
> 标签：javascript, parsing, text, string-parsing

我目前正在编写一个文本到 HTML 转换器，它应该：

从文本框 1 获取输入。

按段落将该输入拆分为数组的元素。（我用任何有文字并以 结尾的东西来定义段落`/n`）

遍历数组并添加`<p style=\"font-size: 13px; text-indent: 15px;\">`到每个元素的前面和`</p>`末尾。

从文本框 2 获取输入。（应该是单行）

`<p style=\"font-size: 11px; color: #666666; text-align: left; margin-top: 30px;\">A Power News :>`在前面和最后添加`</p>`。

将两者都输出到文本框中。

我写的代码如下：

*HTML：*

```
<form name="input" method="get">
Input the text here:<textarea cols="40" rows="5" name="bodyText" id = "bodyText" > </textarea><br />
Input Author Name:<input type="text" name="authorName" id = "authorName" />
<button type="button"value="Convert" onclick="convertBlog()">Click to convert to html template</button>
</form>
<textarea cols="110" rows="40" name="output" id= "output">  </textarea> 
```

*JavaScript：*

```
//STATIC VARIABLES USED FOR THE START AND END OF THE HTML LINES
var blogParagraphStart = "<p style=\"font-size: 13px; text-indent: 15px;\">";
var authorParagraphStart = "<p style=\"font-size: 11px; color: #666666; text-align: left; margin-top: 30px;\">A Power News 記者: "
var paragraphEnd = "</p>"

//GET THE INPUT FROM THE USER AND ASSIGN THEM TO VARIABLES
var bodyTxt = document.forms["input"]["bodyText"].value;
var authorName = document.forms["input"]["authorName"].value;

var bodyArray=str.split("\n"); 

var end = bodyArray.length+1;

while (i<end){
bodyArray[i] = blogParagraphStart + bodyArray[i] + paragraphEnd;
i++;
}

var reporterOutputString = authorParagraphStart + authorName +paragraphEnd ;

var outputString = bodyArray+ reporterOutputString;

document.getElementById("output").innerHTML= outputString ; 
```

由于某种原因，这不起作用，按钮什么也不做，我无法弄清楚。

我希望我清楚地解释了我的情况。该转换器仅用于非常特定的用途，因此可重用性不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:29:45.007

您是否在控制台中收到任何 javascript 错误？我没有在您的代码中看到从该行定义“str”的位置`var bodyArray = str.split("\n");`

似乎由于 bodyArray 是一个数组，您需要在将其放入字符串之前对其调用 join() ？

此外，`i`永远不会为您的 while 循环声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T08:30:59.887

你有没有打开你的 javascript 控制台来查找任何错误？

我不相信你已经初始化：

```
i = 0; 
```

在循环中使用它之前，所以它可能会抱怨这一点。

# php - 奇怪的 PHP DOMDocument 警告

> ID：11307059
> 
> 赞同：0
> 
> 时间：2012-07-03T08:22:13.223
> 
> 标签：php, windows, iis, domdocument

下面的代码给了我一个 DOMDocument 警告，我想知道为什么。我可以做些什么来修复它，或者不显示这个特定的警告？我在 windows xp 和 iis 上运行 php。

```
$content = "<html><body><p>'HTTP_REFERER' => 'http://localhost/?table=event_occurrence_person&LB1ID='</p></body></html>";
$dom = new DOMDocument;
$dom->loadHTML($content); 
```

警告：DOMDocument::loadHTML(): htmlParseEntityRef: 期待 ';' 在实体中，行：1 in...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T08:26:57.603

HTML中有一个bare `&`。`&`标志着一个 HTML 实体的开始，一个裸露的`&`需要被表示为实体`&amp;`。这就是警告的来源。

您可以使用以下命令使警告静音`@`：

```
@$dom->loadHTML($content); 
```

如果您对 HTML 具有完全控制权，则不应*使*警告静音。如果你在解析别人的 HTML，你可能别无选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:27:59.203

好吧，您的 XML 格式不正确。

*   `=>`必须转义到`=&gt;` *（可选，不阻塞）*
*   `&LB1ID`必须逃到`&amp;LB1ID` *（引起你的警告）*

# c# - 有没有可以从调试器生成代码的工具？

> ID：11307066
> 
> 赞同：0
> 
> 时间：2012-07-03T08:22:35.387
> 
> 标签：c#, visual-studio-2010, mocking, visual-studio-debugging, automated-refactoring

我正在考虑在 VS2010 的即时窗口中对 ?variable 进行等效的重构，是否可以获取该输出或通过另一种机制并创建代码来生成该对象及其属性（递归）。

我正在研究制作一些可用于我们的集成测试的实时“模拟”对象，而这个功能会让它变得更容易。

**更新：**基本上检查它是否可以执行以下操作...

```
MyObject
    AddressModel = MyAddressModel,
    AllowChangeDatasets = false, 
```

至

```
public class MyObject
{
     public AddressModel AddressModel { get; set;}
     public bool AllowChangeDatasets { get; set; }
}

MyObject obj = new MyObject();
obj.AddressModel = new MyAddressModel()
{
    // bla bla
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:25:53.010

[Rhino Mocks](http://hibernatingrhinos.com/open-source/rhino-mocks)怎么样？

> Rhino Mocks 是一个用于 .Net 平台的动态模拟对象框架。其目的是通过允许开发人员创建自定义对象的模拟实现并使用单元测试验证交互来简化测试。

# wireframe - 如何创建像 Balsamiq Mockups 这样的应用程序

> ID：11307068
> 
> 赞同：2
> 
> 时间：2012-07-03T08:22:46.003
> 
> 标签：wireframe, balsamiq

哪些语言用于创建像 Balsamiq Mockups 这样的 WireFraming/Mockups 应用程序？主要是网页应用。

他们使用 HTML5 Canvas API 吗？还是 Flash/Flex？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-04T13:59:57.700

一个老问题，但我会给它一个刺：

Balsamiq 有两个版本：“Desktop”和“myBalsamiq”，它们都在 Adob​​e Flash 平台上运行。桌面版在 Adob​​e Air Player 上运行，而 myBalsamiq（网络版）在您的网络浏览器中的 Adob​​e Flash Player 上运行。这两个版本都是使用 Flex 创建的。

帮助|关于我的桌面版本的屏幕截图显示它在 Adob​​e Air Player 上运行。

[![桌面帮助的屏幕截图|关于](../Images/b2a4b3a0271809d6fcb0387dee1e12a3.png)](https://i.stack.imgur.com/4ls2w.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-09T12:12:24.693

新更新：我认为现在[电子](https://www.electronjs.org/)是一个很好的解决方案

> 如果您可以构建网站，则可以构建桌面应用程序。Electron 是一个使用 JavaScript、HTML 和 CSS 等 Web 技术创建原生应用程序的框架。它负责处理困难的部分，因此您可以专注于应用程序的核心。

有许多使用此框架构建的桌面应用程序。包括[Figma](https://www.figma.com/)。

[此链接](https://www.electronjs.org/apps)是使用它构建的所有桌面应用程序的列表。

# jfreechart - jfree 甘特图条内的文本标签

> ID：11307070
> 
> 赞同：3
> 
> 时间：2012-07-03T08:22:59.767
> 
> 标签：jfreechart, gantt-chart

我在这里有一个简单的甘特图，它由许多任务组成，就像这样：

```
TaskSeries s1 = new TaskSeries("Planned Tasks");
Task newTask = new Task("Task" +
String.valueOf(taskIndex),
new
SimpleTimePeriod(currentTime,
currentTime +
(int) distributionTime)
);
s1.add(newTask) 
final TaskSeriesCollection collection = new TaskSeriesCollection();
collection.add(s1);

JFreeChart chart = ChartFactory.createGanttChart(
"Distribution ", 
"Task", 
"Time", 
collection, 
true, 
true, 
false 
); 
```

有没有办法在每个栏内写一些东西，代表一个任务？例如，如果任务由两个子任务组成，是否可以用标签标记它们，以便在绘图上看到它们的名称？提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T10:34:21.643

要在每个项目中添加 aa 标签，`setBaseItemLabelGenerator`在这种情况下我使用的是 a`IntervalCategoryItemLabelGenerator`但你可以通过扩展来实现你自己的 `CategoryItemLabelGenerator`.

使用此代码：

```
CategoryPlot plot = (CategoryPlot) chart.getPlot();
CategoryItemRenderer renderer = plot.getRenderer();
renderer.setBaseItemLabelGenerator( new IntervalCategoryItemLabelGenerator());
renderer.setBaseItemLabelsVisible(true);
renderer.setBaseItemLabelPaint(Color.BLACK);
renderer.setBasePositiveItemLabelPosition(new ItemLabelPosition(
ItemLabelAnchor.INSIDE6, TextAnchor.BOTTOM_CENTER)); 
```

然后你会得到这个：b

![带有 BaseItemLabelGenerator 的甘特图](../Images/5e3989662e3cd80f11f273479f1e5dfd.png)

自定义标签实现`CategoryItemLabelGenerator`

```
renderer.setBaseItemLabelGenerator( new CategoryItemLabelGenerator(){

    @Override
    public String generateRowLabel(CategoryDataset dataset, int row) {
        return "Your Row Text  " + row;
    }

    @Override
    public String generateColumnLabel(CategoryDataset dataset, int column) {
        return "Your Column Text  " + column;
    }

    @Override
    public String generateLabel(CategoryDataset dataset, int row, int column) {
        return "Your Label Text  " + row + "," + column;
    }

}); 
```

在此示例`generateLabel`中，控制条中的标签，可`CategoryDataset`用于确定要标记的条`row``column`

![在此处输入图像描述](../Images/aa90e8667728332899998e36d8dd37a0.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T07:59:47.073

最终我找到了这个问题的解决方案。把它贴在这里也许它会帮助别人。

问题是在 GanttRenderer 中现有的 drawTasks 函数中没有显示标签的代码。所以我们必须使用新的 drawTasks 函数来扩展 GanttRenderer 类：

```
 public class MyGanttRenderer extends GanttRenderer {
      private transient Paint completePaint;
      private transient Paint incompletePaint;
      private double startPercent;
      private double endPercent;

      public MyGanttRenderer() {
         super();
         setIncludeBaseInRange(false);
         this.completePaint = Color.green;
         this.incompletePaint = Color.red;
         this.startPercent = 0.35;
         this.endPercent = 0.65;
      }

      protected void drawTasks(Graphics2D g2,
            CategoryItemRendererState state,
            Rectangle2D dataArea,
            CategoryPlot plot,
            CategoryAxis domainAxis,
            ValueAxis rangeAxis,
            GanttCategoryDataset dataset,
            int row,
            int column) {

         int count = dataset.getSubIntervalCount(row, column);
         if (count == 0) {
            drawTask(g2, state, dataArea, plot, domainAxis, rangeAxis, 
                  dataset, row, column);
         }

         for (int subinterval = 0; subinterval < count; subinterval++) {

            RectangleEdge rangeAxisLocation = plot.getRangeAxisEdge();

            // value 0
            Number value0 = dataset.getStartValue(row, column, subinterval);
            if (value0 == null) {
               return;
            }
            double translatedValue0 = rangeAxis.valueToJava2D(
                  value0.doubleValue(), dataArea, rangeAxisLocation);

            // value 1
            Number value1 = dataset.getEndValue(row, column, subinterval);
            if (value1 == null) {
               return;
            }
            double translatedValue1 = rangeAxis.valueToJava2D(
                  value1.doubleValue(), dataArea, rangeAxisLocation);

            if (translatedValue1 < translatedValue0) {
               double temp = translatedValue1;
               translatedValue1 = translatedValue0;
               translatedValue0 = temp;
            }

            double rectStart = calculateBarW0(plot, plot.getOrientation(), 
                  dataArea, domainAxis, state, row, column);
            double rectLength = Math.abs(translatedValue1 - translatedValue0);
            double rectBreadth = state.getBarWidth();

            // DRAW THE BARS...
            Rectangle2D bar = null;

            if (plot.getOrientation() == PlotOrientation.HORIZONTAL) {
               bar = new Rectangle2D.Double(translatedValue0, rectStart, 
                     rectLength, rectBreadth);
            }
            else if (plot.getOrientation() == PlotOrientation.VERTICAL) {
               bar = new Rectangle2D.Double(rectStart, translatedValue0, 
                     rectBreadth, rectLength);
            }

            Rectangle2D completeBar = null;
            Rectangle2D incompleteBar = null;
            Number percent = dataset.getPercentComplete(row, column, 
                  subinterval);
            double start = getStartPercent();
            double end = getEndPercent();
            if (percent != null) {
               double p = percent.doubleValue();
               if (plot.getOrientation() == PlotOrientation.HORIZONTAL) {
                  completeBar = new Rectangle2D.Double(translatedValue0, 
                        rectStart + start * rectBreadth, rectLength * p, 
                        rectBreadth * (end - start));
                  incompleteBar = new Rectangle2D.Double(translatedValue0 
                        + rectLength * p, rectStart + start * rectBreadth, 
                        rectLength * (1 - p), rectBreadth * (end - start));
               }
               else if (plot.getOrientation() == PlotOrientation.VERTICAL) {
                  completeBar = new Rectangle2D.Double(rectStart + start 
                        * rectBreadth, translatedValue0 + rectLength 
                        * (1 - p), rectBreadth * (end - start), 
                        rectLength * p);
                  incompleteBar = new Rectangle2D.Double(rectStart + start 
                        * rectBreadth, translatedValue0, rectBreadth 
                        * (end - start), rectLength * (1 - p));
               }

            }

            Paint seriesPaint = getItemPaint(row, column);
            g2.setPaint(seriesPaint);
            g2.fill(bar);

            if (completeBar != null) {
               g2.setPaint(getCompletePaint());
               g2.fill(completeBar);
            }
            if (incompleteBar != null) {
               g2.setPaint(getIncompletePaint());
               g2.fill(incompleteBar);
            }
            if (isDrawBarOutline() 
                  && state.getBarWidth() > BAR_OUTLINE_WIDTH_THRESHOLD) {
               g2.setStroke(getItemStroke(row, column));
               g2.setPaint(getItemOutlinePaint(row, column));
               g2.draw(bar);
            }

            CategoryItemLabelGenerator generator = getItemLabelGenerator(row, column);
            if (generator != null && isItemLabelVisible(row, column)) {
               drawItemLabel(g2, dataset, row, column, plot, generator, bar, false);
            }

            // collect entity and tool tip information...
            if (state.getInfo() != null) {
               EntityCollection entities = state.getEntityCollection();
               if (entities != null) {
                  String tip = null;
                  if (getToolTipGenerator(row, column) != null) {
                     tip = getToolTipGenerator(row, column).generateToolTip(
                           dataset, row, column);
                  }
                  String url = null;
                  if (getItemURLGenerator(row, column) != null) {
                     url = getItemURLGenerator(row, column).generateURL(
                           dataset, row, column);
                  }
                  CategoryItemEntity entity = new CategoryItemEntity(
                        bar, tip, url, dataset, dataset.getRowKey(row), 
                        dataset.getColumnKey(column));
                  entities.add(entity);
               }
            }
         }
      }
   } 
```

要在每个栏（包括子任务）上显示标签，只需执行以下操作：

```
 CategoryPlot plot = (CategoryPlot) chart.getPlot();

 MyGanttRenderer renderer = new MyGanttRenderer();
 plot.setRenderer(renderer);

 renderer.setBaseItemLabelGenerator(new CategoryItemLabelGenerator() {

      public String generateLabel(CategoryDataset dataSet, int series, int categories) {
       /* your code to get the label */
       return label;
      }

      public String generateColumnLabel(CategoryDataset dataset, int categories) {
          return dataset.getColumnKey(categories).toString();
      }

      public String generateRowLabel(CategoryDataset dataset, int series) {
          return dataset.getRowKey(series).toString();
      }
 });

 renderer.setBaseItemLabelsVisible(true);
 renderer.setBasePositiveItemLabelPosition(new ItemLabelPosition(ItemLabelAnchor.OUTSIDE9, TextAnchor.CENTER_LEFT)); 
```

就是这样。希望它对某些人有用。

# c++ - 如何像java一样迭代c ++中的枚举？

> ID：11307076
> 
> 赞同：0
> 
> 时间：2012-07-03T08:23:27.627
> 
> 标签：c++, enums

> **可能重复：**
> [C++：遍历枚举](https://stackoverflow.com/questions/261963/c-iterate-through-an-enum)

我在 C++ 中有以下枚举；

```
typedef enum
{
    APP_NONE = 0,
    APP_SESSION = 0x80000001,
    APP_TITLE = 2,
} APP_TYPE; 
```

我正在编写一个测试函数，它接受一个字符串，获取相关整数，例如：getEnumByString("APP_NONE") = 0; 反之亦然 getEnumString(0)="APP_NONE"。

是否有可能以及如何完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:26:55.333

您可以将`enum`值推送到容器中，例如向量或集合，然后对其进行迭代。

```
std::vector<APP_TYPE> types;
types.push_back(APP_NONE);
types.push_back(APP_SESSION);
types.push_back(APP_TITLE); 
```

您可以使用映射将`enum`值与字符串相关联，反之亦然。

```
std::map<APP_TYPE, std::string> type2string;
type2string[APP_NONE] = "APP_NONE";
type2string[APP_SESSION] = "APP_SESSION";
type2string[APP_TITLE] = "APP_TITLE"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:27:15.703

看看这个： http: [//www.codeproject.com/Articles/42035/Enum-to-String-and-Vice-Versa-in-C](http://www.codeproject.com/Articles/42035/Enum-to-String-and-Vice-Versa-in-C)

# android - 编辑pdf以修改标题

> ID：11307078
> 
> 赞同：5
> 
> 时间：2012-07-03T08:23:31.547
> 
> 标签：android, pdf, header

从我的 android 应用程序中，您可以下载存储在 SD 卡上的 PDF 文件，我希望对用户不可见，因此更改文件的扩展名，但似乎不够，所以我希望能够编辑 pdf 并在 pdf 的开头插入一个字符串，这样如果该字符串在 pdf 中是不可用的。

如果您能告诉我如何打开/转换 pdf 以将字符串添加到开头，或者其他类型的方法将不胜感激。

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:31:59.317

查看[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)以了解在 android 中操作文件的各种选项。如果您希望文件对您的应用程序是私有的，而不是更改扩展名和文件头，您可能需要考虑权限。例如，考虑以下行，它以私有模式打开文件以进行输出。也就是说，除了您的应用程序之外，没有人可以访问该文件：

```
FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_PRIVATE); 
```

# c - 更改 LPC 1768 的波特率 UARTx 不起作用

> ID：11307083
> 
> 赞同：2
> 
> 时间：2012-07-03T08:24:01.670
> 
> 标签：c, cortex-m3, uart

我在更改 lpc1768 上的 uart 波特率的方式上遇到了一些问题。

要初始化和配置我的 uart，我使用以下代码，它适用于 9600 波特或 38400。

```
/* RxD0 is P0.3 and TxD0 is P0.2 */
LPC_PINCON->PINSEL0 &= ~(0x03<<4);          // Reset P0.2 = GPIO
LPC_PINCON->PINSEL0 |=  (0x01<<4);          // Config P0.2 = TxD0
LPC_PINCON->PINSEL0 &= ~(0x03<<6);      // Reset P0.3 = GPIO
LPC_PINCON->PINSEL0 |=  (0x01<<6);          // Config P0.3 = RxD0

LPC_UART0->LCR = 0x87; //8bits, no parity, 2 stop bits
switch (baudrate)
{
default :
case 9600 :
    LPC_UART0->DLM = 0x00;  //calculated with datasheet
    LPC_UART0->DLL = 0x4E;

    LPC_UART0->FDR = 0x21;
    break;

case 38400 :
    LPC_UART0->DLM = 0x00;  //calculated with datasheet
    LPC_UART0->DLL = 0x14;

    LPC_UART0->FDR = 0xF7;
}

LPC_UART0->LCR = 0x07;//0x03;       /* DLAB = 0 */
LPC_UART0->FCR = 0x07;      /* Enable and reset TX and RX FIFO. */

NVIC_EnableIRQ(UART0_IRQn);

LPC_UART0->IER = IER_RBR | IER_THRE | IER_RLS;  /* Enable UART0 interrupt */ 
```

但是要将波特率从 9600 更改为 38400，我尝试将 DLM/DLL 和 FDR 寄存器更改为适当的值（与上面的代码相同）。但这不起作用......（波特率未定义）。

我的 pclk 是 18MHz

只改变这三个寄存器是不够的？我错了吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T08:52:01.250

我找到了解决办法：我忘记在 LCR 寄存器中设置 DLAB 位。如果不进行此更改，则无法更改波特率。

改变波特率的一种简单方法是：

```
 LPC_UART0->LCR = 0x87;
   switch (baudrate)
   {
     default :
     case 9600 :
      LPC_UART0->DLM = 0x00;    //fhn calculated with algorithm in the datasheet
      LPC_UART0->DLL = 0x4E;//0x06;

      LPC_UART0->FDR = 0x21;//0x85;calculation, but not sure to need
  break;

      case 38400 :
       LPC_UART0->DLM = 0x00;   
       LPC_UART0->DLL = 0x14;//0x06;

       LPC_UART0->FDR = 0xF7;
  break;
}
LPC_UART0->LCR = 0x07; 
```

# blackberry - 在相同大小的黑莓上制作按钮

> ID：11307084
> 
> 赞同：0
> 
> 时间：2012-07-03T08:24:04.280
> 
> 标签：blackberry, buttonfield

我想有两个相同大小的按钮，一个在左边，另一个在右边。这是我的代码，但我得到按钮的宽度比另一个大

```
hManager = new HorizontalFieldManager(Field.USE_ALL_WIDTH|FIELD_VCENTER);
hManager.setPadding(15, 0, 15, 15);

B1= new ButtonField("B1", Field.FIELD_LEFT | ButtonField.CONSUME_CLICK ) {

    public int getPreferredWidth() {
      return 200;
    }
};

B2= new ButtonField("B2", Field.FIELD_RIGHT | ButtonField.CONSUME_CLICK ) {

    public int getPreferredWidth() {
        return 200;
    }
};

hmanager.add(B1);
hmanager.add(B2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:49:27.927

做类似的事情

```
public int getPreferredWidth() {
    return (Display.getwidth()/2)-20 ;               
} 
```

在你的`ButtonField`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:41:35.440

don't put absolute values, just portion because blackberry screen is different in a large way

@Bbdev solution is the answer in code

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T07:45:03.653

实际上问题是，例如考虑屏幕宽度为 240。但根据您的代码，您为第一个按钮提供了 200 作为宽度。所以 240-200。现在还有 40 是剩余的屏幕宽度。所以它不会考虑为第二个按钮提供的 200 宽度。所以由于没有足够的宽度，默认情况下它需要剩余的宽度（不是你给定的宽度）。所以你必须根据屏幕宽度设置按钮宽度。而且在您的代码中 Field.Field_Right 也不起作用。只有在垂直管理器中，您才能设置水平属性。

# ssl - 证书错误

> ID：11307093
> 
> 赞同：-1
> 
> 时间：2012-07-03T08:24:20.177
> 
> 标签：ssl, https, ssl-certificate

有一点证书错误相关的问题。我有这个域名 www.coachba.se 并为它购买了 SSL 证书。这工作正常，浏览器在 http 或 https 上都没有错误。但是，当用户在浏览器上输入coachba.se（缺少www）时，它会向用户生成证书警告。浏览器上的域是[https://coachba.se](https://coachba.se) ，一旦它发出警告并且用户接受警告，该站点就会正常出现。然而，这个警告让我很困扰。我想知道是否可以解决此问题，还是我别无选择只能购买新证书？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:30:17.163

该证书已在 www.coachba.se 注册，只有这样才有效。当用户访问coachba.se 时，将显示错误，因为该URL 没有注册证书。

2个解决方案是；

获取通配符 SSL 证书 (*.coachba.se)

获取 coachba.se 的特定 SSL 证书

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:14:53.473

通常 CA 为 www.domain.com 和 domain.com 颁发证书。您可能需要联系 CA 支持并询问他们如何替换证书以涵盖这两种变体。此外，这个问题在 StackOverflow 上是题外话。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-03T08:30:50.127

抱歉，您需要购买新证书，这是网络浏览器的东西，因为您的证书实体不为人所知。

# c# - 使用 C# 导出 XML

> ID：11307094
> 
> 赞同：1
> 
> 时间：2012-07-03T08:24:34.517
> 
> 标签：c#, xml, export

我正在尝试从 C# 中的某些数据中导出 xml

```
XDocument doc = XDocument.Parse(xml); 
```

保存 XML 后，我发现 XML 包含

```
<?xml version="1.0" encoding="utf-8"?> 
```

我根本没有输入，并导致如下问题。

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="..\..\dco.xsl"?>
<S>
  <B>
  </B>
</S> 
```

我不希望第一行出现，有什么想法吗？感谢您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:27:17.733

如果我理解正确，您需要一个没有标题的 XML 文件。看看[这个答案](https://stackoverflow.com/a/767359/119230)。

基本上，您将需要初始化[`XmlWriter`](http://msdn.microsoft.com/en-us/library/system.xml.xmlwriter.aspx)和[`XmlWriterSettings`](http://msdn.microsoft.com/en-us/library/system.xml.xmlwritersettings.aspx)类，然后调用`doc.Save(writer)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T08:30:20.247

它的 PI（处理指令）是处理 xml 文件时需要并包含的重要信息。

在编写 xml 文件时试试这个：

```
XmlWriter w;
w.Settings = new XmlWriterSettings();
w.Settings.ConformanceLevel = ConformanceLevel.Fragment;
w.Settings.OmitXmlDeclaration = true; 
```

[序列化对象时省略 XML 处理指令](https://stackoverflow.com/questions/164585/omitting-xml-processing-instruction-when-serializing-an-object)

[从 xml 文件中删除版本](https://stackoverflow.com/questions/1980187/removing-version-from-xml-file)

[http://en.wikipedia.org/wiki/Processing_Instruction](http://en.wikipedia.org/wiki/Processing_Instruction)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T08:54:20.893

您所说的是“之后”，您使用字符串解析，如您在上面看到的结果包含重复声明？

现在我不确定您如何保存您的回复，但这里有一个示例应用程序，它会产生类似的结果。

```
XDocument doc = XDocument.Parse("<?xml-stylesheet type=\"text/xsl\" href=\"dco.xsl\"?><S><B></B></S>");
            doc.Save(Console.OpenStandardOutput()); 
```

产生结果：

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="dco.xsl"?>
<S>
  <B></B>
</S> 
```

这是你遇到的问题。您需要在保存之前删除 xml 声明。这可以通过在保存 xml 输出时使用 xml 编写器来完成。这是一个示例应用程序，它带有一个扩展方法，可以在没有声明的情况下编写新文档。

```
class Program
    {
        static void Main(string[] args)
        {
            XDocument doc = XDocument.Parse("<?xml-stylesheet type=\"text/xsl\" href=\"dco.xsl\"?><S><B></B></S>");
            doc.SaveWithoutDeclaration(Console.OpenStandardOutput());
            Console.ReadKey();
        }

    }

    internal static class Extensions
    {
        public static void SaveWithoutDeclaration(this XDocument doc, string FileName)
        {
            using(var fs = new StreamWriter(FileName))
            {
                fs.Write(doc.ToString());
            }
        }

        public static void SaveWithoutDeclaration(this XDocument doc, Stream Stream)
        {
            byte[] bytes = System.Text.Encoding.UTF8.GetBytes(doc.ToString());
            Stream.Write(bytes, 0, bytes.Length);
        }
    } 
```

# java - 为什么调用“Runtime.getRuntime().exec(cmd);”时没有输出 在 Linux 中？

> ID：11307095
> 
> 赞同：1
> 
> 时间：2012-07-03T08:24:35.117
> 
> 标签：java, process, runtime.exec

我尝试使用`Runtime.getRuntime().exec(cmd)`运行 jad app 来反编译 .class 文件。`cmd = "../bin/jad Test.class"`但我无法通过这种方式获得输出：

```
Process p = Runtime.getRuntime().exec(jadCmd2);
BufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream()));
String line = null;
while ((line = in.readLine()) != null) {
        System.out.println(line);
} 
```

没有输出，谁能告诉我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T08:29:21.180

我怀疑你遇到了错误。我建议你也打印出来。

如果您使用 ProcessBuilder，您可以将输出和错误结合起来，这样您就只有一个流可以读取。

来自[http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)

```
 ProcessBuilder pb =
   new ProcessBuilder("myCommand", "myArg1", "myArg2");
 pb.redirectErrorStream(true);
 Process p = pb.start(); 
```

# android - 在没有监听器的情况下获取手机信号强度

> ID：11307096
> 
> 赞同：2
> 
> 时间：2012-07-03T08:24:34.820
> 
> 标签：android, telephony

如何在不使用监听器的情况下获取当前的 CDMA 信号强度？如果信号电平发生变化，我不需要更新。研究我还没有看到解决方案。如果它只在改变时才显示出来，那么顶部的信号电平条是如何工作的？我只需要对与条形相关的细胞信号强度进行非常粗略的估计。

```
ConnectivityManager cm=(ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
TelephonyManager tm = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
NetworkInfo activeNetwork = cm.getActiveNetworkInfo();
int CDMAdb=cm.SignalStrength.getCdmaDbm(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T18:11:37.093

我不使用与调制解调器/RIL 相关的东西，但由于手机在启动时会尝试连接到网络，我猜想显示信号强度的状态栏会在启动后立即开始监听信号强度变化。
您还可以通过实现一个[在引导完成时自动启动](https://stackoverflow.com/questions/2784441/trying-to-start-a-service-on-boot-on-android)并注册一个`PhoneStateListener`接收`onSignalStrengthsChanged`回调的服务来做到这一点。接收到第一个回调之前的初始信号强度值由您决定（最小强度似乎是一个合理的初始值）。然后，您的活动可以在需要时向服务查询当前信号强度（通过意图/绑定器/其他）。

# oracle - 解释西班牙口音 Oracle

> ID：11307101
> 
> 赞同：0
> 
> 时间：2012-07-03T08:24:49.107
> 
> 标签：oracle, internationalization, globalization

我找不到帮助我插入来解释西班牙口音和字符的功能，例如`ñ`. 你能带领我吗？谢谢

例如：

```
INSERT INTO PRUEBA.PRUEBA_EDAD(COD,DABREV,DCORTA,DLARGA,EDAD_MESES,EDAD_ANYOS,FECHA_ACT)
VALUES (60,'60','ENTRE 2 Y 8 AÑOS','ENTRE 2 Y 8 AÑOS',60,5,0,sysdate); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:31:56.680

你能准确解释问题是什么吗？当您查询数据时，您是否获得了替换字符（很可能是 ? 或颠倒的 ?）？或者是其他东西？

*   各种列（ 、 等）的数据类型是`CHAR`什么`VARCHAR2`？
*   什么是客户端`NLS_LANG`设置
*   数据库服务器的数据库和国家字符集是什么？

如果不确定，可以运行

```
SELECT *
  FROM v$nls_parameters
 WHERE parameter LIKE '%CHARACTERSET' 
```

*   您使用什么语言/框架/API 来发布`INSERT`声明？
*   如果您`DUMP`将数据存储在数据库中，您会得到什么

就像是

```
SELECT dump( DCORTA ) 
  FROM PRUEBA_EDAD
 WHERE cod = 60 
```

# node.js - nodejs 属性未定义

> ID：11307104
> 
> 赞同：-1
> 
> 时间：2012-07-03T08:25:05.040
> 
> 标签：node.js, express, mongoose

我定义：

*   用于保存对象的猫鼬模式（Type1）
*   其他 2 个使用其他属性（内容和其他...）扩展第一个模式（Type2 和 Type3）的其他人。

当我从数据库加载保存为 Type 2 的对象 Type1 时，我可以访问除一个（内容属性）之外的所有属性。但是，如果我这样做，`object.toString()`该属性确实存在。

这怎么可能？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:08:45.533

mongoose 对象的属性始终与其模式相同。作为`Type1`模式加载将具有模式的属性`Type1`。

底层数据可能更大（因为 Schema 继承或仅仅因为有人直接在 MongoDB 中存储了更多数据），但您无法从`Type1`仅使用属性的级别访问它。您可以尝试使用（未测试）的方法是`object.getValue('content');`. 另外，我认为它`object._doc`包含来自数据库的真实数据。

最后一件事：`object.toString`实际上是被覆盖的，它显示`inspect`了整个对象。这就是为什么您会看到基础数据。

# api - Google+ OAuth 授权错误（无效令牌）

> ID：11307105
> 
> 赞同：3
> 
> 时间：2012-07-03T08:25:06.063
> 
> 标签：api, oauth-2.0, google-plus

在 Google+ 上，我需要访问用户的时间线。我使用以下代码进行身份验证：

```
private string GetUrl(string url, Dictionary<string, string> parameters)
        {
            if (parameters.Count == 0)
            {
                return url;
            }

            string query_string = String.Empty;
            foreach (var k in parameters)
                query_string += k.Key + "=" + (k.Value) + "&";

            query_string = query_string.TrimEnd('&');

            return url + "?" + query_string;
        }

var req = GetUrl(auth_endpoint, new Dictionary<string, string>()
            {
                { "response_type", "code" },
                { "client_id", "XXXXXX.apps.googleusercontent.com" },
                { "redirect_uri", "http://localhost:58772/GooglePlus.aspx" },
                { "scope", "https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/plus.me" },
                { "state", "authenticated" },
            });

            Response.Redirect(req); 
```

但是，当我使用“授权：承载 XXXX”标头请求[https://www.googleapis.com/oauth2/v1/userinfo](https://www.googleapis.com/oauth2/v1/userinfo) API 时，出现以下错误。

```
{
 "error": {
  "errors": [
   {
    "domain": "com.google.auth",
    "reason": "invalidAuthentication",
    "message": "invalid token",
    "locationType": "header",
    "location": "Authorization"
   }
  ],
  "code": 401,
  "message": "invalid token"
 }
} 
```

使用“curl”发出请求也会发生同样的情况。我复制并粘贴了谷歌给出的身份验证码很多时间......结果相同。验证码如下所示：4/XXX-XXXXXXXXXXXXXXX.XXXXXXXXXXXXX_XXXXXX

我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-24T09:16:58.623

这可能是因为用于验证令牌的 url 错误。有同样的问题。试试这个网址：- `https://www.googleapis.com/oauth2/v3/tokeninfo?id_token=<token>`。希望能帮助到你。

# xpages - 字段 onchange 事件的部分刷新不起作用

> ID：11307107
> 
> 赞同：0
> 
> 时间：2012-07-03T08:25:10.037
> 
> 标签：xpages

我在 XPages 中遇到部分刷新问题，任何人都可以帮助我解决这个问题。

我有两个名为 txtCategory 和 txtPolicy 的字段，我正在根据这两个字段在一个名为 txtClause 的字段中进行查找，我有一个名为 vwKeyword 的视图，它的第一列字段映射如下：“txtCategory~txtPolicy”

第一次正确填充字段，如果我更改字段 txtCategory 或 txtPolicy 第三个字段 txtClause 不刷新

txtCategory 的 evevt-OnChange 我正在部分刷新 txtPolicy txtPolicy 的 evevt-OnChange 我正在部分刷新 txtClause

在此先感谢，JB 这是我在该领域的代码：txtClause

```
var val1 =  getComponent("txtCategory").getValue();
var val2 =  getComponent("txtPolicy").getValue();
var key  =  val1+"~"+val2;
@DbLookup(@DbName(),"vwKeyword",key,2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:34:46.203

有以下两种情况，

1.  首先检查 onchange 事件，这是否有效。将 try catch 用于捕获错误。
2.  其次，检查所有字段名称是否正确。这可能是一个粗心的错误。

# java - JodaTime 在第一次通话时非常慢

> ID：11307111
> 
> 赞同：0
> 
> 时间：2012-07-03T08:25:38.773
> 
> 标签：java, performance, static, jodatime

```
import org.joda.time.LocalDate;

public class Test {
    public static void main(String[] args) {
        long time=System.currentTimeMillis();
        new LocalDate(2000,1, 1);
        System.out.println(System.currentTimeMillis()-time);
        time=System.currentTimeMillis();
        new LocalDate(2000,1, 1);
        System.out.println(System.currentTimeMillis()-time);
    }
} 
```

首次调用 new LocalDate 需要 110 毫秒。第二次调用需要 0ms。

首先，如何运行给定类的所有静态初始化程序？其次，有没有办法提前为我的应用程序引用的所有类执行此操作？

我的应用程序对延迟非常敏感。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:46:45.893

这就是 Java 和 JVM 的工作方式——在最佳运行之前它总是需要预热。您应该进行一些集成测试，以测试应用程序的所有部分，最好以不破坏数据的方式进行。然后在每次部署时针对应用程序运行它们。这将有一个好处是让您确信应用程序正在运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T09:15:44.500

您可以获取加载的类列表`-XX:+TraceClassLoading`并将其保存到文件中。然后，您可以使用 Class.forName() 来确保所有这些类都已加载。

这将加载每个类并确保它们的静态块已被加载。

但是对于延迟敏感代码，您确实需要通过预热它来确保它已经被编译（即调用它足够的时间来触发编译）这可以将延迟进一步减少 10 倍或更多。

* * *

如果你跑

```
public class CallStatic {
    public static void main(String... args) throws ClassNotFoundException {
        Class.forName("Static");
    }
}

class Static {
    static {
        System.out.println("static block run");
    }
} 
```

印刷

```
static block run 
```

尝试创建一个实例不会加载更多的类。如果它有一个默认构造函数，它可能会加载它，但这只有在你想要的时候才有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T08:41:26.837

看起来像静态初始化问题。尝试做

```
Class.forName("org.joda.time.LocalDate"); 
```

在你打电话之前。这应该减少时间。可能您需要强制加载其他相关类。如果问题是动态初始化，这将无济于事。

# git - gitweb vs git-log 日期

> ID：11307115
> 
> 赞同：0
> 
> 时间：2012-07-03T08:25:51.410
> 
> 标签：git, git-log, gitweb

我目前有一个来自我们公司 git 服务器的仓库的本地克隆。我注意到的是，返回的历史摘要中返回`git log`的日期与我们的 gitweb 服务器视图上的日期不匹配。

任何人都可以解释这些中的每一个如何获得他们的日期，以及为什么他们可能会有所不同？

不同的日期使得跟踪更改变得非常复杂！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:46:15.103

我找到了答案：

一个是作者日期，一个是提交日期。

以下博客让我非常清楚：

[http://www.alexpeattie.com/blog/working-with-dates-in-git/](http://www.alexpeattie.com/blog/working-with-dates-in-git/)

# axapta - AOD 文件是否存在一些外部文本查看器？

> ID：11307116
> 
> 赞同：0
> 
> 时间：2012-07-03T08:25:51.340
> 
> 标签：axapta, dynamics-ax-2009

是否存在一些用于读取 Axapta 的 AOD 源文件的外部文本查看器？我想每 X 小时备份一次，然后尝试阅读源代码的“过去”版本。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:38:30.007

听起来您正在尝试重新编写源代码控制，也许您应该考虑打开源代码控制？[看这里](http://blogs.msdn.com/b/axsupport/archive/2011/05/31/working-with-version-control-in-ax.aspx)

如果需要，我有一些用于将类/对象备份到 XPO 文件的代码？[是这里](https://stackoverflow.com/questions/11306731/where-are-the-source-files-of-ax-stored/11308368#11308368)

此外，XPO 文件只是简单的文本文件，您可以（在一定程度上）在任何文本文件查看器/编辑器中阅读它们

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T08:32:22.190

答案是不。

我同意安东尼的观点。

# javascript - 让 javascript 不显眼

> ID：11307121
> 
> 赞同：0
> 
> 时间：2012-07-03T08:26:01.893 元素？
> 
> 标签：javascript

当涉及到 javascript 时，我们都在努力工作，不幸的是，无法将 js 隐藏在浏览器中，但是我们不希望其他人立即能够复制我们在数小时内完成的工作。当我查看 Facebook 脚本标签时，它只是一大堆单字母变量和函数，没有人能瞬间破译。是否有类似脚本程序的东西，它只是“匿名化”/“解密”/“编码”我的 js，所以没有人能真正立即看到发生了什么？

示例（远非完美且充满错误）：

```
function convertTimeToString(time) {
   var seconds = 0;
   var minutes = 0;
   if(time % 60 >= 10) {
       seconds = time % 60;
   else {
       seconds = "0" + time % 60;
   }
   minutes = Math.floor(time/60);
   return minutes + ":" + seconds;
} 
```

变成这样

```
function s(t){var a=0;var b=0;if(t%60>=10){a=t%60;}else{a="0"+t%60;}b=Math.floor(t%60);return b+":"+a;} 
```

我想你看到了区别，一个好的 js 编码器需要更多的时间来理解这个脚本实际上在做什么。任何想法如何自动完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:28:04.497

使用像[YUI Compressor](http://developer.yahoo.com/yui/compressor/)或[UglifyJS这样的压缩工具](http://marijnhaverbeke.nl//uglifyjs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:27:41.250

尝试[JSMin](http://www.crockford.com/javascript/jsmin.html)：

> JSMin 不会混淆，但会丑化。

# php - 如何从 php 中的 url 获取参数？

> ID：11307122
> 
> 赞同：3
> 
> 时间：2012-07-03T08:26:03.993
> 
> 标签：php, arrays, url

我已经阅读了 stackoverflow 中的一些帖子来部分解决我的问题，但我找不到答案。`"www.site.com/?page=1&f[0]=bundle"`是我网址中的 2 个参数。 `$_REQUEST['page']`有效，但是当我尝试使用`$_REQUEST['f[0]']`它时不起作用。我想根据 url 跳过我的部分编码。那么我该如何使用`!isset($_REQUEST['f[0]'])`或类似的测试呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T08:30:14.287

它们是[GET](http://php.net/manual/en/reserved.variables.get.php)参数。

```
$_GET['page']; // = 1
$_GET['f'][0]; // = bundle 
```

应该管用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T08:32:35.410

当您使用方括号传递变量时，这意味着 PHP 代码中的该变量将是一个数组。因此，要访问它，请使用以下命令：

```
$_REQUEST['f'][0]
// or $_GET['f'][0] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T08:33:48.050

URL 中用于传递变量的格式是 url 本身，后跟一个问号，然后是由 & 号分隔的变量列表和变量数据。例子：

> www.domain.com/index.php?variable1Name=theFirstValue&variable2Name=theSecondValue

```
$variable1 = $_GET['variable1Name'];
$query1 = "SELECT * FROM table1 WHERE recodrID = $variable1";
$variable2 = $_GET['variable2Name'];
$query2 = "SELECT * FROM table2 WHERE recodrID = $variable2"; 
```

我现在应该指出的是，要在 xhtml 严格中成为 W3C 有效，您的代码中不能有 & 符号，相反，您必须在源代码中使用 &，它会被您的浏览器解析为 & 符号。因此，如果您想在 html 中链接到上述 URL 示例，则链接代码如下所示：

```
<a href="www.domain.com/index.php?variable1Name=theFirstValue&amp;variable2Name=theSecondValue">Link Title</a> 
```

我希望这有帮助 ：）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-03T08:32:21.640

你的第二个参数是一个数组，试试这个：

```
$_REQUEST['f'][0] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-03T08:43:29.350

你好，你可以试试这个：

```
$get_data = $_GET; // this is an array of all get parameter and value 

$pageval =   $get_data['page'];

$fval =  $get_data['f'][0];

echo $pageval;

echo $fval; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-03T08:44:01.270

在 PHP 中，您可以使用 3 个全局数组来处理来自请求的数据。

$_REQUEST 是普通数组（GET、POST、COOKIE）

$_GET - 仅 GET 请求

$_POST - 仅 POST

因此，您可以通过两种方式从请求中获取 f-array：

```
$f = $_REQUEST['f'];
print_r($f); 
```

或者

```
$f = $_GET['f'];
print_r($f); 
```

# maven - maven配置文件中“properties-maven-plugin”和“filter”的目的是什么

> ID：11307124
> 
> 赞同：2
> 
> 时间：2012-07-03T08:26:17.737
> 
> 标签：maven, configuration

我想解释一下 maven 过滤器标签以及它与插件 properties-maven-plugin 中的文件标签的对应关系。

有问题的个人资料：

```
<profile>
    <id>local-spm-caefeeder-preview</id>
    <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>properties-maven-plugin</artifactId>
                <version>1.0-alpha-1</version>
                <executions>
                    <execution>
                        <phase>initialize</phase>
                        <goals>
                            <goal>read-project-properties</goal>
                        </goals>
                        <configuration>
                        <quiet>true</quiet>
                        <files>
                            <file>${main.basedir}/src/config/global.properties</file>
                            <file>${main.basedir}/src/config/caefeeder/caefeeder_global.properties</file>
                            <file>${main.basedir}/src/config/caefeeder/caefeeder_preview.properties</file>
                            <file>${main.basedir}/src/config/local.properties</file>
                            <file>${main.basedir}/src/config/${user.name}.properties</file>
                        </files>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
        <filters>
            <filter>${main.basedir}/src/config/caefeeder/caefeeder_global.properties</filter>
            <filter>${main.basedir}/src/config/caefeeder/caefeeder_preview.properties</filter>
            <filter>${main.basedir}/src/config/local.properties</filter>
            <filter>${main.basedir}/src/config/${user.name}.properties</filter>
        </filters>
    </build>
</profile> 
```

根据我的研究，过滤器定义了其中包含需要替换的变量的文件。“properties-maven-plugin”是否从文件标签中定义的文件中提供这些变量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T08:49:22.673

首先，要让 Maven 过滤器真正起作用，您需要为某些目录启用资源过滤，例如

```
 <resource>
    <directory>src/main/resources</directory>
    <filtering>true</filtering>
  </resource> 
```

仅列出一些过滤器文件没有任何作用，因为这些读取值不会在任何地方使用。

现在，这里解释不同之处。[`read-project-properties`](https://www.mojohaus.org/properties-maven-plugin/read-project-properties-mojo.html)从属性文件中[`properties-maven-plugin`](https://www.mojohaus.org/properties-maven-plugin/index.html)读取一些值并将它们存储为 Maven 变量的目标。它在 Maven 生命周期 ( `<phase>initialize</phase>`) 的早期执行，因此它们几乎从一开始就可用。因此，我们可以说这是一种将 Maven 属性外部化的方法，方法是将它们放入一些常规属性文件中，而不是`<properties>`在`pom.xml`. 这里重要的是，Maven 变量用于资源过滤。

现在，`<filters>`标签。这些文件不提供 Maven 项目变量。它们提供仅用于资源过滤的变量。

因此，在资源过滤的上下文中，实际行为几乎相同。读取的属性`properties-maven-plugin`将用于资源过滤以及从过滤器文件中读取的属性。但是，读取的那些`properties-maven-plugin`也将作为 Maven 项目属性使用，因此它们可以用于例如插件的配置或任何其他 POM 相关的东西。

# c++ - 类内部定义的静态结构的静态成员的编译时默认值

> ID：11307125
> 
> 赞同：3
> 
> 时间：2012-07-03T08:26:18.510
> 
> 标签：c++, static, initialization, options

我想从你那里得到一个设计建议。

我在 C++ 中有一组类，每个类都有一堆变量（`double`和`int`），这些变量决定了它们实现的算法的行为。

像这样的东西：

```
class Foo
{
  private:
  double value1, value2, etc...;
  public: 
  void setOptions(double val1, double val2);
  /*
  and here other methods...
  */
};

class Bar
{
  private:
  double value1, value2, etc...;
  public: 
  void setOptions(double val1, double val2);
  /*
  and here other methods...
  */
}; 
```

我想将所有这些选项变量分组在一个类中，这样就可以动态更改类实例中选项的变量，但我也想为`value`变量提供一个默认值作为初始化。

我希望选项变量是不同的，并在编译时为每个类设置一个默认值。

我采用了以下方法：

```
// Options.h
class Options
{
    public:
    Options();

    static struct FooOptions
    {
      static double option1;
      static double option2;
    } fooOptions;

    static struct BarOptions
    {
      static double option1;
      static double option2;
        // etcetera
    } barOptions;  
}; 
```

然后在`Foo`和`Bar`类中我使用值`Options::FooOptions::option1`等等。

这里的问题是我无法静态初始化这些值。我习惯在 .cpp 文件中初始化静态成员，但在我的 .cpp 中

```
// Options.cpp
Options::FooOptions::option1 = 1.0; 
```

我得到以下编译器 `error: error: expected constructor, destructor, or type conversion before ‘=’ token`

另一方面，如果我在构造函数中初始化它们：

```
// Options.cpp
Options::Options()
{
    FooOptions::option1=1.0;
} 
```

当我`undefined reference`尝试从我的`main`.

我认为这里的问题是我有两个嵌套的静态结构。这种设计的最佳解决方案是什么？

您将如何实现一个仅充当容器的类`double`和`int`在类内部用作算法参数的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T08:34:50.547

> ```
> // Options.cpp
> Options::FooOptions::option1 = 1.0; 
> ```

添加缺少的“双”:-)

```
double Options::FooOptions::option1 = 1.0; 
```

应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T08:32:11.140

这个给你：

```
// Options.h
class Options
{
    public:
    static struct FooOptions
    {
      FooOptions() : option1(0.0), option2(0.1) {};
      double option1;
      double option2;
    } fooOptions;
}; 
```

您不需要类中的结构实例，因为它们的所有字段都是静态的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T08:41:51.487

看来您**过度设计**了课程。一种简单的方法是将这些选项数据作为私有成员包含在您的类中，并提供公共 setter/getter。

通过在构造函数中添加参数，您可以自定义默认行为。通过添加 setter 和 getter，您可以动态更新行为，即在运行时。

```
class Options
{
  public:
    /* choice=1: fooOptions
     * choice=2: barOptions
     * ..
     */
    Options(int choice);
    void SetOptions(..);
    void GetOptions(..);

  private:
    double option1;
    double option2;
}; 
```

# ruby-on-rails - Rails - 在没有提交按钮的情况下获取更新数据库的更改

> ID：11307127
> 
> 赞同：0
> 
> 时间：2012-07-03T08:26:26.930
> 
> 标签：ruby-on-rails, database, select, drop-down-menu

我有一个下拉列表供用户选择任务是否完成。我希望他们的更改能够更新数据库上的状态，而不必每次进行更改时都单击提交按钮。这可能吗？

基本上，默认情况下所有任务都标记为未完成，因此当用户单击下拉列表并将其更改为完成时，我希望在数据库上更改此内容，而无需单击提交按钮。

任何人都可以提供的任何帮助都会很棒，谢谢！

这是我的代码：

```
<%= form_for task do %>
    <td><%= select :task, :complete, [ ["Yes",2], ["Partly",1], ["No",0]], { :action => "update" } %></td>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:55:36.150

form_for 没有出现，因为`=`缺少 。

```
 <%= form_for task do %>
    <td><%= select :task, :complete, [ ["Yes",2], ["Partly",1], ["No",0]] %></td>
  <% end %> 
```

# ssh - 正确的自动命令以在腻子中连接到路由器

> ID：11307137
> 
> 赞同：0
> 
> 时间：2012-07-03T08:27:11.803
> 
> 标签：ssh, router, putty

我试图通过这行命令在 shell 中使用我的腻子连接到路由器

`putty.exe -ssh <IP> p 22 -l <USERNAME> -pw <PASSWORD> -m C:COMMAND.txt`

每次我运行时，它都会显示“行的自动命令无效”

可以将我带到路由器的 COMMAND.txt 的正确命令是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:05:36.813

要么你错过了之前的破折号`p`：

```
putty.exe -ssh <IP> -p 22 -l <USERNAME> -pw <PASSWORD> -m C:COMMAND.txt 
```

或者（假设在 StackOverflow 中键入命令是错误的）如果您发布`C:COMMAND.txt`. 也尝试使用该文件的完整路径，而不是指定驱动器而不是路径。

# android - 我怎样才能重新创建一个类似滚动的 Instagram，其中帖子信息保持在顶部，直到下一个帖子到达 Android 上的顶部？

> ID：11307138
> 
> 赞同：2
> 
> 时间：2012-07-03T08:27:12.520
> 
> 标签：android, eclipse, adt, ipod, instagram

我想在 Android 上重新创建 Instagram 滚动。我怎样才能做到这一点？如果您从未尝试过 Instagram，那么当您在 iPhone 上滚动浏览音乐时，基本上会想到“按字母顺序排列”。您正在浏览一堆以字母“A”开头的歌曲。字母 A 会一直停留在屏幕顶部，直到所有以 A 开头的歌曲都没有出现在显示屏上。字母“B”将其推开。如何在 Android 上创建这样的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T09:13:58.957

试试[Peter Kuterna 的 Pinned Header ListView](http://blog.peterkuterna.net/2011/05/pinned-header-listview-as-in-contacts.html)。

# ruby-on-rails - Rails：如果成功则将数据返回到文件

> ID：11307144
> 
> 赞同：0
> 
> 时间：2012-07-03T08:27:24.817
> 
> 标签：ruby-on-rails, ruby, validation

我是新来的铁路。我有一个电子邮件输入表单，我正在添加验证。这是我的控制器：

```
 @email=params[:email]
 @BetaSignup = BetaSignup.create!(:email => @email) 
```

我的模型：

```
class BetaSignup < ActiveRecord::Base
  validates :email, :presence => true, :email => true
end 
```

然后我想根据@BetaSignup 的结果告诉用户它是否是电子邮件。

在我看来，这样做是否正确？

```
if (<%- @BetaSignup %>) { 
```

然而这不起作用，并且视图文件甚至永远不会被访问，因为上面一行上方的数据（清除输入字段）没有发生（或者可能因为错误而没有发生）

想法？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:33:32.993

您正在使用`create!`，因此如果记录无效，代码将引发异常。

您可以继续使用它并抢救异常，或者您可以将其更改为不引发异常并随后检查对象：

```
@BetaSignup = BetaSignup.create(:email => @email)
if (@BetaSignup)
  //validations passed
else
  //validations failed
  @BetaSignup.errors // <-- validation errors are here
end 
```

# java - 通过云发送邮件时出错

> ID：11307147
> 
> 赞同：0
> 
> 时间：2012-07-03T08:27:29.573
> 
> 标签：java, google-app-engine

这是我发送邮件的代码

```
<html>
 <head>
<title>JSP JavaMail Example </title>
 </head>

<body>

<%@ page import="java.util.*" %>
<%@ page import="javax.mail.*" %>
<%@ page import="javax.mail.internet.*" %>
<%@ page import="javax.activation.*" %>
<%@ page import="javax.mail.Authenticator" %>
<%@ page import="javax.mail.PasswordAuthentication" %>
<%@ page import="java.sql.*" %>
<%@ page import="com.google.appengine.api.rdbms.*" %>
<%@ page import="com.sun.mail.smtp.*" %>
<%@ page import="com.google.appengine.api.mail.*" %>

<%

class GMailAuthenticator extends Authenticator {
 String user;
 String pw;
 public GMailAuthenticator (String username, String password)
 {
    super();
    this.user = username;
    this.pw = password;
 }
public PasswordAuthentication getPasswordAuthentication()
{
   return new PasswordAuthentication(user, pw);
}
}

String host = "smtp.gmail.com";
String user= "rxxxxxxxxxxx@gmail.com";
String pass= "xxxxxxxxx";
String to = request.getParameter("to");
String from = request.getParameter("from");
String subject = request.getParameter("subject");
String messageText = request.getParameter("body");
boolean sessionDebug = false;

String SSL_FACTORY = "javax.net.ssl.SSLSocketFactory";

Properties props = System.getProperties();
props.put("mail.host", host);
props.put("mail.smtp.", "true");
props.put("mail.smtp.port", "465");
props.put("mail.smtp.socketFactory.fallback", "true");
props.put("mail.smtp.socketFactory.class", SSL_FACTORY); 
props.put("mail.debug", "true"); 
props.put("mail.smtp.auth", "true");
props.put("mail.transport.protocol", "smtp");
props.put("mail.smtp.starttls.enable",true);
props.put("mail.smtp.starttls.required",true);

Session mailSession =Session.getInstance(props, new GMailAuthenticator(user, pass));

mailSession.setDebug(sessionDebug);

Message msg = new MimeMessage(mailSession);

msg.setFrom(new InternetAddress(from));
InternetAddress[] address = {new InternetAddress(to)};
msg.setRecipients(Message.RecipientType.TO, address);
msg.setSubject(subject);
msg.setSentDate(new java.util.Date());
msg.setText(messageText);

Transport transport = mailSession.getTransport("smtp");
transport.connect(host,user,pass);

Transport.send(msg);

out.println("Mail was sent to " + to);
out.println(" from " + from);
out.println(" using host " + host + ".");
response.sendRedirect("verify.jsp");

String u= String.valueOf(session.getAttribute("un"));

Connection c = null;
PreparedStatement ps=null;
ResultSet rs=null;
Class.forName("com.mysql.jdbc.Driver");
DriverManager.registerDriver(new AppEngineDriver());
c =     DriverManager.getConnection("jdbc:google:rdbms://ctsteaching:ctsdatabase/ctsdb");

String query="update Registration set Status='Active' where Username=? ";
ps=c.prepareStatement(query);
ps.setString(1,u.trim());
ps.executeUpdate();

   %>
   </table>
  </body>
 </html> 
```

在云中部署后，发送邮件时出现以下错误。

```
java.lang.NoClassDefFoundError: javax.net.SocketFactory is a restricted class. Please see the Google App Engine developer's guide for more details.
    at com.google.appengine.runtime.Request.process-02f037dc0f1c0aab(Request.java)
    at javax.net.SocketFactory.<clinit>(SocketFactory.java)
    at java.lang.reflect.Method.invoke(Method.java:43)
    at com.sun.mail.util.SocketFetcher.getSocketFactory(SocketFetcher.java:382)
    at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:193)
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1938)
    at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:642)
    at javax.mail.Service.connect(Service.java:248)
    at javax.mail.Service.connect(Service.java:91)
    at org.apache.jsp.sendMail_jsp._jspService(sendMail_jsp.java:118)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:695)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453)
    at java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T08:34:42.027

javax.net.SocketFactory 不在 AE 的白名单上，因此无法供您使用。 [https://developers.google.com/appengine/docs/java/jrewhitelist](https://developers.google.com/appengine/docs/java/jrewhitelist)

要发送邮件，请参阅 [https://developers.google.com/appengine/docs/java/mail/usingjavamail](https://developers.google.com/appengine/docs/java/mail/usingjavamail)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:34:02.427

您不能使用 Java 邮件发送电子邮件，因为它会打开一个到 SMTP 服务器的套接字，该套接字在 AppEngine 上受到限制。
您需要使用[AppEngine 邮件 API](https://developers.google.com/appengine/docs/java/mail/usingjavamail)或一些基于 http 的第 3 方电子邮件 API（如 Amazon 或 Mailchimp）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-27T15:18:10.093

您需要使用 APP Engine API..

您可以在以下站点中找到示例..

[http://programcreek.com/java-api-examples/index.php?api=com.google.appengine.api.mail.MailServiceFactory](http://programcreek.com/java-api-examples/index.php?api=com.google.appengine.api.mail.MailServiceFactory)

# c# - 使用 HTML Agility Pack 删除重复元素链

> ID：11307158
> 
> 赞同：3
> 
> 时间：2012-07-03T08:28:30.003
> 
> 标签：c#, html-agility-pack

我正在尝试删除我的 html 文档中任何重复或多次出现的**<br>**标签。到目前为止，这是我想出的（非常愚蠢的代码）：

```
HtmlNodeCollection elements = nodeCollection.ElementAt(0)
                             .SelectNodes("//br");

if (elements != null)
{
    foreach (HtmlNode element in elements)
    {
        if (element.Name == "br")
        {
             bool iterate = true;
             while(iterate == true)
             {
                 iterate = removeChainElements(element);
             }
         }
     }
}

private bool removeChainElements(HtmlNode element)
{
    if (element.NextSibling != null && element.NextSibling.Name == "br")
    {
        element.NextSibling.Remove();
    }
    if (element.NextSibling != null && element.NextSibling.Name == "br")
         return true;
    else
         return false;
    }
} 
```

该代码确实找到了**br**标签，但它根本没有删除任何元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T17:17:48.763

我认为您的解决方案过于复杂，尽管据我所知，这个想法似乎是正确的。

假设，首先找到所有节点会更容易`<br />`，然后删除那些之前的兄弟节点是节点的`<br />`节点。

让我们从下一个示例开始：

```
var html = @"<div>the first line<br /><br />the next one<br /></div>";
var doc = new HtmlDocument();
doc.LoadHtml(html); 
```

现在找到`<br />`节点并删除重复元素链：

```
var nodes = doc.DocumentNode.SelectNodes("//br").ToArray();
foreach (var node in nodes)
    if (node.PreviousSibling != null && node.PreviousSibling.Name == "br")
        node.Remove(); 
```

并得到它的结果：

```
var output = doc.DocumentNode.OuterHtml; 
```

它是：

```
<div>the first line<br>the next one<br></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:31:52.583

也许你可以这样做`htmlsource = htmlSource.Replace("<br /><br />", <br />);`

或者可能是这样的

```
 string html = "<br><br><br><br><br>";

    html = html.Replace("<br>", string.Empty);

    html = string.Format("{0}<br />", html);

    html = html.Replace(" ", string.Empty);
    html = html.Replace("\t", string.Empty); 
```

# redis - 奇怪的 Redis SET 命令行为

> ID：11307159
> 
> 赞同：1
> 
> 时间：2012-07-03T08:28:30.920
> 
> 标签：redis

我正在编写一个简单的程序来测试 Redis：

```
#include <hiredis.h>
#include <cstdio>

int main()
{
    redisContext * c = redisConnect("127.0.0.1", 6379);

    redisReply * reply;

    reply = redisCommand(c, "FLUSHALL");
    freeReplyObject(reply);

    for(long int i = 0; i <= 1000000; i++)
    {   
        char query[64];
        sprintf(query, "SET %ld \"string%ld\"", i, i); 

        reply = redisCommand(c, query);
        freeReplyObject(reply);

        if( !(i % 100000) )
        {   
            reply = redisCommand(c, "DBSIZE");
            int res = reply->integer;
            freeReplyObject(reply);

            printf("%s\n", query);
            printf("dbsize: %d\n", res);
        }   
    }   

    redisFree(c);
} 
```

它应该将 1000000 个键放入 db，但输出如下：

```
SET 0 "string0"
dbsize: 1
SET 100000 "string100000"
dbsize: 100001
SET 200000 "string200000"
dbsize: 200001
SET 300000 "string300000"
dbsize: 300001
SET 400000 "string400000"
dbsize: 400001
SET 500000 "string500000"
dbsize: 500001
SET 600000 "string600000"
dbsize: 600001
SET 700000 "string700000"
dbsize: 700001
SET 800000 "string800000"
dbsize: 779479
SET 900000 "string900000"
dbsize: 779479
SET 1000000 "string1000000"
dbsize: 779479 
```

所以在一瞬间（通常大约在 600000 个键之后）Redis 停止添加记录。这种行为的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:49:07.770

您不检查代码中的错误，因此很难诊断问题。您应该在释放回复对象之前分析输出。

最可能的原因是您的 Redis 实例已配置最大内存限制，而您已达到此限制。您可能需要检查配置文件，或使用以下命令：

```
config get maxmemory 
```

零值意味着没有限制。否则，限制以字节数表示。

# c# - 如何调用重载的 c# 函数，唯一的区别是在 c++/cli 中是否通过 ref 传递参数

> ID：11307162
> 
> 赞同：10
> 
> 时间：2012-07-03T08:28:50.590
> 
> 标签：c#, c++-cli, overloading, tracking-reference

我有一个带有重载方法的 C# 类库，一个方法有一个 ref 参数，另一个有一个 value 参数。我可以在 C# 中调用这些方法，但在 C++/CLI 中无法正确调用。似乎编译器无法区分这两种方法。

这是我的 C# 代码

```
namespace test {
    public class test {
        public static void foo(int i)
        {
            i++;
        }
        public static void foo(ref int i)
        {
            i++;
        }
    }
} 
```

和我的 C++/CLI 代码

```
int main(array<System::String ^> ^args)
{
    int i=0;
    test::test::foo(i);     //error C2668: ambiguous call to overloaded function
    test::test::foo(%i);    //error C3071: operator '%' can only be applied to an instance of a ref class or a value-type
    int %r=i;
    test::test::foo(r);     //error C2668: ambiguous call to overloaded function
    Console::WriteLine(i);
    return 0;
} 
```

我知道在 C++ 中我不能声明重载函数，其中函数签名的唯一区别是一个接受一个对象，另一个接受一个对象的引用，但在 C# 中我可以。

这是 C# 支持但 C++/CLI 不支持的功能吗？有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:57:49.980

作为一种解决方法，您可以构建一个在 C++/CLI 中使用的 C# 帮助程序类

```
namespace test
{
    public class testHelper
    {
        public static void fooByVal(int i)
        {
            test.foo(i);
        }

        public static void fooByRef(ref int i)
        {
            test.foo(ref i);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:58:51.633

[我在Wikipedia](http://en.wikipedia.org/wiki/C++/CLI#Tracking_references)上发现了一些有用的东西：

> C++/CLI 使用“ **^%** ”语法来指示对句柄的跟踪引用。它在概念上类似于在标准 C++中使用“ ***& ”（对指针的引用）。**

# c# - EF ICollection Vs List Vs IEnumerable Vs IQueryable

> ID：11307171
> 
> 赞同：53
> 
> 时间：2012-07-03T08:29:23.007
> 
> 标签：c#, entity-framework, entity-framework-4, entity-framework-4.1

所以，我的 EF 模型有关系，根据我在示例中看到的，这些关系应该使用 ICollection 的虚拟属性来完成。

例子：

```
 public class Task
    {
        public int Id { get; set; }
        public string Description { get; set; }
        public virtual ICollection<SubTask>  { get; set; }
    } 
```

我在某处读到我应该使用 IEnumerable 来防止延迟执行，对吗？这意味着如果我的 DAL 方法返回 IEnumerable，仍然是 IQueryable，则 SQL 将在那时执行，而不是在我在网页中调用 .TOList 时执行。

那么，最佳实践是什么？我应该返回什么？IEnumerable、List?、IList、ICollection?

谢谢

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-07-03T08:41:50.507

[`IQueryable`](https://msdn.microsoft.com/en-us/library/vstudio/bb351562.aspx)：

*   在您真正迭代项目之前不会执行查询，可能是通过执行 a`.ToList()`或 a `foreach`。这意味着您仍然可以添加过滤器，例如`Where()`.
*   扩展 IEnumerable

[`IEnumerable`](https://msdn.microsoft.com/en-us/library/9eekhta0.aspx)：

*   仅转发的项目列表。如果不通过第 0-3 项，您将无法获得“第 4 项”。
*   只读列表，不能添加或删除。
*   仍然可能使用延迟执行（IQueryable 仍然是 IEnumerable）。

[`IList`](https://msdn.microsoft.com/en-us/library/5y536ey6.aspx)：

*   随机访问完整列表
*   可能完全在内存中（没有延迟执行，但谁知道实现这个的确切类是什么？）
*   支持添加和删除
*   扩展 IEnumerable 和 ICollection

[`ICollection`](https://msdn.microsoft.com/en-us/library/92t2ye13.aspx)：

*   介于 IEnumerable 和 IList 之间。
*   扩展 IEnumerable

什么是“最好的”取决于您的要求。通常，如果您只想显示项目，则 IEnumerable 是“足够好”的。至少总是使用通用变体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-03T14:48:16.363

EF 的另一个区别是 IEnumerable 不会执行对 DB 的查询，直到您真正枚举列表。而 IList 将执行查询并获取内存中的项目。我对缓存有一个奇怪的行为。Chaching IEnumarable 不存储项目，而是存储未获取的枚举，每次我出于某种目的调用缓存并获取枚举时，它都会转到数据库并执行查询，因此缓存是无用的。但是枚举上的 ToList() 获取了项目并将这些项目存储在缓存中，因此为此只需要 1 次访问数据库。在这篇文章中找到更多信息：[http ://www.dailycode.info/BlogV2/post/entityframework-adding-ienumerable-to-cache](http://www.dailycode.info/BlogV2/post/entityframework-adding-ienumerable-to-cache)

# perl - Perl变量之间的混淆

> ID：11307172
> 
> 赞同：2
> 
> 时间：2012-07-03T08:29:27.173
> 
> 标签：perl

我有以下代码

```
my $content = $response->content;
$content =~ /username=([\s\S]+?)&/;
my $username = $1;
print $username; #Prints the text 
```

假设我想再做一次，但文本不同

例如

```
$content =~ /rank=([\s\S]+?)&/;
my $rank = $1;
print $rank; #Prints the username text 
```

我必须将 1 美元换成别的东西吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T08:36:19.100

```
my $content = $response->content;
$content =~ /username=([\s\S]+?)&/;
my $username = $1;
print $username; #Prints the text

$content =~ /rank=([\s\S]+?)&/;

#if the above regex does not match, $1 remains set to the previous $1

my $rank = $1;
print $rank; #Prints the username text 
```

它会更安全，例如：

```
if ($content =~ /rank=([\s\S]+?)&/){
    my $rank = $1;
} 
```

或者，更优雅地：

```
my ($rank) = $content =~ /rank=([\s\S]+?)&/;
print "\n rank:$rank" if defined $rank; #Prints the username text 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T08:32:01.257

不，你不必改变它。$1 在匹配后不会保留，但是如果匹配尝试失败，它可能会保留其值。排名可能与您的模式不匹配。试试这个以确保：

```
my ($rank) = ($content =~ /rank=([\s\S]+?)&/);
die("rankkk") if not defined $rank; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T08:59:14.353

我相信您的问题`$1`已经得到解答。这是您的正则表达式的更简单版本：

```
/rank=(.+?)&/ 
```

通过编写`[\s\S]`，您正在组合两个互为补集的字符类。因此，`[\s\S]`可以替换为`.`匹配除换行符之外的任何字符。

如果文本中的名称和排名信息跨越多行，您可以使用 s 修饰符，它也可以`.`匹配 \n。

```
/rank=(.+?)&/s 
```

# python - Django apache+mod_wsgi openPanel virtualenv 设置

> ID：11307173
> 
> 赞同：0
> 
> 时间：2012-07-03T08:29:30.893
> 
> 标签：python, django, apache, mod-wsgi

我正在使用 mod_wsgi 在 apache 上部署两个 django 站点。我已经安装了两个 virtualenvs：

```
/home/user/virtualenv1
/home/user/virtualenv2 
```

现在我的问题是配置 wsgi 应用程序以使用这些，例如我有：

```
/var/www/djangosite1
/var/www/djangosite1/project1/wsgi.py

/var/www/djangosite2
/var/www/djangosite2/project2/wsgi.py 
```

我的 apache 是通过 openPanel 配置的，所以我的 VirtualHosts 包括如下：

**/etc/apache2/openpanel.d/project1.com.inc/django.conf**

```
<VirtualHost *:80>
ServerName project1

WSGIDaemonProcess project1 user=user group=www-data processes=2 threads=25 python-path=/home/user/virtualenv1/lib/python2.6/site-packages
WSGIProcessGroup project1
</VirtualHost> 
```

**/etc/apache2/openpanel.d/project2.com.inc/django.conf**

```
<VirtualHost *:80>
ServerName project2

WSGIDaemonProcess project2 user=user group=www-data processes=2 threads=25 python-path=/home/user/virtualenv2/lib/python2.6/site-packages
WSGIProcessGroup project2
</VirtualHost> 
```

现在我重新启动apache：

```
service apache2 reload 
```

这没有给我任何错误，接下来我跟踪错误日志并访问我的 project.com

```
tail -f /var/log/apache2/error.log 
```

这给了我这个错误

```
ImportError: No module named south 
```

当我在我的系统上（不是在 virtualenv 中）安装 south 时，一切正常，但当然想法不是污染系统，而是为每个站点使用单独的虚拟 env。

我想我错过了明显的..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:41:11.010

尝试在 wsgi 文件中启用您的 virtualenv，而不是在虚拟主机中添加站点包。

将以下内容添加到 wsgi 文件的顶部。

```
# Start the correct virtualenv
activate_this = '/home/user/virtualenv1/bin/activate_this.py'
execfile(activate_this, dict(__file__=activate_this)) 
```

（我不确定这是否是官方的做事方式，但它肯定是我工作过很多次的事情。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:10:58.237

也许您需要在 virtualenv 上检查您当前的南路径并之前添加到您的 sys.path 中。

# unity3d - C# 项目的 Unity3d 参考问题

> ID：11307178
> 
> 赞同：7
> 
> 时间：2012-07-03T08:29:49.220
> 
> 标签：unity3d

在我的 Unity 项目中，我有 3 个 Visual Studio 项目：Assembly-CSharp-vs Assembly-CSharp-firstpass-vs Assembly-CSharp-Editor-vs

我所有的脚本似乎都以 Assembly-CSharp-firstpass-vs 结尾，但我正在使用的导入资产（2dtoolkit）的代码在 Assembly-CSharp-vs ... 这意味着我无法从Assembly-CSharp-firstpass-vs，因为没有对 Assembly-CSharp-vs 的引用（不应该以这种方式引用）。

那么，处理这个问题的“正确”方法是什么？我想要么我必须将我的脚本文件移动到 Assembly-CSharp-vs，要么我必须将我的资产源移动到 Assembly-CSharp-firstpass-vs..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T00:01:04.823

如果您的脚本最终出现在 Assembly-CSharp-firstpass-vs 项目中，这意味着在其文件夹层次结构的上方某个位置，您有一个名为“Plugins”、“Standard Assets”或“Pro Standard Assets”的文件夹。这会导致您的脚本在 4 个可能的编译步骤中的第一个进行编译。因此，Unity 会将您的代码文件放在 Assembly-CSharp-firstpass-vs 项目中。

为了能够从您的代码中访问 2DToolkit，我建议您移动所有脚本文件，这样它们就不会放在任何这些文件夹下。这将导致它们被放置在 Assembly-CSharp-vs 项目中。

如果您使用的是 C#，它现在应该可以工作了。但是，如果您已经在 UnityScript(JavaScript) 或 Boo 中编写了自己的代码，则必须将 2DToolkit 放在名为 Plugins 的文件夹中（或“标准资产”或“Pro Standard Assets”，如果您愿意的话），以便它在您的代码之前编译.

查看 Unity 手册中的[脚本编译](http://docs.unity3d.com/Documentation/ScriptReference/index.Script_compilation_28Advanced29.html)页面，了解有关如何控制脚本编译顺序的更深入信息。

# installation - 如何仅在使用 inno setup 完全安装时创建卸载密钥？

> ID：11307179
> 
> 赞同：1
> 
> 时间：2012-07-03T08:29:50.857
> 
> 标签：installation, inno-setup, uninstallation

我正在为我的应用程序编写一个 inno 安装程序。如果我的应用程序已经安装，我希望这个安装程序既可以作为完整的安装程序，也可以作为更新。

如果我的应用程序已经安装，我能够使用 inno 设置创建一个“更新”安装，它将替换旧文件。如果没有，它只会进行完整安装。

问题在于 Windows 中的卸载密钥。Inno setup 为每次安装创建一个卸载密钥。因此，如果我进行更新，我的应用程序将有两个卸载密钥。如果我禁用卸载密钥的创建，那么完整安装将不会创建它。

可以在运行时关闭 CreateUninstallRegKey 和 UpdateUninstallLogAppName 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T08:17:47.750

如果您的完整安装和更新安装之间的大小差异很小（通常是这种情况），那么您应该使两者实际上是完全相同的安装程序。

执行此操作的最简单（也是最可靠）的方法是确保您设置了一个`AppId`（如果您在未能执行此操作的字段中已经有一些输出，则将 设置为与*现有*`AppId`的相同的值）。 *`AppName`*

 *接下来，检查您的`[Files]`条目；确保`Flags`在所有文件上都指定了适当的。（作为一般规则，安装到的文件`{app}`通常应该有“ `ignoreversion`”；用户可编辑的文件应该有“ `onlyifdoesntexist`”；共享库应该有“ `replacesameversion sharedfile`”，但在特定情况下您可能需要不同的东西。）

然后只需设置`DisableDirPage=auto`和`DisableProgramGroupPage=auto`（并将其他所有内容保留为默认值），Inno 将使用原始安装期间输入的值自动跳过目录和开始菜单选择页面进行升级。没有混乱，没有大惊小怪。*

# c++ - 以错误的方式调用子类中的函数的最佳方法是什么？

> ID：11307180
> 
> 赞同：1
> 
> 时间：2012-07-03T08:30:09.310
> 
> 标签：c++, oop, dynamic-cast

**警告：**请注意，这是一个我可能永远不会以这种方式解决的愚蠢问题。因此，矛盾的标题。但是，由于我实际上在代码中看到了类似的东西，所以我在一个非常大的系统上经历过，我变得很感兴趣。:)

假设我们有一个简化的类：

```
class Foo
{
  void a();
  virtual void b();
} 
```

然后是另一堂课

```
class Bar : public Foo
{
  void a();
} 
```

如果程序的一般部分将所有这些类作为 type 的基类处理`Foo`，我如何以最佳方式在其中调用“正确”版本的`a`函数`b`？因为对象有可能是 type `Bar`。并且说您，由于遗留原因，无法更改现有代码并使基类成为*虚拟*函数等。

我所做的是`a`在基类中创建虚拟并`b`在内部实现，`Bar`因为我有这个选项。但是，为了争论，让我们说这是不可能的或不允许的。使用这样的方法实施解决方法会有多“错误”。

```
void b() {
  ...

  Bar* dabar;
  if((dabar = dynamic_cast<Bar*>(this)) != NULL) {
    dabar->a();
  }
  else {
    a();
  }
} 
```

正如我所说，请注意这是在处理基类并想要调用子类的函数时。不是反过来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:03:40.477

如果有可能在基类中使您的函数虚拟化，那么这是可行的方法，包括调用不同的公司来更改那里的代码的开销，因为这显然是一个设计缺陷。

如果您没有这种可能性，无论出于何种原因，您的代码都可以工作，除非您想从 Bar 派生。当您拥有一个 Bar* 并在其上调用“a”时，您认为会发生什么。

像：

```
Chair : public Bar {...}

Bar *bar = new Chair;
bar->a();
// what the heck? 
```

而且，当然，dynamic_cast 会严重影响性能。

**写干净的代码，写你想表达的，不要使用技巧！**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T08:48:12.057

> 使用这样的方法实施解决方法会有多“错误”。
> 
> ```
> void b() {
>   ...
> 
>   Bar* dabar;
>   if((dabar = dynamic_cast<Bar*>(this)) != NULL) {
>     dabar->a();
>   }
>   else {
>     a();
>   }
> } 
> ```

那将是矫枉过正。只需在虚函数中调用 a() 就可以了。

```
#include <iostream>

class Base
{
public:
    virtual int tryit()
    {
        return foo();
    }
private:
    int foo(){ return 1; }
};

class Derived: public Base
{
public:
    virtual int tryit()
    {
        return foo();
    }

private:
    int foo(){ return 2; }
};

int main()
{
    Base *A =  new Derived();
    std::cout << std::endl << A->tryit();
} 
```

输出：

```
 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T08:40:26.060

> 使用这样的方法实施解决方法会有多“错误”。

理论上你没有做错任何事。这是一个定义明确的行为。

只是，这**不是一个好习惯**。它使代码混乱和混乱。此外，如果将来派生到其他一些子类
，它将无法管理。`bar`

# android - android webview显示windows-1250字符集html的问题

> ID：11307187
> 
> 赞同：3
> 
> 时间：2012-07-03T08:30:35.857
> 
> 标签：android, character-encoding, webview

我想将 Windows-1250 编码的 html 页面加载到 webview 中。其实我不喜欢，但我不得不。可以在[此处](http://sandbox.wamped.org/webview.html)找到此编码的示例。

我可以在任何 pc 浏览器中很好地看到上面的页面 - android webview 也可以正确显示该页面。

不过，我需要做的是获取上述页面的 base64 编码版本，并将其从 String 资源加载到 webview 中。因此，作为测试，我使用[这个在线工具](http://www.opinionatedgeek.com/dotnet/tools/base64encode/)来获取页面的 base64 编码版本，作为字符串添加到我的应用程序中，并尝试通过

```
myWebView.loadData(htmlResource, "text/html; charset=Windows-1250", "base64"); 
```

，其中 htmlResource 包含 base64 编码的 html 源作为字符串。你可以看到下面的结果，字符编码明显搞砸了。

![Webview 错误编码 Windows-1250](../Images/1d320eff844bb2b64ac92b95d840a268.png)

从 base64 编码的字符串显示此页面的正确方法是什么？

**编辑**：我也尝试[了这种](https://stackoverflow.com/questions/4917860/android-character-encoding-raw-resource-files?rq=1)方法，结果相同：

```
String decodedResource = new String(Base64.decode(htmlResource));
mWebView.loadDataWithBaseURL( null, decodedResource, "text/html", 
    "Windows-1250", null ); 
```

**编辑 2**：我还尝试了 snoblucha 的建议进行以下修改，但仍然没有运气：

```
try {
    convertedResource =  new String(Base64.decode(htmlResource), "windows-1250");
} catch (UnsupportedEncodingException e) {
    Log.e("UnsupportedEncodingException", e.getMessage());
}
mWebView.loadData(convertedResource, "text/html", "windows-1250"); 
```

编码仍然混乱，虽然略有不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T06:45:45.597

尝试使用此代码：

```
String html = "Some string in windows-1250"; // Actually string in unicode
String encoded = Base64.encodeToString(html.getBytes("cp1250"), Base64.DEFAULT); // Convert to array of bytes in cp1250 and later to base64 string
webView.loadData(encoded, "text/html; charset=windows-1250", "base64"); // Load to WebView 
```

另请参阅此[问题](https://stackoverflow.com/questions/13234209/how-to-load-raw-resource-with-charset-windows-1251-into-webview)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:09:44.987

如何对编码字符串执行以下转换：

```
String decoded = new String(encoded.getBytes(), "Windows-1250"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T09:03:05.217

我会选择第二种方法，首先解码 Base64，然后将其传递给 WebView。但是您没有指定 Base64 解码数组是什么编码。在 String 构造函数中指出它，它应该可以工作。

```
myWebView.loadData(new String(Base64.decode(htmlResource, Base64.DEFAULT),"windows-1250"), "text/html", "windows-1250"); 
```

# jquery - 用于在文本字段上自动完成选择的 jQuery 侦听器

> ID：11307188
> 
> 赞同：4
> 
> 时间：2012-07-03T08:30:39.447
> 
> 标签：jquery, forms, input, autocomplete, listener

我有一些 jQuery 侦听器设置来侦听`type="text"`字段上的表单输入。但是，当用户从自动完成下拉框中选择一个选项时（即他们之前输入的值已被记住以备将来使用），下面的侦听器不会收集该值。

这是我当前的代码：

```
$('#text-input').on("keyup change paste", function() {
    var textInput = $(this).val();
    // do something with textInput
}); 
```

以上适用于粘贴和输入，但不适用于从下拉建议列表中选择选项时。

谁能告诉我需要添加什么听众？

干杯。

* * *

**我的解决方案**

尝试使用`autocomplete`监听器后，我发现这在我的场景中似乎不起作用，所以我添加了以下代码，灵感来自接受的答案。

```
var timer = 0;
$('#text-input').on("keyup change paste", function() {
    if (timer != null) {
        clearTimeout(timer);
        timer = setTimeout(function() {
            var textInput = $(this).val();
            // do something with textInput
        }, 1000);
    }
}); 
```

这样做的额外好处是我的文本输入采用了一个 URL，然后使用它来将其他内容加载到页面中。通过设置超时，这意味着脚本不会在用户仍在键入 URL 时不断尝试加载 URL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T08:33:03.300

~~您需要在建议列表上添加一个侦听器（在整个列表中，[具有委托](http://api.jquery.com/delegate/)或依次在每个值上）。每当建议发生点击事件时，您都会更新搜索框中的值。~~

* * *

我刚刚意识到您的意思是浏览器的默认建议（即 `autocomplete`属性）。这个答案可能会有所帮助：[Javascript检测浏览器自动完成值的选择](https://stackoverflow.com/questions/5430342/javascript-detect-a-selection-of-browser-autocomplete-value)。当它有焦点时，它会轮询输入的值，这样即使自动完成没有触发任何事件，也会检测到更改。

# vb.net - 如何使用 TabID？

> ID：11307193
> 
> 赞同：0
> 
> 时间：2012-07-03T08:31:11.093
> 
> 标签：vb.net, dotnetnuke, response.redirect, navigateurl

我想使用标签 ID 而不是静态 URL 访问链接，因为我的 URl 是

```
Response.Redirect("~/Activities/Calendar.aspx?date=" + DateTime.Now.ToString("MM/dd/yyyy")) 
```

我使用以下代码

```
Dim objModuleController As DotNetNuke.Entities.Modules.ModuleController
Dim objModuleInfo As DotNetNuke.Entities.Modules.ModuleInfo = objModuleController.GetModule(CInt(CType(Settings("DetailsCalendar"), Integer)))
Dim TabID As Integer = objModuleInfo.TabID

If CBool(CType(Settings("DetailsCalendar"), String)) Then
    Response.Redirect(NavigateURL(TabID, "date", DateTime.Now.ToString("MM/dd/yyyy")))
End If 
```

但它将我重定向到错误的 URL 我做错了什么或如何编写它，我知道如何将 TabID 与 URL 一起使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T16:51:26.780

If your control inherits "PortalModuleBase" it already has the TabId on it.

But the root cause of your issues with Navigate Url is that the structure that it has is similar to the following for the overload you are trying

```
NavigateUrl(int TabId, string contolKey, string[] params) 
```

You need to pass the values so you are only appending the params

From your example you should be fine with

```
NavigateUrl(TabId, string.Empty, "date", DateTime.Now.ToString("MM/dd/yyyy")) 
```

The key here is that you are not passing a control key.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T09:46:34.197

这是使它起作用的正确代码:)

```
Dim objModuleController As New DotNetNuke.Entities.Modules.ModuleController
Dim objModuleInfo As DotNetNuke.Entities.Modules.ModuleInfo = objModuleController.GetModule(CInt(CType(Settings("DetailsCalendar"), Integer)))

If CBool(CType(Settings("DetailsCalendar"), String)) Then
IF (objModuleInfo.TabID <> 0 ) Then
Response.Redirect(NavigateURL(objModuleInfo.TabID, String.Empty ,"date="+ DateTime.Now.ToString("MM/dd/yyyy")))
End If
End If 
```

# java - java https连接和安全弹出窗口

> ID：11307195
> 
> 赞同：0
> 
> 时间：2012-07-03T08:31:21.527
> 
> 标签：java, https, ssl-certificate, httpurlconnection, securitymanager

我的应用程序是一个签名的小程序，它是用 java 1.6 编译的

在我的应用程序中，我提出了一个 https 获取请求。即使我忽略了证书验证，JRE 仍然向我显示一个安全弹出窗口。
当我通过 Internet Explorer 尝试相同的请求时，它没有显示任何安全警告。

**1）我能以编程方式做些什么来使这个安全弹出窗口消失吗？**
**2）即使我接受所有证书，为什么JRE会弹出警告？。**

这是我忽略证书有效性的代码：

```
 TrustManager[] trustAllCerts = new TrustManager[] { new X509TrustManager() {
        public java.security.cert.X509Certificate[] getAcceptedIssuers() {
            return new java.security.cert.X509Certificate[] {};
        }

        public void checkClientTrusted(X509Certificate[] chain, String authType)
                throws CertificateException {
        }

        public void checkServerTrusted(X509Certificate[] chain, String authType)
                throws CertificateException {
        }
    } };
    // Install the all-trusting trust manager
    try {
        SSLContext sc = null;
        try {
             sc = SSLContext.getInstance("SSL");
        } catch (NoSuchAlgorithmException ex) {
            MainScreen.toConsole(ex);
             sc = SSLContext.getInstance("TLS");
        }
        sc.init(null, trustAllCerts, new java.security.SecureRandom());
        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
        HttpsURLConnection.setDefaultHostnameVerifier(new HostnameVerifier() {
            @Override
            public boolean verify(String hostname, SSLSession session) {
                return true;
            }
        });
    } catch (Exception e) {
    } 
```

这是安全警告的屏幕截图： ![在此处输入图像描述](../Images/eadd1a1949955845557413c6a04f92ac.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:43:24.280

只想到我能想到的：确保rapidssl 的CA 证书在你的java 证书存储中。查看[本指南](http://www.dekho.com.au/help/32/default.htm?turl=Documents/addingacertificateintothejavacertificatestore.htm)。我知道它在您的浏览器中，但 java 可能不知道它。

# java - “java.security.AccessControlException：访问被拒绝”执行签名的 Java Applet

> ID：11307206
> 
> 赞同：4
> 
> 时间：2012-07-03T08:31:59.293
> 
> 标签：java, security, browser, applet, accesscontrolexception

我有一个小 Java Applet，但我遇到了一个烦人的问题。我已经使用 jarsigner 工具（按照这些[说明）用我自己的密钥库](http://java.sun.com/developer/Books/javaprogramming/JAR/sign/signing.html)**签署了**我的 JAR 。

Java Applet 下载一个**签名的 JAR 并尝试使用**[URLClassLoader](http://docs.oracle.com/javase/7/docs/api/java/net/URLClassLoader.html)的扩展类来启动它。这个 JAR 尝试执行这行代码：

```
ClassLoader.getSystemClassLoader().getResource("aResource"); 
```

它失败并通过以下方式完成大型堆栈跟踪：

```
Caused by: java.security.AccessControlException: access denied ("java.lang.RuntimePermission" "getClassLoader")
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:366)
    at java.security.AccessController.checkPermission(AccessController.java:555)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
    at java.lang.ClassLoader.getSystemClassLoader(ClassLoader.java:1476)
    at test.SecondJAR.main(SecondJAR.java:8) 
```

（test.SecondJAR第8行对应`getResource(...)`方法

启动 Java Applet 时，如果用户信任发布者，则会提示用户接受证书：

![给用户的消息](../Images/1c2bb37a6e0ffc6c3ee0b647b5f5cec8.png)

即使我接受它，也发生了异常。即使我安装了证书，提示信息被自动接受了，还是出现了异常。

我也试过这个：

```
AccessController.doPrivileged(new PrivilegedAction<Object>() {
    public Object run() {
        ClassLoader.getSystemClassLoader().getResource("aResource");
        return null;
    }
}); 
```

它失败了，同样的例外。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T14:42:42.773

终于我找到了答案！

我遵循了[Andrew Thomson](https://stackoverflow.com/users/418556/andrew-thompson)的指导方针，并创建了一个自定义[SecurityManager](http://docs.oracle.com/javase/7/docs/api/java/lang/SecurityManager.html)。我的小安全经理看起来像这样：

```
private class MySecurityManager extends SecurityManager {
    @Override
    public void checkPermission(Permission perm) {
        return;
    }
} 
```

它是一个接受所有权限的被忽视的安全管理器。应该改进它只允许在运行时获取系统类加载器。

`start()`为了使用我丑陋的 SecurityManager，我在 Java Applet方法的开头添加了这些行：

```
SecurityManager sm = new MySecurityManager();
System.setSecurityManager(sm); 
```

使用此解决方法，所有过程都按预期工作！

也许还有其他（更好的）解决方案，但它对我有用。

谢谢你们！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T09:13:27.903

问题是 JRE 只认为**原始代码库**中的代码是可信的。两种可能的解决方案是：

1.  设置一个自定义安全管理器，允许新代码拥有所需的权限。
2.  将新代码包装在一个`PrivilegedAction`& 从方法中调用它`AccessController.doPrivileged(..)`（我只是想到一种可能性，不确定我是否理解它的范围，完全未经测试）。

# iphone - 如何在 imageview 上绘制矩形而不是 ipad 中的视图

> ID：11307210
> 
> 赞同：0
> 
> 时间：2012-07-03T08:32:03.820
> 
> 标签：iphone, cgcontext

嗨，在我的项目中，我有一个图像视图，我想用我们的手指时刻在图像视图上绘制一个矩形或圆形。现在我已经通过使用 CGContext 类方法做到了，但是该矩形和圆形是在一个 UIView 对象上在绘图的帮助下创建的正法。该创建的视图正在像圆形或矩形一样添加到 imageview 上，但我希望直接在 imageview 上绘制它是可能的，请在这个问题上帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:12:42.020

UIImageView 是 UIView 的子类，但不能覆盖`drawRect:`UIImageView。

尝试添加一个子层并在该子层中绘制使用委托和`drawLayer:inContext:`方法

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/ProvidingCALayerContent.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/ProvidingCALayerContent.html)

# ruby - 在 Ruby 中将多条相同的行转换为一条

> ID：11307211
> 
> 赞同：0
> 
> 时间：2012-07-03T08:32:08.627
> 
> 标签：ruby, string

我在 Ruby 1.9.3 中有一个包含这样的字符串的变量

```
#HELLO
#HELLO
#HELLO
#HELLO
#WORLD
#WORLD
#WORLD
#WORLD
#FOO
#BAR
#WORLD 
```

我希望它被转换成类似的东西：

```
4 times #HELLO end
4 times #WORLD end
#FOO
#BAR
#WORLD 
```

也就是说，我希望将连续的重复字符串组合为一个，并将数量放在一边。

有没有使用 Ruby 的函数式编程能力或其他技术的巧妙方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:48:52.510

如果你在一个类似 unix 的盒子上，你可能可以通过`uniq -c`. 之后您可能需要稍微清理一下输出`sed`，但这应该相对简单。

但是我确信也有一个整洁的纯红宝石解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T08:52:38.440

试试这个：

```
str = "#HELLO
#HELLO
#HELLO
#HELLO
#WORLD
#WORLD
#WORLD
#WORLD
#FOO
#BAR
#WORLD"

result = ""
identical_lines = 1
str << "\n " # we need a last line to compare

str.lines.each_cons(2) do |line1,line2|
  if line1 == line2
    identical_lines += 1
  elsif identical_lines > 1
    result << "#{identical_lines} times #{line1.chomp} end\n"
    identical_lines = 1
  else
    result << line1
  end
end

puts result 
```

该程序输出

```
4 times #HELLO end
4 times #WORLD end
#FOO
#BAR
#WORLD 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T09:02:15.703

像这样的东西：

```
text.each_line.each_with_object(Hash.new(0)).do |e,h|
  h[e.chomp] += 1
end.each.map do |k,v|
  v > 1 ? "#{v} times #{k} end" : k
end.tap do |array|
  File.open(...) { |f| array.each { |e| f.puts e } }
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T09:48:17.497

如果涉及大量，您应该使用压缩，不要重新发明轮子，而只是为了好玩：

```
s = %q{#HELLO
#HELLO
#HELLO
#HELLO
#WORLD
#WORLD
#WORLD
#WORLD
#FOO
#BAR
#WORLD}

s.split.inject([[]]) { |m, s| !s.empty? && (m[-1][0] != s) ? (m << [s,1]) :  m[-1][1] += 1;m }.drop 1
#=>[["#HELLO", 4], ["#WORLD", 4], ["#FOO", 1], ["#BAR", 1], ["#WORLD", 1]] 
```

我首先将字符串拆分为一个数组，然后在该数组上进行折叠（注入），消除连续的双打并将结果放入二维数组中

# c# - 是否可以验证 Caliburn.Micro 输入绑定

> ID：11307217
> 
> 赞同：0
> 
> 时间：2012-07-03T08:32:27.473
> 
> 标签：c#, silverlight, validation, binding, caliburn.micro

我有一个表单，其中包含一些文本框，这些文本框通过 caliburn 的自动绑定绑定到它们在 VM 中的属性。但是，如果您在文本框中键入对绑定 Caliburn 没有意义的内容，则根本不会对其执行任何操作（或者我认为它是）。

我想知道 Caliburn 是否有办法以某种方式限制其绑定的输入。例如：

我有一个绑定到 VM 中 TimeSpan 的 TextBox。写入 00:00:10 工作正常，并将 TimeSpan 设置为 10 秒。

如果我写 00:00:-10 没有任何反应，并且绑定保持在之前正确绑定的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:41:07.107

您的问题与 Caliburn.Micro 无关，它只是帮助您使用数据绑定将视图连接到视图模型。您需要使用的是数据绑定的验证。您可以阅读有关[Silverlight 中数据绑定的](http://msdn.microsoft.com/en-us/library/cc278072.aspx)更多信息，尤其是*数据验证*部分是您应该学习的内容。

Caliburn.Micro 使用约定自动创建绑定。但是，您可能必须在 XAML 中自定义这些绑定才能获得所需的验证行为。

在您编写`00:00:-10`验证失败的情况下，因为绑定引擎的类型转换器引发了异常。如果绑定表达式`TextBox`的[ValidatesOnExceptions](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.validatesonexceptions.aspx)属性值设置为 true，您将获得值无效的视觉反馈。并且由于输入的值无法转换为`TimeSpan`未更改视图模型。

# android - Android 应用中的 GridView VS GridLayout

> ID：11307218
> 
> 赞同：239
> 
> 时间：2012-07-03T08:32:28.870
> 
> 标签：android, grid, android-gridview, grid-layout

我必须使用 Grid 在 Android 中实现照片浏览器。所以，我想知道**GridView 和 GridLayout 之间的区别**。

这样我就可以选对了。

目前我正在使用 GridView 动态显示图像。

* * *

## 回答 #1

> 赞同：284
> 
> 时间：2012-07-03T09:00:28.300

[GridView](http://developer.android.com/reference/android/widget/GridView.html)是在二维滚动网格中显示项目的 ViewGroup 。网格中的项目来自与此视图关联的 ListAdapter。

这就是您想要使用的（继续使用）。因为 GridView 从 ListAdapter 获取数据，所以加载到内存中的唯一数据将是屏幕上显示的数据。GridViews，很像 ListViews 重用和回收它们的视图以获得更好的性能。

而[GridLayout](http://developer.android.com/reference/android/widget/GridLayout.html)是一种将其子项放置在矩形网格中的布局。

它是在 API 级别 14 中引入的，最近在支持库中被反向移植。它的主要目的是解决其他布局中的对齐和性能问题。如果您想了解有关 GridLayout 的更多信息，请查看本[教程。](http://android-developers.blogspot.com/2011/11/new-layout-widgets-space-and-gridlayout.html)

# image-processing - 识别图像中的图案

> ID：11307219
> 
> 赞同：1
> 
> 时间：2012-07-03T08:32:31.447
> 
> 标签：image-processing, pattern-recognition

我正在寻找一种快速的想法/算法，让我在图像文件中找到正方形（作为标记点）。然而，这不应该是太大的挑战......

我开始通过将源图像的颜色更改为灰度图像并扫描图像的每一行来寻找两三个最长的行（逐个像素）。

然后有一个“线条”数组，我正在寻找可以创建欲望方块的元素。

更好的主意是找到具有已知特征的模式，例如：它是正方形的，在正方形之外没有失真（只有空白）等。

目标是在 1-2 秒内分析 5000 X 5000 像素的图像。

是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T08:45:20.443

OpenCV 示例之一`squares.cpp`就是这样做的，请参阅[此处](http://code.opencv.org/svn/opencv/trunk/opencv/samples/cpp/squares.cpp)的代码，. 或者，您可以查找霍夫变换以检测图像中的所有线条，然后测试两条以直角相交的线条。

该网站上还有许多资源可以帮助您：

*   [OpenCV C++/Obj-C：检测一张纸/正方形检测](https://stackoverflow.com/q/8667818/769220)
*   [有没有像“cvHoughCircles()”这样的opencv函数来进行正方形检测？](https://stackoverflow.com/q/11015069/769220)
*   [正方形检测、图像处理](https://stackoverflow.com/q/8164366/769220)

我敢肯定还有其他人，这些只是我遇到的前几个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T08:34:22.677

请参阅尺度不变特征变换、模板匹配和霍夫变换。快速且不准确的猜测可能是制作颜色直方图并进行比较。如果图像足够复杂，您可能能够区分几组图像。

为简单起见，假设我们有 R、G 和 B 的三个桶。一个完全白色的图像将有 (100%, 100%, 100%) 的 (R, G, B)。一个完全红色的图像将具有 (100%, 0%, 0%)。一个复杂的图像可能有类似 (23%, 53%, 34%) 的东西。如果你取那个 (R, G, B) 空间中的点之间的距离，你可以比较哪个“更接近”。

我猜克里斯的链接解决了这个问题:)

# ssl-certificate - 如何在现有 x.509 证书中添加主题替代名称？

> ID：11307221
> 
> 赞同：4
> 
> 时间：2012-07-03T08:32:45.367
> 
> 标签：ssl-certificate

我有一个在“主题备用名称”中有“RFC822 Name=null”的证书。我能知道我们如何编辑这个扩展，以便我可以在这个字段中输入一些值吗？

# javascript - 为什么 qtip2 工具提示中的 onclick 事件不起作用？

> ID：11307223
> 
> 赞同：1
> 
> 时间：2012-07-03T08:32:53.960
> 
> 标签：javascript, jquery, button, qtip2

在下面给出的 jsfiddle 链接中，有 2 个按钮，单击其中任何一个按钮都会显示一个工具提示。我希望工具提示内的按钮更改“删除”文本和“输入文本”的显示和其他属性（使文本字段可编辑）问题是值确实更新但文本仍然无法编辑“请提出问题的解决方案

### [JSFIDDLE](http://jsfiddle.net/r9yfw/26/)

## HTML

```
<button id="gear">Gear</button>
<button id="gear1">Gear</button>
<div style="display:none;" id="menu">
    <button class="menuitem">Rename</button><br>
    <input type= "text" id = "try" readonly = "true"><br>
    <div id = "delete" style = "display: block">Delete</div><br>
</div> 
```

​</p>

## JavaScript

```
$(function() {
    $("#gear").button({
        icons: {
            primary: "ui-icon-gear",
            secondary: "ui-icon-triangle-1-s"
        },
        text: false
    }).qtip({
        content: {
            text: $('#menu')
        },
        show: {
            event: 'click',
            solo: true,
            modal: true
        },
        style: {
            classes: 'ui-tooltip-dark ui-tooltip-shadow'
        },
        position: {
            my: 'top center',
            at: 'bottom center',
        }
    });
     $("#gear1").button({
        icons: {
            primary: "ui-icon-gear",
            secondary: "ui-icon-triangle-1-s"
        },
        text: false
    }).qtip({
        content: {
            text: $('#menu')
        },
        show: {
            event: 'click',
            solo: true,
            modal: true
        },
        style: {
            classes: 'ui-tooltip-dark ui-tooltip-shadow'
        },
        position: {
            my: 'top center',
            at: 'bottom center',
        }
    });
    $(".menuitem").click(function(){
        document.getElementbyId("try").readOnly = false;
        document.getElementbyId("delete").style.display = none;                alert($(this).text());
    });
});​ 
```

## CSS

```
#gear {
    margin:100px;
}
.menuitem {
    padding-left: 10px;
    padding-right: 10px;
    font-size: 9px;
    margin-bottom: 3px;
    width: 75px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-11T13:02:53.813

我可以建议你使用 jquery 选择器：

```
$(".menuitem").click(function(){
    $("#try").attr('readonly', false);
    $("#delete").hide();
    alert($(this).text());
}); 
```

# forms - Ghost 在关闭表单后更改我的数据

> ID：11307224
> 
> 赞同：0
> 
> 时间：2012-07-03T08:33:02.680
> 
> 标签：forms, ms-access, ms-access-2007

我有一些数据库可以访问。我制作了一些带有子表单和下拉列表的表单（通过查询）：

![在此处输入图像描述](../Images/86ba0b29f0f4b57ae72b4bbca87377f2.png)

我创建表单的步骤：

1.  从表格制作表格
2.  删除所有非PK或FK文本框
3.  创建组合框，将值存储到我选择的文本框
4.  创建子表单并设置链接主字段和子字段

设计视图：

![在此处输入图像描述](../Images/8b9e27a15a23efa1840527b9eb9af54f.png)

这是表任务任务的表单，具有 Fk：项目、peson 等。 DropLists 连接到子表单，用于更改项目、人员等 FK。所以当我工作时，我在下拉列表中选择我想要添加到数据库的内容并使用子表单。当我关闭此表单时，**表中的第一行将 FK 更改为下拉列表上的最后一个配置**。请问我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:26:25.143

很可能使用主表单来选择和更新子表单记录，但在这种情况下，它不应该是绑定表单。

为了设置一个更好的词，一个链接表单，取消绑定主表单，即删除记录源并确保下拉菜单（组合框）没有控制源。我建议您将下拉列表重命名为 cbo，以表明它们是控件，而不是字段。不需要隐藏控件。

组合框的值是绑定列的值。Key 或 FK 是 SELECT 语句中的第一项，绑定列是 1（一个），因此相关的 Key 或 FK 是每个组合框的值。您可以将链接主字段设置为控件的名称，以便链接主字段应为`cbo_id_projekt;cbo_id_os_udaje;cbo_id_komponent;cbo_id_uloha`.

顺便说一句，我通常避免使用下划线，但每个人都有自己的下划线。

# java - selenium2:Selenium WebDriver : 从图像下拉列表框中选择一个选项

> ID：11307227
> 
> 赞同：1
> 
> 时间：2012-07-03T08:33:07.073
> 
> 标签：java, selenium-webdriver

我的项目中有图像`DropDown`列表框。如果我将鼠标移到菜单上，我将获得 3 个选项。我需要从列出的菜单中选择一个选项。我是 Selenium 网络驱动程序的新手。请帮助解决这个问题。我已经在 和 中尝试过这个`IE`选择`FireFox`。只有鼠标移动才能在菜单上工作。即使我点击什么也没有发生（我的意思是我看不到`Dropdown`列表）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:23:44.930

谢谢回复。我已经使用下面的代码进行了修复。

```
WebElement e1 = driver.findElement(By.linkText("Admin"));
WebElement e2 = driver.findElement(By.xpath(("Element1_xpath"));
WebElement e3 = driver.findElement(By.xpath("Element2_xpath"));

Actions action = new Actions(driver);
action.moveToElement(e1).clickAndHold().build().perform();      
action.moveToElement(e2).clickAndHold().build().perform();
action.moveToElement(e3).click().build().perform();
Thread.sleep(2000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T03:27:00.353

尝试使用 driver.Mouse API 函数。仅供参考：这里的驱动程序是您的驱动程序的实例。

# java - spring的bench和数据访问框架有什么区别？

> ID：11307228
> 
> 赞同：-4
> 
> 时间：2012-07-03T08:33:09.327
> 
> 标签：java, spring

Spring中的批处理和数据访问框架有什么区别？请任何人提供实用规格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:01:34.403

它与 IT 单词相同：

*   批处理：批处理是在计算机上执行一系列程序（“作业”），无需人工干预。（[批处理](http://en.wikipedia.org/wiki/Batch_processing)）
*   数据访问框架：从存储库（数据库等）访问数据的框架。

这是2个不同的概念。

# php - 变音符号显示为 ? 在我的 MySQL 数据库中？

> ID：11307231
> 
> 赞同：0
> 
> 时间：2012-07-03T08:33:21.123
> 
> 标签：php, mysql, diacritics

这是我的本地场景：

我有一个应用程序，它读取一些 CSV 文件并将内容写入我的本地 MYSQL 数据库。内容包含变音符号，例如“ß”或“Ä”。本地一切正常，变音符号被写入数据库，并在读取数据库的应用程序内显示正确。

现在我把这个场景移到亚马逊云上，突然“ß”变成了“？” 在数据库中。我检查了程序从 CSV 文件中读取的内容，它仍然是一个“ß”。所以我猜它一定是写入数据库，问题是，为什么这在本地工作而不是在我的云服务器上？这是数据库问题还是 PHP 问题？

谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:36:09.747

您是否检查了两个数据库上的编码？很可能有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T08:37:45.013

您需要对数据库进行 UTF-8 编码。

这是一篇出色的概述文章，解释了编码在 MySQL 中的工作原理，以及修复它的多种方法：

[http://www.bluebox.net/news/2009/07/mysql_encoding/](http://www.bluebox.net/news/2009/07/mysql_encoding/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T09:18:51.417

您可以使用：

iconv("UTF-8", "ISO-8859-1", $stringhere);

这将为您转换字符串

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-02T12:21:34.533

这完全取决于您如何上传 CSV 文件。
在将数据写入 MySQL 服务器之前，此代码可能会有所帮助：

```
$Notes = $_POST['Notes']; // or contents of the CSV file- but split the data first according to newline etc.  

$charset = mysqli_character_set_name($DBConnect);  
printf ("To check your character set but not necessary %s\n",$charset);  

$Notes = str_replace('"', '&quot;', $Notes);  //double quotes for mailto: emails.  
$von = array("ä","ö","ü","ß","Ä","Ö","Ü"," ","é");  //to correct double whitepaces as well
$zu  = array("&auml;","&ouml;","&uuml;","&szlig;","&Auml;","&Ouml;","&Uuml;","&nbsp;","&#233;");  
$Notes = str_replace($von, $zu, $Notes);  
echo " Notes:".$Notes."<br>" ;  
$Notes = mysqli_real_escape_string($link, $Notes); //for mysqli DB connection.

echo " Notes:".$Notes ; 
```

# http - HTTP 连接：保持活动状态

> ID：11307234
> 
> 赞同：1
> 
> 时间：2012-07-03T08:33:26.880
> 
> 标签：http, keep-alive, http-1.1

我正在查看[HTTP 1.1](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.10)规范，并且正在查看与“连接”标头相关的规范部分。我注意到为“连接”标头指定的唯一标记是“关闭”。经过一番挖掘，我发现在许多服务器实现（包括使用 Apache 2.2.3[的 Vim 的）的“连接”标头中找到的“保持活动”令牌是从](http://zamez.org/httplint?url=http%3A%2F%2Fwww.vim.org)[HTTP 1.0](http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html#sec19.6.2)遗留下来的。鉴于 HTTP 1.1 的广泛使用，从 HTTP 1.0 添加 Keep-Alive 和类似的继承令牌有多大价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T20:12:01.103

一些价值；取决于具体用途。

> 在 HTTP 1.1 中，除非另有声明，否则所有连接都被视为持久连接。

在实践中，实现做他们想做的事：

> 当客户端发送另一个请求 [在 HTTP 连接：保持活动之后] 时，它使用相同的连接。这将一直持续到客户端或服务器决定对话结束，并且其中一个断开连接。

因此，真正取决于客户端和服务器的实现者来确定他们保持 TCP 连接打开多长时间。例如，

> Apache 2.0 httpd[2] 的默认连接超时时间为 15 秒[3]，而 Apache 2.2 仅为 5 秒。

看起来 SPDY 将成为即将到来的 HTTP 2.0 的基础。这极大地改变了连接处理。

**资料来源：**

[http://en.wikipedia.org/wiki/HTTP_persistent_connection#HTTP_1.1](http://en.wikipedia.org/wiki/HTTP_persistent_connection#HTTP_1.1)

[http://en.wikipedia.org/wiki/SPDY](http://en.wikipedia.org/wiki/SPDY)

[http://en.wikipedia.org/wiki/HTTP_2.0](http://en.wikipedia.org/wiki/HTTP_2.0)

[https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-http2-08](https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-http2-08)

# android - OnSharedPreferenceChangeListener 在用户第一次进入偏好活动时触发

> ID：11307236
> 
> 赞同：2
> 
> 时间：2012-07-03T08:33:36.417
> 
> 标签：android, preferenceactivity

我的应用程序中有一个 PreferenceActivity 和一个 Service 以及其他组件。

当首选项更改时，我希望我的服务根据首选项更改做一些工作，因此我将我的服务配置为`OnSharedPreferenceChangeListener`.

我的问题是当用户第一次进入偏好活动时。该`OnSharedPreferenceChange`事件在“preferences.xml”中的每个首选项触发一次，尽管没有更改首选项。

我怎样才能避免这种行为？我不希望在`OnSharedPreferenceChange`用户第一次进入“首选项活动”时触发该事件。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T15:34:48.830

我有同样的问题，我找到了另一种方法来解决这个问题。

```
PreferenceManager.setDefaultValues(this, R.xml.preference, false); 
```

这样，您可以在注册更改之前设置首选项的默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T08:37:01.490

只需在 sharedpreferences 中使用一个标志，就像那样

```
 if( prefs.getBoolean( "preferenceFirstTime", true ) ) {
      SharedPreferences.Editor editor = prefs.edit();
      editor.putBoolean("preferenceFirstTime", false);
      editor.commit();
 } else {
      //this is not the first time 
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-08T19:07:37.330

如果您有 2 个或更多 PreferenceScreen 您需要使用：

```
PreferenceManager.setDefaultValues(this, R.xml.preference, true); 
```

对于每个 PreferenceScreen。但在最后一个用途：

```
PreferenceManager.setDefaultValues(this, R.xml.preference, false); 
```

示例：您有三个 PreferenceScreen，请执行以下操作：

```
PreferenceManager.setDefaultValues(this, R.xml.preference1, true);
PreferenceManager.setDefaultValues(this, R.xml.preference2, true);
PreferenceManager.setDefaultValues(this, R.xml.preference3, false); 
```

# django - 如何在 django 模板中为表单集数据输入字段设置不同的标签

> ID：11307242
> 
> 赞同：0
> 
> 时间：2012-07-03T08:33:56.233
> 
> 标签：django, templates, labels, formset

我为我的表单制作了以下模板和视图，我想要的是具有不同的标签名称，特别是存储在数组中的每个数据输入字段的 id。请指导我如何实现这一点

```
def show (request):

b = request.session["s1"] # count of no of period ids
c = request.session["s2"] # account number inserted by user
d = request.session["s3"] # year inserted by customer
a = account_period.objects.filter(year=d).values('id')
e = account_period.objects.filter(year=d).values('month')
f = account_period.objects.filter(id = a).values('year')
butt = formset_factory(bu, extra=b)
if request.method == 'POST'
 formset = butt(request.POST)
 if formset.is_valid():

    z = account_tab.objects.get(account_number=c)
    pr = date.today()
    i=0
    for form in formset.forms:
       x = form.cleaned_data['value']
       y = account_period.objects.get(id=a[i:(i+1)])
       try:
        uip = budget.objects.get(account_no = c,account_period = a[i:(i+1)])
        if uip.budget_amount != x
          uip.budget_amount = x
          uip.save()

       except budget.DoesNotExist:
        w = budget(account_no = z, account_period = y, budget_amount = x, created_by_login = 'me')
        w.save()
       i=i+1
    pass
  return HttpResponse('thanks')

else:
  formset = butt(
   return render_to_response('budgetfinalform.html', {'account_number': c,'period':d,'month':e,'year':f,'formset': formset},context_instance=RequestContext(request))

<html>
<head>
<title>BUDGET</title>
</head>
<body>
<p>BUDGET MANAGEMENTS</p>
<p>Your Account Number is : {{ account_number }}.</p> <p>You Chose {{ period }} {{month}} as period<p>   
{% if form.errors %}
<p style="color: red;">
    Please correct the error{{ form.errors|pluralize }} below.
</p>
{% endif %} 
<form action="." method="post">{% csrf_token %}
{{ formset.management_form }}
<table>
{% for form in formset.forms %}
{{ form }}
{% endfor %}
</table>    
<input type="submit" value="Submit">
</form>
</body>
</html> 
```

# maven - 构建部分中的 cobertura maven 插件

> ID：11307247
> 
> 赞同：1
> 
> 时间：2012-07-03T08:34:23.413
> 
> 标签：maven, cobertura

我是 Maven 的新手，并且通过给定的 pom 工作。我在 pom 的构建部分找到了关于 cubertura-maven-plugin 的部分。

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>cobertura-maven-plugin</artifactId>
    <version>2.4</version>
</plugin> 
```

问题是这是否有意义，因为我希望在报告部分配置这个插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:56:00.907

去看看[它的用法](http://mojo.codehaus.org/cobertura-maven-plugin/usage.html)。如您所说，这种基本配置没有意义，应该移至`<reporting>`部分。但一般来说，您可能需要做一些更高级的配置并需要它在`<build>`块中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T08:58:01.233

如果您想在外部使用 cobertura 数据，这是有道理的`mvn site`。[像声纳](http://www.sonarsource.org/)这样的工具就是这样使用 cobertura 的。

通过将此插件绑定到您选择的目标，您可以使用 cobertura 执行诸如在覆盖范围不足时使构建失败之类的事情。请参阅[此使用页面](http://mojo.codehaus.org/cobertura-maven-plugin/usage.html)`Configuring check`中的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T09:19:50.763

好吧，这取决于您是否使用 Maven 3。如果您是，则`<reporting/>`不再需要该标签。另一方面，您必须将插件添加`<reportPlugins/>`到`maven-site-plugin`配置部分。

Maven 3 的区别[在这里](http://maven.apache.org/plugins/maven-site-plugin/maven-3.html#New_Configuration_Maven_3_only_no_reports_configuration_inheritance)。

另一方面，您的实际配置没有显示出任何参与的痕迹，`maven-site-plugin`所以我的回答可能有点离题......

# java - JSON 值在 jquery 自动完成中的格式不正确

> ID：11307248
> 
> 赞同：0
> 
> 时间：2012-07-03T08:34:26.887
> 
> 标签：java, jquery, json, autocomplete

我的 jquery 自动完成脚本有问题。这是我的代码：

背部

```
<?php
require_once("include/global.php");
require_once("include/con_open.php");
$q = "select name, id from tbl_hotel";
$query = mysql_query($q);
if (mysql_num_rows($query) > 0) {
    $return = array();
    while ($row = mysql_fetch_array($query)) {
    array_push($return,array('label'=>$row["name"],'id'=>$row["id"]));
    }
}
echo(json_encode($return)); 
```

正面

```
<input type="text" id="hotel" />

<link rel="stylesheet" type="text/css" href="http://cdn0.favehotels.com/v2/style/autocomplete/jquery.ui.all.css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>

<script type="text/javascript">                     
$(document).ready(function() {
    $( "#hotel" ).autocomplete({
        position: { my : "right bottom", at: "right top" },
        source: "hotel-search.php",
        minLength: 2,
        select: function( event, ui ) {
            window.location.href=ui.item.id;
        }                   
    })._renderItem = function( ul, item ) {
        return $("<li></li>")
            .data("item.autocomplete", item)
            .append($("<a></a>").text(item.label))   
            .appendTo(ul);
    };
});
</script> 
```

`source: "hotel-search.php"`返回`[{"label":"A", "id":"1"}]`

当我将线路`source: "hotel-search.php"`更改为`source: [{"label":"A", "id":"1"}]`

它还不行。

但是当我将其更改为它时，`source: [{label:"A", id:"1"}]`它工作正常。

我应该怎么做才能使“hotel-search.php”的返回变得`{label:"Hotel A", id:"1"}`不像`{"label":"Hotel A", "id":"1"}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:21:23.670

尝试`$.getJSON`让 jQuery 获取 JSON 响应并将其解析为 JSON 对象：

```
$.getJSON('hotel-search.php', function(jsonData) {
   $("#hotel" ).autocomplete({
        position: { my : "right bottom", at: "right top" },
        source: jsonData,
        minLength: 2,
        select: function( event, ui ) {
            window.location.href=ui.item.id;
        }                   
    })._renderItem = function( ul, item ) {
        return $("<li></li>")
            .data("item.autocomplete", item)
            .append($("<a></a>").text(item.label))   
            .appendTo(ul);
    };
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:49:36.700

> Naufal Abu Sudais：“它还不起作用”是指自动完成不断显示所有列表。它一直显示“A”，即使我输入了“B”

当您使用`autocomplete`AJAX 调用时，会向服务发送一个 GET 参数**term**：

```
hotel-search.php?term=WhatYouTypeInAutocomplete 
```

所以如果你想要最短的列表，你必须`$_GET['term']`在你的 PHP 文件中使用来过滤响应项。

# android - 在 aChartEngine 中对 XYSeries 使用 remove(int index) 函数

> ID：11307253
> 
> 赞同：2
> 
> 时间：2012-07-03T08:34:43.323
> 
> 标签：android, android-asynctask, achartengine

我正在编写一个代码，其中必须通过重复调用 aSyncTask 来不断更新图形。但为了确保图表不会太压缩，我计划**删除/删除**超过某个点的最旧条目。目前我的代码如下：

```
int counter = 0;
private class UpdateLineGraphAsync extends AsyncTask<Void, Void, Void> {

    @Override
    protected Void doInBackground(Void... params) {
        // add the next series value
        series.add(counter, Math.sin((double) counter / 100));
        counter += 20;
        if (counter > 500)
            series.remove(0);
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        ((GraphicalView) lineGraph).repaint(); // repaints the graph!
    }

} 
```

但是当我调用 remove(0); 时，这段代码一直给我一个**空点异常；**谁能解释函数 XYSeries.remove(index) 的工作原理？我在某处读到它是一个后进先出结构。这是真的？如何纠正这个错误？即使是对 remove 函数的一次调用也会产生错误。

错误代码是：

```
07-03 17:27:36.080: E/AndroidRuntime(1229): FATAL EXCEPTION: AsyncTask #2
07-03 17:27:36.080: E/AndroidRuntime(1229): java.lang.RuntimeException: An error occured while executing doInBackground()
07-03 17:27:36.080: E/AndroidRuntime(1229):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
07-03 17:27:36.080: E/AndroidRuntime(1229):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
07-03 17:27:36.080: E/AndroidRuntime(1229):     at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
07-03 17:27:36.080: E/AndroidRuntime(1229):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
07-03 17:27:36.080: E/AndroidRuntime(1229):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
07-03 17:27:36.080: E/AndroidRuntime(1229):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
07-03 17:27:36.080: E/AndroidRuntime(1229):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
07-03 17:27:36.080: E/AndroidRuntime(1229):     at java.lang.Thread.run(Thread.java:1027)
07-03 17:27:36.080: E/AndroidRuntime(1229): Caused by: java.lang.NullPointerException
07-03 17:27:36.080: E/AndroidRuntime(1229):     at org.achartengine.model.XYSeries.getY(XYSeries.java:169)
07-03 17:27:36.080: E/AndroidRuntime(1229):     at org.achartengine.model.XYSeries.initRange(XYSeries.java:83)
07-03 17:27:36.080: E/AndroidRuntime(1229):     at org.achartengine.model.XYSeries.remove(XYSeries.java:140)
07-03 17:27:36.080: E/AndroidRuntime(1229):     at com.clearbridgevitalsigns.cardioleaf.LiveView$UpdateLineGraphAsync.doInBackground(LiveView.java:121)
07-03 17:27:36.080: E/AndroidRuntime(1229):     at com.clearbridgevitalsigns.cardioleaf.LiveView$UpdateLineGraphAsync.doInBackground(LiveView.java:1)
07-03 17:27:36.080: E/AndroidRuntime(1229):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
07-03 17:27:36.080: E/AndroidRuntime(1229):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
07-03 17:27:36.080: E/AndroidRuntime(1229):     ... 4 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:56:37.170

我曾经有同样的问题。我不知道为什么，但我想这是由于同时访问来自 achartengine 的系列数据。我设法避免了这个问题，使用另一种方法来移动显示器，使用 renderer.setXAxisMin et renderer.setXAxisMax 而无需处理系列本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:23:13.343

如果集合超出限制，则首先删除第 0 个元素，然后尝试添加新元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:20:52.990

我不认为这个 NullPointerException 是因为 series.remove(0) 语句。它在我的原型中运行良好。我的观点是您需要在 XYMultipleSeriesDataset 中添加您的 XYSeries。例如参考[这个链接](https://stackoverflow.com/questions/8869854/how-to-implement-timechart-in-achartengine-with-android)。

# bash - 是否有计算文件的 bash 命令？

> ID：11307257
> 
> 赞同：233
> 
> 时间：2012-07-03T08:35:10.937
> 
> 标签：bash

是否有一个 bash 命令可以计算与模式匹配的文件数？

例如，我想获取目录中与此模式匹配的所有文件的计数：`log*`

* * *

## 回答 #1

> 赞同：318
> 
> 时间：2012-07-03T08:41:54.593

这个简单的单行代码应该可以在任何 shell 中工作，而不仅仅是 bash：

```
ls -1q log* | wc -l 
```

ls -1q 将为每个文件提供一行，即使它们包含空格或特殊字符（例如换行符）。

输出通过管道传送到 wc -l，它计算行数。

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2015-11-24T11:01:33.753

这里有很多答案，但有些没有考虑到

*   包含空格、换行符或控制字符的文件名
*   以连字符开头的文件名（想象一个名为 的文件`-l`）
*   以点开头的隐藏文件（如果 glob`*.log`不是`log*`
*   与 glob 匹配的目录（例如，名为 match 的`logs`目录`log*`）
*   空目录（即结果为 0）
*   非常大的目录（将它们全部列出可能会耗尽内存）

这是一个处理所有这些的解决方案：

```
ls 2>/dev/null -Ubad1 -- log* | wc -l 
```

解释：

*   `-U`导致`ls`不对条目进行排序，这意味着它不需要将整个目录列表加载到内存中
*   `-b`打印非图形字符的 C 样式转义，关键是导致换行符打印为`\n`.
*   `-a`打印出所有文件，甚至是隐藏文件（当 glob`log*`表示没有隐藏文件时，不严格需要）
*   `-d`打印目录而不尝试列出目录的*内容*，这是`ls`通常会做的
*   `-1`确保它在一列上（ls 在写入管道时会自动执行此操作，因此并非绝对必要）
*   `2>/dev/null`重定向标准错误，以便如果有 0 个日志文件，则忽略错误消息。（请注意，这`shopt -s nullglob`会导致`ls`列出整个工作目录。）
*   `wc -l`在生成目录列表时使用它，因此输出`ls`永远不会在任何时间点存储在内存中。
*   `--`文件名与使用命令分开，`--`以免被理解为参数`ls`（以防`log*`被删除）

shell*将*扩展`log*`为完整的文件列表，如果文件很多，可能会耗尽内存，因此通过 grep 运行它会更好：

```
ls -Uba1 | grep ^log | wc -l 
```

最后一个处理非常大的文件目录而不使用大量内存（尽管它确实使用了子shell）。`-d`不再需要，因为它只列出当前目录的内容。

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2012-07-03T08:43:34.363

`\n`您可以使用 bash安全地执行此操作（即不会被带有空格或名称的文件所干扰）：

```
$ shopt -s nullglob
$ logfiles=(*.log)
$ echo ${#logfiles[@]} 
```

您需要启用[`nullglob`](http://mywiki.wooledge.org/NullGlob)，这样如果没有文件匹配，您就不会`*.log`在`$logfiles` [数组中获得文字。](http://tldp.org/LDP/abs/html/arrays.html)（有关如何安全重置它的示例，请参见[如何“撤消”'set -x'？ ）](https://unix.stackexchange.com/questions/310957/how-to-undo-a-set-x/310963)

* * *

## 回答 #4

> 赞同：59
> 
> 时间：2012-07-03T08:41:00.897

对于递归搜索：

```
find . -type f -name '*.log' -printf x | wc -c 
```

`wc -c`将计算 的输出中的字符数`find`，同时`-printf x`告诉为每个结果`find`打印一个`x`。

对于非递归搜索，请执行以下操作：

```
find . -maxdepth 1 -type f -name '*.log' -printf x | wc -c 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-10-30T06:11:52.067

这个问题的公认答案是错误的，但我的代表很低，所以无法添加评论。

Mat给出了这个问题的正确答案：

```
shopt -s nullglob
logfiles=(*.log)
echo ${#logfiles[@]} 
```

接受的答案的问题是 wc -l 计算换行符的数量，即使它们打印到终端作为'？在“ls -l”的输出中。这意味着当文件名包含换行符时，接受的答案失败。我已经测试了建议的命令：

```
ls -l log* | wc -l 
```

即使只有 1 个文件与名称恰好包含换行符的模式匹配，它也会错误地报告值 2。例如：

```
touch log$'\n'def
ls log* -l | wc -l 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-08-22T19:16:02.523

如果你有很多文件并且不想使用优雅`shopt -s nullglob`和bash数组的解决方案，你可以使用find等，只要你不打印出文件名（可能包含换行符）。

```
find -maxdepth 1 -name "log*" -not -name ".*" -printf '%i\n' | wc -l 
```

这将找到与 log* 匹配且不以开头的所有文件`.*`— "not name.*" 是多余的，但重要的是要注意 "ls" 的默认值是不显示点文件，但默认值因为 find 是包含它们。

这是一个正确的答案，可以处理任何类型的文件名，因为文件名永远不会在命令之间传递。

但是，`shopt nullglob`答案是最好的答案！

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2016-11-04T19:48:53.363

这是我的一个班轮。

```
 file_count=$( shopt -s nullglob ; set -- $directory_to_search_inside/* ; echo $#) 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2020-05-05T12:39:48.043

# 一个重要的评论

（没有足够的声誉发表评论）

这是**错误**的：

```
ls -1q some_pattern | wc -l 
```

如果`shopt -s nullglob`碰巧设置了，它会打印**所有**常规文件的数量，而不仅仅是带有模式的文件（在 CentOS-8 和 Cygwin 上测试）。谁知道还有什么其他无意义`ls`的错误？

这是**正确**的，而且速度更快：

```
shopt -s nullglob; files=(some_pattern); echo ${#files[@]}; 
```

它完成了预期的工作。

* * *

并且运行时间不同。
第一个：`0.006`在 CentOS 和`0.083`Cygwin 上（以防小心使用）。
第二个：`0.000`在 CentOS 和`0.003`Cygwin 上。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2018-12-18T12:08:31.960

您可以使用 -R 选项来查找文件以及递归目录中的文件

```
ls -R | wc -l // to find all the files

ls -R | grep log | wc -l // to find the files which contains the word log 
```

*您可以在 grep 上使用模式*

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-08-09T19:29:36.560

您可以使用 shell 函数轻松定义这样的命令。此方法不需要任何外部程序，也不会产生任何子进程。它不会尝试进行危险的`ls`解析，并且可以很好地处理“特殊”字符（空格、换行符、反斜杠等）。它只依赖于 shell 提供的文件名扩展机制。它至少与 sh、bash 和 zsh 兼容。

下面的行定义了一个调用的函数`count`，它打印调用它的参数的数量。

```
count() { echo $#; } 
```

只需使用所需的模式调用它：

```
count log* 
```

为了在 globbing 模式不匹配时结果正确，必须在扩展发生时设置shell 选项`nullglob`（或- 这是 zsh 上的默认行为）。`failglob`可以这样设置：

```
shopt -s nullglob    # for sh / bash
setopt nullglob      # for zsh 
```

根据您要计算的内容，您可能还对 shell option 感兴趣`dotglob`。

不幸的是，至少使用 bash，在本地设置这些选项并不容易。如果您不想全局设置它们，最直接的解决方案是以这种更复杂的方式使用该函数：

```
( shopt -s nullglob ; shopt -u failglob ; count log* ) 
```

如果你想恢复轻量级语法`count log*`，或者如果你真的想避免产生一个子shell，你可以破解一些类似的东西：

```
# sh / bash:
# the alias is expanded before the globbing pattern, so we
# can set required options before the globbing gets expanded,
# and restore them afterwards.
count() {
    eval "$_count_saved_shopts"
    unset _count_saved_shopts
    echo $#
}
alias count='
    _count_saved_shopts="$(shopt -p nullglob failglob)"
    shopt -s nullglob
    shopt -u failglob
    count' 
```

* * *

作为奖励，此功能具有更普遍的用途。例如：

```
count a* b*          # count files which match either a* or b*
count $(jobs -ps)    # count stopped jobs (sh / bash) 
```

通过将函数转换为可从 PATH 调用的脚本文件（或等效的 C 程序），它还可以与诸如`find`和之类的程序组成`xargs`：

```
find "$FIND_OPTIONS" -exec count {} \+    # count results of a search 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-12-06T21:45:48.200

我对这个答案深思熟虑，特别是考虑到[don't-parse-ls 的东西](http://mywiki.wooledge.org/ParsingLs)。起初，我尝试

```
<警告！没有工作>
```

```
du --inodes --files0-from=<(find . -maxdepth 1 -type f -print0) | awk '{sum+=int($1)}END{print sum}' 
```

```
</警告！没有工作>
```

如果只有一个像这样的文件名，它会起作用

```
touch $'w\nlf.aa' 
```

但是如果我创建了这样的文件名失败了

```
touch $'firstline\n3 and some other\n1\n2\texciting\n86stuff.jpg' 
```

我终于想出了我在下面放的东西。注意我试图获取目录中所有文件的计数（不包括任何子目录）。我认为它以及@Mat 和@Dan_Yard 的答案，以及至少具有@mogsie 提出的大部分要求（我不确定内存。）我认为@mogsie 的答案是正确的，但我总是尽量避免解析`ls`，除非这是一个非常具体的情况。

```
awk -F"\0" '{print NF-1}' < <(find . -maxdepth 1 -type f -print0) | awk '{sum+=$1}END{print sum}' 
```

更具可读性：

```
awk -F"\0" '{print NF-1}' < \
  <(find . -maxdepth 1 -type f -print0) | \
    awk '{sum+=$1}END{print sum}' 
```

这是专门针对文件进行查找，用空字符分隔输出（以避免空格和换行问题），然后计算空字符的数量。文件的数量将比空字符的数量少一，因为最后会有一个空字符。

要回答OP的问题，需要考虑两种情况

1）非递归搜索：

```
awk -F"\0" '{print NF-1}' < \
  <(find . -maxdepth 1 -type f -name "log*" -print0) | \
    awk '{sum+=$1}END{print sum}' 
```

2）递归搜索。请注意，`-name`参数内部的内容可能需要针对稍微不同的行为（隐藏文件等）进行更改。

```
awk -F"\0" '{print NF-1}' < \
  <(find . -type f -name "log*" -print0) | \
    awk '{sum+=$1}END{print sum}' 
```

如果有人想评论这些答案与我在这个答案中提到的答案的比较，请这样做。

* * *

请注意，我在得到[这个答案](https://stackoverflow.com/a/59217769/6505499)时进入了这个思考过程。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-01-17T22:11:06.470

这就是我一直在做的事情：

> ls 日志* | awk 'END{打印 NR}'

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-10-14T17:47:11.097

这是您可以在脚本中使用的通用 Bash 函数。

```
 # @see https://stackoverflow.com/a/11307382/430062
    function countFiles {
        shopt -s nullglob
        logfiles=($1)
        echo ${#logfiles[@]}
    }

    FILES_COUNT=$(countFiles "$file-*") 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-07-03T20:17:16.190

```
ls -1 log* | wc -l 
```

这意味着每行列出一个文件，然后将其传递给字数命令，并将参数切换到计数行。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-10-21T14:42:25.443

这可以使用标准 POSIX shell 语法来完成。

这是一个简单的`count_entries`函数：

```
#!/usr/bin/env sh

count_entries()
{
  # Emulating Bash nullglob 
  # If argument 1 is not an existing entry
  if [ ! -e "$1" ]
    # argument is a returned pattern
    # then shift it out
    then shift
  fi
  echo $#
} 
```

对于紧凑的定义：

```
count_entries(){ [ ! -e "$1" ]&&shift;echo $#;} 
```

按类型推荐的 POSIX 兼容文件计数器：

```
#!/usr/bin/env sh

count_files()
# Count the file arguments matching the file operator
# Synopsys:
# count_files operator FILE [...]
# Arguments:
# $1: The file operator
#   Allowed values:
#   -a FILE    True if file exists.
#   -b FILE    True if file is block special.
#   -c FILE    True if file is character special.
#   -d FILE    True if file is a directory.
#   -e FILE    True if file exists.
#   -f FILE    True if file exists and is a regular file.
#   -g FILE    True if file is set-group-id.
#   -h FILE    True if file is a symbolic link.
#   -L FILE    True if file is a symbolic link.
#   -k FILE    True if file has its `sticky' bit set.
#   -p FILE    True if file is a named pipe.
#   -r FILE    True if file is readable by you.
#   -s FILE    True if file exists and is not empty.
#   -S FILE    True if file is a socket.
#   -t FD      True if FD is opened on a terminal.
#   -u FILE    True if the file is set-user-id.
#   -w FILE    True if the file is writable by you.
#   -x FILE    True if the file is executable by you.
#   -O FILE    True if the file is effectively owned by you.
#   -G FILE    True if the file is effectively owned by your group.
#   -N FILE    True if the file has been modified since it was last read.
# $@: The files arguments
# Output:
#   The number of matching files
# Return:
#   1: Unknown file operator
{
  operator=$1
  shift
  case $operator in
    -[abcdefghLkprsStuwxOGN])
      for arg; do
        # If file is not of required type
        if ! test "$operator" "$arg"; then
          # Shift it out
          shift
        fi
      done
      echo $#
      ;;
    *)
      printf 'Invalid file operator: %s\n' "$operator" >&2
      return 1
      ;;
  esac
}

count_files "$@" 
```

示例用法：

```
count_files -f log*.txt
count_files -d datadir* 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2020-02-06T16:05:24.867

要计算所有内容，只需将 ls 管道传输到字数统计行：

```
ls | wc -l 
```

要使用模式计数，请先通过管道传输到 grep：

```
ls | grep log | wc -l 
```

# .net - 扩展的打开/保存文件对话框中的视觉样式异常

> ID：11307258
> 
> 赞同：1
> 
> 时间：2012-07-03T08:35:18.100
> 
> 标签：.net, windows, user-interface, savefiledialog

我关注[了这篇文章](http://www.codeproject.com/Articles/8086/Extending-the-save-file-dialog-class-in-NET)，该文章解释了如何使用 .NET 扩展 Windows 的内置文件打开/保存对话框。经过一些小的更改后，一切正常，但对话框的外观与其他对话框略有不同。这并不重要，但我很好奇这背后的原因是什么。

我的对话框（平面按钮）： ![我的对话框（平面按钮）](../Images/90e34f6269c8adfc2953bee050c336db.png)

其他对话框（3D 按钮）：![其他对话框（3D 样式按钮）](../Images/5052d36ef39c0e230d956e8f2e912f80.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T12:45:47.593

从那篇文章的评论来看：

> SaveFileDialogWithEncoding 示例很棒。但是，外观和感觉是“旧样式”——换句话说，按钮和控件没有新的“XP 外观”（即圆形按钮等）。它可能是 OPENFILENAME 结构中的一个字段中的标志设置，我正在调查。我只是想知道您（或其他任何人）是否对解决该问题有任何见解。

然后是自我回答：

> 没关系——想通了。在实例化表单对象之前，您需要像这样调用 Application.EnableVisualStyles() ：

```
[STAThread]
static void Main() 
{
  Application.EnableVisualStyles();
  Application.Run(new Form1());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T07:04:24.753

LarsTech 的解决方案似乎在大多数情况下都有效，但似乎不适用于 Office 加载项。此处按照[此 Microsoft 文章](http://support.microsoft.com/default.aspx?scid=kb;en-us;830033)`EnableThemingInScope`中的描述实现并将其与以下代码一起使用会有所帮助。

```
using( new EnableThemingInScope( true ) )
{
    if (!GetSaveFileName(ref ofn))
    {
        int ret=CommDlgExtendedError();

        if (ret!=0)
        {
            throw new ApplicationException("Couldn't show file open dialog - " + ret.ToString());
        }

        return DialogResult.Cancel;
    }
} 
```

# doctrine - Doctrine 2 DBAL Querybuilder 并获得结果

> ID：11307260
> 
> 赞同：5
> 
> 时间：2012-07-03T08:35:20.097
> 
> 标签：doctrine, doctrine-orm

我正在使用 Doctrine DBAL，在 ORM 文档中它说，为了执行 querybuilder 查询，我首先必须使用 getQuery 方法获取 Query 对象。不幸的是，在 DBAL 中似乎没有 getQuery 方法来完成工作，那么程序是什么？从 getSQL 方法获取 SQL 并单独执行？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-06T00:08:14.420

如果你想检索一个数组，你可以这样做

```
$qb->execute()->fetchAll(); 
```

# javascript - 如何从 JavaScript 中的 File-API 对象获取内容？

> ID：11307264
> 
> 赞同：-1
> 
> 时间：2012-07-03T08:35:28.870
> 
> 标签：javascript, file

如何从 JavaScript 中的 File-API 对象获取内容？

我有一个 File-Api 对象，我想检索所有文件的内容，以便在 Ajax 请求中通过 POST 发送它。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:40:58.793

如果“文件 API 对象”是指输入类型，`file`则可以使用：

```
// Multifile support
var files = getElementById('myfileinput').files

// Non multi support
var file = getElementById('myfileinput').value 
```

然后您可以通过循环获取文件名：

```
var filenames = []
for (var i = 0, l = files.length; i < l; i++)
  filenames.push(files[i].name) 
```

# jqgrid - 编辑行混合内联编辑和表单编辑

> ID：11307265
> 
> 赞同：1
> 
> 时间：2012-07-03T08:35:34.207
> 
> 标签：jqgrid

在我的 jqGrid 中，我同时使用内联编辑和表单编辑。

我的一个列在内联编辑中不应该是可编辑的，所以我在我的 colModel 中将属性可编辑为 false，但是这个列应该在表单编辑中可见（编辑时只读，添加时可编辑）。

这是我尝试过的：

```
colModel:[{name:'bordereau',index:'BORDEREAU',width:60,align:'center',title:false,editable:false,editoptions: { readonly: true },editrules:{required:true},sortable:true,search:true},

function addRowForm(){
    grid.editGridRow("new",{
        width:'auto',
        height:'auto',
        reloadAfterSubmit:true,
        recreateFilter:true,
        beforeInitData: function() {
            grid.jqGrid('setColProp','bordereau',{editable:true});
            grid.jqGrid('setColProp','bordereau',{editoptions: {readonly: false}});
        },
        afterShowForm: function() {
            $("#editmod"+gridId).css("top",Math.round(((hauteurFenetreUtilisable)/2)-($("#editmod"+gridId).height()/2))+"px");
            $("#editmod"+gridId).css("left",Math.round(((largeutFenetreUtilisable)/2)-($("#editmod"+gridId).width()/2))+"px");
            grid.jqGrid('setColProp','bordereau',{editable:false});
            grid.jqGrid('setColProp','bordereau',{editoptions: {readonly: true}});
            $("#TblGrid_listeVar2 tr:visible:odd").addClass("jqgrow ui-row-ltr odd");
        },
        onclickPgButtons : function (which, formid, numeroBordereau) {
        },
        onClose: function() {
        },
        afterComplete: function() {
        }
    }); 
}

function editRowForm(numeroBordereau){
        grid.restoreRow(numeroBordereau);
        resetGridVar();
        grid.editGridRow(numeroBordereau,{
            width:'auto',
            height:'auto',
            reloadAfterSubmit:true,
            recreateFilter:true,
            beforeInitData: function() {
                grid.jqGrid('setColProp','bordereau',{editable:true});
            },
            afterShowForm: function() {
                $("#editmod"+gridId).css("top",Math.round(((hauteurFenetreUtilisable)/2)-($("#editmod"+gridId).height()/2))+"px");
                $("#editmod"+gridId).css("left",Math.round(((largeutFenetreUtilisable)/2)-($("#editmod"+gridId).width()/2))+"px");
                $("#TblGrid_listeVar2 tr:visible:odd").addClass("jqgrow ui-row-ltr odd");
                grid.jqGrid('setColProp','bordereau',{editable:false});
            },
            onclickPgButtons : function (which, formid, numeroBordereau) {
            },
            onClose: function() {
            },
            afterComplete: function() {
            }
        }); 
    } 
```

# javascript - 使用modernizr检测activex对象

> ID：11307266
> 
> 赞同：1
> 
> 时间：2012-07-03T08:35:36.530
> 
> 标签：javascript

如何使用modernizr检测activex对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:39:20.790

我不认为modernizr 有针对activeX 的内置测试（与*现代开发*`activeX`无关，modernizr 主要检查对浏览器、CSS3 和HTML5 功能的新支持）*`API`*

 *只需尝试使用您自己的自定义函数，如下所示：

```
function activeXSupport(o) {
   try {
     return new ActiveXObject(o);
   }
   catch(e) { return false; } 
}

...

if (activeXSupport("Microsoft.yourActiveXObject")) {
   ...
} 
```*

# c++ - 使用接口

> ID：11307268
> 
> 赞同：2
> 
> 时间：2012-07-03T08:35:43.727
> 
> 标签：c++

我正在重构的代码中具有以下形式的功能：

```
A f()
{
    if(existing)
        return A();
    else
        return A(handle);
} 
```

Safe Bool Idiom 稍后用于测试 A 是否与句柄相关联，即我们是否应该调用该对象的类方法，这些方法在内部需要一个有效的句柄才能执行。A 的方法是 const。

我想在这里返回一个接口 IA。因此我必须返回一个指针吗？如果是这样，我将使用 boost 共享指针。我可以测试指针是否指向某个东西。

我有什么办法可以在这里使用参考资料吗？您会推荐这种方法还是您认为 boost::shared_ptrs 是要走的路？

**更新**

A源自IA。

我的编译器是 gcc 版本 4.4.3。

我对这段代码最大的问题是 A 用于与外部 C API 交互。因此，我希望使用 IA 接口作为我的 Mock of A 及其实现 A 的基础来模拟它。然后在上面的方法 f() 之外，我将其视为工厂，我将只使用 IA 指针。换句话说，依赖注入。

所以 A 基本上是一个句柄和一组需要句柄的 C API 函数的接口。我可以有几个 A 类型的对象，其中接口相同但句柄不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T08:50:00.020

我会返回一个`std::unique_ptr< AI >`对象：

```
std::unique_ptr< AI > f()
{
    if(existing)
        return std::unique_ptr< AI >( new A() );
    else
        return std::unique_ptr< AI >( new A(handle) );
} 
```

在上述情况下，切片不会发生，编译器会移动^*对象。

^*我假设你使用的是 c++11。

* * *

由于您没有使用 c++11，因此最简单的方法是使用`boost::shared_ptrs`：

```
boost::shared_ptrs< AI > f()
{
    if(existing)
        return boost::shared_ptrs< AI >( new A() );
    else
        return boost::shared_ptrs< AI >( new A(handle) );
} 
```

在这种情况下，您不必关心创建的对象是否以及何时被破坏。`boost::shared_ptrs`会照顾的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T08:39:01.473

我也会使用指针，但您*也*可以使用引用：

```
A& f()
{
    if(existing)
    {
        static A a;
        return a;
    }
    else
    {
        static A a(handle);
        return a;
    }
} 
```

但是，您完全了解其中的含义，对吗？即您不能重新分配引用并修改它意味着修改局部`static`变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T08:40:49.993

从您的代码片段看来，您正在构造函数中的`A`对象`f`。在这种情况下，按值返回对象可能是您能做的最好的事情。编译器将使用返回值优化 ( [RVO](http://en.wikipedia.org/wiki/Return_value_optimization) ) 并优化所有副本。

查看Dave Abrahams 的[这篇](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)关于按值传递和返回对象的文章。

`A`请注意，由于[切片问题](http://en.wikipedia.org/wiki/Object_slicing)，如果您返回基类，此解决方案将不起作用。如果返回一个`A`对象没问题，那么这可能是最好的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T09:11:08.350

如果你能理解指针，那么就使用指针。如果你不能，那就坚持你所拥有的。看起来像你之前的那个人尽力避免指针。正如 betabandido 所说，编译器将充分利用它，即使它看起来很慢 - 在纸上。

接口是一种充分利用指针的设计模式。没有指针和强制转换就没有多大意义。

为了测试指针是否指向某个东西，有 NULL 值。如果您正在射击苍蝇，则无需推出大炮。

解释为什么你不喜欢现在的代码。也许问题并不严重。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T08:56:09.397

返回指针是一种方法。

对我来说，另一种简单且原生的方法是在方法的签名中添加一个返回值。

```
int f(A & a)
{
    if(existing)
    {
        return ERROR_ALREADY_EXISTS;
    }
    else
    {
        A temp(handle);
        a = temp;
        return SUCCEEDED;
    }
} 
```

# visual-studio - Microsoft Help Viewer 2.0 在代理后不起作用

> ID：11307269
> 
> 赞同：16
> 
> 时间：2012-07-03T08:35:45.350
> 
> 标签：visual-studio, visual-studio-2012

问题：

由于代理身份验证错误，帮助查看器无法获取帮助目录或下载选取的项目。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-03T08:35:46.130

发生这种情况是因为帮助内容管理器和 BITS（后台智能传输服务）无法从 Microsoft 服务器获取帮助数据。连接到 Microsoft 服务器时，帮助内容管理器和 BITS 都不使用默认代理凭据。

使固定：

在以下位置找到帮助查看器配置

```
C:\Program Files (x86)\Microsoft Help Viewer\v2.0\HlpViewer.exe.config 
```

编辑配置文件并将以下内容添加到配置部分：

```
<system.net>    
    <defaultProxy useDefaultCredentials="true" >    
    </defaultProxy> 
</system.net> 
```

现在，在同一个文件夹中，为内容管理器创建配置：

```
HlpCtntMgr.exe.config 
```

并将相同的代理设置添加到配置部分。

打开注册表编辑器并找到以下节点：

```
HKLM\Software\Microsoft\Windows\CurrentVersion\BITS\ 
```

确保 UseLMCompat 值存在并将其设置为 0。如果缺少该值，请将其创建为 DWORD 值。

关闭注册表编辑器并重新启动后台智能传输服务。

# character-encoding - asp.net mvc 元描述字符问题

> ID：11307271
> 
> 赞同：1
> 
> 时间：2012-07-03T08:35:46.190
> 
> 标签：character-encoding, meta

我设计了这样的布局视图页面，

```
<!DOCTYPE html>
<html lang="tr">
<head>
   1 <META http-equiv=content-type content=text/html;charset=windows-1254>
   2 <META http-equiv=content-type content=text/html;charset=utf-8>
   3 <META http-equiv=content-type content=text/html;charset=iso-8859-9>
    <title>@ViewBag.Title</title>
    <meta name="description" content="@ViewBag.Description"/> 
```

当运行应用程序并查看浏览器源时，一些caharecters 出现如下无效。

```
<meta name="description" content="s&#252;r&#252;"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T20:17:48.990

你有 3 个不同的字符集元标记，这完全没有意义。

否则 META "description" 看起来不错 - 包含正确编码的 "sü;rü" 字符串值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-26T11:49:42.453

像这样使用`@HTML.Raw(...)`：

```
<title>@Html.Raw(ViewData["Title"])</title> 
```

# iphone - 如何从 IPA 中找到 iPhone 应用程序的版本号？

> ID：11307275
> 
> 赞同：23
> 
> 时间：2012-07-03T08:36:04.390
> 
> 标签：iphone, ios, versioning

我们正在尝试一种为我们的应用程序指定版本号的新方法。我希望能够检查我们正在构建的 IPA 是否具有我们想要的版本号。如何从 IPA 中获取版本号？

注意 - 我不是要从应用程序内的代码中找到它；我打开了一个终端并构建了 IPA 文件，我想知道要在 IPA 文件中查找什么。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-03T08:54:43.717

从您的终端执行以下操作

```
 //Unzip the file 
    unzip YourIPAFile.ipa

    //Open payload folder
    cd Payload

    //Open your .app file
    cd yourApp.app

    //Open the plist file
    open Info.plist 
```

您可以在 Bundle version key 下找到版本![在此处输入图像描述](../Images/e3ac36384e60b0a4c1bb6c81c05f5ca9.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-02-01T21:54:47.780

有比 PlistBuddy 和 grep 更好的方法：

```
unzip -d unzipped-ipa MyApp.ipa
defaults read "$(pwd)/MyApp.app/Contents/Info.plist" CFBundleVersion
rm -rf unzipped-ipa 
```

值得注意的是 using`defaults read`需要一个应用程序的绝对路径。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-01-22T23:27:23.060

1.  解压你的ipa文件

    ```
    unzip YourIPAFile.ipa 
    ```

2.  以下 plistBuddy 命令打印 Bundle Version

    ```
    /usr/libexec/PlistBuddy -c print Payload/NAME.app/Info.plist | grep CFBundleVersion 
    ```

    CFBundleVersion = 1.0

3.  以下 plistBuddy 命令打印 BundleVersion 字符串

    ```
    /usr/libexec/PlistBuddy -c print Payload/NAME.app/Info.plist | grep CFBundleShortVersionString 
    ```

    CFBundleShortVersionString = 1.0

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-03T08:41:29.493

它在 IPA/payload/NAME.app/Info.plist

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-04T04:44:06.617

我更喜欢使用 ProvisionQL。 [https://github.com/ealeksandrov/ProvisionQL](https://github.com/ealeksandrov/ProvisionQL) 它提供了 IPA 文件的快速查看（用两根手指触摸 IPA 文件并单击 Quick Look）。它显示如下信息：名称、版本、捆绑包 ID、设备系列、配置信息、证书、分发配置文件、权利等。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-10-03T17:24:26.320

您可以使用 tar 的功能提取单个文件，然后将结果流式传输到标准输出并将其通过管道传输到 plutil 命令（pl=> 属性列表），而无需写入和删除文件。额外的奖励，将其传递给 grep，寻找字符串“Version”，仅显示超过找到的模式的一行。

在下面的命令中，将 YourIPAFile.ipa 替换为您要检查的 ipa 文件的名称，并将 YourAppName.app 替换为 Plist.info 文件中的捆绑可执行文件的名称。对我来说，使用颤振，这两个值是相同的“Runner”，但它本质上是 tar 文件中 info.plist 文件所在的目录。

> tar -zxvOf YourIPAFile.ipa Payload/YourAppName.app/Info.plist | plutil -convert xml1 -r -o - -- - | grep -A 1 个版本

输出是：

```
x Payload/YourAppName.app/Info.plist
        <key>CFBundleInfoDictionaryVersion</key>
        <string>6.0</string>
--
        <key>CFBundleShortVersionString</key>
        <string>1.0.5</string>
--
        <key>CFBundleVersion</key>
        <string>1</string>
--
        <key>DTPlatformVersion</key>
        <string>14.0</string>
--
        <key>MinimumOSVersion</key>
        <string>9.0</string> 
```

或者更重要的是：

> tar -zxvOf YourIPAFile.ipa Payload/YourAppName.app/Info.plist | plutil -convert xml1 -r -o - -- - | grep -A 1 CFBundleVersion

```
x Payload/YourAppName.app/Info.plist
        <key>CFBundleVersion</key>
        <string>1</string> 
```

或者

> tar -zxvOf YourIPAFile.ipa Payload/YourAppName.app/Info.plist | plutil -convert xml1 -r -o - -- - | grep -A 1 CFBundleShortVersion

```
x Payload/YourAppName.app/Info.plist
        <key>CFBundleShortVersionString</key>
        <string>1.0.5</string> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-11T18:35:03.320

简单且更好的方法是您可以在 QuickLook 中查看详细信息。

现在有一个用于快速查看的插件，它为您提供了许多详细信息。

您必须安装[自制软件](https://brew.sh)。

[链接到这里](https://github.com/ealeksandrov/ProvisionQL)的 quicklook 插件。

# delegates - jQuery Delegate 没有像我想要的那样绑定

> ID：11307277
> 
> 赞同：0
> 
> 时间：2012-07-03T08:36:09.153
> 
> 标签：delegates, jquery

使用 jQuery 1.7

我无法将 Click 事件绑定到一些动态加载的内容。

我环顾四周，尝试了`.live`和`.delegate`，`.on`但我无法让它工作。

这是我的代码：

```
$(".fileexplorer_folderdlg").delegate(".delete", "click", function () {
        console.log("Hello world!");
    }); 
```

问题是，**.fileexplorer_folderdlg**是动态加载的。如果我使用**.fileexplorer**（不是动态加载的），它可以工作，但是我有更多的**.delete**类元素我不想绑定到（并且由于各种原因，这两个元素类都不能重命名或更改）。

我也尝试使用**.fileexplorer_folderdlg .delete**作为`.delegate`选择器，也没有用！

当然，我可以为我希望绑定的元素添加另一个独特的类，但这确实应该有效，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:44:12.533

我相信这会奏效：

```
$(document).on('click', '.delete', function() {
    if ($(this).closest('.fileexplorer_folderdlg').length) {
         console.log('hello, world!');
    }
}); 
```

甚至只是：

```
$(document).on('click', '.fileexplorer_folderdlg .delete', function() {
     console.log('hello, world!');
}); 
```

正如您所发现的，您无法绑定，`.fileexplorer_folderdlg`因为它是动态的。因此，您需要绑定一些静态元素，该元素*将*在将来的某个时间点包含该元素。

相反，这`document`会绑定到（但不幸的是，此后每次单击文档都会触发）。

**杰夫编辑**

尽管上面的代码不起作用，但稍微修改一下就可以了，尽管不是最理想的解决方案。

```
$(document).on('click', '.delete', function () {
        if($(this).closest(".fileexplorer") != null)
          console.log("Thanks for your help!");
    }); 
```

它可以工作，但是对于所有其他 .delete 类都会触发此事件，其中有很多。我不明白的是，为什么使用**.fileexplorer_folderdlg .delete**不起作用！

# magento - Magento 在注册表中包含手机号码字段

> ID：11307284
> 
> 赞同：0
> 
> 时间：2012-07-03T08:36:53.220
> 
> 标签：magento, custom-fields

有谁知道如何`Phone Numnber`在注册表单中调用字段，例如结帐页面中的字段。

请给我你的建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:33:33.503

你最好的计划是用“手机号码”重新标记“传真号码”（除非你真的需要传真号码。

这可以通过 app/locale// 中的 csv 模板进行更改

就我个人而言，我只会搜索“传真”这个词，然后从那里开始。

# c# - 显示、连接和断开无线网络

> ID：11307286
> 
> 赞同：4
> 
> 时间：2012-07-03T08:37:01.360
> 
> 标签：c#, connect, wireless, disconnect

我希望有人能给我你的帮助......（任何示例代码将不胜感激）

我打算做的是在无线网络检测到我的计算机的列表框中显示。

（连接和断开所选网络）

我打算在 C# 2010 中做到这一点

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T08:58:20.017

*   [CodePlex 上的托管 Wifi API](http://managedwifi.codeplex.com/)
*   [托管 Wifi API 代码示例](http://managedwifi.codeplex.com/SourceControl/changeset/view/41381#213980)
*   [SO post：在 C# 中管理无线网络连接](https://stackoverflow.com/questions/285665/managing-wireless-network-connection-in-c-sharp)

# jquery - 翻转卡不能正常工作jquery

> ID：11307289
> 
> 赞同：0
> 
> 时间：2012-07-03T08:37:09.333
> 
> 标签：jquery, jquery-animate, flip

每当我第一次点击卡片时，它都很顺利。但是每当卡片已经翻转时，我尝试单击返回以使其翻转，文本似乎消失了，但没有其他任何反应。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

 <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>flip cards</title>
    <style type="text/css">
        * {margin:0; padding:0;}            
        ul#cards li{list-style-type:none; margin:5px; }
        ul#cards img, #cards dl{width:200px; height:250px;background-color:orange;padding:5px;}
        ul#cards dl{display:none;}
        ul#cards dt{font-weight:bold;}

    </style>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>   
    <script type="text/javascript">
        $(document).on("ready", geladen);
        function geladen(){
            console.log("geladen");
            $('#cards img').on("click", turn);
            $('#cards dl').on("click", turnBack);

        }
        function turn(event){
            $(event.target)
                .animate({"width":"0", "margin-left":"100"}, 500, 
                    function(){
                        $(this).css("display", "none")                  
                        .next()
                        .css("display", "block")
                        .animate({"width":"200", "margin-left":"0"}, 500);
                    }
                )
        }
        function turnBack(event){
            $(event.target)
                .animate({"width":"0", "margin-left":"100"}, 500)
                .css("display", "none")
                .prev()
                .css("display", "block")
                .animate({"width":"200", "margin-left":"0"}, 500);
        }
    </script>
</head>

<body>
    <ul id="cards">
        <li>
            <img src="wesley.jpg" alt="Wesley Sneijder, middenvelder" />
            <dl>
                <dt>naam</dt>
                <dd>Wesley Sneijder</dd>
                <dt>rol</dt>
                <dd>middenvelder</dd>
                <dt>geboortedatum</dt>
                <dd>9 juni 1984</dd>
                <dt>club</dt>
                <dd>Inter Milan</dd>
            </dl>
        </li>
        <li>
            <img src="robin.jpg" alt="Robin van Persie, aanvaller" />
            <dl>
                <dt>naam</dt>
                <dd>Robin van Persie</dd>
                <dt>rol</dt>
                <dd>aanvaller</dd>
                <dt>geboortedatum</dt>
                <dd>6 augustus 1983</dd>
                <dt>club</dt>
                <dd>Arsenal</dd>
            </dl>
        </li>
    </ul>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:47:35.353

尝试在 $(this) 而不是 $(event.Target) 上进行折返动画

```
 function turnBack(event){
        $(this)
            .animate({"width":"0", "margin-left":"100"}, 500)
            .css("display", "none")
            .prev()
            .css("display", "block")
            .animate({"width":"200", "margin-left":"0"}, 500);
    } 
```

event.target 包含由于冒泡而实际单击的文本 (dt/dd)，而 this 指的是附加单击的元素。

# java - 显示器处于省电模式时 TimerTask 未运行

> ID：11307290
> 
> 赞同：0
> 
> 时间：2012-07-03T08:37:19.820
> 
> 标签：java, swing

我用 java.util.TimerTask 扩展了我的 java 类。我正在定期设置调度程序，例如 14:00、14:30、15:00 等。

如果我在没有显示器省电模式的情况下运行调度程序，它会在指定时间正常运行，而当我将显示器设置为间隔 1 分钟的省电模式时，TimerTask 会延迟或处于睡眠模式。

稍后当我们在 1 小时内使用机器时，TimerTask 将运行 2 次。

# c# - 为表单上的按钮分配和更改事件的推荐方法是什么

> ID：11307297
> 
> 赞同：0
> 
> 时间：2012-07-03T08:38:01.377
> 
> 标签：c#, winforms

我有一个表格，我想在各种情况下“可重复使用”。主要是显示和打印信息。该表单有 2 个按钮和一个列表框

我希望能够将一个对象传递给表单，告诉表单按下按钮时要做什么（例如显示一个消息框，打印出列表框的内容或关闭表单）

我正在使用 if 语句来确定要分配给我的按钮的事件......有没有更好的方法来做到这一点？

理想情况下，我想从初始调用代码设置事件，而不是使用名为“Action”的枚举

```
 ==========calling code=================
                var information = new Information();                
                information.Action = Action.Print;
                var frmInformation = new frmInformation(information);
                frmInformation.Show(this);

    ====================information class======================
    public class Information
        {
            public delegate void OkButtonDelegate();        
            public IList<string> information{ get; set; }

            public Information()
            {
                information = new BindingList<string>();
            }

    ===============information form======================
     public partial class frmInformation : Form
        {
            private readonly Information _information;
            public Information.OkButtonDelegate _delegate;   

            public frmInformation(Information information)
            {
                _information = information;
                InitializeComponent();
                SetupForm();
            }

            private void SetupForm()
            {                         
                if (_information.Action== Action.Print)
                    _delegate = new Information.OkButtonDelegate(Print);
                else if (_information.Action == Action.Close)
                    _delegate = new Information.OkButtonDelegate(Close);
              }

        private void ShowMessageBox()
                {
                    MessageBox.Show("lalalalalala");
                }

                public static void Print()
                {
                    //take the contente out of listbox and send it to the printer
                }

 private void btnSend_Click(object sender, EventArgs e)
        {
            _delegate();

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:04:27.813

你可以这样改

```
switch (_information.Action) {
   case Action.Print:
      btnSend.Click += (s,e) => Print();
      break;
   case Action.Close:
      btnSend.Click += (s,e) => Close();
      break;
} 
```

您不需要委托类型、生成的 Click 处理程序和 _delegate 变量。

# image - 在 GWT 中调整图像大小并在画布上绘制它们

> ID：11307300
> 
> 赞同：1
> 
> 时间：2012-07-03T08:38:19.627
> 
> 标签：image, gwt

我查看了[这个线程](https://stackoverflow.com/questions/2260458/scaling-an-image-in-gwt)，但这些方法已被弃用，对我来说甚至不起作用。我试图做类似的事情但失败了。我的示例代码：

```
public interface Resources extends ClientBundle{
    @Source("images/castle.png")
    ImageResource castleIcon(); 
```

以及绘制图像的类：

```
private void drawImage() {

        Resources res = GWT.create(Resources.class);
        final Image icon = new Image(res.castleIcon().getSafeUri());
        icon.addLoadHandler(new LoadHandler() {

            @Override
            public void onLoad(LoadEvent event) {
                icon.setPixelSize(100, 80);                 
            }
        });

        context.drawImage(createImageElement(icon), x - 65, y - 20);
    }

private ImageElement createImageElement(Image image) {
    return ImageElement.as(image.getElement());
} 
```

我已经尝试过[这种方法](http://code.google.com/p/gwt-examples/wiki/gwt_hmtl5)，但它无法呈现透明背景

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:16:29.657

透明度应该适用于画布上的 PNG。你确定你的图像真的是透明的吗？也许您的 PNG 在某种程度上与画布实现不兼容。尝试具有 alpha 透明度的适当 24 位 PNG...

# c++ - 碳化物c ++ symbian编译器错误

> ID：11307304
> 
> 赞同：1
> 
> 时间：2012-07-03T08:38:43.597
> 
> 标签：c++, symbian, nokia, carbide

我在碳化物 c++ 上创建了一个项目，但出现错误

```
sbs returned with exit value = 1 
```

我没有对碳化物创建的代码进行任何更改。我刚刚创建并构建了项目，但它引发了错误。

我用谷歌搜索了错误，找不到任何解决方案。有没有人收到过这个错误代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:33:28.310

我犯了同样的错误......

尝试更改构建选项...

当我尝试使用 armv5 而不是 GCCE 进行编译时，就会发生这种情况。

更改它，您的问题可能会得到解决。

我是 symbian/carbide 的新手，但它解决了我的问题！

# ibm-midrange - 创建接受对象名称作为参数的 iSeries 命令

> ID：11307308
> 
> 赞同：5
> 
> 时间：2012-07-03T08:39:03.650
> 
> 标签：ibm-midrange, control-language

我正在尝试在 iSeries 上创建一个新命令，其中一个参数必须是使用标准 LIBRARY/FILE MEMBER 语法的文件名，例如

```
MYCMD FILE(MYLIB/MYFILE MYMEMBER) 
```

甚至

```
MYCMD FILE(MYLIB/MYFILE) MEMBER(MYMEMBER) 
```

我试过了 ：

*   使用带有 *CHAR 类型的 FILE 参数创建 PARM 语句
*   使用 ELEM 语句创建特殊类型

但我找不到如何创建一个接受限定对象名称值的参数，例如与 CPYTOIMPF 一起使用的 FROMFILE 参数。

*更新*

JamesA 的答案工作正常，但不知何故我在我的 CL 变量中得到了两个额外的字符：

**命令**

```
 PARM       KWD(FILE) TYPE(FNAME) PROMPT('CL +                  
                         source' 1)                                        
FNAME:      ELEM       TYPE(FILE) PROMPT('File')                        
            ELEM       TYPE(*NAME) LEN(10) PROMPT('Source +                
                         member')                                          
FILE:       QUAL       TYPE(*NAME) LEN(10)              
            QUAL       TYPE(*NAME) DFT(*CURLIB) SPCVAL(*CURLIB) PROMPT('Library') LEN(10) MIN(0) 
```

**CL**

```
PGM        PARM(&PFIC &OUTFILE &CODEPAGE)        
DCL        VAR(&PFIC) TYPE(*CHAR) LEN(32)        
DCL        VAR(&LIB) TYPE(*CHAR) LEN(10)         
DCL        VAR(&FILE) TYPE(*CHAR) LEN(10)        
DCL        VAR(&MEMBER) TYPE(*CHAR) LEN(10)      

CHGVAR     VAR(&FILE) VALUE(%SST(&PFIC 3 10))  
CHGVAR     VAR(&LIB) VALUE(%SST(&PFIC 13 10))              
CHGVAR     VAR(&MEMBER) VALUE(%SST(&PFIC 23 10)) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T12:20:48.780

您需要使用[Qualifier Definition](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/cl/qual.htm)。

**命令**

```
 CMD
    PARM KWD(FILE) TYPE(Q1) PROMPT('File')
    PARM KWD(MBR) TYPE(*NAME) LEN(10) DFT(*FIRST) SPCVAL(*FIRST) PROMPT('Member')

Q1: QUAL TYPE(*NAME) LEN(10) 
    QUAL TYPE(*NAME) LEN(10) DFT(*LIBL) SPCVAL(*LIBL) PROMPT('Library') 
```

**CL**

```
PGM PARM(&FILELIB &MBR)

DCL VAR(&FILELIB) TYPE(*CHAR) LEN(20)
DCL VAR(&MBR) TYPE(*CHAR) LEN(10)
DCL VAR(&FILE) TYPE(*CHAR) LEN(10)
DCL VAR(&LIB) TYPE(*CHAR) LEN(10)

CHGVAR VAR(&FILE) VALUE(%SST(&FILELIB 1 10))
CHGVAR VAR(&LIB) VALUE(%SST(&FILELIB 11 10))

. . .

ENDPGM 
```

# asp.net-mvc-3 - 将 Controller 中的多个参数传递给 MVC3 Razor 视图引擎中的视图

> ID：11307309
> 
> 赞同：0
> 
> 时间：2012-07-03T08:39:13.327
> 
> 标签：asp.net-mvc-3

如何使用相同的操作从控制器发送两个模型以查看

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:44:29.523

假设您的两个模型是 MyModel 和 MyOtherModel 的实例。

我可以想到两个选择：

1.  将 MyModel 作为 Model 传递，并将 MyOtherModel 放在 ViewBag 中。
2.  使用包含 MyModel 的属性和包含 MyOtherModel 的另一个属性创建类 MyBigModel，并将 MyBigModel 作为模型传递。

选项 1 确实不是您理想的解决方案。由于您的模型应该与您的视图相关（这就是我更喜欢 ViewModel 这个名称的原因），我真的会选择选项 2。

选项 2 如下所示：

```
public class MyBigModel
{
    public MyModel { get; set; }
    public MyOtherModel { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T08:44:59.673

使用 ViewModel - 创建一个包含两个模型的模型，并将其发送到视图

```
public class MyCustomViewModel
{
     public MyFirstModel First { get; set; }
     public MySecondModel Second { get; set; }
} 
```

在控制器中

```
public ActionResult Action()
{
     MyFirstModel first = new MyFirstModel();
     MySecondModel second = new MySecondModel();

     MyCustomViewModel model = new MyCustomViewModel();
     model.First = first;
     model.Second = second;

     return View(model);
} 
```

通常，顾名思义，您应该为应用程序中的每个视图使用自定义 ViewModel，然后使用[AutoMapper](http://automapper.org)等工具将这些视图模型来回映射到域模型。视图模型为您组合视图提供了极大的灵活性，因为您可以在不更改域的情况下为它们赋予任何形状和形式。

# jboss - 如何在 jboss-7 中更改端口号

> ID：11307316
> 
> 赞同：40
> 
> 时间：2012-07-03T08:39:34.643
> 
> 标签：jboss, jboss7.x, jboss6.x

我正在使用 jboss-7，我想将端口号从 8080 更改为 7001。我需要更改哪个文件？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-03T08:49:42.013

该文件是`$JBOSS_HOME/standalone/configuration/standalone.xml`. 找到`<socket-binding-group>`并`<socket-binding>`在那里。

**编辑**

有多种方法可以做到这一点。推荐的方法是使用管理控制台。如果 JBoss AS 在您的本地计算机上运行，​​请打开 URL`http://localhost:9990/console/App.html#socket-bindings`并在那里编辑套接字绑定。我在 Wildfly 8.1.0 Final 上测试过，不知道这个 URL 对其他版本的 JBoss AS 是否有效。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-03-04T08:06:55.193

开始使用时

```
./standalone.sh -b 0.0.0.0 -Djboss.socket.binding.port-offset=1000 & 
```

- 对于 Linux

```
standalone.bat -Djboss.socket.binding.port-offset=1000 
```

- 窗户

```
here 1000 is the offset value. 8080 + 1000 = 9080 the application will start 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-15T13:52:19.360

转到安装目录....我的目录是这样的

```
C:\wildfly-10.0.0.CR5\standalone\configuration\ 
```

找到`standalone.xml`文件，打开并更改`8080`里面的http端口

```
<socket-binding-group> 
```

在这里，我将端口号 8080 更改为 3333

```
<socket-binding name="http" port="${jboss.http.port:3333}"/> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-21T20:46:45.657

对于 Windows：

独立的.bat

正在使用

独立的.conf.bat

在记事本中打开

添加最后 2 行（如下所示，即 2 个“Alter Port Settings Offset”行）（前 3 行应该已经存在...并提供面包屑以放置您需要的 2 个新行）

```
rem # Make Byteman classes visible in all module loaders
rem # This is necessary to inject Byteman rules into AS7 deployments
set "JAVA_OPTS=%JAVA_OPTS% -Djboss.modules.system.pkgs=org.jboss.byteman"

REM NEW LINE HERE Alter Port Settings Offset
set "JAVA_OPTS=%JAVA_OPTS% -Djboss.socket.binding.port-offset=1000" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-14T07:21:26.447

将http的套接字绑定更改为您想要在jboss的standalone.xml文件中的套接字绑定组中使用的所需端口号。例如，我使用8090作为我的端口号。

```
<socket-binding name="http" port="8090"/> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-10T07:04:46.583

进入 jboss 目录 exp - jboss-7.0.0.CR1\jboss-7.0.0.CR1\standalone\configuration

打开standalone.xml 文件，然后根据您更改端口号。

[![在此处输入图像描述](../Images/3adb44c0001391f274c35e79e77c2190.png)](https://i.stack.imgur.com/5J7ke.jpg)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-24T09:49:42.650

在eclipse中，我打开port-offset（对应于standalone.xml）并将jboss.socket.binding.port-offset从0修改为1000 [![在此处输入图像描述](../Images/94d5c2ecf7c41fababe40b4846a62d77.png)](https://i.stack.imgur.com/So0e2.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-12T20:18:48.283

要在本地更改 JBoss 的端口，请在运行多个实例时执行以下步骤。

1.  在 JBoss 文件夹中，转到standalone.xml。
2.  搜索
3.  将 "port-offset=${jboss.socket.binding.port-offset:0} 更改为 100，如下所示 port-offset="${jboss.socket.binding.port-offset:100}
4.  然后当运行standalone.bat 时，Jboss 将在端口 10090 上运行

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-10T09:17:34.473

如果您使用 Intellij（需要 Ultimate）Jboss/Wildfly 配置，您可以在运行配置窗口中轻松编辑端口偏移。

[![运行配置 jboss 端口更改](../Images/8abc001390e5a50efc245e478f61ba4e.png)](https://i.stack.imgur.com/T1xkX.jpg)

# html - 4 Column Position 绝对布局

> ID：11307317
> 
> 赞同：1
> 
> 时间：2012-07-03T08:39:42.643
> 
> 标签：html, css, css-position, fluid-layout

我有一个布局设置，可以在这里查看：http: [//jsfiddle.net/Pn3ts/](http://jsfiddle.net/Pn3ts/)

这一切都很好，但我需要在整个地段设置一个最大/最小宽度。

所以我假设这样做我会添加`position: relative;`到`.row`课堂上。但是，如果我这样做，每个人的背景`.col`似乎都会崩溃。（见这里：http: [//jsfiddle.net/YDBYK/](http://jsfiddle.net/YDBYK/)）

我将如何工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T08:43:29.273

给`html`, `body`, 和`.row`100% 的高度，它会起作用。

```
html, body {
    height: 100%;
}

.row {
    position: relative; 
    width:100%; 
    height: 100%;
    margin: 0; 
    max-width: 400px; 
    min-width: 300px;
} 
```

jsFiddle：http: [//jsfiddle.net/YDBYK/1/](http://jsfiddle.net/YDBYK/1/)

# javascript - Joomla 2.5 菜单按钮不起作用

> ID：11307318
> 
> 赞同：0
> 
> 时间：2012-07-03T08:39:44.177
> 
> 标签：javascript, joomla, mootools, joomla2.5

我正在建立一个 Joomla 网站，现在我遇到了一个问题，因为按钮已经停止工作。这些是右上角的保存、保存和关闭、取消等按钮。

我可以从扩展、模块等下的列表中进行选择，但是当我单击一个按钮时，它会显示“请先从列表中进行选择”，所以我无法对它们做任何事情。

我想知道我的javascript是否已损坏。

我做的最后一件事是我的 default.css 文件，之前我一直通过 ftp (cyberduck) 上传图像。这会损坏任何文件吗？

我使用的版本是 Joomla 2.5.6。我还在 Joomla 中与 Seblod CCK 合作。

我在论坛中看到过 Mootools，但由于上面解释的选择问题，我无法启用/禁用它来测试。

我很感激任何人都可以为此提供的任何帮助/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T15:27:04.200

如果可能，启用调试模式并查看是否有任何消息显示问题来自何处。您不必在后端执行此操作，您可以编辑 configuration.php 并更改 public $debug = '0'; 公开 $debug = '1';

# actionscript-3 - 构造函数之外的实例化有什么区别吗？

> ID：11307319
> 
> 赞同：4
> 
> 时间：2012-07-03T08:39:44.390
> 
> 标签：actionscript-3

考虑这个简单的 AS3 类。

```
package
{
     import flash.display.Sprite;
     import flash.display.MovieClip;

     public class MySprite extends Sprite
     {
         private var someMC:MovieClip = new MovieClip();

         public function MySprite()
         {
              super();

              addChild(someMC);
         }
     }
} 
```

和这个：

```
package
{
     import flash.display.Sprite;
     import flash.display.MovieClip;

     public class MySprite extends Sprite
     {
         private var someMC:MovieClip;

         public function MySprite()
         {
              super();

              someMC = new MovieClip();
              addChild(someMC);
         }
     }
} 
```

这是同一件事，还是还有更多？

我猜是因为在第一个示例中，MovieClip 似乎在调用构造函数之前就存在（何时发生，有什么好处？）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T08:42:34.627

全部都是一样。编译器将您的第一个示例转换为第二个示例。唯一的区别是您可以在将赋值放入构造函数时控制实例化顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:47:39.007

`Actionscript`是一种相当高级的语言，只要你不讨厌它的垃圾收集，它就会对你可以扔给它的大多数东西感到非常冷淡。话虽如此，即使是较低级别的语言也往往不在乎您使用哪种方式，因此这实际上归结为样式问题。

就个人而言，我尝试只初始化我想要调整初始值的常量和变量，它们通常位于构造函数之上；这样他们就很容易被发现和改变，而不是被一大堆`new`这样`()`那样的东西弄糊涂了。

# iphone - 如何区分通话后重新启动的应用程序与从跳板启动的应用程序？

> ID：11307322
> 
> 赞同：0
> 
> 时间：2012-07-03T08:39:49.493
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我希望我的应用程序具有不同的功能，具体取决于它是在后台仍处于活动状态（即未完全退出）时启动还是在通话后重新启动时启动。可能的？

我在 stackoverflow 上找到的答案主要与如何在通话后恢复有关。

编辑：我在 2008 年的苹果论坛上找到了这个问题的答案，其中涉及根据您的平均通话时间进行扣除，看起来这仍然是最有效的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:44:35.077

在您的 appdelegate 中，有两种方法将在您的应用程序运行时调用，例如一个电话进来：

```
- (void)applicationWillResignActive:(UIApplication *)application {
    // Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
    // Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
} 
```

并在您的应用再次激活时调用。

```
- (void)applicationDidBecomeActive:(UIApplication *)application {
    // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
} 
```

如果您的应用程序在后台运行或在通话开始时未运行，则~~肯定~~无法判断是否已拨打电话。

# iphone - CGImageDestinationCreateWithData 不创建 CGImageDestinationRef 对象

> ID：11307328
> 
> 赞同：3
> 
> 时间：2012-07-03T08:40:19.643
> 
> 标签：iphone, objective-c, ios, automatic-ref-counting, core-foundation

我敢肯定这很简单，但我就是找不到。

我正在尝试`CGImageDestinationRef`使用该`CGImageDestinationCreateWithData`函数创建一个，但它返回给我一个零。

函数文档：

[http://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CGImageDestination/Reference/reference.html#//apple_ref/c/func/CGImageDestinationCreateWithData](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CGImageDestination/Reference/reference.html#//apple_ref/c/func/CGImageDestinationCreateWithData)

该函数非常简单，但我似乎无法让它返回一个对象。我在一个 ARC 类中，所以函数周围有一个桥接包装器。

我的代码片段：

```
NSMutableData *data = [[NSMutableData alloc] init];
CGImageDestinationRef imageDestination = nil;

imageDestination = (__bridge CGImageDestinationRef) CFBridgingRelease(CGImageDestinationCreateWithData ((__bridge CFMutableDataRef)data, (__bridge CFStringRef)type, 1, NULL));

if (!imageDestination)
    NSLog(@"This is always called. :-("); 
```

如果有人发现我做一些愚蠢的事情，我将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T10:14:00.300

我已经解决了它并在这里发布答案，因为它可能会在未来帮助其他人。

我有一个类型设置为@“image/jpg”，这似乎不起作用（文档建议它应该这样做）。

当我将类型更改为@“public.jpeg”时，该函数开始按预期工作。

在下面的评论中使用 Jim 的提示，这就是我最终从 URL 中找到正确的 UTI 类型的方法：

`NSString *uti = CFBridgingRelease(UTTypeCreatePreferredIdentifierForTag(kUTTagClassMIMEType, (__bridge CFStringRef)[NSString stringWithFormat:@"image/%@", url.pathExtension], kUTTypeImage));`

# mysql - rails 将geoip资源保存在同一个数据库或单独的数据库中哪个更好？

> ID：11307333
> 
> 赞同：1
> 
> 时间：2012-07-03T08:40:34.133
> 
> 标签：mysql, ruby-on-rails, database, multiple-databases

我需要将城市/国家/地区资源从[http://www.maxmind.com/app/geoip_resources](http://www.maxmind.com/app/geoip_resources)迁移到我的应用程序。

我有两种方法： 1\. 创建一些表并在那里保存数据 2\. 创建另一个数据库并有多个数据库连接。

问题：geoip 可能会更新，性能。它应该经常使用这些资源。

保存geoip数据的最佳方法是什么？

感谢提前！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:56:06.617

我会仔细研究将内容放在主数据库之外的原因。

如果这是唯一应该使用此数据的应用程序，我会采用更简单的方法，将其简单地放在常规 Rails 应用程序数据库中（多个数据库连接不是 Rails 可以轻松处理的，你可能会失去像 AR 这样的优点查询缓存等）。

一般经验法则：如果您真的不需要它 - 省去麻烦并将其放入您的应用程序已经使用的一个数据库中。如果需要，您仍然可以稍后将其移出该数据库到共享数据库。

请注意，将 GeoIP DB 复制到所有这些系统也可能是一种选择，因为 GeoIP DB 不是由用户更新，而是仅在新数据集出现时以特定间隔更新。

# java - 如何使用 Apache Felix 在 OSGi 中归档 AOP

> ID：11307338
> 
> 赞同：1
> 
> 时间：2012-07-03T08:40:53.493
> 
> 标签：java, osgi, aop, aspectj, bnd

我目前正在开发一个 OSGi 项目，其中某些部分非常适合 AOP 编程。没有很多 AOP 与 OSGi 结合的经验，我想知道如何在 OSGi 环境中最好地做 AOP？我已经阅读了一些关于这个问题的文章，但没有找到适合我的解决方案。例如，有一个 AspectJ 的 Equinox Incubator 项目，但最后一次构建是在 2008 年。但是由于我使用的是 Apache Felix 和 Bnd(tools)，所以我想避免使用 Equinox 的某些东西。顺便说一句，编织过程的一个要求是它应该在编译时，也可能在稍后的加载时。此外，我正在使用 Ant 和 Bnd 来构建我的包。因此，如果我也可以将 Aspectj 集成到这个构建过程中，那就太好了。

希望有人可以分享这样一个用例的经验。

**编辑**

到目前为止的总结：

*   正如Christian Schneider在他的回答中提到的那样，有可能使用Spring AOP（但可惜不是我要找的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T13:18:04.863

我想你可以看看 Aries JPA。最近在那里添加了加载时间编织。似乎在较新的 OSGi 规范中也有一个编织钩子。所以现在支持 AspectJ 等可能是完全可能的。我还没有看到它在行动。

一个大问题当然是。为什么需要 AOP，你想用它做什么？一般来说，在大多数情况下，AOP 看起来比实际更简单，并且给您带来的好处比您最初想象的要多。所以我的建议是在过度使用 AOP 之前要小心并三思而后行。

# mysql - 如何检查 SQL 查询是否在事务中运行？

> ID：11307344
> 
> 赞同：0
> 
> 时间：2012-07-03T08:41:03.730
> 
> 标签：mysql, sql

我有一个简单的用例要解决。想象一下，有人告诉你“嘿，这组特定的查询不是事务性的！” 而你的工作就是否认这种说法。怎么可能做到这一点？

假设：

*   用户可以通过触发的“单击一个魔术按钮”来重现这一点，让我们说 3 以下`INSERTs`
*   我们有权访问`mysql client`和所有特权
*   我们无权访问应用程序的代码库，因此无法从代码角度进行集成测试来验证这一点
*   我们正在使用`MySQL`服务器`InnoDb`
*   我们可以根据需要调整 MySQL 配置（慢查询等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:54:21.213

输出中有一个事务部分：

```
SHOW ENGINE INNODB STATUS\G 
```

看起来像（来自我的本地 MySQL 目前没有运行任何查询）：

```
TRANSACTIONS
------------
Trx id counter 900
Purge done for trx's n:o < 0 undo n:o < 0
History list length 0
LIST OF TRANSACTIONS FOR EACH SESSION:
---TRANSACTION 0, not started
MySQL thread id 47, OS thread handle 0x7fc8b85d3700, query id 120 localhost root
SHOW ENGINE INNODB STATUS 
```

不知道你能不能主动监控这个信息，让你在3次插入操作的瞬间就能准确的看到。您可能可以在这里使用您的最后一个项目符号（使用慢查询）...

此外 MySQL 有命令计数器。可以通过以下方式访问此计数器：

`SHOW GLOBAL STATUS LIKE "COM\_%"`

每次执行命令都会增加与其关联的计数器。与事务相关的计数器是`Com_begin`、`Com_commit`和`Com_rollback`，因此您可以执行代码并监控这些计数器。

# c# - 如何有效地更改代码（删除已失效的代码）

> ID：11307345
> 
> 赞同：1
> 
> 时间：2012-07-03T08:41:05.930
> 
> 标签：c#, asp.net

我有一个 ASP.NET Web 应用程序，它本质上是我们的 Intranet 站点。我在行政办公室的员工管理页面上取得了很大进展。它与 SQL 服务器数据库相关联，我使用的是三层设计（对象、逻辑、数据访问）。它全部被审查并且全部被接受，除了！对于管理假期和假期历史的部分。

在详细介绍之前，我的问题是，如何有效地“解开”不再需要的代码？

例如：以前我将每个 VacationDay 视为具有自己历史的自己的实体。这样我就可以追踪某一天的历史。为了帮助跟踪，我有一个名为 VacationDayAction 的枚举，其中包括诸如 .Submitted、.RequestDenied、.CancellationRequested 等选项。这是为了为每一天提供一丝不苟的细节。然后确定我们不再需要它。然而，我们仍然需要 VacationDays 和它的所有基本功能（保存天数、获取天数等），但现在我们不再需要任何与“历史”相关的类。

我的问题是，当我在 VS 中右键单击一个不再需要的类并转到“显示所有引用”时，我会得到大量分散在几个页面上的结果。我需要摆脱所有这些，而不破坏应用程序的其余部分。难道没有某种“智能”技术或方法可以轻松解开不再需要的部件吗？这尤其困难，因为我所做的 90% 都很好，需要保持原样。然而，分散在这 90% 中的是 10% 不再需要的东西。我也不能只使用 delete 键，因为随着每个引用的删除，我需要确保对该引用的任何依赖关系也以它们不会调用不被调用的东西的方式修复那里了。而且我仍然需要应用程序是可编译状态，

为了让您了解我的低水平经验，我在两年前开始时从未使用过 C#、ASP.Net 或 Visual Studio。当我开始学习之后，有人教我可以使用断点时，这让我大吃一惊。然后当我了解多层设计时，它真的让我大吃一惊。我想知道是否没有一些技术或技巧或功能可以在这种情况下提供帮助，在这种情况下，你必须“解开”并扔掉不必要的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T09:19:11.283

这不是一个简单的问题。事实上，我想说这是任何系统开发人员面临的主要挑战之一。如何处理和摆脱不使用的旧代码。有很多关于这方面的文献，很少有真正优秀的答案。一本好书可能是 Michael Feathers 的《**有效地处理遗留代码**》，它处理了许多相关的问题。虽然读起来并不轻松，可能需要一些时间才能读完，但它可能会帮助你成为更好的编码人员，尤其是在这类任务上做得更好。

也许你可以看看 Resharper 工具？( [http://www.jetbrains.com/resharper/](http://www.jetbrains.com/resharper/) ) 它是一种生产力工具，除其他外，以灰色显示“死”代码（未使用的代码），并允许您将其删除。它还将帮助您从每个类中删除未使用的引用（同样，它们将变灰并让您自动删除它们）。

绘制图表，其中每个主要代码/组件都是一个框，用一条线将其链接到任何相关组件，这可能有助于您获得更好的概览；尝试绘制一个层次结构，显示代码的不同部分是如何相关和依赖的。

The bottom line as far as I know, is that you just have to muddle through it, commenting out code a little at a time, then recompiling and testing it. If it still works, fine, now you can remove the commented out code completely. This would be easier if you had unit-tests covering your code, but I take it as a given that you don't, as is unfortunately often the case.

# c# - 在服务器端检查客户端验证成功/失败

> ID：11307346
> 
> 赞同：-1
> 
> 时间：2012-07-03T08:41:07.480
> 
> 标签：c#, javascript, jquery, .net, jquery-plugins

如何从我的服务器端代码检查网页中没有 javascript 错误？我的意思是仅在运行时验证错误，而不是语法错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:35:45.247

如果您可以为您的 javascript 代码定义“结束”，那么您可以在此“结束”之后使用 ajax 向服务器发送确认一切正常。

# c# - “是” c# 运算符就像 java 中的 instanceof 一样吗？

> ID：11307348
> 
> 赞同：2
> 
> 时间：2012-07-03T08:41:12.037
> 
> 标签：c#

我刚刚发现了这个运算符，我想知道它是否可以安全使用。我的意思是，在 java 中，我们的老师总是告诉我们避免使用 instanceof()，因为它破坏了多态性并且经常显示出糟糕的编码。

提前Thks。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T08:43:22.830

它是安全的'。至少使用此检查更安全，而不是仅强制转换并假定类型！您可能更喜欢使用[as](http://msdn.microsoft.com/en-us/library/cscsdfbt%28v=vs.71%29.aspx)运算符，如果合适，它会强制转换为所需的类型，否则返回 null。只记得检查空值。

但通常，显式类型检查表明您的模型有些地方不太正确。有时这是不可避免的，但如果你经常这样做，我会退后一步，重新考虑你的模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T08:44:43.097

```
if (obj is FooObject)
{
    ((FooObject)obj).Foo();
} 
```

相当于

```
if (obj instanceof FooObject) {
    ((FooObject)obj).foo();
} 
```

# xslt - 使用 XLST 将相邻链接转换为列表

> ID：11307349
> 
> 赞同：0
> 
> 时间：2012-07-03T08:41:14.203
> 
> 标签：xslt

我正在寻找有关 XSLT 转换的帮助。

我目前正在转换与格式匹配的链接：

```
<link type="button" url="/page.html" text="Do something" /> 
```

通过使用变换：

```
<xsl:template match="link">
    <a target="_blank" href="{@url}" title="{@text}">
        <xsl:if test="@type='button'">
            <xsl:attribute name="class">btn</xsl:attribute>
        </xsl:if>
        <xsl:value-of select="@text" />
    </a>
</xsl:template> 
```

这给了我输出：

```
<a class="btn" title="Do Something" href="/page.html" target="_blank">Do Something</a> 
```

但现在我希望能够检测到多个“按钮”类型的链接何时组合在一起，如下所示：

```
<link type="button" url="/page.html" text="Do something" />
<link type="button" url="/page.html" text="Do something else" /> 
```

并像这样输出：

```
<ul class="btns">
    <li><a href="page.html" title="Do something" target="_blank" class="btn testing">Do something</a></li>
    <li><a href="page.html" title="Do something else" target="_blank" class="btn testing">Do something else</a></li>
</ul> 
```

有人可以帮忙吗？

谢谢，C。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:59:24.903

逻辑需要进入链接元素父级的模板。假设您使用的是 XSLT 2.0，它将是这样的：

```
<xsl:template match="parent">
  <xsl:for-each-group select="*" group-adjacent="node-name()">
    <xsl:choose>
      <xsl:when test="self::link">
        <ul>
          <xsl:apply-templates select="current-group()"/>
        </ul>
      </xsl:when>
      <xsl:otherwise>
        <xsl:apply-templates select="current-group()"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:for-each-group>
</xsl:template> 
```

# php - 不能调用任何其他函数，然后死我的代码

> ID：11307350
> 
> 赞同：0
> 
> 时间：2012-07-03T08:41:15.500
> 
> 标签：php, html, ajax

我正在使用 ajax 和 php 构建登录。我的代码运行良好，直到我在我的 php 代码中调用另一个类。当我的 php 代码死掉时，我得到了 int 甚至放了一个 var_dump。你可以在我的 php 代码中看到我已经将它注释掉了，因为我真的想做

看法：

```
<body>
<p>&nbsp;</p>
 <div id="content">
  <h1>Login Form</h1>
 <form id="form1" name="form1" action="stack.php"  method="post">
<p>
  <label for="username">Username: </label>
  <input type="text" name="username" id="username" />
</p>
<p>
  <label for="password">Password: </label>
  <input type="password" name="password" id="password" />
</p>
<p>
  <input type="button" id="login" name="login" value="submit"/>
   </p>
  </form>
   <div id="message"></div>
  </div>
    <script type="text/javascript">
       $(document).ready(function(){
       $("#login").click(function(){
       var action = $("#form1").attr('action');
       var form_data = {
         username: $("#username").val(),
         password: $("#password").val(), 
         is_ajax: 1
    };
    $.ajax({
        type: 'POST',
        url: action,
        data: form_data,
        success: function(data){
            if(typeof(data) != 'undefined' && (data == 'success' || data == 'error')){
                if(data == 'success'){
                    $("#form1").slideUp('slow', function() {

                        $("#message").html("<p class='success'>You have logged in
                                      successfully!</p>");
                    });
                } else if(data == 'error'){
                    $("#form1").slideUp('slow', function() {
                        $("#message").html("<p class='error'>Invalid username and/or
                         password.</p>");
                    });
                }
            } else {
                console.log("här");
                console.log(data);
                $("#message").html("<p class='error'>Error to connect to server</p>");   
            }
        }
    });
    return false;
});
});
   </script>
  </body>
 </html> 
```

PHP：

```
 class DologinHandler{  
    public function Login(){ 
     if(isset($_REQUEST['is_ajax']))
    {
        $username = $_REQUEST['username'];
        $password = $_REQUEST['password'];

      //  $UserHandler = new UserHandler();
        //$UserHandler -> controllDB($username,$password);
        if($username == 'demo' && $password == 'demo')
        {
            exit('success');
        } else {
            exit('error');
          }
      }
  }

 }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:12:40.947

如果您帖子中的代码是您编写的所有 PHP 代码，那么它不会做任何事情。如果您的客户期望“成功”或“错误”，那么它获得空字符串的事实可能是您收到错误消息的原因。

在 PHP 中，当您声明一个类时，代码仅在您实例化该类时执行。您可以通过将 Waygood 在他的答案中编写的两行代码添加到您的 stack.php 文件的底部来做到这一点。

```
<?php
/* All your PHP code */

$loginclass=new DologinHandler();
$loginclass->Login(); 
```

而且，作为一种良好的做法，如果上面编写的代码没有附加内容，请去掉`?>`底部的 ，这样可以为您节省很多麻烦。虽然与这个问题无关。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-03T08:45:50.543

尝试

```
echo 'success';
return true; 
```

代替

```
exit('success'); 
```

同样在函数结束时，您应该处理非 ajax 登录

stack.php 应该是这样的：-

```
$loginclass=new DologinHandler();
$loginclass->Login(); 
```

# php - PHP exec（'git'）失败

> ID：11307351
> 
> 赞同：2
> 
> 时间：2012-07-03T08:41:16.230
> 
> 标签：php, git, apache, exec

具体来说，我试图让[ViewGit](http://viewgit.fealdia.org/)在 PHP/Apache/Windows 安装上工作。

PHP 似乎无法运行`exec('git');`。

`exec('whoami');``exec()`工作得很好，所以禁用它不是问题。

Apache 在它自己的用户帐户下运行 - 如果我以该用户身份登录并尝试`git`在命令行上运行，我会得到预期的结果。该帐户还拥有使用 /Program Files/Git 文件夹执行所有操作的完全权限。

如果我`exec('git');`在本地机器上运行它可以正常工作，但不能在服务器上运行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T08:49:58.600

当您在 Windows 的命令行中键入 'git' 时，它会打开**git.cmd**。在 Windows 上的典型 msysgit 安装中，**git.cmd**在 PATH 中，但 git.exe 可能不在！因此，您可以尝试以下方法之一：

*   在 Windows 中创建一个`git.bat`包含以下内容的文件夹：（
    `C:\Program Files (x86)\Git\bin\git.exe`检查路径）
*   在 Windows PATH 中添加 git 的 bin 目录。（您可以通过编辑系统环境变量来实现）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:57:28.493

我已经设法通过从 PHP 5.2 升级到 PHP 5.4 来解决这个问题。不知道是什么问题，但已经解决了。

# c++ - OpenCV/FFMpeg 图像捕获问题

> ID：11307353
> 
> 赞同：6
> 
> 时间：2012-07-03T08:41:24.143
> 
> 标签：c++, video, opencv, codec, live555

我正在尝试从 IP 摄像机实时捕获图像。该流在 VLC 中运行良好，但 OpenCV`cvQueryFrame()`似乎混乱并破坏了传入的图像，以至于无法识别。

同样，从文件中捕获工作正常，但不是实时流。如果有什么不同，我使用的是 rtsp 连接 URL；我也用两种不同的相机型号（不同的品牌）试过这个，问题仍然存在。

此外，（我假设）编解码器正在输出以下几种错误： `Error at MB: 1746`和`concealing 6000 DC, 6000 AC, 6000 MV errors`.

我能做些什么？

**更新：**序列中的第一个错误总是`cannot parallelize deblocking type 1, decoding such frames in sequential order`

**更新 2：**好吧，OpenCV/FFMPEG 似乎有 rtsp/h264 流的问题。我已经尝试过**Qt Phonon**库，它也不起作用，并且我对**Live555**库进行了快速概述。从每个人都说它的意义上说，最后一个似乎有效，并且应用程序示例（OpenRTSP）实际上可以很好地播放我的流。然而，老实说，掌握 Live555 代码似乎是一件漫长的事情，我现在几乎负担不起。除非有任何其他选择，否则我想我将不得不走那条路。

有没有想到的其他解决方案？

**更新 3：**我让 Live555 代码中的测试 RTSP 客户端工作，所以我知道如何从流中提取 h264 帧信息，但现在我需要将该帧信息重新组合成实际可显示的帧，这看起来不像直截了当！任何熟悉 Live555 的人都知道如何做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T08:18:44.617

我不知道它是否有帮助（因为我不是经验丰富的 c++ 开发人员），但我最近设法从[IP Camera](http://www.esentia.com/product-p/ipr414esx3.htm)获取流。这是一个快速测试：

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/imgproc/imgproc.hpp>
#include <iostream>
#include <stdio.h>

using namespace cv;
using namespace std;

int main(int, char**)
{
    VideoCapture ipCam;
    Mat frame;
    const string LOCATION = "rtsp://192.168.0.200:554/rtsph264vga";

    if(!ipCam.open(LOCATION)) {
        cout << "Error opening video stream or file" << endl;
        return -1;
    }

    for(;;) {
        if(!ipCam.read(frame)) {
            cout << "No frame" << endl;
            waitKey();
        }
        imshow("cam", frame);
        if(waitKey(1) >= 0) break;
    }

    return 0;
} 
```

在前往 c++ 之前，我已经将相机设置为导出到 H264 VGA（因为我正在使用的相机上默认情况下没有启用它）并确保我已经在 VLC 中运行了流。我正在使用启用了 fffmpeg 的 OpenCV 2.4.1。据我了解，从 OpenCV 2.0 开始可以使用 ffmpeg 与 OpenCV 的集成。

当我必须将 cv 代码与其他 c++ 代码合并时，我确实遇到了一些问题，因为我为 64 位架构构建了 OpenCV 和 ffmpeg + 依赖项。其他代码依赖于许多 32 位库。VideoCapture 类是 highgui 库的一部分，主要是您需要担心的。如果未使用 ffmpeg 支持编译，您将收到错误或警告，因为 VideoCapture 将无法对内容进行转码。

不确定它是否是最佳选择，但您可以尝试从 VLC 流式传输/转码流（通过在开源/网络选项卡中勾选流式传输/保存）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T16:16:28.633

看来您需要一个额外的软件层来捕获流数据包并在本地重建帧，然后将它们提供给 openCV。您可以使用 libVLC 轻松实现此目的。这也将避免编解码器问题，因为您可以使用 libVLC 解析几乎所有编解码器，然后将原始帧提供给 openCV。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T18:07:19.460

这是我用来从网络摄像头捕获帧的代码片段。它对我有用，希望它也对你有用......

```
int main(int argc, char* argv[])
{
    CvCapture *capture = NULL;
    IplImage* frame=NULL;
    int key =0;
    capture = cvCaptureFromCAM(0);

    if (!capture)   {
        printf("Cannot initailize webcam");
        return 1;
    }

    cvNamedWindow("result",CV_WINDOW_AUTOSIZE);

    while(key != 'q')
    {
        frame=cvQueryFrame(capture);

        if(!frame) break;

        cvShowImage("result",frame);
        key=cvWaitKey(10);
        frame=NULL;
    }
    cvDestroyWindow("result");
    cvReleaseCapture(&capture);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T04:25:24.723

对于 OpenCV 2.3.1，我已经编写了这段代码并且它可以正常工作，也就是说，我从相机源中获取图像。

```
VideoCapture cap(0);
if(!cap.isOpened())
{
    cout<<"Camera is not connected"<<endl;
    getchar();
} 
namedWindow("Camera Feed",1);
for(;;)
{
    Mat frame;
    cap >> frame;
    imshow("Camera Feed", frame);
    if(!frame.empty())
        detectAndDisplay(frame);
    else
        cout<<"No frame as input"<<endl;
    int c=waitKey(10);
    if(c==27)
        break;
}
return 0; 
```

如您所见，如果您按键盘上的 ESC 键，它会接收输入并连续显示并退出。 [这是](http://opencv.willowgarage.com/documentation/cpp/index.html)CV 2.1 的文档，它具有与 CV 2.3 相同的命令集。我猜这些命令是从 2.4 开始的，虽然我不太确定。希望能帮助到你。：）

# redis - 如何知道redis的主从状态？

> ID：11307356
> 
> 赞同：47
> 
> 时间：2012-07-03T08:41:33.187
> 
> 标签：redis

如何从命令行 (redis-cli) 了解 redis 的状态？主从

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-07-03T11:03:34.850

[INFO 命令](http://redis.io/commands/info)返回当前角色。

例如/如果我们是主人

```
role:master 
```

将显示，除其他细节。

如果我们切换到一个奴隶，也许通过使用[slaveof](http://redis.io/commands/slaveof)：

```
slaveof 192.168.1.66 6379 
```

当我们运行 INFO 时，我们会得到更多：

```
role:slave
master_host:192.168.1.66
master_port:6379
master_link_status:down
master_last_io_seconds_ago:-1
master_sync_in_progress:0
master_link_down_since_seconds:1341313174 
```

编辑：这是一个简洁的 cli 命令，如 Linus 所示（但他刚刚删除了他的帖子）：

```
redis-cli info | grep ^role 
```

:)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-03-04T16:12:28.733

我想通过在分布式设置中提供状态含义来扩展上面的答案

```
# get sentinel / redis instance role of remote host:
› redis-cli -h redis-02.a_slave -p 6379 info|grep role 
role:slave

# get sentinel status of remote host:
› redis-cli -h redis-01.a_sentinel -p 26379 info|grep status
master0:name=mymaster,status=ok,address=172.xx.xxx.xx:6379,slaves=2,sentinels=3 
```

# 状态

[http://redis.io/topics/sentinel#pubsub-messages](http://redis.io/topics/sentinel#pubsub-messages)

*   `+reset-master <instance details>`-- 主站被重置。
*   `+slave <instance details>`-- 检测到并连接了一个新的从站。
*   `+failover-state-reconf-slaves <instance details>`-- 故障转移状态更改为 reconf-slaves 状态。
*   `+failover-detected <instance details>`-- 检测到由另一个 Sentinel 或任何其他外部实体启动的故障转移（连接的从属变为主控）。
*   `+slave-reconf-sent <instance details>`-- 领导者哨兵向这个实例发送了 SLAVEOF 命令，以便为新的从属重新配置它。
*   `+slave-reconf-inprog <instance details>`-- 重新配置的从站显示为新主站 ip:port 对的从站，但同步过程尚未完成。
*   `+slave-reconf-done <instance details>`-- 从站现在与新的主站同步。
*   `-dup-sentinel <instance details>`-- 指定主服务器的一个或多个哨兵被删除为重复（例如，当哨兵实例重新启动时会发生这种情况）。
*   `+sentinel <instance details>`-- 检测到并附加了该主人的新哨兵。
*   `+sdown <instance details>`-- 指定的实例现在处于主观关闭状态。
*   `-sdown <instance details>`-- 指定的实例不再处于主观关闭状态。
*   `+odown <instance details>`-- 指定的实例现在处于 Objectively Down 状态。
*   `-odown <instance details>`-- 指定的实例不再处于 Objectively Down 状态。
*   `+new-epoch <instance details>`-- 当前纪元已更新。
*   `+try-failover <instance details>`-- 新的故障转移正在进行中，等待多数人选举。
*   `+elected-leader <instance details>`-- 赢得指定epoch的选举，可以做failover。
*   `+failover-state-select-slave <instance details>`-- 新的故障转移状态为 select-slave：我们正在尝试寻找合适的从站进行升级。
*   `no-good-slave <instance details>`——没有好奴隶可以提拔。目前我们会在一段时间后尝试，但可能这会改变，在这种情况下状态机将完全中止故障转移。
*   `selected-slave <instance details>`-- 我们找到了指定的好奴隶来提升。
*   `failover-state-send-slaveof-noone <instance details>`-- 我们正在尝试将提升的从站重新配置为主站，等待它切换。
*   `failover-end-for-timeout <instance details>`-- 故障转移因超时而终止，slave 最终将被配置为与新的 master 进行复制。
*   `failover-end <instance details>`-- 故障转移成功终止。所有从站似乎都被重新配置为与新的主站进行复制。
*   `switch-master <master name> <oldip> <oldport> <newip> <newport>`--主新IP和地址是配置更改后指定的。这是大多数外部用户感兴趣的信息。
*   `+tilt`-- 进入倾斜模式。
*   `-tilt`-- 退出倾斜模式。

# asp.net - asp.net 网站列表框 selectedindex

> ID：11307361
> 
> 赞同：0
> 
> 时间：2012-07-03T08:41:50.867
> 
> 标签：asp.net

```
protected void Page_Load(object sender, EventArgs e)
    {
        Label2.Text = ListBox1.SelectedIndex.ToString();

    } 
```

如果`label2.text`在页面加载中写入，则其输出为 -1

```
protected void ListBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        Label2.Text = ListBox1.SelectedIndex.ToString();
    } 
```

`label2.text`如果我在选定的索引更改中写入，它不会返回任何内容。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:46:48.920

列表框上的 autopostback 是否设置为 true？

# eclipse - 如何从 RCP 应用程序的文件 > 新菜单中删除默认向导？

> ID：11307367
> 
> 赞同：1
> 
> 时间：2012-07-03T08:42:05.793
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我想通过将 org.eclipse.ui.newWizards 扩展点添加到 plugin.xml 文件中，在我的 RCP 应用程序的 File > New 菜单中添加我的一些向导。

```
<extension point="org.eclipse.ui.newWizards">
<category
    id="com.my.testapp.ui.objects"
    name="Objects"/>
<wizard
    category="com.my.testapp.ui.objects"
    class="com.my.testapp.ui.wizard.create.COWizard"
    icon="icons/co.gif"
    id="com.my.testapp.ui.wizard.co"
    name="Configure Object"
    preferredPerspectives="com.my.testapp.ui.perspective"/>
</wizard>
</extension> 
```

默认情况下，文件 > 新建 > 其他菜单，除了带有配置对象向导的我的对象文件夹外，还包含具有以下向导的常规文件夹：文件、文件夹、项目和无标题文本文件。在我的应用程序中，这些向导没有意义，我想摆脱它们。怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T07:36:38.730

[此处](http://www.eclipse.org/forums/index.php/t/261462/)提供的用于删除默认导入向导的解决方案（感谢@bananeweizen 和@stracka）也可以应用于此问题。因此，解决方案是将以下代码添加到类的`postWindowOpen()`方法中`ApplicationWorkbenchWindowAdvisor`，以便从“文件”>“新建”>“其他”菜单中删除默认的“常规”类别。

```
AbstractExtensionWizardRegistry wizardRegistry = (AbstractExtensionWizardRegistry)PlatformUI.getWorkbench().getNewWizardRegistry();
IWizardCategory[] categories = PlatformUI.getWorkbench().getNewWizardRegistry().getRootCategory().getCategories();
for(IWizardDescriptor wizard : getAllWizards(categories)){
    if(wizard.getCategory().getId().matches("org.eclipse.ui.Basic")){
        WorkbenchWizardElement wizardElement = (WorkbenchWizardElement) wizard;
        wizardRegistry.removeExtension(wizardElement.getConfigurationElement().getDeclaringExtension(), new Object[]{wizardElement});
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T17:14:59.773

虽然[这个问题](https://stackoverflow.com/questions/8112012/how-to-remove-a-category-from-import-wizard-in-eclipse-rcp)询问隐藏一些“导入”向导（而不是“新建”向导），但该解决方案也应该适用于您的问题。

如果您在谷歌上搜索更多细节，请注意该机制的扩展点称为*活动*，但引用它的 Eclipse 术语是*功能*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T14:01:43.483

您是否尝试过删除相关的操作集？我从未删除过您所指的项目，但我已删除了默认的“搜索”操作、“注释”操作和“导航”操作等内容，因为我通常不支持这些功能应用程序。

一旦你弄清楚这些动作存在于哪些包中，这通常需要一些研究和挖掘，你可以将它们隐藏在**ApplicationWorkbenchWindowAdvisor**类的**postWindowOpen()**方法中，如下所示：

 **```
public void postWindowOpen() { 
    // remove unwanted UI contributions that eclipse makes by default
    IWorkbenchWindow[] windows = PlatformUI.getWorkbench().getWorkbenchWindows();
    for (int i = 0; i < windows.length; ++i) {
        IWorkbenchPage page = windows[i].getActivePage();
        if (page != null) {
            // hide 'Search' commands
            page.hideActionSet("org.eclipse.search.searchActionSet");

            // hide 'Annotation' commands
            page.hideActionSet("org.eclipse.ui.edit.text.actionSet.annotationNavigation");

            // hide 'Forward/Back' type navigation commands
            page.hideActionSet("org.eclipse.ui.edit.text.actionSet.navigation");
        }
    }
} 
```**

# svn - 如何使用 SVN 存储库从指定用户在指定日期（修订版、标签）之后提交的所有更改创建补丁

> ID：11307368
> 
> 赞同：0
> 
> 时间：2012-07-03T08:42:13.690
> 
> 标签：svn

如何使用 SVN 存储库从指定用户在指定日期（修订版、标签）之后提交的所有更改创建补丁。我的 ide 是 Eclipse 和 Intellij Idea ，但也可以使用 tortoise。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:02:11.253

如果 PowerShell 是一个可接受的选项，这里有一个脚本可以完成这项工作：

```
$RepoAddr = "https://url/to/your/repo";
$FromRev = "140";
$ToRev = "HEAD";
$WantedAuthor = "yannick";
$PatchFile = "$($WantedAuthor).patch";

$CmdLine = "svn log -r$($FromRev):$($ToRev) $RepoAddr --xml";
$Logs = ([xml](Invoke-Expression $CmdLine));

foreach ($Commit in $Logs.log.logentry)
{
    [string]$TmpAuth = $Commit.author;
    if ($TmpAuth.CompareTo($WantedAuthor) -eq 0)
    {
        [int] $TmpRev = $Commit.revision;
        $PatchCmdLine = "svn diff -r$($TmpRev-1):$TmpRev $RepoAddr";
        Write-Host $PatchCmdLine;
        Invoke-Expression $PatchCmdLine | Out-File $PatchFile -append;
    }
} 
```

希望这可以帮助！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:28:54.967

假设您的用户名是“test”并且您想确定在某些指定日期之间所有文件都发生了哪些变化

```
svn log <url> --username test -qv -r {2010-11-01}:{2011-05-04} > log.txt 
```

# c# - C#：从浏览器启动时的 Directory.getCurrentDirectory()

> ID：11307369
> 
> 赞同：2
> 
> 时间：2012-07-03T08:42:13.797
> 
> 标签：c#, process, uac, administrator

我目前正在为我的应用程序开发自动更新程序。（结合安装程序、更新程序和删除工具）

我想自动设置所有的东西：

*   开始菜单项
*   C:\Program Files\ 中的文件夹
*   应用数据中的配置文件夹（取决于漫游/本地）
*   “程序和功能”中的软件删除条目
*   桌面快捷方式。

这一切都很好。要写入程序文件和注册表，该工具需要管理员权限 ofc。因此，在选择了所需的软件后，我添加了 AppLauncher 的“重新启动”。就像这样：

```
ProcessStartInfo pi = new ProcessStartInfo(Directory.GetCurrentDirectory() + @"\AppLauncher.exe");
        pi.Verb = "runas";
        pi.Arguments = "install " + this.appItem.APID;

        Process p = new Process();
        p.StartInfo = pi;
        try
        {
            p.Start();
            Application application = Application.Current;
            application.Shutdown();
        }
        catch (Exception ex)
        {
            MessageBox.Show("Unable to install the application.\n\n" + ex.ToString(), "Error", 
            application.Shutdown();
        } 
```

**如果**用户将 AppLauncher.exe 保存在文件夹中的某个位置并通过双击它启动它，此步骤也非常有效。

如果用户决定从浏览器中点击“运行”，安装程序会遇到显示的异常，说“找不到 AppLauncher.exe”。我假设，从浏览器启动文件将设置一个不同的工作目录，因此

```
Directory.GetCurrentDirectory() 
```

不会返回文件所在位置的适当值。如果用户决定给文件另一个名称，它也可能不起作用。

那么，我能做些什么呢？

有没有类似 File.GetCurrentFile() :P

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T08:48:24.697

代替

```
Directory.GetCurrentDirectory() + @"\AppLauncher.exe" 
```

和

```
System.Reflection.Assembly.GetEntryAssembly().Location 
```

（如果你

但是，最好不要重新发明自行车，而是使用已实现所有集成功能并已解决所有错误的可用安装程序解决方案之一。

例如：[ClickOnce](https://en.wikipedia.org/wiki/ClickOnce)、[WiX](https://en.wikipedia.org/wiki/WiX)。

# drop-down-menu - ListGrid 禁用字段下拉列表以进行排序、冻结、编辑

> ID：11307385
> 
> 赞同：4
> 
> 时间：2012-07-03T08:43:58.773
> 
> 标签：drop-down-menu, smartgwt, listgrid

我正在开发使用 SmartGWT Listgrid 的网络应用程序。当我创建和可视化 Listgrid 时，有用于排序、配置排序等的箭头下拉列表。在文档中搜索我没有找到禁用此下拉列表的属性。有谁知道如何禁用它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T15:15:30.507

当我不想使用排序和标题菜单时：

```
myGrid.setShowSortArrow(SortArrow.NONE); 
```

同样对于标题菜单：

```
myGrid.setShowHeaderContextMenu(false);
myGrid.setShowHeaderMenuButton(false); 
```

我也经常取消表头的点击事件和双击事件

最终我宣布该字段不可排序`theField.setCanSort(false);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T11:44:00.093

排序应用于列级别而不是网格级别。因此，如果您想关闭特定列的排序，您可以尝试以下操作：

```
listGridField.setCanSort(false); 
```

# android - 尽管 setRetainInstance(true)，DialogFragment 在旋转时消失

> ID：11307390
> 
> 赞同：23
> 
> 时间：2012-07-03T08:44:29.430
> 
> 标签：android

我有一个使用 android-support-v4 片段 API 的“hello world”-ish 示例应用程序。该活动由一个按钮组成，单击它将显示一个DialogFragment。但是，即使使用了 setRetainInstance(true)，旋转等配置更改也会导致对话框消失。

知道如何解决这个问题吗？

RetFragment.java

```
package me.local.HelloFroyo;

import android.os.Bundle;
import android.support.v4.app.*;
import android.util.Log;
import android.view.*;

public class RetFragment extends DialogFragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setRetainInstance(true);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        return inflater.inflate(R.layout.hello_dialog_fragment, container);
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        Log.e("RET", "onDestroy");
    }
} 
```

MainActivity.java

```
package me.local.HelloFroyo;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.view.View;

public class MainActivity extends FragmentActivity {

    private static final String TAG_DLG = "myFragDlg";

    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.activity_main);
    }

    public void onShowClick(View v) {
        RetFragment ret = new RetFragment();
        ret.show(getSupportFragmentManager(), TAG_DLG);
    }
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-28T01:47:56.503

只是对此发表评论：

“即使使用了 setRetainInstance(true)。”

这不是“即使”，而是“因为它”。如果 setRetainInstance 为 false，则对话框旋转得很好。

这是我在这里找到的工作，对我来说很好用： [http ://code.google.com/p/android/issues/detail?id=17423](http://code.google.com/p/android/issues/detail?id=17423)

```
@Override
public void onDestroyView()
{
    Dialog dialog = getDialog();

    // Work around bug: http://code.google.com/p/android/issues/detail?id=17423
    if ((dialog != null) && getRetainInstance())
        dialog.setDismissMessage(null);

    super.onDestroyView();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T19:04:30.603

DialogFragments 可以自行承受旋转变化，您不需要 setRetainInstance

但是，如果您设置它，这是 setRetainInstance(true) 和 DialogFragments 的可重现错误

[http://code.google.com/p/android/issues/detail?id=17423&q=setRetaininstance&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars](http://code.google.com/p/android/issues/detail?id=17423&q=setRetaininstance&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)

只是不要设置保留实例，您的对话框将正常工作

但是，如果您的 DialogFragment 中有一个 AsyncTask 正在运行并且您希望将其持久化，请使用 LoaderManager 和 AsyncTaskLoader.. 它也可以在配置更改后继续存在

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-23T08:18:37.610

对于那些即使在`setRetainInstance(true)`覆盖或覆盖后`onDestroyView`仍有问题但仍然无法工作的人，请确保`super.onSaveInstanceState()`在覆盖时调用`onSaveInstanceState`：

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState); // <-- must call this if you want to retain dialogFragment upon rotation
    ...
} 
```

即使没有 setRetainInstance 或覆盖 onDestroyView，dialogFragment 也应该在旋转时自行处理对话重新创建。

* * *

## 回答 #4

> 赞同：-13
> 
> 时间：2012-07-03T09:09:02.023

尝试添加

```
android:configChanges="orientation" 
```

在 AndroidManifest 文件中再次显示您的活动。

# php - php列表类别

> ID：11307396
> 
> 赞同：0
> 
> 时间：2012-07-03T08:44:47.870
> 
> 标签：php, mysql

我有一个包含 3 类类别的电子邮件预订表格，每个主题都有 3 个

要选择的包，当我在选择列表菜单中选择一个类别时，应该出现在底部

另一个选择列表菜单，其中包含该类别的相关包。

做这个的最好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T08:51:11.203

要么将相关包存储在可以在javascript中按需查找的数据结构中，这样当您切换第一个下拉框时，您可以使用onchange调用更新第二个内容的方法。

或者使用 ajax 查询来获取特定类别的信息并在调用 onchange 时填充。

对于不会经常更改的小列表，我更喜欢第一种方法，如果列表可能会动态更改（例如基于数据库）和/或有大量类别/包，那么我会选择ajax 方法。

# groovy - Groovy 覆盖或拦截 Java 方法

> ID：11307397
> 
> 赞同：0
> 
> 时间：2012-07-03T08:44:47.433
> 
> 标签：groovy, overriding, metaclass

使用 Groovy 2.0

正如背景一样，我正在将 Yaml 与 SnakeYaml 滚动到 Groovy 类中。SnakeYaml 使用 Java 反射来构造和调用属性的设置。我想使用某些类（从 Yaml 创建）以允许添加不存在的简单属性。首先考虑在类定义上使用 Groovy get/setProperty 并将内容转储到地图存储中。但由于 SnakeYaml 使用反射，这不起作用。试图覆盖负责设置属性的实用程序：

```
def originalMethod = org.yaml.snakeyaml.introspector.PropertyUtils.metaClass.getMetaMethod("getProperty", Class, String)
org.yaml.snakeyaml.introspector.PropertyUtils.metaClass.getProperty = { Class type, String name ->
  // do stuff, like create the property on the metaClass
  def result = originalMethod.invoke(delegate, type, name)
  result
} 
```

但是被覆盖的“getProperty”方法永远不会被调用。想法？使用代理拦截器更好吗？“getProperty”方法的足迹是：

```
public Property getProperty(Class<? extends Object> type, String name)
        throws IntrospectionException {
    return getProperty(type, name, beanAccess);
} 
```

# python - Matplotlib 按键事件与导航栏冲突

> ID：11307398
> 
> 赞同：1
> 
> 时间：2012-07-03T08:44:52.800
> 
> 标签：python, user-interface, matplotlib

如何在不开始与导航工具栏交互的情况下使用键盘事件上/下/右/左？（尝试使用 GTK，但我希望其他后端的行为相同）我连接到按键事件并且一切看起来都很好，直到我按下向下键：我的连接方法被调用一次，然后导航工具栏获得焦点。从那时起，它抓住了我所有的箭头按压（也向上，向右和向左）。我注意到使用移位键可能是一种解决方法，但我真的不喜欢它......

提前感谢您的帮助！

欢呼 JF

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:53:22.163

对我来说听起来像是一个错误，应该在 github 问题跟踪器上报告：[https ://github.com/matplotlib/matplotlib/issues/new](https://github.com/matplotlib/matplotlib/issues/new)

# javascript - 从其他文件访问 Ext Gantt JS 变量

> ID：11307402
> 
> 赞同：0
> 
> 时间：2012-07-03T08:45:07.947
> 
> 标签：javascript, jquery, html, extjs

这是我的 basic.js

```
Ext.ns('App');

//Ext.Loader.setConfig({enabled: true, disableCaching : true });
//Ext.Loader.setPath('Sch', '../../../ExtScheduler2.x/js/Sch');
//Ext.Loader.setPath('Gnt', '../../js/Gnt');

Ext.require([
    'Gnt.panel.Gantt',
    'Gnt.column.PercentDone',
    'Gnt.column.StartDate',
    'Gnt.column.EndDate',
    'Sch.plugin.TreeCellEditing'
]);

Ext.onReady(function() { App.Gantt.init(); });

App.Gantt = {

    // Initialize application
    init: function (serverCfg) {
        Ext.QuickTips.init();

        var taskStore = Ext.create("Gnt.data.TaskStore", {
            model : 'Gnt.model.Task',
            proxy : {
                type : 'ajax',
                method: 'GET',
                url: 'tasks.xml',
                reader: {
                    type : 'xml',
                    // records will have a 'Task' tag
                    record: "Task",
                    root: "Tasks"
                }
            }
        });

        var dependencyStore = Ext.create("Gnt.data.DependencyStore", {
            autoLoad: true,
            proxy: {
                type : 'ajax',
                url: 'dependencies.xml',
                method: 'GET',
                reader: {
                    type : 'xml',
                    root : 'Links',
                    record: 'Link' // records will have a 'Link' tag
                }
            }
        });

        var colSlider = Ext.create("Ext.slider.Single", {
            width: 120,
            value: 20, // TODO Sch.PresetManager.getPreset('weekAndDayLetter').timeColumnWidth,
            minValue: 20,
            maxValue: 140,
            increment: 10
        });

        var cellEditing = Ext.create('Sch.plugin.TreeCellEditing', {
            clicksToEdit: 1,
            listeners : {
                beforeedit : function() { return !Ext.getCmp('demo-readonlybutton').pressed; }
            }
        });

        var g = Ext.create('Gnt.panel.Gantt', {
            height: 350,
            width: 1000,
            renderTo: Ext.getBody(),
            leftLabelField: 'Name',
            highlightWeekends: true,
            loadMask: true,
            enableProgressBarResize: true,
            enableDependencyDragDrop: true,
            //snapToIncrement : true,
            cascadeChanges : false,
            startDate: new Date(2010, 0, 4),
            endDate: Sch.util.Date.add(new Date(2010, 0, 4), Sch.util.Date.WEEK, 10),
            viewPreset: 'weekAndDayLetter',

            eventRenderer: function (taskRecord) {
                return {
                    ctcls : taskRecord.get('Id') // Add a CSS class to the task element
                };
            },

            tooltipTpl: new Ext.XTemplate(
                '<ul class="taskTip">',
                    '<li><strong>Task:</strong>{Name}</li>',
                    '<li><strong>Start:</strong>{[Ext.Date.format(values.StartDate, "y-m-d")]}</li>',
                    '<li><strong>Duration:</strong> {Duration}d</li>',
                    '<li><strong>Progress:</strong>{PercentDone}%</li>',
                '</ul>'
            ).compile(),

            // Setup your static columns
            columns: [
                {
                    xtype : 'treecolumn',
                    header: 'Tasks',
                    sortable: true,
                    dataIndex: 'Name',
                    width: 200,
                    field: {
                        allowBlank: false
                    }
                },
                Ext.create('Gnt.column.StartDate'),
                Ext.create('Gnt.column.EndDate'),
                Ext.create('Gnt.column.PercentDone')
            ],

            taskStore: taskStore,
            dependencyStore: dependencyStore,
            plugins: [cellEditing],

            tbar: [
                {
                    text: 'Add new task...',
                    iconCls: 'icon-add',
                    handler: function () {
                        var newTask = new taskStore.model({
                                Name: 'New task',
                                leaf : true,
                                PercentDone: 0
                            });
                        taskStore.getRootNode().appendChild(newTask);
                    }
                },
                {
                    enableToggle: true,
                    id : 'demo-readonlybutton',
                    text: 'Read only mode',
                    pressed: false,
                    handler: function () {
                        g.setReadOnly(this.pressed);
                    }
                },
                '->',
                {
                    xtype: 'label',
                    text: 'Column Width'
                },
                ' ',
                colSlider
            ]
        });

        colSlider.on({
            change: function (s, v) {
                g.setTimeColumnWidth(v, true);
            },
            changecomplete: function (s, v) {
                g.setTimeColumnWidth(v);
            }
        });
    }
}; 
```

在我的 html 文件中，我包含了 basic.js

我想从 basic.js 访问**var taskStore**，但很难。

我试着这样做：

```
var test = App.Gantt.taskStore;
var test = taskStore; 
```

他们没有工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T05:52:57.130

最简单也是最丑陋的方法是将其分配给窗口：window.taskStore = taskStore。然后任何文件都可以访问这个变量。花点时间考虑一下您的 JS 应用程序的设计并按照 Brian 的建议做会更好。谁应该知道taskStore等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T15:35:52.603

Using`var`意味着它是一个私有变量，不能在`App.Gantt`. 而是尝试使用将`this.taskStore = ...`其设置为成员变量`App.Gantt`并使其可公开访问的设置。

# ios - 用 cocos2d-x 使用数据库（如 sqlite）

> ID：11307404
> 
> 赞同：5
> 
> 时间：2012-07-03T08:45:31.393
> 
> 标签：ios, sqlite, xcode4, cocos2d-x

我开始在 iphone 上构建游戏应用程序。我正在使用 cocos2d-x 游戏引擎，因为它很容易从那里移植到 android。编码也是用我非常熟悉的 C++ 编写的。我想知道是否有办法在 cocos2d-x 中使用任何数据库。虽然 sqlite 是首选但不是强制性的。我将在数据库中有大约 1/2 mb 的数据。所以，是的，我也考虑过保留/使用内存数据库，但我希望我的读/写查询具有时间效率。

我查看了一些博客，这表明我可能需要为 sqlite 使用 C++ 包装器。问题是，对于独立的 C++ 代码，我可以设置环境，但是如何将其集成到 xcode（在 mac os 中）以使用 sqlite 和 cocos2d-x。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T00:22:17.533

原帖在[http://www.cocos2d-x.org/boards/6/topics/7006](http://www.cocos2d-x.org/boards/6/topics/7006)

我发现将 sqlite 包含到 cocos2dx 游戏中的最简单方法。

即从sqlite3 c++ api下载源码，将sqlite3.c添加到Android.mk中。

然后将这些代码编译为您的 cocos2dx 代码。

并在需要使用时将 sqlite.h 包含在您的代码中。

对于数据库操作，以下是我的示例代码：

```
sqlite3 *pDB = NULL;
char* errMsg = NULL;
string sqlstr;
int result;
string dbPath = CCFileUtils::getWriteablePath();
dbPath.append("Settings.db");
result = sqlite3_open(dbPath.c_str(),&pDB);
if (result != SQLITE_OK)
    CCLOG("OPENING WRONG, %d, MSG:%s",result,errMsg);

bool isExisted_;
sqlstr = "select count(type) from sqlite_master where type='table' and name='YourTableName'";
result = sqlite3_exec(pDB, sqlstr.c_str(), isExisted, &isExisted_, &errMsg);
if(result != SQLITE_OK)
    CCLOG("check exist fail %d Msg: %s", result, errMsg);
result = sqlite3_exec(pDB, "create table YourTableName(ID INTEGER primary key autoincrement, name varchar(32), type INT, posX INT, posY INT, isUnlock INT)",NULL,NULL,&errMsg);
if(result != SQLITE_OK)
    CCLOG("CREATE TABLE FAIL %d, Msg: %s",result,errMsg);
sqlite3_close(pDB); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T21:40:54.997

我认为最好的方法是：

*   [使用CCFileUtils::getFileData()](http://www.cocos2d-x.org/reference/native-cpp/d0/ddc/classcocos2d_1_1_c_c_file_utils.html#aaf686ba03bdddab83741cb1ae9732b17)打开文件，您将获得文件数据。例如你的 sqlite 文件:)

*   使用[CCFileUtils::getWriteablePath()](http://www.cocos2d-x.org/reference/native-cpp/d0/ddc/classcocos2d_1_1_c_c_file_utils.html#ad8723a069e1c73a79feefe260410877d)获取可以写入的目录。

*   将数据写入上一个目录，例如使用[fstream](http://www.cplusplus.com/reference/iostream/fstream/fstream/)

*   [现在您可以使用来自sqlite3 c++](http://www.sqlite.org/capi3ref.html) api的源代码访问您的数据库。

整个主题在这里： http: [//www.cocos2d-x.org/boards/6/topics/7006](http://www.cocos2d-x.org/boards/6/topics/7006)

示例代码:)

```
CCFileUtils* fileUtils = CCFileUtils::sharedFileUtils();
unsigned long size = 5;

unsigned char* smth;
smth = fileUtils->getFileData("koalalocker","r",&size);

printf("Size: %lu\n\n",size);
fflush(stdout);

if(cos == NULL)
    {
    LOG("can't open");
            return;
    }
else
    LOG("I have something!");

string path = fileUtils->getWriteablePath();
path += "test_OUT";

char buffer[300];
sprintf(buffer,"PATH: %s\n",path.c_str());
LOG(buffer);
std::fstream outfile(path.c_str(),std::fstream::out);
outfile.write((const char*)smth,size-1);
outfile.close();

LOGN("Size:",size);
LOG((const char*)smth); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-24T18:45:38.967

我写了一篇关于在xcode中逐步将sqlite集成到cocos2d-x游戏中的博客。你可以看到这个 [http://sqlite-integration-in-cocos2d-x.blogspot.in/](http://sqlite-integration-in-cocos2d-x.blogspot.in/)

# c# - 如何通过快速修复发送出价询问消息？

> ID：11307405
> 
> 赞同：-1
> 
> 时间：2012-07-03T08:45:36.213
> 
> 标签：c#, quickfix, fix-protocol

我想通过修复接受者以快速修复协议发送出价询问消息。

我必须通过快速修复发送出价询问消息

我使用 quickfix_net dll 作为修复接受者，我如何通过这个 dll 发送投标询问

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T04:39:10.843

我希望您能够发送/获取 FIX 消息，因此要发送 Bid/Ask（在 FIX 报价中），您必须发送 MarketData-Type FIX 消息，其中包含 Bid-Offer 的重复组，它还有第三个交易价格字段。

```
 MarketDataSnapshotFullRefresh message =  new MarketDataSnapshotFullRefresh(new QuickFix.Symbol("QF"));
 MarketDataSnapshotFullRefresh.NoMDEntries group =  new MarketDataSnapshotFullRefresh.NoMDEntries();
 //For Bid 
 group.set(new QuickFix.MDEntryType('0')); 
 group.set(new QuickFix.MDEntryPx(12.32));
 group.set(new QuickFix.MDEntrySize(100));    
 message.addGroup(group);
 //For Ask
  group.set(new QuickFix.MDEntryType('1'));
  group.set(new QuickFix.MDEntryPx(12.32));
  group.set(new QuickFix.MDEntrySize(100));    
  message.addGroup(group); 
```

# c++ - ptr_fun - 无法创建类型？

> ID：11307406
> 
> 赞同：0
> 
> 时间：2012-07-03T08:45:35.810
> 
> 标签：c++, functor

我该怎么做：

```
#include <functional>

#include <boost/functional.hpp>

int foo(int){return 1;};

template<typename T>
int bar(T t)
{
  return 10;/*or something*/
}

int main() {

  bar<   std::ptr_fun<int, int>(foo) > (1);
  bar< boost::ptr_fun<int, int>(foo) > (1);

  return 0;
} 
```

在两个 ptr_fun-lines 中我都得到了`error C2974: 'bar' : invalid template argument for 'T', type expected`. 据我所知`prt_fun`，创建一个类型，但`std::ptr_fun<int, int>(foo)`创建一个对象。有没有办法用函数指针usinf尽可能多地创建一个“初始化”类型？

可能可以通过手动编写仿函数来解决这个问题，但我相信有 ptr_fun 方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T09:15:54.130

`ptr_fun`返回类型为[pointer_to_unary_function](http://en.cppreference.com/w/cpp/utility/functional/pointer_to_unary_function)的对象。您声明您的模板采用类型参数，因此将对象传递给它显然是行不通的。

你可以让它像这样工作（注意你不需要指定模板参数，它可以由编译器推导出来）：

```
#include <iostream>
#include <functional>

int foo(int i)
{
    return i;
}

template<typename TResult, typename TArg>
int bar(std::pointer_to_unary_function<TArg, TResult> p, TArg arg)
{
    return p(arg);
}

int main()
{
    std::cout << bar(std::ptr_fun<int, int>(foo), 42);
} 
```

但你真的不需要`ptr_fun`. 你可以简单地这样做：

```
#include <iostream>
#include <functional>

int foo(int i)
{
    return i;
}

template<typename TFunc, typename TArg>
int bar(TFunc f, TArg arg)
{
    return f(arg);
}

int main()
{
    std::cout << bar(foo, 42);
} 
```

或者，让它像你设置的那样工作：

```
int foo(int i) { return i; }

template<typename T>
int bar(T t)
{
    t(42);
}

int main() {
  std::cout << bar( std::ptr_fun<int, int>(foo) );
} 
```

大量的任务，因为它不是很清楚你想要完成什么。

# matlab - 如何在 MATLAB 中重新排列单元格的内容？

> ID：11307409
> 
> 赞同：1
> 
> 时间：2012-07-03T08:45:53.577
> 
> 标签：matlab, sorting, cell

我将一组时间序列导入到 MATLAB 中的一个单元格中，每个时间序列都有不同的维度。单元格如下所示：

```
datacell = 

[176x1 double] [132x1 double] [129x1 double] [86x1 double] [90x1 double] ...[162x1 double] 
```

我想从左到右重新排列单元格，从最低维度到最大维度。单元格中有 1000 个条目，无法手动执行此操作。我怎样才能做到这一点？请有人给出一些处理这个问题的想法。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T08:56:24.373

简单的：

```
[~, I] = sort(cellfun(@length, datacell));
new_datacell = datacell(I); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T08:55:32.437

哦，看来我是第二个一分钟；）

* * *

做这样的事情：

```
test_data = {rand(100,1), rand(12,1), rand(200,1), rand(123,1)}
length_info = cellfun(@length,test_data)
[a,i_sort] = sort(length_info)
sorted_data = test_data(i_sort) 
```

# javascript - 在javascript的回调函数中引用对象

> ID：11307410
> 
> 赞同：0
> 
> 时间：2012-07-03T08:45:53.233
> 
> 标签：javascript, events, callback

我的指示是：

```
map.canvas.addEventListener("mousemove", mapOnMouseMove, false);

function mapOnMouseMove (e) {
   // here : this refers to the canvas of the map object
   // i want to refer to the map (is there a way ?)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:03:53.023

你可以欺骗`this`这样引用`map`：

```
map.canvas.addEventListener("mousemove", canvasOnMouseMove, false);

function canvasOnMouseMove (e) {
   mapOnMouseMove.call(map, e);
}

function mapOnMouseMove (e) {
   // here : this refers to the map object
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:50:22.030

您可以使用[`bind`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)创建绑定函数（其中的值`this`是您的`map`对象）：

```
map.canvas.addEventListener("mousemove", mapOnMouseMove.bind(map), false); 
```

但请注意，由于`bind`是 ES5 方法，旧浏览器不支持它。上面链接的 MDN 文章提供了一个你可能也想使用的 polyfill。

# ios - Phonegap/Cordova 1.8.0：ChildBrowser 在LocationChange 上不起作用

> ID：11307412
> 
> 赞同：0
> 
> 时间：2012-07-03T08:45:56.587
> 
> 标签：ios, cordova, phonegap-plugins

我正在使用 Cordova 1.8.0 和旧版本的 Childbrowser（新版本似乎不起作用）。

无论如何，直到昨天晚上，这段代码没有任何问题，今天早上我点击运行，cb.onLocationChange 停止工作。

我不明白这怎么可能。有没有人可以给我提示？onLocationChange 不会返回任何 console.log :(

```
 var cb = ChildBrowser.install(); // install our ChildBrowser ( cb )
        console.log("AAAA We don't have a user saved yet");
        oauth = OAuth(options);
        oauth.get('https://api.twitter.com/oauth/request_token',
            function(data) {
                console.log("AAAA Sent request token");
                requestParams = data.text;
                cb.showWebPage('https://api.twitter.com/oauth/authorize?'+data.text); // This opens the Twitter authorization / sign in page     
                console.log("AAAAAA onLocation chenge");
                cb.onLocationChange = function(loc){ console.log("AAAAAA"); Twitter.success(loc); }; // When the ChildBrowser URL changes we need to track that
            },
            function(data) { 
                console.log("ERROR: "+data);
            }
        ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T18:58:52.777

当我遇到同样的问题时，我发现了这个问题。答案在这里 - [参考错误：找不到变量：ChildBrowser、Cordova 1.7.0、jQueryMobile 1.0.1、iOS 5.1](https://stackoverflow.com/questions/10864740/reference-error-cant-find-variable-childbrowser-cordova-1-7-0-jquerymobile)

ChildBrowser.install() 中的简短答案不再起作用。将代码的第一行更改为

```
cb = window.plugins.childBrowser; 
```

# c# - 自定义控件事件

> ID：11307413
> 
> 赞同：0
> 
> 时间：2012-07-03T08:45:56.857
> 
> 标签：c#, events, custom-controls

我编写了一个自定义控件，其中有一个组合。

该组合有一个 SelectedIndexChanged 事件，该事件也对使用该控件的应用程序可见。

所以在应用程序中我也订阅了 SelectedIndexChanged 事件。

在应用程序中，我更改了组合值并触发了 2 个事件（我已经使用消息框对此进行了测试）。

在这一点上一切都很好，这是我的问题：我的自定义控件上有另一个控件，它触发组合的 SelectedIndexChanged 事件，但应用程序中的那个没有触发。我怎样才能做到这一点？

我希望一切都有意义？！

我正在使用 C# 4.0

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:58:16.723

您是否尝试在控件中创建一个公共函数，您可以从触发 selectedIndexChanged 事件的应用程序调用该函数

# wpf - 运行 Crystal 报表时 vshost32.exe 崩溃

> ID：11307414
> 
> 赞同：0
> 
> 时间：2012-07-03T08:45:56.840
> 
> 标签：wpf, wcf, crystal-reports, vshost.exe

我在 Visual Studio 2010（平台 x86）上运行 WPF 应用程序。我们正在使用 WCF 的客户端和服务器端。我已经使用 Crystal 通过将报告字节 [] 保存到我们的 Postgress 数据库中来实现报告功能，然后在加载时我将其加载到 ReportDocument 以获取参数，然后基本上将其发送回服务器端和 ExportToStream 以创建报告。

这已经奏效并且运行良好（旧报告仍然可以），但现在我们创建了一个新报告，突然它在 ExportToStream 弹出（vshost32.exe 已停止工作）框时崩溃，整个应用程序从那里崩溃。

有没有人遇到同样的事情或者可以给我一些建议？一直在网上寻找，但没有找到任何真正的解决方案。

# iphone - iTunesconnect：描述语言的问题

> ID：11307415
> 
> 赞同：1
> 
> 时间：2012-07-03T08:46:20.137
> 
> 标签：iphone, app-store-connect

我在 iTunes 中有一个已发布的应用程序，有两种描述语言英语和法语。首先默认语言设置为法语，最近我将默认描述语言从法语更改为英语并删除了法语描述语言。

但它仍然在法语商店中显示法语描述语言。我是否应该为应用程序提交新的更新，以便它在 iTunes 中更新其法国商店的描述语言？

任何建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T06:16:27.147

Apple 只需要一些时间来应用这些更改，实际上我花了一天的时间。

# loops - 循环停止整个测试

> ID：11307416
> 
> 赞同：3
> 
> 时间：2012-07-03T08:46:21.410
> 
> 标签：loops, jmeter

我的测试计划有问题。我正在尝试检查几组链接。

*   正循环 - 允许匿名访问 URL。
*   负循环 - 禁止匿名的 URL。

![在此处输入图像描述](../Images/f13a4c07be87d9368674bb36f732b67b.png)

每个循环都在其他循环折叠时起作用。

但是，如果启用了所有循环，则仅执行第一个循环。我的错误在哪里？

还有另一种方法 - 手动添加 LoopCount 而不是使用“永远”+“在 EOF=True 上停止线程”。这对我来说不是一个很好的解决方案。 ![在此处输入图像描述](../Images/18262de35180b667418c0b0aa583fd13.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T11:15:25.873

取消选中`forever`循环计数以获取初学者。如果您的第一个循环永远循环并测试它在线程组中按顺序执行，那么第二个循环在第一个循环完成之前不会启动。

**编辑：**

解决此问题的一种方法是：

*   创建 2 个线程组（1 个用于正面，1 个用于负面）

因此，您将拥有某种类型的输入文件，其中将存储您的链接（每行包含一个链接），您希望以授权（登录）或未经授权（未登录）的身份访问该文件。

如果我是你，我会这样做：

1.  创建一个线程组并在里面登录

2.  创建第二个线程组。在第二个线程组（正）中，当用户登录时创建`CSV Data Set Config`。重点`Recycle on EOF`->`True`和`Stop thread on EOF`-> `False`。将循环计数设置为永远，就像您在屏幕截图中的循环控制器中所做的那样，它会在完成所有网站后退出。这些应该返回`200`OK 状态代码。

3.  在第三个线程组中注销

4.  创建另一个线程组（否定），使用相同的文件（其中包含要访问的 ulrs）。`CSV Data Set Config`并在此线程组下创建另一个。然后像第二步那样做剩下的事情。`401`这些应该返回未经授权或禁止的响应代码`403`，具体取决于您的服务实现。

**一个问题总是有不止一种解决方案。**这只是其中之一，选择你最喜欢的一个。

# c# - 捆绑的 GTK# 应用程序不会在新的 Win7 安装上运行

> ID：11307419
> 
> 赞同：2
> 
> 时间：2012-07-03T08:46:36.260
> 
> 标签：c#, windows, dependencies, gtk#, mkbundle

我在 MonoDevelop 中为大学作业创建了一个 C# GTK# 应用程序，结果发现它无法在大学计算机上运行，​​因为我们没有安装 GTK# 或 Mono 库的管理员权限。经过一番研究，我发现了在 Cygwin 中使用 mkbundle 将所需的 DLL 与可执行文件捆绑在一起的技术。我按照以下说明进行操作：

[http://www.joebest.org/2011/09/mono-and-mkbundle-on-windows.html](http://www.joebest.org/2011/09/mono-and-mkbundle-on-windows.html)

由于我在家时无法在大学计算机上进行测试，因此我正在完全干净安装 Win 7 Pro 64 位的虚拟机上进行测试。我的开发机器运行相同的操作系统，但在我的开发机器上进行测试没有意义，因为它已经拥有了它需要的所有库，而且我没有收到任何错误。

我可以很好地创建捆绑的可执行文件，没有麻烦。捆绑的可执行文件在我的开发机器上运行良好。当我尝试在干净的 Win 7 安装上运行它时，没有任何反应。没有窗口出现；没有错误信息；没有什么。我只知道它正在运行，因为当我双击可执行文件时，我可以在任务管理器的“进程”选项卡中看到它的名称出现一两分钟。

作为比较，如果我尝试运行未捆绑的应用程序，它会给出一条错误消息，提示我需要安装 .NET 4 运行时。如果我安装 .NET 4 运行时（我知道大学计算机安装了 .NET 4），那么应用程序会因以下错误而崩溃：

```
Problem signature:
Problem Event Name: CLR20r3
Problem Signature 01:   keycommandeditor.exe
Problem Signature 02:   1.0.4560.18753
Problem Signature 03:   4fe8f352
Problem Signature 04:   glib-sharp
Problem Signature 05:   2.12.0.0
Problem Signature 06:   4e383483
Problem Signature 07:   2bc
Problem Signature 08:   0
Problem Signature 09:   System.DllNotFoundException
OS Version: 6.1.7600.2.0.0.256.48
Locale ID:  1033
Additional Information 1:   0bff
Additional Information 2:   0bff8d176610735333c3986b545525d3
Additional Information 3:   9af1
Additional Information 4:   9af19ba95df508dd9c076f2be86ba847 
```

我已将 mkbundle 输出中显示的所有 DLL 添加到应用程序的文件夹中。如果我从文件夹中删除 glib-sharp.dll，错误将变为：

```
Problem signature:
Problem Event Name: APPCRASH
Application Name:   KeyCommandEditor.exe
Application Version:    1.0.4560.18753
Application Timestamp:  4fe8f352
Fault Module Name:  KERNELBASE.dll
Fault Module Version:   6.1.7600.16385
Fault Module Timestamp: 4a5bdbdf
Exception Code: e0434352
Exception Offset:   0000b727
OS Version: 6.1.7600.2.0.0.256.48
Locale ID:  1033
Additional Information 1:   0a9e
Additional Information 2:   0a9e372d3b4ad19135b953a78882e789
Additional Information 3:   0a9e
Additional Information 4:   0a9e372d3b4ad19135b953a78882e789 
```

我还尝试使用 CorFlags.exe 更改 32BIT 标志，但它似乎对任何东西都没有任何影响。

我只是想知道是否有人知道接下来要尝试的事情，因为我完全被这个难住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T22:49:31.310

从它的声音来看，您想要使用`mkbundle2`它来执行相同的任务，但用于 Mono 2.x 运行时。需要注意的另一件事可能是运行时依赖项（即：调用 LoadLibrary 的代码和此类函数），因为 mkbundle 可能无法检测到这些。

# mysql - 如何插入数据库，限制为 3

> ID：11307422
> 
> 赞同：1
> 
> 时间：2012-07-03T08:46:41.620
> 
> 标签：mysql, sql, database

我不认为这是一个简单的*LIMIT*查询。
我有有**分类的****组织者**。 每个组织者只能有 3 个类别。 我的问题是我有一个页面来编辑他们的类别，如果我使用常规的 INSERT，那么它可能会超过 3 个类别。

 **1.  有些组织者可能有 2 个类别，然后选择更新为 3 个。
2.  一些组织者可以有 3 个类别，并更新为有 2 个。
3.  组织者必须至少有 1 个类别（这是在客户端处理的）。

**编辑：** 我~~目前~~实施的解决方案是在插入修改的类别之前删除所有类别，然后使用客户端将限制限制为 3。我正在使用**MySQL**。数据库被标准化如下：

```
 organiser                                     organiser_categories
  +-------------------+                    +-------------------+--------------+
  |  organiser_email  |                    |  organiser_email  | category_id  |
  +-------------------+                    +-------------------+--------------+
  |  abc@gmail.com    |                    |   abc@gmail.com   |     1        |
  |  xyz@gmail.com    |                    |   abc@gmail.com   |     2        |
  +-------------------+                    +-------------------+--------------+

                             categories
                 +---------------+---------------+
                 |  category_id  | category_name |
                 +---------------+---------------+
                 |      1        |    Leisure    |
                 |      2        |    History    |
                 +---------------+---------------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:50:56.213

我确实认为您可以在应用程序站点而不是在 mysql 上进行检查（限制为 3 个类别）。这是数据验证的一部分。

更新到数据库时，我同意您删除所有类别并插入类别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T09:07:17.657

### 选项1：

通过触发器强制执行限制。

*优点/缺点：这使数据模型保持通用，并且您可以在必要时轻松更改限制，但涉及额外的查询（即行计数）。*

### 选项 2：

通过存储过程进行更新，并在那里实施限制。

*优点/缺点：与上述类似。*

### 选项 3：

重新设计您的模型：去掉`organiser_categories`并添加 3 个可 NULL 的 FK 字段`organiser`以存储多达 3 个类别。

*优点/缺点：这确保了符合限制而没有额外的性能损失，但需要更改查询逻辑，并且事后发展相对困难。此外，它包含比必要更多的信息：类别的“位置”（基于这三个字段中的哪一个代表它）。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T08:53:12.950

我建议您在客户端使用选择限制 3 来限制用户。这是为组织者删除相应数据并重新插入它们的更好方法。

```
delete from organiser_categories where organizer_email='abc@xyz.com';
insert into organiser_categories (organiser,category) 
values ('abc@xyz.com',1), ('abc@xyz.com',3); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T09:07:03.457

如果该组织者的类别总数超过三个，您*可以*定义一个拒绝新记录的`BEFORE INSERT`触发器：`organiser_categories`

```
CREATE TRIGGER limit_organiser_categories BEFORE INSERT ON organiser_categories
FOR EACH ROW
  IF (
    SELECT COUNT(DISTINCT category_id)  -- prefer COUNT(*) if appropriate
    FROM   organiser_categories
    WHERE  organiser_email = NEW.organiser_email
  ) = 3 THEN
    CALL too_many_categories;           -- call a non-existant procedure
  END IF; 
```

虽然这会强制您对数据库进行限制，但我仍然建议在客户端执行类似的检查，以便为用户提供有意义的反馈。**

# c++ - 快速获取客户数据

> ID：11307428
> 
> 赞同：0
> 
> 时间：2012-07-03T08:46:52.237
> 
> 标签：c++, winsock, ssl, iocp

有没有更好的方法（使用 Windows）可以在不使用 select 的情况下快速从许多客户端获取适量的数据（但如果需要，我愿意使用 select）。IOCP 对我没有好处，而 ippoll 则适用于 Linux。这必须与 OpenSSL 兼容，因为我正在运行 TLS。出于某种原因，BIO 对象在我的机器（Windows 7）上不起作用，它们只是不起作用。因此，我将加密捎带到了 Winsock 连接（有效）。感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:43:38.403

没有理由 select() 会比任何其他方法（包括阻塞模式 I/O、异步 I/O 等）明显更快或更慢，除非您要处理大量连接。在数据到达并被解密之前，您无法获取任何数据。可能您的问题出在发送端？

# sql-server-2008 - 在 SQL Server 2008 R2 上运行 50 MB 脚本时出错

> ID：11307435
> 
> 赞同：62
> 
> 时间：2012-07-03T08:47:22.593
> 
> 标签：sql-server-2008, sql-server-2008-r2

我正在使用 SQL Server 2008 R2，我有一个脚本来更新数据库，该脚本大小约为 50 MB，包含大约 800,000 行。

错误：

> 标题：Microsoft SQL Server 管理工作室
> 
> 无法执行脚本。
> 
> 附加信息：
> 
> 内存不足，无法继续执行程序。(mscorlib)

有人可以帮我运行这个脚本而不会出现这个错误吗？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-07-03T09:11:54.933

使用更精简内存的命令行工具 SQLCMD。它很简单：

```
SQLCMD -d <database-name> -i filename.sql 
```

您需要有效的凭据才能访问您的 SQL Server 实例，甚至访问数据库

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2014-01-22T01:20:30.437

添加到@user1293068 的答案中，我需要指定实例名称。这是我的完整语法：

```
sqlcmd -S <ComputerName>\<InstanceName> -d <DatabaseName> -i <MyScript.sql> 
```

这记录在 Technet 的[使用 sqlcmd 实用程序一](http://technet.microsoft.com/en-us/library/ms180944.aspx)文中。

（请注意，您必须输入“-S”的开关值，而不是“-s”。开关区分大小写。）

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2017-03-09T13:17:59.243

如果需要凭据

```
sqlcmd -S <ComputerName>\<InstanceName> -U <username> -P <password> -d <DatabaseName> -i <MyScript.sql> 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-03-04T21:57:41.050

您还可以尝试增加服务器属性中的最大服务器内存值。
要编辑此设置，请右键单击服务器名称并选择属性 > 内存选项卡。

我在尝试`30MB`在 SSMS 2012 中执行 SQL 脚本时遇到此错误。
将值从`1024MB`增加到后，`2048MB`我能够运行脚本。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-04-06T14:24:12.890

好的，没有一个答案足以让我的脚本成功恢复。

所以：

1.  确保您的网络帐户具有足够的权限来访问 SQL Server 实例和您要还原的特定数据库。

2.  如果您打算还原的数据库仅是从生成脚本生成的（经过修改以包括模式和数据），那么最好是实际存在的数据库

3.  以管理员模式运行命令行工具（如有必要），例如，从开始菜单上的运行中键入 CMD

4.  在命令行工具中，键入类似`"SQLCMD -d CMS -i C:\Carnotaurus\Data\script.sql"`. 这里，`CMS`是我要恢复的数据库的名称，`"C:\Carnotaurus\Data\script.sql"`是由 SMSS 中的 Generate Scripts 生成的恢复脚本的完整文件路径。

我希望这可以清除一些缺失的步骤。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-12-22T10:53:56.503

打开命令提示符

sqlcmd -S 服务器名 -i C:\Users\mycomputer\Downloads\script\yourscript.sql -d datebasename

# android - android 2.2中的前置摄像头视频录制失败

> ID：11307436
> 
> 赞同：0
> 
> 时间：2012-07-03T08:47:26.730
> 
> 标签：android, camera

我正在尝试从平板电脑的前置摄像头及其运行的 2.2 Android Froyo 捕获视频。我真的无法弄清楚这个错误背后的原因。由于平板电脑是 Tegra 2 Nvigia 芯片组，它会导致问题，是的，平板电脑有前置摄像头。请任何人都可以给我一个方向休息我会弄清楚。

这是我正在使用的代码，

```
 Camera cam = openFrontFacingCamera();
                    m_recorder = new MediaRecorder();
                    cam.unlock();
                    m_recorder.setCamera(cam);
                    m_recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
                    m_recorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
                    m_recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
                    m_recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
                    m_recorder.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);
                    m_recorder.setMaxDuration((int) 1000); 
                    m_recorder.setVideoSize(320, 240); 
                    m_recorder.setVideoFrameRate(15); 
                    m_recorder.setOutputFile("/sdcard/myvideo");

                    try {
                        m_recorder.prepare();
                    } catch (IllegalStateException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                  // CRASHING HERE:
                    m_recorder.start(); 
```

这是我在此方法之前使用的相机初始化功能

```
 private Camera openFrontFacingCamera() {
                    Camera camera = null;

                    // Look for front-facing camera, using the Gingerbread API.
                    // Java reflection is used for backwards compatibility with pre-Gingerbread APIs.
                    try {
                        Class<?> cameraClass = Class.forName("android.hardware.Camera");
                        Object cameraInfo = null;
                        Field field = null;
                        int cameraCount = 0;
                        Method getNumberOfCamerasMethod = cameraClass.getMethod( "getNumberOfCameras" );
                        if ( getNumberOfCamerasMethod != null ) {
                            cameraCount = (Integer) getNumberOfCamerasMethod.invoke( null, (Object[]) null );
                        }
                        Class<?> cameraInfoClass = Class.forName("android.hardware.Camera$CameraInfo");
                        if ( cameraInfoClass != null ) {
                            cameraInfo = cameraInfoClass.newInstance();
                        }
                        if ( cameraInfo != null ) {
                            field = cameraInfo.getClass().getField( "facing" );
                        }
                        Method getCameraInfoMethod = cameraClass.getMethod( "getCameraInfo", Integer.TYPE, cameraInfoClass );
                        if ( getCameraInfoMethod != null && cameraInfoClass != null && field != null ) {
                            for ( int camIdx = 0; camIdx < cameraCount; camIdx++ ) {
                                getCameraInfoMethod.invoke( null, camIdx, cameraInfo );
                                int facing = field.getInt( cameraInfo );
                                if ( facing == 1 ) { // Camera.CameraInfo.CAMERA_FACING_FRONT
                                    try {
                                        Method cameraOpenMethod = cameraClass.getMethod( "open", Integer.TYPE );
                                        if ( cameraOpenMethod != null ) {
                                            camera = (Camera) cameraOpenMethod.invoke( null, camIdx );
                                        }
                                    } catch (RuntimeException e) {
                                        Log.e(TAG, "Camera failed to open: " + e.getLocalizedMessage());
                                    }
                                }
                            }
                        }
                    }
                    // Ignore the bevy of checked exceptions the Java Reflection API throws - if it fails, who cares.
                    catch ( ClassNotFoundException e        ) {Log.e(TAG, "ClassNotFoundException" + e.getLocalizedMessage());}
                    catch ( NoSuchMethodException e         ) {Log.e(TAG, "NoSuchMethodException" + e.getLocalizedMessage());}
                    catch ( NoSuchFieldException e          ) {Log.e(TAG, "NoSuchFieldException " + e.getLocalizedMessage());}
                    catch ( IllegalAccessException e        ) {Log.e(TAG, "IllegalAccessException" + e.getLocalizedMessage());}
                    catch ( InvocationTargetException e     ) {Log.e(TAG, "InvocationTargetException" + e.getLocalizedMessage());}
                    catch ( InstantiationException e        ) {Log.e(TAG, "InstantiationException" + e.getLocalizedMessage());}
                    catch ( SecurityException e             ) {Log.e(TAG, "SecurityException" + e.getLocalizedMessage());}

                    if ( camera == null ) {
                        // Try using the pre-Gingerbread APIs to open the camera.
                        try {
                            camera = Camera.open();
                        } catch (RuntimeException e) {
                            Log.e(TAG, "Camera failed to open: " + e.getLocalizedMessage());
                        }
                    }

                    return camera;
                } 
```

这是错误：

```
 07-03 08:01:09.220: A/dalvikvm(32523): Exception!!! threadid=1: thread exiting with uncaught exception (group=0x4001d860)
            07-03 08:01:09.230: E/AndroidRuntime(32523): FATAL EXCEPTION: main
            07-03 08:01:09.230: E/AndroidRuntime(32523): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.webvideo.com/com.webvideo.com.MainActivity}: java.lang.IllegalStateException
            07-03 08:01:09.230: E/AndroidRuntime(32523):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
            07-03 08:01:09.230: E/AndroidRuntime(32523):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
            07-03 08:01:09.230: E/AndroidRuntime(32523):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
            07-03 08:01:09.230: E/AndroidRuntime(32523):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
            07-03 08:01:09.230: E/AndroidRuntime(32523):    at android.os.Handler.dispatchMessage(Handler.java:99)
            07-03 08:01:09.230: E/AndroidRuntime(32523):    at android.os.Looper.loop(Looper.java:123)
            07-03 08:01:09.230: E/AndroidRuntime(32523):    at android.app.ActivityThread.main(ActivityThread.java:4627)
            07-03 08:01:09.230: E/AndroidRuntime(32523):    at java.lang.reflect.Method.invokeNative(Native Method)
            07-03 08:01:09.230: E/AndroidRuntime(32523):    at java.lang.reflect.Method.invoke(Method.java:521)
            07-03 08:01:09.230: E/AndroidRuntime(32523):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
            07-03 08:01:09.230: E/AndroidRuntime(32523):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
            07-03 08:01:09.230: E/AndroidRuntime(32523):    at dalvik.system.NativeStart.main(Native Method)
            07-03 08:01:09.230: E/AndroidRuntime(32523): Caused by: java.lang.IllegalStateException
            07-03 08:01:09.230: E/AndroidRuntime(32523):    at android.media.MediaRecorder.start(Native Method)
            07-03 08:01:09.230: E/AndroidRuntime(32523):    at com.webvideo.com.MainActivity.onCreate(MainActivity.java:71)
            07-03 08:01:09.230: E/AndroidRuntime(32523):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
            07-03 08:01:09.230: E/AndroidRuntime(32523):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:49:54.993

正如你的代码所说，前置摄像头的 API 是在 Android 2.3（姜饼）中引入的。

它不适用于 Froyo。

# objective-c - Quicklook/QLPreviewController 显示一个空白页面。给出关于未找到框架符号的警告

> ID：11307443
> 
> 赞同：1
> 
> 时间：2012-07-03T08:47:51.660
> 
> 标签：objective-c, ios, quicklook, qlpreviewcontroller

我正在尝试从应用程序的**文档**文件夹中预览图像和其他文件。我已经在我的应用程序中实现了 Quicklook，它看起来正在启动，但它会弹出一个空白屏幕并记录以下警告：

> 警告：无法读取 /Developer/Platforms/iPhoneOS.platform/DeviceSupport/5.0 (9A334)/Symbols/System/Library/Frameworks/QuickLook.framework/DisplayBundles/Image.qldisplay/Image 的符号（找不到文件）。警告：本地找不到 Image.qldisplay/Image 的副本，从远程设备的内存中读取。这可能会减慢调试会话。

我不确定警告是它没有显示的原因，但我想我还是会把它包括在内。我没有从 QLPreviewController 本身得到任何实际错误。有什么方法可以测试它的成功/失败吗？

这就是我的设置方式：

```
QLPreviewController* preview ;
UIView* quickLookView ; 
```

和：

```
preview = [[QLPreviewController alloc] init];
preview.dataSource = self;
preview.delegate = self;

//set the frame from the parent view
CGFloat w= backgroundViewHolder.frame.size.width; 
CGFloat h= backgroundViewHolder.frame.size.height;
preview.view.frame = CGRectMake(0, 0,w, h);

//refresh the preview controller
[preview reloadData];
[[preview view] setNeedsLayout];
[[preview view] setNeedsDisplay];
[preview refreshCurrentPreviewItem];

//add it  
[quickLookView addSubview:preview.view]; 
```

和

```
- (id <QLPreviewItem>) previewController: (QLPreviewController *) controller previewItemAtIndex: (NSInteger) index
{
    NSURL* returnurl = [NSURL fileURLWithPath: @"/var/mobile/Applications/02D1E9A2-8B31-4323-8FDE-CC1786EFBD43/Documents/Photos/Image%20photos/7_Essay_PK33.jpg" ] ;
    NSLog(@"--- previewController %@ index: %d!" , returnurl , index ) ;

    return returnurl ;
    //return [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:[documents objectAtIndex:index] ofType:nil]];
} 
```

怎么了？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:03:08.797

检查以下项目： 1：确保您的图像在捆绑包中并成功复制到文档。

2：确保您已经正确并成功地添加了QuickLook框架——您可以检查
它是否包含在“BuildPhases”中。

3：检查是否忘记了“#import”

4：仔细检查设置 currentPreviewItemIndex 或委托方法“numberOfPreviewItemsInPreviewController”。

# xml - XML令牌的用途是什么？

> ID：11307444
> 
> 赞同：5
> 
> 时间：2012-07-03T08:47:55.327
> 
> 标签：xml, xml-parsing, metadata

通常 XML 文档以标题开头，例如`<?xml version="1.0" encoding="utf-8"?>`

考虑这个文件

```
 <?xml version="1.0" encoding="utf-8"?>
    <Foo>
        <?One?>
        <?Two some?>
        <?Three <?Nested ?> ?>
    </Foo> 
```

1.  可以在 XML 文档中`<?`重复使用吗？`?>`
2.  XML 解析器会忽略这些标签中的这些内容吗？如何得到它们？
3.  Three的嵌套标签有问题吗？

我的猜测是这些是文档属性，可以放在任何地方。对？此外，我正在考虑基于这些元标记进行一些 XML 数据生成。这是一个正确的方法吗？例如

```
 <?if a == b ?>
  <Node>IncludeIfEqual</Node>
  <?endif ?> 
```

PS谷歌没有帮助。它忽略`<?`关键字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:51:23.593

问号表示该命令是 XML 处理指令。这允许文档包含应用程序的说明。

请参阅此处：[处理说明](http://www.w3.org/TR/REC-xml/#sec-pi)

还有另一个有趣的小页面：

[XML请](http://www.xmlplease.com/xml/xmlquotations/pi)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T08:51:19.203

这些是 XML[处理指令](http://www.w3.org/TR/REC-xml/#sec-pi)。

> [处理指令] 不是文档字符数据的一部分，但必须传递给应用程序。

[这是一篇关于 XSLT 的 IBM 文章](http://www.ibm.com/developerworks/xml/library/x-wxxm2/index.html)，讨论了处理指令的用法和围绕它们进行编码。

# php - 将 js 文件的输出传递到另一个 php 文件

> ID：11307445
> 
> 赞同：0
> 
> 时间：2012-07-03T08:48:04.393
> 
> 标签：php, javascript

我有一个格式为 javascript 文件的输出

js文件看起来像

```
$(document).ready(function()
{
$.ajax({
type: "POST",
url: "test.php",
data: { name: "term", location: "Boston" }
}).done(function( msg ) {
 alert( "Data Saved: " + msg );
 });
  }); 
```

我想将这些值输出到一个单独的 excel 文件中。所以我使用 php 并将脚本写入另一个文件

```
<?php
$name = $_POST["name"];
$location = $_POST["location"];
<?php
header('Content-Type: text/csv; charset=utf-8');
header('Content-Disposition: attachment; filename=data.csv'); 
$output = fopen('php://output', 'w');
fputcsv($output, array('Type', 'Entity Name', 'Link'));
fputcsv($output, results);
?> 
```

并将javascript文件包含在php文件的标头部分中。bt我没有得到js文件生成的“结果”输出。如何将结果从 js 文件传递​​到 php 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:59:15.250

将数据从 js 传递到 php 的唯一方法是通过 POST 或 GET 请求。

这是一个关于它的老派教程：[http ://www.tizag.com/phpT/postget.php](http://www.tizag.com/phpT/postget.php)

“新”和简单的方法是通过带有 jquery 的 ajax：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

JS：

```
$.ajax({
  type: "POST",
  url: "some.php",
  data: { name: "John", location: "Boston" }
}).done(function( msg ) {
  alert( "Data Saved: " + msg );
}); 
```

PHP：

```
$name = $_POST["name"];
$location = $_POST["location"]; 
```

在“msg”中，您会收到从 php 脚本返回的内容。

# r - R数学注释

> ID：11307446
> 
> 赞同：4
> 
> 时间：2012-07-03T08:48:11.287
> 
> 标签：r, annotations, plotmath

我在数学注释中插入垂直线时遇到问题。我没有运气就搜索了注释符号。

我想在绘图的 x 标签中放置一个包含条件概率符号 (|) 的数学注释。我想要的是表达式 p(x_j | o_i) 其中“j”和“i”是下标。

我有以下结构

```
plot(1:10, xlab = expression( paste("Likelihood, p" * (y[i] %up% o[j])) )) 
```

我想用垂直线代替箭头。非常感谢任何帮助或指导。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T08:58:39.963

这会让你“那里”（对于“那里”的一些定义）：

```
plot(1:10, xlab = expression("Likelihood, p" * (y[i] ~ "|" ~ o[j]))) 
```

![绘图轴标签](../Images/85ceb2021e2b088f267eae6ba42265de.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-03T14:14:17.233

这不是 OP 的答案。似乎很多人喜欢玩`plotmath`R 中的 hack，但该[`tikzDevice`](http://cran.r-project.org/package=tikzDevice)软件包为我们提供了解决此类问题的不错的解决方案：您可以在 R 图中编写本机 LaTeX 表达式。然后[`knitr`](http://yihui.name/knitr/)使学习曲线不那么陡峭。以下是您可以使用 R 实现的目标（比 质量好得多`plotmath`）：

![来自 tikzDevice 和 kntir 的 tikz 图形](../Images/ce0c34d74a16a5623781da5d0fe527a1.png)

完整的 Rnw 源代码（另存为`test.Rnw`）：

```
\documentclass{article}
\usepackage{alltt}
\begin{document}
<<likelihood, fig.width=4, fig.height=2.5, dev='tikz'>>=
par(mar = c(4.5, 4, .1, .1))
plot(1:10, xlab = 'Likelihood, $p(y_{i}|o_{j})$')
@
\end{document} 
```

然后

```
install.packages(c('knitr', 'tikzDevice'))
library(knitr)
knit('test.Rnw') 
```

您将有一个名为的 PDF 文件`figure/likelihood.pdf`，即上面的图。有关更多示例，请参见[图形手册中的图 9 和软件包](https://github.com/downloads/yihui/knitr/knitr-graphics.pdf)[主手册](https://github.com/downloads/yihui/knitr/knitr-manual.pdf)中的第 7 页。`knitr`将 tikz 编译为 PDF 需要 LaTeX。

# wordpress - 在 WordPress 中通过远程 URL 启用媒体附件

> ID：11307449
> 
> 赞同：0
> 
> 时间：2012-07-03T08:48:29.347
> 
> 标签：wordpress, plugins, media, attachment

有什么方法可以让媒体附件接受 WordPress 中的远程 URL？

通常在 WordPress 中，为了能够将媒体附加到帖子中，我们需要先将其上传到本地服务器，但在这里我希望能够只提供来自其他站点的 URL 并将其作为附件，我们可以在列出其的媒体中搜索命名并在其他帖子中使用它作为正常附件。

有什么可能的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:12:34.017

它已经在 WordPress 中了！！！

添加新帖子时，单击上传媒体。

![在此处输入图像描述](../Images/3e87ca0401817818eb4f277e7e0c7163.png)

现在单击该`From URL`部分。您可以在此处附加来自外部链接的图像或视频。

![在此处输入图像描述](../Images/3646b76cb7dad3ae4459eb80aea39696.png)

就这样。干杯！！！

# c++ - Boost 图无法 union_set

> ID：11307450
> 
> 赞同：0
> 
> 时间：2012-07-03T08:48:30.593
> 
> 标签：c++, boost, boost-graph

这个问题与：[Using boost connected components with cartesian points](https://stackoverflow.com/questions/11185164/using-boost-connected-components-with-cartesian-points/11256026#11256026)

我在示例中进行了一些更改以使用笛卡尔点。这是我当前的代码：

```
using namespace boost;
typedef adjacency_list <vecS, vecS, undirectedS, cv::Point> Graph;
typedef graph_traits<Graph>::vertex_descriptor Vertex;
typedef graph_traits<Graph>::vertices_size_type VertexIndex;

int main()
{
    const int VERTEX_COUNT = 10;
    Graph graph(VERTEX_COUNT);

    std::vector<VertexIndex> rank(num_vertices(graph));
    std::vector<Vertex> parent(num_vertices(graph));

    typedef VertexIndex* Rank;
    typedef Vertex* Parent;

    disjoint_sets<Rank,Parent> ds(&rank[0], &parent[0]);

    initialize_incremental_components(graph,ds);
    incremental_components(graph,ds);

    graph_traits<Graph>::edge_descriptor edge;
    bool flag;

    std::vector<Vertex> verticesVector;
    //vector of points which creates graph
    std::vector<cv::Point> points;

    points.push_back(cv::Point(0,0));
    points.push_back(cv::Point(1,1));
    points.push_back(cv::Point(2,2));
    points.push_back(cv::Point(3,1));
    points.push_back(cv::Point(4,2));
    points.push_back(cv::Point(0,2));
    points.push_back(cv::Point(2,3));
    points.push_back(cv::Point(3,3));

    int i = 0;
    for(std::vector<cv::Point>::iterator it = points.begin(); 
            it !=points.end();it++, i++)  
    {
        verticesVector.push_back(add_vertex(graph));
        graph[i].x = (*it).x;
        graph[i].y = (*it).y;
    }

    typedef component_index<VertexIndex> Components;
    Components components(parent.begin(), parent.end());

    BOOST_FOREACH(VertexIndex current_index, components)
    {
        std::cout<<"component "<<current_index<<" contains: ";
        BOOST_FOREACH(VertexIndex child_index, components[current_index])
        {
            std::cout<<child_index<<" "<<" x = "<<graph[current_index].x<<";"<<graph[current_index].y<<"||";
        }
        std::cout<<std::endl;
    }

    boost::tie(edge,flag) = add_edge(verticesVector[0],verticesVector[1],graph);
    ds.union_set(verticesVector[0],verticesVector[1]);
    boost::tie(edge,flag) = add_edge(verticesVector[1],verticesVector[2],graph);
    ds.union_set(verticesVector[1],verticesVector[2]);
    boost::tie(edge,flag) = add_edge(verticesVector[2],verticesVector[3],graph);
    ds.union_set(verticesVector[2],verticesVector[3]);
    boost::tie(edge,flag) = add_edge(verticesVector[3],verticesVector[4],graph);
    ds.union_set(verticesVector[3],verticesVector[4]);
    boost::tie(edge,flag) = add_edge(verticesVector[1],verticesVector[5],graph);
    ds.union_set(verticesVector[1],verticesVector[5]);
    boost::tie(edge,flag) = add_edge(verticesVector[5],verticesVector[6],graph);
    ds.union_set(verticesVector[5],verticesVector[6]);
    boost::tie(edge,flag) = add_edge(verticesVector[6],verticesVector[7],graph);
    ds.union_set(verticesVector[6],verticesVector[7]);

    Components components2(parent.begin(), parent.end());

    /*BOOST_FOREACH(Vertex current_vertex, vertices(graph)) 
    {
        std::cout<< "representative["<<current_vertex<<"] = "
        << ds.find_set(current_vertex)<<std::endl;
    }

    std::cout<<std::endl;*/

    for(std::vector<Vertex>::iterator it = verticesVector.begin(); it !=  verticesVector.end(); it++)
    {
        std::cout<<"representative = "<<ds.find_set((*it))<<std::endl;
    }

    BOOST_FOREACH(VertexIndex current_index, components2)
    {
        std::cout<<"component "<<current_index<<" contains: ";
        BOOST_FOREACH(VertexIndex child_index, components[current_index])
        {
            std::cout<<child_index<<" "<<" x,y = "<<graph[current_index].x<<";"<<graph[current_index].y<<"||";
        }
        std::cout<<std::endl;
    }

    //write_graphviz(std::cout, graph);

    getchar();
    return 0;
} 
```

尝试 union_set() 时出现异常：访问冲突读取位置...我无法弄清楚原因。我已阅读有关 boost lib 的所有主题，并尝试在文档中搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:58:37.047

感谢本教程，我已经弄清楚了：[Algorithm for selection all edges and vertices connected to one vertex](https://stackoverflow.com/questions/5056520/algorithm-for-selecting-all-edges-and-vertices-connected-to-one-vertex?answertab=active#tab-top)

问题是：

*   我首先用一些顶点初始化向量（从示例中复制粘贴并修改不是最好的主意）
*   正如教程所说“请注意，graph[a VertexID] 给出了一个顶点，但是 graph[an EdgeID] 给出了一个 Edge”
*   添加一些顶点后应该初始化不相交集

工作代码：

```
using namespace boost;

typedef adjacency_list <vecS, vecS, undirectedS, cv::Point> Graph;
typedef graph_traits<Graph>::vertex_descriptor Vertex;
typedef graph_traits<Graph>::vertices_size_type VertexIndex;

int main()
{
    Graph graph;

    graph_traits<Graph>::edge_descriptor edge;
    bool flag;

    std::vector<Vertex> verticesVector;
    Vertex verticesTable[8];
    std::vector<cv::Point> points;

    points.push_back(cv::Point(0,0));
    points.push_back(cv::Point(1,1));
    points.push_back(cv::Point(2,2));
    points.push_back(cv::Point(3,1));
    points.push_back(cv::Point(4,2));
    points.push_back(cv::Point(0,2));
    points.push_back(cv::Point(2,3));
    points.push_back(cv::Point(3,3));

    int i = 0;
    for(std::vector<cv::Point>::iterator it = points.begin(); it != points.end(); it++, i++)
    {
        verticesTable[i] = add_vertex(graph);
        graph[verticesTable[i]].x = (*it).x;
        graph[verticesTable[i]].y = (*it).y;
    }

    std::vector<VertexIndex> rank(num_vertices(graph));
    std::vector<Vertex> parent(num_vertices(graph));

    typedef VertexIndex* Rank;
    typedef Vertex* Parent;

    disjoint_sets<Rank,Parent> ds(&rank[0], &parent[0]);

    initialize_incremental_components(graph,ds);
    incremental_components(graph,ds);

    typedef component_index<VertexIndex> Components;
    Components components(parent.begin(), parent.end());

    Graph::vertex_iterator vertexIt, vertexEnd;
    boost::tie(vertexIt,vertexEnd) = vertices(graph);
    for(;vertexIt != vertexEnd; ++vertexIt)
    {
        Vertex a = *vertexIt;
        cv::Point &b = graph[a];
        std::cout<<"Point: "<<b.x<<";"<<b.y<<std::endl;
    }

    boost::tie(edge,flag) = add_edge(verticesTable[0],verticesTable[1],graph);
    ds.union_set(verticesTable[0],verticesTable[1]);
    boost::tie(edge,flag) = add_edge(verticesTable[1],verticesTable[2],graph);
    ds.union_set(verticesTable[1],verticesTable[2]);
    //boost::tie(edge,flag) = add_edge(verticesTable[2],verticesTable[3],graph);
    //ds.union_set(verticesTable[2],verticesTable[3]);
    boost::tie(edge,flag) = add_edge(verticesTable[3],verticesTable[4],graph);
    ds.union_set(verticesTable[3],verticesTable[4]);
    boost::tie(edge,flag) = add_edge(verticesTable[1],verticesTable[5],graph);
    ds.union_set(verticesTable[1],verticesTable[5]);
    boost::tie(edge,flag) = add_edge(verticesTable[5],verticesTable[6],graph);
    ds.union_set(verticesTable[5],verticesTable[6]);
    boost::tie(edge,flag) = add_edge(verticesTable[6],verticesTable[7],graph);
    ds.union_set(verticesTable[6],verticesTable[7]);

    BOOST_FOREACH(Vertex current_vertex, vertices(graph)) 
    {
        std::cout<< "representative["<<current_vertex<<"] = "
        << ds.find_set(current_vertex)<<std::endl;
    }

    std::cout<<std::endl;

    Components components2(parent.begin(), parent.end());

    BOOST_FOREACH(VertexIndex current_index, components2)
    {
        std::cout<<"component "<<current_index<<" contains: ";
        BOOST_FOREACH(VertexIndex child_index, components2[current_index])
        {
              std::cout<<child_index<<" "<<" x,y = "<<graph[verticesTable[child_index]].x<<";"<<graph[verticesTable[child_index]].y<<"||";
        }
        std::cout<<std::endl;
    }

    //write_graphviz(std::cout, graph);

    getchar();

    return 0;
} 
```

我还在学习 boost Graph 所以请纠正我的错误，做出更优雅的解决方案。我的结论也可能不完全正确。

# visual-studio-2010 - Visual Studio 调试运行服务器

> ID：11307453
> 
> 赞同：2
> 
> 时间：2012-07-03T08:48:56.573
> 
> 标签：visual-studio-2010, visual-studio-2008

我有`C++`客户写的。我想逐步调试相同的，但在此之前我想启动单独的服务器，当我说启动调试客户端时我可以这样做吗？即当visual studio启动客户端库时，它应该首先是我的服务器（外部程序）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:01:04.093

有几种方法可以做到这一点，最好的方法是[多个启动项目](http://msdn.microsoft.com/en-us/library/ms165413%28v=vs.80%29.aspx)。这要求客户端和服务器项目都在同一个解决方案中。它允许同时调试两个 exe。使用远程调试监视器和更改`Configuration Properties->Debugging`选项，您甚至可以在单独的机器上启动服务器。

如果您不想调试服务器项目，可以[在此处执行类似我的回答的操作](https://stackoverflow.com/questions/5498911/run-multiple-instances-with-one-click-in-visual-studio/5539729#5539729)

另一种方法是启动一个批处理文件`Configuration Properties->Debugging->Command`并使其首先启动服务器，然后是客户端。

# iphone - 与多个开发人员一起处理同一个 iOS 项目时的 Xcode 4 工作流程

> ID：11307455
> 
> 赞同：4
> 
> 时间：2012-07-03T08:49:20.107
> 
> 标签：iphone, objective-c, ios, xcode, xcode4

任何人都可以帮助我提供一个完美的或官方的工作流程，在版本控制 [GIT/SVN] 下与多个开发人员一起处理 iOS 项目。

使用情节提要，我看不到开发人员锁定，如果其中两个修改情节提要，则存在合并冲突。Xcode XML 文件不太好合并，并且经常导致合并问题，实际上会损坏。了解 Apple 如何通过其内部团队管理这件事会非常有趣，这肯定会对我们有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:03:06.000

我们通常在我的工作室做的是建立一个具有以下布局的 SVN 存储库：

-/根项目文件夹
==/Dev1Sources
====/Sources
====/Views
==/Dev2Sources
====/Sources
====/Views
...等
-/共享库

需要注意的大事不要使用界面生成器来绑定变量和控件。您必须告诉您的开发人员以编程方式实例化委托和绑定。否则，集成时往往会产生大量问题。

使用以下工具：
-Trello。项目管理协作工具。添加您想要完成的任务，每当模块完成时，开发人员都会收到通知等。
-Apigee。API 文档工具。编写您预期的 I/O API，以便项目中的每个人都知道什么以及如何来回传递信息。极大地减少了 API 问题和开发停机时间。

遵循一些敏捷/精益开发业务实践来削减开支并提高开发成功率、速度等。

最后但并非最不重要的是，这就是一天在工作室中的分解方式。

0-1 小时 = 团队会议。开发人员应将整个目录更新为最新版本。
第 2-4 小时 = 开发
午餐
第 5-7 小时 = 开发
第 7-8 小时 = API 文档和团队汇报

这是一台上油良好的机器。哈哈

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T12:49:50.653

正如您所说，XML 文件很痛苦。我们发现以下帮助：

1.  让每个开发人员在自己的分支上工作，因此您只需合并一次。
2.  避免使用 NIB 和故事板 - 将所有视图代码放在视图类中，并在控制器代码中执行所有转换。
3.  保持您的群组按名称排序；这减少了项目文件冲突的数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T09:23:24.123

合并事物的难度取决于合并工具的质量。如果不退出（锁定）代码，冲突是不可避免的。这就是我所做的。我意识到每个人都会同时进行编辑，所以我放弃了故事板，而是回到了 XIB 文件。它们更加分散，并且更容易同时编辑两个部分（实际上，现在我什至摆脱了 NIB 文件并使用 XIB 文件加载的更抽象的格式）。另外，我不知道您的团队是否在本地，但我的团队在本地，我们互相通知我们将编辑文件。我们有一些冲突，但 P4Merge 使处理它们变得非常容易（即使在 XML 文件中）。你只需要习惯你正在看的东西

# javascript - javascript中的preg替换

> ID：11307458
> 
> 赞同：1
> 
> 时间：2012-07-03T08:49:23.970
> 
> 标签：javascript, jquery, regex

所以基本上我有一个很长的网址，像这样 -

[http://www.site.com/wp-content/themes/theme/timthumb.php?src=/wp-content/uploads/2012/random-image-name.jpg&w=650&h=0&zc=1&q=100](http://www.site.com/wp-content/themes/theme/timthumb.php?src=/wp-content/uploads/2012/random-image-name.jpg&w=650&h=0&zc=1&q=100)

我需要它来自动更改指向此的链接-

[http://www.site.com/wp-content/uploads/2012/random-image-name.jpg](http://www.site.com/wp-content/uploads/2012/random-image-name.jpg)

我知道使用 Javascript Preg Match 是可行的，但我不熟悉 preg match，所以我不确定如何创建它。

你能帮我创建链接吗？

将有一个包含 200 多张图片的帖子，我需要为每张图片都这样做，所以最好的解决方案是一次对所有图片都这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:54:30.563

**工作演示**应该足够了：http: [//jsfiddle.net/jdAxX/1/](http://jsfiddle.net/jdAxX/1/)

希望这会有所帮助，`:)`它所做的只是从中获取 url `indexOf`，`?`然后拆分您的 src 并根据需要使用它。

**代码**

```
var value = "http://www.site.com/wp-content/themes/theme/timthumb.php?src=/wp-content/uploads/2012/random-image-name.jpg&w=650&h=0&zc=1&q=100";
var returnStr = value.substr(value.indexOf("?") + 1);
var spliMe = returnStr.split('&');
var newURL = "http://www.site.com"+spliMe[0].split("=")[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:52:22.527

你在那里混合语言。`preg_match`是PHP，与JavaScript无关。

在 JS 中，您有多种使用正则表达式的方法，即、`test`和（以及其他）。我建议您从[http://www.regular-expressions.info](http://www.regular-expressions.info)开始了解 regex 的一般概述，然后阅读这篇文章[https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)。`match``search``exec`

首先尝试自己，如果遇到任何问题，请返回一些代码，人们将能够提供帮助。

# sql - 查询没有结果时 SQL Server Datediff 返回溢出错误

> ID：11307460
> 
> 赞同：1
> 
> 时间：2012-07-03T08:49:37.100
> 
> 标签：sql, sql-server, tsql, datediff

该查询即使在它确实有效的地方也没有返回任何结果，并且我收到以下错误。

> datediff 函数导致溢出。分隔两个日期/时间实例的日期部分的数量太大。尝试将 datediff 与不太精确的日期部分一起使用。

但是没有什么可以溢出的

以下工作：

```
SELECT cis.SaleBK   
FROM dbo.Sales cis
INNER JOIN dim.CalendarDate sd on cis.SaleDateFK = sd.CalendarDatePK
WHERE sd.CalendarDate >= DATEADD(day,-1,dbo.DateToday()) 
```

和这个：

```
SELECT cis.SaleBK
       ,DATEDIFF(s,'1969-01-01',sd.CalendarDate) as SortOrder
FROM dbo.Sales cis
INNER JOIN dim.CalendarDate sd on cis.SaleDateFK = sd.CalendarDatePK
WHERE sd.CalendarDate = DATEADD(day,-1,dbo.DateToday()) 
```

但这没有，我不知道为什么

```
SELECT cis.SaleBK
       ,DATEDIFF(s,'1969-01-01',sd.CalendarDate) as SortOrder
FROM dbo.Sales cis
INNER JOIN dim.CalendarDate sd on cis.SaleDateFK = sd.CalendarDatePK
WHERE sd.CalendarDate >= DATEADD(day,-1,dbo.DateToday()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:55:52.937

我写了一个循环来检查何时`datediff`返回错误：

```
; with  Dates as
        (
        select  cast('2012-01-01' as date) as dt
        union all
        select  dateadd(day, 1, dt)
        from    Dates
        )
select  dt
,       DATEDIFF(s,'1969-01-01',dt)
from    Dates
option  (maxrecursion 0) 
```

`1969-01-01`自和是第一个以来的秒数`2037-01-20`太大。

所以看起来`DateDiff`is`2^31`或返回的最大数`2147483647`。

您可以通过限制查询的日期范围来避免错误，例如：

```
WHERE  sd.CalendarDate >= DATEADD(day,-1,dbo.DateToday())
       and sd.CalendarDate < '2037-01-20' 
```

# css - 在不更改第一个 childDiv 的情况下更改第二个子 CSS

> ID：11307461
> 
> 赞同：1
> 
> 时间：2012-07-03T08:49:39.367
> 
> 标签：css

我有以下一种模式。如何在不更改第一个 childDiv 类 css 的情况下为第二个 childDiv 类应用 css 更改

```
<div class="parentDiv">
<div class="childDiv">   with same class
</div>
<div class="childDiv">   with same class 
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:50:55.387

嘿，现在已经习惯了

```
.childDiv:nth-of-type(2){
// css style ///
} 
```

或者 - - - - - - -

```
 .parentDiv > .childDiv:last-child{
    // css style ///
    } 
```

或者 - - - - - - - - -

如果你只有两个`childiv`

```
 .parentDiv > .childDiv + .childDiv{
    // css style ///
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T08:52:04.040

尝试这个 -

```
.childDiv:nth-child(2) {
  //css properties
} 
```

工作小提琴在[这里](http://jsfiddle.net/ashwyn/pmFS5/)

# php - PHP 正则表达式：包含量词的 OR 语句

> ID：11307463
> 
> 赞同：1
> 
> 时间：2012-07-03T08:49:45.730
> 
> 标签：php, regex

为什么不`an?|the`工作？我正在使用 PHP 的 preg_match()。

这是完整的正则表达式：`"/^an?|the (.+?) (is|was) an? (.+?)$/"`.

我希望它匹配`"the mona lisa is a painting"`和`"a dog is an animal"`.

`|the`在我添加以适应第一个字符串示例之前，它工作正常。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T08:53:41.560

你写它的方式要么匹配使用

```
^an? 
```

或者

```
the (.+?) (is|was) an? (.+?)$ 
```

这显然不是你想要的。你必须按照你的方式把它放在括号中`is|was`：

```
/^(an?|the) (.+?) (is|was) an? (.+?)$/ 
```

要防止组包含在结果中，请使用语法为 的不匹配组`(?: )`。所以只需像这样使用它：

```
/^(?:an?|the) (.+?) (is|was) an? (.+?)$/ 
```

# c# - 存储过程输出值到变量

> ID：11307464
> 
> 赞同：0
> 
> 时间：2012-07-03T08:49:47.193
> 
> 标签：c#, asp.net, sql-server, stored-procedures, ado.net

我是存储过程世界的新手。

我们有现有的系统和现有的存储过程，它检查用户名和 url 路径。存储过程将检查用户详细信息是否存在。如果存在，则返回用户名所属的组名。

我想要的只是为这个存储过程编写 asp.net c# 代码。传递用户详细信息和路径并将存储过程返回值返回到字符串变量中。

下面的 SQL Server 执行存储过程的链接

[http://www.natboxservices.com/helmshore/img/pic.jpg](http://www.natboxservices.com/helmshore/img/pic.jpg)

SQL Server 输出值的链接如下所示

[http://www.natboxservices.com/helmshore/img/2012-07-03%2009.35.13.jpg](http://www.natboxservices.com/helmshore/img/2012-07-03%2009.35.13.jpg)

请注意，上面的图片组名是空的，因为我执行了输入错误的存储过程，并且在 sqlserver 中不存在该数据的组名。如果存在，它将返回组名的值，例如“管理员”或“经理”

我的问题是“如果数据存在并返回组名我想将该值传递给字符串变量”用于分配参数并将返回值传递给字符串变量

这是我的存储过程

```
USE [IRC_siteadmin]
GO
/****** Object:  StoredProcedure [dbo].[sp_intranet_GetSecurity]    Script Date: 07/03/2012 10:05:35 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROCEDURE [dbo].[sp_intranet_GetSecurity]

@username VARCHAR(50),
@path VARCHAR(200),
@errorID INT OUTPUT

AS

BEGIN

SELECT
    G.name as groupname
FROM
    tbl_site_link L WITH(NOLOCK)
INNER JOIN
    tbl_site_link_group LG WITH(NOLOCK)
ON
    L.link_id = LG.link_id
INNER JOIN
    tbl_site_group G WITH(NOLOCK)
ON
    LG.group_id = G.group_id
INNER JOIN
    (       SELECT 
                group_id
            FROM 
                tbl_site_user U WITH(NOLOCK) 
            INNER JOIN
                tbl_site_user_group UG WITH(NOLOCK)
            ON
                U.user_id = UG.user_id
            WHERE 
                [name] = @Username ) U
ON
    G.group_id = U.group_id
WHERE
    L.url LIKE '%'+@path+'%'
    AND
    (U.group_id IS NOT NULL)

UNION

SELECT
    'Uber' as groupname
FROM
    tbl_site_link L WITH(NOLOCK)
INNER JOIN
    tbl_site_link_group LG WITH(NOLOCK)
ON
    L.link_id = LG.link_id
CROSS JOIN
    (       SELECT 
                group_id
            FROM 
                tbl_site_user U WITH(NOLOCK) 
            INNER JOIN
                tbl_site_user_group UG WITH(NOLOCK)
            ON
                U.user_id = UG.user_id
            WHERE 
                [name] = @Username
            AND
                group_id = 1 ) U
WHERE
    L.url LIKE '%'+@path+'%'
    AND
    (U.group_id IS NOT NULL)

END 
```

任何帮助表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:04:06.917

[如何：执行返回单个值的存储过程](http://msdn.microsoft.com/en-us/library/37hwc7kt%28v=vs.80%29.aspx)

[从 C# 中的存储过程中获取返回值](https://stackoverflow.com/questions/706361/getting-return-value-from-stored-procedure-in-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:23:19.700

尝试使用此代码

```
 string stringConnection = "Your connection to your database";
            using(var connection = new SqlConnection(stringConnection)
            {
                connection.Open();

                using (var command = new SqlCommand("sp_intranet_GetSecurity", connection))
                {
                    command.CommandType = CommandType.StoredProcedure;

                    command.Parameters.Add(new SqlParameter("@username", SqlDbType.VarChar));
                    command.Parameters["@username"].Value = "Your value";

                    command.Parameters.Add(new SqlParameter("@path", SqlDbType.VarChar, 8));
                    command.Parameters["@path"].Value = "Your value";

                    command.Parameters.Add(new SqlParameter("@errorID", SqlDbType.VarChar, 8));
                    command.Parameters["@errorID"].Value = "Your value";
                    command.Parameters["@errorID"].Direction = ParameterDirection.Output;

                    // Objet DataReader
                    SqlDataReader reader = command.ExecuteReader(CommandBehavior.CloseConnection);
                    Object[] row = null;
                    while (reader.Read())
                    {
                        if (row == null)
                        {
                            row = new Object[reader.FieldCount];
                        }
                        reader.GetValues(row);
                        for (int i = 0; i < row.GetLength(0); i++)
                        {
                            if (row[i] != DBNull.Value)
                            {
                                Console.Write(row[i]);
                            }
                            else
                            {
                                Console.Write("NULL");
                            }
                            if (i < row.GetUpperBound(0))
                            {
                                Console.Write("|");
                            }
                        }
                    }

               }
            } 
```

# c - DESTDIR 和 PREFIX 的 make

> ID：11307465
> 
> 赞同：149
> 
> 时间：2012-07-03T08:49:48.133
> 
> 标签：c, linux, bash, makefile, configure

我正在尝试将软件安装到特定目录。我找到了几种方法，但不确定它们之间有什么区别。

1.  `./configure --prefix=***`
2.  `make install DESTDIR=***`
3.  `make install prefix=***`

我对这三个的功能感到困惑。他们实现了相同的目标吗？

* * *

## 回答 #1

> 赞同：223
> 
> 时间：2012-07-03T09:09:19.673

> `./configure --prefix=***`

**Number 1** determines where the package will go when it is installed, and where it will look for its associated files when it is run. It's what you should use if you're just compiling something for use on a single host.

* * *

> `make install DESTDIR=***`

**Number 2** is for installing to a temporary directory which is not where the package will be run from. For example this is used when building `deb` packages. The person building the package doesn't actually install everything into its final place on his own system. He may have a different version installed already and not want to disturb it, or he may not even be root. So he uses

```
./configure --prefix=/usr 
```

so the program will expect to be installed in `/usr` when it runs, then

```
make install DESTDIR=debian/tmp 
```

to actually create the directory structure.

* * *

> `make install prefix=***`

**Number 3** is going to install it to a different place but not create all the directories as `DESTDIR=/foo/bar/baz` would. It's commonly used with GNU stow via

```
./configure --prefix=/usr/local && make && sudo make install prefix=/usr/local/stow/foo 
```

, which would install binaries in `/usr/local/stow/foo/bin`. By comparison,

```
make install DESTDIR=/usr/local/stow/foo 
```

would install binaries in `/usr/local/stow/foo/usr/local/bin`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-27T14:31:14.193

这可以帮助说明和的用法`DESTDIR`（`--prefix`从[这里](https://www.mcs.anl.gov/petsc/documentation/installation.html)）：

> **使用 --prefix 和 DESTDIR 进行多次安装：**
> 
> 在配置时为每个构建指定不同的 --prefix 位置/选项。例如：
> 
> ```
> untar petsc tar ball
> ./configure --prefix=/opt/petsc/petsc-3.9.0-mpich --with-mpi-dir=/opt/mpich
> make
> make install DESTDIR=/tmp/petsc-pkg
> untar petsc tar ball
> ./configure --prefix=/opt/petsc/petsc-3.9.0-openmpi --with-mpi-dir=/opt/openmpi
> make
> make install DESTDIR=/tmp/petsc-pkg 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-16T16:42:06.120

从`openssl/INSTALL`

> 想要为标准位置配置库但将包安装在其他地方以便可以轻松打包的包构建器可以使用
> 
> ```
> $ make INSTALL_PREFIX=/tmp/package-root install 
> ```
> 
> （或指定“--install_prefix=/tmp/package-root”作为配置选项）。指定的前缀将添加到所有安装目标文件名。

这是非标准的，但 INSTALL_PREFIX 在其他一些程序中使用。

这适用于 1.1.x 之前的 OpenSSL 版本。OpenSSL 1.1.x 及更高版本能够识别通常的`DESTDIR`.

# java - 如何使用 php 和 java 从代理服务器连接？

> ID：11307475
> 
> 赞同：-1
> 
> 时间：2012-07-03T08:50:08.053
> 
> 标签：java, php, proxy

我必须使用 php 和 java 通过代理服务器连接到互联网.....

因为我们必须在我的项目中的各种文件中使用互联网连接。

有什么方法可以在一个公共文件中编写通过代理服务器连接的程序，我们可以在任何我们想要的地方调用该文件？

对于 php 和 java..

谁能帮我？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:10:12.497

谷歌是你的朋友！

PHP [http://www.php.net/manual/en/function.stream-context-create.php#92586](http://www.php.net/manual/en/function.stream-context-create.php#92586)

```
$opts = array('http' => array('proxy' => 'tcp://127.0.0.1:8080', 'request_fulluri' => true));
$context = stream_context_create($opts);
$data = file_get_contents('http://www.php.net', false, $context);
echo $data; 
```

JAVA [http://jaydeepm.wordpress.com/2009/08/08/url-connection-via-proxy-the-java-1-5-way/](http://jaydeepm.wordpress.com/2009/08/08/url-connection-via-proxy-the-java-1-5-way/)

```
String proxyHost = "proxy.xyz.co.in"; //replace with your proxy server name or IP
int proxyPort = 8080; //your proxy server port
SocketAddress addr = new InetSocketAddress(proxyHost, proxyPort);
Proxy httpProxy = new Proxy(Proxy.Type.HTTP, addr);

URLConnection urlConn = null;
BufferedReader reader = null;
String response = "";
String output = "";
URL url = new URL("www.google.com");
//Pass the Proxy instance defined above, to the openConnection() method
urlConn = url.openConnection(httpProxy); 
urlConn.connect();
reader = new BufferedReader(new InputStreamReader(urlConn.getInputStream()));
response = reader.readLine();
while (response!=null) {
    output+= response;
    response = reader.readLine();
}   
System.out.println("Output: " + output); 
```

# wordpress - wordpress 中的主题安装失败

> ID：11307479
> 
> 赞同：-2
> 
> 时间：2012-07-03T08:50:28.740
> 
> 标签：wordpress, wordpress-theming

我刚刚尝试从 [http://webdesignandsuch.com/fancymoves-jquery-product-slider-2/](http://webdesignandsuch.com/fancymoves-jquery-product-slider-2/)安装一个主题，名称是“FancyMoves a jQuery Product Slider”，但 wordpress 给我写信：“无法安装包。主题缺少 style.css 样式表。” 我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:03:20.170

“FancyMoves a jQuery Product Slider”不是主题！它只是一个 jQuery 产品滑块。

检查[WordPress 主题部分](http://wordpress.org/extend/themes/)以获取基本的免费主题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T08:56:58.483

那是因为您尝试安装的不是 Wordpress 主题，而是 jQuery 滑块。老实说，我认为您需要学习很多东西，首先使用 Wordpress 存储库中提供的插件，然后逐步将自定义 jQuery 合并到您的主题中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T10:58:39.653

如果您尝试从管理面板上传主题文件，则可能会出现同样的问题，该文件是压缩`.rar`格式的。.rar 格式的 Wordpress 似乎表现不佳。

我有过这种经历，所以觉得值得分享。

# iphone - 在 TableView 中显示图像

> ID：11307481
> 
> 赞同：2
> 
> 时间：2012-07-03T08:50:37.507
> 
> 标签：iphone, objective-c, ios5, uitableview

我想在`TableView`. 我可以在一个单元格中显示一张图像，但我想显示四张图像，而不是像照片库那样在每一行中显示一张图像，当我选择任何图像时，它将以幻灯片形式打开，就像照片库中发生的那样。

我的图像存储在文档目录中。我怎样才能做到这一点？

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tablView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell == nil)
    {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    //Adjust your imageview frame according to you
    UIImageView *imageView = [[UIImageView alloc]initWithFrame:CGRectMake(0.0, 0.0, 470.0, 80.0)];

    [imageView setImage:[arrayOfImages objectAtIndex:indexPath.row]];
    [cell.contentView addSubview:imageView];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T09:16:08.993

现在我只是解释如何显示像 iPhone 库这样的图像。使用**UIScrollView**而不是**UITableView**。我想这会更好！

获取数组中的所有图像后，尝试以下代码：

```
-(void)loadImagesOnScrollView
{
    myScrollView = [[UIScrollView alloc]initWithFrame:CGRectMake(0.0, 0.0, 320.0, 416.0)];
    myScrollView.delegate = self;
    myScrollView.contentSize = CGSizeMake(320.0, 416.0);
    myScrollView.backgroundColor = [UIColor whiteColor];
    [self.view addSubview:myScrollView];

    float horizontal = 8.0;
    float vertical = 8.0;

    for(int i=0; i<[imageArray count]; i++)
    {
        if((i%4) == 0 && i!=0)
        {
            horizontal = 8.0;
            vertical = vertical + 70.0 + 8.0;
        }

        buttonImage = [UIButton buttonWithType:UIButtonTypeCustom];
        [buttonImage setFrame:CGRectMake(horizontal, vertical, 70.0, 70.0)];
        [buttonImage setTag:i];
        [buttonImage setImage:[imageArray objectAtIndex:i] forState:UIControlStateNormal];
        [buttonImage addTarget:self action:@selector(buttonImagePressed:) forControlEvents:UIControlEventTouchUpInside];
        [myScrollView addSubview:buttonImage];

        horizontal = horizontal + 70.0 + 8.0;
    }

    [myScrollView setContentSize:CGSizeMake(320.0, vertical + 78.0)];
} 
```

你可以像这样处理每个图像

```
-(void)buttonImagePressed:(id)sender
{
    NSLog(@"you have pressed : %d button",[sender tag]);
} 
```

（**注意：首先，这取决于你和你的逻辑，所以请让你的逻辑强大。没有人可以在这里写所有东西。如果你是初学者，那么请学习一段时间“All The Very Best”**）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T08:56:28.883

您需要创建和布局一个新的 UIView 并将您的图像添加到其中。然后，您可以将该视图添加到单元格的`contentView`中，而不是`UIImageView`您当前正在添加的（仅包含一个图像）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T09:35:04.433

实现一个每行有四个图像的表格视图，根据行标记每个图像。为每个图像添加点击识别器，并根据图像标签执行您想要的代码。以下是代码，

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   static NSString *cellidentifier=@"cell";
   UITableViewCell *cell=(UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:cellidentifier];

   if(cell==nil)
   {
       cell=[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellidentifier];
   }
   int x=0;

    //configure the cell 
    for(int i=0;i<4;i++)
    {
       UIImage *image=[UIImage imageNamed:@"hh.jpg"];
       UIImageView *im=[[UIImageView alloc]initWithImage:image];
       im.frame=CGRectMake(0+x, 0, 60, 60);
       x=x+61;

       im.tag=(indexPath.row*10)+i;
       im.userInteractionEnabled = YES;
       UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapAction:)];
       [im addGestureRecognizer:tapGesture];
       [cell addSubview:im];
    }

   //cell.backgroundView=img;
   [[cell textLabel] setBackgroundColor:[UIColor clearColor]];
   [[cell detailTextLabel] setBackgroundColor:[UIColor clearColor]];

return cell;
}

- (void) tapAction:(UIGestureRecognizer *)recognizer
{
     NSLog(@"Clicked Button With Tag =%i",recognizer.view.tag);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T09:36:33.090

您必须先设置数据。也许数组数组将是一个好方法。

```
-(void)prepareData
{
    NSMutableArray *finalArray = [[NSMutableArray alloc]init];

    int dataPerCell = 4;
    int remainingData = [allImagesData count] % dataPerCell;
    int pagesForData = [allImagesData count] / dataPerCell;

    NSMutableArray *arrayToAdd = [[NSMutableArray alloc]init];
    for (int j = 0; j<[allImagesData count]; j++)
    {
        [arrayToAdd addObject:[allImagesData objectAtIndex:j]];

        //Check if dividing the array is needed
        if ([allImagesData count] > dataPerCell)
        {
            if ([arrayToAdd count] == dataPerCell)
            {
                NSMutableArray *finalArray = [[NSMutableArray alloc]initWithArray:arrayToAdd];
                [arrayToAdd removeAllObjects];
                [finalArray addObject:finalArray];
            }
            else if([arrayToAdd count] == remainingData && [finalArray count] == pagesForData)
            {
                NSMutableArray *finalArray = [[NSMutableArray alloc]initWithArray:arrayToAdd];
                [arrayToAdd removeAllObjects];
                [finalArray addObject:finalArray];
            }
        }
        else if([allImagesData count] <= dataPerCell)
        {
            NSMutableArray *finalArray = [[NSMutableArray alloc]initWithArray:arrayToAdd];
            if ([finalArray count] == [allImagesData count])
            {
                [finalArray addObject:finalArray];
            }
        }
    }
} 
```

上面的代码会给你另一个数组的数组（finalArray），每个数组有四个数据。

您可以创建 的类子类`UITableViewCell`，并向其添加属性，例如 4 `UIImageViews`，然后将它们放置到位置。我假设在您的情况下，将它们水平放置。

```
 -(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
 {
      return [finalArray count];
 }

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(!cell)
    {
        cell = [[[CustomCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier]autorelease];
    }

    //This will throw an exception if [allImagesData count] < 4 OR your [allImagesData count]  % 4 != 0
    [cell.imageVw1 setImage:[UIImage imageNamed:[[finalArray objectAtIndex:indexPath.row ] objectAtIndex:0]]];
    [cell.imageVw2 setImage:[UIImage imageNamed:[[finalArray objectAtIndex:indexPath.row ] objectAtIndex:1]]];
    [cell.imageVw3 setImage:[UIImage imageNamed:[[finalArray objectAtIndex:indexPath.row ] objectAtIndex:2]]];
    [cell.imageVw4 setImage:[UIImage imageNamed:[[finalArray objectAtIndex:indexPath.row ] objectAtIndex:3]]];

    return cell;
} 
```

**注意：**代码未经测试。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-03T08:55:06.417

您将需要创建一个自定义单元子类 - 请参阅教程*[Custom UITableViewCells with Interface Builder](http://www.e-string.com/content/custom-uitableviewcells-interface-builder)*。另外，我建议对[Cocoa Touch](http://en.wikipedia.org/wiki/Cocoa_Touch)框架做一些进一步的研究和研究。祝你好运。

# javascript - 指示器在 loadmask sencha touch 中不起作用

> ID：11307487
> 
> 赞同：2
> 
> 时间：2012-07-03T08:51:01.363
> 
> 标签：javascript, html, sencha-touch, sencha-touch-2

我已经在控制器级别应用了加载掩码。我添加了自定义消息，例如“正在加载...”。对于使用参考，这将表明，页面正在加载。我也设置了指标：true。但我看不到指标。请任何人帮助我。如何向用户显示指标。

我的代码在这里：

```
OnInitCompanyPage: function () {
        Ext.Viewport.setMasked({ xtype: 'loadmask', message: 'Loading...', indicator:true});
            Ext.data.JsonP.request({
                url: SLS.BRND.WEB.common.Constants.wcfBaseUrl + 'PropertyService.svc/GetCompanyDetail',              
                method: 'POST',
                callbackkey: 'callback',
                params: {
                    format: 'json'
                },
                callback: function (response, value, request) {
                    var localdata = JSON.stringify(value);
                    localStorage.setItem('PromoURL', localdata);
                    Ext.Viewport.setMasked(false);
                },
                failure: function (response, request) {
                }
            });             
    } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-03T09:28:35.743

我正在使用 sass 风格。在 sass 文件夹 app.scss 中不包含关键字。**@include sencha-loading-spinner;** 现在我已经添加了这个并遵守了.. 现在指示器工作正常并且可见。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-31T09:46:27.547

在最新版本中，mixin **sencha-loading-spinner**已重命名为**st-loading-spinner，**所以现在你需要添加到你的*app.scss*

```
@include st-loading-spinner; 
```

# java - 如何使用 crawler4j 提取页面上的所有链接？

> ID：11307491
> 
> 赞同：1
> 
> 时间：2012-07-03T08:51:16.977
> 
> 标签：java, html, hyperlink, web-crawler, crawler4j

我正在实现一个网络爬虫，我正在使用 Crawler4j 库。我没有得到网站上的所有链接。我尝试使用 Crawler4j 提取一页上的所有链接，但错过了一些链接。

Crawler4j 版本： crawler4j-3.3

我使用的网址：http://testsite2012.site90.com/frontPage.html

此页面上的链接数：几乎 60 和其中 4-5 是重复的

crawler4j 给出的链接数：23

[这](http://ideone.com/3YTsR)是页面上的 URL 列表，[这](http://ideone.com/hGb57)是 Crawler4j 给出的 URL 列表。

我查看了 crawler4j 使用的“HtmlContentHandler.java”文件来提取链接。在此仅提取与“src”和“href”链接相关的链接。

我发现这些文件之间的区别。Crawler4j 缺少与“src”或“href”属性无关且位于“脚本”标签下的链接。 [这](http://ideone.com/buIZv)是 crawler4j 没有抓取的链接列表。

如何提取此页面上的所有链接？我需要在 HTML 解析页面上进行字符串操作（例如查找 'http' ）还是应该更改 'HtmlContentHandler.java' 文件的代码？

哪个是最好的方法？

即使我进行字符串操作并提取此页面上的所有链接，但 Crawler4j 正在使用自己爬取的链接来爬取网站，在这种情况下它不会错过一些页面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:59:19.907

尝试使用[正则表达式](http://docs.oracle.com/javase/tutorial/essential/regex/)来定位链接。

您可以[在这里](http://skolaprogramiranja.com/category/regular-expressions/)查看示例。

# php - Magento 快速搜索

> ID：11307494
> 
> 赞同：2
> 
> 时间：2012-07-03T08:51:22.530
> 
> 标签：php, html, forms, magento

我在使用 Magento 快速搜索时遇到了一个小问题。当我在框中搜索时说

`ice machine`

然后一切都将返回它所在的位置`ice`或`machine`标题中。我需要它，所以它只会搜索`ice machine`标题中包含确切字符串的产品。

我发现如果我加上`"ice machine"`双语音标记，它只会返回完全匹配的产品名称。

所以我需要一种方法，以便自动在搜索查询周围添加双语音标记，以便它会搜索全文而不是单独搜索两个单词。

有没有办法以 HTML 的形式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:18:49.807

MagentoCommerce 论坛多次讨论了这个问题。Like 搜索逻辑从 AND 更改为 OR。为了提供更好的结果，需要将其更改回 AND，以便搜索查询中的所有项目都必须匹配。

[搜索逻辑修复](http://www.magentocommerce.com/boards/viewthread/213559/#t287566)

在**app/code/core/Mage/CatalogSearch/Model/Mysql4/Fulltext.php**找到类`public function prepareResult($object, $queryText, $query)`

下面的一段代码：

```
if ($like) {
    $likeCond = '(' . join(' OR ', $like) . ')';
} 
```

需要是

```
if ($like) {
    $likeCond = '(' . join(' AND ', $like) . ')';
} 
```

创建您自己的重写模块以仅覆盖此类或通过将整个文件 Fulltext.php 复制到**app/code/local/Mage/CatalogSearch/Model/Mysql4/Fulltext.php**并将**OR**修改为**AND**来进行覆盖。该模块是优选的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:27:49.017

使用表单，您可以使用 javascript 执行此操作，但您必须注意客户是否已经自己输入了双引号。
我的建议是重写`Mage_CatalogSearch_Helper_Data`助手并覆盖该`getQueryText()`方法。在那里，您可以引用现有引号并在查询周围添加您自己的引号。

# python - How use Python unittest to test a class hierarchy?

> ID：11307503
> 
> 赞同：3
> 
> 时间：2012-07-03T08:52:06.070
> 
> 标签：python, unit-testing

given a Python class hierarchy, say

```
class Base:
    def method1
    def method2
    def method3
    ...
class Derived1(Base)
class Derived2(Base) 
```

etc.

and given that Base defines some common interface which is re-implemented differently in each Derived class. What would be the most straightforward way to unit test all member functions of all classes. Since i'm having a class hierarchy, i thought of doing something like...

```
class MyTestCase(unittest.TestCase):
    def testMethod1:
        ## Just as an example. Can be similar
        self.failUnless(self.instance.method1())
    def testMethod2
    ... 
```

And then setting up the test suite with test cases for different instantiations of the class hierarchy But how do i get the "instance" parameter into the MyTestCase class?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:48:05.567

The `skip` decorator applies to all of the subclasses as well as the base class so you cannot simply tell unittest to skip the base. The simplest thing is probably to not have the base test class derive from TestCase at all:

```
import unittest

class Base: pass
class Derived1(Base): pass

class BaseTest(object):
    cls = None

    def setUp(self):
        self.instance = self.cls()

    def test_Method1(self):
        print("run test_Method1, cls={}".format(self.cls))

class TestParent(BaseTest, unittest.TestCase):
    cls = Base

class TestDerived1(BaseTest, unittest.TestCase):
    cls = Derived1

unittest.main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:02:14.617

You can build the same tests hierarchy

```
class BaseTest()
    cls = None

    def setUp(self):
        self.instance = self.cls()

    def test_Method1(self) 
        ...

class TestParent(unittest.TestCase, BaseTest):
    cls = Base

class TestDerived1(unittest.TestCase, BaseTest):
    cls = Derived1

... 
```

# ruby-on-rails - 用于检查网站是否具有搜索引擎友好 URL 的 Ruby 代码

> ID：11307507
> 
> 赞同：6
> 
> 时间：2012-07-03T08:52:15.773
> 
> 标签：ruby-on-rails, ruby, nokogiri, friendly-url, seo

我正在 Rails 中开发一个应用程序，需要检查输入的网站是否生成了搜索引擎友好的 URL。我想到的解决方案是使用 nokogiri 解析网站的 HTML 并查看链接标签以查找 URL 和看看他们是否对搜索引擎友好。还有其他方法可以做到吗？任何帮助都会非常棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T10:20:17.473

你在这里有两个问题：

1.  您如何正式（以编程方式）定义什么是“搜索引擎友好的 URL”。我假设你已经有一些方法可以做到这一点。所以留下...

2.  如何检查网站上的所有链接。

因此，对于 (2)，我会看一些像[Anemone](http://anemone.rubyforge.org/)这样的东西，它可以让您轻松抓取完整的网站：

> Anemone 是一个 Ruby 库，可让您快速轻松地编写爬取网站的程序。它提供了一个简单的 DSL，用于在站点的每个页面上执行操作，跳过某些 URL，并计算到站点上给定页面的最短路径。
> 
> 多线程设计使 Anemone 速度更快。API 使它变得简单。Ruby 的表现力使它变得强大。

对于简单的抓取，Anemone 甚至会为您提供页面上所有链接的数组，因此您甚至不需要 Nokogiri。对于更复杂的东西，也许您想将 Anemone 与[Mechanize](http://mechanize.rubyforge.org/)和 Nokogiri 之类的东西结合起来。这取决于您的要求。

# delphi - 随着 Alpha 的降低，玻璃背景上的绘图文本变得模糊

> ID：11307509
> 
> 赞同：10
> 
> 时间：2012-07-03T08:52:28.160
> 
> 标签：delphi, google-chrome, windows-7, transparency, gdi+

我正在对 TIceTabSet（Chrome 选项卡）组件进行多项更新。其中一项更改是增加透明度。除了文字，一切都很好。随着背景的 alpha 通道越来越低，文本变得越来越模糊。这是一个屏幕截图。

![在此处输入图像描述](../Images/cf4f965fd1dc80076718599270b12905.png)

这是绘制选项卡的代码。其中大部分是原始的 TIceTabSet 代码。我只是添加了一些更改以使选项卡透明。对于示例屏幕截图，代码也进行了一些修改。底部的 DrawText 命令是将文本绘制到画布的位置。

```
procedure TIceTabSet.InnerDraw(Canvas: TCanvas; TabRect: TRect; Item: TIceTab);
var
  graphics : TGPGraphics;
  Pen: TGPPen;
  Brush: TGPSolidBrush;
  path, linePath: TGPGraphicsPath;
  linGrBrush: TGPLinearGradientBrush;
  font: TGPFont;
  solidBrush: TGPSolidBrush;
  rectF: TGPRectF;
  stringFormat: TGPStringFormat;
  DC: HDC;
  marginRight: integer;
  iconY, iconX: integer;
  textStart: Extended;
  startColor, EndColor, textColor, borderColor: cardinal;
  borderWidth: Integer;
  TabProperties: TIceTabProperties;
  Alpha: Byte;
begin
  DC := Canvas.Handle;

  TabProperties := GetTabProperties(Item);

  Alpha := Item.Index * 50;

  startColor := MakeGDIPColor(TabProperties.TabStyle.StartColor, Alpha);// TabProperties.TabStyle.Alpha);
  endColor := MakeGDIPColor(TabProperties.TabStyle.StopColor, Alpha); //TabProperties.TabStyle.Alpha);
  textColor := MakeGDIPColor(TabProperties.Font.Color, 255); //TabProperties.TabStyle.Alpha);
  borderColor := MakeGDIPColor(TabProperties.BorderColor, TabProperties.TabStyle.Alpha);
  borderWidth := TabProperties.BorderWidth;

  graphics := TGPGraphics.Create(DC);
  Brush := TGPSolidBrush.Create(borderColor);
  Pen:= TGPPen.Create(borderColor);
  Font := GetGDIPFont(Canvas, FTabActive.Font); //TabProperties.Font);
  try
    graphics.SetSmoothingMode(SmoothingModeHighQuality);

    pen.SetWidth(borderWidth);

    path := TGPGraphicsPath.Create();
    try
      path.AddBezier(TabRect.Left, TabRect.Bottom, TabRect.Left + FTabShape.LeftEdgeWidth / 2, TabRect.Bottom, TabRect.Left + FTabShape.LeftEdgeWidth / 2, TabRect.Top, TabRect.Left + FTabShape.LeftEdgeWidth, TabRect.Top);
      path.AddLine(TabRect.Left + FTabShape.LeftEdgeWidth, TabRect.Top, TabRect.Right - FTabShape.RightEdgeWidth, TabRect.Top);
      path.AddBezier(TabRect.Right - FTabShape.RightEdgeWidth, TabRect.Top, TabRect.Right - FTabShape.RightEdgeWidth / 2, TabRect.Top, TabRect.Right - FTabShape.RightEdgeWidth / 2, TabRect.Bottom, TabRect.Right, TabRect.Bottom);

      linePath := TGPGraphicsPath.Create;
      try
        linePath.AddPath(path, false);
        path.AddLine(TabRect.Right, TabRect.Bottom, TabRect.Left, TabRect.Bottom);

        linGrBrush := TGPLinearGradientBrush.Create(
          MakePoint(0, TabRect.Top),
          MakePoint(0, TabRect.Bottom),
          startColor,
          endColor);
        try
          graphics.DrawPath(pen, linePath);

          graphics.FillPath(linGrBrush, path);
        finally
          linGrBrush.Free;
        end;
      finally
        linePath.Free;
      end;
    finally
      path.Free;
    end;

    marginRight := 0;

    if TabDisplaysCloseButton(Item) then
    begin
      if (HighLightTabClose = Item) and
         (FTabCloseButton.ShowCircle) then
      begin
        pen.SetWidth(1);

        pen.SetColor(MakeGDIPColor(FTabCloseButton.CrossColorHotTrack, 255));
        brush.SetColor(MakeGDIPColor(FTabCloseButton.CircleColorHotTrack, 255));

        graphics.FillEllipse(brush, TabRect.Right - FTabShape.RightEdgeWidth - 7 - 2,
                                    TabRect.Top + ((TabRect.Bottom - TabRect.Top - 7) div 2) - 3,
                                    (TabRect.Right - FTabShape.RightEdgeWidth) - (TabRect.Right - FTabShape.RightEdgeWidth - 7) + 6,
                                    (TabRect.Top + ((TabRect.Bottom - TabRect.Top + 7) div 2)) - (TabRect.Top + ((TabRect.Bottom - TabRect.Top - 7) div 2)) + 6);

        graphics.DrawLine(pen, TabRect.Right - FTabShape.RightEdgeWidth - 5, TabRect.Top + ((TabRect.Bottom - TabRect.Top - 5) div 2),
                               TabRect.Right - FTabShape.RightEdgeWidth, TabRect.Top + ((TabRect.Bottom - TabRect.Top + 5) div 2));

        graphics.DrawLine(pen, TabRect.Right - FTabShape.RightEdgeWidth, TabRect.Top + ((TabRect.Bottom - TabRect.Top - 5) div 2),
                               TabRect.Right - FTabShape.RightEdgeWidth - 5, TabRect.Top + ((TabRect.Bottom - TabRect.Top + 5) div 2));
      end
      else
      begin
        pen.SetWidth(2);

        if HighlightTabClose = Item then
          pen.SetColor(MakeGDIPColor(FTabCloseButton.CrossColorHotTrack, 255))
        else
          pen.SetColor(MakeGDIPColor(FTabCloseButton.CrossColorNormal, 255));

        graphics.DrawLine(pen, TabRect.Right - FTabShape.RightEdgeWidth - 7, TabRect.Top + ((TabRect.Bottom - TabRect.Top - 7) div 2),
                               TabRect.Right - FTabShape.RightEdgeWidth, TabRect.Top + ((TabRect.Bottom - TabRect.Top + 7) div 2));

        graphics.DrawLine(pen, TabRect.Right - FTabShape.RightEdgeWidth, TabRect.Top + ((TabRect.Bottom - TabRect.Top - 7) div 2),
                               TabRect.Right - FTabShape.RightEdgeWidth - 7, TabRect.Top + ((TabRect.Bottom - TabRect.Top + 7) div 2));
      end;

      marginRight := 10;
    end;

    solidBrush:= TGPSolidBrush.Create(MakeGDIPColor(textColor, 255));

    stringFormat:= TGPStringFormat.Create;
    stringFormat.SetAlignment(StringAlignmentNear);
    stringFormat.SetLineAlignment(StringAlignmentCenter);
    stringFormat.SetTrimming(StringTrimmingEllipsisCharacter);
    stringFormat.SetFormatFlags(StringFormatFlagsNoWrap);

    SelectClipRgn(Canvas.Handle, 0);
    textStart := TabRect.Left + FTabShape.LeftEdgeWidth;
    iconX := 0;
    iconY := 0;

    if Assigned(Images) and (Item.ImageIndex <> -1) then
    begin
      iconY := TabRect.Top + ((TabRect.Bottom - TabRect.Top - Images.Height) div 2);
      iconX := Round(textStart);
      textStart := textStart + Images.Width + 4;
    end;

    rectF := MakeRect(textStart, TabRect.Top, TabRect.Right - textStart - FTabShape.RightEdgeWidth - marginRight,
      TabRect.Bottom - TabRect.Top);

    // ****** Text is drawn here *******
    if rectF.Width > 10 then
      graphics.DrawString(format('Alpha: %d', [Alpha]), -1, font, rectF, stringFormat, solidBrush);
    // *********************************

  finally
    font.Free;
    solidBrush.Free;
    Pen.Free;
    graphics.Free;
  end;

  if Assigned(Images) and
    (Item.ImageIndex <> -1) then
    Images.Draw(Canvas, iconX, iconY, Item.ImageIndex, true);
end; 
```

你可以在[这里](https://dl.dropbox.com/u/12307/EasyIP.UserInterface.ChromeTabs.pas)下载完整的源代码。请注意，这是一项正在进行的工作。源文件完成后将提交给原作者。

**更新 1**

按照 TLama 的建议更改代码肯定会有所帮助，但并不能完全解决问题。下面是文本现在的样子：

![在此处输入图像描述](../Images/e23a5c8ce9bf68463c5c524791c6463d.png)

...这是谷歌浏览器的外观：

![在此处输入图像描述](../Images/e796d228619d61da7f94bf38cb2290bb.png)

**更新 2**

这是**TextRenderingHintSingleBitPerPixelGridFit**的外观。

![在此处输入图像描述](../Images/7fa4517364ef1d8480b6332975f865ab.png)

我已经尝试了所有选项，**TextRenderingHintAntiAlias**给出了最好的结果。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-03T09:57:09.293

正如 Ian Boyd 在他的好帖子中建议的那样，[`How to draw ClearType text on Aero glass ?`](https://stackoverflow.com/q/4258330/960757)当您在一块玻璃上渲染文本时应该应用抗锯齿。因此，要解决您的问题，请尝试以这种方式修改您的代码：

```
if rectF.Width > 10 then
begin
  if (GetParentForm.GlassFrame.Enabled) and (GetParentForm.GlassFrame.SheetOfGlass) then
    graphics.SetTextRenderingHint(TextRenderingHintAntiAliasGridFit);
  graphics.DrawString(Item.DisplayCaption, -1, font, rectF, stringFormat, solidBrush);
end; 
```

为了模拟您的问题，只需在 Aero 玻璃板上渲染文本就足够了，就像下面的代码以 3 种不同的方式一样：

```
uses
  GDIPAPI, GDIPOBJ;

procedure TForm1.FormCreate(Sender: TObject);
begin
  Font.Color := clWhite;
  GlassFrame.SheetOfGlass := True;
  GlassFrame.Enabled := True;
end;

procedure TForm1.FormPaint(Sender: TObject);
var
  S: WideString;
  GPFont: TGPFont;
  GPGraphics: TGPGraphics;
  GPSolidBrush: TGPSolidBrush;
  GPGraphicsPath: TGPGraphicsPath;
begin
  S := 'This is a sample text rendered on the sheet of Aero glass!';
  GPFont := TGPFont.Create(Canvas.Handle, Font.Handle);
  GPSolidBrush := TGPSolidBrush.Create(MakeColor(GetRValue(Font.Color),
    GetGValue(Font.Color), GetBValue(Font.Color)));
  GPGraphicsPath := TGPGraphicsPath.Create;
  GPGraphicsPath.AddString(S, Length(S), TGPFontFamily.Create(Font.Name),
    GPFont.GetStyle, GPFont.GetSize, MakePoint(20.0, 60.0), nil);
  try
    GPGraphics := TGPGraphics.Create(Canvas.Handle);
    try
      GPGraphics.SetSmoothingMode(SmoothingModeAntiAlias);
      GPGraphics.FillPath(GPSolidBrush, GPGraphicsPath);
      GPGraphics.DrawString(S, Length(S), GPFont, MakePoint(20.0, 20.0),
        nil, GPSolidBrush);
      GPGraphics.SetTextRenderingHint(
        TextRenderingHintSingleBitPerPixelGridFit);
      GPGraphics.DrawString(S, Length(S), GPFont, MakePoint(20.0, 40.0),
        nil, GPSolidBrush);
    finally
      GPGraphics.Free;
    end;
  finally
    GPFont.Free;
    GPSolidBrush.Free;
    GPGraphicsPath.Free;
  end;
end; 
```

结果如下图：

1.  第一个文本由[`DrawString`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms535991%28v=vs.85%29.aspx)函数渲染，没有启用文本抗锯齿
2.  第二个是由[`DrawString`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms535991%28v=vs.85%29.aspx)启用文本抗锯齿的函数渲染的，配置为[`TextRenderingHintSingleBitPerPixelGridFit`](http://msdn.microsoft.com/en-us/library/ms534404%28v=vs.85%29.aspx)模式
3.  第三个是由路径填充渲染的，灵感来自[`this article`](http://www.codeproject.com/Articles/15394/Drawing-smooth-text-and-pictures-on-the-extended-g)将平滑模式设置为[`SmoothingModeAntiAlias`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms534173%28v=vs.85%29.aspx)样式

[![在此处输入图像描述](../Images/80117cb1f51c61ac05ddc759a038d247.png)](https://i.stack.imgur.com/T59tJ.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-04T00:00:34.780

作为替代方案，您可以尝试使用主题 api（Vista 及更高版本）进行绘图。使用各种阴影/边框/发光设置，可能会想出可读的文本。玻璃板上的一些试验：

  ![在此处输入图像描述](../Images/8e65b6891aa76ff36fedfd86b0594ee2.png)

代码（XE2）：

```
procedure TForm1.FormPaint(Sender: TObject);
var
  R: TRect;
  ThemeData: HTHEME;
  Opts: TDTTOpts;
begin
  R := Rect(10, 10, 150, 30);
  vcl.themes.DrawGlassText(Canvas.Handle, 'DrawGlassText Sample', R, 0, 3,
      clBlack, TStyleManager.SystemStyle.GetElementDetails(ttsLabel));

  OffsetRect(R, 160, 0);
  ThemeData := OpenThemeData(Handle, 'textstyle');

  Opts.dwSize := SizeOf(Opts);
  Opts.crText := ColorToRGB(clBlack);
  Opts.crShadow := $D0D0B0;
  Opts.iTextShadowType := TST_SINGLE;
  Opts.ptShadowOffset := Point(1, 1);
  Opts.fApplyOverlay := True;
  Opts.iGlowSize := 3;
  Opts.dwFlags := DTT_TEXTCOLOR or DTT_SHADOWTYPE or DTT_SHADOWCOLOR
      or DTT_SHADOWOFFSET or DTT_GLOWSIZE;
  DrawThemeTextEx(ThemeData, Canvas.Handle, TEXT_LABEL, TS_NORMAL,
      'DrawThemeTextEx Sample', -1, 0, @R, Opts);

  OffsetRect(R, 180, 0);
  Opts.crText := ColorToRGB(clBlack);
  Opts.iGlowSize := 4;
  Opts.fApplyOverlay := True;
  Opts.dwFlags := DTT_TEXTCOLOR or DTT_GLOWSIZE;
  DrawThemeTextEx(ThemeData, Canvas.Handle, TEXT_BODYTITLE, 0,
      'Another Sample', -1, 0, @R, Opts);

  CloseThemeData(ThemeData);
end; 
```

# jquery - jQuery 表单插件发送重复的电子邮件

> ID：11307510
> 
> 赞同：0
> 
> 时间：2012-07-03T08:52:28.517
> 
> 标签：jquery, email, jquery-forms-plugin

我在网站上使用 jQuery Form Plugin 从用户那里获取详细信息。按“提交”时，有时我会收到重复的电子邮件到我的 gmail 帐户。我试图通过从不同的浏览器发送表单来调试它，但我的尝试以 1 封邮件告终，其他人给了我 5 封重复的电子邮件。重复的电子邮件“同时发送”。

关于双击，我的脚本在点击后隐藏了按钮，所以这不是我们的问题。

我正在使用 ajaxForm 方法。

这有点烦人......有什么帮助吗？我的代码有问题还是服务器端问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:56:53.593

当用户单击提交按钮两次并且表单被发布两次时，就会发生这种情况。有不同的方法可以阻止[这种情况](https://stackoverflow.com/questions/5019666/prevent-double-form-submission-in-jquery)， [这篇](http://www.netmechanic.com/news/vol5/html_no16.htm)文章可能会帮助你做到这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:00:42.333

我认为这是因为回发而发生的，你能提供你的代码吗？这样我就可以告诉你确切的问题。

# list - 在 Sencha Touch List 中动态设置 itemTpl 中的图像

> ID：11307512
> 
> 赞同：0
> 
> 时间：2012-07-03T08:52:53.540
> 
> 标签：list, sencha-touch, sencha-touch-2, itemtemplate

我必须在列表的一行中设置带有文本的图像。但是要在运行时选择图像。

这是我的商店：

```
Ext.define('MyApp.model.Sample', {
           extend: 'Ext.data.Model',

           config: {
           fields: [ 
                    { name: 'uName', mapping: '@name' },
                    { name: 'uId', mapping: '@id' }
                    ]
                }
           }); 
```

在我的列表 itemTpl 中，我能够显示**uName**，并且我创建了一个假设返回所需图像的函数（getImageURL），那么我应该如何使用或者使用 上述**uId**的方式/语法是什么（其中值为 0 或 1)

这是我的清单：

```
 itemTpl : new Ext.XTemplate("<img src=\"{[this.getImageURL()]}\" width=\"20\" height=\"20\"></img><span>    {uName}</span>",
              {
               getImageURL : function()
                {

                // I have to return either of two images
                // if  uId = 0, return 'resources/images/Image0.png'
                // if uId = 1, return 'resources/images/Image1.png'

                }
              }
    ), 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:22:43.757

您不需要使用函数。`XTemplate`提供`if`和`else`声明。

[看看这里](http://docs.sencha.com/touch/2-0/#!/api/Ext.XTemplate)

**例子**

```
var tpl = new Ext.XTemplate(
    '<p>Name: {name}</p>',
    '<p>Kids: ',
    '<tpl for="kids">',
        '<p>{name} is a ',
        '<tpl if="age &gt;= 13">',
            '<p>teenager</p>',
        '<tpl elseif="age &gt;= 2">',
            '<p>kid</p>',
        '<tpl else>',
            '<p>baby</p>',
        '</tpl>',
    '</tpl></p>'
); 
```

希望这可以帮助

# php - php：编辑和删除

> ID：11307516
> 
> 赞同：-7
> 
> 时间：2012-07-03T08:53:19.333
> 
> 标签：php, edit

我想制作一个注册表单页面，其中还包含一个表格，我们将通过表格输入的数据检索到数据库中。该表还具有编辑和删除选项，以便我们以后可以进行任何更改。我看到了一个例子，如何制作这样的“编辑和删除”表。但我无法理解下面给出的代码：

```
<?php

    if(isset($_REQUEST['s']))
    { 
        if($_REQUEST['s']=="m")
        {
            echo "Successfully deleted.";
        }
    }

    if(isset($_REQUEST['s']))
    { 
        if($_REQUEST['s']=="e")
        {
            echo "Successfully update.";
        }
    }
?> 
```

你能逐行解释它的含义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T08:59:03.080

下面的代码没有多大意义。如果有的话应该重写

```
if(isset($_REQUEST['s']))
{ 
    switch($_REQUEST['s'])
    {
        case "m":
            echo "Success fully deleted.";
            break;
        case "e":
            echo "Success fully update.";
            break;
    }
} 
```

此代码检查“s”是否已作为 $_POST 或 $_GET 变量传递，如果是 s=m 则显示消息，该实体已成功删除，如果 e，则已成功更新。

通常，尝试使用更详细的变量名称，并避免使用 $_REQUEST，因为这会带来安全隐患

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:04:38.883

`$_REQUEST['s']` ----> 这将获得提交按钮名称`<input type="submit" name="s" value="m" />`

m 和 e 是提交按钮的值

```
<?php
 if(isset($_REQUEST['s'])) // to check if button is pressed or not  
{ if($_REQUEST['s']=="m")  //if m button is clicked
{ 
 //code for delete
echo "Success fully deleted.";
}}
 if(isset($_REQUEST['s']))  
{ if($_REQUEST['s']=="e")  // if e button is clicked
{
  //code for update into db
echo "Success fully update.";
}}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T09:05:29.437

```
    if(isset($_REQUEST['s'])) { // 如果请求 "s" 存在 eq index.php?s=hello
     if($_REQUEST['s']=="m") { // 现在让我们看看请求“s”有什么值 IF s=="m"
         echo "成功完全删除。"; // 输出，因为 s 的值为“m”
     }
    }

```

要更好地理解，试试这个

```
    if(isset($_REQUEST['s'])) {
     if($_REQUEST['s']=="m") { // 现在让我们看看请求“s”有什么值 IF s=="m"
         echo "成功完全删除。"; // 输出，因为 s 的值为“m”
     } 别的 {
        echo "s 不等于 'm': s 的值为 ".$_REQUEST['s'];
     }
    } 别的 {
      echo "我需要 Request 做某事";
      echo "<pre>我收到的请求：".print_r($_REQUEST,1)."</pre>";
   }

```

现在试试：

yourscript.php?s=m

yourscript.php?s=你好

你的脚本.php

# android - 画廊限制投掷距离

> ID：11307519
> 
> 赞同：1
> 
> 时间：2012-07-03T08:53:32.483
> 
> 标签：android

我正在为此[线程](https://stackoverflow.com/questions/5426439/how-to-disable-fling-in-android-gallery)使用一种方法，以使画廊每次滑动都会更改一个图像。我的问题是，要发生这种图像更改，用户必须将图像拖动到画廊宽度的至少 50%，这在大型设备上可能变得不可接受。

所以，我需要使拖动距离比现在更小（默认为 50%）。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:09:17.047

我建议两种选择：

1：使用支持库中的 ViewPager 代替图库。使用 ViewPager 时，您一次只能拖动一页，而没有画廊的轮播效果。

[http://developer.android.com/reference/android/support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

2：如果你想坚持使用 Gallery：Yaaic（一个 IRC 客户端）在早期版本中也使用了 Gallery，而且一次滚动几页太容易了，所以我们在这次提交中降低了 Gallery 的敏感度：

[https://github.com/pocmo/Yaaic/commit/db91a85676210c7f36510861c38b935d87d65bb9](https://github.com/pocmo/Yaaic/commit/db91a85676210c7f36510861c38b935d87d65bb9)

# xml - 使用 XSD 过滤 XML

> ID：11307520
> 
> 赞同：0
> 
> 时间：2012-07-03T08:53:35.040
> 
> 标签：xml, xslt, xsd

我有一个 XML 及其 XSD 文件。所以，XSD 说哪些是 XML 的必填字段，我只需要提取它们 - 基本上是一个只有必填字段的新 XML（坦率地说，我需要`minOccurs='1'`XSD 中的节点）。我知道为此我需要 XSLT，但是有什么方法/应用程序可以生成一个 XSLT，它只会提取`minOccurs='1'`XSD 文件中的节点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T09:49:59.100

如果您将 xsd 文件用作文档并且您有一个简单的结构，您可以在一个文件中完成。所以给定一个模式：

```
<xs:element name="nodes">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="test1" minOccurs="1"/>
      <xs:element name="test2" minOccurs="0"/>
      <xs:element name="test3" minOccurs="0"/>
      <xs:element name="test4" minOccurs="1"/>
      <xs:element name="test5" minOccurs="0"/>
      <xs:element name="test6" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>
</xs:element> 
```

和一个 XML 文件，例如：

```
<nodes>
    <test1>blah</test1>
    <test2>blah</test2>
    <test3>blah</test3>
    <test4>blah</test4>
    <test5>blah</test5>
    <test6>blah</test6>
</nodes> 
```

然后这个样式表：

```
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
        xmlns:xs="http://www.w3.org/2001/XMLSchema">
        <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

        <xsl:variable name="xsd" select="document('so.xsd')"/>
        <xsl:template match="/">
            <xsl:apply-templates select="nodes"/>
        </xsl:template>

        <xsl:template match="nodes">
            <allowed>
                <xsl:variable name="allowedNodes" select="$xsd//xs:element[@name='nodes']"/>
                <xsl:for-each select="*">
                    <xsl:variable name="name" select="name()"/>
                    <xsl:if test="$allowedNodes//xs:element[@name=$name and @minOccurs='1']">
                        <xsl:copy-of select="."/>
                    </xsl:if>
                </xsl:for-each>
            </allowed>
         </xsl:template>

    </xsl:stylesheet> 
```

会给你：

```
<?xml version="1.0" encoding="UTF-8"?>
<allowed xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <test1>blah</test1>
  <test4>blah</test4>
</allowed> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T12:13:54.003

对任意模式执行此操作很棘手。例如，您可能会遇到像 (ABA?B) 这样的内容模型，其中第一个 A 是强制性的，第二个是可选的。或者，当然，您可能会遇到 minOccurs="2"。我认为没有捷径可走。这是一个重要的项目。但是，如果您准备好软化要求，例如只处理以特定方式编写的模式或避免笨拙的结构，那么它可能会更容易。

# c# - 在 Datagridview 中编辑单行并刷新该行

> ID：11307524
> 
> 赞同：0
> 
> 时间：2012-07-03T08:54:16.570
> 
> 标签：c#, winforms

我的 datagridview 中有 10000 行，现在当我编辑其中一行时，我应该使用我编写的选择存储过程刷新所有行。

你如何建议我只刷新（选择）那个编辑的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:03:20.717

由于您已经添加了新值，因此可能不需要刷新整个网格，仅在需要另一条记录时刷新它，或者更新该行并获取索引并使用您已有的索引仅重新加载该行

# c# - 从 Windows 手机中的父项绑定到 ItemsPanelTemplate

> ID：11307531
> 
> 赞同：3
> 
> 时间：2012-07-03T08:54:47.287
> 
> 标签：c#, xaml, windows-phone-7.1, itemspaneltemplate

我想更改 ItemsPanelTemplate 内的 StackPanel 的方向...要更改方向，我已经实现了一个属性.. 有什么方法可以更改 StackPanel 的方向。我尝试了以下代码..但它没有成功。

```
<Setter Property="ItemsPanel">
    <Setter.Value>
        <ItemsPanelTemplate>
             <StackPanel Orientation="{Binding MyOrientation,RelativeSource={RelativeSource TemplatedParent}}" HorizontalAlignment="Left" />
        </ItemsPanelTemplate>
    </Setter.Value>
</Setter> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-04T21:02:13.253

利用`{RelativeSource AncestorType=YourItemsControlType}`

**MyItemsControl.cs：**

```
namespace MyNamespace.Controls
{
    public partial class MyItemsControl : ItemsControl
    {
        public static readonly DependencyProperty MyOrientationProperty =
            DependencyProperty.Register(
            "MyOrientation",
            typeof(Orientation),
            typeof(MyItemsControl));

        public Orientation MyOrientation
        {
            get { return (Orientation)GetValue(MyOrientationProperty); }
            set { SetValue(MyOrientationProperty, value); }
        }
    }
} 
```

**MyItemsControls.xaml**

```
<Style xmlns:source="clr-namespace:MyNamespace.Controls" TargetType="source:MyItemsControl">
    <Setter Property="ItemsPanel">
        <Setter.Value>
            <ItemsPanelTemplate>
                <StackPanel 
                    Orientation="{Binding Orientation, 
                        RelativeSource={
                            RelativeSource AncestorType=source:MyItemsControl
                        }
                    }"
                    HorizontalAlignment="Left" />
            </ItemsPanelTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

**参考：http:** [//msdn.microsoft.com/en-us/library/ms743599%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/ms743599%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T04:39:53.900

[RelativeSource.TemplatedParent](http://msdn.microsoft.com/en-us/library/system.windows.data.relativesource.templatedparent.aspx)用于`ControlTemplates`.

[在此处](http://www.windowsphonegeek.com/tips/working-with-itemspanel-in-wp7)参考一些示例

# python - numpy 中是否有等效的 Matlab 点函数？

> ID：11307538
> 
> 赞同：5
> 
> 时间：2012-07-03T08:55:32.773
> 
> 标签：python, matlab, numpy

`dot`numpy中是否有等效的Matlab函数？

Matlab 中的`dot`函数： 对于多维数组 A 和 B，dot 返回沿 A 和 B 的第一个非单维的标量积。 A 和 B 必须具有相同的大小。

在 numpy 中，以下类似但不等价：

```
dot (A.conj().T, B) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-03T09:34:16.163

在 MATLAB 中，两个大小相同`dot(A,B)`的矩阵很简单：`A``B`

```
sum(conj(A).*B) 
```

等效的 Python/Numpy：

```
np.sum(A.conj()*B, axis=0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-01T16:20:18.907

Matlab示例1：

`A = [1,2,3;4,5,6] B = [7,8,9;10,11,12] dot(A,B)`

结果：47 71 99

Matlab示例2：

`sum(A.*B)`

结果：47 71 99

Matlab 示例 2 的 Numpy 版本：

`A = np.matrix([[1,2,3],[4,5,6]]) B = np.matrix([[7,8,9],[10,11,12]]) np.multiply(A,B).sum(axis=0)`

结果：矩阵（[[47, 71, 99]]）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-03T09:38:53.730

检查这些备忘单。

*   Numpy 的[http://www.scipy.org/NumPy_for_Matlab_Users/](http://www.scipy.org/NumPy_for_Matlab_Users/)
*   [http://mathesaurus.sourceforge.net/matlab-numpy.html](http://mathesaurus.sourceforge.net/matlab-numpy.html)

> Numpy 包含一个数组类和一个矩阵类。array 类旨在成为用于多种数值计算的通用 n 维数组，而 matrix 旨在促进线性代数计算。实际上，两者之间只有少数几个关键区别。
> 
> 运算符`*`、点（）和乘法（）：
> 对于数组，`*`表示逐元素乘法，点（）函数用于矩阵乘法。
> 对于矩阵，`*`表示矩阵乘法，multiply() 函数用于逐元素乘法。

# php - php + oauth：是否可以从不同于应用程序域的域发出 oauth-request

> ID：11307555
> 
> 赞同：0
> 
> 时间：2012-07-03T08:56:32.233
> 
> 标签：php, facebook, oauth

我有一个应用程序（站点），例如在 Facebook 上，域是`mydomin.com`. 只是想知道是否有办法使用不同于域的该应用程序的 appid 发出 oauth 请求`mydomin.com`？

先感谢您！

**UPD：**请不要提出特定于具体 oauth 服务器的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:05:00.823

在 Facebook 开发者页面中编辑您的应用程序时`App Domains`，您可以在其中添加多个域：

![在此处输入图像描述](../Images/31721f6fc6384284f857de6cd1cd91a8.png)

所有来自添加域的请求都将被允许使用 AppId 和 AppSecret 与应用程序交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:02:15.780

您可以在 facebook 的应用程序设置中添加多个域，只要您在其中添加不同的域，它应该可以正常工作。

[https://developers.facebook.com/apps/](https://developers.facebook.com/apps/)

# nlog - 为什么 NLog 配置更改不生效？

> ID：11307558
> 
> 赞同：0
> 
> 时间：2012-07-03T08:56:43.203
> 
> 标签：nlog, nlog-configuration

我试图通过以下方式更改 NLog 的配置：

```
LogManager.Configuration.AddTarget (name, foo);
LogManager.Configuration.LoggingRules.Add (new LoggingRule ("*", LogLevel.Trace, foo)); 
```

但它默默地忽略了我的更改。但是，当我尝试

```
SimpleConfigurator.ConfigureForTargetLogging (this, level); 
```

它立即工作 - 但丢弃了所有以前的配置。为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:56:43.733

SimpleConfigurator 替换当前配置，因此您不能将其用于聚合案例。

NLog 不会检测和跟踪对其当前配置所做的更改，除非您通过`LogManager.Configuration = new_config`. 所以改用这个：

```
var conf = LogManager.Configuration;
conf.AddTarget (name, foo);
conf.LoggingRules.Add (new LoggingRule ("*", LogLevel.Trace, foo));
LogManager.Configuration = conf; 
```

# android - 将 GestureDetector 设置为所有子视图

> ID：11307560
> 
> 赞同：9
> 
> 时间：2012-07-03T08:56:47.203
> 
> 标签：android, viewgroup, gesturedetector, onfling

我想将 GestureDetector 添加到活动的所有视图（视图组）中，而无需手动将其分配给每个视图。现在 onFling() 仅在在背景上滑动时被激活，但在例如 button1 上滑动时不会被激活。

```
package com.app.example;

import android.app.Activity;
import android.content.Context;
import android.graphics.Color;
import android.os.Bundle;
import android.util.Log;
import android.view.GestureDetector;
import android.view.MotionEvent;
import android.view.GestureDetector.SimpleOnGestureListener;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.Button;
import android.widget.LinearLayout;

public class ExampleActivity extends Activity {
    Context mContext = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mContext = this;

        LinearLayout parent = new LinearLayout(mContext);
        parent.setOrientation(LinearLayout.VERTICAL);
        parent.setBackgroundColor(Color.RED);

        Button button1 = new Button(mContext);
        button1.setText("Button 1");
        Button button2 = new Button(mContext);
        button2.setText("Button 2");

        parent.addView(button1);
        parent.addView(button2);

        final GestureDetector gestureDetector = new GestureDetector(
                new MyGestureDetector());

        parent.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                gestureDetector.onTouchEvent(event);

                return true;
            }
        });

        setContentView(parent);
    }
}

class MyGestureDetector extends SimpleOnGestureListener {

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2,
            float velocityX, float velocityY) {

        // right to left
        if(e1.getX() - e2.getX() > 10 && Math.abs(velocityX) > 20) {
            Log.i("onFling", "right to left");

            return false;

        // left to right
        }  else if (e2.getX() - e1.getX() > 10 && Math.abs(velocityX) > 20) {
            Log.i("onFling", "left to right");

            return false; 
        }

        return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T10:26:26.560

您可以使用[GestureOverlayView](http://developer.android.com/reference/android/gesture/GestureOverlayView.html)查看之前的[stackoverflow 帖子](https://stackoverflow.com/questions/5434258/using-a-gesture-overlay-view-in-android)，了解如何使用它。

# java - jsf 2 和甲骨文

> ID：11307563
> 
> 赞同：0
> 
> 时间：2012-07-03T08:56:56.107
> 
> 标签：java, hibernate, jakarta-ee, jsf-2, hibernate-mapping

我在我的项目中使用 jsf2 hibernate 4.1.4 和 spring3。但在我的 defaut.xhtml 中，我只能将数据插入到 oracle。但我在我的页面中看不到数据。添加新客户完成。但我的 jsf 中的数据表代码无法运行。我的错误是：

```
value="#{CustomerMB.getCustomerList()}":org.hibernate.hql.internal.ast.QuerySyntaxException: CUSTOMER is not mapped [from CUSTOMER] 
```

默认.xhtml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      >
    <h:head>
        <h:outputStylesheet library="css" name="table-style.css"  />
    </h:head>

    <h:body>

        <h:dataTable value="#{CustomerMB.getCustomerList()}" var="c"
                styleClass="order-table"
                headerClass="order-table-header"
                rowClasses="order-table-odd-row,order-table-even-row"
            >

            <h:column>
                <f:facet name="header">
                    Customer ID
                </f:facet>
                    #{c.customerId}
            </h:column>

            <h:column>
                <f:facet name="header">
                    Name
                </f:facet>
                    #{c.name}
            </h:column>

            <h:column>
                <f:facet name="header">
                    Address
                </f:facet>
                    #{c.address}
            </h:column>

            <h:column>
                <f:facet name="header">
                    Created Date
                </f:facet>
                    #{c.createdDate}
            </h:column>

        </h:dataTable>

        <h2>Add New Customer</h2>
        <h:form>

            <h:panelGrid columns="3">
                Customer ID : 
                <h:inputText id="customerId" value="#{CustomerMB.customerId}" 
                    size="20" required="true"
                    label="customerId" >
                </h:inputText>

                <h:message for="customerId" style="color:red" />
                Name : 
                <h:inputText id="name" value="#{CustomerMB.name}" 
                    size="20" required="true"
                    label="Name" >
                </h:inputText>

                <h:message for="name" style="color:red" />

                Address : 
                <h:inputTextarea id="address" value="#{CustomerMB.address}" 
                    cols="30" rows="10" required="true"
                    label="Address" >
                </h:inputTextarea>

                <h:message for="address" style="color:red" />

created Date : 
                <h:inputTextarea id="createdDate" value="#{CustomerMB.createdDate}" 
                    size="20" required="true"
                    label="createdDate" >
                </h:inputTextarea>

            </h:panelGrid>

            <h:commandButton value="Submit" action="#{CustomerMB.addCustomer()}" />

        </h:form>

    </h:body>

</html> 
```

Customermanagedbean.java

```
@ManagedBean(name="CustomerMB")
@RequestScoped
public class Customermanagedbean implements Serializable{
@ManagedProperty(value="#{CustomerBoImpl}")
ICustomerBo customerBoImpl;
List<Customer> CustomerList;
public int customerId;
public String name;
public String address;
public String createdDate;

public ICustomerBo getCustomerBoImpl() {
    return customerBoImpl;
}
public void setCustomerBoImpl(ICustomerBo customerBoImpl) {
    this.customerBoImpl = customerBoImpl;
}

public List<Customer> getCustomerList() {
    CustomerList=new ArrayList<Customer>();
    CustomerList.addAll(getCustomerBoImpl().findAllCustomer());

    return CustomerList;
}

public void setCustomerList(List<Customer> customerList) {
    CustomerList = customerList;
}
public int getCustomerId() {
    return customerId;
}
public void setCustomerId(int customerId) {
    this.customerId = customerId;
}
public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public String getAddress() {
    return address;
}
public void setAddress(String address) {
    this.address = address;
}
public String getCreatedDate() {
    return createdDate;
}
public void setCreatedDate(String createdDate) {
    this.createdDate = createdDate;
}
//add a new customer data into database
public String addCustomer(){

    Customer cust = new Customer();
    cust.setCustomerId(getCustomerId());
    cust.setName(getName());
    cust.setAddress(getAddress());
cust.setCreatedDate(getCreatedDate());

    getCustomerBoImpl().addCustomer(cust);

    clearForm();

    return "";
}

//clear form values
private void clearForm(){
        setName("");
    setAddress("");
    setCreatedDate("");
}

} 
```

CustomerBoImpl.java

```
@Transactional(readOnly = true)
public class CustomerBoImpl implements ICustomerBo{

    ICustomerDao customerDaoImpl;

    public ICustomerDao getCustomerDaoImpl() {
        return customerDaoImpl;
    }

    public void setCustomerDaoImpl(ICustomerDao customerDaoImpl) {
        this.customerDaoImpl = customerDaoImpl;
    }

@Transactional(readOnly = false)
@Override
    public void addCustomer(Customer customer){

        getCustomerDaoImpl().addCustomer(customer);

    }

@Transactional(readOnly = false)
@Override
    public void updateCustomer(Customer customer){
        getCustomerDaoImpl().updateCustomer(customer);
    }

@Transactional(readOnly = false)
@Override
    public void deleteCustomer(Customer customer){
        getCustomerDaoImpl().deleteCustomer(customer);
    }

@Override
    public List<Customer> findAllCustomer(){

        return getCustomerDaoImpl().findAllCustomer();
    }
} 
```

怎么了？ ![在此处输入图像描述](../Images/18442c3c719ba97361bc4d24a0ea44f1.png)

客户.java

```
@Entity
@Table(name="CUSTOMER")

public class Customer{

    public int customerId;
    public String name;
    public String address;
    public String createdDate;

    @Id
    @Column(name="CUSTOMER_ID", unique = true, nullable = false)
    public int getCustomerId() {
        return customerId;
    }
    public void setCustomerId(int customerId) {
        this.customerId = customerId;
    }
    @Column(name="NAME")
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    @Column(name="ADDRESS")
    public String getAddress() {
        return address;
    }
    public void setAddress(String address) {
        this.address = address;
    }
    @Column(name="CREATED_DATE")
    public String getCreatedDate() {
        return createdDate;
    }
    public void setCreatedDate(String createdDate) {
        this.createdDate = createdDate;
    }

} 
```

CustomerDaoImpl.java

```
public class CustomerDaoImpl implements ICustomerDao{
    private SessionFactory sessionFactory;
    public SessionFactory getSessionFactory() {
        return sessionFactory;}
    public void setSessionFactory(SessionFactory sessionFactory) {
         this.sessionFactory = sessionFactory;
    }

    public void addCustomer(Customer customer){
        sessionFactory.openSession();
        getSessionFactory().getCurrentSession().save(customer);

    }

    public void updateCustomer(Customer customer){
        sessionFactory.openSession();
        getSessionFactory().getCurrentSession().update(customer);
    }

    public void deleteCustomer(Customer customer){
        sessionFactory.openSession();
        getSessionFactory().getCurrentSession().delete(customer);
    }

    public List<Customer> findAllCustomer(){
        sessionFactory.openSession();

        List list = getSessionFactory().getCurrentSession

().createQuery("from CUSTOMER").list();
        return list;

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:23:59.390

问题出在我的 CustomerDaoImpl.java 中。在 HQL 中，您应该使用映射 @Entity 的 java 类名和属性名，而不是实际的表名和列名，因此 HQL 应该是：

```
List list = getSessionFactory().getCurrentSession().createQuery("from Customer").list();
        return list; 
```

# matlab - 在 MATLAB 中使用 ==> reshape 时出错

> ID：11307567
> 
> 赞同：0
> 
> 时间：2012-07-03T08:57:13.250
> 
> 标签：matlab, reshape

重塑元胞数组时遇到问题：

```
w = size(im,1);                                % width size
h = size(im,2);
d = size(crossfield,3);
for pxRow = 1:h % fixed pixel row
  for pxCol = 1:w % fixed pixel column
    for pxBreadth = 1:d    
      for r = 1:h % row of distant pixel
        for c = 1:w % column of distant pixel
          for z = 1:d

            field(c,r,z) = crossfield(c,r,z).*rmatrix(c,r,z);                

          end
        end
      end
    b(i) = {field}; % filling a cell array with results. read below
    i = i+1;
    end
  end
end

 b = reshape(b, w, h,z); 
```

和错误：

> 使用 ==> 重塑错误
> 
> 要 RESHAPE，元素的数量不得更改。

其他一些可能有用的信息：

```
>> size(im)

ans =

    35    35

>> size(crossfield)

ans =

    35    35     3

>> size(rmatrix)

ans =

    35    35     3
>> size(w)

ans =

     1     1 
```

我怎样才能重塑b？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:11:49.183

请注意，您的三个内部循环与做的效果相同

```
field = crossfield .* rmatrix; 
```

并且您的三个外部循环只是将单元格数组`b`的每个元素设置为相同的值。因此，您的代码可以简化为：

```
[w h] = size(im);
d = size(crossfield,3);

b = cell(w,h,d);
b(:,:,:) = {crossfield .* rmatrix}; 
```

# javascript - 需要为“onload”调用脚本，而不仅仅是“blur”

> ID：11307576
> 
> 赞同：1
> 
> 时间：2012-07-03T08:57:50.957
> 
> 标签：javascript, jquery, jquery-ui

代码是：

```
$(document).ready(function () {
$('#url0, #url1, #url2, #url3, #url4, #url5, #url6, #url7, #url8, #url9, #url10').each(function(index, element) {
    $(element).blur(function() {
        var vals = this.value.split(/\s+/);
        var $container = $(this).hide().prev().show().empty();

        $.each(vals, function(i, val) {
            if (i > 0) {
                $("<span> </span>").appendTo($container);
            }

            $("<a />")
                .html(val)
                .attr('href',/^https?:\/\//.test(val) ? val : 'http://' + val)
                .appendTo($container)
                .click(handleClickEvent);
        });
    });
}).trigger('blur');

// ms to wait for a doubleclick
var doubleClickThreshold = 300;
// timeout container
var clickTimeout;

$('.aCustomDiv a').click(handleClickEvent);
$('.aCustomDiv').click(handleDivClick);

function handleClickEvent(e) {
    var that = this;
    var event;

    if (clickTimeout) {
        try {
 clearTimeout(clickTimeout);
        } catch(x) {};

        clickTimeout = null;
        handleDoubleClick.call(that, e);
        return false;
    }

    clickTimeout = setTimeout(function() {
        clickTimeout = null;
        handleClick.call(that, event);
    }, doubleClickThreshold);

    return false;
}

function handleDivClick(e) {
    var $this = $(this);

    $this.parent()
        .find('input,textarea')
        .show()
        .focus();
    $this.hide();
}

function handleDoubleClick(e) {
    var $this = $(this).parent();
 $this.parent()
        .find('input,textarea')
        //.val($a.text())
        .show()
        .focus();
    $this.hide();
}

function handleClick(e) {
    window.open(this.href, '_blank')
}
}); 
```

HTML 代码：

```
<div style="padding:0 !important;margin-top:8px !important;">
<div class="aCustomDiv" style="padding: 0px ! important; display: block;">
    <a href="http://www.google.com">www.google.com</a><span></span><a href="http://www.facebook.com">www.facebook.com</a><span></span><a href="http://www.wikipedia.org">www.wikipedia.org</a>
</div>
<input type="text" value="www.google.com www.facebook.com www.wikipedia.org" onchange="immediateEditItemInCart(this.value,'url',0,'pr','35')" class="mandatory0" id="url0" style="display: none;" readonly="readonly"> 
```

该脚本执行以下操作：

1.  将这些 id 的文本转换为 url (url0 ...)
2.  双击链接使其可编辑
3.  单击 div 区域，链接旁边使其可编辑
4.  一键点击链接=>进入页面

**我的问题**：出于某种原因，我不知道，单击链接不会转到页面而是编辑它，只有第一次，之后效果很好，所以我希望第一个函数也被调用 onload不仅当模糊。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T19:37:38.343

至于在启动时加载，javascript 是单线程的，所以如果你保持事情井井有条，只需触发一个方法就可以工作（......只需添加几个括号）。但是因为您正在尝试访问 DOM，所以您确实希望等待元素可用（否则您将无法从选择器中得到任何返回）。

但是您已经拥有：

```
$(document).ready( function(){} ); 
```

这正是您所要求的，它还具有以下简写：

```
$( function(){} ); 
```

因此，我不得不同意 rodneyrehm，这可能是您与页面上的其他 js 发生的一些冲突。您可能希望将它封装在某个命名空间中，以确保这不是问题所在。

如果您仍然遇到问题，我写了一个快速版本，可以作为您的起点：http: [//jsfiddle.net/scispear/dUWwB/](http://jsfiddle.net/scispear/dUWwB/)。如果您的 ajax 调用（您提到的）只是预先填充该字段（这样您也可以传递值），我拉出了“updateURL”方法。

它也适用于多个输入/显示，我认为你想要的并不是 100% 确定的。

# sql - 使用 sql 查询更改小数位

> ID：11307578
> 
> 赞同：0
> 
> 时间：2012-07-03T08:57:57.893
> 
> 标签：sql, string, sql-server-2008, tsql, sql-update

我需要更改`HSS2.5X.25 to HSS2.500X.250` 名称。

表中的数据类型`designation is nvarchar`。

我试图这样做..

```
 UPDATE  [AISC14-HSS-ROUND] 
    SET Designation = convert(DECIMAL(2,3),Designation); 
```

这给出了一个错误，例如... 由于数字数据类型的比例不匹配，因此无法执行操作。

有什么办法可以转换这个..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:59:23.947

从这个开始

```
declare @n nvarchar(100)
set @n='HSS2.5X.25'

select part1+'.'+replace(part2,'X',replicate('0',4-len(part2))+'X')+'.'+left(part3+'000',3) from
(
select parsename(@n,3) as part1,parsename(@n,2) as part2 ,parsename(@n,1) as part3
) as t 
```

# java - 将 .class 文件转换为 .java 文件

> ID：11307585
> 
> 赞同：1
> 
> 时间：2012-07-03T08:58:47.147
> 
> 标签：java

这是否可以将 .class 文件（从 .jar 外部库）转换为 .java 文件？我试图弄清楚这是否可能，因为外部库的来源不可用。

我需要采取哪些步骤来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:14:27.950

使用像“Cavaj”这样的java反编译器。它会将类打开为 txt 格式，将代码复制到文件并另存为 .java

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T09:14:40.627

使用`jad`. 从[这里](http://www.varaneckas.com/jad/)下载。如果我没记错的话，它适用于编译到 SDK 1.4... 1.5 的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T09:04:47.140

javap 命令采用不带 .class 扩展名的类名。尝试

```
javap -c ClassName 
```

但是 javap 不会为您提供 java-syntax 中方法的实现。它最多会以 JVM 字节码格式提供给您。要真正反编译（即，与 javac 相反），您必须使用适当的反编译器。 [http://download.cnet.com/Cavaj-Java-Decompiler/3000-2213_4-10071619.html](http://download.cnet.com/Cavaj-Java-Decompiler/3000-2213_4-10071619.html)

或者这可能对[Java Decomilers有一些帮助](http://www.rgagnon.com/javadetails/java-0330.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-04T12:52:27.980

无需使用任何工具即可将类文件转换为 java 文件。例如反编译器或其他东西？

# c# - 简单的 LINQ to SQL 嵌套选择

> ID：11307586
> 
> 赞同：2
> 
> 时间：2012-07-03T08:58:51.060
> 
> 标签：c#, .net, linq, linq-to-sql

我正在做以下工作

```
var result = 
    from ap in db.Appraisals
    join at in db.AppraisalTypes 
         on ap.AppraisalType_ID equals at.AppraisalType_ID
    join w in db.Workers 
         on ap.Worker_ID equals w.Worker_ID
    where ap.Worker_ID == WorkerID
          && ap.DateDue != null
          && ap.DateCompleted == null
    select new
    {
        ap.Worker_ID,
        ap.Appraisal_ID,
        at.Description,
        ap.DateDue,
        ap.DateCompleted,
        CompletedBy = from ap2 in db.Appraisals
                      join w2 in db.Workers 
                           on ap2.CompletedBy equals w2.Worker_ID
                      select new
                      {
                          name = w2.Surname + ", " + w2.FirstName
                      }                                 
    }; 
```

正如您可能看到的那样，我使用了两个工人对象，一个是正在接受年度/中期就业评估的工人，另一个是他们的直线经理。

此选择用于绑定摘要列表视图控件，但在我尝试分配的 CompletedBy 列上，将始终将最新条目设为空，然后在完成评估时使用直线经理姓名填充历史数据. 我已经对这个问题进行了快速搜索，并且有很多带有答案的帖子，但我作为开发人员并不是很有经验并且正在寻找一个简单的答案。我的另一个担忧是，我正在尝试用我知道在列表中总是有空值的东西分配一列。

尽管编译器认为这在语法上是正确的，但在绑定时，我的标签文本属性具有以下...

```
System.Collections.Generic.List`1[<>f__AnonymousType9`1[System.String]] 
```

我只是在寻找我在这里构建的任何可能的警告，并填补我对 LINQ 非常有限的知识的巨大空白。

```
<asp:ListView ID="lvwProbations" runat="server" 
     OnSelectedIndexChanged="lvwProbations_SelectedIndexChanged"  
     OnPagePropertiesChanged="lvwProbations_PagePropertiesChanged"
     OnPagePropertiesChanging="lvwProbations_PagePropertiesChanging" 
     DataKeyNames="Worker_ID,Appraisal_ID">

     <ItemTemplate>
         <tr class="tableItemStyle" 
             onmouseover="this.style.backgroundColor='Silver'"    
             onmouseout="this.style.backgroundColor='#EAFFFF'">

            <td>
                <asp:Label ID="lblWorkerID" runat="server" 
                     Text='<%# Bind("Worker_ID") %>' Visible="false" />
            </td>
            <td>
                <asp:Label ID="lblProbation" runat="server" Width="200" 
                     Text='<%# Bind("Description") %>' />
            </td>
            <td align="center">
                <asp:Label ID="lblDateDue" runat="server" Width="100" 
                     Text='<%# Bind("DateDue", "{0:d}") %>' />
            </td>
            <td align="center">
                <asp:Label ID="lblDateCompleted" runat="server" Width="100" 
                     Text='<%# Bind("DateCompleted") %>' />
            </td>
            <td align="center">
                <asp:Label ID="lblCompletedBy" runat="server" Width="100" 
                     Text='<%# Bind("CompletedBy") %>' />
            </td>
            <td>
                <asp:ImageButton ID="btnSelect" runat="server" 
                     SkinID="selecttimesheet" CommandName="Select"  />
            </td>
         </tr>
     </ItemTemplate>

     <AlternatingItemTemplate>
         <tr class="tableAlternatingItemStyle"  
             onmouseover="this.style.backgroundColor='Silver'"        
             onmouseout="this.style.backgroundColor='#CCFFFF'">
            <td>
                 <asp:Label ID="lblWorkerID" runat="server" 
                      Text='<%# Bind("Worker_ID") %>' Visible="false" />
            </td>
            <td>
                 <asp:Label ID="lblProbation" runat="server" Width="200" 
                      Text='<%# Bind("Description") %>' />
            </td>
            <td align="center">
                 <asp:Label ID="lblDateDue" runat="server" Width="100" 
                      Text='<%# Bind("DateDue", "{0:d}") %>' />
            </td>
            <td align="center">
                 <asp:Label ID="lblDateCompleted" runat="server" Width="100" 
                      Text='<%# Bind("DateCompleted") %>' />
            </td>
            <td align="center">
                 <asp:Label ID="lblCompletedBy" runat="server" Width="100" 
                      Text='<%# Bind("CompletedBy") %>' />
            </td>
            <td>
                 <asp:ImageButton ID="btnSelect" runat="server" 
                      SkinID="selecttimesheet" CommandName="select" />
            </td>
          </tr>
      </AlternatingItemTemplate>

      <EmptyDataTemplate>
           <table id="Table1" runat="server" style="">
             <tr id="Tr2" runat="server" class="tableHoursHeaderStyle">
                 <th id="Th1" runat="server" style="width:0px;"></th>
                 <th id="Th2" runat="server">Appraisal</th>
                 <th id="Th3" runat="server">Date Due</th>
                 <th id="Th13" runat="server">Date Completed</th>
                 <th id="Th4" runat="server">Completed By</th>
                 <th id="Th6" runat="server" style="width:0px;"></th>
             </tr>
             <tr> 
                 <td colspan="4">
                      <p>No Probations available</p>
                 </td>
             </tr>
         </table>
     </EmptyDataTemplate>

     <LayoutTemplate>
         <table id="Table2" runat="server">
            <tr id="Tr1" runat="server">
                <td id="Td1" runat="server">
                   <table ID="itemPlaceholderContainer" runat="server" 
                          border="0" class="TimeSheet_Table" style="">
                     <tr id="Tr2" runat="server" 
                         class="tableHoursHeaderStyle">
                          <th id="Th1" runat="server" style="width:0px;"></th>
                          <th id="Th2" runat="server">Appraisal</th>
                          <th id="Th3" runat="server">Date Due</th>
                          <th id="Th13" runat="server">Date Completed</th>
                          <th id="Th5" runat="server">Completed By</th>
                          <th id="Th7" runat="server" style="width:0px;"></th>
                     </tr>
                     <tr ID="itemPlaceholder" runat="server"></tr>
                   </table>
                 </td>
              </tr>
           </table>
      </LayoutTemplate>
</asp:ListView> 
```

**编辑以根据要求显示标记/绑定**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:40:19.380

您的`CompletedBy`字段实际上被键入为具有单个字符串字段的类的集合。因为您使用的是 a`select new { name = ... }`您实际上是在创建一个看起来像这样的类，这根本不是您想要的：

```
class Anonymous9
{
    public name { get; set; }
} 
```

而且，此外，您正在创建一个`IEnumerable<Anonymous9>`是这些对象的集合。

相反，您只需要一个字符串。为了让它只是一个字符串，去掉`new {}`并用 包裹它`FirstOrDefault()`：

```
CompletedBy = (from ap2 in db.Appraisals 
                  join w2 in db.Workers  
                       on ap2.CompletedBy equals w2.Worker_ID 
                  select w2.Surname + ", " + w2.FirstName 
                  ).FirstOrDefault() 
```

# c# - 如何在视图布局中处理授权

> ID：11307591
> 
> 赞同：2
> 
> 时间：2012-07-03T08:59:09.923
> 
> 标签：c#, asp.net-mvc-3, view, acl

Authorize 属性可以很好地基于 Action 进行一些访问控制，但假设我在布局中有一些 UI 元素，除非用户授权，否则应该注意输出。

我可以在 ViewBag 中设置一些布尔值，但我猜这不是一个好的解决方案。

Layout.cshtml 中的某处：

```
@if (ViewBag.IsAuthorized)
{
     <li>@Html.ActionLink("Index", "Admin")</li>
} 
```

让我知道是否有更好的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T09:06:23.677

使用[`WebPageRenderingBase.User`](http://msdn.microsoft.com/en-us/library/system.web.webpages.webpagerenderingbase.user%28v=vs.99%29.aspx)对象；假设您之前已将用户设置为 HttpContext 或 Controller（您确实应该如此）。由于您使用的是`Authorize`属性，我认为必须有一个`User`- 所以希望以下内容应该有效。

这`User`可以很容易地在 Razor 中访问：

```
@User.Identity.Name 
```

将输出当前用户的名称。因此`if`，仅在用户通过身份验证时运行的块将是：

```
@if(User.Identity.IsAuthenticated)
{
   Hello
} 
```

`"Hello"`如果用户通过身份验证，则输出。

感谢下面的 James 提醒我您可以检查`IsAuthenticated`该`User`对象 - 我最初找不到它 - 但后来记得它在`Identity`！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:04:45.120

您可以`helper method`从布局中创建并调用它。

```
@Helper.IsAuthorize() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T09:06:00.770

您可以调用一个函数来验证用户是否已通过身份验证：

**帮手：**

```
public bool checkUser(string user)
{
//User is allowed?
return true/false;
} 
```

**布局：**

```
@if (checkUser(User.Identity.Name)
{
     <li>@Html.ActionLink("Index", "Admin")</li>
} 
```

# java - 需要 AnnotationConfiguration 实例

> ID：11307592
> 
> 赞同：1
> 
> 时间：2012-07-03T08:59:11.573
> 
> 标签：java, hibernate, spring-mvc

我是春天和冬眠的新手。现在我正在尝试将一些数据保存到 mySql 数据库。但是我遇到了一些错误。dispatcher-servelet.xml 中是否需要任何配置才能使用休眠注释。我该如何解决这个问题？

```
org.springframework.web.util.NestedServletException: Handler processing failed; nested exception is java.lang.ExceptionInInitializerError
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:839)
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:669)
org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:585)
javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)

root cause 
java.lang.ExceptionInInitializerError
com.application.util.HibernateUtil.<clinit>(HibernateUtil.java:21)
com.application.service.EmployeeServiceImpl.add(EmployeeServiceImpl.java:22)
com.application.controller.UserController.onSubmit(UserController.java:34)
org.springframework.web.servlet.mvc.SimpleFormController.onSubmit(SimpleFormController.java:415)
org.springframework.web.servlet.mvc.SimpleFormController.onSubmit(SimpleFormController.java:387)
org.springframework.web.servlet.mvc.SimpleFormController.processFormSubmission(SimpleFormController.java:272)
org.springframework.web.servlet.mvc.AbstractFormController.handleRequestInternal(AbstractFormController.java:268)
org.springframework.web.servlet.mvc.AbstractController.handleRequest(AbstractController.java:153)
org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:669)
org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:585)
javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)

root cause 
org.hibernate.MappingException: An AnnotationConfiguration instance is required to use <mapping class="com.application.domain.Employee"/>
org.hibernate.cfg.Configuration.parseMappingElement(Configuration.java:1600)
org.hibernate.cfg.Configuration.parseSessionFactory(Configuration.java:1555)
org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1534)
org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1508)
org.hibernate.cfg.Configuration.configure(Configuration.java:1428)
org.hibernate.cfg.Configuration.configure(Configuration.java:1414)
com.application.util.HibernateUtil.<clinit>(HibernateUtil.java:18)
com.application.service.EmployeeServiceImpl.add(EmployeeServiceImpl.java:22)
com.application.controller.UserController.onSubmit(UserController.java:34)
org.springframework.web.servlet.mvc.SimpleFormController.onSubmit(SimpleFormController.java:415)
org.springframework.web.servlet.mvc.SimpleFormController.onSubmit(SimpleFormController.java:387)
org.springframework.web.servlet.mvc.SimpleFormController.processFormSubmission(SimpleFormController.java:272)
org.springframework.web.servlet.mvc.AbstractFormController.handleRequestInternal(AbstractFormController.java:268)
org.springframework.web.servlet.mvc.AbstractController.handleRequest(AbstractController.java:153)
org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:669)
org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:585)
javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393) 
```

休眠配置文件是

休眠.cfg.xml

```
<hibernate-configuration>
  <session-factory>
    <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/employee_db</property>
    <property name="hibernate.connection.username">root</property>
    <property name="hibernate.connection.password"></property>
    <property name="connection.pool_size">1</property>
    <property name="show_sql">true</property>
    <property name="hbm2ddl.auto">create</property>

    <mapping class="com.application.domain.Employee" />
  </session-factory>
</hibernate-configuration> 
```

调度程序-servelet.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:p="http://www.springframework.org/schema/p"
   xmlns:aop="http://www.springframework.org/schema/aop"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xmlns:context="http://www.springframework.org/schema/context"
   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
   http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">
<bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping"/>

<!--
Most controllers will use the ControllerClassNameHandlerMapping above, but
for the index controller we are using ParameterizableViewController, so we must
define an explicit mapping for it.
-->
<bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="mappings">
        <props>
            <prop key="index.htm">indexController</prop>
        </props>
    </property>
</bean>

<bean id="viewResolver"
      class="org.springframework.web.servlet.view.InternalResourceViewResolver"
      p:prefix="/WEB-INF/jsp/"
      p:suffix=".jsp" />

<bean name="indexController"
      class="org.springframework.web.servlet.mvc.ParameterizableViewController"
      p:viewName="index" />

<bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource" 
p:basename="messages" />
<bean id="employeeService" class="com.application.service.EmployeeServiceImpl" />
<bean id="employeeValidator" class="com.application.validator.EmployeeValidator" />
<bean name="userRegistration.htm" class="com.application.controller.UserController" 
    p:employeeService-ref="employeeService" p:formView="employeeForm" 
    p:successView="employeeSuccess" p:validator-ref="employeeValidator"/>  

</beans> 
```

使用回答 New Exception1 中的 hibernet.cfg.xml 后

```
org.springframework.web.util.NestedServletException: Handler processing failed; nested exception is java.lang.NoClassDefFoundError: Could not initialize class com.application.util.HibernateUtil
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:839)
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:669)
org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:585)
javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)

root cause 
java.lang.NoClassDefFoundError: Could not initialize class com.application.util.HibernateUtil
com.application.service.EmployeeServiceImpl.add(EmployeeServiceImpl.java:22)
com.application.controller.UserController.onSubmit(UserController.java:34)
org.springframework.web.servlet.mvc.SimpleFormController.onSubmit(SimpleFormController.java:415)
org.springframework.web.servlet.mvc.SimpleFormController.onSubmit(SimpleFormController.java:387)
org.springframework.web.servlet.mvc.SimpleFormController.processFormSubmission(SimpleFormController.java:272)
org.springframework.web.servlet.mvc.AbstractFormController.handleRequestInternal(AbstractFormController.java:268)
org.springframework.web.servlet.mvc.AbstractController.handleRequest(AbstractController.java:153)
org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:669)
org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:585)
javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393) 
```

这个类EmployeeServiceImpl.java和HibernateUtil.java有什么问题吗

```
public class EmployeeServiceImpl implements EmployeeService {

@Override
public void add(Employee employee) {
//Persist the user object here. 
    Session session = HibernateUtil.getSessionFactory().openSession();
    Transaction transaction = null;
    try {
        transaction = session.beginTransaction();
        session.save(employee);
        transaction.commit();
    } catch (HibernateException e) {
        transaction.rollback();
    } finally {
        session.close();
    }
    System.out.println("User added successfully");
}
}

public class HibernateUtil {
private static final SessionFactory sessionFactory;
static {
    try {
        sessionFactory = new Configuration().configure().buildSessionFactory();
    } catch (Throwable ex) {
        System.err.println("Initial SessionFactory creation failed." + ex);
        throw new ExceptionInInitializerError(ex);
    }
}
public static SessionFactory getSessionFactory() {
return sessionFactory;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:08:50.723

需要添加 hibernate-annotations jar 并将 sessionFactory 构建为

```
 return new AnnotationConfiguration().configure().buildSessionFactory(); 
```

[看一看](http://www.mkyong.com/hibernate/hibernate-error-an-annotationconfiguration-instance-is-required-to-use/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-09-24T12:21:08.103

```
<bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="configLocation" value="/WEB-INF/hibernate.cfg.xml"></property>
        <property name="configurationClass">            
            <value>org.hibernate.cfg.AnnotationConfiguration</value>        
        </property>
        <property name="hibernateProperties">
       <props>
           <prop key="hibernate.dialect">${jdbc.dialect}</prop>
           <prop key="hibernate.show_sql">${jdbc.showsql}</prop>
       </props>
   </property> 
```

你可以使用上面对我来说很好的配置。

# java - 从 mjpg 视频流转换为 mp4

> ID：11307593
> 
> 赞同：2
> 
> 时间：2012-07-03T08:59:13.207
> 
> 标签：java, video-streaming, ip-camera, mjpeg

我正在尝试将来自 ip 摄像头的实时流捕获到 vlc 播放器中。问题是，它正在寻找像 .mp4 等这样的源文件，但我想在其中显示的流只是 URL [http上的 http 流://192.168.xx:80/video.cgi/mjpg](http://192.168.x.x:80/video.cgi/mjpg)任何人都可以帮助如何使用 java 将 mjpg 流转换为 mp4 吗？

# android - 内部使用 intent.getextras()

> ID：11307595
> 
> 赞同：1
> 
> 时间：2012-07-03T08:59:15.273
> 
> 标签：android, android-intent, bundle

```
Bundle extras = intent.getExtras();
if (extras != null) {   
    Toast.makeText(context, "Message recieved", Toast.LENGTH_SHORT).show();
} 
```

存储在附加项中的价值是什么.. :?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:05:10.147

存储在 extras 中的值是您放入 extras 中的值。

要为意图添加额外内容，请在开始之前执行以下操作。

```
intent = new Intent(v.getContext(),TextActivity.class);
intent.putExtra("Title", "I am An extra");
startActivityForResult(intent, -1); 
```

然后按照您的意图，阅读它：

```
String title = getIntent().getStringExtra("Title"); 
```

如果发现额外信息，您问题中的代码只是发布一条弹出消息。目前你没有添加任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:03:30.450

Extras 是一个[Bundle](http://developer.android.com/reference/android/os/Bundle.html)，因此它通常会保存一*组*值。从您的代码片段中，无法分辨其中的内容。这取决于创建意图的代码放入包中的内容。

如果您想知道 Bundle 中的所有键，请使用[Bundle.keySet()](http://developer.android.com/reference/android/os/Bundle.html#keySet%28%29)。

关于您的评论，Android应用程序中没有真正的“程序开始”。您的活动在清单中标记为“启动器”活动。*如果*您的活动是从 Launcher 开始的，则 Extras 将为空。但是，没有人会阻止您（或其他应用程序）手动启动您的活动，在附加组件中提供数据。

这里没有魔法。如果您不向 Extras 中添加任何内容，则不会出现任何内容。

# node.js - 如何在我的 html/ejs 模板中使用 connect-assetmanager？

> ID：11307596
> 
> 赞同：0
> 
> 时间：2012-07-03T08:59:18.907
> 
> 标签：node.js, connect

我可能完全误解了如何在我的节点项目中使用[connect-assetmanager](https://github.com/mape/connect-assetmanager)。但是我已经设置了要打包到“组”中的 js 文件 - 但是如何在我的 ejs/jade 模板中引用该组？

当然我需要以某种方式在我的模板中“渲染”这个包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T15:37:31.637

我找到了解决方案：

例如，在您的服务器中，您可以像这样设置一个动态助手：

```
app.dynamicHelpers({
  'assetsCacheHashes': function(req, res) { 
    return assetsManagerMiddleware.cacheHashes;
  }
}); 
```

assetsManagerMiddleware 代表你的assetManager。

然后在您的 ejs 模板中，您可以像这样渲染生成的资产包：

```
<script src="/js/<%= assetsCacheHashes.js || 0 %>.js"></script> 
```

在您的视图源中 - 查看它选择的路径并相应地调整您的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T16:06:50.857

翡翠：`script(type='text/javascript', src='/the/groups/route')`

您的资产组应该有一个指定的路线。该正则表达式用于确定请求是否请求该组。如果匹配，它应该为该组服务。

# model-view-controller - Codeigniter：我如何在位于控制器文件夹中的控制器中调用外部控制器

> ID：11307604
> 
> 赞同：0
> 
> 时间：2012-07-03T08:59:43.650
> 
> 标签：model-view-controller, codeigniter, controller

我正在使用 php 中的 codeigniter，我的问题是如何在位于 controllers 文件夹中的控制器中调用外部控制器。

```
 //this file is Controller2.php in controllers folder
class Controller2 extends CI_Controller
{
function one()
   {
      // Some code goes here..
   }
}

//and now this file is Controller1.php which is also in controllers folder

class Controller1 extends CI_Controller
{
   function one()
   {
      // I want to load Controller2 here
   }
} 
```

请指导我，因为我在谷歌搜索过程中浪费了很多时间。

提前致谢..

卡姆兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:11:24.877

您可以使用类似的功能，但不能使用默认功能，您应该使用CodeIgniter 的[HMVC](http://en.wikipedia.org/wiki/Hierarchical_model%E2%80%93view%E2%80%93controller)扩展：[链接](http://codeigniter.com/wiki/Modular_Extensions_-_HMVC/)

有很多关于扩展的例子和一个很好的线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:01:43.720

你不能，或者说你不应该。您需要在两个不同的控制器中使用的任何功能都应该移到库或帮助文件中。

# sql - 使用游标更新记录遍历数据库

> ID：11307605
> 
> 赞同：0
> 
> 时间：2012-07-03T08:59:45.640
> 
> 标签：sql, sql-server

谁能帮我完成这个任务..

```
 FirstName  LastName  EmpNumber  EffectiveFrom   EffectiveTo    JobTitle
      john     A        EMP01      2004-05-01      2005-09-01     credit officer
      NULL     NULL     NULL       2005-09-01      2006-30-01     chief credit officer
      NULL     NULL     NULL       2006-30-01      2006-30-09
      george   B        EMP02      
      david    C        EMP03
      NULL     NULL     NULL
      NULL     NULL     NULL 
```

我有这样的表，想用光标更新它看起来像这样我没有写所有数据只是一些记录

```
 FirstName  LastName  EmpNumber   EffectiveFrom   EffectiveTo    JobTitle
     john      A       EMP01 
     john      A       EMP01 
     john      A       EMP01 
     george    B       EMP02 
     david     C       EMP03 
     david     C       EMP03 
     david     C       EMP03 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:42:53.433

创建变量以保存找到的最后一个非空值：`@FirstNameNN, @LastNameNN, @EmpNumberNN.`

创建一个游标并获取每一行，并将其数据保存到变量 ( `@FirstName, @LastName, @EmpNumber, @EffectiveFrom, @EffectiveTo, @JobTitle`)。

在每次游标迭代中，执行以下操作：

```
IF @FirstName IS NOT NULL
BEGIN
    SET @FirstNameNN = @FirstName
    SET @LastNameNN = @LastName
    SET @EmpNumberNN = @EmpNumber 
END
ELSE
BEGIN
    UPDATE Employees
      SET FirstName = @FirstNameNN,
          LastName = @LastNameNN,
          EmpNumber = @EmpNumberNN
    WHERE EffectiveFrom = @EffectiveFrom AND
          EffectiveTo = @EffectiveTo AND
          JobTitle = @JobTitle
END 
```

当然，如果有两行最后三列相等，则此代码将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:42:19.040

我也用光标做了它，只是从@daniloquio 代码中复制了 where 语句。

```
 DECLARE @NAME  NVARCHAR(500), @LastName NVARCHAR(500), @EmpN NVARCHAR(500), @TN NVARCHAR(500), @TLN NVARCHAR(500), @TEN NVARCHAR(500),
                @EffectiveFrom DATETIME,@EffectiveTo DATETIME,@JobTitle NVARCHAR(500)

DECLARE temp CURSOR FOR
    SELECT  Name, [Last Name], [Employee Number], [Effective From], [Effective To], [Job Title]
    FROM dbo.Positions$

    OPEN temp       

FETCH NEXT FROM temp INTO @Name, @LastName, @EmpN, @EffectiveFrom, @EffectiveTo, @JobTitle

WHILE @@FETCH_STATUS=0
BEGIN
    SELECT @Name, @LastName, @EmpN

    IF @NAME IS NOT NULL
    BEGIN
        SELECT @TN=@NAME, @TLN=@LastName, @TEN=@EmpN
    END
    ELSE
     BEGIN
        UPDATE dbo.Positions$
        SET Name=@TN, 
                [Last Name]=@TLN, 
                [Employee Number]=@TEN 
        WHERE [Effective From] = @EffectiveFrom AND
          [Effective To] = @EffectiveTo AND
          [Job Title] = @JobTitle
     END

    FETCH NEXT FROM temp INTO @Name, @LastName, @EmpN, @EffectiveFrom, @EffectiveTo, @JobTitle
END
CLOSE temp;
DEALLOCATE temp; 
```

# jquery - jquery同位素切换

> ID：11307607
> 
> 赞同：2
> 
> 时间：2012-07-03T08:59:48.737
> 
> 标签：jquery, toggle, jquery-isotope

我有一个基于同位素的设计。itemSelector 是可点击的，应该切换（向下滑动）内部的隐藏元素。然后同位素容器不会完全重新布局，只会在元素所在的列中滑落。

为了更好地描述我的愿望，我创建了 2 个图像。

此处所有元素均已关闭 [图 1](http://rhodesign.ch/iso1.jpg)

这里元素 6 是打开的，只有第二列应该更高 [在此处输入链接描述](http://rhodesign.ch/iso2.jpg)

到目前为止，我有一些我使用的代码。该代码到目前为止工作，但重新布局整个 Conatiner 完全。

```
// change size of clicked element

$container.find('.team').live('click', function() {
if ($(this).is('.large')) {
jQuery('.teaminfo', this).fadeToggle(350, "linear");

$(this).toggleClass('large');
$container.isotope('reLayout');

} else {

jQuery('.large > .teaminfo');
$container.find('.large').removeClass('large');

jQuery('.teaminfo', this).fadeToggle(350, "linear");

$(this).toggleClass('large');
$container.isotope('reLayout');

}
}); 
```

如果有人可以给我一个提示，我将不胜感激。谢谢罗曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:12:48.520

只需在不需要同位素的列中推下不断增长的框；）

也许插件的[这种类型的功能](http://isotope.metafizzy.co/custom-layout-modes/masonry-column-shift.html)可以根据您的需要进行更改。

# javascript - 浏览器选项卡中的 url 更改时自动注销

> ID：11307608
> 
> 赞同：2
> 
> 时间：2012-07-03T08:59:50.060
> 
> 标签：javascript, php, logout

我需要像大多数银行使用的那样构建一个功能。在哪里..

如果用户已在浏览器选项卡中登录银行帐户并再次更改浏览器的网址并移至其他站点..然后单击浏览器的“返回”按钮再次进入银行页面..然后银行会自动注销用户有网站。

我想可能是通过java脚本我们可以做到这一点..但是，无法理解如何做到这一点。我正在为我的服务器端脚本使用 PHP。这是PHP可以做到这一点..

问候苏雷什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:04:56.330

这不是 java/PHP 问题，而是取决于您要实现的确切行为。

跟踪用户“实时”的唯一方法是通过 javascript。因此，如果您想知道用户何时离开页面，您可以将自己绑定到事件侦听器，然后执行 ajax 调用或类似的操作，使服务器端的会话无效。请记住，用户可能在禁用 JS 的情况下浏览您的网站，因此您需要在服务器端进行后备。

我建议您使用存储机制（内置 PHP 会话存储或一些外部存储，如 Couchbase 或 Redis、Memached 等）在服务器端实现会话存储，并将注销时间设置为合理的默认值（较低如果它类似于银行应用程序）。

如果您具备基础知识，请使用 JavaScript 来丰富用户体验，例如，当用户注销时显示“倒计时”，并在每次用户登录时向服务器发送会话刷新 ajax 调用以更新会话与网站等的互动。

有关更多详细信息，我需要您提出更多要求！

# javascript - 如何通过 JavaScript 发送 asp.net 控件的 clientid

> ID：11307609
> 
> 赞同：0
> 
> 时间：2012-07-03T08:59:51.013
> 
> 标签：javascript, asp.net

我正在尝试在我的以下 asp.net 代码中单击按钮时发送控件 ID：

```
 <asp:TextBox ID="empid" runat="server" CssClass="input_box" onFocus="if (this.value == this.title) this.value='';" onBlur="if (this.value == '')this.value = this.title;" value="Enter employee ID" title="Enter employee ID" onClick="changecol(this)"></asp:TextBox>

 <asp:Button ID="abc" runat="server" Text="xxx" 
        CssClass="submit_button" onclick="abc_Click" OnClientClick="return checkEmpid('<%=empid.ClientID%>')"/> 
```

和Javascript是：

```
function checkEmpid(id){
var idValue = document.getElementById(id).value;
alert(idValue);
return false;
} 
```

在警报中，当我使用以下代码时，我得到空值：

```
<asp:TextBox ID="empid" runat="server" CssClass="input_box" onFocus="if (this.value == this.title) this.value='';" onBlur="if (this.value == '')this.value = this.title;" value="Enter employee ID" title="Enter employee ID" onClick="changecol(this)"></asp:TextBox>

 <asp:Button ID="abc" runat="server" Text="xxx" 
        CssClass="submit_button" onclick="abc_Click" OnClientClick="return checkEmpid()"/>

function checkEmpid(){
var idValue = document.getElementById('<%=empid.ClientID%>').value;
alert(idValue);
return false;
} 
```

在警报中，我在文本框中输入了值。请帮助我解决这个问题，我想将控件的客户端 ID 作为 JS 的参数发送。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:06:03.360

您可以通过这种方式将 empid 文本框的客户端 ID 发送到 javascript。

```
 abc.Attributes.Add("onclick", "return checkEmpid('" + empid.ClientID + "')");

    function checkEmpid(clientIdOfempid){      
        alert("This is id of TextField with ID=empid >> "+clientIdOfempid);
        return false;
    } 
```

或者

`'<%=empid.ClientID%>'`您可以通过这种方式获取客户端ID

```
function checkEmpid(){
    var id = '<%=empid.ClientID%>';
    alert("This is id of TextField with ID=empid >> "+id);
    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T09:20:13.033

如果您确实想通过参数传递 UserControl 名称，我相信您唯一的选择是在代码隐藏中设置函数调用......

C＃...

```
abc.OnClientClick = string.Format("return checkEmpid('{0}');", empid.ClientID); 
```

VB.NET...

```
abc.OnClientClick = String.Format("return checkEmpid('{0}');", empid.ClientID) 
```

（更新，因为我意识到你想要 TextBox ID，而不是 UserControl ID）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T09:02:28.360

提醒 ID 本身不是更简单吗？

```
alert('<%=empid.ClientID%>'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-23T08:17:35.033

```
alert('<%=empid.ClientID%>'); 
```

试试这个来获取ID

# json - 弹簧错误处理

> ID：11307612
> 
> 赞同：1
> 
> 时间：2012-07-03T09:00:04.697
> 
> 标签：json, spring, exception, controller

我需要将我的控制器的所有异常捕获到异常控制器。如何配置弹簧？我需要这个，因为对我的 webapp 的每个请求都是 json 请求，如果出现异常，我需要用 genericc {success: false, exception: "String ex..."} 来回答。但我不明白是否更好的方法是使用 SimpleMappingExceptionResolver。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:49:56.647

如果要编写自定义响应，使用自定义[HandlerExceptionResolver](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/servlet/HandlerExceptionResolver.html)实现会更有趣。

弹簧配置：

```
<bean id="exceptionHandler" class="com.am.CustomHandlerExceptionResolver"/> 
```

爪哇：

```
public class CustomHandlerExceptionResolver
    implements HandlerExceptionResolver {

    @Override
    public ModelAndView resolveException(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) {
        //write in response
        return null;
    }

} 
```

# jquery - Fancybox 调整大小不起作用

> ID：11307617
> 
> 赞同：2
> 
> 时间：2012-07-03T09:00:34.180
> 
> 标签：jquery, fancybox

我需要在fancybox 弹出窗口上显示图像和一个按钮，但无法正确显示。

我用两种不同的方法尝试过：

1.  获取图像并将按钮附加到 HTML。

    ```
    $('a.zoom').fancybox({
        type: 'image',
        onComplete: function() {
           $('#fancybox-content').append('<button>Click</button>');
           $.fancybox.resize() // this won't do anything
        }
    }); 
    ```

    这样，弹出框是图像的高度，按钮不可见。

2.  显示 HTML。

    ```
    $('a.zoom').live('click', function(ev) {
        ev.preventDefault();
        var url = $(this).attr('href');
        var content = '<img src="' + url + '" />';
        var id = $(this).parent().attr('data-frame-id');

        $.fancybox({
            content: content + '<button>Click</button>',
            type: 'html',
            onComplete: function() {
                $.fancybox.resize();
            }
        });
    }); 
    ```

    这样，弹出框高度是正确的，但宽度只是按钮宽度。

使用这两种方法，`$.fancybox.resize()`似乎都没有做任何事情和`autoScale`选项`autoDimensions`。

如何正确显示图像和按钮？

* * *

生成的 HTML

```
<div id="fancybox-overlay" style="background-color: rgb(119, 119, 119); opacity: 0.7; cursor: pointer; height: 937px; display: block; "></div>
<div id="fancybox-wrap" style="width: 1020px; height: auto; top: 34px; left: 421px; display: block; ">
    <div id="fancybox-outer">
        <div class="fancybox-bg" id="fancybox-bg-n"></div>
        <div class="fancybox-bg" id="fancybox-bg-ne"></div>
        <div class="fancybox-bg" id="fancybox-bg-e"></div>
        <div class="fancybox-bg" id="fancybox-bg-se"></div>
        <div class="fancybox-bg" id="fancybox-bg-s"></div>
        <div class="fancybox-bg" id="fancybox-bg-sw"></div>
        <div class="fancybox-bg" id="fancybox-bg-w"></div>
        <div class="fancybox-bg" id="fancybox-bg-nw"></div>
        <div id="fancybox-content" style="border-width: 10px; width: 1000px; height: 809px; ">
            <img id="fancybox-img" src="http://localhost/img.php?id=24" alt="">
            <button id="usethis">Use this frame</button>
        </div>
        <a id="fancybox-close" style="display: inline; "></a>
        <div id="fancybox-title" style="display: none; "></div>
        <a href="javascript:;" id="fancybox-left">
            <span class="fancy-ico" id="fancybox-left-ico"></span>
        </a>
        <a href="javascript:;" id="fancybox-right">
            <span class="fancy-ico" id="fancybox-right-ico"></span>
        </a>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:27:27.193

按钮应放置在内部，`<div id="fancybox-title">`因为 的目的`<div id="fancybox-content">`仅适用于图像

# java - 为什么我的属性值没有打印出来？

> ID：11307619
> 
> 赞同：0
> 
> 时间：2012-07-03T09:00:40.177
> 
> 标签：java, xml, xml-parsing

我正在尝试打印以下 xml 文件的属性值：

```
<data/>
       <request/>
              <type>City</type>
              <query>Jaipur, India</query>
          </request>
       <current_condition/>
              <observation_time>06:37 AM</observation_time>
              <temp_C>40</temp_C>
              <temp_F>104</temp_F>
              <weatherCode>113</weatherCode>
              <weatherIconUrl/>
              <weatherDesc/>
              <windspeedMiles>8</windspeedMiles>
              <windspeedKmph>13</windspeedKmph>
              <winddirDegree>280</winddirDegree>
              <winddir16Point>W</winddir16Point>
              <precipMM>0.0</precipMM>
              <humidity>34</humidity>
              <visibility>4</visibility>
              <pressure>997</pressure>
              <cloudcover>25</cloudcover>
          </current_condition>
       <weather/>
              <date>2012-07-03</date>
              <tempMaxC>46</tempMaxC>
              <tempMaxF>115</tempMaxF>
              <tempMinC>36</tempMinC>
              <tempMinF>97</tempMinF>
              <windspeedMiles>6</windspeedMiles>
              <windspeedKmph>9</windspeedKmph>
              <winddirection>N</winddirection>
              <winddir16Point>N</winddir16Point>
              <winddirDegree>7</winddirDegree>
              <weatherCode>113</weatherCode>
              <weatherIconUrl/>
              <weatherDesc/>
              <precipMM>0.0</precipMM>
          </weather>
       <weather/>
              <date>2012-07-04</date>
              <tempMaxC>46</tempMaxC>
              <tempMaxF>114</tempMaxF>
              <tempMinC>34</tempMinC>
              <tempMinF>94</tempMinF>
              <windspeedMiles>12</windspeedMiles>
              <windspeedKmph>20</windspeedKmph>
              <winddirection>NW</winddirection>
              <winddir16Point>NW</winddir16Point>
              <winddirDegree>319</winddirDegree>
              <weatherCode>113</weatherCode>
              <weatherIconUrl/>
              <weatherDesc/>
              <precipMM>0.0</precipMM>
          </weather>
   </data> 
```

以下是我用来打印属性值的 java 代码：

```
 public class WorldWeatherOnline {
        public static void main (String[] args) throws IOException, ParserConfigurationException, SAXException, TransformerException {
            URL url = new URL("http://free.worldweatheronline.com/feed/weather.ashx?q=jaipur,india&format=xml&num_of_days=2&key=c5774216f9120304120207");
            URLConnection conn = url.openConnection();

            DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
            DocumentBuilder builder = factory.newDocumentBuilder();
            Document doc = builder.parse(conn.getInputStream());
            printElementAttributes(doc);
    }
static void printElementAttributes(Document doc)
    {
       NodeList nl = doc.getElementsByTagName("*");
       Element e;
       Node n;
       NamedNodeMap nnm;

       String attrname;
       String attrval;
       int i, len;

       len = nl.getLength();
       for (int j=0; j < len; j++)
       {
          e = (Element)nl.item(j);
          System.out.println(e.getTagName() + ":");
          System.out.println("check-1");

          nnm = e.getAttributes();
          if (nnm != null)
          {
             for (i=0; i<nnm.getLength(); i++)
             {
                System.out.println("check");
                n = nnm.item(i);
                attrname = n.getNodeName();
                attrval = n.getNodeValue();
                System.out.print(" " + attrname + " = " + attrval);
             }
          }
          System.out.println();
       }
    } 
```

基本上我的 NamedNodeMap nnm 是空的，所以它不会进入循环。我使用了这些导入：

```
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerException;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NamedNodeMap;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.SAXException; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:02:13.187

您的 XML 没有*任何*属性。它只有带有文本内容的元素。具有*属性*的元素如下所示：

```
<element attributeName="attribute value" /> 
```

如果您想使用当前的 XML，则需要获取元素的文本值，并可能根据元素名称存储这些值。

# cocoa - 具有多个操作的 NSControl

> ID：11307622
> 
> 赞同：1
> 
> 时间：2012-07-03T09:00:46.947
> 
> 标签：cocoa, custom-controls

我正在尝试创建一个必须能够发送多个消息的复杂自定义 NSControl。

例如，鼠标移入必须发送一个动作，而鼠标拖入必须发送另一个动作。

我不明白如何将目标连接到控件并使控件向目标发送任何消息。

在我看来，我必须遵循以下步骤：

1.  实例化`NSControl`ie`myControl`

2.  为每个操作设置 myControl 的 Target 操作（**我不知道该怎么做！**）

3.  myControl 实例将发送操作`[NSApp sendAction: [self action] to: [self target] from: self]`

你能帮我完成第2步吗？并确认我的步骤？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T09:11:02.023

您需要[委托模式](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html)。标准 Cocoa 控件最多发送一个动作，并使用委托进行任何其他操作。IB不支持设置多个动作，所以无法解决第2步。

如果`delegate`是一个出口，只要代理是文件的所有者或者也在这个 nib 中实例化，您就可以从 IB 直接设置它，就像您对 eg`NSWindow`或`NSTableView`.

# vba - VBA方法“对象范围”_Worksheet在范围声明中使用的变量失败

> ID：11307624
> 
> 赞同：3
> 
> 时间：2012-07-03T09:01:00.957
> 
> 标签：vba, excel, range

我收到以下错误消息：`Method range of object _worksheet failed`尝试使用变量作为范围长度在 excel 中选择范围时。

下面是我的代码片段：

```
Private Function copyAmount(startRange As Integer, endRange As Integer)
    Dim startRng As String
    Dim endRng As String

    startRng = "A" & Str(startRange)
    endRng = "A" & Str(endRange)

    activateBook ("book2.xlsm")
    Set rng = Range(startRng, endRng)
    Workbooks("book2.xlsm").Sheets(1).Range(rng).Select
    Selection.Copy
    activateBook ("Book1.xlsm")
    Range("D3").Select
    Selection.PasteSpecial Paste:=xlPasteValues, _
    Operation:=xlNone, SkipBlanks:=False, Transpose:=False
End Function 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T09:18:48.307

您收到错误是因为您没有完全限定您的范围。此外，没有必要激活工作簿来进行复制粘贴 :) 你也不需要`Function`为此。用一个`Sub`

**代码**

```
Private Sub copyAmount(startRange As Integer, endRange As Integer)
    Dim wbT As Workbook, wbO As Workbook
    Dim rng As Range

    Set wbT = ThisWorkbook
    Set wbO = Workbooks("book2.xlsm")

    Set rng = wbO.Sheets(1).Range("A" & startRange & ":" & "A" & endRange)
    rng.Copy

    '~~> Change Sheets(1) below to the relevant sheet
    wbT.Sheets(1).Range("D3").PasteSpecial Paste:=xlPasteValues, _
    Operation:=xlNone, SkipBlanks:=False, Transpose:=False
End Sub 
```

**编辑**

`Sub`和`Function`过程一样，是一个单独的过程，可以接受参数、执行一系列语句并更改其参数的值。但是，`Sub`过程不会像 a`Function`那样返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:16:19.617

而不是`Str`，使用`Cstr`. 我猜这将使您的代码正常工作...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-24T20:45:42.103

当您的代码位于工作表而不是模块中时，您将收到此错误。

# java - 如何在mysql中从用户那里获取WHERE值

> ID：11307627
> 
> 赞同：0
> 
> 时间：2012-07-03T09:01:12.977
> 
> 标签：java, mysql, select, count, where

我正在使用 NetBeans IDE 连接 MySQL 数据库，我想使用选择查询从用户那里获取输入值并将该值放在 where 条件中。并且我收到此错误消息 Unknown column 'A' in 'where Clause' 当我在代码中写入值'A'时它可以工作，但是当它是来自用户的输入时它不起作用？

```
String dataSourceName = "testSqlDb";
String dbUrl = "jdbc:odbc:" + dataSourceName;
try {
  bloodgroup = jTextField2.getText().trim();
  Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
  Connection con = DriverManager.getConnection(dbUrl, "", "");
  Statement s = con.createStatement();

  ResultSet rs;
  String query = "SELECT COUNT(*) FROM blood_donation WHERE blood_group="
      + bloodgroup;

  rs = s.executeQuery(query);

  while (rs.next()) {
    System.out.println("COUNT(*)=" + rs.getInt("COUNT(*)"));
  }

  s.close();
  con.close();

} catch (Exception e) {
  System.out.println(e.getMessage());
  JOptionPane.showMessageDialog(null, e.getMessage(), "erro",
      JOptionPane.ERROR_MESSAGE, null);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:03:18.623

我猜你错过了''

```
String query = "SELECT COUNT(*) FROM blood_donation WHERE blood_group='"+bloodgroup+"'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T09:10:39.090

如果字符串值..

```
String query = "SELECT COUNT(*) FROM blood_donation 
WHERE blood_group='"+bloodgroup+"'; 
```

如果数值..

```
String query = "SELECT COUNT(*) FROM blood_donation 
WHERE blood_group="+bloodgroup; 
```

还可以在执行查询之前尝试`System.out.println("bloodgroup=" + bloodgroup);`并检查您的变量是否具有所需的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T09:09:40.510

您可以尝试用单引号将用户输入括起来。

```
String query = "SELECT COUNT(*) FROM blood_donation WHERE blood_group='"+bloodgroup+"'"; 
```

创建的查询字符串将是

```
SELECT COUNT(*) FROM blood_donation WHERE blood_group = 'A' 
```

代替

```
SELECT COUNT(*) FROM blood_donation WHERE blood_group = A 
```

这可能是您的问题的原因。

# c - 在 C 中实现 R 代码

> ID：11307629
> 
> 赞同：1
> 
> 时间：2012-07-03T09:01:32.370
> 
> 标签：c, r

我使用 R 并在 R 中实现了蒙特卡洛模拟，由于 for 循环，这需要很长时间。然后我意识到我可以使用 R API 在 C 中执行 for 循环。所以我在 R 中生成我的向量和矩阵，然后我从 C 中调用函数（它将执行 for 循环），最后我在 R 中呈现我的结果。但是，我只知道 C 的基础知识，我不知道如何转换一些函数到 C。例如，我从 R 中的一个函数开始，如下所示：

```
t=sample(1:(P*Q), size=1) 
```

我怎样才能在 C 中做到这一点？我在 R 中也有一个表达式：

```
A.q=phi[,which(q==1)] 
```

如何在 C 中使用“哪个”表达式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T10:22:36.467

在开始编写 C 代码之前，最好重写 R 代码以使其运行得更快。 `sample`是矢量化的。你能把对它的调用移到循环之外吗？那应该加快速度。更好的是，你能完全摆脱循环吗？

`which`此外，您在索引时不需要使用。R 接受逻辑向量作为索引。比较：

```
A.q=phi[,which(q==1)]
A.q=phi[,q==1] 
```

最后，我建议不要调用你的变量`t`，或者`q`因为有这些名称的函数。试着给你的变量起描述性的名字——它会让你的代码更具可读性。

# maven - maven pom的资源元素

> ID：11307632
> 
> 赞同：6
> 
> 时间：2012-07-03T09:01:43.727
> 
> 标签：maven, pom.xml

我是 Maven 新手，遇到了资源部分。maven 项目描述符（4.0 版）的参考说明“此元素描述了与项目或单元测试关联的所有类路径资源”（[链接](http://maven.apache.org/ref/3.0.4/maven-model/maven.html#class_resource)）。然而，这个描述我不理解/似乎对我来说是抽象的。为什么我要描述类路径资源？它如何影响项目的生命周期？

马蒂亚斯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T09:08:17.027

通常你有 src/main/resources 文件夹，其中包含将被打包到 jar 中的资源。上述文件夹中的所有内容都将自动打包到一个 jar 中，并可通过 getResource 访问...通过 pom 中的资源区域，您可以将[文件从 src/main/resources 过滤到 target/classes 文件夹](http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html)。

```
<project>
  ...
  <name>My Resources Plugin Practice Project</name>
  ...
  <build>
    ...
    <resources>
      <resource>
        <directory>src/main/resources</directory>
      </resource>
      ...
    </resources>
    ...
  </build>
  ...
</project> 
```

Maven 的生命周期不受此影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T05:10:02.700

例如，此功能允许您在 .properties 文件中使用 Maven 变量。只需在部分中声明 .properties 所在的目录，您`<resources>`就可以使用 ${project.name} 或其他任何内容。

pom.xml：

```
 <resources>
        <resource>
            <directory>src/main/resources</directory>
            <filtering>true</filtering>
        </resource>
    </resources> 
```

版本属性：

```
version=${pom.version}
timestamp=${timestamp} 
```

（${timestamp} 是使用 Maven Build Number 插件创建的）。

# java - 日食树中树项目的图标

> ID：11307633
> 
> 赞同：0
> 
> 时间：2012-07-03T09:01:49.483
> 
> 标签：java, eclipse, tree, eclipse-rcp

有没有办法做到以下几点？

我有一个树项目图标，例如：

[http://cdn1.iconfinder.com/data/icons/DarkGlass_Reworked/128x128/actions/contents.png](http://cdn1.iconfinder.com/data/icons/DarkGlass_Reworked/128x128/actions/contents.png)

并且当某个动作发生时，我想在其上添加一个标志（标志是一个将放置在其上的图标）

如果标志是正确的标记，那么它应该是

[http://store2.up-00.com/June12/yk105816.png](http://store2.up-00.com/June12/yk105816.png)

简单地说，我可以在动作的图像上添加图像吗？

注意：我知道我可以用另一种方式在两个图像之间切换。但我必须在 PS 的油漆上做一些工作。

抱歉，作为新用户，我无法发布图像的链接

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T09:40:41.360

您想要实现的在 Eclipse 平台中称为**装饰器。**

您可以在此页面上找到带有示例的详细说明：http: [//www.eclipse.org/articles/Article-Decorators/decorators.html](http://www.eclipse.org/articles/Article-Decorators/decorators.html)

还要检查以下 stackoverflow 问题：

*   [如何设置 Eclipse/RCP 装饰器的颜色？](https://stackoverflow.com/questions/4897750/how-to-set-the-color-of-an-eclipse-rcp-decorator)
*   [如何删除资源上先前添加的装饰器？](https://stackoverflow.com/questions/9998339/how-to-remove-a-previously-added-decorator-on-a-resource)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T09:07:43.543

您可以通过使用或子类化动态组合多个图像`org.eclipse.jface.resource.CompositeImageDescriptor`。

# php - PHP while循环不起作用

> ID：11307635
> 
> 赞同：1
> 
> 时间：2012-07-03T09:02:01.223
> 
> 标签：php, csv

我不明白为什么我的 while 循环在插入第一行数据后停止。请帮忙。我正在尝试在 MySql 表中上传 .csv 文件 - 如果数据已经存在，请跳过并转到第二行。

```
<?php
$dbhost = "xxxx";
$dbname = "xxxx";
$dbuser = "xxxx";
$dbpass = "xxxx";
mysql_connect ( $dbhost, $dbuser, $dbpass)or die("Could not connect: ".mysql_error());
mysql_select_db($dbname) or die(mysql_error());

fgetcsv_PHP();

function fgetcsv_PHP()
{

    if (($handle = fopen("events.csv", "r")) !== FALSE)
    {

        $length = 1000;
        $delimiter = ",";

        while ( ( $data = fgetcsv( $handle) ) !== FALSE )
        {
            // Count number of array elements in $data
            $num = count($data);
            // Print opening table row HTML tag
            $data[5]= strtolower($data[5]);
            $data[11]= "2012-06-22 10:30:40";
            $import="INSERT into candidatedb(event,rec,title,name,surname,email,phone,discip,exper,wheread,comment,stamp) values('$data[0]','$data[1]','$data[2]','$data[3]','$data[4]','$data[5]','$data[6]','$data[7]','$data[8]','$data[9]','$data[10]','$data[11]')";

            $result = mysql_query("SELECT * from candidatedb WHERE email = '$data[5]' AND surname = '$data[4]'");
            $num_rows = mysql_num_rows ($result);
            echo $num_rows;

            if ($num_rows > 0) {

                echo "Email address: $data[5] already exist </br>"; 
            }

            else {      

                    mysql_query($import) or die(mysql_error());
                    echo "Done! $data[5] inserted<br/>";
            }
        }
        // Close the file pointed to by $handle
        fclose($handle);
    }
}

"Done!<br/> $num record uploaded" 
?>

<?php /*?>
       $import="INSERT into candidatedb(event,rec,title,name,surname,email,phone,discip,exper,wheread,comment,stamp) values('$data[0]','$data[1]','$data[2]','$data[3]','$data[4]','$data[5]','$data[6]','$data[7]','$data[8]','$data[9]','$data[10]','$data[11]')";

       mysql_query($import) or die(mysql_error());
<?php */?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:16:21.097

如果您尝试使用此调试，输出是什么：

```
fgetcsv_PHP();

function fgetcsv_PHP() {

$length    = 1000;
$delimiter = ",";
if (($handle = fopen("events.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, $length, $delimiter)) !== FALSE)
    {
        echo "read line: ".implode($data, ';')." <br>\n";
    }
    fclose($handle);
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:31:40.877

好的，我发现了问题。它不是 .csv 文件的代码。由于某种原因， php 函数未正确解码 Mac 版 Excel 的 .csv 版本“逗号分隔值”。但是，如果您将 .csv 导出为“windows 逗号分隔 (.csv)”，那么它就像一个魅力。

![在此处输入图像描述](../Images/416f86874e4b7a1bde8cb4c643d56f78.png)

谢谢你的帮助。

# iphone - 当scrollView正在减速时，触摸检测很慢

> ID：11307643
> 
> 赞同：2
> 
> 时间：2012-07-03T09:02:19.983
> 
> 标签：iphone, uiscrollview, touch

我有一个虚拟视图，它充当滚动视图，但将触摸事件传播到响应者链。
基本上，它处理平移手势。（如[WWDC 2012 scrollView session 所示](https://developer.apple.com/videos/wwdc/2012/)）
并将点击事件传递给响应者链。

```
[dummyView addGestureRecognizer:scrollView.panGestureRecogonizer]; 
```

它工作得很好，但是我想在事情减速时更快地检测到触摸。

我只能在滚动完全停止后检测到触摸。

我应该如何在滚动视图减速时检测到触摸事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T08:24:42.737

尝试将滚动视图的多点触控属性设置为 true

```
 [dummyView setMultipleTouchEnabled:YES]; 
```

# java - 在 Java 中使用 Thread#stop() 来杀死一个正在狂奔的线程是否可以接受？

> ID：11307649
> 
> 赞同：6
> 
> 时间：2012-07-03T09:02:33.920
> 
> 标签：java, regex, multithreading, timeout

遗憾的是，在 Java 中对字符串使用正则表达式时无法指定超时。因此，如果您没有严格控制将哪些模式应用于哪些输入，您最终可能会拥有消耗大量 CPU 的线程，同时无休止地尝试将（设计不那么好的）模式与（恶意？）输入进行匹配。

我知道不推荐使用 Thread#stop() 的原因（请参阅[http://download.oracle.com/javase/1.5.0/docs/guide/misc/threadPrimitiveDeprecation.html](http://download.oracle.com/javase/1.5.0/docs/guide/misc/threadPrimitiveDeprecation.html)）。它们以在 ThreadDeath 异常的情况下可能会损坏的对象为中心，然后污染您正在运行的 JVM 环境并可能导致细微的错误。

对于比我更深入了解 JVM 工作原理的任何人，我的问题是：**如果需要停止的线程没有任何（明显的）监视器或对程序其余部分使用的对象的引用，那么使用 Thread#stop() 是否可以接受？**

我创建了一个相当防御性的解决方案，以便能够处理带有超时的正则表达式匹配。我很乐意发表任何评论或评论，尤其是关于这种方法可能导致的问题，尽管我努力避免这些问题。

谢谢！

```
import java.util.concurrent.Callable;

public class SafeRegularExpressionMatcher {

    // demonstrates behavior for regular expression running into catastrophic backtracking for given input
    public static void main(String[] args) {
        SafeRegularExpressionMatcher matcher = new SafeRegularExpressionMatcher(
                "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx", "(x+x+)+y", 2000);
        System.out.println(matcher.matches());
    }

    final String stringToMatch;

    final String regularExpression;

    final int timeoutMillis;

    public SafeRegularExpressionMatcher(String stringToMatch, String regularExpression, int timeoutMillis) {
        this.stringToMatch = stringToMatch;
        this.regularExpression = regularExpression;
        this.timeoutMillis = timeoutMillis;
    }

    public Boolean matches() {
        CallableThread<Boolean> thread = createSafeRegularExpressionMatchingThread();
        Boolean result = tryToGetResultFromThreadWithTimeout(thread);
        return result;
    }

    private CallableThread<Boolean> createSafeRegularExpressionMatchingThread() {
        final String stringToMatchForUseInThread = new String(stringToMatch);
        final String regularExpressionForUseInThread = new String(regularExpression);
        Callable<Boolean> callable = createRegularExpressionMatchingCallable(stringToMatchForUseInThread,
                regularExpressionForUseInThread);
        CallableThread<Boolean> thread = new CallableThread<Boolean>(callable);
        return thread;
    }

    private Callable<Boolean> createRegularExpressionMatchingCallable(final String stringToMatchForUseInThread,
            final String regularExpressionForUseInThread) {
        Callable<Boolean> callable = new Callable<Boolean>() {
            public Boolean call() throws Exception {
                return Boolean.valueOf(stringToMatchForUseInThread.matches(regularExpressionForUseInThread));
            }
        };
        return callable;
    }

    private Boolean tryToGetResultFromThreadWithTimeout(CallableThread<Boolean> thread) {
        startThreadAndApplyTimeout(thread);
        Boolean result = processThreadResult(thread);
        return result;
    }

    private void startThreadAndApplyTimeout(CallableThread<Boolean> thread) {
        thread.start();
        try {
            thread.join(timeoutMillis);
        } catch (InterruptedException e) {
            throwRuntimeException("Interrupt", e);
        }
    }

    private Boolean processThreadResult(CallableThread<Boolean> thread) {
        Boolean result = null;
        if (thread.isAlive()) {
            killThread(thread); // do not use anything from the thread anymore, objects may be damaged!
            throwRuntimeException("Timeout", null);
        } else {
            Exception exceptionOccurredInThread = thread.getException();
            if (exceptionOccurredInThread != null) {
                throwRuntimeException("Exception", exceptionOccurredInThread);
            } else {
                result = thread.getResult();
            }
        }
        return result;
    }

    private void throwRuntimeException(String situation, Exception e) {
        throw new RuntimeException(situation + " occured while applying pattern /" + regularExpression + "/ to input '"
                + stringToMatch + " after " + timeoutMillis + "ms!", e);
    }

    /**
     * This method uses {@link Thread#stop()} to kill a thread that is running wild. Although it is acknowledged that
     * {@link Thread#stop()} is inherently unsafe, the assumption is that the thread to kill does not hold any monitors on or
     * even references to objects referenced by the rest of the JVM, so it is acceptable to do this.
     * 
     * After calling this method nothing from the thread should be used anymore!
     * 
     * @param thread Thread to stop
     */
    @SuppressWarnings("deprecation")
    private static void killThread(CallableThread<Boolean> thread) {
        thread.stop();
    }

    private static class CallableThread<V> extends Thread {

        private final Callable<V> callable;

        private V result = null;

        private Exception exception = null;

        public CallableThread(Callable<V> callable) {
            this.callable = callable;
        }

        @Override
        public void run() {
            try {
                V result = compute();
                setResult(result);
            } catch (Exception e) {
                exception = e;
            } catch (ThreadDeath e) {
                cleanup();
            }
        }

        private V compute() throws Exception {
            return callable.call();
        }

        private synchronized void cleanup() {
            result = null;
        }

        private synchronized void setResult(V result) {
            this.result = result;
        }

        public synchronized V getResult() {
            return result;
        }

        public synchronized Exception getException() {
            return exception;
        }

    }

} 
```

编辑：

感谢 dawce 向我指出了[这个解决方案](https://stackoverflow.com/questions/910740/cancelling-a-long-running-regex-match/11348374#11348374)，我能够在不需要额外线程的情况下解决我原来的问题。我已经在那里发布了代码。感谢所有回复的人。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T09:07:05.003

如果您确定它是唯一可用的解决方案，则可以使用 Thread.stop()。您可能需要关闭并重新启动应用程序以确保其处于良好状态。

注意：线程可以捕获和忽略`ThreadDeath`，因此不保证停止所有线程。

停止线程的另一种方法是在不同的进程中运行它。这可以根据需要杀死。这仍然会使资源处于不一致的状态（如锁定文件），但不太可能且更容易控制。

最好的解决方案当然是修复代码，使其一开始就不会这样做，而是尊重 Thread.interrupt() 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T09:59:46.380

> 如果需要停止的线程没有任何（明显的）监视器或对程序其余部分使用的对象的引用，那么仍然可以使用 Thread#stop() 吗？

是否“可接受”**由您**决定。我们所能做的就是建议它是否安全。答案是它不是。

*   它拥有的非显而易见的监视器和引用呢？

*   否则它会发出通知等呢？

*   否则它可能会影响静力学的动作呢？

问题是很难（在大多数情况下）确定您已经考虑了线程可能与应用程序的其余部分进行的所有可能的交互。

* * *

> 重新启动应用程序正是我试图避免的......

令我震惊的是，**这**是您问题的真正根源；即，您在设计程序时没有考虑到出于实际原因需要重新启动长时间运行的程序这一事实。尤其是那些有潜在错误的复杂的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-03T09:05:33.327

而不是使用`Thread.stop()`which 已被弃用，使用`Thread.interrupt()`which 将~~停止~~引发中断标志，可以通过`isInterrupted()`or进行检查`interrupted()`，或者抛出一个`InterruptedException`.

我构建扩展 Thread 类的模式是这样的

```
 class MyThread extends Thread{
      private volatile boolean keepRunning = true;

      public void run(){
           while(keepRunning){
                // do my work
           }
       }

       public void killThread(){
           keepRunning = false;
           this.interrupt();
       }
 } 
```

我并不是说我的处理方式是完美的，可能会有更好的选择，但这对我有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T11:34:23.157

如果您专门将线程代码设计为不持有锁等，（是的，这包括非显式锁。例如，可以在更改字符串大小时使用的 malloc 锁），然后停止线程，是的。轮询“中断”标志很好，除了它意味着轮询“中断”标志，即。在 99.9999% 的时间内，它实际上并未设置。这可能是高性能、紧密循环的问题。

如果检查可以保持在最内层循环之外并且仍然可以合理地频繁检查，那么这确实是最好的方法。

如果无法经常检查该标志（例如，由于无法访问的库代码中的紧密循环），您可以将线程优先级设置为尽可能低的优先级并忘记它，直到它最终死掉。

有时可能的另一个问题是破坏线程正在其上工作的数据，使库代码正常退出，导致引发异常，因此控制从不透明的库代码中冒出或导致“OnError” ' 要调用的处理程序。如果库。正在对字符串进行操作，用空值喷出字符串肯定会有所作为。任何例外都可以 - 如果您可以在线程中安排 AV/segfault，那么只要您重新获得控制权就可以了。

# c# - 在 LocalDB 中重置 EF 代码优先数据库

> ID：11307650
> 
> 赞同：6
> 
> 时间：2012-07-03T09:02:35.987
> 
> 标签：c#, entity-framework, ef-code-first, reset, localdb

我正在使用 Entity Framework 5.0 RC 和 LocalDB 数据库，该数据库预配置了 VS 2012 RC，用于代码优先数据库的一些原型设计和测试。

在更改了我的代码优先数据库并运行“更新数据库”的几个周期之后，我做了一个巨大的破坏性更改，并且自动迁移失败了。我不关心解决这个冲突，因为这只是原型设计，所以丢失数据很好。

如何重置或删除数据库？重置还必须重置迁移表，这似乎在 Visual Studio 的服务器资源管理器中隐藏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-10T02:09:09.847

在 Visual Studio 中删除整个数据库

1.  打开 SQL Server 对象资源管理器
2.  找到您正在使用的数据库右键单击并选择删除
3.  选中两个复选框（删除备份和还原历史记录，以及关闭现有连接），然后单击确定
4.  再次运行程序，它应该重新创建数据库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T11:07:45.063

到目前为止，这是我找到的最好的方法。

1.  使 __MigrationHistory 成为非系统表。
2.  执行 SQL 脚本以删除所有表。

要更改 __MigrationHistory 表，请参阅[本文](http://blog.oneunicorn.com/2012/02/27/code-first-migrations-making-__migrationhistory-not-a-system-table/)以处理现有数据库和使用代码优先创建的新数据库。

SQL脚本如下：

```
EXEC sp_MSforeachtable @command1 = "DROP TABLE ?"; 
```

我正在使用[Database .NET v4 Free](http://visualstudiogallery.msdn.microsoft.com/ec14ae60-cc0a-4c8e-a8a3-81dec4730096)来运行这个 SQL 脚本，因为我的 Visual Studio 11 RC 副本由于某种原因不允许我在 LocalDB 上运行查询。此外，由于某些外键，我需要运行脚本两次以删除所有表。我没有费心解决这个问题，因为它似乎工作得很好。

# .net - Vb.net 接口，使方法只接受相同类型的实例作为参数

> ID：11307652
> 
> 赞同：3
> 
> 时间：2012-07-03T09:02:40.760
> 
> 标签：.net, vb.net, generics, types

我试图在我的 vb.net 接口中定义一个方法，该方法只接受从同一接口继承的对象，并且与接收方法调用的实例属于同一类。这在 vb.net 中可行吗？

下面我尝试用（无效的）泛型类型约束来说明我想要做什么：

```
Public Interface IFoo

   CompareStuff(Of T as sametype)(obj as T) as Boolean

End Interface 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T19:12:04.677

您正在寻找[Curiously recurring 模板模式](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)。

我对我的 VB 有点生疏，所以这里是 C#

```
public interface IFoo<T>
    where T : IFoo<T>
{
    bool CompareStuff(T obj);
} 
```

然后你像这样实现它

```
public class Foo : IFoo<Foo>
{
    bool CompareStuff(Foo obj);
} 
```

查看Eric Lippert 的[这篇文章](http://blogs.msdn.com/b/ericlippert/archive/2011/02/03/curiouser-and-curiouser.aspx)。特别注意他说的结尾：

> 我的建议是在你用 C# 实现这种奇怪的模式之前要好好思考一下；给客户带来的好处真的超过了与代码维护者的精神负担相关的成本吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T09:27:57.547

```
Public Interface IFoo(Of T)
    CompareStuff(obj As T) As Boolean 
```

像这样使用：

```
Public Class Foo Implements IFoo(Of Foo)
    Function CompareStuff(obj As Foo) As Boolean 
```

但不幸的是，它也允许编译：

```
Public Class Bar Implements IFoo(Of Foo)
    Function CompareStuff(obj As Foo) As Boolean 
```

现在想不出任何适当的约束。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T19:07:01.253

如果 type`X`派生自 type`Y`并且 a`Y`可以对另一个执行某些操作`Y`，那么 Liskov 替换原则要求 a`Y`必须能够对 an 执行相同的操作`X`，并且 an`X`必须能够对 a 执行相同的操作`Y`。将这些要求放在一起，一个`X`必须能够对另一个执行该操作`X`。

请注意， a 有可能`X`对另一个 执行某些操作`X`，而此类操作不能由 a 执行或在 a 上执行`Y`。

顺便说一句，虽然实现结构和密封类很有用，但`IEquatable<T>`对于任何类型的任何两个对象，可以有意义地回答任何对象是否等于任何其他对象的问题。例如，如果一个人有一个 的集合`Cat`，那么可以合理地尝试将该集合中的对象与一个类型的参数`SiameseCat`（虽然集合可能包含 的实例`PersianCat`，它也可能包含一些类型`SiameseCat`）或类型`Animal`（一些传入的对象可能是 type `Dog`. 但其他对象可能是 type `Cat`)。虽然查询一个集合`Cat`以查看它是否包含某些特定`Dog`可能是“愚蠢的”，但该集合在回答查询时应该没有问题（“找到零个实例”）。

# google-api - 使用 google Search Appliance api 创建抄袭检测器

> ID：11307656
> 
> 赞同：0
> 
> 时间：2012-07-03T09:02:47.357
> 
> 标签：google-api

我希望设计一个可以使用 Google 搜索引擎 API 检测所有格式的抄袭（基于网络）的应用程序。这种应用程序需要什么资源。基本上，用户可以上传一个文件，该文件将根据网络上的各种格式进行检查。我读过有网络爬虫，但我们究竟如何使用它们。Google Search Appliance API 是正确的方法吗？

另外我之前没有使用过 Google API，那么最好的开始方式是什么？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:28:48.207

也许[http://www.google.com/alerts](http://www.google.com/alerts)会做？您可以使用一些库进行一次查找，例如在 Ruby 中，它（乍一看）是一个[galerts](https://github.com/amalhotra/galerts) gem。在 Python 中，[galerts](http://pypi.python.org/pypi/galerts/0.1.5)包可以帮助您管理提要。其他语言可能有类似的库。之后，[自行解析结果提要](https://stackoverflow.com/questions/860442/google-alerts-api)。

# python - 如何在 turbogears2 的 app_globals.py 中使用数据库？

> ID：11307657
> 
> 赞同：0
> 
> 时间：2012-07-03T09:02:58.867
> 
> 标签：python, sqlalchemy, turbogears2, genshi

可能相关的主题，但我无法解决问题：[如何使用表中的值初始化 TurboGears 2 中的全局变量](https://stackoverflow.com/questions/1521264/how-to-initialize-global-variables-in-turbogears-2-with-values-from-a-table)

问题是，在 Turbogears 中初始化 app_globals.py 中的一些全局变量时，我试图从数据库中读取一些配置参数。

但是，当尝试访问数据库时，我收到一个异常：

```
sqlalchemy.exc.UnboundExecutionError: Could not locate a bind configured on mapper Mapper|Config|config_table, SQL expression or this Session 
```

正如异常所述，这可能是由于尚未绑定数据库（首先设置全局参数）。从另一个主题中，我被指出在初始化全局变量之前转到 app_cfg.py 并使用“on_startup”绑定数据库，但这对我不起作用。要么我做得不对，要么这不是问题的解决方案。例如，我试着写：

```
def on_startup():
    print "Foo bar!!!"

base_config.register_hook('startup', on_startup) 
```

但是 print 语句永远不会执行（崩溃发生在之前）。

有人对从这里去哪里有任何指示吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T08:50:38.337

您可以使用[after_config 挂钩在 app_globals](http://www.turbogears.org/2.1/docs/main/Config.html?highlight=before_config#available-hooks)中调用 setup 方法，该方法会进入数据库并检索设置自身所需的数据。

after_config hooks 实际上是在配置完整的 turbogears 应用程序后调用的，因此您将同时构建和配置 app_globals 和数据库。`config['tg.app_globals']`您可以使用或`config['pylons.app_globals']`取决于您使用的 TG 版本从挂钩中访问 app_globals 。

注意 after_config 钩子必须返回 turbogears 应用程序本身，所以只返回你得到的参数。

# crystal-reports - Crystal Report 中的导出按钮 - 单击时不会发生任何操作

> ID：11307662
> 
> 赞同：0
> 
> 时间：2012-07-03T09:03:10.810
> 
> 标签：crystal-reports, crystal-reports-12

我有一个使用 Crystal Reports 12 来查看报表的 Web 应用程序。报告查看成功，但是当我尝试将报告导出为任何格式（PDF、Excel 等）时，导出按钮什么也不做。

`object expected`当我复制报告 url 并在浏览器中输入它时，我在 allinone.js 中收到 JavaScript 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T11:48:35.190

虽然您没有提供任何代码，但 Crystal 报表在导出报表时遇到了问题。所以我个人建议获取最新版本。

# c++ - Sencha touch 2中的IOS封装

> ID：11307667
> 
> 赞同：0
> 
> 时间：2012-07-03T09:03:34.130
> 
> 标签：c++, ios, json, extjs

在尝试打包我的 sencha touch 2 测试应用程序时，我收到以下错误消息：

> **应用成功打包 [ERROR] Assertion failed: (type_ == stringValue), function asCString, file src/json_value.cpp, line 679.**

它在模拟器上工作得非常好。

我的**Packager.json**文件包含：

```
{
    "applicationName":"Myapp",
    "applicationId":"com.company.myapp",
    "bundleSeedId":"KPXFEPZ6EF",
    "iconName":"./icon.png",
    "versionString":"1.0",
    "outputPath":"build/",
    "inputPath":"../MyApp",
    "configuration":"Release",
    "platform":"iOS",
    "deviceType":"Universal",
    "certificatePath":"/Users/Me/Desktop/Certificates.p12",
    "orientations": [
        "portrait",
        "landscapeLeft",
        "landscapeRight",
        "portraitUpsideDown"
    ]
} 
```

我认为证书路径是导致此错误的原因。

请让我知道我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T16:48:10.423

我猜你需要添加“certificateAlias”

# c# - 删除 while ((line = r.ReadLine()) != null) 内的最后 3 行，但不打开新的文本文件来删除这些行？

> ID：11307671
> 
> 赞同：1
> 
> 时间：2012-07-03T09:03:40.690
> 
> 标签：c#

这是我迄今为止看到的删除文本文件中最后 3 行的代码，但需要确定 string[] lines = File.ReadAllLines(); 我没有必要这样做。

```
string[] lines = File.ReadAllLines(@"C:\\Users.txt");
            StringBuilder sb = new StringBuilder();
            int count = lines.Length - 3; // except last 3 lines 
            for (int s = 0; s < count; s++)
            {
                sb.AppendLine(lines[s]);

            } 
```

代码运行良好，但我不想重新读取文件，因为我在上面提到了流读取器：

```
using (StreamReader r = new StreamReader(@"C:\\Users.txt")) 
```

据我所知，我是 C# 的新手，在使用 streamreader 之后，如果我想修改这些行，我必须使用这个：

```
while ((line = r.ReadLine()) != null)
{
#sample codes inside the bracket
                    line = line.Replace("|", "");
                    line = line.Replace("MY30", "");
                    line = line.Replace("E", "");
} 
```

那么，有没有办法删除“while（（line = r.ReadLine（））！= null）”中文件中的最后3行？

我必须一次删除行、替换行和更多修改，所以我不能一次又一次地打开/读取同一个文本文件来修改行。我希望我问的方式对你们来说是不稳定的>.<

请帮助我，我知道这个问题听起来很简单，但我已经搜索了很多方法来解决它但失败了=（

到目前为止，我的代码是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

namespace ConsoleApplication11
{
public class Read
{

    static void Main(string[] args)
    {

        string tempFile = Path.GetTempFileName();
        using (StreamReader r = new StreamReader(@"C:\\Users\SAP Report.txt"))
        {
            using (StreamWriter sw = new StreamWrite (@"C:\\Users\output2.txt"))
            {
                string line;

                while ((line = r.ReadLine()) != null)
                {
                    line = line.Replace("|", "");
                    line = line.Replace("MY30", "");
                    line = line.Replace("E", "");

                    line = System.Text.RegularExpressions.Regex.Replace(line, @"\s{2,}", " ");

                    sw.WriteLine(line);
                }
     }
            }
        }
    }
} 
```

现在我的下一个任务是删除这些代码之后文件中的最后 3 行，我需要这方面的帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T09:12:01.870

使用**File.ReadAllLines**您已经读取了文件，因此您可以处理**string[]**中的每一行（替换和正则表达式），然后将它们写入输出。您不必重新阅读它们并将它们放入**StringBuilder**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T09:11:05.683

您可以保留前三行的“滚动窗口”：

```
string[] previousLines = new string[3];
int index = 0;
string line;
while ((line = reader.ReadLine()) != null)
{
    if (previousLines[index] != null)
    {
        sw.WriteLine(previousLines[index]);
    }
    line = line.Replace("|", "")
               .Replace("MY30", "")
               .Replace("E", "");
    line = Regex.Replace(line, @"\s{2,}", " ");
    previousLines[index] = line;
    index = (index + 1) % previousLines.Length;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T09:14:13.123

您可以保留行列表并在以后加入它们，而不是将行直接附加到字符串构建器。这样你就可以轻松地省略最后三行。

为了减少您必须在列表中保留的行数，您可以定期附加列表中的一行并将其从中删除。因此，您将在数组中保留 3 行的缓冲区，并在缓冲区包含 4 行时弹出并追加一行。

# css - 每当更新时刷新 panelGrid

> ID：11307672
> 
> 赞同：0
> 
> 时间：2012-07-03T09:03:48.943
> 
> 标签：css, jsf, .refresh

每当数据在数据库中更新而不刷新整个页面时如何刷新 JSF 面板网格。有什么可以配置的吗？或者我应该创建一个 backbean 函数？任何人都可以举个例子指导我吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:19:04.653

最好的方法是使用*推送技术*（您可以从服务器触发客户端行为）

例如*Primefaces*的 PrimePush ：[PrimePush](http://www.primefaces.org/showcase/push/index.jsf)，但它还不完美，应该是 3.5 版本（我认为）

因此，现在您可以使用[Primefaces Poll](http://www.primefaces.org/showcase/ui/poll.jsf)，这样您将每 X 秒检查一次数据是否已更改，如果是，您可以使用该`update`属性更新特定元素

# ruby-on-rails - Heroku：应用程序因 H10 错误代码而崩溃。无法解决

> ID：11307677
> 
> 赞同：1
> 
> 时间：2012-07-03T09:04:03.890
> 
> 标签：ruby-on-rails, ruby, heroku

我的应用程序在本地运行，但部署到 Heroku 时崩溃。有什么帮助吗？

抱歉格式化。不知道如何正确执行此操作...

```
2012-07-03T08:56:02+00:00 app[web.1]: Exiting
2012-07-03T08:56:02+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/ext/module.rb:36:in `const_missing': uninitialized constant Admin::ResourceController (NameError)
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/spree_essential_cms-0.2.1/app/controllers/admin/contents_controller.rb:1:in `<top (required)>'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/polyglot-0.3.3/lib/polyglot.rb:63:in `require'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/polyglot-0.3.3/lib/polyglot.rb:63:in `require'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.4/lib/rails/engine.rb:417:in `block (2 levels) in eager_load!'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.4/lib/rails/engine.rb:416:in `each'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.4/lib/rails/engine.rb:416:in `block in eager_load!'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.4/lib/rails/engine.rb:414:in `each'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.4/lib/rails/engine.rb:414:in `eager_load!'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.4/lib/rails/application/railties.rb:8:in `each'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.4/lib/rails/application/railties.rb:8:in `all'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.4/lib/rails/engine.rb:412:in `eager_load!'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.4/lib/rails/application/finisher.rb:51:in `block in <module:Finisher>'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.4/lib/rails/initializable.rb:30:in `instance_exec'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.4/lib/rails/initializable.rb:30:in `run'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.4/lib/rails/initializable.rb:55:in `block in run_initializers'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.4/lib/rails/initializable.rb:54:in `each'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.4/lib/rails/initializable.rb:54:in `run_initializers'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.4/lib/rails/application.rb:96:in `initialize!'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.4/lib/rails/railtie/configurable.rb:30:in `method_missing'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/polyglot-0.3.3/lib/polyglot.rb:63:in `require'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/polyglot-0.3.3/lib/polyglot.rb:63:in `require'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/config.ru:4:in `block in <main>'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.3.6/lib/rack/builder.rb:51:in `instance_eval'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.3.6/lib/rack/builder.rb:51:in `initialize'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/config.ru:1:in `new'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/config.ru:1:in `<main>'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.3.6/lib/rack/builder.rb:40:in `eval'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.3.6/lib/rack/builder.rb:40:in `parse_file'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.3.6/lib/rack/server.rb:200:in `app'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.4/lib/rails/commands/server.rb:46:in `app'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.3.6/lib/rack/server.rb:301:in `wrapped_app'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.3.6/lib/rack/server.rb:252:in `start'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.4/lib/rails/commands/server.rb:70:in `start'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.4/lib/rails/commands.rb:54:in `block in <top (required)>'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.4/lib/rails/commands.rb:49:in `tap'
2012-07-03T08:56:02+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.4/lib/rails/commands.rb:49:in `<top (required)>'
2012-07-03T08:56:02+00:00 app[web.1]:   from script/rails:6:in `require'
2012-07-03T08:56:02+00:00 app[web.1]:   from script/rails:6:in `<main>'
2012-07-03T08:56:03+00:00 heroku[web.1]: Process exited with status 1 
```

# c# - 如何在 C# 的文本框中组合来自多个方法的文本？

> ID：11307678
> 
> 赞同：-6
> 
> 时间：2012-07-03T09:04:04.897
> 
> 标签：c#, sharepoint, methods, text-files

我想从一些文本文件中获取文本并将其插入到文本框中。我创建了一些方法来获取文件的文本。我的目标是将文本文件合并为一个文本。问题是程序只显示最后一个文本文件。

如何将所有文本文件合并为一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T09:10:25.607

1.  Create a `StringBuilder` object. [http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)
2.  Read each file and add the file contents to the `StringBuilder` using the `Append` method of the `StringBuilder` object
3.  Assign the Value of `StringBuilder.ToString()` to the `TextBox.Text` property

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T09:14:30.837

在没有看到您的代码的情况下，这是我能做的最好的事情：

```
myTextBox.Text = 
  File.ReadAllText("file1") + 
  File.ReadAllText("file2") + 
  File.ReadAllText("file3"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:59:40.007

我有以下方法：（它们远程相同）

```
public void Method1()
    {
        string variable1 = "$variable1";
        string variable2 = "$variable2";
        string file = System.IO.File.ReadAllText(@"C:\temp\textfile.txt", System.Text.Encoding.UTF8);

        try
        {
            if (File.Exists(@"C:\temp\textfile.txt"))
            {
                // NOP: Nothing to DO
            }
            if (file.Contains(variable1infile))
            {
                file = file.Replace(variable1, variable1infile);
                System.IO.File.WriteAllText(@"C:\temp\textfile.txt", file);
                var reload = File.ReadAllText(@"C:\temp\textfile.txt");
                TextBox1.Text = reload;
            }
            if (file.Contains(variable2infile))
            {
                file = file.Replace(variable2, variable2infile);
                System.IO.File.WriteAllText(@"C:\temp\textfile.txt", file);
                var reload = File.ReadAllText(@"C:\temp\textfile.txt");
                TextBox1.Text = reload;
            }
            var gettextback = File.ReadAllText(@"C:\temp\another_textfile.txt");
            File.WriteAllText(@"C:\temp\textfile.txt", gettextback);
        }
        catch
        {
            TextBox1.Visible = true;
            TextBox1.Text = "The file is not avaiable. Please contact your administrator!";
        }
    } 
```

比：

我结合了这些方法：

```
 protected void GetWholeTextOfFile_Click(object sender, EventArgs e)
    {
        Method1();
        Method2();
        Method3();
        Method4();
    } 
```

# c# - 浏览 XML 节点的更好方法？

> ID：11307681
> 
> 赞同：0
> 
> 时间：2012-07-03T09:04:11.863
> 
> 标签：c#, xml

我正在使用导入的 XML 文件并使用 XMLDocument 我想知道是否有更好的方法来做同样的事情。基本上 root 包含 MHZ 节点，每个 MHZ 包含多个设备和一个名称。我想计算每个 MHZ 节点并显示每个 MHZ 中的设备数量：

```
 String xmlName = "tts.xml";
        XmlDocument readDoc = new XmlDocument();
        readDoc.Load(xmlName);
        int fileNb = readDoc.SelectNodes("//MHZ").Count;
        Console.WriteLine("MHZ number : "+fileNb);
        for (int i = 0; i < fileNb; i++)
        {   
            int deviceNb = readDoc.SelectNodes("//MHZ[" +(i+1)+ "]/device").Count;
            Console.WriteLine(deviceNb);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:07:38.287

如果您使用的是 .NET 3.5 或更高版本，我会使用 LINQ to XML：

```
var doc = XDocument.Load(xmlName);
var mhzs = doc.Descendants("MHZ");
Console.WriteLine("Count of MHZ: {0}", mhz.Count());
foreach (var mhz in mhzs)
{
    Console.WriteLine(mhz.Elements("device").Count());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:07:37.563

您是否查看过 Linq to XML 以获取更多信息，请查看此处 [http://msdn.microsoft.com/en-us/library/bb387098.aspx](http://msdn.microsoft.com/en-us/library/bb387098.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T09:08:16.733

创建可序列化对象，然后将您的 xml 反序列化为对象列表。这样您就可以忠于 OOP。

```
[DataContract]
public class Device
{
   [DataMember]
   public string Property { get; set; }
} 
```

或查看：[DataContract XML 序列化和 XML 属性](https://stackoverflow.com/questions/4858798/datacontract-xml-serialization-and-xml-attributes)或[如何反序列化 XML 文档](https://stackoverflow.com/questions/364253/how-to-deserialize-xml-document)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T09:08:32.750

在某些情况下，我创建表示 XML 结构的对象并将 XML 反序列化为这些对象。这为我提供了一种更好的方式来查看数据、验证和迭代数据集合。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-03T09:09:29.743

XMLDocument 很容易使用，因为您已经在使用它了。另外值得一看 XPath

# android - SDK 管理器 Android 2.2

> ID：11307682
> 
> 赞同：0
> 
> 时间：2012-07-03T09:04:23.640
> 
> 标签：android, android-2.2-froyo

我安装了Android 2.1、Android 2.2 Android 4.0.3的包，但是除了2.1之外，4.0.3都看不到。可能是什么问题？我需要为 Android 2.2 创建一个项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:14:44.153

SDK 管理器

1 下载sdk [http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

2 进入SDK目录，深入tools目录。

3 双击安卓应用

4 等待一分钟，SDK 管理器将显示。你可以下载你需要的SDK版本

AVD 管理器

1 如果您已下载所需的 SDK 版本。您可以从“工具”菜单中找到 AVD 管理器。

2 按照谷歌的[指示](http://developer.android.com/tools/devices/managing-avds.html)

# iphone - 调用zooz的支付接口时出错， setValue:forUndefinedKey:

> ID：11307684
> 
> 赞同：1
> 
> 时间：2012-07-03T09:04:31.503
> 
> 标签：iphone, objective-c, xcode, payment

当我单击我的`buyMore`按钮时，编写下面的代码，如下面的zooz示例代码中所写，

```
-(IBAction)buyMore
{
    ZooZ * zooz = [ZooZ sharedInstance];
    zooz.sandbox = YES;

    zooz.tintColor = [UIColor colorWithRed:1 green:0.8 blue:0 alpha:1];

    zooz.barButtonTintColor = [UIColor darkGrayColor];

    ZooZPaymentRequest * req = [zooz createPaymentRequestWithTotal:12.1 invoiceRefNumber:@"test invoice ref-1234" delegate:self];

    req.currencyCode = @"EUR";

    req.payerDetails.firstName = @"Some";

    req.payerDetails.email = @"test@zooz.com";

    req.payerDetails.address.zip=@"01234";

    req.requireAddress = NO;

    ZooZInvoiceItem * item = [[[ZooZInvoiceItem alloc] initWithPrice:12.1 quantity:1 name:@"T-Shirt"] autorelease];//Don't forget to release/autorelease

    item.itemId = @"refId-12345678"; // optional

    [req addItem:item];

    [zooz openPayment:req forAppKey:@"951bde04-5a26-4200-a94e-34d775a1e5f9"];

} 
```

我收到错误说...

**由于未捕获的异常 NSUnknownKeyException 导致应用程序终止，原因：[ setValue:forUndefinedKey:]：此类与键 pageControl 的键值编码不兼容。**

首先抛出调用堆栈：

(0x1966052 0x1d4fd0a 0x1965f11 0x134c032 0x12bdf7b 0x12bdeeb 0x12d8d60 0xbcb91a 0x1967e1a 0x18d1821 0xbca46e 0xa71e2c 0xa723a9 0xa725cb 0xa72941 0xa8447d 0xa8466f 0xa8493b 0xa853df 0xa85561 0xba14ca 0x9eb301 0x1967e72 0x8cb92d 0x8d5827 0x85bfa7 0x85dea6 0x8e930c 0x9bd530 0x193a9ce 0x18d1670 0x189d4f6 0x189cdb4 0x189cccb 0x215b879 0x215b93e 0x9aca9b 0x29aa 0x28f5)

终止称为抛出异常程序以退出代码结束：0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:10:04.990

```
 I think there is a problem into your XIB file. 
```

Look into XIB file, have you connect any control named 'pageControl' which is not declare into .h file.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:16:31.950

请右键单击文件所有者并检查您是否收到任何连接插座的黄色警告，如果是，则将其删除

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-16T08:15:51.057

请参考[Zooz Secure In app payment runtime error](https://stackoverflow.com/questions/12895447/zooz-secure-in-app-payment-runtime-error)。您需要遵循 ZooZ pdf 文档中的确切说明。我猜您忘记将 -ObjC 添加到“其他链接器标志”中。

# asp.net - 从 asp.net 网站（.aspx 页面）到 WCF 服务的转换

> ID：11307686
> 
> 赞同：1
> 
> 时间：2012-07-03T09:04:35.973
> 
> 标签：asp.net

我已经使用asp.net 开发了一个网站。在网站中，如果用户输入用户名和密码，他将进入下一页，例如 home.aspx、dailyreport.aspx，这是正确的。但我面临的问题是，如果用户输入任何页面的 URL，例如域名/项目名/每日报告，那么他将在所需的页面中。那么拥有登录页面有什么用......如何处理这个问题......任何人都可以帮助我。请尽快....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:08:31.237

至少，您需要启用表单身份验证。这将确保任何未经授权的用户都被重定向到登录页面，他们可以从那里访问该站点。

有关表单身份验证的更多信息，试试这个；

[解释：ASP.NET 2.0 中的表单身份验证](http://msdn.microsoft.com/en-us/library/ff647070.aspx)

# google-cloud-messaging - 使用 GCM 发送消息时，我不断收到响应“MismatchSenderId”

> ID：11307689
> 
> 赞同：27
> 
> 时间：2012-07-03T09:04:44.397
> 
> 标签：google-cloud-messaging

我正在使用 GCM 实现推送通知服务器。我使用从 Google API 控制台获得的发件人 ID（应用程序密钥）和从 GCM 服务获得的注册 ID 发送发布请求。

发布的 JSON 包含一个注册 ID。我总是得到相同的回应：

```
{
  "multicast_id":8546528660791862014,
  "success":0,
  "failure":1,
  "canonical_ids":0,
  "results":[
    {
      "error":"MismatchSenderId"
    }
  ]
} 
```

可能是什么问题？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-07T13:13:36.390

**请从设备上卸载您的 Android 应用程序并再次运行该应用程序**。

现在您将获得一个新的注册 ID。这可能会在特定情况下解决您的 MismatchSenderId 问题（如果您更改/刷新[API](http://en.wikipedia.org/wiki/Application%5fprogramming%5finterface)密钥，但仍使用旧的注册密钥，有时会发生这种情况）。就我而言，我首先获得了设备的注册 ID，然后我更改了我的 API 密钥（在 Google GCM 服务器上），然后我得到了 MismatchSenderId 错误。最后，我从设备上卸载了我的 Android 应用程序，问题得到了解决。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-07-03T17:50:04.680

请参阅 Stack Overflow 帖子*[为什么我会从 GCM 服务器端获得“MismatchSenderId”？](https://stackoverflow.com/questions/11313342)*.

从上面的网址：

> 仔细检查发件人 ID 和 API_KEY，它们必须匹配，否则您将收到 MismatchSenderId 错误。在 Google API Console 中，查看你的项目的 URL：
> 
> `https://code.google.com/apis/console/#project:xxxxxxxxxxx`
> 
> xxxxxxxxx 是项目 ID，即发件人 ID。

有些人使用“服务器应用程序密钥”类型的密钥报告问题，但使用浏览器密钥类型成功。就我个人而言，服务器密钥类型适用于我，但请尝试两者，YMMV。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-12-25T15:02:01.627

登录[谷歌云控制台](https://cloud.google.com/console)

请参见附图中的示例：

![在此处输入图像描述](../Images/a596065c8f2570d79a5899c6aceb3ac9.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-10-28T00:00:44.083

您应该使用“项目编号”（即数字 ID）作为发件人 ID，而不是“项目 ID”

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-01-21T16:40:08.560

肯定会出现此错误，因为您在注册设备时指定了错误的 SenderID：

这是注册请求的示例（提琴手）

> POST [https://android.clients.google.com/c2dm/register3](https://android.clients.google.com/c2dm/register3) HTTP/1.1 主机：android.clients.google.com 连接：keep-alive 内容长度：83 授权：AidLogin 51734556544354357:9087138434543543508 内容类型：application/ x-www-form-urlencoded 用户代理：Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.99 Safari/537.36 Accept-Encoding: gzip, deflate Accept-Language: en -US,en;q=0.8,ar;q=0.6,fr;q=0.4
> 
> app=gpYOURAppHereloin&device=5112132132137117&sender= **YourApplicationIDHere**

您可以通过以下步骤找到您的 SenderID

1.  打开谷歌开发者控制台。
2.  出现一个页面，显示您的项目 ID 和项目编号。例如，项目编号：67023432432。复制您的项目编号并将其用作 GCM 发件人 ID。

更多信息：

*   入门：http: [//developer.android.com/google/gcm/gs.html](http://developer.android.com/google/gcm/gs.html)
*   发件人不匹配错误：http: [//developer.android.com/google/gcm/http.html#Mismatched_Sender](http://developer.android.com/google/gcm/http.html#Mismatched_Sender)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-01-24T06:20:59.970

我正在从[教程](http://hmkcode.com/android-google-cloud-messaging-tutorial/)中复制代码，但忘记更改源代码中的项目编号。它正在为教程作者的项目而不是我的项目生成 ID，因此请检查您是否更改了 Android 应用程序上的源代码！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-03T09:51:34.343

从 API 控制台生成 API 密钥。在后端使用浏览器应用程序密钥，并在您的客户端代码中使用项目 ID 作为发件人 ID。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-10-02T20:54:55.237

我有同样的问题，但我做了一件愚蠢的蠢事：我在谷歌控制台中有多个项目，我为属于一个项目的项目号生成了注册 ID，我试图向属于另一个项目的 Api 密钥发送通知项目。出现此错误的第一步是检查您工作的项目。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-12-15T18:52:44.470

请注意，如果您的发件人 ID 更改，Google Play 服务的`com.google.android.gms.gcm.GoogleCloudMessaging.register()`方法将继续返回原始注册 ID，而不管新的发件人 ID 是什么。您需要为 Google Play 服务调用同一个类的 unregister() 方法来刷新和清除以前过时的缓存值。

在此处查看 API 信息：[com.google.android.gms.gcm.GoogleCloudMessaging.register()](http://developer.android.com/reference/com/google/android/gms/gcm/GoogleCloudMessaging.html#register(java.lang.String...))

作为替代方案，您始终可以删除应用程序的数据或卸载重新安装，如先前的答案中所述，但这在生产环境中远不能接受。

如果您更改了 GCM 设置和发件人 ID，应用程序必须知道它们需要取消注册并重新注册到 GCM。实现此目的的一个简单方法是将新版本推送到 Play 商店，让用户下载更新并让此版本在第一次执行时完成工作，尽管这不会计算由于某种原因未更新的应用程序。

最重要的是，如果您将注册 ID 存储在首选项或数据库中，请不要忘记在应用程序更新时刷新其值，因为更新可能意味着重新生成 ID，并且可能是您的代码而不是 GCM 是一个错误地缓存以前的ID。在此处遵循一般指南： [一般客户端实施指南](https://developer.android.com/google/gcm/client.html)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-01-03T17:46:37.383

当我测试在这里找到的 Google 示例代码时遇到了类似的问题 [https://github.com/GoogleCloudPlatform/gradle-appengine-templates/tree/master/GcmEndpoints](https://github.com/GoogleCloudPlatform/gradle-appengine-templates/tree/master/GcmEndpoints)和 XYZ 所说的确实帮助我解决了这个问题。

我能够在 messing.messagingEndpoint.sendMessage 方法下从我的谷歌应用引擎 API Explorer 将消息发送到我的手机，但是在谷歌应用引擎控制台日志中，它总是显示 MismatchSenderId。显然不应该有错误时记录的错误困扰着我。

![不匹配发件人 ID](../Images/e56c20f4f6f25b0407d30567011eb3f0.png)

我真的很困惑，这是我设法解决这个问题的方法：

1.  从您的手机中卸载您的安卓应用程序。
2.  重新安装您的 android 应用程序并记下 reg ID。
3.  进入服务 > 注册 API v1 > registration.listDevices 下的 API 资源管理器并列出 GCM 的所有 RegID。
4.  将此列表复制到某处 - 到记事本。
5.  转到服务 > 注册 API v1 > registration.unregister 下的 API 资源管理器，并取消注册与您的应用程序使用的不匹配的所有 regID。

重试发送消息，这一次它应该可以正常工作，而不会在谷歌应用引擎控制台日志中记录错误。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-10-16T16:18:06.750

您需要检查您的注册 ID 的来源，您不能在 GCM 消息帖子中使用 C2DM 注册 ID。来自谷歌的文档：

> C2DM 和 GCM 不可互操作。例如，您不能将通知从 GCM 发布到 C2DM 注册 ID，也不能将 C2DM 注册 ID 用作 GCM 注册 ID。在您的服务器端应用程序中，您必须跟踪注册 ID 是来自 C2DM 还是 GCM 并使用正确的端点。
> 
> 当您从 C2DM 过渡到 GCM 时，您的服务器需要知道给定的注册 ID 是否包含旧的 C2DM 发件人或新的 GCM 项目编号。这是我们推荐的方法：让新的应用程序版本（使用 GCM 的应用程序版本）连同注册 ID 一起发送。这个位告诉你的服务器这个注册 ID 是为 GCM 准备的。如果您没有获得额外的位，则将注册 ID 标记为 C2DM。一旦不再有有效的注册 ID 被标记为 C2DM，您就可以完成迁移。

另外需要注意的是SENDER_ID，如果使用InstanceID获取RegistrationID，SENDER_ID的格式是数字，比如

```
 InstanceID instanceID = InstanceID.getInstance(this);
    String token = instanceID.getToken(SENDER_ID, GoogleCloudMessaging.INSTANCE_ID_SCOPE, null); 
```

SENDER_ID 无法使用项目名称，请使用[https://developers.google.com/mobile/add](https://developers.google.com/mobile/add)获取“Server API Key”和“Sender ID”。

# c++ - 编译 DLL 时出错 - 错误 LNK2005

> ID：11307693
> 
> 赞同：2
> 
> 时间：2012-07-03T09:04:49.133
> 
> 标签：c++, visual-studio-2010, dll, linker, lnk2005

我想编译一个 DLL，当我包含以下内容时出现此错误`<afxdb.h>`：

```
error LNK2005: DllMain already defined in xlFunctions.obj
error LNK1169: one or more multiply defined symbols found 
```

我确实有一个`DllMain`函数，`xlfunctions.cpp`这是我的 DLL 的入口点。

`Use of MFC property`设置为`Use MFC in a Shared DLL`

我该如何解决这个错误？

谢谢

# build - PostBuild 事件不在 AppHarbor 上运行？

> ID：11307694
> 
> 赞同：1
> 
> 时间：2012-07-03T09:04:50.673
> 
> 标签：build, appharbor

我有一个在本地执行得很好的构建后事件，但在 AppHarbor 上却没有：

> ```
>  <PostBuildEvent>
>   if not exist "$(TargetDir)NativeBinaries" md "$(TargetDir)NativeBinaries" 
>   xcopy /s /y /i "$(SolutionDir)packages\LibGit2Sharp.0.8\NativeBinaries\x86\*.*" "$(TargetDir)NativeBinaries\x86" 
>   xcopy /s /y /i"$(SolutionDir)packages\LibGit2Sharp.0.8\NativeBinaries\amd64\*.*" "$(TargetDir)NativeBinaries\amd64"
>   </PostBuildEvent> 
> ```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:35:09.937

Postbuild 事件作为 AppHarbor 构建过程的一部分执行。有关构建失败原因的详细信息，请参阅[相关的 AppHarbor 支持讨论](http://support.appharbor.com/discussions/problems/1110-build-failed-but-no-errors-in-the-detailed-log)。

# wpf - 您可以在 xaml 声明中将非字符串标记值放置到组合框中吗？

> ID：11307695
> 
> 赞同：3
> 
> 时间：2012-07-03T09:04:53.923
> 
> 标签：wpf, xaml, combobox

我想知道是否有办法将组合框的标记值设置为非字符串数据类型。原因是我想将字节值作为标记值放置到控件中，我知道我可以以编程方式执行此操作，但我试图确认这是否可以使用声明性语句来完成。

```
<ComboBox Height="23" HorizontalAlignment="Left" Margin="90,37,0,0" Name="cmbReceiverBytes" VerticalAlignment="Top" Width="120">
    <ComboBoxItem Content="0xFF DefaultValue" Tag="255" />
    ....
</ComboBox> 
```

我正在尝试各种组合，其中之一是进行解析，但它不起作用。我想与其他人确认这是否可能。

```
<ComboBoxItem Content="0xFF DefaultValue" Tag="{Integer.ParseInt(255)}" /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T09:15:21.160

要为属性分配`Tag`字节值，您需要使用以下 XAML 语法：

```
<ComboBoxItem Content="0xFF DefaultValue">
  <ComboBoxItem.Tag>
    <System:Byte>255</System:Byte>
  </ComboBoxItem.Tag>
</ComboBoxItem> 
```

您必须添加命名空间声明`xmlns:System="clr-namespace:System;assembly=mscorlib"`来声明`System`命名空间。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-03T09:09:34.810

您始终可以使用元素语法：

```
xmlns:sys="clr-namespace:System;assembly=mscorlib" 
```

```
<ComboBoxItem.Tag>
    <sys:Int32>255</sys:Int32/>
</ComboBoxItem.Tag> 
```

您还可以创建自己的[标记扩展](http://msdn.microsoft.com/en-us/library/ee855815.aspx)，允许您将字符串解析为 int。只需让它有一个接受 int 的构造函数，然后字符串将被立即解析，将其保存在字段中并以`ProvideValue`.

# xmpp - 多个用户使用单个 XMPP 连接登录（使用连接到 gtalk 的 gloox）

> ID：11307702
> 
> 赞同：0
> 
> 时间：2012-07-03T09:05:20.253
> 
> 标签：xmpp, apple-push-notifications, google-talk, gloox

是否有可能多个用户使用单个 XMPP 连接登录？目的是能够在服务器上托管 gloox 以推送通知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T13:21:18.717

简短的回答：不，这在标准 XMPP 中是不可能的。

您可能想要使用 xmpp-to-xmpp 网关，例如[Spectrum](http://spectrum.im/)。

# cakephp - 在 cakephp 中使用 ajax 的最佳方式？

> ID：11307719
> 
> 赞同：1
> 
> 时间：2012-07-03T09:06:34.723
> 
> 标签：cakephp

我通过使用 JS helper 在我的 cakephp 应用程序中使用 ajax。所以我不需要编写 jquery 代码。Js helper 自动将代码添加到我的文件中。以下是 JS helper 编写代码的行。

```
echo $this->Js->writeBuffer(array('cache'=>true)); 
```

当我设置缓存属性的真实值时，每次在 js 文件夹中创建一个新的 js 文件并以以下方式在我的代码中添加一个新脚本。

```
<script type="text/javascript" src="filename.js"></script> 
```

但是当我将缓存值更改为 false 时，所有 js 代码都逐行添加到我的文件中。

现在我的问题是，哪种方式是最好的方式，页面执行速度快。我的第二个问题是，当我设置缓存的真实值时，js文件只添加一次，现在js助手一次又一次地添加js文件，当页面重新加载或刷新时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T04:24:34.310

郑重声明，这个问题的措辞本可以更好。

第一个问题，执行速度：为每一位 JS 保存一个新文件可能不是要走的路。希望下面的代码可以解释更好的方法并使您的第二个问题没有实际意义。

```
// In /app/View/Layouts/default.ctp
...
<head>
 ...
  <?php echo $this->fetch('script'); ?>
 ...
</head>
<body>
 ...
  <?php echo $this->Js->writeBuffer(); 
 ...
</body> 
```

一旦到位，您可以将脚本文件添加到您的视图或布局中

`<?php echo $this->Html->script('scriptname', array('inline'=>false)); ?>`

（注意没有 .js 扩展名）

或者添加自定义Js：

```
<?php
    $customJs = "alert('Hi!');";
    echo $this->Html->scriptBlock($customJs, array('inline'=>false));
?> 
```

希望有帮助。

# iphone - UiDocumentInteraction 返回 iPad 中图像的通用图标

> ID：11307720
> 
> 赞同：1
> 
> 时间：2012-07-03T09:06:36.850
> 
> 标签：iphone, ios, ipad, uidocumentinteraction

我需要制作一个简单的文件查看器，此方法返回文件的图标图像。

```
+ (UIImage *)imageForFile:(NSString *)filePath
{
    NSURL *url = [NSURL fileURLWithPath:filePath];
    UIDocumentInteractionController *c = [UIDocumentInteractionController interactionControllerWithURL:url];
    UIImage *thumbnail = nil;

    NSArray *icons = c.icons;
    if([icons count] > 0)
    {
        thumbnail = [icons objectAtIndex:0];
    }
    return thumbnail;
} 
```

在 iPod 上的图标是正确的，但在 iPad 1G 上它返回图像的通用文件图标 (jpg/png/gif)。两者都有 iOS 5.0。如何获得正确的图像图标？

谢谢！

# magento - Magento 将自定义顶部导航栏恢复为默认顶部导航

> ID：11307721
> 
> 赞同：-1
> 
> 时间：2012-07-03T09:06:39.443
> 
> 标签：magento, navigation

我正在使用具有以下功能的主题，`custom menu`您可以从一个高级主题中检查此菜单功能[http://www.emthemes.com/demo/#magento-theme-sunglasses-store-em0022](http://www.emthemes.com/demo/#magento-theme-sunglasses-store-em0022) 没有 top.phtml 文件在我的主题中，它通过 cms 块中的小部件调用所有菜单。此自定义菜单小部件与 1.7 不兼容，因此在我的商店中无法正常运行。

到目前为止，我编辑了我的 header.phtml 文件，来自

```
<div class="nav-content"><div class="nav-container">
<?php if ($this->getIsHomePage()):?>
    <h1 class="logo"><strong><?php echo $this->getLogoAlt() ?></strong><a href="<?php echo $this->getUrl('') ?>" title="<?php echo $this->getLogoAlt() ?>" class="logo"><img src="<?php echo $this->getLogoSrc() ?>" alt="<?php echo $this->getLogoAlt() ?>" /></a></h1>
    <?php else:?>
    <a href="<?php echo $this->getUrl('') ?>" title="<?php echo $this->getLogoAlt() ?>" class="logo"><strong><?php echo $this->getLogoAlt() ?></strong><img src="<?php echo $this->getLogoSrc() ?>" alt="<?php echo $this->getLogoAlt() ?>" /></a>
    <?php endif?>
<?php echo $this->getChildHtml('cms_mainmenu') ?></div></div> 
```

至

```
<div class="nav-content"><div class="nav-container">
<?php if ($this->getIsHomePage()):?>
    <h1 class="logo"><strong><?php echo $this->getLogoAlt() ?></strong><a href="<?php echo $this->getUrl('') ?>" title="<?php echo $this->getLogoAlt() ?>" class="logo"><img src="<?php echo $this->getLogoSrc() ?>" alt="<?php echo $this->getLogoAlt() ?>" /></a></h1>
    <?php else:?>
    <a href="<?php echo $this->getUrl('') ?>" title="<?php echo $this->getLogoAlt() ?>" class="logo"><strong><?php echo $this->getLogoAlt() ?></strong><img src="<?php echo $this->getLogoSrc() ?>" alt="<?php echo $this->getLogoAlt() ?>" /></a>
    <?php endif?>
<?php echo $_menu; ?></div></div> 
```

但它仍然无法正常工作。所以我去了我的主题`cms.xml`

```
<reference name="header">
        <block type="cms/block" name="cms_mainmenu">                
            <action method="setBlockId"><block_id>mainmenu</block_id></action>
        </block> 
```

我认为问题出在这段代码上。antone 知道如何覆盖它以在 fronend 中显示 mt 商店类别吗？请给我你的建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:29:29.520

回声$菜单；

当然应该是$this->menu？或者在自定义块中构建菜单的任何内容，除非您在模板中构建菜单

# javascript - 提交表单后如何处理休息请求

> ID：11307723
> 
> 赞同：0
> 
> 时间：2012-07-03T09:06:39.793
> 
> 标签：javascript, html, jsp, rest

尝试执行以下操作，为测试创建了这个简单的表单：

```
<form name="input" action"submit.jsp" method="get">
Change background-color:&nbsp;#<input type="text">&nbsp;<input type="submit"value="submit">

</form> 
```

我正在尝试单击按钮以从文本框中获取值并将其插入链接（这将是一个休息请求）并对其进行操作。

我当然需要确保没有人可以看到用户名和密码我也会传递请求，有人可以指出我从哪里开始的正确方向吗？

我在想也许可以使用

```
document.getElementById("id") 
```

并将输入为：

```
<input name="bgcolor" id="bgcolor"> 
```

我只是不确定如何执行和隐藏带有密码的休息请求。

要得到

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:36:28.987

可以使用以下方法完成：

[http://www.tizag.com/javascriptT/javascript-getelementbyid.php](http://www.tizag.com/javascriptT/javascript-getelementbyid.php)

# ocmock - OCMock只有效一次，奇怪，为什么呢？还是我这边有什么问题？

> ID：11307724
> 
> 赞同：3
> 
> 时间：2012-07-03T09:06:48.233
> 
> 标签：ocmock

我想为 TnSettings 做模拟，是的，如果通过以下方法编写代码，它可以工作，问题是我们需要为每个案例编写模拟代码，如果我们只模拟一次然后执行多个案例，那么第二个将报告异常。我使用最新的 OCMock V2.01。

我的问题是，为什么 OCMock 有这样的限制？还是我没有正确使用它？

任何想法或讨论将不胜感激，在此先感谢。

```
- (void) testFormattedDistanceValueWithMeters {         
        mockSettings = [OCMockObject mockForClass:[TnSettings class]];
        mockClientModel = [TnClientModel createMockClientModel];
        [[[mockClientModel expect] andReturn:mockSettings] settings];
        [[[mockSettings expect] andReturn:[NSNumber numberWithInt:0]] preferencesGeneralUnits];

        NSNumber *meters = [NSNumber numberWithDouble:0.9];
        distance = [NSString formattedDistanceValueWithMeters:meters];
        STAssertEqualObjects(distance, @"0.9", @"testformattedEndTimeForTimeInSeconds failed");

        //------------- Another case -----------------
        mockSettings = [OCMockObject mockForClass:[TnSettings class]];
        mockClientModel = [TnClientModel createMockClientModel];
        [[[mockClientModel expect] andReturn:mockSettings] settings];
        [[[mockSettings expect] andReturn:[NSNumber numberWithInt:0]] preferencesGeneralUnits];

        meters = [NSNumber numberWithDouble:100.9];
        distance = [NSString formattedDistanceValueWithMeters:meters];
        STAssertEqualObjects(distance, @"101", @"testformattedEndTimeForTimeInSeconds failed");
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T15:40:58.290

不确定我是否完全理解您的问题或您的代码。不过，我怀疑您偶然发现了*expect*和*stub*之间的区别。

这是你的想法吗？

```
- (void) testFormattedDistanceValueWithMeters {         
    mockSettings = [OCMockObject mockForClass:[TnSettings class]];
    mockClientModel = [TnClientModel createMockClientModel];
    [[[mockClientModel stub] andReturn:mockSettings] settings];
    [[[mockSettings stub] andReturn:[NSNumber numberWithInt:0]] preferencesGeneralUnits];

    NSNumber *meters = [NSNumber numberWithDouble:0.9];
    distance = [NSString formattedDistanceValueWithMeters:meters];
    STAssertEqualObjects(distance, @"0.9", @"testformattedEndTimeForTimeInSeconds failed");

    meters = [NSNumber numberWithDouble:100.9];
    distance = [NSString formattedDistanceValueWithMeters:meters];
    STAssertEqualObjects(distance, @"101", @"testformattedEndTimeForTimeInSeconds failed"); 
```

}

# objective-c - 测试设备时出现 Apple Mach-O 链接器错误

> ID：11307726
> 
> 赞同：-1
> 
> 时间：2012-07-03T09:07:01.423
> 
> 标签：objective-c, xcode4.3, ios5

当我在 iPad 上进行测试时，我收到此错误 Apple Mach-O Linker 错误。虽然它在模拟器上运行良好。我检查了所有框架，但错误仍然存​​在。

这是错误的内容：

```
 ld: library not found for -lz 
   clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我不明白出了什么问题。请有什么想法..？

提前感谢您的时间谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:15:01.360

如果没有更多信息，我会说您只为模拟器而不是设备编译了 som 库。

# jquery - 在 jquery mobile 的后按上没有得到正确的结果

> ID：11307727
> 
> 赞同：1
> 
> 时间：2012-07-03T09:07:02.157
> 
> 标签：jquery, html, jquery-ui, jquery-mobile, cordova

嗨，我有 3 个 html 文件作为

索引.html

```
<!DOCTYPE html>

<html>

<head>

    <link rel="stylesheet" href="jquery.mobile/jquery.mobile-1.1.0.css" />
    <link rel="stylesheet" href="docs/assets/css/jqm-docs.css" />
    <link rel="stylesheet" href="docsdemos-style-override.css" />

    <script type="text/javascript" charset="utf-8" src="cordova-1.9.0.js"></script>
    <script type="text/javascript" src="jquery.mobile/jquery-1.7.2.min"></script>
    <script type="text/javascript" charset="utf-8" src="js/main.js"></script>
    <script type="text/javascript" src="jquery.mobile/jquery.mobile-1.1.0.js"></script>

</head>

<body>

<div data-role="page" id="home">
    <div data-role="content">

        <a href="TestMenu.html" data-role="button" id="myButton">index</a>          

    </div>
</div>

</body>
</html> 
```

现在单击按钮，我调用 TestMenu.html，如下所示：

```
<!DOCTYPE html>

<html>

<body>

<div data-role="page" id="home">
    <div data-role="content">

        <a href="PortfolioTest.html" data-role="button" id="myButton">TestMenu</a>         

    </div>
</div>

</body>
</html> 
```

单击按钮后，我调用 PortfolioTest.html，如下所示：

```
<!DOCTYPE html>

<html>

<body>

<div data-role="page" id="home">
    <div data-role="content">

        <a href="#" data-role="button" id="myButton">PortfolioTest</a>         

    </div>
</div>

</body>
</html> 
```

现在，当我回按时，上一个屏幕意味着当我在 TestMenu.html 中再次按下按钮时会显示 TestMenu.html，它会再次出现 PortfolioTest.html，直到现在一切都很好但是现在如果我按回而不是去 TestMenu.html 它直接进入 index.html 页面。

这就是我使用 Android 2.2 版时的全部内容，如果我使用 2.1 版，那么一切都很好。解决方案是什么？任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:34:02.273

我不知道这是否会扰乱您的导航，但您对每个页面都使用相同的页面 ID (id="home")。也许你应该给页面不同的ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T05:47:57.983

`$.mobile.pushStateEnabled = false;`解决我的问题。现在它在所有版本中都能完美运行。

# php - 如何在 PHP 中使用“Server.Transfer”？

> ID：11307730
> 
> 赞同：0
> 
> 时间：2012-07-03T09:07:12.547
> 
> 标签：php, asp-classic

我们今天正在使用 ASP 经典，我们正在转向 PHP。有人知道我们如何在 PHP 中执行“Server.Transfer”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:12:12.083

它在 php 中的等价物是`require()`.

这是其文档的链接：

[http://php.net/manual/en/function.require.php](http://php.net/manual/en/function.require.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-27T05:15:42.460

使用 require 将类似于 server.transfer 但在某些情况下它的行为会略有不同。例如，当输出已经发送到浏览器并使用 require 时，将显示已经发送到浏览器的输出以及您需要的路径。

模仿 C#/ASP.NET Server.Transfer() 的最佳方法是正确设置 PHP 输出缓冲，然后使用我编写的以下函数。

```
function serverTransfer($path) { 
    if (ob_get_length() > 0) { 
        ob_end_clean(); 
    }
    require_once($path); 
    exit; 
} 
```

设置输出缓冲就像使用 ob_start() 作为 PHP 应用程序调用的第一行一样简单。更多信息可以在这里找到：http: [//php.net/manual/en/function.ob-start.php](http://php.net/manual/en/function.ob-start.php)

ASP.NET 默认启用输出缓冲，这就是为什么在使用 Server.Transfer() 时不必这样做的原因；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-28T05:33:42.180

如果你想改变页面的标题移动到另一个页面，你可以在 php.ini 中使用 header() 函数。像下面这样。

```
<?php

    header("location:index.php?q='aAseWgjTJa132'");

?> 
```

# ruby-on-rails - 获取 OCIError：ORA-00932：Rails 3 中的数据类型不一致

> ID：11307732
> 
> 赞同：2
> 
> 时间：2012-07-03T09:07:13.413
> 
> 标签：ruby-on-rails, ruby, oracle, activerecord, georuby

这是场景。
我正在为 Ruby On Rails 编写我的 geo-ruby oracle 适配器，它支持开箱即用的 SDO_GEOMETRY。
进展顺利。我编写了从 Oracle DB 中成功选择 SDO_GEOMETRY 对象的代码。
当我想编写插入和更新部件时，一切都毁了。
以下是我的想法。我希望能够做到这一点：

```
g = GeoShape.new(name:"point1", shape: Point.from_x_y(-34,-43,4326))
g.save 
```

我从上述语句中生成了以下 sql 查询：

```
INSERT INTO "GEO_SHAPES" ("CREATED_AT", "ID", "NAME", "SHAPE", "UPDATED_AT") VALUES (:a1, :a2, :a3, :a4, :a5)  [["created_at", Tue, 03 Jul 2012 08:42:01 UTC +00:00], ["id", 10112], ["name", "point1"], ["shape", "SDO_GEOMETRY(2001,  NULL, NULL, SDO_ELEM_INFO_ARRAY(1,1,1), SDO_ORDINATE_ARRAY(-34,-43))"], ["updated_at", Tue, 03 Jul 2012 08:42:01 UTC +00:00]] 
```

但上述查询的执行给了我这个错误：

```
ActiveRecord::StatementInvalid: OCIError: ORA-00932: inconsistent datatypes: expected MDSYS.SDO_GEOMETRY got CHAR 
```

我进入 oracle_enhanced_adapter 来追踪问题。我尝试对其进行修补并手动初始化 binds[3][1] （这是我的数据库中 sdo_geometry 列的值），如下所示：

```
 def exec_insert(sql, name, binds)
    log(sql, name, binds) do
      returning_id_index = nil
      cursor = if @statements.key?(sql)
        @statements[sql]
      else
        @statements[sql] = @connection.prepare(sql)
      end

    binds[3][1] = "SDO_GEOMETRY(2001,  NULL, NULL, SDO_ELEM_INFO_ARRAY(1,1,1), SDO_ORDINATE_ARRAY(-34,-43))" ### DAVE

      binds.each_with_index do |bind, i|
        col, val = bind
        if col == :returning_id
          returning_id_index = i + 1
          cursor.bind_returning_param(returning_id_index, Integer)
        else
          if val == "SDO_GEOMETRY(2001,  NULL, NULL, SDO_ELEM_INFO_ARRAY(1,1,1), SDO_ORDINATE_ARRAY(-34,-43))" ### DAVE
            cursor.bind_param(i + 1, val, OCI8::Object::Mdsys::SdoGeometry) ###DAVE
          else ### DAVE
            cursor.bind_param(i + 1, type_cast(val, col), col && col.type)
          end
        end
      end

      cursor.exec_update 
```

不幸的是，它没有帮助。我仍然得到同样的错误 ORA-00932。有任何想法吗？解决这个问题对我来说非常重要。

PS：###DAVE 部分是我的 oracle_enhanced_adapter.rb 猴子补丁
PS：这是我的配置。

*   甲骨文 11.2

*   Ruby 版本 1.9.3 (i386-darwin11.3.0)
*   导轨版本 3.2.5
*   活动记录版本 3.2.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T06:45:28.273

最后，我设法解决了这个问题。
增强型适配器使用 bind_param 方法将变量绑定到相应的 oracle 类型。这是问题和错误。
我不得不覆盖 oracle_enhanced_adpter.rb 中的一些代码。
我在这个文件中添加了一个方法来手动构建一个 SDO_GEOMETRY 对象。
然后我将此返回的对象绑定到 OCI8::Object::Mdsys::SdoGeometry 类型。

我的方法包含这些代码（现在，仅用于创建 SDO_GEOMETRY 点）：

```
#I needed a connection to my oracle database. Connection placeholder is conn.
def create_sdo_geometry_object(conn, gtype, srid, point, x, y)
    local_cursor = conn.parse("BEGIN :geom := SDO_GEOMETRY(:sdo_gtype, :sdo_srid, :sdo_point, :sdo_elem_info_array, :sdo_ordinate_array); END;")
    local_cursor.bind_param(:sdo_gtype, OraNumber)
    local_cursor.bind_param(:sdo_srid, OraNumber) 
    local_cursor.bind_param(:sdo_point, OCI8::Object::Mdsys::SdoPointType) 
    local_cursor.bind_param(:sdo_elem_info_array, OCI8::Object::Mdsys::SdoElemInfoArray)
    local_cursor.bind_param(:sdo_ordinate_array, OCI8::Object::Mdsys::SdoOrdinateArray)

    local_cursor.bind_param(:geom, OCI8::Object::Mdsys::SdoGeometry)

    sdo_gtype = OraNumber.new(gtype)
    sdo_srid = OraNumber.new(srid)
    sdo_point = nil #Temporarily I set it to nil

    #sdo_elem_info_array must be [1,1,1] for creating points.
    sdo_elem_info_array = OCI8::Object::Mdsys::SdoElemInfoArray.new(conn,OraNumber.new(1),OraNumber.new(1),OraNumber.new(1))
    #I want to create a point with x and y coordinates
    sdo_ordinate_array = OCI8::Object::Mdsys::SdoOrdinateArray.new(conn,OraNumber.new(x),OraNumber.new(y))

    local_cursor[:sdo_gtype] = sdo_gtype
    local_cursor[:sdo_srid] = sdo_srid
    local_cursor[:sdo_point] = sdo_point
    local_cursor[:sdo_elem_info_array] = sdo_elem_info_array
    local_cursor[:sdo_ordinate_array] = sdo_ordinate_array
    local_cursor.exec

    local_cursor[:geom]
end 
```

然后，当我想绑定此参数时，我使用了以下代码：

```
cursor.bind_param(i + 1, create_sdo_geometry_object("PARAMS HERE"), OCI8::Object::Mdsys::SdoGeometry) 
```

它就像一个魅力！

# xcode - XCode 热键跳转到顶部和返回

> ID：11307735
> 
> 赞同：10
> 
> 时间：2012-07-03T09:07:17.713
> 
> 标签：xcode, keyboard-shortcuts

跳到顶部是一件简单的事情，就是`CMD`+ `UP`。但问题是，XCode 是否有一个热键可以跳回上一个区域，在`CMD`+之后`UP`？（在同一个文件中）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T09:10:34.737

`CTRL` + `CMD` + `LEFT` is the keyboard shortcut for Go Back. `CTRL` + `CMD` + `RIGHT` is for Go Forward.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-24T19:00:20.637

在按下 CMD + UP 之前记住当前的行号，然后使用 CMD + L 你可以回到旧的行号。

# ruby - 为什么在 Ruby 中将散列推入数组必须使用括号？

> ID：11307736
> 
> 赞同：3
> 
> 时间：2012-07-03T09:07:27.380
> 
> 标签：ruby, arrays, hash

我想使用 Ruby 1.8.7 版将哈希添加到数组中：

```
items = Array.new
items.push {:a => "b", :c => "d"} 
```

上面的语句将返回如下错误：

```
SyntaxError: compile error
(irb):35: syntax error, unexpected tASSOC, expecting '}'
items.push {:a => "b", :c => "d"}
                 ^
(irb):35: syntax error, unexpected ',', expecting '}'
items.push {:a => "b", :b => "c"}
                      ^ 
```

好吧，我发现解决方案是将 push 参数包含在括号中`( )`，或者我可以使用`<<`运算符。我也知道`push`接受一个或多个参数并且`<<`只接受[这个答案](https://stackoverflow.com/a/10569543/155640)中的一个参数，但困扰我的是***为什么我需要使用括号，而我们都知道 Ruby 中的括号是可选的？***

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-03T09:20:34.177

我的猜测是，这是因为 ruby​​ 试图将散列解析为一个块，期望代码而不是散列键和值。这类似于：

```
items.push() do
  :a => "b", :b => "c"
end 
```

这是无效的语法。

# xcode - iTunes Connect：为什么我的分发配置文件不是“由 Xcode 管理”？

> ID：11307741
> 
> 赞同：0
> 
> 时间：2012-07-03T09:07:39.020
> 
> 标签：xcode, certificate, code-signing

我被这个该死的“应用程序失败的代码验证”警告卡住了，我根本无法解决......我即将将我的应用程序提交给 Apple。:(

查看我的配置文件让我意识到我的开发配置文件的状态是“活动的，由 Xcode 管理”，而我的分发配置文件只是“活动的”。这可能是这个问题的原因，因为其他任何事情似乎都可以。那么这里有什么问题呢？

非常感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T10:39:39.510

> 查看我的配置文件让我意识到我的开发配置文件的状态是“活动的，由 Xcode 管理”，而我的分发配置文件只是“活动的”。

团队开发配置文件包括团队中所有开发人员的证书和所有设备的设备 ID。由于只有一个人被授权为任何给定帐户分发应用程序，并且由于没有与分发条款相关联的设备 ID，因此无需让 Xcode 或配置门户管理您的分发条款——几乎没有管理。

> 这可能是这个问题的原因，因为其他任何事情似乎都可以。那么这里有什么问题呢？

不，您的开发和分发配置文件的描述不同不是问题。问题是该`codesign`实用程序由于某种原因无法签署您的应用程序。有几件事可能会阻止您的应用被签名，例如：

*   在项目的构建设置中选择了错误的分发配置文件。
*   分发配置文件中的应用 ID 与您尝试签名的应用的 ID 不匹配。
*   分发配置文件有问题，例如过期的证书。

这里还有[很多](https://stackoverflow.com/search?q=%5Bxcode%5D%20%5Bios%5D%20%22application%20failed%20codesign%22)关于签署您的应用程序以进行分发的问题。在这里重新讨论所有这些答案是没有意义的，尤其是没有关于您已经检查过的内容或至少看到特定错误的更多信息。先看看其中的一些问题，看看是否有什么响起。否则，请查看[工具工作流程指南](https://developer.apple.com/library/ios/documentation/Xcode/Conceptual/ios_development_workflow/00-About_the_iOS_Application_Development_Workflow/introduction.html#//apple_ref/doc/uid/TP40007959-CH1-SW1)的[故障排除部分](https://developer.apple.com/library/ios/documentation/Xcode/Conceptual/ios_development_workflow/40-iOS_Development_Troubleshooting_Guide/ios_development_troubleshooting.html#//apple_ref/doc/uid/TP40007959-CH25-SW1)。

# php - 没有“while”的查询函数循环

> ID：11307745
> 
> 赞同：1
> 
> 时间：2012-07-03T09:07:47.853
> 
> 标签：php, mysql, row

是否可以仅使用不同的最后一个函数显示具有我查询中的属性的所有行。与 fetch_object(); 不同的东西？

这是我的查询：

```
$dbo_training = $db->query("select * from tabela where id='$tr'")->fetch_object(); 
```

只显示一排...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:16:19.210

我不知道您使用的是什么 ORM，但是使用 PDO（PHP 标准数据库访问器）您必须调用`fetchAll()`才能做到这一点。如果您使用自己的库，您应该看看[PDO](http://www.php.net/manual/fr/pdostatement.fetchall.php)，它非常强大！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:16:23.783

我猜你正在使用[mysqli::fetch_object()](http://php.net/manual/en/mysqli-result.fetch-object.php)。如果是这样，您可能想看看[mysqli::fetch_all](http://php.net/manual/en/mysqli-result.fetch-all.php)，它»将所有结果行作为关联数组、数字数组或两者都获取«（但显然不是作为对象数组......）如果您需要对象，您'可能不得不坚持一个while循环。（而且 while 循环本身并没有什么坏处）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T09:11:39.073

不确定我是否完全理解您，但是如果您想要的是所有结果的数组，则该方法`fetch_object()`仅根据定义返回第一行。尝试使用`fetch_assoc()`来获取包含所有结果的数组。

# mp3 - WinRT 上的 MediaEngine 音频播放

> ID：11307746
> 
> 赞同：1
> 
> 时间：2012-07-03T09:07:53.717
> 
> 标签：mp3, windows-runtime, ogg

我正在尝试将音乐添加到在 WinRT 上运行的游戏中。音乐应该采用编码格式（mp3、ogg 等），并且应该是可流式传输的并且可以由硬件解码（出于性能原因）。

我浏览了这些示例，发现 MediaEngine 可以做这样的事情（我希望如此）。

但是，我在使它工作时遇到了问题。`IMFByteStream`每次尝试从`IRandomAccessStream`via创建时，我都会收到 ComExceptions `MFCreateMFByteStreamOnStreamEx()`。

可能是我没有正确处理任务，因为它们对我来说是一个新的范例。

这是一些代码（与我之前提到的示例非常相似）：

```
void MyMedia::PlayMusic ()
{
    try
    {
        StorageFolder^ installedLocation = Windows::ApplicationModel::Package::Current->InstalledLocation;

        Concurrency::task<StorageFile^> m_pickFileTask = Concurrency::task<StorageFile^>(installedLocation->GetFileAsync("music.mp3"), m_tcs.get_token());

        SetURL(StringHelper::toString("music.mp3"));

        auto player = this;
        m_pickFileTask.then([&player](StorageFile^ fileHandle)
        {
            Concurrency::task<IRandomAccessStream^> fOpenStreamTask = Concurrency::task<IRandomAccessStream^> (fileHandle->OpenAsync(Windows::Storage::FileAccessMode::Read));
            fOpenStreamTask.then([&player](IRandomAccessStream^ streamHandle)
                {
                    try
                    {
                        player->SetBytestream(streamHandle);

                        if (player->m_spMediaEngine)
                        {
                            MEDIA::ThrowIfFailed(
                                player->m_spMediaEngine->Play()
                                );

                        }
                    } catch(Platform::Exception^)
                    {
                        MEDIA::ThrowIfFailed(E_UNEXPECTED);
                    }

                }
            );  
        }
        );

    } catch(Platform::Exception^ ex)
    {
        Printf("error: %s", ex->Message);
    }

}

void MyMedia::SetBytestream(IRandomAccessStream^ streamHandle)
{
    HRESULT hr = S_OK;
    ComPtr<IMFByteStream> spMFByteStream = nullptr; 

    //The following line always throws a ComException
    MEDIA::ThrowIfFailed(
        MFCreateMFByteStreamOnStreamEx((IUnknown*)streamHandle, &spMFByteStream)
        );

    MEDIA::ThrowIfFailed(
        m_spEngineEx->SetSourceFromByteStream(spMFByteStream.Get(), m_bstrURL)
        );  

    return;
} 
```

**奖励**：如果您知道我的音频需求的更好解决方案，请发表评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T14:18:26.683

我设法解决了这个问题。我发现了两个问题。

*   媒体基础未初始化

`MFStartup(MF_VERSION);`需要在使用 Media Foundation 之前调用。我在创建媒体引擎之前添加了这段代码。

*   引用一个指针。

线`m_pickFileTask.then([&player](StorageFile^ fileHandle)`应该是`m_pickFileTask.then([player](StorageFile^ fileHandle)`。`This`已经是指向当前类的指针，并且`&`提供了变量的地址，所以我实际上是在传递指针的指针。

# c# - 使用 iTextSharp 创建多页 pdf

> ID：11307749
> 
> 赞同：3
> 
> 时间：2012-07-03T09:08:06.827
> 
> 标签：c#, pdf, itextsharp

我正在尝试使用 iTextSharp 创建具有多个页面的 pdf

```
Document document = new Document(PageSize.A4, 2, 2, 10, 10);
private PdfContentByte _pcb;

try
{
    PdfWriter writer = PdfWriter.GetInstance(document, output);
    document.Open();             
    document.NewPage();
    _pcb = writer.DirectContent;
    _pcb.BeginText();
    _pcb.ShowTextAligned(PdfContentByte.ALIGN_LEFT, text, x, y, 0);
    _pcb.EndText();
    writer.Flush();
}
catch(e)
{

}
finally
{
    document.Close();
} 
```

这对我来说很好。当我尝试在同一个文档上添加新页面时，它正在用新页面替换现有的书面文本，并且没有添加新页面。下面是不工作的代码。

```
_pcb.EndText();
writer.Flush();
document.NewPage();
_pcb = writer.DirectContent;
_pcb.BeginText();
_pcb.ShowTextAligned(PdfContentByte.ALIGN_LEFT, text, x, y, 0);
_pcb.EndText();
writer.Flush(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T18:01:51.790

以下是我清理和统一您的代码的尝试。通常避免尝试捕捉，直到你真的不得不这样做，你经常会错过一些非常重要的错误。（例如，您实际上并没有设置所需的字体和大小，但也许您只是省略了该代码。）此外，除非您正在编写非常大的 PDF，否则确实没有理由刷新缓冲区，请将其留给操作系统必要时为您做。

当我运行下面的代码时，我得到两个页面，两个页面上都有文本，它对你有用吗？（针对 iTextSharp 5.2.0.0）

```
 var output = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Desktop), "Output.pdf");
        var bf = BaseFont.CreateFont(BaseFont.HELVETICA, BaseFont.CP1250, BaseFont.NOT_EMBEDDED);
        using (FileStream fs = new FileStream(output, FileMode.Create, FileAccess.Write, FileShare.None)) {
            using (Document doc = new Document(PageSize.A4, 2, 2, 10, 10)) {
                PdfContentByte _pcb;
                using (PdfWriter writer = PdfWriter.GetInstance(doc, fs)) {
                    //Open document for writing
                    doc.Open();
                    //Insert page
                    doc.NewPage();
                    //Alias to DirectContent
                    _pcb = writer.DirectContent;
                    //Set the font and size
                    _pcb.SetFontAndSize(bf, 12);
                    //Show some text
                    _pcb.BeginText();
                    _pcb.ShowTextAligned(PdfContentByte.ALIGN_LEFT, "Page 1", 40, 600, 0);
                    _pcb.EndText();
                    //Insert a new page
                    doc.NewPage();
                    //Re-set font and size
                    _pcb.SetFontAndSize(bf, 12);
                    //Show more text on page 2
                    _pcb.BeginText();
                    _pcb.ShowTextAligned(PdfContentByte.ALIGN_LEFT, "Page 2", 100, 400, 0);
                    _pcb.EndText();
                    doc.Close();
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T09:23:34.137

你为什么使用`DirectContent`? 如果您只想从头开始创建 PDF，只需将内容添加到`Document`.

```
try
{
    iTextSharp.text.Document doc = new iTextSharp.text.Document();
    PdfWriter.GetInstance(doc, new FileStream("HelloWorld.pdf", FileMode.Create));
    doc.Open();
    doc.Add(new Paragraph("Hello World!"));
    doc.NewPage();
    doc.Add(new Paragraph("Hello World on a new page!"));
}
catch (Exception ex)
{

}
finally 
{
    doc.Close();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-12T09:37:28.547

下面的代码正在工作

```
string str = "Page1Page1Page1Page1Page1Page1Page1Page1Page1Page1";
string str2 = "Page2Page2Page2Page2Page2Page2Page2Page2Page2Page2";
Document pdfDoc = new Document(PageSize.A4, 10f, 10f, 10f, 0f);
PdfWriter.GetInstance(pdfDoc, Response.OutputStream);
pdfDoc.Open();
using (var htmlWorker = new HTMLWokExtend(pdfDoc))
{
    using (var sr = new StringReader(str))
    {
        htmlWorker.Parse(sr);
    }
}
pdfDoc.NewPage();
using (var htmlWorker = new HTMLWokExtend(pdfDoc))
{
    using (var sr = new StringReader(str2))
    {
      htmlWorker.Parse(sr);
    }
}
pdfDoc.Close();
Response.ContentType = "application/pdf";
Response.AddHeader("content-disposition", "attachment;" +
                               "filename=Proforma_Invoice.pdf");
Response.Cache.SetCacheability(HttpCacheability.NoCache);
Response.Write(pdfDoc);
Response.End(); 
```

您可以使用以下函数从 HTML 正文中填充字符串

```
private string populatebody()
{
    string body="";
    using (StreamReader reader = new StreamReader(Server.MapPath("~/Dir/Page.html")))
    {
        body = reader.ReadToEnd();
    }
    body = body.Replace("{Content in htmlpage}", "Your Content");
    return body
} 
```

然后将此主体返回到上层代码中的字符串。您可以根据您的要求使用此代码进行操作。

下面是 HTMLWokExtend 类：

```
public class HTMLWokExtend : HTMLWorker
{
    LineSeparator line = new LineSeparator(1f, 90f, BaseColor.GRAY, Element.ALIGN_CENTER, -12);
    public HTMLWokExtend(IDocListener document) : base(document)
    {

    }
    public override void StartElement(string tag, IDictionary<string, string> str)
    {
        if (tag.Equals("hrline"))
            document.Add(new Chunk(line));
        else
            base.StartElement(tag, str);
    }
} 
```

# java - 随机放置一个div

> ID：11307750
> 
> 赞同：2
> 
> 时间：2012-07-03T09:08:07.930
> 
> 标签：java, php, javascript, jquery, ajax

我正在寻找一种在页面上任意位置随机放置 div 的方法（每次加载一次）。

我目前正在编写一个基于 PHP 的幻想宠物模拟游戏。游戏中不常见的物品之一是“四叶草”。目前，用户通过随机分发获得“四叶草”——但我想改变它（它的交互性不够！）。

**我正在尝试做的事情：**

这个想法是让用户通过将这张图片随机放置在页面上的任何位置来搜索这些“四叶草”：（![这个图片](../Images/39c4c8e15edb0c9d65ae3c5557dea0f8.png)我对四叶草的演绎）

我想使用生成 div 的 Java/Ajax 脚本来执行此操作，然后将其放置在页面上的任何位置。并且一旦放置就不会移动它，直到重新加载页面。

我已经尝试了很多 Google 搜索，到目前为止我发现的最接近的是[this (click)](http://jsfiddle.net/redler/QcUPk/8/)，来自[this question](https://stackoverflow.com/questions/4796743/random-position-of-divs-in-javascript)。但是，删除 .fadein、.delay 和 .fadeout 会使脚本完全停止工作。我绝不是 Ajax 的专业人士。我想要做的甚至可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-03T09:14:06.440

在 javascript 中，您可以生成一个介于 0 和 1 之间的随机数`var randomNumber = Math.random();`

如果你给你的 div 绝对定位，你可以这样做

```
div.style.top = (100*Math.random()) + "%";
div.style.left = (100*Math.random()) + "%"; 
```

这会将其设置在随机位置。通过将左侧和顶部 CSS 属性设置为 0 到 100 之间的随机百分比。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T09:18:02.177

这仍然有效。只需使用 makeDiv() 创建一个新的。

```
function makeDiv(){

var divsize = ((Math.random()*100) + 50).toFixed();
var color = '#'+ Math.round(0xffffff * Math.random()).toString(16);
$newdiv = $('<div/>').css({
    'width':divsize+'px',
    'height':divsize+'px',
    'background-color': color
});

var posx = (Math.random() * ($(document).width() - divsize)).toFixed();
var posy = (Math.random() * ($(document).height() - divsize)).toFixed();

$newdiv.css({
    'position':'absolute',
    'left':posx+'px',
    'top':posy+'px',
    'display':'none'
}).appendTo( 'body' ).fadeIn(100);
};

makeDiv(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T09:16:41.203

如果第一个链接适合您，请不要删除淡入淡出它会显示元素。或者删除 'display':'none' 然后你可以删除你写的所有内容。

# c# - 如何在 Silverlight / Windows phone 7 中一般地重复列表框项的样式

> ID：11307752
> 
> 赞同：0
> 
> 时间：2012-07-03T09:08:09.027
> 
> 标签：c#, silverlight, windows-phone-7, xaml, listbox

我有一个列表框，我需要重复样式以使所有列表框项目都相同。只有占位符会改变。例如，以下列表框项具有三个元素 - 图像、标题文本和描述文本。我已经设计好了。现在我需要为我遵循的列表框项应用相同的样式。目前我正在为所有不正确的项目进行复制粘贴。

![在此处输入图像描述](../Images/c8fe28381f6d986978a29fca904ac864.png)

我可以通过 ListBoxTemplate 和 DataTemplate 做到这一点，但我需要在 .cs 文件中编写我不想写的代码。帮我如何实现模板效果？

这是上述列表框项的代码。

```
<ListBoxItem>
    <Grid Height="80">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="80"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Image Grid.Column="0" Source="/Images/dark/appbar.magnify.png"/>
        <StackPanel Grid.Column="1">
            <TextBlock Text="Item heading" TextWrapping="Wrap" Style="{StaticResource PhoneTextExtraLargeStyle}"/>
            <TextBlock Text="item description" TextWrapping="Wrap" Style="{StaticResource PhoneTextSubtleStyle}"/>
        </StackPanel>
    </Grid>
</ListBoxItem> 
```

我需要在我添加的所有列表框项中的图像、标题文本和内容文本的占位符。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:18:21.637

这就是你如何实现它：

```
<Page.Resources>
    <DataTemplate  x:Key="ListTemplate">
        <Grid Height="80">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="80"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Image Grid.Column="0" Source="/Images/dark/appbar.magnify.png"/>
            <StackPanel Grid.Column="1">
                <TextBlock Text="{Binding ItemHeading}" TextWrapping="Wrap" Style="{StaticResource PhoneTextExtraLargeStyle}"/>
                <TextBlock Text="{Binding ItemDescription}" TextWrapping="Wrap" Style="{StaticResource PhoneTextSubtleStyle}"/>
            </StackPanel>
        </Grid>
    </DataTemplate>
</Page.Resources>
<Grid>
    <ListBox ItemTemplate="{StaticResource ListTemplate}" ItemsSource="{Binding YourList}">

    </ListBox>
</Grid> 
```

您可以将资源放在 App.XAML 中，以便所有页面都可以访问它，并且可以在应用程序中的所有 ListBox 上使用它。请注意，**YourList**中的元素应具有**ItemHeader**和**ItemDescription**属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:10:04.660

创建/使用`ListItem ItemTemplate`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T09:46:16.310

您可以像这样创建数据项模板

```
<DataTemplate x:Key="DataTemplate1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="auto"/>
                    <ColumnDefinition Width="auto"/>
                    <ColumnDefinition Width="auto"/>
                </Grid.ColumnDefinitions>
                <Image Grid.Column="0" Source="{Binding Image}" Width="10" Height="10"/>
                <TextBlock Grid.Column="1" Text="{Binding ID}"/>
                <TextBlock Grid.Column="2" Text="{Binding content}"/>
            </Grid>
        </DataTemplate> 
```

然后将此数据模板绑定到列表，然后将项目绑定到列表.. :) 你可以将列表集合与类绑定

您可以创建一个包含三个变量 image、id 和 content 的类，以便您可以列出该类并绑定到该列表

# ios - 等待 10 秒后未能返回。主运行循环模式：kCFRunLoopDefaultMode void SendDelegateMessage(NSInvocation*): delegate

> ID：11307754
> 
> 赞同：6
> 
> 时间：2012-07-03T09:08:16.517
> 
> 标签：ios, core-plot, uiinterfaceorientation

我正在使用 Core Plot 标头开发 iOS 应用程序。我有不同的横向和纵向用户界面。在方向更改时，**`failed to return after waiting 10 seconds. main run loop mode: kCFRunLoopDefaultMode void SendDelegateMessage(NSInvocation*): delegate`**当我尝试修改`UIView`. 有人可以建议我该怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T02:16:40.493

一些调试这个问题的建议，首先尝试弄清楚你的绘图的哪一部分花费了这么长时间。尝试使用 Instruments 中的 Time Profiler 工具，Hold 选项以选择程序陷入困境的图表部分，并检查调用树。尝试选择性放置`NSLog`语句，尝试在调试器中暂停。弄清楚您的操作的哪一部分需要很长时间。尝试将任务分解为多个部分，看看是否可以从一个方向缓存 UI 元素并在另一个方向重用它们。
尝试在后台使用`NSOpperationQueue`. 查看[Apple 并发编程指南](https://developer.apple.com/library/archive/documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html)。

# shell - 如何在使用 sed 时转义 & 字符

> ID：11307759
> 
> 赞同：15
> 
> 时间：2012-07-03T09:08:39.993
> 
> 标签：shell, unix, sed

我想使用 sed 用两个单引号替换字符串中的所有单引号。但是当字符串包含`&`字符时，sed 命令不会替换之后的单引号。如何转义`&`字符以便仍然替换它之后的单引号？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-03T09:13:49.590

您不需要转义**输入中的**任何内容：

```
$ echo "123 ' foo & b'ar" | sed "s/'/''/g"
123 '' foo & b''ar 
```

但是，在`s`命令的“替换”部分`&`有一个特殊的含义：它的意思是“匹配”。这就是为什么上面的命令可以重写为：

```
$ echo "123 ' foo & b'ar" | sed "s/'/&&/g"
123 '' foo & b''ar 
```

`\`如果需要，可以使用需要转义的所有其他内容来转义它：

```
$ echo "123 ' foo & b'ar" | sed "s/'/'\&'/g"
123 '&' foo & b'&'ar 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-03T09:14:18.840

如果您发布代码会更容易回答，但我猜您并没有转义与号。如果您想要文字 & 符号，请更改`&`为。`\&`

如果您好奇，请参阅[sed FAQ](http://sed.sourceforge.net/sedfaq3.html)的第 3.1.2 节以获得更详细的解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T12:01:56.443

它对我有用

```
bash>echo "'This is a string with 'single quote' & '&'" | sed "s/'/''/g"
''This is a string with ''single quote'' & ''&'' 
```

# c - 使用 c 的对象树？

> ID：11307763
> 
> 赞同：0
> 
> 时间：2012-07-03T09:08:54.300
> 
> 标签：c, windows

我使用此代码列出进程：

```
 //Creating ListBox
        hPNList=CreateWindow(TEXT("ListBox"),TEXT(""),WS_CHILD|WS_VISIBLE|LBS_SORT|LBS_NOTIFY,30,132,185,380,hWnd,(HMENU)PNLIST_ID,
        GetModuleHandle(NULL),NULL);

        //changing Font
        SendMessage( hPNList ,WM_SETFONT ,(WPARAM) GetStockObject(DEFAULT_GUI_FONT ),TRUE);

        //making list
        ProcessCount =getprocesslist(pro);

        //adding to list  
        for ( i = 0; i < ProcessCount; i++) 
        { 
            int pos = (int)SendMessage(hPNList, LB_ADDSTRING, 0, 
                (LPARAM) pro[i].szExeFile); 
            // Set the array index of the player as item data.
            // This enables us to retrieve the item from the array
            // even after the items are sorted by the list box.
            SendMessage(hPNList, LB_SETITEMDATA, pos, (LPARAM) pro[i].th32ProcessID ); 
        } 
```

现在我想以树的形式展示它。有人可以帮我怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:22:26.997

有关如何在 Windows 中使用本机树视图控件的一般概述，请参阅[使用树视图控件。](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773409%28v=vs.85%29.aspx)特别是，请参阅[如何添加树视图项目](http://msdn.microsoft.com/en-us/library/windows/desktop/hh298347%28v=vs.85%29.aspx)以获取有关如何将项目层次结构添加到树视图的代码示例。

它归结为：

1.  [`CreateWindow`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632679%28v=vs.85%29.aspx)指定[`WC_TREEVIEW`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775491%28v=vs.85%29.aspx#WC_TREEVIEW)为窗口类时使用该函数
2.  将[`TVM_INSERTITEM`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773733%28v=vs.85%29.aspx)消息发送到树窗口以使用树项填充它。

# variables - 尝试使用 tag to embed YouTube videos

> ID：11307764
> 
> 赞同：1
> 
> 时间：2012-07-03T09:09:00.430
> 
> 标签：variables, iframe, playlist

I am using the following line of code to embed a YouTube player onto a new webpage. I've got over 200 videos online from 50 or so different performers. I'd like to create a page with all of the performers listed and then when you click on that performer's name their playlist will pop into a solo YouTube player. I can't seem to find a way to exchange the list=PLplaylist_ID to a variable that can be passed when the viewer clicks on a particular name. I need to use the tag due to the flash-not-playing-on-iPad-issue :)

> iframe id="ytplayer" type="text/html" width="853" height="480" src="http://www.youtube.com/embed/?listType=playlist&list=PLplaylist_ID&modestbranding=1&rel=0&autohide=1" frameborder="0" />

Any help would be appreciated! Ron

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:27:06.690

iframe 永远不会为您播放视频。它只是 HTML 容器。您需要的是在 iframe 中启动 html 页面，其中包含 YouTube 播放器代码。为此，您可以尝试使用 Flash 后备的原生视频标签（很长的路要走，重新发明自行车），或者您可以尝试在 iframe 中加载：http: [//flowplayer.org](http://flowplayer.org)。或[http://videojs.com/](http://videojs.com/)

# c# - 遍历接口列表

> ID：11307766
> 
> 赞同：6
> 
> 时间：2012-07-03T09:09:03.613
> 
> 标签：c#

我有一个像这样的类型 T 对象的接口

```
public interface IService<T> 
```

我有一堆具有所有不同类型 T 的接口。如何将这些接口添加到某种列表中，遍历列表并调用接口使用的通用方法。有任何想法吗？有替代方法吗？

如果我将它添加到列表中，我只是看不到正确转换类型 T 的方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-03T09:12:01.453

如果该方法很常见，那么大概它不依赖于`T`，所以你应该能够做到：

```
interface IService {
    void TheMethod();
}
interface IService<T> : IService {
    // other stuff
} 
```

然后有一个`List<IService>`，并且只是：

```
foreach(var svc in list) svc.TheMethod(); 
```

# html - HTML5和HTML4中文件的区别

> ID：11307767
> 
> 赞同：0
> 
> 时间：2012-07-03T09:09:15.263
> 
> 标签：html

我想知道 html5 和以前版本中 File API 的区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:12:23.827

[File API](http://www.w3.org/TR/FileAPI/)是一个独立的规范。浏览器中的支持与所使用的 HTML 版本无关（尽管可能会受到 Quirks/Standards 模式之间的 Doctype 切换的影响）。

我相信它最初是作为 HTML 5 的一部分，但不在当前版本中，也不会包含在它的最终版本中。它从来都不是 HTML 4 规范的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T09:12:27.617

主要区别在于——

`HTML5`有 File API 并且`HTML4`没有任何 File api。

# c# - Gtk# HBox container

> ID：11307776
> 
> 赞同：1
> 
> 时间：2012-07-03T09:09:37.897
> 
> 标签：c#, mono, containers, gtk#

I am new to Mono/Gtk development, so I am having some trouble in finding what I need.

I would like to accomplish a behavior similar to WrapPanel in .NET, meaning I would like to add widgets to container and have it go to next row when there is no more space available horizontally.

I also need to be able to remove widgets from the container randomly.

My question is: is there a way to do something like this with HBox/VBox containers? I would appreciate if you could point me in the right direction.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T22:02:20.330

GTK 有[`GtkToolPalette`](http://developer.gnome.org/gtk/2.24/GtkToolPalette.html)，但我认为它不能从 C# 获得。

# symfony - ::buildView() 必须与 Symfony\Component\Form\FormTypeInterface::buildView() 兼容

> ID：11307785
> 
> 赞同：0
> 
> 时间：2012-07-03T09:10:18.617
> 
> 标签：symfony, symfony-forms

我正在尝试为我的 Symfony2 表单实现自定义字段类型，但无论出于何种原因，我都遇到了一个致命错误，正如这个问题的标题中所说。
我已经从界面复制了原始声明，但无济于事:-(

```
<?php
namespace Yanic\HomeBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;
use Symfony\Component\Form\FormView;
use Symfony\Component\Form\FormInterface;
use Symfony\Component\Form\FormError;
use Symfony\Component\Form\CallbackValidator;
use Symfony\Component\Form\FormValidatorInterface;

class ShowOnlyType extends AbstractType
{
/**
     * {@inheritdoc}
     */
    function buildView(FormViewInterface $view, FormInterface $form, array $options)
    {
        $view->addVars(array(
            'value'   => date( 'd/m/Y H:i', $options['value'] )
        ));
    }

    /**
    * {@inheritdoc}
    */
    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {

        $resolver->setDefaults(array(
                'data_class' => 'DateTime'
        ));
    }

    public function getParent()
    {
        return 'form';
    }

    public function getName()
    {
        return 'showOnly';
    }
} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-03T09:40:31.917

这是一个应该可以解决您的问题[的答案。](https://stackoverflow.com/questions/9500528/creating-a-custom-form-type-in-symfony2-cant-overwrite-buildview)

最可能的原因是您没有`use`所需的参数类型。

```
use Symfony\Component\Form\AbstractType,
use Symfony\Component\Form\FormViewInterface;
use Symfony\Component\Form\FormInterface;

//...
class SomeType extends AbstractType
{
    public function buildView(FormViewInterface $view, FormInterface $form, array $options)
} 
```

# codeigniter - Codeigniter ion auth register 将用户ID插入多个表

> ID：11307788
> 
> 赞同：2
> 
> 时间：2012-07-03T09:10:28.163
> 
> 标签：codeigniter

首先抱歉，如果这是一个愚蠢的问题，但我有点失落。

因此，当我使用 ion auth register 功能，并且注册没问题时，将用户数据插入用户表中，并将用户 ID 插入组表中。

我在这部分有点迷失，我想在注册完成后将用户 ID 插入到用户配置文件表和用户设置表中。

而且我真的不知道要修改哪个功能。我正在查看模型和库，以寻找如何将组添加到数据库中，但在代码中找不到任何提示。

那么有人可以帮我解决这个问题吗？可能指向一个教程，或者只是给我一个提示从哪里开始修改

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T09:23:03.203

在`models/ion_auth_model.php`at 行`733`开始注册功能。

您可以在 line 上的某处扩展`793`，在获取用户 id 的行之后，`$id = $this->db->insert_id();`只需添加您希望插入的自定义数据：

```
$mdata = array(
    'user_id' => $id,
    // ... your other data here
);
$this->db->insert('my_table', $mdata); 
```

# android - 文本和图像如何在按钮中发生

> ID：11307789
> 
> 赞同：0
> 
> 时间：2012-07-03T09:10:29.917
> 
> 标签：android, image, button, text

我试图使布局看起来像

它看起来有点像按钮类型。文本和图像如何在按钮中实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:24:57.733

创建您的自定义按钮为：

**第 1**步：在 res/drawable/button_background.xml 中创建一个 Button 可绘制形状 xml：

```
<?xml version=”1.0″ encoding=”UTF-8″?>
<shape xmlns:android=”http://schemas.android.com/apk/res/android”&gt;
<solid android:color=”#F000″/>
<stroke android:width=”1px” android:color=”#BB000000″ />
<padding
android:left=”10dp”
android:top=”7dp”
android:right=”10dp”
android:bottom=”7dp”
/>
<corners
android:bottomRightRadius=”5dp”
android:bottomLeftRadius=”5dp”
android:topLeftRadius=”5dp”
android:topRightRadius=”5dp”
/>
<gradient
android:angle=”90″
android:startColor=”#777″
android:centerColor=”#777″
android:endColor=”#BBB”
android:type=”linear”
/>

</shape> 
```

**第 2 步：**将主 Button xml 布局添加为：

```
<Button android:id="@+id/btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Facebook"
        android:drawableLeft="@drawable/leftimg"
        android:drawableRight="@drawable/rightimg"
        android:padding="15dip"
       android:background="@drawable/button_background"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:14:02.623

您可以在按钮中执行此操作`android:drawableLeft="@drawable/your_icon"`

# c++ - How to copy a structure with pointers to data inside?

> ID：11307792
> 
> 赞同：-1
> 
> 时间：2012-07-03T09:10:41.180
> 
> 标签：c++, pointers, data-structures, cudd

I am using the CUDD package for BDDs manipulation. I want to make a copy for a big data structure in it that is called the DdManager. The problem is : this data structure has so many pointers inside it , so when I make a direct copy it is a "shallow" copy(as some use the term) i.e. : the pointers in the new copy point to the same places pointed to by the original copy , so when I change in anyone of them I also change in the other which is undesirable .... Trying to make a copy function by hand is not feasible because the data structure is really big and very detailed with many pointer to other complex structures also !!! I have tried the vector solutions described [here](https://stackoverflow.com/questions/4848083/how-to-copy-a-structure-with-pointers-to-data-inside-so-to-copy-pointers-and-da) but I did not get the expected result because there are many nested structures and pointers and I want a completely new copy.

Here is a code sample of what I want to do :

```
#include <iostream>
#include <cstdlib>
#include <string.h>
#include <vector>
using namespace std;
struct n1
{
    int a;
    char *b;
};
struct n2
{
    int **c;
    struct n1 *xyz;
};
typedef struct
{
    vector<struct n2> x;
}X;
int main()
{
    struct n2 s1;
    s1.xyz = (struct n1*)malloc(sizeof(struct n1));
    s1.xyz->a = 3;
    s1.xyz->b = (char*)malloc(5);
    s1.xyz->b[0] = '\0';
    strcat(s1.xyz->b,"Mina");
    s1.c = (int**)malloc(5 * sizeof(int*));
    for(int i = 0; i < 5; i++)
        s1.c[i] = (int*)malloc(5 * sizeof(int));
    for(int i = 0; i < 5; i++)
        for(int j = 0 ; j < 5 ; j++)
            s1.c[i][j] = i + j;
    X struct1,struct2;
    vector<struct n2>::iterator it;
    it = struct1.x.begin();
    it = struct1.x.insert(it,s1);
    it = struct2.x.begin();
    it = struct2.x.insert(it,struct1.x[0]);
    cout<<"struct2.x[0].c[1][2]  = "<<struct2.x[0].c[1][2] <<" !"<<endl; // This is equal to 3
    (struct2.x[0].c[1][2])++; //Now it becomes 4
    cout<<"struct2.x[0].c[1][2]  = "<<struct2.x[0].c[2][2] <<" !"<<endl; //This will print 4
    cout<<"s1.c[1][2]  "<< s1.c[1][2]<<" !"<<endl; // This will also print 4 ... that's the wrong thing 
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T10:00:22.233

尽管其他人说你必须

> 手工制作复印功能

...要解决这个问题，我认为这对你来说是错误的方法。这就是为什么，这里有一个建议。

您正在尝试创建[CUDD](http://vlsi.colorado.edu/~fabio/CUDD/cuddIntro.html) ddManager 对象的副本，该对象是复杂 CUDD 库的组成部分。CUDD 在内部使用某些对象的引用计数（这可能对您有所帮助......），但 ddManager 对象有效地代表了库的整个实例，我不知道引用计数如何跨实例工作。

CUDD 库及其[相关的 C++ 包装器](http://vlsi.colorado.edu/~fabio/CUDD/node5.html)似乎没有提供必要的复制构造函数来创建 ddManager 的单独副本，并且添加这些可能需要付出巨大的努力，以及您尝试使用的库的详细内部知识作为客户。虽然可以做到这一点，但这是一件复杂的事情。

相反，我会考虑尝试将当前 BDD 写入文件/流/任何内容，然后将其读回 ddManager 的新实例。有一个名为[dddmp](http://fmgroup.polito.it/index.php?option=com_docman&task=cat_view&gid=24&Itemid=28)的库可以帮助您解决这个问题。

我还建议修改 C++ 包装器以使 ddManager 类[不可复制](https://stackoverflow.com/questions/2173746/how-do-i-make-this-c-object-non-copyable)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T09:37:26.667

“尝试手工制作复制功能是不可行的，因为数据结构非常大而且非常详细，还有许多指向其他复杂结构的指针！！！”

这正是你必须做的。客观的方法意味着您不会编写一个大的全能复制方法。相反，每个对象（结构）只复制它自己，然后调用它的子对象复制方法等，直到没有任何东西可以复制。

没有“向量解决方案”之类的东西，向量只是具有最小复制方法的最小对象。

struct和class没有区别，写copy方法就好了。

只有你知道你的数据的结构，所以你是唯一可以拯救人类（或复制这些数据）的人。

# javascript - 如何检查用户输入的文本是否在 Javascript 中包含 http://

> ID：11307793
> 
> 赞同：1
> 
> 时间：2012-07-03T09:10:47.047
> 
> 标签：javascript, url

我有这样的设置，我的网站要求用户输入 URL。有时用户输入 like`http://google.com/`和其他时间`google.com`，但我的应用程序支持带有`http://`or的 URL `https://`，
我尝试了这个：

```
var a = document.getElementById('tinput').value;
if (a.indexOf(escape('http://')) < 0 && a.indexOf(escape('https://')) < 0){
b = 'http://' + a;
document.getElementById('tinput').value = b;
}
document.getElementById("urlfrm").submit(); 
```

但这很有效。`http://`即使它们包含相同的 URL，它也会始终添加到所有 URL。该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:18:20.303

尝试

```
var a = document.getElementById('tinput').value;
if (a.indexOf('http://') == -1 && a.indexOf('https://') == -1){
b = 'http://' + a;
document.getElementById('tinput').value = b;
document.getElementById("urlfrm").submit();
} else {
document.getElementById("urlfrm").submit();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T09:22:24.867

试试这个：

```
var field = document.getElementById('tinput');
if (!/^https?:\/\//.test(field.value)) field.value = 'http://'+field.value; 
```

有几点需要注意：

*   您当前的检查允许`http(s)://`在字符串中的任何位置 - 您应该只在开始时检查它

*   出于代码可读性的考虑，并且因为在零下唯一`indexOf()`可以返回的值是 -1，所以最好明确地检查它，而不是`< 0`

*   您`b`无缘无故地创建了一个全局变量 ( )

*   不要逃避 - 正如 xdevel 在他的评论中所说，这意味着您检查字符串的编码版本，而不是字符串本身

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T09:23:43.153

您可以简单地使用正则表达式来做到这一点，非常值得学习它们。

```
if ( a.match("^https?://") ) {
    alert("a is a url");
} 
```

# javascript - *this* 优于 event.target

> ID：11307794
> 
> 赞同：10
> 
> 时间：2012-07-03T09:10:56.380
> 
> 标签：javascript, jquery, optimization

在事件侦听器中使用更好/更快吗`this`？`event.target`

我一直在编写这样的代码（例如 jQuery）：

```
jQuery('input').bind('keyup', function (e) {
 var j = jQuery(e.target);
 foo(j.attr('id') , j.val() );
}); 
```

我被告知要替换`e.target`为，`this`因为它“更好”。两者之间真的有任何优势吗？

我使用 target 是因为它是一个更通用的解决方案，因为它适用于委托事件。我在进行基准测试时遇到了麻烦，因为我的测试被绑定弄得杂乱无章（尽管很明显，在这种情况下，差异太小了，无论如何都不重要）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-03T09:15:27.140

一个并不比另一个好，但它们做不同的事情：*this*指的是事件附加到的元素，而 event.target 是调用事件的元素。

例如

```
div id=foo   
   div id=bar 
```

当 click 附加到 foo 并单击 bar 时，事件将冒泡到 foo。如果*这*将引用*foo*和*event.target*到*bar*

最后，这取决于您需要处理哪个元素。

在 api.jquery.com/event.target 上有一个小例子来说明 event.target。这是一个使用该示例的小示例，但也显示*了这个*：http : [//jsbin.com/adifan/edit#javascript,html,live](http://jsbin.com/adifan/edit#javascript,html,live)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T09:15:09.517

好吧，jQuery 文档对此很清楚:-)

> 目标属性可以是为事件注册的元素或它的后代。将 event.target 与 this 进行比较通常很有用，以确定是否由于事件冒泡而正在处理事件。当事件冒泡时，此属性在事件委托中非常有用。

（来源：[http](http://api.jquery.com/event.target/) ://api.jquery.com/event.target/ ）

此链接解释了术语“事件冒泡”：[http ://www.quirksmode.org/js/events_order.html](http://www.quirksmode.org/js/events_order.html)

# javascript - Javascript：检查 window.fullScreen 是否为 false，然后在新窗口中全屏打开 url

> ID：11307803
> 
> 赞同：-1
> 
> 时间：2012-07-03T09:11:36.353
> 
> 标签：javascript, asp.net

我在页面加载时写了一个 javascript

```
if(!window.fullScreen) window.open(document.URL,'','fullScreen=yes,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=no,resizable=no');} 
```

但是 window.fullScreen 总是假的，所以它会一直打开窗口。

还有其他方法可以检查窗口是否处于全屏模式？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:07:18.593

你忘了开括号

```
 if(!window.fullScreen){//<- Forgot opening bracket
    window.open(document.URL,'','fullScreen=yes,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=no,resizable=no');
    } 
```

# iphone - 带有情节提要的自定义 UITableViewCell

> ID：11307806
> 
> 赞同：0
> 
> 时间：2012-07-03T09:11:44.537
> 
> 标签：iphone, ios, uitableview, uilabel

我的目标是创建一个`UITableViewCell`包含 2 个 UILabel 的自定义。一个是标题，一个是细节。详细标签应允许 3 行文本。

所以我继续在情节提要中创建了一个自定义表格视图单元格。我还创建了一个子类`UITableViewCell`并将两者联系在一起。

我`UILabel`在情节提要的单元格中添加了两个并将它们放置在我希望它们出现的位置并将它们链接到它们在子类中的对应插座。由于标签的内容不同，我想将文本垂直对齐到顶部。据我了解，唯一的方法是调用`sizeToFit`标签上的方法。我在以下子类中执行此操作`UITableViewCell`：

```
-(void)layoutSubviews {
     [super layoutSubviews];
     [self.detailTextLabel sizeToFit];
} 
```

到目前为止，一切似乎都很好，并且其中的文本`detailTextLabel`已按应有的方式对齐。虽然当我与单元格交互时，例如将手指滑过它以显示删除按钮，但它`detailTextLabel`会将大小更改为情节提要中设置的大小。这会导致文本未对齐。当我选择单元格并更改为另一个视图并通过选项卡栏返回到表格视图时，也会发生类似的事情

我的问题是：有什么方法可以使用情节提要以不同的方式创建此自定义单元格，还是我唯一的替代方法是以编程方式创建所有内容？

尊敬的，克里斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:58:49.293

如果你仍然想在你的 UILabel 中垂直对齐你的文本，也许你应该看看[这个](https://stackoverflow.com/questions/6557178/is-it-possible-to-vertically-align-text-inside-labels-with-a-large-frame)`sizeToFit`（当你与你的单元格交互时，谁会调整它的大小）。

关于您的问题，我认为您可以像[这样](https://stackoverflow.com/a/1939305/1437192)从 xib 文件创建自定义单元格。

# macos - 刚购买了第一台 Mac 并且有一些软件问题

> ID：11307811
> 
> 赞同：0
> 
> 时间：2012-07-03T09:11:57.543
> 
> 标签：macos

我刚刚购买了我的新 Mac，它是 27 英寸 imac，配备 3.4ghz 四核处理器、8gb 内存、1tb 硬盘和 AMD Radeon HD 6970M 1GB GDDR5 显卡。

有人告诉我这是最好的机器，除了内存不是 16gb，但我认为不需要它，但我可能错了。

无论如何，我想知道什么软件可以弥补我在电脑上已经拥有的东西。

我是一名网页设计师和编码员。

你也知道adobe是否允许你在mac上使用pc许可证？我问的原因是我刚刚在电脑上购买了创意套件 cs6，它有 3 个许可证。我只在一台机器上使用过它，它允许我在 mac 上使用它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:39:28.133

如果我没记错的话，许可证实际上是特定于操作系统的。我最近遇到了这个问题（在家里，我使用 Mac，在工作中我使用 PC）并且无法正确安装。备择方案？嗯，它没有那么闪亮，但 Gimp 最近变得相当好。对于任何其他软件，请查看[AlternativeTo](http://alternativeto.net/ "替代")。这是一个非常漂亮的网站，用于查找您的平台上（或您的价格范围内）不可用的软件。

编辑：

差点忘记我最喜欢的MAC 软件：[TextWrangler](http://www.barebones.com/products/TextWrangler/)！如果您喜欢精简的代码编辑器，TextWrangler 适合您。没有那个标签关闭废话，非常可靠的内置 FTP，完全可定制的代码着色，低调的界面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:32:26.297

我猜不是。但是您可以尝试在 MAC 上的 Parallels/VmWare/VirtualBox 中运行 Windows 并在其中启动 Adob​​e。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T09:22:42.203

如果 adobe 可用于 mac，我几乎可以肯定许可证将适用于 mac。为什么不试试呢？或者看看[http://www.adobe.com/nl/support/](http://www.adobe.com/nl/support/)

# c# - C#线程不会休眠？

> ID：11307819
> 
> 赞同：54
> 
> 时间：2012-07-03T09:12:11.023
> 
> 标签：c#, .net, multithreading

我有这个代码：

```
void Main()
{
    System.Timers.Timer t = new System.Timers.Timer (1000);
    t.Enabled=true;
    t.Elapsed+= (sender, args) =>c();
    Console.ReadLine();

}

int h=0;
public void c()
{
    h++;
    new Thread(() => doWork(h)).Start();
}

public void doWork(int h)
{
    Thread.Sleep(3000);
    h.Dump();
} 
```

我想看看如果间隔是 1000 毫秒并且作业进程是 3000 毫秒会发生什么。

但是我看到了一个奇怪的行为 - 3000 毫秒的延迟*只发生在开始时*！

如何让每次`doWork`睡眠 3000 毫秒？

正如您在此处看到的，一开始有 3 秒的延迟，然后每次迭代 1 秒。

![在此处输入图像描述](../Images/509bfa4e44fb7b1a1c034001da27b4ab.png)

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-07-03T09:18:51.483

每次计时器滴答作响，你都会启动一个线程来做一些睡眠；该线程是完全隔离的，并且计时器将继续每秒触发一次。**实际上，即使**您移动`Sleep(3000)`到​​，计时器也会每秒触发一次`c()`。

你目前拥有的是：

```
1000 tick (start thread A)
2000 tick (start thread B)
3000 tick (start thread C)
4000 tick (start thread D, A prints line)
5000 tick (start thread E, B prints line)
6000 tick (start thread F, C prints line)
7000 tick (start thread G, D prints line)
8000 tick (start thread H, E prints line)
... 
```

目前尚不清楚您要做什么。您可以在不希望它触发时禁用计时器，并在准备好后再次恢复它，但尚不清楚`Sleep()`此处的目的是什么。另一种选择只是一个`while`带有 a 的循环`Sleep()`。简单，并且不涉及很多线程。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-03T09:21:21.980

每一秒你都会以 3 秒的延迟启动新线程。它是这样发生的：

1.  线程 1 开始
2.  线程 2 启动，线程 1 休眠
3.  线程 3 启动，线程 2 休眠，线程 1 休眠
4.  线程 4 开始，线程 3 休眠，线程 2 休眠，线程 1 休眠
5.  线程 5 启动，线程 4 休眠，线程 3 休眠，线程 2 休眠，线程 1 转储
6.  线程 6 启动，线程 5 休眠，线程 4 休眠，线程 3 休眠，线程 2 转储
7.  线程 7 启动，线程 6 休眠，线程 5 休眠，线程 4 休眠，线程 3 转储

如您所见，每个线程休眠 3 秒，但每秒发生一次转储。

如何使用线程？像这样：

```
void Main()
{
    new Thread(() => doWork()).Start();
    Console.ReadLine();
}

public void doWork()
{
    int h = 0;
    do
    {
        Thread.Sleep(3000);
        h.Dump();
        h++;
    }while(true);
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-03T11:46:32.937

Your example is very interesting - it shows the side effects of parallel processing. To answer your question, and to make it easier to see the side effects, I've slightly modified your example:

```
using System;
using System.Threading;
using System.Diagnostics;

public class Program
{
    public static void Main()
    {
        (new Example()).Main();
    }
}

public class Example
{
    public void Main()
    {
        System.Timers.Timer t = new System.Timers.Timer(10);
        t.Enabled = true;
        t.Elapsed += (sender, args) => c();
        Console.ReadLine(); t.Enabled = false;
    }

    int t = 0;
    int h = 0;
    public void c()
    {
        h++;
        new Thread(() => doWork(h)).Start();
    }

    public void doWork(int h2)
    {
        Stopwatch sw = new Stopwatch();
        sw.Start();
        try
        {
            t++;
            Console.WriteLine("h={0}, h2={1}, threads={2} [start]", h, h2, t);
            Thread.Sleep(3000);
        }
        finally
        {
            sw.Stop();
            var tim = sw.Elapsed;
            var elapsedMS = tim.Seconds * 1000 + tim.Milliseconds;
            t--;
            Console.WriteLine("h={0}, h2={1}, threads={2} [end, sleep time={3} ms] ", h, h2, t, elapsedMS);
        }
    }
} 
```

What I've modified here is the following:

*   Timer interval is now 10 ms, the threads still have 3000 ms. The effect is that while threads are sleeping, new threads will be created
*   I've added varialbe `t`, which counts the number of threads currently being active (it is increased when the thread starts and decreased right before the thread ends)
*   I've added 2 dump statements, printing out the thread start and the thread end
*   Finally, I've given the parameter of function `doWork` a different name (h2), which allows to see the value of the underlying variable h

Now it is intersting to see the output of this modified program in [LinqPad](http://www.linqpad.net/) (note the values are not always the same as they're depending on the race conditions of the started threads):

```
 h=1, h2=1, threads=1 [start]
    h=2, h2=2, threads=2 [start]
    h=3, h2=3, threads=3 [start]
    h=4, h2=4, threads=4 [start]
    h=5, h2=5, threads=5 [start]
    ...
    h=190, h2=190, threads=190 [start]
    h=191, h2=191, threads=191 [start]
    h=192, h2=192, threads=192 [start]
    h=193, h2=193, threads=193 [start]
    h=194, h2=194, threads=194 [start]
    h=194, h2=2, threads=192 [end]
    h=194, h2=1, threads=192 [end]
    h=194, h2=3, threads=191 [end]
    h=195, h2=195, threads=192 [start] 
```

I think the values speak for themselves: What is happening is that every 10 ms a new thread is started, while others are still sleeping. Also interesting is to see that h is not always equal to h2, especially not if more threads are started while others are sleeping. The number of threads (variable t) is after a while stabilizing, i.e. running around 190-194.

You might argue, that we need to put locks on the variables t and h, for example

```
readonly object o1 = new object(); 
int _t=0; 
int t {
       get {int tmp=0; lock(o1) { tmp=_t; } return tmp; } 
       set {lock(o1) { _t=value; }} 
      } 
```

While that is a cleaner approach, it didn't change the effect shown in this example.

Now, in order to prove that each thread really sleeps 3000ms (= 3s), let's add a `Stopwatch` to the worker thread `doWork`:

```
public void doWork(int h2) 
{ 
    Stopwatch sw = new Stopwatch(); sw.Start();
    try 
    {
        t++; string.Format("h={0}, h2={1}, threads={2} [start]", 
                            h, h2, t).Dump();                               
        Thread.Sleep(3000);         }
    finally {
        sw.Stop(); var tim = sw.Elapsed;
        var elapsedMS = tim.Seconds*1000+tim.Milliseconds;
        t--; string.Format("h={0}, h2={1}, threads={2} [end, sleep time={3} ms] ", 
                            h, h2, t, elapsedMS).Dump();
    }
} 
```

For a proper cleanup of the threads, let's disable the timer after the `ReadLine` as follows:

```
 Console.ReadLine(); t.Enabled=false; 
```

This allows you to see what happens if no more threads are starting, after you've pressed ENTER:

```
 ...
    h=563, h2=559, threads=5 [end, sleep time=3105 ms] 
    h=563, h2=561, threads=4 [end, sleep time=3073 ms] 
    h=563, h2=558, threads=3 [end, sleep time=3117 ms] 
    h=563, h2=560, threads=2 [end, sleep time=3085 ms] 
    h=563, h2=562, threads=1 [end, sleep time=3054 ms] 
    h=563, h2=563, threads=0 [end, sleep time=3053 ms] 
```

You can see they are all being terminated one after the other as expected and they slept about 3s (or 3000ms).

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-03T09:20:40.387

您看到这种行为的原因很简单：您每秒安排一个新线程，结果在三秒后变得可见。前四秒你什么都看不到；然后，三秒前启动的线程转储；到那时，另一个线程将已经休眠两秒钟，而另一个线程将休眠一秒钟。下一秒线程#2 转储；然后线程#3、#4 等等——你每秒都会得到一个打印输出。

如果您希望每三秒看到一次打印输出，您应该每三秒安排一个新线程，并带有您想要的任何延迟：初始线程将在三秒加上延迟后输出；所有后续线程将以三秒的间隔触发。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-03T09:15:11.380

似乎你每秒都在运行一个新线程，这不是一个好主意，使用 backgroundworker，当事件 backgroundworker 完成时再次调用 C 函数，这样你就不需要计时器

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-03T09:19:10.980

每个 doWork 都在休眠三秒钟，但它们的休眠重叠，因为您以一秒钟的间隔创建线程。

# sql-server-2005 - 在 SQL Server 2005 中，如何查看表的创建时间？

> ID：11307821
> 
> 赞同：3
> 
> 时间：2012-07-03T09:12:18.567
> 
> 标签：sql-server-2005

使用 Microsoft SQL Server 2005，有什么方法可以查看何时创建了表？

有什么方法可以查看`INSERT`表格中最后一个完成的时间？

最后一次`ALTER TABLE`约会呢？

预先感谢您的友好合作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T09:19:01.840

您可以通过查询获得创建和最后修改日期`sys.tables`

```
SELECT  create_date, modify_date
FROM    sys.tables 
```

AFAIK，没有办法知道最后一次插入是什么时候发生的。您将不得不恢复为使用触发器或在您的表上设置[审计。](http://msdn.microsoft.com/en-us/library/cc280386%28v=sql.105%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T09:19:15.777

此查询将为您提供创建表的时间和日期以及上次修改的时间：

```
USE DataBaseName;
SELECT  [name]
        ,create_date
        ,modify_date
FROM    sys.tables
WHERE   [name] IN ('TableName1', 'TableName2'); 
```

获取插入的最后日期并不是那么简单。查看这个 StackOverflow 问题：[How to get last insert/update/delete datetime on Sql Server 2005?](https://stackoverflow.com/questions/1227707/how-to-get-last-insert-update-delete-datetime-on-sql-server-2005)

# ios5 - CCMenuItemImage 更改运行时 cocos2d

> ID：11307824
> 
> 赞同：1
> 
> 时间：2012-07-03T09:12:26.820
> 
> 标签：ios5, cocos2d-iphone, ccmenuitem

我创建了一个菜单项

```
menuItemImage=[CCMenuItemImage itemFromNormalImage:@"image_old.png" selectedImage:@"image_old.png" target:self selector:@selector(play)]; 
```

我正在使用下面的代码来更改 CCMenuItemImage 但它不起作用。它说不兼容的指针类型将“CCTextured2D”发送到 normalimage 的参数。

```
 [menuItemImage setNormalImage:[[CCTextureCache sharedTextureCache]addImage:@"image_new.png"]]; 
```

如何更改 menuItemImage 运行时？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T10:37:06.077

您可以使用以下代码更改 normalImage。**我知道这不是一个好习惯，但暂时可以正常工作。**

```
[menuItemImage setNormalImage:[CCSprite spriteWithFile:@"image_new.png"]]; 
```

我希望它对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-26T18:03:21.230

此问题的解决方案是制作一个具有几乎相同名称的额外菜单项 通过将可见属性从 false 交换为 true 来更改 menuItems 的状态，反之亦然

例子：

```
CCMenuItem *menuItemOn;
CCMenuItem *menuItemOff;

-(void)ChangeMenuItem{
menuItemOff = [CCMenuItemImage itemWithNormalImage:@"buttonOff.png" selectedImage: @"buttonOff.png"  target:self selector:@selector(Method_off)];
 itemJoinOff = [CCMenuItemImage itemWithNormalImage:@"buttonOn.png.png" selectedImage: @"buttonOn.png" target:self selector:@selector(Method_On)];
menuItemOff.visible = false;
menuITemOn.visible = true;
menuItemOff position ..... etc
} 
```

每当菜单 On/Off 状态必须更改时，使 MenuItemOn 可见而 menuItemOff 不可见。

# java - HttpResponse 在 Android 和 Java 中有所不同

> ID：11307828
> 
> 赞同：2
> 
> 时间：2012-07-03T09:12:35.120
> 
> 标签：java, android, httpurlconnection, apache-httpclient-4.x

我正在寻求帮助！我有一些代码执行服务器身份验证并从服务器检索响应。当我在我的java项目中的eclipse中执行它时，我得到了reddirrect响应，例如：

```
<html><head><meta http-equiv="refresh" content="0;url=SiteIamLoggingPageURL/"/></head></html> 
```

但是当我在我的 android 应用程序中执行相同的代码时，我得到的响应等于登录失败的场景。

```
HttpPost post = new HttpPost(loginPageAdress);
List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
//nameValuePairs.add(new BasicNameValuePair("remember", "1"));
nameValuePairs
        .add(new BasicNameValuePair("email", "email"));
nameValuePairs.add(new BasicNameValuePair("password", "password"));

post.setEntity(new UrlEncodedFormEntity(nameValuePairs, "utf-8"));
StringBuilder stringBuilder = new StringBuilder();

HttpResponse response = client.execute(post, httpContext);
BufferedReader rd = new BufferedReader(new InputStreamReader(response
        .getEntity().getContent(), "UTF-8"));
String line = "";
while ((line = rd.readLine()) != null) {
    stringBuilder.append(line).append("\n");
}
System.out.println(stringBuilder.toString()); 
```

问题是什么？o 感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T12:34:30.983

这可能是因为您没有在单独的`Thread`. 在此处阅读有关此内容的更多信息：

## [为什么冰淇淋三明治会使您的应用程序崩溃](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:26:09.893

听起来你忘了添加

```
 <uses-permission android:name="android.permission.INTERNET" /> 
```

在 AndroidManifest.xml 中。看看[这个教程](http://sarangasl.blogspot.com/2011/06/android-login-screen-using-httpclient.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T09:37:13.283

1.  如果这是您的身份验证代码，您必须使用通过标头重定向而不是通过 HTML 刷新元标记。服务器应该发出位置：http://authenticated.jsp fe
2.  要检查实际情况，请使用 Wireshark。那你就不再瞎了。这里 - 来自 Android 的请求，这里来自服务器的回答。这是一个非常有用的工具，花一些时间使用它。

# mysql - MySql Join 使用 4 个表

> ID：11307829
> 
> 赞同：0
> 
> 时间：2012-07-03T09:12:37.990
> 
> 标签：mysql

我有 4 个表，我想加入它们并提取 4 个值。

我写了以下 MySql 查询，但它不起作用。

```
select `a`.`id`,`a`.`page` xpage,`a`.`action`,
`b`.`header` xheader, `b`.`page_id`,
`c`.`content` xcontent,`b`.`page_id`,
`d`.`footer` xfooter,`d`.`page_id`
join `header` b
on `a`.`id`=`b`.`page_id`
join `content` c
on `a`.`id`=`c`.`page_id` and `a`.`id`=`d`.`page_id`
join `footer` d
on `a`.`id`=`d`.`page_id`
where `a`.`page`='main' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:17:07.090

你忘了`from`这里的条款。

```
select `a`.`id`,`a`.`page` xpage,`a`.`action`,
`b`.`header` xheader, `b`.`page_id`,
`c`.`content` xcontent,`b`.`page_id`,
`d`.`footer` xfooter,`d`.`page_id` 
from `a`
join `header` b
on `a`.`id`=`b`.`page_id`
join `content` c
on `a`.`id`=`c`.`page_id` and `a`.`id`=`d`.`page_id`
join `footer` d
on `a`.`id`=`d`.`page_id`
where `a`.`page`='main' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T09:15:01.537

您是否缺少 FROM 表？应该

```
SELECT a,b,c FROM page a join header b on a.id=b.page_id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-03T09:14:19.243

你错过了 FROM

应该是这样的：

```
select `a`.`id`,`a`.`page` xpage,`a`.`action`,
`b`.`header` xheader, `b`.`page_id`,
`c`.`content` xcontent,`b`.`page_id`,
`d`.`footer` xfooter,`d`.`page_id`
from `a`
join `header` b
on `a`.`id`=`b`.`page_id`
join `content` c
on `a`.`id`=`c`.`page_id` and `a`.`id`=`d`.`page_id`
join `footer` d
on `a`.`id`=`d`.`page_id`
where `a`.`page`='main' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T09:37:31.293

您缺少`FROM`关键字：

```
select `a`.`id`,`a`.`page` xpage,`a`.`action`,
       `b`.`header` xheader, `b`.`page_id`,
       `c`.`content` xcontent,`b`.`page_id`,
       `d`.`footer` xfooter,`d`.`page_id` 
from `a`
        join `header` b
            on `a`.`id`=`b`.`page_id`
        join `content` c
            on `a`.`id`=`c`.`page_id` and `a`.`id`=`d`.`page_id`
        join `footer` d
            on `a`.`id`=`d`.`page_id`
where `a`.`page`='main' 
```

# salesforce - 用户信息销售队伍

> ID：11307831
> 
> 赞同：1
> 
> 时间：2012-07-03T09:12:45.370
> 
> 标签：salesforce

var SalesforceOAuthPlugin = {

```
/**
* Obtain authentication credentials, calling 'authenticate' only if necessary.
* Most index.html authors can simply use this method to obtain auth credentials
* after onDeviceReady.
*   success - The success callback function to use.
*   fail    - The failure/error callback function to use.
* PhoneGap returns a dictionary with:
*   accessToken
*   refreshToken
*   clientId
*   userId
*   orgId
*   loginUrl
*   instanceUrl
*   userAgent
*/
getAuthCredentials: function(success, fail) {
    PhoneGap.exec(success, fail, "com.salesforce.oauth","getAuthCredentials",[]);
}, 
```

SalesforceOAuthPlugin.getAuthCredentials(getUserid(), getAuthCredentialsError);

我正在尝试使用上述函数获取用户的 ID，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:46:47.897

使用此格式的链接`https://na1.salesforce.com/id/1/1` na1 - salesforce 实例，第一个 1 - organizationId，下一个 1 - userId。

请注意，在这样的获取中，您应该被记录（提供 OAuth 令牌）。

我认为您在 URL 中提供的实际 userId，或者在令牌和 id 之间具有映射。

# vb.net - VB.Net 中的 Excel 工作表分配无法编译

> ID：11307837
> 
> 赞同：1
> 
> 时间：2012-07-03T09:13:20.683
> 
> 标签：vb.net, excel

我正在将一个 VB6 应用程序转换为 VB.Net 并且遇到了基础问题。我开始：-

```
Dim xl As Excel.Application
Dim xlsheet As Excel.Worksheet
Dim xlwbook As Excel.Workbook

xl = New Excel.Application
xlwbook = xl.Workbooks.Open(my_data.file_name)
xlsheet = xlwbook.Sheets(1) 
```

但最后一行没有编译；它报告

> Option Strict On 不允许从“对象”到“Microsoft.Office.Interop.Excel.Worksheet”的隐式转换

我可以通过将线替换为

```
xlsheet = CType(xlwbook.Sheets(1), Excel.Worksheet) 
```

但这对我来说似乎不是正确的做法。如果分配是正确的，我会认为对象自然应该具有正确的类型。

那么：有人知道我应该在这里做什么正确的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:52:26.417

没有类型转换（如果 Option Strict 为 On）是不可能的，因为 .NET 无法理解 VBA 集合。

我相信[这个错误报告](http://support.microsoft.com/kb/323737)与这个问题*有关*：

如果您查看[此页面上的 Excel 示例（将代码从 VBA 转换为 Visual Basic .NET）](http://msdn.microsoft.com/en-us/library/aa192490%28v=office.11%29.aspx)，那么它会显示以下代码：

```
Dim ThisWorksheet As Excel.Worksheet = _
        CType(ThisWorkbook.Worksheets.Item("Sheet1"), Excel.Worksheet) 
```

有几个关于这个问题的帖子，比如[这里](http://social.msdn.microsoft.com/Forums/en/vbgeneral/thread/921a6de1-364b-4b0d-9d5b-334aa30db022)和[这里](http://social.msdn.microsoft.com/Forums/en/Vsexpressvb/thread/8d158701-8477-4c50-9885-257df0e29c54)，但似乎没有更好的解决方法。

# c# - 在解析 XML 期间在 WinForms 应用程序中实现进度条

> ID：11307839
> 
> 赞同：-1
> 
> 时间：2012-07-03T09:13:23.690
> 
> 标签：c#, .net, xml, winforms, progress-bar

我制作了一个应用程序，它通过 XML 文件传递​​并“提取”具有特定属性的特定值的条目。该应用程序运行良好，但 XML 文件有超过 52,000 个条目，并且只有 3 个值可供排序（因此执行它自然需要一些时间）。因此，我想实现一个进度条，这样我就可以跟踪我的应用程序所取得的进展。我用谷歌搜索了它，但没有一个解决方案对我有用（应用程序确实有效，但进度条根本不动），所以如果你能帮助我，那就太好了。

提取条目的代码是这样的：

```
XmlNodeList nodes;
string ExtractedXML = "";

private void extractingXMLToolStripMenuItem_Click(object sender, EventArgs e)
{
    if (nodes.Count != 0)
    {
        foreach (XmlNode node in nodes)
        {
            if (String.Compare(node.ChildNodes[6].ChildNodes[0].Attributes.GetNamedItem("code").Value.ToString(), "CodeValue") == 0)
            {
                tempXML = node.InnerXml;
                temp = "<" + node.Name + " code=\"" + node.Attributes.GetNamedItem("code").Value + "\">" + Environment.NewLine;
                temp += tempXML + Environment.NewLine;
                temp += "</" + node.Name + ">";
                ExtractedXML += temp + Environment.NewLine;
                temp = ""; 
            }
        }
        textBox1.Text = ExtractedXML;
    }
} 
```

每个具有相似代码的值都有一个 ToolStripMenue 项，只有“CodeValue”发生变化。如何实现进度条以显示应用程序的进度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T09:23:12.383

最好的办法是不在 UI 线程上处理 XML。

您看不到进度条增加的原因是因为处理 XML 可能会使用所有资源，并且 UI 线程没有机会更新它的控件，直到处理 XML 完成。

您可以使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)进行处理，并使用[ProgressChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.progresschanged.aspx)事件让 UI 知道它应该更新进度条。通过这样做，您的应用程序将保持响应，并且 UI 不会冻结。UI 线程也将获得一些 CPU 时间，它能够更新他的控件并响应事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T09:31:15.287

您应该在单独的线程中执行长时间运行的进程，[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)在这里会很有用。开始您的流程调用时：

```
bgWorker.RunWorkerAsync(//pass in object to process) 
```

然后有一个`ReportProgress`事件，你增加你的进度条，例如

```
private void bgWorker_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
        progressBar.Value = e.ProgressPercentage;
} 
```

最后，在`do work`事件内部，您需要使用公式调用报告进度以获取完成百分比以及传递处理结果，这是我使用的示例：

```
private void bgWorker_DoWork(object sender, DoWorkEventArgs e)
{
        bgWorker.ReportProgress((outputGrid.Rows.Count * 100) / importGrid.Rows.Count, result);   
} 
```

# parallel-processing - Mathematica 使用 VMware 客户端进行并行计算

> ID：11307843
> 
> 赞同：0
> 
> 时间：2012-07-03T09:13:43.363
> 
> 标签：parallel-processing, wolfram-mathematica, vmware, vdi

我可以通过 vmware 客户端访问虚拟机，并希望使用 mathematica 进行并行计算（在 vm 上没有直接的 www 访问）。但是在虚拟机上没有安装mathematica，我不想再买一个。所以我想在我的笔记本电脑上有这个接口，并将尽可能多的计算转移到虚拟机上。

以下问题： - 有可能吗？- 它是如何工作的？

谢谢， 安德烈亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:24:28.223

*Mathematica 的*原生并行计算能力的使用确实取决于是否有一个*Mathematica*内核运行在该帮派中的每个处理元素（核心、CPU、功能单元，不管它们现在怎么称呼）上，因此无需离开*Mathematica*，你死在水里，这是不可能的。

另一方面，您可以使用*Mathematica*最近增强的功能与用其他语言编写的程序（只要这些其他语言是 C）很好地配合，编写一个在 VM 上运行的后端并从*Mathematica*安装调用它你的笔记本电脑。当然，一旦你开始用 C 语言编写，你就可以进行所有你想要的并行化。

# jquery - jquery ui可拖动负z-index

> ID：11307847
> 
> 赞同：1
> 
> 时间：2012-07-03T09:13:55.200
> 
> 标签：jquery, jquery-ui

为什么 draggable 不适用于负 z-index ？
示例： http: [//jsfiddle.net/yEHCA/1/](http://jsfiddle.net/yEHCA/1/)
如何从上面的示例中拖动第二张图片？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:47:47.173

在您的示例中，z-index=-1 的正方形放置在网格后面，因此当您尝试拖动它时，您实际上是在单击网格。

如果您为网格设置的 z-index 低于 -1，则它可以工作：http: [//jsfiddle.net/yEHCA/15/](http://jsfiddle.net/yEHCA/15/)

为什么需要使用负 z-index？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T11:07:35.797

临时解决方案：在启动/停止时更改 z-index
[http://jsfiddle.net/yEHCA/60/](http://jsfiddle.net/yEHCA/60/)

# ios - 如何加密 iOS 中的移动配置文件（在 OTA 部署中）？

> ID：11307852
> 
> 赞同：6
> 
> 时间：2012-07-03T09:14:05.657
> 
> 标签：ios, ruby, cocoa

我正在尝试`.mobileconfig`为 iOS 设备签名和加密配置文件。

`openssl::pkcs7`在 ruby​​ 中使用 sign 函数完美地进行签名，

但是使用加密功能，我得到一个加密的数据，但 Safari 无法安装配置文件说**"Invalid Profile"**。

这方面有两个问题：

1.  .mobileconfig 配置文件中的哪些数据实际上是加密的，进入 (key) EncryptedPayloadContent (/key) 的 (data)..(/data) 部分？

2.  数据是二进制格式 ( `.der`) 还是 base64 编码？

这方面的任何帮助都会有所帮助，因为 APPLE 严重缺乏加密配置文件的任何文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-20T05:00:29.613

这个问题与[另一个问题](https://stackoverflow.com/questions/7087415/how-to-encrypt-and-sign-iphone-mobile-configuration-file-using-ruby?lq=1)相同。在这里重新发布答案，并进行一些修改！

我使用了 Ruby 和[Plist](https://rubygems.org/gems/plist/versions/3.1.0) gem中可用的[OpenSSL模块。](http://ruby-doc.org/stdlib-2.0/libdoc/openssl/rdoc/OpenSSL.html)

考虑一个密码限制配置文件。

```
passcode_payload ={
              'PayloadUUID' => 'RANDOM_STRING_UUID',
              'PayloadOrganization' => 'PayloadOrganization',
              'PayloadVersion' => 1,
              'PayloadIdentifier' => 'com.test.PayloadIdentifier',
              'PayloadType' => 'Configuration',
              'PayloadDisplayName' => 'PayloadDisplayName',
              'PayloadRemovalDisallowed' => false
            }
  passcode_payload_content = {
              'PayloadDescription' => 'PayloadDescription',
              'PayloadDisplayName' => 'PayloadDisplayName',
              'PayloadIdentifier' => 'PayloadIdentifier',
              'PayloadOrganization' => 'PayloadOrganization',
              'PayloadType' => 'com.apple.mobiledevice.passwordpolicy',
              'PayloadUUID' => "RANDOM_STRING_UUID",
              'PayloadVersion' => 1,
              'allowSimple' => true,
              'forcePIN' => true
              'maxPINAgeInDays' => 20,
              'minComplexChars' => 1,
              'minLength' => 4,
              'requireAlphanumeric' => true
            } 
```

通常对于正常的配置文件，`passcode_payload_content`进入`passcode_payload['PayloadContent']`as 字典数组。

~~passcode_payload['PayloadContent'] = [passcode_payload_content]~~

但是对于加密的配置文件，`PayloadContent`应该删除并 `EncryptedPayloadContent`按照[配置文件密钥参考文档](https://developer.apple.com/library/ios/featuredarticles/iPhoneConfigurationProfileRef/Introduction/Introduction.html#//apple_ref/doc/uid/TP40010206-CH1-SW52)使用。

**问题 1：** *.mobileconfig 配置文件中的哪些数据实际上是加密的，进入 (key) EncryptedPayloadContent (/key) 的 (data)..(/data) 部分*

从文档中，

> 要加密配置文件，请执行以下操作：
> 
> *   删除`PayloadContent`数组并将其序列化为适当的 plist。*   请注意，此 plist 中的顶级对象是一个数组，而不是字典。*   CMS 将序列化的 plist 加密为封装数据。以 DER 格式序列化加密数据。*   使用键将序列化数据设置为配置文件中的 Data plist 项的值 `EncryptedPayloadContent`

由于 plist 中的顶级对象应该是一个数组

```
passcode_payload_content_array = [passcode_payload_content] 
```

序列化到正确的 plist

```
to_be_encrypted_plist = passcode_payload_content_array.to_plist 
```

加密证书有效负载内容，

```
device_certificate = OpenSSL::X509::Certificate.new File.read('deviceIdentityCertificate.pem')
encrypted_payload = OpenSSL::PKCS7.encrypt([device_certificate],to_be_encrypted_plist, OpenSSL::Cipher::Cipher::new("des-ede3-cbc"),OpenSSL::PKCS7::BINARY) 
```

**问题2：** *数据是二进制格式（.der）还是base64编码的？*

将加密的payload内容添加到der格式的原始payload中

```
passcode_payload['EncryptedPayloadContent'] = StringIO.new(encrypted_payload.to_der) 
```

# c# - 使用锚点自动缩放大小 - 重叠控件

> ID：11307858
> 
> 赞同：5
> 
> 时间：2012-07-03T09:14:20.557
> 
> 标签：c#, .net, winforms, controls, scaling

我在调整 Windows 窗体中控件的大小和缩放时遇到了一些麻烦。我已经设置了锚点，以便控件与表单保持比例，效果很好。但是，当我认为控制原点也会随着表单缩放而缩放和变化时，也许我期望过高，但事实并非如此，我发现我的控件重叠。这是一些屏幕截图；

![在此处输入图像描述](../Images/741abb63d266f5d793324d6bc1e4bfb6.png)

![在此处输入图像描述](../Images/d3822b7349b2bd97e42b6eb3b8dcde07.png)

有人知道我可以采取什么方法来解决这个问题吗？也许我需要将控制原点设置为可缩放的动态绘图点，但然后这些重绘是在缩放表单时，还是仅在创建时？

编辑1：刚刚发现这个问题隐藏在互联网中，[问题：锚定控件重叠](https://stackoverflow.com/questions/3612045/problem-anchored-controls-are-overlapping)也许我需要实现这样的东西，一个调整大小事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T09:31:54.707

首选的解决方案应该是[TableLayoutPanel](http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel.aspx)。处理`OnResize`将变得更加脆弱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T09:28:52.880

我想知道 Anchor 是否真的与缩放有关，它基本上将控件的侧面锚定到容器上，而缩放是它的副产品。例如。如果左右两侧都被锚定，则控件将按比例缩放，因为锚将尝试保持左右两侧的位置不变。

记住这一点，当表格尺寸增加并且您有更多空间时，您必须考虑您想要什么。在上述情况下，您可能希望列表框 lbLog 保持相同大小，但面板 Simulate 占用创建的任何空间。对于这种情况，您可以将面板锚定在左侧和右侧，而仅将列表框锚定在右侧。

基本上，如果您希望所有控件按比例缩放（我想说的是真正的缩放，而不是在锚定的情况下缩放），那么锚定不是正确的解决方案。

# powershell - 如何通过 Powershell 检查/取消选中 Hyper-V 主机的“允许 Numa 跨越”

> ID：11307859
> 
> 赞同：0
> 
> 时间：2012-07-03T09:14:24.793
> 
> 标签：powershell, hyper-v

有没有办法通过 Powershell 检查/取消选中 Hyper-V 主机的“允许 Numa 跨越”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T10:49:54.107

试试这个：

```
$cn = 'HV1'
$NumaSpanningEnabled = $true

$vmhost = Get-WmiObject -Class Msvm_VirtualSystemManagementServiceSettingData -Namespace root\virtualization -ComputerName $cn
$vmhost.NumaSpanningEnabled=$NumaSpanningEnabled

$vmms = Get-WmiObject -Class Msvm_VirtualSystemManagementService -Namespace root\virtualization -ComputerName $cn
$vmms.ModifyServiceSettings($vmhost.psbase.GetText(1)) 
```

在 Hyper-V 3.0 中，它很简单：

```
Set-VMHost -NumaSpanningEnabled <bool> 
```

# jquery - jQuery画布触摸计数

> ID：11307868
> 
> 赞同：0
> 
> 时间：2012-07-03T09:14:42.440
> 
> 标签：jquery, html, jquery-mobile, canvas

有人可以帮我写一个我正在使用的脚本吗？ [http://jsfiddle.net/InVAMPED/XsG4e/4/](http://jsfiddle.net/InVAMPED/XsG4e/4/)

我想要实现的是将图像放置在用户触摸的位置（ipad）。将有 5 张图片，每张图片仅附加一次。

所以第一次触摸放置 img1，第二次触摸 imag2 等，直到所有图像都已放置。我的 fsfiddle 示例的问题是，当在 ipad 上时，它不计算第一次触摸，因此您将第一张图像放置两次。它确实会在第二次复制图像，只需将其移动到第二次触摸坐标，然后按应有的方式移动到 2、3、4、5。

有什么建议吗？或帮助以更好的方式做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:04:14.883

我修改了你的代码。将画布移动到 HTML 部分。它适用于我的 iPhone。

# android - iPhone 和 Android 应用程序开发的 Photoshop 文档设置

> ID：11307876
> 
> 赞同：1
> 
> 时间：2012-07-03T09:15:26.320
> 
> 标签：android, iphone, photoshop

我正在为 iPhone 和 Android 应用程序开发一个概念。应用程序包含图像、文本和按钮。到目前为止，在创意方面一切进展顺利，但我认为很快就会在开发的技术部分实现重大飞跃，所以我对此感到有点紧张，我向你寻求帮助。

我正在使用**Photoshop**来创建应用程序屏幕、按钮和所有内容……当然，还包括矢量和智能对象。

我不确定我应该使用什么 DPI，72、163 或 326……？

但是，我知道 iPhone 4 的分辨率是 640x960 像素，我想知道我的 PSD 文档应该是什么样子？

你们能先帮我解决一下这个新的 iPhone 文档设置吗，请：

宽度：640 像素高度：940 像素分辨率：72 ???? 像素/英寸
颜色模式：RGB 颜色 8 位。

比我需要 Android 平台的相同类型的信息，请。

如果在之前或之后我应该提前知道一些额外的事情，请给我提示，我真的很感激！

谢谢！干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T12:51:58.723

我已经为大约 10-15 个 iPhone 应用程序进行了视觉设计。不要像上面每个人都建议的那样将文档设置为手机的 ppi。这只会使您的工作变得小到无法在计算机屏幕上使用。

*   **16 位颜色**- 阅读有关[渐变条带](http://nomorebanding.com)的信息，然后使用链接中的 Photoshop 操作进行修复。

*   **禁用色彩管理**阅读此[http://bjango.com/articles/photoshop/](http://bjango.com/articles/photoshop/)

*   **在文件 > 保存为 Web 中取消选中 PNG 的“转换为 sRGB”**

除此之外，没有其他设置非常重要。您希望为矢量形状工具打开对齐像素。这是 CS5 和 6 中的默认设置。

再次不要将您的 Photoshop 文档的 PPI (DPI) 设置为与设备相同。将其保留为默认值 (72)。这不会影响图稿分辨率。在设计时，您希望屏幕上的 1px 等于 iPhone 屏幕上的 1px。所以不要管这个设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:10:30.810

我不确定什么 DPI 是最好的，但我可以分享我到目前为止的经验。我刚刚创建了我的第一个移动设计组合并在 iPhone 上以 72 DPI 对其进行了测试，但这还不够大（至少对于第 4 代型号） 326 设置似乎适用于我的组合，所以我建议你这样做尝试。这似乎是基于我在与与我一起工作的开发人员交谈时所听到的一致意见。

希望有帮助。

# cygwin - 带有 HTK 的 cygwin 上的 Julius 声学模型

> ID：11307878
> 
> 赞同：0
> 
> 时间：2012-07-03T09:15:30.337
> 
> 标签：cygwin, speech-recognition, htk

$ HDMan -A -D -T l -m -w wlist -n monophonesl -i -l dlog dict ../lexicon/voxforge_lexicon C:\cygwin\HTK\htk-3.3-windows-binary\htk\HDMan.exe - A -D -T l -m -w wlist -n monophonesl -i -l dlog dict ../lexicon/voxforge_lexicon

未设置 HTK 配置参数

错误 [+5021] GetChkedInt：T 选项需要整数 Arg 致命错误 - 终止程序 C:\cygwin\HTK\htk-3.3-windows-binary\htk\HDMan.exe

我正在使用 voxforge 训练来训练 julius 的第三步。如文中所述，我创建了词典文件和 global.ded 文件。当我在 cygwin oi 上运行命令时出现此错误。我一直在寻找东西，但无法弄清楚。你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:25:08.057

> -Tl

正确的命令包括数字 1，而不是字母 l。采用

> -T 1

为避免将来出现此类问题，请使用区分它们的字体。复制粘贴命令而不是重新键入它们。阅读工具中的消息并尝试理解，它已经告诉您问题出在哪里。

# java - 鼠标悬停触发 JXCollapsiblePane

> ID：11307884
> 
> 赞同：5
> 
> 时间：2012-07-03T09:16:10.520
> 
> 标签：java, swing, mouseevent, swingx

在 JXCollapsiblePane 与按钮一起使用的 SwingX 示例中，但我想用鼠标事件转置它。在我的示例中，JXCollapsiblePane 在开始时是关闭的。只有当用户自带鼠标放在按钮上时才能打开JXCollapsiblePane。当鼠标离开该区域时，这应该是 JXCollapsiblePane 再次崩溃。我的问题：当鼠标通过按钮离开该区域时，JXCollapsiblePane 没有折叠。

```
public class CollapsiblePaneDemo
{

  /**
   * @param args
   */
  public static void main( String[] args )
  {
    final JXCollapsiblePane cp = 
        new JXCollapsiblePane( JXCollapsiblePane.Direction.RIGHT );

    // JXCollapsiblePane can be used like any other container
    cp.setLayout( new BorderLayout() );

    // the Controls panel with a textfield to filter the tree
    JPanel controls = new JPanel( new FlowLayout( FlowLayout.LEFT, 4, 0 ) );
    controls.add( new JLabel( "Search:" ) );
    controls.add( new JTextField( 10 ) );
    controls.add( new JButton( "Refresh" ) );
    controls.setBorder( new TitledBorder( "Filters" ) );

    cp.add( "Center", controls );

    JXFrame frame = new JXFrame();
    frame.setLayout( new BorderLayout() );

    // Then the tree - we assume the Controls would somehow filter the tree
    JScrollPane scroll = new JScrollPane( new JTree() );
    // Put the "Controls" first
    frame.add( "Center", scroll );

    // Show/hide the "Controls"
    final JButton toggle = new JButton( cp.getActionMap()
        .get( JXCollapsiblePane.TOGGLE_ACTION ) );
    toggle.setText( "-" );
    toggle.setPreferredSize( new Dimension( 20, toggle.getSize().height ) );

    toggle.addMouseListener( new MouseAdapter()
    {
      @Override
      public void mouseEntered( MouseEvent e )
      {
        if ( cp.getSize().width == 0 )
        {

          toggle.doClick();
        }
      }
    } );

    final JPanel panel = new JPanel();
    panel.setLayout( new BorderLayout() );
    panel.add( "Center", toggle );
    panel.add( "East", cp );

    panel.addMouseListener( new MouseAdapter()
    {
      @Override
      public void mouseExited( MouseEvent e )
      {
        if ( !panel.contains( e.getPoint() ) )
        {
          toggle.doClick();
        }
      }
    } );

    frame.add( "East", panel );

    frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
    frame.pack();
    cp.setCollapsed( true );
    frame.setVisible( true );

  }
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T10:12:54.970

当`mouseExited`光标离开时触发事件`JPanel`- 通过离开边界`JPanel`或输入子组件之一。由于按钮位于 边缘的右侧`JPanel`，因此光标永远不会`JPanel`在左侧再次进入，因此无法退出。

您可以修改`mouseEntered`按钮中的方法`MouseListener`以折叠打开的控制面板，并让您现有的`MouseListener`处理用户通过框架边框离开的情况。如果您想阻止用户追逐按钮并重新触发它（我没有在代码中打扰），您需要跟踪控制窗格的展开/折叠状态（SwingX API 可能已经为您完成了）以下）。

我修改后的 MouseListener：

```
toggle.addMouseListener( new MouseAdapter()
{
  @Override
  public void mouseEntered( MouseEvent e )
  {
      toggle.doClick();
  }
} ); 
```

# java - 代码未运行

> ID：11307890
> 
> 赞同：-4
> 
> 时间：2012-07-03T09:16:23.713
> 
> 标签：java, bufferedreader

使用此代码时出现运行时异常

```
Runtime rt = Runtime.getRuntime();
System.out.println("Executing " + "uname -a");
Process x = rt.exec("ping IP Address of system");
BufferedReader stdInput =
    new BufferedReader(new InputStreamReader(x.getInputStream()));
BufferedReader stdError =
    new BufferedReader(new InputStreamReader(x.getErrorStream()));
String line = null;
while ((line = stdInput.readLine()) != null) {
    System.out.println(line);
}
x.waitFor(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:29:43.137

试试这个方法。。

```
public class PingClass {

    public void pingIt(){

        InetAddress addr;
        try {
            String line;

            Process p = Runtime.getRuntime().exec(
                    "C:/windows/system32/ping.exe 192.168.2.2");

            /**
             * Create a buffered reader from the Process' input stream.
             */
            BufferedReader input = new BufferedReader(new InputStreamReader(p
                    .getInputStream()));

            /**
             * Loop through the input stream to print the program output into console.
             */
            ArrayList<String> str = new ArrayList<String>();
            while ((line = input.readLine()) != null) {
                str.add(line);
                System.out.println(line);

            }
            /**
             * Finally close the reader
             */
            input.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }   

    public static void main(String[] args){

        new PingClass().pingIt();
    }

} 
```

# c# - 将 ironpython 方法分配给 C# 委托，此方法将跨 appDomains 传递

> ID：11307892
> 
> 赞同：1
> 
> 时间：2012-07-03T09:16:24.423
> 
> 标签：c#, delegates, ironpython, appdomain

考虑以下场景：

应用域 1：

```
public delegate bool Delegate1(class1 c1,string p);

 class class1
  {
    public bool method1(Delegate1 d, out IEnumerable<string> partNumbers)
      {
      //Method body
       }
    } 
```

AppDoamin2：

```
class x
 {
  public bool method2(Dictionary<string,string> x,out string[] returnValues)
   {
    class1Instance.method1(delegate(class1 cc,string pp){if(x.Key=="blaah") return False;},out temp);

    }
  } 
```

IronPython 脚本：调用方法 2。

这种方法给出了序列化异常，因为 appDomain2 中的委托正在使用堆栈中的变量。

可能的解决方案：将 Ironpython 脚本中的委托方法传递给 appDomain2 中的方法，该方法在 Appdomain3 中传递。

问题：如何做到这一点？到目前为止，无法在此搜索任何内容。

注意：使用 .NET Framework 2 和 ironpython 2.7.1。

PS对不起格式不好！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:44:04.287

找到了答案。通常情况下，答案是甜蜜而简单的！

因此创建了一个小型辅助类，它封装了整个委托实现、成员变量等。该类的构造函数接受必要的参数（这导致无法序列化委托的问题）。以下是我编写的小型辅助类-

```
public sealed class DevCatalogFilterHelper : MarshalByRefObject
{
    Dictionary<string, string> m_resourceNameValuePair;

    public DevCatalogFilterHelper(Dictionary<string, string> resourceNameValuePair)
    {
        this.m_resourceNameValuePair = resourceNameValuePair;
    }

    public  bool FilterDelegate(class1 devCat,string partNumber)
    {
        foreach (KeyValuePair<string, string> kvp in m_resourceNameValuePair)
        {
            string value;
           //if(condition){helpFull code return false;}
        }
        return true;
    }
} 
```

# actionmailer - NoMethodError 未定义的方法邮件

> ID：11307896
> 
> 赞同：9
> 
> 时间：2012-07-03T09:16:37.653
> 
> 标签：actionmailer, ruby-on-rails-3.2

在 Ruby on rails (3.2.6) 中设置邮件程序 (3.2.6) 后，我收到此错误：

NoMethodError（# 的未定义方法“邮件”）：

我的 user_mailer.rb 看起来像这样：

```
class UserMailer < ActionMailer::Base
  default :from => "test@test.com"

  def activation_mail(user)
    @user = user
    mail(:to => user.mail, :subject => "Registration")
  end
end 
```

我遵循此处提供的示例：http: [//guides.rubyonrails.org/action_mailer_basics.html](http://guides.rubyonrails.org/action_mailer_basics.html)

在配置文件中，我添加了这一行： config.action_mailer.delivery_method = :test 我还尝试了 :smtp 和 gmail 配置。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-20T10:18:05.943

我最近遇到了类似的问题，并通过替换来纠正它：

```
def self.activation_mail() 
```

和

```
def activation_mail() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-22T18:14:34.003

你应该尝试更换

```
def activation_mail(user)
    @user = user
    mail(:to => user.mail, :subject => "Registration")
  end 
```

和

```
def activation_mail(user)
    @user = user
    mail(:to => @user.mail, :subject => "Registration")
  end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-01T17:51:03.217

这是一个拼写错误。您的**user.mail**不存在。也许它应该是**user.email**或其他东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T20:36:56.823

我敢打赌，您传递的“用户”对象要么是 1) 未正确实例化，要么是 2) 数组而不是单个用户对象

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-28T15:22:32.450

我发现您的邮件视图中的拼写错误可能会导致此问题。错误消息具有误导性。

# tcl - tcl 停止所有输出到标准输出通道？

> ID：11307898
> 
> 赞同：1
> 
> 时间：2012-07-03T09:16:46.700
> 
> 标签：tcl, stdout

我正在运行一堆功能。他们每个人都会向标准输出输出大量文本，这使我无法快速检查结果。有什么简单的方法可以停止输出到标准输出通道吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:40:31.377

如果函数只是为了记录目的而写入标准输出，并且您想丢弃所有这些东西，*并且*它们不想写入磁盘或套接字或任何其他类型的通道，那么最简单的方法是：

```
rename puts original_puts
proc puts args {}   ;# A do-nothing procedure! 
```

要转换回正常操作：

```
rename puts {}
rename original_puts puts 
```

请注意，如果包装代码中有错误，除非您小心，否则这将导致问题。这是一个包装好的“小心”版本（用于 Tcl 8.5）：

```
proc replacement_puts args {}
proc silentEval {script} {
    rename puts original_puts
    interp alias {} puts {} replacement_puts
    catch [list uplevel 1 $script] msg opts
    rename puts {}
    rename original_puts puts
    return -options $opts $msg
} 
```

然后你就这样做：

```
silentEval {
    call-noisy-function-A
    call-noisy-function-B
    ...
} 
```

如果您有想要写入文件（或套接字或......）的代码，那么可以通过更复杂的代码`replacement_puts`（它总是可以使用`original_puts`来完成肮脏的工作）。

如果这些函数是从 C 级别写入标准输出，那么你会更加卡住。您可以`close stdout;open /dev/null`将文件描述符定向到接收器，但您无法轻松地从中恢复。（`dup`如果有必要，TclX 包中有一个。）如果可以，请先尝试上面的简单版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T15:05:28.903

防止输出到 stdout/stderr 的唯一好方法是（以某种方式）从您正在执行脚本的解释器中删除 stdout/stderr 通道，因为有很多方法可以将内容写入通道（包括但不包括限于`puts`,`chan puts`和`fcopy`)

我建议创建一个新的安全 interp 并将通道传输到此 interp，调用脚本，然后将通道传输回来。之后，您可以选择删除 interp 或将其重新用于类似目的。

```
proc silentEval {script} {
    set i [interp create -safe]
    interp transfer {} stdout $i
    catch [list uplevel 1 $script] msg opts
    interp transfer $i stdout {}
    interp delete $i
    dict incr $opts -level
    return -options $opts $msg
} 
```

# java - 在主屏幕应用程序中禁用主页按钮？

> ID：11307901
> 
> 赞同：9
> 
> 时间：2012-07-03T09:16:54.057
> 
> 标签：java, android, homescreen, lockscreen

我正在为我的大学做一个研究项目。该应用程序永远不会投放市场，仅用于研究。

我使用 Google Homescreen 示例代码制作了一个主屏幕应用程序。在那里，我做了一个锁屏活动。在那里，用户应该无法通过按 Home、Back 等来解锁。Back-Button 似乎被禁用，但 Home-Button 不是。我尝试了几种来自互联网和 stackoverflow 的解决方案，但都不起作用。

这是重要的代码：

（**注意**：Logcat 显示“按下按钮：4”为后退按钮，但没有显示主页按钮！）

在我的锁屏活动中：

```
 @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        Log.v(TAG, "BUTTON PRESSED: " + new Integer(keyCode).toString());

        if ((keyCode == KeyEvent.KEYCODE_BACK)) {
            return true;
        } else if ((keyCode == KeyEvent.KEYCODE_CALL)) {
            return true;
        }
        else if ((keyCode == KeyEvent.KEYCODE_HOME)){
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }

    @Override
    public void onAttachedToWindow() {
        this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
        super.onAttachedToWindow();
    } 
```

自 Android 版本 4 以来，onAttachedToWindow() 方法似乎不起作用。如何禁用主页按钮？

**编辑：清单文件：**

```
<?xml version="1.0" encoding="utf-8"?>

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.android.home" >

    <uses-permission android:name="android.permission.CALL_PHONE" />
    <uses-permission android:name="android.permission.GET_TASKS" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.SET_WALLPAPER" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.EXPAND_STATUS_BAR" />
    <uses-permission android:name="android.permission.NFC" />
    <uses-permission android:name="android.permission.DISABLE_KEYGUARD" />

    <permission android:name="android.permission.WRITE_SECURE_SETTINGS" >
    </permission>

    <application
        android:icon="@drawable/ic_launcher_home"
        android:label="@string/home_title" >
        <service android:name=".MyService" >
        </service>

        <activity
            android:name="Home"
            android:launchMode="singleInstance"
            android:stateNotNeeded="true"
            android:theme="@style/Theme" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.HOME" />
                <category android:name="android.intent.category.DEFAULT" />

            </intent-filter>

            <receiver android:name=".ScreenReceiver" >
                <intent-filter>
                    <action android:name="android.intent.action.SCREEN_ON" />
                    <action android:name="android.intent.action.SCREEN_OFF" />
                    <action android:name="android.intent.action.USER_PRESENT" />
                </intent-filter>
            </receiver>
        </activity>
        <activity
            android:name="Wallpaper"
            android:icon="@drawable/bg_android_icon"
            android:label="Wallpaper" >
            <intent-filter>
                <action android:name="android.intent.action.SET_WALLPAPER" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity android:name=".LockPage" >
            <intent-filter>
                <action android:name="android.intent.action.SCREEN_ON" />
                <action android:name="android.intent.action.SCREEN_OFF" />
                <action android:name="android.intent.action.USER_PRESENT" />
                <action android:name="android.nfc.action.NDEF_DISCOVERED" />
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.HOME" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.MONKEY" />
                <category android:name="android.intent.category.DEFAULT" />

                <action android:name="android.intent.action.MAIN" />

                <data android:mimeType="text/plain" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.nfc.action.NDEF_DISCOVERED" />

                <category android:name="android.intent.category.DEFAULT" />

                <data android:scheme="http" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T05:27:35.007

这可能来得有点晚，我也遇到过类似的情况。我的问题是我不希望用户在通话期间离开通话屏幕，但我无法阻止它，所以我只是在每次他们离开时将其带回前面。

在您的情况下，您可以简单地在暂停时将您的应用程序重新置于前面：

```
@Override
protected void onPause() {
    super.onPause();
        // Close and reopen app or bringToFront()
} 
```

所以离开会自动再次打开应用程序。您应该尝试重新打开您的活动或将其置于最前面，看看什么最有效。如果您删除所有动画并添加 FLAG_ACTIVITY_NO_ANIMATION，重新打开可能不会引起注意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T11:14:31.713

似乎主页按钮按下未转发到主屏幕应用程序中的应用程序。因此我制作了一个普通的应用程序，将我的广播接收器和我的服务放入，现在我可以禁用主页按钮和后退按钮。

仍然可以使用最近的应用程序按钮跳出我的锁屏。您可以使用可能有效的虚拟条目来淹没它。

希望对某人有所帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T19:18:30.123

```
@Override  
public void onAttachedToWindow()  
{  
    super.onAttachedToWindow();
    this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);           
} 
```

现在像这样处理关键事件，

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) 
{
    if(keyCode == KeyEvent.KEYCODE_HOME)
    {
        Log.i("Home Button","Clicked");
    }
    if(keyCode==KeyEvent.KEYCODE_BACK)
    {
        finish();
    }
 return false;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-03T09:26:48.437

如果不更改 Android 源，这是不可能的：[此处提到][1]。

此外，这会破坏 Android 活动周期，不建议这样做。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-06T07:15:08.760

此代码适用于我的应用程序

```
@Override 
public void onAttachedToWindow() {
    this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
    super.onAttachedToWindow(); 
} 
```

# jquery - 如何为屏幕缩略图获得这种网络效果？

> ID：11307903
> 
> 赞同：-1
> 
> 时间：2012-07-03T09:17:03.467
> 
> 标签：jquery, css

将鼠标悬停在[http://www.ariasblog.ca/](http://www.ariasblog.ca/)中的每个图标上时，在显示相关文本之前会出现“旋转效果”。我假设它是一个从悬停在链接上调用的 jquery 脚本。开源上是否有特定的脚本，还是必须专门为网站编写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:19:39.803

您可以使用这些 jQuery 插件中的任何一个

*   [翻动！](http://lab.smashup.it/flip/)
*   [快速翻转 2](http://jonraasch.com/blog/quickflip-2-jquery-plugin)

# dojo - 在没有本地 Dojo 安装的情况下使用 DOH 测试 Dojo

> ID：11307908
> 
> 赞同：0
> 
> 时间：2012-07-03T09:17:33.237
> 
> 标签：dojo, cross-domain, doh

如果我不将 Dojo 本地安装到我的项目中，我正在尝试研究如何使用 DOH 来测试 Dojo 模块。我在 Eclipse 中工作，理想情况下，我想要一些最终可以作为 Maven 构建的一部分运行的东西。Dojo 包大小为 5-20Mb，如果可能的话，我不想将它与每个项目一起存放在我的源代码控制系统中。

我已经使用 runner.html 测试运行器尝试了一些选项，但是 DOH 需要在某个地方找到一个 Dojo，然后似乎会找到与该安装相关的模块。

将 Dojo 安装在我的系统上但未安装在项目中会给我在尝试查找相对于 dojo.js 文件位置的项目时遇到问题。跨域保护阻止我提供任何类型的绝对路径，因为它会剥离`:`字符。它还阻止我使用通过 http 在不同域上提供的 Dojo 安装。

是否有必要在某个地方安装 Dojo，然后我可以定义从 dojo.js 到模块根目录的相对路径？如果没有，我该如何配置才能绕过它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T09:56:07.077

I've not tried this completely cross domain, but yes, you can define paths which may be enough to get you going.

We run our tests using a somewhat complicated deployment (to ensure we don't introduce accidental dojo/doh path dependencies), and our URL looks like this:

```
http://server/XXX/dev/dohpath/util/doh/runner.html?boot=../../../dojo/dojo.js&dojoUrl=../../../dojo/dojo.js&paths=doh,../dohpath/util/doh;mymodule,../../mymodule&testModule=full.test.module 
```

That is, you fire up the runner, give it both 'boot' and 'dojoUrl' to tell it where Dojo itself lives, use 'paths' to tell DOH where it lives and how to find your own modules.

*blech*

Whether those relative paths can be made absolute successfuly, and whether it'll work cross-domain is an entirely different matter, I'm afraid. We'll be hitting that problem ourselves in a couple of months.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:34:53.787

我已经能够使用位于[http://archive.dojotoolkit.org/nightly/checkout/util/doh/runner.html](http://archive.dojotoolkit.org/nightly/checkout/util/doh/runner.html)的跑步者和要点来做到这一点。

诀窍似乎是在 URL 中使用路径别名，并使用网络路径引用 URL（即省略 URL 方案，URL 以 开头`//`）。

我在没有本地 DOH 副本的情况下尝试回答[这个问题时发现了这一点。](https://stackoverflow.com/questions/16062265/how-to-check-if-function-throw-an-error-in-doh)

这里是：

[http://archive.dojotoolkit.org/nightly/checkout/util/doh/runner.html?testModule=aa&paths=aa,//gist.github.com/gitgrimbo/5406688/raw/e6bc4469ce72dfd6d50e61e885889cb915a3f66b/gistfile1](http://archive.dojotoolkit.org/nightly/checkout/util/doh/runner.html?testModule=aa&paths=aa,//gist.github.com/gitgrimbo/5406688/raw/e6bc4469ce72dfd6d50e61e885889cb915a3f66b/gistfile1)

# google-app-engine - 有没有办法在应用引擎上设置 404 错误页面？

> ID：11307910
> 
> 赞同：1
> 
> 时间：2012-07-03T09:17:33.487
> 
> 标签：google-app-engine, http-status-code-404

我已经建立了一个网站，我想建立一个 404 错误页面。有没有办法这样做，因为我似乎无法访问 .htaccess 文件？

在此先感谢，斯科特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:08:14.000

Python？[https://developers.google.com/appengine/docs/python/config/appconfig#Custom_Error_Responses](https://developers.google.com/appengine/docs/python/config/appconfig#Custom_Error_Responses)

爪哇？ [https://developers.google.com/appengine/docs/java/config/appconfig#Custom_Error_Responses](https://developers.google.com/appengine/docs/java/config/appconfig#Custom_Error_Responses)

请参阅[Google App Engine 和 404 错误](https://stackoverflow.com/questions/189751/google-app-engine-and-404-error)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-30T12:02:38.990

该文档现在明确指出自定义 404 页面将不起作用。

[https://cloud.google.com/appengine/docs/standard/java/config/webxml#Error_Handlers](https://cloud.google.com/appengine/docs/standard/java/config/webxml#Error_Handlers)

> 注意：目前，您无法为某些错误情况配置自定义错误处理程序。具体来说，当没有为 URL 定义 servlet 映射时，您无法自定义 404 响应页面、403 配额错误页面或 App Engine 内部错误后出现的 500 服务器错误页面。

# php - 不输出到 html 时使用 htmlspecialchars

> ID：11307911
> 
> 赞同：0
> 
> 时间：2012-07-03T09:17:41.950
> 
> 标签：php

例如，如果我使用`$id= $_GET['id'];`然后我将其`$id`用作 if 语句的条件，我是否必须在 htmlspecialchars 上使用`$id`？

例如

```
$id = htmlspecialchars($_GET['id']);

if($id) {
//code
} 
```

是否需要 htmlspecialchars，即使没有输出 html？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T09:20:26.867

不需要。如果您将数据输出到 HTML 上下文中，您只需要对数据进行 HTML 转义，并且数据*可能*包含在 HTML 中具有特殊含义的字符（例如`<`, `>`, `"`）并且您不希望这些字符破坏您的 HTML 结构.

另请参阅[伟大的逃避现实（或：使用文本中的文本您需要知道的内容）](http://kunststube.net/escapism/)。

# ruby-on-rails - PayPal 权限服务 API 和 Rails

> ID：11307913
> 
> 赞同：0
> 
> 时间：2012-07-03T09:17:46.727
> 
> 标签：ruby-on-rails, paypal

我已经在这里问过这个问题-> [https://stackoverflow.com/questions/11289701/how-to-make-connection-between-paypal-accounts](https://stackoverflow.com/questions/11289701/how-to-make-connection-between-paypal-accounts)，但是我阅读了有关 PayPal 和一些 API 的信息，发现我需要用户允许我用账单进行交易：付钱给他。

我想问一下是否有人知道一些资源或其他东西，这可能有助于使其在 Rails 中工作，因为我不知道如何使用这个 PayPal API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:22:39.283

我找到了宝石 - [https://github.com/moshbit/paypal_permissions](https://github.com/moshbit/paypal_permissions)

# qtip - 从 cytoscape.js 中的节点对象获取 svg 元素

> ID：11307914
> 
> 赞同：0
> 
> 时间：2012-07-03T09:17:52.920
> 
> 标签：qtip, cytoscape-web

我想在节点鼠标悬停时显示一个工具提示（通过使用[qtip ）。](http://craigsworks.com/projects/qtip/)为了做到这一点

```
cy.nodes().bind("mouseover", function() { ... } 
```

我需要将工具提示绑定到某个 svg 元素。我在节点的公共接口上找不到会返回 svg 元素来执行此操作的函数，也找不到在初始化期间直接向单个节点 svg 元素添加属性的方法。Cy 当然有这个 svg 信息存储在它的 _private 中。当然，我可以通过调用 node.position() 找到 svg 元素，然后搜索相应的 svg 元素，但是有没有更简洁的方法可以直接从节点对象接口获取它？

编辑： Atanas 的建议有效，但我不确定它是否是永久解决方案。我希望在 mouseout/zoom/pan/grab/select/.. 上禁用工具提示，这意味着我需要绑定

```
$(".ui-tooltip").qtip('hide'); 
```

对于 cy 上的那些事件。我宁愿依靠 qtip 事件和延迟显示工具提示。现在工具提示似乎有点错误，因为它立即隐藏在这些事件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T21:58:35.830

出于性能原因，Cytoscape.JS 最近更新为使用 HTML5 Canvas 渲染器。（这大约发生在 2012 年 8 月至 2012 年 9 月）

获取节点悬停的事件位置在当前测试版中并未完全实现，但它似乎是一个非常重要的功能。

您可以通过在 Javascript 控制台中键入以下内容来确认实现的状态：

```
cy.nodes().bind("mouseover", function(e) {console.log(e)}) 
```

这个功能应该很快就会实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:53:05.000

我最近或多或少做了同样的事情——在节点上显示 qtips——而且它有效。这是我的代码，希望对您有所帮助：

```
 cy.nodes().bind("mouseover", function(oEvent){
        var eid = this.data("id");

        $qtipDiv.css({
            "left": oEvent.clientX,
            "top": oEvent.clientY,
        });

        var menutext = "some text to be shown in tooltip";

        $qtipDiv.qtip({
            content: {
                text: menutext
            },
            show: {
                delay: 0,
                event: false,
                ready: true,
                effect: false
            },
            position: {
                viewport: true,
                adjust: {
                    method: "shift"
                }
            },
            style: {
                classes: "ui-tooltip-tipsy"
            }
        });
    }); 
```

# performance - 如何加快简单的 SQL Server 2000 查询

> ID：11307915
> 
> 赞同：0
> 
> 时间：2012-07-03T09:17:59.210
> 
> 标签：performance, sql-server-2000

我有一张`product`表，其中有很多列。主键是`productid`. 有 50,000 行，但是当我发出这样的选择语句`select * from products`时，需要 10 分钟才能获取完整数据。所以请告诉我该怎么做，这样我可以更快地运行我的查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:23:53.937

您的主键也是该表上的**集群键吗？**

如果你这样做，`SELECT * ....`你基本上**总是**会得到一个全表扫描。真的没有什么可以加快查询速度——你想要所有的行、所有的列——所以你得到了所有的东西，这需要花费时间。

如果您进行更多“重点”查询，例如

```
SELECT col1, col2 FROM dbo.Products WHERE SomeColumn = 42 
```

**那么**您就有机会通过使用适当的索引来加快速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:24:38.453

买一台更好的电脑。

严重地。

SQL Server 2000 已于多年前停用，因此这是一个旧安装。50.000 个产品是个笑话——任何低于 100 万个的表都不算什么。

> 但是，当我发出 select * from products 之类的选择语句时，需要 10 分钟才能获取完整数据。

假设这是通过 LAN，而不是通过缓慢的 Internet 连接，可能有两个原因：

*   系统严重超载。像严重超载。不像我在旧设置上没有看到过。去过那里，看到了 - 硬盘超载（嘿，它们是 SCSI，它们速度很快）以至于它们需要超过 2 秒才能响应请求。
*   系统是由不称职的人编写的。可能是糟糕的事务级别处理导致长时间的可怕锁定，从而阻止您。这是可能的，但是您需要进行大量的返工才能将荒谬的代码从编程中删除。

select * from table 不应该花费超过几秒钟的时间来通过 LAN 传输所有数据。观点。除非这个包有大量的二进制数据（即某些领域的大量数据）。

作为您当地的数据库专家进行分析。从硬件负载开始，然后转向锁定行为。考虑升级到更现代的技术，现在你落后了很多代。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-03T09:25:55.347

因为没有标准（WHERE），所以您的查询所花费的时间不是由于选择（确定要选择哪些行），而是很可能是由于数据的绝对大小。

唯一的解决办法是：

> 不要使用`SELECT *`，而只选择您需要的列。

# git - Git post-receive-email：未知类型的（提交）

> ID：11307920
> 
> 赞同：2
> 
> 时间：2012-07-03T09:18:15.443
> 
> 标签：git, githooks

我遇到了 Git 的 post-receive-email 挂钩脚本的问题。这是我所做的：

1.  在我的服务器上，我使用以下方法初始化了一个裸存储库：`git --bare init myrepo.git`. 我服务器的 Git 配置文件说`core.bare = true`
2.  是否使用 Git 电子邮件指南进行设置以进行后期接收
3.  在我的客户端上，使用`git clone URL`. 在我的客户端上，Git 配置是`core.bare = false`.
4.  做了一些工作，添加了新文件，提交到本地 Git
5.  使用以下命令将更改推送到远程存储库：`git push origin master`它为完成的提交发出生成的 ref-id
6.  但我没有收到电子邮件；因此尝试在`hooks`目录中的服务器上运行接收后挂钩脚本`./post-receive <oldrev> <newrev> refs/heads/master`

不断返回以下错误：

> c9c047af 更新类型未知（提交）
> 未生成电子邮件

有什么线索可能是错的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:07:48.307

虽然我使用了分发`post-receive-email`脚本，但我在脚本中发现了一个奇怪的错误。在我的版本结束时`post-receive-email`说：

```
prep_for_email $2 $3 $1 && PAGER= generate_email 
```

应该是

```
prep_for_email $1 $2 $3 && PAGER= generate_email 
```

更改解决了我对`post-receive <oldrev> <newrev> <refname>`. 我希望这可以帮助其他可能面临它的人。

# iphone - 收到特定推送通知时，是否有任何方法可以“取消”或“拒绝”显示 AlertView？

> ID：11307923
> 
> 赞同：0
> 
> 时间：2012-07-03T09:18:27.290
> 
> 标签：iphone, ios, push-notification, apple-push-notifications

我有一个关于 APN（Apple Push Notification）的问题，如下所示；

## 问题

是否有任何方法可以“取消”或“拒绝”以显示`AlertView`何时`application:didReceiveRemoteNotification`调用该方法？

## 这个问题的背景

我正在开发具有 APN 功能的 iOS 应用程序。
此应用程序从我的提供商服务器接收推送消息。

提供商服务器发送以 3 种语言（英语、日语和中文）中的一种编写的各种文本消息。
此外，我的应用程序需要接收以设备选择的特定语言编写的消息，如下例所示；

*   如果您的设备选择“English”并且推送服务器发送“Check it out!”之类的英文消息，那么我的应用程序必须像往常一样显示该消息。
*   但是，如果您的设备收到日语短信，我的应用程序必须保持静音而不显示`AlertView`。
    在这种情况下，消息应仅显示在选择日语的 iOS 设备上。

我知道我们可以检查“loc-key”属性来检测语言，但我找不到“取消”显示AlertView 的方法。

于是我问了上面的问题。

如果您分享解决此问题的想法，我将不胜感激。谢谢，

秀彦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:21:27.050

这是可行的，但不是在 iphone 级别，它应该在服务器端完成，您需要将设备使用的语言发送到服务器，

例如设备 a 使用英语，设备 b 使用日语

现在，当您推送英文通知时，服务器将过滤掉所有日文设备

# ruby - 如何像在 Javascript 中一样在 Ruby 中动态创建对象及其方法？

> ID：11307926
> 
> 赞同：12
> 
> 时间：2012-07-03T09:18:30.430
> 
> 标签：ruby, object, methods

我最近发现在 Ruby 中动态创建对象和方法是一项艰巨的工作，这可能是因为我在 Javascript 方面的背景经验。

在 Javascript 中，您可以动态创建对象，其方法如下：

```
function somewhere_inside_my_code() {
  foo = {};
  foo.bar = function() { /** do something **/ };
}; 
```

在 Ruby 中完成上述语句的等效性如何（就像在 Javascript 中一样简单）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-03T09:33:34.393

您可以使用单例方法来实现这一点。请注意，您可以对所有对象执行此操作，例如：

```
str = "I like cookies!"

def str.piratize
  self + " Arrrr!"
end

puts str.piratize 
```

这将输出：

```
I like cookies! Arrrr! 
```

这些方法实际上只定义在这个单个对象上（因此得名），所以这段代码（在上述代码之后执行）：

```
str2 = "Cookies are great!"
puts str2.piratize 
```

只是抛出一个异常：

```
undefined method `piratize' for "Cookies are great!":String (NoMethodError) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-03T09:25:36.467

你可以这样做：

```
foo = Object.new

def foo.bar
  1+1
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-03T11:20:45.060

您可以尝试`OpenStruct`：[http](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/ostruct/rdoc/OpenStruct.html) ://www.ruby-doc.org/stdlib-1.9.3/libdoc/ostruct/rdoc/OpenStruct.html ，它在某些方面类似于 JavaScript，但只有属性，而不是方法。Ruby 和 JavaScript 对对象使用了太多不同的想法。

# gmail - 如何制作简单的 Gmail 聊天机器人？

> ID：11307927
> 
> 赞同：1
> 
> 时间：2012-07-03T09:18:31.827
> 
> 标签：gmail, chat, bots

我想做一个 gmail 聊天机器人。我什么都不知道。用什么语言，用什么软件？google app engine和eclipse可以用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:58:37.720

检查这两个链接，它肯定会帮助你[http://code.google.com/appengine/docs/java/xmpp](http://code.google.com/appengine/docs/java/xmpp)和[http://blog.appenginefan.com/2009/09/my-first-attempt-at -xmpp-in-java-app.html](http://blog.appenginefan.com/2009/09/my-first-attempt-at-xmpp-in-java-app.html)

# python - 在 python 代码中访问在 django 中创建的表时出错

> ID：11307928
> 
> 赞同：1
> 
> 时间：2012-07-03T09:18:31.473
> 
> 标签：python, django, linux, sqlite, ubuntu-10.04

现在在将路径写入 sys.path.insert(0,'/home/pooja/Desktop/mysite') 时，它运行良好，询问我要搜索的单词并给出此错误：

> 回溯（最近一次通话最后）：
> 
> 文件“call.py”，第 32 行，在
> 
> s.save()
> 
> 文件“/usr/local/lib/python2.6/dist-packages/django/db/models/base.py”，第 463 行，保存
> 
> self.save_base（使用=使用，force_insert=force_insert，force_update=force_update）
> 
> 文件“/usr/local/lib/python2.6/dist-packages/django/db/models/base.py”，第 524 行，在
> 
> 保存基地
> 
> manager.using(using).filter(pk=pk_val).exists()))：
> 
> 文件“/usr/local/lib/python2.6/dist-packages/django/db/models/query.py”，第 562 行，存在
> 
> 返回self.query.has_results（使用=self.db）
> 
> 文件“/usr/local/lib/python2.6/dist-packages/django/db/models/sql/query.py”，第 441 行，在 has_results
> 
> return bool(compiler.execute_sql(SINGLE))
> 
> 文件“/usr/local/lib/python2.6/dist-packages/django/db/models/sql/compiler.py”，第 818 行，在 execute_sql
> 
> cursor.execute（sql，参数）
> 
> 文件“/usr/local/lib/python2.6/dist-packages/django/db/backends/util.py”，第 40 行，在执行
> 
> 返回 self.cursor.execute(sql, params) 文件“/usr/local/lib/python2.6/dist-packages/django/db/backends/sqlite3/base.py”，第 337 行，在执行中返回 Database.Cursor .execute（自我，查询，参数）
> 
> django.db.utils.DatabaseError：没有这样的表：search_keywords

请帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:24:51.453

例外说：`no such table: search_keywords`，这是不言自明的，意味着没有具有这样名称的数据库表。所以：

1.  您可能正在使用 db 文件的相对路径`settings.py`，它会根据您执行脚本的位置解析为不同的 db。尝试使用绝对路径，看看是否有帮助。

2.  您尚未将模型与数据库同步。运行`manage.py syncdb`以生成数据库表。

# c++ - 全局指针由优化器解析 - 但引用不是 - 为什么？

> ID：11307929
> 
> 赞同：7
> 
> 时间：2012-07-03T09:18:33.057
> 
> 标签：c++, visual-studio-2010, pointers, reference

VS2010 优化器的全局指针和全局引用之间的最大区别是什么？为什么参考没有解决？

```
typedef unsigned char byte_t;
typedef unsigned short word_t;

struct byte_reg_t
{
  byte_t low;
  byte_t high;
};

union word_reg_t
{
  word_t value;
  byte_reg_t part;
};

word_reg_t r16;

byte_t& low_ref = r16.part.low;
byte_t* const low_ptr = &r16.part.low;

#define SPLIT() _asm nop;

int main()
{
  low_ref = 4;
  SPLIT()

  byte_t a = r16.part.low;
  SPLIT()

  byte_t b = low_ref;
  SPLIT()

  byte_t c = *low_ptr;
  SPLIT()

  return a+b+c;
} 
```

使用汇编输出在发布模式下编译产生这个结果

```
;byte_t a = r16.part.low;
mov cl, BYTE PTR ?r16@@3Tword_reg_t@@A

;byte_t b = low_ref;
mov edx, DWORD PTR ?low_ref@@3AAEA ; low_ref
mov dl, BYTE PTR [edx]

;byte_t c = *low_ptr;
mov al, BYTE PTR ?r16@@3Tword_reg_t@@A 
```

未经修改的拆卸

```
.text:00401000 _main           proc near               ; CODE XREF: __tmainCRTStartup+11D
.text:00401000                 mov     eax, ?low_ref@@3AAEA ; uchar & low_ref
.text:00401005                 mov     byte ptr [eax], 4
.text:00401008                 nop
.text:00401009                 mov     cl, ?r16@@3Tword_reg_t@@A ; word_reg_t r16
.text:0040100F                 nop
.text:00401010                 mov     edx, ?low_ref@@3AAEA ; uchar & low_ref
.text:00401016                 mov     dl, [edx]
.text:00401018                 nop
.text:00401019                 mov     al, ?r16@@3Tword_reg_t@@A ; word_reg_t r16
.text:0040101E                 nop
.text:0040101F                 movzx   eax, al
.text:00401022                 movzx   edx, dl
.text:00401025                 movzx   ecx, cl
.text:00401028                 add     eax, edx
.text:0040102A                 add     eax, ecx
.text:0040102C                 retn
.text:0040102C _main           endp

.data:00403374 ?r16@@3Tword_reg_t@@A db ?              ; DATA XREF: _main+9
.data:00403374                                         ; _main+19
.data:00403375                 align 4

.data:00403018 ; unsigned char & low_ref
.data:00403018 ?low_ref@@3AAEA dd offset ?r16@@3Tword_reg_t@@A ; DATA XREF: _main
.data:00403018                                         ; _main+10
.data:00403018                                         ; word_reg_t r16 
```

我测试了几个变体（从函数返回等） - 如果 low_ref 正在使用则无法解决

*   优化器傻吗？
*   一个不常见的优化案例？
*   一些 c/c++ 标准限制？

**更新**

这似乎是一个不常见的优化案例 - thx Michael Burr

如果引用在函数范围内 - 或者在函数范围内实例化的类或结构内，它就可以工作（但优化器解析 ptr const 但不解析引用仍然很奇怪 - 它们是 100% 相同的）

**更新 2**

更奇怪的是-如果您从 byte_t 切换到 int 两种解析都有效- const ptr 和 reference

*   全局 ptr const 到全局 byte_t var：已**解决**
*   全局 ptr const 到全局 int var：已**解决**
*   对全局 byte_t var 的全局引用：未**解决**
*   对全局 int var 的全局引用：已**解决**
*   对本地 byte_t var 的全局引用：已**解决**
*   对本地 int var 的全局引用：已**解决**

所以 ptr const 和引用的优化器、引用范围......和引用类型......有时有一点区别：）

**更新 3**

更简单的测试代码 - 使用 VS2010 和 clang 3.1 检查

```
typedef unsigned char byte_t;
typedef unsigned int dword_t;

//for msvc
#define SPLIT() _asm nop _asm nop;
//for clang
//#define SPLIT() asm("nop"); asm("nop");

byte_t byte;
dword_t dword;

byte_t& global_ref_byte = byte;
dword_t& global_ref_dword = dword;

byte_t* const global_ptrc_byte = &byte;
dword_t* const global_ptrc_dword = &dword;

int main(int argc, char** argv)
{
  byte_t& local_ref_byte = byte;
  dword_t& local_ref_dword = dword;

  dword_t random = (dword_t)argv;

  byte = (byte_t)random;
  dword = (dword_t)random;
  SPLIT()

  byte_t a = global_ref_byte;
  SPLIT()

  dword_t b = global_ref_dword;
  SPLIT()

  byte_t c = *global_ptrc_byte;
  SPLIT()

  dword_t d = *global_ptrc_dword;
  SPLIT()

  byte_t e = local_ref_byte;
  SPLIT()

  dword_t f = local_ref_dword;
  SPLIT()

  dword_t result = a+b+c+d+e+f;

  return result;
} 
```

VS2010拆解

```
.text:00401000 ; int __cdecl main(int argc, const char **argv, const char **envp)
.text:00401000 _main           proc near               ; CODE XREF: ___tmainCRTStartup+11D
.text:00401000
.text:00401000 argc            = dword ptr  8
.text:00401000 argv            = dword ptr  0Ch
.text:00401000 envp            = dword ptr  10h
.text:00401000
.text:00401000                 push    ebp
.text:00401001                 mov     ebp, esp
.text:00401003                 mov     eax, [ebp+argv]
.text:00401006                 push    ebx
.text:00401007                 push    esi
.text:00401008                 push    edi
.text:00401009                 mov     byte_403374, al
.text:0040100E                 mov     dword_403378, eax
.text:00401013                 nop
.text:00401014                 nop
.text:00401015                 mov     eax, off_40301C
.text:0040101A                 mov     al, [eax]
.text:0040101C                 nop
.text:0040101D                 nop
.text:0040101E                 mov     ecx, dword_403378
.text:00401024                 nop
.text:00401025                 nop
.text:00401026                 mov     dl, byte_403374
.text:0040102C                 nop
.text:0040102D                 nop
.text:0040102E                 mov     esi, dword_403378
.text:00401034                 nop
.text:00401035                 nop
.text:00401036                 mov     bl, byte_403374
.text:0040103C                 nop
.text:0040103D                 nop
.text:0040103E                 mov     edi, dword_403378
.text:00401044                 nop
.text:00401045                 nop
.text:00401046                 movzx   edx, dl
.text:00401049                 movzx   ebx, bl
.text:0040104C                 add     edx, edi
.text:0040104E                 movzx   eax, al
.text:00401051                 add     edx, ebx
.text:00401053                 add     eax, edx
.text:00401055                 pop     edi
.text:00401056                 add     eax, esi
.text:00401058                 pop     esi
.text:00401059                 add     eax, ecx
.text:0040105B                 pop     ebx
.text:0040105C                 pop     ebp
.text:0040105D                 retn
.text:0040105D _main           endp 
```

铿锵3.1反汇编

```
.text:004012E0 sub_4012E0      proc near               ; CODE XREF: sub_401020+91
.text:004012E0
.text:004012E0 arg_4           = dword ptr  0Ch
.text:004012E0
.text:004012E0                 push    ebp
.text:004012E1                 mov     ebp, esp
.text:004012E3                 call    sub_4014F0
.text:004012E8                 mov     eax, [ebp+arg_4]
.text:004012EB                 mov     byte_402000, al
.text:004012F0                 mov     dword_402004, eax
.text:004012F5                 nop
.text:004012F6                 nop
.text:004012F7                 movzx   eax, byte_402000
.text:004012FE                 nop
.text:004012FF                 nop
.text:00401300                 add     eax, dword_402004
.text:00401306                 nop
.text:00401307                 nop
.text:00401308                 movzx   ecx, byte_402000
.text:0040130F                 add     ecx, eax
.text:00401311                 nop
.text:00401312                 nop
.text:00401313                 add     ecx, dword_402004
.text:00401319                 nop
.text:0040131A                 nop
.text:0040131B                 movzx   eax, byte_402000
.text:00401322                 add     eax, ecx
.text:00401324                 nop
.text:00401325                 nop
.text:00401326                 add     eax, dword_402004
.text:0040132C                 nop
.text:0040132D                 nop
.text:0040132E                 pop     ebp
.text:0040132F                 retn
.text:0040132F sub_4012E0      endp 
```

没有 nops，两个优化器都可以生成更好的代码 - 但 clang 仍然更好

VS2010（更多代码，因为未解析的字节引用）

```
.text:00401003                 mov     eax, [ebp+argv]
.text:00401006                 movzx   ecx, al
.text:00401009                 lea     edx, [eax+eax*2]
.text:0040100C                 mov     byte_403374, al
.text:00401011                 mov     dword_403378, eax
.text:00401016                 lea     eax, [edx+ecx*2]
.text:00401019                 mov     ecx, off_40301C
.text:0040101F                 movzx   edx, byte ptr [ecx]
.text:00401022                 add     eax, edx 
```

铿锵3.1：

```
.text:004012E8                 mov     eax, [ebp+arg_4]
.text:004012EB                 mov     byte_402000, al
.text:004012F0                 mov     dword_402004, eax
.text:004012F5                 movzx   ecx, al
.text:004012F8                 add     ecx, eax
.text:004012FA                 lea     eax, [ecx+ecx*2] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T15:31:36.473

这就是我认为正在发生的事情。该引用被视为类似于非常量全局指针。如果您`const`从`low_ptr`声明中删除 ，您可以看到这一点。

您还可以看到，如果您将引用移动到函数的本地，编译器能够毫无问题地优化通过它的访问。

我猜想，由于全局引用非常罕见（我承认我只是编造了一个“统计数据”），因此几乎没有努力优化它们。

# xslt - 后删除空格 文本节点 XSLT 中的标记

> ID：11307930
> 
> 赞同：1
> 
> 时间：2012-07-03T09:18:33.500
> 
> 标签：xslt, xslt-2.0, space

我目前有一个正在使用的 XML 提要，其中我有一个节点，其中包含一堆带有`<p>`标签的文本。然而，在每个标签之后似乎都有一个导致问题的空间。示例 XML 文档如下：

```
<Text>
<p> Sample Text.</p> <p> Sample Text..</p> <p> Sample Text.</p> <p> Sample Text.</p> <p> Sample Text.</p>
</Text> 
```

我想通过删除每个`<p>`标签开头的空格将“文本”节点中的数据转换为如下所示。

```
<Text>
<p>Sample Text.</p> <p>Sample Text.</p> <p>Sample Text.</p> <p>Sample Text.</p> <p>Sample Text.</p>
</Text> 
```

谁能帮我解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T12:42:10.610

***I. 去除任意数量*连续空格的起始组的非递归 XSLT 1.0 解决方案**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="p/text()">
  <xsl:value-of select=
   "substring-after
     (.,
      substring-before
        (.,
         substring
           (translate(., ' ', ''), 1, 1)
         )
      )"/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<Text>
    <p> Sample Text.</p> <p> Sample Text..</p> <p> Sample Text.</p> <p> Sample Text.</p> <p> Sample Text.</p>
</Text> 
```

**产生了想要的正确结果：**

```
<Text>
    <p>Sample Text.</p> <p>Sample Text..</p> <p>Sample Text.</p> <p>Sample Text.</p> <p>Sample Text.</p>
</Text> 
```

**说明**：

这个想法是：

1.  获取第一个非空格字符。

2.  获取该字符前面的空格字符串（在1.中获得）。

3.  获取紧跟在该空格字符串之后的字符串（在 2\. 中获得）。

* * *

**二、XSLT 2.0 解决方案**：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="p/text()">
  <xsl:sequence select="replace(., '^\s+(.+)$', '$1')"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于同一个 XML 文档（如上）时，会产生相同的正确结果**：

```
<Text>
    <p>Sample Text.</p> <p>Sample Text..</p> <p>Sample Text.</p> <p>Sample Text.</p> <p>Sample Text.</p>
</Text> 
```

**请注意**：

Martin Honnen 建议使用：

```
replace(., '^\s+', '') 
```

虽然这比：

```
replace(., '^\s+(.+)$', '$1') 
```

后者效率更高，因为它只进行一次替换，而前者通常执行许多单独的替换。

**更新**：OP 无法使用 XSLT 2.0 解决方案，他在评论中写道：

> 我现在在想，看起来是一个空格的东西实际上可能是一个标签，我将如何检查它然后删除它？

解决方案就是使用：

```
replace(., '^[\s&#9;&#10;&#13;]+(.+)$', '$1') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T09:30:42.463

使用身份转换模板

```
<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template> 
```

加上元素的第一个子`p`元素的模板

```
<xsl:template match="p/text()[1]">
  <xsl:value-of select="substring(., 2)"/>
</xsl:template> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T09:34:03.477

这个模板：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:template match="node() | @*">
    <xsl:copy>
      <xsl:apply-templates select="node() | @*" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="Text/p/text()[1]">
    <xsl:call-template name="ltrim" />
  </xsl:template>

  <xsl:template name="ltrim">
    <xsl:param name="start" select="1" />

    <xsl:choose>
      <xsl:when test="substring(., $start, 1) = ' '">
        <xsl:call-template name="ltrim">
          <xsl:with-param name="start" select="$start + 1" />
        </xsl:call-template>
      </xsl:when>
      <xsl:otherwise>
        <xsl:value-of select="substring(., $start)" />
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

</xsl:stylesheet> 
```

`<p>`仅左修剪标签内容开头的任何空格。

它只留下所有其他空白。对于您的 XML，它返回：

```
<Text>
<p>Sample Text.</p> <p>Sample Text.</p> <p>Sample Text.</p> <p>Sample Text.</p> <p>Sample Text.</p>
</Text> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-03T09:27:00.480

尝试以下 XSLT

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes" />
    <xsl:template match="node()">
        <xsl:copy>
            <xsl:apply-templates />
        </xsl:copy>
    </xsl:template>

    <xsl:template match="text()">
        <xsl:value-of select="normalize-space(.)" />
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-03T09:19:47.400

使用简单的搜索替换实用程序：[http ://www.rjlsoftware.com/software/utility/search/](http://www.rjlsoftware.com/software/utility/search/)

# javascript - 选择“其他”时下拉添加输入

> ID：11307938
> 
> 赞同：2
> 
> 时间：2012-07-03T09:18:57.963
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3.1, simple-form

我的表单中有一个下拉菜单，需要在选择“其他”时呈现新的文本输入。我试图用以下方法做到这一点无济于事：

**导轨视图**

```
 <div class ="testinputs"
      <li><%= o.input :name, :as => :select, :collection => [:Anniversary, :Birthday, :Graduation, :Holiday, :'Mothers day', :'Fathers day', :'Valentines day', :Wedding, :other ]%></li>
       <%= o.input :name, :as => :hidden %>
  </div> 
```

**jQuery**

```
$(function() {
    $("#testinputs").change(function() {
        var val = $(this).val();
        if(val == 'other') {
            $('input[name="occasion[name]"]').show();
        } else {
            $('input[name="occasion[name]"]').hide();
        }
    }).change();
}); 
```

我的表单呈现的**HTML ：**

```
<div class="testinputs" <li=""><div class="control-group select required"><label class="select required control-label" for="occasion_name"><abbr title="required">*</abbr> Name</label><div class="controls"><select class="select required" id="occasion_name" name="occasion[name]"><option value=""></option>
    <option value="Valentines day">Valentines day</option>
    <option value="Wedding">Wedding</option>
    <option value="other">other</option></select></div></div>
        <div class="control-group hidden"><div class="controls"><input class="hidden" id="occasion_name" name="occasion[name]" type="hidden"></div></div>
      </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T09:22:25.503

我相信您将输入呈现为 type="hidden" 这意味着它不会显示，即使您通过 JS 显示它也是如此。

使用普通文本输入，通过 css/js 将其隐藏，然后显示。

# c++ - 使用 boost-spirit 解析 ipv4 地址

> ID：11307940
> 
> 赞同：1
> 
> 时间：2012-07-03T09:19:01.597
> 
> 标签：c++, boost-spirit, boost-spirit-qi

我想使用 boost::spirit 来解析 ipv4 地址。这是我尝试做的事情：

```
#include <string>
#include <string.h>
#include <iostream>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix_core.hpp>
#include <boost/spirit/include/phoenix_operator.hpp>

struct Ipv4 { union { uint32_t as_int; uint8_t as_char[4]; } raw; };

Ipv4 make_ipv4(uint8_t i1, uint8_t i2, uint8_t i3, uint8_t i4) {
    Ipv4 ip;
    ip.raw.as_char[0] = i1; ip.raw.as_char[1] = i2;
    ip.raw.as_char[2] = i3; ip.raw.as_char[3] = i4;
    return ip;
}

namespace qi = boost::spirit::qi;
qi::uint_parser<uint8_t, 10, 1, 3> octet;

struct Ipv4Address : qi::grammar<const char *, Ipv4()> {
    Ipv4Address() : Ipv4Address::base_type(start) {
        start = ( octet >> qi::lit('.') >> octet >> qi::lit('.') >>
                  octet >> qi::lit('.') >> octet
                ) [
                    //qi::_val = make_ipv4(1, 2, 3, 4) // working
                    qi::_val = make_ipv4(qi::_1, qi::_2, qi::_3, qi::_4) // compile error
                ]
        ;
    }
    qi::rule<const char *, Ipv4()> start;
} ipv4_address;

int main() {
    Ipv4 ip;
    const char * s = "1.2.3.4";
    bool r = qi::parse(s, s+strlen(s), ipv4_address, ip);
    std::cout << r << " " << (int)ip.raw.as_char[0] << "." <<
                             (int)ip.raw.as_char[1] << "." <<
                             (int)ip.raw.as_char[2] << "." <<
                             (int)ip.raw.as_char[3] << std::endl;
} 
```

编译时出现以下编译错误：

/tmp/ip.cxx：在构造函数“Ipv4Address::Ipv4Address()”中：/tmp/ip.cxx:26:72：错误：无法将“const _1_type {aka const boost::phoenix::actor >}”转换为'uint8_t {aka unsigned char}' 用于参数 '1' 到 'Ipv4 make_ipv4(uint8_t, uint8_t, uint8_t, uint8_t)'

有什么提示吗？

这是做到这一点的“正确”方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T13:10:17.683

您需要使用`bind`懒惰地绑定语义动作中的函数：

```
namespace qi = boost::spirit::qi;
namespace phx = boost::phoenix;
qi::uint_parser<uint8_t, 10, 1, 3> octet;

struct Ipv4Address : qi::grammar<const char *, Ipv4()> {
    Ipv4Address() : Ipv4Address::base_type(start) {
        start = ( octet >> qi::lit('.') >> octet >> qi::lit('.') >>
                  octet >> qi::lit('.') >> octet
                ) [
                    qi::_val = phx::bind(make_ipv4, qi::_1, qi::_2, qi::_3, qi::_4)
                ]
        ;
    }
    qi::rule<const char *, Ipv4()> start;
} ipv4_address; 
```

完整样本：

```
#include <string>
#include <string.h>
#include <iostream>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>

struct Ipv4 { union { uint32_t as_int; uint8_t as_char[4]; } raw; };

Ipv4 make_ipv4(uint8_t i1, uint8_t i2, uint8_t i3, uint8_t i4) {
    Ipv4 ip;
    ip.raw.as_char[0] = i1; ip.raw.as_char[1] = i2;
    ip.raw.as_char[2] = i3; ip.raw.as_char[3] = i4;
    return ip;
}

namespace qi = boost::spirit::qi;
namespace phx = boost::phoenix;
qi::uint_parser<uint8_t, 10, 1, 3> octet;

struct Ipv4Address : qi::grammar<const char *, Ipv4()> {
    Ipv4Address() : Ipv4Address::base_type(start) {
        start = ( octet >> qi::lit('.') >> octet >> qi::lit('.') >>
                  octet >> qi::lit('.') >> octet
                ) [
                    qi::_val = phx::bind(make_ipv4, qi::_1, qi::_2, qi::_3, qi::_4)
                ]
        ;
    }
    qi::rule<const char *, Ipv4()> start;
} ipv4_address;

int main() {
    Ipv4 ip;
    const char * s = "1.2.3.4";
    bool r = qi::parse(s, s+strlen(s), ipv4_address, ip);
    std::cout << r << " " << (int)ip.raw.as_char[0] << "." <<
                             (int)ip.raw.as_char[1] << "." <<
                             (int)ip.raw.as_char[2] << "." <<
                             (int)ip.raw.as_char[3] << std::endl;
} 
```

# python - Python：从 multiprocess.Process 产生的两个线程之间共享变量

> ID：11307946
> 
> 赞同：2
> 
> 时间：2012-07-03T09:19:13.933
> 
> 标签：python, multithreading, variables, multiprocessing, sharing

Python 3.1.2

*我在multiprocessing.Process*产生的两个线程之间共享变量时遇到问题。这是一个简单的布尔变量，它应该确定线程是否应该运行或应该停止执行。下面是在三种情况下显示的简化代码（但使用与我的原始代码相同的机制）：

1.  threading.Thread 类型和 self.is_running bool 类型的主类beeing [工作正常]。
2.  multiprocess.Process 类型和 self.is_running bool 类型的主类beeing [不工作。子线程拥有 self.is_running 的本地副本，而不是共享它]。
3.  multiprocess.Process 类型和 self.is_running 的主类beeing 是 multiprocessing.Value("b", True) [工作正常] 类型。

我想了解为什么它以这种方式而不是另一种方式工作。（即为什么第 2 点没有像我假设的那样工作）。

测试是从 python 的解释器完成的：

```
from testclass import *

d = TestClass()
d.start()
d.stop() 
```

## 以下是第 1 点的示例：

```
import threading
import time
import queue
import multiprocessing

class TestClass(threading.Thread):
def __init__(self):
    threading.Thread.__init__(self)
    self.q = queue.Queue(10)
    self.is_running = True
    self.sema = threading.Semaphore()

def isRunning(self):
    self.sema.acquire()
    print ("Am I running?", self.is_running)
    z = self.is_running
    self.sema.release()
    return z

def stop(self):
    self.sema.acquire()
    self.is_running = False
    print("STOPPING")
    self.sema.release()

def reader(self):
    while self.isRunning():
        print("R] Reading!")
        try:
            data = self.q.get(timeout=1)
        except:
            print("R] NO DATA!")
        else:
            print("R] Read: ", data)
def writer(self):
    while self.isRunning():
        print("W] Writing!")
        self.q.put(time.time())
        time.sleep(2)

def run(self):
    tr = threading.Thread(target=self.reader)
    tw = threading.Thread(target=self.writer)
    tr.start()
    tw.start()
    tr.join()
    tw.join() 
```

* * *

## 第 2 点的示例：

```
import threading
import time
import queue
import multiprocessing

class Test(multiprocessing.Process):
def __init__(self):
    multiprocessing.Process.__init__(self)
    self.q = queue.Queue(10)
    self.is_running = True
    self.sema = threading.Semaphore()

def isRunning(self):
    self.sema.acquire()
    print ("Am I running?", self.is_running)
    z = self.is_running
    self.sema.release()
    return z

def stop(self):
    self.sema.acquire()
    self.is_running = False
    print("STOPPING")
    self.sema.release()

def reader(self):
    while self.isRunning():
        print("R] Reading!")
        try:
            data = self.q.get(timeout=1)
        except:
            print("R] NO DATA!")
        else:
            print("R] Read: ", data)
def writer(self):
    while self.isRunning():
        print("W] Writing!")
        self.q.put(time.time())
        time.sleep(2)

def run(self):
    tr = threading.Thread(target=self.reader)
    tw = threading.Thread(target=self.writer)
    tr.start()
    tw.start()
    tr.join()
    tw.join() 
```

* * *

## 第 3 点的示例：

```
import threading
import time
import queue
import multiprocessing

class TestClass(multiprocessing.Process):
def __init__(self):
    multiprocessing.Process.__init__(self)
    self.q = queue.Queue(10)
    self.is_running = multiprocessing.Value("b", True)
    self.sema = threading.Semaphore()

def isRunning(self):
    self.sema.acquire()
    print ("Am I running?", self.is_running)
    z = self.is_running.value
    self.sema.release()
    return z

def stop(self):
    self.sema.acquire()
    self.is_running.value = False
    print("STOPPING")
    self.sema.release()

def reader(self):
    while self.isRunning():
        print("R] Reading!")
        try:
            data = self.q.get(timeout=1)
        except:
            print("R] NO DATA!")
        else:
            print("R] Read: ", data)
def writer(self):
    while self.isRunning():
        print("W] Writing!")
        self.q.put(time.time())
        time.sleep(2)

def run(self):
    tr = threading.Thread(target=self.reader)
    tw = threading.Thread(target=self.writer)
    tr.start()
    tw.start()
    tr.join()
    tw.join() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T10:43:55.583

线程都是同一个进程的一部分，所以它们共享内存。另一个后果是线程不能被不同的 cpu 精确地同时执行，因为一个进程只能被一个 cpu 拾取。

进程有独立的内存空间。一个 cpu 可以运行一个进程，而另一个 cpu 可以同时运行另一个进程。需要特殊的结构来让流程合作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T16:15:36.767

在第 2 点中，父进程和子进程都有自己的`is_running`. 当你调用`stop()`父进程时，它只`is_running`在父进程中修改，而不在子进程中修改。[multiprocessing.Value](http://docs.python.org/library/multiprocessing.html#multiprocessing.Value)起作用的原因是它的内存在两个进程之间共享。

如果您想要一个进程感知队列，请使用[multiprocessing.Queue](http://docs.python.org/library/multiprocessing.html#multiprocessing.Queue)。

# objective-c - iOS 无法识别的选择器发送到实例 0x45e8

> ID：11307950
> 
> 赞同：0
> 
> 时间：2012-07-03T09:19:27.993
> 
> 标签：objective-c, ios, unrecognized-selector

下面是我尝试加密数据的代码

输入/调用我的加密方法：

```
[self myED:@"wcc123" :@"hahaha" :@"yyyy"];

- (NSData*) myED:(NSData*)data :(NSData*) key :(NSData*)iv{

    @try {
        // Try something
        NSLog( @"Original String: %@", data );

        size_t bufferSize = [data length]*2;
        void *buffer = malloc(bufferSize);
        size_t encryptedSize = 0;    
        CCCryptorStatus cryptStatus = CCCrypt(kCCEncrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,                                          
                                              [key bytes], [key length], [iv bytes], [data bytes], [data length],                                          
                                              buffer, bufferSize, &encryptedSize);  
    }
    @catch (NSException * e) {
        NSLog(@"Exception: %@", e); 
    }
    @finally {
        // Added to show finally works as well
    }

    return nil;

} 
```

但是，当尝试运行此代码时，它会在下面提示我异常

> 2012-07-03 16:52:44.776 wccTest[930:f803] 异常：-[__NSCFConstantString 字节]：

任何人都可以对此提供帮助/建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:23:58.663

您的方法期望`NSData`，并且您正在传递`NSString`s。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-03T09:26:57.643

代替

```
[self myED:@"wcc123" :@"hahaha" :@"yyyy"]; 
```

试着打电话

```
[self myED:[@"wcc123" dataUsingEncoding:NSUTF8StringEncoding] :[@"hahaha" dataUsingEncoding:NSUTF8StringEncoding] :[@"yyyy" dataUsingEncoding:NSUTF8StringEncoding]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T10:36:55.837

在@borrrden 评论之后，我还将为您的方法提供一个不言自明的名称。例如：

```
- (NSData*)encryptEDData:(NSData*)data withKey:(NSData*)key initVector:(NSData*)iv {
    // same as before
} 
```

因此，`selector`此方法的`encryptEDData:withKey:initVector:`.

您可以像这样调用该方法：

```
NSData* edData = //...
NSData* keyData = //...
NSData* ivData = //...
[self encryptEDData:edData withKey:keyData initVector:ivData]; 
```

此外，我会在方法中执行`NSString`to`NSData`转换，让它接受字符串。我认为它可以更好地理解该方法的目标。

希望有帮助。

# javascript - mobiscroll onShow 不执行方法

> ID：11307955
> 
> 赞同：0
> 
> 时间：2012-07-03T09:19:43.773
> 
> 标签：javascript, jquery, mobiscroll

我很难让 Mobiscroll 触发 onShow 事件中记录的任何方法。这是我的代码：

```
 var scrollerVals = $('#select').scroller({
        theme: 'default',
        display: 'inline',
        mode: 'scroller',
        wheels: 
            [{
                'Time': { night: 'Night', day: 'Day' }, 
            }, 
            {
                'Place': { bar: 'Bar', club: 'Club', store: 'Store', cafe: 'Cafe' }, 
            }, 
            {
                'Size': { 1: '1', 2: '2', 3: '3' }, 
            }],
        onChange: function(valueText, inst) {
            scrollerVals = inst.temp;
        },
        onShow: function() {
            $(this).scroller('setValue', ["night", "club", "1"]);
        }
    }); 
```

onChange 事件工作正常，我验证了 onShow 事件正在按应有的方式触发；但由于某种原因，我无法让 setValue 线工作。数组的初始值保持未定义（直到我改变轮子，它触发 onChange 事件并定义数组）。我试过onShow中的'hide'方法，也不管用。但是，当我将行移动到 onChange 事件时，完全相同的 hide 方法可以正常工作。所以我一头雾水。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:42:16.463

查看这个 jsFiddle 的解决方案[http://jsfiddle.net/kovlex/Kapye/1/](http://jsfiddle.net/kovlex/Kapye/1/)

# tfs - TFS 门控签到突然拒绝

> ID：11307956
> 
> 赞同：0
> 
> 时间：2012-07-03T09:19:44.250
> 
> 标签：tfs

我的门控签入构建定义在一个月内运行良好，但突然它无缘无故地停止提交任何东西。

![构建日志](../Images/be61fd64cbc0b59fb2768e885503e6c0.png)

[我在 MSDN](http://social.msdn.microsoft.com/Forums/pl-PL/tfsbuild/thread/2f2c29fc-ec7c-4dca-9ed6-6a8e46656d26)发现了同样的问题，但就我而言，根本没有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:55:19.837

我发现了一个问题：一个`[ClassCleanup]`方法抛出了异常。所以所有的测试都通过了，但是整个构建失败了。因此，构建被标记为“部分成功”（门控签入被拒绝），但在构建日志中您找不到任何错误或警告标记。

# lotus-notes - 复制时我的视图设置不同步

> ID：11307962
> 
> 赞同：1
> 
> 时间：2012-07-03T09:20:05.403
> 
> 标签：lotus-notes, database-replication

我在本地有副本。我更改了颜色、字体、视图样式{网格、更改颜色和行距}等设计。但是除了视图之外，形式和其他设计元素的变化都发生了变化。请告诉为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T20:19:22.663

检查该视图是否为常规“共享”视图，未标记为“共享，首次使用时私有”。

嗯....我实际上没有看到在 Domino Designer 的任何属性对话框中检查它的方法。您只能在创建视图时设置类型。唯一的线索是查看视图列表时出现在视图名称旁边的钥匙图标。

# sql - oracle连接多行

> ID：11307968
> 
> 赞同：2
> 
> 时间：2012-07-03T09:20:31.190
> 
> 标签：sql, oracle, sql-tuning

我有两张表，一张包含 ID <-> 名称映射，另一张表包含多个 ID 列。要列出第二个表的记录以及相应的 ID 名称，我有一个类似的查询

```
SELECT 
 (SELECT NAME FROM TAB2 WHERE ID = ID1 ),
 (SELECT NAME FROM TAB2 WHERE ID = ID2),
 .
 .
 .
FROM TAB1 
```

这是唯一的方法吗？因为为每一行的每个 ID 列查询第二个表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:27:39.210

您可以尝试这种方法：

```
select t1.*
from Table1 t1
join Table2 t2 on t1.id=t2.id1 OR t1.id=t2.id2 OR t1.id=t2.id3 
```

`Table1`存在的每一行的`Table2`任何 id 都与 的 匹配的`Table1`行将被返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T19:29:56.767

作为一种选择，您可以尝试像这样重写您的查询：

```
SELECT 
 b1.NAME,
 b2.NAME,
 .
 .
 .
FROM TAB1 a
INNER JOIN TAB2 b1 ON a.ID1 = b1.ID
INNER JOIN TAB2 b2 ON a.ID1 = b1.ID
... 
```

这在效率方面几乎不会产生任何影响，但至少可以使您的查询更具可读性（当然这是主观的）。

可能还有另一种选择需要考虑，但我不确定有两个大的 IF：它是否完全适用于您的情况，以及它是否更有效。

第一个取决于是否存在`TAB1`. 如果没有专用的键列，只要保证 的所有组合都是唯一的就足够了。并且这种方法是否比您的多次查找更有效取决于列的数量。`(ID1, IF2, ... ID*N*)``IDx`

这个想法是在类似于[@dasblinkenlight 的答案](https://stackoverflow.com/a/11308073/297408)中的条件下仅加入两个表一次，然后按键列分组并使用条件聚合提取名称。这就是我的意思：

```
SELECT
  MAX(CASE TAB2.ID WHEN TAB1.ID1 THEN TAB2.NAME END) AS NAME1,
  MAX(CASE TAB2.ID WHEN TAB1.ID2 THEN TAB2.NAME END) AS NAME2,
  .
  .
  .
FROM TAB1
INNER JOIN TAB2 ON TAB2.ID IN (TAB1.ID1, TAB1.ID2, ...)
GROUP BY TAB1.ID1, TAB1.ID2, ... 
```

# c# - asp.net EPPlus PageRequestManagerParserErrorException 错误

> ID：11307971
> 
> 赞同：1
> 
> 时间：2012-07-03T09:20:45.583
> 
> 标签：c#, asp.net, excel, epplus

我有一个带有动态创建表的 UpdatePanel，我正在尝试将保存流用作 EPPlus 的 excel 函数。`SaveToExcel()`但是，当我调用我的方法时，我不断收到错误消息。

如果我将它放在一个空的网站中，该方法可以正常工作，所以我相信它与回发/更新面板有关。

错误：

```
Microsoft JScript runtime error: Sys.WebForms.PageRequestManagerParserErrorException: The message received from the server could not be parsed. 
```

导致[动态]错误的代码：

```
function Sys$WebForms$PageRequestManager$_endPostBack(error, executor, data) {
        if (this._request === executor.get_webRequest()) {
            this._processingRequest = false;
            this._additionalInput = null;
            this._request = null;
        }
        var handler = this._get_eventHandlerList().getHandler("endRequest");
        var errorHandled = false;
        if (handler) {
            var eventArgs = new Sys.WebForms.EndRequestEventArgs(error, data ? data.dataItems : {}, executor);
            handler(this, eventArgs);
            errorHandled = eventArgs.get_errorHandled();
        }
        if (error && !errorHandled) {
            throw error;
        }
    } 
```

这就是我结束我的`SaveToExcel()`方法的方式：

```
Response.Clear();
Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
Response.AddHeader("content-disposition", "attachment;  filename=Bulk Swap HDDs.xlsx");
package.SaveAs(Response.OutputStream);
Response.End(); 
```

有什么很明显的我想念的吗？如果我将它`SaveToExcel`放入另一个 aspx 页面并只做一个`PostBackUrl="~/SaveToExcel.aspx"`，它也可以正常工作（但是我的提交按钮崩溃了）。

# javascript - JavaScript/jQuery 一步一步的注册表单

> ID：11307974
> 
> 赞同：-4
> 
> 时间：2012-07-03T09:21:17.243
> 
> 标签：javascript

是否有用于创建分步表单的 JavaScript/jQuery 库？如果它有一些动画步骤会更好。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:25:46.880

也许你应该寻找一个[jQuery](http://en.wikipedia.org/wiki/JQuery)插件而不是它的框架。这是一个很好的动画表单注册演示：[http ://demos.9lessons.info/slidereg/demo.html](http://demos.9lessons.info/slidereg/demo.html)

教程：*[使用 jQuery 的重力注册表单](http://www.9lessons.info/2011/01/gravity-registration-form-with-jquery.html)*

还有一个不错的 jQuery 插件，它可能会有所帮助，*[jQuery Form Plugin](http://malsup.com/jquery/form/)*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T09:26:26.377

[http://thecodemine.org/](http://thecodemine.org/) 一步一步你是指这种事情吗？

# image - 在 iOS 5 中为 UIButton 的不同状态设置不同的 imageEdgeInsets

> ID：11307978
> 
> 赞同：3
> 
> 时间：2012-07-03T09:21:24.693
> 
> 标签：image, ios5, uibutton

如何为 UIButton 的不同状态设置不同的 imageEdgeInsets ？例如

```
 // For UIControlStateHighlighted state
UIEdgeInsets checkedImageInsets = UIEdgeInsetsMake(-1, -10, -90, -50);
cell.firstElementButton.imageEdgeInsets = checkedImageInsets;
[cell.firstElementButton setImage:[UIImage imageNamed:CHECKBOX_CHECKED_IMAGE] forState:UIControlStateHighlighted];

// For UIControlStateNormal state
UIEdgeInsets uncheckedImageInsets = UIEdgeInsetsMake(-1, -50, -10, -50);
cell.firstElementButton.imageEdgeInsets = uncheckedImageInsets;
[cell.firstElementButton setImage:[UIImage imageNamed:CHECKBOX_UNCHECKED_IMAGE] forState:UIControlStateNormal]; 
```

有人知道吗？谢谢

# mysql - mysql子查询或加入

> ID：11307982
> 
> 赞同：0
> 
> 时间：2012-07-03T09:21:46.557
> 
> 标签：mysql, linux

我的 Mysql 数据库中有 5 个表，其中 t1 具有字段名称，如 data、id、cool 和 4 个其他表，其 id 和数据为 t2、t3、t4、t5。

我已经使用了联接和子查询，但我得到的结果是空的，它不是强制性的，t2、t3、t4、t5 表中的所有字段都已填充。t4、t5、t3、t2 可以为空我正在使用 where 子句on data 如果 t1 = t2 = t3 = t4 = t5 的数据列如果它在任何表中找到任何匹配的数据，它会打印来自 t1 和 id 的酷以及找到的表中的数据（如果有），如果发现所有数据都匹配表格它打印所有表格统计信息，例如

```
cool data.t1 id.t1
cool data.t2 id.t2 
and so on

table t1

cool data id
0    xyz   1

table t2

data id
xyz   5

table t3

data id
xyz   4

table t4

data id
xyz   3

table t5

data id
xyz   2 
```

期望的输出

```
cool data id
  0   xyz  1
  0   xyz  4
  0   xyz  3
  0   xyz  5
  0   xyz  2 
```

如果任何一个表是空的说 t5 和 t4 比输出应该是

```
 cool data id
  0   xyz  1
  0   xyz  4
  0   xyz  3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T09:31:40.763

我从这个问题中了解到的是，您需要从表中`t1`获取所有其他表的数据，以获取相应表中所有匹配`data`和`id`列的数据。

一个简单的实现方法是将每个表`t1`单独连接起来，然后用于`union all`组合所有结果。

```
SELECT t1.cool, t2.data, t2.id
FROM t1 INNER JOIN t2 ON (t1.id=t2.id) AND (t1.data=t2.data)
UNION ALL
SELECT t1.cool, t3.data, t3.id
FROM t1 INNER JOIN t3 ON (t1.id=t3.id) AND (t1.data=t3.data)
UNION ALL
SELECT t1.cool, t4.data, t4.id
FROM t1 INNER JOIN t4 ON (t1.id=t4.id) AND (t1.data=t4.data)
UNION ALL
SELECT t1.cool, t5.data, t5.id
FROM t1 INNER JOIN t5 ON (t1.id=t5.id) AND (t1.data=t5.data) 
```

* * *

从您的示例中，很有可能存在重复记录要过滤掉它们，请像这样使用 distinct -

```
SELECT DISTINCT cool, data, id
FROM
(
-- above query here
) 
```

# c++ - 计算矩阵的秩

> ID：11307983
> 
> 赞同：2
> 
> 时间：2012-07-03T09:21:51.567
> 
> 标签：c++, c, matrix, rank

我需要计算 4096x4096 稀疏矩阵的秩，并且我使用 C/C++ 代码。我找到了一些图书馆（如犰狳），但它们太慢了（几乎 5 分钟）。

我还尝试了两个开源版本的 Matlab（Freemat 和 Octave），但是当我尝试使用脚本进行测试时都崩溃了。

5 分钟不算多，但我必须从一百万个矩阵中获得排名，所以越快越好。

有人知道用于排名计算的快速库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T19:25:28.080

试试下面的代码（文档在这里）。这是一个用 Eigen 库计算矩阵 A 秩的例子：

```
MatrixXd A(2,2);
A << 1 , 0, 1, 0;
FullPivLU<MatrixXd> luA(A);
int rank = luA.rank(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T18:21:03.807

[Eigen](http://eigen.tuxfamily.org/)库支持稀疏矩阵，试试吧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T18:28:03.580

计算代数秩是 O(n^3)，其中 n 是矩阵大小，所以它本质上很慢。你需要例如。执行旋转，如果您的矩阵条件不佳（对于 n = 4096，典型的矩阵*条件非常恶劣*），这将是缓慢且不准确的。

现在，排名是多少？它是图像的维度。当 n 很大时，计算起来非常困难，并且输入的任何小的数值不准确性都会破坏它。对于 n = 4096，除非您碰巧有特别好的条件矩阵，否则这将阻止您使用旋转算法做任何有用的事情。

最好的方法实际上是修复一个截止 epsilon，计算奇异值 s_1 > ... > s_n 并将最小整数 r 作为秩，使得 sum(s_i^2, i > r) < epsilon^2 * sum (s_i^2)。

因此，您需要一个稀疏的 SVD 例程，例如。从[那里](http://tedlab.mit.edu/~dr/SVDLIBC/)。

这可能不会更快，但至少它是**正确**的。

您可以要求加快速度所需的较少奇异值。这是一个棘手的问题，没有关于背景的信息以及您如何获得这些矩阵，我们无能为力。

# c++ - 如何将此代码从 Dijkstra 转换为 Astar？

> ID：11307984
> 
> 赞同：2
> 
> 时间：2012-07-03T09:21:58.250
> 
> 标签：c++, dijkstra, a-star

所以我有一个项目，由于速度原因，我想切换到 Astar。

但 C++ 不是我的强项。谁能帮我（或告诉我怎么做..）将算法从 Dijkstra 转换为 Astar？

我发现了这个 Astar 实现： [http ://code.google.com/p/a-star-algorithm-implementation/](http://code.google.com/p/a-star-algorithm-implementation/)

但我不知道如何将它与我现有的代码一起使用。

这是得到算法的图形文件：

```
#include "Graph.h"
#include <iostream>
#include <algorithm>
#include <stack>

Graph::Graph(void)
{
}

Graph::~Graph(void)
{
    while(!mNodes.empty())
    {
        delete mNodes.back();
        mNodes.pop_back();
    }
}

void Graph::addNode(int name, bool exists, Node** NodeID )
{
    Node* pStart = NULL;
    mNodes.push_back(new Node(name,exists));
    std::vector<Node*>::iterator itr;
    itr = mNodes.begin()+mNodes.size()-1;
    pStart = (*itr);
    if(exists == true)pStart->DoesExist_yes();
    *NodeID = pStart;
}

void Graph::connect_oneway(Node* pFirst, Node* pSecond, int moveCost)
{
    if(pFirst != NULL && pSecond != NULL)
    {
        pFirst->createEdge(pSecond, moveCost);
    }
}

#define MAX_NODES (32768)
#define MAX_CONNECTIONS (5)
#include <time.h>

int * Graph::findPath_r(Node* pStart, Node* pEnd)
{
    int *arr = new int[MAX_NODES+2];

    for (int i=0; i<MAX_NODES; i++)
        arr[i] = -1;

    arr[0] = 0;
    if(pStart == pEnd)
    {
        return arr;
    }

    std::vector<Node*> openList;
    openList.push_back(pStart);
    Node* pCurrNode = NULL;

    while(!openList.empty())
    {
        //Get best node from open list (lowest F value).
        //Since we sort the list at the end of the previous loop we know
        //the front node is the best
        pCurrNode = openList.front();

        //Exit if we're are the goal
        if(pCurrNode == pEnd)
            break;

        //Remove the node from the open list and place it in the closed
        openList.erase(openList.begin());
        pCurrNode->setClosed(true); //We use a flag instead of a list for speed
        //Test all of the edge nodes from the current node
        std::vector<Edge*>* pEdges = pCurrNode->getEdges();
        Node* pEdgeNode = NULL;
        for(std::vector<Edge*>::iterator i = pEdges->begin(); i != pEdges->end(); ++i)
        {
            pEdgeNode = (*i)->pNode;
            //If it's closed we've already analysed it
            if(!pEdgeNode->getClosed() && pCurrNode->DoesExist() == true)
            {
                if(!inList(pEdgeNode,&openList))
                {
                    openList.push_back(pEdgeNode);
                    pEdgeNode->setGCost(pCurrNode->getGCost()+(*i)->moveCost);
                    pEdgeNode->calcFCost();
                    pEdgeNode->setParent(pCurrNode);
                }
                else
                {
                    //If this is a better node (lower G cost)
                    if(pEdgeNode->getGCost() > pCurrNode->getGCost()+(*i)->moveCost)
                    {
                        pEdgeNode->setGCost(pCurrNode->getGCost()+(*i)->moveCost);
                        pEdgeNode->calcFCost();
                        pEdgeNode->setParent(pCurrNode);
                    }
                }
            }
        }
        //Place the lowest F cost item in the open list at the top, so we can
        //access it easily next iteration
        std::sort(openList.begin(), openList.end(),  Graph::compareNodes);
    }
    //Make sure we actually found a path
    if(pEnd->getParent() != NULL)
    {
        //Output the path
        //Use a stack because it is LIFO
        std::stack<Node*> path;
        while(pCurrNode != NULL)
        {
            path.push(pCurrNode);
            pCurrNode = pCurrNode->getParent();
        }

        int counter = 0;
        arr[1] = 0;
        while(!path.empty())
        {
            arr[counter+2] = path.top()->getName();
            counter++;
            arr[1] += path.top()->getGCost();
            path.pop();
        }
        arr[0] = counter;
        return arr;
    }
    return arr;
}

bool Graph::inList(Node* pNode, std::vector<Node*>* pList)
{
    for(std::vector<Node*>::iterator i = pList->begin(); i != pList->end(); ++i)
    {
        if((*i) == pNode)
        {
            return true;
        }
    }

    return false;
}

bool Graph::compareNodes(Node* pFirst, Node* pSecond)
{
    return pFirst->getFCost() < pSecond->getFCost();
}

void Graph::reset(void)
{
    for(std::vector<Node*>::iterator i = mNodes.begin(); i != mNodes.end(); ++i)
    {
        (*i)->reset();
    }
} 
```

查找路径的函数是这个：Graph::findPath_r

我真正想做的是保留边缘（因为他们决定道路是双向还是单向）。

以下是其他文件：Graph.h

```
#ifndef _GRAPH_H_
#define _GRAPH_H

#include "Node.h"

class Graph
{
public:
    Graph(void);
    ~Graph(void);

    //void addNode(int name, bool exists);
    void addNode(int name, bool exists, Node** NodeID );
    void connect_oneway(int ppFirst, int ppSecond, int moveCost);
    void connect_oneway(Node* pFirst, Node* pSecond, int moveCost);
    //int * findPath_r(int start, int end);
    int * findPath_r(Node* pStart, Node* pEnd);
    void reset(void);
private:
    void findNodesx(int firstName, Node** ppFirstNode);
    bool inList(Node* pNode, std::vector<Node*>* pList);
    static bool compareNodes(Node* pFirst, Node* pSecond);
    std::vector<Node*> mNodes;
};

#endif 
```

节点.h

```
#ifndef _NODE_H_
#define _NODE_H_

#include <string>
#include <vector>

//Forward declare Node so Edge can see it
class Node;

struct Edge
{
    Edge(Node* node, int cost) : pNode(node), moveCost(cost){}
    Node* pNode;
    int moveCost;
};

class Node
{
public:
    Node(void);
    Node(int name, bool exists);
    ~Node(void);

    void createEdge(Node* pTarget, int moveCost);

    void setGCost(int cost);
    void setClosed(bool closed);
    void setParent(Node* pParent);

    int getGCost(void);
    int getFCost(void);
    bool getClosed(void);
    Node* getParent(void);
    int getName(void);
    bool DoesExist(void);
    bool DoesExist_yes(void);
    std::vector<Edge*>* getEdges(void);

    void calcFCost(void);
    void reset(void);
private:
    int mGCost;
    int mTotal;
    bool mClosed;
    Node* mpParent;
    int mName;
    bool mHeur;
    std::vector<Edge*> mEdges;
};

#endif 
```

节点.cpp

```
#include "Node.h"

Node::Node(void)
{
}

Node::Node(/*const std::string&*/int name, bool exists) : mGCost(0), mTotal(0), mClosed(false), mpParent(NULL), mName(name), mHeur(exists)
{
}

Node::~Node(void)
{
    while(!mEdges.empty())
    {
        delete mEdges.back();
        mEdges.pop_back();
    }
}

int Node::getName(void)
{
    return mName;
}

void Node::createEdge(Node* pTarget, int moveCost)
{
    mEdges.push_back(new Edge(pTarget, moveCost));
}

void Node::setClosed(bool closed)
{
    mClosed = closed;
}

bool Node::getClosed(void)
{
    return mClosed;
}

std::vector<Edge*>* Node::getEdges(void)
{
    return &mEdges;
}

int Node::getGCost(void)
{
    return mGCost;
}

void Node::setGCost(int cost)
{
    mGCost = cost;
}

void Node::calcFCost(void)
{
    mTotal = mGCost;
}

void Node::setParent(Node* pParent)
{
    mpParent = pParent;
}

int Node::getFCost(void)
{
    return mTotal;
}

bool Node::DoesExist(void)
{
    return mHeur;
}

bool Node::DoesExist_yes(void)
{
    mHeur = true;
    return true;
}

Node* Node::getParent(void)
{
    return mpParent;
}

void Node::reset(void)
{
    mGCost = 0;
    mTotal = 0;
    mClosed = false;
    mpParent = NULL;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-07T10:42:58.980

您提到了 GoogleCode 上的一个库。节点清楚你想做什么，我认为最好的办法是自己编写你的实现。

首先，您应该知道 Dijsktra 是 A* 的一个特例。在 A* 中，您有一个名为*h*的启发式算法；*A* = 当h*为空函数时 Dijsktra 的可能实现。

然后，关于您的实现，让我们从`Node`. 它将需要以下功能：

```
constructor, destructor
create/get edge
set/get parent
set/is closed (for speed)
set/get GCost
set/get FCost
set/is obstacle (name way more descriptive than 'DoesExist')
set/get position
reset

// optional method:
get name 
```

希望这部分代码不会有太大变化。启发式代码将放置在路径查找器中。`Edge`课堂保持不变。

现在是大的：`Graph`。您无需删除任何公共方法。

您将需要一种启发式方法。对于将要描述的实现，您将需要一个可接受的一致启发式：

*   它不能高估到目标的距离（允许）
*   它必须是单调的（一致的）

一般大小写签名是`int getHCost(Node* node);`. 如果你总是返回 0，你会得到一个 Dijsktra 算法，这不是你想要的。在这里，我们将采用节点和目标之间的欧几里得距离。计算速度比曼哈顿距离慢，但结果更好。之后您可以更改此设置。

```
int getHCost(Node* node, Note* goal); 
```

这意味着您必须将节点放置在 3d 空间中。请注意，启发式是*启发式*的，即距离的*估计*。

我不会写代码。我会写一些适合你情况的伪代码。原始伪代码位于[Wikipedia A* 页面上](http://en.wikipedia.org/wiki/A*_search_algorithm)。这个伪代码是你的`findPath_r`函数：

```
function A*(start,goal)
    set all nodes to not closed // The set of nodes already evaluated.
    openset = {start}    // The set of tentative nodes to be evaluated, initially containing the start node

    start.gcost = 0    // Cost from start along best known path.
    // Estimated total cost from start to goal through y.
    start.fcost = start.gcost + getHCost(start, goal)

    while openset is not empty
        current = the node in openset having the lowest f_cost (usually the first if you use a sorted list)
        if current == goal
            return construct_path(goal)

        remove current from openset
        current.closed = true
        for each neighbor in (node connected by edge in current.edges) // Here is the condition for one-way edges
            if neighbor.closed or neighbor.obstacle
                continue

            gcost = current.gcost + dist_between(current,neighbor) // via edge distance

            if neighbor not in openset
                add neighbor to openset
                neighbor.parent = current
                neighbor.gcost = gcost
                neighbor.fcost = neighbor.gcost + getHCost(neighbor, goal)
            else if gcost < neighbor.gcost
                neighbor.parent = current
                neighbor.gcost = gcost
                neighbor.fcost = neighbor.gcost + getHCost(neighbor, goal)
                update neighbor position in openset

    return failure

function construct_path(current_node)
    std::vector<Node*> path
    while current_node != 0
        path.push_front(current_node)
        current_node = current_node.parent
    return path 
```

上面的实现使用单向边。

你可以用 C++ 编写 Dijsktra 算法，所以用 C++ 编写这个伪代码应该不成问题。

第二部分，表演。首先，测量;)。

我有一些可以提高性能的提示：

*   使用内存池进行分配解除分配
*   对打开列表使用侵入式列表（您也可以使用此技术使其自动排序）

我建议您阅读[A* for初学者](https://web.archive.org/web/20171022224528/http://www.policyalmanac.org:80/games/aStarTutorial.htm)，这是一本有用的阅读材料，即使您不使用 tilemap。

# sql-server - SQL Select 与仅返回一行的多个字段不同

> ID：11307988
> 
> 赞同：1
> 
> 时间：2012-07-03T09:22:39.387
> 
> 标签：sql-server, unique, distinct-values

我在 SQL Server 中有一个包含以下列的表：

```
MEMBERID, MEMBEREMAIL, FATHEREMAIL, MOTHEREMAIL, MEMBERNAME 
```

`MEMBERID`是PK。这三个电子邮件列不是唯一的，因此同一电子邮件可能会在同一行和多行中出现多次。

我正在尝试提取一个唯一的电子邮件列表，并且对于每封电子邮件还获得一个`memberid`和`membername`（从哪条记录中获取无关紧要）。

例如，如果我有三行：

```
1   x@x.com   y@y.com   y@y.com   Mark
2   z@z.com   y@y.com   x@x.com   John
3   x@x.com   y@y.com   z@z.com   Susan 
```

我想获取三封电子邮件 ( `x@x.com, y@y.com, z@z.com`) 以及`MEMBERID`它们出现的每一封电子邮件。它不是哪个`MEMBERID`（例如，`x@X.com`我不在乎我是否得到值 1 和 Mark 或 2 和 John 或 3 和 Susan，只要`x@x.com`在结果中只出现一次。

如果我在尝试返回电子邮件和 memberid 和 membername 时使用 DISTINCT，我当然会得到所有行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T09:28:45.237

您可以使用子查询来规范所有电子邮件。然后您可以使用`row_number`过滤掉`memberid, membername`每封电子邮件：

```
select  *
from    (
        select  row_number() over (partition by email order by memberid) as rn
        ,       *
        from    (
                select  MEMBERID
                ,       MEMBERNAME
                ,       MEMBEREMAIL as email
                from    YourTable
                union all
                select  MEMBERID
                ,       MEMBERNAME
                ,       FATHEREMAIL
                from    YourTable
                union all
                select  MEMBERID
                ,       MEMBERNAME
                ,       MOTHEREMAIL
                from    YourTable
                ) as emails
        ) num_emails
where   rn = 1 
```

`UNPIVOT`您还可以使用该子句规范化电子邮件，如下所示：

```
select  *
from    (
        select  row_number() over (partition by email order by memberid) as rn
        ,       *
        from    (
                select  MEMBERID
                ,       MEMBERNAME
                ,       email
                from    YourTable
                unpivot (
                                email
                        for     emailOwner
                        in      (
                                MEMBEREMAIL,
                                FATHEREMAIL,
                                MOTHEREMAIL
                                )
                        ) as u
                ) as emails
        ) num_emails
where   rn = 1 
```

[在SQL Fiddle](http://sqlfiddle.com/)尝试两个版本：

*   [`UNION ALL`版本](http://sqlfiddle.com/#!3/78428/4)

*   [`UNPIVOT`版本](http://sqlfiddle.com/#!3/78428/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T09:55:55.567

此代码将为您提供正确的不同电子邮件组：然后您可以从查询成员中创建一个光标，然后使用[此概念](http://blog.sqlauthority.com/2008/06/04/sql-server-create-a-comma-delimited-list-using-select-clause-from-table-column/)获取每个成员的邮件的逗号分隔列表我将为此创建一个输出表，如果您这样做会更容易需要它以供将来使用，并将为此创建一个存储过程来创建自定义表

```
select mem.*, mails.MEMBEREMAIL
from (
    select MEMBERID,max(MEMBERNAME) as MEMBERNAME
    from table
    group by MEMBERID
)  as mem 
inner join 
(
    select distinct MEMBERID, MEMBEREMAIL
    from (
        select MEMBERID, MEMBEREMAIL
        from table
        union
        select MEMBERID, FATHEREMAIL
        from table
        union
        select MEMBERID, MOTHEREMAIL
        from table
    ) as mail
) as mails on mem.MEMBERID = mails.MEMBERID 
```

# android - Android更改按钮背景没有按下状态的选择器

> ID：11307989
> 
> 赞同：1
> 
> 时间：2012-07-03T09:22:40.170
> 
> 标签：android, button, onclick, drawable, state

***有关解决方案，请参见 Deepa 答案:)***

我阅读了 StackOverFlow 中给出的所有解决方案，但在我的情况下似乎都没有。问题是我的应用程序中有几个按钮，它们都会对用户操作做出不同的反应。例如，当应用程序启动时，除两个按钮外，所有按钮都被禁用。所以我将默认可绘制对象设置到我的 XML 上。当我打开一个文件时，它们都是可点击的，但其中一些，当按下时需要保持按下状态（我已经这样做了），而其他的只需要按下然后松开，这是我做不到的。顺便说一句，所有按钮都有不同的背景，这就是我不使用选择器的原因。这是一些打印屏幕：

![在此处输入图像描述](../Images/aee09687aeb0b70d6991dadf82b93e04.png)

![在此处输入图像描述](../Images/dee1f4141ee12c550ff9f23063a904d6.png)

如您所见，我管理默认状态和“检查状态”（“永远”按下），但我无法设置单击状态，只需按下按钮，然后当操作完成时返回未按下状态。因为我知道 onClick 是在触摸后调用的，所以它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:31:39.673

试试这个..

```
button.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if(event.getAction() == MotionEvent.ACTION_DOWN) {
            //change the button for pressed state..              
            button.setBackgroundResource(R.drawable.pressed);
        }       
    }

    if(event.getAction()==MotionEvent.ACTION_UP) {
        //After pressing the button again change the image for button as 
        button.setBackgroundResource(R.drawable.normal);
    }
}); 
```

我希望它对你有帮助...

# javascript - 在 JavaScript 中对 iPhone 耳机的下一个按钮（双击）做出反应

> ID：11307992
> 
> 赞同：2
> 
> 时间：2012-07-03T09:22:42.577
> 
> 标签：javascript, ios, safari

我想对我的网页上的 iphone 耳机双击和三次点击做出反应。有 Safari api 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T09:25:38.950

遗憾的是，在 safari api 级别不支持该功能，但是您正在播放的视频将像在正常情况下一样播放和暂停，但您无法在 JS 级别捕获该事件