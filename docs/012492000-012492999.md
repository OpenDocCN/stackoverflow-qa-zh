# StackOverflow 问答 12492000-12492999

# javascript - Jquery #id 链接事件？

> ID：12492000
> 
> 赞同：0
> 
> 时间：2012-09-19T09:31:09.667
> 
> 标签：javascript, jquery

我试图让一个元素在链接到它的 id 时闪烁，这与它在 stackoverflow 上完成的方式非常相似。例如，每当您附加一个带有元素 id 的页面链接时，它都会将您带到页面上的该元素：

```
<div id="some_element_id"></div>

url example: www.some_website.com/some_page#some_element_id 
```

有没有我可以用来闪烁该元素的事件？也许是这样的：

```
$('#some_element_id').link_event().fadeOut(500).fadeIn(500) 
```

我对这是如何完成的有点迷茫。任何和所有的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:33:54.800

```
function getHash() {
  var hash = window.location.hash;
  return hash;
}

$( getHash() ).link_event()..fadeOut(100).fadeIn(100); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:17:32.277

对于现代浏览器，有一个名为[`hashchange`](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange).

```
$(window).on('hashchange', function() {
    $(location.hash).fadeOut(500).fadeIn(500);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:39:16.727

简单，只需使用`window.location.hash`：

```
$(window.location.hash).link_event().fadeOut(500).fadeIn(500) 
```

# ember.js - Handlebars 动作助手适用于 EmberJS 0.9.8.1，但不适用于 Ember 1.0 Pre

> ID：12492003
> 
> 赞同：3
> 
> 时间：2012-09-19T09:31:20.690
> 
> 标签：ember.js, handlebars.js

请参阅[http://jsfiddle.net/gazmcghee/v6PSA/](http://jsfiddle.net/gazmcghee/v6PSA/)。单击链接会显示警报。但是将“管理资源”下的 EmberJS 版本更改为[https://github.com/downloads/emberjs/ember.js/ember-1.0.pre.js](https://github.com/downloads/emberjs/ember.js/ember-1.0.pre.js)会导致链接消失。我该如何解决 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:58:56.850

在 EmberJS 版本 0.9.8.1 中，Handlebars 默认包含在 Ember 中。

1.0pre版本不是这样，所以你必须手动添加它。

PS：不要忘记添加`Add.initialize()`，否则你会看到意想不到的行为。

[这是包含 Handlebars 的 JSFiddle](http://jsfiddle.net/HRweY/)。

# android - Javamail api 没有发送任何邮件

> ID：12492004
> 
> 赞同：0
> 
> 时间：2012-09-19T09:31:22.593
> 
> 标签：android, jakarta-mail

我正在使用[该链接](http://androidcodeexamples.blogspot.in/2012/05/android-send-email-via-gmail-actually.html)从我的 android 应用程序发送 html 电子邮件。但它不发送任何邮件。这里我有一个 html 页面保存在 sdcard 中，它被用作 html 的正文内容。有什么问题？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:58:36.670

```
public void sendMail(){
                String tempAddress = emailTo.getText().toString();
                String[] toArr = tempAddress.split(",");
                String FROM = emailFrom.getText().toString();
                String SUBJECT = emailSubject.getText().toString();

                boolean valid = false;
                for (int counter = 0; counter < toArr.length; counter++) {

                    if (isValidEmail(toArr[counter])) {
                        valid = true;
                    } else {
                        valid = false;
                    }
                }
                if (valid && isValidEmail(FROM)) {
                    Mail m = new Mail("username",
                            "password");
                    m.setTo(toArr);
                    m.setFrom(FROM);
                    m.setSubject(SUBJECT);
                    m.setBody("<html><body bgcolor='#FFFFFF'>your html content</body></html>");
                    try {
                        if (m.send()) {
                            Toast.makeText(context,
                                    "A test Email was sent successfully.",
                                    Toast.LENGTH_LONG).show();
                        } else {
                            Toast.makeText(context, "Email was not sent.",
                                    Toast.LENGTH_LONG).show();
                        }
                    } catch (Exception e) {
                        Toast.makeText(context,
                                "There was a problem sending the email.",
                                Toast.LENGTH_LONG).show();
                    }
                    finish();

                } else {
                    Toast.makeText(context, "Please enter a valid e-mails.",
                            Toast.LENGTH_LONG).show();
                }
            } 
```

使用上面的代码发送邮件并在你的包中创建一个类邮件，如下所示：-

```
import java.util.Date;
import java.util.Properties;
import javax.activation.CommandMap;
import javax.activation.DataHandler;
import javax.activation.DataSource;
import javax.activation.FileDataSource;
import javax.activation.MailcapCommandMap;
import javax.mail.BodyPart;
import javax.mail.Multipart;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeBodyPart;
import javax.mail.internet.MimeMessage;
import javax.mail.internet.MimeMultipart;

/**
 * For using this class please add activation.jar, additionnal.jar and mail.jar
 * file to your build path
 * */
public class Mail extends javax.mail.Authenticator {
    private String _user;
    private String _pass;

    private String[] _to;
    private String _from;

    private String _port;
    private String _sport;

    private String _host;

    private String _subject;
    private String _body;

    private boolean _auth;

    private boolean _debuggable;

    private Multipart _multipart;

    public Mail() {
        _host = "smtp.gmail.com"; // default smtp server
        _port = "465"; // default smtp port
        _sport = "465"; // default socketfactory port

        _user = ""; // username
        _pass = ""; // password
        _from = ""; // email sent from
        _subject = ""; // email subject
        _body = ""; // email body

        _debuggable = false; // debug mode on or off - default off
        _auth = true; // smtp authentication - default on

        _multipart = new MimeMultipart();

        // There is something wrong with MailCap, javamail can not find a
        // handler for the multipart/mixed part, so this bit needs to be added.
        MailcapCommandMap mc = (MailcapCommandMap) CommandMap
                .getDefaultCommandMap();
        mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html");
        mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml");
        mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain");
        mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed");
        mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822");
        CommandMap.setDefaultCommandMap(mc);
    }

    public Mail(String user, String pass) {
        this();

        _user = user;
        _pass = pass;
    }

    public boolean send() throws Exception {
        Properties props = _setProperties();

        if (!_user.equals("") && !_pass.equals("") && _to.length > 0
                && !_from.equals("") && !_subject.equals("")
                && !_body.equals("")) {
            Session session = Session.getInstance(props, this);

            MimeMessage msg = new MimeMessage(session);

            msg.setFrom(new InternetAddress(_from));

            InternetAddress[] addressTo = new InternetAddress[_to.length];
            for (int i = 0; i < _to.length; i++) {
                addressTo[i] = new InternetAddress(_to[i]);
            }
            msg.setRecipients(MimeMessage.RecipientType.TO, addressTo);

            msg.setSubject(_subject);
            msg.setSentDate(new Date());

            // setup message body
            BodyPart messageBodyPart = new MimeBodyPart();
            messageBodyPart.setText(_body);
            _multipart.addBodyPart(messageBodyPart);

            // Put parts in message
            msg.setContent(_body, "text/html");

            // send email
            Transport.send(msg);

            return true;
        } else {
            return false;
        }
    }

    public void addAttachment(String filename) throws Exception {
        BodyPart messageBodyPart = new MimeBodyPart();
        DataSource source = new FileDataSource(filename);
        messageBodyPart.setDataHandler(new DataHandler(source));
        messageBodyPart.setFileName(filename);

        _multipart.addBodyPart(messageBodyPart);
    }

    @Override
    public PasswordAuthentication getPasswordAuthentication() {
        return new PasswordAuthentication(_user, _pass);
    }

    private Properties _setProperties() {
        Properties props = new Properties();

        props.put("mail.smtp.host", _host);

        if (_debuggable) {
            props.put("mail.debug", "true");
        }

        if (_auth) {
            props.put("mail.smtp.auth", "true");
        }

        props.put("mail.smtp.port", _port);
        props.put("mail.smtp.socketFactory.port", _sport);
        props.put("mail.smtp.socketFactory.class",
                "javax.net.ssl.SSLSocketFactory");
        props.put("mail.smtp.socketFactory.fallback", "false");

        return props;
    }

    // the getters and setters
    public String getBody() {
        return _body;
    }

    public void setBody(String _body) {
        this._body = _body;
    }

    public void setTo(String[] toArr) {
        this._to = toArr;
    }

    public void setFrom(String string) {
        this._from = string;
    }

    public void setSubject(String string) {
        this._subject = string;
    }
    // more of the getters and setters …..
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:14:20.357

在下面的线程中查看我的答案

[使用 JavaMail API 发送邮件失败](https://stackoverflow.com/questions/11945602/fail-to-send-mail-using-javamail-api/11946542#11946542)

在那里我给出了一个使用 JavaMail 发送邮件的工作示例

另请参阅我在此线程中的答案：[Connecting directly to GMAIL with android](https://stackoverflow.com/questions/11340023/connecting-directly-to-gmail-with-android/11340883#11340883)

在这里您可以下载一个工作项目，以测试它

# overriding - 带有 -webkit-mask-image 的元素上的框阴影

> ID：12492006
> 
> 赞同：12
> 
> 时间：2012-09-19T09:31:27.647
> 
> 标签：overriding, css, masking

我`background-image`在另一个 div 里面有一个 div `-webkit-mask-image`，因为在这种情况下`border-radius`没有在浏览器上工作。`WebKit`

如果我将 a 设置`box-shadow`为父 div，它会显示在`Firefox`但不显示在`Chrome`. 我怎样才能覆盖，`-webkit-mask-image`所以我也可以使用`box-shadow`？

这是一个工作示例（打开链接`Firefox`并`Chrome`查看差异）：http: [//jsfiddle.net/RhT3e/3](http://jsfiddle.net/RhT3e/3)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-10-30T22:25:45.717

您遇到的问题是，由于该选项会剪切包括元素在内的任何内容，`box-shadow`因此被剪切掉了。`-webkit-mask-image``box-shadow`

# 解决方案

使用蒙版图像作为蒙版图像下方显示的另一个元素，以便您可以使用其形状来渲染阴影。为了做到这一点，我们必须知道最初被遮罩的图像的宽度和高度。如果您不知道图像大小或者它是动态的，您可以使用 JavaScript。

**我们面临的问题**是我们不能使用`box-shadow`，因为它会渲染一个与遮罩形状不匹配的盒子阴影。

*`box-shadow`不会在形状周围呈现*

![<code>box-shadow</code> 不会在形状周围呈现](../Images/6ca8faa8bd327079433df5fe07fc79bf.png)

* * *

**相反**，我们将尝试使用`drop-shadow`过滤器来模拟它。

![带有阴影滤镜的形状](../Images/4e429495f9d6a0c07cf9bc74f75bd0cb.png)

我更喜欢用相同大小的 div 包裹被遮罩的图像，并具有遮罩图像的背景图像。这就是它的样子。

**HTML**

```
<div class="image-container">
    <img class="wrap-image" src="<Original Image URL>" id="wrap-image">
</div> 
```

**CSS**

```
.image-container {
    width: <Original Image Width>;
    height: <Original Image Width>;
    background-size: 100%;
    background-image: url(URL of Mask Image);
    -webkit-filter: drop-shadow(1px 1px 4px rgba(0,0,0,0.75));
    -moz-filter: drop-shadow(1px 1px 4px rgba(0,0,0,0.75));
    -ms-filter: drop-shadow(1px 1px 4px rgba(0,0,0,0.75));
    -o-filter: drop-shadow(1px 1px 4px rgba(0,0,0,0.75));
}

#wrap-image {
    mask: url("URL of Mask Image");
    -webkit-mask-box-image: url("URL of Mask Image");
} 
```

[这是一个 JSFiddle](http://jsfiddle.net/nRNTX/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-25T01:05:36.220

感谢那。它真的帮助了我。我不得不补充：

```
mask-image: url("URL of Mask Image");
mask-size: 100%; 
```

让它在 Edge 中正确渲染。

# php - 如何在 Symfony 2 中运行普通的 mysql 查询？

> ID：12492013
> 
> 赞同：1
> 
> 时间：2012-09-19T09:31:51.103
> 
> 标签：php, mysql, symfony

如何在 Symfony 2 中运行普通的 mysql 查询，就像这样：

```
$query = $this->db->run('select * from table');
$rs = $this->db->fetchAll($query);

foreach($rs as $r) {
    ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:34:50.430

在这里通过一些示例很好地解释了如何做到这一点：

[http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/reference/native-sql.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/reference/native-sql.html)

# jquery - 捕获表单元素的值以进行打印

> ID：12492015
> 
> 赞同：3
> 
> 时间：2012-09-19T09:31:55.947
> 
> 标签：jquery, printing

我在使用 JQuery 方面相当有能力，通常可以让大多数事情在一些混乱的情况下工作。我尝试用谷歌搜索这个问题，但要么我搜索了错误的术语，要么没有发布的解决方案。

在为订单页面准备 print.css 文件时，有人问我是否可以删除文本 INPUTS 并只打印出它们的值，同样是一个包含地址的 SELECT 菜单。

在研究时，我确实遇到了 .val() 方法 - 现在称为 .fieldValue() - 和 .serializeArray() 所以我想我知道如何提取值，而不是如何打印它来代替表单元素。

需要说明的是：
例如，SELECT 菜单显示默认送货地址的第一行。对于打印输出，我希望它能够跨多行显示整个地址，并且没有 SELECT 菜单。

我在下面有这个解决方案，它允许我捕获值，但我不知道如何插入它们来代替表单元素： [使用 jQuery 打印 HTML 表单](https://stackoverflow.com/questions/5457254/printing-html-form-jquery?rq=1)

谢谢你的帮助！

* * *

编辑捕获的值应该只插入到打印输出中，而不是替换 html 中的表单元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:14:16.623

这是作为 jsfiddle 的基本解决方案：http: [//jsfiddle.net/2mBSS/15/](http://jsfiddle.net/2mBSS/15/)

基本上：当发生某些事情时（例如单击按钮），循环遍历相应的元素并使用`.replaceWith()`jQuery 函数将它们替换为它们的值......你用`.val()`. 如您所见，这适用`<select>`于以及`<input>`元素。

您当然可以创建一个更复杂的 HTML 元素来替换输入，例如`"<p>" + val + "</p>"`.

请注意，这将完全删除表单输入字段，直到重新加载页面。这可能根本不重要（例如，如果您在新选项卡中打开打印页面）或者它可能会破坏您网站的设计......我个人更喜欢使用打印 CSS 表来设置打印页面的样式，例如删除输入框的边框。`<select>`但是，如果您需要提取元素中选定选项的值，这可能效果不佳。

如果您想保持页面完整，我建议您嵌入一些隐藏元素来保存文本以进行打印，并在单击打印按钮时将输入表单的值复制到它们......然后在您的打印 CSS 中隐藏所有输入，而是显示支持元素（例如`<p>`或`<span>`）。

# jquery - jquery在joomla扩展之间发生冲突

> ID：12492018
> 
> 赞同：0
> 
> 时间：2012-09-19T09:31:56.990
> 
> 标签：jquery

如何插入 jQuery.noConflict(); 为了避免Moset树组件和Autson Slideshow之间的冲突，具体在哪里？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:08:52.667

When in Joomla!, it's better to use the API provided to incluse js and CSS files.

```
$document = JFactory::getDocument();
$document->addScript('path/to/jquery.js');
$document->addScriptDeclaration('jQuery.noConflict()'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:37:59.767

我认为添加它的位置正好在引用 jQuery 的标签之后。来自[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

```
<script type="text/javascript" src="other_lib.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
  $.noConflict();
  // Code that uses other library's $ can follow here.
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:38:36.073

应该谷歌一点。

1.  [StackOverflow 帖子](https://stackoverflow.com/a/5015108/1085285)
2.  [http://uzbekjon.hubpages.com/hub/How-to-use-jQuery_noConflict](http://uzbekjon.hubpages.com/hub/How-to-use-jQuery_noConflict)
3.  [http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

# android - Android LayoutParams 什么都不做

> ID：12492022
> 
> 赞同：0
> 
> 时间：2012-09-19T09:32:20.330
> 
> 标签：android, textview, layoutparams

我在 TextView 中遇到了 Android LayoutParams 的问题。我想在大小为 200 dip x 200 dip 的框中显示文本。但什么都没有显示。这是代码：

```
tr = new TableRow(this);
TextView phone = new TextView(this);
phone.setInputType(InputType.TYPE_TEXT_FLAG_MULTI_LINE);
phone.setLines(20);
phone.setText(Html.fromHtml("<b>Beschreibung</b><br /><br />"));
phone.append(poi.getDescription());
tr.addView(phone,new ViewGroup.LayoutParams(calculatePxs(200),calculatePxs(200)));
        tr.setPadding(10, 15, 10, 15);

v = new View(this);
v.setBackgroundColor(Color.rgb(51, 51, 51));

table.addView(tr,new TableLayout.LayoutParams(
                LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT));

table.addView(v,new TableLayout.LayoutParams(
                LayoutParams.WRAP_CONTENT,
                1)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:37:25.557

代替

```
new ViewGroup.LayoutParams(calculatePxs(200),calculatePxs(200)));
    tr.setPadding(10, 15, 10, 15); 
```

使用 **TableRow.LayoutParams**

像 ：

```
new TableRow.LayoutParams(calculatePxs(200),calculatePxs(200)));
tr.setPadding(10, 15, 10, 15); 
```

# apache - windows 8 NT 内核和系统使用端口 80

> ID：12492025
> 
> 赞同：30
> 
> 时间：2012-09-19T09:32:28.327
> 
> 标签：apache, windows-8, xampp, port80

这一直困扰着我。升级到 Windows 8 后，如果不使用端口 80 以外的端口，我已经无法运行我的 XAMPP 服务器，因为一个名为“NT Kernel & System”的进程正在使用它。这是一个系统进程，所以我无法禁用它。我没有安装任何 IIS 或 Web 服务器，所以我对如何使用该端口 80 感到非常沮丧。

如果你们中的任何人知道如何更改“NT Kernel & System”使用的端口，那就太好了！

谢谢！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-05-15T10:44:00.097

当我想让我自己的应用程序在该端口上侦听时，我遇到了 NT 内核在端口 80 上侦听的相同问题。

停下来后

*   IIS
*   万维网出版服务
*   IIS 管理服务
*   SQL Server 报告服务

NT 内核仍在侦听端口 80

最后，当我停止“Web 部署代理服务”时，它停止了对 80 的侦听。

注意：`netstat -bano`在提升的命令提示符中使用以查看哪些应用正在侦听哪些端口。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-12-21T04:30:44.630

我在 Windows 8 上仅安装了 Apache 2.2.22 后遇到了这个问题。在搜索了许多论坛以获取信息后，我坚信这是 Windows 上此问题的最常见原因，它会产生“make_sock 无法绑定到地址 0.0.0.0:80" 错误，是 IIS 正在运行。停止万维网发布服务是最终使 Apache 为我启动的原因。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-10-26T11:26:25.467

一大堆服务可能已经抢占了 80 端口：

[http://lordamit.blogspot.de/2012/06/windows-7-windows-8-apache-errorport-80.html](http://lordamit.blogspot.de/2012/06/windows-7-windows-8-apache-errorport-80.html)

很难说是哪一个导致您的系统这样做，我不得不禁用“万维网发布服务”。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-07-27T12:11:45.923

除了 World Wide Publishing，我还必须停止启动 HTTP 服务的**Web 部署代理**服务。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-08T10:42:42.053

我在 Windows Server 2016 标准上遇到了同样的问题。我按照以下步骤操作；

1.停止 SQL Server 报告服务（SSRS）帮助释放端口 80。2.配置 SSRS 到不同的端口 81。然后重新启动服务

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-07T13:22:50.583

停止 w3svc 服务对我有用 - 只需在提升的命令提示符中写入（VS2017 命令提示符以管理员身份启动）：

```
sc stop w3svc 
```

# python - 如何在 python 中安装 mpfit.py

> ID：12492027
> 
> 赞同：1
> 
> 时间：2012-09-19T09:32:35.000
> 
> 标签：python

我是 IDL 的普通用户，但对 python 很陌生。我得到了`mpfit.py`文件，但我不知道如何安装这个文件，以便我可以在我的代码中导入它。请帮忙...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:36:50.860

您不一定需要安装它，从您拥有脚本的目录中，您可以随时导入。例如，如果您的脚本位于：

```
C:\my scripts\MyCoolScript.py
C:\my scripts\mpfit.py 
```

在里面`MyCoolScript.py`你应该有：

```
from mpfit import * 
```

### 如果您`mpfit.py`在其他地方：

```
import sys
sys.path.append("C:\SomewhereElse")

from mpfit import * 
```

### 关于导入东西的注意事项。

在许多`__init__.py`模块中，您会看到这一点`from somemodule import *`。
然而，这被认为是一种令人反感的导入方式。

如果您使用名称定义了方法或变量或对象`something`并且文件`mpfit`也包含`something`在其中，则原因如下。`*`您从您那里导入的那一刻`mpfit`将覆盖`something`. 反过来也是如此。如果您这样做`from mpfit import *`并且您希望在哪里使用，例如`constant=6.13`在您的代码中，但后来您`constant=128`在脚本中定义，那么您的`constant`导入来源`mpfit`将被覆盖。
因此，Python 编码器会导入整个模块或脚本本身，并使用`.`运算符来访问某些属性，例如：

```
import mpfit 
```

现在你可以像这样访问 mpfit 里面的东西：

```
mpfit.superfunction(var1, var2)

mpfit.constanst*something 
```

如果你很“懒惰”，你也可以导入一些短名称的东西：

```
import mpfit as mt
mt.superfunction(var1, var2)
mt.constanst*something 
```

欢迎使用 Python，这是比 IDL 更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:30:24.837

```
import sys

sys.path.append("path of your file") 
```

现在，您的模块已包含在 sys. 路径，您可以简单地导入它：

```
import mpyfit 
```

# delphi - Delphi XE2 中的 TeeChart 透明度

> ID：12492030
> 
> 赞同：0
> 
> 时间：2012-09-19T09:32:40.593
> 
> 标签：delphi, transparency, teechart

是否可以使 TeeChart 的背景透明？我正在使用 v2011.03.32815（与 Delphi XE2 一起开箱即用的版本）。我在[这里](http://www.teechart.net/support/viewtopic.php?f=3&t=6198&p=23645&hilit=color%20transp%2a#p23645)找到了一个可行的解决方案，但这不是我需要的。我`DBChart`的 s 在一个框架内，绘制图表的背景可能会改变。那么，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T09:40:10.233

[Yeray在](https://stackoverflow.com/users/509369/yeray)[此处](http://www.teechart.net/support/viewtopic.php?f=3&t=8450&p=41994&hilit=transparent%20chart#p41994)发布的示例怎么样？

这应用于多图表表单/面板可能是这样的：

```
procedure TFrame3.Chart1BeforeDrawChart(Sender: TObject);
begin
  MakeChartTransparent(Chart1, Back1);
end;

procedure TFrame3.Chart2BeforeDrawChart(Sender: TObject);
begin
  MakeChartTransparent(Chart2, Back2);
end;

procedure TFrame3.Chart3BeforeDrawChart(Sender: TObject);
begin
  MakeChartTransparent(Chart3, Back3);
end;

procedure TFrame3.MakeChartTransparent(Chart: TChart; var Back: TBitmap);
begin
  if not Assigned(Back) then
  begin
    Back:=TBitmap.Create;
    Back.Width:=Chart.Width;
    Back.Height:=Chart.Height;

    Back.Canvas.CopyRect(Chart.ClientRect, (Self.Parent as TForm).Canvas, Chart.BoundsRect);
  end;

  if Chart.Color=clNone then
     Chart.Canvas.Draw(0,0,Back);
end;

procedure TFrame3.Timer1Timer(Sender: TObject);
begin
  Chart1[0].FillSampleValues();
  Chart2[0].FillSampleValues();
  Chart3[0].FillSampleValues();
end; 
```

请注意，需要为每个图表初始化后位图。

不要忘记在表单的 OnCreate 事件中将图表设置为透明：

```
procedure TForm2.FormCreate(Sender: TObject);
begin
  Frame31.Chart1.Color:=clNone;
  Frame31.Chart2.Color:=clNone;
  Frame31.Chart3.Color:=clNone;
end; 
```

完整项目可[在此处](http://www.steema.us/files/public/ChartTest.zip)获得。

# php - CakePHP 2.0 选择表单 多选

> ID：12492031
> 
> 赞同：5
> 
> 时间：2012-09-19T09:32:44.917
> 
> 标签：php, cakephp-2.0, selected, form-helpers

我有这个下拉菜单，您可以在其中选择多个值。现在假设我想编辑我的信息并制作一个包含多个选定值的下拉菜单。试图弄清楚它是怎么回事，但没有结果。

假设我有：

```
$selected = array(3, 4);
$options = array(1,2,3,4);

echo $this->Form->select('Attendees', $options,array('multiple' => true, 'selected' => $selected)); 
```

我已经使用了此代码，但没有选择任何内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T09:48:22.640

好的找到了一种方法，看起来它需要是这样的：

```
$selected = array(2, 3);
$options = array(1, 2, 3, 4);

echo $this->Form->input('Attendees', array('multiple' => true, 'options' => $options, 'selected' => $selected)); 
```

将输出：

*   1
*   2
*   3 已检查
*   4 已检查

$selected 检查每个元素的索引键而不是值本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-07T08:24:30.283

我在 cakePHP 3.9 中创建多选如下：

```
 echo $this->Form->input($tableName . '[' . $marker . ']', [
                'type' => 'select',
                'options' => $options,
                'val' => $selected,
                'multiple' => true,
                'id' => $tableName . '-' . $num,
            ]); 
```

而不是“选择”，它使用“val”来预选： [https ://book.cakephp.org/3/en/views/helpers/form.html#creating-select-pickers](https://book.cakephp.org/3/en/views/helpers/form.html#creating-select-pickers)

以防万一有人没有注意到这个版本并被以前的解决方案卡住了，比如我:)

# jquery - 资产预编译后 Twitter Bootstrap 下拉菜单损坏

> ID：12492033
> 
> 赞同：6
> 
> 时间：2012-09-19T09:32:58.300
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, twitter-bootstrap, activeadmin

在[下拉列表](http://twitter.github.com/bootstrap/components.html#buttonDropdowns)`RAILS_ENV=production bundle exec rake assets:precompile`在开发环境中变得无响应之后。单击按钮时没有任何反应。但是，从开始工作中删除所有内容。它在生产模式下也能完美运行 ( )`public/assets``rails s -e production`

该应用程序使用[twitter bootstrap](http://twitter.github.com/bootstrap/index.html)和[active admin](http://activeadmin.info/)。看起来有些[冲突](https://stackoverflow.com/q/10180418/517483)。

请注意，它在 Heroku 上暂存时效果很好

这是生成的html的快照

```
<li id="organization-selector" class="dropdown">
    <a href="/" data-toggle="dropdown" data-target="#organization-selector" class="dropdown-toggle">
      RedKivi
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li>
        <a href="/organizations/1">RedKivi</a>
      </li>
      <li>
        <a href="/organizations/2">BoTree</a>
      </li>                  
      <li class="divider"></li>
      <li>
        <a href="/organizations/new">New organization</a>
      </li>
    </ul>
</li> 
```

**应用程序/资产/样式表/application.css.scss**

```
...
....
 *= require_self
 *= require jquery.ui.slider
 *= require_tree . 
```

**应用程序/资产/javascripts/application.js**

```
//= require jquery
//= require jquery_ujs
//= require jquery.ui.slider
//= require bootstrap
//= require_tree . 
```

预编译资产的做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-07T23:23:07.257

**只需清理您的资产文件夹：**

```
rake assets:clean:all 
```

* * *

**为什么会这样？**

Bootstrap 的 Dropdown 中断开发只是因为您的资产被加载了两次。一次是“预编译”形式，第二次是因为您的开发环境。这会导致冲突，并且下拉菜单不再起作用。

这就是它在 Heroku/Production 上正常工作的原因，因为只加载了预编译的资产。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:53:07.733

据我所知，通常您不需要在本地预编译资产。它通常在分期和生产中完成。

实际上，在 Heroku 上登台时，我们得到了`ActionView::Template::Error (active_admin.css isn't precompiled)` [error](https://github.com/gregbell/active_admin/issues/483)。所以我们在本地预编译资产，在部署到 Heroku 之前推送到远程仓库来修复它。这是解决方法和问题的原因。

[这个链接](https://github.com/gregbell/active_admin/wiki/Heroku-Cedar-deployment-with-the-Asset-Pipeline)给出了解决方案。我们已经遵循它，现在我们不再需要在本地预编译资产并保留在 repo 中。

# delphi - F2051 Unit JclRegistry 使用不同版本的 System.UInt64 编译

> ID：12492036
> 
> 赞同：2
> 
> 时间：2012-09-19T09:33:03.313
> 
> 标签：delphi, delphi-2007, jedi

我正在我的项目中使用 JEDI 实现调试。我用向导添加了 ExceptionDialog，但是当我尝试构建项目时，我得到了

> F2051 Unit JclRegistry 使用不同版本的 System.UInt64 编译

# objective-c - 每次使用动画时，UITableView 都不会滚动到底部

> ID：12492039
> 
> 赞同：1
> 
> 时间：2012-09-19T09:33:18.387
> 
> 标签：objective-c, ios, uitableview, animation

我有一个 UITableView 在程序执行期间动态添加新行。我总是在底部添加新行，当发生这种情况时，我希望表格视图滚动到底部并显示新行。

```
NSInteger oldCount = [self.game count];
dispatch_async( dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
    //This may take a long time
    BOOL gameStateChanged = [self.game update] ;
    dispatch_async( dispatch_get_main_queue(), ^{
        if (gameStateChanged)
        {
            NSMutableArray* ipaths = [NSMutableArray arrayWithCapacity:5];
            NSInteger newCount = [self.game count];
            for (NSInteger i = oldCount; i < newCount; i++)
            {
                [ipaths addObject:[NSIndexPath indexPathForRow:i inSection:0]];
            }
            NSIndexPath* ipath = [ipaths lastObject];
            [self.wordsTableView insertRowsAtIndexPaths:ipaths 
                                       withRowAnimation:UITableViewRowAnimationNone];
            [self.wordsTableView scrollToRowAtIndexPath: ipath 
                                       atScrollPosition:UITableViewScrollPositionBottom 
                                               animated:YES];
        }
    });
}); 
```

问题是它有时会停止滚动。在它停止滚动后，它不会在随后调用同一方法时自行开始滚动，除非用户手动滚动表视图。

如果我关闭滚动、发送的动画`animated:NO`，它会完美运行。怎么会这样？以及如何使用动画使其工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:39:20.033

在调用方法时尝试等待直到完成……另一种可能性是在动画块中集成动画：无功能……</p>

像这样的东西：

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.5];

[self.wordsTableView scrollToRowAtIndexPath: ipath 
                                       atScrollPosition:UITableViewScrollPositionBottom 
                                               animated:NO];

[UIView commitAnimations]; 
```

这并不是最好的解决方案，但也许会有所帮助……</p>

# windows - Wininet - 如何下载和验证 SSL 证书

> ID：12492040
> 
> 赞同：1
> 
> 时间：2012-09-19T09:33:21.317
> 
> 标签：windows, winapi, ssl, ssl-certificate, wininet

我想像 Internet Explorer 一样下载和验证证书，我试图监视 IE API 调用以查看它是如何完成这一切的。首先，我看不到哪个 wininet 函数正在下载 SSL 证书，其次有很多对 crypt32.dll 函数的调用。

有人可以告诉我哪些函数请求证书或验证证书所需的证书数据。我想了解该方法并在我的应用程序中实现完全相同的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:43:44.573

> 有人可以告诉我哪些功能需要证书

证书是 SSL 握手的一部分，它不是单独下载的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:06:09.767

如果您使用 WinINet 打开 https 连接，它将为您下载并检查证书。因此，目前还不清楚您要做什么。

如果要检查 WinINet 下载的证书，可以在 IE8 或更高版本中使用[INTERNET_OPTION_SERVER_CERT_CHAIN_CONTEXT 。](http://blogs.msdn.com/b/jpsanders/archive/2009/06/05/understanding-the-new-wininet-option-internet-option-server-cert-chain-context.aspx)

如果您不想使用 WinINet，您可以使用[现有](http://www.openssl.org/)的[TLS](http://en.wikipedia.org/wiki/Transport_Layer_Security)实现，也可以自己实现，但后者不是一个好主意。

# jscript - 改变外部进程的执行路径

> ID：12492047
> 
> 赞同：0
> 
> 时间：2012-09-19T09:33:37.247
> 
> 标签：jscript, wsh

我有一个通过 jscript（使用 cscript）运行的外部应用程序。问题是这个外部应用程序从它的执行路径中读取它的 cfg。例如，如果我单击 exe，它可能是 c:\program\myapp。

但是每当我通过我的 jscript 运行程序时，它的可执行路径就会设置为 c:\，因此它找不到它的配置文件。这个程序被称为“便携式”，因此它没有注册表项可以找到它自己的位置。

无论如何通过脚本来启动应用程序并仍然保持其真实路径而不是脚本引擎路径？

问候

乔纳斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T06:01:39.817

看看这篇文章：

[http://blogs.technet.com/b/heyscriptingguy/archive/2005/02/01/how-can-i-change-the-working-folder-of-a-script.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2005/02/01/how-can-i-change-the-working-folder-of-a-script.aspx)

示例代码在 VBScript 中，但很容易转换为 JScript。

第一个关键是使用对象的`CurrentDirectory`属性[`WshShell`](http://msdn.microsoft.com/en-us/library/aew9yb99%28VS.84%29.aspx)：

```
var objShell = new ActiveXObject("Wscript.Shell");
objShell.CurrentDirectory = "C:\\Windows"; 
```

第二个关键是提取可执行文件的目录名称。本文通过拆分路径来做到这一点，但我更喜欢使用[`FileSystemObject`](http://msdn.microsoft.com/en-us/library/z9ty6h50%28VS.84%29.aspx)：

```
var programPath = "C:\\MyApp\\myapp.exe";

var fso = new ActiveXObject("Scripting.FileSystemObject");
var programDir = fso.GetParentFolderName(programPath);

WScript.Echo(programDir); // C:\MyApp 
```

# ruby - 哈希内的 savon ruby 冒号

> ID：12492049
> 
> 赞同：0
> 
> 时间：2012-09-19T09:33:41.050
> 
> 标签：ruby, hash, savon, colon

是否有可能在 Ruby 中以某种方式在哈希中编写如下内容：

```
"xmlns:soap" 
```

所以它会像

```
:xmlns:soap 
```

问候。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T09:41:40.423

```
:"xmlns:soap" 
```

无论包含的字符如何，都会`Symbol`从您的 中创建一个。`String`这和写法一样：

```
"xmlns:soap".to_sym 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-19T09:39:52.920

`No`双引号之间的任何内容`"`都是字符串 / 所以它是不允许的。

但是，您可以执行以下操作

```
{value: :abc} # this will produce {:value=>:abc} 
```

注意：- 上面的代码仅适用于旧版本的 Ruby 1.9.3 编写简单

```
{:value=>:abc} 
```

# java - 将补丁应用于 Maven 战争覆盖

> ID：12492053
> 
> 赞同：1
> 
> 时间：2012-09-19T09:33:54.683
> 
> 标签：java, maven, maven-war-plugin

我们有一个 Maven 战争覆盖项目，目前向战争中添加了许多类和资源文件。我们还需要修改一些文件。我们不想将文件复制到我们的项目中并在那里进行修改，而是要使用 Maven 补丁插件。然而，由于战争覆盖似乎发生在一个 Maven 构建阶段（包）中，似乎没有办法在正确的时间应用补丁。

是否有使用 Maven 将补丁应用于战争文件的简单解决方案？

# .net - DbContext 作为 ObjectContext 提供者的功能如何？

> ID：12492059
> 
> 赞同：1
> 
> 时间：2012-09-19T09:34:10.663
> 
> 标签：.net, entity-framework, entity-framework-4, .net-4.0

我们有一个大型 EF 4.0 数据框架（基于`ObjectContext`、和） `EntitySet`，它是在考虑 DB 优先的情况下开发的。鉴于可以从 a 中获取 a ，我们是否可以仅通过使用将现有框架与 code-first 一起使用？ `EntityObject``ObjectStateManager``ObjectContext``DbContext``DbContext``IObjectContextAdapter`

我知道`DbContext`使用 POCO（而不是`EntityObject`后代），但这些 POCO 是类型的内部代理对象`Proxy<TPOCO>`。这些代理是否继承或提供对底层的访问，`EntityObject`并且是否存在底层`EntityObject`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:30:44.430

是的，您可以在需要`DbContext`的地方投射`IObjectContextAdapter`和访问`ObjectContext`来使用。

`DbContext`本身对任何类都很满意，您可以在没有实体框架创建代理的情况下使用 POCO。如果您使用代理对象，它只是从您的 POCO 对象派生的对象。仅此而已，仅此而已。因此没有`EntityObject`.

# javascript - gridview 中的 asp.net 复选框 - 缺少选中的属性

> ID：12492062
> 
> 赞同：1
> 
> 时间：2012-09-19T09:34:29.570
> 
> 标签：javascript, jquery, asp.net

在这个 asp.net gridview 控件中，checked 属性总是丢失。我需要通过 jquery 访问选中的属性

```
Gridview source:
            <Columns>
            <asp:TemplateField>
                <ItemTemplate>
                     <asp:CheckBox ID="chkSelected" runat="server" class="chkSummarySelection"  />
                   </ItemTemplate>
            </asp:TemplateField>
        </Columns> 
```

呈现为：

```
<input type="checkbox"  name="ctl00$ContentPlaceHolder1$gv$ctl02$SelectedCheckBox" id="ctl00_ContentPlaceHolder1_gv_ctl02_SelectedCheckBox"> 
```

没有可访问的选中属性。我试过了

```
$(".chkSummarySelection").click(function () {
var chk;
chk = $(this).prop("checked");
chk = $(this).attr("checked");
chk = $(this).is(":checked");
chk = $(this).attr("value");
chk = $(this).val();
chk = jQuery(this).is(':checked');
}); 
```

但没有任何效果

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T09:37:04.980

Jquery 找不到你的`CheckBox`，因为它没有任何 css 类。您需要将`class`定义更改为`CssClass`（`class`是 c# 中的关键字）：

```
<asp:CheckBox ID="chkSelected" runat="server" CssClass="chkSummarySelection"  /> 
```

# android - 将数据从 Service 传递到 Activity

> ID：12492063
> 
> 赞同：2
> 
> 时间：2012-09-19T09:34:30.300
> 
> 标签：android, android-activity

我有自己运行的服务（服务自动启动）。

我有活动。
在此 Activity 按钮中启动方法`DoIt()`：

```
Button.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
      DoIt();
    }
}); 
```

当我按下按钮并且方法有效时，一些数据会写入`data`我的服务中的变量。
我可以`data`在日志中看到：

```
public String getMessage(String data) {
... 
Log.d(TAG, "Our Data: " + data);
return date;
... 
```

**但是如何通过按下按钮在我的 Activity（按钮下方）中查看这些数据？**
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:49:11.487

您无法从您的活动中看到这些数据。
制作一个应用程序类会让你的事情变得更容易。您可以将数据保存在应用程序类中，以便服务可以更新它，而活动可以检索它。不知道这是否是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-22T07:17:48.733

# 从 IntentService 向 Activity 发送数据

> 关键词是BroadcastReceiver

BroadcastReceiver 在这种情况下很方便。

1.  从 IntentService 发送广播
2.  在 Activity 中接收广播。

**从服务发送数据**

```
public class YourService extends IntentService {

  public YourService() {
    super("yourService");
  }

  protected void onHandleIntent(@Nullable Intent intent) {

    sendDataToActivity()
  }

  private void sendDataToActivity()
  {

    Intent sendLevel = new Intent();
    sendLevel.setAction("TIMER_ACTION");
    sendLevel.putExtra( "TIMER_VALUE","This is the value from service");
    sendBroadcast(sendLevel);

  }

} 
```

**从服务接收数据**
为此，您需要注册您`Activity`的`BroadcastReceiver`

```
public class YourActivity extends AppCompatActivity {

   TimerReceiver receiver;

   @Override
   public void onCreate(Bundle savedInstanceState)
   {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.track_wifi_activity_layout);
       receiver = new TimerReceiver();
       registerReceiver(receiver, new IntentFilter("TIMER_ACTION"));  //<----Register
   }

   @Override
   public void onStop()
   {
      super.onStop();
      unregisterReceiver(receiver);           //<-- Unregister to avoid memoryleak
   }

   class TimerReceiver extends BroadcastReceiver {

       @Override
       public void onReceive(Context context, Intent intent) {

          if(intent.getAction().equals("TIMER_ACTION"))
          {
              int level = intent.getStringExtra("TIMER_VALUE");

              // Show it in activity
          }

       }

    }

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T11:46:37.977

像这样向您的活动添加处理程序：-

```
Handler handler = new Handler() {
        public void handleMessage(Message message) {
            Object path = message.obj;
            if (message.arg1 == RESULT_OK && path != null) {
                Toast.makeText(context,
                        "Success" + path.toString(), Toast.LENGTH_LONG)
                        .show();
            } else {
                Toast.makeText(context, "Operation failed.",
                        Toast.LENGTH_LONG).show();
            }

        };
    }; 
```

并在消息对象中发送来自服务的值，如下所示：-

```
 Messenger messenger = (Messenger) extras.get("MESSENGER");
                Message msg = Message.obtain();
                msg.arg1 = data;//your value here
                msg.obj = data;
                try {
                    messenger.send(msg);
                } catch (android.os.RemoteException e1) {
                    Log.w(getClass().getName(), "Exception sending message", e1);
                } 
```

希望它有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T11:17:45.863

您需要将服务绑定到您的活动。绑定服务后，您可以访问服务中的方法。看看这个例子如何 [http://developer.android.com/guide/components/bound-services.html](http://developer.android.com/guide/components/bound-services.html)

您还可以为您的服务添加一个侦听器，以便在数据更改时立即通知您的活动

# android - Android将图像添加到按钮

> ID：12492064
> 
> 赞同：13
> 
> 时间：2012-09-19T09:34:31.987
> 
> 标签：android, image, button

我想向 a 添加图像`Button`（不`imagebutton`，因为特定按钮可以包含文本或图像；加上 imagebutton 有同样的问题），同时仍保留原始的 android 样式按钮。因此，添加`android:background`XML 并不会削减它，因为这将删除带有圆角等的 android 默认按钮。`(android.R.drawable.btn_default)`

这有可能吗？

我认为一种方法是为`9patch`按下的按钮制作一个图像（一个用于向上，一个用于向下）并`onTouch Action_DOWN`制作一个可绘制的分层背景并将其放在按钮上，并做同样的事情，但另一个`9patch`用于`onTouch Action_UP`，但我认为这会大大降低了应用程序的性能，因为这将需要大量的资源读取和所有按钮单击的层合并（对于我的应用程序来说，这将是很多）。我上面所说的是否正确？

编辑：我不能在 XML 中声明图像的来源，因为我从 Web 服务获取图像，所以任何东西都可以放在按钮上，但它必须以编程方式发生。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-19T09:38:22.603

这可以使用layout.xml 中的`android:drawableTop`,`android:drawableBottom`​​ , `android:drawableLeft`,属性来完成。`android:drawableRight`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-09-10T06:45:21.613

[![在此处输入图像描述](../Images/1fa54d305f1dc28cf298a993c50e4547.png)](https://i.stack.imgur.com/8nont.png)

```
 <Button
            android:layout_width="0dp"
            android:layout_weight="1"
            android:background="@drawable/home_button"
            android:drawableLeft="@android:drawable/ic_menu_edit"
            android:drawablePadding="6dp"
            android:gravity="left|center"
            android:height="60dp"
            android:padding="6dp"
            android:text="AndroidDhina"
            android:textColor="#000"
            android:textStyle="bold" /> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-19T09:42:51.123

设置下面的按钮属性以显示带有文本的图像，使用此属性图像显示在文本上方。

```
<Button android:drawableTop="@drawable/ic_launcher"/> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-19T09:44:51.640

用于设置图像：

```
btn.setBackgroundResource(R.drawable.ic_launcher); 
```

对于设置文本：

```
btn.setText("My Button"); 
```

代码 ：

```
private Drawable buttonDrawable;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final Button btn=(Button) findViewById(R.id.button1);
    buttonDrawable=btn.getBackground();
    //Setting the image.
    btn.setBackgroundResource(R.drawable.ic_launcher);
    btn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            /*Removing image and setting text*/
            btn.setBackgroundDrawable(buttonDrawable);
            btn.setText("My Button");   
        }
    });
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T09:36:45.013

您可以创建自己的具有多种状态的可绘制对象并将其设置为背景

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_enabled="false" 
        android:drawable="@drawable/selected" />
    <item android:drawable="@drawable/normal" />
</selector> 
```

Drawables 可以有像这样的圆角。

```
<corners android:topLeftRadius="5dp" android:topRightRadius="5dp"
         android:bottomLeftRadius="0.2dp" android:bottomRightRadius="0.2dp"/> 
```

# mongodb - MongoDB如何实现它的空间索引？

> ID：12492065
> 
> 赞同：7
> 
> 时间：2012-09-19T09:34:33.550
> 
> 标签：mongodb

> 当前的实现在标准 MongoDB B 树上编码地理哈希码。$near 查询的结果是准确的。这种编码的一个限制虽然很快，但前缀查找并不能给出准确的结果，尤其是在位翻转区域附近。MongoDB 通过在初始前缀扫描之后进行网格邻居搜索来解决这个问题，以获取任何散乱的点。这通常可以确保在提供正确结果的同时保持非常高的性能。

这是否意味着 mongodb 将地球分成几个网格？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T12:41:56.140

Greg Studer (10gen) 的此演示文稿详细讨论了地理空间索引： [Geospatial Indexing with MongoDB](http://www.10gen.com/presentations/geospatial-indexing-with-mongodb)。

MongoDB 2.2 中的标准地理空间实现使用 2-D [GeoHash](http://en.wikipedia.org/wiki/Geohash)方法，精度可变：

```
By default, precision is set to 26 bits which is equivalent to approximately
2 feet given (longitude, latitude) location values and default (-180, 180)
bounds. 
```

GeoHash 方法确实存在一些边缘情况，其中一些点可能在空间上很接近，但具有不同的哈希值。MongoDB 还包括一个[地理空间干草堆索引](http://www.mongodb.org/display/DOCS/Geospatial+Haystack+Indexing)，该索引专门针对具有一个附加索引标准的小区域“近”长/纬度搜索进行了调整（例如：“查找 25 英里内名称为 'foo' 的所有餐厅”）。

Nicholas Knize (Thermopylae) 的另一个有趣的演示将当前的 B-tree / GeoHash 方法与[R-trees](http://en.wikipedia.org/wiki/R-tree)进行了对比。如果您向前跳到幻灯片 8，有一个可视化的解释可能会有所帮助： [RTree Spatial Indexing with MongoDB - MongoDC](http://www.slideshare.net/nknize/rtree-spatial-indexing-with-mongodb-mongodc)。

# css - 修复滚动到视图中的图像

> ID：12492066
> 
> 赞同：1
> 
> 时间：2012-09-19T09:34:39.037
> 
> 标签：css, image, styling, fixed

知道如何将图像固定到页面底部（不是屏幕），一旦页面滚动到底部，它就会落在固定在底部的图像后面。这显然可以通过绝对位置和底部来完成：0 但我的背景图像是固定的并且是响应式的。

有什么想法吗？

我试过固定位置，但它总是在视野中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:45:43.693

你的意思是这样的： http: [//dabblet.com/gist/3748749](http://dabblet.com/gist/3748749)？

# php - 加入两个表？

> ID：12492067
> 
> 赞同：1
> 
> 时间：2012-09-19T09:34:40.053
> 
> 标签：php, mysql

我在搜索教程的两个表中加入有问题，但我找不到任何可以帮助我的东西。

我在 SQL 中有两个表 | 会员 | 和 | 画廊 | 画廊的结构是 id - member_id - picname。如何将画廊表加入会员并限制显示的图片数量？因为我有所有成员的列表，我希望每个成员只显示一张照片。请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:35:48.270

您可以使用sql JOIN，JOIN关键字用于SQL语句中，根据这些表中某些列之间的关系从两个或多个表中查询数据。

*   JOIN：当两个表中至少有一个匹配时返回行
*   LEFT JOIN：返回左表的所有行，即使右表没有匹配
*   RIGHT JOIN：返回右表中的所有行，即使左表中没有匹配项
*   FULL JOIN：当其中一个表中存在匹配时返回行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:37:23.930

```
SELECT m.*, g.picname
FROM members m
LEFT JOIN gallery g ON g.member_id=m.id
GROUP BY m.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:36:08.290

对此进行子查询可能很有用，

```
SELECT  a.*, b.minPic
FROM    members a
        INNER JOIN 
        (
            SELECT member_ID, MIN(picname) minPic
            FROM gallery
            GROUP BY memberID
        )
            ON a.id = b.member_ID 
```

# jquery - 将 parent 应用于没有它的孩子

> ID：12492069
> 
> 赞同：-2
> 
> 时间：2012-09-19T09:34:50.350
> 
> 标签：jquery, html, css, dom

我有一个容器中的元素列表。元素是包含 a 标签的 li。

我的问题是并非所有的 a 都在 li 标签内（这是由于以前的 jquery 操作造成的）。

如何遍历列表并将不在 li 中的 a 标签放在一个中？

这是相关的html：

```
<ul class="dropdownmenu" style="display: none; ">

<li><a href="Advanced">Advanced</a></li>
<li><a href="Account">Account</a></li>

<a href="Credit Notes">Credit Notes</a>
<a href="Invoices In">Invoices In</a>

<li><a href="Invoices Out">Invoices Out</a></li>
<li><a href="Invoices Jobs">Invoices Jobs</a></li>

</ul> 
```

还有我的 javascript：

```
$('li[id^="nav"]').each(function(){ // For each nav item that has fallen out of the menu due to low res etc...
    pos = $(this).position() ;
    if(pos.top > 0)
    {
        var cnt = $('ul.dropdownmenu', this).contents()
        $('ul.dropdownmenu', this).replaceWith(cnt);
        $('span.droptop', this).remove();
        $('a:has(i span)', this).remove() ;
        $('i', this).remove() ;
        // NOW WRAP As in LIs THAT DON'T HAVE ONE
        movables += $(this).html() ;
        $(this).hide() ;
        somethingHidden = true ;
    }
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:42:00.250

在运行函数**之前**简单地包装所有`a`元素：

 **```
$('ul.dropdownmenu > a').wrap('<li />'); 
```**

# sql - 选择开始，停止和行数，需要总计

> ID：12492074
> 
> 赞同：3
> 
> 时间：2012-09-19T09:35:09.913
> 
> 标签：sql, oracle

我有这个 oracle sql，它为我提供了一个用于分页的记录子集。我还需要记录总数，我可以结合这两个查询吗？真正的查询要复杂得多（与 where 等联合），我对其进行了简化，以免分散我的问题。

```
select count(*) from table;
select outerfields.* from 
 (select row_number() over (order by id asc) r, innerfields.* from 
   ( (select * from table) innerfields)) outerfields where r between 1 and 10; 
```

显然像下面这样的东西不起作用

```
select max(r), outerfields.* from 
  (select row_number() over (order by id asc) r, innerfields.* 
    from ( (select * from m30brief) innerfields)) outerfields where r between 1 and 10; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:59:52.357

您可以添加`count(*) over()`到`outerfields`派生表：

```
select outerfields.* 
  from 
  (
    select row_number() over (order by id asc) r, 
           count(*) over () totalRows,
           innerfields.* 
      from 
      (
        select * 
          from table
      ) innerfields
  ) outerfields
 where r between 1 and 10; 
```

# cakephp - CakePHP 2.2.2 不能在 Windows IIS7 上运行

> ID：12492078
> 
> 赞同：1
> 
> 时间：2012-09-19T09:35:29.290
> 
> 标签：cakephp, iis, iis-7, url-rewriting, cakephp-2.2

我正在尝试使用 IIS7 让 CakePHP 在 Windows 上工作，但我无法按照官方文档获得它：http: [//book.cakephp.org/2.0/en/installation/advanced-installation.html#url-rewrites-on- iis7-windows-主机](http://book.cakephp.org/2.0/en/installation/advanced-installation.html#url-rewrites-on-iis7-windows-hosts)

我已经从这里下载了 IIS7 的重写模块：http: [//www.microsoft.com/en-us/download/details.aspx?id=](http://www.microsoft.com/en-us/download/details.aspx?id=7435) 7435 然后以管理员身份安装它。

如文档所述，我在我的 cakephp 主文件夹中创建了**web.config**文件。

我得到的结果是，当我尝试使用浏览器加载我的 cakephp 主文件夹时，它会尝试加载 IIS7 的 wellcome.png 图像（加载失败）并且它不加载任何项目或 cakephp 内容。

如果我从邮件文件夹中删除**web.config**文件，cakephp 会加载，但会显示以下错误：

```
URL rewriting is not properly configured on your server.    
1) Help me configure it 
2) I don't / can't use URL rewriting 
```

我究竟做错了什么？任何的想法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:17:52.857

好的，我现在可以工作了。

下载并安装 IIS7 的重写模块后，我必须做什么（[http://www.microsoft.com/en-us/download/details.aspx?id=7435](http://www.microsoft.com/en-us/download/details.aspx?id=7435)）

*   在 IIS 中创建一个指向 CakePHP 项目文件夹的新站点
*   使用 URL 重写模块导入和应用 .htaccess 文件
    *   APP\webroot\.htaccess
    *   应用程序\.htaccess

就是这样。希望这可以帮助任何人:)

# email - 谷歌分析和核心指标标签

> ID：12492080
> 
> 赞同：-5
> 
> 时间：2012-09-19T09:35:33.673
> 
> 标签：email, google-analytics

有没有人在同一封竞选电子邮件中使用谷歌分析和核心指标的经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:16:14.410

通过实验，我发现您可以在同一个 URL 中同时使用核心指标和谷歌分析，并且仍然可以跟踪。这是我们使用的示例 URL

[http://www.somesite.com/index.cfm/dep/mens/cat/jackets/subcat/group/909/level/3?cm_mmc_o=cmtag&utm_campaign=example&utm_medium=email&utm_source=newsletter](http://www.somesite.com/index.cfm/dep/mens/cat/jackets/subcat/group/909/level/3?cm_mmc_o=cmtag&utm_campaign=example&utm_medium=email&utm_source=newsletter)

该网址是一个示例，因此不起作用。

# css - CSS在标题后面显示信息？

> ID：12492081
> 
> 赞同：0
> 
> 时间：2012-09-19T09:35:35.680
> 
> 标签：css

我的 css 文件中有很多 div。现在我的 html 页面中显示了正确的布局，但有一个严重的问题是：如果我在中心 div 中显示信息，它只显示部分信息，而其他信息被标题覆盖。

这意味着中心 div 不是在标题之后开始，而是从标题开始，因此数据显示在标题后面。后面是它们的代码。

```
#header{ 
/*background-color: #3B5998;*/
 background-image:-moz-linear-gradient(center bottom , #ebebeb, #999999);
    background: #F6F6F6 -webkit-gradient(linear, 0% 0%, 0% 100%, from(#999999), to(#ebebeb));  
height:60px;
position:fixed;
left:0;
width:100%;
}

#center { 
margin-right:200px;
background-color:white; 
min-height:700px; /* for modern browsers */
height:auto !important; /* for modern browsers */
height:700px; /* for IE5.x and IE6 */
color:black;

} 
```

这里有什么遗漏会导致这个问题吗？这篇文章附有一张图片，显示了如何只显示图片而不是上面的文字。如果我添加 3
它会显示文本。![在此处输入图像描述](../Images/3177e062f10e7bb04938d4a278f33871.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:38:59.303

添加`margin-top: 60px;`到中心 div。

```
#center { 
margin-right:200px;
margin-top: 60px;
background-color:white; 
min-height:700px; /* for modern browsers */
height:auto !important; /* for modern browsers */
height:700px; /* for IE5.x and IE6 */
color:black;

} 
```

因为你的标题是 position: fixed; 它已从文档流中取出，因此任何元素都会出现在它下面，除非得到向下移动的指令。

诀窍是让 margin-top 与 header 元素的高度相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:40:10.103

试着把`float:left`所有的，如果你能给出一个屏幕截图，最好解决它

# android - 如何在我的布局 xml 中使用默认的 android 资源？

> ID：12492084
> 
> 赞同：12
> 
> 时间：2012-09-19T09:35:45.030
> 
> 标签：android, xml, layout, resources, default

android中有很多默认资源。我想使用`android.R.string.cancel`and `android.R.string.ok`。

我可以很容易地在代码中做到这一点

```
getString(android.R.string.cancel) 
```

但是如何在 layout.xml 中做到这一点

```
@string/cancel 
```

尝试了几件事

```
@android.R.string/cancel
@android.string/cancel 
```

但这些不起作用。我确定我在开发教程上看到过这个，但现在找不到。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-19T09:38:14.170

实际上是@android:string/cancel

# visual-studio-2010 - 使用 sql 报表图表的运算符和函数（Visual Studio 2010）

> ID：12492090
> 
> 赞同：1
> 
> 时间：2012-09-19T09:36:18.347
> 
> 标签：visual-studio-2010, reporting-services

我想使用 sql 报告服务创建一些图表。但是我无法将很多函数和运算符与我的数据字段结合使用

以下工作（笔画数据类型为十进制）：

```
> =Fields!Stroke.Value
> =Sum(Fields!Stroke.Value)
> =First(Fields!Stroke.Value)
> =Last(Fields!Stroke.Value)
> =2+2394.12 
```

以下不起作用：

```
> =Fields!Stroke.Value + 2
> =CStr(Fields!Stroke.Value)
> =CDbl(Fields!Stroke.Value)
> =Fields!Stroke.Value / Fields!Stroke.Value
> =Sum(Fields!Stroke.Value) * 2 
```

所有其他运算符和函数（使用 Fields!Stroke.Value）也不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:33:35.310

我使用这个虚拟数据创建了一个带有直方图的报告：

```
SELECT        'Accountant' AS JOB_TITLE, CAST(20.23 AS Decimal(5, 2)) AS FEE UNION ALL
SELECT        'Secretary' AS JOB_TITLE, CAST(45.83 AS Decimal(5, 2)) AS FEE UNION ALL
SELECT        'Manager' AS JOB_TITLE, CAST(21.55 AS Decimal(5, 2)) AS FEE UNION ALL
SELECT        'Helpdesk' AS JOB_TITLE, CAST(17.99 AS Decimal(5, 2)) AS FEE UNION ALL
SELECT        'Technician' AS JOB_TITLE, CAST(13.31 AS Decimal(5, 2)) AS FEE 
```

当您在 SSRS 中创建图表时，您至少应该在“类别组”部分中有一个字段。在这种情况下，我在那里使用了 JOB_TITLE 字段。

在图表数据的 SUM Values 部分中，您需要使用某种聚合或数字文字。

我能够在图表数据的 Sum Values 部分成功使用所有这些：

```
=Fields!FEE.Value + 2
=CStr(Fields!FEE.Value)
=CDbl(Fields!FEE.Value)
=Fields!FEE.Value/Fields!FEE.Value
=SUM(Fields!FEE.Value) * 2 
```

我很惊讶这`=CStr(Fields!FEE.Value)`行得通，因为字符串没有比例，所以将它映射到轴是没有意义的，但它似乎隐含地应对它。使用它也没有任何意义，`=Fields!FEE.Value/Fields!FEE.Value`因为图表上的所有数据点都是 1，除非你的值是 0，在这种情况下它会出错。

我在这里验证了当查询的记录都是小数时，所有这些函数都可以工作。我怀疑您数据中的某些内容导致这些功能中断。在不知道您的数据是什么样子的情况下，我无法提供任何进一步的帮助。

# android - Android 果冻豆数据库被锁定（代码 5）

> ID：12492093
> 
> 赞同：4
> 
> 时间：2012-09-19T09:36:29.460
> 
> 标签：android, database, sqlite, android-4.2-jelly-bean

我在我的 ListActivity 中获取了一个数据库被锁定（代码 5），该代码在其他版本的模拟器中工作，但在 4.1 版本的模拟器中失败

> E/SQLiteLog（2132）：（5）数据库被锁定 E/SQLiteDatabase（2132）：无法打开数据库'/data/data/id.online.mydroid/databases/geo.db'。E/SQLiteDatabase（2132）：android.database.sqlite.SQLiteDatabaseLockedException：数据库被锁定（代码 5）：，编译时：PRAGMA al_mode E/SQLiteDatabase（2132）：在 android.database.sqlite.SQLiteConnection.nativePrepareStatement（本机方法） E/SQLiteDatabase(2132): 在 android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882) E/SQLiteDatabase(2132): 在 android.database.sqlite.SQLiteConnection.executeForString(SQLiteConnection.java:627) E/ SQLiteDatabase（2132）：在 android.database.sqlite.SQLiteConnection.setJournalMode（SQLiteConnection.java:313） E/SQLiteDatabase（2132）：在 android.database.sqlite.SQLiteConnection。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-20T01:01:36.490

beginTransaction 持有锁

# datagrid - 如何在 DataGrid 中显示复选框 itemRenderer 的标签

> ID：12492108
> 
> 赞同：0
> 
> 时间：2012-09-19T09:37:48.257
> 
> 标签：datagrid, checkbox, flex4.5, itemrenderer, datagridcolumn

我的数据网格的 dataProvider 是一个有 2 列的 arrayCollection。arrayCollection 的第一列包含 true 或 false（以便选中复选框），另一列包含标签，这意味着 arraycollection 不包含要在每个复选框上显示的实际字符串。需要使用的标签将从 XML 文件中获取标签。所以标签将来自一个 XML 文件。

XML 文件是这样的：

```
<tags>
 <tags1>CheckBox Label 1</tags1>
 <tags2>CheckBox Label 2</tags2>
 <tags3>CheckBox Label 3</tags3>
</tags> 
```

因此，相信我需要在 DatagridColumn 上使用“labelFunction”属性。这是要使用的方式，以便我可以在数据网格中的每个复选框上显示标签吗？

我的数据网格的代码是这样的：

```
<mx:DataGrid id="myGrid" dataProvider ="myDP" showHeaders="false" headerHeight="0">
                    <mx:columns>

                        <mx:DataGridColumn headerText="" dataField="IS_ACCESSIBLE">
                            <mx:itemRenderer>
                                <fx:Component>
                                    <mx:HBox horizontalAlign="left">
                                        <s:CheckBox id="mycheckBox"/>
                                    </mx:HBox>
                                </fx:Component>
                            </mx:itemRenderer>
                        </mx:DataGridColumn>

                    </mx:columns>
                </mx:DataGrid> 
```

谁能帮我解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:24:37.337

我已经能够这样设置复选框的标签属性：

标签=“{outerDocument.myXML.tags[data.tags]}”

使用实际上来自datagrid的dataProvider的[]和“data.tags”解决了这个问题。这使得变量的最后一部分是动态的。

# php - 从 wordpress 中的摘录中删除“阅读更多”仅针对一个摘录而不是另一个

> ID：12492111
> 
> 赞同：0
> 
> 时间：2012-09-19T09:37:59.173
> 
> 标签：php, wordpress

我只是想知道如何才能删除一个特定摘录而不是 Wordpress 中的另一个摘录的“阅读更多”。我也在尝试学习 php，所以我认为这是一种有用的学习方式

我`the_excerpt();`在这两个地方都在 WP 循环中使用。

在functions.php页面中也有这些行

```
function limerickfc_continue_reading_link() {
return ' <a href="'. esc_url( get_permalink() ) . '">' . 
'<br />'.__( 'Read more ',         'limerickfc' ) . '</a>';
 }

function limerickfc_custom_excerpt_more( $output ) {
if ( has_excerpt() && ! is_attachment() ) {
    $output .= limerickfc_continue_reading_link();
}
return $output;
}
add_filter( 'get_the_excerpt', 'limerickfc_custom_excerpt_more' ); 
```

所以我说得对吗？每次调用时都会`limerickfc_custom_excerpt_more`添加？`get_the_excerpt`是否可以在循环中一次性删除此过滤器，我不想“阅读更多”我`remove_filter( 'get_the_excerpt', 'limerickfc_custom_excerpt_more' );`在循环中尝试过但没有运气。

任何帮助都会非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:06:26.010

无论如何都不是解决方案，但我最终只是通过将摘录文本放在文本下方结束的 div 中来隐藏它。然后是 css 样式，`overflow:hidden`以阻止阅读更多链接被看到。

# java - 覆盖 LookAndFeel

> ID：12492114
> 
> 赞同：1
> 
> 时间：2012-09-19T09:38:04.237
> 
> 标签：java, swing, look-and-feel, jprogressbar, uimanager

您好，我正在尝试在 java 中更改摆动进度条的颜色。最初我尝试使用以下代码：

```
UIManager.put("ProgressBar.selectionBackground", Color.black);
UIManager.put("ProgressBar.selectionForeground", Color.white);
UIManager.put("ProgressBar.background", Color.white);
UIManager.put("ProgressBar.foreground", Color.RED);
m_progressBar.setBackground(Color.BLACK);
m_progressBar.setForeground(Color.red); 
```

但是所有命令似乎都没有任何效果！！！除非我设置`m_progressBar.stringPainted(true)`然后前景确实改变了。

无论如何，我知道问题出在以下命令：`UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");` 在 UI 初始化之前调用。

所以我的问题是：
1）出于好奇：为什么`stringPainted(true)`调用会设法覆盖前台 UI 设置？
2) 我如何保留`UIManager.setLookAndFeel`代码的开头并仍然覆盖 UI 设置？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:43:03.293

试试这个.............

```
`Changing the Look and Feel After Startup` 
```

`You can change the L&F with setLookAndFeel even after the program's GUI is visible. To` `make existing components reflect the new L&F, invoke the SwingUtilities updateComponentTreeUI method once per top-level container. Then you might wish to resize each top-level container to reflect the new sizes of its contained components.`

**例如：**

```
UIManager.setLookAndFeel(lnfName);
SwingUtilities.updateComponentTreeUI(frame);
frame.pack(); 
```

换句话说：您可以更改顶级容器的外观和感觉（我没有测试它是否仅限于顶级容器，或者此方法是否可以应用于任何容器）。或者，更准确地回答您的问题：我没有看到有样式设置单个组件的方法，但是有一种方法可以在（顶层）容器中设置单个组件。

# google-maps - 如何在 url 中绘制谷歌地图

> ID：12492126
> 
> 赞同：0
> 
> 时间：2012-09-19T09:38:46.400
> 
> 标签：google-maps, google-maps-api-3, google-maps-api-2

请看看[这个](http://www.in-pa.org/?page_id=187)

我只想创建一个像这样的谷歌地图。我知道这是一项简单的工作，但我没有创建地图的经验。我想在谷歌地图上添加多个地址，并添加相应的电子邮件、地址、电话详细信息。

所以如果有人能告诉我怎么做..我想将该地图的副本添加到我的网站..

任何形式的帮助都非常感谢..

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T09:41:20.027

你试过什么了？

查看[Google maps API](https://developers.google.com/maps/documentation/javascript)并尝试创建一个简单的地图。这并不难。[您可以在此处](https://developers.google.com/maps/documentation/javascript/tutorial)找到教程。阅读文档，编写一些代码。如果您仍然有一些问题和疑问，请回来询问。

为了更有帮助，这里是显示地图的示例（来自教程）：

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0px; padding: 0px }
  #map_canvas { height: 100% }
</style>
<script type="text/javascript"
    src="https://maps.google.com/maps/api/js?sensor=set_to_true_or_false">
</script>
<script type="text/javascript">
  function initialize() {
    var latlng = new google.maps.LatLng(-34.397, 150.644);
    var myOptions = {
      zoom: 8,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"),
        myOptions);
  }

</script>
</head>
<body onload="initialize()">
  <div id="map_canvas" style="width:100%; height:100%"></div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:42:01.593

您只需使用 google maps api 创建地图并向地图添加标记。

文档：

[https://developers.google.com/maps/documentation/javascript/reference#Marker](https://developers.google.com/maps/documentation/javascript/reference#Marker)

看看这个例子的源代码，它应该告诉你该怎么做：

[https://google-developers.appspot.com/maps/documentation/javascript/examples/map-coordinates](https://google-developers.appspot.com/maps/documentation/javascript/examples/map-coordinates)

# java - 如何使用反射比较两个不同类中方法名称的最后一些字母？

> ID：12492135
> 
> 赞同：0
> 
> 时间：2012-09-19T09:39:08.977
> 
> 标签：java, reflection, methods

我有两节课

```
class A {
    public String getAb001() {
        return ab001;
    }
    // Other Methods
}

class B {
    public String getXy001() {
        return xy001;
    }
    // Other Methods
} 
```

注意：方法注意事项：两个类的方法名都通过方法名的前两个字母来区分（例如Ab001和Xy001，这里前两个字母不同，包括get）。
当 A 类方法名称等于 B 类方法时，我需要打印成功消息。这里扣除get+方法名的前两个字母后，应该会打印成功信息。
这将有助于我的大问题。请填写免费分享。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:49:57.180

这看起来很简单，如果我遗漏了什么，请发表评论：

```
boolean areMatch(Method a, Method b) {
  return salientNamePart(a).equals(salientNamePart(b));
}

String salientNamePart(Method m) {
  return m.getName().substring(5);
} 
```

# python - 字符串中所有字符的 ASCII 值的 Python 总和

> ID：12492137
> 
> 赞同：13
> 
> 时间：2012-09-19T09:39:11.317
> 
> 标签：python, string, python-2.7, ascii

我正在寻找一种更有效的方法来总结给定字符串中所有字符的[ASCII](http://en.wikipedia.org/wiki/ASCII)值，仅使用标准 python（最好是 2.7）。

目前我有：

```
print sum(ord(ch) for ch in text) 
```

**我想强调一下，我在上面写的这个问题的主要重点和方面。**

**以下是这个问题的不太重要的方面，应该这样对待**：

那我问它干嘛？！我已经将这种方法与嵌入一个简单的 C 代码函数进行了比较，该函数在[此处](http://markandclick.com/advance.html#Cboost)使用 PyInline 执行相同的操作，似乎一个简单的 C 嵌入函数要快 17 倍。

如果没有比我建议的更快的 Python 方法（仅使用标准 Python），那么 Python 开发人员没有在核心中添加这样的实现似乎很奇怪。

建议答案的当前结果。在我的 Windows 7、i-7、Python 2.7 上：

```
 text = "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
 sum(ord(ch) for ch in text)
 >> 0.00521324663262
 sum(array.array("B", text))
 >> 0.0010040770317
 sum(map(ord, text ))
 >> 0.00427160369234
 sum(bytearray(text))
 >> 0.000864669402933

 C-code embedded:
 >> 0.000272828426841 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-19T09:51:00.507

您可以使用中间体`bytearray`来加快速度：

```
>>> sum(bytearray("abcdefgh"))
804 
```

这并不比生成器快 17 倍——它涉及创建中间体`bytearray`，并且`sum`仍然必须迭代 Python 整数对象——但在我的机器上，它确实将 8 字符字符串的求和速度从 2μs 加快到大约 700ns。如果这个球场的时间对于您的用例来说仍然太低效，那么您可能无论如何都应该用 C 编写应用程序的速度关键部分。

如果您的字符串足够大，并且可以使用`numpy`，则可以通过使用直接引用字符串的缓冲区来避免创建临时副本`numpy.frombuffer`：

```
>>> import numpy as np
>>> np.frombuffer("abcdefgh", "uint8").sum()
804 
```

对于较小的字符串，这比临时数组慢，因为 numpy 的视图创建机制很复杂。然而，对于足够大的字符串，这种`frombuffer`方法开始得到回报，而且它当然总是产生更少的垃圾。在我的机器上，截止点是大约 200 个字符的字符串大小。

另请参阅 Guido 的经典文章[Python 优化轶事](https://www.python.org/doc/essays/list2str/)。虽然它的一些特定技术现在可能已经过时，但如何*考虑*Python 优化的一般课程仍然非常相关。

* * *

您可以使用该`timeit`模块对不同方法进行计时：

```
$ python -m timeit -s 's = "a" * 20' 'sum(ord(ch) for ch in s)' 
100000 loops, best of 3: 3.85 usec per loop
$ python -m timeit -s 's = "a" * 20' 'sum(bytearray(s))'
1000000 loops, best of 3: 1.05 usec per loop
$ python -m timeit -s 'from numpy import frombuffer; s = "a" * 20' \
                      'frombuffer(s, "uint8").sum()' 
100000 loops, best of 3: 4.8 usec per loop 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-19T09:57:28.060

您可以通过删除生成器的创建来加快它的速度（约 40% ish，但远不及本机 C 的速度）......

代替：

```
sum(ord(c) for c in string) 
```

做：

```
sum(map(ord, string)) 
```

* * *

时间：

```
>>> timeit.timeit(stmt="sum(map(ord, 'abcdefgh'))")
# TP: 1.5709713941578798
# JC: 1.425781011581421
>>> timeit.timeit(stmt="sum(ord(c) for c in 'abcdefgh')")
# TP: 1.7807035140629637
# JC: 1.9981679916381836 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-18T04:32:14.747

```
print sum(map(ord,my_string)) 
```

这将是最简单的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-23T08:23:28.063

**打印字符串中字符的 ASCII 值的总和**

首先将所有字符串转换为列表，每个单词都分开。然后使用 ord() 函数将每个字符转换为 ascii 并将它们存储在列表中，然后添加所有列表值。

```
str1 = input("Please Enter your Own String : ")
li=[] 
li[:0]=str1 
print(li)
result=[]
for i in range(len(li)):
    result.append(ord(li[i]))
    result = list(set(result))
print(result)   
final=sum(result) 
print("The sum of the your string '{}'is: {}".format(str1,final)) 
```

# actionscript-3 - Flex PMD 无法随时工作？

> ID：12492146
> 
> 赞同：0
> 
> 时间：2012-09-19T09:39:38.037
> 
> 标签：actionscript-3, apache-flex, flex4.5, flash-builder4.5, flex-pmd

看到 FlexPMD 的结果后，我感到很惊讶。[我按照zoltanb](http://zoltanb.co.uk/how-to-install-flexpmd-in-flex-builder-4-5/)的说法安装了 FlexPMD 。我有一个大约有 2500 个文件的项目，我记得，我有很多重复的代码并且没有注释代码意味着注释了一行调用一个函数，所以整个函数自动注释所以为什么 PMD 不给出结果或任何输出FlexPMD 选项卡？

如果您有任何想法，请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:42:16.320

经过研究，我们找到了解决这个问题的一点：

**1.您的项目路径不包含任何空格。**

**2\. 您的 Flex SDK 必须在管理模式下打开。**

这里我的问题是我的项目路径 在将其更改为**D:\Facebookapps后包含一个空格****D:** \Facebookapps ，我有解决方案。

 **愿这对你有用@The_asMan**

# android - 这有效并在 EditText 中显示字符串，但不适用于 TextView

> ID：12492148
> 
> 赞同：1
> 
> 时间：2012-09-19T09:39:49.003
> 
> 标签：android, android-edittext, textview

我在尝试在 textview 上使用 setText 显示一串文本时遇到了真正的问题。我对 web 服务的所有调用，我获取数据的函数，如果我使用 EditText 来显示字符串，一切都会正确显示，但我宁愿文本只是出现在屏幕上，而不是作为文本出现在 EditText 中是信息而不是用户可以编辑的东西。

此代码适用于 EditText -

```
package xxx.refusecollectionday;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.Bundle;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class SingleListItem extends Activity{
    /** Called when the activity is first created. */
    private static String NAMESPACE = "http://xxx";
    private static String URL = "http://xxx/Service.asmx";
    private static String SOAP_ACTION = "http://xxxx";
    private static String METHOD_NAME1 = "xxx";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.single_list_item_view);

        Intent intent = getIntent();
        String uprn = intent.getStringExtra(AndroidListViewActivity.UPRN).trim();
        String displayText = "";

        //Initialize soap request + add parameters
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME1);

        //Use this to add parameters
        request.addProperty("UPRN",uprn);

        //Declare the version of the SOAP request
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        envelope.setOutputSoapObject(request);
        envelope.dotNet = true;

        try {
            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

            //this is the actual part that will call the webservice
            androidHttpTransport.call(SOAP_ACTION, envelope);

            // Get the SoapResult from the envelope body.
            SoapObject result = (SoapObject)envelope.bodyIn;

            if(result != null) {                
                String strXML = result.getProperty(0).toString();               
                strXML = sortXMLString(strXML);
                                }
            }else{
                showBalloonPopUp("No Response");
            }
        }catch(Exception e) {
            e.printStackTrace();
        }

        displayText = displayText + "\nTo contact the Customer Service Centre:\n";

        EditText txtCollectionResults = (EditText) findViewById(R.id.collectionresults);

        // displaying selected product name
        txtCollectionResults.setText(displayText); 

        //showAlertDialog(displayText);
    }

     public void showBalloonPopUp(String popUpMessage){
        Toast.makeText(this, popUpMessage, Toast.LENGTH_SHORT).show();
    }

       public void showAlertDialog(String alertMessage){
        AlertDialog ad = new AlertDialog.Builder(this).create();  
        ad.setCancelable(false); // This blocks the 'BACK' button  
        ad.setMessage(alertMessage);  
        ad.setButton(-1, "OK", new DialogInterface.OnClickListener() {  
            @Override  
            public void onClick(DialogInterface dialog, int which) {  
                dialog.dismiss();                      
            }  
        });  
        ad.show(); 
    }

     public String sortXMLString(String stringToCorrect){
        // do stuff

        return stringToCorrect;
    }
}

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent">
  <EditText android:id="@+id/collectionresults"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textSize="15dip"                 
            android:padding="10dip"
            android:textColor="#000000"
            android:maxLines="50" 
            android:editable="false" />
</LinearLayout> 
```

但是如果我将 EditText 更改为 xml 中的 TextView，则如下

```
TextView txtCollectionResults = (TextView) findViewById(R.id.collectionresults);

        // displaying 
        txtCollectionResults.setText(displayText); 
```

不显示任何文字

# c# - 从 Ajax 向 Web 服务传递参数

> ID：12492164
> 
> 赞同：0
> 
> 时间：2012-09-19T09:40:27.697
> 
> 标签：c#, jquery, ajax

我尝试将参数传递给我的 Web 服务并在文本框中显示结果。我的网络服务正在工作。我在浏览器中调用了方法...我认为我的 Jquery 有问题。

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="QRCode.aspx.cs" Inherits="QRCODE_QRCode"
    meta:resourceKey="Page" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>
<%@ Register Assembly="System.Web.Ajax" Namespace="System.Web.UI" TagPrefix="asp" %>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" >

<html>
<head id="Head1" runat="server">
   <title>Check-In & Check-Out </title>

<script language="javascript" type="text/javascript">

    function capture() {
        var urlValue = window.location;
        var urlText = urlValue.toString();
        var start = urlText.indexOf("=") + 1;
        var nameText = urlText.substring(start, urlText.length);
        document.getElementById('PanelID').value = nameText;
    }
    window.onload = capture

    function loadDate() {
           jQuery.support.cors = true;
           var PanelIDs = document.getElementById('PanelID').value;
          alert(PanelIDs);

          $.ajax({
              type: "POST",
              url: "http://entwicklung.de/Web/Service1.asmx/getDatetime",
              data: { "PanelIDs": PanelIDs },
              contentType: "application/json; charset=utf-8",
              dataType: "json",
              success: function(data) {

                  $("#textbox").text(data.d);
              },
              error: function(jqXHR, textStatus, errorThrown) {
                  alert(jqXHR);
                  alert(textStatus);
                  alert(errorThrown);
              }

          });

        }

</script>
</head>
<body>

<h1>Check-In und Check-Out von Besprechungen</h1>

<form id="form1" runat="server">
  <p>
     <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">  
     </asp:ToolkitScriptManager>  

    Raum: <asp:TextBox type="text" name="Panels" id="PanelID" value="" runat="server"></asp:TextBox>
    <br /> <br />

<asp:textbox ID="textbox" mode="multiline" runat="server" Coloumns="20" Rows="4" 
          Height="230px" Width="405px"></asp:textbox>

<asp:Button ID="button" runat="server" Text="Check-In"  Width="99px" 
      OnClientClick="return loadDate();"   />

<asp:Button ID="button1" runat="server" Text="Check_Out" Width="99px" />

  </p>
</form>
</body>
</html> 
```

我在做什么错？感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:58:36.453

data: "{ 'PanelID': '" + PanelIDs + "' }" 应该是 data: "{ **'PanelIDs'** : '" + PanelIDs + "' }"

kay需要匹配属性名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:21:41.397

首先测试您的网络服务网址和您的网络服务方法应该是公开的，并且您的网络服务网址与您的网络方法一样

```
 url: "www.entwicklung.de/Web/Service1.asmx/getDatetime", 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T10:25:50.653

您可以调整您的`data`- PanelIDs`(with s in the end)`

```
data: "{ 'PanelIDs': '" + PanelIDs + "' }" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T09:47:54.427

'data' 应该是一个对象而不是 JSON 字符串：

```
data: { "PanelID": PanelIDs } 
```

# ruby - Padrino/Sinatra 路线中的常量

> ID：12492167
> 
> 赞同：1
> 
> 时间：2012-09-19T09:40:38.333
> 
> 标签：ruby, sinatra, padrino

在 Sinatra/Padrino 中，哪里是添加常量以供在路由内部使用的合理位置？

我正在使用 Padrino 挂载多个应用程序，因此我希望所有应用程序都可以使用常量。（所有应用程序都继承自基类。）

我使用[Sinatra.helpers](http://www.sinatrarb.com/extensions.html#extending_the_request_context_with_)添加在路由内部使用的方法。

我希望对常量采用类似的方法。

**更新**

这似乎是一个范围界定问题，但我无法弄清楚这种情况下出了什么问题。

这是一个简化的 padrino 应用程序，它演示了这个问题：

*应用程序.rb*

```
class MyProject < Padrino::Application
  register Padrino::Rendering
  register Padrino::Mailer
  register Padrino::Helpers

  MY_CONST = 123
end 
```

*控制器.rb*

```
MyProject.controller do
  get "/" do
    p self.class            # => MyProject
    p self.class.constants  # => [:DATA_ATTRIBUTES, ... <snip>..., :MY_CONST, ... <snip>... ]
    p MyProject::MY_CONST   # => 123
    p MY_CONST              # => NameError - uninitialized constant MY_CONST
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:52:31.347

好的，所以显然我遇到了一个问题，即 Ruby 如何在 instance_evaled 的 proc 中处理常量查找。

这是重新创建错误的无 Padrino 方法：

```
class Thing

  MY_CONST = 123

  def doStuff (&block)
    p "doStuff: #{self.class}"        # => "doStuff: Thing"
    p "doStuff: #{MY_CONST}"          # => "doStuff: 123"

    instance_eval &block
  end

  def doOtherStuff (&block)
    p "doOtherStuff: #{self.class}"   # => "doOtherStuff: Thing"
    p "doOtherStuff: #{MY_CONST}"     # => "doOtherStuff: 123"

    yield 
  end
end

t = Thing.new

t.doStuff do 
  doOtherStuff do
    p self.class             # => Thing
    p self.class.constants   # => [:MY_CONST]
    p Thing::MY_CONST        # => 123
    p MY_CONST               # => NameError: uninitialized constant MY_CONST
  end
end 
```

相关问题：[在 Ruby 1.9 中使用 instance_eval 进行常量查找](https://stackoverflow.com/questions/4892726/constant-lookup-with-instance-eval-in-ruby-1-9)

相关博文：http: [//jfire.io/blog/2011/01/21/making-sense-of-constant-lookup-in-ruby/](http://jfire.io/blog/2011/01/21/making-sense-of-constant-lookup-in-ruby/)

所以看起来我的选择仅限于：

1.  使用全局常量
2.  完全指定常量（例如：上例中的 Thing::MY_CONST）
3.  改用方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:12:52.540

嗯，也许我不明白，但你可以使用`apps.rb`

```
Padrino.configure do
   set :foo, :bar
end 
```

然后，您应该能够在所有应用程序中检索您的 var。

或在 boot 或 apps.rb 添加一些类似：

```
MY_CONST = 1
MyConst = 1 
```

# google-chrome - 无法在 Google Chrome 中录制网络摄像头视频

> ID：12492169
> 
> 赞同：2
> 
> 时间：2012-09-19T09:40:45.493
> 
> 标签：google-chrome, webcam, webrtc

当我尝试按照 WebRTC 规范使用 LocalMediaStream 实例录制网络摄像头视频时，出现以下错误：

```
Uncaught TypeError: Object #<LocalMediaStream> has no method 'record' 
```

我已经尝试过 Google Chrome 的 stable/beta/dev 和金丝雀版本。

目前是否可以使用任何当前可用的 Google Chrome 版本录制网络摄像头视频？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T10:24:52.623

I have since confirmed that it is currently not possible to record webcam video using any currently available version of Google Chrome.

# c# - 如何收集在 RTF 文档中所做的更改？

> ID：12492170
> 
> 赞同：0
> 
> 时间：2012-09-19T09:41:02.727
> 
> 标签：c#, rtf, change-tracking

我正在尝试从 RTF 文件中收集所有跟踪更改（已启用跟踪更改）。我检查了文档，但没有找到太多有用的数据。

# spring-batch - Spring Batch 中的作业级事务性

> ID：12492176
> 
> 赞同：5
> 
> 时间：2012-09-19T09:41:44.230
> 
> 标签：spring-batch, transactional

我现在知道 Spring-Batch 中不存在步骤间事务性之类的东西。我正在开发一个复杂的批处理作业，其中许多步骤在数据库中执行多个操作，并且每个步骤都与其他操作相关，因此每个步骤都属于同一个事务。我理解 Spring-Batch 范式的方式我一定会使用一步作业来实现事务性。是否有任何想法（或任何其他方式）在最近或将来的版本中具有某种工作级别的事务性？

Edit1：我在此[链接](http://static.springsource.org/spring-batch/reference/html/readersAndWriters.html)中找到了第 6.3.1 点，这是一种连接多个处理器的方法，但这不能满足我目前的需求。

Edit2：这个其他[链接](http://forum.springsource.org/showthread.php?84309-Spring-batch-Transaction-Management)建议我使用带有“@Transactional”注释的信封类的可能性，它将调用我的工作，因此应该有一个外部事务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T07:51:48.987

最后我找到了一种方法来做到这一点。如上一版所述，您必须从事务方法调用作业：

@Transactional（传播=传播。需要）

将传播级别设置为此级别所需的非常重要。并将作业级别传播设置为“强制”，从而实现作业和步骤将其事务添加到当前事务。然而，正如 Michael Lange 所写，重要的是要考虑您正在管理的潜在卷大小，以避免超出限制的提交或回滚。

# php - php中的两个for循环

> ID：12492181
> 
> 赞同：-3
> 
> 时间：2012-09-19T09:41:53.193
> 
> 标签：php

我得到了这个代码......它使用了两个循环......，你能解释一下它是如何工作的吗？结果是 16

```
for($i=1; $i<=2; $i++)
    {
       for($j=1; $i<=5; $i++)
       {
          if($i == 1)
             echo $j;
          elseif($i ==2)
             echo $j+5;
       }
    } 
```

但如果我这样做

```
for($i=1; $i<=2; $i++)
        {
           for($j=1; $i<=5; $i++)
           {
              if($i == 1)
                 echo $j;
              elseif($i ==2)
                 echo $j;
           }
        } 
```

结果是 11。

怎么会这样 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:46:17.833

您的代码与以下内容相同：

```
$j = 1;
for ($i = 1; $i <= 5; $i++) {
  if ($i == 1) {
    echo $j;
  }
  elseif ($i == 2) {
    echo $j + 5;
    // below is second piece code.
    // echo $j;
  }
} 
```

所以：

第一段代码回显`1`and `1+5`，这将是`16`.

第二段代码回显`1`and `1`，这将是`11`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:50:30.123

很简单，你的外循环将运行一次。

`$i`在内循环中得到加分，所以外循环只运行一次......

内循环将运行 5 次，每次都`$i`加 1，什么时候`$i`是 1，你的打印`$j`总是 1，所以现在你有`1`输出......

那么什么时候`$i`是 2 你正在打印`$j + 5`，这将是 1 + 5 = `6`，所以你将`16`在你的输出中......

因此，当您更改`$j + 5`为 just时`$j`，您将`11`在输出...

（您实际上是在第一个代码 1 和 6 中打印 2 个单独的数字作为字符串，在第二个代码中，1 和 1）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T11:39:14.883

是的！那很好。在第一次内部迭代中，如果（i==1）它是 1。记住你没有增加你正在打印的 j。所以在第二次迭代 i==2 时它是 1.so 最后是 1 1...

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-19T09:47:52.197

你的代码说 11 和他的 16，因为他得到了 $j+5；(11 + 5 = 16 ;) )

# c# - 动态加载aspx页面

> ID：12492186
> 
> 赞同：2
> 
> 时间：2012-09-19T09:42:09.660
> 
> 标签：c#, asp.net

我找到了两种为 aspx 动态加载页面 html 的方法，但唯一的问题是我的 txt 文件在另一台服务器上，并且需要方法询问网络服务器上的虚拟路径或物理路径。

有什么办法可以让我从 url 从 azure 加载而不是从文件路径加载，或者如果我只能将字符串传递给 PageParser 或 BuildManager。

错误：

```
The relative virtual path 'http:/tplexcontent.blob.core.windows.net/commonresources/test123.txt' is not allowed here. 
```

* * *

```
 protected void Page_Load(object sender, EventArgs e)
    {
        //Method 1
        var pageView = PageParser.GetCompiledPageInstance("/Page2.aspx", "http://tplexcontent.blob.core.windows.net/commonresources/test123.txt", HttpContext.Current);
        (pageView).ProcessRequest(HttpContext.Current);

        //Method 2
        LoadPage("http://tplexcontent.blob.core.windows.net/commonresources/test123.txt");
    }

    public static void LoadPage(string pagePath)
    {
        // get the compiled type of referenced path
        Type type = BuildManager.GetCompiledType(pagePath);

        // if type is null, could not determine page type
        if (type == null)
            throw new ApplicationException("Page " + pagePath + " not found");

        // cast page object (could also cast an interface instance as well)
        // in this example, ASP220Page is a custom base page
        _Default pageView = (_Default)Activator.CreateInstance(type);

        // call page title
        pageView.Title = "Dynamically loaded page...";
        // process the request with updated object
        ((IHttpHandler)pageView).ProcessRequest(HttpContext.Current);
    } 
```

# java - 基于单个值使用不同的类

> ID：12492187
> 
> 赞同：3
> 
> 时间：2012-09-19T09:42:09.193
> 
> 标签：java, android, design-patterns

我正在开发一个应用程序，它应该基于一条信息使用不同的类类型。为了更好地说明我的问题，让我举个例子：

假设`INFO`是一个布尔值。根据它的值，我的代码必须使用 some class`A`或 some class的实例`B`。请注意，对于每个`A`,`B`都是它的子类。`INFO`在应用程序启动时设置，并且在整个应用程序生命周期中不会更改。

我的问题：*实现这一点的最佳方法是*什么？

以下是我提出的一些方法，但请随时建议其他方法：

**1.带有方法的工厂类：**

```
public static A getA(final boolean INFO) {
    return INFO ? new A() : new B();
} 
```

**2\. 包装类：**

```
class WrapperForSomeClass {

    public final A instance;

    public WrapperForSomeClass(final boolean INFO) {
        instance = INFO ? new A() : new B();
    }

} 
```

**3.接口+工厂类：**

```
public interface IWrappable<T> {
    T get(final boolean INFO);
}

private static final IWrappable<A> WRAPPER_FOR_A = new IWrappable<A>() {
    public A get(final boolean INFO) {
        return INFO ? new A() : new B();
    }
};

public static A getA(final boolean INFO) {
    return WRAPPER_FOR_A.get(INFO);
} 
```

如果让我选择，我会选择 3 号。你说什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:48:52.553

我会这样做：

```
class A
{
}

class B extends A
{
}

class AFactory
{
    public A getInstance(boolean info) 
    {
        return info ? new A() : new B();
    }
}

class MyMainLauncher
{
    private AFactory aFactory;
    private A instance;

    {
        // has access to the boolean value `info`.
        instance = aFactory.getInstance(info);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:18:24.073

1 是最短和最干净的。将此方法放入A类中，以免创建多余的工厂类。

为什么你会选择3？它的作用相同，但代码更多。

# javascript - 成功后关闭弹窗

> ID：12492188
> 
> 赞同：2
> 
> 时间：2012-09-19T09:42:09.673
> 
> 标签：javascript, jsf-2, popup, richfaces

我使用了一个丰富的：popupPanel 组件，它显示登录的输入字段。登录成功时我需要关闭弹出窗口，但就在那时。当用户输入错误的密码时，我会显示一条消息，并且弹出面板应该保持打开状态。如果我重新加载页面，所有欢迎消息和其他内容都会消失。

我有一个 javascript 可以关闭我的弹出窗口：`onclick="RichFaces.$('popup_login').hide()"`

只有当操作方法返回“1”（例如）时，我才能运行脚本？

```
<h:form id="loginForm">
   <h:inputText id="email" value="#{loginBean.email}" />
   <a4j:commandLink id="submit" action="#{loginBean.doLogin}" onclick="RichFaces.$('popup_login').hide()">
      <h:outputText value="login" />
   </a4j:commandLink>
</h:form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T13:33:41.807

签入`oncomplete`if[验证没有失败](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#isValidationFailed%28%29)。

```
<a4j:commandLink ... oncomplete="if (#{!facesContext.validationFailed}) RichFaces.$('popup_login').hide()"> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-19T13:33:27.580

我在primeface工作。我直接从 managedbean 关闭所有弹出窗口。

```
 RequestContext context = RequestContext.getCurrentInstance();
    context.execute("idofpopup.hide()"); 
```

我不知道这是否适用于 Rich。

我希望这可以帮助你。

# c# - 在 C# 中仅更改一行文本框的字体样式

> ID：12492190
> 
> 赞同：0
> 
> 时间：2012-09-19T09:42:13.040
> 
> 标签：c#, fonts, textbox

尝试将 1 行的字体样式更改为下划线，并以常规样式打印下一行对我不起作用。我正在尝试这样的事情： -

```
 textBox1.Font = new Font(textBox1.Font, FontStyle.Underline);
    textBox1.Text+="This line should be underlined";
    textBox1.Font = new Font(textBox1.Font, FontStyle.Regular);
    textBox1.Text+=Environment.NewLine;
    textBox1.Text+="This line should be normal"; 
```

但一切都只是在影响 FontStyle 的最后一行中完成，在本例中为 Regular。如果我删除第 3 行，则所有内容都带有下划线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:47:10.120

法线`TextBox`通常只支持一种样式。它的值只是一个字符串，而不是带有格式信息的字符串。

相反，请使用[`RichTextBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.aspx)(WinForms)/ [`RichTextBox`](http://msdn.microsoft.com/en-us/library/system.windows.controls.richtextbox.aspx)(WPF)。

# php - 在 PHP 中保持 MySQL 凭据私有的最佳方法是什么？

> ID：12492192
> 
> 赞同：1
> 
> 时间：2012-09-19T09:42:21.127
> 
> 标签：php, mysql, security, mysql-connect

在用 php 编写 Web 应用程序时，防止您的 MySQL 信息被他人（第三方）泄露或发现的最有效方法是什么？这些信息将包括在连接功能中使用的域名和登录名和密码。

例如，一个好的过程可能是将您的 mysql 连接函数保存在单独的 php 文件中，等等。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T09:53:23.030

1.  *将您的凭据保存在文档根目录之外*的单独`.php`文件中（因此无法通过 Web 直接访问）
**   最好将它保存为一个`.php`文件而不是，例如，`.inc`这样即使它可以通过网络意外访问，它也会被执行而不是直接显示*   建立连接后不要保留用户名和密码（即，在不再需要它们后取消设置保存凭据的 vars 或数组键）；你不能不小心暴露你不再拥有的东西*   不允许重复包含凭证文件（例如`if (defined('DB_AUTH_LOADED')) return; define('DB_AUTH_LOADED', 1);`在您的凭证文件中），以避免任何可能的重新定义您的凭证变量*

 *这应该可以保护您免于直接访问您的凭据以及您自己的代码意外泄漏凭据。如果攻击者可以将 PHP 文件上传到您的服务器并设法实际执行它们，那么这场战斗几乎是失败的，但上述措施应该可以让您相当安全，避免自己意外泄露您的信用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T09:45:48.193

我不能说这是否是最好的，但我就是这样做的；

我有一个 config.php 文件，其中包含我的数据库连接凭据，并且不能直接访问。我有一个需要 config.php 来建立连接的 DB 类，并且我有一个扩展 DB 类的站点类。

这是一种非常普遍的做事方式，并且被普遍接受。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T10:48:58.883

您可以做的另一件事（如果您的凭据被泄露）是确保您为 PHP 将使用的任务设置的 mysql 用户被禁止制作 DROP 语句，甚至可能是 DELETE 语句，如果您可以这样构造数据的话。

尽可能为该用户提供对其他数据库的最低访问权限，可能只有保存该用户数据的数据库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T09:44:30.267

课程，包括？有很多方法可以做到这一点，但最终如果有人可以访问未解析的 PHP 文件，他们将拥有您的 MySQL 登录详细信息。*

# jquery - 如何让 jQuery 插件返回用于链接的特定元素

> ID：12492194
> 
> 赞同：0
> 
> 时间：2012-09-19T09:42:27.127
> 
> 标签：jquery, jquery-plugins, method-chaining

我有一个非常粗糙的 jQuery 插件，它用一个 CSS 样式的 div 包装了一个复选框并隐藏了实际的复选框。我在输入元素上运行插件，但希望插件返回包装 div 以进行链接，因为输入元素是不可见的。

```
(function ($) {

var methods = {       

    'init': function (options) {

        var settings = $.extend({
            'location' : 'top',
            'background-color' : 'blue'
        }, options);            

        return this.each(function () {  
            var $this = $(this);
            var checked = $this.attr('checked') || '';
            $this.wrap('<div class="styled-checkboxes ' + checked + '"></div>');
            return $(this).parent('.styled-checkboxes')[0];
        });
    }           
};

$.fn.styledCheckboxes = function (method) {

    if (methods.method) {
        //
    } else if (typeof options === 'object') {
        return methods.init.apply(this, options);
    } else {
        console.log('init without options');
        return methods.init.apply(this, null);
    }        
}
})(jQuery); 
```

当我这样调用插件时：

```
console.log(
    $('input[type="checkbox"]').styledCheckboxes().after('<p>hello world</p>')
); 
```

附加的 p 在复选框之后添加，而不是 div，并且控制台跟踪是一个 jQuery 选择，其中包含我在页面上拥有的任何输入项，而不是包装输入的 div。为什么是线

`return $(this).parent('.styled-checkboxes')[0];`

不返回 div 作为用于链接的对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:49:19.877

原因是因为返回内部的任何内容`each`都不会覆盖返回的对象……返回`each`的始终是集合本身。

您可以返回的结果，`this.map`它应该可以按预期工作，因为`map`仍然会枚举列表中的所有项目，并且您可以操作返回的项目：

```
return this.map(function () {  
        var $this = $(this);
        var checked = $this.attr('checked') || '';
        $this.wrap('<div class="styled-checkboxes ' + checked + '"></div>');
        return $(this).parent('.styled-checkboxes')[0];
    }); 
```

实例： http: [//jsfiddle.net/wBUzP/](http://jsfiddle.net/wBUzP/)（“hello world”在新增之外`div`）

# java - 如何在康威的生命游戏中计算细胞的活邻居？

> ID：12492196
> 
> 赞同：1
> 
> 时间：2012-09-19T09:42:38.280
> 
> 标签：java, conways-game-of-life

我正在实施康威的人生游戏。我已经阅读了初始板，现在我需要对其进行编程以计算单元的活邻居。

一些基本规则

> 任何少于两个活邻居的活细胞都会死亡，好像是由于人口不足造成的。任何有两三个活邻居的活细胞都可以活到下一代。任何有超过三个活邻居的活细胞都会死亡，就好像过度拥挤一样。任何只有三个活邻居的死细胞都会变成活细胞，就像通过繁殖一样。

这是我已经拥有的代码。

更新：这是在一些初步建议后更改的代码。

```
/**
 * Write your comments here following the javadoc conventions
 */
public static int countNeighbours(boolean[][] board, int row, int col)
{
    int neighbours = 0; 
    int x = -1;
    while (x <= 1) {
        int y = -1;
        while (y <= 1) {
            if (board[row][col] == true) {

                neighbours++; 
            }
            // Given a 2D boolan array and a cell location given by its
            // row and column indecies, count the number of live cells
            // immediately surrounding the given cell. Remember that you
            // mustn't count the cell itself.

        }

    }
    return neighbours;
} 
```

这是在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:49:28.560

因为我知道这是一个典型的学校作业，我想给你完整的答案，但你不应该在方法的开头重新定义 row ，称之为别的东西，循环应该从`row-1`to`row+1`到`col-1`to `col+1`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T09:45:58.123

我想你想做

```
if (board[row][col] == true) { 
```

哪个是相同的

```
if (board[row][col]) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-29T06:29:37.693

如果您可以使您的电路板全球化，这可能适用于带有环绕的单个单元格：

```
public Cell[] getNeighbours(int i, int j) {
int i2 = i - 1, i3 = i + 1, j2 = j - 1, j3 = j + 1;
if (i2 == -1) i2 = board.length - 1;
if (i3 == (board.length)) i3 = 0;
if (j2 == -1) j2 = board[i].length - 1;
if (j3 == (board[i].length)) j3 = 0;
return new Cell[]{board[i2][j2], board[i2][j], board[i2][j3], board[i][j2], board[i][j3], board[i3][j2], board[i3][j], board[i3][j3]}; 
```

}

然后只需计算这些细胞中有多少是活着的并返回。

# multidimensional-array - 如何在Java中调用多维数组的索引

> ID：12492197
> 
> 赞同：2
> 
> 时间：2012-09-19T09:42:39.437
> 
> 标签：multidimensional-array

我有一个多维数组，我不知道如何在特定索引中“调用”。

这是我的代码：

```
 List<String[]> stats = new ArrayList<>();
        stats.add(new String[11]);
        String currentDate = null;
        String nextDate = null;
        String prize = null;
        int j = 0;
        for(i = 1; i < statsFromFile.size(); i++) {
            currentDate = toStringDate(statsFromFile.get(i).get(0), date, sdf);
            nextDate = toStringDate(statsFromFile.get(i+1).get(0), date, sdf);
            prize = statsFromFile.get(i).get(1);
            stats.get(j)[0] = currentDate;
            if(currentDate.equals(nextDate)) {

                stats.get(j)[4]++; // Here's the problematic line.

            }
            else {
                stats.add(new String[11]);
                j++;
                prize = statsFromFile.get(j).get(0);

                stats.get(j)[1]++; // And here too.

            }
        } 
```

以前，数组是长型数组，效果很好，但现在是字符串型数组，好像就不行了。

我有这个错误：`Type mismatch: cannot convert from String to int`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:48:45.150

两行的语法都是错误的：

```
stats.get(j)[4]++; 
```

在这种情况下，您希望 ++ 做什么？

`stats.get(j)[4]`正在访问我们列表中 j 数组的第 4 个元素，它是一个字符串数组，并且您在第 4 个元素（一个字符串）上调用一个数学运算符。

# iphone - 分组 UITableView 中第一个和最后一个单元格的自定义圆角

> ID：12492200
> 
> 赞同：3
> 
> 时间：2012-09-19T09:42:47.033
> 
> 标签：iphone, rounded-corners, uitableview, cornerradius

我的 iPhone 应用程序当前正在显示一个包含 2 个部分的分组表。我尝试使用以下方法更改每个部分的第一个和最后一个单元格（或者在只有一行的部分的情况下在同一单元格上）的圆角半径：

```
cell.layer.cornerRadius = 4; 
```

或作用于整个表视图：

```
self.tableView.layer.cornerRadius = 4; 
```

但是没有运气......当然我在执行这个操作之前已经导入*了 QuartzCore 。*看起来只有当表格以普通样式显示时才能自定义角。

理想的解决方案是自定义第一个角的顶角和最后一个角的底角。

有什么建议么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2019-02-22T20:24:33.913

以下是在 Swift 4.2 中有效的方法：

```
func tableView(_ tableView: UITableView, willDisplay cell: UITableViewCell, forRowAt indexPath: IndexPath)
{
    let cornerRadius = 5
    var corners: UIRectCorner = []

    if indexPath.row == 0
    {
        corners.update(with: .topLeft)
        corners.update(with: .topRight)
    }

    if indexPath.row == tableView.numberOfRows(inSection: indexPath.section) - 1
    {
        corners.update(with: .bottomLeft)
        corners.update(with: .bottomRight)
    }

    let maskLayer = CAShapeLayer()
    maskLayer.path = UIBezierPath(roundedRect: cell.bounds,
                                  byRoundingCorners: corners,
                                  cornerRadii: CGSize(width: cornerRadius, height: cornerRadius)).cgPath
    cell.layer.mask = maskLayer
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T11:38:56.653

最简单的方法是：

1.  在 xib 文件中创建一个自定义单元格，设置它们的唯一标识符，如：`@"beginCell", @"middleCell", @"endCell"`. 您可以按照本教程制作：[http ://www.bdunagan.com/2009/06/28/custom-uitableviewcell-from-a-xib-in-interface-builder/](http://www.bdunagan.com/2009/06/28/custom-uitableviewcell-from-a-xib-in-interface-builder/)

2.  在方法 `- (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath` 中，您必须找到您在该部分的中间或开始/结束处，并使用具有正确标识符的单元格。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T09:48:38.930

您可以做的是`UIView`在单元格的背景上添加一个，使单元格背景为 clearcolor 。调整`UIView`为圆角。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T09:59:06.730

```
UIView  *view = [UIView alloc]initWithFrame:YourFrame];
view.layer.cornerRadius = 8;

cell.backgroundView = view; 
```

并且不要忘记`UITableView`背景颜色是透明的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-28T01:23:10.483

如果您只需要圆角，还有另一种解决方案（受本地 uitableview(cell) 的分组样式启发，在 slowmo 中 :)）。它应该是这样的：

细胞亚类...

```
@interface MyCell : UITableViewCell
@property (nonatomic) top;
@property (nonatomic) bottom;
@end

@implementation MyCell
-(id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        self.backgroundColor = [UIColor clearColor]; // remove white default background
        //example settings, UIImageViews with resizable images can be used too
        self.backgroundView = [[UIView alloc] init];
        self.selectedBackgroundView = [[UIView alloc] init];
        self.backgroundView.backgroundColor = [UIColor greenColor];
        self.selectedBackgroundView.backgroundColor = [UIColor blueColor];
        self.backgroundView.layer.cornerRadius = self.selectedBackgroundView.layer.cornerRadius = 5; // 
    }
    return self;
}
-(void)layoutSubviews{
    [super layoutSubviews];
    self.backgroundView.frame = self.selectedBackgroundView.frame = UIEdgeInsetsInsetRect(self.bounds, UIEdgeInsetsMake(self.top?0:-self.backgroundView.layer.cornerRadius, 0, self.bottom?0:-self.backgroundView.layer.cornerRadius, 0));
}
-(void)setTop:(BOOL)top{
    _top = top;
    [self setNeedsLayout];
}
-(void)setBottom:(BOOL)bottom{
    _bottom = bottom;
    [self setNeedsLayout];
}
@end 
```

在 dataSource 中，您可以这样做：...

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
      ...cell initialization stuff...
      [(MyCell *)cell setTop:(indexPath.row == 0)];
      [(MyCell *)cell setBottom:(indexPath.row == [tableView numberOfRowsInSection:indexPath.section]-1)];

      return cell;
} 
```

优点：

*   所有单元格的一个背景
*   便于使用
*   可动画的（您正在更改位置而不是图像）
*   也可以用于普通样式（但要注意部分:)）

缺点：

*   需要单元格的子类（即使更改了 rowHeight，我也找不到调整背景位置的方法）
*   不能解决我的整个部分的圆角问题（您必须手动为截面视图圆角）

我希望这对某人有所帮助，但请注意此代码未经测试！在发布这个答案之前几分钟我已经实现了这个想法，它似乎工作:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-01T01:44:57.187

对于情节提要，在 iOS >= 13.0

将 UITableView 样式设置为`Inset Grouped`

[![故事板菜单下拉](../Images/ce57e259ecf45e49b0808e5ca0f80a50.png)](https://i.stack.imgur.com/KiggR.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-25T15:40:50.433

我将我的 tableview 单元格子类化：

```
class CGStandardCell: UITableViewCell {

    override func awakeFromNib() {
        super.awakeFromNib()
    }

    func setCornerRadius(forIndexPath indexPath: IndexPath, inTableView tableView: UITableView) {
        let lastRow = tableView.numberOfRows(inSection: indexPath.section) - 1
        self.layer.maskedCorners = []

        if indexPath.row == 0 && indexPath.row == lastRow {
            self.cornerRadius = 20
            self.layer.maskedCorners = [.layerMaxXMinYCorner,
                                        .layerMinXMinYCorner,
                                        .layerMinXMaxYCorner,
                                        .layerMaxXMaxYCorner]
        } else if indexPath.row == 0 {
            self.cornerRadius = 20
            self.layer.maskedCorners = [.layerMaxXMinYCorner,
                                        .layerMinXMinYCorner]
        } else if indexPath.row == lastRow {
            self.cornerRadius = 20
            self.layer.maskedCorners = [.layerMinXMaxYCorner,
                                        .layerMaxXMaxYCorner]
        }
    }
} 
```

然后在 tableView(_tableView: UITableView, cellForRowAt indexPath: IndexPath) 中调用

```
cell.setCornerRadius(forIndexPath: indexPath, inTableView: tableView) 
```

# eclipse - 未定义对 nids_run 的引用

> ID：12492201
> 
> 赞同：0
> 
> 时间：2012-09-19T09:42:47.990
> 
> 标签：eclipse

我想在我的程序中使用 libnids 库，我刚刚包含了 'nids.h' 没有任何问题。

但在构建过程中（使用 Eclipse 作为 IDE），它有一个错误：

```
undefined reference to 'nids_run'
undefined reference to 'nids_register__tcp'
undefined reference to 'nids_init' 
```

我知道“链接到图书馆”有问题，但我不知道那是什么！

我想有人指导我，如何解决这个错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-10T02:43:08.867

好吧，迟到总比没有好。

您需要安装 libnids 头文件以及开发库。我建议您使用数据包管理器（如*yum*或*apt-get*）下载它们。前任。：

```
sudo yum install libnids libnids-devel 
```

然后，在 Eclipse 上：右键单击您的项目 > Properties > C/C++ Build > Settings > GCC C++ Linker > Includes

然后，您将包含名称为 nids 的 nids*库*。如果您只使用 C，请将其放在 GCC C 编译器上。

# memory - 对全局内存和多个设备之间不一致的地址空间映射感到困惑

> ID：12492207
> 
> 赞同：0
> 
> 时间：2012-09-19T09:43:03.560
> 
> 标签：memory, opencl

今天想测试一下OpenCL中全局内存缓冲区是如何分配和存储的，但是结果让我很困惑。我创建了一个全局内存缓冲区，并将其传递给内核，该内核构建在 CPU 和 GPU 设备上，但我将此缓冲区的前半部分分配给 CPU，将剩余一半分配给 GPU，并使用不同的偏移量来表示不同的CPU 和 GPU 的起点，因此 CPU 和 GPU 可以同时在同一个缓冲区上工作，但在不同的地方。然后在内核中，我使用 &buffer[offset+tid] 获取缓冲区每个元素的地址，并将地址再次存储到自身。

```
__kernel void foo(__global uint * buffer, const uint offset)
{
    uint tid = get_global_id(0);
    buffer[offset+tid] = &buffer[offset+tid];
} 
```

将buffer发回CPU并打印出来后，发现CPU内核返回的地址值是连续的，GPU返回的也是连续的，但是这两个地址空间是不连续的。我认为 CPU 和 GPU 在同一个缓冲区上工作，为什么缓冲区后半部分的地址与前半部分不连续？如果我只使用一个设备（CPU 或 GPU），那么所有地址都是正确连续的。有没有人可以帮我解决这个问题？因为我猜这可能是对GPU显存基本概念的误解，所以我想要一个详细的解释。

PS.：我可以这样理解吗：虽然物理上只有一个缓冲区，但是全局内存实际上是一个不透明的结构，不同设备返回的地址值会因为全局内存和CPU之间的地址转换和映射而不同，全局内存和 CPU 是随机实现和独立的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:02:14.813

您问题末尾的“PS”是正确的。

OpenCL 设备上的指针值是设备实现定义的，并且仅对特定设备上的单个内核调用的生命周期有意义。从内核调用到内核调用，实现对同一个缓冲区使用不同的基地址是合法的（尽管实现实际上可能不会这样做。）

因此，如果您确实将全局内存指针写入全局内存，则不应期望该指针值在内核结束后仍然有效。

# c# - 带有下拉列表的 Gridview 行

> ID：12492209
> 
> 赞同：0
> 
> 时间：2012-09-19T09:43:28.973
> 
> 标签：c#, gridview

我正在开发一个 .net 项目。我有一个gridview，并且在rowdatabound 上我想将一个下拉列表放到该行的每个单元格中。所以我有以下方法。

```
 protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    DropDownList ddl = new DropDownList();
    ddl.DataSource = getImpacts();
    ddl.DataBind();
    if (e.Row.RowType != DataControlRowType.Header)
    {

        for (int i = 0; i < e.Row.Cells.Count; i++)
        {
            e.Row.Cells[i].Controls.Add(ddl);

        }
    }
} 
```

问题是 dropdouwnlist 仅在最后一个单元格中添加！当我调试时，for循环从所有单元格传递！这怎么可能 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:46:38.080

需要为每一列创建一个下拉列表的实例

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType != DataControlRowType.Header)
    {
        for (int i = 0; i < e.Row.Cells.Count; i++)
        {
           DropDownList ddl = new DropDownList();
           ddl.DataSource = getImpacts();
           ddl.DataBind();
           e.Row.Cells[i].Controls.Add(ddl);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:48:21.093

您可以在循环中插入 for ，并为每个单元格迭代

```
 for (int i = 0; i < e.Row.Cells.Count; i++)
        {
           DropDownList ddl = new DropDownList();
           ddl.DataSource = getImpacts();
           ddl.DataBind();

           e.Row.Cells[i].Controls.Add(ddl);
        } 
```

# android - 在片段方向更改中使用视频视图的两种布局

> ID：12492211
> 
> 赞同：1
> 
> 时间：2012-09-19T09:43:29.073
> 
> 标签：android, android-layout

我正在开发一个应用程序，在纵向和横向上有两种不同的布局。

每个布局包含两个片段。一个片段包含一个视频视图，它播放来自互联网的视频。当方向改变时，视频会重新开始。

我想在不重新启动的情况下播放视频。

这是我的代码：

```
**This is my main activity.**
------------------------    

public class MainActivity extends Activity {
            VIdeoFragment vfr = null;
            ImageFragment ifr = null;

            @Override
            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.main_activity);
            vfr = new VIdeoFragment();
            ifr = new ImageFragment();
           FragmentTransaction ft1 = getFragmentManager().beginTransaction();
           FragmentTransaction ft2 = getFragmentManager().beginTransaction();
           ft1.add(R.id.upper_view, vfr, "Vfr");
           ft2.add(R.id.down_view, ifr, "IFR");

            ft1.commit();
            ft2.commit();
            }
            }

    **--------------------------------
    VIdeoFragment** 

public class VIdeoFragment extends Fragment {
            VideoView vv,oldVV;
            View view=null;
 public static String movieUri =  "http://www.prep-zone.com/androidVideo/College Admission from Prep Zone (HD).mp4";
            @Override
            public void onActivityCreated(Bundle savedInstanceState) {
                super.onActivityCreated(savedInstanceState);
                Uri video = Uri.parse(movieUri); 
                vv.setVideoURI(video);
                vv.start();
                    }
                @Override
                public View onCreateView(LayoutInflater inflater, ViewGroup container,
                        Bundle savedInstanceState) {
            view = inflater.inflate(R.layout.video, container, false);

                    vv = (VideoView) view.findViewById(R.id.videoView1);
                    return view; 
                }
            }
    ---------------------------------------------
    ImageFragment 

public class ImageFragment extends Fragment {

                @Override
                public View onCreateView(LayoutInflater inflater, ViewGroup container,
                        Bundle savedInstanceState) {
                    return  inflater.inflate(R.layout.image, container,false);  
                }
}
    -------------------------------------------

<?xml version="1.0" encoding="utf-8"?>
            <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/imageView1"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:src="@drawable/ic_action_search" />

            </LinearLayout>

    ------------------------------

<?xml version="1.0" encoding="utf-8"?>
            <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical" >

                <VideoView
                    android:id="@+id/videoView1"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:orientation="vertical" />

            </LinearLayout>
                -------------------------------------
                portrait main xml
                ----------------

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                xmlns:tools="http://schemas.android.com/tools"
                android:id="@+id/LinearLayout1"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical" >

                <LinearLayout
                    android:id="@+id/upper_view"
                    android:layout_width="match_parent"
                    android:layout_height="0dp"
                    android:layout_weight="1" >
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/down_view"
                    android:layout_width="match_parent"
                    android:layout_height="0dp"
                    android:layout_weight="1" >
                </LinearLayout>

            </LinearLayout>

                ------------------------------------
                landscape xml
                ----------------

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                xmlns:tools="http://schemas.android.com/tools"
                android:id="@+id/LinearLayout1"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="horizontal" >

                <LinearLayout
                    android:id="@+id/upper_view"
                    android:layout_width="0dp"
                    android:layout_height="match_parent"
                    android:layout_weight="1">
                </LinearLayout>

                <LinearLayout
                    android:id="@+id/down_view"
                    android:layout_width="0dp"
                    android:layout_height="match_parent"
                    android:layout_weight="1">
                </LinearLayout>

            </LinearLayout>
--------------------------------------------------------

    <uses-permission android:name="android.permission.INTERNET"/>

        <application
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <activity
                android:name=".MainActivity"
                android:label="@string/title_activity_main" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
        </application>

        ================================================
        please help.Thank you. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:53:01.733

在 MainActivity 的清单中，将配置更改用于方向。

```
android:configChanges="orientation" 
```

然后在 Main Activity 的代码中覆盖配置更改，如果您需要处理方向更改。

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    // TODO Auto-generated method stub
    super.onConfigurationChanged(newConfig);
} 
```

这将避免活动重新启动，从而避免再次播放视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T05:18:42.077

回复那些仍然来此帖子寻求解决方案的人：-（对于 API 级别 13 及更高版本）

在 MainActivity 的 manifest.xml 文件中，在标记中添加以下内容

```
android:configChanges="orientation|screenSize" 
```

android:configChanges - 列出 Activity 将自行处理的配置更改。当运行时发生配置更改时，活动保持运行并调用其 onConfigurationChanged() 方法，我们可以覆盖该方法以执行特定操作。

另一种方法是保存 Fragment 的状态。

在代码中（根据问题陈述的 VideoFragment 类）

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //Code to fetch Fragment saved arguments
        setRetainInstance(true);
    } 
```

默认情况下，片段的retainInstance 属性为false。因此，它不会被保留，它会随着承载它的活动一起在旋转时被销毁和重新创建。调用 setRetainInstance(true) 保留片段。当一个片段被保留时，该片段不会随活动一起被销毁。相反，它会被保存并完整地传递给新的活动。

当您保留一个片段时，您可以依靠它的所有实例变量来保持相同的值。当你伸手去拿它们时，它们就在那里。

有关详细信息，请参阅[在配置更改期间保留片段](http://developer.android.com/guide/topics/resources/runtime-changes.html)

# xcode - 第二次点击后调用 UITableView didSelectRowAtIndexPath

> ID：12492212
> 
> 赞同：2
> 
> 时间：2012-09-19T09:43:35.490
> 
> 标签：xcode, uitableview, ios5, didselectrowatindexpath

在我的应用程序中，我使用 a`UITableView`来显示特定日期的医生预约情况。在两个手势识别器的帮助下，我可以在表格视图上滑动以显示下一天（从右向左滑动）/前一天（从左向右滑动）。

当我滑动时，我检查我是否已经从数据库中加载了预订，如果没有加载，我会显示一个带有活动指示器的警报视图，以向用户显示它正在加载。

加载完成后，我关闭此警报视图并显示翻转视图 ( `UIViewAnimationTransitionFlipFromLeft`) 并显示新的一天的动画。

现在的问题是：翻转视图后，`didSelectRowAtIndexPath:`当我第一次点击一个单元格时没有被调用。但如果我再次点击它，该方法就会触发。看来我首先必须点击视图中的任意位置才能“激活视图”。alertview 是否可能仍然以某种方式出现在 tableview 的顶部？

处理从左到右滑动的代码：

```
-(void)handleSwipeR
{
//Disable user interaction.
[table setUserInteractionEnabled:NO];
[self.navigationController.navigationBar setUserInteractionEnabled:NO];

if (swipeEnabled == YES) {
    swipeEnabled = NO;

    //we use the curIndex to check if it is necessary to get new data.
    if (curIndex > 0)
    {
        //Commit the animations and reload all the data.
        [UIView beginAnimations:nil context:nil];
        [UIView setAnimationDelegate:self];
        [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:table cache:NO];
        [UIView setAnimationDuration:1];
        [UIView setAnimationDidStopSelector: @selector(animationFinished:finished:context:)];
        [UIView commitAnimations];
        curIndex --;
        [Database setCurDate:[keys objectAtIndex:curIndex]];
        [table reloadData];
    }else {
        //We show a loading screen until the new reservation data is collected.
        loading=[[UIAlertView alloc] initWithTitle:loadingText message:@"" delegate:self cancelButtonTitle:nil otherButtonTitles:nil];
        loadingInd=[[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
        [loadingInd startAnimating];
        [loadingInd setFrame:CGRectMake(125, 60, 37, 37)];
        [loading addSubview:loadingInd];
        [loading show];

        [Database setCurAlert:loading];

        [Database setCurDate:[keys objectAtIndex:curIndex]];

        //Set startdate and enddate and get the new reservations.
        NSDate *startDate = [[Database curDate] dateByAddingTimeInterval:-60*60*24*15];
        NSDate *endDate = [[Database curDate] dateByAddingTimeInterval:-60*60*24*1];
        [Database getReservations:startDate endDate:endDate];
        [self fillVariables];
        [loading dismissWithClickedButtonIndex:0 animated:YES];
        //You get a unique id each session. If you logged in at another location, the session id will change. So the first one is invalid. So we first check if the session id is still valid.
        if (![Database sessionExpired]) {
            //If there aren't found any reservations for the next two weeks. Show an Alertview.
            if ([Database elementFound] == NO) {
                reservationSearch = 2;

                alertNoResMessage = [NSString stringWithFormat:[LanguageStrings resListNoResMessageSwipeR],reservationSearch];

                //sleep(1);
                alertNoRes= [[UIAlertView alloc]initWithTitle:alertNoResTitle message:alertNoResMessage delegate:self cancelButtonTitle:alertNoResButtonYes otherButtonTitles:alertNoResButtonNo, nil];

                alertNoRes.tag = 201;
                [alertNoRes show];
            }else {
                //Commit the animations and reload all the data.
                curIndex = [keys indexOfObject:[Database curDate]];
                [UIView beginAnimations:nil context:nil];
                [UIView setAnimationDelegate:self];
                [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:table cache:NO];
                [UIView setAnimationDuration:1];
                [UIView setAnimationDidStopSelector: @selector(animationFinished:finished:context:)];
                [UIView commitAnimations];
                curIndex --;
                [Database setCurDate:[keys objectAtIndex:curIndex]];
                [table reloadData];
            }
        }
    }
    swipeEnabled = YES;
}
}

//Enable all user interaction when the animation is finished.
- (void) animationFinished:(NSString *)animationID finished:(BOOL)finished context:  (void *)context{
[table setUserInteractionEnabled:YES];
[self.navigationController.navigationBar setUserInteractionEnabled:YES];
swipeEnabled = YES;
} 
```

我一直在寻找它一段时间，我似乎没有找到答案，所以你的帮助将不胜感激。

# haskell - 在列表列表中，施加相同的长度

> ID：12492217
> 
> 赞同：4
> 
> 时间：2012-09-19T09:44:12.480
> 
> 标签：haskell

我有这个数据类型，它应该代表一个表：

```
data R = R [Bool]  deriving Eq -- Row
data T = T [R]     deriving Eq -- Table 
```

问题是它允许拥有不同长度的行表，例如：

```
tab =T [R [True, False, True, True],
        R [False, False, True, False],
        R [False, False, False, True],
        R [False, False]] 
```

是否可以修改 的数据定义`T`以强制所有`R`元素具有相同的长度？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T13:16:12.217

是的，有一种非常标准的方法可以实现这一目标。然而，您付出的代价是您无法使用标准列表函数（因为您不会使用标准列表）。这个想法是这样的：我们首先有一个脊椎告诉所有“列表”有多长，然后我们将在脊椎底部有实际的列表。您可以通过多种方式对列表的长度进行编码；下面，我将只展示如何使用简单的一元编号系统来实现，但您当然可以使用其他编号系统设计更高效的版本。

```
data BalancedLists_ a as
    = Nil [as]
    | Cons (BalancedLists_ a (a, as))

type BalancedLists a = BalancedLists_ a () 
```

例如，包含两个长度为 3 的列表的平衡列表如下所示：

```
Cons (Cons (Cons (Nil [(1, (2, (3, ()))), (4, (5, (6, ())))]))) 
```

Ralf Hinze有一篇精彩的论文将这项技术扩展到一百个不同的方向，称为[制造数据类型](http://www.cs.columbia.edu/techreports/cucs-023-99.pdf)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-19T10:41:46.377

你*可以*用`DataKinds`. 但是，这可能过于复杂：

```
{-# LANGUAGE DataKinds, KindSignatures, GADTs #-}
-- requires 7.4.1, I think

data Nat = S Nat | Z

infixr 0 :.
data R (n :: Nat) where
  Nil :: R Z                     -- like []
  (:.) :: Bool -> R n -> R (S n) -- and (:)

data T (n :: Nat) = T [R n]

-- OK
test1 = T [(True :. True :. Nil), (True :. False :. Nil)]

-- will fail
test2 = T [(True :. True :. Nil), (False :. Nil)] 
```

我宁愿推荐使用智能构造函数的@MathematicalOrchids 替代方法。

* * *

编辑：做什么[`DataKinds`](http://www.haskell.org/ghc/docs/7.4.2/html/users_guide/kind-polymorphism-and-promotion.html)。

该`DataKinds`扩展允许编译器自动创建一种新类型，而不是`*`为每个写入的数据类型，以及来自构造函数的这种类型的新类型。

所以`Nat`，除了是一个简单的 ADT 之外，还产生了 kind`Nat`和 type 构造函数`Z :: Nat`和`S :: Nat -> Nat`. 这`S`与`Maybe :: * -> *`- 它只是不使用所有类型的 kind ，而是您的新 kind `Nat`，仅由自然数的表示形式存在。

关键是，现在您还可以定义*混合*类型的类型构造函数。典型的例子是`Vec`：

```
data Vec (n :: Nat) (a :: *) where {-...-} 
```

有种`Vec :: Nat -> * -> *`。同样，`T`有 kind `T :: Nat -> *`。这让您可以将其与类型编码的常量长度一起使用，如果将两行不同长度的行放在一起，则会导致类型错误。

虽然这看起来非常强大，但实际上是受到限制的。为了从这种表示中得到所有东西，应该使用像[Agda](http://wiki.portal.chalmers.se/agda/pmwiki.php)这样的依赖类型语言。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-19T09:58:49.143

*列表*类型表示任意大小的容器。您可以使用*元组*来强制执行特定大小 - 但它仅对“小”大小才真正可行。例如：

```
data R = R (Bool, Bool, Bool, Bool) deriving Eq 
```

现在每一行总是正好包含 4 个单元格。

如果您真正想要的是强制行可以是*任何*大小，只要它对于表中的所有行都*相同*......那就更困难了。有几种方法可以在类型系统中对此进行编码，但没有一种方法特别“简单”。

另一种选择是在运行时强制执行条件，而不是试图在编译时保证它。您可以编写一个定义行和表类型的模块，但隐藏它们的定义，并且只公开用于处理这些类型的函数，这些函数保留了您想要的不变量（即，所有行的长度相等）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T22:47:14.547

还有一种方法是使用`Data.Array`. 它的一个好处是它允许真正的多维数组，而不是数组的数组。只需使用元组来索引`Array`.

# c# - 在gridview asp.net mvc c#上的jquery中查找元素

> ID：12492218
> 
> 赞同：1
> 
> 时间：2012-09-19T09:44:19.920
> 
> 标签：c#, javascript, jquery, asp.net-mvc

我对 Web 开发比较陌生，所以我将 MVC 与 ASP.NET 一起使用，并且我很难使用 jQuery 及其功能。如果有帮助，我正在使用带有 ASP.NET MVC c# 的 Razor View Engine 和 devexpress 控件。

现在这是我的问题：

我有一个视图，它有一个 @Html.Action('view','controller'); 声明哪些链接到gridview。

在那个GridView上，我获得了一些客户端功能，这些功能在选择行并按下键盘上的Enter时会显示详细信息。

现在，我正在使用的 gridview 有一些自动搜索选项，方法是单击文本字段并输入您要查找的内容并按 Enter。如果我正在搜索或选择一行并按 Enter，我声明了一个值，该值包含一个值。

所以在那之后我让它工作，当我在搜索文本字段中按回车时，它不会打开详细视图。但它在搜索时执行回调。新创建的gridview。现在我遇到的问题是，在 GridView 上的此回调之后，我的函数不再找到该元素。

我尝试在 jquery 中使用 .find 函数，但这没有帮助。以下是我尝试的一些片段：

（这些位于 $(document).ready 函数中）

```
 $('#id').click(function () {
    // do something
 }); 
```

和 .find 版本：

```
 $('#gridview').find('#id').click(function () {
    // do  something
}); 
```

所以基本上我希望能够在再次构建gridview之后找到元素。

::EDIT:: textfields.click 上的 ID 保持不变。

::EDIT2:: 通过在 devexpress gridview 的 EndCallback 客户端事件中添加我当前的代码，我找到了一个廉价而肮脏的解决方案。但是必须有一个体面的方法来做到这一点......但这也证明了我之前的编辑，id 保持不变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:06:50.670

`.click()`当您在包含一组元素的 jQuery 对象上调用绑定事件处理程序的函数时，例如，事件处理程序仅绑定到*这些*元素；它也不适用于随后创建的与选择器匹配的任何元素。如果替换这些元素，即使新元素具有相同`id`的 ，事件处理程序也会随之消失。但是，有一个解决方案，称为*事件委托*。

基本原则是将事件处理程序绑定到一个*不会*被替换的元素，该元素将包含您想要触发事件的所有元素，并传递一个事件类型，一个选择器以匹配要触发的元素该事件类型的函数和要执行的函数。在 jQuery 1.7 或更高版本中，这是使用[`.on()`](http://api.jquery.com/on/)函数的变体之一实现的：

```
$('#gridview').on('click', '#id', function(e) {
    // do something when the element with an id of 'id' is clicked on
}); 
```

请注意，我假设您的`#gridview`元素永远不会被替换。如果是，请选择另一个您可以引用的包含该元素的`#gridview`元素。如果一切都失败了，你可以自己调用它`document`。

有关更多信息，请查看jQuery 文档中的**直接和委托事件**[`.on()`](http://api.jquery.com/on/)部分。

如果您仍在使用 1.7 之前的 jQuery 版本，则需要使用该[`.delegate()`](http://api.jquery.com/delegate/)函数。它以相同的方式工作，但前两个参数（事件类型和选择器）交换了：

```
$('#gridview').delegate('#id', 'click', function(e) {
    // do something when the element with an id of 'id' is clicked on
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:10:03.877

我假设网格视图的重新渲染是通过 ajax 完成的，否则 jquery 仍然可以工作。如果这些元素（id）已从 DOM 中删除，那么它们将失去绑定。您需要将点击事件添加到重新加载gridview的函数中。您可以将绑定放入一个函数并在重新加载某些内容时调用此函数：

```
function BindGridView(){

$('#id').die().click(function () {
    // do  something
});

} 
```

然后在渲染gridview的地方调用这个重新绑定函数

```
$.ajax({
        cache: true,
        type: 'post',
        url: "/view/RenderGridView",
        success: function (msg) {

            //render grid view then re-bind
            BindGridView();

        }
    }); 
```

您还可以在另一个点击事件的结果上绑定点击事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-03T12:24:17.777

你必须在gridview上绑定，例如：

```
$('#gridview').on('click', 'class_or_id_selector', function(e) { /* your code here */ }); 
```

然后将处理动态创建的具有特定类或 id 的所有元素

# mysql - 使用 Codeigniter 比较同一行和同一表中的 2 个值

> ID：12492219
> 
> 赞同：1
> 
> 时间：2012-09-19T09:44:23.043
> 
> 标签：mysql, codeigniter, field

任何人都可以帮助我，而我的解决方案似乎不起作用：

```
$this->db->where('stock <=','stock_min');
$res = $this->db->get("products")->result(); 
```

你看我想比较字段'stock'小于或等于'stock_min'......

有人吗？

根据要求，表结构：

```
 CREATE TABLE IF NOT EXISTS `products` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `sub_of` int(11) DEFAULT NULL,
  `category` int(45) NOT NULL DEFAULT '0',
  `name` varchar(45) NOT NULL DEFAULT '',
  `slug` varchar(250) NOT NULL,
  `number` varchar(45) DEFAULT NULL,
  `description` text NOT NULL,
  `value` decimal(5,0) NOT NULL DEFAULT '0',
  `value_discount` varchar(100) DEFAULT NULL,
  `yell` varchar(100) DEFAULT NULL,
  `display_price` tinyint(1) DEFAULT '0',
  `stock` int(11) NOT NULL DEFAULT '0',
  `stock_min` int(11) NOT NULL DEFAULT '1',
  `warned` tinyint(2) NOT NULL DEFAULT '0',
  `relation` varchar(350) DEFAULT NULL,
  `supplier` varchar(150) DEFAULT NULL,
  `price_in` decimal(10,2) DEFAULT '0.00',
  `price_out` decimal(10,2) DEFAULT '0.00',
  `price_out_btw` decimal(10,2) DEFAULT '0.00',
  `active` smallint(6) DEFAULT '0',
  `display_from` date NOT NULL DEFAULT '0000-00-00',
  `display_till` date NOT NULL DEFAULT '0000-00-00',
  `seen` int(11) NOT NULL DEFAULT '0',
  `info_requested` int(11) NOT NULL DEFAULT '0',
  `inserted` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=322 ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:11:04.980

试试这个：

```
$this->db->where('stock <= stock_min'); 
```

在您的代码中，“min_stock”被解释为字符串“min_stock”而不是列。将来，当您遇到此类问题时，您可以调用`$this->db->last_query();`以查看针对数据库运行的确切查询。

# r - R 环境和函数调用堆栈

> ID：12492226
> 
> 赞同：9
> 
> 时间：2012-09-19T09:44:40.110
> 
> 标签：r, scope, environment-variables

我正在尝试`get`在一系列函数调用中使用，但对象名称的查找似乎跳过了环境。例如：

```
foo <- 1 # variable in .GlobalEnv

getter <- function(x) {get(x)}
getter("foo") # returns 1, which is expected

f1 <- function() {
  foo <- 2 # local variable in the function scope
  getter("foo")
}

f1() # still returns 1, would've expected to return 2 
```

为什么调用`f1`返回`foo`全局环境中的而不是`foo`调用函数环境中的？

如何`get`查看调用函数的环境？设置`pos = sys.parent()`似乎不起作用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-19T17:11:02.933

你被框架和环境之间的细微差别（这更加微妙，因为框架是环境，或者环境是框架）以及[词法和动态作用域](https://stackoverflow.com/questions/3840769/scoping-and-functions-in-r-2-11-1-whats-going-wrong)之间的差异所困扰。帮助页面中有一些详细信息，[`parent.frame`](http://www.inside-r.org/r-doc/base/parent.frame)以及分布在各种文档中的其他地方。

尝试和简化：

您的`getter`函数有自己的[环境](http://www.inside-r.org/r-doc/base/environment)，其中存储了该函数的本地变量（`x`在这种情况下）。由于 R 是词法范围的，这意味着函数环境具有由定义函数的位置定义的父环境，在这种情况下，全局环境（如果它是在另一个函数内部定义的，那么父环境将是该函数的 env功能）。

当您调用`f1`并且它调用`getter`然后 getter 尝试查找变量`foo`时，它首先在它自己的环境中查找，在那里没有找到它，然后在它的父环境中查找，即全局 env 并找到`foo`值为 1。

您的想法沿着框架近似的动态范围界定的路线进行。当`f1`被调用时，它会获得自己的环境（其中`foo`将被分配值 2），然后它调用该`getter`函数。的环境`foo`不是`getter`env 的父级（词法作用域），但 的环境`f1`是 的父框架，`getter`因为`getter`是从 调用的`f1`，所以要在环境中查找，`f1`您需要告诉`get`函数在父框架中查找比父环境。

总结是父环境是定义函数的环境（词法范围），父框架是调用函数的框架/环境（模拟动态范围）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-19T09:52:14.680

如果您定义`getter`在父框架中查看，它可以工作：

```
getter <- function(x) get(x, envir=parent.frame()) 
```

然后：

```
getter("foo")
[1] 1

f1()
[1] 2 
```

# javascript - 鼠标靠近时的jQuery动画

> ID：12492231
> 
> 赞同：1
> 
> 时间：2012-09-19T09:44:59.903
> 
> 标签：javascript, jquery, html, css

我一直在寻找一种方法，使导航菜单在鼠标进入附近区域时从浏览器顶部向下滑动，并在鼠标离开菜单时消失。

[感谢这个](https://stackoverflow.com/questions/7911604/function-for-mouse-near-an-element-in-jquery)问题，我离得更近了。

我遇到的问题是动画。它的行为非常奇怪。我已经在 J​​sFiddle 中模拟了我的代码来看看。

[http://jsfiddle.net/tVreF/2/](http://jsfiddle.net/tVreF/2/)

稍等片刻，在页面上移动鼠标，尝试调整窗口大小等，最终它会动画。显然这不是预期的方式。

任何建议将不胜感激，因为我不确定我是否以正确的方式去做！

编辑：只是为了消除任何混乱 - 我的意思是导航菜单最初不会出现，然后当鼠标靠近屏幕顶部时整个菜单本身会向下滑动。有点像将 Windows 任务栏设置为“自动隐藏”时发生的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:49:42.433

[http://sperling.com/examples/menuh/](http://sperling.com/examples/menuh/)
试试这个。您可以使用纯 css 制作动画...？

这可能不是您需要的解决方案，但它是一个更好的替代
**编辑**
在这种情况下，您可以将导航的宽度（您在其上编写 IsNear 函数）设置为 20px 并在其上写入 onhover 而不是总是检查正文

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T10:02:27.613

我所做的是改变了方法。我在这个小提琴中制作了一个事件捕捉器 div：

[http://jsfiddle.net/L2J5X/2/](http://jsfiddle.net/L2J5X/2/)

并在鼠标移到菜单动画进入的 div 上时添加事件处理程序，当鼠标移出 div 菜单动画时。

```
function dothething(amover)
    {
    if(amover) 
        {
            $(".nav").animate({top: '0px'}, 200, "linear");    
        } 
        else
        {
            window.setTimeout(function(){if(!$amthere){
            $(".nav").animate({top: '-40px'}, 200, "linear");        
            }},100);
        }
    }
        $("#detect").mouseover(function(){dothething(true);});
        $("#detect").mouseout(function(){dothething(false);});
$("#mainNav").mouseover(function(){$amthere=true;});
$("#mainNav").mouseout(function(){$amthere=false;});
$amthere = false;
​ 
```

div 绝对定位在顶部 z-index 上，因此事件总是被捕获。无论其他 div 在随机放置时会做什么（请参见绿色大块）。

希望这个对你有帮助。

*** 编辑 ***

添加了一个短暂的延迟，以防止从捕手 div 到菜单时隐藏。这就是 $amthere 变量的作用，看看我们是否在菜单上。然后用 100 毫秒的延迟检查我们是否可以进行真正的鼠标操作，如果不是什么也不做，如果可以，隐藏隐藏菜单。

# selenium - Selenium-FF 和 IE 驱动程序教程

> ID：12492233
> 
> 赞同：0
> 
> 时间：2012-09-19T09:45:07.827
> 
> 标签：selenium

我想知道是否有关于 Selenium 网络驱动程序的完整教程。我正在使用 IDE 记录测试用例并将它们作为 junit/webdriverbacked 导出到 Eclipse。我刚刚开始使用硒。所以，你能帮我找到一些更详细和更高级的教程吗？大多数测试用例与 FF 一起工作得很好，但当我使用 IE 时并不总是这样，有时我会为同一个测试用例得到不同的结果（没有进行修改）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:59:18.913

[这](http://code.google.com/p/selenium/w/list?q=label%3awebdriver)是一个非常好的纲要。

就是这样，sry

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:43:15.490

5 分钟手册。开始使用 selenium 。请参阅[此处](http://code.google.com/p/selenium/wiki/GettingStarted)

关于设置 IE 驱动程序，你可以[在这里](https://stackoverflow.com/questions/7278340/selenium-web-driver-internetexplorerdriver-nosuchelementexception)

为 selenium 测试设置 IDE 的常见想法：1）我使用 IDEA + maven 2）所以你只需创建 maven 项目 + 在本地 pom 文件中添加适当的依赖项：

```
<dependency> 
```

org.seleniumhq.selenium selenium-java 2.24.1

然后 maven 会自动建议自动导入所有需要的东西。然后，您可以简单地将 selenium IDE 生成的代码传递给适当的 java 文件（例如）：

```
import com.thoughtworks.selenium.SeleneseTestBase;
import org.junit.After;
import org.junit.Before;
import org.junit.BeforeClass;
import org.junit.Test;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.firefox.FirefoxDriver;

import java.util.concurrent.TimeUnit;

public class HomePageTest extends SeleneseTestBase{

static WebDriver driver;

@Before
public void openFirefox(){

driver = new FirefoxDriver();
driver.manage().timeouts().implicitlyWait(5, TimeUnit.SECONDS);

}

@Test
public void testHomePage(){
driver.get("https://www.google.by/");
WebElement search = driver.findElement(By.xpath("//*[@id=\"gbqfq\"]"));
search.sendKeys("laptop");
search.submit();

}

@After
public void closeFirefox(){
// driver.quit();
}

} 
```

并运行测试。请享用）

# java - 如何在（OpenEntityManagerInView）Web 环境内部和外部使用相同的 DAO？

> ID：12492237
> 
> 赞同：2
> 
> 时间：2012-09-19T09:45:33.870
> 
> 标签：java, spring, jpa

我们的应用程序由三部分组成：
1\. 一个**核心**模块，它包含模型和DAO 类以及spring 配置。
2.一个**web**模块，使用core包，在（门户）web环境中执行。
3.一个**tasks**模块，同样使用core包，作为定时任务执行（无web上下文）

我们尝试为 Web 模块引入带有[Spring Filter的 OpenEntityManagerInView 模式。](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/orm/jpa/support/OpenEntityManagerInViewFilter.html)据我了解，DAO 不能关闭 EntityManager，因为过滤器会这样做。此外，我会注入一个`EntityManager`with`@PersistenceContext`而不是`EntityManagerFactory`with `@PersistenceUnit`（对吗？）。

但是，如何在*任务*模块中通过这些修改重用相同的核心包？没有过滤器可以控制 EntityManager 的生命周期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:12:43.700

`OpenEntityManagerInViewFilter`通常用于补充[Spring 事务管理](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/transaction.html)，如下：

*   您在代码中定义事务边界。在事务中，您可以使用`EntityManager`注入`@PersistenceContext`（或从 获取的 Hibernate 会话`getCurrentSession()`）。事务还定义了 JPA[工作单元](http://martinfowler.com/eaaCatalog/unitOfWork.html)，即您在事务中对持久对象所做的所有更改都将自动传送到数据库。

*   但有时您需要在定义的事务之外访问数据库（最值得注意的情况是渲染视图时的延迟加载）。对于这种情况，您可以在 HTTP 请求处理期间的任何时候`OpenEntityManagerInViewFilter`访问和使用数据库。`@PersistenceContext`

如您所见，`OpenEntityManagerInViewFilter`它充当了缺席事务的替代品，因此`OpenEntityManagerInViewFilter`如果您在事务范围内执行，您可以运行相同的代码。因此，您需要适当地定义事务，以确保*任务*模块中所有与持久性相关的代码都在事务中运行。

# java - 使用 Hibernate 删除 SQL 表中的数据

> ID：12492239
> 
> 赞同：1
> 
> 时间：2012-09-19T09:45:42.197
> 
> 标签：java

如果它具有当前日期，我想从 mysql 表中删除数据。

这是我编写的代码，在“ERROR”行显示异常：

从应用了 where 条件的表中删除数据的过程是什么？

```
 Date date=new Date();

                     SimpleDateFormat myFormat=new SimpleDateFormat("dd-MM-yyyy");

                     String todayDate=myFormat.format(date);

                    String query="delete * from today_list where today_date="+"'"+todayDate+"'";    
        Transaction t1=session.beginTransaction();  
        session.createQuery(query).executeUpate();//ERROR
                    t1.commit(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T09:51:45.133

不要将实际参数值连接到查询字符串中。改为使用`setParameter`。

```
Query query = session.createQuery("delete from todayList where todayDate = :date ");
query.setParameter("date", date);
query.executeUpate(); 
```

这很容易弄清楚，但下次请也发布错误消息。

**编辑**还请注意查询字符串中的表名。它不是数据库中的实际表名，而是 Hibernate 实体名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T09:50:36.973

根据 SQL 语法，您不应该`*`在之后编写`delete`，即将您的语句更改为

`delete from ...`

尽管在处理包括 Hibernate 在内的任何 ORM 时这不是正确的方法。这种方式绕过缓存（如果你有缓存）。更好的方法是使用会话 API 方法删除实体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:57:00.013

它们是可以引发异常的两件事：

1 - 你应该写不带“*”的“Delete from”

2 - 尝试找出您需要的数据格式，如果您输入错误的格式，这也可能会造成问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-01T07:07:19.107

首先是您的代码中存在拼写错误。它必须变成`session.createQuery(query).executeUpdate();` 而不是；

```
session.createQuery(query)..executeUpate(); 
```

使用此会话事务，您可以删除数据库中的数据：

```
Configuration cfg = new Configuration();
                cfg.configure("Hibernate.cfg.xml");
                SessionFactory ss = cfg.buildSessionFactory();
                Session s = ss.openSession();
                Transaction tx = s.beginTransaction();
                Query query = s.createQuery("delete from Employee where Id:Id");
                query.setParameter("Id", valueToDelete);
                query.executeUpdate();
                tx.commit();
                s.close(); 
```

这对我很有效！:)

# mysql - MySQL：傻瓜式数据库设计

> ID：12492240
> 
> 赞同：-3
> 
> 时间：2012-09-19T09:45:43.023
> 
> 标签：mysql, sql, database, database-design

我是 MySQL 新手。我正在尝试使文本文档“机器可读”。我有一堆文本文档，每个文档都包含一些元数据（如作者、文档编号等）。此外，文本的不同部分被标记（如标题、介绍、引文、链接等），一些标记包含元数据（如链接参考）。

我需要能够通过元数据和文本搜索数据库。此外，我需要能够只搜索文档的不同部分（介绍等）。我还需要标记文本的新部分——添加额外的“标记”。

我可以很容易地想象如何在 xml 中表示这些文档，但是，由于我需要对这些文本执行复杂的查询，因此将它们存储在 xml 中并不是一个可行的选择。

我想找到有关如何以不会使添加附加信息（尤其是“标记”）困难的方式构造模式/表的基本指针。

希望关于我想要实现的目标的描述不会太模棱两可。非常感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:04:58.673

您描述的要求表明您需要的不是真正的 MySQL（或任何其他供应商）**关系数据库**，而是 Lucene 索引。至少那是我用来完成类似目标的（Lucene）。

由于问题不是很具体（请参阅[https://stackoverflow.com/faq#questions](https://stackoverflow.com/faq#questions)），我会给你一个一般性的答案。

所以试试 Solr ，它是 Lucene 与 MySQL 的结合。尝试通过本教程[http://lucene.apache.org/solr/api-3_6_1/doc-files/tutorial.html](http://lucene.apache.org/solr/api-3_6_1/doc-files/tutorial.html)

# html - 如何居中位置：固定元素 - HTML CSS

> ID：12492244
> 
> 赞同：-1
> 
> 时间：2012-09-19T09:45:54.150
> 
> 标签：html, css

我进行了广泛搜索，但似乎找不到我的特定问题的答案：我有一个 980 像素宽的 div，并且位置：固定在向下滚动时保持在页面顶部。我的问题是我无法弄清楚如何使 div 居中对齐，并保持居中，同时也是位置：固定而不是位置：相对

任何迹象，还是我错过了一些明显的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T09:48:42.613

您可以应用此 CSS 样式：

```
div#id {
    position:fixed;
    top:0; /* or whatever you need */
    left:50%;
    width:980px;
    margin-left:-490px; /* half the lenght of the element */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:49:46.387

按照 GionaF 的正确答案，这里有一个活生生的例子。

[http://jsfiddle.net/Ubp49/](http://jsfiddle.net/Ubp49/)

# spring - 调用 init 方法失败；嵌套异常是 java.util.NoSuchElementException

> ID：12492248
> 
> 赞同：0
> 
> 时间：2012-09-19T09:46:09.190
> 
> 标签：spring, graniteds

我正在尝试让 Granite's Gravity 与我的 Flex 4.6、Spring 3.1.1 和 Tomcat 7 项目一起工作，但我遇到了一个错误，并且在 NET 上没有解决方案。下面是我的 Spring applicationContext.xml 文件的摘录：

* * *

```
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:graniteds="http://www.graniteds.org/config"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.graniteds.org/config http://www.graniteds.org/public/dtd/2.3.0/granite-config-2.3.xsd">

<graniteds:messaging-destination id="gravity" no-local="true" session-selector="true"/> 
```

* * *

当我启动 tomcat 时，上面的 graniteds 行出现以下错误：

```
19 Sep 2012 9:24:52 AM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'gravity': Invocation of init method failed; nested exception is java.util.NoSuchElementException
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:958)
at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1599)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
Caused by: java.util.NoSuchElementException
at java.util.LinkedHashMap$LinkedHashIterator.nextEntry(LinkedHashMap.java:375)
at java.util.LinkedHashMap$ValueIterator.next(LinkedHashMap.java:388)
at org.granite.spring.MessagingDestination.afterPropertiesSet(MessagingDestination.java:40)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:914)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:386)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:112)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:617)
at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:958)
at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1600)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:139)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:909)
    ... 1 more 
```

* * *

我的war文件中有granite库，正常的graniteDS消息传递工作除了Gravity的东西，因为它在遇到上述错误时停止Granite服务。

我忘了做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T12:24:59.527

您可能在配置中缺少 graniteds:flex-filter。

# css - youtube 嵌入视频作为具有边框半径的 iframe

> ID：12492250
> 
> 赞同：2
> 
> 时间：2012-09-19T09:46:17.513
> 
> 标签：css, iframe, youtube, rounded-corners

我遇到了一个我完全不明白的问题。我有一个带有 YouTube 视频 iframe 的网站，并希望通过 CSS 来环绕边框。在[http://www.wunschpreisdeal.de/empfehlung/winterreifen-profiltiefe-und-zustand-noch-ok](http://www.wunschpreisdeal.de/empfehlung/winterreifen-profiltiefe-und-zustand-noch-ok)上，视频正确嵌入了圆形边框，但在[http://www.wunschpreisdeal.de/mitglieder-上并非如此empfehlung/斧头效应](http://www.wunschpreisdeal.de/mitglieder-empfehlung/the-axe-effect)。

它们都具有相同的 CSS，我没有发现这些集成之间有任何区别。谁能帮我？如果您需要更多信息，请询问。:)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T19:37:03.873

为了提前回答您的问题，这两个页面之间的区别在于添加`wmode=transparent`到`iframe`地址，如下所示：`http://www.youtube.com/embed/QKh1Rv0PlOQ?rel=0&wmode=transparent`. 这是一个快速解决问题的方法，但如果您想了解更多有关该主题的信息，请继续阅读！

* * *

Unfortunately, rounding the corners of embedded videos such as YouTube and Vimeo is quite challenging due to the differences between older browsers. Even wrapping the `iframe` in an outer `div` and applying a `border-radius` and `overflow: hidden` to the wrapper, which works for most `iframes`, doesn't *reliably* do the trick!

> Note: Ivijan-Stefan came up with an elegant solution below that works in most modern browsers, so if your site doesn't need to cater to legacy browsers like Internet Explorer 6 and 7, then feel free to use his implementation instead!

对于我们这些需要支持各种旧版浏览器的人来说，唯一*始终*可靠的方法是制作一个看起来像弯曲角落的图像，并使用该图像的副本来覆盖视频的每个角落. （这里我们需要`wmode=transparent`我上面描述的技巧，因为某些浏览器会在视频*下方*显示角落图像！）

以下是将此技术应用于`iframe`嵌入的 YouTube 视频的示例：http: [//jsfiddle.net/skywalkar/uyfR6/](http://jsfiddle.net/skywalkar/uyfR6/)（示例半径 = 20px）

> 注意：如果你让角落覆盖太大（大于~20px），那么它们会覆盖播放器控件！
> 为了尽量减少问题的影响，您可以尝试通过将图像旋转 45 度来切角。这需要一组不同的叠加层和一些创造性地使用边距，但如果您需要更大的圆角半径，这可能是值得的麻烦：http: [//jsfiddle.net/skywalkar/BPnLh/](http://jsfiddle.net/skywalkar/BPnLh/)（示例半径 = 30px）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-02T11:53:19.700

小而美丽的把戏。

```
iframe,
object,
embed{
    border:5px solid rgba(255,255,255,0);
    -webkit-border-radius: 20px !important; 
    -ms-border-radius: 20px !important; 
    -o-border-radius: 20px !important;  
    border-radius: 20px !important;     
} 
```

**[演示](https://creativform.makes.org/thimble/LTc1Njk0MDU0NA==/how-to-add-border-radius-on-embedded-youtube-video)**

# wordpress - 一种特定的 Wordpress 自定义帖子类型未显示

> ID：12492252
> 
> 赞同：0
> 
> 时间：2012-09-19T09:46:17.310
> 
> 标签：wordpress, custom-post-type

对于 Wordpress 模板，我在 functions.php 文件中创建了几个自定义帖子类型。目前，当我执行以下查询时，我的 MacBook 和 iPhone 上的帖子类型显示正确：

只有特定的“新闻”帖子类型：

`$args = array( 'post_type' => 'news' ); query_posts($args);`

多种自定义帖子类型：

`$args = array( 'post_type' => array('sponsors','news','teams','businessclub','events') ); query_posts($args);`

奇怪的是，在其他几个设备上，只有自定义帖子类型“新闻”没有显示，其他设备在查询中使用多种自定义帖子类型。

谁能帮我解决这个奇怪的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:20:37.757

为什么不将第一个数组中的 post_type 粘贴`$args`到它自己的数组中呢？

```
$args = array( 'post_type' => array('news') ); 
query_posts($args); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-07T11:02:00.193

将此添加到您的 function.php 文件中：

```
add_filter( 'pre_get_posts', 'my_get_posts' );

function my_get_posts( $query ) {

    if ( is_home() && $query->is_main_query() )
        $query->set( 'post_type', array( 'post', 'news' ) );

    return $query;
} 
```

这应该使一切正常。在这里找到解决方案：http: [//justintadlock.com/archives/2010/02/02/showing-custom-post-types-on-your-home-blog-page](http://justintadlock.com/archives/2010/02/02/showing-custom-post-types-on-your-home-blog-page)

# cocoa - 函数“SecCertificateInferLabel”的隐式声明在 C99 中无效

> ID：12492254
> 
> 赞同：1
> 
> 时间：2012-09-19T09:46:27.880
> 
> 标签：cocoa

代码（OS X Mountain Lion）：

```
OSStatus statusNew = SecCertificateInferLabel(cert, &nameRef); 
```

在 subj 中产生一个警告，下面你有所有包括：

```
#import <SecurityInterface/SFChooseIdentityPanel.h>
#include <Security/cssmtype.h>
#include <Security/oidsalg.h>
#include <Security/SecCertificate.h>
#include <Security/SecIdentity.h>
#include <Security/SecIdentitySearch.h>
#include <Security/SecPolicySearch.h>
#include <Security/SecTrust.h>
#include <Security/SecIdentitySearch.h>
#include <Security/cssmapi.h>
#include <Security/cssmapple.h>
#include <Security/cssmtype.h>
#include <Security/Security.h> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:52:49.977

尝试也包括[`SecCertificatePriv.h`](http://opensource.apple.com/source/libsecurity_keychain/libsecurity_keychain-38259/lib/SecCertificatePriv.h)标题：

```
#include <Security/SecCertificatePriv.h> 
```

我看到它包含您要使用的函数的声明。

```
...
/*
 * Private API to infer a display name for a SecCertificateRef which
 * may or may not be in a keychain.
 * This is a candidate for deprecation; use SecItemCopyDisplayNames() instead.
 */
OSStatus SecCertificateInferLabel(SecCertificateRef certificate, CFStringRef *label);
... 
```

# javascript - 无法在 Parse.com 中获取属性

> ID：12492256
> 
> 赞同：2
> 
> 时间：2012-09-19T09:46:38.047
> 
> 标签：javascript, jquery, backbone.js, parse-platform

我正在 Parse.com 中编写一个应用程序，并且我定义了一个“AppState”对象，它存储了我通过应用程序传递的各种常量和值（有点像 PHP 会话）。

有一次，我试图从 AppState 对象中读取一个值，尽管它似乎已设置，但我没有取回该值。

AppState 定义为：

```
var AppState = Parse.Object.extend("AppState", {
    defaults: {
        folderShown: '',
        folderSpecial: 'all',
        showCaption: false
    }
}); 
```

然后我必须启动应用程序：

```
var state = new AppState;
new AppRouter;
new AppView; 
```

在 AppRouter 中，我正在设置“路由”的值：

```
var AppRouter = Parse.Router.extend({
    routes: {
        "viewPage/:object_id": "viewPage",
    },
    initialize: function(options) {
    },
    viewPage:   function(object_id) {
        state.set("currentPage", object_id);
        state.set("route", "view");
    }
}); 
```

在应用程序视图中，我有：

```
var AppView = Parse.View.extend({
  initialize:   function() {
      this.render();
  },
  render:  function() {
    console.log(state);
    console.log(state.get('route'));
  }
}); 
```

第一个控制台日志显示状态，属性“路由”设置为“视图”：

```
attributes: Object
  folderShown: ""
  folderSpecial: "all"
  route: "view"
  showCaption: false 
```

第二个控制台日志显示“未定义”。

如果我获得默认属性之一，例如“folderSpecial”，它会读取正确的值。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:25:46.747

路由中定义的路由在`Backbone.history.start()`被调用时被评估。来自[http://backbonejs.org/#Router](http://backbonejs.org/#Router)

> 在页面加载期间，在您的应用程序完成所有路由器的创建后，请务必调用 Backbone.history.start() 或 Backbone.history.start({pushState: true}) 来路由初始 URL。

这意味着您的状态对象只会在`Backbone.history.start()`被调用时更新：在您的情况下，在您的视图初始化之后。

`Backbone.history.start`之前打电话`new AppView`应该可以解决您的问题。

一个模拟您的问题的小提琴：http: [//jsfiddle.net/nikoshr/LWh2P/](http://jsfiddle.net/nikoshr/LWh2P/) 和一个修改版本：http: [//jsfiddle.net/nikoshr/LWh2P/1/](http://jsfiddle.net/nikoshr/LWh2P/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:10:44.047

感谢 nikoshr 告诉我这与`Parse.history.start()`. 将其移至新的 AppView 解决问题之前。

# c# - 字典中的关键识别速度

> ID：12492257
> 
> 赞同：2
> 
> 时间：2012-09-19T09:46:45.413
> 
> 标签：c#, performance, loops, dictionary

关于使用字符串作为键的任何字典的识别速度，我有一个相当普遍的问题，到目前为止找不到答案。

在我当前的程序中，我有一个自定义对象的字典，但我使用的键是文件名，包括文件的整个路径，因此实际上没有键可以出现两次。

我的问题是：在字典中查找特定对象的时间是否很大程度上取决于用作键的字符串的长度？毕竟，如果我在我的对象中保存了大量数据，并且我在循环中使用这些数据并每次使用`myDictionary[Key]`. 简单的识别可能需要很长时间，从而使循环持续更长的时间。

我对这个问题的解决方案是：如果使用数组，假设`double[,,]`在我的对象中，我临时创建一个新数组并将这个数组设置为等于字典中的数组，所以我不必搜索字典对于每一个循环迭代。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T09:53:13.580

> 在字典中查找特定对象的时间是否很大程度上取决于用作键的字符串的长度？

是的，它确实。在字典中查找元素需要两个 CPU 密集型步骤：

1.  生成密钥的哈希码。
2.  通过相等比较同一桶中的所有元素。

字典将元素存储在桶中。为了能够进行[O(1)](http://en.wikipedia.org/wiki/Big_O_notation)查找，字典使用 计算内部数组中的位置`hashCode modulo array.Length`。这可能导致元素具有相同的索引。这些元素存储在同一个索引下；这被称为桶。

对于一个字符串，哈希码是使用字符串中的所有字符生成的，这意味着该字符串的哈希码的生成具有O(n)的性能特征。当字符串很大时，生成哈希码需要更长的时间。通过完全比较两个字符串来比较字符串是否相等。如果这些字符串包含 100,000 个字符并且只有最后一个字符不同，那么比较这两个字符串可能会花费大量时间。如果它们与第一个字符不同，则比较将很快返回 false。确定两个字符串实际上相等（如果它们不是引用相等）需要最多时间，因为需要遍历完整的字符串。

如果可以，如果字典位于应用程序的性能关键路径中，请缩短键字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T09:52:17.077

**编辑**
我的回答措辞有点误导 - 试图澄清这一点。

理论上，如果哈希函数产生理想的哈希码（意味着对于每个唯一输入，输出也是唯一的），那么在字典/哈希表中查找应该是一个 O(1) 过程。如果两个输入字符串生成相同的散列码（散列函数*不*理想），则为该散列码创建一个条目列表（“桶”），然后必须逐项搜索。

因此，一旦创建了哈希码，理论上查找存储桶是一个 O(1) 操作。搜索桶是一个 O(n) 操作，其中 n 是桶中元素的数量。

字符串长度影响：

1.  哈希码的创建。字符串越长，创建哈希码所需的时间就越长。
2.  桶搜索：逐项搜索桶时，字符串长度当然也很重要，因为它是搜索的关键。

所以：*是*的，字符串长度确实很重要。

真正的问题是字典是否真的是适合您情况的工具，因为您说您经常迭代字典中的所有键。在这种情况下，如果您很少插入但经常查找，则使用对象列表（包含文件名和其他数据）并通过在每次插入时查找文件名来防止插入重复项可能会更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:52:17.637

通常，较短的字符串比较长的字符串执行得更好。但是对性能的影响是非常有限的（直到你有百万个 get）。你可以试试微型长凳或[在这里阅读](http://www.dotnetperls.com/dictionary-string-key)

# php - 每次循环运行时更改 div id

> ID：12492260
> 
> 赞同：0
> 
> 时间：2012-09-19T09:46:56.733
> 
> 标签：php, javascript, loops, html

我在一个循环中得到了这个回声，它产生了一堆行，但都具有相同的 id'ed div。

对于每一行/循环运行，有没有办法更改正在创建的 div 的 id？

像..

div id=content1 div id=content2 等等...

那我也可以拥有

loadContent('#content1'... loadContent('#content2'... 等等...

```
echo "<tr class=\"expand-child\"><td colspan=\"11\" height=\"100px\">$name1<br>"; ?> <a href="javascript:loadContent('#content', 'Earnings-Disclaimer.html');">Link 1</a> <?php echo "<div id=\"content\"></div></td></tr>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:51:01.513

我不知道你的循环是什么，但这样的事情会起作用

```
<?php
$i++;
foreach($loop as $key=>$name1)
{
    echo "<tr class=\"expand-child\"><td colspan=\"11\" height=\"100px\">$name1<br>"; ?> <a href="javascript:loadContent('#content<?php echo $i; ?>', 'Earnings-Disclaimer.html');">Link 1</a> <?php echo "<div id=\"content\"></div></td></tr>";
    $i++;
}
?> 
```

或更具可读性

```
<?php
$i++;
foreach($loop as $key=>$name1)
{
    ?>
    <tr class="expand-child">
        <td colspan="11" height="100px">
            <?=$name1?><br>
            <a href="javascript:loadContent('#content<?=$i?>', 'Earnings-Disclaimer.html');">Link 1</a> 
            <div id="content<?=$i?>"></div>
        </td>
    </tr>
    <?php
    $i++;
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:53:07.600

```
<?php
for($i=0;$i<10;$i++)
{
    echo "<tr class=\"expand-child\"><td colspan=\"11\" height=\"100px\">$name1<br>";
    ?> <a href="javascript:loadContent('#content<?php echo $i;?>', 'Earnings-Disclaimer.html');">Link 1</a> <?php echo "<div id=\"content".$i."\"></div></td></tr>";
}
?> 
```

# php - .htaccess modrewrite 破坏了我的表单

> ID：12492261
> 
> 赞同：3
> 
> 时间：2012-09-19T09:47:03.207
> 
> 标签：php, html, .htaccess, mod-rewrite

我在 .htaccess 中添加了一个 modrewrite，现在我的所有表单都不会将发布数据发送到 php 脚本。

代码：例如：我的 .htaccess 删除了 .php 扩展名，如果它是一个目录，则删除尾部斜杠。

```
RewriteEngine On

# Redirect index to site root
RewriteCond %{HTTP_HOST} ^mysite.com [NC]
RewriteRule ^(.*)$ http://www.mysite.com/$1 [R=301,NC]
RewriteRule ^index.php$ http://www.mysite.com/ [R=301,L]

# Unless directory, remove trailing slash
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/$ http://www.mysite.com/$1 [R=301,L]

# Redirect external .php requests to extensionless url
RewriteCond %{THE_REQUEST} ^(.+)\.php([#?][^\ ]*)?\ HTTP/
RewriteRule ^(.+)\.php$ http://www.mysite.com/$1 [QSA,R=301,L]

# Resolve .php file for extensionless php urls
RewriteRule ^([^/.]+)$ $1.php [QSA,L] 
```

**有没有办法向 modrewrite 规则添加例外，以便忽略某些文件/目录？**那么所有名为 form-process.php、email-process.php、upload-process.php、save-process.php 的文件都可以忽略吗？

编辑：我刚刚读到我可以将 !POST 添加到我的查询中。如果我像这样添加它，它会工作吗？

```
# Redirect external .php requests to extensionless url
RewriteCond %{THE_REQUEST} ^(.+)\.php([#?][^\ ]*)?\ HTTP/ !POST
RewriteRule ^(.+)\.php$ http://www.mysite.com/$1 [R=301,L]

# Resolve .php file for extensionless php urls
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f !POST
RewriteRule ^([^/.]+)$ $1.php [L] 
```

编辑：还在上面的规则中添加了 [QSA]，但仍然没有变量传递给我的表单

**编辑：对于其他遇到此问题的人，我通过选择发布数据的文件并将它们从对 .htaccess 文件的更改中删除来修复它。这并不理想，但它现在有效。**

```
# ignore recipes page
RewriteRule ^directorytoremove - [L,NC]
RewriteRule ^filenametoremove - [L,NC] 
```

即使您添加了 QSA，重定向 301 也不会通过 POST 传递任何数据。所以你需要做一个post-redirect-get，例如你的表单发布数据，被重定向，接收文件获取数据并处理它。如果您遇到同样的问题，请将上面的代码粘贴到您的 .htaccess 文件顶部，并在打开的 RewriteEngine On 语句下方。

希望对遇到同样问题的人有所帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:04:50.637

您可以在开头添加这样的规则（就在 之后`RewriteEngine on`）

```
RewriteRule ^(form|email|upload|save)-process\.php$ - [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:48:39.087

尝试这个：

```
# Resolve .php file for extensionless php urls
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^([^/.]+)$ $1.php [QSA,L] 
```

# mysql - 在两个不同组内使用 ORDER BY 的 SQL 查询

> ID：12492266
> 
> 赞同：3
> 
> 时间：2012-09-19T09:47:14.917
> 
> 标签：mysql, sql, database

假设我有一张简单的 NBA 球员表：

id,player,mp,ppg（mp - 比赛场次，ppg - 每场比赛得分）。

我需要一个查询来获取所有的人，但将结果分成两部分：

*   参加过 PPG desc 订购的超过或等于 30 场比赛的球员，
*   参加 PPG 订购的比赛少于 30 场的玩家 desc

所以理想的输出将是（示例）：

```
n. player    mp ppg

1\. player1   82 32.5
2\. player2   56 32.1
3\. player3   82 29.7
4\. player4   80 27.6 
```

...

```
70\. player70 75 1.5  (lowest in the 30+ games group)
71\. player71 29 35.7 (highest in the less than 30 games group)
72\. player72 19 31.3 
```

...

第 1 组）排在第一位（更重要），因此即使第 2 组中的 PPG 高于第 1 组中最好的 PPG，它也会在球员参加 30 场以上比赛的组中最差的 PPG 之后下降。

有没有办法在一个查询中做到这一点？我正在使用 mySQL。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:52:45.977

```
select id, player, mp, ppg
from 
    playerTable
order by if (mp>=30, 1, 0) desc, ppg desc, mp desc` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:49:52.103

```
SELECT * 
FROM tablename
ORDER BY
    CASE WHEN mp >= 30 THEN PPG END DESC,
    CASE WHEN mp < 30 THEN PPG END ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:51:58.700

假设`ppq`总是低于 1000000，这将起作用：

```
SELECT 
  * -- or whatever you want
FROM players
ORDER BY IF(mp>=30,1000000+ppg,mp) desc 
```

这假设第二组按`mp`desc 排序（如示例），而不是按`ppg`（如文本）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T11:15:13.860

首先按 MP>30 订购，然后按 PPG 订购

```
ORDER BY (CASE WHEN mp >= 30 THEN 1 ELSE 2 END) ASC, PPG DESC 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T11:28:19.183

```
select player, mp, ppg
from t
order by mp < 30, ppg desc 
```

# apache - 将外部 url 重新映射到内部端口服务

> ID：12492270
> 
> 赞同：0
> 
> 时间：2012-09-19T09:47:25.773
> 
> 标签：apache, jetty

我已经标记了这个 Apache，因为我认为这就是我正在寻找的东西，但我知道我即将接受教育。如果我错过了标记，请随时编辑问题标题。

我有一个通过 http 运行多个服务的家庭服务器（Linux Mint 13，LAMP 堆栈）。例如：

```
[MY-IP]/        <- landing
[MY-IP]/service1    
[MY-IP]/service2
[MY-IP]/service3 
```

我还运行 Subsonic（一个音乐服务器，subsonic.org），它在端口 4040 上运行。

```
[MY-IP]:4040/           <- subsonic landing page
[MY-IP]:4040/index.view <- example subsonic page 
```

Subsonic 有一个捆绑的 Jetty (java) 服务器，监听端口 4040。

我想摆脱港口申报；当特定目录/url被命中时，我可以使用apache将一些端口80调用转发到端口4040吗？例如：

```
[MY-IP]/subsonic 
```

内部重定向到

```
[MY-IP]:4040/ 
```

意味着我可以使用

```
[MY-IP]/subsonic/index.view 
```

很多地方（例如我的工作场所）阻止使用非标准端口 [尽管允许使用个人音乐，所以我没有违反任何规则] - 我想要一个简单的 URL 供我自己和我的女朋友可以访问音乐。

这可以通过 apache 中的虚拟主机或 mod_rewrite 来完成，而不会影响我的正常端口 80 服务吗？如果 apache 不是方法，我该如何实现我的既定目标？

（这都是为了外部访问路由器后面的服务器，端口转发不是问题）

指向明确指南的链接会很有用；我的 google-fu 在这方面做得不够好。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:14:42.487

我认为您正在寻找 mod_proxy：[http ://httpd.apache.org/docs/2.2/mod/mod_proxy.html](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)

# objective-c - ObjC：将数据附加到 NSMutableData，字节数不一致？

> ID：12492273
> 
> 赞同：0
> 
> 时间：2012-09-19T09:47:32.763
> 
> 标签：objective-c, byte, nsdata, nsmutabledata

我`NSMutableData *dump`必须在上面附加一些`NSData *chunk`.

chunk 是 440 字节，包含从文件中读取的原始字节。该文件的权重也为 440 字节。目前很好。

现在，我必须附加这个：

```
NSMutableData *dump = [NSMutableData data];
[dump appendData:chunk]; 
```

转储权重 448 字节。将转储写入文件会导致文件的权重为 448 字节。如何解释这种行为？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:08:39.360

一个类别被添加到 NSData 以覆盖默认行为`writeToFile:atomically:`

AES256 将几个字节添加到它加密的块中。

# marklogic - 如何避免使用 search:search API 搜索特定元素？

> ID：12492276
> 
> 赞同：0
> 
> 时间：2012-09-19T09:47:42.477
> 
> 标签：marklogic

我想避免在`search:search`（搜索 API）中搜索某些元素。我怎样才能做到这一点？每当我们使用`search:search`它搜索整个文档时，如果我们想搜索一个元素，我们可以添加可搜索表达式。但是，如果我们不搜索某些元素并希望从搜索中排除这些元素，那么我们如何使用`search:search`API 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:52:07.803

您可以对其进行排列，以便该元素不会出现在索引中。使用[单词查询 exclude](http://docs.marklogic.com/guide/admin/wordquery#chapter)。

# actionscript-3 - Flash CS3 鼠标事件

> ID：12492277
> 
> 赞同：0
> 
> 时间：2012-09-19T09:47:48.280
> 
> 标签：actionscript-3

我想`menubar.handmove`在鼠标离开按钮时让它可见。但是，当我越过/单击按钮时，可见性将是错误的，但当我将鼠标移到按钮上时不会返回 true。

我应该怎么办？

```
stop();

menubar.play_but.addEventListener(MouseEvent.CLICK, playgame);
menubar.intr_but.addEventListener(MouseEvent.MOUSE_OVER, overdown1);
menubar.play_but.addEventListener(MouseEvent.MOUSE_OVER, overdown);
menubar.intr_but.addEventListener(MouseEvent.CLICK, instruc);
stage.addEventListener(MouseEvent.MOUSE_MOVE, menu);

var mouseE:Boolean = false;

function playgame(e:MouseEvent):void {
gotoAndPlay(63);
mouseE=true;
}

function overdown(e:MouseEvent):void {
 mouseE=true;
}

function instruc(e:MouseEvent):void {
gotoAndPlay(64);
mouseE=true;
}

function overdown1(e:MouseEvent):void {
mouseE=true;
}

function menu(e:MouseEvent):void {

if(mouseE==false;){
menubar.handmove.visible=true;
}else{
menubar.handmove.visible=false;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:30:03.443

您应该将此代码添加到现有代码中：

```
menubar.intr_but.addEventListener(MouseEvent.MOUSE_OUT, moveout);
menubar.play_but.addEventListener(MouseEvent.MOUSE_OUT, moveout);

function moveout(e:MouseEvent):void {
    mouseE=false;
} 
```

还要删除字符`;`以成功编译。必须：

```
if(mouseE==false){ 
```

# java - 如何使用单个命令构建一个maven项目并部署在tomcat中？

> ID：12492282
> 
> 赞同：2
> 
> 时间：2012-09-19T09:47:59.093
> 
> 标签：java, tomcat, maven, sts-springsourcetoolsuite

我是 Java 和 Springsource 工具套件的新手。

目前，我正在一个接一个地运行以下命令以将项目部署到tomcat中。

*   mvn 清洁包
*   mvn tomcat:运行

在 SpringSource 工具套件中，我使用`Run as -> maven Build`并首先使用目标作为`clean package`. 然后我再次使用`Run as -> maven Build`with target as `tomcat:run`。

这两个命令可以一次执行吗？

有人告诉我 Linux 允许这样的进程 mvn clean package;mvn tomcat:run

有没有办法在 Windows 中复制它？

每次我在 Windows 中尝试此操作时，我都会收到一条消息，显示程序已启动一个无法停止的线程。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T23:05:54.663

如前所述，您可以在同一行调用具有多个操作的 Maven 命令。
通常，您使用某些*阶段*调用 Maven，例如 in `mvn clean install site`。
这些阶段属于一个[生命周期](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html "生命周期")（清洁、默认或站点）。

除了*阶段*之外，您还可以添加一些*目标*调用。它们将按顺序执行。就像在（[运行 Maven 工具](http://maven.apache.org/guides/getting-started/maven-in-five-minutes.html#Running_Maven_Tools)）中一样。*`mvn clean dependency:copy-dependencies package`*

 *如果您在一个命令中执行所有任务而不是多次调用，则执行时间将得到优化。*

# c# - 每个带有鉴别器的子类的休眠表

> ID：12492284
> 
> 赞同：0
> 
> 时间：2012-09-19T09:48:05.273
> 
> 标签：c#, nhibernate, inheritance, nhibernate-mapping

我遇到了一个问题，由于某种未知原因，NHibernate 生成了错误的 SQL。

以下是我的映射文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="BAM.PMT.Domain"
                   namespace="BAM.PMT.Domain.Core.Cos">

    <class name="SiteServiceEntity" table="SiteServiceEntity" schema="core_cos" dynamic-update="true" abstract="true" discriminator-value="-1">
        <id name="Id" access="field.camelcase-underscore">
            <generator class="guid.comb" />
        </id>

        <discriminator column="Type" type="short" />

        <component name="Name" access="field.camelcase-underscore">
            <property name="Nl" column="NameNl" />
            <property name="Fr" column="NameFr" />
            <property name="En" column="NameEn" />
            <property name="De" column="NameDe" />
        </component>

        <property name="Code" access="field.camelcase-underscore" />

        <subclass name="BAM.PMT.Domain.Core.Cos.SiteServiceCategory" dynamic-update="true" discriminator-value="0">
            <set name="SiteServiceGroups" table="SiteServiceGroup" schema="core_cos" cascade="none" inverse="true" access="field.camelcase-underscore">
                <key column="SiteServiceCategoryId" />
                <one-to-many class="SiteServiceGroup" />
            </set>
            <join table="SiteServiceCategory" schema="core_cos">
                <key column="Id"/>

                <many-to-one name="Site" class="BAM.PMT.Domain.Core.Sites.Site" column="SiteId" cascade="none" access="field.camelcase-underscore" />
            </join>
        </subclass>

        <subclass name="BAM.PMT.Domain.Core.Cos.SiteServiceGroup" dynamic-update="true" discriminator-value="1">
            <set name="SiteServices" table="SiteService" schema="core_cos" cascade="none" inverse="true" access="field.camelcase-underscore">
                <key column="SiteServiceGroupId" />
                <one-to-many class="SiteService" />
            </set>
            <join table="SiteServiceGroup" schema="core_cos">
                <key column="Id"/>

                <many-to-one name="SiteServiceCategory" class="SiteServiceCategory" column="SiteServiceCategoryId" cascade="none" access="field.camelcase-underscore" />

            </join>
        </subclass>

        <subclass name="BAM.PMT.Domain.Core.Cos.SiteService" dynamic-update="true" discriminator-value="2">
            <set name="Subcontractors" table="SiteServiceSubcontractor" schema="core_cos" cascade="save-update" access="field.camelcase-underscore">
                <key column="SiteServiceId" />
                <many-to-many class="BAM.PMT.Domain.Core.Sites.Subcontractor" column="SubcontractorId" />
            </set>

            <set name="SiteKpis" table="SiteKPI" schema="core_cos" cascade="none" inverse="true" access="field.camelcase-underscore">
                <key column="SiteServiceId" />
                <one-to-many class="SiteKpi" />
            </set>

            <set name="SiteCauses" table="SiteCause" schema="helpdesk" cascade="none" inverse="true" access="field.camelcase-underscore">
                <key column="SiteServiceId" />
                <one-to-many class="BAM.PMT.Domain.Helpdesk.SiteCause" />
            </set>
            <join table="SiteService" schema="core_cos">
                <key column="Id"/>

                <many-to-one name="SiteServiceGroup" class="SiteServiceGroup" column="SiteServiceGroupId" cascade="none" access="field.camelcase-underscore" />
                <many-to-one name="Service" class="Service" column="ServiceId" cascade="none" access="field.camelcase-underscore" />
                <many-to-one name="SiteResponsible" class="BAM.PMT.Domain.Core.Security.User" column="SiteResponsibleId" cascade="none" access="field.camelcase-underscore" />
                <many-to-one name="BamResponsible" class="BAM.PMT.Domain.Core.Security.User" column="BamResponsibleId" cascade="none" access="field.camelcase-underscore" />
                <many-to-one name="SubcontractorResponsible" class="BAM.PMT.Domain.Core.Security.User" column="SubContractorResponsibleId" cascade="none" access="field.camelcase-underscore" />

            </join>
        </subclass>
    </class>

</hibernate-mapping> 
```

当我使用以下内容查询完整的树结构时：

```
var query = QueryOver.Of<SiteServiceCategory>();
            query.OrderBy(s => s.Code).Asc()
                .ThenBy(s => s.Id).Asc()
                .Left.JoinQueryOver(sc => sc.SiteServiceGroups)
                .OrderBy(sg => sg.Code).Asc()
                .ThenBy(sg => sg.Id).Asc()
                .Left.JoinQueryOver(sg => sg.SiteServices)
                .OrderBy(s => s.Code).Asc()
                .ThenBy(s => s.Id).Asc()
                .Left.JoinQueryOver(s => s.Service);

            query
                .Where(sc => sc.Site.Id == siteId)
                .TransformUsing(Transformers.DistinctRootEntity);

            return query; 
```

生成以下 SQL：

```
SELECT this_.id                                  AS Id105_3_,
       this_.namenl                              AS NameNl105_3_,
       this_.namefr                              AS NameFr105_3_,
       this_.nameen                              AS NameEn105_3_,
       this_.namede                              AS NameDe105_3_,
       this_.code                                AS Code105_3_,
       this_1_.siteid                            AS SiteId106_3_,
       siteservic1_1_.siteservicecategoryid      AS SiteServ2_5_,
       siteservic1_.id                           AS Id5_,
       siteservic1_.id                           AS Id105_0_,
       siteservic1_.namenl                       AS NameNl105_0_,
       siteservic1_.namefr                       AS NameFr105_0_,
       siteservic1_.nameen                       AS NameEn105_0_,
       siteservic1_.namede                       AS NameDe105_0_,
       siteservic1_.code                         AS Code105_0_,
       siteservic1_1_.siteservicecategoryid      AS SiteServ2_107_0_,
       siteservic2_1_.siteservicegroupid         AS SiteServ2_6_,
       siteservic2_.id                           AS Id6_,
       siteservic2_.id                           AS Id105_1_,
       siteservic2_.namenl                       AS NameNl105_1_,
       siteservic2_.namefr                       AS NameFr105_1_,
       siteservic2_.nameen                       AS NameEn105_1_,
       siteservic2_.namede                       AS NameDe105_1_,
       siteservic2_.code                         AS Code105_1_,
       siteservic2_1_.siteservicegroupid         AS SiteServ2_109_1_,
       siteservic2_1_.serviceid                  AS ServiceId109_1_,
       siteservic2_1_.siteresponsibleid          AS SiteResp4_109_1_,
       siteservic2_1_.bamresponsibleid           AS BamRespo5_109_1_,
       siteservic2_1_.subcontractorresponsibleid AS SubContr6_109_1_,
       service3_.id                              AS Id16_2_,
       service3_.code                            AS Code16_2_,
       service3_.namenl                          AS NameNl16_2_,
       service3_.namefr                          AS NameFr16_2_,
       service3_.nameen                          AS NameEn16_2_,
       service3_.namede                          AS NameDe16_2_,
       service3_.isactive                        AS IsActive16_2_,
       service3_.servicegroupid                  AS ServiceG8_16_2_
FROM   core_cos.siteserviceentity this_
       INNER JOIN core_cos.siteservicecategory this_1_
               ON this_.id = this_1_.id
       LEFT OUTER JOIN core_cos.siteserviceentity siteservic1_
                    ON this_.id = siteservic1_.siteservicecategoryid
       LEFT OUTER JOIN core_cos.siteservicegroup siteservic1_1_
                    ON siteservic1_.id = siteservic1_1_.id
       LEFT OUTER JOIN core_cos.siteserviceentity siteservic2_
                    ON siteservic1_.id = siteservic2_.siteservicegroupid
       LEFT OUTER JOIN core_cos.siteservice siteservic2_1_
                    ON siteservic2_.id = siteservic2_1_.id
       LEFT OUTER JOIN core_cos.service service3_
                    ON siteservic2_1_.serviceid = service3_.id
WHERE  this_.type = 0
       AND this_1_.siteid = @p0
ORDER  BY this_.code ASC,
          this_.id ASC,
          siteservic1_.code ASC,
          siteservic1_.id ASC,
          siteservic2_.code ASC,
          siteservic2_.id ASC 
```

问题是这些表上不存在`left outer join` `siteservic1_.siteservicecategoryid`and 。`siteservic2_.siteservicegroupid`这些存在于以下方面：`siteservic1_1_.siteservicecategoryid` -`siteservic2_1_.siteservicegroupid`

任何人都知道发生了什么，如果需要，可以提供额外的信息。

提前致谢！

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-09-19T13:16:01.953

[延迟加载继承](http://ayende.com/blog/4168/answer-the-lazy-loaded-inheritance-many-to-one-association-or-m-conundrum)

[映射继承](http://ayende.com/blog/3941/nhibernate-mapping-inheritance)

这两个解决了我的问题。

# javascript - 通过 JSON 模型上传 ASP.NET MVC 3 文件

> ID：12492286
> 
> 赞同：0
> 
> 时间：2012-09-19T09:48:19.253
> 
> 标签：javascript, json, asp.net-mvc-3

我的 Web 应用程序通过将 JSON 数据发布到某些 URL（不使用 html 表单）与服务器端（ASP.NET MVC 3）进行交互。

如何将文件发布到服务器并将其绑定到`HttpPostedFileBase`使用 JSON 而不使用多部分表单？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:13:38.727

我已经这样做了，但没有使用`HttpPostedFileBase`从 MVC 应用程序获取内容。我只是使用 JSON。

您可以简单地使用`FileReader.onload`（在 HTML5 上）方法来提取文件内容并作为 Base64 字符串直接发布到 MVC 控制器。是`#upload-button`一个`<input type=file ...>`标签。

```
 var file = $('#upload-button')[0].files[0];
    var reader = new FileReader();
    reader.onload = (function (f) {
        return function (e) {
            if (e.target.readyState == FileReader.DONE) {
                $.ajax("FileStore/SavePicture", {
                    data: { content: e.target.result, name: f.name },
                    type: "post",
                    contentType: "application/json"
                });
            }
        };
    })(file) 
```

从那里您可以使用`Convert.FromBase64String`方法转换为`byte[]`. 这就是 Action 内容的样子；

```
 string base64String = content;
    // Get the starting point of the actual content from the base64String.
    int start = base64String.IndexOf(",") + 1;
    int length = base64String.Length - start;
    contentAsString = base64String.Substring(start, length);

    byte[] dataAsBytes = Convert.FromBase64String(contentAsString); 
```

可能还有其他一些方法可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:54:40.640

可以，但是你会遇到跨浏览器的问题，更多细节可以在这里找到：[如何使用 jQuery 异步上传文件？](https://stackoverflow.com/questions/166221/how-can-i-upload-files-asynchronously-with-jquery)或者只是谷歌“ajax文件上传”

# php - Magento - 扩展 Topmenu.php 块停止 topmenu.phtml 模板加载

> ID：12492291
> 
> 赞同：7
> 
> 时间：2012-09-19T09:48:23.553
> 
> 标签：php, magento

我正在使用以下 xml 扩展 app/code/core/Mage/Page/Block/Html/Topmenu.php：

```
<config>
    <modules>
        <Custom_Menu>
            <version>1.0</version>
        </Custom_Menu>
    </modules>
    <global>
        <blocks>
            <page>
                <rewrite>
                    <html_topmenu>Custom_Menu_Block_Page_Html_Topmenu</html_topmenu>
                </rewrite>
            </page>
        </blocks>
    </global>
</config> 
```

我的班级定义：

```
class Custom_Menu_Block_Page_Html_Topmenu extends Mage_Page_Block_Html_Topmenu
{

} 
```

即使我的类没有覆盖任何方法，也不会处理以下模板文件：

```
app/design/frontend/base/default/template/page/html/topmenu.phtml 
```

我没有覆盖模板文件。

一旦我禁用我的模块，它就会再次开始工作。

我需要在我的 xml 文件中声明其他任何内容吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T09:03:11.633

在您的 config.xml 文件中进行此更改

```
<html_topmenu>Custom_Menu_Block_Html_Topmenu</html_topmenu> 
```

并将您的班级名称更改为

```
class Custom_Menu_Block_Html_Topmenu extends Mage_Page_Block_Html_Topmenu
{

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:04:53.763

一件事浮现在脑海。您可能将类文件放在错误的位置。您的重写代码看起来是正确的，因此当 Magento 实例化一个`page/html_topmenu`块时，它会正确地将其解析为您的`Custom_Menu_Block_Page_Html_Topmenu`类名。但是，Magento 可能无法找到该类`Custom_Menu_Block_Page_Html_Topmenu`。尝试运行代码

```
$block = new Custom_Menu_Block_Page_Html_Topmenu;
var_dump($block); 
```

从一个空的控制器和/或引导文件中确保 Magento 可以找到你的类。跑步也无妨

```
$block = Mage::getSingleton('core/layout')->createBlock('page/html_topmenu');
var_dump($block); 
```

确保您的重写正在做它需要做的事情。

# php - AJAX 发布后更新 DIV 内容

> ID：12492296
> 
> 赞同：-4
> 
> 时间：2012-09-19T09:48:40.523
> 
> 标签：php, jquery, ajax

我们有一个 div 结构如下：

```
<!-- main.php starts -->
    <div class="main">
      <div class="one">
         <span class="buttonEdit">EDIT</span>
      </div>
      <div class="two">Content</div>
      <div class="editBox">
       <!-- abc.php which is loaded onClick -->
        <textarea class="editArea"></textarea>
        <span class="buttonSave">SAVE</span>
       <!--abc.php ends -->
      </div>
    </div>
<!-- main.php ends --> 
```

我使用的 jQuery 是这样的：

```
$(document).ready(function() { 
        //SAVE BUTTON
        $(".buttonSave").click(function(){
            //AJAX SAVE HERE
            $.post("save.php",function(msg){
                var newContent;
                newContent = $(".editArea").val();

                $(this).parents(".main").find('.two').text(newContent);
             });
        }); 
```

**过程：** 单击 EDIT 按钮后，外部页面 ( *abc.php* ) 将通过 jQuery 的加载函数加载到 div( *class="editBox" )。*编辑和保存后，来自 textarea 的内容必须显示在 div( *class="two"* ) 中。

**重要事项**有几个相似的块并且类名相同。jQuery 是用外部文件*abc.php编写的。*是否可以在 AJAX 中使用“查找”和“此”？

**需要的解决方案：我们需要 jQuery 部分。紧迫的！**

关于 jsFiddle：http: [//jsfiddle.net/JerryJones/PacTs/](http://jsfiddle.net/JerryJones/PacTs/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T09:51:43.370

尝试这个

```
$.post('ajax.php',function(data){

   // write your retrived data here 
   $(".editArea").html(data retrived);
  //or
    $(".editArea").val(data retrived);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:53:32.950

如果您为内容所在的部分提供唯一 ID，那会容易得多。

然后，您可以在按钮上使用 onClick() 来调用 JavaScript 函数：

```
function onEdit() {
    $("#EditBoxID".load('abc.php');
}

function onSave() {
    $("#ContentID").val($("#EditBoxID").val());
} 
```

# javascript - 一个用于多个位置的 JavaScript 代码文件

> ID：12492298
> 
> 赞同：0
> 
> 时间：2012-09-19T09:48:42.980
> 
> 标签：javascript, eclipse, jakarta-ee, dry, redundancy

我们正在开发多个 Java EE 应用程序（目前为 8 个），它们都基于相同类型的代码。但是，在 Eclipse 中，所有应用程序都被明确地划分为不同的项目，它们在 Windows Explorer 上都有自己的文件夹，并且在 Git 服务器上都有自己的 repo。

这个想法是将冗余代码放在某个地方（另一个名为“core”的项目），并自动在每个应用程序上使用它，而无需重新编码相同的东西 8 次。对于 Java 部分，我们在每个项目中都做了一个“链接源”，它在 Eclipse 中创建了一个到“核心”项目的符号链接，并在 Java 源中使用指定的“核心”包没有问题。

但它对 JavaScript/CSS 部分的效果并不好。我完全不知道如何将多余的 JS/CSS 编码到“核心”项目中，并在其他地方使用它，而不必每次修改它时都手动复制它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:38:25.467

我认为你应该研究 git 来解决你的问题。毕竟，您仍然希望将 js 文件包含在每个项目中，但要在单独的项目中维护（据我了解）。应该有某种子模块和/或提交句柄或任何使用 git 来解决这个问题的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:29:01.810

这就是项目的 JavaScript 包含路径属性中的用户库功能的用途。

# google-maps - KML 层中的标记信息不稳定

> ID：12492310
> 
> 赞同：1
> 
> 时间：2012-09-19T09:49:04.957
> 
> 标签：google-maps, google-maps-api-3, kml, google-maps-markers

我正在使用 Google Maps API v3 将 KML 文件加载到地图中。KML 加载正常，并且可以看到标记。但是标记信息（单击标记时弹出）永远不会以一致的方式显示。有些工作有时，有些则没有。这真的很奇特。要查看该页面，请检查 -

[http://www.sobitabraham.com/teawap/NEW_kml.html](http://www.sobitabraham.com/teawap/NEW_kml.html)

KML 文件在这里-

[https://sites.google.com/site/teawapdata/home/kml-files/TEAWAP.kml](https://sites.google.com/site/teawapdata/home/kml-files/TEAWAP.kml)

KML 文件大小为 990 KB，因此不是文件大小上限问题。我不确定它可能与 KML 的缓存有关。KML 文件是从 Google 地球导出的。

令人沮丧的是，这种标记行为不稳定，错误不一致。即使我将 KML 文件的 URL 粘贴到 maps.google.com 中，也会出现此问题。任何帮助解决这个问题将不胜感激。

谢谢。

# php - 将 MySQL 结果保存到数组并合并

> ID：12492313
> 
> 赞同：1
> 
> 时间：2012-09-19T09:49:12.577
> 
> 标签：php

我有这段代码允许我将mysql结果保存（我猜是这样）到一个数组中，然后我得到两个数组，我需要将它们合并为一个！

问题显然是它不会以正确的方式合并，它会合并但不是所有的值..

我在这里做错了什么？谢谢！

```
<?php 
$date1=mysql_query("SELECT date FROM date WHERE att_id='$att_id'");
$date2=mysql_query("SELECT date FROM date_pdv WHERE att_id='$att_id'");
while ($row = mysql_fetch_array($date1, MYSQL_ASSOC)) {
    printf("Data: %s", $row["date"]);
    $firstdate=$row['date'];
}
while ($row = mysql_fetch_array($date2, MYSQL_ASSOC)) {
    printf(" Data1: %s", $row["date"]);
    $seconddate=$row['date'];
}
$result = array_merge((array)$firstdate, (array)$seconddate);
print_r($result);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:53:45.310

```
$firstdate[]=$row['date'];
$seconddate[]=$row['date']; 
```

您的 firstdate 和 seconddate 不是放在相应位置的上述行的数组，您将获得解决方案...并停止使用 mysql 函数使用 pdo

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:54:04.920

你为什么不使用一个查询呢？

```
(SELECT date 
FROM date
WHERE att_id='$att_id')
UNION 
(SELECT date
FROM date_pdv
WHERE att_id='$att_id') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T09:54:23.283

如果你有 2 个数组，你想合并 2 个数组。但是，你没有2个字符串..

所以

```
$result = array();
array_push($result, $row['date'];

var_dump( $result ); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-19T09:53:26.617

类型转换不会将字符串转换为数组，您实际上必须传递（并构建）数组：

```
$date1=mysql_query("SELECT date FROM date WHERE att_id='$att_id'");
$date2=mysql_query("SELECT date FROM date_pdv WHERE att_id='$att_id'");
while ($row = mysql_fetch_array($date1, MYSQL_ASSOC)) {
    printf("Data: %s", $row["date"]);
    $firstdate[] =$row['date'];
}
while ($row = mysql_fetch_array($date2, MYSQL_ASSOC)) {
    printf(" Data1: %s", $row["date"]);
    $seconddate[] =$row['date'];
}
$result = array_merge($firstdate, $seconddate);
print_r($result); 
```

# java - java中数据库异常处理的更好方法

> ID：12492315
> 
> 赞同：3
> 
> 时间：2012-09-19T09:49:26.793
> 
> 标签：java, database, jdbc

哪一个会更好：错误代码或异常情况？

我曾经见过这两种错误处理技术。我不知道每种技术的优缺点。

```
public void doOperation(Data data) throws MyException {
    try {
        // do DB operation
    } catch (SQLException e) {
        /* It can be ChildRecordFoundException, ParentRecordNotFoundException
         * NullValueFoundException, DuplicateException, etc..
         */
        throw translateException(e);
    }
} 
```

或者

```
public void doOperation(Data data) throws MyException {
    try {
        // do DB operation
    } catch (SQLException e) {
        /* It can be "CHILD_RECORD_FOUND, "PARENT_RECORD_NOT_FOUND"
         * "NULL_VALUE_FOUND", "DUPLICATE_VALUE_FOUND", etc..
         */
        String errorCode = getErrorCode(e);
        MyException exc = new MyException();
        exc.setErrorCode(errorCode);
        throw exc;
    }
} 
```

对于第二种方法，错误代码检索表单配置文件。我们可以`Error Code`根据`SQL Vender Code`.

SQL_ERROR_CODE.properties

```
#MySQL Database
1062=DUPLICATE_KEY_FOUND
1216=CHILD_RECORD_FOUND
1217=PARENT_RECORD_NOT_FOUND
1048=NULL_VALUE_FOUND
1205=RECORD_HAS_BEEN_LOCKED 
```

方法 1 的调用方客户端

```
 try {

    } catch(MyException e) {
        if(e instanceof ChildRecordFoundException) {
            showMessage(...);
        } else if(e instanceof ParentRecordNotFoundException) {
            showMessage(...);
        } else if(e instanceof NullValueFoundException) {
            showMessage(...);
        } else if(e instanceof DuplicateException) {
            showMessage(...);
        }
    } 
```

方法 2 的调用方客户端

```
 try {

    } catch(MyException e) {
        if(e.getErrorCode().equals("CHILD_RECORD_FOUND")) {
            showMessage(...);
        } else if(e.getErrorCode().equals("PARENT_RECORD_NOT_FOUND") {
            showMessage(...);
        } else if(e.getErrorCode().equals("NULL_VALUE_FOUND") {
            showMessage(...);
        } else if(e.getErrorCode().equals("DUPLICATE_VALUE_FOUND") {
            showMessage(...);
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T09:58:24.980

我推荐使用 Spring 的`JDBCTemplate`. 它将大多数现有数据库的异常转换为特定的未经检查的异常，例如`DataIntegrityViolationException`. 它还将在消息中包含原始 SQL 错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T10:14:40.043

奇怪的问题，因为这两种方法都做同样的事情：它们将已检查的 SqlException 转换为似乎未检查的不同异常。所以第一个是更好的，因为它把它变成了一个单一的方法。

两者都留下了一些问题：

*   是否有一些基础设施可以进行这种转换（另一个答案中提到了 Spring 模板）

*   你真的想要检查异常吗，在我看来，它们几乎不值得麻烦。

*   谁在对异常进行真正的处理，它是否获得了所有需要的信息？我通常会期望一些有关在 MyException 中失败的事务的其他信息，例如：我们尝试做什么？（例如更新一个业务对象）；在什么样的物体上？（例如一个人）；我们/用户如何识别对象（例如 person.id + person.lastname + person.firstname）。如果您想生成日志/错误消息来告诉您或您的用户不仅仅是“糟糕，出了点问题”，您将需要此类信息

*   为什么 MyException 是可变的（至少在第二个示例中）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T09:56:15.940

比任何一个更好的设计是通过扩展来使您的自定义异常不受检查`RuntimeException`。

我希望您的异常包含第一个异常，因此以这种方式编码也会更好：

```
MyException exception = new MyException(e); // wrap it. 
```

如果你这样做，第二个是首选。更多信息更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T10:04:06.227

恕我直言，这取决于您的代码与 SQL 耦合的紧密程度。

如果方法是**始终**（* 1）与 SQL 结合，我只需声明并重新抛出`SQLException`（在清理/关闭资源之后）。然后，SQL 感知的上层方法将按照他们认为合适的方式处理它（也许他们需要所有细节，也许他们不需要）。

如果将来某个时候您可以更改另一个不使用 SQL 的方法，那么我会选择第二个选项。

(1)：对这个假设要格外悲观：“我认为我们不会改变”应该被解释为“我们可能会想要改变”。“我们不会改变”的意思是“无论如何，如果不打破许多其他方法，我们就无法改变”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T10:15:31.737

一种不同的方式是您将`catch`例外的方式。在第一种情况下，您可以只`catch`处理异常并且您知道错误是什么。在第二种情况下，您必须`catch`检查异常并检查代码以查看错误是什么。

# jquery - 在 jquery 中缩短源解析 xml

> ID：12492320
> 
> 赞同：0
> 
> 时间：2012-09-19T09:49:47.097
> 
> 标签：jquery, xml, parsing

这是我从xml解析出来的，但是太长了。有谁知道如何使它更短？“charList()”的数字和“if”的结构发生了变化。

`var charList1; var charList2; var charList3;` `var charList4; var charList5;`

```
$.ajax({
    type: "get",
    url: "XMLFile1.xml",
    async: false,
    dataType: "xml",
    success: function (xml) {
        $(xml).find('list').each(function () {

            obj = $(this).find("title");

            if (obj.text() == "1") {
                charList1 = (obj.next().text());
            } else if (obj.text() == "2") {
                charList2 = (obj.next().text());
            } else if (obj.text() == "3") {
                charList2 = (obj.next().text());
            } else if (obj.text() == "4") {
                charList2 = (obj.next().text());
            } else if (obj.text() == "5") {
                charList2 = (obj.next().text());                
            }
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:16:44.690

看起来您需要重新考虑您的数据结构（使用名称上带有数字后缀的并行标量或数组变量几乎肯定表明您确实应该使用像数组或对象这样的聚合结构）。副手，听起来你真的想要一个由 ; 的（数字）值索引的数组`obj.text()`。就像是

```
var charList=[];
$(xml).find('list').each(function () {
  obj = $(this).find("title");
  if (obj>= "1" && obj <= "5") { // use your own sanity check
    charlist[parseInt(obj, 10)] = obj.next().text();
  }
} 
```

但是请注意，使 AJAX 调用同步很少是一个好主意（它会完全锁定浏览器，直到它完成，并且当您与另一个系统交谈时，您无法保证它*会*完成）。如果你让它异步（这就是 AJAX 中第一个 A 的含义），你需要将 的累积值传递`charlist`给回调，因为当你“失败”你的 AJAX 调用时它将不可用。

# java - 如何检查硬件键盘是否可用？（黑莓）

> ID：12492324
> 
> 赞同：2
> 
> 时间：2012-09-19T09:49:56.250
> 
> 标签：java, blackberry, hardware

有什么方法可以检测黑莓中是否有硬件键盘？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T09:51:49.067

您绝对应该使用 BlackBerry OS 6 中引入的类[DeviceCapability](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/system/capability/DeviceCapability.html)来确定键盘是否可用。

> “DeviceCapability 提供了一种查询主机设备功能的方法。您可以使用该类以三种方式确定功能：确定某个功能是否受支持、允许或可用。”

# c# - 使用 ListView 读取二进制文件

> ID：12492325
> 
> 赞同：1
> 
> 时间：2012-09-19T09:50:13.037
> 
> 标签：c#, .net, file, listview, binary

我制作了这个包含列表视图的 exe，因此当我打开二进制文件时，它会在一列中显示文本指针，在另一列中显示文本字符串。

我设法使用“for循环”显示指针，但我不知道如何使用循环显示文本字符串，所以我想使用的是循环指针，显示它指向的文本到，并在每个文本之后停止在 00 00。

[这](http://www.mediafire.com/?mr79ecpomq77w8z)是二进制文件结构的示例。

二进制文件的前 4 个字节是指针/字符串量，接下来的 4 个字节 * 第 1 个 4 个字节是指针，其余的是文本字符串，每个字符串由 00 00 分隔，都是 Unicode。

那么任何人都可以帮助我如何在字符串列中显示每个指针的字符串吗？

编辑：这是打开二进制文件的按钮的代码：

```
 private void menuItem8_Click(object sender, EventArgs e)
    {
        textBox1.Text = "";
        OpenFileDialog ofd = new OpenFileDialog();
        ofd.Title = "Open File";
        ofd.Filter = "Data Files (*.dat)|*.dat|All Files (*.*)|*.*";
        if (ofd.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            MessageBox.Show("File opened Succesfully!", "Info", MessageBoxButtons.OK, MessageBoxIcon.Information);
            path = ofd.FileName;
            BinaryReader br = new BinaryReader(File.OpenRead(path));               
            int num_pointers = br.ReadInt32();
            textBox1.Text = num_pointers.ToString();
            for (int i = 0; i < num_pointers; i++)
            {
                br.BaseStream.Position = i * 4 + 4;
                listView1.Items.Add(br.ReadUInt32().ToString("X"));
            }
            br.Close();
            br = null;
        }
        ofd.Dispose();
        ofd = null;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:14:47.400

首先，在实例化 BinaryReader 时提供编码，如下所示：

```
BinaryReader br = new BinaryReader(File.OpenRead(path), Encoding.Unicode); 
```

接下来，您要保留读取偏移量的列表。（您仍然可以稍后将它们添加到 ListView）：

```
List<int> offsets = new List<int>();
for (int i = 0; i < num_pointers; i++)
{
    // Note: There is no need to set the position in the stream as
    // the Read method will advance the stream to the next position
    // automatically.
    // br.BaseStream.Position = i * 4 + 4;
    offsets.Add(br.ReadInt32());
} 
```

最后，您浏览偏移列表并从文件中读取字符串。您可能希望将它们放入一些数据结构中，以便稍后您可以使用数据填充视图：

```
Dictionary<int,string> values = new Dictionary<int,string>();
for (int i = 0; i < offsets.Count; i++)
{
    int currentOffset = offsets[i];

    // If it is the last offset we just read until the end of the stream
    int nextOffset = (i + 1) < offsets.Count ? offsets[i + 1] : (int)br.BaseStream.Length;

    // Note: Under the supplied encoding, a character will take 2 bytes.
    // Therefore we will need to divide the delta (in bytes) by 2.
    int stringLength = (nextOffset - currentOffset - 1) / 2;

    br.BaseStream.Position = currentOffset;

    var chars = br.ReadChars(stringLength);
    values.Add(currentOffset, new String(chars));
}

// Now populate the view with the data...
foreach(int offset in offsets)
{
    listView1.Items.Add(offset.ToString("X")).SubItems.Add(values[offset]);
} 
```

# mysql - MySQL 计算字段中的整数

> ID：12492327
> 
> 赞同：0
> 
> 时间：2012-09-19T09:50:17.940
> 
> 标签：mysql

我正在尝试查询 MySQL 数据库。以整数形式存储在数据库中的字段以整数形式返回，正如我所期望的那样。当在存储过程中计算出一个值时，它总是以 longlong 形式返回，即使我可以保证该数字是 0 或 1。

我需要一种方法来确保计算字段的结果仍以 int 形式返回。

有趣的是，在视图中进行计算，然后查询该视图似乎可以解决问题，但它会对性能造成巨大影响。

**编辑**

我尝试使用的各种程序的一个示例是：

```
DELIMITER //
    CREATE PROCEDURE getProjectFinance(IN projectID varchar(30)) 
    BEGIN 
            SELECT  p.projectID as id,
                (Select sum(COALESCE(v.Cost, 0))
                    from variations v
                    where v.projectID = p.projectID) as total
            FROM Projects p
            WHERE p.projectID  = projectID;
    END//
DELIMITER ;

DELIMITER //
    CREATE PROCEDURE getAllProjectsFinance() 
    BEGIN 
            SELECT  p.projectID as id,
                (Select sum(COALESCE(v.Cost, 0))
                    from variations v
                    where v.projectID = p.projectID) as total
            FROM Projects p
    END//
DELIMITER ; 
```

**编辑 2**

我试图稍微简化这个问题。下面的 SQL 命令返回一个带有单个字段（计数）的记录，该字段的类型为 longlong（8 个字节）。我希望它是整数类型（4 个字节）

```
SELECT (Select 1) as count; 
```

如下使用 cast 也无济于事：

```
SELECT cast((Select 1) as signed integer) as count; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:06:18.973

如果您只是转换计算值怎么办？

```
cast((
    Select sum(COALESCE(v.Cost, 0))
    from variations v
    where v.projectID = p.projectID
    ) 
    as integer
) as total 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:03:21.863

`CREATE FUNCTION name(parameter paramType, .... ) RETURNS returnType`而不是`create procedure ...`你还应该在函数体的末尾使用 return 子句。有关更多信息，请查看[文档](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html)中的常见部分和特定功能部分。

# android - 计算两个日期之间经过的时间，在不同的设备上给出不同的结果

> ID：12492328
> 
> 赞同：1
> 
> 时间：2012-09-19T09:50:21.637
> 
> 标签：android, time, calendar

我试图获取从特定日期经过的时间（以毫秒为单位）

在某些设备中我得到正确的结果，但是在其他设备中我得到错误的结果

这是我使用的代码：

```
public static void timeElapsedFromDate(long workingDate) 
{
    long diff = System.currentTimeMillis() - workingDate;

    long diffSeconds = diff / 1000;
    long diffMinutes = diffSeconds / 60;
    long diffHours = diffMinutes / 60;
    long diffDays = diffHours / 24;
    long diffWeeks = diffDays / 7;
    long diffMonth = diffDays / 30;
} 
```

这不是测量时间的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T10:03:37.880

首先，`diffMonth`公式要求改进：从2月1日到3月1日通常是28天，但是一个月。从 9 月 1 日到 9 月 31 日是 30 天，但不到 1 个月。

关于 diffDays 的更微妙的问题：不是晚上 10 点到第二天早上 10 点之间的 1 天吗？

最后，不同的设备如何给出不同的结果：[System.currenTTimeMillis()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html#currentTimeMillis%28%29)返回*当前时间与 UTC 1970 年 1 月 1 日午夜之间的差异，以毫秒为单位。*即使所有设备上的时钟都是正确的，它们也可能具有不同的时区设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:58:29.100

```
public int getElapsedTimeInDays(Date start,Date end){
    int days=(int)(start.getTime()-end.getTime())/(1000*60*60*24);
    return days;
}
public int getElapsedTimeInHours(Date start,Date end){
    int hours=(int)(start.getTime()-end.getTime())/(1000*60*60);
    return hours;
}
public int getElapsedTimeInMinutes(Date start,Date end){
    int minutes=(int)(start.getTime()-end.getTime())/(1000*60);
    return minutes;
}
public int getElapsedTimeInSecunds(Date start,Date end){
    int scunds=(int)(start.getTime()-end.getTime())/(1000);
    return secunds;
}

//Then you can use the codes like this:
SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd, hh:mm");
Date start = df.parse("2012-01-12, 09:35");
Date end = new Date();//this will be the curent date;

int day = getElapsedTimeInDays(start,end); 
```

# java - 使用 Apache Commons FTPSClient 的“数据通道需要 550 SSL/TLS”

> ID：12492330
> 
> 赞同：9
> 
> 时间：2012-09-19T09:50:27.670
> 
> 标签：java, ssl, ftp-client

我在需要对数据通道进行加密的 FTP 服务器（ProFTPD 1.3.3a）上使用 FTPClient 读取数据时遇到问题。一切正常，无需在其他服务器上加密。

我的代码是：

```
FTPSClient ftpsClient = new FTPSClient("TLS", false);
log.debug("using TLS");
FTPClientConfig ftpClientConfig = new FTPClientConfig(FTPClientConfig.SYST_UNIX);
ftpClientConfig.setServerLanguageCode("de");
ftpsClient.configure(ftpClientConfig);
ftpsClient.addProtocolCommandListener(new PrintCommandListener(new PrintWriter(System.out))); // outputs all conversation to the console
ftpsClient.connect(host, 21);
ftpsClient.login(username, password);
ftpsClient.enterLocalPassiveMode();
ftpsClient.changeWorkingDirectory(pathname);
listNames = ftp.mlistDir();
ftpsClient.logout(); 
```

我从输出中得到的是

```
220 ProFTPD 1.3.3a Server (xxx) [xxx]
AUTH TLS
234 AUTH TLS successful
USER xxx
331 Password required for xxx
PASS xxx
230 User xxx logged in
CWD /www/catalog
250 CWD command successful
PASV
227 Entering Passive Mode (xxx).
MLSD
550 SSL/TLS required on the data channel
QUIT
221 Goodbye. 
```

知道如何配置 FTPSClient 以在数据通道上使用 TLS/SSL 吗？您的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-24T15:37:06.610

在执行将通过数据通道传输数据的任何命令（例如 LIST）之前，您必须启用数据通道加密。

连接到服务器后将其添加到您的代码中：

```
// Set protection buffer size
ftpClient.execPBSZ(0);
// Set data channel protection to private
ftpClient.execPROT("P"); 
```

至少，这解决了我的问题（使用proftpd）。

# qt - QUdpSocket 心跳行为

> ID：12492334
> 
> 赞同：1
> 
> 时间：2012-09-19T09:50:34.340
> 
> 标签：qt, qudpsocket

我需要每秒通过 Upd 套接字发送我的 Qt 应用程序的状态。我怎样才能做到这一点？我应该使用 QThread::sleep 子类 QThread e 还是有最好的方法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:54:19.733

最后我使用了不同的方法：

一个`QTimer`：

```
QTimer iAmAliveTimer.setInterval(1500);
iAmAliveTimer.setSingleShot(true);
connect(&iAmAliveTimer, SIGNAL(timeout()), this, SLOT(sendIamAlive()), Qt::UniqueConnection);
iAmAliveTimer.start(); 
```

当`SLOT`被调用时，我通过我的套接字发送我需要的东西。

# python - 如何编写自己的地图生成器？

> ID：12492337
> 
> 赞同：0
> 
> 时间：2012-09-19T09:50:39.963
> 
> 标签：python

我想为自己写一个简单的地图生成器，我不知道怎么咬。字段将不得不抽签六角形。

当我生成随机图块时，我必须注意邻居。那我还要考虑已经有两个邻居等等递归？我确定田地可能是水、土、山——但在一个田地中可能是从水到陆地的过渡，其中一侧。

一个数组将包含一个指定图块类型的数字。我想用 python 来做 - 学习。

请给点建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:18:26.330

很多很多年前，我实现了一些 hexmap 例程。我不记得确切的细节，但我使用了一个坐标系，使得每一行都与下一行偏移 1。

像这样：

```
00  01  02  03  04  05  06  07
  10  11  12  13  14  15  16  17
20  21  22  23  24  25  26  27
  30  31  32  33  34  35  36  37 
```

因此，您可以通过将这些偏移量应用于十六进制自己的坐标（从上面的十六进制开始，向左，顺时针方向）来找到一个十六进制邻居的坐标：

```
-1,-1  -1,0  0,1  1,0  1,-1  0,-1 
```

所以 hex 24 的邻居是：13, 14, 25, 34, 33, 24

当然，您必须注意地图边缘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:16:05.277

可能不需要使用递归。由于您将此作为学习练习，因此我只会为您提供如何进步的大纲。

六边形网格需要一个坐标系，用于行和列。

创建一个函数`neighbours`，给定一个图块的坐标 x,y，返回该图块的所有邻居。

使用您的坐标系循环遍历所有图块。对于每个图块，检索其邻居。如果邻居没有类型可以忽略它，否则，根据其邻居的字符确定图块的字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T10:16:19.723

我认为最重要的是在地图上标出你的六边形，以便于检查邻居......

一个明智的选择是使用二维元组，这样六边形 (1,1) 的 6 个邻居是 (1,0),(2,0),(2,2),(1,2),(0 ,2) 和 (1,1) - 从北/上开始顺时针方向。

要填充地图，您可以迭代所有方块，从一组允许的图块中随机选择一个（基于它的当前邻居）。

# python - Python中的子进程

> ID：12492367
> 
> 赞同：0
> 
> 时间：2012-09-19T09:52:53.860
> 
> 标签：python, subprocess

我希望作业命令的输出在 shell 中作为 python 中的字符串运行。

我有这个代码

```
import subprocess
p1 = subprocess.Popen(['jobs'], shell=True, stdout=subprocess.PIPE)
print  p1.communicate() 
```

但这似乎不起作用。我得到的输出是 -

```
('', None) 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:00:54.663

您可以使用[`subprocess.check_output`](http://docs.python.org/library/subprocess.html#subprocess.check_output)：

```
In [5]: import subprocess

In [6]: output = subprocess.check_output("ps")

In [7]: print output
  PID TTY          TIME CMD
 2314 pts/2    00:00:06 bash
 4084 pts/2    00:00:03 mpdas
 7315 pts/2    00:00:02 python
 7399 pts/2    00:00:00 ps

In [8]: 
```

**你的代码对我来说很好。**

```
In [11]: import subprocess

In [12]: p1 = subprocess.Popen(['ps'], stdout=subprocess.PIPE)

In [13]: print  p1.communicate()[0]
  PID TTY          TIME CMD
 2314 pts/2    00:00:06 bash
 4084 pts/2    00:00:03 mpdas
 7315 pts/2    00:00:02 python
 7682 pts/2    00:00:00 ps

In [14]: 
```

# mysql - MySQL - 两列的组合约束

> ID：12492378
> 
> 赞同：2
> 
> 时间：2012-09-19T09:53:34.033
> 
> 标签：mysql, sql, unique

这不是对两列的典型约束。

这是一个带有外键 ref1、ref2 的表：

```
connection_id | ref1_id  | ref2_id
1             |     1    |    2 
```

我想允许：

```
connection_id | ref1_id  | ref2_id
1             |     1    |    2
2             |     1    |    3 
```

但不允许这两个：

```
(typical unique key on ref1,ref2 - this I know how to do)
connection_id | ref1_id  | ref2_id
1             |     1    |    2
2             |     1    |    2 
```

但是也！！：

```
(this is the problem)
connection_id | ref1_id  | ref2_id
1             |     1    |    2
2             |     2    |    1 
```

因为我只想要一个 ref1-ref2 对 - 对我来说，这对 (ref1,ref2) 或 (1,2) 与 (2,1) 相同，并且应该被唯一键约束禁止。有没有办法在 MySQL 中做到这一点？

我确信它已经得到了回答，但是在搜索时，我总是在两列上遇到典型的唯一约束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:08:08.933

您需要在`INSERT`/`UPDATE`查询中使用规范的数据顺序（例如 ref1_id 始终小于 ref2_id）或使用`ON BEFORE INSERT`/`UPDATE`触发器自定义检查重复项。

仅使用约束无法解决此任务。

编辑：没有办法用触发器中止`INSERT`或`UPDATE`声明，所以整个解决方案更糟:-)

```
DELIMITER ###

CREATE TRIGGER `after_up` 
  AFTER UPDATE ON `my_table`
FOR EACH ROW 
BEGIN
  DECLARE collision INT DEFAULT 0;
  SELECT 1  
    INTO collision
    FROM my_table 
    WHERE ref1_id = NEW.ref2_id AND ref2_id = NEW.ref1_id;
  IF collision
  THEN -- reverting update
    UPDATE my_table SET ref2_id = OLD.ref2_id, ref1_id = OLD.ref1_id WHERE connection_id = OLD.connection_id;
  END IF;
END

###

CREATE TRIGGER `after_in` 
  AFTER INSERT ON `my_table`
FOR EACH ROW 
BEGIN
  DECLARE collision INT DEFAULT 0;
  SELECT 1  
    INTO collision
    FROM my_table 
    WHERE ref1_id = NEW.ref2_id AND ref2_id = NEW.ref1_id;
  IF collision
  THEN -- deleting new row
    DELETE FROM my_table WHERE connection_id = NEW.connection_id;
  END IF;
END

###

delimiter ; 
```

编辑 2：刚刚发现在触发器 ( `DROP TABLE nonexistent_table_name`)中中止查询的黑客攻击

```
DELIMITER ###

CREATE TRIGGER `before_up` 
  BEFORE UPDATE ON `my_table`
FOR EACH ROW 
BEGIN
  DECLARE collision INT DEFAULT 0;
  SELECT 1  
    INTO collision
    FROM my_table 
    WHERE ref1_id = NEW.ref2_id AND ref2_id = NEW.ref1_id;
  IF collision
  THEN -- throwing error
     DROP TABLE __error_duplicate_detected;        
  END IF;
END

###

CREATE TRIGGER `before_in` 
  BEFORE INSERT ON `my_table`
FOR EACH ROW 
BEGIN
  DECLARE collision INT DEFAULT 0;
  SELECT 1  
    INTO collision
    FROM my_table 
    WHERE ref1_id = NEW.ref2_id AND ref2_id = NEW.ref1_id;
  IF collision
  THEN -- throwing error
     DROP TABLE __error_duplicate_detected;        
  END IF;
END

###

delimiter ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T11:01:39.977

```
DROP TABLE pair CASCADE;
CREATE TABLE pair
      ( pair_id SERIAL NOT NULL PRIMARY KEY
      , aaa INTEGER NOT NULL
      , bbb INTEGER NOT NULL
      , CONSTRAINT aaa_bbb UNIQUE (aaa, bbb)
    );

CREATE UNIQUE INDEX aaaXXXbbb ON pair ( LEAST(aaa, bbb), GREATEST(aaa, bbb) )
        ;
INSERT INTO pair(aaa,bbb) VALUES(1,1), (1,2),(2,2);

INSERT INTO pair(aaa,bbb) VALUES(2,1);

SELECT * FROM pair; 
```

结果：

```
INSERT 0 3
ERROR:  duplicate key value violates unique constraint "aaaxxxbbb"
DETAIL:  Key ((LEAST(aaa, bbb)), (GREATEST(aaa, bbb)))=(1, 2) already exists.
 pair_id | aaa | bbb 
---------+-----+-----
       1 |   1 |   1
       2 |   1 |   2
       3 |   2 |   2
(3 rows) 
```

我不知道 mysql 是否允许并强制执行表达式的约束或索引。Postgres 确实允许对表达式进行索引，但不幸的是对表达式没有限制。如果索引不可能，那么明显的打破平局的约束当然是`aaa >= bbb`，就像在@vearutob 的回答中一样。

顺便说一句：在这个模型中，对 (aaa,bbb) 的约束是多余的，因为条件已经被索引覆盖了。（我想让它们交换：{least,greatest} 上的约束和裸列上的索引，但 postgres 似乎还不允许这样做）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T15:00:07.263

变体 1：考虑到 ref1_id 和 ref2_id 的数据类型在整数数据类型的限制范围内，并且存在可以适合`sizeof ref1_id + sizeof ref2_id`mysql 的整数数据类型。

将一个新的计算列添加到您的表中，其类型可以适合它并 `min(ref1_id, ref2_id) << (size_in_bits_of_the_biggest_of_the_types_of_ref1_id_and_ref2_id) + max(ref1_id, ref2_id)`在插入或更新之前在触发器内计算它 - 这样整个行将由于违反唯一约束而被拒绝。

变体 2：如果变体 1 不适用，请使用此选项，因为它会更慢。

将一个新的计算列添加到您的表中，作为 varchar 足够长以适合文本表示`concat(max(ref1_id), ' ', max(ref2_id))`- 假代码，在此处使用最大可能值并 `CONCAT(min(ref1_id, ref2_id), ' ', max(ref1_id, ref2_id))`在插入或更新之前在触发器内计算它 - 这样整行将因唯一而被拒绝违反约束。

# erlang - 关于集成 lager/rebar/common_test

> ID：12492383
> 
> 赞同：1
> 
> 时间：2012-09-19T09:53:46.933
> 
> 标签：erlang, rebar

我在我的 Erlang 项目中使用 rebar 做 UT。

在介绍 lager 之前，一切正常，我可以运行 common_test，如下所示：

1) 运行所有测试套件

```
E:\>.\rebar ct 
```

2）运行指定的测试套件

```
E:\>.\rebar ct suites=client_app 
```

但是在引入 lager 之后，我只能将所有测试套件作为一个整体运行：

1)

```
E:\>.\rebar ct
==> lager (ct)
DONE.
Testing deps.lager: TEST COMPLETE, 0 ok, 0 failed of 0 test cases 
```

如果我只指定一个测试套件，它将失败：

2)

```
E:\>.\rebar ct suites=client_app
==> lager (ct)
ERROR: Suite client_app not found 
```

有什么解决办法吗？谢谢！

以下是我的 rebar.config：

```
%% -*- erlang -*-

{cover_enabled, true}.

{test_deps, false}.

{show_cmd, true}.

{test_node_name, "localhost@127.0.0.1"}.

{clean_files, ["logs"]}.

{erl_opts, [debug_info,{d,'TEST'}, {i, "include"}, {src_dirs, ["src"]}, {parse_transform, lager_transform}]}.

{deps_dirs, ["deps"]}.
{deps, [{lager, "0.9.4", {git, "http://github.com/basho/lager.git", {tag, "0.9.4"}}}]}.
{sub_dirs, ["rel"]}.                          
{edoc_opts,[{packages,false},{subpackages,false}]}. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T13:11:14.473

尝试使用以下命令运行钢筋`skip_deps=true`：

```
./rebar ct skip_deps=true suites=client_app 
```

这应该使钢筋不会下降到更大，因此它不会寻找`client_app`在该目录中调用的通用测试套件。

# .net - 加载窗口后加载 WPF 用户控件。如何初始化 UserControl 变量？

> ID：12492388
> 
> 赞同：0
> 
> 时间：2012-09-19T09:54:06.247
> 
> 标签：.net, wpf, wpf-controls

并感谢您的帮助。

我开发了这个用户控件：

![在此处输入图像描述](../Images/e55aef63b52e207151621b2b6fd807e2.png)

我想要的是放置其中许多并在应用程序启动时将它们与线连接起来，如下所示：

![在此处输入图像描述](../Images/1a600c99f0636570d9770aa7a8cf0bfd.png)

我需要 UserControl 初始化一些变量，所以我将这些变量放在 UserControl 的 Loaded 事件中，如下所示：

```
 public Bubble()
    {
        InitializeComponent();
    }

    private void BubbleInstance_Loaded(object sender, RoutedEventArgs e)
    {
        _canvas = VisualTreeHelper.GetParent(this) as Canvas;
        _connections = new ConnectionLines(_canvas);
    } 
```

而且，因为我希望在应用程序启动时连接这些控件，所以我将此代码放在 Window Loaded 事件中：

```
 public MainWindow()
    {
        InitializeComponent();
    }

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        bubble1.ConnectTo(bubble2);
        bubble1.ConnectTo(bubble3);
        bubble2.ConnectTo(bubble4);
    } 
```

但问题是：当应用程序启动时，我放在 UserControl Loaded 事件中的那些变量在调用 ConnectedTo 方法时没有被初始化。

这是我的问题：如何在 Window Loaded 事件发生之前初始化这些 UserControl 变量？

# asp-classic - 隐藏下载链接 ASP

> ID：12492389
> 
> 赞同：0
> 
> 时间：2012-09-19T09:54:08.510
> 
> 标签：asp-classic, download

我正在尝试从某些文件中隐藏下载链接。他们在 FTP 上。当我下载文件时，我可以回溯到服务器并抓取更多文件，但我想阻止这种情况。我已经搜索了一些解决方案，但我从来没有让它们工作。

我有一个单独的 download.ashx 文件，其中包含以下代码。我不是仅文件 download.zip 的示例

```
Response.Clear()
Response.ContentType = "application/x-zip-compressed"  
Response.AppendHeader("Content-Disposition", "attachment; filename=download.zip")
Response.WriteFile(ftp://server.de/files/scripts/files/)
Response.End() 
```

这是下载的超链接

```
<a href="download.ashx?download.zip" target=""_blank"">Click here to Download File</a> 
```

每次单击下载链接时，都会出现运行时错误：

```
Server Error in '/files/scripts/files' Application. 
```

我希望你有一些想法来解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:01:37.660

看看这个答案[ASP.NET Create zip file for download: thecompressed zipped folder is invalid or corrupted](https://stackoverflow.com/questions/2456842/asp-net-create-zip-file-for-download-the-compressed-zipped-folder-is-invalid-or)

如果您可以使下载代码正常工作，则可以通过生成（例如）指向下载的 asp 按钮而不是指向 FTP 的链接来隐藏文件位置。

# vim - 如何在 VIM 中使用 ctrlp 搜索书签

> ID：12492402
> 
> 赞同：1
> 
> 时间：2012-09-19T09:55:02.067
> 
> 标签：vim

使用命令 CtrlPBookmarkDirAdd 成功添加书签。但我找不到任何说明如何列出添加的书签，如 NERDTree。

有什么方法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:09:48.803

`:CtrlPBookmarkDir`离in*很近*。_`:CtrlPBookmarkDirAdd``:h ctrlp`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T18:02:59.870

尽管成功完成，但我遇到了`:CtrlPBookmarkDir<CR>`麻烦。`== NO ENTRIES ==``:CtrlPBookmarkDirAdd <Dir>`

就我而言，这是由关于`$HOME./.cache/ctrlp`. 它是由 root 所有者制作的。`sudo vim`也许，我第一次使用 CtrlP 插件。

我修复了目录所有者并再次注册书签，然后我得到了正确的输出。

# fabric - 如何让一些 Fabric 任务只在本地运行一次，而其他任务在所有主机上运行

> ID：12492405
> 
> 赞同：4
> 
> 时间：2012-09-19T09:55:22.780
> 
> 标签：fabric, continuous-delivery, autodeploy

在我的织物脚本中，我遇到了以下问题。我有一个名为自动部署的主要任务。在这个任务中，我有一些我只想在本地运行**一次的任务。**所有远程任务都应该在主机列表的每个主机上运行。

```
env.roledefs ={
  'testing': ['t-server-01', 't-server-02']  
  'staging': ['s-server-01', 's-server-02']  
  'live': ['l-server-01', 'l-server-02']  
}

def localtask1():
  # download artifact

def localtask2(): 
  # cleanup locally

def remotetask():
  # deploy artifact to all hosts

def autodeploy():
  localtask1() # run this task only once, locally  

  remotetask() # run this task on all hosts

  localtask2() # run this task only once 
```

调用如下。我想将角色作为属性传递。

```
fab -R test autodeploy 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T12:29:04.780

使用包装函数 autodeploy 中的 execute 函数，并为远程任务指定一个主机列表。

对于其他两个，您可以使用执行来调用它们，例如远程任务，或者直接调用它们。使用它们内部的本地功能，你会没事的，并且不需要在本地主机上安装 ssh。

文档在[这里](http://docs.fabfile.org/en/1.4.3/usage/execution.html#intelligently-executing-tasks-with-execute)了解如何最好地使用新的[执行功能](http://docs.fabfile.org/en/1.4.3/api/core/tasks.html#fabric.tasks.execute)。

**编辑**

由于您在评论中提到了一个不同的用例，我将根据已经给出的文档中的位来模拟您如何做到这一点，添加[参数传递部分](http://docs.fabfile.org/en/1.4.3/usage/fab.html#per-task-arguments)

代码：

```
#copy above

#redefine this one
def autodeploy(role_from_arg):
    localtask1()
    execute(remotetask, role=role_from_arg)
    localtask2()

#calls like fab autodeploy:testing 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-20T15:50:59.707

使用[runs_once](http://docs.fabfile.org/en/latest/api/core/decorators.html#fabric.decorators.runs_once)装饰器。

```
@runs_once
def localtask1():
    local('command') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-18T10:25:28.477

您可以通过将“localhost”指定为主机来滥用[`hosts`装饰器](http://docs.fabfile.org/en/latest/api/core/decorators.html#fabric.decorators.hosts "主机十二月")来强制单个任务仅运行一次。

例子：

```
@fabric.decorators.hosts("localhost")
def localtask1():
    # download artefact 
```

# java - 在 64 位操作系统窗口上链接 32 位本地语言 dll

> ID：12492413
> 
> 赞同：1
> 
> 时间：2012-09-19T09:55:51.057
> 
> 标签：java, dll, 32bit-64bit

我正在尝试在 64 位虚拟机 windows 7 上使用 java 程序来处理视频。该 java 程序使用 32 位 dll。根据[这篇文章](https://stackoverflow.com/questions/9757456/java-native-interface-32-bit-dll-on-64-bit-system)，我安装了一个 32 位 jvm，根据[这个](http://www.techsupportalert.com/content/how-windows7-vista64-support-32bit-applications.htm)，我将 dll 放在`C:\WINDOWS\SysWOW64`目录中。

我通过指定可执行文件的完整路径在命令提示符下运行`C:\Program Files (x86)\Java\jre7\bin\java.exe`程序。java程序运行正常，但是在使用dll提供的功能时，我收到错误消息`java.lang.UnsatisfiedLinkError`。

感谢您的任何建议

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:55:21.100

`UnsatisfiedLinkError`意味着Java找不到DLL。

确保包含 DLL 的目录位于`java.library.path`. `-D`您可以通过在启动程序时使用开关在命令行上将其指定为系统属性来设置此路径。例如：

```
java -Djava.library.path=C:\WINDOWS\SysWOW64 com.mypackage.MyMainClass 
```

# r - 如何按每个月的最后一天对数据框进行子集化

> ID：12492418
> 
> 赞同：3
> 
> 时间：2012-09-19T09:56:17.580
> 
> 标签：r, xts, zoo

我有一个 df ：

```
 dates  V1  V2  V3  V4  V5  V6  V7  V8  V9  V10
1999-05-31  66  65  64  63  62  61  60  59  58  57
1999-06-01  67  66  65  64  63  62  61  60  59  58
1999-06-02  68  67  66  65  64  63  62  61  60  59
1999-06-03  69  68  67  66  65  64  63  62  61  60
1999-06-04  70  69  68  67  66  65  64  63  62  61
1999-06-17  79  78  77  76  75  74  73  72  71  70
1999-06-18  80  79  78  77  76  75  74  73  72  71
1999-06-21  81  80  79  78  77  76  75  74  73  72
1999-06-22  82  81  80  79  78  77  76  75  74  73
1999-06-23  83  82  81  80  79  78  77  76  75  74
1999-06-24  84  83  82  81  80  79  78  77  76  75
1999-06-25  85  84  83  82  81  80  79  78  77  76
1999-06-28  86  85  84  83  82  81  80  79  78  77
1999-06-29  87  86  85  84  83  82  81  80  79  78
1999-06-30  88  87  86  85  84  83  82  81  80  79 
```

我想在每个月的最后一天对上述 df 进行子集化。也就是说，只有日期 1999-05-31 和 1999-06-30 会出现。实际数据框要大得多，最后日期可能是每个月的 28 日、29 日等。所以我希望输出是这样的：

```
dates   V1  V2  V3  V4  V5  V6  V7  V8  V9  V10
1999-05-31  66  65  64  63  62  61  60  59  58  57 
1999-06-30  88  87  86  85  84  83  82  81  80  79
1999-10-29  175 174 173 172 171 170 169 168 167 166 
```

我试图在 zoo 或其他包中找到一些功能，但找不到一个......非常感谢所有建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T11:58:33.313

假设日期被正确格式化为日期，并且源数据框是`x`.

```
> library(xts)
> x[endpoints(x$dates, on = "months"), ]
        dates V1 V2 V3 V4 V5 V6 V7 V8 V9 V10
1  1999-05-31 66 65 64 63 62 61 60 59 58  57
15 1999-06-30 88 87 86 85 84 83 82 81 80  79 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T10:57:06.940

这将选择该月的最后几天：

```
df[as.numeric(substr(as.Date(df$dates) + 1, 9, 10))
   < as.numeric(substr(df$dates, 9, 10)), ]

#        dates V1 V2 V3 V4 V5 V6 V7 V8 V9 V10
#1  1999-05-31 66 65 64 63 62 61 60 59 58  57
#15 1999-06-30 88 87 86 85 84 83 82 81 80  79 
```

请注意，此解决方案取决于每天的绝对月数（与您的数据无关）。

如果要在实际数据中选择每个月的最后一天，请使用以下命令：

```
df[c(diff(as.numeric(substr(df$dates, 9, 10))) < 0, TRUE), ] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-19T00:27:27.867

这是使用的选项`dplyr`：

```
library(dplyr)

df %>% 
  mutate(dates = as.Date(dates)) %>% 
  mutate(yr_mnth = format(dates, '%Y-%m')) %>% 
  group_by(yr_mnth) %>% 
  filter(dates == max(dates))

# or if you wanted the first observation of each month:
df %>% 
  mutate(dates = as.Date(dates)) %>% 
  mutate(yr_mnth = format(dates, '%Y-%m')) %>% 
  group_by(yr_mnth) %>% 
  filter(dates == min(dates)) 
```

# php - 使用 php 对文件 .txt 中的信息进行排序

> ID：12492420
> 
> 赞同：1
> 
> 时间：2012-09-19T09:56:29.060
> 
> 标签：php, sorting, logfile

我使用 php 来保存有关我的用户的所有信息（他们在哪里导航以及何时导航）。

所以我使用以下代码来保存信息：

```
<?php
function iif($condition, $true, $false ) {
    return ($condition ? $true : $false);
}

$ipaddress = $_SESSION['login'];
$page = "http://{$_SERVER['HTTP_HOST']}{$_SERVER['PHP_SELF']}";
$page .= iif(!empty($_SERVER['QUERY_STRING']), "?{$_SERVER['QUERY_STRING']}", "");
$referrer = $monUrl = "http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']; 
$datetime = mktime();
$useragent = $_SERVER['HTTP_USER_AGENT'];
$remotehost = @getHostByAddr($ipaddress);

// Create log line
$logline = $ipaddress . '|' . $referrer . '|' . $datetime . '|' . $useragent . '|' . $remotehost . '|' . $page . "\n";
// Write to log file:
$logfile = 'logfile.txt';
$path='log/'.$_SESSION['login'].'/'.$logfile;
if(!file_exists($path)) {
mkdir('log');
mkdir('log/'.$_SESSION['login']);
$f = fopen('log/'.$_SESSION['login'].'/'.$logfile, "x+");
// fermeture
fclose($f);

}
// Open the log file in "Append" mode
if (!$handle = fopen($path, 'a+')) {
die("Failed to open log file");
}
// Write $logline to our logfile.
if (fwrite($handle, $logline) === FALSE) {
die("Failed to write to log file");
}
fclose($handle);

?> 
```

我使用下面的代码来显示它：

```
 <?php 

$path= 'log/'.$data['login'].'/logfile.txt';
$logfile = $path;
if (file_exists($logfile)) {
$handle = fopen($logfile, "r");
$log = fread($handle, filesize($logfile));
fclose($handle);
} else {
die ("Le fichier de Log n'existe pas!");
}
// Seperate each logline
$log = explode("\n", trim($log));
//After that it may be useful to get each part of each logline in a separate variable. This can be done //by looping through each logline, and using explode again:
// Seperate each part in each logline
for ($i = 0; $i < count($log); $i++) {
$log[$i] = trim($log[$i]);
$log[$i] = explode('|', $log[$i]);
}

// Show a table of the logfile
echo '<table id="box-table-a">';
echo '<th scope="col">Agent</th>';
echo '<th scope="col">Referrer</th>';
echo '<th scope="col">Date</th>';
echo '<th scope="col">Useragent</th>';
echo '<th scope="col">Remote Host</th>';
foreach ($log as $logline) {
echo '<tr>';
echo '<td><a href="index.php?p=voir_fiche_employee&id='.$_GET['id'].'"/>' . $logline['0'] . '</a></td>';
echo '<td><a href="'.urldecode($logline['1']).'"/>'. urldecode($logline['1']) . '</a></td>';
echo '<td>' . date('d-m-Y h:i:s', $logline['2']) . '</td>';
echo '<td>' . $logline['3'] . '</td>';
echo '<td>' . $logline['4'] . '</td>';
echo '</tr>';
}
echo '</table>';
?> 
```

我遇到的麻烦是我真的不知道如何从这个文件中排序信息。事实上，在页面顶部我有一个表格，以便在日期之间进行选择。我希望在这些日期之间显示此日志文件中的所有信息，但我真的不知道该怎么做。

一开始我打算把所有的都存到数据库里，但是有人告诉我，这对数据库来说太多了，所以我决定把所有的都保存在服务器上的一个txt中。

有谁知道是否可以从 txt 文件中对信息进行排序？

默认情况下，我想显示当天日期的日志文件信息，如果我愿意，我可以选择其他日期或日期间隔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:00:57.787

如果可能，将数据存储到数据库中。很容易在数据库中排序。将数据读入文本文件更耗时且难以排序。

# c# - 初始化引用类型数组的简单方法？

> ID：12492422
> 
> 赞同：7
> 
> 时间：2012-09-19T09:56:40.190
> 
> 标签：c#, arrays, reference, array-initialization

默认情况下，引用类型数组被初始化为所有引用为空。

是否有任何语法技巧可以用新的默认对象来初始化它们？

例如

```
public class Child
{
}

public class Parent
{
    private Child[] _children = new Child[10];

    public Parent()
    {
        //any way to negate the need for this?
        for (int n = 0; n < _children.Length; n++)
           _children[n] = new Child();
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T09:59:47.700

使用 LINQ：

```
 private Child[] _children = Enumerable
                                 .Range(1, 10)
                                 .Select(i => new Child())
                                 .ToArray(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T10:00:53.520

您*可以*使用[object 和 collection initializers](http://msdn.microsoft.com/en-us/library/bb384062.aspx)，尽管您的版本可能更简洁，并且可以按原样用于更大的集合：

```
private Child[] _children = new Child[] { 
new Child(),
new Child(),
new Child(),
new Child(),
new Child(),
new Child(),
new Child(),
new Child(),
new Child()
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-11-11T23:27:25.070

您可以使用[Array.Fill](https://docs.microsoft.com/en-us/dotnet/api/system.array.fill?view=net-5.0)方法：

```
public static void Fill<T> (T[] array, T value); 
```

```
public class Child
{
}

public class Parent
{
    private Child[] _children = new Child[10];

    public Parent()
    {
        Array.Fill(_children, new Child());
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-19T14:44:58.813

即使你的 for 循环看起来更糟，它的运行时行为也会比漂亮的 LINQ 语句快得多。例如，一个数组中有 20 个表单的测试是 0.7（for 循环）到 3.5（LINQ）毫秒

# xcode - CGRectMake 和 setContentSize scrollVew 的区别

> ID：12492425
> 
> 赞同：0
> 
> 时间：2012-09-19T09:57:05.113
> 
> 标签：xcode, scrollview, cgrectmake

这两条指令有什么区别

scrollView.frame=CGRectMake(0, -100, 960, 100);

[scrollView setContentSize:CGSizeMake(960, 100)];

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:26:35.617

> scrollView.frame=CGRectMake(0, -100, 960, 100);

设置 UIScrollView 的框架。这意味着您在视图上设置 UiScrollView 的原点和可见大小。

> [scrollView setContentSize:CGSizeMake(960, 100)];

设置 UIScrollView 的内容大小。您使用 UIScrollView，因为您要显示的内容比在视图框架内显示的内容要多。因此，您必须设置上下滚动的 contentView 的大小。

查看 Apple 文档：[创建和配置滚动视图](https://developer.apple.com/library/ios/#DOCUMENTATION/WindowsViews/Conceptual/UIScrollView_pg/CreatingBasicScrollViews/CreatingBasicScrollViews.html#//apple_ref/doc/uid/TP40008179-CH101-SW1)

# php - Post数组的PHP For循环

> ID：12492430
> 
> 赞同：0
> 
> 时间：2012-09-19T09:57:39.677
> 
> 标签：php, syntax-error

所以我在第 2 页上有一个动态表，用户可以在其中添加任意数量的条目。提交 3 页后得到所有信息就好了。问题是我通过数组的for循环迭代不起作用。这是代码：

```
for($i = 0; $i < sizeof($_POST["fname_new"]); $i++) {
    $fname_new = $_POST["fname_new"][i];
    $lname_new = $_POST["lname_new"][i];
    $phone_new = $_POST["phone_new"][i];
    $email_new = $_POST["email_new"][i];
    $ethnicity_new = $_POST["ethnicity_new"][i];
    $stmt = $link -> prepare("INSERT INTO Conference (`First Name`, `Last Name`, `Phone`, `Email`, `Ethnicity`) VALUES (:first_new, :last_new, :phone_new, :email_new, :ethnicity_new)");
    $stmt->bindParam(':first_new', $fname_new);
    $stmt->bindParam(':last_new', $lname_new);
    $stmt->bindParam(':phone_new', $phone_new);
    $stmt->bindParam(':email_new', $email_new);
    $stmt->bindParam(':ethnicity_new', $ethnicity_new);
    $stmt->execute();
} 
```

所以当我这样做的时候

```
echo sizeof($_POST["fname_new"]); 
```

它向我显示了正确的数字，因此如果用户在第 2 页上添加了 3 行，那么回显的值应该是 3，就是这样。当我做：

```
echo $_POST["fname_new"][0]; 
```

然后它适当地给出第一行的名字。我可以用任何数字替换 0，只要它在界限内，并且它是正确的。但由于某种原因，当我这样做时

```
echo $_POST["fname_new"][i]; 
```

它不打印任何东西。我不知道为什么这个 for 循环不起作用。逻辑上是正确的。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T09:58:49.037

你忘了 $ 指向变量 i

试试这个：

```
echo $_POST["fname_new"][$i]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T10:01:16.170

除了给出的所有答案之外，您还错过了*准备好的查询*这一点。您准备一次查询**，**并多次**使用它**。

所以：

```
 $stmt = $link -> prepare(
     "INSERT INTO Conference (`First Name`, `Last Name`, `Phone`, `Email`, `Ethnicity`)
      VALUES (:first_new, :last_new, :phone_new, :email_new, :ethnicity_new)"); 
```

应该在循环之外！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T09:59:17.390

你错过了一个`$`：

```
$fname_new = $_POST["fname_new"][$i];
$lname_new = $_POST["lname_new"][$i];
$phone_new = $_POST["phone_new"][$i];
$email_new = $_POST["email_new"][$i]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T09:59:24.463

应该：

```
$_POST["fname_new"][$i]; 
```

您传递的文字“i”（很可能取决于 PHP 版本）而不是变量 $i。因此它将尝试返回键索引为“i”的值，该值未设置。

# magento - 通过在 magento 中编码为所有属性集分配新属性

> ID：12492431
> 
> 赞同：1
> 
> 时间：2012-09-19T09:57:42.653
> 
> 标签：magento, attributes, magento-1.7

我创建了一个新属性（“例如 my_attribute”）。Magento 的商店已经有很多属性集（大约 20 个）。如果我手动将属性添加到集合中，这是一个非常耗时的过程，因为我的服务器非常慢。我想以编程方式将此新属性（“my_attribute”）分配给所有属性集。

谁能帮助我？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T13:19:52.810

这很简单。在自定义模块设置脚本中：

```
$installer = Mage::getResourceModel('catalog/setup','default_setup');
$installer->startSetup();

$installer->addAttribute(
     'catalog_product',
     'your_attribute_code',
     array(
         'label' => 'Attribute Label',
         'group' => 'General', // this will add to all attribute sets in the General group
         // ...
     )
)

$installer->endSetup(); 
```

有关其他实用程序，请参阅[`Mage_Eav_Model_Entity_Setup`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Eav/Model/Entity/Setup.php)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T10:22:29.750

这是一些快速、肮脏和未经测试的东西:)

```
<?php
$attributeId = ID_HERE;
$installer = new Mage_Catalog_Model_Resource_Eav_Mysql4_Setup('core_setup');
$entityType = Mage::getModel('catalog/product')->getResource()->getEntityType();
$collection = Mage::getResourceModel('eav/entity_attribute_set_collection')
->setEntityTypeFilter($entityType->getId());

foreach ($collection as $attributeSet) {
    $attributeGroupId = $installer->getDefaultAttributeGroupId('catalog_product',     $attributeSet->getId());
    $installer->addAttributeToSet('catalog_product', $attributeSet->getId(), $attributeGroupId, $attributeId);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-11T20:35:42.207

```
$installer = Mage::getResourceModel('catalog/setup','default_setup');
$installer->startSetup();

$attributeCode = 'my_attribute';
$entity = Mage_Catalog_Model_Product::ENTITY;

// create a new attribute if it doesn't exist
$existingAttribute = $installer->getAttribute($entity, $attributeCode);
if (empty($existingAttribute)) {
    $installer->addAttribute($entity, $attributeCode, array(<configure your attribute here>));
}

$attributeId = $installer->getAttributeId($entity, $attributeCode);

// add it to all attribute sets' default group
foreach ($installer->getAllAttributeSetIds($entity) as $setId) {
    $installer->addAttributeToSet(
        $entity, 
        $setId, 
        $installer->getDefaultAttributeGroupId($entity, $setId), 
        $attributeId
    );
}

$installer->endSetup(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T10:31:43.273

由于没有为属性分配任何属性集，因此您可以删除您创建的该属性，然后以编程方式创建所需的属性。

在 Magento wiki 的[Programmatically Added Attributes and Attribute Sets 部分](http://www.magentocommerce.com/wiki/5_-_modules_and_development/catalog/programmatically_adding_attributes_and_attribute_sets)中，它描述`createAttribute`为可以解决您的问题的功能，因为它将创建属性并将它们分配给属性集。

希望这可以帮助！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-17T19:58:08.120

此外，从上述类扩展而来的`Mage_Eav_Model_Entity_Setup`and`Mage_Catalog_Model_Resource_Setup`具有创建属性、集合和组所需的所有方法。它们相当简单，它们将帮助您了解应该如何正确执行它并防止您编写错误或冗余的代码。我发现大多数文章都在 Internet 上流传，甚至 Magento 自己的 wiki 条目的代码都写得不好。

# google-apps-script - 样式化 GAS 中的标记

> ID：12492432
> 
> 赞同：1
> 
> 时间：2012-09-19T09:57:46.153
> 
> 标签：google-apps-script

我有一些`<hr />`我想在 Ui 中使用的标签。我想设置水平线的颜色，但无论我放什么颜色，它仍然是暗灰色。当我尝试调整 set size 属性时，这条线也不会垂直增长。我可以设置背景颜色，背景颜色响应大小属性的调整。这是代码行：

```
app.createHTML("<hr />").setSize(980,10).setStyleAttribute("color", "black"); 
```

这是一个错误还是？还是我做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:31:26.970

这个怎么样：

```
app.createHTML("<hr />").setStyleAttribute("height", "10px").setStyleAttribute("background", "black").setStyleAttribute("border", "black"); 
```

# c# - 带有自定义 X 轴的 C# Excel 图表

> ID：12492434
> 
> 赞同：0
> 
> 时间：2012-09-19T09:57:57.560
> 
> 标签：c#, excel, charts

我有一个来自两列的图表。在 A 列中是一些结果 % 值，在 B 中我具有与该值对应的名称。

```
A   B   
90  Test1   
82  Test2   
66  Test3 
```

我希望将 A 值作为 Y 轴并且已经对其进行了管理，但是我无法将名称从 B 获取到 X 轴标签。

```
Range chartRange;
Worksheet xlWorkSheet = (Worksheet)xlWorkBook.Worksheets[1];

ChartObjects xlCharts = (ChartObjects)xlWorkSheet.ChartObjects(Type.Missing);
ChartObject myChart = (ChartObject)xlCharts.Add(10, 80, 300, 250);
Chart chartPage = myChart.Chart;

chartRange = xlWorkSheet.get_Range("A1:B"+movieCount.ToString(), Type.Missing);
chartPage.SetSourceData(chartRange, misValue);
chartPage.ChartType = XlChartType.xlColumnClustered; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T11:28:26.177

您必须适应这些设置，否则您的 xvalues 将只是一个计数：

```
 chartPage.SetSourceData Range("A2:A4"), xlRows
 chartPage.SeriesCollection(1).XValues = Range("B2:B4") 
```

或者

```
 chartPage.SetSourceData Range("A2:A4"), xlColumns
 chartPage.SeriesCollection(1).XValues = Range("B2:B4") 
```

也许还有另一种方法，但作为一种快速的解决方案，这将在 VBA 中工作 - 所以当你将它调整到你的 C# 版本时它也应该如此。

# c# - 具有枚举值的 C# Propertygrid 组合框（Win Forms）

> ID：12492436
> 
> 赞同：3
> 
> 时间：2012-09-19T09:58:17.023
> 
> 标签：c#, windows, forms, enums, propertygrid

```
public enum eVisualType
{
    None = 0, Torch = 1, Rune01, Rune02, Rune03, FireRed01,
    LaserBlackWhiteLeft, LaserBlackWhiteRight, LaserBlueRedLeft, LaserBlueRedRight,
    Wheel01, Wheel01a, Wheel02, BlinkingStar, MovingPillar
}

public class EnumTypeConverter : TypeConverter
{
    public override bool GetStandardValuesSupported(ITypeDescriptorContext context)
    {
        return true; // True means show a combobox
    }
    public override bool GetStandardValuesExclusive(ITypeDescriptorContext context)
    {
        return true; // True will limit to list. false will show the list, but allow free-formentry
    }
}

public class VisualTypeConverter : EnumTypeConverter
{
    public override TypeConverter.StandardValuesCollection GetStandardValues(ITypeDescriptorContext context)
    {
        return new StandardValuesCollection(new eVisualType[] { eVisualType.BlinkingStar, eVisualType.FireRed01, eVisualType.LaserBlackWhiteLeft, eVisualType.LaserBlackWhiteRight, eVisualType.LaserBlueRedLeft, eVisualType.LaserBlueRedRight, eVisualType.MovingPillar, eVisualType.Rune01, eVisualType.Rune02, eVisualType.Rune03, eVisualType.Torch, eVisualType.Wheel01, eVisualType.Wheel01a, eVisualType.Wheel02 });
    }

    public override object ConvertFrom(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value)
    {
        if(value is string)
            return (eVisualType)Enum.Parse(typeof(eVisualType), value.ToString(), true);
        return base.ConvertFrom(context, culture, value);
    }

} 
```

propertygrid 类中的代码：

```
 private eVisualType m_VisualType = eVisualType.FireRed01;
    [CategoryAttribute("Basic"), DescriptionAttribute("The visual type.")]
    [TypeConverter(typeof(VisualTypeConverter))]
    [DisplayName("Visual Type")]
    public eVisualType VisualType
    {
        get { return m_VisualType; }
        set { m_VisualType = value; }
    } 
```

在运行时在 propertygrid 中选择不同的值时，上述内容仍然会产生错误：“System.String”类型的对象无法转换为“[项目名称].eVisualType”类型。

该问题曾被问过一次或两次，但从未详细说明过，或者仅针对 WPF+绑定。我使用 Windows 窗体。

我也不确定是否需要 ConvertFrom(..)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T13:56:34.563

TypeConverter 很糟糕（我需要从 EnumConverter 派生而不是从 TypeConverter 派生。

```
using System;
using System.ComponentModel;
using System.Globalization;
using System.Reflection;

namespace [namespace]
{
    public class EnumTypeConverter : EnumConverter
    {
        private Type m_EnumType;
        public EnumTypeConverter(Type type)
            : base(type)
        {
            m_EnumType = type;
        }

        public override bool CanConvertTo(ITypeDescriptorContext context, Type destType)
        {
            return destType == typeof(string);
        }

        public override object ConvertTo(ITypeDescriptorContext context, CultureInfo culture, object value, Type destType)
        {
            FieldInfo fi = m_EnumType.GetField(Enum.GetName(m_EnumType, value));
            DescriptionAttribute dna =
                (DescriptionAttribute)Attribute.GetCustomAttribute(
                fi, typeof(DescriptionAttribute));

            if (dna != null)
                return dna.Description;
            else
                return value.ToString();
        }

        public override bool CanConvertFrom(ITypeDescriptorContext context, Type srcType)
        {
            return srcType == typeof(string);
        }

        public override object ConvertFrom(ITypeDescriptorContext context, CultureInfo culture, object value)
        {
            foreach (FieldInfo fi in m_EnumType.GetFields())
            {
                DescriptionAttribute dna =
                (DescriptionAttribute)Attribute.GetCustomAttribute(
                fi, typeof(DescriptionAttribute));

                if ((dna != null) && ((string)value == dna.Description))
                    return Enum.Parse(m_EnumType, fi.Name);
            }
            return Enum.Parse(m_EnumType, (string)value);
        }
    }
} 
```

[http://www.codeproject.com/Articles/22717/Using-PropertyGrid](http://www.codeproject.com/Articles/22717/Using-PropertyGrid)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:41:20.473

通过反射尝试：

```
public static T GetEnumMemberFromName<T>(string name)
    {
        return (T)Enum.Parse(typeof(T), name);
    } 
```

在您的代码中：

```
public class VisualTypeConverter : EnumTypeConverter  
{  
    public override TypeConverter.StandardValuesCollection GetStandardValues(ITypeDescriptorContext context)  
    {  
        return new StandardValuesCollection(new eVisualType[] { eVisualType.BlinkingStar, eVisualType.FireRed01, eVisualType.LaserBlackWhiteLeft, eVisualType.LaserBlackWhiteRight, eVisualType.LaserBlueRedLeft, eVisualType.LaserBlueRedRight, eVisualType.MovingPillar, eVisualType.Rune01, eVisualType.Rune02, eVisualType.Rune03, eVisualType.Torch, eVisualType.Wheel01, eVisualType.Wheel01a, eVisualType.Wheel02 });  
    }  

     public T GetEnumMemberFromName<T>(string name)
    {
        return (T)Enum.Parse(typeof(T), name);
    }

} 
```

例子：

```
eVisualType  myEnumMember = myVisualTypeConverterInstance.GetEnumMemberFromName<eVisualType>("Torch"); 
```

# scala - 在 specs2 匹配器中结合 forall 和 ^^^

> ID：12492438
> 
> 赞同：2
> 
> 时间：2012-09-19T09:58:31.913
> 
> 标签：scala, specs2

在 Specs2 中，`forall`and`foreach`方法可用于将单个项目的匹配器转换为原始类型项目序列的匹配器，并且 ^^^ 可用于在匹配它们之前对实际值*和*预期值进行预处理。但是我怎样才能将两者结合起来呢？

我试过了

```
((s must myMatcher(x)) ^^^ (_.toLowerCase)).forall(collection) 
```

但这不会编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:09:35.850

这个问题实际上与`forall`. 将 移到`forall`前面以增加可读性（这不是必需的）后，可以通过如下重写来编译代码：

```
forall(collection) ((_: String) must myMatcher(x) ^^^ (_.toLowerCase)) 
```

这可以通过阅读“使用序列”一节中的 specs2 文档并查看所涉及的类型来解决。

此外，匹配器必须是`org.specs2.matcher.AdaptableMatcher`. 如果您正在编写自己的匹配器，则需要自己手动子类化此类，因为 specs2 无法知道您的匹配器在做什么，并且会神奇地自动调整它。类子类化的一个示例`AdaptableMatcher`是`org.specs2.matcher.BeTypedEqualTo`.

在特定情况下

```
myMatcher(x) ^^^ (_.toLowerCase) 
```

通过将其替换为以下内容，可以缩短此片段并使其更具可读性和声明性：

```
(myMatcher(x) ignoreCase) 
```

if`myMatcher(x)`具有类型`AdaptableMatcher[Any]`并将其值转换为与字符串进行比较。

# windows - Windows 操作系统级别的文件打开事件触发

> ID：12492440
> 
> 赞同：1
> 
> 时间：2012-09-18T20:53:00.943
> 
> 标签：windows, events, windows-server-2003, file-management

同事们，我需要在某些基本的操作系统级别事件上运行脚本/程序。特别是当打开 Windows 中的文件时。打开可以是只读的或编辑的，并且可以通过多种方式启动，无论是从 Windows 资源管理器（打开或 ），从本地文件选择器的查看或编辑应用程序中选择，或拖放进入编辑或查看应用程序。

此外，我需要触发器来“保持”事件从完成操作直到程序的运行时完成。事件处理程序可能会返回通过状态或失败状态。如果已返回失败状态，则事件必须禁止最初请求的操作。

最后，我需要将包含元数据的属性或属性添加到相关文件中，上述事件触发器处理程序将使用这些元数据来确定最终确定用户是否被允许的通过/失败条件打开文件。

请注意，这不是 Windows 事件日志情况，而是操作系统级别的文件打开事件。

非常感谢您的帮助。

**编辑**

我希望有人知道的是操作系统级别的触发器，类似于如何在 Windows 中启用事件日志编写器发生的触发器（即：发送电子邮件，在事件命中事件记录器时运行脚本） .

我工作的应用程序环境（PLM 系统）允许进行事件处理。因此，当用户启动一个动作时，比如从一个对象中检出一个文件，有 3 个可用的处理程序或触发器可以被编程。“检查”或“预操作”触发器是在用户开始启动事件时但在系统允许处理它之前触发的过程。因此，可以基于某些条件（例如用户上下文）以编程方式阻止或以其他方式更改系统的响应。

我还通过组策略启用了启动/关闭脚本触发，因此我可以延迟服务器关闭，直到数据库正确关闭。这是在 Windows server 2003 中完成的。因此，使用该挂钩，我可以管理关机或启动。

因此，我希望有人可能知道一个操作系统触发器，它会对文件打开操作做同样的事情。这将部署在所有工作站和台式机上。

再次，如果有任何想法，将不胜感激。

再次感谢。

问候， j

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T21:26:51.627

我想到了几个策略。一种是使用您自己的 DLL 运行应用程序，以拦截诸如 WriteFile 之类的 API 调用。另一个是在调试器界面下运行应用程序。

# iphone - 如何在锁定屏幕上添加自定义视图？

> ID：12492445
> 
> 赞同：0
> 
> 时间：2012-09-19T09:58:38.607
> 
> 标签：iphone, ios, customization, jailbreak, lockscreen

我是开发越狱 iphone 应用程序的新手。我想在锁屏上添加我自己的视图，例如按钮，并做一些简单的任务，但我不知道要使用什么 api 或函数。我可以通过使用特殊模板来做到这一点（比如编写自定义通知小部件）吗？或者在特定视图上添加子视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T05:56:00.813

这是我的徽标代码：

```
#import <UIKit/UIKit.h>
#import <SpringBoard/SBAwayController.h>
%hook SBAwayController
- (void)lock
{
    %orig;

    UIButton *btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    btn.frame = CGRectMake(10, 100, 280, 50);
    [btn setTitle:@"Hello Notification" forState:UIControlStateNormal];
    UITapGestureRecognizer *singleTap = [[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(unlock)] autorelease];
    [btn addGestureRecognizer:singleTap];
    [[[objc_getClass("SBAwayController") sharedAwayController] awayView] addSubview:btn];

    return;
}
%end 
```

当我锁定屏幕时，按钮被添加到锁定屏幕。

# security - Wicket 1.5 - 如何配置链接生成的 url？

> ID：12492446
> 
> 赞同：1
> 
> 时间：2012-09-19T09:58:39.497
> 
> 标签：security, url, hyperlink, wicket, wicket-1.5

我正在编写一个 wicket 1.5 应用程序，出于安全原因，我需要控制 url 的呈现方式。

```
mountPage("xxx/yyy", Zzzz.class) 
```

非常适合，但我对为链接侦听器生成的 url 有问题。例如，如果我将以下链接添加到我的页面：

```
add(new Link<Void>("link-login") {
  @Override
  public void onClick() {
    setResponsePage(LoginPage.class);
  }
}); 
```

我获得以下生成的标记：

```
<a wicket:id="link-login" href="./home?0-1.ILinkListener-accessMenu-link~login">Login</a> 
```

有没有办法配置生成的url（`./home?0-1.ILinkListener-accessMenu-link~login`）？至少，我想删除 ~ 字符。

**编辑：** 已解决...根据检票口工作人员的说法，生成的 href 使用“-”作为分隔符对检票口路径进行编码。如果检票口 id 包含“-”，它将被转换为“~”以避免冲突。因此，为了避免这种情况，只需从您的检票口 ID 中删除“-”即可。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:26:26.970

默认字符 - 保留为组件 ID 的分隔符。如果您担心安全性，您可以在这里查看[https://cwiki.apache.org/confluence/display/WICKET/Request+mapping并尝试使用 CryptoMapper。](https://cwiki.apache.org/confluence/display/WICKET/Request+mapping)

# hashmap - 八叉树的动态哈希图

> ID：12492451
> 
> 赞同：3
> 
> 时间：2012-09-19T09:58:59.347
> 
> 标签：hashmap, octree

是否有内存和速度有效的方法来在哈希图中动态存储唯一键：值对？密钥保证是唯一的，但它们的数量经常变化。插入和删除必须快速。

我所做的是包含有符号距离场的八叉树（不是线性/完整）。八叉树经常更新。我想做的是尝试使其无指针以节省一些空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T15:36:45.097

我不确定是否使用哈希图，因为动态结构往往会丢失哈希图受益的 O(1) 查找，或者分配额外的内存并在内存用完时需要重新分配。但是，您可以创建一个八叉树，其中每个节点只有一个指针。

例如，在 C++ 中，可能会执行以下操作：

```
struct node{
    node* next;//pointer to children
    unsigned byte shape;//8bit flag indicating which children actually exist

    node():next(0),shape(0){}
};
void initChildren(node& parent,unsigned byte state=0){
    if(!parent.next){//only allocate the array if it has not yet been allocated
        parent.next=new node[8];//the children are allocated in consecutive memory
    }
    shape=state;
} 
```

删除子节点只需要在 shape 字段中设置一点为 0。我希望这对您有所帮助，即使您之前确实问过。

# com - 强制关闭已经有活动引用的服务器 COM

> ID：12492452
> 
> 赞同：0
> 
> 时间：2012-09-19T09:59:04.333
> 
> 标签：com, delphi-xe, ole

我使用 cBuilder 构建了一个程序，带有一个 oleAuto 接口，允许一些客户端对服务器 com 进行一些简单的查询。当由于某种原因（例如数据库连接丢失）出现问题并且我需要重新启动服务器时，我想关闭服务器。

问题是，如果有一些客户端通过 COM 引用连接，我会收到一个对话框，提示我确认是否要关闭此应用程序。

有没有办法避免对话并强制关闭服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:11:18.813

Well obviously you need to release all references to the object in order to properly close the server.

Were you unaware of that, or is there a reason why you need to hold on to the reference?

# ios - 如何隐藏 uinavigationbar？

> ID：12492465
> 
> 赞同：0
> 
> 时间：2012-09-19T09:59:52.997
> 
> 标签：ios, xcode4

我已经从对象库 xCode（拖放）中添加了 uinavigation 栏，但我无法在必要时隐藏它，主要是我无法连接它。请帮帮我，我搜索了每个地方，每个人都在谈论 uinavigationcontroller 的酒吧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:07:37.617

为什么不能将插座连接到自己的导航栏？...可以。检查您的 xib 是否具有正确的文件所有者。也看看我的截图..

![在此处输入图像描述](../Images/1a1f12ef811161dee971c82fe7070fc0.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:14:38.290

尝试：

```
self.navigationController.navigationBar.hidden = YES; 
```

# ruby-on-rails-3 - Rails 在启动服务器后运行 rake:scheduler

> ID：12492466
> 
> 赞同：0
> 
> 时间：2012-09-19T09:59:55.980
> 
> 标签：ruby-on-rails-3

启动 Rails 服务器后，我需要运行 rake 命令。

但是，当我尝试调用`system(rake reque:scheduler")`时`config.before_initialise`，该命令似乎在无限循环中运行。

我在其他网站上搜索过答案，但没有找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:37:45.053

您不想在 Rails 中启动该过程。看看工头：[https ://github.com/ddollar/foreman](https://github.com/ddollar/foreman)

# javascript - toString() 的继承

> ID：12492469
> 
> 赞同：0
> 
> 时间：2012-09-19T10:00:08.007
> 
> 标签：javascript, oop, inheritance

我有一个方法`toString()`不是从`Shape`. 为什么？

```
function Shape(){
  this.name = 'shape';
  this.toString = function() {return this.name;};
}

function TwoDShape(){
  this.name = '2D shape';
}

function Triangle(side, height) {
  this.name = 'Triangle';
  this.side = side;
  this.height = height;
  this.getArea = function(){return this.side * this.height / 2;};
}

TwoDShape.prototype = TwoDShape;
Triangle.prototype = Triangle;

TwoDShape.prototype.constructor = TwoDShape;
Triangle.prototype.constructor = Triangle;

var my = new Triangle(5, 10);

document.write("my getarea: " + my.getArea() + "my name is: " + my.toString()  + "<br>");​ 
```

[演示 jsFiddle。](http://jsfiddle.net/centerwow/WCzEz/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T10:05:10.337

`Triangle`的原型必须是 a`Shape`以便它继承其方法：

```
Triangle.prototype = new Shape(); 
```

更具体地说，因为您有多个继承级别：

```
TwoDShape.prototype = new Shape();
TwoDShape.prototype.constructor = TwoDShape;

Triangle.prototype = new TwoDShape();
Triangle.prototype.constructor = Triangle; 
```

也就是说，`TwoDShape`继承`Shape`和`Triangle`继承自`TwoDShape`。

通常，如果`Foo`继承`Bar`，您将拥有：

```
Foo.prototype = new Bar(); // inherit Bar
Foo.prototype.constructor = Foo; // Fix constructor which now points to Bar 
```

**[演示](http://jsfiddle.net/c4AwH/)**。

### 参考：

*   [MDN：面向对象 JavaScript 简介：继承](https://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript#Inheritance)
*   [JavaScript 中的 OOP：继承](http://phrogz.net/JS/classes/OOPinJS2.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T10:04:02.360

您必须将阴影的原型设置为 Shade，而不是像您那样设置为 TwoDShape 或 Triangle。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T10:05:25.180

原型继承应该是`SubConstructor.prototype = new ParentConstructor`，不是`SubConstructor.prototype = ParentConstructor`。你没有正确继承原型，所以你没有继承`toString`方法；`getArea`不是原型方法，而是每个实例的实际属性，所以它可以工作。

# gcc - GCC 尝试组装一个 .h 文件

> ID：12492470
> 
> 赞同：0
> 
> 时间：2012-09-19T10:00:22.467
> 
> 标签：gcc, linux-kernel, embedded-linux

这是一个奇怪的问题，我真的不知道该怎么问。

我正在修补内核，当我尝试构建它时，我得到了这个

```
 devshark@ubuntu:~/KERNEL/linux_3.2.17$ make arch/arm/vfp
 CHK     include/linux/version.h
 CHK     include/generated/utsrelease.h
 make[1]: `include/generated/mach-types.h' is up to date.
 CALL    scripts/checksyscalls.sh
 AS      arch/arm/vfp/entry.o
 include/linux/thread_info.h: Assembler messages:
 include/linux/thread_info.h:12: Error: bad instruction `struct timespec'
 include/linux/thread_info.h:13: Error: bad instruction `struct compat_timespec'
 include/linux/thread_info.h:18: Error: bad instruction `struct restart_block{'
 include/linux/thread_info.h:19: Error: bad instruction `long (*fn)(struct restart_block*)'
 include/linux/thread_info.h:20: Error: bad instruction `union {'
 include/linux/thread_info.h:22: Error: bad instruction `struct {'
 include/linux/thread_info.h:23: Error: bad instruction `u32 __user*uaddr'
 include/linux/thread_info.h:24: Error: bad instruction `u32 val'
 include/linux/thread_info.h:25: Error: bad instruction `u32 flags'
 include/linux/thread_info.h:26: Error: bad instruction `u32 bitset'
 include/linux/thread_info.h:27: Error: bad instruction `u64 time'
 include/linux/thread_info.h:28: Error: bad instruction `u32 __user*uaddr2'
 include/linux/thread_info.h:29: Error: junk at end of line, first unrecognized character is `}'
 ... 
```

它继续列出一些 .h 和 .c 文件。我可以很好地构建其他所有东西（到目前为止），但此时构建中断。

编辑：

好的，所以我做了一些研究，事情是这样的：

/arch/arm/include/asm/thread_info.h 报告一个

```
/home/devshark/KERNEL/linux_3.2.17/arch/arm/include/asm/thread_info.h:68:23: error: field 'restart_block' has incomplete type 
```

struct restart_block 在 /include/linux/thread_info.h 中定义

当我将它包含在文件中时，我得到了上述错误。这就是我包含它的方式

```
 #ifndef __ASM_ARM_THREAD_INFO_H
 #define __ASM_ARM_THREAD_INFO_H

 #ifdef __KERNEL__

 #include <linux/compiler.h>
 //#include <linux/thread_info.h>
 #include <asm/fpstate.h>

 #define THREAD_SIZE_ORDER  1
 #define THREAD_SIZE        8192
 #define THREAD_START_SP        (THREAD_SIZE - 8)

 #ifndef __ASSEMBLY__
 ... 
```

但结果非常糟糕。所以我所做的就是退后一步，发现在 kernel/io.ci 中包含 asm/thread_info.h 而不是 linux/thread_info.h

因此，在发生了更多的欢闹之后，我将根源追溯到 mach_types 中缺少的条目。

我会回来提供更多信息，但这段旅程让我意识到我是多么讨厌（讨厌）包括我自己的文件:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:36:55.093

这完全是我的错，似乎在某些时候我犯了两个错误

1) 包含一个错误的文件，该文件修复了前三个文件存在的相同问题 2) 留下注释掉的包含语句。

第 1 点非常明显 - 文件名不断重复出现，但最难的部分是找到错误所在。稍后进行一点日志狙击，我发现一行说“在文件/arch/arm/kernel/io.c：”中，所以我只是进去并将asm/thread_info.h换成了linux/thread_info.h和那个错误走了。

第二个真正的问题也是 asm/thread_info.h，但这次它在一些随机文件中被注释掉了，因为我刚刚修复它并且有点忘记它（三向臂 asm 比较让眼睛很沉重），这体现了在 vmlinux.vms 中无法链接。

给出诸如“第 266 行的意外符号 #”之类的错误……去那里我看到了我的问题，并且使用“//#include linux/thread_info.h”快速 grep 显示了需要修复的文件。所有编译问题都已解决，uImage 构建得很好:))

但它没有启动，或者至少没有告诉我它。于是，结案。

# jquery - 滚动到文档类型

> ID：12492471
> 
> 赞同：2
> 
> 时间：2012-09-19T10:00:30.437
> 
> 标签：jquery, doctype, scrollto

我目前正在使用 ScrollTo() jQuery 插件，只要我没有定义 Doctype，它就可以正常工作，但是当我定义 Doctype 时，ScrollTo() 插件会中断。

我已经在[GitHub 上发布了我的代码](https://github.com/ianholden123/ScrollToDoctype)

我通过互联网查看了类似的问题，我认为有些人已经分享了我的问题，但是在查看解决方案时，我并不清楚。

我只需要让插件和文档类型一起工作，两者都必须存在。请帮忙，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:43:59.123

标记中的一些更改：

1.  [**用这个版本**](http://demos.flesler.com/jquery/scrollTo/js/jquery.scrollTo-min.js)替换你的`jquery.scrollto.min.js`文件[](http://demos.flesler.com/jquery/scrollTo/js/jquery.scrollTo-min.js)

***   替换`<ul class="threeNavLinks">...</ul>`为以下代码（均出现）

    ```
    <ul class="threeNavLinks">
        <li class="secondaryNavIcon"><a class="navlink" href="area2">About</a></li>
        <li class="primaryNavIcon"><a class="navlink" href="area3">Portfolio</a></li>
        <li class="secondaryNavIcon"><a class="navlink" href="area4">Contact</a></li>
    </ul> 
    ```

    *   在中添加以下脚本`<head>`

    ```
    <script type="text/javascript">
        $(function(){
            $('.navlink').click(function(e) {
                var divId = '#' + $(this).attr("href");
                $.scrollTo(divId, 700);
                e.preventDefault();
            });
        });
    </script> 
    ```** 

 **上述解决方案在本地测试并且工作正常。

希望这对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:25:26.620

I experienced a similar issue with the doctype declaration breaking this plugin on a validating site. Try testing with different versions of jQuery; I had a problem with 1.8.0 that was resolved by switching back to 1.7.0**

# macos - 如何将分支 master 添加到 git config。我需要一个命令行解决方案

> ID：12492473
> 
> 赞同：0
> 
> 时间：2012-09-19T10:00:40.503
> 
> 标签：macos, git, terminal

我想将这些行添加到 git config。我需要一个命令行解决方案。

```
[branch "master"]
   remote = origin
   merge = refs/heads/master 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T10:15:49.990

`git config branch.master.remote origin`设置值`remote`。

`git config branch.master.merge refs/heads/master`设置值`merge`。

`git config branch.master.remote`读取值。

可`git config`用于编辑任何值。规则很简单。我举例说明。生成这样`git config a.b.c.d.e.f 42`的配置部分：

```
[a "b.c.d.e"]
    f = 42 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:26:16.557

在 git 版本**1.7.0**之前，您需要这样做：

```
git config branch.master.remote origin
git config branch.master.merge  refs/head/master 
```

从 git 1.7.0 及更高版本开始，您可以这样做：

```
git branch --set-upstream master origin/master 
```

他们做同样的事情。

# visual-studio-2012 - NuGet：如何在多个解决方案中保持包版本一致？

> ID：12492474
> 
> 赞同：14
> 
> 时间：2012-09-19T10:00:41.587
> 
> 标签：visual-studio-2012, nuget

我们正在构建一组多个服务，每个服务都有自己的解决方案和相关的项目。其中许多服务依赖于相同的 NuGet 包。
所有解决方案都启用了“包还原”。

一些解决方案引用了其他解决方案*拥有*的程序集，这就是为什么我们需要所有解决方案都引用不同 NuGet 包的完全相同版本的一个明显原因。

所有服务都需要协同工作以实现最终结果。它们作为单个产品的一部分进行打包和安装，这是我们希望所有东西都运行在相同版本的 NuGet 包的另一个原因

我们无法在解决方案之间保持包版本一致。

目前我们正在手动检查和更新包版本，我们也偶尔会遇到编译错误，因为一个解决方案中的项目最终会引用同一个包的不同版本。

是否有*推荐*的方法（希望是自动过程）？
如果没有包还原，我们会更好吗？
有人对此主题有任何一般性建议吗？

谢谢

[更新：我在 NugGet 项目http://nuget.codeplex.com/workitem/2623](http://nuget.codeplex.com/workitem/2623)上为此创建了一个问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T08:12:29.150

要解决这个问题：

1.  创建您自己的私有 NuGet 服务器（请参阅[1](http://kevww.wordpress.com/2012/02/03/setup-a-private-nuget-server-host-your-own-nuget-feed/)和[2](http://rizamarhaban.ecodevsys.com/20111125/walkthrough-creating-nuget-local-server-private-repository/)），以托管您使用的正确版本的包。
2.  配置每个构建系统以使用该服务器并自动更新到最新版本。

虽然这需要一台服务器，但它不仅可以确保每个人都拥有正确的版本，而且还可以加快构建服务器的下载速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-05T22:43:14.673

[`nuget update`您可以使用命令](http://docs.nuget.org/docs/reference/command-line-reference#Update_Command)配置您的 TFS 构建以将解决方案中的所有 NuGet 包更新到其最新版本。

最新版本可能来自 nuget.org、本地 NuGet 服务器甚至网络共享。使用`source`参数来定义您想要更新的来源。

您可以通过 MsBuild proj 文件或通过 TFS 模板执行构建配置。

# entity-attribute-value - magento 1.7 添加属性组

> ID：12492477
> 
> 赞同：1
> 
> 时间：2012-09-19T10:00:55.110
> 
> 标签：entity-attribute-value, magento-1.7

我需要使用安装脚本在数据库中添加一个名为 Videos 的属性组。这些是我的文件： **app/code/local/Company/ProductVideo/etc/config.xml**

```
 <resources>
        <attributegroup_setup>
            <setup>
                <module>Company_ProductVideo</module>
                <class>Company_ProductVideo_Model_Entity_Setup</class>
            </setup>
        </attributegroup_setup>
    </resources>

</global> 
```

**app/code/local/Company/ProductVideo/Model/Entity/Setup.php**

```
<?php
class Company_ProductVideo_Model_Entity_Setup extends Mage_Eav_Model_Entity_Setup{
}
?> 
```

**应用程序/代码/本地/公司/sql/attributegroup_setup/msql4-install-1.7.0.php**

```
<?php
$installer = $this;
$installer->startSetup();

$installer->addAttributeGroup('catalog_product', 'Default','Videos', 40);
$installer->endSetup();

?> 
```

我的模块也注册在**app/code/etc/modules/Company_ProductVideo.xml**

```
<config>
  <modules>
    <Company_ProductVideo>
        <active>true</active>
        <codePool>local</codePool>
     </Company_ProductVideo>
   </modules>
</config> 
```

但这不起作用，欢迎任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:23:58.160

我已经解决了，问题是sql文件夹下的文件夹名称。

约定是这样命名的：mysql4-install-'version'。

# android - 如何在不破坏 Robolectric 的情况下添加 WidgetProvider

> ID：12492483
> 
> 赞同：1
> 
> 时间：2012-09-19T10:01:13.993
> 
> 标签：android, android-appwidget, robolectric

我有一个使用 Robolectric 1.1 和 Roboguice 2 的测试套件。它运行良好。

我在应用程序清单中添加了一个 AppWidget，如下所示：

```
<receiver android:name="NearestOpenCragWidgetProvider" android:exported="false">
                <intent-filter>
                    <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
                </intent-filter>
                <meta-data android:name="android.appwidget.provider"
                       android:resource="@xml/nearest_open_crag_widget_info" />
            </receiver> 
```

我创建了一个类

```
public class NearestOpenCragWidgetProvider extends AppWidgetProvider {
     public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
            final int N = appWidgetIds.length;

            // Perform this loop procedure for each App Widget that belongs to this provider
            for (int i=0; i<N; i++) {
                int appWidgetId = appWidgetIds[i];

                //get the layout
                RemoteViews remoteViews = new RemoteViews(context.getPackageName(),
                        R.layout.nearest_open_crag_widget);

                // Tell the AppWidgetManager to perform an update on the current app widget
                appWidgetManager.updateAppWidget(appWidgetId, remoteViews);
            }
        }
} 
```

和 res/xml 中的 AppWidgetProviderInfo xml

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android" >
    android:minWidth="294dp"
    android:minHeight="72dp"
    android:updatePeriodMillis="86400000"
    android:initialLayout="@layout/nearest_open_crag_widget"
    android:resizeMode="none">
</appwidget-provider> 
```

并且还添加了 layoutnearest_open_crag_widget

现在，当我运行测试时，它们立即失败

```
java.lang.ArrayIndexOutOfBoundsException: -1
    at com.xtremelabs.robolectric.ApplicationResolver.replaceLastDotWith$IfInnerStaticClass(ApplicationResolver.java:55)
    at com.xtremelabs.robolectric.ApplicationResolver.registerBroadcastReceivers(ApplicationResolver.java:47)
    at com.xtremelabs.robolectric.ApplicationResolver.resolveApplication(ApplicationResolver.java:36)
    at com.xtremelabs.robolectric.RobolectricTestRunner.createApplication(RobolectricTestRunner.java:491)
    at com.xtremelabs.robolectric.RobolectricTestRunner.setupApplicationState(RobolectricTestRunner.java:368)
    at com.xtremelabs.robolectric.RobolectricTestRunner.internalBeforeTest(RobolectricTestRunner.java:307)
    at com.xtremelabs.robolectric.RobolectricTestRunner.methodBlock(RobolectricTestRunner.java:285)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

该应用程序以 2.3 为目标，如果我在 Android Manifest 中注释掉 Widget 声明，测试将再次开始运行。

我显然有什么东西倒退了，想知道主脑是否能发现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T22:25:47.687

原来问题应该是“如何添加小部件提供程序而不是白痴”。如果我在 android 清单中使用 Provider 的完全限定名称，那么一切都很好

```
<receiver android:name="uk.co.some.package.NearestOpenCragWidgetProvider" android:exported="false">
     <blah />
</receiver> 
```

# powershell - powershell 脚本 - 使用 Windows 调度程序启动后的不同行为

> ID：12492485
> 
> 赞同：2
> 
> 时间：2012-09-19T10:01:15.530
> 
> 标签：powershell, powershell-2.0, powershell-remoting

我有这个脚本来检查远程服务器上是否有映射磁盘。当我在命令行中运行它时，它运行良好，从 PowerGUI 和 ISE 它运行良好，但是当我在 Windows 任务计划程序中调度它时，我收到一条邮件消息（不包括脚本的邮件发送部分），该磁盘不是映射 - 尽管磁盘已映射，但仍执行“else”。

```
if(Invoke-Command -ComputerName sdebt -ScriptBlock { Get-WmiObject win32_logicaldisk -ComputerName sdebt -Filter "DeviceID = 'L:'"}) {
        Write-Host -ForegroundColor Green "L: is OK"} else {
                Write-Host -ForegroundColor Magenta "L: is NOT OK" 
                $subject = "CHYBA: Disk L is not mapped"
                $body += "Disk L is not mapped `r" } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:15:49.380

**可能与权限有关。**

*   当您从命令行/ISE/PowerGUI 运行它时，您正在使用您的凭据

*   默认情况下，当您从计划任务运行它时，您会使用系统凭据运行它

如果我是你我会：

1.  尝试使用您的凭据运行它，看看这是否有所作为。
2.  尝试以最高权限运行它

如果在 1) 和 2) 之后仍然失败，至少您确定这不是权限问题 :-)

# delphi - Delphi 2010 while 循环

> ID：12492494
> 
> 赞同：0
> 
> 时间：2012-09-19T10:01:54.717
> 
> 标签：delphi, while-loop, delphi-2010

我有一个 While 循环的问题。

我需要将 TotalCost 显示在 SpreeWin 中，并且 Shopping sprees 显示如下

您赢得的消费限额是 R 890

在第 1 号大礼包中，您可能会花费 R100

在大礼包 #2 中，您可能会花费 R340

在第 3 号大礼包中，您可能会花费 R450

```
 ListHead := 'Max per spree is R500.00 Max limit is R10000.00';
  lstLimit.Items.Add(ListHead);

  Count := random(20) + 1;
  MaxCost := random(10000) + 1;
  TotalCost := 0;

  SpreeWon := 'Your spending limit that you have won is  R' + IntToStr(TotalCost);
  lstLimit.Items.Add(SpreeWon);

  while TotalCost <= MaxCost do
    begin
         Prize := Random(500) + 1;
         TotalCost := TotalCost + Prize;
         ListItems := 'On spree # ' + IntToStr(Count) + ' you may spend R' + IntToStr(Prize);
         lstLimit.Items.Add(ListItems);
    end;

 Cost := 'Total prize value : R' + IntToStr(TotalCost);
 lstLimit.Items.Add(Cost); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T16:56:37.620

您在 TotalCost 为 0 时为总成本添加项目，当您得到它时插入它。对于狂欢计数，你应该算一下：

```
 var
    SpreeCount: Integer;
    ..

  ..
  TotalCost := 0;

  // comment the below
  // SpreeWon := 'Your spending limit that you have won is  R' + IntToStr(TotalCost);
  // lstLimit.Items.Add(SpreeWon);

  SpreeCount := 0; // <--

  while TotalCost <= MaxCost do
    begin
         Prize := Random(500) + 1;
         TotalCost := TotalCost + Prize;

         Inc(SpreeCount); // <--
         // substitute SpreeCount for Count in the below
         ListItems := 'On spree # ' + IntToStr(SpreeCount) + ' you may spend R' + IntToStr(Prize);
         lstLimit.Items.Add(ListItems);
    end;

 Cost := 'Total prize value : R' + IntToStr(TotalCost);
 lstLimit.Items.Add(Cost); 

  // insert SpreeWon
  SpreeWon := 'Your spending limit that you have won is  R' + IntToStr(TotalCost); // <--
  lstLimit.Items.Insert(0, SpreeWon); // <-- 
```

# maven-2 - Maven 发布插件 Maven 2

> ID：12492496
> 
> 赞同：0
> 
> 时间：2012-09-19T10:02:00.260
> 
> 标签：maven-2, maven-release-plugin

我有多模块项目，比如在父 pom 上定义的模块，如：

```
<modules>
    <module>child1</module>
    <module>child2</module>
</modules> 
```

当我在 parent project 上键入时`mvn release:prepare`，它会构建每个孩子，并最终构建自己。有没有办法告诉发布插件安装每个孩子？所以当我输入`mvn release:prepare`foreach child时：构建安装，最后发布？

父pom：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>com.voncuver</groupId>
<artifactId>cu</artifactId>
<packaging>pom</packaging>
<version>1.6.1-SNAPSHOT</version>

<properties>
    <spring-version>2.5.6</spring-version>
    <maven-plugin-version>4.1.0.1-fuse</maven-plugin-version>
</properties>

<scm>
    <connection>scm:svn:file:///C:/Users/voncuver/Documents/myRepository/cu</connection>
    <developerConnection>scm:svn:file:///C:/Users/voncuver/Documents/myRepository/cu</developerConnection>
</scm>

<modules>
    <module>cu-pars-engine</module>
    <module>cu-agent</module>
</modules>

<build>
    <resources>
        <resource>
            <directory>src/main/resources</directory>
        </resource>
    </resources>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <executions>
                <execution>
                    <configuration>
                        <classifier>${target.env}</classifier>
                    </configuration>
                </execution>
            </executions>
            <configuration>
                <archive>
                    <manifest>
                        <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
                    </manifest>
                    <manifestEntries>
                        <Build>${JOB_NAME} #${BUILD_NUMBER} at ${BUILD_ID}</Build>
                        <Environment>${environment.type}</Environment>
                        <Revision>${SVN_REVISION}</Revision>
                    </manifestEntries>
                </archive>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-eclipse-plugin</artifactId>
            <version>2.8</version>
        </plugin>
    </plugins>
</build>

<repositories>
    <repository>
        <id>releases</id>
        <url>
            http://maven.vonc.com/content/repositories/releases/
        </url>
        <releases>
            <enabled>true</enabled>
        </releases>
        <snapshots>
            <enabled>false</enabled>
        </snapshots>
    </repository>
    <repository>
        <id>snapshots</id>
        <url>
            http://maven.von.com/content/repositories/snapshots/
        </url>
        <releases>
            <enabled>false</enabled>
        </releases>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
    </repository>
</repositories>

<dependencyManagement>
    <dependencies>
        <dependency>
            <artifactId>cu-pars-engine</artifactId>
            <groupId>com.voncuver</groupId>
            <version>${pom.version}</version>
        </dependency>
        <dependency>
            <artifactId>cu-agent</artifactId>
            <groupId>com.voncuver</groupId>
            <version>${pom.version}</version>
        </dependency>
</dependencyManagement>

<distributionManagement>
    <repository>
        <id>releases</id>
        <url>http://maven.von.com/content/repositories/releases</url>
        <layout>default</layout>
    </repository>
    <snapshotRepository>
        <id>snapshots</id>
        <url>http://maven.von.com/content/repositories/snapshots</url>
        <layout>default</layout>
        <uniqueVersion>true</uniqueVersion>
    </snapshotRepository>
</distributionManagement> 
```

孩子：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

<modelVersion>4.0.0</modelVersion>

<parent>
    <artifactId>cu</artifactId>
    <groupId>com.voncuver</groupId>
    <version>1.6.1-SNAPSHOT</version>
</parent>

<artifactId>cu-pars-engine</artifactId>
<packaging>jar</packaging>

<dependencies>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.15</version>
    </dependency>
</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>javacc-maven-plugin</artifactId>
            <version>2.5</version>
            <executions>
                <execution>
                    <id>javacc</id>
                    <goals>
                        <goal>javacc</goal>
                    </goals>
                </execution>
                <execution>
                    <id>javacc-ptparser</id>
                    <goals>
                        <goal>jjtree-javacc</goal>
                    </goals>
                    <configuration>
                        <isStatic>false</isStatic>
                        <buildNodeFiles>true</buildNodeFiles>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

孩子二号：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<parent>
    <artifactId>cu</artifactId>
    <groupId>com.voncuver</groupId>
    <version>1.6.1-SNAPSHOT</version>
</parent>
<modelVersion>4.0.0</modelVersion>

<artifactId>cu-agent</artifactId>
<packaging>jbi-service-unit</packaging>

<dependencies>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.12</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>3.8.1</version>
        <scope>test</scope>
    </dependency>
</dependencies> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:14:44.367

如果你有一个多模块构建，你需要在你的多模块构建的根目录上执行 mvn release:prepare 和 mvn release:perform 步骤，而不是在每个孩子上。

# checkbox - 如何在 yii 的引导程序中确定复选框行的标签？

> ID：12492498
> 
> 赞同：0
> 
> 时间：2012-09-19T10:02:11.030
> 
> 标签：checkbox, twitter-bootstrap, yii

您好，我遇到了复选框标签的问题。当我在单个视图中使用同一类的多个模型时，复选框似乎不使用该模型的属性标签中的名称。

即，如果我认为这是：

```
$form->checkBoxRow($colorArray['left'],'[left]special_request'); 
```

如颜色模型的属性标签中所述，复选框使用标签“[left]special request”而不是“Special Request”呈现。

另一方面，下拉列表、文本字段等被正确呈现。

在将引导程序从版本 0.9.12.r211 更新到 1.0.0.r296 后，我注意到了这个错误/功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:01:28.180

和`checkBoxRow`所有方法以`Row`从返回的数组中获取标签结束`Model->attributeLabels()`。

您可以更改自动生成的标签或使用`TbLabel`小部件。
选择最适合您的问题。

# java - 使用 NetBeans 生成的 WebService 类将 ServiceAuthHeader 添加到 SOAP 消息

> ID：12492499
> 
> 赞同：0
> 
> 时间：2012-09-19T10:02:16.617
> 
> 标签：java, soap, netbeans-7

我已经获得了我需要使用的 SOAP Web 服务的 wsdl。我已经使用 wsdl 在 netbeans 中创建 web 服务类。

SOAP 标头需要带有用户名和密码的 ServiceAuthHeader。

NetBeans 确实生成了一个 ServiceAuthHeader 类，但我不知道如何将它添加到使用生成的类发送的 SOAP 消息中。

我知道如何在较低级别执行此操作，即创建一个 SOAPMEssage，添加标头，连接到服务并发送它，但是我以前从未使用过 jws，其中的细节已经为您完成了，我正在努力找出我在任何文档或教程中添加它的位置。

生成的 ServiceAuthHeader 是这样的：

```
package com.theservice.webservice;

import java.util.HashMap;
import java.util.Map;
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlAnyAttribute;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlType;
import javax.xml.namespace.QName;

/**
 * <p>Java class for ServiceAuthHeader complex type.
 * 
 * <p>The following schema fragment specifies the expected content contained within   this class.
 * 
 * <pre>
 * &lt;complexType name="ServiceAuthHeader">
 *   &lt;complexContent>
 *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
 *       &lt;sequence>
 *         &lt;element name="Username" type="{http://www.w3.org/2001/XMLSchema}string" minOccurs="0"/>
 *         &lt;element name="Password" type="{http://www.w3.org/2001/XMLSchema}string" minOccurs="0"/>
 *       &lt;/sequence>
 *       &lt;anyAttribute/>
 *     &lt;/restriction>
 *   &lt;/complexContent>
 * &lt;/complexType>
 * </pre>
 * 
 * 
 */
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "ServiceAuthHeader", propOrder = {
"username",
"password"
})
public class ServiceAuthHeader {

@XmlElement(name = "Username")
protected String username;
@XmlElement(name = "Password")
protected String password;
@XmlAnyAttribute
private Map<QName, String> otherAttributes = new HashMap<QName, String>();

/**
 * Gets the value of the username property.
 * 
 * @return
 *     possible object is
 *     {@link String }
 *     
 */
public String getUsername() {
    return username;
}

/**
 * Sets the value of the username property.
 * 
 * @param value
 *     allowed object is
 *     {@link String }
 *     
 */
public void setUsername(String value) {
    this.username = value;
}

/**
 * Gets the value of the password property.
 * 
 * @return
 *     possible object is
 *     {@link String }
 *     
 */
public String getPassword() {
    return password;
}

/**
 * Sets the value of the password property.
 * 
 * @param value
 *     allowed object is
 *     {@link String }
 *     
 */
public void setPassword(String value) {
    this.password = value;
}

/**
 * Gets a map that contains attributes that aren't bound to any typed property on this class.
 * 
 * <p>
 * the map is keyed by the name of the attribute and 
 * the value is the string value of the attribute.
 * 
 * the map returned by this method is live, and you can add new attribute
 * by updating the map directly. Because of this design, there's no setter.
 * 
 * 
 * @return
 *     always non-null
 */
public Map<QName, String> getOtherAttributes() {
    return otherAttributes;
}

} 
```

所以我可以使用这个成功地调用服务：

```
private static PriceDetailRetunValue priceDetail(PriceDetailInputValue inputValue) {
            com.theservice.webservice.WebService service = new com.theservice.webservice.WebService();
        com.theservice.webservice.WebServiceSoap port = service.getWebServiceSoap12();
        return port.priceDetail(inputValue);
} 
```

我可以解析响应，这当然告诉我需要提供凭据。

那么我如何处理实际的 SOAP 标头消息以便能够添加 ServiceAuthHeader？我一直在查看创建的 WebService 的方法，并看到您可以获得请求上下文，并且我已经看到了如何将凭据添加到 http 请求标头，但我无法找到要添加到的任何地方SOAPME 消息。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:32:07.323

我在这里找到了答案[http://www.javadb.com/using-a-message-handler-to-alter-the-soap-header-in-a-web-service-client](http://www.javadb.com/using-a-message-handler-to-alter-the-soap-header-in-a-web-service-client)

您需要创建一个处理程序，然后告诉您的服务使用它。

所以我原来的方法只是添加了几行

```
private static PriceDetailRetunValue priceDetail(PriceDetailInputValue inputValue) {
        com.theservice.webservice.WebService service = new com.theservice.webservice.WebService();

    HeaderHandlerResolver handlerResolver = new HeaderHandlerResolver();
    service.setHandlerResolver(handlerResolver);

    com.theservice.webservice.WebServiceSoap port = service.getWebServiceSoap12();
    return port.priceDetail(inputValue);
} 
```

HandlerResolver 和 Handler 看起来像这样......

```
package com.la.feed.xml.theservice;

import java.util.*;
import javax.xml.soap.Name;
import javax.xml.soap.SOAPElement;
import javax.xml.soap.SOAPEnvelope;
import javax.xml.soap.SOAPFactory;
import javax.xml.soap.SOAPHeader;
import javax.xml.soap.SOAPHeaderElement;
import javax.xml.ws.handler.*;
import javax.xml.ws.handler.soap.SOAPHandler;
import javax.xml.ws.handler.soap.SOAPMessageContext;

public class HeaderHandler implements SOAPHandler<SOAPMessageContext> {

@Override
public boolean handleMessage(SOAPMessageContext smc) {

    Boolean outboundProperty = (Boolean) smc.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);

    if (outboundProperty.booleanValue()) {

        try {

            SOAPEnvelope envelope = smc.getMessage().getSOAPPart().getEnvelope();
            SOAPHeader header = envelope.addHeader();

            SOAPFactory soapFactory = SOAPFactory.newInstance();
            Name headerName = soapFactory.createName("ServiceAuthHeader", "", "http://www.interhome.com/webservice");
            SOAPHeaderElement headerElement = header.addHeaderElement(headerName);

            Name username = soapFactory.createName("Username");
            SOAPElement usernameElement = headerElement.addChildElement(username);
            usernameElement.addTextNode("GB1009688");

            Name password = soapFactory.createName("Password");
            SOAPElement passwordElement = headerElement.addChildElement(password);
            passwordElement.addTextNode("verbier");

        } catch (Exception e) {
        }

    }
    return outboundProperty;

}

@Override
public Set getHeaders() {
    return null;
}

@Override
public boolean handleFault(SOAPMessageContext context) {
    return true;
}

@Override
public void close(MessageContext context) {
}
}

package com.la.feed.xml.theservice;

import java.util.*;
import javax.xml.ws.handler.*;

public class HeaderHandlerResolver implements HandlerResolver {

@Override
public List<Handler> getHandlerChain(PortInfo portInfo) {
    List<Handler> handlerChain = new ArrayList<Handler>();

    HeaderHandler hh = new HeaderHandler();

    handlerChain.add(hh);

    return handlerChain;
}
} 
```

它需要一点技巧，但它确实可以完成工作。

# java - ObservableList 如何知道其底层数据发生了变化？

> ID：12492502
> 
> 赞同：0
> 
> 时间：2012-09-19T10:02:28.160
> 
> 标签：java, javafx

给定以下代码示例：

```
private final ObservableList<Person> data =
    FXCollections.observableArrayList(
        new Person("Jacob"),
        new Person("Isabella")   
    );

public static class Person {

    private final SimpleStringProperty firstName;

    private Person(String fName, String lName, String email) {
        this.firstName = new SimpleStringProperty(fName);

    }

    public String getFirstName() {
        return firstName.get();
    }

    public void setFirstName(String fName) {
        firstName.set(fName);
    }
} 
```

（基于[http://docs.oracle.com/javafx/2/ui_controls/table-view.htm#CJABHGAJ](http://docs.oracle.com/javafx/2/ui_controls/table-view.htm#CJABHGAJ)的简化示例）

在这种情况下，ObservableList 怎么知道它的底层数据发生了变化？毕竟 Person 类中的 SimpleStringProperty "firstName" 是私有的，所以 ObservableList 应该不能附加任何类型的侦听器？或者这是通过某种反思完成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:04:28.063

它没有。它只知道列表本身的更改。检查 API。

# zooming - Openlayers 放大或缩小

> ID：12492504
> 
> 赞同：3
> 
> 时间：2012-09-19T10:02:36.807
> 
> 标签：zooming, openlayers, openstreetmap, sproutcore

我对 Openlayers 很陌生，想知道是否有返回缩放方向的方法或事件，例如 onzoomin/onzoomout 事件。我正在使用 sproutcore 1.0 并尝试根据缩放级别修改功能字体。我尝试使用规则，但根据应用程序结构，这不起作用。这是我想要做的示例事件：

```
this.map.events.on({ "zoomend": function (e) {
  var sub = 0;
  if (ZOOMOUT){
    sub = this.getZoom();
  } else {
    sub = this.getZoom() * -1;
  }
  var font = myFeature.layer.styleMap.styles['default'].defaultStyle.fontSize;
  font = font + sub*10;
  myFeature.layer.redraw();
}}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:19:40.277

找到了一种使用几何边界的解决方法，它给出了一个很好的结果：

```
this.map.events.on({ "zoomend": function (e) {
    var width = myFeature.geometry.bounds.right - myFeature.geometry.bounds.left;
    var div = 0;

    if (this.getZoom() > 12) {
        div = 4;
    } else {
        div = 6;
    }
    myFeature.layer.styleMap.styles['default'].defaultStyle.fontSize = (width/((15 - this.getZoom())+1)) / div).toString() + "px"; 
    myFeature.layer.redraw();
}}); 
```

# java - 改进旋转文本的显示

> ID：12492505
> 
> 赞同：5
> 
> 时间：2012-09-19T10:02:45.237
> 
> 标签：java, text, rotation, processing

我有以下代码改编自用于旋转文本的在线示例。该代码工作正常，因为它将文本旋转到正确的角度，但我想知道是否有办法提高旋转文本的准确性和清晰度。在我的显示器上，旋转的文本看起来像是“阶梯式”而不是平滑的。

```
PFont f;
String message = "abcdefghijklmnopqrstuvwxyz";
float theta, x;

void setup() {
  size(800, 200);
  f = createFont("Arial",20,true);
}

void draw() { 
 // background(255);
  fill(0);
  textFont(f);    // Set the font
  translate(x,height/2);  // Translate to the center
  rotate(theta);                // Rotate by theta
  textAlign(LEFT);            
  text(message,0,0);            
  theta += 0.1;                // Increase rotation
  x += textWidth(message);
  if (x>800){noLoop(); }
} 
```

我已经通过示例进行了修改以帮助显示差异。在新代码中，我将文本更改为一串下划线，并用红色绘制了一条参考线。如果它在您的机器上运行相同，您应该会在下划线创建的黑线上看到惊人的效果。

```
String message = "________";
float theta, x;
PFont f;

void setup() {
  size(800, 200);
  f = loadFont("ArialMT-20.vlw");
  smooth();
}

void draw() { 
  fill(0);
  textFont(f);    // Set the font

  translate(x,height/2);  // Translate to the center
  rotate(theta);                // Rotate by theta

  text(message,0,0);

  stroke(255,0,0);
  strokeWeight(2);
  line(0,0,textWidth(message),0);

  theta += 0.1;                // Increase rotation
  x += textWidth(message);
  if (x>800){noLoop(); }
} 
```

对我来说，它提供了以下输出，但我知道如果在 Mac 上运行这会有所不同：

![在此处输入图像描述](../Images/91b90c244feab8374e121f6b5f3b726c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:20:08.520

尝试调整[`RenderingHints`](http://docs.oracle.com/javase/7/docs/api/java/awt/RenderingHints.html)：

*   将[分数指标](http://docs.oracle.com/javase/7/docs/api/java/awt/RenderingHints.html#KEY_FRACTIONALMETRICS)设置为[开启](http://docs.oracle.com/javase/7/docs/api/java/awt/RenderingHints.html#VALUE_FRACTIONALMETRICS_ON)
*   将[文本抗锯齿](http://docs.oracle.com/javase/7/docs/api/java/awt/RenderingHints.html#KEY_TEXT_ANTIALIASING)设置为[开](http://docs.oracle.com/javase/7/docs/api/java/awt/RenderingHints.html#VALUE_TEXT_ANTIALIAS_ON)或与您的显示器匹配的子像素设置
*   将[笔画控制](http://docs.oracle.com/javase/7/docs/api/java/awt/RenderingHints.html#KEY_STROKE_CONTROL)设置为[纯](http://docs.oracle.com/javase/7/docs/api/java/awt/RenderingHints.html#VALUE_STROKE_PURE)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T16:21:38.930

一种方法是在 BufferedImage 中绘制文本（未旋转），然后旋转图像。像这样的东西：

```
BufferedImage buff = getGraphicsConfiguration().createCompatibleImage(textWidth, textHeight); //create an image with the dimensions of the text
Graphics2D g2d = buff.createGraphics();
g2d.drawString(yourText); //draw the text without transformations
g2d.dispose();

//apply the rotation transform to g, the Graphics from your component
g.drawImage(buff, textPosX, textPosY, null); //there you go 
```

# iphone - 如何为 iPhone 应用程序制作形状拼贴？

> ID：12492507
> 
> 赞同：1
> 
> 时间：2012-09-19T10:03:04.990
> 
> 标签：iphone, objective-c, photo

我想要一些特定形状的拼贴画，如心形、星形等……谁能告诉我如何在我的 iPhone 应用程序中使用 Objective c 以编程方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:32:23.383

使用此代码。在这里，图像是从 PhotoLibrary 中挑选出来的，然后使用手势移动、缩放等。我正在使用所有手势来帮助您对放置的任何图像进行几乎任何平移、捏合和旋转。

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{

[picker dismissModalViewControllerAnimated:YES];
imageCollage = [[UIImageView alloc]initWithFrame:CGRectMake(80, 80, 150, 150)];
[imageCollage setUserInteractionEnabled:YES];
imageCollage.image = [info objectForKey:UIImagePickerControllerOriginalImage];

holderView = [[UIView alloc] initWithFrame:CGRectMake(0,0,imageCollage.frame                                                          .size.width, imageCollage.frame.size.height)];
holderView.layer.cornerRadius = 6;
holderView.clipsToBounds = YES;
imageview = [[UIImageView alloc] initWithFrame:[holderView frame]];
[imageview setImage:imageCollage.image];
[holderView addSubview:imageview];

UIPinchGestureRecognizer *pinchRecognizer = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(scale:)];
[pinchRecognizer setDelegate:self];
[holderView addGestureRecognizer:pinchRecognizer];

UIRotationGestureRecognizer *rotationRecognizer = [[UIRotationGestureRecognizer alloc] initWithTarget:self action:@selector(rotate:)];
[rotationRecognizer setDelegate:self];
[holderView addGestureRecognizer:rotationRecognizer];

UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(move:)];
[panRecognizer setMinimumNumberOfTouches:1];
[panRecognizer setMaximumNumberOfTouches:1];
[panRecognizer setDelegate:self];
[holderView addGestureRecognizer:panRecognizer];

DeleteImage = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 30, 30)];
[DeleteImage setImage:[UIImage imageNamed:@"DeleteRed.png"]];
[holderView addSubview:DeleteImage];
DeleteImage.userInteractionEnabled = YES;

UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapped:)];
[tapRecognizer setNumberOfTapsRequired:1];
[tapRecognizer setDelegate:self];
[DeleteImage addGestureRecognizer:tapRecognizer];

[BaseView addSubview:holderView];

[Trash setImage:[UIImage imageNamed:@"12456977871712665073hrum_trash.svg.med.png"] forState:UIControlStateNormal];
}

   -(void)scale:(id)sender
   {
BaseView.clipsToBounds = YES;
[BaseView bringSubviewToFront:[(UIPinchGestureRecognizer*)sender view]];

if([(UIPinchGestureRecognizer*)sender state] == UIGestureRecognizerStateEnded) {

    lastScale = 1.0;
    return;
}   
CGFloat scale = 1.0 - (lastScale - [(UIPinchGestureRecognizer*)sender scale]);

CGAffineTransform currentTransform = [(UIPinchGestureRecognizer*)sender view].transform;
CGAffineTransform newTransform = CGAffineTransformScale(currentTransform, scale, scale);

[[(UIPinchGestureRecognizer*)sender view] setTransform:newTransform];

lastScale = [(UIPinchGestureRecognizer*)sender scale];
  }

  -(void)rotate:(id)sender
  {

[BaseView bringSubviewToFront:[(UIRotationGestureRecognizer*)sender view]];

if([(UIRotationGestureRecognizer*)sender state] == UIGestureRecognizerStateEnded) {

    lastRotation = 0.0;
    return;
}

CGFloat rotation = 0.0 - (lastRotation - [(UIRotationGestureRecognizer*)sender rotation]);

CGAffineTransform currentTransform = [(UIPinchGestureRecognizer*)sender view].transform;
CGAffineTransform newTransform = CGAffineTransformRotate(currentTransform,rotation);

[[(UIRotationGestureRecognizer*)sender view] setTransform:newTransform];

lastRotation = [(UIRotationGestureRecognizer*)sender rotation];
   }

   -(void)move:(id)sender
  {
[[[(UITapGestureRecognizer*)sender view] layer] removeAllAnimations];
BaseView.clipsToBounds = YES;
[BaseView bringSubviewToFront:[(UIPanGestureRecognizer*)sender view]];
CGPoint translatedPoint = [(UIPanGestureRecognizer*)sender translationInView:self.view];

if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateBegan) {

    firstX = [[sender view] center].x;
    firstY = [[sender view] center].y;
}

translatedPoint = CGPointMake(firstX+translatedPoint.x, firstY+translatedPoint.y);

[[sender view] setCenter:translatedPoint];

if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateEnded) {

    CGFloat finalX = translatedPoint.x + (.20*[(UIPanGestureRecognizer*)sender velocityInView:self.view].x);
    CGFloat finalY = translatedPoint.y + (.20*[(UIPanGestureRecognizer*)sender velocityInView:self.view].y);

    if(UIDeviceOrientationIsPortrait([[UIDevice currentDevice] orientation])) {

        if(finalX < 0) {

            finalX = 0;
        }

        else if(finalX > 260) {

            finalX = 260;
        }

        if(finalY < 0) {

            finalY = 0;
        }

        else if(finalY > 416) {

            finalY = 416;
        }
    }

    else {

        if(finalX < 0) {

            finalX = 0;
        }

        else if(finalX > 416) {

            finalX = 260;
        }

        if(finalY < 0) {

            finalY = 0;
        }

        else if(finalY > 260) {

            finalY = 416;
        }
    }

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:.35];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseOut];
    [[sender view] setCenter:CGPointMake(finalX, finalY)];
    [UIView commitAnimations];
}
   }

      -(void)tapped:(UIGestureRecognizer *)recogniser
      {
    NSLog(@"%@",recogniser.view);
    [Trash setImage:[UIImage imageNamed:@"trash_bin_recycle_quit_terminate_error_cancel_close_exit.png"] forState:UIControlStateNormal];

    [[[recogniser view] superview] removeFromSuperview];
}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {

    return ![gestureRecognizer isKindOfClass:[UIPanGestureRecognizer class]];
} 
```

有关鳕鱼的任何疑问，请随时询问:)...快乐编码..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:08:45.887

If you have little experience with Core Graphics and want to programmatically generate those kinds of shapes, I would recommend you use a Mac app called [PaintCode](http://www.paintcodeapp.com/).

You can use it to draw your shapes, and it generates the corresponding Objective-C drawing code.

# c# - FTP 子文件夹列表

> ID：12492512
> 
> 赞同：1
> 
> 时间：2012-09-19T10:03:20.160
> 
> 标签：c#, ftp

我有一个 ftp 路径`ftp://10.23.XX.XX/IN`，在该`IN`文件夹内我还有十个文件夹，它们是`ES`、`US`等`UK`。在 C# 中，我只想读取文件夹名称而不是里面的文件。你能告诉我怎么做吗？

此外，我使用了更多网站，它告诉我去，`GetResponseStream`但我无法找到正确的代码来获取目录。

我尝试使用的代码如下：

```
FtpWebRequest request = (FtpWebRequest)WebRequest.Create("ftp://10.23.xx.xx/IN");
         request.Credentials = new NetworkCredential("ABC", "ABC");
         //request.Method = WebRequestMethods.Ftp.PrintWorkingDirectory.All<request.>;
         // request.Method = WebRequestMethods.Ftp.ListDirectory;
         request.Proxy = null ;
         using (FtpWebResponse response = (FtpWebResponse)request.GetResponse()){} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:19:16.970

如果您想以我曾经这样做的方式使用它：

```
 request.Method = WebRequestMethods.Ftp.ListDirectoryDetails;
    FtpWebResponse response = request.GetResponse() as FtpWebResponse;
    Stream responseStream = response.GetResponseStream();
    StreamReader reader = new StreamReader(responseStream);
    while ((sSource = reader.ReadLine()) != null)
            {something} 
```

但我强烈建议使用 edtFTPnet.dll 之类的 3rd 方库，您可以在其中简单地执行您需要的操作：

```
FTPFile[] elementy = ftpConnection1.GetFileInfos();
foreach (FTPFile elem in elementy)
{
  if (elem.Dir)//true if item is Directory
   {
//something
    }
 } 
```

# javascript - 如何访问路径元素的高度和宽度？

> ID：12492514
> 
> 赞同：1
> 
> 时间：2012-09-19T10:03:27.337
> 
> 标签：javascript, jquery, svg

我有一个 svg 路径元素。我想访问路径元素的高度、宽度、x 和 y，并且在更改它之后想要将其设置回来

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
  <path d="M150 0 L75 200 L225 200 Z" />
</svg> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:22:35.203

您可以通过调用 getBBox() 来获取边界框，因此为路径提供一个 id 属性，例如 id="path1" 然后在脚本中写入

var bbox = document.getElementById("path1").getBBox();

bbox 将具有 x、y、width 和 height 属性，但您不能直接更改它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-28T16:42:00.420

因为我是生活片段的粉丝：

```
var bbox = document.getElementById("path1").getBBox();

console.log(bbox);
```

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
  <path d="M150 0 L75 200 L225 200 Z" id="path1"/>
</svg>
```

# c# - 接受输入/返回的文本框

> ID：12492515
> 
> 赞同：2
> 
> 时间：2012-09-19T10:03:31.483
> 
> 标签：c#, winforms

我有下面的代码，允许用户写入可执行文件（即notepad.exe），然后单击开始按钮它将启动该过程。

但是，如何让文本框接受回车键？我投入了，`AcceptsReturn=true`但它什么也没做。我还在 Visual Studio 中设置了该属性`Accept Return = True`- 仍然没有。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Diagnostics;

namespace process_list
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

       private void button1_Click(object sender, EventArgs e)
        {

            string text = textBox1.Text;
            Process process = new Process();
            process.StartInfo.FileName = text;
            process.Start();

        }

       private void textBox1_TextChanged(object sender, EventArgs e)
       {
           textBox1.AcceptsReturn = true;
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T10:08:14.150

将[`AcceptButton`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.acceptbutton.aspx)表单设置为您的按钮。那你就不需要了`AcceptsReturn`，因为`Enter`会自动触发按钮。

```
public Form1()
{
    InitializeComponent();
    this.AcceptButton = button1;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-19T10:12:52.330

将 keydown 事件方法添加到 textBox1 并在方法内部执行此操作

```
private void textBox1_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Enter)
            button1_Click(sender, e);
    } 
```

# c++ - Visual Studio 强制在项目的所有编译单元中包含预编译的头文件？

> ID：12492517
> 
> 赞同：5
> 
> 时间：2012-09-19T10:03:34.453
> 
> 标签：c++, visual-studio-2008, compiler-construction, linker, precompiled-headers

编译器在编译源（例如`*.cpp`）文件时，它会创建目标文件（例如`*.o`），以便稍后将它链接到其他`.o`和`.so`（`.lib`Windows 的文件）文件并构成可执行文件。

现在对于每次创建一些[.pch 文件](http://en.wikipedia.org/wiki/Precompiled_header)时不编译头文件的类比情况，以便随后由链接器链接它。

现在，如果在 Visula Studio 项目的范围内定义了预编译的头文件，那么为什么 Visual Studio 会报错（例如`**fatal error C1010: unexpected end of file while looking for precompiled header. Did you forget to add '#include "stdafx.h"' to your source?**`）头文件未包含在 .cpp 文件中。

通过总结，这是我的问题：

1.  为什么在每个 .cpp 文件中都需要项目的预编译头文件？
2.  每个编译单元中存在预编译头的要求如何优化编译过程？换句话说，这个要求有什么好处？（可能由用户决定在哪里包含，在哪里不包含！）
3.  如果预编译的头文件包含在一个.cpp文件中，它只使用了.pch文件中的2%，那么剩余的98%将添加到相应的.o文件中吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-19T10:14:38.413

> 为什么在每个 .cpp 文件中都需要项目的预编译头文件？

因为你要求的。如果您不想使用它，则需要更改 .cpp 文件的选项。右键单击它，属性，C/C++，预编译头文件，“创建/使用”=“不使用预编译头文件”。默认设置为“使用”。这样做没有什么意义。

> 每个编译单元中的预编译头如何优化编译过程？

通过不必解析#includes。当你特别有用`#include <windows.h>`。在包含数百个 .cpp 文件的大型项目中，节省的时间以秒为单位，加起来长达几分钟。这是迄今为止在不损失生成代码质量的情况下加速编译器的最便宜的方法。

> 那么剩下的98%会被添加到对应的.o文件中去吗？

当然不是。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T10:12:10.033

1.  It's not actually necessary to include the precompiled header in every compilation unit. You can set the "not using precompiled header" setting for a single file in the C/C++->Precompiled Headers properties section for that file. This is a lot of work though, and I've never known anyone to do it in production code.
2.  The optimization is that the precompiled header is built just once and the whole shebang is reused for all compilation units without recompiling / re-including (sort of). If you have a set of files that are included a lot of times this can save much compilation time. See [The Care And Feeding of Precompiled Headers](http://gamesfromwithin.com/the-care-and-feeding-of-pre-compiled-headers) too.
3.  No, you don't get superfluous file contents, just like you don't when static-linking.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T10:22:52.900

1.  我猜你的问题是“为什么编译器不能假设这个头文件总是存在的，如果它是强制性的”。原因是VS不想这么偏离标准。如果您的 .cpp 文件正在使用头文件中的某些内容，则它必须包含它。这样，即使您关闭预编译头文件，您的文件也将完全一样地编译（只是需要更长的时间）。
2.  正如其他人所说，如果需要，您可以显式禁用单个文件的预编译头文件。这个想法是你应该只在预编译的头文件中包含你在大多数文件中使用的那些元素，如果不是所有文件的话。
3.  不，无论是否预编译了标头，生成的目标代码都应该是相同的。

# android - android 4.1.1 无法识别短信 uri 到 NFC TAG

> ID：12492519
> 
> 赞同：0
> 
> 时间：2012-09-19T10:03:37.327
> 
> 标签：android, sms, nfc

我用 sms uri 对标签进行编码：sms:067888?body=hello

此 uri 可被商店中的各种应用程序正确识别，但不会作为 SMS 应用程序的默认操作启动。

如果我使用 android 2.3.4 下的设备，短信 uri 打开短信应用程序。

（我尝试使用各种应用程序用短信 uri 对我的标签进行编码，没有一个允许使用 android 4.1.1 打开短信应用程序）

有没有人知道或找到一种解决方案来为 android 4.1 正确编码 sms uri？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:06:11.807

Android 4.1.1 上的行为与 2.3.6 相比没有变化。在这两种情况下，都会显示“标签”应用程序（或其在 ICS 和 JB 中的残余），允许您启动消息传递应用程序。因此，在这两种情况下，消息应用程序都不会自动启动。

NXP 的应用程序 NFC TagWriter 允许您创建 SMS URI 消息。它的首选项中还有一个设置，称为“点击启动”，除其他外，它允许您自动启动消息传递应用程序。

# c# - 如何将存储过程文件传输到 XML 目录

> ID：12492520
> 
> 赞同：1
> 
> 时间：2012-09-19T10:03:46.100
> 
> 标签：c#, xml, visual-studio, stored-procedures, visual-studio-2012

我正在尝试找出如何使用 c# 将我的存储过程（每次在 Microsoft Visual Studio Express 2012 for Windows Desktop 中调试它时在控制台中打印出 XML 文件）传输到目录文件夹中。如果它有足够的帮助，这里有一个示例代码来澄清我的陈述：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.IO;
using System.Data;
using System.Data.SqlClient;
using System.Configuration;
using System.Xml;

namespace Web_Collage_feed
{
   public class CreateDirectory
   {
    static void Main(string[] args)
    { 
     SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["connect"].ConnectionString);
     Jack.Data.Sql work = new Jack.Data.Sql(con);
     con.Open();

     SqlCommand com = new SqlCommand();
     com.CommandType = CommandType.StoredProcedure;

     DataSet data = work.ExecuteProcedureQuery("dbo.FEED_WebCollage", com);
     string productXml = data.Tables[0].Rows[0][0].ToString();
     Console.WriteLine(productXml);
    }
   }
} 
```

上面的所有代码都允许我在包含 XML 内容的控制台窗口中打开**productXML 。**我要做的是使用 c# 编程技术在文件中打开该 XML（将该文件存储在目录文件夹中）。

我愿意接受各种帮助和建议（将不胜感激），如果您有任何问题想问，请告诉我，我会尽快回复并可能编辑我原来的问题。感谢您阅读这篇文章。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:58:06.443

你可能会以错误的方式解决这个问题。DataSet 类具有允许您读取和写入 XML 的方法。例如保存数据集：

```
 using(var writer = new StreamWriter("path", false))
        {
            data.WriteXml(writer);
        } 
```

相反，从文件中将 XML 读入数据集。

```
 var dataSetFromFile = new DataSet();
        using(var reader = new StreamReader("path"))
        {
            dataSetFromFile.ReadXml(reader);
        } 
```

如果您只是为字符串而不是数据集读取和写入 XML，请查看 MSDN 上的此页面：http: [//msdn.microsoft.com/en-us/library/2bcctyt8.aspx](http://msdn.microsoft.com/en-us/library/2bcctyt8.aspx)

**使用 XMLReader 读取 XML**和**使用 XMLWriter 写入 XML**是最有帮助的两个页面。

# java - 验证具有多个 xsd 模式 DOM java 的 xml

> ID：12492530
> 
> 赞同：1
> 
> 时间：2012-09-19T10:04:43.930
> 
> 标签：java, xml, dom, xsd-validation

在互联网和不同的论坛上搜索后，还没有找到我的答案。
我有一个由两个 XSD 架构定义的 XML 文件。
对于写 XML 文件，有两种写 XML 文件的方法：（
我必须删除“<”字符才能显示 XML 文件）
第一种写方法：

```
?xml version="1.0" encoding="UTF-8" standalone="yes"?>
Policy xmlns="http://www.W3C.com/Policy/v3#"  xmlns:ns2="http://www.W3C.com   /PolicyExtension/v3#">
DigestAlg Algorithm="http://test"/>
Transforms>
Transform Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n20010315"></Transform>
/Transforms>
     ns2:Validation>
         ns2:ConditionID>1.0.1</ns2:ConditionID>
         ns2:TConditionID>1.0.2</ns2:TConditionID>
      /ns2:Validation>
/Policy>" 
```

第二种方法：

```
?xml version="1.0" encoding="UTF-8" standalone="yes"?>
Policy xmlns="http://www.W3C.com/Policy/v3#">
DigestAlg Algorithm="http://test"/>
Transforms>
Transform Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n20010315"></Transform>
/Transforms>
     Validation xmlns:ns2="http://www.W3C.com/PolicyExtension/v3#">
         ConditionID>1.0.1</ns2:ConditionID>
         TConditionID>1.0.2</ns2:TConditionID>
      /Validation>
/Policy> 
```

为了解析我的 XML 文件，我使用：

```
InputStream doc = new FileInputStream(myXMLFile);
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    SchemaFactory sf =     SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
    List<Source> sourceListSchema = new ArrayList<Source>();
    sourceListSchema.add(new StreamSource(SignaturePolicy.class.getResourceAsStream(MY_XSD_SCHEMA_1)));
    sourceListSchema.add(new StreamSource(SignaturePolicy.class.getResourceAsStream(MY_XSD_SCHEMA_2)));

    Schema schema;
    try {
        Source[] sourceTmp = new Source[1];
        schema = sf.newSchema(sourceListSchema.toArray(sourceTmp));
    } catch (SAXException e) {
        LogMachine.logger.severe(
                "SAXException : The schema can not be parse :"+e.getMessage());
    }

    dbf.setIgnoringElementContentWhitespace(true);
    dbf.setNamespaceAware(true);
    dbf.setIgnoringComments(true);
    dbf.setSchema(schema);

    DocumentBuilder db;
    try {
        db = dbf.newDocumentBuilder();
        documentPolicy = db.parse(Doc); 
    } catch (ParserConfigurationException e) {
        LogMachine.logger.severe(
                "ParserConfigurationException : the file can not be parse by DOM :"+e.getMessage());
    } catch (SAXException e) {
        LogMachine.logger.severe(
                "SAXException : the file can not be parse by DOM :"+e.getMessage());
    } catch (IOException e) {
        LogMachine.logger.severe(
                "IOException : the file can not be open like a file :"+e.getMessage());
    } 
```

当我想用 DOM 解析这个文档时，第一个 XML 文件显示错误

线程“main”org.w3c.dom.ls.LSException 中的异常：元素“ns2:Validation”的前缀“ns2”未绑定。

但是第二个 XML 文件很好解析。

有人可以帮我解析这两个文件吗？？
谢谢你的帮助

# android - android - 进度条未正确关闭

> ID：12492533
> 
> 赞同：0
> 
> 时间：2012-09-19T10:04:51.903
> 
> 标签：android, thread-safety

在`OnResume()`，我在这里的线程中进行 Web 服务调用，我使用进度条来指示它工作正常的过程，但假设我使用该应用程序后一段时间我让设备空闲，然后再次打开应用程序，这次进度条不会被关闭。它是不经常发生有时会发生。为什么？
我怎样才能让它远离这个？如果您需要更多信息，请告诉我。

**代码 ：**

**编辑：**

```
public void onResume()
{

    super.onResume();
    pdMessages = ProgressDialog.show(getParent(), "", "Please wait...", true);
            Thread thImportbtn = new Thread() 
            {
                public void run() 
                {
                    try
                    {
                        //Get internal messages
                        strInternalInboxWSR = GetInternalInboxMessages();

                    } catch (SoapFault e) {
                        e.printStackTrace();
                    }   

                    dh_Messages_Handler.post(checked_internalinbox_response);
                    handler.sendMessage(handler.obtainMessage());
                }                                               
            };
            thImportbtn.start();       
} 
```

私人处理程序处理程序=新处理程序（）{

```
@Override
public void handleMessage ( Message message )
{
    pdMessages.dismiss();
} 
```

};

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:13:22.817

您可以使用处理程序类来关闭您的 ProgressDialog，如下所示

```
private Handler handler = new Handler()
{
    @Override
    public void handleMessage ( Message message )
    {
        progressDialog.dismiss();
    }
}; 
```

您可以使用以下语句调用 Handler 类，

```
handler.sendMessage(handler.obtainMessage()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:14:41.997

你是`Trying To Dismiss ProgressDialog in Non-UI Thread,`所以不能解雇正确的。

你应该把你的解雇代码（`pdMessages.dismiss();`）放在处理程序中使用覆盖`handleMessage method`

使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)更好。

# python - 使用 python urllib2 选择单选按钮

> ID：12492536
> 
> 赞同：1
> 
> 时间：2012-09-19T10:05:01.897
> 
> 标签：python, radio-button, urllib2

我正在尝试使用 python urllib2 从此表单中选择一个单选按钮并通过按钮提交表单：

```
<div id="show-form2" class="show-form2">
<input type="radio" name="2" value="21"/>
OPTION 
<br/>
<input type="radio" name="2" value="22"/>
OPTION 
<br/>
<input type="radio" name="2" value="23"/>
OPTION 
<br/>
<input type="radio" name="2" value="24"/>
OPTION 
<br/>
<input type="radio" name="2" value="25"/>
OPTION 
<br/>
<input type="radio" name="2" value="26"/>
OPTION 
<br/>
<input type="radio" name="2" value="27"/>
OPTION 
<br/>
<input type="radio" name="2" value="28"/>
OPTION 
<br/>
<input type="radio" name="2" value="29"/>
OPTION 
<br/>
<input type="radio" name="2" value="30"/>
OPTION 
<br/>
<input type="radio" name="2" value="31"/>
OPTION 
<br/>
<input type="radio" name="2" value="32"/>
OPTION 
<br/>
<input type="radio" name="2" value="33"/>
OPTION 
<br/>
<input type="radio" name="2" value="34"/>
OPTION 
<br/>
<input type="radio" name="2" value="35"/>
OPTION 
<br/>
<input type="radio" name="2" value="36"/>
OPTION 
<br/>
<input type="radio" name="2" value="37"/>
OPTION 
<br/>
<input type="radio" name="2" value="38"/>
OPTION 
<br/>
<input type="radio" name="2" value="39"/>
OPTION 
<br/>
<input type="radio" name="2" value="40"/>
OPTION 
<br/> 
```

我在这个任务中有点迷失，我找到的信息与使用机械化有关。有没有办法用 python 标准库完成这项工作？

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:21:54.070

您不会使用 urllib2“选择”东西，因为它与浏览器没有任何关系。相反，您需要构建将由表单发送的数据，然后直接发布：

```
import urllib, urllib2
data = urllib.urlencode({'2': '22'}) # assume you want to select the value "22"
request = urllib2.Request(my_url, data)
result = urllib2.urlopen(request)
print result.read() 
```

如果还有其他字段，您可以将它们添加到您传递给的字典中`urlencode`。

# xslt - xsl中的测试变量字符串

> ID：12492543
> 
> 赞同：3
> 
> 时间：2012-09-19T10:05:30.907
> 
> 标签：xslt

我正在尝试测试变量值是否等于某个字符串

```
 <xsl:if test="$str1='rtl'"> 
```

我确定 $str1 的值是 'rtl' 但测试返回 false .. 我该去哪里穿？

谢谢

**编辑：**

好吧，问题是变量值是'[[dir]]'并且在这个xsl文件上运行的另一个（旧）代码将所有这些字符串替换为'rtl'或'ltr'所以值是' rtl' 但仅在测试之后... :) / :(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T12:27:55.353

调试它的一个好方法是

```
<xsl:value-of select="concat($strl, ' =? ','rtl')"/>
<xsl:if test="$str1 = 'rtl'>True</xsl:if> 
```

并检查结果。

# css - CSS：过滤器在 IE8 中看起来很乱

> ID：12492546
> 
> 赞同：0
> 
> 时间：2012-09-19T10:05:50.983
> 
> 标签：css, internet-explorer-8, filter

我正在尝试实现这种效果，即图像是灰度的，但在悬停时它应该是彩色的。*基本上它可以工作，但在 IE8 中，它会在一些*图像（但不是全部）周围显示一个奇怪的黑色边框。

这是一个[演示页](https://dl.dropbox.com/u/8840372/greyscale-hover.html)。

所以你可以在 VentureBeat 的标志上看到它看起来和预期的一样，但是 openWebasia 的标志是乱七八糟的。在我看来，图像有问题，但我不知道是什么。这是[IE8 中页面的屏幕截图](https://dl.dropbox.com/u/8840372/states.png)。

有人知道为什么会这样吗？

编辑：第一个标志的过渡也有点混乱。看来真的是图有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T02:11:49.850

好吧，我已经用 Photoshop 再次导出了透明的 PNG，现在它们似乎没问题。知道问题出在哪里还是很有趣的……

# spring - 如何从自定义 java 组件中的上下文属性占位符标记中获取属性

> ID：12492547
> 
> 赞同：2
> 
> 时间：2012-09-19T10:05:50.080
> 
> 标签：spring, mule

我有定义的骡子配置

```
<context:property-placeholder location="classpath:/mule-sw.properties"/> 
```

而且我还有一个 Java 中的自定义组件类，它在我的一个字段上使用 @Lookup 注释

```
@Lookup("file-path")
private String path; 
```

考虑到我的“mule-sw.properties”是这样的

```
file-path=C:/hello.txt 
```

启动 Mule 应用程序后，我总是得到 Deploy Exception

```
org.mule.api.expression.RequiredValueException: "Required object not found in registry of Type "class java.lang.String" with name "file-path" on object "class component.CustomComponent" 
```

我还尝试用 @Lookup("${file-path}") 更改 @Lookup("file-path") ，但没有成功。

谁能给我一个更好的解决方案？任何帮助都将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T11:02:34.467

@Lookup 注释旨在[从注册表中检索对象](http://www.mulesoft.org/documentation/display/MULE3USER/Lookup+Annotation)，而您要做的是将值分配给自定义组件的属性。

有两种方法可以做到这一点：

1）通过属性注入，即你声明你的组件如下：

```
<custom-component class="org.myCompany.CustomComponent">
    <property name="file-path" value="${file-path}" />
</custom-component> 
```

2）通过Spring EL支持和@Value注解，即你用以下方式注解你的属性

```
@Value("${file-path}")
private String path; 
```

我推荐第一种方法，因为从流程的角度来看它更容易维护

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T21:54:34.007

```
@Value("#{'${file-path}'}")
private String path; 
```

试一试。我认为您需要将其包装在 EL 块中 #{} 才能正确识别。

# javascript - 下载在画布上绘制的图像时出现问题

> ID：12492550
> 
> 赞同：1
> 
> 时间：2012-09-19T10:06:03.923
> 
> 标签：javascript, html, canvas

**Javascript代码：**

```
window.onload = function () {
var canvas=document.getElementById("can");
var img=canvas.toDataURL("image/png");
var button = document.getElementById('saveImage');

    img.src = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUA'+
                'AAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO'+
               '9TXL0Y4OHwAAAABJRU5ErkJggg==';
    button.onclick = function () {
    window.location.href = img.replace("image/png", "image/octet-stream");
    window.location.href = prev;
             };
     }; 
```

**HTML：**

```
<canvas id="can" width="500" height="200"></canvas><br />
<input type="button" value="Done" id="saveImage"> 
```

我可以在画布上的 div 上显示图像，但是当我尝试使用上面的 javascript 函数下载它时，它会下载空白图像。我想知道如何从画布上绘制图片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:09:21.913

Try looking here: [http://www.html5canvastutorials.com/advanced/html5-canvas-save-drawing-as-an-image/](http://www.html5canvastutorials.com/advanced/html5-canvas-save-drawing-as-an-image/)

The biggest problem you're likely to face is that you can only save the image on the same server as the page which has the canvas element. You'll then have to retrieve that saved image (either server or client side) and prompt the user to save it.

EDIT:

Maybe this would be better, though you need a little bit of server-side code: [http://greenethumb.com/article/1429/user-friendly-image-saving-from-the-canvas/](http://greenethumb.com/article/1429/user-friendly-image-saving-from-the-canvas/)

# java - java静态同步方法

> ID：12492553
> 
> 赞同：3
> 
> 时间：2012-09-19T10:06:13.027
> 
> 标签：java, multithreading, static, synchronized

当两个线程同时使用不同的实例调用静态同步方法时会发生什么？是否可以？对象锁用于非静态同步方法，但什么类型的锁用于静态同步方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T10:10:05.300

这与在实现该方法的对象上同步是一样`Class`的，所以是的，这是可能的，是的，该机制有效地忽略了调用该方法的实例：

```
class Foo {
    private static synchronized doSomething() {
        // Synchronized code
    }
} 
```

是写这个的捷径：

```
class Foo {
    private static doSomething() {
        synchronized(Foo.class) {
            // Synchronized code
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-19T10:10:11.140

有可能的。

线程锁定`Class`类的对象，例如 on `MyClass.class`。

参见[JLS，第 8.4.3.6 节。同步方法](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.3.6)：

> **8.4.3.6。同步方法**
> 
> 同步方法在执行之前获取监视器（第 17.1 节）。
> 
> 对于类（静态）方法，使用与方法类的 Class 对象关联的监视器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T10:11:41.300

静态同步方法对 java.lang.Class 类型的实例使用锁。也就是说，每个可访问类在运行时由一个 Class 类型的对象表示，并且该对象由静态同步方法使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-20T07:36:33.363

使用静态锁时，对象会被忽略。锁是在类而不是对象上获得的。

# c# - 检查javascript的完整性，用户代码=服务器代码

> ID：12492554
> 
> 赞同：3
> 
> 时间：2012-09-19T10:06:25.680
> 
> 标签：c#, javascript, jquery, security, integrity

有没有办法验证用户在使用客户端页面期间使用 Firebug 更改了 jQuery/JavaScript？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T10:07:44.017

不，没有办法验证这一点。

当涉及到来自浏览器的输入时，您应该*始终*进行验证和确认。[永远不要相信客户](http://en.wikipedia.org/wiki/Defensive_programming)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T10:07:47.393

不，客户端从根本上说是不安全的，属于用户，而不是你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T16:21:40.600

简短的回答没关系。
长答案：
如果您将 JavaScript 视为应用程序结构的一部分，这很重要，类似于 SQL 注入攻击如何对您的系统造成不良影响。您应该验证从客户端传递的任何内容在存储之前都经过了清理。这里有趣的攻击向量是如果你允许我将元素持久化到网页结构中并在以后检索它们。你打开了反射 XSS 攻击的大门（我的最爱之一）。这表明未能清理用户输入和/或未能将关注点 UI 从系统级代码中分离出来。

# javascript - 程序中的锁屏

> ID：12492556
> 
> 赞同：2
> 
> 时间：2012-09-19T10:06:31.250
> 
> 标签：javascript, android, ios, cordova, blackberry

实际上的问题是：我自己不知道该怎么做，我不知道在谷歌中寻找什么来了解如何做到这一点我问你，亲爱的社区！

附屏幕：

![](../Images/55666ddf49788f1754785aa960605198.png)

它如何保留得分圈，以及下一组，它只有在他们进入一个程序后才能启动它的可能性？

我已经做了一些，[**DEMO**](http://jsfiddle.net/Deonis/sFPG8/1/)，但我需要做拖动棒，因为我不知道

```
var codeBut = $('#code_block td div').addClass('common_class');
var res = $('#res');
var uname = $('#uname');
var codeArr = [];

Array.prototype.remove=function(s){
    for (i=0; i < this.length; i++){
        if (s == this[i]){
            this.splice(i, 1);
            --i;
        }
    }
};

codeBut.click(function(){
    $(this).toggleClass('choiced');
    if($(this).hasClass('choiced')){
        codeArr.push($(this).text());
    } else {
        codeArr.remove($(this).text());
    }
    res.text(codeArr.join(''));
    if(res.text() === ''){
        res.rext('');
    }
});

function clearInfo(){
    uname.val('');
    codeBut.removeClass('choiced');
    codeArr = [];
    res.text('');
}

$('#reg').click(function(){
    var userName = $.trim(uname.val());
    var userPass = $.trim(codeArr.join(''));
    if(!localStorage.getItem(userName)){
        if(userName !== '' && userPass !== '') {
            localStorage.setItem(userName, userPass);        
        } else {
            alert('Имя или пароль не введены!');
        }
    } else {
        alert('Это имя уже используется!');
    }
    clearInfo();
});
$('#login').click(function(){
    var userName = $.trim(uname.val());
    var userPass = $.trim(codeArr.join(''));
    var curPass = localStorage.getItem(userName);
    if(curPass != null){
        if(curPass == userPass) {
            localStorage.setItem(userName, userPass);
            alert('Ух, ты! Здарофф ' + userName + '! Пиво будешь?');
            clearInfo();
        } else {
            alert('Парольчик корректный введите, плиззз!!!');
        }
    } else {
        alert('Юзверя с таким именем - нет!');
        clearInfo();
    }
});
//localStorage.clear(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T01:35:36.847

codeplex 有一个项目在 javascript 中实现了该功能：http: [//9dotpatternlock.codeplex.com/](http://9dotpatternlock.codeplex.com/)

# jquery - 在事件上重新生成随机数

> ID：12492557
> 
> 赞同：1
> 
> 时间：2012-09-19T10:06:31.723
> 
> 标签：jquery, random

```
$(document).ready(function() {
  var randomRed = Math.floor(Math.random() * 255);
  var randomGreen = Math.floor(Math.random() * 255);
  var randomBlue = Math.floor(Math.random() * 255);
  $('p').mouseover(function() {
      $('p').css('color', 'rgb(' + randomGreen + ',' + randomBlue + ',' + randomRed + ')');
  });
  $('p').mouseout(function() {
      $('p').css('color', 'black');
  });
});​ 
```

我有上面的代码，它在鼠标悬停时生成随机颜色，然后在鼠标悬停时将其返回为黑色，效果很好。但是，它会在每次鼠标悬停时生成相同的随机颜色。

如何使它在每个鼠标悬停事件上生成**不同的随机颜色？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:09:04.237

这是因为您只在文档加载而不是悬停事件时生成颜色：

```
$(document).ready(function() {
    $('p').mouseover(function() {
        var randomRed = Math.floor(Math.random() * 255);
        var randomGreen = Math.floor(Math.random() * 255);
        var randomBlue = Math.floor(Math.random() * 255);
        $('p').css('color', 'rgb(' + randomGreen + ',' + randomBlue + ',' + randomRed + ')');
    });
    $('p').mouseout(function() {
        $('p').css('color', 'black');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:09:25.003

只需将数字生成声明为​​函数并在您的事件中调用它：

```
$(document).ready(function() {
    function randomNumber(){
        return  Math.floor(Math.random() * 255)
    }

    $('p').mouseover(function() {
        $('p').css('color', 'rgb(' + randomNumber()+ ',' + randomNumber()+ ',' + randomNumber()+ ')');
    });
    $('p').mouseout(function() {
        $('p').css('color', 'black');
    });
}); 
```

您还可以使用 .hover() 简化事件定义：http: [//api.jquery.com/hover/](http://api.jquery.com/hover/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T10:10:55.920

像这样试试

```
$(document).ready(function() {
function randomNumber(){
return  Math.floor(Math.random() * 255)
}

$('p').mouseover(function() {
    $('p').css('color', 'rgb(' + randomNumber()+ ',' + randomNumber()+ ',' +     randomNumber()+ ')');
});
$('p').mouseout(function() {
      $('p').css('color', 'black');
    });
}); 
```

# java - 桌面客户端 Web 服务器通信

> ID：12492558
> 
> 赞同：1
> 
> 时间：2012-09-19T10:06:33.713
> 
> 标签：java, servlets, webserver, client-server, protocolexception

我正在做客户端服务器通信。我通过`URLConnection`课程得到了联系。

现在我正在尝试将登录信息发送到服务器，服务器将检查信息是否正确，否则它将要求我再次登录，对于这种情况，我们假设登录不成功。但是当我再次尝试发送登录信息时得到服务器的响应后，我得到了

```
java.net.ProtocolException: Cannot write output after reading input. 
```

这是我的代码：

```
URL url = new URL(uniRL);

java.net.URLConnection connection = url.openConnection();
connection.setAllowUserInteraction(true);
connection.setDoOutput(true);

while(true){
    System.out.println("Enter 1-login , 2-Exit");
useroption = input.nextLine();
numOption = Integer.parseInt(useroption);
if( numOption == 1){
    OutputStreamWriter writer = new OutputStreamWriter(
            connection.getOutputStream());
    user_login = login();
    writer.write(user_login[0]+"@");
    writer.write(user_login[1]);
    writer.flush();
    //out.close();
    BufferedReader in = new BufferedReader(
            new InputStreamReader(
                    connection.getInputStream()));
    while ((tempString = in.readLine()) != null) {
        decodedString = tempString;
        //System.out.println(decodedString);
        //System.out.println(decodedString.equalsIgnoreCase("unknown user"));
    }
    in.close();
    if((decodedString.equalsIgnoreCase("unknown user"))){continue;}
    else{break;}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:10:41.353

When you call `in.close()`, you're actually closing the stream used by the URL connection. You'd need to call `url.openConnection()` again to re-open the stream...

# ruby-on-rails - 如何从 RVM Ruby on Rails 中删除宝石？

> ID：12492559
> 
> 赞同：2
> 
> 时间：2012-09-19T10:06:34.540
> 
> 标签：ruby-on-rails, gem

我想删除我的 rails 应用程序上的所有 gem，因为我知道有些 gem 不用于我的应用程序。

从终端：

```
gem list 
```

如何从我的宝石列表中删除这些宝石？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:08:26.210

如果您使用的是 rvm，请在终端中输入：

```
rvm gemset empty 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T10:08:58.690

`gem uninstall yourgem`. `gem --help`为您准备更多

# php - PHP-SDK 应用程序访问令牌和使用 oauth/access_token 生成的应用程序访问令牌有什么区别

> ID：12492564
> 
> 赞同：0
> 
> 时间：2012-09-19T10:06:52.887
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk, facebook-oauth

新的 Facebook PHP-SDK 有一个 getApplicationAccessToken 方法，它是你的 [appID]|[appSecret] 之间的连接。我通常使用带有此 URL [https://graph.facebook.com/oauth/access_token](https://graph.facebook.com/oauth/access_token)的图形请求，结果与第一个值不同。两个访问令牌都可以使用此请求访问应用程序详细信息 https://graph.facebook.com/[appID]

那么应该使用哪个？？？，这让我很困惑，我宁愿使用第一个，因为它不必发出图形请求，但我可以这样做还是应该这样做？？？

# jquery - 下拉按钮式快捷菜单

> ID：12492565
> 
> 赞同：-1
> 
> 时间：2012-09-19T10:06:57.637
> 
> 标签：jquery, css, facebook, menu, gmail

我基本上是在寻找这个：http: [//jsfiddle.net/nickbabcock/EA6LS/3/](http://jsfiddle.net/nickbabcock/EA6LS/3/)

另一个例子，但它不是悬停菜单：[http ://www.9lessons.info/2012/06/simple-drop-down-menu-with-jquery-and.html](http://www.9lessons.info/2012/06/simple-drop-down-menu-with-jquery-and.html)

但我不知道它叫什么来获得更多此类菜单的示例。当您将鼠标悬停在状态更新中的人名上时，它就像 facebook“更多用户信息”菜单

也类似于右上角的 facebook 用户菜单，您可以在其中访问您的帐户信息/注销。

或 gmail 复选框菜单。

我正在寻找可以选择鼠标悬停和/或单击以激活菜单的东西。有些可以满足具有自动宽度的图像和列表！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:07:52.023

这些中的任何一个都可以根据您的需要进行配置：

[http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/) - [http://ivaynberg.github.com/select2/#basics](http://ivaynberg.github.com/select2/#basics)

这个看起来像您正在寻找的东西，但需要一些额外的调整以允许悬停。 [http://designwithpc.com/Plugins/ddSlick#demo](http://designwithpc.com/Plugins/ddSlick#demo)

# java - Mockito：如何获取参数的状态

> ID：12492566
> 
> 赞同：0
> 
> 时间：2012-09-19T10:07:03.057
> 
> 标签：java, unit-testing, mockito

场景是我正在尝试验证域对象并将验证消息存储在另一个对象中。该类`Validator`和方法如下所示：

```
public void validate (Domain domain, ValidationInfo info) 
```

该`ValidationInfo`对象具有：

```
List<String> messages = new ArrayList<String> messages () 
```

该类`Validator`是从服务类调用的。无论域对象的验证失败，失败消息都将存储在`ValidationInfo`类的列表中。

在一个测试用例的服务测试类中，我编写了以下代码来测试验证失败：

```
@Test
public void testvalidation () throws Exception { 
    Domain domain = createDomainWithInvalidData();
    service.create (domain);
    verify(mockValidator).validate(domain, validationInfo);
    assertFalse (validationInfo.getMessages().isEmpty()); 
```

现在我想要的是从`validationInfo`对象中获取失败消息，以便我可以基于它编写一些断言。但它不起作用。

任何人都可以对此有所了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:28:10.280

在折断了几个小时后，我能够实现我想要的。

我们需要做的是使用`doAnswer`mockito。请在以下代码段中找到：

```
doAnswer(new Answer<ValidationInfo> () {
  @Override
  public ValidationInfo answer (InvocationOnMock invocationOnMock) throws Throwable {
     Object [] args = invocationOnMock.getArguments();
     ValidationInfo vi = (ValidationInfo) args [1];
     vi.getMessages.add("some message");
     return vi;
}}).when(validator).validate (domain, validationInfo); 
```

通过这种方式，我能够将自定义失败消息放入列表中，从而使服务中的验证失败；这是测试的全部目的。

之前测试没有通过，因为在服务代码中检查了列表的大小。并且列表大小始终为零，因为`verify`只会验证方法是否被调用，但实际上不会改变对象的状态。

希望这可以帮助。如果有更好的方法来实现这一点，请发表评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:57:00.730

根据我收集到的信息，您正在对**`service`**.

实际上，获取消息是没有意义的，`validationInfo`因为它被传递给**Mockito 模拟**方法，除非您编写存根（） ，否则根据定义该方法**什么都不做。**`given(...).willReturn(...)`即使您的代码示例中的最后一个断言也不是必需的，因为validationInfo 不会被`validate`.

Mockito 旨在测试协作者之间的交互，这已经通过您的验证完成`verify(...)`，因为您正在测试服务以及他与`Validator`.

测试写入的消息`ValidationInfo`与范围无关`service`

但是，您想要的是对 进行单元测试**`Validator`**，您应该在其中为验证消息编写特定的测试。`ValidationInfo`请看下面的片段，我在其中想象了API的某些部分：

```
public class ValidatorTest {

    Validator validator = new Validator(); // not a mock

    @Test
    public void when_<some_part_of_the_domain>_is_incorrect_report_validation_error() throws Exception { 
        // given
        Domain domain = createDomainWithInvalidData();

        // when
        validator.validate(domain, validationInfo);

        // then
        assertThat(validationInfo.getMessages()).isNotEmpty()); // not really necessary
        assertThat(validationInfo.getLastMessage().text()).contains("<some_part_of_the_domain> is wrong");
    }
} 
```

请注意，我使用了**BDD**关键字（given、when、then）来帮助我编写测试。Alos 我使用了 FestAssert 库，它提供了很好的断言工具。

希望有帮助。

# c# - 如何将字符串转换为 Indian Money 格式？

> ID：12492567
> 
> 赞同：8
> 
> 时间：2012-09-19T10:07:03.153
> 
> 标签：c#, windows-8, .net-4.5

我正在尝试将字符串转换为 India Money 格式，例如如果输入为“1234567”，则输出应为“12,34,567”

我已经编写了以下代码，但它没有给出预期的输出。

```
 CultureInfo hindi = new CultureInfo("hi-IN");
 string text = string.Format(hindi, "{0:c}", fare);
 return text; 
```

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-19T10:11:15.347

如果`fare`是`int`, `long`, `decimal`, `float`or中的任何一个，`double`我会得到预期的输出：

`₹ 12,34,567.00`.

我怀疑你`fare`实际上是一个`string`; 字符串没有被格式化`string.Format`：它们*已经*是一个字符串：格式化*没有价值*。所以：首先解析它（使用任何合适的，也许是不变的十进制解析），然后格式化解析的值；例如：

```
// here we assume that `fare` is actually a `string`
string fare = "1234567";
decimal parsed = decimal.Parse(fare, CultureInfo.InvariantCulture);
CultureInfo hindi = new CultureInfo("hi-IN");
string text = string.Format(hindi, "{0:c}", parsed); 
```

* * *

编辑重新评论；只获取没有货币符号或小数部分的格式化值：

```
string text = string.Format(hindi, "{0:#,#}", value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-16T15:42:04.933

试试这个

```
int myvalue = 123456789;
Console.WriteLine(myvalue.ToString("#,#.##", CultureInfo.CreateSpecificCulture("hi-IN")));//output;- 12,34,56,789 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T10:31:42.107

String.Format("0:C0") 没有小数位。

根据我上面的评论，您可以通过克隆 numberformatinfo 并将货币符号属性设置为空字符串来实现您想要的

[示例可以在这里找到 - 向下看页面底部](https://stackoverflow.com/questions/10416553/string-format-currency)

编辑：这是针对您的问题格式化的上述链接帖子：

```
var cultureInfo = new CultureInfo("hi-IN")
var numberFormatInfo = (NumberFormatInfo)cultureInfo.NumberFormat.Clone();
numberFormatInfo.CurrencySymbol = "";

var price = 1234567;
var formattedPrice = price.ToString("0:C0", numberFormatInfo); // Output: "12,34,567" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-18T07:09:48.900

如果要在 Razor 视图文件中显示，请使用，

```
@String.Format(new System.Globalization.CultureInfo("hi-IN"), "{0:c}", decimal.Parse("12345678", System.Globalization.CultureInfo.InvariantCulture))

// Output: ₹ 1,23,45,678.00 
```

# android - 如何从设备的 /data/data/ 路径中选择文件

> ID：12492568
> 
> 赞同：1
> 
> 时间：2012-09-19T10:07:08.593
> 
> 标签：android

我使用我的应用程序在以下路径中创建了一个文件。

/data/data/VisionEPODErrorLog/ErrorLog.txt

我可以使用 Eclipse DDMS->File Explore ->Data 查看该文件

但是当我在 mob 设备中安装我的应用程序时，我没有在设备中获得该路径。

我需要查看设备中的确切文件

是否需要任何第三方应用程序才能访问该路径。如果是这样，那是什么，或者还有其他方法可以从设备中获取该文件。如果有人知道，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:12:24.687

请使用以下方法

```
 BufferedInputStream in = new BufferedInputStream(Mtx.getContext().openFileInput("ErrorLog.txt")); 
```

我在我的应用程序中使用来读取存储在 /data/data/ 目录下的文件

我认为这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:06:44.217

> /data/data/VisionEPODErrorLog/ErrorLog.txt

这是一个非常糟糕的主意。请不要这样做。请用于`getFilesDir()`获取文件内部存储的根目录。

> 但是当我在 mob 设备中安装我的应用程序时，我没有在设备中获得该路径。

您应该无法在生产设备上在那里写字。请不要发明随机路径。请用于`getFilesDir()`获取文件内部存储的根目录。

您当然无法`/data/data`通过任何工具在生产设备上查看任何内容，除非您对手机进行 root。

# django - Django POST 到其他视图

> ID：12492569
> 
> 赞同：2
> 
> 时间：2012-09-19T10:07:10.897
> 
> 标签：django, django-forms, django-views

我有以下形式存在于站点根目录中`/`

```
<form action='/play/' method='post'>
    {% csrf_token %}
    {{ form.player_name }}
    <input id='play' type='submit' value='Play'>
</form> 
```

然后我有验证此表单的视图：

```
def login(request):    
    context = {}

    if request.method == 'POST':
        form = LoginForm(request.POST)

        if form.is_valid():
            return HttpResponseRedirect('/play/')
        else:
            context.update(dict(form=form))
    else:
        context.update(dict(form=LoginForm(initial={'player_name':'Please tell us your name'})))

    return render_to_response('login.html', context, context_instance=RequestContext(request)) 
```

和实际的播放视图：

```
def play(request):

    p1 = briscola.Player(request.POST['player_name']) 
```

问题是重定向当然会丢失`POST`数据。但是为什么不`POST`直接到播放视图时自己`form.is_valid`呢？

# javascript - jQuery：承诺：'always()' 没有执行

> ID：12492571
> 
> 赞同：0
> 
> 时间：2012-09-19T10:07:16.317
> 
> 标签：javascript, jquery, jquery-deferred, promise

我无法让 always() 在 jQuery 中触发我的 Deferred。done() 和 fail() 工作正常，但不知何故我一定做错了什么，因为 always() 永远不会触发。

使用 $.when 它工作...

```
var Validator = {
    validate_something: function(value) {
        var deferred = new $.Deferred();

        deferred.resolve();

        return deferred.promise();
    },

    validate_date: function(value) {
        var deferred = new $.Deferred();

        deferred.resolve();

        return deferred.promise();
    }
};

function doneCallback() {
    console.log("$.then.done() executed");
}

function failCallback() {
    console.log("$.then.fail() executed");
}

function alwaysCallback() {
    console.log("$.then.always() executed");
}

var validationPromise = $.when(
    Validator.validate_date(6).then(doneCallback, failCallback, alwaysCallback),
    Validator.validate_something(1).then(doneCallback, failCallback, alwaysCallback)
);

validationPromise.done(function() {
    console.log("$.when.done() executed");
});
validationPromise.fail(function() {
    console.log("$.when.fail() executed");
});
validationPromise.always(function() {
    console.log("$.when.always() executed");
});
​ 
```

见[http://jsfiddle.net/6j6K2/](http://jsfiddle.net/6j6K2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:51:58.870

回答我自己的问题：构造函数接受三个参数，但最后一个是用于progressCallbacks。您需要单独调用 always() 。

```
var validate_date = Validator.validate_date(6).then(doneCallback, failCallback);
validate_date.always(alwaysCallback);

var validate_something = Validator.validate_something(1).then(doneCallback, failCallback);
validate_something.always(alwaysCallback);

var validationPromise = $.when(
    validate_date,
    validate_something
); 
```

# performance - SP slow on powerful server, but quick locally (both from SSMS)

> ID：12492572
> 
> 赞同：0
> 
> 时间：2012-09-19T10:07:19.313
> 
> 标签：performance, sql-server-2008, tsql, sql-tuning

I have inherited a large and slow stored procedure and it's giving me a nightmare:

I have SQL Server 2008 installed on my desktop with a copy of the production db. I am running everything from SSMS and I have tried straight SQL and SP. Time for Sp vs SQL is close enough to the same to not worry unduly about - its the time of local vs server that's concering me.

```
Local:
2Ghz dual-core
4Gb RAM
SQL 2008 Sp1
Microsoft SQL Server 2008 R2 (SP1) - 10.50.2500.0 (Intel X86)   
Enterprise Edition on Windows NT 6.1 <X86> (Build 7601: Service Pack 1) 

Server:
2Ghz dual-core
4Gb RAM
Microsoft SQL Server 2008 (SP1) - 10.0.2573.0 (X64)   
Standard Edition (64-bit) on Windows NT 5.2 <X64> (Build 3790: Service Pack 2) (VM) 
```

When I run the sproc "locally", it takes around 6 seconds to complete.

When I run the sproc against the server, it takes around 25 minutes to complete!!!

[Total inserts = 45,500]

I have tried to tune the SP as much as I can and avoided parameter sniffing but not sure WHY this should be SO much slower on a pretty much equivalent machine (I know SQL Server version is slightly different, but can't see whjy it would make THAT much difference?)

I know the SP isn't fantastic, but if it runs in 6 seconds locally, then its not total pants! If it took 60 seconds on the server then that would still be fine. There are 15 calls to this SP...so 15*0:06 is acceptable...15*25:00 is not!

Server has a pretty low load on it when these SP's are not running, and around 50% CPU when they are in progress (one core 100%?). Locally CPU never gets above 25%.

* * *

Apols for posting the whole SP...but can't see how else to show what its doing in case there is an option that can be set to improve things :(

```
ALTER PROCEDURE [dbo].[LoadProfitabilitySummaryByCustomer] 
    @inCustomerType char(2),
    @inClearTable int = 0,
    @inStartNum int,
    @inEndNum int
WITH RECOMPILE
AS
    BEGIN
    SET ANSI_NULLS ON
    DECLARE @customers TABLE (
        CUSNUM CHAR(6) DEFAULT 0
        ,IILQAR DECIMAL(20,5) DEFAULT 0
        ,IILUSD DECIMAL(20,5) DEFAULT 0
        ,IILGPB DECIMAL(20,5) DEFAULT 0
        ,IILEUR DECIMAL(20,5) DEFAULT 0
        ,IILKWD DECIMAL(20,5) DEFAULT 0
        ,IILOTH DECIMAL(20,5) DEFAULT 0
        ,IILMTD DECIMAL(20,5) DEFAULT 0
        ,IILYTD DECIMAL(20,5) DEFAULT 0
        ,TCQAR DECIMAL(20,5) DEFAULT 0
        ,TCUSD DECIMAL(20,5) DEFAULT 0
        ,TCGPB DECIMAL(20,5) DEFAULT 0
        ,TCEUR DECIMAL(20,5) DEFAULT 0
        ,TCKWD DECIMAL(20,5) DEFAULT 0
        ,TCOTH DECIMAL(20,5) DEFAULT 0
        ,TCMTD DECIMAL(20,5) DEFAULT 0
        ,TCYTD DECIMAL(20,5) DEFAULT 0
        )

    DECLARE @CustomerType char(2)
    DECLARE @ClearTable int
    DECLARE @StartNum int
    DECLARE @EndNum int

    SET @CustomerType = @inCustomerType
    SET @ClearTable = @inClearTable
    SET @StartNum = @inStartNum
    SET @EndNum = @inEndNum

    DECLARE @sCustomerNumber char(6)

    DECLARE @iDaysInMonth decimal
    DECLARE @iDaysInYear decimal
    DECLARE @dAvgCostQAR DECIMAL(20,5)
    DECLARE @dAvgCostUSD DECIMAL(20,5)
    DECLARE @dAvgCostGBP DECIMAL(20,5)
    DECLARE @dAvgCostEUR DECIMAL(20,5)
    DECLARE @dAvgCostKWD DECIMAL(20,5)
    DECLARE @dAvgCostOTH DECIMAL(20,5)
    DECLARE @dAvgCostTOT DECIMAL(20,5)
    DECLARE @dTIIntIncLnsQAR DECIMAL(20,5)
    DECLARE @dTIIntIncLnsUSD DECIMAL(20,5)
    DECLARE @dTIIntIncLnsGBP DECIMAL(20,5)
    DECLARE @dTIIntIncLnsEUR DECIMAL(20,5)
    DECLARE @dTIIntIncLnsKWD DECIMAL(20,5)
    DECLARE @dTIIntIncLnsOTH DECIMAL(20,5)
    DECLARE @dTIIntIncLnsTOT DECIMAL(20,5)
    DECLARE @dTIIntIncLnsYTD DECIMAL(20,5)
    DECLARE @dTITradeCommQAR DECIMAL(20,5)
    DECLARE @dTITradeCommUSD DECIMAL(20,5)
    DECLARE @dTITradeCommGBP DECIMAL(20,5)
    DECLARE @dTITradeCommEUR DECIMAL(20,5)
    DECLARE @dTITradeCommKWD DECIMAL(20,5)
    DECLARE @dTITradeCommOTH DECIMAL(20,5)
    DECLARE @dTITradeCommTOT DECIMAL(20,5)
    DECLARE @dTITradeCommYTD DECIMAL(20,5)
    DECLARE @dtMaxDate varchar(30)

    DECLARE @iReportYear int
    DECLARE @START_DATE datetime
    DECLARE @FIRST_MONTH datetime
    DECLARE @END_MONTH datetime
    DECLARE @iNumMonths int
    DECLARE @iNumDaysToday int

    INSERT INTO @customers (CUSNUM)
        SELECT DISTINCT CUSNUM
            FROM EQPRF_SUMMARY
            WHERE CUSTYP = @CustomerType
                AND CUSNUM >= @StartNum
                AND CUSNUM < @EndNum
            GROUP BY CUSNUM

    UPDATE @customers
    SET IILQAR = t2.Amount
    FROM @customers c INNER JOIN
        (
            SELECT CUSNUM,
                -SUM(ISNULL(CONVERT(decimal(20,5),t.TOTALMTDLCY),0)) as Amount
            FROM TI_INTINCLOANS t
            WHERE t.CCY = 'IILQAR'
                AND t.LINEID = 'LN17'
            GROUP BY t.CUSNUM
        ) AS t2
        ON c.CUSNUM = t2.CUSNUM

    UPDATE @customers
    SET IILUSD = t2.Amount
    FROM @customers c INNER JOIN
        (
            SELECT CUSNUM,
                -SUM(ISNULL(CONVERT(decimal(20,5),t.TOTALMTDLCY),0)) as Amount
            FROM TI_INTINCLOANS t
            WHERE t.CCY = 'IILUSD'
                AND t.LINEID = 'LN17'
            GROUP BY t.CUSNUM
        ) AS t2
        ON c.CUSNUM = t2.CUSNUM

    --REPEAT FOR 14 OTHER CRITERIA  

    IF (@ClearTable = 1)
        BEGIN
            IF EXISTS (SELECT name FROM sysindexes WHERE name = 'IX_GROUP_ACCT') DROP INDEX IX_GROUP_ACCT ON PROFITABILITY_SUMMARY

            TRUNCATE TABLE [PROFITABILITY_SUMMARY]

            IF NOT EXISTS (SELECT name FROM sysindexes WHERE name = 'IX_GROUP_ACCT')
            CREATE NONCLUSTERED INDEX IX_GROUP_ACCT
            ON dbo.PROFITABILITY_SUMMARY(CUST_TYPE,GROUP_CODE,ACCOUNT)
            WITH (FILLFACTOR = 90,PAD_INDEX = ON);  
        END

    IF MONTH(getdate())= 1 SET @iReportYear = YEAR(DATEADD(m,-1,getdate()))  -- get last month's year
    ELSE SET @iReportYear = YEAR(getdate())

    SET @START_DATE = CAST('1/1/'+cast(@iReportYear as varchar(4)) as datetime) --first day of report year (If Jan, it's last year)
    SET @FIRST_MONTH = DATEADD(day,-DAY(getdate())+1,getdate())--first day of current month
    SET @END_MONTH = DATEADD(day,-1,@FIRST_MONTH)--determine last day of the previous month
    SET @FIRST_MONTH = DATEADD(M,-1,@FIRST_MONTH)--reset to first day of the previous month
    SET @FIRST_MONTH = CAST(FLOOR( CAST( @FIRST_MONTH AS FLOAT ) ) AS DATETIME) --TRUNCATE HOURS
    SET @END_MONTH = CAST(FLOOR( CAST( @END_MONTH AS FLOAT ) ) AS DATETIME) --TRUNCATE HOURS

    SELECT TOP 1 
        @dAvgCostQAR = AVGCOSTQAR
        ,@dAvgCostUSD = AVGCOSTUSD
        ,@dAvgCostGBP = AVGCOSTGBP
        ,@dAvgCostEUR = AVGCOSTEUR
        ,@dAvgCostKWD = AVGCOSTKWD
        ,@dAvgCostOTH = AVGCOSTOTH
        ,@dAvgCostTOT = AVGCOSTTOT
    FROM dbo.PRFCOSTF

    SET @dtMaxDate = (select top 1 s.txnstmp from EQPRF_SUMMARY s)
    SELECT @iDaysInMonth = dbo.ufn_GetDaysInMonth(CAST(@dtMaxDate as datetime))
    SELECT @iDaysInYear = 360
    SET @iNumDaysToday = (DATEDIFF(dd, @START_DATE, @END_MONTH)+1)

    DECLARE CustomerCursor CURSOR FAST_FORWARD
        FOR
        SELECT CUSNUM
        FROM @customers

    OPEN CustomerCursor

    FETCH NEXT FROM CustomerCursor 
        INTO @sCustomerNumber

    WHILE @@FETCH_STATUS = 0
        BEGIN

        SELECT 
            @dTIIntIncLnsQAR = c.IILQAR
            ,@dTIIntIncLnsUSD = c.IILUSD
            ,@dTIIntIncLnsGBP = c.IILGPB
            ,@dTIIntIncLnsEUR = c.IILEUR
            ,@dTIIntIncLnsKWD = c.IILKWD
            ,@dTIIntIncLnsOTH = c.IILOTH
            ,@dTIIntIncLnsTOT = c.IILMTD
            ,@dTIIntIncLnsYTD = c.IILYTD
            ,@dTITradeCommQAR = c.TCQAR
            ,@dTITradeCommUSD = c.TCUSD
            ,@dTITradeCommGBP = c.TCGPB
            ,@dTITradeCommEUR = c.TCEUR
            ,@dTITradeCommKWD = c.TCKWD
            ,@dTITradeCommOTH = c.TCOTH
            ,@dTITradeCommTOT = c.TCMTD
            ,@dTITradeCommYTD = c.TCYTD
        FROM @customers c
        WHERE c.CUSNUM = @sCustomerNumber

    INSERT INTO PROFITABILITY_SUMMARY
            SELECT SORT_ORDER = 1, LINE_NO = 'LN01', RPT_DATE=cast(TXNSTMP as datetime),
                LINE_TITLE='Month Loans Outstanding', 
                ACCOUNT = RTRIM(CUSNUM),
                CUST_TYPE = RTRIM(CUSTYP),
                GROUP_CODE = (CASE
                                WHEN RTRIM(CUSGRP) IS NULL OR RTRIM(CUSGRP)='' THEN LEFT(CUSNAME,3)+'--'+RTRIM(CUSNUM)
                                ELSE RTRIM(CUSGRP)
                                END),
                PARENT_COUNTRY = RTRIM(CUSNAP),
                RM_CODE = RTRIM(CUSACO),
                RM_NAME = RTRIM(CUSRNAM),
                CUST_NAME = RTRIM(CUSNAME),
                RISK_CODE = RTRIM(CUSRSKE),
                QAR = ISNULL((SELECT CAST(CURDLAMT AS DECIMAL(20,5)) FROM [MISReportInterface].[dbo].[EQPRF_SUMMARY]
              where CUSNUM=@sCustomerNumber AND CUSCCY='QAR'),0),
                USD = ISNULL((SELECT CAST(CURDLAMT AS DECIMAL(20,5)) FROM [MISReportInterface].[dbo].[EQPRF_SUMMARY]
              where CUSNUM=@sCustomerNumber AND CUSCCY='USD'),0),
                GBP = ISNULL((SELECT CAST(CURDLAMT AS DECIMAL(20,5)) FROM [MISReportInterface].[dbo].[EQPRF_SUMMARY]
              where CUSNUM=@sCustomerNumber AND CUSCCY='GBP'),0),
                EUR = ISNULL((SELECT CAST(CURDLAMT AS DECIMAL(20,5)) FROM [MISReportInterface].[dbo].[EQPRF_SUMMARY]
              where CUSNUM=@sCustomerNumber AND CUSCCY='EUR'),0),
                KWD = ISNULL((SELECT CAST(CURDLAMT AS DECIMAL(20,5)) FROM [MISReportInterface].[dbo].[EQPRF_SUMMARY]
              where CUSNUM=@sCustomerNumber AND CUSCCY='KWD'),0),
                OTHER = ISNULL((SELECT sum(CAST(CURDLAMT AS DECIMAL(20,5))) FROM [MISReportInterface].[dbo].[EQPRF_SUMMARY]
              where CUSNUM=@sCustomerNumber AND CUSCCY NOT IN ('QAR', 'USD', 'GBP', 'EUR', 'KWD')),0),
                TOTAL = SUM(CAST(CURDLAMT AS DECIMAL(20,5))),
                YTD = 0
              FROM [MISReportInterface].[dbo].[EQPRF_SUMMARY] where CUSNUM=@sCustomerNumber
              GROUP BY CUSNUM,CUSTYP,CUSGRP,CUSNAP,CUSACO,CUSRNAM,CUSNAME,CUSRSKE,TXNSTMP

            UNION ALL
                SELECT SORT_ORDER = 2,LINE_NO = 'LN02', RPT_DATE=cast(TXNSTMP as datetime),
                    LINE_TITLE ='Average Loans Outstanding', 
                    ACCOUNT = RTRIM(CUSNUM),
                    CUST_TYPE = RTRIM(CUSTYP),
                GROUP_CODE = (CASE
                                WHEN RTRIM(CUSGRP) IS NULL OR RTRIM(CUSGRP)='' THEN LEFT(CUSNAME,3)+'--'+RTRIM(CUSNUM)
                                ELSE RTRIM(CUSGRP)
                                END),
                    PARENT_COUNTRY = RTRIM(CUSNAP),
                    RM_CODE = RTRIM(CUSACO),
                    RM_NAME = RTRIM(CUSRNAM),
                    CUST_NAME = RTRIM(CUSNAME),
                    RISK_CODE = RTRIM(CUSRSKE),
                    QAR = ISNULL((SELECT CAST(LNAVGMTD AS DECIMAL(20,5)) FROM [MISReportInterface].[dbo].[EQPRF_SUMMARY]
                  where CUSNUM=@sCustomerNumber AND CUSCCY='QAR'),0),
                    USD = ISNULL((SELECT CAST(LNAVGMTD AS DECIMAL(20,5)) FROM [MISReportInterface].[dbo].[EQPRF_SUMMARY]
                  where CUSNUM=@sCustomerNumber AND CUSCCY='USD'),0),
                    GBP = ISNULL((SELECT CAST(LNAVGMTD AS DECIMAL(20,5)) FROM [MISReportInterface].[dbo].[EQPRF_SUMMARY]
                  where CUSNUM=@sCustomerNumber AND CUSCCY='GBP'),0),
                    EUR = ISNULL((SELECT CAST(LNAVGMTD AS DECIMAL(20,5)) FROM [MISReportInterface].[dbo].[EQPRF_SUMMARY]
                  where CUSNUM=@sCustomerNumber AND CUSCCY='EUR'),0),
                    KWD = ISNULL((SELECT CAST(LNAVGMTD AS DECIMAL(20,5)) FROM [MISReportInterface].[dbo].[EQPRF_SUMMARY]
                  where CUSNUM=@sCustomerNumber AND CUSCCY='KWD'),0),
                    OTHER = ISNULL((SELECT SUM(CAST(LNAVGMTD AS DECIMAL(20,5))) FROM [MISReportInterface].[dbo].[EQPRF_SUMMARY]
                  where CUSNUM=@sCustomerNumber AND CUSCCY NOT IN ('QAR', 'USD', 'GBP', 'EUR', 'KWD')),0),
                    TOTAL = SUM(CAST(LNAVGMTD AS DECIMAL(20,5))),
                    YTD = SUM(CAST(LNAVGYTD AS DECIMAL(20,5)))
                  FROM [MISReportInterface].[dbo].[EQPRF_SUMMARY] where CUSNUM=@sCustomerNumber
                  GROUP BY CUSNUM,CUSTYP,CUSGRP,CUSNAP,CUSACO,CUSRNAM,CUSNAME,CUSRSKE,TXNSTMP
------------------------------------------------------------------------------
            --THERE ARE 32 LINES IN TOTAL...ALL FOLLOWING ROUGHLY SAME PATTERN
------------------------------------------------------------------------------
            UNION ALL
                SELECT SORT_ORDER = 32,LINE_NO = 'GRANTOTAL',RPT_DATE=cast(TXNSTMP as datetime),
                    LINE_TITLE ='Total Income', 
                    ACCOUNT = RTRIM(CUSNUM),
                    CUST_TYPE = RTRIM(CUSTYP),
                GROUP_CODE = (CASE
                                WHEN RTRIM(CUSGRP) IS NULL OR RTRIM(CUSGRP)='' THEN LEFT(CUSNAME,3)+'--'+RTRIM(CUSNUM)
                                ELSE RTRIM(CUSGRP)
                                END),
                    PARENT_COUNTRY = RTRIM(CUSNAP),
                    RM_CODE = RTRIM(CUSACO),
                    RM_NAME = RTRIM(CUSRNAM),
                    CUST_NAME = RTRIM(CUSNAME),
                    RISK_CODE = RTRIM(CUSRSKE),
                    QAR = @dTITradeCommQAR+@dTIIntIncLnsQAR+ISNULL((SELECT CAST(SUSINTMTD AS DECIMAL(20,5)) + CAST(INTINCMTD AS DECIMAL(20,5))- cast(COSTLNMTD as DECIMAL(20,5))+cast(COSTDPMTD as DECIMAL(20,5)) - CAST(INTEXPMTD AS DECIMAL(20,5))+CAST(LNFEEMTD  AS DECIMAL(20,5))+CAST(OTRINCMTD  AS DECIMAL(20,5))+CAST(EXCHINCMTD  AS DECIMAL(20,5)) FROM [MISReportInterface].[dbo].[EQPRF_SUMMARY]
                  where CUSNUM=@sCustomerNumber AND CUSCCY='QAR'),0),
                    USD = @dTITradeCommUSD+@dTIIntIncLnsUSD+ISNULL((SELECT CAST(SUSINTMTD AS DECIMAL(20,5)) + CAST(INTINCMTD AS DECIMAL(20,5))- cast(COSTLNMTD as DECIMAL(20,5))+cast(COSTDPMTD as DECIMAL(20,5)) - CAST(INTEXPMTD AS DECIMAL(20,5))+CAST(LNFEEMTD  AS DECIMAL(20,5))+CAST(OTRINCMTD  AS DECIMAL(20,5))+CAST(EXCHINCMTD  AS DECIMAL(20,5)) FROM [MISReportInterface].[dbo].[EQPRF_SUMMARY]
                  where CUSNUM=@sCustomerNumber AND CUSCCY='USD'),0),
                    GBP = @dTITradeCommGBP+@dTIIntIncLnsGBP+ISNULL((SELECT CAST(SUSINTMTD AS DECIMAL(20,5)) + CAST(INTINCMTD AS DECIMAL(20,5))- cast(COSTLNMTD as DECIMAL(20,5))+cast(COSTDPMTD as DECIMAL(20,5)) - CAST(INTEXPMTD AS DECIMAL(20,5))+CAST(LNFEEMTD  AS DECIMAL(20,5))+CAST(OTRINCMTD  AS DECIMAL(20,5))+CAST(EXCHINCMTD  AS DECIMAL(20,5)) FROM [MISReportInterface].[dbo].[EQPRF_SUMMARY]
                  where CUSNUM=@sCustomerNumber AND CUSCCY='GBP'),0),
                    EUR = @dTITradeCommEUR+@dTIIntIncLnsEUR+ISNULL((SELECT CAST(SUSINTMTD AS DECIMAL(20,5)) + CAST(INTINCMTD AS DECIMAL(20,5))- cast(COSTLNMTD as DECIMAL(20,5))+cast(COSTDPMTD as DECIMAL(20,5)) - CAST(INTEXPMTD AS DECIMAL(20,5))+CAST(LNFEEMTD  AS DECIMAL(20,5))+CAST(OTRINCMTD  AS DECIMAL(20,5))+CAST(EXCHINCMTD  AS DECIMAL(20,5)) FROM [MISReportInterface].[dbo].[EQPRF_SUMMARY]
                  where CUSNUM=@sCustomerNumber AND CUSCCY='EUR'),0),
                    KWD = @dTITradeCommKWD+@dTIIntIncLnsKWD+ISNULL((SELECT CAST(SUSINTMTD AS DECIMAL(20,5)) + CAST(INTINCMTD AS DECIMAL(20,5))- cast(COSTLNMTD as DECIMAL(20,5))+cast(COSTDPMTD as DECIMAL(20,5)) - CAST(INTEXPMTD AS DECIMAL(20,5))+CAST(LNFEEMTD  AS DECIMAL(20,5))+CAST(OTRINCMTD  AS DECIMAL(20,5))+CAST(EXCHINCMTD  AS DECIMAL(20,5)) FROM [MISReportInterface].[dbo].[EQPRF_SUMMARY]
                  where CUSNUM=@sCustomerNumber AND CUSCCY='KWD'),0),
                    OTHER=@dTITradeCommOTH+@dTIIntIncLnsOTH+ISNULL((SELECT SUM(CAST(SUSINTMTD AS DECIMAL(20,5)))+ SUM(CAST(INTINCMTD AS DECIMAL(20,5)))-SUM(CAST(COSTLNMTD AS DECIMAL(20,5)))+SUM(CAST(COSTDPMTD AS DECIMAL(20,5))) - SUM(CAST(INTEXPMTD AS DECIMAL(20,5)))+SUM(CAST(LNFEEMTD AS DECIMAL(20,5)))+SUM(CAST(OTRINCMTD  AS DECIMAL(20,5)))+SUM(CAST(EXCHINCMTD  AS DECIMAL(20,5))) FROM [MISReportInterface].[dbo].[EQPRF_SUMMARY]
                  where CUSNUM=@sCustomerNumber AND CUSCCY NOT IN ('QAR', 'USD', 'GBP', 'EUR', 'KWD')),0),
                    TOTAL = @dTITradeCommTOT+@dTIIntIncLnsTOT+ SUM(CAST(SUSINTMTD AS DECIMAL(20,5)))+SUM(CAST(INTINCMTD AS DECIMAL(20,5)))-SUM(CAST(COSTLNMTD AS DECIMAL(20,5)))+SUM(cast(COSTDPMTD as DECIMAL(20,5))) - SUM(CAST(INTEXPMTD AS DECIMAL(20,5)))+SUM(CAST(LNFEEMTD  AS DECIMAL(20,5)))+SUM(CAST(OTRINCMTD  AS DECIMAL(20,5)))+SUM(CAST(EXCHINCMTD  AS DECIMAL(20,5))),
                    YTD = @dTITradeCommYTD+@dTIIntIncLnsYTD+ SUM(CAST(SUSINTYTD AS DECIMAL(20,5)))+SUM(CAST(INTINCYTD AS DECIMAL(20,5)))-SUM(CAST(COSTLNYTD AS DECIMAL(20,5)))+SUM(cast(COSTDPYTD as DECIMAL(20,5))) - SUM(CAST(INTEXPYTD AS DECIMAL(20,5)))+SUM(CAST(LNFEEYTD  AS DECIMAL(20,5)))+SUM(CAST(OTRINCYTD  AS DECIMAL(20,5)))+SUM(CAST(EXCHINCYTD  AS DECIMAL(20,5)))

                  FROM [MISReportInterface].[dbo].[EQPRF_SUMMARY] where CUSNUM=@sCustomerNumber
                GROUP BY CUSNUM,CUSTYP,CUSGRP,CUSNAP,CUSACO,CUSRNAM,CUSNAME,CUSRSKE,TXNSTMP
            ORDER BY 1

        FETCH NEXT 
            FROM CustomerCursor 
            INTO @sCustomerNumber

        END

    CLOSE CustomerCursor
    DEALLOCATE CustomerCursor

END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:05:47.453

Desktop with no load and the server has a low load. Way different. Kick the users off and put both databases in single user mode if you want a fair comparison.

Those inserts need to acquire locks. Even a low load can be holding a lot of locks.

The other thing to look at is index fragmentation but I bet it can be explained by locks.

If you have active users taking shared locks they are not blocking each other.

But a shared lock will prevent the SP from acquiring an update lock.

A dirty read (no lock) will not block an update lock.

Kick users off and test. If the time comes down then most likely it is a locking issue.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:32:47.530

Answer: VM Ware causing very slow disk writes.

Same DB on a physical server was very quick. Same DB on VM server was slow again.

# android - 如何正确删除所有活动堆栈？

> ID：12492576
> 
> 赞同：2
> 
> 时间：2012-09-19T10:07:31.903
> 
> 标签：android, android-activity, stack

`Activity A -> Activity B -> Activity C -> Activity D`. 在 Activity D 中按下 back 应该将用户导航出应用程序，而 Back 应该对于 Activity C、B 和 A 正常工作。即`C -> back -> B -> back A -> back -> exit`。

我尝试`Activity.FLAG_ACITIVITY_CLEAR_TOP,`使用不同的组合设置标志等。似乎没有任何效果。最低 API 级别 7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:09:38.580

为了`#1 Pressing back in Activity D should navigate user out of the application`

在 ActivityD 中，您可以覆盖 onBackPressed 或 onKeyDown 方法，然后使用带有 Exit 标志的标志 FLAG_ACTIVITY_CLEAR_TOP 启动 ActivityA（通过 putExtra 方法）。在 ActivityA 中，如果 Exit 标志设置为 true，您可以获得该 Exit 标志值并调用 finish()。

在活动 A 的 onCreate 方法中，您必须做的是

```
if (getIntent().getBooleanExtra("EXIT", false)) {
 finish();
} 
```

在 ActivityD 的 onBackPressed 或 onKeyPressed 方法中，

```
intent = (this, ActivityA.class);   
   intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
   intent.putExtra("EXIT", true);
   startActivity(intent); 
```

为了`#2 Exit from ActivityA`

您可以简单地在 onBackPressed 或 onKeyPressed 上调用 finish() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:11:29.600

Android 活动存储在活动堆栈中。回到以前的活动可能意味着两件事。

1.  您使用 startActivityForResult 从另一个活动中打开了新活动。在这种情况下，您只需从代码中调用 finishActivity() 函数，它就会带您回到上一个活动。

2.  跟踪活动堆栈。每当您使用一个意图启动一个新活动时，您都可以指定一个意图标志，如 FLAG_ACTIVITY_REORDER_TO_FRONT 或 FLAG_ACTIVITY_PREVIOUS_IS_TOP。您可以使用它在应用程序中的活动之间随机播放。不过没怎么用过。看看[这里的标志](http://developer.android.com/reference/android/content/Intent.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T10:12:43.697

您是否尝试过在 Activity D 中覆盖 BACK 按钮的功能？我很确定这与您需要的非常相关：[覆盖后退按钮以充当主页按钮](https://stackoverflow.com/questions/2000102/android-override-back-button-to-act-like-home-button)

了解 Android 活动生命周期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T11:00:45.147

1.  “在 Activity D 中按回应该将用户导航出应用程序”

    ```
    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
            if (keyCode == KeyEvent.KEYCODE_BACK) {
                moveTaskToBack(true);           
                return true;
            }
            return super.onKeyDown(keyCode, event);
        } 
    ```

2.  这是操作系统的正常行为，你不必为它做任何特别的事情。

# php - 如何制作一个可以被android应用请求获取JSON对象的web服务（最好使用PHP）

> ID：12492578
> 
> 赞同：4
> 
> 时间：2012-09-19T10:07:38.673
> 
> 标签：php, android, database, json, webserver

我正在制作一个与远程服务器的数据库交互并通过传入和传出 JSON 对象来相互通信的 Android 应用程序。

我需要知道如何在我的服务器（最好是 PHP）上编写这样的服务，android 应用程序可以向它发出请求，并且在接收到请求时，服务器处理并制作一个 JSON 对象并将其传递给 android 应用程序。

另外，我需要知道，当此服务在服务器上运行时， android 应用程序将在*哪个*URL 上发出请求？

例如，如果 android 应用程序必须请求服务器以获取参数数据：名称：Apple 位置：US 那么，我猜 android 应用程序将必须以以下形式请求服务器：www.example.com?name='Apple "&location='美国'

那么如何让这样的服务在远程服务器上运行呢？

提前致谢 ！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T10:41:01.687

您可以参考的最佳示例是[http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)。它有完整的代码[php+ android]，解释简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:32:03.240

您可以编写一个请求远程 php 文件的方法，该文件响应 post 或 get 请求。如果你想使用 post request ，你可以使用下面的方法。并且您必须将 Internet 许可添加到清单文件中。如下所示，您可以将参数添加为键值对。

```
 public void postData() {
// Create a new HttpClient and Post Header
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://www.yoursite.com/webservice.php");

try {
    // Add your data
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
    nameValuePairs.add(new BasicNameValuePair("name", "Apple"));
    nameValuePairs.add(new BasicNameValuePair("locaction", "US"));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    ResponseHandler <String> res=new BasicResponseHandler();  
    // Execute HTTP Post Request
    String response = httpclient.execute(httppost,res);

} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
} catch (IOException e) {
    // TODO Auto-generated catch block
}
  } 
```

[http://www.androidsnippets.com/executing-a-http-post-request-with-httpclient](http://www.androidsnippets.com/executing-a-http-post-request-with-httpclient)

# php - 谷歌融合表在“显示表”查询中给了我一个 401

> ID：12492580
> 
> 赞同：0
> 
> 时间：2012-09-19T10:07:45.960
> 
> 标签：php, sql, google-fusion-tables, http-status-code-401

我只是在尝试“显示表格”，并且尝试在请求 URI 中添加 api 密钥、客户端 ID 和秘密等等，而我一直得到的只是“代码”：401，“消息”：“登录必需的”

它适用于除此之外的任何其他 SQL 查询。为什么会这样？

我该如何在这里查询正确的方式..？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:59:38.190

您需要使用 OAuth 对自己进行身份验证，根据您的设置，您可以让您的用户通过 Google 进行身份验证，然后您获得一个可用于访问用户 Fusion Tables 的令牌，或者您创建一个所谓的[服务帐户](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)来访问您的特定应用程序桌子。

请参阅[Google 的 OAuth 指南](https://developers.google.com/fusiontables/docs/articles/oauthfusiontables)，您可以使用[PHP 客户端库](https://code.google.com/p/google-api-php-client/wiki/OAuth2)来处理 OAuth 身份验证。

# c++ - c++ 指向 QGraphicsItem 的指针列表

> ID：12492582
> 
> 赞同：2
> 
> 时间：2012-09-19T10:07:55.913
> 
> 标签：c++, qt, list, pointers, boost

我正在尝试使用 QT 库和`QGraphicsScene`. 我可以将自己的对象添加到场景中，一切都很好。我现在想要`QGraphicsScene`的是对象之外的一些列表。比如说正方形、圆形和三角形。它们都存在于场景中，并且（如果我是正确的）在我添加它们时被场景复制和拥有。

问题是：哪种列表模板容器最适合实现我的外部列表。

我想他们需要是指针，所以我想`boost::ptr_container`。我知道一旦我开始删除项目，我需要一个系统来确保列表与场景同步。这意味着在从场景中移除对象之前从列表中移除指针。

关于我应该如何构建这个系统的任何想法都会非常好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:19:43.140

你不需要它，Qt 为你做一切。

将项目添加到`QGraphicsScene`后，场景将拥有该项目的所有权。这意味着，场景现在负责存储项目，并在需要时释放项目占用的内存（通常在您使用 手动删除项目时`deleteItem()`，或者当场景本身被删除时）。

`items()`每当您需要时，您都可以通过调用该函数来询问已添加到场景中的所有项目的列表：

```
MyGraphicScene.items(); 
```

此函数将指向所有场景项目的指针列表作为 a 返回`QList< QGraphicsItem * >`，这正是您所需要的。

# ruby-on-rails-3 - 在 Rails 3 中使用 MiniMagick 和 carreirwave 进行图像裁剪时出错

> ID：12492584
> 
> 赞同：4
> 
> 时间：2012-09-19T10:08:01.903
> 
> 标签：ruby-on-rails-3, carrierwave, crop, minimagick

我正在尝试使用带有载波的 mini magick gem 裁剪图像。创建用户时遇到以下问题。

```
Errno::ENOENT in UsersController#create

No such file or directory - identify -ping /tmp/mini_magick20120919-5600-ai31ph.jpg 
```

我的代码：模型/user.rb

```
class User < ActiveRecord::Base

  attr_accessor :crop_x, :crop_y, :crop_h, :crop_w
    attr_accessible :username,:profile
  after_update :reprocess_profile, :if => :cropping?

  #field :username

  mount_uploader :profile, ProfileUploader

  def cropping?
    !crop_x.blank? and !crop_y.blank? and !crop_h.blank? and !crop_w.blank?
  end

  def profile_geometry
    #img = MiniMagick::Image.open(self.profile.large.path)
    #@geometry = {:width => img[:width], :height => img[:height] }
  end

  private

  def reprocess_profile
    #puts self.profile.large.path
    #img = MiniMagick::Image.open(self.profile.large.path)
    #crop_params = "#{crop_w}x#{crop_h}+#{crop_x}+#{crop_y}"
    #img.crop(crop_params)
    #img.write(self.profile.path)
    #profile.recreate_versions!
  end

end 
```

上传者/profile_uploader.rb

```
# encoding: utf-8

class ProfileUploader < CarrierWave::Uploader::Base

  # Include RMagick or ImageScience support:
  #include CarrierWave::RMagick
  # include CarrierWave::ImageScience
  include CarrierWave::MiniMagick

  # Choose what kind of storage to use for this uploader:
  storage :file
  # storage :fog

  # Override the directory where uploaded files will be stored.
  # This is a sensible default for uploaders that are meant to be mounted:
  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  def extension_white_list
   %w(jpg jpeg gif png)
  end

  version :large do
  end

  version :thumb do
    process :resize_to_fill => [100, 100]
  end

end 
```

会有什么问题？请提出任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T12:24:52.200

需要安装imagemagick。在 ubuntu 中：

```
sudo apt-get install imagemagick 
```

# python - Python 2.7：如何从 shell 中传入诸如“café”之类的参数而不是“cafÚ”？

> ID：12492586
> 
> 赞同：2
> 
> 时间：2012-09-19T10:08:07.447
> 
> 标签：python, shell, encoding, arguments, diacritics

我有一个从 shell 获取参数的程序。此参数将是搜索操作中使用的查询。

如果我输入英语单词（即没有口音等），它可以正常工作。然而，如果我传入，即“café”，我会得到“cafú”（`print sys.argv[1]`结果是`cafÚ`而不是`café`）。

我以为我可以通过将其转换为 Unicode 对象来解决问题，但我错了。

```
Q = unicode(sys.argv[1], encoding=sys.stdin.encoding) 
```

我仍然得到'cafÚ'！我要疯了...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T10:17:25.743

我敢打赌你在 Windows 上，对吧？

```
>>> a = "café"
>>> a
'caf\x82'
>>> print a
café
>>> a.decode("cp850")                      # DOS codepage 850 --> Unicode
u'caf\xe9'
>>> a.decode("cp850").encode("cp1252")     # DOS 850 --> Unicode --> Windows 1252
'caf\xe9'                                  # identical to Unicode codepoint
>>> print a.decode("cp850").encode("cp1252") # Display a cp1252 string in cp850
cafÚ 
```

改为使用`encoding="cp1252"`，然后它应该可以工作。

**解释：（**有一些猜测）

*   `cmd`windows`cp850`用作其默认代码页。从我上面会话的第二行可以明显看出这一点`0x82`，`é`在`cp850`.
*   似乎在 Windows 下启动的 Python 程序将`cp1252`其用作标准编码，如上面会话的最后一行所示：`é`is `0xe9`in `cp1252`（如 Unicode）。
*   当您将此字符串写入文件（默认情况下使用`cp1252`）时，这一点也很明显：
    如果这样做`f.write(a)`，我将获得文件的内容，`caf,`因为`,`在)。 如果我这样做，我会得到。`0x82``cp1252`
    `f.write(a.decode("cp850").encode("cp1252"))``café`

道德：在您的环境中找出正确的编码，尽快将所有内容转换为 Unicode，使用它，然后再转换回您需要的编码。如果要输出到交互式窗口，请使用`cp850`，如果要输出到文件中，请使用`cp1252`.

或者切换到 Python 3，这会使这一切变得更容易。

# php - SQL Abstraction, Functionality to represent SQL-Interface in API

> ID：12492593
> 
> 赞同：-2
> 
> 时间：2012-09-19T10:08:31.403
> 
> 标签：php, sql

Well, first sorry for the title if it's not clear enough. I didn't know how to explain it more clearly.

So, the idea is to have a class (I'm using PHP, however, it's more general idea), to represent the SQL functionality but via the class methods. For example, imagine the following SQL statement:

```
SELECT p_id, p_name FROM tbl_products 
```

It could be something like this:

```
$API->Data->Action = 'select';
$API->Data->Fields = 'p_id, p_name';    // comma separated
$API->Data->Table = 'tbl_products'; 
```

And I can reassemble it like:

```
$Query = $API->Data->Action . ' ' . $API->Data->Fields . ' FROM ' . 
         $API->Data->Table . ' WHERE available = 1'; 
```

The `API` should provide for some programmers, however it could be short, simple and easy to use. If they want to run their very-own SQL statements, they have that ability also.

**Question:**

Which keywords you will use as the function names' which could be clear for both novice and professional programmers, but not very similar to SQL standard keywords?

For example, instead of `LIMIT 0, 15` I can use something like `First` and `Last` and then combine it with the offset. But what about something like `ASC` and `DESC`? `INSERT`, `UPDATE` and `DELETE` are enough clear, but for a person that let say he doesn't know anything about SQL, `SELECT` could be a little bit confusing.

*   Please let me know your general ideas
*   And offer me your desired 'keywords' also

I know that it might not look like a serious question somehow, but I really appreciate your help and ideas! For me they are much more than just a 'keyword', and that's why I'm asking for your ideas! Thank you everyone for any answer!

**Solution:**

I finally came up with this:

```
// Pure SQL Query
$API->Database->Query('SQL HERE');
$API->Database->Result;    // It contains the results as an Object

// For 'SELECT' you don't need any command, just Process() it ...
$API->Data->Table = 'Products';
$API->Data->Fields = 'p_id, p_name';
$API->Data->Offset = 'last';
$API->Data->Limit = 15;
$API->Data->Process();

// 'UPDATE', need passing some variables like above plus something like 'WHERE'
$API->Data->Save();

// 'INSERT'
$API->Data->Add();

// Save() without 'WHERE' would insert also

// 'DELETE'
$API->Data->Delete(); 
```

I'm still looking to improve it as there are still some unclear points there, so feel free to share your ideas! :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:15:06.870

你可以构建这样的东西：

```
class DBAdapter extends PDO
{
  public function __construct( array $params)
  {
     // construct the connection
  }

  public function Select ($table)
  {
    // do stuff for a table select
    return $this;
  }

  public function Count ($table)
  {
    // do stuff for a table count
    return $this;
  }

  public function Where ($condition)
  {
    // do stuff for a where
    return $this;
  }

  public function Execute ()
  {
    // execute stuff
    return $result;
  }
} 
```

然后像这样使用它：

```
$db = new DBAdapter(array('host' => 'localhost'));
$results = $db->Select('mytable')->Where('id > 2')->Execute(); 
```

# c# - 混合泛型方法和扩展方法

> ID：12492600
> 
> 赞同：5
> 
> 时间：2012-09-19T10:08:52.997
> 
> 标签：c#, .net, generics, extension-methods

我在*lib1.dll*`Class1.GetChild<T>() where T : DependencyObject`程序集中创建了扩展方法。之后，依赖*lib1.dll*的所有程序集都无法编译并出现错误：

 **> 'System.Windows.DependencyObject' 类型在未引用的程序集中定义。您必须添加对程序集“WindowsBase”等的引用...

为什么依赖程序集即使不使用也需要*WindowsBase*`GetChild`？

.

重现（vs2010 .net4）：

**lib1.dll**（参考*WindowsBase*）

```
namespace lib1
{
    public static class Class1
    {
        public static T GetChild<T>(this DependencyObject src) where T : DependencyObject
        {
            return default(T);
        }
    }

    public static class Class2
    {
        public static int SomeExtMethod(this string src)
        {
            return 0;
        }
    }
} 
```

**lib2.dll**（引用*lib1*但不引用*WindowsBase*）

```
using lib1;
class someClass
{
    void someFct()
    {
        "foo".SomeExtMethod(); // error: The type 'System.Windows.DependencyObject'
                // is defined in an assemebly that is not referenced. 
                // You must add a reference to assembly 'WindowsBase' etc..
    }
} 
```

.

***更新：***

我认为混合通用方法和扩展方法时肯定有一些东西。我试图在以下示例中演示该问题：

```
// lib0.dll
namespace lib0
{
    public class Class0 { }
}

// lib1.dll
using lib0;
namespace lib1
{
    public static class Class1
    {
        public static void methodA<T>() where T : Class0 { }    // A
        public static void methodB(Class0 e) { }                // B
        public static void methodC(this int src) { }            // C
    }

    public static class Class2
    {
        public static void methodD(this String s) { }
    }
}

// lib2.dll
using lib1;
class someClass
{
    void someFct()
    {
        Class2.methodD("");  // always compile successfully
        "".methodD();        // raise the 'must add reference to lib0' error depending on config. see details below.
    }
} 
```

`A, //B, //C`-> 编译确定

`A, B, //C`-> 编译确定

`//A, B, C`-> 编译确定

`A, //B, C`-> 引发错误

`A, B, C`-> 引发错误

`//A`手段`methodA`被评论。正如 Damien 指出的那样，类型推断可能会发挥一些作用。仍然很想知道来龙去脉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T14:04:23.567

Microsoft 已在此处回答了您的情况： [https ://connect.microsoft.com/VisualStudio/feedback/details/668498/problem-with-extension-method-in-c-compiler](https://connect.microsoft.com/VisualStudio/feedback/details/668498/problem-with-extension-method-in-c-compiler)

还有其他用例独立于错误产生此错误的扩展方法。

考虑一下：

1.  在类型中定义一个泛型方法，比如 TP1，在库中定义，比如 LB1。
2.  类型将泛型方法限制在某个其他库 LB2 中定义的某个类型上。
3.  在 TP1 中定义另一个方法。
4.  现在在您的库中仅引用 LB1 并尝试调用 TP1 类型的第二种方法

如果您不使用 TP1 而是使用 LB1 中定义的其他类型，则不会出现错误。此外，即使 TP1 类型的方法之一需要 LB2 中定义的类型的参数（并且您不调用此方法），它也不会产生此错误

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T15:46:45.470

当一个程序集依赖于另一个程序集时，第一个程序集也依赖于另一个程序集的*所有*依赖项——无论使用什么。程序集依赖关系被有效地解耦，编译后可以部署任何一个程序集的另一个版本，编译器无法知道在这种情况下，第二个程序集中的一个或多个依赖项不会被第一个程序集使用。

要解决此问题，您只需添加对 WindowsBase 的引用。

或者，正如 prashanth 指出的那样，将其`SomeExtMethod`放入不同的程序集中，这样使用它的代码就不需要依赖于 WindowsBase。

更新：如果您不使用程序集中的任何内容，则不需要它的任何依赖项。但是，一旦您使用一个程序集，您也需要该程序集的所有依赖项。这在 Visual Studio 添加引用的方式中很明显。如果您添加对程序集的引用，它会将所有依赖程序集（未在 GAC 中注册）与您添加的程序集一起复制到您的调试/发布目录中。

更新：关于编译错误：这就是它的编写方式——可能没有其他原因。如果您不引用依赖程序集，那么获得编译错误是个好主意吗？也许，您可能会使用参考中的某些内容，并且可能直接使用参考中的某些内容——编译错误比部署错误更好。

为什么不在*每个*未引用的辅助依赖项上都出现编译错误？再次，它是这样写的。也许这里的错误也很好；但这将是一个突破性的变化，需要非常有说服力的理由。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T14:01:44.750

我不确定编译器团队以外的任何人都可以回答这个问题。我现在认为这与类型推断有关 - 但是*§7.6.5.1 方法调用*谈论推断，*§7.6.5.2 扩展方法调用*对此事保持沉默 - 尽管推断显然在搜索时发生适用的扩展方法。

我认为它在对标识符执行比较*之前*尝试某种形式的推理（这将立即排除扩展方法，因为它的名称错误）。显然，如果它无法理解类型约束，它就无法对该类型执行任何形式的推理。

因此，当您将类型约束更改为 just`class`时，它现在成功地传递了此方法 - 它可以推断类型参数，但它现在成功地消除了此扩展方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T02:53:28.447

当您引用另一个程序集时，我假设编译器需要能够解析该程序集中定义的**任何方法签名**，因此如果它看到对该函数的调用，它知道去哪里找到该函数。

如果您将`GetChild()`功能替换为

```
 public static T GetChild<T>(this T src)
    {
        if (typeof(T) == typeof(DependencyObject)) return default(T);
        else return default(T);
    } 
```

或类似的东西，它**不需要**您包含对您正在运行的*WindowsBase*的引用。但是，如果您添加`where T : DependencyObject`到签名中，则**确实**需要它。

实际上，您可以在项目中使用您想要的任何程序集引用，只要您不以任何方式公开它们。一旦你公开了它们，那么使用你的库的每个其他项目都需要能够处理它们，因此需要这些引用本身。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T21:19:33.217

也许 ILMerge 会解决这个问题。这个想法是您创建 2 个 dll 并将它们合并为一个。这样你就可以有一个 dll 但引用它两次。然后，您可以将 GUI 代码与其他代码分开，只将您需要的引用添加到特定项目中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T09:10:57.290

答案很简单。这是因为该方法是公开的。这意味着`lib2.dll`（在您的情况下）它是可见的。换句话说，您可以调用此方法。

它还有一个约束，只有继承自的类`DependencyObject`才能调用此方法。这就是您需要引用“WindowsBase”的原因。**

# android - 从“canonical_addresses”表中获取地址

> ID：12492602
> 
> 赞同：7
> 
> 时间：2012-09-19T10:08:58.473
> 
> 标签：android, android-contentprovider

我正在开发一个 Android 应用程序。我从以下 uri 中获取了收件人 ID。

```
content://mms-sms/conversations?simple=true 
```

现在我想从 canonical_addresses 获取地址`" table using the recipient id. But I don't have any idea to query canonical_addresses table"`。我在网上搜索了很多。请朋友帮我找解决办法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-19T10:50:37.253

规范表有两列，`_id`并且`address`. 当您获得收件人 ID 时，您会在规范地址表中查找该 ID。对于多个收件人，ID 由空格分隔，因此您必须将结果拆分为

`recipient_ids.split(" ")`

并查找每个 id。

```
getContentResolver().query(Uri.parse("content://mms-sms/canonical-addresses"), null, "_id = " + recipientId, null, null); 
```

或者

```
getContentResolver().query(Uri.parse("content://mms-sms/canonical-address/" + recipientId), null, null, null, null); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T05:53:03.743

```
message = contentResolver.query(uri, null,null, null,SORT_ORDER);
            if(message != null){
                while (message.moveToNext()) {
                        String id = message.getString(message.getColumnIndex("_id"));
                        String thid = message.getString(message.getColumnIndex("thread_id"));
                        String phoneNumber = message.getString(message.getColumnIndex("address"));
                        String person = message.getString(message.getColumnIndex("person"));
                        //String present = message.getString(message.getColumnIndex("reply_path_present"));
                        //Log.v("sms "+thid,id);
                        //Log.v("sms "+present,present);
                        if(phoneNumber !=null ){
                                //if(phoneNumber.contains("-"))
                                    phoneNumber=phoneNumber.replaceAll("[-() ]", "");
                        }
                        else
                        {
                             Cursor c =contentResolver.query(Uri.parse("content://mms-sms/conversations?simple=true"), null, "_id = " + thid, null, null);
                             //getContentResolver().query(Uri.parse("content://mms-sms/canonical-addresses"), null, "_id = " + recipientId, null, null);
                             if(c.moveToNext())
                             {

                                 phoneNumber = c.getString(3);
                                 if(phoneNumber !=null ){
                                        //if(phoneNumber.contains("-"))
                                     Log.v(" id=>" +id+ " thid=>"+thid +" first = > " , c.getString(3));
                                }
                             }
                             c.close();
                             c =contentResolver.query(Uri.parse("content://mms-sms/canonical-addresses"), null, "_id = " + phoneNumber, null, null);
                             if(c.moveToNext())
                             {
                                 Log.v(thid +" second = > " , c.getString(1));
                                 phoneNumber = c.getString(1);
                                 phoneNumber=phoneNumber.replaceAll("[-() ]", "");
                             }
                             c.close(); 
```

# iphone - How to print integer values while debugging in Xcode?

> ID：12492606
> 
> 赞同：3
> 
> 时间：2012-09-19T10:09:08.190
> 
> 标签：iphone, ios, xcode, ipad

While debugging an iOS application, I know how to print values of objects using :

**print** "variable name"
**po**    "variable name"

I wanted to know how to print values of variables which are not object-type, like for example NSInteger, int, float etc.

Thanks.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T10:12:15.590

just use `p intVar` to print variables.
Sometimes you need to cast: `p (CGRect)[[self view] frame]`

# cuda - Value assigning in kernel with threadIdx

> ID：12492608
> 
> 赞同：0
> 
> 时间：2012-09-19T10:09:17.307
> 
> 标签：cuda, gpgpu, nvidia

I tried a method so that the data transfer from Host to Device will not be used. Normally, we assign values to the elements in the Host array using a loop and transfer it to the Device. This works fine for me on 1D and 2D arrays. The new method i tried is, to give the values to the array elements in the kernel. I succeeded for 1D arrays. But, for 2D array, the result is `0`. My device can support (512,512) threads per block. The output values are coming fine upto Length=22 but displays '0' for Length=23 `[22<sqrt(512)<23]`. As per `[22<sqrt(512)<23]`, i can see that only `22x22` threads are being used. Whats the problem?? Why is this happening?

The Code:

```
 const int Length=23; 
```

> **Main Function:**

```
 int A[Length],B[Length],C[Length],D[Length],*Ad,*Bd;
    int size=Length*sizeof(int);
    cudaMalloc((void**)&Ad,size);
    cudaMalloc((void**)&Bd,size);
    dim3 dimGrid(1,1);
    dim3 dimBlock(Length,Length);
    FuncG<<<dimGrid,dimBlock>>>(Ad,Bd);
    cudaMemcpy(C,Ad,size,cudaMemcpyDeviceToHost);
    cudaMemcpy(D,Bd,size,cudaMemcpyDeviceToHost);
    for(int i=0;i<Length;i++){
        printf("%d  %d\n",C[i],D[i]);
    }
    return 0; 
```

> **Kernel Function:**

```
__global__ void FuncG(int *Ad,int *Bd){
    int tx=threadIdx.x;
    int ty=threadIdx.y;
    Ad[tx]=tx;
    Bd[ty]=ty;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:33:59.917

您的设备每个块只能支持 512 个线程。前两个线程块尺寸的最大*尺寸*为 512。22x22 块（484 个线程）是合法的块大小，但 23x23 块（529 个线程）不是。

您得到 0 输出，因为内核从未运行。如果您检查它，您会发现内核启动失败并出现无效的执行配置错误。检查此类启动失败的规范方法如下：

```
FuncG<<<dimGrid,dimBlock>>>(Ad,Bd);
if (cudaPeekAtLastError() != cudaSuccess) {
    // handle error.....
} 
```

# c# - 如何以默认隔离级别从 C#（wcf 服务）真正执行事务数据库操作（sql server）...基于示例

> ID：12492613
> 
> 赞同：0
> 
> 时间：2012-09-19T10:09:23.573
> 
> 标签：c#, sql-server, database, transactions, isolation-level

我有一个非常重要的问题需要帮助。我将尝试将问题简化为以下示例：

有一个 wcf/web 服务实现（但它可以是任何其他模块），如下所示：

```
public class Svc: ISvc
{
   public void PerformSimpleOperations()
   {
      try
      {
          // insert in other tables here (calling stored procs)

          /* important line here */
          dbHandler.InsertRecordInSpecificTable(recordType1);

          // commit transaction (default isolation level)
          dbHandler.CommitTransactDB();
      }
      catch
      {
          dbHandler.RollbackTransactDB();
      }
   }
   public void PerformComplexOperations()
   {
      try
      {
          // some complex operations here involving db (calling stored procs)

          /* important lines here */
          dbHandler.InsertRecordInSpecificTable(recordBEGIN);    
          foreach (var recordType2 in arrayOfRecordsType2)
              dbHandler.InsertRecordInSpecificTable(recordType2);    
          dbHandler.InsertRecordInSpecificTable(recordEND);    

          // commit transaction (default isolation level)
          dbHandler.CommitTransactDB();
      }
      catch
      {
          dbHandler.RollbackTransactDB();
      }
   }
} 
```

有 2 种不同的方法可以将**基于事务的记录（具有****默认隔离级别**的ADO.NET SQLTransaction ）插入数据库中的一个“特定表”（当然，不同线程随时调用）。

从示例中可以看出，第一种方法只插入简单的*'type1'*记录，但第二种方法插入大量的*'type2'*记录，以一些*'BEGIN'*和*'END'*标识符开头，因此这串可以是稍后由另一个应用程序整体处理。

由于所有记录都具有自动增量 ID，因此我的意图是在此表中在*'BEGIN' 和 'END'*之间只有*'type2' 的*记录。

问题是：在这个表中，在“ *BEGIN”*和*“END”*记录之间，是否有可能出现*“type1”的*滑动记录？

AFAIK 数据库应该在该事务期间被锁定（默认隔离级别），通常这种行为不应该发生，所以我的实现应该是正确的。这是正确的还是我错过了一些重要的事情？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:42:17.900

默认的事务隔离级别是`READ COMMITTED`——即——你不能读取未修改的未提交数据。这不是表锁，也不能确保一次只能发生一个操作——您通常也不希望它发生。

也许`SERIALIZABLE`对您的代码来说是一个更好的选择。

[http://msdn.microsoft.com/en-us/library/ms173763.aspx](http://msdn.microsoft.com/en-us/library/ms173763.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T10:47:36.037

你忽略了所有重要的细节......

*   你使用什么样的交易？
    *   [`TransactionScope`](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)对象？
    *   [`SqlTransaction`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqltransaction.aspx)对象？
    *   明确的[`BEGIN TRANSACTION`](http://msdn.microsoft.com/en-us/library/ms188929.aspx)陈述？
    *   WFC 服务是否被屏蔽为需要事务，或者绑定是否流经事务？

所有这些都会极大地影响答案。

但更重要的是，你在你的陈述中犯了一些非常危险的谬误：

> 我的意图是在此表中的“开始”和“结束”之间只有“类型 2”的记录。

这种说法没有意义。它使用了一个根本不存在的概念：“表中的记录......之间”。表中的记录不在任何其他记录之前，不在之后，也不在任何其他记录之间。**顺序的概念不能应用于表**，永远不会。作为一个概念，顺序只存在于**结果**中，即。在 SELECT 的返回中，并且是未确定的，除非`ORDER BY`添加了显式子句。因此，您可以重新表述您的问题，因为*我想检索由`PerformComplexOperation`一个原子返回*插入的所有记录，而答案是使用适当的键：

*   为调用生成一个键值
*   插入的每条记录都使用此键作为列值
*   检索添加适当的`WHERE`子句以仅过滤此键

总体而言，您将问题简化到无法理解的程度。而是使用您并不真正了解的概念发布抽象问题，向您发布实际的数据模型模式和实际代码，以及您遇到的问题。

# design-patterns - 更改 haxe 对象的“this”范围。可能的？

> ID：12492626
> 
> 赞同：2
> 
> 时间：2012-09-19T10:10:15.133
> 
> 标签：design-patterns, delegates, haxe

是否可以从外部更改对象的“this”范围，就像在 javascript 中一样？

我看到一个有趣的应用程序，其中可以创建一个包含多个组件的容器对象，其中每次组件自己修改一个属性时，它实际上隐式地修改了容器上的一个属性。

别弄错我的意思。我知道使用事件、绑定、观察者等可以达到相同的效果。可能性确实是无穷无尽的。我只是对这种时髦的委派方式感到好奇。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T13:19:45.863

您可以使用[Reflect.callMethod](http://haxe.org/api/Reflect)来实现，但您必须知道它在编译时不是类型安全的。这是一个小例子：

```
class Test
{
    public var a:Int;

    public function new()
    {
        this.a = 0;
    }
}

class Test2
{
    public var a:Int;

    public function new()
    {
        this.a = 0;
    }

    public function increment()
    {
        this.a++;
    }

    static public function main()
    {
        var t = new Test2();
        var t2 = new Test();
        Reflect.callMethod(t2, Reflect.field(t, "increment"), []);

        trace(t2.a); //Traces 1
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T08:28:34.513

另一种可能的方法是使用宏来重建代码以使用另一个对象而不是这个。但是，这将相对困难且 IMO 毫无意义。我不太了解您的想法，但根据我从您的描述中了解到的情况，我建议您查看也会修改容器的组件上的内联 getter 和 setter。

# magento - How do I split orders between Magento Multi Stores?

> ID：12492642
> 
> 赞同：1
> 
> 时间：2012-09-19T10:11:31.883
> 
> 标签：magento, store, magento-1.7

We have a magneto store and we sell decorations that are season based. So we need to have Magento possibly split into multi stores each housing the different seasons. But I need it to ONLY allow orders from 1 season to go through the system at a time not to have the customer able to mix their products up and then complete that order.

Does anyone know if it is possible to have settings changed to lock products/carts to a single store with in a multi store site?

Thanks,

Simon.

# string - 如何在 MongoDB 中查询“虚假”值？

> ID：12492645
> 
> 赞同：5
> 
> 时间：2012-09-19T10:11:52.250
> 
> 标签：string, mongodb, boolean

我想在 Mongo 集合中查询缺少特定字段或具有在 Python 中评估为 false 的值的文档。这包括原子值`null`, `0`, `''`（空字符串）, `false`, `[]`. 但是，包含此类值的数组（例如`['foo', '']`或 just `['']`）*不是*虚假的，并且*不能*匹配。我可以用 Mongo 的结构化查询（不使用 JavaScript）来做到这一点吗？

`$type`似乎没有帮助：

```
> db.foo.insert({bar: ['baz', '', 'qux']});
> db.foo.find({$and: [{bar: ''}, {bar: {$type: 2}}]});
{ "_id" : ObjectId("50599937da5254d6fd731816"), "bar" : [ "baz", "", "qux" ] } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T12:04:34.987

这应该工作

```
db.test.find({$or:[{a:{$size:0}},{"a.0":{$exists:true}}]}) 
```

只需确保该`a`字段内部没有带有`0`密钥的对象。

例如

```
> db.test.find()

{ "_id": ObjectId("5059ac3ab1cee080a7168fff"), "bar": [ "baz", "", "qux" ] }
{ "_id": ObjectId("5059ac48b1cee080a7169000"), "hello": 1, "bar": false, "world": 34 }
{ "_id": ObjectId("5059ac53b1cee080a7169001"), "hello": 1, "world": 42 }
{ "_id": ObjectId("5059ac60b1cee080a7169002"), "hello": 13, "bar": null, "world": 34 }
{ "_id": ObjectId("5059ac6bb1cee080a7169003"), "hello": 133, "bar": [ ], "world": 334 }
{ "_id": ObjectId("5059b36cb1cee080a7169004"), "hello": 133, "bar": [ "" ], "world": 334 }
{ "_id": ObjectId("5059b3e3b1cee080a7169005"), "hello": 133, "bar": "foo", "world": 334 }
{ "_id": ObjectId("5059b3f8b1cee080a7169006"), "hello": 1333, "bar": "", "world": 334 }
{ "_id": ObjectId("5059b424b1cee080a7169007"), "hello": 1333, "bar": { "0": "foo" }, "world": 334 }

> db.test.find({$or: [{bar: {$size: 0}}, {"bar.0": {$exists: true}}]})

{ "_id": ObjectId("5059ac3ab1cee080a7168fff"), "bar": [ "baz", "", "qux" ] }
{ "_id": ObjectId("5059ac6bb1cee080a7169003"), "hello": 133, "bar": [ ], "world": 334 }
{ "_id": ObjectId("5059b36cb1cee080a7169004"), "hello": 133, "bar": [ "" ], "world": 334 }
{ "_id": ObjectId("5059b424b1cee080a7169007"), "hello": 1333, "bar": { "0": "foo" }, "world": 334 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T10:50:06.160

我发现了这个：[https](https://jira.mongodb.org/browse/SERVER-1854?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel) ://jira.mongodb.org/browse/SERVER-1854?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel从前一天。

我可以在我的 MongoDB 2.0.1 上复制它（我也玩了一下，看看它是否把它当作别的东西）：

```
> db.g.find()
{ "_id" : ObjectId("50599eb65395c82c7a47d124"), "bar" : [ "baz", "", "qux" ] }
{ "_id" : ObjectId("5059a0005395c82c7a47d125"), "a" : 3, "b" : { "a" : 1, "b" : 2 } }
> db.g.find({bar: {$type: 4}});
> db.g.find({a: {$type: 2}});
> db.g.find({a: {$type: 16}});
> db.g.find({bar: {$type: 16}});
> db.g.find({bar: {$type: 2}});
{ "_id" : ObjectId("50599eb65395c82c7a47d124"), "bar" : [ "baz", "", "qux" ] }
> db.g.find({bar: {$type: 3}});
> db.g.find({b: {$type: 3}});
{ "_id" : ObjectId("5059a0005395c82c7a47d125"), "a" : 3, "b" : { "a" : 1, "b" : 2 } } 
```

当我使用`$type`4 时，我无法获取包含数组的文档。如您所见，`$type 3`工作正常（可能与：[https](https://jira.mongodb.org/browse/SERVER-1475) ://jira.mongodb.org/browse/SERVER-1475 相关）但数组似乎无法被捡起来。

您可能会看到错误。如果您在 MongoDB 网站 (jira.mongodb.org) 上提交 JIRA，它可能有助于解决问题。

但是，该`$type`操作可能无法解决您的问题。这可能通过客户端方法更好地完成，例如完全取消设置字段，如果它没有您查询存在的方式的元素。这使您的查询模式标准化，并且总体上更容易集成。

因此，我个人的建议是将“虚假”值标准化为一个单一的相关值。

## 编辑

我注意到他们已将原始错误标记为重复（这就是它被关闭的原因）但是我不确定它是如何重复的。这些数组不是作为对象而是作为字符串被拾取的，很可能是因为 $type 作用于该字段中的每个元素而不是字段本身（或类似的东西）。

我仍然会打开一个 JIRA 并强调根本无法拾取该阵列。

# javascript - node js and mustache

> ID：12492646
> 
> 赞同：1
> 
> 时间：2012-09-19T10:11:55.360
> 
> 标签：javascript, node.js, mustache

I'm trying to learn nodejs. I want to serve a static html file using mustache and nodejs. I create a module for start the server with this code :

```
var http = require("http");
function startServer(){
    function onRequest(request,response){
        console.log("Request received");
        response.writeHead(200, {"Content-type" : "text/html" });
        response.write("hello");
        response.end();
    }
    console.log("The server is running at http://localhost:8888");
    http.createServer(onRequest).listen(8888);
    }

exports.startServer = startServer; 
```

and then I do this on the indexjs file :

```
var server = require("./server");
var util = require("util");
var fs= require("fs");
var mu = require("mu2");

function renderIndex(){
   var streamIndex = mu.compileAndRender('index.html',{"name" : "Antonio"});
    util.pimp(streamIndex, response);
}

server.startServer(renderIndex); 
```

I know that I'm doing something completely wrong, but can't get where is the error. I tried to merge 2 different tutorials i was reading about nodejs.

P.S: I know that i could use express or other frameworks, but i would like to start using nodejs from scratch to understand how it really works.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T10:49:37.860

首先，您的代码需要`renderIndex()`在某个时候调用。其次，除非自从我上次查看 mustache 以来，它被认真地重写过，否则`mu.compileAndRender`会返回一个字符串，您通常需要使用`httpResponse`s`write`或`end`方法发送该字符串。`util.pimp`是一个错字（尽管无可否认，这很有趣，令人钦佩）；`util.pump`现在已弃用，如果您有`readStream`首选方法是使用与您要发送到`pipe`的参数相对应的参数调用其方法（例如 an ）。`writeStream``httpResponse`

我认为你试图一次学习太多；你可能最好先学习如何使用`express`来处理路由和类似的东西（暂时忽略 express 的模板/渲染能力），然后，一旦你掌握了它的窍门，就开始渲染和模板（小胡子就是这样）你会认为 express 的开发人员已经集成了它，但由于某种原因他们没有集成它）。

# mysql - 将多列结果插入单列表

> ID：12492656
> 
> 赞同：3
> 
> 时间：2012-09-19T10:12:35.357
> 
> 标签：mysql, sql, split

我有一个包含三列的“电影”表：“id”、“master_id”和“searchMe”（简化）。我有另一个表'temp_ids'，只有一个列：'id'。这是一个临时表，但我认为这并不重要。

当我对我的表“电影”进行查询时

```
SELECT `id`, `master_id` FROM 'movies' WHERE searchMe = '1'; 
```

我得到一个多列结果。现在我想将每个 id 和每个 master_id 插入到“temp_ids”表中，但一次插入一个。所以如果我的结果是

```
id_1 | master_1
id_2 | master_2
id_3 | NULL 
```

我希望我的 temp_ids 看起来像

```
id_1
master_1
id_2
master_2
id_3 
```

所以我想将结果中的每一列都转换成自己的行。我怎样才能以优雅的方式做到这一点？我知道我可以在多个查询中做到这一点，分别搜索 id 和 master_id，我知道我可以用 PHP 左右解决这个问题。但是，如果可能的话，我希望它在单个 mysql 查询中解决该问题。

我为此做了一个 sqlfiddle： [http ://sqlfiddle.com/#!2/b4a7f/2](http://sqlfiddle.com/#!2/b4a7f/2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:16:13.640

会是这样

```
INSERT INTO temp_ids(id)
SELECT id 
FROM
(
   SELECT id
   FROM FirstTable 
   UNION
   SELECT master AS id
   FROM SecondTable 
) t 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T10:16:21.687

对于`SELECT`您可以使用的数据`UNION ALL`：

```
SELECT  `id`
FROM movies
WHERE searchMe = 1
union all
SELECT `master_id`
FROM movies
WHERE searchMe = 1
  and master_id is not null 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/b4a7f/16)

这样做，您无法区分每列的值，因此您始终可以添加一个指标，这将为您提供两列，但您知道数据来自哪里：

```
SELECT  `id`, 'id' type
FROM movies
WHERE searchMe = 1
union all
SELECT `master_id`, 'master'
FROM movies
WHERE searchMe = 1
  and master_id is not null 
```

然后你就可以使用这个查询来`INSERT INTO temp`使用这个`SELECT`

# php - PHP PDO 最大值

> ID：12492657
> 
> 赞同：1
> 
> 时间：2012-09-19T10:12:36.207
> 
> 标签：php, mysql, pdo

假设我有一个名为 groupID 的列，它是给一组人的数字。基本上我想做的就是从该列中获取最大值，加 1 并将该输入存储到 php.ini 中的一个变量中。

例如，如果最后一个组的 id 是 5，那么下一个组的 id 应该是 6。有什么想法吗？

```
$gid = $link->prepare("SELECT MAX(Group_ID) FROM Conference");
$gid->execute();
$groupid = $gid->fetchColumn();

$stmt = $link -> prepare("INSERT INTO Conference (`Group_ID`) VALUES (:groupid)");
$stmt->bindParam(':groupid', $groupid);
$stmt->execute(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T10:14:57.023

[`AUTO_INCREMENT`](http://dev.mysql.com/doc/refman/5.5/en/example-auto-increment.html)当您根本不必担心这一点时，使用列会简单得多。

要手动解决它，`SELECT MAX(id) FROM table`将为您提供当前使用的最大 id，并为其添加 +1 即可实现目标。这很容易受到竞争条件的影响（如果两个客户端这样做并从中获得相同的值`MAX()`怎么办？），但恢复模式非常简单：重复直到成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T10:48:23.197

$gid = $link->prepare("SELECT MAX(Group_ID) FROM Conference");

$stmt = $link -> prepare("INSERT INTO Conference( `Group_ID`) SELECT MAX(Group_ID) FROM Conference");

$stmt->执行（）；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T10:49:09.787

试试喜欢

```
$gid = $link->prepare("SELECT MAX(Group_ID) as maximum FROM Conference"); 
```

# npapi - 如何创建窗口化插件？

> ID：12492658
> 
> 赞同：0
> 
> 时间：2012-09-19T10:12:35.793
> 
> 标签：npapi, browser-plugin, windowless, windowed

我已经使用 NPAPI 创建了一个 safari 插件，我想在我的插件中添加一个 NSView。

当我尝试获取 NPWindow throw function **NPP_SetWindow(NPP instance, NPWindow* window)**时，第二个参数为 nil。

我认为我的插件是无窗口的，但我不知道如何创建有窗口的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:17:27.337

Mac 上的 NPAPI 不支持 NSView 作为窗口模式。有两种支持的模式：

*   [CoreAnimation](https://wiki.mozilla.org/Plugins%3aCoreAnimationDrawingModel)（或在 Chrome 和 Firefox 上[无效的CoreAnimation）](https://wiki.mozilla.org/NPAPI%3aInvalidatingCoreAnimation)
*   [核心图形](https://wiki.mozilla.org/NPAPI%3aCoreGraphicsDrawing)

曾经有一个 QuickDraw 模式，但已被弃用。

有关更多信息，请参阅[Stuart Morgan 关于该主题的出色博客文章](http://www.escapedthoughts.com/weblog/geek/P110308-mac-npapi-plugins.writeback)。

可以将 NSView 渲染到 CoreGraphics 上下文，但您必须代理所有事件，而且它远非完美。

**编辑：**为了进一步解释您的问题的答案，window 参数为 NULL 的原因（它是 C api，而不是 Obj C，所以它是 NULL，而不是 nil ......尽管它们是相同的东西 =]）是因为在在[Cocoa 事件模型](https://wiki.mozilla.org/NPAPI%3aCocoaEventModel)中，您将获得一个 CGContextRef 作为[绘图事件](https://wiki.mozilla.org/NPAPI%3aCocoaEventModel#Draw_event)的一部分，该事件仅在该事件的上下文中有效。

# file - 在 txt 文件中显示目录中可用的最新文件的批处理脚本，按日期

> ID：12492670
> 
> 赞同：1
> 
> 时间：2012-09-19T10:13:16.420
> 
> 标签：file, date, batch-file

我有这个简单的批处理脚本：

```
@echo off
dir /o-d "K:\DIR\DIR\*.exe" > "D:\Logs\Files.txt" 
```

它按日期显示 txt 中的所有文件。

我的问题是：我怎样才能让它按日期只显示最后一个文件而不是该特定目录中的所有文件？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:56:09.670

### 检索最后一行

如果你只对*最后一个*文件感兴趣，你可以这样做：

```
@echo off
for /f "tokens=*" %%a in ('dir /o-d "K:\DIR\DIR*.exe" ^| findstr /C:"/"') do set last=%%a
echo %last% 
```

`dir`这仅显示命令输出中的最后一个文件名。如果要将其重定向到文件，请替换`echo %last%`为：

```
echo %last% > "D:\Logs\Files.txt" 
```

### 检索第一行

如果您对*第一个*文件感兴趣，则需要将代码稍微更改为：

```
for /f "tokens=*" %%a in ('dir /o-d "K:\DIR\DIR*.exe" ^| findstr /C:"/"') do set first=%%a && goto Done
:Done
echo %first% 
```

同样，如果您有兴趣将其重定向到文件，请替换`echo %first%`为：

```
echo %first% > "D:\Logs\Files.txt" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T10:45:23.320

```
@echo off
setlocal 
for /f "delims=" %%F in ('dir /b /o-d') do (
  set file=%%~nxF %%~tF
  goto display
)
:display
echo %file% 
```

笔记：

*   要理解`for`和“解密” `%%~nxF %%~tF`，请阅读`for`帮助（`help for`从命令行）
*   `goto`是否只是在第一个（最新）文件/目录之后打破循环。
*   要重定向到文件，请重定向批处理本身 ( `batch.bat >myFile`) 或最后回显 ( `echo %file% > myFile`)
*   Dir 默认匹配子目录和文件。仅用于 `dir /a-d`匹配文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T13:23:04.547

只获取最新文件的文件名

```
@echo off
for /f "tokens=*" %%x in ('dir /b /o-d "K:\DIR\DIR\*.exe"') do (
    echo %%x
    exit /b 0
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T10:16:35.090

我认为使用 shell/batch 命令是不可能的。

您可以编写另一个程序来选择 Files.txt 文件的第一行

# d - 为什么 D 中没有 `isIn` 特征？

> ID：12492674
> 
> 赞同：0
> 
> 时间：2012-09-19T10:13:38.407
> 
> 标签：d

我是D新手，所以我可能会完全搞错，请赐教！

据我从[文档](http://dlang.org/traits.html)中了解到， D 提供了用于查找函数参数装饰的特征：

```
void fooref(ref int x) { 
  static assert(__traits(isRef, x)); 
  static assert(!__traits(isOut, x)); 
  static assert(!__traits(isLazy, x)); 
} 
void fooout(out int x) { 
  static assert(!__traits(isRef, x)); 
  static assert(__traits(isOut, x)); 
  static assert(!__traits(isLazy, x)); 
} 
void foolazy(lazy int x) { 
  static assert(!__traits(isRef, x)); 
  static assert(!__traits(isOut, x));
  static assert(__traits(isLazy, x));
} 
```

*为什么没有发现`in`装饰的特征？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T00:33:19.580

`__traits`里面[`std.traits`](http://dlang.org/phobos/std_traits.html)有很多好东西，但不一定是完整的。因此，如果您发现您确实认为应该可以使用`__traits`or进行检查的内容`std.traits`，请[创建增强请求](http://d.puremagic.com/issues)。

现在，话虽如此，有一种方法来检查`in`. `in`是一样的`const scope`，如果你*可以*检查`in`，那么`const scope`也必须匹配它。真的，你在乎`const`还是在乎`scope`？还是你都在乎？检查那些，而不是`in`.

`scope`但是，不幸的是，目前，检查何时使用实际上并不起作用`in`。[`std.traits.ParameterStorageClassTuple`](http://dlang.org/phobos/std_traits.html#ParameterStorageClassTuple)可用于获取参数的存储类（无、、、、`scope`和/或） `out`，但目前无法为. 所以，就目前而言，你运气不好。该[错误](http://d.puremagic.com/issues/show_bug.cgi?id=8695)已被报告。`ref``lazy``scope``in`

但是您仍然可以`const`通过执行类似的操作来检查（您正在检查的参数的类型在哪里）`is(T == const)`。`T`

# html - 创建跨浏览器兼容的圆形边框的最佳方法是什么？

> ID：12492675
> 
> 赞同：0
> 
> 时间：2012-09-19T10:13:54.087
> 
> 标签：html, rounded-corners, css

> **可能重复：**
> [跨浏览器弯曲边框](https://stackoverflow.com/questions/2795097/cross-browser-curved-borders)

我想创建包含设计边框的 div 和其他元素。边框将是基本的 CSS 就绪边框。虽然我可以编写代码，但我想知道使圆角边框属性跨浏览器兼容的最佳方法和过程。（至少在广泛接受的浏览器中（Chrome、Firefox、IE、Safari）。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:49:06.580

`border-radius`Internet Explorer（版本 9 以上）、Firefox（版本 4 以上）、Chrome、Safari 和 Opera 已支持该属性。但是，如果你想确定你可以使用这样的东西：

```
.border-radius {
    border-radius: 5px;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:28:35.303

```
 -moz-border-radius: 20px;
  -webkit-border-radius: 20px;
  -khtml-border-radius: 20px;
  border-radius: 20px; 
```

[资源](http://siglingsoftware.blogspot.ca/2012/05/css-rounded-corners-for-all-major.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:32:13.247

看看这个有用的网站 [http://www.css3.info/preview/rounded-border/](http://www.css3.info/preview/rounded-border/) 它有解释和工作示例也看看 W3C 建议。非常有帮助 [http://www.w3.org/TR/css3-background/#corner-shaping](http://www.w3.org/TR/css3-background/#corner-shaping)

# php - 字符串类型的预期参数，给定对象 - Symfony2

> ID：12492677
> 
> 赞同：2
> 
> 时间：2012-09-19T10:14:00.533
> 
> 标签：php, symfony, doctrine-orm

我有朋友和类别——每个朋友都有一个类别。在主页上可以看到所有朋友的列表，并且有一个包含所有类别的下拉菜单和一个提交按钮 - 当您选择类别并单击它时，您只会看到该类别的朋友。

这是**Category.php**：

```
<?php

namespace EM\MyFriendsBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * EM\MyFriendsBundle\Entity\Category
 * @ORM\Entity
 * @ORM\Table(name="categories")
 * @ORM\Entity(repositoryClass="EM\MyFriendsBundle\Entity\SameRepository")
 */
class Category 
{
    /**
     * @ORM\Column(type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\Column(type="string", length=100)
     * @Assert\NotBlank()
     * @Assert\MinLength(
     *         limit=3,
     *         message="The name is too short." )
     */
    protected $name;

    /**
     * @ORM\Column(type="string", length=225, nullable=true)
     */
    protected $description;

     /**
     * @ORM\ManyToOne(targetEntity="User", inversedBy="categories")
     * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
     */
    protected $user;

    /**
     * @ORM\OneToMany(targetEntity="Friend", mappedBy="category")
     * @ORM\OrderBy({"name" = "ASC"})
     */
    protected $friends;

    public function __construct()
    {
        $this->friends = new \Doctrine\Common\Collections\ArrayCollection();
    } 

    public function getId()
    {
        return $this->id;
    }

    public function setName($name)
    {
        $this->name = $name;
    }

    public function getName()
    {
        return $this->name;
    }

    public function setDescription($description)
    {
        $this->description = $description;
    }

    public function getDescription()
    {
        return $this->description;
    }

    public function setUser(\EM\MyFriendsBundle\Entity\User $user)
    {
        $this->user = $user;
    }

    public function getUser()
    {
        return $this->user;
    }

    public function addFriend(\EM\MyFriendsBundle\Entity\Friend $friend)
    {
        $this->friends[] = $friend;
    }

    public function getFriends()
    {
        return $this->friends;
    }
} 
```

**选择CatType.php**：

```
<?php

namespace EM\MyFriendsBundle\Entity;

use Symfony\Component\Form\FormBuilder;
use Symfony\Component\Form\AbstractType;

class ChooseCatType extends AbstractType
{
    protected $user;

    function __construct($user) 
    {
        $this->user = $user;
    }

    public function buildForm(FormBuilder $builder, array $options)
    {
        $user = $this->user;

        $builder->add('name', 'entity', array(
            'class' => 'EMMyFriendsBundle:Category',
            'property' => 'name',
            'empty_value' => 'All friends',
            'required' => false,
            'query_builder' => function ($repository) use ($user)
                { return $repository->createQueryBuilder('cat')
                                    ->select('cat')
                                    ->where('cat.user = :user')
                                    ->orderBy('cat.name', 'ASC')
                                    ->setParameter('user', $user);
                }, ));
    }

    public function getName()
    {
        return 'choose_category';
    }
} 
```

这是控制器的操作：

```
public function filterAction(Request $request)
   {
       $this->init();

       $cat = new Category();

       $dd_form = $this->createForm(new ChooseCatType($this->user), $cat);

       if($request->getMethod() == 'POST') { 
           $dd_form->bindRequest($request);

           if($cat->getName() == null) {      
               return $this->redirect($this->generateUrl('home_display'));
           }

           $filter = $cat->getName()->getId();

           if ($dd_form->isValid()) {   
               $friends = $this->em->getRepository('EMMyFriendsBundle:Friend')
                   ->filterFriends($filter);

               if(!$friends) {
                   $this->setFlash('There are no frieds in this category.', 'error');
                   return $this->redirect($this->generateUrl('home_display'));
               }
           }

           return $this->render('EMMyFriendsBundle:Home:filtered_home.html.twig', array(
                   'friends' => $friends, 'category' => $cat->getName()->getName(), 
                   'dd_form' => $dd_form->createView()));   
       }

       return $this->redirect($this->generateUrl('home_display'));
   }
} 
```

其中`init()`集`$this->em = $this->getDoctrine()->getEntityManager();`和`$this->user = $this->get('security.context')->getToken()->getUser();`

我收到一个错误：`Expected argument of type string, object given`，但无法理解它来自哪里以及如何修复它。请问有什么帮助吗？这将不胜感激。我认为它发生在这一行`$dd_form->bindRequest($request);`，因为当我把`exit;`它放在它前面时程序退出，但是当我把它放在它后面时，它会显示错误。

另一件事是，当我删除

```
@Assert\MinLength(
         *         limit=3,
         *         message="The name is too short." ) 
```

它在**Category.php**中的 name 属性之上，一切正常。

任何想法都会有所帮助！谢谢你的时间！

还有一件事-为什么要获取我应该使用的类别的ID `$cat->getName()->getId();`？我认为它应该是 only `$cat->getId()`，但事实并非如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T10:46:29.467

当您使用“实体”字段类型时，您从中得到的是一个实体，因此将该字段称为“名称”是没有意义的。因此，我会将您的构建器更改为：

```
$builder->add('category', 'entity', array(
... 
```

然后，您不需要将 Category 对象传递给此表单构建器。这通常在表单将每个字段与对象属性连接时完成，但事实并非如此。您没有使用此表单来获取 Category 对象的“category”属性。这只是一个表单，它将返回一个 Category 对象，您可以从表单数据中获取该对象。因此，将您的控制器更改为：

```
public function filterAction(Request $request)
   {
       $this->init();

       $dd_form = $this->createForm(new ChooseCatType($this->user));

       if($request->getMethod() == 'POST') { 
           $dd_form->bindRequest($request);

           if ($dd_form->isValid()) {   
               $data = $form->getData();
               $cat = $data['category'];

               $filter = $cat->getId();
               $friends = $this->em->getRepository('EMMyFriendsBundle:Friend')
                   ->filterFriends($filter);

               if(!$friends) {
                   $this->setFlash('There are no frieds in this category.', 'error');
                   return $this->redirect($this->generateUrl('home_display'));
               }
               return $this->render('EMMyFriendsBundle:Home:filtered_home.html.twig', array(
                   'friends' => $friends, 'category' => $cat->getName(), 
                   'dd_form' => $dd_form->createView()));   
           }

       }

       return $this->redirect($this->generateUrl('home_display'));
   }
} 
```

# opengl-es - Opengl ES 纹理渲染概念

> ID：12492680
> 
> 赞同：1
> 
> 时间：2012-09-19T10:14:20.147
> 
> 标签：opengl-es, 2d, textures

我打算用 Javascript 编写一个简单的 2D 平台游戏，其中每个帧都将使用不同的（纹理）图块绘制。以下是我的问题：

*   如何渲染具有不同纹理的不同矩形/四边形？我的意思是我是否为岩石瓦片和草瓦片编写单独的片段着色器，并且是否将每种瓦片类型的顶点数据保存在单独的缓冲区中？我想把我所有的瓦片顶点数据放在一个缓冲区中，但是我如何指定这个瓦片是一个必须得到那个草纹理的草瓦片？

*   当我将它们绑定到纹理单元时，我的纹理可以有多大？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T18:30:33.303

> 如何渲染具有不同纹理的不同矩形/四边形？

你有两个选择：

1.  例如，为每种瓷砖（grassTex 和 rockTex）创建一个纹理。然后在绘制场景时，在绘制某种类型的所有图块之前绑定适当的纹理，例如

    ```
    glBindTexture(..., grassTex); 
    drawAllGrasstiles();
    glBindTexture(..., rockTex); 
    drawAllRocktiles(); 
    ```

2.  使用所谓的“精灵表”，您可以在其中将网格中的所有不同纹理打包成更大的纹理。所以你可能有一个纹理，其中纹理的左半部分是草，纹理的右半部分是岩石。然后，您可以在同一批次中将所有草和岩石瓷砖一起绘制，并使用纹理坐标来区分绘制纹理的哪一部分。现在，所有瓷砖的纹理坐标不再是 0 到 1，而是草的纹理坐标为 0 到 0.5，岩石的坐标为 0.5 到 1.0。

> 当我将它们绑定到纹理单元时，我的纹理可以有多大？

这取决于实现。调用 glGet`GL_MAX_TEXTURE_SIZE`查询实现限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T18:14:29.297

我建议你最大的纹理是 1024 x 1024 以获得最大的兼容性。1024 对于 XBOX 360 和 PS3 来说绰绰有余，对你来说应该绰绰有余:)。

另外，我建议您一次性渲染整个关卡并只使用一种纹理。我看不出这有什么问题。无论这一种纹理是否完全有水、岩石和鸟类，它都应该起作用。

# xtk - 使用非编译开发版xtk的HTML示例不起作用

> ID：12492683
> 
> 赞同：2
> 
> 时间：2012-09-19T10:14:25.933
> 
> 标签：xtk

我正在尝试运行 xtk 的开发版本（这是我第一次使用 github，而且我对 javascript 还很陌生……）：

*   我按照[https://github.com/xtk/X/wiki/X:DevelopersHeadsUp](https://github.com/xtk/X/wiki/X:DevelopersHeadsUp)中的说明进行操作，分叉 xtk，将其克隆到我的计算机中并运行 utils/deps.py。它现在位于 ~/myself/X，

*   接下来，我在 ~/myself/X.html 处编写了一个 html 文件，其中包含 DevelopersHeadsUp 中的示例 html 代码，

*   因为我的 .html 文件与 X 目录处于同一级别，所以我将 src="../X/lib/closure-library/closure/goog/base.js" 行更改为 src="X/lib/closure -库/闭包/goog/base.js",

*   我用 Safari (5.1.7) 打开了 X.html...

......它不起作用。

我在控制台中收到这两个错误：

> TypeError：'undefined' 不是构造函数（评估'new goog.structs.Map()'）
> 
> X.html:19TypeError: 'undefined' 不是构造函数（评估'new X.renderer3D()'）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:11:48.863

听起来不错：第一个 TypeError 是 Closure 库中的东西 - 这是正常的 :) 第二个：您可能忘记包含 goog.require('X.renderer3D'); 以及您在 run 函数之前使用的其他 XTK 类。

```
<script type="text/javascript">

  // include all used X-classes here
  // this is only required when using the xtk-deps.js file
  goog.require('X.renderer3D');
  goog.require('X.cube');

  var run = function() {

    var r = new X.renderer3D();
    r.container = 'r';
    r.init();

    var cube = new X.cube();

    r.add(cube);

    r.render();

  };
</script> 
```

# java - 获取最后添加的元素 Arraylist

> ID：12492692
> 
> 赞同：6
> 
> 时间：2012-09-19T10:14:55.713
> 
> 标签：java, arraylist

我们如何获取 ArrayList 中最后**添加**的元素。我发现[这](https://stackoverflow.com/questions/687833/how-to-get-the-last-value-of-arraylist)解释了如何获取最后一个元素，但是最后添加的元素总是最后一个元素吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-19T11:11:14.660

是的，正如其他人所说，`ArrayList`保留插入顺序。如果您想要最后添加的元素，（仅当您总是添加元素时`add(element)`）只需键入以下内容：

```
yourArrayList.get(yourArrayList.size()-1); 
```

您的答案在您说的链接中:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T10:15:55.987

是的`ArrayList`，它保留了插入的顺序

如果您通过指定 index 在特定位置显式添加元素[`add()`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#add%28int,%20E%29)，在这种情况下，您需要通过自定义 ArrayList 实现来设置插入时间，并在检索最新插入的元素时考虑计算中的时间

或者最好有一个指向最后插入项目的参考，如 [Marko Topolnik](https://stackoverflow.com/users/1103872/marko-topolnik)建议的那样，在删除时也要保持它

`LinkedHashSet`如果您不关心 set 的唯一性属性，最好使用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T10:22:11.980

如果您使用`add(element)`签名，则您的最后一个元素`ArrayList`始终是最后插入的元素。

如果您正在使用`add(index, element)`，您将无法确切知道哪个是最后一个。创建子类的最简单解决方案`ArrayList`将最后插入的元素保存在特殊变量中。

# jquery - 仅当我使用 jquery 取消选中复选框时，我才想在单击按钮时显示注释

> ID：12492695
> 
> 赞同：0
> 
> 时间：2012-09-19T10:15:00.050
> 
> 标签：jquery

请检查上面的链接。有一条注释“*请同意隐私政策和免责声明”我想在单击按钮时显示此注释，但前提是我已选中“我已阅读并同意隐私政策和免责声明”此复选框.起初我想隐藏该注释。我只想在我没有选中该复选框时才显示该注释onclick of button。请告知...

这是我的代码。

```
 $('#newprivacy').css('color','#ff0000');
 $('#newprivacy').hide();
 $('#btnContinue').click(function(e) { 
if(!document.getElementById('privacypolicy').checked) { 
// checkbox not checked e.preventDefault(); $('#newprivacy').show(); } else { 
$('#AccountSettingsForm').submit(); 
} });
 $('#privacypolicy').click(function(){ 
if ($('#privacypolicy').is(":checked")) {
 $('#newprivacy').hide();

     } });   } 
```

它不能在 chrome 和 IE 上运行，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:23:33.677

当文档首先准备好时隐藏 div....

```
$(document).ready(function(){
 $('#newprivacy').hide();
}); 
```

然后把你的代码放在那里......我认为这会奏效......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T10:23:48.870

我认为您应该查看有关使用“隐藏”属性的 w3schools 文档。

[http://www.w3schools.com/css/css_display_visibility.asp](http://www.w3schools.com/css/css_display_visibility.asp)

然后你总是可以使用 jquery 来添加和删除这个属性。或者改变它的价值观。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T10:24:38.983

大多数功能似乎都在那里，如果他们在选中复选框后取消选中该复选框，您只需要再次禁用该按钮。我在下面对您的代码进行了一些更改，即：

1.  使用`change`复选框上的事件而不是`click`事件，这样如果他们使用键盘更改其状态，它仍然会触发。
2.  使用`this`来引用事件处理函数中的复选框，而不是再次选中它，并`checked`直接在元素上访问属性，而不是使用 jQuery`.is()`函数。
3.  使用`.prop()`函数而不是`.attr()`函数来修改`disabled`按钮的属性。

jQuery代码：

```
$("#btnContinue").prop("disabled", true);
$('#newprivacy').css('color', '#ff0000');
$('#privacypolicy').change(function() {
    if (this.checked) {
        $('#newprivacy').hide();
        $("#btnContinue").prop("disabled", false);
    }
    else {
        $('#newprivacy').show();
        $('#btnContinue').prop('disabled', true);
    }
}); 
```

我假设上面的代码要么包含在`$(document).ready()`调用中，要么位于页面末尾，以便在代码执行时元素可用。

请注意，前两行的效果也可以使用 HTML 来实现，无需使用 jQuery 或 JavaScript 代码隐藏和着色它们。

而且，如果您真的想用`click`按钮上的事件处理程序完全替换该逻辑，则应该这样做：

```
$('#btnContinue').click(function(e) {
    if(!document.getElementById('privacypolicy').checked) {
        // checkbox not checked
        e.preventDefault();
        $('#newprivacy').show();
    }
    else {
        $('#AccountSettingsForm').submit();
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T10:25:07.047

```
$('#btnContinue').click(function (e) {
    e.preventDefault();

    if ($('#privacypolicy').is(":checked")) {

        //either submit form or return true
        $('#AccountSettingsForm').submit();
    }
    else {

        $('#newprivacy').show();

        return false;
    }

}); 
```

然后单击复选框，您可以删除隐私政策。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-19T10:26:01.213

像这样试试

```
 $(document).ready(function(){
 $('#newprivacy').hide();
 $("#btnContinue").attr("disabled", "disabled");
 $('#newprivacy').css('color','#ff0000');
 $('#privacypolicy').click(function(){
 if ($('#privacypolicy').is(":checked")) {
    $("#btnContinue").removeAttr("disabled");
}
else 
{
    $('#newprivacy').show();
}
});}) 
```

# python - 在 python 中使用特定文本编码打开（可能是 gzip 压缩）文件的通用方法

> ID：12492696
> 
> 赞同：4
> 
> 时间：2012-09-19T10:15:01.627
> 
> 标签：python, encoding, gzip

我正在编写一段代码，它打开一个（可能是 gzip 压缩的）文本文件，该文件可在 Python 2 和 Python 3 中使用。

如果我只有普通的文本文件（未压缩），我可以这样做：

```
import io
for line in io.open(file_name, encoding='some_encoding'):
    pass 
```

如果我不关心解码（在 python 2/3 中使用字符串/字节）

```
if file_name.endswith('.gz'):
    file_obj = gzip.open(file_name)
else:
    file_obj = open(file_name)

for line in file_obj:
    pass 
```

我怎样才能顺利处理这两种情况？换句话说，如何将 decode 与 gzip.open() 平滑集成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:33:12.927

我对此进行了简要测试，它似乎做了正确的事情。你可以提供一个文件 obj 到`gzip.GzipFile`和到`io.open`所以

```
import io
import gzip

f_obj = open('file.gz','r')
io_obj = io.open(f_obj.fileno(), encoding='UTF-8')
gzip_obj = gzip.GzipFile(fileobj=io_obj, mode='r')
gzip_obj.read() 
```

这给了我一个`UnicodeDecodeError`因为我正在阅读的文件实际上不是 UTF-8，所以它似乎在做正确的事情。

出于某种原因，如果我使用直接`io.open`打开表示该文件不是压缩文件。`file.gz``gzip`

**更新** 是的，这很愚蠢，流是错误的开始方式。

测试文件

```
ö
ä
u
y 
```

以下代码使用定义的编解码器对压缩文件进行解码

```
import codecs
import gzip
gz_fh = gzip.open('file.gz')
ascii = codecs.getreader('ASCII')
utf8 = codecs.getreader('UTF-8') 
ascii_fh = ascii(gz_fh)
utf8_fh = utf8(gz_fh)
ascii_fh.readlines()
-> UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 0: ordinal not in range(128)

utf8_fh.readlines()
-> [u'\xf6\n', u'\xe4\n', u'u\n', u'y'] 
```

需要一个流，`codecs.StreamReader`因此您应该能够将压缩或未压缩的文件传递给它。

[http://docs.python.org/library/codecs.html#codecs](http://docs.python.org/library/codecs.html#codecs)

# selenium - Geb - 在 iF rame 内单击按钮转换到新页面

> ID：12492699
> 
> 赞同：1
> 
> 时间：2012-09-19T10:15:14.513
> 
> 标签：selenium, webdriver, geb

我是 Geb 的新手。对不起，如果我的问题不正确。

我正在尝试单击 iFrame 内的按钮`CompaniesListPage`并尝试转换到`AddCompanyPage`.

使用 iFrame 外部的常规按钮，我可以执行

`loginButton (to: CompaniesListPage){$("input", id:"loginButton")}`在 loginButton 单击时从 LoginPage 转换到 CompaniesListPage。

但是，使用 iFrame 内的按钮，我不知道如何实现这一点

在 CompaniesListPage 上，我试过这个

```
static content={
        inner { $("#default_portal_select_company_page") 

            withFrame(inner){
                  addCompanyButton (to:AddCompanyPage) {$('input', id:'AddCompanyButton')}
            }
} 
```

然后我明白我对 addCompanyButton 的声明应该是不正确的，我想要从该页面中单击并继续前进。

所以，在测试用例上，我做了一个

```
withFrame (inner){

    $('input', id:'AddCompanyButton').click()
} 
```

这行得通。但是，由于页面已经移动到`AddCompanyPage`现在并且想要处理它，我尝试了`page (AddCompanyPage)`

这抛出一个

`geb.error.UnresolvablePropertyException: Unable to resolve AddCompanyPage as content for CompaniesListPage, or as a property on it's Navigator context`

PS：如果有帮助，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T06:31:11.593

要回答我自己的问题，这`geb.error.UnresolvablePropertyException`仅仅是由于脚本中**缺少**AddCompanyPage 的导入。愚蠢的我。

# javascript - 将函数传递给 Handlebars 模板

> ID：12492701
> 
> 赞同：7
> 
> 时间：2012-09-19T10:15:15.697
> 
> 标签：javascript, handlebars.js

我正在使用（或至少开始使用）[HandlebarsJS](http://handlebarsjs.com)作为 html 模板，但我可能已经走到了死胡同。我想要的是将函数传递给模板，例如

```
<div id="divTemplate">
  <span onclick="{{func}}">{{text}}</span>
</div> 
```

然后我希望有类似的东西

```
var source = $('#divTemplate').html();
var template = Handlebars.compile(source);

var data = {
  "text": "Click here",
  "func": function(){
    alert("Clicked");
  }
};

$('body').append(template(data)); 
```

但是该函数是在 init 上执行的，它没有传递到模板中，结果是：

```
<span onclick="">Click here</span>. 
```

我也在尝试一些带有辅助功能的东西，但我也无法让它工作。任何想法，将不胜感激。:)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-19T13:38:03.787

解决方案非常简单。

Handlebars 将输出您传递给模板的对象的属性，如果该属性是一个***函数***，*它将执行该函数并**输出返回值***

在您的示例中，该函数不返回任何值（它只是调用警报），因此输出为空。

您可以像这样创建一个辅助方法：

```
handlebars.registerHelper('stringifyFunc', function(fn) {
    return new Handlebars.SafeString("(" + 
               fn.toString().replace(/\"/g,"'") + ")()");
}); 
```

然后在模板中，您只需要在需要字符串化的函数上使用它：

```
<div id="divTemplate">
  <span onclick="{{stringifyFunc func}}">{{text}}</span>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-05T21:31:35.767

也可以全局定义回调函数，在模板的onclick值中传递函数调用字符串。

注意数据对象中 func 值的 tmpCallback 括号。

```
var tmpCallback = function () {
    alert('hello');
}

var data = {
  "text": "Click here",
  "func": "tmpCallback()"
};

$('body').append(template(data)); 
```

这只是一种快速解决方法的技巧，我认为@BFil 的回答可能会更好。

# three.js - Three.JS- 在 Collada 中检测交叉点（Ray Casting）

> ID：12492702
> 
> 赞同：1
> 
> 时间：2012-09-19T10:15:17.977
> 
> 标签：three.js, collada, intersect, raycasting

我的原型系统中有一个功能可以在您单击 Collada 文件时检测交叉点。相交函数如下：

```
 function Intersectfun ( event ) {
   mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;
   mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;
   var vector = new THREE.Vector3( mouse.x, mouse.y, 1 );
   var toIntersect = [];
   THREE.SceneUtils.traverseHierarchy(scene, function (child) {
   if (child instanceof THREE.Mesh) {
    toIntersect.push(child);
   }
  });
  // Unproject the vector
  projector.unprojectVector(vector, camera);
  var ray = new THREE.Ray( camera.position, vector.subSelf(camera.position).normalize());
  var intersects = ray.intersectObjects( toIntersect );
  if(intersects.length){
   target = intersects[0].object;
  }
 } 
```

但是当我使用：

```
controls = new THREE.TrackballControls( camera, renderer.domElement ); 
```

intersects 矩阵为空，无法检测到交叉点！！！

但是当我使用：

```
 controls = new THREE.TrackballControls( camera ); 
```

我可以得到 intersects 矩阵，它工作得很好，但是发现了另一个问题（看这里：[Three.JS -- conflict Camera controls with a textbox in a scene](https://stackoverflow.com/questions/12457487/three-js-conflict-camera-controls-with-a-textbox-in-a-scene/12466399?iemail=1#12466399)）

上面的函数中有代码吗？为了您的信息，我使用了一个简单的相机：

```
 camera = new THREE.PerspectiveCamera( 40, window.innerWidth / window.innerHeight, 1, 10000 ); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:53:22.090

这不是 Collada 问题。

改为这样做：

```
// container
container = document.createElement('div');
document.body.appendChild(container);

// renderer
renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
container.appendChild(renderer.domElement);

//controls
controls = new THREE.TrackballControls(camera, container); 
```

换句话说，使用`container`而不是`renderer.domElement`作为轨迹球控件的第二个参数。

[http://jsfiddle.net/QXUwa/](http://jsfiddle.net/QXUwa/)

# java - Spring - 如何控制为视图显示的 URL？

> ID：12492714
> 
> 赞同：1
> 
> 时间：2012-09-19T10:15:52.000
> 
> 标签：java, spring, model-view-controller

我有 4 种类型的请求，由 4 种不同的方法处理`AccountsController`：

1.  `/accounts`显示所有帐户
2.  `/accounts/new`新帐户页面
3.  `/accounts/{accountId}/edit`编辑帐户页面
4.  `/accounts/{accountId}/delete`删除帐户

`(1)`很好。我只是返回`DisplayAccounts.jsp`视图。

关于`(2)`and `(3)`，当我将用户从初始视图带到`DisplayAccounts.jsp`（一旦操作成功）时，URL 仍然是旧的（或者`/accounts/new`或`/accounts/{accountId}/edit`分别）

并且`(4)`，我没有开始的看法。这只是一个动作，它应该返回`EditAccount.jsp`对失败和`DisplayAccounts.jsp`成功的看法。再一次，最终的 URL 应该是`/accounts/{accountId}/edit`或`/accounts`分别。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T10:18:21.617

作为请求的结果，您使用对新 url 的转发。

请参阅此示例：[Spring MVC，转发](https://stackoverflow.com/questions/2997866/spring-mvc-forward)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T10:19:58.360

您不必将 jsp 与控制器功能相关联。只是不要返回 ModelAndView 而是 void，它会调用函数并且不会调用任何视图。

# jboss - JBoss 7.1.1：将 jre 的 rt.jar 添加到类路径

> ID：12492717
> 
> 赞同：5
> 
> 时间：2012-09-19T10:16:02.767
> 
> 标签：jboss, runtime, classpath, jboss7.x

我的目标是在 JBoss 7.1.1 中部署一个 ear 文件。ear 文件中的一个类（我无法更改）是使用`sun.net.util.IPAddressUtil`JRE 的**rt.jar**类。

在我的 IDE (eclipse) 中解析了这个类并且它可以正常编译。但是当我尝试在 JBoss 7.1.1 上部署（包含类的耳朵）时，它给了我`java.lang.NoClassDefFoundError: sun/net/util/IPAddressUtil`. `JAVA_HOME`在我的机器中设置了变量，我看到 JBoss 和 eclipse 都使用相同的 JDK (1.6.X)

**当我将 EAR 与 lib 文件夹中的rt.jar**捆绑在一起时，EAR 会正确部署（这是一种不好的方法）。

我看过[JBoss 社区](https://community.jboss.org/thread/175395)，它说要为任何第三方 jar 配置为模块。但是，我需要的类在**rt.jar**中，我不赞成将其添加为模块

有没有办法将 JBoss 7.1.1 配置为手动查看`%JAVA_HOME%/jre/lib/rt.jar`？

提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-21T07:58:42.537

JBoss 7 use jboss-modules technology for modular class-loading, similar to OSGi. It will use rt.jar and a bunch of libraries in its own lib directory to start the application server itself. But when it will load your web application, it will create a custom classloader which restricts what classes it will see, based on the module dependencies it declares.

To declare module dependencies, you need to include a jboss-deployment-structure.xml in the META-INF directory of your EAR (or WEB-INF for a WAR). See [https://docs.jboss.org/author/display/AS71/Class+Loading+in+AS7](https://docs.jboss.org/author/display/AS71/Class+Loading+in+AS7). To declare a dependency on classes in the rt.jar, you need a <system> dependency:

```
<jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.1">
    <deployment>
        <dependencies>
            <system export="true">
                <paths>
                    <path name="sun/net/util"/>
                </paths>
            </system>
        </dependencies>
    </deployment>
</jboss-deployment-structure> 
```

You could also try to extract the IPAddressUtil class and package it as a separate module. You can get the sources from the openjdk, e.g. [http://www.docjar.com/html/api/sun/net/util/IPAddressUtil.java.html](http://www.docjar.com/html/api/sun/net/util/IPAddressUtil.java.html)

# c# - 识别口语句子中的关键词

> ID：12492726
> 
> 赞同：1
> 
> 时间：2012-09-19T10:16:29.637
> 
> 标签：c#, speech

我有一个可以识别语音的程序，因此用户可以对其进行口授，它会识别单词。

我想扩展它以允许用户说“计算机，在维基百科上搜索 XXXXX”，并让我的程序加载维基百科的搜索页面，搜索 XXXXX。

我如何实现这一目标？

例如

```
else if (e.Result.Text == "Search on Wikipedia for <string>")
{
    say("Searching for <string>"); 
    get_Wiki_info(); 
    say("The definition for <string> is <Wikipediaresult>")
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:02:32.317

一种选择是简单地去掉问题部分：

```
else if (e.Result.Text == "Search on Wikipedia for <string>")
{
    string searchToken = e.Result.Text.Substring("Search on Wikipedia for".Length).Trim();
    say("Searching for <string>"); 
    get_Wiki_info(searchToken);
    say("The definition for <string> is <Wikipediaresult>")
} 
```

然后在搜索过程中获取搜索令牌。

```
private void get_Wiki_info(string searchToken)
{
  //Do Wikipedia Search
} 
```

# android - android中的json解析

> ID：12492730
> 
> 赞同：-4
> 
> 时间：2012-09-19T10:16:45.137
> 
> 标签：android, json

如何在android中解析以下JSON？

```
{"Servicedata":{"services_description":"Absolutely awesome compound on 50+ acres","services_image":"http:\/\/192.168.100.81\/watchdog_webservice\/service_images\/shop1.jpg","service_userid":"1"}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T10:22:40.717

```
JSONObject object = new JSONObject(yourJsonString);
JSONObject servicedata = object.getJSONObject("Servicedata");
String desc = servicedata.getString("services_description");
String image = servicedata.getString("services_image");
String id = servicedata.getString("service_userid"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:22:22.947

JSON 数据的来源是什么？下面是从 URL 解析 JSON。

```
 try {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet(url);

        HttpResponse httpResponse = httpClient.execute(httpGet);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "UTF8"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    } 
```

# javascript - 如何防止主页上的Android后退按钮导航回来

> ID：12492733
> 
> 赞同：0
> 
> 时间：2012-09-19T10:17:15.773
> 
> 标签：javascript, android, cordova, kendo-ui

> **可能重复：**
> [Android - 如何覆盖“后退”按钮，使其不会完成（）我的活动？](https://stackoverflow.com/questions/3141996/android-how-to-override-the-back-button-so-it-doesnt-finish-my-activity)

我正在使用 kendo UI 和 phonegap 为 android/ios 开发应用程序。在 android 版本中，我有一个导航栏，它只有一个主页按钮，可将用户带到主页。当用户在主页时，如果我点击返回，它将转到上一页。如何阻止android上的后退按钮导航回上一页并且在主页上什么也不做？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:34:01.913

您可以尝试将事件侦听器添加到您的后退按钮，以防止其通常的行为：

```
document.addEventListener("backbutton", function(e){

    // Get pathname / url
    var pathname = window.location.pathname;

    // If the pathname / url corresponds to your homepage's one:
    if(pathname==homepage_pathname){
        e.preventDefault();            
    }
    else {
        navigator.app.backHistory();
    }
}, false); 
```

`homepage_pathname`您的主页的路径名/网址在哪里。

希望这有助于交配。

# java - HTMLUnit 网站测试

> ID：12492736
> 
> 赞同：0
> 
> 时间：2012-09-19T10:17:27.117
> 
> 标签：java, session, testing, htmlunit

我正在使用 HTMLUnit 来加速我的一些开发项目的测试，我希望能够将 HTMLUnit 的会话传输到真实的浏览器。

因此，HTMLUnit 可能会登录，输入一些数据单击按钮等（我已经完成了所有这些代码）然后我希望该会话以 HTMLUnit 的状态转移到我的浏览器。

# php - 从开始和结束字符串生成数组

> ID：12492740
> 
> 赞同：0
> 
> 时间：2012-09-19T10:17:39.410
> 
> 标签：php, arrays

我很抱歉问一个简单的问题。

```
function generateArray( $start, $end)
{

 //do task
 return $arr
} 

example 

$start= '47_000008';
$end= '47_000011'

$arr= generateArray( $start, $end); 
```

这里数组的元素应该是

```
arr[0]=47_000008'
arr[1]=47_000009'
arr[2]=47_000010'
arr[3]=47_000011' 
```

我需要帮助来编写函数

在这里，开始和结束值可以在 47_000001 到 47_999999 之间

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:27:36.863

假设你的字符串格式是 XX_XXXXX。首先将字符串拆分为数组，例如

```
$startList = explode("_",$start);
$endList = explode("_",$end); 
```

现在运行一个 for 循环来增加起始数组的最后一个值并将其推送到结果数组，例如

```
$totalindex = $endList[1]-$startList[1];
$startvalue=$startList[1];
for($i=0;$i<$totalindex;$i++){
   $startvalue=$startvalue+$i;
   $newArray[$i]=$startList[0]."_".$startvalue;
} 
```

考虑错误验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T10:46:27.860

这是我的前导 null 版本

```
 function generateArray( $start, $end)
    {
        $startArray=explode("_",$start);
        $endArray=explode("_",$end);
        $arr=array();
        if(count($startArray)==2)
        {
            $laenge=strlen($startArray[1]);
            $startInt=(int)$startArray[1];
            $endInt=(int)$endArray[1];
            for($i=$startInt;$i<=$endInt;$i++)
            {
                $arrString=""+$i;
                while(strlen($arrString)!=$laenge)
                    $arrString="0".$arrString;
                $arr[]=$startArray[0]."_".$arrString;
            }
        }
        return $arr;
    } 
```

# php - 请帮我调试这个 php 代码

> ID：12492744
> 
> 赞同：-1
> 
> 时间：2012-09-19T10:17:53.053
> 
> 标签：php, html, forms, checkbox

大家早，

我有一个表单，用于一次将多行添加到数据库中。除了复选框之外，这一切似乎都工作正常。每个表单行都有一个复选框。无论勾选复选框的顺序如何，提交后的结果总是以相同的顺序返回。

这是表格的主要部分：

```
<tr>
<td class='border'>
<input type='text' name='rowid[]' value='".$row."' style='display:none;' />
<input type='text' name='ref[]' style='width:100%;' />
</td>
<td class='border'>
<input type='text' name='obs[]' style='width:100%;' />
</td>
<td class='border'>
<input type='text' name='act[]' style='width:100%;' />
</td>
<td class='border' align='center'>
<input type='checkbox' name='comp[]' value='Yes' />
</td>
<td class='border'>
<input type='text' name='compby[]' style='width:100%;' />
</td>
<td class='border'>
<input type='text' name='compdate[]' id='completeddate".$row."' class='completeddate' style='width:100%;' />
</td>
</tr> 
```

这个表单被提交，我的 PHP 代码处理它。您可以看到第一个输入是表单行的 ID。这是一个隐藏字段，表单中显示的每一行的值都会增加一。

提交表单后，我使用下面的 PHP 来处理每一行，一次一个

```
foreach($_POST['rowid'] as $key=>$rowid) { 
```

这基本上应该说对于一个rowid，其余的输入是关联的，直到它到达下一个rowid。

如果我要打印说

```
echo $_POST['ref'][$key]; 
```

我将获得第一行的引用，然后一旦循环完成并再次打印，我将获得第二行的引用，依此类推。

但是，如果我要放

```
echo $_POST['comp'][$key]; 
```

然后这就是它破裂的地方。

例如，对于每一行，我按以下顺序勾选复选框：

```
row 1, tick, row 2, untick, row 3, tick 
```

如果我让循环打印出所有复选框值，它将显示

```
'Yes', 'Yes', '' 
```

但应该是这个顺序

```
'Yes', '', 'Yes' 
```

这是因为复选框无论如何都是一个普通的数组，然后我通过给它命名为 comp[] 将它放入另一个数组？

无论如何，这个问题是否存在，或者我最好使用单选按钮，一个代表是，一个代表否？

非常感谢

编辑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:37:42.620

在表单中创建技术隐藏字段的正确方法是使用`hidden`类型。无论如何，你在这里不需要这个字段。相反，`$row`在所有字段中使用以正确识别它们：

```
<tr>
<td class='border'>
<input type='text' name='ref[<?php echo $row; ?>]' style='width:100%;' />
</td>
<td class='border'>
<input type='text' name='obs[<?php echo $row; ?>]' style='width:100%;' />
</td>
<td class='border'>
<input type='text' name='act[<?php echo $row; ?>]' style='width:100%;' />
</td>
<td class='border' align='center'>
<input type='checkbox' name='comp[<?php echo $row; ?>]' value='Yes' />
</td>
<td class='border'>
<input type='text' name='compby[<?php echo $row; ?>]' style='width:100%;' />
</td>
<td class='border'>
<input type='text' name='compdate[<?php echo $row; ?>]' id='completeddate<?php echo $row; ?>' class='completeddate' style='width:100%;' />
</td>
</tr> 
```

更改循环（该`rowid`字段不再存在）。您可以在任何`text`字段上循环，因为即使它们为空也会被提交（与复选框字段相反，仅在选中时才提交）：

```
foreach($_POST['ref'] as $key => $rowid) { 
```

检查您的 PHP 代码，可能还有更多内容需要更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T10:30:30.590

尝试下标数组索引。即通过将其更改为明确哪个`comp[]`属于哪一行`comp[$row]`。关键是未发送未选中的框，因此当并非所有框都被选中时`comp[]`，请求中只有 2 个元素，并且您无法分辨它们属于哪一行。

`$_POST['comp'][$key]`顺便说一句，您在访问last (non-existent)时应该收到警告`$key`。如果没有，请启用所有警告。警告通常非常有用。

# continuous-integration - 将新项目添加到具有更高优先级的构建队列后，如何在 TeamCity 中重新排队快照依赖项？

> ID：12492745
> 
> 赞同：0
> 
> 时间：2012-09-19T10:18:15.443
> 
> 标签：continuous-integration, teamcity, teamcity-7.0

我有许多链接在一起的构建配置。

```
A
B
C D E 
```

每个构建都对链中的先前配置具有快照依赖关系，这意味着构建 B 依赖于 A，而构建 C、D 和 E 依赖于 B。

每个配置都有一个触发器，用于在链中的上一个构建成功完成时设置。此设置的问题是运行个人构建以测试远程更改时。如果 B 在针对 A 将远程更改添加到队列中时正在运行，则个人构建将首先运行 A（个人构建），然后 C、D 和 E 将添加到队列中。这是一个问题的原因是 C、D 和 E 是针对在步骤 A 和 B 中部署的代码运行的测试。这意味着在运行测试之前，通过个人更改有效地重新部署了代码。

有两种可接受的方法来解决这个问题

1.  在将 A 作为个人构建运行后，将 A 重新排队以在 C、D 和 E 之前运行而不进行这些更改
2.  在将 A 作为个人构建运行后，从构建队列中删除 C、D 和 E，因为不必针对每个提交运行测试

我无法看到如何实现这些选项中的任何一个。快照依赖项当前设置为“如果有合适的则不运行新构建”，但如果我更改此设置，则无法重新运行失败的测试而无需再次遍历整个链。

这是配置 TeamCity 的一种糟糕方法吗？如果是，那么构建构建链的更好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:02:04.343

我通过在这个问题中实施公认的答案解决了这个问题：

[是否可以防止构建链在 TeamCity 中被中断？](https://stackoverflow.com/questions/14623473/is-it-possible-to-prevent-a-build-chain-from-being-interrupted-in-teamcity)

该解决方案实施了上面的选项 1。通过使用包含当前部署值的文本文件，如果依赖项已过期，则可以通过 HTTP 取消/重新触发构建。

# asp.net - 在 asp.net WebService 中，将 WebControl 传递给 WebMethod

> ID：12492748
> 
> 赞同：0
> 
> 时间：2012-09-19T10:18:23.273
> 
> 标签：asp.net, web-services, webmethod, asp.net-webcontrol

我正在使用 asp.net 4、C#、VS 2010。我遇到了一个问题，它调用了一个以 WebControl 作为参数的 Web 服务方法。

```
/// <summary>
/// Summary description for FormsViews
/// </summary>
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]

public class FormViews : System.Web.Services.WebService
{
    [WebMethod]
    public void SetCaption(System.Web.UI.WebControls.Button bt)
    {
        //Code...
    }
} 
```

它编译没有错误。在运行时我收到此消息：

> 命名空间“namespace”中的 XML 元素“EnableTheming”已存在于当前范围中。使用 XML 属性为元素指定另一个 XML 名称或命名空间。

您能否解释一下为什么 webService 不接受 WebControl 以及如何处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:01:36.530

Web 服务不接受 WebControl，因为它不可序列化，并且良好的 Web 服务设计不会直接操作视图或用户界面。您的视图的逻辑应该留在您的视图中，而不是通常的业务层中。在视图或网页中处理语言支持的典型方法是向 Web 服务发出请求，该请求指示页面应支持的语言，并以键/值对的形式返回标签​​列表。键是控件的 ID，值是控件中应显示的内容。仅当您的网页使用大量 Ajax 时才需要这样做。如果您只是在服务器上呈现页面，那么当控件在服务器上呈现时，您可以使用正确的语言填充控件。[这是一篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/fw69ke6f%28v=vs.80%29.aspx)，讨论了如何执行此操作。

# perl - “perl”命令的意义何在？

> ID：12492752
> 
> 赞同：-5
> 
> 时间：2012-09-19T10:18:44.577
> 
> 标签：perl, command-line, cmd

当我输入`perl`任何命令提示符（当然，系统上安装了 Perl）时，什么都没有发生。`perl`在命令提示符下使用有什么意义？与`python`,`lua`和`ruby`命令不同，它似乎什么都不做。

**如果它确实做某事，它是什么以及如何使用它？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T10:24:41.170

不带参数的`perl`命令编译并运行它在标准输入中看到的任何 Perl 代码；它不像其他一些解释器那样为您提供交互式提示。

尝试单个 Perl 命令的一个好方法是调用 Perl 调试器：

```
% perl -dwe 0 
```

开关是：

*   `-d` : 调用 Perl 调试器
*   `-w` ：启用警告
*   `-e 1`：`0`作为 Perl 脚本执行（它什么都不做，但让您处于交互式调试器中）。

正如 Jack Maney 在他的评论中所说，您应该[阅读文档](http://perldoc.perl.org/perlrun.html)（`perldoc perlrun`应该在本地为您提供相同的信息）。

但请记住，该`perl`命令的主要目的是执行 Perl 脚本。Perl*可以*交互使用，单行代码如：

```
perl -e 'print time, "\n"' 
```

（以秒为单位打印自 1970 年以来的当前时间）可能非常有用，但这不是它的主要用途。通常你会有一个脚本

```
#!/usr/bin/perl 
```

（或等效）作为第一行。

# android - 在 Android 中以编程方式添加到 RadioGroup 时，RadioButtons 具有不同的样式

> ID：12492754
> 
> 赞同：3
> 
> 时间：2012-09-19T10:18:51.297
> 
> 标签：android, styles, radio-button, radio-group

我正在 Android 应用程序中构建一个表单。

该表单有几个字段，其中两个组件是 RadioGroups。包括其按钮的第一组完全在活动的布局文件中定义。对于第二组，只有 RadioGroup 元素在布局文件中定义，其中 RadioButtons 在运行时被添加到组中。

如下图所示，我遇到了一些样式问题。第二组中的单选按钮看起来与第一组中的按钮不同。第二组的按钮图像和文本颜色不同。除了按钮的方向之外，两个 RadioGroup 都配置有相同的属性。当我直接在布局文件中添加第二组的按钮时，它们的外观与第一组相同。

![在此处输入图像描述](../Images/9685b466c69e8f2bba8e3813ce1a2f2f.png)

布局文件。

```
<RadioGroup
    android:id="@+id/radio_gender"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="4dp"
    android:layout_marginLeft="8dp"
    android:layout_marginRight="8dp"
    android:layout_marginTop="4dp"
    android:orientation="horizontal">
    <RadioButton
        android:id="@+id/radio_male"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="@string/checkout_gender_male" />
    <RadioButton
        android:id="@+id/radio_female"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/checkout_gender_female" />
</RadioGroup>

...            

<RadioGroup
    android:id="@+id/radio_payment"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="4dp"
    android:layout_marginLeft="8dp"
    android:layout_marginRight="8dp"
    android:layout_marginTop="4dp" >
</RadioGroup> 
```

添加单选按钮的代码。

```
RadioGroup paymentGroup = (RadioGroup) findViewById(R.id.radio_payment);
RadioGroup.LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);        

for (String paymentType: checkoutData.getPaymentTypes()) {
    RadioButton radioButton = new RadioButton(getBaseContext());
    radioButton.setText(paymentType);
    paymentGroup.addView(radioButton, params);
} 
```

如何通过代码为第 2 组中的按钮归档相同的外观和感觉？

**更新 1**

我又做了一些测试。

我已经在以下配置中进行了测试。

*   模拟器 - Google Android 4.1.1：相同的行为
*   模拟器 - Google Android 2.3.4：相同的行为，但所有 RadioButtons 的图形都相同，但文本颜色仍然不同。我猜在这个版本的 Android 中，按钮只有一个图形。
*   设备 - Nexus One - Android Cyanogenmod 7 (Android 2.3.7)：与 Android 2.3.4 模拟器上的行为相同

当我通过在布局文件中添加一个按钮和两个以编程方式混合第二组时，结果仍然相同。第一个按钮（在布局中定义）看起来像预期的那样，其他两个按钮使用不同的按钮图形并具有不同的文本颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T16:23:05.037

好的，我找到了解决问题的方法。

我使用了错误的上下文来创建 RadioButton。

代替

```
RadioButton radioButton = new RadioButton(getBaseContext()); 
```

我必须使用

```
RadioButton radioButton = new RadioButton(getContext); 
```

或者

```
RadioButton radioButton = new RadioButton(this); // this is the Activity 
```

我不知道为什么我在这里使用基本上下文，因为我以前从未使用过它。如果我没记错的话，Context 对象可以包含有关 Activity 布局样式的信息。我想当我使用基本上下文时，缺少此信息，因此单选按钮看起来不同。

# javascript - 使用 create 时在 Backbone 集合的开头添加模型

> ID：12492759
> 
> 赞同：3
> 
> 时间：2012-09-19T10:19:10.917
> 
> 标签：javascript, backbone.js

有没有办法`create`在集合的开头使用新模型而不是在末尾附加它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T10:27:16.997

Backbone 将插入委托给[`Collection.add`](http://backbonejs.org/#Collection-add)这意味着您可以传递一个*at*选项来指定位置：

```
var C = Backbone.Collection.extend({
    url: '/echo/json/'
})
var c= new C([
    {name: 1},
    {name: 2},
    {name: 3}
]);

c.create({name: 4}, {at: 0});
console.log(c.pluck('name')); 
```

将产生`[4,1,2,3]`

还有一个小提琴[http://jsfiddle.net/nikoshr/p6fNR/](http://jsfiddle.net/nikoshr/p6fNR/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-07T02:49:03.200

注意：这些天你可以使用[unshift](http://backbonejs.org/#Collection-unshift)

```
var ships = new Backbone.Collection;

ships.unshift([
  {name: "Flying Dutchman"},
  {name: "Black Pearl"}
]); 
```

# mysql - Mysql 归档旧数据

> ID：12492762
> 
> 赞同：1
> 
> 时间：2012-09-19T10:19:22.940
> 
> 标签：mysql, archive

我想从 mysql 旧数据（一年多）归档到一个文件，并从数据库中删除相同的信息。这样我的数据库中只有去年的数据。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:21:47.300

```
mysql -e "select * from your_table where `date` < now() - interval 1 year" -u myuser -pxxxxxxxxx mydatabase > mydumpfile.txt

delete from your_table where `date` < now() - interval 1 year 
```

# iphone - Spotify 使用播放列表加载曲目

> ID：12492764
> 
> 赞同：0
> 
> 时间：2012-09-19T10:19:41.867
> 
> 标签：iphone, cocoalibspotify-2.0

我正在使用 cocoalibspotify。我想知道如何从 SPPlaylist 获得 SPPlaylistItem？我有自己的播放列表。如何使用播放列表（按名称）获取播放列表项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:13:14.507

呵呵..终于我得到了答案。我找到了从播放列表中获取播放列表项的方法。

在我的研究中，我了解到播放列表项来自 keypath `@unionOfArrays.items`。因此，通过删除它，我只能获得播放列表列表，而不是 playlistitem 。

在此处参考我的代码：

```
 // arrPlaylist -> mutablearray which stores the value of loaded playlist in order to use it later 
    // tblPlaylist -> Tablename which displays list of playlist. 

[SPAsyncLoading waitUntilLoaded:[SPSession sharedSession] timeout:kSPAsyncLoadingDefaultTimeout then:^(NSArray *loadedession, NSArray *notLoadedSession) 
    {
        // The session is logged in and loaded — now wait for the userPlaylists to load.
        NSLog(@"[%@ %@]: %@", NSStringFromClass([self class]), NSStringFromSelector(_cmd), @"Session loaded.");

        [SPAsyncLoading waitUntilLoaded:[SPSession sharedSession].userPlaylists timeout:kSPAsyncLoadingDefaultTimeout then:^(NSArray *loadedContainers, NSArray *notLoadedContainers) 
        {
            // User playlists are loaded — wait for playlists to load their metadata.
            NSLog(@"[%@ %@]: %@", NSStringFromClass([self class]), NSStringFromSelector(_cmd), @"Container loaded.");

            NSMutableArray *playlists = [NSMutableArray array];
            [playlists addObject:[SPSession sharedSession].starredPlaylist];
            [playlists addObject:[SPSession sharedSession].inboxPlaylist];
            [playlists addObjectsFromArray:[SPSession sharedSession].userPlaylists.flattenedPlaylists];

            [SPAsyncLoading waitUntilLoaded:playlists timeout:kSPAsyncLoadingDefaultTimeout then:^(NSArray *loadedPlaylists, NSArray *notLoadedPlaylists) 
            {
                // All of our playlists have loaded their metadata — wait for all tracks to load their metadata.
                NSLog(@"[%@ %@]: %@ of %@ playlists loaded.", NSStringFromClass([self class]), NSStringFromSelector(_cmd), 
                      [NSNumber numberWithInteger:loadedPlaylists.count], [NSNumber numberWithInteger:loadedPlaylists.count + notLoadedPlaylists.count]);
                            NSLog(@"loadedPlaylists >> %@",loadedPlaylists);

                arrPlaylist = [[NSMutableArray alloc] initWithArray:loadedPlaylists];
                NSLog(@"arrPlaylist >> %@",arrPlaylist);

                [tblPlaylist reloadData];
            }];
        }];
    }]; 
```

# java - 标记字节数组

> ID：12492768
> 
> 赞同：6
> 
> 时间：2012-09-19T10:19:56.653
> 
> 标签：java, arrays, tokenize

我有一个原始字节数组，我需要将其标记为 java 中的字节数组列表。通过以下方法声明更好地解释。

```
public static List<byte[]> splitMessage(byte[] rawByte, String tokenDelimiter) 
```

**示例运行。**

**示例运行 1：**

原始字节

```
byte[] rawBytes = new byte[]{72,118,121,49,85,118,97,113,111,124,44,124,49,48,43,57,48,36,63,49,66,70,22,18,124,44,124,23,27,25,54,24,24,34,44,57,69,66,49,47,66,16,39,35,32,36,30,50,63,124,44,124,16,18,24,64,4,94,124,44,124,19,31,42,55,66,46,34,62,34,37}; 
```

`tokenDelimiter`是`|,|`（即`124,44,124`）

所以返回的列表如下：

```
Token 1: 72,118,121,49,85,118,97,113,111
Token 2: 49,48,43,57,48,36,63,49,66,70,22,18
Token 3: 23,27,25,54,24,24,34,44,57,69,66,49,47,66,16,39,35,32,36,30,50,63,
Token 4: 16,18,24,64,4,94
Token 5: 19,31,42,55,66,46,34,62,34,37 
```

**示例运行 2：**

```
byte[] rawBytes = new byte[]{72,118,121,49,85,118,97,113,111,124,44,124,49,48,43,57,48,36,63,49,66,70,22,18,124,44,124,124,44,124,23,27,25,54,24,24,34,44,57,69,66,49,47,66,16,39,35,32,36,30,50,63,124,44,124,16,18,24,64,4,94,124,44,124,19,31,42,55,66,46,34,62,34,37,124,44,124,124,44,124}; 
```

`tokenDelimiter`是`|,|`（即`124,44,124`）

```
Token 1: 72,118,121,49,85,118,97,113,111
Token 2: 49,48,43,57,48,36,63,49,66,70,22,18
Token 3: <Empty>
Token 3: 23,27,25,54,24,24,34,44,57,69,66,49,47,66,16,39,35,32,36,30,50,63,
Token 4: 16,18,24,64,4,94
Token 5: 19,31,42,55,66,46,34,62,34,37
Token 6: <Empty>
Token 7: <Empty> 
```

我能够从以下代码片段中运行示例。但在第二个中卡住了标签。

```
public static List<byte[]> splitMessageSept19(byte[] rawByte, String tokenDelimiter) throws UnsupportedEncodingException
{
    List<byte[]> tokens = new ArrayList<byte[]>();

    final byte[] byteArray = tokenDelimiter.getBytes("UTF-8");
    final byte byteDelimitorFirstByte  = byteArray[0];

    int bytenum =0 ;
    int lastIndex = 0;
    int storIterator =0;
    for ( int iterator = 0 ; iterator <= rawByte.length ; iterator++ )
    {
        if (iterator == rawByte.length || rawByte[iterator] == byteDelimitorFirstByte)
        {
            storIterator = iterator;
            if ( iterator != rawByte.length )
            {
                for ( int i=0 ; i < byteArray.length ; i++ )
                {
                    if ( rawByte[iterator] == byteArray[i] )
                    {
                        iterator++ ;
                        continue;
                    }
                    else
                    {
                        break;
                    }
                }
            }
            byte[] byteArrayExtracted = new byte[storIterator - lastIndex];
            System.arraycopy(rawByte, lastIndex, byteArrayExtracted, 0, 
                             storIterator - lastIndex);
            lastIndex = iterator ;
            tokens.add(byteArrayExtracted);
            byteArrayExtracted = null;
        }
    }
    for ( byte[] bytetoken : tokens )
    {
        System.out.println("Token received is: " + new String(bytetoken, "UTF-8"));
    }
    return tokens;
} 
```

有没有人遇到过类似的标记数组的问题？请建议是否有其他方法来标记数组。

请注意：我不想将字节流转换为`String`，以字符串格式标记化并转换回字节。它可能有编码问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T10:28:52.237

如果您使用 ISO-8859-1，则字节会按原样保留。

```
private static final Charset ISO_8859_1 = Charset.forName("ISO-8859-1");

public static List<byte[]> splitMessageSept19(byte[] rawByte, String tokenDelimiter) {
    Pattern pattern = Pattern.compile(tokenDelimiter, Pattern.LITERAL);
    String[] parts = pattern.split(new String(rawByte, ISO_8859_1), -1);
    List<byte[]> ret = new ArrayList<byte[]>();
    for (String part : parts) 
        ret.add(part.getBytes(ISO_8859_1));
    return ret;
}

public static void main(String... args) {
    StringBuilder sb = new StringBuilder();
    for(int i=0;i<256;i++)
        sb.append((char) i);
    byte[] bytes = sb.toString().getBytes(ISO_8859_1);
    List<byte[]> list = splitMessageSept19(bytes, ",");
    for (byte[] b : list) 
        System.out.println(Arrays.toString(b));
} 
```

印刷

[0、1、2、3、4、5、6、7、8、9、10、11、12、13、14、15、16、17、18、19、20、21、22、23、24 , 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43] [45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125、126、127、-128、-127、-126、-125、-124、-123、-122、-121、-120、-119、-118、-117、-116、-115、-114 , -113, -112, -111, -110, -109, -108, -107, -106, -105, -104, -103, -102, -101, -100, -99, -98, - 97、-96、-95、-94、-93、-92、-91、-90、-89、-88、-87、-86、-85、-84、-83、-82、-81、 -80、-79、-78、-77、-76、-75、-74、-73、-72、-71、-70、-69、-68、-67、-66、-65、-64、-63、-62、-61、-60、-59、-58、-57、-56、-55、-54、-53、-52 , -51, -50, -49, -48, -47, -46, -45, -44, -43, -42, -41, -40, -39, -38, -37, -36, - 35、-34、-33、-32、-31、-30、-29、-28、-27、-26、-25、-24、-23、-22、-21、-20、-19、 -18、-17、-16、-15、-14、-13、-12、-11、-10、-9、-8、-7、-6、-5、-4、-3、-2 , -1]

打电话

```
byte[] rawBytes = new byte[]{72,118,121,49,85,118,97,113,111,124,44,124,49,48,43,57,48,36,63,49,66,70,22,18,124,44,124,124,44,124,23,27,25,54,24,24,34,44,57,69,66,49,47,66,16,39,35,32,36,30,50,63,124,44,124,16,18,24,64,4,94,124,44,124,19,31,42,55,66,46,34,62,34,37,124,44,124,124,44,124};
List<byte[]> list = splitMessageSept19(rawBytes, "|,|"); 
```

生产

```
[72, 118, 121, 49, 85, 118, 97, 113, 111]
[49, 48, 43, 57, 48, 36, 63, 49, 66, 70, 22, 18]
[]
[23, 27, 25, 54, 24, 24, 34, 44, 57, 69, 66, 49, 47, 66, 16, 39, 35, 32, 36, 30, 50, 63]
[16, 18, 24, 64, 4, 94]
[19, 31, 42, 55, 66, 46, 34, 62, 34, 37]
[]
[] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:46:59.683

您应该查看 KMP 算法：[维基百科](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm)上的 KMP和其他字符串搜索算法。

作为对您的代码的快速修复，请尝试以下操作：

```
public static List<byte[]> splitMessageSept19(byte[] rawByte, String tokenDelimiter) throws UnsupportedEncodingException
{
    List<byte[]> tokens = new ArrayList<byte[]>();

    final byte[] byteArray = tokenDelimiter.getBytes("UTF-8");
    int lastIndex = 0;

    for (int iterator = 0; iterator < rawByte.length - byteArray.length + 1; )
    {
        boolean patternFound = true;
        for (int i = 0; i < byteArray.length; i++)
        {
            if (rawByte[iterator + i] != byteArray[i])
            {
                patternFound = false;
                break;
            }
        }
        if (patternFound)
        {
            byte[] byteArrayExtracted = new byte[iterator - lastIndex];
            System.arraycopy(rawByte, lastIndex, byteArrayExtracted, 0, iterator - lastIndex);
            iterator += byteArray.length;
            lastIndex = iterator;
            tokens.add(byteArrayExtracted);
        }
        else
            iterator++;

    }
    for (byte[] bytetoken : tokens)
    {
        System.out.println("Token received is: " + new String(bytetoken, "UTF-8"));
    }
    return tokens;
} 
```

我还没有编译这段代码，所以它可能会被破坏，但即使我希望你明白这一点。

这是一个很简单的算法，特别是在分隔符很长的情况下。如果您想要更好的东西，请查看其他一些字符串搜索算法。

# c# - wix - 安装前删除旧的程序文件夹

> ID：12492769
> 
> 赞同：2
> 
> 时间：2012-09-19T10:19:57.030
> 
> 标签：c#, wix, custom-action

我需要安装程序在安装程序开始复制新文件之前删除旧的安装目录（如果存在）。此文件夹包含程序使用过程中生成的一些文件和子文件夹，它们不包含在安装程序中。因此，我创建了自定义操作来执行此操作。

所以，一些代码。首先，自定义操作代码（没什么特别的）：

```
[CustomAction]
        public static ActionResult RemoveOldDatabase(Session session)
        {

            bool removeDatabase = session.CustomActionData["RemoveDatabase"] == "true";
            string installDir = session.CustomActionData["InstallDir"];

            if (removeDatabase)
            {
                try
                {
                    Directory.Delete(installDir, true);
                }
                catch (Exception ex)
                {
                    session.Log(ex.StackTrace);
                }
            }

            return ActionResult.Success;
        } 
```

和 wix 代码（它定义了自定义操作调用）：

```
<CustomAction Id="actionCheckServerName" BinaryKey="actionBinary" DllEntry="CheckServerName" Execute="immediate" Return="check" />
        <CustomAction Id="actionInstall" BinaryKey="actionBinary" DllEntry="Install" Execute="deferred" HideTarget="no" Impersonate ="no" Return="check"/>
        <CustomAction Id="actionUninstall" BinaryKey="actionBinary" DllEntry="Uninstall" Execute="deferred" HideTarget="no" Impersonate ="no" Return="check"/>

        <CustomAction Id="actionRemoveOldDatabase" BinaryKey="actionBinary" DllEntry="RemoveOldDatabase" Execute="deferred" HideTarget="no" Impersonate ="no" Return="ignore"/>

        <CustomAction Id="actionGetNetworkComputers" BinaryKey="actionBinary" DllEntry="GetNetworkComputers" Execute="immediate" Return="check"/>

        <CustomAction Id="SetInstallParameters" Return="check" Property="actionInstall" Value="InstallDir=[INSTALLDIR];ServerName=[SERVER_LIST];InstallMode=[SETUP_MODE];Single=[single];RemoveDatabase=[REMOVE_DATABASE]" />
        <CustomAction Id="SetUninstallParameters" Return="check" Property="actionUninstsall" Value="UnInstallDir=[INSTALLDIR];ServerName=[SERVER_LIST];UnInstallMode=[INSTALL_MODE]" />

        <CustomAction Id="SetRemoveOldDatabaseParameters" Return="check" Property="actionRemoveOldDatabase" Value="InstallDir=[INSTALLDIR];RemoveDatabase=[REMOVE_DATABASE]" />

        <InstallExecuteSequence>
            <Custom Action='AlreadyUpdated' After='FindRelatedProducts'>SELFFOUND</Custom>
            <Custom Action='NoDowngrade' After='FindRelatedProducts'>NEWERFOUND</Custom>

            <Custom Action="SetRemoveOldDatabaseParameters" Before="ProcessComponents"/>
            <Custom Action="actionRemoveOldDatabase" After="SetRemoveOldDatabaseParameters">NOT Installed AND NOT UPGRADINGPRODUCTCODE</Custom>

            <Custom Action="SetInstallParameters" Before="actionInstall"/>
            <Custom Action="SetUninstallParameters" Before="RemoveFiles">Installed AND NOT REINSTALL AND NOT UPGRADINGPRODUCTCODE</Custom>
            <Custom Action="actionInstall" Before="InstallFinalize">NOT Installed AND NOT UPGRADINGPRODUCTCODE</Custom>
            <Custom Action="actionUninstall" After="SetUninstallParameters">Installed AND NOT REINSTALL AND NOT UPGRADINGPRODUCTCODE</Custom>
        </InstallExecuteSequence> 
```

有什么问题？如您所见，应该在安装程序开始复制新文件之前**触发 actionRemoveOldDatabase**（参数已由 SetRemoveOldDatabaseParameters 设置）。所以 - 只有**旧文件**应该被删除 - 但这不会发生。如果我这样做，操作**actionRemoveOldDatabase**，安装目录将在安装程序复制新文件后被删除。因此**，安装程序复制的所有新文件都将被删除**。

我不明白为什么？如何仅删除旧的、已经存在的文件夹以及为什么我的自定义操作会删除所有复制的文件？

[编辑] 看来我已经知道原因了。在这种情况下，Install Dir 正在使用中（可能是 Windows 安装程序将其锁定）并且在安装结束后被释放。自定义操作将等到文件夹被释放，然后将其删除。不幸的是，为时已晚 - 文件夹已包含新文件。

你知道任何解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:09:26.203

[RemoveFile 元素](http://wix.sourceforge.net/manual-wix3/wix_xsd_removefile.htm)就是为了做到这一点而设计的。您可以使用它来教 MSI 删除它没有安装的应用程序数据。优点是在回滚期间文件将被放回原处。

您还可以使用 RemoveFolder 元素删除整个目录。通常的概念是 * 文件删除并指定文件夹。这不是递归的，因此您需要对可能已经创建的任何子目录执行此操作。

编写自定义操作只是重新发明轮子并增加安装程序的脆弱性。只有在无法预先知道子目录时才应使用它。在这种情况下，理想的情况是使用 MSI 中的临时行在安装时将行动态发送到 MSI，并让 MSI 处理实际删除。这允许回滚功能仍然有效。

这是一个非常简单的版本。可以通过使其数据从自定义表驱动而不是 ComponentID 和 DirectoryID 的常量字符串来改进。

```
 public class RecursiveDeleteCustomAction
    {

        [CustomAction]
        public static ActionResult RecursiveDeleteCosting(Session session)
        {
            // SOMECOMPONENTID is the Id attribute of a component in your install that you want to use to trigger this happening
            const string ComponentID = "SOMECOMPONENTID";
            // SOMEDIRECTORYID would likely be INSTALLDIR or INSTALLLOCATION depending on your MSI
            const string DirectoryID = "SOMEDIRECTORYID";

            var result = ActionResult.Success;
            int index = 1;

            try
            {
                string installLocation = session[DirectoryID];
                session.Log("Directory to clean is {0}", installLocation);

                // Author rows for root directory
                // * means all files
                // null means the directory itself
                var fields = new object[] { "CLEANROOTFILES", ComponentID, "*", DirectoryID, 3 };
                InsertRecord(session, "RemoveFile", fields);
                fields = new object[] { "CLEANROOTDIRECTORY", ComponentID, "", DirectoryID, 3 };
                InsertRecord(session, "RemoveFile", fields);

                if( Directory.Exists(installLocation))
                {
                    foreach (string directory in Directory.GetDirectories(installLocation, "*", SearchOption.AllDirectories))
                    {
                        session.Log("Processing Subdirectory {0}", directory);
                        string key = string.Format("CLEANSUBFILES{0}", index);
                        string key2 = string.Format("CLEANSUBDIRECTORY{0}", index);
                        session[key] = directory;

                        fields = new object[] { key, ComponentID, "*", key, 3 };
                        InsertRecord(session, "RemoveFile", fields);

                        fields = new object[] { key2, ComponentID, "", key, 3 };
                        InsertRecord(session, "RemoveFile", fields);

                        index++;     
                    }
                }
            }
            catch (Exception ex)
            {
                session.Log(ex.Message);
                result = ActionResult.Failure;
            }

            return result;
        }
        private static void InsertRecord(Session session, string tableName, Object[] objects)
        {
            Database db = session.Database; 
            string sqlInsertSring = db.Tables[tableName].SqlInsertString + " TEMPORARY";
            session.Log("SqlInsertString is {0}", sqlInsertSring);
            View view = db.OpenView(sqlInsertSring); 
            view.Execute(new Record(objects)); 
            view.Close(); 
        }
    } 
```

# android - 向光标适配器android添加额外的元素

> ID：12492771
> 
> 赞同：12
> 
> 时间：2012-09-19T10:20:00.140
> 
> 标签：android, adapter, element, android-cursor

我有一个包含数据库中所有行的光标。我将光标传递给 CursorAdapter，并在列表中显示数据。但我需要在一开始就展示一个额外的元素。我怎样才能做到这一点？

我在某处读到，也许它可以用 CursorWrapper 完成，它可以在结果中注入额外的值。但我不太确定该怎么做。

如果有人可以给我看一个例子（代码），或者有另一个想法如何解决这个问题，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T10:01:09.520

正如我在这个问题中所建议的那样，如何使用`MergeCursor`和的组合：[如何将额外的元素插入到 SimpleCursorAdapter 或 Cursor for a Spinner？](https://stackoverflow.com/a/14622789/316723)`MatrixCursor`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-05T14:26:58.140

像这样覆盖 getCount：

```
@Override
public int getCount() {
    final int count = super.getCount();
    return count+1;
} 
```

并且曾经使用过适配器的人会获得额外的一行。只要记住在 getView 中处理这个，即。

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if(position == 0) {
            final View v = inflater.inflate(R.layout.special_suggestion, parent,false);
            final TextView tv = (TextView) v.findViewById(android.R.id.text1);
            tv.setText("Search for '" + this.keyword + "'");
            return v;
        }
        else {
            try {
                return super.getView(position, convertView, parent);
            }
            catch (IllegalStateException e) {
                Log.e(TAG, "IllegalStateException: " + e);
            }
        }
        return inflater.inflate(this.layout, parent,false);
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-26T05:23:13.570

您可以使用列表视图的[addHeaderView()](https://developer.android.com/reference/android/widget/ListView.html?hl=es-419#addHeaderView(android.view.View,%20java.lang.Object,%20boolean))或[addFooterView()](https://developer.android.com/reference/android/widget/ListView.html?hl=es-419#addFooterView(android.view.View,%20java.lang.Object,%20boolean))：

```
TextView label = new TextView(context);
label.setText("Something Here");

listView.addHeaderView(label); 
```

请务必在致电之前这样做`setAdapter()`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T10:30:15.713

`Cursor`您可以从into读取数据`List<YourRow>`，其中`YourRow`是光标行中数据的类。然后只需将新`YourRow`项目添加到列表并`BaseAdapter`用于您的`ListView`. 阅读[本文](https://stackoverflow.com/questions/540461/android-baseadapter-how-to)以了解如何处理`BaseAdapter`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-19T12:57:26.470

我最终通过在数据库中添加一个额外的元素来解决这个问题。这是最简单的解决方案，因为我一开始就需要额外的元素。因此，在创建我的数据库之后，我在表中插入了一行我需要额外元素的行，其中包含我想要的值。

我还发现了这个讨论 [ [https://groups.google.com/forum/?fromgroups=#!topic/android-developers/QSOGjgL8kXI](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/QSOGjgL8kXI) ] 所以如果有人有类似的问题，这将是一个起点。谢谢！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-19T10:28:30.123

在适配器中，您可能可以在`getView`方法中显示额外的数据。但这有点取决于数据来自哪里，你想用它做什么（只是显示它？）等等。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-26T08:00:32.947

与向数据库添加额外字段类似，您可以向数据库中的投影添加额外字段。这为您节省了一点数据库空间并减少了信息冗余。这确实意味着每次访问都会重新计算该字段，而不仅仅是存储。

这是我用来根据商品价格（以美分存储）和相关单位来格式化成本的投影示例。

```
public static final String CONCATE_COST
        = "'$' || CASE WHEN SUBSTR(ROUND("+COLUMN_PRICE
            +"/100.0, 2), LENGTH(ROUND("+COLUMN_PRICE
            +"/100.0, 2))-1, 1)='.' THEN ROUND("+COLUMN_PRICE
            +"/100.0, 2) || '0' else ROUND("+COLUMN_PRICE
            +"/100.0, 2) end || "+COLUMN_UNIT; 
```

将其用作传递给列表视图的列，您可以直接将其与视图中的字段配对。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-05T00:05:07.373

在这些情况下，我的解决方案是使用静态值执行 UNION 查询。前任：

（选择 -1 作为 id，“HERE GOES THE NAME”作为名称，“HERE GOES THE ADDRESS”作为地址） UNION（从联系人中按姓名顺序选择 ID、姓名、地址）

（请仔细检查语法，我是凭记忆做的）

这样，您将获得带有 -1|HERE GOES THE NAME|HERE GOES THE ADDRESS 以及其余行的第一行

因此，您不会“污染”数据库，并且很容易根据条件打开/关闭第一行并使用连接。

# ruby-on-rails - Rails 使用 Nokogiri::XML::Reader => Model.create 解析大型 XML

> ID：12492774
> 
> 赞同：1
> 
> 时间：2012-09-19T10:20:46.287
> 
> 标签：ruby-on-rails, xml, nokogiri

我有很多大型 (32 Mb) XML 文件，其中包含来自不同商店的产品信息。我正在使用托管在 Heroku 上的 Rails。

我想解析这些 XML 提要并将这些产品写入我的数据库。我有一个半工作的解决方案，但它非常慢并且太占用内存。

到目前为止，我或多或少都在使用这个：

```
open_uri_fetched = open(xml_from_url)
xml_list = Nokogiri::HTML(open_uri_fetched)
xml_list.xpath("//product").each do |product|
// parsed nodes
// Model.create()
end 
```

这在一定程度上起到了作用。但是，这导致 Heroku 出现内存问题，导致脚本崩溃。它也很慢（我为 200 多个提要执行此操作）。

Heroku 告诉我通过使用 Nokogiri::XML::Reader 来解决问题，这就是我现在想要做的。

我也研究过使用：

```
ActiveRecord::Base.transaction do
Model.create()
end 
```

加快 Model.create() 过程。

**1\. 我的第一个问题：这是解决我的问题的正确方法（或至少是体面的方法）吗？**

现在，这就是我尝试做的：

```
 reader = Nokogiri::XML::Reader(File.open('this_feed.xml'))
  reader.each do |node|
    if node.node_type == Nokogiri::XML::Reader::TYPE_ELEMENT
      if node.name.downcase == xname
        puts "Name: " + node.inner_xml
        use_name = node.inner_xml
      end
    end
  end 
```

**问题 2：但是我在哪里放置模型创建代码？**

```
ActiveRecord::Base.transaction do
  Model.create(:name => use_name)
end 
```

如果我把它放在循环中，它会尝试为每个节点创建，这是错误的。我希望在 xml 列表中的每个产品之后调用它，对吗？

如果我创建一个在读取 XML 期间正在构建的哈希（然后用于创建模型创建），那会不会像首先打开 XML 文件那样占用大量内存？

简而言之，XML 文件看起来像这样：

```
<?xml version="1.0" encoding="UTF-8" ?>
<products>
    <product>
        <name>This cool product</name>
        <categories>
            <category>Food</category>
            <category>Drinks</category>
        </categories>
        <SKU />
        <EAN />
        <description>A long description...</description>
        <model />
        <brand />
        <gender />
        <price>126.00</price>
        <regularPrice>126.00</regularPrice>
        <shippingPrice />
        <currency>SEK</currency>
        <productUrl>http://www.domain.com/1.html</productUrl>
        <graphicUrl>http://www.domain.com/1.jpg</graphicUrl>
        <inStock />
        <inStockQty />
        <deliveryTime />
    </product>
</products> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T13:09:31.567

Reader 只需扫描一次文档。你必须自己跟踪状态：你看到了哪些元素，你是否在你关心的元素中，等等。

[这个要点](https://gist.github.com/827475)是一个鲜为人知的美，它极大地改进了 Reader 的语法。它以一种非常易于阅读的方式为您跟踪状态。

以下是如何使用它的示例，取自评论：

```
Xml::Parser.new(Nokogiri::XML::Reader(open(file))) do
  inside_element 'User' do
    for_element 'Name' do puts "Username: #{inner_xml}" end
    for_element 'Email' do puts "Email: #{inner_xml}" end

    for_element 'Address' do
      puts 'Start of address:'
      inside_element do
        for_element 'Street' do puts "Street: #{inner_xml}" end
        for_element 'Zipcode' do puts "Zipcode: #{inner_xml}" end
        for_element 'City' do puts "City: #{inner_xml}" end
      end
      puts 'End of address'
    end
  end
end 
```

真的应该有人用这个小小的，嗯，宝石制作宝石。

在你的情况下，你可以有一个`inside_element 'product'`块，提取你需要的元素，并在你的产品块的末尾创建你的模型实例。

# symfony - 我的转换器不工作（从模型数据到表单数据）

> ID：12492775
> 
> 赞同：6
> 
> 时间：2012-09-19T10:20:56.037
> 
> 标签：symfony, symfony-forms, silex

我正在构建一个 silex 应用程序（源代码在[这里](https://github.com/Mparaiso/Silex-Blog-App)）
在`App\Form\DataTransformer`我有一个 MetadataTransformer 类。
但是该`transform`方法不起作用（反向变换起作用）。
它应用于一个`App\Form\Metadata AbstractType`，它是一个集合的一部分`App\Form\ArticleForm AbstractType`。
最后一个表单在我的编辑方法中调用`App\Controller\Admin\ArticleAdminController`

数据转换器应该像这样映射数据

```
{"key":"value"} 
```

进入“表单数据”，如：

```
[{"name":"key","value":"key"}] 
```

所以它可以显示为一个集合。

**元数据.php**

```
class MetaData extends AbstractType
{
    protected $span4 = "span4";
    protected $span3 = "span3";

    public function buildForm(FormBuilderInterface $builder,array $options)
    {
        $builder
            ->add('name', 'text', array(
                "label" => ' ',
                "attr"  => array(
                    "class"       => $this->span3,
                    "placeholder" => "name"
                )
            ))
            ->add('value', 'text', array(
                'label' => ' ',
                'attr'  => array(
                    "class"       => $this->span4,
                    'placeholder' => 'value'
                )
            ))
        ;
    }

    public function getName()
    {
        return "MetaData";
    }
} 
```

**ArticleForm.php**

```
class ArticleForm extends AbstractType
{
    // ...some code...

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $transformer = new TagsToArrayTransformer();
        $metadataTransformer = new MetadataTransformer();

        $builder->add("title", "text", array(
            "required" => true,
            "attr"     => array(
                "class"       => $this->defaultClass,
                "placeholder" => "The title"
            )
        ));
        $builder->add("content", "textarea", array(
            "attr" => array(
                "placeholder" => "the content",
                "rows"        => 20,
                "class"       => $this->defaultClass
            )
        ));
        $builder->add(
            $builder->create('metadatas', 'collection', array(
                "type"         => new MetaData(),
                'allow_add'    => true,
                'allow_delete' => true,
                'by_reference' => false,
            ))
            ->addModelTransformer($metadataTransformer)
        );

        // ...some code...
    }

    public function getName()
    {
        return "article";
    }
} 
```

我的数据转换器应如下所示：

**元数据转换器.php**

```
namespace App\Form\DataTransformer;

use Symfony\Component\Form\DataTransformerInterface;

class MetadataTransformer implements DataTransformerInterface
{
    function transform($metadatas)
    {
        foreach($metadatas as $key => $value) {
            $result[] = array('name' => $key, 'value' => $value);
        }

        return $result;
    }

    function reverseTransform($metadatas)
    {
        if(is_array($metadatas)) {
            foreach($metadatas as $value) {
                $result[$value['name']] = $value['value'];
            }

            return $result;
        }
    }
} 
```

reverseTransform 有效，但变换本身似乎没有。
这里的目标是能够在表单中显示动态集合（在我的文章表单页面中动态添加和删除元数据）

在 repo 中，我添加更改代码以使其工作（即在控制器 ArticleAdminController 中转换数据，而不是在 Transformer 中进行）
如果我在运行时记录转换的结果，结果是我所期望的，但是表单不会使用它。

我已经尝试了 addViewTransformer / addModelTransformer 2.1 api，但没有任何区别。

**那么我的模型数据有什么问题 -> 到 -> 表单数据转换？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T23:41:27.000

您的表单类型是集合，您的转换器返回一个数组。你需要重铸它。尝试：

```
namespace App\Form\DataTransformer{
use Symfony\Component\Form\DataTransformerInterface;
class MetadataTransformer implements DataTransformerInterface{

function transform($metadatas){
  foreach($metadatas as $key=>$value):
    $result[]=array('name'=>$key,'value'=>$value);
  endforeach;
  $results=new \Doctrine\Common\Collections\ArrayCollection($result);
  return $results;
}

function reverseTransform($metadatas){
  if(is_array($metadatas)){
    foreach($metadatas as $value){
      $result[$value['name']]=$value['value'];
    }
    return $result;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-14T14:03:58.773

你试过这个：

```
function transform($metadatas) {
    $results = array();
    foreach ($metadatas as $key => $value) {
        $results['name'] = $key;
        $results['value'] = $value;
    }
    return $results;
} 
```

# jquery - JQuery 滑块问题 - 每 X 秒滑动一次

> ID：12492778
> 
> 赞同：0
> 
> 时间：2012-09-19T10:21:16.413
> 
> 标签：jquery, html, slider

我试图让我的滑块每 7 秒滑动一次。有没有办法通过修改这段代码或添加一点而不是重写它来做到这一点？

```
$('#buttons a').click(function(){
    var integer = $(this).attr('rel');
    $('#promotional-slide .cover').animate({left:-640*(parseInt(integer)-1)})  /*----- Width of div promo-section (here 160) ------ */
    $('#buttons a').each(function(){
    $(this).removeClass('active');
        if($(this).hasClass('button'+integer)){
            $(this).addClass('active')}
    });
}); 

$('.scroll-right').click(function(){
    $('#promotional-slide .cover').animate({left:-640})  

});

$('.scroll-left').click(function(){
    $('#promotional-slide .cover').animate({left:640})  

});

$('.regions ul li a').click(function(){
    $(this).next().toggle();
    return false;
}); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:24:21.647

```
setInterval(function(){
   $('#buttons a').trigger('click');
}, 7000) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-18T17:49:16.417

使用 Jquery Slider 为我工作：

```
setInterval(function(){
    $('.next').trigger('click');
}, 5000); 
```

# r - R：如何从“HH：MM：SS.CC”之类的字符串中获取秒数

> ID：12492779
> 
> 赞同：2
> 
> 时间：2012-09-19T10:21:18.440
> 
> 标签：r, datetime

我有一个像这样的字符串`00:05:33.91`，表示 5 分 33 秒和 91/100 秒。

如何获得总秒数？在示例中为`5*60+33+91/100 = 333.91`秒。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T11:16:19.330

假设您的时间不超过 24 小时，则此方法有效。`foo`使用包含字符的向量：

```
foo <- c("00:05:33.91","00:05:55","00:09:01.11") 
```

我们可以得到总时间如下：

```
as.numeric(as.difftime(foo,format="%H:%M:%OS",units="secs")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:28:32.113

您应该将字符串分成包含数字的子字符串。您可以使用正则表达式为每个时间单位提取组，或使用`split(".")`字符串的方法。这将导致字符串数组，其中第一个是`"00:05:33"`，第二个`"91"`。

之后，您可以再次制作 a `split(":")`，这将导致第一个元素为`"00"`、第二个`"05"`和第三个元素为 的字符串数组`"33"`。然后你应该使用`String.parseInt`每个数字，当你有数字时，你可以对它进行算术运算。

我不确定，但也许`Yoda Time`图书馆会帮助您更快更好地实现这一目标。例如，在 Yoda 中，您可以将给定的字符串直接解析为日期，并且`getSeconds()`- 也许这会起作用，但我不确定。我认为您应该首先尝试自己弄清楚，因为这确实是一个简单的任务，当您完全不知道如何实现这一点时，您应该寻求帮助。

# struts2 - Struts 2 重定向到另一个 jsp

> ID：12492785
> 
> 赞同：0
> 
> 时间：2012-09-19T10:21:59.370
> 
> 标签：struts2

我在我的 java web 项目中使用 struts 2。我想将 Action 成功重定向到另一个 jsp，但它不起作用。这是我的代码：

```
public class ConfigurerDureeStockageAction extends ActionSupport implements ServletRequestAware{
private final static Logger logger = Logger.getLogger(ConfigurerDureeStockageAction.class);
    private static final long serialVersionUID = 1L;

    private HttpServletRequest request;

    public void setServletRequest(HttpServletRequest request){
            this.request = request;
        }

    public String execute()throws Exception{
        logger.debub("Execute SUCCESS");
        return SUCCESS;

        }

        public String savePeriod(){
            logger.debub("savePeriod SUCCESS");
            return SUCCESS;
        }

} 
```

我的 struts.xml 是

```
<action name="AdminIndex" class="fr.si2m.occ.web.actions.admin.AdminIndexAction"
            method="execute">
            <result name="success">adminIndex.jsp</result>
        </action>
    <action name="ConfigurerDureeStockageSave" class="fr.si2m.occ.web.actions.admin.ConfigurerDureeStockageAction"
                method="savePeriod">
                <result name="success">adminIndex.jsp</result>
            </action> 
```

我试试这个

```
<action name="ConfigurerDureeStockageSave" class="fr.si2m.occ.web.actions.admin.ConfigurerDureeStockageAction"
            method="savePeriod">
            <result name="success" type="redirect"> 
             <param name="location">adminIndex.jsp</param >
            </result>
        </action> 
```

和这个

```
<action name="ConfigurerDureeStockageSave" class="fr.si2m.occ.web.actions.admin.ConfigurerDureeStockageAction"
            method="savePeriod">
            <result name="success" type="redirect">
            <param name="actionName">AdminIndex</param>
            </result>
        </action> 
```

最后一个配置给了我以下错误：

```
Caught OgnlException while setting property 'actionName' on type 'org.apache.struts2.dispatcher.ServletRedirectResult'.
Caught OgnlException while setting property 'actionName' on type 'org.apache.struts2.dispatcher.ServletRedirectResult'. - Class: ognl.ObjectPropertyAccessor
File: ObjectPropertyAccessor.java
Method: setProperty
Line: 166 - ognl/ObjectPropertyAccessor.java:166:-1
    at com.opensymphony.xwork2.ognl.OgnlUtil.internalSetProperty(OgnlUtil.java:430)
    at com.opensymphony.xwork2.ognl.OgnlUtil.setProperty(OgnlUtil.java:160)
    at com.opensymphony.xwork2.ognl.OgnlReflectionProvider.setProperty(OgnlReflectionProvider.java:91)
    at com.opensymphony.xwork2.ObjectFactory.buildResult(ObjectFactory.java:233)
    at com.opensymphony.xwork2.DefaultActionInvocation.createResult(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:368)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:278)
    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
    at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:236)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:236)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:511)
    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    at java.lang.Thread.run(Thread.java:662)
Caused by: ognl.NoSuchPropertyException: org.apache.struts2.dispatcher.ServletRedirectResult.actionName
    at ognl.ObjectPropertyAccessor.setProperty(ObjectPropertyAccessor.java:166)
    at com.opensymphony.xwork2.ognl.accessor.ObjectAccessor.setProperty(ObjectAccessor.java:27)
    at ognl.OgnlRuntime.setProperty(OgnlRuntime.java:2315)
    at ognl.ASTProperty.setValueBody(ASTProperty.java:127)
    at ognl.SimpleNode.evaluateSetValueBody(SimpleNode.java:220)
    at ognl.SimpleNode.setValue(SimpleNode.java:301)
    at ognl.Ognl.setValue(Ognl.java:737)
    at com.opensymphony.xwork2.ognl.OgnlUtil.setValue(OgnlU
12:12:06,608 INFO  [STDOUT] til.java:217)
    at com.opensymphony.xwork2.ognl.OgnlUtil.setValue(OgnlUtil.java:209)
    at com.opensymphony.xwork2.ognl.OgnlUtil.internalSetProperty(OgnlUtil.java:423)
    ... 72 more 
```

总是不工作。我的问题是：1-为什么配置`<result name="success">adminIndex.jsp</result>`不起作用？2- 为什么配置

```
<result name="success" type="redirect"> 
                 <param name="location">adminIndex.jsp</param >
                </result> 
```

不工作？3-为什么我收到配置错误

```
<result name="success" type="redirect">
            <param name="actionName">AdminIndex</param>
            </result> 
```

? AdminIndex 操作在 struts.xml 中声明。我很困惑。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:40:06.193

您的问题是您不应该使用 property `<param name="actionName">AdminIndex</param>`，这是解决方案：

```
<result name="success" type="redirectAction">
    <param name="actionName">AdminIndex</param>
</result> 
```

关于文档[Struts2 Redirect Action Result Type](http://struts.apache.org/2.x/docs/redirect-action-result.html)，您应该`redirectAction`改用`redirect`

回答您的问题：

1.  请给我们更多的细节。

2.  试试这个（假设你的命名空间配置是正确的）：

    ```
    <action name="ConfigurerDureeStockageSave" class="fr.si2m.occ.web.actions.admin.ConfigurerDureeStockageAction" method="savePeriod">
        <result name="success" type="redirect"> 
            <param name="location">adminIndex.action</param >
        </result>
    </action> 
    ```

    或者

    ```
    <action name="ConfigurerDureeStockageSave" class="fr.si2m.occ.web.actions.admin.ConfigurerDureeStockageAction" method="savePeriod">
        <result name="success"> 
            <param name="location">adminIndex.jsp</param >
        </result>
    </action> 
    ```

3.  因为结果类型`redirect`没有属性`actionName`，所以你应该使用`redirectAction`结果类型，它有这个属性

# javascript - 雷克雅未克被写入带有奇怪字符的 div

> ID：12492786
> 
> 赞同：0
> 
> 时间：2012-09-19T10:22:01.340
> 
> 标签：javascript, jquery

我有以下html

```
<div class="ui-widget" style="margin-top: 1em; font-family: Arial">
   Selected:
<div id="locationLog" style="height: 100px; width: 200px; overflow: auto;" class="ui-widget-content"></div>
</div>

<input type="hidden" name="HiddenLocations" id="HiddenLocation" /> 
```

然后，我有一些代码在每次页面加载时运行，以将一些文本添加到`locationLog`div 中。

```
@if (Model.SearchCriteria != null && Model.SearchCriteria.Locations != null)
{
   foreach (string t in @Model.SearchCriteria.Locations)
   {
      <script type="text/javascript">
         $("<div/>").text('@t').appendTo("#locationLog");
         $("<br/>").text("").appendTo("#locationLog");
         $("#locationLog").scrollTop(0);

         selectedLocations = $('#locationLog' + ' div').map(function () {
            return $(this).text();
         }).get();

         $('input[name=HiddenLocations]').val(selectedLocations); 
      </script>
   }
} 
```

现在，当我有“London”之类的文本时，这段代码运行良好，但是当我有“Reykjavík”时，这个代码会写成“ `Reykjav&#237;k`”。我怎样才能写出正确的文字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:26:11.853

尝试在文档中声明 utf-8 字符集

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

**编辑：** 试试这个：

```
function htmlDecode(input){
  var e = document.createElement('div');
  e.innerHTML = input;
  return e.childNodes.length === 0 ? "" : e.childNodes[0].nodeValue;
} 
```

并在这里使用它：

```
selectedLocations = $('#locationLog' + ' div').map(function () {
   return htmlDecode($(this).text());
}).get(); 
```

资料来源：[在 Javascript 中取消转义 HTML 实体？](https://stackoverflow.com/questions/1912501/unescape-html-entities-in-javascript)

# ruby-on-rails-3 - 使用 2 个用户重复登录时，SessionController#create 的行为不符合预期

> ID：12492799
> 
> 赞同：0
> 
> 时间：2012-09-19T10:23:04.873
> 
> 标签：ruby-on-rails-3, devise

```
 @user = FactoryGirl.create(:user)
  @user2 = FactoryGirl.create(:user)

  @request.env["devise.mapping"] = Devise.mappings[:user]

  controller.current_user.should be_nil

  post :create, :user => {email: @user.email, password: @user.test_pass}
  flash[:alert].should be_nil
  controller.should(respond_to(:current_user))
  controller.current_user.should_not be_nil

  post :create, :user => {email: @user2.email, password: @user2.test_pass}

  flash[:alert].should be_nil
  controller.should(respond_to(:current_user))
  controller.current_user.should == @user2 
```

最后一个失败。它仍然是@user，而不是@user2。

**编辑：**

如果我这样做，这是注销用户并清除会话的公平方式吗？

```
class SessionsController < Devise::SessionsController

  def create
    if warden.authenticated?(:user)
      sign_out(current_user)
    end
    super
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:35:02.150

设计身份验证的流程非常合乎逻辑，一旦您登录/注册，您将被重定向并且您的会话将被启动并被捕获，您需要先签出，然后才能启动新会话。

现在我看到您正在测试默认设计行为，要求它在创建第二个用户时退出第一个用户？well devise 不会这样做，但如果您的应用程序需要这样做，为什么不使用回调方法 before_create 呢？

我想这就是 Red、Green、Refactor 的全部想法。

# javascript - Backbone.js - 自定义收集事件

> ID：12492802
> 
> 赞同：5
> 
> 时间：2012-09-19T10:23:09.780
> 
> 标签：javascript, backbone.js

我正在尝试为视图绑定实现自定义集合事件。

在我看来，我想做类似的事情：

```
this.collection.on('available', this.available); 
```

并以某种方式在我的收藏中触发此方法。

假设我的集合中有一个方法可以设置特定的模型属性（可用），那么我如何触发绑定到该方法的所有视图？

这是否可能，并且能够将有问题的模型传递给视图进行更新。

提前感谢您的任何帮助，非常感谢:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T10:30:18.700

向 Backbone 添加新事件非常简单。您只需要在`trigger`要触发事件的对象上调用方法。

例如，假设您在集合的一个方法中，并且有一个模型（称为`model`）：

```
this.trigger('available', model); 
```

绑定到`available`事件的代码就像您在问题中描述的那样。

编辑：如今，Backbone 提供了一种`listenTo`方法，您通常应该在从视图绑定到集合事件时使用该方法。当调用 remove 函数时，视图将自动解除与此事件的绑定，这会阻止旧视图在被删除后继续接收集合事件。在您看来，这可以像这样使用：

```
this.listenTo(this.collection, 'available', this. available); 
```

# xcode - 如何在 Cocoa/Xcode 中制作具有动态列数和绑定的 NSTableView？

> ID：12492806
> 
> 赞同：6
> 
> 时间：2012-09-19T10:23:24.097
> 
> 标签：xcode, cocoa, dynamic, nstableview

抱歉，我知道这是一个有点复杂的问题。

当我想在屏幕上创建一个具有固定列数的 NSTableview 对象时，生活很容易。我只是对每一列进行数据绑定，然后简单地读取/写入该模型（根据 MVC）。

但是当我需要一个具有动态列号的表时（我的意思是允许用户添加/删除列），生活变得不友好。当我使用了 2 种不同的方法时：首先，更容易，但最糟糕的方法是我可以制作一个足够大的表格，这样用户就永远无法填满它！但我知道记忆永远不会感激！

在第二种方法中，我可以创建一个 NSTableColumn 数组，并为每一列分配一个编号标识符，如下所示：

> NSTableColumn * column[iColumn]; //NSInteger iColumn 由用户定义
> 
> ```
>  for( int i=0;i< iColumn;i++){
>         column[i] = [[NSTableColumn alloc] initWithIdentifier:[ NSString stringWithFormat:@"%i" ,i] ];
>         [column[i] setWidth:100];
>         [tableView   addTableColumn:column[i]];
>     } 
> ```

这工作正常，但有一些烦人的限制。例如，使用“数据绑定”和使用一些拖放操作比处理列编号为 1、2、3、.... 的表格要容易得多。

我认为必须有一些更简单的方法来为此目的使用 UI Builder，而不是编写代码。也许可以为整个 TableView 绑定数据，而不是为每个单独的列绑定数据（类似于 Visual Studio C++/ Clr for "dataTable" object. 或其他方法？任何答案将不胜感激

# python - Python：如何使 ANSI 转义码在 Windows 中也能正常工作？

> ID：12492810
> 
> 赞同：31
> 
> 时间：2012-09-19T10:23:46.490
> 
> 标签：python, windows, ansi-escape

如果我在 linux 下的 python 中运行它，它可以工作：

```
start = "\033[1;31m"
end = "\033[0;0m"
print "File is: " + start + "<placeholder>" + end 
```

但是如果我在 Windows 中运行它就不起作用，我怎样才能让 ANSI 转义码在 Windows 上也能工作？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2020-10-06T09:19:54.187

对于 Windows，调用`os.system("")`可以正确处理 ANSI 转义序列：

```
import os
os.system("")  # enables ansi escape characters in terminal

COLOR = {
    "HEADER": "\033[95m",
    "BLUE": "\033[94m",
    "GREEN": "\033[92m",
    "RED": "\033[91m",
    "ENDC": "\033[0m",
}

print(COLOR["GREEN"], "Testing Green!!", COLOR["ENDC"]) 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-09-19T10:47:37.460

您可以检查[Python 模块以在 Windows 上为标准输出启用 ANSI 颜色吗？](https://stackoverflow.com/questions/8358533/python-module-to-enable-ansi-for-stdout-on-windows)看看它是否有用。

[colorama](http://pypi.python.org/pypi/colorama)模块似乎是跨平台的。

你安装 colorama：

```
pip install colorama 
```

然后：

```
import colorama
colorama.init()
start = "\033[1;31m"
end = "\033[0;0m"
print "File is: " + start + "<placeholder>" + end 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2020-02-12T17:55:31.483

这是我长期以来寻求的解决方案。只需使用**标准库**`ctypes`中的模块。它默认安装在 Python 3.x 中，*仅*在 Windows 上。因此，在使用之前检查操作系统是否为 Windows（例如，使用 ）。***`platform.system`***

 ***```
import os
if os.name == 'nt': # Only if we are running on Windows
    from ctypes import windll
    k = windll.kernel32
    k.SetConsoleMode(k.GetStdHandle(-11), 7) 
```

完成此操作后，您可以使用 ASCII 特殊字符（例如`\x1b[31m`，红色），就像您在 Unix 操作系统上一样：

```
message = "ERROR"
print(f"\x1b[31m{message}\x1b[0m") 
```

我喜欢这个解决方案，因为它不需要安装模块（如 colorama 或 termcolor）。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-07-25T17:01:29.287

如果您使用的是 Win 10（在 cmd 中具有本机 ANSI 支持），则似乎存在一个[在 Python 3.7 中被标记为已解决的错误](https://bugs.python.org/issue29059)（尽管看起来它实际上并未修复）。

一种解决方法是`subprocess.call('', shell=True)`在打印前添加。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-19T10:36:08.257

你可以看看[https://github.com/kennethreitz/clint](https://github.com/kennethreitz/clint)

从自述文件：

```
>>> from clint.textui import colored, puts

>>> puts(colored.red('red text'))
red text

# It's red in Windows, OSX, and Linux alike. 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-10-19T15:59:56.717

你可以这样做：

```
import os
os.system("") 
```

这对我有用。命令提示符默认支持颜色。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-07-22T23:27:20.907

根据互联网上成千上万的好答案，发送 ANSI 转义序列应该可以工作，但是一个模糊的细节花了我两天半的时间才偶然发现。诀窍是必须设置某个注册表项。我正在使用（仅适用于今天）Windows 10 Enterprise，版本 1709，内部版本 16299。

在 HKEY_CURRENT_USER 中，在 Console 下，在 TrimLeadingZeros 和 WindowAlpha 之间应该有 VirtualTerminalLevel。如果它不存在，请继续创建它。这是一个 REG_DWORD。将其值设置为 1。打开一个新终端，运行 Python，然后玩得开心一点。

```
print("\033[48;2;255;140;60m ORANGE BACKGROUND \033[48;2;0;0;0m") 
```

请参阅[https://github.com/ytdl-org/youtube-dl/issues/15758](https://github.com/ytdl-org/youtube-dl/issues/15758)阅读比我了解更多的人的资料。

现在，如果我能记住*为什么*要为 Python 程序的输出着色...

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-08-05T06:59:17.213

这是我使用过的更简单的代码。

```
import os
os.system("color") # Alternative - os.system("")

TCOLOR = "\033[31;3m"
ENDC = "\033[m"
print (TCOLOR + "Make yourself happy" + ENDC) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-09-19T11:10:32.677

我写了一个简单的模块，可在： http: [//pypi.python.org/pypi/colorconsole](http://pypi.python.org/pypi/colorconsole)

它适用于 Windows、Mac OS X 和 Linux。它对 Linux 和 Mac 使用 ANSI，但在 Windows 上对控制台函数进行本地调用。您有颜色、光标定位和键盘输入。它不能替代 curses，但如果您需要在简单的脚本或 ASCII 游戏中使用它会非常有用。

可以在此处找到文档：[http ://code.google.com/p/colorconsole/wiki/PageName](http://code.google.com/p/colorconsole/wiki/PageName)

PS：这[与使用 Python 在终端中打印颜色的答案相同吗？](https://stackoverflow.com/questions/287871/print-in-terminal-with-colors-using-python/7839185#7839185)，但我不知道如何链接到回复。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-10-20T23:26:19.097

尝试在此处添加分号`\033[;`，如果没有该分号，我会得到不良影响。

```
start = "\033[;1;31m"
end = "\033[;0;0m" 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-04-10T19:21:47.907

```
import os
os.system("")

COR = {
    "HEADER": "\033[95m",
    "BLUE": "\033[94m",
    "GREEN": "\033[92m",
    "RED": "\033[91m",
    "ENDC": "\033[0m",
}

print(COR["RED"]+"Testing Green!!"+COR["ENDC"]) 
```***

# java - 如何从 JTextPane 中获取选择

> ID：12492817
> 
> 赞同：2
> 
> 时间：2012-09-19T10:24:14.617
> 
> 标签：java, swing, selection, jtextpane

我想找出选择了 JTextPanel 文本的哪一部分。尝试调用`JTextPane.getSelectionStart()`and `JTextPane.getSelectionEnd()`，但它们总是返回与当前插入符号位置相同的值。我的问题是什么？

我会感谢任何获得当前选择的代码示例。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T13:42:58.593

看看[`JTextComponent#getSelectedText()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#getSelectedText%28%29)。您只需在您的实例上调用此方法，`JTextPane`它将返回您的选定文本`JTextPane`。做了一个小例子：

```
import java.awt.BorderLayout;
import java.awt.Container;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class JavaApplication101 {

    private JTextPane jTextPane;
    private JButton btnGetSelectedText;

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new JavaApplication101().createAndShowUI();
            }
        });
    }

    private void createAndShowUI() {

        JFrame frame = new JFrame("Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        initComponents(frame.getContentPane());
        frame.pack();
        frame.setVisible(true);
    }

    private void initComponents(Container contentPane) {
        jTextPane = new JTextPane();
        btnGetSelectedText = new JButton("Get selected text");

        btnGetSelectedText.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                JOptionPane.showMessageDialog(null, jTextPane.getSelectedText());
            }
        });
        contentPane.add(jTextPane, BorderLayout.NORTH);
        contentPane.add(btnGetSelectedText, BorderLayout.SOUTH);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T10:34:16.587

```
public class TextPaneHighlightsDemo extends JFrame {

public TextPaneHighlightsDemo() {
    super("SplashScreen demo");
    setSize(300, 200);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    final JTextPane textPane = new  JTextPane();
    add(textPane);
    textPane.addCaretListener(new CaretListener() {

        @Override
        public void caretUpdate(CaretEvent e) {
            Highlight[] h = textPane.getHighlighter().getHighlights();
            for(int i = 0; i < h.length; i++) {
                System.out.println(h[i].getStartOffset());
                System.out.println(h[i].getEndOffset());
            }

        }
    });
        }

public static void main (String args[]) {
    TextPaneHighlightsDemo test = new TextPaneHighlightsDemo();
    test.setVisible(true);
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T14:15:21.053

我发现了我的问题 - 这是一个在我收到事件`FocusListener`之前正在更改 JTextPane 内容（并因此放弃选择）的自定义。`keyTyped`

无论如何，谢谢大家的例子和评论！

# c# - 解析值时Orderby Linq错误

> ID：12492820
> 
> 赞同：0
> 
> 时间：2012-09-19T10:24:26.503
> 
> 标签：c#, linq, dynamic, sql-order-by

我需要一种将字符串解析为 linq 语句中 orderby 的变量的方法。这是我的代码：

```
var s = db.Vehicles.Where(c=>c.Model.body_style==b)
          .Select(u=> new{
                     u.Manufacturer.manufacturer_name, 
                     u.model_code, 
                     u.daily_hire_rate
            })
          .Distinct()
          .OrderBy(sort); 
```

它给了我错误：无法从用法中推断方法“System.Linq.Enumerable.OrderBy(System.Collections.Generic.IEnumerable, System.Func)”的类型参数。尝试明确指定类型参数。

我听说过动态表达式 api。但我不知道如何使用它。我在vs2010中使用mvc2。我没有使用模型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:51:46.487

看看动态 LINQ，Scott Gu 在这里做了一篇很棒的文章[http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-动态查询库.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

它使它变得如此简单

```
query = query.OrderBy(columnName); 
```

或者

```
//orderby descending
query = query.OrderBy(columnName + " DESC"); 
```

# .net - 新的 .NET 功能包和缩小 {version} 通配符不适用于目录？

> ID：12492822
> 
> 赞同：19
> 
> 时间：2012-09-19T10:24:27.853
> 
> 标签：.net, asp.net-mvc-4, .net-4.5, asp.net-optimization

我有以下完美运行的代码：

```
bundles.Add
(
    new ScriptBundle("~/bundles/scripts")
    .Include
    (
        "~/Scripts/jquery-{version}.js"
        ,"~/Scripts/jquery-ui-{version}.js"
        ,"~/Scripts/jquery.unobtrusive*"
        ,"~/Scripts/jquery.validate*"
        ,"~/Scripts/fullcalendar-1.5.4/fullcalendar.js"
        , "~/Scripts/DataTables-1.9.3/media/js/jquery.dataTables.js"
    )
); 
```

但后来我想使用 {version} 通配符来使用它的所有漂亮功能：

```
bundles.Add
(
    new ScriptBundle("~/bundles/scripts")
    .Include
    (
        "~/Scripts/jquery-{version}.js"
        ,"~/Scripts/jquery-ui-{version}.js"
        ,"~/Scripts/jquery.unobtrusive*"
        ,"~/Scripts/jquery.validate*"
        , "~/Scripts/fullcalendar-{version}/fullcalendar.js"
        , "~/Scripts/DataTables-{version}/media/js/jquery.dataTables.js"
    )
); 
```

和 BANG，异常，它不起作用，我做错了吗？

**编辑**

***异常信息：*** System.ArgumentException：

目录不存在。参数名称：directoryVirtualPath

***堆：***

> [ArgumentException：目录不存在。Имя параметра: directoryVirtualPath]
> System.Web.Optimization.Bundle.Include(String[] virtualPaths) +40
> Aerostar.BundleConfig.RegisterBundles(BundleCollection bundles) 在 c:\Users\Denis\Documents\Visual Studio 2012\Projects\Aerostar\Aerostar \App_Start\BundleConfig.cs:21
> Aerostar.MvcApplication.Application_Start() 在 c:\Users\Denis\Documents\Visual Studio 2012\Projects\Aerostar\Aerostar\Global.asax.cs:24
> 
> [HttpException（0x80004005）：目录不存在。Имя параметра: directoryVirtualPath]
> System.Web.HttpApplicationFactory.EnsureAppStartCalledForIntegratedMode(HttpContext context, HttpApplication app) +9859725
> System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers) +118
> System.Web.HttpApplication.InitSpecial( HttpApplicationState 状态，MethodInfo[] 处理程序，IntPtr appContext，HttpContext 上下文）+172
> System.Web.HttpApplicationFactory.GetSpecialApplicationInstance（IntPtr appContext，HttpContext 上下文）+336
> System.Web.Hosting.PipelineRuntime.InitializeApplication（IntPtr appContext）+296
> 
> [HttpException（0x80004005）：目录不存在。Имя параметра: directoryVirtualPath]
> System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9873912 System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +101 System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +254

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-24T20:38:01.270

没错，目前 {version} 表达式仅支持作为文件的一部分，在进行目录遍历时不使用它。这是我们将考虑在未来版本中修复的问题。

[我在 codeplex 上为此](http://aspnetoptimization.codeplex.com/workitem/29)提交了一个问题。

如果这是您对我们修复的强烈感受，请投票。

# jquery - 突出显示表格行不起作用

> ID：12492824
> 
> 赞同：0
> 
> 时间：2012-09-19T10:24:33.893
> 
> 标签：jquery

我有一个 HTML 表和[http://jsfiddle.net/Lijo/Hb28u/4/](http://jsfiddle.net/Lijo/Hb28u/4/)中给出的 jquery 脚本。有四种 jQuery 方法可以突出显示表格行。最后两种方法不起作用，为什么它们不起作用？我正在寻找简单的英语解释。

HTML

```
<table id="table1">
<tr> <td>N</td><td>Y</td></tr>  
<tr class="y_n"><td>Q</td><td>N</td></tr>  
</table> 

 <br/><br/>

<table id="table2">
<tr> <td>N</td><td>Y</td></tr>  
<tr class="y_n"><td>Q</td><td>N</td></tr> 
</table> 

<br/><br/>

<table id="table3">
<tr> <td>N</td><td>Y</td></tr>  
<tr class="y_n"><td>Q</td><td>N</td></tr>  
</table> 

 <br/><br/>

<table id="table4">
<tr> <td>N</td><td>Y</td></tr>  
<tr class="y_n"><td>Q</td><td>N</td></tr>  
 </table> 

 <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.js"> 
```

脚本

```
$(document).ready(function()
{

//Apporach 1  - Highlight First Row

$('#table1 tr td:eq(0)').each(function() {
if ($(this).text() == 'N') {
    $(this).parent().css('background-color', 'Orange');
}
});

//Apporach 2 -  - Highlight Second Row

$('#table2 tr td:gt(0)').each(function() {
if ($(this).text() == 'N') {
    $(this).parent().css('background-color', 'Orange');
}
});

//Apporach 3 - Highlight Second Row

$('#table3 tr td:eq(1)').each(function() {
if ($(this).text() == 'N') {
    $(this).parent().css('background-color', 'Orange');
}
});

//Apporach 4 Highlight All Rows

$('#table4 tr td)').each(function() {
if ($(this).text() == 'N') {
    $(this).parent().css('background-color', 'Orange');
}
});

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:30:10.350

现在它可以工作[了](http://jsfiddle.net/Hb28u/8/)

```
$('#table3 tr td:eq(3)').each(function() { // note that you search for td no. 3 and not 1
   if ($(this).text() == 'N') {
      $(this).parent().css('background-color', 'Orange');
   }
});

//Apporach 4 Highlight All Rows
$('#table4 tr td').each(function() { // note that in your example you have a ) at the end of the selector
    if ($(this).text() == 'N') {
        $(this).parent().css('background-color', 'Orange');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:30:07.990

```
 //Apporach 3 - Highlight Second Row
$('#table3 tr:eq(1) td').each(function() { //second row
if ($(this).text() == 'N') {
    $(this).parent().css('background-color', 'Orange');
}
});

    //Apporach 4 Highlight All Rows
    $('#table4 tr td').each(function() { //here you had a unnescessary ')'
    if ($(this).text() == 'N') {
        $(this).css('background-color', 'Orange');
    }
    }); 
```

希望你明白了:)

# html - HTML5 将音乐与图像同步

> ID：12492825
> 
> 赞同：0
> 
> 时间：2012-09-19T10:24:34.750
> 
> 标签：html

我正在使用 HTML5 音频元素播放 4 秒的音乐循环。同时我需要显示48张图片，一张接着一张。当音频返回到循环的开头时，图像必须返回到第 1 帧。

我需要将图像与音乐同步。

对于循环的几次迭代来说，这不是问题，但是音乐处理中的任何轻微延迟都会导致与图像的轻微失去同步 - 这会随着时间的推移而增加。

请对保持同步的最佳方式有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:31:55.960

音频元素正在[引发 timeupdate](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/timeupdate)事件。您可以使用它通过 JavaScript 同步当前显示的图像。

# google-app-engine - 为什么谷歌从帐户产品页面中删除 appengine 图标？

> ID：12492828
> 
> 赞同：1
> 
> 时间：2012-09-19T10:24:51.117
> 
> 标签：google-app-engine

要访问我的 GAE 应用程序，我通常单击该页面上的 GAE 图标，但是当谷歌删除它时，我担心谷歌会像 Knol 等他们的一些产品一样停止这项服务，因为我要启动我的业务是在接下来的几次安装中使用 appengine。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:32:28.070

应用引擎将继续存在。

根据 Google 自己的政策声明，您会在一年内收到任何可能破坏任何 GAE 应用程序的更改的通知。GAE 上运行着数以万计的业务，并且没有任何消失的危险。

[http://googledevelopers.blogspot.co.uk/2012/04/changes-to-deprecation-policies-and-api.html](http://googledevelopers.blogspot.co.uk/2012/04/changes-to-deprecation-policies-and-api.html)

> Google App Engine、Google Maps/Earth API 和 YouTube API 将逐步取消其当前的 3 年弃用政策，并将在 2014 年 4 月过渡到一年政策。Google Cloud Storage 保留其当前的一年政策。非常清楚，我们并没有弃用 API 本身。

# java - jsp编译器的奇怪行为

> ID：12492831
> 
> 赞同：0
> 
> 时间：2012-09-19T10:25:05.147
> 
> 标签：java, jsp, jboss

我的 jsp scriptlet 中有以下代码（在 <% %> 内）：

```
boolean blockScreen = false;
    if(title.equalsIgnoreCase(labelA) || title.equalsIgnoreCase(labelB))
    {
    blockScreen = true;
    } 
```

上述jsp对应生成的java文件包含如下代码（相同）：

```
boolean blockScreen = false;
        if(title.equalsIgnoreCase(labelA) || title.equalsIgnoreCase(labelB))
        {
        blockScreen = true;
        } 
```

但是当我调试时，我看不到 blockScreen 变量。我反编译了class文件，可以看到如下代码：

```
 if(!title.equalsIgnoreCase(labelA))
            if(!title.equalsIgnoreCase(labelB)); 
```

不知道为什么 blockScreen 变量在类文件中被清除。在 ac:choose 标记中进一步使用相同的变量：

```
<c:choose>
<c:when test="${blockScreen==true}">
<!--do something -->    
</c:when>
<c:otherwise>
<!--do something else -->
</c:otherwise>
</c:choose> 
```

我正在使用 JBoss EAP 6 服务器。

在这方面的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:37:11.603

EL 表达式`${blockScreen==true}`使用名为 的请求属性`blockScreen`，而不是同名的 scriptlet 变量，因此编译器可以自由优化掉使用的变量。

如果您想改用 scriptlet 变量，请尝试`<c:when test="<%= blockScreen %>">`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:32:52.413

AFAIR 变量的范围对于 scriplet（和生成的 servlet）是本地的，因此它在页面的其余部分**不**可见/不可访问。出于这个原因，编译器将完全删除它。
如果您**可以**在页面的其他地方使用同名变量，这意味着它在其他地方被声明为页面范围的变量......

# php - PHP CURL 返回的文本因 utf-8 希腊语而损坏

> ID：12492834
> 
> 赞同：2
> 
> 时间：2012-09-19T10:25:14.087
> 
> 标签：php, curl, utf-8

我对 PHP、CURL 和 UT-8 希腊字符有疑问。

我尝试从网站（特别是博客）中检索一些文本，但是当我阅读检索到的文本时，它已损坏。它显示类似**Î ÏÎºÎ¿ÏÏÏ ÏÎ¿Ï ÏÏÏÏÎ¿Î½**。另一方面，英文字符显示得很好。

该网站的字符集是“UTF-8”，我的脚本中的字符集也是如此。

我对 CURL 使用以下设置。

```
$ch = curl_init();
$useragent='Mozilla/5.0 (Windows NT 6.1; rv:15.0) Gecko/20120716 Firefox/15.0a2';
$header = array('Accept-Charset: UTF-8');

curl_setopt($ch, CURLOPT_FAILONERROR, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
curl_setopt($ch, CURLOPT_AUTOREFERER, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_MAXREDIRS, 2);
curl_setopt($ch, CURLOPT_USERAGENT, $useragent);
curl_setopt($ch, CURLOPT_ENCODING, "");
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_TIMEOUT, 3); 
```

我使用 Xpath 查询`$res=$xp->query("...")`来查找文本的位置。

然后我采取这样的文字：

```
foreach($res as $text_result)
    $texter=trim($text_result->nodeValue); 
```

我检查了返回的文本字符集`mb_detect_encoding`及其正确的“UTF-8”。

该脚本在大多数网站上都能正常运行，但在其中两个网站上却失败了。
我无法弄清楚问题可能是什么。

有人有想法吗？
谢谢大家。

更新

我通过添加以下内容修复了错误：

```
$doc->loadHTML('<?xml encoding="UTF-8">' . $html); 
```

但是现在，当我将文本插入数据库时​​，它们仍然损坏。在我的电脑（easyphp）中也可以正常工作。

我在 000webhost 拥有一个免费主机。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:40:32.400

我找到了解决方案。

我必须通过以下方式转换 html 实体编码：

```
@$dom->loadHTML(mb_convert_encoding($data, 'HTML-ENTITIES', 'UTF-8')); 
```

这里给出了解决方案：[解决方案](https://stackoverflow.com/questions/8218230/php-domdocument-savehtml-not-encoding-japanese-correctly/ "解决方案")

# java - 如何通过 actionSet 扩展点为 Workbenchwindow 贡献菜单？

> ID：12492838
> 
> 赞同：1
> 
> 时间：2012-09-19T10:25:38.667
> 
> 标签：java, eclipse, rcp

在我的 RCP 程序中，我在工作台窗口中添加了一个菜单“Demo”，并在“Demo”下方添加了一个分隔符“addition”。代码如下，

```
public class ApplicationActionBarAdvisor extends ActionBarAdvisor {

private ExampleAction exampleAction;

@Override
protected void makeActions(IWorkbenchWindow window) {
    // TODO Auto-generated method stub
    super.makeActions(window);

    exampleAction = new ExampleAction(window);      
}

@Override
protected void fillMenuBar(IMenuManager menuBar) {
    // TODO Auto-generated method stub
    super.fillMenuBar(menuBar);

    MenuManager demoMenu = new MenuManager("&Demo", "demo");
    demoMenu.add(exampleAction);
    demoMenu.add(new GroupMarker(IWorkbenchActionConstants.MB_ADDITIONS));      
    menuBar.add(demoMenu);
}
 .............. 
```

}

现在我想为“demo/additions”这个位置贡献一个子菜单。我声明了一个 actionSet 扩展点，如下所示，

```
<extension
         point="org.eclipse.ui.actionSets">
      <actionSet
            id="RCP-View-Example.actionSet"
            label="actionSet">
         <menu
               id="RCP-View-Example.menu"
               label="ActionSetMenu"
               path="demo/additions">
            <groupMarker
                  name="menuItem">
            </groupMarker>
         </menu>
         <action
               class="Action1"
               id="RCP-View-Example.action"
               label="Action"
               menubarPath="RCP-View-Example.menu/menuItem"
               style="push"
               toolbarPath="main/additions">
         </action>
      </actionSet>
   </extension>
   <extension
         point="org.eclipse.ui.actionSetPartAssociations">
      <actionSetPartAssociation
            targetID="RCP-View-Example.actionSet">
         <part
               id="my.view">
         </part>
      </actionSetPartAssociation>
   </extension> 
```

我没有看到菜单被贡献并显示在“演示”菜单下。我将菜单路径从“path="demo/additions”修改为“path="org.eclipse.ui.main.menu/demo/additions”，还是看不到。

谁能帮忙看看我的程序出了什么问题？

我将菜单路径从path="demo/additions修改为path="additions"。打开视图时看到“Demo”后面的菜单。但是，在actionSetPartAssociations扩展点中指定的视图关闭后，菜单仍然存在那里。我希望菜单在与其关联的视图关闭时消失。我的程序有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:16:14.810

[我认为文档](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fextension-points%2Forg_eclipse_ui_actionSets.html)中的这个注释可能适合这里：

> 存在当前影响操作集的实现限制。定义要在操作集中引用的整个菜单结构非常重要。因此，例如，如果另一个动作集定义了一个名为“示例”的菜单，则不可能依赖现有的“示例”。有必要在希望使用它的每个操作集中重新定义“示例”菜单。

所以问题可能出在你的子菜单 path="demo/additions" 中，它应该包括子菜单的完整路径。如果您已经拥有该子菜单，则可以在该菜单内的某个操作上尝试 Alt+Shift +F2 以找到该菜单的 ID 并从那里开始工作。

但是，如果您刚开始使用菜单，我建议您立即使用命令框架。即使您使用的是已经建立的富客户端，您也可以轻松地将命令放入您喜欢的任何位置，并且在 Eclipse Juno 和更新版本中不推荐使用 actionSets ExtensionPoint。一个很好的命令教程可以在[这里](http://www.vogella.com/articles/EclipseCommands/article.html)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:27:47.580

参考 org.eclipse.ui.internal.navigator.resources.actions.NewActionProvider.java

请参阅 fillContextMenu() 方法。他们在那里创建了一个子菜单。它将帮助您理解。

# javascript - 如何将折线添加到 mapbox.js 地图？

> ID：12492841
> 
> 赞同：1
> 
> 时间：2012-09-19T10:25:44.797
> 
> 标签：javascript, map, drawing, polyline, mapbox

我正在使用[mapbox.js map javascript api](http://mapbox.com/mapbox.js/api/v0.6.5/)，但我没有找到创建线、折线、多边形等的本地方法。我创建了一个可能对我有帮助的[示例](http://mapbox.com/mapbox.js/example/vectors-with-d3/)，但看起来很困难。

我使用 mapbox，因为它支持我所知道的最棒的[地图动画。](http://mapbox.com/mapbox.js/api/v0.6.5/#Easing)见[例子](http://mapbox.com/mapbox.js/example/optimal-easing/)。

谁知道使用 mapbox.js api 提供绘图线、折线等的简单示例或库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T21:03:57.843

mapbox.js 目前不支持画线本身，但你可以[将它与 d3](http://mapbox.com/mapbox.js/example/vectors-with-d3/)一起使用来支持折线。

# javascript - asp.net 未在复选框中显示选中和未选中

> ID：12492847
> 
> 赞同：2
> 
> 时间：2012-09-19T10:26:15.440
> 
> 标签：javascript, jquery, asp.net, checkbox

为什么检查和未检查在 asp.net 中不起作用，就像检查的属性没有显示一样？我正在尝试使用 jquery 将检查和未检查的布尔值放入警报中？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="Scripts/jquery-1.8.1.js" type="text/javascript"></script>
    <script src="JScript1.js" type="text/javascript"></script>
    <script type="text/javascript">

    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:CheckBox ID="CheckBox1" runat="server" />
    </div>
    </form>
</body>
</html>

$(document).ready(function () {

    $("#CheckBox1").click(function () {

        if ($(this).is(':checked')) {
           alert("true");

        } else {
            alert("false");
        }

    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:34:00.707

使用 Firebug 检查元素的 ID。我知道 ASP.NET 会将一个随机 ID 字符串附加到 CheckBox1 的末尾，因此 Jquery 不会选择它。

最好的方法是用标准 HTML 包围它并从父元素调用元素。

```
<div id="CheckContainer">
    <asp:CheckBox ID="CheckBox1" runat="server" />
</div> 
```

进而

```
$(document).ready(function () {

$("#CheckContainer input[type='checkbox']").click(function () {

    if ($(this).is(':checked')) {
       alert("true");

    } else {
        alert("false");
    }

}); 
```

});

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T10:29:43.477

复选框的*客户端* `ID`不会是`CheckBox1`.

您需要`CheckBox1.ClientID`使用它来获取它并在 jQuery 中使用它。

```
$("#<%:CheckBox1.ClientID%>") 
```

有关详细信息，请参阅[`Control.ClientID`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientid.aspx)MSDN。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T23:18:18.630

因为 Asp.Net 控件具有 runat="server" 属性，所以元素的 id 将附加 ContentPanel .. 所以导向器选择器将不起作用.. 试试这个

所以在这种情况下有效的选择器将是

```
$("[id$=CheckBox1]")  
$("[id*=CheckBox1]")
$("#<%= CheckBox1.ClientID %>")

$(document).ready(function () {
    $("[id$=CheckBox1]").click(function () {
        if ($(this).is(':checked')) {
           alert("true");
        } else {
            alert("false");
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T13:43:35.733

删除此行并重试

```
<script src="JScript1.js" type="text/javascript"></script> 
```

并将您的 jQuery 代码放在脚本标签中。希望它应该工作。

# php - 从 php 中的 textarea 更新值

> ID：12492848
> 
> 赞同：0
> 
> 时间：2012-09-19T10:26:15.077
> 
> 标签：php, html

所以..在文本区域中，我将存储在我的表中的值像这样修改它们：

```
$l=mysql_query("select * from intrebari where cod_chestionar='".$_SESSION['cod']."'");

echo "<form method='POST' action='lalalalal.php'>";
echo "<textarea  name='edit' cols='50'>";
while($p=mysql_fetch_array($l))

{

   echo $p[denumire_intrebare];
   echo "\n";

}
echo "</textarea>";
echo "<input type='submit' value='Finished' name='save_edit'/>";
echo "</form>";
} 
```

一切都很好......作为问题的值被放在单独的行中。现在我想在必要时进行更新。所以在我的更新文件中我这样做：

```
$a=$_POST['edit'];

$a_array=explode("\n",$a);

     foreach($a_array as $b)

     {

$sql=mysql_query("UPDATE intrebari set denumire_intrebare='$b' WHERE cod_chestionar='".$_SESSION['cod']."'");
echo $b;
} 
```

我希望对所有具有相同 cod_chestionar 的问题进行更新。在这一刻，如果我进行更新，我所有的问题都会被赋予相同的价值。如果我回显它，则在我修改它们时会将值带给我，但它不会在表中进行更新。你能给出意见吗，因为我就是想不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:33:58.590

您将一个`<textarea>`用于多条记录，您必须使用单独`textarea`的 s 才能单独修改和更新它们。

您的`intrebari`表中必须有一个唯一的 ID 字段，我们将其命名`id`，我们将使用它来解决您的问题：

```
<?php

$l = mysql_query("select * from intrebari where cod_chestionar='".$_SESSION['cod']."'");

echo "<form method='POST' action='lalalalal.php'>";

while($p = mysql_fetch_array($l)){
    echo "<textarea  name='edit[".$p['id']."]' cols='50'>"; // Using `id` field here to make array of textareas
    echo $p[denumire_intrebare];
    echo "</textarea>";
}

echo "<input type='submit' value='Finished' name='save_edit'/>";
echo "</form>";

?> 
```

和更新：

```
<?php

$a = $_POST['edit'];

foreach($a AS $id => $b){
    $b = mysql_real_escape_string($b);
    $id = mysql_real_escape_string($id);

    $sql = mysql_query("UPDATE intrebari set denumire_intrebare='$b' WHERE id='".$id."'"); // Using id field again
}

?> 
```

# plugins - 如何在 TYPO3 中禁用扩展

> ID：12492852
> 
> 赞同：1
> 
> 时间：2012-09-19T10:26:25.373
> 
> 标签：plugins, typo3

因为我想尝试另一个扩展，所以我会有两个相互冲突的扩展。因此我想暂时禁用扩展。如果我发现我需要再次使用旧扩展，我想启用它。

有没有办法做到这一点？

我认为`Remove Extension`会完全删除扩展名。我应该编辑`localconf.php`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T10:36:43.420

用于`Extension Manager`此，它**不会**删除文件和数据库，只会修改`localconf.php`禁用扩展名。测试后，您可以以同样的方式安全地打开它。

测试时尽量避免`Database Compare`安装工具中的任何操作，因为您可能会意外删除该禁用扩展的表。

# javascript - 文本区域的下划线文本

> ID：12492856
> 
> 赞同：6
> 
> 时间：2012-09-19T10:26:34.687
> 
> 标签：javascript, jquery, html

我想为`<textarea>`元素的某些文本片段添加彩色的摆动下划线。效果类似于拼写检查器。

**我怎么能用javascript做到这一点，可能在jquery的帮助下？**

我对 html 标记的唯一控制是通过 javascript。我的第一个想法是为这些文本片段添加样式，但据我所知，只能设置整个 textarea 元素的样式，而不是单个文本片段。

我知道我想要实现的目标是可能的，因为有[商业软件](http://www.javascriptspellcheck.com/JavaScript_SpellCheck_Hello_World)可以达到类似的效果，但我仍在试图找出其中涉及的技巧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T10:41:04.453

我认为这在 textarea 中是不可能的，大多数 WYSIWYG 在线编辑器使用 contenteditable div 或 iframe，使其看起来像 textarea 以设置这些元素的 innerHTML 中的文本样式，因此显示在前端，然后您可以获得 textContent或 div/iframe 的 innerText。使用 jQuery，您可以执行以下操作：

```
 <div contenteditable='true' id='editor'>this is the wrd</div>

$('#editor').html($('#editor').html().replace("wrd", "<span style='color: red;'>wrd</span>")); 
```

根本没有经过测试，但应该正确设置 div 的样式。然后您可以使用 $('#editor').text() 来检索文本值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T10:42:41.777

使用的方法是隐藏 textarea 并创建一个可编辑的 div（将属性添加`contenteditable="true"`到 div。我不太确定浏览器兼容性）。每次按键时，javascript 都会抓取所有内容，定位拼写错误的单词并在有问题的单词周围放置一个跨度。他们使用 css 在单词下方添加了红色波浪线（一小段红色波浪线的图像）

考虑一下，他们需要跟踪 div 中光标的位置，以防用户开始在框的中间输入文本，以便在更改内容后脚本将光标返回到正确的位置而不是在内容块的末尾。

此外，您需要在每次按键时更新 textarea 的值。

[编辑]

这是一个 jsFiddle 的概念证明：http: [//jsfiddle.net/tEnY8/](http://jsfiddle.net/tEnY8/)

最重要的是，当您在框中键入时，该值将被放入 textarea 并且任何不正确的单词都带有下划线并变为红色。目前它只将最后一个单词标记为不正确。您需要注释掉该行，取消注释 for 循环并实现该`isMispelled(String)`功能。

[编辑]

这是进一步的概念证明：http: [//jsfiddle.net/tEnY8/4/](http://jsfiddle.net/tEnY8/4/)

基本上我已经设置了一个正确拼写的单词数组，然后循环检查该单词是否存在于数组中；如果没有，那么这个词可能拼写错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T10:39:02.763

正如您所说，实际上不可能只编辑文本区域的一行的字体或属性。

相反，您链接到的网站正在做什么，它使用可编辑的 DIV，并通过 Javascript 和一些巧妙的 CSS 将其链接到隐藏的文本区域（文本区域本身是**display:none**和**visibility:hidden;**）

我建议使用萤火虫来看看他们是如何做到的，因为它非常令人印象深刻。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-19T10:39:25.567

他们所做的是拥有一个`<div>`用于进行所有样式设置的元素，它看起来就像一个文本区域。

这篇文章可能会帮助您按照这些思路做一些事情：[https ://stackoverflow.com/a/3536762/349012](https://stackoverflow.com/a/3536762/349012)

# javascript - 修改后的 DOM 中的表格单元格未触发 Jquery 事件

> ID：12492860
> 
> 赞同：0
> 
> 时间：2012-09-19T10:26:51.980
> 
> 标签：javascript, jquery, dom

我有一个简单的 Jquery 脚本，它填充了一个包含大量行和单元格的空表。

根据复选框的状态，我想为新填充的表格中的所有单元格切换一个 CSS 类（页面加载时不存在，但在表单提交时由 JS 函数动态创建）。

我可以在表格单元格上设置一个“点击”事件，它工作正常。

但是我尝试使用`on()`将函数绑定到`hover()`事件并没有成功。该事件似乎永远不会被触发，也不会产生控制台日志消息。关于我做错了什么的任何想法？

```
$("#resultTable").click(function(e){  // This function works fine.
        $(e.target).closest('td').toggleClass('stay');
    });

$("#resultTable td").on("hover", //Same problem for a simpler 'mouseover'
    function(event){
        console.log("MOUSE OVER"); //Never appears
        $(this).toggleClass('over');
    },
    function(event){
        console.log("MOUSE OUT"); //Never appears
        $(this).toggleClass('over');
    }
    ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:36:01.330

如果您将行动态插入到表中，那么`.on`如果它绑定到绑定发生后出现的 tds，则将无法工作。来自文档当调用到`.on`时，绑定事件的元素必须在绑定发生时存在于 DOM 中。

事件处理程序仅绑定到当前选定的元素；当您的代码调用 .on() 时，它们必须存在于页面上。

这可能有效

```
$j(document).on("hover", "#resultTable td",
    function(event){
        console.log("MOUSE OVER"); //Never appears
        $(this).toggleClass('over');
    },
    function(event){
        console.log("MOUSE OUT"); //Never appears
        $(this).toggleClass('over');
    }
    ); 
```

如果您只是动态添加行，那么您可以将事件附加到`#resultTable`以使委托更快一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:36:08.980

尝试`delegate`..不确定支持的版本`on`

```
$("#resultTable").delegate("td","mouseover", function(event){
        console.log("MOUSE OVER"); //Never appears
        $(this).addClass('over');
    });

$("#resultTable").delegate("td","mouseout",function(event){
        console.log("MOUSE OUT"); //Never appears
        $(this).removeClass('over');
    }); 
```

# php - CakePHP Auth $this->Auth->allow('display')

> ID：12492862
> 
> 赞同：3
> 
> 时间：2012-09-19T10:26:58.023
> 
> 标签：php, cakephp, authentication

我在我的应用程序中向未经身份验证的用户显示静态页面时遇到问题。

我正在使用 cake 2.1，我的 AppController.php 是这样的：

```
App::uses('Controller','Controller');

class AppController extends Controller {
    public $components = array(
        'Session',
        'Auth' => array(
            'loginRedirect' => array('controller' => 'users', 'action' => 'index'),
            'logoutRedirect' => array('controller' => 'users', 'action' => 'login')
        )
    );

    public function beforeFilter() {
        $this->Auth->allow('display');
    }
} 
```

请帮我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:34:27.850

您很接近，但该`display`操作不是`AppController`. 它属于`PagesController`相反。

尝试将此逻辑添加到`PagesController`位于`app/Controllers/PagesController.php`. 这应该够了吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-04T01:55:49.147

You need to do this in PagesController

```
public function beforeFilter() {
        parent::beforeFilter();
        $this->Auth->allow('display');
} 
```

At least it worked for me. Hope it helps someone else.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-06T00:22:18.403

应用控制器.php

```
class AppController extends Controller {

...
  public function beforeFilter() {
    $this->Auth->allow('index', 'view');
    $this->set('loggedUser', $this->Auth->user());

    $this->loadModel('Evento');
    $this->set('eventos', $this->Evento->find('all'));
  }

} 
```

PagesController.php

```
class PagesController extends AppController {

public function beforeFilter() {
    parent::beforeFilter();
    // Allow users to register and logout.
    $this->Auth->allow('display');
}
 ... 
```

# facebook - 从 Facebook API 获取 UID 和 KEY

> ID：12492863
> 
> 赞同：2
> 
> 时间：2012-09-19T10:27:13.133
> 
> 标签：facebook, facebook-graph-api

目前正在尝试理论化然后编写一个网络应用程序，该应用程序将利用 Facebook API 让用户登录。从这里我想获得对 uid 和密钥的访问权限，以便我可以填充以下链接：

```
http://www.facebook.com/ical/b.php?uid=xxxxxxx&key=xxxxxxx 
```

这给了我该用户朋友全年生日的 Icalendar 文件。然后希望将其编写成更好的格式，例如 CSV 并放入数据库中。

这就是我可以创建所有朋友生日的导入并从这里设置一个过程。

我只是想知道我是否可以使用登录到 Facebook 按钮来检索参数以填充我的链接？这是可能的还是有更好的方法来获得这些属性？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:54:30.067

[在对用户进行身份验证](https://developers.facebook.com/docs/authentication)并进行此[Graph API 调用](https://developers.facebook.com/tools/explorer/145634995501895/?method=GET&path=me%2Ffriends%3Ffields%3Dname%2Cbirthday)`friends_birthday`时请求权限要容易得多

```
https://graph.facebook.com/me/friends?fields=name,birthday 
```

您将获得一个 json 对象，其中包含您每个朋友的 uid、姓名和生日（如果他们已填充/公开该字段）。

# ios - ios Facebook 登录：com.facebook.sdk:ErrorLoginFailedReason = invalid_client

> ID：12492865
> 
> 赞同：7
> 
> 时间：2012-09-19T10:27:19.230
> 
> 标签：ios, facebook, login, client

很长一段时间以来，我一直在使用我的 ios 应用程序测试我的 FB 应用程序，只使用沙盒应用程序和我的管理员帐户；它工作得很好。

现在，我在我的 FB 应用程序中禁用了沙盒模式，让我的一些 FB 朋友测试该应用程序。

每当他们尝试从 iPhone 应用程序连接时，他们都会得到以下显示：

“myApp 为 Facebook 登录配置错误”

错误是：com.facebook.sdk:ErrorLoginFailedReason = invalid_client (error 2)

在任何地方都找不到有关它的任何信息。

另外（不知道这是否重要），我不在我的 iPhone 上使用 Facebook 原生应用程序（所以我通过 Safari 登录），而我的朋友使用（并从 Facebook 原生应用程序得到错误）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T12:43:15.013

正如布鲁斯在评论中回答了自己的问题一样，我会提供一个真实的答案。

Facebook 应用程序包 ID 必须与 iOS 应用程序包 ID 完全相同。如果您最近更改了捆绑 ID，或事件您的目标名称（默认情况下`product name`设置为`$(TARGET_NAME)`和`bundle ID`to `${PRODUCT_NAME}`），这可能是您的问题的原因。
请注意，因为捆绑包 ID 区分大小写！

最后，它也可以是 Facebook 应用程序配置`namespace`字段。我的客户确实用应用程序名称填写了它，这就是错误。让它空着解决了我的问题。

# c# - 绑定到属性

> ID：12492867
> 
> 赞同：10
> 
> 时间：2012-09-19T10:27:28.983
> 
> 标签：c#, wpf, xaml, data-binding

我有一堂课

```
public class Car 
{
    [Description("name of the car")]
    public string Name { get; set; }

    [Description("age of the car")]
    public int Age { get; set; }
} 
```

是否有可能将描述属性绑定到标签内容。我正在寻找的解决方案不需要实例化 Car 对象。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T10:31:54.003

它不会是一个正确的绑定（这对于静态数据来说不是必需的），但您可以轻松地创建一个[`MarkupExtension`](http://msdn.microsoft.com/en-us/library/system.windows.markup.markupextension.aspx)来检索它，只需传递类型和属性名称并通过反射获取它。

大纲将类似于：

```
public Type Type { get; set; }
public string PropertyName { get; set; }

ProvideValue: Type.GetProperty(PropertyName)
                  .GetCustomAttributes(true)
                  .OfType<DescriptionAttribute>()
                  .First()
                  .Description 
```

```
<!-- Usage example -->
Text="{me:Description Type=local:Car, PropertyName=Name}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T10:32:44.503

1 你创建一个`Converter`

```
public sealed class PropertyDescriptionConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            if (value == null)
                return Binding.DoNothing;

            string propertyName = parameter as string;
            if (String.IsNullOrEmpty(propertyName))
                return new ArgumentNullException("parameter").ToString();

            Type type = value.GetType();

            PropertyInfo property = type.GetProperty(propertyName, BindingFlags.Public | BindingFlags.Instance);
            if (property == null)
                return new ArgumentOutOfRangeException("parameter", parameter,
                    "Property \"" + propertyName + "\" not found in type \"" + type.Name + "\".").ToString();

            if (!property.IsDefined(typeof(DescriptionAttribute), true))
                return new ArgumentOutOfRangeException("parameter", parameter,
                    "Property \"" + propertyName + "\" of type \"" + type.Name + "\"" +
                    " has no associated Description attribute.").ToString();

            return ((DescriptionAttribute)property.GetCustomAttributes(typeof(DescriptionAttribute), true)[0]).Description;
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotSupportedException();
        }
    } 
```

2 你插入你的资源

```
 <Window.Resources>
        <local:PropertyDescriptionConverter x:Key="PropertyDescriptionConverter" />
    </Window.Resources> 
```

3 添加此绑定

```
"{Binding ConverterParameter=Name, Converter={StaticResource PropertyDescriptionConverter}}" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T10:30:07.113

你不能，因为它是属性的元数据。您可以通过创建自定义绑定类来解决问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-17T08:50:04.630

而不是字符串文字使用字符串常量来设置属性参数：

```
public class Car
{
    public const string CarNamePropertyDescription = "name of the car";

    [Description(CarNamePropertyDescription)]
    public string Name { get; set; }
} 
```

可以通过`{x:Static}`扩展从 xaml 访问常量（不需要绑定，因为属性不会在运行时更改）：

```
<Label Content="{x:Static namespace:Car.CarNamePropertyDescription}"/> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T10:33:16.270

那么接下来创建一个reader类，读取类的属性并绑定reader类的属性。例如

```
public class Reader
{
   public Dictionary<string, string> Description {get; set;}
}
```

# sql - 如果行有关系，如何插入 BIT 值

> ID：12492868
> 
> 赞同：3
> 
> 时间：2012-09-19T10:27:29.057
> 
> 标签：sql, tsql, insert, sql-server-2008-r2

我有 3 个表 BusStop、BusRoute 和 Stop_Route（用于 M-2-M 关系）。有些站点没有关系（路线），我需要用 Bit 值 1 或 0 更新 BusStop 表中的每条记录，具体取决于它是否具有关系。我有一个查询来选择所有没有关系的站点：

```
SELECT
    BusStop.StopId 
FROM
    BusStop
    LEFT OUTER JOIN BusStop_BusRoute 
    ON BusStop.StopId = BusStop_BusRoute.StopId
WHERE 
    BusStop_BusRoute.StopId IS NULL 
```

但我不清楚如何根据此结果添加值。我已经阅读了 CURSOR 和 CASE WHEN 语句，但我仍然不知道如何在我的案例中应用它们。有一个 Bit 的 StopStatus 列类型，我需要在其中插入该值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T10:33:32.927

```
UPDATE BusStop
SET StopStatus = 
    CASE 
        WHEN BusStop_BusRoute.StopID IS NULL THEN 0 
        ELSE 1 
    END
FROM 
    BusStop
    LEFT JOIN BusStop_BusRoute 
    ON BusStop.StopId = BusStop_BusRoute.StopId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:39:31.357

你可以做类似的事情

```
UPDATE BusStop SET BitValue = 0 WHERE StopID in 
(
--your query
SELECT
    BusStop.StopId 
FROM
    BusStop
    LEFT OUTER JOIN BusStop_BusRoute 
    ON BusStop.StopId = BusStop_BusRoute.StopId
WHERE 
    BusStop_BusRoute.StopId IS NULL
) 
```

这是（我认为）与您的相似的完整代码。一张桌子。当 i 为 1 时，最后一个查询将位设置为 1。

```
create table aaa(id int identity, i int, j int, b bit)

insert into aaa values(1, 0, 0), (0, 0, 0), (0, 1, 0), (0, 0, 0)

select * from aaa

update aaa set b = 1 where id in (
select id from aaa where i = 1) 
```

# ms-access - Windows Server 2008、IIS7.5 和与 MS Access 97 数据库的连接

> ID：12492872
> 
> 赞同：1
> 
> 时间：2012-09-19T10:27:39.167
> 
> 标签：ms-access, asp-classic, windows-server-2008, iis-7.5, ado

我知道，这个话题听起来很糟糕。但我实际上必须连接这些技术。

## 问题

我目前正在将公司的 Intranet（主要用经典 ASP 编写）从带有 IIS 6 的 Windows Server 2003 32 位迁移到带有 IIS 7.5 的 Windows Server 2008 R2 64 位。除了一个`set conn = server.createobject("adodb.connection")`用于连接到`connstring="DRIVER={Microsoft Access Driver (*.mdb)}; DBQ=path\to\mdb\which\is\really\there"`.

我打开连接（`conn.open connstring`），建立一个查询字符串，然后，当我想`set rsresult = conn.execute(sqlusr)`我得到

```
Microsoft OLE DB Provider for ODBC Drivers error '80004005' 
[Microsoft][ODBC Microsoft Access Driver] ODBC--connection to 'TABLE_THAT_ACTUALLY_EXISTS' failed. 
```

该错误在`conn.execute(sqlusr)`. 当然，它在以前的环境中运行良好。

## 我尝试了什么？

*   [连接到 Windows Server 2008 上的 MS Access accdb 文件](https://stackoverflow.com/questions/5068254/connect-to-ms-access-accdb-file-on-windows-server-2008)- 我了解到 Windows Server 2008 预装了 MSJet，所以这个问题没有用（提醒：mdb 适用于 Access 97）
*   [http://support.microsoft.com/kb/168336](http://support.microsoft.com/kb/168336) - 这实际上是建立连接的方式，但我认为这可能是错误的，拼写错误，......
*   我将 ODBC 数据源从以前的服务器复制到新服务器（我保留了名称） - 问题仍然存在
*   我在 Windows Server 2008 机器上安装了最新更新

## 附加信息

*   `mdb`**只会**在 Access 97 中打开（为什么？不要问我：/我不是唯一一个试图在 Access 2000/2003/2007/2010 中打开它的人 - 它无处可去）
*   IIS 7.5 上此网页的应用程序池已将`Enable 32-bit Applications`选项设置为**true**。还启用了父路径。

我将不胜感激有关检查/做什么/如何解决此问题的任何其他提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:25:49.683

好的，这是一个有趣的问题。

*首先- 使用 Classic ASP - IIS 7.x -* **ADODB.JET.4.0**存在记录问题， 您可以查看解决问题的指南

[在 IIS 上将经典 ASP 与 Microsoft Access 数据库结合使用](http://www.iis.net/learn/application-frameworks/running-classic-asp-applications-on-iis-7-and-iis-8/using-classic-asp-with-microsoft-access-databases-on-iis)

*其次*- 我强烈建议您不再使用**JET DRIVER**，而是使用**ADODB.ACE.12.0**驱动程序，虽然您可以获得与 JET 驱动程序相同的功能，但您还可以获得新的 Access 文件的优势可以读取格式并且可以在纯 64 位环境中实现驱动程序

[ACEDB 驱动程序下载（微软）](http://www.microsoft.com/en-us/download/details.aspx?id=13255)

使用此驱动程序，您可以将其设置`Enable 32-bit Applications`为**false**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T14:30:57.640

好的，我解决了我的问题。我能够非常轻松地将数据和表单从 Access 97 导入到 Access 2010。然后我遇到了一些asp及其与mdb的连接问题。所以我直接连接到数据库。我仍然必须修复sql语句，但主要问题已解决。

谢谢！

# asp.net - ASP.NET XML Web 服务返回错误数据

> ID：12492873
> 
> 赞同：0
> 
> 时间：2012-09-19T10:27:38.700
> 
> 标签：asp.net, xml, iis, service, web

我有一个托管在 IIS 6 上的 XML Web 服务，并且由 asp.net 框架 4 编写

有时它返回错误的数据，我应该重新启动 iis 来解决这个问题

例如 ：

它应该返回这样的东西（正确）：

```
 <?xml version="1.0" encoding="utf-8" ?> 
- <DataTable xmlns="http://tempuri.org/">
- <xs:schema id="NewDataSet" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
- <xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:MainDataTable="Food" msdata:UseCurrentLocale="true">
- <xs:complexType>
- <xs:choice minOccurs="0" maxOccurs="unbounded">
- <xs:element name="Food">
- <xs:complexType>
- <xs:sequence>
  <xs:element name="ID" type="xs:int" minOccurs="0" /> 
  <xs:element name="STATUS" type="xs:int" minOccurs="0" /> 
  <xs:element name="CODE" type="xs:int" minOccurs="0" /> 
  <xs:element name="TITLE" type="xs:string" minOccurs="0" /> 
  <xs:element name="FULL_NAME" type="xs:string" minOccurs="0" /> 
  <xs:element name="TYPE" type="xs:int" minOccurs="0" /> 
  <xs:element name="UNIT" type="xs:int" minOccurs="0" /> 
  <xs:element name="PRICE" type="xs:int" minOccurs="0" /> 
  <xs:element name="BREAKFAST" type="xs:boolean" minOccurs="0" /> 
  <xs:element name="LUNCH" type="xs:boolean" minOccurs="0" /> 
  <xs:element name="DINNER" type="xs:boolean" minOccurs="0" /> 
  <xs:element name="MINIBAR" type="xs:boolean" minOccurs="0" /> 
  <xs:element name="TERIA" type="xs:boolean" minOccurs="0" /> 
  <xs:element name="DESSERT" type="xs:boolean" minOccurs="0" /> 
  <xs:element name="MAIN_FOOD" type="xs:boolean" minOccurs="0" /> 
  <xs:element name="DESSERT1" type="xs:boolean" minOccurs="0" /> 
  <xs:element name="DRINK" type="xs:boolean" minOccurs="0" /> 
  <xs:element name="MISC" type="xs:boolean" minOccurs="0" /> 
  <xs:element name="PRE_FOOD" type="xs:boolean" minOccurs="0" /> 
  <xs:element name="UNIT_NAME" type="xs:string" minOccurs="0" /> 
  </xs:sequence>
  </xs:complexType>
  </xs:element>
  </xs:choice>
  </xs:complexType>
  </xs:element>
  </xs:schema> 
```

但有时它会返回这个（错误答案）：

```
 <?xml version="1.0" encoding="utf-8" ?> 
- <DataTable xmlns="http://tempuri.org/">
- <xs:schema id="NewDataSet" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
- <xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:MainDataTable="Food" msdata:UseCurrentLocale="true">
- <xs:complexType>
- <xs:choice minOccurs="0" maxOccurs="unbounded">
- <xs:element name="Food">
  <xs:complexType /> 
  </xs:element>
  </xs:choice>
  </xs:complexType>
  </xs:element>
  </xs:schema>
  <diffgr:diffgram xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1" /> 
  </DataTable> 
```

我应该怎么办？

# php - 在 Wordpress 主题中使用两个菜单

> ID：12492877
> 
> 赞同：1
> 
> 时间：2012-09-19T10:28:01.830
> 
> 标签：php, wordpress, menu

我正在尝试使用两个菜单创建一个 Wordpress 主题。

在functions.php中我注册了菜单：

```
register_nav_menu('main', 'Main navigation menu');

register_nav_menu('topmenu', 'Top navigation menu'); 
```

在我的主题标题中，我称它们为：

```
<?php wp_nav_menu( array('menu' => 'main' ) ); ?>

<?php wp_nav_menu( array('menu' =>  'topmenu' ) ); ?> 
```

但是，“主”菜单显示在两个位置。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:35:31.977

您需要登录 WordPress 仪表板。单击左侧的菜单。

您可以在那里看到主题位置选项。在那里设置菜单。

[**阅读此法典部分**](http://codex.wordpress.org/Appearance_Menus_SubPanel)

# apache - Tomcat (win7) 缺少 JRE_HOME 变量

> ID：12492878
> 
> 赞同：11
> 
> 时间：2012-09-19T10:28:06.717
> 
> 标签：apache, tomcat, environment-variables, java, windows-7-x64

我像两周前一样安装了 tomcat 和 Apache http-servers。我让它运行起来，并且能够从另一台计算机上运行 JSP 页面。我有一点停顿，现在我正在尝试运行它不起作用的系统。我可以在

```
 http://[my-IP-address]:8080 
```

但无法访问 jsp 文件夹的页面，甚至无法访问 .html 文件。它给了我

```
 503 service temporarily unavailable. 
```

甚至本地主机似乎都不起作用。我不记得是否需要启动 Tomcat 服务器或者 mod_jk.so 是否会自动处理它。当我尝试使用 startup.bat 启动 tomcat 时，它给了我消息

```
 JRE_HOME environment variable is not defined correctly 
```

我已经从系统属性中设置了环境变量，我可以毫无问题地编译/运行 .java 文件。

```
 JAVA_HOME C:\Program Files (x86)\Java\jdk1.6.0_16

 JRE_HOME C:\Program Files (x86)\Java\jre6 
```

那么这里发生了什么？我安装了Visual Studio，但除此之外我想不出tomcat突然不能工作的任何原因。这是非常令人沮丧的，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-04-29T08:05:10.407

像这样配置路径

![在此处输入图像描述](../Images/2e381fdb63a0285513740d01e273bc68.png)

您可以通过键入来检查路径的有效性

回显 %JAVA_HOME%

回声 %JRE_HOME%

![在此处输入图像描述](../Images/53e716612e69e56f21510e326a26ec5a.png)

然后一切都会像魅力一样发挥作用

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-20T01:52:50.303

不需要同时设置*JDK_HOME*和**JRE_HOME**环境**变量**，因为 JRE_HOME 将默认为 JDK_HOME 的值。

在许多 Tomcat 安装中，根本不使用这些环境变量，而是在可选的**setenv.bat**脚本中设置。您可以在 Tomcat 安装的顶级目录中的**RUNNING.txt**文件的第 3 部分中找到所有这些记录，并且可以在此处找到副本[http://tomcat.apache.org/tomcat-7.0-doc/RUNNING.txt](http://tomcat.apache.org/tomcat-7.0-doc/RUNNING.txt)

如果您收到“未正确定义环境变量”错误消息，您将需要检查您的**setenv.bat**文件（如果有）以及实际的环境变量。通过检查**setclasspath.bat**，您可以看到它需要在这些目录中查看哪些文件。对于 JRE，它希望同时找到`%JRE_HOME%\bin\java.exe`和`%JRE_HOME%\bin\javaw.exe`

根据我的经验，当 JRE 或 JDK 随后被删除或卸载时会发生此错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-24T18:44:02.983

如果您尚未安装 SDK，请提供 JRE 路径并注销并登录 - 这应该可以

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-16T12:25:18.723

我最近遇到了这个问题，不管我检查了多少次..该变量是在 Windows 高级系统属性中设置的。

我发现如果没有设置 JRE_HOME 变量，系统将默认使用 JRE，它是 JAVA_HOME 目录中 JDK 的一部分。如果您遇到此问题，但无法解决。请尝试删除 JRE_HOME 变量。

这为我解决了这个问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-07-20T04:38:26.540

我遇到了同样的问题，我通过将 Intellij 中的 tomcat 配置从其默认值更改为我自己的 jre 文件夹来解决它，如下图所示： [![在此处输入图像描述](../Images/2a5c5bbb8b93520c3509901db255e594.png)](https://i.stack.imgur.com/aY3Q7.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-21T09:04:21.433

所以，我安装了 Apache Tomcat/7.0.30，现在启动运行完美。没有更多的 503 错误，我可以从其他机器上运行 JSP 内容。

问题解决了，但谜团依然存在。看来jdk与问题无关。我的tomcat是不是老死了？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-06T18:05:00.393

windows 7\. tomcat 8 我遇到了同样的问题。我收到了 ire_environment 错误。我应用了 HimalayanCoder 的解决方案。令我惊讶的是，echo 没有看到 java_home 或 ire_home。我检查了环境中的路径和设置，两者都是正确的。我重新启动了我的机器 5 次，java_home 的回声工作，但 ire_home 仍然没有显示。tomcat 仍然无法工作，我仍然收到 jre_home 错误。我不断重启机器，在另外 5 次重启后，jre_home 路径通过了。我的tomcat现在可以工作了。

感谢 HimalayanCoder。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-18T02:26:03.767

我刚刚通过删除 JRE_HOME 变量解决了这个问题。正如它所说的“JRE_HOME 变量未设置为此路径（Apache\bin）。”

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-09-26T14:34:15.083

Path 有一些其他版本的java，比如JDK1.6。请删除路径中不需要的版本，然后启动 Tomcat 7。

在尝试了所有可能的答案后，我检查了我的路径，然后从路径中删除了 Java1.6，然后启动了 tomcat。它对我有用。

# php - 在angularjs控制器的函数中调用函数

> ID：12492880
> 
> 赞同：3
> 
> 时间：2012-09-19T10:28:15.470
> 
> 标签：php, function, angularjs

我希望在 angularjs 的另一个函数中调用一个函数。例如。我有一个从数据库中获取记录的函数，现在每次调用任何函数时我都需要从数据库中获取。控制器：-

```
function SearchCtrl($scope, $http, $element) {

        // i wish to put this into a function and call it in every function like add,search,etc.
        $http.get('php/products.php').success(function(data){
            $scope.products = data;
        });

        $scope.search = function() {
            var elem = angular.element($element);
            var dt = $(elem).serialize();
            dt = dt+"&action=index";
            //alert(dt);
            console.log($(elem).serialize());
            $http({
                method: 'POST',
                url: 'php/products.php',
                data: dt,
                headers: {'Content-Type': 'application/x-www-form-urlencoded'}
            }).success(function(data, status) {
                console.log(data);
                $scope.products = data; // Show result from server in our <pre></pre> element
            }).error(function(data, status) {
                $scope.data = data || "Request failed";
                $scope.status = status;
            });
        };

        //~ add
        $scope.add = function() {
            var elem = angular.element($element);
            var dt = $(elem).serialize();
            dt = dt+"&action=add";
            //alert(dt);
            console.log($(elem).serialize());
            $http({
                method: 'POST',
                url: 'php/products.php',
                data: dt,
                headers: {'Content-Type': 'application/x-www-form-urlencoded'}
            }).success(function(data, status) {
                $scope.search(); //i wish to call the function like this instead of replicating the code as below each time
                //~ $http.get('php/products.php').success(function(data){
                //~ $scope.products = data;
            }); // Show result from server in our <pre></pre> element
            }).error(function(data, status) {
                $scope.data = data || "Request failed";
                $scope.status = status;
            });
        }; 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T18:18:41.640

如果我正确阅读了您的问题，您可以输入以下代码：

```
// i wish to put this into a function and call it in every function like add,search,etc.
$http.get('php/products.php').success(function (data) {
    $scope.products = data;
}); 
```

在您的控制器中进入这样的功能：

```
var getProducts = function () {
    $http.get('php/products.php').success(function (data) {
        $scope.products = data;
    });
}; 
```

并在同一个控制器中的任何地方调用它：

`getProducts();`

# git - “反向合并”一个分支

> ID：12492881
> 
> 赞同：3
> 
> 时间：2012-09-19T10:28:24.133
> 
> 标签：git, merge, branch

假设我有一个分支 case-xyz，我在其中为案例 #xyz 工作，“实现 Hello World”。

在开发过程中，我添加了调试输出等，这不应该是最终提交的一部分。

我可以执行以下操作：

*   分支到 case-xyz-debug 并仅在此处提交调试代码。
*   偶尔将 case-xyz-debug 合并到 case-xyz 中。
*   在 case-xyz 中提交应该进入最终补丁的内容。
*   最后，“反向合并”case-xyz-debug，即删除来自该分支的所有更改，独立于它们何时合并到case-xyz。换句话说，这应该相当于从 case-xyz-debug 还原所有合并。

我知道在revert一个merge commit的时候，Git并没有忘记merge，即它仍然认为你已经合并了，所以只能通过revert的revert来重新merge。因此，只需删除最初在 case-xyz-debug 中提交的所有更改，如何记录是无关紧要的。但是，如果我也可以执行以下操作，那就太好了：

*   git checkout case-xyz
*   git checkout case-xyz-done
*   git "反向合并" case-xyz-debug

因为我可能想继续开发/调试：

*   git checkout case-xyz
*   更改文件
*   git commit -am “哎呀，忘记了什么”
*   git checkout case-xyz-really-done
*   git "反向合并" case-xyz-debug

我希望我的意图很明确。如果这可以实现，但以完全不同的方式，我也会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T20:23:30.380

作为我正常工作流程的一部分，我通过交互式变基定期做这种事情。我的提交包括调试日志记录、临时测试更改（fe 线程睡眠调用以测试计时问题、故意抛出异常以测试错误处理代码）、硬编码值以使在我的应用程序中更容易进行端到端测试而无需在 UI 中输入值等。我将这些东西放在单独的提交中；按照我自己的约定，如果提交日志消息全部大写，则表示不应将提交推送到远程。

当我准备好“反向合并”这些更改（删除它们）时，我通过交互式 rebase 这样做：

```
git rebase -i <id of branch point> 
```

我只是删除了所有大写消息的提交。

（您实际上可以将其用于其他目的，例如重新排序它们以使它们都位于分支的开头，这对于`git commit --amend`您的实际工作很有用，或者将它们重新排序到最后，这在您想要推`branch-point..<id of last real commit>`送到远程，让你的“调试”提交完整并在当前历史行的末尾。）

知道是什么`<id of branch point>`可能有点痛苦；在我的工作流程中，我不想`master`在删除调试提交的同时将我的分支重新定位到 fe 的末尾；出于这个原因，我保留了一个本地浮动标签，我将其用作我简单调用的参考点`rebase`（这可能会令人困惑，但您可以选择任何您喜欢的名称）。如果这看起来工作量太大，那么使用`git rebase -i `git merge-base HEAD master``可能是您的一个选择。

（我理解认为这是一种危险做法的论点，但我认为它们并不是特别有说服力；有上百万种方法可以用 SCM 击中自己的脚。你应该考虑将`git rebase --abort`和结合起来`git reflog`成为你的“逃生舱口”，以防您不小心删除了包含比调试代码更多的提交。）

高温高压

# php - 如何从服务器发送不同的页面

> ID：12492888
> 
> 赞同：-4
> 
> 时间：2012-09-19T10:28:41.497
> 
> 标签：php, apache

我注意到在 Stackoverflow 中，基本上有 4-6 种不同的 URL。一种是针对问题，例如`http://stackoverflow.com/questions/6831217/double-vs-decimal-in-mysql`. 一种是用于用户个人资料页面，例如`http://stackoverflow.com/users/1469954/cupidvogel`. 一个是针对新问题，例如`http://stackoverflow.com/questions/ask`等。

对于每个页面请求，服务器都会根据需要发送一个页面。现在我如何在服务器端实现这一点？如果有一个包罗万象的 PHP 脚本，它将解析 URL 以记录客户端请求的页面类型（例如，如果它解析 URL 并发现客户端正在请求主题页面，它可能会提取来自 URL 的问题 id/文本，查询数据库以获取相关数据，构建 HTML 并发送它）并相应地发送，或者每种页面类型应该有单独的脚本？对于任何一个，我该如何为此配置 PHP/Apache？

如果我有一个类似**foo.php**的页面，我可以通过它看到它`http://localhost/foo.php`。但是，如果我希望它捕获`http://localhost/foo.php`以及`http://localhost/foo.php/ask/questions`等，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:28:14.297

见[mod_rewrite](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)。这可以使用重写规则来完成，该规则可以放在 .htaccess 文件或其他 Apache conf 文件中。举个例子：

`RewriteRule users/(\d+)/(\w+) user.php?id=$1&uname=$2`

这会将 users/1469954/cupidvogel 转换为 user.php?id=1469954&uname=cupidvogel。如果我知道一个好的教程（编辑：[这个](http://www.workingwith.me.uk/articles/scripting/mod_rewrite)看起来不错），我会向你指出一个教程。

# javafx - TableView 上下滚动时，字段中的 TableView 数据会发生变化。

> ID：12492889
> 
> 赞同：1
> 
> 时间：2012-09-19T10:28:45.000
> 
> 标签：javafx, javafx-2

我的表视图中的一个字段出现问题，我需要动态显示另一个表中的值。下面是我用来更新表格视图单元格的代码。该表使用与提供给它们的值不同的值进行更新。

```
 final int k = 0;  
value.setCellValueFactory(new Callback<CellDataFeatures<ObservableList, String>, ObservableValue<String>>() {
    int noOfDataCells = k;
    public ObservableValue<String> call(CellDataFeatures<ObservableList, String> param) 
    {                    

        TableColumn column = param.getTableColumn();
        int size = 0;
        if(tableView1.getItems()!=null)
            size = ((ObservableList) tableView1.getItems().get(0)).size();
        String valueFromData = "";
        if(noOfDataCells<size)
        {
            valueFromData = String.valueOf(((ObservableList) tableView1.getItems().get(0)).get(noOfDataCells));                                                               
        }
        else if(noOfDataCells == size)
        {
            noOfDataCells = 0;
            valueFromData = String.valueOf(((ObservableList) tableView1.getItems().get(0)).get(noOfDataCells));  
        }
        else if (noOfDataCells>size)
        {
            valueFromData = "";
        }
        noOfDataCells++;
        return new SimpleStringProperty(valueFromData);

    }
}); 
```

# version-control - 可以在实现功能/修复错误的同时修复代码格式吗？

> ID：12492893
> 
> 赞同：0
> 
> 时间：2012-09-19T10:28:52.173
> 
> 标签：version-control, open-source

当您分叉一个项目并对其进行工作时，是否可以在实现功能/修复错误的同时贡献代码格式修复？

这方面的例子包括：

*   文件中的混合制表符/空格，您只需更改一行
*   跨文件的不同缩进

**Pro 论点**：修复格式将提高整体代码质量。

**反对论点**：修复文件不相关部分的格式将使工具指向您作为代码的作者，之后从事同一工作的人可能会产生错误的印象，即您编写了它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T10:36:46.483

一个不错的比较工具可以设置为忽略空格，如果您已经完成了将大括号移动到新行之类的操作，这并不是说这会对您有所帮助。

如果我是你，我会提交两个更改：一个是实际错误修复，另一个是代码格式修复。

您应该记住，每个人的代码风格都略有不同，有些风格并不比其他风格更正确或更好。话虽如此，如果代码以非常糟糕的方式格式化，那么您应该修复它 - 正确格式化的代码可以帮助调试和代码审查。您将显示为更改的作者，但您不应该被误认为是模块本身的作者 - 任何半体面的源跟踪工具都应该显示谁在何时创作了什么。

## 编辑：

我在这里提倡的是，可以而且应该忽略编码风格的**微小变化——任何有足够经验的开发人员都应该能够阅读和理解代码。**团队应该有一个整体统一的编码方法，比如变量名的驼峰式大小写、方法名的正确大小写、成员变量的下划线等，但是像 LINQ 语句的格式这样的事情可以留给个人开发人员（除非它是真的不可读）。在与来自不同文化和背景的成员一起从事开源项目时，您一定会产生差异。使用像 ReSharper 这样的工具可以帮助消除其中的一些差异，但在一个公共项目中，并不是每个人都会拥有 ReSharper（或者甚至是一个半体面的 IDE，具体取决于正在开发的内容）。

一定要纠正丑陋的东西的格式，但不要为小东西出汗。开发人员是工程师、艺术家和人类的结合体——你会有所不同。成为一名出色的开发人员的一部分是了解您可以接受什么以及必须改变什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T11:22:24.350

成为一个成功的开发团队的基本规则是：“每个人都必须遵守一种风格，而且只有一种风格”。

不仅要修复格式，还要通知该代码的作者：如果每个人在编码风格方面都在同一页上，那么通过其他人编写的代码会事半功倍，并且让人们将其他人的代码保存为好。

# c++ - 提升截止时间计时器的替代方案

> ID：12492897
> 
> 赞同：0
> 
> 时间：2012-09-19T10:29:17.923
> 
> 标签：c++, linux, boost, timer

在我的应用程序中，一旦时间用完或某些异步操作完成（在时间用完之前），我需要运行该函数。

提升deadline_timer 可以满足我的需要，一旦定时器用完，它就会触发，当我取消它时。但是，在我的情况下，我不需要使用 io_service 和 timers 构造函数不会让我省略它。

我当然可以创建一个临时 io_service，但我认为它不明智。

有替代品吗？我应该用什么来实现我想要的？也许有一种方法可以在没有 ioservice 的情况下使用提升期限计时器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:39:04.137

你可以实现定时器轮（谷歌实现），非常准确和重量轻的定时器

# ios - iOS 在构建时出现链接器错误

> ID：12492898
> 
> 赞同：1
> 
> 时间：2012-09-19T10:29:42.457
> 
> 标签：ios

每当我尝试构建时，我都会收到此错误。

```
ld: 2 duplicate symbols for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我不知道该怎么做。它工作正常，我在一个类中添加了一个符号#define，然后它得到了那个错误。我尝试删除它无济于事。

是的，我已经看过大约 10 个答案的帖子，但似乎没有一个答案有帮助。

感谢您的帮助，如果您需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:40:25.190

我想到了。我犯了一个非常愚蠢的错误。我以某种方式在 `@implemention`我已经拥有的课程中添加了一个。我不知道我是怎么做到的。

# jquery - Aloha Editor - 获取突出显示的文本并替换为 html 代码

> ID：12492900
> 
> 赞同：1
> 
> 时间：2012-09-19T10:29:45.440
> 
> 标签：jquery, highlight, aloha-editor

我正在尝试在 Aloha 中设置一个自定义操作，添加一个按钮，将选定的文本包含在一个 span 类中。

示例：您选择了“示例词”

它会改变它

```
<span>example word</span> 
```

我的问题是目前我无法从 Aloha 中获取选定的文本，更不用说重新插入它了。

从文档中，这些行一直没有返回：

```
var range;
if ( Aloha.getSelection().rangeCount > 0 ) {
range = Aloha.getSelection().getRangeAt( 0 );
} 
```

完整代码：

```
 var redHighlight = "";
    Aloha.require(['ui/ui', 'ui/button'], function(Ui, Button) {
        var redButton = Ui.adopt("redButton", Button, {
            tooltip: 'Label',//gives inner text
            click: function(){
              var range;
              if ( Aloha.getSelection().rangeCount > 0 ) {
                  range = Aloha.getSelection().getRangeAt( 0 );
              }
              console.log(range); //returns nothing
            }
        });
    });

    Aloha.settings.toolbar = {
        tabs: [
         {
            label: 'Urgent',
            components: [ 'redButton' ],
         }
        ],
        exclude: [ 'strong', 'emphasis', 'strikethrough' ]
    }; 
```

**编辑 1：** 我带着这个问题进入了 Aloha 论坛，从 mod 我得到在输出中重新插入 html 可能会导致一些 DOM 问题，我首先从文档中错过了范围函数与我的谷歌 Chrome 不兼容的问题m 正在/为。

不过仍然对解决方案感兴趣:)

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T14:07:13.590

您可以查看额外包中的 wai-lang 插件等插件。Aloha Editor 中有一个实用程序对象，可帮助您将选定的文本包装到 DOM 对象中。

```
var range = Aloha.Selection.getRangeObject();
if (range.isCollapsed()) {
            GENTICS.Utils.Dom.extendToWord(range);
}
if (!range.isCollapsed()) {
    GENTICS.Utils.Dom.addMarkup(range,
        jQuery('<span class="myspecialspan"></span>'), false);
}
range.select(); 
```

除了相应地更改选择之外，它还将处理 DOM 拆分，例如，当您不只选择文本但您的选择还包含无法包装到跨度中的块元素时，跨度将被拆分：

```
<h1>{Heading 1</h1>
<h1>Heading 2</h1>
<h1>Heading 3}</h1> 
```

其中 { 标记选择的开始和 } 结束，将导致

```
<h1>{<span class="myspecialspan">Heading 1</span></h1>
<h1><span class="myspecialspan">Heading 2</span></h1>
<h1><span class="myspecialspan">Heading 3</span>}</h1> 
```

# mercurial - 更改提交用户名

> ID：12492905
> 
> 赞同：0
> 
> 时间：2012-09-19T10:30:04.040
> 
> 标签：mercurial, tortoisehg

> **可能重复：**
> [我可以更改 mercurial 变更集上的用户名吗？](https://stackoverflow.com/questions/732819/can-i-change-the-username-on-a-mercurial-changeset)

有没有一种愉快的方法可以在不破坏修订历史的情况下 更改提交者*用户名？*

我想在我的 Mercurial 存储库中修复我的用户名，但我似乎找不到使用`TortoiseHg`?

如果没有办法这样做，更改用户名的步骤是什么（即使它破坏了修订历史）？

# php - sqlite 在 Windows 7 + php 中的 localhost 上不起作用

> ID：12492908
> 
> 赞同：1
> 
> 时间：2012-09-19T10:30:07.657
> 
> 标签：php, sqlite, iis, localhost, windows-7-x64

在本地主机（Windows 7 IIS）上运行我的 php 文件时，我在使用 sqlite 时遇到问题。我已经在 IIS 管理器中安装了 IIS、PHP 5.3、xdebug 并启用了 sqlite。我的 IDE 是 phpStorm。PHP 工作正常。但线后

```
$db = new PDO('sqlite:new.db'); 
```

`$db = {PDO} [0]`. 之后，`$db->query($query, SQLITE_BOTH, $error)`给出一个空的`$error`，这是我能理解的。但是我不明白为什么`new PDO`不起作用并且也不返回任何错误。数据库位于根文件夹中，相同的代码在互联网上运行。

可以肯定的是，这里是 sqlite 上的 phpinfo 输出：

```
PDO support   enabled
PDO drivers   mysql, sqlite, sqlsrv, sqlite2 
```

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-26T22:25:55.247

我遇到过同样的问题。为了使它工作，我进入了 php.ini 的这一部分，在得到管理权限的情况下对其进行了编辑：

```
[ExtensionList]
extension=php_mysql.dll
extension=php_mysqli.dll
extension=php_mbstring.dll
extension=php_gd2.dll
extension=php_gettext.dll
extension=php_curl.dll
extension=php_exif.dll
extension=php_xmlrpc.dll
extension=php_openssl.dll
extension=php_soap.dll
extension=php_pdo_mysql.dll
extension=php_pdo_sqlite.dll
extension=php_imap.dll
extension=php_tidy.dll 
```

我添加了以下行

```
extension=php_sqlite3.dll 
```

然后我想要以下部分：

```
[sqlite3]
sqlite3.extension_dir = 
```

上面是空的，我把它改成了

```
[sqlite3]
sqlite3.extension_dir = "C:\Program Files (x86)\PHP\v5.6\ext\" 
```

现在它可以工作了......

# java - JavaFX：无效的属性错误

> ID：12492913
> 
> 赞同：1
> 
> 时间：2012-09-19T10:30:22.850
> 
> 标签：java, javafx, javafx-2, fxml

我正在用 JavaFX 2.2 编写一个应用程序。目前我的 Main.fxml 中出现错误。：

```
Invalid property.
file:/path/to/jar/myProject.jar!/myProject/Main.fxml:13 
```

这是 Main.fxml 的摘录：

```
<?import gui.main.elements.*?>
<MainPane fx:id="mainWindow" [...] xmlns:fx="http://javafx.com/fxml" fx:controller="myController">
  <children>
    <TextField fx:id="search" [...] promptText="Search..." /> 
    <TreeList fx:id="itemViewer" />
    <!--why does this not work!?-->
    <myTabPane fx:id="tabPane" />
  </children>
</MainPane> 
```

`TreeList extends TreeView`，`MainPane extends AnchorPane`并且`myTabPane extends TabPane`是自定义类。有趣的是，它只在启用 TreeList 的情况下运行良好，但每当我更改为时，都会`TabPane`出现`myTabPane`上述错误。它指向第 13 行，即`<children>`，这更加令人困惑。我猜测 myTabPane 是 MainPane 的子项存在问题，尽管它对 TreeList 工作正常。

如果您需要更多我的代码，我会准备好在这里为您发布。提前感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:40:10.913

发现错误。它比我想象的还要愚蠢。Main.fxml 中的每个元素都应该以大写字母开头！！（正如 java 约定所推荐的那样）所以我将 myTabPane 更改为 TabManager，现在它可以工作了！

# visual-studio-2010 - 强制 ReSharper 使用 StyleCop 设置进行代码清理

> ID：12492918
> 
> 赞同：18
> 
> 时间：2012-09-19T10:30:38.853
> 
> 标签：visual-studio-2010, resharper, stylecop

我看到了类似的问题，但无法找到答案，即使其中一些被标记为已回答。我正在使用 ReSharper 6.1.1 和 StyleCop 4.7.11.0。我将**Settings.StyleCop**文件放在我的解决方案的根文件夹中。我未选中文档规则，因此 StyleCop 设置如下所示：

![在此处输入图像描述](../Images/380ed5e7cf3ce64983a5e6bacc9c8d72.png)

我什至设置了“不与其他设置文件合并”选项。

然后我打开我的解决方案，转到 ReSharper -> Cleanup 并删除当前的 StyleCop 预设。 ![在此处输入图像描述](../Images/c1e4810f110e1e9c35d0034b7439811a.png)

然后我保存并重新打开 ReSharper 设置并转到 Tools -> StyleCop 并单击“重置 C# 代码样式选项”按钮。 ![在此处输入图像描述](../Images/2b107155bb206e9137ac6c7a0bcd435d.png)

然后我再次保存并重新打开 ReSharper 设置。我可以看到新的 CodeCleanup 预设“StyleCop”，我想这个预设**必须**与我的**Settings.StyleCop**文件同步。但事实并非如此，仍然检查文档部分： ![在此处输入图像描述](../Images/ba5aa2ec41d64c44e24ab9969aa9966e.png)

那么，我做错了什么？PS：抱歉很多图片，但我相信他们澄清了我的问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T20:44:08.083

那是正确的功能。ReSharper 代码清理样式保存在 ReSharper 设置文件中，StyleCop 规则保存在 StyleCop 设置文件中。它们提供的功能略有不同，因为 ReSharper 插件会清理您的代码，而 StyleCop 只是检查您的代码。您有一个观点，他们可能应该引用相同的设置，但这不是它目前的工作方式。

我确信有一个解释原因（即，他们可能已经设计它允许您清理代码但不强制执行规则），但这可能最好在[StyleCop 网站](http://stylecop.codeplex.com/discussions)上询问。

# asp.net-mvc - 获取 URL 的路由

> ID：12492919
> 
> 赞同：1
> 
> 时间：2012-09-19T10:30:39.037
> 
> 标签：asp.net-mvc, url, razor, asp.net-mvc-routing

简单的问题。我正在创建链接并希望在不对其进行硬编码的情况下获取路由 url。我知道您可以使用 url.content('~/therestofyourlink') 但这仅适用于解决方案路线，而不是网络服务器路线。

我想要的是'http://localhost/'，但 localhost 可以更改为任何内容，即域名。我想要一些代码来解决这个问题，所以我只需要担心来自网络服务器路由及其下方的实际链接。

我正在使用 MVC razor，因此使用此语法的任何答案都会有很大帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:33:10.420

您是否指向您网站*之外的内容？*

如果没有，那么使用相对 url 就可以了。当您将应用程序部署到生产服务器时，一切仍然有效。

如果是，则需要将根 url 放入配置中（可能是 web.config 中的 appSettings）。

更新：

如果您想以编程方式访问 IIS 元数据库而不是查看[Microsoft.Web.Administation](http://msdn.microsoft.com/en-us/library/microsoft.web.administration.aspx)命名空间。

# firefox - Firefox 中用户代理切换器的工作

> ID：12492926
> 
> 赞同：0
> 
> 时间：2012-09-19T10:31:17.180
> 
> 标签：firefox, firefox-addon, user-agent, user-agent-switcher

Firefox 中有一个名为 User Agent Switcher 的插件，可以将网络服务用作 Google bot、Yahoo Slurp 或 Iphone/Android 用户。任何人都可以指导我如何在后台工作。它为执行此任务而修改的属性/属性是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:05:16.080

用户代理切换器设置了一堆[首选项](https://developer.mozilla.org/en-US/docs/Code_snippets/Preferences)：

> general.useragent.appName
> general.appname.override
> general.appversion.override
> general.platform.override
> general.useragent.override
> general.useragent.vendor
> general.useragent.vendorSub

这些替换了用户代理字符串的各个部分——就这么简单。其代码中的其他所有内容都是用户界面和选择逻辑。实际上，我不确定为什么选择这种复杂的方法：仅设置`general.useragent.override`就足够了，它的值将替换整个用户代理字符串。

您可以使用自己轻松创建该首选项`about:config`，[本文](http://johnbokma.com/mexit/2004/04/24/changinguseragent.html)详细介绍了这些步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-04T12:17:18.517

让我回答[弗拉基米尔帕兰特的回答](https://stackoverflow.com/questions/12492926/working-of-user-agent-switcher-in-firefox/12525735#12525735)中的问题。

简而言之，UserAgentSwitcher 的设计似乎遵循了过去已经过时的 firefox（或一般的浏览器）规范。

现在详细说明：根据[MDN 关于 userAgent 的页面](https://developer.mozilla.org/en-US/docs/Web/API/NavigatorID/userAgent)，Firefox 的用户代理是由 Wladimir 提到的组件构建的，如：`userAgent = appCodeName/appVersion number (Platform; Security; OS-or-CPU; Localization; rv: revision-version-number) product/productSub Application-Name Application-Name-version`.

但截至 2015 年 8 月，这是**错误**的；据我测试，用户代理只能被覆盖`general.useragent.override`，并且这些元素被忽略。

尽管如此，Javascript 还是公开了它们：

```
Javascript element      Firefox preference
navigator.appCodeName   ?
navigator.appName       general.appname.override
navigator.appVersion    general.appversion.override
navigator.platform      general.platform.override
navigator.product       ?
navigator.productSub    ?
navigator.vendor        general.useragent.vendor
navigator.vendorSub     general.useragent.vendorSub</code></pre> 
```

[MDN 的另一个页面](https://developer.mozilla.org/en-US/docs/Web/API/NavigatorID)说这些现在已从 Web 标准中删除，但大多数浏览器仍然支持它们。有关主要浏览器的典型值，请参见例如[此站点](http://www.red.oit-net.jp/tatsuya/java/navi.htm)。（这个页面是日文的，但那一定没问题。随意修改。）

Probably readers know that most sites change their behavior by checking the useragent value but it's merely a rule of thumb, not reliable both for web designers and page visitors.

# c# - 滑块元素中的空引用错误

> ID：12492927
> 
> 赞同：0
> 
> 时间：2012-09-19T10:31:18.170
> 
> 标签：c#, windows, windows-phone-7

我的 Windows Phone 应用程序中有一个滑块元素，它的最小值 = 1 和最大值 = 10，默认情况下，页面加载时该值为 1。我希望滑块的值显示在文本块中。所以第一，当滑块的值使用 ValueChanged 事件发生变化时，我将滑块的值存储在一个整数中。我在此事件处理程序中有以下代码。

```
private void complexitySlider_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
        {
          int complexity;
          complexity =(int)complexitySlider.Value; //<--null reference
        } 
```

但是当我运行我的应用程序时，它会显示 NullReference 错误。我已经交叉检查了滑块的名称，它是正确的。我怎样才能消除这个错误？我不想直接将文本块与滑块值绑定

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:40:29.170

好吧，它可能会帮助您避免 NRE。

```
private void SliderValueChanged(object sender, RoutedPropertyChangedEventArgs<double> args)
{
   int complexity;
   var slider = sender as Slider;
   if(slider != null) 
   {
     complexity =(int)slider.Value;
   }
} 
```

# php - 通过用户的计算机将远程文件上传到我的服务器

> ID：12492929
> 
> 赞同：0
> 
> 时间：2012-09-19T10:31:19.913
> 
> 标签：php, javascript, file-upload

我正在尝试将远程文件上传到我的服务器。我可以使用我的远程 url 上传脚本来做到这一点，这个脚本很简单并且可以正常工作。但我想以不同的方式使用它。

在我们使用的一般上传脚本中

```
 <input type="file" id="myfile" name="content" /> 
```

因此，在这种情况下，我们手动浏览用户计算机中的文件并上传。我想对远程网址做同样的事情。当用户输入远程 url 位置时，我想将其转换为本地文件然后上传。在上传之前将远程文件转换为本地文件的好处是，我可以检查并使用我用于本地上传的现有代码。

我想要的顺序是

*   用户输入 url 位置，在输入 url 后，我想触发一个`onmouseover`事件来填充这个

    `<input type="file" id="myfile" name="content" />`

*   然后我可以像往常一样处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:38:26.270

Payal，使用简单的文本框（类型=文本）并允许用户直接在该框上粘贴 url。现在`"onkeyup"`在该文本框上使用一个函数并调用上传脚本或基本上提交页面..无论您想遵循什么过程进行上传。

```
<input type="text" name="fileurl" onkeyup="javascript:uploadTrigger()">

function uploadTrigger(){
// submit the form
// OR
// call ajax upload
} 
```

考虑错误验证。谢谢。

# c# - 将图像数据保存到文件，同时更新数据库

> ID：12492930
> 
> 赞同：1
> 
> 时间：2012-09-19T10:31:25.033
> 
> 标签：c#, asp.net, image, binary

我正在尝试将图像作为`varbinary`数据类型上传到我的数据库中。

问题是我还想将字节数组中的图像数据存储到我的解决方案中存在的名为`TextFile.txt`. 但我不能这样做。我希望它在将图像插入数据库的同时写入数据。

我有这段代码，我可以将图像插入数据库，但不能将字节数据插入文本文件。

```
protected void Button1_Click(object sender, EventArgs e)   
{
    if (!this.FUImage.HasFile)
    {
        this.Label1.Text = "Please select a file to Uplaod";
        return;
    }

    MemoryStream ms = new MemoryStream();
    this.FUImage.PostedFile.InputStream.CopyTo(ms);
    var bytes = ms.ToArray();
    ms.Close();
    var image = new Image() {
        Name = this.FUImage.PostedFile.FileName,
        FileBinary = bytes
    };
    SaveImageData(image);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:55:32.200

使用二进制写入器写入字节数据。

```
MemoryStream ms = new MemoryStream();  
        this.FUImage.PostedFile.InputStream.CopyTo(ms);   
        var bytes = ms.ToArray();   
        ms.Close();   
        var image = new Image()   
        {   
            Name = this.FUImage.PostedFile.FileName,   
            FileBinary = bytes   
        };  

 using (FileStream fs = new FileStream(FILE_NAME, FileMode.CreateNew))  
        {
            using (BinaryWriter w = new BinaryWriter(fs))  
            {  
                for (int i = 0; i < 11; i++)  
                {  
                    w.Write(bytes);  

                }  
            }  
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:40:43.527

方法 SaveImageData 有什么作用？是在这里你想写文件吗？

[http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/005f0060-09c1-4ba9-8a40-cc7fa7284320](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/005f0060-09c1-4ba9-8a40-cc7fa7284320)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T11:01:22.950

您应该首先将`byte`数组转换为`base64String`using`Convert.ToBase64String Method (Byte[])`方法，然后将字符串写入任何文本文件。

```
var bytes = ms.ToArray();
string imageString = Convert.ToBase64String Method ();
System.IO.File.WriteAllText (@"D:\path.txt", imageString ); 
```

# serialization - 序列化浮点数

> ID：12492932
> 
> 赞同：1
> 
> 时间：2012-09-19T10:31:37.207
> 
> 标签：serialization, floating-point, floating-point-precision

我正在搜索几个论坛以获取有关如何序列化浮点数的一些想法，并且碰巧遇到了以下代码。

```
oxdrstream&
oxdrstream::operator<<(
    float               source )
{
    BytePutter          dest( *this ) ;
    bool                isNeg = source < 0 ;
    if ( isNeg ) {
        source = - source ;
    }
    int                 exp ;
    if ( source == 0.0 ) {
        exp = 0 ;
    } else {
        source = ldexp( frexp( source, &exp ), 24 ) ;
        exp += 126 ;
    }
    uint32_t            mant = source ;
    dest.put( (isNeg ? 0x80 : 0x00) | exp >> 1 ) ;
    dest.put( ((exp << 7) & 0x80) | ((mant >> 16) & 0x7F) ) ;
    dest.put( mant >> 8 ) ;
    dest.put( mant      ) ;
    return *this ;
} 
```

我不明白为什么我们需要这样做

```
source = ldexp( frexp( source, &exp ), 24 ) ; 
```

frexp() 将返回一个介于 0.5（包括）和 1（不包括）之间的值。

例如： frexp() 返回 0.81

ldexp( 0.81, 24 ) --> 19.44 并且当分配给 unit_32 时，它将被截断。

我看不出这背后的逻辑。有人可以为我澄清一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:24:17.233

`ldexp(.81f, 24)`不产生 19.44；它产生 13589545。代码被设计为使 ldexp 始终产生小于 2 ^(24)的整数并精确捕获有效数字`mant`（应该称为`significand`，因为它不是尾数）。

此代码不适用于负零、次正规、无穷大或 NaN。

# iphone - 如何从图库中检索图像并将其路径保存在 iphone 的本地数据库中？

> ID：12492940
> 
> 赞同：0
> 
> 时间：2012-09-19T10:31:53.007
> 
> 标签：iphone, objective-c, xcode, image

我想知道如何从图库中检索图像并将其路径保存在本地数据库中。在此过程之后，我希望我使用了本地数据库图像路径中的图像。请帮忙！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:58:31.730

**关于 sqlite 和图像**

在 sqlite 中存储路径（而不是图像）是有意义的。或者你可以考虑使用 Core Data。现在 Core Data 提供了在外部存储中存储图像或其他大数据的能力（基本上抽象出查找您自己的目录、获取路径、存储路径等的需要），我会喜欢它。

下面的代码假设您可以处理 sqlite 的杂乱细节，或者使用一些库作为原始实现的包装器。

**将图像存储在本地**

您可以决定要将图像存储在应用程序文件系统中的哪个位置。假设您要使用文档目录：

```
- (NSURL *)applicationDocumentsDirectory
{
    return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
} 
```

让我们也假设这些是 png 格式，用于说明目的：

```
- (NSString *)pathForImageNamed:(NSString *)imageName {
    return [[self applicationDocumentsDirectory] stringByPathComponent:imageName];
}

- (void)saveImage:(UIImage *)image name:(NSString *)name {
    NSString *path = [self pathForImageNamed:imageName];
    [UIImagePNGRepresentation writeToFile:path];

    // here, save path to sqlite
} 
```

**检索图像**

```
- (UIImage *)imageWithName:(NSString *)imageName {
    NSString *imagePath = nil;

    // retrieve path name from sqlite db based on image name

    return [UIImage imageWithContentsOfFile:imagePath];
} 
```

# android - 如何检查文件是否存在于android的内部文件系统中

> ID：12492950
> 
> 赞同：0
> 
> 时间：2012-09-19T10:32:26.407
> 
> 标签：android, file-io

> **可能重复：**
> [测试文件是否存在](https://stackoverflow.com/questions/2786655/test-if-file-exists)

我在我的 android 应用程序内部文件系统的 /files 文件夹中存储了一个文件。我想检查它是否以编程方式存储在那里。我该如何检查？请帮助我。

```
File file = getBaseContext().getFileStreamPath("Android.mk"); if(file.exists()) { Toast.makeText(this,"Android.mk exist", Toast.LENGTH_LONG).show(); } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T12:44:10.190

[如果我像 Android dev-tut ( Link](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal) ) 中描述的那样在内部存储中写入一个文件到我的应用程序私有存储，我可以用你的代码验证文件是否已成功写入！

所以验证码应该没问题。也许您编写文件的方式是错误的。这是我的代码片段：

```
String FILENAME = "Android.mk";
String string = "hello world";

FileOutputStream fos = openFileOutput(FILENAME, getBaseContext().MODE_PRIVATE);
fos.write(string.getBytes());
fos.close();

File file = getBaseContext().getFileStreamPath("Android.mk");
if (file.exists()) {
    Toast.makeText(this, "Android.mk exist", Toast.LENGTH_LONG).show();
} 
```

# php - 如何在 javascript 中使用 $.post 函数访问带有 post 方法的页面以下载文件？

> ID：12492952
> 
> 赞同：0
> 
> 时间：2012-09-19T10:32:31.887
> 
> 标签：php, javascript, jquery, post

我想写一个文件下载页面，供客户从我公司的服务器上下载文件。

而且我不想向用户公开真实的文件链接，所以我有两个页面： filelist.php 用于提供单击链接并将文件名作为参数发布到另一个页面，名为 download.php ，接受请求并将文件流传输给客户。

download.php 的关键部分是这样的：

```
$fp = fopen($real_file_path,'r');
$file_size = $temp_res['ef_file_bytes'];
Header("Content-type: application/octet-stream");
Header("Accept-Ranges: bytes");
Header("Accept-Length: ".$file_size);
Header("Content-Disposition: attachement;filename=".$file_name);
echo fread($fp,$file_size);
fclose($fp);
exit; 
```

现在我在 filelist.php 中使用了一个 onclick() 函数，当点击文件链接时，会调用以下函数：

```
function downloadfile( ef_name )
    {
        var url_str='download.php';
        url_str = encodeURI(url_str);
        $.post(
        url_str,{fnm:ef_name },
        function(data){
            window.open().document.write(data);
          }
          ); 
    } 
```

但我只能在页面中显示文件的内容，而不是弹出一个对话框窗口来保存它。

如果我用来测试，它工作得很好。

上面 JS 代码中的“数据”正是我要下载的文件的全部内容。我认为问题在于我在 $.post(); 中使用的函数；javascript中是否有任何功能可以使用post参数打开一个新页面？

我在 windows、apache、php、mysql 上。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:02:38.373

你不能使用`$.post`，但你可以创建一个隐藏`form`的`method="POST"`并提交它。可选的隐藏`iframe`用于`target`接收结果。

# c# - 如果没有 MVC4 中的 /Index，表单将无法执行发布操作

> ID：12492958
> 
> 赞同：0
> 
> 时间：2012-09-19T10:32:46.223
> 
> 标签：c#, razor, asp.net-mvc-4

我最近将一个项目升级到 MVC 4。我在 Account/Index 有一个登录页面。使用 Html.BeginForm 时，未达到控制器中的发布操作。

在进一步搞砸之后，我发现助手生成的 HTML 是：

```
<form action="/Account" autocomplete="off" method="post" requireSSL="true"> 
```

如果我用 html 替换 Html.BeginForm ，如下所示：

```
<form action="/Account/Index" autocomplete="off" method="post" requireSSL="true"> 
```

正确到达后操作。

我不明白为什么？这在 MVC 3 之前一直有效。注册的路由是标准的 Microsoft 模板：

```
public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    }
} 
```

**编辑：**

控制器代码：

```
 public ActionResult Index()
    {
        if (User.Identity.IsAuthenticated)
        {
            return RedirectToAction("RedirectUser");
        }

        return View();
    }

    [HttpPost]
    public ActionResult Index(LogOnModel model, string returnUrl)
    {
        if (ModelState.IsValid)
        {
            if (MembershipService.ValidateUser(model.UserName, model.Password))
            {
                FormsService.SignIn(model.UserName, model.RememberMe);

                if (Url.IsLocalUrl(returnUrl) && returnUrl != "/")
                {
                    return Redirect(returnUrl);
                }
                else
                {
                    return RedirectToAction("RedirectUser", "Account");
                }
            }
            else
            {
                ModelState.AddModelError("", "The user name or password provided is incorrect.");
            }
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:38:47.333

由于您的路由看起来不错，因此问题可能是 [HttpPost] 属性使用不正确。如果您指定发布后触发的操作，我可能会提供更多帮助。

使用浏览器导航到 /Account/Index 与 /Account/ 时有区别吗？如果不是，它肯定是一个错误使用的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:43:38.263

即使您在浏览器中输入它，这似乎也是一个问题。错误需要报告

# sql - 选择大于特定的日期列

> ID：12492960
> 
> 赞同：2
> 
> 时间：2012-09-19T10:33:05.370
> 
> 标签：sql, firebird

`where`我在条款中有以下标准：

```
cat_product.datetime > '2012-09-18 11:24:54' 
```

结果：

```
18.09.2012 11:24:54
18.09.2012 11:34:51
18.09.2012 12:07:12 
```

结果包含的问题 `18.09.2012 11:24:54`。为什么？在条件中写入`>`运算符 not `>=`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:46:15.093

毫秒问题。需要转换为没有毫秒的格式。如 ：

```
SELECT CONVERT(VARCHAR,GETDATE(),120) 
```

对你来说，它应该是这样的：

```
CONVERT(VARCHAR, cat_product.datetime,120) > '2012-09-18 11:24:54' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T11:59:11.747

试试这个：

cat_product.datetime > fmtdate('yyyy-mm-dd hh:nn:ss','2012-09-18 11:24:54')

# django - 外键的概念

> ID：12492964
> 
> 赞同：1
> 
> 时间：2012-09-19T10:33:15.860
> 
> 标签：django, django-models, django-views

我有两个模型，比如说 A 和 B。

A 与 auth_user 是一对一的，B 通过外键与 A 相关。

现在，当我尝试在模型 B 中输入数据时，它给了我一个错误**A_id' cannot be null**。那么谁能告诉我如何将数据提供给外键或者默认情况下它可以获得模型A的ID，如果是，那么如何？？？

**笔记：**

我为每个模型使用了单独的表单，这意味着我在模型 A 中提交数据，成功后它会将我引至个人资料页面，然后我单击链接以填写第二个模型的详细信息，因此第二个表单开始发挥作用。所以在这里我不知道那个外键是怎么得到模型A的id的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:36:21.963

如果您想在不参考模型 A 的情况下保存模型 B 的 FK 字段，即如果 FK 为 Null，则应允许模型 B FK 字段为空（null=True，blank=True）。否则，您将不得不用 A 对象提供 B 对象，然后保存它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T11:18:04.853

创建 B 对象时，您需要提供对 A 对象的引用。

你说你正在使用一个表单来创建 B 对象，所以你可能需要一些类似的东西......

```
b_instance = new_b_form.save(commit=False)
b_instance.a = A.objects.get(something="whatever")  # You'll know how to find the A object you want related.
b_instance.save() 
```

设置 a 会自动设置 a_id 保存在数据库中。

或者，您可以更改表单，以便用户可以选择 A 对象。

# java - 静态变量：好还是坏？

> ID：12492969
> 
> 赞同：19
> 
> 时间：2012-09-19T10:33:53.957
> 
> 标签：java, static

> **可能重复：**
> [为什么静态变量被认为是邪恶的？](https://stackoverflow.com/questions/7026507/why-are-static-variables-considered-evil)

我有在所有程序中广泛使用**静态变量**的习惯，尤其是在使用 Android 时。我倾向于使用它们，因为有时**通过 Intents 发送 10 个或更多值感觉很麻烦**。所以，我只是**将它们声明为静态**变量，并使用“点”运算符轻松地在其他类中访问它们。使用静态变量的另一个原因是当我在我的应用程序中创建一个**实用程序类时。**就像我在下面给出的代码一样，可以帮助我**在不同的活动中使用变量**。

**实用程序.java**

```
public class Utility {
public static Facebook fb;
public static AsyncFacebookRunner fbAsyncRunner;
public static String[] fbPermissions = {"email", "read_stream", "user_birthday"};
public static final String PREF_UTILITY_FILE_NAME = "PrefUtilityFile";
public static SharedPreferences prefs;
public static Editor editor;
public static String access_token;
public static long expires;
} 
```

我在网上搜索了类似的问题并遇到了[这个](https://stackoverflow.com/questions/7026507/why-are-static-variables-considered-evil)和[这个](https://stackoverflow.com/questions/7346496/using-static-method-and-variables-good-vs-bad)，但他们似乎没有给出这个问题的最终答案。在大多数地方，我看到了相互矛盾的意见，因此完全感到困惑。

**这是一个好的编程习惯还是坏的？**我应该使用它还是不使用它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-19T10:39:32.950

您可以用“上下文”对象替换所有静态字段，您可以传递或制作单例。可以删除几乎所有的静态字段。这是否是一个好主意取决于您，但我不认为使用实例字段必须更加困难。

顺便说一句：我建议

*   将静态字段/常量与使用它们的类或包一起放置
*   如果可能的话，将静态数组视为不可变的`final`。

* * *

您可以使用非静态上下文

```
public class Context {
    public static final String PREF_UTILITY_FILE_NAME = "PrefUtilityFile";

    public Facebook fb;
    public AsyncFacebookRunner fbAsyncRunner;
    public String[] fbPermissions = {"email", "read_stream", "user_birthday"};
    public SharedPreferences prefs;
    public Editor editor;
    public String access_token;
    public long expires;
}

// pass to constructor as required
class UsesContext {
    final Context context;
    public UsesContext(Context context) {
        this.context = context;
    }

    public void method() {
        // can use context
    }
} 
```

这允许您创建具有多个上下文的单元测试。

我唯一会留下静态的是常量。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-19T10:37:19.903

如果您继续定期使用静态变量，我完全赞成静态变量，并且如果您将它们设为最终变量，则这些值永远不会改变。

为什么做事困难重重？

这就是静态变量的全部用途。

基本上他们所做的是提供一个通用访问点，您可以从任何上下文（静态、程序流、外部）访问。

你基本上是在说前门在这里，它是黄色的。有人从外面偷看会看到黄色的门。在里面走的人会看到门，它是黄色的。房间里的人可以看到走廊，发现它是黄色的。

如果你把它涂成红色，每个人都会清楚地看到它。

此外，在整个 ENTIRE 程序中总会有 1 个实例具有相同的值。这可以节省内存。

举个例子

```
class test {
public int ten = 10;
   public test() {
   }
} 
```

每次你做一个`new test()`整数时，内存空间都会被分配给十个变量。因此，如果您有 10 个测试实例，您将有 10 个单独的整数，它们都具有相同的值。

如果你有这个

```
class test {
public static int ten = 10;
   public test() {
   }
} 
```

你有十个测试实例，你只有**一个**整数实例十。这样可以节省内存分配和垃圾收集。虽然我只建议对于不会改变的持久列表/变量，并且您可以无条件地保留在内存中。不要对每个变量都这样做。对大型事物（例如您一遍又一遍地重复使用的图像）执行此操作。将同一张图片多次保存在内存中是没有用的。

当我最初写我的答案时，我不知道静态变量是如何工作的。我弄混了`static final`。`static`在静态变量上，您可以分配新值。static final 是不可变的。那些不能改变。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-19T10:41:46.910

这种编程实践在纯面向对象的语言（如 Java）中是不好的，因为它破坏了面向对象的编程范式。它们可以工作，但是一旦你意识到你确实需要它们的多个版本，你将需要大量的重构来实现这一点。

如果您认为通过方法调用处理太多参数很麻烦。只需创建一个包含所有这些对象的对象（请参阅 Peter Lawrey 的回答，“上下文”对象）并仅传递此对象。然后，您可以再次在该对象上使用“简单点符号”。

下一点：测试。如果您需要用代理或其他测试内容替换一些静态字段以进行单元测试，那您基本上就完蛋了。使用上下文对象，您可以简单地将不同的上下文对象传递给单元测试。

您提到的`Utility`类基本上是此类上下文对象的良好候选者。只需将其所有字段设为非静态并将该类的对象交给需要它的代码即可。

我可以告诉你一个我被静态方法搞砸的例子：我曾经写过一个编译器。而且由于我认为在编译运行期间，有许多上下文内容只需要一次（例如符号表），因此我将它们全部添加为静态变量。后来我决定允许多线程编译和“服务器”模式，其中编译器一直在空闲模式下运行，直到客户端发送编译请求（这节省了 Java 的长启动时间）。现在我被搞砸了。现在有不止一个并发上下文（并发编译器线程），但所有上下文都是通过静态变量共享的。我需要大约一周的时间用上下文对象替换所有静态变量，并引入了许多错误。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-19T10:42:16.310

坏的。请参阅[消除静态](http://gbracha.blogspot.com/2008/02/cutting-out-static.html)。

在我看来，静态变量包含一个或多个对象，但是这些对象的格式不正确：没有按类组织（没有类型层次结构），封装不好，仅限于单个实例（这可能会在将来需要多个实例时造成麻烦） .

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-19T10:44:12.803

声明为静态的变量会保留在内存中，直到程序执行，从而占用额外的空间。

如果您想长时间使用/保留一个值，使用静态可能是有益的，但是不建议将所有变量声明为静态，这不是一个好习惯。如果您养成将所有值声明为静态的习惯，您的程序将占用不必要的内存。

除此之外，静态变量不符合 OOPS 概念，其中范围、抽象和封装与冒泡对象一起定义。通过它可以随意调用和删除变量。

如果您在有限的内存空间（例如移动应用程序）中工作，则会出现使用静态变量的最大缺点，在这种情况下，如果应用程序被变量和更少的内存空间占用，您的应用程序将会崩溃。

如果你想永久存储一个值，还有其他方法，比如数据库、文件等，可以让工作更轻松、更干净。只是我的2美分。

# hibernate - Hibernate 中的内存数据库

> ID：12492974
> 
> 赞同：0
> 
> 时间：2012-09-19T10:34:08.887
> 
> 标签：hibernate, hsqldb, multi-tenant

这些天我正在使用hibernate，我使用“hsqldb”作为JPA的内存数据库，在我们的应用程序中我们使用“多租户”，所以我们使用的是hibernate。我可以在休眠中使用多租户的内存数据库吗？

```
@Autowired
protected TenantBasedSessionFactory tenantBasedSessionFactory;

Session session = tenantBasedSessionFactory.getTenantBasedSession("1") 
```

我可以使用这种方式将内存数据库与休眠一起使用吗？

谢谢，干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:48:23.600

您可能想查看 H2 而不是 HSQLDB（但这是个人意见）。在 Hibernate 中使用内存数据库与持久数据库（有或没有多租户）并没有什么不同。

# android - 两个具有 50% 父宽度的画廊

> ID：12492975
> 
> 赞同：0
> 
> 时间：2012-09-19T10:34:11.090
> 
> 标签：android, android-layout, android-linearlayout

我正在开发一个 Android 3.1 平板电脑应用程序。

在这个应用程序中，我将有一个带有两个画廊的景观屏幕，我希望这两个画廊有 50% 的宽度。

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    android:id="@+id/frag_general_info_factory_table"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_margin="10dp"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

[ ... ]

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="200dip"
        android:weightSum="1"
        android:orientation="vertical"> 

        <Gallery
            android:id="@+id/factGallery"
            android:layout_weight=".5"
            android:layout_width="0dip"
            android:layout_height="fill_parent"/>

        <Gallery
            android:id="@+id/wareHouseGallery"
            android:layout_weight=".5"
            android:layout_width="0dip"
            android:layout_height="fill_parent"/>

    </LinearLayout>

[ ... ]
</LinearLayout> 
```

但它看起来不太好。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T10:40:18.337

我假设您希望它们水平并排，在这种情况下，您的 LinearLayout 的方向错误 - 它应该设置为水平：

```
android:orientation="horizontal" 
```

# javascript - 如何从 JS 控制台中的 console.timeEnd() 获取输出？

> ID：12492979
> 
> 赞同：53
> 
> 时间：2012-09-19T10:34:32.443
> 
> 标签：javascript, google-chrome, google-chrome-devtools

我希望能够从`console.timeEnd('t')`我的 Google Chrome Javascript 控制台中获取返回的字符串。

在下面的这个例子中，我想要一个包含`"t: 0.276ms"`

```
> console.time('t'); console.timeEnd('t');
  t: 0.276ms
< undefined 
```

这是可行的吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-20T00:57:03.947

在 Google Chrome 23.0.1262.2 (Official Build 155904) dev 中，这似乎是不可能的。我发现能够准确计算时间的唯一方法是使用`window.performance.webkitNow()`

这是一个简单的例子：

```
var start = window.performance.now();
...
var end = window.performance.now();
var time = end - start; 
```

[在http://updates.html5rocks.com/2012/08/When-milliseconds-are-not-enough-performance-now](http://updates.html5rocks.com/2012/08/When-milliseconds-are-not-enough-performance-now)了解更多信息

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-06-20T01:55:18.483

只是你可以使用

```
var begin=Date.now();
something here ...;
var end= Date.now();

var timeSpent=(end-begin)/1000+"secs"; 
```

这是最简单的方法，它适用于任何浏览器，而不仅仅是 chrome

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-11-07T19:24:16.253

小帮手做一些时间测量。`timerEnd`返回以毫秒为单位的时间，该`timers`对象还包含有关使用此名称的计时器的次数、所有测量时间的总和和测量平均值的信息。我觉得这很有用，因为一个操作的测量时间取决于许多因素，所以最好测量几次并查看平均值。

```
var timers = {};
function timer(name) {
    timers[name + '_start'] = window.performance.now();
}

function timerEnd(name) {
    if (!timers[name + '_start']) return undefined;
    var time = window.performance.now() - timers[name + '_start'];
    var amount = timers[name + '_amount'] = timers[name + '_amount'] ? timers[name + '_amount'] + 1 : 1;
    var sum = timers[name + '_sum'] = timers[name + '_sum'] ? timers[name + '_sum'] + time : time;
    timers[name + '_avg'] = sum / amount;
    delete timers[name + '_start'];
    return time;
} 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-09-19T11:19:49.740

console.timeEnd() 函数将时间放到控制台，并返回值以便您可以将其保存到变量

```
var c = console.timeEnd('a');
c/1000+'s'; 
```

或者您可以将此变量保存到窗口对象以供最新使用

```
window.c = console.timeEnd('b');
window.c 
```

# android - ADT - 20 Proguard 使用外部 jar 时出错

> ID：12492983
> 
> 赞同：0
> 
> 时间：2012-09-19T10:34:55.323
> 
> 标签：android, proguard, ormlite, apk

我使用的环境是 ADT 版本 20，eclipse(Juno) 版本 4.2

在我的android项目中，我需要删除Log才能在Google Play上发布它，所以我尝试使用Progaurd，我对progaurd完全陌生，所以我在Google上搜索并找到了这个代码片段

```
-assumenosideeffects class android.util.Log {
    public static *** d(...);
    public static *** v(...);
    public static *** i(...);
} 
```

我已将其添加到文件的底部`proguard-project.txt`和`project.properties`文件中，我已取消注释

`proguard.config=${sdk.dir}\tools\proguard\proguard-android.txt:proguard-project.txt`

这是`project.properties`文件评论部分中提到的

之后我导出了apk，并将其安装在模拟器中。它向我显示了我添加到项目中的外部 jar 的错误。

看起来像制造问题的罐子是`ormlite`

做错什么了吗？我错过了什么？

请在这件事上给予我帮助

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:28:01.220

您还需要排除 ORMLite 类。请参阅以下有关 ORMLite 和 proguard 的讨论：

> [在 Android 上使用 OrmLite 进行 Proguard](https://stackoverflow.com/questions/9853096/proguard-with-ormlite-on-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T23:12:07.037

在 ADT 版本 20 中，默认情况下禁用优化，因此不会删除 Log 语句。要启用优化，您必须在以下位置选择优化的 ProGuard 配置文件`project.properties`：

```
proguard.config=${sdk.dir}/tools/proguard/proguard-android-optimize.txt:proguard-project.txt 
```

# android - 如何在标签中心显示图像？

> ID：12492986
> 
> 赞同：1
> 
> 时间：2012-09-19T10:35:03.950
> 
> 标签：android

我在 android 中创建了一个仅显示图像的选项卡（不包含任何文本），我希望图像显示在选项卡的中心。有多个选项卡，每个选项卡都包含图像，但问题是图像是不显示在每个选项卡的中心。

这是我的xml

```
 <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_above="@android:id/tabs"
             />

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:background="#000000" >
        </TabWidget>
    </RelativeLayout>

</TabHost> 
```

在代码中设置图像：

```
newsTab.setIndicator("",getResources().getDrawable(R.drawable.news)).setContent(
                new Intent(RestauActivity.this, NewsActivity.class)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T11:08:40.727

1)- 创建一个名为 report_tabs.xml 或您喜欢的任何名称的布局文件。

在 report_tabs 中使用此代码。

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/layout_tabsLayout"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:background="@drawable/btn_selector"
     android:gravity="center"
     android:orientation="vertical"
     >

     <ImageView
     android:id="@+id/img_icon"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_gravity="center"
     android:layout_marginTop="3dp"
     />
    </LinearLayout> 
```

2)- 并在您的活动中使用以下代码。

```
 Intent intent;
    tabhost = getTabHost();
    TabHost.TabSpec tabspec;
    intent = new Intent().setClass(getApplicationContext(),xxxxx.class);

    tabspec = tabhost.newTabSpec("First");
    view = LayoutInflater.from(this).inflate(R.layout.report_tabs,
tabhost.getTabWidget(), false);

    imgtabF = (ImageView) view.findViewById(R.id.img_icon);
    imgtabF.setBackgroundResource(R.drawable.tab_icon_selector);

    tabspec.setIndicator(view);
    tabspec.setContent(intent);
    tabhost.addTab(tabspec); 
```

3)- 在 drawable 中创建一个名为 tab_icon_selector 的文件，用于更改选项卡上的图标单击，如下所示：-

```
 <?xml version="1.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- Non focused states -->
    <item android:state_focused="false" android:state_selected="false" 
          android:state_pressed="false" android:drawable="@drawable/medical_icon_unselect"    
     />
     <item android:state_focused="false" android:state_selected="true" 
     android:state_pressed="false" android:drawable="@drawable/medical_icon_sel" /> 
     <!-- Focused states -->
     <item android:state_focused="true" android:state_selected="false" 
     android:state_pressed="false" android:drawable="@drawable/medical_icon_sel" />
     <item android:state_focused="true" android:state_selected="true" 
     android:state_pressed="false" android:drawable="@drawable/medical_icon_sel" /> 
     <!-- Pressed -->
     <item android:state_pressed="true" android:drawable="@android:color/transparent"/> 
     </selector> 
```

现在您可以创建自定义标签栏，您的图像图标将位于标签的中心。

# string - 传递字符串包括：符号到 -Replace 脚本中的变量

> ID：12492987
> 
> 赞同：1
> 
> 时间：2012-09-19T10:35:10.040
> 
> 标签：string, powershell, replace, literals

```
$FilePath = 'Z:\next\ResourcesConfiguration.config'
$oldString = 'Z:\next\Core\Resources\'
$NewString = 'G:\PublishDir\next\Core\Resources\' 
```

任何想法如何替换具有 : 登录的字符串。我想更改配置文件中的路径。简单的代码对此不起作用。试过以下

```
(Get-Content $original_file) | Foreach-Object {
 $_ -replace $oldString, $NewString
 } | Set-Content $destination_file 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T10:44:36.743

Replace 运算符采用正则表达式模式，'\' 在正则表达式中具有特殊含义，它是转义字符。您需要将每个反斜杠加倍，或者更好的是，使用转义方法：

```
$_ -replace [regex]::escape($oldString), $NewString 
```

或者，您可以使用 string.replace 方法，它需要一个字符串并且不需要特别注意：

```
$_.Replace($oldString,$NewString) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T10:43:20.077

尝试这个，

```
$oldString = [REGEX]::ESCAPE('Z:\next\Core\Resources\') 
```

您需要转义要搜索的模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T10:52:08.943

这有效：

```
$Source = 'Z:\Next\ResourceConfiguration.config'
$Dest = 'G:\PublishDir\next\ResourceConfiguration.config'
$RegEx = "Z:\\next\\Core\\Resources"
$Replace = 'G:\PublishDir\next\Core\Resources'

(Get-Content $FilePath) | Foreach-Object { $_ -replace $RegEx,$Replace } | Set-Content $Dest 
```

您的尝试不起作用的原因是`-replace`它的第一个参数是正则表达式。简而言之，您需要对目录路径中的反斜杠进行转义，这是通过添加一个额外的退格 ( `\\`) 来完成的。它期望第二个参数是一个字符串，因此不需要在那里进行任何更改。

# css - CSS 和 Button 问题仅在 IE7 和 Windows Server 2008 中出现

> ID：12492988
> 
> 赞同：1
> 
> 时间：2012-09-19T10:35:12.930
> 
> 标签：css, asp.net-mvc, internet-explorer-7, css3pie

我有一个 CSS 问题，似乎只能在 Windows 2008 Web 服务器上的 IE7 中查看网页时重现。在我的网站开发版本（这是一个 widnows 7 环境）上查看页面时不会出现此问题。注意：windows 2008 server 和 dev 代码（和数据库数据）是一样的。

问题是当显示弹出窗口时，其中一个按钮位置未更新（实际上，按钮的图像未更新，按钮本身已移动但未按原样显示）。这种问题通常很容易解决，因为您可以检查 IE9 中的元素，但在这种情况下，您看不到输出的 HTML，也无法在弹出窗口中选择元素。我无法在我的开发机器上重现这一点，也无法像通常那样检查浏览器中的按钮元素。

是否有任何已知问题可能仅由托管在某些版本的 Windows Server 上的网站引起？（我想不出开发环境和服务器之间有什么不同）

我在互联网上进行了研究，但关于这个具体问题似乎很少。我的最佳猜测是它可能是由名为 PIE.htc 的网站使用的东西引起的，它可能是此处列出的问题之一：[http://css3pie.com/documentation/known-issues/][ 1]

[1]：[http](http://css3pie.com/documentation/known-issues/) ://css3pie.com/documentation/known-issues/但这是一个很长的镜头，我无法验证是否是这种情况，因为代码必须首先部署到 2008 服务器（我不能在开发环境中重现它并且无法检查元素）

我想不出还有什么可能导致这个问题，所以任何任何建议都将不胜感激。